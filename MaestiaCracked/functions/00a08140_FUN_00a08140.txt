PROGRAM  : Maestia.exe
FUNCTION : FUN_00a08140
ENTRY    : 00a08140
BODY     : [[00a08140, 00a08214]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00a08140(void)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  void **ppvVar4;
  int in_ECX;
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b25d7b;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*(char *)(in_ECX + 0xe0) != '\0') {
    ppvVar4 = &local_10;
    if (((DAT_0172491c != 0) && (ppvVar4 = (void **)*DAT_00da9894, ppvVar4 != (void **)0x0)) &&
       (ppvVar4[0x6a] != (void *)0x0)) {
      ExceptionList = &local_10;
      FUN_00406460(L"IDS_UNIDENTIFIED_NOT_USEITEM");
      local_8 = 0;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 1;
      (**(code **)(*piVar1 + 0x44))(uVar3,3,uVar2);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      ppvVar4 = (void **)FUN_00406560();
    }
    ExceptionList = local_10;
    return (uint)ppvVar4 & 0xffffff00;
  }
  return CONCAT31((int3)((uint)&local_10 >> 8),1);
}



============================================================
DISASSEMBLY
============================================================
00a08140 : PUSH EBP
00a08141 : MOV EBP,ESP
00a08143 : PUSH -0x1
00a08145 : PUSH 0xb25d7b
00a0814a : MOV EAX,FS:[0x0]
00a08150 : PUSH EAX
00a08151 : SUB ESP,0x38
00a08154 : PUSH ESI
00a08155 : PUSH EDI
00a08156 : MOV EAX,[0x00d66fa0]
00a0815b : XOR EAX,EBP
00a0815d : PUSH EAX
00a0815e : LEA EAX,[EBP + -0xc]
00a08161 : MOV FS:[0x0],EAX
00a08167 : CMP byte ptr [ECX + 0xe0],0x0
00a0816e : JZ 0x00a08202
00a08174 : CMP dword ptr [0x0172491c],0x0
00a0817b : JZ 0x00a081ef
00a0817d : MOV EAX,[0x00da9894]
00a08182 : MOV EAX,dword ptr [EAX]
00a08184 : TEST EAX,EAX
00a08186 : JZ 0x00a081ef
00a08188 : CMP dword ptr [EAX + 0x1a8],0x0
00a0818f : JZ 0x00a081ef
00a08191 : PUSH 0xcaa780
00a08196 : LEA ECX,[EBP + -0x28]
00a08199 : CALL 0x00406460
00a0819e : MOV dword ptr [EBP + -0x4],0x0
00a081a5 : MOV ECX,dword ptr [0x00da9894]
00a081ab : MOV EAX,dword ptr [ECX]
00a081ad : MOV ECX,dword ptr [0x0172491c]
00a081b3 : MOV ESI,dword ptr [EAX + 0x1a8]
00a081b9 : LEA EDX,[EBP + -0x28]
00a081bc : PUSH EDX
00a081bd : LEA EDI,[EBP + -0x44]
00a081c0 : CALL 0x0081d120
00a081c5 : MOV byte ptr [EBP + -0x4],0x1
00a081c9 : MOV EDX,dword ptr [ESI]
00a081cb : PUSH 0x3
00a081cd : PUSH EAX
00a081ce : MOV EAX,dword ptr [EDX + 0x44]
00a081d1 : MOV ECX,ESI
00a081d3 : CALL EAX
00a081d5 : MOV byte ptr [EBP + -0x4],0x0
00a081d9 : MOV ECX,EDI
00a081db : CALL 0x00406560
00a081e0 : MOV dword ptr [EBP + -0x4],0xffffffff
00a081e7 : LEA ECX,[EBP + -0x28]
00a081ea : CALL 0x00406560
00a081ef : XOR AL,AL
00a081f1 : MOV ECX,dword ptr [EBP + -0xc]
00a081f4 : MOV dword ptr FS:[0x0],ECX
00a081fb : POP ECX
00a081fc : POP EDI
00a081fd : POP ESI
00a081fe : MOV ESP,EBP
00a08200 : POP EBP
00a08201 : RET
00a08202 : MOV AL,0x1
00a08204 : MOV ECX,dword ptr [EBP + -0xc]
00a08207 : MOV dword ptr FS:[0x0],ECX
00a0820e : POP ECX
00a0820f : POP EDI
00a08210 : POP ESI
00a08211 : MOV ESP,EBP
00a08213 : POP EBP
00a08214 : RET
