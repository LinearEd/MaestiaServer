PROGRAM  : Maestia.exe
FUNCTION : FUN_00513330
ENTRY    : 00513330
BODY     : [[00513330, 00513465]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00513330(void)

{
  GImage *this;
  GRefCountNTSImpl *this_00;
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  char *local_10;
  int local_8;
  int local_4;
  
  this = (GImage *)FUN_00515840(0x30,0);
  if (this == (GImage *)0x0) {
    this_00 = (GRefCountNTSImpl *)0x0;
  }
  else {
    this_00 = (GRefCountNTSImpl *)GImage::GImage(this,1,0x39,0x24);
    if (this_00 != (GRefCountNTSImpl *)0x0) {
      local_4 = 0;
      local_10 = s_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa_00d65048;
      do {
        iVar1 = 0;
        do {
          uVar3 = 0;
          switch(*local_10) {
          case '#':
            uVar3 = 0xff000000;
            break;
          case 'a':
            uVar3 = 0x80ff00ff;
            break;
          case 'b':
            uVar3 = 0x802020ff;
            break;
          case 'c':
            uVar3 = 0x8000ffff;
            break;
          case 'g':
            uVar3 = 0x8020ff20;
            break;
          case 'r':
            uVar3 = 0x80ff2020;
            break;
          case 'y':
            uVar3 = 0x80ffff00;
          }
          local_8 = 0;
          do {
            iVar2 = 0;
            do {
              FUN_00518e70(iVar2 + iVar1,local_4 + local_8,uVar3);
              iVar2 = iVar2 + 1;
            } while (iVar2 < 3);
            local_8 = local_8 + 1;
          } while (local_8 < 3);
          local_10 = local_10 + 1;
          iVar1 = iVar1 + 3;
        } while (iVar1 < 0x39);
        local_4 = local_4 + 3;
      } while ((int)local_10 < 0xd6512c);
    }
  }
  iVar1 = FUN_00515840(0x24,0);
  if (iVar1 == 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = FUN_00512330(this_00,0);
  }
  if (this_00 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this_00);
  }
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
00513330 : MOV ECX,dword ptr [0x00d73250]
00513336 : SUB ESP,0x10
00513339 : PUSH ESI
0051333a : PUSH EDI
0051333b : XOR EDI,EDI
0051333d : PUSH EDI
0051333e : PUSH 0x30
00513340 : CALL 0x00515840
00513345 : CMP EAX,EDI
00513347 : JZ 0x00513395
00513349 : PUSH 0x24
0051334b : PUSH 0x39
0051334d : PUSH 0x1
0051334f : MOV ECX,EAX
00513351 : CALL 0x005199d0
00513356 : MOV ESI,EAX
00513358 : MOV dword ptr [ESP + 0xc],ESI
0051335c : CMP ESI,EDI
0051335e : JZ 0x00513430
00513364 : PUSH EBX
00513365 : MOV dword ptr [ESP + 0x18],EDI
00513369 : MOV EAX,0xd65048
0051336e : PUSH EBP
0051336f : NOP
00513370 : XOR EBP,EBP
00513372 : MOV dword ptr [ESP + 0x10],EAX
00513376 : MOV EAX,dword ptr [ESP + 0x10]
0051337a : MOVSX EAX,byte ptr [EAX]
0051337d : ADD EAX,-0x23
00513380 : XOR EDI,EDI
00513382 : CMP EAX,0x56
00513385 : JA 0x005133cb
00513387 : MOVZX ECX,byte ptr [EAX + 0x513488]
0051338e : JMP dword ptr [ECX*0x4 + 0x513468]
00513395 : MOV ESI,EDI
00513397 : JMP 0x00513430
0051339c : MOV EDI,0xff000000
005133a1 : JMP 0x005133cb
005133a3 : MOV EDI,0x80ff2020
005133a8 : JMP 0x005133cb
005133aa : MOV EDI,0x8020ff20
005133af : JMP 0x005133cb
005133b1 : MOV EDI,0x802020ff
005133b6 : JMP 0x005133cb
005133b8 : MOV EDI,0x80ffff00
005133bd : JMP 0x005133cb
005133bf : MOV EDI,0x80ff00ff
005133c4 : JMP 0x005133cb
005133c6 : MOV EDI,0x8000ffff
005133cb : MOV dword ptr [ESP + 0x18],0x0
005133d3 : MOV EDX,dword ptr [ESP + 0x1c]
005133d7 : MOV EAX,dword ptr [ESP + 0x18]
005133db : XOR ESI,ESI
005133dd : LEA EBX,[EDX + EAX*0x1]
005133e0 : PUSH EDI
005133e1 : PUSH EBX
005133e2 : LEA ECX,[ESI + EBP*0x1]
005133e5 : PUSH ECX
005133e6 : MOV ECX,dword ptr [ESP + 0x20]
005133ea : ADD ECX,0x8
005133ed : CALL 0x00518e70
005133f2 : INC ESI
005133f3 : CMP ESI,0x3
005133f6 : JL 0x005133e0
005133f8 : MOV EAX,dword ptr [ESP + 0x18]
005133fc : INC EAX
005133fd : CMP EAX,0x3
00513400 : MOV dword ptr [ESP + 0x18],EAX
00513404 : JL 0x005133d3
00513406 : INC dword ptr [ESP + 0x10]
0051340a : ADD EBP,0x3
0051340d : CMP EBP,0x39
00513410 : JL 0x00513376
00513416 : MOV EAX,dword ptr [ESP + 0x10]
0051341a : ADD dword ptr [ESP + 0x1c],0x3
0051341f : CMP EAX,0xd6512c
00513424 : JL 0x00513370
0051342a : MOV ESI,dword ptr [ESP + 0x14]
0051342e : POP EBP
0051342f : POP EBX
00513430 : MOV ECX,dword ptr [0x00d73250]
00513436 : PUSH 0x0
00513438 : PUSH 0x24
0051343a : CALL 0x00515840
0051343f : TEST EAX,EAX
00513441 : JZ 0x00513451
00513443 : PUSH 0x0
00513445 : PUSH ESI
00513446 : MOV ECX,EAX
00513448 : CALL 0x00512330
0051344d : MOV EDI,EAX
0051344f : JMP 0x00513453
00513451 : XOR EDI,EDI
00513453 : TEST ESI,ESI
00513455 : JZ 0x0051345e
00513457 : MOV ECX,ESI
00513459 : CALL 0x004ff7c0
0051345e : MOV EAX,EDI
00513460 : POP EDI
00513461 : POP ESI
00513462 : ADD ESP,0x10
00513465 : RET
