PROGRAM  : Maestia.exe
FUNCTION : FUN_009d1020
ENTRY    : 009d1020
BODY     : [[009d1020, 009d1603]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009d1020(void)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  uint local_160;
  uint local_144;
  uint local_128;
  undefined1 local_124 [4];
  undefined1 local_120 [4];
  undefined4 local_11c;
  char *local_118;
  WCHAR local_114 [128];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2d924;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  if (DAT_017210a0 == 0) {
    local_11c = 0x12000001;
    local_118 = "IDS_AUCTION_NO_MORE_FREE_BID";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000002;
    local_118 = "IDS_AUCTION_NOT_BIDDABLE_ITEM";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000003;
    local_118 = "IDS_AUCTION_NOT_ENOUGH_MONEY";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000004;
    local_118 = "IDS_AUCTION_INVALID_STATE";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000005;
    local_118 = "IDS_AUCTION_DB_MOVE_FAILED";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000006;
    local_118 = "IDS_AUCTION_DB_REGISTER_FAILED";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000007;
    local_118 = "IDS_AUCTION_BIDITEM_NOT_FOUND";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000008;
    local_118 = "IDS_AUCTION_CANNOT_CANCEL_REGISTRATION";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000009;
    local_118 = "IDS_AUCTION_INVALID_PARAM";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000a;
    local_118 = "IDS_AUCTION_DB_ERROR";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000b;
    local_118 = "IDS_AUCTION_USER_CANNOT_ENTER_BID";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000c;
    local_118 = "IDS_AUCTION_RESOURCE";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000d;
    local_118 = "IDS_AUCTION_INVALID_BID_PRICE";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000e;
    local_118 = "IDS_AUCTION_POCKET_FULL";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x1200000f;
    local_118 = "IDS_AUCTION_ITEM_MOVE_FAILED";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000010;
    local_118 = "IDS_AUCTION_INVALID_REFUND";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000011;
    local_118 = "IDS_AUCTION_NOT_OWNER";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000012;
    local_118 = "IDS_AUCTION_BID_TERMINATED";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000013;
    local_118 = "IDS_AUCTION_SERVICE_PAUSED";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000014;
    local_118 = "IDS_AUCTION_CAN_BUY_A_GM_ITEM_BUY_A_DAY";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000016;
    local_118 = "IDS_AUCTION_BIDDER_SELF_ITEM";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000015;
    local_118 = "IDS_AUCTION_SMALLER_MAX_COUNT";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x12000017;
    local_118 = "IDS_AUCTION_USER_OVER_GOLD";
    FUN_00451e00(local_124,&local_11c);
    local_11c = 0x10000001;
    local_118 = "IDS_AUCTION_USER_OVER_GOLD";
    FUN_00451e00(local_124,&local_11c);
  }
  FUN_004437f0(local_120);
  if (local_118 == DAT_0172109c) {
    wsprintfW(local_114,L"Unknown Error: 0x%08x");
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_00406460(local_114);
    local_8 = 2;
    (**(code **)(*piVar1 + 0x44))(uVar3,3,uVar2);
    local_8 = 0xffffffff;
    if (7 < local_144) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_00404350(*(undefined4 *)(local_118 + 0x10));
    local_8 = 0;
    uVar3 = FUN_0081d120(uVar3);
    local_8._0_1_ = 1;
    (**(code **)(*piVar1 + 0x44))(uVar3,3);
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_128) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = 0xffffffff;
    if (7 < local_160) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8 = 0xffffffff;
  FUN_008a1050(0xca);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009d1020 : PUSH EBP
009d1021 : MOV EBP,ESP
009d1023 : PUSH -0x1
009d1025 : PUSH 0xb2d924
009d102a : MOV EAX,FS:[0x0]
009d1030 : PUSH EAX
009d1031 : SUB ESP,0x16c
009d1037 : MOV EAX,[0x00d66fa0]
009d103c : XOR EAX,EBP
009d103e : MOV dword ptr [EBP + -0x10],EAX
009d1041 : PUSH EBX
009d1042 : PUSH ESI
009d1043 : PUSH EDI
009d1044 : PUSH EAX
009d1045 : LEA EAX,[EBP + -0xc]
009d1048 : MOV FS:[0x0],EAX
009d104e : MOV ESI,ECX
009d1050 : XOR EDI,EDI
009d1052 : CMP dword ptr [0x017210a0],EDI
009d1058 : JNZ 0x009d147e
009d105e : LEA EAX,[EBP + 0xfffffee8]
009d1064 : PUSH EAX
009d1065 : LEA ECX,[EBP + 0xfffffee0]
009d106b : PUSH ECX
009d106c : MOV EAX,0x1721098
009d1071 : MOV dword ptr [EBP + 0xfffffee8],0x12000001
009d107b : MOV dword ptr [EBP + 0xfffffeec],0xc96960
009d1085 : CALL 0x00451e00
009d108a : LEA EDX,[EBP + 0xfffffee8]
009d1090 : PUSH EDX
009d1091 : LEA EAX,[EBP + 0xfffffee0]
009d1097 : PUSH EAX
009d1098 : MOV EAX,0x1721098
009d109d : MOV dword ptr [EBP + 0xfffffee8],0x12000002
009d10a7 : MOV dword ptr [EBP + 0xfffffeec],0xc96980
009d10b1 : CALL 0x00451e00
009d10b6 : LEA ECX,[EBP + 0xfffffee8]
009d10bc : PUSH ECX
009d10bd : LEA EDX,[EBP + 0xfffffee0]
009d10c3 : PUSH EDX
009d10c4 : MOV EAX,0x1721098
009d10c9 : MOV dword ptr [EBP + 0xfffffee8],0x12000003
009d10d3 : MOV dword ptr [EBP + 0xfffffeec],0xc969a0
009d10dd : CALL 0x00451e00
009d10e2 : LEA EAX,[EBP + 0xfffffee8]
009d10e8 : PUSH EAX
009d10e9 : LEA ECX,[EBP + 0xfffffee0]
009d10ef : PUSH ECX
009d10f0 : MOV EAX,0x1721098
009d10f5 : MOV dword ptr [EBP + 0xfffffee8],0x12000004
009d10ff : MOV dword ptr [EBP + 0xfffffeec],0xc968b4
009d1109 : CALL 0x00451e00
009d110e : LEA EDX,[EBP + 0xfffffee8]
009d1114 : PUSH EDX
009d1115 : LEA EAX,[EBP + 0xfffffee0]
009d111b : PUSH EAX
009d111c : MOV EAX,0x1721098
009d1121 : MOV dword ptr [EBP + 0xfffffee8],0x12000005
009d112b : MOV dword ptr [EBP + 0xfffffeec],0xc969c0
009d1135 : CALL 0x00451e00
009d113a : LEA ECX,[EBP + 0xfffffee8]
009d1140 : PUSH ECX
009d1141 : LEA EDX,[EBP + 0xfffffee0]
009d1147 : PUSH EDX
009d1148 : MOV EAX,0x1721098
009d114d : MOV dword ptr [EBP + 0xfffffee8],0x12000006
009d1157 : MOV dword ptr [EBP + 0xfffffeec],0xc969dc
009d1161 : CALL 0x00451e00
009d1166 : LEA EAX,[EBP + 0xfffffee8]
009d116c : PUSH EAX
009d116d : LEA ECX,[EBP + 0xfffffee0]
009d1173 : PUSH ECX
009d1174 : MOV EAX,0x1721098
009d1179 : MOV dword ptr [EBP + 0xfffffee8],0x12000007
009d1183 : MOV dword ptr [EBP + 0xfffffeec],0xc969fc
009d118d : CALL 0x00451e00
009d1192 : LEA EDX,[EBP + 0xfffffee8]
009d1198 : PUSH EDX
009d1199 : LEA EAX,[EBP + 0xfffffee0]
009d119f : PUSH EAX
009d11a0 : MOV EAX,0x1721098
009d11a5 : MOV dword ptr [EBP + 0xfffffee8],0x12000008
009d11af : MOV dword ptr [EBP + 0xfffffeec],0xc96a1c
009d11b9 : CALL 0x00451e00
009d11be : LEA ECX,[EBP + 0xfffffee8]
009d11c4 : PUSH ECX
009d11c5 : LEA EDX,[EBP + 0xfffffee0]
009d11cb : PUSH EDX
009d11cc : MOV EAX,0x1721098
009d11d1 : MOV dword ptr [EBP + 0xfffffee8],0x12000009
009d11db : MOV dword ptr [EBP + 0xfffffeec],0xc96a44
009d11e5 : CALL 0x00451e00
009d11ea : LEA EAX,[EBP + 0xfffffee8]
009d11f0 : PUSH EAX
009d11f1 : LEA ECX,[EBP + 0xfffffee0]
009d11f7 : PUSH ECX
009d11f8 : MOV EAX,0x1721098
009d11fd : MOV dword ptr [EBP + 0xfffffee8],0x1200000a
009d1207 : MOV dword ptr [EBP + 0xfffffeec],0xc96a60
009d1211 : CALL 0x00451e00
009d1216 : MOV dword ptr [EBP + 0xfffffee8],0x1200000b
009d1220 : LEA EDX,[EBP + 0xfffffee8]
009d1226 : PUSH EDX
009d1227 : LEA EAX,[EBP + 0xfffffee0]
009d122d : PUSH EAX
009d122e : MOV EAX,0x1721098
009d1233 : MOV dword ptr [EBP + 0xfffffeec],0xc96a78
009d123d : CALL 0x00451e00
009d1242 : LEA ECX,[EBP + 0xfffffee8]
009d1248 : PUSH ECX
009d1249 : LEA EDX,[EBP + 0xfffffee0]
009d124f : PUSH EDX
009d1250 : MOV EAX,0x1721098
009d1255 : MOV dword ptr [EBP + 0xfffffee8],0x1200000c
009d125f : MOV dword ptr [EBP + 0xfffffeec],0xc96a9c
009d1269 : CALL 0x00451e00
009d126e : LEA EAX,[EBP + 0xfffffee8]
009d1274 : PUSH EAX
009d1275 : LEA ECX,[EBP + 0xfffffee0]
009d127b : PUSH ECX
009d127c : MOV EAX,0x1721098
009d1281 : MOV dword ptr [EBP + 0xfffffee8],0x1200000d
009d128b : MOV dword ptr [EBP + 0xfffffeec],0xc96ab4
009d1295 : CALL 0x00451e00
009d129a : LEA EDX,[EBP + 0xfffffee8]
009d12a0 : PUSH EDX
009d12a1 : LEA EAX,[EBP + 0xfffffee0]
009d12a7 : PUSH EAX
009d12a8 : MOV EAX,0x1721098
009d12ad : MOV dword ptr [EBP + 0xfffffee8],0x1200000e
009d12b7 : MOV dword ptr [EBP + 0xfffffeec],0xc96ad4
009d12c1 : CALL 0x00451e00
009d12c6 : LEA ECX,[EBP + 0xfffffee8]
009d12cc : PUSH ECX
009d12cd : LEA EDX,[EBP + 0xfffffee0]
009d12d3 : PUSH EDX
009d12d4 : MOV EAX,0x1721098
009d12d9 : MOV dword ptr [EBP + 0xfffffee8],0x1200000f
009d12e3 : MOV dword ptr [EBP + 0xfffffeec],0xc96aec
009d12ed : CALL 0x00451e00
009d12f2 : LEA EAX,[EBP + 0xfffffee8]
009d12f8 : PUSH EAX
009d12f9 : LEA ECX,[EBP + 0xfffffee0]
009d12ff : PUSH ECX
009d1300 : MOV EAX,0x1721098
009d1305 : MOV dword ptr [EBP + 0xfffffee8],0x12000010
009d130f : MOV dword ptr [EBP + 0xfffffeec],0xc96b0c
009d1319 : CALL 0x00451e00
009d131e : LEA EDX,[EBP + 0xfffffee8]
009d1324 : PUSH EDX
009d1325 : LEA EAX,[EBP + 0xfffffee0]
009d132b : PUSH EAX
009d132c : MOV EAX,0x1721098
009d1331 : MOV dword ptr [EBP + 0xfffffee8],0x12000011
009d133b : MOV dword ptr [EBP + 0xfffffeec],0xc96b28
009d1345 : CALL 0x00451e00
009d134a : LEA ECX,[EBP + 0xfffffee8]
009d1350 : PUSH ECX
009d1351 : LEA EDX,[EBP + 0xfffffee0]
009d1357 : PUSH EDX
009d1358 : MOV EAX,0x1721098
009d135d : MOV dword ptr [EBP + 0xfffffee8],0x12000012
009d1367 : MOV dword ptr [EBP + 0xfffffeec],0xc96b40
009d1371 : CALL 0x00451e00
009d1376 : LEA EAX,[EBP + 0xfffffee8]
009d137c : PUSH EAX
009d137d : LEA ECX,[EBP + 0xfffffee0]
009d1383 : PUSH ECX
009d1384 : MOV EAX,0x1721098
009d1389 : MOV dword ptr [EBP + 0xfffffee8],0x12000013
009d1393 : MOV dword ptr [EBP + 0xfffffeec],0xc96b5c
009d139d : CALL 0x00451e00
009d13a2 : LEA EDX,[EBP + 0xfffffee8]
009d13a8 : PUSH EDX
009d13a9 : LEA EAX,[EBP + 0xfffffee0]
009d13af : PUSH EAX
009d13b0 : MOV EAX,0x1721098
009d13b5 : MOV dword ptr [EBP + 0xfffffee8],0x12000014
009d13bf : MOV dword ptr [EBP + 0xfffffeec],0xc96b78
009d13c9 : CALL 0x00451e00
009d13ce : MOV dword ptr [EBP + 0xfffffee8],0x12000016
009d13d8 : MOV dword ptr [EBP + 0xfffffeec],0xc96ba0
009d13e2 : LEA ECX,[EBP + 0xfffffee8]
009d13e8 : PUSH ECX
009d13e9 : LEA EDX,[EBP + 0xfffffee0]
009d13ef : PUSH EDX
009d13f0 : MOV EAX,0x1721098
009d13f5 : CALL 0x00451e00
009d13fa : LEA EAX,[EBP + 0xfffffee8]
009d1400 : PUSH EAX
009d1401 : LEA ECX,[EBP + 0xfffffee0]
009d1407 : PUSH ECX
009d1408 : MOV EAX,0x1721098
009d140d : MOV dword ptr [EBP + 0xfffffee8],0x12000015
009d1417 : MOV dword ptr [EBP + 0xfffffeec],0xc96bc0
009d1421 : CALL 0x00451e00
009d1426 : LEA EDX,[EBP + 0xfffffee8]
009d142c : PUSH EDX
009d142d : LEA EAX,[EBP + 0xfffffee0]
009d1433 : PUSH EAX
009d1434 : MOV EAX,0x1721098
009d1439 : MOV dword ptr [EBP + 0xfffffee8],0x12000017
009d1443 : MOV dword ptr [EBP + 0xfffffeec],0xc96be0
009d144d : CALL 0x00451e00
009d1452 : LEA ECX,[EBP + 0xfffffee8]
009d1458 : PUSH ECX
009d1459 : LEA EDX,[EBP + 0xfffffee0]
009d145f : PUSH EDX
009d1460 : MOV EAX,0x1721098
009d1465 : MOV dword ptr [EBP + 0xfffffee8],0x10000001
009d146f : MOV dword ptr [EBP + 0xfffffeec],0xc96bfc
009d1479 : CALL 0x00451e00
009d147e : LEA EAX,[EBP + 0xfffffee4]
009d1484 : PUSH EAX
009d1485 : LEA EAX,[EBP + 0xfffffeec]
009d148b : MOV ECX,0x1721098
009d1490 : MOV dword ptr [EBP + 0xfffffee4],ESI
009d1496 : CALL 0x004437f0
009d149b : MOV ECX,dword ptr [EBP + 0xfffffeec]
009d14a1 : CMP ECX,dword ptr [0x0172109c]
009d14a7 : JZ 0x009d155b
009d14ad : MOV EDX,dword ptr [0x00da9894]
009d14b3 : MOV EAX,dword ptr [EDX]
009d14b5 : MOV EBX,dword ptr [EAX + 0x1a8]
009d14bb : MOV EAX,dword ptr [ECX + 0x10]
009d14be : PUSH EAX
009d14bf : LEA ESI,[EBP + 0xfffffe8c]
009d14c5 : CALL 0x00404350
009d14ca : ADD ESP,0x4
009d14cd : MOV dword ptr [EBP + -0x4],EDI
009d14d0 : MOV ECX,dword ptr [0x0172491c]
009d14d6 : PUSH EAX
009d14d7 : LEA EDI,[EBP + 0xfffffec4]
009d14dd : CALL 0x0081d120
009d14e2 : MOV byte ptr [EBP + -0x4],0x1
009d14e6 : MOV EDX,dword ptr [EBX]
009d14e8 : PUSH 0x3
009d14ea : PUSH EAX
009d14eb : MOV EAX,dword ptr [EDX + 0x44]
009d14ee : MOV ECX,EBX
009d14f0 : CALL EAX
009d14f2 : MOV byte ptr [EBP + -0x4],0x0
009d14f6 : MOV ESI,0x8
009d14fb : CMP dword ptr [EBP + 0xfffffedc],ESI
009d1501 : JC 0x009d150e
009d1503 : MOV ECX,dword ptr [EBP + 0xfffffec8]
009d1509 : CALL 0x006f04e0
009d150e : MOV EBX,0x7
009d1513 : XOR EDI,EDI
009d1515 : XOR ECX,ECX
009d1517 : MOV dword ptr [EBP + 0xfffffedc],EBX
009d151d : MOV dword ptr [EBP + 0xfffffed8],EDI
009d1523 : MOV word ptr [EBP + 0xfffffec8],CX
009d152a : MOV dword ptr [EBP + -0x4],0xffffffff
009d1531 : CMP dword ptr [EBP + 0xfffffea4],ESI
009d1537 : JC 0x009d1544
009d1539 : MOV ECX,dword ptr [EBP + 0xfffffe90]
009d153f : CALL 0x006f04e0
009d1544 : XOR EDX,EDX
009d1546 : MOV dword ptr [EBP + 0xfffffea4],EBX
009d154c : MOV dword ptr [EBP + 0xfffffea0],EDI
009d1552 : MOV word ptr [EBP + 0xfffffe90],DX
009d1559 : JMP 0x009d15d8
009d155b : PUSH ESI
009d155c : LEA EAX,[EBP + 0xfffffef0]
009d1562 : PUSH 0xc96c18
009d1567 : PUSH EAX
009d1568 : CALL dword ptr [0x00b85434]
009d156e : MOV ECX,dword ptr [0x00da9894]
009d1574 : MOV EAX,dword ptr [ECX]
009d1576 : MOV ESI,dword ptr [EAX + 0x1a8]
009d157c : ADD ESP,0xc
009d157f : LEA EDX,[EBP + 0xfffffef0]
009d1585 : PUSH EDX
009d1586 : LEA ECX,[EBP + 0xfffffea8]
009d158c : CALL 0x00406460
009d1591 : MOV dword ptr [EBP + -0x4],0x2
009d1598 : MOV EDX,dword ptr [ESI]
009d159a : PUSH 0x3
009d159c : PUSH EAX
009d159d : MOV EAX,dword ptr [EDX + 0x44]
009d15a0 : MOV ECX,ESI
009d15a2 : CALL EAX
009d15a4 : MOV dword ptr [EBP + -0x4],0xffffffff
009d15ab : CMP dword ptr [EBP + 0xfffffec0],0x8
009d15b2 : JC 0x009d15bf
009d15b4 : MOV ECX,dword ptr [EBP + 0xfffffeac]
009d15ba : CALL 0x006f04e0
009d15bf : XOR ECX,ECX
009d15c1 : MOV dword ptr [EBP + 0xfffffec0],0x7
009d15cb : MOV dword ptr [EBP + 0xfffffebc],EDI
009d15d1 : MOV word ptr [EBP + 0xfffffeac],CX
009d15d8 : MOV ECX,dword ptr [0x017248dc]
009d15de : PUSH 0xca
009d15e3 : CALL 0x008a1050
009d15e8 : MOV ECX,dword ptr [EBP + -0xc]
009d15eb : MOV dword ptr FS:[0x0],ECX
009d15f2 : POP ECX
009d15f3 : POP EDI
009d15f4 : POP ESI
009d15f5 : POP EBX
009d15f6 : MOV ECX,dword ptr [EBP + -0x10]
009d15f9 : XOR ECX,EBP
009d15fb : CALL 0x00633e6b
009d1600 : MOV ESP,EBP
009d1602 : POP EBP
009d1603 : RET
