PROGRAM  : Maestia.exe
FUNCTION : FUN_00551010
ENTRY    : 00551010
BODY     : [[00551010, 0055108c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00551010(undefined4 param_1,undefined4 *param_2)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int *in_ECX;
  
  iVar3 = *(int *)*param_2;
  uVar4 = *(uint *)(iVar3 + 0xc);
  iVar5 = *in_ECX;
  if ((iVar5 != 0) && (iVar6 = FUN_0054f340(param_2,*(uint *)(iVar5 + 4) & uVar4), -1 < iVar6)) {
    *(int *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1;
    piVar1 = (int *)(*(int *)(iVar5 + 0xc + iVar6 * 0x18) + 8);
    *piVar1 = *piVar1 + -1;
    piVar2 = (int *)(iVar5 + 0xc + iVar6 * 0x18);
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    *piVar2 = iVar3;
    iVar3 = param_2[1];
    FUN_005268b0(iVar3);
    *(undefined1 *)((int)piVar2 + 5) = *(undefined1 *)(iVar3 + 1);
    return;
  }
  FUN_00550960(param_1,param_2,uVar4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00551010 : PUSH EBX
00551011 : PUSH EBP
00551012 : MOV EBP,dword ptr [ESP + 0x10]
00551016 : MOV EAX,dword ptr [EBP]
00551019 : PUSH ESI
0055101a : MOV ESI,dword ptr [EAX]
0055101c : MOV EAX,dword ptr [ESI + 0xc]
0055101f : MOV EBX,ECX
00551021 : PUSH EDI
00551022 : MOV EDI,dword ptr [EBX]
00551024 : MOV dword ptr [ESP + 0x18],EAX
00551028 : TEST EDI,EDI
0055102a : JZ 0x00551078
0055102c : MOV ECX,dword ptr [EDI + 0x4]
0055102f : AND ECX,EAX
00551031 : PUSH ECX
00551032 : PUSH EBP
00551033 : MOV ECX,EBX
00551035 : CALL 0x0054f340
0055103a : TEST EAX,EAX
0055103c : JL 0x00551074
0055103e : INC dword ptr [ESI + 0x8]
00551041 : LEA EDX,[EAX + EAX*0x2]
00551044 : MOV ECX,dword ptr [EDI + EDX*0x8 + 0xc]
00551048 : ADD dword ptr [ECX + 0x8],-0x1
0055104c : LEA EDI,[EDI + EDX*0x8 + 0xc]
00551050 : JNZ 0x00551057
00551052 : CALL 0x00525340
00551057 : MOV dword ptr [EDI],ESI
00551059 : MOV EBP,dword ptr [EBP + 0x4]
0055105c : LEA ESI,[EDI + 0x4]
0055105f : PUSH EBP
00551060 : MOV ECX,ESI
00551062 : CALL 0x005268b0
00551067 : MOV AL,byte ptr [EBP + 0x1]
0055106a : POP EDI
0055106b : MOV byte ptr [ESI + 0x1],AL
0055106e : POP ESI
0055106f : POP EBP
00551070 : POP EBX
00551071 : RET 0x8
00551074 : MOV EAX,dword ptr [ESP + 0x18]
00551078 : MOV ECX,dword ptr [ESP + 0x14]
0055107c : PUSH EAX
0055107d : PUSH EBP
0055107e : PUSH ECX
0055107f : MOV ECX,EBX
00551081 : CALL 0x00550960
00551086 : POP EDI
00551087 : POP ESI
00551088 : POP EBP
00551089 : POP EBX
0055108a : RET 0x8
