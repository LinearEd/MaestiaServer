PROGRAM  : Maestia.exe
FUNCTION : FUN_006d8f20
ENTRY    : 006d8f20
BODY     : [[006d8f20, 006d8f3e] [006d8f40, 006d8fb8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006d8f20(undefined4 param_1,char param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *unaff_ESI;
  int iVar5;
  
  iVar3 = unaff_ESI[4];
  iVar1 = unaff_ESI[2];
  iVar4 = unaff_ESI[6] * iVar1 * 0x80;
  iVar5 = 0;
  if (0 < iVar3) {
    do {
      iVar2 = iVar3 - iVar5;
      if (unaff_ESI[5] < iVar3 - iVar5) {
        iVar2 = unaff_ESI[5];
      }
      iVar3 = unaff_ESI[7] - (unaff_ESI[6] + iVar5);
      if (iVar3 <= iVar2) {
        iVar2 = iVar3;
      }
      iVar3 = unaff_ESI[1] - (unaff_ESI[6] + iVar5);
      if (iVar3 <= iVar2) {
        iVar2 = iVar3;
      }
      if (iVar2 < 1) {
        return;
      }
      iVar2 = iVar2 * iVar1 * 0x80;
      if (param_2 == '\0') {
        (*(code *)unaff_ESI[10])
                  (param_1,unaff_ESI + 10,*(undefined4 *)(*unaff_ESI + iVar5 * 4),iVar4,iVar2);
      }
      else {
        (*(code *)unaff_ESI[0xb])(param_1,unaff_ESI + 10,*(undefined4 *)(*unaff_ESI + iVar5 * 4));
      }
      iVar5 = iVar5 + unaff_ESI[5];
      iVar3 = unaff_ESI[4];
      iVar4 = iVar4 + iVar2;
    } while (iVar5 < iVar3);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006d8f20 : PUSH ECX
006d8f21 : MOV EAX,dword ptr [ESI + 0x10]
006d8f24 : PUSH EBX
006d8f25 : MOV EBX,dword ptr [ESI + 0x18]
006d8f28 : PUSH EBP
006d8f29 : MOV EBP,dword ptr [ESI + 0x8]
006d8f2c : SHL EBP,0x7
006d8f2f : PUSH EDI
006d8f30 : IMUL EBX,EBP
006d8f33 : XOR EDI,EDI
006d8f35 : MOV dword ptr [ESP + 0xc],EBP
006d8f39 : TEST EAX,EAX
006d8f3b : JLE 0x006d8fb4
006d8f3d : JMP 0x006d8f44
006d8f40 : MOV EBP,dword ptr [ESP + 0xc]
006d8f44 : MOV ECX,dword ptr [ESI + 0x14]
006d8f47 : SUB EAX,EDI
006d8f49 : CMP ECX,EAX
006d8f4b : JGE 0x006d8f4f
006d8f4d : MOV EAX,ECX
006d8f4f : MOV ECX,dword ptr [ESI + 0x18]
006d8f52 : MOV EDX,dword ptr [ESI + 0x1c]
006d8f55 : ADD ECX,EDI
006d8f57 : SUB EDX,ECX
006d8f59 : CMP EAX,EDX
006d8f5b : JL 0x006d8f5f
006d8f5d : MOV EAX,EDX
006d8f5f : MOV EDX,dword ptr [ESI + 0x4]
006d8f62 : SUB EDX,ECX
006d8f64 : CMP EAX,EDX
006d8f66 : JL 0x006d8f6a
006d8f68 : MOV EAX,EDX
006d8f6a : TEST EAX,EAX
006d8f6c : JLE 0x006d8fb4
006d8f6e : IMUL EAX,EBP
006d8f71 : CMP byte ptr [ESP + 0x18],0x0
006d8f76 : MOV EBP,EAX
006d8f78 : PUSH EBP
006d8f79 : PUSH EBX
006d8f7a : JZ 0x006d8f92
006d8f7c : MOV EAX,dword ptr [ESI]
006d8f7e : MOV ECX,dword ptr [EAX + EDI*0x4]
006d8f81 : MOV EAX,dword ptr [ESP + 0x1c]
006d8f85 : PUSH ECX
006d8f86 : MOV ECX,dword ptr [ESI + 0x2c]
006d8f89 : LEA EDX,[ESI + 0x28]
006d8f8c : PUSH EDX
006d8f8d : PUSH EAX
006d8f8e : CALL ECX
006d8f90 : JMP 0x006d8fa5
006d8f92 : MOV EDX,dword ptr [ESI]
006d8f94 : MOV ECX,dword ptr [EDX + EDI*0x4]
006d8f97 : MOV EDX,dword ptr [ESP + 0x1c]
006d8f9b : LEA EAX,[ESI + 0x28]
006d8f9e : PUSH ECX
006d8f9f : PUSH EAX
006d8fa0 : MOV EAX,dword ptr [EAX]
006d8fa2 : PUSH EDX
006d8fa3 : CALL EAX
006d8fa5 : ADD EDI,dword ptr [ESI + 0x14]
006d8fa8 : MOV EAX,dword ptr [ESI + 0x10]
006d8fab : ADD ESP,0x14
006d8fae : ADD EBX,EBP
006d8fb0 : CMP EDI,EAX
006d8fb2 : JL 0x006d8f40
006d8fb4 : POP EDI
006d8fb5 : POP EBP
006d8fb6 : POP EBX
006d8fb7 : POP ECX
006d8fb8 : RET
