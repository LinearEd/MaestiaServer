PROGRAM  : Maestia.exe
FUNCTION : FUN_00598d70
ENTRY    : 00598d70
BODY     : [[00598d70, 00599024]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00598d70(void)

{
  char cVar1;
  int iVar2;
  GRefCountImpl *this;
  GRefCountImpl *this_00;
  int *piVar3;
  int in_ECX;
  undefined4 unaff_EBX;
  GRefCountImpl *unaff_EBP;
  undefined4 unaff_EDI;
  longlong lVar4;
  undefined4 uVar5;
  undefined8 uVar6;
  undefined4 *puStack_4c;
  char *pcStack_48;
  GRefCountImpl *apGStack_3c [5];
  undefined1 auStack_28 [4];
  uint uStack_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 uStack_18;
  undefined4 uStack_14;
  
  if (**(int **)(in_ECX + 0xc) == 0) {
    return 0;
  }
  pcStack_48 = (char *)0x0;
  puStack_4c = (undefined4 *)0x598d88;
  iVar2 = FUN_0056b260();
  if (iVar2 == 0) {
    return 0;
  }
  local_20 = 0;
  local_1c = 0;
  pcStack_48 = "_global.gfx_ime_candidate_list_state";
  puStack_4c = &local_20;
  cVar1 = (**(code **)(*(int *)**(undefined4 **)(in_ECX + 0xc) + 0x44))();
  if (cVar1 == '\0') {
    FUN_005975d0(0);
  }
  if ((double)CONCAT44(local_1c,local_20) < 0.0) {
    if ((uStack_24 >> 6 & 1) == 0) {
      return 0;
    }
    FUN_00588b40(auStack_28,local_20);
    return 0;
  }
  iVar2 = FUN_0056b260();
  if ((iVar2 != 0) || ((double)CONCAT44(local_1c,local_20) == 1.0)) {
    if ((uStack_24 >> 6 & 1) != 0) {
      FUN_00588b40(auStack_28,local_20);
    }
    return 1;
  }
  uStack_18 = 0;
  uStack_14 = 0;
  uVar6 = CONCAT44(unaff_EBX,unaff_EDI);
  uVar5 = 10;
  this = (GRefCountImpl *)(**(code **)(*(int *)(**(int **)(in_ECX + 0xc) + 8) + 0xc))(10);
  apGStack_3c[0] = this;
  this_00 = (GRefCountImpl *)
            (**(code **)(*(int *)(**(int **)(in_ECX + 0xc) + 8) + 0xc))(0xb,uVar5,uVar6);
  if (this == (GRefCountImpl *)0x0) {
    this = this_00;
    if (this_00 == (GRefCountImpl *)0x0) goto LAB_00598fe3;
  }
  else {
    FUN_0051b6e0();
    FUN_0056b660();
    FUN_00561320(0,*(int *)(in_ECX + 0xc) + 0xc,&pcStack_48);
    FUN_0051b6e0();
    if (this_00 == (GRefCountImpl *)0x0) {
      FUN_005a2340(&puStack_4c,apGStack_3c);
    }
    else {
      (**(code **)(*(int *)this_00 + 4))();
    }
    lVar4 = (**(code **)(*(int *)this + 8))();
    if (lVar4 == -1) {
      FUN_0045b730();
      FUN_00512c60();
      FUN_0045b730();
      if (this_00 != (GRefCountImpl *)0x0) {
        GRefCountImpl::Release(this_00);
      }
    }
    else {
      FUN_0045b730();
      FUN_00512c60();
      FUN_0045b730();
      FUN_005975d0(0x3ff0000000000000);
      (**(code **)(*(int *)**(undefined4 **)(in_ECX + 0xc) + 0x40))
                ("_global.gfx_ime_candidate_list_state",&local_20,1);
      iVar2 = FUN_00515840(0x68,0);
      if (iVar2 != 0) {
        FUN_0056ebb0(9999,*(int *)(in_ECX + 0xc) + 0xc,0,0,1);
      }
      iVar2 = FUN_00515840(0x3c,0);
      if (iVar2 == 0) {
        iVar2 = 0;
      }
      else {
        piVar3 = (int *)FUN_0056b260();
        uVar5 = (**(code **)(*piVar3 + 0x5c))();
        iVar2 = FUN_00598ae0(in_ECX,*(undefined4 *)(in_ECX + 0xc),uVar5);
      }
      FUN_005271c0();
      FUN_00571790();
      if (iVar2 != 0) {
        FUN_00503db0();
      }
      this = unaff_EBP;
      if (this_00 != (GRefCountImpl *)0x0) {
        GRefCountImpl::Release(this_00);
      }
    }
  }
  GRefCountImpl::Release(this);
LAB_00598fe3:
  FUN_0045ac80();
  FUN_0045ac80();
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00598d70 : SUB ESP,0x3c
00598d73 : PUSH EBP
00598d74 : PUSH ESI
00598d75 : MOV ESI,ECX
00598d77 : MOV EAX,dword ptr [ESI + 0xc]
00598d7a : XOR EBP,EBP
00598d7c : CMP dword ptr [EAX],EBP
00598d7e : JZ 0x00598dea
00598d80 : MOV ECX,dword ptr [EAX]
00598d82 : PUSH EBP
00598d83 : CALL 0x0056b260
00598d88 : TEST EAX,EAX
00598d8a : JZ 0x00598dea
00598d8c : MOV EAX,dword ptr [ESI + 0xc]
00598d8f : MOV dword ptr [ESP + 0x24],EBP
00598d93 : MOV dword ptr [ESP + 0x28],EBP
00598d97 : MOV ECX,dword ptr [EAX]
00598d99 : MOV EDX,dword ptr [ECX]
00598d9b : MOV EDX,dword ptr [EDX + 0x44]
00598d9e : PUSH 0xb8ec58
00598da3 : LEA EAX,[ESP + 0x28]
00598da7 : PUSH EAX
00598da8 : CALL EDX
00598daa : TEST AL,AL
00598dac : JNZ 0x00598dbf
00598dae : FLDZ
00598db0 : SUB ESP,0x8
00598db3 : LEA ECX,[ESP + 0x2c]
00598db7 : FSTP double ptr [ESP]
00598dba : CALL 0x005975d0
00598dbf : FLDZ
00598dc1 : FCOMP double ptr [ESP + 0x2c]
00598dc5 : FNSTSW AX
00598dc7 : TEST AH,0x41
00598dca : JNZ 0x00598df2
00598dcc : MOV EAX,dword ptr [ESP + 0x28]
00598dd0 : SHR EAX,0x6
00598dd3 : TEST AL,0x1
00598dd5 : JZ 0x00598dea
00598dd7 : MOV ECX,dword ptr [ESP + 0x2c]
00598ddb : PUSH ECX
00598ddc : MOV ECX,dword ptr [ESP + 0x28]
00598de0 : LEA EDX,[ESP + 0x28]
00598de4 : PUSH EDX
00598de5 : CALL 0x00588b40
00598dea : POP ESI
00598deb : XOR AL,AL
00598ded : POP EBP
00598dee : ADD ESP,0x3c
00598df1 : RET
00598df2 : MOV EAX,dword ptr [ESI + 0xc]
00598df5 : MOV ECX,dword ptr [EAX]
00598df7 : PUSH 0x270f
00598dfc : CALL 0x0056b260
00598e01 : TEST EAX,EAX
00598e03 : JNZ 0x00598fff
00598e09 : FLD1
00598e0b : FCOMP double ptr [ESP + 0x2c]
00598e0f : FNSTSW AX
00598e11 : TEST AH,0x44
00598e14 : JNP 0x00598fff
00598e1a : MOV ECX,dword ptr [ESI + 0xc]
00598e1d : MOV dword ptr [ESP + 0x34],EBP
00598e21 : MOV dword ptr [ESP + 0x38],EBP
00598e25 : MOV ECX,dword ptr [ECX]
00598e27 : MOV EDX,dword ptr [ECX + 0x8]
00598e2a : MOV EAX,dword ptr [EDX + 0xc]
00598e2d : PUSH EBX
00598e2e : ADD ECX,0x8
00598e31 : PUSH EDI
00598e32 : PUSH 0xa
00598e34 : CALL EAX
00598e36 : MOV ECX,dword ptr [ESI + 0xc]
00598e39 : MOV ECX,dword ptr [ECX]
00598e3b : MOV EDX,dword ptr [ECX + 0x8]
00598e3e : ADD ECX,0x8
00598e41 : MOV EDI,EAX
00598e43 : MOV EAX,dword ptr [EDX + 0xc]
00598e46 : PUSH 0xb
00598e48 : MOV dword ptr [ESP + 0x20],EDI
00598e4c : CALL EAX
00598e4e : MOV EBX,EAX
00598e50 : MOV dword ptr [ESP + 0x18],EBX
00598e54 : CMP EDI,EBP
00598e56 : JZ 0x00598fd8
00598e5c : LEA ECX,[ESP + 0x14]
00598e60 : CALL 0x0051b6e0
00598e65 : MOV EDX,dword ptr [ESI + 0xc]
00598e68 : LEA ECX,[ESP + 0x14]
00598e6c : PUSH ECX
00598e6d : MOV ECX,dword ptr [EDX]
00598e6f : CALL 0x0056b660
00598e74 : MOV ECX,dword ptr [ESI + 0xc]
00598e77 : LEA EAX,[ESP + 0x14]
00598e7b : PUSH EAX
00598e7c : ADD ECX,0xc
00598e7f : PUSH ECX
00598e80 : PUSH EBP
00598e81 : LEA ECX,[ESP + 0x2c]
00598e85 : CALL 0x00561320
00598e8a : LEA ECX,[ESP + 0x10]
00598e8e : CALL 0x0051b6e0
00598e93 : LEA EAX,[ESP + 0x20]
00598e97 : LEA ECX,[ESP + 0x10]
00598e9b : PUSH EAX
00598e9c : PUSH ECX
00598e9d : CMP EBX,EBP
00598e9f : JZ 0x00598eac
00598ea1 : MOV EDX,dword ptr [EBX]
00598ea3 : MOV EDX,dword ptr [EDX + 0x4]
00598ea6 : MOV ECX,EBX
00598ea8 : CALL EDX
00598eaa : JMP 0x00598eb4
00598eac : CALL 0x005a2340
00598eb1 : ADD ESP,0x8
00598eb4 : MOV EAX,dword ptr [ESP + 0x10]
00598eb8 : MOV EDX,dword ptr [EDI]
00598eba : AND EAX,0xfffffffc
00598ebd : ADD EAX,0x8
00598ec0 : PUSH EAX
00598ec1 : MOV EAX,dword ptr [EDX + 0x8]
00598ec4 : MOV ECX,EDI
00598ec6 : CALL EAX
00598ec8 : AND EAX,EDX
00598eca : LEA ECX,[ESP + 0x10]
00598ece : CMP EAX,-0x1
00598ed1 : JNZ 0x00598efc
00598ed3 : CALL 0x0045b730
00598ed8 : LEA ECX,[ESP + 0x20]
00598edc : CALL 0x00512c60
00598ee1 : LEA ECX,[ESP + 0x14]
00598ee5 : CALL 0x0045b730
00598eea : CMP EBX,EBP
00598eec : JZ 0x00598ef5
00598eee : MOV ECX,EBX
00598ef0 : CALL 0x004ff7e0
00598ef5 : MOV ECX,EDI
00598ef7 : JMP 0x00598fde
00598efc : CALL 0x0045b730
00598f01 : LEA ECX,[ESP + 0x20]
00598f05 : CALL 0x00512c60
00598f0a : LEA ECX,[ESP + 0x14]
00598f0e : CALL 0x0045b730
00598f13 : FLD1
00598f15 : SUB ESP,0x8
00598f18 : FSTP double ptr [ESP]
00598f1b : LEA ECX,[ESP + 0x44]
00598f1f : CALL 0x005975d0
00598f24 : MOV ECX,dword ptr [ESI + 0xc]
00598f27 : MOV ECX,dword ptr [ECX]
00598f29 : MOV EDX,dword ptr [ECX]
00598f2b : MOV EDX,dword ptr [EDX + 0x40]
00598f2e : PUSH 0x1
00598f30 : LEA EAX,[ESP + 0x40]
00598f34 : PUSH EAX
00598f35 : PUSH 0xb8ec58
00598f3a : CALL EDX
00598f3c : MOV ECX,dword ptr [0x00d73250]
00598f42 : PUSH EBP
00598f43 : PUSH 0x68
00598f45 : CALL 0x00515840
00598f4a : CMP EAX,EBP
00598f4c : JZ 0x00598f69
00598f4e : MOV ECX,dword ptr [ESI + 0xc]
00598f51 : PUSH 0x1
00598f53 : PUSH EBP
00598f54 : PUSH EBP
00598f55 : ADD ECX,0xc
00598f58 : PUSH ECX
00598f59 : PUSH 0x270f
00598f5e : MOV ECX,EAX
00598f60 : CALL 0x0056ebb0
00598f65 : MOV EBX,EAX
00598f67 : JMP 0x00598f6b
00598f69 : XOR EBX,EBX
00598f6b : MOV ECX,dword ptr [0x00d73250]
00598f71 : PUSH EBP
00598f72 : PUSH 0x3c
00598f74 : CALL 0x00515840
00598f79 : MOV EDI,EAX
00598f7b : CMP EDI,EBP
00598f7d : JZ 0x00598fa4
00598f7f : MOV EDX,dword ptr [ESI + 0xc]
00598f82 : MOV ECX,dword ptr [EDX]
00598f84 : PUSH EBP
00598f85 : CALL 0x0056b260
00598f8a : MOV EDX,dword ptr [EAX]
00598f8c : MOV ECX,EAX
00598f8e : MOV EAX,dword ptr [EDX + 0x5c]
00598f91 : CALL EAX
00598f93 : MOV ECX,dword ptr [ESI + 0xc]
00598f96 : PUSH EAX
00598f97 : PUSH ECX
00598f98 : PUSH ESI
00598f99 : MOV ECX,EDI
00598f9b : CALL 0x00598ae0
00598fa0 : MOV EDI,EAX
00598fa2 : JMP 0x00598fa6
00598fa4 : XOR EDI,EDI
00598fa6 : PUSH EDI
00598fa7 : LEA ECX,[EBX + 0x1c]
00598faa : CALL 0x005271c0
00598faf : MOV EDX,dword ptr [ESI + 0xc]
00598fb2 : MOV ECX,dword ptr [EDX]
00598fb4 : PUSH EBX
00598fb5 : CALL 0x00571790
00598fba : CMP EDI,EBP
00598fbc : JZ 0x00598fc5
00598fbe : MOV ECX,EDI
00598fc0 : CALL 0x00503db0
00598fc5 : MOV ECX,dword ptr [ESP + 0x18]
00598fc9 : CMP ECX,EBP
00598fcb : JZ 0x00598fd2
00598fcd : CALL 0x004ff7e0
00598fd2 : MOV ECX,dword ptr [ESP + 0x1c]
00598fd6 : JMP 0x00598fde
00598fd8 : CMP EBX,EBP
00598fda : JZ 0x00598fe3
00598fdc : MOV ECX,EBX
00598fde : CALL 0x004ff7e0
00598fe3 : LEA ECX,[ESP + 0x3c]
00598fe7 : CALL 0x0045ac80
00598fec : LEA ECX,[ESP + 0x2c]
00598ff0 : CALL 0x0045ac80
00598ff5 : POP EDI
00598ff6 : POP EBX
00598ff7 : POP ESI
00598ff8 : XOR AL,AL
00598ffa : POP EBP
00598ffb : ADD ESP,0x3c
00598ffe : RET
00598fff : MOV EAX,dword ptr [ESP + 0x28]
00599003 : SHR EAX,0x6
00599006 : TEST AL,0x1
00599008 : JZ 0x0059901d
0059900a : MOV ECX,dword ptr [ESP + 0x2c]
0059900e : PUSH ECX
0059900f : MOV ECX,dword ptr [ESP + 0x28]
00599013 : LEA EDX,[ESP + 0x28]
00599017 : PUSH EDX
00599018 : CALL 0x00588b40
0059901d : POP ESI
0059901e : MOV AL,0x1
00599020 : POP EBP
00599021 : ADD ESP,0x3c
00599024 : RET
