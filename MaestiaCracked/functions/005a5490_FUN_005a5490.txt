PROGRAM  : Maestia.exe
FUNCTION : FUN_005a5490
ENTRY    : 005a5490
BODY     : [[005a5490, 005a55b2]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_005a5490(uint param_1,int *param_2,float param_3)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  int in_ECX;
  int iVar4;
  int iVar5;
  uint local_c;
  undefined4 local_8;
  
  FUN_005a5430(*(undefined4 *)(*param_2 + 0xc));
  if ((((param_1 == 0) || (*(int *)(param_1 + 0xc) != in_ECX)) ||
      (iVar2 = *(int *)(param_1 + 8), iVar2 == 0)) || (*(char *)(iVar2 + 0x25) != '\0')) {
    return param_1 & 0xffffff00;
  }
  uVar3 = CONCAT22((short)(param_1 >> 0x10),
                   (ushort)(0.0 < param_3) << 8 | (ushort)NAN(param_3) << 10 |
                   (ushort)(param_3 == 0.0) << 0xe);
  local_c = 0;
  if (*(int *)(iVar2 + 0x14) != 0) {
    iVar4 = 0;
    do {
      iVar5 = *(int *)(iVar2 + 0x10) + iVar4;
      if (((param_3 != 0.0) && (*(int *)(iVar5 + 0xc) != 0)) &&
         (bVar1 = *(byte *)(iVar5 + 6), bVar1 != 0)) {
        local_8 = (undefined4)(longlong)ROUND((float)*(ushort *)(iVar5 + 0x10) * param_3 + 0.5);
        uVar3 = FUN_005a2a60(local_8);
        if (uVar3 != bVar1) goto LAB_005a559d;
      }
      if ((*(int *)(iVar5 + 0xc) != 0) &&
         (uVar3 = FUN_005a3130(iVar5,*(int *)(iVar5 + 0xc)), (char)uVar3 == '\0')) {
LAB_005a559d:
        return uVar3 & 0xffffff00;
      }
      uVar3 = local_c + 1;
      iVar4 = iVar4 + 0x1c;
      local_c = uVar3;
    } while (uVar3 < *(uint *)(iVar2 + 0x14));
  }
  return CONCAT31((int3)(uVar3 >> 8),1);
}



============================================================
DISASSEMBLY
============================================================
005a5490 : SUB ESP,0x10
005a5493 : MOV EAX,dword ptr [ESP + 0x18]
005a5497 : PUSH EBP
005a5498 : PUSH ESI
005a5499 : MOV ESI,ECX
005a549b : MOV ECX,dword ptr [EAX]
005a549d : MOV EDX,dword ptr [ECX + 0xc]
005a54a0 : PUSH EDX
005a54a1 : MOV ECX,ESI
005a54a3 : MOV dword ptr [ESP + 0xc],ESI
005a54a7 : CALL 0x005a5430
005a54ac : MOV EAX,dword ptr [ESP + 0x1c]
005a54b0 : TEST EAX,EAX
005a54b2 : JZ 0x005a55a9
005a54b8 : CMP dword ptr [EAX + 0xc],ESI
005a54bb : JNZ 0x005a55a9
005a54c1 : MOV EBP,dword ptr [EAX + 0x8]
005a54c4 : TEST EBP,EBP
005a54c6 : JZ 0x005a55a9
005a54cc : CMP byte ptr [EBP + 0x25],0x0
005a54d0 : JNZ 0x005a55a9
005a54d6 : FLDZ
005a54d8 : MOV byte ptr [ESP + 0x20],0x1
005a54dd : FCOMP float ptr [ESP + 0x24]
005a54e1 : FNSTSW AX
005a54e3 : TEST AH,0x44
005a54e6 : JP 0x005a54ed
005a54e8 : MOV byte ptr [ESP + 0x20],0x0
005a54ed : CMP dword ptr [EBP + 0x14],0x0
005a54f1 : PUSH EBX
005a54f2 : PUSH EDI
005a54f3 : MOV dword ptr [ESP + 0x14],0x0
005a54fb : JBE 0x005a5591
005a5501 : XOR EBX,EBX
005a5503 : MOV ESI,dword ptr [EBP + 0x10]
005a5506 : ADD ESI,EBX
005a5508 : CMP byte ptr [ESP + 0x28],0x0
005a550d : JZ 0x005a5563
005a550f : CMP dword ptr [ESI + 0xc],0x0
005a5513 : JZ 0x005a5563
005a5515 : MOVZX EDI,byte ptr [ESI + 0x6]
005a5519 : TEST EDI,EDI
005a551b : JZ 0x005a5563
005a551d : MOVZX EAX,word ptr [ESI + 0x10]
005a5521 : MOV dword ptr [ESP + 0x24],EAX
005a5525 : FILD dword ptr [ESP + 0x24]
005a5529 : FNSTCW word ptr [ESP + 0x24]
005a552d : MOVZX EAX,word ptr [ESP + 0x24]
005a5532 : FMUL float ptr [ESP + 0x2c]
005a5536 : OR EAX,0xc00
005a553b : MOV dword ptr [ESP + 0x18],EAX
005a553f : FADD double ptr [0x00cdf120]
005a5545 : FLDCW word ptr [ESP + 0x18]
005a5549 : FISTP qword ptr [ESP + 0x18]
005a554d : MOV ECX,dword ptr [ESP + 0x18]
005a5551 : PUSH ECX
005a5552 : MOV ECX,dword ptr [ESP + 0x14]
005a5556 : FLDCW word ptr [ESP + 0x28]
005a555a : CALL 0x005a2a60
005a555f : CMP EAX,EDI
005a5561 : JNZ 0x005a559d
005a5563 : MOV EAX,dword ptr [ESI + 0xc]
005a5566 : TEST EAX,EAX
005a5568 : JZ 0x005a557c
005a556a : MOV ECX,dword ptr [ESP + 0x10]
005a556e : PUSH EAX
005a556f : PUSH ESI
005a5570 : ADD ECX,0x40
005a5573 : CALL 0x005a3130
005a5578 : TEST AL,AL
005a557a : JZ 0x005a559d
005a557c : MOV EAX,dword ptr [ESP + 0x14]
005a5580 : INC EAX
005a5581 : ADD EBX,0x1c
005a5584 : MOV dword ptr [ESP + 0x14],EAX
005a5588 : CMP EAX,dword ptr [EBP + 0x14]
005a558b : JC 0x005a5503
005a5591 : POP EDI
005a5592 : POP EBX
005a5593 : POP ESI
005a5594 : MOV AL,0x1
005a5596 : POP EBP
005a5597 : ADD ESP,0x10
005a559a : RET 0xc
005a559d : POP EDI
005a559e : POP EBX
005a559f : POP ESI
005a55a0 : XOR AL,AL
005a55a2 : POP EBP
005a55a3 : ADD ESP,0x10
005a55a6 : RET 0xc
005a55a9 : POP ESI
005a55aa : XOR AL,AL
005a55ac : POP EBP
005a55ad : ADD ESP,0x10
005a55b0 : RET 0xc
