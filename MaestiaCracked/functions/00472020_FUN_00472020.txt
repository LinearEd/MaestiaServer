PROGRAM  : Maestia.exe
FUNCTION : FUN_00472020
ENTRY    : 00472020
BODY     : [[00472020, 004724be]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1 FUN_00472020(int param_1,int *param_2,int param_3,int *param_4,char param_5)

{
  undefined8 *puVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int *piVar6;
  int *piVar7;
  int iVar8;
  int *piVar9;
  short sVar10;
  uint uVar11;
  undefined **local_74;
  int local_70;
  uint local_6c;
  uint local_68;
  char local_64;
  undefined1 local_60;
  undefined4 local_5c;
  undefined **local_58;
  int local_54;
  uint local_50;
  uint local_4c;
  char local_48;
  undefined1 local_44;
  undefined4 local_40;
  int local_3c;
  int iStack_38;
  int local_34;
  int iStack_30;
  int local_2c;
  int local_28;
  int *local_24;
  int local_20;
  int *local_1c;
  undefined1 local_15;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b82b84;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar8 = *param_2;
  uVar11 = 0;
  local_15 = 0;
  if (0 < iVar8) {
    piVar6 = (int *)(param_2[1] + 8);
    do {
      uVar11 = uVar11 + *piVar6;
      piVar6 = piVar6 + 5;
      iVar8 = iVar8 + -1;
    } while (iVar8 != 0);
  }
  local_54 = 0;
  local_50 = 0;
  local_4c = 0;
  local_48 = '\0';
  local_8 = 0;
  local_58 = &PTR_FUN_00cd6420;
  local_44 = 1;
  local_40 = 0xffffffff;
  local_28 = FUN_00808040("InitIndexBuffer32",&local_40,uVar5);
  if (local_48 == '\0') {
    if ((local_54 != 0) && (piVar6 = (int *)(local_54 + -4), piVar6 != (int *)0x0)) {
      _DAT_00da98cc = _DAT_00da98cc + *piVar6 * -4 + -4;
      if (DAT_00da98c8 == (int *)0x0) {
        _free(piVar6);
      }
      else {
        (**(code **)(*DAT_00da98c8 + 8))();
      }
    }
    local_54 = 0;
    local_4c = 0;
  }
  local_50 = 0;
  if (local_48 != '\0') {
    local_4c = 0;
    local_54 = 0;
  }
  local_48 = local_28 != 0;
  if ((bool)local_48) {
    local_4c = uVar11 & 0x3fffffff;
    local_54 = local_28;
  }
  local_70 = 0;
  local_6c = 0;
  local_68 = 0;
  local_64 = '\0';
  local_8 = 2;
  local_74 = &PTR_FUN_00cd643c;
  local_60 = 1;
  local_5c = 0xffffffff;
  iVar8 = FUN_00808040("InitIndexBuffer16",&local_5c,uVar5);
  if (local_64 == '\0') {
    if ((local_70 != 0) && (piVar6 = (int *)(local_70 + -4), piVar6 != (int *)0x0)) {
      _DAT_00da98cc = _DAT_00da98cc + *piVar6 * -2 + -4;
      if (DAT_00da98c8 == (int *)0x0) {
        _free(piVar6);
      }
      else {
        (**(code **)(*DAT_00da98c8 + 8))();
      }
    }
    local_70 = 0;
    local_68 = 0;
  }
  local_6c = 0;
  if (local_64 != '\0') {
    local_68 = 0;
    local_70 = 0;
  }
  local_64 = iVar8 != 0;
  if ((bool)local_64) {
    local_68 = uVar11 & 0x7fffffff;
    local_70 = iVar8;
  }
  local_8 = CONCAT31(local_8._1_3_,3);
  local_28 = 0;
  uVar5 = local_50;
  if (0 < *param_2) {
    local_20 = 0;
    do {
      piVar6 = (int *)(param_2[1] + local_20);
      local_3c = *piVar6;
      iStack_38 = piVar6[1] + *(int *)(param_3 + 0x5c);
      iStack_30 = piVar6[3] + *(int *)(param_3 + 0x3c);
      local_34 = piVar6[2];
      local_2c = piVar6[4];
      puVar1 = (undefined8 *)(param_4[3] + (*param_4 * local_3c + param_1) * 0x14);
      *puVar1 = CONCAT44(iStack_38,local_3c);
      puVar1[1] = CONCAT44(iStack_30,local_34);
      *(int *)(puVar1 + 2) = local_2c;
      *(undefined1 *)(param_4[8] + 1 + param_1) = 1;
      uVar5 = param_4[0xe];
      if ((uVar5 == 0) || (local_1c = (int *)param_4[0xd], local_3c < *local_1c)) {
        local_1c = (int *)param_4[0xd];
        piVar9 = local_1c + uVar5;
      }
      else {
        local_24 = (int *)param_4[0xd] + uVar5;
        uVar11 = uVar5 >> 1;
        piVar9 = (int *)param_4[0xd];
        while (uVar11 != 0) {
          piVar7 = piVar9 + uVar11;
          if (local_3c < piVar9[uVar11]) {
            piVar7 = piVar9;
            local_24 = piVar9 + uVar11;
          }
          piVar9 = piVar7;
          uVar11 = ((int)local_24 - (int)piVar7 >> 2) - ((int)local_24 - (int)piVar7 >> 0x1f) >> 1;
        }
      }
      piVar7 = piVar9;
      if (piVar9 == local_1c + uVar5) {
        if ((uVar5 != 0) && (local_3c < *local_1c)) {
          piVar7 = local_1c;
        }
      }
      else if (*piVar9 < local_3c) {
        piVar7 = piVar9 + 1;
      }
      if ((piVar9 == local_1c + uVar5) || (piVar9 != piVar7)) {
        FUN_00471e80(piVar7);
      }
      iVar8 = piVar6[1];
      uVar5 = local_50;
      if (param_5 == '\0') {
        if (param_2[3] == 0) {
          uVar11 = local_4c;
          if (iVar8 < piVar6[2] + iVar8) {
            do {
              uVar2 = *(ushort *)(param_2[2] + iVar8 * 2);
              iVar3 = *(int *)(param_3 + 0x3c);
              if (local_48 == '\0') {
                if (uVar5 == uVar11) {
                  if (uVar11 < 8) {
                    uVar11 = 8;
                    local_4c = 8;
                  }
                  FUN_0046d4d0(&local_58,uVar11 * 2 + 1);
                  uVar5 = local_50;
                }
LAB_00472440:
                *(uint *)(local_54 + uVar5 * 4) = (uint)uVar2 + iVar3;
                uVar5 = local_50 + 1;
                uVar11 = local_4c;
                local_50 = uVar5;
              }
              else if (uVar5 < uVar11) goto LAB_00472440;
              iVar8 = iVar8 + 1;
            } while (iVar8 < piVar6[1] + piVar6[2]);
          }
        }
        else {
          uVar11 = local_4c;
          if (iVar8 < piVar6[2] + iVar8) {
            do {
              iVar3 = *(int *)(param_3 + 0x3c);
              iVar4 = *(int *)(param_2[3] + iVar8 * 4);
              if (local_48 == '\0') {
                if (uVar5 == uVar11) {
                  if (uVar11 < 8) {
                    uVar11 = 8;
                    local_4c = 8;
                  }
                  FUN_0046d4d0(&local_58,uVar11 * 2 + 1);
                  uVar5 = local_50;
                }
LAB_004723ce:
                *(int *)(local_54 + uVar5 * 4) = iVar4 + iVar3;
                uVar5 = local_50 + 1;
                uVar11 = local_4c;
                local_50 = uVar5;
              }
              else if (uVar5 < uVar11) goto LAB_004723ce;
              iVar8 = iVar8 + 1;
            } while (iVar8 < piVar6[1] + piVar6[2]);
          }
        }
      }
      else {
        uVar11 = local_68;
        if (iVar8 < piVar6[2] + iVar8) {
          do {
            sVar10 = *(short *)(param_2[2] + iVar8 * 2) + (short)*(undefined4 *)(param_3 + 0x3c);
            if (local_64 == '\0') {
              if (local_6c == uVar11) {
                if (uVar11 < 8) {
                  uVar11 = 8;
                  local_68 = 8;
                }
                FUN_00471fa0(&local_74,uVar11 * 2 + 1);
              }
              *(short *)(local_70 + local_6c * 2) = sVar10;
LAB_00472346:
              local_6c = local_6c + 1;
              uVar11 = local_68;
            }
            else if (local_6c < uVar11) {
              *(short *)(local_70 + local_6c * 2) = sVar10;
              goto LAB_00472346;
            }
            iVar8 = iVar8 + 1;
            uVar5 = local_50;
          } while (iVar8 < piVar6[1] + piVar6[2]);
        }
      }
      local_20 = local_20 + 0x14;
      local_28 = local_28 + 1;
    } while (local_28 < *param_2);
  }
  iVar8 = local_54;
  if (param_5 != '\0') {
    uVar5 = local_6c;
    iVar8 = local_70;
  }
  if (uVar5 != 0) {
    local_15 = FUN_004743b0(iVar8,uVar5);
  }
  local_8 = CONCAT31(local_8._1_3_,1);
  FUN_00471da0(&local_74);
  local_8 = 0xffffffff;
  FUN_00474620(&local_58);
  ExceptionList = local_10;
  return local_15;
}



============================================================
DISASSEMBLY
============================================================
00472020 : PUSH EBP
00472021 : MOV EBP,ESP
00472023 : PUSH -0x1
00472025 : PUSH 0xb82b84
0047202a : MOV EAX,FS:[0x0]
00472030 : PUSH EAX
00472031 : SUB ESP,0x68
00472034 : PUSH EBX
00472035 : PUSH ESI
00472036 : PUSH EDI
00472037 : MOV EAX,[0x00d66fa0]
0047203c : XOR EAX,EBP
0047203e : PUSH EAX
0047203f : LEA EAX,[EBP + -0xc]
00472042 : MOV FS:[0x0],EAX
00472048 : MOV EAX,dword ptr [EBP + 0xc]
0047204b : MOV ECX,dword ptr [EAX]
0047204d : XOR EBX,EBX
0047204f : XOR ESI,ESI
00472051 : CMP ECX,EBX
00472053 : MOV byte ptr [EBP + -0x11],BL
00472056 : JLE 0x0047206a
00472058 : MOV EAX,dword ptr [EAX + 0x4]
0047205b : ADD EAX,0x8
0047205e : MOV EDI,EDI
00472060 : ADD ESI,dword ptr [EAX]
00472062 : ADD EAX,0x14
00472065 : SUB ECX,0x1
00472068 : JNZ 0x00472060
0047206a : MOV dword ptr [EBP + -0x54],0xcd63c0
00472071 : MOV dword ptr [EBP + -0x50],EBX
00472074 : MOV dword ptr [EBP + -0x4c],EBX
00472077 : MOV dword ptr [EBP + -0x48],EBX
0047207a : MOV byte ptr [EBP + -0x44],BL
0047207d : MOV dword ptr [EBP + -0x4],EBX
00472080 : LEA EAX,[EBP + -0x3c]
00472083 : PUSH EAX
00472084 : LEA EDI,[ESI*0x4 + 0x0]
0047208b : PUSH 0xcd62b0
00472090 : MOV dword ptr [EBP + -0x54],0xcd6420
00472097 : MOV byte ptr [EBP + -0x40],0x1
0047209b : MOV dword ptr [EBP + -0x3c],0xffffffff
004720a2 : CALL 0x00808040
004720a7 : ADD ESP,0x8
004720aa : CMP byte ptr [EBP + -0x44],0x0
004720ae : MOV dword ptr [EBP + -0x24],EAX
004720b1 : JNZ 0x004720f9
004720b3 : MOV EAX,dword ptr [EBP + -0x50]
004720b6 : CMP EAX,EBX
004720b8 : JZ 0x004720f0
004720ba : ADD EAX,-0x4
004720bd : CMP EAX,EBX
004720bf : JZ 0x004720f0
004720c1 : MOV ECX,dword ptr [EAX]
004720c3 : ADD ECX,ECX
004720c5 : ADD ECX,ECX
004720c7 : MOV EDX,0xfffffffc
004720cc : SUB EDX,ECX
004720ce : MOV ECX,dword ptr [0x00da98c8]
004720d4 : ADD dword ptr [0x00da98cc],EDX
004720da : PUSH EAX
004720db : CMP ECX,EBX
004720dd : JZ 0x004720e8
004720df : MOV EDX,dword ptr [ECX]
004720e1 : MOV EAX,dword ptr [EDX + 0x8]
004720e4 : CALL EAX
004720e6 : JMP 0x004720f0
004720e8 : CALL 0x0063610d
004720ed : ADD ESP,0x4
004720f0 : MOV EAX,dword ptr [EBP + -0x24]
004720f3 : MOV dword ptr [EBP + -0x50],EBX
004720f6 : MOV dword ptr [EBP + -0x48],EBX
004720f9 : CMP byte ptr [EBP + -0x44],0x0
004720fd : MOV dword ptr [EBP + -0x4c],EBX
00472100 : JZ 0x00472108
00472102 : MOV dword ptr [EBP + -0x48],EBX
00472105 : MOV dword ptr [EBP + -0x50],EBX
00472108 : CMP EAX,EBX
0047210a : JNZ 0x00472112
0047210c : MOV byte ptr [EBP + -0x44],0x0
00472110 : JMP 0x0047211f
00472112 : SHR EDI,0x2
00472115 : MOV dword ptr [EBP + -0x48],EDI
00472118 : MOV dword ptr [EBP + -0x50],EAX
0047211b : MOV byte ptr [EBP + -0x44],0x1
0047211f : MOV dword ptr [EBP + -0x4],0x1
00472126 : MOV dword ptr [EBP + -0x70],0xcd6440
0047212d : MOV dword ptr [EBP + -0x6c],EBX
00472130 : MOV dword ptr [EBP + -0x68],EBX
00472133 : MOV dword ptr [EBP + -0x64],EBX
00472136 : MOV byte ptr [EBP + -0x60],0x0
0047213a : MOV byte ptr [EBP + -0x4],0x2
0047213e : LEA ECX,[EBP + -0x58]
00472141 : PUSH ECX
00472142 : LEA EDI,[ESI + ESI*0x1]
00472145 : PUSH 0xcd62c4
0047214a : MOV dword ptr [EBP + -0x70],0xcd643c
00472151 : MOV byte ptr [EBP + -0x5c],0x1
00472155 : MOV dword ptr [EBP + -0x58],0xffffffff
0047215c : CALL 0x00808040
00472161 : ADD ESP,0x8
00472164 : CMP byte ptr [EBP + -0x60],0x0
00472168 : MOV ESI,EAX
0047216a : JNZ 0x004721ad
0047216c : MOV EAX,dword ptr [EBP + -0x6c]
0047216f : CMP EAX,EBX
00472171 : JZ 0x004721a7
00472173 : ADD EAX,-0x4
00472176 : CMP EAX,EBX
00472178 : JZ 0x004721a7
0047217a : MOV EDX,dword ptr [EAX]
0047217c : ADD EDX,EDX
0047217e : MOV ECX,0xfffffffc
00472183 : SUB ECX,EDX
00472185 : ADD dword ptr [0x00da98cc],ECX
0047218b : MOV ECX,dword ptr [0x00da98c8]
00472191 : PUSH EAX
00472192 : CMP ECX,EBX
00472194 : JZ 0x0047219f
00472196 : MOV EDX,dword ptr [ECX]
00472198 : MOV EAX,dword ptr [EDX + 0x8]
0047219b : CALL EAX
0047219d : JMP 0x004721a7
0047219f : CALL 0x0063610d
004721a4 : ADD ESP,0x4
004721a7 : MOV dword ptr [EBP + -0x6c],EBX
004721aa : MOV dword ptr [EBP + -0x64],EBX
004721ad : CMP byte ptr [EBP + -0x60],0x0
004721b1 : MOV dword ptr [EBP + -0x68],EBX
004721b4 : JZ 0x004721bc
004721b6 : MOV dword ptr [EBP + -0x64],EBX
004721b9 : MOV dword ptr [EBP + -0x6c],EBX
004721bc : CMP ESI,EBX
004721be : JNZ 0x004721c6
004721c0 : MOV byte ptr [EBP + -0x60],0x0
004721c4 : JMP 0x004721d2
004721c6 : SHR EDI,0x1
004721c8 : MOV dword ptr [EBP + -0x64],EDI
004721cb : MOV dword ptr [EBP + -0x6c],ESI
004721ce : MOV byte ptr [EBP + -0x60],0x1
004721d2 : MOV byte ptr [EBP + -0x4],0x3
004721d6 : MOV ECX,dword ptr [EBP + 0xc]
004721d9 : CMP dword ptr [ECX],EBX
004721db : MOV dword ptr [EBP + -0x24],EBX
004721de : JLE 0x00472460
004721e4 : MOV dword ptr [EBP + -0x1c],EBX
004721e7 : MOV EDX,dword ptr [EBP + 0xc]
004721ea : MOV EDI,dword ptr [EDX + 0x4]
004721ed : ADD EDI,dword ptr [EBP + -0x1c]
004721f0 : MOV ECX,dword ptr [EBP + 0x10]
004721f3 : MOV EAX,dword ptr [ECX + 0x5c]
004721f6 : MOV EDX,dword ptr [EDI + 0x4]
004721f9 : MOV ESI,dword ptr [EDI]
004721fb : ADD EDX,EAX
004721fd : MOV EAX,dword ptr [ECX + 0x3c]
00472200 : MOV ECX,dword ptr [EDI + 0xc]
00472203 : ADD ECX,EAX
00472205 : MOV dword ptr [EBP + -0x34],EDX
00472208 : MOV EDX,dword ptr [EDI + 0x8]
0047220b : MOV dword ptr [EBP + -0x30],EDX
0047220e : MOV EDX,dword ptr [EBP + 0x14]
00472211 : MOV EAX,dword ptr [EDX]
00472213 : MOV EBX,dword ptr [EDX + 0xc]
00472216 : IMUL EAX,ESI
00472219 : ADD EAX,dword ptr [EBP + 0x8]
0047221c : MOV dword ptr [EBP + -0x2c],ECX
0047221f : MOV ECX,dword ptr [EDI + 0x10]
00472222 : LEA EAX,[EAX + EAX*0x4]
00472225 : LEA EAX,[EBX + EAX*0x4]
00472228 : MOV dword ptr [EBP + -0x38],ESI
0047222b : MOVQ XMM0,qword ptr [EBP + -0x38]
00472230 : MOVQ qword ptr [EAX],XMM0
00472234 : MOVQ XMM0,qword ptr [EBP + -0x30]
00472239 : MOVQ qword ptr [EAX + 0x8],XMM0
0047223e : MOV dword ptr [EAX + 0x10],ECX
00472241 : MOV EAX,dword ptr [EBP + 0x8]
00472244 : MOV dword ptr [EBP + -0x28],ECX
00472247 : MOV ECX,dword ptr [EDX + 0x20]
0047224a : MOV byte ptr [ECX + EAX*0x1 + 0x1],0x1
0047224f : MOV EBX,dword ptr [EDX + 0x38]
00472252 : LEA ECX,[EDX + 0x30]
00472255 : TEST EBX,EBX
00472257 : JZ 0x00472294
00472259 : MOV EAX,dword ptr [ECX + 0x4]
0047225c : CMP ESI,dword ptr [EAX]
0047225e : MOV dword ptr [EBP + -0x18],EAX
00472261 : JL 0x00472294
00472263 : MOV ECX,dword ptr [ECX + 0x4]
00472266 : MOV EDX,EBX
00472268 : MOV EAX,EBX
0047226a : SHR EAX,0x1
0047226c : LEA EDX,[ECX + EDX*0x4]
0047226f : MOV dword ptr [EBP + -0x20],EDX
00472272 : JZ 0x0047229d
00472274 : CMP ESI,dword ptr [ECX + EAX*0x4]
00472277 : LEA EAX,[ECX + EAX*0x4]
0047227a : JGE 0x00472281
0047227c : MOV dword ptr [EBP + -0x20],EAX
0047227f : JMP 0x00472283
00472281 : MOV ECX,EAX
00472283 : MOV EAX,dword ptr [EBP + -0x20]
00472286 : SUB EAX,ECX
00472288 : SAR EAX,0x2
0047228b : CDQ
0047228c : SUB EAX,EDX
0047228e : SAR EAX,0x1
00472290 : JNZ 0x00472274
00472292 : JMP 0x0047229d
00472294 : MOV ECX,dword ptr [ECX + 0x4]
00472297 : MOV dword ptr [EBP + -0x18],ECX
0047229a : LEA ECX,[ECX + EBX*0x4]
0047229d : MOV EDX,dword ptr [EBP + -0x18]
004722a0 : LEA EDX,[EDX + EBX*0x4]
004722a3 : MOV EAX,ECX
004722a5 : CMP ECX,EDX
004722a7 : JNZ 0x004722b8
004722a9 : TEST EBX,EBX
004722ab : JBE 0x004722bf
004722ad : MOV EBX,dword ptr [EBP + -0x18]
004722b0 : CMP ESI,dword ptr [EBX]
004722b2 : JGE 0x004722bf
004722b4 : MOV EAX,EBX
004722b6 : JMP 0x004722bf
004722b8 : CMP dword ptr [ECX],ESI
004722ba : JGE 0x004722bf
004722bc : LEA EAX,[ECX + 0x4]
004722bf : CMP ECX,EDX
004722c1 : JZ 0x004722c7
004722c3 : CMP ECX,EAX
004722c5 : JZ 0x004722d6
004722c7 : PUSH EAX
004722c8 : MOV EAX,dword ptr [EBP + 0x14]
004722cb : LEA ECX,[EBP + -0x38]
004722ce : ADD EAX,0x30
004722d1 : CALL 0x00471e80
004722d6 : CMP byte ptr [EBP + 0x18],0x0
004722da : MOV EBX,dword ptr [EDI + 0x4]
004722dd : JZ 0x00472377
004722e3 : MOV EAX,dword ptr [EDI + 0x8]
004722e6 : ADD EAX,EBX
004722e8 : CMP EBX,EAX
004722ea : JGE 0x00472357
004722ec : MOV ECX,dword ptr [EBP + -0x64]
004722ef : NOP
004722f0 : MOV EDX,dword ptr [EBP + 0x10]
004722f3 : MOV EAX,dword ptr [EDX + 0x3c]
004722f6 : MOV EDX,dword ptr [EBP + 0xc]
004722f9 : MOV EDX,dword ptr [EDX + 0x8]
004722fc : MOV DX,word ptr [EDX + EBX*0x2]
00472300 : ADD DX,AX
00472303 : CMP byte ptr [EBP + -0x60],0x0
00472307 : MOVZX ESI,DX
0047230a : JZ 0x0047231c
0047230c : MOV EAX,dword ptr [EBP + -0x68]
0047230f : CMP EAX,ECX
00472311 : JNC 0x0047234c
00472313 : MOV ECX,dword ptr [EBP + -0x6c]
00472316 : MOV word ptr [ECX + EAX*0x2],SI
0047231a : JMP 0x00472346
0047231c : CMP dword ptr [EBP + -0x68],ECX
0047231f : JNZ 0x0047233c
00472321 : CMP ECX,0x8
00472324 : JNC 0x0047232e
00472326 : MOV ECX,0x8
0047232b : MOV dword ptr [EBP + -0x64],ECX
0047232e : LEA EDX,[ECX + ECX*0x1 + 0x1]
00472332 : PUSH EDX
00472333 : LEA EAX,[EBP + -0x70]
00472336 : PUSH EAX
00472337 : CALL 0x00471fa0
0047233c : MOV ECX,dword ptr [EBP + -0x6c]
0047233f : MOV EDX,dword ptr [EBP + -0x68]
00472342 : MOV word ptr [ECX + EDX*0x2],SI
00472346 : MOV ECX,dword ptr [EBP + -0x64]
00472349 : INC dword ptr [EBP + -0x68]
0047234c : MOV EAX,dword ptr [EDI + 0x4]
0047234f : ADD EAX,dword ptr [EDI + 0x8]
00472352 : INC EBX
00472353 : CMP EBX,EAX
00472355 : JL 0x004722f0
00472357 : MOV EAX,dword ptr [EBP + -0x4c]
0047235a : MOV ECX,dword ptr [EBP + -0x24]
0047235d : MOV EDX,dword ptr [EBP + 0xc]
00472360 : ADD dword ptr [EBP + -0x1c],0x14
00472364 : INC ECX
00472365 : CMP ECX,dword ptr [EDX]
00472367 : MOV dword ptr [EBP + -0x24],ECX
0047236a : JL 0x004721e7
00472370 : XOR EBX,EBX
00472372 : JMP 0x00472463
00472377 : MOV EDX,dword ptr [EDI + 0x8]
0047237a : MOV ECX,dword ptr [EBP + 0xc]
0047237d : ADD EDX,EBX
0047237f : CMP dword ptr [ECX + 0xc],0x0
00472383 : JZ 0x004723ee
00472385 : CMP EBX,EDX
00472387 : JGE 0x00472357
00472389 : MOV EDX,dword ptr [EBP + -0x48]
0047238c : MOV EAX,dword ptr [EBP + -0x4c]
0047238f : MOV ESI,dword ptr [EBP + 0xc]
00472392 : MOV ESI,dword ptr [ESI + 0xc]
00472395 : MOV ECX,dword ptr [EBP + 0x10]
00472398 : MOV ECX,dword ptr [ECX + 0x3c]
0047239b : MOV ESI,dword ptr [ESI + EBX*0x4]
0047239e : ADD ESI,ECX
004723a0 : CMP byte ptr [EBP + -0x44],0x0
004723a4 : JZ 0x004723ac
004723a6 : CMP EAX,EDX
004723a8 : JNC 0x004723de
004723aa : JMP 0x004723ce
004723ac : CMP EAX,EDX
004723ae : JNZ 0x004723ce
004723b0 : CMP EDX,0x8
004723b3 : JNC 0x004723bd
004723b5 : MOV EDX,0x8
004723ba : MOV dword ptr [EBP + -0x48],EDX
004723bd : LEA EAX,[EDX + EDX*0x1 + 0x1]
004723c1 : PUSH EAX
004723c2 : LEA ECX,[EBP + -0x54]
004723c5 : PUSH ECX
004723c6 : CALL 0x0046d4d0
004723cb : MOV EAX,dword ptr [EBP + -0x4c]
004723ce : MOV EDX,dword ptr [EBP + -0x50]
004723d1 : MOV dword ptr [EDX + EAX*0x4],ESI
004723d4 : MOV EAX,dword ptr [EBP + -0x4c]
004723d7 : INC EAX
004723d8 : MOV dword ptr [EBP + -0x4c],EAX
004723db : MOV EDX,dword ptr [EBP + -0x48]
004723de : MOV ECX,dword ptr [EDI + 0x4]
004723e1 : ADD ECX,dword ptr [EDI + 0x8]
004723e4 : INC EBX
004723e5 : CMP EBX,ECX
004723e7 : JL 0x0047238f
004723e9 : JMP 0x0047235a
004723ee : CMP EBX,EDX
004723f0 : JGE 0x00472357
004723f6 : MOV EDX,dword ptr [EBP + -0x48]
004723f9 : MOV EAX,dword ptr [EBP + -0x4c]
004723fc : LEA ESP,[ESP]
00472400 : MOV ESI,dword ptr [EBP + 0xc]
00472403 : MOV ESI,dword ptr [ESI + 0x8]
00472406 : MOV ECX,dword ptr [EBP + 0x10]
00472409 : MOVZX ESI,word ptr [ESI + EBX*0x2]
0047240d : MOV ECX,dword ptr [ECX + 0x3c]
00472410 : ADD ESI,ECX
00472412 : CMP byte ptr [EBP + -0x44],0x0
00472416 : JZ 0x0047241e
00472418 : CMP EAX,EDX
0047241a : JNC 0x00472450
0047241c : JMP 0x00472440
0047241e : CMP EAX,EDX
00472420 : JNZ 0x00472440
00472422 : CMP EDX,0x8
00472425 : JNC 0x0047242f
00472427 : MOV EDX,0x8
0047242c : MOV dword ptr [EBP + -0x48],EDX
0047242f : LEA EAX,[EDX + EDX*0x1 + 0x1]
00472433 : PUSH EAX
00472434 : LEA ECX,[EBP + -0x54]
00472437 : PUSH ECX
00472438 : CALL 0x0046d4d0
0047243d : MOV EAX,dword ptr [EBP + -0x4c]
00472440 : MOV EDX,dword ptr [EBP + -0x50]
00472443 : MOV dword ptr [EDX + EAX*0x4],ESI
00472446 : MOV EAX,dword ptr [EBP + -0x4c]
00472449 : INC EAX
0047244a : MOV dword ptr [EBP + -0x4c],EAX
0047244d : MOV EDX,dword ptr [EBP + -0x48]
00472450 : MOV ECX,dword ptr [EDI + 0x4]
00472453 : ADD ECX,dword ptr [EDI + 0x8]
00472456 : INC EBX
00472457 : CMP EBX,ECX
00472459 : JL 0x00472400
0047245b : JMP 0x0047235a
00472460 : MOV EAX,dword ptr [EBP + -0x4c]
00472463 : CMP byte ptr [EBP + 0x18],0x0
00472467 : JZ 0x00472477
00472469 : MOV EAX,dword ptr [EBP + -0x68]
0047246c : CMP EAX,EBX
0047246e : JZ 0x0047248b
00472470 : PUSH EAX
00472471 : MOV EAX,dword ptr [EBP + -0x6c]
00472474 : PUSH EAX
00472475 : JMP 0x00472480
00472477 : CMP EAX,EBX
00472479 : JZ 0x0047248b
0047247b : MOV ECX,dword ptr [EBP + -0x50]
0047247e : PUSH EAX
0047247f : PUSH ECX
00472480 : MOV ESI,dword ptr [EBP + 0x10]
00472483 : CALL 0x004743b0
00472488 : MOV byte ptr [EBP + -0x11],AL
0047248b : MOV byte ptr [EBP + -0x4],0x1
0047248f : LEA EDX,[EBP + -0x70]
00472492 : PUSH EDX
00472493 : CALL 0x00471da0
00472498 : MOV dword ptr [EBP + -0x4],0xffffffff
0047249f : LEA EAX,[EBP + -0x54]
004724a2 : PUSH EAX
004724a3 : CALL 0x00474620
004724a8 : MOV AL,byte ptr [EBP + -0x11]
004724ab : MOV ECX,dword ptr [EBP + -0xc]
004724ae : MOV dword ptr FS:[0x0],ECX
004724b5 : POP ECX
004724b6 : POP EDI
004724b7 : POP ESI
004724b8 : POP EBX
004724b9 : MOV ESP,EBP
004724bb : POP EBP
004724bc : RET 0x14
