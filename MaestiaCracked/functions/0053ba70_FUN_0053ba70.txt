PROGRAM  : Maestia.exe
FUNCTION : FUN_0053ba70
ENTRY    : 0053ba70
BODY     : [[0053ba70, 0053bae2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053ba70(undefined4 param_1,short *param_2,uint param_3)

{
  short sVar1;
  int iVar2;
  int *in_ECX;
  
  if (param_3 == 0xffffffff) {
    param_3 = 0;
    sVar1 = *param_2;
    while (sVar1 != 0) {
      param_3 = param_3 + 1;
      sVar1 = param_2[param_3];
    }
  }
  if ((uint)in_ECX[2] < param_3) {
    if (*in_ECX == 0) {
      iVar2 = FUN_00515840(param_3 * 2,0);
    }
    else {
      iVar2 = FUN_00515c80(*in_ECX,param_3 * 2);
    }
    *in_ECX = iVar2;
    in_ECX[2] = param_3;
  }
  if (param_3 != 0) {
    _memcpy((void *)*in_ECX,param_2,param_3 * 2);
  }
  in_ECX[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
0053ba70 : PUSH EBX
0053ba71 : MOV EBX,dword ptr [ESP + 0xc]
0053ba75 : PUSH ESI
0053ba76 : MOV ESI,dword ptr [ESP + 0x14]
0053ba7a : PUSH EDI
0053ba7b : MOV EDI,ECX
0053ba7d : CMP ESI,-0x1
0053ba80 : JNZ 0x0053ba98
0053ba82 : XOR ESI,ESI
0053ba84 : CMP word ptr [EBX],SI
0053ba87 : JZ 0x0053ba98
0053ba89 : LEA ESP,[ESP]
0053ba90 : INC ESI
0053ba91 : CMP word ptr [EBX + ESI*0x2],0x0
0053ba96 : JNZ 0x0053ba90
0053ba98 : CMP dword ptr [EDI + 0x8],ESI
0053ba9b : JNC 0x0053bac6
0053ba9d : MOV EAX,dword ptr [EDI]
0053ba9f : TEST EAX,EAX
0053baa1 : JNZ 0x0053bab7
0053baa3 : MOV EAX,dword ptr [ESP + 0x10]
0053baa7 : MOV ECX,dword ptr [EAX + 0x1c]
0053baaa : PUSH 0x0
0053baac : LEA EDX,[ESI + ESI*0x1]
0053baaf : PUSH EDX
0053bab0 : CALL 0x00515840
0053bab5 : JMP 0x0053bac1
0053bab7 : LEA ECX,[ESI + ESI*0x1]
0053baba : PUSH ECX
0053babb : PUSH EAX
0053babc : CALL 0x00515c80
0053bac1 : MOV dword ptr [EDI],EAX
0053bac3 : MOV dword ptr [EDI + 0x8],ESI
0053bac6 : TEST ESI,ESI
0053bac8 : JBE 0x0053bada
0053baca : MOV EAX,dword ptr [EDI]
0053bacc : LEA EDX,[ESI + ESI*0x1]
0053bacf : PUSH EDX
0053bad0 : PUSH EBX
0053bad1 : PUSH EAX
0053bad2 : CALL 0x0063ae40
0053bad7 : ADD ESP,0xc
0053bada : MOV dword ptr [EDI + 0x4],ESI
0053badd : POP EDI
0053bade : POP ESI
0053badf : POP EBX
0053bae0 : RET 0xc
