PROGRAM  : Maestia.exe
FUNCTION : FUN_009ac450
ENTRY    : 009ac450
BODY     : [[009ac450, 009ac74f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009ac450(int param_1,uint param_2)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  undefined4 *puVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint local_5c;
  undefined1 local_58 [4];
  undefined2 local_54;
  undefined4 local_44;
  uint local_40;
  int local_3c;
  undefined4 local_38;
  undefined1 local_31;
  undefined4 local_2c;
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2d758;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_3c = param_1;
  local_38 = *(undefined4 *)(*(int *)(DAT_0172491c + 0x17c) + 0x16d8);
  iVar1 = *(int *)(DAT_0172491c + 0x144);
  local_14 = uVar2;
  FUN_00812bb0(iVar1,local_38);
  if ((uint)(*(int *)(iVar1 + 0xf4) - *(int *)(iVar1 + 0xf0) >> 2) <= param_2) goto LAB_009ac732;
  iVar1 = *(int *)(*(int *)(iVar1 + 0xf0) + param_2 * 4);
  uVar7 = 0;
  if (iVar1 == 0) goto LAB_009ac732;
  FUN_00406460(&DAT_00c8b398);
  local_8._1_3_ = 0;
  if (*(int *)(iVar1 + 0x30) - *(int *)(iVar1 + 0x2c) >> 2 != 0) {
    do {
      local_8._0_1_ = 0;
      if (local_1c != 0) {
        uVar3 = FUN_00403510(local_58,uVar2);
        local_8._0_1_ = 1;
        FUN_00405eb0(uVar3,0,0xffffffff);
        local_8._0_1_ = 0;
        if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_40 = 7;
        local_44 = 0;
        local_54 = 0;
      }
      local_8._0_1_ = 0;
      uVar3 = FUN_00404750(&DAT_00c8b3a0,*(undefined4 *)(*(int *)(iVar1 + 0x2c) + uVar7 * 4));
      local_8._0_1_ = 2;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_8._0_1_ = 0;
      if (7 < local_5c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uVar7 = uVar7 + 1;
      local_5c = 7;
    } while (uVar7 < (uint)(*(int *)(iVar1 + 0x30) - *(int *)(iVar1 + 0x2c) >> 2));
  }
  local_8._0_1_ = 0;
  iVar4 = *DAT_00da9894;
  if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
    puVar5 = local_2c;
    if (local_18 < 8) {
      puVar5 = &local_2c;
    }
    (**(code **)(**(int **)(iVar4 + 0x114) + 4))
              (*(int **)(iVar4 + 0x114),"mc_contentscard.AddLinkText",&DAT_00c8b3a8,puVar5);
  }
  if ((int)param_2 < 1) {
LAB_009ac623:
    iVar4 = 0;
  }
  else {
    iVar4 = *(int *)(DAT_0172491c + 0x144);
    FUN_00812bb0(iVar4,local_38);
    if ((uint)(*(int *)(iVar4 + 0xf4) - *(int *)(iVar4 + 0xf0) >> 2) <= param_2 - 1)
    goto LAB_009ac623;
    iVar4 = *(int *)(*(int *)(iVar4 + 0xf0) + (param_2 - 1) * 4);
  }
  if ((iVar4 == 0) || (local_31 = 1, *(short *)(iVar1 + 4) != *(short *)(iVar4 + 4))) {
    local_31 = 0;
  }
  iVar4 = *(int *)(DAT_0172491c + 0x144);
  FUN_00812bb0(iVar4,local_38);
  if (((param_2 + 1 < (uint)(*(int *)(iVar4 + 0xf4) - *(int *)(iVar4 + 0xf0) >> 2)) &&
      (iVar4 = *(int *)(*(int *)(iVar4 + 0xf0) + (param_2 + 1) * 4), iVar4 != 0)) &&
     (*(short *)(iVar1 + 4) == *(short *)(iVar4 + 4))) {
    uVar3 = 1;
  }
  else {
    uVar3 = 0;
  }
  iVar4 = *DAT_00da9894;
  if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
    iVar8 = *(int *)(iVar1 + 0x3c) + *(int *)(DAT_017248c8 + 0x150) * 0x1c;
    if (*(uint *)(iVar8 + 0x18) < 8) {
      iVar8 = iVar8 + 4;
    }
    else {
      iVar8 = *(int *)(iVar8 + 4);
    }
    if (*(uint *)(iVar1 + 0x24) < 8) {
      iVar6 = iVar1 + 0x10;
    }
    else {
      iVar6 = *(int *)(iVar1 + 0x10);
    }
    (**(code **)(**(int **)(iVar4 + 0x114) + 4))
              (*(int **)(iVar4 + 0x114),"mc_contentscard.SetCardInfo","%d, %d, %ls, %ls, %d, %b, %b"
               ,param_2,*(undefined2 *)(iVar1 + 4),iVar6,iVar8,1,local_31,uVar3);
  }
  *(uint *)(local_3c + 0x38) = param_2;
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
LAB_009ac732:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009ac450 : PUSH EBP
009ac451 : MOV EBP,ESP
009ac453 : PUSH -0x1
009ac455 : PUSH 0xb2d758
009ac45a : MOV EAX,FS:[0x0]
009ac460 : PUSH EAX
009ac461 : SUB ESP,0x64
009ac464 : MOV EAX,[0x00d66fa0]
009ac469 : XOR EAX,EBP
009ac46b : MOV dword ptr [EBP + -0x10],EAX
009ac46e : PUSH EBX
009ac46f : PUSH ESI
009ac470 : PUSH EDI
009ac471 : PUSH EAX
009ac472 : LEA EAX,[EBP + -0xc]
009ac475 : MOV FS:[0x0],EAX
009ac47b : MOV EAX,dword ptr [EBP + 0x8]
009ac47e : MOV dword ptr [EBP + -0x38],EAX
009ac481 : MOV EAX,[0x0172491c]
009ac486 : MOV ECX,dword ptr [EAX + 0x17c]
009ac48c : MOV ECX,dword ptr [ECX + 0x16d8]
009ac492 : MOV EDI,dword ptr [EAX + 0x144]
009ac498 : PUSH ECX
009ac499 : PUSH EDI
009ac49a : MOV dword ptr [EBP + -0x34],ECX
009ac49d : CALL 0x00812bb0
009ac4a2 : MOV ECX,dword ptr [EDI + 0xf4]
009ac4a8 : SUB ECX,dword ptr [EDI + 0xf0]
009ac4ae : MOV ESI,dword ptr [EBP + 0xc]
009ac4b1 : SAR ECX,0x2
009ac4b4 : CMP ESI,ECX
009ac4b6 : JNC 0x009ac732
009ac4bc : MOV EDX,dword ptr [EDI + 0xf0]
009ac4c2 : MOV EDI,dword ptr [EDX + ESI*0x4]
009ac4c5 : XOR EBX,EBX
009ac4c7 : CMP EDI,EBX
009ac4c9 : JZ 0x009ac732
009ac4cf : PUSH 0xc8b398
009ac4d4 : LEA ECX,[EBP + -0x2c]
009ac4d7 : CALL 0x00406460
009ac4dc : MOV dword ptr [EBP + -0x4],EBX
009ac4df : MOV EAX,dword ptr [EDI + 0x30]
009ac4e2 : SUB EAX,dword ptr [EDI + 0x2c]
009ac4e5 : SAR EAX,0x2
009ac4e8 : TEST EAX,EAX
009ac4ea : JBE 0x009ac5a7
009ac4f0 : CMP dword ptr [EBP + -0x18],0x0
009ac4f4 : JZ 0x009ac541
009ac4f6 : LEA ECX,[EBP + -0x54]
009ac4f9 : PUSH ECX
009ac4fa : MOV EDX,0xc8b39c
009ac4ff : LEA ECX,[EBP + -0x2c]
009ac502 : CALL 0x00403510
009ac507 : ADD ESP,0x4
009ac50a : MOV byte ptr [EBP + -0x4],0x1
009ac50e : PUSH -0x1
009ac510 : PUSH 0x0
009ac512 : PUSH EAX
009ac513 : LEA ECX,[EBP + -0x2c]
009ac516 : CALL 0x00405eb0
009ac51b : MOV byte ptr [EBP + -0x4],0x0
009ac51f : CMP dword ptr [EBP + -0x3c],0x8
009ac523 : JC 0x009ac52d
009ac525 : MOV ECX,dword ptr [EBP + -0x50]
009ac528 : CALL 0x006f04e0
009ac52d : XOR EDX,EDX
009ac52f : MOV dword ptr [EBP + -0x3c],0x7
009ac536 : MOV dword ptr [EBP + -0x40],0x0
009ac53d : MOV word ptr [EBP + -0x50],DX
009ac541 : MOV EAX,dword ptr [EDI + 0x2c]
009ac544 : MOV ECX,dword ptr [EAX + EBX*0x4]
009ac547 : LEA EAX,[EAX + EBX*0x4]
009ac54a : PUSH ECX
009ac54b : PUSH 0xc8b3a0
009ac550 : LEA ESI,[EBP + -0x70]
009ac553 : CALL 0x00404750
009ac558 : ADD ESP,0x8
009ac55b : MOV byte ptr [EBP + -0x4],0x2
009ac55f : PUSH -0x1
009ac561 : PUSH 0x0
009ac563 : PUSH EAX
009ac564 : LEA ECX,[EBP + -0x2c]
009ac567 : CALL 0x00405c30
009ac56c : MOV byte ptr [EBP + -0x4],0x0
009ac570 : CMP dword ptr [EBP + -0x58],0x8
009ac574 : JC 0x009ac57e
009ac576 : MOV ECX,dword ptr [EBP + -0x6c]
009ac579 : CALL 0x006f04e0
009ac57e : MOV EAX,dword ptr [EDI + 0x30]
009ac581 : SUB EAX,dword ptr [EDI + 0x2c]
009ac584 : XOR EDX,EDX
009ac586 : INC EBX
009ac587 : SAR EAX,0x2
009ac58a : MOV dword ptr [EBP + -0x58],0x7
009ac591 : MOV dword ptr [EBP + -0x5c],0x0
009ac598 : MOV word ptr [EBP + -0x6c],DX
009ac59c : CMP EBX,EAX
009ac59e : JC 0x009ac4f0
009ac5a4 : MOV ESI,dword ptr [EBP + 0xc]
009ac5a7 : MOV ECX,dword ptr [0x00da9894]
009ac5ad : MOV EAX,dword ptr [ECX]
009ac5af : TEST EAX,EAX
009ac5b1 : JZ 0x009ac5e4
009ac5b3 : CMP dword ptr [EAX + 0x114],0x0
009ac5ba : JZ 0x009ac5e4
009ac5bc : CMP dword ptr [EBP + -0x14],0x8
009ac5c0 : MOV EAX,dword ptr [EAX + 0x114]
009ac5c6 : MOV ECX,dword ptr [EBP + -0x28]
009ac5c9 : JNC 0x009ac5ce
009ac5cb : LEA ECX,[EBP + -0x28]
009ac5ce : MOV EDX,dword ptr [EAX]
009ac5d0 : PUSH ECX
009ac5d1 : PUSH 0xc8b3a8
009ac5d6 : PUSH 0xc8b3ac
009ac5db : PUSH EAX
009ac5dc : MOV EAX,dword ptr [EDX + 0x4]
009ac5df : CALL EAX
009ac5e1 : ADD ESP,0x10
009ac5e4 : TEST ESI,ESI
009ac5e6 : JLE 0x009ac623
009ac5e8 : MOV ECX,dword ptr [0x0172491c]
009ac5ee : MOV EDX,dword ptr [EBP + -0x34]
009ac5f1 : MOV EBX,dword ptr [ECX + 0x144]
009ac5f7 : PUSH EDX
009ac5f8 : PUSH EBX
009ac5f9 : DEC ESI
009ac5fa : CALL 0x00812bb0
009ac5ff : MOV EAX,dword ptr [EBX + 0xf4]
009ac605 : SUB EAX,dword ptr [EBX + 0xf0]
009ac60b : SAR EAX,0x2
009ac60e : CMP ESI,EAX
009ac610 : JNC 0x009ac620
009ac612 : MOV ECX,dword ptr [EBX + 0xf0]
009ac618 : MOV EAX,dword ptr [ECX + ESI*0x4]
009ac61b : MOV ESI,dword ptr [EBP + 0xc]
009ac61e : JMP 0x009ac625
009ac620 : MOV ESI,dword ptr [EBP + 0xc]
009ac623 : XOR EAX,EAX
009ac625 : TEST EAX,EAX
009ac627 : JZ 0x009ac637
009ac629 : MOV DX,word ptr [EDI + 0x4]
009ac62d : MOV byte ptr [EBP + -0x2d],0x1
009ac631 : CMP DX,word ptr [EAX + 0x4]
009ac635 : JZ 0x009ac63b
009ac637 : MOV byte ptr [EBP + -0x2d],0x0
009ac63b : MOV EAX,[0x0172491c]
009ac640 : MOV ECX,dword ptr [EBP + -0x34]
009ac643 : MOV EBX,dword ptr [EAX + 0x144]
009ac649 : PUSH ECX
009ac64a : PUSH EBX
009ac64b : INC ESI
009ac64c : CALL 0x00812bb0
009ac651 : MOV EDX,dword ptr [EBX + 0xf4]
009ac657 : SUB EDX,dword ptr [EBX + 0xf0]
009ac65d : SAR EDX,0x2
009ac660 : CMP ESI,EDX
009ac662 : JNC 0x009ac67f
009ac664 : MOV EAX,dword ptr [EBX + 0xf0]
009ac66a : MOV ESI,dword ptr [EAX + ESI*0x4]
009ac66d : TEST ESI,ESI
009ac66f : JZ 0x009ac67f
009ac671 : MOV CX,word ptr [EDI + 0x4]
009ac675 : CMP CX,word ptr [ESI + 0x4]
009ac679 : JNZ 0x009ac67f
009ac67b : MOV BL,0x1
009ac67d : JMP 0x009ac681
009ac67f : XOR BL,BL
009ac681 : MOV EDX,dword ptr [0x00da9894]
009ac687 : MOV EAX,dword ptr [EDX]
009ac689 : TEST EAX,EAX
009ac68b : JZ 0x009ac700
009ac68d : CMP dword ptr [EAX + 0x114],0x0
009ac694 : JZ 0x009ac700
009ac696 : MOV ECX,dword ptr [EAX + 0x114]
009ac69c : MOV EAX,[0x017248c8]
009ac6a1 : MOV EAX,dword ptr [EAX + 0x150]
009ac6a7 : LEA EDX,[EAX*0x8 + 0x0]
009ac6ae : SUB EDX,EAX
009ac6b0 : MOV EAX,dword ptr [EDI + 0x3c]
009ac6b3 : LEA EAX,[EAX + EDX*0x4]
009ac6b6 : MOV EDX,0x8
009ac6bb : CMP dword ptr [EAX + 0x18],EDX
009ac6be : JC 0x009ac6c5
009ac6c0 : MOV ESI,dword ptr [EAX + 0x4]
009ac6c3 : JMP 0x009ac6c8
009ac6c5 : LEA ESI,[EAX + 0x4]
009ac6c8 : CMP dword ptr [EDI + 0x24],EDX
009ac6cb : JC 0x009ac6d2
009ac6cd : MOV EDX,dword ptr [EDI + 0x10]
009ac6d0 : JMP 0x009ac6d5
009ac6d2 : LEA EDX,[EDI + 0x10]
009ac6d5 : MOV EAX,dword ptr [ECX]
009ac6d7 : MOV EAX,dword ptr [EAX + 0x4]
009ac6da : MOVZX EBX,BL
009ac6dd : PUSH EBX
009ac6de : MOVZX EBX,byte ptr [EBP + -0x2d]
009ac6e2 : PUSH EBX
009ac6e3 : PUSH 0x1
009ac6e5 : PUSH ESI
009ac6e6 : PUSH EDX
009ac6e7 : MOVZX EDX,word ptr [EDI + 0x4]
009ac6eb : PUSH EDX
009ac6ec : MOV EDX,dword ptr [EBP + 0xc]
009ac6ef : PUSH EDX
009ac6f0 : PUSH 0xc8b3c8
009ac6f5 : PUSH 0xc8b3e8
009ac6fa : PUSH ECX
009ac6fb : CALL EAX
009ac6fd : ADD ESP,0x28
009ac700 : MOV ECX,dword ptr [EBP + -0x38]
009ac703 : MOV EDX,dword ptr [EBP + 0xc]
009ac706 : MOV dword ptr [ECX + 0x38],EDX
009ac709 : MOV dword ptr [EBP + -0x4],0xffffffff
009ac710 : CMP dword ptr [EBP + -0x14],0x8
009ac714 : JC 0x009ac71e
009ac716 : MOV ECX,dword ptr [EBP + -0x28]
009ac719 : CALL 0x006f04e0
009ac71e : XOR EAX,EAX
009ac720 : MOV dword ptr [EBP + -0x14],0x7
009ac727 : MOV dword ptr [EBP + -0x18],0x0
009ac72e : MOV word ptr [EBP + -0x28],AX
009ac732 : MOV ECX,dword ptr [EBP + -0xc]
009ac735 : MOV dword ptr FS:[0x0],ECX
009ac73c : POP ECX
009ac73d : POP EDI
009ac73e : POP ESI
009ac73f : POP EBX
009ac740 : MOV ECX,dword ptr [EBP + -0x10]
009ac743 : XOR ECX,EBP
009ac745 : CALL 0x00633e6b
009ac74a : MOV ESP,EBP
009ac74c : POP EBP
009ac74d : RET 0x8
