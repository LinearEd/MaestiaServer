PROGRAM  : Maestia.exe
FUNCTION : FUN_00a2e970
ENTRY    : 00a2e970
BODY     : [[00a2e970, 00a2eb45]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00a2e970(float *param_1)

{
  int iVar1;
  float *pfVar2;
  int iVar3;
  int unaff_EDI;
  float10 extraout_ST0;
  float10 extraout_ST0_00;
  float fVar4;
  float fVar5;
  float fVar6;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  pfVar2 = param_1;
  iVar3 = *(int *)(*(int *)(unaff_EDI + 0xac) + 1000);
  local_18 = *(float *)(iVar3 + 0x70) - param_1[2];
  local_20 = *(float *)(iVar3 + 0x68) - *param_1;
  local_1c = *(float *)(iVar3 + 0x6c) - param_1[1];
  param_1 = (float *)CONCAT13(0xff,param_1._0_3_);
  FUN_0040f460(local_18 * local_18 + local_20 * local_20 + local_1c * local_1c);
  local_8 = (float)extraout_ST0;
  if ((float10)4e+07 <= extraout_ST0) {
    D3DXVec3Normalize(&local_20,&local_20);
    local_10 = pfVar2[1];
    local_14 = *pfVar2;
    local_c = pfVar2[2];
    if (local_8 <= 4e+07) {
      return 0;
    }
    iVar3 = *(int *)(unaff_EDI + 0xac);
    do {
      local_14 = local_20 * 10.0 + local_14;
      local_c = local_18 * 10.0 + local_c;
      FUN_00891380(iVar3,local_14,local_c,&local_10,(int)&param_1 + 3,0,1);
      iVar3 = *(int *)(unaff_EDI + 0xac);
      iVar1 = *(int *)(iVar3 + 1000);
      fVar6 = *(float *)(iVar1 + 0x70) - local_c;
      fVar5 = *(float *)(iVar1 + 0x6c) - local_10;
      fVar4 = *(float *)(iVar1 + 0x68) - local_14;
      FUN_0040f460(fVar6 * fVar6 + fVar5 * fVar5 + fVar4 * fVar4);
      local_8 = (float)extraout_ST0_00;
      if ((float10)4e+07 < extraout_ST0_00) {
        return 0;
      }
    } while (4e+07 < local_8);
    *pfVar2 = local_14;
    pfVar2[1] = local_10;
    pfVar2[2] = local_c;
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00a2e970 : PUSH EBP
00a2e971 : MOV EBP,ESP
00a2e973 : SUB ESP,0x1c
00a2e976 : XORPS XMM0,XMM0
00a2e979 : MOV EAX,dword ptr [EDI + 0xac]
00a2e97f : MOVSS dword ptr [EBP + -0x1c],XMM0
00a2e984 : MOVSS dword ptr [EBP + -0x18],XMM0
00a2e989 : MOVSS dword ptr [EBP + -0x14],XMM0
00a2e98e : MOV EAX,dword ptr [EAX + 0x3e8]
00a2e994 : MOVSS XMM2,dword ptr [EAX + 0x70]
00a2e999 : MOVSS XMM0,dword ptr [EAX + 0x68]
00a2e99e : MOVSS XMM1,dword ptr [EAX + 0x6c]
00a2e9a3 : ADD EAX,0x68
00a2e9a6 : PUSH EBX
00a2e9a7 : MOV EBX,dword ptr [EBP + 0x8]
00a2e9aa : SUBSS XMM2,dword ptr [EBX + 0x8]
00a2e9af : SUBSS XMM0,dword ptr [EBX]
00a2e9b3 : SUBSS XMM1,dword ptr [EBX + 0x4]
00a2e9b8 : MOVAPS XMM3,XMM2
00a2e9bb : MULSS XMM3,XMM2
00a2e9bf : MOVSS dword ptr [EBP + -0x14],XMM2
00a2e9c4 : MOVAPS XMM2,XMM0
00a2e9c7 : MULSS XMM2,XMM0
00a2e9cb : MOVSS dword ptr [EBP + -0x1c],XMM0
00a2e9d0 : PUSH ESI
00a2e9d1 : MOVAPS XMM0,XMM1
00a2e9d4 : ADDSS XMM3,XMM2
00a2e9d8 : MULSS XMM0,XMM1
00a2e9dc : PUSH ECX
00a2e9dd : ADDSS XMM3,XMM0
00a2e9e1 : MOV byte ptr [EBP + 0xb],0xff
00a2e9e5 : MOVSS dword ptr [EBP + -0x18],XMM1
00a2e9ea : MOVSS dword ptr [ESP],XMM3
00a2e9ef : CALL 0x0040f460
00a2e9f4 : FST float ptr [EBP + -0x4]
00a2e9f7 : FLD float ptr [0x00cdf7f0]
00a2e9fd : ADD ESP,0x4
00a2ea00 : FCOMIP ST0,ST1
00a2ea02 : FSTP ST0
00a2ea04 : JA 0x00a2eb32
00a2ea0a : LEA ECX,[EBP + -0x1c]
00a2ea0d : PUSH ECX
00a2ea0e : MOV EDX,ECX
00a2ea10 : PUSH EDX
00a2ea11 : CALL 0x004ff722
00a2ea16 : MOVSS XMM0,dword ptr [EBX + 0x4]
00a2ea1b : MOVSS XMM1,dword ptr [EBX]
00a2ea1f : MOVSS XMM2,dword ptr [EBX + 0x8]
00a2ea24 : MOVSS dword ptr [EBP + -0xc],XMM0
00a2ea29 : MOVSS XMM0,dword ptr [EBP + -0x4]
00a2ea2e : COMISS XMM0,dword ptr [0x00cdf7f0]
00a2ea35 : JBE 0x00a2eb3c
00a2ea3b : MOV ESI,dword ptr [EDI + 0xac]
00a2ea41 : MOVSS XMM0,dword ptr [0x00c18874]
00a2ea49 : MOVSS XMM3,dword ptr [EBP + -0x1c]
00a2ea4e : PUSH 0x1
00a2ea50 : PUSH 0x0
00a2ea52 : MULSS XMM3,XMM0
00a2ea56 : ADDSS XMM3,XMM1
00a2ea5a : MOVSS XMM1,dword ptr [EBP + -0x14]
00a2ea5f : LEA EAX,[EBP + 0xb]
00a2ea62 : PUSH EAX
00a2ea63 : LEA ECX,[EBP + -0xc]
00a2ea66 : MULSS XMM1,XMM0
00a2ea6a : PUSH ECX
00a2ea6b : ADDSS XMM1,XMM2
00a2ea6f : SUB ESP,0x8
00a2ea72 : MOVSS dword ptr [EBP + -0x8],XMM1
00a2ea77 : FLD float ptr [EBP + -0x8]
00a2ea7a : FSTP float ptr [ESP + 0x4]
00a2ea7e : MOVSS dword ptr [EBP + -0x10],XMM3
00a2ea83 : FLD float ptr [EBP + -0x10]
00a2ea86 : FSTP float ptr [ESP]
00a2ea89 : PUSH ESI
00a2ea8a : CALL 0x00891380
00a2ea8f : MOV ESI,dword ptr [EDI + 0xac]
00a2ea95 : MOV EAX,dword ptr [ESI + 0x3e8]
00a2ea9b : MOVSS XMM2,dword ptr [EAX + 0x70]
00a2eaa0 : SUBSS XMM2,dword ptr [EBP + -0x8]
00a2eaa5 : MOVSS XMM1,dword ptr [EAX + 0x6c]
00a2eaaa : SUBSS XMM1,dword ptr [EBP + -0xc]
00a2eaaf : MOVSS XMM0,dword ptr [EAX + 0x68]
00a2eab4 : SUBSS XMM0,dword ptr [EBP + -0x10]
00a2eab9 : ADD EAX,0x68
00a2eabc : MOVAPS XMM3,XMM2
00a2eabf : MULSS XMM3,XMM2
00a2eac3 : MOVAPS XMM2,XMM1
00a2eac6 : MULSS XMM2,XMM1
00a2eaca : MOVAPS XMM1,XMM0
00a2eacd : ADDSS XMM3,XMM2
00a2ead1 : MULSS XMM1,XMM0
00a2ead5 : PUSH ECX
00a2ead6 : ADDSS XMM3,XMM1
00a2eada : MOVSS dword ptr [ESP],XMM3
00a2eadf : CALL 0x0040f460
00a2eae4 : FST float ptr [EBP + -0x4]
00a2eae7 : FLD float ptr [0x00cdf7f0]
00a2eaed : ADD ESP,0x4
00a2eaf0 : FXCH
00a2eaf2 : FCOMIP ST0,ST1
00a2eaf4 : FSTP ST0
00a2eaf6 : JA 0x00a2eb3c
00a2eaf8 : MOVSS XMM0,dword ptr [0x00cdf7f0]
00a2eb00 : COMISS XMM0,dword ptr [EBP + -0x4]
00a2eb04 : JNC 0x00a2eb15
00a2eb06 : MOVSS XMM2,dword ptr [EBP + -0x8]
00a2eb0b : MOVSS XMM1,dword ptr [EBP + -0x10]
00a2eb10 : JMP 0x00a2ea41
00a2eb15 : MOVSS XMM0,dword ptr [EBP + -0x10]
00a2eb1a : MOVSS dword ptr [EBX],XMM0
00a2eb1e : MOVSS XMM0,dword ptr [EBP + -0xc]
00a2eb23 : MOVSS dword ptr [EBX + 0x4],XMM0
00a2eb28 : MOVSS XMM0,dword ptr [EBP + -0x8]
00a2eb2d : MOVSS dword ptr [EBX + 0x8],XMM0
00a2eb32 : MOV AL,0x1
00a2eb34 : POP ESI
00a2eb35 : POP EBX
00a2eb36 : MOV ESP,EBP
00a2eb38 : POP EBP
00a2eb39 : RET 0x4
00a2eb3c : POP ESI
00a2eb3d : XOR AL,AL
00a2eb3f : POP EBX
00a2eb40 : MOV ESP,EBP
00a2eb42 : POP EBP
00a2eb43 : RET 0x4
