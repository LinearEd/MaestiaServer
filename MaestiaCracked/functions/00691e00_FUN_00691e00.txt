PROGRAM  : Maestia.exe
FUNCTION : FUN_00691e00
ENTRY    : 00691e00
BODY     : [[00691e00, 00691eac] [00691eb0, 00691f59] [00691f60, 00691fa9]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00691e00(int param_1,int param_2)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined1 uVar3;
  byte bVar4;
  undefined1 uVar5;
  undefined1 uVar6;
  undefined1 uVar7;
  uint uVar8;
  uint uVar9;
  undefined1 *puVar10;
  undefined1 *puVar11;
  undefined1 *puVar12;
  
  uVar8 = (uint)CONCAT11(*(undefined1 *)(param_1 + 2),*(undefined1 *)(param_1 + 3));
  puVar2 = (undefined1 *)(uVar8 + param_1);
  if ((*(undefined1 **)(param_2 + 4) < puVar2) || (uVar8 < 0x206)) {
    FUN_00686490(param_2,8);
  }
  puVar10 = (undefined1 *)(param_1 + 6);
  param_1 = 0x100;
  uVar8 = 0;
  do {
    puVar11 = puVar10;
    uVar3 = *puVar11;
    bVar4 = puVar11[1];
    if ((1 < *(int *)(param_2 + 8)) && ((bVar4 & 7) != 0)) {
      FUN_00686490(param_2,8);
    }
    uVar9 = (uint)(ushort)(CONCAT11(uVar3,bVar4) >> 3);
    if (uVar8 < uVar9) {
      uVar8 = uVar9;
    }
    param_1 = param_1 + -1;
    puVar10 = puVar11 + 2;
  } while (param_1 != 0);
  if (*(undefined1 **)(param_2 + 4) < puVar11 + uVar8 * 8 + 10) {
    FUN_00686490(param_2,8);
  }
  param_1 = uVar8 + 1;
  do {
    uVar3 = puVar10[4];
    uVar9 = (uint)CONCAT11(puVar10[2],puVar10[3]);
    uVar5 = puVar10[5];
    uVar6 = puVar10[7];
    puVar12 = puVar10 + 8;
    uVar7 = puVar10[6];
    if ((1 < *(int *)(param_2 + 8)) &&
       ((0xff < CONCAT11(*puVar10,puVar10[1]) || (0x100 < uVar9 + CONCAT11(*puVar10,puVar10[1])))))
    {
      FUN_00686490(param_2,8);
    }
    if (CONCAT11(uVar7,uVar6) != 0) {
      if ((puVar12 + (CONCAT11(uVar7,uVar6) - 2) < puVar11 + uVar8 * 8 + 10) ||
         (puVar2 < puVar12 + (CONCAT11(uVar7,uVar6) - 2) + uVar9 * 2)) {
        FUN_00686490(param_2,9);
      }
      if (0 < *(int *)(param_2 + 8)) {
        puVar10 = puVar12 + uVar9 * 2;
        while (puVar12 < puVar10) {
          uVar6 = *puVar12;
          puVar1 = puVar12 + 1;
          puVar12 = puVar12 + 2;
          if ((CONCAT11(uVar6,*puVar1) != 0) &&
             (*(uint *)(param_2 + 0x50) <=
              (uint)(ushort)(CONCAT11(uVar6,*puVar1) + CONCAT11(uVar3,uVar5)))) {
            FUN_00686490(param_2,0x10);
          }
        }
      }
    }
    param_1 = param_1 + -1;
    puVar10 = puVar12;
  } while (param_1 != 0);
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00691e00 : SUB ESP,0x8
00691e03 : PUSH EBX
00691e04 : PUSH EBP
00691e05 : MOV EBP,dword ptr [ESP + 0x18]
00691e09 : MOV EDX,dword ptr [EBP + 0x4]
00691e0c : PUSH ESI
00691e0d : MOV ESI,dword ptr [ESP + 0x18]
00691e11 : MOVZX AX,byte ptr [ESI + 0x2]
00691e16 : MOVZX ECX,byte ptr [ESI + 0x3]
00691e1a : SHL AX,0x8
00691e1e : MOVZX EAX,AX
00691e21 : OR EAX,ECX
00691e23 : LEA ECX,[EAX + ESI*0x1]
00691e26 : PUSH EDI
00691e27 : MOV dword ptr [ESP + 0x10],ECX
00691e2b : CMP ECX,EDX
00691e2d : JA 0x00691e36
00691e2f : CMP EAX,0x206
00691e34 : JNC 0x00691e41
00691e36 : PUSH 0x8
00691e38 : PUSH EBP
00691e39 : CALL 0x00686490
00691e3e : ADD ESP,0x8
00691e41 : ADD ESI,0x6
00691e44 : XOR EDI,EDI
00691e46 : MOV dword ptr [ESP + 0x1c],0x100
00691e4e : MOV EDI,EDI
00691e50 : MOVZX AX,byte ptr [ESI]
00691e54 : MOVZX ECX,byte ptr [ESI + 0x1]
00691e58 : MOV EDX,dword ptr [EBP + 0x8]
00691e5b : ADD ESI,0x2
00691e5e : SHL AX,0x8
00691e62 : MOVZX EBX,AX
00691e65 : OR EBX,ECX
00691e67 : CMP EDX,0x2
00691e6a : JL 0x00691e7c
00691e6c : TEST BL,0x7
00691e6f : JZ 0x00691e7c
00691e71 : PUSH 0x8
00691e73 : PUSH EBP
00691e74 : CALL 0x00686490
00691e79 : ADD ESP,0x8
00691e7c : SHR EBX,0x3
00691e7f : CMP EBX,EDI
00691e81 : JBE 0x00691e85
00691e83 : MOV EDI,EBX
00691e85 : SUB dword ptr [ESP + 0x1c],0x1
00691e8a : JNZ 0x00691e50
00691e8c : MOV ECX,dword ptr [EBP + 0x4]
00691e8f : LEA EAX,[ESI + EDI*0x8 + 0x8]
00691e93 : MOV dword ptr [ESP + 0x20],EAX
00691e97 : CMP EAX,ECX
00691e99 : JBE 0x00691ea6
00691e9b : PUSH 0x8
00691e9d : PUSH EBP
00691e9e : CALL 0x00686490
00691ea3 : ADD ESP,0x8
00691ea6 : INC EDI
00691ea7 : MOV dword ptr [ESP + 0x1c],EDI
00691eab : JMP 0x00691eb0
00691eb0 : MOVZX EDX,byte ptr [ESI]
00691eb3 : MOVZX ECX,byte ptr [ESI + 0x1]
00691eb7 : ADD ESI,0x2
00691eba : SHL DX,0x8
00691ebe : MOVZX EAX,DX
00691ec1 : MOVZX EDX,byte ptr [ESI]
00691ec4 : ADD ESI,0x2
00691ec7 : OR EAX,ECX
00691ec9 : MOVZX ECX,byte ptr [ESI + -0x1]
00691ecd : SHL DX,0x8
00691ed1 : MOVZX EBX,DX
00691ed4 : MOVSX EDX,byte ptr [ESI]
00691ed7 : ADD ESI,0x2
00691eda : OR EBX,ECX
00691edc : SHL DX,0x8
00691ee0 : MOVSX ECX,DX
00691ee3 : MOVZX EDX,byte ptr [ESI + -0x1]
00691ee7 : OR ECX,EDX
00691ee9 : MOVZX EDX,byte ptr [ESI + 0x1]
00691eed : ADD ESI,0x2
00691ef0 : MOV dword ptr [ESP + 0x14],ECX
00691ef4 : MOVZX CX,byte ptr [ESI + -0x2]
00691ef9 : SHL CX,0x8
00691efd : MOVZX EDI,CX
00691f00 : MOV ECX,dword ptr [EBP + 0x8]
00691f03 : OR EDI,EDX
00691f05 : CMP ECX,0x2
00691f08 : JL 0x00691f27
00691f0a : CMP EAX,0x100
00691f0f : JNC 0x00691f1c
00691f11 : LEA EDX,[EBX + EAX*0x1]
00691f14 : CMP EDX,0x100
00691f1a : JBE 0x00691f27
00691f1c : PUSH 0x8
00691f1e : PUSH EBP
00691f1f : CALL 0x00686490
00691f24 : ADD ESP,0x8
00691f27 : TEST EDI,EDI
00691f29 : JZ 0x00691f95
00691f2b : LEA EDI,[EDI + ESI*0x1 + -0x2]
00691f2f : CMP EDI,dword ptr [ESP + 0x20]
00691f33 : JC 0x00691f3e
00691f35 : LEA EAX,[EDI + EBX*0x2]
00691f38 : CMP EAX,dword ptr [ESP + 0x10]
00691f3c : JBE 0x00691f49
00691f3e : PUSH 0x9
00691f40 : PUSH EBP
00691f41 : CALL 0x00686490
00691f46 : ADD ESP,0x8
00691f49 : MOV ECX,dword ptr [EBP + 0x8]
00691f4c : CMP ECX,0x1
00691f4f : JL 0x00691f95
00691f51 : LEA EBX,[ESI + EBX*0x2]
00691f54 : CMP ESI,EBX
00691f56 : JNC 0x00691f95
00691f58 : JMP 0x00691f60
00691f60 : MOVZX DX,byte ptr [ESI]
00691f64 : MOVZX ECX,byte ptr [ESI + 0x1]
00691f68 : ADD ESI,0x2
00691f6b : SHL DX,0x8
00691f6f : MOVZX EAX,DX
00691f72 : OR EAX,ECX
00691f74 : JZ 0x00691f91
00691f76 : MOV EDX,dword ptr [ESP + 0x14]
00691f7a : ADD EAX,EDX
00691f7c : AND EAX,0xffff
00691f81 : CMP EAX,dword ptr [EBP + 0x50]
00691f84 : JC 0x00691f91
00691f86 : PUSH 0x10
00691f88 : PUSH EBP
00691f89 : CALL 0x00686490
00691f8e : ADD ESP,0x8
00691f91 : CMP ESI,EBX
00691f93 : JC 0x00691f60
00691f95 : SUB dword ptr [ESP + 0x1c],0x1
00691f9a : JNZ 0x00691eb0
00691fa0 : POP EDI
00691fa1 : POP ESI
00691fa2 : POP EBP
00691fa3 : XOR EAX,EAX
00691fa5 : POP EBX
00691fa6 : ADD ESP,0x8
00691fa9 : RET
