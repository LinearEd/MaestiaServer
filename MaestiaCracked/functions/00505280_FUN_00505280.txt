PROGRAM  : Maestia.exe
FUNCTION : FUN_00505280
ENTRY    : 00505280
BODY     : [[00505280, 005054e7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00505280(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  undefined **local_110;
  undefined4 local_10c;
  undefined4 local_108;
  undefined2 local_104;
  undefined2 local_102;
  undefined2 local_100;
  undefined2 local_fe;
  undefined2 local_fc;
  undefined2 local_fa;
  undefined **local_f8;
  undefined4 local_f4;
  undefined4 local_f0;
  undefined2 local_ec;
  undefined2 local_ea;
  undefined2 local_e8;
  undefined2 local_e6;
  undefined2 local_e4;
  undefined2 local_e2;
  undefined1 local_e0 [44];
  undefined **local_b4 [6];
  undefined **local_9c [17];
  undefined1 local_58 [44];
  undefined1 local_2c [44];
  
  uVar3 = FUN_00515dd0(in_ECX);
  FUN_00504200(uVar3);
  local_102 = 0;
  local_fc = 0;
  local_104 = 0;
  local_100 = 0;
  local_fe = 0;
  local_fa = 0;
  local_10c = 1;
  local_108 = 0;
  local_110 = &PTR_FUN_00b86064;
  iVar1 = *(int *)(*(int *)(in_ECX + 0xa0) + 0xc);
  iVar2 = *(int *)(iVar1 + 0x1c);
  iVar1 = *(int *)(iVar1 + 0x18);
  if ((*(ushort *)(*(int *)(in_ECX + 0x9c) + 0x50) >> 0xb & 1) == 0) {
    FUN_00504330(local_e0,&local_110);
    if (iVar2 != 0) {
      uVar3 = FUN_0055fca0(local_58,local_e0);
      FUN_00504700(uVar3);
      FUN_00504260();
    }
    if (iVar1 != 0) {
      uVar3 = FUN_0055f330(local_9c,&local_110);
      FUN_0055ee10(uVar3);
      local_9c[0] = &PTR_FUN_00b86064;
      FUN_0055e7c0();
      GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)local_9c);
    }
  }
  else {
    if (iVar2 != 0) {
      FUN_00504700(iVar2);
    }
    if (iVar1 != 0) {
      FUN_0055ee10(iVar1);
    }
    uVar3 = FUN_00515dd0(in_ECX);
    FUN_00504200(uVar3);
    local_ea = 0;
    local_e4 = 0;
    local_f4 = 1;
    local_f8 = &PTR_FUN_00b86064;
    local_f0 = 0;
    local_ec = 0;
    local_e8 = 0;
    local_e6 = 0;
    local_e2 = 0;
    FUN_005603f0();
    FUN_0055ed00();
    uVar3 = FUN_0055fca0(local_2c,local_e0);
    FUN_00504700(uVar3);
    FUN_00504260();
    uVar3 = FUN_0055f330(local_b4,&local_110);
    FUN_0055ee10(uVar3);
    local_b4[0] = &PTR_FUN_00b86064;
    FUN_0055e7c0();
    GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)local_b4);
    local_f8 = &PTR_FUN_00b86064;
    FUN_0055e7c0();
    GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)&local_f8);
    FUN_00504260();
  }
  FUN_0053f7c0(local_e0);
  FUN_0053f8a0(&local_110);
  local_110 = &PTR_FUN_00b86064;
  FUN_0055e7c0();
  GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)&local_110);
  FUN_00504260();
  return;
}



============================================================
DISASSEMBLY
============================================================
00505280 : SUB ESP,0x110
00505286 : PUSH EBX
00505287 : PUSH EBP
00505288 : PUSH ESI
00505289 : PUSH EDI
0050528a : MOV ESI,ECX
0050528c : PUSH ESI
0050528d : CALL 0x00515dd0
00505292 : PUSH EAX
00505293 : LEA ECX,[ESP + 0x44]
00505297 : CALL 0x00504200
0050529c : XOR ECX,ECX
0050529e : MOV dword ptr [ESP + 0x10],0xcd3f2c
005052a6 : XOR EAX,EAX
005052a8 : MOV word ptr [ESP + 0x1e],CX
005052ad : XOR EDX,EDX
005052af : MOV word ptr [ESP + 0x24],CX
005052b4 : MOV ECX,dword ptr [ESI + 0x9c]
005052ba : MOV word ptr [ESP + 0x1c],AX
005052bf : MOV word ptr [ESP + 0x20],DX
005052c4 : MOV word ptr [ESP + 0x22],AX
005052c9 : MOV EAX,dword ptr [ESI + 0xa0]
005052cf : MOV word ptr [ESP + 0x26],DX
005052d4 : MOV dword ptr [ESP + 0x14],0x1
005052dc : MOV dword ptr [ESP + 0x18],0x0
005052e4 : MOV EBX,0xb86064
005052e9 : MOV dword ptr [ESP + 0x10],EBX
005052ed : MOV DX,word ptr [ECX + 0x50]
005052f1 : MOV EAX,dword ptr [EAX + 0xc]
005052f4 : MOV EDI,dword ptr [EAX + 0x1c]
005052f7 : MOV EBP,dword ptr [EAX + 0x18]
005052fa : SHR DX,0xb
005052fe : TEST DL,0x1
00505301 : JNZ 0x00505390
00505307 : LEA EAX,[ESP + 0x10]
0050530b : PUSH EAX
0050530c : LEA ECX,[ESP + 0x44]
00505310 : PUSH ECX
00505311 : MOV ECX,ESI
00505313 : CALL 0x00504330
00505318 : TEST EDI,EDI
0050531a : JZ 0x00505346
0050531c : LEA EDX,[ESP + 0x40]
00505320 : PUSH EDX
00505321 : LEA EAX,[ESP + 0xcc]
00505328 : PUSH EAX
00505329 : MOV ECX,EDI
0050532b : CALL 0x0055fca0
00505330 : PUSH EAX
00505331 : LEA ECX,[ESP + 0x44]
00505335 : CALL 0x00504700
0050533a : LEA ECX,[ESP + 0xc8]
00505341 : CALL 0x00504260
00505346 : TEST EBP,EBP
00505348 : JZ 0x00505498
0050534e : LEA ECX,[ESP + 0x10]
00505352 : PUSH ECX
00505353 : LEA EDX,[ESP + 0x88]
0050535a : PUSH EDX
0050535b : MOV ECX,EBP
0050535d : CALL 0x0055f330
00505362 : PUSH EAX
00505363 : LEA ECX,[ESP + 0x14]
00505367 : CALL 0x0055ee10
0050536c : LEA ECX,[ESP + 0x84]
00505373 : MOV dword ptr [ESP + 0x84],EBX
0050537a : CALL 0x0055e7c0
0050537f : LEA ECX,[ESP + 0x84]
00505386 : CALL 0x004ff7b0
0050538b : JMP 0x00505498
00505390 : TEST EDI,EDI
00505392 : JZ 0x0050539e
00505394 : PUSH EDI
00505395 : LEA ECX,[ESP + 0x44]
00505399 : CALL 0x00504700
0050539e : TEST EBP,EBP
005053a0 : JZ 0x005053ac
005053a2 : PUSH EBP
005053a3 : LEA ECX,[ESP + 0x14]
005053a7 : CALL 0x0055ee10
005053ac : PUSH ESI
005053ad : CALL 0x00515dd0
005053b2 : PUSH EAX
005053b3 : LEA ECX,[ESP + 0xa0]
005053ba : CALL 0x00504200
005053bf : XOR ECX,ECX
005053c1 : XOR EAX,EAX
005053c3 : XOR EDX,EDX
005053c5 : MOV dword ptr [ESP + 0x28],0xcd3f2c
005053cd : MOV word ptr [ESP + 0x36],CX
005053d2 : MOV word ptr [ESP + 0x3c],CX
005053d7 : LEA ECX,[ESP + 0x9c]
005053de : MOV dword ptr [ESP + 0x2c],0x1
005053e6 : MOV dword ptr [ESP + 0x28],EBX
005053ea : MOV dword ptr [ESP + 0x30],0x0
005053f2 : MOV word ptr [ESP + 0x34],AX
005053f7 : MOV word ptr [ESP + 0x38],DX
005053fc : MOV word ptr [ESP + 0x3a],AX
00505401 : MOV word ptr [ESP + 0x3e],DX
00505406 : CALL 0x005603f0
0050540b : LEA ECX,[ESP + 0x28]
0050540f : CALL 0x0055ed00
00505414 : LEA EAX,[ESP + 0x40]
00505418 : PUSH EAX
00505419 : LEA ECX,[ESP + 0xf8]
00505420 : PUSH ECX
00505421 : LEA ECX,[ESP + 0xa4]
00505428 : CALL 0x0055fca0
0050542d : PUSH EAX
0050542e : LEA ECX,[ESP + 0x44]
00505432 : CALL 0x00504700
00505437 : LEA ECX,[ESP + 0xf4]
0050543e : CALL 0x00504260
00505443 : LEA EDX,[ESP + 0x10]
00505447 : PUSH EDX
00505448 : LEA EAX,[ESP + 0x70]
0050544c : PUSH EAX
0050544d : LEA ECX,[ESP + 0x30]
00505451 : CALL 0x0055f330
00505456 : PUSH EAX
00505457 : LEA ECX,[ESP + 0x14]
0050545b : CALL 0x0055ee10
00505460 : LEA ECX,[ESP + 0x6c]
00505464 : MOV dword ptr [ESP + 0x6c],EBX
00505468 : CALL 0x0055e7c0
0050546d : LEA ECX,[ESP + 0x6c]
00505471 : CALL 0x004ff7b0
00505476 : LEA ECX,[ESP + 0x28]
0050547a : MOV dword ptr [ESP + 0x28],EBX
0050547e : CALL 0x0055e7c0
00505483 : LEA ECX,[ESP + 0x28]
00505487 : CALL 0x004ff7b0
0050548c : LEA ECX,[ESP + 0x9c]
00505493 : CALL 0x00504260
00505498 : MOV EDX,dword ptr [ESI + 0xa0]
0050549e : LEA ECX,[ESP + 0x40]
005054a2 : PUSH ECX
005054a3 : MOV ECX,dword ptr [EDX + 0xc]
005054a6 : CALL 0x0053f7c0
005054ab : MOV ECX,dword ptr [ESI + 0xa0]
005054b1 : MOV ECX,dword ptr [ECX + 0xc]
005054b4 : LEA EAX,[ESP + 0x10]
005054b8 : PUSH EAX
005054b9 : CALL 0x0053f8a0
005054be : LEA ECX,[ESP + 0x10]
005054c2 : MOV dword ptr [ESP + 0x10],EBX
005054c6 : CALL 0x0055e7c0
005054cb : LEA ECX,[ESP + 0x10]
005054cf : CALL 0x004ff7b0
005054d4 : LEA ECX,[ESP + 0x40]
005054d8 : CALL 0x00504260
005054dd : POP EDI
005054de : POP ESI
005054df : POP EBP
005054e0 : POP EBX
005054e1 : ADD ESP,0x110
005054e7 : RET
