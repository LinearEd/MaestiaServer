PROGRAM  : Maestia.exe
FUNCTION : FUN_006d8e80
ENTRY    : 006d8e80
BODY     : [[006d8e80, 006d8e9b] [006d8ea0, 006d8f18]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006d8e80(undefined4 param_1,char param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *unaff_ESI;
  int iVar5;
  
  iVar3 = unaff_ESI[4];
  iVar1 = unaff_ESI[2];
  iVar4 = unaff_ESI[6] * iVar1;
  iVar5 = 0;
  if (0 < iVar3) {
    do {
      iVar2 = iVar3 - iVar5;
      if (unaff_ESI[5] < iVar3 - iVar5) {
        iVar2 = unaff_ESI[5];
      }
      iVar3 = unaff_ESI[7] - (unaff_ESI[6] + iVar5);
      if (iVar3 <= iVar2) {
        iVar2 = iVar3;
      }
      iVar3 = unaff_ESI[1] - (unaff_ESI[6] + iVar5);
      if (iVar3 <= iVar2) {
        iVar2 = iVar3;
      }
      if (iVar2 < 1) {
        return;
      }
      iVar2 = iVar2 * iVar1;
      if (param_2 == '\0') {
        (*(code *)unaff_ESI[10])
                  (param_1,unaff_ESI + 10,*(undefined4 *)(*unaff_ESI + iVar5 * 4),iVar4,iVar2);
      }
      else {
        (*(code *)unaff_ESI[0xb])(param_1,unaff_ESI + 10,*(undefined4 *)(*unaff_ESI + iVar5 * 4));
      }
      iVar5 = iVar5 + unaff_ESI[5];
      iVar3 = unaff_ESI[4];
      iVar4 = iVar4 + iVar2;
    } while (iVar5 < iVar3);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006d8e80 : PUSH ECX
006d8e81 : MOV EAX,dword ptr [ESI + 0x10]
006d8e84 : PUSH EBX
006d8e85 : MOV EBX,dword ptr [ESI + 0x18]
006d8e88 : PUSH EBP
006d8e89 : MOV EBP,dword ptr [ESI + 0x8]
006d8e8c : PUSH EDI
006d8e8d : IMUL EBX,EBP
006d8e90 : XOR EDI,EDI
006d8e92 : MOV dword ptr [ESP + 0xc],EBP
006d8e96 : TEST EAX,EAX
006d8e98 : JLE 0x006d8f14
006d8e9a : JMP 0x006d8ea4
006d8ea0 : MOV EBP,dword ptr [ESP + 0xc]
006d8ea4 : MOV ECX,dword ptr [ESI + 0x14]
006d8ea7 : SUB EAX,EDI
006d8ea9 : CMP ECX,EAX
006d8eab : JGE 0x006d8eaf
006d8ead : MOV EAX,ECX
006d8eaf : MOV ECX,dword ptr [ESI + 0x18]
006d8eb2 : MOV EDX,dword ptr [ESI + 0x1c]
006d8eb5 : ADD ECX,EDI
006d8eb7 : SUB EDX,ECX
006d8eb9 : CMP EAX,EDX
006d8ebb : JL 0x006d8ebf
006d8ebd : MOV EAX,EDX
006d8ebf : MOV EDX,dword ptr [ESI + 0x4]
006d8ec2 : SUB EDX,ECX
006d8ec4 : CMP EAX,EDX
006d8ec6 : JL 0x006d8eca
006d8ec8 : MOV EAX,EDX
006d8eca : TEST EAX,EAX
006d8ecc : JLE 0x006d8f14
006d8ece : IMUL EAX,EBP
006d8ed1 : CMP byte ptr [ESP + 0x18],0x0
006d8ed6 : MOV EBP,EAX
006d8ed8 : PUSH EBP
006d8ed9 : PUSH EBX
006d8eda : JZ 0x006d8ef2
006d8edc : MOV EAX,dword ptr [ESI]
006d8ede : MOV ECX,dword ptr [EAX + EDI*0x4]
006d8ee1 : MOV EAX,dword ptr [ESP + 0x1c]
006d8ee5 : PUSH ECX
006d8ee6 : MOV ECX,dword ptr [ESI + 0x2c]
006d8ee9 : LEA EDX,[ESI + 0x28]
006d8eec : PUSH EDX
006d8eed : PUSH EAX
006d8eee : CALL ECX
006d8ef0 : JMP 0x006d8f05
006d8ef2 : MOV EDX,dword ptr [ESI]
006d8ef4 : MOV ECX,dword ptr [EDX + EDI*0x4]
006d8ef7 : MOV EDX,dword ptr [ESP + 0x1c]
006d8efb : LEA EAX,[ESI + 0x28]
006d8efe : PUSH ECX
006d8eff : PUSH EAX
006d8f00 : MOV EAX,dword ptr [EAX]
006d8f02 : PUSH EDX
006d8f03 : CALL EAX
006d8f05 : ADD EDI,dword ptr [ESI + 0x14]
006d8f08 : MOV EAX,dword ptr [ESI + 0x10]
006d8f0b : ADD ESP,0x14
006d8f0e : ADD EBX,EBP
006d8f10 : CMP EDI,EAX
006d8f12 : JL 0x006d8ea0
006d8f14 : POP EDI
006d8f15 : POP EBP
006d8f16 : POP EBX
006d8f17 : POP ECX
006d8f18 : RET
