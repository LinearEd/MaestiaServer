PROGRAM  : Maestia.exe
FUNCTION : FUN_00417160
ENTRY    : 00417160
BODY     : [[00417160, 0041725b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00417160(int param_1,int param_2,int param_3,undefined4 param_4)

{
  int iVar1;
  int iVar2;
  int local_c;
  int local_8;
  
  iVar2 = param_2 - param_1;
  do {
    iVar2 = iVar2 >> 2;
    if (iVar2 < 0x21) {
LAB_00417208:
      if (1 < iVar2) {
        FUN_00418060(param_1,param_2,param_4);
      }
      return;
    }
    if (param_3 < 1) {
      if (0x20 < iVar2) {
        if (4 < (int)(param_2 - param_1 & 0xfffffffcU)) {
          FUN_00417fb0(param_1,param_2,param_4);
        }
        FUN_00418000(param_1,param_2,param_4);
        return;
      }
      goto LAB_00417208;
    }
    FUN_00417990(&local_c,param_1,param_2,param_4);
    iVar1 = local_8;
    iVar2 = local_c;
    param_3 = param_3 / 2 + (param_3 / 2) / 2;
    if ((int)(local_c - param_1 & 0xfffffffcU) < (int)(param_2 - local_8 & 0xfffffffcU)) {
      FUN_00417160(param_1,local_c,param_3,param_4);
      param_1 = iVar1;
    }
    else {
      FUN_00417160(local_8,param_2,param_3,param_4);
      param_2 = iVar2;
    }
    iVar2 = param_2 - param_1;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
00417160 : PUSH EBP
00417161 : MOV EBP,ESP
00417163 : MOV ECX,dword ptr [EBP + 0xc]
00417166 : MOV EDX,dword ptr [EBP + 0x8]
00417169 : SUB ESP,0xc
0041716c : MOV EAX,ECX
0041716e : SUB EAX,EDX
00417170 : PUSH EBX
00417171 : SAR EAX,0x2
00417174 : CMP EAX,0x20
00417177 : PUSH ESI
00417178 : PUSH EDI
00417179 : JLE 0x00417208
0041717f : MOV ESI,dword ptr [EBP + 0x10]
00417182 : TEST ESI,ESI
00417184 : JLE 0x00417222
0041718a : MOV EAX,dword ptr [EBP + 0x14]
0041718d : PUSH EAX
0041718e : PUSH ECX
0041718f : PUSH EDX
00417190 : LEA ECX,[EBP + -0x8]
00417193 : PUSH ECX
00417194 : CALL 0x00417990
00417199 : MOV EBX,dword ptr [EBP + -0x8]
0041719c : MOV EDI,dword ptr [EBP + -0x4]
0041719f : MOV EAX,ESI
004171a1 : CDQ
004171a2 : SUB EAX,EDX
004171a4 : SAR EAX,0x1
004171a6 : MOV ESI,EAX
004171a8 : CDQ
004171a9 : SUB EAX,EDX
004171ab : SAR EAX,0x1
004171ad : ADD ESI,EAX
004171af : MOV EAX,dword ptr [EBP + 0xc]
004171b2 : MOV ECX,EBX
004171b4 : SUB ECX,dword ptr [EBP + 0x8]
004171b7 : MOV EDX,EAX
004171b9 : SUB EDX,EDI
004171bb : AND EDX,0xfffffffc
004171be : AND ECX,0xfffffffc
004171c1 : ADD ESP,0x10
004171c4 : CMP ECX,EDX
004171c6 : JGE 0x004171e1
004171c8 : MOV EDX,dword ptr [EBP + 0x14]
004171cb : MOV EAX,dword ptr [EBP + 0x8]
004171ce : PUSH EDX
004171cf : PUSH ESI
004171d0 : PUSH EBX
004171d1 : PUSH EAX
004171d2 : CALL 0x00417160
004171d7 : MOV ECX,dword ptr [EBP + 0xc]
004171da : MOV EDX,EDI
004171dc : MOV dword ptr [EBP + 0x8],EDX
004171df : JMP 0x004171f5
004171e1 : MOV ECX,dword ptr [EBP + 0x14]
004171e4 : PUSH ECX
004171e5 : PUSH ESI
004171e6 : PUSH EAX
004171e7 : PUSH EDI
004171e8 : CALL 0x00417160
004171ed : MOV EDX,dword ptr [EBP + 0x8]
004171f0 : MOV ECX,EBX
004171f2 : MOV dword ptr [EBP + 0xc],ECX
004171f5 : MOV EAX,ECX
004171f7 : SUB EAX,EDX
004171f9 : SAR EAX,0x2
004171fc : ADD ESP,0x10
004171ff : CMP EAX,0x20
00417202 : JG 0x00417182
00417208 : CMP EAX,0x1
0041720b : JLE 0x0041721b
0041720d : MOV EAX,dword ptr [EBP + 0x14]
00417210 : PUSH EAX
00417211 : PUSH ECX
00417212 : PUSH EDX
00417213 : CALL 0x00418060
00417218 : ADD ESP,0xc
0041721b : POP EDI
0041721c : POP ESI
0041721d : POP EBX
0041721e : MOV ESP,EBP
00417220 : POP EBP
00417221 : RET
00417222 : CMP EAX,0x20
00417225 : JLE 0x00417208
00417227 : MOV EAX,ECX
00417229 : SUB EAX,EDX
0041722b : AND EAX,0xfffffffc
0041722e : CMP EAX,0x4
00417231 : JLE 0x00417247
00417233 : MOV EAX,dword ptr [EBP + 0x14]
00417236 : PUSH EAX
00417237 : PUSH ECX
00417238 : PUSH EDX
00417239 : CALL 0x00417fb0
0041723e : MOV ECX,dword ptr [EBP + 0xc]
00417241 : MOV EDX,dword ptr [EBP + 0x8]
00417244 : ADD ESP,0xc
00417247 : MOV EAX,dword ptr [EBP + 0x14]
0041724a : PUSH EAX
0041724b : PUSH ECX
0041724c : PUSH EDX
0041724d : CALL 0x00418000
00417252 : ADD ESP,0xc
00417255 : POP EDI
00417256 : POP ESI
00417257 : POP EBX
00417258 : MOV ESP,EBP
0041725a : POP EBP
0041725b : RET
