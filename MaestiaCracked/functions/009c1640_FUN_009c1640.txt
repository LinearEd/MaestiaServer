PROGRAM  : Maestia.exe
FUNCTION : FUN_009c1640
ENTRY    : 009c1640
BODY     : [[009c1640, 009c185b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c1640(int param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  undefined4 uVar4;
  int in_ECX;
  undefined4 ****ppppuVar5;
  int in_EDX;
  uint local_38;
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b21e0f;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(int *)(param_1 + 0x5c) = in_ECX;
  if (30000 < in_EDX) {
    in_EDX = 0;
  }
  *(int *)(param_1 + 0x70) = in_EDX;
  uVar3 = *(int *)(param_1 + 0x88) + in_ECX;
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  uVar3 = ((int)uVar3 < 1) - 1 & uVar3;
  local_14 = uVar2;
  FUN_00406360(&DAT_00c90258,0);
  local_8 = 0;
  if (*(int *)(param_1 + 0x88) == 0) {
    if (0 < in_EDX) {
      uVar4 = FUN_00404750(L"%d<font face=\'$NormalFont\' color=\'#E5C173\'>(+%d)</font>",uVar3,
                           in_EDX);
      local_8._0_1_ = 4;
      FUN_00405eb0(uVar4,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_009c17d7;
    }
    if (in_EDX < 0) {
      uVar4 = FUN_00404750(L"%d<font face=\'$NormalFont\' color=\'#FF0000\'>(%d)</font>",uVar3,
                           in_EDX);
      local_8._0_1_ = 5;
    }
    else {
      uVar4 = FUN_00404750(&DAT_00c90550,uVar3,uVar2);
      local_8._0_1_ = 6;
    }
  }
  else {
    if (0 < in_EDX) {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font><font face=\'$NormalFont\' color=\'#E5C173\'> (+%d)</font>"
                           ,uVar3,in_EDX);
      local_8._0_1_ = 1;
      FUN_00405eb0(uVar4,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_009c17d7;
    }
    if (in_EDX < 0) {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font><font face=\'$NormalFont\' color=\'#FF0000\'> (%d)</font>"
                           ,uVar3,in_EDX);
      local_8._0_1_ = 2;
    }
    else {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font>",uVar3,uVar2);
      local_8._0_1_ = 3;
    }
  }
  FUN_00405eb0(uVar4,0,0xffffffff);
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_00406560();
LAB_009c17d7:
  iVar1 = *DAT_00da9894;
  if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
    ppppuVar5 = (undefined4 ****)local_2c[0];
    if (local_18 < 8) {
      ppppuVar5 = local_2c;
    }
    (**(code **)(**(int **)(iVar1 + 0x114) + 4))
              (*(int **)(iVar1 + 0x114),param_1 + 8,"%s,%ls","SetCharPowerPlus",ppppuVar5);
  }
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009c1640 : PUSH EBP
009c1641 : MOV EBP,ESP
009c1643 : PUSH -0x1
009c1645 : PUSH 0xb21e0f
009c164a : MOV EAX,FS:[0x0]
009c1650 : PUSH EAX
009c1651 : SUB ESP,0x40
009c1654 : MOV EAX,[0x00d66fa0]
009c1659 : XOR EAX,EBP
009c165b : MOV dword ptr [EBP + -0x10],EAX
009c165e : PUSH EBX
009c165f : PUSH ESI
009c1660 : PUSH EDI
009c1661 : PUSH EAX
009c1662 : LEA EAX,[EBP + -0xc]
009c1665 : MOV FS:[0x0],EAX
009c166b : MOV ESI,EDX
009c166d : MOV EAX,dword ptr [EBP + 0x8]
009c1670 : XOR EBX,EBX
009c1672 : MOV dword ptr [EAX + 0x5c],ECX
009c1675 : CMP ESI,0x7530
009c167b : CMOVG ESI,EBX
009c167e : MOV dword ptr [EBP + -0x30],EAX
009c1681 : MOV dword ptr [EAX + 0x70],ESI
009c1684 : MOV EAX,dword ptr [EAX + 0x88]
009c168a : ADD EAX,ECX
009c168c : XOR ECX,ECX
009c168e : CMP EAX,EBX
009c1690 : SETLE CL
009c1693 : PUSH EBX
009c1694 : XOR EDX,EDX
009c1696 : PUSH 0xc90258
009c169b : MOV dword ptr [EBP + -0x14],0x7
009c16a2 : MOV dword ptr [EBP + -0x18],EBX
009c16a5 : MOV word ptr [EBP + -0x28],DX
009c16a9 : DEC ECX
009c16aa : AND ECX,EAX
009c16ac : MOV EDI,ECX
009c16ae : LEA ECX,[EBP + -0x2c]
009c16b1 : CALL 0x00406360
009c16b6 : MOV dword ptr [EBP + -0x4],EBX
009c16b9 : MOV EAX,dword ptr [EBP + -0x30]
009c16bc : CMP dword ptr [EAX + 0x88],EBX
009c16c2 : JZ 0x009c1748
009c16c8 : CMP ESI,EBX
009c16ca : JLE 0x009c1714
009c16cc : PUSH ESI
009c16cd : PUSH EDI
009c16ce : PUSH 0xc90260
009c16d3 : LEA ESI,[EBP + -0x4c]
009c16d6 : CALL 0x00404750
009c16db : ADD ESP,0xc
009c16de : MOV byte ptr [EBP + -0x4],0x1
009c16e2 : PUSH -0x1
009c16e4 : PUSH EBX
009c16e5 : PUSH EAX
009c16e6 : LEA ECX,[EBP + -0x2c]
009c16e9 : CALL 0x00405eb0
009c16ee : MOV byte ptr [EBP + -0x4],BL
009c16f1 : CMP dword ptr [EBP + -0x34],0x8
009c16f5 : JC 0x009c16ff
009c16f7 : MOV ECX,dword ptr [EBP + -0x48]
009c16fa : CALL 0x006f04e0
009c16ff : XOR ECX,ECX
009c1701 : MOV dword ptr [EBP + -0x34],0x7
009c1708 : MOV dword ptr [EBP + -0x38],EBX
009c170b : MOV word ptr [EBP + -0x48],CX
009c170f : JMP 0x009c17d7
009c1714 : JGE 0x009c1731
009c1716 : PUSH ESI
009c1717 : PUSH EDI
009c1718 : PUSH 0xc90338
009c171d : LEA ESI,[EBP + -0x4c]
009c1720 : CALL 0x00404750
009c1725 : ADD ESP,0xc
009c1728 : MOV byte ptr [EBP + -0x4],0x2
009c172c : JMP 0x009c17c0
009c1731 : PUSH EDI
009c1732 : PUSH 0xc90408
009c1737 : LEA ESI,[EBP + -0x4c]
009c173a : CALL 0x00404750
009c173f : ADD ESP,0x8
009c1742 : MOV byte ptr [EBP + -0x4],0x3
009c1746 : JMP 0x009c17c0
009c1748 : CMP ESI,EBX
009c174a : JLE 0x009c1791
009c174c : PUSH ESI
009c174d : PUSH EDI
009c174e : PUSH 0xc90470
009c1753 : LEA ESI,[EBP + -0x4c]
009c1756 : CALL 0x00404750
009c175b : ADD ESP,0xc
009c175e : MOV byte ptr [EBP + -0x4],0x4
009c1762 : PUSH -0x1
009c1764 : PUSH EBX
009c1765 : PUSH EAX
009c1766 : LEA ECX,[EBP + -0x2c]
009c1769 : CALL 0x00405eb0
009c176e : MOV byte ptr [EBP + -0x4],BL
009c1771 : CMP dword ptr [EBP + -0x34],0x8
009c1775 : JC 0x009c177f
009c1777 : MOV ECX,dword ptr [EBP + -0x48]
009c177a : CALL 0x006f04e0
009c177f : XOR EDX,EDX
009c1781 : MOV dword ptr [EBP + -0x34],0x7
009c1788 : MOV dword ptr [EBP + -0x38],EBX
009c178b : MOV word ptr [EBP + -0x48],DX
009c178f : JMP 0x009c17d7
009c1791 : JGE 0x009c17ab
009c1793 : PUSH ESI
009c1794 : PUSH EDI
009c1795 : PUSH 0xc904e0
009c179a : LEA ESI,[EBP + -0x4c]
009c179d : CALL 0x00404750
009c17a2 : ADD ESP,0xc
009c17a5 : MOV byte ptr [EBP + -0x4],0x5
009c17a9 : JMP 0x009c17c0
009c17ab : PUSH EDI
009c17ac : PUSH 0xc90550
009c17b1 : LEA ESI,[EBP + -0x4c]
009c17b4 : CALL 0x00404750
009c17b9 : ADD ESP,0x8
009c17bc : MOV byte ptr [EBP + -0x4],0x6
009c17c0 : PUSH -0x1
009c17c2 : PUSH EBX
009c17c3 : PUSH EAX
009c17c4 : LEA ECX,[EBP + -0x2c]
009c17c7 : CALL 0x00405eb0
009c17cc : MOV byte ptr [EBP + -0x4],BL
009c17cf : LEA ECX,[EBP + -0x4c]
009c17d2 : CALL 0x00406560
009c17d7 : MOV EAX,[0x00da9894]
009c17dc : MOV EAX,dword ptr [EAX]
009c17de : CMP EAX,EBX
009c17e0 : JZ 0x009c1819
009c17e2 : CMP dword ptr [EAX + 0x114],EBX
009c17e8 : JZ 0x009c1819
009c17ea : CMP dword ptr [EBP + -0x14],0x8
009c17ee : MOV EAX,dword ptr [EAX + 0x114]
009c17f4 : MOV ECX,dword ptr [EBP + -0x28]
009c17f7 : JNC 0x009c17fc
009c17f9 : LEA ECX,[EBP + -0x28]
009c17fc : MOV EDX,dword ptr [EAX]
009c17fe : MOV EDX,dword ptr [EDX + 0x4]
009c1801 : PUSH ECX
009c1802 : MOV ECX,dword ptr [EBP + -0x30]
009c1805 : PUSH 0xc90558
009c180a : PUSH 0xc9056c
009c180f : ADD ECX,0x8
009c1812 : PUSH ECX
009c1813 : PUSH EAX
009c1814 : CALL EDX
009c1816 : ADD ESP,0x14
009c1819 : MOV dword ptr [EBP + -0x4],0xffffffff
009c1820 : CMP dword ptr [EBP + -0x14],0x8
009c1824 : JC 0x009c182e
009c1826 : MOV ECX,dword ptr [EBP + -0x28]
009c1829 : CALL 0x006f04e0
009c182e : XOR EAX,EAX
009c1830 : MOV dword ptr [EBP + -0x14],0x7
009c1837 : MOV dword ptr [EBP + -0x18],EBX
009c183a : MOV word ptr [EBP + -0x28],AX
009c183e : MOV ECX,dword ptr [EBP + -0xc]
009c1841 : MOV dword ptr FS:[0x0],ECX
009c1848 : POP ECX
009c1849 : POP EDI
009c184a : POP ESI
009c184b : POP EBX
009c184c : MOV ECX,dword ptr [EBP + -0x10]
009c184f : XOR ECX,EBP
009c1851 : CALL 0x00633e6b
009c1856 : MOV ESP,EBP
009c1858 : POP EBP
009c1859 : RET 0x4
