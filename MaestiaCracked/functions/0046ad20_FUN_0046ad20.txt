PROGRAM  : Maestia.exe
FUNCTION : FUN_0046ad20
ENTRY    : 0046ad20
BODY     : [[0046ad20, 0046ae5f]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_0046ad20(undefined4 param_1)

{
  void *pvVar1;
  char cVar2;
  byte bVar3;
  byte bVar4;
  undefined4 uVar5;
  int in_ECX;
  undefined1 local_2c [4];
  undefined4 local_28;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  pvVar1 = ExceptionList;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b8282a;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (((*(int *)(in_ECX + 0x10e4) != -1) || (*(int *)(in_ECX + 0x10e8) != -1)) ||
     (*(int *)(in_ECX + 0x10f0) == 0)) {
    FUN_00807d70("CTreeRI::InitBillboardSystem, function already called for this object",
                 DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    ExceptionList = local_10;
    return 0;
  }
  *(uint *)(in_ECX + 0x10e4) = -(uint)(*(char *)(in_ECX + 0x1f8) != '\0') & 0x28;
  *(undefined4 *)(in_ECX + 0x10e8) = param_1;
  *(undefined1 *)(in_ECX + 0x10ec) = 0;
  if (*(char *)(in_ECX + 0x1f8) == '\0') {
    ExceptionList = pvVar1;
    return 1;
  }
  cVar2 = FUN_00471510();
  if (cVar2 != '\0') {
    uVar5 = FUN_0046bf30();
    FUN_00473220(local_2c,uVar5,"InitBillboardSystem, vertices");
    local_8 = 0;
    bVar3 = FUN_00472820(local_28,uVar5);
    bVar4 = FUN_004728f0();
    local_8 = 0xffffffff;
    FUN_00473480(local_2c);
    ExceptionList = local_10;
    return bVar3 & 1 & bVar4;
  }
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
0046ad20 : PUSH EBP
0046ad21 : MOV EBP,ESP
0046ad23 : PUSH -0x1
0046ad25 : PUSH 0xb8282a
0046ad2a : MOV EAX,FS:[0x0]
0046ad30 : PUSH EAX
0046ad31 : SUB ESP,0x20
0046ad34 : PUSH EBX
0046ad35 : PUSH ESI
0046ad36 : PUSH EDI
0046ad37 : MOV EAX,[0x00d66fa0]
0046ad3c : XOR EAX,EBP
0046ad3e : PUSH EAX
0046ad3f : LEA EAX,[EBP + -0xc]
0046ad42 : MOV FS:[0x0],EAX
0046ad48 : MOV EDI,ECX
0046ad4a : OR EAX,0xffffffff
0046ad4d : XOR EBX,EBX
0046ad4f : MOV CL,0x1
0046ad51 : CMP dword ptr [EDI + 0x10e4],EAX
0046ad57 : JNZ 0x0046ae11
0046ad5d : CMP dword ptr [EDI + 0x10e8],EAX
0046ad63 : JNZ 0x0046ae11
0046ad69 : CMP dword ptr [EDI + 0x10f0],EBX
0046ad6f : JZ 0x0046ae11
0046ad75 : MOV AL,byte ptr [EDI + 0x1f8]
0046ad7b : MOVZX EDX,AL
0046ad7e : NEG EDX
0046ad80 : SBB EDX,EDX
0046ad82 : AND EDX,0x28
0046ad85 : MOV dword ptr [EDI + 0x10e4],EDX
0046ad8b : MOV EDX,dword ptr [EBP + 0x8]
0046ad8e : MOV dword ptr [EDI + 0x10e8],EDX
0046ad94 : MOV byte ptr [EDI + 0x10ec],BL
0046ad9a : CMP AL,BL
0046ad9c : JZ 0x0046ae4a
0046ada2 : LEA ESI,[EDI + 0x107c]
0046ada8 : MOV ECX,0xc18850
0046adad : MOV EAX,ESI
0046adaf : CALL 0x00471510
0046adb4 : TEST AL,AL
0046adb6 : JZ 0x0046ae34
0046adb8 : MOV EAX,EDI
0046adba : CALL 0x0046bf30
0046adbf : MOV EDI,EAX
0046adc1 : PUSH 0xcd580c
0046adc6 : PUSH EDI
0046adc7 : LEA EAX,[EBP + -0x28]
0046adca : PUSH EAX
0046adcb : CALL 0x00473220
0046add0 : MOV dword ptr [EBP + -0x4],EBX
0046add3 : MOV ECX,dword ptr [EBP + -0x24]
0046add6 : PUSH EDI
0046add7 : PUSH ECX
0046add8 : MOV EDI,ESI
0046adda : CALL 0x00472820
0046addf : MOV BL,AL
0046ade1 : AND BL,0x1
0046ade4 : CALL 0x004728f0
0046ade9 : AND BL,AL
0046adeb : MOV dword ptr [EBP + -0x4],0xffffffff
0046adf2 : LEA EDX,[EBP + -0x28]
0046adf5 : PUSH EDX
0046adf6 : CALL 0x00473480
0046adfb : MOV AL,BL
0046adfd : MOV ECX,dword ptr [EBP + -0xc]
0046ae00 : MOV dword ptr FS:[0x0],ECX
0046ae07 : POP ECX
0046ae08 : POP EDI
0046ae09 : POP ESI
0046ae0a : POP EBX
0046ae0b : MOV ESP,EBP
0046ae0d : POP EBP
0046ae0e : RET 0x4
0046ae11 : PUSH 0xcd5830
0046ae16 : CALL 0x00807d70
0046ae1b : ADD ESP,0x4
0046ae1e : XOR AL,AL
0046ae20 : MOV ECX,dword ptr [EBP + -0xc]
0046ae23 : MOV dword ptr FS:[0x0],ECX
0046ae2a : POP ECX
0046ae2b : POP EDI
0046ae2c : POP ESI
0046ae2d : POP EBX
0046ae2e : MOV ESP,EBP
0046ae30 : POP EBP
0046ae31 : RET 0x4
0046ae34 : MOV AL,0x1
0046ae36 : MOV ECX,dword ptr [EBP + -0xc]
0046ae39 : MOV dword ptr FS:[0x0],ECX
0046ae40 : POP ECX
0046ae41 : POP EDI
0046ae42 : POP ESI
0046ae43 : POP EBX
0046ae44 : MOV ESP,EBP
0046ae46 : POP EBP
0046ae47 : RET 0x4
0046ae4a : MOV AL,CL
0046ae4c : MOV ECX,dword ptr [EBP + -0xc]
0046ae4f : MOV dword ptr FS:[0x0],ECX
0046ae56 : POP ECX
0046ae57 : POP EDI
0046ae58 : POP ESI
0046ae59 : POP EBX
0046ae5a : MOV ESP,EBP
0046ae5c : POP EBP
0046ae5d : RET 0x4
