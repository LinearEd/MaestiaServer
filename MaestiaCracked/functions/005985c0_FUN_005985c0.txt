PROGRAM  : Maestia.exe
FUNCTION : FUN_005985c0
ENTRY    : 005985c0
BODY     : [[005985c0, 005986e5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005985c0(undefined4 param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *in_ECX;
  int iVar5;
  int local_1c;
  int local_18;
  undefined4 local_14;
  undefined1 auStack_10 [4];
  int iStack_c;
  
  iVar5 = 0;
  local_1c = 0;
  local_18 = 0;
  local_14 = 0;
  iVar3 = local_1c;
  if (*in_ECX != 0) {
    (**(code **)(**(int **)(*in_ECX + 0x68) + 0x5c))();
    iVar3 = FUN_00525530(param_1);
    *(int *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1;
    auStack_10[0] = 5;
    *(int *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1;
    iStack_c = iVar3;
    FUN_005034e0(&local_1c,1);
    iVar5 = local_18;
    if (local_18 * 0x10 + -0x10 + local_1c != 0) {
      FUN_005266c0(auStack_10);
    }
    FUN_00526bc0();
    iVar4 = FUN_00571c40(4);
    iVar2 = *(int *)(*in_ECX + 0x68);
    *(undefined4 *)(iVar4 + 4) = 4;
    if (iVar2 != 0) {
      *(int *)(iVar2 + 4) = *(int *)(iVar2 + 4) + 1;
      iVar5 = local_18;
    }
    if (*(GRefCountNTSImpl **)(iVar4 + 8) != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar4 + 8));
    }
    *(int *)(iVar4 + 8) = iVar2;
    if (*(GRefCountNTSImpl **)(iVar4 + 0xc) != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar4 + 0xc));
    }
    *(undefined4 *)(iVar4 + 0xc) = 0;
    *(code **)(iVar4 + 0x2c) = FUN_00597150;
    FUN_00504fd0(&local_1c);
    piVar1 = (int *)(iVar3 + 8);
    *piVar1 = *piVar1 + -1;
    iVar3 = local_1c;
    if (*piVar1 == 0) {
      FUN_00525340();
      iVar3 = local_1c;
    }
  }
  for (; iVar2 = local_1c, local_1c = iVar3, iVar5 != 0; iVar5 = iVar5 + -1) {
    FUN_00526bc0();
    iVar3 = local_1c;
    local_1c = iVar2;
  }
  FUN_00515cf0(iVar2);
  return;
}



============================================================
DISASSEMBLY
============================================================
005985c0 : SUB ESP,0x1c
005985c3 : PUSH EBX
005985c4 : PUSH EBP
005985c5 : PUSH ESI
005985c6 : MOV EBX,ECX
005985c8 : MOV EAX,dword ptr [EBX]
005985ca : PUSH EDI
005985cb : XOR EDI,EDI
005985cd : XOR EBP,EBP
005985cf : MOV dword ptr [ESP + 0x10],EDI
005985d3 : MOV dword ptr [ESP + 0x14],EBP
005985d7 : MOV dword ptr [ESP + 0x18],EDI
005985db : CMP EAX,EDI
005985dd : JZ 0x005986b6
005985e3 : MOV ECX,dword ptr [EAX + 0x68]
005985e6 : MOV EAX,dword ptr [ECX]
005985e8 : MOV EDX,dword ptr [EAX + 0x5c]
005985eb : CALL EDX
005985ed : MOV ECX,dword ptr [ESP + 0x30]
005985f1 : MOV EAX,dword ptr [EAX + 0x78]
005985f4 : PUSH ECX
005985f5 : LEA ECX,[EAX + 0x254]
005985fb : CALL 0x00525530
00598600 : MOV ESI,EAX
00598602 : MOV EAX,0x1
00598607 : ADD dword ptr [ESI + 0x8],EAX
0059860a : LEA EDX,[ESP + 0x10]
0059860e : PUSH EAX
0059860f : MOV byte ptr [ESP + 0x20],0x5
00598614 : MOV dword ptr [ESP + 0x24],ESI
00598618 : ADD dword ptr [ESI + 0x8],EAX
0059861b : PUSH EDX
0059861c : MOV ECX,EDX
0059861e : CALL 0x005034e0
00598623 : MOV EBP,dword ptr [ESP + 0x14]
00598627 : MOV ECX,dword ptr [ESP + 0x10]
0059862b : MOV EAX,EBP
0059862d : SHL EAX,0x4
00598630 : LEA ECX,[EAX + ECX*0x1 + -0x10]
00598634 : CMP ECX,EDI
00598636 : JZ 0x00598642
00598638 : LEA EDX,[ESP + 0x1c]
0059863c : PUSH EDX
0059863d : CALL 0x005266c0
00598642 : LEA ECX,[ESP + 0x1c]
00598646 : CALL 0x00526bc0
0059864b : MOV EAX,dword ptr [EBX]
0059864d : PUSH 0x4
0059864f : LEA ECX,[EAX + 0xa2c]
00598655 : CALL 0x00571c40
0059865a : MOV EDI,EAX
0059865c : MOV EAX,dword ptr [EBX]
0059865e : MOV EBX,dword ptr [EAX + 0x68]
00598661 : MOV dword ptr [EDI + 0x4],0x4
00598668 : TEST EBX,EBX
0059866a : JZ 0x00598673
0059866c : INC dword ptr [EBX + 0x4]
0059866f : MOV EBP,dword ptr [ESP + 0x14]
00598673 : MOV ECX,dword ptr [EDI + 0x8]
00598676 : TEST ECX,ECX
00598678 : JZ 0x0059867f
0059867a : CALL 0x004ff7c0
0059867f : MOV dword ptr [EDI + 0x8],EBX
00598682 : MOV ECX,dword ptr [EDI + 0xc]
00598685 : TEST ECX,ECX
00598687 : JZ 0x0059868e
00598689 : CALL 0x004ff7c0
0059868e : LEA ECX,[ESP + 0x10]
00598692 : PUSH ECX
00598693 : MOV dword ptr [EDI + 0xc],0x0
0059869a : LEA ECX,[EDI + 0x30]
0059869d : MOV dword ptr [EDI + 0x2c],0x597150
005986a4 : CALL 0x00504fd0
005986a9 : ADD dword ptr [ESI + 0x8],-0x1
005986ad : JNZ 0x005986b6
005986af : MOV ECX,ESI
005986b1 : CALL 0x00525340
005986b6 : MOV EDI,dword ptr [ESP + 0x10]
005986ba : MOV EDX,EBP
005986bc : SHL EDX,0x4
005986bf : LEA ESI,[EDX + EDI*0x1 + -0x10]
005986c3 : TEST EBP,EBP
005986c5 : JBE 0x005986d6
005986c7 : MOV ECX,ESI
005986c9 : CALL 0x00526bc0
005986ce : SUB ESI,0x10
005986d1 : SUB EBP,0x1
005986d4 : JNZ 0x005986c7
005986d6 : PUSH EDI
005986d7 : CALL 0x00515cf0
005986dc : POP EDI
005986dd : POP ESI
005986de : POP EBP
005986df : POP EBX
005986e0 : ADD ESP,0x1c
005986e3 : RET 0x4
