PROGRAM  : Maestia.exe
FUNCTION : FUN_00a1e370
ENTRY    : 00a1e370
BODY     : [[00a1e370, 00a1e4a6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a1e370(int param_1)

{
  int *piVar1;
  int iVar2;
  char cVar3;
  DWORD DVar4;
  int iVar5;
  uint uVar6;
  code *pcVar7;
  undefined1 local_c [4];
  int local_8;
  
  pcVar7 = timeGetTime_exref;
  if (*(int *)(param_1 + 0x94) != 0) {
    DVar4 = timeGetTime();
    uVar6 = (*(int *)(param_1 + 0x430) - *(int *)(param_1 + 0x434)) + DVar4;
    local_8 = **(int **)(param_1 + 0x90);
    if ((int *)local_8 != *(int **)(param_1 + 0x90)) {
      do {
        iVar2 = local_8;
        if (**(int **)(local_8 + 0x10) == 2) {
          uVar6 = (*pcVar7)();
        }
        piVar1 = *(int **)(iVar2 + 0x10);
        iVar5 = *piVar1;
        if ((iVar5 == 0) || (uVar6 < (uint)piVar1[1])) {
          FUN_00416210();
        }
        else if (iVar5 == 1) {
          if (piVar1[4] != 0) {
            (**(code **)(*(int *)piVar1[4] + 0x28))();
          }
          iVar5 = (*pcVar7)();
          *(int *)(*(int *)(iVar2 + 0x10) + 4) = iVar5 + 1000;
          **(undefined4 **)(iVar2 + 0x10) = 2;
          FUN_00416210();
        }
        else if (((iVar5 == 2) && ((int *)piVar1[4] != (int *)0x0)) &&
                (cVar3 = (**(code **)(*(int *)piVar1[4] + 0x30))(), cVar3 != '\0')) {
          if (*(int *)(*(int *)(iVar2 + 0x10) + 0x10) != 0) {
            (**(code **)(**(int **)(*(int *)(iVar2 + 0x10) + 0x10) + 0x20))();
          }
          iVar5 = (*pcVar7)();
          *(int *)(*(int *)(iVar2 + 0x10) + 4) = iVar5 + 1000;
          FUN_00416210();
        }
        else {
          iVar5 = *(int *)(iVar2 + 0x10);
          local_8 = FUN_0042b2c0(param_1 + 0x8c,local_c,iVar2);
          local_8 = *(int *)local_8;
          pcVar7 = timeGetTime_exref;
          if (iVar5 != 0) {
            FUN_00a1b560();
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
        }
      } while (local_8 != *(int *)(param_1 + 0x90));
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a1e370 : PUSH EBP
00a1e371 : MOV EBP,ESP
00a1e373 : SUB ESP,0x8
00a1e376 : PUSH EBX
00a1e377 : PUSH ESI
00a1e378 : PUSH EDI
00a1e379 : MOV EDI,dword ptr [EBP + 0x8]
00a1e37c : CMP dword ptr [EDI + 0x94],0x0
00a1e383 : JZ 0x00a1e49e
00a1e389 : MOV ESI,dword ptr [0x00b85598]
00a1e38f : CALL ESI
00a1e391 : MOV EBX,dword ptr [EDI + 0x430]
00a1e397 : SUB EBX,dword ptr [EDI + 0x434]
00a1e39d : ADD EBX,EAX
00a1e39f : MOV EAX,dword ptr [EDI + 0x90]
00a1e3a5 : MOV EDI,dword ptr [EAX]
00a1e3a7 : MOV dword ptr [EBP + -0x4],EDI
00a1e3aa : CMP EDI,EAX
00a1e3ac : JZ 0x00a1e49e
00a1e3b2 : MOV EAX,dword ptr [EDI + 0x10]
00a1e3b5 : CMP dword ptr [EAX],0x2
00a1e3b8 : JNZ 0x00a1e3be
00a1e3ba : CALL ESI
00a1e3bc : MOV EBX,EAX
00a1e3be : MOV EAX,dword ptr [EDI + 0x10]
00a1e3c1 : MOV ECX,dword ptr [EAX]
00a1e3c3 : TEST ECX,ECX
00a1e3c5 : JNZ 0x00a1e3d7
00a1e3c7 : LEA EDX,[EBP + -0x4]
00a1e3ca : CALL 0x00416210
00a1e3cf : MOV EDI,dword ptr [EBP + -0x4]
00a1e3d2 : JMP 0x00a1e48f
00a1e3d7 : CMP EBX,dword ptr [EAX + 0x4]
00a1e3da : JC 0x00a1e3c7
00a1e3dc : CMP ECX,0x1
00a1e3df : JNZ 0x00a1e416
00a1e3e1 : CMP dword ptr [EAX + 0x10],0x0
00a1e3e5 : JZ 0x00a1e3f3
00a1e3e7 : MOV EAX,dword ptr [EAX + 0x10]
00a1e3ea : MOV EDX,dword ptr [EAX]
00a1e3ec : MOV ECX,EAX
00a1e3ee : MOV EAX,dword ptr [EDX + 0x28]
00a1e3f1 : CALL EAX
00a1e3f3 : CALL ESI
00a1e3f5 : MOV ECX,dword ptr [EDI + 0x10]
00a1e3f8 : ADD EAX,0x3e8
00a1e3fd : MOV dword ptr [ECX + 0x4],EAX
00a1e400 : MOV EDX,dword ptr [EDI + 0x10]
00a1e403 : MOV dword ptr [EDX],0x2
00a1e409 : LEA EDX,[EBP + -0x4]
00a1e40c : CALL 0x00416210
00a1e411 : MOV EDI,dword ptr [EBP + -0x4]
00a1e414 : JMP 0x00a1e48f
00a1e416 : CMP ECX,0x2
00a1e419 : JNZ 0x00a1e45e
00a1e41b : MOV EAX,dword ptr [EAX + 0x10]
00a1e41e : TEST EAX,EAX
00a1e420 : JZ 0x00a1e45e
00a1e422 : MOV EDX,dword ptr [EAX]
00a1e424 : MOV ECX,EAX
00a1e426 : MOV EAX,dword ptr [EDX + 0x30]
00a1e429 : CALL EAX
00a1e42b : TEST AL,AL
00a1e42d : JZ 0x00a1e45e
00a1e42f : MOV EAX,dword ptr [EDI + 0x10]
00a1e432 : CMP dword ptr [EAX + 0x10],0x0
00a1e436 : JZ 0x00a1e444
00a1e438 : MOV EAX,dword ptr [EAX + 0x10]
00a1e43b : MOV EDX,dword ptr [EAX]
00a1e43d : MOV ECX,EAX
00a1e43f : MOV EAX,dword ptr [EDX + 0x20]
00a1e442 : CALL EAX
00a1e444 : CALL ESI
00a1e446 : MOV ECX,dword ptr [EDI + 0x10]
00a1e449 : ADD EAX,0x3e8
00a1e44e : LEA EDX,[EBP + -0x4]
00a1e451 : MOV dword ptr [ECX + 0x4],EAX
00a1e454 : CALL 0x00416210
00a1e459 : MOV EDI,dword ptr [EBP + -0x4]
00a1e45c : JMP 0x00a1e48f
00a1e45e : MOV EAX,dword ptr [EBP + 0x8]
00a1e461 : MOV ESI,dword ptr [EDI + 0x10]
00a1e464 : PUSH EDI
00a1e465 : LEA EDX,[EBP + -0x8]
00a1e468 : PUSH EDX
00a1e469 : ADD EAX,0x8c
00a1e46e : PUSH EAX
00a1e46f : CALL 0x0042b2c0
00a1e474 : MOV EDI,dword ptr [EAX]
00a1e476 : MOV dword ptr [EBP + -0x4],EDI
00a1e479 : TEST ESI,ESI
00a1e47b : JZ 0x00a1e489
00a1e47d : CALL 0x00a1b560
00a1e482 : MOV ECX,ESI
00a1e484 : CALL 0x006f04e0
00a1e489 : MOV ESI,dword ptr [0x00b85598]
00a1e48f : MOV ECX,dword ptr [EBP + 0x8]
00a1e492 : CMP EDI,dword ptr [ECX + 0x90]
00a1e498 : JNZ 0x00a1e3b2
00a1e49e : POP EDI
00a1e49f : POP ESI
00a1e4a0 : POP EBX
00a1e4a1 : MOV ESP,EBP
00a1e4a3 : POP EBP
00a1e4a4 : RET 0x4
