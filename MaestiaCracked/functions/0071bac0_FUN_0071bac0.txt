PROGRAM  : Maestia.exe
FUNCTION : FUN_0071bac0
ENTRY    : 0071bac0
BODY     : [[0071bac0, 0071be2e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0071bac0(int param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  undefined4 uVar5;
  int *piVar6;
  int iVar7;
  int in_ECX;
  uint uVar8;
  undefined4 *puVar9;
  int unaff_EDI;
  int **ppiVar10;
  int iVar11;
  int *apiStack_c0 [9];
  int iStack_9c;
  int *piStack_98;
  undefined4 uStack_94;
  uint uStack_90;
  int *piStack_8c;
  undefined4 uStack_88;
  uint uStack_84;
  uint uVar12;
  uint uStack_74;
  
  uStack_84 = 0x71bade;
  iVar7 = (**(code **)(**(int **)(param_1 + 4) + 0xb4))();
  piStack_8c = *(int **)(in_ECX + 4);
  if (iVar7 != 0) {
    iVar11 = *(int *)(iVar7 + 0x54);
    uStack_84 = (uint)(*(char *)(iVar7 + 0x42) != '\0');
    uStack_88 = 0xe;
    uStack_90 = 0x71bb0f;
    (**(code **)(*piStack_8c + 0xe4))();
    if ((*(int *)(in_ECX + 0x30) != iVar11) || (*(int *)(in_ECX + 0x2c) != unaff_EDI)) {
      piStack_98 = *(int **)(in_ECX + 4);
      uStack_94 = 0x13;
      iStack_9c = 0x71bb32;
      (**(code **)(*piStack_98 + 0xe4))();
      apiStack_c0[7] = *(int **)(in_ECX + 4);
      apiStack_c0[8] = (int *)0x14;
      apiStack_c0[6] = (int *)0x71bb43;
      iStack_9c = iVar11;
      (**(code **)(*apiStack_c0[7] + 0xe4))();
      *(int *)(in_ECX + 0x2c) = unaff_EDI;
      *(int *)(in_ECX + 0x30) = iVar11;
    }
    fVar1 = *(float *)(iVar7 + 0x2c);
    fVar2 = *(float *)(iVar7 + 0x30);
    fVar3 = *(float *)(iVar7 + 0x34);
    fVar4 = *(float *)(iVar7 + 0x3c);
    if (fVar1 < 1.0) {
      if (0.0 < fVar1) {
        uStack_74 = (uint)(longlong)ROUND(fVar1 * 255.0 + DAT_00d72c24);
        uVar8 = uStack_74;
      }
      else {
        uVar8 = 0;
      }
    }
    else {
      uVar8 = 0xff;
    }
    if (fVar2 < 1.0) {
      if (0.0 < fVar2) {
        uStack_74 = (uint)(longlong)ROUND(fVar2 * 255.0 + DAT_00d72c24);
        uVar12 = uStack_74;
      }
      else {
        uVar12 = 0;
      }
    }
    else {
      uVar12 = 0xff;
    }
    if (fVar3 < 1.0) {
      if (0.0 < fVar3) {
        uStack_74 = (uint)(longlong)ROUND(fVar3 * 255.0 + DAT_00d72c24);
        uStack_90 = uStack_74;
      }
      else {
        uStack_90 = 0;
      }
    }
    else {
      uStack_90 = 0xff;
    }
    if (fVar4 < 1.0) {
      if (0.0 < fVar4) {
        uStack_74 = (uint)(longlong)ROUND(DAT_00d72c24 + fVar4 * 255.0);
      }
      else {
        uStack_74 = 0;
      }
    }
    else {
      uStack_74 = 0xff;
    }
    piStack_98 = *(int **)(in_ECX + 4);
    uStack_90 = ((uStack_74 << 8 | uVar8) << 8 | uVar12) << 8 | uStack_90;
    uStack_94 = 0x3c;
    iStack_9c = 0x71bcc9;
    (**(code **)(*piStack_98 + 0xe4))();
    iStack_9c = *(undefined4 *)(iVar7 + 0x58);
    apiStack_c0[6] = *(int **)(in_ECX + 4);
    apiStack_c0[8] = (int *)0x1;
    apiStack_c0[7] = (int *)0x0;
    apiStack_c0[5] = (int *)0x71bcdf;
    (**(code **)(*apiStack_c0[6] + 0x10c))();
    apiStack_c0[2] = *(int **)(in_ECX + 4);
    apiStack_c0[5] = (int *)0x2;
    apiStack_c0[4] = (int *)0x2;
    apiStack_c0[3] = (int *)0x0;
    apiStack_c0[1] = (int *)0x71bcf3;
    (**(code **)(*apiStack_c0[2] + 0x10c))();
    apiStack_c0[1] = (int *)0x3;
    apiStack_c0[0] = (int *)0x3;
    (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0);
    iVar11 = 0;
    (**(code **)(**(int **)(in_ECX + 4) + 0x10c))
              (*(int **)(in_ECX + 4),0,4,*(undefined4 *)(iVar7 + 0x5c));
    (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0,5,2);
    (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0,6,3);
    uVar5 = *(undefined4 *)(iVar11 + 0x60);
    piVar6 = *(int **)(in_ECX + 4);
    puVar9 = &DAT_00d72178;
    ppiVar10 = apiStack_c0;
    for (iVar7 = 0x10; iVar7 != 0; iVar7 = iVar7 + -1) {
      *ppiVar10 = (int *)*puVar9;
      puVar9 = puVar9 + 1;
      ppiVar10 = ppiVar10 + 1;
    }
    iStack_9c = *(undefined4 *)(iVar11 + 100);
    apiStack_c0[8] = (int *)uVar5;
    (**(code **)(*piVar6 + 0xb0))(piVar6,0x10,apiStack_c0);
    return;
  }
  uStack_84 = 2;
  uStack_88 = 0x13;
  uStack_90 = 0x71bd9c;
  (**(code **)(*piStack_8c + 0xe4))();
  piStack_98 = *(int **)(in_ECX + 4);
  uStack_90 = 2;
  uStack_94 = 0x14;
  iStack_9c = 0x71bdae;
  (**(code **)(*piStack_98 + 0xe4))();
  apiStack_c0[6] = *(int **)(in_ECX + 4);
  iStack_9c = 2;
  apiStack_c0[8] = (int *)0x1;
  apiStack_c0[7] = (int *)0x0;
  apiStack_c0[5] = (int *)0x71bdc2;
  (**(code **)(*apiStack_c0[6] + 0x10c))();
  apiStack_c0[2] = *(int **)(in_ECX + 4);
  apiStack_c0[5] = (int *)0x2;
  apiStack_c0[4] = (int *)0x2;
  apiStack_c0[3] = (int *)0x0;
  apiStack_c0[1] = (int *)0x71bdd6;
  (**(code **)(*apiStack_c0[2] + 0x10c))();
  apiStack_c0[1] = (int *)0x0;
  apiStack_c0[0] = (int *)0x3;
  (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0);
  (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0,4,4);
  (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0,5,2);
  (**(code **)(**(int **)(in_ECX + 4) + 0x10c))(*(int **)(in_ECX + 4),0,6,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
0071bac0 : PUSH EBP
0071bac1 : MOV EBP,ESP
0071bac3 : AND ESP,0xfffffff8
0071bac6 : SUB ESP,0x6c
0071bac9 : MOV EAX,dword ptr [EBP + 0x8]
0071bacc : PUSH EBX
0071bacd : MOV EBX,ECX
0071bacf : MOV ECX,dword ptr [EAX + 0x4]
0071bad2 : MOV EDX,dword ptr [ECX]
0071bad4 : MOV EAX,dword ptr [EDX + 0xb4]
0071bada : PUSH ESI
0071badb : PUSH EDI
0071badc : CALL EAX
0071bade : MOV ESI,EAX
0071bae0 : MOV EAX,dword ptr [EBX + 0x4]
0071bae3 : MOV dword ptr [ESP + 0x24],ESI
0071bae7 : TEST ESI,ESI
0071bae9 : JZ 0x0071bd8d
0071baef : MOV ECX,dword ptr [ESI + 0x50]
0071baf2 : MOV EDX,dword ptr [EAX]
0071baf4 : MOV EDX,dword ptr [EDX + 0xe4]
0071bafa : MOV EDI,dword ptr [ESI + 0x54]
0071bafd : MOV dword ptr [ESP + 0xc],ECX
0071bb01 : XOR ECX,ECX
0071bb03 : CMP byte ptr [ESI + 0x42],CL
0071bb06 : SETNZ CL
0071bb09 : PUSH ECX
0071bb0a : PUSH 0xe
0071bb0c : PUSH EAX
0071bb0d : CALL EDX
0071bb0f : CMP dword ptr [EBX + 0x30],EDI
0071bb12 : JNZ 0x0071bb1d
0071bb14 : MOV EAX,dword ptr [EBX + 0x2c]
0071bb17 : CMP EAX,dword ptr [ESP + 0xc]
0071bb1b : JZ 0x0071bb4d
0071bb1d : MOV EDX,dword ptr [ESP + 0xc]
0071bb21 : MOV EAX,dword ptr [EBX + 0x4]
0071bb24 : MOV ECX,dword ptr [EAX]
0071bb26 : PUSH EDX
0071bb27 : PUSH 0x13
0071bb29 : PUSH EAX
0071bb2a : MOV EAX,dword ptr [ECX + 0xe4]
0071bb30 : CALL EAX
0071bb32 : MOV EAX,dword ptr [EBX + 0x4]
0071bb35 : MOV ECX,dword ptr [EAX]
0071bb37 : MOV EDX,dword ptr [ECX + 0xe4]
0071bb3d : PUSH EDI
0071bb3e : PUSH 0x14
0071bb40 : PUSH EAX
0071bb41 : CALL EDX
0071bb43 : MOV EAX,dword ptr [ESP + 0xc]
0071bb47 : MOV dword ptr [EBX + 0x2c],EAX
0071bb4a : MOV dword ptr [EBX + 0x30],EDI
0071bb4d : MOVSS XMM0,dword ptr [ESI + 0x2c]
0071bb52 : FLD float ptr [0x00cdf130]
0071bb58 : MOVSS XMM2,dword ptr [0x00c10fc4]
0071bb60 : FLD float ptr [0x00d72c24]
0071bb66 : COMISS XMM0,XMM2
0071bb69 : MOVSS XMM1,dword ptr [ESI + 0x30]
0071bb6e : MOVSS XMM3,dword ptr [ESI + 0x34]
0071bb73 : MOVSS XMM4,dword ptr [ESI + 0x3c]
0071bb78 : XORPS XMM5,XMM5
0071bb7b : MOVSS dword ptr [ESP + 0x28],XMM0
0071bb81 : MOVSS dword ptr [ESP + 0x2c],XMM1
0071bb87 : MOVSS dword ptr [ESP + 0x30],XMM3
0071bb8d : MOVSS dword ptr [ESP + 0x34],XMM4
0071bb93 : MOV ECX,0xff
0071bb98 : JC 0x0071bb9e
0071bb9a : MOV EDX,ECX
0071bb9c : JMP 0x0071bbd1
0071bb9e : COMISS XMM5,XMM0
0071bba1 : JC 0x0071bba7
0071bba3 : XOR EDX,EDX
0071bba5 : JMP 0x0071bbd1
0071bba7 : FLD float ptr [ESP + 0x28]
0071bbab : FNSTCW word ptr [ESP + 0xc]
0071bbaf : MOVZX EAX,word ptr [ESP + 0xc]
0071bbb4 : FMUL ST2
0071bbb6 : OR EAX,0xc00
0071bbbb : MOV dword ptr [ESP + 0x14],EAX
0071bbbf : FADD ST0,ST1
0071bbc1 : FLDCW word ptr [ESP + 0x14]
0071bbc5 : FISTP qword ptr [ESP + 0x18]
0071bbc9 : MOV EDX,dword ptr [ESP + 0x18]
0071bbcd : FLDCW word ptr [ESP + 0xc]
0071bbd1 : COMISS XMM1,XMM2
0071bbd4 : JC 0x0071bbdc
0071bbd6 : MOV dword ptr [ESP + 0x10],ECX
0071bbda : JMP 0x0071bc19
0071bbdc : COMISS XMM5,XMM1
0071bbdf : JC 0x0071bbeb
0071bbe1 : MOV dword ptr [ESP + 0x10],0x0
0071bbe9 : JMP 0x0071bc19
0071bbeb : FLD float ptr [ESP + 0x2c]
0071bbef : FNSTCW word ptr [ESP + 0xc]
0071bbf3 : MOVZX EAX,word ptr [ESP + 0xc]
0071bbf8 : FMUL ST2
0071bbfa : OR EAX,0xc00
0071bbff : MOV dword ptr [ESP + 0x14],EAX
0071bc03 : FADD ST0,ST1
0071bc05 : FLDCW word ptr [ESP + 0x14]
0071bc09 : FISTP qword ptr [ESP + 0x18]
0071bc0d : MOV EAX,dword ptr [ESP + 0x18]
0071bc11 : MOV dword ptr [ESP + 0x10],EAX
0071bc15 : FLDCW word ptr [ESP + 0xc]
0071bc19 : COMISS XMM3,XMM2
0071bc1c : JC 0x0071bc24
0071bc1e : MOV dword ptr [ESP + 0x14],ECX
0071bc22 : JMP 0x0071bc61
0071bc24 : COMISS XMM5,XMM3
0071bc27 : JC 0x0071bc33
0071bc29 : MOV dword ptr [ESP + 0x14],0x0
0071bc31 : JMP 0x0071bc61
0071bc33 : FLD float ptr [ESP + 0x30]
0071bc37 : FNSTCW word ptr [ESP + 0xc]
0071bc3b : MOVZX EAX,word ptr [ESP + 0xc]
0071bc40 : FMUL ST2
0071bc42 : OR EAX,0xc00
0071bc47 : MOV dword ptr [ESP + 0x14],EAX
0071bc4b : FADD ST0,ST1
0071bc4d : FLDCW word ptr [ESP + 0x14]
0071bc51 : FISTP qword ptr [ESP + 0x18]
0071bc55 : MOV EAX,dword ptr [ESP + 0x18]
0071bc59 : MOV dword ptr [ESP + 0x14],EAX
0071bc5d : FLDCW word ptr [ESP + 0xc]
0071bc61 : COMISS XMM4,XMM2
0071bc64 : JC 0x0071bc6e
0071bc66 : FSTP ST1
0071bc68 : MOV EAX,ECX
0071bc6a : FSTP ST0
0071bc6c : JMP 0x0071bca5
0071bc6e : COMISS XMM5,XMM4
0071bc71 : JC 0x0071bc7b
0071bc73 : FSTP ST1
0071bc75 : XOR EAX,EAX
0071bc77 : FSTP ST0
0071bc79 : JMP 0x0071bca5
0071bc7b : FLD float ptr [ESP + 0x34]
0071bc7f : FNSTCW word ptr [ESP + 0xc]
0071bc83 : MOVZX EAX,word ptr [ESP + 0xc]
0071bc88 : FMULP ST2
0071bc8a : OR EAX,0xc00
0071bc8f : MOV dword ptr [ESP + 0x18],EAX
0071bc93 : FADDP
0071bc95 : FLDCW word ptr [ESP + 0x18]
0071bc99 : FISTP qword ptr [ESP + 0x18]
0071bc9d : MOV EAX,dword ptr [ESP + 0x18]
0071bca1 : FLDCW word ptr [ESP + 0xc]
0071bca5 : MOV ECX,dword ptr [EBX + 0x4]
0071bca8 : MOV EDI,dword ptr [ECX]
0071bcaa : SHL EAX,0x8
0071bcad : OR EAX,EDX
0071bcaf : SHL EAX,0x8
0071bcb2 : OR EAX,dword ptr [ESP + 0x10]
0071bcb6 : SHL EAX,0x8
0071bcb9 : OR EAX,dword ptr [ESP + 0x14]
0071bcbd : PUSH EAX
0071bcbe : PUSH 0x3c
0071bcc0 : PUSH ECX
0071bcc1 : MOV ECX,dword ptr [EDI + 0xe4]
0071bcc7 : CALL ECX
0071bcc9 : MOV ECX,dword ptr [ESI + 0x58]
0071bccc : MOV EAX,dword ptr [EBX + 0x4]
0071bccf : MOV EDX,dword ptr [EAX]
0071bcd1 : MOV EDX,dword ptr [EDX + 0x10c]
0071bcd7 : PUSH ECX
0071bcd8 : PUSH 0x1
0071bcda : PUSH 0x0
0071bcdc : PUSH EAX
0071bcdd : CALL EDX
0071bcdf : MOV EAX,dword ptr [EBX + 0x4]
0071bce2 : MOV ECX,dword ptr [EAX]
0071bce4 : MOV EDX,dword ptr [ECX + 0x10c]
0071bcea : PUSH 0x2
0071bcec : PUSH 0x2
0071bcee : PUSH 0x0
0071bcf0 : PUSH EAX
0071bcf1 : CALL EDX
0071bcf3 : MOV EAX,dword ptr [EBX + 0x4]
0071bcf6 : MOV ECX,dword ptr [EAX]
0071bcf8 : MOV EDX,dword ptr [ECX + 0x10c]
0071bcfe : PUSH 0x3
0071bd00 : PUSH 0x3
0071bd02 : PUSH 0x0
0071bd04 : PUSH EAX
0071bd05 : CALL EDX
0071bd07 : MOV EDX,dword ptr [ESI + 0x5c]
0071bd0a : MOV EAX,dword ptr [EBX + 0x4]
0071bd0d : MOV ECX,dword ptr [EAX]
0071bd0f : PUSH EDX
0071bd10 : PUSH 0x4
0071bd12 : PUSH 0x0
0071bd14 : PUSH EAX
0071bd15 : MOV EAX,dword ptr [ECX + 0x10c]
0071bd1b : CALL EAX
0071bd1d : MOV EAX,dword ptr [EBX + 0x4]
0071bd20 : MOV ECX,dword ptr [EAX]
0071bd22 : MOV EDX,dword ptr [ECX + 0x10c]
0071bd28 : PUSH 0x2
0071bd2a : PUSH 0x5
0071bd2c : PUSH 0x0
0071bd2e : PUSH EAX
0071bd2f : CALL EDX
0071bd31 : MOV EAX,dword ptr [EBX + 0x4]
0071bd34 : MOV ECX,dword ptr [EAX]
0071bd36 : MOV EDX,dword ptr [ECX + 0x10c]
0071bd3c : PUSH 0x3
0071bd3e : PUSH 0x6
0071bd40 : PUSH 0x0
0071bd42 : PUSH EAX
0071bd43 : CALL EDX
0071bd45 : MOV EAX,dword ptr [ESP + 0x24]
0071bd49 : MOVSS XMM0,dword ptr [EAX + 0x60]
0071bd4e : MOV EBX,dword ptr [EBX + 0x4]
0071bd51 : MOV ECX,0x10
0071bd56 : MOV ESI,0xd72178
0071bd5b : LEA EDI,[ESP + 0x38]
0071bd5f : MOVSD.REP ES:EDI,ESI
0071bd61 : MOVSS dword ptr [ESP + 0x58],XMM0
0071bd67 : MOVSS XMM0,dword ptr [EAX + 0x64]
0071bd6c : LEA ECX,[ESP + 0x38]
0071bd70 : PUSH ECX
0071bd71 : MOVSS dword ptr [ESP + 0x60],XMM0
0071bd77 : MOV EAX,dword ptr [EBX]
0071bd79 : MOV EDX,dword ptr [EAX + 0xb0]
0071bd7f : PUSH 0x10
0071bd81 : PUSH EBX
0071bd82 : CALL EDX
0071bd84 : POP EDI
0071bd85 : POP ESI
0071bd86 : POP EBX
0071bd87 : MOV ESP,EBP
0071bd89 : POP EBP
0071bd8a : RET 0x4
0071bd8d : MOV ECX,dword ptr [EAX]
0071bd8f : MOV EDX,dword ptr [ECX + 0xe4]
0071bd95 : PUSH 0x2
0071bd97 : PUSH 0x13
0071bd99 : PUSH EAX
0071bd9a : CALL EDX
0071bd9c : MOV EAX,dword ptr [EBX + 0x4]
0071bd9f : MOV ECX,dword ptr [EAX]
0071bda1 : MOV EDX,dword ptr [ECX + 0xe4]
0071bda7 : PUSH 0x2
0071bda9 : PUSH 0x14
0071bdab : PUSH EAX
0071bdac : CALL EDX
0071bdae : MOV EAX,dword ptr [EBX + 0x4]
0071bdb1 : MOV ECX,dword ptr [EAX]
0071bdb3 : MOV EDX,dword ptr [ECX + 0x10c]
0071bdb9 : PUSH 0x2
0071bdbb : PUSH 0x1
0071bdbd : PUSH 0x0
0071bdbf : PUSH EAX
0071bdc0 : CALL EDX
0071bdc2 : MOV EAX,dword ptr [EBX + 0x4]
0071bdc5 : MOV ECX,dword ptr [EAX]
0071bdc7 : MOV EDX,dword ptr [ECX + 0x10c]
0071bdcd : PUSH 0x2
0071bdcf : PUSH 0x2
0071bdd1 : PUSH 0x0
0071bdd3 : PUSH EAX
0071bdd4 : CALL EDX
0071bdd6 : MOV EAX,dword ptr [EBX + 0x4]
0071bdd9 : MOV ECX,dword ptr [EAX]
0071bddb : MOV EDX,dword ptr [ECX + 0x10c]
0071bde1 : PUSH 0x0
0071bde3 : PUSH 0x3
0071bde5 : PUSH 0x0
0071bde7 : PUSH EAX
0071bde8 : CALL EDX
0071bdea : MOV EAX,dword ptr [EBX + 0x4]
0071bded : MOV ECX,dword ptr [EAX]
0071bdef : MOV EDX,dword ptr [ECX + 0x10c]
0071bdf5 : PUSH 0x4
0071bdf7 : PUSH 0x4
0071bdf9 : PUSH 0x0
0071bdfb : PUSH EAX
0071bdfc : CALL EDX
0071bdfe : MOV EAX,dword ptr [EBX + 0x4]
0071be01 : MOV ECX,dword ptr [EAX]
0071be03 : MOV EDX,dword ptr [ECX + 0x10c]
0071be09 : PUSH 0x2
0071be0b : PUSH 0x5
0071be0d : PUSH 0x0
0071be0f : PUSH EAX
0071be10 : CALL EDX
0071be12 : MOV EBX,dword ptr [EBX + 0x4]
0071be15 : MOV EAX,dword ptr [EBX]
0071be17 : MOV ECX,dword ptr [EAX + 0x10c]
0071be1d : PUSH 0x0
0071be1f : PUSH 0x6
0071be21 : PUSH 0x0
0071be23 : PUSH EBX
0071be24 : CALL ECX
0071be26 : POP EDI
0071be27 : POP ESI
0071be28 : POP EBX
0071be29 : MOV ESP,EBP
0071be2b : POP EBP
0071be2c : RET 0x4
