PROGRAM  : Maestia.exe
FUNCTION : FUN_0090c460
ENTRY    : 0090c460
BODY     : [[0090c460, 0090c81f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0090c460(int param_1,undefined4 param_2)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  DWORD DVar5;
  undefined4 in_ECX;
  uint local_b0;
  uint local_94;
  uint local_78;
  int local_74;
  undefined1 local_70 [4];
  int local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined4 local_2c;
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b526b6;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_6c = param_1;
  (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x114))("CastingOpen",local_14);
  local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
  local_18 = 7;
  local_1c = 0;
  FUN_00406360(&DAT_00c6524c,0);
  iVar3 = DAT_00d7c54c;
  local_8._0_1_ = 0;
  local_8._1_3_ = 0;
  if ((((char)((uint)in_ECX >> 0x18) == '\a') &&
      (FUN_004437f0(local_70), local_74 != *(int *)(iVar3 + 0x44))) &&
     (*(int *)(local_74 + 0x10) != 0)) {
    uVar1 = FUN_00824a20(DAT_0172491c,0);
    local_8._0_1_ = 1;
    FUN_00405eb0(uVar1,0,0xffffffff);
    local_8._0_1_ = 0;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_34 = 7;
    local_38 = 0;
    local_48 = 0;
  }
  puVar2 = local_2c;
  if (local_18 < 8) {
    puVar2 = &local_2c;
  }
  iVar3 = FUN_00405b70(puVar2);
  if ((iVar3 == 0) && (local_1c == 0)) {
    FUN_00406460(L"IDS_SkILL_CAST_ETC");
    local_8._0_1_ = 5;
    FUN_00406460(L"IDS_SKILL_CAST");
    local_8._0_1_ = 6;
    iVar3 = FUN_0081d120(local_4c);
    local_8._0_1_ = 7;
    iVar4 = FUN_0081d120(local_68);
    local_8._0_1_ = 8;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      iVar3 = iVar3 + 4;
    }
    else {
      iVar3 = *(int *)(iVar3 + 4);
    }
    if (*(uint *)(iVar4 + 0x18) < 8) {
      iVar4 = iVar4 + 4;
    }
    else {
      iVar4 = *(int *)(iVar4 + 4);
    }
    uVar1 = FUN_00404750(iVar4,iVar3);
    local_8._0_1_ = 9;
    FUN_00405eb0(uVar1,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,8);
    if (7 < local_78) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,7);
    if (7 < local_94) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,6);
    if (7 < local_b0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,5);
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_50 = 7;
    local_54 = 0;
    local_64 = 0;
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    FUN_00406460(L"IDS_SKILL_CAST");
    local_8._0_1_ = 2;
    iVar3 = FUN_0081d120(local_68);
    local_8._0_1_ = 3;
    puVar2 = local_2c;
    if (local_18 < 8) {
      puVar2 = &local_2c;
    }
    if (*(uint *)(iVar3 + 0x18) < 8) {
      iVar3 = iVar3 + 4;
    }
    else {
      iVar3 = *(int *)(iVar3 + 4);
    }
    uVar1 = FUN_00404750(iVar3,puVar2);
    local_8._0_1_ = 4;
    FUN_00405eb0(uVar1,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,3);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_34 = 7;
    local_38 = 0;
    local_48 = 0;
    local_8 = CONCAT31(local_8._1_3_,2);
    if (7 < local_78) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_34 = 7;
  local_38 = 0;
  local_48 = 0;
  local_50 = 7;
  local_54 = 0;
  local_64 = 0;
  iVar3 = *DAT_00da9894;
  if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
    puVar2 = local_2c;
    if (local_18 < 8) {
      puVar2 = &local_2c;
    }
    (**(code **)(**(int **)(iVar3 + 0x114) + 4))
              (*(int **)(iVar3 + 0x114),"SetCastingSkillName",&DAT_00c652bc,puVar2);
  }
  iVar3 = local_6c;
  *(undefined4 *)(local_6c + 0x3c) = param_2;
  DVar5 = timeGetTime();
  *(DWORD *)(iVar3 + 0x40) = DVar5;
  *(undefined1 *)(iVar3 + 0x38) = 1;
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    local_18 = 7;
    local_1c = 0;
    local_2c = (undefined4 *)((uint)local_2c & 0xffff0000);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0090c460 : PUSH EBP
0090c461 : MOV EBP,ESP
0090c463 : PUSH -0x1
0090c465 : PUSH 0xb526b6
0090c46a : MOV EAX,FS:[0x0]
0090c470 : PUSH EAX
0090c471 : SUB ESP,0xb8
0090c477 : MOV EAX,[0x00d66fa0]
0090c47c : XOR EAX,EBP
0090c47e : MOV dword ptr [EBP + -0x10],EAX
0090c481 : PUSH EBX
0090c482 : PUSH ESI
0090c483 : PUSH EDI
0090c484 : PUSH EAX
0090c485 : LEA EAX,[EBP + -0xc]
0090c488 : MOV FS:[0x0],EAX
0090c48e : MOV ESI,ECX
0090c490 : MOV EAX,dword ptr [EBP + 0x8]
0090c493 : MOV ECX,dword ptr [0x00da9894]
0090c499 : MOV dword ptr [EBP + -0x68],EAX
0090c49c : MOV EAX,dword ptr [ECX]
0090c49e : MOV ECX,dword ptr [EAX + 0x114]
0090c4a4 : MOV EDX,dword ptr [ECX]
0090c4a6 : MOV EAX,dword ptr [EDX]
0090c4a8 : PUSH 0xc65240
0090c4ad : CALL EAX
0090c4af : XOR EDI,EDI
0090c4b1 : XOR ECX,ECX
0090c4b3 : PUSH EDI
0090c4b4 : MOV word ptr [EBP + -0x28],CX
0090c4b8 : PUSH 0xc6524c
0090c4bd : LEA ECX,[EBP + -0x2c]
0090c4c0 : MOV dword ptr [EBP + -0x14],0x7
0090c4c7 : MOV dword ptr [EBP + -0x18],EDI
0090c4ca : CALL 0x00406360
0090c4cf : MOV dword ptr [EBP + -0x4],EDI
0090c4d2 : MOV EDX,ESI
0090c4d4 : SHR EDX,0x18
0090c4d7 : LEA EBX,[EDI + 0x8]
0090c4da : CMP DL,0x7
0090c4dd : JNZ 0x0090c54c
0090c4df : MOV dword ptr [EBP + -0x6c],ESI
0090c4e2 : MOV ESI,dword ptr [0x00d7c54c]
0090c4e8 : LEA EAX,[EBP + -0x6c]
0090c4eb : PUSH EAX
0090c4ec : LEA ECX,[ESI + 0x40]
0090c4ef : LEA EAX,[EBP + -0x70]
0090c4f2 : CALL 0x004437f0
0090c4f7 : MOV ESI,dword ptr [ESI + 0x44]
0090c4fa : MOV EAX,dword ptr [EBP + -0x70]
0090c4fd : CMP EAX,ESI
0090c4ff : JZ 0x0090c54c
0090c501 : MOV EAX,dword ptr [EAX + 0x10]
0090c504 : CMP EAX,EDI
0090c506 : JZ 0x0090c54c
0090c508 : MOV ECX,dword ptr [0x0172491c]
0090c50e : PUSH EDI
0090c50f : LEA EDX,[EAX + 0x18]
0090c512 : PUSH ECX
0090c513 : LEA ESI,[EBP + -0x48]
0090c516 : CALL 0x00824a20
0090c51b : MOV byte ptr [EBP + -0x4],0x1
0090c51f : PUSH -0x1
0090c521 : PUSH EDI
0090c522 : PUSH EAX
0090c523 : LEA ECX,[EBP + -0x2c]
0090c526 : CALL 0x00405eb0
0090c52b : MOV byte ptr [EBP + -0x4],0x0
0090c52f : CMP dword ptr [EBP + -0x30],EBX
0090c532 : JC 0x0090c53c
0090c534 : MOV ECX,dword ptr [EBP + -0x44]
0090c537 : CALL 0x006f04e0
0090c53c : XOR EDX,EDX
0090c53e : MOV dword ptr [EBP + -0x30],0x7
0090c545 : MOV dword ptr [EBP + -0x34],EDI
0090c548 : MOV word ptr [EBP + -0x44],DX
0090c54c : MOV EAX,dword ptr [EBP + -0x28]
0090c54f : CMP dword ptr [EBP + -0x14],EBX
0090c552 : JNC 0x0090c557
0090c554 : LEA EAX,[EBP + -0x28]
0090c557 : PUSH EAX
0090c558 : XOR EDX,EDX
0090c55a : MOV ECX,0xc65250
0090c55f : CALL 0x00405b70
0090c564 : ADD ESP,0x4
0090c567 : CMP EAX,EDI
0090c569 : JNZ 0x0090c57b
0090c56b : XOR EAX,EAX
0090c56d : CMP dword ptr [EBP + -0x18],EDI
0090c570 : SETNZ AL
0090c573 : CMP EAX,EDI
0090c575 : JZ 0x0090c642
0090c57b : PUSH 0xc65254
0090c580 : LEA ECX,[EBP + -0x64]
0090c583 : CALL 0x00406460
0090c588 : MOV byte ptr [EBP + -0x4],0x2
0090c58c : MOV ECX,dword ptr [0x0172491c]
0090c592 : LEA EAX,[EBP + -0x64]
0090c595 : PUSH EAX
0090c596 : LEA EDI,[EBP + 0xffffff74]
0090c59c : CALL 0x0081d120
0090c5a1 : MOV byte ptr [EBP + -0x4],0x3
0090c5a5 : MOV ECX,dword ptr [EBP + -0x28]
0090c5a8 : CMP dword ptr [EBP + -0x14],EBX
0090c5ab : JNC 0x0090c5b0
0090c5ad : LEA ECX,[EBP + -0x28]
0090c5b0 : CMP dword ptr [EAX + 0x18],EBX
0090c5b3 : JC 0x0090c5ba
0090c5b5 : MOV EAX,dword ptr [EAX + 0x4]
0090c5b8 : JMP 0x0090c5bd
0090c5ba : ADD EAX,0x4
0090c5bd : PUSH ECX
0090c5be : PUSH EAX
0090c5bf : LEA ESI,[EBP + -0x48]
0090c5c2 : CALL 0x00404750
0090c5c7 : ADD ESP,0x8
0090c5ca : MOV byte ptr [EBP + -0x4],0x4
0090c5ce : PUSH -0x1
0090c5d0 : XOR EDI,EDI
0090c5d2 : PUSH EDI
0090c5d3 : PUSH EAX
0090c5d4 : LEA ECX,[EBP + -0x2c]
0090c5d7 : CALL 0x00405eb0
0090c5dc : MOV byte ptr [EBP + -0x4],0x3
0090c5e0 : CMP dword ptr [EBP + -0x30],EBX
0090c5e3 : JC 0x0090c5ed
0090c5e5 : MOV ECX,dword ptr [EBP + -0x44]
0090c5e8 : CALL 0x006f04e0
0090c5ed : MOV ESI,0x7
0090c5f2 : XOR ECX,ECX
0090c5f4 : MOV dword ptr [EBP + -0x30],ESI
0090c5f7 : MOV dword ptr [EBP + -0x34],EDI
0090c5fa : MOV word ptr [EBP + -0x44],CX
0090c5fe : MOV byte ptr [EBP + -0x4],0x2
0090c602 : CMP dword ptr [EBP + -0x74],EBX
0090c605 : JC 0x0090c612
0090c607 : MOV ECX,dword ptr [EBP + 0xffffff78]
0090c60d : CALL 0x006f04e0
0090c612 : XOR EDX,EDX
0090c614 : MOV dword ptr [EBP + -0x74],ESI
0090c617 : MOV dword ptr [EBP + -0x78],EDI
0090c61a : MOV word ptr [EBP + 0xffffff78],DX
0090c621 : MOV byte ptr [EBP + -0x4],DL
0090c624 : CMP dword ptr [EBP + -0x4c],EBX
0090c627 : JC 0x0090c631
0090c629 : MOV ECX,dword ptr [EBP + -0x60]
0090c62c : CALL 0x006f04e0
0090c631 : XOR EAX,EAX
0090c633 : MOV dword ptr [EBP + -0x4c],ESI
0090c636 : MOV dword ptr [EBP + -0x50],EDI
0090c639 : MOV word ptr [EBP + -0x60],AX
0090c63d : JMP 0x0090c78d
0090c642 : PUSH 0xc65274
0090c647 : LEA ECX,[EBP + -0x48]
0090c64a : CALL 0x00406460
0090c64f : MOV byte ptr [EBP + -0x4],0x5
0090c653 : PUSH 0xc6529c
0090c658 : LEA ECX,[EBP + -0x64]
0090c65b : CALL 0x00406460
0090c660 : MOV byte ptr [EBP + -0x4],0x6
0090c664 : LEA ECX,[EBP + -0x48]
0090c667 : PUSH ECX
0090c668 : MOV ECX,dword ptr [0x0172491c]
0090c66e : LEA EDI,[EBP + 0xffffff3c]
0090c674 : CALL 0x0081d120
0090c679 : MOV ESI,EAX
0090c67b : MOV byte ptr [EBP + -0x4],0x7
0090c67f : MOV ECX,dword ptr [0x0172491c]
0090c685 : LEA EDX,[EBP + -0x64]
0090c688 : PUSH EDX
0090c689 : LEA EDI,[EBP + 0xffffff58]
0090c68f : CALL 0x0081d120
0090c694 : MOV byte ptr [EBP + -0x4],BL
0090c697 : CMP dword ptr [ESI + 0x18],EBX
0090c69a : JC 0x0090c6a1
0090c69c : MOV ESI,dword ptr [ESI + 0x4]
0090c69f : JMP 0x0090c6a4
0090c6a1 : ADD ESI,0x4
0090c6a4 : CMP dword ptr [EAX + 0x18],EBX
0090c6a7 : JC 0x0090c6ae
0090c6a9 : MOV EAX,dword ptr [EAX + 0x4]
0090c6ac : JMP 0x0090c6b1
0090c6ae : ADD EAX,0x4
0090c6b1 : PUSH ESI
0090c6b2 : PUSH EAX
0090c6b3 : LEA ESI,[EBP + 0xffffff74]
0090c6b9 : CALL 0x00404750
0090c6be : ADD ESP,0x8
0090c6c1 : MOV byte ptr [EBP + -0x4],0x9
0090c6c5 : PUSH -0x1
0090c6c7 : XOR EDI,EDI
0090c6c9 : PUSH EDI
0090c6ca : PUSH EAX
0090c6cb : LEA ECX,[EBP + -0x2c]
0090c6ce : CALL 0x00405eb0
0090c6d3 : MOV byte ptr [EBP + -0x4],BL
0090c6d6 : CMP dword ptr [EBP + -0x74],EBX
0090c6d9 : JC 0x0090c6e6
0090c6db : MOV ECX,dword ptr [EBP + 0xffffff78]
0090c6e1 : CALL 0x006f04e0
0090c6e6 : MOV ESI,0x7
0090c6eb : XOR EAX,EAX
0090c6ed : MOV dword ptr [EBP + -0x74],ESI
0090c6f0 : MOV dword ptr [EBP + -0x78],EDI
0090c6f3 : MOV word ptr [EBP + 0xffffff78],AX
0090c6fa : MOV byte ptr [EBP + -0x4],0x7
0090c6fe : CMP dword ptr [EBP + 0xffffff70],EBX
0090c704 : JC 0x0090c711
0090c706 : MOV ECX,dword ptr [EBP + 0xffffff5c]
0090c70c : CALL 0x006f04e0
0090c711 : XOR ECX,ECX
0090c713 : MOV dword ptr [EBP + 0xffffff70],ESI
0090c719 : MOV dword ptr [EBP + 0xffffff6c],EDI
0090c71f : MOV word ptr [EBP + 0xffffff5c],CX
0090c726 : MOV byte ptr [EBP + -0x4],0x6
0090c72a : CMP dword ptr [EBP + 0xffffff54],EBX
0090c730 : JC 0x0090c73d
0090c732 : MOV ECX,dword ptr [EBP + 0xffffff40]
0090c738 : CALL 0x006f04e0
0090c73d : XOR EDX,EDX
0090c73f : MOV dword ptr [EBP + 0xffffff54],ESI
0090c745 : MOV dword ptr [EBP + 0xffffff50],EDI
0090c74b : MOV word ptr [EBP + 0xffffff40],DX
0090c752 : MOV byte ptr [EBP + -0x4],0x5
0090c756 : CMP dword ptr [EBP + -0x4c],EBX
0090c759 : JC 0x0090c763
0090c75b : MOV ECX,dword ptr [EBP + -0x60]
0090c75e : CALL 0x006f04e0
0090c763 : XOR EAX,EAX
0090c765 : MOV dword ptr [EBP + -0x4c],ESI
0090c768 : MOV dword ptr [EBP + -0x50],EDI
0090c76b : MOV word ptr [EBP + -0x60],AX
0090c76f : MOV byte ptr [EBP + -0x4],AL
0090c772 : CMP dword ptr [EBP + -0x30],EBX
0090c775 : JC 0x0090c77f
0090c777 : MOV ECX,dword ptr [EBP + -0x44]
0090c77a : CALL 0x006f04e0
0090c77f : XOR ECX,ECX
0090c781 : MOV dword ptr [EBP + -0x34],EDI
0090c784 : MOV dword ptr [EBP + -0x30],ESI
0090c787 : MOV word ptr [EBP + -0x44],CX
0090c78b : XOR EDI,EDI
0090c78d : MOV EDX,dword ptr [0x00da9894]
0090c793 : MOV EAX,dword ptr [EDX]
0090c795 : CMP EAX,EDI
0090c797 : JZ 0x0090c7c8
0090c799 : CMP dword ptr [EAX + 0x114],EDI
0090c79f : JZ 0x0090c7c8
0090c7a1 : MOV EAX,dword ptr [EAX + 0x114]
0090c7a7 : MOV ECX,dword ptr [EBP + -0x28]
0090c7aa : CMP dword ptr [EBP + -0x14],EBX
0090c7ad : JNC 0x0090c7b2
0090c7af : LEA ECX,[EBP + -0x28]
0090c7b2 : MOV EDX,dword ptr [EAX]
0090c7b4 : PUSH ECX
0090c7b5 : PUSH 0xc652bc
0090c7ba : PUSH 0xc652c0
0090c7bf : PUSH EAX
0090c7c0 : MOV EAX,dword ptr [EDX + 0x4]
0090c7c3 : CALL EAX
0090c7c5 : ADD ESP,0x10
0090c7c8 : MOV ECX,dword ptr [EBP + 0xc]
0090c7cb : MOV ESI,dword ptr [EBP + -0x68]
0090c7ce : MOV dword ptr [ESI + 0x3c],ECX
0090c7d1 : CALL dword ptr [0x00b85598]
0090c7d7 : MOV dword ptr [ESI + 0x40],EAX
0090c7da : MOV byte ptr [ESI + 0x38],0x1
0090c7de : MOV dword ptr [EBP + -0x4],0xffffffff
0090c7e5 : CMP dword ptr [EBP + -0x14],EBX
0090c7e8 : JC 0x0090c7f2
0090c7ea : MOV ECX,dword ptr [EBP + -0x28]
0090c7ed : CALL 0x006f04e0
0090c7f2 : XOR EDX,EDX
0090c7f4 : MOV dword ptr [EBP + -0x14],0x7
0090c7fb : MOV dword ptr [EBP + -0x18],EDI
0090c7fe : MOV word ptr [EBP + -0x28],DX
0090c802 : MOV ECX,dword ptr [EBP + -0xc]
0090c805 : MOV dword ptr FS:[0x0],ECX
0090c80c : POP ECX
0090c80d : POP EDI
0090c80e : POP ESI
0090c80f : POP EBX
0090c810 : MOV ECX,dword ptr [EBP + -0x10]
0090c813 : XOR ECX,EBP
0090c815 : CALL 0x00633e6b
0090c81a : MOV ESP,EBP
0090c81c : POP EBP
0090c81d : RET 0x8
