PROGRAM  : Maestia.exe
FUNCTION : FUN_008819e0
ENTRY    : 008819e0
BODY     : [[008819e0, 00881cfc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008819e0(undefined4 param_1,int param_2)

{
  char cVar1;
  int *piVar2;
  rsize_t _DstSize;
  int *piVar3;
  uint uVar4;
  undefined4 *_Dst;
  int iVar5;
  int in_ECX;
  int iVar6;
  int local_a4;
  LPCRITICAL_SECTION local_a0;
  char *local_9c;
  undefined4 local_98;
  int local_94;
  undefined4 local_90;
  int local_8c;
  int *local_88;
  char local_81;
  undefined1 local_80 [4];
  int *local_7c;
  undefined4 local_74;
  undefined4 local_70;
  undefined1 local_2b;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b63647;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_a0 = (LPCRITICAL_SECTION)(in_ECX + 0x38);
  local_94 = 0;
  local_9c = ".\\Objects\\AvaCharStatus.cpp";
  local_98 = 0x137;
  local_90 = 1;
  local_14 = uVar4;
  FUN_006ef1a0(&local_a0);
  local_8 = 0;
  FUN_004437f0(&param_2);
  piVar3 = local_88;
  if (local_88 == *(int **)(in_ECX + 0x24)) {
    for (_Dst = *(undefined4 **)(in_ECX + 0x14); _Dst != *(undefined4 **)(in_ECX + 0x18);
        _Dst = _Dst + 1) {
      if (*(int *)*_Dst == param_2) {
        iVar6 = (int)*(undefined4 **)(in_ECX + 0x18) - (int)(_Dst + 1) >> 2;
        if (0 < iVar6) {
          _DstSize = iVar6 * 4;
          _memmove_s(_Dst,_DstSize,_Dst + 1,_DstSize);
        }
        *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) + -4;
        local_8 = 0xffffffff;
        if (local_94 != 0) {
          LeaveCriticalSection(local_a0);
          local_94 = 0;
        }
        goto LAB_00881cdf;
      }
    }
    local_8 = 0xffffffff;
    if (local_94 != 0) {
      LeaveCriticalSection(local_a0);
      local_94 = 0;
    }
  }
  else {
    local_88 = *(int **)(local_88[4] + 8);
    local_8c = FUN_00880fc0(param_2,local_88);
    FUN_0043bbe0(in_ECX + 0x20,&local_a4,piVar3,uVar4);
    local_8 = 0xffffffff;
    if (local_94 != 0) {
      LeaveCriticalSection(local_a0);
      local_94 = 0;
    }
    piVar3 = local_88;
    iVar6 = DAT_00d7c54c;
    FUN_004437f0(&local_88);
    if (((local_a4 != *(int *)(iVar6 + 0x44)) && (iVar6 = *(int *)(local_a4 + 0x10), iVar6 != 0)) &&
       (param_2 != -0x10000)) {
      local_81 = '\0';
      if ((((uint)piVar3 >> 0x10 == 0x1410) && (iVar5 = FUN_004049b0(piVar3), iVar5 != 0)) &&
         (((cVar1 = *(char *)(iVar5 + 0x1a4), cVar1 != '\x02' &&
           ((cVar1 != '\x04' && (cVar1 != '\x03')))) ||
          (local_81 = '\x01', *(int *)(iVar5 + 0x1ac) < 1)))) {
        local_81 = '\0';
      }
      FUN_0040e250(local_80);
      local_8 = 1;
      local_74 = *(undefined4 *)(*(int *)(in_ECX + 0x2c) + 4);
      local_70 = param_1;
      local_7c = piVar3;
      local_2b = 0;
      local_80[0] = 0xff;
      if (((*(byte *)(iVar6 + 0x144) & 1) != 0) || (local_18 = 0x11, local_81 == '\x01')) {
        local_18 = 0xf;
      }
      FUN_00883670(DAT_017248e4);
      local_8 = 0xffffffff;
      FUN_00406bd0(local_80);
    }
    if (local_8c == 0) {
      FUN_008018d0(L"Invalid pStopStatusData");
    }
    else {
      piVar2 = *(int **)(in_ECX + 0x24);
      local_88 = (int *)*piVar2;
      if (local_88 != piVar2) {
        while (local_88 != piVar2) {
          if (*(int **)(local_88[4] + 8) == piVar3) {
            (**(code **)(**(int **)(in_ECX + 0x2c) + 0x318))(local_8c,0);
            goto LAB_00881cdf;
          }
          FUN_00416210();
        }
      }
      (**(code **)(**(int **)(in_ECX + 0x2c) + 0x318))(local_8c,1);
    }
  }
LAB_00881cdf:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008819e0 : PUSH EBP
008819e1 : MOV EBP,ESP
008819e3 : PUSH -0x1
008819e5 : PUSH 0xb63647
008819ea : MOV EAX,FS:[0x0]
008819f0 : PUSH EAX
008819f1 : SUB ESP,0x94
008819f7 : MOV EAX,[0x00d66fa0]
008819fc : XOR EAX,EBP
008819fe : MOV dword ptr [EBP + -0x10],EAX
00881a01 : PUSH EBX
00881a02 : PUSH ESI
00881a03 : PUSH EDI
00881a04 : PUSH EAX
00881a05 : LEA EAX,[EBP + -0xc]
00881a08 : MOV FS:[0x0],EAX
00881a0e : MOV ESI,ECX
00881a10 : LEA ECX,[EBP + 0xffffff64]
00881a16 : LEA EAX,[ESI + 0x38]
00881a19 : XOR EDI,EDI
00881a1b : PUSH ECX
00881a1c : MOV dword ptr [EBP + 0xffffff70],EDI
00881a22 : MOV dword ptr [EBP + 0xffffff64],EAX
00881a28 : MOV dword ptr [EBP + 0xffffff68],0xc44898
00881a32 : MOV dword ptr [EBP + 0xffffff6c],0x137
00881a3c : MOV dword ptr [EBP + 0xffffff74],0x1
00881a46 : CALL 0x006ef1a0
00881a4b : MOV dword ptr [EBP + -0x4],EDI
00881a4e : LEA EDX,[EBP + 0xc]
00881a51 : LEA EDI,[ESI + 0x20]
00881a54 : PUSH EDX
00881a55 : LEA EAX,[EBP + 0xffffff7c]
00881a5b : MOV ECX,EDI
00881a5d : CALL 0x004437f0
00881a62 : MOV EAX,dword ptr [ESI + 0x24]
00881a65 : MOV EBX,dword ptr [EBP + 0xffffff7c]
00881a6b : CMP EBX,EAX
00881a6d : JNZ 0x00881b10
00881a73 : MOV EAX,dword ptr [ESI + 0x14]
00881a76 : MOV ECX,dword ptr [ESI + 0x18]
00881a79 : CMP EAX,ECX
00881a7b : JZ 0x00881a90
00881a7d : LEA ECX,[ECX]
00881a80 : MOV EDX,dword ptr [EAX]
00881a82 : MOV EDI,dword ptr [EBP + 0xc]
00881a85 : CMP dword ptr [EDX],EDI
00881a87 : JZ 0x00881ac0
00881a89 : ADD EAX,0x4
00881a8c : CMP EAX,ECX
00881a8e : JNZ 0x00881a80
00881a90 : MOV dword ptr [EBP + -0x4],0xffffffff
00881a97 : CMP dword ptr [EBP + 0xffffff70],0x0
00881a9e : JZ 0x00881cdf
00881aa4 : MOV ECX,dword ptr [EBP + 0xffffff64]
00881aaa : PUSH ECX
00881aab : CALL dword ptr [0x00b8511c]
00881ab1 : MOV dword ptr [EBP + 0xffffff70],0x0
00881abb : JMP 0x00881cdf
00881ac0 : LEA EDX,[EAX + 0x4]
00881ac3 : SUB ECX,EDX
00881ac5 : SAR ECX,0x2
00881ac8 : TEST ECX,ECX
00881aca : JLE 0x00881adc
00881acc : ADD ECX,ECX
00881ace : ADD ECX,ECX
00881ad0 : PUSH ECX
00881ad1 : PUSH EDX
00881ad2 : PUSH ECX
00881ad3 : PUSH EAX
00881ad4 : CALL 0x00634101
00881ad9 : ADD ESP,0x10
00881adc : ADD dword ptr [ESI + 0x18],-0x4
00881ae0 : MOV dword ptr [EBP + -0x4],0xffffffff
00881ae7 : CMP dword ptr [EBP + 0xffffff70],0x0
00881aee : JZ 0x00881cdf
00881af4 : MOV EAX,dword ptr [EBP + 0xffffff64]
00881afa : PUSH EAX
00881afb : CALL dword ptr [0x00b8511c]
00881b01 : MOV dword ptr [EBP + 0xffffff70],0x0
00881b0b : JMP 0x00881cdf
00881b10 : MOV EDX,dword ptr [EBX + 0x10]
00881b13 : MOV EAX,dword ptr [EDX + 0x8]
00881b16 : PUSH EAX
00881b17 : MOV dword ptr [EBP + 0xffffff7c],EAX
00881b1d : MOV EAX,dword ptr [EBP + 0xc]
00881b20 : PUSH EAX
00881b21 : MOV ECX,ESI
00881b23 : CALL 0x00880fc0
00881b28 : PUSH EBX
00881b29 : LEA ECX,[EBP + 0xffffff60]
00881b2f : PUSH ECX
00881b30 : PUSH EDI
00881b31 : MOV dword ptr [EBP + 0xffffff78],EAX
00881b37 : CALL 0x0043bbe0
00881b3c : MOV dword ptr [EBP + -0x4],0xffffffff
00881b43 : CMP dword ptr [EBP + 0xffffff70],0x0
00881b4a : JZ 0x00881b63
00881b4c : MOV EDX,dword ptr [EBP + 0xffffff64]
00881b52 : PUSH EDX
00881b53 : CALL dword ptr [0x00b8511c]
00881b59 : MOV dword ptr [EBP + 0xffffff70],0x0
00881b63 : MOV EDI,dword ptr [0x00d7c54c]
00881b69 : MOV EBX,dword ptr [EBP + 0xffffff7c]
00881b6f : LEA EAX,[EBP + 0xffffff7c]
00881b75 : PUSH EAX
00881b76 : LEA ECX,[EDI + 0x40]
00881b79 : LEA EAX,[EBP + 0xffffff60]
00881b7f : MOV dword ptr [EBP + 0xffffff7c],EBX
00881b85 : CALL 0x004437f0
00881b8a : MOV EDI,dword ptr [EDI + 0x44]
00881b8d : MOV EAX,dword ptr [EBP + 0xffffff60]
00881b93 : CMP EAX,EDI
00881b95 : JZ 0x00881c5d
00881b9b : MOV EDI,dword ptr [EAX + 0x10]
00881b9e : TEST EDI,EDI
00881ba0 : JZ 0x00881c5d
00881ba6 : CMP dword ptr [EBP + 0xc],0xffff0000
00881bad : JZ 0x00881c5d
00881bb3 : MOV ECX,EBX
00881bb5 : SHR ECX,0x10
00881bb8 : MOV byte ptr [EBP + -0x7d],0x0
00881bbc : CMP ECX,0x1410
00881bc2 : JNZ 0x00881bf7
00881bc4 : PUSH EBX
00881bc5 : CALL 0x004049b0
00881bca : ADD ESP,0x4
00881bcd : TEST EAX,EAX
00881bcf : JZ 0x00881bf7
00881bd1 : MOV CL,byte ptr [EAX + 0x1a4]
00881bd7 : CMP CL,0x2
00881bda : JZ 0x00881be6
00881bdc : CMP CL,0x4
00881bdf : JZ 0x00881be6
00881be1 : CMP CL,0x3
00881be4 : JNZ 0x00881bf3
00881be6 : CMP dword ptr [EAX + 0x1ac],0x0
00881bed : MOV byte ptr [EBP + -0x7d],0x1
00881bf1 : JG 0x00881bf7
00881bf3 : MOV byte ptr [EBP + -0x7d],0x0
00881bf7 : LEA EDX,[EBP + -0x7c]
00881bfa : PUSH EDX
00881bfb : CALL 0x0040e250
00881c00 : MOV dword ptr [EBP + -0x4],0x1
00881c07 : TEST byte ptr [EDI + 0x144],0x1
00881c0e : MOV EAX,dword ptr [ESI + 0x2c]
00881c11 : MOV EAX,dword ptr [EAX + 0x4]
00881c14 : MOV ECX,dword ptr [EBP + 0x8]
00881c17 : MOV dword ptr [EBP + -0x70],EAX
00881c1a : MOV dword ptr [EBP + -0x6c],ECX
00881c1d : MOV dword ptr [EBP + -0x78],EBX
00881c20 : MOV byte ptr [EBP + -0x27],0x0
00881c24 : MOV byte ptr [EBP + -0x7c],0xff
00881c28 : JNZ 0x00881c37
00881c2a : CMP byte ptr [EBP + -0x7d],0x1
00881c2e : MOV dword ptr [EBP + -0x14],0x11
00881c35 : JNZ 0x00881c3e
00881c37 : MOV dword ptr [EBP + -0x14],0xf
00881c3e : MOV EDX,dword ptr [0x017248e4]
00881c44 : PUSH EDX
00881c45 : LEA ECX,[EBP + -0x7c]
00881c48 : CALL 0x00883670
00881c4d : MOV dword ptr [EBP + -0x4],0xffffffff
00881c54 : LEA EAX,[EBP + -0x7c]
00881c57 : PUSH EAX
00881c58 : CALL 0x00406bd0
00881c5d : CMP dword ptr [EBP + 0xffffff78],0x0
00881c64 : JZ 0x00881ccc
00881c66 : MOV ECX,dword ptr [ESI + 0x24]
00881c69 : MOV EAX,dword ptr [ECX]
00881c6b : MOV dword ptr [EBP + 0xffffff7c],EAX
00881c71 : CMP EAX,ECX
00881c73 : JZ 0x00881c98
00881c75 : MOV EDI,ECX
00881c77 : CMP EAX,EDI
00881c79 : JZ 0x00881c98
00881c7b : MOV ECX,dword ptr [EAX + 0x10]
00881c7e : CMP dword ptr [ECX + 0x8],EBX
00881c81 : JZ 0x00881cb2
00881c83 : LEA EDX,[EBP + 0xffffff7c]
00881c89 : CALL 0x00416210
00881c8e : MOV EAX,dword ptr [EBP + 0xffffff7c]
00881c94 : CMP EAX,EDI
00881c96 : JNZ 0x00881c7b
00881c98 : MOV ESI,dword ptr [ESI + 0x2c]
00881c9b : MOV ECX,dword ptr [EBP + 0xffffff78]
00881ca1 : MOV EAX,dword ptr [ESI]
00881ca3 : MOV EDX,dword ptr [EAX + 0x318]
00881ca9 : PUSH 0x1
00881cab : PUSH ECX
00881cac : MOV ECX,ESI
00881cae : CALL EDX
00881cb0 : JMP 0x00881cdf
00881cb2 : MOV ESI,dword ptr [ESI + 0x2c]
00881cb5 : MOV EDX,dword ptr [ESI]
00881cb7 : MOV EAX,dword ptr [EBP + 0xffffff78]
00881cbd : MOV EDX,dword ptr [EDX + 0x318]
00881cc3 : PUSH 0x0
00881cc5 : PUSH EAX
00881cc6 : MOV ECX,ESI
00881cc8 : CALL EDX
00881cca : JMP 0x00881cdf
00881ccc : MOV ESI,dword ptr [0x00da98e8]
00881cd2 : PUSH 0xc448b4
00881cd7 : CALL 0x008018d0
00881cdc : ADD ESP,0x4
00881cdf : MOV ECX,dword ptr [EBP + -0xc]
00881ce2 : MOV dword ptr FS:[0x0],ECX
00881ce9 : POP ECX
00881cea : POP EDI
00881ceb : POP ESI
00881cec : POP EBX
00881ced : MOV ECX,dword ptr [EBP + -0x10]
00881cf0 : XOR ECX,EBP
00881cf2 : CALL 0x00633e6b
00881cf7 : MOV ESP,EBP
00881cf9 : POP EBP
00881cfa : RET 0x8
