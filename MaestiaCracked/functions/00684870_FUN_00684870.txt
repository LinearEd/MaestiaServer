PROGRAM  : Maestia.exe
FUNCTION : FUN_00684870
ENTRY    : 00684870
BODY     : [[00684870, 00684954]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00684870(void)

{
  char *_Src;
  int *piVar1;
  char *_Dst;
  int *piVar2;
  int iVar3;
  int in_ECX;
  uint uVar4;
  
  _Src = (char *)(in_ECX + 8);
  if (*(char *)(in_ECX + 8) != '\0') {
    _Dst = (char *)(in_ECX + 0x408);
    _strcpy_s(_Dst,0x400,_Src);
    _strcat_s(_Dst,0x400,".ClearList");
    FUN_00678eb0(*(undefined4 *)(in_ECX + 4),_Dst,&DAT_00cca874);
    *_Dst = '\0';
    _strcpy_s(_Dst,0x400,_Src);
    _strcat_s(_Dst,0x400,".SelectDataItem");
    FUN_00678eb0(*(undefined4 *)(in_ECX + 4),_Dst,&DAT_00cd53c0,*(undefined4 *)(in_ECX + 0x830));
    uVar4 = 0;
    if (*(int *)(in_ECX + 0x828) != 0) {
      do {
        piVar2 = (int *)(*(int *)(in_ECX + 0x824) + uVar4 * 4);
        iVar3 = *piVar2;
        if (iVar3 != 0) {
          piVar1 = (int *)(iVar3 + 4);
          *piVar1 = *piVar1 + 1;
        }
        FUN_006847c0(*piVar2);
        uVar4 = uVar4 + 1;
      } while (uVar4 < *(uint *)(in_ECX + 0x828));
    }
    _strcpy_s(_Dst,0x400,_Src);
    _strcat_s(_Dst,0x400,".SetList");
    FUN_00678eb0(*(undefined4 *)(in_ECX + 4),_Dst,&DAT_00cca874);
    *_Dst = '\0';
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00684870 : PUSH EBX
00684871 : PUSH EBP
00684872 : PUSH ESI
00684873 : MOV ESI,ECX
00684875 : CMP byte ptr [ESI + 0x8],0x0
00684879 : LEA EBP,[ESI + 0x8]
0068487c : PUSH EDI
0068487d : JZ 0x00684950
00684883 : PUSH EBP
00684884 : LEA EDI,[ESI + 0x408]
0068488a : PUSH 0x400
0068488f : PUSH EDI
00684890 : CALL 0x00638300
00684895 : PUSH 0xbd82e0
0068489a : PUSH 0x400
0068489f : PUSH EDI
006848a0 : CALL 0x0063db33
006848a5 : MOV EAX,dword ptr [ESI + 0x4]
006848a8 : PUSH 0xcca874
006848ad : PUSH EDI
006848ae : PUSH EAX
006848af : CALL 0x00678eb0
006848b4 : PUSH EBP
006848b5 : PUSH 0x400
006848ba : PUSH EDI
006848bb : MOV byte ptr [EDI],0x0
006848be : CALL 0x00638300
006848c3 : PUSH 0xbd82d0
006848c8 : PUSH 0x400
006848cd : PUSH EDI
006848ce : CALL 0x0063db33
006848d3 : MOV ECX,dword ptr [ESI + 0x830]
006848d9 : MOV EDX,dword ptr [ESI + 0x4]
006848dc : PUSH ECX
006848dd : PUSH 0xcd53c0
006848e2 : PUSH EDI
006848e3 : PUSH EDX
006848e4 : CALL 0x00678eb0
006848e9 : XOR EBX,EBX
006848eb : ADD ESP,0x4c
006848ee : CMP dword ptr [ESI + 0x828],EBX
006848f4 : JBE 0x0068491f
006848f6 : MOV EAX,dword ptr [ESI + 0x824]
006848fc : LEA EAX,[EAX + EBX*0x4]
006848ff : PUSH ECX
00684900 : MOV ECX,dword ptr [EAX]
00684902 : MOV EDX,ESP
00684904 : TEST ECX,ECX
00684906 : JZ 0x0068490b
00684908 : INC dword ptr [ECX + 0x4]
0068490b : MOV ECX,dword ptr [EAX]
0068490d : MOV dword ptr [EDX],ECX
0068490f : MOV ECX,ESI
00684911 : CALL 0x006847c0
00684916 : INC EBX
00684917 : CMP EBX,dword ptr [ESI + 0x828]
0068491d : JC 0x006848f6
0068491f : PUSH EBP
00684920 : PUSH 0x400
00684925 : PUSH EDI
00684926 : CALL 0x00638300
0068492b : PUSH 0xbd82c4
00684930 : PUSH 0x400
00684935 : PUSH EDI
00684936 : CALL 0x0063db33
0068493b : MOV EDX,dword ptr [ESI + 0x4]
0068493e : PUSH 0xcca874
00684943 : PUSH EDI
00684944 : PUSH EDX
00684945 : CALL 0x00678eb0
0068494a : ADD ESP,0x24
0068494d : MOV byte ptr [EDI],0x0
00684950 : POP EDI
00684951 : POP ESI
00684952 : POP EBP
00684953 : POP EBX
00684954 : RET
