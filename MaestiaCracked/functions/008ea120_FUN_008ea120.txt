PROGRAM  : Maestia.exe
FUNCTION : FUN_008ea120
ENTRY    : 008ea120
BODY     : [[008ea120, 008ea44e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008ea120(int param_1,undefined4 param_2,wchar_t *param_3)

{
  undefined4 uVar1;
  wchar_t *_Str1;
  int iVar2;
  int *in_ECX;
  int *piVar3;
  uint in_stack_00000020;
  uint local_d8;
  uint local_bc;
  uint local_a0;
  uint local_84;
  undefined1 local_80 [4];
  undefined2 local_7c;
  undefined4 local_6c;
  uint local_68;
  undefined1 local_64 [4];
  undefined2 local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b4a3df;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_8 = 0;
  piVar3 = (int *)in_ECX[0x16];
  do {
    if (piVar3 == (int *)in_ECX[0x17]) {
      (**(code **)(*in_ECX + 0x24))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
LAB_008ea174:
      local_8 = 0xffffffff;
      FUN_004427d0(&param_1);
      ExceptionList = local_10;
      return;
    }
    if (*(int *)*piVar3 == param_1) {
      switch((char)((int *)*piVar3)[0x20]) {
      case '\a':
      case '\v':
        FUN_00406460(L"IDS_PREMIUM_ENDTIME_STORAGE");
        local_8._0_1_ = 1;
        uVar1 = FUN_0081d120(local_80);
        local_8._0_1_ = 2;
        FUN_00405eb0(uVar1,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,1);
        if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_68) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_68 = 7;
        local_6c = 0;
        local_7c = 0;
        break;
      case '\b':
      case '\f':
        FUN_00406460(L"IDS_PREMIUM_ENDTIME_POCKET");
        local_8._0_1_ = 3;
        uVar1 = FUN_0081d120(local_64);
        local_8._0_1_ = 4;
        FUN_00405eb0(uVar1,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,3);
        if (7 < local_bc) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_4c = 7;
        local_50 = 0;
        local_60 = 0;
        break;
      case '\t':
        FUN_00406460(L"IDS_CRISTMAS_EVENTMAIL_CONTENTS");
        local_8._0_1_ = 5;
        uVar1 = FUN_0081d120(local_48);
        local_8._0_1_ = 6;
        FUN_00405eb0(uVar1,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,5);
        if (7 < local_a0) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_30 = 7;
        local_34 = 0;
        local_44 = 0;
        break;
      default:
        _Str1 = param_3;
        if (in_stack_00000020 < 8) {
          _Str1 = (wchar_t *)&param_3;
        }
        iVar2 = _wcsncmp(_Str1,L"$auction_",9);
        if (iVar2 == 0) {
          FUN_008e9590(&param_2);
        }
        FUN_00405eb0(&param_2,0,0xffffffff);
        break;
      case 'j':
        FUN_00406460(L"IDS_GM_ALLIENCE_REWARD_CONTENTS");
        local_8._0_1_ = 7;
        uVar1 = FUN_0081d120(local_2c);
        local_8._0_1_ = 8;
        FUN_00405eb0(uVar1,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,7);
        if (7 < local_d8) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_14 = 7;
        local_18 = 0;
        local_28 = 0;
      }
      goto LAB_008ea174;
    }
    piVar3 = piVar3 + 1;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
008ea120 : PUSH EBP
008ea121 : MOV EBP,ESP
008ea123 : PUSH -0x1
008ea125 : PUSH 0xb4a3df
008ea12a : MOV EAX,FS:[0x0]
008ea130 : PUSH EAX
008ea131 : SUB ESP,0xe4
008ea137 : PUSH EBX
008ea138 : PUSH ESI
008ea139 : PUSH EDI
008ea13a : MOV EAX,[0x00d66fa0]
008ea13f : XOR EAX,EBP
008ea141 : PUSH EAX
008ea142 : LEA EAX,[EBP + -0xc]
008ea145 : MOV FS:[0x0],EAX
008ea14b : MOV dword ptr [EBP + -0x4],0x0
008ea152 : MOV ESI,dword ptr [ECX + 0x58]
008ea155 : MOV EAX,dword ptr [ECX + 0x5c]
008ea158 : CMP ESI,EAX
008ea15a : JZ 0x008ea16d
008ea15c : MOV EDX,dword ptr [EBP + 0x8]
008ea15f : NOP
008ea160 : MOV EDI,dword ptr [ESI]
008ea162 : CMP dword ptr [EDI],EDX
008ea164 : JZ 0x008ea198
008ea166 : ADD ESI,0x4
008ea169 : CMP ESI,EAX
008ea16b : JNZ 0x008ea160
008ea16d : MOV EDX,dword ptr [ECX]
008ea16f : MOV EAX,dword ptr [EDX + 0x24]
008ea172 : CALL EAX
008ea174 : MOV dword ptr [EBP + -0x4],0xffffffff
008ea17b : LEA ECX,[EBP + 0x8]
008ea17e : PUSH ECX
008ea17f : CALL 0x004427d0
008ea184 : MOV ECX,dword ptr [EBP + -0xc]
008ea187 : MOV dword ptr FS:[0x0],ECX
008ea18e : POP ECX
008ea18f : POP EDI
008ea190 : POP ESI
008ea191 : POP EBX
008ea192 : MOV ESP,EBP
008ea194 : POP EBP
008ea195 : RET 0x20
008ea198 : MOV EAX,EDI
008ea19a : MOVZX EAX,byte ptr [EAX + 0x80]
008ea1a1 : ADD EAX,-0x7
008ea1a4 : CMP EAX,0x63
008ea1a7 : JA 0x008ea407
008ea1ad : MOVZX ECX,byte ptr [EAX + 0x8ea464]
008ea1b4 : JMP dword ptr [ECX*0x4 + 0x8ea450]
008ea1bb : PUSH 0xc5ad34
008ea1c0 : LEA ECX,[EBP + -0x7c]
008ea1c3 : CALL 0x00406460
008ea1c8 : MOV BL,0x1
008ea1ca : MOV byte ptr [EBP + -0x4],BL
008ea1cd : MOV ECX,dword ptr [0x0172491c]
008ea1d3 : LEA EDX,[EBP + -0x7c]
008ea1d6 : PUSH EDX
008ea1d7 : LEA EDI,[EBP + 0xffffff68]
008ea1dd : CALL 0x0081d120
008ea1e2 : MOV byte ptr [EBP + -0x4],0x2
008ea1e6 : MOV ECX,dword ptr [ESI]
008ea1e8 : PUSH -0x1
008ea1ea : PUSH 0x0
008ea1ec : ADD ECX,0x84
008ea1f2 : PUSH EAX
008ea1f3 : CALL 0x00405eb0
008ea1f8 : MOV byte ptr [EBP + -0x4],BL
008ea1fb : MOV EBX,0x8
008ea200 : CMP dword ptr [EBP + -0x80],EBX
008ea203 : JC 0x008ea210
008ea205 : MOV ECX,dword ptr [EBP + 0xffffff6c]
008ea20b : CALL 0x006f04e0
008ea210 : XOR EAX,EAX
008ea212 : MOV ESI,0x7
008ea217 : XOR EDI,EDI
008ea219 : MOV dword ptr [EBP + -0x80],ESI
008ea21c : MOV dword ptr [EBP + 0xffffff7c],EDI
008ea222 : MOV word ptr [EBP + 0xffffff6c],AX
008ea229 : MOV byte ptr [EBP + -0x4],AL
008ea22c : CMP dword ptr [EBP + -0x64],EBX
008ea22f : JC 0x008ea239
008ea231 : MOV ECX,dword ptr [EBP + -0x78]
008ea234 : CALL 0x006f04e0
008ea239 : XOR ECX,ECX
008ea23b : MOV dword ptr [EBP + -0x64],ESI
008ea23e : MOV dword ptr [EBP + -0x68],EDI
008ea241 : MOV word ptr [EBP + -0x78],CX
008ea245 : JMP 0x008ea174
008ea24a : PUSH 0xc5ad6c
008ea24f : LEA ECX,[EBP + -0x60]
008ea252 : CALL 0x00406460
008ea257 : MOV BL,0x3
008ea259 : MOV byte ptr [EBP + -0x4],BL
008ea25c : MOV ECX,dword ptr [0x0172491c]
008ea262 : LEA EDX,[EBP + -0x60]
008ea265 : PUSH EDX
008ea266 : LEA EDI,[EBP + 0xffffff30]
008ea26c : CALL 0x0081d120
008ea271 : MOV byte ptr [EBP + -0x4],0x4
008ea275 : MOV ECX,dword ptr [ESI]
008ea277 : PUSH -0x1
008ea279 : PUSH 0x0
008ea27b : ADD ECX,0x84
008ea281 : PUSH EAX
008ea282 : CALL 0x00405eb0
008ea287 : MOV byte ptr [EBP + -0x4],BL
008ea28a : MOV EBX,0x8
008ea28f : CMP dword ptr [EBP + 0xffffff48],EBX
008ea295 : JC 0x008ea2a2
008ea297 : MOV ECX,dword ptr [EBP + 0xffffff34]
008ea29d : CALL 0x006f04e0
008ea2a2 : XOR EAX,EAX
008ea2a4 : MOV ESI,0x7
008ea2a9 : XOR EDI,EDI
008ea2ab : MOV dword ptr [EBP + 0xffffff48],ESI
008ea2b1 : MOV dword ptr [EBP + 0xffffff44],EDI
008ea2b7 : MOV word ptr [EBP + 0xffffff34],AX
008ea2be : MOV byte ptr [EBP + -0x4],AL
008ea2c1 : CMP dword ptr [EBP + -0x48],EBX
008ea2c4 : JC 0x008ea2ce
008ea2c6 : MOV ECX,dword ptr [EBP + -0x5c]
008ea2c9 : CALL 0x006f04e0
008ea2ce : XOR ECX,ECX
008ea2d0 : MOV dword ptr [EBP + -0x48],ESI
008ea2d3 : MOV dword ptr [EBP + -0x4c],EDI
008ea2d6 : MOV word ptr [EBP + -0x5c],CX
008ea2da : JMP 0x008ea174
008ea2df : PUSH 0xc5ada8
008ea2e4 : LEA ECX,[EBP + -0x44]
008ea2e7 : CALL 0x00406460
008ea2ec : MOV BL,0x5
008ea2ee : MOV byte ptr [EBP + -0x4],BL
008ea2f1 : MOV ECX,dword ptr [0x0172491c]
008ea2f7 : LEA EDX,[EBP + -0x44]
008ea2fa : PUSH EDX
008ea2fb : LEA EDI,[EBP + 0xffffff4c]
008ea301 : CALL 0x0081d120
008ea306 : MOV byte ptr [EBP + -0x4],0x6
008ea30a : MOV ECX,dword ptr [ESI]
008ea30c : PUSH -0x1
008ea30e : PUSH 0x0
008ea310 : ADD ECX,0x84
008ea316 : PUSH EAX
008ea317 : CALL 0x00405eb0
008ea31c : MOV byte ptr [EBP + -0x4],BL
008ea31f : MOV EBX,0x8
008ea324 : CMP dword ptr [EBP + 0xffffff64],EBX
008ea32a : JC 0x008ea337
008ea32c : MOV ECX,dword ptr [EBP + 0xffffff50]
008ea332 : CALL 0x006f04e0
008ea337 : XOR EAX,EAX
008ea339 : MOV ESI,0x7
008ea33e : XOR EDI,EDI
008ea340 : MOV dword ptr [EBP + 0xffffff64],ESI
008ea346 : MOV dword ptr [EBP + 0xffffff60],EDI
008ea34c : MOV word ptr [EBP + 0xffffff50],AX
008ea353 : MOV byte ptr [EBP + -0x4],AL
008ea356 : CMP dword ptr [EBP + -0x2c],EBX
008ea359 : JC 0x008ea363
008ea35b : MOV ECX,dword ptr [EBP + -0x40]
008ea35e : CALL 0x006f04e0
008ea363 : XOR ECX,ECX
008ea365 : MOV dword ptr [EBP + -0x2c],ESI
008ea368 : MOV dword ptr [EBP + -0x30],EDI
008ea36b : MOV word ptr [EBP + -0x40],CX
008ea36f : JMP 0x008ea174
008ea374 : PUSH 0xc5ade8
008ea379 : LEA ECX,[EBP + -0x28]
008ea37c : CALL 0x00406460
008ea381 : MOV byte ptr [EBP + -0x4],0x7
008ea385 : MOV ECX,dword ptr [0x0172491c]
008ea38b : LEA EDX,[EBP + -0x28]
008ea38e : PUSH EDX
008ea38f : LEA EDI,[EBP + 0xffffff14]
008ea395 : CALL 0x0081d120
008ea39a : MOV EBX,0x8
008ea39f : MOV byte ptr [EBP + -0x4],BL
008ea3a2 : MOV ECX,dword ptr [ESI]
008ea3a4 : PUSH -0x1
008ea3a6 : XOR EDI,EDI
008ea3a8 : PUSH EDI
008ea3a9 : ADD ECX,0x84
008ea3af : PUSH EAX
008ea3b0 : CALL 0x00405eb0
008ea3b5 : MOV byte ptr [EBP + -0x4],0x7
008ea3b9 : CMP dword ptr [EBP + 0xffffff2c],EBX
008ea3bf : JC 0x008ea3cc
008ea3c1 : MOV ECX,dword ptr [EBP + 0xffffff18]
008ea3c7 : CALL 0x006f04e0
008ea3cc : XOR EAX,EAX
008ea3ce : MOV ESI,0x7
008ea3d3 : MOV dword ptr [EBP + 0xffffff2c],ESI
008ea3d9 : MOV dword ptr [EBP + 0xffffff28],EDI
008ea3df : MOV word ptr [EBP + 0xffffff18],AX
008ea3e6 : MOV byte ptr [EBP + -0x4],AL
008ea3e9 : CMP dword ptr [EBP + -0x10],EBX
008ea3ec : JC 0x008ea3f6
008ea3ee : MOV ECX,dword ptr [EBP + -0x24]
008ea3f1 : CALL 0x006f04e0
008ea3f6 : XOR ECX,ECX
008ea3f8 : MOV dword ptr [EBP + -0x10],ESI
008ea3fb : MOV dword ptr [EBP + -0x14],EDI
008ea3fe : MOV word ptr [EBP + -0x24],CX
008ea402 : JMP 0x008ea174
008ea407 : CMP dword ptr [EBP + 0x24],0x8
008ea40b : MOV EAX,dword ptr [EBP + 0x10]
008ea40e : JNC 0x008ea413
008ea410 : LEA EAX,[EBP + 0x10]
008ea413 : PUSH 0x9
008ea415 : PUSH 0xc5ae28
008ea41a : PUSH EAX
008ea41b : CALL 0x006380ac
008ea420 : ADD ESP,0xc
008ea423 : TEST EAX,EAX
008ea425 : JNZ 0x008ea433
008ea427 : LEA EDX,[EBP + 0xc]
008ea42a : PUSH EDX
008ea42b : CALL 0x008e9590
008ea430 : ADD ESP,0x4
008ea433 : MOV ESI,dword ptr [ESI]
008ea435 : PUSH -0x1
008ea437 : ADD ESI,0x84
008ea43d : PUSH 0x0
008ea43f : LEA EAX,[EBP + 0xc]
008ea442 : PUSH EAX
008ea443 : MOV ECX,ESI
008ea445 : CALL 0x00405eb0
008ea44a : JMP 0x008ea174
