PROGRAM  : Maestia.exe
FUNCTION : FUN_00935470
ENTRY    : 00935470
BODY     : [[00935470, 00935592]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00935470(undefined4 param_1,undefined4 *param_2)

{
  SHORT SVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int in_ECX;
  undefined4 in_stack_00000018;
  uint in_stack_0000001c;
  char in_stack_00000020;
  uint uVar5;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b68cb9;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_8 = 0;
  uVar5 = uVar2;
  puVar3 = (undefined4 *)FUN_008462f0(&param_1);
  if (puVar3 == (undefined4 *)0x0) {
    local_8 = 0xffffffff;
    if (7 < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    SVar1 = GetKeyState(0x11);
    if (SVar1 < 0) {
      puVar4 = param_2;
      if (in_stack_0000001c < 8) {
        puVar4 = &param_2;
      }
      FUN_00404750(L"{type=4^name=%s^key=%u}",puVar4,*puVar3,uVar5);
      local_8._0_1_ = 1;
      FUN_009ad950();
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      if (in_stack_00000020 != '\0') {
        *(undefined4 *)(in_ECX + 0x38) = *puVar3;
      }
      FUN_009351b0(in_ECX,10);
    }
    local_8 = 0xffffffff;
    if (7 < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8 = 0xffffffff;
  param_2 = (undefined4 *)((uint)param_2 & 0xffff0000);
  in_stack_00000018 = 0;
  in_stack_0000001c = 7;
  ExceptionList = local_10;
  __security_check_cookie(uVar2 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00935470 : PUSH EBP
00935471 : MOV EBP,ESP
00935473 : PUSH -0x1
00935475 : PUSH 0xb68cb9
0093547a : MOV EAX,FS:[0x0]
00935480 : PUSH EAX
00935481 : SUB ESP,0x24
00935484 : MOV EAX,[0x00d66fa0]
00935489 : XOR EAX,EBP
0093548b : MOV dword ptr [EBP + -0x10],EAX
0093548e : PUSH EBX
0093548f : PUSH ESI
00935490 : PUSH EDI
00935491 : PUSH EAX
00935492 : LEA EAX,[EBP + -0xc]
00935495 : MOV FS:[0x0],EAX
0093549b : MOV EDI,ECX
0093549d : XOR EBX,EBX
0093549f : MOV dword ptr [EBP + -0x4],EBX
009354a2 : MOV ECX,dword ptr [0x017248f8]
009354a8 : LEA EAX,[EBP + 0x8]
009354ab : PUSH EAX
009354ac : MOV EAX,dword ptr [ECX + 0x1c]
009354af : CALL 0x008462f0
009354b4 : MOV ESI,EAX
009354b6 : CMP ESI,EBX
009354b8 : JNZ 0x009354da
009354ba : MOV dword ptr [EBP + -0x4],0xffffffff
009354c1 : CMP dword ptr [EBP + 0x20],0x8
009354c5 : JC 0x009354cf
009354c7 : MOV ECX,dword ptr [EBP + 0xc]
009354ca : CALL 0x006f04e0
009354cf : XOR EDX,EDX
009354d1 : MOV word ptr [EBP + 0xc],DX
009354d5 : JMP 0x0093556b
009354da : PUSH 0x11
009354dc : CALL dword ptr [0x00b85438]
009354e2 : TEST AX,AX
009354e5 : JGE 0x00935538
009354e7 : MOV EAX,dword ptr [EBP + 0xc]
009354ea : MOV EDI,0x8
009354ef : CMP dword ptr [EBP + 0x20],EDI
009354f2 : JNC 0x009354f7
009354f4 : LEA EAX,[EBP + 0xc]
009354f7 : MOV ECX,dword ptr [ESI]
009354f9 : PUSH ECX
009354fa : PUSH EAX
009354fb : PUSH 0xc6eab8
00935500 : LEA ESI,[EBP + -0x2c]
00935503 : CALL 0x00404750
00935508 : ADD ESP,0xc
0093550b : MOV byte ptr [EBP + -0x4],0x1
0093550f : MOV ECX,ESI
00935511 : CALL 0x009ad950
00935516 : MOV byte ptr [EBP + -0x4],BL
00935519 : CMP dword ptr [EBP + -0x14],EDI
0093551c : JC 0x00935526
0093551e : MOV ECX,dword ptr [EBP + -0x28]
00935521 : CALL 0x006f04e0
00935526 : XOR EDX,EDX
00935528 : MOV dword ptr [EBP + -0x14],0x7
0093552f : MOV dword ptr [EBP + -0x18],EBX
00935532 : MOV word ptr [EBP + -0x28],DX
00935536 : JMP 0x00935551
00935538 : CMP byte ptr [EBP + 0x24],BL
0093553b : JZ 0x00935542
0093553d : MOV EAX,dword ptr [ESI]
0093553f : MOV dword ptr [EDI + 0x38],EAX
00935542 : PUSH 0xa
00935544 : PUSH EDI
00935545 : MOV EAX,ESI
00935547 : CALL 0x009351b0
0093554c : MOV EDI,0x8
00935551 : MOV dword ptr [EBP + -0x4],0xffffffff
00935558 : CMP dword ptr [EBP + 0x20],EDI
0093555b : JC 0x00935565
0093555d : MOV ECX,dword ptr [EBP + 0xc]
00935560 : CALL 0x006f04e0
00935565 : XOR EAX,EAX
00935567 : MOV word ptr [EBP + 0xc],AX
0093556b : MOV dword ptr [EBP + 0x1c],EBX
0093556e : MOV dword ptr [EBP + 0x20],0x7
00935575 : MOV ECX,dword ptr [EBP + -0xc]
00935578 : MOV dword ptr FS:[0x0],ECX
0093557f : POP ECX
00935580 : POP EDI
00935581 : POP ESI
00935582 : POP EBX
00935583 : MOV ECX,dword ptr [EBP + -0x10]
00935586 : XOR ECX,EBP
00935588 : CALL 0x00633e6b
0093558d : MOV ESP,EBP
0093558f : POP EBP
00935590 : RET 0x20
