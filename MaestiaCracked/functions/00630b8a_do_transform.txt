PROGRAM  : Maestia.exe
FUNCTION : do_transform
ENTRY    : 00630b8a
BODY     : [[00630b8a, 00630c34]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    protected: virtual class std::basic_string<char,struct std::char_traits<char>,class
   std::allocator<char> > __thiscall std::collate<char>::do_transform(char const *,char const
   *)const 
   
   Library: Visual Studio 2008 Release */

char * __thiscall std::collate<char>::do_transform(collate<char> *this,char *param_1,char *param_2)

{
  int iVar1;
  int iVar2;
  char *_String1;
  uint uVar3;
  char *in_stack_0000000c;
  undefined1 local_34 [8];
  undefined1 local_2c [8];
  char *local_24;
  undefined4 local_20;
  char *local_1c;
  char *local_18;
  _Collvec *local_14;
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x24;
  local_8 = 0x630b96;
  local_20 = 0;
  local_24 = param_1;
  local_18 = param_2;
  local_1c = in_stack_0000000c;
  local_14 = (_Collvec *)this;
  FUN_0040eea0();
  local_8 = 0;
  local_20 = 1;
  uVar3 = 0;
  if ((int)in_stack_0000000c - (int)param_2 != 0) {
    local_14 = local_14 + 1;
    uVar3 = (int)in_stack_0000000c - (int)param_2;
    do {
      basic_string<char,struct_std::char_traits<char>,class_std::allocator<char>_>::resize
                ((basic_string<char,struct_std::char_traits<char>,class_std::allocator<char>_> *)
                 param_1,uVar3,'\0');
      FUN_00438b10(local_2c);
      iVar2 = FUN_00412cf0();
      iVar1 = *(int *)(param_1 + 0x14);
      FUN_00438b10(local_34);
      _String1 = (char *)FUN_00412cf0();
      uVar3 = __Strxfrm(_String1,(char *)(iVar1 + iVar2),local_18,local_1c,local_14);
      if (uVar3 <= *(uint *)(param_1 + 0x14)) break;
    } while (uVar3 != 0);
  }
  basic_string<char,struct_std::char_traits<char>,class_std::allocator<char>_>::resize
            ((basic_string<char,struct_std::char_traits<char>,class_std::allocator<char>_> *)param_1
             ,uVar3,'\0');
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00630b8a : PUSH 0x24
00630b8c : MOV EAX,0xb0c197
00630b91 : CALL 0x00640e1d
00630b96 : MOV ESI,dword ptr [EBP + 0x8]
00630b99 : MOV EDI,dword ptr [EBP + 0xc]
00630b9c : MOV EBX,dword ptr [EBP + 0x10]
00630b9f : AND dword ptr [EBP + -0x1c],0x0
00630ba3 : MOV dword ptr [EBP + -0x10],ECX
00630ba6 : MOV ECX,ESI
00630ba8 : MOV dword ptr [EBP + -0x20],ESI
00630bab : MOV dword ptr [EBP + -0x14],EDI
00630bae : MOV dword ptr [EBP + -0x18],EBX
00630bb1 : CALL 0x0040eea0
00630bb6 : AND dword ptr [EBP + -0x4],0x0
00630bba : MOV EAX,EBX
00630bbc : SUB EAX,EDI
00630bbe : MOV dword ptr [EBP + -0x1c],0x1
00630bc5 : JZ 0x00630c21
00630bc7 : MOV ECX,dword ptr [EBP + -0x10]
00630bca : ADD ECX,0x8
00630bcd : MOV dword ptr [EBP + -0x10],ECX
00630bd0 : PUSH 0x0
00630bd2 : PUSH EAX
00630bd3 : MOV ECX,ESI
00630bd5 : CALL 0x00630994
00630bda : LEA EAX,[EBP + -0x28]
00630bdd : PUSH EAX
00630bde : MOV ECX,ESI
00630be0 : CALL 0x00438b10
00630be5 : MOV ECX,EAX
00630be7 : CALL 0x00412cf0
00630bec : MOV EDI,dword ptr [ESI + 0x14]
00630bef : MOV EBX,EAX
00630bf1 : LEA EAX,[EBP + -0x30]
00630bf4 : PUSH EAX
00630bf5 : MOV ECX,ESI
00630bf7 : CALL 0x00438b10
00630bfc : MOV ECX,EAX
00630bfe : CALL 0x00412cf0
00630c03 : PUSH dword ptr [EBP + -0x10]
00630c06 : ADD EDI,EBX
00630c08 : PUSH dword ptr [EBP + -0x18]
00630c0b : PUSH dword ptr [EBP + -0x14]
00630c0e : PUSH EDI
00630c0f : PUSH EAX
00630c10 : CALL 0x00633dbf
00630c15 : ADD ESP,0x14
00630c18 : CMP EAX,dword ptr [ESI + 0x14]
00630c1b : JBE 0x00630c21
00630c1d : TEST EAX,EAX
00630c1f : JA 0x00630bd0
00630c21 : PUSH 0x0
00630c23 : PUSH EAX
00630c24 : MOV ECX,ESI
00630c26 : CALL 0x00630994
00630c2b : MOV EAX,ESI
00630c2d : CALL 0x00640ebc
00630c32 : RET 0xc
