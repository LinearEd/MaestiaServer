PROGRAM  : Maestia.exe
FUNCTION : FUN_0084cc30
ENTRY    : 0084cc30
BODY     : [[0084cc30, 0084cdab] [0084cdb0, 0084cea9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0084cc30(char param_1)

{
  int *piVar1;
  code *pcVar2;
  uint uVar3;
  int in_ECX;
  int iVar4;
  int *piVar5;
  int iVar6;
  undefined4 uVar7;
  undefined1 local_30 [24];
  uint local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1b96b;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(char *)(in_ECX + 0x2c) = param_1;
  if (*(char *)(in_ECX + 0x54) != '\0') {
    iVar4 = *(int *)(in_ECX + 8);
    if (iVar4 == 0) {
      FUN_00406460(L"m_pPlayer");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaPlayerPart::UpdateVisibleState",0x1bb,local_30);
      }
      local_8 = 0xffffffff;
      if (local_18 < 8) {
        ExceptionList = local_10;
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (*(int *)(iVar4 + 0x140) != 0x12345679) {
      FUN_00406460(L"dangling pointer");
      local_8 = 1;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaPlayerPart::UpdateVisibleState",0x1c1,local_30);
      }
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
    if (*(int *)(iVar4 + 1000) == 0) {
      FUN_00406460(L"CharNode NULL");
      local_8 = 2;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaPlayerPart::UpdateVisibleState",0x1c7,local_30);
      }
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
    piVar5 = (int *)(in_ECX + 0x58);
    iVar4 = 2;
    local_14 = in_ECX;
    do {
      piVar1 = (int *)*piVar5;
      if (piVar1 != (int *)0x0) {
        if (piVar1 == (int *)(*(int **)(in_ECX + 8))[0xfa]) {
          pcVar2 = *(code **)(**(int **)(in_ECX + 8) + 0x278);
          if (param_1 == '\0') {
            (*pcVar2)(1,0x80,0);
          }
          else {
            (*pcVar2)(0,0xff,0);
          }
        }
        else {
          if (param_1 == '\0') {
            uVar7 = 0x80;
          }
          else {
            uVar7 = 0xff;
          }
          (**(code **)(*piVar1 + 0x114))(param_1 == '\0',uVar7,uVar3);
        }
      }
      piVar5 = piVar5 + 1;
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
    iVar4 = 0;
    piVar5 = (int *)(in_ECX + 0x58);
    do {
      piVar1 = (int *)*piVar5;
      if (piVar1 != (int *)0x0) {
        if (piVar1 == *(int **)(*(int *)(in_ECX + 8) + 1000)) {
          FUN_00889ad0(*(undefined1 *)(iVar4 + 0x148 + in_ECX),0);
          in_ECX = local_14;
        }
        else {
          (**(code **)(*piVar1 + 0x120))(*(undefined1 *)(iVar4 + 0x148 + in_ECX),0);
        }
      }
      iVar4 = iVar4 + 1;
      piVar5 = piVar5 + 1;
    } while (iVar4 < 2);
    iVar4 = 0;
    iVar6 = *(int *)(in_ECX + 0x4c) - *(int *)(in_ECX + 0x48) >> 2;
    if (0 < iVar6) {
      do {
        if ((*(int *)(*(int *)(in_ECX + 0x48) + iVar4 * 4) != 0) &&
           (piVar5 = *(int **)(*(int *)(*(int *)(in_ECX + 0x48) + iVar4 * 4) + 0x14),
           piVar5 != (int *)0x0)) {
          (**(code **)(*piVar5 + 0x120))(*(undefined1 *)(in_ECX + 0x148),0);
        }
        iVar4 = iVar4 + 1;
      } while (iVar4 < iVar6);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0084cc30 : PUSH EBP
0084cc31 : MOV EBP,ESP
0084cc33 : PUSH -0x1
0084cc35 : PUSH 0xb1b96b
0084cc3a : MOV EAX,FS:[0x0]
0084cc40 : PUSH EAX
0084cc41 : SUB ESP,0x20
0084cc44 : PUSH EBX
0084cc45 : PUSH ESI
0084cc46 : PUSH EDI
0084cc47 : MOV EAX,[0x00d66fa0]
0084cc4c : XOR EAX,EBP
0084cc4e : PUSH EAX
0084cc4f : LEA EAX,[EBP + -0xc]
0084cc52 : MOV FS:[0x0],EAX
0084cc58 : MOV ESI,ECX
0084cc5a : MOV dword ptr [EBP + -0x10],ESI
0084cc5d : CMP byte ptr [ESI + 0x54],0x0
0084cc61 : MOV DL,byte ptr [EBP + 0x8]
0084cc64 : MOV byte ptr [ESI + 0x2c],DL
0084cc67 : JZ 0x0084ce96
0084cc6d : MOV EAX,dword ptr [ESI + 0x8]
0084cc70 : XOR EDI,EDI
0084cc72 : CMP EAX,EDI
0084cc74 : JNZ 0x0084ccdf
0084cc76 : PUSH 0xc3cbdc
0084cc7b : LEA ECX,[EBP + -0x2c]
0084cc7e : CALL 0x00406460
0084cc83 : MOV dword ptr [EBP + -0x4],EDI
0084cc86 : MOV EAX,[0x00da98e8]
0084cc8b : MOV ECX,dword ptr [EAX]
0084cc8d : CMP ECX,EDI
0084cc8f : JZ 0x0084cca6
0084cc91 : MOV EDX,dword ptr [ECX]
0084cc93 : MOV EDX,dword ptr [EDX + 0x14]
0084cc96 : LEA EAX,[EBP + -0x2c]
0084cc99 : PUSH EAX
0084cc9a : PUSH 0x1bb
0084cc9f : PUSH 0xc3cbf0
0084cca4 : CALL EDX
0084cca6 : MOV dword ptr [EBP + -0x4],0xffffffff
0084ccad : CMP dword ptr [EBP + -0x14],0x8
0084ccb1 : JC 0x0084ccbb
0084ccb3 : MOV ECX,dword ptr [EBP + -0x28]
0084ccb6 : CALL 0x006f04e0
0084ccbb : XOR EAX,EAX
0084ccbd : MOV dword ptr [EBP + -0x14],0x7
0084ccc4 : MOV dword ptr [EBP + -0x18],EDI
0084ccc7 : MOV word ptr [EBP + -0x28],AX
0084cccb : MOV ECX,dword ptr [EBP + -0xc]
0084ccce : MOV dword ptr FS:[0x0],ECX
0084ccd5 : POP ECX
0084ccd6 : POP EDI
0084ccd7 : POP ESI
0084ccd8 : POP EBX
0084ccd9 : MOV ESP,EBP
0084ccdb : POP EBP
0084ccdc : RET 0x4
0084ccdf : CMP dword ptr [EAX + 0x140],0x12345679
0084cce9 : JZ 0x0084cd43
0084cceb : PUSH 0xc3cc34
0084ccf0 : LEA ECX,[EBP + -0x2c]
0084ccf3 : CALL 0x00406460
0084ccf8 : MOV dword ptr [EBP + -0x4],0x1
0084ccff : MOV ECX,dword ptr [0x00da98e8]
0084cd05 : MOV ECX,dword ptr [ECX]
0084cd07 : CMP ECX,EDI
0084cd09 : JZ 0x0084cd20
0084cd0b : MOV EDX,dword ptr [ECX]
0084cd0d : MOV EDX,dword ptr [EDX + 0x14]
0084cd10 : LEA EAX,[EBP + -0x2c]
0084cd13 : PUSH EAX
0084cd14 : PUSH 0x1c1
0084cd19 : PUSH 0xc3cc58
0084cd1e : CALL EDX
0084cd20 : MOV dword ptr [EBP + -0x4],0xffffffff
0084cd27 : LEA ECX,[EBP + -0x2c]
0084cd2a : CALL 0x00406560
0084cd2f : MOV ECX,dword ptr [EBP + -0xc]
0084cd32 : MOV dword ptr FS:[0x0],ECX
0084cd39 : POP ECX
0084cd3a : POP EDI
0084cd3b : POP ESI
0084cd3c : POP EBX
0084cd3d : MOV ESP,EBP
0084cd3f : POP EBP
0084cd40 : RET 0x4
0084cd43 : CMP dword ptr [EAX + 0x3e8],EDI
0084cd49 : JNZ 0x0084cda2
0084cd4b : PUSH 0xc3cc9c
0084cd50 : LEA ECX,[EBP + -0x2c]
0084cd53 : CALL 0x00406460
0084cd58 : MOV dword ptr [EBP + -0x4],0x2
0084cd5f : MOV EAX,[0x00da98e8]
0084cd64 : MOV ECX,dword ptr [EAX]
0084cd66 : CMP ECX,EDI
0084cd68 : JZ 0x0084cd7f
0084cd6a : MOV EDX,dword ptr [ECX]
0084cd6c : MOV EDX,dword ptr [EDX + 0x14]
0084cd6f : LEA EAX,[EBP + -0x2c]
0084cd72 : PUSH EAX
0084cd73 : PUSH 0x1c7
0084cd78 : PUSH 0xc3ccb8
0084cd7d : CALL EDX
0084cd7f : MOV dword ptr [EBP + -0x4],0xffffffff
0084cd86 : LEA ECX,[EBP + -0x2c]
0084cd89 : CALL 0x00406560
0084cd8e : MOV ECX,dword ptr [EBP + -0xc]
0084cd91 : MOV dword ptr FS:[0x0],ECX
0084cd98 : POP ECX
0084cd99 : POP EDI
0084cd9a : POP ESI
0084cd9b : POP EBX
0084cd9c : MOV ESP,EBP
0084cd9e : POP EBP
0084cd9f : RET 0x4
0084cda2 : LEA EDI,[ESI + 0x58]
0084cda5 : MOV EBX,0x2
0084cdaa : JMP 0x0084cdb3
0084cdb0 : MOV DL,byte ptr [EBP + 0x8]
0084cdb3 : MOV EAX,dword ptr [EDI]
0084cdb5 : TEST EAX,EAX
0084cdb7 : JZ 0x0084ce08
0084cdb9 : MOV ECX,dword ptr [ESI + 0x8]
0084cdbc : CMP EAX,dword ptr [ECX + 0x3e8]
0084cdc2 : JNZ 0x0084cde8
0084cdc4 : MOV EAX,dword ptr [ECX]
0084cdc6 : TEST DL,DL
0084cdc8 : MOV EDX,dword ptr [EAX + 0x278]
0084cdce : PUSH 0x0
0084cdd0 : JZ 0x0084cddd
0084cdd2 : PUSH 0xff
0084cdd7 : PUSH 0x0
0084cdd9 : CALL EDX
0084cddb : JMP 0x0084ce08
0084cddd : PUSH 0x80
0084cde2 : PUSH 0x1
0084cde4 : CALL EDX
0084cde6 : JMP 0x0084ce08
0084cde8 : MOV ECX,EAX
0084cdea : MOV EAX,dword ptr [ECX]
0084cdec : TEST DL,DL
0084cdee : MOV EDX,dword ptr [EAX + 0x114]
0084cdf4 : JZ 0x0084cdff
0084cdf6 : PUSH 0xff
0084cdfb : PUSH 0x0
0084cdfd : JMP 0x0084ce06
0084cdff : PUSH 0x80
0084ce04 : PUSH 0x1
0084ce06 : CALL EDX
0084ce08 : ADD EDI,0x4
0084ce0b : SUB EBX,0x1
0084ce0e : JNZ 0x0084cdb0
0084ce10 : XOR EDI,EDI
0084ce12 : LEA EBX,[ESI + 0x58]
0084ce15 : MOV ECX,dword ptr [EBX]
0084ce17 : TEST ECX,ECX
0084ce19 : JZ 0x0084ce50
0084ce1b : MOV EAX,dword ptr [ESI + 0x8]
0084ce1e : PUSH 0x0
0084ce20 : CMP ECX,dword ptr [EAX + 0x3e8]
0084ce26 : JNZ 0x0084ce3d
0084ce28 : MOVZX ECX,byte ptr [EDI + ESI*0x1 + 0x148]
0084ce30 : PUSH ECX
0084ce31 : MOV ESI,EAX
0084ce33 : CALL 0x00889ad0
0084ce38 : MOV ESI,dword ptr [EBP + -0x10]
0084ce3b : JMP 0x0084ce50
0084ce3d : MOVZX EAX,byte ptr [EDI + ESI*0x1 + 0x148]
0084ce45 : MOV EDX,dword ptr [ECX]
0084ce47 : MOV EDX,dword ptr [EDX + 0x120]
0084ce4d : PUSH EAX
0084ce4e : CALL EDX
0084ce50 : INC EDI
0084ce51 : ADD EBX,0x4
0084ce54 : CMP EDI,0x2
0084ce57 : JL 0x0084ce15
0084ce59 : MOV EDI,dword ptr [ESI + 0x4c]
0084ce5c : SUB EDI,dword ptr [ESI + 0x48]
0084ce5f : XOR EBX,EBX
0084ce61 : SAR EDI,0x2
0084ce64 : TEST EDI,EDI
0084ce66 : JLE 0x0084ce96
0084ce68 : MOV EAX,dword ptr [ESI + 0x48]
0084ce6b : CMP dword ptr [EAX + EBX*0x4],0x0
0084ce6f : LEA EAX,[EAX + EBX*0x4]
0084ce72 : JZ 0x0084ce91
0084ce74 : MOV ECX,dword ptr [EAX]
0084ce76 : MOV ECX,dword ptr [ECX + 0x14]
0084ce79 : TEST ECX,ECX
0084ce7b : JZ 0x0084ce91
0084ce7d : MOVZX EAX,byte ptr [ESI + 0x148]
0084ce84 : MOV EDX,dword ptr [ECX]
0084ce86 : MOV EDX,dword ptr [EDX + 0x120]
0084ce8c : PUSH 0x0
0084ce8e : PUSH EAX
0084ce8f : CALL EDX
0084ce91 : INC EBX
0084ce92 : CMP EBX,EDI
0084ce94 : JL 0x0084ce68
0084ce96 : MOV ECX,dword ptr [EBP + -0xc]
0084ce99 : MOV dword ptr FS:[0x0],ECX
0084cea0 : POP ECX
0084cea1 : POP EDI
0084cea2 : POP ESI
0084cea3 : POP EBX
0084cea4 : MOV ESP,EBP
0084cea6 : POP EBP
0084cea7 : RET 0x4
