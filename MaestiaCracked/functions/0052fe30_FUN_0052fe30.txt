PROGRAM  : Maestia.exe
FUNCTION : FUN_0052fe30
ENTRY    : 0052fe30
BODY     : [[0052fe30, 0053001f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052fe30(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int *in_ECX;
  uint *puVar4;
  int local_48;
  int iStack_44;
  byte bStack_40;
  int local_3c;
  int iStack_38;
  byte bStack_34;
  char local_30 [48];
  
  FUN_005266c0(*(undefined4 *)(*in_ECX + 8));
  iVar2 = *in_ECX;
  if (*(uint *)(iVar2 + 0xc) < *(uint *)(iVar2 + 8)) {
    iVar2 = *(uint *)(iVar2 + 8) - 0x10;
  }
  else {
    iVar2 = *(int *)(iVar2 + 0x14);
  }
  FUN_005266c0(iVar2);
  FUN_00527140(&local_3c,*in_ECX);
  FUN_00527140(&local_48,*in_ECX);
  if ((local_3c != 0) && (local_48 != 0)) {
    local_30[0] = '\0';
    cVar1 = (**(code **)(*(int *)(local_3c + 0x10) + 0x2c))
                      ((int *)(*in_ECX + 0x78),*(int *)(*in_ECX + 0x78) + 0x130,local_30);
    if ((cVar1 != '\0') && (local_30[0] == '\x06')) {
      iVar2 = FUN_00526fa0(*in_ECX);
      if (iVar2 != 0) {
        *(uint *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1U & 0x8fffffff;
      }
      iVar3 = FUN_00515840(0x50,0);
      if (iVar3 == 0) {
        iVar3 = 0;
      }
      else {
        iVar3 = FUN_00552e50(*in_ECX + 0x78,iVar2);
      }
      FUN_00568300(*in_ECX + 0x78,iVar3);
      FUN_00529a70(*in_ECX + 0x78,&local_3c);
      if (iVar3 != 0) {
        FUN_00503db0();
      }
      if (iVar2 != 0) {
        FUN_00503db0();
      }
    }
    FUN_00526bc0();
  }
  iVar2 = *in_ECX;
  puVar4 = (uint *)(iVar2 + 8);
  if (*(int *)(iVar2 + 8) - 0x20U < *(uint *)(iVar2 + 0xc)) {
    iVar3 = 2;
    do {
      FUN_00526bc0();
      *puVar4 = *puVar4 - 0x10;
      if (*puVar4 < *(uint *)(iVar2 + 0xc)) {
        FUN_00504f30();
      }
      iVar3 = iVar3 + -1;
    } while (iVar3 != 0);
  }
  else {
    FUN_00526bc0();
    *puVar4 = *puVar4 - 0x10;
    FUN_00526bc0();
    *puVar4 = *puVar4 - 0x10;
  }
  if (((bStack_40 & 2) == 0) && (local_48 != 0)) {
    FUN_00503db0();
  }
  local_48 = 0;
  if (((bStack_40 & 1) == 0) && (iStack_44 != 0)) {
    FUN_00503db0();
  }
  iStack_44 = 0;
  if (((bStack_34 & 2) == 0) && (local_3c != 0)) {
    FUN_00503db0();
  }
  local_3c = 0;
  if (((bStack_34 & 1) == 0) && (iStack_38 != 0)) {
    FUN_00503db0();
  }
  iStack_38 = 0;
  FUN_00526bc0();
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
0052fe30 : SUB ESP,0x48
0052fe33 : PUSH EBX
0052fe34 : PUSH ESI
0052fe35 : MOV ESI,ECX
0052fe37 : MOV EAX,dword ptr [ESI]
0052fe39 : MOV ECX,dword ptr [EAX + 0x8]
0052fe3c : PUSH EDI
0052fe3d : PUSH ECX
0052fe3e : LEA ECX,[ESP + 0x48]
0052fe42 : CALL 0x005266c0
0052fe47 : MOV EAX,dword ptr [ESI]
0052fe49 : MOV ECX,dword ptr [EAX + 0x8]
0052fe4c : ADD EAX,0x8
0052fe4f : CMP ECX,dword ptr [EAX + 0x4]
0052fe52 : JBE 0x0052fe59
0052fe54 : LEA EAX,[ECX + -0x10]
0052fe57 : JMP 0x0052fe5c
0052fe59 : MOV EAX,dword ptr [EAX + 0xc]
0052fe5c : PUSH EAX
0052fe5d : LEA ECX,[ESP + 0x38]
0052fe61 : CALL 0x005266c0
0052fe66 : MOV EDX,dword ptr [ESI]
0052fe68 : PUSH EDX
0052fe69 : LEA EAX,[ESP + 0x1c]
0052fe6d : PUSH EAX
0052fe6e : LEA ECX,[ESP + 0x4c]
0052fe72 : CALL 0x00527140
0052fe77 : MOV ECX,dword ptr [ESI]
0052fe79 : PUSH ECX
0052fe7a : LEA EDX,[ESP + 0x10]
0052fe7e : PUSH EDX
0052fe7f : LEA ECX,[ESP + 0x3c]
0052fe83 : CALL 0x00527140
0052fe88 : MOV EAX,dword ptr [ESP + 0x18]
0052fe8c : XOR EBX,EBX
0052fe8e : CMP EAX,EBX
0052fe90 : JZ 0x0052ff61
0052fe96 : CMP dword ptr [ESP + 0xc],EBX
0052fe9a : JZ 0x0052ff61
0052fea0 : LEA ECX,[EAX + 0x10]
0052fea3 : MOV EAX,dword ptr [ESI]
0052fea5 : PUSH EBP
0052fea6 : ADD EAX,0x78
0052fea9 : MOV byte ptr [ESP + 0x28],BL
0052fead : MOV EDX,dword ptr [EAX]
0052feaf : MOV EDI,dword ptr [ECX]
0052feb1 : LEA EBP,[ESP + 0x28]
0052feb5 : PUSH EBP
0052feb6 : ADD EDX,0x130
0052febc : PUSH EDX
0052febd : PUSH EAX
0052febe : MOV EAX,dword ptr [EDI + 0x2c]
0052fec1 : CALL EAX
0052fec3 : TEST AL,AL
0052fec5 : JZ 0x0052ff57
0052fecb : CMP byte ptr [ESP + 0x28],0x6
0052fed0 : JNZ 0x0052ff57
0052fed6 : MOV ECX,dword ptr [ESI]
0052fed8 : PUSH ECX
0052fed9 : MOV ECX,EBP
0052fedb : CALL 0x00526fa0
0052fee0 : MOV EBP,EAX
0052fee2 : CMP EBP,EBX
0052fee4 : JZ 0x0052fef3
0052fee6 : MOV EDX,dword ptr [EBP + 0x8]
0052fee9 : INC EDX
0052feea : AND EDX,0x8fffffff
0052fef0 : MOV dword ptr [EBP + 0x8],EDX
0052fef3 : MOV EAX,dword ptr [ESI]
0052fef5 : MOV ECX,dword ptr [EAX + 0x78]
0052fef8 : MOV ECX,dword ptr [ECX + 0x288]
0052fefe : PUSH EBX
0052feff : PUSH 0x50
0052ff01 : CALL 0x00515840
0052ff06 : CMP EAX,EBX
0052ff08 : JZ 0x0052ff1c
0052ff0a : MOV EDX,dword ptr [ESI]
0052ff0c : ADD EDX,0x78
0052ff0f : PUSH EBP
0052ff10 : PUSH EDX
0052ff11 : MOV ECX,EAX
0052ff13 : CALL 0x00552e50
0052ff18 : MOV EDI,EAX
0052ff1a : JMP 0x0052ff1e
0052ff1c : XOR EDI,EDI
0052ff1e : MOV EDX,dword ptr [ESI]
0052ff20 : MOV ECX,dword ptr [ESP + 0x10]
0052ff24 : PUSH EDI
0052ff25 : ADD EDX,0x78
0052ff28 : PUSH EDX
0052ff29 : CALL 0x00568300
0052ff2e : MOV ECX,dword ptr [ESI]
0052ff30 : LEA EAX,[ESP + 0x1c]
0052ff34 : ADD ECX,0x78
0052ff37 : PUSH EAX
0052ff38 : PUSH ECX
0052ff39 : LEA ECX,[EDI + 0x10]
0052ff3c : CALL 0x00529a70
0052ff41 : CMP EDI,EBX
0052ff43 : JZ 0x0052ff4c
0052ff45 : MOV ECX,EDI
0052ff47 : CALL 0x00503db0
0052ff4c : CMP EBP,EBX
0052ff4e : JZ 0x0052ff57
0052ff50 : MOV ECX,EBP
0052ff52 : CALL 0x00503db0
0052ff57 : LEA ECX,[ESP + 0x28]
0052ff5b : CALL 0x00526bc0
0052ff60 : POP EBP
0052ff61 : MOV ESI,dword ptr [ESI]
0052ff63 : MOV ECX,dword ptr [ESI + 0x8]
0052ff66 : ADD ESI,0x8
0052ff69 : LEA EDX,[ECX + -0x20]
0052ff6c : CMP EDX,dword ptr [ESI + 0x4]
0052ff6f : JNC 0x0052ff95
0052ff71 : MOV EDI,0x2
0052ff76 : MOV ECX,dword ptr [ESI]
0052ff78 : CALL 0x00526bc0
0052ff7d : ADD dword ptr [ESI],-0x10
0052ff80 : MOV EAX,dword ptr [ESI]
0052ff82 : CMP EAX,dword ptr [ESI + 0x4]
0052ff85 : JNC 0x0052ff8e
0052ff87 : MOV ECX,ESI
0052ff89 : CALL 0x00504f30
0052ff8e : SUB EDI,0x1
0052ff91 : JNZ 0x0052ff76
0052ff93 : JMP 0x0052ffa7
0052ff95 : CALL 0x00526bc0
0052ff9a : ADD dword ptr [ESI],-0x10
0052ff9d : MOV ECX,dword ptr [ESI]
0052ff9f : CALL 0x00526bc0
0052ffa4 : ADD dword ptr [ESI],-0x10
0052ffa7 : TEST byte ptr [ESP + 0x14],0x2
0052ffac : JNZ 0x0052ffbb
0052ffae : MOV ECX,dword ptr [ESP + 0xc]
0052ffb2 : CMP ECX,EBX
0052ffb4 : JZ 0x0052ffbb
0052ffb6 : CALL 0x00503db0
0052ffbb : TEST byte ptr [ESP + 0x14],0x1
0052ffc0 : MOV dword ptr [ESP + 0xc],EBX
0052ffc4 : JNZ 0x0052ffd3
0052ffc6 : MOV ECX,dword ptr [ESP + 0x10]
0052ffca : CMP ECX,EBX
0052ffcc : JZ 0x0052ffd3
0052ffce : CALL 0x00503db0
0052ffd3 : TEST byte ptr [ESP + 0x20],0x2
0052ffd8 : MOV dword ptr [ESP + 0x10],EBX
0052ffdc : JNZ 0x0052ffeb
0052ffde : MOV ECX,dword ptr [ESP + 0x18]
0052ffe2 : CMP ECX,EBX
0052ffe4 : JZ 0x0052ffeb
0052ffe6 : CALL 0x00503db0
0052ffeb : TEST byte ptr [ESP + 0x20],0x1
0052fff0 : MOV dword ptr [ESP + 0x18],EBX
0052fff4 : JNZ 0x00530003
0052fff6 : MOV ECX,dword ptr [ESP + 0x1c]
0052fffa : CMP ECX,EBX
0052fffc : JZ 0x00530003
0052fffe : CALL 0x00503db0
00530003 : LEA ECX,[ESP + 0x34]
00530007 : MOV dword ptr [ESP + 0x1c],EBX
0053000b : CALL 0x00526bc0
00530010 : LEA ECX,[ESP + 0x44]
00530014 : CALL 0x00526bc0
00530019 : POP EDI
0053001a : POP ESI
0053001b : POP EBX
0053001c : ADD ESP,0x48
0053001f : RET
