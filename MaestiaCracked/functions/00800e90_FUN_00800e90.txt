PROGRAM  : Maestia.exe
FUNCTION : FUN_00800e90
ENTRY    : 00800e90
BODY     : [[00800e90, 0080112a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00800e90(void)

{
  uint uVar1;
  BOOL BVar2;
  int iVar3;
  int in_ECX;
  float10 fVar4;
  undefined1 auStack_1f4 [60];
  LPCRITICAL_SECTION local_1b8;
  char *local_1b4;
  undefined4 local_1b0;
  int local_1ac;
  undefined4 local_1a8;
  uint local_84;
  void *local_4c;
  undefined1 *puStack_48;
  undefined4 local_44;
  
  puStack_48 = &LAB_00b1a512;
  local_4c = ExceptionList;
  local_84 = DAT_00d66fa0 ^ (uint)auStack_1f4;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffe00;
  ExceptionList = &local_4c;
  if ((DAT_017267e4 & 1) == 0) {
    DAT_017267e4 = DAT_017267e4 | 1;
    local_44 = 0;
    _DAT_017267c8 = &PTR_FUN_00cdec94;
    BVar2 = InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)&DAT_017267cc,4000);
    if (BVar2 == 0) {
      InitializeCriticalSection((LPCRITICAL_SECTION)&DAT_017267cc);
    }
    _atexit((_func_4879 *)&LAB_00b845f0);
  }
  local_44 = 0xffffffff;
  local_1ac = 0;
  local_1b8 = (LPCRITICAL_SECTION)&DAT_017267cc;
  local_1b4 = ".\\AvaApp.cpp";
  local_1b0 = 0x104;
  local_1a8 = 1;
  FUN_006ef1a0();
  local_44 = 1;
  if (((*(char *)(DAT_017251ac + 4) != '\0') && (*(int *)(in_ECX + 0xc) != 0)) &&
     (*(char *)(in_ECX + 0x30) == '\0')) {
    DAT_017251a8 = (float)_DAT_017251a4 / DAT_00d72b58;
    if (1.0 <= DAT_00d72b58) {
      FUN_0040e4a0(L"%5.1f",(double)DAT_017251a8,uVar1);
      FUN_00406460();
      local_44._0_1_ = 2;
      FUN_007fb940();
      local_44 = CONCAT31(local_44._1_3_,1);
      FUN_00406560();
      (*(code *)PTR_FUN_00d6d240)(0,0,"[%5.1f]FPS",(double)DAT_017251a8);
      DAT_00d72b58 = 1e-06;
      _DAT_017251a4 = 0;
      if (DAT_017251a8 <= 50.0) {
        if (DAT_017251a8 <= 29.0) {
          if (DAT_017251a8 <= 19.0) {
            DAT_00d6d73c = 5;
            if (DAT_017251a8 <= 10.0) {
              DAT_00d6d73c = 10;
            }
          }
          else {
            DAT_00d6d73c = 3;
          }
        }
        else {
          DAT_00d6d73c = 2;
        }
      }
      else {
        DAT_00d6d73c = 1;
      }
    }
    fVar4 = (float10)FUN_0070a5a0();
    _DAT_017251a4 = _DAT_017251a4 + 1;
    DAT_00d72b58 = (float)(fVar4 + (float10)DAT_00d72b58);
    FUN_007fb400();
    FUN_007fb8c0();
    if (*(int *)(in_ECX + 8) != 0) {
      iVar3 = FUN_007f08d0();
      if (iVar3 != 0) {
        FUN_007944d0();
      }
    }
  }
  local_44 = 0xffffffff;
  if (local_1ac != 0) {
    LeaveCriticalSection(local_1b8);
    local_1ac = 0;
  }
  ExceptionList = local_4c;
  __security_check_cookie(local_84 ^ (uint)auStack_1f4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00800e90 : PUSH EBP
00800e91 : MOV EBP,ESP
00800e93 : AND ESP,0xffffffc0
00800e96 : PUSH -0x1
00800e98 : PUSH 0xb1a512
00800e9d : MOV EAX,FS:[0x0]
00800ea3 : PUSH EAX
00800ea4 : SUB ESP,0x1a8
00800eaa : MOV EAX,[0x00d66fa0]
00800eaf : XOR EAX,ESP
00800eb1 : MOV dword ptr [ESP + 0x170],EAX
00800eb8 : PUSH EBX
00800eb9 : PUSH ESI
00800eba : PUSH EDI
00800ebb : MOV EAX,[0x00d66fa0]
00800ec0 : XOR EAX,ESP
00800ec2 : PUSH EAX
00800ec3 : LEA EAX,[ESP + 0x1b8]
00800eca : MOV FS:[0x0],EAX
00800ed0 : XOR EBX,EBX
00800ed2 : TEST byte ptr [0x017267e4],0x1
00800ed9 : MOV EDI,ECX
00800edb : LEA ESI,[EBX + 0x1]
00800ede : JNZ 0x00800f2e
00800ee0 : OR dword ptr [0x017267e4],ESI
00800ee6 : MOV dword ptr [ESP + 0x1c0],EBX
00800eed : PUSH 0xfa0
00800ef2 : PUSH 0x17267cc
00800ef7 : MOV dword ptr [0x017267c8],0xcdec94
00800f01 : CALL dword ptr [0x00b85110]
00800f07 : TEST EAX,EAX
00800f09 : JNZ 0x00800f16
00800f0b : PUSH 0x17267cc
00800f10 : CALL dword ptr [0x00b85114]
00800f16 : PUSH 0xb845f0
00800f1b : CALL 0x006356bc
00800f20 : ADD ESP,0x4
00800f23 : MOV dword ptr [ESP + 0x1c0],0xffffffff
00800f2e : LEA EAX,[ESP + 0x4c]
00800f32 : PUSH EAX
00800f33 : MOV dword ptr [ESP + 0x5c],EBX
00800f37 : MOV dword ptr [ESP + 0x50],0x17267cc
00800f3f : MOV dword ptr [ESP + 0x54],0xc28a38
00800f47 : MOV dword ptr [ESP + 0x58],0x104
00800f4f : MOV dword ptr [ESP + 0x60],ESI
00800f53 : CALL 0x006ef1a0
00800f58 : MOV dword ptr [ESP + 0x1c0],ESI
00800f5f : MOV ECX,dword ptr [0x017251ac]
00800f65 : CMP byte ptr [ECX + 0x4],BL
00800f68 : JZ 0x008010e7
00800f6e : CMP dword ptr [EDI + 0xc],EBX
00800f71 : JZ 0x008010e7
00800f77 : CMP byte ptr [EDI + 0x30],BL
00800f7a : JNZ 0x008010e7
00800f80 : MOVSS XMM1,dword ptr [0x00d72b58]
00800f88 : COMISS XMM1,dword ptr [0x00c10fc4]
00800f8f : CVTSI2SS XMM0,dword ptr [0x017251a4]
00800f97 : DIVSS XMM0,XMM1
00800f9b : MOVSS dword ptr [0x017251a8],XMM0
00800fa3 : JC 0x008010a5
00800fa9 : MOVSS dword ptr [0x017251a8],XMM0
00800fb1 : SUB ESP,0x8
00800fb4 : CVTSS2SD XMM0,XMM0
00800fb8 : MOVSD qword ptr [ESP],XMM0
00800fbd : PUSH 0xc280ac
00800fc2 : LEA EDX,[ESP + 0x88]
00800fc9 : CALL 0x0040e4a0
00800fce : ADD ESP,0xc
00800fd1 : LEA EAX,[ESP + 0x7c]
00800fd5 : PUSH EAX
00800fd6 : LEA ECX,[ESP + 0x64]
00800fda : CALL 0x00406460
00800fdf : MOV byte ptr [ESP + 0x1c0],0x2
00800fe7 : MOV ESI,dword ptr [0x017251ac]
00800fed : LEA ECX,[ESP + 0x60]
00800ff1 : PUSH ECX
00800ff2 : CALL 0x007fb940
00800ff7 : MOV byte ptr [ESP + 0x1c0],0x1
00800fff : LEA ECX,[ESP + 0x60]
00801003 : CALL 0x00406560
00801008 : MOVSS XMM0,dword ptr [0x017251a8]
00801010 : SUB ESP,0x8
00801013 : CVTPS2PD XMM0,XMM0
00801016 : MOVSD qword ptr [ESP],XMM0
0080101b : PUSH 0xc28a48
00801020 : PUSH EBX
00801021 : PUSH EBX
00801022 : CALL dword ptr [0x00d6d240]
00801028 : MOVSS XMM0,dword ptr [0x00cdf414]
00801030 : MOVSS dword ptr [0x00d72b58],XMM0
00801038 : MOVSS XMM0,dword ptr [0x017251a8]
00801040 : ADD ESP,0x14
00801043 : COMISS XMM0,dword ptr [0x00cdf214]
0080104a : MOV dword ptr [0x017251a4],EBX
00801050 : JBE 0x0080105e
00801052 : MOV dword ptr [0x00d6d73c],0x1
0080105c : JMP 0x008010a5
0080105e : COMISS XMM0,dword ptr [0x00cdf5c0]
00801065 : JBE 0x00801073
00801067 : MOV dword ptr [0x00d6d73c],0x2
00801071 : JMP 0x008010a5
00801073 : COMISS XMM0,dword ptr [0x00cdf25c]
0080107a : JBE 0x00801088
0080107c : MOV dword ptr [0x00d6d73c],0x3
00801086 : JMP 0x008010a5
00801088 : COMISS XMM0,dword ptr [0x00c18874]
0080108f : MOV dword ptr [0x00d6d73c],0x5
00801099 : JA 0x008010a5
0080109b : MOV dword ptr [0x00d6d73c],0xa
008010a5 : LEA ESI,[EDI + 0x34]
008010a8 : CALL 0x0070a5a0
008010ad : FADD float ptr [0x00d72b58]
008010b3 : MOV ESI,dword ptr [EDI + 0xc]
008010b6 : INC dword ptr [0x017251a4]
008010bc : FSTP float ptr [0x00d72b58]
008010c2 : CALL 0x007fb400
008010c7 : MOV ESI,dword ptr [EDI + 0xc]
008010ca : CALL 0x007fb8c0
008010cf : MOV ESI,dword ptr [EDI + 0x8]
008010d2 : CMP ESI,EBX
008010d4 : JZ 0x008010e7
008010d6 : PUSH EBX
008010d7 : CALL 0x007f08d0
008010dc : CMP EAX,EBX
008010de : JZ 0x008010e7
008010e0 : MOV EDI,EAX
008010e2 : CALL 0x007944d0
008010e7 : MOV dword ptr [ESP + 0x1c0],0xffffffff
008010f2 : CMP dword ptr [ESP + 0x58],EBX
008010f6 : JZ 0x00801107
008010f8 : MOV EDX,dword ptr [ESP + 0x4c]
008010fc : PUSH EDX
008010fd : CALL dword ptr [0x00b8511c]
00801103 : MOV dword ptr [ESP + 0x58],EBX
00801107 : MOV ECX,dword ptr [ESP + 0x1b8]
0080110e : MOV dword ptr FS:[0x0],ECX
00801115 : POP ECX
00801116 : POP EDI
00801117 : POP ESI
00801118 : POP EBX
00801119 : MOV ECX,dword ptr [ESP + 0x170]
00801120 : XOR ECX,ESP
00801122 : CALL 0x00633e6b
00801127 : MOV ESP,EBP
00801129 : POP EBP
0080112a : RET
