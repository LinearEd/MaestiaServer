PROGRAM  : Maestia.exe
FUNCTION : FUN_005e26a0
ENTRY    : 005e26a0
BODY     : [[005e26a0, 005e2869]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005e26a0(undefined4 param_1)

{
  undefined4 *puVar1;
  uint *puVar2;
  ushort uVar3;
  int iVar4;
  bool bVar5;
  ushort uVar6;
  int *piVar7;
  int *piVar8;
  int in_ECX;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint local_18;
  int local_c;
  uint local_8;
  uint local_4;
  
  piVar8 = *(int **)(in_ECX + 0x2c);
  piVar7 = (int *)(in_ECX + 0x2c);
  local_c = 0;
  local_8 = 0;
  local_4 = 0;
  if (piVar8 == (int *)0x0) {
    piVar7 = (int *)0x0;
    uVar9 = 0;
  }
  else {
    puVar2 = (uint *)(piVar8 + 1);
    uVar9 = 0;
    do {
      piVar8 = piVar8 + 2;
      if (*piVar8 != -2) break;
      uVar9 = uVar9 + 1;
    } while (uVar9 <= *puVar2);
  }
  uVar6 = 0;
  local_18 = 0;
LAB_005e26ed:
  bVar5 = false;
LAB_005e26f0:
  if (((piVar7 == (int *)0x0) || (iVar4 = *piVar7, iVar4 == 0)) ||
     (uVar11 = *(uint *)(iVar4 + 4), (int)uVar11 < (int)uVar9)) {
    if (!bVar5) goto LAB_005e282b;
    uVar9 = local_8 + 1;
    local_18 = CONCAT22((short)local_18,uVar6);
    if (uVar9 < local_8) {
      uVar11 = uVar9;
      if (uVar9 < local_4 >> 1) {
LAB_005e280a:
        FUN_0057c3a0(&local_c,uVar11);
      }
    }
    else if (local_4 <= uVar9) {
      uVar11 = (uVar9 >> 2) + uVar9;
      goto LAB_005e280a;
    }
    puVar2 = (uint *)(local_c + -4 + uVar9 * 4);
    local_8 = uVar9;
    if (puVar2 != (uint *)0x0) {
      *puVar2 = local_18;
    }
LAB_005e282b:
    local_18 = local_18 & 0xffffff00;
    FUN_005df030(&local_c,0,local_8,local_18);
    FUN_005e24e0();
    FUN_00515cf0(local_c);
    return param_1;
  }
  uVar3 = *(ushort *)(iVar4 + 0xc + uVar9 * 8);
  if (bVar5) {
    if (local_18 != uVar3 - 1) goto code_r0x005e2730;
  }
  else {
    bVar5 = true;
    uVar6 = uVar3;
  }
  local_18 = (uint)uVar3;
  uVar9 = uVar9 + 1;
  if (uVar9 <= uVar11) {
    piVar8 = (int *)(iVar4 + 8 + uVar9 * 8);
    do {
      if (*piVar8 != -2) break;
      uVar9 = uVar9 + 1;
      piVar8 = piVar8 + 2;
    } while (uVar9 <= uVar11);
  }
  goto LAB_005e26f0;
code_r0x005e2730:
  uVar11 = local_8 + 1;
  if (uVar11 < local_8) {
    uVar10 = uVar11;
    if (local_4 >> 1 <= uVar11) goto LAB_005e277c;
  }
  else {
    if (uVar11 < local_4) goto LAB_005e277c;
    uVar10 = (uVar11 >> 2) + uVar11;
  }
  FUN_0057c3a0(&local_c,uVar10);
LAB_005e277c:
  puVar1 = (undefined4 *)(local_c + -4 + uVar11 * 4);
  local_8 = uVar11;
  if (puVar1 != (undefined4 *)0x0) {
    *puVar1 = CONCAT22((short)local_18,uVar6);
  }
  goto LAB_005e26ed;
}



============================================================
DISASSEMBLY
============================================================
005e26a0 : SUB ESP,0x20
005e26a3 : MOV EAX,dword ptr [ECX + 0x2c]
005e26a6 : PUSH EBX
005e26a7 : PUSH EBP
005e26a8 : XOR EBX,EBX
005e26aa : LEA EDX,[ECX + 0x2c]
005e26ad : XOR EBP,EBP
005e26af : PUSH ESI
005e26b0 : PUSH EDI
005e26b1 : MOV dword ptr [ESP + 0x24],EBX
005e26b5 : MOV dword ptr [ESP + 0x28],EBP
005e26b9 : MOV dword ptr [ESP + 0x2c],EBX
005e26bd : CMP EAX,EBX
005e26bf : JNZ 0x005e26c7
005e26c1 : XOR EAX,EAX
005e26c3 : XOR ECX,ECX
005e26c5 : JMP 0x005e26df
005e26c7 : MOV ESI,dword ptr [EAX + 0x4]
005e26ca : XOR ECX,ECX
005e26cc : ADD EAX,0x8
005e26cf : NOP
005e26d0 : CMP dword ptr [EAX],-0x2
005e26d3 : JNZ 0x005e26dd
005e26d5 : INC ECX
005e26d6 : ADD EAX,0x8
005e26d9 : CMP ECX,ESI
005e26db : JBE 0x005e26d0
005e26dd : MOV EAX,EDX
005e26df : MOV dword ptr [ESP + 0x1c],EAX
005e26e3 : MOV ESI,ECX
005e26e5 : MOV dword ptr [ESP + 0x10],EBX
005e26e9 : MOV dword ptr [ESP + 0x18],EBX
005e26ed : XOR DL,DL
005e26ef : NOP
005e26f0 : MOV EAX,dword ptr [ESP + 0x1c]
005e26f4 : TEST EAX,EAX
005e26f6 : JZ 0x005e27cb
005e26fc : MOV ECX,dword ptr [EAX]
005e26fe : TEST ECX,ECX
005e2700 : JZ 0x005e27cb
005e2706 : MOV EDI,dword ptr [ECX + 0x4]
005e2709 : CMP ESI,EDI
005e270b : JG 0x005e27cb
005e2711 : MOVZX EAX,word ptr [ECX + ESI*0x8 + 0xc]
005e2716 : TEST DL,DL
005e2718 : JNZ 0x005e2725
005e271a : MOVZX EDX,AX
005e271d : MOV dword ptr [ESP + 0x10],EDX
005e2721 : MOV DL,0x1
005e2723 : JMP 0x005e27a1
005e2725 : MOVZX EBP,AX
005e2728 : MOVZX EBX,BX
005e272b : DEC EBP
005e272c : CMP EBX,EBP
005e272e : JZ 0x005e279d
005e2730 : MOV AX,word ptr [ESP + 0x10]
005e2735 : MOV EBX,dword ptr [ESP + 0x18]
005e2739 : MOV word ptr [ESP + 0x14],AX
005e273e : MOV EAX,dword ptr [ESP + 0x28]
005e2742 : LEA EDI,[EAX + 0x1]
005e2745 : MOV word ptr [ESP + 0x16],BX
005e274a : CMP EDI,EAX
005e274c : JNC 0x005e2760
005e274e : MOV ECX,dword ptr [ESP + 0x2c]
005e2752 : SHR ECX,0x1
005e2754 : CMP EDI,ECX
005e2756 : JNC 0x005e277c
005e2758 : PUSH EDI
005e2759 : LEA EDX,[ESP + 0x28]
005e275d : PUSH EDX
005e275e : JMP 0x005e2773
005e2760 : CMP EDI,dword ptr [ESP + 0x2c]
005e2764 : JC 0x005e277c
005e2766 : MOV EAX,EDI
005e2768 : SHR EAX,0x2
005e276b : ADD EAX,EDI
005e276d : PUSH EAX
005e276e : LEA ECX,[ESP + 0x28]
005e2772 : PUSH ECX
005e2773 : LEA ECX,[ESP + 0x2c]
005e2777 : CALL 0x0057c3a0
005e277c : MOV EDX,dword ptr [ESP + 0x24]
005e2780 : LEA EAX,[EDX + EDI*0x4 + -0x4]
005e2784 : MOV EBP,EDI
005e2786 : MOV dword ptr [ESP + 0x28],EBP
005e278a : TEST EAX,EAX
005e278c : JZ 0x005e26ed
005e2792 : MOV ECX,dword ptr [ESP + 0x14]
005e2796 : MOV dword ptr [EAX],ECX
005e2798 : JMP 0x005e26ed
005e279d : MOV EBP,dword ptr [ESP + 0x28]
005e27a1 : MOVZX EBX,AX
005e27a4 : INC ESI
005e27a5 : MOV dword ptr [ESP + 0x18],EBX
005e27a9 : CMP ESI,EDI
005e27ab : JA 0x005e26f0
005e27b1 : LEA EAX,[ECX + ESI*0x8 + 0x8]
005e27b5 : CMP dword ptr [EAX],-0x2
005e27b8 : JNZ 0x005e26f0
005e27be : INC ESI
005e27bf : ADD EAX,0x8
005e27c2 : CMP ESI,EDI
005e27c4 : JBE 0x005e27b5
005e27c6 : JMP 0x005e26f0
005e27cb : TEST DL,DL
005e27cd : JZ 0x005e282b
005e27cf : MOV DX,word ptr [ESP + 0x10]
005e27d4 : LEA ESI,[EBP + 0x1]
005e27d7 : MOV word ptr [ESP + 0x18],DX
005e27dc : MOV word ptr [ESP + 0x1a],BX
005e27e1 : CMP ESI,EBP
005e27e3 : JNC 0x005e27f7
005e27e5 : MOV EAX,dword ptr [ESP + 0x2c]
005e27e9 : SHR EAX,0x1
005e27eb : CMP ESI,EAX
005e27ed : JNC 0x005e2813
005e27ef : PUSH ESI
005e27f0 : LEA EAX,[ESP + 0x28]
005e27f4 : PUSH EAX
005e27f5 : JMP 0x005e280a
005e27f7 : CMP ESI,dword ptr [ESP + 0x2c]
005e27fb : JC 0x005e2813
005e27fd : MOV ECX,ESI
005e27ff : SHR ECX,0x2
005e2802 : ADD ECX,ESI
005e2804 : PUSH ECX
005e2805 : LEA EDX,[ESP + 0x28]
005e2809 : PUSH EDX
005e280a : LEA ECX,[ESP + 0x2c]
005e280e : CALL 0x0057c3a0
005e2813 : MOV EAX,dword ptr [ESP + 0x24]
005e2817 : LEA EAX,[EAX + ESI*0x4 + -0x4]
005e281b : MOV EBP,ESI
005e281d : MOV dword ptr [ESP + 0x28],EBP
005e2821 : TEST EAX,EAX
005e2823 : JZ 0x005e282b
005e2825 : MOV ECX,dword ptr [ESP + 0x18]
005e2829 : MOV dword ptr [EAX],ECX
005e282b : MOV byte ptr [ESP + 0x18],0x0
005e2830 : MOV EDX,dword ptr [ESP + 0x18]
005e2834 : PUSH EDX
005e2835 : PUSH EBP
005e2836 : LEA EAX,[ESP + 0x2c]
005e283a : PUSH 0x0
005e283c : PUSH EAX
005e283d : CALL 0x005df030
005e2842 : MOV EDI,dword ptr [ESP + 0x44]
005e2846 : ADD ESP,0x10
005e2849 : LEA ESI,[ESP + 0x24]
005e284d : MOV ECX,EDI
005e284f : CALL 0x005e24e0
005e2854 : MOV ECX,dword ptr [ESP + 0x24]
005e2858 : PUSH ECX
005e2859 : CALL 0x00515cf0
005e285e : MOV EAX,EDI
005e2860 : POP EDI
005e2861 : POP ESI
005e2862 : POP EBP
005e2863 : POP EBX
005e2864 : ADD ESP,0x20
005e2867 : RET 0x4
