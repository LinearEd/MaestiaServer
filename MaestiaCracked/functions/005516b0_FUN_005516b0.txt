PROGRAM  : Maestia.exe
FUNCTION : FUN_005516b0
ENTRY    : 005516b0
BODY     : [[005516b0, 00551795]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005516b0(undefined4 *param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  uint uVar4;
  uint *puVar5;
  uint uVar6;
  uint uVar7;
  
  iVar3 = *in_ECX;
  if (iVar3 != 0) {
    uVar6 = *(uint *)(*(int *)*param_1 + 0xc) & *(uint *)(iVar3 + 4);
    puVar5 = (uint *)(iVar3 + 8 + uVar6 * 0x24);
    if ((*(int *)(iVar3 + 8 + uVar6 * 0x24) != -2) &&
       ((*(uint *)(puVar5[1] + 0xc) & *(uint *)(iVar3 + 4)) == uVar6)) {
      uVar4 = 0xffffffff;
      uVar7 = uVar6;
      do {
        if ((*(uint *)(iVar3 + 4) & *(uint *)(puVar5[1] + 0xc)) == uVar6) {
          piVar1 = (int *)*param_1;
          if (*(int *)(puVar5[1] + 4) == 0) {
            FUN_00525a80();
          }
          if (*(int *)(*piVar1 + 4) == *(int *)(puVar5[1] + 4)) {
            if (uVar6 == uVar7) {
              uVar6 = *puVar5;
              if (uVar6 != 0xffffffff) {
                iVar3 = *in_ECX;
                FUN_00550fb0();
                FUN_00551680(iVar3 + 8 + uVar6 * 0x24);
              }
            }
            else {
              *(uint *)(*in_ECX + 8 + uVar4 * 0x24) = *puVar5;
            }
            FUN_00550fb0();
            *(int *)*in_ECX = *(int *)*in_ECX + -1;
            return;
          }
        }
        uVar2 = *puVar5;
        if (uVar2 == 0xffffffff) {
          return;
        }
        iVar3 = *in_ECX;
        puVar5 = (uint *)(iVar3 + 8 + uVar2 * 0x24);
        uVar4 = uVar7;
        uVar7 = uVar2;
      } while( true );
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005516b0 : SUB ESP,0x8
005516b3 : MOV EDX,ECX
005516b5 : MOV EAX,dword ptr [EDX]
005516b7 : MOV dword ptr [ESP + 0x4],EDX
005516bb : TEST EAX,EAX
005516bd : JZ 0x00551790
005516c3 : MOV ECX,dword ptr [EAX + 0x4]
005516c6 : PUSH ESI
005516c7 : MOV ESI,dword ptr [ESP + 0x10]
005516cb : MOV ESI,dword ptr [ESI]
005516cd : MOV ESI,dword ptr [ESI]
005516cf : PUSH EDI
005516d0 : MOV EDI,dword ptr [ESI + 0xc]
005516d3 : AND EDI,ECX
005516d5 : LEA ESI,[EDI + EDI*0x8]
005516d8 : CMP dword ptr [EAX + ESI*0x4 + 0x8],-0x2
005516dd : LEA ESI,[EAX + ESI*0x4 + 0x8]
005516e1 : JZ 0x0055178e
005516e7 : PUSH EBX
005516e8 : MOV EBX,dword ptr [ESI + 0x4]
005516eb : MOV EBX,dword ptr [EBX + 0xc]
005516ee : AND EBX,ECX
005516f0 : CMP EBX,EDI
005516f2 : JNZ 0x0055178d
005516f8 : PUSH EBP
005516f9 : MOV dword ptr [ESP + 0x10],EDI
005516fd : OR EBP,0xffffffff
00551700 : MOV ECX,dword ptr [ESI + 0x4]
00551703 : MOV EAX,dword ptr [EAX + 0x4]
00551706 : AND EAX,dword ptr [ECX + 0xc]
00551709 : CMP EAX,dword ptr [ESP + 0x10]
0055170d : JNZ 0x00551734
0055170f : MOV ECX,dword ptr [ESP + 0x1c]
00551713 : MOV EBX,dword ptr [ECX]
00551715 : MOV ECX,dword ptr [ESI + 0x4]
00551718 : CMP dword ptr [ECX + 0x4],0x0
0055171c : JNZ 0x00551727
0055171e : CALL 0x00525a80
00551723 : MOV EDX,dword ptr [ESP + 0x14]
00551727 : MOV ECX,dword ptr [EBX]
00551729 : MOV EAX,dword ptr [ESI + 0x4]
0055172c : MOV ECX,dword ptr [ECX + 0x4]
0055172f : CMP ECX,dword ptr [EAX + 0x4]
00551732 : JZ 0x00551748
00551734 : MOV EBP,EDI
00551736 : MOV EDI,dword ptr [ESI]
00551738 : CMP EDI,-0x1
0055173b : JZ 0x0055178c
0055173d : MOV EAX,dword ptr [EDX]
0055173f : LEA ECX,[EDI + EDI*0x8]
00551742 : LEA ESI,[EAX + ECX*0x4 + 0x8]
00551746 : JMP 0x00551700
00551748 : CMP dword ptr [ESP + 0x10],EDI
0055174c : JNZ 0x00551771
0055174e : MOV EAX,dword ptr [ESI]
00551750 : CMP EAX,-0x1
00551753 : JZ 0x0055177d
00551755 : MOV ECX,dword ptr [EDX]
00551757 : LEA EAX,[EAX + EAX*0x8]
0055175a : LEA EDI,[ECX + EAX*0x4 + 0x8]
0055175e : MOV ECX,ESI
00551760 : CALL 0x00550fb0
00551765 : PUSH EDI
00551766 : MOV ECX,ESI
00551768 : CALL 0x00551680
0055176d : MOV ESI,EDI
0055176f : JMP 0x0055177d
00551771 : MOV ECX,dword ptr [EDX]
00551773 : MOV EDX,dword ptr [ESI]
00551775 : LEA EAX,[EBP + EBP*0x8]
00551779 : MOV dword ptr [ECX + EAX*0x4 + 0x8],EDX
0055177d : MOV ECX,ESI
0055177f : CALL 0x00550fb0
00551784 : MOV EAX,dword ptr [ESP + 0x14]
00551788 : MOV EAX,dword ptr [EAX]
0055178a : DEC dword ptr [EAX]
0055178c : POP EBP
0055178d : POP EBX
0055178e : POP EDI
0055178f : POP ESI
00551790 : ADD ESP,0x8
00551793 : RET 0x4
