PROGRAM  : Maestia.exe
FUNCTION : FUN_00912c80
ENTRY    : 00912c80
BODY     : [[00912c80, 0091303f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00912c80(undefined4 param_1,undefined4 param_2)

{
  wchar_t wVar1;
  short sVar2;
  undefined2 uVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  wchar_t *pwVar7;
  undefined4 in_ECX;
  wchar_t *pwVar8;
  wchar_t *pwVar9;
  bool bVar10;
  undefined1 local_60 [4];
  int local_5c;
  int local_58;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b3f6f2;
  local_14 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xffffff88;
  ExceptionList = &local_14;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  FUN_00406360(&DAT_00c66c10,1);
  local_c = 0;
  uVar5 = FUN_00404350(param_2,uVar4);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_60,uVar5,local_50,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_c = CONCAT31(local_c._1_3_,4);
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_4c = 0;
  uVar4 = (local_58 - local_5c) / 0x1c;
  local_3c = 0;
  if (uVar4 == 0) {
    local_c = 0xffffffff;
    if (local_5c == 0) {
      ExceptionList = local_14;
      return;
    }
    FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  pwVar7 = (wchar_t *)(local_5c + 4);
  pwVar9 = pwVar7;
  if (7 < *(uint *)(local_5c + 0x18)) {
    pwVar9 = *(wchar_t **)pwVar7;
  }
  pwVar8 = L"BGSound";
  do {
    wVar1 = *pwVar9;
    bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
    if (wVar1 != *pwVar8) {
LAB_00912df6:
      iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
      goto LAB_00912dfb;
    }
    if (wVar1 == L'\0') break;
    wVar1 = pwVar9[1];
    bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
    if (wVar1 != pwVar8[1]) goto LAB_00912df6;
    pwVar9 = pwVar9 + 2;
    pwVar8 = pwVar8 + 2;
  } while (wVar1 != L'\0');
  iVar6 = 0;
LAB_00912dfb:
  if (iVar6 == 0) {
    if (1 < uVar4) {
      if (*(uint *)(local_5c + 0x34) < 8) {
        local_5c = local_5c + 0x20;
      }
      else {
        local_5c = *(int *)(local_5c + 0x20);
      }
      sVar2 = FUN_00634f4d(local_5c);
      FUN_00911950(in_ECX,sVar2 == 1);
    }
  }
  else {
    pwVar9 = pwVar7;
    if (7 < *(uint *)(local_5c + 0x18)) {
      pwVar9 = *(wchar_t **)pwVar7;
    }
    pwVar8 = L"BGSoundPro";
    do {
      wVar1 = *pwVar9;
      bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
      if (wVar1 != *pwVar8) {
LAB_00912e76:
        iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
        goto LAB_00912e7b;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar9[1];
      bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
      if (wVar1 != pwVar8[1]) goto LAB_00912e76;
      pwVar9 = pwVar9 + 2;
      pwVar8 = pwVar8 + 2;
    } while (wVar1 != L'\0');
    iVar6 = 0;
LAB_00912e7b:
    if (iVar6 == 0) {
      if (1 < uVar4) {
        if (*(uint *)(local_5c + 0x34) < 8) {
          local_5c = local_5c + 0x20;
        }
        else {
          local_5c = *(int *)(local_5c + 0x20);
        }
        FUN_00634f4d(local_5c);
        FUN_0090df80(in_ECX);
      }
    }
    else {
      pwVar9 = pwVar7;
      if (7 < *(uint *)(local_5c + 0x18)) {
        pwVar9 = *(wchar_t **)pwVar7;
      }
      pwVar8 = L"SoundEffect";
      do {
        wVar1 = *pwVar9;
        bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
        if (wVar1 != *pwVar8) {
LAB_00912eea:
          iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
          goto LAB_00912eef;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar9[1];
        bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
        if (wVar1 != pwVar8[1]) goto LAB_00912eea;
        pwVar9 = pwVar9 + 2;
        pwVar8 = pwVar8 + 2;
      } while (wVar1 != L'\0');
      iVar6 = 0;
LAB_00912eef:
      if (iVar6 == 0) {
        if (1 < uVar4) {
          if (*(uint *)(local_5c + 0x34) < 8) {
            local_5c = local_5c + 0x20;
          }
          else {
            local_5c = *(int *)(local_5c + 0x20);
          }
          sVar2 = FUN_00634f4d(local_5c);
          FUN_0090ece0(in_ECX,sVar2 == 1);
        }
      }
      else {
        pwVar9 = pwVar7;
        if (7 < *(uint *)(local_5c + 0x18)) {
          pwVar9 = *(wchar_t **)pwVar7;
        }
        pwVar8 = L"SoundEffectPro";
        do {
          wVar1 = *pwVar9;
          bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
          if (wVar1 != *pwVar8) {
LAB_00912f69:
            iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
            goto LAB_00912f6e;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar9[1];
          bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
          if (wVar1 != pwVar8[1]) goto LAB_00912f69;
          pwVar9 = pwVar9 + 2;
          pwVar8 = pwVar8 + 2;
        } while (wVar1 != L'\0');
        iVar6 = 0;
LAB_00912f6e:
        if (iVar6 == 0) {
          if (1 < uVar4) {
            if (*(uint *)(local_5c + 0x34) < 8) {
              local_5c = local_5c + 0x20;
            }
            else {
              local_5c = *(int *)(local_5c + 0x20);
            }
            uVar3 = FUN_00634f4d(local_5c);
            FUN_00911840(in_ECX,uVar3);
          }
        }
        else {
          if (7 < *(uint *)(local_5c + 0x18)) {
            pwVar7 = *(wchar_t **)pwVar7;
          }
          pwVar9 = L"SurroundSound";
          do {
            wVar1 = *pwVar7;
            bVar10 = (ushort)wVar1 < (ushort)*pwVar9;
            if (wVar1 != *pwVar9) {
LAB_00912fdb:
              iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
              goto LAB_00912fe0;
            }
            if (wVar1 == L'\0') break;
            wVar1 = pwVar7[1];
            bVar10 = (ushort)wVar1 < (ushort)pwVar9[1];
            if (wVar1 != pwVar9[1]) goto LAB_00912fdb;
            pwVar7 = pwVar7 + 2;
            pwVar9 = pwVar9 + 2;
          } while (wVar1 != L'\0');
          iVar6 = 0;
LAB_00912fe0:
          if ((iVar6 == 0) && (1 < uVar4)) {
            if (*(uint *)(local_5c + 0x34) < 8) {
              local_5c = local_5c + 0x20;
            }
            else {
              local_5c = *(int *)(local_5c + 0x20);
            }
            sVar2 = FUN_00634f4d(local_5c);
            FUN_0090ec50(in_ECX,sVar2 == 1);
          }
        }
      }
    }
  }
  local_c = 0xffffffff;
  FUN_004042c0();
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
00912c80 : PUSH EBP
00912c81 : MOV EBP,ESP
00912c83 : AND ESP,0xfffffff8
00912c86 : PUSH -0x1
00912c88 : PUSH 0xb3f6f2
00912c8d : MOV EAX,FS:[0x0]
00912c93 : PUSH EAX
00912c94 : SUB ESP,0x58
00912c97 : PUSH EBX
00912c98 : PUSH ESI
00912c99 : PUSH EDI
00912c9a : MOV EAX,[0x00d66fa0]
00912c9f : XOR EAX,ESP
00912ca1 : PUSH EAX
00912ca2 : LEA EAX,[ESP + 0x68]
00912ca6 : MOV FS:[0x0],EAX
00912cac : MOV dword ptr [ESP + 0x18],ECX
00912cb0 : PUSH 0x1
00912cb2 : XOR EAX,EAX
00912cb4 : MOV EDI,0x7
00912cb9 : XOR EBX,EBX
00912cbb : PUSH 0xc66c10
00912cc0 : LEA ECX,[ESP + 0x34]
00912cc4 : MOV dword ptr [ESP + 0x4c],EDI
00912cc8 : MOV dword ptr [ESP + 0x48],EBX
00912ccc : MOV word ptr [ESP + 0x38],AX
00912cd1 : CALL 0x00406360
00912cd6 : MOV dword ptr [ESP + 0x70],EBX
00912cda : MOV ECX,dword ptr [EBP + 0xc]
00912cdd : PUSH ECX
00912cde : LEA ESI,[ESP + 0x4c]
00912ce2 : CALL 0x00404350
00912ce7 : ADD ESP,0x4
00912cea : MOV byte ptr [ESP + 0x70],0x1
00912cef : PUSH EBX
00912cf0 : LEA EDX,[ESP + 0x30]
00912cf4 : PUSH EDX
00912cf5 : PUSH EAX
00912cf6 : LEA EAX,[ESP + 0x28]
00912cfa : PUSH EAX
00912cfb : CALL 0x0070cd60
00912d00 : ADD ESP,0x10
00912d03 : MOV byte ptr [ESP + 0x70],0x3
00912d08 : CMP dword ptr [ESP + 0x60],0x8
00912d0d : JC 0x00912d18
00912d0f : MOV ECX,dword ptr [ESP + 0x4c]
00912d13 : CALL 0x006f04e0
00912d18 : XOR ECX,ECX
00912d1a : MOV dword ptr [ESP + 0x60],EDI
00912d1e : MOV dword ptr [ESP + 0x5c],EBX
00912d22 : MOV word ptr [ESP + 0x4c],CX
00912d27 : MOV byte ptr [ESP + 0x70],0x4
00912d2c : CMP dword ptr [ESP + 0x44],0x8
00912d31 : JC 0x00912d3c
00912d33 : MOV ECX,dword ptr [ESP + 0x30]
00912d37 : CALL 0x006f04e0
00912d3c : MOV ECX,dword ptr [ESP + 0x24]
00912d40 : XOR EDX,EDX
00912d42 : MOV dword ptr [ESP + 0x44],EDI
00912d46 : MOV EDI,dword ptr [ESP + 0x20]
00912d4a : SUB ECX,EDI
00912d4c : MOV word ptr [ESP + 0x30],DX
00912d51 : MOV EAX,0x92492493
00912d56 : IMUL ECX
00912d58 : ADD EDX,ECX
00912d5a : SAR EDX,0x4
00912d5d : MOV EAX,EDX
00912d5f : SHR EAX,0x1f
00912d62 : ADD EAX,EDX
00912d64 : MOV dword ptr [ESP + 0x40],EBX
00912d68 : MOV dword ptr [ESP + 0x14],EAX
00912d6c : JNZ 0x00912db9
00912d6e : MOV dword ptr [ESP + 0x70],0xffffffff
00912d76 : MOV EAX,dword ptr [ESP + 0x20]
00912d7a : CMP EAX,EBX
00912d7c : JZ 0x00912d98
00912d7e : MOV ECX,dword ptr [ESP + 0x18]
00912d82 : MOV EDI,dword ptr [ESP + 0x24]
00912d86 : PUSH ECX
00912d87 : CALL 0x00405450
00912d8c : MOV ECX,dword ptr [ESP + 0x24]
00912d90 : ADD ESP,0x4
00912d93 : CALL 0x006f04e0
00912d98 : MOV dword ptr [ESP + 0x20],EBX
00912d9c : MOV dword ptr [ESP + 0x24],EBX
00912da0 : MOV dword ptr [ESP + 0x28],EBX
00912da4 : MOV ECX,dword ptr [ESP + 0x68]
00912da8 : MOV dword ptr FS:[0x0],ECX
00912daf : POP ECX
00912db0 : POP EDI
00912db1 : POP ESI
00912db2 : POP EBX
00912db3 : MOV ESP,EBP
00912db5 : POP EBP
00912db6 : RET 0x8
00912db9 : CMP dword ptr [EDI + 0x18],0x8
00912dbd : LEA ESI,[EDI + 0x4]
00912dc0 : JC 0x00912dc6
00912dc2 : MOV EAX,dword ptr [ESI]
00912dc4 : JMP 0x00912dc8
00912dc6 : MOV EAX,ESI
00912dc8 : MOV ECX,0xc66c14
00912dcd : LEA ECX,[ECX]
00912dd0 : MOV DX,word ptr [EAX]
00912dd3 : CMP DX,word ptr [ECX]
00912dd6 : JNZ 0x00912df6
00912dd8 : CMP DX,BX
00912ddb : JZ 0x00912df2
00912ddd : MOV DX,word ptr [EAX + 0x2]
00912de1 : CMP DX,word ptr [ECX + 0x2]
00912de5 : JNZ 0x00912df6
00912de7 : ADD EAX,0x4
00912dea : ADD ECX,0x4
00912ded : CMP DX,BX
00912df0 : JNZ 0x00912dd0
00912df2 : XOR EAX,EAX
00912df4 : JMP 0x00912dfb
00912df6 : SBB EAX,EAX
00912df8 : SBB EAX,-0x1
00912dfb : CMP EAX,EBX
00912dfd : JNZ 0x00912e3e
00912dff : CMP dword ptr [ESP + 0x14],0x1
00912e04 : JBE 0x0091301a
00912e0a : CMP dword ptr [EDI + 0x34],0x8
00912e0e : JC 0x00912e15
00912e10 : MOV EAX,dword ptr [EDI + 0x20]
00912e13 : JMP 0x00912e18
00912e15 : LEA EAX,[EDI + 0x20]
00912e18 : PUSH EAX
00912e19 : CALL 0x00634f4d
00912e1e : MOV ECX,dword ptr [ESP + 0x1c]
00912e22 : MOVZX EAX,AX
00912e25 : ADD ESP,0x4
00912e28 : CMP AX,0x1
00912e2c : SETZ DL
00912e2f : MOVZX EAX,DL
00912e32 : PUSH EAX
00912e33 : PUSH ECX
00912e34 : CALL 0x00911950
00912e39 : JMP 0x0091301a
00912e3e : CMP dword ptr [EDI + 0x18],0x8
00912e42 : JC 0x00912e48
00912e44 : MOV EAX,dword ptr [ESI]
00912e46 : JMP 0x00912e4a
00912e48 : MOV EAX,ESI
00912e4a : MOV ECX,0xc66c24
00912e4f : NOP
00912e50 : MOV DX,word ptr [EAX]
00912e53 : CMP DX,word ptr [ECX]
00912e56 : JNZ 0x00912e76
00912e58 : CMP DX,BX
00912e5b : JZ 0x00912e72
00912e5d : MOV DX,word ptr [EAX + 0x2]
00912e61 : CMP DX,word ptr [ECX + 0x2]
00912e65 : JNZ 0x00912e76
00912e67 : ADD EAX,0x4
00912e6a : ADD ECX,0x4
00912e6d : CMP DX,BX
00912e70 : JNZ 0x00912e50
00912e72 : XOR EAX,EAX
00912e74 : JMP 0x00912e7b
00912e76 : SBB EAX,EAX
00912e78 : SBB EAX,-0x1
00912e7b : CMP EAX,EBX
00912e7d : JNZ 0x00912eb3
00912e7f : CMP dword ptr [ESP + 0x14],0x1
00912e84 : JBE 0x0091301a
00912e8a : CMP dword ptr [EDI + 0x34],0x8
00912e8e : JC 0x00912e95
00912e90 : MOV EAX,dword ptr [EDI + 0x20]
00912e93 : JMP 0x00912e98
00912e95 : LEA EAX,[EDI + 0x20]
00912e98 : PUSH EAX
00912e99 : CALL 0x00634f4d
00912e9e : MOV EDX,dword ptr [ESP + 0x1c]
00912ea2 : ADD ESP,0x4
00912ea5 : MOVZX EDI,AX
00912ea8 : PUSH EDX
00912ea9 : CALL 0x0090df80
00912eae : JMP 0x0091301a
00912eb3 : CMP dword ptr [EDI + 0x18],0x8
00912eb7 : JC 0x00912ebd
00912eb9 : MOV EAX,dword ptr [ESI]
00912ebb : JMP 0x00912ebf
00912ebd : MOV EAX,ESI
00912ebf : MOV ECX,0xc66c3c
00912ec4 : MOV DX,word ptr [EAX]
00912ec7 : CMP DX,word ptr [ECX]
00912eca : JNZ 0x00912eea
00912ecc : CMP DX,BX
00912ecf : JZ 0x00912ee6
00912ed1 : MOV DX,word ptr [EAX + 0x2]
00912ed5 : CMP DX,word ptr [ECX + 0x2]
00912ed9 : JNZ 0x00912eea
00912edb : ADD EAX,0x4
00912ede : ADD ECX,0x4
00912ee1 : CMP DX,BX
00912ee4 : JNZ 0x00912ec4
00912ee6 : XOR EAX,EAX
00912ee8 : JMP 0x00912eef
00912eea : SBB EAX,EAX
00912eec : SBB EAX,-0x1
00912eef : CMP EAX,EBX
00912ef1 : JNZ 0x00912f32
00912ef3 : CMP dword ptr [ESP + 0x14],0x1
00912ef8 : JBE 0x0091301a
00912efe : CMP dword ptr [EDI + 0x34],0x8
00912f02 : JC 0x00912f09
00912f04 : MOV EAX,dword ptr [EDI + 0x20]
00912f07 : JMP 0x00912f0c
00912f09 : LEA EAX,[EDI + 0x20]
00912f0c : PUSH EAX
00912f0d : CALL 0x00634f4d
00912f12 : MOV EDX,dword ptr [ESP + 0x1c]
00912f16 : MOVZX EAX,AX
00912f19 : ADD ESP,0x4
00912f1c : CMP AX,0x1
00912f20 : SETZ AL
00912f23 : MOVZX ECX,AL
00912f26 : PUSH ECX
00912f27 : PUSH EDX
00912f28 : CALL 0x0090ece0
00912f2d : JMP 0x0091301a
00912f32 : CMP dword ptr [EDI + 0x18],0x8
00912f36 : JC 0x00912f3c
00912f38 : MOV EAX,dword ptr [ESI]
00912f3a : JMP 0x00912f3e
00912f3c : MOV EAX,ESI
00912f3e : MOV ECX,0xc66c54
00912f43 : MOV DX,word ptr [EAX]
00912f46 : CMP DX,word ptr [ECX]
00912f49 : JNZ 0x00912f69
00912f4b : CMP DX,BX
00912f4e : JZ 0x00912f65
00912f50 : MOV DX,word ptr [EAX + 0x2]
00912f54 : CMP DX,word ptr [ECX + 0x2]
00912f58 : JNZ 0x00912f69
00912f5a : ADD EAX,0x4
00912f5d : ADD ECX,0x4
00912f60 : CMP DX,BX
00912f63 : JNZ 0x00912f43
00912f65 : XOR EAX,EAX
00912f67 : JMP 0x00912f6e
00912f69 : SBB EAX,EAX
00912f6b : SBB EAX,-0x1
00912f6e : CMP EAX,EBX
00912f70 : JNZ 0x00912fa4
00912f72 : CMP dword ptr [ESP + 0x14],0x1
00912f77 : JBE 0x0091301a
00912f7d : CMP dword ptr [EDI + 0x34],0x8
00912f81 : JC 0x00912f88
00912f83 : MOV EAX,dword ptr [EDI + 0x20]
00912f86 : JMP 0x00912f8b
00912f88 : LEA EAX,[EDI + 0x20]
00912f8b : PUSH EAX
00912f8c : CALL 0x00634f4d
00912f91 : MOVZX EAX,AX
00912f94 : ADD ESP,0x4
00912f97 : PUSH EAX
00912f98 : MOV EAX,dword ptr [ESP + 0x1c]
00912f9c : PUSH EAX
00912f9d : CALL 0x00911840
00912fa2 : JMP 0x0091301a
00912fa4 : CMP dword ptr [EDI + 0x18],0x8
00912fa8 : JC 0x00912fae
00912faa : MOV EAX,dword ptr [ESI]
00912fac : JMP 0x00912fb0
00912fae : MOV EAX,ESI
00912fb0 : MOV ECX,0xc66c74
00912fb5 : MOV DX,word ptr [EAX]
00912fb8 : CMP DX,word ptr [ECX]
00912fbb : JNZ 0x00912fdb
00912fbd : CMP DX,BX
00912fc0 : JZ 0x00912fd7
00912fc2 : MOV DX,word ptr [EAX + 0x2]
00912fc6 : CMP DX,word ptr [ECX + 0x2]
00912fca : JNZ 0x00912fdb
00912fcc : ADD EAX,0x4
00912fcf : ADD ECX,0x4
00912fd2 : CMP DX,BX
00912fd5 : JNZ 0x00912fb5
00912fd7 : XOR EAX,EAX
00912fd9 : JMP 0x00912fe0
00912fdb : SBB EAX,EAX
00912fdd : SBB EAX,-0x1
00912fe0 : CMP EAX,EBX
00912fe2 : JNZ 0x0091301a
00912fe4 : CMP dword ptr [ESP + 0x14],0x1
00912fe9 : JBE 0x0091301a
00912feb : CMP dword ptr [EDI + 0x34],0x8
00912fef : JC 0x00912ff6
00912ff1 : MOV EAX,dword ptr [EDI + 0x20]
00912ff4 : JMP 0x00912ff9
00912ff6 : LEA EAX,[EDI + 0x20]
00912ff9 : PUSH EAX
00912ffa : CALL 0x00634f4d
00912fff : MOVZX EAX,AX
00913002 : ADD ESP,0x4
00913005 : CMP AX,0x1
00913009 : MOV EAX,dword ptr [ESP + 0x18]
0091300d : SETZ CL
00913010 : MOVZX EDX,CL
00913013 : PUSH EDX
00913014 : PUSH EAX
00913015 : CALL 0x0090ec50
0091301a : MOV dword ptr [ESP + 0x70],0xffffffff
00913022 : LEA ESI,[ESP + 0x1c]
00913026 : CALL 0x004042c0
0091302b : MOV ECX,dword ptr [ESP + 0x68]
0091302f : MOV dword ptr FS:[0x0],ECX
00913036 : POP ECX
00913037 : POP EDI
00913038 : POP ESI
00913039 : POP EBX
0091303a : MOV ESP,EBP
0091303c : POP EBP
0091303d : RET 0x8
