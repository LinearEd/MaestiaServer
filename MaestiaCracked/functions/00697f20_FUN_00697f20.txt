PROGRAM  : Maestia.exe
FUNCTION : FUN_00697f20
ENTRY    : 00697f20
BODY     : [[00697f20, 00697fae]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00697f20(void)

{
  int iVar1;
  int in_ECX;
  int unaff_ESI;
  
  if (*(int *)(in_ECX + 0x60) == 0) {
    iVar1 = *(int *)(in_ECX + 0x2c);
    *(int *)(in_ECX + 0x5c) = iVar1;
    *(int *)(in_ECX + 0x60) = iVar1;
    *(int *)(in_ECX + 0x2c) = iVar1 + 0x20;
  }
  if (*(uint *)(in_ECX + 0x28) <= *(uint *)(in_ECX + 0x2c)) {
    *(undefined4 *)(in_ECX + 0x30) = 0x62;
    return CONCAT31((int3)(*(uint *)(in_ECX + 0x2c) >> 8),1);
  }
  if (unaff_ESI == 1) {
    *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 0xc) = 1;
  }
  else {
    if (unaff_ESI != 2) {
      *(undefined4 *)(in_ECX + 0x30) = 0x14;
      return 1;
    }
    *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 0xc) = 0xffffffff;
  }
  *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 0x14) = 0;
  *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 0x10) = 0;
  *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 8) = *(undefined4 *)(in_ECX + 0x2c);
  *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 4) = 0;
  *(undefined4 *)(*(int *)(in_ECX + 0x5c) + 0x1c) = 0;
  if (*(int *)(in_ECX + 100) == 0) {
    *(undefined4 *)(in_ECX + 100) = *(undefined4 *)(in_ECX + 0x5c);
  }
  *(undefined1 *)(in_ECX + 0x5a) = 1;
  *(undefined1 *)(in_ECX + 0x5b) = 0;
  *(int *)(in_ECX + 0x68) = unaff_ESI;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00697f20 : PUSH EBX
00697f21 : XOR EBX,EBX
00697f23 : CMP dword ptr [ECX + 0x60],EBX
00697f26 : JNZ 0x00697f37
00697f28 : MOV EAX,dword ptr [ECX + 0x2c]
00697f2b : MOV dword ptr [ECX + 0x5c],EAX
00697f2e : MOV dword ptr [ECX + 0x60],EAX
00697f31 : ADD EAX,0x20
00697f34 : MOV dword ptr [ECX + 0x2c],EAX
00697f37 : MOV EAX,dword ptr [ECX + 0x2c]
00697f3a : CMP EAX,dword ptr [ECX + 0x28]
00697f3d : JC 0x00697f4a
00697f3f : MOV dword ptr [ECX + 0x30],0x62
00697f46 : MOV AL,0x1
00697f48 : POP EBX
00697f49 : RET
00697f4a : MOV EDX,ESI
00697f4c : MOV EAX,0x1
00697f51 : SUB EDX,EAX
00697f53 : JZ 0x00697f6e
00697f55 : SUB EDX,EAX
00697f57 : JZ 0x00697f62
00697f59 : MOV dword ptr [ECX + 0x30],0x14
00697f60 : POP EBX
00697f61 : RET
00697f62 : MOV EDX,dword ptr [ECX + 0x5c]
00697f65 : MOV dword ptr [EDX + 0xc],0xffffffff
00697f6c : JMP 0x00697f74
00697f6e : MOV EDX,dword ptr [ECX + 0x5c]
00697f71 : MOV dword ptr [EDX + 0xc],EAX
00697f74 : MOV EDX,dword ptr [ECX + 0x5c]
00697f77 : MOV dword ptr [EDX + 0x14],EBX
00697f7a : MOV EDX,dword ptr [ECX + 0x5c]
00697f7d : MOV dword ptr [EDX + 0x10],EBX
00697f80 : MOV EDX,dword ptr [ECX + 0x5c]
00697f83 : PUSH EDI
00697f84 : MOV EDI,dword ptr [ECX + 0x2c]
00697f87 : MOV dword ptr [EDX + 0x8],EDI
00697f8a : MOV EDX,dword ptr [ECX + 0x5c]
00697f8d : MOV dword ptr [EDX + 0x4],EBX
00697f90 : MOV EDX,dword ptr [ECX + 0x5c]
00697f93 : MOV dword ptr [EDX + 0x1c],EBX
00697f96 : POP EDI
00697f97 : CMP dword ptr [ECX + 0x64],EBX
00697f9a : JNZ 0x00697fa2
00697f9c : MOV EDX,dword ptr [ECX + 0x5c]
00697f9f : MOV dword ptr [ECX + 0x64],EDX
00697fa2 : MOV byte ptr [ECX + 0x5a],AL
00697fa5 : MOV byte ptr [ECX + 0x5b],BL
00697fa8 : MOV dword ptr [ECX + 0x68],ESI
00697fab : XOR AL,AL
00697fad : POP EBX
00697fae : RET
