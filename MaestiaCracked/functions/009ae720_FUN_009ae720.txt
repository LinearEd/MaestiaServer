PROGRAM  : Maestia.exe
FUNCTION : FUN_009ae720
ENTRY    : 009ae720
BODY     : [[009ae720, 009ae7ec] [009ae7f0, 009ae89f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009ae720(undefined4 *param_1)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b3604c;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *param_1 = &PTR_LAB_00ccc768;
  local_8 = 5;
  if (param_1[0x1f] != param_1[0x20]) {
    uVar3 = FUN_00404250(param_1[0x20],uVar2);
    FUN_00405450(param_1);
    param_1[0x20] = uVar3;
  }
  uVar2 = param_1[0x14];
  piVar1 = (int *)param_1[0xe];
  while( true ) {
    if ((piVar1 == (int *)param_1[0xe]) && (uVar2 == param_1[0x14] + param_1[0x15])) break;
    uVar4 = uVar2 >> 2;
    if (piVar1 == (int *)0x0) {
      iVar5 = 0;
    }
    else {
      iVar5 = *piVar1;
    }
    if (*(uint *)(iVar5 + 0x14) <= uVar4) {
      if (piVar1 == (int *)0x0) {
        iVar5 = 0;
      }
      else {
        iVar5 = *piVar1;
      }
      uVar4 = uVar4 - *(int *)(iVar5 + 0x14);
    }
    if (piVar1 == (int *)0x0) {
      iVar5 = 0;
    }
    else {
      iVar5 = *piVar1;
    }
    iVar5 = *(int *)(*(int *)(*(int *)(iVar5 + 0x10) + uVar4 * 4) + (uVar2 & 3) * 4);
    if (iVar5 != 0) {
      FUN_0041f1e0(iVar5);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uVar2 = uVar2 + 1;
  }
  FUN_00476f00();
  FUN_009ae560(param_1);
  local_8._0_1_ = 4;
  param_1[0x2f] = &PTR_FUN_00cdec94;
  DeleteCriticalSection((LPCRITICAL_SECTION)(param_1 + 0x30));
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < (uint)param_1[0x2d]) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  param_1[0x2d] = 7;
  param_1[0x2c] = 0;
  *(undefined2 *)(param_1 + 0x28) = 0;
  local_8 = CONCAT31(local_8._1_3_,2);
  if (param_1[0x1f] != 0) {
    FUN_00405450(param_1);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  param_1[0x1f] = 0;
  param_1[0x20] = 0;
  param_1[0x21] = 0;
  local_8._0_1_ = 6;
  FUN_00476f00();
  local_8 = CONCAT31(local_8._1_3_,1);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009ae720 : PUSH EBP
009ae721 : MOV EBP,ESP
009ae723 : PUSH -0x1
009ae725 : PUSH 0xb3604c
009ae72a : MOV EAX,FS:[0x0]
009ae730 : PUSH EAX
009ae731 : SUB ESP,0x8
009ae734 : PUSH EBX
009ae735 : PUSH ESI
009ae736 : PUSH EDI
009ae737 : MOV EAX,[0x00d66fa0]
009ae73c : XOR EAX,EBP
009ae73e : PUSH EAX
009ae73f : LEA EAX,[EBP + -0xc]
009ae742 : MOV FS:[0x0],EAX
009ae748 : MOV EBX,dword ptr [EBP + 0x8]
009ae74b : MOV dword ptr [EBX],0xccc768
009ae751 : MOV dword ptr [EBP + -0x4],0x5
009ae758 : MOV EAX,dword ptr [EBX + 0x80]
009ae75e : MOV ECX,dword ptr [EBX + 0x7c]
009ae761 : CMP ECX,EAX
009ae763 : JZ 0x009ae787
009ae765 : PUSH EAX
009ae766 : CALL 0x00404250
009ae76b : MOV EDI,dword ptr [EBX + 0x80]
009ae771 : MOV ESI,EAX
009ae773 : MOV EAX,dword ptr [EBP + 0x8]
009ae776 : PUSH EAX
009ae777 : MOV EAX,ESI
009ae779 : CALL 0x00405450
009ae77e : ADD ESP,0x8
009ae781 : MOV dword ptr [EBX + 0x80],ESI
009ae787 : MOV EAX,dword ptr [EBX + 0x50]
009ae78a : MOV ESI,dword ptr [EBX + 0x38]
009ae78d : MOV EDX,EAX
009ae78f : MOV EAX,dword ptr [EBX + 0x50]
009ae792 : ADD EAX,dword ptr [EBX + 0x54]
009ae795 : LEA ECX,[EBX + 0x38]
009ae798 : MOV dword ptr [EBP + -0x10],EDX
009ae79b : CMP ESI,dword ptr [ECX]
009ae79d : JNZ 0x009ae7a3
009ae79f : CMP EDX,EAX
009ae7a1 : JZ 0x009ae7f3
009ae7a3 : MOV EAX,EDX
009ae7a5 : MOV ECX,EDX
009ae7a7 : SHR EAX,0x2
009ae7aa : AND ECX,0x3
009ae7ad : TEST ESI,ESI
009ae7af : JZ 0x009ae7b5
009ae7b1 : MOV EDI,dword ptr [ESI]
009ae7b3 : JMP 0x009ae7b7
009ae7b5 : XOR EDI,EDI
009ae7b7 : CMP dword ptr [EDI + 0x14],EAX
009ae7ba : JA 0x009ae7c9
009ae7bc : TEST ESI,ESI
009ae7be : JZ 0x009ae7c4
009ae7c0 : MOV EDI,dword ptr [ESI]
009ae7c2 : JMP 0x009ae7c6
009ae7c4 : XOR EDI,EDI
009ae7c6 : SUB EAX,dword ptr [EDI + 0x14]
009ae7c9 : TEST ESI,ESI
009ae7cb : JZ 0x009ae7d1
009ae7cd : MOV EDI,dword ptr [ESI]
009ae7cf : JMP 0x009ae7d3
009ae7d1 : XOR EDI,EDI
009ae7d3 : MOV EDI,dword ptr [EDI + 0x10]
009ae7d6 : MOV EAX,dword ptr [EDI + EAX*0x4]
009ae7d9 : MOV EDI,dword ptr [EAX + ECX*0x4]
009ae7dc : TEST EDI,EDI
009ae7de : JZ 0x009ae7f0
009ae7e0 : PUSH EDI
009ae7e1 : CALL 0x0041f1e0
009ae7e6 : MOV ECX,EDI
009ae7e8 : CALL 0x006f04e0
009ae7f0 : INC EDX
009ae7f1 : JMP 0x009ae78f
009ae7f3 : MOV ESI,ECX
009ae7f5 : CALL 0x00476f00
009ae7fa : PUSH EBX
009ae7fb : CALL 0x009ae560
009ae800 : MOV byte ptr [EBP + -0x4],0x4
009ae804 : LEA ECX,[EBX + 0xc0]
009ae80a : PUSH ECX
009ae80b : MOV dword ptr [EBX + 0xbc],0xcdec94
009ae815 : CALL dword ptr [0x00b850fc]
009ae81b : MOV byte ptr [EBP + -0x4],0x3
009ae81f : CMP dword ptr [EBX + 0xb4],0x8
009ae826 : JC 0x009ae833
009ae828 : MOV ECX,dword ptr [EBX + 0xa0]
009ae82e : CALL 0x006f04e0
009ae833 : XOR ESI,ESI
009ae835 : MOV dword ptr [EBX + 0xb4],0x7
009ae83f : MOV dword ptr [EBX + 0xb0],ESI
009ae845 : XOR EDX,EDX
009ae847 : MOV word ptr [EBX + 0xa0],DX
009ae84e : MOV byte ptr [EBP + -0x4],0x2
009ae852 : MOV EAX,dword ptr [EBX + 0x7c]
009ae855 : CMP EAX,ESI
009ae857 : JZ 0x009ae873
009ae859 : MOV ECX,dword ptr [EBP + 0x8]
009ae85c : MOV EDI,dword ptr [EBX + 0x80]
009ae862 : PUSH ECX
009ae863 : CALL 0x00405450
009ae868 : MOV ECX,dword ptr [EBX + 0x7c]
009ae86b : ADD ESP,0x4
009ae86e : CALL 0x006f04e0
009ae873 : MOV dword ptr [EBX + 0x7c],ESI
009ae876 : MOV dword ptr [EBX + 0x80],ESI
009ae87c : MOV dword ptr [EBX + 0x84],ESI
009ae882 : MOV byte ptr [EBP + -0x4],0x1
009ae886 : LEA ESI,[EBX + 0x58]
009ae889 : MOV dword ptr [EBP + -0x10],ESI
009ae88c : MOV byte ptr [EBP + -0x4],0x6
009ae890 : CALL 0x00476f00
009ae895 : MOV byte ptr [EBP + -0x4],0x1
009ae899 : MOV ECX,dword ptr [ESI]
009ae89b : CALL 0x006f04e0
