PROGRAM  : Maestia.exe
FUNCTION : FUN_004c12c0
ENTRY    : 004c12c0
BODY     : [[004c12c0, 004c1338] [004c1340, 004c1477]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004c1358) */

void FUN_004c12c0(int param_1,undefined4 *param_2,int param_3)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  int *piVar7;
  undefined8 uVar8;
  
  uVar3 = FUN_0042c360(0x1f31d);
  uVar8 = FUN_0063871f(uVar3 & 0x7fffffff);
  uVar3 = (int)((ulonglong)uVar8 >> 0x20) * 0x41a7 + (int)uVar8 * -0xb14;
  if ((int)uVar3 < 0) {
    uVar3 = uVar3 + 0x7fffffff;
  }
  uVar3 = *(uint *)(param_1 + 0x20) & uVar3;
  if (*(uint *)(param_1 + 0x24) <= uVar3) {
    uVar3 = uVar3 + (-1 - (*(uint *)(param_1 + 0x20) >> 1));
  }
  piVar1 = (int *)(*(int *)(param_1 + 0x14) + uVar3 * 4);
  piVar7 = (int *)*piVar1;
  piVar1 = (int *)piVar1[1];
  if (piVar1 != piVar7) {
    uVar3 = *(uint *)(param_3 + 0x14);
    do {
      if (*(uint *)(param_3 + 0x18) < 8) {
        puVar4 = (ushort *)(param_3 + 4);
      }
      else {
        puVar4 = *(ushort **)(param_3 + 4);
      }
      uVar2 = piVar7[7];
      uVar6 = uVar2;
      if (uVar3 <= uVar2) {
        uVar6 = uVar3;
      }
      if ((uint)piVar7[8] < 8) {
        puVar5 = (ushort *)(piVar7 + 3);
      }
      else {
        puVar5 = (ushort *)piVar7[3];
      }
      for (; uVar6 != 0; uVar6 = uVar6 - 1) {
        if (*puVar5 != *puVar4) {
          uVar6 = (-(uint)(*puVar5 < *puVar4) & 0xfffffffe) + 1;
          if (uVar6 != 0) goto LAB_004c1396;
          break;
        }
        puVar5 = puVar5 + 1;
        puVar4 = puVar4 + 1;
      }
      if (uVar3 <= uVar2) {
        uVar6 = (uint)(uVar2 != uVar3);
LAB_004c1396:
        if (-1 < (int)uVar6) {
          uVar2 = piVar7[7];
          if ((uint)piVar7[8] < 8) {
            puVar4 = (ushort *)(piVar7 + 3);
          }
          else {
            puVar4 = (ushort *)piVar7[3];
          }
          uVar6 = *(uint *)(param_3 + 0x14);
          if (uVar3 < *(uint *)(param_3 + 0x14)) {
            uVar6 = uVar3;
          }
          uVar3 = uVar2;
          if (uVar6 < uVar2) {
            uVar3 = uVar6;
          }
          if (*(uint *)(param_3 + 0x18) < 8) {
            puVar5 = (ushort *)(param_3 + 4);
          }
          else {
            puVar5 = *(ushort **)(param_3 + 4);
          }
          goto joined_r0x004c1408;
        }
      }
      piVar7 = (int *)*piVar7;
    } while (piVar1 != piVar7);
  }
  *param_2 = *(undefined4 *)(param_1 + 8);
  return;
joined_r0x004c1408:
  if (uVar3 == 0) {
LAB_004c1435:
    if (uVar2 <= uVar6) {
      uVar3 = (uint)(uVar6 != uVar2);
LAB_004c1445:
      if (-1 < (int)uVar3) {
        *param_2 = piVar7;
        return;
      }
    }
    *param_2 = *(undefined4 *)(param_1 + 8);
    return;
  }
  if (*puVar5 != *puVar4) {
    uVar3 = (-(uint)(*puVar5 < *puVar4) & 0xfffffffe) + 1;
    if (uVar3 != 0) goto LAB_004c1445;
    goto LAB_004c1435;
  }
  puVar5 = puVar5 + 1;
  puVar4 = puVar4 + 1;
  uVar3 = uVar3 - 1;
  goto joined_r0x004c1408;
}



============================================================
DISASSEMBLY
============================================================
004c12c0 : PUSH EBP
004c12c1 : MOV EBP,ESP
004c12c3 : SUB ESP,0xc
004c12c6 : PUSH EBX
004c12c7 : PUSH ESI
004c12c8 : MOV ESI,dword ptr [EBP + 0x10]
004c12cb : PUSH EDI
004c12cc : PUSH 0x1f31d
004c12d1 : MOV EAX,ESI
004c12d3 : CALL 0x0042c360
004c12d8 : AND EAX,0x7fffffff
004c12dd : PUSH EAX
004c12de : CALL 0x0063871f
004c12e3 : IMUL EDX,EDX,0x41a7
004c12e9 : IMUL EAX,EAX,0xb14
004c12ef : ADD ESP,0x8
004c12f2 : SUB EDX,EAX
004c12f4 : JNS 0x004c12fc
004c12f6 : ADD EDX,0x7fffffff
004c12fc : MOV EBX,dword ptr [EBP + 0x8]
004c12ff : MOV ECX,dword ptr [EBX + 0x20]
004c1302 : MOV EAX,ECX
004c1304 : AND EAX,EDX
004c1306 : CMP dword ptr [EBX + 0x24],EAX
004c1309 : JA 0x004c1314
004c130b : SHR ECX,0x1
004c130d : OR EDX,0xffffffff
004c1310 : SUB EDX,ECX
004c1312 : ADD EAX,EDX
004c1314 : MOV ECX,dword ptr [EBX + 0x14]
004c1317 : LEA EAX,[ECX + EAX*0x4]
004c131a : MOV ECX,dword ptr [EAX]
004c131c : MOV EAX,dword ptr [EAX + 0x4]
004c131f : MOV EDI,ECX
004c1321 : MOV dword ptr [EBP + -0x4],EDI
004c1324 : MOV dword ptr [EBP + -0xc],EAX
004c1327 : CMP EAX,ECX
004c1329 : JZ 0x004c13a7
004c132b : MOV EBX,dword ptr [ESI + 0x14]
004c132e : MOV EDX,dword ptr [ESI + 0x18]
004c1331 : MOV dword ptr [EBP + -0x4],EBX
004c1334 : MOV dword ptr [EBP + -0x8],EDX
004c1337 : JMP 0x004c1343
004c1340 : MOV ESI,dword ptr [EBP + 0x10]
004c1343 : CMP dword ptr [EBP + -0x8],0x8
004c1347 : JC 0x004c134e
004c1349 : MOV EAX,dword ptr [ESI + 0x4]
004c134c : JMP 0x004c1351
004c134e : LEA EAX,[ESI + 0x4]
004c1351 : MOV ESI,dword ptr [EDI + 0x1c]
004c1354 : MOV ECX,ESI
004c1356 : CMP ECX,ESI
004c1358 : CMOVC ESI,ECX
004c135b : MOV EDX,ESI
004c135d : CMP ESI,EBX
004c135f : JC 0x004c1363
004c1361 : MOV EDX,EBX
004c1363 : CMP dword ptr [EDI + 0x20],0x8
004c1367 : JC 0x004c136e
004c1369 : MOV ECX,dword ptr [EDI + 0xc]
004c136c : JMP 0x004c1371
004c136e : LEA ECX,[EDI + 0xc]
004c1371 : TEST EDX,EDX
004c1373 : JBE 0x004c138b
004c1375 : MOV BX,word ptr [ECX]
004c1378 : CMP BX,word ptr [EAX]
004c137b : JNZ 0x004c13b8
004c137d : ADD ECX,0x2
004c1380 : ADD EAX,0x2
004c1383 : SUB EDX,0x1
004c1386 : JNZ 0x004c1375
004c1388 : MOV EBX,dword ptr [EBP + -0x4]
004c138b : CMP ESI,EBX
004c138d : JC 0x004c139a
004c138f : XOR EAX,EAX
004c1391 : CMP ESI,EBX
004c1393 : SETNZ AL
004c1396 : TEST EAX,EAX
004c1398 : JGE 0x004c13cd
004c139a : MOV EDI,dword ptr [EDI]
004c139c : CMP dword ptr [EBP + -0xc],EDI
004c139f : JNZ 0x004c1340
004c13a1 : MOV EBX,dword ptr [EBP + 0x8]
004c13a4 : MOV dword ptr [EBP + -0x4],EDI
004c13a7 : MOV EDX,dword ptr [EBX + 0x8]
004c13aa : MOV EAX,dword ptr [EBP + 0xc]
004c13ad : POP EDI
004c13ae : POP ESI
004c13af : MOV dword ptr [EAX],EDX
004c13b1 : POP EBX
004c13b2 : MOV ESP,EBP
004c13b4 : POP EBP
004c13b5 : RET 0xc
004c13b8 : MOV CX,BX
004c13bb : CMP CX,word ptr [EAX]
004c13be : SBB EAX,EAX
004c13c0 : AND EAX,0xfffffffe
004c13c3 : ADD EAX,0x1
004c13c6 : JZ 0x004c1388
004c13c8 : MOV EBX,dword ptr [EBP + -0x4]
004c13cb : JMP 0x004c1396
004c13cd : MOV EDX,dword ptr [EDI + 0x1c]
004c13d0 : MOV ECX,0x8
004c13d5 : MOV dword ptr [EBP + -0x4],EDI
004c13d8 : MOV dword ptr [EBP + -0xc],EDX
004c13db : CMP dword ptr [EDI + 0x20],ECX
004c13de : JC 0x004c13e5
004c13e0 : MOV EAX,dword ptr [EDI + 0xc]
004c13e3 : JMP 0x004c13e8
004c13e5 : LEA EAX,[EDI + 0xc]
004c13e8 : MOV EDI,dword ptr [EBP + 0x10]
004c13eb : MOV ESI,dword ptr [EDI + 0x14]
004c13ee : CMP EBX,ESI
004c13f0 : CMOVC ESI,EBX
004c13f3 : CMP ESI,EDX
004c13f5 : JNC 0x004c13f9
004c13f7 : MOV EDX,ESI
004c13f9 : CMP dword ptr [EBP + -0x8],ECX
004c13fc : JC 0x004c1403
004c13fe : MOV ECX,dword ptr [EDI + 0x4]
004c1401 : JMP 0x004c1406
004c1403 : LEA ECX,[EDI + 0x4]
004c1406 : TEST EDX,EDX
004c1408 : JBE 0x004c1435
004c140a : LEA EBX,[EBX]
004c1410 : MOV DI,word ptr [ECX]
004c1413 : CMP DI,word ptr [EAX]
004c1416 : JNZ 0x004c1425
004c1418 : ADD ECX,0x2
004c141b : ADD EAX,0x2
004c141e : SUB EDX,0x1
004c1421 : JNZ 0x004c1410
004c1423 : JMP 0x004c1435
004c1425 : MOV DX,DI
004c1428 : CMP DX,word ptr [EAX]
004c142b : SBB EAX,EAX
004c142d : AND EAX,0xfffffffe
004c1430 : ADD EAX,0x1
004c1433 : JNZ 0x004c1445
004c1435 : MOV EAX,dword ptr [EBP + -0xc]
004c1438 : CMP ESI,EAX
004c143a : JC 0x004c1449
004c143c : XOR ECX,ECX
004c143e : CMP ESI,EAX
004c1440 : SETNZ CL
004c1443 : MOV EAX,ECX
004c1445 : TEST EAX,EAX
004c1447 : JGE 0x004c1465
004c1449 : MOV EDX,dword ptr [EBP + 0x8]
004c144c : MOV EAX,dword ptr [EDX + 0x8]
004c144f : MOV dword ptr [EBP + 0x10],EAX
004c1452 : LEA EAX,[EBP + 0x10]
004c1455 : MOV ECX,dword ptr [EAX]
004c1457 : MOV EAX,dword ptr [EBP + 0xc]
004c145a : POP EDI
004c145b : POP ESI
004c145c : MOV dword ptr [EAX],ECX
004c145e : POP EBX
004c145f : MOV ESP,EBP
004c1461 : POP EBP
004c1462 : RET 0xc
004c1465 : LEA EAX,[EBP + -0x4]
004c1468 : MOV ECX,dword ptr [EAX]
004c146a : MOV EAX,dword ptr [EBP + 0xc]
004c146d : POP EDI
004c146e : POP ESI
004c146f : MOV dword ptr [EAX],ECX
004c1471 : POP EBX
004c1472 : MOV ESP,EBP
004c1474 : POP EBP
004c1475 : RET 0xc
