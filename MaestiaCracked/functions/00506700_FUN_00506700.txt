PROGRAM  : Maestia.exe
FUNCTION : FUN_00506700
ENTRY    : 00506700
BODY     : [[00506700, 005068e6]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00506851) */
/* WARNING: Removing unreachable block (ram,0x00506808) */
/* WARNING: Removing unreachable block (ram,0x0050689b) */

void FUN_00506700(int param_1,uint *param_2)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  int iVar5;
  char *pcVar6;
  undefined1 local_10 [4];
  double local_c;
  
  iVar3 = FUN_00515840(0x30,0);
  if (iVar3 == 0) {
    iVar3 = 0;
  }
  else {
    iVar3 = FUN_00551210(*(undefined4 *)(param_1 + 0x18));
  }
  if (((byte)param_2[3] & 7) != 0) {
    switch((byte)param_2[3] & 7) {
    case 1:
      pcVar6 = "single";
      break;
    case 2:
      pcVar6 = "thick";
      break;
    case 3:
      pcVar6 = "dotted";
      break;
    case 4:
      pcVar6 = "ditheredSingle";
      break;
    case 5:
      pcVar6 = "ditheredThick";
      break;
    default:
      goto switchD_00506754_default;
    }
    pcVar4 = pcVar6;
    do {
      cVar2 = *pcVar4;
      pcVar4 = pcVar4 + 1;
    } while (cVar2 != '\0');
    iVar5 = FUN_00525380(pcVar6,(int)pcVar4 - (int)(pcVar6 + 1),0);
    *(int *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1;
    local_10[0] = 5;
    local_c = (double)CONCAT44(local_c._4_4_,iVar5);
    *(int *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1;
    FUN_00500670(*(int *)(param_1 + 0x18) + 0x78,"underlineStyle",local_10);
    FUN_00526bc0();
    piVar1 = (int *)(iVar5 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
  }
switchD_00506754_default:
  if ((param_2[3] & 0x20) != 0) {
    local_c = (double)(param_2[2] & 0xffffff);
    local_10[0] = 3;
    FUN_00500670(*(int *)(param_1 + 0x18) + 0x78,"underlineColor",local_10);
    FUN_00526bc0();
  }
  if ((param_2[3] & 8) != 0) {
    local_c = (double)(*param_2 & 0xffffff);
    local_10[0] = 3;
    FUN_00500670(*(int *)(param_1 + 0x18) + 0x78,"backgroundColor",local_10);
    FUN_00526bc0();
  }
  if ((param_2[3] & 0x10) != 0) {
    local_c = (double)(param_2[1] & 0xffffff);
    local_10[0] = 3;
    FUN_00500670(*(int *)(param_1 + 0x18) + 0x78,"textColor",local_10);
    FUN_00526bc0();
  }
  FUN_005271c0(iVar3);
  if (iVar3 != 0) {
    FUN_00503db0();
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00506700 : SUB ESP,0x10
00506703 : PUSH EBP
00506704 : PUSH EDI
00506705 : MOV EDI,dword ptr [ESP + 0x1c]
00506709 : MOV EAX,dword ptr [EDI + 0x18]
0050670c : MOV ECX,dword ptr [EAX + 0x78]
0050670f : MOV ECX,dword ptr [ECX + 0x288]
00506715 : PUSH 0x0
00506717 : PUSH 0x30
00506719 : CALL 0x00515840
0050671e : TEST EAX,EAX
00506720 : JZ 0x00506731
00506722 : MOV EDX,dword ptr [EDI + 0x18]
00506725 : PUSH EDX
00506726 : MOV ECX,EAX
00506728 : CALL 0x00551210
0050672d : MOV EBP,EAX
0050672f : JMP 0x00506733
00506731 : XOR EBP,EBP
00506733 : PUSH EBX
00506734 : PUSH ESI
00506735 : MOV ESI,dword ptr [ESP + 0x28]
00506739 : MOV AL,byte ptr [ESI + 0xc]
0050673c : TEST AL,0x7
0050673e : JZ 0x005067e8
00506744 : MOVZX EAX,AL
00506747 : AND EAX,0x7
0050674a : DEC EAX
0050674b : CMP EAX,0x4
0050674e : JA 0x005067e8
00506754 : JMP dword ptr [EAX*0x4 + 0x5068e8]
0050675b : MOV ECX,0xb86630
00506760 : JMP 0x0050677c
00506762 : MOV ECX,0xb86628
00506767 : JMP 0x0050677c
00506769 : MOV ECX,0xb86638
0050676e : JMP 0x0050677c
00506770 : MOV ECX,0xb86618
00506775 : JMP 0x0050677c
00506777 : MOV ECX,0xb86608
0050677c : MOV EAX,dword ptr [EDI + 0x18]
0050677f : MOV ESI,dword ptr [EAX + 0x78]
00506782 : MOV EAX,ECX
00506784 : LEA EDX,[EAX + 0x1]
00506787 : MOV BL,byte ptr [EAX]
00506789 : INC EAX
0050678a : TEST BL,BL
0050678c : JNZ 0x00506787
0050678e : PUSH 0x0
00506790 : SUB EAX,EDX
00506792 : PUSH EAX
00506793 : PUSH ECX
00506794 : LEA ECX,[ESI + 0x254]
0050679a : CALL 0x00525380
0050679f : MOV ESI,EAX
005067a1 : MOV EAX,0x1
005067a6 : ADD dword ptr [ESI + 0x8],EAX
005067a9 : MOV byte ptr [ESP + 0x10],0x5
005067ae : MOV dword ptr [ESP + 0x14],ESI
005067b2 : ADD dword ptr [ESI + 0x8],EAX
005067b5 : MOV EDX,dword ptr [EDI + 0x18]
005067b8 : LEA ECX,[ESP + 0x10]
005067bc : PUSH ECX
005067bd : PUSH 0xb86640
005067c2 : ADD EDX,0x78
005067c5 : PUSH EDX
005067c6 : LEA ECX,[EBP + 0x10]
005067c9 : CALL 0x00500670
005067ce : LEA ECX,[ESP + 0x10]
005067d2 : CALL 0x00526bc0
005067d7 : ADD dword ptr [ESI + 0x8],-0x1
005067db : JNZ 0x005067e4
005067dd : MOV ECX,ESI
005067df : CALL 0x00525340
005067e4 : MOV ESI,dword ptr [ESP + 0x28]
005067e8 : TEST byte ptr [ESI + 0xc],0x20
005067ec : MOV BL,0x3
005067ee : JZ 0x00506834
005067f0 : MOV EAX,dword ptr [ESI + 0x8]
005067f3 : AND EAX,0xffffff
005067f8 : MOV dword ptr [ESP + 0x28],EAX
005067fc : FILD dword ptr [ESP + 0x28]
00506800 : MOV byte ptr [ESP + 0x10],BL
00506804 : TEST EAX,EAX
00506806 : JGE 0x0050680e
00506808 : FADD double ptr [0x00cdf6f8]
0050680e : MOV EDX,dword ptr [EDI + 0x18]
00506811 : FSTP double ptr [ESP + 0x14]
00506815 : LEA ECX,[ESP + 0x10]
00506819 : PUSH ECX
0050681a : PUSH 0xb86650
0050681f : ADD EDX,0x78
00506822 : PUSH EDX
00506823 : LEA ECX,[EBP + 0x10]
00506826 : CALL 0x00500670
0050682b : LEA ECX,[ESP + 0x10]
0050682f : CALL 0x00526bc0
00506834 : TEST byte ptr [ESI + 0xc],0x8
00506838 : JZ 0x0050687d
0050683a : MOV EAX,dword ptr [ESI]
0050683c : AND EAX,0xffffff
00506841 : MOV dword ptr [ESP + 0x28],EAX
00506845 : FILD dword ptr [ESP + 0x28]
00506849 : MOV byte ptr [ESP + 0x10],BL
0050684d : TEST EAX,EAX
0050684f : JGE 0x00506857
00506851 : FADD double ptr [0x00cdf6f8]
00506857 : MOV EDX,dword ptr [EDI + 0x18]
0050685a : FSTP double ptr [ESP + 0x14]
0050685e : LEA ECX,[ESP + 0x10]
00506862 : PUSH ECX
00506863 : PUSH 0xb86660
00506868 : ADD EDX,0x78
0050686b : PUSH EDX
0050686c : LEA ECX,[EBP + 0x10]
0050686f : CALL 0x00500670
00506874 : LEA ECX,[ESP + 0x10]
00506878 : CALL 0x00526bc0
0050687d : TEST byte ptr [ESI + 0xc],0x10
00506881 : JZ 0x005068c7
00506883 : MOV EAX,dword ptr [ESI + 0x4]
00506886 : AND EAX,0xffffff
0050688b : MOV dword ptr [ESP + 0x28],EAX
0050688f : FILD dword ptr [ESP + 0x28]
00506893 : MOV byte ptr [ESP + 0x10],BL
00506897 : TEST EAX,EAX
00506899 : JGE 0x005068a1
0050689b : FADD double ptr [0x00cdf6f8]
005068a1 : MOV EDX,dword ptr [EDI + 0x18]
005068a4 : FSTP double ptr [ESP + 0x14]
005068a8 : LEA ECX,[ESP + 0x10]
005068ac : PUSH ECX
005068ad : PUSH 0xb86678
005068b2 : ADD EDX,0x78
005068b5 : PUSH EDX
005068b6 : LEA ECX,[EBP + 0x10]
005068b9 : CALL 0x00500670
005068be : LEA ECX,[ESP + 0x10]
005068c2 : CALL 0x00526bc0
005068c7 : MOV ECX,dword ptr [EDI + 0x4]
005068ca : PUSH EBP
005068cb : CALL 0x005271c0
005068d0 : POP ESI
005068d1 : POP EBX
005068d2 : POP EDI
005068d3 : TEST EBP,EBP
005068d5 : JZ 0x005068e2
005068d7 : MOV ECX,EBP
005068d9 : POP EBP
005068da : ADD ESP,0x10
005068dd : JMP 0x00503db0
005068e2 : POP EBP
005068e3 : ADD ESP,0x10
005068e6 : RET
