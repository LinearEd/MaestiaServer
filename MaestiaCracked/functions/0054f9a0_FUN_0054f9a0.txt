PROGRAM  : Maestia.exe
FUNCTION : FUN_0054f9a0
ENTRY    : 0054f9a0
BODY     : [[0054f9a0, 0054fa54]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054f9a0(uint *param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  uint *puVar7;
  
  iVar1 = *in_ECX;
  if (iVar1 != 0) {
    uVar2 = *(uint *)(iVar1 + 4);
    uVar4 = *(uint *)(*param_1 + 0xc) & uVar2;
    puVar7 = (uint *)(iVar1 + 8 + uVar4 * 0x18);
    if ((*(int *)(iVar1 + 8 + uVar4 * 0x18) != -2) &&
       ((*(uint *)(puVar7[1] + 0xc) & uVar2) == uVar4)) {
      uVar3 = uVar4;
      uVar6 = 0xffffffff;
      while ((uVar5 = uVar3, (*(uint *)(puVar7[1] + 0xc) & uVar2) != uVar4 ||
             (puVar7[1] != *param_1))) {
        uVar3 = *puVar7;
        if (uVar3 == 0xffffffff) {
          return;
        }
        puVar7 = (uint *)(iVar1 + 8 + uVar3 * 0x18);
        uVar6 = uVar5;
      }
      uVar2 = *puVar7;
      if (uVar4 == uVar5) {
        if (uVar2 != 0xffffffff) {
          FUN_0054f270();
          FUN_0054f130(iVar1 + 8 + uVar2 * 0x18);
        }
      }
      else {
        *(uint *)(iVar1 + 8 + uVar6 * 0x18) = uVar2;
      }
      FUN_0054f270();
      *(int *)*in_ECX = *(int *)*in_ECX + -1;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0054f9a0 : SUB ESP,0x8
0054f9a3 : MOV EDX,dword ptr [ECX]
0054f9a5 : MOV dword ptr [ESP + 0x4],ECX
0054f9a9 : TEST EDX,EDX
0054f9ab : JZ 0x0054fa4f
0054f9b1 : MOV EAX,dword ptr [ESP + 0xc]
0054f9b5 : MOV EAX,dword ptr [EAX]
0054f9b7 : PUSH ESI
0054f9b8 : MOV dword ptr [ESP + 0x4],EAX
0054f9bc : MOV EAX,dword ptr [EAX + 0xc]
0054f9bf : PUSH EDI
0054f9c0 : MOV EDI,dword ptr [EDX + 0x4]
0054f9c3 : AND EAX,EDI
0054f9c5 : LEA ECX,[EAX + EAX*0x2]
0054f9c8 : CMP dword ptr [EDX + ECX*0x8 + 0x8],-0x2
0054f9cd : LEA ESI,[EDX + ECX*0x8 + 0x8]
0054f9d1 : JZ 0x0054fa4d
0054f9d3 : MOV ECX,dword ptr [ESI + 0x4]
0054f9d6 : MOV ECX,dword ptr [ECX + 0xc]
0054f9d9 : AND ECX,EDI
0054f9db : CMP ECX,EAX
0054f9dd : JNZ 0x0054fa4d
0054f9df : PUSH EBX
0054f9e0 : MOV dword ptr [ESP + 0x18],EAX
0054f9e4 : OR EBX,0xffffffff
0054f9e7 : PUSH EBP
0054f9e8 : MOV ECX,dword ptr [ESI + 0x4]
0054f9eb : MOV EBP,dword ptr [ECX + 0xc]
0054f9ee : AND EBP,EDI
0054f9f0 : CMP EBP,dword ptr [ESP + 0x1c]
0054f9f4 : JNZ 0x0054f9fc
0054f9f6 : CMP ECX,dword ptr [ESP + 0x10]
0054f9fa : JZ 0x0054fa0e
0054f9fc : MOV EBX,EAX
0054f9fe : MOV EAX,dword ptr [ESI]
0054fa00 : CMP EAX,-0x1
0054fa03 : JZ 0x0054fa4b
0054fa05 : LEA ECX,[EAX + EAX*0x2]
0054fa08 : LEA ESI,[EDX + ECX*0x8 + 0x8]
0054fa0c : JMP 0x0054f9e8
0054fa0e : CMP dword ptr [ESP + 0x1c],EAX
0054fa12 : MOV EAX,dword ptr [ESI]
0054fa14 : JNZ 0x0054fa35
0054fa16 : CMP EAX,-0x1
0054fa19 : JZ 0x0054fa3c
0054fa1b : LEA EAX,[EAX + EAX*0x2]
0054fa1e : MOV ECX,ESI
0054fa20 : LEA EDI,[EDX + EAX*0x8 + 0x8]
0054fa24 : CALL 0x0054f270
0054fa29 : PUSH EDI
0054fa2a : MOV ECX,ESI
0054fa2c : CALL 0x0054f130
0054fa31 : MOV ESI,EDI
0054fa33 : JMP 0x0054fa3c
0054fa35 : LEA ECX,[EBX + EBX*0x2]
0054fa38 : MOV dword ptr [EDX + ECX*0x8 + 0x8],EAX
0054fa3c : MOV ECX,ESI
0054fa3e : CALL 0x0054f270
0054fa43 : MOV ECX,dword ptr [ESP + 0x14]
0054fa47 : MOV EAX,dword ptr [ECX]
0054fa49 : DEC dword ptr [EAX]
0054fa4b : POP EBP
0054fa4c : POP EBX
0054fa4d : POP EDI
0054fa4e : POP ESI
0054fa4f : ADD ESP,0x8
0054fa52 : RET 0x4
