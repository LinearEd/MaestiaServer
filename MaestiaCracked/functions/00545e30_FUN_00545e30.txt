PROGRAM  : Maestia.exe
FUNCTION : FUN_00545e30
ENTRY    : 00545e30
BODY     : [[00545e30, 00545f8b]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00545e30(void)

{
  undefined4 *puVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  int in_ECX;
  undefined1 local_2c [44];
  
  iVar2 = FUN_0053cfd0();
  *(undefined4 *)(in_ECX + 0x70) = *(undefined4 *)(iVar2 + 4);
  if (*(int *)(in_ECX + 0x1c) != 0) {
    iVar2 = FUN_0053b4b0();
    if ((iVar2 != 0) &&
       (uVar3 = *(int *)(*(int *)(in_ECX + 0x30) + 0x1c) + *(int *)(in_ECX + 0x70),
       uVar4 = *(uint *)(*(int *)(in_ECX + 0x1c) + 0x30), uVar4 <= uVar3)) {
      if (uVar3 == uVar4) {
        uVar4 = FUN_0053b4b0();
        if (*(uint *)(in_ECX + 0x28) < uVar4) {
          iVar5 = FUN_0053cfd0();
          iVar2 = *(int *)(in_ECX + 0x28);
          *(int *)(in_ECX + 0x70) = *(int *)(iVar5 + 4) + iVar2;
          *(undefined2 *)(in_ECX + 0x74) =
               *(undefined2 *)(*(int *)(*(int *)(in_ECX + 0x1c) + 0x14) + iVar2 * 2);
          uVar6 = FUN_0053e510(iVar2);
          FUN_0053cfd0();
          uVar6 = FUN_0055fca0(local_2c,uVar6);
          uVar6 = FUN_00560f80(uVar6);
          if (*(GRefCountImpl **)(in_ECX + 0x6c) != (GRefCountImpl *)0x0) {
            GRefCountImpl::Release(*(GRefCountImpl **)(in_ECX + 0x6c));
          }
          *(undefined4 *)(in_ECX + 0x6c) = uVar6;
          FUN_00504260();
          return (undefined4 *)(in_ECX + 0x6c);
        }
      }
      iVar2 = FUN_0053cfd0();
      iVar5 = FUN_0053b4b0();
      *(int *)(in_ECX + 0x70) = *(int *)(iVar2 + 4) + iVar5;
    }
  }
  puVar7 = (undefined4 *)FUN_0053cfd0();
  puVar1 = (undefined4 *)(in_ECX + 0x6c);
  if ((GRefCountImpl *)*puVar7 != (GRefCountImpl *)0x0) {
    GRefCountImpl::AddRef((GRefCountImpl *)*puVar7);
  }
  if ((GRefCountImpl *)*puVar1 != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)*puVar1);
  }
  *puVar1 = *puVar7;
  if ((*(byte *)(*(int *)(in_ECX + 0x2c) + 0x141) & 0x10) != 0) {
    iVar2 = FUN_0053cfd0();
    if (*(short *)(iVar2 + 8) != 0) {
      *(undefined2 *)(in_ECX + 0x74) = 0x2a;
      return puVar1;
    }
  }
  iVar2 = FUN_0053cfd0();
  *(undefined2 *)(in_ECX + 0x74) = *(undefined2 *)(iVar2 + 8);
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
00545e30 : SUB ESP,0x2c
00545e33 : PUSH EBX
00545e34 : PUSH ESI
00545e35 : MOV ESI,ECX
00545e37 : PUSH EDI
00545e38 : LEA EDI,[ESI + 0x4c]
00545e3b : MOV ECX,EDI
00545e3d : CALL 0x0053cfd0
00545e42 : MOV EAX,dword ptr [EAX + 0x4]
00545e45 : MOV dword ptr [ESI + 0x70],EAX
00545e48 : MOV EAX,dword ptr [ESI + 0x1c]
00545e4b : TEST EAX,EAX
00545e4d : JZ 0x00545f1d
00545e53 : LEA ECX,[EAX + 0x14]
00545e56 : CALL 0x0053b4b0
00545e5b : TEST EAX,EAX
00545e5d : JBE 0x00545f1d
00545e63 : MOV ECX,dword ptr [ESI + 0x30]
00545e66 : MOV EAX,dword ptr [ECX + 0x1c]
00545e69 : MOV ECX,dword ptr [ESI + 0x1c]
00545e6c : ADD EAX,dword ptr [ESI + 0x70]
00545e6f : MOV EDX,dword ptr [ECX + 0x30]
00545e72 : CMP EAX,EDX
00545e74 : JC 0x00545f1d
00545e7a : JNZ 0x00545f01
00545e80 : ADD ECX,0x14
00545e83 : CALL 0x0053b4b0
00545e88 : CMP dword ptr [ESI + 0x28],EAX
00545e8b : JNC 0x00545f01
00545e8d : MOV ECX,EDI
00545e8f : CALL 0x0053cfd0
00545e94 : MOV ECX,dword ptr [ESI + 0x28]
00545e97 : MOV EDX,dword ptr [EAX + 0x4]
00545e9a : MOV EAX,dword ptr [ESI + 0x1c]
00545e9d : ADD EDX,ECX
00545e9f : MOV dword ptr [ESI + 0x70],EDX
00545ea2 : MOV EDX,dword ptr [EAX + 0x14]
00545ea5 : MOV DX,word ptr [EDX + ECX*0x2]
00545ea9 : PUSH ECX
00545eaa : LEA ECX,[EAX + 0x14]
00545ead : MOV word ptr [ESI + 0x74],DX
00545eb1 : CALL 0x0053e510
00545eb6 : MOV ECX,EDI
00545eb8 : MOV EBX,EAX
00545eba : CALL 0x0053cfd0
00545ebf : MOV ECX,dword ptr [ESI + 0x1c]
00545ec2 : MOV EAX,dword ptr [EAX]
00545ec4 : MOV EDI,dword ptr [ECX + 0x10]
00545ec7 : PUSH EBX
00545ec8 : LEA EDX,[ESP + 0x10]
00545ecc : PUSH EDX
00545ecd : MOV ECX,EAX
00545ecf : CALL 0x0055fca0
00545ed4 : PUSH EAX
00545ed5 : MOV ECX,EDI
00545ed7 : CALL 0x00560f80
00545edc : MOV ECX,dword ptr [ESI + 0x6c]
00545edf : ADD ESI,0x6c
00545ee2 : MOV EDI,EAX
00545ee4 : TEST ECX,ECX
00545ee6 : JZ 0x00545eed
00545ee8 : CALL 0x004ff7e0
00545eed : LEA ECX,[ESP + 0xc]
00545ef1 : MOV dword ptr [ESI],EDI
00545ef3 : CALL 0x00504260
00545ef8 : POP EDI
00545ef9 : MOV EAX,ESI
00545efb : POP ESI
00545efc : POP EBX
00545efd : ADD ESP,0x2c
00545f00 : RET
00545f01 : MOV ECX,EDI
00545f03 : CALL 0x0053cfd0
00545f08 : MOV EBX,EAX
00545f0a : MOV EAX,dword ptr [ESI + 0x1c]
00545f0d : LEA ECX,[EAX + 0x14]
00545f10 : CALL 0x0053b4b0
00545f15 : MOV ECX,dword ptr [EBX + 0x4]
00545f18 : ADD ECX,EAX
00545f1a : MOV dword ptr [ESI + 0x70],ECX
00545f1d : PUSH EBP
00545f1e : MOV ECX,EDI
00545f20 : CALL 0x0053cfd0
00545f25 : MOV EBX,EAX
00545f27 : MOV ECX,dword ptr [EBX]
00545f29 : LEA EBP,[ESI + 0x6c]
00545f2c : TEST ECX,ECX
00545f2e : JZ 0x00545f35
00545f30 : CALL 0x00523dd0
00545f35 : MOV ECX,dword ptr [EBP]
00545f38 : TEST ECX,ECX
00545f3a : JZ 0x00545f41
00545f3c : CALL 0x004ff7e0
00545f41 : MOV EDX,dword ptr [EBX]
00545f43 : MOV dword ptr [EBP],EDX
00545f46 : MOV EAX,dword ptr [ESI + 0x2c]
00545f49 : TEST byte ptr [EAX + 0x141],0x10
00545f50 : JZ 0x00545f73
00545f52 : MOV ECX,EDI
00545f54 : CALL 0x0053cfd0
00545f59 : CMP word ptr [EAX + 0x8],0x0
00545f5e : JZ 0x00545f73
00545f60 : MOV EAX,EBP
00545f62 : POP EBP
00545f63 : MOV ECX,0x2a
00545f68 : POP EDI
00545f69 : MOV word ptr [ESI + 0x74],CX
00545f6d : POP ESI
00545f6e : POP EBX
00545f6f : ADD ESP,0x2c
00545f72 : RET
00545f73 : MOV ECX,EDI
00545f75 : CALL 0x0053cfd0
00545f7a : MOV DX,word ptr [EAX + 0x8]
00545f7e : MOV EAX,EBP
00545f80 : POP EBP
00545f81 : POP EDI
00545f82 : MOV word ptr [ESI + 0x74],DX
00545f86 : POP ESI
00545f87 : POP EBX
00545f88 : ADD ESP,0x2c
00545f8b : RET
