PROGRAM  : Maestia.exe
FUNCTION : FUN_00883320
ENTRY    : 00883320
BODY     : [[00883320, 008835e7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00883320(void)

{
  uint uVar1;
  DWORD DVar2;
  int iVar3;
  int in_ECX;
  uint uVar4;
  int iVar5;
  uint uVar6;
  float fVar7;
  undefined4 local_50;
  uint local_3c;
  undefined1 local_30 [4];
  undefined2 local_2c;
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2a8aa;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  if (*(int *)(in_ECX + 0x1c) != 0) {
    fVar7 = 1500.0 / (float)(*(int *)(in_ECX + 0x1c) * 500);
    if (fVar7 <= 1.0) {
      *(float *)(in_ECX + 0x20) = fVar7;
    }
    else {
      *(undefined4 *)(in_ECX + 0x20) = 0x3f800000;
    }
    DVar2 = timeGetTime();
    FUN_00406460(&DAT_00c45308);
    local_8 = 0;
    iVar5 = DVar2 - *(int *)(in_ECX + 0x24);
    fVar7 = (float)iVar5;
    if (iVar5 < 0) {
      fVar7 = fVar7 + 4.2949673e+09;
    }
    if (fVar7 <= *(float *)(in_ECX + 0x20) * 500.0) {
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0(uVar1);
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = 0;
    }
    else {
      iVar5 = FUN_008822b0();
      if (iVar5 != 0) {
        FUN_00882130();
        FUN_00882650(local_30);
        if (local_1c != 0) {
          iVar3 = FUN_00a1ba80();
          if (iVar3 != 0) {
            if ((*(int *)(iVar5 + 0x68) == 0x14) || (local_50 = 0, *(char *)(iVar5 + 0x55) != '\0'))
            {
              local_50 = 1;
            }
            fVar7 = *(float *)(iVar5 + 0x58);
            if (fVar7 < 1.0) {
              if (0.0 < fVar7) {
                local_3c = (uint)(longlong)ROUND(fVar7 * 255.0 + DAT_00d72c24);
                uVar1 = local_3c;
              }
              else {
                uVar1 = 0;
              }
            }
            else {
              uVar1 = 0xff;
            }
            fVar7 = *(float *)(iVar5 + 0x5c);
            if (fVar7 < 1.0) {
              if (0.0 < fVar7) {
                local_3c = (uint)(longlong)ROUND(fVar7 * 255.0 + DAT_00d72c24);
                uVar6 = local_3c;
              }
              else {
                uVar6 = 0;
              }
            }
            else {
              uVar6 = 0xff;
            }
            fVar7 = *(float *)(iVar5 + 0x60);
            if (fVar7 < 1.0) {
              if (0.0 < fVar7) {
                local_3c = (uint)(longlong)ROUND(fVar7 * 255.0 + DAT_00d72c24);
                uVar4 = local_3c;
              }
              else {
                uVar4 = 0;
              }
            }
            else {
              uVar4 = 0xff;
            }
            fVar7 = *(float *)(iVar5 + 100);
            if (fVar7 < 1.0) {
              if (0.0 < fVar7) {
                local_3c = (uint)(longlong)ROUND(DAT_00d72c24 + fVar7 * 255.0);
              }
              else {
                local_3c = 0;
              }
            }
            else {
              local_3c = 0xff;
            }
            FUN_0088b7e0(((local_3c << 8 | uVar1) << 8 | uVar6) << 8 | uVar4,local_50,
                         *(undefined4 *)(in_ECX + 0x20),*(undefined1 *)(iVar5 + 0x54));
          }
          *(DWORD *)(in_ECX + 0x24) = DVar2;
        }
        FUN_00406bd0(iVar5);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00883320 : PUSH EBP
00883321 : MOV EBP,ESP
00883323 : PUSH -0x1
00883325 : PUSH 0xb2a8aa
0088332a : MOV EAX,FS:[0x0]
00883330 : PUSH EAX
00883331 : SUB ESP,0x44
00883334 : MOV EAX,[0x00d66fa0]
00883339 : XOR EAX,EBP
0088333b : MOV dword ptr [EBP + -0x10],EAX
0088333e : PUSH EBX
0088333f : PUSH ESI
00883340 : PUSH EDI
00883341 : PUSH EAX
00883342 : LEA EAX,[EBP + -0xc]
00883345 : MOV FS:[0x0],EAX
0088334b : MOV ESI,ECX
0088334d : MOV EAX,dword ptr [ESI + 0x1c]
00883350 : MOV dword ptr [EBP + -0x48],ESI
00883353 : TEST EAX,EAX
00883355 : JZ 0x008835cc
0088335b : MOVSS XMM0,dword ptr [0x00cdf158]
00883363 : IMUL EAX,EAX,0x1f4
00883369 : CVTSI2SS XMM1,EAX
0088336d : DIVSS XMM0,XMM1
00883371 : MOVSS XMM1,dword ptr [0x00c10fc4]
00883379 : COMISS XMM0,XMM1
0088337c : JBE 0x00883385
0088337e : MOVSS dword ptr [ESI + 0x20],XMM1
00883383 : JMP 0x0088338a
00883385 : MOVSS dword ptr [ESI + 0x20],XMM0
0088338a : CALL dword ptr [0x00b85598]
00883390 : MOV EDI,EAX
00883392 : PUSH 0xc45308
00883397 : LEA ECX,[EBP + -0x2c]
0088339a : MOV dword ptr [EBP + -0x50],EDI
0088339d : CALL 0x00406460
008833a2 : MOV dword ptr [EBP + -0x4],0x0
008833a9 : SUB EDI,dword ptr [ESI + 0x24]
008833ac : MOV dword ptr [EBP + -0x44],EDI
008833af : FILD dword ptr [EBP + -0x44]
008833b2 : TEST EDI,EDI
008833b4 : JGE 0x008833bc
008833b6 : FADD float ptr [0x00cdf0e0]
008833bc : FLD float ptr [ESI + 0x20]
008833bf : FMUL float ptr [0x00cdf228]
008833c5 : FXCH
008833c7 : FCOMIP ST0,ST1
008833c9 : FSTP ST0
008833cb : JBE 0x008835a3
008833d1 : CALL 0x008822b0
008833d6 : MOV EBX,EAX
008833d8 : TEST EBX,EBX
008833da : JNZ 0x008833f0
008833dc : MOV dword ptr [EBP + -0x4],0xffffffff
008833e3 : LEA ECX,[EBP + -0x2c]
008833e6 : CALL 0x00406560
008833eb : JMP 0x008835cc
008833f0 : MOV EDX,EBX
008833f2 : LEA EAX,[EBP + -0x40]
008833f5 : CALL 0x00882130
008833fa : LEA EAX,[EBP + -0x2c]
008833fd : PUSH EAX
008833fe : MOV ECX,EBX
00883400 : CALL 0x00882650
00883405 : CMP dword ptr [EBP + -0x18],0x0
00883409 : JZ 0x00883596
0088340f : MOV ESI,dword ptr [EBX + 0xc]
00883412 : MOV EDI,dword ptr [0x00da93ec]
00883418 : CALL 0x00a1ba80
0088341d : MOV dword ptr [EBP + -0x44],EAX
00883420 : TEST EAX,EAX
00883422 : JZ 0x0088358d
00883428 : CMP dword ptr [EBX + 0x68],0x14
0088342c : JZ 0x00883438
0088342e : CMP byte ptr [EBX + 0x55],0x0
00883432 : MOV byte ptr [EBP + -0x4c],0x0
00883436 : JZ 0x0088343c
00883438 : MOV byte ptr [EBP + -0x4c],0x1
0088343c : MOVSS XMM0,dword ptr [EBX + 0x58]
00883441 : FLD float ptr [0x00cdf130]
00883447 : MOVSS XMM1,dword ptr [0x00c10fc4]
0088344f : FLD float ptr [0x00d72c24]
00883455 : COMISS XMM0,XMM1
00883458 : XORPS XMM2,XMM2
0088345b : MOVSS dword ptr [EBP + -0x30],XMM0
00883460 : JC 0x00883469
00883462 : MOV EDX,0xff
00883467 : JMP 0x00883494
00883469 : COMISS XMM2,XMM0
0088346c : JC 0x00883472
0088346e : XOR EDX,EDX
00883470 : JMP 0x00883494
00883472 : FLD float ptr [EBP + -0x30]
00883475 : FNSTCW word ptr [EBP + -0x2e]
00883478 : MOVZX EAX,word ptr [EBP + -0x2e]
0088347c : FMUL ST2
0088347e : OR EAX,0xc00
00883483 : MOV dword ptr [EBP + -0x34],EAX
00883486 : FADD ST0,ST1
00883488 : FLDCW word ptr [EBP + -0x34]
0088348b : FISTP qword ptr [EBP + -0x38]
0088348e : MOV EDX,dword ptr [EBP + -0x38]
00883491 : FLDCW word ptr [EBP + -0x2e]
00883494 : MOVSS XMM0,dword ptr [EBX + 0x5c]
00883499 : COMISS XMM0,XMM1
0088349c : MOVSS dword ptr [EBP + -0x34],XMM0
008834a1 : JC 0x008834aa
008834a3 : MOV EDI,0xff
008834a8 : JMP 0x008834d5
008834aa : COMISS XMM2,XMM0
008834ad : JC 0x008834b3
008834af : XOR EDI,EDI
008834b1 : JMP 0x008834d5
008834b3 : FLD float ptr [EBP + -0x34]
008834b6 : FNSTCW word ptr [EBP + -0x2e]
008834b9 : MOVZX EAX,word ptr [EBP + -0x2e]
008834bd : FMUL ST2
008834bf : OR EAX,0xc00
008834c4 : MOV dword ptr [EBP + -0x34],EAX
008834c7 : FADD ST0,ST1
008834c9 : FLDCW word ptr [EBP + -0x34]
008834cc : FISTP qword ptr [EBP + -0x38]
008834cf : MOV EDI,dword ptr [EBP + -0x38]
008834d2 : FLDCW word ptr [EBP + -0x2e]
008834d5 : MOVSS XMM0,dword ptr [EBX + 0x60]
008834da : COMISS XMM0,XMM1
008834dd : MOVSS dword ptr [EBP + -0x34],XMM0
008834e2 : JC 0x008834eb
008834e4 : MOV ESI,0xff
008834e9 : JMP 0x00883516
008834eb : COMISS XMM2,XMM0
008834ee : JC 0x008834f4
008834f0 : XOR ESI,ESI
008834f2 : JMP 0x00883516
008834f4 : FLD float ptr [EBP + -0x34]
008834f7 : FNSTCW word ptr [EBP + -0x2e]
008834fa : MOVZX EAX,word ptr [EBP + -0x2e]
008834fe : FMUL ST2
00883500 : OR EAX,0xc00
00883505 : MOV dword ptr [EBP + -0x34],EAX
00883508 : FADD ST0,ST1
0088350a : FLDCW word ptr [EBP + -0x34]
0088350d : FISTP qword ptr [EBP + -0x38]
00883510 : MOV ESI,dword ptr [EBP + -0x38]
00883513 : FLDCW word ptr [EBP + -0x2e]
00883516 : MOVSS XMM0,dword ptr [EBX + 0x64]
0088351b : COMISS XMM0,XMM1
0088351e : MOVSS dword ptr [EBP + -0x34],XMM0
00883523 : JC 0x00883530
00883525 : FSTP ST1
00883527 : MOV EAX,0xff
0088352c : FSTP ST0
0088352e : JMP 0x0088355f
00883530 : COMISS XMM2,XMM0
00883533 : JC 0x0088353d
00883535 : FSTP ST1
00883537 : XOR EAX,EAX
00883539 : FSTP ST0
0088353b : JMP 0x0088355f
0088353d : FLD float ptr [EBP + -0x34]
00883540 : FNSTCW word ptr [EBP + -0x2e]
00883543 : MOVZX EAX,word ptr [EBP + -0x2e]
00883547 : FMULP ST2
00883549 : OR EAX,0xc00
0088354e : MOV dword ptr [EBP + -0x34],EAX
00883551 : FADDP
00883553 : FLDCW word ptr [EBP + -0x34]
00883556 : FISTP qword ptr [EBP + -0x38]
00883559 : MOV EAX,dword ptr [EBP + -0x38]
0088355c : FLDCW word ptr [EBP + -0x2e]
0088355f : MOVZX ECX,byte ptr [EBX + 0x54]
00883563 : SHL EAX,0x8
00883566 : PUSH ECX
00883567 : OR EAX,EDX
00883569 : PUSH ECX
0088356a : MOV ECX,dword ptr [EBP + -0x48]
0088356d : SHL EAX,0x8
00883570 : OR EAX,EDI
00883572 : FLD float ptr [ECX + 0x20]
00883575 : MOV ECX,dword ptr [EBP + -0x4c]
00883578 : SHL EAX,0x8
0088357b : FSTP float ptr [ESP]
0088357e : PUSH ECX
0088357f : MOV ECX,dword ptr [EBP + -0x44]
00883582 : OR EAX,ESI
00883584 : PUSH EAX
00883585 : LEA EAX,[EBP + -0x2c]
00883588 : CALL 0x0088b7e0
0088358d : MOV EDX,dword ptr [EBP + -0x50]
00883590 : MOV EAX,dword ptr [EBP + -0x48]
00883593 : MOV dword ptr [EAX + 0x24],EDX
00883596 : PUSH EBX
00883597 : CALL 0x00406bd0
0088359c : MOV ECX,EBX
0088359e : CALL 0x006f04e0
008835a3 : MOV dword ptr [EBP + -0x4],0xffffffff
008835aa : CMP dword ptr [EBP + -0x14],0x8
008835ae : JC 0x008835b8
008835b0 : MOV ECX,dword ptr [EBP + -0x28]
008835b3 : CALL 0x006f04e0
008835b8 : XOR ECX,ECX
008835ba : MOV dword ptr [EBP + -0x14],0x7
008835c1 : MOV dword ptr [EBP + -0x18],0x0
008835c8 : MOV word ptr [EBP + -0x28],CX
008835cc : MOV ECX,dword ptr [EBP + -0xc]
008835cf : MOV dword ptr FS:[0x0],ECX
008835d6 : POP ECX
008835d7 : POP EDI
008835d8 : POP ESI
008835d9 : POP EBX
008835da : MOV ECX,dword ptr [EBP + -0x10]
008835dd : XOR ECX,EBP
008835df : CALL 0x00633e6b
008835e4 : MOV ESP,EBP
008835e6 : POP EBP
008835e7 : RET
