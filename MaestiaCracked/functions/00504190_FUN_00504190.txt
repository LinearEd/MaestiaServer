PROGRAM  : Maestia.exe
FUNCTION : FUN_00504190
ENTRY    : 00504190
BODY     : [[00504190, 005041bc] [005041c0, 005041f9]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00504190(uint *param_1,uint param_2)

{
  int iVar1;
  uint uVar2;
  int *in_ECX;
  uint *puVar3;
  
  iVar1 = *in_ECX;
  puVar3 = (uint *)(param_2 * 0x10 + 8 + iVar1);
  if ((*(int *)(param_2 * 0x10 + 8 + iVar1) != -2) &&
     (uVar2 = param_2, (*(uint *)(puVar3[1] + 0xc) & *(uint *)(iVar1 + 4)) == param_2)) {
    while (((*(uint *)(puVar3[1] + 0xc) & *(uint *)(iVar1 + 4)) != param_2 ||
           (puVar3[1] != *param_1))) {
      uVar2 = *puVar3;
      if (uVar2 == 0xffffffff) {
        return 0xffffffff;
      }
      puVar3 = (uint *)(uVar2 * 0x10 + 8 + iVar1);
    }
    return uVar2;
  }
  return 0xffffffff;
}



============================================================
DISASSEMBLY
============================================================
00504190 : PUSH EBX
00504191 : PUSH ESI
00504192 : MOV ESI,dword ptr [ESP + 0x10]
00504196 : PUSH EDI
00504197 : MOV EDI,dword ptr [ECX]
00504199 : MOV ECX,ESI
0050419b : SHL ECX,0x4
0050419e : CMP dword ptr [ECX + EDI*0x1 + 0x8],-0x2
005041a3 : LEA ECX,[ECX + EDI*0x1 + 0x8]
005041a7 : MOV EAX,ESI
005041a9 : JZ 0x005041f1
005041ab : MOV EDX,dword ptr [ECX + 0x4]
005041ae : MOV EBX,dword ptr [EDI + 0x4]
005041b1 : MOV EDX,dword ptr [EDX + 0xc]
005041b4 : AND EDX,EBX
005041b6 : CMP EDX,ESI
005041b8 : JNZ 0x005041f1
005041ba : PUSH EBP
005041bb : JMP 0x005041c0
005041c0 : MOV EDX,dword ptr [ECX + 0x4]
005041c3 : MOV EBP,dword ptr [EDX + 0xc]
005041c6 : AND EBP,EBX
005041c8 : CMP EBP,ESI
005041ca : JNZ 0x005041d5
005041cc : MOV EBP,dword ptr [ESP + 0x14]
005041d0 : CMP EDX,dword ptr [EBP]
005041d3 : JZ 0x005041ea
005041d5 : MOV EAX,dword ptr [ECX]
005041d7 : CMP EAX,-0x1
005041da : JZ 0x005041e7
005041dc : MOV ECX,EAX
005041de : SHL ECX,0x4
005041e1 : LEA ECX,[ECX + EDI*0x1 + 0x8]
005041e5 : JMP 0x005041c0
005041e7 : OR EAX,0xffffffff
005041ea : POP EBP
005041eb : POP EDI
005041ec : POP ESI
005041ed : POP EBX
005041ee : RET 0x8
005041f1 : POP EDI
005041f2 : POP ESI
005041f3 : OR EAX,0xffffffff
005041f6 : POP EBX
005041f7 : RET 0x8
