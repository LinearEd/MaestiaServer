PROGRAM  : Maestia.exe
FUNCTION : FUN_0057a450
ENTRY    : 0057a450
BODY     : [[0057a450, 0057a56c] [0057a570, 0057a5d6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0057a450(undefined4 param_1,uint *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_0057a48a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_00576cb0(param_1,iVar7);
LAB_0057a48a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x1c);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00574940(param_2 + 1);
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x1c) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0x1c);
  if (uVar5 == param_3) {
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      FUN_00574940(puVar1 + 2);
    }
    uVar5 = *param_2;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    piVar4 = (int *)(puVar1[1] + 8);
    *piVar4 = *piVar4 + -1;
    if (*piVar4 == 0) {
      FUN_00525340();
    }
    puVar1[1] = uVar5;
    FUN_00570b90(param_2 + 1);
    *puVar1 = uVar6;
    return;
  }
  puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x1c);
  for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x1c); uVar5 != param_3;
      uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x1c)) {
    uVar5 = *puVar3;
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x1c);
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00574940(puVar1 + 2);
  }
  *puVar3 = uVar6;
  uVar6 = *param_2;
  piVar4 = (int *)(uVar6 + 8);
  *piVar4 = *piVar4 + 1;
  piVar4 = (int *)(puVar1[1] + 8);
  *piVar4 = *piVar4 + -1;
  if (*piVar4 == 0) {
    FUN_00525340();
  }
  puVar1[1] = uVar6;
  FUN_00570b90(param_2 + 1);
  *puVar1 = 0xffffffff;
  return;
}



============================================================
DISASSEMBLY
============================================================
0057a450 : PUSH EBX
0057a451 : PUSH ESI
0057a452 : MOV ESI,ECX
0057a454 : MOV EAX,dword ptr [ESI]
0057a456 : TEST EAX,EAX
0057a458 : JNZ 0x0057a463
0057a45a : MOV EAX,dword ptr [ESP + 0xc]
0057a45e : PUSH 0x8
0057a460 : PUSH EAX
0057a461 : JMP 0x0057a485
0057a463 : MOV ECX,dword ptr [EAX + 0x4]
0057a466 : LEA EDX,[ECX*0x4 + 0x4]
0057a46d : MOV ECX,dword ptr [EAX]
0057a46f : LEA ECX,[ECX + ECX*0x4]
0057a472 : CMP ECX,EDX
0057a474 : JBE 0x0057a48a
0057a476 : MOV EDX,dword ptr [EAX + 0x4]
0057a479 : MOV ECX,dword ptr [ESP + 0xc]
0057a47d : LEA EAX,[EDX + EDX*0x1 + 0x2]
0057a481 : PUSH EAX
0057a482 : PUSH ECX
0057a483 : MOV ECX,ESI
0057a485 : CALL 0x00576cb0
0057a48a : MOV ECX,dword ptr [ESI]
0057a48c : MOV EAX,dword ptr [ESP + 0x14]
0057a490 : AND EAX,dword ptr [ECX + 0x4]
0057a493 : INC dword ptr [ECX]
0057a495 : MOV ECX,dword ptr [ESI]
0057a497 : LEA EDX,[EAX*0x8 + 0x0]
0057a49e : SUB EDX,EAX
0057a4a0 : LEA ESI,[ECX + EDX*0x4 + 0x8]
0057a4a4 : MOV EDX,dword ptr [ESI]
0057a4a6 : MOV EBX,0xfffffffe
0057a4ab : CMP EDX,EBX
0057a4ad : JNZ 0x0057a4d2
0057a4af : MOV ECX,dword ptr [ESP + 0x10]
0057a4b3 : MOV dword ptr [ESI],0xffffffff
0057a4b9 : MOV EAX,dword ptr [ECX]
0057a4bb : ADD ECX,0x4
0057a4be : PUSH ECX
0057a4bf : MOV dword ptr [ESI + 0x4],EAX
0057a4c2 : INC dword ptr [EAX + 0x8]
0057a4c5 : LEA ECX,[ESI + 0x8]
0057a4c8 : CALL 0x00574940
0057a4cd : POP ESI
0057a4ce : POP EBX
0057a4cf : RET 0xc
0057a4d2 : PUSH EBP
0057a4d3 : MOV EBP,dword ptr [ECX + 0x4]
0057a4d6 : PUSH EDI
0057a4d7 : MOV EDI,EAX
0057a4d9 : LEA ESP,[ESP]
0057a4e0 : INC EDI
0057a4e1 : AND EDI,EBP
0057a4e3 : LEA EDX,[EDI*0x8 + 0x0]
0057a4ea : SUB EDX,EDI
0057a4ec : CMP dword ptr [ECX + EDX*0x4 + 0x8],EBX
0057a4f0 : JNZ 0x0057a4e0
0057a4f2 : MOV EBX,dword ptr [ESI + 0x4]
0057a4f5 : MOV EBX,dword ptr [EBX + 0xc]
0057a4f8 : LEA EDX,[EDI*0x8 + 0x0]
0057a4ff : SUB EDX,EDI
0057a501 : AND EBX,EBP
0057a503 : LEA EDX,[ECX + EDX*0x4 + 0x8]
0057a507 : CMP EBX,EAX
0057a509 : JNZ 0x0057a558
0057a50b : TEST EDX,EDX
0057a50d : JZ 0x0057a528
0057a50f : MOV EAX,dword ptr [ESI]
0057a511 : MOV dword ptr [EDX],EAX
0057a513 : MOV EAX,dword ptr [ESI + 0x4]
0057a516 : MOV dword ptr [EDX + 0x4],EAX
0057a519 : INC dword ptr [EAX + 0x8]
0057a51c : LEA EAX,[ESI + 0x8]
0057a51f : PUSH EAX
0057a520 : LEA ECX,[EDX + 0x8]
0057a523 : CALL 0x00574940
0057a528 : MOV EBP,dword ptr [ESP + 0x18]
0057a52c : MOV EBX,dword ptr [EBP]
0057a52f : INC dword ptr [EBX + 0x8]
0057a532 : MOV ECX,dword ptr [ESI + 0x4]
0057a535 : ADD dword ptr [ECX + 0x8],-0x1
0057a539 : JNZ 0x0057a540
0057a53b : CALL 0x00525340
0057a540 : ADD EBP,0x4
0057a543 : PUSH EBP
0057a544 : LEA ECX,[ESI + 0x8]
0057a547 : MOV dword ptr [ESI + 0x4],EBX
0057a54a : CALL 0x00570b90
0057a54f : MOV dword ptr [ESI],EDI
0057a551 : POP EDI
0057a552 : POP EBP
0057a553 : POP ESI
0057a554 : POP EBX
0057a555 : RET 0xc
0057a558 : LEA EBP,[EBX*0x8 + 0x0]
0057a55f : SUB EBP,EBX
0057a561 : CMP dword ptr [ECX + EBP*0x4 + 0x8],EAX
0057a565 : LEA EBX,[ECX + EBP*0x4 + 0x8]
0057a569 : JZ 0x0057a585
0057a56b : JMP 0x0057a570
0057a570 : MOV EBX,dword ptr [EBX]
0057a572 : LEA EBP,[EBX*0x8 + 0x0]
0057a579 : SUB EBP,EBX
0057a57b : CMP dword ptr [ECX + EBP*0x4 + 0x8],EAX
0057a57f : LEA EBX,[ECX + EBP*0x4 + 0x8]
0057a583 : JNZ 0x0057a570
0057a585 : TEST EDX,EDX
0057a587 : JZ 0x0057a5a2
0057a589 : MOV EAX,dword ptr [ESI]
0057a58b : MOV dword ptr [EDX],EAX
0057a58d : MOV EAX,dword ptr [ESI + 0x4]
0057a590 : LEA ECX,[ESI + 0x8]
0057a593 : PUSH ECX
0057a594 : MOV dword ptr [EDX + 0x4],EAX
0057a597 : INC dword ptr [EAX + 0x8]
0057a59a : LEA ECX,[EDX + 0x8]
0057a59d : CALL 0x00574940
0057a5a2 : MOV dword ptr [EBX],EDI
0057a5a4 : MOV EBX,dword ptr [ESP + 0x18]
0057a5a8 : MOV EDI,dword ptr [EBX]
0057a5aa : INC dword ptr [EDI + 0x8]
0057a5ad : MOV ECX,dword ptr [ESI + 0x4]
0057a5b0 : ADD dword ptr [ECX + 0x8],-0x1
0057a5b4 : JNZ 0x0057a5bb
0057a5b6 : CALL 0x00525340
0057a5bb : ADD EBX,0x4
0057a5be : PUSH EBX
0057a5bf : LEA ECX,[ESI + 0x8]
0057a5c2 : MOV dword ptr [ESI + 0x4],EDI
0057a5c5 : CALL 0x00570b90
0057a5ca : POP EDI
0057a5cb : POP EBP
0057a5cc : MOV dword ptr [ESI],0xffffffff
0057a5d2 : POP ESI
0057a5d3 : POP EBX
0057a5d4 : RET 0xc
