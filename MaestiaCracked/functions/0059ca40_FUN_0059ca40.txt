PROGRAM  : Maestia.exe
FUNCTION : FUN_0059ca40
ENTRY    : 0059ca40
BODY     : [[0059ca40, 0059ca5a] [0059ca60, 0059ce6e]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0059cd3b) */
/* WARNING: Removing unreachable block (ram,0x0059cd27) */
/* WARNING: Removing unreachable block (ram,0x0059cdd1) */
/* WARNING: Removing unreachable block (ram,0x0059cdde) */
/* WARNING: Removing unreachable block (ram,0x0059cde4) */
/* WARNING: Removing unreachable block (ram,0x0059cdeb) */
/* WARNING: Removing unreachable block (ram,0x0059cdf1) */
/* WARNING: Removing unreachable block (ram,0x0059cdf8) */
/* WARNING: Removing unreachable block (ram,0x0059cdfd) */
/* WARNING: Removing unreachable block (ram,0x0059ce07) */
/* WARNING: Removing unreachable block (ram,0x0059ce0c) */
/* WARNING: Removing unreachable block (ram,0x0059ce13) */
/* WARNING: Removing unreachable block (ram,0x0059ce18) */
/* WARNING: Removing unreachable block (ram,0x0059ce2e) */
/* WARNING: Removing unreachable block (ram,0x0059ce34) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0059ca40(void)

{
  ushort *puVar1;
  ushort uVar2;
  int *piVar3;
  float fVar4;
  char cVar5;
  undefined2 uVar6;
  ushort uVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int *in_ECX;
  uint uVar11;
  uint uVar12;
  float10 extraout_ST0;
  float10 extraout_ST0_00;
  undefined2 local_7c;
  uint local_70;
  uint local_c;
  
  local_c = 0;
LAB_0059ca67:
  if (((in_ECX == (int *)0x0) || ((uint)in_ECX[1] <= local_c)) || ((int)local_c < 0)) {
    *(byte *)(in_ECX + 0x1d) = *(byte *)(in_ECX + 0x1d) | 1;
    return;
  }
  piVar3 = *(int **)(*in_ECX + local_c * 4);
  iVar10 = *piVar3;
  uVar6 = FUN_0063b380();
  if (iVar10 < 0) {
    *(char *)((int)piVar3 + 0x1d) = (char)uVar6;
  }
  else {
    *(undefined2 *)(piVar3 + 10) = uVar6;
  }
  iVar8 = FUN_0063b380();
  iVar9 = FUN_0063b380();
  if (iVar10 < 0) {
    *(short *)(piVar3 + 5) = (short)iVar9;
    *(short *)((int)piVar3 + 0x16) = (short)iVar8;
  }
  else {
    piVar3[5] = iVar9;
    piVar3[6] = iVar8;
  }
  iVar10 = *piVar3;
  if (iVar10 < 0) {
    uVar2 = *(ushort *)((int)piVar3 + 0x1a);
  }
  else {
    uVar2 = *(ushort *)((int)piVar3 + 0x26);
  }
  if (iVar10 < 0) {
    local_7c = (undefined2)(int)ROUND((float)((float10)uVar2 * extraout_ST0));
    *(undefined2 *)((int)piVar3 + 0x1a) = local_7c;
  }
  else {
    local_7c = (undefined2)(int)ROUND((float)((float10)uVar2 * extraout_ST0));
    *(undefined2 *)((int)piVar3 + 0x26) = local_7c;
  }
  iVar8 = FUN_0063b380();
  piVar3[3] = iVar8;
  iVar8 = FUN_0063b380();
  piVar3[4] = iVar8;
  if (iVar10 < 0) {
    uVar11 = (uint)*(byte *)(piVar3 + 7);
    local_70 = (int)piVar3 + 0x1e;
  }
  else {
    uVar11 = piVar3[1];
    local_70 = (int)piVar3 + 0x2a;
  }
  uVar11 = local_70 + uVar11 * 8;
  do {
    uVar2 = 0;
    do {
      FUN_0059a4d0();
      do {
        if ((local_70 == 0) || (uVar11 <= local_70)) {
LAB_0059cdc9:
          if (local_c < (uint)in_ECX[1]) {
            local_c = local_c + 1;
          }
          goto LAB_0059ca67;
        }
        puVar1 = (ushort *)(local_70 + 6);
        iVar10 = FUN_0063b380();
        if (iVar10 < 0) {
          *puVar1 = *puVar1 | 0x40;
          *(short *)(local_70 + 2) = -(short)iVar10;
        }
        else {
          *(short *)(local_70 + 2) = (short)iVar10;
          *puVar1 = *puVar1 & 0xffbf;
        }
        uVar7 = *(ushort *)(local_70 + 4) & 0xfff;
        if ((*(byte *)puVar1 & 0x10) == 0) {
          fVar4 = (float)uVar7;
        }
        else {
          fVar4 = (float)uVar7 * 0.0625;
        }
        FUN_005442d0((float)(extraout_ST0_00 * (float10)fVar4));
        if (local_70 == 0) goto LAB_0059cdc9;
      } while (uVar11 <= local_70);
      if (uVar2 == 0) {
        uVar2 = *(ushort *)(local_70 + 4) >> 0xc;
      }
      uVar12 = local_70 + 8;
      puVar1 = (ushort *)(local_70 + 0xc);
      local_70 = uVar12;
    } while ((((*puVar1 & 0xf000) == 0) || (uVar2 == 0)) || (cVar5 = FUN_005d2b10(), cVar5 != '\0'))
    ;
    FUN_005d30b0(uVar2);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0059ca40 : SUB ESP,0x80
0059ca46 : PUSH EBX
0059ca47 : PUSH EBP
0059ca48 : XOR EBP,EBP
0059ca4a : PUSH ESI
0059ca4b : XOR EAX,EAX
0059ca4d : PUSH EDI
0059ca4e : MOV dword ptr [ESP + 0x18],ECX
0059ca52 : MOV dword ptr [ESP + 0x84],EAX
0059ca59 : JMP 0x0059ca67
0059ca60 : MOV EAX,dword ptr [ESP + 0x84]
0059ca67 : FLD float ptr [ESP + 0x94]
0059ca6e : CMP ECX,EBP
0059ca70 : JZ 0x0059ce5c
0059ca76 : CMP EAX,dword ptr [ECX + 0x4]
0059ca79 : JNC 0x0059ce5c
0059ca7f : CMP EAX,EBP
0059ca81 : JL 0x0059ce5c
0059ca87 : MOV ECX,dword ptr [ECX]
0059ca89 : MOV ESI,dword ptr [ECX + EAX*0x4]
0059ca8c : MOV EBX,dword ptr [ESI]
0059ca8e : SHR EBX,0x1f
0059ca91 : AND BL,0x1
0059ca94 : JZ 0x0059caa0
0059ca96 : MOVSX EDX,byte ptr [ESI + 0x1d]
0059ca9a : MOV dword ptr [ESP + 0x10],EDX
0059ca9e : JMP 0x0059caa8
0059caa0 : MOVSX EAX,word ptr [ESI + 0x28]
0059caa4 : MOV dword ptr [ESP + 0x10],EAX
0059caa8 : FILD dword ptr [ESP + 0x10]
0059caac : FMUL ST1
0059caae : FSTP float ptr [ESP + 0x1c]
0059cab2 : TEST BL,BL
0059cab4 : JZ 0x0059cac0
0059cab6 : MOVZX ECX,word ptr [ESI + 0x14]
0059caba : MOV dword ptr [ESP + 0x10],ECX
0059cabe : JMP 0x0059cac7
0059cac0 : MOV EDX,dword ptr [ESI + 0x14]
0059cac3 : MOV dword ptr [ESP + 0x10],EDX
0059cac7 : FILD dword ptr [ESP + 0x10]
0059cacb : FMUL ST1
0059cacd : FSTP float ptr [ESP + 0x14]
0059cad1 : TEST BL,BL
0059cad3 : JZ 0x0059cadf
0059cad5 : MOVZX EAX,word ptr [ESI + 0x16]
0059cad9 : MOV dword ptr [ESP + 0x10],EAX
0059cadd : JMP 0x0059cae6
0059cadf : MOV ECX,dword ptr [ESI + 0x18]
0059cae2 : MOV dword ptr [ESP + 0x10],ECX
0059cae6 : FILD dword ptr [ESP + 0x10]
0059caea : FMUL ST1
0059caec : FSTP float ptr [ESP + 0x10]
0059caf0 : FLD float ptr [ESP + 0x1c]
0059caf4 : CALL 0x0063b380
0059caf9 : TEST BL,BL
0059cafb : JZ 0x0059cb02
0059cafd : MOV byte ptr [ESI + 0x1d],AL
0059cb00 : JMP 0x0059cb06
0059cb02 : MOV word ptr [ESI + 0x28],AX
0059cb06 : FLD float ptr [ESP + 0x10]
0059cb0a : CALL 0x0063b380
0059cb0f : FLD float ptr [ESP + 0x14]
0059cb13 : MOV EDI,EAX
0059cb15 : CALL 0x0063b380
0059cb1a : TEST BL,BL
0059cb1c : JZ 0x0059cb28
0059cb1e : MOV word ptr [ESI + 0x14],AX
0059cb22 : MOV word ptr [ESI + 0x16],DI
0059cb26 : JMP 0x0059cb2e
0059cb28 : MOV dword ptr [ESI + 0x14],EAX
0059cb2b : MOV dword ptr [ESI + 0x18],EDI
0059cb2e : MOV EBX,dword ptr [ESI]
0059cb30 : SHR EBX,0x1f
0059cb33 : AND BL,0x1
0059cb36 : JZ 0x0059cb46
0059cb38 : MOVZX EDX,word ptr [ESI + 0x1a]
0059cb3c : MOV dword ptr [ESP + 0x14],EDX
0059cb40 : FILD dword ptr [ESP + 0x14]
0059cb44 : JMP 0x0059cb52
0059cb46 : MOVZX EAX,word ptr [ESI + 0x26]
0059cb4a : MOV dword ptr [ESP + 0x14],EAX
0059cb4e : FILD dword ptr [ESP + 0x14]
0059cb52 : FSTP float ptr [ESP + 0x10]
0059cb56 : FLD float ptr [ESP + 0x10]
0059cb5a : FMUL ST1
0059cb5c : FSTP float ptr [ESP + 0x10]
0059cb60 : FLD float ptr [ESP + 0x10]
0059cb64 : TEST BL,BL
0059cb66 : JZ 0x0059cb91
0059cb68 : FNSTCW word ptr [ESP + 0x10]
0059cb6c : MOVZX EAX,word ptr [ESP + 0x10]
0059cb71 : OR EAX,0xc00
0059cb76 : MOV dword ptr [ESP + 0x14],EAX
0059cb7a : FLDCW word ptr [ESP + 0x14]
0059cb7e : FISTP dword ptr [ESP + 0x14]
0059cb82 : MOV CX,word ptr [ESP + 0x14]
0059cb87 : MOV word ptr [ESI + 0x1a],CX
0059cb8b : FLDCW word ptr [ESP + 0x10]
0059cb8f : JMP 0x0059cbb8
0059cb91 : FNSTCW word ptr [ESP + 0x10]
0059cb95 : MOVZX EAX,word ptr [ESP + 0x10]
0059cb9a : OR EAX,0xc00
0059cb9f : MOV dword ptr [ESP + 0x14],EAX
0059cba3 : FLDCW word ptr [ESP + 0x14]
0059cba7 : FISTP dword ptr [ESP + 0x14]
0059cbab : MOV DX,word ptr [ESP + 0x14]
0059cbb0 : MOV word ptr [ESI + 0x26],DX
0059cbb4 : FLDCW word ptr [ESP + 0x10]
0059cbb8 : TEST BL,BL
0059cbba : JZ 0x0059cbc5
0059cbbc : MOV EAX,dword ptr [ESI + 0xc]
0059cbbf : MOV dword ptr [ESP + 0x10],EAX
0059cbc3 : JMP 0x0059cbcc
0059cbc5 : MOV ECX,dword ptr [ESI + 0xc]
0059cbc8 : MOV dword ptr [ESP + 0x10],ECX
0059cbcc : FILD dword ptr [ESP + 0x10]
0059cbd0 : FMUL ST1
0059cbd2 : CALL 0x0063b380
0059cbd7 : MOV dword ptr [ESI + 0xc],EAX
0059cbda : TEST BL,BL
0059cbdc : JZ 0x0059cbe7
0059cbde : MOV EDX,dword ptr [ESI + 0x10]
0059cbe1 : MOV dword ptr [ESP + 0x10],EDX
0059cbe5 : JMP 0x0059cbee
0059cbe7 : MOV EAX,dword ptr [ESI + 0x10]
0059cbea : MOV dword ptr [ESP + 0x10],EAX
0059cbee : FIMUL dword ptr [ESP + 0x10]
0059cbf2 : CALL 0x0063b380
0059cbf7 : MOV dword ptr [ESI + 0x10],EAX
0059cbfa : LEA ECX,[ESI + 0x1e]
0059cbfd : TEST BL,BL
0059cbff : JNZ 0x0059cc1c
0059cc01 : MOV EAX,dword ptr [ESI + 0x4]
0059cc04 : LEA ECX,[ESI + 0x2a]
0059cc07 : LEA ECX,[ECX + EAX*0x8]
0059cc0a : LEA EAX,[ECX + 0x3]
0059cc0d : AND EAX,0xfffffffc
0059cc10 : SUB EAX,ECX
0059cc12 : TEST BL,BL
0059cc14 : JZ 0x0059cc22
0059cc16 : MOVZX EDX,byte ptr [ESI + 0x1c]
0059cc1a : JMP 0x0059cc25
0059cc1c : MOVZX EAX,byte ptr [ESI + 0x1c]
0059cc20 : JMP 0x0059cc07
0059cc22 : MOV EDX,dword ptr [ESI + 0x4]
0059cc25 : TEST BL,BL
0059cc27 : JZ 0x0059cc2e
0059cc29 : ADD ESI,0x1e
0059cc2c : JMP 0x0059cc31
0059cc2e : ADD ESI,0x2a
0059cc31 : OR EBX,0xffffffff
0059cc34 : LEA EDX,[ESI + EDX*0x8]
0059cc37 : ADD EAX,ECX
0059cc39 : MOV dword ptr [ESP + 0x38],EBX
0059cc3d : MOV dword ptr [ESP + 0x3c],EBP
0059cc41 : MOV dword ptr [ESP + 0x40],EBX
0059cc45 : MOV dword ptr [ESP + 0x44],EBP
0059cc49 : MOV dword ptr [ESP + 0x48],EBP
0059cc4d : MOV dword ptr [ESP + 0x4c],EBP
0059cc51 : MOV dword ptr [ESP + 0x58],EBP
0059cc55 : MOV dword ptr [ESP + 0x54],EBP
0059cc59 : MOV dword ptr [ESP + 0x50],EBP
0059cc5d : MOV byte ptr [ESP + 0x5c],0x0
0059cc62 : MOV dword ptr [ESP + 0x34],EBP
0059cc66 : MOV dword ptr [ESP + 0x30],EBP
0059cc6a : MOV dword ptr [ESP + 0x60],EBP
0059cc6e : MOV dword ptr [ESP + 0x64],EBP
0059cc72 : MOV dword ptr [ESP + 0x68],EBP
0059cc76 : MOV dword ptr [ESP + 0x6c],EBP
0059cc7a : MOV dword ptr [ESP + 0x70],EBP
0059cc7e : MOV dword ptr [ESP + 0x74],EBP
0059cc82 : MOV dword ptr [ESP + 0x20],ESI
0059cc86 : MOV dword ptr [ESP + 0x24],EDX
0059cc8a : MOV dword ptr [ESP + 0x28],EAX
0059cc8e : MOV dword ptr [ESP + 0x78],EBP
0059cc92 : LEA ECX,[ESP + 0x20]
0059cc96 : CALL 0x0059a4d0
0059cc9b : MOV ESI,dword ptr [ESP + 0x20]
0059cc9f : NOP
0059cca0 : CMP ESI,EBP
0059cca2 : JZ 0x0059cdc9
0059cca8 : CMP ESI,dword ptr [ESP + 0x24]
0059ccac : JNC 0x0059cdc9
0059ccb2 : MOV AL,byte ptr [ESI + 0x6]
0059ccb5 : LEA EDI,[ESI + 0x6]
0059ccb8 : SHR AL,0x6
0059ccbb : TEST AL,0x1
0059ccbd : JNZ 0x0059ccc9
0059ccbf : MOVZX ECX,word ptr [ESI + 0x2]
0059ccc3 : MOV dword ptr [ESP + 0x10],ECX
0059ccc7 : JMP 0x0059ccd3
0059ccc9 : MOVZX EDX,word ptr [ESI + 0x2]
0059cccd : NEG EDX
0059cccf : MOV dword ptr [ESP + 0x10],EDX
0059ccd3 : FILD dword ptr [ESP + 0x10]
0059ccd7 : FLD float ptr [ESP + 0x94]
0059ccde : FLD ST0
0059cce0 : FMULP ST2
0059cce2 : FXCH
0059cce4 : FSTP float ptr [ESP + 0x14]
0059cce8 : FLD float ptr [ESP + 0x14]
0059ccec : CALL 0x0063b380
0059ccf1 : CMP EAX,EBP
0059ccf3 : JL 0x0059cd03
0059ccf5 : MOV word ptr [ESI + 0x2],AX
0059ccf9 : MOV EAX,0xffbf
0059ccfe : AND word ptr [EDI],AX
0059cd01 : JMP 0x0059cd0d
0059cd03 : NEG EAX
0059cd05 : OR word ptr [EDI],0x40
0059cd09 : MOV word ptr [ESI + 0x2],AX
0059cd0d : MOVZX EAX,word ptr [ESI + 0x4]
0059cd11 : AND EAX,0xfff
0059cd16 : TEST byte ptr [EDI],0x10
0059cd19 : JNZ 0x0059cd2f
0059cd1b : MOV dword ptr [ESP + 0x14],EAX
0059cd1f : FILD dword ptr [ESP + 0x14]
0059cd23 : TEST EAX,EAX
0059cd25 : JGE 0x0059cd47
0059cd27 : FADD float ptr [0x00cdf0e0]
0059cd2d : JMP 0x0059cd47
0059cd2f : MOV dword ptr [ESP + 0x14],EAX
0059cd33 : FILD dword ptr [ESP + 0x14]
0059cd37 : TEST EAX,EAX
0059cd39 : JGE 0x0059cd41
0059cd3b : FADD float ptr [0x00cdf0e0]
0059cd41 : FMUL double ptr [0x00b86b28]
0059cd47 : FSTP float ptr [ESP + 0x10]
0059cd4b : PUSH ECX
0059cd4c : FMUL float ptr [ESP + 0x14]
0059cd50 : MOV ECX,ESI
0059cd52 : FSTP float ptr [ESP + 0x18]
0059cd56 : FLD float ptr [ESP + 0x18]
0059cd5a : FSTP float ptr [ESP]
0059cd5d : CALL 0x005442d0
0059cd62 : MOV ESI,dword ptr [ESP + 0x20]
0059cd66 : CMP ESI,EBP
0059cd68 : JZ 0x0059cdc9
0059cd6a : CMP ESI,dword ptr [ESP + 0x24]
0059cd6e : JNC 0x0059cca0
0059cd74 : MOV EAX,dword ptr [ESP + 0x78]
0059cd78 : CMP EAX,EBP
0059cd7a : JNZ 0x0059cd87
0059cd7c : MOVZX EAX,word ptr [ESI + 0x4]
0059cd80 : SHR EAX,0xc
0059cd83 : MOV dword ptr [ESP + 0x78],EAX
0059cd87 : ADD ESI,0x8
0059cd8a : MOV ECX,0xf000
0059cd8f : MOV dword ptr [ESP + 0x20],ESI
0059cd93 : TEST word ptr [ESI + 0x4],CX
0059cd97 : JBE 0x0059cc92
0059cd9d : CMP EAX,EBP
0059cd9f : JBE 0x0059cc92
0059cda5 : LEA ECX,[ESP + 0x2c]
0059cda9 : CALL 0x005d2b10
0059cdae : TEST AL,AL
0059cdb0 : JNZ 0x0059cc92
0059cdb6 : MOV EDX,dword ptr [ESP + 0x78]
0059cdba : PUSH EDX
0059cdbb : LEA ECX,[ESP + 0x30]
0059cdbf : CALL 0x005d30b0
0059cdc4 : JMP 0x0059cc8e
0059cdc9 : MOV ECX,dword ptr [ESP + 0x70]
0059cdcd : CMP ECX,EBP
0059cdcf : JZ 0x0059cdd6
0059cdd1 : CALL 0x004ff7c0
0059cdd6 : MOV ESI,dword ptr [ESP + 0x6c]
0059cdda : CMP ESI,EBP
0059cddc : JZ 0x0059ce3a
0059cdde : ADD dword ptr [ESI],EBX
0059cde0 : CMP dword ptr [ESI],EBP
0059cde2 : JNZ 0x0059ce3a
0059cde4 : MOV ECX,dword ptr [ESI + 0x4]
0059cde7 : CMP ECX,EBP
0059cde9 : JZ 0x0059cdf1
0059cdeb : PUSH ESI
0059cdec : CALL 0x0055cd60
0059cdf1 : MOV ECX,dword ptr [ESI + 0x14]
0059cdf4 : CMP ECX,EBP
0059cdf6 : JZ 0x0059cdfd
0059cdf8 : CALL 0x00524240
0059cdfd : MOV dword ptr [ESI + 0x14],EBP
0059ce00 : MOV ECX,dword ptr [ESI + 0x18]
0059ce03 : CMP ECX,EBP
0059ce05 : JZ 0x0059ce0c
0059ce07 : CALL 0x00524240
0059ce0c : MOV ECX,dword ptr [ESI + 0x14]
0059ce0f : CMP ECX,EBP
0059ce11 : JZ 0x0059ce18
0059ce13 : CALL 0x00524240
0059ce18 : MOV EDI,dword ptr [ESI + 0xc]
0059ce1b : AND EDI,0xfffffffc
0059ce1e : PUSH EBX
0059ce1f : LEA EAX,[EDI + 0x4]
0059ce22 : PUSH EAX
0059ce23 : CALL dword ptr [0x00b851cc]
0059ce29 : SUB EAX,0x1
0059ce2c : JNZ 0x0059ce34
0059ce2e : PUSH EDI
0059ce2f : CALL 0x00515cf0
0059ce34 : PUSH ESI
0059ce35 : CALL 0x00515cf0
0059ce3a : MOV ECX,dword ptr [ESP + 0x84]
0059ce41 : MOV EDX,dword ptr [ESP + 0x18]
0059ce45 : CMP ECX,dword ptr [EDX + 0x4]
0059ce48 : MOV ECX,EDX
0059ce4a : JNC 0x0059ca60
0059ce50 : INC dword ptr [ESP + 0x84]
0059ce57 : JMP 0x0059ca60
0059ce5c : OR byte ptr [ECX + 0x74],0x1
0059ce60 : FSTP ST0
0059ce62 : POP EDI
0059ce63 : POP ESI
0059ce64 : POP EBP
0059ce65 : POP EBX
0059ce66 : ADD ESP,0x80
0059ce6c : RET 0x4
