PROGRAM  : Maestia.exe
FUNCTION : FUN_00696290
ENTRY    : 00696290
BODY     : [[00696290, 00696373]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00696290(char param_1)

{
  undefined2 uVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  uint uVar5;
  int unaff_EBX;
  uint uVar6;
  int unaff_EDI;
  int local_8;
  int local_4;
  
  uVar4 = *(undefined4 *)(unaff_EBX + 0x1c);
  uVar2 = FUN_00687bd0();
  if (local_8 == 0) {
    *(uint *)(unaff_EDI + 0x18) = uVar2;
    if (param_1 == '\0') {
      local_4 = uVar2 * 2;
    }
    else {
      uVar3 = FUN_0068a220(uVar4,4,0,uVar2,0,&local_8);
      *(undefined4 *)(unaff_EDI + 0x1c) = uVar3;
      if (local_8 != 0) {
        return local_8;
      }
      local_4 = uVar2 * 4;
    }
    uVar4 = FUN_0068a220(uVar4,2,0,uVar2,0,&local_8);
    *(undefined4 *)(unaff_EDI + 0x20) = uVar4;
    if ((local_8 == 0) && (local_8 = FUN_00688900(), local_8 == 0)) {
      uVar6 = 0;
      if (uVar2 != 0) {
        do {
          uVar1 = FUN_00687940();
          *(undefined2 *)(*(int *)(unaff_EDI + 0x20) + uVar6 * 2) = uVar1;
          if (param_1 != '\0') {
            uVar5 = FUN_00687940();
            *(uint *)(*(int *)(unaff_EDI + 0x1c) + uVar6 * 4) =
                 (uVar5 & 0xffff) + *(int *)(unaff_EDI + 8);
          }
          uVar6 = uVar6 + 1;
        } while (uVar6 < uVar2);
      }
      FUN_006889b0();
    }
  }
  return local_8;
}



============================================================
DISASSEMBLY
============================================================
00696290 : SUB ESP,0x8
00696293 : PUSH EBP
00696294 : PUSH ESI
00696295 : MOV ESI,dword ptr [EBX + 0x1c]
00696298 : LEA EAX,[ESP + 0x8]
0069629c : PUSH EAX
0069629d : PUSH EBX
0069629e : CALL 0x00687bd0
006962a3 : MOV EBP,EAX
006962a5 : MOV EAX,dword ptr [ESP + 0x10]
006962a9 : ADD ESP,0x8
006962ac : TEST EAX,EAX
006962ae : JNZ 0x0069636e
006962b4 : MOV dword ptr [EDI + 0x18],EBP
006962b7 : CMP byte ptr [ESP + 0x14],AL
006962bb : JZ 0x006962ec
006962bd : LEA ECX,[ESP + 0x8]
006962c1 : PUSH ECX
006962c2 : PUSH EAX
006962c3 : PUSH EBP
006962c4 : PUSH EAX
006962c5 : PUSH 0x4
006962c7 : PUSH ESI
006962c8 : CALL 0x0068a220
006962cd : MOV dword ptr [EDI + 0x1c],EAX
006962d0 : MOV EAX,dword ptr [ESP + 0x20]
006962d4 : ADD ESP,0x18
006962d7 : TEST EAX,EAX
006962d9 : JNZ 0x0069636e
006962df : LEA EDX,[EBP*0x4 + 0x0]
006962e6 : MOV dword ptr [ESP + 0xc],EDX
006962ea : JMP 0x006962f4
006962ec : LEA EAX,[EBP + EBP*0x1]
006962f0 : MOV dword ptr [ESP + 0xc],EAX
006962f4 : LEA ECX,[ESP + 0x8]
006962f8 : PUSH ECX
006962f9 : PUSH 0x0
006962fb : PUSH EBP
006962fc : PUSH 0x0
006962fe : PUSH 0x2
00696300 : PUSH ESI
00696301 : CALL 0x0068a220
00696306 : MOV dword ptr [EDI + 0x20],EAX
00696309 : MOV EAX,dword ptr [ESP + 0x20]
0069630d : ADD ESP,0x18
00696310 : TEST EAX,EAX
00696312 : JNZ 0x0069636e
00696314 : MOV EDX,dword ptr [ESP + 0xc]
00696318 : PUSH EDX
00696319 : PUSH EBX
0069631a : CALL 0x00688900
0069631f : ADD ESP,0x8
00696322 : MOV dword ptr [ESP + 0x8],EAX
00696326 : TEST EAX,EAX
00696328 : JNZ 0x0069636e
0069632a : XOR ESI,ESI
0069632c : TEST EBP,EBP
0069632e : JBE 0x00696361
00696330 : PUSH EBX
00696331 : CALL 0x00687940
00696336 : MOV ECX,dword ptr [EDI + 0x20]
00696339 : ADD ESP,0x4
0069633c : CMP byte ptr [ESP + 0x14],0x0
00696341 : MOV word ptr [ECX + ESI*0x2],AX
00696345 : JZ 0x0069635c
00696347 : PUSH EBX
00696348 : CALL 0x00687940
0069634d : MOVZX EDX,AX
00696350 : MOV EAX,dword ptr [EDI + 0x1c]
00696353 : ADD ESP,0x4
00696356 : ADD EDX,dword ptr [EDI + 0x8]
00696359 : MOV dword ptr [EAX + ESI*0x4],EDX
0069635c : INC ESI
0069635d : CMP ESI,EBP
0069635f : JC 0x00696330
00696361 : PUSH EBX
00696362 : CALL 0x006889b0
00696367 : MOV EAX,dword ptr [ESP + 0xc]
0069636b : ADD ESP,0x4
0069636e : POP ESI
0069636f : POP EBP
00696370 : ADD ESP,0x8
00696373 : RET
