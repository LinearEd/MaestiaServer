PROGRAM  : Maestia.exe
FUNCTION : FUN_007e9d70
ENTRY    : 007e9d70
BODY     : [[007e9d70, 007ea094]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007e9d70(int param_1,undefined4 param_2,float *param_3)

{
  int *piVar1;
  char cVar2;
  size_t _NumOfElements;
  float *unaff_EDI;
  float10 fVar3;
  float fVar4;
  float local_28;
  undefined4 local_24;
  int local_20;
  float local_14;
  float local_10;
  float local_c;
  
  DAT_01720f4c = *unaff_EDI;
  DAT_01720f50 = unaff_EDI[1];
  DAT_01720f54 = unaff_EDI[2];
  local_24 = 0;
  local_28 = 1000.0;
  _NumOfElements = FUN_007e8090(param_2,unaff_EDI);
  if ((int)_NumOfElements < 1) {
    return 0;
  }
  local_14 = 0.0;
  local_10 = 0.0;
  local_c = 0.0;
  if (1 < (int)_NumOfElements) {
    _qsort(*(void **)(param_1 + 0xfc),_NumOfElements,4,FUN_007e03d0);
  }
  local_20 = 0;
  if (0 < (int)_NumOfElements) {
    do {
      piVar1 = *(int **)(*(int *)(*(int *)(param_1 + 0xfc) + local_20 * 4) + 8);
      if ((((piVar1 == (int *)0x0) || (piVar1[0xc1] != 1)) && (piVar1[0xc1] != 2)) &&
         (piVar1[0xc1] != 0xd)) goto LAB_007ea076;
      cVar2 = FUN_007d5bf0(piVar1);
      if (cVar2 == '\0') {
        cVar2 = FUN_007d5cf0(piVar1);
        if (cVar2 != '\0') goto LAB_007e9eef;
        cVar2 = (**(code **)(*piVar1 + 200))();
        if (cVar2 != '\0') {
          cVar2 = (**(code **)(*piVar1 + 0x104))();
          if (cVar2 == '\0') goto LAB_007ea076;
          fVar4 = (DAT_01720f54 - local_c) * (DAT_01720f54 - local_c) +
                  (DAT_01720f50 - local_10) * (DAT_01720f50 - local_10) +
                  (DAT_01720f4c - local_14) * (DAT_01720f4c - local_14);
LAB_007ea023:
          fVar3 = (float10)FUN_0040f460(fVar4);
          if (fVar3 < (float10)local_28) {
            *param_3 = local_14;
            param_3[1] = local_10;
            param_3[2] = local_c;
            local_24 = 2;
            local_28 = (float)fVar3;
          }
        }
      }
      else {
LAB_007e9eef:
        cVar2 = FUN_007e22b0(param_2,unaff_EDI,&local_14);
        if (cVar2 != '\0') {
          fVar3 = (float10)FUN_0040f460((DAT_01720f4c - local_14) * (DAT_01720f4c - local_14) +
                                        (DAT_01720f54 - local_c) * (DAT_01720f54 - local_c) +
                                        (DAT_01720f50 - local_10) * (DAT_01720f50 - local_10));
          if (fVar3 < (float10)local_28) {
            *param_3 = local_14;
            param_3[1] = local_10;
            param_3[2] = local_c;
            local_24 = 1;
            local_28 = (float)fVar3;
          }
        }
        cVar2 = (**(code **)(*piVar1 + 200))();
        if (cVar2 != '\0') {
          cVar2 = (**(code **)(*piVar1 + 0x104))();
          if (cVar2 != '\0') {
            fVar4 = (DAT_01720f4c - local_14) * (DAT_01720f4c - local_14) +
                    (DAT_01720f54 - local_c) * (DAT_01720f54 - local_c) +
                    (DAT_01720f50 - local_10) * (DAT_01720f50 - local_10);
            goto LAB_007ea023;
          }
        }
      }
LAB_007ea076:
      local_20 = local_20 + 1;
    } while (local_20 < (int)_NumOfElements);
  }
  return local_24;
}



============================================================
DISASSEMBLY
============================================================
007e9d70 : PUSH EBP
007e9d71 : MOV EBP,ESP
007e9d73 : AND ESP,0xfffffff8
007e9d76 : SUB ESP,0x20
007e9d79 : MOVSS XMM0,dword ptr [EDI]
007e9d7d : MOV ECX,dword ptr [EBP + 0x8]
007e9d80 : PUSH EBX
007e9d81 : MOV EBX,dword ptr [EBP + 0xc]
007e9d84 : MOVSS dword ptr [0x01720f4c],XMM0
007e9d8c : MOVSS XMM0,dword ptr [EDI + 0x4]
007e9d91 : PUSH ESI
007e9d92 : MOVSS dword ptr [0x01720f50],XMM0
007e9d9a : MOVSS XMM0,dword ptr [EDI + 0x8]
007e9d9f : PUSH EDI
007e9da0 : MOVSS dword ptr [0x01720f54],XMM0
007e9da8 : MOVSS XMM0,dword ptr [0x00cdf16c]
007e9db0 : PUSH EBX
007e9db1 : MOV dword ptr [ESP + 0x14],0x0
007e9db9 : MOVSS dword ptr [ESP + 0x10],XMM0
007e9dbf : CALL 0x007e8090
007e9dc4 : MOV ESI,EAX
007e9dc6 : MOV dword ptr [ESP + 0x18],ESI
007e9dca : TEST ESI,ESI
007e9dcc : JG 0x007e9dd8
007e9dce : XOR EAX,EAX
007e9dd0 : POP ESI
007e9dd1 : POP EBX
007e9dd2 : MOV ESP,EBP
007e9dd4 : POP EBP
007e9dd5 : RET 0x14
007e9dd8 : CMP ESI,0x1
007e9ddb : XORPS XMM0,XMM0
007e9dde : MOVSS dword ptr [ESP + 0x1c],XMM0
007e9de4 : MOVSS dword ptr [ESP + 0x20],XMM0
007e9dea : MOVSS dword ptr [ESP + 0x24],XMM0
007e9df0 : JLE 0x007e9e0c
007e9df2 : MOV EAX,dword ptr [EBP + 0x8]
007e9df5 : MOV ECX,dword ptr [EAX + 0xfc]
007e9dfb : PUSH 0x7e03d0
007e9e00 : PUSH 0x4
007e9e02 : PUSH ESI
007e9e03 : PUSH ECX
007e9e04 : CALL 0x00635ad0
007e9e09 : ADD ESP,0x10
007e9e0c : XOR EAX,EAX
007e9e0e : MOV dword ptr [ESP + 0x10],EAX
007e9e12 : TEST ESI,ESI
007e9e14 : JLE 0x007ea089
007e9e1a : MOV EDX,dword ptr [EBP + 0x8]
007e9e1d : MOV ECX,dword ptr [EDX + 0xfc]
007e9e23 : MOV EDX,dword ptr [ECX + EAX*0x4]
007e9e26 : MOV ESI,dword ptr [EDX + 0x8]
007e9e29 : TEST ESI,ESI
007e9e2b : JZ 0x007e9e36
007e9e2d : CMP dword ptr [ESI + 0x304],0x1
007e9e34 : JZ 0x007e9e4a
007e9e36 : MOV EAX,dword ptr [ESI + 0x304]
007e9e3c : CMP EAX,0x2
007e9e3f : JZ 0x007e9e4a
007e9e41 : CMP EAX,0xd
007e9e44 : JNZ 0x007ea076
007e9e4a : PUSH ESI
007e9e4b : CALL 0x007d5bf0
007e9e50 : TEST AL,AL
007e9e52 : JNZ 0x007e9eef
007e9e58 : PUSH ESI
007e9e59 : CALL 0x007d5cf0
007e9e5e : TEST AL,AL
007e9e60 : JNZ 0x007e9eef
007e9e66 : MOV ECX,dword ptr [EBP + 0x18]
007e9e69 : MOV EAX,dword ptr [ESI]
007e9e6b : MOV EDX,dword ptr [EAX + 0xc8]
007e9e71 : PUSH ECX
007e9e72 : PUSH EBX
007e9e73 : PUSH EDI
007e9e74 : MOV ECX,ESI
007e9e76 : CALL EDX
007e9e78 : TEST AL,AL
007e9e7a : JZ 0x007ea076
007e9e80 : MOV ECX,dword ptr [EBP + 0x18]
007e9e83 : MOV EDX,dword ptr [EBP + 0x14]
007e9e86 : MOV EAX,dword ptr [ESI]
007e9e88 : PUSH ECX
007e9e89 : PUSH EDX
007e9e8a : MOV EDX,dword ptr [EAX + 0x104]
007e9e90 : LEA ECX,[ESP + 0x24]
007e9e94 : PUSH ECX
007e9e95 : PUSH EBX
007e9e96 : PUSH EDI
007e9e97 : MOV ECX,ESI
007e9e99 : CALL EDX
007e9e9b : TEST AL,AL
007e9e9d : JZ 0x007ea076
007e9ea3 : MOVSS XMM2,dword ptr [0x01720f54]
007e9eab : SUBSS XMM2,dword ptr [ESP + 0x24]
007e9eb1 : MOVSS XMM1,dword ptr [0x01720f50]
007e9eb9 : SUBSS XMM1,dword ptr [ESP + 0x20]
007e9ebf : MOVSS XMM0,dword ptr [0x01720f4c]
007e9ec7 : SUBSS XMM0,dword ptr [ESP + 0x1c]
007e9ecd : MOVAPS XMM3,XMM2
007e9ed0 : MULSS XMM3,XMM2
007e9ed4 : MOVAPS XMM2,XMM1
007e9ed7 : MULSS XMM2,XMM1
007e9edb : MOVAPS XMM1,XMM0
007e9ede : ADDSS XMM3,XMM2
007e9ee2 : MULSS XMM1,XMM0
007e9ee6 : ADDSS XMM3,XMM1
007e9eea : JMP 0x007ea023
007e9eef : LEA EAX,[ESP + 0x1c]
007e9ef3 : PUSH EAX
007e9ef4 : PUSH EDI
007e9ef5 : PUSH EBX
007e9ef6 : MOV ECX,ESI
007e9ef8 : CALL 0x007e22b0
007e9efd : TEST AL,AL
007e9eff : JZ 0x007e9f9f
007e9f05 : MOVSS XMM0,dword ptr [0x01720f4c]
007e9f0d : SUBSS XMM0,dword ptr [ESP + 0x1c]
007e9f13 : MOVSS XMM2,dword ptr [0x01720f54]
007e9f1b : SUBSS XMM2,dword ptr [ESP + 0x24]
007e9f21 : MOVSS XMM1,dword ptr [0x01720f50]
007e9f29 : SUBSS XMM1,dword ptr [ESP + 0x20]
007e9f2f : MOVAPS XMM3,XMM0
007e9f32 : MULSS XMM3,XMM0
007e9f36 : MOVAPS XMM0,XMM2
007e9f39 : MULSS XMM0,XMM2
007e9f3d : ADDSS XMM3,XMM0
007e9f41 : MOVAPS XMM0,XMM1
007e9f44 : MULSS XMM0,XMM1
007e9f48 : PUSH ECX
007e9f49 : ADDSS XMM3,XMM0
007e9f4d : MOVSS dword ptr [ESP],XMM3
007e9f52 : CALL 0x0040f460
007e9f57 : FST float ptr [ESP + 0x18]
007e9f5b : FLD float ptr [ESP + 0xc]
007e9f5f : ADD ESP,0x4
007e9f62 : FCOMIP ST0,ST1
007e9f64 : FSTP ST0
007e9f66 : JBE 0x007e9f9f
007e9f68 : MOV EAX,dword ptr [EBP + 0x10]
007e9f6b : MOVSS XMM0,dword ptr [ESP + 0x1c]
007e9f71 : MOVSS dword ptr [EAX],XMM0
007e9f75 : MOVSS XMM0,dword ptr [ESP + 0x20]
007e9f7b : MOVSS dword ptr [EAX + 0x4],XMM0
007e9f80 : MOVSS XMM0,dword ptr [ESP + 0x24]
007e9f86 : MOVSS dword ptr [EAX + 0x8],XMM0
007e9f8b : MOVSS XMM0,dword ptr [ESP + 0x14]
007e9f91 : MOVSS dword ptr [ESP + 0x8],XMM0
007e9f97 : MOV dword ptr [ESP + 0xc],0x1
007e9f9f : MOV EAX,dword ptr [EBP + 0x18]
007e9fa2 : MOV EDX,dword ptr [ESI]
007e9fa4 : MOV EDX,dword ptr [EDX + 0xc8]
007e9faa : PUSH EAX
007e9fab : PUSH EBX
007e9fac : PUSH EDI
007e9fad : MOV ECX,ESI
007e9faf : CALL EDX
007e9fb1 : TEST AL,AL
007e9fb3 : JZ 0x007ea076
007e9fb9 : MOV ECX,dword ptr [EBP + 0x18]
007e9fbc : MOV EDX,dword ptr [EBP + 0x14]
007e9fbf : MOV EAX,dword ptr [ESI]
007e9fc1 : PUSH ECX
007e9fc2 : PUSH EDX
007e9fc3 : MOV EDX,dword ptr [EAX + 0x104]
007e9fc9 : LEA ECX,[ESP + 0x24]
007e9fcd : PUSH ECX
007e9fce : PUSH EBX
007e9fcf : PUSH EDI
007e9fd0 : MOV ECX,ESI
007e9fd2 : CALL EDX
007e9fd4 : TEST AL,AL
007e9fd6 : JZ 0x007ea076
007e9fdc : MOVSS XMM0,dword ptr [0x01720f4c]
007e9fe4 : SUBSS XMM0,dword ptr [ESP + 0x1c]
007e9fea : MOVSS XMM2,dword ptr [0x01720f54]
007e9ff2 : SUBSS XMM2,dword ptr [ESP + 0x24]
007e9ff8 : MOVSS XMM1,dword ptr [0x01720f50]
007ea000 : SUBSS XMM1,dword ptr [ESP + 0x20]
007ea006 : MOVAPS XMM3,XMM0
007ea009 : MULSS XMM3,XMM0
007ea00d : MOVAPS XMM0,XMM2
007ea010 : MULSS XMM0,XMM2
007ea014 : ADDSS XMM3,XMM0
007ea018 : MOVAPS XMM0,XMM1
007ea01b : MULSS XMM0,XMM1
007ea01f : ADDSS XMM3,XMM0
007ea023 : PUSH ECX
007ea024 : MOVSS dword ptr [ESP],XMM3
007ea029 : CALL 0x0040f460
007ea02e : FST float ptr [ESP + 0x18]
007ea032 : FLD float ptr [ESP + 0xc]
007ea036 : ADD ESP,0x4
007ea039 : FCOMIP ST0,ST1
007ea03b : FSTP ST0
007ea03d : JBE 0x007ea076
007ea03f : MOV EAX,dword ptr [EBP + 0x10]
007ea042 : MOVSS XMM0,dword ptr [ESP + 0x1c]
007ea048 : MOVSS dword ptr [EAX],XMM0
007ea04c : MOVSS XMM0,dword ptr [ESP + 0x20]
007ea052 : MOVSS dword ptr [EAX + 0x4],XMM0
007ea057 : MOVSS XMM0,dword ptr [ESP + 0x24]
007ea05d : MOVSS dword ptr [EAX + 0x8],XMM0
007ea062 : MOVSS XMM0,dword ptr [ESP + 0x14]
007ea068 : MOVSS dword ptr [ESP + 0x8],XMM0
007ea06e : MOV dword ptr [ESP + 0xc],0x2
007ea076 : MOV EAX,dword ptr [ESP + 0x10]
007ea07a : INC EAX
007ea07b : CMP EAX,dword ptr [ESP + 0x18]
007ea07f : MOV dword ptr [ESP + 0x10],EAX
007ea083 : JL 0x007e9e1a
007ea089 : MOV EAX,dword ptr [ESP + 0xc]
007ea08d : POP ESI
007ea08e : POP EBX
007ea08f : MOV ESP,EBP
007ea091 : POP EBP
007ea092 : RET 0x14
