PROGRAM  : Maestia.exe
FUNCTION : FUN_005f43f0
ENTRY    : 005f43f0
BODY     : [[005f43f0, 005f454b]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_005f43f0(uint param_1,uint param_2,int *param_3)

{
  int *piVar1;
  int iVar2;
  uint *in_ECX;
  uint uVar3;
  uint uVar4;
  
  if (*param_3 == 0) {
    if ((param_1 <= *(ushort *)(param_3 + 7)) && (param_2 <= *(ushort *)((int)param_3 + 0x1e))) {
      uVar4 = *(ushort *)((int)param_3 + 0x1e) - param_2;
      uVar3 = *(ushort *)(param_3 + 7) - param_1;
      if ((*in_ECX <= uVar3) || (*in_ECX <= uVar4)) {
        iVar2 = FUN_005f4190(param_3);
        param_3[4] = iVar2;
        if (uVar4 < uVar3) {
          *(short *)(iVar2 + 0x18) = (short)param_3[6] + (short)param_1;
          *(short *)(param_3[4] + 0x1c) = (short)uVar3;
          if (*in_ECX <= uVar4) {
            iVar2 = FUN_005f4190(param_3);
            param_3[5] = iVar2;
            *(undefined4 *)(iVar2 + 0x10) = 0;
            *(short *)(param_3[5] + 0x1a) = *(short *)((int)param_3 + 0x1a) + (short)param_2;
            *(short *)(param_3[5] + 0x1e) = (short)uVar4;
            *(short *)(param_3[5] + 0x1c) = (short)param_1;
          }
        }
        else {
          *(short *)(iVar2 + 0x1a) = *(short *)((int)param_3 + 0x1a) + (short)param_2;
          *(short *)(param_3[4] + 0x1e) = (short)uVar4;
          if (*in_ECX <= uVar3) {
            iVar2 = FUN_005f4190(param_3);
            param_3[5] = iVar2;
            *(undefined4 *)(iVar2 + 0x10) = 0;
            *(short *)(param_3[5] + 0x18) = (short)param_3[6] + (short)param_1;
            *(short *)(param_3[5] + 0x1c) = (short)uVar3;
            *(short *)(param_3[5] + 0x1e) = (short)param_2;
          }
        }
      }
      *(short *)(param_3 + 7) = (short)param_1;
      *(short *)((int)param_3 + 0x1e) = (short)param_2;
      return param_3;
    }
  }
  else {
    if ((param_3[4] != 0) &&
       (piVar1 = (int *)FUN_005f43f0(param_1,param_2,param_3[4]), piVar1 != (int *)0x0)) {
      return piVar1;
    }
    if (param_3[5] != 0) {
      piVar1 = (int *)FUN_005f43f0(param_1,param_2,param_3[5]);
      return piVar1;
    }
  }
  return (int *)0x0;
}



============================================================
DISASSEMBLY
============================================================
005f43f0 : PUSH EBX
005f43f1 : PUSH EBP
005f43f2 : PUSH ESI
005f43f3 : MOV ESI,dword ptr [ESP + 0x18]
005f43f7 : CMP dword ptr [ESI],0x0
005f43fa : PUSH EDI
005f43fb : MOV EDI,ECX
005f43fd : JZ 0x005f443e
005f43ff : MOV ECX,dword ptr [ESI + 0x10]
005f4402 : MOV EBX,dword ptr [ESP + 0x18]
005f4406 : MOV EBP,dword ptr [ESP + 0x14]
005f440a : XOR EAX,EAX
005f440c : TEST ECX,ECX
005f440e : JZ 0x005f4422
005f4410 : PUSH ECX
005f4411 : PUSH EBX
005f4412 : PUSH EBP
005f4413 : MOV ECX,EDI
005f4415 : CALL 0x005f43f0
005f441a : TEST EAX,EAX
005f441c : JNZ 0x005f4545
005f4422 : MOV ESI,dword ptr [ESI + 0x14]
005f4425 : TEST ESI,ESI
005f4427 : JZ 0x005f4545
005f442d : PUSH ESI
005f442e : PUSH EBX
005f442f : PUSH EBP
005f4430 : MOV ECX,EDI
005f4432 : CALL 0x005f43f0
005f4437 : POP EDI
005f4438 : POP ESI
005f4439 : POP EBP
005f443a : POP EBX
005f443b : RET 0xc
005f443e : MOVZX EBX,word ptr [ESI + 0x1c]
005f4442 : MOV ECX,dword ptr [ESP + 0x14]
005f4446 : CMP ECX,EBX
005f4448 : JA 0x005f4543
005f444e : MOVZX EBP,word ptr [ESI + 0x1e]
005f4452 : MOV EAX,dword ptr [ESP + 0x18]
005f4456 : CMP EAX,EBP
005f4458 : JA 0x005f4543
005f445e : SUB EBP,EAX
005f4460 : MOV EAX,dword ptr [EDI]
005f4462 : SUB EBX,ECX
005f4464 : CMP EBX,EAX
005f4466 : JNC 0x005f4470
005f4468 : CMP EBP,EAX
005f446a : JC 0x005f4528
005f4470 : LEA ECX,[EDI + 0x64]
005f4473 : PUSH ESI
005f4474 : MOV dword ptr [ESP + 0x20],ECX
005f4478 : CALL 0x005f4190
005f447d : MOV dword ptr [ESI + 0x10],EAX
005f4480 : CMP EBX,EBP
005f4482 : JBE 0x005f44d9
005f4484 : MOV CX,word ptr [ESI + 0x18]
005f4488 : ADD CX,word ptr [ESP + 0x14]
005f448d : MOV word ptr [EAX + 0x18],CX
005f4491 : MOV EDX,dword ptr [ESI + 0x10]
005f4494 : MOV word ptr [EDX + 0x1c],BX
005f4498 : CMP EBP,dword ptr [EDI]
005f449a : JC 0x005f4528
005f44a0 : MOV ECX,dword ptr [ESP + 0x1c]
005f44a4 : PUSH ESI
005f44a5 : CALL 0x005f4190
005f44aa : MOV dword ptr [ESI + 0x14],EAX
005f44ad : MOV dword ptr [EAX + 0x10],0x0
005f44b4 : MOV AX,word ptr [ESI + 0x1a]
005f44b8 : MOV ECX,dword ptr [ESI + 0x14]
005f44bb : ADD AX,word ptr [ESP + 0x18]
005f44c0 : MOV word ptr [ECX + 0x1a],AX
005f44c4 : MOV EDX,dword ptr [ESI + 0x14]
005f44c7 : MOV CX,word ptr [ESP + 0x14]
005f44cc : MOV word ptr [EDX + 0x1e],BP
005f44d0 : MOV EAX,dword ptr [ESI + 0x14]
005f44d3 : MOV word ptr [EAX + 0x1c],CX
005f44d7 : JMP 0x005f4528
005f44d9 : MOV DX,word ptr [ESI + 0x1a]
005f44dd : ADD DX,word ptr [ESP + 0x18]
005f44e2 : MOV word ptr [EAX + 0x1a],DX
005f44e6 : MOV EAX,dword ptr [ESI + 0x10]
005f44e9 : MOV word ptr [EAX + 0x1e],BP
005f44ed : CMP EBX,dword ptr [EDI]
005f44ef : JC 0x005f4528
005f44f1 : MOV ECX,dword ptr [ESP + 0x1c]
005f44f5 : PUSH ESI
005f44f6 : CALL 0x005f4190
005f44fb : MOV dword ptr [ESI + 0x14],EAX
005f44fe : MOV dword ptr [EAX + 0x10],0x0
005f4505 : MOV CX,word ptr [ESI + 0x18]
005f4509 : MOV EDX,dword ptr [ESI + 0x14]
005f450c : ADD CX,word ptr [ESP + 0x14]
005f4511 : MOV word ptr [EDX + 0x18],CX
005f4515 : MOV EAX,dword ptr [ESI + 0x14]
005f4518 : MOV DX,word ptr [ESP + 0x18]
005f451d : MOV word ptr [EAX + 0x1c],BX
005f4521 : MOV ECX,dword ptr [ESI + 0x14]
005f4524 : MOV word ptr [ECX + 0x1e],DX
005f4528 : MOV AX,word ptr [ESP + 0x14]
005f452d : MOV CX,word ptr [ESP + 0x18]
005f4532 : POP EDI
005f4533 : MOV word ptr [ESI + 0x1c],AX
005f4537 : MOV word ptr [ESI + 0x1e],CX
005f453b : MOV EAX,ESI
005f453d : POP ESI
005f453e : POP EBP
005f453f : POP EBX
005f4540 : RET 0xc
005f4543 : XOR EAX,EAX
005f4545 : POP EDI
005f4546 : POP ESI
005f4547 : POP EBP
005f4548 : POP EBX
005f4549 : RET 0xc
