PROGRAM  : Maestia.exe
FUNCTION : FUN_0077b520
ENTRY    : 0077b520
BODY     : [[0077b520, 0077b82f]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_0077b520(int *param_1,undefined4 param_2)

{
  int iVar1;
  byte bVar2;
  undefined4 uVar3;
  char cVar4;
  undefined4 *in_EAX;
  undefined4 uVar5;
  DWORD DVar6;
  int iVar7;
  int *piVar8;
  undefined4 *in_ECX;
  int iVar9;
  float in_XMM0_Da;
  int local_34;
  int local_30;
  int local_2c;
  undefined4 local_28;
  undefined4 local_24;
  float local_20;
  int local_1c;
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  
  *(undefined1 *)((int)param_1 + 0x2eee9) = 0;
  FUN_007df8c0(*in_EAX,in_EAX[2],&local_20,&local_1c);
  FUN_007df8c0(*in_ECX,in_ECX[2],&local_24,&local_28);
  uVar3 = local_24;
  uVar5 = local_28;
  FUN_0077af50(local_20,local_1c,local_24,local_28,param_2);
  uVar5 = FUN_0077a0c0(uVar3,uVar5);
  FUN_0077ac40(uVar5);
  DVar6 = GetTickCount();
  param_1[0xbbb3] = DVar6;
  param_1[0xbbb4] = 0;
  cVar4 = FUN_00486300();
  if ((cVar4 == '\0') && ((param_1[6] - param_1[5] & 0xfffffffcU) != 0)) {
    while (cVar4 = FUN_00486300(), cVar4 == '\0') {
      local_1c = FUN_00779f20();
      if (*(int *)(local_1c + 0x18) == param_1[0x28]) {
        cVar4 = FUN_0077b2e0(param_1);
        return cVar4 != '\0';
      }
      iVar9 = *(int *)(local_1c + 0xc);
      local_14 = *(int *)(local_1c + 0x10);
      local_18 = iVar9;
      FUN_007e10d0(iVar9);
      local_34 = 0;
      local_30 = 0;
      local_2c = 0;
      do {
        cVar4 = FUN_00486300();
        if (cVar4 != '\0') {
          return false;
        }
        if (local_2c == 0) {
          local_30 = -1;
LAB_0077b688:
          local_34 = 0;
        }
        else if (local_2c == 1) {
          local_34 = -1;
          local_30 = 0;
        }
        else if (local_2c == 2) {
          local_34 = 1;
          local_30 = 0;
        }
        else if (local_2c == 3) {
          local_30 = 1;
          goto LAB_0077b688;
        }
        iVar9 = iVar9 + local_34;
        iVar1 = local_30 + local_14;
        local_c = iVar9;
        iVar7 = FUN_007e10d0(iVar9);
        if ((iVar7 != 0) &&
           (local_10 = *(int *)(iVar7 + 0xc) - *(int *)(iVar7 + 8),
           local_10 / 7 + (local_10 >> 0x1f) != local_10 >> 0x1f)) {
          if ((char)param_1[0xbbba] == '\0') {
            bVar2 = *(byte *)(*(int *)(iVar7 + 8) + 2);
            if ((*(byte *)(*param_1 + 0x274 + (uint)bVar2 * 0x28) == bVar2) &&
               ((*(uint *)(*param_1 + (uint)bVar2 * 0x28 + 0x294) >> ((byte)param_1[0xbbb9] & 0x1f)
                & 1) != 0)) {
LAB_0077b724:
              local_10 = FUN_0077a0c0(iVar9,iVar1);
              FUN_0077a420(iVar9,local_24,local_28);
              local_20 = in_XMM0_Da;
              piVar8 = (int *)FUN_0077ac40(local_10);
              if (piVar8 == (int *)0x0) {
                return false;
              }
              iVar9 = piVar8[2];
              if (((iVar9 != 1) ||
                  (in_XMM0_Da = local_20,
                  local_20 < (float)piVar8[1] || local_20 == (float)piVar8[1])) && (iVar9 != 2)) {
                *piVar8 = local_1c;
                piVar8[1] = (int)local_20;
                piVar8[3] = local_c;
                piVar8[4] = iVar1;
                *(undefined2 *)(piVar8 + 5) = 0;
                if (iVar9 == 1) {
                  FUN_00779e30(piVar8);
                  in_XMM0_Da = local_20;
                }
                else {
                  FUN_0077a180(piVar8);
                  piVar8[2] = 1;
                  in_XMM0_Da = local_20;
                }
              }
            }
          }
          else if (*(char *)(*(int *)(iVar7 + 8) + 2) != '\x02') goto LAB_0077b724;
        }
        local_2c = local_2c + 1;
        iVar9 = local_18;
      } while (local_2c < 4);
      *(undefined4 *)(local_1c + 8) = 2;
      cVar4 = FUN_00486300();
      if (cVar4 != '\0') {
        FUN_008018d0(L"== Path Find Abort ( Time Over or Force abort ) ====");
        return false;
      }
      if ((param_1[6] - param_1[5] & 0xfffffffcU) == 0) {
        return false;
      }
    }
  }
  return false;
}



============================================================
DISASSEMBLY
============================================================
0077b520 : PUSH EBP
0077b521 : MOV EBP,ESP
0077b523 : AND ESP,0xfffffff8
0077b526 : SUB ESP,0x2c
0077b529 : PUSH EBX
0077b52a : MOV EBX,dword ptr [EBP + 0x8]
0077b52d : PUSH ESI
0077b52e : MOV ESI,dword ptr [EBX]
0077b530 : PUSH EDI
0077b531 : MOV EDI,ECX
0077b533 : LEA ECX,[ESP + 0x24]
0077b537 : PUSH ECX
0077b538 : LEA EDX,[ESP + 0x24]
0077b53c : MOV byte ptr [EBX + 0x2eee9],0x0
0077b543 : FLD float ptr [EAX + 0x8]
0077b546 : PUSH EDX
0077b547 : SUB ESP,0x8
0077b54a : FSTP float ptr [ESP + 0x4]
0077b54e : FLD float ptr [EAX]
0077b550 : MOV EAX,ESI
0077b552 : FSTP float ptr [ESP]
0077b555 : CALL 0x007df8c0
0077b55a : FLD float ptr [EDI + 0x8]
0077b55d : LEA EAX,[ESP + 0x18]
0077b561 : PUSH EAX
0077b562 : LEA ECX,[ESP + 0x20]
0077b566 : PUSH ECX
0077b567 : SUB ESP,0x8
0077b56a : FSTP float ptr [ESP + 0x4]
0077b56e : MOV EAX,ESI
0077b570 : FLD float ptr [EDI]
0077b572 : FSTP float ptr [ESP]
0077b575 : CALL 0x007df8c0
0077b57a : MOV EDX,dword ptr [EBP + 0xc]
0077b57d : MOV ESI,dword ptr [ESP + 0x18]
0077b581 : MOV EDI,dword ptr [ESP + 0x1c]
0077b585 : MOV EAX,dword ptr [ESP + 0x24]
0077b589 : MOV ECX,dword ptr [ESP + 0x20]
0077b58d : PUSH EDX
0077b58e : PUSH ESI
0077b58f : PUSH EDI
0077b590 : PUSH EAX
0077b591 : PUSH ECX
0077b592 : MOV EAX,EBX
0077b594 : CALL 0x0077af50
0077b599 : PUSH ESI
0077b59a : PUSH EDI
0077b59b : MOV ECX,EBX
0077b59d : CALL 0x0077a0c0
0077b5a2 : PUSH EAX
0077b5a3 : MOV ECX,EBX
0077b5a5 : CALL 0x0077ac40
0077b5aa : CALL dword ptr [0x00b850d8]
0077b5b0 : MOV dword ptr [EBX + 0x2eecc],EAX
0077b5b6 : MOV EAX,EBX
0077b5b8 : MOV dword ptr [EBX + 0x2eed0],0x0
0077b5c2 : CALL 0x00486300
0077b5c7 : TEST AL,AL
0077b5c9 : JNZ 0x0077b825
0077b5cf : MOV EDX,dword ptr [EBX + 0x18]
0077b5d2 : SUB EDX,dword ptr [EBX + 0x14]
0077b5d5 : TEST EDX,0xfffffffc
0077b5db : JZ 0x0077b825
0077b5e1 : MOV EAX,EBX
0077b5e3 : CALL 0x00486300
0077b5e8 : TEST AL,AL
0077b5ea : JNZ 0x0077b825
0077b5f0 : MOV ESI,EBX
0077b5f2 : CALL 0x00779f20
0077b5f7 : MOV ECX,dword ptr [EAX + 0x18]
0077b5fa : MOV dword ptr [ESP + 0x24],EAX
0077b5fe : CMP ECX,dword ptr [EBX + 0xa0]
0077b604 : JZ 0x0077b7fc
0077b60a : MOV ESI,dword ptr [EAX + 0xc]
0077b60d : MOV EAX,dword ptr [EAX + 0x10]
0077b610 : MOV ECX,dword ptr [EBX]
0077b612 : PUSH ESI
0077b613 : MOV EDI,EAX
0077b615 : MOV dword ptr [ESP + 0x2c],ESI
0077b619 : MOV dword ptr [ESP + 0x30],EAX
0077b61d : CALL 0x007e10d0
0077b622 : XOR EDI,EDI
0077b624 : MOV dword ptr [ESP + 0xc],EDI
0077b628 : MOV dword ptr [ESP + 0x10],EDI
0077b62c : MOV dword ptr [ESP + 0x14],EDI
0077b630 : JMP 0x0077b63a
0077b632 : MOV ESI,dword ptr [ESP + 0x28]
0077b636 : MOV EDI,dword ptr [ESP + 0x14]
0077b63a : MOV EAX,EBX
0077b63c : CALL 0x00486300
0077b641 : TEST AL,AL
0077b643 : JNZ 0x0077b825
0077b649 : XOR ECX,ECX
0077b64b : CMP EDI,ECX
0077b64d : JNZ 0x0077b659
0077b64f : MOV dword ptr [ESP + 0x10],0xffffffff
0077b657 : JMP 0x0077b688
0077b659 : MOV EAX,0x1
0077b65e : CMP EDI,EAX
0077b660 : JNZ 0x0077b670
0077b662 : MOV dword ptr [ESP + 0xc],0xffffffff
0077b66a : MOV dword ptr [ESP + 0x10],ECX
0077b66e : JMP 0x0077b68c
0077b670 : CMP EDI,0x2
0077b673 : JNZ 0x0077b67f
0077b675 : MOV dword ptr [ESP + 0xc],EAX
0077b679 : MOV dword ptr [ESP + 0x10],ECX
0077b67d : JMP 0x0077b68c
0077b67f : CMP EDI,0x3
0077b682 : JNZ 0x0077b68c
0077b684 : MOV dword ptr [ESP + 0x10],EAX
0077b688 : MOV dword ptr [ESP + 0xc],ECX
0077b68c : MOV EDX,dword ptr [ESP + 0xc]
0077b690 : MOV EAX,dword ptr [ESP + 0x2c]
0077b694 : MOV ECX,dword ptr [ESP + 0x10]
0077b698 : ADD ESI,EDX
0077b69a : LEA EDI,[ECX + EAX*0x1]
0077b69d : MOV ECX,dword ptr [EBX]
0077b69f : PUSH ESI
0077b6a0 : MOV dword ptr [ESP + 0x38],ESI
0077b6a4 : CALL 0x007e10d0
0077b6a9 : MOV ECX,EAX
0077b6ab : TEST ECX,ECX
0077b6ad : JZ 0x0077b7b8
0077b6b3 : MOV EDX,dword ptr [ECX + 0xc]
0077b6b6 : SUB EDX,dword ptr [ECX + 0x8]
0077b6b9 : MOV EAX,0x92492493
0077b6be : MOV dword ptr [ESP + 0x30],EDX
0077b6c2 : IMUL EDX
0077b6c4 : ADD EDX,dword ptr [ESP + 0x30]
0077b6c8 : SAR EDX,0x2
0077b6cb : MOV EAX,EDX
0077b6cd : SHR EAX,0x1f
0077b6d0 : ADD EAX,EDX
0077b6d2 : JZ 0x0077b7b8
0077b6d8 : CMP byte ptr [EBX + 0x2eee8],0x0
0077b6df : JNZ 0x0077b717
0077b6e1 : MOV ECX,dword ptr [ECX + 0x8]
0077b6e4 : MOV AL,byte ptr [ECX + 0x2]
0077b6e7 : MOV EDX,dword ptr [EBX]
0077b6e9 : MOVZX ECX,AL
0077b6ec : LEA ECX,[ECX + ECX*0x4]
0077b6ef : CMP byte ptr [EDX + ECX*0x8 + 0x274],AL
0077b6f6 : LEA ECX,[EDX + ECX*0x8]
0077b6f9 : JNZ 0x0077b7b8
0077b6ff : MOV EDX,dword ptr [ECX + 0x294]
0077b705 : MOV ECX,dword ptr [EBX + 0x2eee4]
0077b70b : SHR EDX,CL
0077b70d : TEST DL,0x1
0077b710 : JNZ 0x0077b724
0077b712 : JMP 0x0077b7b8
0077b717 : MOV EAX,dword ptr [ECX + 0x8]
0077b71a : CMP byte ptr [EAX + 0x2],0x2
0077b71e : JZ 0x0077b7b8
0077b724 : PUSH EDI
0077b725 : PUSH ESI
0077b726 : MOV ECX,EBX
0077b728 : CALL 0x0077a0c0
0077b72d : MOV ECX,dword ptr [ESP + 0x18]
0077b731 : MOV EDX,dword ptr [ESP + 0x1c]
0077b735 : PUSH ECX
0077b736 : PUSH EDX
0077b737 : PUSH ESI
0077b738 : MOV ECX,EDI
0077b73a : MOV ESI,EBX
0077b73c : MOV dword ptr [ESP + 0x3c],EAX
0077b740 : CALL 0x0077a420
0077b745 : MOV EAX,dword ptr [ESP + 0x30]
0077b749 : PUSH EAX
0077b74a : MOV ECX,EBX
0077b74c : MOVSS dword ptr [ESP + 0x24],XMM0
0077b752 : CALL 0x0077ac40
0077b757 : MOV ESI,EAX
0077b759 : TEST ESI,ESI
0077b75b : JZ 0x0077b825
0077b761 : MOV EAX,dword ptr [ESI + 0x8]
0077b764 : CMP EAX,0x1
0077b767 : JNZ 0x0077b775
0077b769 : MOVSS XMM0,dword ptr [ESP + 0x20]
0077b76f : COMISS XMM0,dword ptr [ESI + 0x4]
0077b773 : JA 0x0077b7b8
0077b775 : CMP EAX,0x2
0077b778 : JZ 0x0077b7b8
0077b77a : MOV ECX,dword ptr [ESP + 0x24]
0077b77e : MOV EDX,dword ptr [ESP + 0x34]
0077b782 : MOVSS XMM0,dword ptr [ESP + 0x20]
0077b788 : MOV dword ptr [ESI],ECX
0077b78a : XOR ECX,ECX
0077b78c : MOVSS dword ptr [ESI + 0x4],XMM0
0077b791 : MOV dword ptr [ESI + 0xc],EDX
0077b794 : MOV dword ptr [ESI + 0x10],EDI
0077b797 : MOV word ptr [ESI + 0x14],CX
0077b79b : PUSH ESI
0077b79c : CMP EAX,0x1
0077b79f : JNZ 0x0077b7aa
0077b7a1 : MOV ECX,EBX
0077b7a3 : CALL 0x00779e30
0077b7a8 : JMP 0x0077b7b8
0077b7aa : MOV EDI,EBX
0077b7ac : CALL 0x0077a180
0077b7b1 : MOV dword ptr [ESI + 0x8],0x1
0077b7b8 : MOV EAX,dword ptr [ESP + 0x14]
0077b7bc : INC EAX
0077b7bd : CMP EAX,0x4
0077b7c0 : MOV dword ptr [ESP + 0x14],EAX
0077b7c4 : JL 0x0077b632
0077b7ca : MOV EDX,dword ptr [ESP + 0x24]
0077b7ce : MOV EAX,EBX
0077b7d0 : MOV dword ptr [EDX + 0x8],0x2
0077b7d7 : CALL 0x00486300
0077b7dc : TEST AL,AL
0077b7de : JNZ 0x0077b812
0077b7e0 : MOV EAX,dword ptr [EBX + 0x18]
0077b7e3 : SUB EAX,dword ptr [EBX + 0x14]
0077b7e6 : TEST EAX,0xfffffffc
0077b7eb : JNZ 0x0077b5e1
0077b7f1 : XOR AL,AL
0077b7f3 : POP EDI
0077b7f4 : POP ESI
0077b7f5 : POP EBX
0077b7f6 : MOV ESP,EBP
0077b7f8 : POP EBP
0077b7f9 : RET 0x8
0077b7fc : PUSH EBX
0077b7fd : MOV ECX,EAX
0077b7ff : CALL 0x0077b2e0
0077b804 : TEST AL,AL
0077b806 : SETNZ AL
0077b809 : POP EDI
0077b80a : POP ESI
0077b80b : POP EBX
0077b80c : MOV ESP,EBP
0077b80e : POP EBP
0077b80f : RET 0x8
0077b812 : MOV ESI,dword ptr [0x00da98e8]
0077b818 : PUSH 0xc104c8
0077b81d : CALL 0x008018d0
0077b822 : ADD ESP,0x4
0077b825 : POP EDI
0077b826 : POP ESI
0077b827 : XOR AL,AL
0077b829 : POP EBX
0077b82a : MOV ESP,EBP
0077b82c : POP EBP
0077b82d : RET 0x8
