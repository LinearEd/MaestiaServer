PROGRAM  : Maestia.exe
FUNCTION : FUN_0054c4c0
ENTRY    : 0054c4c0
BODY     : [[0054c4c0, 0054c591]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054c4c0(uint param_1,uint param_2,char param_3)

{
  GRefCountNTSImpl *this;
  undefined2 *puVar1;
  int in_ECX;
  uint uVar2;
  undefined2 *local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  if ((*(int *)(in_ECX + 0xc) != 0) && ((*(byte *)(*(int *)(in_ECX + 8) + 0x141) & 0x10) == 0)) {
    uVar2 = param_2;
    if (param_2 < param_1) {
      uVar2 = param_1;
      param_1 = param_2;
    }
    local_10 = (undefined2 *)0x0;
    local_c = 0;
    local_8 = 0;
    local_4 = 0;
    FUN_0053d0e0(&local_10,param_1,uVar2);
    if (param_3 == '\0') {
      puVar1 = local_10;
      if (local_10 == (undefined2 *)0x0) {
        puVar1 = &DAT_00cca49c;
      }
      FUN_005003a0(puVar1,local_c);
    }
    else {
      this = (GRefCountNTSImpl *)FUN_00544000(param_1,uVar2);
      puVar1 = local_10;
      if (local_10 == (undefined2 *)0x0) {
        puVar1 = &DAT_00cca49c;
      }
      FUN_00508480(puVar1,local_c,this);
      if (this != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(this);
        FUN_004ff940();
        return;
      }
    }
    FUN_004ff940();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0054c4c0 : SUB ESP,0x10
0054c4c3 : PUSH EBX
0054c4c4 : PUSH EBP
0054c4c5 : MOV EBP,ECX
0054c4c7 : XOR EBX,EBX
0054c4c9 : CMP dword ptr [EBP + 0xc],EBX
0054c4cc : JZ 0x0054c58a
0054c4d2 : MOV ECX,dword ptr [EBP + 0x8]
0054c4d5 : TEST byte ptr [ECX + 0x141],0x10
0054c4dc : JNZ 0x0054c58a
0054c4e2 : PUSH ESI
0054c4e3 : MOV ESI,dword ptr [ESP + 0x24]
0054c4e7 : PUSH EDI
0054c4e8 : MOV EDI,dword ptr [ESP + 0x24]
0054c4ec : CMP ESI,EDI
0054c4ee : JNC 0x0054c4f6
0054c4f0 : MOV EAX,ESI
0054c4f2 : MOV ESI,EDI
0054c4f4 : MOV EDI,EAX
0054c4f6 : PUSH ESI
0054c4f7 : PUSH EDI
0054c4f8 : LEA EAX,[ESP + 0x18]
0054c4fc : MOV dword ptr [ESP + 0x18],EBX
0054c500 : MOV dword ptr [ESP + 0x1c],EBX
0054c504 : MOV dword ptr [ESP + 0x20],EBX
0054c508 : MOV dword ptr [ESP + 0x24],EBX
0054c50c : MOV ECX,dword ptr [ECX + 0xc]
0054c50f : PUSH EAX
0054c510 : CALL 0x0053d0e0
0054c515 : CMP byte ptr [ESP + 0x2c],BL
0054c519 : JZ 0x0054c564
0054c51b : MOV ECX,dword ptr [EBP + 0x8]
0054c51e : MOV ECX,dword ptr [ECX + 0xc]
0054c521 : PUSH ESI
0054c522 : PUSH EDI
0054c523 : CALL 0x00544000
0054c528 : MOV ESI,EAX
0054c52a : MOV EAX,dword ptr [ESP + 0x10]
0054c52e : CMP EAX,EBX
0054c530 : JNZ 0x0054c537
0054c532 : MOV EAX,0xcca49c
0054c537 : MOV EDX,dword ptr [ESP + 0x14]
0054c53b : MOV ECX,dword ptr [EBP + 0xc]
0054c53e : PUSH ESI
0054c53f : PUSH EDX
0054c540 : PUSH EAX
0054c541 : CALL 0x00508480
0054c546 : CMP ESI,EBX
0054c548 : JZ 0x0054c57f
0054c54a : MOV ECX,ESI
0054c54c : CALL 0x004ff7c0
0054c551 : LEA ECX,[ESP + 0x10]
0054c555 : CALL 0x004ff940
0054c55a : POP EDI
0054c55b : POP ESI
0054c55c : POP EBP
0054c55d : POP EBX
0054c55e : ADD ESP,0x10
0054c561 : RET 0xc
0054c564 : MOV EAX,dword ptr [ESP + 0x10]
0054c568 : CMP EAX,EBX
0054c56a : JNZ 0x0054c571
0054c56c : MOV EAX,0xcca49c
0054c571 : MOV ECX,dword ptr [ESP + 0x14]
0054c575 : PUSH ECX
0054c576 : MOV ECX,dword ptr [EBP + 0xc]
0054c579 : PUSH EAX
0054c57a : CALL 0x005003a0
0054c57f : LEA ECX,[ESP + 0x10]
0054c583 : CALL 0x004ff940
0054c588 : POP EDI
0054c589 : POP ESI
0054c58a : POP EBP
0054c58b : POP EBX
0054c58c : ADD ESP,0x10
0054c58f : RET 0xc
