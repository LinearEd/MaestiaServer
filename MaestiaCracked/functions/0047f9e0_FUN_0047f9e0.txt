PROGRAM  : Maestia.exe
FUNCTION : FUN_0047f9e0
ENTRY    : 0047f9e0
BODY     : [[0047f9e0, 0047faf3]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0047f9e0(int param_1)

{
  char cVar1;
  uint uVar2;
  char *pcVar3;
  int iVar4;
  undefined4 uVar5;
  char *in_ECX;
  int *unaff_EDI;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b70b50;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (int *)*unaff_EDI;
  if (local_14 != (int *)0x0) {
    return 1;
  }
  local_8 = 1;
  pcVar3 = in_ECX;
  do {
    cVar1 = *pcVar3;
    pcVar3 = pcVar3 + 1;
  } while (cVar1 != '\0');
  ExceptionList = &local_10;
  iVar4 = D3DXAssembleShader(in_ECX,(int)pcVar3 - (int)(in_ECX + 1),0,0,1,&local_14,0);
  if (-1 < iVar4) {
    if (local_14 != (int *)0x0) {
      iVar4 = **(int **)(param_1 + 0xf0);
      uVar5 = (**(code **)(*local_14 + 0xc))(local_14);
      iVar4 = (**(code **)(iVar4 + 0x16c))(*(undefined4 *)(param_1 + 0xf0),uVar5);
      if (iVar4 == 0) {
        local_8 = 0xffffffff;
        if (local_14 == (int *)0x0) {
          ExceptionList = local_10;
          return 1;
        }
        (**(code **)(*local_14 + 8))(local_14);
        ExceptionList = local_10;
        return 1;
      }
    }
    local_8 = 0xffffffff;
    if (local_14 != (int *)0x0) {
      (**(code **)(*local_14 + 8))(local_14,uVar2);
    }
    ExceptionList = local_10;
    return 0;
  }
  local_8 = 0xffffffff;
  if (local_14 != (int *)0x0) {
    (**(code **)(*local_14 + 8))(local_14);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0047f9e0 : PUSH EBP
0047f9e1 : MOV EBP,ESP
0047f9e3 : PUSH -0x1
0047f9e5 : PUSH 0xb70b50
0047f9ea : MOV EAX,FS:[0x0]
0047f9f0 : PUSH EAX
0047f9f1 : SUB ESP,0x8
0047f9f4 : PUSH ESI
0047f9f5 : MOV EAX,[0x00d66fa0]
0047f9fa : XOR EAX,EBP
0047f9fc : PUSH EAX
0047f9fd : LEA EAX,[EBP + -0xc]
0047fa00 : MOV FS:[0x0],EAX
0047fa06 : MOV ESI,ECX
0047fa08 : MOV EAX,dword ptr [EDI]
0047fa0a : TEST EAX,EAX
0047fa0c : JNZ 0x0047fab6
0047fa12 : MOV dword ptr [EBP + -0x10],EAX
0047fa15 : MOV dword ptr [EBP + -0x4],EAX
0047fa18 : MOV dword ptr [EBP + -0x14],EAX
0047fa1b : MOV byte ptr [EBP + -0x4],0x1
0047fa1f : MOV EAX,ESI
0047fa21 : LEA EDX,[EAX + 0x1]
0047fa24 : MOV CL,byte ptr [EAX]
0047fa26 : INC EAX
0047fa27 : TEST CL,CL
0047fa29 : JNZ 0x0047fa24
0047fa2b : PUSH 0x0
0047fa2d : LEA ECX,[EBP + -0x10]
0047fa30 : PUSH ECX
0047fa31 : PUSH 0x1
0047fa33 : PUSH 0x0
0047fa35 : PUSH 0x0
0047fa37 : SUB EAX,EDX
0047fa39 : PUSH EAX
0047fa3a : PUSH ESI
0047fa3b : CALL 0x00664cf0
0047fa40 : TEST EAX,EAX
0047fa42 : JGE 0x0047fa6e
0047fa44 : MOV dword ptr [EBP + -0x4],0xffffffff
0047fa4b : MOV EAX,dword ptr [EBP + -0x10]
0047fa4e : TEST EAX,EAX
0047fa50 : JZ 0x0047fa5a
0047fa52 : MOV EDX,dword ptr [EAX]
0047fa54 : PUSH EAX
0047fa55 : MOV EAX,dword ptr [EDX + 0x8]
0047fa58 : CALL EAX
0047fa5a : XOR AL,AL
0047fa5c : MOV ECX,dword ptr [EBP + -0xc]
0047fa5f : MOV dword ptr FS:[0x0],ECX
0047fa66 : POP ECX
0047fa67 : POP ESI
0047fa68 : MOV ESP,EBP
0047fa6a : POP EBP
0047fa6b : RET 0x4
0047fa6e : MOV EAX,dword ptr [EBP + -0x10]
0047fa71 : TEST EAX,EAX
0047fa73 : JZ 0x0047faca
0047fa75 : MOV ECX,dword ptr [EBP + 0x8]
0047fa78 : MOV EDX,dword ptr [ECX + 0xf0]
0047fa7e : MOV ECX,dword ptr [EAX]
0047fa80 : MOV ESI,dword ptr [EDX]
0047fa82 : MOV EDX,dword ptr [ECX + 0xc]
0047fa85 : PUSH EDI
0047fa86 : PUSH EAX
0047fa87 : CALL EDX
0047fa89 : MOV EDX,dword ptr [ESI + 0x16c]
0047fa8f : PUSH EAX
0047fa90 : MOV EAX,dword ptr [EBP + 0x8]
0047fa93 : MOV ECX,dword ptr [EAX + 0xf0]
0047fa99 : PUSH ECX
0047fa9a : CALL EDX
0047fa9c : TEST EAX,EAX
0047fa9e : JNZ 0x0047faca
0047faa0 : MOV dword ptr [EBP + -0x4],0xffffffff
0047faa7 : MOV EAX,dword ptr [EBP + -0x10]
0047faaa : TEST EAX,EAX
0047faac : JZ 0x0047fab6
0047faae : MOV ECX,dword ptr [EAX]
0047fab0 : MOV EDX,dword ptr [ECX + 0x8]
0047fab3 : PUSH EAX
0047fab4 : CALL EDX
0047fab6 : MOV AL,0x1
0047fab8 : MOV ECX,dword ptr [EBP + -0xc]
0047fabb : MOV dword ptr FS:[0x0],ECX
0047fac2 : POP ECX
0047fac3 : POP ESI
0047fac4 : MOV ESP,EBP
0047fac6 : POP EBP
0047fac7 : RET 0x4
0047faca : MOV dword ptr [EBP + -0x4],0xffffffff
0047fad1 : MOV EAX,dword ptr [EBP + -0x10]
0047fad4 : TEST EAX,EAX
0047fad6 : JZ 0x0047fae0
0047fad8 : MOV ECX,dword ptr [EAX]
0047fada : MOV EDX,dword ptr [ECX + 0x8]
0047fadd : PUSH EAX
0047fade : CALL EDX
0047fae0 : XOR AL,AL
0047fae2 : MOV ECX,dword ptr [EBP + -0xc]
0047fae5 : MOV dword ptr FS:[0x0],ECX
0047faec : POP ECX
0047faed : POP ESI
0047faee : MOV ESP,EBP
0047faf0 : POP EBP
0047faf1 : RET 0x4
