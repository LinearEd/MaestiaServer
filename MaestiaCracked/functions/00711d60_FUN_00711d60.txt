PROGRAM  : Maestia.exe
FUNCTION : FUN_00711d60
ENTRY    : 00711d60
BODY     : [[00711d60, 00711f80]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_00711d60(int param_1,uint param_2,int param_3,int param_4,int param_5,uint param_6,char *param_7
            ,int param_8)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int local_8;
  
  local_8 = 1;
  if (((param_7 == (char *)0x0) || (*param_7 != '1')) || (param_8 != 0x38)) {
    return 0xfffffffa;
  }
  if (param_1 == 0) {
    return 0xfffffffe;
  }
  *(undefined4 *)(param_1 + 0x18) = 0;
  if (*(int *)(param_1 + 0x20) == 0) {
    *(code **)(param_1 + 0x20) = FUN_0070e290;
    *(undefined4 *)(param_1 + 0x28) = 0;
  }
  if (*(int *)(param_1 + 0x24) == 0) {
    *(code **)(param_1 + 0x24) = FUN_0070e270;
  }
  if (param_2 == 0xffffffff) {
    param_2 = 6;
  }
  if (param_4 < 0) {
    local_8 = 0;
    param_4 = -param_4;
  }
  else if (0xf < param_4) {
    local_8 = 2;
    param_4 = param_4 + -0x10;
  }
  if (((param_5 - 1U < 9) && (param_3 == 8)) &&
     ((param_4 - 8U < 8 && ((param_2 < 10 && (param_6 < 4)))))) {
    if (param_4 == 8) {
      param_4 = 9;
    }
    piVar2 = (int *)(**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),1,0x16b8);
    if (piVar2 != (int *)0x0) {
      *(int **)(param_1 + 0x1c) = piVar2;
      piVar2[6] = local_8;
      piVar2[10] = param_4;
      iVar5 = 1 << ((byte)param_4 & 0x1f);
      iVar3 = 1 << ((byte)(param_5 + 7) & 0x1f);
      piVar2[0x12] = param_5 + 7;
      piVar2[0xb] = iVar5 + -1;
      piVar2[0x11] = iVar3;
      piVar2[0x13] = iVar3 + -1;
      *piVar2 = param_1;
      piVar2[9] = iVar5;
      piVar2[0x14] = (param_5 + 9U) / 3;
      iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),iVar5,2);
      piVar2[0xc] = iVar3;
      iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),piVar2[9],2);
      piVar2[0xe] = iVar3;
      iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),piVar2[0x11],2);
      piVar2[0xf] = iVar3;
      iVar3 = 1 << ((char)param_5 + 6U & 0x1f);
      piVar2[0x5a5] = iVar3;
      iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),iVar3,4);
      uVar1 = piVar2[0x5a5];
      piVar2[2] = iVar3;
      piVar2[3] = uVar1 * 4;
      if ((((piVar2[0xc] != 0) && (piVar2[0xe] != 0)) && (piVar2[0xf] != 0)) && (iVar3 != 0)) {
        piVar2[0x5a7] = iVar3 + (uVar1 & 0xfffffffe);
        piVar2[0x5a4] = iVar3 + uVar1 * 3;
        piVar2[0x1f] = param_2;
        piVar2[0x20] = param_6;
        *(undefined1 *)((int)piVar2 + 0x1d) = 8;
        uVar4 = FUN_00711ce0(param_1);
        return uVar4;
      }
      piVar2[1] = 0x29a;
      *(char **)(param_1 + 0x18) = s_insufficient_memory_00d6c9a8;
      FUN_00711730(param_1);
    }
    return 0xfffffffc;
  }
  return 0xfffffffe;
}



============================================================
DISASSEMBLY
============================================================
00711d60 : PUSH EBP
00711d61 : MOV EBP,ESP
00711d63 : PUSH ECX
00711d64 : MOV EAX,dword ptr [EBP + 0x20]
00711d67 : XOR ECX,ECX
00711d69 : MOV dword ptr [EBP + -0x4],0x1
00711d70 : CMP EAX,ECX
00711d72 : JZ 0x00711f78
00711d78 : CMP byte ptr [EAX],0x31
00711d7b : JNZ 0x00711f78
00711d81 : CMP dword ptr [EBP + 0x24],0x38
00711d85 : JNZ 0x00711f78
00711d8b : PUSH EDI
00711d8c : MOV EDI,dword ptr [EBP + 0x8]
00711d8f : CMP EDI,ECX
00711d91 : JNZ 0x00711d9b
00711d93 : LEA EAX,[ECX + -0x2]
00711d96 : POP EDI
00711d97 : MOV ESP,EBP
00711d99 : POP EBP
00711d9a : RET
00711d9b : MOV dword ptr [EDI + 0x18],ECX
00711d9e : CMP dword ptr [EDI + 0x20],ECX
00711da1 : JNZ 0x00711dad
00711da3 : MOV dword ptr [EDI + 0x20],0x70e290
00711daa : MOV dword ptr [EDI + 0x28],ECX
00711dad : CMP dword ptr [EDI + 0x24],ECX
00711db0 : JNZ 0x00711db9
00711db2 : MOV dword ptr [EDI + 0x24],0x70e270
00711db9 : CMP dword ptr [EBP + 0xc],-0x1
00711dbd : JNZ 0x00711dc6
00711dbf : MOV dword ptr [EBP + 0xc],0x6
00711dc6 : PUSH EBX
00711dc7 : MOV EBX,dword ptr [EBP + 0x14]
00711dca : CMP EBX,ECX
00711dcc : JGE 0x00711dd5
00711dce : MOV dword ptr [EBP + -0x4],ECX
00711dd1 : NEG EBX
00711dd3 : JMP 0x00711de4
00711dd5 : CMP EBX,0xf
00711dd8 : JLE 0x00711de7
00711dda : MOV dword ptr [EBP + -0x4],0x2
00711de1 : SUB EBX,0x10
00711de4 : MOV dword ptr [EBP + 0x14],EBX
00711de7 : MOV EAX,dword ptr [EBP + 0x18]
00711dea : DEC EAX
00711deb : CMP EAX,0x8
00711dee : JA 0x00711f6d
00711df4 : CMP dword ptr [EBP + 0x10],0x8
00711df8 : JNZ 0x00711f6d
00711dfe : LEA ECX,[EBX + -0x8]
00711e01 : CMP ECX,0x7
00711e04 : JA 0x00711f6d
00711e0a : MOV EAX,0x9
00711e0f : CMP dword ptr [EBP + 0xc],EAX
00711e12 : JA 0x00711f6d
00711e18 : CMP dword ptr [EBP + 0x1c],0x3
00711e1c : JA 0x00711f6d
00711e22 : CMP EBX,0x8
00711e25 : JNZ 0x00711e2c
00711e27 : MOV dword ptr [EBP + 0x14],EAX
00711e2a : MOV EBX,EAX
00711e2c : MOV EDX,dword ptr [EDI + 0x28]
00711e2f : MOV EAX,dword ptr [EDI + 0x20]
00711e32 : PUSH ESI
00711e33 : PUSH 0x16b8
00711e38 : PUSH 0x1
00711e3a : PUSH EDX
00711e3b : CALL EAX
00711e3d : MOV ESI,EAX
00711e3f : ADD ESP,0xc
00711e42 : TEST ESI,ESI
00711e44 : JZ 0x00711f61
00711e4a : MOV ECX,dword ptr [EBP + -0x4]
00711e4d : MOV dword ptr [EDI + 0x1c],ESI
00711e50 : MOV dword ptr [ESI + 0x18],ECX
00711e53 : MOV ECX,dword ptr [EBP + 0x14]
00711e56 : MOV dword ptr [ESI + 0x28],EBX
00711e59 : MOV EBX,0x1
00711e5e : SHL EBX,CL
00711e60 : MOV ECX,dword ptr [EBP + 0x18]
00711e63 : ADD ECX,0x7
00711e66 : MOV EAX,0x1
00711e6b : SHL EAX,CL
00711e6d : MOV dword ptr [ESI + 0x48],ECX
00711e70 : LEA EDX,[EBX + -0x1]
00711e73 : MOV dword ptr [ESI + 0x2c],EDX
00711e76 : MOV dword ptr [ESI + 0x44],EAX
00711e79 : DEC EAX
00711e7a : MOV dword ptr [ESI + 0x4c],EAX
00711e7d : ADD ECX,0x2
00711e80 : MOV EAX,0xaaaaaaab
00711e85 : MUL ECX
00711e87 : SHR EDX,0x1
00711e89 : MOV dword ptr [ESI],EDI
00711e8b : MOV dword ptr [ESI + 0x24],EBX
00711e8e : MOV dword ptr [ESI + 0x50],EDX
00711e91 : MOV EAX,dword ptr [EDI + 0x28]
00711e94 : MOV ECX,dword ptr [EDI + 0x20]
00711e97 : PUSH 0x2
00711e99 : PUSH EBX
00711e9a : PUSH EAX
00711e9b : CALL ECX
00711e9d : MOV EDX,dword ptr [ESI + 0x24]
00711ea0 : MOV dword ptr [ESI + 0x30],EAX
00711ea3 : MOV EAX,dword ptr [EDI + 0x28]
00711ea6 : MOV ECX,dword ptr [EDI + 0x20]
00711ea9 : PUSH 0x2
00711eab : PUSH EDX
00711eac : PUSH EAX
00711ead : CALL ECX
00711eaf : MOV EDX,dword ptr [ESI + 0x44]
00711eb2 : MOV dword ptr [ESI + 0x38],EAX
00711eb5 : MOV EAX,dword ptr [EDI + 0x28]
00711eb8 : MOV ECX,dword ptr [EDI + 0x20]
00711ebb : PUSH 0x2
00711ebd : PUSH EDX
00711ebe : PUSH EAX
00711ebf : CALL ECX
00711ec1 : MOV ECX,dword ptr [EBP + 0x18]
00711ec4 : MOV dword ptr [ESI + 0x3c],EAX
00711ec7 : ADD ECX,0x6
00711eca : MOV EAX,0x1
00711ecf : SHL EAX,CL
00711ed1 : PUSH 0x4
00711ed3 : MOV dword ptr [ESI + 0x1694],EAX
00711ed9 : MOV EDX,dword ptr [EDI + 0x28]
00711edc : PUSH EAX
00711edd : MOV EAX,dword ptr [EDI + 0x20]
00711ee0 : PUSH EDX
00711ee1 : CALL EAX
00711ee3 : MOV ECX,dword ptr [ESI + 0x1694]
00711ee9 : ADD ESP,0x30
00711eec : CMP dword ptr [ESI + 0x30],0x0
00711ef0 : LEA EDX,[ECX*0x4 + 0x0]
00711ef7 : MOV dword ptr [ESI + 0x8],EAX
00711efa : MOV dword ptr [ESI + 0xc],EDX
00711efd : JZ 0x00711f4a
00711eff : CMP dword ptr [ESI + 0x38],0x0
00711f03 : JZ 0x00711f4a
00711f05 : CMP dword ptr [ESI + 0x3c],0x0
00711f09 : JZ 0x00711f4a
00711f0b : TEST EAX,EAX
00711f0d : JZ 0x00711f4a
00711f0f : MOV EDX,ECX
00711f11 : SHR EDX,0x1
00711f13 : LEA EDX,[EAX + EDX*0x2]
00711f16 : LEA EAX,[EAX + ECX*0x2]
00711f19 : ADD EAX,ECX
00711f1b : MOV ECX,dword ptr [EBP + 0xc]
00711f1e : MOV dword ptr [ESI + 0x169c],EDX
00711f24 : MOV EDX,dword ptr [EBP + 0x1c]
00711f27 : PUSH EDI
00711f28 : MOV dword ptr [ESI + 0x1690],EAX
00711f2e : MOV dword ptr [ESI + 0x7c],ECX
00711f31 : MOV dword ptr [ESI + 0x80],EDX
00711f37 : MOV byte ptr [ESI + 0x1d],0x8
00711f3b : CALL 0x00711ce0
00711f40 : ADD ESP,0x4
00711f43 : POP ESI
00711f44 : POP EBX
00711f45 : POP EDI
00711f46 : MOV ESP,EBP
00711f48 : POP EBP
00711f49 : RET
00711f4a : MOV dword ptr [ESI + 0x4],0x29a
00711f51 : PUSH EDI
00711f52 : MOV dword ptr [EDI + 0x18],0xd6c9a8
00711f59 : CALL 0x00711730
00711f5e : ADD ESP,0x4
00711f61 : POP ESI
00711f62 : POP EBX
00711f63 : MOV EAX,0xfffffffc
00711f68 : POP EDI
00711f69 : MOV ESP,EBP
00711f6b : POP EBP
00711f6c : RET
00711f6d : POP EBX
00711f6e : MOV EAX,0xfffffffe
00711f73 : POP EDI
00711f74 : MOV ESP,EBP
00711f76 : POP EBP
00711f77 : RET
00711f78 : MOV EAX,0xfffffffa
00711f7d : MOV ESP,EBP
00711f7f : POP EBP
00711f80 : RET
