PROGRAM  : Maestia.exe
FUNCTION : FUN_006a8930
ENTRY    : 006a8930
BODY     : [[006a8930, 006a8b43]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a8930(int param_1,int param_2)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  
  iVar4 = param_1;
  iVar8 = *(int *)(param_1 + 4);
  iVar1 = *(int *)(iVar8 + 0x148);
  param_1 = 0;
  iVar9 = *(int *)(iVar8 + 0x120) + *(int *)(iVar8 + 0x124);
  uVar2 = *(undefined4 *)(iVar8 + 100);
  iVar3 = *(int *)(iVar8 + 0x88);
  param_1 = FUN_006877c0(iVar1,iVar9 * param_2 + *(int *)(iVar8 + 0x11c) + *(int *)(iVar8 + 0x134));
  if ((param_1 != 0) || (param_1 = FUN_00688900(iVar1,iVar9 * 2), param_1 != 0)) {
    return param_1;
  }
  param_2 = *(int *)(iVar1 + 0x20);
  uVar5 = FUN_006a79e0();
  iVar9 = FUN_006a79e0();
  param_2 = param_2 + *(int *)(iVar8 + 0x120);
  iVar6 = FUN_006a79e0();
  iVar6 = iVar6 - iVar9;
  FUN_006889b0(iVar1);
  if (*(uint *)(iVar8 + 300) <= uVar5) {
    return 9;
  }
  if (iVar6 != 0) {
    param_2 = FUN_00688c00(uVar2,iVar6,&param_1);
    if (param_1 != 0) {
      return param_1;
    }
    param_1 = FUN_00687840(iVar1,*(int *)(iVar8 + 0x134) + iVar9,param_2,iVar6);
    iVar1 = param_2;
    if (param_1 != 0) {
      return param_1;
    }
    iVar9 = *(int *)(iVar8 + 0x13c);
    *(undefined4 *)(iVar4 + 0x55c) = *(undefined4 *)(iVar9 + uVar5 * 8);
    *(undefined4 *)(iVar4 + 0x560) = *(undefined4 *)(iVar9 + uVar5 * 8 + 4);
    *(undefined4 *)(iVar4 + 0x564) = 0;
    iVar8 = uVar5 * 0xfc + *(int *)(iVar8 + 0x130);
    *(undefined4 *)(iVar4 + 0x568) = *(undefined4 *)(iVar8 + 0xd8);
    *(undefined4 *)(iVar4 + 0x56c) = *(undefined4 *)(iVar8 + 0xdc);
    *(undefined4 *)(iVar4 + 0x570) = *(undefined4 *)(iVar8 + 0xe0);
    *(undefined4 *)(iVar4 + 0x574) = *(undefined4 *)(iVar8 + 0xe4);
    *(undefined4 *)(iVar4 + 0x578) = *(undefined4 *)(iVar8 + 0xe8);
    *(undefined4 *)(iVar4 + 0x57c) = *(undefined4 *)(iVar8 + 0xec);
    uVar5 = *(uint *)(iVar8 + 4);
    *(uint *)(iVar4 + 0x558) = uVar5;
    uVar7 = ((int)uVar5 < 0) - 1 & uVar5;
    if (-1 < (int)uVar5) {
      (**(code **)(iVar3 + 0x10))(param_2,iVar6,0x10ea);
    }
    param_1 = (**(code **)(iVar4 + 0x5d4))(iVar4,uVar7 + iVar1,iVar6 - uVar7);
    FUN_00687f30(uVar2,iVar1);
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
006a8930 : SUB ESP,0x10
006a8933 : PUSH EBX
006a8934 : PUSH EBP
006a8935 : MOV EBP,dword ptr [ESP + 0x1c]
006a8939 : PUSH ESI
006a893a : PUSH EDI
006a893b : MOV EDI,dword ptr [EBP + 0x4]
006a893e : MOV EBX,dword ptr [EDI + 0x148]
006a8944 : MOV dword ptr [ESP + 0x24],0x0
006a894c : MOV ESI,dword ptr [EDI + 0x120]
006a8952 : ADD ESI,dword ptr [EDI + 0x124]
006a8958 : MOV EAX,dword ptr [EDI + 0x64]
006a895b : MOV ECX,dword ptr [EDI + 0x88]
006a8961 : MOV EDX,ESI
006a8963 : IMUL EDX,dword ptr [ESP + 0x28]
006a8968 : ADD EDX,dword ptr [EDI + 0x11c]
006a896e : MOV dword ptr [ESP + 0x14],EBX
006a8972 : ADD EDX,dword ptr [EDI + 0x134]
006a8978 : MOV dword ptr [ESP + 0x18],EAX
006a897c : PUSH EDX
006a897d : PUSH EBX
006a897e : MOV dword ptr [ESP + 0x24],ECX
006a8982 : CALL 0x006877c0
006a8987 : ADD ESP,0x8
006a898a : MOV dword ptr [ESP + 0x24],EAX
006a898e : TEST EAX,EAX
006a8990 : JNZ 0x006a8b3c
006a8996 : LEA EAX,[ESI + ESI*0x1]
006a8999 : PUSH EAX
006a899a : PUSH EBX
006a899b : CALL 0x00688900
006a89a0 : ADD ESP,0x8
006a89a3 : MOV dword ptr [ESP + 0x24],EAX
006a89a7 : TEST EAX,EAX
006a89a9 : JNZ 0x006a8b3c
006a89af : MOV ECX,dword ptr [EBX + 0x20]
006a89b2 : MOV DL,byte ptr [EDI + 0x120]
006a89b8 : LEA ESI,[ESP + 0x28]
006a89bc : MOV dword ptr [ESP + 0x28],ECX
006a89c0 : CALL 0x006a79e0
006a89c5 : MOV DL,byte ptr [EDI + 0x124]
006a89cb : MOV EBX,EAX
006a89cd : CALL 0x006a79e0
006a89d2 : MOV EDX,dword ptr [EDI + 0x120]
006a89d8 : ADD dword ptr [ESP + 0x28],EDX
006a89dc : MOV DL,byte ptr [EDI + 0x124]
006a89e2 : MOV dword ptr [ESP + 0x10],EAX
006a89e6 : CALL 0x006a79e0
006a89eb : MOV ESI,EAX
006a89ed : MOV EAX,dword ptr [ESP + 0x14]
006a89f1 : SUB ESI,dword ptr [ESP + 0x10]
006a89f5 : PUSH EAX
006a89f6 : CALL 0x006889b0
006a89fb : ADD ESP,0x4
006a89fe : CMP EBX,dword ptr [EDI + 0x12c]
006a8a04 : JC 0x006a8a13
006a8a06 : POP EDI
006a8a07 : POP ESI
006a8a08 : POP EBP
006a8a09 : MOV EAX,0x9
006a8a0e : POP EBX
006a8a0f : ADD ESP,0x10
006a8a12 : RET
006a8a13 : TEST ESI,ESI
006a8a15 : JZ 0x006a8b2e
006a8a1b : MOV EDX,dword ptr [ESP + 0x18]
006a8a1f : LEA ECX,[ESP + 0x24]
006a8a23 : PUSH ECX
006a8a24 : PUSH ESI
006a8a25 : PUSH EDX
006a8a26 : CALL 0x00688c00
006a8a2b : MOV ECX,dword ptr [ESP + 0x30]
006a8a2f : ADD ESP,0xc
006a8a32 : MOV dword ptr [ESP + 0x28],EAX
006a8a36 : TEST ECX,ECX
006a8a38 : JNZ 0x006a8b3a
006a8a3e : MOV ECX,dword ptr [ESP + 0x14]
006a8a42 : PUSH ESI
006a8a43 : PUSH EAX
006a8a44 : MOV EAX,dword ptr [EDI + 0x134]
006a8a4a : ADD EAX,dword ptr [ESP + 0x18]
006a8a4e : PUSH EAX
006a8a4f : PUSH ECX
006a8a50 : CALL 0x00687840
006a8a55 : ADD ESP,0x10
006a8a58 : MOV dword ptr [ESP + 0x24],EAX
006a8a5c : TEST EAX,EAX
006a8a5e : JNZ 0x006a8b3c
006a8a64 : MOV EDX,dword ptr [EDI + 0x13c]
006a8a6a : MOV ECX,dword ptr [EDX + EBX*0x8]
006a8a6d : LEA EAX,[EDX + EBX*0x8]
006a8a70 : IMUL EBX,EBX,0xfc
006a8a76 : MOV dword ptr [EBP + 0x55c],ECX
006a8a7c : MOV EDX,dword ptr [EAX + 0x4]
006a8a7f : MOV dword ptr [EBP + 0x560],EDX
006a8a85 : MOV dword ptr [EBP + 0x564],0x0
006a8a8f : ADD EBX,dword ptr [EDI + 0x130]
006a8a95 : MOV EAX,dword ptr [EBX + 0xd8]
006a8a9b : MOV dword ptr [EBP + 0x568],EAX
006a8aa1 : MOV ECX,dword ptr [EBX + 0xdc]
006a8aa7 : MOV dword ptr [EBP + 0x56c],ECX
006a8aad : MOV EDX,dword ptr [EBX + 0xe0]
006a8ab3 : MOV dword ptr [EBP + 0x570],EDX
006a8ab9 : MOV EAX,dword ptr [EBX + 0xe4]
006a8abf : MOV dword ptr [EBP + 0x574],EAX
006a8ac5 : MOV ECX,dword ptr [EBX + 0xe8]
006a8acb : MOV dword ptr [EBP + 0x578],ECX
006a8ad1 : MOV EDX,dword ptr [EBX + 0xec]
006a8ad7 : XOR EAX,EAX
006a8ad9 : MOV dword ptr [EBP + 0x57c],EDX
006a8adf : MOV EBX,dword ptr [EBX + 0x4]
006a8ae2 : TEST EBX,EBX
006a8ae4 : SETL AL
006a8ae7 : MOV dword ptr [EBP + 0x558],EBX
006a8aed : DEC EAX
006a8aee : AND EAX,EBX
006a8af0 : TEST EBX,EBX
006a8af2 : MOV EBX,dword ptr [ESP + 0x28]
006a8af6 : MOV EDI,EAX
006a8af8 : JL 0x006a8b0d
006a8afa : MOV ECX,dword ptr [ESP + 0x1c]
006a8afe : MOV EDX,dword ptr [ECX + 0x10]
006a8b01 : PUSH 0x10ea
006a8b06 : PUSH ESI
006a8b07 : PUSH EBX
006a8b08 : CALL EDX
006a8b0a : ADD ESP,0xc
006a8b0d : MOV EAX,dword ptr [EBP + 0x5d4]
006a8b13 : SUB ESI,EDI
006a8b15 : PUSH ESI
006a8b16 : ADD EDI,EBX
006a8b18 : PUSH EDI
006a8b19 : PUSH EBP
006a8b1a : CALL EAX
006a8b1c : MOV ECX,dword ptr [ESP + 0x24]
006a8b20 : PUSH EBX
006a8b21 : PUSH ECX
006a8b22 : MOV dword ptr [ESP + 0x38],EAX
006a8b26 : CALL 0x00687f30
006a8b2b : ADD ESP,0x14
006a8b2e : MOV EAX,dword ptr [ESP + 0x24]
006a8b32 : POP EDI
006a8b33 : POP ESI
006a8b34 : POP EBP
006a8b35 : POP EBX
006a8b36 : ADD ESP,0x10
006a8b39 : RET
006a8b3a : MOV EAX,ECX
006a8b3c : POP EDI
006a8b3d : POP ESI
006a8b3e : POP EBP
006a8b3f : POP EBX
006a8b40 : ADD ESP,0x10
006a8b43 : RET
