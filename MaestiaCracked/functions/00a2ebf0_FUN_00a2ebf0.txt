PROGRAM  : Maestia.exe
FUNCTION : FUN_00a2ebf0
ENTRY    : 00a2ebf0
BODY     : [[00a2ebf0, 00a2edbc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a2ebf0(undefined4 param_1,char param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  undefined4 uVar5;
  int in_ECX;
  undefined1 local_44 [28];
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4727b;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar4 = (int *)FUN_00a1a840(param_1);
  if (((piVar4 == (int *)0x0) && (piVar4 = (int *)FUN_00a1a6d0(param_1), piVar4 == (int *)0x0)) &&
     (piVar4 = (int *)FUN_00a1a780(param_1), piVar4 == (int *)0x0)) {
    ExceptionList = local_10;
    return;
  }
  (**(code **)(*piVar4 + 0x354))(uVar3);
  if (piVar4 == *(int **)(in_ECX + 0xac)) {
    if ((char)(*(int **)(in_ECX + 0xac))[0x7db] != '\0') {
      iVar1 = *(int *)(in_ECX + 0xac);
      iVar2 = *(int *)(iVar1 + 1000);
      local_28 = *(undefined4 *)(iVar2 + 0x68);
      local_24 = *(undefined4 *)(iVar2 + 0x6c);
      local_20 = *(undefined4 *)(iVar2 + 0x70);
      local_1c = *(undefined4 *)(iVar1 + 0x1f70);
      local_18 = *(undefined4 *)(iVar1 + 0x1f74);
      local_14 = *(undefined4 *)(iVar1 + 0x1f78);
      FUN_00406460(L"IDS_CANCELED_SKILL");
      local_8 = 0;
      piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar5 = FUN_0081d120(local_44);
      local_8._0_1_ = 1;
      (**(code **)(*piVar4 + 0x44))(uVar5,3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      FUN_00a2db00(in_ECX,&local_1c,0,0);
      *(undefined1 *)(*(int *)(in_ECX + 0xac) + 0x1f6c) = 0;
    }
    if (param_2 != '\x01') {
      piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar5 = FUN_00404750(L"IDS_CANCELED_SKILL_%d",param_2);
      local_8 = 2;
      uVar5 = FUN_0081d120(uVar5);
      local_8._0_1_ = 3;
      (**(code **)(*piVar4 + 0x44))(uVar5,3);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a2ebf0 : PUSH EBP
00a2ebf1 : MOV EBP,ESP
00a2ebf3 : PUSH -0x1
00a2ebf5 : PUSH 0xb4727b
00a2ebfa : MOV EAX,FS:[0x0]
00a2ec00 : PUSH EAX
00a2ec01 : SUB ESP,0x50
00a2ec04 : PUSH EBX
00a2ec05 : PUSH ESI
00a2ec06 : PUSH EDI
00a2ec07 : MOV EAX,[0x00d66fa0]
00a2ec0c : XOR EAX,EBP
00a2ec0e : PUSH EAX
00a2ec0f : LEA EAX,[EBP + -0xc]
00a2ec12 : MOV FS:[0x0],EAX
00a2ec18 : MOV EBX,dword ptr [EBP + 0x8]
00a2ec1b : MOV ESI,ECX
00a2ec1d : PUSH EBX
00a2ec1e : CALL 0x00a1a840
00a2ec23 : MOV EDI,EAX
00a2ec25 : TEST EDI,EDI
00a2ec27 : JNZ 0x00a2ec49
00a2ec29 : PUSH EBX
00a2ec2a : MOV ECX,ESI
00a2ec2c : CALL 0x00a1a6d0
00a2ec31 : MOV EDI,EAX
00a2ec33 : TEST EDI,EDI
00a2ec35 : JNZ 0x00a2ec49
00a2ec37 : PUSH EBX
00a2ec38 : MOV ECX,ESI
00a2ec3a : CALL 0x00a1a780
00a2ec3f : MOV EDI,EAX
00a2ec41 : TEST EDI,EDI
00a2ec43 : JZ 0x00a2eda9
00a2ec49 : MOV EAX,dword ptr [EDI]
00a2ec4b : MOV EDX,dword ptr [EAX + 0x354]
00a2ec51 : MOV ECX,EDI
00a2ec53 : CALL EDX
00a2ec55 : MOV EAX,dword ptr [ESI + 0xac]
00a2ec5b : CMP EDI,EAX
00a2ec5d : JNZ 0x00a2eda9
00a2ec63 : MOV AL,byte ptr [EAX + 0x1f6c]
00a2ec69 : TEST AL,AL
00a2ec6b : JZ 0x00a2ed40
00a2ec71 : MOV ECX,dword ptr [ESI + 0xac]
00a2ec77 : MOV EAX,dword ptr [ECX + 0x3e8]
00a2ec7d : MOVSS XMM0,dword ptr [EAX + 0x68]
00a2ec82 : MOVSS XMM1,dword ptr [EAX + 0x6c]
00a2ec87 : MOVSS XMM2,dword ptr [EAX + 0x70]
00a2ec8c : ADD EAX,0x68
00a2ec8f : MOVSS dword ptr [EBP + -0x24],XMM0
00a2ec94 : MOVSS XMM0,dword ptr [ECX + 0x1f70]
00a2ec9c : MOVSS dword ptr [EBP + -0x20],XMM1
00a2eca1 : MOVSS XMM1,dword ptr [ECX + 0x1f74]
00a2eca9 : MOVSS dword ptr [EBP + -0x1c],XMM2
00a2ecae : MOVSS XMM2,dword ptr [ECX + 0x1f78]
00a2ecb6 : PUSH 0xcc3650
00a2ecbb : LEA ECX,[EBP + -0x40]
00a2ecbe : MOVSS dword ptr [EBP + -0x18],XMM0
00a2ecc3 : MOVSS dword ptr [EBP + -0x14],XMM1
00a2ecc8 : MOVSS dword ptr [EBP + -0x10],XMM2
00a2eccd : CALL 0x00406460
00a2ecd2 : MOV dword ptr [EBP + -0x4],0x0
00a2ecd9 : MOV EAX,[0x00da9894]
00a2ecde : MOV EAX,dword ptr [EAX]
00a2ece0 : MOV EBX,dword ptr [EAX + 0x1a8]
00a2ece6 : LEA ECX,[EBP + -0x40]
00a2ece9 : PUSH ECX
00a2ecea : MOV ECX,dword ptr [0x0172491c]
00a2ecf0 : LEA EDI,[EBP + -0x5c]
00a2ecf3 : CALL 0x0081d120
00a2ecf8 : MOV byte ptr [EBP + -0x4],0x1
00a2ecfc : MOV EDX,dword ptr [EBX]
00a2ecfe : PUSH 0x3
00a2ed00 : PUSH EAX
00a2ed01 : MOV EAX,dword ptr [EDX + 0x44]
00a2ed04 : MOV ECX,EBX
00a2ed06 : CALL EAX
00a2ed08 : MOV byte ptr [EBP + -0x4],0x0
00a2ed0c : MOV ECX,EDI
00a2ed0e : CALL 0x00406560
00a2ed13 : MOV dword ptr [EBP + -0x4],0xffffffff
00a2ed1a : LEA ECX,[EBP + -0x40]
00a2ed1d : CALL 0x00406560
00a2ed22 : PUSH 0x0
00a2ed24 : PUSH 0x0
00a2ed26 : LEA ECX,[EBP + -0x18]
00a2ed29 : PUSH ECX
00a2ed2a : PUSH ESI
00a2ed2b : LEA EAX,[EBP + -0x24]
00a2ed2e : CALL 0x00a2db00
00a2ed33 : MOV ESI,dword ptr [ESI + 0xac]
00a2ed39 : MOV byte ptr [ESI + 0x1f6c],0x0
00a2ed40 : MOV CL,byte ptr [EBP + 0xc]
00a2ed43 : CMP CL,0x1
00a2ed46 : JZ 0x00a2eda9
00a2ed48 : MOV EDX,dword ptr [0x00da9894]
00a2ed4e : MOV EAX,dword ptr [EDX]
00a2ed50 : MOV EBX,dword ptr [EAX + 0x1a8]
00a2ed56 : MOVZX EAX,CL
00a2ed59 : PUSH EAX
00a2ed5a : PUSH 0xcc35dc
00a2ed5f : LEA ESI,[EBP + -0x40]
00a2ed62 : CALL 0x00404750
00a2ed67 : ADD ESP,0x8
00a2ed6a : MOV dword ptr [EBP + -0x4],0x2
00a2ed71 : MOV ECX,dword ptr [0x0172491c]
00a2ed77 : PUSH EAX
00a2ed78 : LEA EDI,[EBP + -0x5c]
00a2ed7b : CALL 0x0081d120
00a2ed80 : MOV byte ptr [EBP + -0x4],0x3
00a2ed84 : MOV EDX,dword ptr [EBX]
00a2ed86 : PUSH 0x3
00a2ed88 : PUSH EAX
00a2ed89 : MOV EAX,dword ptr [EDX + 0x44]
00a2ed8c : MOV ECX,EBX
00a2ed8e : CALL EAX
00a2ed90 : MOV byte ptr [EBP + -0x4],0x2
00a2ed94 : MOV ECX,EDI
00a2ed96 : CALL 0x00406560
00a2ed9b : MOV dword ptr [EBP + -0x4],0xffffffff
00a2eda2 : MOV ECX,ESI
00a2eda4 : CALL 0x00406560
00a2eda9 : MOV ECX,dword ptr [EBP + -0xc]
00a2edac : MOV dword ptr FS:[0x0],ECX
00a2edb3 : POP ECX
00a2edb4 : POP EDI
00a2edb5 : POP ESI
00a2edb6 : POP EBX
00a2edb7 : MOV ESP,EBP
00a2edb9 : POP EBP
00a2edba : RET 0x8
