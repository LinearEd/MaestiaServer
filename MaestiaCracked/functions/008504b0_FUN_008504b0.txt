PROGRAM  : Maestia.exe
FUNCTION : FUN_008504b0
ENTRY    : 008504b0
BODY     : [[008504b0, 0085059a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008504b0(void)

{
  int *piVar1;
  int iVar2;
  char cVar3;
  short sVar4;
  int *in_ECX;
  code *pcVar5;
  bool bVar6;
  
  iVar2 = in_ECX[0xfa];
  *(undefined1 *)(in_ECX + 0x67c) = 0;
  if (iVar2 != 0) {
    *(undefined4 *)(iVar2 + 0xf0) = 0;
    *(undefined1 *)(iVar2 + 0x5d) = 1;
    *(undefined1 *)(iVar2 + 0x134) = 1;
    *(undefined1 *)(iVar2 + 0x5c) = 1;
    if (*(int **)(iVar2 + 0x2c) != (int *)0x0) {
      (**(code **)(**(int **)(iVar2 + 0x2c) + 0x60))(iVar2);
    }
  }
  pcVar5 = *(code **)(*in_ECX + 0x488);
  *(undefined1 *)((int)in_ECX + 0x19f1) = 0;
  (*pcVar5)(0);
  iVar2 = *(int *)(in_ECX[0x4e] + 4);
  piVar1 = in_ECX + 0x1b6;
  sVar4 = FUN_0043d970();
  if (sVar4 == 1000) {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x13c) == piVar1;
  }
  else if (sVar4 == 2000) {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x140) == piVar1;
  }
  else {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x144) == piVar1;
  }
  if (bVar6) {
    pcVar5 = *(code **)(*in_ECX + 0x188);
    if ((char)in_ECX[0x132] != '\0') {
      cVar3 = (*pcVar5)(0x16,1,0,0,0,0x3f800000);
      if (cVar3 != '\0') {
        return;
      }
      pcVar5 = *(code **)(*in_ECX + 0x188);
    }
    (*pcVar5)(0x14,1,0,0,0,0x3f800000);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008504b0 : PUSH ESI
008504b1 : MOV ESI,ECX
008504b3 : MOV EAX,dword ptr [ESI + 0x3e8]
008504b9 : MOV byte ptr [ESI + 0x19f0],0x0
008504c0 : TEST EAX,EAX
008504c2 : JZ 0x008504ed
008504c4 : MOV ECX,dword ptr [EAX + 0x2c]
008504c7 : XORPS XMM0,XMM0
008504ca : MOVSS dword ptr [EAX + 0xf0],XMM0
008504d2 : MOV byte ptr [EAX + 0x5d],0x1
008504d6 : MOV byte ptr [EAX + 0x134],0x1
008504dd : MOV byte ptr [EAX + 0x5c],0x1
008504e1 : TEST ECX,ECX
008504e3 : JZ 0x008504ed
008504e5 : MOV EDX,dword ptr [ECX]
008504e7 : PUSH EAX
008504e8 : MOV EAX,dword ptr [EDX + 0x60]
008504eb : CALL EAX
008504ed : MOV EDX,dword ptr [ESI]
008504ef : FLDZ
008504f1 : MOV EAX,dword ptr [EDX + 0x488]
008504f7 : PUSH EBX
008504f8 : PUSH EDI
008504f9 : PUSH ECX
008504fa : MOV ECX,ESI
008504fc : FSTP float ptr [ESP]
008504ff : MOV byte ptr [ESI + 0x19f1],0x0
00850506 : CALL EAX
00850508 : MOV ECX,dword ptr [ESI + 0x138]
0085050e : MOV EDX,dword ptr [ECX + 0x4]
00850511 : MOV AX,word ptr [ESI + 0x702]
00850518 : LEA EDI,[ESI + 0x6d8]
0085051e : LEA EBX,[EDX + ESI*0x1 + 0x138]
00850525 : CALL 0x0043d970
0085052a : MOV ECX,0x3e8
0085052f : CMP AX,CX
00850532 : JNZ 0x00850539
00850534 : CMP dword ptr [EBX + 0x4],EDI
00850537 : JMP 0x0085054b
00850539 : MOV EDX,0x7d0
0085053e : CMP AX,DX
00850541 : JNZ 0x00850548
00850543 : CMP dword ptr [EBX + 0x8],EDI
00850546 : JMP 0x0085054b
00850548 : CMP dword ptr [EBX + 0xc],EDI
0085054b : SETZ AL
0085054e : POP EDI
0085054f : POP EBX
00850550 : TEST AL,AL
00850552 : JZ 0x00850599
00850554 : CMP byte ptr [ESI + 0x4c8],0x0
0085055b : FLD1
0085055d : MOV EAX,dword ptr [ESI]
0085055f : MOV EDX,dword ptr [EAX + 0x188]
00850565 : PUSH ECX
00850566 : FSTP float ptr [ESP]
00850569 : PUSH 0x0
0085056b : PUSH 0x0
0085056d : PUSH 0x0
0085056f : MOV ECX,ESI
00850571 : PUSH 0x1
00850573 : JZ 0x00850595
00850575 : PUSH 0x16
00850577 : CALL EDX
00850579 : TEST AL,AL
0085057b : JNZ 0x00850599
0085057d : FLD1
0085057f : MOV EAX,dword ptr [ESI]
00850581 : MOV EDX,dword ptr [EAX + 0x188]
00850587 : PUSH ECX
00850588 : FSTP float ptr [ESP]
0085058b : PUSH 0x0
0085058d : PUSH 0x0
0085058f : PUSH 0x0
00850591 : PUSH 0x1
00850593 : MOV ECX,ESI
00850595 : PUSH 0x14
00850597 : CALL EDX
00850599 : POP ESI
0085059a : RET
