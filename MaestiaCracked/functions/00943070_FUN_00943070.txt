PROGRAM  : Maestia.exe
FUNCTION : FUN_00943070
ENTRY    : 00943070
BODY     : [[00943070, 009431ca]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00943070(int *param_1,ushort param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  undefined1 local_4c [32];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4cb42;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = *(undefined4 *)(*(int *)(*DAT_00da9894 + 0x194) + 0x3c + (uint)param_2 * 4);
  FUN_00404750(&DAT_00c72084,(uint)param_2,uVar1,local_14);
  local_8 = 0;
  iVar2 = FUN_009f2a00(uVar1);
  iVar3 = (**(code **)(*param_1 + 0x74))(param_3,param_4);
  if ((iVar3 == 0) && (iVar2 != 0)) {
    piVar4 = (int *)FUN_00b04230(uVar1);
    if (piVar4 == (int *)0x0) {
      FUN_00406460(L"Alloc failed");
      local_8._0_1_ = 1;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaGuiPocket::SwapGambleBoxToPocket",0x42a,local_4c);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      goto LAB_009431ad;
    }
    (**(code **)(*piVar4 + 0x1c))(iVar2);
    FUN_009f3690(DAT_017247f0);
    FUN_00941640(param_1,param_3,param_4,0,0);
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_2c = 0;
  local_1c = 0;
  local_18 = 7;
LAB_009431ad:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00943070 : PUSH EBP
00943071 : MOV EBP,ESP
00943073 : PUSH -0x1
00943075 : PUSH 0xb4cb42
0094307a : MOV EAX,FS:[0x0]
00943080 : PUSH EAX
00943081 : SUB ESP,0x3c
00943084 : MOV EAX,[0x00d66fa0]
00943089 : XOR EAX,EBP
0094308b : MOV dword ptr [EBP + -0x10],EAX
0094308e : PUSH EBX
0094308f : PUSH ESI
00943090 : PUSH EDI
00943091 : PUSH EAX
00943092 : LEA EAX,[EBP + -0xc]
00943095 : MOV FS:[0x0],EAX
0094309b : MOV EAX,[0x00da9894]
009430a0 : MOV EAX,dword ptr [EAX]
009430a2 : MOV ECX,dword ptr [EAX + 0x194]
009430a8 : MOVZX EAX,word ptr [EBP + 0xc]
009430ac : MOV EDI,dword ptr [ECX + EAX*0x4 + 0x3c]
009430b0 : MOV EBX,dword ptr [EBP + 0x8]
009430b3 : PUSH EDI
009430b4 : PUSH EAX
009430b5 : PUSH 0xc72084
009430ba : LEA ESI,[EBP + -0x2c]
009430bd : CALL 0x00404750
009430c2 : ADD ESP,0xc
009430c5 : MOV dword ptr [EBP + -0x4],0x0
009430cc : MOV ECX,dword ptr [0x017247f0]
009430d2 : PUSH EDI
009430d3 : CALL 0x009f2a00
009430d8 : MOV ECX,dword ptr [EBP + 0x10]
009430db : MOV EDX,dword ptr [EBX]
009430dd : MOV EDX,dword ptr [EDX + 0x74]
009430e0 : MOV ESI,EAX
009430e2 : MOV EAX,dword ptr [EBP + 0x14]
009430e5 : PUSH EAX
009430e6 : PUSH ECX
009430e7 : MOV ECX,EBX
009430e9 : CALL EDX
009430eb : TEST EAX,EAX
009430ed : JNZ 0x00943188
009430f3 : TEST ESI,ESI
009430f5 : JZ 0x00943188
009430fb : MOV ECX,dword ptr [ESI + 0x10]
009430fe : PUSH EDI
009430ff : CALL 0x00b04230
00943104 : MOV EDI,EAX
00943106 : ADD ESP,0x4
00943109 : TEST EDI,EDI
0094310b : JNZ 0x0094315c
0094310d : PUSH 0xc720a0
00943112 : LEA ECX,[EBP + -0x48]
00943115 : CALL 0x00406460
0094311a : MOV byte ptr [EBP + -0x4],0x1
0094311e : MOV ECX,dword ptr [0x00da98e8]
00943124 : MOV ECX,dword ptr [ECX]
00943126 : TEST ECX,ECX
00943128 : JZ 0x0094313f
0094312a : MOV EDX,dword ptr [ECX]
0094312c : MOV EDX,dword ptr [EDX + 0x14]
0094312f : LEA EAX,[EBP + -0x48]
00943132 : PUSH EAX
00943133 : PUSH 0x42a
00943138 : PUSH 0xc720c0
0094313d : CALL EDX
0094313f : MOV byte ptr [EBP + -0x4],0x0
00943143 : LEA ECX,[EBP + -0x48]
00943146 : CALL 0x00406560
0094314b : MOV dword ptr [EBP + -0x4],0xffffffff
00943152 : LEA ECX,[EBP + -0x2c]
00943155 : CALL 0x00406560
0094315a : JMP 0x009431ad
0094315c : MOV EAX,dword ptr [EDI]
0094315e : MOV EDX,dword ptr [EAX + 0x1c]
00943161 : PUSH ESI
00943162 : MOV ECX,EDI
00943164 : CALL EDX
00943166 : MOV EAX,[0x017247f0]
0094316b : MOV ECX,dword ptr [EDI + 0x10]
0094316e : PUSH EAX
0094316f : MOV EAX,EDI
00943171 : CALL 0x009f3690
00943176 : MOV ECX,dword ptr [EBP + 0x14]
00943179 : MOV EDX,dword ptr [EBP + 0x10]
0094317c : PUSH 0x0
0094317e : PUSH 0x0
00943180 : PUSH ECX
00943181 : PUSH EDX
00943182 : PUSH EBX
00943183 : CALL 0x00941640
00943188 : MOV dword ptr [EBP + -0x4],0xffffffff
0094318f : CMP dword ptr [EBP + -0x14],0x8
00943193 : JC 0x0094319d
00943195 : MOV ECX,dword ptr [EBP + -0x28]
00943198 : CALL 0x006f04e0
0094319d : XOR EAX,EAX
0094319f : MOV word ptr [EBP + -0x28],AX
009431a3 : MOV dword ptr [EBP + -0x18],EAX
009431a6 : MOV dword ptr [EBP + -0x14],0x7
009431ad : MOV ECX,dword ptr [EBP + -0xc]
009431b0 : MOV dword ptr FS:[0x0],ECX
009431b7 : POP ECX
009431b8 : POP EDI
009431b9 : POP ESI
009431ba : POP EBX
009431bb : MOV ECX,dword ptr [EBP + -0x10]
009431be : XOR ECX,EBP
009431c0 : CALL 0x00633e6b
009431c5 : MOV ESP,EBP
009431c7 : POP EBP
009431c8 : RET 0x10
