PROGRAM  : Maestia.exe
FUNCTION : FUN_0098ac80
ENTRY    : 0098ac80
BODY     : [[0098ac80, 0098ae8a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0098ac80(int *param_1)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  int iVar4;
  int in_ECX;
  uint local_58;
  undefined8 local_54;
  undefined8 local_4c;
  undefined8 local_44;
  uint local_3c;
  ushort local_38;
  undefined2 uStack_36;
  undefined2 uStack_34;
  undefined2 uStack_32;
  int local_30;
  undefined2 uStack_2c;
  undefined2 uStack_2a;
  undefined4 local_28;
  DWORD DStack_24;
  uint local_20;
  undefined1 local_1c [12];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5b1e7;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_30 = *(int *)(in_ECX + 8);
  local_38 = 0;
  local_28 = 0;
  uStack_2c = *(undefined2 *)(in_ECX + 4);
  uStack_34 = (undefined2)*(undefined4 *)(in_ECX + 0xc);
  uStack_32 = (undefined2)((uint)*(undefined4 *)(in_ECX + 0xc) >> 0x10);
  DStack_24 = GetTickCount();
  local_20 = local_20 & 0xffffff00;
  piVar3 = (int *)FUN_009f2a00(*(undefined4 *)(in_ECX + 8));
  if (piVar3 == (int *)0x0) {
    piVar3 = (int *)FUN_00b04230(*(undefined4 *)(in_ECX + 8),uVar2);
    if (piVar3 == (int *)0x0) {
      FUN_00406460(L"Alloc failed");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaGuiLootingBindCheck::ReceiveAddItem",0x32a,&local_38);
      }
      local_8 = 0xffffffff;
      if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      ExceptionList = local_10;
      return;
    }
    (**(code **)(*piVar3 + 0x3c))(1);
    FUN_009f3690(DAT_017247f0);
  }
  if (piVar3[4] == *(int *)(in_ECX + 4)) {
    iVar4 = (**(code **)(*piVar3 + 0x20))();
    if (iVar4 == 0) {
      local_28 = FUN_00a08b70();
    }
  }
  piVar3 = (int *)param_1[0xf];
  piVar1 = (int *)*piVar3;
  if (piVar1 != piVar3) {
    do {
      if (piVar1[6] == local_30) break;
      FUN_00430160();
    } while (piVar1 != piVar3);
    if (piVar1 != piVar3) {
      local_38 = *(ushort *)(piVar1 + 4);
      *(ulonglong *)(piVar1 + 4) =
           CONCAT26(uStack_32,CONCAT24(uStack_34,CONCAT22(uStack_36,local_38)));
      *(ulonglong *)(piVar1 + 6) = CONCAT26(uStack_2a,CONCAT24(uStack_2c,local_30));
      *(ulonglong *)(piVar1 + 8) = CONCAT44(DStack_24,local_28);
      piVar1[10] = local_20;
      goto LAB_0098ae46;
    }
  }
  local_38 = *(ushort *)(param_1 + 0x11);
  local_58 = (uint)local_38;
  local_54 = CONCAT26(uStack_32,CONCAT24(uStack_34,CONCAT22(uStack_36,local_38)));
  local_4c = CONCAT26(uStack_2a,CONCAT24(uStack_2c,local_30));
  local_44 = CONCAT44(DStack_24,local_28);
  local_3c = local_20;
  FUN_00422690(local_1c,&local_58);
  *(short *)(param_1 + 0x11) = (short)param_1[0x11] + 1;
LAB_0098ae46:
  if (*(char *)((int)param_1 + 0x32) == '\0') {
    (**(code **)(*param_1 + 0x18))(0,300);
    ExceptionList = local_10;
    return;
  }
  FUN_0098a9c0(0);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0098ac80 : PUSH EBP
0098ac81 : MOV EBP,ESP
0098ac83 : PUSH -0x1
0098ac85 : PUSH 0xb5b1e7
0098ac8a : MOV EAX,FS:[0x0]
0098ac90 : PUSH EAX
0098ac91 : SUB ESP,0x48
0098ac94 : PUSH EBX
0098ac95 : PUSH ESI
0098ac96 : PUSH EDI
0098ac97 : MOV EAX,[0x00d66fa0]
0098ac9c : XOR EAX,EBP
0098ac9e : PUSH EAX
0098ac9f : LEA EAX,[EBP + -0xc]
0098aca2 : MOV FS:[0x0],EAX
0098aca8 : MOV ESI,ECX
0098acaa : MOV EBX,dword ptr [EBP + 0x8]
0098acad : MOV ECX,dword ptr [ESI + 0xc]
0098acb0 : MOV EDX,dword ptr [ESI + 0x8]
0098acb3 : XOR EAX,EAX
0098acb5 : MOV word ptr [EBP + -0x34],AX
0098acb9 : MOV dword ptr [EBP + -0x24],EAX
0098acbc : MOV AX,word ptr [ESI + 0x4]
0098acc0 : MOV dword ptr [EBP + -0x30],ECX
0098acc3 : MOV dword ptr [EBP + -0x2c],EDX
0098acc6 : MOV word ptr [EBP + -0x28],AX
0098acca : CALL dword ptr [0x00b850d8]
0098acd0 : MOV ECX,dword ptr [ESI + 0x8]
0098acd3 : PUSH ECX
0098acd4 : MOV ECX,dword ptr [0x017247f0]
0098acda : MOV dword ptr [EBP + -0x20],EAX
0098acdd : MOV byte ptr [EBP + -0x1c],0x0
0098ace1 : CALL 0x009f2a00
0098ace6 : MOV EDI,EAX
0098ace8 : TEST EDI,EDI
0098acea : JNZ 0x0098ad8c
0098acf0 : MOV EDX,dword ptr [ESI + 0x8]
0098acf3 : MOV ECX,dword ptr [ESI + 0x4]
0098acf6 : PUSH EDX
0098acf7 : CALL 0x00b04230
0098acfc : MOV EDI,EAX
0098acfe : ADD ESP,0x4
0098ad01 : TEST EDI,EDI
0098ad03 : JNZ 0x0098ad70
0098ad05 : PUSH 0xc82cc4
0098ad0a : LEA ECX,[EBP + -0x34]
0098ad0d : CALL 0x00406460
0098ad12 : XOR ESI,ESI
0098ad14 : MOV dword ptr [EBP + -0x4],ESI
0098ad17 : MOV EAX,[0x00da98e8]
0098ad1c : MOV ECX,dword ptr [EAX]
0098ad1e : CMP ECX,ESI
0098ad20 : JZ 0x0098ad37
0098ad22 : MOV EDX,dword ptr [ECX]
0098ad24 : MOV EDX,dword ptr [EDX + 0x14]
0098ad27 : LEA EAX,[EBP + -0x34]
0098ad2a : PUSH EAX
0098ad2b : PUSH 0x32a
0098ad30 : PUSH 0xc82ce0
0098ad35 : CALL EDX
0098ad37 : MOV dword ptr [EBP + -0x4],0xffffffff
0098ad3e : CMP dword ptr [EBP + -0x1c],0x8
0098ad42 : JC 0x0098ad4c
0098ad44 : MOV ECX,dword ptr [EBP + -0x30]
0098ad47 : CALL 0x006f04e0
0098ad4c : XOR EAX,EAX
0098ad4e : MOV dword ptr [EBP + -0x1c],0x7
0098ad55 : MOV dword ptr [EBP + -0x20],ESI
0098ad58 : MOV word ptr [EBP + -0x30],AX
0098ad5c : MOV ECX,dword ptr [EBP + -0xc]
0098ad5f : MOV dword ptr FS:[0x0],ECX
0098ad66 : POP ECX
0098ad67 : POP EDI
0098ad68 : POP ESI
0098ad69 : POP EBX
0098ad6a : MOV ESP,EBP
0098ad6c : POP EBP
0098ad6d : RET 0x4
0098ad70 : MOV EDX,dword ptr [EDI]
0098ad72 : MOV EAX,dword ptr [EDX + 0x3c]
0098ad75 : PUSH 0x1
0098ad77 : MOV ECX,EDI
0098ad79 : CALL EAX
0098ad7b : MOV ECX,dword ptr [0x017247f0]
0098ad81 : PUSH ECX
0098ad82 : MOV ECX,dword ptr [ESI + 0x4]
0098ad85 : MOV EAX,EDI
0098ad87 : CALL 0x009f3690
0098ad8c : MOV EDX,dword ptr [EDI + 0x10]
0098ad8f : CMP EDX,dword ptr [ESI + 0x4]
0098ad92 : JNZ 0x0098adab
0098ad94 : MOV EAX,dword ptr [EDI]
0098ad96 : MOV EDX,dword ptr [EAX + 0x20]
0098ad99 : MOV ECX,EDI
0098ad9b : CALL EDX
0098ad9d : TEST EAX,EAX
0098ad9f : JNZ 0x0098adab
0098ada1 : MOV ECX,EDI
0098ada3 : CALL 0x00a08b70
0098ada8 : MOV dword ptr [EBP + -0x24],EAX
0098adab : MOV ESI,dword ptr [EBX + 0x3c]
0098adae : MOV EAX,dword ptr [ESI]
0098adb0 : MOV dword ptr [EBP + 0x8],EAX
0098adb3 : CMP EAX,ESI
0098adb5 : JZ 0x0098ae00
0098adb7 : MOV ECX,dword ptr [EBP + -0x2c]
0098adba : CMP dword ptr [EAX + 0x18],ECX
0098adbd : JZ 0x0098adce
0098adbf : LEA EDX,[EBP + 0x8]
0098adc2 : CALL 0x00430160
0098adc7 : MOV EAX,dword ptr [EBP + 0x8]
0098adca : CMP EAX,ESI
0098adcc : JNZ 0x0098adb7
0098adce : CMP EAX,ESI
0098add0 : JZ 0x0098ae00
0098add2 : MOV DX,word ptr [EAX + 0x10]
0098add6 : MOV ECX,dword ptr [EBP + -0x1c]
0098add9 : MOV word ptr [EBP + -0x34],DX
0098addd : MOVQ XMM0,qword ptr [EBP + -0x34]
0098ade2 : MOVQ qword ptr [EAX + 0x10],XMM0
0098ade7 : MOVQ XMM0,qword ptr [EBP + -0x2c]
0098adec : MOVQ qword ptr [EAX + 0x18],XMM0
0098adf1 : MOVQ XMM0,qword ptr [EBP + -0x24]
0098adf6 : MOVQ qword ptr [EAX + 0x20],XMM0
0098adfb : MOV dword ptr [EAX + 0x28],ECX
0098adfe : JMP 0x0098ae46
0098ae00 : MOVZX EAX,word ptr [EBX + 0x44]
0098ae04 : MOVZX EDX,AX
0098ae07 : MOV word ptr [EBP + -0x34],AX
0098ae0b : MOVQ XMM0,qword ptr [EBP + -0x34]
0098ae10 : MOV EAX,dword ptr [EBP + -0x1c]
0098ae13 : MOVQ qword ptr [EBP + -0x50],XMM0
0098ae18 : MOVQ XMM0,qword ptr [EBP + -0x2c]
0098ae1d : LEA ECX,[EBP + -0x54]
0098ae20 : MOV dword ptr [EBP + -0x54],EDX
0098ae23 : PUSH ECX
0098ae24 : LEA EDX,[EBP + -0x18]
0098ae27 : MOVQ qword ptr [EBP + -0x48],XMM0
0098ae2c : MOVQ XMM0,qword ptr [EBP + -0x24]
0098ae31 : MOV dword ptr [EBP + -0x38],EAX
0098ae34 : PUSH EDX
0098ae35 : LEA EAX,[EBX + 0x38]
0098ae38 : MOVQ qword ptr [EBP + -0x40],XMM0
0098ae3d : CALL 0x00422690
0098ae42 : INC word ptr [EBX + 0x44]
0098ae46 : CMP byte ptr [EBX + 0x32],0x0
0098ae4a : MOV ECX,EBX
0098ae4c : JNZ 0x0098ae70
0098ae4e : MOV EAX,dword ptr [EBX]
0098ae50 : MOV EDX,dword ptr [EAX + 0x18]
0098ae53 : PUSH 0x12c
0098ae58 : PUSH 0x0
0098ae5a : CALL EDX
0098ae5c : MOV ECX,dword ptr [EBP + -0xc]
0098ae5f : MOV dword ptr FS:[0x0],ECX
0098ae66 : POP ECX
0098ae67 : POP EDI
0098ae68 : POP ESI
0098ae69 : POP EBX
0098ae6a : MOV ESP,EBP
0098ae6c : POP EBP
0098ae6d : RET 0x4
0098ae70 : PUSH 0x0
0098ae72 : CALL 0x0098a9c0
0098ae77 : MOV ECX,dword ptr [EBP + -0xc]
0098ae7a : MOV dword ptr FS:[0x0],ECX
0098ae81 : POP ECX
0098ae82 : POP EDI
0098ae83 : POP ESI
0098ae84 : POP EBX
0098ae85 : MOV ESP,EBP
0098ae87 : POP EBP
0098ae88 : RET 0x4
