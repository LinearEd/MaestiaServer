PROGRAM  : Maestia.exe
FUNCTION : FUN_005e6030
ENTRY    : 005e6030
BODY     : [[005e6030, 005e6169]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e6030(undefined4 param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint *puVar3;
  int *piVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_005e606a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_005e5d10(param_1,iVar7);
LAB_005e606a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x18);
  if (*puVar1 == 0xfffffffe) {
    FUN_005e5b50(param_2,0xffffffff);
    puVar1[1] = param_3;
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x18) != -2);
  uVar5 = puVar1[1];
  iVar2 = iVar7 + 8 + uVar6 * 0x18;
  if (uVar5 != param_3) {
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18)) {
      uVar5 = *puVar3;
      puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
    }
    if (iVar2 != 0) {
      FUN_005e5b00(puVar1);
    }
    *puVar3 = uVar6;
    FUN_0051bc20(*param_2);
    iVar7 = param_2[1];
    FUN_0051bc20(iVar7);
    puVar1[4] = *(uint *)(iVar7 + 4);
    puVar1[5] = *(uint *)(iVar7 + 8);
    puVar1[1] = param_3;
    *puVar1 = 0xffffffff;
    return;
  }
  if (iVar2 != 0) {
    FUN_005e5b00(puVar1);
  }
  FUN_0051bc20(*param_2);
  iVar7 = param_2[1];
  FUN_0051bc20(iVar7);
  puVar1[4] = *(uint *)(iVar7 + 4);
  puVar1[5] = *(uint *)(iVar7 + 8);
  *puVar1 = uVar6;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
005e6030 : PUSH ESI
005e6031 : MOV ESI,ECX
005e6033 : MOV EAX,dword ptr [ESI]
005e6035 : PUSH EDI
005e6036 : TEST EAX,EAX
005e6038 : JNZ 0x005e6043
005e603a : MOV EAX,dword ptr [ESP + 0xc]
005e603e : PUSH 0x8
005e6040 : PUSH EAX
005e6041 : JMP 0x005e6065
005e6043 : MOV ECX,dword ptr [EAX + 0x4]
005e6046 : LEA EDX,[ECX*0x4 + 0x4]
005e604d : MOV ECX,dword ptr [EAX]
005e604f : LEA ECX,[ECX + ECX*0x4]
005e6052 : CMP ECX,EDX
005e6054 : JBE 0x005e606a
005e6056 : MOV EDX,dword ptr [EAX + 0x4]
005e6059 : MOV ECX,dword ptr [ESP + 0xc]
005e605d : LEA EAX,[EDX + EDX*0x1 + 0x2]
005e6061 : PUSH EAX
005e6062 : PUSH ECX
005e6063 : MOV ECX,ESI
005e6065 : CALL 0x005e5d10
005e606a : MOV EAX,dword ptr [ESI]
005e606c : MOV EDI,dword ptr [ESP + 0x14]
005e6070 : AND EDI,dword ptr [EAX + 0x4]
005e6073 : INC dword ptr [EAX]
005e6075 : MOV EAX,dword ptr [ESI]
005e6077 : LEA EDX,[EDI + EDI*0x2]
005e607a : LEA ESI,[EAX + EDX*0x8 + 0x8]
005e607e : MOV EDX,0xfffffffe
005e6083 : CMP dword ptr [ESI],EDX
005e6085 : JNZ 0x005e609d
005e6087 : MOV EAX,dword ptr [ESP + 0x10]
005e608b : PUSH -0x1
005e608d : PUSH EAX
005e608e : MOV ECX,ESI
005e6090 : CALL 0x005e5b50
005e6095 : MOV dword ptr [ESI + 0x4],EDI
005e6098 : POP EDI
005e6099 : POP ESI
005e609a : RET 0xc
005e609d : MOV ECX,dword ptr [EAX + 0x4]
005e60a0 : PUSH EBX
005e60a1 : MOV EBX,EDI
005e60a3 : PUSH EBP
005e60a4 : INC EBX
005e60a5 : AND EBX,ECX
005e60a7 : LEA EBP,[EBX + EBX*0x2]
005e60aa : CMP dword ptr [EAX + EBP*0x8 + 0x8],EDX
005e60ae : JNZ 0x005e60a4
005e60b0 : MOV EDX,dword ptr [ESI + 0x4]
005e60b3 : LEA ECX,[EBX + EBX*0x2]
005e60b6 : LEA ECX,[EAX + ECX*0x8 + 0x8]
005e60ba : CMP EDX,EDI
005e60bc : JNZ 0x005e6104
005e60be : TEST ECX,ECX
005e60c0 : JZ 0x005e60c8
005e60c2 : PUSH ESI
005e60c3 : CALL 0x005e5b00
005e60c8 : MOV EBP,dword ptr [ESP + 0x18]
005e60cc : MOV EDX,dword ptr [EBP]
005e60cf : LEA ECX,[ESI + 0x8]
005e60d2 : PUSH EDX
005e60d3 : CALL 0x0051bc20
005e60d8 : MOV EBP,dword ptr [EBP + 0x4]
005e60db : LEA ECX,[ESI + 0xc]
005e60de : PUSH EBP
005e60df : MOV dword ptr [ESP + 0x1c],ECX
005e60e3 : CALL 0x0051bc20
005e60e8 : FLD float ptr [EBP + 0x4]
005e60eb : MOV EAX,dword ptr [ESP + 0x18]
005e60ef : FSTP float ptr [EAX + 0x4]
005e60f2 : MOV ECX,dword ptr [EBP + 0x8]
005e60f5 : POP EBP
005e60f6 : MOV dword ptr [EAX + 0x8],ECX
005e60f9 : MOV dword ptr [ESI],EBX
005e60fb : POP EBX
005e60fc : MOV dword ptr [ESI + 0x4],EDI
005e60ff : POP EDI
005e6100 : POP ESI
005e6101 : RET 0xc
005e6104 : LEA EDX,[EDX + EDX*0x2]
005e6107 : CMP dword ptr [EAX + EDX*0x8 + 0x8],EDI
005e610b : LEA EBP,[EAX + EDX*0x8 + 0x8]
005e610f : JZ 0x005e6122
005e6111 : MOV EBP,dword ptr [EBP]
005e6114 : LEA EDX,[EBP + EBP*0x2]
005e6118 : CMP dword ptr [EAX + EDX*0x8 + 0x8],EDI
005e611c : LEA EBP,[EAX + EDX*0x8 + 0x8]
005e6120 : JNZ 0x005e6111
005e6122 : TEST ECX,ECX
005e6124 : JZ 0x005e612c
005e6126 : PUSH ESI
005e6127 : CALL 0x005e5b00
005e612c : MOV dword ptr [EBP],EBX
005e612f : MOV EBX,dword ptr [ESP + 0x18]
005e6133 : MOV EAX,dword ptr [EBX]
005e6135 : LEA EBP,[ESI + 0x8]
005e6138 : PUSH EAX
005e6139 : MOV ECX,EBP
005e613b : CALL 0x0051bc20
005e6140 : MOV EBX,dword ptr [EBX + 0x4]
005e6143 : ADD EBP,0x4
005e6146 : PUSH EBX
005e6147 : MOV ECX,EBP
005e6149 : CALL 0x0051bc20
005e614e : FLD float ptr [EBX + 0x4]
005e6151 : FSTP float ptr [EBP + 0x4]
005e6154 : MOV ECX,dword ptr [EBX + 0x8]
005e6157 : MOV dword ptr [EBP + 0x8],ECX
005e615a : POP EBP
005e615b : POP EBX
005e615c : MOV dword ptr [ESI + 0x4],EDI
005e615f : POP EDI
005e6160 : MOV dword ptr [ESI],0xffffffff
005e6166 : POP ESI
005e6167 : RET 0xc
