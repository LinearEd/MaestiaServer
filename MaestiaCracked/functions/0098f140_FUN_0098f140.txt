PROGRAM  : Maestia.exe
FUNCTION : FUN_0098f140
ENTRY    : 0098f140
BODY     : [[0098f140, 0098f3b1]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0098f1b3) */
/* WARNING: Removing unreachable block (ram,0x0098f174) */
/* WARNING: Removing unreachable block (ram,0x0098f1e4) */

void FUN_0098f140(int param_1,short param_2)

{
  short *psVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int local_10;
  int local_c;
  int local_8;
  
  piVar4 = (int *)(param_1 + 0x48);
  local_c = 3;
  do {
    if (piVar4[-1] != *piVar4) {
      *piVar4 = piVar4[-1];
    }
    piVar4 = piVar4 + 4;
    local_c = local_c + -1;
  } while (local_c != 0);
  if (*(int *)(param_1 + 0x84) != *(int *)(param_1 + 0x88)) {
    *(int *)(param_1 + 0x88) = *(int *)(param_1 + 0x84);
  }
  if (*(int *)(param_1 + 0x74) != *(int *)(param_1 + 0x78)) {
    *(int *)(param_1 + 0x78) = *(int *)(param_1 + 0x74);
  }
  local_c = 0;
  if (DAT_01724850 != 0) {
    local_c = -(uint)(*(int *)(DAT_01724850 + 0x28) != 0);
    iVar5 = local_c;
joined_r0x0098f20a:
    if (iVar5 != 0) {
      if (DAT_01724850 == 0) {
        local_8 = 0;
      }
      else {
        local_10 = 0;
        FUN_00404160(&local_c,&local_8,&local_10);
        iVar5 = local_c;
        local_8 = local_10;
      }
      for (psVar1 = *(short **)(local_8 + 0x150); psVar1 != *(short **)(local_8 + 0x154);
          psVar1 = psVar1 + 4) {
        if (*psVar1 == param_2) {
          if (*(int *)(psVar1 + 2) == 0) break;
          iVar3 = *(int *)(local_8 + 0x50);
          if (iVar3 == 0) {
            iVar3 = *(int *)(param_1 + 0x44);
            iVar5 = param_1 + 0x40;
            if (iVar3 != 0) goto LAB_0098f2b2;
            uVar2 = 0;
          }
          else if (iVar3 == 1) {
            iVar3 = *(int *)(param_1 + 0x54);
            iVar5 = param_1 + 0x50;
            if (iVar3 == 0) {
              uVar2 = 0;
            }
            else {
LAB_0098f2b2:
              uVar2 = *(int *)(iVar5 + 0xc) - iVar3 >> 2;
            }
          }
          else {
            if (iVar3 != 2) break;
            iVar3 = *(int *)(param_1 + 100);
            iVar5 = param_1 + 0x60;
            if (iVar3 != 0) goto LAB_0098f2b2;
            uVar2 = 0;
          }
          piVar4 = *(int **)(iVar5 + 8);
          if ((uint)((int)piVar4 - iVar3 >> 2) < uVar2) {
            *piVar4 = local_8;
            *(int **)(iVar5 + 8) = piVar4 + 1;
          }
          else {
            FUN_0042fe80(iVar5,piVar4,&local_8);
          }
          iVar5 = *(int *)(param_1 + 0x74);
          if (iVar5 == 0) {
            uVar2 = 0;
          }
          else {
            uVar2 = *(int *)(param_1 + 0x7c) - iVar5 >> 2;
          }
          piVar4 = *(int **)(param_1 + 0x78);
          if ((uint)((int)piVar4 - iVar5 >> 2) < uVar2) {
            *piVar4 = local_8;
            *(int **)(param_1 + 0x78) = piVar4 + 1;
          }
          else {
            FUN_0042fe80(param_1 + 0x70,piVar4,&local_8);
          }
          FUN_0098e880(*(undefined1 *)(local_8 + 0x40));
          iVar5 = local_c;
          break;
        }
      }
      goto joined_r0x0098f20a;
    }
  }
  piVar4 = (int *)(param_1 + 0x44);
  iVar5 = 3;
  do {
    if ((piVar4[1] - *piVar4 & 0xfffffffcU) != 0) {
      FUN_004c0a80(*piVar4,piVar4[1],piVar4[1] - *piVar4 >> 2,FUN_0098e210);
    }
    piVar4 = piVar4 + 4;
    iVar5 = iVar5 + -1;
  } while (iVar5 != 0);
  if ((*(int *)(param_1 + 0x78) - *(int *)(param_1 + 0x74) & 0xfffffffcU) != 0) {
    FUN_004c0a80(*(int *)(param_1 + 0x74),*(int *)(param_1 + 0x78),
                 *(int *)(param_1 + 0x78) - *(int *)(param_1 + 0x74) >> 2,FUN_0098e210);
  }
  FUN_0098e740(param_1);
  FUN_0098eab0();
  return;
}



============================================================
DISASSEMBLY
============================================================
0098f140 : PUSH EBP
0098f141 : MOV EBP,ESP
0098f143 : SUB ESP,0xc
0098f146 : PUSH EBX
0098f147 : MOV EBX,dword ptr [EBP + 0x8]
0098f14a : PUSH ESI
0098f14b : PUSH EDI
0098f14c : LEA EDI,[EBX + 0x48]
0098f14f : MOV dword ptr [EBP + -0x8],0x3
0098f156 : MOV ESI,dword ptr [EDI + -0x4]
0098f159 : MOV ECX,dword ptr [EDI]
0098f15b : CMP ESI,ECX
0098f15d : JZ 0x0098f185
0098f15f : MOV EAX,ECX
0098f161 : SUB EAX,ECX
0098f163 : SAR EAX,0x2
0098f166 : LEA EDX,[EAX*0x4 + 0x0]
0098f16d : LEA EBX,[EDX + ESI*0x1]
0098f170 : TEST EAX,EAX
0098f172 : JLE 0x0098f180
0098f174 : PUSH EDX
0098f175 : PUSH ECX
0098f176 : PUSH EDX
0098f177 : PUSH ESI
0098f178 : CALL 0x00634101
0098f17d : ADD ESP,0x10
0098f180 : MOV dword ptr [EDI],EBX
0098f182 : MOV EBX,dword ptr [EBP + 0x8]
0098f185 : ADD EDI,0x10
0098f188 : SUB dword ptr [EBP + -0x8],0x1
0098f18c : JNZ 0x0098f156
0098f18e : MOV ESI,dword ptr [EBX + 0x84]
0098f194 : MOV ECX,dword ptr [EBX + 0x88]
0098f19a : CMP ESI,ECX
0098f19c : JZ 0x0098f1c5
0098f19e : MOV EAX,ECX
0098f1a0 : SUB EAX,ECX
0098f1a2 : SAR EAX,0x2
0098f1a5 : LEA EDX,[EAX*0x4 + 0x0]
0098f1ac : LEA EDI,[EDX + ESI*0x1]
0098f1af : TEST EAX,EAX
0098f1b1 : JLE 0x0098f1bf
0098f1b3 : PUSH EDX
0098f1b4 : PUSH ECX
0098f1b5 : PUSH EDX
0098f1b6 : PUSH ESI
0098f1b7 : CALL 0x00634101
0098f1bc : ADD ESP,0x10
0098f1bf : MOV dword ptr [EBX + 0x88],EDI
0098f1c5 : MOV ESI,dword ptr [EBX + 0x74]
0098f1c8 : MOV ECX,dword ptr [EBX + 0x78]
0098f1cb : CMP ESI,ECX
0098f1cd : JZ 0x0098f1f3
0098f1cf : MOV EAX,ECX
0098f1d1 : SUB EAX,ECX
0098f1d3 : SAR EAX,0x2
0098f1d6 : LEA EDX,[EAX*0x4 + 0x0]
0098f1dd : LEA EDI,[EDX + ESI*0x1]
0098f1e0 : TEST EAX,EAX
0098f1e2 : JLE 0x0098f1f0
0098f1e4 : PUSH EDX
0098f1e5 : PUSH ECX
0098f1e6 : PUSH EDX
0098f1e7 : PUSH ESI
0098f1e8 : CALL 0x00634101
0098f1ed : ADD ESP,0x10
0098f1f0 : MOV dword ptr [EBX + 0x78],EDI
0098f1f3 : MOV EAX,[0x01724850]
0098f1f8 : TEST EAX,EAX
0098f1fa : JZ 0x0098f339
0098f200 : MOV EDX,dword ptr [EAX + 0x28]
0098f203 : NEG EDX
0098f205 : SBB EDX,EDX
0098f207 : MOV dword ptr [EBP + -0x8],EDX
0098f20a : JZ 0x0098f339
0098f210 : JMP 0x0098f217
0098f212 : MOV EAX,[0x01724850]
0098f217 : TEST EAX,EAX
0098f219 : JZ 0x0098f23b
0098f21b : LEA ECX,[EBP + -0xc]
0098f21e : PUSH ECX
0098f21f : LEA EDX,[EBP + -0x4]
0098f222 : PUSH EDX
0098f223 : LEA ECX,[EBP + -0x8]
0098f226 : PUSH ECX
0098f227 : MOV dword ptr [EBP + -0xc],0x0
0098f22e : CALL 0x00404160
0098f233 : MOV EDI,dword ptr [EBP + -0xc]
0098f236 : MOV EDX,dword ptr [EBP + -0x8]
0098f239 : JMP 0x0098f23d
0098f23b : XOR EDI,EDI
0098f23d : MOV EAX,dword ptr [EDI + 0x150]
0098f243 : MOV ECX,dword ptr [EDI + 0x154]
0098f249 : MOV dword ptr [EBP + -0x4],EDI
0098f24c : CMP EAX,ECX
0098f24e : JZ 0x0098f331
0098f254 : MOV SI,word ptr [EAX]
0098f257 : CMP SI,word ptr [EBP + 0xc]
0098f25b : JZ 0x0098f269
0098f25d : ADD EAX,0x8
0098f260 : CMP EAX,ECX
0098f262 : JNZ 0x0098f254
0098f264 : JMP 0x0098f331
0098f269 : CMP dword ptr [EAX + 0x4],0x0
0098f26d : JZ 0x0098f331
0098f273 : MOV EAX,dword ptr [EDI + 0x50]
0098f276 : TEST EAX,EAX
0098f278 : JNZ 0x0098f288
0098f27a : MOV ESI,dword ptr [EBX + 0x44]
0098f27d : LEA EAX,[EBX + 0x40]
0098f280 : TEST ESI,ESI
0098f282 : JNZ 0x0098f2b2
0098f284 : XOR ECX,ECX
0098f286 : JMP 0x0098f2ba
0098f288 : CMP EAX,0x1
0098f28b : JNZ 0x0098f29b
0098f28d : MOV ESI,dword ptr [EBX + 0x54]
0098f290 : LEA EAX,[EBX + 0x50]
0098f293 : TEST ESI,ESI
0098f295 : JNZ 0x0098f2b2
0098f297 : XOR ECX,ECX
0098f299 : JMP 0x0098f2ba
0098f29b : CMP EAX,0x2
0098f29e : JNZ 0x0098f331
0098f2a4 : MOV ESI,dword ptr [EBX + 0x64]
0098f2a7 : LEA EAX,[EBX + 0x60]
0098f2aa : TEST ESI,ESI
0098f2ac : JNZ 0x0098f2b2
0098f2ae : XOR ECX,ECX
0098f2b0 : JMP 0x0098f2ba
0098f2b2 : MOV ECX,dword ptr [EAX + 0xc]
0098f2b5 : SUB ECX,ESI
0098f2b7 : SAR ECX,0x2
0098f2ba : MOV EDX,dword ptr [EAX + 0x8]
0098f2bd : MOV EBX,EDX
0098f2bf : SUB EBX,ESI
0098f2c1 : SAR EBX,0x2
0098f2c4 : CMP EBX,ECX
0098f2c6 : JNC 0x0098f2d2
0098f2c8 : MOV dword ptr [EDX],EDI
0098f2ca : ADD EDX,0x4
0098f2cd : MOV dword ptr [EAX + 0x8],EDX
0098f2d0 : JMP 0x0098f2e0
0098f2d2 : LEA ECX,[EBP + -0x4]
0098f2d5 : PUSH ECX
0098f2d6 : PUSH EDX
0098f2d7 : PUSH EAX
0098f2d8 : CALL 0x0042fe80
0098f2dd : MOV EDI,dword ptr [EBP + -0x4]
0098f2e0 : MOV ESI,dword ptr [EBP + 0x8]
0098f2e3 : MOV EDX,dword ptr [ESI + 0x74]
0098f2e6 : ADD ESI,0x70
0098f2e9 : TEST EDX,EDX
0098f2eb : JNZ 0x0098f2f1
0098f2ed : XOR EAX,EAX
0098f2ef : JMP 0x0098f2f9
0098f2f1 : MOV EAX,dword ptr [ESI + 0xc]
0098f2f4 : SUB EAX,EDX
0098f2f6 : SAR EAX,0x2
0098f2f9 : MOV ECX,dword ptr [ESI + 0x8]
0098f2fc : MOV EBX,ECX
0098f2fe : SUB EBX,EDX
0098f300 : SAR EBX,0x2
0098f303 : CMP EBX,EAX
0098f305 : JNC 0x0098f311
0098f307 : MOV dword ptr [ECX],EDI
0098f309 : ADD ECX,0x4
0098f30c : MOV dword ptr [ESI + 0x8],ECX
0098f30f : JMP 0x0098f31f
0098f311 : LEA EDX,[EBP + -0x4]
0098f314 : PUSH EDX
0098f315 : PUSH ECX
0098f316 : PUSH ESI
0098f317 : CALL 0x0042fe80
0098f31c : MOV EDI,dword ptr [EBP + -0x4]
0098f31f : MOVZX EAX,byte ptr [EDI + 0x40]
0098f323 : MOV EBX,dword ptr [EBP + 0x8]
0098f326 : PUSH EAX
0098f327 : MOV EDX,EBX
0098f329 : CALL 0x0098e880
0098f32e : MOV EDX,dword ptr [EBP + -0x8]
0098f331 : TEST EDX,EDX
0098f333 : JNZ 0x0098f212
0098f339 : LEA ESI,[EBX + 0x44]
0098f33c : MOV EDI,0x3
0098f341 : MOV ECX,dword ptr [ESI + 0x4]
0098f344 : SUB ECX,dword ptr [ESI]
0098f346 : TEST ECX,0xfffffffc
0098f34c : JZ 0x0098f36a
0098f34e : MOV EAX,dword ptr [ESI + 0x4]
0098f351 : MOV ECX,dword ptr [ESI]
0098f353 : MOV EDX,EAX
0098f355 : SUB EDX,ECX
0098f357 : PUSH 0x98e210
0098f35c : SAR EDX,0x2
0098f35f : PUSH EDX
0098f360 : PUSH EAX
0098f361 : PUSH ECX
0098f362 : CALL 0x004c0a80
0098f367 : ADD ESP,0x10
0098f36a : ADD ESI,0x10
0098f36d : SUB EDI,0x1
0098f370 : JNZ 0x0098f341
0098f372 : MOV EAX,dword ptr [EBX + 0x78]
0098f375 : SUB EAX,dword ptr [EBX + 0x74]
0098f378 : TEST EAX,0xfffffffc
0098f37d : JZ 0x0098f39c
0098f37f : MOV EAX,dword ptr [EBX + 0x78]
0098f382 : MOV ECX,dword ptr [EBX + 0x74]
0098f385 : MOV EDX,EAX
0098f387 : SUB EDX,ECX
0098f389 : PUSH 0x98e210
0098f38e : SAR EDX,0x2
0098f391 : PUSH EDX
0098f392 : PUSH EAX
0098f393 : PUSH ECX
0098f394 : CALL 0x004c0a80
0098f399 : ADD ESP,0x10
0098f39c : PUSH EBX
0098f39d : CALL 0x0098e740
0098f3a2 : MOV ECX,EBX
0098f3a4 : CALL 0x0098eab0
0098f3a9 : POP EDI
0098f3aa : POP ESI
0098f3ab : POP EBX
0098f3ac : MOV ESP,EBP
0098f3ae : POP EBP
0098f3af : RET 0x8
