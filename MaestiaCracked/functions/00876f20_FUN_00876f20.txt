PROGRAM  : Maestia.exe
FUNCTION : FUN_00876f20
ENTRY    : 00876f20
BODY     : [[00876f20, 00877098]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00876f20(undefined4 param_1,undefined4 param_2,undefined4 *param_3,undefined4 *param_4)

{
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined4 unaff_EDI;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b66452;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined4 *)(in_ECX + 0x20) = param_2;
  FUN_00405eb0(unaff_EDI,0,0xffffffff);
  FUN_00876b90(in_ECX,param_1);
  if (*(int *)(in_ECX + 0x40) == 0) {
    iVar1 = (**(code **)(**(int **)(in_ECX + 0x20) + 0x20))();
    *(int *)(in_ECX + 0x1c) = iVar1;
    *(undefined1 *)(iVar1 + 0x2bf) = 1;
    FUN_00403510(local_34);
    local_8 = 0;
    uVar2 = FUN_007cb920(local_34);
    *(undefined4 *)(in_ECX + 0x24) = uVar2;
    (**(code **)(**(int **)(in_ECX + 0x1c) + 0xec))(uVar2,1);
    local_8 = 0xffffffff;
    if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_1c = 7;
    local_20 = 0;
    local_30 = 0;
  }
  else {
    iVar1 = *(int *)(*(int *)(in_ECX + 0x40) + 1000);
    *(int *)(in_ECX + 0x1c) = iVar1;
    *(undefined1 *)(iVar1 + 0x2bf) = 1;
    if (*(char *)(in_ECX + 0x58) == '\0') {
      *(undefined4 *)(in_ECX + 0x44) = *param_3;
      *(undefined4 *)(in_ECX + 0x48) = param_3[1];
      *(undefined4 *)(in_ECX + 0x4c) = param_3[2];
      *(undefined4 *)(in_ECX + 0x50) = *param_4;
      *(undefined4 *)(in_ECX + 0x54) = param_4[1];
    }
    *(undefined1 *)(in_ECX + 0x58) = 0;
  }
  if (*(int *)(in_ECX + 0x24) != 0) {
    *(undefined1 *)(*(int *)(in_ECX + 0x24) + 0x20d) = 0;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00876f20 : PUSH EBP
00876f21 : MOV EBP,ESP
00876f23 : PUSH -0x1
00876f25 : PUSH 0xb66452
00876f2a : MOV EAX,FS:[0x0]
00876f30 : PUSH EAX
00876f31 : SUB ESP,0x4c
00876f34 : MOV EAX,[0x00d66fa0]
00876f39 : XOR EAX,EBP
00876f3b : MOV dword ptr [EBP + -0x14],EAX
00876f3e : PUSH EBX
00876f3f : PUSH ESI
00876f40 : PUSH EAX
00876f41 : LEA EAX,[EBP + -0xc]
00876f44 : MOV FS:[0x0],EAX
00876f4a : MOV EAX,dword ptr [EBP + 0xc]
00876f4d : MOV EBX,dword ptr [EBP + 0x18]
00876f50 : PUSH -0x1
00876f52 : PUSH 0x0
00876f54 : MOV ESI,ECX
00876f56 : PUSH EDI
00876f57 : MOV dword ptr [ESI + 0x20],EAX
00876f5a : CALL 0x00405eb0
00876f5f : MOV ECX,dword ptr [EBP + 0x8]
00876f62 : PUSH ECX
00876f63 : PUSH ESI
00876f64 : MOV ECX,EBX
00876f66 : CALL 0x00876b90
00876f6b : MOV EAX,dword ptr [ESI + 0x40]
00876f6e : XOR EBX,EBX
00876f70 : CMP EAX,EBX
00876f72 : JZ 0x00876fb3
00876f74 : MOV EAX,dword ptr [EAX + 0x3e8]
00876f7a : MOV dword ptr [ESI + 0x1c],EAX
00876f7d : MOV byte ptr [EAX + 0x2bf],0x1
00876f84 : CMP byte ptr [ESI + 0x58],BL
00876f87 : JNZ 0x00876fab
00876f89 : MOV EAX,dword ptr [EBP + 0x10]
00876f8c : FLD float ptr [EAX]
00876f8e : FSTP float ptr [ESI + 0x44]
00876f91 : FLD float ptr [EAX + 0x4]
00876f94 : FSTP float ptr [ESI + 0x48]
00876f97 : FLD float ptr [EAX + 0x8]
00876f9a : MOV EAX,dword ptr [EBP + 0x14]
00876f9d : FSTP float ptr [ESI + 0x4c]
00876fa0 : MOV EDX,dword ptr [EAX]
00876fa2 : MOV dword ptr [ESI + 0x50],EDX
00876fa5 : MOV EAX,dword ptr [EAX + 0x4]
00876fa8 : MOV dword ptr [ESI + 0x54],EAX
00876fab : MOV byte ptr [ESI + 0x58],BL
00876fae : JMP 0x0087706e
00876fb3 : XORPS XMM0,XMM0
00876fb6 : MOVSS XMM1,dword ptr [0x00c10fc4]
00876fbe : MOV ECX,dword ptr [ESI + 0x20]
00876fc1 : LEA EAX,[EBP + -0x48]
00876fc4 : PUSH EAX
00876fc5 : LEA EAX,[EBP + -0x58]
00876fc8 : PUSH EAX
00876fc9 : LEA EAX,[EBP + -0x3c]
00876fcc : MOVSS dword ptr [EBP + -0x48],XMM1
00876fd1 : MOVSS dword ptr [EBP + -0x44],XMM1
00876fd6 : MOVSS dword ptr [EBP + -0x40],XMM1
00876fdb : MOVSS dword ptr [EBP + -0x58],XMM0
00876fe0 : MOVSS dword ptr [EBP + -0x54],XMM0
00876fe5 : MOVSS dword ptr [EBP + -0x50],XMM0
00876fea : MOVSS dword ptr [EBP + -0x4c],XMM1
00876fef : MOVSS dword ptr [EBP + -0x3c],XMM0
00876ff4 : MOVSS dword ptr [EBP + -0x38],XMM0
00876ff9 : MOVSS dword ptr [EBP + -0x34],XMM0
00876ffe : MOV EDX,dword ptr [ECX]
00877000 : MOV EDX,dword ptr [EDX + 0x20]
00877003 : PUSH EAX
00877004 : PUSH EDI
00877005 : CALL EDX
00877007 : MOV dword ptr [ESI + 0x1c],EAX
0087700a : MOV byte ptr [EAX + 0x2bf],0x1
00877011 : LEA EAX,[EBP + -0x30]
00877014 : PUSH EAX
00877015 : MOV EDX,0xc432c8
0087701a : MOV ECX,ESI
0087701c : CALL 0x00403510
00877021 : ADD ESP,0x4
00877024 : MOV dword ptr [EBP + -0x4],EBX
00877027 : LEA ECX,[EBP + -0x30]
0087702a : PUSH ECX
0087702b : MOV ECX,dword ptr [0x017251d0]
00877031 : CALL 0x007cb920
00877036 : MOV ECX,dword ptr [ESI + 0x1c]
00877039 : MOV dword ptr [ESI + 0x24],EAX
0087703c : MOV EDX,dword ptr [ECX]
0087703e : PUSH 0x1
00877040 : PUSH EAX
00877041 : MOV EAX,dword ptr [EDX + 0xec]
00877047 : CALL EAX
00877049 : MOV dword ptr [EBP + -0x4],0xffffffff
00877050 : CMP dword ptr [EBP + -0x18],0x8
00877054 : JC 0x0087705e
00877056 : MOV ECX,dword ptr [EBP + -0x2c]
00877059 : CALL 0x006f04e0
0087705e : XOR ECX,ECX
00877060 : MOV dword ptr [EBP + -0x18],0x7
00877067 : MOV dword ptr [EBP + -0x1c],EBX
0087706a : MOV word ptr [EBP + -0x2c],CX
0087706e : MOV ESI,dword ptr [ESI + 0x24]
00877071 : CMP ESI,EBX
00877073 : JZ 0x0087707c
00877075 : MOV byte ptr [ESI + 0x20d],0x0
0087707c : MOV ECX,dword ptr [EBP + -0xc]
0087707f : MOV dword ptr FS:[0x0],ECX
00877086 : POP ECX
00877087 : POP ESI
00877088 : POP EBX
00877089 : MOV ECX,dword ptr [EBP + -0x14]
0087708c : XOR ECX,EBP
0087708e : CALL 0x00633e6b
00877093 : MOV ESP,EBP
00877095 : POP EBP
00877096 : RET 0x14
