PROGRAM  : Maestia.exe
FUNCTION : FUN_0095b6d0
ENTRY    : 0095b6d0
BODY     : [[0095b6d0, 0095b8f4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0095b6d0(int param_1,char param_2)

{
  uint uVar1;
  undefined4 uVar2;
  undefined1 uVar3;
  int *piVar4;
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b202a1;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  uVar3 = 0;
  if (param_2 == '\0') {
    if (*(int *)(param_1 + 0x11c) == 0) {
      if (DAT_0172491c == 0) {
        return 0;
      }
      if (*DAT_00da9894 == 0) {
        return 0;
      }
      if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
        return 0;
      }
      ExceptionList = &local_10;
      FUN_00406460(L"IDS_CHARPET_UNREG_MPPOTION");
      uVar3 = 4;
      local_8 = 4;
      piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar2 = FUN_0081d120(local_2c);
      local_8._0_1_ = 5;
    }
    else {
      if (*(char *)(param_1 + 0x172) != '\0') {
        return 1;
      }
      if (DAT_0172491c == 0) {
        return 0;
      }
      if (*DAT_00da9894 == 0) {
        return 0;
      }
      if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
        return 0;
      }
      ExceptionList = &local_10;
      FUN_00406460(L"IDS_CHARPET_NOGOT_MPPOTION");
      uVar3 = 6;
      local_8 = 6;
      piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar2 = FUN_0081d120(local_2c);
      local_8._0_1_ = 7;
    }
  }
  else if (*(int *)(param_1 + 0x118) == 0) {
    if (DAT_0172491c == 0) {
      return 0;
    }
    if (*DAT_00da9894 == 0) {
      return 0;
    }
    if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
      return 0;
    }
    ExceptionList = &local_10;
    FUN_00406460(L"IDS_CHARPET_UNREG_HPPOTION");
    local_8 = 0;
    piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar2 = FUN_0081d120(local_2c);
    local_8._0_1_ = 1;
  }
  else {
    if (*(char *)(param_1 + 0x171) != '\0') {
      return 1;
    }
    if (DAT_0172491c == 0) {
      return 0;
    }
    if (*DAT_00da9894 == 0) {
      return 0;
    }
    if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
      return 0;
    }
    ExceptionList = &local_10;
    FUN_00406460(L"IDS_CHARPET_NOGOT_HPPOTION");
    uVar3 = 2;
    local_8 = 2;
    piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar2 = FUN_0081d120(local_2c);
    local_8._0_1_ = 3;
  }
  (**(code **)(*piVar4 + 0x44))(uVar2,3,uVar1);
  local_8 = CONCAT31(local_8._1_3_,uVar3);
  FUN_00406560();
  local_8 = 0xffffffff;
  FUN_00406560();
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0095b6d0 : PUSH EBP
0095b6d1 : MOV EBP,ESP
0095b6d3 : PUSH -0x1
0095b6d5 : PUSH 0xb202a1
0095b6da : MOV EAX,FS:[0x0]
0095b6e0 : PUSH EAX
0095b6e1 : SUB ESP,0x38
0095b6e4 : PUSH EBX
0095b6e5 : PUSH ESI
0095b6e6 : PUSH EDI
0095b6e7 : MOV EAX,[0x00d66fa0]
0095b6ec : XOR EAX,EBP
0095b6ee : PUSH EAX
0095b6ef : LEA EAX,[EBP + -0xc]
0095b6f2 : MOV FS:[0x0],EAX
0095b6f8 : MOV EAX,dword ptr [EBP + 0x8]
0095b6fb : XOR EBX,EBX
0095b6fd : CMP byte ptr [EBP + 0xc],BL
0095b700 : JZ 0x0095b803
0095b706 : CMP dword ptr [EAX + 0x118],EBX
0095b70c : JNZ 0x0095b79d
0095b712 : CMP dword ptr [0x0172491c],EBX
0095b718 : JZ 0x0095b787
0095b71a : MOV EAX,[0x00da9894]
0095b71f : MOV EAX,dword ptr [EAX]
0095b721 : CMP EAX,EBX
0095b723 : JZ 0x0095b787
0095b725 : CMP dword ptr [EAX + 0x1a8],EBX
0095b72b : JZ 0x0095b787
0095b72d : PUSH 0xc7772c
0095b732 : LEA ECX,[EBP + -0x28]
0095b735 : CALL 0x00406460
0095b73a : MOV dword ptr [EBP + -0x4],EBX
0095b73d : MOV ECX,dword ptr [0x00da9894]
0095b743 : MOV EAX,dword ptr [ECX]
0095b745 : MOV ECX,dword ptr [0x0172491c]
0095b74b : MOV ESI,dword ptr [EAX + 0x1a8]
0095b751 : LEA EDX,[EBP + -0x28]
0095b754 : PUSH EDX
0095b755 : LEA EDI,[EBP + -0x44]
0095b758 : CALL 0x0081d120
0095b75d : MOV byte ptr [EBP + -0x4],0x1
0095b761 : MOV EDX,dword ptr [ESI]
0095b763 : PUSH 0x3
0095b765 : PUSH EAX
0095b766 : MOV EAX,dword ptr [EDX + 0x44]
0095b769 : MOV ECX,ESI
0095b76b : CALL EAX
0095b76d : MOV byte ptr [EBP + -0x4],BL
0095b770 : LEA ECX,[EBP + -0x44]
0095b773 : CALL 0x00406560
0095b778 : MOV dword ptr [EBP + -0x4],0xffffffff
0095b77f : LEA ECX,[EBP + -0x28]
0095b782 : CALL 0x00406560
0095b787 : XOR AL,AL
0095b789 : MOV ECX,dword ptr [EBP + -0xc]
0095b78c : MOV dword ptr FS:[0x0],ECX
0095b793 : POP ECX
0095b794 : POP EDI
0095b795 : POP ESI
0095b796 : POP EBX
0095b797 : MOV ESP,EBP
0095b799 : POP EBP
0095b79a : RET 0x8
0095b79d : CMP byte ptr [EAX + 0x171],BL
0095b7a3 : JNZ 0x0095b8df
0095b7a9 : CMP dword ptr [0x0172491c],EBX
0095b7af : JZ 0x0095b787
0095b7b1 : MOV ECX,dword ptr [0x00da9894]
0095b7b7 : MOV EAX,dword ptr [ECX]
0095b7b9 : CMP EAX,EBX
0095b7bb : JZ 0x0095b787
0095b7bd : CMP dword ptr [EAX + 0x1a8],EBX
0095b7c3 : JZ 0x0095b787
0095b7c5 : PUSH 0xc77764
0095b7ca : LEA ECX,[EBP + -0x28]
0095b7cd : CALL 0x00406460
0095b7d2 : MOV EBX,0x2
0095b7d7 : MOV dword ptr [EBP + -0x4],EBX
0095b7da : MOV EDX,dword ptr [0x00da9894]
0095b7e0 : MOV EAX,dword ptr [EDX]
0095b7e2 : MOV ESI,dword ptr [EAX + 0x1a8]
0095b7e8 : MOV ECX,dword ptr [0x0172491c]
0095b7ee : LEA EAX,[EBP + -0x28]
0095b7f1 : PUSH EAX
0095b7f2 : LEA EDI,[EBP + -0x44]
0095b7f5 : CALL 0x0081d120
0095b7fa : MOV byte ptr [EBP + -0x4],0x3
0095b7fe : JMP 0x0095b761
0095b803 : CMP dword ptr [EAX + 0x11c],EBX
0095b809 : JNZ 0x0095b871
0095b80b : CMP dword ptr [0x0172491c],EBX
0095b811 : JZ 0x0095b787
0095b817 : MOV ECX,dword ptr [0x00da9894]
0095b81d : MOV EAX,dword ptr [ECX]
0095b81f : CMP EAX,EBX
0095b821 : JZ 0x0095b787
0095b827 : CMP dword ptr [EAX + 0x1a8],EBX
0095b82d : JZ 0x0095b787
0095b833 : PUSH 0xc7779c
0095b838 : LEA ECX,[EBP + -0x28]
0095b83b : CALL 0x00406460
0095b840 : MOV EBX,0x4
0095b845 : MOV dword ptr [EBP + -0x4],EBX
0095b848 : MOV EDX,dword ptr [0x00da9894]
0095b84e : MOV EAX,dword ptr [EDX]
0095b850 : MOV ESI,dword ptr [EAX + 0x1a8]
0095b856 : MOV ECX,dword ptr [0x0172491c]
0095b85c : LEA EAX,[EBP + -0x28]
0095b85f : PUSH EAX
0095b860 : LEA EDI,[EBP + -0x44]
0095b863 : CALL 0x0081d120
0095b868 : MOV byte ptr [EBP + -0x4],0x5
0095b86c : JMP 0x0095b761
0095b871 : CMP byte ptr [EAX + 0x172],BL
0095b877 : JNZ 0x0095b8df
0095b879 : CMP dword ptr [0x0172491c],EBX
0095b87f : JZ 0x0095b787
0095b885 : MOV ECX,dword ptr [0x00da9894]
0095b88b : MOV EAX,dword ptr [ECX]
0095b88d : CMP EAX,EBX
0095b88f : JZ 0x0095b787
0095b895 : CMP dword ptr [EAX + 0x1a8],EBX
0095b89b : JZ 0x0095b787
0095b8a1 : PUSH 0xc777d4
0095b8a6 : LEA ECX,[EBP + -0x28]
0095b8a9 : CALL 0x00406460
0095b8ae : MOV EBX,0x6
0095b8b3 : MOV dword ptr [EBP + -0x4],EBX
0095b8b6 : MOV EDX,dword ptr [0x00da9894]
0095b8bc : MOV EAX,dword ptr [EDX]
0095b8be : MOV ESI,dword ptr [EAX + 0x1a8]
0095b8c4 : MOV ECX,dword ptr [0x0172491c]
0095b8ca : LEA EAX,[EBP + -0x28]
0095b8cd : PUSH EAX
0095b8ce : LEA EDI,[EBP + -0x44]
0095b8d1 : CALL 0x0081d120
0095b8d6 : MOV byte ptr [EBP + -0x4],0x7
0095b8da : JMP 0x0095b761
0095b8df : MOV AL,0x1
0095b8e1 : MOV ECX,dword ptr [EBP + -0xc]
0095b8e4 : MOV dword ptr FS:[0x0],ECX
0095b8eb : POP ECX
0095b8ec : POP EDI
0095b8ed : POP ESI
0095b8ee : POP EBX
0095b8ef : MOV ESP,EBP
0095b8f1 : POP EBP
0095b8f2 : RET 0x8
