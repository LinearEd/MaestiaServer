PROGRAM  : Maestia.exe
FUNCTION : FUN_00599f40
ENTRY    : 00599f40
BODY     : [[00599f40, 00599fe7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00599f40(undefined4 *param_1,uint param_2)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  int *in_ECX;
  uint uVar4;
  uint uVar5;
  
  if (in_ECX[1] != 0) {
    iVar3 = FUN_00599300();
    if (iVar3 == in_ECX[1]) {
      iVar3 = iVar3 + -1;
    }
    piVar2 = *(int **)(*in_ECX + iVar3 * 4);
    uVar5 = piVar2[2];
    if ((*piVar2 < 0) && (uVar5 = uVar5 & 0xffffff, uVar5 == 0xffffff)) {
      uVar5 = 0xffffffff;
    }
    if (uVar5 <= param_2) {
      if (*piVar2 < 0) {
        uVar4 = (uint)*(byte *)((int)piVar2 + 0xb);
      }
      else {
        uVar4 = piVar2[8];
      }
      if (param_2 <= uVar4 + uVar5) {
        bVar1 = *(byte *)(in_ECX + 0x1d);
        param_1[3] = 0;
        param_1[2] = iVar3;
        *param_1 = in_ECX;
        param_1[1] = 0;
        *(byte *)(param_1 + 4) = bVar1 >> 2 & 1;
        return;
      }
    }
  }
  param_1[3] = 0;
  *param_1 = 0;
  param_1[2] = 0;
  *(undefined1 *)(param_1 + 4) = 0;
  param_1[1] = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00599f40 : PUSH EBX
00599f41 : PUSH EBP
00599f42 : PUSH ESI
00599f43 : MOV ESI,ECX
00599f45 : MOV EAX,dword ptr [ESI + 0x4]
00599f48 : XOR EBX,EBX
00599f4a : PUSH EDI
00599f4b : CMP EAX,EBX
00599f4d : JBE 0x00599fcd
00599f4f : PUSH 0x5990b0
00599f54 : LEA ECX,[ESP + 0x1c]
00599f58 : PUSH ECX
00599f59 : PUSH EAX
00599f5a : PUSH EBX
00599f5b : PUSH ESI
00599f5c : CALL 0x00599300
00599f61 : MOV EDI,EAX
00599f63 : ADD ESP,0x14
00599f66 : CMP EDI,dword ptr [ESI + 0x4]
00599f69 : JNZ 0x00599f6c
00599f6b : DEC EDI
00599f6c : MOV EDX,dword ptr [ESI]
00599f6e : MOV ECX,dword ptr [EDX + EDI*0x4]
00599f71 : MOV EAX,dword ptr [ECX]
00599f73 : MOV EDX,dword ptr [ECX + 0x8]
00599f76 : SHR EAX,0x1f
00599f79 : AND AL,0x1
00599f7b : JZ 0x00599f8e
00599f7d : AND EDX,0xffffff
00599f83 : CMP EDX,0xffffff
00599f89 : JNZ 0x00599f8e
00599f8b : OR EDX,0xffffffff
00599f8e : MOV EBP,dword ptr [ESP + 0x18]
00599f92 : CMP EBP,EDX
00599f94 : JC 0x00599fcd
00599f96 : CMP AL,BL
00599f98 : JZ 0x00599fa0
00599f9a : MOVZX ECX,byte ptr [ECX + 0xb]
00599f9e : JMP 0x00599fa3
00599fa0 : MOV ECX,dword ptr [ECX + 0x20]
00599fa3 : ADD ECX,EDX
00599fa5 : CMP EBP,ECX
00599fa7 : JA 0x00599fcd
00599fa9 : MOV EAX,dword ptr [ESP + 0x14]
00599fad : FLDZ
00599faf : MOV CL,byte ptr [ESI + 0x74]
00599fb2 : FSTP float ptr [EAX + 0xc]
00599fb5 : MOV dword ptr [EAX + 0x8],EDI
00599fb8 : POP EDI
00599fb9 : MOV dword ptr [EAX],ESI
00599fbb : POP ESI
00599fbc : SHR CL,0x2
00599fbf : AND CL,0x1
00599fc2 : POP EBP
00599fc3 : MOV dword ptr [EAX + 0x4],EBX
00599fc6 : MOV byte ptr [EAX + 0x10],CL
00599fc9 : POP EBX
00599fca : RET 0x8
00599fcd : MOV EAX,dword ptr [ESP + 0x14]
00599fd1 : FLDZ
00599fd3 : POP EDI
00599fd4 : FSTP float ptr [EAX + 0xc]
00599fd7 : POP ESI
00599fd8 : POP EBP
00599fd9 : MOV dword ptr [EAX],EBX
00599fdb : MOV dword ptr [EAX + 0x8],EBX
00599fde : MOV byte ptr [EAX + 0x10],BL
00599fe1 : MOV dword ptr [EAX + 0x4],EBX
00599fe4 : POP EBX
00599fe5 : RET 0x8
