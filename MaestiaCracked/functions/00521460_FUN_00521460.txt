PROGRAM  : Maestia.exe
FUNCTION : FUN_00521460
ENTRY    : 00521460
BODY     : [[00521460, 005214a1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00521460(int *param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int in_ECX;
  
  FUN_00520d40(param_1);
  iVar3 = *(int *)(in_ECX + 0x80);
  if ((iVar3 == 0) && (iVar3 = FUN_00520df0(), iVar3 == 0)) {
    return;
  }
  iVar2 = *param_1;
  piVar1 = (int *)(iVar2 + 8);
  *piVar1 = *piVar1 + 1;
  piVar1 = (int *)(*(int *)(iVar3 + 0x10) + 8);
  *piVar1 = *piVar1 + -1;
  if (*piVar1 == 0) {
    FUN_00525340();
  }
  *(int *)(iVar3 + 0x10) = iVar2;
  return;
}



============================================================
DISASSEMBLY
============================================================
00521460 : PUSH EBX
00521461 : MOV EBX,dword ptr [ESP + 0x8]
00521465 : PUSH ESI
00521466 : PUSH EDI
00521467 : PUSH EBX
00521468 : MOV ESI,ECX
0052146a : CALL 0x00520d40
0052146f : MOV EDI,dword ptr [ESI + 0x80]
00521475 : TEST EDI,EDI
00521477 : JNZ 0x00521486
00521479 : MOV ECX,ESI
0052147b : CALL 0x00520df0
00521480 : MOV EDI,EAX
00521482 : TEST EDI,EDI
00521484 : JZ 0x0052149c
00521486 : MOV ESI,dword ptr [EBX]
00521488 : INC dword ptr [ESI + 0x8]
0052148b : MOV ECX,dword ptr [EDI + 0x10]
0052148e : ADD dword ptr [ECX + 0x8],-0x1
00521492 : JNZ 0x00521499
00521494 : CALL 0x00525340
00521499 : MOV dword ptr [EDI + 0x10],ESI
0052149c : POP EDI
0052149d : POP ESI
0052149e : POP EBX
0052149f : RET 0x4
