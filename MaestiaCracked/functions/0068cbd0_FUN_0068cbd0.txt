PROGRAM  : Maestia.exe
FUNCTION : FUN_0068cbd0
ENTRY    : 0068cbd0
BODY     : [[0068cbd0, 0068cf88]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0068cbd0(int *param_1,char *param_2)

{
  char cVar1;
  undefined *puVar2;
  int *piVar3;
  int *piVar4;
  int in_EAX;
  int iVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  undefined **ppuVar8;
  char *pcVar9;
  int *piVar10;
  uint uVar11;
  int *piVar12;
  int iVar13;
  int iVar14;
  int local_8;
  undefined4 local_4;
  
  local_4 = *(undefined4 *)(in_EAX + 0x4088);
  local_8 = 0;
  iVar5 = FUN_0068bf10();
  uVar6 = local_4;
  if (iVar5 != 0) {
    iVar13 = *(int *)(iVar5 + 4) * 0x10 + *(int *)(in_EAX + 0x50);
    iVar5 = *(int *)(iVar13 + 4);
    if (iVar5 == 1) {
      FUN_00687f30(local_4,*(undefined4 *)(iVar13 + 0xc));
      *(undefined4 *)(iVar13 + 0xc) = 0;
      if (param_2 == (char *)0x0) {
        return local_8;
      }
      if (*param_2 == '\0') {
        return local_8;
      }
      uVar6 = FUN_00687fb0(uVar6,param_2,&local_8);
      *(undefined4 *)(iVar13 + 0xc) = uVar6;
      return local_8;
    }
    if (iVar5 == 2) {
      uVar6 = FUN_0068c5a0(0);
      *(undefined4 *)(iVar13 + 0xc) = uVar6;
      return local_8;
    }
    if (iVar5 != 3) {
      return local_8;
    }
    uVar6 = FUN_0068c4e0(0);
    *(undefined4 *)(iVar13 + 0xc) = uVar6;
    return local_8;
  }
  iVar5 = FUN_0068bf10();
  if (iVar5 == 0) {
    local_8 = FUN_0068c790(param_1,1);
    if (local_8 != 0) {
      return local_8;
    }
    iVar5 = FUN_0068bf10();
  }
  iVar13 = *(int *)(in_EAX + 0x48);
  if (*(int *)(in_EAX + 0x4c) == iVar13) {
    if (iVar13 == 0) {
      uVar6 = 0;
      iVar14 = 1;
      iVar13 = 0;
    }
    else {
      uVar6 = *(undefined4 *)(in_EAX + 0x50);
      iVar14 = iVar13 + 1;
    }
    uVar6 = FUN_0068a220(local_4,0x10,iVar13,iVar14,uVar6,&local_8);
    *(undefined4 *)(in_EAX + 0x50) = uVar6;
    if (local_8 != 0) {
      return local_8;
    }
    puVar7 = (undefined4 *)(*(int *)(in_EAX + 0x48) * 0x10 + *(int *)(in_EAX + 0x50));
    *puVar7 = 0;
    puVar7[1] = 0;
    puVar7[2] = 0;
    puVar7[3] = 0;
    *(int *)(in_EAX + 0x48) = *(int *)(in_EAX + 0x48) + 1;
  }
  uVar11 = *(uint *)(iVar5 + 4);
  if (uVar11 < 0x53) {
    ppuVar8 = &PTR_s_ADD_STYLE_NAME_00bd8ad8 + uVar11 * 4;
  }
  else {
    ppuVar8 = (undefined **)((uVar11 - 0x53) * 0x10 + *(int *)(in_EAX + 0x408c));
  }
  puVar7 = (undefined4 *)(*(int *)(in_EAX + 0x4c) * 0x10 + *(int *)(in_EAX + 0x50));
  *puVar7 = *ppuVar8;
  puVar7[1] = ppuVar8[1];
  puVar7[2] = ppuVar8[2];
  puVar2 = ppuVar8[1];
  if (puVar2 == (undefined *)0x1) {
    puVar7[3] = 0;
    if ((param_2 != (char *)0x0) && (*param_2 != '\0')) {
      uVar6 = FUN_00687fb0(local_4,param_2,&local_8);
      puVar7[3] = uVar6;
      if (local_8 != 0) {
        return local_8;
      }
    }
  }
  else if (puVar2 == (undefined *)0x2) {
    uVar6 = FUN_0068c5a0(0);
    puVar7[3] = uVar6;
  }
  else if (puVar2 == (undefined *)0x3) {
    uVar6 = FUN_0068c4e0(0);
    puVar7[3] = uVar6;
  }
  if (((((*param_1 != 0x4d4d4f43) || ((char)param_1[1] != 'E')) ||
       (*(char *)((int)param_1 + 5) != 'N')) || (*(char *)((int)param_1 + 6) != 'T')) &&
     (local_8 = FUN_0068be80(*(undefined4 *)(in_EAX + 0x4c),local_4), local_8 != 0)) {
    return local_8;
  }
  *(int *)(in_EAX + 0x4c) = *(int *)(in_EAX + 0x4c) + 1;
  pcVar9 = "DEFAULT_CHAR";
  uVar11 = 0xc;
  while (*(int *)((int)(param_1 + -0x2f6284) + (int)pcVar9) == *(int *)pcVar9) {
    uVar11 = uVar11 - 4;
    pcVar9 = (char *)((int)pcVar9 + 4);
    if (uVar11 < 4) {
      *(undefined4 *)(in_EAX + 0x24) = puVar7[3];
      return local_8;
    }
  }
  uVar11 = 0xb;
  piVar3 = (int *)"FONT_ASCENT";
  piVar4 = param_1;
  do {
    piVar12 = piVar4;
    piVar10 = piVar3;
    if (*piVar12 != *piVar10) goto LAB_0068cebc;
    uVar11 = uVar11 - 4;
    piVar3 = piVar10 + 1;
    piVar4 = piVar12 + 1;
  } while (3 < uVar11);
  if ((((char)piVar10[1] == (char)piVar12[1]) &&
      (*(char *)((int)piVar10 + 5) == *(char *)((int)piVar12 + 5))) &&
     (*(char *)((int)piVar10 + 6) == *(char *)((int)piVar12 + 6))) {
    *(undefined4 *)(in_EAX + 0x28) = puVar7[3];
    return local_8;
  }
LAB_0068cebc:
  pcVar9 = "FONT_DESCENT";
  uVar11 = 0xc;
  while (*(int *)((int)(param_1 + -0x2f6263) + (int)pcVar9) == *(int *)pcVar9) {
    uVar11 = uVar11 - 4;
    pcVar9 = (char *)((int)pcVar9 + 4);
    if (uVar11 < 4) {
      *(undefined4 *)(in_EAX + 0x2c) = puVar7[3];
      return local_8;
    }
  }
  if (((*param_1 == 0x43415053) && ((char)param_1[1] == 'I')) &&
     ((*(char *)((int)param_1 + 5) == 'N' && (*(char *)((int)param_1 + 6) == 'G')))) {
    cVar1 = *(char *)puVar7[3];
    if ((cVar1 == 'p') || (cVar1 == 'P')) {
      *(undefined4 *)(in_EAX + 0x1c) = 8;
      return local_8;
    }
    if ((cVar1 == 'm') || (cVar1 == 'M')) {
      *(undefined4 *)(in_EAX + 0x1c) = 0x10;
      return local_8;
    }
    if ((cVar1 == 'c') || (cVar1 == 'C')) {
      *(undefined4 *)(in_EAX + 0x1c) = 0x20;
      return local_8;
    }
  }
  return local_8;
}



============================================================
DISASSEMBLY
============================================================
0068cbd0 : SUB ESP,0x8
0068cbd3 : PUSH EBX
0068cbd4 : MOV EBX,dword ptr [ESP + 0x10]
0068cbd8 : PUSH EBP
0068cbd9 : MOV EBP,dword ptr [ESP + 0x18]
0068cbdd : PUSH ESI
0068cbde : PUSH EDI
0068cbdf : MOV EDI,EAX
0068cbe1 : MOV EAX,dword ptr [EDI + 0x4088]
0068cbe7 : MOV dword ptr [ESP + 0x14],EAX
0068cbeb : MOV EAX,dword ptr [EDI + 0x80]
0068cbf1 : MOV dword ptr [ESP + 0x10],0x0
0068cbf9 : CALL 0x0068bf10
0068cbfe : TEST EAX,EAX
0068cc00 : JZ 0x0068ccac
0068cc06 : MOV ESI,dword ptr [EAX + 0x4]
0068cc09 : SHL ESI,0x4
0068cc0c : ADD ESI,dword ptr [EDI + 0x50]
0068cc0f : MOV EAX,dword ptr [ESI + 0x4]
0068cc12 : SUB EAX,0x1
0068cc15 : JZ 0x0068cc64
0068cc17 : SUB EAX,0x1
0068cc1a : JZ 0x0068cc44
0068cc1c : SUB EAX,0x1
0068cc1f : JNZ 0x0068ce68
0068cc25 : PUSH EAX
0068cc26 : MOV EAX,0xa
0068cc2b : MOV ECX,EBP
0068cc2d : CALL 0x0068c4e0
0068cc32 : ADD ESP,0x4
0068cc35 : POP EDI
0068cc36 : MOV dword ptr [ESI + 0xc],EAX
0068cc39 : MOV EAX,dword ptr [ESP + 0xc]
0068cc3d : POP ESI
0068cc3e : POP EBP
0068cc3f : POP EBX
0068cc40 : ADD ESP,0x8
0068cc43 : RET
0068cc44 : PUSH 0x0
0068cc46 : MOV EDX,0xa
0068cc4b : MOV EAX,EBP
0068cc4d : CALL 0x0068c5a0
0068cc52 : ADD ESP,0x4
0068cc55 : POP EDI
0068cc56 : MOV dword ptr [ESI + 0xc],EAX
0068cc59 : MOV EAX,dword ptr [ESP + 0xc]
0068cc5d : POP ESI
0068cc5e : POP EBP
0068cc5f : POP EBX
0068cc60 : ADD ESP,0x8
0068cc63 : RET
0068cc64 : MOV ECX,dword ptr [ESI + 0xc]
0068cc67 : MOV EDI,dword ptr [ESP + 0x14]
0068cc6b : PUSH ECX
0068cc6c : PUSH EDI
0068cc6d : CALL 0x00687f30
0068cc72 : ADD ESP,0x8
0068cc75 : MOV dword ptr [ESI + 0xc],0x0
0068cc7c : TEST EBP,EBP
0068cc7e : JZ 0x0068ce68
0068cc84 : CMP byte ptr [EBP],0x0
0068cc88 : JZ 0x0068ce68
0068cc8e : LEA EDX,[ESP + 0x10]
0068cc92 : PUSH EDX
0068cc93 : PUSH EBP
0068cc94 : PUSH EDI
0068cc95 : CALL 0x00687fb0
0068cc9a : ADD ESP,0xc
0068cc9d : POP EDI
0068cc9e : MOV dword ptr [ESI + 0xc],EAX
0068cca1 : MOV EAX,dword ptr [ESP + 0xc]
0068cca5 : POP ESI
0068cca6 : POP EBP
0068cca7 : POP EBX
0068cca8 : ADD ESP,0x8
0068ccab : RET
0068ccac : LEA ESI,[EDI + 0x4094]
0068ccb2 : MOV EAX,ESI
0068ccb4 : CALL 0x0068bf10
0068ccb9 : MOV EBX,EAX
0068ccbb : TEST EBX,EBX
0068ccbd : JNZ 0x0068cce3
0068ccbf : MOV EBX,dword ptr [ESP + 0x1c]
0068ccc3 : PUSH 0x1
0068ccc5 : PUSH EBX
0068ccc6 : CALL 0x0068c790
0068cccb : ADD ESP,0x8
0068ccce : MOV dword ptr [ESP + 0x10],EAX
0068ccd2 : TEST EAX,EAX
0068ccd4 : JNZ 0x0068ce68
0068ccda : MOV EAX,ESI
0068ccdc : CALL 0x0068bf10
0068cce1 : MOV EBX,EAX
0068cce3 : MOV EAX,dword ptr [EDI + 0x48]
0068cce6 : CMP dword ptr [EDI + 0x4c],EAX
0068cce9 : JNZ 0x0068cd47
0068cceb : TEST EAX,EAX
0068cced : JNZ 0x0068cd03
0068ccef : MOV ECX,dword ptr [ESP + 0x14]
0068ccf3 : LEA EAX,[ESP + 0x10]
0068ccf7 : PUSH EAX
0068ccf8 : PUSH 0x0
0068ccfa : PUSH 0x1
0068ccfc : PUSH 0x0
0068ccfe : PUSH 0x10
0068cd00 : PUSH ECX
0068cd01 : JMP 0x0068cd18
0068cd03 : MOV ECX,dword ptr [EDI + 0x50]
0068cd06 : LEA EDX,[ESP + 0x10]
0068cd0a : PUSH EDX
0068cd0b : PUSH ECX
0068cd0c : LEA EDX,[EAX + 0x1]
0068cd0f : PUSH EDX
0068cd10 : PUSH EAX
0068cd11 : MOV EAX,dword ptr [ESP + 0x24]
0068cd15 : PUSH 0x10
0068cd17 : PUSH EAX
0068cd18 : CALL 0x0068a220
0068cd1d : ADD ESP,0x18
0068cd20 : CMP dword ptr [ESP + 0x10],0x0
0068cd25 : MOV dword ptr [EDI + 0x50],EAX
0068cd28 : JNZ 0x0068ce68
0068cd2e : MOV EAX,dword ptr [EDI + 0x48]
0068cd31 : XOR ECX,ECX
0068cd33 : SHL EAX,0x4
0068cd36 : ADD EAX,dword ptr [EDI + 0x50]
0068cd39 : MOV dword ptr [EAX],ECX
0068cd3b : MOV dword ptr [EAX + 0x4],ECX
0068cd3e : MOV dword ptr [EAX + 0x8],ECX
0068cd41 : MOV dword ptr [EAX + 0xc],ECX
0068cd44 : INC dword ptr [EDI + 0x48]
0068cd47 : MOV EAX,dword ptr [EBX + 0x4]
0068cd4a : CMP EAX,0x53
0068cd4d : JC 0x0068cd5d
0068cd4f : ADD EAX,-0x53
0068cd52 : SHL EAX,0x4
0068cd55 : ADD EAX,dword ptr [EDI + 0x408c]
0068cd5b : JMP 0x0068cd65
0068cd5d : SHL EAX,0x4
0068cd60 : ADD EAX,0xbd8ad8
0068cd65 : MOV ESI,dword ptr [EDI + 0x4c]
0068cd68 : MOV ECX,dword ptr [EAX]
0068cd6a : SHL ESI,0x4
0068cd6d : ADD ESI,dword ptr [EDI + 0x50]
0068cd70 : MOV dword ptr [ESI],ECX
0068cd72 : MOV EDX,dword ptr [EAX + 0x4]
0068cd75 : MOV dword ptr [ESI + 0x4],EDX
0068cd78 : MOV ECX,dword ptr [EAX + 0x8]
0068cd7b : MOV dword ptr [ESI + 0x8],ECX
0068cd7e : MOV EAX,dword ptr [EAX + 0x4]
0068cd81 : SUB EAX,0x1
0068cd84 : JZ 0x0068cdbb
0068cd86 : SUB EAX,0x1
0068cd89 : JZ 0x0068cda5
0068cd8b : SUB EAX,0x1
0068cd8e : JNZ 0x0068cde9
0068cd90 : PUSH EAX
0068cd91 : MOV EAX,0xa
0068cd96 : MOV ECX,EBP
0068cd98 : CALL 0x0068c4e0
0068cd9d : ADD ESP,0x4
0068cda0 : MOV dword ptr [ESI + 0xc],EAX
0068cda3 : JMP 0x0068cde9
0068cda5 : PUSH 0x0
0068cda7 : MOV EDX,0xa
0068cdac : MOV EAX,EBP
0068cdae : CALL 0x0068c5a0
0068cdb3 : ADD ESP,0x4
0068cdb6 : MOV dword ptr [ESI + 0xc],EAX
0068cdb9 : JMP 0x0068cde9
0068cdbb : MOV dword ptr [ESI + 0xc],0x0
0068cdc2 : TEST EBP,EBP
0068cdc4 : JZ 0x0068cde9
0068cdc6 : CMP byte ptr [EBP],0x0
0068cdca : JZ 0x0068cde9
0068cdcc : MOV EAX,dword ptr [ESP + 0x14]
0068cdd0 : LEA EDX,[ESP + 0x10]
0068cdd4 : PUSH EDX
0068cdd5 : PUSH EBP
0068cdd6 : PUSH EAX
0068cdd7 : CALL 0x00687fb0
0068cddc : ADD ESP,0xc
0068cddf : MOV dword ptr [ESI + 0xc],EAX
0068cde2 : CMP dword ptr [ESP + 0x10],0x0
0068cde7 : JNZ 0x0068ce68
0068cde9 : MOV EBP,dword ptr [ESP + 0x1c]
0068cded : MOV ECX,dword ptr [EBP]
0068cdf0 : CMP ECX,dword ptr [0x00bd8a2c]
0068cdf6 : JNZ 0x0068ce18
0068cdf8 : MOV DL,byte ptr [0x00bd8a30]
0068cdfe : CMP DL,byte ptr [EBP + 0x4]
0068ce01 : JNZ 0x0068ce18
0068ce03 : MOV AL,[0x00bd8a31]
0068ce08 : CMP AL,byte ptr [EBP + 0x5]
0068ce0b : JNZ 0x0068ce18
0068ce0d : MOV CL,byte ptr [0x00bd8a32]
0068ce13 : CMP CL,byte ptr [EBP + 0x6]
0068ce16 : JZ 0x0068ce39
0068ce18 : MOV EDX,dword ptr [ESP + 0x14]
0068ce1c : MOV EAX,dword ptr [EDI + 0x4c]
0068ce1f : MOV ECX,dword ptr [ESI]
0068ce21 : PUSH EDX
0068ce22 : PUSH EAX
0068ce23 : MOV EAX,dword ptr [EDI + 0x80]
0068ce29 : CALL 0x0068be80
0068ce2e : ADD ESP,0x8
0068ce31 : MOV dword ptr [ESP + 0x10],EAX
0068ce35 : TEST EAX,EAX
0068ce37 : JNZ 0x0068ce68
0068ce39 : INC dword ptr [EDI + 0x4c]
0068ce3c : MOV EAX,0xbd8a10
0068ce41 : MOV EDX,EBP
0068ce43 : MOV ECX,0xc
0068ce48 : SUB EDX,EAX
0068ce4a : LEA EBX,[EBX]
0068ce50 : MOV EBX,dword ptr [EDX + EAX*0x1]
0068ce53 : CMP EBX,dword ptr [EAX]
0068ce55 : JNZ 0x0068ce74
0068ce57 : SUB ECX,0x4
0068ce5a : ADD EAX,0x4
0068ce5d : CMP ECX,0x4
0068ce60 : JNC 0x0068ce50
0068ce62 : MOV EDX,dword ptr [ESI + 0xc]
0068ce65 : MOV dword ptr [EDI + 0x24],EDX
0068ce68 : MOV EAX,dword ptr [ESP + 0x10]
0068ce6c : POP EDI
0068ce6d : POP ESI
0068ce6e : POP EBP
0068ce6f : POP EBX
0068ce70 : ADD ESP,0x8
0068ce73 : RET
0068ce74 : MOV EDX,0xb
0068ce79 : MOV EAX,0xbd899c
0068ce7e : MOV ECX,EBP
0068ce80 : MOV EBX,dword ptr [ECX]
0068ce82 : CMP EBX,dword ptr [EAX]
0068ce84 : JNZ 0x0068cebc
0068ce86 : SUB EDX,0x4
0068ce89 : ADD EAX,0x4
0068ce8c : ADD ECX,0x4
0068ce8f : CMP EDX,0x4
0068ce92 : JNC 0x0068ce80
0068ce94 : MOV DL,byte ptr [EAX]
0068ce96 : CMP DL,byte ptr [ECX]
0068ce98 : JNZ 0x0068cebc
0068ce9a : MOV DL,byte ptr [EAX + 0x1]
0068ce9d : CMP DL,byte ptr [ECX + 0x1]
0068cea0 : JNZ 0x0068cebc
0068cea2 : MOV AL,byte ptr [EAX + 0x2]
0068cea5 : CMP AL,byte ptr [ECX + 0x2]
0068cea8 : JNZ 0x0068cebc
0068ceaa : MOV ECX,dword ptr [ESI + 0xc]
0068cead : MOV EAX,dword ptr [ESP + 0x10]
0068ceb1 : MOV dword ptr [EDI + 0x28],ECX
0068ceb4 : POP EDI
0068ceb5 : POP ESI
0068ceb6 : POP EBP
0068ceb7 : POP EBX
0068ceb8 : ADD ESP,0x8
0068cebb : RET
0068cebc : MOV EAX,0xbd898c
0068cec1 : MOV EDX,EBP
0068cec3 : MOV ECX,0xc
0068cec8 : SUB EDX,EAX
0068ceca : LEA EBX,[EBX]
0068ced0 : MOV EBX,dword ptr [EDX + EAX*0x1]
0068ced3 : CMP EBX,dword ptr [EAX]
0068ced5 : JNZ 0x0068cef4
0068ced7 : SUB ECX,0x4
0068ceda : ADD EAX,0x4
0068cedd : CMP ECX,0x4
0068cee0 : JNC 0x0068ced0
0068cee2 : MOV ECX,dword ptr [ESI + 0xc]
0068cee5 : MOV EAX,dword ptr [ESP + 0x10]
0068cee9 : MOV dword ptr [EDI + 0x2c],ECX
0068ceec : POP EDI
0068ceed : POP ESI
0068ceee : POP EBP
0068ceef : POP EBX
0068cef0 : ADD ESP,0x8
0068cef3 : RET
0068cef4 : MOV EDX,dword ptr [EBP]
0068cef7 : CMP EDX,dword ptr [0x00bd8690]
0068cefd : JNZ 0x0068ce68
0068cf03 : MOV AL,[0x00bd8694]
0068cf08 : CMP AL,byte ptr [EBP + 0x4]
0068cf0b : JNZ 0x0068ce68
0068cf11 : MOV CL,byte ptr [0x00bd8695]
0068cf17 : CMP CL,byte ptr [EBP + 0x5]
0068cf1a : JNZ 0x0068ce68
0068cf20 : MOV DL,byte ptr [0x00bd8696]
0068cf26 : CMP DL,byte ptr [EBP + 0x6]
0068cf29 : JNZ 0x0068ce68
0068cf2f : MOV EAX,dword ptr [ESI + 0xc]
0068cf32 : MOV AL,byte ptr [EAX]
0068cf34 : CMP AL,0x70
0068cf36 : JZ 0x0068cf76
0068cf38 : CMP AL,0x50
0068cf3a : JZ 0x0068cf76
0068cf3c : CMP AL,0x6d
0068cf3e : JZ 0x0068cf63
0068cf40 : CMP AL,0x4d
0068cf42 : JZ 0x0068cf63
0068cf44 : CMP AL,0x63
0068cf46 : JZ 0x0068cf50
0068cf48 : CMP AL,0x43
0068cf4a : JNZ 0x0068ce68
0068cf50 : MOV EAX,dword ptr [ESP + 0x10]
0068cf54 : MOV dword ptr [EDI + 0x1c],0x20
0068cf5b : POP EDI
0068cf5c : POP ESI
0068cf5d : POP EBP
0068cf5e : POP EBX
0068cf5f : ADD ESP,0x8
0068cf62 : RET
0068cf63 : MOV EAX,dword ptr [ESP + 0x10]
0068cf67 : MOV dword ptr [EDI + 0x1c],0x10
0068cf6e : POP EDI
0068cf6f : POP ESI
0068cf70 : POP EBP
0068cf71 : POP EBX
0068cf72 : ADD ESP,0x8
0068cf75 : RET
0068cf76 : MOV EAX,dword ptr [ESP + 0x10]
0068cf7a : MOV dword ptr [EDI + 0x1c],0x8
0068cf81 : POP EDI
0068cf82 : POP ESI
0068cf83 : POP EBP
0068cf84 : POP EBX
0068cf85 : ADD ESP,0x8
0068cf88 : RET
