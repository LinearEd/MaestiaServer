PROGRAM  : Maestia.exe
FUNCTION : FUN_0058f490
ENTRY    : 0058f490
BODY     : [[0058f490, 0058f5e2]]

============================================================
DECOMPILED C CODE
============================================================

char FUN_0058f490(uint *param_1)

{
  char cVar1;
  char cVar2;
  int iVar3;
  uint uVar4;
  int *in_ECX;
  
  if (*param_1 == 0x40) {
    cVar1 = (**(code **)(*in_ECX + 0x6c))(param_1);
    if ((*param_1 & 1) == 0) {
      iVar3 = FUN_00529930();
      if (iVar3 != 0) {
        cVar1 = (**(code **)(*in_ECX + 0x6c))(&stack0xffffffec);
        if (cVar1 != '\0') {
          *param_1 = *param_1 | 1;
        }
      }
    }
    iVar3 = (**(code **)(*in_ECX + 0x40))();
    cVar2 = FUN_0050c880(in_ECX);
    if ((cVar2 != '\0') && ((*(byte *)(iVar3 + 0xb02) & 1) != 0)) {
      if (((short)param_1[2] == 0xd) || ((short)param_1[2] == 0x20)) {
        cVar2 = (**(code **)(*in_ECX + 0xb8))();
        if ((cVar2 != '\0') ||
           ((uVar4 = *(uint *)(iVar3 + 0xb00) >> 0x1a & 3, uVar4 != 3 && (uVar4 == 1)))) {
          (**(code **)(*in_ECX + 0x6c))(&stack0xffffffec);
          (**(code **)(*in_ECX + 0x6c))(&stack0xffffffe8);
        }
      }
    }
    return cVar1;
  }
  cVar1 = (**(code **)(*in_ECX + 0x6c))(param_1);
  return cVar1;
}



============================================================
DISASSEMBLY
============================================================
0058f490 : SUB ESP,0x10
0058f493 : PUSH ESI
0058f494 : PUSH EDI
0058f495 : MOV EDI,dword ptr [ESP + 0x1c]
0058f499 : CMP dword ptr [EDI],0x40
0058f49c : MOV ESI,ECX
0058f49e : MOV EAX,dword ptr [ESI]
0058f4a0 : MOV EDX,dword ptr [EAX + 0x6c]
0058f4a3 : JNZ 0x0058f5d8
0058f4a9 : PUSH EBX
0058f4aa : PUSH EBP
0058f4ab : PUSH EDI
0058f4ac : CALL EDX
0058f4ae : MOV EBP,dword ptr [ESP + 0x28]
0058f4b2 : XOR EBX,EBX
0058f4b4 : TEST byte ptr [EBP],0x1
0058f4b8 : MOV byte ptr [ESP + 0x24],AL
0058f4bc : JNZ 0x0058f504
0058f4be : MOV ECX,EDI
0058f4c0 : CALL 0x00529930
0058f4c5 : CMP EAX,EBX
0058f4c7 : JZ 0x0058f504
0058f4c9 : MOV word ptr [ESP + 0x18],AX
0058f4ce : MOV EAX,dword ptr [ESI]
0058f4d0 : MOV EDX,dword ptr [EAX + 0x6c]
0058f4d3 : LEA ECX,[ESP + 0x10]
0058f4d7 : PUSH ECX
0058f4d8 : MOV ECX,ESI
0058f4da : MOV dword ptr [ESP + 0x14],0x20000
0058f4e2 : MOV dword ptr [ESP + 0x18],EBX
0058f4e6 : MOV byte ptr [ESP + 0x1e],BL
0058f4ea : MOV byte ptr [ESP + 0x1f],BL
0058f4ee : MOV byte ptr [ESP + 0x20],BL
0058f4f2 : MOV byte ptr [ESP + 0x21],BL
0058f4f6 : CALL EDX
0058f4f8 : MOV byte ptr [ESP + 0x24],AL
0058f4fc : CMP AL,BL
0058f4fe : JZ 0x0058f504
0058f500 : OR dword ptr [EBP],0x1
0058f504 : MOV EAX,dword ptr [ESI]
0058f506 : MOV EDX,dword ptr [EAX + 0x40]
0058f509 : MOV ECX,ESI
0058f50b : CALL EDX
0058f50d : MOV EBP,EAX
0058f50f : PUSH ESI
0058f510 : MOV ECX,EBP
0058f512 : CALL 0x0050c880
0058f517 : TEST AL,AL
0058f519 : JZ 0x0058f5ca
0058f51f : TEST byte ptr [EBP + 0xb02],0x1
0058f526 : JZ 0x0058f5ca
0058f52c : MOVZX EAX,word ptr [EDI + 0x8]
0058f530 : CMP AX,0xd
0058f534 : JZ 0x0058f540
0058f536 : CMP AX,0x20
0058f53a : JNZ 0x0058f5ca
0058f540 : MOV EAX,dword ptr [ESI]
0058f542 : MOV EDX,dword ptr [EAX + 0xb8]
0058f548 : MOV ECX,ESI
0058f54a : CALL EDX
0058f54c : TEST AL,AL
0058f54e : JNZ 0x0058f566
0058f550 : MOV EAX,dword ptr [EBP + 0xb00]
0058f556 : SHR EAX,0x1a
0058f559 : AND EAX,0x3
0058f55c : CMP EAX,0x3
0058f55f : JZ 0x0058f5ca
0058f561 : CMP EAX,0x1
0058f564 : JNZ 0x0058f5ca
0058f566 : MOV EDX,dword ptr [ESI]
0058f568 : MOV EDX,dword ptr [EDX + 0x6c]
0058f56b : XOR EAX,EAX
0058f56d : MOV word ptr [ESP + 0x18],AX
0058f572 : LEA EAX,[ESP + 0x10]
0058f576 : PUSH EAX
0058f577 : MOV ECX,ESI
0058f579 : MOV dword ptr [ESP + 0x14],0x400
0058f581 : MOV dword ptr [ESP + 0x18],EBX
0058f585 : MOV byte ptr [ESP + 0x1e],BL
0058f589 : MOV byte ptr [ESP + 0x1f],0xff
0058f58e : MOV byte ptr [ESP + 0x20],BL
0058f592 : MOV byte ptr [ESP + 0x21],BL
0058f596 : CALL EDX
0058f598 : MOV EDX,dword ptr [ESI]
0058f59a : MOV EDX,dword ptr [EDX + 0x6c]
0058f59d : XOR EAX,EAX
0058f59f : MOV word ptr [ESP + 0x18],AX
0058f5a4 : LEA EAX,[ESP + 0x10]
0058f5a8 : PUSH EAX
0058f5a9 : MOV ECX,ESI
0058f5ab : MOV dword ptr [ESP + 0x14],0x800
0058f5b3 : MOV dword ptr [ESP + 0x18],EBX
0058f5b7 : MOV byte ptr [ESP + 0x1e],BL
0058f5bb : MOV byte ptr [ESP + 0x1f],0xff
0058f5c0 : MOV byte ptr [ESP + 0x20],BL
0058f5c4 : MOV byte ptr [ESP + 0x21],BL
0058f5c8 : CALL EDX
0058f5ca : MOV AL,byte ptr [ESP + 0x24]
0058f5ce : POP EBP
0058f5cf : POP EBX
0058f5d0 : POP EDI
0058f5d1 : POP ESI
0058f5d2 : ADD ESP,0x10
0058f5d5 : RET 0x8
0058f5d8 : PUSH EDI
0058f5d9 : CALL EDX
0058f5db : POP EDI
0058f5dc : POP ESI
0058f5dd : ADD ESP,0x10
0058f5e0 : RET 0x8
