PROGRAM  : Maestia.exe
FUNCTION : FUN_0055d7a0
ENTRY    : 0055d7a0
BODY     : [[0055d7a0, 0055d809]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055d7a0(void)

{
  int *piVar1;
  uint uVar2;
  LONG LVar3;
  GRefCountImplCore *in_ECX;
  
  *(undefined ***)in_ECX = &PTR_FUN_00b8c870;
  piVar1 = *(int **)(in_ECX + 0x28);
  if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
    FUN_00500860();
    FUN_00515cf0(piVar1);
  }
  uVar2 = *(uint *)(in_ECX + 0x1c);
  LVar3 = InterlockedExchangeAdd((LONG *)((uVar2 & 0xfffffffc) + 4),-1);
  if (LVar3 == 1) {
    FUN_00515cf0(uVar2 & 0xfffffffc);
  }
  piVar1 = *(int **)(in_ECX + 0x18);
  if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
    FUN_00500860();
    FUN_00515cf0(piVar1);
  }
  FUN_005a2e40();
  GRefCountImplCore::~GRefCountImplCore(in_ECX);
  return;
}



============================================================
DISASSEMBLY
============================================================
0055d7a0 : PUSH ESI
0055d7a1 : MOV ESI,ECX
0055d7a3 : PUSH EDI
0055d7a4 : MOV dword ptr [ESI],0xb8c870
0055d7aa : MOV EDI,dword ptr [ESI + 0x28]
0055d7ad : TEST EDI,EDI
0055d7af : JZ 0x0055d7c3
0055d7b1 : ADD dword ptr [EDI],-0x1
0055d7b4 : JNZ 0x0055d7c3
0055d7b6 : MOV ECX,EDI
0055d7b8 : CALL 0x00500860
0055d7bd : PUSH EDI
0055d7be : CALL 0x00515cf0
0055d7c3 : MOV EDI,dword ptr [ESI + 0x1c]
0055d7c6 : AND EDI,0xfffffffc
0055d7c9 : PUSH -0x1
0055d7cb : LEA EAX,[EDI + 0x4]
0055d7ce : PUSH EAX
0055d7cf : CALL dword ptr [0x00b851cc]
0055d7d5 : SUB EAX,0x1
0055d7d8 : JNZ 0x0055d7e0
0055d7da : PUSH EDI
0055d7db : CALL 0x00515cf0
0055d7e0 : MOV EDI,dword ptr [ESI + 0x18]
0055d7e3 : TEST EDI,EDI
0055d7e5 : JZ 0x0055d7f9
0055d7e7 : ADD dword ptr [EDI],-0x1
0055d7ea : JNZ 0x0055d7f9
0055d7ec : MOV ECX,EDI
0055d7ee : CALL 0x00500860
0055d7f3 : PUSH EDI
0055d7f4 : CALL 0x00515cf0
0055d7f9 : LEA ECX,[ESI + 0x8]
0055d7fc : CALL 0x005a2e40
0055d801 : POP EDI
0055d802 : MOV ECX,ESI
0055d804 : POP ESI
0055d805 : JMP 0x004ff7b0
