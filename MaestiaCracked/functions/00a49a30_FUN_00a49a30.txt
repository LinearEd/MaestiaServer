PROGRAM  : Maestia.exe
FUNCTION : FUN_00a49a30
ENTRY    : 00a49a30
BODY     : [[00a49a30, 00a49b69]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a49a30(void)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  byte *pbVar4;
  int unaff_ESI;
  int unaff_EDI;
  bool bVar5;
  undefined4 *puStack_40;
  char *pcStack_3c;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  
  if (*(int *)(unaff_ESI + 0x24) == 0) {
    return;
  }
  if (*(undefined4 **)(unaff_ESI + 0x4c) != (undefined4 *)0x0) {
    pcStack_3c = "MyHitTest";
    puStack_40 = (undefined4 *)0xa49a55;
    pbVar2 = (byte *)(**(code **)**(undefined4 **)(unaff_ESI + 0x4c))();
    pbVar4 = &DAT_00cc5cf8;
    do {
      bVar1 = *pbVar2;
      bVar5 = bVar1 < *pbVar4;
      if (bVar1 != *pbVar4) {
LAB_00a49a80:
        iVar3 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
        goto LAB_00a49a85;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar2[1];
      bVar5 = bVar1 < pbVar4[1];
      if (bVar1 != pbVar4[1]) goto LAB_00a49a80;
      pbVar2 = pbVar2 + 2;
      pbVar4 = pbVar4 + 2;
    } while (bVar1 != 0);
    iVar3 = 0;
LAB_00a49a85:
    if (iVar3 == 0) goto LAB_00a49b63;
  }
  iVar3 = *(int *)(unaff_ESI + 0x54);
  if ((iVar3 != 0) && (*(int *)(iVar3 + 1000) != 0)) {
    local_18 = 0;
    local_14 = 0;
    local_10 = 0;
    local_c = 0x3f800000;
    iVar3 = *(int *)(iVar3 + 1000);
    uStack_24 = *(undefined4 *)(iVar3 + 0x78);
    uStack_20 = *(undefined4 *)(iVar3 + 0x7c);
    uStack_1c = *(undefined4 *)(iVar3 + 0x80);
    uStack_28 = *(undefined4 *)(iVar3 + 0x74);
    uStack_34 = 0;
    uStack_2c = 0;
    pcStack_3c = (char *)-((float)(unaff_EDI - *(int *)(unaff_ESI + 0x28)) * 0.0045000003);
    puStack_40 = &uStack_34;
    uStack_30 = 0x3f800000;
    D3DXQuaternionRotationAxis(&local_18);
    D3DXQuaternionMultiply(&uStack_34,&uStack_24,&uStack_34);
    (**(code **)(**(int **)(unaff_ESI + 0x54) + 0x2a8))(&puStack_40);
  }
LAB_00a49b63:
  *(int *)(unaff_ESI + 0x28) = unaff_EDI;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a49a30 : PUSH EBP
00a49a31 : MOV EBP,ESP
00a49a33 : AND ESP,0xfffffff8
00a49a36 : SUB ESP,0x30
00a49a39 : CMP dword ptr [ESI + 0x24],0x0
00a49a3d : JZ 0x00a49b66
00a49a43 : MOV ECX,dword ptr [ESI + 0x4c]
00a49a46 : TEST ECX,ECX
00a49a48 : JZ 0x00a49a8d
00a49a4a : MOV EAX,dword ptr [ECX]
00a49a4c : MOV EDX,dword ptr [EAX]
00a49a4e : PUSH 0xcc5cec
00a49a53 : CALL EDX
00a49a55 : MOV ECX,0xcc5cf8
00a49a5a : LEA EBX,[EBX]
00a49a60 : MOV DL,byte ptr [EAX]
00a49a62 : CMP DL,byte ptr [ECX]
00a49a64 : JNZ 0x00a49a80
00a49a66 : TEST DL,DL
00a49a68 : JZ 0x00a49a7c
00a49a6a : MOV DL,byte ptr [EAX + 0x1]
00a49a6d : CMP DL,byte ptr [ECX + 0x1]
00a49a70 : JNZ 0x00a49a80
00a49a72 : ADD EAX,0x2
00a49a75 : ADD ECX,0x2
00a49a78 : TEST DL,DL
00a49a7a : JNZ 0x00a49a60
00a49a7c : XOR EAX,EAX
00a49a7e : JMP 0x00a49a85
00a49a80 : SBB EAX,EAX
00a49a82 : SBB EAX,-0x1
00a49a85 : TEST EAX,EAX
00a49a87 : JZ 0x00a49b63
00a49a8d : MOV EAX,dword ptr [ESI + 0x54]
00a49a90 : TEST EAX,EAX
00a49a92 : JZ 0x00a49b63
00a49a98 : CMP dword ptr [EAX + 0x3e8],0x0
00a49a9f : JZ 0x00a49b63
00a49aa5 : XORPS XMM0,XMM0
00a49aa8 : MOVSS XMM1,dword ptr [0x00c10fc4]
00a49ab0 : MOVSS dword ptr [ESP + 0x20],XMM0
00a49ab6 : MOVSS dword ptr [ESP + 0x24],XMM0
00a49abc : MOVSS dword ptr [ESP + 0x28],XMM0
00a49ac2 : MOVSS dword ptr [ESP + 0x2c],XMM1
00a49ac8 : MOV EAX,dword ptr [EAX + 0x3e8]
00a49ace : MOVSS XMM2,dword ptr [EAX + 0x78]
00a49ad3 : MOVSS XMM3,dword ptr [EAX + 0x7c]
00a49ad8 : MOVSS XMM4,dword ptr [EAX + 0x80]
00a49ae0 : MOVSS XMM5,dword ptr [EAX + 0x74]
00a49ae5 : ADD EAX,0x74
00a49ae8 : MOV EAX,EDI
00a49aea : SUB EAX,dword ptr [ESI + 0x28]
00a49aed : MOVSS dword ptr [ESP + 0x4],XMM0
00a49af3 : MOVSS dword ptr [ESP + 0xc],XMM0
00a49af9 : PUSH ECX
00a49afa : CVTSI2SS XMM0,EAX
00a49afe : MULSS XMM0,dword ptr [0x00cdf38c]
00a49b06 : XORPS XMM0,xmmword ptr [0x00cdf0c0]
00a49b0d : MOVSS dword ptr [ESP],XMM0
00a49b12 : LEA ECX,[ESP + 0x8]
00a49b16 : PUSH ECX
00a49b17 : LEA EDX,[ESP + 0x28]
00a49b1b : PUSH EDX
00a49b1c : MOVSS dword ptr [ESP + 0x1c],XMM5
00a49b22 : MOVSS dword ptr [ESP + 0x20],XMM2
00a49b28 : MOVSS dword ptr [ESP + 0x24],XMM3
00a49b2e : MOVSS dword ptr [ESP + 0x28],XMM4
00a49b34 : MOVSS dword ptr [ESP + 0x14],XMM1
00a49b3a : CALL 0x004ff710
00a49b3f : LEA EAX,[ESP + 0x10]
00a49b43 : PUSH EAX
00a49b44 : LEA ECX,[ESP + 0x24]
00a49b48 : PUSH ECX
00a49b49 : MOV EDX,EAX
00a49b4b : PUSH EDX
00a49b4c : CALL 0x004ff716
00a49b51 : MOV ECX,dword ptr [ESI + 0x54]
00a49b54 : MOV EAX,dword ptr [ECX]
00a49b56 : MOV EAX,dword ptr [EAX + 0x2a8]
00a49b5c : LEA EDX,[ESP + 0x10]
00a49b60 : PUSH EDX
00a49b61 : CALL EAX
00a49b63 : MOV dword ptr [ESI + 0x28],EDI
00a49b66 : MOV ESP,EBP
00a49b68 : POP EBP
00a49b69 : RET
