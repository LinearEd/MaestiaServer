PROGRAM  : Maestia.exe
FUNCTION : FUN_00a9de40
ENTRY    : 00a9de40
BODY     : [[00a9de40, 00a9df24]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a9de40(uint param_1)

{
  int *piVar1;
  float fVar2;
  int iVar3;
  int in_ECX;
  uint uVar4;
  
  uVar4 = param_1;
  if (0x16 < param_1) {
    FUN_008018d0(L"AvaSkill::SetLevel The skill level is higher than the maximum skill level! ");
    uVar4 = 0x15;
  }
  iVar3 = DAT_00d7c54c;
  param_1 = *(undefined4 *)(in_ECX + 0x10);
  *(uint *)(in_ECX + 0x15c) = uVar4;
  FUN_004437f0(&param_1);
  if (((in_ECX != *(int *)(iVar3 + 0x44)) &&
      (piVar1 = *(int **)(in_ECX + 0x10), piVar1 != (int *)0x0)) &&
     (iVar3 = (**(code **)(*piVar1 + 0x38))(), iVar3 != 0)) {
    iVar3 = 0;
    if (uVar4 != 0) {
      iVar3 = uVar4 - 1;
    }
    *(short *)(in_ECX + 0x150) = (short)piVar1[iVar3 + 0xcb];
    fVar2 = (float)piVar1[iVar3 + 0xf7];
    if (piVar1[iVar3 + 0xf7] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    *(float *)(in_ECX + 0x154) = fVar2;
    param_1 = (**(code **)(piVar1[iVar3 * 0xd + 0x136] + 4))();
    do {
      if (param_1 == 0) {
        return;
      }
      iVar3 = FUN_004f5680();
    } while ((iVar3 == 0) || (*(short *)(iVar3 + 4) != 0x143e));
    *(undefined1 *)(in_ECX + 0x158) = 1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a9de40 : PUSH EBP
00a9de41 : MOV EBP,ESP
00a9de43 : PUSH ECX
00a9de44 : PUSH EBX
00a9de45 : PUSH ESI
00a9de46 : PUSH EDI
00a9de47 : MOV EDI,dword ptr [EBP + 0x8]
00a9de4a : MOV EBX,ECX
00a9de4c : CMP EDI,0x16
00a9de4f : JBE 0x00a9de69
00a9de51 : MOV ESI,dword ptr [0x00da98e8]
00a9de57 : PUSH 0xc9a050
00a9de5c : CALL 0x008018d0
00a9de61 : ADD ESP,0x4
00a9de64 : MOV EDI,0x15
00a9de69 : MOV EAX,dword ptr [EBX + 0x10]
00a9de6c : MOV ESI,dword ptr [0x00d7c54c]
00a9de72 : LEA ECX,[EBP + 0x8]
00a9de75 : MOV dword ptr [EBP + 0x8],EAX
00a9de78 : PUSH ECX
00a9de79 : LEA ECX,[ESI + 0x40]
00a9de7c : LEA EAX,[EBP + -0x4]
00a9de7f : MOV dword ptr [EBX + 0x15c],EDI
00a9de85 : CALL 0x004437f0
00a9de8a : MOV EAX,dword ptr [EBP + -0x4]
00a9de8d : CMP EAX,dword ptr [ESI + 0x44]
00a9de90 : JZ 0x00a9df1c
00a9de96 : MOV ESI,dword ptr [EAX + 0x10]
00a9de99 : TEST ESI,ESI
00a9de9b : JZ 0x00a9df1c
00a9de9d : MOV EDX,dword ptr [ESI]
00a9de9f : MOV EAX,dword ptr [EDX + 0x38]
00a9dea2 : MOV ECX,ESI
00a9dea4 : CALL EAX
00a9dea6 : TEST EAX,EAX
00a9dea8 : JZ 0x00a9df1c
00a9deaa : XOR EAX,EAX
00a9deac : TEST EDI,EDI
00a9deae : JBE 0x00a9deb3
00a9deb0 : LEA EAX,[EDI + -0x1]
00a9deb3 : MOV CX,word ptr [ESI + EAX*0x4 + 0x32c]
00a9debb : MOV word ptr [EBX + 0x150],CX
00a9dec2 : FILD dword ptr [ESI + EAX*0x4 + 0x3dc]
00a9dec9 : MOV EDX,dword ptr [ESI + EAX*0x4 + 0x3dc]
00a9ded0 : TEST EDX,EDX
00a9ded2 : JGE 0x00a9deda
00a9ded4 : FADD float ptr [0x00cdf0e0]
00a9deda : IMUL EAX,EAX,0x34
00a9dedd : FSTP float ptr [EBX + 0x154]
00a9dee3 : LEA ESI,[EAX + ESI*0x1 + 0x4d8]
00a9deea : MOV EAX,dword ptr [ESI]
00a9deec : MOV EDX,dword ptr [EAX + 0x4]
00a9deef : MOV ECX,ESI
00a9def1 : CALL EDX
00a9def3 : MOV dword ptr [EBP + 0x8],EAX
00a9def6 : CMP dword ptr [EBP + 0x8],0x0
00a9defa : JZ 0x00a9df1c
00a9defc : LEA EDX,[EBP + 0x8]
00a9deff : MOV EAX,ESI
00a9df01 : CALL 0x004f5680
00a9df06 : TEST EAX,EAX
00a9df08 : JZ 0x00a9def6
00a9df0a : MOV ECX,0x143e
00a9df0f : CMP word ptr [EAX + 0x4],CX
00a9df13 : JNZ 0x00a9def6
00a9df15 : MOV byte ptr [EBX + 0x158],0x1
00a9df1c : POP EDI
00a9df1d : POP ESI
00a9df1e : POP EBX
00a9df1f : MOV ESP,EBP
00a9df21 : POP EBP
00a9df22 : RET 0x4
