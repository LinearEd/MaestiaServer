PROGRAM  : Maestia.exe
FUNCTION : FUN_008e7910
ENTRY    : 008e7910
BODY     : [[008e7910, 008e7ab5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008e7910(int *param_1)

{
  int *piVar1;
  uint uVar2;
  uint8_t *packet;
  int iVar3;
  byte bVar4;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint8_t *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b3f0ed;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((char)param_1[3] != '\x01') {
    iVar3 = *(int *)ThreadLocalStoragePointer;
    bVar4 = (byte)((ulonglong)(*(byte *)(iVar3 + 0x18) + 1) % 3);
    *(byte *)(iVar3 + 0x18) = bVar4;
    local_14 = (uint8_t *)((uint)bVar4 * 0x2000 + 0x122cb8 + iVar3);
    if (local_14 == (uint8_t *)0x0) {
      packet = (uint8_t *)0x0;
    }
    else {
      local_14[0] = '\0';
      local_14[1] = '\0';
      local_14[2] = 'D';
      local_14[3] = '\v';
      packet = local_14;
    }
    local_8 = 0xffffffff;
    if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
      FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),4,packet);
    }
    if (*(int *)(*DAT_00da9894 + 0x118) != 0) {
      FUN_00406460(L"IDS_POST_WAIT_SEND_END");
      local_8 = 1;
      piVar1 = *(int **)(*DAT_00da9894 + 0x118);
      iVar3 = FUN_0081d120(local_30);
      local_8._0_1_ = 2;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      (**(code **)(*piVar1 + 4))(piVar1,"SetNoticeText",&DAT_00c5a50c,iVar3);
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_2c = 0;
      local_18 = 7;
      local_1c = 0;
      (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x118))("NoticeDlgOpen");
    }
    *(undefined1 *)((int)param_1 + 0xd) = 1;
    *(undefined1 *)(param_1 + 3) = 1;
    *(undefined1 *)(*param_1 + 0x39) = 1;
    (**(code **)(*(int *)param_1[2] + 0x18))(0,300,uVar2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008e7910 : PUSH EBP
008e7911 : MOV EBP,ESP
008e7913 : PUSH -0x1
008e7915 : PUSH 0xb3f0ed
008e791a : MOV EAX,FS:[0x0]
008e7920 : PUSH EAX
008e7921 : SUB ESP,0x40
008e7924 : PUSH EBX
008e7925 : PUSH ESI
008e7926 : PUSH EDI
008e7927 : MOV EAX,[0x00d66fa0]
008e792c : XOR EAX,EBP
008e792e : PUSH EAX
008e792f : LEA EAX,[EBP + -0xc]
008e7932 : MOV FS:[0x0],EAX
008e7938 : MOV ESI,dword ptr [EBP + 0x8]
008e793b : MOV EBX,0x1
008e7940 : CMP byte ptr [ESI + 0xc],BL
008e7943 : JZ 0x008e7aa2
008e7949 : MOV EAX,FS:[0x2c]
008e794f : MOV ECX,dword ptr [EAX]
008e7951 : MOVZX EAX,byte ptr [ECX + 0x18]
008e7955 : ADD EAX,EBX
008e7957 : CDQ
008e7958 : MOV EDI,0x3
008e795d : IDIV EDI
008e795f : MOV byte ptr [ECX + 0x18],DL
008e7962 : MOVZX EDX,DL
008e7965 : SHL EDX,0xd
008e7968 : LEA EAX,[EDX + ECX*0x1 + 0x122cb8]
008e796f : MOV dword ptr [EBP + -0x10],EAX
008e7972 : MOV dword ptr [EBP + -0x4],0x0
008e7979 : TEST EAX,EAX
008e797b : JZ 0x008e798c
008e797d : XOR ECX,ECX
008e797f : MOV word ptr [EAX],CX
008e7982 : MOV byte ptr [EAX + 0x2],0x44
008e7986 : MOV byte ptr [EAX + 0x3],0xb
008e798a : JMP 0x008e798e
008e798c : XOR EAX,EAX
008e798e : MOV dword ptr [EBP + -0x4],0xffffffff
008e7995 : MOV EDX,dword ptr [0x017247d4]
008e799b : MOV ECX,dword ptr [EDX + 0x4]
008e799e : TEST ECX,ECX
008e79a0 : JZ 0x008e79b2
008e79a2 : CMP byte ptr [EDX + 0x8],0x0
008e79a6 : JZ 0x008e79b2
008e79a8 : PUSH 0x4
008e79aa : PUSH ECX
008e79ab : MOV EDI,EAX
008e79ad : CALL 0x00a0dd40
008e79b2 : MOV EDX,dword ptr [0x00da9894]
008e79b8 : MOV EAX,dword ptr [EDX]
008e79ba : CMP dword ptr [EAX + 0x118],0x0
008e79c1 : JZ 0x008e7a86
008e79c7 : PUSH 0xc5a4dc
008e79cc : LEA ECX,[EBP + -0x2c]
008e79cf : CALL 0x00406460
008e79d4 : MOV dword ptr [EBP + -0x4],EBX
008e79d7 : MOV EAX,[0x00da9894]
008e79dc : MOV EAX,dword ptr [EAX]
008e79de : MOV ESI,dword ptr [EAX + 0x118]
008e79e4 : LEA ECX,[EBP + -0x2c]
008e79e7 : PUSH ECX
008e79e8 : MOV ECX,dword ptr [0x0172491c]
008e79ee : LEA EDI,[EBP + -0x48]
008e79f1 : CALL 0x0081d120
008e79f6 : MOV byte ptr [EBP + -0x4],0x2
008e79fa : MOV EDI,0x8
008e79ff : CMP dword ptr [EAX + 0x18],EDI
008e7a02 : JC 0x008e7a09
008e7a04 : MOV EAX,dword ptr [EAX + 0x4]
008e7a07 : JMP 0x008e7a0c
008e7a09 : ADD EAX,0x4
008e7a0c : MOV EDX,dword ptr [ESI]
008e7a0e : PUSH EAX
008e7a0f : MOV EAX,dword ptr [EDX + 0x4]
008e7a12 : PUSH 0xc5a50c
008e7a17 : PUSH 0xc5a510
008e7a1c : PUSH ESI
008e7a1d : CALL EAX
008e7a1f : ADD ESP,0x10
008e7a22 : MOV byte ptr [EBP + -0x4],BL
008e7a25 : CMP dword ptr [EBP + -0x30],EDI
008e7a28 : JC 0x008e7a32
008e7a2a : MOV ECX,dword ptr [EBP + -0x44]
008e7a2d : CALL 0x006f04e0
008e7a32 : MOV ESI,0x7
008e7a37 : XOR ECX,ECX
008e7a39 : MOV dword ptr [EBP + -0x30],ESI
008e7a3c : MOV dword ptr [EBP + -0x34],0x0
008e7a43 : MOV word ptr [EBP + -0x44],CX
008e7a47 : MOV dword ptr [EBP + -0x4],0xffffffff
008e7a4e : CMP dword ptr [EBP + -0x14],EDI
008e7a51 : JC 0x008e7a5b
008e7a53 : MOV ECX,dword ptr [EBP + -0x28]
008e7a56 : CALL 0x006f04e0
008e7a5b : MOV EAX,[0x00da9894]
008e7a60 : XOR EDX,EDX
008e7a62 : MOV word ptr [EBP + -0x28],DX
008e7a66 : MOV dword ptr [EBP + -0x14],ESI
008e7a69 : MOV dword ptr [EBP + -0x18],0x0
008e7a70 : MOV ECX,dword ptr [EAX]
008e7a72 : MOV ECX,dword ptr [ECX + 0x118]
008e7a78 : MOV EDX,dword ptr [ECX]
008e7a7a : MOV EAX,dword ptr [EDX]
008e7a7c : PUSH 0xc5a520
008e7a81 : CALL EAX
008e7a83 : MOV ESI,dword ptr [EBP + 0x8]
008e7a86 : MOV ECX,dword ptr [ESI]
008e7a88 : MOV byte ptr [ESI + 0xd],BL
008e7a8b : MOV byte ptr [ESI + 0xc],BL
008e7a8e : MOV byte ptr [ECX + 0x39],BL
008e7a91 : MOV ECX,dword ptr [ESI + 0x8]
008e7a94 : MOV EDX,dword ptr [ECX]
008e7a96 : MOV EAX,dword ptr [EDX + 0x18]
008e7a99 : PUSH 0x12c
008e7a9e : PUSH 0x0
008e7aa0 : CALL EAX
008e7aa2 : MOV ECX,dword ptr [EBP + -0xc]
008e7aa5 : MOV dword ptr FS:[0x0],ECX
008e7aac : POP ECX
008e7aad : POP EDI
008e7aae : POP ESI
008e7aaf : POP EBX
008e7ab0 : MOV ESP,EBP
008e7ab2 : POP EBP
008e7ab3 : RET 0x4
