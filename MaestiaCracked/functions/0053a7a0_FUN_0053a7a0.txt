PROGRAM  : Maestia.exe
FUNCTION : FUN_0053a7a0
ENTRY    : 0053a7a0
BODY     : [[0053a7a0, 0053a7ef]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053a7a0(byte param_1)

{
  uint uVar1;
  LONG LVar2;
  undefined4 *in_ECX;
  
  uVar1 = in_ECX[6];
  *in_ECX = &PTR_FUN_00b8b878;
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  if ((GRefCountImpl *)in_ECX[4] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[4]);
  }
  *in_ECX = &PTR_LAB_00b8b11c;
  if ((param_1 & 1) != 0) {
    FUN_006f05d0();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0053a7a0 : PUSH ESI
0053a7a1 : PUSH EDI
0053a7a2 : MOV ESI,ECX
0053a7a4 : MOV EDI,dword ptr [ESI + 0x18]
0053a7a7 : AND EDI,0xfffffffc
0053a7aa : PUSH -0x1
0053a7ac : LEA EAX,[EDI + 0x4]
0053a7af : PUSH EAX
0053a7b0 : MOV dword ptr [ESI],0xb8b878
0053a7b6 : CALL dword ptr [0x00b851cc]
0053a7bc : SUB EAX,0x1
0053a7bf : JNZ 0x0053a7c7
0053a7c1 : PUSH EDI
0053a7c2 : CALL 0x00515cf0
0053a7c7 : MOV ECX,dword ptr [ESI + 0x10]
0053a7ca : TEST ECX,ECX
0053a7cc : JZ 0x0053a7d3
0053a7ce : CALL 0x004ff7e0
0053a7d3 : TEST byte ptr [ESP + 0xc],0x1
0053a7d8 : MOV dword ptr [ESI],0xb8b11c
0053a7de : JZ 0x0053a7e9
0053a7e0 : PUSH ESI
0053a7e1 : CALL 0x006f05d0
0053a7e6 : ADD ESP,0x4
0053a7e9 : POP EDI
0053a7ea : MOV EAX,ESI
0053a7ec : POP ESI
0053a7ed : RET 0x4
