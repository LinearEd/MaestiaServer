PROGRAM  : Maestia.exe
FUNCTION : FUN_00900db0
ENTRY    : 00900db0
BODY     : [[00900db0, 00900f94]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00900db0(int param_1,undefined4 param_2)

{
  int *piVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  bool bVar9;
  undefined4 local_10;
  float local_c;
  
  if (*(char *)(DAT_00da93ec + 0x1d5) != '\x01') {
    iVar6 = FUN_00a1a840(param_2);
    if (iVar6 == 0) {
      iVar6 = FUN_00a1a6d0(param_2);
      if (iVar6 == 0) {
        iVar6 = FUN_00a1a780(param_2);
        if (iVar6 == 0) {
          FUN_00900130();
          *(undefined4 *)(param_1 + 0xe0) = param_2;
          return;
        }
      }
    }
    if (DAT_00da93ec == 0) {
      local_10 = 0x10;
    }
    else {
      local_10 = FUN_009006a0();
    }
    iVar7 = FUN_00a1a840(param_2);
    fVar2 = (float)*(int *)(iVar6 + 0xa4);
    if (*(int *)(iVar6 + 0xa4) < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar5 = (float)*(int *)(iVar6 + 0xb0);
    if (*(int *)(iVar6 + 0xb0) < 0) {
      fVar5 = fVar5 + 4.2949673e+09;
    }
    iVar8 = *(int *)(iVar6 + 0xb4);
    if (iVar8 == 0) {
      local_c = 0.0;
    }
    else {
      fVar4 = (float)*(int *)(iVar6 + 0xa8);
      if (*(int *)(iVar6 + 0xa8) < 0) {
        fVar4 = fVar4 + 4.2949673e+09;
      }
      fVar3 = (float)iVar8;
      if (iVar8 < 0) {
        fVar3 = fVar3 + 4.2949673e+09;
      }
      local_c = (fVar4 / fVar3) * 100.0;
    }
    bVar9 = false;
    iVar8 = FUN_004049b0(*(undefined4 *)(iVar6 + 8));
    if (iVar8 == 0) {
      FUN_008018d0();
    }
    else {
      bVar9 = *(char *)(iVar8 + 0x40) == '\x03';
    }
    if (*(char *)(DAT_00da93ec + 0x378) == '\0') {
      FUN_00900130();
    }
    else if ((*DAT_00da9894 != 0) &&
            (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
      if (*(uint *)(iVar6 + 0x24) < 8) {
        iVar8 = iVar6 + 0x10;
      }
      else {
        iVar8 = *(int *)(iVar6 + 0x10);
      }
      (**(code **)(*piVar1 + 4))
                (piVar1,"mc_targetPC.SetFocusedCharTarget","%ls,%b,%d,%d,%f,%f,%b",iVar8,iVar7 != 0,
                 *(undefined4 *)(iVar6 + 0xa0),local_10,(double)((fVar2 / fVar5) * 100.0),
                 (double)local_c,bVar9);
    }
    *(undefined4 *)(param_1 + 0xe0) = param_2;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00900db0 : PUSH EBP
00900db1 : MOV EBP,ESP
00900db3 : MOV ECX,dword ptr [0x00da93ec]
00900db9 : SUB ESP,0x14
00900dbc : CMP byte ptr [ECX + 0x1d5],0x1
00900dc3 : PUSH EBX
00900dc4 : PUSH ESI
00900dc5 : PUSH EDI
00900dc6 : JZ 0x00900f6e
00900dcc : MOV EBX,dword ptr [EBP + 0xc]
00900dcf : PUSH EBX
00900dd0 : MOV ESI,ECX
00900dd2 : CALL 0x00a1a840
00900dd7 : MOV EDI,EAX
00900dd9 : TEST EDI,EDI
00900ddb : JNZ 0x00900dfd
00900ddd : PUSH EBX
00900dde : MOV ECX,ESI
00900de0 : CALL 0x00a1a6d0
00900de5 : MOV EDI,EAX
00900de7 : TEST EDI,EDI
00900de9 : JNZ 0x00900dfd
00900deb : PUSH EBX
00900dec : MOV ECX,ESI
00900dee : CALL 0x00a1a780
00900df3 : MOV EDI,EAX
00900df5 : TEST EDI,EDI
00900df7 : JZ 0x00900f7e
00900dfd : CMP dword ptr [0x00da93ec],0x0
00900e04 : JNZ 0x00900e0f
00900e06 : MOV dword ptr [EBP + -0xc],0x10
00900e0d : JMP 0x00900e19
00900e0f : MOV EAX,EBX
00900e11 : CALL 0x009006a0
00900e16 : MOV dword ptr [EBP + -0xc],EAX
00900e19 : MOV ECX,dword ptr [0x00da93ec]
00900e1f : PUSH EBX
00900e20 : CALL 0x00a1a840
00900e25 : FILD dword ptr [EDI + 0xa4]
00900e2b : TEST EAX,EAX
00900e2d : MOV EAX,dword ptr [EDI + 0xa4]
00900e33 : SETNZ byte ptr [EBP + -0x1]
00900e37 : TEST EAX,EAX
00900e39 : JGE 0x00900e41
00900e3b : FADD float ptr [0x00cdf0e0]
00900e41 : MOV ECX,dword ptr [EDI + 0xb0]
00900e47 : FILD dword ptr [EDI + 0xb0]
00900e4d : TEST ECX,ECX
00900e4f : JGE 0x00900e57
00900e51 : FADD float ptr [0x00cdf0e0]
00900e57 : FDIVP
00900e59 : MOV EAX,dword ptr [EDI + 0xb4]
00900e5f : FLD float ptr [0x00cdf230]
00900e65 : FMUL ST1
00900e67 : FXCH
00900e69 : FSTP float ptr [EBP + -0x10]
00900e6c : TEST EAX,EAX
00900e6e : JBE 0x00900e9f
00900e70 : MOV EDX,dword ptr [EDI + 0xa8]
00900e76 : FILD dword ptr [EDI + 0xa8]
00900e7c : TEST EDX,EDX
00900e7e : JGE 0x00900e86
00900e80 : FADD float ptr [0x00cdf0e0]
00900e86 : MOV dword ptr [EBP + -0x8],EAX
00900e89 : FILD dword ptr [EBP + -0x8]
00900e8c : TEST EAX,EAX
00900e8e : JGE 0x00900e96
00900e90 : FADD float ptr [0x00cdf0e0]
00900e96 : FDIVP
00900e98 : FMULP
00900e9a : FSTP float ptr [EBP + -0x8]
00900e9d : JMP 0x00900ea9
00900e9f : XORPS XMM0,XMM0
00900ea2 : FSTP ST0
00900ea4 : MOVSS dword ptr [EBP + -0x8],XMM0
00900ea9 : MOV ESI,dword ptr [EDI + 0x8]
00900eac : PUSH ESI
00900ead : XOR BL,BL
00900eaf : CALL 0x004049b0
00900eb4 : ADD ESP,0x4
00900eb7 : TEST EAX,EAX
00900eb9 : JZ 0x00900ecd
00900ebb : XOR ECX,ECX
00900ebd : CMP byte ptr [EAX + 0x40],0x3
00900ec1 : SETZ CL
00900ec4 : MOV EAX,ECX
00900ec6 : TEST EAX,EAX
00900ec8 : SETNZ BL
00900ecb : JMP 0x00900eeb
00900ecd : PUSH ESI
00900ece : MOV ESI,dword ptr [0x00da98e8]
00900ed4 : PUSH 0xc634f0
00900ed9 : PUSH 0x656
00900ede : PUSH 0xc63538
00900ee3 : CALL 0x008018d0
00900ee8 : ADD ESP,0x10
00900eeb : MOV EDX,dword ptr [0x00da93ec]
00900ef1 : CMP byte ptr [EDX + 0x378],0x0
00900ef8 : JZ 0x00900f77
00900efa : MOV EAX,[0x00da9894]
00900eff : MOV EAX,dword ptr [EAX]
00900f01 : TEST EAX,EAX
00900f03 : JZ 0x00900f62
00900f05 : MOV EAX,dword ptr [EAX + 0x114]
00900f0b : TEST EAX,EAX
00900f0d : JZ 0x00900f62
00900f0f : CMP dword ptr [EDI + 0x24],0x8
00900f13 : MOV ECX,dword ptr [EDI + 0xa0]
00900f19 : JC 0x00900f20
00900f1b : MOV EDI,dword ptr [EDI + 0x10]
00900f1e : JMP 0x00900f23
00900f20 : ADD EDI,0x10
00900f23 : CVTSS2SD XMM0,dword ptr [EBP + -0x8]
00900f28 : MOV EDX,dword ptr [EAX]
00900f2a : MOV EDX,dword ptr [EDX + 0x4]
00900f2d : MOVZX ESI,BL
00900f30 : PUSH ESI
00900f31 : MOV ESI,dword ptr [EBP + -0xc]
00900f34 : SUB ESP,0x10
00900f37 : MOVSD qword ptr [ESP + 0x8],XMM0
00900f3d : MOVSS XMM0,dword ptr [EBP + -0x10]
00900f42 : CVTPS2PD XMM0,XMM0
00900f45 : MOVSD qword ptr [ESP],XMM0
00900f4a : PUSH ESI
00900f4b : PUSH ECX
00900f4c : MOVZX ECX,byte ptr [EBP + -0x1]
00900f50 : PUSH ECX
00900f51 : PUSH EDI
00900f52 : PUSH 0xc6358c
00900f57 : PUSH 0xc635a4
00900f5c : PUSH EAX
00900f5d : CALL EDX
00900f5f : ADD ESP,0x30
00900f62 : MOV EBX,dword ptr [EBP + 0xc]
00900f65 : MOV EAX,dword ptr [EBP + 0x8]
00900f68 : MOV dword ptr [EAX + 0xe0],EBX
00900f6e : POP EDI
00900f6f : POP ESI
00900f70 : POP EBX
00900f71 : MOV ESP,EBP
00900f73 : POP EBP
00900f74 : RET 0x8
00900f77 : CALL 0x00900130
00900f7c : JMP 0x00900f62
00900f7e : CALL 0x00900130
00900f83 : MOV EAX,dword ptr [EBP + 0x8]
00900f86 : POP EDI
00900f87 : POP ESI
00900f88 : MOV dword ptr [EAX + 0xe0],EBX
00900f8e : POP EBX
00900f8f : MOV ESP,EBP
00900f91 : POP EBP
00900f92 : RET 0x8
