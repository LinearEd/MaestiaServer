PROGRAM  : Maestia.exe
FUNCTION : FUN_00936cb0
ENTRY    : 00936cb0
BODY     : [[00936cb0, 0093709b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00936cb0(int param_1,undefined4 param_2)

{
  ushort uVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  ushort *puVar5;
  ushort *puVar6;
  undefined4 *puVar7;
  ushort *puVar8;
  bool bVar9;
  undefined1 auStack_ac [4];
  int *local_a8;
  undefined4 local_a4;
  int local_a0;
  undefined1 local_9c [4];
  int local_98;
  undefined1 auStack_8c [56];
  undefined1 local_54 [4];
  undefined4 local_50;
  undefined4 local_40;
  uint local_3c;
  undefined1 local_38 [4];
  undefined2 local_34;
  undefined4 local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b6eab5;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_ac;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff48;
  ExceptionList = &local_14;
  local_a0 = param_1;
  local_a4 = param_2;
  if (*(uint *)(param_1 + 0x18) < 8) {
    param_1 = param_1 + 4;
  }
  else {
    param_1 = *(int *)(param_1 + 4);
  }
  if (param_1 != 0) {
    FUN_00406460(&DAT_00c6f31c);
    local_c = 0;
    uVar3 = FUN_00403dd0(param_2,uVar2);
    local_c._0_1_ = 1;
    FUN_0070cd60(local_9c,uVar3,local_54,0);
    local_c = CONCAT31(local_c._1_3_,3);
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_20 = 7;
    local_24 = 0;
    local_34 = 0;
    local_c._0_1_ = 4;
    if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_3c = 7;
    local_40 = 0;
    local_50 = (undefined4 *)((uint)local_50._2_2_ << 0x10);
    iVar4 = *DAT_00da9894;
    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                (*(int **)(iVar4 + 0x114),"SetType",&DAT_00c6f334,L"QuestList");
    }
    uVar2 = *(uint *)(local_98 + 0x18);
    puVar5 = (ushort *)(local_98 + 4);
    puVar8 = puVar5;
    if (7 < uVar2) {
      puVar8 = *(ushort **)puVar5;
    }
    puVar6 = &DAT_00c6f340;
    do {
      uVar1 = *puVar8;
      bVar9 = uVar1 < *puVar6;
      if (uVar1 != *puVar6) {
LAB_00936e39:
        iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
        goto LAB_00936e3e;
      }
      if (uVar1 == 0) break;
      uVar1 = puVar8[1];
      bVar9 = uVar1 < puVar6[1];
      if (uVar1 != puVar6[1]) goto LAB_00936e39;
      puVar8 = puVar8 + 2;
      puVar6 = puVar6 + 2;
    } while (uVar1 != 0);
    iVar4 = 0;
LAB_00936e3e:
    if (iVar4 == 0) {
      (**(code **)(*local_a8 + 0x20))();
    }
    else {
      puVar8 = puVar5;
      if (7 < uVar2) {
        puVar8 = *(ushort **)puVar5;
      }
      puVar6 = &DAT_00c6f34c;
      do {
        uVar1 = *puVar8;
        bVar9 = uVar1 < *puVar6;
        if (uVar1 != *puVar6) {
LAB_00936e88:
          iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
          goto LAB_00936e8d;
        }
        if (uVar1 == 0) break;
        uVar1 = puVar8[1];
        bVar9 = uVar1 < puVar6[1];
        if (uVar1 != puVar6[1]) goto LAB_00936e88;
        puVar8 = puVar8 + 2;
        puVar6 = puVar6 + 2;
      } while (uVar1 != 0);
      iVar4 = 0;
LAB_00936e8d:
      if (iVar4 == 0) {
        if ((local_a8[0x18] != 0) &&
           ((*(int *)(DAT_0172490c + 8) != 0 || (*(int *)(DAT_0172490c + 0x1c) != local_a8[0x17]))))
        {
          if ((uint)local_a8[0x1f] < 8) {
            local_a8 = local_a8 + 0x1a;
          }
          else {
            local_a8 = (int *)local_a8[0x1a];
          }
          FUN_00406460(local_a8);
          local_c._0_1_ = 5;
          FUN_00848d40(local_54,0);
          FUN_00406460(L"IDS_QUEST_ABANDON_DELETE_AGAIN");
          local_c._0_1_ = 6;
          iVar4 = FUN_0081d120(auStack_8c);
          local_c._0_1_ = 7;
          if (*(uint *)(iVar4 + 0x18) < 8) {
            iVar4 = iVar4 + 4;
          }
          else {
            iVar4 = *(int *)(iVar4 + 4);
          }
          puVar7 = local_50;
          if (local_3c < 8) {
            puVar7 = &local_50;
          }
          FUN_00404750(L"(%s) %s",puVar7,iVar4);
          local_c._0_1_ = 9;
          FUN_00406560();
          local_c = CONCAT31(local_c._1_3_,10);
          FUN_00406560();
          iVar4 = FUN_008ede80(local_38,2);
          if (iVar4 != 0) {
            if (*(code **)(iVar4 + 0x60) != (code *)0x0) {
              (**(code **)(iVar4 + 0x60))(1,iVar4);
            }
            *(code **)(iVar4 + 0x60) = FUN_009369d0;
          }
          local_c._0_1_ = 5;
          FUN_00406560();
          local_c = CONCAT31(local_c._1_3_,4);
          FUN_00406560();
        }
      }
      else {
        if (7 < uVar2) {
          puVar5 = *(ushort **)puVar5;
        }
        puVar8 = &DAT_00c6f3a4;
        do {
          uVar1 = *puVar5;
          bVar9 = uVar1 < *puVar8;
          if (uVar1 != *puVar8) {
LAB_00936ffd:
            iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
            goto LAB_00937002;
          }
          if (uVar1 == 0) break;
          uVar1 = puVar5[1];
          bVar9 = uVar1 < puVar8[1];
          if (uVar1 != puVar8[1]) goto LAB_00936ffd;
          puVar5 = puVar5 + 2;
          puVar8 = puVar8 + 2;
        } while (uVar1 != 0);
        iVar4 = 0;
LAB_00937002:
        if (iVar4 == 0) {
          iVar4 = *DAT_00da9894;
          if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
            (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                      (*(int **)(iVar4 + 0x114),"UsableAutoQuestLevel",&DAT_00c6f3b4,
                       *(byte *)(local_a8[0x18] + 0x98) < 0x55);
          }
        }
        else {
          FUN_0093bff0(local_a0,local_a4);
        }
      }
    }
    local_c = 0xffffffff;
    FUN_004042c0();
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_ac);
  return;
}



============================================================
DISASSEMBLY
============================================================
00936cb0 : PUSH EBP
00936cb1 : MOV EBP,ESP
00936cb3 : AND ESP,0xfffffff8
00936cb6 : PUSH -0x1
00936cb8 : PUSH 0xb6eab5
00936cbd : MOV EAX,FS:[0x0]
00936cc3 : PUSH EAX
00936cc4 : SUB ESP,0x98
00936cca : MOV EAX,[0x00d66fa0]
00936ccf : XOR EAX,ESP
00936cd1 : MOV dword ptr [ESP + 0x90],EAX
00936cd8 : PUSH EBX
00936cd9 : PUSH ESI
00936cda : PUSH EDI
00936cdb : MOV EAX,[0x00d66fa0]
00936ce0 : XOR EAX,ESP
00936ce2 : PUSH EAX
00936ce3 : LEA EAX,[ESP + 0xa8]
00936cea : MOV FS:[0x0],EAX
00936cf0 : MOV EAX,dword ptr [EBP + 0x8]
00936cf3 : MOV ESI,dword ptr [EBP + 0xc]
00936cf6 : MOV EBX,0x8
00936cfb : MOV dword ptr [ESP + 0x14],ECX
00936cff : MOV dword ptr [ESP + 0x1c],EAX
00936d03 : MOV dword ptr [ESP + 0x18],ESI
00936d07 : CMP dword ptr [EAX + 0x18],EBX
00936d0a : JC 0x00936d11
00936d0c : MOV EAX,dword ptr [EAX + 0x4]
00936d0f : JMP 0x00936d14
00936d11 : ADD EAX,0x4
00936d14 : XOR EDI,EDI
00936d16 : CMP EAX,EDI
00936d18 : JZ 0x00937076
00936d1e : PUSH 0xc6f31c
00936d23 : LEA ECX,[ESP + 0x6c]
00936d27 : CALL 0x00406460
00936d2c : MOV dword ptr [ESP + 0xb0],EDI
00936d33 : PUSH ESI
00936d34 : LEA ESI,[ESP + 0x88]
00936d3b : CALL 0x00403dd0
00936d40 : ADD ESP,0x4
00936d43 : MOV byte ptr [ESP + 0xb0],0x1
00936d4b : PUSH EDI
00936d4c : LEA ECX,[ESP + 0x6c]
00936d50 : PUSH ECX
00936d51 : PUSH EAX
00936d52 : LEA EDX,[ESP + 0x2c]
00936d56 : PUSH EDX
00936d57 : CALL 0x0070cd60
00936d5c : ADD ESP,0x10
00936d5f : MOV byte ptr [ESP + 0xb0],0x3
00936d67 : CMP dword ptr [ESP + 0x9c],EBX
00936d6e : JC 0x00936d7c
00936d70 : MOV ECX,dword ptr [ESP + 0x88]
00936d77 : CALL 0x006f04e0
00936d7c : MOV ESI,0x7
00936d81 : XOR EAX,EAX
00936d83 : MOV dword ptr [ESP + 0x9c],ESI
00936d8a : MOV dword ptr [ESP + 0x98],EDI
00936d91 : MOV word ptr [ESP + 0x88],AX
00936d99 : MOV byte ptr [ESP + 0xb0],0x4
00936da1 : CMP dword ptr [ESP + 0x80],EBX
00936da8 : JC 0x00936db3
00936daa : MOV ECX,dword ptr [ESP + 0x6c]
00936dae : CALL 0x006f04e0
00936db3 : MOV EDX,dword ptr [0x00da9894]
00936db9 : XOR ECX,ECX
00936dbb : MOV dword ptr [ESP + 0x80],ESI
00936dc2 : MOV dword ptr [ESP + 0x7c],EDI
00936dc6 : MOV word ptr [ESP + 0x6c],CX
00936dcb : MOV EAX,dword ptr [EDX]
00936dcd : CMP EAX,EDI
00936dcf : JZ 0x00936df9
00936dd1 : CMP dword ptr [EAX + 0x114],EDI
00936dd7 : JZ 0x00936df9
00936dd9 : MOV EAX,dword ptr [EAX + 0x114]
00936ddf : MOV ECX,dword ptr [EAX]
00936de1 : MOV EDX,dword ptr [ECX + 0x4]
00936de4 : PUSH 0xc6f320
00936de9 : PUSH 0xc6f334
00936dee : PUSH 0xc6f338
00936df3 : PUSH EAX
00936df4 : CALL EDX
00936df6 : ADD ESP,0x10
00936df9 : MOV EAX,dword ptr [ESP + 0x24]
00936dfd : MOV EBX,dword ptr [EAX + 0x18]
00936e00 : LEA ESI,[EAX + 0x4]
00936e03 : CMP EBX,0x8
00936e06 : JC 0x00936e0c
00936e08 : MOV EAX,dword ptr [ESI]
00936e0a : JMP 0x00936e0e
00936e0c : MOV EAX,ESI
00936e0e : MOV ECX,0xc6f340
00936e13 : MOV DX,word ptr [EAX]
00936e16 : CMP DX,word ptr [ECX]
00936e19 : JNZ 0x00936e39
00936e1b : CMP DX,DI
00936e1e : JZ 0x00936e35
00936e20 : MOV DX,word ptr [EAX + 0x2]
00936e24 : CMP DX,word ptr [ECX + 0x2]
00936e28 : JNZ 0x00936e39
00936e2a : ADD EAX,0x4
00936e2d : ADD ECX,0x4
00936e30 : CMP DX,DI
00936e33 : JNZ 0x00936e13
00936e35 : XOR EAX,EAX
00936e37 : JMP 0x00936e3e
00936e39 : SBB EAX,EAX
00936e3b : SBB EAX,-0x1
00936e3e : CMP EAX,EDI
00936e40 : JNZ 0x00936e52
00936e42 : MOV ECX,dword ptr [ESP + 0x14]
00936e46 : MOV EAX,dword ptr [ECX]
00936e48 : MOV EDX,dword ptr [EAX + 0x20]
00936e4b : CALL EDX
00936e4d : JMP 0x00937062
00936e52 : CMP EBX,0x8
00936e55 : JC 0x00936e5b
00936e57 : MOV EAX,dword ptr [ESI]
00936e59 : JMP 0x00936e5d
00936e5b : MOV EAX,ESI
00936e5d : MOV ECX,0xc6f34c
00936e62 : MOV DX,word ptr [EAX]
00936e65 : CMP DX,word ptr [ECX]
00936e68 : JNZ 0x00936e88
00936e6a : CMP DX,DI
00936e6d : JZ 0x00936e84
00936e6f : MOV DX,word ptr [EAX + 0x2]
00936e73 : CMP DX,word ptr [ECX + 0x2]
00936e77 : JNZ 0x00936e88
00936e79 : ADD EAX,0x4
00936e7c : ADD ECX,0x4
00936e7f : CMP DX,DI
00936e82 : JNZ 0x00936e62
00936e84 : XOR EAX,EAX
00936e86 : JMP 0x00936e8d
00936e88 : SBB EAX,EAX
00936e8a : SBB EAX,-0x1
00936e8d : CMP EAX,EDI
00936e8f : JNZ 0x00936fc7
00936e95 : MOV ECX,dword ptr [ESP + 0x14]
00936e99 : CMP dword ptr [ECX + 0x60],EDI
00936e9c : JZ 0x00937062
00936ea2 : MOV EAX,[0x0172490c]
00936ea7 : CMP dword ptr [EAX + 0x8],EDI
00936eaa : JNZ 0x00936eb8
00936eac : MOV EAX,dword ptr [EAX + 0x1c]
00936eaf : CMP EAX,dword ptr [ECX + 0x5c]
00936eb2 : JZ 0x00937062
00936eb8 : CMP dword ptr [ECX + 0x7c],0x8
00936ebc : JC 0x00936ec3
00936ebe : MOV EAX,dword ptr [ECX + 0x68]
00936ec1 : JMP 0x00936ec6
00936ec3 : LEA EAX,[ECX + 0x68]
00936ec6 : PUSH EAX
00936ec7 : LEA ECX,[ESP + 0x6c]
00936ecb : CALL 0x00406460
00936ed0 : MOV BL,0x5
00936ed2 : MOV byte ptr [ESP + 0xb0],BL
00936ed9 : LEA EAX,[ESP + 0x68]
00936edd : PUSH EDI
00936ede : PUSH EAX
00936edf : MOV ECX,EAX
00936ee1 : CALL 0x00848d40
00936ee6 : PUSH 0xc6f354
00936eeb : LEA ECX,[ESP + 0x34]
00936eef : CALL 0x00406460
00936ef4 : MOV byte ptr [ESP + 0xb0],0x6
00936efc : LEA ECX,[ESP + 0x30]
00936f00 : PUSH ECX
00936f01 : MOV ECX,dword ptr [0x0172491c]
00936f07 : LEA EDI,[ESP + 0x50]
00936f0b : CALL 0x0081d120
00936f10 : MOV byte ptr [ESP + 0xb0],0x7
00936f18 : MOV ECX,0x8
00936f1d : CMP dword ptr [EAX + 0x18],ECX
00936f20 : JC 0x00936f27
00936f22 : MOV EAX,dword ptr [EAX + 0x4]
00936f25 : JMP 0x00936f2a
00936f27 : ADD EAX,0x4
00936f2a : CMP dword ptr [ESP + 0x80],ECX
00936f31 : MOV ECX,dword ptr [ESP + 0x6c]
00936f35 : JNC 0x00936f3b
00936f37 : LEA ECX,[ESP + 0x6c]
00936f3b : PUSH EAX
00936f3c : PUSH ECX
00936f3d : PUSH 0xc6f394
00936f42 : LEA ESI,[ESP + 0x90]
00936f49 : CALL 0x00404750
00936f4e : ADD ESP,0xc
00936f51 : MOV byte ptr [ESP + 0xb0],0x9
00936f59 : LEA ECX,[ESP + 0x4c]
00936f5d : CALL 0x00406560
00936f62 : MOV byte ptr [ESP + 0xb0],0xa
00936f6a : LEA ECX,[ESP + 0x30]
00936f6e : CALL 0x00406560
00936f73 : MOV EDX,dword ptr [0x00da9894]
00936f79 : MOV ECX,dword ptr [EDX]
00936f7b : PUSH 0x2
00936f7d : MOV EAX,ESI
00936f7f : PUSH EAX
00936f80 : CALL 0x008ede80
00936f85 : MOV ESI,EAX
00936f87 : TEST ESI,ESI
00936f89 : JZ 0x00936f9e
00936f8b : MOV EAX,dword ptr [ESI + 0x60]
00936f8e : TEST EAX,EAX
00936f90 : JZ 0x00936f97
00936f92 : PUSH ESI
00936f93 : PUSH 0x1
00936f95 : CALL EAX
00936f97 : MOV dword ptr [ESI + 0x60],0x9369d0
00936f9e : MOV byte ptr [ESP + 0xb0],BL
00936fa5 : LEA ECX,[ESP + 0x84]
00936fac : CALL 0x00406560
00936fb1 : MOV byte ptr [ESP + 0xb0],0x4
00936fb9 : LEA ECX,[ESP + 0x68]
00936fbd : CALL 0x00406560
00936fc2 : JMP 0x00937062
00936fc7 : CMP EBX,0x8
00936fca : JC 0x00936fd0
00936fcc : MOV EAX,dword ptr [ESI]
00936fce : JMP 0x00936fd2
00936fd0 : MOV EAX,ESI
00936fd2 : MOV ECX,0xc6f3a4
00936fd7 : MOV DX,word ptr [EAX]
00936fda : CMP DX,word ptr [ECX]
00936fdd : JNZ 0x00936ffd
00936fdf : CMP DX,DI
00936fe2 : JZ 0x00936ff9
00936fe4 : MOV DX,word ptr [EAX + 0x2]
00936fe8 : CMP DX,word ptr [ECX + 0x2]
00936fec : JNZ 0x00936ffd
00936fee : ADD EAX,0x4
00936ff1 : ADD ECX,0x4
00936ff4 : CMP DX,DI
00936ff7 : JNZ 0x00936fd7
00936ff9 : XOR EAX,EAX
00936ffb : JMP 0x00937002
00936ffd : SBB EAX,EAX
00936fff : SBB EAX,-0x1
00937002 : CMP EAX,EDI
00937004 : JNZ 0x0093704f
00937006 : MOV EDX,dword ptr [ESP + 0x14]
0093700a : MOV EAX,dword ptr [EDX + 0x60]
0093700d : CMP byte ptr [EAX + 0x98],0x54
00937014 : MOV CL,0x1
00937016 : JBE 0x0093701a
00937018 : XOR CL,CL
0093701a : MOV EDX,dword ptr [0x00da9894]
00937020 : MOV EAX,dword ptr [EDX]
00937022 : CMP EAX,EDI
00937024 : JZ 0x00937062
00937026 : CMP dword ptr [EAX + 0x114],EDI
0093702c : JZ 0x00937062
0093702e : MOV EAX,dword ptr [EAX + 0x114]
00937034 : MOV EDX,dword ptr [EAX]
00937036 : MOV EDX,dword ptr [EDX + 0x4]
00937039 : MOVZX ECX,CL
0093703c : PUSH ECX
0093703d : PUSH 0xc6f3b4
00937042 : PUSH 0xc6f3b8
00937047 : PUSH EAX
00937048 : CALL EDX
0093704a : ADD ESP,0x10
0093704d : JMP 0x00937062
0093704f : MOV EAX,dword ptr [ESP + 0x18]
00937053 : MOV ECX,dword ptr [ESP + 0x1c]
00937057 : PUSH EAX
00937058 : PUSH ECX
00937059 : MOV ECX,dword ptr [ESP + 0x1c]
0093705d : CALL 0x0093bff0
00937062 : MOV dword ptr [ESP + 0xb0],0xffffffff
0093706d : LEA ESI,[ESP + 0x20]
00937071 : CALL 0x004042c0
00937076 : MOV ECX,dword ptr [ESP + 0xa8]
0093707d : MOV dword ptr FS:[0x0],ECX
00937084 : POP ECX
00937085 : POP EDI
00937086 : POP ESI
00937087 : POP EBX
00937088 : MOV ECX,dword ptr [ESP + 0x90]
0093708f : XOR ECX,ESP
00937091 : CALL 0x00633e6b
00937096 : MOV ESP,EBP
00937098 : POP EBP
00937099 : RET 0x8
