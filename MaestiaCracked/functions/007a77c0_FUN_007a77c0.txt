PROGRAM  : Maestia.exe
FUNCTION : FUN_007a77c0
ENTRY    : 007a77c0
BODY     : [[007a77c0, 007a7a94]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007a77c0(char param_1,char param_2)

{
  undefined4 uVar1;
  undefined4 ***pppuVar2;
  int in_ECX;
  int in_EDX;
  int *piVar3;
  undefined1 auStack_74 [12];
  int local_68;
  undefined4 local_64;
  tagRECT local_60;
  undefined4 local_50;
  undefined4 uStack_4c;
  int iStack_48;
  int iStack_44;
  undefined4 **local_3c [4];
  undefined4 local_2c;
  uint local_28;
  uint local_24;
  void *local_1c;
  undefined1 *puStack_18;
  undefined4 local_14;
  
  local_14 = 0xffffffff;
  puStack_18 = &LAB_00b19c55;
  local_1c = ExceptionList;
  local_24 = DAT_00d66fa0 ^ (uint)auStack_74;
  ExceptionList = &local_1c;
  local_68 = 0;
  local_60.left = 0;
  local_60.top = 0;
  local_60.right = 0;
  local_60.bottom = 0;
  if ((int)(*(int *)(in_EDX + 0x238) - *(int *)(in_EDX + 0x234) & 0xfffffffcU) < 1) {
    if (*(int *)(in_EDX + 0x270) - *(int *)(in_EDX + 0x268) < 1) {
      param_2 = '\0';
      if (*(int *)(in_ECX + 0x1328) == -1) {
        piVar3 = (int *)0x0;
      }
      else {
        piVar3 = *(int **)(*(int *)(in_ECX + 0x1328) * 0x54 + *(int *)(DAT_01725228 + 8));
      }
      local_60.left = *(LONG *)(in_EDX + 0x294);
      local_60.bottom = *(int *)(in_EDX + 0x2a0);
      local_60.right = *(int *)(in_EDX + 0x29c);
      local_60.top = *(LONG *)(in_EDX + 0x298);
    }
    else {
      param_1 = '\0';
      SetRect(&local_60,0,0,*(int *)(in_EDX + 0x270) - *(int *)(in_EDX + 0x268),
              *(int *)(in_EDX + 0x274) - *(int *)(in_EDX + 0x26c));
      if (*(int *)(in_ECX + 0x1324) == -1) {
        piVar3 = (int *)0x0;
      }
      else {
        piVar3 = *(int **)(*(int *)(in_ECX + 0x1324) * 0x54 + *(int *)(DAT_01725228 + 8));
      }
    }
    local_28 = 7;
    local_2c = 0;
    local_3c[0] = (undefined4 **)((uint)local_3c[0] & 0xffff0000);
    local_14 = 1;
    if (param_2 == '\0') {
      FUN_00405eb0(in_EDX + 0x278,0,0xffffffff);
      local_64 = *(undefined4 *)(in_EDX + 0x2a4);
    }
    else {
      FUN_00405eb0(in_EDX + 0x248,0,0xffffffff);
      local_64 = *(undefined4 *)(in_EDX + 0x264);
    }
    if (param_1 != '\0') {
      local_60.right = *(int *)(in_EDX + 0x29c) - *(int *)(in_EDX + 0x294);
      local_60.bottom = *(int *)(in_EDX + 0x2a0) - *(int *)(in_EDX + 0x298);
      local_50 = 0;
      uStack_4c = 0;
      local_60.left = 0;
      local_60.top = 0;
      pppuVar2 = (undefined4 ***)local_3c[0];
      if (local_28 < 8) {
        pppuVar2 = local_3c;
      }
      iStack_48 = local_60.right;
      iStack_44 = local_60.bottom;
      local_68 = (**(code **)(*piVar3 + 0x3c))
                           (piVar3,0,pppuVar2,0xffffffff,&local_50,1,*(undefined4 *)(in_EDX + 0x2a8)
                           );
      if (local_68 < 0) {
        local_14 = 0xffffffff;
        FUN_00406560();
        goto LAB_007a7a75;
      }
    }
    if (piVar3 != (int *)0x0) {
      pppuVar2 = (undefined4 ***)local_3c[0];
      if (local_28 < 8) {
        pppuVar2 = local_3c;
      }
      local_68 = (**(code **)(*piVar3 + 0x3c))(piVar3,0,pppuVar2,0xffffffff,&local_60,1,local_64);
    }
    local_14 = 0xffffffff;
    if (7 < local_28) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_28 = 7;
    local_2c = 0;
    local_3c[0] = (undefined4 **)((uint)local_3c[0] & 0xffff0000);
  }
  else if ((*(int *)(in_ECX + 0x1324) != -1) &&
          (*(int *)(*(int *)(in_ECX + 0x1324) * 0x54 + *(int *)(DAT_01725228 + 8)) != 0)) {
    uVar1 = FUN_00404750(L"DrawText Failed (%d)",0x80004005,DAT_00d66fa0 ^ (uint)&stack0xffffff80);
    local_14 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaLib::AvaUINamePadContainer::DrawTextW",0x39f,uVar1);
    }
    local_14 = 0xffffffff;
    FUN_00406560();
    goto LAB_007a7a75;
  }
  local_14 = 0xffffffff;
LAB_007a7a75:
  ExceptionList = local_1c;
  __security_check_cookie(local_24 ^ (uint)auStack_74);
  return;
}



============================================================
DISASSEMBLY
============================================================
007a77c0 : PUSH EBP
007a77c1 : MOV EBP,ESP
007a77c3 : AND ESP,0xfffffff0
007a77c6 : PUSH -0x1
007a77c8 : PUSH 0xb19c55
007a77cd : MOV EAX,FS:[0x0]
007a77d3 : PUSH EAX
007a77d4 : SUB ESP,0x58
007a77d7 : MOV EAX,[0x00d66fa0]
007a77dc : XOR EAX,ESP
007a77de : MOV dword ptr [ESP + 0x50],EAX
007a77e2 : PUSH EBX
007a77e3 : PUSH ESI
007a77e4 : PUSH EDI
007a77e5 : MOV EAX,[0x00d66fa0]
007a77ea : XOR EAX,ESP
007a77ec : PUSH EAX
007a77ed : LEA EAX,[ESP + 0x68]
007a77f1 : MOV FS:[0x0],EAX
007a77f7 : MOV ESI,EDX
007a77f9 : MOV EAX,dword ptr [ESI + 0x238]
007a77ff : SUB EAX,dword ptr [ESI + 0x234]
007a7805 : XOR EBX,EBX
007a7807 : MOV EDI,ECX
007a7809 : MOV dword ptr [ESP + 0x1c],EBX
007a780d : MOV dword ptr [ESP + 0x24],EBX
007a7811 : MOV dword ptr [ESP + 0x28],EBX
007a7815 : MOV dword ptr [ESP + 0x2c],EBX
007a7819 : MOV dword ptr [ESP + 0x30],EBX
007a781d : TEST EAX,0xfffffffc
007a7822 : JLE 0x007a789b
007a7824 : MOV EDI,dword ptr [EDI + 0x1324]
007a782a : CMP EDI,-0x1
007a782d : JZ 0x007a7a71
007a7833 : MOV ECX,dword ptr [0x01725228]
007a7839 : IMUL EDI,EDI,0x54
007a783c : MOV EDX,dword ptr [ECX + 0x8]
007a783f : CMP dword ptr [EDI + EDX*0x1],EBX
007a7842 : JZ 0x007a7a71
007a7848 : PUSH 0x80004005
007a784d : PUSH 0xc1726c
007a7852 : LEA ESI,[ESP + 0x4c]
007a7856 : CALL 0x00404750
007a785b : ADD ESP,0x8
007a785e : MOV dword ptr [ESP + 0x70],EBX
007a7862 : MOV ECX,dword ptr [0x00da98e8]
007a7868 : MOV ECX,dword ptr [ECX]
007a786a : CMP ECX,EBX
007a786c : JZ 0x007a7880
007a786e : MOV EDX,dword ptr [ECX]
007a7870 : PUSH EAX
007a7871 : MOV EAX,dword ptr [EDX + 0x14]
007a7874 : PUSH 0x39f
007a7879 : PUSH 0xc17440
007a787e : CALL EAX
007a7880 : MOV dword ptr [ESP + 0x70],0xffffffff
007a7888 : LEA ECX,[ESP + 0x44]
007a788c : CALL 0x00406560
007a7891 : MOV EAX,0x80004005
007a7896 : JMP 0x007a7a75
007a789b : MOV EAX,dword ptr [ESI + 0x270]
007a78a1 : SUB EAX,dword ptr [ESI + 0x268]
007a78a7 : CMP EAX,EBX
007a78a9 : JLE 0x007a78f5
007a78ab : MOV ECX,dword ptr [ESI + 0x274]
007a78b1 : SUB ECX,dword ptr [ESI + 0x26c]
007a78b7 : MOV EDX,dword ptr [ESI + 0x270]
007a78bd : SUB EDX,dword ptr [ESI + 0x268]
007a78c3 : PUSH ECX
007a78c4 : PUSH EDX
007a78c5 : PUSH EBX
007a78c6 : PUSH EBX
007a78c7 : LEA EAX,[ESP + 0x34]
007a78cb : PUSH EAX
007a78cc : MOV byte ptr [EBP + 0x8],BL
007a78cf : CALL dword ptr [0x00b85430]
007a78d5 : MOV EDI,dword ptr [EDI + 0x1324]
007a78db : CMP EDI,-0x1
007a78de : JZ 0x007a78f1
007a78e0 : MOV ECX,dword ptr [0x01725228]
007a78e6 : IMUL EDI,EDI,0x54
007a78e9 : MOV EDX,dword ptr [ECX + 0x8]
007a78ec : MOV EDI,dword ptr [EDI + EDX*0x1]
007a78ef : JMP 0x007a793d
007a78f1 : XOR EDI,EDI
007a78f3 : JMP 0x007a793d
007a78f5 : MOV EDI,dword ptr [EDI + 0x1328]
007a78fb : MOV byte ptr [EBP + 0xc],BL
007a78fe : CMP EDI,-0x1
007a7901 : JZ 0x007a7913
007a7903 : MOV EAX,[0x01725228]
007a7908 : IMUL EDI,EDI,0x54
007a790b : MOV ECX,dword ptr [EAX + 0x8]
007a790e : MOV EDI,dword ptr [EDI + ECX*0x1]
007a7911 : JMP 0x007a7915
007a7913 : XOR EDI,EDI
007a7915 : MOV EDX,dword ptr [ESI + 0x294]
007a791b : MOV EAX,dword ptr [ESI + 0x2a0]
007a7921 : MOV ECX,dword ptr [ESI + 0x29c]
007a7927 : MOV dword ptr [ESP + 0x24],EDX
007a792b : MOV EDX,dword ptr [ESI + 0x298]
007a7931 : MOV dword ptr [ESP + 0x28],EDX
007a7935 : MOV dword ptr [ESP + 0x2c],ECX
007a7939 : MOV dword ptr [ESP + 0x30],EAX
007a793d : XOR EAX,EAX
007a793f : MOV dword ptr [ESP + 0x5c],0x7
007a7947 : MOV dword ptr [ESP + 0x58],EBX
007a794b : MOV word ptr [ESP + 0x48],AX
007a7950 : MOV dword ptr [ESP + 0x70],0x1
007a7958 : PUSH -0x1
007a795a : PUSH EBX
007a795b : CMP byte ptr [EBP + 0xc],BL
007a795e : JZ 0x007a797c
007a7960 : LEA ECX,[ESI + 0x248]
007a7966 : PUSH ECX
007a7967 : LEA ECX,[ESP + 0x50]
007a796b : CALL 0x00405eb0
007a7970 : MOV EDX,dword ptr [ESI + 0x264]
007a7976 : MOV dword ptr [ESP + 0x20],EDX
007a797a : JMP 0x007a7996
007a797c : LEA EAX,[ESI + 0x278]
007a7982 : PUSH EAX
007a7983 : LEA ECX,[ESP + 0x50]
007a7987 : CALL 0x00405eb0
007a798c : MOV ECX,dword ptr [ESI + 0x2a4]
007a7992 : MOV dword ptr [ESP + 0x20],ECX
007a7996 : CMP byte ptr [EBP + 0x8],BL
007a7999 : JZ 0x007a7a17
007a799b : MOV EAX,dword ptr [ESI + 0x29c]
007a79a1 : SUB EAX,dword ptr [ESI + 0x294]
007a79a7 : MOV ECX,dword ptr [ESI + 0x2a0]
007a79ad : SUB ECX,dword ptr [ESI + 0x298]
007a79b3 : CMP dword ptr [ESP + 0x5c],0x8
007a79b8 : MOV dword ptr [ESP + 0x3c],EAX
007a79bc : MOV EAX,dword ptr [ESP + 0x48]
007a79c0 : MOV dword ptr [ESP + 0x34],EBX
007a79c4 : MOV dword ptr [ESP + 0x38],EBX
007a79c8 : MOV dword ptr [ESP + 0x40],ECX
007a79cc : MOVDQA XMM0,xmmword ptr [ESP + 0x34]
007a79d2 : MOVDQA xmmword ptr [ESP + 0x24],XMM0
007a79d8 : JNC 0x007a79de
007a79da : LEA EAX,[ESP + 0x48]
007a79de : MOV ECX,dword ptr [ESI + 0x2a8]
007a79e4 : MOV EDX,dword ptr [EDI]
007a79e6 : MOV EDX,dword ptr [EDX + 0x3c]
007a79e9 : PUSH ECX
007a79ea : PUSH 0x1
007a79ec : LEA ECX,[ESP + 0x3c]
007a79f0 : PUSH ECX
007a79f1 : PUSH -0x1
007a79f3 : PUSH EAX
007a79f4 : PUSH EBX
007a79f5 : PUSH EDI
007a79f6 : CALL EDX
007a79f8 : MOV ESI,EAX
007a79fa : CMP ESI,EBX
007a79fc : MOV dword ptr [ESP + 0x1c],ESI
007a7a00 : JGE 0x007a7a17
007a7a02 : MOV dword ptr [ESP + 0x70],0xffffffff
007a7a0a : LEA ECX,[ESP + 0x44]
007a7a0e : CALL 0x00406560
007a7a13 : MOV EAX,ESI
007a7a15 : JMP 0x007a7a75
007a7a17 : CMP EDI,EBX
007a7a19 : JZ 0x007a7a46
007a7a1b : CMP dword ptr [ESP + 0x5c],0x8
007a7a20 : MOV EAX,dword ptr [ESP + 0x48]
007a7a24 : JNC 0x007a7a2a
007a7a26 : LEA EAX,[ESP + 0x48]
007a7a2a : MOV EDX,dword ptr [ESP + 0x20]
007a7a2e : MOV ECX,dword ptr [EDI]
007a7a30 : PUSH EDX
007a7a31 : PUSH 0x1
007a7a33 : LEA EDX,[ESP + 0x2c]
007a7a37 : PUSH EDX
007a7a38 : PUSH -0x1
007a7a3a : PUSH EAX
007a7a3b : MOV EAX,dword ptr [ECX + 0x3c]
007a7a3e : PUSH EBX
007a7a3f : PUSH EDI
007a7a40 : CALL EAX
007a7a42 : MOV dword ptr [ESP + 0x1c],EAX
007a7a46 : MOV dword ptr [ESP + 0x70],0xffffffff
007a7a4e : CMP dword ptr [ESP + 0x5c],0x8
007a7a53 : JC 0x007a7a5e
007a7a55 : MOV ECX,dword ptr [ESP + 0x48]
007a7a59 : CALL 0x006f04e0
007a7a5e : XOR ECX,ECX
007a7a60 : MOV dword ptr [ESP + 0x5c],0x7
007a7a68 : MOV dword ptr [ESP + 0x58],EBX
007a7a6c : MOV word ptr [ESP + 0x48],CX
007a7a71 : MOV EAX,dword ptr [ESP + 0x1c]
007a7a75 : MOV ECX,dword ptr [ESP + 0x68]
007a7a79 : MOV dword ptr FS:[0x0],ECX
007a7a80 : POP ECX
007a7a81 : POP EDI
007a7a82 : POP ESI
007a7a83 : POP EBX
007a7a84 : MOV ECX,dword ptr [ESP + 0x50]
007a7a88 : XOR ECX,ESP
007a7a8a : CALL 0x00633e6b
007a7a8f : MOV ESP,EBP
007a7a91 : POP EBP
007a7a92 : RET 0x8
