PROGRAM  : Maestia.exe
FUNCTION : FUN_00755280
ENTRY    : 00755280
BODY     : [[00755280, 007553f4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00755280(void)

{
  int *piVar1;
  float fVar2;
  uint uVar3;
  int iVar4;
  int in_ECX;
  undefined1 local_44 [4];
  undefined2 local_40;
  undefined4 local_30;
  uint local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined **local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b18b3c;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(in_ECX + 4) != 0) {
    local_14 = (int *)GetTickCount();
    fVar2 = (float)(int)local_14;
    if ((int)local_14 < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    (**(code **)(**(int **)(in_ECX + 4) + 0x78))
              (*(int **)(in_ECX + 4),"fTime",fVar2 * 0.00033333333,uVar3);
    local_28 = 0x40800000;
    local_24 = 0x40800000;
    local_20 = 0;
    local_1c = 0;
    (**(code **)(**(int **)(in_ECX + 4) + 0x50))
              (*(int **)(in_ECX + 4),"vRenderParam",&local_28,0x10);
    if (*(int *)(in_ECX + 0xc) == 0) {
      FUN_00406460(L"WaterTile.bmp");
      local_8 = 0;
      iVar4 = (**(code **)(*DAT_01725204 + 4))(&local_18,local_44);
      local_8._0_1_ = 1;
      piVar1 = *(int **)(in_ECX + 0xc);
      if (piVar1 != *(int **)(iVar4 + 4)) {
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 0x30))();
        }
        if (*(int *)(iVar4 + 4) != 0) {
          InterlockedIncrement((LONG *)(*(int *)(iVar4 + 4) + 0x2c));
        }
        *(undefined4 *)(in_ECX + 0xc) = *(undefined4 *)(iVar4 + 4);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      local_18 = &PTR_FUN_00cd4964;
      if (local_14 != (int *)0x0) {
        (**(code **)(*local_14 + 0x30))();
        local_14 = (int *)0x0;
      }
      local_8 = 0xffffffff;
      if (7 < local_2c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_2c = 7;
      local_30 = 0;
      local_40 = 0;
    }
    piVar1 = *(int **)(in_ECX + 0xc);
    if (piVar1 != (int *)0x0) {
      (**(code **)(*piVar1 + 0x20))();
      (**(code **)(**(int **)(in_ECX + 4) + 0xd0))(*(int **)(in_ECX + 4),"texSrc",piVar1[0xe]);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00755280 : PUSH EBP
00755281 : MOV EBP,ESP
00755283 : PUSH -0x1
00755285 : PUSH 0xb18b3c
0075528a : MOV EAX,FS:[0x0]
00755290 : PUSH EAX
00755291 : SUB ESP,0x34
00755294 : PUSH EBX
00755295 : PUSH ESI
00755296 : PUSH EDI
00755297 : MOV EAX,[0x00d66fa0]
0075529c : XOR EAX,EBP
0075529e : PUSH EAX
0075529f : LEA EAX,[EBP + -0xc]
007552a2 : MOV FS:[0x0],EAX
007552a8 : MOV ESI,ECX
007552aa : XOR EBX,EBX
007552ac : CMP dword ptr [ESI + 0x4],EBX
007552af : JZ 0x007553e1
007552b5 : CALL dword ptr [0x00b850d8]
007552bb : MOV dword ptr [EBP + -0x10],EAX
007552be : FILD dword ptr [EBP + -0x10]
007552c1 : TEST EAX,EAX
007552c3 : JGE 0x007552cb
007552c5 : FADD float ptr [0x00cdf0e0]
007552cb : MOV EAX,dword ptr [ESI + 0x4]
007552ce : FMUL float ptr [0x00cdf590]
007552d4 : MOV ECX,dword ptr [EAX]
007552d6 : MOV EDX,dword ptr [ECX + 0x78]
007552d9 : PUSH ECX
007552da : FSTP float ptr [ESP]
007552dd : PUSH 0xc0aa9c
007552e2 : PUSH EAX
007552e3 : CALL EDX
007552e5 : MOVSS XMM0,dword ptr [0x00cdf21c]
007552ed : MOV EAX,dword ptr [ESI + 0x4]
007552f0 : PUSH 0x10
007552f2 : LEA EDX,[EBP + -0x24]
007552f5 : MOVSS dword ptr [EBP + -0x24],XMM0
007552fa : MOVSS dword ptr [EBP + -0x20],XMM0
007552ff : XORPS XMM0,XMM0
00755302 : PUSH EDX
00755303 : MOVSS dword ptr [EBP + -0x1c],XMM0
00755308 : MOVSS dword ptr [EBP + -0x18],XMM0
0075530d : MOV ECX,dword ptr [EAX]
0075530f : PUSH 0xc0aaa4
00755314 : PUSH EAX
00755315 : MOV EAX,dword ptr [ECX + 0x50]
00755318 : CALL EAX
0075531a : CMP dword ptr [ESI + 0xc],EBX
0075531d : JNZ 0x007553ba
00755323 : PUSH 0xc0aa0c
00755328 : LEA ECX,[EBP + -0x40]
0075532b : CALL 0x00406460
00755330 : MOV dword ptr [EBP + -0x4],EBX
00755333 : MOV ECX,dword ptr [0x01725204]
00755339 : MOV EDX,dword ptr [ECX]
0075533b : MOV EDX,dword ptr [EDX + 0x4]
0075533e : LEA EAX,[EBP + -0x40]
00755341 : PUSH EAX
00755342 : LEA EAX,[EBP + -0x14]
00755345 : PUSH EAX
00755346 : CALL EDX
00755348 : MOV EDI,EAX
0075534a : MOV byte ptr [EBP + -0x4],0x1
0075534e : MOV EAX,dword ptr [EDI + 0x4]
00755351 : MOV ECX,dword ptr [ESI + 0xc]
00755354 : CMP ECX,EAX
00755356 : JZ 0x0075537a
00755358 : CMP ECX,EBX
0075535a : JZ 0x00755363
0075535c : MOV EAX,dword ptr [ECX]
0075535e : MOV EDX,dword ptr [EAX + 0x30]
00755361 : CALL EDX
00755363 : MOV EAX,dword ptr [EDI + 0x4]
00755366 : CMP EAX,EBX
00755368 : JZ 0x00755374
0075536a : ADD EAX,0x2c
0075536d : PUSH EAX
0075536e : CALL dword ptr [0x00b850dc]
00755374 : MOV EAX,dword ptr [EDI + 0x4]
00755377 : MOV dword ptr [ESI + 0xc],EAX
0075537a : MOV byte ptr [EBP + -0x4],BL
0075537d : MOV ECX,dword ptr [EBP + -0x10]
00755380 : MOV dword ptr [EBP + -0x14],0xcd4964
00755387 : CMP ECX,EBX
00755389 : JZ 0x00755395
0075538b : MOV EDX,dword ptr [ECX]
0075538d : MOV EAX,dword ptr [EDX + 0x30]
00755390 : CALL EAX
00755392 : MOV dword ptr [EBP + -0x10],EBX
00755395 : MOV dword ptr [EBP + -0x4],0xffffffff
0075539c : CMP dword ptr [EBP + -0x28],0x8
007553a0 : JC 0x007553aa
007553a2 : MOV ECX,dword ptr [EBP + -0x3c]
007553a5 : CALL 0x006f04e0
007553aa : XOR ECX,ECX
007553ac : MOV dword ptr [EBP + -0x28],0x7
007553b3 : MOV dword ptr [EBP + -0x2c],EBX
007553b6 : MOV word ptr [EBP + -0x3c],CX
007553ba : MOV EDI,dword ptr [ESI + 0xc]
007553bd : CMP EDI,EBX
007553bf : JZ 0x007553e1
007553c1 : MOV EDX,dword ptr [EDI]
007553c3 : MOV EAX,dword ptr [EDX + 0x20]
007553c6 : MOV ECX,EDI
007553c8 : CALL EAX
007553ca : MOV EDX,dword ptr [EDI + 0x38]
007553cd : MOV ESI,dword ptr [ESI + 0x4]
007553d0 : MOV ECX,dword ptr [ESI]
007553d2 : MOV EAX,dword ptr [ECX + 0xd0]
007553d8 : PUSH EDX
007553d9 : PUSH 0xc0aab4
007553de : PUSH ESI
007553df : CALL EAX
007553e1 : MOV ECX,dword ptr [EBP + -0xc]
007553e4 : MOV dword ptr FS:[0x0],ECX
007553eb : POP ECX
007553ec : POP EDI
007553ed : POP ESI
007553ee : POP EBX
007553ef : MOV ESP,EBP
007553f1 : POP EBP
007553f2 : RET 0x4
