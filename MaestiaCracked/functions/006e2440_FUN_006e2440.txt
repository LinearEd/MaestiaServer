PROGRAM  : Maestia.exe
FUNCTION : FUN_006e2440
ENTRY    : 006e2440
BODY     : [[006e2440, 006e2555]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006e2440(int *param_1,char param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  
  iVar1 = param_1[0x6a];
  iVar2 = *(int *)(iVar1 + 0x18);
  if (param_1[0x13] != 0) {
    param_1[0x13] = 2;
  }
  if (param_2 == '\0') {
    if (param_1[0x13] == 2) {
      *(undefined1 **)(iVar1 + 4) = &LAB_006e20b0;
    }
    else {
      *(code **)(iVar1 + 4) = FUN_006e1ff0;
    }
    *(code **)(iVar1 + 8) = GThread::OnExit;
    iVar4 = param_1[0x1c];
    if (iVar4 < 1) {
      *(undefined4 *)(*param_1 + 0x14) = 0x38;
      *(undefined4 *)(*param_1 + 0x18) = 1;
      (**(code **)*param_1)(param_1);
    }
    if (0x100 < iVar4) {
      *(undefined4 *)(*param_1 + 0x14) = 0x39;
      *(undefined4 *)(*param_1 + 0x18) = 0x100;
      (**(code **)*param_1)(param_1);
    }
    if (param_1[0x13] == 2) {
      iVar4 = (param_1[0x17] + 2) * 6;
      if (*(int *)(iVar1 + 0x20) == 0) {
        uVar3 = (**(code **)(param_1[1] + 4))(param_1,1,iVar4);
        *(undefined4 *)(iVar1 + 0x20) = uVar3;
      }
      FUN_006d9620(*(undefined4 *)(iVar1 + 0x20),iVar4);
      if (*(int *)(iVar1 + 0x28) == 0) {
        FUN_006e2370();
      }
      *(undefined1 *)(iVar1 + 0x24) = 0;
    }
  }
  else {
    *(undefined1 **)(iVar1 + 4) = &LAB_006e1350;
    *(undefined1 **)(iVar1 + 8) = &LAB_006e2410;
    *(undefined1 *)(iVar1 + 0x1c) = 1;
  }
  if (*(char *)(iVar1 + 0x1c) != '\0') {
    iVar4 = 0;
    do {
      FUN_006d9620(*(undefined4 *)(iVar2 + iVar4 * 4),0x1000);
      iVar4 = iVar4 + 1;
    } while (iVar4 < 0x20);
    *(undefined1 *)(iVar1 + 0x1c) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006e2440 : PUSH ESI
006e2441 : MOV ESI,dword ptr [ESP + 0x8]
006e2445 : CMP dword ptr [ESI + 0x4c],0x0
006e2449 : PUSH EDI
006e244a : MOV EDI,dword ptr [ESI + 0x1a8]
006e2450 : MOV EAX,dword ptr [EDI + 0x18]
006e2453 : MOV dword ptr [ESP + 0xc],EAX
006e2457 : JZ 0x006e2460
006e2459 : MOV dword ptr [ESI + 0x4c],0x2
006e2460 : CMP byte ptr [ESP + 0x10],0x0
006e2465 : JZ 0x006e247e
006e2467 : MOV dword ptr [EDI + 0x4],0x6e1350
006e246e : MOV dword ptr [EDI + 0x8],0x6e2410
006e2475 : MOV byte ptr [EDI + 0x1c],0x1
006e2479 : JMP 0x006e252c
006e247e : CMP dword ptr [ESI + 0x4c],0x2
006e2482 : JNZ 0x006e248d
006e2484 : MOV dword ptr [EDI + 0x4],0x6e20b0
006e248b : JMP 0x006e2494
006e248d : MOV dword ptr [EDI + 0x4],0x6e1ff0
006e2494 : PUSH EBP
006e2495 : MOV dword ptr [EDI + 0x8],0x51d420
006e249c : MOV EBP,dword ptr [ESI + 0x70]
006e249f : CMP EBP,0x1
006e24a2 : JGE 0x006e24c0
006e24a4 : MOV ECX,dword ptr [ESI]
006e24a6 : MOV dword ptr [ECX + 0x14],0x38
006e24ad : MOV EDX,dword ptr [ESI]
006e24af : MOV dword ptr [EDX + 0x18],0x1
006e24b6 : MOV EAX,dword ptr [ESI]
006e24b8 : MOV ECX,dword ptr [EAX]
006e24ba : PUSH ESI
006e24bb : CALL ECX
006e24bd : ADD ESP,0x4
006e24c0 : CMP EBP,0x100
006e24c6 : JLE 0x006e24e4
006e24c8 : MOV EDX,dword ptr [ESI]
006e24ca : MOV dword ptr [EDX + 0x14],0x39
006e24d1 : MOV EAX,dword ptr [ESI]
006e24d3 : MOV dword ptr [EAX + 0x18],0x100
006e24da : MOV ECX,dword ptr [ESI]
006e24dc : MOV EDX,dword ptr [ECX]
006e24de : PUSH ESI
006e24df : CALL EDX
006e24e1 : ADD ESP,0x4
006e24e4 : CMP dword ptr [ESI + 0x4c],0x2
006e24e8 : JNZ 0x006e252b
006e24ea : MOV EAX,dword ptr [ESI + 0x5c]
006e24ed : ADD EAX,0x2
006e24f0 : LEA EBP,[EAX + EAX*0x2]
006e24f3 : ADD EBP,EBP
006e24f5 : CMP dword ptr [EDI + 0x20],0x0
006e24f9 : JNZ 0x006e250d
006e24fb : MOV EAX,dword ptr [ESI + 0x4]
006e24fe : MOV ECX,dword ptr [EAX + 0x4]
006e2501 : PUSH EBP
006e2502 : PUSH 0x1
006e2504 : PUSH ESI
006e2505 : CALL ECX
006e2507 : ADD ESP,0xc
006e250a : MOV dword ptr [EDI + 0x20],EAX
006e250d : MOV EDX,dword ptr [EDI + 0x20]
006e2510 : PUSH EBP
006e2511 : PUSH EDX
006e2512 : CALL 0x006d9620
006e2517 : ADD ESP,0x8
006e251a : CMP dword ptr [EDI + 0x28],0x0
006e251e : JNZ 0x006e2527
006e2520 : MOV EAX,ESI
006e2522 : CALL 0x006e2370
006e2527 : MOV byte ptr [EDI + 0x24],0x0
006e252b : POP EBP
006e252c : CMP byte ptr [EDI + 0x1c],0x0
006e2530 : JZ 0x006e2553
006e2532 : XOR ESI,ESI
006e2534 : MOV EAX,dword ptr [ESP + 0xc]
006e2538 : MOV ECX,dword ptr [EAX + ESI*0x4]
006e253b : PUSH 0x1000
006e2540 : PUSH ECX
006e2541 : CALL 0x006d9620
006e2546 : INC ESI
006e2547 : ADD ESP,0x8
006e254a : CMP ESI,0x20
006e254d : JL 0x006e2534
006e254f : MOV byte ptr [EDI + 0x1c],0x0
006e2553 : POP EDI
006e2554 : POP ESI
006e2555 : RET
