PROGRAM  : Maestia.exe
FUNCTION : FUN_00661ec0
ENTRY    : 00661ec0
BODY     : [[00661ec0, 00661fb1]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00661f17) */

int FUN_00661ec0(undefined4 param_1,undefined4 param_2,int *param_3)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  undefined4 unaff_EDI;
  int aiStack_8 [2];
  
  piVar1 = param_3;
  iVar2 = (**(code **)(*param_3 + 0x14))();
  if (iVar2 < 0) {
    return iVar2;
  }
  param_2 = 0;
  iVar2 = 0;
  iVar3 = (**(code **)(*piVar1 + 0xc))(piVar1,1,&param_2,&stack0xfffffff4);
  if (iVar3 == 0) {
    do {
      if (aiStack_8[0] == 0) {
        iVar3 = -0x7ffbfdf9;
      }
      else {
        iVar3 = FUN_00661e00(unaff_EDI,aiStack_8[0]);
        if ((((iVar3 < 0) && (-1 < iVar2)) && (iVar3 != -0x7fffbffb)) &&
           ((iVar3 != -0x7ff8ffa9 && (iVar3 != -0x7ffbfdd6)))) {
          iVar2 = iVar3;
        }
      }
      if (aiStack_8[0] != 0) {
        FUN_00664670(aiStack_8[0]);
        aiStack_8[0] = 0;
      }
      if (iVar3 == 0) {
        return 0;
      }
      iVar3 = (**(code **)(*piVar1 + 0xc))(piVar1,1,aiStack_8,&stack0xffffffe4);
    } while (iVar3 == 0);
    if (iVar2 != 0) {
      return iVar2;
    }
  }
  return -0x7ffbfdf9;
}



============================================================
DISASSEMBLY
============================================================
00661ec0 : SUB ESP,0x8
00661ec3 : PUSH EBP
00661ec4 : PUSH EDI
00661ec5 : MOV EDI,dword ptr [ESP + 0x1c]
00661ec9 : MOV EAX,dword ptr [EDI]
00661ecb : MOV dword ptr [ESP + 0xc],ECX
00661ecf : MOV ECX,dword ptr [EAX + 0x14]
00661ed2 : PUSH EDI
00661ed3 : CALL ECX
00661ed5 : XOR EBP,EBP
00661ed7 : CMP EAX,EBP
00661ed9 : JL 0x00661faa
00661edf : MOV EDX,dword ptr [EDI]
00661ee1 : MOV EDX,dword ptr [EDX + 0xc]
00661ee4 : PUSH EBX
00661ee5 : PUSH ESI
00661ee6 : LEA EAX,[ESP + 0x10]
00661eea : PUSH EAX
00661eeb : LEA ECX,[ESP + 0x28]
00661eef : PUSH ECX
00661ef0 : PUSH 0x1
00661ef2 : PUSH EDI
00661ef3 : MOV dword ptr [ESP + 0x34],EBP
00661ef7 : MOV dword ptr [ESP + 0x20],EBP
00661efb : XOR EBX,EBX
00661efd : CALL EDX
00661eff : TEST EAX,EAX
00661f01 : JNZ 0x00661f95
00661f07 : MOV ECX,dword ptr [ESP + 0x24]
00661f0b : CMP ECX,EBP
00661f0d : JZ 0x00661f5a
00661f0f : MOV EAX,dword ptr [ESP + 0x20]
00661f13 : CMP EAX,EBP
00661f15 : JZ 0x00661f21
00661f17 : PUSH EAX
00661f18 : CALL 0x00664460
00661f1d : TEST EAX,EAX
00661f1f : JZ 0x00661f5a
00661f21 : MOV EAX,dword ptr [ESP + 0x24]
00661f25 : MOV ECX,dword ptr [ESP + 0x1c]
00661f29 : PUSH EAX
00661f2a : PUSH ECX
00661f2b : MOV ECX,dword ptr [ESP + 0x1c]
00661f2f : CALL 0x00661e00
00661f34 : MOV ESI,EAX
00661f36 : CMP ESI,EBP
00661f38 : JGE 0x00661f5f
00661f3a : CMP EBX,EBP
00661f3c : JL 0x00661f5f
00661f3e : CMP ESI,0x80004005
00661f44 : JZ 0x00661f5f
00661f46 : CMP ESI,0x80070057
00661f4c : JZ 0x00661f5f
00661f4e : CMP ESI,0x8004022a
00661f54 : JZ 0x00661f5f
00661f56 : MOV EBX,ESI
00661f58 : JMP 0x00661f5f
00661f5a : MOV ESI,0x80040207
00661f5f : MOV EAX,dword ptr [ESP + 0x24]
00661f63 : CMP EAX,EBP
00661f65 : JZ 0x00661f71
00661f67 : PUSH EAX
00661f68 : CALL 0x00664670
00661f6d : MOV dword ptr [ESP + 0x24],EBP
00661f71 : CMP ESI,EBP
00661f73 : JZ 0x00661fa6
00661f75 : MOV EDX,dword ptr [EDI]
00661f77 : MOV EDX,dword ptr [EDX + 0xc]
00661f7a : LEA EAX,[ESP + 0x10]
00661f7e : PUSH EAX
00661f7f : LEA ECX,[ESP + 0x28]
00661f83 : PUSH ECX
00661f84 : PUSH 0x1
00661f86 : PUSH EDI
00661f87 : CALL EDX
00661f89 : TEST EAX,EAX
00661f8b : JZ 0x00661f07
00661f91 : CMP EBX,EBP
00661f93 : JNZ 0x00661f9a
00661f95 : MOV EBX,0x80040207
00661f9a : POP ESI
00661f9b : MOV EAX,EBX
00661f9d : POP EBX
00661f9e : POP EDI
00661f9f : POP EBP
00661fa0 : ADD ESP,0x8
00661fa3 : RET 0xc
00661fa6 : POP ESI
00661fa7 : XOR EAX,EAX
00661fa9 : POP EBX
00661faa : POP EDI
00661fab : POP EBP
00661fac : ADD ESP,0x8
00661faf : RET 0xc
