PROGRAM  : Maestia.exe
FUNCTION : FUN_0052ea50
ENTRY    : 0052ea50
BODY     : [[0052ea50, 0052ebb2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052ea50(undefined4 param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_0052ea8a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_0052b6d0(param_1,iVar7);
LAB_0052ea8a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x18);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *(uint *)*param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_005266c0(param_2[1]);
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x18) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0x18);
  if (uVar5 != param_3) {
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18)) {
      uVar5 = *puVar3;
      puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
    }
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      FUN_005266c0(puVar1 + 2);
    }
    *puVar3 = uVar6;
    uVar6 = *(uint *)*param_2;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    piVar4 = (int *)(puVar1[1] + 8);
    *piVar4 = *piVar4 + -1;
    if (*piVar4 == 0) {
      FUN_00525340();
    }
    puVar1[1] = uVar6;
    FUN_005268b0(param_2[1]);
    *puVar1 = 0xffffffff;
    return;
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_005266c0(puVar1 + 2);
  }
  uVar5 = *(uint *)*param_2;
  piVar4 = (int *)(uVar5 + 8);
  *piVar4 = *piVar4 + 1;
  piVar4 = (int *)(puVar1[1] + 8);
  *piVar4 = *piVar4 + -1;
  if (*piVar4 == 0) {
    FUN_00525340();
  }
  puVar1[1] = uVar5;
  FUN_005268b0(param_2[1]);
  *puVar1 = uVar6;
  return;
}



============================================================
DISASSEMBLY
============================================================
0052ea50 : PUSH EBX
0052ea51 : PUSH ESI
0052ea52 : MOV ESI,ECX
0052ea54 : MOV EAX,dword ptr [ESI]
0052ea56 : TEST EAX,EAX
0052ea58 : JNZ 0x0052ea63
0052ea5a : MOV EAX,dword ptr [ESP + 0xc]
0052ea5e : PUSH 0x8
0052ea60 : PUSH EAX
0052ea61 : JMP 0x0052ea85
0052ea63 : MOV ECX,dword ptr [EAX + 0x4]
0052ea66 : LEA EDX,[ECX*0x4 + 0x4]
0052ea6d : MOV ECX,dword ptr [EAX]
0052ea6f : LEA ECX,[ECX + ECX*0x4]
0052ea72 : CMP ECX,EDX
0052ea74 : JBE 0x0052ea8a
0052ea76 : MOV EDX,dword ptr [EAX + 0x4]
0052ea79 : MOV ECX,dword ptr [ESP + 0xc]
0052ea7d : LEA EAX,[EDX + EDX*0x1 + 0x2]
0052ea81 : PUSH EAX
0052ea82 : PUSH ECX
0052ea83 : MOV ECX,ESI
0052ea85 : CALL 0x0052b6d0
0052ea8a : MOV ECX,dword ptr [ESI]
0052ea8c : MOV EAX,dword ptr [ESP + 0x14]
0052ea90 : AND EAX,dword ptr [ECX + 0x4]
0052ea93 : INC dword ptr [ECX]
0052ea95 : MOV ECX,dword ptr [ESI]
0052ea97 : LEA EDX,[EAX + EAX*0x2]
0052ea9a : LEA ESI,[ECX + EDX*0x8 + 0x8]
0052ea9e : MOV EDX,dword ptr [ESI]
0052eaa0 : MOV EBX,0xfffffffe
0052eaa5 : CMP EDX,EBX
0052eaa7 : JNZ 0x0052eace
0052eaa9 : MOV ECX,dword ptr [ESP + 0x10]
0052eaad : MOV dword ptr [ESI],0xffffffff
0052eab3 : MOV EAX,dword ptr [ECX]
0052eab5 : MOV EAX,dword ptr [EAX]
0052eab7 : MOV dword ptr [ESI + 0x4],EAX
0052eaba : INC dword ptr [EAX + 0x8]
0052eabd : MOV ECX,dword ptr [ECX + 0x4]
0052eac0 : PUSH ECX
0052eac1 : LEA ECX,[ESI + 0x8]
0052eac4 : CALL 0x005266c0
0052eac9 : POP ESI
0052eaca : POP EBX
0052eacb : RET 0xc
0052eace : PUSH EBP
0052eacf : MOV EBP,dword ptr [ECX + 0x4]
0052ead2 : PUSH EDI
0052ead3 : MOV EDI,EAX
0052ead5 : INC EDI
0052ead6 : AND EDI,EBP
0052ead8 : LEA EDX,[EDI + EDI*0x2]
0052eadb : CMP dword ptr [ECX + EDX*0x8 + 0x8],EBX
0052eadf : JNZ 0x0052ead5
0052eae1 : MOV EBX,dword ptr [ESI + 0x4]
0052eae4 : MOV EBX,dword ptr [EBX + 0xc]
0052eae7 : AND EBX,EBP
0052eae9 : LEA EDX,[EDI + EDI*0x2]
0052eaec : LEA EDX,[ECX + EDX*0x8 + 0x8]
0052eaf0 : CMP EBX,EAX
0052eaf2 : JNZ 0x0052eb43
0052eaf4 : TEST EDX,EDX
0052eaf6 : JZ 0x0052eb11
0052eaf8 : MOV EAX,dword ptr [ESI]
0052eafa : MOV dword ptr [EDX],EAX
0052eafc : MOV EAX,dword ptr [ESI + 0x4]
0052eaff : MOV dword ptr [EDX + 0x4],EAX
0052eb02 : INC dword ptr [EAX + 0x8]
0052eb05 : LEA EAX,[ESI + 0x8]
0052eb08 : PUSH EAX
0052eb09 : LEA ECX,[EDX + 0x8]
0052eb0c : CALL 0x005266c0
0052eb11 : MOV EBP,dword ptr [ESP + 0x18]
0052eb15 : MOV ECX,dword ptr [EBP]
0052eb18 : MOV EBX,dword ptr [ECX]
0052eb1a : INC dword ptr [EBX + 0x8]
0052eb1d : MOV ECX,dword ptr [ESI + 0x4]
0052eb20 : ADD dword ptr [ECX + 0x8],-0x1
0052eb24 : JNZ 0x0052eb2b
0052eb26 : CALL 0x00525340
0052eb2b : MOV dword ptr [ESI + 0x4],EBX
0052eb2e : MOV EDX,dword ptr [EBP + 0x4]
0052eb31 : PUSH EDX
0052eb32 : LEA ECX,[ESI + 0x8]
0052eb35 : CALL 0x005268b0
0052eb3a : MOV dword ptr [ESI],EDI
0052eb3c : POP EDI
0052eb3d : POP EBP
0052eb3e : POP ESI
0052eb3f : POP EBX
0052eb40 : RET 0xc
0052eb43 : LEA EBX,[EBX + EBX*0x2]
0052eb46 : CMP dword ptr [ECX + EBX*0x8 + 0x8],EAX
0052eb4a : LEA EBX,[ECX + EBX*0x8 + 0x8]
0052eb4e : JZ 0x0052eb5f
0052eb50 : MOV EBX,dword ptr [EBX]
0052eb52 : LEA EBX,[EBX + EBX*0x2]
0052eb55 : CMP dword ptr [ECX + EBX*0x8 + 0x8],EAX
0052eb59 : LEA EBX,[ECX + EBX*0x8 + 0x8]
0052eb5d : JNZ 0x0052eb50
0052eb5f : TEST EDX,EDX
0052eb61 : JZ 0x0052eb7c
0052eb63 : MOV EAX,dword ptr [ESI]
0052eb65 : MOV dword ptr [EDX],EAX
0052eb67 : MOV EAX,dword ptr [ESI + 0x4]
0052eb6a : MOV dword ptr [EDX + 0x4],EAX
0052eb6d : INC dword ptr [EAX + 0x8]
0052eb70 : LEA EAX,[ESI + 0x8]
0052eb73 : PUSH EAX
0052eb74 : LEA ECX,[EDX + 0x8]
0052eb77 : CALL 0x005266c0
0052eb7c : MOV dword ptr [EBX],EDI
0052eb7e : MOV EBX,dword ptr [ESP + 0x18]
0052eb82 : MOV ECX,dword ptr [EBX]
0052eb84 : MOV EDI,dword ptr [ECX]
0052eb86 : INC dword ptr [EDI + 0x8]
0052eb89 : MOV ECX,dword ptr [ESI + 0x4]
0052eb8c : ADD dword ptr [ECX + 0x8],-0x1
0052eb90 : JNZ 0x0052eb97
0052eb92 : CALL 0x00525340
0052eb97 : MOV dword ptr [ESI + 0x4],EDI
0052eb9a : MOV EDX,dword ptr [EBX + 0x4]
0052eb9d : PUSH EDX
0052eb9e : LEA ECX,[ESI + 0x8]
0052eba1 : CALL 0x005268b0
0052eba6 : POP EDI
0052eba7 : POP EBP
0052eba8 : MOV dword ptr [ESI],0xffffffff
0052ebae : POP ESI
0052ebaf : POP EBX
0052ebb0 : RET 0xc
