PROGRAM  : Maestia.exe
FUNCTION : FUN_005c51a0
ENTRY    : 005c51a0
BODY     : [[005c51a0, 005c5251]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c51a0(void)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  int in_ECX;
  int *piVar5;
  int *piVar6;
  undefined4 uVar7;
  
  FUN_0054f860();
  iVar1 = *(int *)(in_ECX + 0x34);
  piVar6 = (int *)(in_ECX + 0x34);
  if (iVar1 == 0) {
    uVar3 = 0;
    piVar6 = (int *)0x0;
  }
  else {
    uVar3 = 0;
    piVar5 = (int *)(iVar1 + 8);
    do {
      if (*piVar5 != -2) break;
      uVar3 = uVar3 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar3 <= *(uint *)(iVar1 + 4));
  }
  do {
    do {
      if (((piVar6 == (int *)0x0) || (iVar1 = *piVar6, iVar1 == 0)) ||
         (*(int *)(iVar1 + 4) < (int)uVar3)) {
        return;
      }
      puVar2 = *(undefined4 **)(uVar3 * 0x10 + 0x14 + iVar1);
      uVar4 = puVar2[2];
      if ((uVar4 & 0x70000000) == 0x10000000) {
        if ((uVar4 & 0xfffffff) == 0) {
          uVar4 = uVar4 & 0xafffffff | 0x20000000;
          uVar7 = 4;
        }
        else {
          uVar4 = uVar4 & 0x8fffffff;
          uVar7 = 2;
        }
        puVar2[2] = uVar4;
        (**(code **)*puVar2)(uVar7);
      }
      uVar4 = *(uint *)(*piVar6 + 4);
    } while (((int)uVar4 < (int)uVar3) || (uVar3 = uVar3 + 1, uVar4 < uVar3));
    piVar5 = (int *)(uVar3 * 0x10 + 8 + *piVar6);
    do {
      if (*piVar5 != -2) break;
      uVar3 = uVar3 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar3 <= uVar4);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005c51a0 : PUSH ESI
005c51a1 : PUSH EDI
005c51a2 : MOV ESI,ECX
005c51a4 : CALL 0x0054f860
005c51a9 : MOV ECX,dword ptr [ESI + 0x34]
005c51ac : ADD ESI,0x34
005c51af : TEST ECX,ECX
005c51b1 : JNZ 0x005c51b7
005c51b3 : XOR EAX,EAX
005c51b5 : JMP 0x005c51cf
005c51b7 : MOV EDX,dword ptr [ECX + 0x4]
005c51ba : XOR EAX,EAX
005c51bc : ADD ECX,0x8
005c51bf : NOP
005c51c0 : CMP dword ptr [ECX],-0x2
005c51c3 : JNZ 0x005c51cd
005c51c5 : INC EAX
005c51c6 : ADD ECX,0x10
005c51c9 : CMP EAX,EDX
005c51cb : JBE 0x005c51c0
005c51cd : MOV ECX,ESI
005c51cf : MOV EDI,ECX
005c51d1 : MOV ESI,EAX
005c51d3 : TEST EDI,EDI
005c51d5 : JZ 0x005c524f
005c51d7 : MOV EAX,dword ptr [EDI]
005c51d9 : TEST EAX,EAX
005c51db : JZ 0x005c524f
005c51dd : CMP ESI,dword ptr [EAX + 0x4]
005c51e0 : JG 0x005c524f
005c51e2 : MOV ECX,ESI
005c51e4 : SHL ECX,0x4
005c51e7 : MOV ECX,dword ptr [ECX + EAX*0x1 + 0x14]
005c51eb : MOV EAX,dword ptr [ECX + 0x8]
005c51ee : MOV EDX,EAX
005c51f0 : AND EDX,0x70000000
005c51f6 : CMP EDX,0x10000000
005c51fc : JNZ 0x005c5223
005c51fe : TEST EAX,0xfffffff
005c5203 : JBE 0x005c520e
005c5205 : AND EAX,0x8fffffff
005c520a : PUSH 0x2
005c520c : JMP 0x005c521a
005c520e : AND EAX,0xafffffff
005c5213 : OR EAX,0x20000000
005c5218 : PUSH 0x4
005c521a : MOV dword ptr [ECX + 0x8],EAX
005c521d : MOV EAX,dword ptr [ECX]
005c521f : MOV EDX,dword ptr [EAX]
005c5221 : CALL EDX
005c5223 : MOV ECX,dword ptr [EDI]
005c5225 : MOV EAX,dword ptr [ECX + 0x4]
005c5228 : CMP ESI,EAX
005c522a : JG 0x005c51d3
005c522c : INC ESI
005c522d : CMP ESI,EAX
005c522f : JA 0x005c51d3
005c5231 : MOV EDX,ESI
005c5233 : SHL EDX,0x4
005c5236 : LEA ECX,[EDX + ECX*0x1 + 0x8]
005c523a : LEA EBX,[EBX]
005c5240 : CMP dword ptr [ECX],-0x2
005c5243 : JNZ 0x005c51d3
005c5245 : INC ESI
005c5246 : ADD ECX,0x10
005c5249 : CMP ESI,EAX
005c524b : JBE 0x005c5240
005c524d : JMP 0x005c51d3
005c524f : POP EDI
005c5250 : POP ESI
005c5251 : RET
