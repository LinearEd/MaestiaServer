PROGRAM  : Maestia.exe
FUNCTION : FUN_0040f040
ENTRY    : 0040f040
BODY     : [[0040f040, 0040f2cf]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0040f159) */
/* WARNING: Removing unreachable block (ram,0x0040f169) */
/* WARNING: Removing unreachable block (ram,0x0040f172) */
/* WARNING: Removing unreachable block (ram,0x0040f175) */
/* WARNING: Removing unreachable block (ram,0x0040f165) */
/* WARNING: Removing unreachable block (ram,0x0040f182) */
/* WARNING: Removing unreachable block (ram,0x0040f192) */
/* WARNING: Removing unreachable block (ram,0x0040f19d) */
/* WARNING: Removing unreachable block (ram,0x0040f199) */
/* WARNING: Removing unreachable block (ram,0x0040f18d) */
/* WARNING: Removing unreachable block (ram,0x0040f1a0) */
/* WARNING: Removing unreachable block (ram,0x0040f1b0) */
/* WARNING: Removing unreachable block (ram,0x0040f1b8) */

void FUN_0040f040(int param_1,undefined4 param_2,int *param_3)

{
  int *piVar1;
  undefined4 uVar2;
  int *piVar3;
  int *piVar4;
  undefined1 local_60 [40];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 *local_1c;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7bf38;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_3 + 0x15) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_38);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_60,&DAT_00ced890);
  }
  local_18 = param_3;
  FUN_00416210(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar4 = (int *)*param_3;
  if (*(char *)((int)piVar4 + 0x15) == '\0') {
    if (*(char *)(param_3[2] + 0x15) == '\0') {
      piVar4 = (int *)param_3[2];
    }
  }
  else {
    piVar4 = (int *)param_3[2];
  }
  piVar3 = (int *)param_3[1];
  if (*(char *)((int)piVar4 + 0x15) == '\0') {
    piVar4[1] = (int)piVar3;
  }
  if (*(int **)(*(int *)(param_1 + 4) + 4) == param_3) {
    *(int **)(*(int *)(param_1 + 4) + 4) = piVar4;
  }
  else if ((int *)*piVar3 == param_3) {
    *piVar3 = (int)piVar4;
  }
  else {
    piVar3[2] = (int)piVar4;
  }
  local_1c = *(undefined4 **)(param_1 + 4);
  if ((int *)*local_1c == param_3) {
    piVar1 = piVar3;
    if (*(char *)((int)piVar4 + 0x15) == '\0') {
      piVar1 = (int *)FUN_0044f800();
    }
    *local_1c = piVar1;
  }
  local_1c = *(undefined4 **)(param_1 + 4);
  if (*(int **)((int)local_1c + 8) == param_3) {
    if (*(char *)((int)piVar4 + 0x15) == '\0') {
      uVar2 = FUN_0041fe30();
      *(undefined4 *)((int)local_1c + 8) = uVar2;
    }
    else {
      *(int **)((int)local_1c + 8) = piVar3;
    }
  }
  if ((char)local_18[5] == '\x01') {
    if (piVar4 != *(int **)(*(int *)(param_1 + 4) + 4)) {
      do {
        piVar1 = piVar3;
        if ((char)piVar4[5] != '\x01') break;
        piVar3 = (int *)*piVar1;
        if (piVar4 == piVar3) {
          piVar3 = (int *)piVar1[2];
          if ((char)piVar3[5] == '\0') {
            *(undefined1 *)(piVar3 + 5) = 1;
            *(undefined1 *)(piVar1 + 5) = 0;
            FUN_00486420(param_1);
            piVar3 = (int *)piVar1[2];
          }
          if (*(char *)((int)piVar3 + 0x15) == '\0') {
            if ((*(char *)(*piVar3 + 0x14) != '\x01') || (*(char *)(piVar3[2] + 0x14) != '\x01')) {
              if (*(char *)(piVar3[2] + 0x14) == '\x01') {
                *(undefined1 *)(*piVar3 + 0x14) = 1;
                *(undefined1 *)(piVar3 + 5) = 0;
                FUN_00440290(param_1);
                piVar3 = (int *)piVar1[2];
              }
              *(char *)(piVar3 + 5) = (char)piVar1[5];
              *(undefined1 *)(piVar1 + 5) = 1;
              *(undefined1 *)(piVar3[2] + 0x14) = 1;
              FUN_00486420(param_1);
              break;
            }
LAB_0040f27c:
            *(undefined1 *)(piVar3 + 5) = 0;
          }
        }
        else {
          if ((char)piVar3[5] == '\0') {
            *(undefined1 *)(piVar3 + 5) = 1;
            *(undefined1 *)(piVar1 + 5) = 0;
            FUN_00440290(param_1);
            piVar3 = (int *)*piVar1;
          }
          if (*(char *)((int)piVar3 + 0x15) == '\0') {
            if ((*(char *)(piVar3[2] + 0x14) == '\x01') && (*(char *)(*piVar3 + 0x14) == '\x01'))
            goto LAB_0040f27c;
            if (*(char *)(*piVar3 + 0x14) == '\x01') {
              *(undefined1 *)(piVar3[2] + 0x14) = 1;
              *(undefined1 *)(piVar3 + 5) = 0;
              FUN_00486420(param_1);
              piVar3 = (int *)*piVar1;
            }
            *(char *)(piVar3 + 5) = (char)piVar1[5];
            *(undefined1 *)(piVar1 + 5) = 1;
            *(undefined1 *)(*piVar3 + 0x14) = 1;
            FUN_00440290(param_1);
            break;
          }
        }
        piVar3 = (int *)piVar1[1];
        piVar4 = piVar1;
      } while (piVar1 != *(int **)(*(int *)(param_1 + 4) + 4));
    }
    *(undefined1 *)(piVar4 + 5) = 1;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0040f040 : PUSH EBP
0040f041 : MOV EBP,ESP
0040f043 : PUSH -0x1
0040f045 : PUSH 0xb7bf38
0040f04a : MOV EAX,FS:[0x0]
0040f050 : PUSH EAX
0040f051 : SUB ESP,0x50
0040f054 : PUSH EBX
0040f055 : PUSH ESI
0040f056 : PUSH EDI
0040f057 : MOV EAX,[0x00d66fa0]
0040f05c : XOR EAX,EBP
0040f05e : PUSH EAX
0040f05f : LEA EAX,[EBP + -0xc]
0040f062 : MOV FS:[0x0],EAX
0040f068 : MOV EAX,dword ptr [EBP + 0x10]
0040f06b : CMP byte ptr [EAX + 0x15],0x0
0040f06f : JZ 0x0040f0ad
0040f071 : PUSH 0x1b
0040f073 : XOR ESI,ESI
0040f075 : PUSH 0xcca4a8
0040f07a : LEA ECX,[EBP + -0x34]
0040f07d : MOV dword ptr [EBP + -0x1c],0xf
0040f084 : MOV dword ptr [EBP + -0x20],ESI
0040f087 : MOV byte ptr [EBP + -0x30],0x0
0040f08b : CALL 0x00404b50
0040f090 : MOV dword ptr [EBP + -0x4],ESI
0040f093 : LEA EAX,[EBP + -0x34]
0040f096 : PUSH EAX
0040f097 : LEA ECX,[EBP + -0x5c]
0040f09a : CALL 0x00403c10
0040f09f : PUSH 0xced890
0040f0a4 : LEA ECX,[EBP + -0x5c]
0040f0a7 : PUSH ECX
0040f0a8 : CALL 0x006409eb
0040f0ad : MOV EBX,EAX
0040f0af : LEA EDX,[EBP + 0x10]
0040f0b2 : MOV dword ptr [EBP + -0x14],EBX
0040f0b5 : CALL 0x00416210
0040f0ba : MOV ECX,dword ptr [EBX]
0040f0bc : CMP byte ptr [ECX + 0x15],0x0
0040f0c0 : JZ 0x0040f0c7
0040f0c2 : MOV EDI,dword ptr [EBX + 0x8]
0040f0c5 : JMP 0x0040f0e1
0040f0c7 : MOV EDX,dword ptr [EBX + 0x8]
0040f0ca : CMP byte ptr [EDX + 0x15],0x0
0040f0ce : JZ 0x0040f0d4
0040f0d0 : MOV EDI,ECX
0040f0d2 : JMP 0x0040f0e1
0040f0d4 : MOV EAX,dword ptr [EBP + 0x10]
0040f0d7 : MOV EDI,dword ptr [EAX + 0x8]
0040f0da : LEA EDX,[EAX + 0x8]
0040f0dd : CMP EAX,EBX
0040f0df : JNZ 0x0040f159
0040f0e1 : CMP byte ptr [EDI + 0x15],0x0
0040f0e5 : MOV ESI,dword ptr [EBX + 0x4]
0040f0e8 : JNZ 0x0040f0ed
0040f0ea : MOV dword ptr [EDI + 0x4],ESI
0040f0ed : MOV EDX,dword ptr [EBP + 0x8]
0040f0f0 : MOV EAX,dword ptr [EDX + 0x4]
0040f0f3 : CMP dword ptr [EAX + 0x4],EBX
0040f0f6 : JNZ 0x0040f0fd
0040f0f8 : MOV dword ptr [EAX + 0x4],EDI
0040f0fb : JMP 0x0040f108
0040f0fd : CMP dword ptr [ESI],EBX
0040f0ff : JNZ 0x0040f105
0040f101 : MOV dword ptr [ESI],EDI
0040f103 : JMP 0x0040f108
0040f105 : MOV dword ptr [ESI + 0x8],EDI
0040f108 : MOV ECX,dword ptr [EDX + 0x4]
0040f10b : MOV dword ptr [EBP + -0x18],ECX
0040f10e : CMP dword ptr [ECX],EBX
0040f110 : JNZ 0x0040f12b
0040f112 : CMP byte ptr [EDI + 0x15],0x0
0040f116 : JZ 0x0040f11c
0040f118 : MOV EAX,ESI
0040f11a : JMP 0x0040f129
0040f11c : MOV EAX,EDI
0040f11e : CALL 0x0044f800
0040f123 : MOV EDX,dword ptr [EBP + 0x8]
0040f126 : MOV ECX,dword ptr [EBP + -0x18]
0040f129 : MOV dword ptr [ECX],EAX
0040f12b : MOV ECX,dword ptr [EDX + 0x4]
0040f12e : MOV dword ptr [EBP + -0x18],ECX
0040f131 : CMP dword ptr [ECX + 0x8],EBX
0040f134 : JNZ 0x0040f1bb
0040f13a : CMP byte ptr [EDI + 0x15],0x0
0040f13e : JZ 0x0040f147
0040f140 : MOV EAX,ESI
0040f142 : MOV dword ptr [ECX + 0x8],EAX
0040f145 : JMP 0x0040f1bb
0040f147 : MOV EAX,EDI
0040f149 : CALL 0x0041fe30
0040f14e : MOV ECX,dword ptr [EBP + -0x18]
0040f151 : MOV EDX,dword ptr [EBP + 0x8]
0040f154 : MOV dword ptr [ECX + 0x8],EAX
0040f157 : JMP 0x0040f1bb
0040f159 : MOV dword ptr [ECX + 0x4],EAX
0040f15c : MOV ECX,dword ptr [EBX]
0040f15e : MOV dword ptr [EAX],ECX
0040f160 : CMP EAX,dword ptr [EBX + 0x8]
0040f163 : JNZ 0x0040f169
0040f165 : MOV ESI,EAX
0040f167 : JMP 0x0040f182
0040f169 : CMP byte ptr [EDI + 0x15],0x0
0040f16d : MOV ESI,dword ptr [EAX + 0x4]
0040f170 : JNZ 0x0040f175
0040f172 : MOV dword ptr [EDI + 0x4],ESI
0040f175 : MOV dword ptr [ESI],EDI
0040f177 : MOV ECX,dword ptr [EBX + 0x8]
0040f17a : MOV dword ptr [EDX],ECX
0040f17c : MOV EDX,dword ptr [EBX + 0x8]
0040f17f : MOV dword ptr [EDX + 0x4],EAX
0040f182 : MOV ECX,dword ptr [EBP + 0x8]
0040f185 : MOV ECX,dword ptr [ECX + 0x4]
0040f188 : CMP dword ptr [ECX + 0x4],EBX
0040f18b : JNZ 0x0040f192
0040f18d : MOV dword ptr [ECX + 0x4],EAX
0040f190 : JMP 0x0040f1a0
0040f192 : MOV ECX,dword ptr [EBX + 0x4]
0040f195 : CMP dword ptr [ECX],EBX
0040f197 : JNZ 0x0040f19d
0040f199 : MOV dword ptr [ECX],EAX
0040f19b : JMP 0x0040f1a0
0040f19d : MOV dword ptr [ECX + 0x8],EAX
0040f1a0 : MOV EDX,dword ptr [EBX + 0x4]
0040f1a3 : MOV dword ptr [EAX + 0x4],EDX
0040f1a6 : LEA ECX,[EBX + 0x14]
0040f1a9 : ADD EAX,0x14
0040f1ac : CMP EAX,ECX
0040f1ae : JZ 0x0040f1b8
0040f1b0 : MOV BL,byte ptr [ECX]
0040f1b2 : MOV DL,byte ptr [EAX]
0040f1b4 : MOV byte ptr [EAX],BL
0040f1b6 : MOV byte ptr [ECX],DL
0040f1b8 : MOV EDX,dword ptr [EBP + 0x8]
0040f1bb : MOV EAX,dword ptr [EBP + -0x14]
0040f1be : MOV BL,0x1
0040f1c0 : CMP byte ptr [EAX + 0x14],BL
0040f1c3 : JNZ 0x0040f2c8
0040f1c9 : MOV ECX,dword ptr [EDX + 0x4]
0040f1cc : CMP EDI,dword ptr [ECX + 0x4]
0040f1cf : JZ 0x0040f2c5
0040f1d5 : CMP byte ptr [EDI + 0x14],BL
0040f1d8 : JNZ 0x0040f2c5
0040f1de : MOV ECX,dword ptr [ESI]
0040f1e0 : CMP EDI,ECX
0040f1e2 : JNZ 0x0040f24d
0040f1e4 : MOV ECX,dword ptr [ESI + 0x8]
0040f1e7 : CMP byte ptr [ECX + 0x14],0x0
0040f1eb : JNZ 0x0040f202
0040f1ed : MOV byte ptr [ECX + 0x14],BL
0040f1f0 : PUSH EDX
0040f1f1 : MOV ECX,ESI
0040f1f3 : MOV byte ptr [ESI + 0x14],0x0
0040f1f7 : CALL 0x00486420
0040f1fc : MOV ECX,dword ptr [ESI + 0x8]
0040f1ff : MOV EDX,dword ptr [EBP + 0x8]
0040f202 : CMP byte ptr [ECX + 0x15],0x0
0040f206 : JNZ 0x0040f280
0040f208 : MOV EAX,dword ptr [ECX]
0040f20a : CMP byte ptr [EAX + 0x14],BL
0040f20d : JNZ 0x0040f217
0040f20f : MOV EAX,dword ptr [ECX + 0x8]
0040f212 : CMP byte ptr [EAX + 0x14],BL
0040f215 : JZ 0x0040f27c
0040f217 : MOV EAX,dword ptr [ECX + 0x8]
0040f21a : CMP byte ptr [EAX + 0x14],BL
0040f21d : JNZ 0x0040f234
0040f21f : MOV EAX,dword ptr [ECX]
0040f221 : MOV byte ptr [EAX + 0x14],BL
0040f224 : PUSH EDX
0040f225 : MOV byte ptr [ECX + 0x14],0x0
0040f229 : CALL 0x00440290
0040f22e : MOV ECX,dword ptr [ESI + 0x8]
0040f231 : MOV EDX,dword ptr [EBP + 0x8]
0040f234 : MOV AL,byte ptr [ESI + 0x14]
0040f237 : MOV byte ptr [ECX + 0x14],AL
0040f23a : MOV byte ptr [ESI + 0x14],BL
0040f23d : MOV ECX,dword ptr [ECX + 0x8]
0040f240 : MOV byte ptr [ECX + 0x14],BL
0040f243 : PUSH EDX
0040f244 : MOV ECX,ESI
0040f246 : CALL 0x00486420
0040f24b : JMP 0x0040f2c5
0040f24d : CMP byte ptr [ECX + 0x14],0x0
0040f251 : JNZ 0x0040f267
0040f253 : MOV byte ptr [ECX + 0x14],BL
0040f256 : PUSH EDX
0040f257 : MOV ECX,ESI
0040f259 : MOV byte ptr [ESI + 0x14],0x0
0040f25d : CALL 0x00440290
0040f262 : MOV ECX,dword ptr [ESI]
0040f264 : MOV EDX,dword ptr [EBP + 0x8]
0040f267 : CMP byte ptr [ECX + 0x15],0x0
0040f26b : JNZ 0x0040f280
0040f26d : MOV EAX,dword ptr [ECX + 0x8]
0040f270 : CMP byte ptr [EAX + 0x14],BL
0040f273 : JNZ 0x0040f293
0040f275 : MOV EAX,dword ptr [ECX]
0040f277 : CMP byte ptr [EAX + 0x14],BL
0040f27a : JNZ 0x0040f293
0040f27c : MOV byte ptr [ECX + 0x14],0x0
0040f280 : MOV ECX,dword ptr [EDX + 0x4]
0040f283 : MOV EDI,ESI
0040f285 : MOV ESI,dword ptr [ESI + 0x4]
0040f288 : CMP EDI,dword ptr [ECX + 0x4]
0040f28b : JNZ 0x0040f1d5
0040f291 : JMP 0x0040f2c5
0040f293 : MOV EAX,dword ptr [ECX]
0040f295 : CMP byte ptr [EAX + 0x14],BL
0040f298 : JNZ 0x0040f2af
0040f29a : MOV EAX,dword ptr [ECX + 0x8]
0040f29d : MOV byte ptr [EAX + 0x14],BL
0040f2a0 : PUSH EDX
0040f2a1 : MOV byte ptr [ECX + 0x14],0x0
0040f2a5 : CALL 0x00486420
0040f2aa : MOV ECX,dword ptr [ESI]
0040f2ac : MOV EDX,dword ptr [EBP + 0x8]
0040f2af : MOV AL,byte ptr [ESI + 0x14]
0040f2b2 : MOV byte ptr [ECX + 0x14],AL
0040f2b5 : MOV byte ptr [ESI + 0x14],BL
0040f2b8 : MOV ECX,dword ptr [ECX]
0040f2ba : MOV byte ptr [ECX + 0x14],BL
0040f2bd : PUSH EDX
0040f2be : MOV ECX,ESI
0040f2c0 : CALL 0x00440290
0040f2c5 : MOV byte ptr [EDI + 0x14],BL
0040f2c8 : MOV ECX,dword ptr [EBP + -0x14]
0040f2cb : CALL 0x006f04e0
