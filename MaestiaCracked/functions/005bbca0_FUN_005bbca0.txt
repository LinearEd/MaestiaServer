PROGRAM  : Maestia.exe
FUNCTION : FUN_005bbca0
ENTRY    : 005bbca0
BODY     : [[005bbca0, 005bbdbd]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005bbca0(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005bb0b0);
    *puVar3 = &PTR_LAB_00b90bf8;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x60,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005bbc10(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x1f;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x84,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005bbca0 : SUB ESP,0x18
005bbca3 : PUSH EBX
005bbca4 : PUSH EBP
005bbca5 : PUSH ESI
005bbca6 : MOV ESI,dword ptr [ESP + 0x2c]
005bbcaa : MOV ECX,dword ptr [ESI + 0x288]
005bbcb0 : PUSH EDI
005bbcb1 : XOR EBX,EBX
005bbcb3 : PUSH EBX
005bbcb4 : PUSH 0x34
005bbcb6 : MOV dword ptr [ESP + 0x18],ESI
005bbcba : MOV byte ptr [ESP + 0x1c],0x8
005bbcbf : CALL 0x00515840
005bbcc4 : MOV EDI,EAX
005bbcc6 : CMP EDI,EBX
005bbcc8 : JZ 0x005bbcea
005bbcca : PUSH 0x5bb0b0
005bbccf : LEA EAX,[ESP + 0x14]
005bbcd3 : PUSH EAX
005bbcd4 : MOV ECX,EDI
005bbcd6 : CALL 0x00568960
005bbcdb : MOV dword ptr [EDI],0xb90bf8
005bbce1 : MOV dword ptr [EDI + 0x10],0xb90510
005bbce8 : JMP 0x005bbcec
005bbcea : XOR EDI,EDI
005bbcec : MOV EBP,dword ptr [ESP + 0x2c]
005bbcf0 : PUSH EBX
005bbcf1 : MOV byte ptr [EBP + 0x8],BL
005bbcf4 : MOV dword ptr [EBP],EDI
005bbcf7 : MOV dword ptr [EBP + 0x4],EBX
005bbcfa : MOV ECX,dword ptr [ESI + 0x288]
005bbd00 : PUSH 0x60
005bbd02 : CALL 0x00515840
005bbd07 : MOV EDI,EAX
005bbd09 : CMP EDI,EBX
005bbd0b : JZ 0x005bbd37
005bbd0d : PUSH EBP
005bbd0e : PUSH 0x1
005bbd10 : MOV ECX,ESI
005bbd12 : CALL 0x00530910
005bbd17 : PUSH EAX
005bbd18 : LEA ECX,[ESP + 0x18]
005bbd1c : PUSH ECX
005bbd1d : MOV ECX,EDI
005bbd1f : CALL 0x005bbc10
005bbd24 : MOV EBX,EAX
005bbd26 : TEST EBX,EBX
005bbd28 : JZ 0x005bbd37
005bbd2a : MOV EDX,dword ptr [EBX + 0x8]
005bbd2d : INC EDX
005bbd2e : AND EDX,0x8fffffff
005bbd34 : MOV dword ptr [EBX + 0x8],EDX
005bbd37 : LEA EAX,[ESP + 0x30]
005bbd3b : PUSH EAX
005bbd3c : LEA ECX,[ESP + 0x30]
005bbd40 : PUSH ECX
005bbd41 : LEA ECX,[ESI + 0x278]
005bbd47 : MOV dword ptr [ESP + 0x38],EBX
005bbd4b : MOV dword ptr [ESP + 0x34],0x1f
005bbd53 : CALL 0x0050ff10
005bbd58 : MOV ECX,dword ptr [ESP + 0x30]
005bbd5c : TEST ECX,ECX
005bbd5e : JZ 0x005bbd65
005bbd60 : CALL 0x00503db0
005bbd65 : MOV EAX,dword ptr [ESI + 0x2a0]
005bbd6b : ADD EAX,0x10
005bbd6e : LEA EDX,[ESP + 0x30]
005bbd72 : MOV byte ptr [ESP + 0x30],0x0
005bbd77 : MOV EDI,dword ptr [EAX]
005bbd79 : PUSH EDX
005bbd7a : PUSH EBP
005bbd7b : LEA ECX,[ESP + 0x20]
005bbd7f : MOV dword ptr [ESP + 0x34],EAX
005bbd83 : ADD EDI,0x28
005bbd86 : CALL 0x00526210
005bbd8b : MOV ECX,dword ptr [ESP + 0x30]
005bbd8f : MOV EDX,dword ptr [EDI]
005bbd91 : PUSH EAX
005bbd92 : ADD ESI,0x84
005bbd98 : PUSH ESI
005bbd99 : LEA EAX,[ESP + 0x1c]
005bbd9d : PUSH EAX
005bbd9e : CALL EDX
005bbda0 : LEA ECX,[ESP + 0x18]
005bbda4 : CALL 0x00526bc0
005bbda9 : TEST EBX,EBX
005bbdab : JZ 0x005bbdb4
005bbdad : MOV ECX,EBX
005bbdaf : CALL 0x00503db0
005bbdb4 : POP EDI
005bbdb5 : POP ESI
005bbdb6 : MOV EAX,EBP
005bbdb8 : POP EBP
005bbdb9 : POP EBX
005bbdba : ADD ESP,0x18
005bbdbd : RET
