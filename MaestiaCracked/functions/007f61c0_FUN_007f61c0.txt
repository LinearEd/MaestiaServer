PROGRAM  : Maestia.exe
FUNCTION : FUN_007f61c0
ENTRY    : 007f61c0
BODY     : [[007f61c0, 007f63d8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f61c0(int param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  int *piVar4;
  int *piVar5;
  undefined1 local_4c [24];
  LPCRITICAL_SECTION local_34;
  char *local_30;
  undefined4 local_2c;
  int local_28;
  undefined4 local_24;
  int local_20;
  int local_1c;
  int *local_18 [2];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0d96f;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(*(int *)(in_ECX + 0xcc) + 0x4a4) != 0) {
    piVar4 = (int *)(in_ECX + 0xc);
    local_20 = 0;
    local_1c = 0x20;
    piVar5 = piVar4;
    do {
      piVar1 = (int *)*piVar5;
      if (piVar1 != (int *)0x0) {
        if (piVar1[1] == 3) {
          if (piVar1 != (int *)0x0) {
            (**(code **)(*piVar1 + 0x34))(1,uVar2);
            *piVar5 = 0;
          }
        }
        else if ((piVar1[0x18] == param_1) && (piVar1[1] == 2)) {
          local_20 = 1;
        }
      }
      piVar5 = piVar5 + 1;
      local_1c = local_1c + -1;
    } while (local_1c != 0);
    if (local_20 != 0) {
      local_18[0] = (int *)0x0;
      (**(code **)(**(int **)(in_ECX + 0x108) + 0xc0))(*(int **)(in_ECX + 0x108),local_4c);
      iVar3 = (**(code **)(**(int **)(in_ECX + 0x108) + 0xec))(*(int **)(in_ECX + 0x108),1,local_18)
      ;
      if (-1 < iVar3) {
        (**(code **)(*local_18[0] + 0x10))(local_18[0]);
      }
      (**(code **)(**(int **)(in_ECX + 0x108) + 0xe4))(*(int **)(in_ECX + 0x108),7,0);
      (**(code **)(**(int **)(in_ECX + 0x108) + 0xe4))(*(int **)(in_ECX + 0x108),0x1c,0);
      local_20 = 0x20;
      do {
        piVar5 = (int *)*piVar4;
        if (((piVar5 != (int *)0x0) && (piVar5[0x18] == param_1)) && (piVar5[1] == 2)) {
          local_34 = (LPCRITICAL_SECTION)(piVar5 + 3);
          local_28 = 0;
          local_30 = ".\\World\\AvaWorld.cpp";
          local_2c = 0xf8d;
          local_24 = 1;
          FUN_006ef1a0(&local_34);
          local_8 = 0;
          (**(code **)(*piVar5 + 0x40))();
          local_8 = 0xffffffff;
          if (local_28 != 0) {
            LeaveCriticalSection(local_34);
            local_28 = 0;
          }
        }
        piVar4 = piVar4 + 1;
        local_20 = local_20 + -1;
      } while (local_20 != 0);
      if (local_18[0] != (int *)0x0) {
        (**(code **)(*local_18[0] + 0x14))(local_18[0]);
        (**(code **)(*local_18[0] + 8))(local_18[0]);
      }
      if (*(char *)(*(int *)(in_ECX + 0xcc) + 0x208) != '\0') {
        (**(code **)(**(int **)(in_ECX + 0x108) + 0xe4))(*(int **)(in_ECX + 0x108),0x1c,1);
      }
      (**(code **)(**(int **)(in_ECX + 0x108) + 0xbc))(*(int **)(in_ECX + 0x108),local_4c);
      (**(code **)(**(int **)(in_ECX + 0x108) + 0xe4))(*(int **)(in_ECX + 0x108),7,1);
      (**(code **)(**(int **)(in_ECX + 0x108) + 0x114))(*(int **)(in_ECX + 0x108),0,8,0);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007f61c0 : PUSH EBP
007f61c1 : MOV EBP,ESP
007f61c3 : PUSH -0x1
007f61c5 : PUSH 0xb0d96f
007f61ca : MOV EAX,FS:[0x0]
007f61d0 : PUSH EAX
007f61d1 : SUB ESP,0x40
007f61d4 : PUSH EBX
007f61d5 : PUSH ESI
007f61d6 : PUSH EDI
007f61d7 : MOV EAX,[0x00d66fa0]
007f61dc : XOR EAX,EBP
007f61de : PUSH EAX
007f61df : LEA EAX,[EBP + -0xc]
007f61e2 : MOV FS:[0x0],EAX
007f61e8 : MOV EDI,ECX
007f61ea : MOV EAX,dword ptr [EDI + 0xcc]
007f61f0 : MOV EAX,dword ptr [EAX + 0x4a4]
007f61f6 : TEST EAX,EAX
007f61f8 : JZ 0x007f63c5
007f61fe : LEA EBX,[EDI + 0xc]
007f6201 : MOV dword ptr [EBP + -0x1c],0x0
007f6208 : MOV ESI,EBX
007f620a : MOV dword ptr [EBP + -0x18],0x20
007f6211 : MOV ECX,dword ptr [ESI]
007f6213 : TEST ECX,ECX
007f6215 : JZ 0x007f6248
007f6217 : MOV EAX,dword ptr [ECX + 0x4]
007f621a : CMP EAX,0x3
007f621d : JNZ 0x007f6234
007f621f : TEST ECX,ECX
007f6221 : JZ 0x007f6248
007f6223 : MOV EDX,dword ptr [ECX]
007f6225 : MOV EAX,dword ptr [EDX + 0x34]
007f6228 : PUSH 0x1
007f622a : CALL EAX
007f622c : MOV dword ptr [ESI],0x0
007f6232 : JMP 0x007f6248
007f6234 : MOV EDX,dword ptr [EBP + 0x8]
007f6237 : CMP dword ptr [ECX + 0x60],EDX
007f623a : JNZ 0x007f6248
007f623c : CMP EAX,0x2
007f623f : JNZ 0x007f6248
007f6241 : MOV dword ptr [EBP + -0x1c],0x1
007f6248 : ADD ESI,0x4
007f624b : SUB dword ptr [EBP + -0x18],0x1
007f624f : JNZ 0x007f6211
007f6251 : CMP dword ptr [EBP + -0x1c],0x0
007f6255 : JZ 0x007f63c5
007f625b : MOV EAX,dword ptr [EDI + 0x108]
007f6261 : LEA EDX,[EBP + -0x48]
007f6264 : MOV dword ptr [EBP + -0x14],0x0
007f626b : MOV ECX,dword ptr [EAX]
007f626d : PUSH EDX
007f626e : PUSH EAX
007f626f : MOV EAX,dword ptr [ECX + 0xc0]
007f6275 : CALL EAX
007f6277 : MOV EAX,dword ptr [EDI + 0x108]
007f627d : MOV ECX,dword ptr [EAX]
007f627f : LEA EDX,[EBP + -0x14]
007f6282 : PUSH EDX
007f6283 : PUSH 0x1
007f6285 : PUSH EAX
007f6286 : MOV EAX,dword ptr [ECX + 0xec]
007f628c : CALL EAX
007f628e : TEST EAX,EAX
007f6290 : JL 0x007f629d
007f6292 : MOV EAX,dword ptr [EBP + -0x14]
007f6295 : MOV ECX,dword ptr [EAX]
007f6297 : MOV EDX,dword ptr [ECX + 0x10]
007f629a : PUSH EAX
007f629b : CALL EDX
007f629d : MOV EAX,dword ptr [EDI + 0x108]
007f62a3 : MOV ECX,dword ptr [EAX]
007f62a5 : MOV EDX,dword ptr [ECX + 0xe4]
007f62ab : PUSH 0x0
007f62ad : PUSH 0x7
007f62af : PUSH EAX
007f62b0 : CALL EDX
007f62b2 : MOV EAX,dword ptr [EDI + 0x108]
007f62b8 : MOV ECX,dword ptr [EAX]
007f62ba : MOV EDX,dword ptr [ECX + 0xe4]
007f62c0 : PUSH 0x0
007f62c2 : PUSH 0x1c
007f62c4 : PUSH EAX
007f62c5 : CALL EDX
007f62c7 : MOV dword ptr [EBP + -0x1c],0x20
007f62ce : MOV EDI,EDI
007f62d0 : MOV ESI,dword ptr [EBX]
007f62d2 : TEST ESI,ESI
007f62d4 : JZ 0x007f633d
007f62d6 : MOV EAX,dword ptr [EBP + 0x8]
007f62d9 : CMP dword ptr [ESI + 0x60],EAX
007f62dc : JNZ 0x007f633d
007f62de : CMP dword ptr [ESI + 0x4],0x2
007f62e2 : JNZ 0x007f633d
007f62e4 : LEA EDX,[EBP + -0x30]
007f62e7 : LEA ECX,[ESI + 0xc]
007f62ea : PUSH EDX
007f62eb : MOV dword ptr [EBP + -0x24],0x0
007f62f2 : MOV dword ptr [EBP + -0x30],ECX
007f62f5 : MOV dword ptr [EBP + -0x2c],0xc25aac
007f62fc : MOV dword ptr [EBP + -0x28],0xf8d
007f6303 : MOV dword ptr [EBP + -0x20],0x1
007f630a : CALL 0x006ef1a0
007f630f : MOV dword ptr [EBP + -0x4],0x0
007f6316 : MOV EAX,dword ptr [ESI]
007f6318 : MOV EDX,dword ptr [EAX + 0x40]
007f631b : MOV ECX,ESI
007f631d : CALL EDX
007f631f : MOV dword ptr [EBP + -0x4],0xffffffff
007f6326 : CMP dword ptr [EBP + -0x24],0x0
007f632a : JZ 0x007f633d
007f632c : MOV EAX,dword ptr [EBP + -0x30]
007f632f : PUSH EAX
007f6330 : CALL dword ptr [0x00b8511c]
007f6336 : MOV dword ptr [EBP + -0x24],0x0
007f633d : ADD EBX,0x4
007f6340 : SUB dword ptr [EBP + -0x1c],0x1
007f6344 : JNZ 0x007f62d0
007f6346 : MOV EAX,dword ptr [EBP + -0x14]
007f6349 : TEST EAX,EAX
007f634b : JZ 0x007f6360
007f634d : MOV ECX,dword ptr [EAX]
007f634f : MOV EDX,dword ptr [ECX + 0x14]
007f6352 : PUSH EAX
007f6353 : CALL EDX
007f6355 : MOV EAX,dword ptr [EBP + -0x14]
007f6358 : MOV ECX,dword ptr [EAX]
007f635a : MOV EDX,dword ptr [ECX + 0x8]
007f635d : PUSH EAX
007f635e : CALL EDX
007f6360 : MOV EAX,dword ptr [EDI + 0xcc]
007f6366 : CMP byte ptr [EAX + 0x208],0x0
007f636d : JZ 0x007f6384
007f636f : MOV EAX,dword ptr [EDI + 0x108]
007f6375 : MOV ECX,dword ptr [EAX]
007f6377 : MOV EDX,dword ptr [ECX + 0xe4]
007f637d : PUSH 0x1
007f637f : PUSH 0x1c
007f6381 : PUSH EAX
007f6382 : CALL EDX
007f6384 : MOV EAX,dword ptr [EDI + 0x108]
007f638a : MOV ECX,dword ptr [EAX]
007f638c : LEA EDX,[EBP + -0x48]
007f638f : PUSH EDX
007f6390 : PUSH EAX
007f6391 : MOV EAX,dword ptr [ECX + 0xbc]
007f6397 : CALL EAX
007f6399 : MOV EAX,dword ptr [EDI + 0x108]
007f639f : MOV ECX,dword ptr [EAX]
007f63a1 : MOV EDX,dword ptr [ECX + 0xe4]
007f63a7 : PUSH 0x1
007f63a9 : PUSH 0x7
007f63ab : PUSH EAX
007f63ac : CALL EDX
007f63ae : MOV EDI,dword ptr [EDI + 0x108]
007f63b4 : MOV EAX,dword ptr [EDI]
007f63b6 : MOV ECX,dword ptr [EAX + 0x114]
007f63bc : PUSH 0x0
007f63be : PUSH 0x8
007f63c0 : PUSH 0x0
007f63c2 : PUSH EDI
007f63c3 : CALL ECX
007f63c5 : MOV ECX,dword ptr [EBP + -0xc]
007f63c8 : MOV dword ptr FS:[0x0],ECX
007f63cf : POP ECX
007f63d0 : POP EDI
007f63d1 : POP ESI
007f63d2 : POP EBX
007f63d3 : MOV ESP,EBP
007f63d5 : POP EBP
007f63d6 : RET 0x4
