PROGRAM  : Maestia.exe
FUNCTION : FUN_00521500
ENTRY    : 00521500
BODY     : [[00521500, 00521581]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00521500(undefined4 param_1)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int *in_ECX;
  char local_5;
  int iStack_4;
  
  local_5 = -1;
  iVar3 = (**(code **)(*in_ECX + 0xb0))();
  iStack_4 = *(int *)(iVar3 + 8);
  *(int *)(iStack_4 + 8) = *(int *)(iStack_4 + 8) + 1;
  cVar2 = FUN_0051d6b0(param_1,&iStack_4);
  iVar3 = iStack_4;
  if (cVar2 != '\0') {
    (**(code **)(*in_ECX + 0xb0))();
    FUN_00521390(param_1,&local_5,*(int *)(iVar3 + 0x10) == 0);
  }
  piVar1 = (int *)(iVar3 + 8);
  *piVar1 = *piVar1 + -1;
  iVar3 = (int)local_5;
  if (*piVar1 == 0) {
    FUN_00525340();
  }
  return iVar3;
}



============================================================
DISASSEMBLY
============================================================
00521500 : SUB ESP,0x8
00521503 : PUSH EBX
00521504 : PUSH ESI
00521505 : MOV ESI,ECX
00521507 : MOV EAX,dword ptr [ESI]
00521509 : MOV EDX,dword ptr [EAX + 0xb0]
0052150f : PUSH EDI
00521510 : MOV byte ptr [ESP + 0xf],0xff
00521515 : CALL EDX
00521517 : MOV EBX,dword ptr [ESP + 0x18]
0052151b : ADD EAX,0x8
0052151e : MOV EAX,dword ptr [EAX]
00521520 : INC dword ptr [EAX + 0x8]
00521523 : MOV dword ptr [ESP + 0x10],EAX
00521527 : LEA EAX,[ESP + 0x10]
0052152b : PUSH EAX
0052152c : PUSH EBX
0052152d : CALL 0x0051d6b0
00521532 : MOV EDI,dword ptr [ESP + 0x18]
00521536 : ADD ESP,0x8
00521539 : TEST AL,AL
0052153b : JZ 0x00521565
0052153d : MOV EDX,dword ptr [ESI]
0052153f : MOV EAX,dword ptr [EDX + 0xb0]
00521545 : MOV ECX,ESI
00521547 : CALL EAX
00521549 : CMP dword ptr [EDI + 0x10],0x0
0052154d : SETZ CL
00521550 : MOVZX EDX,CL
00521553 : PUSH EDX
00521554 : LEA ECX,[ESP + 0x13]
00521558 : PUSH ECX
00521559 : PUSH EBX
0052155a : LEA ECX,[EAX + 0x2a8]
00521560 : CALL 0x00521390
00521565 : ADD dword ptr [EDI + 0x8],-0x1
00521569 : MOVSX ESI,byte ptr [ESP + 0xf]
0052156e : JNZ 0x00521577
00521570 : MOV ECX,EDI
00521572 : CALL 0x00525340
00521577 : POP EDI
00521578 : MOV EAX,ESI
0052157a : POP ESI
0052157b : POP EBX
0052157c : ADD ESP,0x8
0052157f : RET 0x4
