PROGRAM  : Maestia.exe
FUNCTION : FUN_005d9460
ENTRY    : 005d9460
BODY     : [[005d9460, 005d94f5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d9460(int *param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  int in_ECX;
  
  piVar2 = (int *)param_1[5];
  *(int *)(param_1[2] + 0xc) = param_1[3];
  *(int *)(param_1[3] + 8) = param_1[2];
  piVar1 = piVar2 + 3;
  *piVar1 = *piVar1 + -1;
  if ((*piVar1 == 0) && (piVar2 != *(int **)(in_ECX + 0x84))) {
    EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x5c));
    iVar3 = piVar2[2];
    if (iVar3 == 0) {
      *(int *)(*piVar2 + 4) = piVar2[1];
      *(int *)piVar2[1] = *piVar2;
    }
    else {
      *(undefined4 *)(iVar3 + 0x1c) = 0;
      *(undefined4 *)(iVar3 + 0x18) = 0;
    }
    *piVar2 = *(int *)(in_ECX + 0x4c);
    *(int **)(in_ECX + 0x4c) = piVar2;
    LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x5c));
  }
  *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) + -1;
  *(int *)(*param_1 + 4) = param_1[1];
  *(int *)param_1[1] = *param_1;
  if ((undefined4 *)param_1[4] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)param_1[4])(1);
  }
  *param_1 = *(int *)(in_ECX + 0x28);
  *(int **)(in_ECX + 0x28) = param_1;
  return;
}



============================================================
DISASSEMBLY
============================================================
005d9460 : PUSH EBX
005d9461 : PUSH ESI
005d9462 : MOV ESI,dword ptr [ESP + 0xc]
005d9466 : MOV EAX,dword ptr [ESI + 0x8]
005d9469 : MOV EBX,ECX
005d946b : MOV ECX,dword ptr [ESI + 0xc]
005d946e : PUSH EDI
005d946f : MOV EDI,dword ptr [ESI + 0x14]
005d9472 : MOV dword ptr [EAX + 0xc],ECX
005d9475 : MOV EDX,dword ptr [ESI + 0xc]
005d9478 : MOV EAX,dword ptr [ESI + 0x8]
005d947b : MOV dword ptr [EDX + 0x8],EAX
005d947e : ADD dword ptr [EDI + 0xc],-0x1
005d9482 : JNZ 0x005d94c7
005d9484 : CMP EDI,dword ptr [EBX + 0x84]
005d948a : JZ 0x005d94c7
005d948c : PUSH EBP
005d948d : LEA EBP,[EBX + 0x5c]
005d9490 : PUSH EBP
005d9491 : CALL dword ptr [0x00b85118]
005d9497 : MOV EAX,dword ptr [EDI + 0x8]
005d949a : XOR ECX,ECX
005d949c : CMP EAX,ECX
005d949e : JZ 0x005d94a8
005d94a0 : MOV dword ptr [EAX + 0x1c],ECX
005d94a3 : MOV dword ptr [EAX + 0x18],ECX
005d94a6 : JMP 0x005d94b7
005d94a8 : MOV ECX,dword ptr [EDI]
005d94aa : MOV EDX,dword ptr [EDI + 0x4]
005d94ad : MOV dword ptr [ECX + 0x4],EDX
005d94b0 : MOV EAX,dword ptr [EDI + 0x4]
005d94b3 : MOV ECX,dword ptr [EDI]
005d94b5 : MOV dword ptr [EAX],ECX
005d94b7 : MOV EDX,dword ptr [EBX + 0x4c]
005d94ba : MOV dword ptr [EDI],EDX
005d94bc : PUSH EBP
005d94bd : MOV dword ptr [EBX + 0x4c],EDI
005d94c0 : CALL dword ptr [0x00b8511c]
005d94c6 : POP EBP
005d94c7 : DEC dword ptr [EBX + 0x18]
005d94ca : MOV EAX,dword ptr [ESI]
005d94cc : MOV ECX,dword ptr [ESI + 0x4]
005d94cf : MOV dword ptr [EAX + 0x4],ECX
005d94d2 : MOV EDX,dword ptr [ESI + 0x4]
005d94d5 : MOV EAX,dword ptr [ESI]
005d94d7 : MOV dword ptr [EDX],EAX
005d94d9 : MOV ECX,dword ptr [ESI + 0x10]
005d94dc : TEST ECX,ECX
005d94de : JZ 0x005d94e8
005d94e0 : MOV EDX,dword ptr [ECX]
005d94e2 : MOV EAX,dword ptr [EDX]
005d94e4 : PUSH 0x1
005d94e6 : CALL EAX
005d94e8 : MOV ECX,dword ptr [EBX + 0x28]
005d94eb : MOV dword ptr [ESI],ECX
005d94ed : POP EDI
005d94ee : MOV dword ptr [EBX + 0x28],ESI
005d94f1 : POP ESI
005d94f2 : POP EBX
005d94f3 : RET 0x4
