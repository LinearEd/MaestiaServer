PROGRAM  : Maestia.exe
FUNCTION : FUN_006dd520
ENTRY    : 006dd520
BODY     : [[006dd520, 006dd56c] [006dd570, 006dd5f6]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_006dd520(int *param_1,short *param_2,int param_3)

{
  int in_EAX;
  int *piVar1;
  int iVar2;
  int iVar3;
  int *unaff_EBX;
  int *piVar4;
  int iVar5;
  
  param_3 = *param_2 - param_3;
  if (param_3 < 0) {
    param_3 = -param_3;
  }
  iVar5 = 0;
  piVar1 = (int *)0x0;
  if (param_3 != 0) {
    do {
      iVar5 = iVar5 + 1;
      param_3 = param_3 >> 1;
    } while (param_3 != 0);
    piVar1 = (int *)0x0;
    if (0xb < iVar5) {
      *(undefined4 *)(*param_1 + 0x14) = 6;
      piVar1 = (int *)(**(code **)*param_1)(param_1);
    }
  }
  piVar4 = (int *)(in_EAX + iVar5 * 4);
  *piVar4 = *piVar4 + 1;
  iVar5 = 0;
  piVar4 = &DAT_00bf1574;
  do {
    iVar3 = (int)param_2[*piVar4];
    if (iVar3 == 0) {
      iVar5 = iVar5 + 1;
    }
    else {
      if (0xf < iVar5) {
        iVar2 = (iVar5 - 0x10U >> 4) + 1;
        iVar5 = iVar5 + iVar2 * -0x10;
        unaff_EBX[0xf0] = unaff_EBX[0xf0] + iVar2;
      }
      if (iVar3 < 0) {
        iVar3 = -iVar3;
      }
      iVar3 = iVar3 >> 1;
      iVar2 = 1;
      if (iVar3 != 0) {
        do {
          iVar2 = iVar2 + 1;
          iVar3 = iVar3 >> 1;
        } while (iVar3 != 0);
        if (10 < iVar2) {
          *(undefined4 *)(*param_1 + 0x14) = 6;
          (**(code **)*param_1)(param_1);
        }
      }
      iVar2 = iVar5 * 0x10 + iVar2;
      unaff_EBX[iVar2] = unaff_EBX[iVar2] + 1;
      piVar1 = unaff_EBX + iVar2;
      iVar5 = 0;
    }
    piVar4 = piVar4 + 1;
  } while ((int)piVar4 < 0xbf1670);
  if (0 < iVar5) {
    *unaff_EBX = *unaff_EBX + 1;
  }
  return piVar1;
}



============================================================
DISASSEMBLY
============================================================
006dd520 : PUSH EBP
006dd521 : PUSH ESI
006dd522 : PUSH EDI
006dd523 : MOV EDI,EAX
006dd525 : MOV EAX,dword ptr [ESP + 0x14]
006dd529 : MOVSX EAX,word ptr [EAX]
006dd52c : SUB EAX,dword ptr [ESP + 0x18]
006dd530 : JNS 0x006dd534
006dd532 : NEG EAX
006dd534 : XOR ESI,ESI
006dd536 : TEST EAX,EAX
006dd538 : JZ 0x006dd561
006dd53a : LEA EBX,[EBX]
006dd540 : INC ESI
006dd541 : SAR EAX,0x1
006dd543 : JNZ 0x006dd540
006dd545 : CMP ESI,0xb
006dd548 : JLE 0x006dd561
006dd54a : MOV EAX,dword ptr [ESP + 0x10]
006dd54e : MOV ECX,dword ptr [EAX]
006dd550 : MOV dword ptr [ECX + 0x14],0x6
006dd557 : MOV EDX,dword ptr [EAX]
006dd559 : PUSH EAX
006dd55a : MOV EAX,dword ptr [EDX]
006dd55c : CALL EAX
006dd55e : ADD ESP,0x4
006dd561 : INC dword ptr [EDI + ESI*0x4]
006dd564 : XOR ESI,ESI
006dd566 : MOV EBP,0xbf1574
006dd56b : JMP 0x006dd570
006dd570 : MOV ECX,dword ptr [EBP]
006dd573 : MOV EDX,dword ptr [ESP + 0x14]
006dd577 : MOVSX ECX,word ptr [EDX + ECX*0x2]
006dd57b : TEST ECX,ECX
006dd57d : JNZ 0x006dd582
006dd57f : INC ESI
006dd580 : JMP 0x006dd5e2
006dd582 : CMP ESI,0xf
006dd585 : JLE 0x006dd5a5
006dd587 : MOV EDX,dword ptr [EBX + 0x3c0]
006dd58d : LEA EAX,[ESI + -0x10]
006dd590 : SHR EAX,0x4
006dd593 : INC EAX
006dd594 : MOV EDI,EAX
006dd596 : NEG EDI
006dd598 : SHL EDI,0x4
006dd59b : ADD ESI,EDI
006dd59d : ADD EDX,EAX
006dd59f : MOV dword ptr [EBX + 0x3c0],EDX
006dd5a5 : TEST ECX,ECX
006dd5a7 : JGE 0x006dd5ab
006dd5a9 : NEG ECX
006dd5ab : SAR ECX,0x1
006dd5ad : MOV EDI,0x1
006dd5b2 : JZ 0x006dd5d5
006dd5b4 : INC EDI
006dd5b5 : SAR ECX,0x1
006dd5b7 : JNZ 0x006dd5b4
006dd5b9 : CMP EDI,0xa
006dd5bc : JLE 0x006dd5d5
006dd5be : MOV EAX,dword ptr [ESP + 0x10]
006dd5c2 : MOV ECX,dword ptr [EAX]
006dd5c4 : MOV dword ptr [ECX + 0x14],0x6
006dd5cb : MOV EDX,dword ptr [EAX]
006dd5cd : PUSH EAX
006dd5ce : MOV EAX,dword ptr [EDX]
006dd5d0 : CALL EAX
006dd5d2 : ADD ESP,0x4
006dd5d5 : SHL ESI,0x4
006dd5d8 : ADD ESI,EDI
006dd5da : INC dword ptr [EBX + ESI*0x4]
006dd5dd : LEA EAX,[EBX + ESI*0x4]
006dd5e0 : XOR ESI,ESI
006dd5e2 : ADD EBP,0x4
006dd5e5 : CMP EBP,0xbf1670
006dd5eb : JL 0x006dd570
006dd5ed : POP EDI
006dd5ee : TEST ESI,ESI
006dd5f0 : POP ESI
006dd5f1 : POP EBP
006dd5f2 : JLE 0x006dd5f6
006dd5f4 : INC dword ptr [EBX]
006dd5f6 : RET
