PROGRAM  : Maestia.exe
FUNCTION : FUN_007ad570
ENTRY    : 007ad570
BODY     : [[007ad570, 007ad8bc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007ad570(void)

{
  int iVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  char cVar6;
  int in_EAX;
  uint uVar7;
  int *piVar8;
  undefined4 *puVar9;
  uint uVar10;
  int iVar11;
  int *unaff_EBX;
  int unaff_EBP;
  int unaff_EDI;
  bool bVar12;
  undefined4 uVar13;
  
  if (in_EAX <= *(int *)(unaff_EBP + -0xdc)) {
    *(undefined1 *)(unaff_EBP + -4) = 0xd;
    FUN_00406560();
    *(undefined1 *)(unaff_EBP + -4) = 0xc;
    FUN_00406560();
    *(undefined1 *)(unaff_EBP + -4) = 0xb;
    FUN_00406560();
    *(undefined1 *)(unaff_EBP + -4) = 10;
    FUN_00406560();
    *(undefined1 *)(unaff_EBP + -4) = 0;
    FUN_00406560();
    FUN_007decf0();
    iVar11 = *(int *)(unaff_EDI + 100);
    iVar1 = *(int *)(unaff_EDI + 0x68);
    unaff_EBX[0x1a] = *(int *)(unaff_EDI + 0x60);
    unaff_EBX[0x1b] = iVar11;
    unaff_EBX[0x1c] = iVar1;
    *(undefined1 *)((int)unaff_EBX + 0x5d) = 1;
    *(undefined1 *)(unaff_EBX + 0x4d) = 1;
    *(undefined1 *)(unaff_EBX + 0x17) = 1;
    if (unaff_EBX[0xb] != 0) {
      (**(code **)(*(int *)unaff_EBX[0xb] + 0x60))();
    }
    uVar13 = *(undefined4 *)(unaff_EDI + 0x6c);
    *(undefined4 *)(unaff_EBP + -0x100) = 0;
    *(undefined4 *)(unaff_EBP + -0xfc) = 0x3f800000;
    *(undefined4 *)(unaff_EBP + -0xf8) = 0;
    FUN_0040eb30(uVar13);
    FUN_007d3700(*(undefined4 *)(unaff_EDI + 0xb4));
    fVar2 = *(float *)(unaff_EDI + 0x70);
    fVar3 = *(float *)(unaff_EDI + 0x74);
    fVar4 = *(float *)(unaff_EDI + 0x78);
    fVar5 = *(float *)(unaff_EDI + 0x7c);
    *(float *)(unaff_EBP + -0x24) = fVar2;
    *(float *)(unaff_EBP + -0x20) = fVar3;
    *(float *)(unaff_EBP + -0x1c) = fVar4;
    *(float *)(unaff_EBP + -0x18) = fVar5;
    if ((((fVar2 != (float)DAT_00d72118) || (fVar3 != DAT_00d72118._4_4_)) ||
        (fVar4 != (float)DAT_00d72120)) || (fVar5 != DAT_00d72120._4_4_)) {
      FUN_004040f0();
    }
    iVar11 = *(int *)(unaff_EDI + 0x80);
    unaff_EBX[0x21] = iVar11;
    unaff_EBX[0x22] = iVar11;
    unaff_EBX[0x23] = iVar11;
    *(undefined1 *)((int)unaff_EBX + 0x5d) = 1;
    *(undefined1 *)(unaff_EBX + 0x4d) = 1;
    *(undefined1 *)(unaff_EBX + 0x17) = 1;
    if (unaff_EBX[0xb] != 0) {
      (**(code **)(*(int *)unaff_EBX[0xb] + 0x60))();
    }
    unaff_EBX[0xc2] = *(int *)(unaff_EDI + 0xbc);
    uVar13 = *(undefined4 *)(unaff_EDI + 0x38);
    (**(code **)(*unaff_EBX + 0xe4))(uVar13);
    *(undefined1 *)((int)unaff_EBX + 0x311) = *(undefined1 *)(unaff_EDI + 0xb8);
    iVar11 = *(int *)(unaff_EBP + -0xec);
    FUN_0045ca50(unaff_EBX);
    *(undefined1 *)(iVar11 + 0x25c0) = 1;
    *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
    FUN_007add3b(uVar13);
    return;
  }
  FUN_0040efe0(unaff_EBP + -0x20c,0xc,8,&LAB_00801ef0);
  uVar10 = 0;
  do {
    uVar7 = uVar10 & 0x80000001;
    bVar12 = uVar7 == 0;
    if ((int)uVar7 < 0) {
      bVar12 = (uVar7 - 1 | 0xfffffffe) == 0xffffffff;
    }
    iVar11 = *(int *)(unaff_EBP + -0xdc);
    if (bVar12) {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x364 + iVar11 * 0x18);
    }
    else {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x358 + iVar11 * 0x18);
    }
    iVar11 = iVar11 * 0x18;
    iVar1 = uVar10 * 0xc;
    *(undefined4 *)(unaff_EBP + -0x20c + iVar1) = uVar13;
    if ((int)(uVar10 + ((int)uVar10 >> 0x1f & 3U)) >> 2 == 0) {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x360 + iVar11);
    }
    else {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x354 + iVar11);
    }
    *(undefined4 *)(unaff_EBP + -0x208 + iVar1) = uVar13;
    uVar7 = (int)uVar10 / 2 & 0x80000001;
    bVar12 = uVar7 == 0;
    if ((int)uVar7 < 0) {
      bVar12 = (uVar7 - 1 | 0xfffffffe) == 0xffffffff;
    }
    if (bVar12) {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x35c + iVar11);
    }
    else {
      uVar13 = *(undefined4 *)(unaff_EBP + -0x350 + iVar11);
    }
    *(undefined4 *)(unaff_EBP + -0x204 + iVar1) = uVar13;
    uVar10 = uVar10 + 1;
  } while ((int)uVar10 < 8);
  FUN_0079fd70();
  *(undefined1 *)(unaff_EBP + -4) = 0xf;
  FUN_007a1370();
  *(undefined ***)(unaff_EBP + -400) = &PTR_FUN_00cd083c;
  *(undefined4 *)(unaff_EBP + -0x18c) = 0;
  *(undefined4 *)(unaff_EBP + -0x188) = 0;
  *(undefined4 *)(unaff_EBP + -0x184) = 0;
  *(undefined4 *)(unaff_EBP + -0x180) = 0;
  *(undefined4 *)(unaff_EBP + -0x17c) = 0;
  *(undefined4 *)(unaff_EBP + -0x178) = 0;
  puVar9 = (undefined4 *)(unaff_EBP + -0x170);
  iVar11 = 7;
  do {
    *puVar9 = 0;
    puVar9[1] = 0;
    puVar9[2] = 0;
    puVar9 = puVar9 + 3;
    iVar11 = iVar11 + -1;
  } while (-1 < iVar11);
  FUN_00439630();
  *(undefined1 *)(unaff_EBP + -4) = 0x10;
  *(undefined4 *)(unaff_EBP + -0x18c) = *(undefined4 *)(unaff_EBP + -0x20c);
  *(undefined4 *)(unaff_EBP + -0x188) = *(undefined4 *)(unaff_EBP + -0x208);
  *(undefined4 *)(unaff_EBP + -0x184) = *(undefined4 *)(unaff_EBP + -0x204);
  *(undefined4 *)(unaff_EBP + -0x180) = *(undefined4 *)(unaff_EBP + -0x1b8);
  *(undefined4 *)(unaff_EBP + -0x17c) = *(undefined4 *)(unaff_EBP + -0x1b4);
  *(undefined4 *)(unaff_EBP + -0x178) = *(undefined4 *)(unaff_EBP + -0x1b0);
  *(undefined1 *)(unaff_EBP + -0x110) = 0;
  *(undefined1 *)(unaff_EBP + -0x10f) = 1;
  piVar8 = (int *)FUN_00b03620(0);
  if (piVar8 != (int *)0x0) {
    uVar13 = *(undefined4 *)(unaff_EBP + -0xdc);
    FUN_00404750(L"TREECOLENTITY_%d",uVar13);
    *(undefined1 *)(unaff_EBP + -4) = 0x11;
    FUN_00404750(L"TREECOLMESHNODE_%d",uVar13);
    *(undefined1 *)(unaff_EBP + -4) = 0x12;
    (**(code **)(*piVar8 + 8))(unaff_EBP + -0x68);
    piVar8[1] = 0xe;
    *(undefined4 *)(unaff_EBP + -0xe0) = 0;
    *(undefined1 *)(unaff_EBP + -4) = 0x13;
    iVar11 = FUN_006f02e0(0x250);
    *(int *)(unaff_EBP + -0xf4) = iVar11;
    *(undefined1 *)(unaff_EBP + -4) = 0x14;
    if (iVar11 == 0) {
      puVar9 = (undefined4 *)0x0;
    }
    else {
      puVar9 = (undefined4 *)FUN_007d04b0(iVar11);
    }
    *(undefined1 *)(unaff_EBP + -4) = 0x13;
    *(undefined4 **)(unaff_EBP + -0xe0) = puVar9;
    *(undefined4 *)(unaff_EBP + -4) = 0x12;
    puVar9[0x15] = 2;
    FUN_00405eb0(unaff_EBP + -0x30,0,0xffffffff);
    FUN_004399a0();
    FUN_00439630();
    cVar6 = (**(code **)(*piVar8 + 0xa0))(puVar9,0,0);
    if (cVar6 == '\0') {
      (**(code **)*puVar9)(1);
      *(undefined4 *)(unaff_EBP + -0xe0) = 0;
    }
    FUN_00449730();
    (**(code **)(**(int **)(unaff_EBP + -0xe4) + 0xec))(piVar8,1);
    *(undefined1 *)(unaff_EBP + -4) = 0x11;
    if (7 < *(uint *)(unaff_EBP + -0x18)) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(undefined4 *)(unaff_EBP + -0x18) = 7;
    *(undefined4 *)(unaff_EBP + -0x1c) = 0;
    *(undefined2 *)(unaff_EBP + -0x2c) = 0;
    *(undefined1 *)(unaff_EBP + -4) = 0x10;
    if (7 < *(uint *)(unaff_EBP + -0x50)) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(undefined4 *)(unaff_EBP + -0x50) = 7;
    *(undefined4 *)(unaff_EBP + -0x54) = 0;
    *(undefined2 *)(unaff_EBP + -100) = 0;
    FUN_007ad964();
    return;
  }
  *(undefined1 *)(unaff_EBP + -4) = 0xf;
  *(undefined ***)(unaff_EBP + -400) = &PTR_FUN_00cd083c;
  *(undefined1 *)(unaff_EBP + -4) = 0xe;
  *(undefined ***)(unaff_EBP + -0x420) = &PTR_FUN_00cd083c;
  *(int *)(unaff_EBP + -0xdc) = *(int *)(unaff_EBP + -0xdc) + 1;
  FUN_007ad570();
  return;
}



============================================================
DISASSEMBLY
============================================================
007ad570 : CMP dword ptr [EBP + 0xffffff24],EAX
007ad576 : JGE 0x007ad364
007ad57c : PUSH 0x801ef0
007ad581 : PUSH 0x8
007ad583 : PUSH 0xc
007ad585 : LEA EDX,[EBP + 0xfffffdf4]
007ad58b : PUSH EDX
007ad58c : CALL 0x0040efe0
007ad591 : XOR ECX,ECX
007ad593 : MOV EAX,ECX
007ad595 : AND EAX,0x80000001
007ad59a : JNS 0x007ad5a1
007ad59c : DEC EAX
007ad59d : OR EAX,0xfffffffe
007ad5a0 : INC EAX
007ad5a1 : MOV ESI,dword ptr [EBP + 0xffffff24]
007ad5a7 : LEA ESI,[ESI + ESI*0x2]
007ad5aa : JNZ 0x007ad5bd
007ad5ac : ADD ESI,ESI
007ad5ae : ADD ESI,ESI
007ad5b0 : ADD ESI,ESI
007ad5b2 : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffc9c]
007ad5bb : JMP 0x007ad5cc
007ad5bd : ADD ESI,ESI
007ad5bf : ADD ESI,ESI
007ad5c1 : ADD ESI,ESI
007ad5c3 : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffca8]
007ad5cc : LEA EDI,[ECX + ECX*0x2]
007ad5cf : ADD EDI,EDI
007ad5d1 : ADD EDI,EDI
007ad5d3 : MOVSS dword ptr [EBP + EDI*0x1 + 0xfffffdf4],XMM0
007ad5dc : MOV EAX,ECX
007ad5de : CDQ
007ad5df : AND EDX,0x3
007ad5e2 : ADD EAX,EDX
007ad5e4 : SAR EAX,0x2
007ad5e7 : TEST EAX,EAX
007ad5e9 : JNZ 0x007ad5f6
007ad5eb : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffca0]
007ad5f4 : JMP 0x007ad5ff
007ad5f6 : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffcac]
007ad5ff : MOVSS dword ptr [EBP + EDI*0x1 + 0xfffffdf8],XMM0
007ad608 : MOV EAX,ECX
007ad60a : CDQ
007ad60b : SUB EAX,EDX
007ad60d : SAR EAX,0x1
007ad60f : AND EAX,0x80000001
007ad614 : JNS 0x007ad61b
007ad616 : DEC EAX
007ad617 : OR EAX,0xfffffffe
007ad61a : INC EAX
007ad61b : JNZ 0x007ad628
007ad61d : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffca4]
007ad626 : JMP 0x007ad631
007ad628 : MOVSS XMM0,dword ptr [EBP + ESI*0x1 + 0xfffffcb0]
007ad631 : MOVSS dword ptr [EBP + EDI*0x1 + 0xfffffdfc],XMM0
007ad63a : INC ECX
007ad63b : CMP ECX,0x8
007ad63e : JL 0x007ad593
007ad644 : LEA EAX,[EBP + 0xfffffbe0]
007ad64a : CALL 0x0079fd70
007ad64f : MOV byte ptr [EBP + -0x4],0xf
007ad653 : LEA EAX,[EBP + 0xfffffdf4]
007ad659 : LEA EDI,[EBP + 0xfffffbe0]
007ad65f : CALL 0x007a1370
007ad664 : MOV dword ptr [EBP + 0xfffffe70],0xcd083c
007ad66e : XORPS XMM0,XMM0
007ad671 : MOVSS dword ptr [EBP + 0xfffffe74],XMM0
007ad679 : MOVSS dword ptr [EBP + 0xfffffe78],XMM0
007ad681 : MOVSS dword ptr [EBP + 0xfffffe7c],XMM0
007ad689 : MOVSS dword ptr [EBP + 0xfffffe80],XMM0
007ad691 : MOVSS dword ptr [EBP + 0xfffffe84],XMM0
007ad699 : MOVSS dword ptr [EBP + 0xfffffe88],XMM0
007ad6a1 : LEA EAX,[EBP + 0xfffffe90]
007ad6a7 : MOV ECX,0x7
007ad6ac : LEA ESP,[ESP]
007ad6b0 : MOVSS dword ptr [EAX],XMM0
007ad6b4 : MOVSS dword ptr [EAX + 0x4],XMM0
007ad6b9 : MOVSS dword ptr [EAX + 0x8],XMM0
007ad6be : ADD EAX,0xc
007ad6c1 : SUB ECX,0x1
007ad6c4 : JNS 0x007ad6b0
007ad6c6 : MOV ECX,0xd721b8
007ad6cb : LEA EAX,[EBP + 0xfffffe70]
007ad6d1 : CALL 0x00439630
007ad6d6 : MOV byte ptr [EBP + -0x4],0x10
007ad6da : MOVSS XMM0,dword ptr [EBP + 0xfffffdf4]
007ad6e2 : MOVSS dword ptr [EBP + 0xfffffe74],XMM0
007ad6ea : MOVSS XMM0,dword ptr [EBP + 0xfffffdf8]
007ad6f2 : MOVSS dword ptr [EBP + 0xfffffe78],XMM0
007ad6fa : MOVSS XMM0,dword ptr [EBP + 0xfffffdfc]
007ad702 : MOVSS dword ptr [EBP + 0xfffffe7c],XMM0
007ad70a : MOVSS XMM0,dword ptr [EBP + 0xfffffe48]
007ad712 : MOVSS dword ptr [EBP + 0xfffffe80],XMM0
007ad71a : MOVSS XMM0,dword ptr [EBP + 0xfffffe4c]
007ad722 : MOVSS dword ptr [EBP + 0xfffffe84],XMM0
007ad72a : MOVSS XMM0,dword ptr [EBP + 0xfffffe50]
007ad732 : MOVSS dword ptr [EBP + 0xfffffe88],XMM0
007ad73a : MOV byte ptr [EBP + 0xfffffef0],0x0
007ad741 : MOV byte ptr [EBP + 0xfffffef1],0x1
007ad748 : PUSH 0x0
007ad74a : CALL 0x00b03620
007ad74f : ADD ESP,0x4
007ad752 : MOV EBX,EAX
007ad754 : TEST EBX,EBX
007ad756 : JZ 0x007ad964
007ad75c : MOV EDI,dword ptr [EBP + 0xffffff24]
007ad762 : PUSH EDI
007ad763 : PUSH 0xc17b6c
007ad768 : LEA ESI,[EBP + -0x68]
007ad76b : CALL 0x00404750
007ad770 : MOV byte ptr [EBP + -0x4],0x11
007ad774 : PUSH EDI
007ad775 : PUSH 0xc17b90
007ad77a : LEA ESI,[EBP + -0x30]
007ad77d : CALL 0x00404750
007ad782 : ADD ESP,0x10
007ad785 : MOV byte ptr [EBP + -0x4],0x12
007ad789 : MOV EDX,dword ptr [EBX]
007ad78b : LEA EAX,[EBP + -0x68]
007ad78e : PUSH EAX
007ad78f : MOV ECX,EBX
007ad791 : MOV EDX,dword ptr [EDX + 0x8]
007ad794 : CALL EDX
007ad796 : MOV dword ptr [EBX + 0x4],0xe
007ad79d : XOR EDI,EDI
007ad79f : MOV dword ptr [EBP + 0xffffff20],EDI
007ad7a5 : MOV byte ptr [EBP + -0x4],0x13
007ad7a9 : WAIT
007ad7aa : PUSH 0x250
007ad7af : MOV EAX,0xe46
007ad7b4 : MOV ECX,0xc17bb8
007ad7b9 : CALL 0x006f02e0
007ad7be : ADD ESP,0x4
007ad7c1 : MOV dword ptr [EBP + 0xffffff0c],EAX
007ad7c7 : MOV byte ptr [EBP + -0x4],0x14
007ad7cb : CMP EAX,EDI
007ad7cd : JZ 0x007ad7d9
007ad7cf : PUSH EAX
007ad7d0 : CALL 0x007d04b0
007ad7d5 : MOV ESI,EAX
007ad7d7 : JMP 0x007ad7db
007ad7d9 : XOR ESI,ESI
007ad7db : MOV byte ptr [EBP + -0x4],0x13
007ad7df : MOV dword ptr [EBP + 0xffffff20],ESI
007ad7e5 : WAIT
007ad7e6 : MOV dword ptr [EBP + -0x4],0x12
007ad7ed : MOV dword ptr [ESI + 0x54],0x2
007ad7f4 : PUSH -0x1
007ad7f6 : PUSH EDI
007ad7f7 : LEA EAX,[EBP + -0x30]
007ad7fa : PUSH EAX
007ad7fb : LEA ECX,[ESI + 0x14]
007ad7fe : CALL 0x00405eb0
007ad803 : LEA EAX,[ESI + 0x170]
007ad809 : LEA ECX,[EBP + 0xfffffbe0]
007ad80f : CALL 0x004399a0
007ad814 : LEA EAX,[ESI + 0xec]
007ad81a : LEA ECX,[EBP + 0xfffffe70]
007ad820 : CALL 0x00439630
007ad825 : MOV EDX,dword ptr [EBX]
007ad827 : PUSH EDI
007ad828 : PUSH EDI
007ad829 : PUSH ESI
007ad82a : MOV ECX,EBX
007ad82c : MOV EAX,dword ptr [EDX + 0xa0]
007ad832 : CALL EAX
007ad834 : TEST AL,AL
007ad836 : JNZ 0x007ad848
007ad838 : MOV EDX,dword ptr [ESI]
007ad83a : PUSH 0x1
007ad83c : MOV ECX,ESI
007ad83e : MOV EAX,dword ptr [EDX]
007ad840 : CALL EAX
007ad842 : MOV dword ptr [EBP + 0xffffff20],EDI
007ad848 : MOV EDX,dword ptr [EBP + 0xffffff14]
007ad84e : ADD EDX,0x25c4
007ad854 : LEA EDI,[EBP + 0xffffff20]
007ad85a : CALL 0x00449730
007ad85f : MOV ECX,dword ptr [EBP + 0xffffff1c]
007ad865 : MOV EDX,dword ptr [ECX]
007ad867 : PUSH 0x1
007ad869 : PUSH EBX
007ad86a : MOV EAX,dword ptr [EDX + 0xec]
007ad870 : CALL EAX
007ad872 : MOV byte ptr [EBP + -0x4],0x11
007ad876 : MOV ESI,0x8
007ad87b : CMP dword ptr [EBP + -0x18],ESI
007ad87e : JC 0x007ad888
007ad880 : MOV ECX,dword ptr [EBP + -0x2c]
007ad883 : CALL 0x006f04e0
007ad888 : MOV EBX,0x7
007ad88d : MOV dword ptr [EBP + -0x18],EBX
007ad890 : XOR EDI,EDI
007ad892 : MOV dword ptr [EBP + -0x1c],EDI
007ad895 : XOR ECX,ECX
007ad897 : MOV word ptr [EBP + -0x2c],CX
007ad89b : MOV byte ptr [EBP + -0x4],0x10
007ad89f : CMP dword ptr [EBP + -0x50],ESI
007ad8a2 : JC 0x007ad8ac
007ad8a4 : MOV ECX,dword ptr [EBP + -0x64]
007ad8a7 : CALL 0x006f04e0
007ad8ac : MOV dword ptr [EBP + -0x50],EBX
007ad8af : MOV dword ptr [EBP + -0x54],EDI
007ad8b2 : XOR EDX,EDX
007ad8b4 : MOV word ptr [EBP + -0x64],DX
007ad8b8 : JMP 0x007ad964
