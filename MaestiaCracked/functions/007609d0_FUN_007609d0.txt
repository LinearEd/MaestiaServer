PROGRAM  : Maestia.exe
FUNCTION : FUN_007609d0
ENTRY    : 007609d0
BODY     : [[007609d0, 00760a59] [00760a60, 00760b86] [00760b90, 00760ca7] [00760cb0, 00760ce6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007609d0(uint param_1,int param_2)

{
  short *psVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  int *in_ECX;
  undefined4 *puVar5;
  int iVar6;
  int iVar7;
  short sVar8;
  ushort uVar9;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3c02b;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(param_1 + 0x80);
  uVar9 = 0;
  local_20 = 0;
  local_28 = ".\\Resource\\AvaAniData.cpp";
  local_24 = 299;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  param_1 = 0;
  (**(code **)(*in_ECX + 0xc))(&param_1,2,1,uVar3);
  *(undefined2 *)(param_2 + 0xd0) = (undefined2)param_1;
  if (*(int *)(param_2 + 0xd4) != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  uVar3 = param_1 & 0xffff;
  local_18 = FUN_006f0760(uVar3 * 0x10,"",0,(DAT_01725270 >> 3 & 1) == 0);
  if (local_18 == 0) {
    local_14 = 0;
  }
  else {
    iVar6 = uVar3 - 1;
    local_14 = local_18;
    if (-1 < iVar6) {
      puVar5 = (undefined4 *)(local_18 + 0xc);
      do {
        *(undefined2 *)(puVar5 + -3) = 0;
        puVar5[-2] = 0;
        puVar5[-1] = 0;
        *puVar5 = 0;
        puVar5 = puVar5 + 4;
        iVar6 = iVar6 + -1;
      } while (-1 < iVar6);
    }
  }
  local_8 = local_8 & 0xffffff00;
  if (local_14 == 0) {
    FUN_008018d0(L"AvaAniData::ReadPosTrack() pPosKey alloc failed !!");
    local_8 = 0xffffffff;
    if (local_20 != 0) {
      LeaveCriticalSection(local_2c);
      ExceptionList = local_10;
      return;
    }
  }
  else {
    sVar8 = 0;
    uVar2 = 0;
    if ((short)param_1 != 0) {
      do {
        psVar1 = (short *)((uint)uVar9 * 0x10 + local_14);
        (**(code **)(*in_ECX + 0xc))(psVar1,2,1);
        (**(code **)(*in_ECX + 0xc))(psVar1 + 2,4,3);
        uVar2 = (ushort)param_1;
        sVar8 = *psVar1;
        uVar9 = uVar9 + 1;
      } while (uVar9 < uVar2);
    }
    if (uVar2 != 1) {
      uVar3 = 1;
      if (1 < (int)(uVar2 - 1)) {
        uVar4 = 1;
        do {
          iVar6 = uVar4 * 0x10 + 4 + local_14;
          if (((*(float *)(local_14 + 4) != *(float *)(uVar4 * 0x10 + 4 + local_14)) ||
              (*(float *)(local_14 + 8) != *(float *)(iVar6 + 4))) ||
             (*(float *)(local_14 + 0xc) != *(float *)(iVar6 + 8))) {
            uVar9 = sVar8 + 1;
            local_18 = FUN_006f0760((uint)uVar9 * 0x10,"",0,(DAT_01725270 >> 3 & 1) == 0);
            if (local_18 == 0) {
              iVar6 = 0;
            }
            else {
              iVar7 = uVar9 - 1;
              iVar6 = local_18;
              if (-1 < iVar7) {
                puVar5 = (undefined4 *)(local_18 + 0xc);
                do {
                  *(undefined2 *)(puVar5 + -3) = 0;
                  puVar5[-2] = 0;
                  puVar5[-1] = 0;
                  *puVar5 = 0;
                  puVar5 = puVar5 + 4;
                  iVar7 = iVar7 + -1;
                } while (-1 < iVar7);
              }
            }
            local_8 = local_8 & 0xffffff00;
            *(int *)(param_2 + 0xd4) = iVar6;
            uVar2 = 0;
            *(ushort *)(param_2 + 0xd0) = uVar9;
            if (uVar9 != 0) {
              iVar6 = 0;
              do {
                *(ushort *)(iVar6 + *(int *)(param_2 + 0xd4)) = uVar2;
                FUN_004bd710(param_1);
                uVar2 = uVar2 + 1;
                iVar6 = iVar6 + 0x10;
              } while (uVar2 < uVar9);
            }
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          uVar3 = uVar3 + 1;
          uVar4 = uVar3 & 0xffff;
        } while ((int)uVar4 < (int)(uVar2 - 1));
      }
      *(undefined2 *)(param_2 + 0xd0) = 1;
    }
    *(int *)(param_2 + 0xd4) = local_14;
    local_8 = 0xffffffff;
    if (local_20 != 0) {
      LeaveCriticalSection(local_2c);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007609d0 : PUSH EBP
007609d1 : MOV EBP,ESP
007609d3 : PUSH -0x1
007609d5 : PUSH 0xb3c02b
007609da : MOV EAX,FS:[0x0]
007609e0 : PUSH EAX
007609e1 : SUB ESP,0x1c
007609e4 : PUSH EBX
007609e5 : PUSH ESI
007609e6 : PUSH EDI
007609e7 : MOV EAX,[0x00d66fa0]
007609ec : XOR EAX,EBP
007609ee : PUSH EAX
007609ef : LEA EAX,[EBP + -0xc]
007609f2 : MOV FS:[0x0],EAX
007609f8 : MOV EDI,ECX
007609fa : MOV EAX,dword ptr [EBP + 0x8]
007609fd : LEA ECX,[EBP + -0x28]
00760a00 : SUB EAX,-0x80
00760a03 : XOR EBX,EBX
00760a05 : PUSH ECX
00760a06 : MOV dword ptr [EBP + -0x1c],EBX
00760a09 : MOV dword ptr [EBP + -0x28],EAX
00760a0c : MOV dword ptr [EBP + -0x24],0xc0c2b4
00760a13 : MOV dword ptr [EBP + -0x20],0x12b
00760a1a : MOV dword ptr [EBP + -0x18],0x1
00760a21 : CALL 0x006ef1a0
00760a26 : MOV dword ptr [EBP + -0x4],EBX
00760a29 : MOV EDX,dword ptr [EDI]
00760a2b : MOV EDX,dword ptr [EDX + 0xc]
00760a2e : PUSH 0x1
00760a30 : PUSH 0x2
00760a32 : LEA EAX,[EBP + 0x8]
00760a35 : PUSH EAX
00760a36 : MOV ECX,EDI
00760a38 : MOV dword ptr [EBP + 0x8],EBX
00760a3b : CALL EDX
00760a3d : MOV ESI,dword ptr [EBP + 0xc]
00760a40 : MOV ECX,dword ptr [ESI + 0xd4]
00760a46 : MOV AX,word ptr [EBP + 0x8]
00760a4a : MOV word ptr [ESI + 0xd0],AX
00760a51 : CMP ECX,EBX
00760a53 : JZ 0x00760a60
00760a55 : CALL 0x006f04e0
00760a60 : MOVZX ESI,word ptr [EBP + 0x8]
00760a64 : XOR ECX,ECX
00760a66 : MOV EAX,ESI
00760a68 : MOV EDX,0x10
00760a6d : MUL EDX
00760a6f : SETO CL
00760a72 : MOV EDX,0x0
00760a77 : NEG ECX
00760a79 : OR EAX,ECX
00760a7b : MOV ECX,dword ptr [0x01725270]
00760a81 : SHR ECX,0x3
00760a84 : AND ECX,0x1
00760a87 : SETZ DL
00760a8a : PUSH EDX
00760a8b : PUSH EBX
00760a8c : PUSH 0xbf1a4b
00760a91 : PUSH EAX
00760a92 : CALL 0x006f0760
00760a97 : ADD ESP,0x10
00760a9a : MOV dword ptr [EBP + -0x14],EAX
00760a9d : MOV byte ptr [EBP + -0x4],0x1
00760aa1 : XORPS XMM0,XMM0
00760aa4 : CMP EAX,EBX
00760aa6 : JZ 0x00760ad5
00760aa8 : LEA EDX,[ESI + -0x1]
00760aab : CMP EDX,EBX
00760aad : JL 0x00760ace
00760aaf : LEA ECX,[EAX + 0xc]
00760ab2 : XOR ESI,ESI
00760ab4 : MOV word ptr [ECX + -0xc],SI
00760ab8 : MOVSS dword ptr [ECX + -0x8],XMM0
00760abd : MOVSS dword ptr [ECX + -0x4],XMM0
00760ac2 : MOVSS dword ptr [ECX],XMM0
00760ac6 : ADD ECX,0x10
00760ac9 : SUB EDX,0x1
00760acc : JNS 0x00760ab2
00760ace : MOV ECX,EAX
00760ad0 : MOV dword ptr [EBP + -0x10],ECX
00760ad3 : JMP 0x00760ada
00760ad5 : MOV dword ptr [EBP + -0x10],EBX
00760ad8 : MOV ECX,EBX
00760ada : MOV byte ptr [EBP + -0x4],0x0
00760ade : CMP ECX,EBX
00760ae0 : JNZ 0x00760b26
00760ae2 : MOV ESI,dword ptr [0x00da98e8]
00760ae8 : PUSH 0xc0c2d0
00760aed : CALL 0x008018d0
00760af2 : ADD ESP,0x4
00760af5 : MOV dword ptr [EBP + -0x4],0xffffffff
00760afc : CMP dword ptr [EBP + -0x1c],EBX
00760aff : JZ 0x00760bfe
00760b05 : MOV EAX,dword ptr [EBP + -0x28]
00760b08 : PUSH EAX
00760b09 : CALL dword ptr [0x00b8511c]
00760b0f : MOV dword ptr [EBP + -0x1c],EBX
00760b12 : MOV ECX,dword ptr [EBP + -0xc]
00760b15 : MOV dword ptr FS:[0x0],ECX
00760b1c : POP ECX
00760b1d : POP EDI
00760b1e : POP ESI
00760b1f : POP EBX
00760b20 : MOV ESP,EBP
00760b22 : POP EBP
00760b23 : RET 0x8
00760b26 : MOV EAX,dword ptr [EBP + 0x8]
00760b29 : XOR EDX,EDX
00760b2b : XOR ESI,ESI
00760b2d : CMP DX,AX
00760b30 : JNC 0x00760b69
00760b32 : MOV EDX,dword ptr [EDI]
00760b34 : MOVZX EAX,BX
00760b37 : SHL EAX,0x4
00760b3a : PUSH 0x1
00760b3c : LEA ESI,[EAX + ECX*0x1]
00760b3f : MOV EAX,dword ptr [EDX + 0xc]
00760b42 : PUSH 0x2
00760b44 : PUSH ESI
00760b45 : MOV ECX,EDI
00760b47 : CALL EAX
00760b49 : MOV EDX,dword ptr [EDI]
00760b4b : MOV EDX,dword ptr [EDX + 0xc]
00760b4e : PUSH 0x3
00760b50 : PUSH 0x4
00760b52 : LEA EAX,[ESI + 0x4]
00760b55 : PUSH EAX
00760b56 : MOV ECX,EDI
00760b58 : CALL EDX
00760b5a : MOV EAX,dword ptr [EBP + 0x8]
00760b5d : MOVZX ESI,word ptr [ESI]
00760b60 : MOV ECX,dword ptr [EBP + -0x10]
00760b63 : INC EBX
00760b64 : CMP BX,AX
00760b67 : JC 0x00760b32
00760b69 : CMP AX,0x1
00760b6d : JZ 0x00760bd7
00760b6f : MOVZX EAX,AX
00760b72 : MOV EDI,0x1
00760b77 : LEA EBX,[EAX + -0x1]
00760b7a : CMP EBX,EDI
00760b7c : JLE 0x00760bc8
00760b7e : MOVSS XMM0,dword ptr [ECX + 0x4]
00760b83 : MOV EAX,EDI
00760b85 : JMP 0x00760b90
00760b90 : SHL EAX,0x4
00760b93 : UCOMISS XMM0,dword ptr [EAX + ECX*0x1 + 0x4]
00760b98 : LEA EDX,[EAX + ECX*0x1 + 0x4]
00760b9c : LAHF
00760b9d : TEST AH,0x44
00760ba0 : JP 0x00760c12
00760ba2 : MOVSS XMM1,dword ptr [ECX + 0x8]
00760ba7 : UCOMISS XMM1,dword ptr [EDX + 0x4]
00760bab : LAHF
00760bac : TEST AH,0x44
00760baf : JP 0x00760c12
00760bb1 : MOVSS XMM1,dword ptr [ECX + 0xc]
00760bb6 : UCOMISS XMM1,dword ptr [EDX + 0x8]
00760bba : LAHF
00760bbb : TEST AH,0x44
00760bbe : JP 0x00760c12
00760bc0 : INC EDI
00760bc1 : MOVZX EAX,DI
00760bc4 : CMP EAX,EBX
00760bc6 : JL 0x00760b90
00760bc8 : MOV EDX,dword ptr [EBP + 0xc]
00760bcb : MOV EAX,0x1
00760bd0 : MOV word ptr [EDX + 0xd0],AX
00760bd7 : MOV EAX,dword ptr [EBP + 0xc]
00760bda : MOV dword ptr [EAX + 0xd4],ECX
00760be0 : MOV dword ptr [EBP + -0x4],0xffffffff
00760be7 : CMP dword ptr [EBP + -0x1c],0x0
00760beb : JZ 0x00760bfe
00760bed : MOV ECX,dword ptr [EBP + -0x28]
00760bf0 : PUSH ECX
00760bf1 : CALL dword ptr [0x00b8511c]
00760bf7 : MOV dword ptr [EBP + -0x1c],0x0
00760bfe : MOV ECX,dword ptr [EBP + -0xc]
00760c01 : MOV dword ptr FS:[0x0],ECX
00760c08 : POP ECX
00760c09 : POP EDI
00760c0a : POP ESI
00760c0b : POP EBX
00760c0c : MOV ESP,EBP
00760c0e : POP EBP
00760c0f : RET 0x8
00760c12 : INC ESI
00760c13 : XOR ECX,ECX
00760c15 : MOVZX EDI,SI
00760c18 : MOV EAX,EDI
00760c1a : MOV EDX,0x10
00760c1f : MUL EDX
00760c21 : SETO CL
00760c24 : MOV EDX,0x0
00760c29 : NEG ECX
00760c2b : OR EAX,ECX
00760c2d : MOV ECX,dword ptr [0x01725270]
00760c33 : SHR ECX,0x3
00760c36 : AND ECX,0x1
00760c39 : SETZ DL
00760c3c : PUSH EDX
00760c3d : PUSH 0x0
00760c3f : PUSH 0xbf1a4b
00760c44 : PUSH EAX
00760c45 : CALL 0x006f0760
00760c4a : ADD ESP,0x10
00760c4d : MOV dword ptr [EBP + -0x14],EAX
00760c50 : MOV byte ptr [EBP + -0x4],0x2
00760c54 : TEST EAX,EAX
00760c56 : JZ 0x00760c85
00760c58 : LEA EDX,[EDI + -0x1]
00760c5b : TEST EDX,EDX
00760c5d : JL 0x00760c81
00760c5f : XORPS XMM0,XMM0
00760c62 : LEA ECX,[EAX + 0xc]
00760c65 : XOR EDI,EDI
00760c67 : MOV word ptr [ECX + -0xc],DI
00760c6b : MOVSS dword ptr [ECX + -0x8],XMM0
00760c70 : MOVSS dword ptr [ECX + -0x4],XMM0
00760c75 : MOVSS dword ptr [ECX],XMM0
00760c79 : ADD ECX,0x10
00760c7c : SUB EDX,0x1
00760c7f : JNS 0x00760c65
00760c81 : MOV ECX,EAX
00760c83 : JMP 0x00760c87
00760c85 : XOR ECX,ECX
00760c87 : MOV byte ptr [EBP + -0x4],0x0
00760c8b : MOV EAX,dword ptr [EBP + 0xc]
00760c8e : MOV dword ptr [EAX + 0xd4],ECX
00760c94 : XOR ECX,ECX
00760c96 : XOR EDI,EDI
00760c98 : MOV word ptr [EAX + 0xd0],SI
00760c9f : CMP CX,SI
00760ca2 : JNC 0x00760cdf
00760ca4 : XOR EBX,EBX
00760ca6 : JMP 0x00760cb3
00760cb0 : MOV EAX,dword ptr [EBP + 0xc]
00760cb3 : MOV EDX,dword ptr [EAX + 0xd4]
00760cb9 : MOV word ptr [EBX + EDX*0x1],DI
00760cbd : MOV ECX,dword ptr [EBP + 0x8]
00760cc0 : MOV EDX,dword ptr [EAX + 0xd4]
00760cc6 : PUSH ECX
00760cc7 : MOV ECX,dword ptr [EBP + -0x10]
00760cca : LEA EDX,[EBX + EDX*0x1 + 0x4]
00760cce : CALL 0x004bd710
00760cd3 : INC EDI
00760cd4 : ADD ESP,0x4
00760cd7 : ADD EBX,0x10
00760cda : CMP DI,SI
00760cdd : JC 0x00760cb0
00760cdf : MOV ECX,dword ptr [EBP + -0x10]
00760ce2 : CALL 0x006f04e0
