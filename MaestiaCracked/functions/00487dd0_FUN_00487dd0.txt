PROGRAM  : Maestia.exe
FUNCTION : FUN_00487dd0
ENTRY    : 00487dd0
BODY     : [[00487dd0, 00487f51] [00487f63, 00488078]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00487dd0(uint param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7d070;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = *(int *)(param_1 + 4);
  if (iVar3 == 0) {
    param_1 = 0;
  }
  else {
    param_1 = (*(int *)(param_1 + 0xc) - iVar3) / 0x30;
  }
  iVar1 = *(int *)(iVar2 + 8);
  iVar3 = (iVar1 - iVar3) / 0x30;
  if (iVar3 == 0x5555555) {
    iVar3 = FUN_00452880();
  }
  uVar4 = iVar3 + 1;
  if (param_1 < uVar4) {
    if (0x5555555 - (param_1 >> 1) < param_1) {
      param_1 = 0;
    }
    else {
      param_1 = param_1 + (param_1 >> 1);
    }
    if (param_1 < uVar4) {
      param_1 = uVar4;
    }
    iVar3 = FUN_00488430();
    local_8 = 0;
    FUN_00487cc0();
    FUN_00488490(*(undefined4 *)(iVar2 + 4),param_2);
    FUN_00488490(param_2,*(undefined4 *)(iVar2 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar2 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar2 + 0xc) = param_1 * 0x30 + iVar3;
    *(int *)(iVar2 + 8) = ((*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4)) / 0x30 + 1) * 0x30 + iVar3;
    *(int *)(iVar2 + 4) = iVar3;
    ExceptionList = local_10;
    return;
  }
  iVar3 = iVar1 - param_2 >> 0x1f;
  if ((iVar1 - param_2) / 0x30 + iVar3 == iVar3) {
    FUN_00488490(param_2,iVar1);
    local_8 = 2;
    FUN_00487cc0();
    local_8 = 0xffffffff;
    *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 0x30;
    FUN_00488870(param_2);
    ExceptionList = local_10;
    return;
  }
  uVar5 = FUN_00488490(iVar1 + -0x30,iVar1);
  *(undefined4 *)(iVar2 + 8) = uVar5;
  param_1 = param_1 & 0xffffff00;
  FUN_00488b00(param_2,param_2,param_2,param_1);
  FUN_00488870(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00487dd0 : PUSH EBP
00487dd1 : MOV EBP,ESP
00487dd3 : PUSH -0x1
00487dd5 : PUSH 0xb7d070
00487dda : MOV EAX,FS:[0x0]
00487de0 : PUSH EAX
00487de1 : SUB ESP,0x44
00487de4 : PUSH EBX
00487de5 : PUSH ESI
00487de6 : PUSH EDI
00487de7 : MOV EAX,[0x00d66fa0]
00487dec : XOR EAX,EBP
00487dee : PUSH EAX
00487def : LEA EAX,[EBP + -0xc]
00487df2 : MOV FS:[0x0],EAX
00487df8 : MOV dword ptr [EBP + -0x10],ESP
00487dfb : MOV ESI,ECX
00487dfd : MOV EBX,dword ptr [EBP + 0x8]
00487e00 : MOV ECX,dword ptr [EBX + 0x4]
00487e03 : TEST ECX,ECX
00487e05 : JNZ 0x00487e0c
00487e07 : MOV dword ptr [EBP + 0x8],ECX
00487e0a : JMP 0x00487e25
00487e0c : MOV EDX,dword ptr [EBX + 0xc]
00487e0f : SUB EDX,ECX
00487e11 : MOV EAX,0x2aaaaaab
00487e16 : IMUL EDX
00487e18 : SAR EDX,0x3
00487e1b : MOV EAX,EDX
00487e1d : SHR EAX,0x1f
00487e20 : ADD EAX,EDX
00487e22 : MOV dword ptr [EBP + 0x8],EAX
00487e25 : MOV EDI,dword ptr [EBX + 0x8]
00487e28 : MOV EDX,EDI
00487e2a : SUB EDX,ECX
00487e2c : MOV EAX,0x2aaaaaab
00487e31 : IMUL EDX
00487e33 : SAR EDX,0x3
00487e36 : MOV EAX,EDX
00487e38 : SHR EAX,0x1f
00487e3b : ADD EAX,EDX
00487e3d : MOV ECX,0x5555555
00487e42 : SUB ECX,EAX
00487e44 : CMP ECX,0x1
00487e47 : JNC 0x00487e4e
00487e49 : CALL 0x00452880
00487e4e : INC EAX
00487e4f : MOV ECX,dword ptr [EBP + 0x8]
00487e52 : CMP ECX,EAX
00487e54 : JNC 0x00487f63
00487e5a : MOV EDX,ECX
00487e5c : SHR EDX,0x1
00487e5e : MOV EDI,0x5555555
00487e63 : SUB EDI,EDX
00487e65 : CMP EDI,ECX
00487e67 : JNC 0x00487e75
00487e69 : MOV dword ptr [EBP + 0x8],0x0
00487e70 : MOV ECX,dword ptr [EBP + 0x8]
00487e73 : JMP 0x00487e7a
00487e75 : ADD ECX,EDX
00487e77 : MOV dword ptr [EBP + 0x8],ECX
00487e7a : CMP ECX,EAX
00487e7c : JNC 0x00487e83
00487e7e : MOV dword ptr [EBP + 0x8],EAX
00487e81 : MOV ECX,EAX
00487e83 : CALL 0x00488430
00487e88 : MOV ECX,EAX
00487e8a : MOV dword ptr [EBP + -0x14],ECX
00487e8d : MOV EDX,dword ptr [EBP + 0xc]
00487e90 : SUB EDX,dword ptr [EBX + 0x4]
00487e93 : MOV EAX,0x2aaaaaab
00487e98 : IMUL EDX
00487e9a : SAR EDX,0x3
00487e9d : MOV EAX,EDX
00487e9f : SHR EAX,0x1f
00487ea2 : ADD EAX,EDX
00487ea4 : MOV dword ptr [EBP + -0x1c],EAX
00487ea7 : MOV dword ptr [EBP + -0x4],0x0
00487eae : LEA EDI,[EAX + EAX*0x2]
00487eb1 : SHL EDI,0x4
00487eb4 : ADD EDI,ECX
00487eb6 : MOV EDX,ESI
00487eb8 : MOV ESI,0x1
00487ebd : CALL 0x00487cc0
00487ec2 : MOV dword ptr [EBP + -0x18],ESI
00487ec5 : MOV EDX,dword ptr [EBP + 0xc]
00487ec8 : PUSH EDX
00487ec9 : MOV EAX,dword ptr [EBX + 0x4]
00487ecc : PUSH EAX
00487ecd : MOV ESI,dword ptr [EBP + -0x14]
00487ed0 : MOV EDX,ESI
00487ed2 : CALL 0x00488490
00487ed7 : MOV dword ptr [EBP + -0x18],0x2
00487ede : MOV EAX,dword ptr [EBP + -0x1c]
00487ee1 : LEA EDX,[EAX + EAX*0x2 + 0x3]
00487ee5 : SHL EDX,0x4
00487ee8 : ADD EDX,ESI
00487eea : MOV ECX,dword ptr [EBX + 0x8]
00487eed : PUSH ECX
00487eee : MOV EAX,dword ptr [EBP + 0xc]
00487ef1 : PUSH EAX
00487ef2 : CALL 0x00488490
00487ef7 : MOV dword ptr [EBP + -0x4],0xffffffff
00487efe : MOV ECX,dword ptr [EBX + 0x4]
00487f01 : MOV EDX,dword ptr [EBX + 0x8]
00487f04 : SUB EDX,ECX
00487f06 : MOV EAX,0x2aaaaaab
00487f0b : IMUL EDX
00487f0d : SAR EDX,0x3
00487f10 : MOV EAX,EDX
00487f12 : SHR EAX,0x1f
00487f15 : LEA EDI,[EDX + EAX*0x1 + 0x1]
00487f19 : TEST ECX,ECX
00487f1b : JZ 0x00487f22
00487f1d : CALL 0x006f04e0
00487f22 : MOV EAX,dword ptr [EBP + 0x8]
00487f25 : LEA ECX,[EAX + EAX*0x2]
00487f28 : SHL ECX,0x4
00487f2b : ADD ECX,ESI
00487f2d : MOV dword ptr [EBX + 0xc],ECX
00487f30 : LEA EDX,[EDI + EDI*0x2]
00487f33 : SHL EDX,0x4
00487f36 : ADD EDX,ESI
00487f38 : MOV dword ptr [EBX + 0x8],EDX
00487f3b : MOV dword ptr [EBX + 0x4],ESI
00487f3e : MOV ECX,dword ptr [EBP + -0xc]
00487f41 : MOV dword ptr FS:[0x0],ECX
00487f48 : POP ECX
00487f49 : POP EDI
00487f4a : POP ESI
00487f4b : POP EBX
00487f4c : MOV ESP,EBP
00487f4e : POP EBP
00487f4f : RET 0x8
00487f63 : MOV EDX,EDI
00487f65 : MOV ECX,dword ptr [EBP + 0xc]
00487f68 : SUB EDX,ECX
00487f6a : MOV EAX,0x2aaaaaab
00487f6f : IMUL EDX
00487f71 : SAR EDX,0x3
00487f74 : MOV EAX,EDX
00487f76 : SHR EAX,0x1f
00487f79 : ADD EAX,EDX
00487f7b : MOVQ XMM0,qword ptr [ESI]
00487f7f : PUSH EDI
00487f80 : MOVQ qword ptr [EBP + -0x4c],XMM0
00487f85 : MOVQ XMM0,qword ptr [ESI + 0x8]
00487f8a : MOVQ qword ptr [EBP + -0x44],XMM0
00487f8f : MOVQ XMM0,qword ptr [ESI + 0x10]
00487f94 : MOVQ qword ptr [EBP + -0x3c],XMM0
00487f99 : MOVQ XMM0,qword ptr [ESI + 0x18]
00487f9e : MOVQ qword ptr [EBP + -0x34],XMM0
00487fa3 : MOVQ XMM0,qword ptr [ESI + 0x20]
00487fa8 : MOVQ qword ptr [EBP + -0x2c],XMM0
00487fad : MOVQ XMM0,qword ptr [ESI + 0x28]
00487fb2 : MOVQ qword ptr [EBP + -0x24],XMM0
00487fb7 : CMP EAX,0x1
00487fba : JNC 0x00488028
00487fbc : LEA EDX,[ECX + 0x30]
00487fbf : PUSH ECX
00487fc0 : CALL 0x00488490
00487fc5 : MOV dword ptr [EBP + -0x4],0x2
00487fcc : MOV EDI,dword ptr [EBX + 0x8]
00487fcf : MOV ECX,EDI
00487fd1 : SUB ECX,dword ptr [EBP + 0xc]
00487fd4 : MOV EAX,0x2aaaaaab
00487fd9 : IMUL ECX
00487fdb : SAR EDX,0x3
00487fde : MOV ECX,EDX
00487fe0 : SHR ECX,0x1f
00487fe3 : ADD ECX,EDX
00487fe5 : MOV ESI,0x1
00487fea : SUB ESI,ECX
00487fec : LEA EDX,[EBP + -0x4c]
00487fef : CALL 0x00487cc0
00487ff4 : MOV dword ptr [EBP + -0x4],0xffffffff
00487ffb : ADD dword ptr [EBX + 0x8],0x30
00487fff : MOV EBX,dword ptr [EBX + 0x8]
00488002 : LEA EDX,[EBX + -0x30]
00488005 : MOV EAX,dword ptr [EBP + 0xc]
00488008 : PUSH EAX
00488009 : LEA ECX,[EBP + -0x4c]
0048800c : CALL 0x00488870
00488011 : ADD ESP,0x4
00488014 : MOV ECX,dword ptr [EBP + -0xc]
00488017 : MOV dword ptr FS:[0x0],ECX
0048801e : POP ECX
0048801f : POP EDI
00488020 : POP ESI
00488021 : POP EBX
00488022 : MOV ESP,EBP
00488024 : POP EBP
00488025 : RET 0x8
00488028 : LEA ESI,[EDI + -0x30]
0048802b : PUSH ESI
0048802c : MOV EDX,EDI
0048802e : CALL 0x00488490
00488033 : MOV dword ptr [EBX + 0x8],EAX
00488036 : MOV byte ptr [EBP + 0x8],0x0
0048803a : MOV ECX,dword ptr [EBP + 0x8]
0048803d : PUSH ECX
0048803e : MOV EDX,dword ptr [EBP + 0xc]
00488041 : PUSH EDX
00488042 : MOV EAX,dword ptr [EBP + 0xc]
00488045 : PUSH EAX
00488046 : MOV ECX,dword ptr [EBP + 0xc]
00488049 : PUSH ECX
0048804a : MOV EAX,EDI
0048804c : MOV ECX,ESI
0048804e : CALL 0x00488b00
00488053 : MOV EAX,dword ptr [EBP + 0xc]
00488056 : LEA EDX,[EAX + 0x30]
00488059 : PUSH EAX
0048805a : LEA ECX,[EBP + -0x4c]
0048805d : CALL 0x00488870
00488062 : ADD ESP,0x14
00488065 : MOV ECX,dword ptr [EBP + -0xc]
00488068 : MOV dword ptr FS:[0x0],ECX
0048806f : POP ECX
00488070 : POP EDI
00488071 : POP ESI
00488072 : POP EBX
00488073 : MOV ESP,EBP
00488075 : POP EBP
00488076 : RET 0x8
