PROGRAM  : Maestia.exe
FUNCTION : FUN_00472fd0
ENTRY    : 00472fd0
BODY     : [[00472fd0, 0047302a]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00472fd0(void)

{
  uint uVar1;
  int iVar2;
  uint3 uVar3;
  int unaff_ESI;
  undefined4 *unaff_EDI;
  
  if (*(char *)(unaff_ESI + 0x10) == '\0') {
    if (*(uint *)(unaff_ESI + 8) == *(uint *)(unaff_ESI + 0xc)) {
      if (*(uint *)(unaff_ESI + 0xc) < 8) {
        *(undefined4 *)(unaff_ESI + 0xc) = 8;
      }
      FUN_0046d4d0(unaff_ESI,*(int *)(unaff_ESI + 0xc) * 2 + 1);
    }
    iVar2 = *(int *)(unaff_ESI + 4);
    *(undefined4 *)(iVar2 + *(int *)(unaff_ESI + 8) * 4) = *unaff_EDI;
    *(int *)(unaff_ESI + 8) = *(int *)(unaff_ESI + 8) + 1;
    return CONCAT31((int3)((uint)iVar2 >> 8),1);
  }
  uVar1 = *(uint *)(unaff_ESI + 8);
  uVar3 = (uint3)(uVar1 >> 8);
  if (uVar1 < *(uint *)(unaff_ESI + 0xc)) {
    *(undefined4 *)(*(int *)(unaff_ESI + 4) + uVar1 * 4) = *unaff_EDI;
    *(int *)(unaff_ESI + 8) = *(int *)(unaff_ESI + 8) + 1;
    return CONCAT31(uVar3,1);
  }
  return (uint)uVar3 << 8;
}



============================================================
DISASSEMBLY
============================================================
00472fd0 : CMP byte ptr [ESI + 0x10],0x0
00472fd4 : PUSH EBX
00472fd5 : MOV EBX,0x1
00472fda : JZ 0x00472ff7
00472fdc : MOV EAX,dword ptr [ESI + 0x8]
00472fdf : CMP EAX,dword ptr [ESI + 0xc]
00472fe2 : JNC 0x00472ff3
00472fe4 : MOV EDX,dword ptr [EDI]
00472fe6 : MOV ECX,dword ptr [ESI + 0x4]
00472fe9 : MOV dword ptr [ECX + EAX*0x4],EDX
00472fec : ADD dword ptr [ESI + 0x8],EBX
00472fef : MOV AL,BL
00472ff1 : POP EBX
00472ff2 : RET
00472ff3 : XOR AL,AL
00472ff5 : POP EBX
00472ff6 : RET
00472ff7 : MOV EAX,dword ptr [ESI + 0xc]
00472ffa : CMP dword ptr [ESI + 0x8],EAX
00472ffd : JNZ 0x00473019
00472fff : CMP EAX,0x8
00473002 : JNC 0x0047300b
00473004 : MOV dword ptr [ESI + 0xc],0x8
0047300b : MOV EAX,dword ptr [ESI + 0xc]
0047300e : LEA ECX,[EAX + EAX*0x1 + 0x1]
00473012 : PUSH ECX
00473013 : PUSH ESI
00473014 : CALL 0x0046d4d0
00473019 : MOV EDX,dword ptr [ESI + 0x8]
0047301c : MOV EAX,dword ptr [ESI + 0x4]
0047301f : MOV ECX,dword ptr [EDI]
00473021 : MOV dword ptr [EAX + EDX*0x4],ECX
00473024 : INC dword ptr [ESI + 0x8]
00473027 : MOV AL,BL
00473029 : POP EBX
0047302a : RET
