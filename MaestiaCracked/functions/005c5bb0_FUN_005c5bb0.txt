PROGRAM  : Maestia.exe
FUNCTION : FUN_005c5bb0
ENTRY    : 005c5bb0
BODY     : [[005c5bb0, 005c5d2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c5bb0(undefined4 param_1,uint param_2)

{
  int *piVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  int iVar4;
  int *in_ECX;
  int iVar5;
  int iVar6;
  float10 fVar7;
  longlong local_8;
  
  iVar5 = 0;
  if (param_2 == 0) {
    FUN_005c5570();
    return;
  }
  if (param_2 < 8) {
    iVar6 = 8;
  }
  else {
    fVar7 = (float10)FUN_0063b270();
    local_8 = (longlong)ROUND((float)fVar7 / 0.6931472 + 1.0);
    iVar6 = 1 << ((byte)local_8 & 0x1f);
  }
  local_8 = CONCAT44(local_8._4_4_,0x143);
  puVar3 = (undefined4 *)FUN_00515d60(param_1,iVar6 * 0x10 + 8,&local_8);
  *puVar3 = 0;
  puVar3[1] = iVar6 + -1;
  if (iVar6 != 0) {
    iVar4 = 0;
    do {
      *(undefined4 *)(iVar4 + 8 + (int)puVar3) = 0xfffffffe;
      iVar4 = iVar4 + 0x10;
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
  }
  if (*in_ECX != 0) {
    iVar6 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar2 = (undefined4 *)(iVar5 + 8 + *in_ECX);
      if (*(int *)(iVar5 + 8 + *in_ECX) != -2) {
        FUN_005c5d30(param_1,puVar2 + 1,*(undefined4 *)(puVar2[1] + 0xc));
        puVar2[2] = &PTR_FUN_00b91c9c;
        if (puVar2[3] != 0) {
          FUN_00503db0();
        }
        piVar1 = (int *)(puVar2[1] + 8);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 == 0) {
          FUN_00525340();
        }
        *puVar2 = 0xfffffffe;
      }
      iVar5 = iVar5 + 0x10;
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
    FUN_00515cf0(*in_ECX);
  }
  *in_ECX = (int)puVar3;
  FUN_005c4030();
  return;
}



============================================================
DISASSEMBLY
============================================================
005c5bb0 : SUB ESP,0xc
005c5bb3 : MOV EAX,dword ptr [ESP + 0x14]
005c5bb7 : PUSH EBX
005c5bb8 : PUSH EDI
005c5bb9 : XOR EBX,EBX
005c5bbb : MOV EDI,ECX
005c5bbd : MOV dword ptr [ESP + 0x8],EDI
005c5bc1 : CMP EAX,EBX
005c5bc3 : JNZ 0x005c5bd2
005c5bc5 : CALL 0x005c5570
005c5bca : POP EDI
005c5bcb : POP EBX
005c5bcc : ADD ESP,0xc
005c5bcf : RET 0x8
005c5bd2 : PUSH ESI
005c5bd3 : CMP EAX,0x8
005c5bd6 : JNC 0x005c5bdf
005c5bd8 : MOV ESI,0x8
005c5bdd : JMP 0x005c5c44
005c5bdf : DEC EAX
005c5be0 : MOV dword ptr [ESP + 0x20],EAX
005c5be4 : FILD dword ptr [ESP + 0x20]
005c5be8 : TEST EAX,EAX
005c5bea : JGE 0x005c5bf2
005c5bec : FADD float ptr [0x00cdf0e0]
005c5bf2 : CALL 0x0063b270
005c5bf7 : FSTP float ptr [ESP + 0x20]
005c5bfb : FLD float ptr [ESP + 0x20]
005c5bff : MOV ESI,0x1
005c5c04 : FDIV double ptr [0x00b85fe0]
005c5c0a : FSTP float ptr [ESP + 0x20]
005c5c0e : FLD float ptr [ESP + 0x20]
005c5c12 : FADD double ptr [0x00cdf108]
005c5c18 : FSTP float ptr [ESP + 0x20]
005c5c1c : FLD float ptr [ESP + 0x20]
005c5c20 : FNSTCW word ptr [ESP + 0x20]
005c5c24 : MOVZX EAX,word ptr [ESP + 0x20]
005c5c29 : OR EAX,0xc00
005c5c2e : MOV dword ptr [ESP + 0x10],EAX
005c5c32 : FLDCW word ptr [ESP + 0x10]
005c5c36 : FISTP qword ptr [ESP + 0x10]
005c5c3a : MOV CL,byte ptr [ESP + 0x10]
005c5c3e : SHL ESI,CL
005c5c40 : FLDCW word ptr [ESP + 0x20]
005c5c44 : MOV EDX,dword ptr [ESP + 0x1c]
005c5c48 : MOV ECX,ESI
005c5c4a : LEA EAX,[ESP + 0x10]
005c5c4e : SHL ECX,0x4
005c5c51 : PUSH EAX
005c5c52 : ADD ECX,0x8
005c5c55 : PUSH ECX
005c5c56 : PUSH EDX
005c5c57 : MOV dword ptr [ESP + 0x2c],EBX
005c5c5b : MOV dword ptr [ESP + 0x1c],0x143
005c5c63 : CALL 0x00515d60
005c5c68 : MOV dword ptr [ESP + 0x20],EAX
005c5c6c : MOV dword ptr [EAX],EBX
005c5c6e : MOV ECX,dword ptr [ESP + 0x20]
005c5c72 : LEA EAX,[ESI + -0x1]
005c5c75 : MOV dword ptr [ECX + 0x4],EAX
005c5c78 : CMP ESI,EBX
005c5c7a : JBE 0x005c5c94
005c5c7c : XOR EAX,EAX
005c5c7e : MOV EDI,EDI
005c5c80 : MOV EDX,dword ptr [ESP + 0x20]
005c5c84 : MOV dword ptr [EAX + EDX*0x1 + 0x8],0xfffffffe
005c5c8c : ADD EAX,0x10
005c5c8f : SUB ESI,0x1
005c5c92 : JNZ 0x005c5c80
005c5c94 : MOV EAX,dword ptr [EDI]
005c5c96 : CMP EAX,EBX
005c5c98 : JZ 0x005c5d0c
005c5c9a : MOV EAX,dword ptr [EAX + 0x4]
005c5c9d : PUSH EBP
005c5c9e : LEA EBP,[EAX + 0x1]
005c5ca1 : JMP 0x005c5ca7
005c5ca3 : MOV EDI,dword ptr [ESP + 0x10]
005c5ca7 : MOV EAX,dword ptr [EDI]
005c5ca9 : CMP dword ptr [EBX + EAX*0x1 + 0x8],-0x2
005c5cae : LEA EDI,[EBX + EAX*0x1 + 0x8]
005c5cb2 : JZ 0x005c5cf3
005c5cb4 : MOV ECX,dword ptr [EDI + 0x4]
005c5cb7 : MOV EDX,dword ptr [ECX + 0xc]
005c5cba : MOV EAX,dword ptr [ESP + 0x20]
005c5cbe : LEA ESI,[EDI + 0x4]
005c5cc1 : PUSH EDX
005c5cc2 : PUSH ESI
005c5cc3 : PUSH EAX
005c5cc4 : LEA ECX,[ESP + 0x30]
005c5cc8 : CALL 0x005c5d30
005c5ccd : MOV dword ptr [ESI + 0x4],0xb91c9c
005c5cd4 : MOV ECX,dword ptr [ESI + 0x8]
005c5cd7 : TEST ECX,ECX
005c5cd9 : JZ 0x005c5ce0
005c5cdb : CALL 0x00503db0
005c5ce0 : MOV ECX,dword ptr [ESI]
005c5ce2 : ADD dword ptr [ECX + 0x8],-0x1
005c5ce6 : JNZ 0x005c5ced
005c5ce8 : CALL 0x00525340
005c5ced : MOV dword ptr [EDI],0xfffffffe
005c5cf3 : ADD EBX,0x10
005c5cf6 : SUB EBP,0x1
005c5cf9 : JNZ 0x005c5ca3
005c5cfb : MOV ECX,dword ptr [ESP + 0x10]
005c5cff : MOV EDX,dword ptr [ECX]
005c5d01 : PUSH EDX
005c5d02 : CALL 0x00515cf0
005c5d07 : MOV EDI,dword ptr [ESP + 0x10]
005c5d0b : POP EBP
005c5d0c : MOV EAX,dword ptr [ESP + 0x20]
005c5d10 : LEA ECX,[ESP + 0x20]
005c5d14 : MOV dword ptr [EDI],EAX
005c5d16 : MOV dword ptr [ESP + 0x20],0x0
005c5d1e : CALL 0x005c4030
005c5d23 : POP ESI
005c5d24 : POP EDI
005c5d25 : POP EBX
005c5d26 : ADD ESP,0xc
005c5d29 : RET 0x8
