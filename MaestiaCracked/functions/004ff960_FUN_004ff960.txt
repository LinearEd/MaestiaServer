PROGRAM  : Maestia.exe
FUNCTION : FUN_004ff960
ENTRY    : 004ff960
BODY     : [[004ff960, 004ff9e4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_004ff960(uint param_1)

{
  int iVar1;
  void *_Dst;
  int *in_ECX;
  
  if (((uint)in_ECX[1] < param_1) && ((uint)in_ECX[3] <= param_1)) {
    _Dst = (void *)FUN_00515840(param_1 * 2 + 2,0);
    if (_Dst != (void *)0x0) {
      if ((void *)*in_ECX != (void *)0x0) {
        _memcpy(_Dst,(void *)*in_ECX,in_ECX[1] * 2 + 2);
      }
      *(undefined2 *)((int)_Dst + param_1 * 2) = 0;
      iVar1 = *in_ECX;
      if ((iVar1 != in_ECX[2]) && (iVar1 != 0)) {
        FUN_00515cf0(iVar1);
      }
      *in_ECX = (int)_Dst;
      in_ECX[1] = param_1;
      return 1;
    }
    return 0;
  }
  if (*in_ECX != 0) {
    *(undefined2 *)(*in_ECX + param_1 * 2) = 0;
  }
  in_ECX[1] = param_1;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
004ff960 : PUSH EBX
004ff961 : MOV EBX,dword ptr [ESP + 0x8]
004ff965 : PUSH ESI
004ff966 : MOV ESI,ECX
004ff968 : CMP EBX,dword ptr [ESI + 0x4]
004ff96b : JBE 0x004ff9cf
004ff96d : CMP EBX,dword ptr [ESI + 0xc]
004ff970 : JC 0x004ff9cf
004ff972 : MOV ECX,dword ptr [0x00d73250]
004ff978 : PUSH EDI
004ff979 : PUSH 0x0
004ff97b : LEA EAX,[EBX + EBX*0x1 + 0x2]
004ff97f : PUSH EAX
004ff980 : CALL 0x00515840
004ff985 : MOV EDI,EAX
004ff987 : TEST EDI,EDI
004ff989 : JZ 0x004ff9c7
004ff98b : MOV EAX,dword ptr [ESI]
004ff98d : TEST EAX,EAX
004ff98f : JZ 0x004ff9a3
004ff991 : MOV ECX,dword ptr [ESI + 0x4]
004ff994 : LEA EDX,[ECX + ECX*0x1 + 0x2]
004ff998 : PUSH EDX
004ff999 : PUSH EAX
004ff99a : PUSH EDI
004ff99b : CALL 0x0063ae40
004ff9a0 : ADD ESP,0xc
004ff9a3 : XOR EAX,EAX
004ff9a5 : MOV word ptr [EDI + EBX*0x2],AX
004ff9a9 : MOV EAX,dword ptr [ESI]
004ff9ab : CMP EAX,dword ptr [ESI + 0x8]
004ff9ae : JZ 0x004ff9ba
004ff9b0 : TEST EAX,EAX
004ff9b2 : JZ 0x004ff9ba
004ff9b4 : PUSH EAX
004ff9b5 : CALL 0x00515cf0
004ff9ba : MOV dword ptr [ESI],EDI
004ff9bc : POP EDI
004ff9bd : MOV dword ptr [ESI + 0x4],EBX
004ff9c0 : POP ESI
004ff9c1 : MOV AL,0x1
004ff9c3 : POP EBX
004ff9c4 : RET 0x4
004ff9c7 : POP EDI
004ff9c8 : POP ESI
004ff9c9 : XOR AL,AL
004ff9cb : POP EBX
004ff9cc : RET 0x4
004ff9cf : MOV EAX,dword ptr [ESI]
004ff9d1 : TEST EAX,EAX
004ff9d3 : JZ 0x004ff9db
004ff9d5 : XOR ECX,ECX
004ff9d7 : MOV word ptr [EAX + EBX*0x2],CX
004ff9db : MOV dword ptr [ESI + 0x4],EBX
004ff9de : POP ESI
004ff9df : MOV AL,0x1
004ff9e1 : POP EBX
004ff9e2 : RET 0x4
