PROGRAM  : Maestia.exe
FUNCTION : FUN_00958520
ENTRY    : 00958520
BODY     : [[00958520, 00958740]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00958520(int *param_1)

{
  int *piVar1;
  int iVar2;
  int *in_ECX;
  uint local_48;
  int local_3c;
  undefined1 local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b4ab24;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 7;
  local_1c = 0;
  local_2c = local_2c & 0xffff0000;
  local_8 = 0;
  (**(code **)(*in_ECX + 0x58))();
  FUN_00405eb0(local_30,0,0xffffffff);
  local_8 = local_8 & 0xffffff00;
  FUN_008f75f0();
  local_8._0_1_ = 2;
  FUN_00405eb0();
  iVar2 = DAT_00d7c54c;
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_48) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if ((((char)((uint)param_1[4] >> 0x18) == '\x06') &&
      (FUN_004437f0(), local_3c != *(int *)(iVar2 + 0x44))) &&
     (*(int **)(local_3c + 0x10) != (int *)0x0)) {
    (**(code **)(**(int **)(local_3c + 0x10) + 0x44))();
  }
  piVar1 = *(int **)(*DAT_00da9894 + 0x114);
  iVar2 = *piVar1;
  (**(code **)(*param_1 + 0x30))();
  (**(code **)(*param_1 + 0x7c))();
  (**(code **)(*param_1 + 0x40))();
  (**(code **)(iVar2 + 4))(piVar1,"TradeInsertMyItem","%ls,%d,%d,%b,%b,%b,%d");
  FUN_00a08b70();
  iVar2 = *DAT_00da9894;
  if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
    (**(code **)(**(int **)(iVar2 + 0x114) + 4))();
  }
  FUN_009930d0();
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = local_2c & 0xffff0000;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00958520 : PUSH EBP
00958521 : MOV EBP,ESP
00958523 : PUSH -0x1
00958525 : PUSH 0xb4ab24
0095852a : MOV EAX,FS:[0x0]
00958530 : PUSH EAX
00958531 : SUB ESP,0x50
00958534 : MOV EAX,[0x00d66fa0]
00958539 : XOR EAX,EBP
0095853b : MOV dword ptr [EBP + -0x10],EAX
0095853e : PUSH EBX
0095853f : PUSH ESI
00958540 : PUSH EDI
00958541 : PUSH EAX
00958542 : LEA EAX,[EBP + -0xc]
00958545 : MOV FS:[0x0],EAX
0095854b : MOV ESI,dword ptr [EBP + 0x8]
0095854e : MOV EDI,dword ptr [ESI + 0x10]
00958551 : XOR EBX,EBX
00958553 : XOR EAX,EAX
00958555 : MOV dword ptr [EBP + -0x40],ECX
00958558 : MOV dword ptr [EBP + -0x14],0x7
0095855f : MOV dword ptr [EBP + -0x18],EBX
00958562 : MOV word ptr [EBP + -0x28],AX
00958566 : MOV dword ptr [EBP + -0x4],EBX
00958569 : MOV EDX,dword ptr [ECX]
0095856b : MOV EDX,dword ptr [EDX + 0x58]
0095856e : LEA EAX,[EBP + -0x2c]
00958571 : PUSH EAX
00958572 : PUSH EDI
00958573 : CALL EDX
00958575 : SUB ESP,0x1c
00958578 : MOV ECX,ESP
0095857a : MOV dword ptr [EBP + -0x3c],ESP
0095857d : PUSH -0x1
0095857f : PUSH EBX
00958580 : LEA EDX,[EBP + -0x2c]
00958583 : XOR EAX,EAX
00958585 : MOV dword ptr [ECX + 0x18],0x7
0095858c : MOV dword ptr [ECX + 0x14],EBX
0095858f : PUSH EDX
00958590 : MOV word ptr [ECX + 0x4],AX
00958594 : CALL 0x00405eb0
00958599 : MOV byte ptr [EBP + -0x4],0x1
0095859d : MOV byte ptr [EBP + -0x4],BL
009585a0 : LEA ECX,[EBP + -0x5c]
009585a3 : CALL 0x008f75f0
009585a8 : ADD ESP,0x1c
009585ab : MOV byte ptr [EBP + -0x4],0x2
009585af : PUSH -0x1
009585b1 : PUSH EBX
009585b2 : PUSH EAX
009585b3 : LEA ECX,[EBP + -0x2c]
009585b6 : CALL 0x00405eb0
009585bb : MOV byte ptr [EBP + -0x4],BL
009585be : CMP dword ptr [EBP + -0x44],0x8
009585c2 : JC 0x009585cc
009585c4 : MOV ECX,dword ptr [EBP + -0x58]
009585c7 : CALL 0x006f04e0
009585cc : MOV ECX,dword ptr [EBP + 0xc]
009585cf : XOR EAX,EAX
009585d1 : MOV word ptr [EBP + -0x58],AX
009585d5 : MOV EAX,dword ptr [EBP + 0x10]
009585d8 : LEA EDX,[ECX + EAX*0x4]
009585db : MOV ECX,dword ptr [ESI + 0x10]
009585de : ADD EDX,EAX
009585e0 : MOVZX EAX,DX
009585e3 : SHR ECX,0x18
009585e6 : MOV dword ptr [EBP + -0x44],0x7
009585ed : MOV dword ptr [EBP + -0x48],EBX
009585f0 : MOV dword ptr [EBP + -0x3c],EAX
009585f3 : MOV byte ptr [EBP + -0x2d],0x0
009585f7 : CMP CL,0x6
009585fa : JNZ 0x00958632
009585fc : MOV dword ptr [EBP + -0x34],EDI
009585ff : MOV EDI,dword ptr [0x00d7c54c]
00958605 : LEA EDX,[EBP + -0x34]
00958608 : PUSH EDX
00958609 : LEA ECX,[EDI + 0x40]
0095860c : LEA EAX,[EBP + -0x38]
0095860f : CALL 0x004437f0
00958614 : MOV EDI,dword ptr [EDI + 0x44]
00958617 : MOV EAX,dword ptr [EBP + -0x38]
0095861a : CMP EAX,EDI
0095861c : JZ 0x00958632
0095861e : MOV ECX,dword ptr [EAX + 0x10]
00958621 : CMP ECX,EBX
00958623 : JZ 0x00958632
00958625 : MOV EAX,dword ptr [ECX]
00958627 : MOV EDX,dword ptr [EAX + 0x44]
0095862a : CALL EDX
0095862c : TEST EAX,EAX
0095862e : SETNZ byte ptr [EBP + -0x2d]
00958632 : MOV EAX,[0x00da9894]
00958637 : MOV EAX,dword ptr [EAX]
00958639 : MOV EDI,dword ptr [EAX + 0x114]
0095863f : MOV EAX,dword ptr [ESI + 0x120]
00958645 : SHR EAX,0x2
00958648 : AND EAX,0x1
0095864b : CMP dword ptr [EBP + -0x14],0x8
0095864f : JC 0x00958659
00958651 : MOV ECX,dword ptr [EBP + -0x28]
00958654 : MOV dword ptr [EBP + -0x34],ECX
00958657 : JMP 0x0095865f
00958659 : LEA EDX,[EBP + -0x28]
0095865c : MOV dword ptr [EBP + -0x34],EDX
0095865f : MOVZX EDX,byte ptr [EBP + -0x2d]
00958663 : MOV ECX,dword ptr [EDI]
00958665 : MOVZX EBX,word ptr [EBP + -0x3c]
00958669 : PUSH EAX
0095866a : MOV EAX,dword ptr [ESI]
0095866c : MOV dword ptr [EBP + -0x38],ECX
0095866f : PUSH EDX
00958670 : MOV EDX,dword ptr [EAX + 0x30]
00958673 : MOV ECX,ESI
00958675 : CALL EDX
00958677 : MOV EDX,dword ptr [ESI]
00958679 : MOVZX EAX,AL
0095867c : PUSH EAX
0095867d : MOV EAX,dword ptr [EDX + 0x7c]
00958680 : MOV ECX,ESI
00958682 : CALL EAX
00958684 : MOV EDX,dword ptr [ESI]
00958686 : MOVZX ECX,AL
00958689 : MOV EAX,dword ptr [EDX + 0x40]
0095868c : PUSH ECX
0095868d : MOV ECX,ESI
0095868f : CALL EAX
00958691 : MOV EDX,dword ptr [EBP + -0x34]
00958694 : MOVZX ECX,AX
00958697 : MOV EAX,dword ptr [EBP + -0x38]
0095869a : PUSH ECX
0095869b : MOV ECX,dword ptr [EAX + 0x4]
0095869e : PUSH EBX
0095869f : PUSH EDX
009586a0 : PUSH 0xc75fbc
009586a5 : PUSH 0xc75fd4
009586aa : PUSH EDI
009586ab : CALL ECX
009586ad : ADD ESP,0x28
009586b0 : MOV ECX,ESI
009586b2 : CALL 0x00a08b70
009586b7 : MOV EDX,dword ptr [0x00da9894]
009586bd : MOV ECX,dword ptr [EDX]
009586bf : TEST ECX,ECX
009586c1 : JZ 0x009586e9
009586c3 : CMP dword ptr [ECX + 0x114],0x0
009586ca : JZ 0x009586e9
009586cc : MOV ECX,dword ptr [ECX + 0x114]
009586d2 : MOV EDX,dword ptr [ECX]
009586d4 : PUSH EAX
009586d5 : MOV EAX,dword ptr [EDX + 0x4]
009586d8 : PUSH EBX
009586d9 : PUSH 0xc75fe8
009586de : PUSH 0xc75ff0
009586e3 : PUSH ECX
009586e4 : CALL EAX
009586e6 : ADD ESP,0x14
009586e9 : MOV ECX,dword ptr [EBP + 0x10]
009586ec : MOV EDX,dword ptr [EBP + 0xc]
009586ef : PUSH ECX
009586f0 : MOV ECX,dword ptr [EBP + -0x40]
009586f3 : PUSH EDX
009586f4 : PUSH ESI
009586f5 : CALL 0x009930d0
009586fa : MOV dword ptr [EBP + -0x4],0xffffffff
00958701 : CMP dword ptr [EBP + -0x14],0x8
00958705 : JC 0x0095870f
00958707 : MOV ECX,dword ptr [EBP + -0x28]
0095870a : CALL 0x006f04e0
0095870f : XOR EAX,EAX
00958711 : MOV dword ptr [EBP + -0x14],0x7
00958718 : MOV dword ptr [EBP + -0x18],0x0
0095871f : MOV word ptr [EBP + -0x28],AX
00958723 : MOV ECX,dword ptr [EBP + -0xc]
00958726 : MOV dword ptr FS:[0x0],ECX
0095872d : POP ECX
0095872e : POP EDI
0095872f : POP ESI
00958730 : POP EBX
00958731 : MOV ECX,dword ptr [EBP + -0x10]
00958734 : XOR ECX,EBP
00958736 : CALL 0x00633e6b
0095873b : MOV ESP,EBP
0095873d : POP EBP
0095873e : RET 0xc
