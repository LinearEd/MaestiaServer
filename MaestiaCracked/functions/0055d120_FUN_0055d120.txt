PROGRAM  : Maestia.exe
FUNCTION : FUN_0055d120
ENTRY    : 0055d120
BODY     : [[0055d120, 0055d21f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055d120(undefined4 param_1,uint *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  int iVar7;
  
  piVar3 = (int *)*in_ECX;
  if (piVar3 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar3 * 5) <= piVar3[1] * 4 + 4U) goto LAB_0055d15a;
    iVar7 = piVar3[1] * 2 + 2;
  }
  FUN_0055cbb0(param_1,iVar7);
LAB_0055d15a:
  piVar3 = (int *)*in_ECX;
  param_3 = param_3 & piVar3[1];
  *piVar3 = *piVar3 + 1;
  iVar7 = *in_ECX;
  iVar4 = *(int *)(iVar7 + 8 + param_3 * 0xc);
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0xc);
  if (iVar4 == -2) {
    uVar6 = *param_2;
    *puVar1 = 0xffffffff;
    puVar1[2] = uVar6;
    puVar1[1] = param_3;
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0xc) != -2);
  piVar3 = (int *)(iVar7 + 8 + uVar6 * 0xc);
  uVar5 = puVar1[1];
  if (uVar5 != param_3) {
    puVar2 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc)) {
      uVar5 = *puVar2;
      puVar2 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    }
    if (piVar3 != (int *)0x0) {
      *piVar3 = iVar4;
      piVar3[1] = puVar1[1];
      piVar3[2] = puVar1[2];
    }
    *puVar2 = uVar6;
    puVar1[2] = *param_2;
    *puVar1 = 0xffffffff;
    puVar1[1] = param_3;
    return;
  }
  if (piVar3 != (int *)0x0) {
    *piVar3 = iVar4;
    piVar3[1] = puVar1[1];
    piVar3[2] = puVar1[2];
  }
  puVar1[2] = *param_2;
  *puVar1 = uVar6;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
0055d120 : PUSH EBP
0055d121 : PUSH ESI
0055d122 : MOV ESI,ECX
0055d124 : MOV EAX,dword ptr [ESI]
0055d126 : TEST EAX,EAX
0055d128 : JNZ 0x0055d133
0055d12a : MOV EAX,dword ptr [ESP + 0xc]
0055d12e : PUSH 0x8
0055d130 : PUSH EAX
0055d131 : JMP 0x0055d155
0055d133 : MOV ECX,dword ptr [EAX + 0x4]
0055d136 : LEA EDX,[ECX*0x4 + 0x4]
0055d13d : MOV ECX,dword ptr [EAX]
0055d13f : LEA ECX,[ECX + ECX*0x4]
0055d142 : CMP ECX,EDX
0055d144 : JBE 0x0055d15a
0055d146 : MOV EDX,dword ptr [EAX + 0x4]
0055d149 : MOV ECX,dword ptr [ESP + 0xc]
0055d14d : LEA EAX,[EDX + EDX*0x1 + 0x2]
0055d151 : PUSH EAX
0055d152 : PUSH ECX
0055d153 : MOV ECX,ESI
0055d155 : CALL 0x0055cbb0
0055d15a : MOV ECX,dword ptr [ESI]
0055d15c : MOV EAX,dword ptr [ESP + 0x14]
0055d160 : AND EAX,dword ptr [ECX + 0x4]
0055d163 : INC dword ptr [ECX]
0055d165 : MOV ESI,dword ptr [ESI]
0055d167 : LEA EDX,[EAX + EAX*0x2]
0055d16a : MOV EBP,dword ptr [ESI + EDX*0x4 + 0x8]
0055d16e : LEA ECX,[ESI + EDX*0x4 + 0x8]
0055d172 : CMP EBP,-0x2
0055d175 : JNZ 0x0055d18e
0055d177 : MOV EDX,dword ptr [ESP + 0x10]
0055d17b : MOV EDX,dword ptr [EDX]
0055d17d : MOV dword ptr [ECX],0xffffffff
0055d183 : POP ESI
0055d184 : MOV dword ptr [ECX + 0x8],EDX
0055d187 : MOV dword ptr [ECX + 0x4],EAX
0055d18a : POP EBP
0055d18b : RET 0xc
0055d18e : PUSH EDI
0055d18f : MOV EDI,dword ptr [ESI + 0x4]
0055d192 : MOV EDX,EAX
0055d194 : PUSH EBX
0055d195 : INC EDX
0055d196 : AND EDX,EDI
0055d198 : LEA EBX,[EDX + EDX*0x2]
0055d19b : CMP dword ptr [ESI + EBX*0x4 + 0x8],-0x2
0055d1a0 : JNZ 0x0055d195
0055d1a2 : LEA EDI,[EDX + EDX*0x2]
0055d1a5 : LEA EBX,[ESI + EDI*0x4 + 0x8]
0055d1a9 : MOV EDI,dword ptr [ECX + 0x4]
0055d1ac : CMP EDI,EAX
0055d1ae : JNZ 0x0055d1d7
0055d1b0 : TEST EBX,EBX
0055d1b2 : JZ 0x0055d1c2
0055d1b4 : MOV dword ptr [EBX],EBP
0055d1b6 : MOV ESI,dword ptr [ECX + 0x4]
0055d1b9 : MOV dword ptr [EBX + 0x4],ESI
0055d1bc : MOV ESI,dword ptr [ECX + 0x8]
0055d1bf : MOV dword ptr [EBX + 0x8],ESI
0055d1c2 : MOV ESI,dword ptr [ESP + 0x18]
0055d1c6 : MOV ESI,dword ptr [ESI]
0055d1c8 : POP EBX
0055d1c9 : POP EDI
0055d1ca : MOV dword ptr [ECX + 0x8],ESI
0055d1cd : POP ESI
0055d1ce : MOV dword ptr [ECX],EDX
0055d1d0 : MOV dword ptr [ECX + 0x4],EAX
0055d1d3 : POP EBP
0055d1d4 : RET 0xc
0055d1d7 : LEA EDI,[EDI + EDI*0x2]
0055d1da : CMP dword ptr [ESI + EDI*0x4 + 0x8],EAX
0055d1de : LEA EDI,[ESI + EDI*0x4 + 0x8]
0055d1e2 : JZ 0x0055d1f3
0055d1e4 : MOV EDI,dword ptr [EDI]
0055d1e6 : LEA EDI,[EDI + EDI*0x2]
0055d1e9 : CMP dword ptr [ESI + EDI*0x4 + 0x8],EAX
0055d1ed : LEA EDI,[ESI + EDI*0x4 + 0x8]
0055d1f1 : JNZ 0x0055d1e4
0055d1f3 : TEST EBX,EBX
0055d1f5 : JZ 0x0055d205
0055d1f7 : MOV dword ptr [EBX],EBP
0055d1f9 : MOV ESI,dword ptr [ECX + 0x4]
0055d1fc : MOV dword ptr [EBX + 0x4],ESI
0055d1ff : MOV ESI,dword ptr [ECX + 0x8]
0055d202 : MOV dword ptr [EBX + 0x8],ESI
0055d205 : MOV dword ptr [EDI],EDX
0055d207 : MOV EDX,dword ptr [ESP + 0x18]
0055d20b : MOV EDX,dword ptr [EDX]
0055d20d : POP EBX
0055d20e : POP EDI
0055d20f : POP ESI
0055d210 : MOV dword ptr [ECX + 0x8],EDX
0055d213 : MOV dword ptr [ECX],0xffffffff
0055d219 : MOV dword ptr [ECX + 0x4],EAX
0055d21c : POP EBP
0055d21d : RET 0xc
