PROGRAM  : Maestia.exe
FUNCTION : FUN_006b4e80
ENTRY    : 006b4e80
BODY     : [[006b4e80, 006b4f2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b4e80(void)

{
  uint uVar1;
  uint uVar2;
  char cVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint *in_EDX;
  int unaff_ESI;
  
  puVar4 = *(undefined4 **)(unaff_ESI + 0x194);
  uVar1 = *in_EDX;
  uVar2 = *(uint *)(unaff_ESI + 0x18c);
  puVar5 = puVar4 + uVar2 * 4;
  for (; (puVar4 < puVar5 && (puVar4[2] != uVar1)); puVar4 = puVar4 + 4) {
  }
  if (puVar4 == puVar5) {
    if (*(uint *)(unaff_ESI + 400) <= uVar2) {
      *(undefined4 *)(unaff_ESI + 0xc) = 0x8c;
      return;
    }
    *(uint *)(unaff_ESI + 0x18c) = uVar2 + 1;
  }
  *puVar4 = *(undefined4 *)(unaff_ESI + 0x160);
  puVar4[2] = uVar1;
  puVar4[1] = *(int *)(unaff_ESI + 0x168) + 1;
  *(undefined1 *)(puVar4 + 3) = 1;
  if (*(uint *)(unaff_ESI + 0x1a4) < uVar1) {
    *(uint *)(unaff_ESI + 0x1a4) = uVar1;
  }
  cVar3 = FUN_006b4d70();
  if (cVar3 == '\0') {
    while (cVar3 = *(char *)(unaff_ESI + 0x170), cVar3 != ',') {
      if (cVar3 == '-') {
        return;
      }
      if (cVar3 == -0x77) break;
      cVar3 = FUN_006b4d70();
      if (cVar3 != '\0') {
        return;
      }
    }
    *(undefined4 *)(unaff_ESI + 0xc) = 0x89;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b4e80 : MOV EAX,dword ptr [ESI + 0x194]
006b4e86 : MOV EDX,dword ptr [EDX]
006b4e88 : PUSH EDI
006b4e89 : MOV EDI,dword ptr [ESI + 0x18c]
006b4e8f : MOV ECX,EDI
006b4e91 : SHL ECX,0x4
006b4e94 : ADD ECX,EAX
006b4e96 : CMP EAX,ECX
006b4e98 : JNC 0x006b4eae
006b4e9a : LEA EBX,[EBX]
006b4ea0 : CMP dword ptr [EAX + 0x8],EDX
006b4ea3 : JZ 0x006b4eac
006b4ea5 : ADD EAX,0x10
006b4ea8 : CMP EAX,ECX
006b4eaa : JC 0x006b4ea0
006b4eac : CMP EAX,ECX
006b4eae : JNZ 0x006b4ec8
006b4eb0 : CMP EDI,dword ptr [ESI + 0x190]
006b4eb6 : JC 0x006b4ec1
006b4eb8 : MOV dword ptr [ESI + 0xc],0x8c
006b4ebf : POP EDI
006b4ec0 : RET
006b4ec1 : INC EDI
006b4ec2 : MOV dword ptr [ESI + 0x18c],EDI
006b4ec8 : MOV ECX,dword ptr [ESI + 0x160]
006b4ece : MOV dword ptr [EAX],ECX
006b4ed0 : MOV dword ptr [EAX + 0x8],EDX
006b4ed3 : MOV ECX,dword ptr [ESI + 0x168]
006b4ed9 : INC ECX
006b4eda : MOV dword ptr [EAX + 0x4],ECX
006b4edd : MOV byte ptr [EAX + 0xc],0x1
006b4ee1 : CMP EDX,dword ptr [ESI + 0x1a4]
006b4ee7 : JBE 0x006b4eef
006b4ee9 : MOV dword ptr [ESI + 0x1a4],EDX
006b4eef : MOV EAX,ESI
006b4ef1 : CALL 0x006b4d70
006b4ef6 : TEST AL,AL
006b4ef8 : JNZ 0x006b4f2a
006b4efa : LEA EBX,[EBX]
006b4f00 : MOVZX EAX,byte ptr [ESI + 0x170]
006b4f07 : SUB EAX,0x2c
006b4f0a : JZ 0x006b4f23
006b4f0c : SUB EAX,0x1
006b4f0f : JZ 0x006b4f2a
006b4f11 : SUB EAX,0x5c
006b4f14 : JZ 0x006b4f23
006b4f16 : MOV EAX,ESI
006b4f18 : CALL 0x006b4d70
006b4f1d : TEST AL,AL
006b4f1f : JZ 0x006b4f00
006b4f21 : POP EDI
006b4f22 : RET
006b4f23 : MOV dword ptr [ESI + 0xc],0x89
006b4f2a : POP EDI
006b4f2b : RET
