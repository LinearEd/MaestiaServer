PROGRAM  : Maestia.exe
FUNCTION : FUN_005334f0
ENTRY    : 005334f0
BODY     : [[005334f0, 005336a8]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005334f0(int *param_1,int param_2,undefined4 param_3,char param_4)

{
  int iVar1;
  char *pcVar2;
  char cVar3;
  int iVar4;
  int *piVar5;
  int *in_ECX;
  undefined4 *puVar6;
  char acStack_38 [16];
  undefined1 auStack_28 [16];
  int *piStack_18;
  undefined1 *puStack_14;
  undefined4 uStack_10;
  undefined4 uStack_c;
  char *pcStack_8;
  undefined4 uStack_4;
  
  iVar4 = (**(code **)(*(int *)in_ECX[0x1d] + 0x40))();
  iVar1 = param_2;
  if ((*(uint *)(iVar4 + 0xb00) >> 2 & 1) != 0) {
    puVar6 = &param_2;
    piVar5 = in_ECX;
    FUN_005266c0(param_2);
    FUN_005276b0(puVar6,piVar5);
    FUN_00526bc0();
    GThread::OnExit((GThread *)*param_1);
    *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
    if (*(int *)(param_2 + 8) == 0) {
      FUN_00525340();
    }
  }
  if ((*(uint *)(*param_1 + 0xc) >> 0x19 & 1) == 0) {
    cVar3 = FUN_005296d0(param_1);
    if (cVar3 != '\0') {
      acStack_38[0] = '\0';
      param_2 = *(int *)(in_ECX[0x1e] + 8);
      *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + 1;
      puStack_14 = auStack_28;
      uStack_10 = param_3;
      pcStack_8 = acStack_38;
      auStack_28[0] = 0;
      piStack_18 = param_1;
      uStack_c = 0;
      uStack_4 = 0;
      FUN_00532cf0(&piStack_18,0,&param_2);
      if (acStack_38[0] == '\0') {
        if (param_4 != '\0') {
          cVar3 = (**(code **)(*in_ECX + 4))();
          if (cVar3 != '\0') {
            FUN_0052e440();
          }
        }
      }
      else {
        piVar5 = (int *)FUN_005270f0(in_ECX);
        if (piVar5 != (int *)0x0) {
          param_4 = 0;
          (**(code **)(*piVar5 + 0xc))();
          FUN_00526bc0();
          pcVar2 = pcStack_8;
          *(int *)(pcStack_8 + 8) = *(int *)(pcStack_8 + 8) + -1;
          if (*(int *)(pcVar2 + 8) == 0) {
            FUN_00525340();
          }
          FUN_00526bc0();
          return 1;
        }
      }
      FUN_00526bc0();
      *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
      if (*(int *)(param_2 + 8) == 0) {
        FUN_00525340();
      }
      FUN_00526bc0();
      return 0;
    }
  }
  FUN_00530f10(param_1,iVar1,param_3);
  return 1;
}



============================================================
DISASSEMBLY
============================================================
005334f0 : SUB ESP,0x38
005334f3 : PUSH EBX
005334f4 : PUSH EBP
005334f5 : PUSH ESI
005334f6 : MOV ESI,ECX
005334f8 : MOV ECX,dword ptr [ESI + 0x74]
005334fb : MOV EAX,dword ptr [ECX]
005334fd : MOV EDX,dword ptr [EAX + 0x40]
00533500 : PUSH EDI
00533501 : CALL EDX
00533503 : MOV EAX,dword ptr [EAX + 0xb00]
00533509 : MOV EBP,dword ptr [ESP + 0x50]
0053350d : MOV EDI,dword ptr [ESP + 0x4c]
00533511 : SHR EAX,0x2
00533514 : XOR EBX,EBX
00533516 : TEST AL,0x1
00533518 : JZ 0x00533569
0053351a : PUSH ESI
0053351b : LEA ECX,[ESP + 0x54]
0053351f : PUSH ECX
00533520 : PUSH EBP
00533521 : LEA ECX,[ESP + 0x2c]
00533525 : CALL 0x005266c0
0053352a : MOV ECX,EAX
0053352c : CALL 0x005276b0
00533531 : LEA ECX,[ESP + 0x20]
00533535 : CALL 0x00526bc0
0053353a : MOV EDX,dword ptr [ESP + 0x50]
0053353e : MOV EAX,dword ptr [EDX]
00533540 : MOV ECX,dword ptr [EDI]
00533542 : MOV EDX,dword ptr [ECX]
00533544 : PUSH EAX
00533545 : PUSH EDX
00533546 : PUSH 0xb8b784
0053354b : PUSH ESI
0053354c : CALL 0x0051d420
00533551 : MOV EAX,dword ptr [ESP + 0x60]
00533555 : DEC dword ptr [EAX + 0x8]
00533558 : MOV ECX,EAX
0053355a : ADD EAX,0x8
0053355d : ADD ESP,0x10
00533560 : CMP dword ptr [EAX],EBX
00533562 : JNZ 0x00533569
00533564 : CALL 0x00525340
00533569 : MOV EAX,dword ptr [EDI]
0053356b : MOV ECX,dword ptr [EAX + 0xc]
0053356e : SHR ECX,0x19
00533571 : TEST CL,0x1
00533574 : JNZ 0x0053368f
0053357a : PUSH EDI
0053357b : CALL 0x005296d0
00533580 : ADD ESP,0x4
00533583 : TEST AL,AL
00533585 : JZ 0x0053368f
0053358b : MOV EDX,dword ptr [ESI + 0x78]
0053358e : MOV ECX,dword ptr [ESP + 0x54]
00533592 : MOV byte ptr [ESP + 0x10],BL
00533596 : MOV EAX,dword ptr [EDX + 0x8]
00533599 : MOV dword ptr [ESP + 0x50],EAX
0053359d : INC dword ptr [EAX + 0x8]
005335a0 : LEA EAX,[ESP + 0x20]
005335a4 : MOV dword ptr [ESP + 0x34],EAX
005335a8 : LEA EAX,[ESP + 0x50]
005335ac : PUSH EAX
005335ad : MOV dword ptr [ESP + 0x3c],ECX
005335b1 : PUSH EBX
005335b2 : LEA ECX,[ESP + 0x38]
005335b6 : LEA EDX,[ESP + 0x18]
005335ba : PUSH ECX
005335bb : MOV ECX,ESI
005335bd : MOV byte ptr [ESP + 0x2c],BL
005335c1 : MOV dword ptr [ESP + 0x3c],EDI
005335c5 : MOV dword ptr [ESP + 0x48],EBX
005335c9 : MOV dword ptr [ESP + 0x4c],EDX
005335cd : MOV dword ptr [ESP + 0x50],EBX
005335d1 : CALL 0x00532cf0
005335d6 : CMP byte ptr [ESP + 0x10],BL
005335da : JZ 0x00533636
005335dc : PUSH ESI
005335dd : LEA ECX,[ESP + 0x14]
005335e1 : CALL 0x005270f0
005335e6 : CMP EAX,EBX
005335e8 : JZ 0x0053365c
005335ea : MOV EDX,dword ptr [EAX]
005335ec : MOV EDX,dword ptr [EDX + 0xc]
005335ef : LEA ECX,[ESP + 0x58]
005335f3 : PUSH ECX
005335f4 : PUSH EBP
005335f5 : LEA ECX,[ESP + 0x58]
005335f9 : PUSH ECX
005335fa : PUSH ESI
005335fb : MOV ECX,EAX
005335fd : MOV byte ptr [ESP + 0x68],BL
00533601 : CALL EDX
00533603 : LEA ECX,[ESP + 0x20]
00533607 : CALL 0x00526bc0
0053360c : MOV EAX,dword ptr [ESP + 0x50]
00533610 : DEC dword ptr [EAX + 0x8]
00533613 : MOV ECX,EAX
00533615 : ADD EAX,0x8
00533618 : CMP dword ptr [EAX],EBX
0053361a : JNZ 0x00533621
0053361c : CALL 0x00525340
00533621 : LEA ECX,[ESP + 0x10]
00533625 : CALL 0x00526bc0
0053362a : POP EDI
0053362b : POP ESI
0053362c : POP EBP
0053362d : MOV AL,0x1
0053362f : POP EBX
00533630 : ADD ESP,0x38
00533633 : RET 0x10
00533636 : CMP byte ptr [ESP + 0x58],BL
0053363a : JZ 0x0053365c
0053363c : MOV EAX,dword ptr [ESI]
0053363e : MOV EDX,dword ptr [EAX + 0x4]
00533641 : MOV ECX,ESI
00533643 : CALL EDX
00533645 : TEST AL,AL
00533647 : JZ 0x0053365c
00533649 : MOV EAX,dword ptr [EDI]
0053364b : MOV ECX,dword ptr [EAX]
0053364d : PUSH ECX
0053364e : PUSH 0xb8b74c
00533653 : PUSH ESI
00533654 : CALL 0x0052e440
00533659 : ADD ESP,0xc
0053365c : LEA ECX,[ESP + 0x20]
00533660 : CALL 0x00526bc0
00533665 : MOV EAX,dword ptr [ESP + 0x50]
00533669 : DEC dword ptr [EAX + 0x8]
0053366c : MOV ECX,EAX
0053366e : ADD EAX,0x8
00533671 : CMP dword ptr [EAX],EBX
00533673 : JNZ 0x0053367a
00533675 : CALL 0x00525340
0053367a : LEA ECX,[ESP + 0x10]
0053367e : CALL 0x00526bc0
00533683 : POP EDI
00533684 : POP ESI
00533685 : POP EBP
00533686 : XOR AL,AL
00533688 : POP EBX
00533689 : ADD ESP,0x38
0053368c : RET 0x10
0053368f : MOV EDX,dword ptr [ESP + 0x54]
00533693 : PUSH EDX
00533694 : PUSH EBP
00533695 : PUSH EDI
00533696 : MOV ECX,ESI
00533698 : CALL 0x00530f10
0053369d : POP EDI
0053369e : POP ESI
0053369f : POP EBP
005336a0 : MOV AL,0x1
005336a2 : POP EBX
005336a3 : ADD ESP,0x38
005336a6 : RET 0x10
