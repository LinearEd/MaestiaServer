PROGRAM  : Maestia.exe
FUNCTION : FUN_00597610
ENTRY    : 00597610
BODY     : [[00597610, 0059777a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00597610(int param_1)

{
  int iVar1;
  int iVar2;
  int in_ECX;
  float fStack_60;
  float fStack_5c;
  float *pfStack_58;
  GMatrix2D *pGStack_54;
  float fStack_40;
  float fStack_3c;
  float local_38;
  float fStack_34;
  GMatrix2D aGStack_30 [24];
  GMatrix2D local_18 [8];
  float *pfStack_10;
  float *pfStack_4;
  
  if (*(int *)(*(int *)(in_ECX + 0xc) + 4) != 0) {
    pGStack_54 = (GMatrix2D *)0x597630;
    GMatrix2D::SetIdentity(local_18);
    pGStack_54 = local_18;
    pfStack_58 = (float *)0x59763c;
    FUN_0051cdf0();
    pGStack_54 = local_18;
    pfStack_58 = &local_38;
    fStack_5c = 8.215806e-39;
    (**(code **)(**(int **)(*(int *)(in_ECX + 0xc) + 4) + 0x28))();
    if (pfStack_4 != (float *)0x0) {
      *pfStack_4 = fStack_40 / 20.0;
      pfStack_4[1] = fStack_3c / 20.0;
      pfStack_4[2] = local_38 / 20.0;
      pfStack_4[3] = fStack_34 / 20.0;
    }
    fStack_5c = 8.215945e-39;
    iVar1 = (**(code **)(**(int **)(*(int *)(in_ECX + 0xc) + 4) + 0x18c))();
    iVar2 = **(int **)(*(int *)(in_ECX + 0xc) + 4);
    if (iVar1 == -1) {
      fStack_5c = 8.215977e-39;
      iVar1 = (**(code **)(iVar2 + 0x158))();
    }
    else {
      fStack_5c = 8.215994e-39;
      iVar2 = (**(code **)(iVar2 + 400))();
      iVar1 = iVar1 + iVar2;
    }
    iVar1 = iVar1 + param_1;
    if (iVar1 < 0) {
      iVar1 = 0;
    }
    fStack_5c = 0.0;
    fStack_60 = 0.0;
    (**(code **)(**(int **)(*(int *)(in_ECX + 0xc) + 4) + 0x1a0))(aGStack_30,iVar1);
    fStack_60 = 0.0;
    fStack_5c = 0.0;
    pfStack_58 = (float *)0x0;
    pGStack_54 = (GMatrix2D *)0x0;
    GMatrix2D::EncloseTransform(aGStack_30,(GRect<float> *)&fStack_60,(GRect<float> *)&fStack_40);
    if (pfStack_10 != (float *)0x0) {
      *pfStack_10 = fStack_60 / 20.0;
      pfStack_10[1] = fStack_5c / 20.0;
      pfStack_10[2] = (float)pfStack_58 / 20.0;
      pfStack_10[3] = (float)pGStack_54 / 20.0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00597610 : SUB ESP,0x48
00597613 : PUSH ESI
00597614 : MOV ESI,ECX
00597616 : MOV EAX,dword ptr [ESI + 0xc]
00597619 : CMP dword ptr [EAX + 0x4],0x0
0059761d : JZ 0x00597774
00597623 : PUSH EDI
00597624 : MOV EDI,dword ptr [EAX + 0x4]
00597627 : LEA ECX,[ESP + 0x38]
0059762b : CALL 0x00522b80
00597630 : LEA EAX,[ESP + 0x38]
00597634 : PUSH EAX
00597635 : MOV ECX,EDI
00597637 : CALL 0x0051cdf0
0059763c : MOV ECX,dword ptr [ESI + 0xc]
0059763f : MOV ECX,dword ptr [ECX + 0x4]
00597642 : MOV EDX,dword ptr [ECX]
00597644 : MOV EDX,dword ptr [EDX + 0x28]
00597647 : LEA EAX,[ESP + 0x38]
0059764b : PUSH EAX
0059764c : LEA EAX,[ESP + 0x1c]
00597650 : PUSH EAX
00597651 : CALL EDX
00597653 : FLD double ptr [0x00b86058]
00597659 : MOV EAX,dword ptr [ESP + 0x54]
0059765d : TEST EAX,EAX
0059765f : JZ 0x005976a4
00597661 : FLD float ptr [ESP + 0x18]
00597665 : FDIV ST0,ST1
00597667 : FSTP float ptr [ESP + 0x8]
0059766b : FLD float ptr [ESP + 0x1c]
0059766f : FDIV ST0,ST1
00597671 : FSTP float ptr [ESP + 0xc]
00597675 : FLD float ptr [ESP + 0x20]
00597679 : FDIV ST0,ST1
0059767b : FSTP float ptr [ESP + 0x10]
0059767f : FDIVR float ptr [ESP + 0x24]
00597683 : FSTP float ptr [ESP + 0x14]
00597687 : FLD float ptr [ESP + 0x8]
0059768b : FSTP float ptr [EAX]
0059768d : FLD float ptr [ESP + 0xc]
00597691 : FSTP float ptr [EAX + 0x4]
00597694 : FLD float ptr [ESP + 0x10]
00597698 : FSTP float ptr [EAX + 0x8]
0059769b : FLD float ptr [ESP + 0x14]
0059769f : FSTP float ptr [EAX + 0xc]
005976a2 : JMP 0x005976a6
005976a4 : FSTP ST0
005976a6 : MOV EAX,dword ptr [ESI + 0xc]
005976a9 : MOV ECX,dword ptr [EAX + 0x4]
005976ac : MOV EDX,dword ptr [ECX]
005976ae : MOV EAX,dword ptr [EDX + 0x18c]
005976b4 : CALL EAX
005976b6 : MOV ECX,dword ptr [ESI + 0xc]
005976b9 : MOV ECX,dword ptr [ECX + 0x4]
005976bc : MOV EDX,dword ptr [ECX]
005976be : MOV EDI,EAX
005976c0 : CMP EDI,-0x1
005976c3 : JNZ 0x005976d1
005976c5 : MOV EAX,dword ptr [EDX + 0x158]
005976cb : CALL EAX
005976cd : MOV EDI,EAX
005976cf : JMP 0x005976db
005976d1 : MOV EAX,dword ptr [EDX + 0x190]
005976d7 : CALL EAX
005976d9 : ADD EDI,EAX
005976db : ADD EDI,dword ptr [ESP + 0x5c]
005976df : JNS 0x005976e3
005976e1 : XOR EDI,EDI
005976e3 : MOV ECX,dword ptr [ESI + 0xc]
005976e6 : MOV ECX,dword ptr [ECX + 0x4]
005976e9 : MOV EDX,dword ptr [ECX]
005976eb : MOV EDX,dword ptr [EDX + 0x1a0]
005976f1 : PUSH 0x0
005976f3 : PUSH 0x0
005976f5 : PUSH EDI
005976f6 : LEA EAX,[ESP + 0x34]
005976fa : PUSH EAX
005976fb : CALL EDX
005976fd : FLDZ
005976ff : LEA EAX,[ESP + 0x28]
00597703 : FST float ptr [ESP + 0x8]
00597707 : PUSH EAX
00597708 : FST float ptr [ESP + 0x10]
0059770c : LEA ECX,[ESP + 0xc]
00597710 : FST float ptr [ESP + 0x14]
00597714 : PUSH ECX
00597715 : FSTP float ptr [ESP + 0x1c]
00597719 : LEA ECX,[ESP + 0x40]
0059771d : CALL 0x005231d0
00597722 : MOV EAX,dword ptr [ESP + 0x58]
00597726 : POP EDI
00597727 : TEST EAX,EAX
00597729 : JZ 0x00597774
0059772b : FLD float ptr [ESP + 0x4]
0059772f : FLD double ptr [0x00b86058]
00597735 : FDIV ST1,ST0
00597737 : FXCH
00597739 : FSTP float ptr [ESP + 0x14]
0059773d : FLD float ptr [ESP + 0x8]
00597741 : FDIV ST0,ST1
00597743 : FSTP float ptr [ESP + 0x18]
00597747 : FLD float ptr [ESP + 0xc]
0059774b : FDIV ST0,ST1
0059774d : FSTP float ptr [ESP + 0x1c]
00597751 : FDIVR float ptr [ESP + 0x10]
00597755 : FSTP float ptr [ESP + 0x20]
00597759 : FLD float ptr [ESP + 0x14]
0059775d : FSTP float ptr [EAX]
0059775f : FLD float ptr [ESP + 0x18]
00597763 : FSTP float ptr [EAX + 0x4]
00597766 : FLD float ptr [ESP + 0x1c]
0059776a : FSTP float ptr [EAX + 0x8]
0059776d : FLD float ptr [ESP + 0x20]
00597771 : FSTP float ptr [EAX + 0xc]
00597774 : POP ESI
00597775 : ADD ESP,0x48
00597778 : RET 0xc
