PROGRAM  : Maestia.exe
FUNCTION : FUN_00a28fb0
ENTRY    : 00a28fb0
BODY     : [[00a28fb0, 00a29108]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a28fb0(void)

{
  int *piVar1;
  int iVar2;
  int unaff_ESI;
  float10 fVar3;
  float fVar4;
  float fVar5;
  
  if (*(char *)(unaff_ESI + 0x4f0) != '\0') {
    if ((*(int *)(unaff_ESI + 0x4f4) == -1) &&
       (piVar1 = (int *)**(int **)(unaff_ESI + 0xcc), piVar1 != *(int **)(unaff_ESI + 0xcc))) {
      iVar2 = *(int *)(unaff_ESI + 0x4f8);
      do {
        if (*(int *)(piVar1[4] + 8) == iVar2) {
          *(undefined4 *)(unaff_ESI + 0x4f4) = *(undefined4 *)(piVar1[4] + 4);
          *(undefined4 *)(unaff_ESI + 0x4f8) = 0;
          break;
        }
        FUN_00416210();
      } while (piVar1 != (int *)*(int *)(unaff_ESI + 0xcc));
    }
    iVar2 = *(int *)(*(int *)(unaff_ESI + 0xac) + 1000);
    fVar4 = *(float *)(iVar2 + 0x68);
    fVar5 = *(float *)(iVar2 + 0x70);
    *(undefined4 *)(unaff_ESI + 0x500) = 0;
    fVar5 = fVar5 - *(float *)(unaff_ESI + 0x504);
    fVar4 = fVar4 - *(float *)(unaff_ESI + 0x4fc);
    fVar3 = (float10)FUN_0040f460(fVar5 * fVar5 + fVar4 * fVar4 +
                                  -*(float *)(unaff_ESI + 0x500) * -*(float *)(unaff_ESI + 0x500));
    if (fVar3 < (float10)DAT_00d72c20) {
      FUN_00a0d390(DAT_017247d4,2);
      *(undefined1 *)(unaff_ESI + 0x4f0) = 0;
      *(undefined4 *)(unaff_ESI + 0x4f4) = 0xffffffff;
      *(undefined4 *)(unaff_ESI + 0x4fc) = DAT_01720f20;
      *(undefined4 *)(unaff_ESI + 0x500) = DAT_01720f24;
      *(undefined4 *)(unaff_ESI + 0x504) = DAT_01720f28;
      *(undefined4 *)(unaff_ESI + 0x4f8) = 0;
      if (*(int **)(unaff_ESI + 0xac) != (int *)0x0) {
        (**(code **)(**(int **)(unaff_ESI + 0xac) + 0x338))(1);
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a28fb0 : PUSH EBP
00a28fb1 : MOV EBP,ESP
00a28fb3 : PUSH ECX
00a28fb4 : CMP byte ptr [ESI + 0x4f0],0x0
00a28fbb : PUSH EDI
00a28fbc : JZ 0x00a29104
00a28fc2 : CMP dword ptr [ESI + 0x4f4],-0x1
00a28fc9 : JNZ 0x00a29012
00a28fcb : MOV ECX,dword ptr [ESI + 0xcc]
00a28fd1 : MOV EAX,dword ptr [ECX]
00a28fd3 : MOV dword ptr [EBP + -0x4],EAX
00a28fd6 : CMP EAX,ECX
00a28fd8 : JZ 0x00a29012
00a28fda : MOV EDI,dword ptr [ESI + 0x4f8]
00a28fe0 : MOV ECX,dword ptr [EAX + 0x10]
00a28fe3 : CMP dword ptr [ECX + 0x8],EDI
00a28fe6 : JZ 0x00a28ffd
00a28fe8 : LEA EDX,[EBP + -0x4]
00a28feb : CALL 0x00416210
00a28ff0 : MOV EAX,dword ptr [EBP + -0x4]
00a28ff3 : CMP EAX,dword ptr [ESI + 0xcc]
00a28ff9 : JNZ 0x00a28fe0
00a28ffb : JMP 0x00a29012
00a28ffd : MOV EDX,ECX
00a28fff : MOV EAX,dword ptr [EDX + 0x4]
00a29002 : MOV dword ptr [ESI + 0x4f4],EAX
00a29008 : MOV dword ptr [ESI + 0x4f8],0x0
00a29012 : MOV ECX,dword ptr [ESI + 0xac]
00a29018 : MOV EAX,dword ptr [ECX + 0x3e8]
00a2901e : MOVSS XMM0,dword ptr [EAX + 0x68]
00a29023 : MOVSS XMM1,dword ptr [EAX + 0x70]
00a29028 : XORPS XMM2,XMM2
00a2902b : ADD EAX,0x68
00a2902e : MOVSS dword ptr [ESI + 0x500],XMM2
00a29036 : SUBSS XMM1,dword ptr [ESI + 0x504]
00a2903e : SUBSS XMM0,dword ptr [ESI + 0x4fc]
00a29046 : MOVAPS XMM3,XMM1
00a29049 : MULSS XMM3,XMM1
00a2904d : MOVAPS XMM2,XMM0
00a29050 : MOVSS XMM0,dword ptr [ESI + 0x500]
00a29058 : XORPS XMM0,xmmword ptr [0x00cdf0c0]
00a2905f : MOVAPS XMM1,XMM2
00a29062 : MULSS XMM1,XMM2
00a29066 : ADDSS XMM3,XMM1
00a2906a : MOVAPS XMM1,XMM0
00a2906d : MULSS XMM1,XMM0
00a29071 : PUSH ECX
00a29072 : ADDSS XMM3,XMM1
00a29076 : MOVSS dword ptr [ESP],XMM3
00a2907b : CALL 0x0040f460
00a29080 : FLD float ptr [0x00d72c20]
00a29086 : ADD ESP,0x4
00a29089 : FCOMIP ST0,ST1
00a2908b : FSTP ST0
00a2908d : JBE 0x00a29104
00a2908f : MOV EDX,dword ptr [0x017247d4]
00a29095 : MOV ECX,dword ptr [ESI + 0x4f4]
00a2909b : PUSH 0x2
00a2909d : PUSH EDX
00a2909e : CALL 0x00a0d390
00a290a3 : MOV byte ptr [ESI + 0x4f0],0x0
00a290aa : MOV dword ptr [ESI + 0x4f4],0xffffffff
00a290b4 : MOVSS XMM0,dword ptr [0x01720f20]
00a290bc : MOVSS dword ptr [ESI + 0x4fc],XMM0
00a290c4 : MOVSS XMM0,dword ptr [0x01720f24]
00a290cc : MOVSS dword ptr [ESI + 0x500],XMM0
00a290d4 : MOVSS XMM0,dword ptr [0x01720f28]
00a290dc : MOVSS dword ptr [ESI + 0x504],XMM0
00a290e4 : MOV ECX,dword ptr [ESI + 0xac]
00a290ea : MOV dword ptr [ESI + 0x4f8],0x0
00a290f4 : TEST ECX,ECX
00a290f6 : JZ 0x00a29104
00a290f8 : MOV EAX,dword ptr [ECX]
00a290fa : MOV EDX,dword ptr [EAX + 0x338]
00a29100 : PUSH 0x1
00a29102 : CALL EDX
00a29104 : POP EDI
00a29105 : MOV ESP,EBP
00a29107 : POP EBP
00a29108 : RET
