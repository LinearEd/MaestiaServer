PROGRAM  : Maestia.exe
FUNCTION : FUN_009a4740
ENTRY    : 009a4740
BODY     : [[009a4740, 009a4994]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a4740(int param_1,undefined4 param_2)

{
  wchar_t wVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  wchar_t *pwVar5;
  int *in_ECX;
  wchar_t *pwVar6;
  wchar_t *pwVar7;
  bool bVar8;
  undefined1 local_60 [4];
  int local_5c;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b4120e;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff90;
  ExceptionList = &local_14;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  FUN_00406360(&DAT_00c89884,1);
  local_c = 0;
  uVar3 = FUN_00404350(param_2,uVar2);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_60,uVar3,local_50,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_c = CONCAT31(local_c._1_3_,4);
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  pwVar5 = (wchar_t *)(param_1 + 4);
  pwVar7 = pwVar5;
  if (7 < *(uint *)(param_1 + 0x18)) {
    pwVar7 = *(wchar_t **)pwVar5;
  }
  pwVar6 = L"onLButtonDown";
  do {
    wVar1 = *pwVar7;
    bVar8 = (ushort)wVar1 < (ushort)*pwVar6;
    if (wVar1 != *pwVar6) {
LAB_009a484c:
      iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
      goto LAB_009a4851;
    }
    if (wVar1 == L'\0') break;
    wVar1 = pwVar7[1];
    bVar8 = (ushort)wVar1 < (ushort)pwVar6[1];
    if (wVar1 != pwVar6[1]) goto LAB_009a484c;
    pwVar7 = pwVar7 + 2;
    pwVar6 = pwVar6 + 2;
  } while (wVar1 != L'\0');
  iVar4 = 0;
LAB_009a4851:
  if (iVar4 != 0) {
    if (7 < *(uint *)(param_1 + 0x18)) {
      pwVar5 = *(wchar_t **)pwVar5;
    }
    pwVar7 = L"DlgMessage";
    do {
      wVar1 = *pwVar5;
      bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
      if (wVar1 != *pwVar7) {
LAB_009a4896:
        iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_009a489b;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar5[1];
      bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
      if (wVar1 != pwVar7[1]) goto LAB_009a4896;
      pwVar5 = pwVar5 + 2;
      pwVar7 = pwVar7 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_009a489b:
    if (iVar4 == 0) {
      pwVar5 = (wchar_t *)(local_5c + 4);
      pwVar7 = pwVar5;
      if (7 < *(uint *)(local_5c + 0x18)) {
        pwVar7 = *(wchar_t **)pwVar5;
      }
      pwVar6 = L"ok";
      do {
        wVar1 = *pwVar7;
        bVar8 = (ushort)wVar1 < (ushort)*pwVar6;
        if (wVar1 != *pwVar6) {
LAB_009a48e6:
          iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
          goto LAB_009a48eb;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar7[1];
        bVar8 = (ushort)wVar1 < (ushort)pwVar6[1];
        if (wVar1 != pwVar6[1]) goto LAB_009a48e6;
        pwVar7 = pwVar7 + 2;
        pwVar6 = pwVar6 + 2;
      } while (wVar1 != L'\0');
      iVar4 = 0;
LAB_009a48eb:
      if (iVar4 == 0) {
        FUN_009a4660(in_ECX,0);
      }
      else {
        if (7 < *(uint *)(local_5c + 0x18)) {
          pwVar5 = *(wchar_t **)pwVar5;
        }
        pwVar7 = L"cancel";
        do {
          wVar1 = *pwVar5;
          bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
          if (wVar1 != *pwVar7) {
LAB_009a4936:
            iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
            goto LAB_009a493b;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar5[1];
          bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
          if (wVar1 != pwVar7[1]) goto LAB_009a4936;
          pwVar5 = pwVar5 + 2;
          pwVar7 = pwVar7 + 2;
        } while (wVar1 != L'\0');
        iVar4 = 0;
LAB_009a493b:
        if (iVar4 == 0) {
          (**(code **)(*in_ECX + 0x20))();
        }
      }
    }
  }
  local_c = 0xffffffff;
  if (local_5c == 0) {
    ExceptionList = local_14;
    return;
  }
  FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009a4740 : PUSH EBP
009a4741 : MOV EBP,ESP
009a4743 : AND ESP,0xfffffff8
009a4746 : PUSH -0x1
009a4748 : PUSH 0xb4120e
009a474d : MOV EAX,FS:[0x0]
009a4753 : PUSH EAX
009a4754 : SUB ESP,0x50
009a4757 : PUSH EBX
009a4758 : PUSH ESI
009a4759 : PUSH EDI
009a475a : MOV EAX,[0x00d66fa0]
009a475f : XOR EAX,ESP
009a4761 : PUSH EAX
009a4762 : LEA EAX,[ESP + 0x60]
009a4766 : MOV FS:[0x0],EAX
009a476c : MOV dword ptr [ESP + 0x10],ECX
009a4770 : PUSH 0x1
009a4772 : XOR EAX,EAX
009a4774 : MOV EDI,0x7
009a4779 : XOR EBX,EBX
009a477b : PUSH 0xc89884
009a4780 : LEA ECX,[ESP + 0x2c]
009a4784 : MOV dword ptr [ESP + 0x44],EDI
009a4788 : MOV dword ptr [ESP + 0x40],EBX
009a478c : MOV word ptr [ESP + 0x30],AX
009a4791 : CALL 0x00406360
009a4796 : MOV dword ptr [ESP + 0x68],EBX
009a479a : MOV ECX,dword ptr [EBP + 0xc]
009a479d : PUSH ECX
009a479e : LEA ESI,[ESP + 0x44]
009a47a2 : CALL 0x00404350
009a47a7 : ADD ESP,0x4
009a47aa : MOV byte ptr [ESP + 0x68],0x1
009a47af : PUSH EBX
009a47b0 : LEA EDX,[ESP + 0x28]
009a47b4 : PUSH EDX
009a47b5 : PUSH EAX
009a47b6 : LEA EAX,[ESP + 0x20]
009a47ba : PUSH EAX
009a47bb : CALL 0x0070cd60
009a47c0 : ADD ESP,0x10
009a47c3 : MOV byte ptr [ESP + 0x68],0x3
009a47c8 : MOV ESI,0x8
009a47cd : CMP dword ptr [ESP + 0x58],ESI
009a47d1 : JC 0x009a47dc
009a47d3 : MOV ECX,dword ptr [ESP + 0x44]
009a47d7 : CALL 0x006f04e0
009a47dc : XOR ECX,ECX
009a47de : MOV dword ptr [ESP + 0x58],EDI
009a47e2 : MOV dword ptr [ESP + 0x54],EBX
009a47e6 : MOV word ptr [ESP + 0x44],CX
009a47eb : MOV byte ptr [ESP + 0x68],0x4
009a47f0 : CMP dword ptr [ESP + 0x3c],ESI
009a47f4 : JC 0x009a47ff
009a47f6 : MOV ECX,dword ptr [ESP + 0x28]
009a47fa : CALL 0x006f04e0
009a47ff : MOV EAX,dword ptr [EBP + 0x8]
009a4802 : MOV dword ptr [ESP + 0x3c],EDI
009a4806 : MOV EDI,dword ptr [EAX + 0x18]
009a4809 : XOR EDX,EDX
009a480b : CMP EDI,ESI
009a480d : MOV dword ptr [ESP + 0x38],EBX
009a4811 : MOV word ptr [ESP + 0x28],DX
009a4816 : LEA ESI,[EAX + 0x4]
009a4819 : JC 0x009a481f
009a481b : MOV EAX,dword ptr [ESI]
009a481d : JMP 0x009a4821
009a481f : MOV EAX,ESI
009a4821 : MOV ECX,0xc89888
009a4826 : MOV DX,word ptr [EAX]
009a4829 : CMP DX,word ptr [ECX]
009a482c : JNZ 0x009a484c
009a482e : CMP DX,BX
009a4831 : JZ 0x009a4848
009a4833 : MOV DX,word ptr [EAX + 0x2]
009a4837 : CMP DX,word ptr [ECX + 0x2]
009a483b : JNZ 0x009a484c
009a483d : ADD EAX,0x4
009a4840 : ADD ECX,0x4
009a4843 : CMP DX,BX
009a4846 : JNZ 0x009a4826
009a4848 : XOR EAX,EAX
009a484a : JMP 0x009a4851
009a484c : SBB EAX,EAX
009a484e : SBB EAX,-0x1
009a4851 : CMP EAX,EBX
009a4853 : JZ 0x009a494a
009a4859 : CMP EDI,0x8
009a485c : JC 0x009a4862
009a485e : MOV EAX,dword ptr [ESI]
009a4860 : JMP 0x009a4864
009a4862 : MOV EAX,ESI
009a4864 : MOV ECX,0xc898a4
009a4869 : LEA ESP,[ESP]
009a4870 : MOV DX,word ptr [EAX]
009a4873 : CMP DX,word ptr [ECX]
009a4876 : JNZ 0x009a4896
009a4878 : CMP DX,BX
009a487b : JZ 0x009a4892
009a487d : MOV DX,word ptr [EAX + 0x2]
009a4881 : CMP DX,word ptr [ECX + 0x2]
009a4885 : JNZ 0x009a4896
009a4887 : ADD EAX,0x4
009a488a : ADD ECX,0x4
009a488d : CMP DX,BX
009a4890 : JNZ 0x009a4870
009a4892 : XOR EAX,EAX
009a4894 : JMP 0x009a489b
009a4896 : SBB EAX,EAX
009a4898 : SBB EAX,-0x1
009a489b : CMP EAX,EBX
009a489d : JNZ 0x009a494a
009a48a3 : MOV EAX,dword ptr [ESP + 0x18]
009a48a7 : MOV EDI,dword ptr [EAX + 0x18]
009a48aa : LEA ESI,[EAX + 0x4]
009a48ad : CMP EDI,0x8
009a48b0 : JC 0x009a48b6
009a48b2 : MOV EAX,dword ptr [ESI]
009a48b4 : JMP 0x009a48b8
009a48b6 : MOV EAX,ESI
009a48b8 : MOV ECX,0xc898bc
009a48bd : LEA ECX,[ECX]
009a48c0 : MOV DX,word ptr [EAX]
009a48c3 : CMP DX,word ptr [ECX]
009a48c6 : JNZ 0x009a48e6
009a48c8 : CMP DX,BX
009a48cb : JZ 0x009a48e2
009a48cd : MOV DX,word ptr [EAX + 0x2]
009a48d1 : CMP DX,word ptr [ECX + 0x2]
009a48d5 : JNZ 0x009a48e6
009a48d7 : ADD EAX,0x4
009a48da : ADD ECX,0x4
009a48dd : CMP DX,BX
009a48e0 : JNZ 0x009a48c0
009a48e2 : XOR EAX,EAX
009a48e4 : JMP 0x009a48eb
009a48e6 : SBB EAX,EAX
009a48e8 : SBB EAX,-0x1
009a48eb : CMP EAX,EBX
009a48ed : JNZ 0x009a48fc
009a48ef : MOV EAX,dword ptr [ESP + 0x10]
009a48f3 : PUSH EBX
009a48f4 : PUSH EAX
009a48f5 : CALL 0x009a4660
009a48fa : JMP 0x009a494a
009a48fc : CMP EDI,0x8
009a48ff : JC 0x009a4905
009a4901 : MOV EAX,dword ptr [ESI]
009a4903 : JMP 0x009a4907
009a4905 : MOV EAX,ESI
009a4907 : MOV ECX,0xc898c4
009a490c : LEA ESP,[ESP]
009a4910 : MOV DX,word ptr [EAX]
009a4913 : CMP DX,word ptr [ECX]
009a4916 : JNZ 0x009a4936
009a4918 : CMP DX,BX
009a491b : JZ 0x009a4932
009a491d : MOV DX,word ptr [EAX + 0x2]
009a4921 : CMP DX,word ptr [ECX + 0x2]
009a4925 : JNZ 0x009a4936
009a4927 : ADD EAX,0x4
009a492a : ADD ECX,0x4
009a492d : CMP DX,BX
009a4930 : JNZ 0x009a4910
009a4932 : XOR EAX,EAX
009a4934 : JMP 0x009a493b
009a4936 : SBB EAX,EAX
009a4938 : SBB EAX,-0x1
009a493b : CMP EAX,EBX
009a493d : JNZ 0x009a494a
009a493f : MOV ECX,dword ptr [ESP + 0x10]
009a4943 : MOV EDX,dword ptr [ECX]
009a4945 : MOV EAX,dword ptr [EDX + 0x20]
009a4948 : CALL EAX
009a494a : MOV dword ptr [ESP + 0x68],0xffffffff
009a4952 : MOV EAX,dword ptr [ESP + 0x18]
009a4956 : CMP EAX,EBX
009a4958 : JZ 0x009a4974
009a495a : MOV ECX,dword ptr [ESP + 0x10]
009a495e : MOV EDI,dword ptr [ESP + 0x1c]
009a4962 : PUSH ECX
009a4963 : CALL 0x00405450
009a4968 : MOV ECX,dword ptr [ESP + 0x1c]
009a496c : ADD ESP,0x4
009a496f : CALL 0x006f04e0
009a4974 : MOV dword ptr [ESP + 0x18],EBX
009a4978 : MOV dword ptr [ESP + 0x1c],EBX
009a497c : MOV dword ptr [ESP + 0x20],EBX
009a4980 : MOV ECX,dword ptr [ESP + 0x60]
009a4984 : MOV dword ptr FS:[0x0],ECX
009a498b : POP ECX
009a498c : POP EDI
009a498d : POP ESI
009a498e : POP EBX
009a498f : MOV ESP,EBP
009a4991 : POP EBP
009a4992 : RET 0x8
