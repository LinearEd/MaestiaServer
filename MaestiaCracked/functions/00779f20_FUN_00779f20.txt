PROGRAM  : Maestia.exe
FUNCTION : FUN_00779f20
ENTRY    : 00779f20
BODY     : [[00779f20, 00779fef]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00779f20(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  uint uVar4;
  int unaff_ESI;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0ea08;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(unaff_ESI + 0x2eef0);
  local_20 = 0;
  local_28 = ".\\Terrain\\AvaPathFinder.cpp";
  local_24 = 0xcd;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  iVar1 = *(int *)(unaff_ESI + 0x18);
  puVar2 = *(undefined4 **)(unaff_ESI + 0x14);
  local_18 = *puVar2;
  local_14 = local_14 & 0xffffff00;
  if (4 < (int)(iVar1 - (int)puVar2 & 0xfffffffcU)) {
    uVar3 = *(undefined4 *)(iVar1 + -4);
    *(undefined4 *)(iVar1 + -4) = local_18;
    FUN_00486210(puVar2,uVar3,local_14,uVar4);
  }
  uVar3 = local_18;
  if ((*(int *)(unaff_ESI + 0x18) - *(int *)(unaff_ESI + 0x14) & 0xfffffffcU) != 0) {
    *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + -4;
  }
  local_8 = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
00779f20 : PUSH EBP
00779f21 : MOV EBP,ESP
00779f23 : PUSH -0x1
00779f25 : PUSH 0xb0ea08
00779f2a : MOV EAX,FS:[0x0]
00779f30 : PUSH EAX
00779f31 : SUB ESP,0x1c
00779f34 : PUSH EBX
00779f35 : PUSH EDI
00779f36 : MOV EAX,[0x00d66fa0]
00779f3b : XOR EAX,EBP
00779f3d : PUSH EAX
00779f3e : LEA EAX,[EBP + -0xc]
00779f41 : MOV FS:[0x0],EAX
00779f47 : LEA ECX,[EBP + -0x28]
00779f4a : LEA EAX,[ESI + 0x2eef0]
00779f50 : XOR EBX,EBX
00779f52 : PUSH ECX
00779f53 : MOV dword ptr [EBP + -0x1c],EBX
00779f56 : MOV dword ptr [EBP + -0x28],EAX
00779f59 : MOV dword ptr [EBP + -0x24],0xc1043c
00779f60 : MOV dword ptr [EBP + -0x20],0xcd
00779f67 : MOV dword ptr [EBP + -0x18],0x1
00779f6e : CALL 0x006ef1a0
00779f73 : MOV dword ptr [EBP + -0x4],EBX
00779f76 : MOV EAX,dword ptr [ESI + 0x18]
00779f79 : MOV ECX,dword ptr [ESI + 0x14]
00779f7c : MOV EDI,dword ptr [ECX]
00779f7e : MOV EDX,EAX
00779f80 : SUB EDX,ECX
00779f82 : AND EDX,0xfffffffc
00779f85 : CMP EDX,0x4
00779f88 : MOV dword ptr [EBP + -0x14],EDI
00779f8b : MOV byte ptr [EBP + -0x10],BL
00779f8e : JLE 0x00779fae
00779f90 : MOV EDX,dword ptr [EAX + -0x4]
00779f93 : ADD EAX,-0x4
00779f96 : MOV dword ptr [EAX],EDI
00779f98 : MOV EDI,dword ptr [EBP + -0x10]
00779f9b : PUSH EDI
00779f9c : PUSH EDX
00779f9d : SUB EAX,ECX
00779f9f : SAR EAX,0x2
00779fa2 : PUSH ECX
00779fa3 : CALL 0x00486210
00779fa8 : MOV EDI,dword ptr [EBP + -0x14]
00779fab : ADD ESP,0xc
00779fae : MOV EAX,dword ptr [ESI + 0x18]
00779fb1 : MOV ECX,EAX
00779fb3 : SUB ECX,dword ptr [ESI + 0x14]
00779fb6 : TEST ECX,0xfffffffc
00779fbc : JZ 0x00779fc4
00779fbe : ADD EAX,-0x4
00779fc1 : MOV dword ptr [ESI + 0x18],EAX
00779fc4 : MOV dword ptr [EBP + -0x4],0xffffffff
00779fcb : CMP dword ptr [EBP + -0x1c],EBX
00779fce : JZ 0x00779fdd
00779fd0 : MOV EDX,dword ptr [EBP + -0x28]
00779fd3 : PUSH EDX
00779fd4 : CALL dword ptr [0x00b8511c]
00779fda : MOV dword ptr [EBP + -0x1c],EBX
00779fdd : MOV EAX,EDI
00779fdf : MOV ECX,dword ptr [EBP + -0xc]
00779fe2 : MOV dword ptr FS:[0x0],ECX
00779fe9 : POP ECX
00779fea : POP EDI
00779feb : POP EBX
00779fec : MOV ESP,EBP
00779fee : POP EBP
00779fef : RET
