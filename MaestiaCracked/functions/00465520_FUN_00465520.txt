PROGRAM  : Maestia.exe
FUNCTION : FUN_00465520
ENTRY    : 00465520
BODY     : [[00465520, 004655d4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00465520(void)

{
  int iVar1;
  int in_ECX;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a6d0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(int *)(in_ECX + 4) == 0) ||
     ((uint)(*(int *)(in_ECX + 0xc) - *(int *)(in_ECX + 4) >> 3) < 0x1000)) {
    iVar1 = FUN_0040c2e0();
    local_8 = 0;
    local_18 = local_18 & 0xffffff00;
    FUN_004d6b10(*(undefined4 *)(in_ECX + 4),*(undefined4 *)(in_ECX + 8),iVar1,iVar1,local_18);
    local_8 = 0xffffffff;
    if (*(int *)(in_ECX + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(int *)(in_ECX + 0xc) = iVar1 + 0x8000;
    *(int *)(in_ECX + 8) = iVar1 + (*(int *)(in_ECX + 8) - *(int *)(in_ECX + 4) >> 3) * 8;
    *(int *)(in_ECX + 4) = iVar1;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00465520 : PUSH EBP
00465521 : MOV EBP,ESP
00465523 : PUSH -0x1
00465525 : PUSH 0xb7a6d0
0046552a : MOV EAX,FS:[0x0]
00465530 : PUSH EAX
00465531 : SUB ESP,0xc
00465534 : PUSH EBX
00465535 : PUSH ESI
00465536 : PUSH EDI
00465537 : MOV EAX,[0x00d66fa0]
0046553c : XOR EAX,EBP
0046553e : PUSH EAX
0046553f : LEA EAX,[EBP + -0xc]
00465542 : MOV FS:[0x0],EAX
00465548 : MOV dword ptr [EBP + -0x10],ESP
0046554b : MOV ESI,ECX
0046554d : MOV ECX,dword ptr [ESI + 0x4]
00465550 : TEST ECX,ECX
00465552 : JZ 0x00465563
00465554 : MOV EAX,dword ptr [ESI + 0xc]
00465557 : SUB EAX,ECX
00465559 : SAR EAX,0x3
0046555c : CMP EAX,0x1000
00465561 : JNC 0x004655c3
00465563 : MOV ECX,0x1000
00465568 : CALL 0x0040c2e0
0046556d : MOV EBX,EAX
0046556f : MOV dword ptr [EBP + -0x18],EBX
00465572 : MOV dword ptr [EBP + -0x4],0x0
00465579 : MOV EAX,dword ptr [ESI + 0x8]
0046557c : MOV ECX,dword ptr [ESI + 0x4]
0046557f : MOV byte ptr [EBP + -0x14],0x0
00465583 : MOV EDX,dword ptr [EBP + -0x14]
00465586 : PUSH EDX
00465587 : MOV EDX,dword ptr [EBP + -0x18]
0046558a : PUSH EDX
0046558b : PUSH EBX
0046558c : PUSH EAX
0046558d : PUSH ECX
0046558e : CALL 0x004d6b10
00465593 : ADD ESP,0x14
00465596 : MOV dword ptr [EBP + -0x4],0xffffffff
0046559d : MOV ECX,dword ptr [ESI + 0x4]
004655a0 : MOV EDI,dword ptr [ESI + 0x8]
004655a3 : SUB EDI,ECX
004655a5 : SAR EDI,0x3
004655a8 : TEST ECX,ECX
004655aa : JZ 0x004655b1
004655ac : CALL 0x006f04e0
004655b1 : LEA EAX,[EBX + 0x8000]
004655b7 : MOV dword ptr [ESI + 0xc],EAX
004655ba : LEA ECX,[EBX + EDI*0x8]
004655bd : MOV dword ptr [ESI + 0x8],ECX
004655c0 : MOV dword ptr [ESI + 0x4],EBX
004655c3 : MOV ECX,dword ptr [EBP + -0xc]
004655c6 : MOV dword ptr FS:[0x0],ECX
004655cd : POP ECX
004655ce : POP EDI
004655cf : POP ESI
004655d0 : POP EBX
004655d1 : MOV ESP,EBP
004655d3 : POP EBP
004655d4 : RET
