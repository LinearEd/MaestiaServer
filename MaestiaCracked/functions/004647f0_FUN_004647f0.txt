PROGRAM  : Maestia.exe
FUNCTION : FUN_004647f0
ENTRY    : 004647f0
BODY     : [[004647f0, 0046489d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004647f0(undefined8 *param_1,int *param_2,int *param_3,int param_4,uint param_5,int param_6
                 ,int *param_7,undefined4 *param_8)

{
  int *piVar1;
  wchar_t *_Str1;
  int iVar2;
  wchar_t *_Str2;
  
  for (; param_2 != param_3; param_2 = param_2 + 1) {
    piVar1 = (int *)*param_2;
    if ((piVar1[0xc] != 0) && (*piVar1 != 0)) {
      if (*(uint *)(param_4 + 0x18) < 8) {
        _Str2 = (wchar_t *)(param_4 + 4);
      }
      else {
        _Str2 = *(wchar_t **)(param_4 + 4);
      }
      if ((uint)piVar1[0xb] < 8) {
        _Str1 = (wchar_t *)(piVar1 + 6);
      }
      else {
        _Str1 = (wchar_t *)piVar1[6];
      }
      iVar2 = __wcsicmp(_Str1,_Str2);
      if (iVar2 == 0) {
        if (0 < param_6) {
          param_6 = param_6 + -1;
        }
        if (param_6 == 0) {
          *param_8 = 1;
        }
        if ((*param_7 == 0) || ((uint)piVar1[2] < param_5)) {
          *param_7 = (int)piVar1;
          param_5 = piVar1[2];
        }
      }
    }
  }
  *param_1 = CONCAT44(param_5,param_4);
  param_1[1] = CONCAT44(param_7,param_6);
  *(undefined4 **)(param_1 + 2) = param_8;
  return;
}



============================================================
DISASSEMBLY
============================================================
004647f0 : PUSH EBP
004647f1 : MOV EBP,ESP
004647f3 : MOV EAX,dword ptr [EBP + 0xc]
004647f6 : MOV ECX,dword ptr [EBP + 0x10]
004647f9 : PUSH EBX
004647fa : PUSH EDI
004647fb : MOV EDI,EAX
004647fd : MOV EBX,ECX
004647ff : CMP EAX,ECX
00464801 : JZ 0x0046487e
00464803 : PUSH ESI
00464804 : MOV ESI,dword ptr [EDI]
00464806 : CMP dword ptr [ESI + 0x30],0x0
0046480a : JZ 0x00464876
0046480c : CMP dword ptr [ESI],0x0
0046480f : JZ 0x00464876
00464811 : MOV EAX,dword ptr [EBP + 0x14]
00464814 : MOV EDX,0x8
00464819 : CMP dword ptr [EAX + 0x18],EDX
0046481c : JC 0x00464823
0046481e : MOV ECX,dword ptr [EAX + 0x4]
00464821 : JMP 0x00464826
00464823 : LEA ECX,[EAX + 0x4]
00464826 : CMP dword ptr [ESI + 0x2c],EDX
00464829 : JC 0x00464830
0046482b : MOV EAX,dword ptr [ESI + 0x18]
0046482e : JMP 0x00464833
00464830 : LEA EAX,[ESI + 0x18]
00464833 : PUSH ECX
00464834 : PUSH EAX
00464835 : CALL 0x00637f87
0046483a : ADD ESP,0x8
0046483d : NEG EAX
0046483f : SBB EAX,EAX
00464841 : ADD EAX,0x1
00464844 : JZ 0x00464876
00464846 : MOV EAX,dword ptr [EBP + 0x1c]
00464849 : TEST EAX,EAX
0046484b : JLE 0x00464853
0046484d : DEC EAX
0046484e : MOV dword ptr [EBP + 0x1c],EAX
00464851 : TEST EAX,EAX
00464853 : JNZ 0x0046485e
00464855 : MOV EAX,dword ptr [EBP + 0x24]
00464858 : MOV dword ptr [EAX],0x1
0046485e : MOV EAX,dword ptr [EBP + 0x20]
00464861 : CMP dword ptr [EAX],0x0
00464864 : JZ 0x0046486e
00464866 : MOV ECX,dword ptr [EBP + 0x18]
00464869 : CMP ECX,dword ptr [ESI + 0x8]
0046486c : JBE 0x00464876
0046486e : MOV dword ptr [EAX],ESI
00464870 : MOV EDX,dword ptr [ESI + 0x8]
00464873 : MOV dword ptr [EBP + 0x18],EDX
00464876 : ADD EDI,0x4
00464879 : CMP EDI,EBX
0046487b : JNZ 0x00464804
0046487d : POP ESI
0046487e : MOV EAX,dword ptr [EBP + 0x8]
00464881 : MOVQ XMM0,qword ptr [EBP + 0x14]
00464886 : MOV ECX,dword ptr [EBP + 0x24]
00464889 : MOVQ qword ptr [EAX],XMM0
0046488d : MOVQ XMM0,qword ptr [EBP + 0x1c]
00464892 : POP EDI
00464893 : MOVQ qword ptr [EAX + 0x8],XMM0
00464898 : MOV dword ptr [EAX + 0x10],ECX
0046489b : POP EBX
0046489c : POP EBP
0046489d : RET
