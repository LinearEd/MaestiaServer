PROGRAM  : Maestia.exe
FUNCTION : FUN_00401b40
ENTRY    : 00401b40
BODY     : [[00401b40, 00401b99]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00401b40(undefined4 *param_1,undefined4 param_2,int param_3,undefined4 param_4,int param_5)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  int unaff_EDI;
  
  puVar3 = (undefined4 *)(unaff_EDI + 4);
  puVar1 = puVar3;
  if (7 < *(uint *)(unaff_EDI + 0x18)) {
    puVar1 = (undefined4 *)*puVar3;
  }
  if (param_3 == 0) {
    iVar4 = 0;
  }
  else {
    iVar4 = param_3 - (int)puVar1 >> 1;
  }
  iVar2 = 0;
  if (param_5 != 0) {
    iVar2 = param_5 - param_3 >> 1;
  }
  FUN_00405e10(iVar4,iVar2);
  if (7 < *(uint *)(unaff_EDI + 0x18)) {
    puVar3 = (undefined4 *)*puVar3;
  }
  param_1[1] = (int)puVar3 + iVar4 * 2;
  *param_1 = 0xfffffffc;
  return;
}



============================================================
DISASSEMBLY
============================================================
00401b40 : PUSH EBP
00401b41 : MOV EBP,ESP
00401b43 : CMP dword ptr [EDI + 0x18],0x8
00401b47 : PUSH EBX
00401b48 : PUSH ESI
00401b49 : LEA EBX,[EDI + 0x4]
00401b4c : JC 0x00401b52
00401b4e : MOV EAX,dword ptr [EBX]
00401b50 : JMP 0x00401b54
00401b52 : MOV EAX,EBX
00401b54 : MOV ECX,dword ptr [EBP + 0x10]
00401b57 : TEST ECX,ECX
00401b59 : JNZ 0x00401b5f
00401b5b : XOR ESI,ESI
00401b5d : JMP 0x00401b65
00401b5f : MOV ESI,ECX
00401b61 : SUB ESI,EAX
00401b63 : SAR ESI,0x1
00401b65 : MOV EAX,dword ptr [EBP + 0x18]
00401b68 : TEST EAX,EAX
00401b6a : JZ 0x00401b70
00401b6c : SUB EAX,ECX
00401b6e : SAR EAX,0x1
00401b70 : PUSH EAX
00401b71 : PUSH ESI
00401b72 : MOV ECX,EDI
00401b74 : CALL 0x00405e10
00401b79 : CMP dword ptr [EDI + 0x18],0x8
00401b7d : JC 0x00401b83
00401b7f : MOV EAX,dword ptr [EBX]
00401b81 : JMP 0x00401b85
00401b83 : MOV EAX,EBX
00401b85 : LEA ECX,[EAX + ESI*0x2]
00401b88 : MOV EAX,dword ptr [EBP + 0x8]
00401b8b : POP ESI
00401b8c : MOV dword ptr [EAX + 0x4],ECX
00401b8f : MOV dword ptr [EAX],0xfffffffc
00401b95 : POP EBX
00401b96 : POP EBP
00401b97 : RET 0x14
