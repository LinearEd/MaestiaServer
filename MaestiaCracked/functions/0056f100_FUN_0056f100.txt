PROGRAM  : Maestia.exe
FUNCTION : FUN_0056f100
ENTRY    : 0056f100
BODY     : [[0056f100, 0056f1e9]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Type propagation algorithm not settling */

void FUN_0056f100(void)

{
  undefined1 uVar1;
  GRefCountImpl *this;
  LONG LVar2;
  int in_ECX;
  uint local_10 [3];
  uint local_4;
  
  local_10[1] = 4;
  FUN_0051c600(in_ECX + 0x18);
  FUN_0051c600(in_ECX + 0x14);
  FUN_0051b6e0();
  FUN_005a03c0(local_10,local_10 + 1);
  this = (GRefCountImpl *)FUN_005a0320((local_10[0] & 0xfffffffc) + 8,0);
  if (this == (GRefCountImpl *)0x0) {
    *(undefined1 *)(in_ECX + 0x28) = 1;
  }
  else {
    uVar1 = FUN_0056c140(this,in_ECX + 0x1c,in_ECX + 0x20);
    *(undefined1 *)(in_ECX + 0x28) = uVar1;
  }
  InterlockedExchange((LONG *)(in_ECX + 0x24),1);
  if (this != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(this);
  }
  LVar2 = InterlockedExchangeAdd((LONG *)((local_10[0] & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_10[0] & 0xfffffffc);
  }
  LVar2 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_4 & 0xfffffffc);
  }
  LVar2 = InterlockedExchangeAdd((LONG *)((local_10[2] & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_10[2] & 0xfffffffc);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0056f100 : SUB ESP,0x10
0056f103 : PUSH ESI
0056f104 : MOV ESI,ECX
0056f106 : PUSH EDI
0056f107 : LEA EAX,[ESI + 0x18]
0056f10a : PUSH EAX
0056f10b : LEA ECX,[ESP + 0x14]
0056f10f : MOV dword ptr [ESP + 0x10],0x4
0056f117 : CALL 0x0051c600
0056f11c : LEA ECX,[ESI + 0x14]
0056f11f : PUSH ECX
0056f120 : LEA ECX,[ESP + 0x18]
0056f124 : CALL 0x0051c600
0056f129 : LEA ECX,[ESP + 0x8]
0056f12d : CALL 0x0051b6e0
0056f132 : MOV ECX,dword ptr [ESI + 0x10]
0056f135 : LEA EDX,[ESP + 0xc]
0056f139 : PUSH EDX
0056f13a : LEA EAX,[ESP + 0xc]
0056f13e : PUSH EAX
0056f13f : CALL 0x005a03c0
0056f144 : MOV EAX,dword ptr [ESP + 0x8]
0056f148 : MOV ECX,dword ptr [ESI + 0x10]
0056f14b : AND EAX,0xfffffffc
0056f14e : PUSH 0x0
0056f150 : ADD EAX,0x8
0056f153 : PUSH EAX
0056f154 : CALL 0x005a0320
0056f159 : MOV EDI,EAX
0056f15b : TEST EDI,EDI
0056f15d : JZ 0x0056f175
0056f15f : LEA ECX,[ESI + 0x20]
0056f162 : PUSH ECX
0056f163 : LEA EDX,[ESI + 0x1c]
0056f166 : PUSH EDX
0056f167 : PUSH EDI
0056f168 : CALL 0x0056c140
0056f16d : ADD ESP,0xc
0056f170 : MOV byte ptr [ESI + 0x28],AL
0056f173 : JMP 0x0056f179
0056f175 : MOV byte ptr [ESI + 0x28],0x1
0056f179 : PUSH 0x1
0056f17b : ADD ESI,0x24
0056f17e : PUSH ESI
0056f17f : CALL dword ptr [0x00b85108]
0056f185 : TEST EDI,EDI
0056f187 : JZ 0x0056f190
0056f189 : MOV ECX,EDI
0056f18b : CALL 0x004ff7e0
0056f190 : MOV ESI,dword ptr [ESP + 0x8]
0056f194 : MOV EDI,dword ptr [0x00b851cc]
0056f19a : AND ESI,0xfffffffc
0056f19d : PUSH -0x1
0056f19f : LEA EAX,[ESI + 0x4]
0056f1a2 : PUSH EAX
0056f1a3 : CALL EDI
0056f1a5 : SUB EAX,0x1
0056f1a8 : JNZ 0x0056f1b0
0056f1aa : PUSH ESI
0056f1ab : CALL 0x00515cf0
0056f1b0 : MOV ESI,dword ptr [ESP + 0x14]
0056f1b4 : AND ESI,0xfffffffc
0056f1b7 : PUSH -0x1
0056f1b9 : LEA ECX,[ESI + 0x4]
0056f1bc : PUSH ECX
0056f1bd : CALL EDI
0056f1bf : SUB EAX,0x1
0056f1c2 : JNZ 0x0056f1ca
0056f1c4 : PUSH ESI
0056f1c5 : CALL 0x00515cf0
0056f1ca : MOV ESI,dword ptr [ESP + 0x10]
0056f1ce : AND ESI,0xfffffffc
0056f1d1 : PUSH -0x1
0056f1d3 : LEA EDX,[ESI + 0x4]
0056f1d6 : PUSH EDX
0056f1d7 : CALL EDI
0056f1d9 : SUB EAX,0x1
0056f1dc : JNZ 0x0056f1e4
0056f1de : PUSH ESI
0056f1df : CALL 0x00515cf0
0056f1e4 : POP EDI
0056f1e5 : POP ESI
0056f1e6 : ADD ESP,0x10
0056f1e9 : RET
