PROGRAM  : Maestia.exe
FUNCTION : FUN_0051bcf0
ENTRY    : 0051bcf0
BODY     : [[0051bcf0, 0051bd69]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051bcf0(undefined4 *param_1)

{
  undefined4 uVar1;
  uint uVar2;
  LONG LVar3;
  uint *in_ECX;
  uint uVar4;
  undefined1 *puVar5;
  uint uVar6;
  
  uVar1 = param_1[1];
  puVar5 = (undefined1 *)*param_1;
  uVar6 = *in_ECX & 0xfffffffc;
  if (puVar5 == (undefined1 *)0x0) {
    puVar5 = &DAT_00cca874;
  }
  uVar4 = *in_ECX & 3;
  uVar2 = DAT_00d73250;
  if (uVar4 != 0) {
    if (uVar4 == 1) {
      uVar2 = FUN_00515dd0(in_ECX);
    }
    else {
      uVar2 = 0;
      if (uVar4 == 2) {
        uVar2 = in_ECX[1];
      }
    }
  }
  uVar2 = FUN_0051b700(uVar2,uVar1,0,puVar5,uVar1);
  *in_ECX = *in_ECX & 3 | uVar2;
  LVar3 = InterlockedExchangeAdd((LONG *)(uVar6 + 4),-1);
  if (LVar3 == 1) {
    FUN_00515cf0(uVar6);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0051bcf0 : MOV EAX,dword ptr [ESP + 0x4]
0051bcf4 : PUSH EBX
0051bcf5 : MOV EBX,dword ptr [EAX + 0x4]
0051bcf8 : MOV EAX,dword ptr [EAX]
0051bcfa : PUSH EBP
0051bcfb : PUSH ESI
0051bcfc : MOV ESI,ECX
0051bcfe : MOV ECX,dword ptr [ESI]
0051bd00 : PUSH EDI
0051bd01 : MOV EDI,ECX
0051bd03 : AND EDI,0xfffffffc
0051bd06 : MOV EBP,EAX
0051bd08 : TEST EAX,EAX
0051bd0a : JNZ 0x0051bd11
0051bd0c : MOV EBP,0xcca874
0051bd11 : XOR EAX,EAX
0051bd13 : AND ECX,0x3
0051bd16 : SUB ECX,EAX
0051bd18 : JZ 0x0051bd31
0051bd1a : SUB ECX,0x1
0051bd1d : JZ 0x0051bd29
0051bd1f : SUB ECX,0x1
0051bd22 : JNZ 0x0051bd36
0051bd24 : MOV EAX,dword ptr [ESI + 0x4]
0051bd27 : JMP 0x0051bd36
0051bd29 : PUSH ESI
0051bd2a : CALL 0x00515dd0
0051bd2f : JMP 0x0051bd36
0051bd31 : MOV EAX,[0x00d73250]
0051bd36 : PUSH EBX
0051bd37 : PUSH EBP
0051bd38 : PUSH 0x0
0051bd3a : PUSH EBX
0051bd3b : PUSH EAX
0051bd3c : MOV ECX,ESI
0051bd3e : CALL 0x0051b700
0051bd43 : MOV ECX,dword ptr [ESI]
0051bd45 : AND ECX,0x3
0051bd48 : OR ECX,EAX
0051bd4a : PUSH -0x1
0051bd4c : LEA EAX,[EDI + 0x4]
0051bd4f : PUSH EAX
0051bd50 : MOV dword ptr [ESI],ECX
0051bd52 : CALL dword ptr [0x00b851cc]
0051bd58 : SUB EAX,0x1
0051bd5b : JNZ 0x0051bd63
0051bd5d : PUSH EDI
0051bd5e : CALL 0x00515cf0
0051bd63 : POP EDI
0051bd64 : POP ESI
0051bd65 : POP EBP
0051bd66 : POP EBX
0051bd67 : RET 0x4
