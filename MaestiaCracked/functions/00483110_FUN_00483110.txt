PROGRAM  : Maestia.exe
FUNCTION : FUN_00483110
ENTRY    : 00483110
BODY     : [[00483110, 004832e5]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00483110(int *param_1,undefined4 *param_2,uint param_3,undefined4 param_4)

{
  char cVar1;
  int in_ECX;
  int iVar2;
  undefined4 *puVar3;
  undefined1 auStack_13c [4];
  uint uStack_138;
  uint uStack_124;
  uint uStack_108;
  byte bStack_bc;
  uint uStack_78;
  float fStack_74;
  
  if ((param_1 != (int *)0x0) && (param_2 != (undefined4 *)0x0)) {
    *(undefined1 *)(in_ECX + 0xf4) = 0;
    *(undefined1 *)(in_ECX + 0xf6) = 0;
    *(undefined1 *)(in_ECX + 0xf7) = 0;
    *(undefined1 *)(in_ECX + 0xf8) = 0;
    *(int **)(in_ECX + 0xf0) = param_1;
    (**(code **)(*param_1 + 4))(param_1);
    *(undefined1 *)(in_ECX + 0x10) = 0;
    *(undefined1 *)(in_ECX + 0x11) = 0;
    *(undefined4 *)(in_ECX + 0x14) = 0;
    (**(code **)(**(int **)(in_ECX + 0xf0) + 0x1c))(*(int **)(in_ECX + 0xf0),auStack_13c);
    if ((uStack_108 & 2) == 0) {
      *(uint *)(in_ECX + 0x14) = 2 - (uint)((uStack_108 & 0x100) != 0);
    }
    if (0x100 < (uStack_78 & 0xffff)) {
      *(undefined1 *)(in_ECX + 0x10) = 1;
    }
    if ((0x103 < (uStack_78 & 0xffff)) && (4.0 <= fStack_74)) {
      *(undefined1 *)(in_ECX + 0x11) = 1;
    }
    if ((bStack_bc & 0x40) == 0) {
      if ((bStack_bc & 8) == 0) {
        *(undefined4 *)(in_ECX + 0x100) = 3;
        *(undefined4 *)(in_ECX + 0x104) = 3;
      }
      else {
        *(undefined4 *)(in_ECX + 0x100) = 4;
        *(undefined4 *)(in_ECX + 0x104) = 5;
      }
    }
    else {
      *(undefined4 *)(in_ECX + 0x100) = 7;
      *(undefined4 *)(in_ECX + 0x104) = 8;
    }
    *(byte *)(in_ECX + 0x12) = (byte)(uStack_124 >> 0x11) & 1;
    cVar1 = FUN_0047fc60(&stack0xfffffebc);
    if (cVar1 != '\0') {
      *(undefined4 *)(in_ECX + 0x19c) = param_1;
      cVar1 = FUN_007884b0();
      if (cVar1 != '\0') {
        *(uint *)(in_ECX + 0x28) = param_3;
        if (((uStack_138 & 0x20000000) == 0) || ((param_3 & 4) == 0)) {
          *(undefined1 *)(in_ECX + 0x288) = 0;
        }
        else {
          *(undefined1 *)(in_ECX + 0x288) = 1;
        }
        *(byte *)(in_ECX + 0x28a) = (byte)param_3 >> 4 & 1;
        *(byte *)(in_ECX + 0x289) = (byte)param_3 >> 3 & 1;
        *(undefined4 *)(in_ECX + 0x108) = 0x1c;
        puVar3 = (undefined4 *)(in_ECX + 0x220);
        for (iVar2 = 0xe; iVar2 != 0; iVar2 = iVar2 + -1) {
          *puVar3 = *param_2;
          param_2 = param_2 + 1;
          puVar3 = puVar3 + 1;
        }
        *(undefined4 *)(in_ECX + 600) = param_4;
        *(undefined1 *)(in_ECX + 8) = 1;
        return 1;
      }
      *(undefined4 *)(in_ECX + 0x19c) = 0;
    }
    FUN_0047ff00(in_ECX);
    (**(code **)(**(int **)(in_ECX + 0xf0) + 8))(*(int **)(in_ECX + 0xf0));
    *(undefined4 *)(in_ECX + 0xf0) = 0;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00483110 : PUSH EBP
00483111 : MOV EBP,ESP
00483113 : AND ESP,0xfffffff8
00483116 : SUB ESP,0x134
0048311c : PUSH EBX
0048311d : PUSH ESI
0048311e : MOV ESI,dword ptr [EBP + 0x8]
00483121 : PUSH EDI
00483122 : MOV EBX,ECX
00483124 : TEST ESI,ESI
00483126 : JZ 0x0048326c
0048312c : CMP dword ptr [EBP + 0xc],0x0
00483130 : JZ 0x0048326c
00483136 : MOV byte ptr [EBX + 0xf4],0x0
0048313d : MOV byte ptr [EBX + 0xf6],0x0
00483144 : MOV byte ptr [EBX + 0xf7],0x0
0048314b : MOV byte ptr [EBX + 0xf8],0x0
00483152 : MOV dword ptr [EBX + 0xf0],ESI
00483158 : MOV EAX,dword ptr [ESI]
0048315a : MOV ECX,dword ptr [EAX + 0x4]
0048315d : PUSH ESI
0048315e : CALL ECX
00483160 : MOV EAX,dword ptr [EBX + 0xf0]
00483166 : LEA ECX,[ESP + 0x10]
0048316a : MOV byte ptr [EBX + 0x10],0x0
0048316e : MOV byte ptr [EBX + 0x11],0x0
00483172 : MOV dword ptr [EBX + 0x14],0x0
00483179 : MOV EDX,dword ptr [EAX]
0048317b : MOV EDX,dword ptr [EDX + 0x1c]
0048317e : PUSH ECX
0048317f : PUSH EAX
00483180 : CALL EDX
00483182 : MOV EAX,dword ptr [ESP + 0x4c]
00483186 : TEST AL,0x2
00483188 : JNZ 0x00483199
0048318a : AND EAX,0x100
0048318f : NEG EAX
00483191 : SBB EAX,EAX
00483193 : ADD EAX,0x2
00483196 : MOV dword ptr [EBX + 0x14],EAX
00483199 : MOV EAX,dword ptr [ESP + 0xdc]
004831a0 : AND EAX,0xffff
004831a5 : CMP EAX,0x101
004831aa : JC 0x004831b0
004831ac : MOV byte ptr [EBX + 0x10],0x1
004831b0 : CMP EAX,0x104
004831b5 : JC 0x004831cd
004831b7 : MOVSS XMM0,dword ptr [ESP + 0xe0]
004831c0 : COMISS XMM0,dword ptr [0x00cdf21c]
004831c7 : JC 0x004831cd
004831c9 : MOV byte ptr [EBX + 0x11],0x1
004831cd : MOV AL,byte ptr [ESP + 0x98]
004831d4 : TEST AL,0x40
004831d6 : JZ 0x004831ee
004831d8 : MOV dword ptr [EBX + 0x100],0x7
004831e2 : MOV dword ptr [EBX + 0x104],0x8
004831ec : JMP 0x00483219
004831ee : TEST AL,0x8
004831f0 : JZ 0x00483208
004831f2 : MOV dword ptr [EBX + 0x100],0x4
004831fc : MOV dword ptr [EBX + 0x104],0x5
00483206 : JMP 0x00483219
00483208 : MOV EAX,0x3
0048320d : MOV dword ptr [EBX + 0x100],EAX
00483213 : MOV dword ptr [EBX + 0x104],EAX
00483219 : MOV EAX,dword ptr [ESP + 0x30]
0048321d : SHR EAX,0x11
00483220 : LEA ECX,[ESP + 0x10]
00483224 : AND AL,0x1
00483226 : PUSH ECX
00483227 : MOV ECX,EBX
00483229 : MOV byte ptr [EBX + 0x12],AL
0048322c : CALL 0x0047fc60
00483231 : TEST AL,AL
00483233 : JZ 0x0048324e
00483235 : LEA EDI,[EBX + 0x19c]
0048323b : MOV dword ptr [EDI],ESI
0048323d : MOV ESI,EDI
0048323f : CALL 0x007884b0
00483244 : TEST AL,AL
00483246 : JNZ 0x00483277
00483248 : MOV dword ptr [EDI],0x0
0048324e : PUSH EBX
0048324f : CALL 0x0047ff00
00483254 : MOV EAX,dword ptr [EBX + 0xf0]
0048325a : MOV ECX,dword ptr [EAX]
0048325c : MOV EDX,dword ptr [ECX + 0x8]
0048325f : PUSH EAX
00483260 : CALL EDX
00483262 : MOV dword ptr [EBX + 0xf0],0x0
0048326c : XOR AL,AL
0048326e : POP EDI
0048326f : POP ESI
00483270 : POP EBX
00483271 : MOV ESP,EBP
00483273 : POP EBP
00483274 : RET 0x10
00483277 : TEST dword ptr [ESP + 0x1c],0x20000000
0048327f : MOV EAX,dword ptr [EBP + 0x10]
00483282 : MOV dword ptr [EBX + 0x28],EAX
00483285 : JZ 0x00483294
00483287 : TEST AL,0x4
00483289 : JZ 0x00483294
0048328b : MOV byte ptr [EBX + 0x288],0x1
00483292 : JMP 0x0048329b
00483294 : MOV byte ptr [EBX + 0x288],0x0
0048329b : MOV ESI,dword ptr [EBP + 0xc]
0048329e : MOV DL,AL
004832a0 : SHR DL,0x3
004832a3 : SHR AL,0x4
004832a6 : AND DL,0x1
004832a9 : AND AL,0x1
004832ab : MOV byte ptr [EBX + 0x28a],AL
004832b1 : MOV EAX,dword ptr [EBP + 0x14]
004832b4 : LEA EDI,[EBX + 0x220]
004832ba : MOV byte ptr [EBX + 0x289],DL
004832c0 : MOV dword ptr [EBX + 0x108],0x1c
004832ca : MOV ECX,0xe
004832cf : MOVSD.REP ES:EDI,ESI
004832d1 : POP EDI
004832d2 : MOV dword ptr [EBX + 0x258],EAX
004832d8 : POP ESI
004832d9 : MOV byte ptr [EBX + 0x8],0x1
004832dd : MOV AL,0x1
004832df : POP EBX
004832e0 : MOV ESP,EBP
004832e2 : POP EBP
004832e3 : RET 0x10
