PROGRAM  : Maestia.exe
FUNCTION : FUN_00961bd0
ENTRY    : 00961bd0
BODY     : [[00961bd0, 00961ca9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00961bd0(uint param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int *in_ECX;
  
  if (param_1 == 0xffffffff) {
    if ((*DAT_00da9894 != 0) &&
       (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
      (**(code **)*puVar1)("NpcTalkSelectClearTxtButton");
    }
    if ((*(int *)(DAT_0172490c + 8) != 2) && (*(int *)(DAT_0172490c + 8) != 0)) {
      FUN_008444f0();
    }
  }
  else {
    if ((uint)(in_ECX[0x11] - in_ECX[0x10] >> 3) <= param_1) {
      *(undefined4 *)(DAT_0172490c + 0x44) = 0;
      return;
    }
    if ((*DAT_00da9894 != 0) &&
       (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
      (**(code **)*puVar1)("NpcTalkSelectClearTxtButton");
    }
    (**(code **)(*in_ECX + 0x20))();
    iVar2 = *(int *)(in_ECX[0x10] + param_1 * 8);
    FUN_00845e70(iVar2,*(undefined2 *)(in_ECX[0x10] + 4 + param_1 * 8));
    if (iVar2 != 0) {
      FUN_00960130();
      *(undefined4 *)(DAT_0172490c + 0x44) = 0;
      return;
    }
  }
  *(undefined4 *)(DAT_0172490c + 0x44) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00961bd0 : PUSH EBP
00961bd1 : MOV EBP,ESP
00961bd3 : PUSH EBX
00961bd4 : PUSH ESI
00961bd5 : PUSH EDI
00961bd6 : MOV EDI,dword ptr [EBP + 0x8]
00961bd9 : MOV ESI,ECX
00961bdb : CMP EDI,-0x1
00961bde : JNZ 0x00961c29
00961be0 : MOV EAX,[0x00da9894]
00961be5 : MOV EAX,dword ptr [EAX]
00961be7 : XOR EBX,EBX
00961be9 : CMP EAX,EBX
00961beb : JZ 0x00961c02
00961bed : MOV ECX,dword ptr [EAX + 0x114]
00961bf3 : CMP ECX,EBX
00961bf5 : JZ 0x00961c02
00961bf7 : MOV EDX,dword ptr [ECX]
00961bf9 : MOV EAX,dword ptr [EDX]
00961bfb : PUSH 0xc79d20
00961c00 : CALL EAX
00961c02 : MOV ECX,dword ptr [0x0172490c]
00961c08 : MOV EAX,dword ptr [ECX + 0x8]
00961c0b : CMP EAX,0x2
00961c0e : JZ 0x00961c1f
00961c10 : CMP EAX,EBX
00961c12 : JZ 0x00961c1f
00961c14 : CALL 0x008444f0
00961c19 : MOV ECX,dword ptr [0x0172490c]
00961c1f : POP EDI
00961c20 : POP ESI
00961c21 : MOV dword ptr [ECX + 0x44],EBX
00961c24 : POP EBX
00961c25 : POP EBP
00961c26 : RET 0x4
00961c29 : MOV EDX,dword ptr [ESI + 0x44]
00961c2c : SUB EDX,dword ptr [ESI + 0x40]
00961c2f : SAR EDX,0x3
00961c32 : CMP EDI,EDX
00961c34 : JNC 0x00961c96
00961c36 : MOV EAX,[0x00da9894]
00961c3b : MOV EAX,dword ptr [EAX]
00961c3d : XOR EBX,EBX
00961c3f : CMP EAX,EBX
00961c41 : JZ 0x00961c58
00961c43 : MOV ECX,dword ptr [EAX + 0x114]
00961c49 : CMP ECX,EBX
00961c4b : JZ 0x00961c58
00961c4d : MOV EDX,dword ptr [ECX]
00961c4f : MOV EAX,dword ptr [EDX]
00961c51 : PUSH 0xc79d3c
00961c56 : CALL EAX
00961c58 : MOV EDX,dword ptr [ESI]
00961c5a : MOV EAX,dword ptr [EDX + 0x20]
00961c5d : MOV ECX,ESI
00961c5f : CALL EAX
00961c61 : MOV ECX,dword ptr [ESI + 0x40]
00961c64 : MOVZX EDX,word ptr [ECX + EDI*0x8 + 0x4]
00961c69 : MOV ESI,dword ptr [ECX + EDI*0x8]
00961c6c : LEA EAX,[ECX + EDI*0x8]
00961c6f : MOV ECX,dword ptr [0x0172490c]
00961c75 : PUSH EDX
00961c76 : PUSH ESI
00961c77 : CALL 0x00845e70
00961c7c : CMP ESI,EBX
00961c7e : JZ 0x00961c19
00961c80 : MOV DL,0x1
00961c82 : CALL 0x00960130
00961c87 : MOV EAX,[0x0172490c]
00961c8c : POP EDI
00961c8d : POP ESI
00961c8e : MOV dword ptr [EAX + 0x44],EBX
00961c91 : POP EBX
00961c92 : POP EBP
00961c93 : RET 0x4
00961c96 : MOV EDX,dword ptr [0x0172490c]
00961c9c : POP EDI
00961c9d : POP ESI
00961c9e : MOV dword ptr [EDX + 0x44],0x0
00961ca5 : POP EBX
00961ca6 : POP EBP
00961ca7 : RET 0x4
