PROGRAM  : Maestia.exe
FUNCTION : FUN_008aba80
ENTRY    : 008aba80
BODY     : [[008aba80, 008abc8f]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x008abb5d) */
/* WARNING: Removing unreachable block (ram,0x008abc56) */

void FUN_008aba80(int param_1)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int in_ECX;
  undefined1 uVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1cb40;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar1 = *DAT_00da9894;
  if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
    if (*(uint *)(in_ECX + 0x18) < 8) {
      iVar3 = in_ECX + 4;
    }
    else {
      iVar3 = *(int *)(in_ECX + 4);
    }
    (**(code **)(**(int **)(iVar1 + 0x114) + 4))
              (*(int **)(iVar1 + 0x114),"GuildPopupMenuOpen",&DAT_00c4b930,iVar3,uVar2);
  }
  FUN_00405eb0(*(int *)(DAT_0172491c + 0x17c) + 0xc,0,0xffffffff);
  local_8 = 0;
  iVar3 = FUN_00a6f7d0();
  iVar1 = *(int *)(*(int *)(*DAT_00da9894 + 0x188) + 8);
  if (iVar1 != 0) {
    if (*(uint *)(in_ECX + 0x18) < 8) {
      iVar4 = in_ECX + 4;
    }
    else {
      iVar4 = *(int *)(in_ECX + 4);
    }
    iVar4 = FUN_00405bb0(iVar4);
    if (iVar4 == 0) {
      iVar1 = *DAT_00da9894;
      if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
        (**(code **)(**(int **)(iVar1 + 0x114) + 4))
                  (*(int **)(iVar1 + 0x114),"GuildMyPopupMenu",&DAT_00c4b948,iVar3 == 1);
      }
    }
    else {
      if ((*(int *)(param_1 + 0xac) < 6) || (uVar5 = 1, iVar3 == 5)) {
        uVar5 = 0;
      }
      iVar4 = *DAT_00da9894;
      if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
        (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                  (*(int **)(iVar4 + 0x114),"GuildPopupMenu","%b,%b,%d,%b",
                   (*(uint *)(iVar1 + 0x54 + iVar3 * 4) & 2) != 0,iVar3 == 1,
                   *(int *)(param_1 + 0xac),uVar5);
      }
    }
  }
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(uVar2 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008aba80 : PUSH EBP
008aba81 : MOV EBP,ESP
008aba83 : PUSH -0x1
008aba85 : PUSH 0xb1cb40
008aba8a : MOV EAX,FS:[0x0]
008aba90 : PUSH EAX
008aba91 : SUB ESP,0x30
008aba94 : MOV EAX,[0x00d66fa0]
008aba99 : XOR EAX,EBP
008aba9b : MOV dword ptr [EBP + -0x10],EAX
008aba9e : PUSH EBX
008aba9f : PUSH ESI
008abaa0 : PUSH EDI
008abaa1 : PUSH EAX
008abaa2 : LEA EAX,[EBP + -0xc]
008abaa5 : MOV FS:[0x0],EAX
008abaab : MOV EAX,dword ptr [EBP + 0x8]
008abaae : MOV EDX,dword ptr [0x00da9894]
008abab4 : MOV dword ptr [EBP + -0x38],EAX
008abab7 : MOV EAX,dword ptr [EDX]
008abab9 : XOR ESI,ESI
008ababb : MOV dword ptr [EBP + -0x34],ECX
008ababe : CMP EAX,ESI
008abac0 : JZ 0x008abaf4
008abac2 : CMP dword ptr [EAX + 0x114],ESI
008abac8 : JZ 0x008abaf4
008abaca : CMP dword ptr [ECX + 0x18],0x8
008abace : MOV EAX,dword ptr [EAX + 0x114]
008abad4 : JC 0x008abadb
008abad6 : MOV ECX,dword ptr [ECX + 0x4]
008abad9 : JMP 0x008abade
008abadb : ADD ECX,0x4
008abade : MOV EDX,dword ptr [EAX]
008abae0 : PUSH ECX
008abae1 : PUSH 0xc4b930
008abae6 : PUSH 0xc4b934
008abaeb : PUSH EAX
008abaec : MOV EAX,dword ptr [EDX + 0x4]
008abaef : CALL EAX
008abaf1 : ADD ESP,0x10
008abaf4 : MOV ECX,dword ptr [0x0172491c]
008abafa : MOV EAX,dword ptr [ECX + 0x17c]
008abb00 : PUSH -0x1
008abb02 : ADD EAX,0xc
008abb05 : PUSH ESI
008abb06 : XOR EDX,EDX
008abb08 : PUSH EAX
008abb09 : LEA ECX,[EBP + -0x2c]
008abb0c : MOV dword ptr [EBP + -0x14],0x7
008abb13 : MOV dword ptr [EBP + -0x18],ESI
008abb16 : MOV word ptr [EBP + -0x28],DX
008abb1a : CALL 0x00405eb0
008abb1f : MOV dword ptr [EBP + -0x4],ESI
008abb22 : MOV EAX,[0x00da9894]
008abb27 : MOV EAX,dword ptr [EAX]
008abb29 : MOV EAX,dword ptr [EAX + 0x188]
008abb2f : LEA EDI,[EBP + -0x2c]
008abb32 : MOV ESI,EAX
008abb34 : CALL 0x00a6f7d0
008abb39 : MOV ECX,dword ptr [0x00da9894]
008abb3f : MOV EBX,EAX
008abb41 : MOV EAX,dword ptr [ECX]
008abb43 : MOV EAX,dword ptr [EAX + 0x188]
008abb49 : MOV ESI,dword ptr [EAX + 0x8]
008abb4c : TEST ESI,ESI
008abb4e : JNZ 0x008abb70
008abb50 : MOV dword ptr [EBP + -0x4],0xffffffff
008abb57 : CMP dword ptr [EBP + -0x14],0x8
008abb5b : JC 0x008abb65
008abb5d : MOV ECX,dword ptr [EBP + -0x28]
008abb60 : CALL 0x006f04e0
008abb65 : XOR EDX,EDX
008abb67 : MOV word ptr [EBP + -0x28],DX
008abb6b : JMP 0x008abc64
008abb70 : MOV byte ptr [EBP + -0x2f],0x0
008abb74 : MOV byte ptr [EBP + -0x2d],0x0
008abb78 : MOV byte ptr [EBP + -0x2e],0x0
008abb7c : CMP EBX,0x1
008abb7f : JNZ 0x008abb84
008abb81 : MOV byte ptr [EBP + -0x2d],BL
008abb84 : MOV EAX,dword ptr [EBP + -0x34]
008abb87 : CMP dword ptr [EAX + 0x18],0x8
008abb8b : MOV EDI,dword ptr [EAX + 0x14]
008abb8e : JC 0x008abb95
008abb90 : MOV EAX,dword ptr [EAX + 0x4]
008abb93 : JMP 0x008abb98
008abb95 : ADD EAX,0x4
008abb98 : PUSH EAX
008abb99 : MOV EAX,dword ptr [EBP + -0x18]
008abb9c : LEA ECX,[EBP + -0x2c]
008abb9f : CALL 0x00405bb0
008abba4 : TEST EAX,EAX
008abba6 : JNZ 0x008abbe6
008abba8 : MOV EAX,[0x00da9894]
008abbad : MOV EAX,dword ptr [EAX]
008abbaf : TEST EAX,EAX
008abbb1 : JZ 0x008abc49
008abbb7 : CMP dword ptr [EAX + 0x114],0x0
008abbbe : JZ 0x008abc49
008abbc4 : MOVZX EDX,byte ptr [EBP + -0x2d]
008abbc8 : MOV EAX,dword ptr [EAX + 0x114]
008abbce : MOV ECX,dword ptr [EAX]
008abbd0 : PUSH EDX
008abbd1 : PUSH 0xc4b948
008abbd6 : PUSH 0xc4b94c
008abbdb : PUSH EAX
008abbdc : MOV EAX,dword ptr [ECX + 0x4]
008abbdf : CALL EAX
008abbe1 : ADD ESP,0x10
008abbe4 : JMP 0x008abc49
008abbe6 : MOV ESI,dword ptr [ESI + EBX*0x4 + 0x54]
008abbea : AND ESI,0x2
008abbed : MOV DL,0x1
008abbef : JNZ 0x008abbf4
008abbf1 : MOV DL,byte ptr [EBP + -0x2f]
008abbf4 : MOV EAX,dword ptr [EBP + -0x38]
008abbf7 : MOV ECX,dword ptr [EAX + 0xac]
008abbfd : CMP ECX,0x5
008abc00 : JLE 0x008abc09
008abc02 : CMP EBX,0x5
008abc05 : MOV BL,0x1
008abc07 : JNZ 0x008abc0c
008abc09 : MOV BL,byte ptr [EBP + -0x2e]
008abc0c : MOV EAX,[0x00da9894]
008abc11 : MOV EAX,dword ptr [EAX]
008abc13 : TEST EAX,EAX
008abc15 : JZ 0x008abc49
008abc17 : CMP dword ptr [EAX + 0x114],0x0
008abc1e : JZ 0x008abc49
008abc20 : MOV EAX,dword ptr [EAX + 0x114]
008abc26 : MOV ESI,dword ptr [EAX]
008abc28 : MOVZX EDI,BL
008abc2b : PUSH EDI
008abc2c : PUSH ECX
008abc2d : MOVZX ECX,byte ptr [EBP + -0x2d]
008abc31 : PUSH ECX
008abc32 : MOVZX EDX,DL
008abc35 : PUSH EDX
008abc36 : PUSH 0xc4b960
008abc3b : PUSH 0xc4b96c
008abc40 : PUSH EAX
008abc41 : MOV EAX,dword ptr [ESI + 0x4]
008abc44 : CALL EAX
008abc46 : ADD ESP,0x1c
008abc49 : MOV dword ptr [EBP + -0x4],0xffffffff
008abc50 : CMP dword ptr [EBP + -0x14],0x8
008abc54 : JC 0x008abc5e
008abc56 : MOV ECX,dword ptr [EBP + -0x28]
008abc59 : CALL 0x006f04e0
008abc5e : XOR ECX,ECX
008abc60 : MOV word ptr [EBP + -0x28],CX
008abc64 : MOV dword ptr [EBP + -0x14],0x7
008abc6b : MOV dword ptr [EBP + -0x18],0x0
008abc72 : MOV ECX,dword ptr [EBP + -0xc]
008abc75 : MOV dword ptr FS:[0x0],ECX
008abc7c : POP ECX
008abc7d : POP EDI
008abc7e : POP ESI
008abc7f : POP EBX
008abc80 : MOV ECX,dword ptr [EBP + -0x10]
008abc83 : XOR ECX,EBP
008abc85 : CALL 0x00633e6b
008abc8a : MOV ESP,EBP
008abc8c : POP EBP
008abc8d : RET 0x4
