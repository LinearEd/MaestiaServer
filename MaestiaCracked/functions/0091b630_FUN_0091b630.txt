PROGRAM  : Maestia.exe
FUNCTION : FUN_0091b630
ENTRY    : 0091b630
BODY     : [[0091b630, 0091b902]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0091b630(char param_1)

{
  char cVar1;
  short sVar2;
  undefined2 uVar3;
  int *piVar4;
  int iVar5;
  code *pcVar6;
  ulonglong uVar7;
  uint uVar8;
  undefined4 uVar9;
  DWORD DVar10;
  uint8_t *packet;
  int *in_ECX;
  bool bVar11;
  undefined1 local_30 [28];
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3f7d2;
  local_10 = ExceptionList;
  uVar8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 0;
  if ((in_ECX[0x1b] == 2) && (*(short *)((int)in_ECX + 0x3a) != 0)) {
    if (param_1 == '\0') {
      bVar11 = true;
    }
    else {
      bVar11 = (char)in_ECX[0x1c] == '\0';
    }
    *(bool *)(in_ECX + 0x1c) = bVar11;
    local_14 = FUN_00917e80(uVar8);
    if (local_14 != 0) {
      cVar1 = *(char *)(local_14 + 6);
      if (cVar1 == '\x15') {
        if (DAT_0172491c == 0) {
          ExceptionList = local_10;
          return;
        }
        if (*DAT_00da9894 == 0) {
          ExceptionList = local_10;
          return;
        }
        if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
          ExceptionList = local_10;
          return;
        }
        FUN_00406460(L"IDS_SCOREBOARD_NOT_SUPPORTED");
        local_8 = 0;
        piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar9 = FUN_0081d120(local_30);
        local_8._0_1_ = 1;
        (**(code **)(*piVar4 + 0x44))(uVar9,3);
        local_8 = (uint)local_8._1_3_ << 8;
      }
      else {
        if ((cVar1 != '\x1e') && (cVar1 != '\x1f')) goto LAB_0091b745;
        if (DAT_0172491c == 0) {
          ExceptionList = local_10;
          return;
        }
        if (*DAT_00da9894 == 0) {
          ExceptionList = local_10;
          return;
        }
        if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
          ExceptionList = local_10;
          return;
        }
        FUN_00406460(L"IDS_SCOREBOARD_NOT_SUPPORTED");
        local_8 = 2;
        piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar9 = FUN_0081d120(local_30);
        local_8._0_1_ = 3;
        (**(code **)(*piVar4 + 0x44))(uVar9,3);
        local_8 = CONCAT31(local_8._1_3_,2);
      }
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
  }
  else {
    *(undefined1 *)(in_ECX + 0x1c) = 0;
  }
LAB_0091b745:
  if ((char)in_ECX[0x1c] == '\0') {
    pcVar6 = *(code **)(*in_ECX + 0x20);
    in_ECX[0x6c] = 0;
    (*pcVar6)();
    ExceptionList = local_10;
    return;
  }
  DVar10 = timeGetTime();
  iVar5 = DAT_0172491c;
  in_ECX[0x1e] = DVar10;
  sVar2 = *(short *)(*(int *)(iVar5 + 0x17c) + 0x80);
  if (sVar2 == 0) {
    sVar2 = *(short *)(*(int *)(iVar5 + 0x17c) + 0x7c);
  }
  iVar5 = *(int *)ThreadLocalStoragePointer;
  *(char *)(in_ECX + 0x6b) = (char)sVar2;
  uVar7 = (ulonglong)(*(byte *)(iVar5 + 0x18) + 1) % 3;
  packet = (uint8_t *)((int)uVar7 * 0x2000 + 0x122cb8 + iVar5);
  *(char *)(iVar5 + 0x18) = (char)uVar7;
  if (packet == (uint8_t *)0x0) {
    packet = (uint8_t *)0x0;
  }
  else {
    uVar3 = *(undefined2 *)((int)in_ECX + 0x3a);
    iVar5 = in_ECX[0x6b];
    packet[0] = '\0';
    packet[1] = '\0';
    packet[2] = 0x8f;
    packet[3] = '\v';
    *(undefined2 *)(packet + 4) = uVar3;
    packet[6] = '\0';
    packet[8] = '\x0f';
    packet[7] = (uint8_t)iVar5;
  }
  local_8 = 0xffffffff;
  if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
    FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),9,packet);
  }
  if ((*DAT_00da9894 != 0) && (piVar4 = *(int **)(*DAT_00da9894 + 0x114), piVar4 != (int *)0x0)) {
    if (local_14 == 0) {
      bVar11 = false;
    }
    else {
      bVar11 = *(char *)(local_14 + 6) == '\x03';
    }
    (**(code **)(*piVar4 + 4))(piVar4,"mc_RvR.IsRvRResultVisible","%b,%b",(char)in_ECX[0x1c],bVar11)
    ;
  }
  FUN_008f7770(1,300);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0091b630 : PUSH EBP
0091b631 : MOV EBP,ESP
0091b633 : PUSH -0x1
0091b635 : PUSH 0xb3f7d2
0091b63a : MOV EAX,FS:[0x0]
0091b640 : PUSH EAX
0091b641 : SUB ESP,0x40
0091b644 : PUSH EBX
0091b645 : PUSH ESI
0091b646 : PUSH EDI
0091b647 : MOV EAX,[0x00d66fa0]
0091b64c : XOR EAX,EBP
0091b64e : PUSH EAX
0091b64f : LEA EAX,[EBP + -0xc]
0091b652 : MOV FS:[0x0],EAX
0091b658 : MOV ESI,ECX
0091b65a : XOR EBX,EBX
0091b65c : MOV EDI,0x2
0091b661 : MOV dword ptr [EBP + -0x10],EBX
0091b664 : CMP dword ptr [ESI + 0x6c],EDI
0091b667 : JNZ 0x0091b742
0091b66d : MOVZX EDX,word ptr [ESI + 0x3a]
0091b671 : CMP DX,BX
0091b674 : JZ 0x0091b742
0091b67a : CMP byte ptr [EBP + 0x8],BL
0091b67d : JZ 0x0091b689
0091b67f : XOR EAX,EAX
0091b681 : CMP byte ptr [ESI + 0x70],BL
0091b684 : SETZ AL
0091b687 : JMP 0x0091b68e
0091b689 : MOV EAX,0x1
0091b68e : MOV byte ptr [ESI + 0x70],AL
0091b691 : CALL 0x00917e80
0091b696 : MOV dword ptr [EBP + -0x10],EAX
0091b699 : CMP EAX,EBX
0091b69b : JZ 0x0091b745
0091b6a1 : MOV AL,byte ptr [EAX + 0x6]
0091b6a4 : CMP AL,0x15
0091b6a6 : JNZ 0x0091b774
0091b6ac : CMP dword ptr [0x0172491c],EBX
0091b6b2 : JZ 0x0091b8ef
0091b6b8 : MOV ECX,dword ptr [0x00da9894]
0091b6be : MOV EAX,dword ptr [ECX]
0091b6c0 : CMP EAX,EBX
0091b6c2 : JZ 0x0091b8ef
0091b6c8 : CMP dword ptr [EAX + 0x1a8],EBX
0091b6ce : JZ 0x0091b8ef
0091b6d4 : PUSH 0xc6807c
0091b6d9 : LEA ECX,[EBP + -0x2c]
0091b6dc : CALL 0x00406460
0091b6e1 : MOV dword ptr [EBP + -0x4],EBX
0091b6e4 : MOV EDX,dword ptr [0x00da9894]
0091b6ea : MOV EAX,dword ptr [EDX]
0091b6ec : MOV ESI,dword ptr [EAX + 0x1a8]
0091b6f2 : MOV ECX,dword ptr [0x0172491c]
0091b6f8 : LEA EAX,[EBP + -0x2c]
0091b6fb : PUSH EAX
0091b6fc : LEA EDI,[EBP + -0x48]
0091b6ff : CALL 0x0081d120
0091b704 : MOV byte ptr [EBP + -0x4],0x1
0091b708 : MOV EDX,dword ptr [ESI]
0091b70a : PUSH 0x3
0091b70c : PUSH EAX
0091b70d : MOV EAX,dword ptr [EDX + 0x44]
0091b710 : MOV ECX,ESI
0091b712 : CALL EAX
0091b714 : MOV byte ptr [EBP + -0x4],BL
0091b717 : LEA ECX,[EBP + -0x48]
0091b71a : CALL 0x00406560
0091b71f : MOV dword ptr [EBP + -0x4],0xffffffff
0091b726 : LEA ECX,[EBP + -0x2c]
0091b729 : CALL 0x00406560
0091b72e : MOV ECX,dword ptr [EBP + -0xc]
0091b731 : MOV dword ptr FS:[0x0],ECX
0091b738 : POP ECX
0091b739 : POP EDI
0091b73a : POP ESI
0091b73b : POP EBX
0091b73c : MOV ESP,EBP
0091b73e : POP EBP
0091b73f : RET 0x4
0091b742 : MOV byte ptr [ESI + 0x70],BL
0091b745 : CMP byte ptr [ESI + 0x70],BL
0091b748 : JZ 0x0091b8e0
0091b74e : CALL dword ptr [0x00b85598]
0091b754 : MOV ECX,dword ptr [0x0172491c]
0091b75a : MOV dword ptr [ESI + 0x78],EAX
0091b75d : MOV EAX,dword ptr [ECX + 0x17c]
0091b763 : MOVZX ECX,word ptr [EAX + 0x80]
0091b76a : CMP CX,BX
0091b76d : JZ 0x0091b7ed
0091b76f : MOVZX EAX,CX
0091b772 : JMP 0x0091b7f1
0091b774 : CMP AL,0x1e
0091b776 : JZ 0x0091b77c
0091b778 : CMP AL,0x1f
0091b77a : JNZ 0x0091b745
0091b77c : CMP dword ptr [0x0172491c],EBX
0091b782 : JZ 0x0091b8ef
0091b788 : MOV ECX,dword ptr [0x00da9894]
0091b78e : MOV EAX,dword ptr [ECX]
0091b790 : CMP EAX,EBX
0091b792 : JZ 0x0091b8ef
0091b798 : CMP dword ptr [EAX + 0x1a8],EBX
0091b79e : JZ 0x0091b8ef
0091b7a4 : PUSH 0xc680b8
0091b7a9 : LEA ECX,[EBP + -0x2c]
0091b7ac : CALL 0x00406460
0091b7b1 : MOV dword ptr [EBP + -0x4],EDI
0091b7b4 : MOV EDX,dword ptr [0x00da9894]
0091b7ba : MOV EAX,dword ptr [EDX]
0091b7bc : MOV ESI,dword ptr [EAX + 0x1a8]
0091b7c2 : MOV ECX,dword ptr [0x0172491c]
0091b7c8 : LEA EAX,[EBP + -0x2c]
0091b7cb : PUSH EAX
0091b7cc : LEA EDI,[EBP + -0x48]
0091b7cf : CALL 0x0081d120
0091b7d4 : MOV byte ptr [EBP + -0x4],0x3
0091b7d8 : MOV EDX,dword ptr [ESI]
0091b7da : PUSH 0x3
0091b7dc : PUSH EAX
0091b7dd : MOV EAX,dword ptr [EDX + 0x44]
0091b7e0 : MOV ECX,ESI
0091b7e2 : CALL EAX
0091b7e4 : MOV byte ptr [EBP + -0x4],0x2
0091b7e8 : JMP 0x0091b717
0091b7ed : MOVZX EAX,word ptr [EAX + 0x7c]
0091b7f1 : MOV EDX,dword ptr FS:[0x2c]
0091b7f8 : MOV ECX,dword ptr [EDX]
0091b7fa : MOV byte ptr [ESI + 0x1ac],AL
0091b800 : MOVZX EAX,byte ptr [ECX + 0x18]
0091b804 : INC EAX
0091b805 : CDQ
0091b806 : MOV EDI,0x3
0091b80b : IDIV EDI
0091b80d : MOVZX EAX,DL
0091b810 : SHL EAX,0xd
0091b813 : LEA EAX,[EAX + ECX*0x1 + 0x122cb8]
0091b81a : MOV byte ptr [ECX + 0x18],DL
0091b81d : MOV dword ptr [EBP + 0x8],EAX
0091b820 : MOV dword ptr [EBP + -0x4],0x4
0091b827 : CMP EAX,EBX
0091b829 : JZ 0x0091b852
0091b82b : MOVZX EDX,word ptr [ESI + 0x3a]
0091b82f : MOV CL,byte ptr [ESI + 0x1ac]
0091b835 : XOR EDI,EDI
0091b837 : MOV word ptr [EAX],DI
0091b83a : MOV byte ptr [EAX + 0x2],0x8f
0091b83e : MOV byte ptr [EAX + 0x3],0xb
0091b842 : MOV word ptr [EAX + 0x4],DX
0091b846 : MOV byte ptr [EAX + 0x6],BL
0091b849 : MOV byte ptr [EAX + 0x8],0xf
0091b84d : MOV byte ptr [EAX + 0x7],CL
0091b850 : JMP 0x0091b854
0091b852 : XOR EAX,EAX
0091b854 : MOV dword ptr [EBP + -0x4],0xffffffff
0091b85b : MOV EDX,dword ptr [0x017247d4]
0091b861 : MOV ECX,dword ptr [EDX + 0x4]
0091b864 : CMP ECX,EBX
0091b866 : JZ 0x0091b877
0091b868 : CMP byte ptr [EDX + 0x8],BL
0091b86b : JZ 0x0091b877
0091b86d : PUSH 0x9
0091b86f : PUSH ECX
0091b870 : MOV EDI,EAX
0091b872 : CALL 0x00a0dd40
0091b877 : MOV ECX,dword ptr [0x00da9894]
0091b87d : MOV EAX,dword ptr [ECX]
0091b87f : CMP EAX,EBX
0091b881 : JZ 0x0091b8be
0091b883 : MOV EAX,dword ptr [EAX + 0x114]
0091b889 : CMP EAX,EBX
0091b88b : JZ 0x0091b8be
0091b88d : MOV ECX,dword ptr [EBP + -0x10]
0091b890 : CMP ECX,EBX
0091b892 : JZ 0x0091b8a1
0091b894 : XOR EDX,EDX
0091b896 : CMP byte ptr [ECX + 0x6],0x3
0091b89a : SETZ DL
0091b89d : MOV ECX,EDX
0091b89f : JMP 0x0091b8a3
0091b8a1 : XOR ECX,ECX
0091b8a3 : MOV EDX,dword ptr [EAX]
0091b8a5 : MOV EDX,dword ptr [EDX + 0x4]
0091b8a8 : PUSH ECX
0091b8a9 : MOVZX ECX,byte ptr [ESI + 0x70]
0091b8ad : PUSH ECX
0091b8ae : PUSH 0xc680f4
0091b8b3 : PUSH 0xc680fc
0091b8b8 : PUSH EAX
0091b8b9 : CALL EDX
0091b8bb : ADD ESP,0x14
0091b8be : PUSH 0x12c
0091b8c3 : PUSH 0x1
0091b8c5 : MOV ECX,ESI
0091b8c7 : CALL 0x008f7770
0091b8cc : MOV ECX,dword ptr [EBP + -0xc]
0091b8cf : MOV dword ptr FS:[0x0],ECX
0091b8d6 : POP ECX
0091b8d7 : POP EDI
0091b8d8 : POP ESI
0091b8d9 : POP EBX
0091b8da : MOV ESP,EBP
0091b8dc : POP EBP
0091b8dd : RET 0x4
0091b8e0 : MOV EAX,dword ptr [ESI]
0091b8e2 : MOV EDX,dword ptr [EAX + 0x20]
0091b8e5 : MOV ECX,ESI
0091b8e7 : MOV dword ptr [ESI + 0x1b0],EBX
0091b8ed : CALL EDX
0091b8ef : MOV ECX,dword ptr [EBP + -0xc]
0091b8f2 : MOV dword ptr FS:[0x0],ECX
0091b8f9 : POP ECX
0091b8fa : POP EDI
0091b8fb : POP ESI
0091b8fc : POP EBX
0091b8fd : MOV ESP,EBP
0091b8ff : POP EBP
0091b900 : RET 0x4
