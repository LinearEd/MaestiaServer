PROGRAM  : Maestia.exe
FUNCTION : FUN_00a83c50
ENTRY    : 00a83c50
BODY     : [[00a83c50, 00a840da]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a83c50(void)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int in_ECX;
  undefined4 *puVar6;
  uint uVar7;
  int *local_b4;
  uint local_b0;
  int local_ac;
  undefined2 local_a4;
  undefined4 local_94;
  uint local_90;
  undefined2 local_88;
  undefined4 local_78;
  uint local_74;
  undefined2 local_6c;
  undefined4 local_5c;
  uint local_58;
  undefined2 local_50;
  undefined4 local_40;
  uint local_3c;
  undefined4 local_34;
  int local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b1d606;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)&local_b4;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff40;
  ExceptionList = &local_14;
  if (*(char *)(in_ECX + 0x32) != '\0') {
    local_b0 = 0;
    local_ac = in_ECX;
    FUN_00406460(&DAT_00c561d4);
    local_c._1_3_ = 0;
    local_b4 = *(int **)(in_ECX + 0x40);
    if (local_b4 != *(int **)(in_ECX + 0x44)) {
      do {
        local_c._0_1_ = 0;
        uVar7 = local_b0 & 0xffff;
        if (*(short *)(in_ECX + 0x38) * 5 <= (int)uVar7) {
          if (local_24 != 0) {
            FUN_00404870(&DAT_00c561d8,1);
          }
          uVar3 = FUN_00404750(&DAT_00c561dc,uVar7,uVar2);
          local_c._0_1_ = 1;
          FUN_00405c30(uVar3,0,0xffffffff);
          local_c._0_1_ = 0;
          if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          iVar4 = *local_b4;
          local_3c = 7;
          local_40 = 0;
          local_50 = 0;
          if (*(uint *)(iVar4 + 0x50) < 8) {
            iVar4 = iVar4 + 0x3c;
          }
          else {
            iVar4 = *(int *)(iVar4 + 0x3c);
          }
          uVar3 = FUN_00404750(&DAT_00c561e4,iVar4);
          local_c._0_1_ = 2;
          FUN_00405c30(uVar3,0,0xffffffff);
          local_c._0_1_ = 0;
          if (7 < local_74) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_74 = 7;
          local_78 = 0;
          local_88 = 0;
          uVar3 = FUN_00404750(&DAT_00c561ec,1);
          local_c._0_1_ = 3;
          FUN_00405c30(uVar3,0,0xffffffff);
          local_c._0_1_ = 0;
          if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_58 = 7;
          local_5c = 0;
          local_6c = 0;
          uVar3 = FUN_00404750(&DAT_00c561f4,1);
          local_c._0_1_ = 4;
          FUN_00405c30(uVar3,0,0xffffffff);
          local_c._0_1_ = 0;
          if (7 < local_90) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_90 = 7;
          local_94 = 0;
          local_a4 = 0;
          in_ECX = local_ac;
        }
        local_b0 = local_b0 + 1;
        local_b4 = local_b4 + 1;
      } while (local_b4 != *(int **)(in_ECX + 0x44));
    }
    local_c._0_1_ = 0;
    iVar4 = *DAT_00da9894;
    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
      puVar6 = local_34;
      if (local_20 < 8) {
        puVar6 = &local_34;
      }
      (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                (*(int **)(iVar4 + 0x114),"ShoppingBasketAddItem",&DAT_00c561fc,puVar6);
    }
    iVar4 = *DAT_00da9894;
    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
      piVar1 = *(int **)(iVar4 + 0x114);
      iVar4 = FUN_0070c2d0(*(undefined4 *)(*(int *)(iVar4 + 0x1d4) + 0x1b4),0);
      local_c._0_1_ = 5;
      if (*(uint *)(iVar4 + 0x18) < 8) {
        iVar4 = iVar4 + 4;
      }
      else {
        iVar4 = *(int *)(iVar4 + 4);
      }
      (**(code **)(*piVar1 + 4))(piVar1,"ShoppingBasketHaveCash",&DAT_00c56218,iVar4);
      local_c._0_1_ = 0;
      if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_58 = 7;
      local_5c = 0;
      local_6c = 0;
    }
    iVar4 = *DAT_00da9894;
    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
      piVar1 = *(int **)(iVar4 + 0x114);
      iVar4 = FUN_0070c2d0(*(int *)(in_ECX + 0x4c),*(int *)(in_ECX + 0x4c) >> 0x1f);
      local_c._0_1_ = 6;
      if (*(uint *)(iVar4 + 0x18) < 8) {
        iVar4 = iVar4 + 4;
      }
      else {
        iVar4 = *(int *)(iVar4 + 4);
      }
      (**(code **)(*piVar1 + 4))(piVar1,"ShoppingBasketNeedCash",&DAT_00c56234,iVar4);
      local_c._0_1_ = 0;
      if (7 < local_74) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_74 = 7;
      local_78 = 0;
      local_88 = 0;
    }
    iVar4 = *DAT_00da9894;
    iVar5 = *(int *)(*(int *)(iVar4 + 0x1d4) + 0x1b4) - *(int *)(in_ECX + 0x4c);
    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
      piVar1 = *(int **)(iVar4 + 0x114);
      iVar4 = FUN_0070c2d0(iVar5,iVar5 >> 0x1f);
      local_c._0_1_ = 7;
      if (*(uint *)(iVar4 + 0x18) < 8) {
        iVar4 = iVar4 + 4;
      }
      else {
        iVar4 = *(int *)(iVar4 + 4);
      }
      (**(code **)(*piVar1 + 4))(piVar1,"ShoppingBasketRestCash",&DAT_00c56250,iVar4);
      local_c = (uint)local_c._1_3_ << 8;
      if (7 < local_90) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_90 = 7;
      local_94 = 0;
      local_a4 = 0;
    }
    local_c = 0xffffffff;
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_20 = 7;
    local_24 = 0;
    local_34 = (undefined4 *)((uint)local_34._2_2_ << 0x10);
  }
  local_c = 0xffffffff;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)&local_b4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a83c50 : PUSH EBP
00a83c51 : MOV EBP,ESP
00a83c53 : AND ESP,0xfffffff8
00a83c56 : PUSH -0x1
00a83c58 : PUSH 0xb1d606
00a83c5d : MOV EAX,FS:[0x0]
00a83c63 : PUSH EAX
00a83c64 : SUB ESP,0xa0
00a83c6a : MOV EAX,[0x00d66fa0]
00a83c6f : XOR EAX,ESP
00a83c71 : MOV dword ptr [ESP + 0x98],EAX
00a83c78 : PUSH EBX
00a83c79 : PUSH ESI
00a83c7a : PUSH EDI
00a83c7b : MOV EAX,[0x00d66fa0]
00a83c80 : XOR EAX,ESP
00a83c82 : PUSH EAX
00a83c83 : LEA EAX,[ESP + 0xb0]
00a83c8a : MOV FS:[0x0],EAX
00a83c90 : MOV ESI,ECX
00a83c92 : MOV AL,byte ptr [ESI + 0x32]
00a83c95 : XOR EBX,EBX
00a83c97 : MOV dword ptr [ESP + 0x18],ESI
00a83c9b : CMP AL,BL
00a83c9d : JZ 0x00a840b7
00a83ca3 : PUSH 0xc561d4
00a83ca8 : LEA ECX,[ESP + 0x90]
00a83caf : MOV dword ptr [ESP + 0x18],EBX
00a83cb3 : CALL 0x00406460
00a83cb8 : MOV dword ptr [ESP + 0xb8],EBX
00a83cbf : MOV ECX,dword ptr [ESI + 0x40]
00a83cc2 : MOV EAX,dword ptr [ESI + 0x44]
00a83cc5 : MOV dword ptr [ESP + 0x10],ECX
00a83cc9 : CMP ECX,EAX
00a83ccb : JZ 0x00a83e90
00a83cd1 : MOVZX EAX,word ptr [ESI + 0x38]
00a83cd5 : MOVZX EDI,word ptr [ESP + 0x14]
00a83cda : CWDE
00a83cdb : LEA EAX,[EAX + EAX*0x4]
00a83cde : CMP EDI,EAX
00a83ce0 : JL 0x00a83e7c
00a83ce6 : CMP dword ptr [ESP + 0xa0],EBX
00a83ced : JZ 0x00a83d02
00a83cef : PUSH 0x1
00a83cf1 : PUSH 0xc561d8
00a83cf6 : LEA ESI,[ESP + 0x94]
00a83cfd : CALL 0x00404870
00a83d02 : PUSH EDI
00a83d03 : PUSH 0xc561dc
00a83d08 : LEA ESI,[ESP + 0x78]
00a83d0c : CALL 0x00404750
00a83d11 : ADD ESP,0x8
00a83d14 : MOV byte ptr [ESP + 0xb8],0x1
00a83d1c : PUSH -0x1
00a83d1e : PUSH EBX
00a83d1f : PUSH EAX
00a83d20 : LEA ECX,[ESP + 0x98]
00a83d27 : CALL 0x00405c30
00a83d2c : MOV byte ptr [ESP + 0xb8],BL
00a83d33 : MOV EDI,0x8
00a83d38 : CMP dword ptr [ESP + 0x88],EDI
00a83d3f : JC 0x00a83d4a
00a83d41 : MOV ECX,dword ptr [ESP + 0x74]
00a83d45 : CALL 0x006f04e0
00a83d4a : MOV EDX,dword ptr [ESP + 0x10]
00a83d4e : MOV EAX,dword ptr [EDX]
00a83d50 : XOR ECX,ECX
00a83d52 : ADD EAX,0x38
00a83d55 : MOV dword ptr [ESP + 0x88],0x7
00a83d60 : MOV dword ptr [ESP + 0x84],EBX
00a83d67 : MOV word ptr [ESP + 0x74],CX
00a83d6c : CMP dword ptr [EAX + 0x18],EDI
00a83d6f : JC 0x00a83d76
00a83d71 : MOV EAX,dword ptr [EAX + 0x4]
00a83d74 : JMP 0x00a83d79
00a83d76 : ADD EAX,0x4
00a83d79 : PUSH EAX
00a83d7a : PUSH 0xc561e4
00a83d7f : LEA ESI,[ESP + 0x40]
00a83d83 : CALL 0x00404750
00a83d88 : ADD ESP,0x8
00a83d8b : MOV byte ptr [ESP + 0xb8],0x2
00a83d93 : PUSH -0x1
00a83d95 : PUSH EBX
00a83d96 : PUSH EAX
00a83d97 : LEA ECX,[ESP + 0x98]
00a83d9e : CALL 0x00405c30
00a83da3 : MOV byte ptr [ESP + 0xb8],BL
00a83daa : CMP dword ptr [ESP + 0x50],EDI
00a83dae : JC 0x00a83db9
00a83db0 : MOV ECX,dword ptr [ESP + 0x3c]
00a83db4 : CALL 0x006f04e0
00a83db9 : XOR EAX,EAX
00a83dbb : PUSH 0x1
00a83dbd : PUSH 0xc561ec
00a83dc2 : LEA ESI,[ESP + 0x5c]
00a83dc6 : MOV dword ptr [ESP + 0x58],0x7
00a83dce : MOV dword ptr [ESP + 0x54],EBX
00a83dd2 : MOV word ptr [ESP + 0x44],AX
00a83dd7 : CALL 0x00404750
00a83ddc : ADD ESP,0x8
00a83ddf : MOV byte ptr [ESP + 0xb8],0x3
00a83de7 : PUSH -0x1
00a83de9 : PUSH EBX
00a83dea : PUSH EAX
00a83deb : LEA ECX,[ESP + 0x98]
00a83df2 : CALL 0x00405c30
00a83df7 : MOV byte ptr [ESP + 0xb8],BL
00a83dfe : CMP dword ptr [ESP + 0x6c],EDI
00a83e02 : JC 0x00a83e0d
00a83e04 : MOV ECX,dword ptr [ESP + 0x58]
00a83e08 : CALL 0x006f04e0
00a83e0d : XOR ECX,ECX
00a83e0f : PUSH 0x1
00a83e11 : PUSH 0xc561f4
00a83e16 : LEA ESI,[ESP + 0x24]
00a83e1a : MOV dword ptr [ESP + 0x74],0x7
00a83e22 : MOV dword ptr [ESP + 0x70],EBX
00a83e26 : MOV word ptr [ESP + 0x60],CX
00a83e2b : CALL 0x00404750
00a83e30 : ADD ESP,0x8
00a83e33 : MOV byte ptr [ESP + 0xb8],0x4
00a83e3b : PUSH -0x1
00a83e3d : PUSH EBX
00a83e3e : PUSH EAX
00a83e3f : LEA ECX,[ESP + 0x98]
00a83e46 : CALL 0x00405c30
00a83e4b : MOV byte ptr [ESP + 0xb8],BL
00a83e52 : CMP dword ptr [ESP + 0x34],EDI
00a83e56 : JC 0x00a83e61
00a83e58 : MOV ECX,dword ptr [ESP + 0x20]
00a83e5c : CALL 0x006f04e0
00a83e61 : MOV ESI,dword ptr [ESP + 0x18]
00a83e65 : MOV ECX,dword ptr [ESP + 0x10]
00a83e69 : XOR EDX,EDX
00a83e6b : MOV dword ptr [ESP + 0x34],0x7
00a83e73 : MOV dword ptr [ESP + 0x30],EBX
00a83e77 : MOV word ptr [ESP + 0x20],DX
00a83e7c : INC dword ptr [ESP + 0x14]
00a83e80 : ADD ECX,0x4
00a83e83 : MOV dword ptr [ESP + 0x10],ECX
00a83e87 : CMP ECX,dword ptr [ESI + 0x44]
00a83e8a : JNZ 0x00a83cd1
00a83e90 : MOV EAX,[0x00da9894]
00a83e95 : MOV EAX,dword ptr [EAX]
00a83e97 : CMP EAX,EBX
00a83e99 : JZ 0x00a83ed7
00a83e9b : CMP dword ptr [EAX + 0x114],EBX
00a83ea1 : JZ 0x00a83ed7
00a83ea3 : CMP dword ptr [ESP + 0xa4],0x8
00a83eab : MOV EAX,dword ptr [EAX + 0x114]
00a83eb1 : MOV ECX,dword ptr [ESP + 0x90]
00a83eb8 : JNC 0x00a83ec1
00a83eba : LEA ECX,[ESP + 0x90]
00a83ec1 : MOV EDX,dword ptr [EAX]
00a83ec3 : PUSH ECX
00a83ec4 : PUSH 0xc561fc
00a83ec9 : PUSH 0xc56200
00a83ece : PUSH EAX
00a83ecf : MOV EAX,dword ptr [EDX + 0x4]
00a83ed2 : CALL EAX
00a83ed4 : ADD ESP,0x10
00a83ed7 : MOV ECX,dword ptr [0x00da9894]
00a83edd : MOV EAX,dword ptr [ECX]
00a83edf : CMP EAX,EBX
00a83ee1 : JZ 0x00a83f61
00a83ee3 : CMP dword ptr [EAX + 0x114],EBX
00a83ee9 : JZ 0x00a83f61
00a83eeb : MOV EDI,dword ptr [EAX + 0x114]
00a83ef1 : MOV EAX,dword ptr [EAX + 0x1d4]
00a83ef7 : MOV EAX,dword ptr [EAX + 0x1b4]
00a83efd : PUSH EBX
00a83efe : PUSH EAX
00a83eff : LEA ECX,[ESP + 0x5c]
00a83f03 : CALL 0x0070c2d0
00a83f08 : ADD ESP,0x8
00a83f0b : MOV byte ptr [ESP + 0xb8],0x5
00a83f13 : CMP dword ptr [EAX + 0x18],0x8
00a83f17 : JC 0x00a83f1e
00a83f19 : MOV EAX,dword ptr [EAX + 0x4]
00a83f1c : JMP 0x00a83f21
00a83f1e : ADD EAX,0x4
00a83f21 : MOV EDX,dword ptr [EDI]
00a83f23 : PUSH EAX
00a83f24 : MOV EAX,dword ptr [EDX + 0x4]
00a83f27 : PUSH 0xc56218
00a83f2c : PUSH 0xc5621c
00a83f31 : PUSH EDI
00a83f32 : CALL EAX
00a83f34 : ADD ESP,0x10
00a83f37 : MOV byte ptr [ESP + 0xb8],BL
00a83f3e : CMP dword ptr [ESP + 0x6c],0x8
00a83f43 : JC 0x00a83f4e
00a83f45 : MOV ECX,dword ptr [ESP + 0x58]
00a83f49 : CALL 0x006f04e0
00a83f4e : XOR ECX,ECX
00a83f50 : MOV dword ptr [ESP + 0x6c],0x7
00a83f58 : MOV dword ptr [ESP + 0x68],EBX
00a83f5c : MOV word ptr [ESP + 0x58],CX
00a83f61 : MOV EDX,dword ptr [0x00da9894]
00a83f67 : MOV EAX,dword ptr [EDX]
00a83f69 : CMP EAX,EBX
00a83f6b : JZ 0x00a83fe3
00a83f6d : CMP dword ptr [EAX + 0x114],EBX
00a83f73 : JZ 0x00a83fe3
00a83f75 : MOV EDI,dword ptr [EAX + 0x114]
00a83f7b : MOV EAX,dword ptr [ESI + 0x4c]
00a83f7e : CDQ
00a83f7f : PUSH EDX
00a83f80 : PUSH EAX
00a83f81 : LEA ECX,[ESP + 0x40]
00a83f85 : CALL 0x0070c2d0
00a83f8a : ADD ESP,0x8
00a83f8d : MOV byte ptr [ESP + 0xb8],0x6
00a83f95 : CMP dword ptr [EAX + 0x18],0x8
00a83f99 : JC 0x00a83fa0
00a83f9b : MOV EAX,dword ptr [EAX + 0x4]
00a83f9e : JMP 0x00a83fa3
00a83fa0 : ADD EAX,0x4
00a83fa3 : MOV ECX,dword ptr [EDI]
00a83fa5 : MOV EDX,dword ptr [ECX + 0x4]
00a83fa8 : PUSH EAX
00a83fa9 : PUSH 0xc56234
00a83fae : PUSH 0xc56238
00a83fb3 : PUSH EDI
00a83fb4 : CALL EDX
00a83fb6 : ADD ESP,0x10
00a83fb9 : MOV byte ptr [ESP + 0xb8],BL
00a83fc0 : CMP dword ptr [ESP + 0x50],0x8
00a83fc5 : JC 0x00a83fd0
00a83fc7 : MOV ECX,dword ptr [ESP + 0x3c]
00a83fcb : CALL 0x006f04e0
00a83fd0 : XOR EAX,EAX
00a83fd2 : MOV dword ptr [ESP + 0x50],0x7
00a83fda : MOV dword ptr [ESP + 0x4c],EBX
00a83fde : MOV word ptr [ESP + 0x3c],AX
00a83fe3 : MOV ECX,dword ptr [0x00da9894]
00a83fe9 : MOV ECX,dword ptr [ECX]
00a83feb : MOV EAX,dword ptr [ECX + 0x1d4]
00a83ff1 : MOV EAX,dword ptr [EAX + 0x1b4]
00a83ff7 : SUB EAX,dword ptr [ESI + 0x4c]
00a83ffa : CMP ECX,EBX
00a83ffc : JZ 0x00a84076
00a83ffe : CMP dword ptr [ECX + 0x114],EBX
00a84004 : JZ 0x00a84076
00a84006 : MOV ESI,dword ptr [ECX + 0x114]
00a8400c : CDQ
00a8400d : PUSH EDX
00a8400e : PUSH EAX
00a8400f : LEA ECX,[ESP + 0x24]
00a84013 : CALL 0x0070c2d0
00a84018 : ADD ESP,0x8
00a8401b : MOV byte ptr [ESP + 0xb8],0x7
00a84023 : MOV EDI,0x8
00a84028 : CMP dword ptr [EAX + 0x18],EDI
00a8402b : JC 0x00a84032
00a8402d : MOV EAX,dword ptr [EAX + 0x4]
00a84030 : JMP 0x00a84035
00a84032 : ADD EAX,0x4
00a84035 : MOV EDX,dword ptr [ESI]
00a84037 : PUSH EAX
00a84038 : MOV EAX,dword ptr [EDX + 0x4]
00a8403b : PUSH 0xc56250
00a84040 : PUSH 0xc56254
00a84045 : PUSH ESI
00a84046 : CALL EAX
00a84048 : ADD ESP,0x10
00a8404b : MOV byte ptr [ESP + 0xb8],BL
00a84052 : CMP dword ptr [ESP + 0x34],EDI
00a84056 : JC 0x00a84061
00a84058 : MOV ECX,dword ptr [ESP + 0x20]
00a8405c : CALL 0x006f04e0
00a84061 : XOR ECX,ECX
00a84063 : MOV dword ptr [ESP + 0x34],0x7
00a8406b : MOV dword ptr [ESP + 0x30],EBX
00a8406f : MOV word ptr [ESP + 0x20],CX
00a84074 : JMP 0x00a8407b
00a84076 : MOV EDI,0x8
00a8407b : MOV dword ptr [ESP + 0xb8],0xffffffff
00a84086 : CMP dword ptr [ESP + 0xa4],EDI
00a8408d : JC 0x00a8409b
00a8408f : MOV ECX,dword ptr [ESP + 0x90]
00a84096 : CALL 0x006f04e0
00a8409b : XOR EDX,EDX
00a8409d : MOV dword ptr [ESP + 0xa4],0x7
00a840a8 : MOV dword ptr [ESP + 0xa0],EBX
00a840af : MOV word ptr [ESP + 0x90],DX
00a840b7 : MOV ECX,dword ptr [ESP + 0xb0]
00a840be : MOV dword ptr FS:[0x0],ECX
00a840c5 : POP ECX
00a840c6 : POP EDI
00a840c7 : POP ESI
00a840c8 : POP EBX
00a840c9 : MOV ECX,dword ptr [ESP + 0x98]
00a840d0 : XOR ECX,ESP
00a840d2 : CALL 0x00633e6b
00a840d7 : MOV ESP,EBP
00a840d9 : POP EBP
00a840da : RET
