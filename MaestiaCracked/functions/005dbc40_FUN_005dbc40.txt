PROGRAM  : Maestia.exe
FUNCTION : FUN_005dbc40
ENTRY    : 005dbc40
BODY     : [[005dbc40, 005dbdcc] [005dbdd0, 005dbf4a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005dbc40(int *param_1)

{
  int iVar1;
  float fVar2;
  float fVar3;
  bool bVar4;
  int in_ECX;
  int iVar5;
  int *piVar6;
  int iVar7;
  uint uVar8;
  uint uStack_58;
  uint uStack_54;
  undefined4 uStack_50;
  int *piStack_4c;
  undefined4 local_48;
  uint uStack_44;
  int *piStack_3c;
  undefined1 uStack_38;
  int iStack_34;
  float local_30;
  float local_2c;
  int local_28;
  int local_24;
  float local_20;
  int local_1c;
  float local_18;
  float local_14;
  int local_10;
  int local_c;
  float local_8;
  undefined4 local_4;
  
  local_30 = (float)param_1[3];
  piVar6 = *(int **)(*(int *)*param_1 + 0xc);
  local_2c = (float)param_1[4];
  local_28 = param_1[5];
  local_24 = param_1[6];
  local_20 = (float)param_1[7];
  local_1c = param_1[8];
  fVar2 = *(float *)(in_ECX + 0x10);
  local_14 = 0.0;
  local_10 = 0;
  local_c = 0;
  local_4 = 0;
  local_18 = fVar2;
  local_8 = fVar2;
  GMatrix2D::Prepend((GMatrix2D *)&local_30,(GMatrix2D *)&local_18);
  (**(code **)(*piVar6 + 0x28))(param_1 + 9);
  uStack_50 = 0;
  if ((2 < param_1[0x11]) || ((float)param_1[0xf] < 0.997)) {
    uStack_50 = 1;
  }
  iVar7 = 0;
  fVar3 = 5.0 / *(float *)(*param_1 + 0x24);
  bVar4 = true;
  uStack_44 = 0;
  uStack_58 = 0;
  uStack_54 = 0;
  if (*(int *)(in_ECX + 0x54) != 0) {
    do {
      iVar5 = *(int *)(*(int *)(in_ECX + 0x50) + 0x10 + iVar7);
      if (iVar5 == -1) {
        if (bVar4) {
          piStack_3c = (int *)(in_ECX + 0x48);
          uStack_38 = 0;
          if (*(int *)(in_ECX + 0x34) == 0) {
            if (piVar6 == (int *)*piStack_3c) {
              (**(code **)(*piVar6 + 0x3c))(0,0,0,&piStack_3c);
            }
          }
          else {
            FUN_005f8f10(piVar6,&piStack_3c);
          }
          (**(code **)(*piVar6 + 0x20))(&iStack_34);
          bVar4 = false;
        }
        local_48 = 0;
        if (*(undefined4 **)(in_ECX + 0x6c) != (undefined4 *)0x0) {
          local_48 = **(undefined4 **)(in_ECX + 0x6c);
        }
        uVar8 = 0;
        if (*(int *)(*(int *)(in_ECX + 0x50) + iVar7) != 0) {
          do {
            piVar6 = piStack_4c;
            if (*(uint *)(in_ECX + 0x20) <= uStack_58) break;
            if (param_1[0x12] == 0) {
              iVar5 = 0;
            }
            else {
              iVar5 = param_1[1];
            }
            iVar1 = *(int *)(in_ECX + 0x50) + iVar7;
            FUN_005d9d80(*param_1,iVar5,param_1[0x12],*(undefined4 *)(iVar1 + 8),
                         *(undefined4 *)(iVar1 + 0xc),*(undefined4 *)(in_ECX + 0x10),local_48,
                         *(undefined1 *)(in_ECX + 0x15));
            uStack_58 = uStack_58 + 1;
            uVar8 = uVar8 + 1;
          } while (uVar8 < *(uint *)(*(int *)(in_ECX + 0x50) + iVar7));
        }
        if (*(int *)(*(int *)(in_ECX + 0x50) + 4 + iVar7) != 0) {
          local_1c = iStack_34;
          local_18 = local_30;
          local_10 = local_28;
          local_c = local_24;
          local_14 = fVar3 + local_2c;
          local_8 = fVar3 + local_20;
          (**(code **)(*piVar6 + 0x20))(&local_1c);
          uVar8 = 0;
          if (*(int *)(*(int *)(in_ECX + 0x50) + 4 + iVar7) != 0) {
            iVar5 = uStack_54 * 0x58;
            do {
              piVar6 = piStack_4c;
              if (*(uint *)(in_ECX + 0x2c) <= uStack_54) break;
              FUN_005da8e0(*param_1,param_1[2] + *(int *)(*(int *)(in_ECX + 0x28) + iVar5) * 0x18,
                           param_1 + 3,*(undefined4 *)(in_ECX + 0xc),*(undefined4 *)(in_ECX + 8),
                           *(undefined1 *)(in_ECX + 0x17),uStack_50,fVar2);
              uStack_54 = uStack_54 + 1;
              uVar8 = uVar8 + 1;
              iVar5 = iVar5 + 0x58;
            } while (uVar8 < *(uint *)(*(int *)(in_ECX + 0x50) + 4 + iVar7));
          }
          goto LAB_005dbf05;
        }
      }
      else {
        FUN_005acd80(*param_1,param_1[1] +
                              *(int *)(iVar5 * 0x154 + **(int **)(in_ECX + 0x68) + 0x14c) * 0x28,
                     &iStack_34);
LAB_005dbf05:
        bVar4 = true;
      }
      uStack_44 = uStack_44 + 1;
      iVar7 = iVar7 + 0x14;
    } while (uStack_44 < *(uint *)(in_ECX + 0x54));
  }
  (**(code **)(*piVar6 + 0x3c))(0,0,0,0);
  (**(code **)(*piVar6 + 0x40))(0,0,0,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005dbc40 : SUB ESP,0x58
005dbc43 : PUSH EBX
005dbc44 : PUSH EBP
005dbc45 : PUSH ESI
005dbc46 : PUSH EDI
005dbc47 : MOV EDI,dword ptr [ESP + 0x6c]
005dbc4b : MOV EAX,dword ptr [EDI]
005dbc4d : FLD float ptr [EDI + 0xc]
005dbc50 : MOV ESI,ECX
005dbc52 : MOV ECX,dword ptr [EAX]
005dbc54 : MOV EBX,dword ptr [ECX + 0xc]
005dbc57 : FSTP float ptr [ESP + 0x38]
005dbc5b : FLD float ptr [EDI + 0x10]
005dbc5e : LEA EDX,[ESP + 0x50]
005dbc62 : FSTP float ptr [ESP + 0x3c]
005dbc66 : PUSH EDX
005dbc67 : FLD float ptr [EDI + 0x14]
005dbc6a : LEA ECX,[ESP + 0x3c]
005dbc6e : FSTP float ptr [ESP + 0x44]
005dbc72 : MOV dword ptr [ESP + 0x24],EBX
005dbc76 : FLD float ptr [EDI + 0x18]
005dbc79 : FSTP float ptr [ESP + 0x48]
005dbc7d : FLD float ptr [EDI + 0x1c]
005dbc80 : FSTP float ptr [ESP + 0x4c]
005dbc84 : FLD float ptr [EDI + 0x20]
005dbc87 : FSTP float ptr [ESP + 0x50]
005dbc8b : FLD float ptr [ESI + 0x10]
005dbc8e : FSTP float ptr [ESP + 0x70]
005dbc92 : FLD float ptr [ESP + 0x70]
005dbc96 : FST float ptr [ESP + 0x54]
005dbc9a : FLDZ
005dbc9c : FST float ptr [ESP + 0x58]
005dbca0 : FST float ptr [ESP + 0x5c]
005dbca4 : FST float ptr [ESP + 0x60]
005dbca8 : FSTP float ptr [ESP + 0x68]
005dbcac : FSTP float ptr [ESP + 0x64]
005dbcb0 : CALL 0x00522e20
005dbcb5 : MOV EAX,dword ptr [EBX]
005dbcb7 : MOV EDX,dword ptr [EAX + 0x28]
005dbcba : LEA ECX,[EDI + 0x24]
005dbcbd : PUSH ECX
005dbcbe : MOV ECX,EBX
005dbcc0 : CALL EDX
005dbcc2 : CMP dword ptr [EDI + 0x44],0x2
005dbcc6 : MOV byte ptr [ESP + 0x1c],0x0
005dbccb : JG 0x005dbcdd
005dbccd : FLD float ptr [EDI + 0x3c]
005dbcd0 : FCOMP double ptr [0x00b93888]
005dbcd6 : FNSTSW AX
005dbcd8 : TEST AH,0x5
005dbcdb : JP 0x005dbce2
005dbcdd : MOV byte ptr [ESP + 0x1c],0x1
005dbce2 : MOV EAX,dword ptr [EDI]
005dbce4 : FLD float ptr [EAX + 0x24]
005dbce7 : XOR EBP,EBP
005dbce9 : FDIVR double ptr [0x00b93700]
005dbcef : MOV byte ptr [ESP + 0x6c],0x1
005dbcf4 : MOV dword ptr [ESP + 0x28],EBP
005dbcf8 : MOV dword ptr [ESP + 0x14],EBP
005dbcfc : MOV dword ptr [ESP + 0x18],EBP
005dbd00 : FSTP float ptr [ESP + 0x2c]
005dbd04 : CMP dword ptr [ESI + 0x54],EBP
005dbd07 : JBE 0x005dbf1f
005dbd0d : LEA ECX,[ECX]
005dbd10 : MOV ECX,dword ptr [ESI + 0x50]
005dbd13 : MOV EAX,dword ptr [ECX + EBP*0x1 + 0x10]
005dbd17 : CMP EAX,-0x1
005dbd1a : JZ 0x005dbd4b
005dbd1c : MOV EDX,dword ptr [ESI + 0x68]
005dbd1f : IMUL EAX,EAX,0x154
005dbd25 : ADD EAX,dword ptr [EDX]
005dbd27 : LEA ECX,[ESP + 0x38]
005dbd2b : PUSH ECX
005dbd2c : MOV ECX,dword ptr [EAX + 0x14c]
005dbd32 : LEA EDX,[ECX + ECX*0x4]
005dbd35 : MOV ECX,dword ptr [EDI + 0x4]
005dbd38 : LEA EDX,[ECX + EDX*0x8]
005dbd3b : MOV ECX,dword ptr [EDI]
005dbd3d : PUSH EDX
005dbd3e : PUSH ECX
005dbd3f : MOV ECX,EAX
005dbd41 : CALL 0x005acd80
005dbd46 : JMP 0x005dbf05
005dbd4b : CMP byte ptr [ESP + 0x6c],0x0
005dbd50 : JZ 0x005dbd9f
005dbd52 : CMP dword ptr [ESI + 0x34],0x0
005dbd56 : LEA ECX,[ESI + 0x34]
005dbd59 : LEA EAX,[ESI + 0x48]
005dbd5c : MOV dword ptr [ESP + 0x30],EAX
005dbd60 : MOV byte ptr [ESP + 0x34],0x0
005dbd65 : JZ 0x005dbd74
005dbd67 : LEA EDX,[ESP + 0x30]
005dbd6b : PUSH EDX
005dbd6c : PUSH EBX
005dbd6d : CALL 0x005f8f10
005dbd72 : JMP 0x005dbd8c
005dbd74 : CMP EBX,dword ptr [EAX]
005dbd76 : JNZ 0x005dbd8c
005dbd78 : MOV EAX,dword ptr [EBX]
005dbd7a : MOV EDX,dword ptr [EAX + 0x3c]
005dbd7d : LEA ECX,[ESP + 0x30]
005dbd81 : PUSH ECX
005dbd82 : PUSH 0x0
005dbd84 : PUSH 0x0
005dbd86 : PUSH 0x0
005dbd88 : MOV ECX,EBX
005dbd8a : CALL EDX
005dbd8c : MOV EAX,dword ptr [EBX]
005dbd8e : MOV EDX,dword ptr [EAX + 0x20]
005dbd91 : LEA ECX,[ESP + 0x38]
005dbd95 : PUSH ECX
005dbd96 : MOV ECX,EBX
005dbd98 : CALL EDX
005dbd9a : MOV byte ptr [ESP + 0x6c],0x0
005dbd9f : MOV EAX,dword ptr [ESI + 0x6c]
005dbda2 : XOR ECX,ECX
005dbda4 : MOV dword ptr [ESP + 0x24],ECX
005dbda8 : CMP EAX,ECX
005dbdaa : JZ 0x005dbdb2
005dbdac : MOV EAX,dword ptr [EAX]
005dbdae : MOV dword ptr [ESP + 0x24],EAX
005dbdb2 : MOV EDX,dword ptr [ESI + 0x50]
005dbdb5 : MOV dword ptr [ESP + 0x10],ECX
005dbdb9 : CMP dword ptr [EDX + EBP*0x1],ECX
005dbdbc : JBE 0x005dbe33
005dbdbe : MOV EBX,dword ptr [ESP + 0x14]
005dbdc2 : LEA EBX,[EBX + EBX*0x4]
005dbdc5 : ADD EBX,EBX
005dbdc7 : ADD EBX,EBX
005dbdc9 : ADD EBX,EBX
005dbdcb : JMP 0x005dbdd0
005dbdd0 : MOV EAX,dword ptr [ESP + 0x14]
005dbdd4 : CMP EAX,dword ptr [ESI + 0x20]
005dbdd7 : JNC 0x005dbe2f
005dbdd9 : MOV EAX,dword ptr [EDI + 0x48]
005dbddc : TEST EAX,EAX
005dbdde : JZ 0x005dbde5
005dbde0 : MOV ECX,dword ptr [EDI + 0x4]
005dbde3 : JMP 0x005dbde7
005dbde5 : XOR ECX,ECX
005dbde7 : MOV EDX,dword ptr [ESI + 0x50]
005dbdea : FLD float ptr [ESI + 0x10]
005dbded : LEA EAX,[EDX + EBP*0x1]
005dbdf0 : MOVZX EDX,byte ptr [ESI + 0x15]
005dbdf4 : PUSH EDX
005dbdf5 : PUSH dword ptr [ESP + 0x28]
005dbdf9 : MOV EDX,dword ptr [EAX + 0xc]
005dbdfc : MOV EAX,dword ptr [EAX + 0x8]
005dbdff : PUSH ECX
005dbe00 : FSTP float ptr [ESP]
005dbe03 : PUSH EDX
005dbe04 : PUSH EAX
005dbe05 : MOV EAX,dword ptr [EDI + 0x48]
005dbe08 : PUSH EAX
005dbe09 : PUSH ECX
005dbe0a : MOV ECX,dword ptr [EDI]
005dbe0c : PUSH ECX
005dbe0d : MOV ECX,dword ptr [ESI + 0x1c]
005dbe10 : ADD ECX,EBX
005dbe12 : CALL 0x005d9d80
005dbe17 : MOV EAX,dword ptr [ESP + 0x10]
005dbe1b : MOV EDX,dword ptr [ESI + 0x50]
005dbe1e : INC dword ptr [ESP + 0x14]
005dbe22 : INC EAX
005dbe23 : ADD EBX,0x28
005dbe26 : MOV dword ptr [ESP + 0x10],EAX
005dbe2a : CMP EAX,dword ptr [EDX + EBP*0x1]
005dbe2d : JC 0x005dbdd0
005dbe2f : MOV EBX,dword ptr [ESP + 0x20]
005dbe33 : MOV EAX,dword ptr [ESI + 0x50]
005dbe36 : CMP dword ptr [EAX + EBP*0x1 + 0x4],0x0
005dbe3b : JZ 0x005dbf0a
005dbe41 : FLD float ptr [ESP + 0x38]
005dbe45 : MOV EDX,dword ptr [EBX]
005dbe47 : FSTP float ptr [ESP + 0x50]
005dbe4b : MOV EDX,dword ptr [EDX + 0x20]
005dbe4e : FLD float ptr [ESP + 0x3c]
005dbe52 : LEA EAX,[ESP + 0x50]
005dbe56 : FSTP float ptr [ESP + 0x54]
005dbe5a : PUSH EAX
005dbe5b : FLD float ptr [ESP + 0x48]
005dbe5f : MOV ECX,EBX
005dbe61 : FSTP float ptr [ESP + 0x60]
005dbe65 : FLD float ptr [ESP + 0x4c]
005dbe69 : FSTP float ptr [ESP + 0x64]
005dbe6d : FLD float ptr [ESP + 0x44]
005dbe71 : FLD float ptr [ESP + 0x30]
005dbe75 : FLD ST0
005dbe77 : FADDP ST2,ST0
005dbe79 : FXCH
005dbe7b : FSTP float ptr [ESP + 0x5c]
005dbe7f : FADD float ptr [ESP + 0x50]
005dbe83 : FSTP float ptr [ESP + 0x68]
005dbe87 : CALL EDX
005dbe89 : MOV EAX,dword ptr [ESI + 0x50]
005dbe8c : CMP dword ptr [EAX + EBP*0x1 + 0x4],0x0
005dbe91 : MOV dword ptr [ESP + 0x10],0x0
005dbe99 : JBE 0x005dbf05
005dbe9b : MOV EBX,dword ptr [ESP + 0x18]
005dbe9f : IMUL EBX,EBX,0x58
005dbea2 : MOV ECX,dword ptr [ESP + 0x18]
005dbea6 : CMP ECX,dword ptr [ESI + 0x2c]
005dbea9 : JNC 0x005dbf01
005dbeab : MOV EDX,dword ptr [ESI + 0x28]
005dbeae : FLD float ptr [ESI + 0x8]
005dbeb1 : MOV EAX,dword ptr [ESP + 0x70]
005dbeb5 : PUSH EAX
005dbeb6 : MOVZX EAX,byte ptr [ESI + 0x17]
005dbeba : LEA ECX,[EDX + EBX*0x1]
005dbebd : MOV EDX,dword ptr [ESP + 0x20]
005dbec1 : PUSH EDX
005dbec2 : PUSH EAX
005dbec3 : SUB ESP,0x8
005dbec6 : LEA EAX,[EDI + 0xc]
005dbec9 : FSTP float ptr [ESP + 0x4]
005dbecd : FLD float ptr [ESI + 0xc]
005dbed0 : FSTP float ptr [ESP]
005dbed3 : PUSH EAX
005dbed4 : MOV EAX,dword ptr [ECX]
005dbed6 : LEA EDX,[EAX + EAX*0x2]
005dbed9 : MOV EAX,dword ptr [EDI + 0x8]
005dbedc : LEA EDX,[EAX + EDX*0x8]
005dbedf : MOV EAX,dword ptr [EDI]
005dbee1 : PUSH EDX
005dbee2 : PUSH EAX
005dbee3 : CALL 0x005da8e0
005dbee8 : MOV EAX,dword ptr [ESP + 0x10]
005dbeec : MOV ECX,dword ptr [ESI + 0x50]
005dbeef : INC dword ptr [ESP + 0x18]
005dbef3 : INC EAX
005dbef4 : ADD EBX,0x58
005dbef7 : MOV dword ptr [ESP + 0x10],EAX
005dbefb : CMP EAX,dword ptr [ECX + EBP*0x1 + 0x4]
005dbeff : JC 0x005dbea2
005dbf01 : MOV EBX,dword ptr [ESP + 0x20]
005dbf05 : MOV byte ptr [ESP + 0x6c],0x1
005dbf0a : MOV EAX,dword ptr [ESP + 0x28]
005dbf0e : INC EAX
005dbf0f : ADD EBP,0x14
005dbf12 : MOV dword ptr [ESP + 0x28],EAX
005dbf16 : CMP EAX,dword ptr [ESI + 0x54]
005dbf19 : JC 0x005dbd10
005dbf1f : MOV EDX,dword ptr [EBX]
005dbf21 : MOV EAX,dword ptr [EDX + 0x3c]
005dbf24 : PUSH 0x0
005dbf26 : PUSH 0x0
005dbf28 : PUSH 0x0
005dbf2a : PUSH 0x0
005dbf2c : MOV ECX,EBX
005dbf2e : CALL EAX
005dbf30 : MOV EDX,dword ptr [EBX]
005dbf32 : MOV EAX,dword ptr [EDX + 0x40]
005dbf35 : PUSH 0x0
005dbf37 : PUSH 0x0
005dbf39 : PUSH 0x0
005dbf3b : PUSH 0x0
005dbf3d : MOV ECX,EBX
005dbf3f : CALL EAX
005dbf41 : POP EDI
005dbf42 : POP ESI
005dbf43 : POP EBP
005dbf44 : POP EBX
005dbf45 : ADD ESP,0x58
005dbf48 : RET 0x8
