PROGRAM  : Maestia.exe
FUNCTION : FUN_007b7190
ENTRY    : 007b7190
BODY     : [[007b7190, 007b7450]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_007b7190(int param_1,char param_2)

{
  undefined4 uVar1;
  undefined1 uVar2;
  char cVar3;
  uint uVar4;
  void *_Src;
  undefined1 local_848 [4];
  undefined2 local_844;
  undefined4 local_834;
  uint local_830;
  undefined1 local_82c [4];
  size_t local_828;
  undefined1 local_824 [256];
  undefined4 local_724;
  undefined1 local_720;
  undefined4 local_71c;
  undefined1 local_718;
  undefined4 local_714;
  undefined1 local_6c;
  undefined1 local_6b;
  undefined1 local_6a;
  undefined1 local_69;
  undefined1 local_68;
  undefined4 local_60;
  undefined4 local_5c;
  undefined8 local_58;
  undefined4 local_50;
  undefined4 local_20;
  undefined4 local_1c;
  undefined1 local_18;
  undefined1 local_17;
  undefined1 local_16;
  undefined1 local_15;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4bebb;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar4;
  FUN_0046cda0(local_82c);
  local_8 = 0;
  if (*(char *)(param_1 + 0xae0c) == '\0') {
    local_828 = *(size_t *)(param_1 + 0xaabc);
    if (local_828 != 0) {
      _Src = (void *)(param_1 + 0xaac0);
      goto LAB_007b721b;
    }
  }
  else {
    local_828 = *(size_t *)(param_1 + 0xaccc);
    if (local_828 != 0) {
      _Src = (void *)(param_1 + 0xacd0);
LAB_007b721b:
      _memmove(local_824,_Src,local_828);
    }
  }
  uVar2 = *(undefined1 *)(param_1 + 0xb828);
  uVar1 = *(undefined4 *)(param_1 + 0xb81c);
  local_824[local_828] = 0;
  local_718 = *(undefined1 *)(param_1 + 0xb820);
  local_724 = 0;
  local_714 = 0x32;
  local_720 = uVar2;
  local_71c = uVar1;
  FUN_0046f6c0(uVar4);
  local_50 = *(undefined4 *)(param_1 + 0xb604);
  local_20 = *(undefined4 *)(param_1 + 0xb62c);
  local_1c = *(undefined4 *)(param_1 + 0xb624);
  local_58 = *(undefined8 *)(param_1 + 0xb5fc);
  local_18 = *(undefined1 *)(param_1 + 0xb648);
  local_17 = *(undefined1 *)(param_1 + 0xb634);
  local_16 = *(char *)(param_1 + 0xb628) == '\0';
  local_60 = *(undefined4 *)(param_1 + 0xb5f4);
  local_15 = *(undefined1 *)(param_1 + 0xb629);
  local_5c = *(undefined4 *)(param_1 + 0xb5f8);
  local_6c = 0;
  local_6b = 1;
  local_6a = 0;
  local_69 = 0;
  local_68 = 1;
  FUN_00465340(local_82c);
  *(undefined1 *)(param_1 + 100) = *(undefined1 *)(param_1 + 0x141e);
  if ((*(char *)(param_1 + 0xaab0) == '\0') || (param_2 != '\0')) {
    cVar3 = FUN_00465d10();
    if (cVar3 == '\0') {
      *(undefined1 *)(param_1 + 0xaab0) = 0;
      *(undefined1 *)(param_1 + 0xa9ba) = 0;
      FUN_00406460(
                  L"The SpeedTree Render Interface failed to initialize; check the console for an error report"
                  );
      local_8._0_1_ = 1;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"SpeedTree::CSpeedTreeRenderer::LoadShader",0x22e,local_848);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_830) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_830 = 7;
      local_834 = 0;
      local_844 = 0;
      local_8 = 0xffffffff;
      FUN_00474e90(local_82c);
      goto LAB_007b7433;
    }
    if (*(int *)(param_1 + 0xaddc) != 0) {
      *(undefined1 *)(param_1 + 0xa9ba) = 1;
    }
    FUN_0046cf80();
    _DAT_00da98dc = 0;
    _DAT_00d6df28 = 0x3f800000;
    *(undefined1 *)(param_1 + 0xaab0) = 1;
  }
  else if (*(int *)(param_1 + 0xaddc) != 0) {
    *(undefined1 *)(param_1 + 0xa9ba) = 1;
  }
  local_8 = 0xffffffff;
  FUN_00474e90(local_82c);
LAB_007b7433:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007b7190 : PUSH EBP
007b7191 : MOV EBP,ESP
007b7193 : PUSH -0x1
007b7195 : PUSH 0xb4bebb
007b719a : MOV EAX,FS:[0x0]
007b71a0 : PUSH EAX
007b71a1 : SUB ESP,0x83c
007b71a7 : MOV EAX,[0x00d66fa0]
007b71ac : XOR EAX,EBP
007b71ae : MOV dword ptr [EBP + -0x10],EAX
007b71b1 : PUSH EBX
007b71b2 : PUSH ESI
007b71b3 : PUSH EDI
007b71b4 : PUSH EAX
007b71b5 : LEA EAX,[EBP + -0xc]
007b71b8 : MOV FS:[0x0],EAX
007b71be : MOV EBX,dword ptr [EBP + 0x8]
007b71c1 : LEA EAX,[EBP + 0xfffff7d8]
007b71c7 : PUSH EAX
007b71c8 : CALL 0x0046cda0
007b71cd : XOR ESI,ESI
007b71cf : MOV dword ptr [EBP + -0x4],ESI
007b71d2 : CMP byte ptr [EBX + 0xae0c],0x0
007b71d9 : JZ 0x007b71fc
007b71db : MOV EAX,dword ptr [EBX + 0xaccc]
007b71e1 : MOV dword ptr [EBP + 0xfffff7dc],EAX
007b71e7 : CMP EAX,ESI
007b71e9 : JBE 0x007b7229
007b71eb : PUSH EAX
007b71ec : LEA ECX,[EBX + 0xacd0]
007b71f2 : PUSH ECX
007b71f3 : LEA EDX,[EBP + 0xfffff7e0]
007b71f9 : PUSH EDX
007b71fa : JMP 0x007b721b
007b71fc : MOV EAX,dword ptr [EBX + 0xaabc]
007b7202 : MOV dword ptr [EBP + 0xfffff7dc],EAX
007b7208 : CMP EAX,ESI
007b720a : JBE 0x007b7229
007b720c : PUSH EAX
007b720d : LEA EAX,[EBX + 0xaac0]
007b7213 : PUSH EAX
007b7214 : LEA ECX,[EBP + 0xfffff7e0]
007b721a : PUSH ECX
007b721b : CALL 0x00636880
007b7220 : MOV EAX,dword ptr [EBP + 0xfffff7dc]
007b7226 : ADD ESP,0xc
007b7229 : MOVZX EDX,byte ptr [EBX + 0xb828]
007b7230 : MOVSS XMM0,dword ptr [EBX + 0xb81c]
007b7238 : MOV byte ptr [EBP + EAX*0x1 + 0xfffff7e0],0x0
007b7240 : MOVZX EAX,byte ptr [EBX + 0xb820]
007b7247 : MOV dword ptr [EBP + 0xfffff8e0],ESI
007b724d : MOV byte ptr [EBP + 0xfffff8ec],AL
007b7253 : LEA EAX,[EBX + 0xaf40]
007b7259 : LEA ESI,[EBP + 0xfffff8fc]
007b725f : MOV byte ptr [EBP + 0xfffff8e4],DL
007b7265 : MOVSS dword ptr [EBP + 0xfffff8e8],XMM0
007b726d : MOV dword ptr [EBP + 0xfffff8f0],0x32
007b7277 : CALL 0x0046f6c0
007b727c : MOV ECX,dword ptr [EBX + 0xb604]
007b7282 : MOV EDX,dword ptr [EBX + 0xb62c]
007b7288 : MOV EAX,dword ptr [EBX + 0xb624]
007b728e : MOVQ XMM0,qword ptr [EBX + 0xb5fc]
007b7296 : MOV dword ptr [EBP + -0x4c],ECX
007b7299 : MOVZX ECX,byte ptr [EBX + 0xb648]
007b72a0 : MOV dword ptr [EBP + -0x1c],EDX
007b72a3 : MOVZX EDX,byte ptr [EBX + 0xb634]
007b72aa : MOV dword ptr [EBP + -0x18],EAX
007b72ad : XOR EAX,EAX
007b72af : CMP byte ptr [EBX + 0xb628],AL
007b72b5 : MOVQ qword ptr [EBP + -0x54],XMM0
007b72ba : MOVSS XMM0,dword ptr [EBX + 0xb5f4]
007b72c2 : MOV byte ptr [EBP + -0x14],CL
007b72c5 : MOVZX ECX,byte ptr [EBX + 0xb629]
007b72cc : MOV byte ptr [EBP + -0x13],DL
007b72cf : LEA EDX,[EBP + 0xfffff7d8]
007b72d5 : MOVSS dword ptr [EBP + -0x5c],XMM0
007b72da : MOVSS XMM0,dword ptr [EBX + 0xb5f8]
007b72e2 : SETZ AL
007b72e5 : PUSH EDX
007b72e6 : LEA EDI,[EBX + 0xc08]
007b72ec : MOV byte ptr [EBP + -0x68],0x0
007b72f0 : MOV byte ptr [EBP + -0x67],0x1
007b72f4 : MOV byte ptr [EBP + -0x66],0x0
007b72f8 : MOV byte ptr [EBP + -0x65],0x0
007b72fc : MOV byte ptr [EBP + -0x64],0x1
007b7300 : MOVSS dword ptr [EBP + -0x58],XMM0
007b7305 : MOV byte ptr [EBP + -0x12],AL
007b7308 : MOV byte ptr [EBP + -0x11],CL
007b730b : CALL 0x00465340
007b7310 : CMP byte ptr [EBX + 0xaab0],0x0
007b7317 : MOV AL,byte ptr [EBX + 0x141e]
007b731d : MOV byte ptr [EBX + 0x64],AL
007b7320 : JZ 0x007b7341
007b7322 : CMP byte ptr [EBP + 0xc],0x0
007b7326 : JNZ 0x007b7341
007b7328 : CMP dword ptr [EBX + 0xaddc],0x0
007b732f : JZ 0x007b741e
007b7335 : MOV byte ptr [EBX + 0xa9ba],0x1
007b733c : JMP 0x007b741e
007b7341 : MOV EDI,EBX
007b7343 : CALL 0x00465d10
007b7348 : TEST AL,AL
007b734a : JNZ 0x007b73df
007b7350 : PUSH 0xc185e0
007b7355 : LEA ECX,[EBP + 0xfffff7bc]
007b735b : MOV byte ptr [EBX + 0xaab0],AL
007b7361 : MOV byte ptr [EBX + 0xa9ba],AL
007b7367 : CALL 0x00406460
007b736c : MOV byte ptr [EBP + -0x4],0x1
007b7370 : MOV EAX,[0x00da98e8]
007b7375 : MOV ECX,dword ptr [EAX]
007b7377 : TEST ECX,ECX
007b7379 : JZ 0x007b7393
007b737b : MOV EDX,dword ptr [ECX]
007b737d : MOV EDX,dword ptr [EDX + 0x14]
007b7380 : LEA EAX,[EBP + 0xfffff7bc]
007b7386 : PUSH EAX
007b7387 : PUSH 0x22e
007b738c : PUSH 0xc18698
007b7391 : CALL EDX
007b7393 : MOV byte ptr [EBP + -0x4],0x0
007b7397 : CMP dword ptr [EBP + 0xfffff7d4],0x8
007b739e : JC 0x007b73ab
007b73a0 : MOV ECX,dword ptr [EBP + 0xfffff7c0]
007b73a6 : CALL 0x006f04e0
007b73ab : XOR EAX,EAX
007b73ad : MOV dword ptr [EBP + 0xfffff7d4],0x7
007b73b7 : MOV dword ptr [EBP + 0xfffff7d0],0x0
007b73c1 : MOV word ptr [EBP + 0xfffff7c0],AX
007b73c8 : MOV dword ptr [EBP + -0x4],0xffffffff
007b73cf : LEA ECX,[EBP + 0xfffff7d8]
007b73d5 : PUSH ECX
007b73d6 : CALL 0x00474e90
007b73db : XOR AL,AL
007b73dd : JMP 0x007b7433
007b73df : CMP dword ptr [EBX + 0xaddc],0x0
007b73e6 : JZ 0x007b73ef
007b73e8 : MOV byte ptr [EBX + 0xa9ba],0x1
007b73ef : LEA EDX,[EBX + 0xb5dc]
007b73f5 : MOV ECX,EBX
007b73f7 : CALL 0x0046cf80
007b73fc : XORPS XMM0,XMM0
007b73ff : MOVSS dword ptr [0x00da98dc],XMM0
007b7407 : MOVSS XMM0,dword ptr [0x00c10fc4]
007b740f : MOVSS dword ptr [0x00d6df28],XMM0
007b7417 : MOV byte ptr [EBX + 0xaab0],0x1
007b741e : MOV dword ptr [EBP + -0x4],0xffffffff
007b7425 : LEA EDX,[EBP + 0xfffff7d8]
007b742b : PUSH EDX
007b742c : CALL 0x00474e90
007b7431 : MOV AL,0x1
007b7433 : MOV ECX,dword ptr [EBP + -0xc]
007b7436 : MOV dword ptr FS:[0x0],ECX
007b743d : POP ECX
007b743e : POP EDI
007b743f : POP ESI
007b7440 : POP EBX
007b7441 : MOV ECX,dword ptr [EBP + -0x10]
007b7444 : XOR ECX,EBP
007b7446 : CALL 0x00633e6b
007b744b : MOV ESP,EBP
007b744d : POP EBP
007b744e : RET 0x8
