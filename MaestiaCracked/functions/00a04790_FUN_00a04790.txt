PROGRAM  : Maestia.exe
FUNCTION : FUN_00a04790
ENTRY    : 00a04790
BODY     : [[00a04790, 00a0489c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a04790(void)

{
  int *piVar1;
  char cVar2;
  undefined4 uVar3;
  int *in_ECX;
  uint local_30;
  undefined1 local_2c [24];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4255c;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  cVar2 = (**(code **)(*in_ECX + 0xc))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (cVar2 != '\0') {
    if (DAT_00d6f0f4 != -1) {
      FUN_00406460(L"IDS_DISABLE_BUILDUP");
      local_8 = 0;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 1;
      (**(code **)(*piVar1 + 0x44))(uVar3,3);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      ExceptionList = local_10;
      return;
    }
    if (*(int *)(*DAT_00da9894 + 0x184) != 0) {
      *(int *)(*(int *)(*DAT_00da9894 + 0x184) + 100) = in_ECX[3];
      FUN_009c7420();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a04790 : PUSH EBP
00a04791 : MOV EBP,ESP
00a04793 : PUSH -0x1
00a04795 : PUSH 0xb4255c
00a0479a : MOV EAX,FS:[0x0]
00a047a0 : PUSH EAX
00a047a1 : SUB ESP,0x38
00a047a4 : PUSH EBX
00a047a5 : PUSH ESI
00a047a6 : PUSH EDI
00a047a7 : MOV EAX,[0x00d66fa0]
00a047ac : XOR EAX,EBP
00a047ae : PUSH EAX
00a047af : LEA EAX,[EBP + -0xc]
00a047b2 : MOV FS:[0x0],EAX
00a047b8 : MOV ESI,ECX
00a047ba : MOV EAX,dword ptr [ESI]
00a047bc : MOV EDX,dword ptr [EAX + 0xc]
00a047bf : CALL EDX
00a047c1 : TEST AL,AL
00a047c3 : JZ 0x00a0488b
00a047c9 : CMP dword ptr [0x00d6f0f4],-0x1
00a047d0 : JZ 0x00a0486f
00a047d6 : PUSH 0xca8eac
00a047db : LEA ECX,[EBP + -0x28]
00a047de : CALL 0x00406460
00a047e3 : XOR EBX,EBX
00a047e5 : MOV dword ptr [EBP + -0x4],EBX
00a047e8 : MOV EAX,[0x00da9894]
00a047ed : MOV EAX,dword ptr [EAX]
00a047ef : MOV ESI,dword ptr [EAX + 0x1a8]
00a047f5 : LEA ECX,[EBP + -0x28]
00a047f8 : PUSH ECX
00a047f9 : MOV ECX,dword ptr [0x0172491c]
00a047ff : LEA EDI,[EBP + -0x44]
00a04802 : CALL 0x0081d120
00a04807 : MOV byte ptr [EBP + -0x4],0x1
00a0480b : MOV EDX,dword ptr [ESI]
00a0480d : PUSH 0x3
00a0480f : PUSH EAX
00a04810 : MOV EAX,dword ptr [EDX + 0x44]
00a04813 : MOV ECX,ESI
00a04815 : CALL EAX
00a04817 : MOV byte ptr [EBP + -0x4],BL
00a0481a : MOV ESI,0x8
00a0481f : CMP dword ptr [EBP + -0x2c],ESI
00a04822 : JC 0x00a0482c
00a04824 : MOV ECX,dword ptr [EBP + -0x40]
00a04827 : CALL 0x006f04e0
00a0482c : MOV EDI,0x7
00a04831 : XOR ECX,ECX
00a04833 : MOV dword ptr [EBP + -0x2c],EDI
00a04836 : MOV dword ptr [EBP + -0x30],EBX
00a04839 : MOV word ptr [EBP + -0x40],CX
00a0483d : MOV dword ptr [EBP + -0x4],0xffffffff
00a04844 : CMP dword ptr [EBP + -0x10],ESI
00a04847 : JC 0x00a04851
00a04849 : MOV ECX,dword ptr [EBP + -0x24]
00a0484c : CALL 0x006f04e0
00a04851 : XOR EDX,EDX
00a04853 : MOV dword ptr [EBP + -0x10],EDI
00a04856 : MOV dword ptr [EBP + -0x14],EBX
00a04859 : MOV word ptr [EBP + -0x24],DX
00a0485d : MOV ECX,dword ptr [EBP + -0xc]
00a04860 : MOV dword ptr FS:[0x0],ECX
00a04867 : POP ECX
00a04868 : POP EDI
00a04869 : POP ESI
00a0486a : POP EBX
00a0486b : MOV ESP,EBP
00a0486d : POP EBP
00a0486e : RET
00a0486f : MOV EAX,[0x00da9894]
00a04874 : MOV ECX,dword ptr [EAX]
00a04876 : MOV EAX,dword ptr [ECX + 0x184]
00a0487c : TEST EAX,EAX
00a0487e : JZ 0x00a0488b
00a04880 : MOV EDX,dword ptr [ESI + 0xc]
00a04883 : MOV dword ptr [EAX + 0x64],EDX
00a04886 : CALL 0x009c7420
00a0488b : MOV ECX,dword ptr [EBP + -0xc]
00a0488e : MOV dword ptr FS:[0x0],ECX
00a04895 : POP ECX
00a04896 : POP EDI
00a04897 : POP ESI
00a04898 : POP EBX
00a04899 : MOV ESP,EBP
00a0489b : POP EBP
00a0489c : RET
