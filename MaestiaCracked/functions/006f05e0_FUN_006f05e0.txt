PROGRAM  : Maestia.exe
FUNCTION : FUN_006f05e0
ENTRY    : 006f05e0
BODY     : [[006f05e0, 006f06c5]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006f05e0(int param_1)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  int unaff_ESI;
  int *piVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3011e;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(uint *)(unaff_ESI + 0x88) < 0x20) {
    piVar2 = (int *)FUN_006f0760(0xc,
                                 "d:\\maestiaproject\\maestiasrc\\common\\lib\\include\\network\\jlutil\\AvMemAllocTracerInternal.h"
                                 ,0x15e,0,uVar1);
    piVar4 = (int *)0x0;
    if (piVar2 != (int *)0x0) {
      *piVar2 = 0;
      piVar2[1] = 0;
      piVar2[2] = 0;
      piVar4 = piVar2;
    }
    local_8 = 0xffffffff;
    if (piVar4 != (int *)0x0) {
      iVar3 = FUN_006f0760(param_1,
                           "d:\\maestiaproject\\maestiasrc\\common\\lib\\include\\network\\jlutil\\AvMemAllocTracerInternal.h"
                           ,0x13f,0,uVar1);
      if (iVar3 != 0) {
        *piVar4 = iVar3;
        piVar4[2] = param_1;
        *(int **)(unaff_ESI + 4 + *(int *)(unaff_ESI + 0x88) * 4) = piVar4;
        *(int *)(unaff_ESI + 0x88) = *(int *)(unaff_ESI + 0x88) + 1;
        *(int **)(unaff_ESI + 0x84) = piVar4;
        *(int *)(unaff_ESI + 0x8c) = param_1;
        FUN_006ee470(L"NewLogMemPoolMode: start new log mem pool (index %d, size %d)",
                     *(undefined4 *)(unaff_ESI + 0x88),param_1);
        ExceptionList = local_10;
        return 1;
      }
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006f05e0 : PUSH EBP
006f05e1 : MOV EBP,ESP
006f05e3 : PUSH -0x1
006f05e5 : PUSH 0xb3011e
006f05ea : MOV EAX,FS:[0x0]
006f05f0 : PUSH EAX
006f05f1 : PUSH EBX
006f05f2 : PUSH EDI
006f05f3 : MOV EAX,[0x00d66fa0]
006f05f8 : XOR EAX,EBP
006f05fa : PUSH EAX
006f05fb : LEA EAX,[EBP + -0xc]
006f05fe : MOV FS:[0x0],EAX
006f0604 : MOV EBX,dword ptr [EBP + 0x8]
006f0607 : CMP dword ptr [ESI + 0x88],0x20
006f060e : JNC 0x006f06b1
006f0614 : XOR EDI,EDI
006f0616 : PUSH EDI
006f0617 : PUSH 0x15e
006f061c : PUSH 0xbf3ae8
006f0621 : PUSH 0xc
006f0623 : CALL 0x006f0760
006f0628 : ADD ESP,0x10
006f062b : MOV dword ptr [EBP + 0x8],EAX
006f062e : MOV dword ptr [EBP + -0x4],EDI
006f0631 : CMP EAX,EDI
006f0633 : JZ 0x006f063f
006f0635 : MOV dword ptr [EAX],EDI
006f0637 : MOV dword ptr [EAX + 0x4],EDI
006f063a : MOV dword ptr [EAX + 0x8],EDI
006f063d : MOV EDI,EAX
006f063f : MOV dword ptr [EBP + -0x4],0xffffffff
006f0646 : TEST EDI,EDI
006f0648 : JZ 0x006f06b1
006f064a : PUSH 0x0
006f064c : PUSH 0x13f
006f0651 : PUSH 0xcdec30
006f0656 : PUSH EBX
006f0657 : CALL 0x006f0760
006f065c : ADD ESP,0x10
006f065f : TEST EAX,EAX
006f0661 : JZ 0x006f06b1
006f0663 : MOV dword ptr [EDI],EAX
006f0665 : MOV dword ptr [EDI + 0x8],EBX
006f0668 : MOV EAX,dword ptr [ESI + 0x88]
006f066e : MOV dword ptr [ESI + EAX*0x4 + 0x4],EDI
006f0672 : INC dword ptr [ESI + 0x88]
006f0678 : MOV EAX,dword ptr [ESI + 0x88]
006f067e : PUSH EBX
006f067f : PUSH EAX
006f0680 : PUSH 0xbf3ba8
006f0685 : MOV dword ptr [ESI + 0x84],EDI
006f068b : MOV dword ptr [ESI + 0x8c],EBX
006f0691 : CALL 0x006ee470
006f0696 : ADD ESP,0xc
006f0699 : MOV EAX,0x1
006f069e : MOV ECX,dword ptr [EBP + -0xc]
006f06a1 : MOV dword ptr FS:[0x0],ECX
006f06a8 : POP ECX
006f06a9 : POP EDI
006f06aa : POP EBX
006f06ab : MOV ESP,EBP
006f06ad : POP EBP
006f06ae : RET 0x4
006f06b1 : XOR EAX,EAX
006f06b3 : MOV ECX,dword ptr [EBP + -0xc]
006f06b6 : MOV dword ptr FS:[0x0],ECX
006f06bd : POP ECX
006f06be : POP EDI
006f06bf : POP EBX
006f06c0 : MOV ESP,EBP
006f06c2 : POP EBP
006f06c3 : RET 0x4
