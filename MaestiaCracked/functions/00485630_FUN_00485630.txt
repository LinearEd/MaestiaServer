PROGRAM  : Maestia.exe
FUNCTION : FUN_00485630
ENTRY    : 00485630
BODY     : [[00485630, 00485835]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0048567b) */
/* WARNING: Removing unreachable block (ram,0x004857bf) */

void FUN_00485630(int param_1,int *param_2,int param_3)

{
  uint uVar1;
  ushort *puVar2;
  ushort *puVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint uVar6;
  uint uVar7;
  undefined4 *local_14;
  undefined4 *local_c;
  
  local_14 = *(undefined4 **)(param_1 + 4);
  local_c = local_14;
  if (*(char *)((int)local_14[1] + 0x29) == '\0') {
    uVar1 = *(uint *)(param_3 + 0x14);
    puVar4 = (undefined4 *)local_14[1];
    do {
      if (*(uint *)(param_3 + 0x18) < 8) {
        puVar2 = (ushort *)(param_3 + 4);
      }
      else {
        puVar2 = *(ushort **)(param_3 + 4);
      }
      uVar7 = puVar4[8];
      uVar6 = uVar1;
      if (uVar7 < uVar1) {
        uVar6 = uVar7;
      }
      if ((uint)puVar4[9] < 8) {
        puVar3 = (ushort *)(puVar4 + 4);
      }
      else {
        puVar3 = (ushort *)puVar4[4];
      }
      for (; uVar6 != 0; uVar6 = uVar6 - 1) {
        if (*puVar3 != *puVar2) {
          uVar6 = (-(uint)(*puVar3 < *puVar2) & 0xfffffffe) + 1;
          if (uVar6 != 0) goto LAB_004856ba;
          break;
        }
        puVar3 = puVar3 + 1;
        puVar2 = puVar2 + 1;
      }
      if (uVar7 < uVar1) {
LAB_004856be:
        puVar5 = (undefined4 *)puVar4[2];
      }
      else {
        uVar6 = (uint)(uVar7 != uVar1);
LAB_004856ba:
        if ((int)uVar6 < 0) goto LAB_004856be;
        if (*(char *)((int)local_c + 0x29) != '\0') {
          if ((uint)puVar4[9] < 8) {
            puVar2 = (ushort *)(puVar4 + 4);
          }
          else {
            puVar2 = (ushort *)puVar4[4];
          }
          uVar7 = *(uint *)(param_3 + 0x14);
          if (uVar1 < *(uint *)(param_3 + 0x14)) {
            uVar7 = uVar1;
          }
          uVar6 = puVar4[8];
          if (uVar7 < (uint)puVar4[8]) {
            uVar6 = uVar7;
          }
          if (*(uint *)(param_3 + 0x18) < 8) {
            puVar3 = (ushort *)(param_3 + 4);
          }
          else {
            puVar3 = *(ushort **)(param_3 + 4);
          }
          for (; uVar6 != 0; uVar6 = uVar6 - 1) {
            if (*puVar3 != *puVar2) {
              uVar6 = (-(uint)(*puVar3 < *puVar2) & 0xfffffffe) + 1;
              if (uVar6 != 0) goto LAB_0048573e;
              break;
            }
            puVar3 = puVar3 + 1;
            puVar2 = puVar2 + 1;
          }
          if ((uint)puVar4[8] <= uVar7) {
            uVar6 = (uint)(uVar7 != puVar4[8]);
LAB_0048573e:
            if (-1 < (int)uVar6) goto LAB_00485745;
          }
          local_c = puVar4;
        }
LAB_00485745:
        puVar5 = (undefined4 *)*puVar4;
        local_14 = puVar4;
      }
      puVar4 = puVar5;
    } while (*(char *)((int)puVar5 + 0x29) == '\0');
  }
  if (*(char *)((int)local_c + 0x29) == '\0') {
    puVar4 = (undefined4 *)*local_c;
  }
  else {
    puVar4 = *(undefined4 **)(*(int *)(param_1 + 4) + 4);
  }
  if (*(char *)((int)puVar4 + 0x29) == '\0') {
    uVar1 = *(uint *)(param_3 + 0x14);
    do {
      if ((uint)puVar4[9] < 8) {
        puVar2 = (ushort *)(puVar4 + 4);
      }
      else {
        puVar2 = (ushort *)puVar4[4];
      }
      uVar7 = puVar4[8];
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = uVar1;
      }
      puVar3 = (ushort *)(param_3 + 4);
      if (7 < *(uint *)(param_3 + 0x18)) {
        puVar3 = *(ushort **)(param_3 + 4);
      }
      for (; uVar7 != 0; uVar7 = uVar7 - 1) {
        if (*puVar3 != *puVar2) {
          uVar7 = (-(uint)(*puVar3 < *puVar2) & 0xfffffffe) + 1;
          if (uVar7 != 0) goto LAB_0048580b;
          break;
        }
        puVar2 = puVar2 + 1;
        puVar3 = puVar3 + 1;
      }
      if (uVar1 < (uint)puVar4[8]) {
LAB_0048580f:
        puVar5 = (undefined4 *)*puVar4;
        local_c = puVar4;
      }
      else {
        uVar7 = (uint)(uVar1 != puVar4[8]);
LAB_0048580b:
        if ((int)uVar7 < 0) goto LAB_0048580f;
        puVar5 = (undefined4 *)puVar4[2];
      }
      puVar4 = puVar5;
    } while (*(char *)((int)puVar5 + 0x29) == '\0');
  }
  *param_2 = (int)local_14;
  param_2[1] = (int)local_c;
  return;
}



============================================================
DISASSEMBLY
============================================================
00485630 : PUSH EBP
00485631 : MOV EBP,ESP
00485633 : SUB ESP,0x10
00485636 : MOV ECX,dword ptr [EBP + 0x8]
00485639 : MOV ECX,dword ptr [ECX + 0x4]
0048563c : MOV EAX,dword ptr [EBP + 0x10]
0048563f : PUSH EBX
00485640 : MOV EBX,dword ptr [ECX + 0x4]
00485643 : CMP byte ptr [EBX + 0x29],0x0
00485647 : PUSH ESI
00485648 : PUSH EDI
00485649 : MOV dword ptr [EBP + -0x10],ECX
0048564c : MOV dword ptr [EBP + -0x8],ECX
0048564f : JNZ 0x00485757
00485655 : MOV ESI,dword ptr [EAX + 0x14]
00485658 : MOV EDX,dword ptr [EAX + 0x18]
0048565b : MOV dword ptr [EBP + -0x4],ESI
0048565e : MOV dword ptr [EBP + -0xc],EDX
00485661 : JMP 0x00485666
00485663 : MOV ESI,dword ptr [EBP + -0x4]
00485666 : CMP dword ptr [EBP + -0xc],0x8
0048566a : JC 0x00485671
0048566c : MOV ECX,dword ptr [EAX + 0x4]
0048566f : JMP 0x00485674
00485671 : LEA ECX,[EAX + 0x4]
00485674 : MOV EDI,dword ptr [EBX + 0x20]
00485677 : MOV EDX,EDI
00485679 : CMP EDX,EDI
0048567b : CMOVC EDI,EDX
0048567e : CMP EDI,ESI
00485680 : JNC 0x00485684
00485682 : MOV ESI,EDI
00485684 : CMP dword ptr [EBX + 0x24],0x8
00485688 : JC 0x0048568f
0048568a : MOV EDX,dword ptr [EBX + 0x10]
0048568d : JMP 0x00485692
0048568f : LEA EDX,[EBX + 0x10]
00485692 : TEST ESI,ESI
00485694 : JBE 0x004856ac
00485696 : MOV AX,word ptr [EDX]
00485699 : CMP AX,word ptr [ECX]
0048569c : JNZ 0x004856c6
0048569e : ADD EDX,0x2
004856a1 : ADD ECX,0x2
004856a4 : SUB ESI,0x1
004856a7 : JNZ 0x00485696
004856a9 : MOV EAX,dword ptr [EBP + 0x10]
004856ac : MOV EDX,dword ptr [EBP + -0x4]
004856af : CMP EDI,EDX
004856b1 : JC 0x004856be
004856b3 : XOR ECX,ECX
004856b5 : CMP EDI,EDX
004856b7 : SETNZ CL
004856ba : TEST ECX,ECX
004856bc : JGE 0x004856de
004856be : MOV EBX,dword ptr [EBX + 0x8]
004856c1 : JMP 0x0048574a
004856c6 : MOV DX,AX
004856c9 : CMP DX,word ptr [ECX]
004856cc : SBB ECX,ECX
004856ce : AND ECX,0xfffffffe
004856d1 : ADD ECX,0x1
004856d4 : JZ 0x004856a9
004856d6 : MOV EAX,dword ptr [EBP + 0x10]
004856d9 : MOV EDX,dword ptr [EBP + -0x4]
004856dc : JMP 0x004856ba
004856de : MOV ECX,dword ptr [EBP + -0x8]
004856e1 : CMP byte ptr [ECX + 0x29],0x0
004856e5 : JZ 0x00485745
004856e7 : CMP dword ptr [EBX + 0x24],0x8
004856eb : MOV ESI,dword ptr [EBX + 0x20]
004856ee : JC 0x004856f5
004856f0 : MOV ECX,dword ptr [EBX + 0x10]
004856f3 : JMP 0x004856f8
004856f5 : LEA ECX,[EBX + 0x10]
004856f8 : MOV EDI,dword ptr [EAX + 0x14]
004856fb : CMP EDX,EDI
004856fd : CMOVC EDI,EDX
00485700 : CMP EDI,ESI
00485702 : JNC 0x00485706
00485704 : MOV ESI,EDI
00485706 : CMP dword ptr [EBP + -0xc],0x8
0048570a : JC 0x00485711
0048570c : MOV EDX,dword ptr [EAX + 0x4]
0048570f : JMP 0x00485714
00485711 : LEA EDX,[EAX + 0x4]
00485714 : TEST ESI,ESI
00485716 : JBE 0x0048572e
00485718 : MOV AX,word ptr [EDX]
0048571b : CMP AX,word ptr [ECX]
0048571e : JNZ 0x00485768
00485720 : ADD EDX,0x2
00485723 : ADD ECX,0x2
00485726 : SUB ESI,0x1
00485729 : JNZ 0x00485718
0048572b : MOV EAX,dword ptr [EBP + 0x10]
0048572e : MOV ECX,dword ptr [EBX + 0x20]
00485731 : CMP EDI,ECX
00485733 : JC 0x00485742
00485735 : XOR EDX,EDX
00485737 : CMP EDI,ECX
00485739 : SETNZ DL
0048573c : MOV ECX,EDX
0048573e : TEST ECX,ECX
00485740 : JGE 0x00485745
00485742 : MOV dword ptr [EBP + -0x8],EBX
00485745 : MOV dword ptr [EBP + -0x10],EBX
00485748 : MOV EBX,dword ptr [EBX]
0048574a : CMP byte ptr [EBX + 0x29],0x0
0048574e : JZ 0x00485663
00485754 : MOV ECX,dword ptr [EBP + -0x8]
00485757 : CMP byte ptr [ECX + 0x29],0x0
0048575b : JZ 0x0048577d
0048575d : MOV EDX,dword ptr [EBP + 0x8]
00485760 : MOV EDX,dword ptr [EDX + 0x4]
00485763 : MOV EBX,dword ptr [EDX + 0x4]
00485766 : JMP 0x0048577f
00485768 : MOV DX,AX
0048576b : CMP DX,word ptr [ECX]
0048576e : SBB ECX,ECX
00485770 : AND ECX,0xfffffffe
00485773 : ADD ECX,0x1
00485776 : JZ 0x0048572b
00485778 : MOV EAX,dword ptr [EBP + 0x10]
0048577b : JMP 0x0048573e
0048577d : MOV EBX,dword ptr [ECX]
0048577f : CMP byte ptr [EBX + 0x29],0x0
00485783 : JNZ 0x00485822
00485789 : MOV ECX,dword ptr [EAX + 0x14]
0048578c : MOV EDX,ECX
0048578e : MOV dword ptr [EBP + 0x8],ECX
00485791 : MOV ECX,dword ptr [EAX + 0x18]
00485794 : ADD EAX,0x4
00485797 : MOV dword ptr [EBP + -0x4],EDX
0048579a : MOV dword ptr [EBP + -0xc],ECX
0048579d : MOV dword ptr [EBP + 0x10],EAX
004857a0 : JMP 0x004857a5
004857a2 : MOV EDX,dword ptr [EBP + -0x4]
004857a5 : MOV ESI,dword ptr [EBX + 0x20]
004857a8 : MOV EAX,0x8
004857ad : CMP dword ptr [EBX + 0x24],EAX
004857b0 : JC 0x004857b7
004857b2 : MOV ECX,dword ptr [EBX + 0x10]
004857b5 : JMP 0x004857ba
004857b7 : LEA ECX,[EBX + 0x10]
004857ba : MOV EDI,dword ptr [EBP + 0x8]
004857bd : CMP EDX,EDI
004857bf : CMOVC EDI,EDX
004857c2 : CMP EDI,ESI
004857c4 : JNC 0x004857c8
004857c6 : MOV ESI,EDI
004857c8 : MOV EDX,dword ptr [EBP + 0x10]
004857cb : CMP dword ptr [EBP + -0xc],EAX
004857ce : JC 0x004857d2
004857d0 : MOV EDX,dword ptr [EDX]
004857d2 : TEST ESI,ESI
004857d4 : JBE 0x004857fb
004857d6 : MOV AX,word ptr [EDX]
004857d9 : CMP AX,word ptr [ECX]
004857dc : JNZ 0x004857eb
004857de : ADD EDX,0x2
004857e1 : ADD ECX,0x2
004857e4 : SUB ESI,0x1
004857e7 : JNZ 0x004857d6
004857e9 : JMP 0x004857fb
004857eb : MOV DX,word ptr [EDX]
004857ee : CMP DX,word ptr [ECX]
004857f1 : SBB ECX,ECX
004857f3 : AND ECX,0xfffffffe
004857f6 : ADD ECX,0x1
004857f9 : JNZ 0x0048580b
004857fb : MOV ECX,dword ptr [EBX + 0x20]
004857fe : CMP EDI,ECX
00485800 : JC 0x0048580f
00485802 : XOR EAX,EAX
00485804 : CMP EDI,ECX
00485806 : SETNZ AL
00485809 : MOV ECX,EAX
0048580b : TEST ECX,ECX
0048580d : JGE 0x00485816
0048580f : MOV dword ptr [EBP + -0x8],EBX
00485812 : MOV EBX,dword ptr [EBX]
00485814 : JMP 0x00485819
00485816 : MOV EBX,dword ptr [EBX + 0x8]
00485819 : CMP byte ptr [EBX + 0x29],0x0
0048581d : JZ 0x004857a2
0048581f : MOV ECX,dword ptr [EBP + -0x8]
00485822 : MOV EAX,dword ptr [EBP + 0xc]
00485825 : MOV EDX,dword ptr [EBP + -0x10]
00485828 : POP EDI
00485829 : POP ESI
0048582a : MOV dword ptr [EAX],EDX
0048582c : MOV dword ptr [EAX + 0x4],ECX
0048582f : POP EBX
00485830 : MOV ESP,EBP
00485832 : POP EBP
00485833 : RET 0xc
