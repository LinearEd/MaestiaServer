PROGRAM  : Maestia.exe
FUNCTION : FUN_007ca2e0
ENTRY    : 007ca2e0
BODY     : [[007ca2e0, 007ca40d]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007ca2e0(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int *in_EAX;
  int iVar3;
  uint uVar4;
  wchar_t *pwVar5;
  
  puVar1 = (undefined4 *)*in_EAX;
  in_EAX[0xc] = 0;
  if (puVar1 == (undefined4 *)0x0) {
    return -0x7fffbffb;
  }
  iVar3 = (**(code **)*puVar1)(puVar1,&DAT_00ba9048,in_EAX + 1);
  if (iVar3 < 0) {
    pwVar5 = L"FAILED_AvaMovieCreate_IID_IMediaControl";
  }
  else {
    iVar3 = (*(code *)**(undefined4 **)*in_EAX)((undefined4 *)*in_EAX,&DAT_00ba9058,in_EAX + 3);
    if (-1 < iVar3) {
      iVar3 = (*(code *)**(undefined4 **)*in_EAX)((undefined4 *)*in_EAX,&DAT_00ba9128,in_EAX + 2);
      if (iVar3 < 0) {
        FUN_008018d0(L"FAILED_AvaMovieCreate_IID_IMediaSeeking");
        return iVar3;
      }
      piVar2 = (int *)in_EAX[2];
      if (piVar2 != (int *)0x0) {
        (**(code **)(*piVar2 + 0x28))(piVar2,in_EAX + 6);
      }
      iVar3 = (*(code *)**(undefined4 **)*in_EAX)((undefined4 *)*in_EAX,&DAT_00ba9068,in_EAX + 4);
      if (iVar3 < 0) {
        FUN_008018d0(L"FAILED_AvaMovieCreate_IID_IBasicAudio");
        return iVar3;
      }
      piVar2 = (int *)in_EAX[4];
      if (piVar2 != (int *)0x0) {
        (**(code **)(*piVar2 + 0x1c))(piVar2,0);
      }
      in_EAX[5] = 0;
      uVar4 = GetWindowLongW((HWND)in_EAX[10],-0x10);
      in_EAX[5] = uVar4;
      SetWindowLongW((HWND)in_EAX[10],-0x10,uVar4 & 0xfff8ffff);
      SetWindowPos((HWND)in_EAX[10],(HWND)0x0,0,0,0,0,0x27);
      return iVar3;
    }
    pwVar5 = L"FAILED_AvaMovieCreate_IID_IMediaEvent";
  }
  FUN_008018d0(pwVar5);
  return iVar3;
}



============================================================
DISASSEMBLY
============================================================
007ca2e0 : PUSH ESI
007ca2e1 : MOV ESI,EAX
007ca2e3 : MOV EAX,dword ptr [ESI]
007ca2e5 : MOV dword ptr [ESI + 0x30],0x0
007ca2ec : TEST EAX,EAX
007ca2ee : JNZ 0x007ca2f7
007ca2f0 : MOV EAX,0x80004005
007ca2f5 : POP ESI
007ca2f6 : RET
007ca2f7 : MOV ECX,dword ptr [EAX]
007ca2f9 : PUSH EDI
007ca2fa : LEA EDX,[ESI + 0x4]
007ca2fd : PUSH EDX
007ca2fe : PUSH 0xba9048
007ca303 : PUSH EAX
007ca304 : MOV EAX,dword ptr [ECX]
007ca306 : CALL EAX
007ca308 : MOV EDI,EAX
007ca30a : TEST EDI,EDI
007ca30c : JGE 0x007ca315
007ca30e : PUSH 0xc1e840
007ca313 : JMP 0x007ca332
007ca315 : MOV EAX,dword ptr [ESI]
007ca317 : MOV ECX,dword ptr [EAX]
007ca319 : LEA EDX,[ESI + 0xc]
007ca31c : PUSH EDX
007ca31d : PUSH 0xba9058
007ca322 : PUSH EAX
007ca323 : MOV EAX,dword ptr [ECX]
007ca325 : CALL EAX
007ca327 : MOV EDI,EAX
007ca329 : TEST EDI,EDI
007ca32b : JGE 0x007ca345
007ca32d : PUSH 0xc1e890
007ca332 : MOV ESI,dword ptr [0x00da98e8]
007ca338 : CALL 0x008018d0
007ca33d : ADD ESP,0x4
007ca340 : MOV EAX,EDI
007ca342 : POP EDI
007ca343 : POP ESI
007ca344 : RET
007ca345 : MOV EAX,dword ptr [ESI]
007ca347 : MOV ECX,dword ptr [EAX]
007ca349 : MOV EDX,dword ptr [ECX]
007ca34b : PUSH EBX
007ca34c : LEA EDI,[ESI + 0x8]
007ca34f : PUSH EDI
007ca350 : PUSH 0xba9128
007ca355 : PUSH EAX
007ca356 : CALL EDX
007ca358 : MOV EBX,EAX
007ca35a : TEST EBX,EBX
007ca35c : JGE 0x007ca377
007ca35e : MOV ESI,dword ptr [0x00da98e8]
007ca364 : PUSH 0xc1e8e0
007ca369 : CALL 0x008018d0
007ca36e : ADD ESP,0x4
007ca371 : MOV EAX,EBX
007ca373 : POP EBX
007ca374 : POP EDI
007ca375 : POP ESI
007ca376 : RET
007ca377 : MOV EDI,dword ptr [EDI]
007ca379 : TEST EDI,EDI
007ca37b : JZ 0x007ca389
007ca37d : MOV EAX,dword ptr [EDI]
007ca37f : MOV EDX,dword ptr [EAX + 0x28]
007ca382 : LEA ECX,[ESI + 0x18]
007ca385 : PUSH ECX
007ca386 : PUSH EDI
007ca387 : CALL EDX
007ca389 : MOV EAX,dword ptr [ESI]
007ca38b : MOV ECX,dword ptr [EAX]
007ca38d : MOV EDX,dword ptr [ECX]
007ca38f : LEA EBX,[ESI + 0x10]
007ca392 : PUSH EBX
007ca393 : PUSH 0xba9068
007ca398 : PUSH EAX
007ca399 : CALL EDX
007ca39b : MOV EDI,EAX
007ca39d : TEST EDI,EDI
007ca39f : JGE 0x007ca3ba
007ca3a1 : MOV ESI,dword ptr [0x00da98e8]
007ca3a7 : PUSH 0xc1e930
007ca3ac : CALL 0x008018d0
007ca3b1 : ADD ESP,0x4
007ca3b4 : POP EBX
007ca3b5 : MOV EAX,EDI
007ca3b7 : POP EDI
007ca3b8 : POP ESI
007ca3b9 : RET
007ca3ba : MOV EBX,dword ptr [EBX]
007ca3bc : TEST EBX,EBX
007ca3be : JZ 0x007ca3ca
007ca3c0 : MOV EAX,dword ptr [EBX]
007ca3c2 : MOV ECX,dword ptr [EAX + 0x1c]
007ca3c5 : PUSH 0x0
007ca3c7 : PUSH EBX
007ca3c8 : CALL ECX
007ca3ca : MOV EDX,dword ptr [ESI + 0x28]
007ca3cd : PUSH -0x10
007ca3cf : PUSH EDX
007ca3d0 : MOV dword ptr [ESI + 0x14],0x0
007ca3d7 : CALL dword ptr [0x00b854a8]
007ca3dd : MOV dword ptr [ESI + 0x14],EAX
007ca3e0 : AND EAX,0xfff8ffff
007ca3e5 : PUSH EAX
007ca3e6 : MOV EAX,dword ptr [ESI + 0x28]
007ca3e9 : PUSH -0x10
007ca3eb : PUSH EAX
007ca3ec : CALL dword ptr [0x00b854a4]
007ca3f2 : MOV ECX,dword ptr [ESI + 0x28]
007ca3f5 : PUSH 0x27
007ca3f7 : PUSH 0x0
007ca3f9 : PUSH 0x0
007ca3fb : PUSH 0x0
007ca3fd : PUSH 0x0
007ca3ff : PUSH 0x0
007ca401 : PUSH ECX
007ca402 : CALL dword ptr [0x00b854ac]
007ca408 : POP EBX
007ca409 : MOV EAX,EDI
007ca40b : POP EDI
007ca40c : POP ESI
007ca40d : RET
