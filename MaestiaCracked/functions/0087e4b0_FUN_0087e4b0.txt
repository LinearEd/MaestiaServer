PROGRAM  : Maestia.exe
FUNCTION : FUN_0087e4b0
ENTRY    : 0087e4b0
BODY     : [[0087e4b0, 0087e53a] [0087e540, 0087e65b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0087e4b0(undefined8 param_1,undefined8 param_2,char param_3)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  int *in_ECX;
  int *piVar7;
  int *piVar8;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1c152;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((int *)*in_ECX != (int *)0x0) {
    iVar3 = (**(code **)(*(int *)*in_ECX + 0x1c))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    if (iVar3 != 2) {
      uVar4 = (**(code **)(*(int *)*in_ECX + 0x1c))();
      FUN_008018d0(L"ParentSceneNode InValid Point !! ( Un SCENENODE ) %d",uVar4);
      ExceptionList = local_10;
      return;
    }
    iVar3 = (**(code **)(*(int *)*in_ECX + 0x48))();
    piVar7 = (int *)**(int **)(iVar3 + 8);
    if (piVar7 != *(int **)(iVar3 + 8)) {
      do {
        piVar1 = (int *)piVar7[9];
        iVar5 = (**(code **)(*piVar1 + 0x1c))();
        if (iVar5 == 2) {
          if (piVar1[2] != 0) {
            EnterCriticalSection((LPCRITICAL_SECTION)(piVar1[2] + 4));
          }
          local_8 = 0;
          piVar8 = *(int **)piVar1[0x62];
          if (piVar8 != (int *)piVar1[0x62]) {
            do {
              piVar2 = (int *)piVar8[9];
              if (piVar2 != (int *)0x0) {
                uVar6 = 1;
                if (param_3 == '\0') {
                  uVar6 = 2;
                }
                if ((piVar2[0x73] & uVar6) == uVar6) {
                  iVar5 = (**(code **)(*piVar2 + 4))();
                  if (iVar5 == 2) {
                    *(undefined8 *)(piVar2 + 0xad) = param_1;
                    *(undefined8 *)(piVar2 + 0xaf) = param_2;
                  }
                  else {
                    iVar5 = (**(code **)(*piVar2 + 4))();
                    if (iVar5 == 0x15) {
                      if (param_3 == '\0') {
                        FUN_0043ffc0(param_1,param_2);
                      }
                      else {
                        FUN_0043ff90(param_1,param_2);
                      }
                    }
                  }
                }
              }
              piVar8 = (int *)*piVar8;
            } while (piVar8 != (int *)piVar1[0x62]);
          }
          local_8 = 0xffffffff;
          if (piVar1[2] != 0) {
            LeaveCriticalSection((LPCRITICAL_SECTION)(piVar1[2] + 4));
          }
        }
        piVar7 = (int *)*piVar7;
      } while (piVar7 != (int *)*(int *)(iVar3 + 8));
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0087e4b0 : PUSH EBP
0087e4b1 : MOV EBP,ESP
0087e4b3 : PUSH -0x1
0087e4b5 : PUSH 0xb1c152
0087e4ba : MOV EAX,FS:[0x0]
0087e4c0 : PUSH EAX
0087e4c1 : SUB ESP,0xc
0087e4c4 : PUSH EBX
0087e4c5 : PUSH ESI
0087e4c6 : PUSH EDI
0087e4c7 : MOV EAX,[0x00d66fa0]
0087e4cc : XOR EAX,EBP
0087e4ce : PUSH EAX
0087e4cf : LEA EAX,[EBP + -0xc]
0087e4d2 : MOV FS:[0x0],EAX
0087e4d8 : MOV EDI,ECX
0087e4da : MOV ECX,dword ptr [EDI]
0087e4dc : TEST ECX,ECX
0087e4de : JZ 0x0087e648
0087e4e4 : MOV EAX,dword ptr [ECX]
0087e4e6 : MOV EDX,dword ptr [EAX + 0x1c]
0087e4e9 : CALL EDX
0087e4eb : MOV ECX,dword ptr [EDI]
0087e4ed : CMP EAX,0x2
0087e4f0 : MOV EAX,dword ptr [ECX]
0087e4f2 : JZ 0x0087e521
0087e4f4 : MOV EDX,dword ptr [EAX + 0x1c]
0087e4f7 : MOV ESI,dword ptr [0x00da98e8]
0087e4fd : CALL EDX
0087e4ff : PUSH EAX
0087e500 : PUSH 0xc447b0
0087e505 : CALL 0x008018d0
0087e50a : ADD ESP,0x8
0087e50d : MOV ECX,dword ptr [EBP + -0xc]
0087e510 : MOV dword ptr FS:[0x0],ECX
0087e517 : POP ECX
0087e518 : POP EDI
0087e519 : POP ESI
0087e51a : POP EBX
0087e51b : MOV ESP,EBP
0087e51d : POP EBP
0087e51e : RET 0x14
0087e521 : MOV EDX,dword ptr [EAX + 0x48]
0087e524 : CALL EDX
0087e526 : MOV dword ptr [EBP + -0x14],EAX
0087e529 : MOV EAX,dword ptr [EAX + 0x8]
0087e52c : MOV ESI,dword ptr [EAX]
0087e52e : MOV dword ptr [EBP + -0x10],ESI
0087e531 : CMP ESI,EAX
0087e533 : JZ 0x0087e648
0087e539 : JMP 0x0087e543
0087e540 : MOV ESI,dword ptr [EBP + -0x10]
0087e543 : MOV EBX,dword ptr [ESI + 0x24]
0087e546 : MOV EAX,dword ptr [EBX]
0087e548 : MOV EDX,dword ptr [EAX + 0x1c]
0087e54b : MOV ECX,EBX
0087e54d : CALL EDX
0087e54f : CMP EAX,0x2
0087e552 : JNZ 0x0087e637
0087e558 : MOV EAX,dword ptr [EBX + 0x8]
0087e55b : MOV dword ptr [EBP + -0x18],EBX
0087e55e : TEST EAX,EAX
0087e560 : JZ 0x0087e56c
0087e562 : ADD EAX,0x4
0087e565 : PUSH EAX
0087e566 : CALL dword ptr [0x00b85118]
0087e56c : MOV dword ptr [EBP + -0x4],0x0
0087e573 : MOV EAX,dword ptr [EBX + 0x188]
0087e579 : MOV EDI,dword ptr [EAX]
0087e57b : CMP EDI,EAX
0087e57d : JZ 0x0087e61f
0087e583 : MOV ESI,dword ptr [EDI + 0x24]
0087e586 : TEST ESI,ESI
0087e588 : JZ 0x0087e60e
0087e58e : CMP byte ptr [EBP + 0x18],0x0
0087e592 : MOV EAX,0x1
0087e597 : JNZ 0x0087e59e
0087e599 : MOV EAX,0x2
0087e59e : MOV ECX,dword ptr [ESI + 0x1cc]
0087e5a4 : AND ECX,EAX
0087e5a6 : CMP ECX,EAX
0087e5a8 : JNZ 0x0087e60e
0087e5aa : MOV EDX,dword ptr [ESI]
0087e5ac : MOV EAX,dword ptr [EDX + 0x4]
0087e5af : MOV ECX,ESI
0087e5b1 : CALL EAX
0087e5b3 : CMP EAX,0x2
0087e5b6 : JNZ 0x0087e5d4
0087e5b8 : MOVQ XMM0,qword ptr [EBP + 0x8]
0087e5bd : MOVQ qword ptr [ESI + 0x2b4],XMM0
0087e5c5 : MOVQ XMM0,qword ptr [EBP + 0x10]
0087e5ca : MOVQ qword ptr [ESI + 0x2bc],XMM0
0087e5d2 : JMP 0x0087e60e
0087e5d4 : MOV EDX,dword ptr [ESI]
0087e5d6 : MOV EAX,dword ptr [EDX + 0x4]
0087e5d9 : MOV ECX,ESI
0087e5db : CALL EAX
0087e5dd : CMP EAX,0x15
0087e5e0 : JNZ 0x0087e60e
0087e5e2 : MOVQ XMM0,qword ptr [EBP + 0x8]
0087e5e7 : SUB ESP,0x10
0087e5ea : CMP byte ptr [EBP + 0x18],0x0
0087e5ee : MOV EAX,ESP
0087e5f0 : MOVQ qword ptr [EAX],XMM0
0087e5f4 : MOVQ XMM0,qword ptr [EBP + 0x10]
0087e5f9 : MOVQ qword ptr [EAX + 0x8],XMM0
0087e5fe : MOV EAX,ESI
0087e600 : JZ 0x0087e609
0087e602 : CALL 0x0043ff90
0087e607 : JMP 0x0087e60e
0087e609 : CALL 0x0043ffc0
0087e60e : MOV EDI,dword ptr [EDI]
0087e610 : CMP EDI,dword ptr [EBX + 0x188]
0087e616 : JNZ 0x0087e583
0087e61c : MOV ESI,dword ptr [EBP + -0x10]
0087e61f : MOV dword ptr [EBP + -0x4],0xffffffff
0087e626 : MOV EAX,dword ptr [EBX + 0x8]
0087e629 : TEST EAX,EAX
0087e62b : JZ 0x0087e637
0087e62d : ADD EAX,0x4
0087e630 : PUSH EAX
0087e631 : CALL dword ptr [0x00b8511c]
0087e637 : MOV EAX,dword ptr [ESI]
0087e639 : MOV ECX,dword ptr [EBP + -0x14]
0087e63c : MOV dword ptr [EBP + -0x10],EAX
0087e63f : CMP EAX,dword ptr [ECX + 0x8]
0087e642 : JNZ 0x0087e540
0087e648 : MOV ECX,dword ptr [EBP + -0xc]
0087e64b : MOV dword ptr FS:[0x0],ECX
0087e652 : POP ECX
0087e653 : POP EDI
0087e654 : POP ESI
0087e655 : POP EBX
0087e656 : MOV ESP,EBP
0087e658 : POP EBP
0087e659 : RET 0x14
