PROGRAM  : Maestia.exe
FUNCTION : FUN_00515ec0
ENTRY    : 00515ec0
BODY     : [[00515ec0, 00515ee6] [00515ef0, 00515f45]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00515ec0(void)

{
  int in_ECX;
  int iVar1;
  
  EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x2c4));
  if (*(int *)(in_ECX + 0x2dc) != 0) {
    for (iVar1 = *(int *)(in_ECX + 0x2e0); iVar1 != 0; iVar1 = iVar1 + -1) {
      if (*(int *)(*(int *)(in_ECX + 0x2dc) + -4 + iVar1 * 4) != 0) {
        FUN_00515e00(iVar1);
      }
    }
    FUN_005a87d0(*(undefined4 *)(in_ECX + 0x2dc),*(int *)(in_ECX + 0x2e0) * 4);
    *(undefined4 *)(in_ECX + 0x2dc) = 0;
    *(undefined4 *)(in_ECX + 0x2e0) = 0;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x2c4));
  return;
}



============================================================
DISASSEMBLY
============================================================
00515ec0 : PUSH EBP
00515ec1 : PUSH ESI
00515ec2 : MOV ESI,ECX
00515ec4 : LEA EBP,[ESI + 0x2c4]
00515eca : PUSH EBP
00515ecb : CALL dword ptr [0x00b85118]
00515ed1 : CMP dword ptr [ESI + 0x2dc],0x0
00515ed8 : JZ 0x00515f3c
00515eda : PUSH EDI
00515edb : MOV EDI,dword ptr [ESI + 0x2e0]
00515ee1 : TEST EDI,EDI
00515ee3 : JZ 0x00515f0a
00515ee5 : JMP 0x00515ef0
00515ef0 : MOV EAX,dword ptr [ESI + 0x2dc]
00515ef6 : CMP dword ptr [EAX + EDI*0x4 + -0x4],0x0
00515efb : JZ 0x00515f05
00515efd : PUSH EDI
00515efe : MOV ECX,ESI
00515f00 : CALL 0x00515e00
00515f05 : SUB EDI,0x1
00515f08 : JNZ 0x00515ef0
00515f0a : MOV ECX,dword ptr [ESI + 0x2e0]
00515f10 : MOV EDX,dword ptr [ESI + 0x2dc]
00515f16 : ADD ECX,ECX
00515f18 : ADD ECX,ECX
00515f1a : PUSH ECX
00515f1b : PUSH EDX
00515f1c : LEA ECX,[ESI + 0x118]
00515f22 : CALL 0x005a87d0
00515f27 : MOV dword ptr [ESI + 0x2dc],0x0
00515f31 : MOV dword ptr [ESI + 0x2e0],0x0
00515f3b : POP EDI
00515f3c : PUSH EBP
00515f3d : CALL dword ptr [0x00b8511c]
00515f43 : POP ESI
00515f44 : POP EBP
00515f45 : RET
