PROGRAM  : Maestia.exe
FUNCTION : FUN_008519f0
ENTRY    : 008519f0
BODY     : [[008519f0, 00851d21]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008519f0(void)

{
  char cVar1;
  short sVar2;
  int iVar3;
  int *in_ECX;
  float fVar4;
  undefined1 local_40 [4];
  float local_3c;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  float local_18;
  undefined4 local_14;
  float local_10;
  float local_c;
  undefined1 local_5;
  
  iVar3 = in_ECX[0x104];
  if (*(char *)(iVar3 + 300) == '\0') {
    sVar2 = *(short *)(iVar3 + 0x114);
  }
  else {
    sVar2 = *(short *)(iVar3 + 0xb4);
  }
  if ((sVar2 == 0x3c) || (sVar2 == 0x134)) {
    FUN_00850340();
    *(undefined1 *)(in_ECX + 0x67c) = 1;
    cVar1 = FUN_00851480();
    if (cVar1 != '\0') {
LAB_00851c68:
      (**(code **)(*in_ECX + 0x188))(0x3e,0,0,0,0,0x3f800000);
      (**(code **)(*in_ECX + 0x254))(1,in_ECX + 1,2);
      FUN_00851800();
      return;
    }
    iVar3 = in_ECX[0x62a];
    if (((iVar3 == 0) || (*(char *)(iVar3 + 0x20) == '\0')) ||
       (iVar3 = *(int *)(iVar3 + 0x9c), iVar3 == 0)) {
      iVar3 = in_ECX[0x104];
    }
    if (*(char *)(((*(char *)(iVar3 + 300) != '\0') - 1 & 2) * 0x30 + 0xb1 + iVar3) != '\0') {
      (**(code **)(*in_ECX + 0x188))(0x3d,1,0,0,0,0x3f800000);
    }
LAB_00851d16:
    FUN_00851800();
    return;
  }
  if ((sVar2 == 0x3d) || (sVar2 == 0x135)) {
    cVar1 = FUN_00851480();
    if (cVar1 != '\0') goto LAB_00851c68;
    goto LAB_00851d16;
  }
  if (((sVar2 == 0x3e) || (sVar2 == 0x3f)) || (sVar2 == 0x136)) {
    if ((in_ECX[0x62a] != 0) && (*(char *)(in_ECX[0x62a] + 0x20) != '\0')) {
      *(undefined1 *)(in_ECX + 0x67c) = 0;
      if (in_ECX[0xfa] != 0) {
        local_10 = 0.0;
        FUN_00445530();
      }
      *(undefined1 *)((int)in_ECX + 0x1c5d) = 1;
      iVar3 = *(int *)(in_ECX[0x4e] + 4);
      goto LAB_00851b5c;
    }
    local_c = *(float *)(((uint)(*(char *)(iVar3 + 300) == '\0') * 3 + 9) * 0x10 + iVar3);
    if ((((char)in_ECX[0x67c] != '\0') && (4.9 <= local_c)) &&
       (*(undefined1 *)(in_ECX + 0x67c) = 0, in_ECX[0xfa] != 0)) {
      local_10 = 0.0;
      FUN_00445530();
    }
    if ((local_c <= 8.0) &&
       (*(char *)(((*(char *)(in_ECX[0x104] + 300) != '\0') - 1 & 2) * 0x30 + 0xb1 + in_ECX[0x104])
        == '\0')) goto LAB_00851d16;
  }
  else {
    iVar3 = in_ECX[0xfa];
    local_34 = 0;
    local_2c = 0;
    local_28 = 0;
    local_24 = 0;
    local_20 = 0;
    local_c = 0.0;
    local_30 = 0xbf800000;
    local_1c = *(undefined4 *)(iVar3 + 0x68);
    local_14 = *(undefined4 *)(iVar3 + 0x70);
    local_3c = 0.0;
    local_18 = *(float *)(iVar3 + 0x6c) + DAT_00d72c20;
    iVar3 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_34,local_40,&local_28,&local_c);
    FUN_007e3cb0(local_1c,local_14,&local_10,&local_5,&local_28);
    fVar4 = local_10;
    if ((iVar3 != 0) && (local_10 < local_3c)) {
      fVar4 = local_3c;
    }
    if (fVar4 + 0.1 < *(float *)(in_ECX[0xfa] + 0x6c) ||
        fVar4 + 0.1 == *(float *)(in_ECX[0xfa] + 0x6c)) goto LAB_00851d16;
  }
  *(undefined1 *)((int)in_ECX + 0x1c5d) = 1;
  iVar3 = *(int *)(in_ECX[0x4e] + 4);
LAB_00851b5c:
  (**(code **)(*(int *)(iVar3 + 0x138 + (int)in_ECX) + 0x10))(in_ECX + 0x74e,0,1,0);
  FUN_00851800();
  return;
}



============================================================
DISASSEMBLY
============================================================
008519f0 : PUSH EBP
008519f1 : MOV EBP,ESP
008519f3 : SUB ESP,0x3c
008519f6 : PUSH ESI
008519f7 : MOV ESI,ECX
008519f9 : MOV ECX,dword ptr [ESI + 0x410]
008519ff : CMP byte ptr [ECX + 0x12c],0x0
00851a06 : JZ 0x00851a11
00851a08 : MOVZX EAX,word ptr [ECX + 0xb4]
00851a0f : JMP 0x00851a18
00851a11 : MOVZX EAX,word ptr [ECX + 0x114]
00851a18 : CMP AX,0x3c
00851a1c : JZ 0x00851ca4
00851a22 : MOV EDX,0x134
00851a27 : CMP AX,DX
00851a2a : JZ 0x00851ca4
00851a30 : CMP AX,0x3d
00851a34 : JZ 0x00851c59
00851a3a : MOV EDX,0x135
00851a3f : CMP AX,DX
00851a42 : JZ 0x00851c59
00851a48 : CMP AX,0x3e
00851a4c : JZ 0x00851b7c
00851a52 : CMP AX,0x3f
00851a56 : JZ 0x00851b7c
00851a5c : MOV EDX,0x136
00851a61 : CMP AX,DX
00851a64 : JZ 0x00851b7c
00851a6a : XORPS XMM0,XMM0
00851a6d : MOV EAX,dword ptr [ESI + 0x3e8]
00851a73 : MOVSS XMM1,dword ptr [0x00cdf0d0]
00851a7b : PUSH EBX
00851a7c : PUSH EDI
00851a7d : ADD EAX,0x68
00851a80 : LEA ECX,[EBP + -0x8]
00851a83 : PUSH ECX
00851a84 : MOVSS dword ptr [EBP + -0x30],XMM0
00851a89 : MOVSS dword ptr [EBP + -0x28],XMM0
00851a8e : MOVSS dword ptr [EBP + -0x24],XMM0
00851a93 : MOVSS dword ptr [EBP + -0x20],XMM0
00851a98 : MOVSS dword ptr [EBP + -0x1c],XMM0
00851a9d : MOVSS dword ptr [EBP + -0x8],XMM0
00851aa2 : MOVSS dword ptr [EBP + -0x2c],XMM1
00851aa7 : FLD float ptr [EAX]
00851aa9 : MOVSS XMM1,dword ptr [EAX + 0x8]
00851aae : LEA EDX,[EBP + -0x24]
00851ab1 : PUSH EDX
00851ab2 : MOVSS dword ptr [EBP + -0x38],XMM0
00851ab7 : MOVSS XMM0,dword ptr [EAX + 0x4]
00851abc : FSTP float ptr [EBP + -0x18]
00851abf : MOV EAX,[0x00da93ec]
00851ac4 : MOV EAX,dword ptr [EAX + 0xc]
00851ac7 : ADDSS XMM0,dword ptr [0x00d72c20]
00851acf : LEA ECX,[EBP + -0x3c]
00851ad2 : PUSH ECX
00851ad3 : LEA EDX,[EBP + -0x30]
00851ad6 : PUSH EDX
00851ad7 : PUSH EAX
00851ad8 : LEA EDI,[EBP + -0x18]
00851adb : MOVSS dword ptr [EBP + -0x10],XMM1
00851ae0 : MOVSS dword ptr [EBP + -0x14],XMM0
00851ae5 : CALL 0x007e9d70
00851aea : FLD float ptr [EBP + -0x10]
00851aed : MOV EBX,EAX
00851aef : LEA EAX,[EBP + -0x24]
00851af2 : PUSH EAX
00851af3 : MOV EAX,[0x00da93ec]
00851af8 : MOV EDI,dword ptr [EAX + 0xc]
00851afb : LEA ECX,[EBP + -0x1]
00851afe : PUSH ECX
00851aff : LEA EDX,[EBP + -0xc]
00851b02 : PUSH EDX
00851b03 : SUB ESP,0x8
00851b06 : FSTP float ptr [ESP + 0x4]
00851b0a : FLD float ptr [EBP + -0x18]
00851b0d : FSTP float ptr [ESP]
00851b10 : CALL 0x007e3cb0
00851b15 : MOVSS XMM0,dword ptr [EBP + -0xc]
00851b1a : POP EDI
00851b1b : TEST EBX,EBX
00851b1d : POP EBX
00851b1e : JZ 0x00851b2d
00851b20 : MOVSS XMM1,dword ptr [EBP + -0x38]
00851b25 : COMISS XMM1,XMM0
00851b28 : JBE 0x00851b2d
00851b2a : MOVAPS XMM0,XMM1
00851b2d : MOV ECX,dword ptr [ESI + 0x3e8]
00851b33 : ADDSS XMM0,dword ptr [0x00cdf0f0]
00851b3b : COMISS XMM0,dword ptr [ECX + 0x6c]
00851b3f : JBE 0x00851d16
00851b45 : MOV EDX,dword ptr [ESI + 0x138]
00851b4b : MOV byte ptr [ESI + 0x1c5d],0x1
00851b52 : MOV EAX,dword ptr [EDX + 0x4]
00851b55 : LEA ECX,[EAX + ESI*0x1 + 0x138]
00851b5c : MOV EDX,dword ptr [ECX]
00851b5e : MOV EDX,dword ptr [EDX + 0x10]
00851b61 : PUSH 0x0
00851b63 : PUSH 0x1
00851b65 : PUSH 0x0
00851b67 : LEA EAX,[ESI + 0x1d38]
00851b6d : PUSH EAX
00851b6e : CALL EDX
00851b70 : MOV EAX,ESI
00851b72 : CALL 0x00851800
00851b77 : POP ESI
00851b78 : MOV ESP,EBP
00851b7a : POP EBP
00851b7b : RET
00851b7c : MOV EAX,dword ptr [ESI + 0x18a8]
00851b82 : TEST EAX,EAX
00851b84 : JZ 0x00851bc6
00851b86 : CMP byte ptr [EAX + 0x20],0x0
00851b8a : JZ 0x00851bc6
00851b8c : MOV EAX,dword ptr [ESI + 0x3e8]
00851b92 : MOV byte ptr [ESI + 0x19f0],0x0
00851b99 : TEST EAX,EAX
00851b9b : JZ 0x00851bad
00851b9d : XORPS XMM0,XMM0
00851ba0 : LEA ECX,[EBP + -0xc]
00851ba3 : MOVSS dword ptr [EBP + -0xc],XMM0
00851ba8 : CALL 0x00445530
00851bad : MOV EAX,dword ptr [ESI + 0x138]
00851bb3 : MOV byte ptr [ESI + 0x1c5d],0x1
00851bba : MOV ECX,dword ptr [EAX + 0x4]
00851bbd : LEA ECX,[ECX + ESI*0x1 + 0x138]
00851bc4 : JMP 0x00851b5c
00851bc6 : XOR EAX,EAX
00851bc8 : CMP byte ptr [ECX + 0x12c],AL
00851bce : SETZ AL
00851bd1 : LEA EAX,[EAX + EAX*0x2 + 0x9]
00851bd5 : SHL EAX,0x4
00851bd8 : CMP byte ptr [ESI + 0x19f0],0x0
00851bdf : MOVSS XMM0,dword ptr [EAX + ECX*0x1]
00851be4 : MOVSS dword ptr [EBP + -0x8],XMM0
00851be9 : JZ 0x00851c1e
00851beb : CVTPS2PD XMM1,XMM0
00851bee : COMISD XMM1,qword ptr [0x00cdf7e8]
00851bf6 : JC 0x00851c1e
00851bf8 : MOV EAX,dword ptr [ESI + 0x3e8]
00851bfe : MOV byte ptr [ESI + 0x19f0],0x0
00851c05 : TEST EAX,EAX
00851c07 : JZ 0x00851c1e
00851c09 : XORPS XMM0,XMM0
00851c0c : LEA ECX,[EBP + -0xc]
00851c0f : MOVSS dword ptr [EBP + -0xc],XMM0
00851c14 : CALL 0x00445530
00851c19 : MOVSS XMM0,dword ptr [EBP + -0x8]
00851c1e : COMISS XMM0,dword ptr [0x00cdf15c]
00851c25 : JA 0x00851b45
00851c2b : MOV EAX,dword ptr [ESI + 0x410]
00851c31 : XOR ECX,ECX
00851c33 : CMP byte ptr [EAX + 0x12c],CL
00851c39 : SETNZ CL
00851c3c : DEC ECX
00851c3d : AND ECX,0x2
00851c40 : LEA ECX,[ECX + ECX*0x2]
00851c43 : SHL ECX,0x4
00851c46 : CMP byte ptr [ECX + EAX*0x1 + 0xb1],0x0
00851c4e : JZ 0x00851d16
00851c54 : JMP 0x00851b45
00851c59 : MOV ECX,ESI
00851c5b : CALL 0x00851480
00851c60 : TEST AL,AL
00851c62 : JZ 0x00851d16
00851c68 : FLD1
00851c6a : MOV EAX,dword ptr [ESI]
00851c6c : MOV EDX,dword ptr [EAX + 0x188]
00851c72 : PUSH ECX
00851c73 : FSTP float ptr [ESP]
00851c76 : PUSH 0x0
00851c78 : PUSH 0x0
00851c7a : PUSH 0x0
00851c7c : PUSH 0x0
00851c7e : PUSH 0x3e
00851c80 : MOV ECX,ESI
00851c82 : CALL EDX
00851c84 : MOV EAX,dword ptr [ESI]
00851c86 : MOV EDX,dword ptr [EAX + 0x254]
00851c8c : PUSH 0x2
00851c8e : LEA ECX,[ESI + 0x4]
00851c91 : PUSH ECX
00851c92 : PUSH 0x1
00851c94 : MOV ECX,ESI
00851c96 : CALL EDX
00851c98 : MOV EAX,ESI
00851c9a : CALL 0x00851800
00851c9f : POP ESI
00851ca0 : MOV ESP,EBP
00851ca2 : POP EBP
00851ca3 : RET
00851ca4 : CALL 0x00850340
00851ca9 : MOV ECX,ESI
00851cab : MOV byte ptr [ESI + 0x19f0],0x1
00851cb2 : CALL 0x00851480
00851cb7 : TEST AL,AL
00851cb9 : JNZ 0x00851c68
00851cbb : MOV EAX,dword ptr [ESI + 0x18a8]
00851cc1 : TEST EAX,EAX
00851cc3 : JZ 0x00851cd5
00851cc5 : CMP byte ptr [EAX + 0x20],0x0
00851cc9 : JZ 0x00851cd5
00851ccb : MOV EAX,dword ptr [EAX + 0x9c]
00851cd1 : TEST EAX,EAX
00851cd3 : JNZ 0x00851cdb
00851cd5 : MOV EAX,dword ptr [ESI + 0x410]
00851cdb : XOR ECX,ECX
00851cdd : CMP byte ptr [EAX + 0x12c],CL
00851ce3 : SETNZ CL
00851ce6 : DEC ECX
00851ce7 : AND ECX,0x2
00851cea : LEA ECX,[ECX + ECX*0x2]
00851ced : SHL ECX,0x4
00851cf0 : CMP byte ptr [ECX + EAX*0x1 + 0xb1],0x0
00851cf8 : JZ 0x00851d16
00851cfa : FLD1
00851cfc : MOV EDX,dword ptr [ESI]
00851cfe : MOV EAX,dword ptr [EDX + 0x188]
00851d04 : PUSH ECX
00851d05 : FSTP float ptr [ESP]
00851d08 : PUSH 0x0
00851d0a : PUSH 0x0
00851d0c : PUSH 0x0
00851d0e : PUSH 0x1
00851d10 : PUSH 0x3d
00851d12 : MOV ECX,ESI
00851d14 : CALL EAX
00851d16 : MOV EAX,ESI
00851d18 : CALL 0x00851800
00851d1d : POP ESI
00851d1e : MOV ESP,EBP
00851d20 : POP EBP
00851d21 : RET
