PROGRAM  : Maestia.exe
FUNCTION : FUN_00a27f40
ENTRY    : 00a27f40
BODY     : [[00a27f40, 00a28268]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a27f40(undefined4 param_1,int *param_2,int param_3,int param_4)

{
  code *pcVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  undefined4 in_ECX;
  uint uVar5;
  int in_EDX;
  int *piVar6;
  float10 fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  int *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b393d6;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34 = param_2;
  local_38 = FUN_00a1a840(param_1);
  if ((local_38 == 0) && (local_38 = FUN_00a1a6d0(param_1), local_38 == 0)) {
    local_38 = FUN_00a1a780(param_1);
  }
  iVar3 = FUN_00a1a840(in_ECX);
  if ((iVar3 == 0) && (iVar3 = FUN_00a1a6d0(in_ECX), iVar3 == 0)) {
    iVar3 = FUN_00a1a780(in_ECX);
  }
  if (local_38 != 0) {
    if ((((*(char *)(DAT_00da93ec + 0x464) != '\0') && (iVar3 = FUN_00a1a620(in_ECX), iVar3 == 0))
        && (iVar3 = FUN_00a1a840(in_ECX), iVar3 == 0)) && (iVar3 = FUN_00a1a6d0(in_ECX), iVar3 == 0)
       ) {
      iVar3 = FUN_00a1a780(in_ECX);
    }
    *(short *)(in_EDX + 0x5ea) = *(short *)(in_EDX + 0x5ea) + 1;
    FUN_00404750(L"AutoRootObj_%d_%d");
    piVar6 = (int *)0x0;
    local_8 = 0;
    if (60000 < *(ushort *)(in_EDX + 0x5ea)) {
      *(undefined2 *)(in_EDX + 0x5ea) = 0;
    }
    iVar4 = FUN_006f0760(0xf0,".\\Flow\\AvaGameZone.cpp",0x11d4,0);
    local_8._0_1_ = 1;
    if (iVar4 != 0) {
      piVar6 = (int *)FUN_00878490(iVar4);
    }
    local_8 = (uint)local_8._1_3_ << 8;
    local_44 = 0x3f800000;
    local_40 = 0x3f800000;
    local_3c = 0x3f800000;
    local_60 = 0;
    local_5c = 0;
    local_58 = 0;
    local_54 = 0x3f800000;
    local_50 = 0;
    local_4c = 0;
    local_48 = 0;
    iVar4 = (**(code **)(**(int **)(in_EDX + 0x164) + 0x20))(local_30,&local_50,&local_60,&local_44)
    ;
    piVar6[0x12] = iVar4;
    if (iVar4 != 0) {
      FUN_00878340(piVar6);
    }
    piVar6[0xb] = 0;
    fVar8 = *(float *)(local_38 + 0x1a4) - *(float *)(iVar3 + 0x1a4);
    fVar9 = *(float *)(local_38 + 0x1a8) - *(float *)(iVar3 + 0x1a8);
    fVar10 = *(float *)(local_38 + 0x1ac) - *(float *)(iVar3 + 0x1ac);
    fVar7 = (float10)FUN_0040f460(fVar8 * fVar8 + fVar9 * fVar9 + fVar10 * fVar10);
    iVar4 = DAT_017251cc;
    local_34 = (int *)(float)fVar7;
    *(undefined1 *)(piVar6 + 0xc) = 1;
    fVar8 = (float)piVar6[1];
    if (0.0 < *(float *)(iVar4 + 0x34)) {
      fVar8 = *(float *)(iVar4 + 0x34);
    }
    pcVar1 = *(code **)(*piVar6 + 0xc);
    fVar8 = (float)local_34 / (fVar8 * 1000.0);
    piVar6[0xd] = param_3;
    piVar6[0xe] = param_3;
    fVar9 = fVar8 * DAT_00d72c24;
    piVar6[0x10] = (int)fVar8;
    piVar6[0x33] = param_4;
    piVar6[0xf] = (int)fVar9;
    piVar6[0x34] = 0x3f800000;
    *(undefined1 *)(piVar6 + 0x35) = 0;
    (*pcVar1)(iVar3);
    iVar3 = *(int *)(in_EDX + 0x180);
    if (iVar3 == 0) {
      uVar5 = 0;
    }
    else {
      uVar5 = *(int *)(in_EDX + 0x188) - iVar3 >> 2;
    }
    puVar2 = *(undefined4 **)(in_EDX + 0x184);
    local_34 = piVar6;
    if ((uint)((int)puVar2 - iVar3 >> 2) < uVar5) {
      *puVar2 = piVar6;
      *(undefined4 **)(in_EDX + 0x184) = puVar2 + 1;
    }
    else {
      FUN_0042fe80(in_EDX + 0x17c,puVar2,&local_34);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a27f40 : PUSH EBP
00a27f41 : MOV EBP,ESP
00a27f43 : PUSH -0x1
00a27f45 : PUSH 0xb393d6
00a27f4a : MOV EAX,FS:[0x0]
00a27f50 : PUSH EAX
00a27f51 : SUB ESP,0x54
00a27f54 : MOV EAX,[0x00d66fa0]
00a27f59 : XOR EAX,EBP
00a27f5b : MOV dword ptr [EBP + -0x10],EAX
00a27f5e : PUSH EBX
00a27f5f : PUSH ESI
00a27f60 : PUSH EDI
00a27f61 : PUSH EAX
00a27f62 : LEA EAX,[EBP + -0xc]
00a27f65 : MOV FS:[0x0],EAX
00a27f6b : MOV ESI,ECX
00a27f6d : MOV EAX,dword ptr [EBP + 0xc]
00a27f70 : MOV EBX,dword ptr [EBP + 0x8]
00a27f73 : MOV EDI,EDX
00a27f75 : PUSH EBX
00a27f76 : MOV ECX,EDI
00a27f78 : MOV dword ptr [EBP + -0x30],EAX
00a27f7b : CALL 0x00a1a840
00a27f80 : MOV dword ptr [EBP + -0x34],EAX
00a27f83 : TEST EAX,EAX
00a27f85 : JNZ 0x00a27fa1
00a27f87 : PUSH EBX
00a27f88 : MOV ECX,EDI
00a27f8a : CALL 0x00a1a6d0
00a27f8f : MOV dword ptr [EBP + -0x34],EAX
00a27f92 : TEST EAX,EAX
00a27f94 : JNZ 0x00a27fa1
00a27f96 : PUSH EBX
00a27f97 : MOV ECX,EDI
00a27f99 : CALL 0x00a1a780
00a27f9e : MOV dword ptr [EBP + -0x34],EAX
00a27fa1 : PUSH ESI
00a27fa2 : MOV ECX,EDI
00a27fa4 : CALL 0x00a1a840
00a27fa9 : TEST EAX,EAX
00a27fab : JNZ 0x00a27fc1
00a27fad : PUSH ESI
00a27fae : MOV ECX,EDI
00a27fb0 : CALL 0x00a1a6d0
00a27fb5 : TEST EAX,EAX
00a27fb7 : JNZ 0x00a27fc1
00a27fb9 : PUSH ESI
00a27fba : MOV ECX,EDI
00a27fbc : CALL 0x00a1a780
00a27fc1 : CMP dword ptr [EBP + -0x34],0x0
00a27fc5 : MOV EBX,EAX
00a27fc7 : JNZ 0x00a27fd0
00a27fc9 : XOR EAX,EAX
00a27fcb : JMP 0x00a2824b
00a27fd0 : MOV ECX,dword ptr [0x00da93ec]
00a27fd6 : CMP byte ptr [ECX + 0x464],0x0
00a27fdd : JZ 0x00a2800d
00a27fdf : PUSH ESI
00a27fe0 : CALL 0x00a1a620
00a27fe5 : MOV EBX,EAX
00a27fe7 : TEST EBX,EBX
00a27fe9 : JNZ 0x00a2800d
00a27feb : PUSH ESI
00a27fec : MOV ECX,EDI
00a27fee : CALL 0x00a1a840
00a27ff3 : TEST EAX,EAX
00a27ff5 : JNZ 0x00a2800b
00a27ff7 : PUSH ESI
00a27ff8 : MOV ECX,EDI
00a27ffa : CALL 0x00a1a6d0
00a27fff : TEST EAX,EAX
00a28001 : JNZ 0x00a2800b
00a28003 : PUSH ESI
00a28004 : MOV ECX,EDI
00a28006 : CALL 0x00a1a780
00a2800b : MOV EBX,EAX
00a2800d : INC word ptr [EDI + 0x5ea]
00a28014 : MOVZX EAX,word ptr [EDI + 0x5ea]
00a2801b : MOVZX ECX,AX
00a2801e : PUSH ECX
00a2801f : PUSH ESI
00a28020 : PUSH 0xcc071c
00a28025 : LEA ESI,[EBP + -0x2c]
00a28028 : CALL 0x00404750
00a2802d : ADD ESP,0xc
00a28030 : XOR ESI,ESI
00a28032 : MOV dword ptr [EBP + -0x4],ESI
00a28035 : MOV EDX,0xea60
00a2803a : CMP word ptr [EDI + 0x5ea],DX
00a28041 : JBE 0x00a2804c
00a28043 : XOR EAX,EAX
00a28045 : MOV word ptr [EDI + 0x5ea],AX
00a2804c : PUSH ESI
00a2804d : PUSH 0x11d4
00a28052 : PUSH 0xcc0740
00a28057 : PUSH 0xf0
00a2805c : CALL 0x006f0760
00a28061 : ADD ESP,0x10
00a28064 : MOV dword ptr [EBP + -0x60],EAX
00a28067 : MOV byte ptr [EBP + -0x4],0x1
00a2806b : CMP EAX,ESI
00a2806d : JZ 0x00a28077
00a2806f : PUSH EAX
00a28070 : CALL 0x00878490
00a28075 : MOV ESI,EAX
00a28077 : MOV byte ptr [EBP + -0x4],0x0
00a2807b : XORPS XMM0,XMM0
00a2807e : MOVSS XMM1,dword ptr [0x00c10fc4]
00a28086 : MOV ECX,dword ptr [EDI + 0x164]
00a2808c : LEA EAX,[EBP + -0x40]
00a2808f : PUSH EAX
00a28090 : LEA EAX,[EBP + -0x5c]
00a28093 : PUSH EAX
00a28094 : LEA EAX,[EBP + -0x4c]
00a28097 : PUSH EAX
00a28098 : MOVSS dword ptr [EBP + -0x40],XMM1
00a2809d : MOVSS dword ptr [EBP + -0x3c],XMM1
00a280a2 : MOVSS dword ptr [EBP + -0x38],XMM1
00a280a7 : MOVSS dword ptr [EBP + -0x5c],XMM0
00a280ac : MOVSS dword ptr [EBP + -0x58],XMM0
00a280b1 : MOVSS dword ptr [EBP + -0x54],XMM0
00a280b6 : MOVSS dword ptr [EBP + -0x50],XMM1
00a280bb : MOVSS dword ptr [EBP + -0x4c],XMM0
00a280c0 : MOVSS dword ptr [EBP + -0x48],XMM0
00a280c5 : MOVSS dword ptr [EBP + -0x44],XMM0
00a280ca : MOV EDX,dword ptr [ECX]
00a280cc : MOV EDX,dword ptr [EDX + 0x20]
00a280cf : LEA EAX,[EBP + -0x2c]
00a280d2 : PUSH EAX
00a280d3 : CALL EDX
00a280d5 : MOV dword ptr [ESI + 0x48],EAX
00a280d8 : TEST EAX,EAX
00a280da : JZ 0x00a280e8
00a280dc : MOV EAX,dword ptr [EBP + 0x8]
00a280df : MOV ECX,dword ptr [EBP + -0x30]
00a280e2 : PUSH ESI
00a280e3 : CALL 0x00878340
00a280e8 : MOV EAX,dword ptr [EBP + -0x34]
00a280eb : MOV dword ptr [ESI + 0x2c],0x0
00a280f2 : MOVSS XMM3,dword ptr [EBX + 0x1a4]
00a280fa : MOVSS XMM0,dword ptr [EAX + 0x1a4]
00a28102 : MOVSS XMM4,dword ptr [EBX + 0x1a8]
00a2810a : MOVSS XMM1,dword ptr [EAX + 0x1a8]
00a28112 : MOVSS XMM5,dword ptr [EBX + 0x1ac]
00a2811a : MOVSS XMM2,dword ptr [EAX + 0x1ac]
00a28122 : SUBSS XMM0,XMM3
00a28126 : MOVAPS XMM3,XMM0
00a28129 : MULSS XMM3,XMM0
00a2812d : SUBSS XMM1,XMM4
00a28131 : MOVAPS XMM0,XMM1
00a28134 : MULSS XMM0,XMM1
00a28138 : ADDSS XMM3,XMM0
00a2813c : SUBSS XMM2,XMM5
00a28140 : MOVAPS XMM0,XMM2
00a28143 : MULSS XMM0,XMM2
00a28147 : PUSH ECX
00a28148 : ADDSS XMM3,XMM0
00a2814c : MOVSS dword ptr [ESP],XMM3
00a28151 : CALL 0x0040f460
00a28156 : FSTP float ptr [EBP + -0x30]
00a28159 : MOV EAX,[0x017251cc]
00a2815e : MOV byte ptr [ESI + 0x30],0x1
00a28162 : MOVSS XMM0,dword ptr [EAX + 0x34]
00a28167 : MOVSS XMM1,dword ptr [ESI + 0x4]
00a2816c : ADD ESP,0x4
00a2816f : COMISS XMM0,dword ptr [0x00b9b0b4]
00a28176 : JBE 0x00a2817b
00a28178 : MOVAPS XMM1,XMM0
00a2817b : MULSS XMM1,dword ptr [0x00cdf16c]
00a28183 : MOVSS XMM0,dword ptr [EBP + -0x30]
00a28188 : MOV EDX,dword ptr [ESI]
00a2818a : MOV EAX,dword ptr [EDX + 0xc]
00a2818d : DIVSS XMM0,XMM1
00a28191 : MOVSS XMM1,dword ptr [EBP + 0x10]
00a28196 : MOVSS dword ptr [ESI + 0x34],XMM1
00a2819b : MOVSS dword ptr [ESI + 0x38],XMM1
00a281a0 : MOVAPS XMM1,XMM0
00a281a3 : MULSS XMM1,dword ptr [0x00d72c24]
00a281ab : MOVSS dword ptr [ESI + 0x40],XMM0
00a281b0 : MOVSS XMM0,dword ptr [EBP + 0x14]
00a281b5 : MOVSS dword ptr [ESI + 0xcc],XMM0
00a281bd : MOVSS XMM0,dword ptr [0x00c10fc4]
00a281c5 : PUSH EBX
00a281c6 : MOV ECX,ESI
00a281c8 : MOVSS dword ptr [ESI + 0x3c],XMM1
00a281cd : MOVSS dword ptr [ESI + 0xd0],XMM0
00a281d5 : MOV byte ptr [ESI + 0xd4],0x0
00a281dc : CALL EAX
00a281de : MOV EDX,dword ptr [EDI + 0x180]
00a281e4 : LEA EAX,[EDI + 0x17c]
00a281ea : MOV dword ptr [EBP + -0x30],ESI
00a281ed : TEST EDX,EDX
00a281ef : JNZ 0x00a281f5
00a281f1 : XOR ECX,ECX
00a281f3 : JMP 0x00a281fd
00a281f5 : MOV ECX,dword ptr [EAX + 0xc]
00a281f8 : SUB ECX,EDX
00a281fa : SAR ECX,0x2
00a281fd : MOV EDI,dword ptr [EAX + 0x8]
00a28200 : MOV EBX,EDI
00a28202 : SUB EBX,EDX
00a28204 : SAR EBX,0x2
00a28207 : CMP EBX,ECX
00a28209 : JNC 0x00a28215
00a2820b : MOV dword ptr [EDI],ESI
00a2820d : ADD EDI,0x4
00a28210 : MOV dword ptr [EAX + 0x8],EDI
00a28213 : JMP 0x00a28220
00a28215 : LEA ECX,[EBP + -0x30]
00a28218 : PUSH ECX
00a28219 : PUSH EDI
00a2821a : PUSH EAX
00a2821b : CALL 0x0042fe80
00a28220 : MOV dword ptr [EBP + -0x4],0xffffffff
00a28227 : CMP dword ptr [EBP + -0x14],0x8
00a2822b : JC 0x00a28235
00a2822d : MOV ECX,dword ptr [EBP + -0x28]
00a28230 : CALL 0x006f04e0
00a28235 : XOR EDX,EDX
00a28237 : MOV dword ptr [EBP + -0x14],0x7
00a2823e : MOV dword ptr [EBP + -0x18],0x0
00a28245 : MOV word ptr [EBP + -0x28],DX
00a28249 : MOV EAX,ESI
00a2824b : MOV ECX,dword ptr [EBP + -0xc]
00a2824e : MOV dword ptr FS:[0x0],ECX
00a28255 : POP ECX
00a28256 : POP EDI
00a28257 : POP ESI
00a28258 : POP EBX
00a28259 : MOV ECX,dword ptr [EBP + -0x10]
00a2825c : XOR ECX,EBP
00a2825e : CALL 0x00633e6b
00a28263 : MOV ESP,EBP
00a28265 : POP EBP
00a28266 : RET 0x10
