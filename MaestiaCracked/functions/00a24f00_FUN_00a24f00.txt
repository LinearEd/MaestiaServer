PROGRAM  : Maestia.exe
FUNCTION : FUN_00a24f00
ENTRY    : 00a24f00
BODY     : [[00a24f00, 00a252a4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a24f00(int *param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  code *pcVar7;
  undefined1 local_48 [28];
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2ff24;
  local_10 = ExceptionList;
  iVar6 = param_1[0x2b];
  iVar1 = *(int *)(param_2 + 4);
  if (iVar1 == *(int *)(iVar6 + 4)) {
    iVar5 = *(int *)(param_2 + 0xd);
    switch(*(undefined1 *)(param_2 + 0xc)) {
    case 0xc9:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0x44))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xca:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0x48))(iVar5,iVar1,*(undefined4 *)(iVar6 + 0x1ecc));
      ExceptionList = local_10;
      return;
    case 0xcb:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0x2c))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xcc:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0x58))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xcf:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0x9c))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xd0:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0xa0))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xd2:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0xa8))(iVar5,iVar1);
      ExceptionList = local_10;
      return;
    case 0xd3:
      if (iVar6 != 0) {
        *(int *)(iVar6 + 0x1a54) = iVar5;
        return;
      }
      break;
    case 0xd4:
      ExceptionList = &local_10;
      *(int *)(iVar6 + 0x1f28) = iVar5;
      FUN_00a96790(iVar5,1);
      FUN_009bc930();
      piVar2 = (int *)param_1[0x2b];
      uVar3 = (**(code **)(*piVar2 + 0x464))();
      uVar4 = (**(code **)(*piVar2 + 0x46c))(uVar3);
      (**(code **)(*piVar2 + 0x468))(uVar4);
      FUN_009c03f0(uVar4,uVar3);
      ExceptionList = local_10;
      return;
    case 0xd5:
      ExceptionList = &local_10;
      if (iVar6 != 0) {
        iVar5 = iVar5 - *(int *)(iVar6 + 0x1f38);
        if (0 < iVar5) {
          FUN_00406460(L"IDS_ZONE_GETMILEAGE");
          local_8 = 0;
          iVar6 = FUN_0081d120(local_48);
          local_8._0_1_ = 1;
          if (*(uint *)(iVar6 + 0x18) < 8) {
            iVar6 = iVar6 + 4;
          }
          else {
            iVar6 = *(int *)(iVar6 + 4);
          }
          iVar6 = FUN_00404750(iVar6,iVar5);
          local_8._0_1_ = 2;
          if (*(uint *)(iVar6 + 0x18) < 8) {
            iVar6 = iVar6 + 4;
          }
          else {
            iVar6 = *(int *)(iVar6 + 4);
          }
          FUN_00406460(iVar6);
          local_8._0_1_ = 3;
          (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_2c,4);
          local_8._0_1_ = 2;
          FUN_00406560();
          local_8._0_1_ = 1;
          FUN_00406560();
          local_8 = (uint)local_8._1_3_ << 8;
          FUN_00406560();
          local_8 = 0xffffffff;
          FUN_00406560();
        }
        *(undefined4 *)(param_1[0x2b] + 0x1f38) = *(undefined4 *)(param_2 + 0xd);
      }
      if (*DAT_00da9894 != 0) {
        if (*(int *)(*DAT_00da9894 + 0x1d4) != 0) {
          FUN_008dae40(*(undefined4 *)(param_2 + 0xd));
        }
        if (*(int *)(*DAT_00da9894 + 0x130) != 0) {
          FUN_00a96530();
          ExceptionList = local_10;
          return;
        }
      }
      break;
    case 0xd6:
      DAT_00d7cd60 = iVar5;
      return;
    case 0xd8:
      ExceptionList = &local_10;
      (**(code **)(*param_1 + 0xc4))(iVar5,iVar1,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
      ExceptionList = local_10;
      return;
    }
  }
  else {
    ExceptionList = &local_10;
    iVar6 = FUN_00a1a840(iVar1);
    if (iVar6 != 0) {
      if (*(char *)(param_2 + 0xc) == -0x35) {
        pcVar7 = *(code **)(*param_1 + 0x2c);
      }
      else {
        if (*(char *)(param_2 + 0xc) != -0x30) {
          ExceptionList = local_10;
          return;
        }
        pcVar7 = *(code **)(*param_1 + 0xa0);
      }
      (*pcVar7)(*(undefined4 *)(param_2 + 0xd),*(undefined4 *)(param_2 + 4));
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a24f00 : PUSH EBP
00a24f01 : MOV EBP,ESP
00a24f03 : PUSH -0x1
00a24f05 : PUSH 0xb2ff24
00a24f0a : MOV EAX,FS:[0x0]
00a24f10 : PUSH EAX
00a24f11 : SUB ESP,0x74
00a24f14 : PUSH EBX
00a24f15 : PUSH ESI
00a24f16 : PUSH EDI
00a24f17 : MOV EAX,[0x00d66fa0]
00a24f1c : XOR EAX,EBP
00a24f1e : PUSH EAX
00a24f1f : LEA EAX,[EBP + -0xc]
00a24f22 : MOV FS:[0x0],EAX
00a24f28 : MOV EBX,dword ptr [EBP + 0x8]
00a24f2b : MOV EDX,dword ptr [EBX + 0xac]
00a24f31 : MOV EDI,dword ptr [EBP + 0xc]
00a24f34 : MOV EAX,dword ptr [EDX + 0x4]
00a24f37 : MOV ECX,dword ptr [EDI + 0x4]
00a24f3a : CMP ECX,EAX
00a24f3c : JNZ 0x00a25259
00a24f42 : MOVZX ESI,byte ptr [EDI + 0xc]
00a24f46 : MOV EAX,dword ptr [EDI + 0xd]
00a24f49 : ADD ESI,0xffffff37
00a24f4f : CMP ESI,0xf
00a24f52 : JA 0x00a25291
00a24f58 : JMP dword ptr [ESI*0x4 + 0xa252a8]
00a24f5f : MOV EDX,dword ptr [EBX]
00a24f61 : PUSH ECX
00a24f62 : PUSH EAX
00a24f63 : MOV EAX,dword ptr [EDX + 0x2c]
00a24f66 : MOV ECX,EBX
00a24f68 : CALL EAX
00a24f6a : MOV ECX,dword ptr [EBP + -0xc]
00a24f6d : MOV dword ptr FS:[0x0],ECX
00a24f74 : POP ECX
00a24f75 : POP EDI
00a24f76 : POP ESI
00a24f77 : POP EBX
00a24f78 : MOV ESP,EBP
00a24f7a : POP EBP
00a24f7b : RET 0x8
00a24f7e : MOV EDX,dword ptr [EBX]
00a24f80 : PUSH ECX
00a24f81 : PUSH EAX
00a24f82 : MOV EAX,dword ptr [EDX + 0x44]
00a24f85 : MOV ECX,EBX
00a24f87 : CALL EAX
00a24f89 : MOV ECX,dword ptr [EBP + -0xc]
00a24f8c : MOV dword ptr FS:[0x0],ECX
00a24f93 : POP ECX
00a24f94 : POP EDI
00a24f95 : POP ESI
00a24f96 : POP EBX
00a24f97 : MOV ESP,EBP
00a24f99 : POP EBP
00a24f9a : RET 0x8
00a24f9d : MOV EDX,dword ptr [EDX + 0x1ecc]
00a24fa3 : MOV ESI,dword ptr [EBX]
00a24fa5 : PUSH EDX
00a24fa6 : PUSH ECX
00a24fa7 : PUSH EAX
00a24fa8 : MOV EAX,dword ptr [ESI + 0x48]
00a24fab : MOV ECX,EBX
00a24fad : CALL EAX
00a24faf : MOV ECX,dword ptr [EBP + -0xc]
00a24fb2 : MOV dword ptr FS:[0x0],ECX
00a24fb9 : POP ECX
00a24fba : POP EDI
00a24fbb : POP ESI
00a24fbc : POP EBX
00a24fbd : MOV ESP,EBP
00a24fbf : POP EBP
00a24fc0 : RET 0x8
00a24fc3 : MOV EDX,dword ptr [EBX]
00a24fc5 : PUSH ECX
00a24fc6 : PUSH EAX
00a24fc7 : MOV EAX,dword ptr [EDX + 0x58]
00a24fca : MOV ECX,EBX
00a24fcc : CALL EAX
00a24fce : MOV ECX,dword ptr [EBP + -0xc]
00a24fd1 : MOV dword ptr FS:[0x0],ECX
00a24fd8 : POP ECX
00a24fd9 : POP EDI
00a24fda : POP ESI
00a24fdb : POP EBX
00a24fdc : MOV ESP,EBP
00a24fde : POP EBP
00a24fdf : RET 0x8
00a24fe2 : MOV EDX,dword ptr [EBX]
00a24fe4 : PUSH ECX
00a24fe5 : PUSH EAX
00a24fe6 : MOV EAX,dword ptr [EDX + 0x9c]
00a24fec : MOV ECX,EBX
00a24fee : CALL EAX
00a24ff0 : MOV ECX,dword ptr [EBP + -0xc]
00a24ff3 : MOV dword ptr FS:[0x0],ECX
00a24ffa : POP ECX
00a24ffb : POP EDI
00a24ffc : POP ESI
00a24ffd : POP EBX
00a24ffe : MOV ESP,EBP
00a25000 : POP EBP
00a25001 : RET 0x8
00a25004 : MOV EDX,dword ptr [EBX]
00a25006 : PUSH ECX
00a25007 : PUSH EAX
00a25008 : MOV EAX,dword ptr [EDX + 0xa0]
00a2500e : MOV ECX,EBX
00a25010 : CALL EAX
00a25012 : MOV ECX,dword ptr [EBP + -0xc]
00a25015 : MOV dword ptr FS:[0x0],ECX
00a2501c : POP ECX
00a2501d : POP EDI
00a2501e : POP ESI
00a2501f : POP EBX
00a25020 : MOV ESP,EBP
00a25022 : POP EBP
00a25023 : RET 0x8
00a25026 : MOV EDX,dword ptr [EBX]
00a25028 : PUSH ECX
00a25029 : PUSH EAX
00a2502a : MOV EAX,dword ptr [EDX + 0xa8]
00a25030 : MOV ECX,EBX
00a25032 : CALL EAX
00a25034 : MOV ECX,dword ptr [EBP + -0xc]
00a25037 : MOV dword ptr FS:[0x0],ECX
00a2503e : POP ECX
00a2503f : POP EDI
00a25040 : POP ESI
00a25041 : POP EBX
00a25042 : MOV ESP,EBP
00a25044 : POP EBP
00a25045 : RET 0x8
00a25048 : TEST EDX,EDX
00a2504a : JZ 0x00a25291
00a25050 : MOV dword ptr [EDX + 0x1a54],EAX
00a25056 : MOV ECX,dword ptr [EBP + -0xc]
00a25059 : MOV dword ptr FS:[0x0],ECX
00a25060 : POP ECX
00a25061 : POP EDI
00a25062 : POP ESI
00a25063 : POP EBX
00a25064 : MOV ESP,EBP
00a25066 : POP EBP
00a25067 : RET 0x8
00a2506a : PUSH 0x1
00a2506c : PUSH EAX
00a2506d : MOV dword ptr [EDX + 0x1f28],EAX
00a25073 : CALL 0x00a96790
00a25078 : MOV ECX,dword ptr [0x00da9894]
00a2507e : MOV EDX,dword ptr [ECX]
00a25080 : MOV EAX,dword ptr [EDX + 0x24c]
00a25086 : CALL 0x009bc930
00a2508b : MOV EAX,[0x00da9894]
00a25090 : MOV ECX,dword ptr [EAX]
00a25092 : MOV EDX,dword ptr [ECX + 0x140]
00a25098 : MOV ECX,dword ptr [EBX + 0xac]
00a2509e : MOV EAX,dword ptr [ECX]
00a250a0 : MOV EDI,dword ptr [EDX + 0x38]
00a250a3 : MOV EDX,dword ptr [EAX + 0x464]
00a250a9 : MOV ESI,ECX
00a250ab : MOV EBX,ECX
00a250ad : CALL EDX
00a250af : PUSH EAX
00a250b0 : MOV EAX,dword ptr [ESI]
00a250b2 : MOV EDX,dword ptr [EAX + 0x46c]
00a250b8 : MOV ECX,ESI
00a250ba : CALL EDX
00a250bc : PUSH EAX
00a250bd : MOV EAX,dword ptr [EBX]
00a250bf : MOV EDX,dword ptr [EAX + 0x468]
00a250c5 : MOV ECX,EBX
00a250c7 : CALL EDX
00a250c9 : LEA ECX,[EDI + 0x38]
00a250cc : MOV EDX,EAX
00a250ce : MOV EAX,ECX
00a250d0 : CALL 0x009c03f0
00a250d5 : MOV ECX,dword ptr [EBP + -0xc]
00a250d8 : MOV dword ptr FS:[0x0],ECX
00a250df : POP ECX
00a250e0 : POP EDI
00a250e1 : POP ESI
00a250e2 : POP EBX
00a250e3 : MOV ESP,EBP
00a250e5 : POP EBP
00a250e6 : RET 0x8
00a250e9 : TEST EDX,EDX
00a250eb : JZ 0x00a251c7
00a250f1 : SUB EAX,dword ptr [EDX + 0x1f38]
00a250f7 : MOV ESI,EAX
00a250f9 : TEST ESI,ESI
00a250fb : JLE 0x00a251b8
00a25101 : PUSH 0xcc324c
00a25106 : LEA ECX,[EBP + -0x44]
00a25109 : CALL 0x00406460
00a2510e : MOV dword ptr [EBP + -0x4],0x0
00a25115 : MOV ECX,dword ptr [0x0172491c]
00a2511b : LEA EDX,[EBP + -0x44]
00a2511e : PUSH EDX
00a2511f : LEA EDI,[EBP + -0x7c]
00a25122 : CALL 0x0081d120
00a25127 : MOV byte ptr [EBP + -0x4],0x1
00a2512b : MOV EDI,0x8
00a25130 : CMP dword ptr [EAX + 0x18],EDI
00a25133 : JC 0x00a2513a
00a25135 : MOV EAX,dword ptr [EAX + 0x4]
00a25138 : JMP 0x00a2513d
00a2513a : ADD EAX,0x4
00a2513d : PUSH ESI
00a2513e : PUSH EAX
00a2513f : LEA ESI,[EBP + -0x60]
00a25142 : CALL 0x00404750
00a25147 : ADD ESP,0x8
00a2514a : MOV byte ptr [EBP + -0x4],0x2
00a2514e : CMP dword ptr [EAX + 0x18],EDI
00a25151 : JC 0x00a25158
00a25153 : MOV EAX,dword ptr [EAX + 0x4]
00a25156 : JMP 0x00a2515b
00a25158 : ADD EAX,0x4
00a2515b : PUSH EAX
00a2515c : LEA ECX,[EBP + -0x28]
00a2515f : CALL 0x00406460
00a25164 : MOV byte ptr [EBP + -0x4],0x3
00a25168 : MOV EAX,[0x00da9894]
00a2516d : MOV EAX,dword ptr [EAX]
00a2516f : MOV ECX,dword ptr [EAX + 0x1a8]
00a25175 : MOV EDX,dword ptr [ECX]
00a25177 : MOV EDX,dword ptr [EDX + 0x44]
00a2517a : PUSH 0x4
00a2517c : LEA EAX,[EBP + -0x28]
00a2517f : PUSH EAX
00a25180 : CALL EDX
00a25182 : MOV byte ptr [EBP + -0x4],0x2
00a25186 : LEA ECX,[EBP + -0x28]
00a25189 : CALL 0x00406560
00a2518e : MOV byte ptr [EBP + -0x4],0x1
00a25192 : LEA ECX,[EBP + -0x60]
00a25195 : CALL 0x00406560
00a2519a : MOV byte ptr [EBP + -0x4],0x0
00a2519e : LEA ECX,[EBP + -0x7c]
00a251a1 : CALL 0x00406560
00a251a6 : MOV dword ptr [EBP + -0x4],0xffffffff
00a251ad : LEA ECX,[EBP + -0x44]
00a251b0 : CALL 0x00406560
00a251b5 : MOV EDI,dword ptr [EBP + 0xc]
00a251b8 : MOV EAX,dword ptr [EBX + 0xac]
00a251be : MOV ECX,dword ptr [EDI + 0xd]
00a251c1 : MOV dword ptr [EAX + 0x1f38],ECX
00a251c7 : MOV EDX,dword ptr [0x00da9894]
00a251cd : MOV EAX,dword ptr [EDX]
00a251cf : TEST EAX,EAX
00a251d1 : JZ 0x00a25291
00a251d7 : MOV ESI,dword ptr [EAX + 0x1d4]
00a251dd : TEST ESI,ESI
00a251df : JZ 0x00a251ed
00a251e1 : MOV EAX,dword ptr [EDI + 0xd]
00a251e4 : PUSH EAX
00a251e5 : CALL 0x008dae40
00a251ea : MOV EDI,dword ptr [EBP + 0xc]
00a251ed : MOV ECX,dword ptr [0x00da9894]
00a251f3 : MOV EDX,dword ptr [ECX]
00a251f5 : CMP dword ptr [EDX + 0x130],0x0
00a251fc : JZ 0x00a25291
00a25202 : MOV EDX,dword ptr [EDI + 0xd]
00a25205 : CALL 0x00a96530
00a2520a : MOV ECX,dword ptr [EBP + -0xc]
00a2520d : MOV dword ptr FS:[0x0],ECX
00a25214 : POP ECX
00a25215 : POP EDI
00a25216 : POP ESI
00a25217 : POP EBX
00a25218 : MOV ESP,EBP
00a2521a : POP EBP
00a2521b : RET 0x8
00a2521e : MOV EDX,dword ptr [EBX]
00a25220 : PUSH ECX
00a25221 : PUSH EAX
00a25222 : MOV EAX,dword ptr [EDX + 0xc4]
00a25228 : MOV ECX,EBX
00a2522a : CALL EAX
00a2522c : MOV ECX,dword ptr [EBP + -0xc]
00a2522f : MOV dword ptr FS:[0x0],ECX
00a25236 : POP ECX
00a25237 : POP EDI
00a25238 : POP ESI
00a25239 : POP EBX
00a2523a : MOV ESP,EBP
00a2523c : POP EBP
00a2523d : RET 0x8
00a25240 : MOV [0x00d7cd60],EAX
00a25245 : MOV ECX,dword ptr [EBP + -0xc]
00a25248 : MOV dword ptr FS:[0x0],ECX
00a2524f : POP ECX
00a25250 : POP EDI
00a25251 : POP ESI
00a25252 : POP EBX
00a25253 : MOV ESP,EBP
00a25255 : POP EBP
00a25256 : RET 0x8
00a25259 : PUSH ECX
00a2525a : MOV ECX,EBX
00a2525c : CALL 0x00a1a840
00a25261 : TEST EAX,EAX
00a25263 : JZ 0x00a25291
00a25265 : MOVZX ECX,byte ptr [EDI + 0xc]
00a25269 : SUB ECX,0xcb
00a2526f : MOV EAX,dword ptr [EDI + 0xd]
00a25272 : JZ 0x00a25283
00a25274 : SUB ECX,0x5
00a25277 : JNZ 0x00a25291
00a25279 : MOV EDX,dword ptr [EBX]
00a2527b : MOV EDX,dword ptr [EDX + 0xa0]
00a25281 : JMP 0x00a25288
00a25283 : MOV EDX,dword ptr [EBX]
00a25285 : MOV EDX,dword ptr [EDX + 0x2c]
00a25288 : MOV ECX,dword ptr [EDI + 0x4]
00a2528b : PUSH ECX
00a2528c : PUSH EAX
00a2528d : MOV ECX,EBX
00a2528f : CALL EDX
00a25291 : MOV ECX,dword ptr [EBP + -0xc]
00a25294 : MOV dword ptr FS:[0x0],ECX
00a2529b : POP ECX
00a2529c : POP EDI
00a2529d : POP ESI
00a2529e : POP EBX
00a2529f : MOV ESP,EBP
00a252a1 : POP EBP
00a252a2 : RET 0x8
