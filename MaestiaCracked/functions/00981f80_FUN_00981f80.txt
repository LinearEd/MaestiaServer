PROGRAM  : Maestia.exe
FUNCTION : FUN_00981f80
ENTRY    : 00981f80
BODY     : [[00981f80, 0098206a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00981f80(int param_1,undefined2 param_2)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  uint8_t *packet;
  byte bVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = DAT_017247d4;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b40691;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined4 *)(param_1 + 0x14c) = 0;
  if (iVar3 != 0) {
    iVar1 = *(int *)ThreadLocalStoragePointer;
    bVar5 = (byte)((ulonglong)(*(byte *)(iVar1 + 0x18) + 1) % 3);
    *(byte *)(iVar1 + 0x18) = bVar5;
    packet = (uint8_t *)((uint)bVar5 * 0x2000 + 0x122cb8 + iVar1);
    if (packet == (uint8_t *)0x0) {
      packet = (uint8_t *)0x0;
    }
    else {
      packet[0] = '\0';
      packet[1] = '\0';
      packet[2] = '4';
      packet[3] = 'g';
      *(undefined2 *)(packet + 4) = param_2;
    }
    local_8 = 0xffffffff;
    if ((*(int *)(iVar3 + 4) != 0) && (*(char *)(iVar3 + 8) != '\0')) {
      FUN_00a0dd40(*(int *)(iVar3 + 4),6,packet);
    }
  }
  if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
    (**(code **)(*piVar2 + 4))(piVar2,"SetIrimaRate","%b,%d,%d,%d",0,0,0,0,uVar4);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00981f80 : PUSH EBP
00981f81 : MOV EBP,ESP
00981f83 : PUSH -0x1
00981f85 : PUSH 0xb40691
00981f8a : MOV EAX,FS:[0x0]
00981f90 : PUSH EAX
00981f91 : PUSH ESI
00981f92 : PUSH EDI
00981f93 : MOV EAX,[0x00d66fa0]
00981f98 : XOR EAX,EBP
00981f9a : PUSH EAX
00981f9b : LEA EAX,[EBP + -0xc]
00981f9e : MOV FS:[0x0],EAX
00981fa4 : MOV ESI,dword ptr [0x017247d4]
00981faa : MOV EAX,dword ptr [EBP + 0x8]
00981fad : MOV dword ptr [EAX + 0x14c],0x0
00981fb7 : TEST ESI,ESI
00981fb9 : JZ 0x00982026
00981fbb : MOV ECX,dword ptr FS:[0x2c]
00981fc2 : MOV ECX,dword ptr [ECX]
00981fc4 : MOVZX EAX,byte ptr [ECX + 0x18]
00981fc8 : INC EAX
00981fc9 : CDQ
00981fca : MOV EDI,0x3
00981fcf : IDIV EDI
00981fd1 : MOV byte ptr [ECX + 0x18],DL
00981fd4 : MOVZX EDX,DL
00981fd7 : SHL EDX,0xd
00981fda : LEA EAX,[EDX + ECX*0x1 + 0x122cb8]
00981fe1 : MOV dword ptr [EBP + 0x8],EAX
00981fe4 : MOV dword ptr [EBP + -0x4],0x0
00981feb : TEST EAX,EAX
00981fed : JZ 0x00982006
00981fef : MOV DX,word ptr [EBP + 0xc]
00981ff3 : XOR ECX,ECX
00981ff5 : MOV word ptr [EAX],CX
00981ff8 : MOV byte ptr [EAX + 0x2],0x34
00981ffc : MOV byte ptr [EAX + 0x3],0x67
00982000 : MOV word ptr [EAX + 0x4],DX
00982004 : JMP 0x00982008
00982006 : XOR EAX,EAX
00982008 : MOV dword ptr [EBP + -0x4],0xffffffff
0098200f : MOV ECX,dword ptr [ESI + 0x4]
00982012 : TEST ECX,ECX
00982014 : JZ 0x00982026
00982016 : CMP byte ptr [ESI + 0x8],0x0
0098201a : JZ 0x00982026
0098201c : PUSH 0x6
0098201e : PUSH ECX
0098201f : MOV EDI,EAX
00982021 : CALL 0x00a0dd40
00982026 : MOV EAX,[0x00da9894]
0098202b : MOV EAX,dword ptr [EAX]
0098202d : TEST EAX,EAX
0098202f : JZ 0x00982058
00982031 : MOV EAX,dword ptr [EAX + 0x114]
00982037 : TEST EAX,EAX
00982039 : JZ 0x00982058
0098203b : MOV ECX,dword ptr [EAX]
0098203d : MOV EDX,dword ptr [ECX + 0x4]
00982040 : PUSH 0x0
00982042 : PUSH 0x0
00982044 : PUSH 0x0
00982046 : PUSH 0x0
00982048 : PUSH 0xc80a58
0098204d : PUSH 0xc80a64
00982052 : PUSH EAX
00982053 : CALL EDX
00982055 : ADD ESP,0x1c
00982058 : MOV ECX,dword ptr [EBP + -0xc]
0098205b : MOV dword ptr FS:[0x0],ECX
00982062 : POP ECX
00982063 : POP EDI
00982064 : POP ESI
00982065 : MOV ESP,EBP
00982067 : POP EBP
00982068 : RET 0x8
