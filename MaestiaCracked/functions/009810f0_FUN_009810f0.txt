PROGRAM  : Maestia.exe
FUNCTION : FUN_009810f0
ENTRY    : 009810f0
BODY     : [[009810f0, 00981304]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009810f0(int param_1)

{
  ushort uVar1;
  int *piVar2;
  ushort uVar3;
  DWORD DVar4;
  int iVar5;
  int iVar6;
  
  if ((*(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54) != 0) &&
     (DVar4 = timeGetTime(), 1000 < DVar4 - *(int *)(param_1 + 0x80))) {
    *(DWORD *)(param_1 + 0x80) = DVar4;
    uVar1 = *(ushort *)(*(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54) + 0x30);
    uVar3 = 0;
    if (uVar1 != 0) {
      do {
        iVar5 = FUN_00ab67c0();
        FUN_00ab6c80();
        if ((((iVar5 != 0) && (iVar6 = FUN_00405bb0(), iVar6 != 0)) &&
            (*(char *)(iVar5 + 0x88) == '\0')) &&
           (((*(float *)(iVar5 + 0x7c) != *(float *)(iVar5 + 0x5c) ||
             (*(float *)(iVar5 + 0x80) != *(float *)(iVar5 + 0x60))) ||
            (*(float *)(iVar5 + 0x84) != *(float *)(iVar5 + 100))))) {
          *(undefined4 *)(iVar5 + 0x7c) = *(undefined4 *)(iVar5 + 0x5c);
          *(undefined4 *)(iVar5 + 0x80) = *(undefined4 *)(iVar5 + 0x60);
          *(undefined4 *)(iVar5 + 0x84) = *(undefined4 *)(iVar5 + 100);
          FUN_009802e0();
          if (((*(short *)(iVar5 + 0x70) == *(short *)(param_1 + 0x6c)) && (*DAT_00da9894 != 0)) &&
             (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
            (**(code **)(*piVar2 + 4))
                      (piVar2,"MinimapRefreshPC","%d%f%f",*(undefined4 *)(iVar5 + 0x6c),0,0);
          }
          if ((((*(short *)(iVar5 + 0x70) == *(short *)(param_1 + 0x6e)) &&
               (*(short *)(param_1 + 0x6e) == *(short *)(param_1 + 0x6c))) && (*DAT_00da9894 != 0))
             && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
            (**(code **)(*piVar2 + 4))
                      (piVar2,"ZoneMapRefreshPC","%d%f%f",*(undefined4 *)(iVar5 + 0x6c),0,0);
          }
        }
        uVar3 = uVar3 + 1;
      } while (uVar3 < uVar1);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
009810f0 : PUSH EBP
009810f1 : MOV EBP,ESP
009810f3 : AND ESP,0xffffffc0
009810f6 : MOV EAX,[0x0172491c]
009810fb : MOV ECX,dword ptr [EAX + 0x17c]
00981101 : SUB ESP,0x34
00981104 : PUSH EBX
00981105 : PUSH ESI
00981106 : XOR ESI,ESI
00981108 : PUSH EDI
00981109 : CMP dword ptr [ECX + 0x1f54],ESI
0098110f : JZ 0x009812fc
00981115 : CALL dword ptr [0x00b85598]
0098111b : MOV ECX,dword ptr [EBP + 0x8]
0098111e : MOV EDX,EAX
00981120 : SUB EDX,dword ptr [ECX + 0x80]
00981126 : CMP EDX,0x3e8
0098112c : JBE 0x009812fc
00981132 : MOV dword ptr [ECX + 0x80],EAX
00981138 : MOV EAX,[0x0172491c]
0098113d : MOV ECX,dword ptr [EAX + 0x17c]
00981143 : MOV EBX,dword ptr [ECX + 0x1f54]
00981149 : MOVZX ECX,word ptr [EBX + 0x30]
0098114d : XOR EAX,EAX
0098114f : XOR EDX,EDX
00981151 : MOV dword ptr [ESP + 0x2c],EBX
00981155 : MOV dword ptr [ESP + 0x34],ECX
00981159 : MOV dword ptr [ESP + 0x3c],ESI
0098115d : MOV dword ptr [ESP + 0x38],ESI
00981161 : MOV dword ptr [ESP + 0x30],EAX
00981165 : CMP DX,CX
00981168 : JNC 0x009812fc
0098116e : PUSH EAX
0098116f : MOV ECX,EBX
00981171 : CALL 0x00ab67c0
00981176 : MOV ECX,EBX
00981178 : MOV ESI,EAX
0098117a : CALL 0x00ab6c80
0098117f : TEST ESI,ESI
00981181 : JZ 0x009812e8
00981187 : MOV EAX,[0x0172491c]
0098118c : MOV EAX,dword ptr [EAX + 0x17c]
00981192 : MOV EDI,dword ptr [EAX + 0x20]
00981195 : ADD EAX,0xc
00981198 : CMP dword ptr [EAX + 0x18],0x8
0098119c : LEA ECX,[ESI + 0x1c]
0098119f : JC 0x009811a6
009811a1 : MOV EAX,dword ptr [EAX + 0x4]
009811a4 : JMP 0x009811a9
009811a6 : ADD EAX,0x4
009811a9 : PUSH EAX
009811aa : MOV EAX,dword ptr [ECX + 0x14]
009811ad : CALL 0x00405bb0
009811b2 : TEST EAX,EAX
009811b4 : JZ 0x009812e8
009811ba : CMP byte ptr [ESI + 0x88],0x0
009811c1 : JNZ 0x009812e8
009811c7 : MOVSS XMM0,dword ptr [ESI + 0x7c]
009811cc : UCOMISS XMM0,dword ptr [ESI + 0x5c]
009811d0 : LEA EDX,[ESI + 0x5c]
009811d3 : LAHF
009811d4 : TEST AH,0x44
009811d7 : JP 0x00981201
009811d9 : MOVSS XMM0,dword ptr [ESI + 0x80]
009811e1 : UCOMISS XMM0,dword ptr [EDX + 0x4]
009811e5 : LAHF
009811e6 : TEST AH,0x44
009811e9 : JP 0x00981201
009811eb : MOVSS XMM0,dword ptr [ESI + 0x84]
009811f3 : UCOMISS XMM0,dword ptr [EDX + 0x8]
009811f7 : LAHF
009811f8 : TEST AH,0x44
009811fb : JNP 0x009812e8
00981201 : FLD float ptr [EDX]
00981203 : MOV EDI,dword ptr [EBP + 0x8]
00981206 : FSTP float ptr [ESI + 0x7c]
00981209 : PUSH EDI
0098120a : FLD float ptr [EDX + 0x4]
0098120d : LEA ECX,[ESP + 0x3c]
00981211 : FSTP float ptr [ESI + 0x80]
00981217 : FLD float ptr [EDX + 0x8]
0098121a : FSTP float ptr [ESI + 0x84]
00981220 : CALL 0x009802e0
00981225 : MOV CX,word ptr [ESI + 0x70]
00981229 : CMP CX,word ptr [EDI + 0x6c]
0098122d : MOV EDI,dword ptr [ESP + 0x3c]
00981231 : MOV EBX,dword ptr [ESP + 0x38]
00981235 : JNZ 0x00981283
00981237 : MOV EDX,dword ptr [0x00da9894]
0098123d : MOV EAX,dword ptr [EDX]
0098123f : TEST EAX,EAX
00981241 : JZ 0x00981283
00981243 : MOV EAX,dword ptr [EAX + 0x114]
00981249 : TEST EAX,EAX
0098124b : JZ 0x00981283
0098124d : MOV EDX,dword ptr [ESI + 0x6c]
00981250 : MOV ECX,dword ptr [EAX]
00981252 : SUB ESP,0x10
00981255 : CVTSI2SS XMM0,EDI
00981259 : CVTPS2PD XMM0,XMM0
0098125c : MOVSD qword ptr [ESP + 0x8],XMM0
00981262 : CVTSI2SS XMM0,EBX
00981266 : CVTSS2SD XMM0,XMM0
0098126a : MOVSD qword ptr [ESP],XMM0
0098126f : PUSH EDX
00981270 : PUSH 0xc7fee8
00981275 : PUSH 0xc7fef0
0098127a : PUSH EAX
0098127b : MOV EAX,dword ptr [ECX + 0x4]
0098127e : CALL EAX
00981280 : ADD ESP,0x20
00981283 : MOV ECX,dword ptr [EBP + 0x8]
00981286 : MOVZX EAX,word ptr [ECX + 0x6e]
0098128a : CMP word ptr [ESI + 0x70],AX
0098128e : JNZ 0x009812e4
00981290 : MOV EDX,ECX
00981292 : CMP AX,word ptr [EDX + 0x6c]
00981296 : JNZ 0x009812e4
00981298 : MOV EAX,[0x00da9894]
0098129d : MOV EAX,dword ptr [EAX]
0098129f : TEST EAX,EAX
009812a1 : JZ 0x009812e4
009812a3 : MOV EAX,dword ptr [EAX + 0x114]
009812a9 : TEST EAX,EAX
009812ab : JZ 0x009812e4
009812ad : MOV EDX,dword ptr [ESI + 0x6c]
009812b0 : MOV ECX,dword ptr [EAX]
009812b2 : SUB ESP,0x10
009812b5 : CVTSI2SS XMM0,EDI
009812b9 : CVTSS2SD XMM0,XMM0
009812bd : MOVSD qword ptr [ESP + 0x8],XMM0
009812c3 : CVTSI2SS XMM0,EBX
009812c7 : CVTSS2SD XMM0,XMM0
009812cb : MOVSD qword ptr [ESP],XMM0
009812d0 : PUSH EDX
009812d1 : PUSH 0xc7ff04
009812d6 : PUSH 0xc7ff0c
009812db : PUSH EAX
009812dc : MOV EAX,dword ptr [ECX + 0x4]
009812df : CALL EAX
009812e1 : ADD ESP,0x20
009812e4 : MOV EBX,dword ptr [ESP + 0x2c]
009812e8 : MOV EAX,dword ptr [ESP + 0x30]
009812ec : INC EAX
009812ed : MOV dword ptr [ESP + 0x30],EAX
009812f1 : CMP AX,word ptr [ESP + 0x34]
009812f6 : JC 0x0098116e
009812fc : POP EDI
009812fd : POP ESI
009812fe : POP EBX
009812ff : MOV ESP,EBP
00981301 : POP EBP
00981302 : RET 0x4
