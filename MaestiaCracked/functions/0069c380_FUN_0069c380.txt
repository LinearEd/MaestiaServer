PROGRAM  : Maestia.exe
FUNCTION : FUN_0069c380
ENTRY    : 0069c380
BODY     : [[0069c380, 0069c3dc] [0069c3e0, 0069c44b] [0069c450, 0069c468] [0069c470, 0069c4cb] [0069c4d0, 0069c547]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0069c380(void)

{
  undefined4 uVar1;
  int in_EAX;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  int in_ECX;
  uint uVar5;
  int iVar6;
  undefined4 uVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  int iVar11;
  uint uVar12;
  int iVar13;
  int local_18;
  int local_14;
  undefined4 local_10;
  
  iVar8 = in_EAX * 0xcc + 4 + *(int *)(in_ECX + 0x18);
  uVar1 = *(undefined4 *)(iVar8 + 0xc4);
  local_18 = *(int *)(iVar8 + 200);
  puVar4 = *(uint **)(in_ECX + 0xc);
  iVar8 = *(int *)(in_ECX + 4);
  do {
    if (iVar8 == 0) {
      return;
    }
    uVar12 = *puVar4;
    uVar10 = puVar4[1] * 0x30 + uVar12;
    uVar5 = 0;
    uVar9 = 0;
    uVar2 = uVar12;
    if (uVar12 < uVar10) {
      do {
        if ((*(byte *)(uVar2 + 0x10) & 0x20) != 0) {
          if (uVar9 == 0) {
            uVar9 = uVar2;
          }
          uVar5 = uVar5 + 1;
        }
        uVar2 = uVar2 + 0x30;
      } while (uVar2 < uVar10);
      uVar2 = uVar9;
      if (uVar5 < 2) {
        if (uVar5 == 1) {
          local_18 = FUN_00685ea0(*(undefined4 *)(uVar9 + 0x24),uVar1);
          local_18 = *(int *)(uVar9 + 0x2c) - local_18;
        }
        for (; uVar12 < uVar10; uVar12 = uVar12 + 0x30) {
          if (uVar12 != uVar9) {
            iVar3 = FUN_00685ea0(*(undefined4 *)(uVar12 + 0x24),uVar1);
            *(int *)(uVar12 + 0x2c) = iVar3 + local_18;
          }
        }
      }
      else {
        do {
          do {
            uVar12 = uVar2;
            uVar2 = *(uint *)(uVar12 + 4);
            if (uVar2 == uVar9) goto LAB_0069c524;
          } while ((*(byte *)(uVar2 + 0x10) & 0x20) != 0);
          do {
            uVar2 = *(uint *)(uVar2 + 4);
          } while ((*(byte *)(uVar2 + 0x10) & 0x20) == 0);
          iVar3 = *(int *)(uVar12 + 0x24);
          local_14 = *(int *)(uVar2 + 0x24);
          if (local_14 < iVar3) {
            iVar11 = *(int *)(uVar2 + 0x2c);
            iVar13 = *(int *)(uVar12 + 0x2c);
            iVar6 = iVar3 - local_14;
          }
          else {
            iVar11 = *(int *)(uVar12 + 0x2c);
            iVar13 = *(int *)(uVar2 + 0x2c);
            iVar6 = local_14 - iVar3;
            local_14 = iVar3;
          }
          local_10 = 0x10000;
          if (0 < iVar6) {
            local_10 = FUN_00685f30(iVar13 - iVar11,iVar6);
          }
          uVar12 = *(uint *)(uVar12 + 4);
          do {
            iVar3 = *(int *)(uVar12 + 0x24) - local_14;
            uVar7 = uVar1;
            if ((iVar3 < 1) || (uVar7 = local_10, iVar3 < iVar6)) {
              iVar3 = FUN_00685ea0(iVar3,uVar7);
            }
            else {
              iVar3 = FUN_00685ea0(iVar3 - iVar6,uVar1);
              iVar3 = iVar3 + (iVar13 - iVar11);
            }
            *(int *)(uVar12 + 0x2c) = iVar3 + iVar11;
            uVar12 = *(uint *)(uVar12 + 4);
          } while (uVar12 != uVar2);
        } while (uVar2 != uVar9);
      }
    }
LAB_0069c524:
    iVar8 = iVar8 + -1;
    puVar4 = puVar4 + 2;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0069c380 : SUB ESP,0x20
0069c383 : MOV EDX,dword ptr [ECX + 0x18]
0069c386 : IMUL EAX,EAX,0xcc
0069c38c : LEA EAX,[EAX + EDX*0x1 + 0x4]
0069c390 : PUSH EBP
0069c391 : MOV EBP,dword ptr [EAX + 0xc4]
0069c397 : MOV EAX,dword ptr [EAX + 0xc8]
0069c39d : MOV dword ptr [ESP + 0xc],EAX
0069c3a1 : MOV EAX,dword ptr [ECX + 0xc]
0069c3a4 : MOV ECX,dword ptr [ECX + 0x4]
0069c3a7 : MOV dword ptr [ESP + 0x8],EBP
0069c3ab : MOV dword ptr [ESP + 0x20],EAX
0069c3af : MOV dword ptr [ESP + 0x1c],ECX
0069c3b3 : TEST ECX,ECX
0069c3b5 : JBE 0x0069c543
0069c3bb : PUSH EBX
0069c3bc : PUSH ESI
0069c3bd : PUSH EDI
0069c3be : MOV EDI,EDI
0069c3c0 : MOV ESI,dword ptr [EAX + 0x4]
0069c3c3 : MOV EDI,dword ptr [EAX]
0069c3c5 : LEA ESI,[ESI + ESI*0x2]
0069c3c8 : SHL ESI,0x4
0069c3cb : ADD ESI,EDI
0069c3cd : XOR ECX,ECX
0069c3cf : XOR EBX,EBX
0069c3d1 : MOV EAX,EDI
0069c3d3 : CMP EDI,ESI
0069c3d5 : JNC 0x0069c524
0069c3db : JMP 0x0069c3e0
0069c3e0 : TEST byte ptr [EAX + 0x10],0x20
0069c3e4 : JZ 0x0069c3ed
0069c3e6 : TEST EBX,EBX
0069c3e8 : JNZ 0x0069c3ec
0069c3ea : MOV EBX,EAX
0069c3ec : INC ECX
0069c3ed : ADD EAX,0x30
0069c3f0 : CMP EAX,ESI
0069c3f2 : JC 0x0069c3e0
0069c3f4 : CMP ECX,0x2
0069c3f7 : JNC 0x0069c444
0069c3f9 : CMP ECX,0x1
0069c3fc : JNZ 0x0069c414
0069c3fe : MOV ECX,dword ptr [EBX + 0x24]
0069c401 : PUSH EBP
0069c402 : PUSH ECX
0069c403 : CALL 0x00685ea0
0069c408 : MOV ECX,dword ptr [EBX + 0x2c]
0069c40b : ADD ESP,0x8
0069c40e : SUB ECX,EAX
0069c410 : MOV dword ptr [ESP + 0x18],ECX
0069c414 : CMP EDI,ESI
0069c416 : JNC 0x0069c524
0069c41c : LEA ESP,[ESP]
0069c420 : CMP EDI,EBX
0069c422 : JZ 0x0069c438
0069c424 : MOV EDX,dword ptr [EDI + 0x24]
0069c427 : PUSH EBP
0069c428 : PUSH EDX
0069c429 : CALL 0x00685ea0
0069c42e : ADD ESP,0x8
0069c431 : ADD EAX,dword ptr [ESP + 0x18]
0069c435 : MOV dword ptr [EDI + 0x2c],EAX
0069c438 : ADD EDI,0x30
0069c43b : CMP EDI,ESI
0069c43d : JC 0x0069c420
0069c43f : JMP 0x0069c524
0069c444 : MOV EAX,EBX
0069c446 : MOV dword ptr [ESP + 0x24],EAX
0069c44a : JMP 0x0069c454
0069c450 : MOV EAX,dword ptr [ESP + 0x24]
0069c454 : MOV EBP,dword ptr [EBX + 0x4]
0069c457 : CMP EBP,EAX
0069c459 : JZ 0x0069c520
0069c45f : TEST byte ptr [EBP + 0x10],0x20
0069c463 : JZ 0x0069c470
0069c465 : MOV EBX,EBP
0069c467 : JMP 0x0069c454
0069c470 : MOV EBP,dword ptr [EBP + 0x4]
0069c473 : TEST byte ptr [EBP + 0x10],0x20
0069c477 : JZ 0x0069c470
0069c479 : MOV EAX,dword ptr [EBX + 0x24]
0069c47c : MOV ECX,dword ptr [EBP + 0x24]
0069c47f : CMP EAX,ECX
0069c481 : JG 0x0069c495
0069c483 : MOV ESI,dword ptr [EBX + 0x2c]
0069c486 : MOV EDI,dword ptr [EBP + 0x2c]
0069c489 : SUB ECX,EAX
0069c48b : MOV dword ptr [ESP + 0x1c],EAX
0069c48f : MOV dword ptr [ESP + 0x10],ECX
0069c493 : JMP 0x0069c4a7
0069c495 : MOV ESI,dword ptr [EBP + 0x2c]
0069c498 : MOV EDI,dword ptr [EBX + 0x2c]
0069c49b : SUB EAX,ECX
0069c49d : MOV dword ptr [ESP + 0x1c],ECX
0069c4a1 : MOV dword ptr [ESP + 0x10],EAX
0069c4a5 : MOV ECX,EAX
0069c4a7 : SUB EDI,ESI
0069c4a9 : MOV dword ptr [ESP + 0x20],0x10000
0069c4b1 : TEST ECX,ECX
0069c4b3 : JLE 0x0069c4c7
0069c4b5 : PUSH ECX
0069c4b6 : PUSH EDI
0069c4b7 : CALL 0x00685f30
0069c4bc : MOV ECX,dword ptr [ESP + 0x18]
0069c4c0 : ADD ESP,0x8
0069c4c3 : MOV dword ptr [ESP + 0x20],EAX
0069c4c7 : MOV EBX,dword ptr [EBX + 0x4]
0069c4ca : JMP 0x0069c4d4
0069c4d0 : MOV ECX,dword ptr [ESP + 0x10]
0069c4d4 : MOV EAX,dword ptr [EBX + 0x24]
0069c4d7 : SUB EAX,dword ptr [ESP + 0x1c]
0069c4db : TEST EAX,EAX
0069c4dd : JG 0x0069c4e5
0069c4df : MOV ECX,dword ptr [ESP + 0x14]
0069c4e3 : JMP 0x0069c4fe
0069c4e5 : CMP EAX,ECX
0069c4e7 : JL 0x0069c4fa
0069c4e9 : MOV EDX,dword ptr [ESP + 0x14]
0069c4ed : PUSH EDX
0069c4ee : SUB EAX,ECX
0069c4f0 : PUSH EAX
0069c4f1 : CALL 0x00685ea0
0069c4f6 : ADD EAX,EDI
0069c4f8 : JMP 0x0069c505
0069c4fa : MOV ECX,dword ptr [ESP + 0x20]
0069c4fe : PUSH ECX
0069c4ff : PUSH EAX
0069c500 : CALL 0x00685ea0
0069c505 : ADD EAX,ESI
0069c507 : MOV dword ptr [EBX + 0x2c],EAX
0069c50a : MOV EBX,dword ptr [EBX + 0x4]
0069c50d : ADD ESP,0x8
0069c510 : CMP EBX,EBP
0069c512 : JNZ 0x0069c4d0
0069c514 : MOV EBX,EBP
0069c516 : CMP EBP,dword ptr [ESP + 0x24]
0069c51a : JNZ 0x0069c450
0069c520 : MOV EBP,dword ptr [ESP + 0x14]
0069c524 : MOV ECX,dword ptr [ESP + 0x28]
0069c528 : MOV EAX,dword ptr [ESP + 0x2c]
0069c52c : DEC ECX
0069c52d : ADD EAX,0x8
0069c530 : MOV dword ptr [ESP + 0x28],ECX
0069c534 : MOV dword ptr [ESP + 0x2c],EAX
0069c538 : TEST ECX,ECX
0069c53a : JA 0x0069c3c0
0069c540 : POP EDI
0069c541 : POP ESI
0069c542 : POP EBX
0069c543 : POP EBP
0069c544 : ADD ESP,0x20
0069c547 : RET
