PROGRAM  : Maestia.exe
FUNCTION : FUN_009f3f80
ENTRY    : 009f3f80
BODY     : [[009f3f80, 009f40dc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009f3f80(undefined4 param_1,undefined4 param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined4 *puVar4;
  undefined4 uVar5;
  int in_ECX;
  int iVar6;
  uint local_40;
  int local_3c;
  int local_34;
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b24a6d;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar1 = *(int *)(in_ECX + 0x54);
  iVar2 = *(int *)(in_ECX + 100);
  local_14 = uVar3;
  FUN_00484470(&param_1);
  FUN_00484470(&param_1);
  iVar6 = 0;
  local_18 = 7;
  local_1c = 0;
  local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
  FUN_00406360(&DAT_00ca7588,0);
  local_8 = 0;
  if (local_3c == iVar1) {
    if (local_34 == iVar2) goto LAB_009f400d;
LAB_009f405d:
    iVar6 = iVar6 + *(int *)(local_34 + 0x10);
  }
  else {
    iVar6 = *(int *)(local_3c + 0x10);
    if (local_34 != iVar2) goto LAB_009f405d;
  }
  FUN_00406360(&DAT_00ca758c,1);
  puVar4 = local_2c;
  if (local_18 < 8) {
    puVar4 = &local_2c;
  }
  uVar5 = FUN_00404750(L"%d%s",iVar6 / 100,puVar4,uVar3);
  local_8._0_1_ = 1;
  FUN_00405eb0(uVar5,0,0xffffffff);
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
LAB_009f400d:
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    local_18 = 7;
    local_1c = 0;
    local_2c = (undefined4 *)((uint)local_2c & 0xffff0000);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009f3f80 : PUSH EBP
009f3f81 : MOV EBP,ESP
009f3f83 : PUSH -0x1
009f3f85 : PUSH 0xb24a6d
009f3f8a : MOV EAX,FS:[0x0]
009f3f90 : PUSH EAX
009f3f91 : SUB ESP,0x48
009f3f94 : MOV EAX,[0x00d66fa0]
009f3f99 : XOR EAX,EBP
009f3f9b : MOV dword ptr [EBP + -0x10],EAX
009f3f9e : PUSH EBX
009f3f9f : PUSH ESI
009f3fa0 : PUSH EDI
009f3fa1 : PUSH EAX
009f3fa2 : LEA EAX,[EBP + -0xc]
009f3fa5 : MOV FS:[0x0],EAX
009f3fab : MOV EAX,dword ptr [EBP + 0xc]
009f3fae : MOV ESI,ECX
009f3fb0 : MOV EDI,dword ptr [ESI + 0x54]
009f3fb3 : MOV EBX,dword ptr [ESI + 0x64]
009f3fb6 : LEA ECX,[EBP + 0x8]
009f3fb9 : MOV dword ptr [EBP + -0x34],EAX
009f3fbc : PUSH ECX
009f3fbd : LEA ECX,[ESI + 0x50]
009f3fc0 : LEA EAX,[EBP + -0x38]
009f3fc3 : CALL 0x00484470
009f3fc8 : LEA EDX,[EBP + 0x8]
009f3fcb : PUSH EDX
009f3fcc : LEA ECX,[ESI + 0x60]
009f3fcf : LEA EAX,[EBP + -0x30]
009f3fd2 : CALL 0x00484470
009f3fd7 : XOR ESI,ESI
009f3fd9 : PUSH ESI
009f3fda : XOR EAX,EAX
009f3fdc : PUSH 0xca7588
009f3fe1 : LEA ECX,[EBP + -0x2c]
009f3fe4 : MOV dword ptr [EBP + -0x14],0x7
009f3feb : MOV dword ptr [EBP + -0x18],ESI
009f3fee : MOV word ptr [EBP + -0x28],AX
009f3ff2 : CALL 0x00406360
009f3ff7 : MOV dword ptr [EBP + -0x4],ESI
009f3ffa : MOV EAX,dword ptr [EBP + -0x38]
009f3ffd : CMP EAX,EDI
009f3fff : JNZ 0x009f4053
009f4001 : MOV EAX,dword ptr [EBP + -0x30]
009f4004 : CMP EAX,EBX
009f4006 : JNZ 0x009f405d
009f4008 : MOV EDI,0x8
009f400d : MOV dword ptr [EBP + -0x4],0xffffffff
009f4014 : CMP dword ptr [EBP + -0x14],EDI
009f4017 : JC 0x009f4021
009f4019 : MOV ECX,dword ptr [EBP + -0x28]
009f401c : CALL 0x006f04e0
009f4021 : XOR EDX,EDX
009f4023 : MOV dword ptr [EBP + -0x14],0x7
009f402a : MOV dword ptr [EBP + -0x18],0x0
009f4031 : MOV word ptr [EBP + -0x28],DX
009f4035 : MOV ECX,dword ptr [EBP + -0xc]
009f4038 : MOV dword ptr FS:[0x0],ECX
009f403f : POP ECX
009f4040 : POP EDI
009f4041 : POP ESI
009f4042 : POP EBX
009f4043 : MOV ECX,dword ptr [EBP + -0x10]
009f4046 : XOR ECX,EBP
009f4048 : CALL 0x00633e6b
009f404d : MOV ESP,EBP
009f404f : POP EBP
009f4050 : RET 0x8
009f4053 : MOV ESI,dword ptr [EAX + 0x10]
009f4056 : MOV EAX,dword ptr [EBP + -0x30]
009f4059 : CMP EAX,EBX
009f405b : JZ 0x009f4060
009f405d : ADD ESI,dword ptr [EAX + 0x10]
009f4060 : MOV EAX,0x51eb851f
009f4065 : IMUL ESI
009f4067 : SAR EDX,0x5
009f406a : MOV ESI,EDX
009f406c : PUSH 0x1
009f406e : SHR ESI,0x1f
009f4071 : PUSH 0xca758c
009f4076 : LEA ECX,[EBP + -0x2c]
009f4079 : ADD ESI,EDX
009f407b : CALL 0x00406360
009f4080 : MOV EAX,dword ptr [EBP + -0x28]
009f4083 : MOV EDI,0x8
009f4088 : CMP dword ptr [EBP + -0x14],EDI
009f408b : JNC 0x009f4090
009f408d : LEA EAX,[EBP + -0x28]
009f4090 : PUSH EAX
009f4091 : PUSH ESI
009f4092 : PUSH 0xca7590
009f4097 : LEA ESI,[EBP + -0x54]
009f409a : CALL 0x00404750
009f409f : ADD ESP,0xc
009f40a2 : MOV byte ptr [EBP + -0x4],0x1
009f40a6 : MOV ECX,dword ptr [EBP + -0x34]
009f40a9 : PUSH -0x1
009f40ab : PUSH 0x0
009f40ad : PUSH EAX
009f40ae : CALL 0x00405eb0
009f40b3 : MOV byte ptr [EBP + -0x4],0x0
009f40b7 : CMP dword ptr [EBP + -0x3c],EDI
009f40ba : JC 0x009f40c4
009f40bc : MOV ECX,dword ptr [EBP + -0x50]
009f40bf : CALL 0x006f04e0
009f40c4 : XOR ECX,ECX
009f40c6 : MOV dword ptr [EBP + -0x3c],0x7
009f40cd : MOV dword ptr [EBP + -0x40],0x0
009f40d4 : MOV word ptr [EBP + -0x50],CX
009f40d8 : JMP 0x009f400d
