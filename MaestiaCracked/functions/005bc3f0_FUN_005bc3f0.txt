PROGRAM  : Maestia.exe
FUNCTION : FUN_005bc3f0
ENTRY    : 005bc3f0
BODY     : [[005bc3f0, 005bc684]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005bc3f0(int param_1,int *param_2,undefined4 param_3)

{
  byte bVar1;
  int iVar2;
  int *piVar3;
  undefined4 uVar4;
  float *pfVar5;
  bool bVar6;
  float local_24;
  float fStack_20;
  float fStack_1c;
  float fStack_18;
  undefined1 auStack_14 [4];
  undefined1 auStack_10 [16];
  
  if (*(char *)(*(int *)(param_1 + 0x78) + 0x2a4) != '\x01') {
LAB_005bc66b:
    uVar4 = FUN_00586920(param_1,param_2,param_3);
    return uVar4;
  }
  bVar1 = *(byte *)(param_1 + 0x7c);
  iVar2 = FUN_00525380("visibleRect",0xb,0);
  *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
  if (bVar1 < 7) {
    if (*(int *)(iVar2 + 4) == 0) {
      FUN_00525a80();
    }
    if (*(int *)(*param_2 + 4) == 0) {
      FUN_00525a80();
    }
    bVar6 = *(int *)(iVar2 + 4) == *(int *)(*param_2 + 4);
  }
  else {
    bVar6 = iVar2 == *param_2;
  }
  piVar3 = (int *)(iVar2 + 8);
  *piVar3 = *piVar3 + -1;
  if (*piVar3 == 0) {
    FUN_00525340();
  }
  if (bVar6) {
    piVar3 = (int *)FUN_005296a0();
    (**(code **)(*piVar3 + 0x7c))(&fStack_20);
  }
  else {
    bVar1 = *(byte *)(param_1 + 0x7c);
    iVar2 = FUN_00525380("safeRect",8,0);
    *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
    if (bVar1 < 7) {
      if (*(int *)(iVar2 + 4) == 0) {
        FUN_00525a80();
      }
      if (*(int *)(*param_2 + 4) == 0) {
        FUN_00525a80();
      }
      bVar6 = *(int *)(iVar2 + 4) == *(int *)(*param_2 + 4);
    }
    else {
      bVar6 = iVar2 == *param_2;
    }
    piVar3 = (int *)(iVar2 + 8);
    *piVar3 = *piVar3 + -1;
    if (*piVar3 == 0) {
      FUN_00525340();
    }
    if (!bVar6) {
      bVar1 = *(byte *)(param_1 + 0x7c);
      iVar2 = FUN_00525380("originalRect",0xc,0);
      *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
      if (bVar1 < 7) {
        if (*(int *)(iVar2 + 4) == 0) {
          FUN_00525a80();
        }
        if (*(int *)(*param_2 + 4) == 0) {
          FUN_00525a80();
        }
        bVar6 = *(int *)(iVar2 + 4) == *(int *)(*param_2 + 4);
      }
      else {
        bVar6 = iVar2 == *param_2;
      }
      piVar3 = (int *)(iVar2 + 8);
      *piVar3 = *piVar3 + -1;
      if (*piVar3 == 0) {
        FUN_00525340();
      }
      if (bVar6) {
        piVar3 = (int *)FUN_005296a0();
        piVar3 = (int *)(**(code **)(*piVar3 + 4))();
        (**(code **)(*piVar3 + 0x28))(auStack_10);
        uVar4 = FUN_005bc370(&local_24,param_1,auStack_14);
        FUN_005268b0(uVar4);
        FUN_00526bc0();
        return 1;
      }
      goto LAB_005bc66b;
    }
    piVar3 = (int *)FUN_005296a0();
    (**(code **)(*piVar3 + 0x80))(&fStack_20);
    if ((fStack_1c < local_24 != (fStack_1c == local_24)) ||
       (fStack_18 < fStack_20 != (fStack_18 == fStack_20))) {
      piVar3 = (int *)FUN_005296a0();
      pfVar5 = (float *)(**(code **)(*piVar3 + 0x7c))(auStack_14);
      fStack_20 = pfVar5[1];
      fStack_1c = pfVar5[2];
      fStack_18 = pfVar5[3];
      local_24 = *pfVar5;
    }
  }
  uVar4 = FUN_005bc370(auStack_14,param_1,&local_24);
  FUN_005268b0(uVar4);
  FUN_00526bc0();
  return 1;
}



============================================================
DISASSEMBLY
============================================================
005bc3f0 : SUB ESP,0x24
005bc3f3 : PUSH EBX
005bc3f4 : PUSH EBP
005bc3f5 : MOV EBP,dword ptr [ESP + 0x34]
005bc3f9 : PUSH ESI
005bc3fa : MOV ESI,dword ptr [ESP + 0x34]
005bc3fe : MOV EAX,dword ptr [ESI + 0x78]
005bc401 : CMP byte ptr [EAX + 0x2a4],0x1
005bc408 : PUSH EDI
005bc409 : MOV dword ptr [ESP + 0x10],ECX
005bc40d : JNZ 0x005bc66b
005bc413 : CMP byte ptr [ESI + 0x7c],0x6
005bc417 : PUSH 0x0
005bc419 : SETA BL
005bc41c : ADD EAX,0x8
005bc41f : PUSH 0xb
005bc421 : PUSH 0xb90fb0
005bc426 : LEA ECX,[EAX + 0x24c]
005bc42c : CALL 0x00525380
005bc431 : MOV EDI,EAX
005bc433 : INC dword ptr [EDI + 0x8]
005bc436 : TEST BL,BL
005bc438 : JZ 0x005bc43f
005bc43a : CMP EDI,dword ptr [EBP]
005bc43d : JMP 0x005bc463
005bc43f : CMP dword ptr [EDI + 0x4],0x0
005bc443 : JNZ 0x005bc44c
005bc445 : MOV ECX,EDI
005bc447 : CALL 0x00525a80
005bc44c : MOV ECX,dword ptr [EBP]
005bc44f : CMP dword ptr [ECX + 0x4],0x0
005bc453 : JNZ 0x005bc45a
005bc455 : CALL 0x00525a80
005bc45a : MOV ECX,dword ptr [EBP]
005bc45d : MOV EDX,dword ptr [EDI + 0x4]
005bc460 : CMP EDX,dword ptr [ECX + 0x4]
005bc463 : SETZ BL
005bc466 : ADD dword ptr [EDI + 0x8],-0x1
005bc46a : JNZ 0x005bc473
005bc46c : MOV ECX,EDI
005bc46e : CALL 0x00525340
005bc473 : TEST BL,BL
005bc475 : JZ 0x005bc4be
005bc477 : MOV ECX,ESI
005bc479 : CALL 0x005296a0
005bc47e : MOV EDX,dword ptr [EAX]
005bc480 : MOV EDX,dword ptr [EDX + 0x7c]
005bc483 : LEA ECX,[ESP + 0x14]
005bc487 : PUSH ECX
005bc488 : MOV ECX,EAX
005bc48a : CALL EDX
005bc48c : LEA EAX,[ESP + 0x14]
005bc490 : PUSH EAX
005bc491 : LEA ECX,[ESP + 0x28]
005bc495 : PUSH ESI
005bc496 : PUSH ECX
005bc497 : CALL 0x005bc370
005bc49c : MOV ECX,dword ptr [ESP + 0x4c]
005bc4a0 : ADD ESP,0xc
005bc4a3 : PUSH EAX
005bc4a4 : CALL 0x005268b0
005bc4a9 : LEA ECX,[ESP + 0x24]
005bc4ad : CALL 0x00526bc0
005bc4b2 : POP EDI
005bc4b3 : POP ESI
005bc4b4 : POP EBP
005bc4b5 : MOV AL,0x1
005bc4b7 : POP EBX
005bc4b8 : ADD ESP,0x24
005bc4bb : RET 0xc
005bc4be : CMP byte ptr [ESI + 0x7c],0x6
005bc4c2 : MOV EAX,dword ptr [ESI + 0x78]
005bc4c5 : PUSH 0x0
005bc4c7 : SETA BL
005bc4ca : ADD EAX,0x8
005bc4cd : PUSH 0x8
005bc4cf : PUSH 0xb90fa4
005bc4d4 : LEA ECX,[EAX + 0x24c]
005bc4da : CALL 0x00525380
005bc4df : MOV EDI,EAX
005bc4e1 : INC dword ptr [EDI + 0x8]
005bc4e4 : TEST BL,BL
005bc4e6 : JZ 0x005bc4ed
005bc4e8 : CMP EDI,dword ptr [EBP]
005bc4eb : JMP 0x005bc511
005bc4ed : CMP dword ptr [EDI + 0x4],0x0
005bc4f1 : JNZ 0x005bc4fa
005bc4f3 : MOV ECX,EDI
005bc4f5 : CALL 0x00525a80
005bc4fa : MOV ECX,dword ptr [EBP]
005bc4fd : CMP dword ptr [ECX + 0x4],0x0
005bc501 : JNZ 0x005bc508
005bc503 : CALL 0x00525a80
005bc508 : MOV EDX,dword ptr [EBP]
005bc50b : MOV EAX,dword ptr [EDI + 0x4]
005bc50e : CMP EAX,dword ptr [EDX + 0x4]
005bc511 : SETZ BL
005bc514 : ADD dword ptr [EDI + 0x8],-0x1
005bc518 : JNZ 0x005bc521
005bc51a : MOV ECX,EDI
005bc51c : CALL 0x00525340
005bc521 : TEST BL,BL
005bc523 : JZ 0x005bc5b4
005bc529 : MOV ECX,ESI
005bc52b : CALL 0x005296a0
005bc530 : MOV EDX,dword ptr [EAX]
005bc532 : MOV EDX,dword ptr [EDX + 0x80]
005bc538 : LEA ECX,[ESP + 0x14]
005bc53c : PUSH ECX
005bc53d : MOV ECX,EAX
005bc53f : CALL EDX
005bc541 : FLD float ptr [ESP + 0x14]
005bc545 : FLD float ptr [ESP + 0x1c]
005bc549 : FCOMPP
005bc54b : FNSTSW AX
005bc54d : TEST AH,0x41
005bc550 : JNP 0x005bc567
005bc552 : FLD float ptr [ESP + 0x18]
005bc556 : FLD float ptr [ESP + 0x20]
005bc55a : FCOMPP
005bc55c : FNSTSW AX
005bc55e : TEST AH,0x41
005bc561 : JP 0x005bc48c
005bc567 : MOV ECX,ESI
005bc569 : CALL 0x005296a0
005bc56e : MOV EDX,dword ptr [EAX]
005bc570 : MOV EDX,dword ptr [EDX + 0x7c]
005bc573 : LEA ECX,[ESP + 0x24]
005bc577 : PUSH ECX
005bc578 : MOV ECX,EAX
005bc57a : CALL EDX
005bc57c : FLD float ptr [EAX + 0x4]
005bc57f : FSTP float ptr [ESP + 0x38]
005bc583 : FLD float ptr [EAX + 0x8]
005bc586 : FSTP float ptr [ESP + 0x3c]
005bc58a : FLD float ptr [EAX + 0xc]
005bc58d : FSTP float ptr [ESP + 0x10]
005bc591 : FLD float ptr [EAX]
005bc593 : FSTP float ptr [ESP + 0x14]
005bc597 : FLD float ptr [ESP + 0x38]
005bc59b : FSTP float ptr [ESP + 0x18]
005bc59f : FLD float ptr [ESP + 0x3c]
005bc5a3 : FSTP float ptr [ESP + 0x1c]
005bc5a7 : FLD float ptr [ESP + 0x10]
005bc5ab : FSTP float ptr [ESP + 0x20]
005bc5af : JMP 0x005bc48c
005bc5b4 : CMP byte ptr [ESI + 0x7c],0x6
005bc5b8 : MOV EAX,dword ptr [ESI + 0x78]
005bc5bb : PUSH 0x0
005bc5bd : SETA BL
005bc5c0 : ADD EAX,0x8
005bc5c3 : PUSH 0xc
005bc5c5 : PUSH 0xb90f94
005bc5ca : LEA ECX,[EAX + 0x24c]
005bc5d0 : CALL 0x00525380
005bc5d5 : MOV EDI,EAX
005bc5d7 : INC dword ptr [EDI + 0x8]
005bc5da : TEST BL,BL
005bc5dc : JZ 0x005bc5e3
005bc5de : CMP EDI,dword ptr [EBP]
005bc5e1 : JMP 0x005bc607
005bc5e3 : CMP dword ptr [EDI + 0x4],0x0
005bc5e7 : JNZ 0x005bc5f0
005bc5e9 : MOV ECX,EDI
005bc5eb : CALL 0x00525a80
005bc5f0 : MOV ECX,dword ptr [EBP]
005bc5f3 : CMP dword ptr [ECX + 0x4],0x0
005bc5f7 : JNZ 0x005bc5fe
005bc5f9 : CALL 0x00525a80
005bc5fe : MOV EDX,dword ptr [EBP]
005bc601 : MOV EAX,dword ptr [EDI + 0x4]
005bc604 : CMP EAX,dword ptr [EDX + 0x4]
005bc607 : SETZ BL
005bc60a : ADD dword ptr [EDI + 0x8],-0x1
005bc60e : JNZ 0x005bc617
005bc610 : MOV ECX,EDI
005bc612 : CALL 0x00525340
005bc617 : TEST BL,BL
005bc619 : JZ 0x005bc66b
005bc61b : MOV ECX,ESI
005bc61d : CALL 0x005296a0
005bc622 : MOV EDX,dword ptr [EAX]
005bc624 : MOV ECX,EAX
005bc626 : MOV EAX,dword ptr [EDX + 0x4]
005bc629 : CALL EAX
005bc62b : MOV EDX,dword ptr [EAX]
005bc62d : MOV EDX,dword ptr [EDX + 0x28]
005bc630 : LEA ECX,[ESP + 0x24]
005bc634 : PUSH ECX
005bc635 : MOV ECX,EAX
005bc637 : CALL EDX
005bc639 : LEA EAX,[ESP + 0x24]
005bc63d : PUSH EAX
005bc63e : LEA ECX,[ESP + 0x18]
005bc642 : PUSH ESI
005bc643 : PUSH ECX
005bc644 : CALL 0x005bc370
005bc649 : MOV ECX,dword ptr [ESP + 0x4c]
005bc64d : ADD ESP,0xc
005bc650 : PUSH EAX
005bc651 : CALL 0x005268b0
005bc656 : LEA ECX,[ESP + 0x14]
005bc65a : CALL 0x00526bc0
005bc65f : POP EDI
005bc660 : POP ESI
005bc661 : POP EBP
005bc662 : MOV AL,0x1
005bc664 : POP EBX
005bc665 : ADD ESP,0x24
005bc668 : RET 0xc
005bc66b : MOV EDX,dword ptr [ESP + 0x40]
005bc66f : MOV ECX,dword ptr [ESP + 0x10]
005bc673 : PUSH EDX
005bc674 : PUSH EBP
005bc675 : PUSH ESI
005bc676 : CALL 0x00586920
005bc67b : POP EDI
005bc67c : POP ESI
005bc67d : POP EBP
005bc67e : POP EBX
005bc67f : ADD ESP,0x24
005bc682 : RET 0xc
