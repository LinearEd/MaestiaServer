PROGRAM  : Maestia.exe
FUNCTION : FUN_005a3b80
ENTRY    : 005a3b80
BODY     : [[005a3b80, 005a3bf9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005a3b80(undefined4 param_1,int param_2)

{
  int iVar1;
  int *in_ECX;
  uint uVar2;
  
  if (param_2 == 0) {
    if (*in_ECX != 0) {
      FUN_00515cf0(*in_ECX);
      *in_ECX = 0;
    }
    in_ECX[2] = 0;
    return;
  }
  uVar2 = param_2 + 3U >> 2;
  if (*in_ECX != 0) {
    iVar1 = FUN_00515c80(*in_ECX,uVar2 * 0x90);
    in_ECX[2] = uVar2 * 4;
    *in_ECX = iVar1;
    return;
  }
  param_2 = 0xc2;
  iVar1 = FUN_00515d60(param_1,uVar2 * 0x90,&param_2);
  in_ECX[2] = uVar2 * 4;
  *in_ECX = iVar1;
  return;
}



============================================================
DISASSEMBLY
============================================================
005a3b80 : MOV EAX,dword ptr [ESP + 0x8]
005a3b84 : PUSH EDI
005a3b85 : MOV EDI,ECX
005a3b87 : TEST EAX,EAX
005a3b89 : JNZ 0x005a3ba8
005a3b8b : MOV EAX,dword ptr [EDI]
005a3b8d : TEST EAX,EAX
005a3b8f : JZ 0x005a3b9d
005a3b91 : PUSH EAX
005a3b92 : CALL 0x00515cf0
005a3b97 : MOV dword ptr [EDI],0x0
005a3b9d : MOV dword ptr [EDI + 0x8],0x0
005a3ba4 : POP EDI
005a3ba5 : RET 0x8
005a3ba8 : PUSH ESI
005a3ba9 : LEA ESI,[EAX + 0x3]
005a3bac : MOV EAX,dword ptr [EDI]
005a3bae : SHR ESI,0x2
005a3bb1 : ADD ESI,ESI
005a3bb3 : ADD ESI,ESI
005a3bb5 : TEST EAX,EAX
005a3bb7 : JZ 0x005a3bd1
005a3bb9 : LEA ECX,[ESI + ESI*0x8]
005a3bbc : ADD ECX,ECX
005a3bbe : ADD ECX,ECX
005a3bc0 : PUSH ECX
005a3bc1 : PUSH EAX
005a3bc2 : CALL 0x00515c80
005a3bc7 : MOV dword ptr [EDI + 0x8],ESI
005a3bca : POP ESI
005a3bcb : MOV dword ptr [EDI],EAX
005a3bcd : POP EDI
005a3bce : RET 0x8
005a3bd1 : MOV ECX,dword ptr [ESP + 0xc]
005a3bd5 : LEA EAX,[ESI + ESI*0x8]
005a3bd8 : LEA EDX,[ESP + 0x10]
005a3bdc : ADD EAX,EAX
005a3bde : PUSH EDX
005a3bdf : ADD EAX,EAX
005a3be1 : PUSH EAX
005a3be2 : PUSH ECX
005a3be3 : MOV dword ptr [ESP + 0x1c],0xc2
005a3beb : CALL 0x00515d60
005a3bf0 : MOV dword ptr [EDI + 0x8],ESI
005a3bf3 : POP ESI
005a3bf4 : MOV dword ptr [EDI],EAX
005a3bf6 : POP EDI
005a3bf7 : RET 0x8
