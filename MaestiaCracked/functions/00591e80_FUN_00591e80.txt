PROGRAM  : Maestia.exe
FUNCTION : FUN_00591e80
ENTRY    : 00591e80
BODY     : [[00591e80, 0059201e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00591e80(int param_1)

{
  int iVar1;
  char cVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined4 uVar7;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined1 auStack_18 [24];
  
  iVar1 = param_1;
  if (*(int **)(param_1 + 8) == (int *)0x0) {
    param_1 = *(int *)(*(int *)(param_1 + 0x18) + 0x74);
  }
  else {
    iVar4 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar4 != 2) {
      return;
    }
    if (*(int *)(param_1 + 8) == 0) {
      return;
    }
    param_1 = *(int *)(param_1 + 8) + -0x68;
  }
  if ((param_1 == 0) || (*(int *)(iVar1 + 0x1c) < 1)) {
    return;
  }
  uVar7 = *(undefined4 *)(iVar1 + 0x18);
  FUN_00526260(0);
  iVar4 = FUN_00526fa0(uVar7);
  if (iVar4 == 0) {
    return;
  }
  *(uint *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1U & 0x8fffffff;
  iVar5 = (**(code **)(*(int *)(iVar4 + 0x10) + 8))();
  if ((iVar5 != 0x1a) || (iVar4 = *(int *)(iVar4 + 0x30), iVar4 == 0)) {
    FUN_00503db0();
    return;
  }
  GMatrix2D::SetIdentity((GMatrix2D *)&uStack_30);
  if (1 < *(int *)(iVar1 + 0x1c)) {
    uVar7 = *(undefined4 *)(iVar1 + 0x18);
    FUN_00526260(1);
    iVar5 = FUN_00526fa0(uVar7);
    if ((iVar5 != 0) && (iVar5 = (**(code **)(*(int *)(iVar5 + 0x10) + 8))(), iVar5 == 0xf)) {
      puVar6 = (undefined4 *)FUN_005c7cd0(auStack_18,*(undefined4 *)(iVar1 + 0x18));
      uStack_30 = *puVar6;
      uStack_2c = puVar6[1];
      uStack_28 = puVar6[2];
      uStack_24 = puVar6[3];
      uStack_20 = puVar6[4];
      uStack_1c = puVar6[5];
    }
    if (2 < *(int *)(iVar1 + 0x1c)) {
      uVar7 = *(undefined4 *)(iVar1 + 0x18);
      FUN_00526260(2);
      cVar2 = FUN_00526120(uVar7);
      if (3 < *(int *)(iVar1 + 0x1c)) {
        uVar7 = *(undefined4 *)(iVar1 + 0x18);
        FUN_00526260(3);
        cVar3 = FUN_00526120(uVar7);
        if (cVar3 != '\0') {
          cVar2 = (cVar2 == '\0') + '@';
          goto LAB_00591ff0;
        }
      }
      if (cVar2 == '\0') {
        cVar2 = 'C';
        goto LAB_00591ff0;
      }
    }
  }
  cVar2 = 'B';
LAB_00591ff0:
  FUN_0058dda0(cVar2,iVar4,&uStack_30);
  FUN_00503db0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00591e80 : SUB ESP,0x34
00591e83 : PUSH ESI
00591e84 : MOV ESI,dword ptr [ESP + 0x3c]
00591e88 : MOV ECX,dword ptr [ESI + 0x8]
00591e8b : TEST ECX,ECX
00591e8d : JNZ 0x00591e9b
00591e8f : MOV EAX,dword ptr [ESI + 0x18]
00591e92 : MOV ECX,dword ptr [EAX + 0x74]
00591e95 : MOV dword ptr [ESP + 0x3c],ECX
00591e99 : JMP 0x00591ebd
00591e9b : MOV EDX,dword ptr [ECX]
00591e9d : MOV EAX,dword ptr [EDX + 0x8]
00591ea0 : CALL EAX
00591ea2 : CMP EAX,0x2
00591ea5 : JNZ 0x0059201a
00591eab : MOV EAX,dword ptr [ESI + 0x8]
00591eae : TEST EAX,EAX
00591eb0 : JZ 0x0059201a
00591eb6 : ADD EAX,-0x68
00591eb9 : MOV dword ptr [ESP + 0x3c],EAX
00591ebd : CMP dword ptr [ESP + 0x3c],0x0
00591ec2 : JZ 0x0059201a
00591ec8 : CMP dword ptr [ESI + 0x1c],0x0
00591ecc : JLE 0x0059201a
00591ed2 : MOV ECX,dword ptr [ESI + 0x18]
00591ed5 : PUSH EBP
00591ed6 : PUSH ECX
00591ed7 : PUSH 0x0
00591ed9 : MOV ECX,ESI
00591edb : CALL 0x00526260
00591ee0 : MOV ECX,EAX
00591ee2 : CALL 0x00526fa0
00591ee7 : MOV EBP,EAX
00591ee9 : TEST EBP,EBP
00591eeb : JZ 0x00592019
00591ef1 : MOV EDX,dword ptr [EBP + 0x8]
00591ef4 : INC EDX
00591ef5 : AND EDX,0x8fffffff
00591efb : MOV dword ptr [EBP + 0x8],EDX
00591efe : MOV EAX,dword ptr [EBP + 0x10]
00591f01 : MOV EDX,dword ptr [EAX + 0x8]
00591f04 : LEA ECX,[EBP + 0x10]
00591f07 : CALL EDX
00591f09 : CMP EAX,0x1a
00591f0c : JNZ 0x00592012
00591f12 : MOV EAX,dword ptr [EBP + 0x30]
00591f15 : MOV dword ptr [ESP + 0x8],EAX
00591f19 : TEST EAX,EAX
00591f1b : JZ 0x00592012
00591f21 : PUSH EBX
00591f22 : LEA ECX,[ESP + 0x10]
00591f26 : CALL 0x00522b80
00591f2b : CMP dword ptr [ESI + 0x1c],0x1
00591f2f : JLE 0x00591fe4
00591f35 : MOV EAX,dword ptr [ESI + 0x18]
00591f38 : PUSH EDI
00591f39 : PUSH EAX
00591f3a : PUSH 0x1
00591f3c : MOV ECX,ESI
00591f3e : CALL 0x00526260
00591f43 : MOV ECX,EAX
00591f45 : CALL 0x00526fa0
00591f4a : MOV EDI,EAX
00591f4c : TEST EDI,EDI
00591f4e : JZ 0x00591f99
00591f50 : MOV EDX,dword ptr [EDI + 0x10]
00591f53 : MOV EAX,dword ptr [EDX + 0x8]
00591f56 : LEA ECX,[EDI + 0x10]
00591f59 : CALL EAX
00591f5b : CMP EAX,0xf
00591f5e : JNZ 0x00591f99
00591f60 : MOV ECX,dword ptr [ESI + 0x18]
00591f63 : PUSH ECX
00591f64 : LEA EDX,[ESP + 0x30]
00591f68 : PUSH EDX
00591f69 : MOV ECX,EDI
00591f6b : CALL 0x005c7cd0
00591f70 : FLD float ptr [EAX]
00591f72 : FSTP float ptr [ESP + 0x14]
00591f76 : FLD float ptr [EAX + 0x4]
00591f79 : FSTP float ptr [ESP + 0x18]
00591f7d : FLD float ptr [EAX + 0x8]
00591f80 : FSTP float ptr [ESP + 0x1c]
00591f84 : FLD float ptr [EAX + 0xc]
00591f87 : FSTP float ptr [ESP + 0x20]
00591f8b : FLD float ptr [EAX + 0x10]
00591f8e : FSTP float ptr [ESP + 0x24]
00591f92 : FLD float ptr [EAX + 0x14]
00591f95 : FSTP float ptr [ESP + 0x28]
00591f99 : CMP dword ptr [ESI + 0x1c],0x2
00591f9d : POP EDI
00591f9e : JLE 0x00591fe4
00591fa0 : MOV EAX,dword ptr [ESI + 0x18]
00591fa3 : PUSH EAX
00591fa4 : PUSH 0x2
00591fa6 : MOV ECX,ESI
00591fa8 : CALL 0x00526260
00591fad : MOV ECX,EAX
00591faf : CALL 0x00526120
00591fb4 : CMP dword ptr [ESI + 0x1c],0x3
00591fb8 : MOV BL,AL
00591fba : JLE 0x00591fe0
00591fbc : MOV ECX,dword ptr [ESI + 0x18]
00591fbf : PUSH ECX
00591fc0 : PUSH 0x3
00591fc2 : MOV ECX,ESI
00591fc4 : CALL 0x00526260
00591fc9 : MOV ECX,EAX
00591fcb : CALL 0x00526120
00591fd0 : TEST AL,AL
00591fd2 : JZ 0x00591fe0
00591fd4 : XOR EAX,EAX
00591fd6 : TEST BL,BL
00591fd8 : SETZ AL
00591fdb : ADD EAX,0x40
00591fde : JMP 0x00591ff0
00591fe0 : TEST BL,BL
00591fe2 : JZ 0x00591feb
00591fe4 : MOV EAX,0x42
00591fe9 : JMP 0x00591ff0
00591feb : MOV EAX,0x43
00591ff0 : MOV ECX,dword ptr [ESP + 0xc]
00591ff4 : LEA EDX,[ESP + 0x10]
00591ff8 : PUSH EDX
00591ff9 : PUSH ECX
00591ffa : MOV ECX,dword ptr [ESP + 0x4c]
00591ffe : PUSH EAX
00591fff : CALL 0x0058dda0
00592004 : MOV ECX,EBP
00592006 : CALL 0x00503db0
0059200b : POP EBX
0059200c : POP EBP
0059200d : POP ESI
0059200e : ADD ESP,0x34
00592011 : RET
00592012 : MOV ECX,EBP
00592014 : CALL 0x00503db0
00592019 : POP EBP
0059201a : POP ESI
0059201b : ADD ESP,0x34
0059201e : RET
