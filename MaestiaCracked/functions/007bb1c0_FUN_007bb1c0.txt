PROGRAM  : Maestia.exe
FUNCTION : FUN_007bb1c0
ENTRY    : 007bb1c0
BODY     : [[007bb1c0, 007bb27c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bb1c0(void)

{
  int *piVar1;
  int iVar2;
  int in_ECX;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0d77f;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(in_ECX + 4);
  local_18 = 0;
  local_20 = ".\\mss\\AvaMssMgr.cpp";
  local_1c = 0x5ed;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  if ((((*(int *)(in_ECX + 0x20) != 0) && (piVar1 = *(int **)(in_ECX + 0x7c), piVar1 != (int *)0x0))
      && (*piVar1 != 0)) && (iVar2 = _AIL_sample_status_4(*piVar1), iVar2 == 4)) {
    _AIL_end_sample_4(*piVar1);
  }
  if (local_18 != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_24);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bb1c0 : PUSH EBP
007bb1c1 : MOV EBP,ESP
007bb1c3 : PUSH -0x1
007bb1c5 : PUSH 0xb0d77f
007bb1ca : MOV EAX,FS:[0x0]
007bb1d0 : PUSH EAX
007bb1d1 : SUB ESP,0x14
007bb1d4 : PUSH EBX
007bb1d5 : PUSH ESI
007bb1d6 : MOV EAX,[0x00d66fa0]
007bb1db : XOR EAX,EBP
007bb1dd : PUSH EAX
007bb1de : LEA EAX,[EBP + -0xc]
007bb1e1 : MOV FS:[0x0],EAX
007bb1e7 : MOV ESI,ECX
007bb1e9 : LEA ECX,[EBP + -0x20]
007bb1ec : LEA EAX,[ESI + 0x4]
007bb1ef : XOR EBX,EBX
007bb1f1 : PUSH ECX
007bb1f2 : MOV dword ptr [EBP + -0x14],EBX
007bb1f5 : MOV dword ptr [EBP + -0x20],EAX
007bb1f8 : MOV dword ptr [EBP + -0x1c],0xc190b0
007bb1ff : MOV dword ptr [EBP + -0x18],0x5ed
007bb206 : MOV dword ptr [EBP + -0x10],0x1
007bb20d : CALL 0x006ef1a0
007bb212 : MOV dword ptr [EBP + -0x4],EBX
007bb215 : CMP dword ptr [ESI + 0x20],EBX
007bb218 : JNZ 0x007bb22c
007bb21a : MOV dword ptr [EBP + -0x4],0xffffffff
007bb221 : CMP dword ptr [EBP + -0x14],EBX
007bb224 : JZ 0x007bb26c
007bb226 : MOV EDX,dword ptr [EBP + -0x20]
007bb229 : PUSH EDX
007bb22a : JMP 0x007bb263
007bb22c : MOV ESI,dword ptr [ESI + 0x7c]
007bb22f : CMP ESI,EBX
007bb231 : JZ 0x007bb253
007bb233 : MOV EAX,dword ptr [ESI]
007bb235 : CMP EAX,EBX
007bb237 : JZ 0x007bb253
007bb239 : PUSH EAX
007bb23a : CALL dword ptr [0x00b85708]
007bb240 : CMP EAX,0x4
007bb243 : SETZ AL
007bb246 : CMP AL,BL
007bb248 : JZ 0x007bb253
007bb24a : MOV EAX,dword ptr [ESI]
007bb24c : PUSH EAX
007bb24d : CALL dword ptr [0x00b856f4]
007bb253 : MOV dword ptr [EBP + -0x4],0xffffffff
007bb25a : CMP dword ptr [EBP + -0x14],EBX
007bb25d : JZ 0x007bb26c
007bb25f : MOV ECX,dword ptr [EBP + -0x20]
007bb262 : PUSH ECX
007bb263 : CALL dword ptr [0x00b8511c]
007bb269 : MOV dword ptr [EBP + -0x14],EBX
007bb26c : MOV ECX,dword ptr [EBP + -0xc]
007bb26f : MOV dword ptr FS:[0x0],ECX
007bb276 : POP ECX
007bb277 : POP ESI
007bb278 : POP EBX
007bb279 : MOV ESP,EBP
007bb27b : POP EBP
007bb27c : RET
