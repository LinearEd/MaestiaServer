PROGRAM  : Maestia.exe
FUNCTION : FUN_0040cbf0
ENTRY    : 0040cbf0
BODY     : [[0040cbf0, 0040ce0d]]

============================================================
DECOMPILED C CODE
============================================================

uint * FUN_0040cbf0(uint *param_1,float *param_2,float *param_3,undefined4 param_4)

{
  float fVar1;
  float fVar2;
  float *pfVar3;
  float *pfVar4;
  float *pfVar5;
  float *pfVar6;
  float *pfVar7;
  float *pfVar8;
  float *pfVar9;
  float *pfVar10;
  
  pfVar10 = param_2 + (((int)param_3 - (int)param_2 >> 3) - ((int)param_3 - (int)param_2 >> 0x1f) >>
                      1) * 2;
  FUN_0040d1c0(param_2,pfVar10,param_3 + -2,param_4);
  pfVar8 = pfVar10 + 2;
  for (; param_2 < pfVar10; pfVar10 = pfVar10 + -2) {
    if ((*pfVar10 < pfVar10[-2]) || (pfVar10[-2] < *pfVar10)) break;
  }
  pfVar9 = pfVar8;
  pfVar7 = pfVar10;
  if (pfVar8 < param_3) {
    do {
      pfVar9 = pfVar8;
      if ((*pfVar10 < *pfVar8) || (*pfVar8 < *pfVar10)) break;
      pfVar8 = pfVar8 + 2;
      pfVar9 = pfVar8;
    } while (pfVar8 < param_3);
  }
joined_r0x0040cc71:
  do {
    pfVar4 = pfVar9;
    pfVar3 = pfVar8;
    pfVar5 = pfVar10;
    pfVar6 = pfVar7;
    pfVar9 = pfVar4;
    if (param_3 <= pfVar3) {
joined_r0x0040ccb9:
      for (; param_2 < pfVar5; pfVar5 = pfVar5 + -2) {
        pfVar7 = pfVar10 + -2;
        pfVar8 = pfVar6;
        if (*pfVar7 <= *pfVar6) {
          if (*pfVar7 < *pfVar6) break;
          pfVar8 = pfVar6 + -2;
          if (pfVar8 != pfVar7) {
            fVar1 = *pfVar8;
            fVar2 = pfVar6[-1];
            *pfVar8 = *pfVar7;
            pfVar6[-1] = pfVar10[-1];
            *pfVar7 = fVar1;
            pfVar10[-1] = fVar2;
          }
        }
        pfVar10 = pfVar7;
        pfVar6 = pfVar8;
      }
      if (pfVar5 == param_2) {
        if (pfVar3 == param_3) {
          param_1[1] = (uint)pfVar4;
          *param_1 = (uint)pfVar6;
          return param_1;
        }
        if ((pfVar4 != pfVar3) && (pfVar6 != pfVar4)) {
          fVar1 = pfVar6[1];
          fVar2 = *pfVar6;
          *pfVar6 = *pfVar4;
          pfVar6[1] = pfVar4[1];
          *pfVar4 = fVar2;
          pfVar4[1] = fVar1;
        }
        pfVar8 = pfVar3 + 2;
        pfVar9 = pfVar4 + 2;
        pfVar10 = pfVar5;
        pfVar7 = pfVar6 + 2;
        if (pfVar6 != pfVar3) {
          fVar1 = *pfVar6;
          fVar2 = pfVar6[1];
          *pfVar6 = *pfVar3;
          pfVar6[1] = pfVar3[1];
          *pfVar3 = fVar1;
          pfVar3[1] = fVar2;
        }
      }
      else {
        pfVar10 = pfVar5 + -2;
        if (pfVar3 == param_3) {
          pfVar7 = pfVar6 + -2;
          if (pfVar10 != pfVar7) {
            fVar1 = pfVar5[-1];
            fVar2 = *pfVar10;
            *pfVar10 = *pfVar7;
            pfVar5[-1] = pfVar6[-1];
            *pfVar7 = fVar2;
            pfVar6[-1] = fVar1;
          }
          pfVar9 = pfVar4 + -2;
          pfVar8 = pfVar3;
          if (pfVar7 != pfVar9) {
            fVar1 = pfVar6[-1];
            fVar2 = *pfVar7;
            *pfVar7 = *pfVar9;
            pfVar6[-1] = pfVar4[-1];
            *pfVar9 = fVar2;
            pfVar4[-1] = fVar1;
          }
        }
        else {
          pfVar8 = pfVar3 + 2;
          pfVar7 = pfVar6;
          if (pfVar3 != pfVar10) {
            fVar1 = *pfVar3;
            fVar2 = pfVar3[1];
            *pfVar3 = *pfVar10;
            pfVar3[1] = pfVar5[-1];
            *pfVar10 = fVar1;
            pfVar5[-1] = fVar2;
          }
        }
      }
      goto joined_r0x0040cc71;
    }
    if (*pfVar7 <= *pfVar3) {
      if (*pfVar7 < *pfVar3) goto joined_r0x0040ccb9;
      pfVar9 = pfVar4 + 2;
      if (pfVar4 != pfVar3) {
        fVar1 = *pfVar4;
        fVar2 = pfVar4[1];
        *pfVar4 = *pfVar3;
        pfVar4[1] = pfVar3[1];
        *pfVar3 = fVar1;
        pfVar3[1] = fVar2;
      }
    }
    pfVar8 = pfVar3 + 2;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0040cbf0 : PUSH EBP
0040cbf1 : MOV EBP,ESP
0040cbf3 : MOV ECX,dword ptr [EBP + 0xc]
0040cbf6 : SUB ESP,0x3c
0040cbf9 : PUSH EBX
0040cbfa : PUSH ESI
0040cbfb : MOV ESI,dword ptr [EBP + 0x10]
0040cbfe : MOV EAX,ESI
0040cc00 : SUB EAX,ECX
0040cc02 : SAR EAX,0x3
0040cc05 : CDQ
0040cc06 : SUB EAX,EDX
0040cc08 : MOV EDX,dword ptr [EBP + 0x14]
0040cc0b : PUSH EDI
0040cc0c : SAR EAX,0x1
0040cc0e : LEA EDI,[ECX + EAX*0x8]
0040cc11 : PUSH EDX
0040cc12 : LEA EAX,[ESI + -0x8]
0040cc15 : PUSH EAX
0040cc16 : PUSH EDI
0040cc17 : PUSH ECX
0040cc18 : CALL 0x0040d1c0
0040cc1d : MOV ECX,dword ptr [EBP + 0xc]
0040cc20 : ADD ESP,0x10
0040cc23 : MOV EAX,EDI
0040cc25 : LEA ESI,[EDI + 0x8]
0040cc28 : CMP ECX,EDI
0040cc2a : JNC 0x0040cc4a
0040cc2c : LEA ESP,[ESP]
0040cc30 : MOVSS XMM0,dword ptr [EAX + -0x8]
0040cc35 : MOVSS XMM1,dword ptr [EAX]
0040cc39 : COMISS XMM0,XMM1
0040cc3c : JA 0x0040cc4a
0040cc3e : COMISS XMM1,XMM0
0040cc41 : JA 0x0040cc4a
0040cc43 : ADD EAX,-0x8
0040cc46 : CMP ECX,EAX
0040cc48 : JC 0x0040cc30
0040cc4a : MOV ECX,dword ptr [EBP + 0x10]
0040cc4d : CMP ESI,ECX
0040cc4f : JNC 0x0040cc6a
0040cc51 : MOVSS XMM1,dword ptr [EAX]
0040cc55 : MOVSS XMM0,dword ptr [ESI]
0040cc59 : COMISS XMM0,XMM1
0040cc5c : JA 0x0040cc6a
0040cc5e : COMISS XMM1,XMM0
0040cc61 : JA 0x0040cc6a
0040cc63 : ADD ESI,0x8
0040cc66 : CMP ESI,ECX
0040cc68 : JC 0x0040cc55
0040cc6a : MOV EDX,ESI
0040cc6c : MOV EDI,EAX
0040cc6e : CMP EDX,dword ptr [EBP + 0x10]
0040cc71 : JNC 0x0040ccb6
0040cc73 : MOVSS XMM0,dword ptr [EAX]
0040cc77 : MOVSS XMM1,dword ptr [EDX]
0040cc7b : COMISS XMM0,XMM1
0040cc7e : JA 0x0040ccae
0040cc80 : COMISS XMM1,XMM0
0040cc83 : JA 0x0040ccb6
0040cc85 : MOV ECX,ESI
0040cc87 : ADD ESI,0x8
0040cc8a : CMP ECX,EDX
0040cc8c : JZ 0x0040ccae
0040cc8e : MOV EBX,dword ptr [ECX]
0040cc90 : MOV dword ptr [EBP + -0xc],EBX
0040cc93 : MOV EBX,dword ptr [ECX + 0x4]
0040cc96 : MOV dword ptr [EBP + -0x8],EBX
0040cc99 : MOV EBX,dword ptr [EDX]
0040cc9b : MOV dword ptr [ECX],EBX
0040cc9d : MOV EBX,dword ptr [EDX + 0x4]
0040cca0 : MOV dword ptr [ECX + 0x4],EBX
0040cca3 : MOV ECX,dword ptr [EBP + -0xc]
0040cca6 : MOV dword ptr [EDX],ECX
0040cca8 : MOV ECX,dword ptr [EBP + -0x8]
0040ccab : MOV dword ptr [EDX + 0x4],ECX
0040ccae : ADD EDX,0x8
0040ccb1 : CMP EDX,dword ptr [EBP + 0x10]
0040ccb4 : JC 0x0040cc73
0040ccb6 : CMP EDI,dword ptr [EBP + 0xc]
0040ccb9 : JBE 0x0040cd05
0040ccbb : LEA ECX,[EDI + -0x8]
0040ccbe : MOVSS XMM0,dword ptr [ECX]
0040ccc2 : MOVSS XMM1,dword ptr [EAX]
0040ccc6 : COMISS XMM0,XMM1
0040ccc9 : JA 0x0040ccf7
0040cccb : COMISS XMM1,XMM0
0040ccce : JA 0x0040cd02
0040ccd0 : SUB EAX,0x8
0040ccd3 : CMP EAX,ECX
0040ccd5 : JZ 0x0040ccf7
0040ccd7 : MOV EBX,dword ptr [EAX]
0040ccd9 : MOV dword ptr [EBP + -0x14],EBX
0040ccdc : MOV EBX,dword ptr [EAX + 0x4]
0040ccdf : MOV dword ptr [EBP + -0x10],EBX
0040cce2 : MOV EBX,dword ptr [ECX]
0040cce4 : MOV dword ptr [EAX],EBX
0040cce6 : MOV EBX,dword ptr [ECX + 0x4]
0040cce9 : MOV dword ptr [EAX + 0x4],EBX
0040ccec : MOV EBX,dword ptr [EBP + -0x14]
0040ccef : MOV dword ptr [ECX],EBX
0040ccf1 : MOV EBX,dword ptr [EBP + -0x10]
0040ccf4 : MOV dword ptr [ECX + 0x4],EBX
0040ccf7 : SUB EDI,0x8
0040ccfa : SUB ECX,0x8
0040ccfd : CMP dword ptr [EBP + 0xc],EDI
0040cd00 : JC 0x0040ccbe
0040cd02 : CMP EDI,dword ptr [EBP + 0xc]
0040cd05 : JNZ 0x0040cd78
0040cd07 : CMP EDX,dword ptr [EBP + 0x10]
0040cd0a : JZ 0x0040cdfd
0040cd10 : CMP ESI,EDX
0040cd12 : JZ 0x0040cd32
0040cd14 : CMP EAX,ESI
0040cd16 : JZ 0x0040cd32
0040cd18 : MOV EBX,dword ptr [EAX + 0x4]
0040cd1b : MOV ECX,dword ptr [EAX]
0040cd1d : MOV dword ptr [EBP + -0x28],EBX
0040cd20 : MOV EBX,dword ptr [ESI]
0040cd22 : MOV dword ptr [EAX],EBX
0040cd24 : MOV EBX,dword ptr [ESI + 0x4]
0040cd27 : MOV dword ptr [EAX + 0x4],EBX
0040cd2a : MOV dword ptr [ESI],ECX
0040cd2c : MOV ECX,dword ptr [EBP + -0x28]
0040cd2f : MOV dword ptr [ESI + 0x4],ECX
0040cd32 : MOV EBX,EDX
0040cd34 : MOV ECX,EAX
0040cd36 : ADD ESI,0x8
0040cd39 : ADD EDX,0x8
0040cd3c : ADD EAX,0x8
0040cd3f : MOV dword ptr [EBP + -0x4],EBX
0040cd42 : CMP ECX,EBX
0040cd44 : JZ 0x0040cc6e
0040cd4a : MOV EBX,dword ptr [ECX]
0040cd4c : MOV dword ptr [EBP + -0x1c],EBX
0040cd4f : MOV EBX,dword ptr [ECX + 0x4]
0040cd52 : MOV dword ptr [EBP + -0x18],EBX
0040cd55 : MOV EBX,dword ptr [EBP + -0x4]
0040cd58 : MOV EBX,dword ptr [EBX]
0040cd5a : MOV dword ptr [ECX],EBX
0040cd5c : MOV EBX,dword ptr [EBP + -0x4]
0040cd5f : MOV EBX,dword ptr [EBX + 0x4]
0040cd62 : MOV dword ptr [ECX + 0x4],EBX
0040cd65 : MOV EBX,dword ptr [EBP + -0x1c]
0040cd68 : MOV ECX,dword ptr [EBP + -0x4]
0040cd6b : MOV dword ptr [ECX],EBX
0040cd6d : MOV EBX,dword ptr [EBP + -0x18]
0040cd70 : MOV dword ptr [ECX + 0x4],EBX
0040cd73 : JMP 0x0040cc6e
0040cd78 : SUB EDI,0x8
0040cd7b : CMP EDX,dword ptr [EBP + 0x10]
0040cd7e : JNZ 0x0040cdcb
0040cd80 : SUB EAX,0x8
0040cd83 : CMP EDI,EAX
0040cd85 : JZ 0x0040cda1
0040cd87 : MOV EBX,dword ptr [EDI + 0x4]
0040cd8a : MOV ECX,dword ptr [EDI]
0040cd8c : MOV dword ptr [EBP + -0x30],EBX
0040cd8f : MOV EBX,dword ptr [EAX]
0040cd91 : MOV dword ptr [EDI],EBX
0040cd93 : MOV EBX,dword ptr [EAX + 0x4]
0040cd96 : MOV dword ptr [EDI + 0x4],EBX
0040cd99 : MOV dword ptr [EAX],ECX
0040cd9b : MOV ECX,dword ptr [EBP + -0x30]
0040cd9e : MOV dword ptr [EAX + 0x4],ECX
0040cda1 : SUB ESI,0x8
0040cda4 : CMP EAX,ESI
0040cda6 : JZ 0x0040cc6e
0040cdac : MOV EBX,dword ptr [EAX + 0x4]
0040cdaf : MOV ECX,dword ptr [EAX]
0040cdb1 : MOV dword ptr [EBP + -0x38],EBX
0040cdb4 : MOV EBX,dword ptr [ESI]
0040cdb6 : MOV dword ptr [EAX],EBX
0040cdb8 : MOV EBX,dword ptr [ESI + 0x4]
0040cdbb : MOV dword ptr [EAX + 0x4],EBX
0040cdbe : MOV dword ptr [ESI],ECX
0040cdc0 : MOV ECX,dword ptr [EBP + -0x38]
0040cdc3 : MOV dword ptr [ESI + 0x4],ECX
0040cdc6 : JMP 0x0040cc6e
0040cdcb : MOV ECX,EDX
0040cdcd : ADD EDX,0x8
0040cdd0 : CMP ECX,EDI
0040cdd2 : JZ 0x0040cc6e
0040cdd8 : MOV EBX,dword ptr [ECX]
0040cdda : MOV dword ptr [EBP + -0x24],EBX
0040cddd : MOV EBX,dword ptr [ECX + 0x4]
0040cde0 : MOV dword ptr [EBP + -0x20],EBX
0040cde3 : MOV EBX,dword ptr [EDI]
0040cde5 : MOV dword ptr [ECX],EBX
0040cde7 : MOV EBX,dword ptr [EDI + 0x4]
0040cdea : MOV dword ptr [ECX + 0x4],EBX
0040cded : MOV ECX,dword ptr [EBP + -0x24]
0040cdf0 : MOV dword ptr [EDI],ECX
0040cdf2 : MOV ECX,dword ptr [EBP + -0x20]
0040cdf5 : MOV dword ptr [EDI + 0x4],ECX
0040cdf8 : JMP 0x0040cc6e
0040cdfd : MOV ECX,dword ptr [EBP + 0x8]
0040ce00 : POP EDI
0040ce01 : MOV dword ptr [ECX + 0x4],ESI
0040ce04 : POP ESI
0040ce05 : MOV dword ptr [ECX],EAX
0040ce07 : MOV EAX,ECX
0040ce09 : POP EBX
0040ce0a : MOV ESP,EBP
0040ce0c : POP EBP
0040ce0d : RET
