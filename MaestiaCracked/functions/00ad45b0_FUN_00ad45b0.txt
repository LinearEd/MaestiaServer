PROGRAM  : Maestia.exe
FUNCTION : FUN_00ad45b0
ENTRY    : 00ad45b0
BODY     : [[00ad45b0, 00ad49b6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ad45b0(void)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  int *piVar4;
  int *piVar5;
  int iVar6;
  int in_ECX;
  undefined1 local_60 [4];
  undefined2 local_5c;
  undefined4 local_4c;
  uint local_48;
  undefined1 local_44 [4];
  undefined2 local_40;
  undefined4 local_30;
  uint local_2c;
  uint local_28;
  int *local_24;
  int local_20;
  uint local_1c;
  int local_18;
  char local_11;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar2 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5e5c0;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = *(int **)(in_ECX + 0x10);
  local_20 = in_ECX;
  FUN_004437f0(&local_24);
  if (((local_1c == *(uint *)(iVar2 + 0x44)) || (*(int **)(local_1c + 0x10) == (int *)0x0)) ||
     (iVar2 = (**(code **)(**(int **)(local_1c + 0x10) + 100))(uVar1), iVar2 == 0)) {
    if (*(char *)(in_ECX + 0x1b0) != '\0') {
      if (*(char *)(in_ECX + 0xe0) == '\0') {
        iVar2 = 0;
        do {
          iVar6 = (**(code **)(**(int **)(*DAT_00da9894 + 0x200) + 0x74))(iVar2,0);
          if (iVar6 == 0) {
            iVar6 = FUN_00703c00(0x160a);
            if (((iVar6 != 0) &&
                (uVar1 = *(uint *)(*(int *)(DAT_0172491c + 0x17c) + 0xa0),
                uVar1 < *(uint *)(iVar6 + 0x48 + iVar2 * 4))) && (*(uint *)(iVar6 + 0x48) <= uVar1))
            {
              iVar2 = 0;
            }
            FUN_008efa90(*(undefined4 *)(*(int *)(in_ECX + 0x28) + 0x2c),
                         *(undefined2 *)(in_ECX + 0x2c),*(undefined2 *)(in_ECX + 0x2e),0x95,iVar2,0)
            ;
            ExceptionList = local_10;
            return;
          }
          iVar2 = iVar2 + 1;
        } while (iVar2 < 3);
        local_40 = 0;
        local_2c = 7;
        local_30 = 0;
        FUN_00406360(L"IDS_SPECIALHALIDOM_NOT_EMPTYSLOT",0x20);
        local_8 = 4;
        piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar3 = FUN_0081d120(local_44);
        local_8._0_1_ = 5;
        (**(code **)(*piVar5 + 0x44))(uVar3,3);
        local_8 = CONCAT31(local_8._1_3_,4);
      }
      else {
        local_28 = *(uint *)(*DAT_00da9894 + 0x40);
        local_24 = (int *)0x0;
        local_11 = '\x01';
        local_1c = 0;
        piVar5 = DAT_00da9894;
        if (local_28 != 0) {
          do {
            if (local_11 != '\x01') break;
            piVar4 = (int *)FUN_008eb810();
            if (((piVar4 != (int *)0x0) && ((char)piVar4[0x19] != '\0')) &&
               (local_18 = 0, *(short *)((int)piVar4 + 0x72) != 0)) {
              do {
                piVar5 = DAT_00da9894;
                if (local_11 != '\x01') break;
                iVar2 = 0;
                do {
                  if (local_11 != '\x01') break;
                  piVar5 = (int *)(**(code **)(*piVar4 + 0x74))(iVar2,local_18);
                  if (((piVar5 != (int *)0x0) &&
                      (iVar6 = (**(code **)(*piVar5 + 0x20))(), iVar6 == 1)) &&
                     ((((char)((uint)piVar5[4] >> 0x10) == 't' &&
                       ((iVar6 = FUN_004049b0(piVar5[4]), iVar6 != 0 &&
                        (*(short *)(iVar6 + 0x180) == 3)))) &&
                      (local_24 = piVar5, (*(uint *)(iVar6 + 0x48) & 0x400) == 0)))) {
                    local_11 = '\0';
                  }
                  iVar2 = iVar2 + 1;
                } while (iVar2 < 5);
                local_18 = local_18 + 1;
                in_ECX = local_20;
                piVar5 = DAT_00da9894;
              } while (local_18 < (int)(uint)*(ushort *)((int)piVar4 + 0x72));
            }
            local_1c = local_1c + 1;
          } while (local_1c < local_28);
          if (local_24 != (int *)0x0) {
            *(undefined4 *)(*(int *)(*piVar5 + 0x19c) + 0x54) = *(undefined4 *)(in_ECX + 0xc);
            (**(code **)(*local_24 + 0xb4))();
            ExceptionList = local_10;
            return;
          }
        }
        local_40 = 0;
        local_2c = 7;
        local_30 = 0;
        FUN_00406360(L"IDS_UNIDENTIFIED_NOT_HAVE_ITEM",0x1e);
        local_8 = 2;
        piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar3 = FUN_0081d120(local_44);
        local_8._0_1_ = 3;
        (**(code **)(*piVar5 + 0x44))(uVar3,3);
        local_8 = CONCAT31(local_8._1_3_,2);
      }
      if (7 < local_48) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_48 = 7;
      local_4c = 0;
      local_5c = 0;
      local_8 = 0xffffffff;
      if (local_2c < 8) {
        ExceptionList = local_10;
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    FUN_009fb930();
  }
  else if (((DAT_0172491c != 0) && (*DAT_00da9894 != 0)) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0))
  {
    FUN_00406460(L"IDS_INSERT_SOCKET_NOT_SUPPORTED");
    local_8 = 0;
    piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_0081d120(local_60);
    local_8._0_1_ = 1;
    (**(code **)(*piVar5 + 0x44))(uVar3,3);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00406560();
    local_8 = 0xffffffff;
    FUN_00406560();
    ExceptionList = local_10;
    return;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00ad45b0 : PUSH EBP
00ad45b1 : MOV EBP,ESP
00ad45b3 : PUSH -0x1
00ad45b5 : PUSH 0xb5e5c0
00ad45ba : MOV EAX,FS:[0x0]
00ad45c0 : PUSH EAX
00ad45c1 : SUB ESP,0x50
00ad45c4 : PUSH EBX
00ad45c5 : PUSH ESI
00ad45c6 : PUSH EDI
00ad45c7 : MOV EAX,[0x00d66fa0]
00ad45cc : XOR EAX,EBP
00ad45ce : PUSH EAX
00ad45cf : LEA EAX,[EBP + -0xc]
00ad45d2 : MOV FS:[0x0],EAX
00ad45d8 : MOV EBX,ECX
00ad45da : MOV dword ptr [EBP + -0x1c],EBX
00ad45dd : MOV EAX,dword ptr [EBX + 0x10]
00ad45e0 : MOV ESI,dword ptr [0x00d7c54c]
00ad45e6 : LEA ECX,[EBP + -0x20]
00ad45e9 : MOV dword ptr [EBP + -0x20],EAX
00ad45ec : PUSH ECX
00ad45ed : LEA ECX,[ESI + 0x40]
00ad45f0 : LEA EAX,[EBP + -0x18]
00ad45f3 : CALL 0x004437f0
00ad45f8 : MOV ESI,dword ptr [ESI + 0x44]
00ad45fb : MOV EAX,dword ptr [EBP + -0x18]
00ad45fe : CMP EAX,ESI
00ad4600 : JZ 0x00ad46ba
00ad4606 : MOV ECX,dword ptr [EAX + 0x10]
00ad4609 : TEST ECX,ECX
00ad460b : JZ 0x00ad46ba
00ad4611 : MOV EDX,dword ptr [ECX]
00ad4613 : MOV EAX,dword ptr [EDX + 0x64]
00ad4616 : CALL EAX
00ad4618 : TEST EAX,EAX
00ad461a : JZ 0x00ad46ba
00ad4620 : CMP dword ptr [0x0172491c],0x0
00ad4627 : JZ 0x00ad49a5
00ad462d : MOV ECX,dword ptr [0x00da9894]
00ad4633 : MOV EAX,dword ptr [ECX]
00ad4635 : TEST EAX,EAX
00ad4637 : JZ 0x00ad49a5
00ad463d : CMP dword ptr [EAX + 0x1a8],0x0
00ad4644 : JZ 0x00ad49a5
00ad464a : PUSH 0xcaa9e8
00ad464f : LEA ECX,[EBP + -0x5c]
00ad4652 : CALL 0x00406460
00ad4657 : MOV dword ptr [EBP + -0x4],0x0
00ad465e : MOV EDX,dword ptr [0x00da9894]
00ad4664 : MOV EAX,dword ptr [EDX]
00ad4666 : MOV ESI,dword ptr [EAX + 0x1a8]
00ad466c : MOV ECX,dword ptr [0x0172491c]
00ad4672 : LEA EAX,[EBP + -0x5c]
00ad4675 : PUSH EAX
00ad4676 : LEA EDI,[EBP + -0x40]
00ad4679 : CALL 0x0081d120
00ad467e : MOV byte ptr [EBP + -0x4],0x1
00ad4682 : MOV EDX,dword ptr [ESI]
00ad4684 : PUSH 0x3
00ad4686 : PUSH EAX
00ad4687 : MOV EAX,dword ptr [EDX + 0x44]
00ad468a : MOV ECX,ESI
00ad468c : CALL EAX
00ad468e : MOV byte ptr [EBP + -0x4],0x0
00ad4692 : MOV ECX,EDI
00ad4694 : CALL 0x00406560
00ad4699 : MOV dword ptr [EBP + -0x4],0xffffffff
00ad46a0 : LEA ECX,[EBP + -0x5c]
00ad46a3 : CALL 0x00406560
00ad46a8 : MOV ECX,dword ptr [EBP + -0xc]
00ad46ab : MOV dword ptr FS:[0x0],ECX
00ad46b2 : POP ECX
00ad46b3 : POP EDI
00ad46b4 : POP ESI
00ad46b5 : POP EBX
00ad46b6 : MOV ESP,EBP
00ad46b8 : POP EBP
00ad46b9 : RET
00ad46ba : CMP byte ptr [EBX + 0x1b0],0x0
00ad46c1 : JZ 0x00ad499e
00ad46c7 : CMP byte ptr [EBX + 0xe0],0x0
00ad46ce : JZ 0x00ad485a
00ad46d4 : MOV ESI,dword ptr [0x00da9894]
00ad46da : MOV EAX,dword ptr [ESI]
00ad46dc : MOV EAX,dword ptr [EAX + 0x40]
00ad46df : XOR EDX,EDX
00ad46e1 : MOV dword ptr [EBP + -0x24],EAX
00ad46e4 : MOV dword ptr [EBP + -0x20],EDX
00ad46e7 : MOV byte ptr [EBP + -0xd],0x1
00ad46eb : MOV dword ptr [EBP + -0x18],EDX
00ad46ee : CMP EAX,EDX
00ad46f0 : JBE 0x00ad47fa
00ad46f6 : CMP byte ptr [EBP + -0xd],0x1
00ad46fa : JNZ 0x00ad47c7
00ad4700 : MOV EAX,dword ptr [ESI]
00ad4702 : MOV ECX,dword ptr [EBP + -0x18]
00ad4705 : CALL 0x008eb810
00ad470a : MOV EDI,EAX
00ad470c : TEST EDI,EDI
00ad470e : JZ 0x00ad47b7
00ad4714 : CMP byte ptr [EDI + 0x64],0x0
00ad4718 : JZ 0x00ad47b7
00ad471e : XOR ECX,ECX
00ad4720 : MOV dword ptr [EBP + -0x14],0x0
00ad4727 : CMP CX,word ptr [EDI + 0x72]
00ad472b : JNC 0x00ad47b7
00ad4731 : CMP byte ptr [EBP + -0xd],0x1
00ad4735 : JNZ 0x00ad47b1
00ad4737 : XOR EBX,EBX
00ad4739 : CMP byte ptr [EBP + -0xd],0x1
00ad473d : JNZ 0x00ad479f
00ad473f : MOV EAX,dword ptr [EBP + -0x14]
00ad4742 : MOV EDX,dword ptr [EDI]
00ad4744 : MOV EDX,dword ptr [EDX + 0x74]
00ad4747 : PUSH EAX
00ad4748 : PUSH EBX
00ad4749 : MOV ECX,EDI
00ad474b : CALL EDX
00ad474d : MOV ESI,EAX
00ad474f : TEST ESI,ESI
00ad4751 : JZ 0x00ad4799
00ad4753 : MOV EAX,dword ptr [ESI]
00ad4755 : MOV EDX,dword ptr [EAX + 0x20]
00ad4758 : MOV ECX,ESI
00ad475a : CALL EDX
00ad475c : CMP EAX,0x1
00ad475f : JNZ 0x00ad4799
00ad4761 : MOV EAX,dword ptr [ESI + 0x10]
00ad4764 : MOV ECX,EAX
00ad4766 : SHR ECX,0x10
00ad4769 : CMP CL,0x74
00ad476c : JNZ 0x00ad4799
00ad476e : PUSH EAX
00ad476f : CALL 0x004049b0
00ad4774 : ADD ESP,0x4
00ad4777 : TEST EAX,EAX
00ad4779 : JZ 0x00ad4799
00ad477b : CMP word ptr [EAX + 0x180],0x3
00ad4783 : JNZ 0x00ad4799
00ad4785 : MOV EAX,dword ptr [EAX + 0x48]
00ad4788 : AND EAX,0x400
00ad478d : XOR ECX,ECX
00ad478f : OR EAX,ECX
00ad4791 : MOV dword ptr [EBP + -0x20],ESI
00ad4794 : JNZ 0x00ad4799
00ad4796 : MOV byte ptr [EBP + -0xd],AL
00ad4799 : INC EBX
00ad479a : CMP EBX,0x5
00ad479d : JL 0x00ad4739
00ad479f : MOV EAX,dword ptr [EBP + -0x14]
00ad47a2 : MOVZX EDX,word ptr [EDI + 0x72]
00ad47a6 : MOV EBX,dword ptr [EBP + -0x1c]
00ad47a9 : INC EAX
00ad47aa : CMP EAX,EDX
00ad47ac : MOV dword ptr [EBP + -0x14],EAX
00ad47af : JL 0x00ad4731
00ad47b1 : MOV ESI,dword ptr [0x00da9894]
00ad47b7 : MOV EAX,dword ptr [EBP + -0x18]
00ad47ba : INC EAX
00ad47bb : MOV dword ptr [EBP + -0x18],EAX
00ad47be : CMP EAX,dword ptr [EBP + -0x24]
00ad47c1 : JC 0x00ad46f6
00ad47c7 : MOV ECX,dword ptr [EBP + -0x20]
00ad47ca : XOR EDX,EDX
00ad47cc : CMP ECX,EDX
00ad47ce : JZ 0x00ad47fa
00ad47d0 : MOV EAX,dword ptr [ESI]
00ad47d2 : MOV EDX,dword ptr [EAX + 0x19c]
00ad47d8 : MOV EAX,dword ptr [EBX + 0xc]
00ad47db : MOV dword ptr [EDX + 0x54],EAX
00ad47de : MOV EDX,dword ptr [ECX]
00ad47e0 : MOV EAX,dword ptr [EDX + 0xb4]
00ad47e6 : CALL EAX
00ad47e8 : MOV ECX,dword ptr [EBP + -0xc]
00ad47eb : MOV dword ptr FS:[0x0],ECX
00ad47f2 : POP ECX
00ad47f3 : POP EDI
00ad47f4 : POP ESI
00ad47f5 : POP EBX
00ad47f6 : MOV ESP,EBP
00ad47f8 : POP EBP
00ad47f9 : RET
00ad47fa : XOR ECX,ECX
00ad47fc : PUSH 0x1e
00ad47fe : MOV word ptr [EBP + -0x3c],CX
00ad4802 : MOV EBX,0x7
00ad4807 : PUSH 0xcaaa28
00ad480c : LEA ECX,[EBP + -0x40]
00ad480f : MOV dword ptr [EBP + -0x28],EBX
00ad4812 : MOV dword ptr [EBP + -0x2c],EDX
00ad4815 : CALL 0x00406360
00ad481a : MOV dword ptr [EBP + -0x4],0x2
00ad4821 : MOV EDX,dword ptr [0x00da9894]
00ad4827 : MOV EAX,dword ptr [EDX]
00ad4829 : MOV ESI,dword ptr [EAX + 0x1a8]
00ad482f : MOV ECX,dword ptr [0x0172491c]
00ad4835 : LEA EAX,[EBP + -0x40]
00ad4838 : PUSH EAX
00ad4839 : LEA EDI,[EBP + -0x5c]
00ad483c : CALL 0x0081d120
00ad4841 : MOV byte ptr [EBP + -0x4],0x3
00ad4845 : MOV EDX,dword ptr [ESI]
00ad4847 : PUSH 0x3
00ad4849 : PUSH EAX
00ad484a : MOV EAX,dword ptr [EDX + 0x44]
00ad484d : MOV ECX,ESI
00ad484f : CALL EAX
00ad4851 : MOV byte ptr [EBP + -0x4],0x2
00ad4855 : JMP 0x00ad48e4
00ad485a : XOR ESI,ESI
00ad485c : LEA ESP,[ESP]
00ad4860 : MOV EAX,[0x00da9894]
00ad4865 : MOV EAX,dword ptr [EAX]
00ad4867 : MOV ECX,dword ptr [EAX + 0x200]
00ad486d : MOV EDX,dword ptr [ECX]
00ad486f : MOV EAX,dword ptr [EDX + 0x74]
00ad4872 : PUSH 0x0
00ad4874 : PUSH ESI
00ad4875 : CALL EAX
00ad4877 : TEST EAX,EAX
00ad4879 : JZ 0x00ad4936
00ad487f : INC ESI
00ad4880 : CMP ESI,0x3
00ad4883 : JL 0x00ad4860
00ad4885 : XOR ECX,ECX
00ad4887 : PUSH 0x20
00ad4889 : MOV word ptr [EBP + -0x3c],CX
00ad488d : MOV EBX,0x7
00ad4892 : PUSH 0xcaaa68
00ad4897 : LEA ECX,[EBP + -0x40]
00ad489a : MOV dword ptr [EBP + -0x28],EBX
00ad489d : MOV dword ptr [EBP + -0x2c],0x0
00ad48a4 : CALL 0x00406360
00ad48a9 : MOV dword ptr [EBP + -0x4],0x4
00ad48b0 : MOV EDX,dword ptr [0x00da9894]
00ad48b6 : MOV EAX,dword ptr [EDX]
00ad48b8 : MOV ESI,dword ptr [EAX + 0x1a8]
00ad48be : MOV ECX,dword ptr [0x0172491c]
00ad48c4 : LEA EAX,[EBP + -0x40]
00ad48c7 : PUSH EAX
00ad48c8 : LEA EDI,[EBP + -0x5c]
00ad48cb : CALL 0x0081d120
00ad48d0 : MOV byte ptr [EBP + -0x4],0x5
00ad48d4 : MOV EDX,dword ptr [ESI]
00ad48d6 : PUSH 0x3
00ad48d8 : PUSH EAX
00ad48d9 : MOV EAX,dword ptr [EDX + 0x44]
00ad48dc : MOV ECX,ESI
00ad48de : CALL EAX
00ad48e0 : MOV byte ptr [EBP + -0x4],0x4
00ad48e4 : MOV ESI,0x8
00ad48e9 : CMP dword ptr [EBP + -0x44],ESI
00ad48ec : JC 0x00ad48f6
00ad48ee : MOV ECX,dword ptr [EBP + -0x58]
00ad48f1 : CALL 0x006f04e0
00ad48f6 : XOR EDI,EDI
00ad48f8 : XOR ECX,ECX
00ad48fa : MOV dword ptr [EBP + -0x44],EBX
00ad48fd : MOV dword ptr [EBP + -0x48],EDI
00ad4900 : MOV word ptr [EBP + -0x58],CX
00ad4904 : MOV dword ptr [EBP + -0x4],0xffffffff
00ad490b : CMP dword ptr [EBP + -0x28],ESI
00ad490e : JC 0x00ad4918
00ad4910 : MOV ECX,dword ptr [EBP + -0x3c]
00ad4913 : CALL 0x006f04e0
00ad4918 : XOR EDX,EDX
00ad491a : MOV dword ptr [EBP + -0x28],EBX
00ad491d : MOV dword ptr [EBP + -0x2c],EDI
00ad4920 : MOV word ptr [EBP + -0x3c],DX
00ad4924 : MOV ECX,dword ptr [EBP + -0xc]
00ad4927 : MOV dword ptr FS:[0x0],ECX
00ad492e : POP ECX
00ad492f : POP EDI
00ad4930 : POP ESI
00ad4931 : POP EBX
00ad4932 : MOV ESP,EBP
00ad4934 : POP EBP
00ad4935 : RET
00ad4936 : PUSH 0x160a
00ad493b : MOV EDI,0x7530
00ad4940 : CALL 0x00703c00
00ad4945 : ADD ESP,0x4
00ad4948 : TEST EAX,EAX
00ad494a : JZ 0x00ad496b
00ad494c : MOV ECX,dword ptr [0x0172491c]
00ad4952 : MOV EDX,dword ptr [ECX + 0x17c]
00ad4958 : MOV ECX,dword ptr [EDX + 0xa0]
00ad495e : CMP dword ptr [EAX + ESI*0x4 + 0x48],ECX
00ad4962 : JBE 0x00ad496b
00ad4964 : CMP dword ptr [EAX + 0x48],ECX
00ad4967 : JA 0x00ad496b
00ad4969 : XOR ESI,ESI
00ad496b : MOVZX EAX,word ptr [EBX + 0x2e]
00ad496f : MOVZX ECX,word ptr [EBX + 0x2c]
00ad4973 : MOV EDX,dword ptr [EBX + 0x28]
00ad4976 : PUSH 0x0
00ad4978 : PUSH ESI
00ad4979 : PUSH 0x95
00ad497e : PUSH EAX
00ad497f : MOV EAX,dword ptr [EDX + 0x2c]
00ad4982 : PUSH ECX
00ad4983 : PUSH EAX
00ad4984 : CALL 0x008efa90
00ad4989 : ADD ESP,0x18
00ad498c : MOV ECX,dword ptr [EBP + -0xc]
00ad498f : MOV dword ptr FS:[0x0],ECX
00ad4996 : POP ECX
00ad4997 : POP EDI
00ad4998 : POP ESI
00ad4999 : POP EBX
00ad499a : MOV ESP,EBP
00ad499c : POP EBP
00ad499d : RET
00ad499e : MOV ECX,EBX
00ad49a0 : CALL 0x009fb930
00ad49a5 : MOV ECX,dword ptr [EBP + -0xc]
00ad49a8 : MOV dword ptr FS:[0x0],ECX
00ad49af : POP ECX
00ad49b0 : POP EDI
00ad49b1 : POP ESI
00ad49b2 : POP EBX
00ad49b3 : MOV ESP,EBP
00ad49b5 : POP EBP
00ad49b6 : RET
