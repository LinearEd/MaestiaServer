PROGRAM  : Maestia.exe
FUNCTION : FUN_00962c20
ENTRY    : 00962c20
BODY     : [[00962c20, 00962c59] [00962c60, 00962cfa]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00962c20(int param_1)

{
  byte bVar1;
  int iVar2;
  int in_EAX;
  int iVar3;
  undefined1 local_18 [8];
  int local_10;
  int local_c;
  
  iVar2 = param_1;
  if (param_1 == 0) {
    FUN_008018d0(L"[AvaGuiNpcShop::__AddItem] (AvaItem* pItem) Is NULL");
    return 0;
  }
  iVar3 = *(int *)(in_EAX + 0x44);
  if (iVar3 != *(int *)(in_EAX + 0x48)) {
    do {
      if (*(int *)(*(int *)(iVar3 + 4) + 0x10) == *(int *)(iVar2 + 0x10)) {
        return 0;
      }
      bVar1 = *(byte *)(iVar2 + 0xc0);
      if ((bVar1 == 0) && (*(char *)(in_EAX + 0x68) == '\0')) {
        param_1 = 1;
        FUN_00425470(&local_10,&param_1);
        *(undefined1 *)(in_EAX + 0x68) = 1;
      }
      else if (*(byte *)(*(int *)(iVar3 + 4) + 0xc0) != bVar1) {
        param_1 = bVar1 + 1;
        FUN_00425470(local_18,&param_1);
      }
      iVar3 = iVar3 + 8;
    } while (iVar3 != *(int *)(in_EAX + 0x48));
  }
  local_10 = FUN_00962690();
  param_1 = local_10;
  if (local_10 != 0) {
    FUN_00425470(local_18,&param_1);
  }
  local_c = iVar2;
  FUN_004079b0();
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00962c20 : PUSH EBP
00962c21 : MOV EBP,ESP
00962c23 : SUB ESP,0x18
00962c26 : PUSH EBX
00962c27 : MOV EBX,dword ptr [EBP + 0x8]
00962c2a : PUSH ESI
00962c2b : PUSH EDI
00962c2c : MOV ESI,EAX
00962c2e : TEST EBX,EBX
00962c30 : JNZ 0x00962c50
00962c32 : MOV ESI,dword ptr [0x00da98e8]
00962c38 : PUSH 0xc7a2d0
00962c3d : CALL 0x008018d0
00962c42 : ADD ESP,0x4
00962c45 : XOR AL,AL
00962c47 : POP EDI
00962c48 : POP ESI
00962c49 : POP EBX
00962c4a : MOV ESP,EBP
00962c4c : POP EBP
00962c4d : RET 0x4
00962c50 : MOV EDI,dword ptr [ESI + 0x44]
00962c53 : CMP EDI,dword ptr [ESI + 0x48]
00962c56 : JZ 0x00962cbe
00962c58 : JMP 0x00962c60
00962c60 : MOV ECX,dword ptr [EDI + 0x4]
00962c63 : MOV EAX,dword ptr [ECX + 0x10]
00962c66 : CMP EAX,dword ptr [EBX + 0x10]
00962c69 : JZ 0x00962c45
00962c6b : MOV AL,byte ptr [EBX + 0xc0]
00962c71 : TEST AL,AL
00962c73 : JNZ 0x00962c97
00962c75 : CMP byte ptr [ESI + 0x68],AL
00962c78 : JNZ 0x00962c97
00962c7a : LEA ECX,[EBP + 0x8]
00962c7d : PUSH ECX
00962c7e : LEA EDX,[EBP + -0xc]
00962c81 : PUSH EDX
00962c82 : LEA EAX,[ESI + 0x5c]
00962c85 : MOV dword ptr [EBP + 0x8],0x1
00962c8c : CALL 0x00425470
00962c91 : MOV byte ptr [ESI + 0x68],0x1
00962c95 : JMP 0x00962cb6
00962c97 : CMP byte ptr [ECX + 0xc0],AL
00962c9d : JZ 0x00962cb6
00962c9f : MOVZX EAX,AL
00962ca2 : INC EAX
00962ca3 : LEA ECX,[EBP + 0x8]
00962ca6 : PUSH ECX
00962ca7 : LEA EDX,[EBP + -0x14]
00962caa : MOV dword ptr [EBP + 0x8],EAX
00962cad : PUSH EDX
00962cae : LEA EAX,[ESI + 0x5c]
00962cb1 : CALL 0x00425470
00962cb6 : ADD EDI,0x8
00962cb9 : CMP EDI,dword ptr [ESI + 0x48]
00962cbc : JNZ 0x00962c60
00962cbe : MOV EAX,dword ptr [EBX + 0x10]
00962cc1 : CALL 0x00962690
00962cc6 : MOV EDI,EAX
00962cc8 : MOV dword ptr [EBP + 0x8],EDI
00962ccb : TEST EDI,EDI
00962ccd : JZ 0x00962cdf
00962ccf : LEA EAX,[EBP + 0x8]
00962cd2 : PUSH EAX
00962cd3 : LEA ECX,[EBP + -0x14]
00962cd6 : PUSH ECX
00962cd7 : LEA EAX,[ESI + 0x50]
00962cda : CALL 0x00425470
00962cdf : MOV dword ptr [EBP + -0xc],EDI
00962ce2 : LEA EDI,[ESI + 0x40]
00962ce5 : LEA ECX,[EBP + -0xc]
00962ce8 : MOV dword ptr [EBP + -0x8],EBX
00962ceb : CALL 0x004079b0
00962cf0 : POP EDI
00962cf1 : POP ESI
00962cf2 : MOV AL,0x1
00962cf4 : POP EBX
00962cf5 : MOV ESP,EBP
00962cf7 : POP EBP
00962cf8 : RET 0x4
