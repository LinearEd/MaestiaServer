PROGRAM  : Maestia.exe
FUNCTION : FUN_005b6590
ENTRY    : 005b6590
BODY     : [[005b6590, 005b6610]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b6590(void)

{
  int *piVar1;
  uint uVar2;
  int in_ECX;
  uint uVar3;
  
  uVar2 = *(uint *)(in_ECX + 8);
  uVar3 = 0;
  if (uVar2 != 0) {
    do {
      GRefCountImpl::Release(*(GRefCountImpl **)(*(int *)(in_ECX + 4) + uVar3 * 4));
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar2);
  }
  piVar1 = (int *)(in_ECX + 4);
  if (*(int *)(in_ECX + 8) == 0) {
    if (*(int *)(in_ECX + 0xc) == 0) {
      FUN_005edac0(piVar1,0);
    }
  }
  else if ((*(uint *)(in_ECX + 0xc) & 0xfffffffe) != 0) {
    if (*piVar1 != 0) {
      FUN_00515cf0(*piVar1);
      *piVar1 = 0;
    }
    *(undefined4 *)(in_ECX + 0xc) = 0;
    *(undefined4 *)(in_ECX + 8) = 0;
    FUN_00515cf0(*piVar1);
    return;
  }
  *(undefined4 *)(in_ECX + 8) = 0;
  FUN_00515cf0(*piVar1);
  return;
}



============================================================
DISASSEMBLY
============================================================
005b6590 : PUSH EBX
005b6591 : PUSH ESI
005b6592 : PUSH EDI
005b6593 : MOV EDI,ECX
005b6595 : MOV EBX,dword ptr [EDI + 0x8]
005b6598 : XOR ESI,ESI
005b659a : TEST EBX,EBX
005b659c : JBE 0x005b65b0
005b659e : MOV EDI,EDI
005b65a0 : MOV EAX,dword ptr [EDI + 0x4]
005b65a3 : MOV ECX,dword ptr [EAX + ESI*0x4]
005b65a6 : CALL 0x004ff7e0
005b65ab : INC ESI
005b65ac : CMP ESI,EBX
005b65ae : JC 0x005b65a0
005b65b0 : CMP dword ptr [EDI + 0x8],0x0
005b65b4 : LEA ESI,[EDI + 0x4]
005b65b7 : JBE 0x005b65ee
005b65b9 : TEST dword ptr [ESI + 0x8],0xfffffffe
005b65c0 : JBE 0x005b65fe
005b65c2 : MOV EAX,dword ptr [ESI]
005b65c4 : TEST EAX,EAX
005b65c6 : JZ 0x005b65d4
005b65c8 : PUSH EAX
005b65c9 : CALL 0x00515cf0
005b65ce : MOV dword ptr [ESI],0x0
005b65d4 : MOV dword ptr [ESI + 0x8],0x0
005b65db : MOV dword ptr [ESI + 0x4],0x0
005b65e2 : MOV ECX,dword ptr [ESI]
005b65e4 : PUSH ECX
005b65e5 : CALL 0x00515cf0
005b65ea : POP EDI
005b65eb : POP ESI
005b65ec : POP EBX
005b65ed : RET
005b65ee : CMP dword ptr [ESI + 0x8],0x0
005b65f2 : JA 0x005b65fe
005b65f4 : PUSH 0x0
005b65f6 : PUSH ESI
005b65f7 : MOV ECX,ESI
005b65f9 : CALL 0x005edac0
005b65fe : MOV dword ptr [ESI + 0x4],0x0
005b6605 : MOV ECX,dword ptr [ESI]
005b6607 : PUSH ECX
005b6608 : CALL 0x00515cf0
005b660d : POP EDI
005b660e : POP ESI
005b660f : POP EBX
005b6610 : RET
