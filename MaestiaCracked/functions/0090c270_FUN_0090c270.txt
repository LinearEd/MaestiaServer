PROGRAM  : Maestia.exe
FUNCTION : FUN_0090c270
ENTRY    : 0090c270
BODY     : [[0090c270, 0090c45d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0090c270(void)

{
  uint uVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  uint uVar6;
  DWORD DVar7;
  undefined4 ***pppuVar8;
  int unaff_EDI;
  uint local_40;
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1ee40;
  local_10 = ExceptionList;
  uVar6 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar6;
  if (*(char *)(unaff_EDI + 0x38) != '\0') {
    DVar7 = timeGetTime();
    _DAT_01724890 = DVar7 - *(int *)(unaff_EDI + 0x40);
    uVar1 = *(uint *)(unaff_EDI + 0x3c);
    if (uVar1 < _DAT_01724890) {
      (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x114))();
      *(undefined1 *)(unaff_EDI + 0x38) = 0;
      *(undefined4 *)(unaff_EDI + 0x44) = 0;
    }
    else {
      fVar3 = (float)(int)_DAT_01724890;
      if ((int)_DAT_01724890 < 0) {
        fVar3 = fVar3 + 4.2949673e+09;
      }
      fVar4 = (float)(int)uVar1;
      if ((int)uVar1 < 0) {
        fVar4 = fVar4 + 4.2949673e+09;
      }
      local_18 = 7;
      local_1c = 0;
      local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
      local_8 = 0;
      if ((_DAT_01724890 != 0) || (*(int *)(unaff_EDI + 0x3c) != 0)) {
        fVar5 = (float)*(int *)(unaff_EDI + 0x3c);
        if (*(int *)(unaff_EDI + 0x3c) < 0) {
          fVar5 = fVar5 + 4.2949673e+09;
        }
        FUN_00404750(L"%0.1f/%0.1f",(double)(fVar3 * 0.001),(double)(fVar5 * 0.001),uVar6);
        local_8._0_1_ = 1;
        FUN_00405eb0();
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        iVar2 = *DAT_00da9894;
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
          pppuVar8 = (undefined4 ***)local_2c[0];
          if (local_18 < 8) {
            pppuVar8 = local_2c;
          }
          (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                    (*(int **)(iVar2 + 0x114),"SetCastingTime",&DAT_00c652fc,pppuVar8);
        }
      }
      (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
                (*(int **)(*DAT_00da9894 + 0x114),"SetCastingPercent",&DAT_00c65310,
                 (double)(fVar3 / fVar4));
      *(float *)(unaff_EDI + 0x44) = fVar3 / fVar4;
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0090c270 : PUSH EBP
0090c271 : MOV EBP,ESP
0090c273 : PUSH -0x1
0090c275 : PUSH 0xb1ee40
0090c27a : MOV EAX,FS:[0x0]
0090c280 : PUSH EAX
0090c281 : SUB ESP,0x48
0090c284 : MOV EAX,[0x00d66fa0]
0090c289 : XOR EAX,EBP
0090c28b : MOV dword ptr [EBP + -0x10],EAX
0090c28e : PUSH EBX
0090c28f : PUSH ESI
0090c290 : PUSH EAX
0090c291 : LEA EAX,[EBP + -0xc]
0090c294 : MOV FS:[0x0],EAX
0090c29a : XOR EBX,EBX
0090c29c : CMP byte ptr [EDI + 0x38],BL
0090c29f : JZ 0x0090c443
0090c2a5 : CALL dword ptr [0x00b85598]
0090c2ab : SUB EAX,dword ptr [EDI + 0x40]
0090c2ae : MOV ECX,dword ptr [EDI + 0x3c]
0090c2b1 : MOV [0x01724890],EAX
0090c2b6 : CMP EAX,ECX
0090c2b8 : JBE 0x0090c2e2
0090c2ba : MOV EAX,[0x00da9894]
0090c2bf : MOV ECX,dword ptr [EAX]
0090c2c1 : MOV ECX,dword ptr [ECX + 0x114]
0090c2c7 : MOV EDX,dword ptr [ECX]
0090c2c9 : MOV EAX,dword ptr [EDX]
0090c2cb : PUSH 0xc652d4
0090c2d0 : CALL EAX
0090c2d2 : XORPS XMM0,XMM0
0090c2d5 : MOV byte ptr [EDI + 0x38],BL
0090c2d8 : MOVSS dword ptr [EDI + 0x44],XMM0
0090c2dd : JMP 0x0090c443
0090c2e2 : MOV EDX,EAX
0090c2e4 : MOV dword ptr [EBP + -0x34],EDX
0090c2e7 : FILD dword ptr [EBP + -0x34]
0090c2ea : TEST EDX,EDX
0090c2ec : JGE 0x0090c2f4
0090c2ee : FADD float ptr [0x00cdf0e0]
0090c2f4 : MOV dword ptr [EBP + -0x30],ECX
0090c2f7 : FST float ptr [EBP + -0x34]
0090c2fa : FILD dword ptr [EBP + -0x30]
0090c2fd : TEST ECX,ECX
0090c2ff : JGE 0x0090c307
0090c301 : FADD float ptr [0x00cdf0e0]
0090c307 : FDIVP
0090c309 : XOR ECX,ECX
0090c30b : MOV dword ptr [EBP + -0x14],0x7
0090c312 : MOV dword ptr [EBP + -0x18],EBX
0090c315 : MOV word ptr [EBP + -0x28],CX
0090c319 : FSTP float ptr [EBP + -0x30]
0090c31c : MOV dword ptr [EBP + -0x4],EBX
0090c31f : CMP EAX,EBX
0090c321 : JNZ 0x0090c32c
0090c323 : CMP dword ptr [EDI + 0x3c],EBX
0090c326 : JZ 0x0090c3e0
0090c32c : MOV EDX,dword ptr [EDI + 0x3c]
0090c32f : FILD dword ptr [EDI + 0x3c]
0090c332 : TEST EDX,EDX
0090c334 : JGE 0x0090c33c
0090c336 : FADD float ptr [0x00cdf0e0]
0090c33c : FMUL float ptr [0x00cdf128]
0090c342 : MOVSS XMM0,dword ptr [EBP + -0x34]
0090c347 : MULSS XMM0,dword ptr [0x00cdf128]
0090c34f : SUB ESP,0x10
0090c352 : FSTP double ptr [ESP + 0x8]
0090c356 : CVTPS2PD XMM0,XMM0
0090c359 : MOVSD qword ptr [ESP],XMM0
0090c35e : PUSH 0xc652e4
0090c363 : LEA ESI,[EBP + -0x54]
0090c366 : CALL 0x00404750
0090c36b : ADD ESP,0x14
0090c36e : MOV byte ptr [EBP + -0x4],0x1
0090c372 : PUSH -0x1
0090c374 : PUSH EBX
0090c375 : PUSH EAX
0090c376 : LEA ECX,[EBP + -0x2c]
0090c379 : CALL 0x00405eb0
0090c37e : MOV byte ptr [EBP + -0x4],BL
0090c381 : MOV ESI,0x8
0090c386 : CMP dword ptr [EBP + -0x3c],ESI
0090c389 : JC 0x0090c393
0090c38b : MOV ECX,dword ptr [EBP + -0x50]
0090c38e : CALL 0x006f04e0
0090c393 : MOV ECX,dword ptr [0x00da9894]
0090c399 : XOR EAX,EAX
0090c39b : MOV dword ptr [EBP + -0x3c],0x7
0090c3a2 : MOV dword ptr [EBP + -0x40],EBX
0090c3a5 : MOV word ptr [EBP + -0x50],AX
0090c3a9 : MOV EAX,dword ptr [ECX]
0090c3ab : CMP EAX,EBX
0090c3ad : JZ 0x0090c3e5
0090c3af : CMP dword ptr [EAX + 0x114],EBX
0090c3b5 : JZ 0x0090c3e5
0090c3b7 : MOV EAX,dword ptr [EAX + 0x114]
0090c3bd : MOV ECX,dword ptr [EBP + -0x28]
0090c3c0 : CMP dword ptr [EBP + -0x14],ESI
0090c3c3 : JNC 0x0090c3c8
0090c3c5 : LEA ECX,[EBP + -0x28]
0090c3c8 : MOV EDX,dword ptr [EAX]
0090c3ca : PUSH ECX
0090c3cb : PUSH 0xc652fc
0090c3d0 : PUSH 0xc65300
0090c3d5 : PUSH EAX
0090c3d6 : MOV EAX,dword ptr [EDX + 0x4]
0090c3d9 : CALL EAX
0090c3db : ADD ESP,0x10
0090c3de : JMP 0x0090c3e5
0090c3e0 : MOV ESI,0x8
0090c3e5 : MOV ECX,dword ptr [0x00da9894]
0090c3eb : CVTSS2SD XMM0,dword ptr [EBP + -0x30]
0090c3f0 : MOV EAX,dword ptr [ECX]
0090c3f2 : MOV EAX,dword ptr [EAX + 0x114]
0090c3f8 : MOV EDX,dword ptr [EAX]
0090c3fa : SUB ESP,0x8
0090c3fd : MOVSD qword ptr [ESP],XMM0
0090c402 : PUSH 0xc65310
0090c407 : PUSH 0xc65314
0090c40c : PUSH EAX
0090c40d : MOV EAX,dword ptr [EDX + 0x4]
0090c410 : CALL EAX
0090c412 : MOVSS XMM0,dword ptr [EBP + -0x30]
0090c417 : ADD ESP,0x14
0090c41a : MOVSS dword ptr [EDI + 0x44],XMM0
0090c41f : MOV dword ptr [EBP + -0x4],0xffffffff
0090c426 : CMP dword ptr [EBP + -0x14],ESI
0090c429 : JC 0x0090c433
0090c42b : MOV ECX,dword ptr [EBP + -0x28]
0090c42e : CALL 0x006f04e0
0090c433 : XOR ECX,ECX
0090c435 : MOV dword ptr [EBP + -0x14],0x7
0090c43c : MOV dword ptr [EBP + -0x18],EBX
0090c43f : MOV word ptr [EBP + -0x28],CX
0090c443 : MOV ECX,dword ptr [EBP + -0xc]
0090c446 : MOV dword ptr FS:[0x0],ECX
0090c44d : POP ECX
0090c44e : POP ESI
0090c44f : POP EBX
0090c450 : MOV ECX,dword ptr [EBP + -0x10]
0090c453 : XOR ECX,EBP
0090c455 : CALL 0x00633e6b
0090c45a : MOV ESP,EBP
0090c45c : POP EBP
0090c45d : RET
