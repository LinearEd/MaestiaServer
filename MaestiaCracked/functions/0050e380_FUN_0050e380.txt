PROGRAM  : Maestia.exe
FUNCTION : FUN_0050e380
ENTRY    : 0050e380
BODY     : [[0050e380, 0050e4bd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0050e380(void)

{
  char cVar1;
  int iVar2;
  int *in_ECX;
  uint auStack_48 [2];
  undefined2 uStack_40;
  undefined1 uStack_3e;
  undefined1 uStack_3d;
  uint auStack_3c [8];
  GMatrix2D aGStack_1c [28];
  
  iVar2 = FUN_0051b1a0();
  if (iVar2 == 0) {
    (**(code **)(*in_ECX + 0x1ac))(&DAT_00cca874,*(byte *)(in_ECX + 0x32) >> 1 & 1,0);
  }
  else {
    if (*(int *)(in_ECX[0x2d] + 0x10) != 0) {
      iVar2 = (**(code **)(*in_ECX + 0x5c))();
      if (iVar2 != 0) {
        auStack_48[0] = auStack_48[0] & 0xffffff00;
        cVar1 = FUN_005331f0(in_ECX + 0x2d,auStack_48,0,0,0,0);
        FUN_00526bc0();
        if (cVar1 != '\0') goto LAB_0050e438;
      }
    }
    (**(code **)(*in_ECX + 0x1ac))
              ((*(uint *)(in_ECX[0x27] + 0x48) & 0xfffffffc) + 8,*(byte *)(in_ECX + 0x32) >> 1 & 1,1
              );
    FUN_00500b20();
  }
LAB_0050e438:
  FUN_0050a7a0();
  FUN_00549ad0();
  uStack_40 = 0;
  auStack_48[0] = 1;
  auStack_48[1] = 0;
  uStack_3e = 0;
  uStack_3d = 0xff;
  auStack_3c[0] = auStack_3c[0] & 0xffff0000;
  (**(code **)(*in_ECX + 0x6c))(auStack_48);
  if (in_ECX[0x21] == 0) {
    GMatrix2D::SetIdentity(aGStack_1c);
    auStack_3c[6] = 0;
    auStack_3c[7] = 0;
    auStack_3c[4] = 0;
    auStack_3c[5] = 0x40590000;
    auStack_3c[2] = 0;
    auStack_3c[3] = 0x40590000;
    auStack_3c[1] = 0;
    auStack_3c[0] = 0;
    FUN_0050c690(auStack_3c,1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0050e380 : SUB ESP,0x4c
0050e383 : PUSH EBX
0050e384 : PUSH ESI
0050e385 : MOV ESI,ECX
0050e387 : MOV ECX,dword ptr [ESI + 0x9c]
0050e38d : PUSH EDI
0050e38e : ADD ECX,0x48
0050e391 : CALL 0x0051b1a0
0050e396 : XOR EBX,EBX
0050e398 : TEST EAX,EAX
0050e39a : JBE 0x0050e417
0050e39c : MOV EAX,dword ptr [ESI + 0xb4]
0050e3a2 : LEA EDI,[ESI + 0xb4]
0050e3a8 : CMP dword ptr [EAX + 0x10],EBX
0050e3ab : JZ 0x0050e3e2
0050e3ad : MOV EDX,dword ptr [ESI]
0050e3af : MOV EAX,dword ptr [EDX + 0x5c]
0050e3b2 : MOV ECX,ESI
0050e3b4 : CALL EAX
0050e3b6 : CMP EAX,EBX
0050e3b8 : JZ 0x0050e3e2
0050e3ba : PUSH EBX
0050e3bb : PUSH EBX
0050e3bc : PUSH EBX
0050e3bd : PUSH EBX
0050e3be : LEA ECX,[ESP + 0x20]
0050e3c2 : PUSH ECX
0050e3c3 : PUSH EDI
0050e3c4 : MOV ECX,EAX
0050e3c6 : MOV byte ptr [ESP + 0x28],BL
0050e3ca : CALL 0x005331f0
0050e3cf : LEA ECX,[ESP + 0x10]
0050e3d3 : MOV byte ptr [ESP + 0xf],AL
0050e3d7 : CALL 0x00526bc0
0050e3dc : CMP byte ptr [ESP + 0xf],BL
0050e3e0 : JNZ 0x0050e438
0050e3e2 : MOV AL,byte ptr [ESI + 0xc8]
0050e3e8 : MOV EDX,dword ptr [ESI]
0050e3ea : MOV EDX,dword ptr [EDX + 0x1ac]
0050e3f0 : SHR AL,0x1
0050e3f2 : AND AL,0x1
0050e3f4 : MOVZX ECX,AL
0050e3f7 : MOV EAX,dword ptr [ESI + 0x9c]
0050e3fd : PUSH 0x1
0050e3ff : PUSH ECX
0050e400 : MOV ECX,dword ptr [EAX + 0x48]
0050e403 : AND ECX,0xfffffffc
0050e406 : ADD ECX,0x8
0050e409 : PUSH ECX
0050e40a : MOV ECX,ESI
0050e40c : CALL EDX
0050e40e : MOV ECX,ESI
0050e410 : CALL 0x00500b20
0050e415 : JMP 0x0050e438
0050e417 : MOV CL,byte ptr [ESI + 0xc8]
0050e41d : MOV EAX,dword ptr [ESI]
0050e41f : MOV EAX,dword ptr [EAX + 0x1ac]
0050e425 : SHR CL,0x1
0050e427 : AND CL,0x1
0050e42a : MOVZX EDX,CL
0050e42d : PUSH EBX
0050e42e : PUSH EDX
0050e42f : PUSH 0xcca874
0050e434 : MOV ECX,ESI
0050e436 : CALL EAX
0050e438 : MOV ECX,ESI
0050e43a : CALL 0x0050a7a0
0050e43f : MOV ECX,dword ptr [ESI + 0xa0]
0050e445 : CALL 0x00549ad0
0050e44a : MOV EDX,dword ptr [ESI]
0050e44c : MOV EDX,dword ptr [EDX + 0x6c]
0050e44f : XOR ECX,ECX
0050e451 : LEA EAX,[ESP + 0x10]
0050e455 : MOV word ptr [ESP + 0x18],CX
0050e45a : PUSH EAX
0050e45b : MOV ECX,ESI
0050e45d : MOV dword ptr [ESP + 0x14],0x1
0050e465 : MOV dword ptr [ESP + 0x18],EBX
0050e469 : MOV byte ptr [ESP + 0x1e],BL
0050e46d : MOV byte ptr [ESP + 0x1f],0xff
0050e472 : MOV byte ptr [ESP + 0x20],BL
0050e476 : MOV byte ptr [ESP + 0x21],BL
0050e47a : CALL EDX
0050e47c : CMP dword ptr [ESI + 0x84],EBX
0050e482 : JNZ 0x0050e4b7
0050e484 : LEA ECX,[ESP + 0x40]
0050e488 : CALL 0x00522b80
0050e48d : FLDZ
0050e48f : FSTP double ptr [ESP + 0x38]
0050e493 : PUSH 0x1
0050e495 : FLD double ptr [0x00cdf2a8]
0050e49b : LEA EAX,[ESP + 0x24]
0050e49f : FST double ptr [ESP + 0x34]
0050e4a3 : PUSH EAX
0050e4a4 : MOV ECX,ESI
0050e4a6 : FSTP double ptr [ESP + 0x30]
0050e4aa : MOV dword ptr [ESP + 0x2c],EBX
0050e4ae : MOV dword ptr [ESP + 0x28],EBX
0050e4b2 : CALL 0x0050c690
0050e4b7 : POP EDI
0050e4b8 : POP ESI
0050e4b9 : POP EBX
0050e4ba : ADD ESP,0x4c
0050e4bd : RET
