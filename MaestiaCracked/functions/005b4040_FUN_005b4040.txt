PROGRAM  : Maestia.exe
FUNCTION : FUN_005b4040
ENTRY    : 005b4040
BODY     : [[005b4040, 005b412c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b4040(int param_1)

{
  byte *pbVar1;
  char cVar2;
  int iVar3;
  undefined1 *puVar4;
  int *piVar5;
  float10 fVar6;
  undefined4 uVar7;
  double local_20 [2];
  undefined1 auStack_10 [16];
  
  local_20[0] = (double)((ulonglong)local_20[0] & 0xffffffff00000000);
  if (*(int *)(param_1 + 8) != 0) {
    iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar3 == 9) {
      cVar2 = (**(code **)(**(int **)(param_1 + 8) + 0x40))();
      if (cVar2 == '\0') {
        if (*(int *)(param_1 + 8) == 0) {
          piVar5 = (int *)0x0;
        }
        else {
          piVar5 = (int *)(*(int *)(param_1 + 8) + -0x10);
        }
        iVar3 = *(int *)(param_1 + 0x1c);
        if (iVar3 < 1) {
          auStack_10[0] = 0;
          puVar4 = auStack_10;
        }
        else {
          puVar4 = (undefined1 *)FUN_00526260(0);
        }
        FUN_005266c0(puVar4);
        if (iVar3 < 1) {
          FUN_00526bc0();
        }
        (**(code **)(*piVar5 + 0xc))(*(undefined4 *)(param_1 + 0x18),local_20);
        FUN_005268b0(&stack0xffffffd8);
        FUN_00526bc0();
        return;
      }
    }
  }
  if (*(int *)(param_1 + 0x1c) == 0) {
    fVar6 = (float10)0;
  }
  else {
    uVar7 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(0);
    fVar6 = (float10)FUN_00527730(uVar7);
  }
  pbVar1 = *(byte **)(param_1 + 4);
  local_20[0] = (double)fVar6;
  if (4 < *pbVar1) {
    FUN_00526400();
  }
  *pbVar1 = 3;
  *(double *)(pbVar1 + 4) = local_20[0];
  return;
}



============================================================
DISASSEMBLY
============================================================
005b4040 : SUB ESP,0x20
005b4043 : PUSH EBX
005b4044 : XOR EBX,EBX
005b4046 : PUSH ESI
005b4047 : MOV ESI,dword ptr [ESP + 0x2c]
005b404b : MOV dword ptr [ESP + 0x8],EBX
005b404f : CMP dword ptr [ESI + 0x8],EBX
005b4052 : JZ 0x005b40ed
005b4058 : MOV ECX,dword ptr [ESI + 0x8]
005b405b : MOV EAX,dword ptr [ECX]
005b405d : MOV EDX,dword ptr [EAX + 0x8]
005b4060 : CALL EDX
005b4062 : CMP EAX,0x9
005b4065 : JNZ 0x005b40ed
005b406b : MOV ECX,dword ptr [ESI + 0x8]
005b406e : MOV EAX,dword ptr [ECX]
005b4070 : MOV EDX,dword ptr [EAX + 0x40]
005b4073 : CALL EDX
005b4075 : TEST AL,AL
005b4077 : JNZ 0x005b40ed
005b4079 : MOV EAX,dword ptr [ESI + 0x8]
005b407c : PUSH EDI
005b407d : TEST EAX,EAX
005b407f : JZ 0x005b4086
005b4081 : LEA EDI,[EAX + -0x10]
005b4084 : JMP 0x005b4088
005b4086 : XOR EDI,EDI
005b4088 : CMP dword ptr [ESI + 0x1c],EBX
005b408b : JLE 0x005b4098
005b408d : PUSH 0x0
005b408f : MOV ECX,ESI
005b4091 : CALL 0x00526260
005b4096 : JMP 0x005b40a6
005b4098 : MOV EBX,0x1
005b409d : MOV byte ptr [ESP + 0x1c],0x0
005b40a2 : LEA EAX,[ESP + 0x1c]
005b40a6 : PUSH EAX
005b40a7 : LEA ECX,[ESP + 0x10]
005b40ab : CALL 0x005266c0
005b40b0 : TEST BL,0x1
005b40b3 : JZ 0x005b40be
005b40b5 : LEA ECX,[ESP + 0x1c]
005b40b9 : CALL 0x00526bc0
005b40be : MOV EAX,dword ptr [EDI]
005b40c0 : MOV EDX,dword ptr [ESI + 0x18]
005b40c3 : MOV EAX,dword ptr [EAX + 0xc]
005b40c6 : LEA ECX,[ESP + 0xc]
005b40ca : PUSH ECX
005b40cb : PUSH EDX
005b40cc : MOV ECX,EDI
005b40ce : CALL EAX
005b40d0 : LEA ECX,[ESP + 0xc]
005b40d4 : PUSH ECX
005b40d5 : MOV ECX,dword ptr [ESI + 0x4]
005b40d8 : CALL 0x005268b0
005b40dd : LEA ECX,[ESP + 0xc]
005b40e1 : CALL 0x00526bc0
005b40e6 : POP EDI
005b40e7 : POP ESI
005b40e8 : POP EBX
005b40e9 : ADD ESP,0x20
005b40ec : RET
005b40ed : CMP dword ptr [ESI + 0x1c],EBX
005b40f0 : JNZ 0x005b40f6
005b40f2 : FLDZ
005b40f4 : JMP 0x005b410a
005b40f6 : MOV EDX,dword ptr [ESI + 0x18]
005b40f9 : PUSH EDX
005b40fa : PUSH 0x0
005b40fc : MOV ECX,ESI
005b40fe : CALL 0x00526260
005b4103 : MOV ECX,EAX
005b4105 : CALL 0x00527730
005b410a : MOV ESI,dword ptr [ESI + 0x4]
005b410d : FSTP double ptr [ESP + 0x8]
005b4111 : CMP byte ptr [ESI],0x5
005b4114 : JC 0x005b411d
005b4116 : MOV ECX,ESI
005b4118 : CALL 0x00526400
005b411d : FLD double ptr [ESP + 0x8]
005b4121 : MOV byte ptr [ESI],0x3
005b4124 : FSTP double ptr [ESI + 0x4]
005b4127 : POP ESI
005b4128 : POP EBX
005b4129 : ADD ESP,0x20
005b412c : RET
