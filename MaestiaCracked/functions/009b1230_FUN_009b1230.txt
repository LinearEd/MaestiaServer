PROGRAM  : Maestia.exe
FUNCTION : FUN_009b1230
ENTRY    : 009b1230
BODY     : [[009b1230, 009b15a2]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x009b14eb) */

void FUN_009b1230(int *param_1,ushort *param_2)

{
  short sVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  short *psVar6;
  undefined4 *puVar7;
  short *psVar8;
  uint uVar9;
  uint local_9c;
  undefined1 local_94 [4];
  undefined2 local_90;
  undefined4 local_80;
  uint local_7c;
  undefined1 local_78 [4];
  undefined2 local_74;
  undefined4 local_64;
  uint local_60;
  int local_5c;
  uint local_58;
  ushort *local_54;
  ushort *local_50;
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5b8d7;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_50 = (ushort *)((int)param_2 + 0xd);
  local_54 = param_2;
  uVar9 = (*param_2 & 0x1fff) - 0xd;
  local_58 = 0;
  local_14 = uVar2;
  FUN_00a1d610(*(int *)(param_2 + 2) * 1000);
  local_8 = 0;
  local_60 = 7;
  local_64 = 0;
  local_74 = 0;
  FUN_00406360(L"IDS_MESSAGE_GOLDEN_TIME_EVENT_NOTICE",0x24);
  local_8._0_1_ = 1;
  iVar3 = FUN_0081d120(local_78);
  local_8._0_1_ = 2;
  puVar7 = local_48;
  if (local_34 < 8) {
    puVar7 = &local_48;
  }
  if (*(uint *)(iVar3 + 0x18) < 8) {
    iVar3 = iVar3 + 4;
  }
  else {
    iVar3 = *(int *)(iVar3 + 4);
  }
  FUN_00404750(iVar3,puVar7,uVar2);
  local_8 = CONCAT31(local_8._1_3_,4);
  if (7 < local_7c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_7c = 7;
  local_80 = 0;
  local_90 = 0;
  local_8._0_1_ = 5;
  if (7 < local_60) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_60 = 7;
  local_64 = 0;
  local_74 = 0;
  local_7c = 7;
  local_80 = 0;
  local_90 = 0;
  FUN_00406360(L"IDS_MESSAGE_PRODUCT",0x13);
  local_8._0_1_ = 6;
  iVar3 = FUN_0081d120(local_94);
  local_8._0_1_ = 7;
  if (*(uint *)(iVar3 + 0x18) < 8) {
    iVar3 = iVar3 + 4;
  }
  else {
    iVar3 = *(int *)(iVar3 + 4);
  }
  uVar4 = FUN_00404750(L" %s : ",iVar3);
  local_8._0_1_ = 8;
  FUN_00405c30(uVar4,0,0xffffffff);
  local_8 = CONCAT31(local_8._1_3_,7);
  if (7 < local_60) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_60 = 7;
  local_64 = 0;
  local_74 = 0;
  local_8 = CONCAT31(local_8._1_3_,6);
  if (7 < local_9c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8._0_1_ = 5;
  if (7 < local_7c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_7c = 7;
  local_80 = 0;
  local_90 = 0;
  local_5c = 0;
  if ((char)local_54[6] != '\0') {
    do {
      iVar3 = local_5c;
      if ((local_50 == (ushort *)0x0) || (uVar9 < 2)) {
        uVar9 = 0;
        local_50 = (ushort *)0x0;
      }
      else {
        local_58 = (uint)*local_50;
        uVar9 = uVar9 - 2;
        local_50 = local_50 + 1;
      }
      iVar5 = FUN_00703c00(0x600);
      if (iVar5 != 0) {
        if (iVar3 != 0) {
          FUN_00404870(&DAT_00c8e234,1);
        }
        iVar3 = FUN_00824a20(DAT_0172491c,0);
        local_8._0_1_ = 9;
        if (*(uint *)(iVar3 + 0x18) < 8) {
          psVar8 = (short *)(iVar3 + 4);
        }
        else {
          psVar8 = *(short **)(iVar3 + 4);
        }
        psVar6 = psVar8;
        do {
          sVar1 = *psVar6;
          psVar6 = psVar6 + 1;
        } while (sVar1 != 0);
        FUN_00404870(psVar8,(int)psVar6 - (int)(psVar8 + 1) >> 1);
        local_8._0_1_ = 5;
        iVar3 = local_5c;
      }
      local_5c = iVar3 + 1;
    } while (local_5c < (int)(uint)(byte)local_54[6]);
  }
  (**(code **)(*param_1 + 0x44))(local_30,0x11);
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  local_8 = 0xffffffff;
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_34 = 7;
  local_38 = 0;
  local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009b1230 : PUSH EBP
009b1231 : MOV EBP,ESP
009b1233 : PUSH -0x1
009b1235 : PUSH 0xb5b8d7
009b123a : MOV EAX,FS:[0x0]
009b1240 : PUSH EAX
009b1241 : SUB ESP,0xa4
009b1247 : MOV EAX,[0x00d66fa0]
009b124c : XOR EAX,EBP
009b124e : MOV dword ptr [EBP + -0x10],EAX
009b1251 : PUSH EBX
009b1252 : PUSH ESI
009b1253 : PUSH EDI
009b1254 : PUSH EAX
009b1255 : LEA EAX,[EBP + -0xc]
009b1258 : MOV FS:[0x0],EAX
009b125e : MOV EAX,dword ptr [EBP + 0x8]
009b1261 : MOV dword ptr [EBP + 0xffffff6c],EAX
009b1267 : MOV EAX,dword ptr [EBP + 0xc]
009b126a : MOVZX EBX,word ptr [EAX]
009b126d : LEA ECX,[EAX + 0xd]
009b1270 : MOV dword ptr [EBP + -0x50],EAX
009b1273 : MOV EAX,dword ptr [EAX + 0x4]
009b1276 : IMUL EAX,EAX,0x3e8
009b127c : AND EBX,0x1fff
009b1282 : XOR ESI,ESI
009b1284 : PUSH EAX
009b1285 : LEA EDX,[EBP + -0x48]
009b1288 : MOV dword ptr [EBP + -0x4c],ECX
009b128b : SUB EBX,0xd
009b128e : MOV dword ptr [EBP + -0x54],ESI
009b1291 : CALL 0x00a1d610
009b1296 : MOV dword ptr [EBP + -0x4],ESI
009b1299 : PUSH 0x24
009b129b : XOR EDX,EDX
009b129d : PUSH 0xc8e1b0
009b12a2 : LEA ECX,[EBP + -0x74]
009b12a5 : MOV dword ptr [EBP + -0x5c],0x7
009b12ac : MOV dword ptr [EBP + -0x60],ESI
009b12af : MOV word ptr [EBP + -0x70],DX
009b12b3 : CALL 0x00406360
009b12b8 : MOV byte ptr [EBP + -0x4],0x1
009b12bc : MOV ECX,dword ptr [0x0172491c]
009b12c2 : LEA EAX,[EBP + -0x74]
009b12c5 : PUSH EAX
009b12c6 : LEA EDI,[EBP + 0xffffff70]
009b12cc : CALL 0x0081d120
009b12d1 : MOV byte ptr [EBP + -0x4],0x2
009b12d5 : MOV ECX,dword ptr [EBP + -0x44]
009b12d8 : MOV EDI,0x8
009b12dd : CMP dword ptr [EBP + -0x30],EDI
009b12e0 : JNC 0x009b12e5
009b12e2 : LEA ECX,[EBP + -0x44]
009b12e5 : CMP dword ptr [EAX + 0x18],EDI
009b12e8 : JC 0x009b12ef
009b12ea : MOV EAX,dword ptr [EAX + 0x4]
009b12ed : JMP 0x009b12f2
009b12ef : ADD EAX,0x4
009b12f2 : PUSH ECX
009b12f3 : PUSH EAX
009b12f4 : LEA ESI,[EBP + -0x2c]
009b12f7 : CALL 0x00404750
009b12fc : ADD ESP,0x8
009b12ff : MOV byte ptr [EBP + -0x4],0x4
009b1303 : CMP dword ptr [EBP + -0x78],EDI
009b1306 : JC 0x009b1313
009b1308 : MOV ECX,dword ptr [EBP + 0xffffff74]
009b130e : CALL 0x006f04e0
009b1313 : MOV EDI,0x7
009b1318 : XOR ESI,ESI
009b131a : XOR ECX,ECX
009b131c : MOV dword ptr [EBP + -0x78],EDI
009b131f : MOV dword ptr [EBP + -0x7c],ESI
009b1322 : MOV word ptr [EBP + 0xffffff74],CX
009b1329 : MOV byte ptr [EBP + -0x4],0x5
009b132d : CMP dword ptr [EBP + -0x5c],0x8
009b1331 : JC 0x009b133b
009b1333 : MOV ECX,dword ptr [EBP + -0x70]
009b1336 : CALL 0x006f04e0
009b133b : PUSH 0x13
009b133d : XOR EDX,EDX
009b133f : XOR EAX,EAX
009b1341 : PUSH 0xc8e1fc
009b1346 : LEA ECX,[EBP + 0xffffff70]
009b134c : MOV dword ptr [EBP + -0x5c],EDI
009b134f : MOV dword ptr [EBP + -0x60],ESI
009b1352 : MOV word ptr [EBP + -0x70],DX
009b1356 : MOV dword ptr [EBP + -0x78],EDI
009b1359 : MOV dword ptr [EBP + -0x7c],ESI
009b135c : MOV word ptr [EBP + 0xffffff74],AX
009b1363 : CALL 0x00406360
009b1368 : MOV byte ptr [EBP + -0x4],0x6
009b136c : LEA ECX,[EBP + 0xffffff70]
009b1372 : PUSH ECX
009b1373 : MOV ECX,dword ptr [0x0172491c]
009b1379 : LEA EDI,[EBP + 0xffffff50]
009b137f : CALL 0x0081d120
009b1384 : MOV byte ptr [EBP + -0x4],0x7
009b1388 : MOV EDI,0x8
009b138d : CMP dword ptr [EAX + 0x18],EDI
009b1390 : JC 0x009b1397
009b1392 : MOV EAX,dword ptr [EAX + 0x4]
009b1395 : JMP 0x009b139a
009b1397 : ADD EAX,0x4
009b139a : PUSH EAX
009b139b : PUSH 0xc8e224
009b13a0 : LEA ESI,[EBP + -0x74]
009b13a3 : CALL 0x00404750
009b13a8 : ADD ESP,0x8
009b13ab : MOV byte ptr [EBP + -0x4],0x8
009b13af : PUSH -0x1
009b13b1 : PUSH 0x0
009b13b3 : PUSH EAX
009b13b4 : LEA ECX,[EBP + -0x2c]
009b13b7 : CALL 0x00405c30
009b13bc : MOV byte ptr [EBP + -0x4],0x7
009b13c0 : CMP dword ptr [EBP + -0x5c],EDI
009b13c3 : JC 0x009b13cd
009b13c5 : MOV ECX,dword ptr [EBP + -0x70]
009b13c8 : CALL 0x006f04e0
009b13cd : MOV ESI,0x7
009b13d2 : XOR EDX,EDX
009b13d4 : MOV dword ptr [EBP + -0x5c],ESI
009b13d7 : MOV dword ptr [EBP + -0x60],0x0
009b13de : MOV word ptr [EBP + -0x70],DX
009b13e2 : MOV byte ptr [EBP + -0x4],0x6
009b13e6 : CMP dword ptr [EBP + 0xffffff68],EDI
009b13ec : JC 0x009b13f9
009b13ee : MOV ECX,dword ptr [EBP + 0xffffff54]
009b13f4 : CALL 0x006f04e0
009b13f9 : XOR EAX,EAX
009b13fb : MOV dword ptr [EBP + 0xffffff68],ESI
009b1401 : MOV dword ptr [EBP + 0xffffff64],0x0
009b140b : MOV word ptr [EBP + 0xffffff54],AX
009b1412 : MOV byte ptr [EBP + -0x4],0x5
009b1416 : CMP dword ptr [EBP + -0x78],EDI
009b1419 : JC 0x009b1426
009b141b : MOV ECX,dword ptr [EBP + 0xffffff74]
009b1421 : CALL 0x006f04e0
009b1426 : MOV EDX,dword ptr [EBP + -0x50]
009b1429 : XOR ECX,ECX
009b142b : MOV dword ptr [EBP + -0x78],ESI
009b142e : XOR ESI,ESI
009b1430 : MOV dword ptr [EBP + -0x7c],ESI
009b1433 : MOV word ptr [EBP + 0xffffff74],CX
009b143a : MOV dword ptr [EBP + -0x58],ESI
009b143d : CMP byte ptr [EDX + 0xc],CL
009b1440 : JBE 0x009b152e
009b1446 : MOV EAX,dword ptr [EBP + -0x4c]
009b1449 : TEST EAX,EAX
009b144b : JZ 0x009b1463
009b144d : CMP EBX,0x2
009b1450 : JC 0x009b1463
009b1452 : MOVZX ECX,word ptr [EAX]
009b1455 : SUB EBX,0x2
009b1458 : ADD EAX,0x2
009b145b : MOV dword ptr [EBP + -0x54],ECX
009b145e : MOV dword ptr [EBP + -0x4c],EAX
009b1461 : JMP 0x009b1468
009b1463 : XOR EBX,EBX
009b1465 : MOV dword ptr [EBP + -0x4c],EBX
009b1468 : MOV EDI,dword ptr [EBP + -0x54]
009b146b : PUSH 0x600
009b1470 : CALL 0x00703c00
009b1475 : MOV EDI,EAX
009b1477 : ADD ESP,0x4
009b147a : TEST EDI,EDI
009b147c : JZ 0x009b1516
009b1482 : TEST ESI,ESI
009b1484 : JZ 0x009b1495
009b1486 : PUSH 0x1
009b1488 : PUSH 0xc8e234
009b148d : LEA ESI,[EBP + -0x2c]
009b1490 : CALL 0x00404870
009b1495 : MOV EAX,[0x0172491c]
009b149a : PUSH 0x0
009b149c : LEA EDX,[EDI + 0x18]
009b149f : PUSH EAX
009b14a0 : LEA ESI,[EBP + 0xffffff50]
009b14a6 : CALL 0x00824a20
009b14ab : MOV byte ptr [EBP + -0x4],0x9
009b14af : MOV EDI,0x8
009b14b4 : CMP dword ptr [EAX + 0x18],EDI
009b14b7 : JC 0x009b14be
009b14b9 : MOV EDX,dword ptr [EAX + 0x4]
009b14bc : JMP 0x009b14c1
009b14be : LEA EDX,[EAX + 0x4]
009b14c1 : MOV EAX,EDX
009b14c3 : LEA ESI,[EAX + 0x2]
009b14c6 : MOV CX,word ptr [EAX]
009b14c9 : ADD EAX,0x2
009b14cc : TEST CX,CX
009b14cf : JNZ 0x009b14c6
009b14d1 : SUB EAX,ESI
009b14d3 : SAR EAX,0x1
009b14d5 : PUSH EAX
009b14d6 : PUSH EDX
009b14d7 : LEA ESI,[EBP + -0x2c]
009b14da : CALL 0x00404870
009b14df : MOV byte ptr [EBP + -0x4],0x5
009b14e3 : CMP dword ptr [EBP + 0xffffff68],EDI
009b14e9 : JC 0x009b14f6
009b14eb : MOV ECX,dword ptr [EBP + 0xffffff54]
009b14f1 : CALL 0x006f04e0
009b14f6 : MOV ESI,dword ptr [EBP + -0x58]
009b14f9 : XOR ECX,ECX
009b14fb : MOV dword ptr [EBP + 0xffffff68],0x7
009b1505 : MOV dword ptr [EBP + 0xffffff64],0x0
009b150f : MOV word ptr [EBP + 0xffffff54],CX
009b1516 : MOV EDX,dword ptr [EBP + -0x50]
009b1519 : MOVZX EAX,byte ptr [EDX + 0xc]
009b151d : INC ESI
009b151e : CMP ESI,EAX
009b1520 : MOV dword ptr [EBP + -0x58],ESI
009b1523 : JL 0x009b1446
009b1529 : MOV EDI,0x8
009b152e : MOV ECX,dword ptr [EBP + 0xffffff6c]
009b1534 : MOV EDX,dword ptr [ECX]
009b1536 : MOV EDX,dword ptr [EDX + 0x44]
009b1539 : PUSH 0x11
009b153b : LEA EAX,[EBP + -0x2c]
009b153e : PUSH EAX
009b153f : CALL EDX
009b1541 : MOV byte ptr [EBP + -0x4],0x0
009b1545 : CMP dword ptr [EBP + -0x14],EDI
009b1548 : JC 0x009b1552
009b154a : MOV ECX,dword ptr [EBP + -0x28]
009b154d : CALL 0x006f04e0
009b1552 : MOV ESI,0x7
009b1557 : XOR EBX,EBX
009b1559 : XOR EAX,EAX
009b155b : MOV dword ptr [EBP + -0x14],ESI
009b155e : MOV dword ptr [EBP + -0x18],EBX
009b1561 : MOV word ptr [EBP + -0x28],AX
009b1565 : MOV dword ptr [EBP + -0x4],0xffffffff
009b156c : CMP dword ptr [EBP + -0x30],EDI
009b156f : JC 0x009b1579
009b1571 : MOV ECX,dword ptr [EBP + -0x44]
009b1574 : CALL 0x006f04e0
009b1579 : XOR ECX,ECX
009b157b : MOV dword ptr [EBP + -0x30],ESI
009b157e : MOV dword ptr [EBP + -0x34],EBX
009b1581 : MOV word ptr [EBP + -0x44],CX
009b1585 : MOV ECX,dword ptr [EBP + -0xc]
009b1588 : MOV dword ptr FS:[0x0],ECX
009b158f : POP ECX
009b1590 : POP EDI
009b1591 : POP ESI
009b1592 : POP EBX
009b1593 : MOV ECX,dword ptr [EBP + -0x10]
009b1596 : XOR ECX,EBP
009b1598 : CALL 0x00633e6b
009b159d : MOV ESP,EBP
009b159f : POP EBP
009b15a0 : RET 0x8
