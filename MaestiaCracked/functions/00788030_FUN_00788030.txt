PROGRAM  : Maestia.exe
FUNCTION : FUN_00788030
ENTRY    : 00788030
BODY     : [[00788030, 00788154]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00788030(void)

{
  int iVar1;
  uint uVar2;
  undefined8 *in_EAX;
  void *pvVar3;
  int in_ECX;
  uint uVar4;
  
  if (*(char *)(in_ECX + 4) != '\0') {
    return 0;
  }
  *(undefined8 *)(in_ECX + 0x50) = *in_EAX;
  *(undefined8 *)(in_ECX + 0x58) = in_EAX[1];
  *(undefined4 *)(in_ECX + 0x60) = *(undefined4 *)(in_EAX + 2);
  if (*(uint *)(in_ECX + 0x1c) < 0x20) {
    *(undefined4 *)(in_ECX + 100) = 3;
    *(uint *)(in_ECX + 0x68) = *(uint *)(in_ECX + 0x2c) / (uint)(*(int *)(in_ECX + 0x14) * 3);
    return 1;
  }
  if (*(char *)(in_ECX + 0x3c) == '\0') {
    iVar1 = *(int *)(in_ECX + 0x14);
    uVar2 = *(uint *)(in_ECX + 0x2c);
    uVar4 = iVar1 * *(uint *)(in_ECX + 0x1c);
    if (uVar2 <= uVar4 && uVar4 - uVar2 != 0) {
      *(undefined4 *)(in_ECX + 100) = 3;
      *(uint *)(in_ECX + 0x68) = uVar2 / (uint)(iVar1 * 3);
      return 1;
    }
    pvVar3 = (void *)FUN_00787fa0(iVar1);
    if (pvVar3 == (void *)0x0) goto LAB_00788149;
    _memcpy(pvVar3,*(void **)(in_ECX + 8),*(int *)(in_ECX + 0x1c) * *(int *)(in_ECX + 0x14));
    FUN_00787f70();
    *(undefined1 *)(in_ECX + 0x3c) = 1;
  }
  if (*(char *)(in_ECX + 0x3d) == '\0') {
    uVar2 = *(uint *)(in_ECX + 0x30);
    iVar1 = (uint)(*(int *)(in_ECX + 0x18) != 0x65) * 2 + 2;
    uVar4 = *(int *)(in_ECX + 0x20) * iVar1;
    if (uVar2 <= uVar4 && uVar4 - uVar2 != 0) {
      *(undefined4 *)(in_ECX + 100) = 2;
      *(uint *)(in_ECX + 0x68) = uVar2 / (uint)(iVar1 * 3);
      return 1;
    }
    pvVar3 = (void *)FUN_00787ef0(iVar1);
    if (pvVar3 == (void *)0x0) {
LAB_00788149:
      *(undefined4 *)(in_ECX + 100) = 0;
      return 0;
    }
    _memcpy(pvVar3,*(void **)(in_ECX + 0xc),*(int *)(in_ECX + 0x20) * iVar1);
    (**(code **)(**(int **)(in_ECX + 0x28) + 0x30))(*(int **)(in_ECX + 0x28));
    *(undefined1 *)(in_ECX + 0x3d) = 1;
  }
  *(undefined4 *)(in_ECX + 100) = 1;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00788030 : PUSH ESI
00788031 : MOV ESI,ECX
00788033 : CMP byte ptr [ESI + 0x4],0x0
00788037 : JZ 0x0078803d
00788039 : XOR AL,AL
0078803b : POP ESI
0078803c : RET
0078803d : MOVQ XMM0,qword ptr [EAX]
00788041 : MOVQ qword ptr [ESI + 0x50],XMM0
00788046 : MOVQ XMM0,qword ptr [EAX + 0x8]
0078804b : MOVQ qword ptr [ESI + 0x58],XMM0
00788050 : MOV EAX,dword ptr [EAX + 0x10]
00788053 : MOV dword ptr [ESI + 0x60],EAX
00788056 : MOV EAX,dword ptr [ESI + 0x1c]
00788059 : PUSH EDI
0078805a : CMP EAX,0x20
0078805d : JNC 0x0078807b
0078805f : MOV EAX,dword ptr [ESI + 0x14]
00788062 : LEA ECX,[EAX + EAX*0x2]
00788065 : MOV EAX,dword ptr [ESI + 0x2c]
00788068 : XOR EDX,EDX
0078806a : DIV ECX
0078806c : POP EDI
0078806d : MOV dword ptr [ESI + 0x64],0x3
00788074 : MOV dword ptr [ESI + 0x68],EAX
00788077 : MOV AL,0x1
00788079 : POP ESI
0078807a : RET
0078807b : CMP byte ptr [ESI + 0x3c],0x0
0078807f : JNZ 0x007880d4
00788081 : MOV ECX,dword ptr [ESI + 0x14]
00788084 : MOV EDX,dword ptr [ESI + 0x2c]
00788087 : MOV EDI,ECX
00788089 : IMUL EDI,EAX
0078808c : CMP EDI,EDX
0078808e : JBE 0x007880a8
00788090 : MOV EAX,EDX
00788092 : LEA ECX,[ECX + ECX*0x2]
00788095 : XOR EDX,EDX
00788097 : DIV ECX
00788099 : POP EDI
0078809a : MOV dword ptr [ESI + 0x64],0x3
007880a1 : MOV dword ptr [ESI + 0x68],EAX
007880a4 : MOV AL,0x1
007880a6 : POP ESI
007880a7 : RET
007880a8 : PUSH ECX
007880a9 : CALL 0x00787fa0
007880ae : TEST EAX,EAX
007880b0 : JZ 0x00788149
007880b6 : MOV EDX,dword ptr [ESI + 0x1c]
007880b9 : IMUL EDX,dword ptr [ESI + 0x14]
007880bd : MOV ECX,dword ptr [ESI + 0x8]
007880c0 : PUSH EDX
007880c1 : PUSH ECX
007880c2 : PUSH EAX
007880c3 : CALL 0x0063ae40
007880c8 : ADD ESP,0xc
007880cb : CALL 0x00787f70
007880d0 : MOV byte ptr [ESI + 0x3c],0x1
007880d4 : CMP byte ptr [ESI + 0x3d],0x0
007880d8 : JNZ 0x0078813d
007880da : MOV EAX,dword ptr [ESI + 0x20]
007880dd : MOV ECX,dword ptr [ESI + 0x30]
007880e0 : XOR EDX,EDX
007880e2 : CMP dword ptr [ESI + 0x18],0x65
007880e6 : SETNZ DL
007880e9 : LEA EDX,[EDX + EDX*0x1 + 0x2]
007880ed : MOV EDI,EDX
007880ef : MOV EDX,EAX
007880f1 : IMUL EDX,EDI
007880f4 : CMP EDX,ECX
007880f6 : JBE 0x00788110
007880f8 : LEA EDI,[EDI + EDI*0x2]
007880fb : MOV EAX,ECX
007880fd : XOR EDX,EDX
007880ff : DIV EDI
00788101 : POP EDI
00788102 : MOV dword ptr [ESI + 0x64],0x2
00788109 : MOV dword ptr [ESI + 0x68],EAX
0078810c : MOV AL,0x1
0078810e : POP ESI
0078810f : RET
00788110 : PUSH EDI
00788111 : CALL 0x00787ef0
00788116 : TEST EAX,EAX
00788118 : JZ 0x00788149
0078811a : MOV ECX,dword ptr [ESI + 0x20]
0078811d : MOV EDX,dword ptr [ESI + 0xc]
00788120 : IMUL ECX,EDI
00788123 : PUSH ECX
00788124 : PUSH EDX
00788125 : PUSH EAX
00788126 : CALL 0x0063ae40
0078812b : MOV EAX,dword ptr [ESI + 0x28]
0078812e : MOV ECX,dword ptr [EAX]
00788130 : MOV EDX,dword ptr [ECX + 0x30]
00788133 : ADD ESP,0xc
00788136 : PUSH EAX
00788137 : CALL EDX
00788139 : MOV byte ptr [ESI + 0x3d],0x1
0078813d : POP EDI
0078813e : MOV dword ptr [ESI + 0x64],0x1
00788145 : MOV AL,0x1
00788147 : POP ESI
00788148 : RET
00788149 : POP EDI
0078814a : MOV dword ptr [ESI + 0x64],0x0
00788151 : XOR AL,AL
00788153 : POP ESI
00788154 : RET
