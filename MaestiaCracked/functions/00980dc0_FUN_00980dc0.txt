PROGRAM  : Maestia.exe
FUNCTION : FUN_00980dc0
ENTRY    : 00980dc0
BODY     : [[00980dc0, 00980fff]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00980dc0(char param_1)

{
  int *piVar1;
  float *pfVar2;
  float fVar3;
  double dVar4;
  float fStack_74;
  undefined4 uStack_70;
  undefined4 local_6c;
  undefined1 local_58 [8];
  undefined1 auStack_50 [76];
  
  piVar1 = *(int **)(DAT_00da93ec + 0x74);
  if ((piVar1 != (int *)0x0) && (*(int *)(DAT_0172491c + 0x17c) != 0)) {
    FUN_00889560();
    FUN_00b0b091();
    pfVar2 = (float *)(**(code **)(*piVar1 + 8))(local_58);
    local_6c = SUB84((double)*pfVar2,0);
    (**(code **)(*piVar1 + 8))(auStack_50);
    dVar4 = (double)CONCAT44(local_6c,uStack_70);
    FUN_00b0b091();
    fVar3 = (float)dVar4 * 57.295826;
    if ((DAT_0172485c != fStack_74) || (param_1 != '\0')) {
      if ((*(char *)(DAT_00da93ec + 0x219) != '\0') || (*(char *)(DAT_00da93ec + 0x21a) == '\0')) {
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))
                    (piVar1,"MinimapSetCharRotation",&DAT_00c7fc00,(double)fStack_74);
        }
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))
                    (piVar1,"ZoneMapSetCharRotation",&DAT_00c7fc1c,(double)fStack_74);
        }
      }
      DAT_0172485c = fStack_74;
    }
    if (DAT_01724860 == fVar3) {
      if (*(char *)(DAT_017248cc + 0x95) == '\0') {
        return;
      }
    }
    else if (*(char *)(DAT_017248cc + 0x95) == '\0') {
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        (**(code **)(*piVar1 + 4))(piVar1,"MinimapSetMapRotation",&DAT_00c7fc38,(double)fVar3);
      }
      DAT_01724860 = fVar3;
      return;
    }
    if (DAT_01724860 != 0.0) {
      DAT_01724860 = 0.0;
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        (**(code **)(*piVar1 + 4))(piVar1,"MinimapSetMapRotation",&DAT_00c7fc54,0);
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00980dc0 : PUSH EBP
00980dc1 : MOV EBP,ESP
00980dc3 : AND ESP,0xffffffc0
00980dc6 : MOV EAX,[0x00da93ec]
00980dcb : SUB ESP,0x38
00980dce : PUSH ESI
00980dcf : PUSH EDI
00980dd0 : MOV EDI,dword ptr [EAX + 0x74]
00980dd3 : TEST EDI,EDI
00980dd5 : JZ 0x00980ff8
00980ddb : MOV ECX,dword ptr [0x0172491c]
00980de1 : MOV EAX,dword ptr [ECX + 0x17c]
00980de7 : TEST EAX,EAX
00980de9 : JZ 0x00980ff8
00980def : XORPS XMM0,XMM0
00980df2 : LEA ESI,[ESP + 0x20]
00980df6 : MOVSS dword ptr [ESP + 0x20],XMM0
00980dfc : MOVSS dword ptr [ESP + 0x24],XMM0
00980e02 : CALL 0x00889560
00980e07 : MOVSS XMM1,dword ptr [ESP + 0x24]
00980e0d : MOVSS XMM0,dword ptr [ESP + 0x20]
00980e13 : CVTPS2PD XMM0,XMM0
00980e16 : CVTPS2PD XMM1,XMM1
00980e19 : CALL 0x00b0b091
00980e1e : MOV EDX,dword ptr [EDI]
00980e20 : MOV EDX,dword ptr [EDX + 0x8]
00980e23 : LEA EAX,[ESP + 0x28]
00980e27 : CVTSD2SS XMM0,XMM0
00980e2b : MULSS XMM0,dword ptr [0x00cdf4a8]
00980e33 : PUSH EAX
00980e34 : MOV ECX,EDI
00980e36 : MOVSS dword ptr [ESP + 0x18],XMM0
00980e3c : CALL EDX
00980e3e : MOVSS XMM0,dword ptr [EAX]
00980e42 : MOV EAX,dword ptr [EDI]
00980e44 : MOV EDX,dword ptr [EAX + 0x8]
00980e47 : LEA ECX,[ESP + 0x34]
00980e4b : PUSH ECX
00980e4c : CVTPS2PD XMM0,XMM0
00980e4f : MOV ECX,EDI
00980e51 : MOVSD qword ptr [ESP + 0x1c],XMM0
00980e57 : CALL EDX
00980e59 : MOVSS XMM0,dword ptr [EAX + 0x8]
00980e5e : CVTPS2PD XMM1,XMM0
00980e61 : MOVSD XMM0,qword ptr [ESP + 0x18]
00980e67 : CALL 0x00b0b091
00980e6c : MOVSS XMM2,dword ptr [0x0172485c]
00980e74 : MOVSS XMM1,dword ptr [ESP + 0x14]
00980e7a : UCOMISS XMM2,XMM1
00980e7d : LAHF
00980e7e : CVTSD2SS XMM0,XMM0
00980e82 : MULSS XMM0,dword ptr [0x00cdf4a8]
00980e8a : MOVSS dword ptr [ESP + 0x18],XMM0
00980e90 : TEST AH,0x44
00980e93 : JP 0x00980e9f
00980e95 : CMP byte ptr [EBP + 0x8],0x0
00980e99 : JZ 0x00980f44
00980e9f : MOV EAX,[0x00da93ec]
00980ea4 : CMP byte ptr [EAX + 0x219],0x0
00980eab : JNZ 0x00980eba
00980ead : CMP byte ptr [EAX + 0x21a],0x0
00980eb4 : JNZ 0x00980f3c
00980eba : MOV EAX,[0x00da9894]
00980ebf : MOV EAX,dword ptr [EAX]
00980ec1 : TEST EAX,EAX
00980ec3 : JZ 0x00980efb
00980ec5 : MOV EAX,dword ptr [EAX + 0x114]
00980ecb : TEST EAX,EAX
00980ecd : JZ 0x00980efb
00980ecf : MOV ECX,dword ptr [EAX]
00980ed1 : MOV EDX,dword ptr [ECX + 0x4]
00980ed4 : SUB ESP,0x8
00980ed7 : CVTPS2PD XMM0,XMM1
00980eda : MOVSD qword ptr [ESP],XMM0
00980edf : PUSH 0xc7fc00
00980ee4 : PUSH 0xc7fc04
00980ee9 : PUSH EAX
00980eea : CALL EDX
00980eec : MOVSS XMM1,dword ptr [ESP + 0x28]
00980ef2 : MOVSS XMM0,dword ptr [ESP + 0x2c]
00980ef8 : ADD ESP,0x14
00980efb : MOV EAX,[0x00da9894]
00980f00 : MOV EAX,dword ptr [EAX]
00980f02 : TEST EAX,EAX
00980f04 : JZ 0x00980f3c
00980f06 : MOV EAX,dword ptr [EAX + 0x114]
00980f0c : TEST EAX,EAX
00980f0e : JZ 0x00980f3c
00980f10 : MOV ECX,dword ptr [EAX]
00980f12 : MOV EDX,dword ptr [ECX + 0x4]
00980f15 : SUB ESP,0x8
00980f18 : CVTPS2PD XMM0,XMM1
00980f1b : MOVSD qword ptr [ESP],XMM0
00980f20 : PUSH 0xc7fc1c
00980f25 : PUSH 0xc7fc20
00980f2a : PUSH EAX
00980f2b : CALL EDX
00980f2d : MOVSS XMM1,dword ptr [ESP + 0x28]
00980f33 : MOVSS XMM0,dword ptr [ESP + 0x2c]
00980f39 : ADD ESP,0x14
00980f3c : MOVSS dword ptr [0x0172485c],XMM1
00980f44 : MOVSS XMM1,dword ptr [0x01724860]
00980f4c : UCOMISS XMM1,XMM0
00980f4f : LAHF
00980f50 : TEST AH,0x44
00980f53 : MOV EAX,[0x017248cc]
00980f58 : JNP 0x00980faf
00980f5a : CMP byte ptr [EAX + 0x95],0x0
00980f61 : JNZ 0x00980fb8
00980f63 : MOV EAX,[0x00da9894]
00980f68 : MOV EAX,dword ptr [EAX]
00980f6a : TEST EAX,EAX
00980f6c : JZ 0x00980f9f
00980f6e : MOV EAX,dword ptr [EAX + 0x114]
00980f74 : TEST EAX,EAX
00980f76 : JZ 0x00980f9f
00980f78 : MOV ECX,dword ptr [EAX]
00980f7a : MOV EDX,dword ptr [ECX + 0x4]
00980f7d : SUB ESP,0x8
00980f80 : CVTSS2SD XMM0,XMM0
00980f84 : MOVSD qword ptr [ESP],XMM0
00980f89 : PUSH 0xc7fc38
00980f8e : PUSH 0xc7fc3c
00980f93 : PUSH EAX
00980f94 : CALL EDX
00980f96 : MOVSS XMM0,dword ptr [ESP + 0x2c]
00980f9c : ADD ESP,0x14
00980f9f : MOVSS dword ptr [0x01724860],XMM0
00980fa7 : POP EDI
00980fa8 : POP ESI
00980fa9 : MOV ESP,EBP
00980fab : POP EBP
00980fac : RET 0x4
00980faf : CMP byte ptr [EAX + 0x95],0x0
00980fb6 : JZ 0x00980ff8
00980fb8 : XORPS XMM0,XMM0
00980fbb : UCOMISS XMM1,XMM0
00980fbe : LAHF
00980fbf : TEST AH,0x44
00980fc2 : JNP 0x00980ff8
00980fc4 : MOV EAX,[0x00da9894]
00980fc9 : MOV EAX,dword ptr [EAX]
00980fcb : MOVSS dword ptr [0x01724860],XMM0
00980fd3 : TEST EAX,EAX
00980fd5 : JZ 0x00980ff8
00980fd7 : MOV EAX,dword ptr [EAX + 0x114]
00980fdd : TEST EAX,EAX
00980fdf : JZ 0x00980ff8
00980fe1 : MOV ECX,dword ptr [EAX]
00980fe3 : MOV EDX,dword ptr [ECX + 0x4]
00980fe6 : PUSH 0x0
00980fe8 : PUSH 0xc7fc54
00980fed : PUSH 0xc7fc58
00980ff2 : PUSH EAX
00980ff3 : CALL EDX
00980ff5 : ADD ESP,0x10
00980ff8 : POP EDI
00980ff9 : POP ESI
00980ffa : MOV ESP,EBP
00980ffc : POP EBP
00980ffd : RET 0x4
