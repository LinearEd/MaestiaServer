PROGRAM  : Maestia.exe
FUNCTION : FUN_005452d0
ENTRY    : 005452d0
BODY     : [[005452d0, 00545432]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_005452d0(void)

{
  int *piVar1;
  int *piVar2;
  int in_ECX;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  int *piVar7;
  int local_8;
  
  if ((*(byte *)(in_ECX + 0x143) & 3) != 0) {
    FUN_00549ad0();
    *(byte *)(in_ECX + 0x143) = *(byte *)(in_ECX + 0x143) & 0xfc;
  }
  if (*(short *)(in_ECX + 0x114) == *(short *)(in_ECX + 0x13c)) {
    return *(int *)(in_ECX + 0x110);
  }
  uVar4 = *(uint *)(in_ECX + 0x2c);
  iVar5 = 0;
  if (uVar4 == 0) {
    *(short *)(in_ECX + 0x114) = *(short *)(in_ECX + 0x13c);
    *(undefined4 *)(in_ECX + 0x110) = 0;
    return 0;
  }
  uVar3 = uVar4 - 1;
  piVar7 = *(int **)(*(int *)(in_ECX + 0x28) + uVar3 * 4);
  if ((*(int *)(in_ECX + 0x118) == 0) || ((*(byte *)(*(int *)(in_ECX + 0x118) + 0x68) & 1) != 0)) {
    if (*piVar7 < 0) {
      uVar6 = (uint)*(byte *)((int)piVar7 + 0xb);
    }
    else {
      uVar6 = piVar7[8];
    }
    if (uVar6 == 0) {
      if (-1 < (int)uVar3) {
        uVar3 = uVar4 - 2;
      }
      iVar5 = 1;
    }
  }
  if ((uVar4 <= uVar3) || ((int)uVar3 < 0)) {
    *(undefined4 *)(in_ECX + 0x110) = 0;
    *(undefined2 *)(in_ECX + 0x114) = *(undefined2 *)(in_ECX + 0x13c);
    return *(int *)(in_ECX + 0x110);
  }
  piVar7 = (int *)(*(int *)(in_ECX + 0x28) + uVar3 * 4);
  piVar1 = (int *)*piVar7;
  if (*piVar1 < 0) {
    uVar4 = (uint)*(ushort *)((int)piVar1 + 0x16);
  }
  else {
    uVar4 = piVar1[6];
  }
  for (; (uVar3 < *(uint *)(in_ECX + 0x2c) && (-1 < (int)uVar3)); uVar3 = uVar3 - 1) {
    piVar2 = (int *)*piVar7;
    if (iVar5 != 0) {
      if (*piVar2 < 0) {
        local_8 = piVar2[4];
      }
      else {
        local_8 = piVar2[4];
      }
      if ((float)local_8 <
          ((float)(int)(piVar1[4] + uVar4) - *(float *)(in_ECX + 0x4c)) + *(float *)(in_ECX + 0x44))
      break;
    }
    piVar7 = piVar7 + -1;
    iVar5 = iVar5 + 1;
  }
  iVar5 = *(int *)(in_ECX + 0x2c) - iVar5;
  *(undefined2 *)(in_ECX + 0x114) = *(undefined2 *)(in_ECX + 0x13c);
  *(int *)(in_ECX + 0x110) = iVar5;
  return iVar5;
}



============================================================
DISASSEMBLY
============================================================
005452d0 : SUB ESP,0x8
005452d3 : PUSH ESI
005452d4 : MOV ESI,ECX
005452d6 : TEST byte ptr [ESI + 0x143],0x3
005452dd : JZ 0x005452eb
005452df : CALL 0x00549ad0
005452e4 : AND byte ptr [ESI + 0x143],0xfc
005452eb : MOVZX EAX,word ptr [ESI + 0x13c]
005452f2 : CMP word ptr [ESI + 0x114],AX
005452f9 : JZ 0x00545428
005452ff : MOV ECX,dword ptr [ESI + 0x2c]
00545302 : PUSH EBP
00545303 : XOR EBP,EBP
00545305 : CMP ECX,EBP
00545307 : JNZ 0x00545321
00545309 : MOVZX EAX,AX
0054530c : MOV word ptr [ESI + 0x114],AX
00545313 : MOV dword ptr [ESI + 0x110],EBP
00545319 : MOV EAX,EBP
0054531b : POP EBP
0054531c : POP ESI
0054531d : ADD ESP,0x8
00545320 : RET
00545321 : MOV EAX,dword ptr [ESI + 0x118]
00545327 : MOV EDX,dword ptr [ESI + 0x28]
0054532a : PUSH EBX
0054532b : MOV EBX,ECX
0054532d : LEA ECX,[EBX + -0x1]
00545330 : PUSH EDI
00545331 : MOV EDI,dword ptr [EDX + ECX*0x4]
00545334 : TEST EAX,EAX
00545336 : JZ 0x0054533e
00545338 : TEST byte ptr [EAX + 0x68],0x1
0054533c : JZ 0x0054535e
0054533e : MOV EAX,dword ptr [EDI]
00545340 : SHR EAX,0x1f
00545343 : TEST AL,0x1
00545345 : JZ 0x0054534d
00545347 : MOVZX EDI,byte ptr [EDI + 0xb]
0054534b : JMP 0x00545350
0054534d : MOV EDI,dword ptr [EDI + 0x20]
00545350 : TEST EDI,EDI
00545352 : JNZ 0x0054535e
00545354 : TEST ECX,ECX
00545356 : JL 0x00545359
00545358 : DEC ECX
00545359 : MOV EBP,0x1
0054535e : CMP ECX,EBX
00545360 : JNC 0x00545402
00545366 : TEST ECX,ECX
00545368 : JL 0x00545402
0054536e : LEA EDI,[EDX + ECX*0x4]
00545371 : MOV EDX,dword ptr [EDI]
00545373 : MOV EAX,dword ptr [EDX]
00545375 : SHR EAX,0x1f
00545378 : AND AL,0x1
0054537a : JZ 0x00545382
0054537c : MOVZX EBX,word ptr [EDX + 0x16]
00545380 : JMP 0x00545385
00545382 : MOV EBX,dword ptr [EDX + 0x18]
00545385 : MOV EDX,dword ptr [EDX + 0x10]
00545388 : ADD EDX,EBX
0054538a : MOV dword ptr [ESP + 0x10],EDX
0054538e : FILD dword ptr [ESP + 0x10]
00545392 : FSUB float ptr [ESI + 0x4c]
00545395 : FADD float ptr [ESI + 0x44]
00545398 : FSTP float ptr [ESP + 0x10]
0054539c : FLD float ptr [ESP + 0x10]
005453a0 : CMP ECX,dword ptr [ESI + 0x2c]
005453a3 : JNC 0x005453dd
005453a5 : TEST ECX,ECX
005453a7 : JL 0x005453dd
005453a9 : MOV EAX,dword ptr [EDI]
005453ab : TEST EBP,EBP
005453ad : JBE 0x005453d6
005453af : MOV EDX,dword ptr [EAX]
005453b1 : SHR EDX,0x1f
005453b4 : TEST DL,0x1
005453b7 : JZ 0x005453c2
005453b9 : MOV EAX,dword ptr [EAX + 0x10]
005453bc : MOV dword ptr [ESP + 0x10],EAX
005453c0 : JMP 0x005453c9
005453c2 : MOV EDX,dword ptr [EAX + 0x10]
005453c5 : MOV dword ptr [ESP + 0x10],EDX
005453c9 : FILD dword ptr [ESP + 0x10]
005453cd : FCOMP
005453cf : FNSTSW AX
005453d1 : TEST AH,0x5
005453d4 : JNP 0x005453dd
005453d6 : DEC ECX
005453d7 : SUB EDI,0x4
005453da : INC EBP
005453db : JMP 0x005453a0
005453dd : MOVZX EAX,word ptr [ESI + 0x13c]
005453e4 : FSTP ST0
005453e6 : MOV ECX,dword ptr [ESI + 0x2c]
005453e9 : POP EDI
005453ea : SUB ECX,EBP
005453ec : POP EBX
005453ed : MOV word ptr [ESI + 0x114],AX
005453f4 : POP EBP
005453f5 : MOV dword ptr [ESI + 0x110],ECX
005453fb : MOV EAX,ECX
005453fd : POP ESI
005453fe : ADD ESP,0x8
00545401 : RET
00545402 : MOVZX EAX,word ptr [ESI + 0x13c]
00545409 : POP EDI
0054540a : POP EBX
0054540b : MOV dword ptr [ESI + 0x110],0x0
00545415 : MOV word ptr [ESI + 0x114],AX
0054541c : MOV EAX,dword ptr [ESI + 0x110]
00545422 : POP EBP
00545423 : POP ESI
00545424 : ADD ESP,0x8
00545427 : RET
00545428 : MOV EAX,dword ptr [ESI + 0x110]
0054542e : POP ESI
0054542f : ADD ESP,0x8
00545432 : RET
