PROGRAM  : Maestia.exe
FUNCTION : FUN_009f2a00
ENTRY    : 009f2a00
BODY     : [[009f2a00, 009f2b1a]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_009f2a00(undefined4 param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  int in_ECX;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b24956;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 0x18);
  local_20 = 0;
  local_28 = ".\\Items\\AvaItemManager.cpp";
  local_24 = 0xde;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  piVar1 = *(int **)(in_ECX + 8);
  piVar2 = (int *)*piVar1;
  do {
    if (piVar2 == piVar1) {
      local_8 = 0xffffffff;
      if (local_20 != 0) {
        LeaveCriticalSection(local_2c);
      }
      ExceptionList = local_10;
      return 0;
    }
    iVar3 = piVar2[4];
    if (iVar3 == 0) {
      FUN_008018d0(L"[ERROR] AvaItemTypeIcon Is Null ",uVar4);
    }
    else {
      local_14 = param_1;
      FUN_004437f0(&local_14);
      if ((local_18 != *(int *)(iVar3 + 0xc)) && (iVar3 = *(int *)(local_18 + 0x10), iVar3 != 0)) {
        local_8 = 0xffffffff;
        if (local_20 != 0) {
          LeaveCriticalSection(local_2c);
        }
        ExceptionList = local_10;
        return iVar3;
      }
    }
    FUN_00416210();
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
009f2a00 : PUSH EBP
009f2a01 : MOV EBP,ESP
009f2a03 : PUSH -0x1
009f2a05 : PUSH 0xb24956
009f2a0a : MOV EAX,FS:[0x0]
009f2a10 : PUSH EAX
009f2a11 : SUB ESP,0x1c
009f2a14 : PUSH EBX
009f2a15 : PUSH ESI
009f2a16 : PUSH EDI
009f2a17 : MOV EAX,[0x00d66fa0]
009f2a1c : XOR EAX,EBP
009f2a1e : PUSH EAX
009f2a1f : LEA EAX,[EBP + -0xc]
009f2a22 : MOV FS:[0x0],EAX
009f2a28 : MOV EBX,dword ptr [EBP + 0x8]
009f2a2b : MOV ESI,ECX
009f2a2d : LEA ECX,[EBP + -0x28]
009f2a30 : LEA EAX,[ESI + 0x18]
009f2a33 : XOR EDI,EDI
009f2a35 : PUSH ECX
009f2a36 : MOV dword ptr [EBP + -0x1c],EDI
009f2a39 : MOV dword ptr [EBP + -0x28],EAX
009f2a3c : MOV dword ptr [EBP + -0x24],0xca5268
009f2a43 : MOV dword ptr [EBP + -0x20],0xde
009f2a4a : MOV dword ptr [EBP + -0x18],0x1
009f2a51 : CALL 0x006ef1a0
009f2a56 : MOV dword ptr [EBP + -0x4],EDI
009f2a59 : MOV EDI,dword ptr [ESI + 0x8]
009f2a5c : MOV EAX,dword ptr [EDI]
009f2a5e : MOV dword ptr [EBP + 0x8],EAX
009f2a61 : CMP EAX,EDI
009f2a63 : JZ 0x009f2ab3
009f2a65 : MOV ESI,dword ptr [EAX + 0x10]
009f2a68 : TEST ESI,ESI
009f2a6a : JNZ 0x009f2a81
009f2a6c : MOV ESI,dword ptr [0x00da98e8]
009f2a72 : PUSH 0xca5288
009f2a77 : CALL 0x008018d0
009f2a7c : ADD ESP,0x4
009f2a7f : JMP 0x009f2aa4
009f2a81 : LEA EDX,[EBP + -0x10]
009f2a84 : PUSH EDX
009f2a85 : LEA ECX,[ESI + 0x8]
009f2a88 : LEA EAX,[EBP + -0x14]
009f2a8b : MOV dword ptr [EBP + -0x10],EBX
009f2a8e : CALL 0x004437f0
009f2a93 : MOV ESI,dword ptr [ESI + 0xc]
009f2a96 : MOV EAX,dword ptr [EBP + -0x14]
009f2a99 : CMP EAX,ESI
009f2a9b : JZ 0x009f2aa4
009f2a9d : MOV ESI,dword ptr [EAX + 0x10]
009f2aa0 : TEST ESI,ESI
009f2aa2 : JNZ 0x009f2ae7
009f2aa4 : LEA EDX,[EBP + 0x8]
009f2aa7 : CALL 0x00416210
009f2aac : MOV EAX,dword ptr [EBP + 0x8]
009f2aaf : CMP EAX,EDI
009f2ab1 : JNZ 0x009f2a65
009f2ab3 : MOV dword ptr [EBP + -0x4],0xffffffff
009f2aba : CMP dword ptr [EBP + -0x1c],0x0
009f2abe : JZ 0x009f2ad1
009f2ac0 : MOV ECX,dword ptr [EBP + -0x28]
009f2ac3 : PUSH ECX
009f2ac4 : CALL dword ptr [0x00b8511c]
009f2aca : MOV dword ptr [EBP + -0x1c],0x0
009f2ad1 : XOR EAX,EAX
009f2ad3 : MOV ECX,dword ptr [EBP + -0xc]
009f2ad6 : MOV dword ptr FS:[0x0],ECX
009f2add : POP ECX
009f2ade : POP EDI
009f2adf : POP ESI
009f2ae0 : POP EBX
009f2ae1 : MOV ESP,EBP
009f2ae3 : POP EBP
009f2ae4 : RET 0x4
009f2ae7 : MOV dword ptr [EBP + -0x4],0xffffffff
009f2aee : CMP dword ptr [EBP + -0x1c],0x0
009f2af2 : JZ 0x009f2b05
009f2af4 : MOV EAX,dword ptr [EBP + -0x28]
009f2af7 : PUSH EAX
009f2af8 : CALL dword ptr [0x00b8511c]
009f2afe : MOV dword ptr [EBP + -0x1c],0x0
009f2b05 : MOV EAX,ESI
009f2b07 : MOV ECX,dword ptr [EBP + -0xc]
009f2b0a : MOV dword ptr FS:[0x0],ECX
009f2b11 : POP ECX
009f2b12 : POP EDI
009f2b13 : POP ESI
009f2b14 : POP EBX
009f2b15 : MOV ESP,EBP
009f2b17 : POP EBP
009f2b18 : RET 0x4
