PROGRAM  : Maestia.exe
FUNCTION : FUN_007a4980
ENTRY    : 007a4980
BODY     : [[007a4980, 007a4b24]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x007a49d3) */

undefined4 FUN_007a4980(int param_1,int param_2)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  int *piVar4;
  int *piVar5;
  rsize_t _DstSize;
  ushort *puVar6;
  int iVar7;
  ushort *puVar8;
  int *piVar9;
  uint uVar10;
  int *piVar11;
  int *piVar12;
  
  piVar12 = *(int **)(param_1 + 0x10bc);
  if (piVar12 != *(int **)(param_1 + 0x10c0)) {
    uVar2 = *(uint *)(param_2 + 0x14);
    do {
      iVar7 = *piVar12;
      uVar3 = *(uint *)(iVar7 + 0x20);
      if (*(uint *)(iVar7 + 0x24) < 8) {
        puVar6 = (ushort *)(iVar7 + 0x10);
      }
      else {
        puVar6 = *(ushort **)(iVar7 + 0x10);
      }
      uVar10 = uVar2;
      if (uVar3 <= uVar2) {
        uVar10 = uVar3;
      }
      if (*(uint *)(param_2 + 0x18) < 8) {
        puVar8 = (ushort *)(param_2 + 4);
      }
      else {
        puVar8 = *(ushort **)(param_2 + 4);
      }
      for (; uVar10 != 0; uVar10 = uVar10 - 1) {
        if (*puVar8 != *puVar6) {
          uVar10 = (-(uint)(*puVar8 < *puVar6) & 0xfffffffe) + 1;
          if (uVar10 != 0) goto LAB_007a4a14;
          break;
        }
        puVar8 = puVar8 + 1;
        puVar6 = puVar6 + 1;
      }
      if (uVar3 <= uVar2) {
        uVar10 = (uint)(uVar2 != uVar3);
LAB_007a4a14:
        if (uVar10 == 0) {
          piVar4 = (int *)*piVar12;
          iVar7 = *(int *)(param_1 + 0x10c0) - (int)(piVar12 + 1) >> 2;
          if (0 < iVar7) {
            _DstSize = iVar7 * 4;
            _memmove_s(piVar12,_DstSize,piVar12 + 1,_DstSize);
          }
          *(int *)(param_1 + 0x10c0) = *(int *)(param_1 + 0x10c0) + -4;
          if (*(int **)(param_1 + 0x10d8) == piVar4) {
            *(undefined4 *)(param_1 + 0x10d8) = 0;
          }
          (**(code **)(*piVar4 + 0x74))();
          piVar12 = *(int **)(param_1 + 0x10cc);
          piVar11 = (int *)*piVar12;
          if (piVar11 == piVar12) {
            return 0;
          }
          do {
            piVar5 = *(int **)(piVar11[4] + 8);
            piVar9 = (int *)*piVar5;
            if (piVar9 != piVar5) {
              do {
                if ((int *)piVar9[2] == piVar4) break;
                piVar9 = (int *)*piVar9;
              } while (piVar9 != piVar5);
              if (piVar9 != piVar5) {
                *(int *)piVar9[1] = *piVar9;
                *(int *)(*piVar9 + 4) = piVar9[1];
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
            }
            if (*(char *)((int)piVar11 + 0x15) == '\0') {
              piVar5 = (int *)piVar11[2];
              if (*(char *)((int)piVar5 + 0x15) == '\0') {
                cVar1 = *(char *)(*piVar5 + 0x15);
                piVar11 = piVar5;
                piVar5 = (int *)*piVar5;
                while (cVar1 == '\0') {
                  cVar1 = *(char *)(*piVar5 + 0x15);
                  piVar11 = piVar5;
                  piVar5 = (int *)*piVar5;
                }
              }
              else {
                cVar1 = *(char *)(piVar11[1] + 0x15);
                piVar9 = (int *)piVar11[1];
                piVar5 = piVar11;
                while ((piVar11 = piVar9, cVar1 == '\0' && (piVar5 == (int *)piVar11[2]))) {
                  cVar1 = *(char *)(piVar11[1] + 0x15);
                  piVar9 = (int *)piVar11[1];
                  piVar5 = piVar11;
                }
              }
            }
            if (piVar11 == piVar12) {
              return 0;
            }
          } while( true );
        }
      }
      piVar12 = piVar12 + 1;
    } while (piVar12 != *(int **)(param_1 + 0x10c0));
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007a4980 : PUSH EBP
007a4981 : MOV EBP,ESP
007a4983 : SUB ESP,0x10
007a4986 : MOV EAX,dword ptr [EBP + 0x8]
007a4989 : PUSH EBX
007a498a : MOV EBX,dword ptr [EAX + 0x10bc]
007a4990 : PUSH ESI
007a4991 : PUSH EDI
007a4992 : MOV dword ptr [EBP + -0x4],EBX
007a4995 : CMP EBX,dword ptr [EAX + 0x10c0]
007a499b : JZ 0x007a4a29
007a49a1 : MOV EAX,dword ptr [EBP + 0xc]
007a49a4 : MOV ECX,dword ptr [EAX + 0x14]
007a49a7 : MOV EDX,dword ptr [EAX + 0x18]
007a49aa : MOV dword ptr [EBP + -0xc],ECX
007a49ad : MOV dword ptr [EBP + -0x8],ECX
007a49b0 : MOV dword ptr [EBP + -0x10],EDX
007a49b3 : JMP 0x007a49b8
007a49b5 : MOV ECX,dword ptr [EBP + -0x8]
007a49b8 : MOV EAX,dword ptr [EBX]
007a49ba : MOV EDI,dword ptr [EAX + 0x20]
007a49bd : ADD EAX,0xc
007a49c0 : CMP dword ptr [EAX + 0x18],0x8
007a49c4 : JC 0x007a49cb
007a49c6 : MOV EAX,dword ptr [EAX + 0x4]
007a49c9 : JMP 0x007a49ce
007a49cb : ADD EAX,0x4
007a49ce : MOV ESI,dword ptr [EBP + -0xc]
007a49d1 : CMP ECX,ESI
007a49d3 : CMOVC ESI,ECX
007a49d6 : MOV EDX,ESI
007a49d8 : CMP ESI,EDI
007a49da : JC 0x007a49de
007a49dc : MOV EDX,EDI
007a49de : CMP dword ptr [EBP + -0x10],0x8
007a49e2 : MOV ECX,dword ptr [EBP + 0xc]
007a49e5 : JC 0x007a49ec
007a49e7 : MOV ECX,dword ptr [ECX + 0x4]
007a49ea : JMP 0x007a49ef
007a49ec : ADD ECX,0x4
007a49ef : TEST EDX,EDX
007a49f1 : JBE 0x007a4a09
007a49f3 : MOV BX,word ptr [ECX]
007a49f6 : CMP BX,word ptr [EAX]
007a49f9 : JNZ 0x007a4a34
007a49fb : ADD ECX,0x2
007a49fe : ADD EAX,0x2
007a4a01 : SUB EDX,0x1
007a4a04 : JNZ 0x007a49f3
007a4a06 : MOV EBX,dword ptr [EBP + -0x4]
007a4a09 : CMP ESI,EDI
007a4a0b : JC 0x007a4a18
007a4a0d : XOR EAX,EAX
007a4a0f : CMP ESI,EDI
007a4a11 : SETNZ AL
007a4a14 : TEST EAX,EAX
007a4a16 : JZ 0x007a4a49
007a4a18 : MOV EAX,dword ptr [EBP + 0x8]
007a4a1b : ADD EBX,0x4
007a4a1e : MOV dword ptr [EBP + -0x4],EBX
007a4a21 : CMP EBX,dword ptr [EAX + 0x10c0]
007a4a27 : JNZ 0x007a49b5
007a4a29 : POP EDI
007a4a2a : POP ESI
007a4a2b : XOR EAX,EAX
007a4a2d : POP EBX
007a4a2e : MOV ESP,EBP
007a4a30 : POP EBP
007a4a31 : RET 0x8
007a4a34 : MOV DX,BX
007a4a37 : CMP DX,word ptr [EAX]
007a4a3a : SBB EAX,EAX
007a4a3c : AND EAX,0xfffffffe
007a4a3f : ADD EAX,0x1
007a4a42 : JZ 0x007a4a06
007a4a44 : MOV EBX,dword ptr [EBP + -0x4]
007a4a47 : JMP 0x007a4a14
007a4a49 : MOV ESI,dword ptr [EBP + 0x8]
007a4a4c : MOV EAX,dword ptr [ESI + 0x10c0]
007a4a52 : MOV EDI,dword ptr [EBX]
007a4a54 : LEA ECX,[EBX + 0x4]
007a4a57 : SUB EAX,ECX
007a4a59 : SAR EAX,0x2
007a4a5c : TEST EAX,EAX
007a4a5e : JLE 0x007a4a70
007a4a60 : ADD EAX,EAX
007a4a62 : ADD EAX,EAX
007a4a64 : PUSH EAX
007a4a65 : PUSH ECX
007a4a66 : PUSH EAX
007a4a67 : PUSH EBX
007a4a68 : CALL 0x00634101
007a4a6d : ADD ESP,0x10
007a4a70 : ADD dword ptr [ESI + 0x10c0],-0x4
007a4a77 : CMP dword ptr [ESI + 0x10d8],EDI
007a4a7d : JNZ 0x007a4a89
007a4a7f : MOV dword ptr [ESI + 0x10d8],0x0
007a4a89 : MOV EDX,dword ptr [EDI]
007a4a8b : MOV EAX,dword ptr [EDX + 0x74]
007a4a8e : MOV ECX,EDI
007a4a90 : CALL EAX
007a4a92 : MOV EBX,dword ptr [ESI + 0x10cc]
007a4a98 : MOV EDX,dword ptr [EBX]
007a4a9a : CMP EDX,EBX
007a4a9c : JZ 0x007a4a29
007a4a9e : MOV EDI,EDI
007a4aa0 : MOV ESI,dword ptr [EDX + 0x10]
007a4aa3 : MOV EAX,dword ptr [ESI + 0x8]
007a4aa6 : MOV ECX,dword ptr [EAX]
007a4aa8 : CMP ECX,EAX
007a4aaa : JZ 0x007a4abf
007a4aac : LEA ESP,[ESP]
007a4ab0 : CMP dword ptr [ECX + 0x8],EDI
007a4ab3 : JZ 0x007a4abb
007a4ab5 : MOV ECX,dword ptr [ECX]
007a4ab7 : CMP ECX,EAX
007a4ab9 : JNZ 0x007a4ab0
007a4abb : CMP ECX,EAX
007a4abd : JNZ 0x007a4b11
007a4abf : CMP byte ptr [EDX + 0x15],0x0
007a4ac3 : JNZ 0x007a4b02
007a4ac5 : MOV EAX,dword ptr [EDX + 0x8]
007a4ac8 : CMP byte ptr [EAX + 0x15],0x0
007a4acc : JNZ 0x007a4ae4
007a4ace : MOV EDX,EAX
007a4ad0 : MOV EAX,dword ptr [EDX]
007a4ad2 : CMP byte ptr [EAX + 0x15],0x0
007a4ad6 : JNZ 0x007a4b02
007a4ad8 : MOV EDX,EAX
007a4ada : MOV EAX,dword ptr [EDX]
007a4adc : CMP byte ptr [EAX + 0x15],0x0
007a4ae0 : JZ 0x007a4ad8
007a4ae2 : JMP 0x007a4b02
007a4ae4 : MOV EAX,dword ptr [EDX + 0x4]
007a4ae7 : CMP byte ptr [EAX + 0x15],0x0
007a4aeb : JNZ 0x007a4b00
007a4aed : LEA ECX,[ECX]
007a4af0 : CMP EDX,dword ptr [EAX + 0x8]
007a4af3 : JNZ 0x007a4b00
007a4af5 : MOV EDX,EAX
007a4af7 : MOV EAX,dword ptr [EAX + 0x4]
007a4afa : CMP byte ptr [EAX + 0x15],0x0
007a4afe : JZ 0x007a4af0
007a4b00 : MOV EDX,EAX
007a4b02 : CMP EDX,EBX
007a4b04 : JNZ 0x007a4aa0
007a4b06 : POP EDI
007a4b07 : POP ESI
007a4b08 : XOR EAX,EAX
007a4b0a : POP EBX
007a4b0b : MOV ESP,EBP
007a4b0d : POP EBP
007a4b0e : RET 0x8
007a4b11 : MOV EDX,dword ptr [ECX + 0x4]
007a4b14 : MOV EAX,dword ptr [ECX]
007a4b16 : MOV dword ptr [EDX],EAX
007a4b18 : MOV EDX,dword ptr [ECX]
007a4b1a : MOV EAX,dword ptr [ECX + 0x4]
007a4b1d : MOV dword ptr [EDX + 0x4],EAX
007a4b20 : CALL 0x006f04e0
