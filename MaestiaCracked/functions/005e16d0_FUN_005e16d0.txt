PROGRAM  : Maestia.exe
FUNCTION : FUN_005e16d0
ENTRY    : 005e16d0
BODY     : [[005e16d0, 005e178a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e16d0(undefined4 param_1,uint param_2,GRefCountImpl *param_3)

{
  undefined4 uVar1;
  LONG LVar2;
  undefined4 *in_ECX;
  uint *puVar3;
  uint local_8;
  uint local_4;
  
  *in_ECX = &PTR_FUN_00cd3f2c;
  in_ECX[1] = 1;
  *in_ECX = &PTR_FUN_00b93b38;
  in_ECX[2] = 0;
  FUN_0051b6e0();
  puVar3 = &local_8;
  FUN_0051c480(param_1);
  uVar1 = FUN_0051c8c0(puVar3);
  FUN_0051bc20(uVar1);
  LVar2 = InterlockedExchangeAdd((LONG *)((local_8 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_8 & 0xfffffffc);
  }
  LVar2 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_4 & 0xfffffffc);
  }
  in_ECX[4] = param_2 & 3;
  if (param_3 != (GRefCountImpl *)0x0) {
    GRefCountImpl::AddRef(param_3);
  }
  if ((GRefCountImpl *)in_ECX[2] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[2]);
  }
  in_ECX[2] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
005e16d0 : SUB ESP,0x8
005e16d3 : PUSH EBX
005e16d4 : PUSH ESI
005e16d5 : MOV ESI,ECX
005e16d7 : PUSH EDI
005e16d8 : MOV dword ptr [ESI],0xcd3f2c
005e16de : LEA EDI,[ESI + 0xc]
005e16e1 : MOV dword ptr [ESI + 0x4],0x1
005e16e8 : MOV dword ptr [ESI],0xb93b38
005e16ee : MOV ECX,EDI
005e16f0 : MOV dword ptr [ESI + 0x8],0x0
005e16f7 : CALL 0x0051b6e0
005e16fc : MOV ECX,dword ptr [ESP + 0x18]
005e1700 : LEA EAX,[ESP + 0xc]
005e1704 : PUSH EAX
005e1705 : PUSH ECX
005e1706 : LEA ECX,[ESP + 0x18]
005e170a : CALL 0x0051c480
005e170f : MOV ECX,EAX
005e1711 : CALL 0x0051c8c0
005e1716 : PUSH EAX
005e1717 : MOV ECX,EDI
005e1719 : CALL 0x0051bc20
005e171e : MOV EDI,dword ptr [ESP + 0xc]
005e1722 : MOV EBX,dword ptr [0x00b851cc]
005e1728 : AND EDI,0xfffffffc
005e172b : PUSH -0x1
005e172d : LEA EDX,[EDI + 0x4]
005e1730 : PUSH EDX
005e1731 : CALL EBX
005e1733 : SUB EAX,0x1
005e1736 : JNZ 0x005e173e
005e1738 : PUSH EDI
005e1739 : CALL 0x00515cf0
005e173e : MOV EDI,dword ptr [ESP + 0x10]
005e1742 : AND EDI,0xfffffffc
005e1745 : PUSH -0x1
005e1747 : LEA EAX,[EDI + 0x4]
005e174a : PUSH EAX
005e174b : CALL EBX
005e174d : SUB EAX,0x1
005e1750 : JNZ 0x005e1758
005e1752 : PUSH EDI
005e1753 : CALL 0x00515cf0
005e1758 : MOV ECX,dword ptr [ESP + 0x1c]
005e175c : MOV EDI,dword ptr [ESP + 0x20]
005e1760 : AND ECX,0x3
005e1763 : MOV dword ptr [ESI + 0x10],ECX
005e1766 : TEST EDI,EDI
005e1768 : JZ 0x005e1771
005e176a : MOV ECX,EDI
005e176c : CALL 0x00523dd0
005e1771 : MOV ECX,dword ptr [ESI + 0x8]
005e1774 : TEST ECX,ECX
005e1776 : JZ 0x005e177d
005e1778 : CALL 0x004ff7e0
005e177d : MOV dword ptr [ESI + 0x8],EDI
005e1780 : POP EDI
005e1781 : MOV EAX,ESI
005e1783 : POP ESI
005e1784 : POP EBX
005e1785 : ADD ESP,0x8
005e1788 : RET 0xc
