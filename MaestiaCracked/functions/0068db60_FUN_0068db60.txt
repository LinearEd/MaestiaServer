PROGRAM  : Maestia.exe
FUNCTION : FUN_0068db60
ENTRY    : 0068db60
BODY     : [[0068db60, 0068dd38]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0068db60(int param_1)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  undefined1 *_Dst;
  int iVar5;
  char *pcVar6;
  int local_24;
  char *local_20 [8];
  
  local_24 = 0;
  local_20[0] = (char *)0x0;
  local_20[1] = (undefined1 *)0x0;
  local_20[2] = (char *)0x0;
  local_20[3] = (char *)0x0;
  *(undefined4 *)(param_1 + 0xc) = 0;
  iVar3 = FUN_0068da80();
  if ((((iVar3 != 0) && (*(int *)(iVar3 + 4) == 1)) && (*(char **)(iVar3 + 0xc) != (char *)0x0)) &&
     (((cVar2 = **(char **)(iVar3 + 0xc), cVar2 == 'O' || (cVar2 == 'o')) ||
      ((cVar2 == 'I' || (cVar2 == 'i')))))) {
    *(undefined4 *)(param_1 + 0xc) = 1;
    if ((**(char **)(iVar3 + 0xc) == 'O') ||
       (local_20[2] = "Italic", **(char **)(iVar3 + 0xc) == 'o')) {
      local_20[2] = "Oblique";
    }
  }
  iVar3 = FUN_0068da80();
  if ((((iVar3 != 0) && (*(int *)(iVar3 + 4) == 1)) && (*(char **)(iVar3 + 0xc) != (char *)0x0)) &&
     ((cVar2 = **(char **)(iVar3 + 0xc), cVar2 == 'B' || (cVar2 == 'b')))) {
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 2;
    local_20[1] = "Bold";
  }
  iVar3 = FUN_0068da80();
  if (((iVar3 != 0) && (*(int *)(iVar3 + 4) == 1)) &&
     ((pcVar6 = *(char **)(iVar3 + 0xc), pcVar6 != (char *)0x0 &&
      (((cVar2 = *pcVar6, cVar2 != '\0' && (cVar2 != 'N')) && (cVar2 != 'n')))))) {
    local_20[3] = pcVar6;
  }
  iVar3 = FUN_0068da80();
  if (((iVar3 != 0) && (*(int *)(iVar3 + 4) == 1)) &&
     (((pcVar6 = *(char **)(iVar3 + 0xc), pcVar6 != (char *)0x0 &&
       ((cVar2 = *pcVar6, cVar2 != '\0' && (cVar2 != 'N')))) && (cVar2 != 'n')))) {
    local_20[0] = pcVar6;
  }
  pcVar6 = (char *)0x0;
  iVar3 = 0;
  do {
    pcVar4 = *(char **)((int)local_20 + iVar3);
    *(undefined4 *)((int)local_20 + iVar3 + 0x10) = 0;
    if (pcVar4 != (char *)0x0) {
      pcVar1 = pcVar4 + 1;
      do {
        cVar2 = *pcVar4;
        pcVar4 = pcVar4 + 1;
      } while (cVar2 != '\0');
      *(int *)((int)local_20 + iVar3 + 0x10) = (int)pcVar4 - (int)pcVar1;
      pcVar6 = pcVar6 + ((int)pcVar4 - (int)pcVar1) + 1;
    }
    iVar3 = iVar3 + 4;
  } while (iVar3 < 0x10);
  if (pcVar6 == (char *)0x0) {
    local_20[0] = "Regular";
    pcVar4 = "Regular";
    do {
      pcVar6 = pcVar4;
      pcVar4 = pcVar6 + 1;
    } while (*pcVar6 != '\0');
    local_20[4] = pcVar6 + -0xbd91c4;
    pcVar6 = pcVar6 + -0xbd91c3;
  }
  _Dst = (undefined1 *)FUN_00688c00(*(undefined4 *)(param_1 + 100),pcVar6,&local_24);
  *(undefined1 **)(param_1 + 0x18) = _Dst;
  if (local_24 == 0) {
    iVar3 = 0;
    do {
      pcVar6 = local_20[iVar3];
      pcVar4 = local_20[iVar3 + 4];
      if (pcVar6 != (char *)0x0) {
        if (_Dst != *(undefined1 **)(param_1 + 0x18)) {
          *_Dst = 0x20;
          _Dst = _Dst + 1;
        }
        _memcpy(_Dst,pcVar6,(size_t)pcVar4);
        if (((iVar3 == 0) || (iVar3 == 3)) && (iVar5 = 0, 0 < (int)pcVar4)) {
          do {
            if (_Dst[iVar5] == ' ') {
              _Dst[iVar5] = 0x2d;
            }
            iVar5 = iVar5 + 1;
          } while (iVar5 < (int)pcVar4);
        }
        _Dst = _Dst + (int)pcVar4;
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < 4);
    *_Dst = 0;
  }
  return local_24;
}



============================================================
DISASSEMBLY
============================================================
0068db60 : SUB ESP,0x24
0068db63 : PUSH EBX
0068db64 : PUSH EBP
0068db65 : MOV EBP,dword ptr [ESP + 0x30]
0068db69 : XOR EBX,EBX
0068db6b : PUSH ESI
0068db6c : MOV ESI,dword ptr [EBP + 0x8c]
0068db72 : PUSH EDI
0068db73 : MOV EAX,0xbd86a8
0068db78 : MOV dword ptr [ESP + 0x10],EBX
0068db7c : MOV dword ptr [ESP + 0x14],EBX
0068db80 : MOV dword ptr [ESP + 0x18],EBX
0068db84 : MOV dword ptr [ESP + 0x1c],EBX
0068db88 : MOV dword ptr [ESP + 0x20],EBX
0068db8c : MOV dword ptr [EBP + 0xc],EBX
0068db8f : CALL 0x0068da80
0068db94 : LEA EDI,[EBX + 0x1]
0068db97 : CMP EAX,EBX
0068db99 : JZ 0x0068dbdd
0068db9b : CMP dword ptr [EAX + 0x4],EDI
0068db9e : JNZ 0x0068dbdd
0068dba0 : MOV ECX,dword ptr [EAX + 0xc]
0068dba3 : CMP ECX,EBX
0068dba5 : JZ 0x0068dbdd
0068dba7 : MOV CL,byte ptr [ECX]
0068dba9 : CMP CL,0x4f
0068dbac : JZ 0x0068dbbd
0068dbae : CMP CL,0x6f
0068dbb1 : JZ 0x0068dbbd
0068dbb3 : CMP CL,0x49
0068dbb6 : JZ 0x0068dbbd
0068dbb8 : CMP CL,0x69
0068dbbb : JNZ 0x0068dbdd
0068dbbd : MOV dword ptr [EBP + 0xc],EDI
0068dbc0 : MOV EAX,dword ptr [EAX + 0xc]
0068dbc3 : MOV AL,byte ptr [EAX]
0068dbc5 : CMP AL,0x4f
0068dbc7 : JZ 0x0068dbd5
0068dbc9 : MOV dword ptr [ESP + 0x1c],0xbd91dc
0068dbd1 : CMP AL,0x6f
0068dbd3 : JNZ 0x0068dbdd
0068dbd5 : MOV dword ptr [ESP + 0x1c],0xbd91d4
0068dbdd : MOV EAX,0xbd85d0
0068dbe2 : CALL 0x0068da80
0068dbe7 : CMP EAX,EBX
0068dbe9 : JZ 0x0068dc0d
0068dbeb : CMP dword ptr [EAX + 0x4],EDI
0068dbee : JNZ 0x0068dc0d
0068dbf0 : MOV EAX,dword ptr [EAX + 0xc]
0068dbf3 : CMP EAX,EBX
0068dbf5 : JZ 0x0068dc0d
0068dbf7 : MOV AL,byte ptr [EAX]
0068dbf9 : CMP AL,0x42
0068dbfb : JZ 0x0068dc01
0068dbfd : CMP AL,0x62
0068dbff : JNZ 0x0068dc0d
0068dc01 : OR dword ptr [EBP + 0xc],0x2
0068dc05 : MOV dword ptr [ESP + 0x18],0xbd91cc
0068dc0d : MOV EAX,0xbd86b0
0068dc12 : CALL 0x0068da80
0068dc17 : CMP EAX,EBX
0068dc19 : JZ 0x0068dc3b
0068dc1b : CMP dword ptr [EAX + 0x4],EDI
0068dc1e : JNZ 0x0068dc3b
0068dc20 : MOV EAX,dword ptr [EAX + 0xc]
0068dc23 : CMP EAX,EBX
0068dc25 : JZ 0x0068dc3b
0068dc27 : MOV CL,byte ptr [EAX]
0068dc29 : CMP CL,BL
0068dc2b : JZ 0x0068dc3b
0068dc2d : CMP CL,0x4e
0068dc30 : JZ 0x0068dc3b
0068dc32 : CMP CL,0x6e
0068dc35 : JZ 0x0068dc3b
0068dc37 : MOV dword ptr [ESP + 0x20],EAX
0068dc3b : MOV EAX,0xbd8ab4
0068dc40 : CALL 0x0068da80
0068dc45 : CMP EAX,EBX
0068dc47 : JZ 0x0068dc69
0068dc49 : CMP dword ptr [EAX + 0x4],EDI
0068dc4c : JNZ 0x0068dc69
0068dc4e : MOV EAX,dword ptr [EAX + 0xc]
0068dc51 : CMP EAX,EBX
0068dc53 : JZ 0x0068dc69
0068dc55 : MOV CL,byte ptr [EAX]
0068dc57 : CMP CL,BL
0068dc59 : JZ 0x0068dc69
0068dc5b : CMP CL,0x4e
0068dc5e : JZ 0x0068dc69
0068dc60 : CMP CL,0x6e
0068dc63 : JZ 0x0068dc69
0068dc65 : MOV dword ptr [ESP + 0x14],EAX
0068dc69 : XOR EDX,EDX
0068dc6b : XOR ESI,ESI
0068dc6d : LEA ECX,[ECX]
0068dc70 : MOV EAX,dword ptr [ESP + ESI*0x1 + 0x14]
0068dc74 : MOV dword ptr [ESP + ESI*0x1 + 0x24],EBX
0068dc78 : CMP EAX,EBX
0068dc7a : JZ 0x0068dc91
0068dc7c : LEA EDI,[EAX + 0x1]
0068dc7f : NOP
0068dc80 : MOV CL,byte ptr [EAX]
0068dc82 : INC EAX
0068dc83 : CMP CL,BL
0068dc85 : JNZ 0x0068dc80
0068dc87 : SUB EAX,EDI
0068dc89 : MOV dword ptr [ESP + ESI*0x1 + 0x24],EAX
0068dc8d : LEA EDX,[EDX + EAX*0x1 + 0x1]
0068dc91 : ADD ESI,0x4
0068dc94 : CMP ESI,0x10
0068dc97 : JL 0x0068dc70
0068dc99 : CMP EDX,EBX
0068dc9b : JNZ 0x0068dcc0
0068dc9d : MOV EAX,0xbd91c4
0068dca2 : MOV dword ptr [ESP + 0x14],EAX
0068dca6 : LEA EDX,[EAX + 0x1]
0068dca9 : LEA ESP,[ESP]
0068dcb0 : MOV CL,byte ptr [EAX]
0068dcb2 : INC EAX
0068dcb3 : CMP CL,BL
0068dcb5 : JNZ 0x0068dcb0
0068dcb7 : SUB EAX,EDX
0068dcb9 : MOV dword ptr [ESP + 0x24],EAX
0068dcbd : LEA EDX,[EAX + 0x1]
0068dcc0 : MOV EAX,dword ptr [EBP + 0x64]
0068dcc3 : LEA ECX,[ESP + 0x10]
0068dcc7 : PUSH ECX
0068dcc8 : PUSH EDX
0068dcc9 : PUSH EAX
0068dcca : CALL 0x00688c00
0068dccf : MOV ESI,EAX
0068dcd1 : MOV EAX,dword ptr [ESP + 0x1c]
0068dcd5 : ADD ESP,0xc
0068dcd8 : MOV dword ptr [EBP + 0x18],ESI
0068dcdb : CMP EAX,EBX
0068dcdd : JNZ 0x0068dd31
0068dcdf : XOR EBP,EBP
0068dce1 : MOV EAX,dword ptr [ESP + EBP*0x4 + 0x14]
0068dce5 : MOV EDI,dword ptr [ESP + EBP*0x4 + 0x24]
0068dce9 : CMP EAX,EBX
0068dceb : JZ 0x0068dd25
0068dced : MOV EDX,dword ptr [ESP + 0x38]
0068dcf1 : CMP ESI,dword ptr [EDX + 0x18]
0068dcf4 : JZ 0x0068dcfa
0068dcf6 : MOV byte ptr [ESI],0x20
0068dcf9 : INC ESI
0068dcfa : PUSH EDI
0068dcfb : PUSH EAX
0068dcfc : PUSH ESI
0068dcfd : CALL 0x0063ae40
0068dd02 : ADD ESP,0xc
0068dd05 : CMP EBP,EBX
0068dd07 : JZ 0x0068dd0e
0068dd09 : CMP EBP,0x3
0068dd0c : JNZ 0x0068dd23
0068dd0e : XOR EAX,EAX
0068dd10 : CMP EDI,EBX
0068dd12 : JLE 0x0068dd23
0068dd14 : CMP byte ptr [EAX + ESI*0x1],0x20
0068dd18 : JNZ 0x0068dd1e
0068dd1a : MOV byte ptr [EAX + ESI*0x1],0x2d
0068dd1e : INC EAX
0068dd1f : CMP EAX,EDI
0068dd21 : JL 0x0068dd14
0068dd23 : ADD ESI,EDI
0068dd25 : INC EBP
0068dd26 : CMP EBP,0x4
0068dd29 : JL 0x0068dce1
0068dd2b : MOV byte ptr [ESI],BL
0068dd2d : MOV EAX,dword ptr [ESP + 0x10]
0068dd31 : POP EDI
0068dd32 : POP ESI
0068dd33 : POP EBP
0068dd34 : POP EBX
0068dd35 : ADD ESP,0x24
0068dd38 : RET
