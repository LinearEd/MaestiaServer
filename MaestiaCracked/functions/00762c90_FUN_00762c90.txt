PROGRAM  : Maestia.exe
FUNCTION : FUN_00762c90
ENTRY    : 00762c90
BODY     : [[00762c90, 00762e74]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00762c90(int param_1,undefined4 param_2,uint *param_3,int param_4)

{
  uint uVar1;
  uint uVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  int iVar7;
  undefined4 uVar8;
  uint uVar9;
  undefined4 unaff_EDI;
  uint uStack_154;
  undefined1 local_138 [52];
  byte bStack_104;
  
  if (param_4 == 0) {
    return 0x80004003;
  }
  if (*(int *)(param_1 + 0x18) != 0) {
    (**(code **)(**(int **)(param_1 + 0x14) + 0x1c))(*(int **)(param_1 + 0x14),local_138);
    if ((bStack_104 & 2) != 0) {
      uVar1 = param_3[1];
      if (1 < uVar1) {
        do {
          uStack_154 = uStack_154 * 2;
        } while (uStack_154 < uVar1);
      }
      uVar9 = 1;
      uVar2 = param_3[2];
      if (1 < uVar2) {
        do {
          uVar9 = uVar9 * 2;
        } while (uVar9 < uVar2);
      }
      fVar3 = (float)(int)uVar1;
      if ((int)uVar1 < 0) {
        fVar3 = fVar3 + 4.2949673e+09;
      }
      fVar4 = (float)(int)uStack_154;
      if ((int)uStack_154 < 0) {
        fVar4 = fVar4 + 4.2949673e+09;
      }
      fVar5 = (float)(int)uVar2;
      if ((int)uVar2 < 0) {
        fVar5 = fVar5 + 4.2949673e+09;
      }
      fVar6 = (float)(int)uVar9;
      if ((int)uVar9 < 0) {
        fVar6 = fVar6 + 4.2949673e+09;
      }
      *(undefined4 *)(param_1 + 0x48) = 0;
      *(undefined4 *)(param_1 + 0x4c) = 0;
      *(undefined4 *)(param_1 + 0x60) = 0;
      *(undefined4 *)(param_1 + 0x7c) = 0;
      *(float *)(param_1 + 100) = fVar5 / fVar6;
      *(float *)(param_1 + 0x78) = fVar3 / fVar4;
      *(float *)(param_1 + 0x90) = fVar3 / fVar4;
      *(float *)(param_1 + 0x94) = fVar5 / fVar6;
      param_3[1] = uStack_154;
      param_3[2] = uVar9;
    }
    *param_3 = *param_3 | 4;
    FUN_00762460();
    FUN_004bd300();
    if (*(int *)(param_1 + 0x24) - *(int *)(param_1 + 0x20) >> 2 != 0) {
      iVar7 = (**(code **)(**(int **)(param_1 + 0x18) + 0x18))
                        (*(int **)(param_1 + 0x18),param_3,param_4,*(int *)(param_1 + 0x20));
      if ((iVar7 < 0) && ((*param_3 & 1) == 0)) {
        FUN_00762460();
        if (0x30303030 < (int)param_3[3]) {
          (**(code **)(**(int **)(param_1 + 0x14) + 0x20))
                    (*(int **)(param_1 + 0x14),0,&stack0xfffffea0);
          *(undefined4 *)(param_1 + 0x30) = 0;
          (**(code **)(**(int **)(param_1 + 0x14) + 0x5c))
                    (*(int **)(param_1 + 0x14),param_3[1],param_3[2],1,1,unaff_EDI,0,
                     (undefined4 *)(param_1 + 0x30),0);
        }
        *param_3 = *param_3 & 0xfffffffb | 8;
        if (*(int *)(param_1 + 0x24) - *(int *)(param_1 + 0x20) >> 2 == 0) {
                    /* WARNING: Subroutine does not return */
          FUN_0045cd70();
        }
        (**(code **)(**(int **)(param_1 + 0x18) + 0x18))
                  (*(int **)(param_1 + 0x18),param_3,param_4,*(int *)(param_1 + 0x20));
      }
      uVar8 = FUN_0072d7f0();
      return uVar8;
    }
                    /* WARNING: Subroutine does not return */
    FUN_0045cd70();
  }
  return 0x80004005;
}



============================================================
DISASSEMBLY
============================================================
00762c90 : PUSH EBP
00762c91 : MOV EBP,ESP
00762c93 : AND ESP,0xfffffff8
00762c96 : SUB ESP,0x14c
00762c9c : CMP dword ptr [EBP + 0x14],0x0
00762ca0 : PUSH EBX
00762ca1 : PUSH ESI
00762ca2 : MOV EBX,0x1
00762ca7 : PUSH EDI
00762ca8 : MOV dword ptr [ESP + 0x14],EBX
00762cac : JNZ 0x00762cbc
00762cae : MOV EAX,0x80004003
00762cb3 : POP EDI
00762cb4 : POP ESI
00762cb5 : POP EBX
00762cb6 : MOV ESP,EBP
00762cb8 : POP EBP
00762cb9 : RET 0x10
00762cbc : MOV ESI,dword ptr [EBP + 0x8]
00762cbf : CMP dword ptr [ESI + 0x18],0x0
00762cc3 : JNZ 0x00762cd3
00762cc5 : MOV EAX,0x80004005
00762cca : POP EDI
00762ccb : POP ESI
00762ccc : POP EBX
00762ccd : MOV ESP,EBP
00762ccf : POP EBP
00762cd0 : RET 0x10
00762cd3 : MOV EAX,dword ptr [ESI + 0x14]
00762cd6 : MOV ECX,dword ptr [EAX]
00762cd8 : LEA EDX,[ESP + 0x28]
00762cdc : PUSH EDX
00762cdd : PUSH EAX
00762cde : MOV EAX,dword ptr [ECX + 0x1c]
00762ce1 : CALL EAX
00762ce3 : TEST byte ptr [ESP + 0x64],0x2
00762ce8 : MOV EDI,dword ptr [EBP + 0x10]
00762ceb : JZ 0x00762da3
00762cf1 : MOV EDX,dword ptr [EDI + 0x4]
00762cf4 : CMP EDX,EBX
00762cf6 : JBE 0x00762d0e
00762cf8 : MOV ECX,EDX
00762cfa : LEA EBX,[EBX]
00762d00 : MOV EAX,dword ptr [ESP + 0x14]
00762d04 : ADD EAX,EAX
00762d06 : MOV dword ptr [ESP + 0x14],EAX
00762d0a : CMP EAX,ECX
00762d0c : JC 0x00762d00
00762d0e : MOV ECX,dword ptr [EDI + 0x8]
00762d11 : CMP ECX,0x1
00762d14 : JBE 0x00762d1e
00762d16 : MOV EAX,ECX
00762d18 : ADD EBX,EBX
00762d1a : CMP EBX,EAX
00762d1c : JC 0x00762d18
00762d1e : MOV dword ptr [ESP + 0x10],EDX
00762d22 : FILD dword ptr [ESP + 0x10]
00762d26 : TEST EDX,EDX
00762d28 : JGE 0x00762d30
00762d2a : FADD float ptr [0x00cdf0e0]
00762d30 : MOV EAX,dword ptr [ESP + 0x14]
00762d34 : MOV EDX,EAX
00762d36 : MOV dword ptr [ESP + 0x10],EDX
00762d3a : FILD dword ptr [ESP + 0x10]
00762d3e : TEST EDX,EDX
00762d40 : JGE 0x00762d48
00762d42 : FADD float ptr [0x00cdf0e0]
00762d48 : MOV dword ptr [ESP + 0x10],ECX
00762d4c : FDIVP
00762d4e : FILD dword ptr [ESP + 0x10]
00762d52 : TEST ECX,ECX
00762d54 : JGE 0x00762d5c
00762d56 : FADD float ptr [0x00cdf0e0]
00762d5c : MOV ECX,EBX
00762d5e : MOV dword ptr [ESP + 0x10],ECX
00762d62 : FILD dword ptr [ESP + 0x10]
00762d66 : TEST ECX,ECX
00762d68 : JGE 0x00762d70
00762d6a : FADD float ptr [0x00cdf0e0]
00762d70 : FDIVP
00762d72 : XORPS XMM0,XMM0
00762d75 : MOVSS dword ptr [ESI + 0x48],XMM0
00762d7a : MOVSS dword ptr [ESI + 0x4c],XMM0
00762d7f : MOVSS dword ptr [ESI + 0x60],XMM0
00762d84 : MOVSS dword ptr [ESI + 0x7c],XMM0
00762d89 : FST float ptr [ESI + 0x64]
00762d8c : FXCH
00762d8e : FST float ptr [ESI + 0x78]
00762d91 : FSTP float ptr [ESI + 0x90]
00762d97 : FSTP float ptr [ESI + 0x94]
00762d9d : MOV dword ptr [EDI + 0x4],EAX
00762da0 : MOV dword ptr [EDI + 0x8],EBX
00762da3 : OR dword ptr [EDI],0x4
00762da6 : CALL 0x00762460
00762dab : MOV EDX,dword ptr [EBP + 0x14]
00762dae : MOV ECX,dword ptr [EDX]
00762db0 : LEA EBX,[ESI + 0x1c]
00762db3 : MOV EDX,EBX
00762db5 : CALL 0x004bd300
00762dba : MOV ECX,dword ptr [EBX + 0x4]
00762dbd : MOV EAX,dword ptr [EBX + 0x8]
00762dc0 : SUB EAX,ECX
00762dc2 : SAR EAX,0x2
00762dc5 : TEST EAX,EAX
00762dc7 : JA 0x00762dce
00762dc9 : CALL 0x0045cd70
00762dce : MOV EAX,dword ptr [ESI + 0x18]
00762dd1 : MOV EDX,dword ptr [EAX]
00762dd3 : MOV EDX,dword ptr [EDX + 0x18]
00762dd6 : PUSH ECX
00762dd7 : MOV ECX,dword ptr [EBP + 0x14]
00762dda : PUSH ECX
00762ddb : PUSH EDI
00762ddc : PUSH EAX
00762ddd : CALL EDX
00762ddf : TEST EAX,EAX
00762de1 : JGE 0x00762e61
00762de3 : TEST byte ptr [EDI],0x1
00762de6 : JNZ 0x00762e61
00762de8 : CALL 0x00762460
00762ded : CMP dword ptr [EDI + 0xc],0x30303030
00762df4 : JLE 0x00762e32
00762df6 : MOV EAX,dword ptr [ESI + 0x14]
00762df9 : MOV ECX,dword ptr [EAX]
00762dfb : LEA EDX,[ESP + 0x18]
00762dff : PUSH EDX
00762e00 : PUSH 0x0
00762e02 : PUSH EAX
00762e03 : MOV EAX,dword ptr [ECX + 0x20]
00762e06 : CALL EAX
00762e08 : MOV ECX,dword ptr [ESI + 0x14]
00762e0b : PUSH 0x0
00762e0d : LEA EAX,[ESI + 0x30]
00762e10 : PUSH EAX
00762e11 : PUSH 0x0
00762e13 : MOV dword ptr [EAX],0x0
00762e19 : MOV EAX,dword ptr [ESP + 0x30]
00762e1d : MOV EDX,dword ptr [ECX]
00762e1f : PUSH EAX
00762e20 : MOV EAX,dword ptr [EDI + 0x8]
00762e23 : PUSH 0x1
00762e25 : PUSH 0x1
00762e27 : PUSH EAX
00762e28 : MOV EAX,dword ptr [EDI + 0x4]
00762e2b : PUSH EAX
00762e2c : PUSH ECX
00762e2d : MOV ECX,dword ptr [EDX + 0x5c]
00762e30 : CALL ECX
00762e32 : MOV EDX,dword ptr [EDI]
00762e34 : AND EDX,0xfffffffb
00762e37 : OR EDX,0x8
00762e3a : MOV dword ptr [EDI],EDX
00762e3c : MOV ECX,dword ptr [EBX + 0x4]
00762e3f : MOV EAX,dword ptr [EBX + 0x8]
00762e42 : SUB EAX,ECX
00762e44 : SAR EAX,0x2
00762e47 : TEST EAX,EAX
00762e49 : JA 0x00762e50
00762e4b : CALL 0x0045cd70
00762e50 : MOV EAX,dword ptr [ESI + 0x18]
00762e53 : MOV EDX,dword ptr [EAX]
00762e55 : MOV EDX,dword ptr [EDX + 0x18]
00762e58 : PUSH ECX
00762e59 : MOV ECX,dword ptr [EBP + 0x14]
00762e5c : PUSH ECX
00762e5d : PUSH EDI
00762e5e : PUSH EAX
00762e5f : CALL EDX
00762e61 : MOV EDX,dword ptr [ESI + 0x14]
00762e64 : LEA ECX,[ESI + 0x34]
00762e67 : CALL 0x0072d7f0
00762e6c : POP EDI
00762e6d : POP ESI
00762e6e : POP EBX
00762e6f : MOV ESP,EBP
00762e71 : POP EBP
00762e72 : RET 0x10
