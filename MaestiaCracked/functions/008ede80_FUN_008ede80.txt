PROGRAM  : Maestia.exe
FUNCTION : FUN_008ede80
ENTRY    : 008ede80
BODY     : [[008ede80, 008ee10b]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_008ede80(undefined4 param_1,int param_2)

{
  code *pcVar1;
  char cVar2;
  int *piVar3;
  int *piVar4;
  undefined4 uVar5;
  int in_ECX;
  int aiStack_48 [2];
  int aiStack_40 [2];
  undefined1 auStack_38 [28];
  void *pvStack_1c;
  void *local_14;
  undefined1 *puStack_10;
  int *piStack_c;
  
  piStack_c = (int *)0xffffffff;
  puStack_10 = &LAB_00b2c2b3;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  piVar3 = (int *)FUN_008ed300(DAT_00d66fa0 ^ (uint)&stack0xffffffa8);
  cVar2 = FUN_008eb3f0();
  if ((cVar2 != '\0') &&
     (piVar4 = *(int **)(*DAT_00da9894 + 0x128), *(char *)((int)piVar4 + 0x59) != '\0')) {
    *(undefined2 *)((int)piVar4 + 0x46) = 0xffff;
    *(undefined2 *)(piVar4 + 0x11) = 0xffff;
    *(undefined2 *)(piVar4 + 0x12) = 0xffff;
    pcVar1 = *(code **)(*piVar4 + 0x20);
    *(undefined1 *)((int)piVar4 + 0x59) = 0;
    piVar4[0x13] = 0;
    piVar4[0x10] = -1;
    (*pcVar1)();
  }
  aiStack_48[0] = FUN_008ed230();
  if (aiStack_48[0] != 0) {
    if (*(code **)(aiStack_48[0] + 0x60) != (code *)0x0) {
      (**(code **)(aiStack_48[0] + 0x60))(7,*(undefined4 *)(aiStack_48[0] + 0x6c));
    }
    *(undefined1 *)(aiStack_48[0] + 0x88) = 0;
  }
  FUN_008eb430();
  if (piVar3 == (int *)0x0) {
    aiStack_40[0] = in_ECX + 0x50;
    FUN_00484470(&param_2);
    if (aiStack_48[0] == *(int *)(in_ECX + 0x54)) {
      aiStack_48[0] = FUN_006f0760(0xa0,".\\Gui\\AvaGuiWindowManager.cpp",0x5d0,0);
      piVar4 = (int *)0x0;
      if (aiStack_48[0] != 0) {
        piStack_c = piVar3;
        piVar4 = (int *)FUN_009a7080(aiStack_48[0],param_1,param_2);
      }
      piStack_c = (int *)0xffffffff;
      if (piVar4 != (int *)0x0) {
        (**(code **)(*piVar4 + 0xc))();
        (**(code **)(*piVar4 + 0x18))(0,300);
        *(undefined1 *)(piVar4 + 0x22) = 1;
        uVar5 = FUN_0043c130(aiStack_40,&param_2);
        local_14 = (void *)0x1;
        FUN_0042ba60(in_ECX + 0x68,&stack0xffffffb0,uVar5,*(undefined4 *)(in_ECX + 0x70));
        local_14 = (void *)0xffffffff;
        FUN_0044cb00(aiStack_40);
        FUN_004843d0(aiStack_48,&stack0xffffffb0);
        ExceptionList = pvStack_1c;
        return piVar4;
      }
      FUN_008018d0(L"AvaGuiWindowMgr::ShowMsgDlg New AvaGuiMsgDlg Failed !!");
      ExceptionList = local_14;
      return (int *)0x0;
    }
    piVar3 = *(int **)(aiStack_48[0] + 0x10);
    uVar5 = FUN_0043c130(auStack_38,&param_2);
    piStack_c = (int *)0x2;
    FUN_0042ba60(in_ECX + 0x68,aiStack_40,uVar5,*(undefined4 *)(in_ECX + 0x70));
    piStack_c = (int *)0xffffffff;
    FUN_0044cb00(auStack_38);
  }
  else if ((char)piVar3[2] == '\0') {
    FUN_008018d0(L"pDlg IsInitialized Fail");
    piVar3[0x27] = param_2;
    (**(code **)(*piVar3 + 0xc))();
    FUN_00405eb0(param_1,0,0xffffffff);
    (**(code **)(*piVar3 + 0x18))(0,300);
    goto LAB_008ee0ee;
  }
  FUN_00405eb0(param_1,0,0xffffffff);
  (**(code **)(*piVar3 + 0x18))(0,300);
LAB_008ee0ee:
  *(undefined1 *)(piVar3 + 0x22) = 1;
  ExceptionList = pvStack_1c;
  return piVar3;
}



============================================================
DISASSEMBLY
============================================================
008ede80 : PUSH EBP
008ede81 : MOV EBP,ESP
008ede83 : AND ESP,0xfffffff8
008ede86 : PUSH -0x1
008ede88 : PUSH 0xb2c2b3
008ede8d : MOV EAX,FS:[0x0]
008ede93 : PUSH EAX
008ede94 : SUB ESP,0x38
008ede97 : PUSH EBX
008ede98 : PUSH ESI
008ede99 : PUSH EDI
008ede9a : MOV EAX,[0x00d66fa0]
008ede9f : XOR EAX,ESP
008edea1 : PUSH EAX
008edea2 : LEA EAX,[ESP + 0x48]
008edea6 : MOV FS:[0x0],EAX
008edeac : MOV EBX,dword ptr [EBP + 0x8]
008edeaf : MOV ESI,ECX
008edeb1 : MOV EAX,EBX
008edeb3 : CALL 0x008ed300
008edeb8 : MOV EDI,EAX
008edeba : MOV EAX,ESI
008edebc : CALL 0x008eb3f0
008edec1 : TEST AL,AL
008edec3 : JZ 0x008edf04
008edec5 : MOV EAX,[0x00da9894]
008edeca : MOV EAX,dword ptr [EAX]
008edecc : MOV ECX,dword ptr [EAX + 0x128]
008eded2 : CMP byte ptr [ECX + 0x59],0x0
008eded6 : JZ 0x008edf04
008eded8 : MOV EDX,0xffff
008ededd : MOV EAX,EDX
008ededf : MOV word ptr [ECX + 0x46],AX
008edee3 : MOV EAX,dword ptr [ECX]
008edee5 : MOV word ptr [ECX + 0x44],DX
008edee9 : MOV word ptr [ECX + 0x48],DX
008edeed : MOV EDX,dword ptr [EAX + 0x20]
008edef0 : MOV byte ptr [ECX + 0x59],0x0
008edef4 : MOV dword ptr [ECX + 0x4c],0x0
008edefb : MOV dword ptr [ECX + 0x40],0xffffffff
008edf02 : CALL EDX
008edf04 : MOV EAX,ESI
008edf06 : CALL 0x008ed230
008edf0b : MOV dword ptr [ESP + 0x14],EAX
008edf0f : TEST EAX,EAX
008edf11 : JZ 0x008edf2d
008edf13 : MOV ECX,dword ptr [EAX + 0x60]
008edf16 : TEST ECX,ECX
008edf18 : JZ 0x008edf26
008edf1a : MOV EAX,dword ptr [EAX + 0x6c]
008edf1d : PUSH EAX
008edf1e : PUSH 0x7
008edf20 : CALL ECX
008edf22 : MOV EAX,dword ptr [ESP + 0x14]
008edf26 : MOV byte ptr [EAX + 0x88],0x0
008edf2d : CALL 0x008eb430
008edf32 : TEST EDI,EDI
008edf34 : JNZ 0x008ee0a5
008edf3a : LEA EAX,[EBP + 0xc]
008edf3d : LEA ECX,[ESI + 0x50]
008edf40 : PUSH EAX
008edf41 : LEA EAX,[ESP + 0x18]
008edf45 : MOV dword ptr [ESP + 0x20],ECX
008edf49 : CALL 0x00484470
008edf4e : MOV ECX,dword ptr [ESI + 0x54]
008edf51 : MOV EAX,dword ptr [ESP + 0x14]
008edf55 : CMP EAX,ECX
008edf57 : JNZ 0x008ee046
008edf5d : PUSH EDI
008edf5e : PUSH 0x5d0
008edf63 : PUSH 0xc5db10
008edf68 : PUSH 0xa0
008edf6d : CALL 0x006f0760
008edf72 : ADD ESP,0x10
008edf75 : MOV dword ptr [ESP + 0x14],EAX
008edf79 : MOV dword ptr [ESP + 0x50],EDI
008edf7d : CMP EAX,EDI
008edf7f : JZ 0x008edf90
008edf81 : MOV ECX,dword ptr [EBP + 0xc]
008edf84 : PUSH ECX
008edf85 : PUSH EBX
008edf86 : PUSH EAX
008edf87 : MOV ECX,ESI
008edf89 : CALL 0x009a7080
008edf8e : MOV EDI,EAX
008edf90 : MOV dword ptr [ESP + 0x50],0xffffffff
008edf98 : TEST EDI,EDI
008edf9a : JNZ 0x008edfc6
008edf9c : MOV ESI,dword ptr [0x00da98e8]
008edfa2 : PUSH 0xc5db50
008edfa7 : CALL 0x008018d0
008edfac : ADD ESP,0x4
008edfaf : XOR EAX,EAX
008edfb1 : MOV ECX,dword ptr [ESP + 0x48]
008edfb5 : MOV dword ptr FS:[0x0],ECX
008edfbc : POP ECX
008edfbd : POP EDI
008edfbe : POP ESI
008edfbf : POP EBX
008edfc0 : MOV ESP,EBP
008edfc2 : POP EBP
008edfc3 : RET 0x8
008edfc6 : MOV EDX,dword ptr [EDI]
008edfc8 : MOV EAX,dword ptr [EDX + 0xc]
008edfcb : MOV ECX,EDI
008edfcd : CALL EAX
008edfcf : MOV EDX,dword ptr [EDI]
008edfd1 : MOV EAX,dword ptr [EDX + 0x18]
008edfd4 : PUSH 0x12c
008edfd9 : PUSH 0x0
008edfdb : MOV ECX,EDI
008edfdd : CALL EAX
008edfdf : LEA ECX,[EBP + 0xc]
008edfe2 : PUSH ECX
008edfe3 : LEA EDX,[ESP + 0x28]
008edfe7 : PUSH EDX
008edfe8 : MOV ECX,EBX
008edfea : MOV byte ptr [EDI + 0x88],0x1
008edff1 : CALL 0x0043c130
008edff6 : MOV dword ptr [ESP + 0x50],0x1
008edffe : MOV EDX,dword ptr [ESI + 0x70]
008ee001 : LEA ECX,[ESI + 0x68]
008ee004 : PUSH EDX
008ee005 : PUSH EAX
008ee006 : LEA EAX,[ESP + 0x1c]
008ee00a : PUSH EAX
008ee00b : PUSH ECX
008ee00c : CALL 0x0042ba60
008ee011 : MOV dword ptr [ESP + 0x50],0xffffffff
008ee019 : LEA ECX,[ESP + 0x24]
008ee01d : PUSH ECX
008ee01e : CALL 0x0044cb00
008ee023 : MOV EDX,dword ptr [EBP + 0xc]
008ee026 : LEA EAX,[ESP + 0x14]
008ee02a : PUSH EAX
008ee02b : MOV EAX,dword ptr [ESP + 0x20]
008ee02f : LEA ECX,[ESP + 0x20]
008ee033 : PUSH ECX
008ee034 : MOV dword ptr [ESP + 0x1c],EDX
008ee038 : MOV dword ptr [ESP + 0x20],EDI
008ee03c : CALL 0x004843d0
008ee041 : JMP 0x008ee0f5
008ee046 : MOV EDI,dword ptr [EAX + 0x10]
008ee049 : LEA EDX,[EBP + 0xc]
008ee04c : PUSH EDX
008ee04d : LEA EAX,[ESP + 0x28]
008ee051 : PUSH EAX
008ee052 : MOV ECX,EBX
008ee054 : CALL 0x0043c130
008ee059 : MOV dword ptr [ESP + 0x50],0x2
008ee061 : MOV ECX,dword ptr [ESI + 0x70]
008ee064 : ADD ESI,0x68
008ee067 : PUSH ECX
008ee068 : PUSH EAX
008ee069 : LEA ECX,[ESP + 0x24]
008ee06d : PUSH ECX
008ee06e : PUSH ESI
008ee06f : CALL 0x0042ba60
008ee074 : MOV dword ptr [ESP + 0x50],0xffffffff
008ee07c : LEA EDX,[ESP + 0x24]
008ee080 : PUSH EDX
008ee081 : CALL 0x0044cb00
008ee086 : PUSH -0x1
008ee088 : PUSH 0x0
008ee08a : PUSH EBX
008ee08b : LEA ECX,[EDI + 0x40]
008ee08e : CALL 0x00405eb0
008ee093 : MOV EAX,dword ptr [EDI]
008ee095 : MOV EDX,dword ptr [EAX + 0x18]
008ee098 : PUSH 0x12c
008ee09d : PUSH 0x0
008ee09f : MOV ECX,EDI
008ee0a1 : CALL EDX
008ee0a3 : JMP 0x008ee0ee
008ee0a5 : MOV AL,byte ptr [EDI + 0x8]
008ee0a8 : TEST AL,AL
008ee0aa : JNZ 0x008ee086
008ee0ac : MOV ESI,dword ptr [0x00da98e8]
008ee0b2 : PUSH 0xc5dbc0
008ee0b7 : CALL 0x008018d0
008ee0bc : MOV EAX,dword ptr [EBP + 0xc]
008ee0bf : MOV EDX,dword ptr [EDI]
008ee0c1 : MOV dword ptr [EDI + 0x9c],EAX
008ee0c7 : MOV EAX,dword ptr [EDX + 0xc]
008ee0ca : ADD ESP,0x4
008ee0cd : MOV ECX,EDI
008ee0cf : CALL EAX
008ee0d1 : PUSH -0x1
008ee0d3 : PUSH 0x0
008ee0d5 : PUSH EBX
008ee0d6 : LEA ECX,[EDI + 0x40]
008ee0d9 : CALL 0x00405eb0
008ee0de : MOV EDX,dword ptr [EDI]
008ee0e0 : MOV EAX,dword ptr [EDX + 0x18]
008ee0e3 : PUSH 0x12c
008ee0e8 : PUSH 0x0
008ee0ea : MOV ECX,EDI
008ee0ec : CALL EAX
008ee0ee : MOV byte ptr [EDI + 0x88],0x1
008ee0f5 : MOV EAX,EDI
008ee0f7 : MOV ECX,dword ptr [ESP + 0x48]
008ee0fb : MOV dword ptr FS:[0x0],ECX
008ee102 : POP ECX
008ee103 : POP EDI
008ee104 : POP ESI
008ee105 : POP EBX
008ee106 : MOV ESP,EBP
008ee108 : POP EBP
008ee109 : RET 0x8
