PROGRAM  : Maestia.exe
FUNCTION : FUN_00778e20
ENTRY    : 00778e20
BODY     : [[00778e20, 0077904d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00778e20(void)

{
  int iVar1;
  int in_ECX;
  undefined ***pppuStack_5c;
  undefined **local_40;
  int *local_3c;
  undefined **local_38;
  undefined **local_34 [2];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4bc8f;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  pppuStack_5c = (undefined ***)0x778e6a;
  iVar1 = FUN_00405bb0();
  if (iVar1 == 0) {
    *(undefined4 *)(in_ECX + 0xec) = *(undefined4 *)(in_ECX + 0xf4);
  }
  else {
    pppuStack_5c = (undefined ***)(in_ECX + 0xb0);
    FUN_007c8420(&local_38);
    local_8 = 0;
    pppuStack_5c = &local_40;
    FUN_00463a90();
    local_8._0_1_ = 2;
    local_38 = &PTR_FUN_00cd4964;
    if (local_34[0] != (undefined **)0x0) {
      (**(code **)(*local_34[0] + 0x30))();
      local_34[0] = (undefined **)0x0;
    }
    if (local_3c != (int *)0x0) {
      local_34[0] = (undefined **)&pppuStack_5c;
      FUN_00476e90(&pppuStack_5c,&local_40);
      local_8._0_1_ = 2;
      FUN_004866c0();
    }
    pppuStack_5c = (undefined ***)0x0;
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    FUN_00405eb0((undefined ***)(in_ECX + 0xb0));
    local_8 = CONCAT31(local_8._1_3_,4);
    pppuStack_5c = local_34;
    local_34[0] = (undefined **)&DAT_0000005f;
    pppuStack_5c = (undefined ***)FUN_00407cc0();
    if (pppuStack_5c != (undefined ***)0xffffffff) {
      FUN_00405e10();
      pppuStack_5c = (undefined ***)0xc101b0;
      FUN_00404870();
    }
    pppuStack_5c = &local_38;
    iVar1 = (**(code **)(*DAT_017251d8 + 4))();
    local_8._0_1_ = 5;
    if (local_3c != *(int **)(iVar1 + 4)) {
      if (local_3c != (int *)0x0) {
        (**(code **)(*local_3c + 0x30))();
      }
      if (*(int *)(iVar1 + 4) != 0) {
        pppuStack_5c = (undefined ***)0x778f91;
        InterlockedIncrement((LONG *)(*(int *)(iVar1 + 4) + 0x2c));
      }
      local_3c = *(int **)(iVar1 + 4);
    }
    local_8._0_1_ = 4;
    local_38 = &PTR_FUN_00cd4964;
    if (local_34[0] != (undefined **)0x0) {
      (**(code **)(*local_34[0] + 0x30))();
      local_34[0] = (undefined **)0x0;
    }
    if (local_3c != (int *)0x0) {
      local_34[0] = (undefined **)&pppuStack_5c;
      FUN_00476e90(&pppuStack_5c,&local_40);
      local_8._0_1_ = 4;
      FUN_00486740();
    }
    local_8 = CONCAT31(local_8._1_3_,2);
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    local_8 = 0xffffffff;
    FUN_0045f5a0();
    *(undefined4 *)(in_ECX + 0xec) = *(undefined4 *)(in_ECX + 0xf4);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00778e20 : PUSH EBP
00778e21 : MOV EBP,ESP
00778e23 : PUSH -0x1
00778e25 : PUSH 0xb4bc8f
00778e2a : MOV EAX,FS:[0x0]
00778e30 : PUSH EAX
00778e31 : SUB ESP,0x34
00778e34 : MOV EAX,[0x00d66fa0]
00778e39 : XOR EAX,EBP
00778e3b : MOV dword ptr [EBP + -0x10],EAX
00778e3e : PUSH EBX
00778e3f : PUSH ESI
00778e40 : PUSH EDI
00778e41 : PUSH EAX
00778e42 : LEA EAX,[EBP + -0xc]
00778e45 : MOV FS:[0x0],EAX
00778e4b : MOV ESI,ECX
00778e4d : MOV EAX,dword ptr [ESI + 0xc4]
00778e53 : LEA EBX,[ESI + 0xb0]
00778e59 : PUSH 0xc10024
00778e5e : XOR EDI,EDI
00778e60 : MOV ECX,EBX
00778e62 : MOV dword ptr [EBP + -0x40],ESI
00778e65 : CALL 0x00405bb0
00778e6a : TEST EAX,EAX
00778e6c : JZ 0x00779026
00778e72 : MOV EAX,[0x017251ac]
00778e77 : MOV EAX,dword ptr [EAX + 0x20]
00778e7a : CMP EAX,EDI
00778e7c : JZ 0x00778e8a
00778e7e : CMP dword ptr [ESI + 0x104],EDI
00778e84 : JNZ 0x00778e8a
00778e86 : MOV AL,0x1
00778e88 : JMP 0x00778e8c
00778e8a : XOR AL,AL
00778e8c : PUSH EAX
00778e8d : PUSH EBX
00778e8e : LEA ECX,[EBP + -0x34]
00778e91 : PUSH ECX
00778e92 : MOV ECX,dword ptr [0x017251d8]
00778e98 : CALL 0x007c8420
00778e9d : MOV dword ptr [EBP + -0x4],EDI
00778ea0 : PUSH EAX
00778ea1 : LEA EDX,[EBP + -0x3c]
00778ea4 : PUSH EDX
00778ea5 : CALL 0x00463a90
00778eaa : MOV byte ptr [EBP + -0x4],0x2
00778eae : MOV ECX,dword ptr [EBP + -0x30]
00778eb1 : MOV dword ptr [EBP + -0x34],0xcd4964
00778eb8 : CMP ECX,EDI
00778eba : JZ 0x00778ec6
00778ebc : MOV EAX,dword ptr [ECX]
00778ebe : MOV EDX,dword ptr [EAX + 0x30]
00778ec1 : CALL EDX
00778ec3 : MOV dword ptr [EBP + -0x30],EDI
00778ec6 : CMP dword ptr [EBP + -0x38],EDI
00778ec9 : JZ 0x00778ef3
00778ecb : SUB ESP,0x8
00778ece : MOV EAX,ESP
00778ed0 : MOV dword ptr [EBP + -0x30],ESP
00778ed3 : LEA ECX,[EBP + -0x3c]
00778ed6 : PUSH ECX
00778ed7 : PUSH EAX
00778ed8 : CALL 0x00476e90
00778edd : MOV byte ptr [EBP + -0x4],0x3
00778ee1 : MOV byte ptr [EBP + -0x4],0x2
00778ee5 : MOV ESI,dword ptr [ESI + 0xf4]
00778eeb : CALL 0x004866c0
00778ef0 : MOV ESI,dword ptr [EBP + -0x40]
00778ef3 : PUSH -0x1
00778ef5 : PUSH EDI
00778ef6 : XOR EDX,EDX
00778ef8 : PUSH EBX
00778ef9 : LEA ECX,[EBP + -0x2c]
00778efc : MOV dword ptr [EBP + -0x14],0x7
00778f03 : MOV dword ptr [EBP + -0x18],EDI
00778f06 : MOV word ptr [EBP + -0x28],DX
00778f0a : CALL 0x00405eb0
00778f0f : MOV BL,0x4
00778f11 : MOV byte ptr [EBP + -0x4],BL
00778f14 : PUSH 0x1
00778f16 : LEA EAX,[EBP + -0x30]
00778f19 : PUSH EAX
00778f1a : OR ECX,0xffffffff
00778f1d : LEA EDI,[EBP + -0x2c]
00778f20 : MOV dword ptr [EBP + -0x30],0x5f
00778f27 : CALL 0x00407cc0
00778f2c : CMP EAX,-0x1
00778f2f : JZ 0x00778f50
00778f31 : MOV ECX,dword ptr [EBP + -0x18]
00778f34 : SUB ECX,EAX
00778f36 : PUSH ECX
00778f37 : PUSH EAX
00778f38 : MOV ECX,EDI
00778f3a : CALL 0x00405e10
00778f3f : PUSH 0xa
00778f41 : PUSH 0xc101b0
00778f46 : MOV ESI,EDI
00778f48 : CALL 0x00404870
00778f4d : MOV ESI,dword ptr [EBP + -0x40]
00778f50 : MOV ECX,dword ptr [0x017251d8]
00778f56 : MOV EDX,dword ptr [ECX]
00778f58 : MOV EDX,dword ptr [EDX + 0x4]
00778f5b : LEA EAX,[EBP + -0x2c]
00778f5e : PUSH EAX
00778f5f : LEA EAX,[EBP + -0x34]
00778f62 : PUSH EAX
00778f63 : CALL EDX
00778f65 : MOV EDI,EAX
00778f67 : MOV byte ptr [EBP + -0x4],0x5
00778f6b : MOV EAX,dword ptr [EDI + 0x4]
00778f6e : MOV ECX,dword ptr [EBP + -0x38]
00778f71 : CMP ECX,EAX
00778f73 : JZ 0x00778f97
00778f75 : TEST ECX,ECX
00778f77 : JZ 0x00778f80
00778f79 : MOV EAX,dword ptr [ECX]
00778f7b : MOV EDX,dword ptr [EAX + 0x30]
00778f7e : CALL EDX
00778f80 : MOV EAX,dword ptr [EDI + 0x4]
00778f83 : TEST EAX,EAX
00778f85 : JZ 0x00778f91
00778f87 : ADD EAX,0x2c
00778f8a : PUSH EAX
00778f8b : CALL dword ptr [0x00b850dc]
00778f91 : MOV EDI,dword ptr [EDI + 0x4]
00778f94 : MOV dword ptr [EBP + -0x38],EDI
00778f97 : MOV byte ptr [EBP + -0x4],BL
00778f9a : MOV ECX,dword ptr [EBP + -0x30]
00778f9d : MOV dword ptr [EBP + -0x34],0xcd4964
00778fa4 : TEST ECX,ECX
00778fa6 : JZ 0x00778fb6
00778fa8 : MOV EAX,dword ptr [ECX]
00778faa : MOV EDX,dword ptr [EAX + 0x30]
00778fad : CALL EDX
00778faf : MOV dword ptr [EBP + -0x30],0x0
00778fb6 : CMP dword ptr [EBP + -0x38],0x0
00778fba : JZ 0x00778fe3
00778fbc : SUB ESP,0x8
00778fbf : MOV EAX,ESP
00778fc1 : MOV dword ptr [EBP + -0x30],ESP
00778fc4 : LEA ECX,[EBP + -0x3c]
00778fc7 : PUSH ECX
00778fc8 : PUSH EAX
00778fc9 : CALL 0x00476e90
00778fce : MOV byte ptr [EBP + -0x4],0x6
00778fd2 : MOV byte ptr [EBP + -0x4],BL
00778fd5 : MOV ESI,dword ptr [ESI + 0xf4]
00778fdb : CALL 0x00486740
00778fe0 : MOV ESI,dword ptr [EBP + -0x40]
00778fe3 : MOV byte ptr [EBP + -0x4],0x2
00778fe7 : CMP dword ptr [EBP + -0x14],0x8
00778feb : JC 0x00778ff5
00778fed : MOV ECX,dword ptr [EBP + -0x28]
00778ff0 : CALL 0x006f04e0
00778ff5 : XOR EDX,EDX
00778ff7 : MOV dword ptr [EBP + -0x14],0x7
00778ffe : MOV dword ptr [EBP + -0x18],0x0
00779005 : MOV word ptr [EBP + -0x28],DX
00779009 : MOV dword ptr [EBP + -0x4],0xffffffff
00779010 : LEA ECX,[EBP + -0x3c]
00779013 : CALL 0x0045f5a0
00779018 : MOV EAX,dword ptr [ESI + 0xf4]
0077901e : MOV dword ptr [ESI + 0xec],EAX
00779024 : JMP 0x00779032
00779026 : MOV ECX,dword ptr [ESI + 0xf4]
0077902c : MOV dword ptr [ESI + 0xec],ECX
00779032 : MOV ECX,dword ptr [EBP + -0xc]
00779035 : MOV dword ptr FS:[0x0],ECX
0077903c : POP ECX
0077903d : POP EDI
0077903e : POP ESI
0077903f : POP EBX
00779040 : MOV ECX,dword ptr [EBP + -0x10]
00779043 : XOR ECX,EBP
00779045 : CALL 0x00633e6b
0077904a : MOV ESP,EBP
0077904c : POP EBP
0077904d : RET
