PROGRAM  : Maestia.exe
FUNCTION : FUN_005016c0
ENTRY    : 005016c0
BODY     : [[005016c0, 00501782]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005016c0(int param_1)

{
  byte *pbVar1;
  double dVar2;
  int iVar3;
  
  if (((*(int *)(param_1 + 8) != 0) &&
      (iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar3 == 4)) &&
     (0 < *(int *)(param_1 + 0x1c))) {
    FUN_00526260(0);
    FUN_00527730();
    iVar3 = FUN_0063b380();
    if (iVar3 < 0) {
      pbVar1 = *(byte **)(param_1 + 4);
      if (4 < *pbVar1) {
        FUN_00526400();
      }
      pbVar1[4] = 0;
      pbVar1[5] = 0;
      pbVar1[6] = 0;
      pbVar1[7] = 0;
      pbVar1[8] = 0;
      pbVar1[9] = 0;
      pbVar1[10] = 0xf0;
      pbVar1[0xb] = 0xbf;
      *pbVar1 = 3;
      return;
    }
    iVar3 = FUN_0054b5a0(iVar3,0);
    if (iVar3 == -1) {
      dVar2 = -1.0;
    }
    else {
      dVar2 = (double)iVar3;
      if (iVar3 < 0) {
        FUN_004ffd60(dVar2 + 4294967296.0);
        return;
      }
    }
    FUN_004ffd60(dVar2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005016c0 : PUSH ESI
005016c1 : MOV ESI,dword ptr [ESP + 0x8]
005016c5 : CMP dword ptr [ESI + 0x8],0x0
005016c9 : JZ 0x00501781
005016cf : MOV ECX,dword ptr [ESI + 0x8]
005016d2 : MOV EAX,dword ptr [ECX]
005016d4 : MOV EDX,dword ptr [EAX + 0x8]
005016d7 : CALL EDX
005016d9 : CMP EAX,0x4
005016dc : JNZ 0x00501781
005016e2 : MOV EAX,dword ptr [ESI + 0x8]
005016e5 : PUSH EDI
005016e6 : TEST EAX,EAX
005016e8 : JZ 0x005016ef
005016ea : LEA EDI,[EAX + -0x68]
005016ed : JMP 0x005016f1
005016ef : XOR EDI,EDI
005016f1 : CMP dword ptr [ESI + 0x1c],0x1
005016f5 : JL 0x00501780
005016fb : MOV EAX,dword ptr [ESI + 0x18]
005016fe : PUSH EAX
005016ff : PUSH 0x0
00501701 : MOV ECX,ESI
00501703 : CALL 0x00526260
00501708 : MOV ECX,EAX
0050170a : CALL 0x00527730
0050170f : CALL 0x0063b380
00501714 : TEST EAX,EAX
00501716 : JGE 0x00501736
00501718 : MOV ESI,dword ptr [ESI + 0x4]
0050171b : CMP byte ptr [ESI],0x5
0050171e : JC 0x00501727
00501720 : MOV ECX,ESI
00501722 : CALL 0x00526400
00501727 : FLD double ptr [0x00b86090]
0050172d : POP EDI
0050172e : FSTP double ptr [ESI + 0x4]
00501731 : MOV byte ptr [ESI],0x3
00501734 : POP ESI
00501735 : RET
00501736 : MOV ECX,dword ptr [EDI + 0xa0]
0050173c : PUSH 0x0
0050173e : PUSH EAX
0050173f : CALL 0x0054b5a0
00501744 : CMP EAX,-0x1
00501747 : JZ 0x0050176c
00501749 : MOV dword ptr [ESP + 0xc],EAX
0050174d : FILD dword ptr [ESP + 0xc]
00501751 : TEST EAX,EAX
00501753 : JGE 0x00501772
00501755 : FADD double ptr [0x00cdf6f8]
0050175b : MOV ECX,dword ptr [ESI + 0x4]
0050175e : SUB ESP,0x8
00501761 : FSTP double ptr [ESP]
00501764 : CALL 0x004ffd60
00501769 : POP EDI
0050176a : POP ESI
0050176b : RET
0050176c : FLD double ptr [0x00b86090]
00501772 : MOV ECX,dword ptr [ESI + 0x4]
00501775 : SUB ESP,0x8
00501778 : FSTP double ptr [ESP]
0050177b : CALL 0x004ffd60
00501780 : POP EDI
00501781 : POP ESI
00501782 : RET
