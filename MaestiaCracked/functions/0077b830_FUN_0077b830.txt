PROGRAM  : Maestia.exe
FUNCTION : FUN_0077b830
ENTRY    : 0077b830
BODY     : [[0077b830, 0077ba30]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0077b830(int *param_1,int *param_2,undefined4 param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  DWORD DVar5;
  int *in_ECX;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  undefined1 local_14 [4];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  piVar1 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b398a3;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_28 = (LPCRITICAL_SECTION)(in_ECX + 0xbbbc);
  local_1c = 0;
  local_24 = ".\\Terrain\\AvaPathFinder.cpp";
  local_20 = 0x135;
  local_18 = 1;
  FUN_006ef1a0(&local_28);
  local_8 = 0;
  *(undefined1 *)(in_ECX + 0xbbba) = 0;
  if (*in_ECX == 0) {
    local_8 = 0xffffffff;
    if (local_1c != 0) {
      LeaveCriticalSection(local_28);
    }
  }
  else {
    *(undefined2 *)(in_ECX + 0xbbb7) = (undefined2)param_3;
    in_ECX[0xbbb5] = 10000;
    in_ECX[0x2a] = *param_1;
    in_ECX[0x2b] = param_1[1];
    in_ECX[0x2c] = param_1[2];
    in_ECX[0x2d] = *piVar1;
    in_ECX[0x2e] = piVar1[1];
    in_ECX[0x2f] = piVar1[2];
    FUN_007df8c0(*piVar1,piVar1[2],&param_2,local_14);
    iVar4 = FUN_007e10d0(param_2);
    iVar2 = param_4;
    if ((iVar4 != 0) && ((*(int *)(iVar4 + 0xc) - *(int *)(iVar4 + 8)) / 7 != 0)) {
      cVar3 = FUN_007de1f0(param_4);
      if (cVar3 != '\0') {
        in_ECX[0xbbb6] = 0x41a00000;
        in_ECX[0xbbb8] = 0x41080000;
        in_ECX[0xbbb9] = iVar2;
        cVar3 = FUN_0077b520(in_ECX,param_3);
        if (cVar3 != '\0') {
          DVar5 = GetTickCount();
          *(undefined1 *)(in_ECX + 0xbbba) = 0;
          in_ECX[0xbbb4] = DVar5 - in_ECX[0xbbb3];
          local_8 = 0xffffffff;
          FUN_006ef180();
          ExceptionList = local_10;
          return 1;
        }
        *(undefined1 *)(in_ECX + 0xbbba) = 0;
      }
      local_8 = 0xffffffff;
      FUN_006ef180();
      ExceptionList = local_10;
      return 0;
    }
    local_8 = 0xffffffff;
    if (local_1c != 0) {
      LeaveCriticalSection(local_28);
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0077b830 : PUSH EBP
0077b831 : MOV EBP,ESP
0077b833 : PUSH -0x1
0077b835 : PUSH 0xb398a3
0077b83a : MOV EAX,FS:[0x0]
0077b840 : PUSH EAX
0077b841 : SUB ESP,0x18
0077b844 : PUSH EBX
0077b845 : PUSH ESI
0077b846 : PUSH EDI
0077b847 : MOV EAX,[0x00d66fa0]
0077b84c : XOR EAX,EBP
0077b84e : PUSH EAX
0077b84f : LEA EAX,[EBP + -0xc]
0077b852 : MOV FS:[0x0],EAX
0077b858 : MOV EBX,dword ptr [EBP + 0xc]
0077b85b : MOV ESI,ECX
0077b85d : LEA ECX,[EBP + -0x24]
0077b860 : LEA EAX,[ESI + 0x2eef0]
0077b866 : XOR EDI,EDI
0077b868 : PUSH ECX
0077b869 : MOV dword ptr [EBP + -0x18],EDI
0077b86c : MOV dword ptr [EBP + -0x24],EAX
0077b86f : MOV dword ptr [EBP + -0x20],0xc10490
0077b876 : MOV dword ptr [EBP + -0x1c],0x135
0077b87d : MOV dword ptr [EBP + -0x14],0x1
0077b884 : CALL 0x006ef1a0
0077b889 : MOV dword ptr [EBP + -0x4],EDI
0077b88c : MOV byte ptr [ESI + 0x2eee8],0x0
0077b893 : CMP dword ptr [ESI],EDI
0077b895 : JNZ 0x0077b8b9
0077b897 : MOV dword ptr [EBP + -0x4],0xffffffff
0077b89e : CMP dword ptr [EBP + -0x18],EDI
0077b8a1 : JZ 0x0077ba1b
0077b8a7 : MOV EDX,dword ptr [EBP + -0x24]
0077b8aa : PUSH EDX
0077b8ab : CALL dword ptr [0x00b8511c]
0077b8b1 : MOV dword ptr [EBP + -0x18],EDI
0077b8b4 : JMP 0x0077ba1b
0077b8b9 : MOV AX,word ptr [EBP + 0x10]
0077b8bd : MOV word ptr [ESI + 0x2eedc],AX
0077b8c4 : MOV EAX,dword ptr [EBP + 0x8]
0077b8c7 : MOV dword ptr [ESI + 0x2eed4],0x2710
0077b8d1 : FLD float ptr [EAX]
0077b8d3 : FSTP float ptr [ESI + 0xa8]
0077b8d9 : LEA ECX,[EBP + -0x10]
0077b8dc : FLD float ptr [EAX + 0x4]
0077b8df : PUSH ECX
0077b8e0 : FSTP float ptr [ESI + 0xac]
0077b8e6 : LEA EDX,[EBP + 0xc]
0077b8e9 : FLD float ptr [EAX + 0x8]
0077b8ec : PUSH EDX
0077b8ed : FSTP float ptr [ESI + 0xb0]
0077b8f3 : SUB ESP,0x8
0077b8f6 : FLD float ptr [EBX]
0077b8f8 : FSTP float ptr [ESI + 0xb4]
0077b8fe : FLD float ptr [EBX + 0x4]
0077b901 : FSTP float ptr [ESI + 0xb8]
0077b907 : FLD float ptr [EBX + 0x8]
0077b90a : FSTP float ptr [ESI + 0xbc]
0077b910 : MOV EAX,dword ptr [ESI]
0077b912 : FLD float ptr [EBX + 0x8]
0077b915 : FSTP float ptr [ESP + 0x4]
0077b919 : FLD float ptr [EBX]
0077b91b : FSTP float ptr [ESP]
0077b91e : CALL 0x007df8c0
0077b923 : MOV EAX,dword ptr [EBP + 0xc]
0077b926 : MOV EDI,dword ptr [EBP + -0x10]
0077b929 : MOV ECX,dword ptr [ESI]
0077b92b : PUSH EAX
0077b92c : CALL 0x007e10d0
0077b931 : MOV ECX,EAX
0077b933 : TEST ECX,ECX
0077b935 : JNZ 0x0077b95e
0077b937 : MOV dword ptr [EBP + -0x4],0xffffffff
0077b93e : CMP dword ptr [EBP + -0x18],0x0
0077b942 : JZ 0x0077ba1b
0077b948 : MOV ECX,dword ptr [EBP + -0x24]
0077b94b : PUSH ECX
0077b94c : CALL dword ptr [0x00b8511c]
0077b952 : MOV dword ptr [EBP + -0x18],0x0
0077b959 : JMP 0x0077ba1b
0077b95e : MOV EDI,dword ptr [ECX + 0xc]
0077b961 : SUB EDI,dword ptr [ECX + 0x8]
0077b964 : MOV EAX,0x92492493
0077b969 : IMUL EDI
0077b96b : ADD EDX,EDI
0077b96d : SAR EDX,0x2
0077b970 : MOV EAX,EDX
0077b972 : SHR EAX,0x1f
0077b975 : ADD EAX,EDX
0077b977 : JZ 0x0077b937
0077b979 : MOV EDX,dword ptr [ECX + 0x8]
0077b97c : MOV EDI,dword ptr [EBP + 0x14]
0077b97f : MOV CL,byte ptr [EDX + 0x2]
0077b982 : MOV EDX,dword ptr [ESI]
0077b984 : PUSH EDI
0077b985 : CALL 0x007de1f0
0077b98a : TEST AL,AL
0077b98c : JZ 0x0077ba0c
0077b98e : MOV EAX,dword ptr [EBP + 0x10]
0077b991 : MOVSS XMM0,dword ptr [0x00cdf140]
0077b999 : PUSH EAX
0077b99a : MOV EAX,dword ptr [EBP + 0x8]
0077b99d : MOVSS dword ptr [ESI + 0x2eed8],XMM0
0077b9a5 : MOVSS XMM0,dword ptr [0x00cdf754]
0077b9ad : PUSH ESI
0077b9ae : MOV ECX,EBX
0077b9b0 : MOVSS dword ptr [ESI + 0x2eee0],XMM0
0077b9b8 : MOV dword ptr [ESI + 0x2eee4],EDI
0077b9be : CALL 0x0077b520
0077b9c3 : TEST AL,AL
0077b9c5 : JZ 0x0077ba05
0077b9c7 : CALL dword ptr [0x00b850d8]
0077b9cd : SUB EAX,dword ptr [ESI + 0x2eecc]
0077b9d3 : MOV byte ptr [ESI + 0x2eee8],0x0
0077b9da : MOV dword ptr [ESI + 0x2eed0],EAX
0077b9e0 : MOV dword ptr [EBP + -0x4],0xffffffff
0077b9e7 : LEA ESI,[EBP + -0x24]
0077b9ea : CALL 0x006ef180
0077b9ef : MOV AL,0x1
0077b9f1 : MOV ECX,dword ptr [EBP + -0xc]
0077b9f4 : MOV dword ptr FS:[0x0],ECX
0077b9fb : POP ECX
0077b9fc : POP EDI
0077b9fd : POP ESI
0077b9fe : POP EBX
0077b9ff : MOV ESP,EBP
0077ba01 : POP EBP
0077ba02 : RET 0x10
0077ba05 : MOV byte ptr [ESI + 0x2eee8],0x0
0077ba0c : MOV dword ptr [EBP + -0x4],0xffffffff
0077ba13 : LEA ESI,[EBP + -0x24]
0077ba16 : CALL 0x006ef180
0077ba1b : XOR AL,AL
0077ba1d : MOV ECX,dword ptr [EBP + -0xc]
0077ba20 : MOV dword ptr FS:[0x0],ECX
0077ba27 : POP ECX
0077ba28 : POP EDI
0077ba29 : POP ESI
0077ba2a : POP EBX
0077ba2b : MOV ESP,EBP
0077ba2d : POP EBP
0077ba2e : RET 0x10
