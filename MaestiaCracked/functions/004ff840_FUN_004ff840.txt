PROGRAM  : Maestia.exe
FUNCTION : FUN_004ff840
ENTRY    : 004ff840
BODY     : [[004ff840, 004ff884]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_004ff840(void)

{
  undefined4 *puVar1;
  int in_ECX;
  undefined4 local_4;
  
  if (*(int *)(in_ECX + 8) == 0) {
    local_4 = 2;
    puVar1 = (undefined4 *)FUN_00515d60(in_ECX,8,&local_4);
    if (puVar1 == (undefined4 *)0x0) {
      puVar1 = (undefined4 *)0x0;
    }
    else {
      *puVar1 = 1;
      puVar1[1] = in_ECX;
    }
    *(undefined4 **)(in_ECX + 8) = puVar1;
    if (puVar1 == (undefined4 *)0x0) {
      return 0;
    }
  }
  **(int **)(in_ECX + 8) = **(int **)(in_ECX + 8) + 1;
  return *(undefined4 *)(in_ECX + 8);
}



============================================================
DISASSEMBLY
============================================================
004ff840 : PUSH ECX
004ff841 : PUSH ESI
004ff842 : MOV ESI,ECX
004ff844 : CMP dword ptr [ESI + 0x8],0x0
004ff848 : JNZ 0x004ff87a
004ff84a : LEA EAX,[ESP + 0x4]
004ff84e : PUSH EAX
004ff84f : PUSH 0x8
004ff851 : PUSH ESI
004ff852 : MOV dword ptr [ESP + 0x10],0x2
004ff85a : CALL 0x00515d60
004ff85f : TEST EAX,EAX
004ff861 : JZ 0x004ff86e
004ff863 : MOV dword ptr [EAX],0x1
004ff869 : MOV dword ptr [EAX + 0x4],ESI
004ff86c : JMP 0x004ff870
004ff86e : XOR EAX,EAX
004ff870 : MOV dword ptr [ESI + 0x8],EAX
004ff873 : TEST EAX,EAX
004ff875 : JNZ 0x004ff87a
004ff877 : POP ESI
004ff878 : POP ECX
004ff879 : RET
004ff87a : MOV EAX,dword ptr [ESI + 0x8]
004ff87d : INC dword ptr [EAX]
004ff87f : MOV EAX,dword ptr [ESI + 0x8]
004ff882 : POP ESI
004ff883 : POP ECX
004ff884 : RET
