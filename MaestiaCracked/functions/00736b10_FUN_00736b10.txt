PROGRAM  : Maestia.exe
FUNCTION : FUN_00736b10
ENTRY    : 00736b10
BODY     : [[00736b10, 00736d5b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00736b10(int param_1,int param_2,int param_3,int param_4,undefined4 param_5,int param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  int in_ECX;
  uint uVar8;
  undefined4 *puVar9;
  uint uVar10;
  int iVar11;
  uint local_2c;
  uint local_20;
  
  iVar7 = FUN_0070a3a0();
  fVar4 = DAT_00d72c24;
  uVar6 = 0;
  if (*(short *)(in_ECX + 0x10) != 0) {
    do {
      uVar8 = (uint)uVar6;
      puVar9 = (undefined4 *)(uVar8 * 0x34 + iVar7);
      iVar11 = uVar8 * 0xc;
      *puVar9 = *(undefined4 *)(iVar11 + param_1);
      puVar9[1] = *(undefined4 *)(iVar11 + 4 + param_1);
      puVar9[2] = *(undefined4 *)(iVar11 + 8 + param_1);
      puVar9[3] = *(undefined4 *)(iVar11 + param_2);
      puVar9[4] = *(undefined4 *)(iVar11 + 4 + param_2);
      puVar9[5] = *(undefined4 *)(iVar11 + 8 + param_2);
      puVar9[7] = *(undefined4 *)(param_3 + uVar8 * 8);
      puVar9[8] = *(undefined4 *)(param_3 + 4 + uVar8 * 8);
      fVar1 = *(float *)(iVar11 + param_4);
      fVar2 = *(float *)(iVar11 + 4 + param_4);
      fVar3 = *(float *)(iVar11 + 8 + param_4);
      if (fVar1 < 1.0) {
        if (0.0 < fVar1) {
          local_20 = (uint)(longlong)ROUND(fVar1 * 255.0 + fVar4);
          uVar10 = local_20;
        }
        else {
          uVar10 = 0;
        }
      }
      else {
        uVar10 = 0xff;
      }
      if (fVar2 < 1.0) {
        if (0.0 < fVar2) {
          local_20 = (uint)(longlong)ROUND(fVar2 * 255.0 + fVar4);
          local_2c = local_20;
        }
        else {
          local_2c = 0;
        }
      }
      else {
        local_2c = 0xff;
      }
      if (fVar3 < 1.0) {
        if (0.0 < fVar3) {
          local_20 = (uint)(longlong)ROUND(fVar3 * 255.0 + fVar4);
        }
        else {
          local_20 = 0;
        }
      }
      else {
        local_20 = 0xff;
      }
      puVar9[6] = ((uVar10 | 0xffffff00) << 8 | local_2c) << 8 | local_20;
      uVar5 = 0;
      if (*(short *)(param_6 + uVar8 * 8) == 0) {
LAB_00736cfe:
        puVar9 = (undefined4 *)(iVar7 + 0x24 + (uVar8 * 0xd + (uint)uVar5) * 4);
        uVar8 = (uint)(ushort)(2 - uVar5);
        do {
          puVar9[2] = 0;
          *puVar9 = 0;
          puVar9 = puVar9 + 1;
          uVar8 = uVar8 - 1;
        } while (uVar8 != 0);
      }
      else {
        do {
          uVar10 = (uint)uVar5;
          iVar11 = uVar8 * 0xd + uVar10;
          *(float *)(iVar7 + 0x2c + iVar11 * 4) =
               (float)*(ushort *)(*(int *)(param_6 + 4 + uVar8 * 8) + 4 + uVar10 * 8);
          uVar5 = uVar5 + 1;
          *(undefined4 *)(iVar7 + 0x24 + iVar11 * 4) =
               *(undefined4 *)(*(int *)(param_6 + 4 + uVar8 * 8) + uVar10 * 8);
        } while (uVar5 < *(ushort *)(param_6 + uVar8 * 8));
        if (uVar5 < 2) goto LAB_00736cfe;
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ushort *)(in_ECX + 0x10));
  }
  FUN_007377f0(iVar7);
  FUN_0070a260(iVar7);
  return;
}



============================================================
DISASSEMBLY
============================================================
00736b10 : PUSH EBP
00736b11 : MOV EBP,ESP
00736b13 : AND ESP,0xfffffff8
00736b16 : SUB ESP,0x2c
00736b19 : PUSH EBX
00736b1a : PUSH ESI
00736b1b : MOV ESI,ECX
00736b1d : MOVZX ECX,word ptr [ESI + 0x10]
00736b21 : IMUL ECX,ECX,0x34
00736b24 : PUSH EDI
00736b25 : MOV dword ptr [ESP + 0x1c],ESI
00736b29 : CALL 0x0070a3a0
00736b2e : MOV EDI,EAX
00736b30 : XOR EAX,EAX
00736b32 : XOR ECX,ECX
00736b34 : MOV dword ptr [ESP + 0x18],EAX
00736b38 : CMP CX,word ptr [ESI + 0x10]
00736b3c : JNC 0x00736d42
00736b42 : FLD float ptr [0x00cdf130]
00736b48 : MOV EBX,dword ptr [EBP + 0x1c]
00736b4b : MOVSS XMM4,dword ptr [0x00c10fc4]
00736b53 : FLD float ptr [0x00d72c24]
00736b59 : XORPS XMM2,XMM2
00736b5c : MOV ESI,dword ptr [EBP + 0x8]
00736b5f : MOVZX ECX,AX
00736b62 : MOV EDX,ECX
00736b64 : IMUL EDX,EDX,0x34
00736b67 : ADD EDX,EDI
00736b69 : LEA EAX,[ECX + ECX*0x2]
00736b6c : ADD EAX,EAX
00736b6e : ADD EAX,EAX
00736b70 : FLD float ptr [EAX + ESI*0x1]
00736b73 : FSTP float ptr [EDX]
00736b75 : FLD float ptr [EAX + ESI*0x1 + 0x4]
00736b79 : FSTP float ptr [EDX + 0x4]
00736b7c : FLD float ptr [EAX + ESI*0x1 + 0x8]
00736b80 : MOV ESI,dword ptr [EBP + 0xc]
00736b83 : FSTP float ptr [EDX + 0x8]
00736b86 : FLD float ptr [EAX + ESI*0x1]
00736b89 : FSTP float ptr [EDX + 0xc]
00736b8c : FLD float ptr [EAX + ESI*0x1 + 0x4]
00736b90 : FSTP float ptr [EDX + 0x10]
00736b93 : FLD float ptr [EAX + ESI*0x1 + 0x8]
00736b97 : MOV ESI,dword ptr [EBP + 0x10]
00736b9a : FSTP float ptr [EDX + 0x14]
00736b9d : FLD float ptr [ESI + ECX*0x8]
00736ba0 : FSTP float ptr [EDX + 0x1c]
00736ba3 : FLD float ptr [ESI + ECX*0x8 + 0x4]
00736ba7 : MOV ESI,dword ptr [EBP + 0x14]
00736baa : FSTP float ptr [EDX + 0x20]
00736bad : MOVSS XMM0,dword ptr [EAX + ESI*0x1]
00736bb2 : COMISS XMM0,XMM4
00736bb5 : MOVSS XMM1,dword ptr [EAX + ESI*0x1 + 0x4]
00736bbb : MOVSS XMM3,dword ptr [EAX + ESI*0x1 + 0x8]
00736bc1 : MOVSS dword ptr [ESP + 0x28],XMM0
00736bc7 : MOVSS dword ptr [ESP + 0x2c],XMM1
00736bcd : MOVSS dword ptr [ESP + 0x30],XMM3
00736bd3 : JC 0x00736bdc
00736bd5 : MOV ESI,0xff
00736bda : JMP 0x00736c0f
00736bdc : COMISS XMM2,XMM0
00736bdf : JC 0x00736be5
00736be1 : XOR ESI,ESI
00736be3 : JMP 0x00736c0f
00736be5 : FLD float ptr [ESP + 0x28]
00736be9 : FNSTCW word ptr [ESP + 0x12]
00736bed : MOVZX EAX,word ptr [ESP + 0x12]
00736bf2 : FMUL ST2
00736bf4 : OR EAX,0xc00
00736bf9 : MOV dword ptr [ESP + 0x14],EAX
00736bfd : FADD ST0,ST1
00736bff : FLDCW word ptr [ESP + 0x14]
00736c03 : FISTP qword ptr [ESP + 0x20]
00736c07 : MOV ESI,dword ptr [ESP + 0x20]
00736c0b : FLDCW word ptr [ESP + 0x12]
00736c0f : COMISS XMM1,XMM4
00736c12 : JC 0x00736c1e
00736c14 : MOV dword ptr [ESP + 0x14],0xff
00736c1c : JMP 0x00736c5b
00736c1e : COMISS XMM2,XMM1
00736c21 : JC 0x00736c2d
00736c23 : MOV dword ptr [ESP + 0x14],0x0
00736c2b : JMP 0x00736c5b
00736c2d : FLD float ptr [ESP + 0x2c]
00736c31 : FNSTCW word ptr [ESP + 0x12]
00736c35 : MOVZX EAX,word ptr [ESP + 0x12]
00736c3a : FMUL ST2
00736c3c : OR EAX,0xc00
00736c41 : MOV dword ptr [ESP + 0x14],EAX
00736c45 : FADD ST0,ST1
00736c47 : FLDCW word ptr [ESP + 0x14]
00736c4b : FISTP qword ptr [ESP + 0x20]
00736c4f : MOV EAX,dword ptr [ESP + 0x20]
00736c53 : MOV dword ptr [ESP + 0x14],EAX
00736c57 : FLDCW word ptr [ESP + 0x12]
00736c5b : COMISS XMM3,XMM4
00736c5e : JC 0x00736c67
00736c60 : MOV EAX,0xff
00736c65 : JMP 0x00736c9a
00736c67 : COMISS XMM2,XMM3
00736c6a : JC 0x00736c70
00736c6c : XOR EAX,EAX
00736c6e : JMP 0x00736c9a
00736c70 : FLD float ptr [ESP + 0x30]
00736c74 : FNSTCW word ptr [ESP + 0x12]
00736c78 : MOVZX EAX,word ptr [ESP + 0x12]
00736c7d : FMUL ST2
00736c7f : OR EAX,0xc00
00736c84 : MOV dword ptr [ESP + 0x20],EAX
00736c88 : FADD ST0,ST1
00736c8a : FLDCW word ptr [ESP + 0x20]
00736c8e : FISTP qword ptr [ESP + 0x20]
00736c92 : MOV EAX,dword ptr [ESP + 0x20]
00736c96 : FLDCW word ptr [ESP + 0x12]
00736c9a : OR ESI,0xffffff00
00736ca0 : SHL ESI,0x8
00736ca3 : OR ESI,dword ptr [ESP + 0x14]
00736ca7 : SHL ESI,0x8
00736caa : OR ESI,EAX
00736cac : MOV dword ptr [EDX + 0x18],ESI
00736caf : XOR EDX,EDX
00736cb1 : XOR EAX,EAX
00736cb3 : CMP DX,word ptr [EBX + ECX*0x8]
00736cb7 : JNC 0x00736cfe
00736cb9 : MOV ESI,ECX
00736cbb : IMUL ESI,ESI,0xd
00736cbe : MOV dword ptr [ESP + 0x20],ESI
00736cc2 : JMP 0x00736cc8
00736cc4 : MOV ESI,dword ptr [ESP + 0x20]
00736cc8 : MOV EBX,dword ptr [EBX + ECX*0x8 + 0x4]
00736ccc : MOVZX EDX,AX
00736ccf : MOVZX EBX,word ptr [EBX + EDX*0x8 + 0x4]
00736cd4 : CVTSI2SS XMM0,EBX
00736cd8 : MOV EBX,dword ptr [EBP + 0x1c]
00736cdb : ADD ESI,EDX
00736cdd : MOVSS dword ptr [EDI + ESI*0x4 + 0x2c],XMM0
00736ce3 : MOV EBX,dword ptr [EBX + ECX*0x8 + 0x4]
00736ce7 : FLD float ptr [EBX + EDX*0x8]
00736cea : MOV EBX,dword ptr [EBP + 0x1c]
00736ced : INC EAX
00736cee : FSTP float ptr [EDI + ESI*0x4 + 0x24]
00736cf2 : CMP AX,word ptr [EBX + ECX*0x8]
00736cf6 : JC 0x00736cc4
00736cf8 : CMP AX,0x2
00736cfc : JNC 0x00736d25
00736cfe : IMUL ECX,ECX,0xd
00736d01 : MOVZX EDX,AX
00736d04 : ADD ECX,EDX
00736d06 : MOV EDX,0x2
00736d0b : SUB EDX,EAX
00736d0d : LEA ECX,[EDI + ECX*0x4 + 0x24]
00736d11 : MOVZX EAX,DX
00736d14 : MOVSS dword ptr [ECX + 0x8],XMM2
00736d19 : MOVSS dword ptr [ECX],XMM2
00736d1d : ADD ECX,0x4
00736d20 : SUB EAX,0x1
00736d23 : JNZ 0x00736d14
00736d25 : MOV EAX,dword ptr [ESP + 0x18]
00736d29 : MOV ECX,dword ptr [ESP + 0x1c]
00736d2d : INC EAX
00736d2e : MOV dword ptr [ESP + 0x18],EAX
00736d32 : CMP AX,word ptr [ECX + 0x10]
00736d36 : JC 0x00736b5c
00736d3c : FSTP ST1
00736d3e : MOV ESI,ECX
00736d40 : FSTP ST0
00736d42 : PUSH EDI
00736d43 : MOV ECX,ESI
00736d45 : CALL 0x007377f0
00736d4a : PUSH EDI
00736d4b : CALL 0x0070a260
00736d50 : ADD ESP,0x4
00736d53 : POP EDI
00736d54 : POP ESI
00736d55 : POP EBX
00736d56 : MOV ESP,EBP
00736d58 : POP EBP
00736d59 : RET 0x18
