PROGRAM  : Maestia.exe
FUNCTION : FUN_00726660
ENTRY    : 00726660
BODY     : [[00726660, 00726a27]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00726660(int param_1)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  uint uVar5;
  DWORD DVar6;
  undefined4 *puVar7;
  int iVar8;
  int *piVar9;
  float fVar10;
  undefined1 local_a8 [8];
  undefined1 local_a0 [8];
  LPCRITICAL_SECTION local_98;
  char *local_94;
  undefined4 local_90;
  int local_8c;
  undefined4 local_88;
  int local_84;
  float local_80;
  undefined1 local_7c [4];
  int local_78;
  int *local_74;
  char local_6d;
  int *local_6c;
  undefined1 local_68 [32];
  int local_48;
  float local_24;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b18132;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = uVar5;
  if (*(int *)(param_1 + 0x6c) == 0) {
    DVar6 = GetTickCount();
    *(DWORD *)(param_1 + 0x6c) = DVar6;
    goto LAB_00726a0a;
  }
  DVar6 = GetTickCount();
  iVar8 = DVar6 - *(int *)(param_1 + 0x6c);
  fVar10 = (float)iVar8;
  if (iVar8 < 0) {
    fVar10 = fVar10 + 4.2949673e+09;
  }
  local_74 = (int *)(fVar10 * 0.001);
  *(DWORD *)(param_1 + 0x6c) = DVar6;
  local_98 = (LPCRITICAL_SECTION)(param_1 + 0xd4);
  local_80 = 0.0;
  local_8c = 0;
  local_94 = ".\\Gui\\AvaUIBattleMsg.cpp";
  local_90 = 0xbb;
  local_88 = 1;
  FUN_006ef1a0(&local_98);
  local_8 = 0;
  local_6c = (int *)**(int **)(param_1 + 0x20);
  if (local_6c != *(int **)(param_1 + 0x20)) {
    do {
      piVar2 = local_6c;
      FUN_004437f0((int)local_6c + 0x58);
      if (local_78 == *(int *)(param_1 + 0x14)) {
        fVar10 = *(float *)((int)piVar2 + 0x50);
      }
      else {
        fVar10 = *(float *)(local_78 + 0x10);
      }
      if (0.0 < fVar10) {
        local_80 = ((float)local_74 / fVar10) * 9.0;
      }
      fVar10 = *(float *)((int)piVar2 + 0x44) + local_80;
      *(float *)((int)piVar2 + 0x44) = fVar10;
      if (fVar10 <= 15.0) {
        FUN_004c94c0(uVar5);
      }
      else {
        local_6c = (int *)FUN_004c7c40(param_1 + 0x1c,local_7c,piVar2);
        local_6c = (int *)*local_6c;
      }
    } while (local_6c != (int *)*(int *)(param_1 + 0x20));
  }
  local_6c = (int *)**(int **)(param_1 + 0x14);
  if (local_6c != *(int **)(param_1 + 0x14)) {
    do {
      piVar2 = *(int **)(param_1 + 0x20);
      piVar9 = (int *)*piVar2;
      if (piVar9 == piVar2) {
LAB_0072681f:
        puVar7 = (undefined4 *)FUN_0042b2c0(param_1 + 0x10,local_7c,local_6c);
        local_6c = (int *)*puVar7;
      }
      else {
        do {
          if (local_6c[3] == piVar9[0x16]) break;
          if (*(char *)((int)piVar9 + 0x5d) == '\0') {
            piVar3 = (int *)piVar9[2];
            if (*(char *)((int)piVar3 + 0x5d) == '\0') {
              cVar1 = *(char *)(*piVar3 + 0x5d);
              piVar9 = piVar3;
              piVar3 = (int *)*piVar3;
              while (cVar1 == '\0') {
                cVar1 = *(char *)(*piVar3 + 0x5d);
                piVar9 = piVar3;
                piVar3 = (int *)*piVar3;
              }
            }
            else {
              cVar1 = *(char *)(piVar9[1] + 0x5d);
              piVar4 = (int *)piVar9[1];
              piVar3 = piVar9;
              while ((piVar9 = piVar4, cVar1 == '\0' && (piVar3 == (int *)piVar9[2]))) {
                cVar1 = *(char *)(piVar9[1] + 0x5d);
                piVar4 = (int *)piVar9[1];
                piVar3 = piVar9;
              }
            }
          }
        } while (piVar9 != piVar2);
        if (piVar9 == piVar2) goto LAB_0072681f;
        FUN_00416210();
      }
    } while (local_6c != *(int **)(param_1 + 0x14));
  }
  iVar8 = *(int *)(param_1 + 0xc);
  if (iVar8 != 0) {
    piVar2 = *(int **)(param_1 + 0x20);
    local_6c = (int *)*piVar2;
    local_6d = '\x01';
    if (local_6c != piVar2) {
      do {
        if ((float)local_6c[0x11] <= 3.0 && (float)local_6c[0x11] != 3.0) {
          local_6d = '\0';
        }
        FUN_004c94c0();
      } while (local_6c != piVar2);
      if (local_6d == '\0') goto joined_r0x007269f1;
    }
    if ((iVar8 != 0) &&
       (local_6c = (int *)**(int **)(param_1 + 8), local_6c != *(int **)(param_1 + 8))) {
      do {
        piVar2 = local_6c;
        if (local_6c[0xb] == 0) {
          puVar7 = (undefined4 *)FUN_004c7830(param_1 + 4,local_7c,local_6c);
          local_6c = (int *)*puVar7;
        }
        else {
          local_74 = local_6c + 3;
          FUN_004c7500(local_68);
          local_8 = CONCAT31(local_8._1_3_,1);
          FUN_004c8a80(param_1 + 0x1c,local_a0,local_68);
          if (piVar2[0xb] != 0) {
            FUN_0044cb00(*(undefined4 *)(piVar2[8] + piVar2[10] * 4));
            piVar2[10] = piVar2[10] + 1;
            if ((uint)piVar2[9] <= (uint)piVar2[10]) {
              piVar2[10] = 0;
            }
            piVar9 = piVar2 + 0xb;
            *piVar9 = *piVar9 + -1;
            if (*piVar9 == 0) {
              piVar2[10] = 0;
            }
          }
          if (local_48 != 0) {
            FUN_00405eb0(local_68,0,0xffffffff);
            *(undefined1 *)(param_1 + 0x4c) = 1;
          }
          piVar2 = local_74;
          FUN_004437f0(local_74);
          if (local_78 == *(int *)(param_1 + 0x14)) {
            local_84 = *piVar2;
            local_80 = local_24;
            FUN_00451e00(local_a8,&local_84);
          }
          else {
            *(float *)(local_78 + 0x10) = local_24;
          }
          FUN_0040bd50();
          local_8 = local_8 & 0xffffff00;
          FUN_0044cb00(local_68);
        }
      } while (local_6c != *(int **)(param_1 + 8));
    }
  }
joined_r0x007269f1:
  local_8 = 0xffffffff;
  if (local_8c != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_98);
    local_8c = 0;
  }
LAB_00726a0a:
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00726660 : PUSH EBP
00726661 : MOV EBP,ESP
00726663 : PUSH -0x1
00726665 : PUSH 0xb18132
0072666a : MOV EAX,FS:[0x0]
00726670 : PUSH EAX
00726671 : SUB ESP,0x98
00726677 : MOV EAX,[0x00d66fa0]
0072667c : XOR EAX,EBP
0072667e : MOV dword ptr [EBP + -0x14],EAX
00726681 : PUSH EBX
00726682 : PUSH ESI
00726683 : PUSH EDI
00726684 : PUSH EAX
00726685 : LEA EAX,[EBP + -0xc]
00726688 : MOV FS:[0x0],EAX
0072668e : MOV EBX,dword ptr [EBP + 0x8]
00726691 : XOR ESI,ESI
00726693 : CMP dword ptr [EBX + 0x6c],ESI
00726696 : JNZ 0x007266a6
00726698 : CALL dword ptr [0x00b850d8]
0072669e : MOV dword ptr [EBX + 0x6c],EAX
007266a1 : JMP 0x00726a0a
007266a6 : CALL dword ptr [0x00b850d8]
007266ac : MOV ECX,EAX
007266ae : SUB ECX,dword ptr [EBX + 0x6c]
007266b1 : MOV dword ptr [EBP + -0x70],ECX
007266b4 : FILD dword ptr [EBP + -0x70]
007266b7 : TEST ECX,ECX
007266b9 : JGE 0x007266c1
007266bb : FADD float ptr [0x00cdf0e0]
007266c1 : FMUL float ptr [0x00cdf128]
007266c7 : XORPS XMM0,XMM0
007266ca : MOV dword ptr [EBX + 0x6c],EAX
007266cd : LEA EAX,[EBP + 0xffffff6c]
007266d3 : LEA EDX,[EBX + 0xd4]
007266d9 : FSTP float ptr [EBP + -0x70]
007266dc : PUSH EAX
007266dd : MOVSS dword ptr [EBP + -0x7c],XMM0
007266e2 : MOV dword ptr [EBP + 0xffffff78],ESI
007266e8 : MOV dword ptr [EBP + 0xffffff6c],EDX
007266ee : MOV dword ptr [EBP + 0xffffff70],0xc01c5c
007266f8 : MOV dword ptr [EBP + 0xffffff74],0xbb
00726702 : MOV dword ptr [EBP + 0xffffff7c],0x1
0072670c : CALL 0x006ef1a0
00726711 : MOV dword ptr [EBP + -0x4],ESI
00726714 : MOV EAX,dword ptr [EBX + 0x20]
00726717 : MOV ESI,dword ptr [EAX]
00726719 : MOV dword ptr [EBP + -0x68],ESI
0072671c : CMP ESI,EAX
0072671e : JZ 0x007267b4
00726724 : LEA EDI,[EBX + 0x10]
00726727 : LEA ECX,[ESI + 0x58]
0072672a : PUSH ECX
0072672b : LEA EAX,[EBP + -0x74]
0072672e : MOV ECX,EDI
00726730 : CALL 0x004437f0
00726735 : MOV EAX,dword ptr [EBX + 0x14]
00726738 : MOV ECX,dword ptr [EBP + -0x74]
0072673b : CMP ECX,EAX
0072673d : JZ 0x00726746
0072673f : MOVSS XMM1,dword ptr [ECX + 0x10]
00726744 : JMP 0x0072674b
00726746 : MOVSS XMM1,dword ptr [ESI + 0x50]
0072674b : COMISS XMM1,dword ptr [0x00b9b0b4]
00726752 : JBE 0x0072676c
00726754 : MOVSS XMM0,dword ptr [EBP + -0x70]
00726759 : DIVSS XMM0,XMM1
0072675d : MULSS XMM0,dword ptr [0x00cdf584]
00726765 : MOVSS dword ptr [EBP + -0x7c],XMM0
0072676a : JMP 0x00726771
0072676c : MOVSS XMM0,dword ptr [EBP + -0x7c]
00726771 : MOVSS XMM1,dword ptr [ESI + 0x44]
00726776 : ADDSS XMM1,XMM0
0072677a : MOVAPS XMM0,XMM1
0072677d : COMISS XMM0,dword ptr [0x00cdf234]
00726784 : MOVSS dword ptr [ESI + 0x44],XMM1
00726789 : JBE 0x007267a0
0072678b : PUSH ESI
0072678c : LEA EDX,[EBP + -0x78]
0072678f : PUSH EDX
00726790 : LEA EAX,[EBX + 0x1c]
00726793 : PUSH EAX
00726794 : CALL 0x004c7c40
00726799 : MOV ESI,dword ptr [EAX]
0072679b : MOV dword ptr [EBP + -0x68],ESI
0072679e : JMP 0x007267ab
007267a0 : LEA EDX,[EBP + -0x68]
007267a3 : CALL 0x004c94c0
007267a8 : MOV ESI,dword ptr [EBP + -0x68]
007267ab : CMP ESI,dword ptr [EBX + 0x20]
007267ae : JNZ 0x00726727
007267b4 : MOV EAX,dword ptr [EBX + 0x14]
007267b7 : MOV EDX,dword ptr [EAX]
007267b9 : MOV dword ptr [EBP + -0x68],EDX
007267bc : CMP EDX,EAX
007267be : JZ 0x00726848
007267c4 : MOV ESI,dword ptr [EBX + 0x20]
007267c7 : MOV ECX,dword ptr [ESI]
007267c9 : CMP ECX,ESI
007267cb : JZ 0x0072681f
007267cd : MOV EDI,dword ptr [EDX + 0xc]
007267d0 : CMP EDI,dword ptr [ECX + 0x58]
007267d3 : JZ 0x0072681b
007267d5 : CMP byte ptr [ECX + 0x5d],0x0
007267d9 : JNZ 0x00726817
007267db : MOV EAX,dword ptr [ECX + 0x8]
007267de : CMP byte ptr [EAX + 0x5d],0x0
007267e2 : JNZ 0x007267fc
007267e4 : MOV ECX,EAX
007267e6 : MOV EAX,dword ptr [ECX]
007267e8 : CMP byte ptr [EAX + 0x5d],0x0
007267ec : JNZ 0x00726817
007267ee : MOV EDI,EDI
007267f0 : MOV ECX,EAX
007267f2 : MOV EAX,dword ptr [ECX]
007267f4 : CMP byte ptr [EAX + 0x5d],0x0
007267f8 : JZ 0x007267f0
007267fa : JMP 0x00726817
007267fc : MOV EAX,dword ptr [ECX + 0x4]
007267ff : CMP byte ptr [EAX + 0x5d],0x0
00726803 : JNZ 0x00726815
00726805 : CMP ECX,dword ptr [EAX + 0x8]
00726808 : JNZ 0x00726815
0072680a : MOV ECX,EAX
0072680c : MOV EAX,dword ptr [EAX + 0x4]
0072680f : CMP byte ptr [EAX + 0x5d],0x0
00726813 : JZ 0x00726805
00726815 : MOV ECX,EAX
00726817 : CMP ECX,ESI
00726819 : JNZ 0x007267d0
0072681b : CMP ECX,ESI
0072681d : JNZ 0x00726834
0072681f : PUSH EDX
00726820 : LEA ECX,[EBP + -0x78]
00726823 : PUSH ECX
00726824 : LEA EDX,[EBX + 0x10]
00726827 : PUSH EDX
00726828 : CALL 0x0042b2c0
0072682d : MOV EDX,dword ptr [EAX]
0072682f : MOV dword ptr [EBP + -0x68],EDX
00726832 : JMP 0x0072683f
00726834 : LEA EDX,[EBP + -0x68]
00726837 : CALL 0x00416210
0072683c : MOV EDX,dword ptr [EBP + -0x68]
0072683f : CMP EDX,dword ptr [EBX + 0x14]
00726842 : JNZ 0x007267c4
00726848 : MOV EDI,dword ptr [EBX + 0xc]
0072684b : TEST EDI,EDI
0072684d : JNZ 0x0072686e
0072684f : MOV dword ptr [EBP + -0x4],0xffffffff
00726856 : CMP dword ptr [EBP + 0xffffff78],EDI
0072685c : JZ 0x00726a0a
00726862 : MOV EAX,dword ptr [EBP + 0xffffff6c]
00726868 : PUSH EAX
00726869 : JMP 0x007269fa
0072686e : MOV EAX,dword ptr [EBX + 0x20]
00726871 : MOV ECX,dword ptr [EAX]
00726873 : MOV dword ptr [EBP + -0x68],ECX
00726876 : MOV byte ptr [EBP + -0x69],0x1
0072687a : CMP ECX,EAX
0072687c : JZ 0x007268ab
0072687e : MOV ESI,EAX
00726880 : MOVSS XMM0,dword ptr [0x00cdf19c]
00726888 : COMISS XMM0,dword ptr [ECX + 0x44]
0072688c : JBE 0x00726892
0072688e : MOV byte ptr [EBP + -0x69],0x0
00726892 : LEA EDX,[EBP + -0x68]
00726895 : CALL 0x004c94c0
0072689a : MOV ECX,dword ptr [EBP + -0x68]
0072689d : CMP ECX,ESI
0072689f : JNZ 0x00726880
007268a1 : CMP byte ptr [EBP + -0x69],0x0
007268a5 : JZ 0x007269e3
007268ab : TEST EDI,EDI
007268ad : JZ 0x007269e3
007268b3 : MOV EAX,dword ptr [EBX + 0x8]
007268b6 : MOV ESI,dword ptr [EAX]
007268b8 : MOV dword ptr [EBP + -0x68],ESI
007268bb : CMP ESI,EAX
007268bd : JZ 0x007269e3
007268c3 : CMP dword ptr [ESI + 0x2c],0x0
007268c7 : JNZ 0x007268e1
007268c9 : PUSH ESI
007268ca : LEA EDX,[EBP + -0x78]
007268cd : PUSH EDX
007268ce : LEA EAX,[EBX + 0x4]
007268d1 : PUSH EAX
007268d2 : CALL 0x004c7830
007268d7 : MOV ESI,dword ptr [EAX]
007268d9 : MOV dword ptr [EBP + -0x68],ESI
007268dc : JMP 0x007269da
007268e1 : MOV EAX,dword ptr [ESI + 0x28]
007268e4 : LEA ECX,[ESI + 0xc]
007268e7 : MOV dword ptr [EBP + -0x70],ECX
007268ea : MOV ECX,dword ptr [ECX + 0x4]
007268ed : TEST ECX,ECX
007268ef : JZ 0x007268f5
007268f1 : MOV EDX,dword ptr [ECX]
007268f3 : JMP 0x007268f7
007268f5 : XOR EDX,EDX
007268f7 : CMP dword ptr [EDX + 0x14],EAX
007268fa : JA 0x00726909
007268fc : TEST ECX,ECX
007268fe : JZ 0x00726904
00726900 : MOV EDX,dword ptr [ECX]
00726902 : JMP 0x00726906
00726904 : XOR EDX,EDX
00726906 : SUB EAX,dword ptr [EDX + 0x14]
00726909 : TEST ECX,ECX
0072690b : JZ 0x00726911
0072690d : MOV ECX,dword ptr [ECX]
0072690f : JMP 0x00726913
00726911 : XOR ECX,ECX
00726913 : MOV ECX,dword ptr [ECX + 0x10]
00726916 : MOV EDI,dword ptr [ECX + EAX*0x4]
00726919 : LEA EDX,[EBP + -0x64]
0072691c : PUSH EDX
0072691d : CALL 0x004c7500
00726922 : MOV byte ptr [EBP + -0x4],0x1
00726926 : LEA EAX,[EBP + -0x64]
00726929 : PUSH EAX
0072692a : LEA ECX,[EBP + 0xffffff64]
00726930 : PUSH ECX
00726931 : LEA EDX,[EBX + 0x1c]
00726934 : PUSH EDX
00726935 : CALL 0x004c8a80
0072693a : XOR EDI,EDI
0072693c : CMP dword ptr [ESI + 0x2c],EDI
0072693f : JZ 0x00726967
00726941 : MOV EAX,dword ptr [ESI + 0x28]
00726944 : MOV ECX,dword ptr [ESI + 0x20]
00726947 : MOV EAX,dword ptr [ECX + EAX*0x4]
0072694a : PUSH EAX
0072694b : CALL 0x0044cb00
00726950 : INC dword ptr [ESI + 0x28]
00726953 : MOV EAX,dword ptr [ESI + 0x28]
00726956 : CMP dword ptr [ESI + 0x24],EAX
00726959 : JA 0x0072695e
0072695b : MOV dword ptr [ESI + 0x28],EDI
0072695e : ADD dword ptr [ESI + 0x2c],-0x1
00726962 : JNZ 0x00726967
00726964 : MOV dword ptr [ESI + 0x28],EDI
00726967 : CMP dword ptr [EBP + -0x44],EDI
0072696a : JZ 0x0072697f
0072696c : PUSH -0x1
0072696e : PUSH EDI
0072696f : LEA EDX,[EBP + -0x64]
00726972 : PUSH EDX
00726973 : LEA ECX,[EBX + 0x50]
00726976 : CALL 0x00405eb0
0072697b : MOV byte ptr [EBX + 0x4c],0x1
0072697f : MOV EDI,dword ptr [EBP + -0x70]
00726982 : LEA ESI,[EBX + 0x10]
00726985 : PUSH EDI
00726986 : LEA EAX,[EBP + -0x74]
00726989 : MOV ECX,ESI
0072698b : CALL 0x004437f0
00726990 : MOV EAX,dword ptr [EBX + 0x14]
00726993 : MOV ECX,dword ptr [EBP + -0x74]
00726996 : MOVSS XMM0,dword ptr [EBP + -0x20]
0072699b : CMP ECX,EAX
0072699d : JNZ 0x007269bd
0072699f : MOV EAX,dword ptr [EDI]
007269a1 : LEA ECX,[EBP + -0x80]
007269a4 : PUSH ECX
007269a5 : LEA EDX,[EBP + 0xffffff5c]
007269ab : MOV dword ptr [EBP + -0x80],EAX
007269ae : PUSH EDX
007269af : MOV EAX,ESI
007269b1 : MOVSS dword ptr [EBP + -0x7c],XMM0
007269b6 : CALL 0x00451e00
007269bb : JMP 0x007269c2
007269bd : MOVSS dword ptr [ECX + 0x10],XMM0
007269c2 : LEA EDX,[EBP + -0x68]
007269c5 : CALL 0x0040bd50
007269ca : MOV byte ptr [EBP + -0x4],0x0
007269ce : LEA EAX,[EBP + -0x64]
007269d1 : PUSH EAX
007269d2 : CALL 0x0044cb00
007269d7 : MOV ESI,dword ptr [EBP + -0x68]
007269da : CMP ESI,dword ptr [EBX + 0x8]
007269dd : JNZ 0x007268c3
007269e3 : MOV dword ptr [EBP + -0x4],0xffffffff
007269ea : CMP dword ptr [EBP + 0xffffff78],0x0
007269f1 : JZ 0x00726a0a
007269f3 : MOV ECX,dword ptr [EBP + 0xffffff6c]
007269f9 : PUSH ECX
007269fa : CALL dword ptr [0x00b8511c]
00726a00 : MOV dword ptr [EBP + 0xffffff78],0x0
00726a0a : MOV ECX,dword ptr [EBP + -0xc]
00726a0d : MOV dword ptr FS:[0x0],ECX
00726a14 : POP ECX
00726a15 : POP EDI
00726a16 : POP ESI
00726a17 : POP EBX
00726a18 : MOV ECX,dword ptr [EBP + -0x14]
00726a1b : XOR ECX,EBP
00726a1d : CALL 0x00633e6b
00726a22 : MOV ESP,EBP
00726a24 : POP EBP
00726a25 : RET 0x4
