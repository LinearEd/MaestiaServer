PROGRAM  : Maestia.exe
FUNCTION : FUN_00585540
ENTRY    : 00585540
BODY     : [[00585540, 005855b3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00585540(undefined4 param_1)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  uint uVar4;
  uint uVar5;
  undefined4 local_4;
  
  local_4 = 0x143;
  iVar2 = FUN_00515d60(in_ECX,0x10,&local_4);
  if (iVar2 == 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = FUN_005266c0(param_1);
  }
  uVar4 = *(int *)(in_ECX + 0x38) + 1;
  if (uVar4 < *(uint *)(in_ECX + 0x38)) {
    uVar5 = uVar4;
    if (*(uint *)(in_ECX + 0x3c) >> 1 <= uVar4) goto LAB_0058559e;
  }
  else {
    if (uVar4 < *(uint *)(in_ECX + 0x3c)) goto LAB_0058559e;
    uVar5 = (uVar4 >> 2) + uVar4;
  }
  FUN_005b5ef0((int *)(in_ECX + 0x34),uVar5);
LAB_0058559e:
  puVar1 = (undefined4 *)(*(int *)(in_ECX + 0x34) + -4 + uVar4 * 4);
  *(uint *)(in_ECX + 0x38) = uVar4;
  if (puVar1 != (undefined4 *)0x0) {
    *puVar1 = uVar3;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00585540 : PUSH ECX
00585541 : PUSH EBX
00585542 : PUSH ESI
00585543 : LEA EAX,[ESP + 0x8]
00585547 : PUSH EAX
00585548 : MOV ESI,ECX
0058554a : PUSH 0x10
0058554c : PUSH ESI
0058554d : MOV dword ptr [ESP + 0x14],0x143
00585555 : CALL 0x00515d60
0058555a : TEST EAX,EAX
0058555c : JZ 0x0058556e
0058555e : MOV ECX,dword ptr [ESP + 0x10]
00585562 : PUSH ECX
00585563 : MOV ECX,EAX
00585565 : CALL 0x005266c0
0058556a : MOV EBX,EAX
0058556c : JMP 0x00585570
0058556e : XOR EBX,EBX
00585570 : PUSH EDI
00585571 : LEA EDI,[ESI + 0x34]
00585574 : MOV ESI,dword ptr [EDI + 0x4]
00585577 : INC ESI
00585578 : CMP ESI,dword ptr [EDI + 0x4]
0058557b : JNC 0x00585589
0058557d : MOV EDX,dword ptr [EDI + 0x8]
00585580 : SHR EDX,0x1
00585582 : CMP ESI,EDX
00585584 : JNC 0x0058559e
00585586 : PUSH ESI
00585587 : JMP 0x00585596
00585589 : CMP ESI,dword ptr [EDI + 0x8]
0058558c : JC 0x0058559e
0058558e : MOV EAX,ESI
00585590 : SHR EAX,0x2
00585593 : ADD EAX,ESI
00585595 : PUSH EAX
00585596 : PUSH EDI
00585597 : MOV ECX,EDI
00585599 : CALL 0x005b5ef0
0058559e : MOV ECX,dword ptr [EDI]
005855a0 : LEA EAX,[ECX + ESI*0x4 + -0x4]
005855a4 : MOV dword ptr [EDI + 0x4],ESI
005855a7 : POP EDI
005855a8 : TEST EAX,EAX
005855aa : JZ 0x005855ae
005855ac : MOV dword ptr [EAX],EBX
005855ae : POP ESI
005855af : POP EBX
005855b0 : POP ECX
005855b1 : RET 0x4
