PROGRAM  : Maestia.exe
FUNCTION : FUN_006955f0
ENTRY    : 006955f0
BODY     : [[006955f0, 00695756]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006955f0(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  int unaff_ESI;
  int unaff_EDI;
  int local_8;
  undefined4 local_4;
  
  uVar2 = *(undefined4 *)(unaff_EDI + 0x1c);
  *(undefined4 *)(unaff_ESI + 0x84) = 0;
  *(undefined4 *)(unaff_ESI + 0x88) = 0;
  *(undefined4 *)(unaff_ESI + 0x8c) = 0;
  local_4 = FUN_00687830();
  iVar1 = FUN_00687bd0();
  if (local_8 != 0) {
    return local_8;
  }
  if ((((iVar1 != 0x10000) && (iVar1 != 0x74746366)) && (iVar1 != 0x4f54544f)) &&
     ((iVar1 != 0x74727565 && (iVar1 != 0x20000)))) {
    return 2;
  }
  *(undefined4 *)(unaff_ESI + 0x84) = 0x74746366;
  if (iVar1 == 0x74746366) {
    local_8 = FUN_006889e0();
    if (local_8 == 0) {
      uVar2 = FUN_0068a220(uVar2,4,0,*(undefined4 *)(unaff_ESI + 0x8c),0,&local_8);
      *(undefined4 *)(unaff_ESI + 0x90) = uVar2;
      if ((local_8 == 0) && (local_8 = FUN_00688900(), local_8 == 0)) {
        iVar1 = 0;
        local_8 = 0;
        if (0 < *(int *)(unaff_ESI + 0x8c)) {
          do {
            uVar2 = FUN_006879a0();
            *(undefined4 *)(*(int *)(unaff_ESI + 0x90) + iVar1 * 4) = uVar2;
            iVar1 = iVar1 + 1;
          } while (iVar1 < *(int *)(unaff_ESI + 0x8c));
        }
        FUN_006889b0();
        return local_8;
      }
    }
  }
  else {
    *(undefined4 *)(unaff_ESI + 0x88) = 0x10000;
    *(undefined4 *)(unaff_ESI + 0x8c) = 1;
    puVar3 = (undefined4 *)FUN_00688c00(uVar2,4,&local_8);
    *(undefined4 **)(unaff_ESI + 0x90) = puVar3;
    if (local_8 != 0) {
      return local_8;
    }
    *puVar3 = local_4;
    local_8 = 0;
  }
  return local_8;
}



============================================================
DISASSEMBLY
============================================================
006955f0 : SUB ESP,0x8
006955f3 : PUSH EBX
006955f4 : MOV EBX,dword ptr [EDI + 0x1c]
006955f7 : XOR EAX,EAX
006955f9 : PUSH EBP
006955fa : LEA EBP,[ESI + 0x84]
00695600 : PUSH EDI
00695601 : MOV dword ptr [EBP],EAX
00695604 : MOV dword ptr [ESI + 0x88],EAX
0069560a : MOV dword ptr [ESI + 0x8c],EAX
00695610 : CALL 0x00687830
00695615 : MOV dword ptr [ESP + 0x10],EAX
00695619 : LEA EAX,[ESP + 0xc]
0069561d : PUSH EAX
0069561e : PUSH EDI
0069561f : CALL 0x00687bd0
00695624 : MOV ECX,dword ptr [ESP + 0x14]
00695628 : ADD ESP,0xc
0069562b : TEST ECX,ECX
0069562d : JZ 0x00695637
0069562f : POP EBP
00695630 : MOV EAX,ECX
00695632 : POP EBX
00695633 : ADD ESP,0x8
00695636 : RET
00695637 : CMP EAX,0x10000
0069563c : JZ 0x00695665
0069563e : CMP EAX,0x74746366
00695643 : JZ 0x00695665
00695645 : CMP EAX,0x4f54544f
0069564a : JZ 0x00695665
0069564c : CMP EAX,0x74727565
00695651 : JZ 0x00695665
00695653 : CMP EAX,0x20000
00695658 : JZ 0x00695665
0069565a : POP EBP
0069565b : MOV EAX,0x2
00695660 : POP EBX
00695661 : ADD ESP,0x8
00695664 : RET
00695665 : MOV dword ptr [EBP],0x74746366
0069566c : CMP EAX,0x74746366
00695671 : JNZ 0x00695711
00695677 : PUSH EBP
00695678 : PUSH 0xbd96cc
0069567d : PUSH EDI
0069567e : CALL 0x006889e0
00695683 : ADD ESP,0xc
00695686 : MOV dword ptr [ESP + 0x8],EAX
0069568a : TEST EAX,EAX
0069568c : JNZ 0x00695751
00695692 : MOV EDX,dword ptr [ESI + 0x8c]
00695698 : LEA ECX,[ESP + 0x8]
0069569c : PUSH ECX
0069569d : PUSH EAX
0069569e : PUSH EDX
0069569f : PUSH EAX
006956a0 : PUSH 0x4
006956a2 : PUSH EBX
006956a3 : CALL 0x0068a220
006956a8 : MOV dword ptr [ESI + 0x90],EAX
006956ae : MOV EAX,dword ptr [ESP + 0x20]
006956b2 : ADD ESP,0x18
006956b5 : TEST EAX,EAX
006956b7 : JNZ 0x00695751
006956bd : MOV EAX,dword ptr [ESI + 0x8c]
006956c3 : ADD EAX,EAX
006956c5 : ADD EAX,EAX
006956c7 : PUSH EAX
006956c8 : PUSH EDI
006956c9 : CALL 0x00688900
006956ce : ADD ESP,0x8
006956d1 : MOV dword ptr [ESP + 0x8],EAX
006956d5 : TEST EAX,EAX
006956d7 : JNZ 0x00695751
006956d9 : XOR EBX,EBX
006956db : CMP dword ptr [ESI + 0x8c],EBX
006956e1 : JLE 0x006956fe
006956e3 : PUSH EDI
006956e4 : CALL 0x006879a0
006956e9 : MOV ECX,dword ptr [ESI + 0x90]
006956ef : MOV dword ptr [ECX + EBX*0x4],EAX
006956f2 : INC EBX
006956f3 : ADD ESP,0x4
006956f6 : CMP EBX,dword ptr [ESI + 0x8c]
006956fc : JL 0x006956e3
006956fe : PUSH EDI
006956ff : CALL 0x006889b0
00695704 : MOV EAX,dword ptr [ESP + 0xc]
00695708 : ADD ESP,0x4
0069570b : POP EBP
0069570c : POP EBX
0069570d : ADD ESP,0x8
00695710 : RET
00695711 : LEA EDX,[ESP + 0x8]
00695715 : PUSH EDX
00695716 : PUSH 0x4
00695718 : PUSH EBX
00695719 : MOV dword ptr [ESI + 0x88],0x10000
00695723 : MOV dword ptr [ESI + 0x8c],0x1
0069572d : CALL 0x00688c00
00695732 : MOV ECX,dword ptr [ESP + 0x14]
00695736 : ADD ESP,0xc
00695739 : MOV dword ptr [ESI + 0x90],EAX
0069573f : TEST ECX,ECX
00695741 : JNZ 0x0069562f
00695747 : MOV ECX,dword ptr [ESP + 0xc]
0069574b : MOV dword ptr [EAX],ECX
0069574d : MOV EAX,dword ptr [ESP + 0x8]
00695751 : POP EBP
00695752 : POP EBX
00695753 : ADD ESP,0x8
00695756 : RET
