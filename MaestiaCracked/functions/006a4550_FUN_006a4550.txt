PROGRAM  : Maestia.exe
FUNCTION : FUN_006a4550
ENTRY    : 006a4550
BODY     : [[006a4550, 006a4832]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a4550(undefined4 param_1,undefined4 *param_2,int param_3,int param_4,undefined4 param_5)

{
  char cVar1;
  char cVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  char *pcVar8;
  char *pcVar9;
  undefined4 *local_2c;
  undefined4 local_28;
  undefined2 local_24;
  undefined2 local_22;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  int local_8;
  undefined4 local_4;
  
  piVar4 = param_2 + 0x7d;
  *piVar4 = 0;
  *param_2 = 1;
  iVar5 = FUN_00686e00(param_2[0x18],"postscript-cmaps");
  param_2[0x78] = iVar5;
  iVar6 = FUN_00686de0(*(undefined4 *)(param_2[0x18] + 4),"psaux");
  param_2[0x79] = iVar6;
  iVar7 = FUN_006a42d0();
  if ((iVar7 == 0) && (-1 < param_3)) {
    if (param_3 != 0) {
      return 6;
    }
    param_2[4] = param_2[0x67];
    param_2[9] = 0;
    param_2[1] = 0;
    param_2[2] = 0x211;
    if (*(char *)(param_2 + 0x27) != '\0') {
      param_2[2] = 0x215;
    }
    pcVar9 = (char *)param_2[0x24];
    param_2[5] = pcVar9;
    param_2[6] = "Regular";
    if (pcVar9 == (char *)0x0) {
      if (param_2[0x5a] != 0) {
        param_2[5] = param_2[0x5a];
      }
    }
    else {
      pcVar8 = (char *)param_2[0x23];
      if (pcVar8 != (char *)0x0) {
        cVar1 = *pcVar8;
        while (cVar1 != '\0') {
          cVar2 = *pcVar9;
          if (cVar1 == cVar2) {
            pcVar9 = pcVar9 + 1;
LAB_006a4627:
            pcVar8 = pcVar8 + 1;
          }
          else {
            if ((cVar1 == ' ') || (cVar1 == '-')) goto LAB_006a4627;
            if ((cVar2 != ' ') && (cVar2 != '-')) {
              if (*pcVar9 == '\0') {
                param_2[6] = pcVar8;
              }
              break;
            }
            pcVar9 = pcVar9 + 1;
          }
          cVar1 = *pcVar8;
        }
      }
    }
    local_18 = param_2[0x7c];
    local_1c = param_2[0x7b];
    param_2[7] = 0;
    param_2[8] = 0;
    local_20 = 1;
    if (param_4 != 0) {
      local_20 = 0x11;
      local_8 = param_4;
      local_4 = param_5;
    }
    iVar7 = FUN_0068b060(*(undefined4 *)(param_2[0x18] + 4),&local_20,0,piVar4);
    if (iVar7 == 0) {
      FUN_00688470(*(undefined4 *)(*piVar4 + 0x58));
      iVar3 = *piVar4;
      param_2[0xd] = *(undefined4 *)(iVar3 + 0x34);
      param_2[0xe] = *(undefined4 *)(iVar3 + 0x38);
      param_2[0xf] = *(undefined4 *)(iVar3 + 0x3c);
      param_2[0x10] = *(undefined4 *)(iVar3 + 0x40);
      *(undefined2 *)(param_2 + 0x11) = *(undefined2 *)(iVar3 + 0x44);
      *(undefined2 *)((int)param_2 + 0x46) = *(undefined2 *)(iVar3 + 0x46);
      *(undefined2 *)(param_2 + 0x12) = *(undefined2 *)(iVar3 + 0x48);
      *(undefined2 *)((int)param_2 + 0x4a) = *(undefined2 *)(iVar3 + 0x4a);
      *(undefined2 *)(param_2 + 0x13) = *(undefined2 *)(iVar3 + 0x4c);
      *(undefined2 *)((int)param_2 + 0x4e) = *(undefined2 *)(iVar3 + 0x4e);
      *(undefined2 *)(param_2 + 0x14) = *(undefined2 *)((int)param_2 + 0x9e);
      *(undefined2 *)((int)param_2 + 0x52) = *(undefined2 *)(param_2 + 0x28);
      param_2[3] = 0;
      if (param_2[0x26] != 0) {
        param_2[3] = 1;
      }
      if ((*(byte *)(iVar3 + 0xc) & 2) != 0) {
        param_2[3] = param_2[3] | 2;
      }
      if ((*(byte *)(iVar3 + 8) & 0x20) != 0) {
        param_2[2] = param_2[2] | 0x20;
      }
      if ((iVar5 != 0) && (iVar6 != 0)) {
        piVar4 = *(int **)(iVar6 + 0x14);
        local_2c = param_2;
        local_24 = 3;
        local_22 = 1;
        local_28 = 0x756e6963;
        FUN_0068a570(piVar4[3],0,&local_2c,0);
        local_24 = 7;
        switch(param_2[0x5b]) {
        case 1:
          local_28 = 0x41444243;
          local_22 = 2;
          iVar5 = piVar4[2];
          break;
        case 2:
          local_28 = 0x41444f42;
          local_22 = 0;
          iVar5 = *piVar4;
          break;
        case 3:
          local_28 = 0x6c617431;
          local_22 = 3;
          iVar5 = piVar4[3];
          break;
        case 4:
          local_28 = 0x41444245;
          local_22 = 1;
          iVar5 = piVar4[1];
          break;
        default:
          goto switchD_006a47b6_default;
        }
        if (iVar5 != 0) {
          FUN_0068a570(iVar5,0,&local_2c,0);
        }
      }
    }
  }
switchD_006a47b6_default:
  return iVar7;
}



============================================================
DISASSEMBLY
============================================================
006a4550 : SUB ESP,0x30
006a4553 : PUSH EBX
006a4554 : PUSH EBP
006a4555 : PUSH ESI
006a4556 : MOV ESI,dword ptr [ESP + 0x44]
006a455a : MOV EAX,dword ptr [ESI + 0x60]
006a455d : PUSH 0xbd9890
006a4562 : LEA EBP,[ESI + 0x1f4]
006a4568 : PUSH EAX
006a4569 : MOV dword ptr [EBP],0x0
006a4570 : MOV dword ptr [ESI],0x1
006a4576 : CALL 0x00686e00
006a457b : MOV dword ptr [ESI + 0x1e0],EAX
006a4581 : MOV dword ptr [ESP + 0x4c],EAX
006a4585 : MOV EAX,dword ptr [ESI + 0x60]
006a4588 : MOV ECX,dword ptr [EAX + 0x4]
006a458b : PUSH 0xbe8af8
006a4590 : PUSH ECX
006a4591 : CALL 0x00686de0
006a4596 : ADD ESP,0x10
006a4599 : MOV EBX,ESI
006a459b : MOV dword ptr [ESP + 0xc],EAX
006a459f : MOV dword ptr [ESI + 0x1e4],EAX
006a45a5 : CALL 0x006a42d0
006a45aa : MOV EBX,EAX
006a45ac : XOR EDX,EDX
006a45ae : CMP EBX,EDX
006a45b0 : JNZ 0x006a482a
006a45b6 : MOV EAX,dword ptr [ESP + 0x48]
006a45ba : CMP EAX,EDX
006a45bc : JL 0x006a482a
006a45c2 : JZ 0x006a45d2
006a45c4 : POP ESI
006a45c5 : MOV EBX,0x6
006a45ca : POP EBP
006a45cb : MOV EAX,EBX
006a45cd : POP EBX
006a45ce : ADD ESP,0x30
006a45d1 : RET
006a45d2 : MOV EAX,dword ptr [ESI + 0x19c]
006a45d8 : MOV dword ptr [ESI + 0x10],EAX
006a45db : MOV dword ptr [ESI + 0x24],EDX
006a45de : MOV dword ptr [ESI + 0x4],EDX
006a45e1 : MOV dword ptr [ESI + 0x8],0x211
006a45e8 : CMP byte ptr [ESI + 0x9c],DL
006a45ee : JZ 0x006a45f7
006a45f0 : MOV dword ptr [ESI + 0x8],0x215
006a45f7 : MOV ECX,dword ptr [ESI + 0x90]
006a45fd : MOV EAX,ECX
006a45ff : PUSH EDI
006a4600 : MOV dword ptr [ESI + 0x14],ECX
006a4603 : MOV dword ptr [ESI + 0x18],0xbd91c4
006a460a : CMP EAX,EDX
006a460c : JZ 0x006a464f
006a460e : MOV ECX,dword ptr [ESI + 0x8c]
006a4614 : MOV EDI,EAX
006a4616 : CMP ECX,EDX
006a4618 : JZ 0x006a465c
006a461a : MOV AL,byte ptr [ECX]
006a461c : TEST AL,AL
006a461e : JZ 0x006a465c
006a4620 : MOV DL,byte ptr [EDI]
006a4622 : CMP AL,DL
006a4624 : JNZ 0x006a4630
006a4626 : INC EDI
006a4627 : INC ECX
006a4628 : MOV AL,byte ptr [ECX]
006a462a : TEST AL,AL
006a462c : JNZ 0x006a4620
006a462e : JMP 0x006a465c
006a4630 : CMP AL,0x20
006a4632 : JZ 0x006a4627
006a4634 : CMP AL,0x2d
006a4636 : JZ 0x006a4627
006a4638 : CMP DL,0x20
006a463b : JZ 0x006a4642
006a463d : CMP DL,0x2d
006a4640 : JNZ 0x006a4645
006a4642 : INC EDI
006a4643 : JMP 0x006a4628
006a4645 : CMP byte ptr [EDI],0x0
006a4648 : JNZ 0x006a465c
006a464a : MOV dword ptr [ESI + 0x18],ECX
006a464d : JMP 0x006a465c
006a464f : MOV EAX,dword ptr [ESI + 0x168]
006a4655 : CMP EAX,EDX
006a4657 : JZ 0x006a465c
006a4659 : MOV dword ptr [ESI + 0x14],EAX
006a465c : MOV EAX,dword ptr [ESI + 0x1f0]
006a4662 : MOV EDX,dword ptr [ESI + 0x1ec]
006a4668 : XOR ECX,ECX
006a466a : MOV dword ptr [ESP + 0x28],EAX
006a466e : MOV EAX,dword ptr [ESP + 0x50]
006a4672 : MOV EDI,0x1
006a4677 : MOV dword ptr [ESI + 0x1c],ECX
006a467a : MOV dword ptr [ESI + 0x20],ECX
006a467d : MOV dword ptr [ESP + 0x20],EDI
006a4681 : MOV dword ptr [ESP + 0x24],EDX
006a4685 : CMP EAX,ECX
006a4687 : JZ 0x006a469d
006a4689 : MOV EDX,dword ptr [ESP + 0x54]
006a468d : MOV dword ptr [ESP + 0x20],0x11
006a4695 : MOV dword ptr [ESP + 0x38],EAX
006a4699 : MOV dword ptr [ESP + 0x3c],EDX
006a469d : PUSH EBP
006a469e : PUSH ECX
006a469f : MOV ECX,dword ptr [ESI + 0x60]
006a46a2 : MOV EDX,dword ptr [ECX + 0x4]
006a46a5 : LEA EAX,[ESP + 0x28]
006a46a9 : PUSH EAX
006a46aa : PUSH EDX
006a46ab : CALL 0x0068b060
006a46b0 : MOV EBX,EAX
006a46b2 : ADD ESP,0x10
006a46b5 : TEST EBX,EBX
006a46b7 : JNZ 0x006a4829
006a46bd : MOV EAX,dword ptr [EBP]
006a46c0 : MOV ECX,dword ptr [EAX + 0x58]
006a46c3 : PUSH ECX
006a46c4 : CALL 0x00688470
006a46c9 : MOV EAX,dword ptr [EBP]
006a46cc : MOV EDX,dword ptr [EAX + 0x34]
006a46cf : MOV dword ptr [ESI + 0x34],EDX
006a46d2 : MOV ECX,dword ptr [EAX + 0x38]
006a46d5 : MOV dword ptr [ESI + 0x38],ECX
006a46d8 : MOV EDX,dword ptr [EAX + 0x3c]
006a46db : MOV dword ptr [ESI + 0x3c],EDX
006a46de : MOV ECX,dword ptr [EAX + 0x40]
006a46e1 : MOV dword ptr [ESI + 0x40],ECX
006a46e4 : MOVZX EDX,word ptr [EAX + 0x44]
006a46e8 : MOV word ptr [ESI + 0x44],DX
006a46ec : MOVZX ECX,word ptr [EAX + 0x46]
006a46f0 : MOV word ptr [ESI + 0x46],CX
006a46f4 : MOVZX EDX,word ptr [EAX + 0x48]
006a46f8 : MOV word ptr [ESI + 0x48],DX
006a46fc : MOVZX ECX,word ptr [EAX + 0x4a]
006a4700 : MOV word ptr [ESI + 0x4a],CX
006a4704 : MOVZX EDX,word ptr [EAX + 0x4c]
006a4708 : MOV word ptr [ESI + 0x4c],DX
006a470c : MOVZX ECX,word ptr [EAX + 0x4e]
006a4710 : MOV word ptr [ESI + 0x4e],CX
006a4714 : MOVZX EDX,word ptr [ESI + 0x9e]
006a471b : MOV word ptr [ESI + 0x50],DX
006a471f : MOVZX ECX,word ptr [ESI + 0xa0]
006a4726 : ADD ESP,0x4
006a4729 : MOV word ptr [ESI + 0x52],CX
006a472d : MOV dword ptr [ESI + 0xc],EBX
006a4730 : CMP dword ptr [ESI + 0x98],EBX
006a4736 : JZ 0x006a473b
006a4738 : MOV dword ptr [ESI + 0xc],EDI
006a473b : TEST byte ptr [EAX + 0xc],0x2
006a473f : JZ 0x006a4745
006a4741 : OR dword ptr [ESI + 0xc],0x2
006a4745 : TEST byte ptr [EAX + 0x8],0x20
006a4749 : JZ 0x006a474f
006a474b : OR dword ptr [ESI + 0x8],0x20
006a474f : CMP dword ptr [ESP + 0x48],0x0
006a4754 : JZ 0x006a4829
006a475a : MOV EAX,dword ptr [ESP + 0x10]
006a475e : TEST EAX,EAX
006a4760 : JZ 0x006a4829
006a4766 : MOV EDI,dword ptr [EAX + 0x14]
006a4769 : PUSH 0x0
006a476b : LEA ECX,[ESP + 0x18]
006a476f : MOV EDX,0x3
006a4774 : MOV EAX,0x1
006a4779 : PUSH ECX
006a477a : MOV dword ptr [ESP + 0x1c],ESI
006a477e : MOV word ptr [ESP + 0x24],DX
006a4783 : MOV word ptr [ESP + 0x26],AX
006a4788 : MOV dword ptr [ESP + 0x20],0x756e6963
006a4790 : MOV EDX,dword ptr [EDI + 0xc]
006a4793 : PUSH 0x0
006a4795 : PUSH EDX
006a4796 : CALL 0x0068a570
006a479b : MOV ESI,dword ptr [ESI + 0x16c]
006a47a1 : MOV EAX,0x7
006a47a6 : MOV word ptr [ESP + 0x2c],AX
006a47ab : LEA EAX,[ESI + -0x1]
006a47ae : ADD ESP,0x10
006a47b1 : CMP EAX,0x3
006a47b4 : JA 0x006a4829
006a47b6 : JMP dword ptr [EAX*0x4 + 0x6a4834]
006a47bd : XOR ECX,ECX
006a47bf : MOV dword ptr [ESP + 0x18],0x41444f42
006a47c7 : MOV word ptr [ESP + 0x1e],CX
006a47cc : MOV EDI,dword ptr [EDI]
006a47ce : JMP 0x006a4813
006a47d0 : MOV EDX,0x1
006a47d5 : MOV dword ptr [ESP + 0x18],0x41444245
006a47dd : MOV word ptr [ESP + 0x1e],DX
006a47e2 : MOV EDI,dword ptr [EDI + 0x4]
006a47e5 : JMP 0x006a4813
006a47e7 : MOV EAX,0x2
006a47ec : MOV dword ptr [ESP + 0x18],0x41444243
006a47f4 : MOV word ptr [ESP + 0x1e],AX
006a47f9 : MOV EDI,dword ptr [EDI + 0x8]
006a47fc : JMP 0x006a4813
006a47fe : MOV ECX,0x3
006a4803 : MOV dword ptr [ESP + 0x18],0x6c617431
006a480b : MOV word ptr [ESP + 0x1e],CX
006a4810 : MOV EDI,dword ptr [EDI + 0xc]
006a4813 : TEST EDI,EDI
006a4815 : JZ 0x006a4829
006a4817 : PUSH 0x0
006a4819 : LEA EDX,[ESP + 0x18]
006a481d : PUSH EDX
006a481e : PUSH 0x0
006a4820 : PUSH EDI
006a4821 : CALL 0x0068a570
006a4826 : ADD ESP,0x10
006a4829 : POP EDI
006a482a : POP ESI
006a482b : POP EBP
006a482c : MOV EAX,EBX
006a482e : POP EBX
006a482f : ADD ESP,0x30
006a4832 : RET
