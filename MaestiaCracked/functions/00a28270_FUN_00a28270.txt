PROGRAM  : Maestia.exe
FUNCTION : FUN_00a28270
ENTRY    : 00a28270
BODY     : [[00a28270, 00a285d8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a28270(undefined4 param_1,undefined4 param_2)

{
  code *pcVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int *piVar5;
  int unaff_EDI;
  float10 fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  int *local_3c;
  float *local_38;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3940b;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(short *)(unaff_EDI + 0x5ea) = *(short *)(unaff_EDI + 0x5ea) + 1;
  FUN_00404750(L"PrayObj_%d",*(undefined2 *)(unaff_EDI + 0x5ea),local_18);
  piVar5 = (int *)0x0;
  local_8 = 0;
  if (60000 < *(ushort *)(unaff_EDI + 0x5ea)) {
    *(undefined2 *)(unaff_EDI + 0x5ea) = 0;
  }
  local_3c = (int *)FUN_006f0760(0xf0,".\\Flow\\AvaGameZone.cpp",0x11aa,0);
  local_8._0_1_ = 1;
  if (local_3c != (int *)0x0) {
    piVar5 = (int *)FUN_00878490(local_3c);
  }
  local_8 = (uint)local_8._1_3_ << 8;
  local_48 = 0x3f800000;
  local_44 = 0x3f800000;
  local_40 = 0x3f800000;
  local_64 = 0;
  local_60 = 0;
  local_5c = 0;
  local_58 = 0x3f800000;
  local_54 = 0;
  local_50 = 0;
  local_4c = 0;
  iVar3 = (**(code **)(**(int **)(unaff_EDI + 0x164) + 0x20))
                    (local_34,&local_54,&local_64,&local_48);
  piVar5[0x12] = iVar3;
  if (iVar3 != 0) {
    FUN_008783c0(piVar5);
  }
  iVar3 = DAT_017251cc;
  piVar5[0xb] = 3;
  *(undefined1 *)(piVar5 + 0xc) = 1;
  fVar7 = (float)piVar5[4];
  if (0.0 < *(float *)(iVar3 + 0x34)) {
    fVar7 = *(float *)(iVar3 + 0x34);
  }
  fVar7 = 10.0 / (fVar7 * 1000.0);
  piVar5[0xd] = 0x42a00000;
  piVar5[0xe] = 0x42a00000;
  fVar8 = fVar7 * DAT_00d72c24;
  piVar5[0x10] = (int)fVar7;
  piVar5[0xf] = (int)fVar8;
  piVar5[0x33] = 0;
  piVar5[0x34] = 0x3f800000;
  *(undefined1 *)(piVar5 + 0x35) = 1;
  iVar3 = *(int *)(unaff_EDI + 0x180);
  if (iVar3 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = *(int *)(unaff_EDI + 0x188) - iVar3 >> 2;
  }
  local_38 = *(float **)(unaff_EDI + 0x184);
  local_3c = piVar5;
  if ((uint)((int)local_38 - iVar3 >> 2) < uVar4) {
    *local_38 = (float)piVar5;
    *(float **)(unaff_EDI + 0x184) = local_38 + 1;
  }
  else {
    FUN_0042fe80(unaff_EDI + 0x17c,local_38,&local_3c);
  }
  local_38 = (float *)FUN_00a1a840(param_2);
  if (local_38 == (float *)0x0) {
    local_38 = (float *)FUN_00a1a6d0(param_2);
    if (local_38 == (float *)0x0) {
      local_38 = (float *)FUN_00a1a780(param_2);
    }
  }
  iVar3 = FUN_00a1a840(param_1);
  if (iVar3 == 0) {
    iVar3 = FUN_00a1a6d0(param_1);
    if (iVar3 == 0) {
      iVar3 = FUN_00a1a780(param_1);
    }
  }
  if ((local_38 != (float *)0x0) && (iVar3 != 0)) {
    fVar7 = *(float *)((int)local_38 + 0x1a4) - *(float *)(iVar3 + 0x1a4);
    fVar8 = *(float *)((int)local_38 + 0x1a8) - *(float *)(iVar3 + 0x1a8);
    fVar9 = *(float *)((int)local_38 + 0x1ac) - *(float *)(iVar3 + 0x1ac);
    fVar6 = (float10)FUN_0040f460(fVar7 * fVar7 + fVar8 * fVar8 + fVar9 * fVar9);
    iVar2 = DAT_017251cc;
    local_3c = (int *)(float)fVar6;
    *(undefined1 *)(piVar5 + 0xc) = 1;
    fVar7 = (float)piVar5[piVar5[0xb] + 1];
    if (0.0 < *(float *)(iVar2 + 0x34)) {
      fVar7 = *(float *)(iVar2 + 0x34);
    }
    pcVar1 = *(code **)(*piVar5 + 0xc);
    fVar7 = (float)local_3c / (fVar7 * 1000.0);
    piVar5[0xd] = 0x42a00000;
    piVar5[0xe] = 0x42a00000;
    piVar5[0xf] = (int)(fVar7 * DAT_00d72c24);
    piVar5[0x10] = (int)fVar7;
    piVar5[0x33] = 0;
    piVar5[0x34] = 0x3f800000;
    *(undefined1 *)(piVar5 + 0x35) = 1;
    (*pcVar1)(iVar3);
  }
  local_8 = 0xffffffff;
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a28270 : PUSH EBP
00a28271 : MOV EBP,ESP
00a28273 : PUSH -0x1
00a28275 : PUSH 0xb3940b
00a2827a : MOV EAX,FS:[0x0]
00a28280 : PUSH EAX
00a28281 : SUB ESP,0x54
00a28284 : MOV EAX,[0x00d66fa0]
00a28289 : XOR EAX,EBP
00a2828b : MOV dword ptr [EBP + -0x14],EAX
00a2828e : PUSH EBX
00a2828f : PUSH ESI
00a28290 : PUSH EAX
00a28291 : LEA EAX,[EBP + -0xc]
00a28294 : MOV FS:[0x0],EAX
00a2829a : INC word ptr [EDI + 0x5ea]
00a282a1 : MOVZX EAX,word ptr [EDI + 0x5ea]
00a282a8 : MOV EBX,dword ptr [EBP + 0x10]
00a282ab : PUSH EAX
00a282ac : PUSH 0xcc06d4
00a282b1 : LEA ESI,[EBP + -0x30]
00a282b4 : CALL 0x00404750
00a282b9 : ADD ESP,0x8
00a282bc : XOR ESI,ESI
00a282be : MOV dword ptr [EBP + -0x4],ESI
00a282c1 : MOV ECX,0xea60
00a282c6 : CMP word ptr [EDI + 0x5ea],CX
00a282cd : JBE 0x00a282d8
00a282cf : XOR EDX,EDX
00a282d1 : MOV word ptr [EDI + 0x5ea],DX
00a282d8 : PUSH ESI
00a282d9 : PUSH 0x11aa
00a282de : PUSH 0xcc06ec
00a282e3 : PUSH 0xf0
00a282e8 : CALL 0x006f0760
00a282ed : ADD ESP,0x10
00a282f0 : MOV dword ptr [EBP + -0x38],EAX
00a282f3 : MOV byte ptr [EBP + -0x4],0x1
00a282f7 : CMP EAX,ESI
00a282f9 : JZ 0x00a28303
00a282fb : PUSH EAX
00a282fc : CALL 0x00878490
00a28301 : MOV ESI,EAX
00a28303 : MOV byte ptr [EBP + -0x4],0x0
00a28307 : XORPS XMM0,XMM0
00a2830a : MOVSS XMM1,dword ptr [0x00c10fc4]
00a28312 : MOV ECX,dword ptr [EDI + 0x164]
00a28318 : LEA EDX,[EBP + -0x44]
00a2831b : PUSH EDX
00a2831c : LEA EDX,[EBP + -0x60]
00a2831f : PUSH EDX
00a28320 : LEA EDX,[EBP + -0x50]
00a28323 : PUSH EDX
00a28324 : MOVSS dword ptr [EBP + -0x44],XMM1
00a28329 : MOVSS dword ptr [EBP + -0x40],XMM1
00a2832e : MOVSS dword ptr [EBP + -0x3c],XMM1
00a28333 : MOVSS dword ptr [EBP + -0x60],XMM0
00a28338 : MOVSS dword ptr [EBP + -0x5c],XMM0
00a2833d : MOVSS dword ptr [EBP + -0x58],XMM0
00a28342 : MOVSS dword ptr [EBP + -0x54],XMM1
00a28347 : MOVSS dword ptr [EBP + -0x50],XMM0
00a2834c : MOVSS dword ptr [EBP + -0x4c],XMM0
00a28351 : MOVSS dword ptr [EBP + -0x48],XMM0
00a28356 : MOV EAX,dword ptr [ECX]
00a28358 : MOV EAX,dword ptr [EAX + 0x20]
00a2835b : LEA EDX,[EBP + -0x30]
00a2835e : PUSH EDX
00a2835f : CALL EAX
00a28361 : MOV dword ptr [ESI + 0x48],EAX
00a28364 : TEST EAX,EAX
00a28366 : JZ 0x00a28373
00a28368 : MOV EAX,dword ptr [EBP + 0xc]
00a2836b : PUSH ESI
00a2836c : MOV ECX,EBX
00a2836e : CALL 0x008783c0
00a28373 : MOV ECX,dword ptr [0x017251cc]
00a28379 : XORPS XMM2,XMM2
00a2837c : MOV dword ptr [ESI + 0x2c],0x3
00a28383 : MOV byte ptr [ESI + 0x30],0x1
00a28387 : MOVSS XMM0,dword ptr [ECX + 0x34]
00a2838c : COMISS XMM0,XMM2
00a2838f : MOVSS XMM1,dword ptr [ESI + 0x10]
00a28394 : JBE 0x00a28399
00a28396 : MOVAPS XMM1,XMM0
00a28399 : MULSS XMM1,dword ptr [0x00cdf16c]
00a283a1 : MOVSS XMM0,dword ptr [0x00c18874]
00a283a9 : DIVSS XMM0,XMM1
00a283ad : MOVSS XMM1,dword ptr [0x00cdf4a4]
00a283b5 : MOVSS dword ptr [ESI + 0x34],XMM1
00a283ba : MOVSS dword ptr [ESI + 0x38],XMM1
00a283bf : MOVAPS XMM1,XMM0
00a283c2 : MULSS XMM1,dword ptr [0x00d72c24]
00a283ca : MOVSS dword ptr [ESI + 0x40],XMM0
00a283cf : MOVSS XMM0,dword ptr [0x00c10fc4]
00a283d7 : LEA EAX,[EDI + 0x17c]
00a283dd : MOVSS dword ptr [ESI + 0x3c],XMM1
00a283e2 : MOVSS dword ptr [ESI + 0xcc],XMM2
00a283ea : MOVSS dword ptr [ESI + 0xd0],XMM0
00a283f2 : MOV byte ptr [ESI + 0xd4],0x1
00a283f9 : MOV EDX,dword ptr [EAX + 0x4]
00a283fc : MOV dword ptr [EBP + -0x38],ESI
00a283ff : TEST EDX,EDX
00a28401 : JNZ 0x00a28407
00a28403 : XOR ECX,ECX
00a28405 : JMP 0x00a2840f
00a28407 : MOV ECX,dword ptr [EAX + 0xc]
00a2840a : SUB ECX,EDX
00a2840c : SAR ECX,0x2
00a2840f : MOV EBX,dword ptr [EAX + 0x8]
00a28412 : MOV dword ptr [EBP + -0x34],EBX
00a28415 : SUB EBX,EDX
00a28417 : SAR EBX,0x2
00a2841a : CMP EBX,ECX
00a2841c : MOV ECX,dword ptr [EBP + -0x34]
00a2841f : JNC 0x00a2842b
00a28421 : MOV dword ptr [ECX],ESI
00a28423 : ADD ECX,0x4
00a28426 : MOV dword ptr [EAX + 0x8],ECX
00a28429 : JMP 0x00a28436
00a2842b : LEA EDX,[EBP + -0x38]
00a2842e : PUSH EDX
00a2842f : PUSH ECX
00a28430 : PUSH EAX
00a28431 : CALL 0x0042fe80
00a28436 : MOV EBX,dword ptr [EBP + 0xc]
00a28439 : PUSH EBX
00a2843a : MOV ECX,EDI
00a2843c : CALL 0x00a1a840
00a28441 : MOV dword ptr [EBP + -0x34],EAX
00a28444 : TEST EAX,EAX
00a28446 : JNZ 0x00a28462
00a28448 : PUSH EBX
00a28449 : MOV ECX,EDI
00a2844b : CALL 0x00a1a6d0
00a28450 : MOV dword ptr [EBP + -0x34],EAX
00a28453 : TEST EAX,EAX
00a28455 : JNZ 0x00a28462
00a28457 : PUSH EBX
00a28458 : MOV ECX,EDI
00a2845a : CALL 0x00a1a780
00a2845f : MOV dword ptr [EBP + -0x34],EAX
00a28462 : MOV EDX,dword ptr [EBP + 0x8]
00a28465 : PUSH EDX
00a28466 : MOV ECX,EDI
00a28468 : CALL 0x00a1a840
00a2846d : MOV EBX,EAX
00a2846f : TEST EBX,EBX
00a28471 : JNZ 0x00a28491
00a28473 : MOV EAX,dword ptr [EBP + 0x8]
00a28476 : PUSH EAX
00a28477 : MOV ECX,EDI
00a28479 : CALL 0x00a1a6d0
00a2847e : MOV EBX,EAX
00a28480 : TEST EBX,EBX
00a28482 : JNZ 0x00a28491
00a28484 : MOV ECX,dword ptr [EBP + 0x8]
00a28487 : PUSH ECX
00a28488 : MOV ECX,EDI
00a2848a : CALL 0x00a1a780
00a2848f : MOV EBX,EAX
00a28491 : MOV EAX,dword ptr [EBP + -0x34]
00a28494 : TEST EAX,EAX
00a28496 : JZ 0x00a28591
00a2849c : TEST EBX,EBX
00a2849e : JZ 0x00a28591
00a284a4 : MOVSS XMM3,dword ptr [EBX + 0x1a4]
00a284ac : MOVSS XMM0,dword ptr [EAX + 0x1a4]
00a284b4 : MOVSS XMM4,dword ptr [EBX + 0x1a8]
00a284bc : MOVSS XMM1,dword ptr [EAX + 0x1a8]
00a284c4 : MOVSS XMM5,dword ptr [EBX + 0x1ac]
00a284cc : MOVSS XMM2,dword ptr [EAX + 0x1ac]
00a284d4 : SUBSS XMM0,XMM3
00a284d8 : MOVAPS XMM3,XMM0
00a284db : MULSS XMM3,XMM0
00a284df : SUBSS XMM1,XMM4
00a284e3 : MOVAPS XMM0,XMM1
00a284e6 : MULSS XMM0,XMM1
00a284ea : ADDSS XMM3,XMM0
00a284ee : SUBSS XMM2,XMM5
00a284f2 : MOVAPS XMM0,XMM2
00a284f5 : MULSS XMM0,XMM2
00a284f9 : PUSH ECX
00a284fa : ADDSS XMM3,XMM0
00a284fe : MOVSS dword ptr [ESP],XMM3
00a28503 : CALL 0x0040f460
00a28508 : FSTP float ptr [EBP + -0x38]
00a2850b : MOV EAX,[0x017251cc]
00a28510 : MOV EDX,dword ptr [ESI + 0x2c]
00a28513 : XORPS XMM2,XMM2
00a28516 : MOV byte ptr [ESI + 0x30],0x1
00a2851a : MOVSS XMM1,dword ptr [EAX + 0x34]
00a2851f : MOVSS XMM0,dword ptr [ESI + EDX*0x4 + 0x4]
00a28525 : ADD ESP,0x4
00a28528 : COMISS XMM1,XMM2
00a2852b : JBE 0x00a28530
00a2852d : MOVAPS XMM0,XMM1
00a28530 : MULSS XMM0,dword ptr [0x00cdf16c]
00a28538 : MOVSS XMM1,dword ptr [EBP + -0x38]
00a2853d : MOV EDX,dword ptr [ESI]
00a2853f : MOV EAX,dword ptr [EDX + 0xc]
00a28542 : DIVSS XMM1,XMM0
00a28546 : MOVSS XMM0,dword ptr [0x00cdf4a4]
00a2854e : MOVSS dword ptr [ESI + 0x34],XMM0
00a28553 : MOVSS dword ptr [ESI + 0x38],XMM0
00a28558 : MOVAPS XMM0,XMM1
00a2855b : MULSS XMM0,dword ptr [0x00d72c24]
00a28563 : MOVSS dword ptr [ESI + 0x3c],XMM0
00a28568 : MOVSS XMM0,dword ptr [0x00c10fc4]
00a28570 : PUSH EBX
00a28571 : MOV ECX,ESI
00a28573 : MOVSS dword ptr [ESI + 0x40],XMM1
00a28578 : MOVSS dword ptr [ESI + 0xcc],XMM2
00a28580 : MOVSS dword ptr [ESI + 0xd0],XMM0
00a28588 : MOV byte ptr [ESI + 0xd4],0x1
00a2858f : CALL EAX
00a28591 : MOV dword ptr [EBP + -0x4],0xffffffff
00a28598 : CMP dword ptr [EBP + -0x18],0x8
00a2859c : JC 0x00a285a6
00a2859e : MOV ECX,dword ptr [EBP + -0x2c]
00a285a1 : CALL 0x006f04e0
00a285a6 : XOR ECX,ECX
00a285a8 : MOV dword ptr [EBP + -0x18],0x7
00a285af : MOV dword ptr [EBP + -0x1c],0x0
00a285b6 : MOV word ptr [EBP + -0x2c],CX
00a285ba : MOV EAX,ESI
00a285bc : MOV ECX,dword ptr [EBP + -0xc]
00a285bf : MOV dword ptr FS:[0x0],ECX
00a285c6 : POP ECX
00a285c7 : POP ESI
00a285c8 : POP EBX
00a285c9 : MOV ECX,dword ptr [EBP + -0x14]
00a285cc : XOR ECX,EBP
00a285ce : CALL 0x00633e6b
00a285d3 : MOV ESP,EBP
00a285d5 : POP EBP
00a285d6 : RET 0xc
