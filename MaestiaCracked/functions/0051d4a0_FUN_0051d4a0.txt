PROGRAM  : Maestia.exe
FUNCTION : FUN_0051d4a0
ENTRY    : 0051d4a0
BODY     : [[0051d4a0, 0051d56b]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0051d4a0(void)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  int *piVar4;
  undefined1 *puVar5;
  undefined1 *puVar6;
  undefined1 auStack_40 [8];
  undefined1 auStack_38 [8];
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  GMatrix2D aGStack_18 [20];
  undefined4 uStack_4;
  
  local_30 = *(undefined4 *)(in_ECX + 0x44);
  piVar1 = *(int **)(in_ECX + 0x20);
  local_2c = *(undefined4 *)(in_ECX + 0x48);
  local_28 = *(undefined4 *)(in_ECX + 0x4c);
  local_24 = *(undefined4 *)(in_ECX + 0x50);
  local_20 = *(undefined4 *)(in_ECX + 0x54);
  local_1c = *(undefined4 *)(in_ECX + 0x58);
  while( true ) {
    if (piVar1 == (int *)0x0) {
      return 0;
    }
    iVar2 = (**(code **)(*piVar1 + 0x38))();
    if (iVar2 != 0) break;
    GMatrix2D::Append((GMatrix2D *)&local_30,(GMatrix2D *)(piVar1 + 0x11));
    piVar1 = (int *)piVar1[8];
  }
  GMatrix2D::SetIdentity(aGStack_18);
  (**(code **)(*piVar1 + 0x2c))(auStack_40,aGStack_18);
  iVar2 = FUN_00515d60(in_ECX,0x16c,&stack0xffffffb4);
  if (iVar2 == 0) {
    return 0;
  }
  puVar6 = &stack0xffffffb8;
  puVar5 = auStack_38;
  piVar4 = piVar1 + 0x11;
  uVar3 = (**(code **)(*piVar1 + 0x38))(piVar4,puVar5,uStack_4,puVar6);
  uVar3 = FUN_005ad160(uVar3,piVar4,puVar5,uStack_4,puVar6);
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
0051d4a0 : SUB ESP,0x44
0051d4a3 : PUSH ESI
0051d4a4 : PUSH EDI
0051d4a5 : MOV EDI,ECX
0051d4a7 : FLD float ptr [EDI + 0x44]
0051d4aa : MOV ESI,dword ptr [EDI + 0x20]
0051d4ad : FSTP float ptr [ESP + 0x1c]
0051d4b1 : FLD float ptr [EDI + 0x48]
0051d4b4 : FSTP float ptr [ESP + 0x20]
0051d4b8 : FLD float ptr [EDI + 0x4c]
0051d4bb : FSTP float ptr [ESP + 0x24]
0051d4bf : FLD float ptr [EDI + 0x50]
0051d4c2 : FSTP float ptr [ESP + 0x28]
0051d4c6 : FLD float ptr [EDI + 0x54]
0051d4c9 : FSTP float ptr [ESP + 0x2c]
0051d4cd : FLD float ptr [EDI + 0x58]
0051d4d0 : FSTP float ptr [ESP + 0x30]
0051d4d4 : TEST ESI,ESI
0051d4d6 : JZ 0x0051d4f9
0051d4d8 : MOV EAX,dword ptr [ESI]
0051d4da : MOV EDX,dword ptr [EAX + 0x38]
0051d4dd : MOV ECX,ESI
0051d4df : CALL EDX
0051d4e1 : TEST EAX,EAX
0051d4e3 : JNZ 0x0051d503
0051d4e5 : LEA EAX,[ESI + 0x44]
0051d4e8 : PUSH EAX
0051d4e9 : LEA ECX,[ESP + 0x20]
0051d4ed : CALL 0x00522ee0
0051d4f2 : MOV ESI,dword ptr [ESI + 0x20]
0051d4f5 : TEST ESI,ESI
0051d4f7 : JNZ 0x0051d4d8
0051d4f9 : POP EDI
0051d4fa : XOR EAX,EAX
0051d4fc : POP ESI
0051d4fd : ADD ESP,0x44
0051d500 : RET 0x4
0051d503 : LEA ECX,[ESP + 0x34]
0051d507 : CALL 0x00522b80
0051d50c : MOV EDX,dword ptr [ESI]
0051d50e : MOV EDX,dword ptr [EDX + 0x2c]
0051d511 : LEA EAX,[ESP + 0x34]
0051d515 : PUSH EAX
0051d516 : LEA ECX,[ESP + 0x10]
0051d51a : PUSH ECX
0051d51b : MOV ECX,ESI
0051d51d : CALL EDX
0051d51f : LEA EAX,[ESP + 0x8]
0051d523 : PUSH EAX
0051d524 : PUSH 0x16c
0051d529 : PUSH EDI
0051d52a : MOV dword ptr [ESP + 0x14],0x109
0051d532 : CALL 0x00515d60
0051d537 : MOV EDI,EAX
0051d539 : TEST EDI,EDI
0051d53b : JZ 0x0051d4f9
0051d53d : FLD float ptr [ESP + 0x50]
0051d541 : LEA ECX,[ESP + 0xc]
0051d545 : PUSH ECX
0051d546 : PUSH ECX
0051d547 : FSTP float ptr [ESP]
0051d54a : LEA EDX,[ESP + 0x24]
0051d54e : PUSH EDX
0051d54f : MOV EDX,dword ptr [ESI]
0051d551 : LEA EAX,[ESI + 0x44]
0051d554 : PUSH EAX
0051d555 : MOV EAX,dword ptr [EDX + 0x38]
0051d558 : MOV ECX,ESI
0051d55a : CALL EAX
0051d55c : PUSH EAX
0051d55d : MOV ECX,EDI
0051d55f : CALL 0x005ad160
0051d564 : POP EDI
0051d565 : POP ESI
0051d566 : ADD ESP,0x44
0051d569 : RET 0x4
