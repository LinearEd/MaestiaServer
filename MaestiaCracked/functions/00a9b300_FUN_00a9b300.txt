PROGRAM  : Maestia.exe
FUNCTION : FUN_00a9b300
ENTRY    : 00a9b300
BODY     : [[00a9b300, 00a9b456]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a9b300(undefined4 param_1,undefined4 param_2,ushort param_3,undefined1 *param_4)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  int in_ECX;
  uint uVar4;
  uint local_34;
  undefined1 local_30 [24];
  uint local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b23763;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar1 = (int *)(in_ECX + 0x32c + (uint)param_3 * 4);
  local_14 = 0;
  FUN_00841330(param_2,0x43,*piVar1,&local_14);
  uVar4 = local_14 + *piVar1;
  if (*(uint *)(*(int *)(DAT_0172491c + 0x17c) + 0xa8) < uVar4) {
    *param_4 = 0;
    FUN_00406360(&DAT_00c9f4d0,2);
  }
  if ((int)uVar4 < 1) {
    FUN_00406460(L"IDS_NONE");
    local_8 = 1;
    uVar3 = FUN_0081d120(local_30);
    local_8._0_1_ = 2;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,1);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    uVar3 = FUN_00404750(L"%d@N",uVar4,uVar2);
    local_8 = 0;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a9b300 : PUSH EBP
00a9b301 : MOV EBP,ESP
00a9b303 : PUSH -0x1
00a9b305 : PUSH 0xb23763
00a9b30a : MOV EAX,FS:[0x0]
00a9b310 : PUSH EAX
00a9b311 : SUB ESP,0x3c
00a9b314 : PUSH EBX
00a9b315 : PUSH ESI
00a9b316 : PUSH EDI
00a9b317 : MOV EAX,[0x00d66fa0]
00a9b31c : XOR EAX,EBP
00a9b31e : PUSH EAX
00a9b31f : LEA EAX,[EBP + -0xc]
00a9b322 : MOV FS:[0x0],EAX
00a9b328 : MOV EBX,dword ptr [EBP + 0x8]
00a9b32b : MOVZX EAX,word ptr [EBP + 0x10]
00a9b32f : LEA EDI,[ECX + EAX*0x4 + 0x32c]
00a9b336 : MOV EAX,dword ptr [EDI]
00a9b338 : MOV ECX,dword ptr [EBP + 0xc]
00a9b33b : LEA EDX,[EBP + -0x10]
00a9b33e : PUSH EDX
00a9b33f : PUSH EAX
00a9b340 : PUSH 0x43
00a9b342 : PUSH ECX
00a9b343 : MOV ECX,dword ptr [0x01724910]
00a9b349 : MOV dword ptr [EBP + -0x10],0x0
00a9b350 : CALL 0x00841330
00a9b355 : MOV EDX,dword ptr [0x0172491c]
00a9b35b : MOV ESI,dword ptr [EBP + -0x10]
00a9b35e : MOV EAX,dword ptr [EDX + 0x17c]
00a9b364 : ADD ESI,dword ptr [EDI]
00a9b366 : MOV EAX,dword ptr [EAX + 0xa8]
00a9b36c : CMP ESI,EAX
00a9b36e : JBE 0x00a9b384
00a9b370 : MOV EAX,dword ptr [EBP + 0x14]
00a9b373 : PUSH 0x2
00a9b375 : PUSH 0xc9f4d0
00a9b37a : MOV ECX,EBX
00a9b37c : MOV byte ptr [EAX],0x0
00a9b37f : CALL 0x00406360
00a9b384 : XOR EDI,EDI
00a9b386 : CMP ESI,EDI
00a9b388 : JLE 0x00a9b3c7
00a9b38a : PUSH ESI
00a9b38b : PUSH 0xc9f4d8
00a9b390 : LEA ESI,[EBP + -0x2c]
00a9b393 : CALL 0x00404750
00a9b398 : ADD ESP,0x8
00a9b39b : MOV dword ptr [EBP + -0x4],EDI
00a9b39e : PUSH -0x1
00a9b3a0 : PUSH EDI
00a9b3a1 : PUSH EAX
00a9b3a2 : MOV ECX,EBX
00a9b3a4 : CALL 0x00405c30
00a9b3a9 : MOV dword ptr [EBP + -0x4],0xffffffff
00a9b3b0 : CMP dword ptr [EBP + -0x14],0x8
00a9b3b4 : JC 0x00a9b3be
00a9b3b6 : MOV ECX,dword ptr [EBP + -0x28]
00a9b3b9 : CALL 0x006f04e0
00a9b3be : MOV dword ptr [EBP + -0x14],0x7
00a9b3c5 : JMP 0x00a9b43c
00a9b3c7 : PUSH 0xc9f4e4
00a9b3cc : LEA ECX,[EBP + -0x2c]
00a9b3cf : CALL 0x00406460
00a9b3d4 : MOV dword ptr [EBP + -0x4],0x1
00a9b3db : MOV ECX,dword ptr [0x0172491c]
00a9b3e1 : LEA EDX,[EBP + -0x2c]
00a9b3e4 : PUSH EDX
00a9b3e5 : LEA EDI,[EBP + -0x48]
00a9b3e8 : CALL 0x0081d120
00a9b3ed : MOV byte ptr [EBP + -0x4],0x2
00a9b3f1 : PUSH -0x1
00a9b3f3 : XOR EDI,EDI
00a9b3f5 : PUSH EDI
00a9b3f6 : PUSH EAX
00a9b3f7 : MOV ECX,EBX
00a9b3f9 : CALL 0x00405eb0
00a9b3fe : MOV byte ptr [EBP + -0x4],0x1
00a9b402 : MOV ESI,0x8
00a9b407 : CMP dword ptr [EBP + -0x30],ESI
00a9b40a : JC 0x00a9b414
00a9b40c : MOV ECX,dword ptr [EBP + -0x44]
00a9b40f : CALL 0x006f04e0
00a9b414 : MOV EBX,0x7
00a9b419 : XOR EAX,EAX
00a9b41b : MOV dword ptr [EBP + -0x30],EBX
00a9b41e : MOV dword ptr [EBP + -0x34],EDI
00a9b421 : MOV word ptr [EBP + -0x44],AX
00a9b425 : MOV dword ptr [EBP + -0x4],0xffffffff
00a9b42c : CMP dword ptr [EBP + -0x14],ESI
00a9b42f : JC 0x00a9b439
00a9b431 : MOV ECX,dword ptr [EBP + -0x28]
00a9b434 : CALL 0x006f04e0
00a9b439 : MOV dword ptr [EBP + -0x14],EBX
00a9b43c : XOR ECX,ECX
00a9b43e : MOV word ptr [EBP + -0x28],CX
00a9b442 : MOV dword ptr [EBP + -0x18],EDI
00a9b445 : MOV ECX,dword ptr [EBP + -0xc]
00a9b448 : MOV dword ptr FS:[0x0],ECX
00a9b44f : POP ECX
00a9b450 : POP EDI
00a9b451 : POP ESI
00a9b452 : POP EBX
00a9b453 : MOV ESP,EBP
00a9b455 : POP EBP
00a9b456 : RET
