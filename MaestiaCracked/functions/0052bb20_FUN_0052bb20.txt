PROGRAM  : Maestia.exe
FUNCTION : FUN_0052bb20
ENTRY    : 0052bb20
BODY     : [[0052bb20, 0052bbbc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052bb20(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  uint uVar4;
  
  if ((uint)in_ECX[5] < 2) {
    *in_ECX = *in_ECX + 4;
    if (*in_ECX == 0) {
      return;
    }
    *(undefined4 *)*in_ECX = 0;
    return;
  }
  iVar3 = *(int *)(in_ECX[4] + -4 + in_ECX[5] * 4);
  piVar1 = in_ECX + 4;
  *(int *)(iVar3 + 0x80) = in_ECX[7];
  in_ECX[7] = iVar3;
  uVar2 = in_ECX[5] - 1;
  if (uVar2 < (uint)in_ECX[5]) {
    uVar4 = uVar2;
    if ((uint)in_ECX[6] >> 1 <= uVar2) goto LAB_0052bb73;
  }
  else {
    if (uVar2 < (uint)in_ECX[6]) goto LAB_0052bb73;
    uVar4 = (uVar2 >> 2) + uVar2;
  }
  FUN_005b5ef0(piVar1,uVar4);
LAB_0052bb73:
  in_ECX[5] = uVar2;
  iVar3 = *(int *)(*piVar1 + -4 + uVar2 * 4);
  in_ECX[1] = iVar3;
  in_ECX[2] = iVar3 + 0x80;
  *in_ECX = iVar3 + 0x7c;
  if (1 < (uint)in_ECX[5]) {
    in_ECX[3] = *(int *)(*piVar1 + -8 + in_ECX[5] * 4) + 0x7c;
    return;
  }
  in_ECX[3] = in_ECX[1];
  return;
}



============================================================
DISASSEMBLY
============================================================
0052bb20 : PUSH ESI
0052bb21 : MOV ESI,ECX
0052bb23 : CMP dword ptr [ESI + 0x14],0x1
0052bb27 : JBE 0x0052bbae
0052bb2d : MOV EAX,dword ptr [ESI + 0x14]
0052bb30 : MOV ECX,dword ptr [ESI + 0x10]
0052bb33 : MOV EAX,dword ptr [ECX + EAX*0x4 + -0x4]
0052bb37 : MOV EDX,dword ptr [ESI + 0x1c]
0052bb3a : PUSH EBX
0052bb3b : PUSH EDI
0052bb3c : LEA EDI,[ESI + 0x10]
0052bb3f : MOV dword ptr [EAX + 0x80],EDX
0052bb45 : MOV dword ptr [ESI + 0x1c],EAX
0052bb48 : MOV EAX,dword ptr [EDI + 0x4]
0052bb4b : LEA EBX,[EAX + -0x1]
0052bb4e : CMP EBX,EAX
0052bb50 : JNC 0x0052bb5e
0052bb52 : MOV EAX,dword ptr [EDI + 0x8]
0052bb55 : SHR EAX,0x1
0052bb57 : CMP EBX,EAX
0052bb59 : JNC 0x0052bb73
0052bb5b : PUSH EBX
0052bb5c : JMP 0x0052bb6b
0052bb5e : CMP EBX,dword ptr [EDI + 0x8]
0052bb61 : JC 0x0052bb73
0052bb63 : MOV ECX,EBX
0052bb65 : SHR ECX,0x2
0052bb68 : ADD ECX,EBX
0052bb6a : PUSH ECX
0052bb6b : PUSH EDI
0052bb6c : MOV ECX,EDI
0052bb6e : CALL 0x005b5ef0
0052bb73 : MOV dword ptr [EDI + 0x4],EBX
0052bb76 : MOV EAX,dword ptr [EDI]
0052bb78 : MOV EDX,EBX
0052bb7a : MOV EAX,dword ptr [EAX + EDX*0x4 + -0x4]
0052bb7e : MOV dword ptr [ESI + 0x4],EAX
0052bb81 : SUB EAX,-0x80
0052bb84 : MOV dword ptr [ESI + 0x8],EAX
0052bb87 : ADD EAX,-0x4
0052bb8a : MOV dword ptr [ESI],EAX
0052bb8c : MOV EAX,dword ptr [ESI + 0x14]
0052bb8f : CMP EAX,0x1
0052bb92 : JBE 0x0052bba4
0052bb94 : MOV ECX,dword ptr [EDI]
0052bb96 : MOV EDX,dword ptr [ECX + EAX*0x4 + -0x8]
0052bb9a : ADD EDX,0x7c
0052bb9d : POP EDI
0052bb9e : MOV dword ptr [ESI + 0xc],EDX
0052bba1 : POP EBX
0052bba2 : POP ESI
0052bba3 : RET
0052bba4 : MOV EAX,dword ptr [ESI + 0x4]
0052bba7 : POP EDI
0052bba8 : POP EBX
0052bba9 : MOV dword ptr [ESI + 0xc],EAX
0052bbac : POP ESI
0052bbad : RET
0052bbae : ADD dword ptr [ESI],0x4
0052bbb1 : MOV ESI,dword ptr [ESI]
0052bbb3 : JZ 0x0052bba2
0052bbb5 : MOV dword ptr [ESI],0x0
0052bbbb : POP ESI
0052bbbc : RET
