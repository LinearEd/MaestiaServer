PROGRAM  : Maestia.exe
FUNCTION : FUN_0083d4f0
ENTRY    : 0083d4f0
BODY     : [[0083d4f0, 0083d6ca]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0083d4f0(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  int in_ECX;
  undefined1 local_54 [4];
  undefined2 local_50;
  undefined4 local_40;
  uint local_3c;
  int local_38;
  int local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4feec;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  if (param_1 != 0) {
    *(int *)(in_ECX + 0x16c4) = param_1;
    local_38 = param_1;
    FUN_004437f0(&local_38);
    if ((local_34 == *(int *)(iVar3 + 0x44)) || (iVar3 = *(int *)(local_34 + 0x10), iVar3 == 0)) {
      FUN_008018d0(L"[AvaTalkNpc::SetStore] ClZoneNpcSetData* pData NULL");
    }
    else {
      if (*(char *)(iVar3 + 0x9f) != '\0') {
        *(undefined1 *)(in_ECX + 0x5d0) = 1;
        *(undefined1 *)(in_ECX + 0x5d1) = 1;
      }
      if ((*(uint *)(iVar3 + 0xa0) & 0x800) != 0) {
        *(undefined1 *)(in_ECX + 0x5cf) = 1;
      }
      uVar2 = FUN_00404350(iVar3 + 0xa5,uVar1);
      local_8 = 0;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = 0xffffffff;
      if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_40 = 0;
      local_50 = 0;
      local_3c = 7;
      FUN_00824a20(DAT_0172491c,0);
      local_8 = 1;
      if (*(uint *)(in_ECX + 0x24) < 8) {
        iVar3 = in_ECX + 0x10;
      }
      else {
        iVar3 = *(int *)(in_ECX + 0x10);
      }
      iVar3 = FUN_00405bb0(iVar3);
      if (iVar3 == 0) {
        FUN_00405eb0(local_30,0,0xffffffff);
      }
      else {
        uVar2 = FUN_00403450(local_54,in_ECX + 0xc);
        local_8._0_1_ = 2;
        FUN_00405eb0(uVar2,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,1);
        FUN_00406560();
      }
      iVar3 = *(int *)(in_ECX + 0x3f8);
      if (iVar3 != 0) {
        uVar2 = *(undefined4 *)(in_ECX + 0x42c);
        FUN_00405eb0(in_ECX + 0xc,0,0xffffffff);
        *(undefined4 *)(iVar3 + 500) = uVar2;
      }
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = 0;
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0083d4f0 : PUSH EBP
0083d4f1 : MOV EBP,ESP
0083d4f3 : PUSH -0x1
0083d4f5 : PUSH 0xb4feec
0083d4fa : MOV EAX,FS:[0x0]
0083d500 : PUSH EAX
0083d501 : SUB ESP,0x44
0083d504 : MOV EAX,[0x00d66fa0]
0083d509 : XOR EAX,EBP
0083d50b : MOV dword ptr [EBP + -0x10],EAX
0083d50e : PUSH EBX
0083d50f : PUSH ESI
0083d510 : PUSH EDI
0083d511 : PUSH EAX
0083d512 : LEA EAX,[EBP + -0xc]
0083d515 : MOV FS:[0x0],EAX
0083d51b : MOV EAX,dword ptr [EBP + 0x8]
0083d51e : MOV EBX,ECX
0083d520 : TEST EAX,EAX
0083d522 : JZ 0x0083d6ad
0083d528 : MOV ESI,dword ptr [0x00d7c54c]
0083d52e : MOV dword ptr [EBX + 0x16c4],EAX
0083d534 : MOV dword ptr [EBP + -0x34],EAX
0083d537 : LEA EAX,[EBP + -0x34]
0083d53a : PUSH EAX
0083d53b : LEA ECX,[ESI + 0x40]
0083d53e : LEA EAX,[EBP + -0x30]
0083d541 : CALL 0x004437f0
0083d546 : MOV ESI,dword ptr [ESI + 0x44]
0083d549 : MOV EAX,dword ptr [EBP + -0x30]
0083d54c : CMP EAX,ESI
0083d54e : JZ 0x0083d557
0083d550 : MOV EDI,dword ptr [EAX + 0x10]
0083d553 : TEST EDI,EDI
0083d555 : JNZ 0x0083d56f
0083d557 : MOV ESI,dword ptr [0x00da98e8]
0083d55d : PUSH 0xc39e30
0083d562 : CALL 0x008018d0
0083d567 : ADD ESP,0x4
0083d56a : JMP 0x0083d6ad
0083d56f : CMP byte ptr [EDI + 0x9f],0x0
0083d576 : JZ 0x0083d586
0083d578 : MOV byte ptr [EBX + 0x5d0],0x1
0083d57f : MOV byte ptr [EBX + 0x5d1],0x1
0083d586 : TEST dword ptr [EDI + 0xa0],0x800
0083d590 : JZ 0x0083d599
0083d592 : MOV byte ptr [EBX + 0x5cf],0x1
0083d599 : LEA ECX,[EDI + 0xa5]
0083d59f : PUSH ECX
0083d5a0 : LEA ESI,[EBP + -0x50]
0083d5a3 : CALL 0x00404350
0083d5a8 : ADD ESP,0x4
0083d5ab : XOR ESI,ESI
0083d5ad : MOV dword ptr [EBP + -0x4],ESI
0083d5b0 : PUSH -0x1
0083d5b2 : PUSH ESI
0083d5b3 : PUSH EAX
0083d5b4 : LEA ECX,[EBX + 0x16a8]
0083d5ba : CALL 0x00405eb0
0083d5bf : MOV dword ptr [EBP + -0x4],0xffffffff
0083d5c6 : CMP dword ptr [EBP + -0x38],0x8
0083d5ca : JC 0x0083d5d4
0083d5cc : MOV ECX,dword ptr [EBP + -0x4c]
0083d5cf : CALL 0x006f04e0
0083d5d4 : MOV EAX,[0x0172491c]
0083d5d9 : XOR EDX,EDX
0083d5db : PUSH ESI
0083d5dc : MOV dword ptr [EBP + -0x3c],ESI
0083d5df : MOV word ptr [EBP + -0x4c],DX
0083d5e3 : LEA EDX,[EDI + 0x18]
0083d5e6 : PUSH EAX
0083d5e7 : LEA ESI,[EBP + -0x2c]
0083d5ea : MOV dword ptr [EBP + -0x38],0x7
0083d5f1 : CALL 0x00824a20
0083d5f6 : MOV dword ptr [EBP + -0x4],0x1
0083d5fd : CMP dword ptr [EBX + 0x24],0x8
0083d601 : MOV EDI,dword ptr [EBX + 0x20]
0083d604 : LEA ESI,[EBX + 0xc]
0083d607 : JC 0x0083d60e
0083d609 : MOV EAX,dword ptr [ESI + 0x4]
0083d60c : JMP 0x0083d611
0083d60e : LEA EAX,[ESI + 0x4]
0083d611 : PUSH EAX
0083d612 : MOV EAX,dword ptr [EBP + -0x18]
0083d615 : LEA ECX,[EBP + -0x2c]
0083d618 : CALL 0x00405bb0
0083d61d : TEST EAX,EAX
0083d61f : JZ 0x0083d64f
0083d621 : LEA ECX,[EBP + -0x50]
0083d624 : PUSH ESI
0083d625 : PUSH ECX
0083d626 : LEA ECX,[EBP + -0x2c]
0083d629 : CALL 0x00403450
0083d62e : ADD ESP,0x8
0083d631 : MOV byte ptr [EBP + -0x4],0x2
0083d635 : PUSH -0x1
0083d637 : PUSH 0x0
0083d639 : PUSH EAX
0083d63a : MOV ECX,ESI
0083d63c : CALL 0x00405eb0
0083d641 : MOV byte ptr [EBP + -0x4],0x1
0083d645 : LEA ECX,[EBP + -0x50]
0083d648 : CALL 0x00406560
0083d64d : JMP 0x0083d65e
0083d64f : PUSH -0x1
0083d651 : PUSH 0x0
0083d653 : LEA EDX,[EBP + -0x2c]
0083d656 : PUSH EDX
0083d657 : MOV ECX,ESI
0083d659 : CALL 0x00405eb0
0083d65e : MOV EDI,dword ptr [EBX + 0x3f8]
0083d664 : TEST EDI,EDI
0083d666 : JZ 0x0083d684
0083d668 : MOV EBX,dword ptr [EBX + 0x42c]
0083d66e : PUSH -0x1
0083d670 : PUSH 0x0
0083d672 : PUSH ESI
0083d673 : LEA ECX,[EDI + 0x1d8]
0083d679 : CALL 0x00405eb0
0083d67e : MOV dword ptr [EDI + 0x1f4],EBX
0083d684 : MOV dword ptr [EBP + -0x4],0xffffffff
0083d68b : CMP dword ptr [EBP + -0x14],0x8
0083d68f : JC 0x0083d699
0083d691 : MOV ECX,dword ptr [EBP + -0x28]
0083d694 : CALL 0x006f04e0
0083d699 : XOR EAX,EAX
0083d69b : MOV dword ptr [EBP + -0x14],0x7
0083d6a2 : MOV dword ptr [EBP + -0x18],0x0
0083d6a9 : MOV word ptr [EBP + -0x28],AX
0083d6ad : MOV ECX,dword ptr [EBP + -0xc]
0083d6b0 : MOV dword ptr FS:[0x0],ECX
0083d6b7 : POP ECX
0083d6b8 : POP EDI
0083d6b9 : POP ESI
0083d6ba : POP EBX
0083d6bb : MOV ECX,dword ptr [EBP + -0x10]
0083d6be : XOR ECX,EBP
0083d6c0 : CALL 0x00633e6b
0083d6c5 : MOV ESP,EBP
0083d6c7 : POP EBP
0083d6c8 : RET 0x4
