PROGRAM  : Maestia.exe
FUNCTION : FUN_00474620
ENTRY    : 00474620
BODY     : [[00474620, 004746a6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00474620(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b82478;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *param_1 = &PTR_FUN_00cd6420;
  local_8 = 0;
  if (*(char *)(param_1 + 5) != '\0') {
    iVar2 = param_1[6] * 0x114;
    if ((&DAT_017212d0)[iVar2] == '\0') {
      FUN_00807d70("CSharedHeapBlock::Unlock() called when buffer was not locked",uVar1);
    }
    else {
      (&DAT_017212d0)[iVar2] = 0;
      *(undefined4 *)(&DAT_017211cc + iVar2) = 0;
      (&DAT_017211d0)[iVar2] = 0;
    }
  }
  local_8 = 0xffffffff;
  FUN_0046ee20();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00474620 : PUSH EBP
00474621 : MOV EBP,ESP
00474623 : PUSH -0x1
00474625 : PUSH 0xb82478
0047462a : MOV EAX,FS:[0x0]
00474630 : PUSH EAX
00474631 : PUSH ESI
00474632 : MOV EAX,[0x00d66fa0]
00474637 : XOR EAX,EBP
00474639 : PUSH EAX
0047463a : LEA EAX,[EBP + -0xc]
0047463d : MOV FS:[0x0],EAX
00474643 : MOV ESI,dword ptr [EBP + 0x8]
00474646 : MOV dword ptr [ESI],0xcd6420
0047464c : XOR ECX,ECX
0047464e : MOV dword ptr [EBP + -0x4],ECX
00474651 : CMP byte ptr [ESI + 0x14],CL
00474654 : JZ 0x00474687
00474656 : MOV EAX,dword ptr [ESI + 0x18]
00474659 : IMUL EAX,EAX,0x114
0047465f : ADD EAX,0x17211c0
00474664 : CMP byte ptr [EAX + 0x110],CL
0047466a : JZ 0x0047467a
0047466c : MOV byte ptr [EAX + 0x110],CL
00474672 : MOV dword ptr [EAX + 0xc],ECX
00474675 : MOV byte ptr [EAX + 0x10],CL
00474678 : JMP 0x00474687
0047467a : PUSH 0xcd4178
0047467f : CALL 0x00807d70
00474684 : ADD ESP,0x4
00474687 : MOV dword ptr [EBP + -0x4],0xffffffff
0047468e : MOV ECX,ESI
00474690 : CALL 0x0046ee20
00474695 : MOV ECX,dword ptr [EBP + -0xc]
00474698 : MOV dword ptr FS:[0x0],ECX
0047469f : POP ECX
004746a0 : POP ESI
004746a1 : MOV ESP,EBP
004746a3 : POP EBP
004746a4 : RET 0x4
