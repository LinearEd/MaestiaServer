PROGRAM  : Maestia.exe
FUNCTION : FUN_007ac0b0
ENTRY    : 007ac0b0
BODY     : [[007ac0b0, 007ac15c] [007ac160, 007ac2bb]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_007ac0b0(int param_1,float *param_2,float *param_3,undefined1 *param_4,float *param_5)

{
  undefined1 *puVar1;
  char cVar2;
  undefined1 uVar3;
  float *pfVar4;
  float *pfVar5;
  int iVar6;
  undefined8 uVar7;
  int local_3c;
  float *local_38;
  float *local_34;
  float *local_30;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  int local_14;
  float local_10;
  float local_c;
  int local_8;
  
  if (((*(char *)(param_1 + 700) == '\0') || (*(char *)(param_1 + 0x2bd) == '\0')) ||
     (cVar2 = FUN_007deaf0(*(undefined4 *)(param_1 + 0x278),*param_2,param_2[1],&param_1,&local_8,
                           &local_c,&local_10), cVar2 == '\0')) {
    return 0;
  }
  local_3c = FUN_007aab50(param_1,local_8);
  iVar6 = local_8 + 1;
  pfVar4 = (float *)FUN_007aab50(param_1,iVar6);
  local_14 = param_1 + 1;
  local_38 = pfVar4;
  local_34 = (float *)FUN_007aab50(local_14,local_8);
  uVar7 = FUN_007aab50(local_14,iVar6);
  pfVar5 = (float *)((ulonglong)uVar7 >> 0x20);
  local_30 = (float *)uVar7;
  iVar6 = 0;
  do {
    if ((&local_3c)[iVar6] == 0) {
      return 0;
    }
    iVar6 = iVar6 + 1;
  } while (iVar6 < 4);
  local_20 = 0.0;
  local_1c = 0.0;
  local_18 = 0.0;
  if ((~(byte)param_1 & 1) == (~(byte)local_8 & 1)) {
    local_2c = *pfVar5;
    local_28 = pfVar5[1];
    local_24 = pfVar5[2];
    if (local_10 < local_c) goto LAB_007ac209;
  }
  else {
    local_2c = *pfVar4;
    local_28 = pfVar4[1];
    local_24 = pfVar4[2];
    pfVar4 = local_34;
    if (local_c + local_10 < 1.0) goto LAB_007ac209;
  }
  pfVar4 = (float *)uVar7;
LAB_007ac209:
  FUN_007ab4b0(pfVar4);
  puVar1 = param_4;
  if (param_5 != (float *)0x0) {
    *param_5 = local_20;
    param_5[1] = local_1c;
    param_5[2] = local_18;
  }
  *param_3 = (-(local_24 * local_18 + local_28 * local_1c + local_2c * local_20) +
              *param_2 * local_20 + param_2[1] * local_18) * (-1.0 / local_1c);
  if (param_4 != (undefined1 *)0x0) {
    uVar3 = FUN_0040ebc0(param_1);
    *puVar1 = uVar3;
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
007ac0b0 : PUSH EBP
007ac0b1 : MOV EBP,ESP
007ac0b3 : SUB ESP,0x38
007ac0b6 : PUSH EBX
007ac0b7 : MOV EBX,dword ptr [EBP + 0x8]
007ac0ba : CMP byte ptr [EBX + 0x2bc],0x0
007ac0c1 : JNZ 0x007ac0cc
007ac0c3 : XOR AL,AL
007ac0c5 : POP EBX
007ac0c6 : MOV ESP,EBP
007ac0c8 : POP EBP
007ac0c9 : RET 0x14
007ac0cc : CMP byte ptr [EBX + 0x2bd],0x0
007ac0d3 : JZ 0x007ac0c3
007ac0d5 : LEA EAX,[EBP + -0xc]
007ac0d8 : PUSH EAX
007ac0d9 : LEA ECX,[EBP + -0x8]
007ac0dc : PUSH ECX
007ac0dd : MOV ECX,dword ptr [EBX + 0x278]
007ac0e3 : LEA EDX,[EBP + -0x4]
007ac0e6 : PUSH EDX
007ac0e7 : LEA EAX,[EBP + 0x8]
007ac0ea : PUSH EAX
007ac0eb : MOV EAX,dword ptr [EBP + 0xc]
007ac0ee : FLD float ptr [EAX + 0x4]
007ac0f1 : SUB ESP,0x8
007ac0f4 : FSTP float ptr [ESP + 0x4]
007ac0f8 : FLD float ptr [EAX]
007ac0fa : FSTP float ptr [ESP]
007ac0fd : PUSH ECX
007ac0fe : CALL 0x007deaf0
007ac103 : TEST AL,AL
007ac105 : JZ 0x007ac0c3
007ac107 : MOV EDX,dword ptr [EBP + -0x4]
007ac10a : MOV EAX,dword ptr [EBP + 0x8]
007ac10d : PUSH ESI
007ac10e : PUSH EDI
007ac10f : PUSH EDX
007ac110 : PUSH EAX
007ac111 : MOV EAX,EBX
007ac113 : CALL 0x007aab50
007ac118 : MOV EDI,dword ptr [EBP + -0x4]
007ac11b : MOV ECX,dword ptr [EBP + 0x8]
007ac11e : INC EDI
007ac11f : MOV EDX,EAX
007ac121 : PUSH EDI
007ac122 : PUSH ECX
007ac123 : MOV EAX,EBX
007ac125 : MOV dword ptr [EBP + -0x38],EDX
007ac128 : CALL 0x007aab50
007ac12d : MOV ECX,dword ptr [EBP + -0x4]
007ac130 : MOV ESI,EAX
007ac132 : MOV EAX,dword ptr [EBP + 0x8]
007ac135 : INC EAX
007ac136 : PUSH ECX
007ac137 : MOV dword ptr [EBP + -0x10],EAX
007ac13a : PUSH EAX
007ac13b : MOV EAX,EBX
007ac13d : MOV dword ptr [EBP + -0x34],ESI
007ac140 : CALL 0x007aab50
007ac145 : MOV dword ptr [EBP + -0x30],EAX
007ac148 : MOV EAX,dword ptr [EBP + -0x10]
007ac14b : PUSH EDI
007ac14c : PUSH EAX
007ac14d : MOV EAX,EBX
007ac14f : CALL 0x007aab50
007ac154 : MOV EDI,EAX
007ac156 : MOV dword ptr [EBP + -0x2c],EDI
007ac159 : XOR EAX,EAX
007ac15b : JMP 0x007ac160
007ac160 : CMP dword ptr [EBP + EAX*0x4 + -0x38],0x0
007ac165 : JZ 0x007ac1c4
007ac167 : INC EAX
007ac168 : CMP EAX,0x4
007ac16b : JL 0x007ac160
007ac16d : MOV AL,byte ptr [EBP + 0x8]
007ac170 : MOV CL,byte ptr [EBP + -0x4]
007ac173 : XORPS XMM0,XMM0
007ac176 : NOT AL
007ac178 : NOT CL
007ac17a : AND AL,0x1
007ac17c : AND CL,0x1
007ac17f : MOVSS dword ptr [EBP + -0x1c],XMM0
007ac184 : MOVSS dword ptr [EBP + -0x18],XMM0
007ac189 : MOVSS dword ptr [EBP + -0x14],XMM0
007ac18e : MOVSS XMM0,dword ptr [EBP + -0x8]
007ac193 : CMP AL,CL
007ac195 : LEA EAX,[EBP + -0x1c]
007ac198 : JNZ 0x007ac1d6
007ac19a : COMISS XMM0,dword ptr [EBP + -0xc]
007ac19e : MOVSS XMM0,dword ptr [EDX]
007ac1a2 : MOVSS dword ptr [EBP + -0x28],XMM0
007ac1a7 : MOVSS XMM0,dword ptr [EDX + 0x4]
007ac1ac : MOVSS dword ptr [EBP + -0x24],XMM0
007ac1b1 : MOVSS XMM0,dword ptr [EDX + 0x8]
007ac1b6 : MOVSS dword ptr [EBP + -0x20],XMM0
007ac1bb : JBE 0x007ac1cf
007ac1bd : PUSH ESI
007ac1be : MOV ECX,EDI
007ac1c0 : MOV ESI,EDX
007ac1c2 : JMP 0x007ac209
007ac1c4 : POP EDI
007ac1c5 : POP ESI
007ac1c6 : XOR AL,AL
007ac1c8 : POP EBX
007ac1c9 : MOV ESP,EBP
007ac1cb : POP EBP
007ac1cc : RET 0x14
007ac1cf : MOV ECX,dword ptr [EBP + -0x30]
007ac1d2 : MOV ESI,EDX
007ac1d4 : JMP 0x007ac208
007ac1d6 : ADDSS XMM0,dword ptr [EBP + -0xc]
007ac1db : COMISS XMM0,dword ptr [0x00c10fc4]
007ac1e2 : MOVSS XMM0,dword ptr [ESI]
007ac1e6 : MOV ECX,dword ptr [EBP + -0x30]
007ac1e9 : MOVSS dword ptr [EBP + -0x28],XMM0
007ac1ee : MOVSS XMM0,dword ptr [ESI + 0x4]
007ac1f3 : MOVSS dword ptr [EBP + -0x24],XMM0
007ac1f8 : MOVSS XMM0,dword ptr [ESI + 0x8]
007ac1fd : MOVSS dword ptr [EBP + -0x20],XMM0
007ac202 : JC 0x007ac2b4
007ac208 : PUSH EDI
007ac209 : CALL 0x007ab4b0
007ac20e : MOV EAX,dword ptr [EBP + 0x18]
007ac211 : MOVSS XMM3,dword ptr [EBP + -0x1c]
007ac216 : MOVSS XMM2,dword ptr [EBP + -0x18]
007ac21b : MOVSS XMM1,dword ptr [EBP + -0x14]
007ac220 : ADD ESP,0x4
007ac223 : TEST EAX,EAX
007ac225 : JZ 0x007ac235
007ac227 : MOVSS dword ptr [EAX],XMM3
007ac22b : MOVSS dword ptr [EAX + 0x4],XMM2
007ac230 : MOVSS dword ptr [EAX + 0x8],XMM1
007ac235 : MOVSS XMM0,dword ptr [EBP + -0x20]
007ac23a : MOVSS XMM4,dword ptr [EBP + -0x24]
007ac23f : MOV EAX,dword ptr [EBP + 0xc]
007ac242 : MOV ESI,dword ptr [EBP + 0x14]
007ac245 : MOV EDX,dword ptr [EBP + 0x10]
007ac248 : MULSS XMM0,XMM1
007ac24c : MULSS XMM4,XMM2
007ac250 : ADDSS XMM0,XMM4
007ac254 : MOVSS XMM4,dword ptr [EBP + -0x28]
007ac259 : MULSS XMM4,XMM3
007ac25d : ADDSS XMM0,XMM4
007ac261 : MOVSS XMM4,dword ptr [EAX]
007ac265 : XORPS XMM0,xmmword ptr [0x00cdf0c0]
007ac26c : MULSS XMM4,XMM3
007ac270 : MOVSS XMM3,dword ptr [EAX + 0x4]
007ac275 : MULSS XMM3,XMM1
007ac279 : MOVSS XMM1,dword ptr [0x00cdf0d0]
007ac281 : ADDSS XMM0,XMM4
007ac285 : ADDSS XMM0,XMM3
007ac289 : DIVSS XMM1,XMM2
007ac28d : MULSS XMM0,XMM1
007ac291 : MOVSS dword ptr [EDX],XMM0
007ac295 : TEST ESI,ESI
007ac297 : JZ 0x007ac2a9
007ac299 : MOV EAX,dword ptr [EBP + 0x8]
007ac29c : MOV EDI,dword ptr [EBP + -0x4]
007ac29f : PUSH EAX
007ac2a0 : MOV ECX,EBX
007ac2a2 : CALL 0x0040ebc0
007ac2a7 : MOV byte ptr [ESI],AL
007ac2a9 : POP EDI
007ac2aa : POP ESI
007ac2ab : MOV AL,0x1
007ac2ad : POP EBX
007ac2ae : MOV ESP,EBP
007ac2b0 : POP EBP
007ac2b1 : RET 0x14
007ac2b4 : PUSH ECX
007ac2b5 : MOV ECX,EDX
007ac2b7 : JMP 0x007ac209
