PROGRAM  : Maestia.exe
FUNCTION : FUN_00524280
ENTRY    : 00524280
BODY     : [[00524280, 00524312]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00524280(GRefCountImpl *param_1,int *param_2)

{
  undefined4 *in_ECX;
  
  *in_ECX = &PTR_FUN_00cd3f2c;
  in_ECX[1] = 1;
  *in_ECX = &PTR_FUN_00b8ae00;
  in_ECX[2] = 0;
  in_ECX[5] = 0;
  in_ECX[6] = 0;
  FUN_0051b6e0();
  GEvent::GEvent((GEvent *)(in_ECX + 8),false,false);
  if (param_1 != (GRefCountImpl *)0x0) {
    GRefCountImpl::AddRef(param_1);
  }
  if ((GRefCountImpl *)in_ECX[2] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[2]);
  }
  in_ECX[2] = param_1;
  in_ECX[3] = 0;
  in_ECX[4] = 0;
  if ((int *)*param_2 != (int *)0x0) {
    (**(code **)(*(int *)*param_2 + 4))(param_2[1]);
  }
  if ((int *)in_ECX[5] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[5] + 8))(in_ECX[6]);
  }
  in_ECX[5] = *param_2;
  in_ECX[6] = param_2[1];
  return;
}



============================================================
DISASSEMBLY
============================================================
00524280 : PUSH EBX
00524281 : PUSH ESI
00524282 : MOV ESI,ECX
00524284 : MOV dword ptr [ESI],0xcd3f2c
0052428a : MOV dword ptr [ESI + 0x4],0x1
00524291 : MOV dword ptr [ESI],0xb8ae00
00524297 : XOR EBX,EBX
00524299 : MOV dword ptr [ESI + 0x8],EBX
0052429c : PUSH EDI
0052429d : LEA ECX,[ESI + 0x1c]
005242a0 : MOV dword ptr [ESI + 0x14],EBX
005242a3 : MOV dword ptr [ESI + 0x18],EBX
005242a6 : CALL 0x0051b6e0
005242ab : PUSH EBX
005242ac : PUSH EBX
005242ad : LEA ECX,[ESI + 0x20]
005242b0 : CALL 0x00518080
005242b5 : MOV EDI,dword ptr [ESP + 0x10]
005242b9 : CMP EDI,EBX
005242bb : JZ 0x005242c4
005242bd : MOV ECX,EDI
005242bf : CALL 0x00523dd0
005242c4 : MOV ECX,dword ptr [ESI + 0x8]
005242c7 : CMP ECX,EBX
005242c9 : JZ 0x005242d0
005242cb : CALL 0x004ff7e0
005242d0 : MOV dword ptr [ESI + 0x8],EDI
005242d3 : MOV EDI,dword ptr [ESP + 0x14]
005242d7 : MOV dword ptr [ESI + 0xc],EBX
005242da : MOV dword ptr [ESI + 0x10],EBX
005242dd : MOV ECX,dword ptr [EDI]
005242df : CMP ECX,EBX
005242e1 : JZ 0x005242ee
005242e3 : MOV EAX,dword ptr [ECX]
005242e5 : MOV EDX,dword ptr [EDI + 0x4]
005242e8 : MOV EAX,dword ptr [EAX + 0x4]
005242eb : PUSH EDX
005242ec : CALL EAX
005242ee : MOV ECX,dword ptr [ESI + 0x14]
005242f1 : CMP ECX,EBX
005242f3 : JZ 0x00524300
005242f5 : MOV EDX,dword ptr [ECX]
005242f7 : MOV EAX,dword ptr [ESI + 0x18]
005242fa : MOV EDX,dword ptr [EDX + 0x8]
005242fd : PUSH EAX
005242fe : CALL EDX
00524300 : MOV EAX,dword ptr [EDI]
00524302 : MOV dword ptr [ESI + 0x14],EAX
00524305 : MOV ECX,dword ptr [EDI + 0x4]
00524308 : POP EDI
00524309 : MOV dword ptr [ESI + 0x18],ECX
0052430c : MOV EAX,ESI
0052430e : POP ESI
0052430f : POP EBX
00524310 : RET 0x8
