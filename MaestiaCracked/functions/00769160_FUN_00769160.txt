PROGRAM  : Maestia.exe
FUNCTION : FUN_00769160
ENTRY    : 00769160
BODY     : [[00769160, 007694c7]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00769160(ushort param_1,ushort param_2,ushort *param_3,ushort *param_4,uint *param_5)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  int iVar5;
  int in_ECX;
  uint uVar6;
  uint uVar7;
  float fVar8;
  float fVar9;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b19028;
  local_10 = ExceptionList;
  fVar9 = 2.0;
  uVar4 = (uint)*(ushort *)(in_ECX + 0x36e) - (uint)*(ushort *)(in_ECX + 0x36c);
  uVar6 = uVar4;
  if ((int)uVar4 < 0) {
    uVar6 = -uVar4;
  }
  fVar8 = 1.0;
  while( true ) {
    if ((uVar6 & 1) != 0) {
      fVar8 = fVar8 * fVar9;
    }
    uVar6 = uVar6 >> 1;
    if (uVar6 == 0) break;
    fVar9 = fVar9 * fVar9;
  }
  if ((int)uVar4 < 0) {
    fVar8 = 1.0 / fVar8;
  }
  uVar6 = (int)fVar8 & 0xffff;
  uVar4 = (uint)param_1;
  if (((uint)(0x3c0 / (ulonglong)(longlong)(int)uVar6) < uVar4) ||
     (uVar7 = (uint)param_2, (uint)(0x7c0 / (ulonglong)(longlong)(int)uVar6) < uVar7)) {
    ExceptionList = &local_10;
    uVar6 = FUN_00404750(L"[AvaMergeMeshEntity::_ComputeTexSizeAndLimit] Start X / Y Postion Over Error!(%d, %d)"
                         ,uVar4,param_2,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      uVar6 = (**(code **)(*(int *)*DAT_00da98e8 + 0x10))(uVar6);
    }
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
LAB_007694a5:
    ExceptionList = local_10;
    return uVar6 & 0xffffff00;
  }
  iVar5 = (int)(0x40 / (ulonglong)(longlong)(int)uVar6);
  if (((int)((ulonglong)*param_3 % (ulonglong)(longlong)iVar5) != 0) ||
     ((int)((ulonglong)*param_4 % (ulonglong)(longlong)iVar5) != 0)) {
    ExceptionList = &local_10;
    uVar6 = FUN_00404750(L"[AvaMergeMeshEntity::_ComputeTexSizeAndLimit] Start X / Y Postion 64 or 32(LowTex) Multiply Error!(%d, %d)"
                         ,uVar4,uVar7,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    local_8 = 1;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      uVar6 = (**(code **)(*(int *)*DAT_00da98e8 + 0x10))(uVar6);
    }
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    goto LAB_007694a5;
  }
  if ((uVar4 == 0) || (uVar4 == (uint)(0x200 / (ulonglong)(longlong)(int)uVar6))) {
    uVar1 = 0x200;
  }
  else if ((uVar4 == (uint)(0x100 / (ulonglong)(longlong)(int)uVar6)) ||
          (uVar4 == (uint)(0x300 / (ulonglong)(longlong)(int)uVar6))) {
    uVar1 = 0x100;
  }
  else if ((((uVar4 == (uint)(0x80 / (ulonglong)(longlong)(int)uVar6)) ||
            (uVar4 == (uint)(0x180 / (ulonglong)(longlong)(int)uVar6))) ||
           (uVar4 == (uint)(0x280 / (ulonglong)(longlong)(int)uVar6))) ||
          (uVar4 == (uint)(0x380 / (ulonglong)(longlong)(int)uVar6))) {
    uVar1 = 0x80;
  }
  else {
    uVar1 = 0x40;
  }
  *param_3 = uVar1;
  uVar1 = *param_3;
  uVar2 = (ushort)((ulonglong)uVar1 / (ulonglong)(longlong)(int)uVar6);
  *param_3 = uVar2;
  if (((uVar7 == 0) || (uVar7 == (uint)(0x200 / (ulonglong)(longlong)(int)uVar6))) ||
     ((uVar7 == (uint)(0x400 / (ulonglong)(longlong)(int)uVar6) ||
      (uVar7 == (uint)(0x600 / (ulonglong)(longlong)(int)uVar6))))) {
    uVar3 = 0x200;
  }
  else {
    if (((uVar7 == (uint)(0x100 / (ulonglong)(longlong)(int)uVar6)) ||
        (uVar7 == (uint)(0x300 / (ulonglong)(longlong)(int)uVar6))) ||
       ((uVar7 == (uint)(0x500 / (ulonglong)(longlong)(int)uVar6) ||
        (uVar7 == (uint)(0x700 / (ulonglong)(longlong)(int)uVar6))))) {
      *param_4 = 0x100;
      goto LAB_007693c6;
    }
    if ((((uVar7 != (uint)(0x80 / (ulonglong)(longlong)(int)uVar6)) &&
         (uVar7 != (uint)(0x180 / (ulonglong)(longlong)(int)uVar6))) &&
        (uVar7 != (uint)(0x280 / (ulonglong)(longlong)(int)uVar6))) &&
       (((uVar7 != (uint)(0x380 / (ulonglong)(longlong)(int)uVar6) &&
         (uVar7 != (uint)(0x480 / (ulonglong)(longlong)(int)uVar6))) &&
        ((uVar7 != (uint)(0x580 / (ulonglong)(longlong)(int)uVar6) &&
         ((uVar7 != (uint)(0x680 / (ulonglong)(longlong)(int)uVar6) &&
          (uVar7 != (uint)(0x780 / (ulonglong)(longlong)(int)uVar6))))))))) {
      *param_4 = 0x40;
      goto LAB_007693c6;
    }
    uVar3 = 0x80;
  }
  *param_4 = uVar3;
LAB_007693c6:
  iVar5 = (int)((ulonglong)*param_4 / (ulonglong)(longlong)(int)uVar6);
  uVar3 = (ushort)((ulonglong)*param_4 / (ulonglong)(longlong)(int)uVar6);
  *param_4 = uVar3;
  if (uVar2 < uVar3) {
    iVar5 = (int)((ulonglong)uVar1 / (ulonglong)(longlong)(int)uVar6);
  }
  *param_3 = (ushort)iVar5;
  *param_4 = (ushort)iVar5;
  param_5[3] = iVar5 + uVar7;
  *param_5 = uVar4;
  param_5[1] = uVar7;
  param_5[2] = iVar5 + uVar4;
  return CONCAT31((int3)(iVar5 + uVar7 >> 8),1);
}



============================================================
DISASSEMBLY
============================================================
00769160 : PUSH EBP
00769161 : MOV EBP,ESP
00769163 : PUSH -0x1
00769165 : PUSH 0xb19028
0076916a : MOV EAX,FS:[0x0]
00769170 : PUSH EAX
00769171 : SUB ESP,0x1c
00769174 : PUSH EBX
00769175 : PUSH ESI
00769176 : PUSH EDI
00769177 : MOV EAX,[0x00d66fa0]
0076917c : XOR EAX,EBP
0076917e : PUSH EAX
0076917f : LEA EAX,[EBP + -0xc]
00769182 : MOV FS:[0x0],EAX
00769188 : MOV BX,word ptr [EBP + 0xc]
0076918c : MOVZX EAX,word ptr [ECX + 0x36e]
00769193 : MOVZX ECX,word ptr [ECX + 0x36c]
0076919a : MOVSS XMM1,dword ptr [0x00cdf144]
007691a2 : SUB EAX,ECX
007691a4 : MOV ECX,EAX
007691a6 : JNS 0x007691aa
007691a8 : NEG ECX
007691aa : MOVSS XMM2,dword ptr [0x00c10fc4]
007691b2 : MOVAPS XMM0,XMM2
007691b5 : TEST CL,0x1
007691b8 : JZ 0x007691be
007691ba : MULSS XMM0,XMM1
007691be : SHR ECX,0x1
007691c0 : JZ 0x007691ce
007691c2 : MOVAPS XMM3,XMM1
007691c5 : MULSS XMM3,XMM1
007691c9 : MOVAPS XMM1,XMM3
007691cc : JMP 0x007691b5
007691ce : TEST EAX,EAX
007691d0 : JGE 0x007691d9
007691d2 : DIVSS XMM2,XMM0
007691d6 : MOVAPS XMM0,XMM2
007691d9 : CVTTSS2SI EDX,XMM0
007691dd : MOVZX EAX,DX
007691e0 : MOVZX ECX,AX
007691e3 : MOV EAX,0x3c0
007691e8 : CDQ
007691e9 : IDIV ECX
007691eb : MOVZX EDI,word ptr [EBP + 0x8]
007691ef : CMP EDI,EAX
007691f1 : JG 0x0076945f
007691f7 : MOV EAX,0x7c0
007691fc : CDQ
007691fd : IDIV ECX
007691ff : MOVZX ESI,BX
00769202 : CMP ESI,EAX
00769204 : JG 0x0076945f
0076920a : MOV EAX,0x40
0076920f : CDQ
00769210 : IDIV ECX
00769212 : MOV EBX,EAX
00769214 : MOV EAX,dword ptr [EBP + 0x10]
00769217 : MOVZX EAX,word ptr [EAX]
0076921a : CDQ
0076921b : IDIV EBX
0076921d : TEST EDX,EDX
0076921f : JNZ 0x00769414
00769225 : MOV EDX,dword ptr [EBP + 0x14]
00769228 : MOVZX EAX,word ptr [EDX]
0076922b : CDQ
0076922c : IDIV EBX
0076922e : TEST EDX,EDX
00769230 : JNZ 0x00769414
00769236 : XOR EAX,EAX
00769238 : CDQ
00769239 : IDIV ECX
0076923b : MOV EBX,EAX
0076923d : CMP EDI,EBX
0076923f : JZ 0x007692aa
00769241 : MOV EAX,0x200
00769246 : CDQ
00769247 : IDIV ECX
00769249 : CMP EDI,EAX
0076924b : JZ 0x007692aa
0076924d : MOV EAX,0x100
00769252 : CDQ
00769253 : IDIV ECX
00769255 : CMP EDI,EAX
00769257 : JZ 0x007692a3
00769259 : MOV EAX,0x300
0076925e : CDQ
0076925f : IDIV ECX
00769261 : CMP EDI,EAX
00769263 : JZ 0x007692a3
00769265 : MOV EAX,0x80
0076926a : CDQ
0076926b : IDIV ECX
0076926d : CMP EDI,EAX
0076926f : JZ 0x0076929c
00769271 : MOV EAX,0x180
00769276 : CDQ
00769277 : IDIV ECX
00769279 : CMP EDI,EAX
0076927b : JZ 0x0076929c
0076927d : MOV EAX,0x280
00769282 : CDQ
00769283 : IDIV ECX
00769285 : CMP EDI,EAX
00769287 : JZ 0x0076929c
00769289 : MOV EAX,0x380
0076928e : CDQ
0076928f : IDIV ECX
00769291 : CMP EDI,EAX
00769293 : JZ 0x0076929c
00769295 : MOV EAX,0x40
0076929a : JMP 0x007692af
0076929c : MOV EAX,0x80
007692a1 : JMP 0x007692af
007692a3 : MOV EAX,0x100
007692a8 : JMP 0x007692af
007692aa : MOV EAX,0x200
007692af : MOV EDX,dword ptr [EBP + 0x10]
007692b2 : MOV word ptr [EDX],AX
007692b5 : MOV EAX,EDX
007692b7 : MOVZX EAX,word ptr [EAX]
007692ba : CDQ
007692bb : IDIV ECX
007692bd : MOV EDX,dword ptr [EBP + 0x10]
007692c0 : MOV dword ptr [EBP + 0xc],EAX
007692c3 : MOV word ptr [EDX],AX
007692c6 : CMP ESI,EBX
007692c8 : JZ 0x007693bb
007692ce : MOV EAX,0x200
007692d3 : CDQ
007692d4 : IDIV ECX
007692d6 : CMP ESI,EAX
007692d8 : JZ 0x007693bb
007692de : MOV EAX,0x400
007692e3 : CDQ
007692e4 : IDIV ECX
007692e6 : CMP ESI,EAX
007692e8 : JZ 0x007693bb
007692ee : MOV EAX,0x600
007692f3 : CDQ
007692f4 : IDIV ECX
007692f6 : CMP ESI,EAX
007692f8 : JZ 0x007693bb
007692fe : MOV EAX,0x100
00769303 : CDQ
00769304 : IDIV ECX
00769306 : CMP ESI,EAX
00769308 : JZ 0x007693ae
0076930e : MOV EAX,0x300
00769313 : CDQ
00769314 : IDIV ECX
00769316 : CMP ESI,EAX
00769318 : JZ 0x007693ae
0076931e : MOV EAX,0x500
00769323 : CDQ
00769324 : IDIV ECX
00769326 : CMP ESI,EAX
00769328 : JZ 0x007693ae
0076932e : MOV EAX,0x700
00769333 : CDQ
00769334 : IDIV ECX
00769336 : CMP ESI,EAX
00769338 : JZ 0x007693ae
0076933a : MOV EAX,0x80
0076933f : CDQ
00769340 : IDIV ECX
00769342 : CMP ESI,EAX
00769344 : JZ 0x007693a7
00769346 : MOV EAX,0x180
0076934b : CDQ
0076934c : IDIV ECX
0076934e : CMP ESI,EAX
00769350 : JZ 0x007693a7
00769352 : MOV EAX,0x280
00769357 : CDQ
00769358 : IDIV ECX
0076935a : CMP ESI,EAX
0076935c : JZ 0x007693a7
0076935e : MOV EAX,0x380
00769363 : CDQ
00769364 : IDIV ECX
00769366 : CMP ESI,EAX
00769368 : JZ 0x007693a7
0076936a : MOV EAX,0x480
0076936f : CDQ
00769370 : IDIV ECX
00769372 : CMP ESI,EAX
00769374 : JZ 0x007693a7
00769376 : MOV EAX,0x580
0076937b : CDQ
0076937c : IDIV ECX
0076937e : CMP ESI,EAX
00769380 : JZ 0x007693a7
00769382 : MOV EAX,0x680
00769387 : CDQ
00769388 : IDIV ECX
0076938a : CMP ESI,EAX
0076938c : JZ 0x007693a7
0076938e : MOV EAX,0x780
00769393 : CDQ
00769394 : IDIV ECX
00769396 : CMP ESI,EAX
00769398 : JZ 0x007693a7
0076939a : MOV EBX,dword ptr [EBP + 0x14]
0076939d : MOV EAX,0x40
007693a2 : MOV word ptr [EBX],AX
007693a5 : JMP 0x007693c6
007693a7 : MOV EDX,0x80
007693ac : JMP 0x007693c0
007693ae : MOV EBX,dword ptr [EBP + 0x14]
007693b1 : MOV EAX,0x100
007693b6 : MOV word ptr [EBX],AX
007693b9 : JMP 0x007693c6
007693bb : MOV EDX,0x200
007693c0 : MOV EBX,dword ptr [EBP + 0x14]
007693c3 : MOV word ptr [EBX],DX
007693c6 : MOVZX EAX,word ptr [EBX]
007693c9 : CDQ
007693ca : IDIV ECX
007693cc : MOV ECX,dword ptr [EBP + 0xc]
007693cf : MOV word ptr [EBX],AX
007693d2 : CMP CX,AX
007693d5 : JNC 0x007693dc
007693d7 : MOVZX EAX,CX
007693da : JMP 0x007693df
007693dc : MOVZX EAX,AX
007693df : MOV ECX,dword ptr [EBP + 0x10]
007693e2 : MOV word ptr [ECX],AX
007693e5 : MOV ECX,dword ptr [EBP + 0x18]
007693e8 : MOV word ptr [EBX],AX
007693eb : MOVZX EAX,AX
007693ee : LEA EDX,[EAX + EDI*0x1]
007693f1 : ADD EAX,ESI
007693f3 : MOV dword ptr [ECX + 0xc],EAX
007693f6 : MOV dword ptr [ECX],EDI
007693f8 : MOV dword ptr [ECX + 0x4],ESI
007693fb : MOV dword ptr [ECX + 0x8],EDX
007693fe : MOV AL,0x1
00769400 : MOV ECX,dword ptr [EBP + -0xc]
00769403 : MOV dword ptr FS:[0x0],ECX
0076940a : POP ECX
0076940b : POP EDI
0076940c : POP ESI
0076940d : POP EBX
0076940e : MOV ESP,EBP
00769410 : POP EBP
00769411 : RET 0x14
00769414 : PUSH ESI
00769415 : PUSH EDI
00769416 : PUSH 0xc0ddb0
0076941b : LEA ESI,[EBP + -0x28]
0076941e : CALL 0x00404750
00769423 : ADD ESP,0xc
00769426 : MOV dword ptr [EBP + -0x4],0x1
0076942d : MOV ECX,dword ptr [0x00da98e8]
00769433 : MOV ECX,dword ptr [ECX]
00769435 : TEST ECX,ECX
00769437 : JZ 0x00769441
00769439 : MOV EDX,dword ptr [ECX]
0076943b : PUSH EAX
0076943c : MOV EAX,dword ptr [EDX + 0x10]
0076943f : CALL EAX
00769441 : MOV dword ptr [EBP + -0x4],0xffffffff
00769448 : CMP dword ptr [EBP + -0x10],0x8
0076944c : JC 0x00769456
0076944e : MOV ECX,dword ptr [EBP + -0x24]
00769451 : CALL 0x006f04e0
00769456 : MOV dword ptr [EBP + -0x14],0x0
0076945d : JMP 0x007694a5
0076945f : MOVZX EDX,BX
00769462 : PUSH EDX
00769463 : PUSH EDI
00769464 : PUSH 0xc0dcd8
00769469 : LEA ESI,[EBP + -0x28]
0076946c : CALL 0x00404750
00769471 : ADD ESP,0xc
00769474 : XOR ESI,ESI
00769476 : MOV dword ptr [EBP + -0x4],ESI
00769479 : MOV ECX,dword ptr [0x00da98e8]
0076947f : MOV ECX,dword ptr [ECX]
00769481 : CMP ECX,ESI
00769483 : JZ 0x0076948d
00769485 : MOV EDX,dword ptr [ECX]
00769487 : PUSH EAX
00769488 : MOV EAX,dword ptr [EDX + 0x10]
0076948b : CALL EAX
0076948d : MOV dword ptr [EBP + -0x4],0xffffffff
00769494 : CMP dword ptr [EBP + -0x10],0x8
00769498 : JC 0x007694a2
0076949a : MOV ECX,dword ptr [EBP + -0x24]
0076949d : CALL 0x006f04e0
007694a2 : MOV dword ptr [EBP + -0x14],ESI
007694a5 : XOR ECX,ECX
007694a7 : XOR AL,AL
007694a9 : MOV word ptr [EBP + -0x24],CX
007694ad : MOV dword ptr [EBP + -0x10],0x7
007694b4 : MOV ECX,dword ptr [EBP + -0xc]
007694b7 : MOV dword ptr FS:[0x0],ECX
007694be : POP ECX
007694bf : POP EDI
007694c0 : POP ESI
007694c1 : POP EBX
007694c2 : MOV ESP,EBP
007694c4 : POP EBP
007694c5 : RET 0x14
