PROGRAM  : Maestia.exe
FUNCTION : FUN_005ed1a0
ENTRY    : 005ed1a0
BODY     : [[005ed1a0, 005ed2c1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ed1a0(int *param_1,GRefCountNTSImpl *param_2,uint param_3)

{
  uint uVar1;
  uint uVar2;
  code *pcVar3;
  int *piVar4;
  GRefCountNTSImpl *this;
  int *in_ECX;
  int iVar5;
  int *piVar6;
  GRefCountNTSImpl *pGVar7;
  undefined4 unaff_retaddr;
  
  piVar4 = param_1;
  uVar1 = param_1[0x10];
  uVar2 = in_ECX[1];
  param_1 = (int *)FUN_005ec580();
  in_ECX[3] = 0;
  if ((((param_3 & 1) != 0) && (param_1 < uVar2)) &&
     (*(uint *)(*(int *)(*in_ECX + (int)param_1 * 4) + 0x14) == uVar1)) {
    FUN_005ed0c0(param_1);
    param_3 = uVar1;
    param_1 = (int *)FUN_005ec580();
  }
  this = param_2;
  *(uint *)(param_2 + 0x14) = uVar1;
  *(int *)(param_2 + 4) = *(int *)(param_2 + 4) + 1;
  pcVar3 = *(code **)(*(int *)param_2 + 4);
  *(uint *)(param_2 + 0x14) = uVar1;
  pGVar7 = param_2 + 0x24;
  piVar6 = piVar4;
  for (iVar5 = 8; piVar6 = piVar6 + 1, iVar5 != 0; iVar5 = iVar5 + -1) {
    *(int *)pGVar7 = *piVar6;
    pGVar7 = pGVar7 + 4;
  }
  (*pcVar3)();
  *(int *)(this + 0x44) = piVar4[9];
  *(int *)(this + 0x48) = piVar4[10];
  *(int *)(this + 0x4c) = piVar4[0xb];
  *(int *)(this + 0x50) = piVar4[0xc];
  *(int *)(this + 0x54) = piVar4[0xd];
  *(int *)(this + 0x58) = piVar4[0xe];
  pcVar3 = *(code **)(*(int *)this + 0x18);
  *(int *)(this + 0x1c) = piVar4[0xf];
  *(short *)(this + 100) = (short)piVar4[0x12];
  (*pcVar3)(*(undefined1 *)((int)piVar4 + 0x4a));
  if (*piVar4 != 0) {
    (**(code **)(*(int *)this + 0x1c))(*piVar4);
  }
  FUN_005ecdb0(unaff_retaddr,&param_1);
  (**(code **)(*(int *)this + 0x70))();
  GRefCountNTSImpl::Release(this);
  return;
}



============================================================
DISASSEMBLY
============================================================
005ed1a0 : SUB ESP,0x8
005ed1a3 : PUSH EBX
005ed1a4 : MOV EBX,dword ptr [ESP + 0x10]
005ed1a8 : PUSH EBP
005ed1a9 : PUSH ESI
005ed1aa : PUSH EDI
005ed1ab : MOV EDI,dword ptr [EBX + 0x40]
005ed1ae : MOV ESI,ECX
005ed1b0 : MOV EBP,dword ptr [ESI + 0x4]
005ed1b3 : PUSH 0x5ec560
005ed1b8 : LEA EAX,[ESP + 0x14]
005ed1bc : PUSH EAX
005ed1bd : PUSH EBP
005ed1be : PUSH 0x0
005ed1c0 : PUSH ESI
005ed1c1 : MOV dword ptr [ESP + 0x28],ESI
005ed1c5 : MOV dword ptr [ESP + 0x24],EDI
005ed1c9 : CALL 0x005ec580
005ed1ce : ADD ESP,0x14
005ed1d1 : TEST byte ptr [ESP + 0x24],0x1
005ed1d6 : MOV dword ptr [ESP + 0x1c],EAX
005ed1da : MOV dword ptr [ESI + 0xc],0x0
005ed1e1 : JZ 0x005ed21a
005ed1e3 : CMP EAX,EBP
005ed1e5 : JNC 0x005ed21a
005ed1e7 : MOV ECX,dword ptr [ESI]
005ed1e9 : MOV EDX,dword ptr [ECX + EAX*0x4]
005ed1ec : CMP dword ptr [EDX + 0x14],EDI
005ed1ef : JNZ 0x005ed21a
005ed1f1 : PUSH EAX
005ed1f2 : MOV ECX,ESI
005ed1f4 : CALL 0x005ed0c0
005ed1f9 : MOV EAX,dword ptr [ESI + 0x4]
005ed1fc : PUSH 0x5ec560
005ed201 : LEA ECX,[ESP + 0x28]
005ed205 : PUSH ECX
005ed206 : PUSH EAX
005ed207 : PUSH 0x0
005ed209 : PUSH ESI
005ed20a : MOV dword ptr [ESP + 0x38],EDI
005ed20e : CALL 0x005ec580
005ed213 : ADD ESP,0x14
005ed216 : MOV dword ptr [ESP + 0x1c],EAX
005ed21a : MOV EBP,dword ptr [ESP + 0x20]
005ed21e : MOV dword ptr [EBP + 0x14],EDI
005ed221 : MOV dword ptr [ESP + 0x20],EBP
005ed225 : INC dword ptr [EBP + 0x4]
005ed228 : MOV EDX,dword ptr [EBP]
005ed22b : MOV EAX,dword ptr [EDX + 0x4]
005ed22e : MOV dword ptr [EBP + 0x14],EDI
005ed231 : LEA ESI,[EBX + 0x4]
005ed234 : LEA EDI,[EBP + 0x24]
005ed237 : MOV ECX,0x8
005ed23c : MOVSD.REP ES:EDI,ESI
005ed23e : MOV ECX,EBP
005ed240 : CALL EAX
005ed242 : FLD float ptr [EBX + 0x24]
005ed245 : FSTP float ptr [EBP + 0x44]
005ed248 : FLD float ptr [EBX + 0x28]
005ed24b : FSTP float ptr [EBP + 0x48]
005ed24e : FLD float ptr [EBX + 0x2c]
005ed251 : FSTP float ptr [EBP + 0x4c]
005ed254 : FLD float ptr [EBX + 0x30]
005ed257 : FSTP float ptr [EBP + 0x50]
005ed25a : FLD float ptr [EBX + 0x34]
005ed25d : FSTP float ptr [EBP + 0x54]
005ed260 : FLD float ptr [EBX + 0x38]
005ed263 : FSTP float ptr [EBP + 0x58]
005ed266 : MOV EDX,dword ptr [EBP]
005ed269 : FLD float ptr [EBX + 0x3c]
005ed26c : MOV EDX,dword ptr [EDX + 0x18]
005ed26f : FSTP float ptr [EBP + 0x1c]
005ed272 : MOV CX,word ptr [EBX + 0x48]
005ed276 : MOV word ptr [EBP + 0x64],CX
005ed27a : MOVZX EAX,byte ptr [EBX + 0x4a]
005ed27e : PUSH EAX
005ed27f : MOV ECX,EBP
005ed281 : CALL EDX
005ed283 : MOV EBX,dword ptr [EBX]
005ed285 : TEST EBX,EBX
005ed287 : JZ 0x005ed294
005ed289 : MOV EAX,dword ptr [EBP]
005ed28c : MOV EDX,dword ptr [EAX + 0x1c]
005ed28f : PUSH EBX
005ed290 : MOV ECX,EBP
005ed292 : CALL EDX
005ed294 : MOV ECX,dword ptr [ESP + 0x1c]
005ed298 : LEA EAX,[ESP + 0x20]
005ed29c : PUSH EAX
005ed29d : PUSH ECX
005ed29e : MOV ECX,dword ptr [ESP + 0x1c]
005ed2a2 : CALL 0x005ecdb0
005ed2a7 : MOV EDX,dword ptr [EBP]
005ed2aa : MOV EAX,dword ptr [EDX + 0x70]
005ed2ad : MOV ECX,EBP
005ed2af : CALL EAX
005ed2b1 : MOV ECX,EBP
005ed2b3 : CALL 0x004ff7c0
005ed2b8 : POP EDI
005ed2b9 : POP ESI
005ed2ba : POP EBP
005ed2bb : POP EBX
005ed2bc : ADD ESP,0x8
005ed2bf : RET 0xc
