PROGRAM  : Maestia.exe
FUNCTION : FUN_00a5d100
ENTRY    : 00a5d100
BODY     : [[00a5d100, 00a5d2e1]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_00a5d100(int param_1,char *param_2)

{
  int *piVar1;
  char cVar2;
  uint uVar3;
  char *pcVar4;
  size_t _Size;
  int iVar5;
  int *piVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  int iVar9;
  undefined1 *puVar10;
  undefined1 auStack_138 [16];
  undefined4 uStack_128;
  undefined **appuStack_11c [2];
  undefined **local_114;
  void *local_c;
  undefined1 *puStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  puStack_8 = &LAB_00b475e5;
  local_c = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffeb8;
  ExceptionList = &local_c;
  pcVar4 = param_2;
  do {
    cVar2 = *pcVar4;
    pcVar4 = pcVar4 + 1;
  } while (cVar2 != '\0');
  if (pcVar4 != param_2 + 1) {
    pcVar4 = param_2;
    do {
      cVar2 = *pcVar4;
      pcVar4 = pcVar4 + 1;
    } while (cVar2 != '\0');
    _Size = (int)pcVar4 - (int)(param_2 + 1);
    if (_Size != 0) {
      _memmove((void *)(param_1 + 0x14),param_2,_Size);
    }
    *(size_t *)(param_1 + 0x10) = _Size;
    *(undefined1 *)(_Size + 0x14 + param_1) = 0;
    FUN_00451af0(uVar3);
    local_4 = 0;
    piVar1 = (int *)(param_1 + 4);
    iVar5 = FUN_00a5cf00();
    *piVar1 = iVar5;
    local_4 = 0xffffffff;
    local_114 = &PTR_FUN_00cd3f48;
    if ((*piVar1 == 0) && (piVar6 = (int *)FUN_00714bf0(), piVar6 != (int *)0x0)) {
      (**(code **)(*piVar6 + 0x10))();
      uVar7 = FUN_0070a3a0();
      iVar5 = *piVar6;
      uVar8 = (**(code **)(iVar5 + 0x10))();
      iVar5 = (**(code **)(iVar5 + 0x1c))(uVar7,uVar8);
      iVar9 = (**(code **)(*piVar6 + 0x10))();
      if (iVar5 == iVar9) {
        puVar10 = auStack_138;
        uVar8 = (**(code **)(*piVar6 + 0x10))(puVar10);
        iVar5 = D3DXGetImageInfoFromFileInMemory(uVar7,uVar8,puVar10);
        uVar8 = DAT_01720efc;
        if (iVar5 == 0) {
          (**(code **)(*piVar6 + 0x10))
                    (0xffffffff,0xffffffff,0xffffffff,uStack_128,DAT_00da9b33 == '\0',0x70004,
                     0x70004,0,auStack_138,piVar1,0);
          iVar5 = FUN_007b4450(uVar8,uVar7);
          if (iVar5 == 0) {
            FUN_00451af0();
            local_c = (void *)0x1;
            FUN_00a5d010(appuStack_11c);
            local_c = (void *)0xffffffff;
            appuStack_11c[0] = &PTR_FUN_00cd3f48;
          }
        }
      }
      FUN_0070a260(uVar7);
      FUN_00455a20();
    }
  }
  ExceptionList = local_c;
  return *(int *)(param_1 + 4) != 0;
}



============================================================
DISASSEMBLY
============================================================
00a5d100 : PUSH -0x1
00a5d102 : PUSH 0xb475e5
00a5d107 : MOV EAX,FS:[0x0]
00a5d10d : PUSH EAX
00a5d10e : SUB ESP,0x12c
00a5d114 : PUSH EBX
00a5d115 : PUSH EBP
00a5d116 : PUSH ESI
00a5d117 : PUSH EDI
00a5d118 : MOV EAX,[0x00d66fa0]
00a5d11d : XOR EAX,ESP
00a5d11f : PUSH EAX
00a5d120 : LEA EAX,[ESP + 0x140]
00a5d127 : MOV FS:[0x0],EAX
00a5d12d : MOV EBP,dword ptr [ESP + 0x154]
00a5d134 : MOV EAX,EBP
00a5d136 : LEA EDX,[EAX + 0x1]
00a5d139 : LEA ESP,[ESP]
00a5d140 : MOV CL,byte ptr [EAX]
00a5d142 : INC EAX
00a5d143 : TEST CL,CL
00a5d145 : JNZ 0x00a5d140
00a5d147 : SUB EAX,EDX
00a5d149 : JZ 0x00a5d2b7
00a5d14f : MOV EAX,EBP
00a5d151 : LEA EDX,[EAX + 0x1]
00a5d154 : MOV CL,byte ptr [EAX]
00a5d156 : INC EAX
00a5d157 : TEST CL,CL
00a5d159 : JNZ 0x00a5d154
00a5d15b : MOV EBX,dword ptr [ESP + 0x150]
00a5d162 : SUB EAX,EDX
00a5d164 : MOV ESI,EAX
00a5d166 : JZ 0x00a5d176
00a5d168 : PUSH ESI
00a5d169 : LEA EAX,[EBX + 0x14]
00a5d16c : PUSH EBP
00a5d16d : PUSH EAX
00a5d16e : CALL 0x00636880
00a5d173 : ADD ESP,0xc
00a5d176 : MOV dword ptr [EBX + 0x10],ESI
00a5d179 : MOV byte ptr [ESI + EBX*0x1 + 0x14],0x0
00a5d17e : MOV EDX,EBP
00a5d180 : LEA ESI,[ESP + 0x38]
00a5d184 : CALL 0x00451af0
00a5d189 : MOV dword ptr [ESP + 0x148],0x0
00a5d194 : MOV ECX,ESI
00a5d196 : LEA EDI,[EBX + 0x4]
00a5d199 : CALL 0x00a5cf00
00a5d19e : MOV dword ptr [EDI],EAX
00a5d1a0 : MOV dword ptr [ESP + 0x148],0xffffffff
00a5d1ab : CMP dword ptr [EDI],0x0
00a5d1ae : MOV dword ptr [ESP + 0x38],0xcd3f48
00a5d1b6 : JNZ 0x00a5d2be
00a5d1bc : MOV ECX,EBP
00a5d1be : CALL 0x00714bf0
00a5d1c3 : MOV EBP,EAX
00a5d1c5 : TEST EBP,EBP
00a5d1c7 : JZ 0x00a5d2be
00a5d1cd : MOV EDX,dword ptr [EBP]
00a5d1d0 : MOV EAX,dword ptr [EDX + 0x10]
00a5d1d3 : MOV ECX,EBP
00a5d1d5 : CALL EAX
00a5d1d7 : MOV ECX,EAX
00a5d1d9 : INC ECX
00a5d1da : CALL 0x0070a3a0
00a5d1df : MOV ESI,dword ptr [EBP]
00a5d1e2 : MOV EDX,dword ptr [ESI + 0x10]
00a5d1e5 : MOV ECX,EBP
00a5d1e7 : MOV EBX,EAX
00a5d1e9 : CALL EDX
00a5d1eb : PUSH EAX
00a5d1ec : MOV EAX,dword ptr [ESI + 0x1c]
00a5d1ef : PUSH EBX
00a5d1f0 : MOV ECX,EBP
00a5d1f2 : CALL EAX
00a5d1f4 : MOV EDX,dword ptr [EBP]
00a5d1f7 : MOV ESI,EAX
00a5d1f9 : MOV EAX,dword ptr [EDX + 0x10]
00a5d1fc : MOV ECX,EBP
00a5d1fe : CALL EAX
00a5d200 : CMP ESI,EAX
00a5d202 : JNZ 0x00a5d2a7
00a5d208 : MOV EDX,dword ptr [EBP]
00a5d20b : MOV EAX,dword ptr [EDX + 0x10]
00a5d20e : LEA ECX,[ESP + 0x1c]
00a5d212 : PUSH ECX
00a5d213 : MOV ECX,EBP
00a5d215 : CALL EAX
00a5d217 : PUSH EAX
00a5d218 : PUSH EBX
00a5d219 : CALL 0x00664ccc
00a5d21e : TEST EAX,EAX
00a5d220 : JNZ 0x00a5d2a7
00a5d226 : PUSH EAX
00a5d227 : MOV ESI,dword ptr [0x01720efc]
00a5d22d : PUSH EDI
00a5d22e : XOR EDX,EDX
00a5d230 : CMP byte ptr [0x00da9b33],DL
00a5d236 : LEA ECX,[ESP + 0x24]
00a5d23a : PUSH ECX
00a5d23b : PUSH EAX
00a5d23c : MOV EAX,dword ptr [ESP + 0x3c]
00a5d240 : PUSH 0x70004
00a5d245 : SETZ DL
00a5d248 : PUSH 0x70004
00a5d24d : MOV ECX,EBP
00a5d24f : PUSH EDX
00a5d250 : MOV EDX,dword ptr [EBP]
00a5d253 : PUSH EAX
00a5d254 : MOV EAX,dword ptr [EDX + 0x10]
00a5d257 : PUSH -0x1
00a5d259 : PUSH -0x1
00a5d25b : PUSH -0x1
00a5d25d : CALL EAX
00a5d25f : PUSH EBX
00a5d260 : PUSH ESI
00a5d261 : MOV ECX,EAX
00a5d263 : CALL 0x007b4450
00a5d268 : ADD ESP,0x34
00a5d26b : TEST EAX,EAX
00a5d26d : JNZ 0x00a5d2a7
00a5d26f : MOV EDX,dword ptr [ESP + 0x154]
00a5d276 : LEA ESI,[ESP + 0x38]
00a5d27a : CALL 0x00451af0
00a5d27f : MOV dword ptr [ESP + 0x148],0x1
00a5d28a : MOV EDI,dword ptr [EDI]
00a5d28c : MOV ECX,ESI
00a5d28e : PUSH ECX
00a5d28f : CALL 0x00a5d010
00a5d294 : MOV dword ptr [ESP + 0x148],0xffffffff
00a5d29f : MOV dword ptr [ESP + 0x38],0xcd3f48
00a5d2a7 : PUSH EBX
00a5d2a8 : CALL 0x0070a260
00a5d2ad : ADD ESP,0x4
00a5d2b0 : MOV ESI,EBP
00a5d2b2 : CALL 0x00455a20
00a5d2b7 : MOV EBX,dword ptr [ESP + 0x150]
00a5d2be : XOR EAX,EAX
00a5d2c0 : CMP dword ptr [EBX + 0x4],EAX
00a5d2c3 : SETNZ AL
00a5d2c6 : MOV ECX,dword ptr [ESP + 0x140]
00a5d2cd : MOV dword ptr FS:[0x0],ECX
00a5d2d4 : POP ECX
00a5d2d5 : POP EDI
00a5d2d6 : POP ESI
00a5d2d7 : POP EBP
00a5d2d8 : POP EBX
00a5d2d9 : ADD ESP,0x138
00a5d2df : RET 0x8
