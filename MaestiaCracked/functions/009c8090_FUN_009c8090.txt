PROGRAM  : Maestia.exe
FUNCTION : FUN_009c8090
ENTRY    : 009c8090
BODY     : [[009c8090, 009c84fa]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c8090(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int *piVar6;
  int *in_ECX;
  uint uVar7;
  int in_EDX;
  int local_38;
  int *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5bd65;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar1 = (**(code **)(*in_ECX + 0x74))(0,0,local_14);
  iVar2 = DAT_00d7c54c;
  if (iVar1 == 0) {
    if (*(char *)(in_EDX + 10) == '\0') {
      FUN_009c6f40();
      iVar2 = FUN_009f2a00(*(undefined4 *)(in_EDX + 4));
      if (iVar2 != 0) {
        piVar3 = (int *)FUN_004049b0(*(undefined4 *)(iVar2 + 0x10));
        if (piVar3 != (int *)0x0) {
          iVar1 = (**(code **)(*piVar3 + 0x3c))();
          if ((iVar1 != 0) && (5 < *(ushort *)(iVar2 + 0xac))) {
            uVar4 = FUN_00a08b70();
            if (*(int *)(*DAT_00da9894 + 700) != 0) {
              uVar5 = FUN_00824a20(DAT_0172491c,0);
              local_8 = 0;
              FUN_00968ef0(uVar5,*(undefined2 *)(iVar2 + 0xac),uVar4,4);
              local_8 = 0xffffffff;
              FUN_00406560();
            }
          }
        }
      }
    }
  }
  else {
    local_34 = *(int **)(iVar1 + 0x10);
    FUN_004437f0(&local_34);
    if (local_38 != *(int *)(iVar2 + 0x44)) {
      local_34 = *(int **)(local_38 + 0x10);
      if (local_34 != (int *)0x0) {
        iVar2 = (**(code **)(*local_34 + 0x3c))();
        if (iVar2 != 0) {
          if (*(char *)(in_EDX + 10) == '\0') {
            piVar3 = (int *)FUN_009f2a00(*(undefined4 *)(in_EDX + 4));
            if (piVar3 != (int *)0x0) {
              FUN_00a07b80();
              (**(code **)(*piVar3 + 0x58))(0);
              local_18 = 7;
              local_1c = 0;
              local_2c = 0;
              local_8 = 4;
              (**(code **)(*in_ECX + 0x60))(piVar3,local_30);
              (**(code **)(*in_ECX + 0x48))(local_30,0,0);
              local_8 = 0xffffffff;
              FUN_00406560();
            }
            iVar2 = (**(code **)(*local_34 + 0x40))();
            if ((iVar2 == 0) && (piVar3 != (int *)0x0)) {
              FUN_009c7100(piVar3);
            }
            FUN_009c6f40();
            if (piVar3 != (int *)0x0) {
              iVar2 = piVar3[4];
              iVar1 = FUN_004049b0(iVar2);
              if ((iVar1 != 0) && (6 < *(uint *)(iVar1 + 0x50))) goto LAB_009c84df;
              piVar6 = (int *)FUN_004049b0(iVar2);
              if (piVar6 == (int *)0x0) goto LAB_009c84df;
              iVar2 = (**(code **)(*piVar6 + 0x3c))();
              if (iVar2 == 0) goto LAB_009c84df;
              if (5 < *(ushort *)(piVar3 + 0x2b)) {
                uVar4 = FUN_00a08b70();
                if (*(int *)(*DAT_00da9894 + 700) != 0) {
                  uVar5 = FUN_00824a20(DAT_0172491c,0);
                  local_8 = 5;
                  FUN_00968ef0(uVar5,(short)piVar3[0x2b],uVar4,3);
                  local_8 = 0xffffffff;
                  FUN_00406560();
                }
              }
            }
            FUN_008a1050(0x33);
            uVar7 = 0;
          }
          else {
            if (*(char *)(in_EDX + 10) != '\x01') goto LAB_009c84df;
            piVar3 = (int *)FUN_009f2a00(*(undefined4 *)(in_EDX + 4));
            if (piVar3 != (int *)0x0) {
              FUN_00a07b80();
              (**(code **)(*piVar3 + 0x58))(0);
              local_18 = 7;
              local_1c = 0;
              local_2c = 0;
              local_8 = 1;
              (**(code **)(*in_ECX + 0x60))(piVar3,local_30);
              (**(code **)(*in_ECX + 0x48))(local_30,0,0);
              iVar2 = (**(code **)(*local_34 + 0x40))();
              if (iVar2 == 0) {
                FUN_009c7100(piVar3);
              }
              if (6 < *(ushort *)(piVar3 + 0x2b)) {
                uVar4 = FUN_00a08b70();
                if (*(int *)(*DAT_00da9894 + 700) != 0) {
                  uVar5 = FUN_00824a20(DAT_0172491c,0);
                  local_8._0_1_ = 2;
                  FUN_00968ef0(uVar5,(short)piVar3[0x2b],uVar4,2);
                  local_8 = CONCAT31(local_8._1_3_,1);
                  FUN_00406560();
                }
              }
              iVar2 = FUN_00824a20(DAT_0172491c,0);
              local_8._0_1_ = 3;
              if (*(uint *)(iVar2 + 0x18) < 8) {
                iVar2 = iVar2 + 4;
              }
              else {
                iVar2 = *(int *)(iVar2 + 4);
              }
              FUN_009adfc0(*(undefined4 *)(*DAT_00da9894 + 0x1a8),0x13,iVar2);
              local_8 = CONCAT31(local_8._1_3_,1);
              FUN_00406560();
              local_8 = 0xffffffff;
              FUN_00406560();
            }
            if ((*DAT_00da9894 != 0) &&
               (piVar3 = *(int **)(*DAT_00da9894 + 0x114), piVar3 != (int *)0x0)) {
              (**(code **)(*piVar3 + 4))(piVar3,"EnchantPlayEffect",&DAT_00c92400,1);
            }
            FUN_008a1050(0x32);
            uVar7 = *(ushort *)(in_EDX + 8) | 0x10000;
          }
          FUN_0086d840(3,uVar7);
        }
      }
    }
  }
LAB_009c84df:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009c8090 : PUSH EBP
009c8091 : MOV EBP,ESP
009c8093 : PUSH -0x1
009c8095 : PUSH 0xb5bd65
009c809a : MOV EAX,FS:[0x0]
009c80a0 : PUSH EAX
009c80a1 : SUB ESP,0x84
009c80a7 : MOV EAX,[0x00d66fa0]
009c80ac : XOR EAX,EBP
009c80ae : MOV dword ptr [EBP + -0x10],EAX
009c80b1 : PUSH EBX
009c80b2 : PUSH ESI
009c80b3 : PUSH EDI
009c80b4 : PUSH EAX
009c80b5 : LEA EAX,[EBP + -0xc]
009c80b8 : MOV FS:[0x0],EAX
009c80be : MOV EDI,ECX
009c80c0 : MOV EAX,dword ptr [EDI]
009c80c2 : MOV ESI,EDX
009c80c4 : MOV EDX,dword ptr [EAX + 0x74]
009c80c7 : PUSH 0x0
009c80c9 : PUSH 0x0
009c80cb : MOV dword ptr [EBP + -0x38],ESI
009c80ce : CALL EDX
009c80d0 : TEST EAX,EAX
009c80d2 : JNZ 0x009c819a
009c80d8 : CMP byte ptr [ESI + 0xa],AL
009c80db : JNZ 0x009c84df
009c80e1 : CALL 0x009c6f40
009c80e6 : MOV EAX,dword ptr [ESI + 0x4]
009c80e9 : MOV ECX,dword ptr [0x017247f0]
009c80ef : PUSH EAX
009c80f0 : CALL 0x009f2a00
009c80f5 : MOV EDI,EAX
009c80f7 : TEST EDI,EDI
009c80f9 : JZ 0x009c84df
009c80ff : MOV EAX,dword ptr [EDI + 0x10]
009c8102 : PUSH EAX
009c8103 : CALL 0x004049b0
009c8108 : MOV ESI,EAX
009c810a : ADD ESP,0x4
009c810d : TEST ESI,ESI
009c810f : JZ 0x009c84df
009c8115 : MOV EDX,dword ptr [ESI]
009c8117 : MOV EAX,dword ptr [EDX + 0x3c]
009c811a : MOV ECX,ESI
009c811c : CALL EAX
009c811e : TEST EAX,EAX
009c8120 : JZ 0x009c84df
009c8126 : MOVZX EAX,word ptr [EDI + 0xac]
009c812d : MOV ECX,0x6
009c8132 : CMP CX,AX
009c8135 : JA 0x009c84df
009c813b : MOV ECX,EDI
009c813d : CALL 0x00a08b70
009c8142 : MOV EDX,dword ptr [0x00da9894]
009c8148 : MOV EBX,EAX
009c814a : MOV EAX,dword ptr [EDX]
009c814c : CMP dword ptr [EAX + 0x2bc],0x0
009c8153 : JZ 0x009c84df
009c8159 : MOV EAX,[0x0172491c]
009c815e : PUSH 0x0
009c8160 : LEA EDX,[ESI + 0x18]
009c8163 : PUSH EAX
009c8164 : LEA ESI,[EBP + -0x2c]
009c8167 : CALL 0x00824a20
009c816c : MOV dword ptr [EBP + -0x4],0x0
009c8173 : MOVZX ECX,word ptr [EDI + 0xac]
009c817a : PUSH 0x4
009c817c : MOVZX ECX,CX
009c817f : PUSH EBX
009c8180 : PUSH ECX
009c8181 : PUSH EAX
009c8182 : CALL 0x00968ef0
009c8187 : MOV dword ptr [EBP + -0x4],0xffffffff
009c818e : MOV ECX,ESI
009c8190 : CALL 0x00406560
009c8195 : JMP 0x009c84df
009c819a : MOV EDX,dword ptr [EAX + 0x10]
009c819d : MOV EBX,dword ptr [0x00d7c54c]
009c81a3 : LEA EAX,[EBP + -0x30]
009c81a6 : PUSH EAX
009c81a7 : LEA ECX,[EBX + 0x40]
009c81aa : LEA EAX,[EBP + -0x34]
009c81ad : MOV dword ptr [EBP + -0x30],EDX
009c81b0 : CALL 0x004437f0
009c81b5 : MOV EBX,dword ptr [EBX + 0x44]
009c81b8 : MOV EAX,dword ptr [EBP + -0x34]
009c81bb : CMP EAX,EBX
009c81bd : JZ 0x009c84df
009c81c3 : MOV ECX,dword ptr [EAX + 0x10]
009c81c6 : MOV dword ptr [EBP + -0x30],ECX
009c81c9 : TEST ECX,ECX
009c81cb : JZ 0x009c84df
009c81d1 : MOV EDX,dword ptr [ECX]
009c81d3 : MOV EAX,dword ptr [EDX + 0x3c]
009c81d6 : CALL EAX
009c81d8 : TEST EAX,EAX
009c81da : JZ 0x009c84df
009c81e0 : MOVZX EAX,byte ptr [ESI + 0xa]
009c81e4 : SUB EAX,0x0
009c81e7 : JZ 0x009c8388
009c81ed : SUB EAX,0x1
009c81f0 : JNZ 0x009c84df
009c81f6 : MOV ECX,dword ptr [ESI + 0x4]
009c81f9 : PUSH ECX
009c81fa : MOV ECX,dword ptr [0x017247f0]
009c8200 : CALL 0x009f2a00
009c8205 : MOV EBX,EAX
009c8207 : TEST EBX,EBX
009c8209 : JZ 0x009c833b
009c820f : MOV EDX,ESI
009c8211 : MOV AX,word ptr [EDX + 0x8]
009c8215 : MOV ESI,EBX
009c8217 : CALL 0x00a07b80
009c821c : MOV EAX,dword ptr [EBX]
009c821e : MOV EDX,dword ptr [EAX + 0x58]
009c8221 : PUSH 0x0
009c8223 : MOV ECX,EBX
009c8225 : CALL EDX
009c8227 : XOR EAX,EAX
009c8229 : MOV dword ptr [EBP + -0x14],0x7
009c8230 : MOV dword ptr [EBP + -0x18],0x0
009c8237 : MOV word ptr [EBP + -0x28],AX
009c823b : MOV dword ptr [EBP + -0x4],0x1
009c8242 : MOV EDX,dword ptr [EDI]
009c8244 : MOV EDX,dword ptr [EDX + 0x60]
009c8247 : LEA EAX,[EBP + -0x2c]
009c824a : PUSH EAX
009c824b : PUSH EBX
009c824c : MOV ECX,EDI
009c824e : CALL EDX
009c8250 : MOV EAX,dword ptr [EDI]
009c8252 : MOV EDX,dword ptr [EAX + 0x48]
009c8255 : PUSH 0x0
009c8257 : PUSH 0x0
009c8259 : LEA ECX,[EBP + -0x2c]
009c825c : PUSH ECX
009c825d : MOV ECX,EDI
009c825f : CALL EDX
009c8261 : MOV EDI,dword ptr [EBP + -0x30]
009c8264 : MOV EAX,dword ptr [EDI]
009c8266 : MOV EDX,dword ptr [EAX + 0x40]
009c8269 : MOV ECX,EDI
009c826b : CALL EDX
009c826d : TEST EAX,EAX
009c826f : JNZ 0x009c8277
009c8271 : PUSH EBX
009c8272 : CALL 0x009c7100
009c8277 : MOVZX EAX,word ptr [EBX + 0xac]
009c827e : MOV ECX,0x7
009c8283 : CMP CX,AX
009c8286 : JA 0x009c82dc
009c8288 : MOV ECX,EBX
009c828a : CALL 0x00a08b70
009c828f : MOV EDX,dword ptr [0x00da9894]
009c8295 : MOV dword ptr [EBP + -0x34],EAX
009c8298 : MOV EAX,dword ptr [EDX]
009c829a : CMP dword ptr [EAX + 0x2bc],0x0
009c82a1 : JZ 0x009c82dc
009c82a3 : MOV EAX,[0x0172491c]
009c82a8 : PUSH 0x0
009c82aa : LEA EDX,[EDI + 0x18]
009c82ad : PUSH EAX
009c82ae : LEA ESI,[EBP + -0x70]
009c82b1 : CALL 0x00824a20
009c82b6 : MOV byte ptr [EBP + -0x4],0x2
009c82ba : MOVZX ECX,word ptr [EBX + 0xac]
009c82c1 : MOV EDX,dword ptr [EBP + -0x34]
009c82c4 : PUSH 0x2
009c82c6 : MOVZX ECX,CX
009c82c9 : PUSH EDX
009c82ca : PUSH ECX
009c82cb : PUSH EAX
009c82cc : CALL 0x00968ef0
009c82d1 : MOV byte ptr [EBP + -0x4],0x1
009c82d5 : MOV ECX,ESI
009c82d7 : CALL 0x00406560
009c82dc : MOV EAX,[0x0172491c]
009c82e1 : PUSH 0x0
009c82e3 : LEA EDX,[EDI + 0x18]
009c82e6 : PUSH EAX
009c82e7 : LEA ESI,[EBP + -0x54]
009c82ea : CALL 0x00824a20
009c82ef : MOV byte ptr [EBP + -0x4],0x3
009c82f3 : CMP dword ptr [EAX + 0x18],0x8
009c82f7 : JC 0x009c82fe
009c82f9 : MOV EAX,dword ptr [EAX + 0x4]
009c82fc : JMP 0x009c8301
009c82fe : ADD EAX,0x4
009c8301 : MOV ECX,dword ptr [0x00da9894]
009c8307 : MOV ECX,dword ptr [ECX]
009c8309 : MOV ECX,dword ptr [ECX + 0x1a8]
009c830f : PUSH EAX
009c8310 : PUSH 0x13
009c8312 : PUSH ECX
009c8313 : MOV ECX,0xc923d8
009c8318 : CALL 0x009adfc0
009c831d : ADD ESP,0xc
009c8320 : MOV byte ptr [EBP + -0x4],0x1
009c8324 : LEA ECX,[EBP + -0x54]
009c8327 : CALL 0x00406560
009c832c : MOV dword ptr [EBP + -0x4],0xffffffff
009c8333 : LEA ECX,[EBP + -0x2c]
009c8336 : CALL 0x00406560
009c833b : MOV EDX,dword ptr [0x00da9894]
009c8341 : MOV EAX,dword ptr [EDX]
009c8343 : TEST EAX,EAX
009c8345 : JZ 0x009c8368
009c8347 : MOV EAX,dword ptr [EAX + 0x114]
009c834d : TEST EAX,EAX
009c834f : JZ 0x009c8368
009c8351 : MOV ECX,dword ptr [EAX]
009c8353 : MOV EDX,dword ptr [ECX + 0x4]
009c8356 : PUSH 0x1
009c8358 : PUSH 0xc92400
009c835d : PUSH 0xc92404
009c8362 : PUSH EAX
009c8363 : CALL EDX
009c8365 : ADD ESP,0x10
009c8368 : MOV ECX,dword ptr [0x017248dc]
009c836e : PUSH 0x32
009c8370 : CALL 0x008a1050
009c8375 : MOV EAX,dword ptr [EBP + -0x38]
009c8378 : MOVZX ECX,word ptr [EAX + 0x8]
009c837c : OR ECX,0x10000
009c8382 : PUSH ECX
009c8383 : JMP 0x009c84d8
009c8388 : MOV EDX,dword ptr [ESI + 0x4]
009c838b : MOV ECX,dword ptr [0x017247f0]
009c8391 : PUSH EDX
009c8392 : CALL 0x009f2a00
009c8397 : MOV EBX,EAX
009c8399 : TEST EBX,EBX
009c839b : JZ 0x009c83fc
009c839d : MOV AX,word ptr [ESI + 0x8]
009c83a1 : MOV ESI,EBX
009c83a3 : CALL 0x00a07b80
009c83a8 : MOV EAX,dword ptr [EBX]
009c83aa : MOV EDX,dword ptr [EAX + 0x58]
009c83ad : PUSH 0x0
009c83af : MOV ECX,EBX
009c83b1 : CALL EDX
009c83b3 : XOR EAX,EAX
009c83b5 : MOV dword ptr [EBP + -0x14],0x7
009c83bc : MOV dword ptr [EBP + -0x18],0x0
009c83c3 : MOV word ptr [EBP + -0x28],AX
009c83c7 : MOV dword ptr [EBP + -0x4],0x4
009c83ce : MOV EDX,dword ptr [EDI]
009c83d0 : MOV EDX,dword ptr [EDX + 0x60]
009c83d3 : LEA EAX,[EBP + -0x2c]
009c83d6 : PUSH EAX
009c83d7 : PUSH EBX
009c83d8 : MOV ECX,EDI
009c83da : CALL EDX
009c83dc : MOV EAX,dword ptr [EDI]
009c83de : MOV EDX,dword ptr [EAX + 0x48]
009c83e1 : PUSH 0x0
009c83e3 : PUSH 0x0
009c83e5 : LEA ECX,[EBP + -0x2c]
009c83e8 : PUSH ECX
009c83e9 : MOV ECX,EDI
009c83eb : CALL EDX
009c83ed : MOV dword ptr [EBP + -0x4],0xffffffff
009c83f4 : LEA ECX,[EBP + -0x2c]
009c83f7 : CALL 0x00406560
009c83fc : MOV ECX,dword ptr [EBP + -0x30]
009c83ff : MOV EAX,dword ptr [ECX]
009c8401 : MOV EDX,dword ptr [EAX + 0x40]
009c8404 : CALL EDX
009c8406 : TEST EAX,EAX
009c8408 : JNZ 0x009c8414
009c840a : TEST EBX,EBX
009c840c : JZ 0x009c8414
009c840e : PUSH EBX
009c840f : CALL 0x009c7100
009c8414 : CALL 0x009c6f40
009c8419 : TEST EBX,EBX
009c841b : JZ 0x009c84c9
009c8421 : MOV ESI,dword ptr [EBX + 0x10]
009c8424 : PUSH ESI
009c8425 : CALL 0x004049b0
009c842a : ADD ESP,0x4
009c842d : TEST EAX,EAX
009c842f : JZ 0x009c843b
009c8431 : CMP dword ptr [EAX + 0x50],0x6
009c8435 : JA 0x009c84df
009c843b : PUSH ESI
009c843c : CALL 0x004049b0
009c8441 : MOV ESI,EAX
009c8443 : ADD ESP,0x4
009c8446 : TEST ESI,ESI
009c8448 : JZ 0x009c84df
009c844e : MOV EAX,dword ptr [ESI]
009c8450 : MOV EDX,dword ptr [EAX + 0x3c]
009c8453 : MOV ECX,ESI
009c8455 : CALL EDX
009c8457 : TEST EAX,EAX
009c8459 : JZ 0x009c84df
009c845f : MOVZX EAX,word ptr [EBX + 0xac]
009c8466 : MOV ECX,0x6
009c846b : CMP CX,AX
009c846e : JA 0x009c84c9
009c8470 : MOV ECX,EBX
009c8472 : CALL 0x00a08b70
009c8477 : MOV EDX,dword ptr [0x00da9894]
009c847d : MOV EDI,EAX
009c847f : MOV EAX,dword ptr [EDX]
009c8481 : CMP dword ptr [EAX + 0x2bc],0x0
009c8488 : JZ 0x009c84c9
009c848a : MOV EAX,[0x0172491c]
009c848f : PUSH 0x0
009c8491 : LEA EDX,[ESI + 0x18]
009c8494 : PUSH EAX
009c8495 : LEA ESI,[EBP + 0xffffff74]
009c849b : CALL 0x00824a20
009c84a0 : MOV dword ptr [EBP + -0x4],0x5
009c84a7 : MOVZX ECX,word ptr [EBX + 0xac]
009c84ae : PUSH 0x3
009c84b0 : MOVZX ECX,CX
009c84b3 : PUSH EDI
009c84b4 : PUSH ECX
009c84b5 : PUSH EAX
009c84b6 : CALL 0x00968ef0
009c84bb : MOV dword ptr [EBP + -0x4],0xffffffff
009c84c2 : MOV ECX,ESI
009c84c4 : CALL 0x00406560
009c84c9 : MOV ECX,dword ptr [0x017248dc]
009c84cf : PUSH 0x33
009c84d1 : CALL 0x008a1050
009c84d6 : PUSH 0x0
009c84d8 : PUSH 0x3
009c84da : CALL 0x0086d840
009c84df : MOV ECX,dword ptr [EBP + -0xc]
009c84e2 : MOV dword ptr FS:[0x0],ECX
009c84e9 : POP ECX
009c84ea : POP EDI
009c84eb : POP ESI
009c84ec : POP EBX
009c84ed : MOV ECX,dword ptr [EBP + -0x10]
009c84f0 : XOR ECX,EBP
009c84f2 : CALL 0x00633e6b
009c84f7 : MOV ESP,EBP
009c84f9 : POP EBP
009c84fa : RET
