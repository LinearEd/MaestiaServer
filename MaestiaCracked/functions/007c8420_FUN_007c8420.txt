PROGRAM  : Maestia.exe
FUNCTION : FUN_007c8420
ENTRY    : 007c8420
BODY     : [[007c8420, 007c8671]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_007c8420(undefined4 *param_1,undefined4 param_2,undefined4 param_3)

{
  undefined1 uVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  int *piVar5;
  int *piVar6;
  int *in_ECX;
  undefined1 local_30 [8];
  undefined1 local_28 [4];
  int *local_24;
  undefined **local_20;
  int *local_1c;
  undefined4 local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4828a;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 0;
  uVar4 = FUN_00801fc0(&local_20,param_2);
  local_8 = 1;
  FUN_00463a90(local_28,uVar4);
  local_8._0_1_ = 3;
  local_20 = &PTR_FUN_00cd4964;
  if (local_1c != (int *)0x0) {
    (**(code **)(*local_1c + 0x30))(uVar3);
    local_1c = (int *)0x0;
  }
  piVar5 = local_24;
  if (local_24 == (int *)0x0) {
    if (((char)in_ECX[0x36] == '\0') && (cVar2 = FUN_00802b90(in_ECX,param_2), cVar2 == '\0')) {
      *param_1 = &PTR_FUN_00cd4964;
      param_1[1] = 0;
      goto LAB_007c8649;
    }
    local_1c = (int *)FUN_006f0760(100,".\\Resource\\AvaTerrainTxtrMgr.cpp",0x51,0);
    local_8._0_1_ = 4;
    if (local_1c == (int *)0x0) {
      piVar5 = (int *)0x0;
    }
    else {
      piVar5 = (int *)FUN_00a64d30(local_1c);
    }
    local_8._0_1_ = 3;
    uVar1 = (undefined1)local_8;
    local_8._0_1_ = 3;
    piVar6 = piVar5;
    local_1c = piVar5;
    if (piVar5 != (int *)0x0) {
      cVar2 = FUN_00a65100(param_2,param_3);
      if (cVar2 == '\0') {
        (**(code **)*piVar5)(1);
        local_1c = (int *)0x0;
        piVar6 = local_1c;
        uVar1 = (undefined1)local_8;
      }
      else {
        piVar5[0xd] = (int)in_ECX;
        cVar2 = (**(code **)(*in_ECX + 0xc))(piVar5);
        piVar6 = local_1c;
        uVar1 = (undefined1)local_8;
        if (cVar2 == '\0') {
          piVar5[0xd] = 0;
          (**(code **)*piVar5)(1);
          local_1c = (int *)0x0;
          FUN_00801fc0(local_30,param_2);
          local_8._0_1_ = 5;
          FUN_00463a60();
          local_8._0_1_ = 3;
          FUN_0045f640();
          piVar5 = local_24;
          piVar6 = local_1c;
          uVar1 = (undefined1)local_8;
          if (local_24 != (int *)0x0) {
            (**(code **)(*local_24 + 0x20))();
            if ((piVar5[0xe] == 0) || ((char)local_24[9] == '\0')) {
              FUN_00a65100(param_2,param_3);
              FUN_0043a270();
            }
            else {
              (**(code **)(*local_24 + 0x28))();
              FUN_0043a270();
            }
            goto LAB_007c8649;
          }
        }
      }
    }
  }
  else {
    (**(code **)(*local_24 + 0x20))();
    piVar6 = local_24;
    if ((piVar5[0xe] == 0) || ((char)local_24[9] == '\0')) {
      if ((char)local_24[9] == '\0') {
        (**(code **)(*local_24 + 0x28))();
        FUN_00405eb0(param_2,0,0xffffffff);
        *(undefined1 *)(piVar6 + 0x18) = (undefined1)param_3;
        FUN_00a64d90(piVar6);
      }
      *param_1 = &PTR_FUN_00cd4964;
      param_1[1] = local_24;
      if (local_24 != (int *)0x0) {
        InterlockedIncrement(local_24 + 0xb);
      }
      goto LAB_007c8649;
    }
    (**(code **)(*local_24 + 0x28))();
    piVar6 = local_24;
    uVar1 = (undefined1)local_8;
  }
  local_8._0_1_ = uVar1;
  param_1[1] = piVar6;
  *param_1 = &PTR_FUN_00cd4964;
  if (piVar6 != (int *)0x0) {
    InterlockedIncrement(piVar6 + 0xb);
  }
LAB_007c8649:
  local_18 = 1;
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_0045f5a0();
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
007c8420 : PUSH EBP
007c8421 : MOV EBP,ESP
007c8423 : PUSH -0x1
007c8425 : PUSH 0xb4828a
007c842a : MOV EAX,FS:[0x0]
007c8430 : PUSH EAX
007c8431 : SUB ESP,0x20
007c8434 : PUSH EBX
007c8435 : PUSH ESI
007c8436 : PUSH EDI
007c8437 : MOV EAX,[0x00d66fa0]
007c843c : XOR EAX,EBP
007c843e : PUSH EAX
007c843f : LEA EAX,[EBP + -0xc]
007c8442 : MOV FS:[0x0],EAX
007c8448 : MOV EBX,dword ptr [EBP + 0x8]
007c844b : MOV EDI,ECX
007c844d : MOV ESI,dword ptr [EBP + 0xc]
007c8450 : PUSH ESI
007c8451 : LEA EAX,[EBP + -0x1c]
007c8454 : PUSH EAX
007c8455 : MOV dword ptr [EBP + -0x14],0x0
007c845c : CALL 0x00801fc0
007c8461 : MOV dword ptr [EBP + -0x4],0x1
007c8468 : PUSH EAX
007c8469 : LEA ECX,[EBP + -0x24]
007c846c : PUSH ECX
007c846d : CALL 0x00463a90
007c8472 : MOV byte ptr [EBP + -0x4],0x3
007c8476 : MOV ECX,dword ptr [EBP + -0x18]
007c8479 : MOV dword ptr [EBP + -0x1c],0xcd4964
007c8480 : TEST ECX,ECX
007c8482 : JZ 0x007c8492
007c8484 : MOV EDX,dword ptr [ECX]
007c8486 : MOV EAX,dword ptr [EDX + 0x30]
007c8489 : CALL EAX
007c848b : MOV dword ptr [EBP + -0x18],0x0
007c8492 : MOV ECX,dword ptr [EBP + -0x20]
007c8495 : TEST ECX,ECX
007c8497 : JZ 0x007c8507
007c8499 : MOV EDX,dword ptr [ECX]
007c849b : MOV EAX,dword ptr [EDX + 0x20]
007c849e : MOV EDI,ECX
007c84a0 : CALL EAX
007c84a2 : CMP dword ptr [EDI + 0x38],0x0
007c84a6 : MOV ECX,dword ptr [EBP + -0x20]
007c84a9 : JZ 0x007c84c0
007c84ab : CMP byte ptr [ECX + 0x24],0x0
007c84af : JZ 0x007c84c0
007c84b1 : MOV EDX,dword ptr [ECX]
007c84b3 : MOV EAX,dword ptr [EDX + 0x28]
007c84b6 : CALL EAX
007c84b8 : MOV EAX,dword ptr [EBP + -0x20]
007c84bb : JMP 0x007c8632
007c84c0 : CMP byte ptr [ECX + 0x24],0x0
007c84c4 : MOV EDI,ECX
007c84c6 : JNZ 0x007c84eb
007c84c8 : MOV EDX,dword ptr [ECX]
007c84ca : MOV EAX,dword ptr [EDX + 0x28]
007c84cd : CALL EAX
007c84cf : PUSH -0x1
007c84d1 : PUSH 0x0
007c84d3 : PUSH ESI
007c84d4 : LEA ECX,[EDI + 0x4]
007c84d7 : CALL 0x00405eb0
007c84dc : MOV CL,byte ptr [EBP + 0x10]
007c84df : PUSH EDI
007c84e0 : MOV byte ptr [EDI + 0x60],CL
007c84e3 : CALL 0x00a64d90
007c84e8 : MOV ECX,dword ptr [EBP + -0x20]
007c84eb : MOV dword ptr [EBX],0xcd4964
007c84f1 : MOV dword ptr [EBX + 0x4],ECX
007c84f4 : TEST ECX,ECX
007c84f6 : JZ 0x007c8502
007c84f8 : ADD ECX,0x2c
007c84fb : PUSH ECX
007c84fc : CALL dword ptr [0x00b850dc]
007c8502 : JMP 0x007c8649
007c8507 : CMP byte ptr [EDI + 0xd8],0x0
007c850e : JNZ 0x007c852d
007c8510 : PUSH ESI
007c8511 : PUSH EDI
007c8512 : CALL 0x00802b90
007c8517 : TEST AL,AL
007c8519 : JNZ 0x007c852d
007c851b : MOV dword ptr [EBX],0xcd4964
007c8521 : MOV dword ptr [EBX + 0x4],0x0
007c8528 : JMP 0x007c8649
007c852d : PUSH 0x0
007c852f : PUSH 0x51
007c8531 : PUSH 0xc1da80
007c8536 : PUSH 0x64
007c8538 : CALL 0x006f0760
007c853d : ADD ESP,0x10
007c8540 : MOV dword ptr [EBP + -0x18],EAX
007c8543 : MOV byte ptr [EBP + -0x4],0x4
007c8547 : TEST EAX,EAX
007c8549 : JZ 0x007c8555
007c854b : PUSH EAX
007c854c : CALL 0x00a64d30
007c8551 : MOV ESI,EAX
007c8553 : JMP 0x007c8557
007c8555 : XOR ESI,ESI
007c8557 : MOV byte ptr [EBP + -0x4],0x3
007c855b : MOV dword ptr [EBP + -0x18],ESI
007c855e : TEST ESI,ESI
007c8560 : JZ 0x007c862f
007c8566 : MOV EDX,dword ptr [EBP + 0x10]
007c8569 : MOV EAX,dword ptr [EBP + 0xc]
007c856c : PUSH EDX
007c856d : PUSH EAX
007c856e : CALL 0x00a65100
007c8573 : TEST AL,AL
007c8575 : JZ 0x007c861e
007c857b : MOV dword ptr [ESI + 0x34],EDI
007c857e : MOV EDX,dword ptr [EDI]
007c8580 : MOV EAX,dword ptr [EDX + 0xc]
007c8583 : PUSH ESI
007c8584 : MOV ECX,EDI
007c8586 : CALL EAX
007c8588 : TEST AL,AL
007c858a : JNZ 0x007c862f
007c8590 : MOV dword ptr [ESI + 0x34],0x0
007c8597 : MOV EDX,dword ptr [ESI]
007c8599 : MOV EAX,dword ptr [EDX]
007c859b : PUSH 0x1
007c859d : MOV ECX,ESI
007c859f : CALL EAX
007c85a1 : MOV ECX,dword ptr [EBP + 0xc]
007c85a4 : PUSH ECX
007c85a5 : LEA EDX,[EBP + -0x2c]
007c85a8 : PUSH EDX
007c85a9 : MOV ECX,EDI
007c85ab : MOV dword ptr [EBP + -0x18],0x0
007c85b2 : CALL 0x00801fc0
007c85b7 : MOV byte ptr [EBP + -0x4],0x5
007c85bb : MOV ESI,EAX
007c85bd : LEA EDI,[EBP + -0x24]
007c85c0 : CALL 0x00463a60
007c85c5 : MOV byte ptr [EBP + -0x4],0x3
007c85c9 : LEA ECX,[EBP + -0x2c]
007c85cc : CALL 0x0045f640
007c85d1 : MOV ECX,dword ptr [EBP + -0x20]
007c85d4 : TEST ECX,ECX
007c85d6 : JZ 0x007c862f
007c85d8 : MOV EAX,dword ptr [ECX]
007c85da : MOV EDX,dword ptr [EAX + 0x20]
007c85dd : MOV ESI,ECX
007c85df : CALL EDX
007c85e1 : CMP dword ptr [ESI + 0x38],0x0
007c85e5 : MOV ECX,dword ptr [EBP + -0x20]
007c85e8 : JZ 0x007c8603
007c85ea : CMP byte ptr [ECX + 0x24],0x0
007c85ee : JZ 0x007c8603
007c85f0 : MOV EAX,dword ptr [ECX]
007c85f2 : MOV EDX,dword ptr [EAX + 0x28]
007c85f5 : CALL EDX
007c85f7 : MOV EAX,dword ptr [EBP + -0x20]
007c85fa : MOV ESI,EBX
007c85fc : CALL 0x0043a270
007c8601 : JMP 0x007c8649
007c8603 : MOV EAX,dword ptr [EBP + 0x10]
007c8606 : MOV EDX,dword ptr [EBP + 0xc]
007c8609 : PUSH EAX
007c860a : PUSH EDX
007c860b : MOV ESI,ECX
007c860d : CALL 0x00a65100
007c8612 : MOV EAX,dword ptr [EBP + -0x20]
007c8615 : MOV ESI,EBX
007c8617 : CALL 0x0043a270
007c861c : JMP 0x007c8649
007c861e : MOV EAX,dword ptr [ESI]
007c8620 : MOV EDX,dword ptr [EAX]
007c8622 : PUSH 0x1
007c8624 : MOV ECX,ESI
007c8626 : CALL EDX
007c8628 : MOV dword ptr [EBP + -0x18],0x0
007c862f : MOV EAX,dword ptr [EBP + -0x18]
007c8632 : MOV dword ptr [EBX + 0x4],EAX
007c8635 : MOV dword ptr [EBX],0xcd4964
007c863b : TEST EAX,EAX
007c863d : JZ 0x007c8649
007c863f : ADD EAX,0x2c
007c8642 : PUSH EAX
007c8643 : CALL dword ptr [0x00b850dc]
007c8649 : MOV dword ptr [EBP + -0x14],0x1
007c8650 : MOV byte ptr [EBP + -0x4],0x0
007c8654 : LEA ECX,[EBP + -0x24]
007c8657 : CALL 0x0045f5a0
007c865c : MOV EAX,EBX
007c865e : MOV ECX,dword ptr [EBP + -0xc]
007c8661 : MOV dword ptr FS:[0x0],ECX
007c8668 : POP ECX
007c8669 : POP EDI
007c866a : POP ESI
007c866b : POP EBX
007c866c : MOV ESP,EBP
007c866e : POP EBP
007c866f : RET 0xc
