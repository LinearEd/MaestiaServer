PROGRAM  : Maestia.exe
FUNCTION : FUN_006bb2d0
ENTRY    : 006bb2d0
BODY     : [[006bb2d0, 006bb40c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006bb2d0(int *param_1)

{
  int *piVar1;
  int iVar2;
  void *_Dst;
  int iVar3;
  undefined **ppuVar4;
  uint uVar5;
  int *piVar6;
  uint local_c;
  int local_8;
  undefined4 local_4;
  
  iVar2 = *param_1;
  local_4 = *(undefined4 *)(iVar2 + 0x5c);
  _Dst = (void *)param_1[2];
  _memset(_Dst,0xff,param_1[1]);
  iVar3 = FUN_00686b80(iVar2,0x756e6963);
  if (iVar3 == 0) {
    ppuVar4 = &PTR_DAT_00bebe80;
    local_8 = 0;
    do {
      piVar6 = *(int **)(*ppuVar4 + 4);
      if (piVar6 != (int *)0x0) {
        iVar3 = *piVar6;
        while (iVar3 != 0) {
          local_c = FUN_00686bf0(iVar2,iVar3);
          if (((local_c != 0) && (local_c < (uint)param_1[1])) &&
             (*(char *)(local_c + (int)_Dst) == -1)) {
            *(undefined1 *)(local_c + (int)_Dst) = (undefined1)local_8;
          }
          for (uVar5 = FUN_00686c10(iVar2,iVar3,&local_c);
              (local_c != 0 && (uVar5 <= (uint)piVar6[1]));
              uVar5 = FUN_00686c10(iVar2,uVar5,&local_c)) {
            if ((local_c < (uint)param_1[1]) && (*(char *)(local_c + (int)_Dst) == -1)) {
              *(undefined1 *)(local_c + (int)_Dst) = (undefined1)local_8;
            }
          }
          piVar1 = piVar6 + 2;
          piVar6 = piVar6 + 2;
          iVar3 = *piVar1;
        }
      }
      local_8 = local_8 + 1;
      ppuVar4 = &PTR_DAT_00bebe80 + local_8;
    } while ((&PTR_DAT_00bebe80)[local_8] != (undefined *)0x0);
  }
  uVar5 = 0;
  if (param_1[1] != 0) {
    do {
      if (*(char *)(uVar5 + (int)_Dst) == -1) {
        *(undefined1 *)(uVar5 + (int)_Dst) = 2;
      }
      uVar5 = uVar5 + 1;
    } while (uVar5 < (uint)param_1[1]);
  }
  FUN_00688530(iVar2,local_4);
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006bb2d0 : SUB ESP,0xc
006bb2d3 : PUSH EBP
006bb2d4 : PUSH ESI
006bb2d5 : MOV ESI,dword ptr [ESP + 0x18]
006bb2d9 : MOV ECX,dword ptr [ESI + 0x4]
006bb2dc : MOV EBP,dword ptr [ESI]
006bb2de : MOV EAX,dword ptr [EBP + 0x5c]
006bb2e1 : PUSH EDI
006bb2e2 : MOV EDI,dword ptr [ESI + 0x8]
006bb2e5 : PUSH ECX
006bb2e6 : PUSH 0xff
006bb2eb : PUSH EDI
006bb2ec : MOV dword ptr [ESP + 0x20],EAX
006bb2f0 : CALL 0x0063b700
006bb2f5 : PUSH 0x756e6963
006bb2fa : PUSH EBP
006bb2fb : CALL 0x00686b80
006bb300 : ADD ESP,0x14
006bb303 : TEST EAX,EAX
006bb305 : JNZ 0x006bb3df
006bb30b : MOV dword ptr [ESP + 0x10],EAX
006bb30f : CMP dword ptr [0x00bebe80],EAX
006bb315 : JZ 0x006bb3df
006bb31b : MOV EAX,0xbebe80
006bb320 : PUSH EBX
006bb321 : MOV EAX,dword ptr [EAX]
006bb323 : MOV EAX,dword ptr [EAX + 0x4]
006bb326 : TEST EAX,EAX
006bb328 : JZ 0x006bb3c0
006bb32e : MOV EBX,EAX
006bb330 : MOV ESI,dword ptr [EBX]
006bb332 : TEST ESI,ESI
006bb334 : JZ 0x006bb3bc
006bb33a : LEA EBX,[EBX]
006bb340 : PUSH ESI
006bb341 : PUSH EBP
006bb342 : CALL 0x00686bf0
006bb347 : ADD ESP,0x8
006bb34a : MOV dword ptr [ESP + 0x10],EAX
006bb34e : TEST EAX,EAX
006bb350 : JZ 0x006bb368
006bb352 : MOV EDX,dword ptr [ESP + 0x20]
006bb356 : CMP EAX,dword ptr [EDX + 0x4]
006bb359 : JNC 0x006bb368
006bb35b : CMP byte ptr [EAX + EDI*0x1],0xff
006bb35f : JNZ 0x006bb368
006bb361 : MOV CL,byte ptr [ESP + 0x14]
006bb365 : MOV byte ptr [EAX + EDI*0x1],CL
006bb368 : LEA EDX,[ESP + 0x10]
006bb36c : PUSH EDX
006bb36d : PUSH ESI
006bb36e : PUSH EBP
006bb36f : CALL 0x00686c10
006bb374 : MOV ECX,dword ptr [ESP + 0x1c]
006bb378 : ADD ESP,0xc
006bb37b : TEST ECX,ECX
006bb37d : JZ 0x006bb3b2
006bb37f : NOP
006bb380 : CMP EAX,dword ptr [EBX + 0x4]
006bb383 : JA 0x006bb3b2
006bb385 : MOV EDX,dword ptr [ESP + 0x20]
006bb389 : CMP ECX,dword ptr [EDX + 0x4]
006bb38c : JNC 0x006bb39b
006bb38e : CMP byte ptr [ECX + EDI*0x1],0xff
006bb392 : JNZ 0x006bb39b
006bb394 : MOV DL,byte ptr [ESP + 0x14]
006bb398 : MOV byte ptr [ECX + EDI*0x1],DL
006bb39b : LEA ECX,[ESP + 0x10]
006bb39f : PUSH ECX
006bb3a0 : PUSH EAX
006bb3a1 : PUSH EBP
006bb3a2 : CALL 0x00686c10
006bb3a7 : MOV ECX,dword ptr [ESP + 0x1c]
006bb3ab : ADD ESP,0xc
006bb3ae : TEST ECX,ECX
006bb3b0 : JNZ 0x006bb380
006bb3b2 : MOV ESI,dword ptr [EBX + 0x8]
006bb3b5 : ADD EBX,0x8
006bb3b8 : TEST ESI,ESI
006bb3ba : JNZ 0x006bb340
006bb3bc : MOV ESI,dword ptr [ESP + 0x20]
006bb3c0 : MOV EAX,dword ptr [ESP + 0x14]
006bb3c4 : INC EAX
006bb3c5 : CMP dword ptr [EAX*0x4 + 0xbebe80],0x0
006bb3cd : MOV dword ptr [ESP + 0x14],EAX
006bb3d1 : LEA EAX,[EAX*0x4 + 0xbebe80]
006bb3d8 : JNZ 0x006bb321
006bb3de : POP EBX
006bb3df : XOR EAX,EAX
006bb3e1 : CMP dword ptr [ESI + 0x4],EAX
006bb3e4 : JBE 0x006bb3f6
006bb3e6 : CMP byte ptr [EAX + EDI*0x1],0xff
006bb3ea : JNZ 0x006bb3f0
006bb3ec : MOV byte ptr [EAX + EDI*0x1],0x2
006bb3f0 : INC EAX
006bb3f1 : CMP EAX,dword ptr [ESI + 0x4]
006bb3f4 : JC 0x006bb3e6
006bb3f6 : MOV EDX,dword ptr [ESP + 0x14]
006bb3fa : PUSH EDX
006bb3fb : PUSH EBP
006bb3fc : CALL 0x00688530
006bb401 : ADD ESP,0x8
006bb404 : POP EDI
006bb405 : POP ESI
006bb406 : XOR EAX,EAX
006bb408 : POP EBP
006bb409 : ADD ESP,0xc
006bb40c : RET
