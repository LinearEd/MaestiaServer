PROGRAM  : Maestia.exe
FUNCTION : FUN_0077a180
ENTRY    : 0077a180
BODY     : [[0077a180, 0077a269]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0077a180(uint param_1)

{
  int iVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  int unaff_EDI;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b191dc;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(unaff_EDI + 0x2eef0);
  local_18 = 0;
  local_20 = ".\\Terrain\\AvaPathFinder.cpp";
  local_1c = 0xc2;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  iVar1 = *(int *)(unaff_EDI + 0x14);
  if (iVar1 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = *(int *)(unaff_EDI + 0x1c) - iVar1 >> 2;
  }
  puVar2 = *(uint **)(unaff_EDI + 0x18);
  if ((uint)((int)puVar2 - iVar1 >> 2) < uVar4) {
    *puVar2 = param_1;
    *(uint **)(unaff_EDI + 0x18) = puVar2 + 1;
  }
  else {
    FUN_004d2c60(unaff_EDI + 0x10,puVar2,&param_1);
  }
  iVar1 = *(int *)(unaff_EDI + 0x14);
  param_1 = param_1 & 0xffffff00;
  if ((iVar1 != *(int *)(unaff_EDI + 0x18)) && (0 < (*(int *)(unaff_EDI + 0x18) + -4) - iVar1 >> 2))
  {
    FUN_004861d0(iVar1,param_1,uVar3);
  }
  local_8 = 0xffffffff;
  if (local_18 != 0) {
    LeaveCriticalSection(local_24);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0077a180 : PUSH EBP
0077a181 : MOV EBP,ESP
0077a183 : PUSH -0x1
0077a185 : PUSH 0xb191dc
0077a18a : MOV EAX,FS:[0x0]
0077a190 : PUSH EAX
0077a191 : SUB ESP,0x14
0077a194 : PUSH EBX
0077a195 : PUSH ESI
0077a196 : MOV EAX,[0x00d66fa0]
0077a19b : XOR EAX,EBP
0077a19d : PUSH EAX
0077a19e : LEA EAX,[EBP + -0xc]
0077a1a1 : MOV FS:[0x0],EAX
0077a1a7 : LEA ECX,[EBP + -0x20]
0077a1aa : LEA EAX,[EDI + 0x2eef0]
0077a1b0 : XOR EBX,EBX
0077a1b2 : PUSH ECX
0077a1b3 : MOV dword ptr [EBP + -0x14],EBX
0077a1b6 : MOV dword ptr [EBP + -0x20],EAX
0077a1b9 : MOV dword ptr [EBP + -0x1c],0xc10420
0077a1c0 : MOV dword ptr [EBP + -0x18],0xc2
0077a1c7 : MOV dword ptr [EBP + -0x10],0x1
0077a1ce : CALL 0x006ef1a0
0077a1d3 : MOV dword ptr [EBP + -0x4],EBX
0077a1d6 : MOV ESI,dword ptr [EDI + 0x14]
0077a1d9 : LEA EAX,[EDI + 0x10]
0077a1dc : CMP ESI,EBX
0077a1de : JNZ 0x0077a1e4
0077a1e0 : XOR ECX,ECX
0077a1e2 : JMP 0x0077a1ec
0077a1e4 : MOV ECX,dword ptr [EAX + 0xc]
0077a1e7 : SUB ECX,ESI
0077a1e9 : SAR ECX,0x2
0077a1ec : MOV EDX,dword ptr [EAX + 0x8]
0077a1ef : MOV EBX,EDX
0077a1f1 : SUB EBX,ESI
0077a1f3 : SAR EBX,0x2
0077a1f6 : CMP EBX,ECX
0077a1f8 : JNC 0x0077a207
0077a1fa : MOV ECX,dword ptr [EBP + 0x8]
0077a1fd : MOV dword ptr [EDX],ECX
0077a1ff : ADD EDX,0x4
0077a202 : MOV dword ptr [EAX + 0x8],EDX
0077a205 : JMP 0x0077a212
0077a207 : LEA ECX,[EBP + 0x8]
0077a20a : PUSH ECX
0077a20b : PUSH EDX
0077a20c : PUSH EAX
0077a20d : CALL 0x004d2c60
0077a212 : MOV ECX,dword ptr [EDI + 0x18]
0077a215 : MOV EAX,dword ptr [EDI + 0x14]
0077a218 : XOR EBX,EBX
0077a21a : MOV byte ptr [EBP + 0x8],BL
0077a21d : CMP EAX,ECX
0077a21f : JZ 0x0077a23e
0077a221 : LEA EDX,[ECX + -0x4]
0077a224 : MOV ECX,EDX
0077a226 : SUB ECX,EAX
0077a228 : SAR ECX,0x2
0077a22b : CMP ECX,EBX
0077a22d : JLE 0x0077a23e
0077a22f : MOV ESI,dword ptr [EBP + 0x8]
0077a232 : PUSH ESI
0077a233 : MOV ESI,dword ptr [EDX]
0077a235 : PUSH EAX
0077a236 : CALL 0x004861d0
0077a23b : ADD ESP,0x8
0077a23e : MOV dword ptr [EBP + -0x4],0xffffffff
0077a245 : CMP dword ptr [EBP + -0x14],EBX
0077a248 : JZ 0x0077a257
0077a24a : MOV EDX,dword ptr [EBP + -0x20]
0077a24d : PUSH EDX
0077a24e : CALL dword ptr [0x00b8511c]
0077a254 : MOV dword ptr [EBP + -0x14],EBX
0077a257 : MOV ECX,dword ptr [EBP + -0xc]
0077a25a : MOV dword ptr FS:[0x0],ECX
0077a261 : POP ECX
0077a262 : POP ESI
0077a263 : POP EBX
0077a264 : MOV ESP,EBP
0077a266 : POP EBP
0077a267 : RET 0x4
