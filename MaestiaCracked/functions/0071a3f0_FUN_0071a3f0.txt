PROGRAM  : Maestia.exe
FUNCTION : FUN_0071a3f0
ENTRY    : 0071a3f0
BODY     : [[0071a3f0, 0071a657]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0071a3f0(void)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int *piVar3;
  undefined4 *puVar4;
  int iVar5;
  int in_ECX;
  uint uVar6;
  int local_98;
  undefined4 *local_94;
  int local_8c;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  
  local_98 = in_ECX;
  iVar5 = FUN_004c5390();
  local_94 = (undefined4 *)(iVar5 + 8 + *(int *)(in_ECX + 8) * 0xc);
  local_8c = 0;
  if (0 < *(int *)(in_ECX + 0xc)) {
    do {
      puVar2 = (undefined4 *)*local_94;
      piVar3 = *(int **)(DAT_017251ac + 0x18);
      puVar4 = (undefined4 *)local_94[2];
      local_10 = 0;
      local_14 = 0;
      local_18 = 0;
      local_1c = 0;
      local_24 = 0;
      local_28 = 0;
      local_2c = 0;
      local_30 = 0;
      local_38 = 0;
      local_3c = 0;
      local_40 = 0;
      local_44 = 0;
      local_c = 0x3f800000;
      local_20 = 0x3f800000;
      local_34 = 0x3f800000;
      local_48 = 0x3f800000;
      local_5c = 0;
      local_64 = 0;
      local_68 = 0;
      local_6c = 0;
      local_70 = 0;
      local_78 = 0;
      local_7c = 0;
      local_80 = 0;
      local_84 = 0;
      local_4c = 0x3f800000;
      local_60 = 0x3f800000;
      local_74 = 0x3f800000;
      local_88 = 0x3f800000;
      local_58 = *puVar2;
      local_54 = puVar2[1];
      local_50 = puVar2[2];
      uVar1 = *(undefined4 *)local_94[1];
      D3DXMatrixScaling(&local_48,uVar1,uVar1,uVar1);
      D3DXMatrixMultiply(&local_98,&local_58,&local_98);
      (**(code **)(*piVar3 + 0xb0))(piVar3,0x100,*(int *)(in_ECX + 4) + 0x20);
      (**(code **)(*piVar3 + 0xe4))(piVar3,0x1b,1);
      (**(code **)(*piVar3 + 0xe4))(piVar3,0x13,5);
      (**(code **)(*piVar3 + 0xe4))(piVar3,0x14,6);
      (**(code **)(*piVar3 + 0xe4))(piVar3,0xe,0);
      uVar6 = 0;
      if (puVar4[3] != 0) {
        iVar5 = 0;
        do {
          (**(code **)(*piVar3 + 0xc4))(piVar3,puVar4[1] + iVar5);
          (**(code **)(*piVar3 + 0x104))(piVar3,0,*(undefined4 *)(puVar4[2] + uVar6 * 4));
          (**(code **)(*(int *)*puVar4 + 0xc))((int *)*puVar4,uVar6);
          iVar5 = iVar5 + 0x44;
          uVar6 = uVar6 + 1;
        } while (uVar6 < (uint)puVar4[3]);
      }
      (**(code **)(*piVar3 + 0xe4))(piVar3,0xe,1);
      local_94 = local_94 + 3;
      local_8c = local_8c + 1;
      in_ECX = local_98;
    } while (local_8c < *(int *)(local_98 + 0xc));
    *(undefined4 *)(local_98 + 8) = 0xffffffff;
    *(undefined4 *)(local_98 + 0xc) = 0;
    return;
  }
  *(undefined4 *)(in_ECX + 8) = 0xffffffff;
  *(undefined4 *)(in_ECX + 0xc) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0071a3f0 : PUSH EBP
0071a3f1 : MOV EBP,ESP
0071a3f3 : AND ESP,0xfffffff8
0071a3f6 : SUB ESP,0x94
0071a3fc : PUSH EBX
0071a3fd : PUSH ESI
0071a3fe : MOV EBX,ECX
0071a400 : PUSH EDI
0071a401 : MOV dword ptr [ESP + 0x10],EBX
0071a405 : CALL 0x004c5390
0071a40a : MOV EDX,dword ptr [EBX + 0x8]
0071a40d : LEA ECX,[EDX + EDX*0x2]
0071a410 : LEA ECX,[EAX + ECX*0x4 + 0x8]
0071a414 : XOR EAX,EAX
0071a416 : CMP dword ptr [EBX + 0xc],EAX
0071a419 : MOV dword ptr [ESP + 0x14],ECX
0071a41d : MOV dword ptr [ESP + 0x1c],EAX
0071a421 : JG 0x0071a43c
0071a423 : MOV dword ptr [EBX + 0x8],0xffffffff
0071a42a : MOV dword ptr [EBX + 0xc],EAX
0071a42d : POP EDI
0071a42e : POP ESI
0071a42f : POP EBX
0071a430 : MOV ESP,EBP
0071a432 : POP EBP
0071a433 : RET
0071a434 : MOV ECX,dword ptr [ESP + 0x14]
0071a438 : MOV EBX,dword ptr [ESP + 0x10]
0071a43c : XORPS XMM0,XMM0
0071a43f : MOVSS XMM1,dword ptr [0x00c10fc4]
0071a447 : MOV EAX,dword ptr [ECX]
0071a449 : MOV EDX,dword ptr [0x017251ac]
0071a44f : MOV ESI,dword ptr [EDX + 0x18]
0071a452 : MOV EDI,dword ptr [ECX + 0x8]
0071a455 : MOVSS dword ptr [ESP + 0x58],XMM0
0071a45b : MOVSS dword ptr [ESP + 0x54],XMM0
0071a461 : MOVSS dword ptr [ESP + 0x50],XMM0
0071a467 : MOVSS dword ptr [ESP + 0x98],XMM0
0071a470 : MOVSS dword ptr [ESP + 0x94],XMM0
0071a479 : MOVSS dword ptr [ESP + 0x90],XMM0
0071a482 : MOVSS dword ptr [ESP + 0x8c],XMM0
0071a48b : MOVSS dword ptr [ESP + 0x84],XMM0
0071a494 : MOVSS dword ptr [ESP + 0x80],XMM0
0071a49d : MOVSS dword ptr [ESP + 0x7c],XMM0
0071a4a3 : MOVSS dword ptr [ESP + 0x78],XMM0
0071a4a9 : MOVSS dword ptr [ESP + 0x70],XMM0
0071a4af : MOVSS dword ptr [ESP + 0x6c],XMM0
0071a4b5 : MOVSS dword ptr [ESP + 0x68],XMM0
0071a4bb : MOVSS dword ptr [ESP + 0x64],XMM0
0071a4c1 : MOVSS dword ptr [ESP + 0x9c],XMM1
0071a4ca : MOVSS dword ptr [ESP + 0x88],XMM1
0071a4d3 : MOVSS dword ptr [ESP + 0x74],XMM1
0071a4d9 : MOVSS dword ptr [ESP + 0x60],XMM1
0071a4df : MOVSS dword ptr [ESP + 0x4c],XMM0
0071a4e5 : MOVSS dword ptr [ESP + 0x44],XMM0
0071a4eb : MOVSS dword ptr [ESP + 0x40],XMM0
0071a4f1 : MOVSS dword ptr [ESP + 0x3c],XMM0
0071a4f7 : MOVSS dword ptr [ESP + 0x38],XMM0
0071a4fd : MOVSS dword ptr [ESP + 0x30],XMM0
0071a503 : MOVSS dword ptr [ESP + 0x2c],XMM0
0071a509 : MOVSS dword ptr [ESP + 0x28],XMM0
0071a50f : MOVSS dword ptr [ESP + 0x24],XMM0
0071a515 : MOVSS dword ptr [ESP + 0x5c],XMM1
0071a51b : MOVSS dword ptr [ESP + 0x48],XMM1
0071a521 : MOVSS dword ptr [ESP + 0x34],XMM1
0071a527 : MOVSS dword ptr [ESP + 0x20],XMM1
0071a52d : MOVSS XMM0,dword ptr [EAX]
0071a531 : MOVSS dword ptr [ESP + 0x50],XMM0
0071a537 : MOVSS XMM0,dword ptr [EAX + 0x4]
0071a53c : MOVSS dword ptr [ESP + 0x54],XMM0
0071a542 : MOVSS XMM0,dword ptr [EAX + 0x8]
0071a547 : MOV EAX,dword ptr [ECX + 0x4]
0071a54a : SUB ESP,0xc
0071a54d : MOVSS dword ptr [ESP + 0x64],XMM0
0071a553 : FLD float ptr [EAX]
0071a555 : FST float ptr [ESP + 0x8]
0071a559 : LEA ECX,[ESP + 0x6c]
0071a55d : FST float ptr [ESP + 0x4]
0071a561 : FSTP float ptr [ESP]
0071a564 : PUSH ECX
0071a565 : CALL 0x00664c90
0071a56a : LEA EDX,[ESP + 0x20]
0071a56e : PUSH EDX
0071a56f : LEA EAX,[ESP + 0x64]
0071a573 : PUSH EAX
0071a574 : MOV ECX,EDX
0071a576 : PUSH ECX
0071a577 : CALL 0x004ff752
0071a57c : MOV EAX,dword ptr [EBX + 0x4]
0071a57f : MOV EDX,dword ptr [ESI]
0071a581 : MOV ECX,dword ptr [EDX + 0xb0]
0071a587 : ADD EAX,0x20
0071a58a : PUSH EAX
0071a58b : PUSH 0x100
0071a590 : PUSH ESI
0071a591 : CALL ECX
0071a593 : MOV EDX,dword ptr [ESI]
0071a595 : MOV EAX,dword ptr [EDX + 0xe4]
0071a59b : PUSH 0x1
0071a59d : PUSH 0x1b
0071a59f : PUSH ESI
0071a5a0 : CALL EAX
0071a5a2 : MOV ECX,dword ptr [ESI]
0071a5a4 : MOV EDX,dword ptr [ECX + 0xe4]
0071a5aa : PUSH 0x5
0071a5ac : PUSH 0x13
0071a5ae : PUSH ESI
0071a5af : CALL EDX
0071a5b1 : MOV EAX,dword ptr [ESI]
0071a5b3 : MOV ECX,dword ptr [EAX + 0xe4]
0071a5b9 : PUSH 0x6
0071a5bb : PUSH 0x14
0071a5bd : PUSH ESI
0071a5be : CALL ECX
0071a5c0 : MOV EDX,dword ptr [ESI]
0071a5c2 : MOV EAX,dword ptr [EDX + 0xe4]
0071a5c8 : PUSH 0x0
0071a5ca : PUSH 0xe
0071a5cc : PUSH ESI
0071a5cd : CALL EAX
0071a5cf : XOR EBX,EBX
0071a5d1 : CMP dword ptr [EDI + 0xc],EBX
0071a5d4 : JBE 0x0071a617
0071a5d6 : MOV dword ptr [ESP + 0x18],EBX
0071a5da : MOV EDX,dword ptr [EDI + 0x4]
0071a5dd : ADD EDX,dword ptr [ESP + 0x18]
0071a5e1 : MOV ECX,dword ptr [ESI]
0071a5e3 : MOV EAX,dword ptr [ECX + 0xc4]
0071a5e9 : PUSH EDX
0071a5ea : PUSH ESI
0071a5eb : CALL EAX
0071a5ed : MOV EDX,dword ptr [EDI + 0x8]
0071a5f0 : MOV EAX,dword ptr [EDX + EBX*0x4]
0071a5f3 : MOV ECX,dword ptr [ESI]
0071a5f5 : MOV ECX,dword ptr [ECX + 0x104]
0071a5fb : PUSH EAX
0071a5fc : PUSH 0x0
0071a5fe : PUSH ESI
0071a5ff : CALL ECX
0071a601 : MOV EAX,dword ptr [EDI]
0071a603 : MOV EDX,dword ptr [EAX]
0071a605 : PUSH EBX
0071a606 : PUSH EAX
0071a607 : MOV EAX,dword ptr [EDX + 0xc]
0071a60a : CALL EAX
0071a60c : ADD dword ptr [ESP + 0x18],0x44
0071a611 : INC EBX
0071a612 : CMP EBX,dword ptr [EDI + 0xc]
0071a615 : JC 0x0071a5da
0071a617 : MOV ECX,dword ptr [ESI]
0071a619 : MOV EDX,dword ptr [ECX + 0xe4]
0071a61f : PUSH 0x1
0071a621 : PUSH 0xe
0071a623 : PUSH ESI
0071a624 : CALL EDX
0071a626 : MOV EAX,dword ptr [ESP + 0x1c]
0071a62a : MOV ECX,dword ptr [ESP + 0x10]
0071a62e : ADD dword ptr [ESP + 0x14],0xc
0071a633 : INC EAX
0071a634 : CMP EAX,dword ptr [ECX + 0xc]
0071a637 : MOV dword ptr [ESP + 0x1c],EAX
0071a63b : JL 0x0071a434
0071a641 : POP EDI
0071a642 : MOV EAX,ECX
0071a644 : POP ESI
0071a645 : MOV dword ptr [EAX + 0x8],0xffffffff
0071a64c : MOV dword ptr [EAX + 0xc],0x0
0071a653 : POP EBX
0071a654 : MOV ESP,EBP
0071a656 : POP EBP
0071a657 : RET
