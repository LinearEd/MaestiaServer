PROGRAM  : Maestia.exe
FUNCTION : FUN_00811c30
ENTRY    : 00811c30
BODY     : [[00811c30, 00811e6c] [00811e70, 00811f9d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00811c30(int param_1,undefined4 param_2)

{
  wchar_t wVar1;
  undefined1 uVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint8_t *puVar6;
  wchar_t *pwVar7;
  int *in_ECX;
  wchar_t *pwVar8;
  wchar_t *pwVar9;
  bool bVar10;
  undefined1 local_60 [4];
  int local_5c;
  int local_58;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b62aa5;
  local_14 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xffffff90;
  ExceptionList = &local_14;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  FUN_00406360(&DAT_00c2e0f8,1);
  local_c = 0;
  uVar4 = FUN_00403dd0(param_2,uVar3);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_60,uVar4,local_50,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_c._0_1_ = 4;
  uVar2 = (undefined1)local_c;
  local_c._0_1_ = 4;
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  if (*DAT_00da9894 == 0) {
    local_c = 0xffffffff;
    if (local_5c == 0) {
      ExceptionList = local_14;
      return;
    }
    FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if (*(int *)(*DAT_00da9894 + 0x114) != 0) {
    uVar3 = *(uint *)(param_1 + 0x18);
    pwVar7 = (wchar_t *)(param_1 + 4);
    pwVar9 = pwVar7;
    if (7 < uVar3) {
      pwVar9 = *(wchar_t **)pwVar7;
    }
    pwVar8 = L"onOpen";
    do {
      wVar1 = *pwVar9;
      bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
      if (wVar1 != *pwVar8) {
LAB_00811d9e:
        iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
        goto LAB_00811da3;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar9[1];
      bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
      if (wVar1 != pwVar8[1]) goto LAB_00811d9e;
      pwVar9 = pwVar9 + 2;
      pwVar8 = pwVar8 + 2;
    } while (wVar1 != L'\0');
    iVar5 = 0;
LAB_00811da3:
    if (iVar5 == 0) {
      (**(code **)(*in_ECX + 0x18))(0,300);
    }
    else {
      pwVar9 = pwVar7;
      if (7 < uVar3) {
        pwVar9 = *(wchar_t **)pwVar7;
      }
      pwVar8 = L"onClose";
      do {
        wVar1 = *pwVar9;
        bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
        if (wVar1 != *pwVar8) {
LAB_00811df6:
          iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
          goto LAB_00811dfb;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar9[1];
        bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
        if (wVar1 != pwVar8[1]) goto LAB_00811df6;
        pwVar9 = pwVar9 + 2;
        pwVar8 = pwVar8 + 2;
      } while (wVar1 != L'\0');
      iVar5 = 0;
LAB_00811dfb:
      if (iVar5 == 0) {
        (**(code **)(*in_ECX + 0x20))();
        puVar6 = (uint8_t *)FUN_006f4590();
        if (puVar6 == (uint8_t *)0x0) {
          puVar6 = (uint8_t *)0x0;
        }
        else {
          puVar6[0] = '\0';
          puVar6[1] = '\0';
          puVar6[2] = '>';
          puVar6[3] = '\t';
        }
        local_c = CONCAT31(local_c._1_3_,4);
        if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
          FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),4,puVar6);
        }
      }
      else {
        pwVar9 = pwVar7;
        if (7 < uVar3) {
          pwVar9 = *(wchar_t **)pwVar7;
        }
        pwVar8 = L"onOk";
        do {
          wVar1 = *pwVar9;
          bVar10 = (ushort)wVar1 < (ushort)*pwVar8;
          if (wVar1 != *pwVar8) {
LAB_00811e96:
            iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
            goto LAB_00811e9b;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar9[1];
          bVar10 = (ushort)wVar1 < (ushort)pwVar8[1];
          if (wVar1 != pwVar8[1]) goto LAB_00811e96;
          pwVar9 = pwVar9 + 2;
          pwVar8 = pwVar8 + 2;
        } while (wVar1 != L'\0');
        iVar5 = 0;
LAB_00811e9b:
        local_c._0_1_ = uVar2;
        if (iVar5 == 0) {
          iVar5 = local_58 - local_5c >> 0x1f;
          if ((local_58 - local_5c) / 0x1c + iVar5 == iVar5) {
            uVar4 = 0;
          }
          else if (*(uint *)(local_5c + 0x18) < 8) {
            uVar4 = FUN_00634f4d(local_5c + 4);
          }
          else {
            uVar4 = FUN_00634f4d(*(undefined4 *)(local_5c + 4));
          }
          iVar5 = FUN_006f4590();
          local_c._0_1_ = 6;
          if (iVar5 == 0) {
            puVar6 = (uint8_t *)0x0;
          }
          else {
            puVar6 = (uint8_t *)FUN_0042a700(uVar4,0);
          }
          local_c = CONCAT31(local_c._1_3_,4);
          if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
            FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),0x1a,puVar6);
          }
        }
        else {
          if (7 < uVar3) {
            pwVar7 = *(wchar_t **)pwVar7;
          }
          pwVar9 = L"onInit";
          do {
            wVar1 = *pwVar7;
            bVar10 = (ushort)wVar1 < (ushort)*pwVar9;
            if (wVar1 != *pwVar9) {
LAB_00811f66:
              iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
              goto LAB_00811f6b;
            }
            if (wVar1 == L'\0') break;
            wVar1 = pwVar7[1];
            bVar10 = (ushort)wVar1 < (ushort)pwVar9[1];
            if (wVar1 != pwVar9[1]) goto LAB_00811f66;
            pwVar7 = pwVar7 + 2;
            pwVar9 = pwVar9 + 2;
          } while (wVar1 != L'\0');
          iVar5 = 0;
LAB_00811f6b:
          if (iVar5 == 0) {
            FUN_00811b70();
          }
        }
      }
    }
  }
  local_c = 0xffffffff;
  FUN_004042c0();
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
00811c30 : PUSH EBP
00811c31 : MOV EBP,ESP
00811c33 : AND ESP,0xfffffff8
00811c36 : PUSH -0x1
00811c38 : PUSH 0xb62aa5
00811c3d : MOV EAX,FS:[0x0]
00811c43 : PUSH EAX
00811c44 : SUB ESP,0x50
00811c47 : PUSH EBX
00811c48 : PUSH ESI
00811c49 : PUSH EDI
00811c4a : MOV EAX,[0x00d66fa0]
00811c4f : XOR EAX,ESP
00811c51 : PUSH EAX
00811c52 : LEA EAX,[ESP + 0x60]
00811c56 : MOV FS:[0x0],EAX
00811c5c : MOV dword ptr [ESP + 0x10],ECX
00811c60 : PUSH 0x1
00811c62 : XOR EAX,EAX
00811c64 : MOV EDI,0x7
00811c69 : XOR EBX,EBX
00811c6b : PUSH 0xc2e0f8
00811c70 : LEA ECX,[ESP + 0x2c]
00811c74 : MOV dword ptr [ESP + 0x44],EDI
00811c78 : MOV dword ptr [ESP + 0x40],EBX
00811c7c : MOV word ptr [ESP + 0x30],AX
00811c81 : CALL 0x00406360
00811c86 : MOV dword ptr [ESP + 0x68],EBX
00811c8a : MOV ECX,dword ptr [EBP + 0xc]
00811c8d : PUSH ECX
00811c8e : LEA ESI,[ESP + 0x44]
00811c92 : CALL 0x00403dd0
00811c97 : ADD ESP,0x4
00811c9a : MOV byte ptr [ESP + 0x68],0x1
00811c9f : PUSH EBX
00811ca0 : LEA EDX,[ESP + 0x28]
00811ca4 : PUSH EDX
00811ca5 : PUSH EAX
00811ca6 : LEA EAX,[ESP + 0x20]
00811caa : PUSH EAX
00811cab : CALL 0x0070cd60
00811cb0 : ADD ESP,0x10
00811cb3 : MOV byte ptr [ESP + 0x68],0x3
00811cb8 : MOV ESI,0x8
00811cbd : CMP dword ptr [ESP + 0x58],ESI
00811cc1 : JC 0x00811ccc
00811cc3 : MOV ECX,dword ptr [ESP + 0x44]
00811cc7 : CALL 0x006f04e0
00811ccc : XOR ECX,ECX
00811cce : MOV dword ptr [ESP + 0x58],EDI
00811cd2 : MOV dword ptr [ESP + 0x54],EBX
00811cd6 : MOV word ptr [ESP + 0x44],CX
00811cdb : MOV byte ptr [ESP + 0x68],0x4
00811ce0 : CMP dword ptr [ESP + 0x3c],ESI
00811ce4 : JC 0x00811cef
00811ce6 : MOV ECX,dword ptr [ESP + 0x28]
00811cea : CALL 0x006f04e0
00811cef : MOV EAX,[0x00da9894]
00811cf4 : XOR EDX,EDX
00811cf6 : MOV dword ptr [ESP + 0x3c],EDI
00811cfa : MOV dword ptr [ESP + 0x38],EBX
00811cfe : MOV word ptr [ESP + 0x28],DX
00811d03 : MOV EAX,dword ptr [EAX]
00811d05 : CMP EAX,EBX
00811d07 : JNZ 0x00811d54
00811d09 : MOV dword ptr [ESP + 0x68],0xffffffff
00811d11 : MOV EAX,dword ptr [ESP + 0x18]
00811d15 : CMP EAX,EBX
00811d17 : JZ 0x00811d33
00811d19 : MOV ECX,dword ptr [ESP + 0x10]
00811d1d : MOV EDI,dword ptr [ESP + 0x1c]
00811d21 : PUSH ECX
00811d22 : CALL 0x00405450
00811d27 : MOV ECX,dword ptr [ESP + 0x1c]
00811d2b : ADD ESP,0x4
00811d2e : CALL 0x006f04e0
00811d33 : MOV dword ptr [ESP + 0x18],EBX
00811d37 : MOV dword ptr [ESP + 0x1c],EBX
00811d3b : MOV dword ptr [ESP + 0x20],EBX
00811d3f : MOV ECX,dword ptr [ESP + 0x60]
00811d43 : MOV dword ptr FS:[0x0],ECX
00811d4a : POP ECX
00811d4b : POP EDI
00811d4c : POP ESI
00811d4d : POP EBX
00811d4e : MOV ESP,EBP
00811d50 : POP EBP
00811d51 : RET 0x8
00811d54 : CMP dword ptr [EAX + 0x114],EBX
00811d5a : JZ 0x00811f78
00811d60 : MOV EAX,dword ptr [EBP + 0x8]
00811d63 : MOV EDI,dword ptr [EAX + 0x18]
00811d66 : CMP EDI,ESI
00811d68 : LEA ESI,[EAX + 0x4]
00811d6b : JC 0x00811d71
00811d6d : MOV EAX,dword ptr [ESI]
00811d6f : JMP 0x00811d73
00811d71 : MOV EAX,ESI
00811d73 : MOV ECX,0xc2e0fc
00811d78 : MOV DX,word ptr [EAX]
00811d7b : CMP DX,word ptr [ECX]
00811d7e : JNZ 0x00811d9e
00811d80 : CMP DX,BX
00811d83 : JZ 0x00811d9a
00811d85 : MOV DX,word ptr [EAX + 0x2]
00811d89 : CMP DX,word ptr [ECX + 0x2]
00811d8d : JNZ 0x00811d9e
00811d8f : ADD EAX,0x4
00811d92 : ADD ECX,0x4
00811d95 : CMP DX,BX
00811d98 : JNZ 0x00811d78
00811d9a : XOR EAX,EAX
00811d9c : JMP 0x00811da3
00811d9e : SBB EAX,EAX
00811da0 : SBB EAX,-0x1
00811da3 : CMP EAX,EBX
00811da5 : JNZ 0x00811dbd
00811da7 : MOV ECX,dword ptr [ESP + 0x10]
00811dab : MOV EDX,dword ptr [ECX]
00811dad : MOV EAX,dword ptr [EDX + 0x18]
00811db0 : PUSH 0x12c
00811db5 : PUSH EBX
00811db6 : CALL EAX
00811db8 : JMP 0x00811f78
00811dbd : CMP EDI,0x8
00811dc0 : JC 0x00811dc6
00811dc2 : MOV EAX,dword ptr [ESI]
00811dc4 : JMP 0x00811dc8
00811dc6 : MOV EAX,ESI
00811dc8 : MOV ECX,0xc2e10c
00811dcd : LEA ECX,[ECX]
00811dd0 : MOV DX,word ptr [EAX]
00811dd3 : CMP DX,word ptr [ECX]
00811dd6 : JNZ 0x00811df6
00811dd8 : CMP DX,BX
00811ddb : JZ 0x00811df2
00811ddd : MOV DX,word ptr [EAX + 0x2]
00811de1 : CMP DX,word ptr [ECX + 0x2]
00811de5 : JNZ 0x00811df6
00811de7 : ADD EAX,0x4
00811dea : ADD ECX,0x4
00811ded : CMP DX,BX
00811df0 : JNZ 0x00811dd0
00811df2 : XOR EAX,EAX
00811df4 : JMP 0x00811dfb
00811df6 : SBB EAX,EAX
00811df8 : SBB EAX,-0x1
00811dfb : CMP EAX,EBX
00811dfd : JNZ 0x00811e5b
00811dff : MOV ECX,dword ptr [ESP + 0x10]
00811e03 : MOV EDX,dword ptr [ECX]
00811e05 : MOV EAX,dword ptr [EDX + 0x20]
00811e08 : CALL EAX
00811e0a : CALL 0x006f4590
00811e0f : MOV dword ptr [ESP + 0x10],EAX
00811e13 : MOV byte ptr [ESP + 0x68],0x5
00811e18 : CMP EAX,EBX
00811e1a : JZ 0x00811e2b
00811e1c : XOR ECX,ECX
00811e1e : MOV word ptr [EAX],CX
00811e21 : MOV byte ptr [EAX + 0x2],0x3e
00811e25 : MOV byte ptr [EAX + 0x3],0x9
00811e29 : JMP 0x00811e2d
00811e2b : XOR EAX,EAX
00811e2d : MOV byte ptr [ESP + 0x68],0x4
00811e32 : MOV EDX,dword ptr [0x017247d4]
00811e38 : MOV ECX,dword ptr [EDX + 0x4]
00811e3b : CMP ECX,EBX
00811e3d : JZ 0x00811f78
00811e43 : CMP byte ptr [EDX + 0x8],BL
00811e46 : JZ 0x00811f78
00811e4c : PUSH 0x4
00811e4e : PUSH ECX
00811e4f : MOV EDI,EAX
00811e51 : CALL 0x00a0dd40
00811e56 : JMP 0x00811f78
00811e5b : CMP EDI,0x8
00811e5e : JC 0x00811e64
00811e60 : MOV EAX,dword ptr [ESI]
00811e62 : JMP 0x00811e66
00811e64 : MOV EAX,ESI
00811e66 : MOV ECX,0xc2e11c
00811e6b : JMP 0x00811e70
00811e70 : MOV DX,word ptr [EAX]
00811e73 : CMP DX,word ptr [ECX]
00811e76 : JNZ 0x00811e96
00811e78 : CMP DX,BX
00811e7b : JZ 0x00811e92
00811e7d : MOV DX,word ptr [EAX + 0x2]
00811e81 : CMP DX,word ptr [ECX + 0x2]
00811e85 : JNZ 0x00811e96
00811e87 : ADD EAX,0x4
00811e8a : ADD ECX,0x4
00811e8d : CMP DX,BX
00811e90 : JNZ 0x00811e70
00811e92 : XOR EAX,EAX
00811e94 : JMP 0x00811e9b
00811e96 : SBB EAX,EAX
00811e98 : SBB EAX,-0x1
00811e9b : CMP EAX,EBX
00811e9d : JNZ 0x00811f2f
00811ea3 : MOV ECX,dword ptr [ESP + 0x1c]
00811ea7 : MOV ESI,dword ptr [ESP + 0x18]
00811eab : SUB ECX,ESI
00811ead : MOV EAX,0x92492493
00811eb2 : IMUL ECX
00811eb4 : ADD EDX,ECX
00811eb6 : SAR EDX,0x4
00811eb9 : MOV EAX,EDX
00811ebb : SHR EAX,0x1f
00811ebe : ADD EAX,EDX
00811ec0 : JZ 0x00811ee8
00811ec2 : CMP dword ptr [ESI + 0x18],0x8
00811ec6 : JC 0x00811ed8
00811ec8 : MOV ESI,dword ptr [ESI + 0x4]
00811ecb : PUSH ESI
00811ecc : CALL 0x00634f4d
00811ed1 : ADD ESP,0x4
00811ed4 : MOV ESI,EAX
00811ed6 : JMP 0x00811eea
00811ed8 : ADD ESI,0x4
00811edb : PUSH ESI
00811edc : CALL 0x00634f4d
00811ee1 : ADD ESP,0x4
00811ee4 : MOV ESI,EAX
00811ee6 : JMP 0x00811eea
00811ee8 : XOR ESI,ESI
00811eea : CALL 0x006f4590
00811eef : MOV dword ptr [ESP + 0x10],EAX
00811ef3 : MOV byte ptr [ESP + 0x68],0x6
00811ef8 : CMP EAX,EBX
00811efa : JZ 0x00811f0a
00811efc : PUSH EBX
00811efd : PUSH ESI
00811efe : MOV ECX,0xc2e128
00811f03 : CALL 0x0042a700
00811f08 : JMP 0x00811f0c
00811f0a : XOR EAX,EAX
00811f0c : MOV byte ptr [ESP + 0x68],0x4
00811f11 : MOV EDX,dword ptr [0x017247d4]
00811f17 : MOV ECX,dword ptr [EDX + 0x4]
00811f1a : CMP ECX,EBX
00811f1c : JZ 0x00811f78
00811f1e : CMP byte ptr [EDX + 0x8],BL
00811f21 : JZ 0x00811f78
00811f23 : PUSH 0x1a
00811f25 : PUSH ECX
00811f26 : MOV EDI,EAX
00811f28 : CALL 0x00a0dd40
00811f2d : JMP 0x00811f78
00811f2f : CMP EDI,0x8
00811f32 : JC 0x00811f38
00811f34 : MOV EAX,dword ptr [ESI]
00811f36 : JMP 0x00811f3a
00811f38 : MOV EAX,ESI
00811f3a : MOV ECX,0xc2e12c
00811f3f : NOP
00811f40 : MOV DX,word ptr [EAX]
00811f43 : CMP DX,word ptr [ECX]
00811f46 : JNZ 0x00811f66
00811f48 : CMP DX,BX
00811f4b : JZ 0x00811f62
00811f4d : MOV DX,word ptr [EAX + 0x2]
00811f51 : CMP DX,word ptr [ECX + 0x2]
00811f55 : JNZ 0x00811f66
00811f57 : ADD EAX,0x4
00811f5a : ADD ECX,0x4
00811f5d : CMP DX,BX
00811f60 : JNZ 0x00811f40
00811f62 : XOR EAX,EAX
00811f64 : JMP 0x00811f6b
00811f66 : SBB EAX,EAX
00811f68 : SBB EAX,-0x1
00811f6b : CMP EAX,EBX
00811f6d : JNZ 0x00811f78
00811f6f : MOV ECX,dword ptr [ESP + 0x10]
00811f73 : CALL 0x00811b70
00811f78 : MOV dword ptr [ESP + 0x68],0xffffffff
00811f80 : LEA ESI,[ESP + 0x14]
00811f84 : CALL 0x004042c0
00811f89 : MOV ECX,dword ptr [ESP + 0x60]
00811f8d : MOV dword ptr FS:[0x0],ECX
00811f94 : POP ECX
00811f95 : POP EDI
00811f96 : POP ESI
00811f97 : POP EBX
00811f98 : MOV ESP,EBP
00811f9a : POP EBP
00811f9b : RET 0x8
