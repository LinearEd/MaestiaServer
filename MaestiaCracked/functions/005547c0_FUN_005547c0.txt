PROGRAM  : Maestia.exe
FUNCTION : FUN_005547c0
ENTRY    : 005547c0
BODY     : [[005547c0, 005548ea]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005547c0(int *param_1)

{
  short *psVar1;
  uint uVar2;
  uint uVar3;
  int *piVar4;
  int in_ECX;
  
  if (*(uint *)(in_ECX + 4) < *(uint *)(in_ECX + 8)) {
    psVar1 = *(short **)(in_ECX + 0x1c);
    if (psVar1 != (short *)0x0) {
      if (0x8000 < *(uint *)(in_ECX + 0x18)) {
        *(int *)(in_ECX + 0x14) = (int)*psVar1;
        *(short **)(in_ECX + 0x1c) = psVar1 + 1;
        *(undefined4 *)(in_ECX + 0x18) = 1;
      }
      uVar2 = *(uint *)(in_ECX + 0x14);
      uVar3 = *(uint *)(in_ECX + 0x18);
      *param_1 = (int)**(short **)(in_ECX + 0x1c);
      if ((uVar3 & uVar2) != 0) {
        *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
        param_1[1] = (int)**(short **)(in_ECX + 0x1c);
        *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
        param_1[2] = (int)**(short **)(in_ECX + 0x1c);
        *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
        param_1[3] = (int)**(short **)(in_ECX + 0x1c);
        *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
        *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
        *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) << 1;
        param_1[4] = 4;
        return;
      }
      *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
      param_1[1] = (int)**(short **)(in_ECX + 0x1c);
      *(int *)(in_ECX + 0x1c) = *(int *)(in_ECX + 0x1c) + 2;
      *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
      *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) << 1;
      param_1[4] = 2;
      return;
    }
    if (*(int *)(in_ECX + 0x18) == 0) {
      *(undefined4 *)(in_ECX + 0x14) = **(undefined4 **)(in_ECX + 0x20);
      *(undefined4 **)(in_ECX + 0x20) = *(undefined4 **)(in_ECX + 0x20) + 1;
      *(undefined4 *)(in_ECX + 0x18) = 1;
    }
    uVar2 = *(uint *)(in_ECX + 0x14);
    uVar3 = *(uint *)(in_ECX + 0x18);
    *param_1 = **(int **)(in_ECX + 0x20);
    piVar4 = param_1 + 1;
    if ((uVar3 & uVar2) != 0) {
      *(int *)(in_ECX + 0x20) = *(int *)(in_ECX + 0x20) + 4;
      *piVar4 = **(int **)(in_ECX + 0x20);
      *(int *)(in_ECX + 0x20) = *(int *)(in_ECX + 0x20) + 4;
      param_1[2] = **(int **)(in_ECX + 0x20);
      piVar4 = param_1 + 3;
    }
    *(int *)(in_ECX + 0x20) = *(int *)(in_ECX + 0x20) + 4;
    *piVar4 = **(int **)(in_ECX + 0x20);
    *(int *)(in_ECX + 0x20) = *(int *)(in_ECX + 0x20) + 4;
    *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
    *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) << 1;
    param_1[4] = (int)piVar4 + (4 - (int)param_1) >> 2;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005547c0 : MOV EAX,dword ptr [ECX + 0x4]
005547c3 : CMP EAX,dword ptr [ECX + 0x8]
005547c6 : JNC 0x005548e8
005547cc : MOV EAX,dword ptr [ECX + 0x1c]
005547cf : PUSH ESI
005547d0 : PUSH EDI
005547d1 : TEST EAX,EAX
005547d3 : JZ 0x0055487b
005547d9 : CMP dword ptr [ECX + 0x18],0x8000
005547e0 : JBE 0x005547f5
005547e2 : MOVSX EDX,word ptr [EAX]
005547e5 : ADD EAX,0x2
005547e8 : MOV dword ptr [ECX + 0x14],EDX
005547eb : MOV dword ptr [ECX + 0x1c],EAX
005547ee : MOV dword ptr [ECX + 0x18],0x1
005547f5 : MOV EAX,dword ptr [ECX + 0x14]
005547f8 : MOV EDX,dword ptr [ECX + 0x1c]
005547fb : TEST dword ptr [ECX + 0x18],EAX
005547fe : MOVSX EAX,word ptr [EDX]
00554801 : MOV EDX,dword ptr [ESP + 0xc]
00554805 : MOV dword ptr [EDX],EAX
00554807 : MOV ESI,0x2
0055480c : LEA EAX,[EDX + 0x4]
0055480f : JZ 0x00554857
00554811 : ADD dword ptr [ECX + 0x1c],ESI
00554814 : MOV EDI,dword ptr [ECX + 0x1c]
00554817 : MOVSX EDI,word ptr [EDI]
0055481a : MOV dword ptr [EAX],EDI
0055481c : ADD dword ptr [ECX + 0x1c],ESI
0055481f : PUSH EBX
00554820 : MOV EBX,dword ptr [ECX + 0x1c]
00554823 : MOVSX EBX,word ptr [EBX]
00554826 : MOV EDI,0x4
0055482b : MOV dword ptr [EAX + EDI*0x1],EBX
0055482e : ADD dword ptr [ECX + 0x1c],ESI
00554831 : MOV EBX,dword ptr [ECX + 0x1c]
00554834 : MOVSX EBX,word ptr [EBX]
00554837 : ADD EAX,EDI
00554839 : MOV dword ptr [EAX + EDI*0x1],EBX
0055483c : ADD dword ptr [ECX + 0x1c],ESI
0055483f : INC dword ptr [ECX + 0x4]
00554842 : SHL dword ptr [ECX + 0x18],0x1
00554845 : ADD EAX,EDI
00554847 : ADD EAX,EDI
00554849 : POP EBX
0055484a : SUB EAX,EDX
0055484c : SAR EAX,0x2
0055484f : POP EDI
00554850 : MOV dword ptr [EDX + 0x10],EAX
00554853 : POP ESI
00554854 : RET 0x4
00554857 : ADD dword ptr [ECX + 0x1c],ESI
0055485a : MOV EDI,dword ptr [ECX + 0x1c]
0055485d : MOVSX EDI,word ptr [EDI]
00554860 : MOV dword ptr [EAX],EDI
00554862 : ADD dword ptr [ECX + 0x1c],ESI
00554865 : INC dword ptr [ECX + 0x4]
00554868 : SHL dword ptr [ECX + 0x18],0x1
0055486b : ADD EAX,0x4
0055486e : SUB EAX,EDX
00554870 : SAR EAX,0x2
00554873 : POP EDI
00554874 : MOV dword ptr [EDX + 0x10],EAX
00554877 : POP ESI
00554878 : RET 0x4
0055487b : CMP dword ptr [ECX + 0x18],0x0
0055487f : JNZ 0x00554896
00554881 : MOV EAX,dword ptr [ECX + 0x20]
00554884 : MOV EDX,dword ptr [EAX]
00554886 : ADD EAX,0x4
00554889 : MOV dword ptr [ECX + 0x14],EDX
0055488c : MOV dword ptr [ECX + 0x20],EAX
0055488f : MOV dword ptr [ECX + 0x18],0x1
00554896 : MOV EAX,dword ptr [ECX + 0x14]
00554899 : MOV EDX,dword ptr [ECX + 0x20]
0055489c : TEST dword ptr [ECX + 0x18],EAX
0055489f : MOV EAX,dword ptr [EDX]
005548a1 : MOV EDX,dword ptr [ESP + 0xc]
005548a5 : MOV dword ptr [EDX],EAX
005548a7 : MOV EDI,0x4
005548ac : LEA EAX,[EDX + 0x4]
005548af : JZ 0x005548c9
005548b1 : ADD dword ptr [ECX + 0x20],EDI
005548b4 : MOV ESI,dword ptr [ECX + 0x20]
005548b7 : MOV ESI,dword ptr [ESI]
005548b9 : MOV dword ptr [EAX],ESI
005548bb : ADD dword ptr [ECX + 0x20],EDI
005548be : MOV ESI,dword ptr [ECX + 0x20]
005548c1 : MOV ESI,dword ptr [ESI]
005548c3 : ADD EAX,EDI
005548c5 : MOV dword ptr [EAX],ESI
005548c7 : ADD EAX,EDI
005548c9 : ADD dword ptr [ECX + 0x20],EDI
005548cc : MOV ESI,dword ptr [ECX + 0x20]
005548cf : MOV ESI,dword ptr [ESI]
005548d1 : MOV dword ptr [EAX],ESI
005548d3 : ADD dword ptr [ECX + 0x20],EDI
005548d6 : INC dword ptr [ECX + 0x4]
005548d9 : SHL dword ptr [ECX + 0x18],0x1
005548dc : ADD EAX,EDI
005548de : SUB EAX,EDX
005548e0 : SAR EAX,0x2
005548e3 : POP EDI
005548e4 : MOV dword ptr [EDX + 0x10],EAX
005548e7 : POP ESI
005548e8 : RET 0x4
