PROGRAM  : Maestia.exe
FUNCTION : FUN_007d4980
ENTRY    : 007d4980
BODY     : [[007d4980, 007d4ad5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007d4980(undefined4 param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int *piVar3;
  uint uVar4;
  int iVar5;
  int in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0f1a3;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(in_ECX + 8) != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(*(int *)(in_ECX + 8) + 4));
  }
  local_8 = 0;
  puVar1 = *(undefined4 **)(in_ECX + 0x38);
  for (puVar2 = (undefined4 *)*puVar1; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
    piVar3 = (int *)puVar2[9];
    iVar5 = (**(code **)(*piVar3 + 0x1c))(uVar4);
    if (iVar5 - 2U < 8) {
      (**(code **)(*piVar3 + 0x120))(param_1,param_2);
    }
    if (((char)param_2 != '\0') && (iVar5 = (**(code **)(*piVar3 + 0x1c))(), iVar5 == 1)) {
      FUN_0078d540(param_1);
    }
  }
  local_8 = 0xffffffff;
  if (*(int *)(in_ECX + 8) != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(*(int *)(in_ECX + 8) + 4));
  }
  if (*(int *)(in_ECX + 8) != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(*(int *)(in_ECX + 8) + 4));
  }
  local_8 = 1;
  puVar1 = *(undefined4 **)(in_ECX + 0x188);
  for (puVar2 = (undefined4 *)*puVar1; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
    (**(code **)(*(int *)puVar2[9] + 0x10))(param_1);
  }
  local_8 = 0xffffffff;
  if (*(int *)(in_ECX + 8) != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(*(int *)(in_ECX + 8) + 4));
  }
  if (*(int *)(in_ECX + 0x2b4) != 0) {
    (**(code **)(**(int **)(in_ECX + 0x2b4) + 0x10))(param_1);
  }
  if (*(int *)(in_ECX + 0x2b8) != 0) {
    (**(code **)(**(int **)(in_ECX + 0x2b8) + 0x10))(param_1);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007d4980 : PUSH EBP
007d4981 : MOV EBP,ESP
007d4983 : PUSH -0x1
007d4985 : PUSH 0xb0f1a3
007d498a : MOV EAX,FS:[0x0]
007d4990 : PUSH EAX
007d4991 : SUB ESP,0x8
007d4994 : PUSH EBX
007d4995 : PUSH ESI
007d4996 : PUSH EDI
007d4997 : MOV EAX,[0x00d66fa0]
007d499c : XOR EAX,EBP
007d499e : PUSH EAX
007d499f : LEA EAX,[EBP + -0xc]
007d49a2 : MOV FS:[0x0],EAX
007d49a8 : MOV EDI,ECX
007d49aa : MOV EAX,dword ptr [EDI + 0x8]
007d49ad : MOV dword ptr [EBP + -0x14],EDI
007d49b0 : TEST EAX,EAX
007d49b2 : JZ 0x007d49be
007d49b4 : ADD EAX,0x4
007d49b7 : PUSH EAX
007d49b8 : CALL dword ptr [0x00b85118]
007d49be : MOV dword ptr [EBP + -0x4],0x0
007d49c5 : MOV EAX,dword ptr [EDI + 0x38]
007d49c8 : MOV EBX,dword ptr [EAX]
007d49ca : MOV dword ptr [EBP + -0x10],EAX
007d49cd : CMP EBX,EAX
007d49cf : JZ 0x007d4a1f
007d49d1 : MOV ESI,dword ptr [EBX + 0x24]
007d49d4 : MOV EAX,dword ptr [ESI]
007d49d6 : MOV EDX,dword ptr [EAX + 0x1c]
007d49d9 : MOV ECX,ESI
007d49db : CALL EDX
007d49dd : ADD EAX,-0x2
007d49e0 : CMP EAX,0x7
007d49e3 : JA 0x007d49f9
007d49e5 : MOV ECX,dword ptr [EBP + 0xc]
007d49e8 : MOV EAX,dword ptr [ESI]
007d49ea : MOV EDX,dword ptr [EBP + 0x8]
007d49ed : MOV EAX,dword ptr [EAX + 0x120]
007d49f3 : PUSH ECX
007d49f4 : PUSH EDX
007d49f5 : MOV ECX,ESI
007d49f7 : CALL EAX
007d49f9 : CMP byte ptr [EBP + 0xc],0x0
007d49fd : JZ 0x007d4a18
007d49ff : MOV EDX,dword ptr [ESI]
007d4a01 : MOV EAX,dword ptr [EDX + 0x1c]
007d4a04 : MOV ECX,ESI
007d4a06 : CALL EAX
007d4a08 : CMP EAX,0x1
007d4a0b : JNZ 0x007d4a18
007d4a0d : MOV ECX,dword ptr [EBP + 0x8]
007d4a10 : PUSH ECX
007d4a11 : MOV ECX,ESI
007d4a13 : CALL 0x0078d540
007d4a18 : MOV EBX,dword ptr [EBX]
007d4a1a : CMP EBX,dword ptr [EBP + -0x10]
007d4a1d : JNZ 0x007d49d1
007d4a1f : MOV dword ptr [EBP + -0x4],0xffffffff
007d4a26 : MOV EAX,dword ptr [EDI + 0x8]
007d4a29 : TEST EAX,EAX
007d4a2b : JZ 0x007d4a37
007d4a2d : ADD EAX,0x4
007d4a30 : PUSH EAX
007d4a31 : CALL dword ptr [0x00b8511c]
007d4a37 : MOV EAX,dword ptr [EDI + 0x8]
007d4a3a : MOV dword ptr [EBP + 0xc],EDI
007d4a3d : TEST EAX,EAX
007d4a3f : JZ 0x007d4a4b
007d4a41 : ADD EAX,0x4
007d4a44 : PUSH EAX
007d4a45 : CALL dword ptr [0x00b85118]
007d4a4b : MOV dword ptr [EBP + -0x4],0x1
007d4a52 : MOV EBX,dword ptr [EDI + 0x188]
007d4a58 : MOV ESI,dword ptr [EBX]
007d4a5a : CMP ESI,EBX
007d4a5c : JZ 0x007d4a74
007d4a5e : MOV EDI,EDI
007d4a60 : MOV ECX,dword ptr [ESI + 0x24]
007d4a63 : MOV EDX,dword ptr [ECX]
007d4a65 : MOV EAX,dword ptr [EBP + 0x8]
007d4a68 : MOV EDX,dword ptr [EDX + 0x10]
007d4a6b : PUSH EAX
007d4a6c : CALL EDX
007d4a6e : MOV ESI,dword ptr [ESI]
007d4a70 : CMP ESI,EBX
007d4a72 : JNZ 0x007d4a60
007d4a74 : MOV dword ptr [EBP + -0x4],0xffffffff
007d4a7b : MOV EAX,dword ptr [EDI + 0x8]
007d4a7e : TEST EAX,EAX
007d4a80 : JZ 0x007d4a8c
007d4a82 : ADD EAX,0x4
007d4a85 : PUSH EAX
007d4a86 : CALL dword ptr [0x00b8511c]
007d4a8c : CMP dword ptr [EDI + 0x2b4],0x0
007d4a93 : JZ 0x007d4aa6
007d4a95 : MOV ECX,dword ptr [EDI + 0x2b4]
007d4a9b : MOV EAX,dword ptr [ECX]
007d4a9d : MOV EDX,dword ptr [EBP + 0x8]
007d4aa0 : MOV EAX,dword ptr [EAX + 0x10]
007d4aa3 : PUSH EDX
007d4aa4 : CALL EAX
007d4aa6 : CMP dword ptr [EDI + 0x2b8],0x0
007d4aad : JZ 0x007d4ac2
007d4aaf : MOV EDI,dword ptr [EDI + 0x2b8]
007d4ab5 : MOV EDX,dword ptr [EDI]
007d4ab7 : MOV EAX,dword ptr [EBP + 0x8]
007d4aba : MOV EDX,dword ptr [EDX + 0x10]
007d4abd : PUSH EAX
007d4abe : MOV ECX,EDI
007d4ac0 : CALL EDX
007d4ac2 : MOV ECX,dword ptr [EBP + -0xc]
007d4ac5 : MOV dword ptr FS:[0x0],ECX
007d4acc : POP ECX
007d4acd : POP EDI
007d4ace : POP ESI
007d4acf : POP EBX
007d4ad0 : MOV ESP,EBP
007d4ad2 : POP EBP
007d4ad3 : RET 0x8
