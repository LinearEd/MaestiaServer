PROGRAM  : Maestia.exe
FUNCTION : FUN_006b5e20
ENTRY    : 006b5e20
BODY     : [[006b5e20, 006b5ee1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b5e20(void)

{
  int iVar1;
  int iVar2;
  int extraout_ECX;
  int *unaff_ESI;
  
  iVar1 = unaff_ESI[0x4c];
  if (unaff_ESI[4] < iVar1 + 1) {
    unaff_ESI[3] = 0x86;
    return;
  }
  if (*(char *)(*unaff_ESI + 0x2b4) == '\0') {
    FUN_006b3f10();
  }
  else if (*(char *)((int)unaff_ESI + 0x12e) != '\0') {
    FUN_006b3f10();
    goto LAB_006b5e86;
  }
  FUN_006b3f10();
LAB_006b5e86:
  iVar2 = 1;
  do {
    if (iVar1 < 1) {
      unaff_ESI[0x4c] = iVar2;
      unaff_ESI[8] = unaff_ESI[7];
      return;
    }
    unaff_ESI[7] = unaff_ESI[7] + -1;
    if (*(ushort *)(unaff_ESI[6] + unaff_ESI[7] * 4) < *(ushort *)(unaff_ESI + 0x1d)) {
      FUN_006b5b40();
      iVar2 = extraout_ECX;
    }
    else if (*(char *)((int)unaff_ESI + 0x231) != '\0') {
      unaff_ESI[3] = 0x86;
      return;
    }
    unaff_ESI[0x4c] = unaff_ESI[0x4c] + -1;
    iVar1 = unaff_ESI[0x4c];
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
006b5e20 : PUSH EBP
006b5e21 : MOV EBP,dword ptr [ESI + 0x130]
006b5e27 : LEA EAX,[EBP + 0x1]
006b5e2a : CMP dword ptr [ESI + 0x10],EAX
006b5e2d : JGE 0x006b5e38
006b5e2f : MOV dword ptr [ESI + 0xc],0x86
006b5e36 : POP EBP
006b5e37 : RET
006b5e38 : MOV EDX,dword ptr [ESI]
006b5e3a : CMP byte ptr [EDX + 0x2b4],0x0
006b5e41 : PUSH EBX
006b5e42 : PUSH EDI
006b5e43 : JZ 0x006b5e64
006b5e45 : CMP byte ptr [ESI + 0x12e],0x0
006b5e4c : MOV ECX,dword ptr [ECX]
006b5e4e : MOV EAX,0x4000
006b5e53 : JZ 0x006b5e60
006b5e55 : CALL 0x006b3f10
006b5e5a : MOV EBX,EAX
006b5e5c : XOR EDI,EDI
006b5e5e : JMP 0x006b5e86
006b5e60 : XOR EBX,EBX
006b5e62 : JMP 0x006b5e7f
006b5e64 : MOV EDI,dword ptr [ECX]
006b5e66 : MOVSX EAX,word ptr [ESI + 0x12a]
006b5e6d : MOV ECX,EDI
006b5e6f : CALL 0x006b3f10
006b5e74 : MOV EBX,EAX
006b5e76 : MOVSX EAX,word ptr [ESI + 0x12c]
006b5e7d : MOV ECX,EDI
006b5e7f : CALL 0x006b3f10
006b5e84 : MOV EDI,EAX
006b5e86 : MOV ECX,0x1
006b5e8b : TEST EBP,EBP
006b5e8d : JLE 0x006b5ed2
006b5e8f : OR EBP,0xffffffff
006b5e92 : ADD dword ptr [ESI + 0x1c],EBP
006b5e95 : MOV EAX,dword ptr [ESI + 0x1c]
006b5e98 : MOV EDX,dword ptr [ESI + 0x18]
006b5e9b : MOVZX EDX,word ptr [EDX + EAX*0x4]
006b5e9f : CMP DX,word ptr [ESI + 0x74]
006b5ea3 : JC 0x006b5eb9
006b5ea5 : CMP byte ptr [ESI + 0x231],0x0
006b5eac : JZ 0x006b5ec3
006b5eae : POP EDI
006b5eaf : POP EBX
006b5eb0 : MOV dword ptr [ESI + 0xc],0x86
006b5eb7 : POP EBP
006b5eb8 : RET
006b5eb9 : PUSH EDI
006b5eba : PUSH ESI
006b5ebb : CALL 0x006b5b40
006b5ec0 : ADD ESP,0x8
006b5ec3 : ADD dword ptr [ESI + 0x130],EBP
006b5ec9 : CMP dword ptr [ESI + 0x130],0x0
006b5ed0 : JG 0x006b5e92
006b5ed2 : MOV EAX,dword ptr [ESI + 0x1c]
006b5ed5 : POP EDI
006b5ed6 : POP EBX
006b5ed7 : MOV dword ptr [ESI + 0x130],ECX
006b5edd : MOV dword ptr [ESI + 0x20],EAX
006b5ee0 : POP EBP
006b5ee1 : RET
