PROGRAM  : Maestia.exe
FUNCTION : FUN_008dcd80
ENTRY    : 008dcd80
BODY     : [[008dcd80, 008dce4c] [008dce50, 008dd01f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008dcd80(int param_1)

{
  char cVar1;
  short sVar2;
  int *piVar3;
  uint uVar4;
  int *piVar5;
  int iVar6;
  short *psVar7;
  int in_ECX;
  undefined4 *****pppppuVar8;
  short *psVar9;
  int *piVar10;
  uint local_70;
  undefined1 local_6c [4];
  undefined2 local_68;
  undefined4 local_58;
  uint local_54;
  int local_50;
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined4 ****local_2c [4];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b352b8;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 ****)((uint)local_2c[0] & 0xffff0000);
  local_50 = in_ECX;
  local_14 = uVar4;
  FUN_00406360(&DAT_00c57490,0);
  local_8 = 0;
  piVar10 = (int *)**(int **)(in_ECX + 0x3c);
  if (piVar10 != *(int **)(in_ECX + 0x3c)) {
    do {
      iVar6 = piVar10[4];
      piVar5 = *(int **)(iVar6 + 0x84);
      if (piVar5 != *(int **)(iVar6 + 0x88)) {
        do {
          if (*(int *)(*piVar5 + 0xe4) == *(int *)(param_1 + 4)) {
            if (*(char *)(iVar6 + 4) == '\0') {
              iVar6 = *piVar5;
            }
            else {
              iVar6 = iVar6 + 8;
            }
            FUN_00405eb0(iVar6,0,0xffffffff);
            break;
          }
          piVar5 = piVar5 + 1;
        } while (piVar5 != *(int **)(iVar6 + 0x88));
      }
      if (local_1c != 0) break;
      if (*(char *)((int)piVar10 + 0x15) == '\0') {
        piVar5 = (int *)piVar10[2];
        if (*(char *)((int)piVar5 + 0x15) == '\0') {
          cVar1 = *(char *)(*piVar5 + 0x15);
          piVar10 = piVar5;
          piVar5 = (int *)*piVar5;
          while (cVar1 == '\0') {
            cVar1 = *(char *)(*piVar5 + 0x15);
            piVar10 = piVar5;
            piVar5 = (int *)*piVar5;
          }
        }
        else {
          cVar1 = *(char *)(piVar10[1] + 0x15);
          piVar3 = (int *)piVar10[1];
          piVar5 = piVar10;
          while ((piVar10 = piVar3, cVar1 == '\0' && (piVar5 == (int *)piVar10[2]))) {
            cVar1 = *(char *)(piVar10[1] + 0x15);
            piVar3 = (int *)piVar10[1];
            piVar5 = piVar10;
          }
        }
      }
    } while (piVar10 != *(int **)(local_50 + 0x3c));
  }
  local_54 = 7;
  local_58 = 0;
  local_68 = 0;
  FUN_00406360(L"IDS_PREMIUM_BUY_OK",0x12);
  local_8._0_1_ = 1;
  iVar6 = FUN_0081d120(local_6c);
  local_8._0_1_ = 2;
  pppppuVar8 = (undefined4 *****)local_2c[0];
  if (local_18 < 8) {
    pppppuVar8 = local_2c;
  }
  if (*(uint *)(iVar6 + 0x18) < 8) {
    iVar6 = iVar6 + 4;
  }
  else {
    iVar6 = *(int *)(iVar6 + 4);
  }
  FUN_00404750(iVar6,pppppuVar8,uVar4);
  local_8 = CONCAT31(local_8._1_3_,4);
  if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8._0_1_ = 5;
  if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  psVar9 = local_48;
  if (local_34 < 8) {
    psVar9 = (short *)&local_48;
  }
  local_68 = 0;
  local_54 = 7;
  local_58 = 0;
  psVar7 = psVar9;
  do {
    sVar2 = *psVar7;
    psVar7 = psVar7 + 1;
  } while (sVar2 != 0);
  FUN_00406360(psVar9,(int)psVar7 - (int)(psVar9 + 1) >> 1);
  local_8._0_1_ = 6;
  (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_6c,0xf);
  local_8._0_1_ = 5;
  if (local_54 < 8) {
    piVar10 = *(int **)(local_50 + 0x1d8);
    local_54 = 7;
    local_58 = 0;
    local_68 = 0;
    if ((piVar10 != (int *)0x0) && (*(char *)((int)piVar10 + 0x32) == '\0')) {
      (**(code **)(*piVar10 + 0x18))(1,300);
    }
    FUN_008db0f0();
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_34 < 8) {
      local_34 = 7;
      local_38 = 0;
      local_48 = (short *)((uint)local_48._2_2_ << 0x10);
      local_8 = 0xffffffff;
      if (local_18 < 8) {
        local_18 = 7;
        local_1c = 0;
        local_2c[0] = (undefined4 ****)((uint)local_2c[0] & 0xffff0000);
        ExceptionList = local_10;
        __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008dcd80 : PUSH EBP
008dcd81 : MOV EBP,ESP
008dcd83 : PUSH -0x1
008dcd85 : PUSH 0xb352b8
008dcd8a : MOV EAX,FS:[0x0]
008dcd90 : PUSH EAX
008dcd91 : SUB ESP,0x78
008dcd94 : MOV EAX,[0x00d66fa0]
008dcd99 : XOR EAX,EBP
008dcd9b : MOV dword ptr [EBP + -0x10],EAX
008dcd9e : PUSH EBX
008dcd9f : PUSH ESI
008dcda0 : PUSH EDI
008dcda1 : PUSH EAX
008dcda2 : LEA EAX,[EBP + -0xc]
008dcda5 : MOV FS:[0x0],EAX
008dcdab : XOR EBX,EBX
008dcdad : MOV ESI,ECX
008dcdaf : PUSH EBX
008dcdb0 : XOR EAX,EAX
008dcdb2 : PUSH 0xc57490
008dcdb7 : LEA ECX,[EBP + -0x2c]
008dcdba : MOV dword ptr [EBP + -0x4c],ESI
008dcdbd : MOV dword ptr [EBP + -0x14],0x7
008dcdc4 : MOV dword ptr [EBP + -0x18],EBX
008dcdc7 : MOV word ptr [EBP + -0x28],AX
008dcdcb : CALL 0x00406360
008dcdd0 : MOV dword ptr [EBP + -0x4],EBX
008dcdd3 : MOV EAX,dword ptr [ESI + 0x3c]
008dcdd6 : MOV ESI,dword ptr [EAX]
008dcdd8 : CMP ESI,EAX
008dcdda : JZ 0x008dce80
008dcde0 : MOV ECX,dword ptr [ESI + 0x10]
008dcde3 : MOV EAX,dword ptr [ECX + 0x84]
008dcde9 : MOV EDX,dword ptr [ECX + 0x88]
008dcdef : CMP EAX,EDX
008dcdf1 : JZ 0x008dce30
008dcdf3 : MOV EDI,dword ptr [EBP + 0x8]
008dcdf6 : MOV EDI,dword ptr [EDI + 0x4]
008dcdf9 : LEA ESP,[ESP]
008dce00 : MOV EBX,dword ptr [EAX]
008dce02 : CMP dword ptr [EBX + 0xe4],EDI
008dce08 : JZ 0x008dce15
008dce0a : ADD EAX,0x4
008dce0d : CMP EAX,EDX
008dce0f : JNZ 0x008dce00
008dce11 : XOR EBX,EBX
008dce13 : JMP 0x008dce30
008dce15 : XOR EBX,EBX
008dce17 : PUSH -0x1
008dce19 : PUSH EBX
008dce1a : CMP byte ptr [ECX + 0x4],BL
008dce1d : JZ 0x008dce25
008dce1f : ADD ECX,0x8
008dce22 : PUSH ECX
008dce23 : JMP 0x008dce28
008dce25 : MOV EAX,dword ptr [EAX]
008dce27 : PUSH EAX
008dce28 : LEA ECX,[EBP + -0x2c]
008dce2b : CALL 0x00405eb0
008dce30 : CMP dword ptr [EBP + -0x18],EBX
008dce33 : JNZ 0x008dce80
008dce35 : CMP byte ptr [ESI + 0x15],BL
008dce38 : JNZ 0x008dce74
008dce3a : MOV EAX,dword ptr [ESI + 0x8]
008dce3d : CMP byte ptr [EAX + 0x15],BL
008dce40 : JNZ 0x008dce5b
008dce42 : MOV ESI,EAX
008dce44 : MOV EAX,dword ptr [ESI]
008dce46 : CMP byte ptr [EAX + 0x15],BL
008dce49 : JNZ 0x008dce74
008dce4b : JMP 0x008dce50
008dce50 : MOV ESI,EAX
008dce52 : MOV EAX,dword ptr [ESI]
008dce54 : CMP byte ptr [EAX + 0x15],BL
008dce57 : JZ 0x008dce50
008dce59 : JMP 0x008dce74
008dce5b : MOV EAX,dword ptr [ESI + 0x4]
008dce5e : CMP byte ptr [EAX + 0x15],BL
008dce61 : JNZ 0x008dce72
008dce63 : CMP ESI,dword ptr [EAX + 0x8]
008dce66 : JNZ 0x008dce72
008dce68 : MOV ESI,EAX
008dce6a : MOV EAX,dword ptr [EAX + 0x4]
008dce6d : CMP byte ptr [EAX + 0x15],BL
008dce70 : JZ 0x008dce63
008dce72 : MOV ESI,EAX
008dce74 : MOV ECX,dword ptr [EBP + -0x4c]
008dce77 : CMP ESI,dword ptr [ECX + 0x3c]
008dce7a : JNZ 0x008dcde0
008dce80 : PUSH 0x12
008dce82 : XOR EDX,EDX
008dce84 : PUSH 0xc57494
008dce89 : LEA ECX,[EBP + -0x68]
008dce8c : MOV dword ptr [EBP + -0x50],0x7
008dce93 : MOV dword ptr [EBP + -0x54],EBX
008dce96 : MOV word ptr [EBP + -0x64],DX
008dce9a : CALL 0x00406360
008dce9f : MOV byte ptr [EBP + -0x4],0x1
008dcea3 : MOV ECX,dword ptr [0x0172491c]
008dcea9 : LEA EAX,[EBP + -0x68]
008dceac : PUSH EAX
008dcead : LEA EDI,[EBP + 0xffffff7c]
008dceb3 : CALL 0x0081d120
008dceb8 : MOV byte ptr [EBP + -0x4],0x2
008dcebc : MOV ECX,dword ptr [EBP + -0x28]
008dcebf : MOV EDI,0x8
008dcec4 : CMP dword ptr [EBP + -0x14],EDI
008dcec7 : JNC 0x008dcecc
008dcec9 : LEA ECX,[EBP + -0x28]
008dcecc : CMP dword ptr [EAX + 0x18],EDI
008dcecf : JC 0x008dced6
008dced1 : MOV EAX,dword ptr [EAX + 0x4]
008dced4 : JMP 0x008dced9
008dced6 : ADD EAX,0x4
008dced9 : PUSH ECX
008dceda : PUSH EAX
008dcedb : LEA ESI,[EBP + -0x48]
008dcede : CALL 0x00404750
008dcee3 : ADD ESP,0x8
008dcee6 : MOV byte ptr [EBP + -0x4],0x4
008dceea : CMP dword ptr [EBP + -0x6c],EDI
008dceed : JC 0x008dcef7
008dceef : MOV ECX,dword ptr [EBP + -0x80]
008dcef2 : CALL 0x006f04e0
008dcef7 : MOV ESI,0x7
008dcefc : XOR ECX,ECX
008dcefe : MOV dword ptr [EBP + -0x6c],ESI
008dcf01 : MOV dword ptr [EBP + -0x70],EBX
008dcf04 : MOV word ptr [EBP + -0x80],CX
008dcf08 : MOV byte ptr [EBP + -0x4],0x5
008dcf0c : CMP dword ptr [EBP + -0x50],EDI
008dcf0f : JC 0x008dcf19
008dcf11 : MOV ECX,dword ptr [EBP + -0x64]
008dcf14 : CALL 0x006f04e0
008dcf19 : XOR EDX,EDX
008dcf1b : MOV word ptr [EBP + -0x64],DX
008dcf1f : MOV EDX,dword ptr [EBP + -0x44]
008dcf22 : MOV dword ptr [EBP + -0x50],ESI
008dcf25 : MOV dword ptr [EBP + -0x54],EBX
008dcf28 : CMP dword ptr [EBP + -0x30],EDI
008dcf2b : JNC 0x008dcf30
008dcf2d : LEA EDX,[EBP + -0x44]
008dcf30 : XOR EAX,EAX
008dcf32 : MOV word ptr [EBP + -0x64],AX
008dcf36 : MOV EAX,EDX
008dcf38 : MOV dword ptr [EBP + -0x50],ESI
008dcf3b : MOV dword ptr [EBP + -0x54],EBX
008dcf3e : LEA ESI,[EAX + 0x2]
008dcf41 : MOV CX,word ptr [EAX]
008dcf44 : ADD EAX,0x2
008dcf47 : CMP CX,BX
008dcf4a : JNZ 0x008dcf41
008dcf4c : SUB EAX,ESI
008dcf4e : SAR EAX,0x1
008dcf50 : PUSH EAX
008dcf51 : PUSH EDX
008dcf52 : LEA ECX,[EBP + -0x68]
008dcf55 : CALL 0x00406360
008dcf5a : MOV byte ptr [EBP + -0x4],0x6
008dcf5e : MOV ECX,dword ptr [0x00da9894]
008dcf64 : MOV EAX,dword ptr [ECX]
008dcf66 : MOV ECX,dword ptr [EAX + 0x1a8]
008dcf6c : MOV EDX,dword ptr [ECX]
008dcf6e : MOV EDX,dword ptr [EDX + 0x44]
008dcf71 : PUSH 0xf
008dcf73 : LEA EAX,[EBP + -0x68]
008dcf76 : PUSH EAX
008dcf77 : CALL EDX
008dcf79 : MOV byte ptr [EBP + -0x4],0x5
008dcf7d : CMP dword ptr [EBP + -0x50],EDI
008dcf80 : JC 0x008dcf8a
008dcf82 : MOV ECX,dword ptr [EBP + -0x64]
008dcf85 : CALL 0x006f04e0
008dcf8a : MOV ESI,dword ptr [EBP + -0x4c]
008dcf8d : MOV ECX,dword ptr [ESI + 0x1d8]
008dcf93 : XOR EAX,EAX
008dcf95 : MOV dword ptr [EBP + -0x50],0x7
008dcf9c : MOV dword ptr [EBP + -0x54],EBX
008dcf9f : MOV word ptr [EBP + -0x64],AX
008dcfa3 : CMP ECX,EBX
008dcfa5 : JZ 0x008dcfba
008dcfa7 : CMP byte ptr [ECX + 0x32],BL
008dcfaa : JNZ 0x008dcfba
008dcfac : MOV EDX,dword ptr [ECX]
008dcfae : MOV EAX,dword ptr [EDX + 0x18]
008dcfb1 : PUSH 0x12c
008dcfb6 : PUSH 0x1
008dcfb8 : CALL EAX
008dcfba : MOV ECX,ESI
008dcfbc : CALL 0x008db0f0
008dcfc1 : MOV byte ptr [EBP + -0x4],BL
008dcfc4 : CMP dword ptr [EBP + -0x30],EDI
008dcfc7 : JC 0x008dcfd1
008dcfc9 : MOV ECX,dword ptr [EBP + -0x44]
008dcfcc : CALL 0x006f04e0
008dcfd1 : MOV ESI,0x7
008dcfd6 : XOR ECX,ECX
008dcfd8 : MOV dword ptr [EBP + -0x30],ESI
008dcfdb : MOV dword ptr [EBP + -0x34],EBX
008dcfde : MOV word ptr [EBP + -0x44],CX
008dcfe2 : MOV dword ptr [EBP + -0x4],0xffffffff
008dcfe9 : CMP dword ptr [EBP + -0x14],EDI
008dcfec : JC 0x008dcff6
008dcfee : MOV ECX,dword ptr [EBP + -0x28]
008dcff1 : CALL 0x006f04e0
008dcff6 : XOR EDX,EDX
008dcff8 : MOV dword ptr [EBP + -0x14],ESI
008dcffb : MOV dword ptr [EBP + -0x18],EBX
008dcffe : MOV word ptr [EBP + -0x28],DX
008dd002 : MOV ECX,dword ptr [EBP + -0xc]
008dd005 : MOV dword ptr FS:[0x0],ECX
008dd00c : POP ECX
008dd00d : POP EDI
008dd00e : POP ESI
008dd00f : POP EBX
008dd010 : MOV ECX,dword ptr [EBP + -0x10]
008dd013 : XOR ECX,EBP
008dd015 : CALL 0x00633e6b
008dd01a : MOV ESP,EBP
008dd01c : POP EBP
008dd01d : RET 0x4
