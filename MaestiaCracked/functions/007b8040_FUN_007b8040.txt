PROGRAM  : Maestia.exe
FUNCTION : FUN_007b8040
ENTRY    : 007b8040
BODY     : [[007b8040, 007b84f9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007b8040(int *param_1)

{
  float fVar1;
  byte bVar2;
  char cVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  int in_ECX;
  float local_388;
  float local_384;
  float fStack_380;
  float local_37c;
  float fStack_378;
  float fStack_374;
  float fStack_370;
  undefined1 local_36a;
  byte local_369;
  undefined **local_368;
  size_t local_364;
  undefined1 local_360 [256];
  undefined **local_260;
  size_t local_25c;
  undefined1 local_258 [256];
  undefined8 local_158;
  float local_150;
  undefined4 local_14c;
  size_t local_130;
  undefined1 local_12c [12];
  undefined **local_120;
  undefined1 local_2b;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b62933;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_ECX == 0) goto LAB_007b84dc;
  *(undefined1 *)((int)param_1 + 0xa9ba) = 0;
  local_36a = 0;
  local_260 = &PTR_FUN_00cd3f48;
  local_25c = 0;
  local_258[0] = 0;
  local_8 = 0;
  if (param_1[0x2af1] != 0) {
    FUN_0070cf00(in_ECX + 0x200,local_18);
    FUN_00451af0();
    local_8._0_1_ = 1;
    iVar4 = FUN_0046f7f0(param_1 + 0x2af0);
    local_8._0_1_ = 2;
    local_25c = *(size_t *)(iVar4 + 4);
    if (*(int *)(iVar4 + 4) != 0) {
      _memmove(local_258,(void *)(iVar4 + 8),local_25c);
    }
    local_258[local_25c] = 0;
    local_120 = &PTR_FUN_00cd3f48;
    local_8 = (uint)local_8._1_3_ << 8;
    local_368 = &PTR_FUN_00cd3f48;
  }
  FUN_00468060(param_1 + 0x2b75,&fStack_374,&local_260);
  if (fStack_374 == 0.0) {
    puVar5 = (undefined4 *)(**(code **)(*param_1 + 8))();
    local_369 = FUN_00808260(puVar5,local_258);
    local_369 = local_369 & 1;
    if (local_369 != 0) {
      bVar2 = FUN_00465b90(param_1,puVar5);
      local_369 = local_369 & bVar2;
      local_388 = (float)*(undefined8 *)(puVar5 + 0x6f);
      local_384 = (float)((ulonglong)*(undefined8 *)(puVar5 + 0x6f) >> 0x20);
      fStack_380 = (float)*(undefined8 *)(puVar5 + 0x71);
      local_37c = (float)((ulonglong)*(undefined8 *)(puVar5 + 0x71) >> 0x20);
      fStack_374 = local_384 - local_388;
      fStack_370 = local_37c - fStack_380;
      FUN_00457240();
      bVar2 = FUN_006eb000(param_1,puVar5);
      if ((local_369 & bVar2) != 0) {
        puVar6 = (undefined4 *)FUN_00467f10(param_1 + 0x2b75,&local_260);
        *puVar6 = puVar5;
        goto LAB_007b827b;
      }
      goto LAB_007b84c2;
    }
    if (puVar5 != (undefined4 *)0x0) {
      (**(code **)*puVar5)(1);
    }
  }
  else {
    puVar5 = puRam00000108;
    if (fStack_370 != 0.0) {
      puVar5 = *(undefined4 **)(*(int *)((int)fStack_370 + 4) + 0x108 + (int)fStack_374);
    }
LAB_007b827b:
    FUN_00a67130();
    local_8._0_1_ = 3;
    fStack_370 = *(float *)(in_ECX + 0xa10);
    fStack_374 = *(float *)(in_ECX + 0xa0c);
    local_158 = *(undefined8 *)(in_ECX + 0xa08);
    local_150 = fStack_370;
    FUN_004557c0(*(undefined4 *)(in_ECX + 0xa14));
    local_14c = *(undefined4 *)(in_ECX + 0xa18);
    local_2b = 0;
    FUN_0070cf00(in_ECX);
    FUN_00451af0();
    local_8 = CONCAT31(local_8._1_3_,4);
    if (local_364 != 0) {
      local_130 = local_364;
      _memmove(local_12c,local_360,local_364);
      local_12c[local_130] = 0;
    }
    local_384 = (float)*(undefined8 *)(puVar5 + 0x356);
    fStack_380 = (float)((ulonglong)*(undefined8 *)(puVar5 + 0x356) >> 0x20);
    local_37c = (float)*(undefined8 *)(puVar5 + 0x358);
    fStack_378 = (float)((ulonglong)*(undefined8 *)(puVar5 + 0x358) >> 0x20);
    fStack_374 = (float)*(undefined8 *)(puVar5 + 0x35a);
    fStack_370 = (float)((ulonglong)*(undefined8 *)(puVar5 + 0x35a) >> 0x20);
    fVar1 = (float)local_158 + local_384;
    if ((float)param_1[0x2a6f] <= (float)local_158 + local_384) {
      fVar1 = (float)param_1[0x2a6f];
    }
    param_1[0x2a6f] = (int)fVar1;
    fVar1 = (float)param_1[0x2a70];
    if (local_158._4_4_ + fStack_380 < (float)param_1[0x2a70]) {
      fVar1 = local_158._4_4_ + fStack_380;
    }
    param_1[0x2a70] = (int)fVar1;
    fVar1 = (float)param_1[0x2a71];
    if (local_150 + local_37c < (float)param_1[0x2a71]) {
      fVar1 = local_150 + local_37c;
    }
    param_1[0x2a71] = (int)fVar1;
    fVar1 = (float)param_1[0x2a72];
    if ((float)param_1[0x2a72] < fStack_378 + (float)local_158) {
      fVar1 = fStack_378 + (float)local_158;
    }
    param_1[0x2a72] = (int)fVar1;
    fVar1 = (float)param_1[0x2a73];
    if ((float)param_1[0x2a73] < fStack_374 + local_158._4_4_) {
      fVar1 = fStack_374 + local_158._4_4_;
    }
    param_1[0x2a73] = (int)fVar1;
    fVar1 = (float)param_1[0x2a74];
    if ((float)param_1[0x2a74] < fStack_370 + local_150) {
      fVar1 = fStack_370 + local_150;
    }
    param_1[0x2a74] = (int)fVar1;
    cVar3 = FUN_006ebab0(param_1,&local_158,1);
    if (cVar3 != '\0') {
      *(undefined4 **)(in_ECX + 0xa48) = puVar5;
      *(undefined1 *)(param_1 + 0x270d) = 1;
    }
    local_368 = &PTR_FUN_00cd3f48;
    local_8 = local_8 & 0xffffff00;
    FUN_00a670e0();
LAB_007b84c2:
    *(undefined1 *)((int)param_1 + 0xa9ba) = 1;
  }
  local_260 = &PTR_FUN_00cd3f48;
LAB_007b84dc:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007b8040 : PUSH EBP
007b8041 : MOV EBP,ESP
007b8043 : PUSH -0x1
007b8045 : PUSH 0xb62933
007b804a : MOV EAX,FS:[0x0]
007b8050 : PUSH EAX
007b8051 : SUB ESP,0x380
007b8057 : MOV EAX,[0x00d66fa0]
007b805c : XOR EAX,EBP
007b805e : MOV dword ptr [EBP + -0x14],EAX
007b8061 : PUSH EBX
007b8062 : PUSH ESI
007b8063 : PUSH EDI
007b8064 : PUSH EAX
007b8065 : LEA EAX,[EBP + -0xc]
007b8068 : MOV FS:[0x0],EAX
007b806e : MOV EBX,dword ptr [EBP + 0x8]
007b8071 : MOV ESI,ECX
007b8073 : XOR ECX,ECX
007b8075 : MOV dword ptr [EBP + 0xfffffc78],ESI
007b807b : CMP ESI,ECX
007b807d : JNZ 0x007b8086
007b807f : XOR AL,AL
007b8081 : JMP 0x007b84dc
007b8086 : MOV byte ptr [EBX + 0xa9ba],CL
007b808c : MOV byte ptr [EBP + 0xfffffc9a],CL
007b8092 : MOV dword ptr [EBP + 0xfffffda4],0xcd3f48
007b809c : MOV dword ptr [EBP + 0xfffffda8],ECX
007b80a2 : MOV byte ptr [EBP + 0xfffffdac],CL
007b80a8 : MOV dword ptr [EBP + -0x4],ECX
007b80ab : MOV EAX,dword ptr [EBX + 0xabc4]
007b80b1 : CMP EAX,ECX
007b80b3 : JZ 0x007b8141
007b80b9 : ADD ESI,0x200
007b80bf : PUSH ESI
007b80c0 : CALL 0x0070cf00
007b80c5 : ADD ESP,0x4
007b80c8 : MOV EDX,EAX
007b80ca : LEA ESI,[EBP + 0xfffffc9c]
007b80d0 : CALL 0x00451af0
007b80d5 : MOV byte ptr [EBP + -0x4],0x1
007b80d9 : LEA EAX,[EBX + 0xabc0]
007b80df : MOV EDI,ESI
007b80e1 : PUSH EAX
007b80e2 : LEA ESI,[EBP + 0xfffffee4]
007b80e8 : CALL 0x0046f7f0
007b80ed : MOV byte ptr [EBP + -0x4],0x2
007b80f1 : MOV ECX,dword ptr [EAX + 0x4]
007b80f4 : MOV dword ptr [EBP + 0xfffffda8],ECX
007b80fa : CMP dword ptr [EAX + 0x4],0x0
007b80fe : JBE 0x007b811a
007b8100 : PUSH ECX
007b8101 : ADD EAX,0x8
007b8104 : PUSH EAX
007b8105 : LEA ECX,[EBP + 0xfffffdac]
007b810b : PUSH ECX
007b810c : CALL 0x00636880
007b8111 : MOV ECX,dword ptr [EBP + 0xfffffda8]
007b8117 : ADD ESP,0xc
007b811a : MOV byte ptr [EBP + ECX*0x1 + 0xfffffdac],0x0
007b8122 : MOV byte ptr [EBP + -0x4],0x1
007b8126 : MOV EAX,0xcd3f48
007b812b : MOV dword ptr [EBP + 0xfffffee4],EAX
007b8131 : MOV byte ptr [EBP + -0x4],0x0
007b8135 : MOV ESI,dword ptr [EBP + 0xfffffc78]
007b813b : MOV dword ptr [EBP + 0xfffffc9c],EAX
007b8141 : LEA EDX,[EBP + 0xfffffda4]
007b8147 : PUSH EDX
007b8148 : LEA ECX,[EBP + 0xfffffc90]
007b814e : LEA EAX,[EBX + 0xadd4]
007b8154 : PUSH ECX
007b8155 : PUSH EAX
007b8156 : CALL 0x00468060
007b815b : MOV ECX,dword ptr [EBP + 0xfffffc90]
007b8161 : TEST ECX,ECX
007b8163 : JZ 0x007b818d
007b8165 : MOV EAX,dword ptr [EBP + 0xfffffc94]
007b816b : TEST EAX,EAX
007b816d : JZ 0x007b8180
007b816f : MOV EAX,dword ptr [EAX + 0x4]
007b8172 : MOV EDI,dword ptr [EAX + ECX*0x1 + 0x108]
007b8179 : ADD EAX,ECX
007b817b : JMP 0x007b827b
007b8180 : XOR EAX,EAX
007b8182 : MOV EDI,dword ptr [EAX + 0x108]
007b8188 : JMP 0x007b827b
007b818d : MOV EDX,dword ptr [EBX]
007b818f : MOV EAX,dword ptr [EDX + 0x8]
007b8192 : MOV ECX,EBX
007b8194 : CALL EAX
007b8196 : LEA ECX,[EBP + 0xfffffdac]
007b819c : MOV EDI,EAX
007b819e : PUSH ECX
007b819f : PUSH EDI
007b81a0 : CALL 0x00808260
007b81a5 : AND AL,0x1
007b81a7 : MOV byte ptr [EBP + 0xfffffc9b],AL
007b81ad : JNZ 0x007b81cb
007b81af : TEST EDI,EDI
007b81b1 : JZ 0x007b81bd
007b81b3 : MOV EDX,dword ptr [EDI]
007b81b5 : MOV EAX,dword ptr [EDX]
007b81b7 : PUSH 0x1
007b81b9 : MOV ECX,EDI
007b81bb : CALL EAX
007b81bd : MOV dword ptr [EBP + -0x4],0xffffffff
007b81c4 : XOR AL,AL
007b81c6 : JMP 0x007b84d2
007b81cb : PUSH EDI
007b81cc : PUSH EBX
007b81cd : CALL 0x00465b90
007b81d2 : MOVQ XMM0,qword ptr [EDI + 0x1bc]
007b81da : MOV ECX,dword ptr [EDI + 0x1d4]
007b81e0 : AND byte ptr [EBP + 0xfffffc9b],AL
007b81e6 : MOVQ qword ptr [EBP + 0xfffffc7c],XMM0
007b81ee : MOVQ XMM0,qword ptr [EDI + 0x1c4]
007b81f6 : MOVQ qword ptr [EBP + 0xfffffc84],XMM0
007b81fe : MOVQ XMM0,qword ptr [EDI + 0x1cc]
007b8206 : MOVQ qword ptr [EBP + 0xfffffc8c],XMM0
007b820e : MOVSS XMM0,dword ptr [EBP + 0xfffffc80]
007b8216 : SUBSS XMM0,dword ptr [EBP + 0xfffffc7c]
007b821e : MOVSS dword ptr [EBP + 0xfffffc90],XMM0
007b8226 : MOVSS XMM0,dword ptr [EBP + 0xfffffc88]
007b822e : SUBSS XMM0,dword ptr [EBP + 0xfffffc84]
007b8236 : MOV dword ptr [EBP + 0xfffffc94],ECX
007b823c : LEA ECX,[EBP + 0xfffffc7c]
007b8242 : MOV EAX,EDI
007b8244 : MOVSS dword ptr [EBP + 0xfffffc94],XMM0
007b824c : CALL 0x00457240
007b8251 : PUSH EDI
007b8252 : PUSH EBX
007b8253 : CALL 0x006eb000
007b8258 : MOV CL,byte ptr [EBP + 0xfffffc9b]
007b825e : AND CL,AL
007b8260 : JZ 0x007b84bc
007b8266 : LEA EDX,[EBP + 0xfffffda4]
007b826c : PUSH EDX
007b826d : LEA EAX,[EBX + 0xadd4]
007b8273 : PUSH EAX
007b8274 : CALL 0x00467f10
007b8279 : MOV dword ptr [EAX],EDI
007b827b : LEA ECX,[EBP + 0xfffffeac]
007b8281 : CALL 0x00a67130
007b8286 : MOV byte ptr [EBP + -0x4],0x3
007b828a : FLD float ptr [ESI + 0xa14]
007b8290 : MOVSS XMM0,dword ptr [ESI + 0xa08]
007b8298 : MOVSS XMM2,dword ptr [ESI + 0xa10]
007b82a0 : MOVSS XMM1,dword ptr [ESI + 0xa0c]
007b82a8 : MOVSS dword ptr [EBP + 0xfffffc94],XMM2
007b82b0 : MOV EAX,dword ptr [EBP + 0xfffffc94]
007b82b6 : MOVSS dword ptr [EBP + 0xfffffc8c],XMM0
007b82be : MOVSS dword ptr [EBP + 0xfffffc90],XMM1
007b82c6 : MOVQ XMM0,qword ptr [EBP + 0xfffffc8c]
007b82ce : PUSH ECX
007b82cf : LEA ESI,[EBP + 0xfffffeac]
007b82d5 : FSTP float ptr [ESP]
007b82d8 : MOVQ qword ptr [EBP + 0xfffffeac],XMM0
007b82e0 : MOV dword ptr [EBP + 0xfffffeb4],EAX
007b82e6 : CALL 0x004557c0
007b82eb : MOV EAX,dword ptr [EBP + 0xfffffc78]
007b82f1 : MOVSS XMM0,dword ptr [EAX + 0xa18]
007b82f9 : PUSH EAX
007b82fa : MOVSS dword ptr [EBP + 0xfffffeb8],XMM0
007b8302 : MOV byte ptr [EBP + -0x27],0x0
007b8306 : CALL 0x0070cf00
007b830b : ADD ESP,0x4
007b830e : MOV EDX,EAX
007b8310 : LEA ESI,[EBP + 0xfffffc9c]
007b8316 : CALL 0x00451af0
007b831b : MOV byte ptr [EBP + -0x4],0x4
007b831f : MOV EAX,dword ptr [EBP + 0xfffffca0]
007b8325 : TEST EAX,EAX
007b8327 : JZ 0x007b8356
007b8329 : MOV dword ptr [EBP + 0xfffffed4],EAX
007b832f : JBE 0x007b8348
007b8331 : PUSH EAX
007b8332 : LEA ECX,[EBP + 0xfffffca4]
007b8338 : PUSH ECX
007b8339 : LEA EDX,[EBP + 0xfffffed8]
007b833f : PUSH EDX
007b8340 : CALL 0x00636880
007b8345 : ADD ESP,0xc
007b8348 : MOV EAX,dword ptr [EBP + 0xfffffed4]
007b834e : MOV byte ptr [EBP + EAX*0x1 + 0xfffffed8],0x0
007b8356 : MOVQ XMM0,qword ptr [EDI + 0xd58]
007b835e : MOVSS XMM4,dword ptr [EBP + 0xfffffeac]
007b8366 : MOVSS XMM5,dword ptr [EBP + 0xfffffeb0]
007b836e : MOVSS XMM6,dword ptr [EBP + 0xfffffeb4]
007b8376 : MOVQ qword ptr [EBP + 0xfffffc80],XMM0
007b837e : MOVQ XMM0,qword ptr [EDI + 0xd60]
007b8386 : MOVQ qword ptr [EBP + 0xfffffc88],XMM0
007b838e : MOVQ XMM0,qword ptr [EDI + 0xd68]
007b8396 : MOVSS XMM3,dword ptr [EBP + 0xfffffc8c]
007b839e : MOVQ qword ptr [EBP + 0xfffffc90],XMM0
007b83a6 : MOVSS XMM7,dword ptr [EBP + 0xfffffc94]
007b83ae : MOVAPS XMM0,XMM4
007b83b1 : ADDSS XMM0,dword ptr [EBP + 0xfffffc80]
007b83b9 : ADDSS XMM3,XMM4
007b83bd : MOVSS XMM4,dword ptr [EBP + 0xfffffc90]
007b83c5 : MOVAPS XMM1,XMM5
007b83c8 : ADDSS XMM1,dword ptr [EBP + 0xfffffc84]
007b83d0 : ADDSS XMM4,XMM5
007b83d4 : MOVSS XMM5,dword ptr [EBX + 0xa9bc]
007b83dc : COMISS XMM5,XMM0
007b83df : MOVAPS XMM2,XMM6
007b83e2 : ADDSS XMM2,dword ptr [EBP + 0xfffffc88]
007b83ea : ADDSS XMM7,XMM6
007b83ee : JA 0x007b83f3
007b83f0 : MOVAPS XMM0,XMM5
007b83f3 : MOVSS dword ptr [EBX + 0xa9bc],XMM0
007b83fb : MOVSS XMM0,dword ptr [EBX + 0xa9c0]
007b8403 : COMISS XMM0,XMM1
007b8406 : JBE 0x007b840b
007b8408 : MOVAPS XMM0,XMM1
007b840b : MOVSS dword ptr [EBX + 0xa9c0],XMM0
007b8413 : MOVSS XMM0,dword ptr [EBX + 0xa9c4]
007b841b : COMISS XMM0,XMM2
007b841e : JBE 0x007b8423
007b8420 : MOVAPS XMM0,XMM2
007b8423 : MOVSS dword ptr [EBX + 0xa9c4],XMM0
007b842b : MOVSS XMM0,dword ptr [EBX + 0xa9c8]
007b8433 : COMISS XMM3,XMM0
007b8436 : JBE 0x007b843b
007b8438 : MOVAPS XMM0,XMM3
007b843b : MOVSS dword ptr [EBX + 0xa9c8],XMM0
007b8443 : MOVSS XMM0,dword ptr [EBX + 0xa9cc]
007b844b : COMISS XMM4,XMM0
007b844e : JBE 0x007b8453
007b8450 : MOVAPS XMM0,XMM4
007b8453 : MOVSS dword ptr [EBX + 0xa9cc],XMM0
007b845b : MOVSS XMM0,dword ptr [EBX + 0xa9d0]
007b8463 : COMISS XMM7,XMM0
007b8466 : JBE 0x007b846b
007b8468 : MOVAPS XMM0,XMM7
007b846b : PUSH 0x1
007b846d : LEA ECX,[EBP + 0xfffffeac]
007b8473 : PUSH ECX
007b8474 : PUSH EBX
007b8475 : MOV ECX,EDI
007b8477 : MOVSS dword ptr [EBX + 0xa9d0],XMM0
007b847f : CALL 0x006ebab0
007b8484 : MOV DL,AL
007b8486 : TEST DL,DL
007b8488 : JZ 0x007b849d
007b848a : MOV EAX,dword ptr [EBP + 0xfffffc78]
007b8490 : MOV dword ptr [EAX + 0xa48],EDI
007b8496 : MOV byte ptr [EBX + 0x9c34],0x1
007b849d : MOV byte ptr [EBP + -0x4],0x3
007b84a1 : MOV dword ptr [EBP + 0xfffffc9c],0xcd3f48
007b84ab : MOV byte ptr [EBP + -0x4],0x0
007b84af : LEA ECX,[EBP + 0xfffffeac]
007b84b5 : CALL 0x00a670e0
007b84ba : JMP 0x007b84c2
007b84bc : MOV DL,byte ptr [EBP + 0xfffffc9a]
007b84c2 : MOV byte ptr [EBX + 0xa9ba],0x1
007b84c9 : MOV dword ptr [EBP + -0x4],0xffffffff
007b84d0 : MOV AL,DL
007b84d2 : MOV dword ptr [EBP + 0xfffffda4],0xcd3f48
007b84dc : MOV ECX,dword ptr [EBP + -0xc]
007b84df : MOV dword ptr FS:[0x0],ECX
007b84e6 : POP ECX
007b84e7 : POP EDI
007b84e8 : POP ESI
007b84e9 : POP EBX
007b84ea : MOV ECX,dword ptr [EBP + -0x14]
007b84ed : XOR ECX,EBP
007b84ef : CALL 0x00633e6b
007b84f4 : MOV ESP,EBP
007b84f6 : POP EBP
007b84f7 : RET 0x4
