PROGRAM  : Maestia.exe
FUNCTION : FUN_00501a80
ENTRY    : 00501a80
BODY     : [[00501a80, 00501b57]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00501a80(uint param_1)

{
  uint uVar1;
  int iVar2;
  undefined1 uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  undefined4 uVar7;
  
  iVar2 = param_1;
  if ((*(int *)(param_1 + 8) != 0) &&
     (iVar4 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar4 == 4)) {
    if (*(int *)(param_1 + 8) == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = *(int *)(param_1 + 8) + -0x68;
    }
    iVar4 = *(int *)(*(int *)(iVar4 + 0xa0) + 0x118);
    if (iVar4 != 0) {
      uVar6 = *(uint *)(*(int *)(iVar4 + 8) + 0x20);
      param_1 = CONCAT31(param_1._1_3_,*(byte *)(iVar4 + 0x68) >> 2) & 0xffffff01;
      uVar1 = *(uint *)(*(int *)(iVar4 + 8) + 0x24);
      uVar5 = uVar6;
      if (uVar1 <= uVar6) {
        uVar5 = uVar1;
      }
      if (uVar6 <= uVar1) {
        uVar6 = uVar1;
      }
      if (0 < *(int *)(iVar2 + 0x1c)) {
        uVar7 = *(undefined4 *)(iVar2 + 0x18);
        FUN_00526260(0);
        uVar3 = FUN_00526120(uVar7);
        param_1 = CONCAT31(param_1._1_3_,uVar3);
      }
      if (1 < *(int *)(iVar2 + 0x1c)) {
        uVar7 = *(undefined4 *)(iVar2 + 0x18);
        FUN_00526260(1);
        uVar5 = FUN_00527a80(uVar7);
      }
      if (2 < *(int *)(iVar2 + 0x1c)) {
        uVar7 = *(undefined4 *)(iVar2 + 0x18);
        FUN_00526260(2);
        uVar6 = FUN_00527a80(uVar7);
      }
      FUN_0054c4c0(uVar5,uVar6,param_1);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00501a80 : PUSH ESI
00501a81 : MOV ESI,dword ptr [ESP + 0x8]
00501a85 : CMP dword ptr [ESI + 0x8],0x0
00501a89 : JZ 0x00501b56
00501a8f : MOV ECX,dword ptr [ESI + 0x8]
00501a92 : MOV EAX,dword ptr [ECX]
00501a94 : MOV EDX,dword ptr [EAX + 0x8]
00501a97 : CALL EDX
00501a99 : CMP EAX,0x4
00501a9c : JNZ 0x00501b56
00501aa2 : MOV EAX,dword ptr [ESI + 0x8]
00501aa5 : TEST EAX,EAX
00501aa7 : JZ 0x00501aae
00501aa9 : ADD EAX,-0x68
00501aac : JMP 0x00501ab0
00501aae : XOR EAX,EAX
00501ab0 : MOV EAX,dword ptr [EAX + 0xa0]
00501ab6 : PUSH EDI
00501ab7 : MOV EDI,dword ptr [EAX + 0x118]
00501abd : TEST EDI,EDI
00501abf : JZ 0x00501b55
00501ac5 : MOV CL,byte ptr [EDI + 0x68]
00501ac8 : MOV EAX,dword ptr [EDI + 0x8]
00501acb : MOV EDX,dword ptr [EAX + 0x20]
00501ace : SHR CL,0x2
00501ad1 : AND CL,0x1
00501ad4 : MOV byte ptr [ESP + 0xc],CL
00501ad8 : MOV ECX,dword ptr [EAX + 0x24]
00501adb : PUSH EBX
00501adc : PUSH EBP
00501add : MOV EBP,EDX
00501adf : CMP EDX,ECX
00501ae1 : JC 0x00501ae5
00501ae3 : MOV EBP,ECX
00501ae5 : MOV EAX,EDX
00501ae7 : MOV EBX,EAX
00501ae9 : CMP ECX,EAX
00501aeb : JC 0x00501aef
00501aed : MOV EBX,ECX
00501aef : CMP dword ptr [ESI + 0x1c],0x1
00501af3 : JL 0x00501b0d
00501af5 : MOV EDX,dword ptr [ESI + 0x18]
00501af8 : PUSH EDX
00501af9 : PUSH 0x0
00501afb : MOV ECX,ESI
00501afd : CALL 0x00526260
00501b02 : MOV ECX,EAX
00501b04 : CALL 0x00526120
00501b09 : MOV byte ptr [ESP + 0x14],AL
00501b0d : CMP dword ptr [ESI + 0x1c],0x2
00501b11 : JL 0x00501b29
00501b13 : MOV EAX,dword ptr [ESI + 0x18]
00501b16 : PUSH EAX
00501b17 : PUSH 0x1
00501b19 : MOV ECX,ESI
00501b1b : CALL 0x00526260
00501b20 : MOV ECX,EAX
00501b22 : CALL 0x00527a80
00501b27 : MOV EBP,EAX
00501b29 : CMP dword ptr [ESI + 0x1c],0x3
00501b2d : JL 0x00501b45
00501b2f : MOV ECX,dword ptr [ESI + 0x18]
00501b32 : PUSH ECX
00501b33 : PUSH 0x2
00501b35 : MOV ECX,ESI
00501b37 : CALL 0x00526260
00501b3c : MOV ECX,EAX
00501b3e : CALL 0x00527a80
00501b43 : MOV EBX,EAX
00501b45 : MOV EDX,dword ptr [ESP + 0x14]
00501b49 : PUSH EDX
00501b4a : PUSH EBX
00501b4b : PUSH EBP
00501b4c : MOV ECX,EDI
00501b4e : CALL 0x0054c4c0
00501b53 : POP EBP
00501b54 : POP EBX
00501b55 : POP EDI
00501b56 : POP ESI
00501b57 : RET
