PROGRAM  : Maestia.exe
FUNCTION : FUN_00917220
ENTRY    : 00917220
BODY     : [[00917220, 00917331]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00917220(int param_1)

{
  int iVar1;
  ulonglong uVar2;
  int iVar3;
  uint8_t *packet;
  bool bVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b602df;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_00913040(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  FUN_009149e0();
  iVar3 = DAT_017248cc;
  iVar1 = *(int *)(param_1 + 0x40);
  *(undefined1 *)(DAT_017248cc + 0x72) = *(undefined1 *)(iVar1 + 0x3c);
  *(short *)(iVar3 + 0x74) = (short)(int)*(float *)(iVar1 + 0x38);
  *(undefined1 *)(iVar3 + 0x76) = *(undefined1 *)(iVar1 + 0x44);
  *(short *)(iVar3 + 0x78) = (short)(int)*(float *)(iVar1 + 0x40);
  *(undefined1 *)(iVar3 + 0x7a) = *(undefined1 *)(iVar1 + 0x45);
  FUN_00912210();
  FUN_008b2600();
  bVar4 = *(char *)(DAT_017248cc + 0x17) == '\x01';
  if ((bool)*(char *)(param_1 + 0x4d) != bVar4) {
    iVar1 = *(int *)ThreadLocalStoragePointer;
    uVar2 = (ulonglong)(*(byte *)(iVar1 + 0x18) + 1) % 3;
    packet = (uint8_t *)((int)uVar2 * 0x2000 + 0x122cb8 + iVar1);
    *(char *)(iVar1 + 0x18) = (char)uVar2;
    if (packet == (uint8_t *)0x0) {
      packet = (uint8_t *)0x0;
    }
    else {
      packet[0] = '\0';
      packet[1] = '\0';
      packet[2] = '4';
      packet[3] = 0xf8;
      packet[4] = bVar4;
    }
    local_8 = 0xffffffff;
    if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
      FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),5,packet);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00917220 : PUSH EBP
00917221 : MOV EBP,ESP
00917223 : PUSH -0x1
00917225 : PUSH 0xb602df
0091722a : MOV EAX,FS:[0x0]
00917230 : PUSH EAX
00917231 : PUSH EBX
00917232 : PUSH ESI
00917233 : PUSH EDI
00917234 : MOV EAX,[0x00d66fa0]
00917239 : XOR EAX,EBP
0091723b : PUSH EAX
0091723c : LEA EAX,[EBP + -0xc]
0091723f : MOV FS:[0x0],EAX
00917245 : MOV EBX,dword ptr [EBP + 0x8]
00917248 : MOV EDI,dword ptr [EBX + 0x38]
0091724b : CALL 0x00913040
00917250 : MOV ESI,dword ptr [EBX + 0x3c]
00917253 : CALL 0x009149e0
00917258 : MOV EAX,dword ptr [EBX + 0x40]
0091725b : MOV CL,byte ptr [EAX + 0x3c]
0091725e : MOV ESI,dword ptr [0x017248cc]
00917264 : MOV byte ptr [ESI + 0x72],CL
00917267 : MOVSS XMM0,dword ptr [EAX + 0x38]
0091726c : CVTTSS2SI ECX,XMM0
00917270 : MOV word ptr [ESI + 0x74],CX
00917274 : MOV CL,byte ptr [EAX + 0x44]
00917277 : MOV byte ptr [ESI + 0x76],CL
0091727a : MOVSS XMM0,dword ptr [EAX + 0x40]
0091727f : CVTTSS2SI EDX,XMM0
00917283 : MOV word ptr [ESI + 0x78],DX
00917287 : MOV AL,byte ptr [EAX + 0x45]
0091728a : MOV byte ptr [ESI + 0x7a],AL
0091728d : MOV EAX,dword ptr [EBX + 0x44]
00917290 : CALL 0x00912210
00917295 : MOV EDI,dword ptr [0x017248cc]
0091729b : CALL 0x008b2600
009172a0 : MOV EAX,[0x017248cc]
009172a5 : MOV AL,byte ptr [EAX + 0x17]
009172a8 : CMP AL,0x1
009172aa : SETZ CL
009172ad : CMP byte ptr [EBX + 0x4d],CL
009172b0 : JZ 0x0091731e
009172b2 : MOV EDX,dword ptr FS:[0x2c]
009172b9 : MOV ESI,dword ptr [EDX]
009172bb : MOVZX EAX,byte ptr [ESI + 0x18]
009172bf : INC EAX
009172c0 : CDQ
009172c1 : MOV EDI,0x3
009172c6 : IDIV EDI
009172c8 : MOVZX EAX,DL
009172cb : SHL EAX,0xd
009172ce : LEA EAX,[EAX + ESI*0x1 + 0x122cb8]
009172d5 : MOV byte ptr [ESI + 0x18],DL
009172d8 : MOV dword ptr [EBP + 0x8],EAX
009172db : MOV dword ptr [EBP + -0x4],0x0
009172e2 : TEST EAX,EAX
009172e4 : JZ 0x009172f8
009172e6 : XOR EDX,EDX
009172e8 : MOV word ptr [EAX],DX
009172eb : MOV byte ptr [EAX + 0x2],0x34
009172ef : MOV byte ptr [EAX + 0x3],0xf8
009172f3 : MOV byte ptr [EAX + 0x4],CL
009172f6 : JMP 0x009172fa
009172f8 : XOR EAX,EAX
009172fa : MOV dword ptr [EBP + -0x4],0xffffffff
00917301 : MOV EDX,dword ptr [0x017247d4]
00917307 : MOV ECX,dword ptr [EDX + 0x4]
0091730a : TEST ECX,ECX
0091730c : JZ 0x0091731e
0091730e : CMP byte ptr [EDX + 0x8],0x0
00917312 : JZ 0x0091731e
00917314 : PUSH 0x5
00917316 : PUSH ECX
00917317 : MOV EDI,EAX
00917319 : CALL 0x00a0dd40
0091731e : MOV ECX,dword ptr [EBP + -0xc]
00917321 : MOV dword ptr FS:[0x0],ECX
00917328 : POP ECX
00917329 : POP EDI
0091732a : POP ESI
0091732b : POP EBX
0091732c : MOV ESP,EBP
0091732e : POP EBP
0091732f : RET 0x4
