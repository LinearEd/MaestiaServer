PROGRAM  : Maestia.exe
FUNCTION : FUN_0052c060
ENTRY    : 0052c060
BODY     : [[0052c060, 0052c1c0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052c060(undefined4 param_1,uint *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_0052c09a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_0052b6d0(param_1,iVar7);
LAB_0052c09a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x18);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_005266c0(param_2 + 1);
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x18) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0x18);
  if (uVar5 == param_3) {
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      FUN_005266c0(puVar1 + 2);
    }
    uVar5 = *param_2;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    piVar4 = (int *)(puVar1[1] + 8);
    *piVar4 = *piVar4 + -1;
    if (*piVar4 == 0) {
      FUN_00525340();
    }
    puVar1[1] = uVar5;
    FUN_005268b0(param_2 + 1);
    *puVar1 = uVar6;
    return;
  }
  puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
  for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18); uVar5 != param_3;
      uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x18)) {
    uVar5 = *puVar3;
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x18);
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_005266c0(puVar1 + 2);
  }
  *puVar3 = uVar6;
  uVar6 = *param_2;
  piVar4 = (int *)(uVar6 + 8);
  *piVar4 = *piVar4 + 1;
  piVar4 = (int *)(puVar1[1] + 8);
  *piVar4 = *piVar4 + -1;
  if (*piVar4 == 0) {
    FUN_00525340();
  }
  puVar1[1] = uVar6;
  FUN_005268b0(param_2 + 1);
  *puVar1 = 0xffffffff;
  return;
}



============================================================
DISASSEMBLY
============================================================
0052c060 : PUSH EBX
0052c061 : PUSH ESI
0052c062 : MOV ESI,ECX
0052c064 : MOV EAX,dword ptr [ESI]
0052c066 : TEST EAX,EAX
0052c068 : JNZ 0x0052c073
0052c06a : MOV EAX,dword ptr [ESP + 0xc]
0052c06e : PUSH 0x8
0052c070 : PUSH EAX
0052c071 : JMP 0x0052c095
0052c073 : MOV ECX,dword ptr [EAX + 0x4]
0052c076 : LEA EDX,[ECX*0x4 + 0x4]
0052c07d : MOV ECX,dword ptr [EAX]
0052c07f : LEA ECX,[ECX + ECX*0x4]
0052c082 : CMP ECX,EDX
0052c084 : JBE 0x0052c09a
0052c086 : MOV EDX,dword ptr [EAX + 0x4]
0052c089 : MOV ECX,dword ptr [ESP + 0xc]
0052c08d : LEA EAX,[EDX + EDX*0x1 + 0x2]
0052c091 : PUSH EAX
0052c092 : PUSH ECX
0052c093 : MOV ECX,ESI
0052c095 : CALL 0x0052b6d0
0052c09a : MOV ECX,dword ptr [ESI]
0052c09c : MOV EAX,dword ptr [ESP + 0x14]
0052c0a0 : AND EAX,dword ptr [ECX + 0x4]
0052c0a3 : INC dword ptr [ECX]
0052c0a5 : MOV ECX,dword ptr [ESI]
0052c0a7 : LEA EDX,[EAX + EAX*0x2]
0052c0aa : LEA ESI,[ECX + EDX*0x8 + 0x8]
0052c0ae : MOV EDX,dword ptr [ESI]
0052c0b0 : MOV EBX,0xfffffffe
0052c0b5 : CMP EDX,EBX
0052c0b7 : JNZ 0x0052c0dc
0052c0b9 : MOV ECX,dword ptr [ESP + 0x10]
0052c0bd : MOV dword ptr [ESI],0xffffffff
0052c0c3 : MOV EAX,dword ptr [ECX]
0052c0c5 : ADD ECX,0x4
0052c0c8 : PUSH ECX
0052c0c9 : MOV dword ptr [ESI + 0x4],EAX
0052c0cc : INC dword ptr [EAX + 0x8]
0052c0cf : LEA ECX,[ESI + 0x8]
0052c0d2 : CALL 0x005266c0
0052c0d7 : POP ESI
0052c0d8 : POP EBX
0052c0d9 : RET 0xc
0052c0dc : PUSH EBP
0052c0dd : MOV EBP,dword ptr [ECX + 0x4]
0052c0e0 : PUSH EDI
0052c0e1 : MOV EDI,EAX
0052c0e3 : INC EDI
0052c0e4 : AND EDI,EBP
0052c0e6 : LEA EDX,[EDI + EDI*0x2]
0052c0e9 : CMP dword ptr [ECX + EDX*0x8 + 0x8],EBX
0052c0ed : JNZ 0x0052c0e3
0052c0ef : MOV EBX,dword ptr [ESI + 0x4]
0052c0f2 : MOV EBX,dword ptr [EBX + 0xc]
0052c0f5 : AND EBX,EBP
0052c0f7 : LEA EDX,[EDI + EDI*0x2]
0052c0fa : LEA EDX,[ECX + EDX*0x8 + 0x8]
0052c0fe : CMP EBX,EAX
0052c100 : JNZ 0x0052c14f
0052c102 : TEST EDX,EDX
0052c104 : JZ 0x0052c11f
0052c106 : MOV EAX,dword ptr [ESI]
0052c108 : MOV dword ptr [EDX],EAX
0052c10a : MOV EAX,dword ptr [ESI + 0x4]
0052c10d : MOV dword ptr [EDX + 0x4],EAX
0052c110 : INC dword ptr [EAX + 0x8]
0052c113 : LEA EAX,[ESI + 0x8]
0052c116 : PUSH EAX
0052c117 : LEA ECX,[EDX + 0x8]
0052c11a : CALL 0x005266c0
0052c11f : MOV EBP,dword ptr [ESP + 0x18]
0052c123 : MOV EBX,dword ptr [EBP]
0052c126 : INC dword ptr [EBX + 0x8]
0052c129 : MOV ECX,dword ptr [ESI + 0x4]
0052c12c : ADD dword ptr [ECX + 0x8],-0x1
0052c130 : JNZ 0x0052c137
0052c132 : CALL 0x00525340
0052c137 : ADD EBP,0x4
0052c13a : PUSH EBP
0052c13b : LEA ECX,[ESI + 0x8]
0052c13e : MOV dword ptr [ESI + 0x4],EBX
0052c141 : CALL 0x005268b0
0052c146 : MOV dword ptr [ESI],EDI
0052c148 : POP EDI
0052c149 : POP EBP
0052c14a : POP ESI
0052c14b : POP EBX
0052c14c : RET 0xc
0052c14f : LEA EBX,[EBX + EBX*0x2]
0052c152 : CMP dword ptr [ECX + EBX*0x8 + 0x8],EAX
0052c156 : LEA EBX,[ECX + EBX*0x8 + 0x8]
0052c15a : JZ 0x0052c16f
0052c15c : LEA ESP,[ESP]
0052c160 : MOV EBX,dword ptr [EBX]
0052c162 : LEA EBX,[EBX + EBX*0x2]
0052c165 : CMP dword ptr [ECX + EBX*0x8 + 0x8],EAX
0052c169 : LEA EBX,[ECX + EBX*0x8 + 0x8]
0052c16d : JNZ 0x0052c160
0052c16f : TEST EDX,EDX
0052c171 : JZ 0x0052c18c
0052c173 : MOV EAX,dword ptr [ESI]
0052c175 : MOV dword ptr [EDX],EAX
0052c177 : MOV EAX,dword ptr [ESI + 0x4]
0052c17a : LEA ECX,[ESI + 0x8]
0052c17d : PUSH ECX
0052c17e : MOV dword ptr [EDX + 0x4],EAX
0052c181 : INC dword ptr [EAX + 0x8]
0052c184 : LEA ECX,[EDX + 0x8]
0052c187 : CALL 0x005266c0
0052c18c : MOV dword ptr [EBX],EDI
0052c18e : MOV EBX,dword ptr [ESP + 0x18]
0052c192 : MOV EDI,dword ptr [EBX]
0052c194 : INC dword ptr [EDI + 0x8]
0052c197 : MOV ECX,dword ptr [ESI + 0x4]
0052c19a : ADD dword ptr [ECX + 0x8],-0x1
0052c19e : JNZ 0x0052c1a5
0052c1a0 : CALL 0x00525340
0052c1a5 : ADD EBX,0x4
0052c1a8 : PUSH EBX
0052c1a9 : LEA ECX,[ESI + 0x8]
0052c1ac : MOV dword ptr [ESI + 0x4],EDI
0052c1af : CALL 0x005268b0
0052c1b4 : POP EDI
0052c1b5 : POP EBP
0052c1b6 : MOV dword ptr [ESI],0xffffffff
0052c1bc : POP ESI
0052c1bd : POP EBX
0052c1be : RET 0xc
