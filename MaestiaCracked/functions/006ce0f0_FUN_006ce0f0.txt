PROGRAM  : Maestia.exe
FUNCTION : FUN_006ce0f0
ENTRY    : 006ce0f0
BODY     : [[006ce0f0, 006ce1ff]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006ce0f0(int param_1,int param_2,void *param_3,int param_4)

{
  undefined4 uVar1;
  
  if ((param_1 != 0) && (param_2 != 0)) {
    if ((param_4 < 0) || (0x100 < param_4)) {
      if (*(char *)(param_2 + 0x19) != '\x03') {
        FUN_006c24c0(param_1,"Invalid palette length");
        return;
      }
      FUN_006c23a0(param_1,"Invalid palette length");
    }
    FUN_006ccba0(param_1,param_2,0x1000,0);
    uVar1 = FUN_006cee20(param_1,0x300);
    *(undefined4 *)(param_1 + 0x114) = uVar1;
    _memset(*(void **)(param_1 + 0x114),0,0x300);
    _memcpy(*(void **)(param_1 + 0x114),param_3,param_4 * 3);
    *(undefined4 *)(param_2 + 0x10) = *(undefined4 *)(param_1 + 0x114);
    *(undefined2 *)(param_1 + 0x118) = (undefined2)param_4;
    *(undefined2 *)(param_2 + 0x14) = (undefined2)param_4;
    *(uint *)(param_2 + 0xb8) = *(uint *)(param_2 + 0xb8) | 0x1000;
    *(uint *)(param_2 + 8) = *(uint *)(param_2 + 8) | 8;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006ce0f0 : PUSH EBP
006ce0f1 : MOV EBP,ESP
006ce0f3 : CMP dword ptr [EBP + 0x8],0x0
006ce0f7 : JZ 0x006ce0ff
006ce0f9 : CMP dword ptr [EBP + 0xc],0x0
006ce0fd : JNZ 0x006ce104
006ce0ff : JMP 0x006ce1fe
006ce104 : CMP dword ptr [EBP + 0x14],0x0
006ce108 : JL 0x006ce113
006ce10a : CMP dword ptr [EBP + 0x14],0x100
006ce111 : JLE 0x006ce148
006ce113 : MOV EAX,dword ptr [EBP + 0xc]
006ce116 : MOVZX ECX,byte ptr [EAX + 0x19]
006ce11a : CMP ECX,0x3
006ce11d : JNZ 0x006ce132
006ce11f : PUSH 0xbede80
006ce124 : MOV EDX,dword ptr [EBP + 0x8]
006ce127 : PUSH EDX
006ce128 : CALL 0x006c23a0
006ce12d : ADD ESP,0x8
006ce130 : JMP 0x006ce148
006ce132 : PUSH 0xbede80
006ce137 : MOV EAX,dword ptr [EBP + 0x8]
006ce13a : PUSH EAX
006ce13b : CALL 0x006c24c0
006ce140 : ADD ESP,0x8
006ce143 : JMP 0x006ce1fe
006ce148 : PUSH 0x0
006ce14a : PUSH 0x1000
006ce14f : MOV ECX,dword ptr [EBP + 0xc]
006ce152 : PUSH ECX
006ce153 : MOV EDX,dword ptr [EBP + 0x8]
006ce156 : PUSH EDX
006ce157 : CALL 0x006ccba0
006ce15c : ADD ESP,0x10
006ce15f : PUSH 0x300
006ce164 : MOV EAX,dword ptr [EBP + 0x8]
006ce167 : PUSH EAX
006ce168 : CALL 0x006cee20
006ce16d : ADD ESP,0x8
006ce170 : MOV ECX,dword ptr [EBP + 0x8]
006ce173 : MOV dword ptr [ECX + 0x114],EAX
006ce179 : PUSH 0x300
006ce17e : PUSH 0x0
006ce180 : MOV EDX,dword ptr [EBP + 0x8]
006ce183 : MOV EAX,dword ptr [EDX + 0x114]
006ce189 : PUSH EAX
006ce18a : CALL 0x0063b700
006ce18f : ADD ESP,0xc
006ce192 : MOV ECX,dword ptr [EBP + 0x14]
006ce195 : IMUL ECX,ECX,0x3
006ce198 : PUSH ECX
006ce199 : MOV EDX,dword ptr [EBP + 0x10]
006ce19c : PUSH EDX
006ce19d : MOV EAX,dword ptr [EBP + 0x8]
006ce1a0 : MOV ECX,dword ptr [EAX + 0x114]
006ce1a6 : PUSH ECX
006ce1a7 : CALL 0x0063ae40
006ce1ac : ADD ESP,0xc
006ce1af : MOV EDX,dword ptr [EBP + 0xc]
006ce1b2 : MOV EAX,dword ptr [EBP + 0x8]
006ce1b5 : MOV ECX,dword ptr [EAX + 0x114]
006ce1bb : MOV dword ptr [EDX + 0x10],ECX
006ce1be : MOV EDX,dword ptr [EBP + 0x8]
006ce1c1 : MOV AX,word ptr [EBP + 0x14]
006ce1c5 : MOV word ptr [EDX + 0x118],AX
006ce1cc : MOV ECX,dword ptr [EBP + 0xc]
006ce1cf : MOV DX,word ptr [EBP + 0x14]
006ce1d3 : MOV word ptr [ECX + 0x14],DX
006ce1d7 : MOV EAX,dword ptr [EBP + 0xc]
006ce1da : MOV ECX,dword ptr [EAX + 0xb8]
006ce1e0 : OR ECX,0x1000
006ce1e6 : MOV EDX,dword ptr [EBP + 0xc]
006ce1e9 : MOV dword ptr [EDX + 0xb8],ECX
006ce1ef : MOV EAX,dword ptr [EBP + 0xc]
006ce1f2 : MOV ECX,dword ptr [EAX + 0x8]
006ce1f5 : OR ECX,0x8
006ce1f8 : MOV EDX,dword ptr [EBP + 0xc]
006ce1fb : MOV dword ptr [EDX + 0x8],ECX
006ce1fe : POP EBP
006ce1ff : RET
