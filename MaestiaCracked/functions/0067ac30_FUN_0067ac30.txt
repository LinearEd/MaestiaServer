PROGRAM  : Maestia.exe
FUNCTION : FUN_0067ac30
ENTRY    : 0067ac30
BODY     : [[0067ac30, 0067acf5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0067ac30(GRefCountImpl *param_1)

{
  int in_ECX;
  char *pcVar1;
  undefined4 local_10;
  uint local_c;
  char *local_8;
  
  FUN_005974e0(param_1);
  FUN_00598d70();
  *(undefined1 *)(in_ECX + 0x24) = 0;
  if (*(int *)(in_ECX + 0x1c) != 0) {
    if (param_1 != (GRefCountImpl *)0x0) {
      GRefCountImpl::AddRef(param_1);
    }
    (**(code **)(**(int **)(in_ECX + 0x1c) + 4))(param_1);
  }
  *(GRefCountImpl **)(in_ECX + 0x38) = param_1;
  local_10 = 0;
  local_c = 0;
  if (*(int *)(in_ECX + 0x4c) == 1) {
    local_c = 4;
    local_8 = "Vista";
  }
  else {
    if (*(int *)(in_ECX + 0x4c) == 0) {
      pcVar1 = "XP";
    }
    else {
      pcVar1 = "Undetermined";
    }
    FUN_0050b550(pcVar1);
  }
  if (param_1 != (GRefCountImpl *)0x0) {
    (**(code **)(**(int **)(in_ECX + 0x38) + 0x40))("_global.gfx_ime_os_version",&local_10,1);
  }
  if ((local_c >> 6 & 1) != 0) {
    FUN_00588b40(&local_10,local_8);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0067ac30 : SUB ESP,0x10
0067ac33 : PUSH EBP
0067ac34 : PUSH ESI
0067ac35 : PUSH EDI
0067ac36 : MOV EDI,dword ptr [ESP + 0x20]
0067ac3a : PUSH EDI
0067ac3b : MOV ESI,ECX
0067ac3d : CALL 0x005974e0
0067ac42 : MOV ECX,ESI
0067ac44 : CALL 0x00598d70
0067ac49 : CMP dword ptr [ESI + 0x1c],0x0
0067ac4d : MOV byte ptr [ESI + 0x24],0x0
0067ac51 : JZ 0x0067ac6e
0067ac53 : PUSH ECX
0067ac54 : MOV EBP,ESP
0067ac56 : TEST EDI,EDI
0067ac58 : JZ 0x0067ac61
0067ac5a : MOV ECX,EDI
0067ac5c : CALL 0x00523dd0
0067ac61 : MOV dword ptr [EBP],EDI
0067ac64 : MOV ECX,dword ptr [ESI + 0x1c]
0067ac67 : MOV EAX,dword ptr [ECX]
0067ac69 : MOV EDX,dword ptr [EAX + 0x4]
0067ac6c : CALL EDX
0067ac6e : MOV EAX,dword ptr [ESI + 0x4c]
0067ac71 : MOV dword ptr [ESI + 0x38],EDI
0067ac74 : MOV dword ptr [ESP + 0xc],0x0
0067ac7c : MOV dword ptr [ESP + 0x10],0x0
0067ac84 : CMP EAX,0x1
0067ac87 : JNZ 0x0067ac9b
0067ac89 : MOV dword ptr [ESP + 0x10],0x4
0067ac91 : MOV dword ptr [ESP + 0x14],0xbd658c
0067ac99 : JMP 0x0067acb4
0067ac9b : LEA ECX,[ESP + 0xc]
0067ac9f : TEST EAX,EAX
0067aca1 : JNZ 0x0067acaa
0067aca3 : PUSH 0xbd6588
0067aca8 : JMP 0x0067acaf
0067acaa : PUSH 0xbd6578
0067acaf : CALL 0x0050b550
0067acb4 : TEST EDI,EDI
0067acb6 : JZ 0x0067acce
0067acb8 : MOV ECX,dword ptr [ESI + 0x38]
0067acbb : MOV EAX,dword ptr [ECX]
0067acbd : MOV EAX,dword ptr [EAX + 0x40]
0067acc0 : PUSH 0x1
0067acc2 : LEA EDX,[ESP + 0x10]
0067acc6 : PUSH EDX
0067acc7 : PUSH 0xbd655c
0067accc : CALL EAX
0067acce : MOV ECX,dword ptr [ESP + 0x10]
0067acd2 : SHR ECX,0x6
0067acd5 : TEST CL,0x1
0067acd8 : JZ 0x0067aced
0067acda : MOV EDX,dword ptr [ESP + 0x14]
0067acde : MOV ECX,dword ptr [ESP + 0xc]
0067ace2 : PUSH EDX
0067ace3 : LEA EAX,[ESP + 0x10]
0067ace7 : PUSH EAX
0067ace8 : CALL 0x00588b40
0067aced : POP EDI
0067acee : POP ESI
0067acef : POP EBP
0067acf0 : ADD ESP,0x10
0067acf3 : RET 0x4
