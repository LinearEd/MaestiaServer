PROGRAM  : Maestia.exe
FUNCTION : FUN_00a7f7a0
ENTRY    : 00a7f7a0
BODY     : [[00a7f7a0, 00a7f7c2] [00a7f7c9, 00a7f839] [00a7f840, 00a7f898]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00a7f810) */
/* WARNING: Removing unreachable block (ram,0x00a7f887) */

void FUN_00a7f7a0(void)

{
  int *piVar1;
  int *piVar2;
  rsize_t rVar3;
  int iVar4;
  int unaff_ESI;
  
  piVar2 = *(int **)(unaff_ESI + 0x3c);
  piVar1 = *(int **)(unaff_ESI + 0x40);
  while (piVar2 != piVar1) {
    if (*piVar2 != 0) {
      FUN_0042cdb0(*piVar2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar4 = *(int *)(unaff_ESI + 0x40) - (int)(piVar2 + 1) >> 2;
    if (0 < iVar4) {
      rVar3 = iVar4 * 4;
      _memmove_s(piVar2,rVar3,piVar2 + 1,rVar3);
    }
    *(int *)(unaff_ESI + 0x40) = *(int *)(unaff_ESI + 0x40) + -4;
    piVar1 = *(int **)(unaff_ESI + 0x40);
  }
  if (*(int *)(unaff_ESI + 0x3c) != *(int *)(unaff_ESI + 0x40)) {
    *(int *)(unaff_ESI + 0x40) = *(int *)(unaff_ESI + 0x3c);
  }
  piVar2 = *(int **)(unaff_ESI + 0x4c);
  piVar1 = *(int **)(unaff_ESI + 0x50);
  while( true ) {
    if (piVar2 == piVar1) {
      if (*(int *)(unaff_ESI + 0x4c) != *(int *)(unaff_ESI + 0x50)) {
        *(int *)(unaff_ESI + 0x50) = *(int *)(unaff_ESI + 0x4c);
      }
      return;
    }
    if (*piVar2 != 0) break;
    iVar4 = *(int *)(unaff_ESI + 0x50) - (int)(piVar2 + 1) >> 2;
    if (0 < iVar4) {
      rVar3 = iVar4 * 4;
      _memmove_s(piVar2,rVar3,piVar2 + 1,rVar3);
    }
    *(int *)(unaff_ESI + 0x50) = *(int *)(unaff_ESI + 0x50) + -4;
    piVar1 = *(int **)(unaff_ESI + 0x50);
  }
  FUN_0042cdb0(*piVar2);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00a7f7a0 : PUSH EBX
00a7f7a1 : PUSH EDI
00a7f7a2 : MOV EDI,dword ptr [ESI + 0x3c]
00a7f7a5 : CMP EDI,dword ptr [ESI + 0x40]
00a7f7a8 : JZ 0x00a7f7f1
00a7f7aa : LEA EBX,[EBX]
00a7f7b0 : MOV EBX,dword ptr [EDI]
00a7f7b2 : TEST EBX,EBX
00a7f7b4 : JZ 0x00a7f7c9
00a7f7b6 : PUSH EBX
00a7f7b7 : CALL 0x0042cdb0
00a7f7bc : MOV ECX,EBX
00a7f7be : CALL 0x006f04e0
00a7f7c9 : MOV EAX,dword ptr [ESI + 0x40]
00a7f7cc : LEA ECX,[EDI + 0x4]
00a7f7cf : SUB EAX,ECX
00a7f7d1 : SAR EAX,0x2
00a7f7d4 : TEST EAX,EAX
00a7f7d6 : JLE 0x00a7f7e8
00a7f7d8 : ADD EAX,EAX
00a7f7da : ADD EAX,EAX
00a7f7dc : PUSH EAX
00a7f7dd : PUSH ECX
00a7f7de : PUSH EAX
00a7f7df : PUSH EDI
00a7f7e0 : CALL 0x00634101
00a7f7e5 : ADD ESP,0x10
00a7f7e8 : ADD dword ptr [ESI + 0x40],-0x4
00a7f7ec : CMP EDI,dword ptr [ESI + 0x40]
00a7f7ef : JNZ 0x00a7f7b0
00a7f7f1 : MOV ECX,dword ptr [ESI + 0x40]
00a7f7f4 : MOV EDI,dword ptr [ESI + 0x3c]
00a7f7f7 : CMP EDI,ECX
00a7f7f9 : JZ 0x00a7f81f
00a7f7fb : MOV EAX,ECX
00a7f7fd : SUB EAX,ECX
00a7f7ff : SAR EAX,0x2
00a7f802 : LEA EDX,[EAX*0x4 + 0x0]
00a7f809 : LEA EBX,[EDX + EDI*0x1]
00a7f80c : TEST EAX,EAX
00a7f80e : JLE 0x00a7f81c
00a7f810 : PUSH EDX
00a7f811 : PUSH ECX
00a7f812 : PUSH EDX
00a7f813 : PUSH EDI
00a7f814 : CALL 0x00634101
00a7f819 : ADD ESP,0x10
00a7f81c : MOV dword ptr [ESI + 0x40],EBX
00a7f81f : MOV EDI,dword ptr [ESI + 0x4c]
00a7f822 : CMP EDI,dword ptr [ESI + 0x50]
00a7f825 : JZ 0x00a7f868
00a7f827 : MOV EBX,dword ptr [EDI]
00a7f829 : TEST EBX,EBX
00a7f82b : JZ 0x00a7f840
00a7f82d : PUSH EBX
00a7f82e : CALL 0x0042cdb0
00a7f833 : MOV ECX,EBX
00a7f835 : CALL 0x006f04e0
00a7f840 : MOV EAX,dword ptr [ESI + 0x50]
00a7f843 : LEA ECX,[EDI + 0x4]
00a7f846 : SUB EAX,ECX
00a7f848 : SAR EAX,0x2
00a7f84b : TEST EAX,EAX
00a7f84d : JLE 0x00a7f85f
00a7f84f : ADD EAX,EAX
00a7f851 : ADD EAX,EAX
00a7f853 : PUSH EAX
00a7f854 : PUSH ECX
00a7f855 : PUSH EAX
00a7f856 : PUSH EDI
00a7f857 : CALL 0x00634101
00a7f85c : ADD ESP,0x10
00a7f85f : ADD dword ptr [ESI + 0x50],-0x4
00a7f863 : CMP EDI,dword ptr [ESI + 0x50]
00a7f866 : JNZ 0x00a7f827
00a7f868 : MOV ECX,dword ptr [ESI + 0x50]
00a7f86b : MOV EDI,dword ptr [ESI + 0x4c]
00a7f86e : CMP EDI,ECX
00a7f870 : JZ 0x00a7f896
00a7f872 : MOV EAX,ECX
00a7f874 : SUB EAX,ECX
00a7f876 : SAR EAX,0x2
00a7f879 : LEA EDX,[EAX*0x4 + 0x0]
00a7f880 : LEA EBX,[EDX + EDI*0x1]
00a7f883 : TEST EAX,EAX
00a7f885 : JLE 0x00a7f893
00a7f887 : PUSH EDX
00a7f888 : PUSH ECX
00a7f889 : PUSH EDX
00a7f88a : PUSH EDI
00a7f88b : CALL 0x00634101
00a7f890 : ADD ESP,0x10
00a7f893 : MOV dword ptr [ESI + 0x50],EBX
00a7f896 : POP EDI
00a7f897 : POP EBX
00a7f898 : RET
