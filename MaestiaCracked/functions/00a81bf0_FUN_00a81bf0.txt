PROGRAM  : Maestia.exe
FUNCTION : FUN_00a81bf0
ENTRY    : 00a81bf0
BODY     : [[00a81bf0, 00a81f2e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a81bf0(int param_1)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  uint local_f8;
  uint local_dc;
  uint local_c0;
  uint local_a4;
  uint local_88;
  undefined1 local_84 [4];
  undefined2 local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b451e6;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34 = 7;
  local_38 = 0;
  local_48 = 0;
  local_14 = uVar1;
  FUN_00406360(L"IDS_PREMIUM_BUY_CHECK_MSG",0x19);
  local_8 = 0;
  iVar2 = FUN_0081d120(local_4c);
  local_8._0_1_ = 1;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar2 = iVar2 + 4;
  }
  else {
    iVar2 = *(int *)(iVar2 + 4);
  }
  FUN_00404750(iVar2,*(undefined4 *)(param_1 + 0x68),uVar1);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < local_88) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8._0_1_ = 4;
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_48 = 0;
  local_34 = 7;
  local_38 = 0;
  if (*(int *)(*(int *)(param_1 + 0x6c) + 0x1bc) == 1) {
    FUN_00406460(L"IDS_PREMIUM_MILEAGEITEM_BUY_MSG");
    local_8._0_1_ = 5;
    iVar2 = FUN_0081d120(local_68);
    local_8._0_1_ = 6;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,*(undefined4 *)(param_1 + 0x68));
    local_8._0_1_ = 7;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,6);
    if (7 < local_dc) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,5);
    if (7 < local_a4) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 4;
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_50 = 7;
    local_54 = 0;
    local_64 = 0;
  }
  local_8._0_1_ = 4;
  if (*(int *)(*(int *)(param_1 + 0x6c) + 0x1bc) == 2) {
    FUN_00406460(L"IDS_PREMIUM_GOLDITEM_BUY_MSG");
    local_8._0_1_ = 8;
    iVar2 = FUN_0081d120(local_84);
    local_8._0_1_ = 9;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,*(undefined4 *)(param_1 + 0x68));
    local_8._0_1_ = 10;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,9);
    if (7 < local_c0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,8);
    if (7 < local_f8) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 4;
    if (7 < local_6c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_6c = 7;
    local_70 = 0;
    local_80 = 0;
  }
  local_8._0_1_ = 4;
  iVar2 = FUN_008ede80(local_30,2);
  if (iVar2 != 0) {
    if (*(code **)(iVar2 + 0x60) != (code *)0x0) {
      (**(code **)(iVar2 + 0x60))(1,iVar2);
    }
    *(code **)(iVar2 + 0x60) = FUN_00a81620;
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a81bf0 : PUSH EBP
00a81bf1 : MOV EBP,ESP
00a81bf3 : PUSH -0x1
00a81bf5 : PUSH 0xb451e6
00a81bfa : MOV EAX,FS:[0x0]
00a81c00 : PUSH EAX
00a81c01 : SUB ESP,0x100
00a81c07 : MOV EAX,[0x00d66fa0]
00a81c0c : XOR EAX,EBP
00a81c0e : MOV dword ptr [EBP + -0x10],EAX
00a81c11 : PUSH EBX
00a81c12 : PUSH ESI
00a81c13 : PUSH EDI
00a81c14 : PUSH EAX
00a81c15 : LEA EAX,[EBP + -0xc]
00a81c18 : MOV FS:[0x0],EAX
00a81c1e : MOV EBX,dword ptr [EBP + 0x8]
00a81c21 : PUSH 0x19
00a81c23 : XOR EAX,EAX
00a81c25 : XOR ESI,ESI
00a81c27 : PUSH 0xc55194
00a81c2c : LEA ECX,[EBP + -0x48]
00a81c2f : MOV dword ptr [EBP + -0x30],0x7
00a81c36 : MOV dword ptr [EBP + -0x34],ESI
00a81c39 : MOV word ptr [EBP + -0x44],AX
00a81c3d : CALL 0x00406360
00a81c42 : MOV dword ptr [EBP + -0x4],ESI
00a81c45 : LEA ECX,[EBP + -0x48]
00a81c48 : PUSH ECX
00a81c49 : MOV ECX,dword ptr [0x0172491c]
00a81c4f : LEA EDI,[EBP + 0xffffff64]
00a81c55 : CALL 0x0081d120
00a81c5a : MOV byte ptr [EBP + -0x4],0x1
00a81c5e : MOV ECX,dword ptr [EBX + 0x68]
00a81c61 : MOV EDI,0x8
00a81c66 : CMP dword ptr [EAX + 0x18],EDI
00a81c69 : JC 0x00a81c70
00a81c6b : MOV EAX,dword ptr [EAX + 0x4]
00a81c6e : JMP 0x00a81c73
00a81c70 : ADD EAX,0x4
00a81c73 : PUSH ECX
00a81c74 : PUSH EAX
00a81c75 : LEA ESI,[EBP + -0x2c]
00a81c78 : CALL 0x00404750
00a81c7d : ADD ESP,0x8
00a81c80 : MOV byte ptr [EBP + -0x4],0x3
00a81c84 : CMP dword ptr [EBP + 0xffffff7c],EDI
00a81c8a : JC 0x00a81c97
00a81c8c : MOV ECX,dword ptr [EBP + 0xffffff68]
00a81c92 : CALL 0x006f04e0
00a81c97 : MOV ESI,0x7
00a81c9c : XOR EDX,EDX
00a81c9e : MOV dword ptr [EBP + 0xffffff7c],ESI
00a81ca4 : MOV dword ptr [EBP + 0xffffff78],0x0
00a81cae : MOV word ptr [EBP + 0xffffff68],DX
00a81cb5 : MOV byte ptr [EBP + -0x4],0x4
00a81cb9 : CMP dword ptr [EBP + -0x30],EDI
00a81cbc : JC 0x00a81cc6
00a81cbe : MOV ECX,dword ptr [EBP + -0x44]
00a81cc1 : CALL 0x006f04e0
00a81cc6 : MOV ECX,dword ptr [EBX + 0x6c]
00a81cc9 : XOR EAX,EAX
00a81ccb : MOV word ptr [EBP + -0x44],AX
00a81ccf : MOV EAX,dword ptr [ECX + 0x1bc]
00a81cd5 : MOV dword ptr [EBP + -0x30],ESI
00a81cd8 : MOV dword ptr [EBP + -0x34],0x0
00a81cdf : CMP EAX,0x1
00a81ce2 : JNZ 0x00a81dcd
00a81ce8 : PUSH 0xc55330
00a81ced : LEA ECX,[EBP + -0x64]
00a81cf0 : CALL 0x00406460
00a81cf5 : MOV byte ptr [EBP + -0x4],0x5
00a81cf9 : MOV ECX,dword ptr [0x0172491c]
00a81cff : LEA EDX,[EBP + -0x64]
00a81d02 : PUSH EDX
00a81d03 : LEA EDI,[EBP + 0xffffff48]
00a81d09 : CALL 0x0081d120
00a81d0e : MOV byte ptr [EBP + -0x4],0x6
00a81d12 : MOV ECX,dword ptr [EBX + 0x68]
00a81d15 : MOV EDI,0x8
00a81d1a : CMP dword ptr [EAX + 0x18],EDI
00a81d1d : JC 0x00a81d24
00a81d1f : MOV EAX,dword ptr [EAX + 0x4]
00a81d22 : JMP 0x00a81d27
00a81d24 : ADD EAX,0x4
00a81d27 : PUSH ECX
00a81d28 : PUSH EAX
00a81d29 : LEA ESI,[EBP + 0xffffff10]
00a81d2f : CALL 0x00404750
00a81d34 : ADD ESP,0x8
00a81d37 : MOV byte ptr [EBP + -0x4],0x7
00a81d3b : PUSH -0x1
00a81d3d : XOR ESI,ESI
00a81d3f : PUSH ESI
00a81d40 : PUSH EAX
00a81d41 : LEA ECX,[EBP + -0x2c]
00a81d44 : CALL 0x00405eb0
00a81d49 : MOV byte ptr [EBP + -0x4],0x6
00a81d4d : CMP dword ptr [EBP + 0xffffff28],EDI
00a81d53 : JC 0x00a81d60
00a81d55 : MOV ECX,dword ptr [EBP + 0xffffff14]
00a81d5b : CALL 0x006f04e0
00a81d60 : XOR EAX,EAX
00a81d62 : MOV dword ptr [EBP + 0xffffff28],0x7
00a81d6c : MOV dword ptr [EBP + 0xffffff24],ESI
00a81d72 : MOV word ptr [EBP + 0xffffff14],AX
00a81d79 : MOV byte ptr [EBP + -0x4],0x5
00a81d7d : CMP dword ptr [EBP + 0xffffff60],EDI
00a81d83 : JC 0x00a81d90
00a81d85 : MOV ECX,dword ptr [EBP + 0xffffff4c]
00a81d8b : CALL 0x006f04e0
00a81d90 : XOR ECX,ECX
00a81d92 : MOV dword ptr [EBP + 0xffffff60],0x7
00a81d9c : MOV dword ptr [EBP + 0xffffff5c],ESI
00a81da2 : MOV word ptr [EBP + 0xffffff4c],CX
00a81da9 : MOV byte ptr [EBP + -0x4],0x4
00a81dad : CMP dword ptr [EBP + -0x4c],EDI
00a81db0 : JC 0x00a81dba
00a81db2 : MOV ECX,dword ptr [EBP + -0x60]
00a81db5 : CALL 0x006f04e0
00a81dba : XOR EDX,EDX
00a81dbc : MOV dword ptr [EBP + -0x4c],0x7
00a81dc3 : MOV dword ptr [EBP + -0x50],ESI
00a81dc6 : MOV word ptr [EBP + -0x60],DX
00a81dca : LEA EDI,[EDX + 0x8]
00a81dcd : MOV EAX,dword ptr [EBX + 0x6c]
00a81dd0 : MOV EAX,dword ptr [EAX + 0x1bc]
00a81dd6 : CMP EAX,0x2
00a81dd9 : JNZ 0x00a81ebd
00a81ddf : PUSH 0xc552f4
00a81de4 : LEA ECX,[EBP + -0x80]
00a81de7 : CALL 0x00406460
00a81dec : MOV byte ptr [EBP + -0x4],0x8
00a81df0 : LEA ECX,[EBP + -0x80]
00a81df3 : PUSH ECX
00a81df4 : MOV ECX,dword ptr [0x0172491c]
00a81dfa : LEA EDI,[EBP + 0xfffffef4]
00a81e00 : CALL 0x0081d120
00a81e05 : MOV byte ptr [EBP + -0x4],0x9
00a81e09 : MOV EBX,dword ptr [EBX + 0x68]
00a81e0c : MOV EDI,0x8
00a81e11 : CMP dword ptr [EAX + 0x18],EDI
00a81e14 : JC 0x00a81e1b
00a81e16 : MOV EAX,dword ptr [EAX + 0x4]
00a81e19 : JMP 0x00a81e1e
00a81e1b : ADD EAX,0x4
00a81e1e : PUSH EBX
00a81e1f : PUSH EAX
00a81e20 : LEA ESI,[EBP + 0xffffff2c]
00a81e26 : CALL 0x00404750
00a81e2b : ADD ESP,0x8
00a81e2e : MOV byte ptr [EBP + -0x4],0xa
00a81e32 : PUSH -0x1
00a81e34 : XOR ESI,ESI
00a81e36 : PUSH ESI
00a81e37 : PUSH EAX
00a81e38 : LEA ECX,[EBP + -0x2c]
00a81e3b : CALL 0x00405eb0
00a81e40 : MOV byte ptr [EBP + -0x4],0x9
00a81e44 : CMP dword ptr [EBP + 0xffffff44],EDI
00a81e4a : JC 0x00a81e57
00a81e4c : MOV ECX,dword ptr [EBP + 0xffffff30]
00a81e52 : CALL 0x006f04e0
00a81e57 : MOV EBX,0x7
00a81e5c : XOR EDX,EDX
00a81e5e : MOV dword ptr [EBP + 0xffffff44],EBX
00a81e64 : MOV dword ptr [EBP + 0xffffff40],ESI
00a81e6a : MOV word ptr [EBP + 0xffffff30],DX
00a81e71 : MOV byte ptr [EBP + -0x4],0x8
00a81e75 : CMP dword ptr [EBP + 0xffffff0c],EDI
00a81e7b : JC 0x00a81e88
00a81e7d : MOV ECX,dword ptr [EBP + 0xfffffef8]
00a81e83 : CALL 0x006f04e0
00a81e88 : XOR EAX,EAX
00a81e8a : MOV dword ptr [EBP + 0xffffff0c],EBX
00a81e90 : MOV dword ptr [EBP + 0xffffff08],ESI
00a81e96 : MOV word ptr [EBP + 0xfffffef8],AX
00a81e9d : MOV byte ptr [EBP + -0x4],0x4
00a81ea1 : CMP dword ptr [EBP + -0x68],EDI
00a81ea4 : JC 0x00a81eae
00a81ea6 : MOV ECX,dword ptr [EBP + -0x7c]
00a81ea9 : CALL 0x006f04e0
00a81eae : XOR ECX,ECX
00a81eb0 : MOV dword ptr [EBP + -0x68],EBX
00a81eb3 : MOV dword ptr [EBP + -0x6c],ESI
00a81eb6 : MOV word ptr [EBP + -0x7c],CX
00a81eba : LEA EDI,[ECX + 0x8]
00a81ebd : MOV EDX,dword ptr [0x00da9894]
00a81ec3 : MOV ECX,dword ptr [EDX]
00a81ec5 : PUSH 0x2
00a81ec7 : LEA EAX,[EBP + -0x2c]
00a81eca : PUSH EAX
00a81ecb : CALL 0x008ede80
00a81ed0 : MOV ESI,EAX
00a81ed2 : TEST ESI,ESI
00a81ed4 : JZ 0x00a81ee9
00a81ed6 : MOV EAX,dword ptr [ESI + 0x60]
00a81ed9 : TEST EAX,EAX
00a81edb : JZ 0x00a81ee2
00a81edd : PUSH ESI
00a81ede : PUSH 0x1
00a81ee0 : CALL EAX
00a81ee2 : MOV dword ptr [ESI + 0x60],0xa81620
00a81ee9 : MOV dword ptr [EBP + -0x4],0xffffffff
00a81ef0 : CMP dword ptr [EBP + -0x14],EDI
00a81ef3 : JC 0x00a81efd
00a81ef5 : MOV ECX,dword ptr [EBP + -0x28]
00a81ef8 : CALL 0x006f04e0
00a81efd : XOR ECX,ECX
00a81eff : MOV dword ptr [EBP + -0x14],0x7
00a81f06 : MOV dword ptr [EBP + -0x18],0x0
00a81f0d : MOV word ptr [EBP + -0x28],CX
00a81f11 : MOV ECX,dword ptr [EBP + -0xc]
00a81f14 : MOV dword ptr FS:[0x0],ECX
00a81f1b : POP ECX
00a81f1c : POP EDI
00a81f1d : POP ESI
00a81f1e : POP EBX
00a81f1f : MOV ECX,dword ptr [EBP + -0x10]
00a81f22 : XOR ECX,EBP
00a81f24 : CALL 0x00633e6b
00a81f29 : MOV ESP,EBP
00a81f2b : POP EBP
00a81f2c : RET 0x4
