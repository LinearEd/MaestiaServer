PROGRAM  : Maestia.exe
FUNCTION : FUN_0089c460
ENTRY    : 0089c460
BODY     : [[0089c460, 0089c602]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0089c460(int param_1)

{
  code *pcVar1;
  int iVar2;
  char cVar3;
  short sVar4;
  int *piVar5;
  int *in_ECX;
  bool bVar6;
  
  pcVar1 = *(code **)(*in_ECX + 0x1ac);
  *(bool *)((int)in_ECX + 0x427) = param_1 != 0;
  *(undefined1 *)((int)in_ECX + 0x425) = 1;
  (*pcVar1)(in_ECX[0x29]);
  iVar2 = *(int *)(in_ECX[0x4e] + 4);
  piVar5 = in_ECX + 0x48e;
  sVar4 = FUN_0043d970();
  if (sVar4 == 1000) {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x13c) == piVar5;
  }
  else if (sVar4 == 2000) {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x140) == piVar5;
  }
  else {
    bVar6 = *(int **)((int)in_ECX + iVar2 + 0x144) == piVar5;
  }
  if (!bVar6) {
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x456,1,1,0);
    cVar3 = (**(code **)(*in_ECX + 0x1d0))();
    if (((cVar3 != '\0') && (*DAT_00da9894 != 0)) &&
       (piVar5 = *(int **)(*DAT_00da9894 + 0x114), piVar5 != (int *)0x0)) {
      (**(code **)(*piVar5 + 4))(piVar5,"mc_party.SetPetDeadState","%d,%d",in_ECX[1],1);
    }
    piVar5 = (int *)FUN_00a1a840(in_ECX[0x155]);
    sVar4 = (**(code **)(*in_ECX + 0x1e4))();
    if (sVar4 == 0) {
      if (piVar5 != (int *)0x0) {
        sVar4 = (**(code **)(*piVar5 + 0x1e4))();
        if (sVar4 == 0) {
          FUN_00a379a0(in_ECX[0x155],0x101,0xffffffff);
          FUN_00a379a0(in_ECX[1],0xfa,0xffffffff);
          return;
        }
      }
      FUN_00a379a0(in_ECX[1],0xfc,0xffffffff);
      return;
    }
    if (piVar5 != (int *)0x0) {
      sVar4 = (**(code **)(*piVar5 + 0x1e4))();
      if (sVar4 == 0) {
        FUN_00a379a0(in_ECX[0x155],0x102,0xffffffff);
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0089c460 : PUSH EBP
0089c461 : MOV EBP,ESP
0089c463 : CMP dword ptr [EBP + 0x8],0x0
0089c467 : PUSH EBX
0089c468 : PUSH ESI
0089c469 : MOV ESI,ECX
0089c46b : MOV EDX,dword ptr [ESI]
0089c46d : MOV EDX,dword ptr [EDX + 0x1ac]
0089c473 : SETNZ AL
0089c476 : MOV byte ptr [ESI + 0x427],AL
0089c47c : MOV EAX,dword ptr [ESI + 0xa4]
0089c482 : PUSH EDI
0089c483 : PUSH EAX
0089c484 : MOV byte ptr [ESI + 0x425],0x1
0089c48b : CALL EDX
0089c48d : MOV EAX,dword ptr [ESI + 0x138]
0089c493 : MOV EAX,dword ptr [EAX + 0x4]
0089c496 : LEA EDI,[ESI + 0x1238]
0089c49c : LEA EBX,[EAX + ESI*0x1 + 0x138]
0089c4a3 : MOV AX,word ptr [EDI + 0x2a]
0089c4a7 : CALL 0x0043d970
0089c4ac : MOV ECX,0x3e8
0089c4b1 : CMP AX,CX
0089c4b4 : JNZ 0x0089c4bb
0089c4b6 : CMP dword ptr [EBX + 0x4],EDI
0089c4b9 : JMP 0x0089c4cd
0089c4bb : MOV EDX,0x7d0
0089c4c0 : CMP AX,DX
0089c4c3 : JNZ 0x0089c4ca
0089c4c5 : CMP dword ptr [EBX + 0x8],EDI
0089c4c8 : JMP 0x0089c4cd
0089c4ca : CMP dword ptr [EBX + 0xc],EDI
0089c4cd : SETZ AL
0089c4d0 : TEST AL,AL
0089c4d2 : JNZ 0x0089c5fc
0089c4d8 : MOV EAX,dword ptr [ESI + 0x138]
0089c4de : MOV EAX,dword ptr [EAX + 0x4]
0089c4e1 : MOV EDX,dword ptr [EAX + ESI*0x1 + 0x138]
0089c4e8 : MOV EDX,dword ptr [EDX + 0x10]
0089c4eb : PUSH 0x0
0089c4ed : LEA ECX,[EAX + ESI*0x1 + 0x138]
0089c4f4 : PUSH 0x1
0089c4f6 : PUSH 0x1
0089c4f8 : LEA EAX,[ESI + 0x1158]
0089c4fe : PUSH EAX
0089c4ff : CALL EDX
0089c501 : MOV EAX,dword ptr [ESI]
0089c503 : MOV EDX,dword ptr [EAX + 0x1d0]
0089c509 : MOV ECX,ESI
0089c50b : CALL EDX
0089c50d : TEST AL,AL
0089c50f : JZ 0x0089c541
0089c511 : MOV EAX,[0x00da9894]
0089c516 : MOV EAX,dword ptr [EAX]
0089c518 : TEST EAX,EAX
0089c51a : JZ 0x0089c541
0089c51c : MOV EAX,dword ptr [EAX + 0x114]
0089c522 : TEST EAX,EAX
0089c524 : JZ 0x0089c541
0089c526 : MOV EDX,dword ptr [ESI + 0x4]
0089c529 : MOV ECX,dword ptr [EAX]
0089c52b : PUSH 0x1
0089c52d : PUSH EDX
0089c52e : PUSH 0xc46dbc
0089c533 : PUSH 0xc46dc4
0089c538 : PUSH EAX
0089c539 : MOV EAX,dword ptr [ECX + 0x4]
0089c53c : CALL EAX
0089c53e : ADD ESP,0x14
0089c541 : MOV EAX,dword ptr [ESI + 0x554]
0089c547 : MOV ECX,dword ptr [0x00da93ec]
0089c54d : PUSH EAX
0089c54e : CALL 0x00a1a840
0089c553 : MOV EDX,dword ptr [ESI]
0089c555 : MOV EDI,EAX
0089c557 : MOV EAX,dword ptr [EDX + 0x1e4]
0089c55d : MOV ECX,ESI
0089c55f : CALL EAX
0089c561 : TEST AX,AX
0089c564 : JNZ 0x0089c5ce
0089c566 : TEST EDI,EDI
0089c568 : JZ 0x0089c5b1
0089c56a : MOV EDX,dword ptr [EDI]
0089c56c : MOV EAX,dword ptr [EDX + 0x1e4]
0089c572 : MOV ECX,EDI
0089c574 : CALL EAX
0089c576 : TEST AX,AX
0089c579 : JNZ 0x0089c5b1
0089c57b : MOV ECX,dword ptr [ESI + 0x554]
0089c581 : PUSH -0x1
0089c583 : PUSH 0x101
0089c588 : PUSH ECX
0089c589 : MOV ECX,dword ptr [0x00da93ec]
0089c58f : CALL 0x00a379a0
0089c594 : MOV EDX,dword ptr [ESI + 0x4]
0089c597 : MOV ECX,dword ptr [0x00da93ec]
0089c59d : PUSH -0x1
0089c59f : PUSH 0xfa
0089c5a4 : PUSH EDX
0089c5a5 : CALL 0x00a379a0
0089c5aa : POP EDI
0089c5ab : POP ESI
0089c5ac : POP EBX
0089c5ad : POP EBP
0089c5ae : RET 0x4
0089c5b1 : MOV EAX,dword ptr [ESI + 0x4]
0089c5b4 : MOV ECX,dword ptr [0x00da93ec]
0089c5ba : PUSH -0x1
0089c5bc : PUSH 0xfc
0089c5c1 : PUSH EAX
0089c5c2 : CALL 0x00a379a0
0089c5c7 : POP EDI
0089c5c8 : POP ESI
0089c5c9 : POP EBX
0089c5ca : POP EBP
0089c5cb : RET 0x4
0089c5ce : TEST EDI,EDI
0089c5d0 : JZ 0x0089c5fc
0089c5d2 : MOV EDX,dword ptr [EDI]
0089c5d4 : MOV EAX,dword ptr [EDX + 0x1e4]
0089c5da : MOV ECX,EDI
0089c5dc : CALL EAX
0089c5de : TEST AX,AX
0089c5e1 : JNZ 0x0089c5fc
0089c5e3 : MOV ECX,dword ptr [ESI + 0x554]
0089c5e9 : PUSH -0x1
0089c5eb : PUSH 0x102
0089c5f0 : PUSH ECX
0089c5f1 : MOV ECX,dword ptr [0x00da93ec]
0089c5f7 : CALL 0x00a379a0
0089c5fc : POP EDI
0089c5fd : POP ESI
0089c5fe : POP EBX
0089c5ff : POP EBP
0089c600 : RET 0x4
