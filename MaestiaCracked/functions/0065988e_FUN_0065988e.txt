PROGRAM  : Maestia.exe
FUNCTION : FUN_0065988e
ENTRY    : 0065988e
BODY     : [[0065988e, 00659def]]

============================================================
DECOMPILED C CODE
============================================================

float10 FUN_0065988e(double param_1)

{
  double dVar1;
  double dVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [12];
  uint uVar5;
  int iVar6;
  int iVar7;
  undefined4 uVar8;
  double dVar9;
  undefined1 in_XMM0 [16];
  uint uVar12;
  ulonglong in_XMM2_Qb;
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  double dVar13;
  double dVar14;
  double dVar15;
  double dVar16;
  double dVar17;
  undefined1 auVar18 [16];
  undefined4 in_XMM7_Dc;
  undefined4 in_XMM7_Dd;
  double local_c;
  
  dVar9 = in_XMM0._0_8_;
  uVar12 = in_XMM0._4_4_;
  uVar5 = uVar12 >> 0xc & 0x7ffff;
  if (uVar5 - 0x3fb00 < 0x3bb) {
    auVar10._0_8_ = ((ulonglong)uVar12 & 0xffffc000) << 0x20;
    auVar10._8_8_ = in_XMM2_Qb & CONCAT44(in_XMM7_Dd,in_XMM7_Dc);
    iVar6 = (uVar12 >> 0xc & 0xfffc) - 0xfb00;
    iVar7 = iVar6 * 4;
    dVar14 = SUB168(auVar10 | ZEXT816(0x200000000000),0);
    dVar13 = SQRT(1.0 - dVar9 * dVar9) * dVar14;
    dVar1 = dVar9 * *(double *)(&DAT_00ba2320 + iVar6 * 2) - dVar13;
    uVar12 = SUB164(auVar10 | ZEXT816(0x200000000000),4) & 0x80000000;
    dVar2 = dVar1 * dVar1;
    auVar4._4_8_ = 0;
    auVar4._0_4_ = uVar12;
    auVar11._0_12_ = auVar4 << 0x20;
    auVar11._12_4_ = uVar12;
    return (float10)(((dVar9 - dVar14) * (dVar9 + dVar14)) /
                     (dVar9 * *(double *)(&DAT_00ba2320 + iVar6 * 2) + dVar13) +
                     (dVar2 * 0.044642857142857144 + 0.075) * dVar1 * dVar2 * dVar2 +
                     dVar1 * dVar2 * 0.16666666666666666 +
                     (double)(*(ulonglong *)(&DAT_00ba1420 + iVar7) ^ (ulonglong)uVar12 << 0x20) +
                    (double)(*(ulonglong *)(&UNK_00ba1428 + iVar7) ^ auVar11._8_8_));
  }
  if (uVar5 - 0x3febb < 0x43) {
    dVar14 = SQRT(1.0 - dVar9 * dVar9);
    auVar3._8_4_ = in_XMM7_Dc;
    auVar3._0_8_ = dVar9;
    auVar3._12_4_ = in_XMM7_Dd;
    dVar2 = (double)((ulonglong)dVar9 & 0x7fffffc000000000);
    dVar1 = ABS(dVar9) - dVar2;
    dVar13 = (double)((ulonglong)dVar14 & 0xffffc00000000000 | 0x200000000000);
    iVar7 = (ushort)((ulonglong)((longlong)dVar14 << 2) >> 0x30) - 0xfec0;
    dVar14 = dVar14 * *(double *)(&DAT_00ba2320 + iVar7 * 8);
    dVar15 = (dVar2 * dVar13 - dVar14) + dVar1 * dVar13;
    iVar7 = iVar7 * 0x10;
    dVar16 = dVar15 * dVar15;
    return (float10)(double)((ulonglong)
                             ((((dVar16 * 0.044642857142857144 + 0.075) * dVar15 * dVar16 * dVar16 +
                               dVar15 * dVar16 * 0.16666666666666666 +
                               (6.123233995736766e-17 - *(double *)(&DAT_00ba1420 + iVar7))) -
                              (((1.0 - dVar2 * dVar2) - dVar13 * dVar13) -
                              (ABS(dVar9) + dVar2) * dVar1) / (dVar14 + dVar14 + dVar15)) +
                             (1.5707963267948966 - *(double *)(&UNK_00ba1428 + iVar7))) |
                            (ulonglong)(ushort)((ushort)(SUB161(auVar3 >> 0x3f,0) & 1) << 0xf) <<
                            0x30);
  }
  if (uVar5 - 0x3c300 < 0x3800) {
    dVar2 = dVar9 * dVar9;
    dVar14 = dVar9 * dVar9;
    dVar1 = dVar9 * dVar2;
    return (float10)(dVar9 + dVar1 * dVar1 * dVar1 *
                             (dVar2 * 0.022372159090909092 + 0.030381944444444444 +
                             dVar2 * dVar2 * 0.017352764423076924) +
                             dVar9 * dVar14 *
                             (dVar14 * 0.075 + 0.16666666666666666 +
                             dVar14 * dVar14 * 0.044642857142857144));
  }
  if (uVar5 - 0x3fefe < 2) {
    dVar15 = SQRT(1.0 - dVar9 * dVar9);
    dVar1 = (double)((ulonglong)dVar9 & 0xfffffffff8000000);
    dVar16 = (double)((ulonglong)dVar15 & 0xfffffffff8000000);
    dVar9 = dVar9 - dVar1;
    auVar18._8_4_ = SUB84(dVar15,0);
    auVar18._0_8_ = dVar15;
    auVar18._12_4_ = (int)((ulonglong)dVar15 >> 0x20);
    dVar2 = dVar15 * dVar15;
    dVar14 = dVar15 * dVar15;
    dVar17 = dVar15 * dVar2;
    dVar13 = dVar17 * dVar17 * dVar17;
    return (float10)(double)((ulonglong)
                             (((((dVar2 * 0.011551800896136895 + 0.01396484375) *
                                 dVar17 * dVar17 * dVar13 + 6.123233995736766e-17) -
                               ((dVar2 * dVar2 * 0.017352764423076924 +
                                dVar2 * 0.022372159090909092 + 0.030381944444444444) * dVar13 +
                                (dVar14 * dVar14 * 0.044642857142857144 +
                                dVar14 * 0.075 + 0.16666666666666666) * auVar18._8_8_ * dVar14 +
                               (((((1.0 - dVar1 * dVar1) - (dVar1 + dVar1) * dVar9) -
                                 dVar16 * dVar16) - dVar9 * dVar9) +
                               (dVar15 + dVar15 + (dVar16 - dVar15)) * (dVar16 - dVar15)) /
                               (dVar15 + dVar15))) -
                              (dVar15 - ((dVar15 - 1.5707963267948966) + 1.5707963267948966))) -
                             (dVar15 - 1.5707963267948966)) |
                            (ulonglong)(in_XMM0._6_2_ & 0x8000) << 0x30);
  }
  if (uVar5 < 0x3ff00) {
    if (0x7fdf < ((ushort)((ulonglong)param_1 >> 0x30) & 0x7ff0) - 0x10) {
      param_1 = (double)((ulonglong)param_1 | (ulonglong)(param_1 + 0.0));
    }
    return (float10)param_1;
  }
  if ((uVar12 & 0x7fffffff) != 0x3ff00000 || in_XMM0._0_4_ != 0) {
    if ((int)((((uint)((ulonglong)param_1 >> 0x20) & 0x7fffffff) + 0x80100000) -
             (uint)(SUB84(param_1,0) == 0)) < 0) {
      local_c = -NAN;
      uVar8 = 0x3d;
    }
    else {
      local_c = param_1 + 0.0;
      uVar8 = 0x3f1;
    }
    ___libm_error_support(&param_1,&param_1,&local_c,uVar8);
    return (float10)local_c;
  }
  return (float10)(double)((ulonglong)dVar9 & 0x8000000000000000 | 0x3ff921fb54442d18);
}



============================================================
DISASSEMBLY
============================================================
0065988e : MOVLPD XMM4,qword ptr [0x00ba2bb0]
00659896 : MOVLPD XMM3,qword ptr [0x00ba2bc0]
0065989e : XORPD XMM5,XMM5
006598a2 : MOVLPD XMM2,qword ptr [0x00ba2bb8]
006598aa : MOVSD XMM1,XMM0
006598ae : PSRLQ XMM0,0x2c
006598b3 : MOVD EDX,XMM0
006598b7 : MOVSD XMM7,XMM1
006598bb : MOV ECX,0x2000
006598c0 : PINSRW XMM5,ECX,0x2
006598c5 : MOVSD XMM0,XMM1
006598c9 : MOV EAX,0x7ffff
006598ce : AND EAX,EDX
006598d0 : SUB EAX,0x3fb00
006598d5 : CMP EAX,0x3bb
006598da : JNC 0x006599ae
006598e0 : MULSD XMM1,XMM1
006598e4 : AND EDX,0xffff
006598ea : SUBSD XMM3,XMM1
006598ee : SQRTSD XMM3,XMM3
006598f2 : ANDPD XMM2,XMM7
006598f6 : AND EDX,0xfffffffc
006598f9 : SUB EDX,0xfb00
006598ff : MOVLPD XMM1,qword ptr [EDX*0x2 + 0xba2320]
00659908 : ORPD XMM2,XMM5
0065990c : MOVAPD XMM4,xmmword ptr [EDX*0x4 + 0xba1420]
00659915 : MOVSD XMM6,XMM7
00659919 : ADDSD XMM7,XMM2
0065991d : SUBSD XMM0,XMM2
00659921 : MULSD XMM0,XMM7
00659925 : MULSD XMM6,XMM1
00659929 : MULSD XMM3,XMM2
0065992d : MOVSD XMM1,XMM6
00659931 : ADDSD XMM6,XMM3
00659935 : DIVSD XMM0,XMM6
00659939 : MOVLPD XMM7,qword ptr [0x00ba2b68]
00659941 : MOVLPD XMM5,qword ptr [0x00ba2b58]
00659949 : SUBSD XMM1,XMM3
0065994d : PSRLQ XMM2,0x3f
00659952 : MOVSD XMM3,XMM1
00659956 : PSLLQ XMM2,0x3f
0065995b : MULSD XMM1,XMM1
0065995f : PSHUFD XMM2,XMM2,0x44
00659964 : MOVLPD XMM6,qword ptr [0x00ba2b60]
0065996c : MULSD XMM3,XMM1
00659970 : MULSD XMM7,XMM1
00659974 : SUB ESP,0x10
00659977 : XORPD XMM4,XMM2
0065997b : MULSD XMM5,XMM3
0065997f : MULSD XMM3,XMM1
00659983 : ADDSD XMM6,XMM7
00659987 : MULSD XMM6,XMM3
0065998b : ADDSD XMM5,XMM4
0065998f : PSHUFD XMM4,XMM4,0xee
00659994 : ADDSD XMM6,XMM5
00659998 : ADDSD XMM0,XMM6
0065999c : ADDSD XMM0,XMM4
006599a0 : MOVLPD qword ptr [ESP + 0x4],XMM0
006599a6 : FLD double ptr [ESP + 0x4]
006599aa : ADD ESP,0x10
006599ad : RET
006599ae : SUB EAX,0x3bb
006599b3 : CMP EAX,0x43
006599b6 : JNC 0x00659ad5
006599bc : MULSD XMM1,XMM1
006599c0 : SUBSD XMM3,XMM1
006599c4 : SQRTSD XMM3,XMM3
006599c8 : PMOVMSKB EAX,XMM7
006599cc : PSLLQ XMM0,0x1
006599d1 : ANDPD XMM7,xmmword ptr [0x00ba2b50]
006599d9 : PSRLQ XMM0,0x1
006599de : MOVSD XMM1,XMM0
006599e2 : MOVLPD XMM4,qword ptr [0x00ba2bc0]
006599ea : MOVSD XMM6,XMM7
006599ee : SUBSD XMM1,XMM7
006599f2 : MULSD XMM7,XMM7
006599f6 : ADDSD XMM0,XMM6
006599fa : SUBSD XMM4,XMM7
006599fe : MULSD XMM0,XMM1
00659a02 : MOVSD XMM7,XMM3
00659a06 : ANDPD XMM2,XMM3
00659a0a : PSLLQ XMM3,0x2
00659a0f : PEXTRW EDX,XMM3,0x3
00659a14 : ORPD XMM2,XMM5
00659a18 : SUB EDX,0xfec0
00659a1e : ADD EDX,EDX
00659a20 : MULSD XMM7,qword ptr [EDX*0x4 + 0xba2320]
00659a29 : MULSD XMM6,XMM2
00659a2d : MOVAPD XMM3,xmmword ptr [0x00ba2b20]
00659a35 : MULSD XMM1,XMM2
00659a39 : MULSD XMM2,XMM2
00659a3d : SUBSD XMM6,XMM7
00659a41 : ADDSD XMM6,XMM1
00659a45 : SUBSD XMM4,XMM2
00659a49 : ADDSD XMM7,XMM7
00659a4d : MOVLPD XMM5,qword ptr [0x00ba2b58]
00659a55 : SUBSD XMM4,XMM0
00659a59 : ADDSD XMM7,XMM6
00659a5d : MOVLPD XMM0,qword ptr [0x00ba2b68]
00659a65 : DIVSD XMM4,XMM7
00659a69 : MOVLPD XMM2,qword ptr [0x00ba2b60]
00659a71 : SUBPD XMM3,xmmword ptr [EDX*0x8 + 0xba1420]
00659a7a : MOVSD XMM1,XMM6
00659a7e : MULSD XMM6,XMM6
00659a82 : AND EAX,0x80
00659a87 : SHL EAX,0x8
00659a8a : MULSD XMM0,XMM6
00659a8e : MULSD XMM1,XMM6
00659a92 : SUB ESP,0x10
00659a95 : MULSD XMM5,XMM1
00659a99 : MULSD XMM1,XMM6
00659a9d : ADDSD XMM0,XMM2
00659aa1 : PXOR XMM6,XMM6
00659aa5 : MULSD XMM0,XMM1
00659aa9 : ADDSD XMM5,XMM3
00659aad : PINSRW XMM6,EAX,0x3
00659ab2 : ADDSD XMM0,XMM5
00659ab6 : PSHUFD XMM3,XMM3,0xee
00659abb : SUBSD XMM0,XMM4
00659abf : ADDSD XMM0,XMM3
00659ac3 : ORPD XMM0,XMM6
00659ac7 : MOVLPD qword ptr [ESP + 0x4],XMM0
00659acd : FLD double ptr [ESP + 0x4]
00659ad1 : ADD ESP,0x10
00659ad4 : RET
00659ad5 : ADD EAX,0x3bbb
00659ada : CMP EAX,0x3800
00659adf : JNC 0x00659b4b
00659ae1 : UNPCKLPD XMM7,XMM7
00659ae5 : MOVAPD XMM6,xmmword ptr [0x00ba2b70]
00659aed : UNPCKLPD XMM1,XMM7
00659af1 : MOVAPD XMM2,xmmword ptr [0x00ba2b80]
00659af9 : MOVAPD XMM4,xmmword ptr [0x00ba2b90]
00659b01 : MULPD XMM7,XMM7
00659b05 : SUB ESP,0x10
00659b08 : MULPD XMM1,XMM7
00659b0c : MULPD XMM6,XMM7
00659b10 : MULPD XMM7,XMM7
00659b14 : MOVSD XMM3,XMM1
00659b18 : MULSD XMM1,XMM1
00659b1c : ADDPD XMM6,XMM2
00659b20 : MULPD XMM4,XMM7
00659b24 : MULSD XMM1,XMM3
00659b28 : ADDPD XMM6,XMM4
00659b2c : MULPD XMM1,XMM6
00659b30 : PSHUFD XMM2,XMM1,0xee
00659b35 : ADDSD XMM1,XMM2
00659b39 : ADDSD XMM0,XMM1
00659b3d : MOVLPD qword ptr [ESP + 0x4],XMM0
00659b43 : FLD double ptr [ESP + 0x4]
00659b47 : ADD ESP,0x10
00659b4a : RET
00659b4b : SUB EAX,0x3bfe
00659b50 : CMP EAX,0x2
00659b53 : JNC 0x00659ca8
00659b59 : MULSD XMM1,XMM1
00659b5d : SUBSD XMM3,XMM1
00659b61 : SQRTSD XMM3,XMM3
00659b65 : PEXTRW EAX,XMM7,0x3
00659b6a : ANDPD XMM7,xmmword ptr [0x00ba2b40]
00659b72 : PSHUFD XMM5,XMM3,0x44
00659b77 : ANDPD XMM3,xmmword ptr [0x00ba2b40]
00659b7f : MOVSD XMM1,XMM7
00659b83 : MOVLPD XMM4,qword ptr [0x00ba2bc0]
00659b8b : MOVSD XMM6,XMM7
00659b8f : SUBSD XMM0,XMM7
00659b93 : MULSD XMM7,XMM7
00659b97 : ADDSD XMM1,XMM1
00659b9b : MULSD XMM1,XMM0
00659b9f : SUBSD XMM4,XMM7
00659ba3 : MOVSD XMM6,XMM3
00659ba7 : MULSD XMM3,XMM3
00659bab : MULSD XMM0,XMM0
00659baf : SUBSD XMM4,XMM1
00659bb3 : SUBSD XMM6,XMM5
00659bb7 : ADDSD XMM5,XMM5
00659bbb : SUBSD XMM4,XMM3
00659bbf : MOVAPD XMM2,xmmword ptr [0x00ba2b70]
00659bc7 : PSHUFD XMM3,XMM5,0xee
00659bcc : SUBSD XMM4,XMM0
00659bd0 : ADDSD XMM5,XMM6
00659bd4 : PSHUFD XMM7,XMM3,0xee
00659bd9 : ADDSD XMM3,XMM3
00659bdd : MULSD XMM5,XMM6
00659be1 : ADDSD XMM4,XMM5
00659be5 : PSHUFD XMM6,XMM7,0xee
00659bea : DIVSD XMM4,XMM3
00659bee : MOVAPD XMM1,xmmword ptr [0x00ba2ba0]
00659bf6 : MOVAPD XMM5,xmmword ptr [0x00ba2b80]
00659bfe : MOVAPD XMM0,xmmword ptr [0x00ba2b90]
00659c06 : MULPD XMM7,XMM7
00659c0a : MOVSD XMM3,XMM6
00659c0e : MULPD XMM2,XMM7
00659c12 : MULPD XMM6,XMM7
00659c16 : AND EAX,0x8000
00659c1b : MULSD XMM1,XMM7
00659c1f : MULPD XMM7,XMM7
00659c23 : ADDPD XMM5,XMM2
00659c27 : MOVAPD XMM2,XMM6
00659c2b : MULSD XMM6,XMM6
00659c2f : MULPD XMM7,XMM0
00659c33 : MOVAPD XMM0,xmmword ptr [0x00ba2b20]
00659c3b : MULSD XMM2,XMM6
00659c3f : ADDPD XMM7,XMM5
00659c43 : PSHUFD XMM5,XMM1,0xee
00659c48 : MULSD XMM6,XMM2
00659c4c : SUB ESP,0x10
00659c4f : MULPD XMM7,XMM2
00659c53 : ADDSD XMM1,XMM5
00659c57 : XORPD XMM5,XMM5
00659c5b : PSHUFD XMM2,XMM7,0xee
00659c60 : MULSD XMM1,XMM6
00659c64 : PSHUFD XMM6,XMM0,0xee
00659c69 : ADDSD XMM7,XMM2
00659c6d : MOVSD XMM2,XMM3
00659c71 : PINSRW XMM5,EAX,0x3
00659c76 : SUBSD XMM3,XMM6
00659c7a : ADDSD XMM0,XMM1
00659c7e : ADDSD XMM6,XMM3
00659c82 : ADDSD XMM7,XMM4
00659c86 : SUBSD XMM2,XMM6
00659c8a : SUBSD XMM0,XMM7
00659c8e : SUBSD XMM0,XMM2
00659c92 : SUBSD XMM0,XMM3
00659c96 : ORPD XMM0,XMM5
00659c9a : MOVLPD qword ptr [ESP + 0x4],XMM0
00659ca0 : FLD double ptr [ESP + 0x4]
00659ca4 : ADD ESP,0x10
00659ca7 : RET
00659ca8 : ADD EAX,0x3fefe
00659cad : CMP EAX,0x3ff00
00659cb2 : JC 0x00659daf
00659cb8 : MOVD ECX,XMM0
00659cbc : PSRLQ XMM0,0x20
00659cc1 : MOVD EDX,XMM0
00659cc5 : AND EDX,0x7fffffff
00659ccb : MOV EAX,0x3ff00000
00659cd0 : SUB EAX,EDX
00659cd2 : OR EAX,ECX
00659cd4 : CMP EAX,0x0
00659cd7 : JZ 0x00659d62
00659cdd : MOVLPD XMM2,qword ptr [ESP + 0x4]
00659ce3 : MOVD EDX,XMM2
00659ce7 : PSRLQ XMM2,0x20
00659cec : MOVD ECX,XMM2
00659cf0 : AND ECX,0x7fffffff
00659cf6 : SUB EDX,0x1
00659cf9 : SBB ECX,0x7ff00000
00659cff : CMP ECX,0x0
00659d02 : JGE 0x00659d97
00659d08 : XORPD XMM1,XMM1
00659d0c : XORPD XMM0,XMM0
00659d10 : MOV EDX,0x7ff0
00659d15 : PINSRW XMM1,EDX,0x3
00659d1a : MULSD XMM0,XMM1
00659d1e : MOV EDX,0x3d
00659d23 : SUB ESP,0x1c
00659d26 : MOVLPD qword ptr [ESP + 0x10],XMM0
00659d2c : MOV dword ptr [ESP + 0xc],EDX
00659d30 : MOV EDX,ESP
00659d32 : ADD EDX,0x10
00659d35 : MOV dword ptr [ESP + 0x8],EDX
00659d39 : ADD EDX,0x10
00659d3c : MOV dword ptr [ESP + 0x4],EDX
00659d40 : MOV dword ptr [ESP],EDX
00659d43 : CALL 0x00652a86
00659d48 : MOVLPD XMM0,qword ptr [ESP + 0x10]
00659d4e : ADD ESP,0x1c
00659d51 : SUB ESP,0x10
00659d54 : MOVLPD qword ptr [ESP + 0x4],XMM0
00659d5a : FLD double ptr [ESP + 0x4]
00659d5e : ADD ESP,0x10
00659d61 : RET
00659d62 : MOVLPD XMM1,qword ptr [0x00ba2bb0]
00659d6a : MOVLPD XMM2,qword ptr [0x00ba2b20]
00659d72 : MOVLPD XMM0,qword ptr [0x00ba2b28]
00659d7a : ADDSD XMM0,XMM2
00659d7e : ANDNPD XMM1,XMM7
00659d82 : ORPD XMM0,XMM1
00659d86 : SUB ESP,0x10
00659d89 : MOVLPD qword ptr [ESP + 0x4],XMM0
00659d8f : FLD double ptr [ESP + 0x4]
00659d93 : ADD ESP,0x10
00659d96 : RET
00659d97 : MOVLPD XMM0,qword ptr [ESP + 0x4]
00659d9d : XORPD XMM6,XMM6
00659da1 : ADDSD XMM0,XMM6
00659da5 : MOV EDX,0x3f1
00659daa : JMP 0x00659d23
00659daf : MOVLPD XMM0,qword ptr [ESP + 0x4]
00659db5 : XORPD XMM6,XMM6
00659db9 : SUB ESP,0x10
00659dbc : MOVSD XMM7,XMM0
00659dc0 : PEXTRW EDX,XMM0,0x3
00659dc5 : AND EDX,0x7ff0
00659dcb : SUB EDX,0x10
00659dce : CMP EDX,0x7fe0
00659dd4 : JC 0x00659de2
00659dd6 : ADDSD XMM6,XMM0
00659dda : ORPD XMM0,XMM6
00659dde : MULSD XMM7,XMM0
00659de2 : MOVLPD qword ptr [ESP + 0x4],XMM0
00659de8 : FLD double ptr [ESP + 0x4]
00659dec : ADD ESP,0x10
00659def : RET
