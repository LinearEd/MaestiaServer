PROGRAM  : Maestia.exe
FUNCTION : FUN_007586e0
ENTRY    : 007586e0
BODY     : [[007586e0, 0075891a]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007586e0(int *param_1)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int *piVar5;
  undefined8 uVar4;
  undefined4 uVar6;
  int **ppiVar7;
  undefined1 local_e0 [132];
  undefined1 local_5c [24];
  int local_44;
  int local_40;
  undefined8 local_3c;
  undefined8 local_34;
  uint local_2c;
  uint local_28;
  int local_24;
  int local_20;
  int *local_1c;
  int *local_18;
  uint local_14;
  int *local_10;
  int *local_c [2];
  
  piVar1 = param_1;
  local_18 = *(int **)(DAT_017251ac + 0x18);
  if ((local_18 != (int *)0x0) && (*(int *)(DAT_017251ac + 0x178) != 0)) {
    local_1c = *(int **)(DAT_01725204 + 0x20c);
    if (local_1c != (int *)0x0) {
      param_1 = (int *)0x0;
      local_c[0] = (int *)0x0;
      iVar2 = (**(code **)(*local_1c + 0x48))(local_1c,0,&param_1);
      if (iVar2 < 0) {
        FUN_008018d0(L"[AvaHDR::SceneToSceneScaled] GetSurfaceLevel Fail (%d)",iVar2);
      }
      else {
        local_10 = *(int **)(DAT_01725204 + 0x208);
        if (local_10 == (int *)0x0) {
          FUN_008018d0(L"[AvaHDR::SceneToSceneScaled] g_pShaderMgr->GetHDRTexScene NULL");
        }
        else {
          ppiVar7 = local_c;
          uVar6 = 0;
          piVar5 = local_10;
          (**(code **)(*local_10 + 0x48))();
          uVar4 = CONCAT44(piVar5,local_5c);
          piVar5 = local_c[0];
          (**(code **)(*local_c[0] + 0x30))();
          (**(code **)(*piVar1 + 0xe8))(piVar1,"DownScale4x4",piVar5,uVar4,uVar6,ppiVar7);
          local_2c = (uint)(local_44 - *(int *)(DAT_017251ac + 0x250)) >> 1;
          local_28 = (uint)(local_40 - *(int *)(DAT_017251ac + 0x254)) >> 1;
          local_24 = local_2c + *(int *)(DAT_017251ac + 0x250);
          local_20 = local_28 + *(int *)(DAT_017251ac + 0x254);
          FUN_00755b50(local_1c,0);
          FUN_00755dd0(local_40);
          (**(code **)(*piVar1 + 0x50))(piVar1,"g_avSampleOffsets",local_e0,0x80);
          piVar5 = local_18;
          (**(code **)(*local_18 + 0x94))(local_18,0,param_1);
          (**(code **)(*piVar1 + 0xd0))(piVar1,"g_tHDRTex0",local_10);
          (**(code **)(*piVar5 + 0x114))(piVar5,0,6,1);
          (**(code **)(*piVar5 + 0x114))(piVar5,0,1,3);
          (**(code **)(*piVar5 + 0x114))(piVar5,0,2,3);
          (**(code **)(*piVar1 + 0x104))(piVar1);
          iVar2 = (**(code **)(*piVar1 + 0xfc))(piVar1,&local_14,0);
          if (-1 < iVar2) {
            uVar3 = 0;
            if (local_14 != 0) {
              do {
                (**(code **)(*piVar1 + 0x100))(piVar1,uVar3);
                FUN_004be960(local_3c,local_34);
                (**(code **)(*piVar1 + 0x108))();
                uVar3 = uVar3 + 1;
              } while (uVar3 < local_14);
            }
            (**(code **)(*piVar1 + 0x10c))(piVar1);
            iVar2 = 0;
          }
        }
      }
      if (param_1 != (int *)0x0) {
        (**(code **)(*param_1 + 8))(param_1);
        param_1 = (int *)0x0;
      }
      if (local_c[0] != (int *)0x0) {
        (**(code **)(*local_c[0] + 8))(local_c[0]);
      }
      return iVar2;
    }
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
007586e0 : PUSH EBP
007586e1 : MOV EBP,ESP
007586e3 : SUB ESP,0xe0
007586e9 : MOV ECX,dword ptr [0x017251ac]
007586ef : MOV EAX,dword ptr [ECX + 0x18]
007586f2 : PUSH EBX
007586f3 : MOV EBX,dword ptr [EBP + 0x8]
007586f6 : PUSH ESI
007586f7 : XOR ESI,ESI
007586f9 : PUSH EDI
007586fa : MOV dword ptr [EBP + -0x14],EAX
007586fd : CMP EAX,ESI
007586ff : JNZ 0x0075870f
00758701 : MOV EAX,0x1
00758706 : POP EDI
00758707 : POP ESI
00758708 : POP EBX
00758709 : MOV ESP,EBP
0075870b : POP EBP
0075870c : RET 0x4
0075870f : CMP dword ptr [ECX + 0x178],ESI
00758715 : JZ 0x00758701
00758717 : MOV EAX,[0x01725204]
0075871c : MOV EAX,dword ptr [EAX + 0x20c]
00758722 : MOV dword ptr [EBP + -0x18],EAX
00758725 : CMP EAX,ESI
00758727 : JZ 0x00758701
00758729 : LEA EDX,[EBP + 0x8]
0075872c : PUSH EDX
0075872d : MOV dword ptr [EBP + 0x8],ESI
00758730 : MOV dword ptr [EBP + -0x8],ESI
00758733 : MOV ECX,dword ptr [EAX]
00758735 : PUSH ESI
00758736 : PUSH EAX
00758737 : MOV EAX,dword ptr [ECX + 0x48]
0075873a : CALL EAX
0075873c : MOV EDI,EAX
0075873e : CMP EDI,ESI
00758740 : JGE 0x0075875b
00758742 : MOV ESI,dword ptr [0x00da98e8]
00758748 : PUSH EDI
00758749 : PUSH 0xc0b200
0075874e : CALL 0x008018d0
00758753 : ADD ESP,0x8
00758756 : JMP 0x007588eb
0075875b : MOV ECX,dword ptr [0x01725204]
00758761 : MOV EAX,dword ptr [ECX + 0x208]
00758767 : MOV dword ptr [EBP + -0xc],EAX
0075876a : CMP EAX,ESI
0075876c : JNZ 0x00758786
0075876e : MOV ESI,dword ptr [0x00da98e8]
00758774 : PUSH 0xc0b270
00758779 : CALL 0x008018d0
0075877e : ADD ESP,0x4
00758781 : JMP 0x007588eb
00758786 : MOV EDX,dword ptr [EAX]
00758788 : MOV EDX,dword ptr [EDX + 0x48]
0075878b : LEA ECX,[EBP + -0x8]
0075878e : PUSH ECX
0075878f : PUSH ESI
00758790 : PUSH EAX
00758791 : CALL EDX
00758793 : MOV EAX,dword ptr [EBP + -0x8]
00758796 : MOV ECX,dword ptr [EAX]
00758798 : LEA EDX,[EBP + -0x58]
0075879b : PUSH EDX
0075879c : PUSH EAX
0075879d : MOV EAX,dword ptr [ECX + 0x30]
007587a0 : CALL EAX
007587a2 : MOV ECX,dword ptr [EBX]
007587a4 : MOV EDX,dword ptr [ECX + 0xe8]
007587aa : PUSH 0xc0b2f0
007587af : PUSH EBX
007587b0 : CALL EDX
007587b2 : MOV EAX,[0x017251ac]
007587b7 : MOV ESI,dword ptr [EAX + 0x254]
007587bd : MOV EDX,dword ptr [EAX + 0x250]
007587c3 : MOV EAX,dword ptr [EBP + -0x40]
007587c6 : MOV ECX,dword ptr [EBP + -0x3c]
007587c9 : SUB EAX,EDX
007587cb : SUB ECX,ESI
007587cd : SHR EAX,0x1
007587cf : SHR ECX,0x1
007587d1 : MOV dword ptr [EBP + -0x28],EAX
007587d4 : ADD EAX,EDX
007587d6 : MOV dword ptr [EBP + -0x24],ECX
007587d9 : ADD ECX,ESI
007587db : MOV dword ptr [EBP + -0x20],EAX
007587de : MOV EAX,dword ptr [EBP + -0x18]
007587e1 : PUSH 0x0
007587e3 : MOV dword ptr [EBP + -0x1c],ECX
007587e6 : MOV ECX,dword ptr [EBP + -0xc]
007587e9 : PUSH EAX
007587ea : LEA ESI,[EBP + -0x38]
007587ed : LEA EDI,[EBP + -0x28]
007587f0 : CALL 0x00755b50
007587f5 : MOV ECX,dword ptr [EBP + -0x3c]
007587f8 : PUSH ECX
007587f9 : MOV ECX,dword ptr [EBP + -0x40]
007587fc : LEA EAX,[EBP + 0xffffff24]
00758802 : CALL 0x00755dd0
00758807 : MOV EDX,dword ptr [EBX]
00758809 : MOV ECX,dword ptr [EDX + 0x50]
0075880c : PUSH 0x80
00758811 : LEA EAX,[EBP + 0xffffff24]
00758817 : PUSH EAX
00758818 : PUSH 0xc0b300
0075881d : PUSH EBX
0075881e : CALL ECX
00758820 : MOV EAX,dword ptr [EBP + 0x8]
00758823 : MOV ESI,dword ptr [EBP + -0x14]
00758826 : MOV EDX,dword ptr [ESI]
00758828 : MOV ECX,dword ptr [EDX + 0x94]
0075882e : PUSH EAX
0075882f : PUSH 0x0
00758831 : PUSH ESI
00758832 : CALL ECX
00758834 : MOV EAX,dword ptr [EBP + -0xc]
00758837 : MOV EDX,dword ptr [EBX]
00758839 : MOV ECX,dword ptr [EDX + 0xd0]
0075883f : PUSH EAX
00758840 : PUSH 0xc0b314
00758845 : PUSH EBX
00758846 : CALL ECX
00758848 : MOV EDX,dword ptr [ESI]
0075884a : MOV EAX,dword ptr [EDX + 0x114]
00758850 : PUSH 0x1
00758852 : PUSH 0x6
00758854 : PUSH 0x0
00758856 : PUSH ESI
00758857 : CALL EAX
00758859 : MOV ECX,dword ptr [ESI]
0075885b : PUSH 0x3
0075885d : PUSH 0x1
0075885f : PUSH 0x0
00758861 : PUSH ESI
00758862 : MOV EDX,dword ptr [ECX + 0x114]
00758868 : CALL EDX
0075886a : MOV EAX,dword ptr [ESI]
0075886c : MOV ECX,dword ptr [EAX + 0x114]
00758872 : PUSH 0x3
00758874 : PUSH 0x2
00758876 : PUSH 0x0
00758878 : PUSH ESI
00758879 : CALL ECX
0075887b : MOV EDX,dword ptr [EBX]
0075887d : MOV EAX,dword ptr [EDX + 0x104]
00758883 : PUSH EBX
00758884 : CALL EAX
00758886 : MOV ECX,dword ptr [EBX]
00758888 : MOV EAX,dword ptr [ECX + 0xfc]
0075888e : PUSH 0x0
00758890 : LEA EDX,[EBP + -0x10]
00758893 : PUSH EDX
00758894 : PUSH EBX
00758895 : CALL EAX
00758897 : MOV EDI,EAX
00758899 : TEST EDI,EDI
0075889b : JL 0x007588eb
0075889d : XOR ESI,ESI
0075889f : CMP dword ptr [EBP + -0x10],ESI
007588a2 : JBE 0x007588de
007588a4 : MOV ECX,dword ptr [EBX]
007588a6 : MOV EDX,dword ptr [ECX + 0x100]
007588ac : PUSH ESI
007588ad : PUSH EBX
007588ae : CALL EDX
007588b0 : MOVQ XMM0,qword ptr [EBP + -0x38]
007588b5 : SUB ESP,0x10
007588b8 : MOV EAX,ESP
007588ba : MOVQ qword ptr [EAX],XMM0
007588be : MOVQ XMM0,qword ptr [EBP + -0x30]
007588c3 : MOVQ qword ptr [EAX + 0x8],XMM0
007588c8 : CALL 0x004be960
007588cd : MOV EAX,dword ptr [EBX]
007588cf : MOV ECX,dword ptr [EAX + 0x108]
007588d5 : PUSH EBX
007588d6 : CALL ECX
007588d8 : INC ESI
007588d9 : CMP ESI,dword ptr [EBP + -0x10]
007588dc : JC 0x007588a4
007588de : MOV EDX,dword ptr [EBX]
007588e0 : MOV EAX,dword ptr [EDX + 0x10c]
007588e6 : PUSH EBX
007588e7 : CALL EAX
007588e9 : XOR EDI,EDI
007588eb : MOV EAX,dword ptr [EBP + 0x8]
007588ee : TEST EAX,EAX
007588f0 : JZ 0x00758901
007588f2 : MOV ECX,dword ptr [EAX]
007588f4 : MOV EDX,dword ptr [ECX + 0x8]
007588f7 : PUSH EAX
007588f8 : CALL EDX
007588fa : MOV dword ptr [EBP + 0x8],0x0
00758901 : MOV EAX,dword ptr [EBP + -0x8]
00758904 : TEST EAX,EAX
00758906 : JZ 0x00758910
00758908 : MOV ECX,dword ptr [EAX]
0075890a : MOV EDX,dword ptr [ECX + 0x8]
0075890d : PUSH EAX
0075890e : CALL EDX
00758910 : MOV EAX,EDI
00758912 : POP EDI
00758913 : POP ESI
00758914 : POP EBX
00758915 : MOV ESP,EBP
00758917 : POP EBP
00758918 : RET 0x4
