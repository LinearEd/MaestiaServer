PROGRAM  : Maestia.exe
FUNCTION : FUN_009d7280
ENTRY    : 009d7280
BODY     : [[009d7280, 009d7498]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009d7280(void)

{
  char cVar1;
  ushort uVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  int *in_ECX;
  undefined1 local_48 [32];
  undefined4 local_28;
  int local_20;
  uint local_1c;
  uint local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b64121;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar6 = *(int *)(in_ECX[1] + 0x128);
  if ((iVar6 != 0) &&
     ((local_14 = in_ECX, *(int *)(iVar6 + 0x40) != 0x21 ||
      (cVar1 = FUN_00993510(in_ECX,0), cVar1 == '\0')))) {
    if (*(int *)(iVar6 + 0x40) == -1) {
      iVar6 = (**(code **)(*in_ECX + 0x74))(0,0,uVar3);
      if (iVar6 != 0) {
        FUN_0097fb30(iVar6,0,0);
      }
    }
    else {
      iVar4 = FUN_008eb580();
      if (iVar4 != 0) {
        local_1c = (uint)*(ushort *)(iVar6 + 0x44);
        local_18 = (uint)*(ushort *)(iVar6 + 0x46);
        local_20 = *(int *)(iVar6 + 0x4c);
        if ((local_20 != 0) && (iVar4 = FUN_004049b0(*(undefined4 *)(local_20 + 0x10)), iVar4 != 0))
        {
          local_28 = *(undefined4 *)(iVar4 + 0x4c);
          if ((((*(uint *)(iVar4 + 0x48) & 0x10) != 0) || ((*(uint *)(iVar4 + 0x48) & 0x40) != 0))
             && ((DAT_00da9877 == '\0' && (iVar4 = FUN_00702ad0(), in_ECX = local_14, iVar4 == 0))))
          {
            FUN_00406460(L"IDS_AUCTION_NOT_BIDDABLE_ITEM");
            local_8 = 0;
            uVar5 = FUN_0081d120(local_48);
            local_8._0_1_ = 1;
            FUN_0096b1e0(uVar5,0xffff0000,0x12);
            local_8 = (uint)local_8._1_3_ << 8;
            FUN_00406560();
            local_8 = 0xffffffff;
            FUN_00406560();
            FUN_0097fa60();
            ExceptionList = local_10;
            return;
          }
          uVar5 = *(undefined4 *)(iVar6 + 0x40);
          if ((((*(byte *)(local_20 + 0x120) & 1) == 0) && (uVar2 = FUN_0097f9f0(), 1 < uVar2)) &&
             (iVar6 = (**(code **)(**(int **)(iVar6 + 0x4c) + 0x20))(), iVar6 != 0)) {
            FUN_0097f9f0();
            FUN_009d05e0(uVar5,local_1c,local_18,0,0);
            FUN_009d34d0(local_14);
            ExceptionList = local_10;
            return;
          }
          FUN_009d34d0(in_ECX);
          FUN_008efa90(uVar5,local_1c,local_18,0x21,0,0);
          ExceptionList = local_10;
          return;
        }
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
009d7280 : PUSH EBP
009d7281 : MOV EBP,ESP
009d7283 : PUSH -0x1
009d7285 : PUSH 0xb64121
009d728a : MOV EAX,FS:[0x0]
009d7290 : PUSH EAX
009d7291 : SUB ESP,0x54
009d7294 : PUSH EBX
009d7295 : PUSH ESI
009d7296 : PUSH EDI
009d7297 : MOV EAX,[0x00d66fa0]
009d729c : XOR EAX,EBP
009d729e : PUSH EAX
009d729f : LEA EAX,[EBP + -0xc]
009d72a2 : MOV FS:[0x0],EAX
009d72a8 : MOV ESI,ECX
009d72aa : MOV EAX,dword ptr [ESI + 0x4]
009d72ad : MOV EBX,dword ptr [EAX + 0x128]
009d72b3 : MOV dword ptr [EBP + -0x10],ESI
009d72b6 : TEST EBX,EBX
009d72b8 : JZ 0x009d7487
009d72be : MOV EAX,dword ptr [EBX + 0x40]
009d72c1 : CMP EAX,0x21
009d72c4 : JNZ 0x009d72da
009d72c6 : PUSH 0x0
009d72c8 : PUSH ESI
009d72c9 : XOR EDX,EDX
009d72cb : MOV ECX,EBX
009d72cd : CALL 0x00993510
009d72d2 : TEST AL,AL
009d72d4 : JNZ 0x009d7487
009d72da : MOV EDI,dword ptr [EBX + 0x40]
009d72dd : CMP EDI,-0x1
009d72e0 : JZ 0x009d7465
009d72e6 : MOV EAX,dword ptr [ESI + 0x4]
009d72e9 : CALL 0x008eb580
009d72ee : TEST EAX,EAX
009d72f0 : JZ 0x009d7487
009d72f6 : MOVZX ECX,word ptr [EBX + 0x44]
009d72fa : MOVZX EDX,word ptr [EBX + 0x46]
009d72fe : MOV EAX,dword ptr [EBX + 0x4c]
009d7301 : MOV dword ptr [EBP + -0x18],ECX
009d7304 : MOV dword ptr [EBP + -0x14],EDX
009d7307 : MOV dword ptr [EBP + -0x1c],EAX
009d730a : TEST EAX,EAX
009d730c : JZ 0x009d7487
009d7312 : MOV EAX,dword ptr [EAX + 0x10]
009d7315 : PUSH EAX
009d7316 : CALL 0x004049b0
009d731b : ADD ESP,0x4
009d731e : TEST EAX,EAX
009d7320 : JZ 0x009d7487
009d7326 : MOV ECX,dword ptr [EAX + 0x4c]
009d7329 : MOV EDX,dword ptr [EAX + 0x48]
009d732c : MOV dword ptr [EBP + -0x24],ECX
009d732f : MOV ECX,EDX
009d7331 : AND ECX,0x10
009d7334 : XOR EDI,EDI
009d7336 : OR ECX,EDI
009d7338 : JNZ 0x009d7345
009d733a : AND EDX,0x40
009d733d : OR EDX,ECX
009d733f : JZ 0x009d73d6
009d7345 : CMP byte ptr [0x00da9877],0x0
009d734c : JNZ 0x009d73d6
009d7352 : MOV ESI,EAX
009d7354 : CALL 0x00702ad0
009d7359 : TEST EAX,EAX
009d735b : JNZ 0x009d73d3
009d735d : PUSH 0xc95dd0
009d7362 : LEA ECX,[EBP + -0x44]
009d7365 : CALL 0x00406460
009d736a : MOV dword ptr [EBP + -0x4],0x0
009d7371 : MOV ECX,dword ptr [0x0172491c]
009d7377 : LEA EDX,[EBP + -0x44]
009d737a : PUSH EDX
009d737b : LEA EDI,[EBP + -0x60]
009d737e : CALL 0x0081d120
009d7383 : MOV byte ptr [EBP + -0x4],0x1
009d7387 : MOV ECX,dword ptr [EBP + -0x10]
009d738a : MOV EDX,dword ptr [ECX + 0x4]
009d738d : MOV ECX,dword ptr [EDX + 0x134]
009d7393 : PUSH 0x12
009d7395 : PUSH 0xffff0000
009d739a : PUSH EAX
009d739b : CALL 0x0096b1e0
009d73a0 : MOV byte ptr [EBP + -0x4],0x0
009d73a4 : MOV ECX,EDI
009d73a6 : CALL 0x00406560
009d73ab : MOV dword ptr [EBP + -0x4],0xffffffff
009d73b2 : LEA ECX,[EBP + -0x44]
009d73b5 : CALL 0x00406560
009d73ba : MOV ECX,EBX
009d73bc : CALL 0x0097fa60
009d73c1 : MOV ECX,dword ptr [EBP + -0xc]
009d73c4 : MOV dword ptr FS:[0x0],ECX
009d73cb : POP ECX
009d73cc : POP EDI
009d73cd : POP ESI
009d73ce : POP EBX
009d73cf : MOV ESP,EBP
009d73d1 : POP EBP
009d73d2 : RET
009d73d3 : MOV ESI,dword ptr [EBP + -0x10]
009d73d6 : MOV EAX,dword ptr [EBP + -0x1c]
009d73d9 : TEST byte ptr [EAX + 0x120],0x1
009d73e0 : MOV EDI,dword ptr [EBX + 0x40]
009d73e3 : JNZ 0x009d7436
009d73e5 : MOV EAX,EBX
009d73e7 : CALL 0x0097f9f0
009d73ec : CMP AX,0x1
009d73f0 : JBE 0x009d7436
009d73f2 : MOV ECX,dword ptr [EBX + 0x4c]
009d73f5 : MOV EDX,dword ptr [ECX]
009d73f7 : MOV EAX,dword ptr [EDX + 0x20]
009d73fa : CALL EAX
009d73fc : TEST EAX,EAX
009d73fe : JZ 0x009d7436
009d7400 : MOV EAX,EBX
009d7402 : CALL 0x0097f9f0
009d7407 : MOV ECX,dword ptr [EBP + -0x14]
009d740a : MOV EDX,dword ptr [EBP + -0x18]
009d740d : PUSH 0x0
009d740f : PUSH 0x0
009d7411 : PUSH ECX
009d7412 : PUSH EDX
009d7413 : PUSH EDI
009d7414 : MOV EDX,EAX
009d7416 : CALL 0x009d05e0
009d741b : MOV EAX,dword ptr [EBP + -0x10]
009d741e : PUSH EAX
009d741f : CALL 0x009d34d0
009d7424 : MOV ECX,dword ptr [EBP + -0xc]
009d7427 : MOV dword ptr FS:[0x0],ECX
009d742e : POP ECX
009d742f : POP EDI
009d7430 : POP ESI
009d7431 : POP EBX
009d7432 : MOV ESP,EBP
009d7434 : POP EBP
009d7435 : RET
009d7436 : PUSH ESI
009d7437 : CALL 0x009d34d0
009d743c : MOV ECX,dword ptr [EBP + -0x14]
009d743f : MOV EDX,dword ptr [EBP + -0x18]
009d7442 : PUSH 0x0
009d7444 : PUSH 0x0
009d7446 : PUSH 0x21
009d7448 : PUSH ECX
009d7449 : PUSH EDX
009d744a : PUSH EDI
009d744b : CALL 0x008efa90
009d7450 : ADD ESP,0x18
009d7453 : MOV ECX,dword ptr [EBP + -0xc]
009d7456 : MOV dword ptr FS:[0x0],ECX
009d745d : POP ECX
009d745e : POP EDI
009d745f : POP ESI
009d7460 : POP EBX
009d7461 : MOV ESP,EBP
009d7463 : POP EBP
009d7464 : RET
009d7465 : MOV EAX,dword ptr [ESI]
009d7467 : MOV EDX,dword ptr [EAX + 0x74]
009d746a : PUSH 0x0
009d746c : PUSH 0x0
009d746e : MOV ECX,ESI
009d7470 : CALL EDX
009d7472 : TEST EAX,EAX
009d7474 : JZ 0x009d7487
009d7476 : PUSH 0x0
009d7478 : PUSH 0x0
009d747a : PUSH EAX
009d747b : MOV EAX,0x21
009d7480 : MOV ECX,EBX
009d7482 : CALL 0x0097fb30
009d7487 : MOV ECX,dword ptr [EBP + -0xc]
009d748a : MOV dword ptr FS:[0x0],ECX
009d7491 : POP ECX
009d7492 : POP EDI
009d7493 : POP ESI
009d7494 : POP EBX
009d7495 : MOV ESP,EBP
009d7497 : POP EBP
009d7498 : RET
