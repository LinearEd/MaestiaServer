PROGRAM  : Maestia.exe
FUNCTION : FUN_00509d30
ENTRY    : 00509d30
BODY     : [[00509d30, 00509da5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00509d30(undefined4 param_1,int *param_2)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  LONG LVar4;
  int in_ECX;
  undefined4 *puStack_8;
  undefined4 *puStack_4;
  
  piVar1 = param_2;
  uVar2 = (**(code **)(*param_2 + 8))();
  if ((uVar2 & 0xff00) == 0x200) {
    uVar3 = (**(code **)(*(int *)piVar1[3] + 0x3c))();
    FUN_0051c480(uVar3);
    puStack_8 = &param_2;
    puStack_4 = puStack_8;
    FUN_00508d40(*(undefined4 *)(in_ECX + 4),&puStack_8);
    uVar2 = (uint)param_2 & 0xfffffffc;
    LVar4 = InterlockedExchangeAdd((LONG *)(uVar2 + 4),-1);
    if (LVar4 == 1) {
      FUN_00515cf0(uVar2);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00509d30 : SUB ESP,0x8
00509d33 : PUSH ESI
00509d34 : MOV ESI,dword ptr [ESP + 0x14]
00509d38 : MOV EAX,dword ptr [ESI]
00509d3a : MOV EDX,dword ptr [EAX + 0x8]
00509d3d : PUSH EDI
00509d3e : MOV EDI,ECX
00509d40 : MOV ECX,ESI
00509d42 : CALL EDX
00509d44 : AND EAX,0xff00
00509d49 : CMP EAX,0x200
00509d4e : JNZ 0x00509d9e
00509d50 : MOV ECX,dword ptr [ESI + 0xc]
00509d53 : MOV EAX,dword ptr [ECX]
00509d55 : MOV EDX,dword ptr [EAX + 0x3c]
00509d58 : CALL EDX
00509d5a : PUSH EAX
00509d5b : LEA ECX,[ESP + 0x1c]
00509d5f : CALL 0x0051c480
00509d64 : MOV ECX,dword ptr [EDI + 0x4]
00509d67 : LEA EAX,[ESP + 0x18]
00509d6b : MOV EDX,EAX
00509d6d : MOV dword ptr [ESP + 0x8],EAX
00509d71 : LEA EAX,[ESP + 0x8]
00509d75 : PUSH EAX
00509d76 : PUSH ECX
00509d77 : MOV dword ptr [ESP + 0x14],EDX
00509d7b : CALL 0x00508d40
00509d80 : MOV ESI,dword ptr [ESP + 0x18]
00509d84 : AND ESI,0xfffffffc
00509d87 : PUSH -0x1
00509d89 : LEA ECX,[ESI + 0x4]
00509d8c : PUSH ECX
00509d8d : CALL dword ptr [0x00b851cc]
00509d93 : SUB EAX,0x1
00509d96 : JNZ 0x00509d9e
00509d98 : PUSH ESI
00509d99 : CALL 0x00515cf0
00509d9e : POP EDI
00509d9f : POP ESI
00509da0 : ADD ESP,0x8
00509da3 : RET 0x10
