PROGRAM  : Maestia.exe
FUNCTION : FUN_007cf910
ENTRY    : 007cf910
BODY     : [[007cf910, 007cfc53]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_007cf910(int *param_1,undefined4 *param_2,undefined4 param_3,undefined4 param_4)

{
  char cVar1;
  uint uVar2;
  undefined4 uVar3;
  int *piVar4;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  undefined1 local_2c [8];
  undefined1 local_24 [4];
  int *local_20;
  undefined **local_1c;
  int *local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4838d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 0;
  uVar3 = FUN_00801fc0(&local_1c,param_3);
  local_8 = 1;
  FUN_0043e5a0(local_24,uVar3);
  local_8._0_1_ = 3;
  local_1c = &PTR_FUN_00cd4964;
  if (local_18 != (int *)0x0) {
    (**(code **)(*local_18 + 0x30))(uVar2);
    local_18 = (int *)0x0;
  }
  piVar4 = local_20;
  if (local_20 == (int *)0x0) {
    if (((char)param_1[0x36] == '\0') && (cVar1 = FUN_00802b90(param_1,param_3), cVar1 == '\0')) {
      *param_2 = &PTR_FUN_00cd4964;
      param_2[1] = 0;
      local_8 = (uint)local_8._1_3_ << 8;
      goto LAB_007cfc39;
    }
    local_18 = (int *)FUN_006f0760(0x78,".\\Resource\\AvaMeshTxtrMgr.cpp",0x43,0);
    local_8._0_1_ = 4;
    if (local_18 == (int *)0x0) {
      piVar4 = (int *)0x0;
    }
    else {
      piVar4 = (int *)FUN_0078e3e0(local_18);
    }
    local_8._0_1_ = 3;
    local_18 = piVar4;
    if (piVar4 == (int *)0x0) {
      FUN_00406460(L"AvaMeshTxtr alloc fail");
      local_8._0_1_ = 5;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaLib::AvaMeshTxtrMgr::Load",0x47,local_48);
      }
      local_8 = CONCAT31(local_8._1_3_,3);
      if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_30 = 7;
      local_44 = 0;
      *param_2 = &PTR_FUN_00cd4964;
      param_2[1] = 0;
      local_8 = (uint)local_8._1_3_ << 8;
      local_34 = 0;
      goto LAB_007cfc39;
    }
    cVar1 = FUN_0078e8c0(param_3,param_4);
    if (cVar1 == '\0') {
      (**(code **)*piVar4)(1);
      local_18 = (int *)0x0;
    }
    else {
      piVar4[0xd] = (int)param_1;
      cVar1 = (**(code **)(*param_1 + 0xc))(piVar4);
      if (cVar1 == '\0') {
        piVar4[0xd] = 0;
        (**(code **)*piVar4)(1);
        local_18 = (int *)0x0;
        FUN_00801fc0(local_2c,param_3);
        local_8._0_1_ = 6;
        FUN_00463a60();
        local_8._0_1_ = 3;
        FUN_0045f640();
        piVar4 = local_20;
        if (local_20 != (int *)0x0) {
          (**(code **)(*local_20 + 0x20))();
          if ((piVar4[0xe] == 0) || ((char)local_20[9] == '\0')) {
            FUN_0078e8c0(param_3,param_4);
            FUN_007cf300(1);
            FUN_0043a270();
            local_8 = (uint)local_8._1_3_ << 8;
          }
          else {
            (**(code **)(*local_20 + 0x28))();
            FUN_007cf300(0);
            FUN_0043a270();
            local_8 = (uint)local_8._1_3_ << 8;
          }
          goto LAB_007cfc39;
        }
      }
    }
    piVar4 = local_18;
    FUN_007cf300(1);
    *param_2 = &PTR_FUN_00cd4964;
    param_2[1] = piVar4;
    if (piVar4 != (int *)0x0) {
      InterlockedIncrement(piVar4 + 0xb);
    }
  }
  else {
    (**(code **)(*local_20 + 0x20))();
    if ((piVar4[0xe] != 0) && ((char)local_20[9] != '\0')) {
      FUN_007cf300(0);
      (**(code **)(*local_20 + 0x28))();
      *param_2 = &PTR_FUN_00cd4964;
      param_2[1] = local_20;
      if (local_20 != (int *)0x0) {
        InterlockedIncrement(local_20 + 0xb);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      goto LAB_007cfc39;
    }
    FUN_0078e8c0(param_3,param_4);
    FUN_007cf300(1);
    *param_2 = &PTR_FUN_00cd4964;
    param_2[1] = local_20;
    if (local_20 != (int *)0x0) {
      InterlockedIncrement(local_20 + 0xb);
    }
  }
  local_8 = (uint)local_8._1_3_ << 8;
LAB_007cfc39:
  local_14 = 1;
  FUN_0040ed80(local_24);
  ExceptionList = local_10;
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
007cf910 : PUSH EBP
007cf911 : MOV EBP,ESP
007cf913 : PUSH -0x1
007cf915 : PUSH 0xb4838d
007cf91a : MOV EAX,FS:[0x0]
007cf920 : PUSH EAX
007cf921 : SUB ESP,0x3c
007cf924 : PUSH EBX
007cf925 : PUSH ESI
007cf926 : PUSH EDI
007cf927 : MOV EAX,[0x00d66fa0]
007cf92c : XOR EAX,EBP
007cf92e : PUSH EAX
007cf92f : LEA EAX,[EBP + -0xc]
007cf932 : MOV FS:[0x0],EAX
007cf938 : MOV EBX,dword ptr [EBP + 0xc]
007cf93b : MOV ESI,dword ptr [EBP + 0x10]
007cf93e : MOV EDI,dword ptr [EBP + 0x8]
007cf941 : PUSH ESI
007cf942 : LEA EAX,[EBP + -0x18]
007cf945 : PUSH EAX
007cf946 : MOV ECX,EDI
007cf948 : MOV dword ptr [EBP + -0x10],0x0
007cf94f : CALL 0x00801fc0
007cf954 : MOV dword ptr [EBP + -0x4],0x1
007cf95b : PUSH EAX
007cf95c : LEA ECX,[EBP + -0x20]
007cf95f : PUSH ECX
007cf960 : CALL 0x0043e5a0
007cf965 : MOV byte ptr [EBP + -0x4],0x3
007cf969 : MOV ECX,dword ptr [EBP + -0x14]
007cf96c : MOV dword ptr [EBP + -0x18],0xcd4964
007cf973 : TEST ECX,ECX
007cf975 : JZ 0x007cf985
007cf977 : MOV EDX,dword ptr [ECX]
007cf979 : MOV EAX,dword ptr [EDX + 0x30]
007cf97c : CALL EAX
007cf97e : MOV dword ptr [EBP + -0x14],0x0
007cf985 : MOV ECX,dword ptr [EBP + -0x1c]
007cf988 : TEST ECX,ECX
007cf98a : JZ 0x007cfa24
007cf990 : MOV EDX,dword ptr [ECX]
007cf992 : MOV EAX,dword ptr [EDX + 0x20]
007cf995 : MOV dword ptr [EBP + 0x10],ECX
007cf998 : CALL EAX
007cf99a : MOV ECX,dword ptr [EBP + 0x10]
007cf99d : CMP dword ptr [ECX + 0x38],0x0
007cf9a1 : MOV EAX,dword ptr [EBP + -0x1c]
007cf9a4 : JZ 0x007cf9ef
007cf9a6 : CMP byte ptr [EAX + 0x24],0x0
007cf9aa : JZ 0x007cf9ef
007cf9ac : PUSH 0x0
007cf9ae : MOV ECX,EAX
007cf9b0 : MOV EDX,EDI
007cf9b2 : CALL 0x007cf300
007cf9b7 : MOV ECX,dword ptr [EBP + -0x1c]
007cf9ba : MOV EDX,dword ptr [ECX]
007cf9bc : MOV EAX,dword ptr [EDX + 0x28]
007cf9bf : CALL EAX
007cf9c1 : MOV EAX,dword ptr [EBP + -0x1c]
007cf9c4 : MOV dword ptr [EBX],0xcd4964
007cf9ca : MOV dword ptr [EBX + 0x4],EAX
007cf9cd : TEST EAX,EAX
007cf9cf : JZ 0x007cf9db
007cf9d1 : ADD EAX,0x2c
007cf9d4 : PUSH EAX
007cf9d5 : CALL dword ptr [0x00b850dc]
007cf9db : MOV dword ptr [EBP + -0x10],0x1
007cf9e2 : MOV byte ptr [EBP + -0x4],0x0
007cf9e6 : LEA ECX,[EBP + -0x20]
007cf9e9 : PUSH ECX
007cf9ea : JMP 0x007cfc39
007cf9ef : MOV EDX,dword ptr [EBP + 0x14]
007cf9f2 : PUSH EDX
007cf9f3 : PUSH ESI
007cf9f4 : CALL 0x0078e8c0
007cf9f9 : MOV ECX,dword ptr [EBP + -0x1c]
007cf9fc : PUSH 0x1
007cf9fe : MOV EDX,EDI
007cfa00 : CALL 0x007cf300
007cfa05 : MOV EAX,dword ptr [EBP + -0x1c]
007cfa08 : MOV dword ptr [EBX],0xcd4964
007cfa0e : MOV dword ptr [EBX + 0x4],EAX
007cfa11 : TEST EAX,EAX
007cfa13 : JZ 0x007cfa1f
007cfa15 : ADD EAX,0x2c
007cfa18 : PUSH EAX
007cfa19 : CALL dword ptr [0x00b850dc]
007cfa1f : JMP 0x007cfc2a
007cfa24 : CMP byte ptr [EDI + 0xd8],0x0
007cfa2b : JNZ 0x007cfa58
007cfa2d : PUSH ESI
007cfa2e : PUSH EDI
007cfa2f : CALL 0x00802b90
007cfa34 : TEST AL,AL
007cfa36 : JNZ 0x007cfa58
007cfa38 : MOV dword ptr [EBX],0xcd4964
007cfa3e : MOV dword ptr [EBX + 0x4],0x0
007cfa45 : MOV dword ptr [EBP + -0x10],0x1
007cfa4c : MOV byte ptr [EBP + -0x4],AL
007cfa4f : LEA ECX,[EBP + -0x20]
007cfa52 : PUSH ECX
007cfa53 : JMP 0x007cfc39
007cfa58 : PUSH 0x0
007cfa5a : PUSH 0x43
007cfa5c : PUSH 0xc1f7f4
007cfa61 : PUSH 0x78
007cfa63 : CALL 0x006f0760
007cfa68 : ADD ESP,0x10
007cfa6b : MOV dword ptr [EBP + -0x14],EAX
007cfa6e : MOV byte ptr [EBP + -0x4],0x4
007cfa72 : TEST EAX,EAX
007cfa74 : JZ 0x007cfa80
007cfa76 : PUSH EAX
007cfa77 : CALL 0x0078e3e0
007cfa7c : MOV ESI,EAX
007cfa7e : JMP 0x007cfa82
007cfa80 : XOR ESI,ESI
007cfa82 : MOV byte ptr [EBP + -0x4],0x3
007cfa86 : MOV dword ptr [EBP + -0x14],ESI
007cfa89 : TEST ESI,ESI
007cfa8b : JNZ 0x007cfafa
007cfa8d : PUSH 0xc1f834
007cfa92 : LEA ECX,[EBP + -0x44]
007cfa95 : CALL 0x00406460
007cfa9a : MOV byte ptr [EBP + -0x4],0x5
007cfa9e : MOV EDX,dword ptr [0x00da98e8]
007cfaa4 : MOV ECX,dword ptr [EDX]
007cfaa6 : CMP ECX,ESI
007cfaa8 : JZ 0x007cfabc
007cfaaa : MOV EAX,dword ptr [ECX]
007cfaac : MOV EAX,dword ptr [EAX + 0x14]
007cfaaf : LEA EDX,[EBP + -0x44]
007cfab2 : PUSH EDX
007cfab3 : PUSH 0x47
007cfab5 : PUSH 0xc1f864
007cfaba : CALL EAX
007cfabc : MOV byte ptr [EBP + -0x4],0x3
007cfac0 : CMP dword ptr [EBP + -0x2c],0x8
007cfac4 : JC 0x007cface
007cfac6 : MOV ECX,dword ptr [EBP + -0x40]
007cfac9 : CALL 0x006f04e0
007cface : XOR ECX,ECX
007cfad0 : MOV dword ptr [EBP + -0x2c],0x7
007cfad7 : MOV dword ptr [EBP + -0x30],ESI
007cfada : MOV word ptr [EBP + -0x40],CX
007cfade : MOV dword ptr [EBX],0xcd4964
007cfae4 : MOV dword ptr [EBX + 0x4],ESI
007cfae7 : MOV dword ptr [EBP + -0x10],0x1
007cfaee : MOV byte ptr [EBP + -0x4],CL
007cfaf1 : LEA EDX,[EBP + -0x20]
007cfaf4 : PUSH EDX
007cfaf5 : JMP 0x007cfc39
007cfafa : MOV EAX,dword ptr [EBP + 0x14]
007cfafd : MOV ECX,dword ptr [EBP + 0x10]
007cfb00 : PUSH EAX
007cfb01 : PUSH ECX
007cfb02 : MOV EAX,ESI
007cfb04 : CALL 0x0078e8c0
007cfb09 : TEST AL,AL
007cfb0b : JZ 0x007cfbef
007cfb11 : MOV dword ptr [ESI + 0x34],EDI
007cfb14 : MOV EDX,dword ptr [EDI]
007cfb16 : MOV EAX,dword ptr [EDX + 0xc]
007cfb19 : PUSH ESI
007cfb1a : MOV ECX,EDI
007cfb1c : CALL EAX
007cfb1e : TEST AL,AL
007cfb20 : JNZ 0x007cfc05
007cfb26 : MOV dword ptr [ESI + 0x34],0x0
007cfb2d : MOV EDX,dword ptr [ESI]
007cfb2f : MOV EAX,dword ptr [EDX]
007cfb31 : PUSH 0x1
007cfb33 : MOV ECX,ESI
007cfb35 : CALL EAX
007cfb37 : MOV ECX,dword ptr [EBP + 0x10]
007cfb3a : PUSH ECX
007cfb3b : LEA EDX,[EBP + -0x28]
007cfb3e : PUSH EDX
007cfb3f : MOV ECX,EDI
007cfb41 : MOV dword ptr [EBP + -0x14],0x0
007cfb48 : CALL 0x00801fc0
007cfb4d : MOV byte ptr [EBP + -0x4],0x6
007cfb51 : MOV ESI,EAX
007cfb53 : LEA EDI,[EBP + -0x20]
007cfb56 : CALL 0x00463a60
007cfb5b : MOV byte ptr [EBP + -0x4],0x3
007cfb5f : LEA ECX,[EBP + -0x28]
007cfb62 : CALL 0x0045f640
007cfb67 : MOV ECX,dword ptr [EBP + -0x1c]
007cfb6a : TEST ECX,ECX
007cfb6c : JZ 0x007cfc02
007cfb72 : MOV EAX,dword ptr [ECX]
007cfb74 : MOV EDX,dword ptr [EAX + 0x20]
007cfb77 : MOV ESI,ECX
007cfb79 : CALL EDX
007cfb7b : CMP dword ptr [ESI + 0x38],0x0
007cfb7f : MOV EAX,dword ptr [EBP + -0x1c]
007cfb82 : JZ 0x007cfbba
007cfb84 : CMP byte ptr [EAX + 0x24],0x0
007cfb88 : JZ 0x007cfbba
007cfb8a : MOV EDX,dword ptr [EAX]
007cfb8c : MOV ECX,EAX
007cfb8e : MOV EAX,dword ptr [EDX + 0x28]
007cfb91 : CALL EAX
007cfb93 : MOV ECX,dword ptr [EBP + -0x1c]
007cfb96 : MOV EDX,dword ptr [EBP + 0x8]
007cfb99 : PUSH 0x0
007cfb9b : CALL 0x007cf300
007cfba0 : MOV EAX,dword ptr [EBP + -0x1c]
007cfba3 : MOV ESI,EBX
007cfba5 : CALL 0x0043a270
007cfbaa : MOV dword ptr [EBP + -0x10],0x1
007cfbb1 : MOV byte ptr [EBP + -0x4],0x0
007cfbb5 : MOV ECX,EDI
007cfbb7 : PUSH ECX
007cfbb8 : JMP 0x007cfc39
007cfbba : MOV EDX,dword ptr [EBP + 0x14]
007cfbbd : MOV ECX,dword ptr [EBP + 0x10]
007cfbc0 : PUSH EDX
007cfbc1 : PUSH ECX
007cfbc2 : CALL 0x0078e8c0
007cfbc7 : MOV ECX,dword ptr [EBP + -0x1c]
007cfbca : MOV EDX,dword ptr [EBP + 0x8]
007cfbcd : PUSH 0x1
007cfbcf : CALL 0x007cf300
007cfbd4 : MOV EAX,dword ptr [EBP + -0x1c]
007cfbd7 : MOV ESI,EBX
007cfbd9 : CALL 0x0043a270
007cfbde : MOV dword ptr [EBP + -0x10],0x1
007cfbe5 : MOV byte ptr [EBP + -0x4],0x0
007cfbe9 : LEA EDX,[EBP + -0x20]
007cfbec : PUSH EDX
007cfbed : JMP 0x007cfc39
007cfbef : MOV EAX,dword ptr [ESI]
007cfbf1 : MOV EDX,dword ptr [EAX]
007cfbf3 : PUSH 0x1
007cfbf5 : MOV ECX,ESI
007cfbf7 : CALL EDX
007cfbf9 : MOV dword ptr [EBP + -0x14],0x0
007cfc00 : JMP 0x007cfc05
007cfc02 : MOV EDI,dword ptr [EBP + 0x8]
007cfc05 : MOV ESI,dword ptr [EBP + -0x14]
007cfc08 : PUSH 0x1
007cfc0a : MOV ECX,ESI
007cfc0c : MOV EDX,EDI
007cfc0e : CALL 0x007cf300
007cfc13 : MOV dword ptr [EBX],0xcd4964
007cfc19 : MOV dword ptr [EBX + 0x4],ESI
007cfc1c : TEST ESI,ESI
007cfc1e : JZ 0x007cfc2a
007cfc20 : ADD ESI,0x2c
007cfc23 : PUSH ESI
007cfc24 : CALL dword ptr [0x00b850dc]
007cfc2a : MOV dword ptr [EBP + -0x10],0x1
007cfc31 : MOV byte ptr [EBP + -0x4],0x0
007cfc35 : LEA EAX,[EBP + -0x20]
007cfc38 : PUSH EAX
007cfc39 : CALL 0x0040ed80
007cfc3e : MOV EAX,EBX
007cfc40 : MOV ECX,dword ptr [EBP + -0xc]
007cfc43 : MOV dword ptr FS:[0x0],ECX
007cfc4a : POP ECX
007cfc4b : POP EDI
007cfc4c : POP ESI
007cfc4d : POP EBX
007cfc4e : MOV ESP,EBP
007cfc50 : POP EBP
007cfc51 : RET 0x10
