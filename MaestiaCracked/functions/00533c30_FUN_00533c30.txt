PROGRAM  : Maestia.exe
FUNCTION : FUN_00533c30
ENTRY    : 00533c30
BODY     : [[00533c30, 00533d8b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00533c30(int param_1)

{
  int iVar1;
  char cVar2;
  int *piVar3;
  int *piVar4;
  int *in_ECX;
  uint *puVar5;
  undefined **local_3c;
  int local_38;
  int *local_34;
  undefined1 local_30 [32];
  undefined1 local_10 [16];
  
  FUN_005266c0(*(undefined4 *)(*in_ECX + 8));
  iVar1 = *in_ECX;
  puVar5 = (uint *)(iVar1 + 8);
  FUN_00526bc0();
  *puVar5 = *puVar5 - 0x10;
  if (*puVar5 < *(uint *)(iVar1 + 0xc)) {
    FUN_00504f30();
  }
  local_30[0] = 0;
  FUN_00526400();
  iVar1 = *in_ECX;
  puVar5 = (uint *)(iVar1 + 8);
  local_30[0] = 1;
  *puVar5 = *puVar5 + 0x10;
  if (*(uint *)(iVar1 + 0x10) <= *puVar5) {
    FUN_00504050();
  }
  if (*puVar5 != 0) {
    FUN_005266c0(local_30);
  }
  if (param_1 == 0x55) {
    piVar3 = (int *)FUN_005270f0(*in_ECX);
    if (piVar3 == (int *)0x0) goto LAB_00533d72;
LAB_00533d25:
    local_38 = *in_ECX;
    local_34 = in_ECX + 9;
    local_3c = &PTR_LAB_00b8b144;
    (**(code **)(*piVar3 + 0x20))(local_38 + 0x78,&local_3c,3);
    local_3c = &PTR_LAB_00b85ff8;
  }
  else {
    FUN_005272e0(&param_1,*in_ECX,0xffffffff,0);
    local_10[0] = 0;
    cVar2 = FUN_005331f0(&param_1,local_10,in_ECX[8],0,0,0);
    if (cVar2 == '\0') {
      FUN_00526bc0();
      piVar4 = (int *)(param_1 + 8);
      *piVar4 = *piVar4 + -1;
    }
    else {
      piVar3 = (int *)FUN_005270f0(*in_ECX);
      FUN_00526bc0();
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
      piVar4 = (int *)(param_1 + 8);
      if (piVar3 != (int *)0x0) {
        if (*piVar4 == 0) {
          FUN_00525340();
        }
        goto LAB_00533d25;
      }
    }
    if (*piVar4 == 0) {
      FUN_00525340();
    }
  }
LAB_00533d72:
  FUN_00526bc0();
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00533c30 : SUB ESP,0x3c
00533c33 : PUSH ESI
00533c34 : PUSH EDI
00533c35 : MOV EDI,ECX
00533c37 : MOV EAX,dword ptr [EDI]
00533c39 : MOV ECX,dword ptr [EAX + 0x8]
00533c3c : PUSH ECX
00533c3d : LEA ECX,[ESP + 0x28]
00533c41 : CALL 0x005266c0
00533c46 : MOV ESI,dword ptr [EDI]
00533c48 : MOV ECX,dword ptr [ESI + 0x8]
00533c4b : ADD ESI,0x8
00533c4e : CALL 0x00526bc0
00533c53 : ADD dword ptr [ESI],-0x10
00533c56 : MOV EAX,dword ptr [ESI]
00533c58 : CMP EAX,dword ptr [ESI + 0x4]
00533c5b : JNC 0x00533c64
00533c5d : MOV ECX,ESI
00533c5f : CALL 0x00504f30
00533c64 : LEA ECX,[ESP + 0x14]
00533c68 : MOV byte ptr [ESP + 0x14],0x0
00533c6d : CALL 0x00526400
00533c72 : MOV ESI,dword ptr [EDI]
00533c74 : ADD ESI,0x8
00533c77 : MOV byte ptr [ESP + 0x14],0x1
00533c7c : ADD dword ptr [ESI],0x10
00533c7f : MOV EAX,dword ptr [ESI]
00533c81 : CMP EAX,dword ptr [ESI + 0x8]
00533c84 : JC 0x00533c8d
00533c86 : MOV ECX,ESI
00533c88 : CALL 0x00504050
00533c8d : MOV ECX,dword ptr [ESI]
00533c8f : TEST ECX,ECX
00533c91 : JZ 0x00533c9d
00533c93 : LEA EDX,[ESP + 0x14]
00533c97 : PUSH EDX
00533c98 : CALL 0x005266c0
00533c9d : CMP dword ptr [ESP + 0x48],0x55
00533ca2 : JNZ 0x00533cbb
00533ca4 : MOV EAX,dword ptr [EDI]
00533ca6 : PUSH EAX
00533ca7 : LEA ECX,[ESP + 0x28]
00533cab : CALL 0x005270f0
00533cb0 : MOV ESI,EAX
00533cb2 : TEST ESI,ESI
00533cb4 : JNZ 0x00533d25
00533cb6 : JMP 0x00533d72
00533cbb : MOV ECX,dword ptr [EDI]
00533cbd : PUSH 0x0
00533cbf : PUSH -0x1
00533cc1 : PUSH ECX
00533cc2 : LEA EDX,[ESP + 0x54]
00533cc6 : PUSH EDX
00533cc7 : LEA ECX,[ESP + 0x34]
00533ccb : CALL 0x005272e0
00533cd0 : MOV EAX,dword ptr [EDI + 0x20]
00533cd3 : PUSH 0x0
00533cd5 : PUSH 0x0
00533cd7 : PUSH 0x0
00533cd9 : PUSH EAX
00533cda : LEA EAX,[ESP + 0x44]
00533cde : PUSH EAX
00533cdf : LEA ECX,[ESP + 0x5c]
00533ce3 : PUSH ECX
00533ce4 : MOV ECX,dword ptr [EDI]
00533ce6 : MOV byte ptr [ESP + 0x4c],0x0
00533ceb : CALL 0x005331f0
00533cf0 : LEA ECX,[ESP + 0x34]
00533cf4 : TEST AL,AL
00533cf6 : JZ 0x00533d58
00533cf8 : MOV EDX,dword ptr [EDI]
00533cfa : PUSH EDX
00533cfb : CALL 0x005270f0
00533d00 : LEA ECX,[ESP + 0x34]
00533d04 : MOV ESI,EAX
00533d06 : CALL 0x00526bc0
00533d0b : MOV EAX,dword ptr [ESP + 0x48]
00533d0f : DEC dword ptr [EAX + 0x8]
00533d12 : MOV ECX,EAX
00533d14 : ADD EAX,0x8
00533d17 : TEST ESI,ESI
00533d19 : JZ 0x00533d68
00533d1b : CMP dword ptr [EAX],0x0
00533d1e : JNZ 0x00533d25
00533d20 : CALL 0x00525340
00533d25 : MOV EAX,dword ptr [EDI]
00533d27 : ADD EDI,0x24
00533d2a : PUSH 0x3
00533d2c : MOV dword ptr [ESP + 0x10],EAX
00533d30 : LEA ECX,[ESP + 0xc]
00533d34 : MOV dword ptr [ESP + 0xc],0xb8b144
00533d3c : MOV dword ptr [ESP + 0x14],EDI
00533d40 : MOV EDX,dword ptr [ESI]
00533d42 : MOV EDX,dword ptr [EDX + 0x20]
00533d45 : PUSH ECX
00533d46 : ADD EAX,0x78
00533d49 : PUSH EAX
00533d4a : MOV ECX,ESI
00533d4c : CALL EDX
00533d4e : MOV dword ptr [ESP + 0x8],0xb85ff8
00533d56 : JMP 0x00533d72
00533d58 : CALL 0x00526bc0
00533d5d : MOV EAX,dword ptr [ESP + 0x48]
00533d61 : MOV ECX,EAX
00533d63 : ADD EAX,0x8
00533d66 : DEC dword ptr [EAX]
00533d68 : CMP dword ptr [EAX],0x0
00533d6b : JNZ 0x00533d72
00533d6d : CALL 0x00525340
00533d72 : LEA ECX,[ESP + 0x14]
00533d76 : CALL 0x00526bc0
00533d7b : LEA ECX,[ESP + 0x24]
00533d7f : CALL 0x00526bc0
00533d84 : POP EDI
00533d85 : POP ESI
00533d86 : ADD ESP,0x3c
00533d89 : RET 0x4
