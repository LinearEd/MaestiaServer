PROGRAM  : Maestia.exe
FUNCTION : FUN_006e2570
ENTRY    : 006e2570
BODY     : [[006e2570, 006e26b1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006e2570(int *param_1)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  int iVar3;
  
  puVar1 = (undefined4 *)(**(code **)param_1[1])(param_1,1,0x2c);
  param_1[0x6a] = (int)puVar1;
  *puVar1 = FUN_006e2440;
  puVar1[3] = &LAB_006e2560;
  puVar1[8] = 0;
  puVar1[10] = 0;
  if (param_1[0x19] != 3) {
    *(undefined4 *)(*param_1 + 0x14) = 0x2f;
    (**(code **)*param_1)(param_1);
  }
  uVar2 = (**(code **)param_1[1])(param_1,1,0x80);
  puVar1[6] = uVar2;
  iVar3 = 0;
  do {
    uVar2 = (**(code **)(param_1[1] + 4))(param_1,1,0x1000);
    *(undefined4 *)(puVar1[6] + iVar3) = uVar2;
    iVar3 = iVar3 + 4;
  } while (iVar3 < 0x80);
  *(undefined1 *)(puVar1 + 7) = 1;
  if (*(char *)((int)param_1 + 0x5a) == '\0') {
    puVar1[4] = 0;
  }
  else {
    iVar3 = param_1[0x15];
    if (iVar3 < 8) {
      *(undefined4 *)(*param_1 + 0x14) = 0x38;
      *(undefined4 *)(*param_1 + 0x18) = 8;
      (**(code **)*param_1)(param_1);
    }
    if (0x100 < iVar3) {
      *(undefined4 *)(*param_1 + 0x14) = 0x39;
      *(undefined4 *)(*param_1 + 0x18) = 0x100;
      (**(code **)*param_1)(param_1);
    }
    uVar2 = (**(code **)(param_1[1] + 8))(param_1,1,iVar3,3);
    puVar1[4] = uVar2;
    puVar1[5] = iVar3;
  }
  if (param_1[0x13] != 0) {
    param_1[0x13] = 2;
  }
  if (param_1[0x13] == 2) {
    uVar2 = (**(code **)(param_1[1] + 4))(param_1,1,(param_1[0x17] + 2) * 6);
    puVar1[8] = uVar2;
    FUN_006e2370();
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006e2570 : PUSH ESI
006e2571 : MOV ESI,dword ptr [ESP + 0x8]
006e2575 : MOV EAX,dword ptr [ESI + 0x4]
006e2578 : MOV ECX,dword ptr [EAX]
006e257a : PUSH EDI
006e257b : PUSH 0x2c
006e257d : PUSH 0x1
006e257f : PUSH ESI
006e2580 : CALL ECX
006e2582 : MOV EDI,EAX
006e2584 : MOV dword ptr [ESI + 0x1a8],EDI
006e258a : ADD ESP,0xc
006e258d : MOV dword ptr [EDI],0x6e2440
006e2593 : MOV dword ptr [EDI + 0xc],0x6e2560
006e259a : MOV dword ptr [EDI + 0x20],0x0
006e25a1 : MOV dword ptr [EDI + 0x28],0x0
006e25a8 : CMP dword ptr [ESI + 0x64],0x3
006e25ac : JZ 0x006e25c1
006e25ae : MOV EDX,dword ptr [ESI]
006e25b0 : MOV dword ptr [EDX + 0x14],0x2f
006e25b7 : MOV EAX,dword ptr [ESI]
006e25b9 : MOV ECX,dword ptr [EAX]
006e25bb : PUSH ESI
006e25bc : CALL ECX
006e25be : ADD ESP,0x4
006e25c1 : MOV EDX,dword ptr [ESI + 0x4]
006e25c4 : MOV EAX,dword ptr [EDX]
006e25c6 : PUSH EBP
006e25c7 : PUSH 0x80
006e25cc : PUSH 0x1
006e25ce : PUSH ESI
006e25cf : CALL EAX
006e25d1 : ADD ESP,0xc
006e25d4 : MOV dword ptr [EDI + 0x18],EAX
006e25d7 : XOR EBP,EBP
006e25d9 : LEA ESP,[ESP]
006e25e0 : MOV ECX,dword ptr [ESI + 0x4]
006e25e3 : MOV EDX,dword ptr [ECX + 0x4]
006e25e6 : PUSH 0x1000
006e25eb : PUSH 0x1
006e25ed : PUSH ESI
006e25ee : CALL EDX
006e25f0 : MOV ECX,dword ptr [EDI + 0x18]
006e25f3 : MOV dword ptr [ECX + EBP*0x1],EAX
006e25f6 : ADD EBP,0x4
006e25f9 : ADD ESP,0xc
006e25fc : CMP EBP,0x80
006e2602 : JL 0x006e25e0
006e2604 : MOV byte ptr [EDI + 0x1c],0x1
006e2608 : CMP byte ptr [ESI + 0x5a],0x0
006e260c : JZ 0x006e266f
006e260e : MOV EBP,dword ptr [ESI + 0x54]
006e2611 : CMP EBP,0x8
006e2614 : JGE 0x006e2632
006e2616 : MOV EDX,dword ptr [ESI]
006e2618 : MOV dword ptr [EDX + 0x14],0x38
006e261f : MOV EAX,dword ptr [ESI]
006e2621 : MOV dword ptr [EAX + 0x18],0x8
006e2628 : MOV ECX,dword ptr [ESI]
006e262a : MOV EDX,dword ptr [ECX]
006e262c : PUSH ESI
006e262d : CALL EDX
006e262f : ADD ESP,0x4
006e2632 : CMP EBP,0x100
006e2638 : JLE 0x006e2656
006e263a : MOV EAX,dword ptr [ESI]
006e263c : MOV dword ptr [EAX + 0x14],0x39
006e2643 : MOV ECX,dword ptr [ESI]
006e2645 : MOV dword ptr [ECX + 0x18],0x100
006e264c : MOV EDX,dword ptr [ESI]
006e264e : MOV EAX,dword ptr [EDX]
006e2650 : PUSH ESI
006e2651 : CALL EAX
006e2653 : ADD ESP,0x4
006e2656 : MOV ECX,dword ptr [ESI + 0x4]
006e2659 : MOV EDX,dword ptr [ECX + 0x8]
006e265c : PUSH 0x3
006e265e : PUSH EBP
006e265f : PUSH 0x1
006e2661 : PUSH ESI
006e2662 : CALL EDX
006e2664 : ADD ESP,0x10
006e2667 : MOV dword ptr [EDI + 0x10],EAX
006e266a : MOV dword ptr [EDI + 0x14],EBP
006e266d : JMP 0x006e2676
006e266f : MOV dword ptr [EDI + 0x10],0x0
006e2676 : CMP dword ptr [ESI + 0x4c],0x0
006e267a : MOV ECX,0x2
006e267f : POP EBP
006e2680 : JZ 0x006e2685
006e2682 : MOV dword ptr [ESI + 0x4c],ECX
006e2685 : CMP dword ptr [ESI + 0x4c],ECX
006e2688 : JNZ 0x006e26af
006e268a : MOV EAX,dword ptr [ESI + 0x5c]
006e268d : MOV EDX,dword ptr [ESI + 0x4]
006e2690 : ADD EAX,ECX
006e2692 : MOV ECX,dword ptr [EDX + 0x4]
006e2695 : LEA EAX,[EAX + EAX*0x2]
006e2698 : ADD EAX,EAX
006e269a : PUSH EAX
006e269b : PUSH 0x1
006e269d : PUSH ESI
006e269e : CALL ECX
006e26a0 : ADD ESP,0xc
006e26a3 : MOV dword ptr [EDI + 0x20],EAX
006e26a6 : POP EDI
006e26a7 : MOV EAX,ESI
006e26a9 : POP ESI
006e26aa : JMP 0x006e2370
006e26af : POP EDI
006e26b0 : POP ESI
006e26b1 : RET
