PROGRAM  : Maestia.exe
FUNCTION : FUN_00865580
ENTRY    : 00865580
BODY     : [[00865580, 008656a1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00865580(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short sVar4;
  uint uVar5;
  short *psVar6;
  int unaff_ESI;
  int iVar7;
  int local_10;
  int local_c;
  undefined1 local_8 [4];
  
  if ((param_1 != 0) && (DAT_017247ec != 0)) {
    local_10 = -(uint)(*(int *)(DAT_017247ec + 0x28) != 0);
    iVar2 = local_10;
    iVar3 = DAT_017247ec;
joined_r0x008655aa:
    if (iVar2 != 0) {
      if (iVar3 != 0) {
        local_c = 0;
        FUN_00404160(&local_10,local_8,&local_c);
        iVar2 = local_10;
        if (((local_c != 0) && (*(short *)(local_c + 6) != 0)) &&
           (*(short *)(local_c + 0x9e) == (short)param_1)) {
          iVar7 = 0;
          psVar6 = (short *)(local_c + 0x48);
          do {
            sVar1 = *psVar6;
            if (sVar1 != 0) {
              uVar5 = 0;
              do {
                if (((byte)uVar5 < 0x21) && (*(int *)(unaff_ESI + 0x17f0 + (uVar5 & 0xff) * 4) != 0)
                   ) {
                  sVar4 = (short)*(undefined4 *)(unaff_ESI + 0x16e8 + (uVar5 & 0xff) * 4);
                }
                else {
                  sVar4 = 0;
                }
                if (sVar4 == sVar1) goto LAB_0086566d;
                uVar5 = uVar5 + 1;
              } while ((int)uVar5 < 0xc);
              uVar5 = 0x14;
              while( true ) {
                if (((byte)uVar5 < 0x21) && (*(int *)(unaff_ESI + 0x17f0 + (uVar5 & 0xff) * 4) != 0)
                   ) {
                  sVar4 = (short)*(undefined4 *)(unaff_ESI + 0x16e8 + (uVar5 & 0xff) * 4);
                }
                else {
                  sVar4 = 0;
                }
                if (sVar4 == sVar1) break;
                uVar5 = uVar5 + 1;
                iVar3 = DAT_017247ec;
                if (0x1d < (int)uVar5) goto joined_r0x008655aa;
              }
            }
LAB_0086566d:
            iVar7 = iVar7 + 1;
            psVar6 = psVar6 + 1;
          } while (iVar7 < 0xc);
          FUN_00863440(unaff_ESI,1,*(undefined2 *)(local_c + 6));
          iVar2 = local_10;
          iVar3 = DAT_017247ec;
        }
      }
      goto joined_r0x008655aa;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00865580 : PUSH EBP
00865581 : MOV EBP,ESP
00865583 : SUB ESP,0xc
00865586 : CMP dword ptr [EBP + 0x8],0x0
0086558a : PUSH EBX
0086558b : PUSH EDI
0086558c : JZ 0x0086569a
00865592 : MOV EDI,dword ptr [0x017247ec]
00865598 : TEST EDI,EDI
0086559a : JZ 0x0086569a
008655a0 : MOV EAX,dword ptr [EDI + 0x28]
008655a3 : NEG EAX
008655a5 : SBB EAX,EAX
008655a7 : MOV dword ptr [EBP + -0xc],EAX
008655aa : JZ 0x0086569a
008655b0 : TEST EDI,EDI
008655b2 : JZ 0x00865692
008655b8 : LEA EAX,[EBP + -0x8]
008655bb : PUSH EAX
008655bc : LEA ECX,[EBP + -0x4]
008655bf : PUSH ECX
008655c0 : LEA EDX,[EBP + -0xc]
008655c3 : PUSH EDX
008655c4 : MOV EAX,EDI
008655c6 : MOV dword ptr [EBP + -0x8],0x0
008655cd : CALL 0x00404160
008655d2 : MOV EAX,dword ptr [EBP + -0x8]
008655d5 : TEST EAX,EAX
008655d7 : JZ 0x0086568f
008655dd : MOVZX ECX,word ptr [EAX + 0x6]
008655e1 : TEST CX,CX
008655e4 : JZ 0x0086568f
008655ea : MOV CX,word ptr [EBP + 0x8]
008655ee : CMP word ptr [EAX + 0x9e],CX
008655f5 : JNZ 0x0086568f
008655fb : XOR EDI,EDI
008655fd : LEA EBX,[EAX + 0x48]
00865600 : MOVZX EDX,word ptr [EBX]
00865603 : TEST DX,DX
00865606 : JZ 0x0086566d
00865608 : XOR ECX,ECX
0086560a : LEA EBX,[EBX]
00865610 : CMP CL,0x21
00865613 : JNC 0x0086562b
00865615 : MOVZX EAX,CL
00865618 : CMP dword ptr [ESI + EAX*0x4 + 0x17f0],0x0
00865620 : JZ 0x0086562b
00865622 : MOV EAX,dword ptr [ESI + EAX*0x4 + 0x16e8]
00865629 : JMP 0x0086562d
0086562b : XOR EAX,EAX
0086562d : CMP AX,DX
00865630 : JZ 0x0086566a
00865632 : INC ECX
00865633 : CMP ECX,0xb
00865636 : JLE 0x00865610
00865638 : MOV ECX,0x14
0086563d : LEA ECX,[ECX]
00865640 : CMP CL,0x21
00865643 : JNC 0x0086565b
00865645 : MOVZX EAX,CL
00865648 : CMP dword ptr [ESI + EAX*0x4 + 0x17f0],0x0
00865650 : JZ 0x0086565b
00865652 : MOV EAX,dword ptr [ESI + EAX*0x4 + 0x16e8]
00865659 : JMP 0x0086565d
0086565b : XOR EAX,EAX
0086565d : CMP AX,DX
00865660 : JZ 0x0086566a
00865662 : INC ECX
00865663 : CMP ECX,0x1d
00865666 : JLE 0x00865640
00865668 : JMP 0x00865689
0086566a : MOV EAX,dword ptr [EBP + -0x8]
0086566d : INC EDI
0086566e : ADD EBX,0x2
00865671 : CMP EDI,0xc
00865674 : JL 0x00865600
00865676 : MOVZX ECX,word ptr [EAX + 0x6]
0086567a : PUSH ECX
0086567b : PUSH 0x1
0086567d : LEA ECX,[EAX + 0xa0]
00865683 : PUSH ESI
00865684 : CALL 0x00863440
00865689 : MOV EDI,dword ptr [0x017247ec]
0086568f : MOV EAX,dword ptr [EBP + -0xc]
00865692 : TEST EAX,EAX
00865694 : JNZ 0x008655b0
0086569a : POP EDI
0086569b : POP EBX
0086569c : MOV ESP,EBP
0086569e : POP EBP
0086569f : RET 0x4
