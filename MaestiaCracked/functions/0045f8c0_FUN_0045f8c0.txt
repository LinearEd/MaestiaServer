PROGRAM  : Maestia.exe
FUNCTION : FUN_0045f8c0
ENTRY    : 0045f8c0
BODY     : [[0045f8c0, 0045fa77]]

============================================================
DECOMPILED C CODE
============================================================

uint * FUN_0045f8c0(uint *param_1,int *param_2,int *param_3,undefined4 param_4)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  int *piVar8;
  int *local_8;
  
  local_8 = param_2 + (((int)param_3 - (int)param_2 >> 2) - ((int)param_3 - (int)param_2 >> 0x1f) >>
                      1);
  FUN_0045fa80(param_2,local_8,param_3 + -1,param_4);
  piVar7 = local_8 + 1;
  for (; param_2 < local_8; local_8 = local_8 + -1) {
    if ((*(float *)(local_8[-1] + 0x38) < *(float *)(*local_8 + 0x38)) ||
       (*(float *)(*local_8 + 0x38) < *(float *)(local_8[-1] + 0x38))) break;
  }
  piVar5 = piVar7;
  piVar6 = local_8;
  piVar3 = local_8;
  if (piVar7 < param_3) {
    do {
      piVar5 = piVar7;
      if ((*(float *)(*piVar7 + 0x38) < *(float *)(*local_8 + 0x38)) ||
         (*(float *)(*local_8 + 0x38) < *(float *)(*piVar7 + 0x38))) break;
      piVar7 = piVar7 + 1;
      piVar5 = piVar7;
    } while (piVar7 < param_3);
  }
joined_r0x0045f953:
  do {
    piVar2 = piVar5;
    piVar5 = piVar6;
    piVar4 = piVar3;
    if (param_3 <= piVar2) {
joined_r0x0045f98f:
      while (param_2 < piVar6) {
        piVar5 = piVar5 + -1;
        if (*(float *)(*piVar4 + 0x38) <= *(float *)(*piVar5 + 0x38)) {
          if (*(float *)(*piVar4 + 0x38) < *(float *)(*piVar5 + 0x38)) break;
          piVar4 = piVar4 + -1;
          if (piVar4 != piVar5) {
            iVar1 = *piVar4;
            *piVar4 = *piVar5;
            *piVar5 = iVar1;
            piVar6 = local_8;
          }
        }
        local_8 = piVar6 + -1;
        piVar6 = local_8;
      }
      if (piVar6 == param_2) {
        if (piVar2 == param_3) {
          param_1[1] = (uint)piVar7;
          *param_1 = (uint)piVar4;
          return param_1;
        }
        if ((piVar7 != piVar2) && (piVar4 != piVar7)) {
          iVar1 = *piVar4;
          *piVar4 = *piVar7;
          *piVar7 = iVar1;
        }
        piVar7 = piVar7 + 1;
        piVar5 = piVar2 + 1;
        piVar3 = piVar4 + 1;
        if (piVar4 != piVar2) {
          iVar1 = *piVar4;
          *piVar4 = *piVar2;
          *piVar2 = iVar1;
          piVar6 = local_8;
        }
      }
      else {
        local_8 = piVar6 + -1;
        piVar6 = local_8;
        if (piVar2 == param_3) {
          piVar3 = piVar4 + -1;
          if (local_8 != piVar3) {
            iVar1 = *local_8;
            *local_8 = *piVar3;
            *piVar3 = iVar1;
          }
          piVar7 = piVar7 + -1;
          piVar5 = piVar2;
          if (piVar3 != piVar7) {
            iVar1 = *piVar3;
            *piVar3 = *piVar7;
            *piVar7 = iVar1;
          }
        }
        else {
          piVar5 = piVar2 + 1;
          piVar3 = piVar4;
          if (piVar2 != local_8) {
            iVar1 = *piVar2;
            *piVar2 = *local_8;
            *local_8 = iVar1;
          }
        }
      }
      goto joined_r0x0045f953;
    }
    piVar8 = piVar7;
    if (*(float *)(*piVar2 + 0x38) <= *(float *)(*piVar3 + 0x38)) {
      if (*(float *)(*piVar2 + 0x38) < *(float *)(*piVar3 + 0x38)) goto joined_r0x0045f98f;
      piVar8 = piVar7 + 1;
      if (piVar7 != piVar2) {
        iVar1 = *piVar7;
        *piVar7 = *piVar2;
        *piVar2 = iVar1;
      }
    }
    piVar5 = piVar2 + 1;
    piVar7 = piVar8;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0045f8c0 : PUSH EBP
0045f8c1 : MOV EBP,ESP
0045f8c3 : MOV ECX,dword ptr [EBP + 0xc]
0045f8c6 : SUB ESP,0x8
0045f8c9 : PUSH EBX
0045f8ca : PUSH ESI
0045f8cb : MOV ESI,dword ptr [EBP + 0x10]
0045f8ce : MOV EAX,ESI
0045f8d0 : SUB EAX,ECX
0045f8d2 : SAR EAX,0x2
0045f8d5 : CDQ
0045f8d6 : SUB EAX,EDX
0045f8d8 : MOV EDX,dword ptr [EBP + 0x14]
0045f8db : PUSH EDI
0045f8dc : SAR EAX,0x1
0045f8de : LEA EDI,[ECX + EAX*0x4]
0045f8e1 : PUSH EDX
0045f8e2 : LEA EAX,[ESI + -0x4]
0045f8e5 : PUSH EAX
0045f8e6 : PUSH EDI
0045f8e7 : PUSH ECX
0045f8e8 : CALL 0x0045fa80
0045f8ed : MOV ECX,dword ptr [EBP + 0xc]
0045f8f0 : ADD ESP,0x10
0045f8f3 : MOV EAX,EDI
0045f8f5 : LEA ESI,[EDI + 0x4]
0045f8f8 : CMP ECX,EDI
0045f8fa : JNC 0x0045f920
0045f8fc : LEA ESP,[ESP]
0045f900 : MOV EDX,dword ptr [EAX + -0x4]
0045f903 : MOVSS XMM0,dword ptr [EDX + 0x38]
0045f908 : MOV EDX,dword ptr [EAX]
0045f90a : MOVSS XMM1,dword ptr [EDX + 0x38]
0045f90f : COMISS XMM1,XMM0
0045f912 : JA 0x0045f920
0045f914 : COMISS XMM0,XMM1
0045f917 : JA 0x0045f920
0045f919 : ADD EAX,-0x4
0045f91c : CMP ECX,EAX
0045f91e : JC 0x0045f900
0045f920 : MOV ECX,dword ptr [EBP + 0x10]
0045f923 : CMP ESI,ECX
0045f925 : JNC 0x0045f948
0045f927 : MOV EDX,dword ptr [EAX]
0045f929 : MOVSS XMM1,dword ptr [EDX + 0x38]
0045f92e : MOV EDI,EDI
0045f930 : MOV EDX,dword ptr [ESI]
0045f932 : MOVSS XMM0,dword ptr [EDX + 0x38]
0045f937 : COMISS XMM1,XMM0
0045f93a : JA 0x0045f948
0045f93c : COMISS XMM0,XMM1
0045f93f : JA 0x0045f948
0045f941 : ADD ESI,0x4
0045f944 : CMP ESI,ECX
0045f946 : JC 0x0045f930
0045f948 : MOV EBX,EAX
0045f94a : MOV ECX,ESI
0045f94c : MOV dword ptr [EBP + -0x4],EBX
0045f94f : NOP
0045f950 : CMP ECX,dword ptr [EBP + 0x10]
0045f953 : JNC 0x0045f98c
0045f955 : MOV EDX,dword ptr [EAX]
0045f957 : MOVSS XMM0,dword ptr [EDX + 0x38]
0045f95c : MOV EDX,dword ptr [ECX]
0045f95e : MOVSS XMM1,dword ptr [EDX + 0x38]
0045f963 : COMISS XMM1,XMM0
0045f966 : JA 0x0045f984
0045f968 : COMISS XMM0,XMM1
0045f96b : JA 0x0045f98c
0045f96d : MOV EDX,ESI
0045f96f : ADD ESI,0x4
0045f972 : CMP EDX,ECX
0045f974 : JZ 0x0045f984
0045f976 : MOV EDI,dword ptr [EDX]
0045f978 : MOV dword ptr [EBP + -0x8],EDI
0045f97b : MOV EDI,dword ptr [ECX]
0045f97d : MOV dword ptr [EDX],EDI
0045f97f : MOV EDX,dword ptr [EBP + -0x8]
0045f982 : MOV dword ptr [ECX],EDX
0045f984 : ADD ECX,0x4
0045f987 : CMP ECX,dword ptr [EBP + 0x10]
0045f98a : JC 0x0045f955
0045f98c : CMP EBX,dword ptr [EBP + 0xc]
0045f98f : JBE 0x0045f9cf
0045f991 : LEA EDX,[EBX + -0x4]
0045f994 : MOV EDI,dword ptr [EDX]
0045f996 : MOVSS XMM0,dword ptr [EDI + 0x38]
0045f99b : MOV EDI,dword ptr [EAX]
0045f99d : MOVSS XMM1,dword ptr [EDI + 0x38]
0045f9a2 : COMISS XMM1,XMM0
0045f9a5 : JA 0x0045f9be
0045f9a7 : COMISS XMM0,XMM1
0045f9aa : JA 0x0045f9cc
0045f9ac : SUB EAX,0x4
0045f9af : CMP EAX,EDX
0045f9b1 : JZ 0x0045f9be
0045f9b3 : MOV EBX,dword ptr [EDX]
0045f9b5 : MOV EDI,dword ptr [EAX]
0045f9b7 : MOV dword ptr [EAX],EBX
0045f9b9 : MOV EBX,dword ptr [EBP + -0x4]
0045f9bc : MOV dword ptr [EDX],EDI
0045f9be : SUB EBX,0x4
0045f9c1 : SUB EDX,0x4
0045f9c4 : MOV dword ptr [EBP + -0x4],EBX
0045f9c7 : CMP dword ptr [EBP + 0xc],EBX
0045f9ca : JC 0x0045f994
0045f9cc : CMP EBX,dword ptr [EBP + 0xc]
0045f9cf : JNZ 0x0045fa15
0045f9d1 : CMP ECX,dword ptr [EBP + 0x10]
0045f9d4 : JZ 0x0045fa67
0045f9da : CMP ESI,ECX
0045f9dc : JZ 0x0045f9ea
0045f9de : CMP EAX,ESI
0045f9e0 : JZ 0x0045f9ea
0045f9e2 : MOV EDI,dword ptr [ESI]
0045f9e4 : MOV EDX,dword ptr [EAX]
0045f9e6 : MOV dword ptr [EAX],EDI
0045f9e8 : MOV dword ptr [ESI],EDX
0045f9ea : MOV EDX,ECX
0045f9ec : MOV EDI,EAX
0045f9ee : ADD ESI,0x4
0045f9f1 : ADD ECX,0x4
0045f9f4 : ADD EAX,0x4
0045f9f7 : CMP EDI,EDX
0045f9f9 : JZ 0x0045f950
0045f9ff : MOV EBX,dword ptr [EDI]
0045fa01 : MOV dword ptr [EBP + -0x8],EBX
0045fa04 : MOV EBX,dword ptr [EDX]
0045fa06 : MOV dword ptr [EDI],EBX
0045fa08 : MOV EDI,dword ptr [EBP + -0x8]
0045fa0b : MOV EBX,dword ptr [EBP + -0x4]
0045fa0e : MOV dword ptr [EDX],EDI
0045fa10 : JMP 0x0045f950
0045fa15 : SUB EBX,0x4
0045fa18 : MOV dword ptr [EBP + -0x4],EBX
0045fa1b : CMP ECX,dword ptr [EBP + 0x10]
0045fa1e : JNZ 0x0045fa47
0045fa20 : SUB EAX,0x4
0045fa23 : CMP EBX,EAX
0045fa25 : JZ 0x0045fa2f
0045fa27 : MOV EDI,dword ptr [EAX]
0045fa29 : MOV EDX,dword ptr [EBX]
0045fa2b : MOV dword ptr [EBX],EDI
0045fa2d : MOV dword ptr [EAX],EDX
0045fa2f : SUB ESI,0x4
0045fa32 : CMP EAX,ESI
0045fa34 : JZ 0x0045f950
0045fa3a : MOV EDI,dword ptr [ESI]
0045fa3c : MOV EDX,dword ptr [EAX]
0045fa3e : MOV dword ptr [EAX],EDI
0045fa40 : MOV dword ptr [ESI],EDX
0045fa42 : JMP 0x0045f950
0045fa47 : MOV EDX,ECX
0045fa49 : ADD ECX,0x4
0045fa4c : CMP EDX,EBX
0045fa4e : JZ 0x0045f950
0045fa54 : MOV EDI,dword ptr [EDX]
0045fa56 : MOV dword ptr [EBP + -0x8],EDI
0045fa59 : MOV EDI,dword ptr [EBX]
0045fa5b : MOV dword ptr [EDX],EDI
0045fa5d : MOV EDX,dword ptr [EBP + -0x8]
0045fa60 : MOV dword ptr [EBX],EDX
0045fa62 : JMP 0x0045f950
0045fa67 : MOV ECX,dword ptr [EBP + 0x8]
0045fa6a : POP EDI
0045fa6b : MOV dword ptr [ECX + 0x4],ESI
0045fa6e : POP ESI
0045fa6f : MOV dword ptr [ECX],EAX
0045fa71 : MOV EAX,ECX
0045fa73 : POP EBX
0045fa74 : MOV ESP,EBP
0045fa76 : POP EBP
0045fa77 : RET
