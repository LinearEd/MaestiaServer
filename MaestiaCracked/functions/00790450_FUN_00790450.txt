PROGRAM  : Maestia.exe
FUNCTION : FUN_00790450
ENTRY    : 00790450
BODY     : [[00790450, 007905df]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00790450(void)

{
  wchar_t wVar1;
  int *piVar2;
  LONG _Val;
  wchar_t *pwVar3;
  int iVar4;
  int *piVar5;
  int unaff_EDI;
  undefined1 local_230 [4];
  undefined2 local_22c;
  undefined4 local_21c;
  uint local_218;
  wchar_t local_214;
  undefined1 local_212 [510];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b161b9;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(unaff_EDI + 0x14) != 0) {
    local_218 = 7;
    local_21c = 0;
    local_22c = 0;
    local_8 = 0;
    _Val = InterlockedIncrement((LONG *)&DAT_01725230);
    FUN_00406360(L"FxSceneNode",0xb);
    __itow_s(_Val,&local_214,0x100,10);
    FUN_00404870(&DAT_00c13ca8,1);
    pwVar3 = &local_214;
    do {
      wVar1 = *pwVar3;
      pwVar3 = pwVar3 + 1;
    } while (wVar1 != L'\0');
    FUN_00404870(&local_214,(int)pwVar3 - (int)local_212 >> 1);
    FUN_00405eb0(local_230,0,0xffffffff);
    iVar4 = (**(code **)(**(int **)(unaff_EDI + 0x14) + 0x48))();
    piVar5 = (int *)**(int **)(iVar4 + 8);
    iVar4 = (**(code **)(**(int **)(unaff_EDI + 0x14) + 0x48))();
    if (piVar5 != *(int **)(iVar4 + 8)) {
      do {
        piVar2 = (int *)piVar5[9];
        iVar4 = (**(code **)(*piVar2 + 0x1c))();
        if ((iVar4 == 4) || (iVar4 = (**(code **)(*piVar2 + 0x1c))(), iVar4 - 5U < 3)) {
          FUN_00405eb0(local_230,0,0xffffffff);
        }
        piVar5 = (int *)*piVar5;
        iVar4 = (**(code **)(**(int **)(unaff_EDI + 0x14) + 0x48))();
      } while (piVar5 != (int *)*(int *)(iVar4 + 8));
    }
    local_8 = 0xffffffff;
    if (7 < local_218) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_218 = 7;
    local_21c = 0;
    local_22c = 0;
  }
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00790450 : PUSH EBP
00790451 : MOV EBP,ESP
00790453 : PUSH -0x1
00790455 : PUSH 0xb161b9
0079045a : MOV EAX,FS:[0x0]
00790460 : PUSH EAX
00790461 : SUB ESP,0x220
00790467 : MOV EAX,[0x00d66fa0]
0079046c : XOR EAX,EBP
0079046e : MOV dword ptr [EBP + -0x10],EAX
00790471 : PUSH EBX
00790472 : PUSH ESI
00790473 : PUSH EAX
00790474 : LEA EAX,[EBP + -0xc]
00790477 : MOV FS:[0x0],EAX
0079047d : XOR EBX,EBX
0079047f : CMP dword ptr [EDI + 0x14],EBX
00790482 : JZ 0x007905c5
00790488 : XOR EAX,EAX
0079048a : MOV dword ptr [EBP + 0xfffffdec],0x7
00790494 : MOV dword ptr [EBP + 0xfffffde8],EBX
0079049a : MOV word ptr [EBP + 0xfffffdd8],AX
007904a1 : MOV dword ptr [EBP + -0x4],EBX
007904a4 : PUSH 0x1725230
007904a9 : CALL dword ptr [0x00b850dc]
007904af : PUSH 0xb
007904b1 : PUSH 0xc13c90
007904b6 : LEA ECX,[EBP + 0xfffffdd4]
007904bc : MOV ESI,EAX
007904be : CALL 0x00406360
007904c3 : PUSH 0xa
007904c5 : PUSH 0x100
007904ca : LEA ECX,[EBP + 0xfffffdf0]
007904d0 : PUSH ECX
007904d1 : PUSH ESI
007904d2 : CALL 0x0063706a
007904d7 : ADD ESP,0x10
007904da : PUSH 0x1
007904dc : PUSH 0xc13ca8
007904e1 : LEA ESI,[EBP + 0xfffffdd4]
007904e7 : CALL 0x00404870
007904ec : LEA EAX,[EBP + 0xfffffdf0]
007904f2 : LEA EDX,[EAX + 0x2]
007904f5 : MOV CX,word ptr [EAX]
007904f8 : ADD EAX,0x2
007904fb : CMP CX,BX
007904fe : JNZ 0x007904f5
00790500 : SUB EAX,EDX
00790502 : SAR EAX,0x1
00790504 : PUSH EAX
00790505 : LEA EDX,[EBP + 0xfffffdf0]
0079050b : PUSH EDX
0079050c : LEA ESI,[EBP + 0xfffffdd4]
00790512 : CALL 0x00404870
00790517 : MOV EAX,dword ptr [EDI + 0x14]
0079051a : PUSH -0x1
0079051c : PUSH EBX
0079051d : MOV ECX,ESI
0079051f : PUSH ECX
00790520 : LEA ECX,[EAX + 0xc]
00790523 : CALL 0x00405eb0
00790528 : MOV ECX,dword ptr [EDI + 0x14]
0079052b : MOV EDX,dword ptr [ECX]
0079052d : MOV EAX,dword ptr [EDX + 0x48]
00790530 : CALL EAX
00790532 : MOV EAX,dword ptr [EAX + 0x8]
00790535 : MOV ECX,dword ptr [EDI + 0x14]
00790538 : MOV EDX,dword ptr [ECX]
0079053a : MOV ESI,dword ptr [EAX]
0079053c : MOV EAX,dword ptr [EDX + 0x48]
0079053f : CALL EAX
00790541 : CMP ESI,dword ptr [EAX + 0x8]
00790544 : JZ 0x00790591
00790546 : MOV EBX,dword ptr [ESI + 0x24]
00790549 : MOV EDX,dword ptr [EBX]
0079054b : MOV EAX,dword ptr [EDX + 0x1c]
0079054e : MOV ECX,EBX
00790550 : CALL EAX
00790552 : CMP EAX,0x4
00790555 : JZ 0x00790568
00790557 : MOV EDX,dword ptr [EBX]
00790559 : MOV EAX,dword ptr [EDX + 0x1c]
0079055c : MOV ECX,EBX
0079055e : CALL EAX
00790560 : ADD EAX,-0x5
00790563 : CMP EAX,0x2
00790566 : JA 0x0079057e
00790568 : PUSH -0x1
0079056a : PUSH 0x0
0079056c : LEA ECX,[EBP + 0xfffffdd4]
00790572 : PUSH ECX
00790573 : LEA ECX,[EBX + 0x328]
00790579 : CALL 0x00405eb0
0079057e : MOV ECX,dword ptr [EDI + 0x14]
00790581 : MOV EDX,dword ptr [ECX]
00790583 : MOV EAX,dword ptr [EDX + 0x48]
00790586 : MOV ESI,dword ptr [ESI]
00790588 : CALL EAX
0079058a : CMP ESI,dword ptr [EAX + 0x8]
0079058d : JNZ 0x00790546
0079058f : XOR EBX,EBX
00790591 : MOV dword ptr [EBP + -0x4],0xffffffff
00790598 : CMP dword ptr [EBP + 0xfffffdec],0x8
0079059f : JC 0x007905ac
007905a1 : MOV ECX,dword ptr [EBP + 0xfffffdd8]
007905a7 : CALL 0x006f04e0
007905ac : XOR ECX,ECX
007905ae : MOV dword ptr [EBP + 0xfffffdec],0x7
007905b8 : MOV dword ptr [EBP + 0xfffffde8],EBX
007905be : MOV word ptr [EBP + 0xfffffdd8],CX
007905c5 : MOV ECX,dword ptr [EBP + -0xc]
007905c8 : MOV dword ptr FS:[0x0],ECX
007905cf : POP ECX
007905d0 : POP ESI
007905d1 : POP EBX
007905d2 : MOV ECX,dword ptr [EBP + -0x10]
007905d5 : XOR ECX,EBP
007905d7 : CALL 0x00633e6b
007905dc : MOV ESP,EBP
007905de : POP EBP
007905df : RET
