PROGRAM  : Maestia.exe
FUNCTION : FUN_00477880
ENTRY    : 00477880
BODY     : [[00477880, 00477b1a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004779a0) */
/* WARNING: Removing unreachable block (ram,0x004779b0) */
/* WARNING: Removing unreachable block (ram,0x004779b9) */
/* WARNING: Removing unreachable block (ram,0x004779bc) */
/* WARNING: Removing unreachable block (ram,0x004779ac) */
/* WARNING: Removing unreachable block (ram,0x004779c9) */
/* WARNING: Removing unreachable block (ram,0x004779d9) */
/* WARNING: Removing unreachable block (ram,0x004779e4) */
/* WARNING: Removing unreachable block (ram,0x004779e0) */
/* WARNING: Removing unreachable block (ram,0x004779d4) */
/* WARNING: Removing unreachable block (ram,0x004779e7) */
/* WARNING: Removing unreachable block (ram,0x004779f7) */
/* WARNING: Removing unreachable block (ram,0x004779ff) */

void FUN_00477880(int param_1,undefined4 param_2,int *param_3)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  undefined4 uVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  undefined1 local_60 [40];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  int local_1c;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7bf38;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_3 + 0x25) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_38);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_60,&DAT_00ced890);
  }
  local_18 = param_3;
  FUN_00477b50(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar7 = (int *)*param_3;
  if (*(char *)((int)piVar7 + 0x25) == '\0') {
    if (*(char *)(param_3[2] + 0x25) == '\0') {
      piVar7 = (int *)param_3[2];
    }
  }
  else {
    piVar7 = (int *)param_3[2];
  }
  piVar6 = (int *)param_3[1];
  if (*(char *)((int)piVar7 + 0x25) == '\0') {
    piVar7[1] = (int)piVar6;
  }
  if (*(int **)(*(int *)(param_1 + 4) + 4) == param_3) {
    *(int **)(*(int *)(param_1 + 4) + 4) = piVar7;
  }
  else if ((int *)*piVar6 == param_3) {
    *piVar6 = (int)piVar7;
  }
  else {
    piVar6[2] = (int)piVar7;
  }
  if ((int *)**(undefined4 **)(param_1 + 4) == param_3) {
    piVar5 = piVar6;
    if (*(char *)((int)piVar7 + 0x25) == '\0') {
      cVar1 = *(char *)(*piVar7 + 0x25);
      piVar2 = (int *)*piVar7;
      piVar5 = piVar7;
      while (piVar3 = piVar2, cVar1 == '\0') {
        piVar2 = (int *)*piVar3;
        cVar1 = *(char *)((int)piVar2 + 0x25);
        piVar5 = piVar3;
      }
    }
    **(undefined4 **)(param_1 + 4) = piVar5;
  }
  local_1c = *(int *)(param_1 + 4);
  if (*(int **)(local_1c + 8) == param_3) {
    if (*(char *)((int)piVar7 + 0x25) == '\0') {
      uVar4 = FUN_004777a0();
      *(undefined4 *)(local_1c + 8) = uVar4;
    }
    else {
      *(int **)(local_1c + 8) = piVar6;
    }
  }
  if ((char)local_18[9] == '\x01') {
    if (piVar7 != *(int **)(*(int *)(param_1 + 4) + 4)) {
      do {
        piVar5 = piVar6;
        if ((char)piVar7[9] != '\x01') break;
        piVar6 = (int *)*piVar5;
        if (piVar7 == piVar6) {
          piVar6 = (int *)piVar5[2];
          if ((char)piVar6[9] == '\0') {
            *(undefined1 *)(piVar6 + 9) = 1;
            *(undefined1 *)(piVar5 + 9) = 0;
            FUN_004777c0(param_1);
            piVar6 = (int *)piVar5[2];
          }
          if (*(char *)((int)piVar6 + 0x25) == '\0') {
            if ((*(char *)(*piVar6 + 0x24) != '\x01') || (*(char *)(piVar6[2] + 0x24) != '\x01')) {
              if (*(char *)(piVar6[2] + 0x24) == '\x01') {
                *(undefined1 *)(*piVar6 + 0x24) = 1;
                *(undefined1 *)(piVar6 + 9) = 0;
                FUN_00477820(param_1);
                piVar6 = (int *)piVar5[2];
              }
              *(char *)(piVar6 + 9) = (char)piVar5[9];
              *(undefined1 *)(piVar5 + 9) = 1;
              *(undefined1 *)(piVar6[2] + 0x24) = 1;
              FUN_004777c0(param_1);
              break;
            }
LAB_00477ac7:
            *(undefined1 *)(piVar6 + 9) = 0;
          }
        }
        else {
          if ((char)piVar6[9] == '\0') {
            *(undefined1 *)(piVar6 + 9) = 1;
            *(undefined1 *)(piVar5 + 9) = 0;
            FUN_00477820(param_1);
            piVar6 = (int *)*piVar5;
          }
          if (*(char *)((int)piVar6 + 0x25) == '\0') {
            if ((*(char *)(piVar6[2] + 0x24) == '\x01') && (*(char *)(*piVar6 + 0x24) == '\x01'))
            goto LAB_00477ac7;
            if (*(char *)(*piVar6 + 0x24) == '\x01') {
              *(undefined1 *)(piVar6[2] + 0x24) = 1;
              *(undefined1 *)(piVar6 + 9) = 0;
              FUN_004777c0(param_1);
              piVar6 = (int *)*piVar5;
            }
            *(char *)(piVar6 + 9) = (char)piVar5[9];
            *(undefined1 *)(piVar5 + 9) = 1;
            *(undefined1 *)(*piVar6 + 0x24) = 1;
            FUN_00477820(param_1);
            break;
          }
        }
        piVar6 = (int *)piVar5[1];
        piVar7 = piVar5;
      } while (piVar5 != *(int **)(*(int *)(param_1 + 4) + 4));
    }
    *(undefined1 *)(piVar7 + 9) = 1;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00477880 : PUSH EBP
00477881 : MOV EBP,ESP
00477883 : PUSH -0x1
00477885 : PUSH 0xb7bf38
0047788a : MOV EAX,FS:[0x0]
00477890 : PUSH EAX
00477891 : SUB ESP,0x50
00477894 : PUSH EBX
00477895 : PUSH ESI
00477896 : PUSH EDI
00477897 : MOV EAX,[0x00d66fa0]
0047789c : XOR EAX,EBP
0047789e : PUSH EAX
0047789f : LEA EAX,[EBP + -0xc]
004778a2 : MOV FS:[0x0],EAX
004778a8 : MOV EAX,dword ptr [EBP + 0x10]
004778ab : CMP byte ptr [EAX + 0x25],0x0
004778af : JZ 0x004778ed
004778b1 : PUSH 0x1b
004778b3 : XOR ESI,ESI
004778b5 : PUSH 0xcca4a8
004778ba : LEA ECX,[EBP + -0x34]
004778bd : MOV dword ptr [EBP + -0x1c],0xf
004778c4 : MOV dword ptr [EBP + -0x20],ESI
004778c7 : MOV byte ptr [EBP + -0x30],0x0
004778cb : CALL 0x00404b50
004778d0 : MOV dword ptr [EBP + -0x4],ESI
004778d3 : LEA EAX,[EBP + -0x34]
004778d6 : PUSH EAX
004778d7 : LEA ECX,[EBP + -0x5c]
004778da : CALL 0x00403c10
004778df : PUSH 0xced890
004778e4 : LEA ECX,[EBP + -0x5c]
004778e7 : PUSH ECX
004778e8 : CALL 0x006409eb
004778ed : MOV EBX,EAX
004778ef : LEA EDX,[EBP + 0x10]
004778f2 : MOV dword ptr [EBP + -0x14],EBX
004778f5 : CALL 0x00477b50
004778fa : MOV ECX,dword ptr [EBX]
004778fc : CMP byte ptr [ECX + 0x25],0x0
00477900 : JZ 0x00477907
00477902 : MOV EDI,dword ptr [EBX + 0x8]
00477905 : JMP 0x00477921
00477907 : MOV EDX,dword ptr [EBX + 0x8]
0047790a : CMP byte ptr [EDX + 0x25],0x0
0047790e : JZ 0x00477914
00477910 : MOV EDI,ECX
00477912 : JMP 0x00477921
00477914 : MOV EAX,dword ptr [EBP + 0x10]
00477917 : MOV EDI,dword ptr [EAX + 0x8]
0047791a : LEA EDX,[EAX + 0x8]
0047791d : CMP EAX,EBX
0047791f : JNZ 0x004779a0
00477921 : CMP byte ptr [EDI + 0x25],0x0
00477925 : MOV ESI,dword ptr [EBX + 0x4]
00477928 : JNZ 0x0047792d
0047792a : MOV dword ptr [EDI + 0x4],ESI
0047792d : MOV EDX,dword ptr [EBP + 0x8]
00477930 : MOV EAX,dword ptr [EDX + 0x4]
00477933 : CMP dword ptr [EAX + 0x4],EBX
00477936 : JNZ 0x0047793d
00477938 : MOV dword ptr [EAX + 0x4],EDI
0047793b : JMP 0x00477948
0047793d : CMP dword ptr [ESI],EBX
0047793f : JNZ 0x00477945
00477941 : MOV dword ptr [ESI],EDI
00477943 : JMP 0x00477948
00477945 : MOV dword ptr [ESI + 0x8],EDI
00477948 : MOV EAX,dword ptr [EDX + 0x4]
0047794b : CMP dword ptr [EAX],EBX
0047794d : JNZ 0x00477972
0047794f : CMP byte ptr [EDI + 0x25],0x0
00477953 : JZ 0x00477959
00477955 : MOV ECX,ESI
00477957 : JMP 0x0047796d
00477959 : MOV EAX,dword ptr [EDI]
0047795b : CMP byte ptr [EAX + 0x25],0x0
0047795f : MOV ECX,EDI
00477961 : JNZ 0x0047796d
00477963 : MOV ECX,EAX
00477965 : MOV EAX,dword ptr [ECX]
00477967 : CMP byte ptr [EAX + 0x25],0x0
0047796b : JZ 0x00477963
0047796d : MOV EAX,dword ptr [EDX + 0x4]
00477970 : MOV dword ptr [EAX],ECX
00477972 : MOV ECX,dword ptr [EDX + 0x4]
00477975 : MOV dword ptr [EBP + -0x18],ECX
00477978 : CMP dword ptr [ECX + 0x8],EBX
0047797b : JNZ 0x00477a02
00477981 : CMP byte ptr [EDI + 0x25],0x0
00477985 : JZ 0x0047798e
00477987 : MOV EAX,ESI
00477989 : MOV dword ptr [ECX + 0x8],EAX
0047798c : JMP 0x00477a02
0047798e : MOV EAX,EDI
00477990 : CALL 0x004777a0
00477995 : MOV ECX,dword ptr [EBP + -0x18]
00477998 : MOV EDX,dword ptr [EBP + 0x8]
0047799b : MOV dword ptr [ECX + 0x8],EAX
0047799e : JMP 0x00477a02
004779a0 : MOV dword ptr [ECX + 0x4],EAX
004779a3 : MOV ECX,dword ptr [EBX]
004779a5 : MOV dword ptr [EAX],ECX
004779a7 : CMP EAX,dword ptr [EBX + 0x8]
004779aa : JNZ 0x004779b0
004779ac : MOV ESI,EAX
004779ae : JMP 0x004779c9
004779b0 : CMP byte ptr [EDI + 0x25],0x0
004779b4 : MOV ESI,dword ptr [EAX + 0x4]
004779b7 : JNZ 0x004779bc
004779b9 : MOV dword ptr [EDI + 0x4],ESI
004779bc : MOV dword ptr [ESI],EDI
004779be : MOV ECX,dword ptr [EBX + 0x8]
004779c1 : MOV dword ptr [EDX],ECX
004779c3 : MOV EDX,dword ptr [EBX + 0x8]
004779c6 : MOV dword ptr [EDX + 0x4],EAX
004779c9 : MOV ECX,dword ptr [EBP + 0x8]
004779cc : MOV ECX,dword ptr [ECX + 0x4]
004779cf : CMP dword ptr [ECX + 0x4],EBX
004779d2 : JNZ 0x004779d9
004779d4 : MOV dword ptr [ECX + 0x4],EAX
004779d7 : JMP 0x004779e7
004779d9 : MOV ECX,dword ptr [EBX + 0x4]
004779dc : CMP dword ptr [ECX],EBX
004779de : JNZ 0x004779e4
004779e0 : MOV dword ptr [ECX],EAX
004779e2 : JMP 0x004779e7
004779e4 : MOV dword ptr [ECX + 0x8],EAX
004779e7 : MOV EDX,dword ptr [EBX + 0x4]
004779ea : MOV dword ptr [EAX + 0x4],EDX
004779ed : LEA ECX,[EBX + 0x24]
004779f0 : ADD EAX,0x24
004779f3 : CMP EAX,ECX
004779f5 : JZ 0x004779ff
004779f7 : MOV BL,byte ptr [ECX]
004779f9 : MOV DL,byte ptr [EAX]
004779fb : MOV byte ptr [EAX],BL
004779fd : MOV byte ptr [ECX],DL
004779ff : MOV EDX,dword ptr [EBP + 0x8]
00477a02 : MOV EAX,dword ptr [EBP + -0x14]
00477a05 : MOV BL,0x1
00477a07 : CMP byte ptr [EAX + 0x24],BL
00477a0a : JNZ 0x00477b13
00477a10 : MOV ECX,dword ptr [EDX + 0x4]
00477a13 : CMP EDI,dword ptr [ECX + 0x4]
00477a16 : JZ 0x00477b10
00477a1c : LEA ESP,[ESP]
00477a20 : CMP byte ptr [EDI + 0x24],BL
00477a23 : JNZ 0x00477b10
00477a29 : MOV ECX,dword ptr [ESI]
00477a2b : CMP EDI,ECX
00477a2d : JNZ 0x00477a98
00477a2f : MOV ECX,dword ptr [ESI + 0x8]
00477a32 : CMP byte ptr [ECX + 0x24],0x0
00477a36 : JNZ 0x00477a4d
00477a38 : MOV byte ptr [ECX + 0x24],BL
00477a3b : PUSH EDX
00477a3c : MOV ECX,ESI
00477a3e : MOV byte ptr [ESI + 0x24],0x0
00477a42 : CALL 0x004777c0
00477a47 : MOV ECX,dword ptr [ESI + 0x8]
00477a4a : MOV EDX,dword ptr [EBP + 0x8]
00477a4d : CMP byte ptr [ECX + 0x25],0x0
00477a51 : JNZ 0x00477acb
00477a53 : MOV EAX,dword ptr [ECX]
00477a55 : CMP byte ptr [EAX + 0x24],BL
00477a58 : JNZ 0x00477a62
00477a5a : MOV EAX,dword ptr [ECX + 0x8]
00477a5d : CMP byte ptr [EAX + 0x24],BL
00477a60 : JZ 0x00477ac7
00477a62 : MOV EAX,dword ptr [ECX + 0x8]
00477a65 : CMP byte ptr [EAX + 0x24],BL
00477a68 : JNZ 0x00477a7f
00477a6a : MOV EAX,dword ptr [ECX]
00477a6c : MOV byte ptr [EAX + 0x24],BL
00477a6f : PUSH EDX
00477a70 : MOV byte ptr [ECX + 0x24],0x0
00477a74 : CALL 0x00477820
00477a79 : MOV ECX,dword ptr [ESI + 0x8]
00477a7c : MOV EDX,dword ptr [EBP + 0x8]
00477a7f : MOV AL,byte ptr [ESI + 0x24]
00477a82 : MOV byte ptr [ECX + 0x24],AL
00477a85 : MOV byte ptr [ESI + 0x24],BL
00477a88 : MOV ECX,dword ptr [ECX + 0x8]
00477a8b : MOV byte ptr [ECX + 0x24],BL
00477a8e : PUSH EDX
00477a8f : MOV ECX,ESI
00477a91 : CALL 0x004777c0
00477a96 : JMP 0x00477b10
00477a98 : CMP byte ptr [ECX + 0x24],0x0
00477a9c : JNZ 0x00477ab2
00477a9e : MOV byte ptr [ECX + 0x24],BL
00477aa1 : PUSH EDX
00477aa2 : MOV ECX,ESI
00477aa4 : MOV byte ptr [ESI + 0x24],0x0
00477aa8 : CALL 0x00477820
00477aad : MOV ECX,dword ptr [ESI]
00477aaf : MOV EDX,dword ptr [EBP + 0x8]
00477ab2 : CMP byte ptr [ECX + 0x25],0x0
00477ab6 : JNZ 0x00477acb
00477ab8 : MOV EAX,dword ptr [ECX + 0x8]
00477abb : CMP byte ptr [EAX + 0x24],BL
00477abe : JNZ 0x00477ade
00477ac0 : MOV EAX,dword ptr [ECX]
00477ac2 : CMP byte ptr [EAX + 0x24],BL
00477ac5 : JNZ 0x00477ade
00477ac7 : MOV byte ptr [ECX + 0x24],0x0
00477acb : MOV ECX,dword ptr [EDX + 0x4]
00477ace : MOV EDI,ESI
00477ad0 : MOV ESI,dword ptr [ESI + 0x4]
00477ad3 : CMP EDI,dword ptr [ECX + 0x4]
00477ad6 : JNZ 0x00477a20
00477adc : JMP 0x00477b10
00477ade : MOV EAX,dword ptr [ECX]
00477ae0 : CMP byte ptr [EAX + 0x24],BL
00477ae3 : JNZ 0x00477afa
00477ae5 : MOV EAX,dword ptr [ECX + 0x8]
00477ae8 : MOV byte ptr [EAX + 0x24],BL
00477aeb : PUSH EDX
00477aec : MOV byte ptr [ECX + 0x24],0x0
00477af0 : CALL 0x004777c0
00477af5 : MOV ECX,dword ptr [ESI]
00477af7 : MOV EDX,dword ptr [EBP + 0x8]
00477afa : MOV AL,byte ptr [ESI + 0x24]
00477afd : MOV byte ptr [ECX + 0x24],AL
00477b00 : MOV byte ptr [ESI + 0x24],BL
00477b03 : MOV ECX,dword ptr [ECX]
00477b05 : MOV byte ptr [ECX + 0x24],BL
00477b08 : PUSH EDX
00477b09 : MOV ECX,ESI
00477b0b : CALL 0x00477820
00477b10 : MOV byte ptr [EDI + 0x24],BL
00477b13 : MOV ECX,dword ptr [EBP + -0x14]
00477b16 : CALL 0x006f04e0
