PROGRAM  : Maestia.exe
FUNCTION : FUN_008f7770
ENTRY    : 008f7770
BODY     : [[008f7770, 008f782d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f7770(char param_1,undefined4 param_2)

{
  int iVar1;
  code *pcVar2;
  DWORD DVar3;
  int *in_ECX;
  
  if (param_1 != '\0') {
    FUN_008ed880(in_ECX);
    iVar1 = DAT_00da93ec;
    *(undefined1 *)(in_ECX + 0xc) = 1;
    *(undefined1 *)((int)in_ECX + 0x31) = 1;
    if (((iVar1 != 0) && (*(char *)(iVar1 + 0x456) != '\0')) && (*(int *)(iVar1 + 0x450) != 0)) {
      FUN_008a1050(0x3e);
    }
  }
  iVar1 = in_ECX[10];
  if ((iVar1 != 0) && ((*(byte *)(iVar1 + 0x54) & 1) == 0)) {
    *(undefined4 *)(iVar1 + 0x111c) = 0;
    *(undefined4 *)(in_ECX[10] + 0x1120) = 0xff;
    iVar1 = in_ECX[10];
    *(undefined4 *)(iVar1 + 0x1114) = param_2;
    *(undefined4 *)(iVar1 + 0x1118) = 0;
    *(undefined4 *)(iVar1 + 0x110c) = 1;
    DVar3 = GetTickCount();
    *(DWORD *)(iVar1 + 0x1110) = DVar3;
    (**(code **)(*(int *)in_ECX[10] + 0x1c))();
  }
  FUN_008ec940(in_ECX);
  pcVar2 = *(code **)(*in_ECX + 4);
  *(undefined1 *)((int)in_ECX + 0x32) = 1;
  (*pcVar2)(1);
  return;
}



============================================================
DISASSEMBLY
============================================================
008f7770 : PUSH EBP
008f7771 : MOV EBP,ESP
008f7773 : PUSH ECX
008f7774 : CMP byte ptr [EBP + 0x8],0x0
008f7778 : PUSH EBX
008f7779 : PUSH ESI
008f777a : PUSH EDI
008f777b : MOV ESI,ECX
008f777d : MOV EBX,0x1
008f7782 : JZ 0x008f77bb
008f7784 : MOV EDX,dword ptr [ESI + 0x4]
008f7787 : PUSH ESI
008f7788 : CALL 0x008ed880
008f778d : MOV EAX,[0x00da93ec]
008f7792 : MOV byte ptr [ESI + 0x30],BL
008f7795 : MOV byte ptr [ESI + 0x31],BL
008f7798 : TEST EAX,EAX
008f779a : JZ 0x008f77bb
008f779c : CMP byte ptr [EAX + 0x456],0x0
008f77a3 : JZ 0x008f77bb
008f77a5 : CMP dword ptr [EAX + 0x450],0x0
008f77ac : JZ 0x008f77bb
008f77ae : MOV ECX,dword ptr [0x017248dc]
008f77b4 : PUSH 0x3e
008f77b6 : CALL 0x008a1050
008f77bb : MOV EAX,dword ptr [ESI + 0x28]
008f77be : TEST EAX,EAX
008f77c0 : JZ 0x008f7810
008f77c2 : TEST byte ptr [EAX + 0x54],BL
008f77c5 : JNZ 0x008f7810
008f77c7 : MOV ECX,dword ptr [EBP + 0xc]
008f77ca : MOV dword ptr [EAX + 0x111c],0x0
008f77d4 : MOV EAX,dword ptr [ESI + 0x28]
008f77d7 : MOV dword ptr [EAX + 0x1120],0xff
008f77e1 : MOV EDI,dword ptr [ESI + 0x28]
008f77e4 : MOV dword ptr [EDI + 0x1114],ECX
008f77ea : MOV dword ptr [EDI + 0x1118],0x0
008f77f4 : MOV dword ptr [EDI + 0x110c],EBX
008f77fa : CALL dword ptr [0x00b850d8]
008f7800 : MOV dword ptr [EDI + 0x1110],EAX
008f7806 : MOV ECX,dword ptr [ESI + 0x28]
008f7809 : MOV EDX,dword ptr [ECX]
008f780b : MOV EAX,dword ptr [EDX + 0x1c]
008f780e : CALL EAX
008f7810 : MOV ECX,dword ptr [ESI + 0x4]
008f7813 : PUSH ESI
008f7814 : CALL 0x008ec940
008f7819 : MOV EDX,dword ptr [ESI]
008f781b : MOV EAX,dword ptr [EDX + 0x4]
008f781e : PUSH EBX
008f781f : MOV ECX,ESI
008f7821 : MOV byte ptr [ESI + 0x32],BL
008f7824 : CALL EAX
008f7826 : POP EDI
008f7827 : POP ESI
008f7828 : POP EBX
008f7829 : POP ECX
008f782a : POP EBP
008f782b : RET 0x8
