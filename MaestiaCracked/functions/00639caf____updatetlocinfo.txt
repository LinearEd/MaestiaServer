PROGRAM  : Maestia.exe
FUNCTION : ___updatetlocinfo
ENTRY    : 00639caf
BODY     : [[00639caf, 00639d18]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __SEH_prolog4 replaced with injection: SEH_prolog4 */
/* WARNING: Function: __SEH_epilog4 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    ___updatetlocinfo
   
   Library: Visual Studio 2008 Release */

pthreadlocinfo __cdecl ___updatetlocinfo(void)

{
  _ptiddata p_Var1;
  
  p_Var1 = __getptd();
  if (((p_Var1->_ownlocale & DAT_00d67d50) == 0) || (p_Var1->ptlocinfo == (pthreadlocinfo)0x0)) {
    __lock(0xc);
    __updatetlocinfoEx_nolock();
    FUN_00639d19();
  }
  else {
    p_Var1 = __getptd();
    p_Var1 = (_ptiddata)p_Var1->ptlocinfo;
  }
  if (p_Var1 == (_ptiddata)0x0) {
    __amsg_exit(0x20);
  }
  return (pthreadlocinfo)p_Var1;
}



============================================================
DISASSEMBLY
============================================================
00639caf : PUSH 0xc
00639cb1 : PUSH 0xcecd00
00639cb6 : CALL 0x0064c228
00639cbb : CALL 0x006458f6
00639cc0 : MOV ESI,EAX
00639cc2 : MOV EAX,[0x00d67d50]
00639cc7 : TEST dword ptr [ESI + 0x70],EAX
00639cca : JZ 0x00639cee
00639ccc : CMP dword ptr [ESI + 0x6c],0x0
00639cd0 : JZ 0x00639cee
00639cd2 : CALL 0x006458f6
00639cd7 : MOV ESI,dword ptr [EAX + 0x6c]
00639cda : TEST ESI,ESI
00639cdc : JNZ 0x00639ce6
00639cde : PUSH 0x20
00639ce0 : CALL 0x00635703
00639ce5 : POP ECX
00639ce6 : MOV EAX,ESI
00639ce8 : CALL 0x0064c26d
00639ced : RET
00639cee : PUSH 0xc
00639cf0 : CALL 0x0064c598
00639cf5 : POP ECX
00639cf6 : AND dword ptr [EBP + -0x4],0x0
00639cfa : LEA EAX,[ESI + 0x6c]
00639cfd : MOV EDI,dword ptr [0x00d67e38]
00639d03 : CALL 0x00639c71
00639d08 : MOV dword ptr [EBP + -0x1c],EAX
00639d0b : MOV dword ptr [EBP + -0x4],0xfffffffe
00639d12 : CALL 0x00639d19
00639d17 : JMP 0x00639cda
