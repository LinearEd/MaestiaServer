PROGRAM  : Maestia.exe
FUNCTION : FUN_0054d2b0
ENTRY    : 0054d2b0
BODY     : [[0054d2b0, 0054d46e]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_0054d2b0(int param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  char cVar2;
  byte bVar3;
  byte bVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int in_ECX;
  int iVar8;
  uint local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  local_10 = 0.0;
  local_c = 0.0;
  local_8 = 0.0;
  local_4 = 0.0;
  bVar3 = 0;
  cVar2 = FUN_0054cf80(param_1,&local_10,&local_14,0,param_2,&param_2);
  if (cVar2 != '\0') {
    iVar6 = *(int *)(in_ECX + 8);
    if ((char)param_3 == '\0') {
      local_8 = local_10 + 20.0;
    }
    if ((((local_8 < *(float *)(iVar6 + 0x48) != (local_8 == *(float *)(iVar6 + 0x48))) &&
         (local_4 < *(float *)(iVar6 + 0x4c) != (local_4 == *(float *)(iVar6 + 0x4c)))) &&
        (*(float *)(iVar6 + 0x40) < local_10 != (*(float *)(iVar6 + 0x40) == local_10))) &&
       (*(float *)(iVar6 + 0x44) <= local_c)) {
      return 0;
    }
    if ((*(byte *)(iVar6 + 0x140) & 0x30) == 0) {
      iVar1 = *(int *)(iVar6 + 0x50);
      iVar8 = 0x4b0;
      param_3 = 0x4b0;
      if (param_2 != 0) {
        iVar8 = 0;
        param_3 = 0;
      }
      if (local_8 <= *(float *)(iVar6 + 0x48)) {
        iVar5 = iVar1;
        if (local_10 < *(float *)(iVar6 + 0x40)) {
          iVar6 = FUN_0063b380();
          iVar5 = iVar1 - (iVar6 + iVar8);
          if (iVar5 < 0) {
            iVar5 = 0;
          }
        }
      }
      else {
        iVar5 = FUN_0063b380();
        iVar5 = iVar1 + iVar5;
        local_10 = 0.0;
        local_c = 0.0;
        local_8 = 0.0;
        local_4 = 0.0;
        if (((param_1 != 0) && (cVar2 = FUN_0054ba60(&local_10,param_1 + -1), cVar2 != '\0')) &&
           (iVar6 = FUN_0063b380(), iVar6 < iVar5)) {
          iVar5 = iVar6;
        }
        if (iVar5 < 0) {
          iVar5 = 0;
        }
      }
      if (((*(byte *)(*(int *)(in_ECX + 8) + 0x141) & 8) == 0) || (iVar5 < iVar1)) {
        bVar3 = FUN_005455c0(iVar5);
      }
      if (local_14 < *(uint *)(*(int *)(in_ECX + 8) + 0x3c)) {
        bVar4 = FUN_00545620(local_14);
        return bVar3 | bVar4;
      }
      uVar7 = FUN_0054bdc0();
      if (uVar7 < local_14) {
        bVar4 = FUN_00545670(local_14);
        return bVar3 | bVar4;
      }
    }
  }
  return bVar3;
}



============================================================
DISASSEMBLY
============================================================
0054d2b0 : SUB ESP,0x1c
0054d2b3 : FLDZ
0054d2b5 : PUSH EBX
0054d2b6 : PUSH ESI
0054d2b7 : FST float ptr [ESP + 0x14]
0054d2bb : MOV ESI,ECX
0054d2bd : FST float ptr [ESP + 0x18]
0054d2c1 : MOV ECX,dword ptr [ESP + 0x2c]
0054d2c5 : FST float ptr [ESP + 0x1c]
0054d2c9 : LEA EAX,[ESP + 0x2c]
0054d2cd : FSTP float ptr [ESP + 0x20]
0054d2d1 : PUSH EAX
0054d2d2 : PUSH ECX
0054d2d3 : MOV ECX,dword ptr [ESP + 0x30]
0054d2d7 : PUSH 0x0
0054d2d9 : LEA EDX,[ESP + 0x1c]
0054d2dd : PUSH EDX
0054d2de : LEA EAX,[ESP + 0x24]
0054d2e2 : PUSH EAX
0054d2e3 : PUSH ECX
0054d2e4 : MOV ECX,ESI
0054d2e6 : MOV dword ptr [ESP + 0x20],ESI
0054d2ea : XOR BL,BL
0054d2ec : CALL 0x0054cf80
0054d2f1 : TEST AL,AL
0054d2f3 : JZ 0x0054d465
0054d2f9 : FLD float ptr [ESP + 0x14]
0054d2fd : PUSH EDI
0054d2fe : MOV EDI,dword ptr [ESI + 0x8]
0054d301 : CMP byte ptr [ESP + 0x34],BL
0054d305 : JNZ 0x0054d313
0054d307 : FLD double ptr [0x00b86058]
0054d30d : FADD ST0,ST1
0054d30f : FSTP float ptr [ESP + 0x20]
0054d313 : FLD float ptr [EDI + 0x48]
0054d316 : FLD float ptr [ESP + 0x20]
0054d31a : FCOM
0054d31c : FNSTSW AX
0054d31e : FSTP ST1
0054d320 : TEST AH,0x41
0054d323 : JP 0x0054d355
0054d325 : FLD float ptr [EDI + 0x4c]
0054d328 : FLD float ptr [ESP + 0x24]
0054d32c : FCOMPP
0054d32e : FNSTSW AX
0054d330 : TEST AH,0x41
0054d333 : JP 0x0054d355
0054d335 : FLD float ptr [EDI + 0x40]
0054d338 : FCOMP ST2
0054d33a : FNSTSW AX
0054d33c : TEST AH,0x41
0054d33f : JP 0x0054d355
0054d341 : FLD float ptr [EDI + 0x44]
0054d344 : FLD float ptr [ESP + 0x1c]
0054d348 : FCOMPP
0054d34a : FNSTSW AX
0054d34c : TEST AH,0x1
0054d34f : JZ 0x0054d460
0054d355 : TEST byte ptr [EDI + 0x140],0x30
0054d35c : JNZ 0x0054d460
0054d362 : CMP dword ptr [ESP + 0x30],0x0
0054d367 : MOV ESI,dword ptr [EDI + 0x50]
0054d36a : PUSH EBP
0054d36b : MOV EBP,0x4b0
0054d370 : MOV dword ptr [ESP + 0x14],ESI
0054d374 : MOV dword ptr [ESP + 0x38],EBP
0054d378 : JZ 0x0054d380
0054d37a : XOR EBP,EBP
0054d37c : MOV dword ptr [ESP + 0x38],EBP
0054d380 : FLD float ptr [EDI + 0x48]
0054d383 : FCOMPP
0054d385 : FNSTSW AX
0054d387 : TEST AH,0x5
0054d38a : JP 0x0054d3e3
0054d38c : FSUB float ptr [EDI + 0x48]
0054d38f : FIADD dword ptr [ESP + 0x38]
0054d393 : CALL 0x0063b380
0054d398 : FLDZ
0054d39a : ADD ESI,EAX
0054d39c : FST float ptr [ESP + 0x1c]
0054d3a0 : MOV EAX,dword ptr [ESP + 0x30]
0054d3a4 : FST float ptr [ESP + 0x20]
0054d3a8 : FST float ptr [ESP + 0x24]
0054d3ac : FSTP float ptr [ESP + 0x28]
0054d3b0 : TEST EAX,EAX
0054d3b2 : JBE 0x0054d3db
0054d3b4 : DEC EAX
0054d3b5 : PUSH EAX
0054d3b6 : LEA EDX,[ESP + 0x20]
0054d3ba : PUSH EDX
0054d3bb : MOV ECX,EDI
0054d3bd : CALL 0x0054ba60
0054d3c2 : TEST AL,AL
0054d3c4 : JZ 0x0054d3db
0054d3c6 : FLD float ptr [ESP + 0x1c]
0054d3ca : FSUB double ptr [0x00b8be30]
0054d3d0 : CALL 0x0063b380
0054d3d5 : CMP EAX,ESI
0054d3d7 : JGE 0x0054d3db
0054d3d9 : MOV ESI,EAX
0054d3db : TEST ESI,ESI
0054d3dd : JGE 0x0054d403
0054d3df : XOR ESI,ESI
0054d3e1 : JMP 0x0054d403
0054d3e3 : FLD float ptr [EDI + 0x40]
0054d3e6 : FCOMP
0054d3e8 : FNSTSW AX
0054d3ea : TEST AH,0x41
0054d3ed : JNZ 0x0054d401
0054d3ef : FSUBR float ptr [EDI + 0x40]
0054d3f2 : CALL 0x0063b380
0054d3f7 : ADD EAX,EBP
0054d3f9 : SUB ESI,EAX
0054d3fb : JNS 0x0054d403
0054d3fd : XOR ESI,ESI
0054d3ff : JMP 0x0054d403
0054d401 : FSTP ST0
0054d403 : MOV EDI,dword ptr [ESP + 0x10]
0054d407 : MOV ECX,dword ptr [EDI + 0x8]
0054d40a : TEST byte ptr [ECX + 0x141],0x8
0054d411 : POP EBP
0054d412 : JZ 0x0054d41a
0054d414 : CMP ESI,dword ptr [ESP + 0x10]
0054d418 : JGE 0x0054d422
0054d41a : PUSH ESI
0054d41b : CALL 0x005455c0
0054d420 : MOV BL,AL
0054d422 : MOV ECX,dword ptr [EDI + 0x8]
0054d425 : MOV ESI,dword ptr [ESP + 0x14]
0054d429 : CMP ESI,dword ptr [ECX + 0x3c]
0054d42c : JNC 0x0054d441
0054d42e : PUSH ESI
0054d42f : CALL 0x00545620
0054d434 : POP EDI
0054d435 : OR BL,AL
0054d437 : POP ESI
0054d438 : MOV AL,BL
0054d43a : POP EBX
0054d43b : ADD ESP,0x1c
0054d43e : RET 0xc
0054d441 : CALL 0x0054bdc0
0054d446 : CMP ESI,EAX
0054d448 : JBE 0x0054d464
0054d44a : MOV ECX,dword ptr [EDI + 0x8]
0054d44d : PUSH ESI
0054d44e : CALL 0x00545670
0054d453 : POP EDI
0054d454 : OR BL,AL
0054d456 : POP ESI
0054d457 : MOV AL,BL
0054d459 : POP EBX
0054d45a : ADD ESP,0x1c
0054d45d : RET 0xc
0054d460 : FSTP ST1
0054d462 : FSTP ST0
0054d464 : POP EDI
0054d465 : POP ESI
0054d466 : MOV AL,BL
0054d468 : POP EBX
0054d469 : ADD ESP,0x1c
0054d46c : RET 0xc
