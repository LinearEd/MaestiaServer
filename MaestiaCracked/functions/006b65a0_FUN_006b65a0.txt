PROGRAM  : Maestia.exe
FUNCTION : FUN_006b65a0
ENTRY    : 006b65a0
BODY     : [[006b65a0, 006b6667]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b65a0(void)

{
  int iVar1;
  int unaff_ESI;
  
  iVar1 = *(int *)(unaff_ESI + 0x130);
  if ((iVar1 <= *(int *)(unaff_ESI + 0x10)) &&
     (*(ushort *)(unaff_ESI + 0x11c) < *(ushort *)(unaff_ESI + 0x2c))) {
    do {
      if (iVar1 < 1) {
        *(undefined4 *)(unaff_ESI + 0x130) = 1;
        *(undefined4 *)(unaff_ESI + 0x20) = *(undefined4 *)(unaff_ESI + 0x1c);
        return;
      }
      *(int *)(unaff_ESI + 0x1c) = *(int *)(unaff_ESI + 0x1c) + -1;
      if (*(ushort *)(*(int *)(unaff_ESI + 0x18) + *(int *)(unaff_ESI + 0x1c) * 4) <
          *(ushort *)(unaff_ESI + 0x50)) {
        (**(code **)(unaff_ESI + 0x23c))();
        (**(code **)(unaff_ESI + 0x248))();
      }
      else if (*(char *)(unaff_ESI + 0x231) != '\0') {
        *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
        return;
      }
      *(int *)(unaff_ESI + 0x130) = *(int *)(unaff_ESI + 0x130) + -1;
      iVar1 = *(int *)(unaff_ESI + 0x130);
    } while( true );
  }
  if (*(char *)(unaff_ESI + 0x231) == '\0') {
    return;
  }
  *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
  return;
}



============================================================
DISASSEMBLY
============================================================
006b65a0 : MOV EAX,dword ptr [ESI + 0x130]
006b65a6 : CMP dword ptr [ESI + 0x10],EAX
006b65a9 : JL 0x006b6657
006b65af : MOV CX,word ptr [ESI + 0x11c]
006b65b6 : CMP CX,word ptr [ESI + 0x2c]
006b65ba : JNC 0x006b6657
006b65c0 : PUSH EBX
006b65c1 : PUSH EDI
006b65c2 : TEST EAX,EAX
006b65c4 : JLE 0x006b6644
006b65c6 : OR EBX,0xffffffff
006b65c9 : LEA ESP,[ESP]
006b65d0 : ADD dword ptr [ESI + 0x1c],EBX
006b65d3 : MOV EAX,dword ptr [ESI + 0x1c]
006b65d6 : MOV EDX,dword ptr [ESI + 0x18]
006b65d9 : MOVZX EDI,word ptr [EDX + EAX*0x4]
006b65dd : CMP DI,word ptr [ESI + 0x50]
006b65e1 : JC 0x006b65f6
006b65e3 : CMP byte ptr [ESI + 0x231],0x0
006b65ea : JZ 0x006b6635
006b65ec : POP EDI
006b65ed : MOV dword ptr [ESI + 0xc],0x86
006b65f4 : POP EBX
006b65f5 : RET
006b65f6 : MOVZX EAX,word ptr [ESI + 0x11c]
006b65fd : MOV ECX,dword ptr [ESI + 0x34]
006b6600 : LEA EAX,[ECX + EAX*0x8]
006b6603 : MOV ECX,dword ptr [ESI + 0x58]
006b6606 : MOVZX EDX,DI
006b6609 : LEA ECX,[ECX + EDX*0x8]
006b660c : MOV EDX,dword ptr [ECX + 0x4]
006b660f : SUB EDX,dword ptr [EAX + 0x4]
006b6612 : MOV ECX,dword ptr [ECX]
006b6614 : SUB ECX,dword ptr [EAX]
006b6616 : PUSH EDX
006b6617 : MOV EDX,dword ptr [ESI + 0x23c]
006b661d : PUSH ECX
006b661e : PUSH ESI
006b661f : CALL EDX
006b6621 : MOV ECX,dword ptr [ESI + 0x248]
006b6627 : NEG EAX
006b6629 : PUSH EAX
006b662a : PUSH EDI
006b662b : LEA EAX,[ESI + 0x48]
006b662e : PUSH EAX
006b662f : PUSH ESI
006b6630 : CALL ECX
006b6632 : ADD ESP,0x1c
006b6635 : ADD dword ptr [ESI + 0x130],EBX
006b663b : CMP dword ptr [ESI + 0x130],0x0
006b6642 : JG 0x006b65d0
006b6644 : MOV EDX,dword ptr [ESI + 0x1c]
006b6647 : POP EDI
006b6648 : MOV dword ptr [ESI + 0x130],0x1
006b6652 : MOV dword ptr [ESI + 0x20],EDX
006b6655 : POP EBX
006b6656 : RET
006b6657 : CMP byte ptr [ESI + 0x231],0x0
006b665e : JZ 0x006b65f5
006b6660 : MOV dword ptr [ESI + 0xc],0x86
006b6667 : RET
