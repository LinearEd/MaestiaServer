PROGRAM  : Maestia.exe
FUNCTION : FUN_008914e0
ENTRY    : 008914e0
BODY     : [[008914e0, 008916e3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008914e0(float param_1,int param_2,int param_3,int param_4,int param_5)

{
  int *piVar1;
  float *pfVar2;
  int iVar3;
  char cVar4;
  short sVar5;
  DWORD DVar6;
  int *in_ECX;
  bool bVar7;
  undefined1 uStack_25;
  float fStack_24;
  int iStack_20;
  int iStack_1c;
  undefined1 auStack_18 [20];
  
  iVar3 = *(int *)(in_ECX[0x4e] + 4);
  piVar1 = in_ECX + 0x48e;
  sVar5 = FUN_0043d970();
  if (sVar5 == 1000) {
    bVar7 = *(int **)((int)in_ECX + iVar3 + 0x13c) == piVar1;
  }
  else if (sVar5 == 2000) {
    bVar7 = *(int **)((int)in_ECX + iVar3 + 0x140) == piVar1;
  }
  else {
    bVar7 = *(int **)((int)in_ECX + iVar3 + 0x144) == piVar1;
  }
  if (!bVar7) {
    cVar4 = FUN_008896f0();
    if ((cVar4 == '\0') && ((char)in_ECX[0x109] == '\0')) {
      pfVar2 = (float *)(in_ECX + 0x560);
      *pfVar2 = param_1;
      in_ECX[0x561] = param_2;
      in_ECX[0x562] = param_3;
      in_ECX[0x563] = param_5;
      if ((float)in_ECX[0x565] != (float)in_ECX[0x564]) {
        in_ECX[0x564] = param_4;
        in_ECX[0x565] = param_4;
        DVar6 = timeGetTime();
        in_ECX[0x569] = DVar6;
        *(undefined1 *)(in_ECX + 0x56b) = 1;
      }
      if ((*pfVar2 <= 0.0 && *pfVar2 != 0.0) ||
         ((float)in_ECX[0x562] <= 0.0 && (float)in_ECX[0x562] != 0.0)) {
        FUN_008018d0(L"=============AvaBaseCharacter::UpdateElapsed() ErrSetPos");
      }
      cVar4 = (**(code **)(*in_ECX + 0x200))();
      if (cVar4 == '\0') {
        FUN_00876080();
        return;
      }
      cVar4 = (**(code **)(*in_ECX + 0x200))();
      if ((cVar4 != '\0') && (in_ECX[0xfb] != 0)) {
        fStack_24 = *pfVar2;
        iStack_20 = in_ECX[0x561];
        iStack_1c = in_ECX[0x562];
        uStack_25 = 0xff;
        cVar4 = FUN_00891380(in_ECX,*pfVar2,in_ECX[0x562],in_ECX + 0x561,&uStack_25,auStack_18,1);
        if ((cVar4 == '\0') && (*(int *)(*(int *)(DAT_0172491c + 0x90) + 0xf0) != 0)) {
          cVar4 = FUN_007de1f0(7);
          if (cVar4 != '\0') {
            D3DXVec3Normalize(&fStack_24,&fStack_24);
            if (in_ECX[0xfa] != 0) {
              FUN_00890f30(in_ECX);
            }
          }
        }
        FUN_00404130();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008914e0 : PUSH EBP
008914e1 : MOV EBP,ESP
008914e3 : AND ESP,0xfffffff8
008914e6 : SUB ESP,0x24
008914e9 : PUSH EBX
008914ea : PUSH ESI
008914eb : PUSH EDI
008914ec : MOV EDI,ECX
008914ee : MOV EAX,dword ptr [EDI + 0x138]
008914f4 : MOV ECX,dword ptr [EAX + 0x4]
008914f7 : MOV AX,word ptr [EDI + 0x1262]
008914fe : LEA ESI,[EDI + 0x1238]
00891504 : LEA EBX,[ECX + EDI*0x1 + 0x138]
0089150b : CALL 0x0043d970
00891510 : MOV EDX,0x3e8
00891515 : CMP AX,DX
00891518 : JNZ 0x0089151f
0089151a : CMP dword ptr [EBX + 0x4],ESI
0089151d : JMP 0x00891531
0089151f : MOV ECX,0x7d0
00891524 : CMP AX,CX
00891527 : JNZ 0x0089152e
00891529 : CMP dword ptr [EBX + 0x8],ESI
0089152c : JMP 0x00891531
0089152e : CMP dword ptr [EBX + 0xc],ESI
00891531 : SETZ AL
00891534 : TEST AL,AL
00891536 : JNZ 0x008916db
0089153c : MOV EAX,EDI
0089153e : CALL 0x008896f0
00891543 : TEST AL,AL
00891545 : JNZ 0x008916db
0089154b : CMP byte ptr [EDI + 0x424],AL
00891551 : JNZ 0x008916db
00891557 : MOVSS XMM0,dword ptr [EBP + 0x8]
0089155c : MOV EDX,dword ptr [EBP + 0x18]
0089155f : LEA EBX,[EDI + 0x1580]
00891565 : MOVSS dword ptr [EBX],XMM0
00891569 : MOVSS XMM0,dword ptr [EBP + 0xc]
0089156e : MOVSS dword ptr [EBX + 0x4],XMM0
00891573 : MOVSS XMM0,dword ptr [EBP + 0x10]
00891578 : MOVSS dword ptr [EBX + 0x8],XMM0
0089157d : MOVSS XMM0,dword ptr [EDI + 0x1594]
00891585 : UCOMISS XMM0,dword ptr [EDI + 0x1590]
0089158c : LAHF
0089158d : MOV dword ptr [EDI + 0x158c],EDX
00891593 : TEST AH,0x44
00891596 : JNP 0x008915c0
00891598 : MOVSS XMM0,dword ptr [EBP + 0x14]
0089159d : MOVSS dword ptr [EDI + 0x1590],XMM0
008915a5 : MOVSS dword ptr [EDI + 0x1594],XMM0
008915ad : CALL dword ptr [0x00b85598]
008915b3 : MOV dword ptr [EDI + 0x15a4],EAX
008915b9 : MOV byte ptr [EDI + 0x15ac],0x1
008915c0 : XORPS XMM0,XMM0
008915c3 : COMISS XMM0,dword ptr [EBX]
008915c6 : JA 0x008915d1
008915c8 : COMISS XMM0,dword ptr [EDI + 0x1588]
008915cf : JBE 0x008915e4
008915d1 : MOV ESI,dword ptr [0x00da98e8]
008915d7 : PUSH 0xc46220
008915dc : CALL 0x008018d0
008915e1 : ADD ESP,0x4
008915e4 : MOV EAX,dword ptr [EDI]
008915e6 : MOV EDX,dword ptr [EAX + 0x200]
008915ec : MOV ECX,EDI
008915ee : CALL EDX
008915f0 : TEST AL,AL
008915f2 : JNZ 0x00891612
008915f4 : MOV EAX,dword ptr [EDI + 0x138]
008915fa : MOV ECX,dword ptr [EAX + 0x4]
008915fd : LEA EAX,[ECX + EDI*0x1 + 0x138]
00891604 : CALL 0x00876080
00891609 : POP EDI
0089160a : POP ESI
0089160b : POP EBX
0089160c : MOV ESP,EBP
0089160e : POP EBP
0089160f : RET 0x14
00891612 : MOV EDX,dword ptr [EDI]
00891614 : MOV EAX,dword ptr [EDX + 0x200]
0089161a : MOV ECX,EDI
0089161c : CALL EAX
0089161e : TEST AL,AL
00891620 : JZ 0x008916db
00891626 : CMP dword ptr [EDI + 0x3ec],0x0
0089162d : JZ 0x008916db
00891633 : FLD float ptr [EDI + 0x1588]
00891639 : MOVSS XMM0,dword ptr [EBX]
0089163d : PUSH 0x1
0089163f : LEA ECX,[ESP + 0x24]
00891643 : PUSH ECX
00891644 : LEA EDX,[ESP + 0x1b]
00891648 : PUSH EDX
00891649 : LEA EAX,[EDI + 0x1584]
0089164f : PUSH EAX
00891650 : SUB ESP,0x8
00891653 : FSTP float ptr [ESP + 0x4]
00891657 : MOVSS dword ptr [ESP + 0x2c],XMM0
0089165d : MOVSS XMM0,dword ptr [EBX + 0x4]
00891662 : FLD float ptr [EBX]
00891664 : FSTP float ptr [ESP]
00891667 : MOVSS dword ptr [ESP + 0x30],XMM0
0089166d : MOVSS XMM0,dword ptr [EBX + 0x8]
00891672 : PUSH EDI
00891673 : MOV byte ptr [ESP + 0x2f],0xff
00891678 : MOVSS dword ptr [ESP + 0x38],XMM0
0089167e : CALL 0x00891380
00891683 : TEST AL,AL
00891685 : JNZ 0x008916ce
00891687 : MOV ECX,dword ptr [0x0172491c]
0089168d : MOV EDX,dword ptr [ECX + 0x90]
00891693 : MOV EDX,dword ptr [EDX + 0xf0]
00891699 : TEST EDX,EDX
0089169b : JZ 0x008916ce
0089169d : MOV CL,byte ptr [ESP + 0x13]
008916a1 : PUSH 0x7
008916a3 : CALL 0x007de1f0
008916a8 : TEST AL,AL
008916aa : JZ 0x008916ce
008916ac : LEA EAX,[ESP + 0x14]
008916b0 : PUSH EAX
008916b1 : MOV ECX,EAX
008916b3 : PUSH ECX
008916b4 : CALL 0x004ff722
008916b9 : CMP dword ptr [EDI + 0x3e8],0x0
008916c0 : JZ 0x008916ce
008916c2 : PUSH EDI
008916c3 : LEA ECX,[ESP + 0x18]
008916c7 : MOV ESI,EBX
008916c9 : CALL 0x00890f30
008916ce : MOV EAX,dword ptr [EDI + 0x3ec]
008916d4 : MOV ECX,EBX
008916d6 : CALL 0x00404130
008916db : POP EDI
008916dc : POP ESI
008916dd : POP EBX
008916de : MOV ESP,EBP
008916e0 : POP EBP
008916e1 : RET 0x14
