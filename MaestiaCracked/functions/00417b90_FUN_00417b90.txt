PROGRAM  : Maestia.exe
FUNCTION : FUN_00417b90
ENTRY    : 00417b90
BODY     : [[00417b90, 00417c4c] [00417c50, 00417d8d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00417b90(uint *param_1,uint param_2,uint param_3,undefined4 param_4)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint local_10;
  uint local_8;
  
  uVar5 = param_2 + ((int)(param_3 - param_2) / 0x50) * 0x28;
  FUN_00418120(param_2,uVar5,param_3 - 0x28,param_4);
  uVar3 = uVar5;
  while (local_10 = uVar3, param_2 < local_10) {
    cVar1 = FUN_00418de0(&param_4);
    if ((cVar1 != '\0') || (cVar1 = FUN_00418de0(&param_4), uVar3 = local_10 - 0x28, cVar1 != '\0'))
    break;
  }
  do {
    uVar5 = uVar5 + 0x28;
    uVar3 = uVar5;
    local_8 = uVar5;
    uVar2 = local_10;
    if (param_3 <= uVar5) break;
    cVar1 = FUN_00418de0(&param_4);
    if ((cVar1 != '\0') || (cVar1 = FUN_00418de0(&param_4), cVar1 != '\0')) break;
  } while( true );
joined_r0x00417c49:
  if (param_3 <= uVar5) {
joined_r0x00417c9a:
    for (; param_2 < local_10; local_10 = local_10 - 0x28) {
      cVar1 = FUN_00418de0(&param_4);
      if (cVar1 == '\0') {
        cVar1 = FUN_00418de0(&param_4);
        if (cVar1 != '\0') break;
        uVar2 = uVar2 - 0x28;
        FUN_00418600();
        uVar3 = local_8;
      }
    }
    if (local_10 == param_2) {
      if (uVar5 == param_3) {
        param_1[1] = uVar3;
        *param_1 = uVar2;
        return;
      }
      uVar4 = uVar3;
      if (uVar3 != uVar5) {
        FUN_00418600();
        uVar4 = local_8;
      }
      uVar5 = uVar5 + 0x28;
      FUN_00418600();
      uVar3 = uVar4 + 0x28;
      local_8 = uVar4 + 0x28;
      uVar2 = uVar2 + 0x28;
    }
    else {
      local_10 = local_10 - 0x28;
      if (uVar5 == param_3) {
        uVar4 = uVar3;
        if (local_10 != uVar2 - 0x28) {
          FUN_00418600();
          uVar4 = local_8;
        }
        FUN_00418600();
        uVar3 = uVar4 - 0x28;
        local_8 = uVar4 - 0x28;
        uVar2 = uVar2 - 0x28;
      }
      else {
        uVar5 = uVar5 + 0x28;
        FUN_00418600();
        uVar3 = local_8;
      }
    }
    goto joined_r0x00417c49;
  }
  cVar1 = FUN_00418de0(&param_4);
  if (cVar1 == '\0') {
    cVar1 = FUN_00418de0(&param_4);
    if (cVar1 != '\0') goto joined_r0x00417c9a;
    uVar3 = uVar3 + 0x28;
    FUN_00418600();
    local_8 = uVar3;
  }
  uVar5 = uVar5 + 0x28;
  goto joined_r0x00417c49;
}



============================================================
DISASSEMBLY
============================================================
00417b90 : PUSH EBP
00417b91 : MOV EBP,ESP
00417b93 : SUB ESP,0x14
00417b96 : PUSH EBX
00417b97 : PUSH ESI
00417b98 : MOV ESI,dword ptr [EBP + 0xc]
00417b9b : PUSH EDI
00417b9c : MOV EDI,dword ptr [EBP + 0x10]
00417b9f : MOV ECX,EDI
00417ba1 : SUB ECX,ESI
00417ba3 : MOV EAX,0x66666667
00417ba8 : IMUL ECX
00417baa : MOV ECX,dword ptr [EBP + 0x14]
00417bad : SAR EDX,0x4
00417bb0 : MOV EAX,EDX
00417bb2 : SHR EAX,0x1f
00417bb5 : ADD EAX,EDX
00417bb7 : CDQ
00417bb8 : SUB EAX,EDX
00417bba : SAR EAX,0x1
00417bbc : LEA EAX,[EAX + EAX*0x4]
00417bbf : LEA EBX,[ESI + EAX*0x8]
00417bc2 : PUSH ECX
00417bc3 : LEA EAX,[EDI + -0x28]
00417bc6 : PUSH EAX
00417bc7 : PUSH EBX
00417bc8 : PUSH ESI
00417bc9 : CALL 0x00418120
00417bce : ADD ESP,0x10
00417bd1 : LEA ESI,[EBX + 0x28]
00417bd4 : MOV dword ptr [EBP + -0x4],ESI
00417bd7 : CMP dword ptr [EBP + 0xc],EBX
00417bda : JNC 0x00417c0c
00417bdc : LEA ESP,[ESP]
00417be0 : LEA EDX,[EBP + 0x14]
00417be3 : LEA EDI,[EBX + -0x28]
00417be6 : PUSH EDX
00417be7 : MOV EAX,EBX
00417be9 : MOV EDX,EDI
00417beb : CALL 0x00418de0
00417bf0 : TEST AL,AL
00417bf2 : JNZ 0x00417c0c
00417bf4 : LEA EAX,[EBP + 0x14]
00417bf7 : PUSH EAX
00417bf8 : MOV EAX,EDI
00417bfa : MOV EDX,EBX
00417bfc : CALL 0x00418de0
00417c01 : TEST AL,AL
00417c03 : JNZ 0x00417c0c
00417c05 : MOV EBX,EDI
00417c07 : CMP dword ptr [EBP + 0xc],EBX
00417c0a : JC 0x00417be0
00417c0c : CMP ESI,dword ptr [EBP + 0x10]
00417c0f : JNC 0x00417c3e
00417c11 : LEA ECX,[EBP + 0x14]
00417c14 : PUSH ECX
00417c15 : MOV EAX,EBX
00417c17 : MOV EDX,ESI
00417c19 : CALL 0x00418de0
00417c1e : TEST AL,AL
00417c20 : JNZ 0x00417c3b
00417c22 : LEA EDX,[EBP + 0x14]
00417c25 : PUSH EDX
00417c26 : MOV EAX,ESI
00417c28 : MOV EDX,EBX
00417c2a : CALL 0x00418de0
00417c2f : TEST AL,AL
00417c31 : JNZ 0x00417c3b
00417c33 : ADD ESI,0x28
00417c36 : CMP ESI,dword ptr [EBP + 0x10]
00417c39 : JC 0x00417c11
00417c3b : MOV dword ptr [EBP + -0x4],ESI
00417c3e : MOV EDI,ESI
00417c40 : MOV dword ptr [EBP + -0x8],EDI
00417c43 : MOV dword ptr [EBP + -0xc],EBX
00417c46 : CMP EDI,dword ptr [EBP + 0x10]
00417c49 : JNC 0x00417c94
00417c4b : JMP 0x00417c50
00417c50 : LEA EAX,[EBP + 0x14]
00417c53 : PUSH EAX
00417c54 : MOV EAX,EDI
00417c56 : MOV EDX,EBX
00417c58 : CALL 0x00418de0
00417c5d : TEST AL,AL
00417c5f : JNZ 0x00417c89
00417c61 : LEA ECX,[EBP + 0x14]
00417c64 : PUSH ECX
00417c65 : MOV EAX,EBX
00417c67 : MOV EDX,EDI
00417c69 : CALL 0x00418de0
00417c6e : TEST AL,AL
00417c70 : JNZ 0x00417c94
00417c72 : MOV EAX,ESI
00417c74 : ADD ESI,0x28
00417c77 : MOV dword ptr [EBP + -0x4],ESI
00417c7a : MOV ESI,EDI
00417c7c : MOV EDI,EAX
00417c7e : CALL 0x00418600
00417c83 : MOV ESI,dword ptr [EBP + -0x4]
00417c86 : MOV EDI,dword ptr [EBP + -0x8]
00417c89 : ADD EDI,0x28
00417c8c : MOV dword ptr [EBP + -0x8],EDI
00417c8f : CMP EDI,dword ptr [EBP + 0x10]
00417c92 : JC 0x00417c50
00417c94 : MOV EAX,dword ptr [EBP + -0xc]
00417c97 : CMP dword ptr [EBP + 0xc],EAX
00417c9a : JNC 0x00417ceb
00417c9c : ADD EAX,-0x28
00417c9f : MOV dword ptr [EBP + -0x10],EAX
00417ca2 : LEA EDX,[EBP + 0x14]
00417ca5 : PUSH EDX
00417ca6 : MOV EDX,dword ptr [EBP + -0x10]
00417ca9 : MOV EAX,EBX
00417cab : CALL 0x00418de0
00417cb0 : TEST AL,AL
00417cb2 : JNZ 0x00417cd9
00417cb4 : LEA EAX,[EBP + 0x14]
00417cb7 : PUSH EAX
00417cb8 : MOV EAX,dword ptr [EBP + -0x10]
00417cbb : MOV EDX,EBX
00417cbd : CALL 0x00418de0
00417cc2 : TEST AL,AL
00417cc4 : JNZ 0x00417ceb
00417cc6 : MOV ESI,dword ptr [EBP + -0x10]
00417cc9 : SUB EBX,0x28
00417ccc : MOV EDI,EBX
00417cce : CALL 0x00418600
00417cd3 : MOV ESI,dword ptr [EBP + -0x4]
00417cd6 : MOV EDI,dword ptr [EBP + -0x8]
00417cd9 : MOV EAX,dword ptr [EBP + -0xc]
00417cdc : SUB dword ptr [EBP + -0x10],0x28
00417ce0 : SUB EAX,0x28
00417ce3 : MOV dword ptr [EBP + -0xc],EAX
00417ce6 : CMP dword ptr [EBP + 0xc],EAX
00417ce9 : JC 0x00417ca2
00417ceb : MOV ECX,dword ptr [EBP + -0xc]
00417cee : CMP ECX,dword ptr [EBP + 0xc]
00417cf1 : JNZ 0x00417d30
00417cf3 : CMP EDI,dword ptr [EBP + 0x10]
00417cf6 : JZ 0x00417d7f
00417cfc : CMP ESI,EDI
00417cfe : JZ 0x00417d0d
00417d00 : MOV EDI,EBX
00417d02 : CALL 0x00418600
00417d07 : MOV ESI,dword ptr [EBP + -0x4]
00417d0a : MOV EDI,dword ptr [EBP + -0x8]
00417d0d : ADD ESI,0x28
00417d10 : MOV dword ptr [EBP + -0x4],ESI
00417d13 : MOV ESI,EDI
00417d15 : ADD EDI,0x28
00417d18 : MOV dword ptr [EBP + -0x8],EDI
00417d1b : MOV EDI,EBX
00417d1d : ADD EBX,0x28
00417d20 : CALL 0x00418600
00417d25 : MOV ESI,dword ptr [EBP + -0x4]
00417d28 : MOV EDI,dword ptr [EBP + -0x8]
00417d2b : JMP 0x00417c46
00417d30 : SUB ECX,0x28
00417d33 : MOV dword ptr [EBP + -0xc],ECX
00417d36 : CMP EDI,dword ptr [EBP + 0x10]
00417d39 : JNZ 0x00417d63
00417d3b : SUB EBX,0x28
00417d3e : CMP ECX,EBX
00417d40 : JZ 0x00417d4e
00417d42 : MOV ESI,EBX
00417d44 : MOV EDI,ECX
00417d46 : CALL 0x00418600
00417d4b : MOV ESI,dword ptr [EBP + -0x4]
00417d4e : SUB ESI,0x28
00417d51 : MOV EDI,EBX
00417d53 : MOV dword ptr [EBP + -0x4],ESI
00417d56 : CALL 0x00418600
00417d5b : MOV EDI,dword ptr [EBP + -0x8]
00417d5e : JMP 0x00417c46
00417d63 : MOV EAX,EDI
00417d65 : ADD EDI,0x28
00417d68 : MOV dword ptr [EBP + -0x8],EDI
00417d6b : MOV ESI,ECX
00417d6d : MOV EDI,EAX
00417d6f : CALL 0x00418600
00417d74 : MOV ESI,dword ptr [EBP + -0x4]
00417d77 : MOV EDI,dword ptr [EBP + -0x8]
00417d7a : JMP 0x00417c46
00417d7f : MOV EAX,dword ptr [EBP + 0x8]
00417d82 : POP EDI
00417d83 : MOV dword ptr [EAX + 0x4],ESI
00417d86 : POP ESI
00417d87 : MOV dword ptr [EAX],EBX
00417d89 : POP EBX
00417d8a : MOV ESP,EBP
00417d8c : POP EBP
00417d8d : RET
