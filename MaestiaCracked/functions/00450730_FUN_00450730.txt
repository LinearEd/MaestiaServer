PROGRAM  : Maestia.exe
FUNCTION : FUN_00450730
ENTRY    : 00450730
BODY     : [[00450730, 00450897] [004508a9, 00450983]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00450730(uint param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  uint uVar7;
  uint extraout_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7abe0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar4 = *(int *)(param_1 + 4);
  if (iVar4 == 0) {
    uVar7 = 0;
  }
  else {
    uVar7 = (*(int *)(param_1 + 0xc) - iVar4) / 6;
  }
  puVar1 = *(undefined4 **)(param_1 + 8);
  iVar4 = ((int)puVar1 - iVar4) / 6;
  if (iVar4 == 0x2aaaaaaa) {
    iVar4 = FUN_00452880();
    uVar7 = extraout_ECX;
  }
  uVar5 = iVar4 + 1;
  if (uVar7 < uVar5) {
    if (0x2aaaaaaa - (uVar7 >> 1) < uVar7) {
      param_1 = 0;
    }
    else {
      param_1 = uVar7 + (uVar7 >> 1);
    }
    if (param_1 < uVar5) {
      param_1 = uVar5;
    }
    iVar4 = FUN_00451130();
    local_8 = 0;
    FUN_004504a0();
    FUN_004510d0(*(undefined4 *)(iVar3 + 4),param_2);
    FUN_004510d0(param_2,*(undefined4 *)(iVar3 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar3 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar3 + 0xc) = iVar4 + param_1 * 6;
    *(int *)(iVar3 + 8) = iVar4 + ((*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4)) / 6 + 1) * 6;
    *(int *)(iVar3 + 4) = iVar4;
    ExceptionList = local_10;
    return;
  }
  iVar4 = (int)puVar1 - (int)param_2 >> 0x1f;
  if (((int)puVar1 - (int)param_2) / 6 + iVar4 == iVar4) {
    FUN_004510d0(param_2,puVar1);
    local_8 = 2;
    FUN_004504a0();
    local_8 = 0xffffffff;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 6;
  }
  else {
    uVar6 = FUN_004510d0((undefined4 *)((int)puVar1 + -6),puVar1);
    *(undefined4 *)(param_1 + 8) = uVar6;
    puVar2 = (undefined4 *)((int)puVar1 + -6);
    while (param_2 != puVar2) {
      *(undefined4 *)((int)puVar1 + -6) = *(undefined4 *)((int)puVar2 + -6);
      *(undefined2 *)((int)puVar1 + -2) = *(undefined2 *)((int)puVar2 + -2);
      puVar1 = (undefined4 *)((int)puVar1 + -6);
      puVar2 = (undefined4 *)((int)puVar2 + -6);
    }
  }
  FUN_00451100(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00450730 : PUSH EBP
00450731 : MOV EBP,ESP
00450733 : PUSH -0x1
00450735 : PUSH 0xb7abe0
0045073a : MOV EAX,FS:[0x0]
00450740 : PUSH EAX
00450741 : SUB ESP,0x18
00450744 : PUSH EBX
00450745 : PUSH ESI
00450746 : PUSH EDI
00450747 : MOV EAX,[0x00d66fa0]
0045074c : XOR EAX,EBP
0045074e : PUSH EAX
0045074f : LEA EAX,[EBP + -0xc]
00450752 : MOV FS:[0x0],EAX
00450758 : MOV dword ptr [EBP + -0x10],ESP
0045075b : MOV EBX,dword ptr [EBP + 0x8]
0045075e : MOV ESI,dword ptr [EBX + 0x4]
00450761 : TEST ESI,ESI
00450763 : JNZ 0x00450769
00450765 : XOR ECX,ECX
00450767 : JMP 0x0045077e
00450769 : MOV ECX,dword ptr [EBX + 0xc]
0045076c : SUB ECX,ESI
0045076e : MOV EAX,0x2aaaaaab
00450773 : IMUL ECX
00450775 : MOV EAX,EDX
00450777 : SHR EAX,0x1f
0045077a : ADD EAX,EDX
0045077c : MOV ECX,EAX
0045077e : MOV EDI,dword ptr [EBX + 0x8]
00450781 : MOV EDX,EDI
00450783 : SUB EDX,ESI
00450785 : MOV EAX,0x2aaaaaab
0045078a : IMUL EDX
0045078c : MOV EAX,EDX
0045078e : SHR EAX,0x1f
00450791 : ADD EAX,EDX
00450793 : MOV EDX,0x2aaaaaaa
00450798 : SUB EDX,EAX
0045079a : CMP EDX,0x1
0045079d : JNC 0x004507a4
0045079f : CALL 0x00452880
004507a4 : INC EAX
004507a5 : CMP ECX,EAX
004507a7 : JNC 0x004508a9
004507ad : MOV EDX,ECX
004507af : SHR EDX,0x1
004507b1 : MOV ESI,0x2aaaaaaa
004507b6 : SUB ESI,EDX
004507b8 : CMP ESI,ECX
004507ba : JNC 0x004507c8
004507bc : MOV dword ptr [EBP + 0x8],0x0
004507c3 : MOV ECX,dword ptr [EBP + 0x8]
004507c6 : JMP 0x004507cd
004507c8 : ADD ECX,EDX
004507ca : MOV dword ptr [EBP + 0x8],ECX
004507cd : CMP ECX,EAX
004507cf : JNC 0x004507d6
004507d1 : MOV dword ptr [EBP + 0x8],EAX
004507d4 : MOV ECX,EAX
004507d6 : CALL 0x00451130
004507db : MOV ESI,EAX
004507dd : MOV dword ptr [EBP + -0x14],ESI
004507e0 : MOV ECX,dword ptr [EBP + 0xc]
004507e3 : SUB ECX,dword ptr [EBX + 0x4]
004507e6 : MOV EAX,0x2aaaaaab
004507eb : IMUL ECX
004507ed : MOV EAX,EDX
004507ef : SHR EAX,0x1f
004507f2 : ADD EAX,EDX
004507f4 : MOV dword ptr [EBP + -0x20],EAX
004507f7 : MOV dword ptr [EBP + -0x4],0x0
004507fe : LEA EAX,[EAX + EAX*0x2]
00450801 : LEA EDI,[ESI + EAX*0x2]
00450804 : MOV EDX,dword ptr [EBP + 0x10]
00450807 : MOV ESI,0x1
0045080c : CALL 0x004504a0
00450811 : MOV dword ptr [EBP + -0x18],ESI
00450814 : MOV ECX,dword ptr [EBP + 0xc]
00450817 : PUSH ECX
00450818 : MOV EDX,dword ptr [EBX + 0x4]
0045081b : PUSH EDX
0045081c : MOV ESI,dword ptr [EBP + -0x14]
0045081f : MOV EDX,ESI
00450821 : CALL 0x004510d0
00450826 : MOV dword ptr [EBP + -0x18],0x2
0045082d : MOV EAX,dword ptr [EBP + -0x20]
00450830 : LEA EAX,[EAX + EAX*0x2 + 0x3]
00450834 : LEA EDX,[ESI + EAX*0x2]
00450837 : MOV ECX,dword ptr [EBX + 0x8]
0045083a : PUSH ECX
0045083b : MOV EAX,dword ptr [EBP + 0xc]
0045083e : PUSH EAX
0045083f : CALL 0x004510d0
00450844 : MOV dword ptr [EBP + -0x4],0xffffffff
0045084b : MOV ECX,dword ptr [EBX + 0x4]
0045084e : MOV EDX,dword ptr [EBX + 0x8]
00450851 : SUB EDX,ECX
00450853 : MOV EAX,0x2aaaaaab
00450858 : IMUL EDX
0045085a : MOV EAX,EDX
0045085c : SHR EAX,0x1f
0045085f : LEA EDI,[EDX + EAX*0x1 + 0x1]
00450863 : TEST ECX,ECX
00450865 : JZ 0x0045086c
00450867 : CALL 0x006f04e0
0045086c : MOV EAX,dword ptr [EBP + 0x8]
0045086f : LEA ECX,[EAX + EAX*0x2]
00450872 : LEA EDX,[ESI + ECX*0x2]
00450875 : MOV dword ptr [EBX + 0xc],EDX
00450878 : LEA EAX,[EDI + EDI*0x2]
0045087b : LEA ECX,[ESI + EAX*0x2]
0045087e : MOV dword ptr [EBX + 0x8],ECX
00450881 : MOV dword ptr [EBX + 0x4],ESI
00450884 : MOV ECX,dword ptr [EBP + -0xc]
00450887 : MOV dword ptr FS:[0x0],ECX
0045088e : POP ECX
0045088f : POP EDI
00450890 : POP ESI
00450891 : POP EBX
00450892 : MOV ESP,EBP
00450894 : POP EBP
00450895 : RET 0xc
004508a9 : MOV ECX,EDI
004508ab : MOV ESI,dword ptr [EBP + 0xc]
004508ae : SUB ECX,ESI
004508b0 : MOV EAX,0x2aaaaaab
004508b5 : IMUL ECX
004508b7 : MOV EAX,EDX
004508b9 : SHR EAX,0x1f
004508bc : ADD EAX,EDX
004508be : PUSH EDI
004508bf : CMP EAX,0x1
004508c2 : MOV EAX,dword ptr [EBP + 0x10]
004508c5 : JNC 0x0045091f
004508c7 : MOV ECX,dword ptr [EAX]
004508c9 : MOV dword ptr [EBP + -0x20],ECX
004508cc : MOV DX,word ptr [EAX + 0x4]
004508d0 : MOV word ptr [EBP + -0x1c],DX
004508d4 : LEA EDX,[ESI + 0x6]
004508d7 : PUSH ESI
004508d8 : CALL 0x004510d0
004508dd : MOV dword ptr [EBP + -0x4],0x2
004508e4 : MOV EDI,dword ptr [EBX + 0x8]
004508e7 : MOV ECX,EDI
004508e9 : SUB ECX,dword ptr [EBP + 0xc]
004508ec : MOV EAX,0x2aaaaaab
004508f1 : IMUL ECX
004508f3 : MOV EAX,EDX
004508f5 : SHR EAX,0x1f
004508f8 : ADD EAX,EDX
004508fa : MOV ESI,0x1
004508ff : SUB ESI,EAX
00450901 : LEA EDX,[EBP + -0x20]
00450904 : CALL 0x004504a0
00450909 : MOV dword ptr [EBP + -0x4],0xffffffff
00450910 : ADD dword ptr [EBX + 0x8],0x6
00450914 : MOV EBX,dword ptr [EBX + 0x8]
00450917 : LEA EDX,[EBX + -0x6]
0045091a : MOV ECX,dword ptr [EBP + 0xc]
0045091d : JMP 0x00450964
0045091f : MOV EDX,dword ptr [EAX]
00450921 : MOV dword ptr [EBP + -0x20],EDX
00450924 : MOV AX,word ptr [EAX + 0x4]
00450928 : MOV word ptr [EBP + -0x1c],AX
0045092c : LEA ESI,[EDI + -0x6]
0045092f : PUSH ESI
00450930 : MOV EDX,EDI
00450932 : CALL 0x004510d0
00450937 : MOV dword ptr [EBX + 0x8],EAX
0045093a : MOV EAX,ESI
0045093c : MOV ECX,dword ptr [EBP + 0xc]
0045093f : MOV EDX,ECX
00450941 : CMP ECX,EAX
00450943 : JZ 0x00450961
00450945 : LEA ECX,[EAX + 0x6]
00450948 : SUB EAX,0x6
0045094b : SUB ECX,0x6
0045094e : MOV ESI,dword ptr [EAX]
00450950 : MOV dword ptr [ECX],ESI
00450952 : MOV SI,word ptr [EAX + 0x4]
00450956 : MOV word ptr [ECX + 0x4],SI
0045095a : CMP EAX,EDX
0045095c : JNZ 0x00450948
0045095e : MOV ECX,dword ptr [EBP + 0xc]
00450961 : LEA EDX,[ECX + 0x6]
00450964 : PUSH ECX
00450965 : LEA ECX,[EBP + -0x20]
00450968 : CALL 0x00451100
0045096d : ADD ESP,0x4
00450970 : MOV ECX,dword ptr [EBP + -0xc]
00450973 : MOV dword ptr FS:[0x0],ECX
0045097a : POP ECX
0045097b : POP EDI
0045097c : POP ESI
0045097d : POP EBX
0045097e : MOV ESP,EBP
00450980 : POP EBP
00450981 : RET 0xc
