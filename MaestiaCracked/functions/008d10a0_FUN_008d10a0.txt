PROGRAM  : Maestia.exe
FUNCTION : FUN_008d10a0
ENTRY    : 008d10a0
BODY     : [[008d10a0, 008d1290]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_008d10a0(int param_1)

{
  short sVar1;
  int *piVar2;
  short sVar3;
  byte bVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  DWORD DVar8;
  uint uVar9;
  int *piVar10;
  int *piVar11;
  int iVar12;
  int local_10;
  
  iVar7 = *(int *)(*DAT_00da9894 + 300);
  iVar12 = 0;
  if (iVar7 != 0) {
    iVar12 = *(int *)(iVar7 + 0xc);
  }
  iVar7 = *(int *)(*DAT_00da9894 + 300);
  iVar5 = 0;
  if (iVar7 != 0) {
    iVar5 = *(int *)(iVar7 + 0xc);
  }
  piVar2 = *(int **)(iVar5 + 0x4c + (uint)*(ushort *)(iVar12 + 0x5c) * 4);
  if (piVar2 == (int *)0x0) {
    return 0;
  }
  sVar3 = 100;
  local_10 = 100;
  piVar6 = *(int **)(param_1 + 0x4c);
  if (piVar6 != *(int **)(param_1 + 0x50)) {
    do {
      sVar1 = *(short *)*piVar6;
      iVar7 = (**(code **)(*piVar2 + 0x98))(sVar1);
      if ((iVar7 != 0) && (*(int *)(iVar7 + 8) != 0)) {
        if (*(char *)(iVar7 + 0xe4) != '\0') {
          DVar8 = timeGetTime();
          uVar9 = DVar8 - *(int *)(iVar7 + 0xe8);
          if ((*(uint *)(iVar7 + 0xec) <= uVar9) || (*(uint *)(iVar7 + 0xec) == uVar9)) {
            *(undefined1 *)(iVar7 + 0xe4) = 0;
          }
          if (*(char *)(iVar7 + 0xe4) != '\0') goto LAB_008d121b;
        }
        piVar10 = (int *)(**(code **)(*piVar2 + 0x74))(sVar1,piVar2[0x14]);
        if (((((piVar10 != (int *)0x0) && (iVar7 = (**(code **)(*piVar10 + 0x20))(), iVar7 == 2)) &&
             (piVar10[9] != 0)) &&
            ((*(char *)(piVar10[9] + 0xb1) != '\0' &&
             (piVar11 = (int *)FUN_004049b0(piVar10[4]), piVar11 != (int *)0x0)))) &&
           ((iVar7 = (**(code **)(*piVar11 + 0x38))(), iVar7 == 0 ||
            ((iVar7 = FUN_004049b0(piVar10[4]), iVar7 != 0 &&
             (bVar4 = FUN_0086e2d0(), (*(uint *)(iVar7 + 0x4d4) >> (bVar4 & 0x1f) & 1) != 0)))))) {
          if (sVar3 == 100) {
            iVar7 = *(int *)(*piVar6 + 4);
          }
          else {
            iVar7 = *(int *)(*piVar6 + 4);
            if (local_10 <= iVar7) goto LAB_008d121b;
          }
          local_10 = iVar7;
          sVar3 = sVar1;
        }
      }
LAB_008d121b:
      piVar6 = piVar6 + 1;
    } while (piVar6 != *(int **)(param_1 + 0x50));
    if (sVar3 != 100) {
      FUN_008018d0(L"[AutoGameLOG] Attack Skill Use");
      if (*(int *)(*DAT_00da9894 + 300) != 0) {
        FUN_00930240(*(undefined4 *)(*(int *)(*DAT_00da9894 + 300) + 0xc),0);
        return 1;
      }
      FUN_00930240(0,0);
      return 1;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
008d10a0 : PUSH EBP
008d10a1 : MOV EBP,ESP
008d10a3 : MOV EAX,[0x00da9894]
008d10a8 : MOV EAX,dword ptr [EAX]
008d10aa : MOV ECX,dword ptr [EAX + 0x12c]
008d10b0 : SUB ESP,0x10
008d10b3 : TEST ECX,ECX
008d10b5 : JZ 0x008d10ba
008d10b7 : MOV ECX,dword ptr [ECX + 0xc]
008d10ba : MOV EAX,dword ptr [EAX + 0x12c]
008d10c0 : MOVZX ECX,word ptr [ECX + 0x5c]
008d10c4 : TEST EAX,EAX
008d10c6 : JZ 0x008d10cb
008d10c8 : MOV EAX,dword ptr [EAX + 0xc]
008d10cb : MOVZX ECX,CX
008d10ce : PUSH EBX
008d10cf : MOV EBX,dword ptr [EAX + ECX*0x4 + 0x4c]
008d10d3 : TEST EBX,EBX
008d10d5 : JNZ 0x008d10e0
008d10d7 : XOR AL,AL
008d10d9 : POP EBX
008d10da : MOV ESP,EBP
008d10dc : POP EBP
008d10dd : RET 0x4
008d10e0 : MOV ECX,dword ptr [EBP + 0x8]
008d10e3 : MOV EAX,0x64
008d10e8 : MOV dword ptr [EBP + -0x8],EAX
008d10eb : MOV dword ptr [EBP + -0xc],EAX
008d10ee : MOV EAX,dword ptr [ECX + 0x4c]
008d10f1 : PUSH ESI
008d10f2 : PUSH EDI
008d10f3 : MOV dword ptr [EBP + -0x4],EAX
008d10f6 : CMP EAX,dword ptr [ECX + 0x50]
008d10f9 : JNZ 0x008d1109
008d10fb : POP EDI
008d10fc : POP ESI
008d10fd : XOR AL,AL
008d10ff : POP EBX
008d1100 : MOV ESP,EBP
008d1102 : POP EBP
008d1103 : RET 0x4
008d1106 : MOV EAX,dword ptr [EBP + -0x4]
008d1109 : MOV EDX,dword ptr [EAX]
008d110b : MOVZX EDI,word ptr [EDX]
008d110e : MOV EAX,dword ptr [EBX]
008d1110 : MOV EDX,dword ptr [EAX + 0x98]
008d1116 : PUSH EDI
008d1117 : MOV ECX,EBX
008d1119 : CALL EDX
008d111b : MOV ESI,EAX
008d111d : TEST ESI,ESI
008d111f : JZ 0x008d121b
008d1125 : CMP dword ptr [ESI + 0x8],0x0
008d1129 : JZ 0x008d121b
008d112f : CMP byte ptr [ESI + 0xe4],0x0
008d1136 : JZ 0x008d1166
008d1138 : CALL dword ptr [0x00b85598]
008d113e : SUB EAX,dword ptr [ESI + 0xe8]
008d1144 : MOV ECX,dword ptr [ESI + 0xec]
008d114a : CMP EAX,ECX
008d114c : JNC 0x008d1152
008d114e : SUB ECX,EAX
008d1150 : JNZ 0x008d1159
008d1152 : MOV byte ptr [ESI + 0xe4],0x0
008d1159 : CMP byte ptr [ESI + 0xe4],0x0
008d1160 : JNZ 0x008d121b
008d1166 : MOV EAX,dword ptr [EBX + 0x50]
008d1169 : MOV EDX,dword ptr [EBX]
008d116b : PUSH EAX
008d116c : MOV EAX,dword ptr [EDX + 0x74]
008d116f : PUSH EDI
008d1170 : MOV ECX,EBX
008d1172 : CALL EAX
008d1174 : MOV ESI,EAX
008d1176 : TEST ESI,ESI
008d1178 : JZ 0x008d121b
008d117e : MOV EDX,dword ptr [ESI]
008d1180 : MOV EAX,dword ptr [EDX + 0x20]
008d1183 : MOV ECX,ESI
008d1185 : CALL EAX
008d1187 : CMP EAX,0x2
008d118a : JNZ 0x008d121b
008d1190 : MOV EAX,dword ptr [ESI + 0x24]
008d1193 : TEST EAX,EAX
008d1195 : JZ 0x008d121b
008d119b : CMP byte ptr [EAX + 0xb1],0x0
008d11a2 : JZ 0x008d121b
008d11a4 : MOV ECX,dword ptr [ESI + 0x10]
008d11a7 : PUSH ECX
008d11a8 : CALL 0x004049b0
008d11ad : ADD ESP,0x4
008d11b0 : TEST EAX,EAX
008d11b2 : JZ 0x008d121b
008d11b4 : MOV EDX,dword ptr [EAX]
008d11b6 : MOV ECX,EAX
008d11b8 : MOV EAX,dword ptr [EDX + 0x38]
008d11bb : CALL EAX
008d11bd : TEST EAX,EAX
008d11bf : JZ 0x008d11f3
008d11c1 : MOV ECX,dword ptr [ESI + 0x10]
008d11c4 : PUSH ECX
008d11c5 : CALL 0x004049b0
008d11ca : MOV ESI,EAX
008d11cc : ADD ESP,0x4
008d11cf : TEST ESI,ESI
008d11d1 : JZ 0x008d121b
008d11d3 : MOV EDX,dword ptr [0x0172491c]
008d11d9 : MOV EAX,dword ptr [EDX + 0x17c]
008d11df : CALL 0x0086e2d0
008d11e4 : MOV EDX,dword ptr [ESI + 0x4d4]
008d11ea : MOV ECX,EAX
008d11ec : SHR EDX,CL
008d11ee : TEST DL,0x1
008d11f1 : JZ 0x008d121b
008d11f3 : CMP word ptr [EBP + -0x8],0x64
008d11f8 : MOV ECX,dword ptr [EBP + -0x4]
008d11fb : MOV EDX,dword ptr [ECX]
008d11fd : JNZ 0x008d120a
008d11ff : MOVZX EAX,DI
008d1202 : MOV dword ptr [EBP + -0x8],EAX
008d1205 : MOV EAX,dword ptr [EDX + 0x4]
008d1208 : JMP 0x008d1218
008d120a : MOV EAX,dword ptr [EDX + 0x4]
008d120d : CMP dword ptr [EBP + -0xc],EAX
008d1210 : JLE 0x008d121b
008d1212 : MOVZX ECX,DI
008d1215 : MOV dword ptr [EBP + -0x8],ECX
008d1218 : MOV dword ptr [EBP + -0xc],EAX
008d121b : MOV EAX,dword ptr [EBP + -0x4]
008d121e : MOV EDX,dword ptr [EBP + 0x8]
008d1221 : ADD EAX,0x4
008d1224 : MOV dword ptr [EBP + -0x4],EAX
008d1227 : CMP EAX,dword ptr [EDX + 0x50]
008d122a : JNZ 0x008d1106
008d1230 : MOV EDI,dword ptr [EBP + -0x8]
008d1233 : CMP DI,0x64
008d1237 : JZ 0x008d10fb
008d123d : MOV ESI,dword ptr [0x00da98e8]
008d1243 : PUSH 0xc54794
008d1248 : CALL 0x008018d0
008d124d : MOV EAX,[0x00da9894]
008d1252 : MOV EAX,dword ptr [EAX]
008d1254 : MOV EAX,dword ptr [EAX + 0x12c]
008d125a : ADD ESP,0x4
008d125d : TEST EAX,EAX
008d125f : JNZ 0x008d1278
008d1261 : XOR ECX,ECX
008d1263 : PUSH ECX
008d1264 : MOVZX EAX,DI
008d1267 : PUSH ECX
008d1268 : CALL 0x00930240
008d126d : POP EDI
008d126e : POP ESI
008d126f : MOV AL,0x1
008d1271 : POP EBX
008d1272 : MOV ESP,EBP
008d1274 : POP EBP
008d1275 : RET 0x4
008d1278 : MOV ECX,dword ptr [EAX + 0xc]
008d127b : PUSH 0x0
008d127d : MOVZX EAX,DI
008d1280 : PUSH ECX
008d1281 : CALL 0x00930240
008d1286 : POP EDI
008d1287 : POP ESI
008d1288 : MOV AL,0x1
008d128a : POP EBX
008d128b : MOV ESP,EBP
008d128d : POP EBP
008d128e : RET 0x4
