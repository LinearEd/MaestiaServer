PROGRAM  : Maestia.exe
FUNCTION : FUN_00a67550
ENTRY    : 00a67550
BODY     : [[00a67550, 00a67739]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a67550(float param_1)

{
  int iVar1;
  int iVar2;
  undefined4 *unaff_EDI;
  int local_8;
  
  unaff_EDI[0x18] = param_1;
  if (unaff_EDI[0x16] != 0) {
    if (param_1 < (float)unaff_EDI[0x3c]) {
      unaff_EDI[0x17] = *(undefined4 *)unaff_EDI[0x15];
      iVar2 = FUN_00a1a840(*unaff_EDI);
      if (iVar2 != 0) {
        iVar1 = *(int *)(iVar2 + 0x17f0);
        if ((unaff_EDI[0x37] - unaff_EDI[0x36] & 0xfffffffc) == 0) {
          if (iVar1 != 0) {
            FUN_0084c1a0();
          }
          if (*(int *)(iVar2 + 0x1870) != 0) {
            FUN_0084c1a0();
          }
        }
        else {
          if (iVar1 != 0) {
            if (*(int **)(iVar1 + 0x168) != (int *)0x0) {
              (**(code **)(**(int **)(iVar1 + 0x168) + 0x10))(0);
            }
            if (*(int **)(iVar1 + 0x16c) != (int *)0x0) {
              (**(code **)(**(int **)(iVar1 + 0x16c) + 0x10))(0);
            }
          }
          iVar2 = *(int *)(iVar2 + 0x1870);
          if (iVar2 != 0) {
            if (*(int **)(iVar2 + 0x168) != (int *)0x0) {
              (**(code **)(**(int **)(iVar2 + 0x168) + 0x10))(0);
            }
            if (*(int **)(iVar2 + 0x16c) != (int *)0x0) {
              (**(code **)(**(int **)(iVar2 + 0x16c) + 0x10))(0);
            }
          }
        }
      }
    }
    iVar2 = unaff_EDI[0x17];
    iVar1 = unaff_EDI[0x15];
    unaff_EDI[0x3c] = param_1;
    if ((iVar2 != iVar1) && ((float)*(ushort *)(iVar2 + 0xc) <= param_1)) {
      param_1 = (float)((int)(float)*(ushort *)(iVar2 + 0xc) & 0xffff);
      FUN_00413b60(&param_1);
      if (local_8 == iVar1) {
        if (((unaff_EDI[0x12] - unaff_EDI[0x11] & 0xfffffffc) != 0) &&
           (*(int **)(iVar2 + 0x10) != (int *)0x0)) {
          (**(code **)(**(int **)(iVar2 + 0x10) + 0x14))
                    ((int)(unaff_EDI[0x12] - unaff_EDI[0x11]) >> 2,unaff_EDI[0x11],0,
                     *(undefined1 *)(*(int *)(local_8 + 0x10) + 4));
        }
      }
      else {
        if ((unaff_EDI[0x12] - unaff_EDI[0x11] & 0xfffffffc) != 0) {
          (**(code **)(**(int **)(local_8 + 0x10) + 0x14))
                    ((int)(unaff_EDI[0x12] - unaff_EDI[0x11]) >> 2,unaff_EDI[0x11],
                     *(undefined2 *)(local_8 + 0xc),(char)(*(int **)(local_8 + 0x10))[1]);
        }
        unaff_EDI[0x17] = local_8;
      }
      if ((*(int **)(unaff_EDI[0x17] + 0x10) != (int *)0x0) &&
         (iVar2 = (**(code **)(**(int **)(unaff_EDI[0x17] + 0x10) + 4))(), iVar2 == 0)) {
        *(short *)((int)unaff_EDI + 0xea) = *(short *)((int)unaff_EDI + 0xea) + 1;
        if (*(ushort *)(unaff_EDI + 0x3a) <= *(ushort *)((int)unaff_EDI + 0xea)) {
          *(ushort *)((int)unaff_EDI + 0xea) = *(ushort *)(unaff_EDI + 0x3a);
        }
      }
      if (unaff_EDI[0x17] != unaff_EDI[0x15]) {
        FUN_00416210();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a67550 : PUSH EBP
00a67551 : MOV EBP,ESP
00a67553 : MOVSS XMM0,dword ptr [EBP + 0x8]
00a67558 : SUB ESP,0x8
00a6755b : CMP dword ptr [EDI + 0x58],0x0
00a6755f : MOVSS dword ptr [EDI + 0x60],XMM0
00a67564 : JZ 0x00a67734
00a6756a : MOVSS XMM1,dword ptr [EDI + 0xf0]
00a67572 : COMISS XMM1,XMM0
00a67575 : PUSH EBX
00a67576 : PUSH ESI
00a67577 : JBE 0x00a67630
00a6757d : MOV EAX,dword ptr [EDI + 0x54]
00a67580 : MOV ECX,dword ptr [EAX]
00a67582 : MOV EDX,dword ptr [EDI]
00a67584 : MOV dword ptr [EDI + 0x5c],ECX
00a67587 : MOV ECX,dword ptr [0x00da93ec]
00a6758d : PUSH EDX
00a6758e : CALL 0x00a1a840
00a67593 : MOV EBX,EAX
00a67595 : TEST EBX,EBX
00a67597 : JZ 0x00a67630
00a6759d : MOV EAX,dword ptr [EDI + 0xdc]
00a675a3 : SUB EAX,dword ptr [EDI + 0xd8]
00a675a9 : MOV ESI,dword ptr [EBX + 0x17f0]
00a675af : TEST EAX,0xfffffffc
00a675b4 : JNZ 0x00a675d2
00a675b6 : TEST ESI,ESI
00a675b8 : JZ 0x00a675bf
00a675ba : CALL 0x0084c1a0
00a675bf : MOV EBX,dword ptr [EBX + 0x1870]
00a675c5 : TEST EBX,EBX
00a675c7 : JZ 0x00a67630
00a675c9 : MOV ESI,EBX
00a675cb : CALL 0x0084c1a0
00a675d0 : JMP 0x00a67630
00a675d2 : TEST ESI,ESI
00a675d4 : JZ 0x00a675fe
00a675d6 : MOV ECX,dword ptr [ESI + 0x168]
00a675dc : TEST ECX,ECX
00a675de : JZ 0x00a675e9
00a675e0 : MOV EDX,dword ptr [ECX]
00a675e2 : MOV EAX,dword ptr [EDX + 0x10]
00a675e5 : PUSH 0x0
00a675e7 : CALL EAX
00a675e9 : MOV ESI,dword ptr [ESI + 0x16c]
00a675ef : TEST ESI,ESI
00a675f1 : JZ 0x00a675fe
00a675f3 : MOV EDX,dword ptr [ESI]
00a675f5 : MOV EAX,dword ptr [EDX + 0x10]
00a675f8 : PUSH 0x0
00a675fa : MOV ECX,ESI
00a675fc : CALL EAX
00a675fe : MOV EBX,dword ptr [EBX + 0x1870]
00a67604 : TEST EBX,EBX
00a67606 : JZ 0x00a67630
00a67608 : MOV ECX,dword ptr [EBX + 0x168]
00a6760e : TEST ECX,ECX
00a67610 : JZ 0x00a6761b
00a67612 : MOV EDX,dword ptr [ECX]
00a67614 : MOV EAX,dword ptr [EDX + 0x10]
00a67617 : PUSH 0x0
00a67619 : CALL EAX
00a6761b : MOV EBX,dword ptr [EBX + 0x16c]
00a67621 : TEST EBX,EBX
00a67623 : JZ 0x00a67630
00a67625 : MOV EDX,dword ptr [EBX]
00a67627 : MOV EAX,dword ptr [EDX + 0x10]
00a6762a : PUSH 0x0
00a6762c : MOV ECX,EBX
00a6762e : CALL EAX
00a67630 : MOV EAX,dword ptr [EDI + 0x5c]
00a67633 : MOV EBX,dword ptr [EDI + 0x54]
00a67636 : MOVSS XMM1,dword ptr [EBP + 0x8]
00a6763b : MOVSS dword ptr [EDI + 0xf0],XMM1
00a67643 : MOV dword ptr [EBP + -0x8],EAX
00a67646 : CMP EAX,EBX
00a67648 : JZ 0x00a67732
00a6764e : MOVZX ECX,word ptr [EAX + 0xc]
00a67652 : CVTSI2SS XMM0,ECX
00a67656 : COMISS XMM0,XMM1
00a67659 : JA 0x00a67732
00a6765f : CVTTSS2SI EDX,XMM0
00a67663 : MOVZX EAX,DX
00a67666 : LEA ECX,[EBP + 0x8]
00a67669 : MOV dword ptr [EBP + 0x8],EAX
00a6766c : PUSH ECX
00a6766d : LEA ECX,[EDI + 0x50]
00a67670 : LEA EAX,[EBP + -0x4]
00a67673 : CALL 0x00413b60
00a67678 : MOV ESI,dword ptr [EBP + -0x4]
00a6767b : CMP ESI,EBX
00a6767d : JZ 0x00a676b4
00a6767f : MOV EDX,dword ptr [EDI + 0x48]
00a67682 : SUB EDX,dword ptr [EDI + 0x44]
00a67685 : TEST EDX,0xfffffffc
00a6768b : JZ 0x00a676af
00a6768d : MOV ECX,dword ptr [ESI + 0x10]
00a67690 : MOVZX EDX,byte ptr [ECX + 0x4]
00a67694 : MOV EAX,dword ptr [ECX]
00a67696 : MOV EAX,dword ptr [EAX + 0x14]
00a67699 : PUSH EDX
00a6769a : MOVZX EDX,word ptr [ESI + 0xc]
00a6769e : PUSH EDX
00a6769f : MOV EDX,dword ptr [EDI + 0x44]
00a676a2 : PUSH EDX
00a676a3 : MOV EDX,dword ptr [EDI + 0x48]
00a676a6 : SUB EDX,dword ptr [EDI + 0x44]
00a676a9 : SAR EDX,0x2
00a676ac : PUSH EDX
00a676ad : CALL EAX
00a676af : MOV dword ptr [EDI + 0x5c],ESI
00a676b2 : JMP 0x00a676eb
00a676b4 : MOV ECX,dword ptr [EDI + 0x48]
00a676b7 : SUB ECX,dword ptr [EDI + 0x44]
00a676ba : TEST ECX,0xfffffffc
00a676c0 : JZ 0x00a676eb
00a676c2 : MOV EDX,dword ptr [EBP + -0x8]
00a676c5 : MOV ECX,dword ptr [EDX + 0x10]
00a676c8 : TEST ECX,ECX
00a676ca : JZ 0x00a676eb
00a676cc : MOV EDX,dword ptr [ESI + 0x10]
00a676cf : MOVZX EDX,byte ptr [EDX + 0x4]
00a676d3 : MOV EAX,dword ptr [ECX]
00a676d5 : MOV EAX,dword ptr [EAX + 0x14]
00a676d8 : PUSH EDX
00a676d9 : MOV EDX,dword ptr [EDI + 0x44]
00a676dc : PUSH 0x0
00a676de : PUSH EDX
00a676df : MOV EDX,dword ptr [EDI + 0x48]
00a676e2 : SUB EDX,dword ptr [EDI + 0x44]
00a676e5 : SAR EDX,0x2
00a676e8 : PUSH EDX
00a676e9 : CALL EAX
00a676eb : MOV ECX,dword ptr [EDI + 0x5c]
00a676ee : MOV ECX,dword ptr [ECX + 0x10]
00a676f1 : LEA ESI,[EDI + 0x5c]
00a676f4 : TEST ECX,ECX
00a676f6 : JZ 0x00a67724
00a676f8 : MOV EDX,dword ptr [ECX]
00a676fa : MOV EAX,dword ptr [EDX + 0x4]
00a676fd : CALL EAX
00a676ff : TEST EAX,EAX
00a67701 : JNZ 0x00a67724
00a67703 : INC word ptr [EDI + 0xea]
00a6770a : MOVZX ECX,word ptr [EDI + 0xea]
00a67711 : MOVZX EAX,word ptr [EDI + 0xe8]
00a67718 : CMP CX,AX
00a6771b : JC 0x00a67724
00a6771d : MOV word ptr [EDI + 0xea],AX
00a67724 : MOV ECX,dword ptr [ESI]
00a67726 : CMP ECX,dword ptr [EDI + 0x54]
00a67729 : JZ 0x00a67732
00a6772b : MOV EDX,ESI
00a6772d : CALL 0x00416210
00a67732 : POP ESI
00a67733 : POP EBX
00a67734 : MOV ESP,EBP
00a67736 : POP EBP
00a67737 : RET 0x4
