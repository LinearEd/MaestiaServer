PROGRAM  : Maestia.exe
FUNCTION : FUN_0077e440
ENTRY    : 0077e440
BODY     : [[0077e440, 0077e692]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0077e440(int param_1,char param_2)

{
  undefined1 uVar1;
  int *piVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  char cVar6;
  int *piVar7;
  int iVar8;
  int iVar9;
  undefined4 uVar10;
  int iVar11;
  undefined2 uVar12;
  int *in_ECX;
  bool bVar13;
  int local_14;
  
  local_14 = 0;
  if ((param_1 != 0) && ((in_ECX[3] - in_ECX[2] & 0xfffffffcU) != 0)) {
    in_ECX[0xc] = param_1;
    FUN_004852b0(in_ECX[2],in_ECX[3],in_ECX[3] - in_ECX[2] >> 2,FUN_0077d910);
    piVar2 = *(int **)(*(int *)(in_ECX[5] + 0x14) + 0x1c);
    if (piVar2 != (int *)0x0) {
      bVar13 = *(int *)(param_1 + 8) == 0;
      (**(code **)*in_ECX)();
      (**(code **)(*in_ECX + 0x1c))(param_1);
      piVar7 = (int *)in_ECX[2];
      if (piVar7 != (int *)in_ECX[3]) {
        do {
          iVar11 = *piVar7;
          iVar3 = *(int *)(iVar11 + 0x18);
          piVar4 = *(int **)(iVar3 + 4);
          iVar5 = *(int *)(iVar3 + 8);
          if ((*(char *)((int)piVar4 + 0x226) == '\0') &&
             ((piVar4[0x7a] == 0 || (*(char *)(piVar4[0x7a] + 0x50) == '\0')))) {
            uVar1 = *(undefined1 *)(iVar11 + 0xf);
            if (bVar13) {
              *(undefined1 *)(iVar11 + 0xf) = 0;
            }
            cVar6 = (**(code **)(*in_ECX + 8))(iVar11);
            if (cVar6 != '\0') {
              *(undefined1 *)(iVar11 + 0xf) = uVar1;
              (**(code **)(*in_ECX + 0x28))(iVar3);
              (**(code **)(*in_ECX + 0x24))(iVar3,iVar11);
              iVar8 = (**(code **)(*piVar4 + 4))();
              if (in_ECX[10] != iVar5) {
                if (iVar8 != 0x15) {
                  (**(code **)(*in_ECX + 0x14))(*(undefined4 *)(piVar4[0x7a] + 0xd0));
                }
                else {
                  iVar9 = FUN_00767f10();
                  if (iVar9 == -1) goto LAB_0077e63a;
                  iVar9 = *in_ECX;
                  uVar10 = FUN_004854c0();
                  (**(code **)(iVar9 + 0x14))(uVar10);
                }
                (**(code **)(*in_ECX + 0x18))(iVar5);
                (**(code **)(*in_ECX + 0x2c))(iVar3);
                in_ECX[10] = iVar5;
              }
              (**(code **)(*in_ECX + 0x34))(iVar11);
              if (!bVar13) {
                (**(code **)(*in_ECX + 0x10))(iVar3);
              }
              (**(code **)(*piVar2 + 0x104))(piVar2);
              if (iVar8 != 0x15) {
                uVar12 = *(undefined2 *)(*(int *)(piVar4[0x7a] + 0xd0) + 0x10);
              }
              else {
                iVar11 = FUN_00767f10();
                if (iVar11 == -1) goto LAB_0077e63a;
                iVar11 = FUN_004854c0();
                uVar12 = *(undefined2 *)(iVar11 + 0x10);
              }
              (**(code **)(*(int *)in_ECX[6] + 0x148))
                        ((int *)in_ECX[6],4,0,0,uVar12,0,*(undefined2 *)(iVar5 + 0xc));
              local_14 = local_14 + 1;
            }
          }
LAB_0077e63a:
          piVar7 = piVar7 + 1;
        } while (piVar7 != (int *)in_ECX[3]);
      }
      (**(code **)(*in_ECX + 0x20))();
      (**(code **)(*in_ECX + 4))();
      in_ECX[0xc] = 0;
      if (param_2 == '\0') {
        in_ECX[10] = 0;
        in_ECX[0xb] = 0;
        in_ECX[9] = 0;
        return local_14;
      }
      (**(code **)(*in_ECX + 0x3c))();
      return local_14;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0077e440 : PUSH EBP
0077e441 : MOV EBP,ESP
0077e443 : SUB ESP,0x20
0077e446 : PUSH EBX
0077e447 : PUSH ESI
0077e448 : MOV ESI,dword ptr [EBP + 0x8]
0077e44b : XOR EBX,EBX
0077e44d : PUSH EDI
0077e44e : MOV EDI,ECX
0077e450 : MOV dword ptr [EBP + -0x10],EBX
0077e453 : CMP ESI,EBX
0077e455 : JNZ 0x0077e462
0077e457 : POP EDI
0077e458 : POP ESI
0077e459 : XOR EAX,EAX
0077e45b : POP EBX
0077e45c : MOV ESP,EBP
0077e45e : POP EBP
0077e45f : RET 0xc
0077e462 : MOV EAX,dword ptr [EDI + 0xc]
0077e465 : SUB EAX,dword ptr [EDI + 0x8]
0077e468 : TEST EAX,0xfffffffc
0077e46d : JZ 0x0077e457
0077e46f : MOV EAX,dword ptr [EDI + 0xc]
0077e472 : MOV ECX,dword ptr [EDI + 0x8]
0077e475 : MOV EDX,EAX
0077e477 : SUB EDX,ECX
0077e479 : PUSH 0x77d910
0077e47e : SAR EDX,0x2
0077e481 : PUSH EDX
0077e482 : PUSH EAX
0077e483 : PUSH ECX
0077e484 : MOV dword ptr [EDI + 0x30],ESI
0077e487 : CALL 0x004852b0
0077e48c : MOV EAX,dword ptr [EDI + 0x14]
0077e48f : MOV ECX,dword ptr [EAX + 0x14]
0077e492 : MOV EAX,dword ptr [ECX + 0x1c]
0077e495 : ADD ESP,0x10
0077e498 : MOV dword ptr [EBP + -0x20],EAX
0077e49b : CMP EAX,EBX
0077e49d : JZ 0x0077e457
0077e49f : CMP dword ptr [ESI + 0x8],EBX
0077e4a2 : MOV EDX,dword ptr [EDI]
0077e4a4 : MOV EAX,dword ptr [EDX]
0077e4a6 : MOV ECX,EDI
0077e4a8 : SETZ byte ptr [EBP + 0xb]
0077e4ac : CALL EAX
0077e4ae : MOV EDX,dword ptr [EDI]
0077e4b0 : MOV EAX,dword ptr [EDX + 0x1c]
0077e4b3 : PUSH ESI
0077e4b4 : MOV ECX,EDI
0077e4b6 : CALL EAX
0077e4b8 : MOV EAX,dword ptr [EDI + 0x8]
0077e4bb : MOV dword ptr [EBP + -0x14],EAX
0077e4be : CMP EAX,dword ptr [EDI + 0xc]
0077e4c1 : JZ 0x0077e64e
0077e4c7 : MOV EAX,dword ptr [EAX]
0077e4c9 : MOV ESI,dword ptr [EAX + 0x18]
0077e4cc : MOV EBX,dword ptr [ESI + 0x4]
0077e4cf : CMP byte ptr [EBX + 0x226],0x0
0077e4d6 : MOV ECX,dword ptr [ESI + 0x8]
0077e4d9 : MOV dword ptr [EBP + -0xc],EAX
0077e4dc : MOV dword ptr [EBP + -0x1c],ESI
0077e4df : MOV dword ptr [EBP + -0x8],ECX
0077e4e2 : JNZ 0x0077e63a
0077e4e8 : MOV ECX,dword ptr [EBX + 0x1e8]
0077e4ee : TEST ECX,ECX
0077e4f0 : JZ 0x0077e4fc
0077e4f2 : CMP byte ptr [ECX + 0x50],0x0
0077e4f6 : JNZ 0x0077e63a
0077e4fc : CMP byte ptr [EBP + 0xb],0x0
0077e500 : MOVZX EDX,byte ptr [EAX + 0xf]
0077e504 : MOV dword ptr [EBP + -0x18],EDX
0077e507 : JZ 0x0077e50d
0077e509 : MOV byte ptr [EAX + 0xf],0x0
0077e50d : MOV EDX,dword ptr [EDI]
0077e50f : PUSH EAX
0077e510 : MOV EAX,dword ptr [EDX + 0x8]
0077e513 : MOV ECX,EDI
0077e515 : CALL EAX
0077e517 : TEST AL,AL
0077e519 : JZ 0x0077e63a
0077e51f : MOV CL,byte ptr [EBP + -0x18]
0077e522 : MOV EDX,dword ptr [EBP + -0xc]
0077e525 : MOV byte ptr [EDX + 0xf],CL
0077e528 : MOV EAX,dword ptr [EDI]
0077e52a : MOV EDX,dword ptr [EAX + 0x28]
0077e52d : PUSH ESI
0077e52e : MOV ECX,EDI
0077e530 : CALL EDX
0077e532 : MOV ECX,dword ptr [EBP + -0xc]
0077e535 : MOV EAX,dword ptr [EDI]
0077e537 : MOV EDX,dword ptr [EAX + 0x24]
0077e53a : PUSH ECX
0077e53b : PUSH ESI
0077e53c : MOV ECX,EDI
0077e53e : CALL EDX
0077e540 : MOV EAX,dword ptr [EBX]
0077e542 : MOV EDX,dword ptr [EAX + 0x4]
0077e545 : MOV ECX,EBX
0077e547 : CALL EDX
0077e549 : MOV ECX,dword ptr [EBP + -0x8]
0077e54c : CMP EAX,0x15
0077e54f : SETZ AL
0077e552 : MOV byte ptr [EBP + -0x1],AL
0077e555 : CMP dword ptr [EDI + 0x28],ECX
0077e558 : JZ 0x0077e5b9
0077e55a : TEST AL,AL
0077e55c : JZ 0x0077e586
0077e55e : MOV EDX,EBX
0077e560 : CALL 0x00767f10
0077e565 : CMP EAX,-0x1
0077e568 : JZ 0x0077e63a
0077e56e : MOV ESI,dword ptr [EDI]
0077e570 : MOV ECX,EAX
0077e572 : MOV EAX,EBX
0077e574 : CALL 0x004854c0
0077e579 : MOV EDX,dword ptr [ESI + 0x14]
0077e57c : PUSH EAX
0077e57d : MOV ECX,EDI
0077e57f : CALL EDX
0077e581 : MOV ESI,dword ptr [EBP + -0x1c]
0077e584 : JMP 0x0077e59c
0077e586 : MOV ECX,dword ptr [EBX + 0x1e8]
0077e58c : MOV EDX,dword ptr [ECX + 0xd0]
0077e592 : MOV EAX,dword ptr [EDI]
0077e594 : MOV EAX,dword ptr [EAX + 0x14]
0077e597 : PUSH EDX
0077e598 : MOV ECX,EDI
0077e59a : CALL EAX
0077e59c : MOV EDX,dword ptr [EDI]
0077e59e : MOV EAX,dword ptr [EBP + -0x8]
0077e5a1 : MOV EDX,dword ptr [EDX + 0x18]
0077e5a4 : PUSH EAX
0077e5a5 : MOV ECX,EDI
0077e5a7 : CALL EDX
0077e5a9 : MOV EAX,dword ptr [EDI]
0077e5ab : MOV EDX,dword ptr [EAX + 0x2c]
0077e5ae : PUSH ESI
0077e5af : MOV ECX,EDI
0077e5b1 : CALL EDX
0077e5b3 : MOV EAX,dword ptr [EBP + -0x8]
0077e5b6 : MOV dword ptr [EDI + 0x28],EAX
0077e5b9 : MOV EDX,dword ptr [EDI]
0077e5bb : MOV EAX,dword ptr [EBP + -0xc]
0077e5be : MOV EDX,dword ptr [EDX + 0x34]
0077e5c1 : PUSH EAX
0077e5c2 : MOV ECX,EDI
0077e5c4 : CALL EDX
0077e5c6 : CMP byte ptr [EBP + 0xb],0x0
0077e5ca : JNZ 0x0077e5d6
0077e5cc : MOV EAX,dword ptr [EDI]
0077e5ce : MOV EDX,dword ptr [EAX + 0x10]
0077e5d1 : PUSH ESI
0077e5d2 : MOV ECX,EDI
0077e5d4 : CALL EDX
0077e5d6 : MOV EAX,dword ptr [EBP + -0x20]
0077e5d9 : MOV ECX,dword ptr [EAX]
0077e5db : MOV EDX,dword ptr [ECX + 0x104]
0077e5e1 : PUSH EAX
0077e5e2 : CALL EDX
0077e5e4 : CMP byte ptr [EBP + -0x1],0x0
0077e5e8 : JZ 0x0077e605
0077e5ea : MOV EDX,EBX
0077e5ec : CALL 0x00767f10
0077e5f1 : CMP EAX,-0x1
0077e5f4 : JZ 0x0077e63a
0077e5f6 : MOV ECX,EAX
0077e5f8 : MOV EAX,EBX
0077e5fa : CALL 0x004854c0
0077e5ff : MOVZX ECX,word ptr [EAX + 0x10]
0077e603 : JMP 0x0077e615
0077e605 : MOV EAX,dword ptr [EBX + 0x1e8]
0077e60b : MOV ECX,dword ptr [EAX + 0xd0]
0077e611 : MOVZX ECX,word ptr [ECX + 0x10]
0077e615 : MOV ESI,dword ptr [EBP + -0x8]
0077e618 : MOVZX ESI,word ptr [ESI + 0xc]
0077e61c : MOV EAX,dword ptr [EDI + 0x18]
0077e61f : MOV EDX,dword ptr [EAX]
0077e621 : MOV EDX,dword ptr [EDX + 0x148]
0077e627 : PUSH ESI
0077e628 : PUSH 0x0
0077e62a : MOVZX ECX,CX
0077e62d : PUSH ECX
0077e62e : PUSH 0x0
0077e630 : PUSH 0x0
0077e632 : PUSH 0x4
0077e634 : PUSH EAX
0077e635 : CALL EDX
0077e637 : INC dword ptr [EBP + -0x10]
0077e63a : MOV EAX,dword ptr [EBP + -0x14]
0077e63d : ADD EAX,0x4
0077e640 : MOV dword ptr [EBP + -0x14],EAX
0077e643 : CMP EAX,dword ptr [EDI + 0xc]
0077e646 : JNZ 0x0077e4c7
0077e64c : XOR EBX,EBX
0077e64e : MOV EAX,dword ptr [EDI]
0077e650 : MOV EDX,dword ptr [EAX + 0x20]
0077e653 : MOV ECX,EDI
0077e655 : CALL EDX
0077e657 : MOV EAX,dword ptr [EDI]
0077e659 : MOV EDX,dword ptr [EAX + 0x4]
0077e65c : MOV ECX,EDI
0077e65e : CALL EDX
0077e660 : CMP byte ptr [EBP + 0xc],0x0
0077e664 : MOV dword ptr [EDI + 0x30],EBX
0077e667 : JZ 0x0077e67e
0077e669 : MOV EAX,dword ptr [EDI]
0077e66b : MOV EDX,dword ptr [EAX + 0x3c]
0077e66e : MOV ECX,EDI
0077e670 : CALL EDX
0077e672 : MOV EAX,dword ptr [EBP + -0x10]
0077e675 : POP EDI
0077e676 : POP ESI
0077e677 : POP EBX
0077e678 : MOV ESP,EBP
0077e67a : POP EBP
0077e67b : RET 0xc
0077e67e : MOV EAX,dword ptr [EBP + -0x10]
0077e681 : MOV dword ptr [EDI + 0x28],EBX
0077e684 : MOV dword ptr [EDI + 0x2c],EBX
0077e687 : MOV dword ptr [EDI + 0x24],EBX
0077e68a : POP EDI
0077e68b : POP ESI
0077e68c : POP EBX
0077e68d : MOV ESP,EBP
0077e68f : POP EBP
0077e690 : RET 0xc
