PROGRAM  : Maestia.exe
FUNCTION : FUN_006af4d0
ENTRY    : 006af4d0
BODY     : [[006af4d0, 006af55b] [006af560, 006af604]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006af4d0(int param_1,int param_2)

{
  int iVar1;
  void *_Dst;
  int *piVar2;
  int iVar3;
  size_t _Size;
  int local_40;
  undefined4 *puStack_3c;
  int local_38;
  undefined4 uStack_34;
  int local_30 [12];
  
  iVar3 = 0;
  local_40 = 0;
  (**(code **)(param_2 + 0x3c))(param_2,local_30,4,&local_38);
  if (local_38 < 0) {
    *(undefined4 *)(param_2 + 0xc) = 0xa2;
    return;
  }
  if ((local_38 != 0) && (local_38 < 5)) {
    iVar1 = FUN_006aebc0(local_38);
    if (iVar1 == 0) {
      uStack_34 = *(undefined4 *)(param_1 + 100);
      if (0 < local_38) {
        puStack_3c = (undefined4 *)(*(int *)(param_1 + 0x210) + 8);
        piVar2 = local_30;
        local_40 = 0;
        do {
          if (*(char *)*piVar2 == '/') {
            *piVar2 = (int)((char *)*piVar2 + 1);
          }
          _Size = piVar2[1] - *piVar2;
          if (_Size == 0) {
            *(undefined4 *)(param_2 + 0xc) = 3;
            return;
          }
          _Dst = (void *)FUN_00688c00(uStack_34,_Size + 1,&local_40);
          *puStack_3c = _Dst;
          if (local_40 != 0) {
            *(int *)(param_2 + 0xc) = local_40;
            return;
          }
          _memcpy(_Dst,(void *)*piVar2,_Size);
          puStack_3c = puStack_3c + 1;
          iVar3 = iVar3 + 1;
          *(undefined1 *)((int)_Dst + _Size) = 0;
          piVar2 = piVar2 + 3;
        } while (iVar3 < local_38);
        *(int *)(param_2 + 0xc) = local_40;
        return;
      }
    }
    *(int *)(param_2 + 0xc) = iVar1;
    return;
  }
  *(undefined4 *)(param_2 + 0xc) = 3;
  return;
}



============================================================
DISASSEMBLY
============================================================
006af4d0 : SUB ESP,0x40
006af4d3 : PUSH EBP
006af4d4 : PUSH ESI
006af4d5 : MOV ESI,dword ptr [ESP + 0x50]
006af4d9 : MOV EDX,dword ptr [ESI + 0x3c]
006af4dc : LEA EAX,[ESP + 0x10]
006af4e0 : PUSH EAX
006af4e1 : PUSH 0x4
006af4e3 : LEA ECX,[ESP + 0x20]
006af4e7 : PUSH ECX
006af4e8 : XOR EBP,EBP
006af4ea : PUSH ESI
006af4eb : MOV dword ptr [ESP + 0x18],EBP
006af4ef : CALL EDX
006af4f1 : MOV EAX,dword ptr [ESP + 0x20]
006af4f5 : ADD ESP,0x10
006af4f8 : CMP EAX,EBP
006af4fa : JGE 0x006af50a
006af4fc : MOV EAX,0xa2
006af501 : MOV dword ptr [ESI + 0xc],EAX
006af504 : POP ESI
006af505 : POP EBP
006af506 : ADD ESP,0x40
006af509 : RET
006af50a : JZ 0x006af5de
006af510 : CMP EAX,0x4
006af513 : JG 0x006af5de
006af519 : PUSH EDI
006af51a : MOV EDI,dword ptr [ESP + 0x50]
006af51e : PUSH EAX
006af51f : XOR EAX,EAX
006af521 : MOV ECX,EDI
006af523 : CALL 0x006aebc0
006af528 : ADD ESP,0x4
006af52b : MOV dword ptr [ESP + 0xc],EAX
006af52f : CMP EAX,EBP
006af531 : JNZ 0x006af5ec
006af537 : CMP dword ptr [ESP + 0x14],EBP
006af53b : MOV EDX,dword ptr [EDI + 0x64]
006af53e : MOV ECX,dword ptr [EDI + 0x210]
006af544 : MOV dword ptr [ESP + 0x18],EDX
006af548 : JLE 0x006af5ec
006af54e : ADD ECX,0x8
006af551 : PUSH EBX
006af552 : LEA EBX,[ESP + 0x20]
006af556 : MOV dword ptr [ESP + 0x14],ECX
006af55a : JMP 0x006af564
006af560 : MOV ESI,dword ptr [ESP + 0x58]
006af564 : MOV EAX,dword ptr [EBX]
006af566 : CMP byte ptr [EAX],0x2f
006af569 : JNZ 0x006af56e
006af56b : INC EAX
006af56c : MOV dword ptr [EBX],EAX
006af56e : MOV EDI,dword ptr [EBX + 0x4]
006af571 : SUB EDI,dword ptr [EBX]
006af573 : JZ 0x006af5ce
006af575 : MOV EDX,dword ptr [ESP + 0x1c]
006af579 : LEA EAX,[ESP + 0x10]
006af57d : PUSH EAX
006af57e : LEA ECX,[EDI + 0x1]
006af581 : PUSH ECX
006af582 : PUSH EDX
006af583 : CALL 0x00688c00
006af588 : MOV ESI,EAX
006af58a : MOV EAX,dword ptr [ESP + 0x20]
006af58e : MOV dword ptr [EAX],ESI
006af590 : MOV EAX,dword ptr [ESP + 0x1c]
006af594 : ADD ESP,0xc
006af597 : TEST EAX,EAX
006af599 : JNZ 0x006af5f6
006af59b : MOV ECX,dword ptr [EBX]
006af59d : PUSH EDI
006af59e : PUSH ECX
006af59f : PUSH ESI
006af5a0 : CALL 0x0063ae40
006af5a5 : ADD dword ptr [ESP + 0x20],0x4
006af5aa : INC EBP
006af5ab : ADD ESP,0xc
006af5ae : MOV byte ptr [ESI + EDI*0x1],0x0
006af5b2 : ADD EBX,0xc
006af5b5 : CMP EBP,dword ptr [ESP + 0x18]
006af5b9 : JL 0x006af560
006af5bb : MOV EDX,dword ptr [ESP + 0x10]
006af5bf : MOV EAX,dword ptr [ESP + 0x58]
006af5c3 : POP EBX
006af5c4 : POP EDI
006af5c5 : POP ESI
006af5c6 : MOV dword ptr [EAX + 0xc],EDX
006af5c9 : POP EBP
006af5ca : ADD ESP,0x40
006af5cd : RET
006af5ce : POP EBX
006af5cf : MOV EAX,0x3
006af5d4 : POP EDI
006af5d5 : MOV dword ptr [ESI + 0xc],EAX
006af5d8 : POP ESI
006af5d9 : POP EBP
006af5da : ADD ESP,0x40
006af5dd : RET
006af5de : MOV EAX,0x3
006af5e3 : MOV dword ptr [ESI + 0xc],EAX
006af5e6 : POP ESI
006af5e7 : POP EBP
006af5e8 : ADD ESP,0x40
006af5eb : RET
006af5ec : POP EDI
006af5ed : MOV dword ptr [ESI + 0xc],EAX
006af5f0 : POP ESI
006af5f1 : POP EBP
006af5f2 : ADD ESP,0x40
006af5f5 : RET
006af5f6 : MOV ECX,dword ptr [ESP + 0x58]
006af5fa : POP EBX
006af5fb : POP EDI
006af5fc : POP ESI
006af5fd : MOV dword ptr [ECX + 0xc],EAX
006af600 : POP EBP
006af601 : ADD ESP,0x40
006af604 : RET
