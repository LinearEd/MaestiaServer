PROGRAM  : Maestia.exe
FUNCTION : FUN_005b3d20
ENTRY    : 005b3d20
BODY     : [[005b3d20, 005b3e44]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005b3d20(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  undefined4 local_1c;
  int local_18;
  undefined1 local_14;
  int iStack_c;
  
  iVar2 = (int)param_2;
  puVar1 = param_1;
  local_18 = (int)param_2;
  local_14 = 8;
  iVar3 = FUN_00515840(0x34,0);
  if (iVar3 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = FUN_005b3ac0(&local_18);
  }
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = uVar4;
  param_1[1] = 0;
  puVar5 = (undefined4 *)FUN_00515840(0x50,0);
  if (puVar5 == (undefined4 *)0x0) {
    param_1 = (undefined4 *)0x0;
  }
  else {
    uVar4 = FUN_00530910(1);
    FUN_005cdcc0(&local_18,uVar4,param_1);
    *puVar5 = &PTR_LAB_00b90018;
    puVar5[4] = &PTR_LAB_00b92b78;
    puVar5[0xc] = &PTR_LAB_00b911dc;
    puVar5[2] = puVar5[2] + 1 & 0x8fffffff;
    param_1 = puVar5;
  }
  param_2 = param_1;
  local_1c = 0x19;
  FUN_0050ff10(&local_1c,&param_2);
  if (param_2 != (undefined4 *)0x0) {
    FUN_00503db0();
  }
  puVar5 = &param_2;
  param_2 = (undefined4 *)((uint)param_2 & 0xffffff00);
  iVar3 = *(int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  uVar4 = FUN_00526210(puVar1);
  (**(code **)(iVar3 + 0x28))(&local_18,iVar2 + 0x6c,uVar4,puVar5);
  FUN_00526bc0();
  if (iStack_c != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005b3d20 : SUB ESP,0x1c
005b3d23 : PUSH EBX
005b3d24 : PUSH EBP
005b3d25 : PUSH ESI
005b3d26 : PUSH EDI
005b3d27 : MOV EDI,dword ptr [ESP + 0x34]
005b3d2b : MOV ECX,dword ptr [EDI + 0x288]
005b3d31 : XOR EBX,EBX
005b3d33 : PUSH EBX
005b3d34 : PUSH 0x34
005b3d36 : MOV dword ptr [ESP + 0x1c],EDI
005b3d3a : MOV byte ptr [ESP + 0x20],0x8
005b3d3f : CALL 0x00515840
005b3d44 : CMP EAX,EBX
005b3d46 : JZ 0x005b3d56
005b3d48 : LEA ECX,[ESP + 0x14]
005b3d4c : PUSH ECX
005b3d4d : MOV ECX,EAX
005b3d4f : CALL 0x005b3ac0
005b3d54 : JMP 0x005b3d58
005b3d56 : XOR EAX,EAX
005b3d58 : MOV EBP,dword ptr [ESP + 0x30]
005b3d5c : PUSH EBX
005b3d5d : MOV byte ptr [EBP + 0x8],BL
005b3d60 : MOV dword ptr [EBP],EAX
005b3d63 : MOV dword ptr [EBP + 0x4],EBX
005b3d66 : MOV ECX,dword ptr [EDI + 0x288]
005b3d6c : PUSH 0x50
005b3d6e : CALL 0x00515840
005b3d73 : MOV ESI,EAX
005b3d75 : CMP ESI,EBX
005b3d77 : JZ 0x005b3e3c
005b3d7d : PUSH 0x1
005b3d7f : MOV ECX,EDI
005b3d81 : CALL 0x00530910
005b3d86 : PUSH EBP
005b3d87 : PUSH EAX
005b3d88 : LEA EDX,[ESP + 0x1c]
005b3d8c : PUSH EDX
005b3d8d : MOV ECX,ESI
005b3d8f : CALL 0x005cdcc0
005b3d94 : MOV dword ptr [ESI],0xb90018
005b3d9a : MOV dword ptr [ESI + 0x10],0xb92b78
005b3da1 : MOV dword ptr [ESI + 0x30],0xb911dc
005b3da8 : MOV EAX,dword ptr [ESI + 0x8]
005b3dab : INC EAX
005b3dac : AND EAX,0x8fffffff
005b3db1 : MOV dword ptr [ESP + 0x30],ESI
005b3db5 : MOV dword ptr [ESI + 0x8],EAX
005b3db8 : MOV ECX,dword ptr [ESP + 0x30]
005b3dbc : LEA EDX,[ESP + 0x34]
005b3dc0 : PUSH EDX
005b3dc1 : LEA EAX,[ESP + 0x14]
005b3dc5 : MOV dword ptr [ESP + 0x38],ECX
005b3dc9 : PUSH EAX
005b3dca : LEA ECX,[EDI + 0x278]
005b3dd0 : MOV dword ptr [ESP + 0x18],0x19
005b3dd8 : CALL 0x0050ff10
005b3ddd : MOV ECX,dword ptr [ESP + 0x34]
005b3de1 : CMP ECX,EBX
005b3de3 : JZ 0x005b3dea
005b3de5 : CALL 0x00503db0
005b3dea : MOV EBX,dword ptr [EDI + 0x2a0]
005b3df0 : LEA ECX,[ESP + 0x34]
005b3df4 : PUSH ECX
005b3df5 : ADD EBX,0x10
005b3df8 : MOV byte ptr [ESP + 0x38],0x0
005b3dfd : MOV ESI,dword ptr [EBX]
005b3dff : PUSH EBP
005b3e00 : LEA ECX,[ESP + 0x24]
005b3e04 : ADD ESI,0x28
005b3e07 : CALL 0x00526210
005b3e0c : PUSH EAX
005b3e0d : MOV EAX,dword ptr [ESI]
005b3e0f : ADD EDI,0x6c
005b3e12 : PUSH EDI
005b3e13 : LEA EDX,[ESP + 0x20]
005b3e17 : PUSH EDX
005b3e18 : MOV ECX,EBX
005b3e1a : CALL EAX
005b3e1c : LEA ECX,[ESP + 0x1c]
005b3e20 : CALL 0x00526bc0
005b3e25 : MOV ECX,dword ptr [ESP + 0x30]
005b3e29 : TEST ECX,ECX
005b3e2b : JZ 0x005b3e32
005b3e2d : CALL 0x00503db0
005b3e32 : POP EDI
005b3e33 : POP ESI
005b3e34 : MOV EAX,EBP
005b3e36 : POP EBP
005b3e37 : POP EBX
005b3e38 : ADD ESP,0x1c
005b3e3b : RET
005b3e3c : MOV dword ptr [ESP + 0x30],EBX
005b3e40 : JMP 0x005b3db8
