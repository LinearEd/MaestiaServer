PROGRAM  : Maestia.exe
FUNCTION : FUN_007d16b0
ENTRY    : 007d16b0
BODY     : [[007d16b0, 007d179a] [007d1841, 007d1854]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007d16b0(undefined4 param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  uint uStack_5c;
  int local_2c;
  int local_28;
  int local_24;
  int local_1c;
  int local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b28acf;
  local_10 = ExceptionList;
  uStack_5c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_5c;
  ExceptionList = &local_10;
  param_3 = param_3 + -8;
  while( true ) {
    iVar2 = 0;
    if (param_3 < 1) break;
    local_24 = (**(code **)(*param_2 + 0xc))(&local_2c,4,1);
    iVar1 = (**(code **)(*param_2 + 0xc))(&local_28,4,1);
    local_24 = local_24 + iVar1;
    if (local_2c == 0x50535010) {
      local_18 = 0;
      local_8 = 0;
      local_1c = FUN_006f0300(0x11c);
      local_8 = CONCAT31(local_8._1_3_,1);
      if (local_1c != 0) {
        iVar2 = FUN_007668d0(local_1c);
      }
      local_8 = 0xffffffff;
      local_18 = iVar2;
      (**(code **)(*param_2 + 0xc))(iVar2 + 0xc,2,1);
      FUN_007d11d0(param_1,param_2,local_28 + -2);
      FUN_007d03e0(iVar2);
      param_3 = param_3 - local_28;
    }
    else {
      (**(code **)(*param_2 + 0x24))(local_28);
      param_3 = param_3 - local_28;
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007d16b0 : PUSH EBP
007d16b1 : MOV EBP,ESP
007d16b3 : PUSH -0x1
007d16b5 : PUSH 0xb28acf
007d16ba : MOV EAX,FS:[0x0]
007d16c0 : PUSH EAX
007d16c1 : SUB ESP,0x3c
007d16c4 : PUSH EBX
007d16c5 : PUSH ESI
007d16c6 : PUSH EDI
007d16c7 : MOV EAX,[0x00d66fa0]
007d16cc : XOR EAX,EBP
007d16ce : PUSH EAX
007d16cf : LEA EAX,[EBP + -0xc]
007d16d2 : MOV FS:[0x0],EAX
007d16d8 : MOV dword ptr [EBP + -0x10],ESP
007d16db : MOV ESI,dword ptr [EBP + 0xc]
007d16de : MOV EBX,dword ptr [EBP + 0x10]
007d16e1 : ADD EBX,-0x8
007d16e4 : MOV dword ptr [EBP + 0x10],EBX
007d16e7 : XOR EDI,EDI
007d16e9 : CMP EBX,EDI
007d16eb : JLE 0x007d1841
007d16f1 : MOV EAX,dword ptr [ESI]
007d16f3 : PUSH 0x1
007d16f5 : PUSH 0x4
007d16f7 : LEA ECX,[EBP + -0x28]
007d16fa : PUSH ECX
007d16fb : MOV ECX,ESI
007d16fd : MOV EDX,dword ptr [EAX + 0xc]
007d1700 : CALL EDX
007d1702 : MOV dword ptr [EBP + -0x20],EAX
007d1705 : MOV EAX,dword ptr [ESI]
007d1707 : PUSH 0x1
007d1709 : PUSH 0x4
007d170b : LEA ECX,[EBP + -0x24]
007d170e : PUSH ECX
007d170f : MOV ECX,ESI
007d1711 : MOV EDX,dword ptr [EAX + 0xc]
007d1714 : CALL EDX
007d1716 : ADD dword ptr [EBP + -0x20],EAX
007d1719 : CMP dword ptr [EBP + -0x28],0x50535010
007d1720 : JZ 0x007d1734
007d1722 : MOV EAX,dword ptr [ESI]
007d1724 : MOV ECX,dword ptr [EBP + -0x24]
007d1727 : PUSH ECX
007d1728 : MOV ECX,ESI
007d172a : MOV EDX,dword ptr [EAX + 0x24]
007d172d : CALL EDX
007d172f : SUB EBX,dword ptr [EBP + -0x24]
007d1732 : JMP 0x007d16e4
007d1734 : MOV dword ptr [EBP + -0x14],EDI
007d1737 : MOV dword ptr [EBP + -0x4],EDI
007d173a : PUSH 0x11c
007d173f : CALL 0x006f0300
007d1744 : ADD ESP,0x4
007d1747 : MOV dword ptr [EBP + -0x18],EAX
007d174a : MOV byte ptr [EBP + -0x4],0x1
007d174e : CMP EAX,EDI
007d1750 : JZ 0x007d175a
007d1752 : PUSH EAX
007d1753 : CALL 0x007668d0
007d1758 : MOV EDI,EAX
007d175a : MOV byte ptr [EBP + -0x4],0x0
007d175e : MOV dword ptr [EBP + -0x14],EDI
007d1761 : MOV dword ptr [EBP + -0x4],0xffffffff
007d1768 : MOV EAX,dword ptr [ESI]
007d176a : PUSH 0x1
007d176c : PUSH 0x2
007d176e : LEA ECX,[EDI + 0xc]
007d1771 : PUSH ECX
007d1772 : MOV ECX,ESI
007d1774 : MOV EDX,dword ptr [EAX + 0xc]
007d1777 : CALL EDX
007d1779 : MOV EAX,dword ptr [EBP + -0x24]
007d177c : ADD EAX,-0x2
007d177f : PUSH EAX
007d1780 : PUSH ESI
007d1781 : MOV ECX,dword ptr [EBP + 0x8]
007d1784 : PUSH ECX
007d1785 : CALL 0x007d11d0
007d178a : PUSH EDI
007d178b : MOV ECX,dword ptr [EBP + 0x14]
007d178e : CALL 0x007d03e0
007d1793 : SUB EBX,dword ptr [EBP + -0x24]
007d1796 : JMP 0x007d16e4
007d1841 : MOV ECX,dword ptr [EBP + -0xc]
007d1844 : MOV dword ptr FS:[0x0],ECX
007d184b : POP ECX
007d184c : POP EDI
007d184d : POP ESI
007d184e : POP EBX
007d184f : MOV ESP,EBP
007d1851 : POP EBP
007d1852 : RET 0x10
