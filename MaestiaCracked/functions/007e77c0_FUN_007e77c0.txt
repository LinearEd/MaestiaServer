PROGRAM  : Maestia.exe
FUNCTION : FUN_007e77c0
ENTRY    : 007e77c0
BODY     : [[007e77c0, 007e7bf4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_007e77c0(int param_1,float *param_2,int *param_3,int param_4,undefined4 param_5,float param_6,
            float param_7,float param_8,float param_9)

{
  float *pfVar1;
  float *pfVar2;
  char cVar3;
  uint uVar4;
  int iVar5;
  int in_ECX;
  float local_dc;
  float local_d4;
  float local_d0;
  float local_c8;
  undefined8 local_54;
  float local_4c;
  int local_48;
  float local_44;
  int local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30;
  float local_2c;
  float local_28;
  undefined1 local_24 [4];
  int *local_20;
  int *piStack_1c;
  float local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  pfVar2 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3c9a3;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (param_1 != 0) {
    local_44 = param_2[2];
    pfVar1 = param_2 + 2;
    local_18 = *param_2;
    iVar5 = FUN_007df230(local_18,local_44);
    if (iVar5 != 0) {
      local_3c = 0.0;
      local_38 = 0.0;
      local_34 = 0.0;
      local_54 = 0;
      local_4c = 0.0;
      param_2 = (float *)((uint)param_2 & 0xffffff);
      piStack_1c = (int *)local_18;
      local_18 = local_44;
      FUN_007aee90(&local_44,&local_3c,(int)&param_2 + 3);
      local_30 = -*pfVar2;
      local_2c = -pfVar2[1];
      local_28 = -*pfVar1;
      if (param_6._0_1_ == '\0') {
        if (((param_7 != DAT_01720f20) || (param_8 != DAT_01720f24)) || (param_9 != DAT_01720f28)) {
          local_30 = -param_7;
          local_2c = -param_8;
          local_28 = -param_9;
        }
      }
      else {
        iVar5 = _rand();
        param_6 = (float)(iVar5 % 100 + -0x32);
        iVar5 = _rand();
        local_30 = param_6 - *pfVar2;
        local_2c = -pfVar2[1];
        local_28 = (float)(iVar5 % 100 + -0x32) - *pfVar1;
      }
      D3DXVec3Normalize(&local_30,&local_30,uVar4);
      local_20 = (int *)(local_28 * local_38 - local_2c * local_34);
      local_4c = local_2c * local_3c - local_38 * local_30;
      piStack_1c = (int *)(local_34 * local_30 - local_28 * local_3c);
      local_54 = CONCAT44(piStack_1c,local_20);
      local_18 = local_4c;
      D3DXVec3Normalize(&local_54,&local_54);
      if (param_2._3_1_ == '\0') {
        local_20 = (int *)0x0;
        piStack_1c = (int *)0x0;
        local_18 = 0.0;
        local_8 = 0;
        FUN_0045cc60();
        FUN_007e2a40(in_ECX,local_24);
        if (((int)piStack_1c - (int)local_20 & 0xfffffffcU) == 0) {
          local_8 = 0xffffffff;
          FUN_004f0ef0();
          ExceptionList = local_10;
          return 0;
        }
        FUN_007703a0(pfVar2,param_5);
        FUN_0079eb80();
        local_8 = CONCAT31(local_8._1_3_,1);
        uVar4 = *(uint *)(*(int *)(in_ECX + 0x9c) + 0x58);
        param_2 = *(float **)(param_1 + 0x1108c);
        param_6 = (float)(uVar4 + 1);
        uVar4 = uVar4 >> 1;
        param_3 = local_20;
        if (local_20 != piStack_1c) {
          do {
            param_4 = *param_3;
            if (param_4 != 0) {
              FUN_00439630();
              local_40 = (int)local_dc;
              local_3c = (float)(int)local_d4;
              local_38 = (float)(int)local_d0;
              local_34 = (float)(int)local_c8;
              local_48 = (int)*pfVar2;
              local_44 = (float)(int)pfVar2[2];
              cVar3 = FUN_0045e490();
              if (cVar3 != '\0') {
                param_4 = *(int *)(param_4 + 0x308);
                FUN_00770c60(param_1,pfVar2,0,uVar4,param_4);
                FUN_00770c60(param_1,pfVar2,uVar4,uVar4,param_4);
                FUN_00770c60(param_1,pfVar2,0,uVar4,param_4);
                FUN_00770c60(param_1,pfVar2,uVar4,uVar4,param_4);
                FUN_00770210(0,0,0x3f800000,0x3f800000);
              }
            }
            param_3 = param_3 + 1;
          } while (param_3 != piStack_1c);
        }
        local_8 = 0xffffffff;
        if (local_20 != (int *)0x0) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
      }
      else {
        local_20 = (int *)*pfVar2;
        local_18 = *pfVar1;
        piStack_1c = (int *)local_44;
        FUN_00771580(&local_3c);
      }
      ExceptionList = local_10;
      return 1;
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007e77c0 : PUSH EBP
007e77c1 : MOV EBP,ESP
007e77c3 : PUSH -0x1
007e77c5 : PUSH 0xb3c9a3
007e77ca : MOV EAX,FS:[0x0]
007e77d0 : PUSH EAX
007e77d1 : SUB ESP,0xd0
007e77d7 : PUSH EBX
007e77d8 : PUSH ESI
007e77d9 : PUSH EDI
007e77da : MOV EAX,[0x00d66fa0]
007e77df : XOR EAX,EBP
007e77e1 : PUSH EAX
007e77e2 : LEA EAX,[EBP + -0xc]
007e77e5 : MOV FS:[0x0],EAX
007e77eb : MOV EBX,dword ptr [EBP + 0xc]
007e77ee : MOV EDI,ECX
007e77f0 : CMP dword ptr [EBP + 0x8],0x0
007e77f4 : JZ 0x007e7a4b
007e77fa : FLD float ptr [EBX + 0x8]
007e77fd : LEA ESI,[EBX + 0x8]
007e7800 : FST float ptr [EBP + -0x40]
007e7803 : SUB ESP,0x8
007e7806 : FLD float ptr [EBX]
007e7808 : FST float ptr [EBP + -0x14]
007e780b : FXCH
007e780d : FSTP float ptr [ESP + 0x4]
007e7811 : FSTP float ptr [ESP]
007e7814 : CALL 0x007df230
007e7819 : TEST EAX,EAX
007e781b : JZ 0x007e7a4b
007e7821 : XORPS XMM0,XMM0
007e7824 : MOVSS XMM1,dword ptr [EBP + -0x40]
007e7829 : LEA ECX,[EBP + 0xf]
007e782c : PUSH ECX
007e782d : LEA EDX,[EBP + -0x38]
007e7830 : PUSH EDX
007e7831 : LEA ECX,[EBP + -0x40]
007e7834 : MOVSS dword ptr [EBP + -0x38],XMM0
007e7839 : MOVSS dword ptr [EBP + -0x34],XMM0
007e783e : MOVSS dword ptr [EBP + -0x30],XMM0
007e7843 : MOVSS dword ptr [EBP + -0x50],XMM0
007e7848 : MOVSS dword ptr [EBP + -0x4c],XMM0
007e784d : MOVSS dword ptr [EBP + -0x48],XMM0
007e7852 : MOVSS XMM0,dword ptr [EBP + -0x14]
007e7857 : PUSH ECX
007e7858 : LEA ECX,[EBP + -0x18]
007e785b : MOV EDX,EAX
007e785d : MOV byte ptr [EBP + 0xf],0x0
007e7861 : MOVSS dword ptr [EBP + -0x18],XMM0
007e7866 : MOVSS dword ptr [EBP + -0x14],XMM1
007e786b : CALL 0x007aee90
007e7870 : CMP byte ptr [EBP + 0x1c],0x0
007e7874 : MOVSS XMM0,dword ptr [0x00cdf0c0]
007e787c : MOVSS XMM1,dword ptr [EBX]
007e7880 : MOVSS XMM2,dword ptr [EBX + 0x4]
007e7885 : MOVSS XMM3,dword ptr [ESI]
007e7889 : XORPS XMM1,XMM0
007e788c : XORPS XMM2,XMM0
007e788f : XORPS XMM3,XMM0
007e7892 : MOVSS dword ptr [EBP + -0x2c],XMM1
007e7897 : MOVSS dword ptr [EBP + -0x28],XMM2
007e789c : MOVSS dword ptr [EBP + -0x24],XMM3
007e78a1 : JZ 0x007e78fd
007e78a3 : CALL 0x00635d2f
007e78a8 : CDQ
007e78a9 : MOV ECX,0x64
007e78ae : IDIV ECX
007e78b0 : SUB EDX,0x32
007e78b3 : CVTSI2SS XMM0,EDX
007e78b7 : MOVSS dword ptr [EBP + 0x1c],XMM0
007e78bc : CALL 0x00635d2f
007e78c1 : CDQ
007e78c2 : MOV ECX,0x64
007e78c7 : IDIV ECX
007e78c9 : MOVSS XMM1,dword ptr [EBP + 0x1c]
007e78ce : SUBSS XMM1,dword ptr [EBX]
007e78d2 : MOVAPS XMM2,XMM1
007e78d5 : MOVSS XMM1,dword ptr [EBX + 0x4]
007e78da : XORPS XMM1,xmmword ptr [0x00cdf0c0]
007e78e1 : MOVSS dword ptr [EBP + -0x2c],XMM2
007e78e6 : MOVSS dword ptr [EBP + -0x28],XMM1
007e78eb : SUB EDX,0x32
007e78ee : CVTSI2SS XMM0,EDX
007e78f2 : SUBSS XMM0,dword ptr [ESI]
007e78f6 : MOVSS dword ptr [EBP + -0x24],XMM0
007e78fb : JMP 0x007e794b
007e78fd : MOVSS XMM1,dword ptr [EBP + 0x20]
007e7902 : UCOMISS XMM1,dword ptr [0x01720f20]
007e7909 : MOVSS XMM2,dword ptr [EBP + 0x28]
007e790e : MOVSS XMM3,dword ptr [EBP + 0x24]
007e7913 : LAHF
007e7914 : TEST AH,0x44
007e7917 : JP 0x007e7933
007e7919 : UCOMISS XMM3,dword ptr [0x01720f24]
007e7920 : LAHF
007e7921 : TEST AH,0x44
007e7924 : JP 0x007e7933
007e7926 : UCOMISS XMM2,dword ptr [0x01720f28]
007e792d : LAHF
007e792e : TEST AH,0x44
007e7931 : JNP 0x007e794b
007e7933 : XORPS XMM1,XMM0
007e7936 : XORPS XMM3,XMM0
007e7939 : XORPS XMM2,XMM0
007e793c : MOVSS dword ptr [EBP + -0x2c],XMM1
007e7941 : MOVSS dword ptr [EBP + -0x28],XMM3
007e7946 : MOVSS dword ptr [EBP + -0x24],XMM2
007e794b : LEA EDX,[EBP + -0x2c]
007e794e : PUSH EDX
007e794f : MOV EAX,EDX
007e7951 : PUSH EAX
007e7952 : CALL 0x004ff722
007e7957 : MOVSS XMM0,dword ptr [EBP + -0x28]
007e795c : MOVSS XMM2,dword ptr [EBP + -0x24]
007e7961 : MOVSS XMM3,dword ptr [EBP + -0x34]
007e7966 : MOVSS XMM1,dword ptr [EBP + -0x30]
007e796b : MOVAPS XMM5,XMM0
007e796e : MULSS XMM5,XMM1
007e7972 : MOVAPS XMM4,XMM2
007e7975 : MULSS XMM4,XMM3
007e7979 : SUBSS XMM4,XMM5
007e797d : MOVSS XMM5,dword ptr [EBP + -0x38]
007e7982 : MOVSS dword ptr [EBP + -0x1c],XMM4
007e7987 : MOVSS XMM4,dword ptr [EBP + -0x2c]
007e798c : MULSS XMM0,XMM5
007e7990 : LEA EDX,[EBP + -0x50]
007e7993 : MULSS XMM3,XMM4
007e7997 : SUBSS XMM0,XMM3
007e799b : MULSS XMM1,XMM4
007e799f : MULSS XMM2,XMM5
007e79a3 : MOVSS dword ptr [EBP + -0x14],XMM0
007e79a8 : MOV ECX,dword ptr [EBP + -0x14]
007e79ab : SUBSS XMM1,XMM2
007e79af : PUSH EDX
007e79b0 : MOV EAX,EDX
007e79b2 : MOVSS dword ptr [EBP + -0x18],XMM1
007e79b7 : MOVQ XMM0,qword ptr [EBP + -0x1c]
007e79bc : PUSH EAX
007e79bd : MOVQ qword ptr [EBP + -0x50],XMM0
007e79c2 : MOV dword ptr [EBP + -0x48],ECX
007e79c5 : CALL 0x004ff722
007e79ca : CMP byte ptr [EBP + 0xf],0x0
007e79ce : JZ 0x007e7a0d
007e79d0 : MOVSS XMM0,dword ptr [EBX]
007e79d4 : MOVSS XMM4,dword ptr [EBP + 0x14]
007e79d9 : MOVSS XMM2,dword ptr [EBP + 0x10]
007e79de : MOVSS dword ptr [EBP + -0x1c],XMM0
007e79e3 : MOVSS XMM0,dword ptr [ESI]
007e79e7 : LEA ECX,[EBP + -0x38]
007e79ea : MOVSS dword ptr [EBP + -0x14],XMM0
007e79ef : MOVSS XMM0,dword ptr [EBP + -0x40]
007e79f4 : PUSH ECX
007e79f5 : MOV ECX,dword ptr [EBP + 0x8]
007e79f8 : LEA EAX,[EBP + -0x50]
007e79fb : LEA EDI,[EBP + -0x1c]
007e79fe : MOVSS dword ptr [EBP + -0x18],XMM0
007e7a03 : CALL 0x00771580
007e7a08 : JMP 0x007e7bdf
007e7a0d : XOR EAX,EAX
007e7a0f : MOV dword ptr [EBP + -0x1c],EAX
007e7a12 : MOV dword ptr [EBP + -0x18],EAX
007e7a15 : MOV dword ptr [EBP + -0x14],EAX
007e7a18 : MOV dword ptr [EBP + -0x4],EAX
007e7a1b : LEA ECX,[EBP + -0x20]
007e7a1e : CALL 0x0045cc60
007e7a23 : LEA EDX,[EBP + -0x20]
007e7a26 : PUSH EDX
007e7a27 : PUSH EDI
007e7a28 : MOV EAX,EBX
007e7a2a : CALL 0x007e2a40
007e7a2f : MOV EAX,dword ptr [EBP + -0x18]
007e7a32 : SUB EAX,dword ptr [EBP + -0x1c]
007e7a35 : TEST EAX,0xfffffffc
007e7a3a : JNZ 0x007e7a61
007e7a3c : MOV dword ptr [EBP + -0x4],0xffffffff
007e7a43 : LEA ESI,[EBP + -0x20]
007e7a46 : CALL 0x004f0ef0
007e7a4b : XOR AL,AL
007e7a4d : MOV ECX,dword ptr [EBP + -0xc]
007e7a50 : MOV dword ptr FS:[0x0],ECX
007e7a57 : POP ECX
007e7a58 : POP EDI
007e7a59 : POP ESI
007e7a5a : POP EBX
007e7a5b : MOV ESP,EBP
007e7a5d : POP EBP
007e7a5e : RET 0x24
007e7a61 : FLD float ptr [EBP + 0x18]
007e7a64 : MOV ESI,dword ptr [EBP + 0x8]
007e7a67 : MOVSS XMM3,dword ptr [EBP + 0x14]
007e7a6c : MOVSS XMM2,dword ptr [EBP + 0x10]
007e7a71 : PUSH ECX
007e7a72 : FSTP float ptr [ESP]
007e7a75 : PUSH EBX
007e7a76 : LEA EAX,[EBP + -0x50]
007e7a79 : LEA ECX,[EBP + -0x38]
007e7a7c : CALL 0x007703a0
007e7a81 : LEA ESI,[EBP + 0xffffff24]
007e7a87 : CALL 0x0079eb80
007e7a8c : MOV byte ptr [EBP + -0x4],0x1
007e7a90 : MOV EAX,dword ptr [EDI + 0x9c]
007e7a96 : MOV EAX,dword ptr [EAX + 0x58]
007e7a99 : MOV ECX,dword ptr [EBP + 0x8]
007e7a9c : MOVSS XMM0,dword ptr [ECX + 0x1108c]
007e7aa4 : MOV ECX,dword ptr [EBP + -0x1c]
007e7aa7 : LEA EDI,[EAX + 0x1]
007e7aaa : MOV dword ptr [EBP + 0x1c],EDI
007e7aad : DEC EDI
007e7aae : SHR EDI,0x1
007e7ab0 : MOV EAX,ECX
007e7ab2 : MOVSS dword ptr [EBP + 0xc],XMM0
007e7ab7 : MOV dword ptr [EBP + 0x10],EAX
007e7aba : CMP ECX,dword ptr [EBP + -0x18]
007e7abd : JZ 0x007e7bb6
007e7ac3 : MOV EAX,dword ptr [EAX]
007e7ac5 : MOV dword ptr [EBP + 0x14],EAX
007e7ac8 : TEST EAX,EAX
007e7aca : JZ 0x007e7ba1
007e7ad0 : LEA ECX,[EAX + 0x3a0]
007e7ad6 : LEA EAX,[EBP + 0xffffff24]
007e7adc : CALL 0x00439630
007e7ae1 : CVTTSS2SI EDX,dword ptr [EBP + 0xffffff28]
007e7ae9 : CVTTSS2SI EAX,dword ptr [EBP + 0xffffff30]
007e7af1 : CVTTSS2SI ECX,dword ptr [EBP + 0xffffff34]
007e7af9 : MOVSS XMM0,dword ptr [EBP + 0xc]
007e7afe : MOV dword ptr [EBP + -0x3c],EDX
007e7b01 : CVTTSS2SI EDX,dword ptr [EBP + 0xffffff3c]
007e7b09 : MOV dword ptr [EBP + -0x38],EAX
007e7b0c : CVTTSS2SI EAX,dword ptr [EBX]
007e7b10 : MOV dword ptr [EBP + -0x34],ECX
007e7b13 : CVTTSS2SI ECX,dword ptr [EBX + 0x8]
007e7b18 : MOV dword ptr [EBP + -0x30],EDX
007e7b1b : LEA ESI,[EBP + -0x44]
007e7b1e : LEA EDX,[EBP + -0x3c]
007e7b21 : MOV dword ptr [EBP + -0x44],EAX
007e7b24 : MOV dword ptr [EBP + -0x40],ECX
007e7b27 : CALL 0x0045e490
007e7b2c : TEST AL,AL
007e7b2e : JZ 0x007e7ba1
007e7b30 : MOV EDX,dword ptr [EBP + 0x14]
007e7b33 : MOV EAX,dword ptr [EDX + 0x308]
007e7b39 : MOV ESI,dword ptr [EBP + 0x8]
007e7b3c : MOV ECX,dword ptr [EBP + 0x1c]
007e7b3f : PUSH EAX
007e7b40 : PUSH EDI
007e7b41 : PUSH 0x0
007e7b43 : PUSH EBX
007e7b44 : MOV dword ptr [EBP + 0x14],EAX
007e7b47 : PUSH ESI
007e7b48 : XOR EAX,EAX
007e7b4a : CALL 0x00770c60
007e7b4f : MOV EAX,dword ptr [EBP + 0x14]
007e7b52 : MOV ECX,dword ptr [EBP + 0x1c]
007e7b55 : PUSH EAX
007e7b56 : PUSH EDI
007e7b57 : PUSH EDI
007e7b58 : PUSH EBX
007e7b59 : PUSH ESI
007e7b5a : XOR EAX,EAX
007e7b5c : CALL 0x00770c60
007e7b61 : MOV ECX,dword ptr [EBP + 0x14]
007e7b64 : PUSH ECX
007e7b65 : MOV ECX,dword ptr [EBP + 0x1c]
007e7b68 : PUSH EDI
007e7b69 : PUSH 0x0
007e7b6b : PUSH EBX
007e7b6c : PUSH ESI
007e7b6d : MOV EAX,EDI
007e7b6f : CALL 0x00770c60
007e7b74 : MOV EDX,dword ptr [EBP + 0x14]
007e7b77 : MOV ECX,dword ptr [EBP + 0x1c]
007e7b7a : PUSH EDX
007e7b7b : PUSH EDI
007e7b7c : PUSH EDI
007e7b7d : PUSH EBX
007e7b7e : PUSH ESI
007e7b7f : MOV EAX,EDI
007e7b81 : CALL 0x00770c60
007e7b86 : FLD1
007e7b88 : SUB ESP,0x10
007e7b8b : FST float ptr [ESP + 0xc]
007e7b8f : FSTP float ptr [ESP + 0x8]
007e7b93 : FLDZ
007e7b95 : FST float ptr [ESP + 0x4]
007e7b99 : FSTP float ptr [ESP]
007e7b9c : CALL 0x00770210
007e7ba1 : MOV EAX,dword ptr [EBP + 0x10]
007e7ba4 : ADD EAX,0x4
007e7ba7 : MOV dword ptr [EBP + 0x10],EAX
007e7baa : CMP EAX,dword ptr [EBP + -0x18]
007e7bad : JNZ 0x007e7ac3
007e7bb3 : MOV ECX,dword ptr [EBP + -0x1c]
007e7bb6 : MOV byte ptr [EBP + -0x4],0x0
007e7bba : MOV dword ptr [EBP + 0xffffff24],0xcd083c
007e7bc4 : MOV dword ptr [EBP + -0x4],0xffffffff
007e7bcb : XOR ESI,ESI
007e7bcd : CMP ECX,ESI
007e7bcf : JZ 0x007e7bd6
007e7bd1 : CALL 0x006f04e0
007e7bd6 : MOV dword ptr [EBP + -0x1c],ESI
007e7bd9 : MOV dword ptr [EBP + -0x18],ESI
007e7bdc : MOV dword ptr [EBP + -0x14],ESI
007e7bdf : MOV AL,0x1
007e7be1 : MOV ECX,dword ptr [EBP + -0xc]
007e7be4 : MOV dword ptr FS:[0x0],ECX
007e7beb : POP ECX
007e7bec : POP EDI
007e7bed : POP ESI
007e7bee : POP EBX
007e7bef : MOV ESP,EBP
007e7bf1 : POP EBP
007e7bf2 : RET 0x24
