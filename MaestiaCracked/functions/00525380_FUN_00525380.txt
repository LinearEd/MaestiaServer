PROGRAM  : Maestia.exe
FUNCTION : FUN_00525380
ENTRY    : 00525380
BODY     : [[00525380, 0052544d]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00525380(undefined4 *param_1,undefined4 param_2,uint param_3)

{
  uint *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  int *in_ECX;
  undefined4 local_c;
  uint local_8;
  undefined4 local_4;
  
  uVar4 = param_2;
  uVar3 = param_1;
  local_c = param_1;
  uVar5 = FUN_0051b370(param_1,param_2,0x1505);
  uVar5 = uVar5 & 0xffffff;
  local_4 = uVar4;
  local_8 = uVar5;
  if ((*in_ECX != 0) && (iVar6 = FUN_005250b0(&local_c,*(uint *)(*in_ECX + 4) & uVar5), -1 < iVar6))
  {
    puVar2 = *(undefined4 **)(*in_ECX + 0xc + iVar6 * 8);
    puVar1 = puVar2 + 3;
    *puVar1 = *puVar1 | param_3;
    return puVar2;
  }
  if (in_ECX[2] == 0) {
    FUN_00524d60();
  }
  puVar2 = (undefined4 *)in_ECX[2];
  if (puVar2 == (undefined4 *)0x0) {
    return (undefined4 *)in_ECX[6];
  }
  in_ECX[2] = puVar2[1];
  puVar2[2] = 0;
  puVar2[4] = param_2;
  *puVar2 = uVar3;
  puVar2[3] = uVar5 | param_3 | 0x40000000;
  puVar2[1] = 0;
  param_1 = puVar2;
  FUN_00524fb0(in_ECX,&param_1,puVar2[3]);
  return puVar2;
}



============================================================
DISASSEMBLY
============================================================
00525380 : SUB ESP,0xc
00525383 : PUSH EBX
00525384 : PUSH EBP
00525385 : MOV EBP,dword ptr [ESP + 0x18]
00525389 : PUSH ESI
0052538a : MOV ESI,dword ptr [ESP + 0x20]
0052538e : PUSH EDI
0052538f : PUSH 0x1505
00525394 : PUSH ESI
00525395 : PUSH EBP
00525396 : MOV EBX,ECX
00525398 : MOV dword ptr [ESP + 0x1c],EBP
0052539c : CALL 0x0051b370
005253a1 : MOV EDI,EAX
005253a3 : MOV EAX,dword ptr [EBX]
005253a5 : AND EDI,0xffffff
005253ab : MOV dword ptr [ESP + 0x14],EDI
005253af : MOV dword ptr [ESP + 0x18],ESI
005253b3 : TEST EAX,EAX
005253b5 : JZ 0x005253e4
005253b7 : MOV EAX,dword ptr [EAX + 0x4]
005253ba : AND EAX,EDI
005253bc : PUSH EAX
005253bd : LEA EAX,[ESP + 0x14]
005253c1 : PUSH EAX
005253c2 : MOV ECX,EBX
005253c4 : CALL 0x005250b0
005253c9 : TEST EAX,EAX
005253cb : JL 0x005253e4
005253cd : MOV ECX,dword ptr [EBX]
005253cf : MOV EAX,dword ptr [ECX + EAX*0x8 + 0xc]
005253d3 : MOV EDX,dword ptr [ESP + 0x28]
005253d7 : OR dword ptr [EAX + 0xc],EDX
005253da : POP EDI
005253db : POP ESI
005253dc : POP EBP
005253dd : POP EBX
005253de : ADD ESP,0xc
005253e1 : RET 0xc
005253e4 : CMP dword ptr [EBX + 0x8],0x0
005253e8 : JNZ 0x005253f1
005253ea : MOV ECX,EBX
005253ec : CALL 0x00524d60
005253f1 : MOV ESI,dword ptr [EBX + 0x8]
005253f4 : XOR EAX,EAX
005253f6 : CMP ESI,EAX
005253f8 : JZ 0x00525400
005253fa : MOV ECX,dword ptr [ESI + 0x4]
005253fd : MOV dword ptr [EBX + 0x8],ECX
00525400 : MOV dword ptr [ESP + 0x20],ESI
00525404 : CMP ESI,EAX
00525406 : JZ 0x00525441
00525408 : OR EDI,dword ptr [ESP + 0x28]
0052540c : MOV EDX,dword ptr [ESP + 0x24]
00525410 : MOV dword ptr [ESI + 0x8],EAX
00525413 : MOV dword ptr [ESI + 0x10],EDX
00525416 : MOV dword ptr [ESI],EBP
00525418 : OR EDI,0x40000000
0052541e : MOV dword ptr [ESI + 0xc],EDI
00525421 : MOV dword ptr [ESI + 0x4],EAX
00525424 : MOV EAX,dword ptr [ESI + 0xc]
00525427 : PUSH EAX
00525428 : LEA ECX,[ESP + 0x24]
0052542c : PUSH ECX
0052542d : PUSH EBX
0052542e : MOV ECX,EBX
00525430 : CALL 0x00524fb0
00525435 : POP EDI
00525436 : MOV EAX,ESI
00525438 : POP ESI
00525439 : POP EBP
0052543a : POP EBX
0052543b : ADD ESP,0xc
0052543e : RET 0xc
00525441 : MOV EAX,dword ptr [EBX + 0x18]
00525444 : POP EDI
00525445 : POP ESI
00525446 : POP EBP
00525447 : POP EBX
00525448 : ADD ESP,0xc
0052544b : RET 0xc
