PROGRAM  : Maestia.exe
FUNCTION : FUN_005f4550
ENTRY    : 005f4550
BODY     : [[005f4550, 005f4639]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f4550(int param_1,undefined4 param_2,int param_3)

{
  ushort uVar1;
  ushort uVar2;
  int *piVar3;
  int iVar4;
  
  piVar3 = *(int **)(param_3 + 8);
  if (*piVar3 == 0) {
    if ((uint)(param_1 * 2) < (uint)*(ushort *)(param_3 + 0x24)) {
      if (piVar3[4] == 0) {
        if (piVar3[5] == 0) {
          FUN_005f34f0(param_3,param_1);
        }
      }
      else if ((((piVar3[5] == 0) &&
                (*(short *)((int)piVar3 + 0x1e) == *(short *)(*(int *)(param_3 + 0x1c) + 4))) &&
               ((uint)(param_1 * 2) < (uint)*(ushort *)(piVar3 + 7))) &&
              (uVar2 = *(ushort *)(piVar3 + 6), uVar1 = *(ushort *)(param_3 + 0x22),
              (uVar2 == uVar1) !=
              ((uint)uVar2 + (uint)*(ushort *)(piVar3 + 7) ==
              (uint)uVar1 + (uint)*(ushort *)(param_3 + 0x24)))) {
        FUN_005f3570(param_3,uVar2 == uVar1,param_1);
      }
    }
  }
  iVar4 = FUN_005f43f0(param_1,param_2,*(undefined4 *)(param_3 + 8));
  if (iVar4 == 0) {
    *(short *)(param_3 + 0x26) = *(short *)(param_3 + 0x26) + 1;
  }
  uVar2 = *(ushort *)(param_3 + 0x26);
  if (uVar2 < 0x11) {
    if ((uVar2 != 0) && (iVar4 != 0)) {
      *(ushort *)(param_3 + 0x26) = uVar2 - 1;
    }
    return;
  }
  *(undefined4 *)(*(int *)(param_3 + 0x14) + 0x18) = *(undefined4 *)(param_3 + 0x18);
  *(undefined4 *)(*(int *)(param_3 + 0x18) + 0x14) = *(undefined4 *)(param_3 + 0x14);
  *(ushort *)(param_3 + 0x20) = *(ushort *)(param_3 + 0x20) | 0x4000;
  return;
}



============================================================
DISASSEMBLY
============================================================
005f4550 : PUSH ECX
005f4551 : PUSH EBP
005f4552 : MOV EBP,dword ptr [ESP + 0xc]
005f4556 : PUSH ESI
005f4557 : MOV ESI,dword ptr [ESP + 0x18]
005f455b : MOV EAX,dword ptr [ESI + 0x8]
005f455e : CMP dword ptr [EAX],0x0
005f4561 : MOV EDX,ECX
005f4563 : MOV dword ptr [ESP + 0x8],EDX
005f4567 : JNZ 0x005f45e0
005f4569 : PUSH EBX
005f456a : MOVZX EBX,word ptr [ESI + 0x24]
005f456e : LEA ECX,[EBP + EBP*0x1]
005f4572 : CMP EBX,ECX
005f4574 : JBE 0x005f45df
005f4576 : CMP dword ptr [EAX + 0x10],0x0
005f457a : JNZ 0x005f458d
005f457c : CMP dword ptr [EAX + 0x14],0x0
005f4580 : JNZ 0x005f45df
005f4582 : PUSH EBP
005f4583 : PUSH ESI
005f4584 : MOV ECX,EDX
005f4586 : CALL 0x005f34f0
005f458b : JMP 0x005f45df
005f458d : CMP dword ptr [EAX + 0x14],0x0
005f4591 : JNZ 0x005f45df
005f4593 : MOV EDX,dword ptr [ESI + 0x1c]
005f4596 : PUSH EDI
005f4597 : MOV DI,word ptr [EAX + 0x1e]
005f459b : CMP DI,word ptr [EDX + 0x4]
005f459f : JNZ 0x005f45de
005f45a1 : MOVZX EDI,word ptr [EAX + 0x1c]
005f45a5 : CMP EDI,ECX
005f45a7 : JBE 0x005f45de
005f45a9 : MOVZX EAX,word ptr [EAX + 0x18]
005f45ad : MOVZX ECX,word ptr [ESI + 0x22]
005f45b1 : CMP AX,CX
005f45b4 : SETZ DL
005f45b7 : MOVZX EAX,AX
005f45ba : MOVZX ECX,CX
005f45bd : ADD EAX,EDI
005f45bf : ADD ECX,EBX
005f45c1 : CMP EAX,ECX
005f45c3 : SETZ AL
005f45c6 : MOV byte ptr [ESP + 0x20],DL
005f45ca : CMP DL,AL
005f45cc : JZ 0x005f45de
005f45ce : MOV ECX,dword ptr [ESP + 0x20]
005f45d2 : PUSH EBP
005f45d3 : PUSH ECX
005f45d4 : MOV ECX,dword ptr [ESP + 0x18]
005f45d8 : PUSH ESI
005f45d9 : CALL 0x005f3570
005f45de : POP EDI
005f45df : POP EBX
005f45e0 : MOV EDX,dword ptr [ESI + 0x8]
005f45e3 : MOV EAX,dword ptr [ESP + 0x14]
005f45e7 : MOV ECX,dword ptr [ESP + 0x8]
005f45eb : PUSH EDX
005f45ec : PUSH EAX
005f45ed : PUSH EBP
005f45ee : CALL 0x005f43f0
005f45f3 : TEST EAX,EAX
005f45f5 : JNZ 0x005f45fb
005f45f7 : INC word ptr [ESI + 0x26]
005f45fb : MOVZX ECX,word ptr [ESI + 0x26]
005f45ff : CMP CX,0x10
005f4603 : JBE 0x005f4626
005f4605 : MOV ECX,dword ptr [ESI + 0x14]
005f4608 : MOV EDX,dword ptr [ESI + 0x18]
005f460b : MOV dword ptr [ECX + 0x18],EDX
005f460e : MOV ECX,dword ptr [ESI + 0x18]
005f4611 : MOV EDX,dword ptr [ESI + 0x14]
005f4614 : MOV dword ptr [ECX + 0x14],EDX
005f4617 : MOV ECX,0x4000
005f461c : OR word ptr [ESI + 0x20],CX
005f4620 : POP ESI
005f4621 : POP EBP
005f4622 : POP ECX
005f4623 : RET 0xc
005f4626 : TEST CX,CX
005f4629 : JZ 0x005f4634
005f462b : TEST EAX,EAX
005f462d : JZ 0x005f4634
005f462f : DEC ECX
005f4630 : MOV word ptr [ESI + 0x26],CX
005f4634 : POP ESI
005f4635 : POP EBP
005f4636 : POP ECX
005f4637 : RET 0xc
