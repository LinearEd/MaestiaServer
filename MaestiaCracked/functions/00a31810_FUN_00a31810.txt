PROGRAM  : Maestia.exe
FUNCTION : FUN_00a31810
ENTRY    : 00a31810
BODY     : [[00a31810, 00a31b20]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00a31810(void)

{
  undefined4 *puVar1;
  char cVar2;
  ushort uVar3;
  int in_EAX;
  int iVar4;
  int *piVar5;
  int in_ECX;
  
  if (in_EAX == 0xd) {
    iVar4 = FUN_008eb390();
    if (iVar4 != 0) {
      piVar5 = (int *)FUN_008eb390();
      (**(code **)(*piVar5 + 0x3c))();
      return 1;
    }
    if ((DAT_00da9877 == '\0') || (uVar3 = GetAsyncKeyState(0x11), (uVar3 & 0x8000) == 0)) {
      if ((*DAT_00da9894 != 0) &&
         (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
        (**(code **)*puVar1)("mc_chatwindow.onEnter");
      }
      return 1;
    }
    if (*DAT_00da9894 == 0) {
      return 1;
    }
    puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114);
    if (puVar1 == (undefined4 *)0x0) {
      return 1;
    }
    (**(code **)*puVar1)("mc_gmmode.SetFocus");
    return 1;
  }
  if (in_EAX == 0x1b) {
    iVar4 = *(int *)(in_ECX + 0xac);
    cVar2 = FUN_008896f0();
    if ((cVar2 != '\0') && (*(char *)(iVar4 + 0x427) != '\0')) {
      iVar4 = **(int **)(*DAT_00da9894 + 0x144);
      if (*(char *)((int)*(int **)(*DAT_00da9894 + 0x144) + 0x32) != '\0') {
        (**(code **)(iVar4 + 0x20))();
        return 1;
      }
      (**(code **)(iVar4 + 0x18))(0,300);
      return 1;
    }
    if ((*DAT_00da9894 != 0) && (cVar2 = FUN_00a31470(), cVar2 == '\0')) {
      FUN_0097fa60();
      cVar2 = FUN_0040e700();
      if ((cVar2 != '\0') || (cVar2 = FUN_0040e6b0(), cVar2 != '\0')) {
        FUN_00a2a690();
        return 1;
      }
      if ((DAT_017251d4 != 0) && (*(char *)(DAT_017251d4 + 0x34) != '\0')) {
        *(undefined4 *)(DAT_017251d4 + 0x30) = 2;
        return 1;
      }
      if (*(char *)(in_ECX + 0x550) != '\0') {
        *(undefined1 *)(in_ECX + 0x550) = 0;
        *(undefined4 *)(in_ECX + 0x548) = 0;
        *(undefined4 *)(in_ECX + 0x54c) = 0;
        *(undefined1 *)(in_ECX + 0x551) = 1;
        *(undefined1 *)(in_ECX + 0x553) = 1;
        if (*(int **)(in_ECX + 0x1bc) != (int *)0x0) {
          (**(code **)(**(int **)(in_ECX + 0x1bc) + 0x24))();
        }
        if (*(int **)(in_ECX + 0x1b8) == (int *)0x0) {
          return 1;
        }
        (**(code **)(**(int **)(in_ECX + 0x1b8) + 0x24))();
        return 1;
      }
      iVar4 = *DAT_00da9894;
      if ((*(int *)(iVar4 + 0xc) - *(int *)(iVar4 + 8) & 0xfffffffcU) != 0) {
        FUN_008eb5c0();
        return 1;
      }
      if (*(char *)(*(int *)(iVar4 + 0x16c) + 0x32) == '\0') {
        if (*(int *)(iVar4 + 300) != 0) {
          FUN_00abc150(*(undefined4 *)(*(int *)(*(int *)(iVar4 + 300) + 0x10) + 0x3c));
          return 1;
        }
        FUN_00abc150(uRam0000003c);
        return 1;
      }
      FUN_00a0d390(DAT_017247d4,0);
      *(undefined4 *)(in_ECX + 0x468) = 0;
      *(undefined4 *)(in_ECX + 0x46c) = 0;
      if (*(int *)(in_ECX + 0x4a4) == 0) {
        (**(code **)(**(int **)(*DAT_00da9894 + 0x16c) + 0x20))();
      }
      if ((*DAT_00da9894 != 0) && (piVar5 = *(int **)(*DAT_00da9894 + 0x114), piVar5 != (int *)0x0))
      {
        (**(code **)(*piVar5 + 4))(piVar5,"SelectPartyPlayer","%d,%d",0xffffffff,0xffffffff);
      }
      FUN_0040f010();
      if (*(int *)(in_ECX + 0xac) == 0) {
        return 1;
      }
      if (*(char *)(*(int *)(in_ECX + 0xac) + 0x1f5a) == '\0') {
        return 1;
      }
      if (DAT_00da93ec == 0) {
        return 1;
      }
      FUN_00902130(*(undefined4 *)(*(int *)(in_ECX + 600) + 4));
      return 1;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00a31810 : PUSH EBP
00a31811 : MOV EBP,ESP
00a31813 : AND ESP,0xfffffff8
00a31816 : SUB ESP,0x8
00a31819 : PUSH ESI
00a3181a : PUSH EDI
00a3181b : MOV ESI,ECX
00a3181d : CMP EAX,0xd
00a31820 : JZ 0x00a31a88
00a31826 : CMP EAX,0x1b
00a31829 : JNZ 0x00a3188f
00a3182b : MOV EDI,dword ptr [ESI + 0xac]
00a31831 : MOV EAX,EDI
00a31833 : CALL 0x008896f0
00a31838 : TEST AL,AL
00a3183a : JZ 0x00a3187b
00a3183c : CMP byte ptr [EDI + 0x427],0x0
00a31843 : JZ 0x00a3187b
00a31845 : MOV EAX,[0x00da9894]
00a3184a : MOV ECX,dword ptr [EAX]
00a3184c : MOV ECX,dword ptr [ECX + 0x144]
00a31852 : CMP byte ptr [ECX + 0x32],0x0
00a31856 : MOV EDX,dword ptr [ECX]
00a31858 : JNZ 0x00a3186e
00a3185a : MOV EAX,dword ptr [EDX + 0x18]
00a3185d : PUSH 0x12c
00a31862 : PUSH 0x0
00a31864 : CALL EAX
00a31866 : MOV AL,0x1
00a31868 : POP EDI
00a31869 : POP ESI
00a3186a : MOV ESP,EBP
00a3186c : POP EBP
00a3186d : RET
00a3186e : MOV EAX,dword ptr [EDX + 0x20]
00a31871 : CALL EAX
00a31873 : MOV AL,0x1
00a31875 : POP EDI
00a31876 : POP ESI
00a31877 : MOV ESP,EBP
00a31879 : POP EBP
00a3187a : RET
00a3187b : MOV ECX,dword ptr [0x00da9894]
00a31881 : CMP dword ptr [ECX],0x0
00a31884 : JZ 0x00a3188f
00a31886 : CALL 0x00a31470
00a3188b : TEST AL,AL
00a3188d : JZ 0x00a31897
00a3188f : XOR AL,AL
00a31891 : POP EDI
00a31892 : POP ESI
00a31893 : MOV ESP,EBP
00a31895 : POP EBP
00a31896 : RET
00a31897 : MOV EDX,dword ptr [0x00da9894]
00a3189d : MOV EAX,dword ptr [EDX]
00a3189f : MOV ECX,dword ptr [EAX + 0x128]
00a318a5 : CALL 0x0097fa60
00a318aa : MOV EDI,dword ptr [ESI + 0xac]
00a318b0 : MOV EAX,EDI
00a318b2 : CALL 0x0040e700
00a318b7 : TEST AL,AL
00a318b9 : JNZ 0x00a31a7b
00a318bf : MOV EAX,EDI
00a318c1 : CALL 0x0040e6b0
00a318c6 : TEST AL,AL
00a318c8 : JNZ 0x00a31a7b
00a318ce : MOV EAX,[0x017251d4]
00a318d3 : TEST EAX,EAX
00a318d5 : JZ 0x00a318ec
00a318d7 : CMP byte ptr [EAX + 0x34],0x0
00a318db : JZ 0x00a318ec
00a318dd : MOV dword ptr [EAX + 0x30],0x2
00a318e4 : MOV AL,0x1
00a318e6 : POP EDI
00a318e7 : POP ESI
00a318e8 : MOV ESP,EBP
00a318ea : POP EBP
00a318eb : RET
00a318ec : CMP byte ptr [ESI + 0x550],0x0
00a318f3 : JZ 0x00a3194d
00a318f5 : MOV ECX,dword ptr [ESI + 0x1bc]
00a318fb : XORPS XMM0,XMM0
00a318fe : MOV byte ptr [ESI + 0x550],0x0
00a31905 : MOV dword ptr [ESI + 0x548],0x0
00a3190f : MOVSS dword ptr [ESI + 0x54c],XMM0
00a31917 : MOV byte ptr [ESI + 0x551],0x1
00a3191e : MOV byte ptr [ESI + 0x553],0x1
00a31925 : TEST ECX,ECX
00a31927 : JZ 0x00a31930
00a31929 : MOV EDX,dword ptr [ECX]
00a3192b : MOV EAX,dword ptr [EDX + 0x24]
00a3192e : CALL EAX
00a31930 : MOV ECX,dword ptr [ESI + 0x1b8]
00a31936 : TEST ECX,ECX
00a31938 : JZ 0x00a31b19
00a3193e : MOV EDX,dword ptr [ECX]
00a31940 : MOV EAX,dword ptr [EDX + 0x24]
00a31943 : CALL EAX
00a31945 : MOV AL,0x1
00a31947 : POP EDI
00a31948 : POP ESI
00a31949 : MOV ESP,EBP
00a3194b : POP EBP
00a3194c : RET
00a3194d : MOV ECX,dword ptr [0x00da9894]
00a31953 : MOV EAX,dword ptr [ECX]
00a31955 : MOV EDX,dword ptr [EAX + 0xc]
00a31958 : SUB EDX,dword ptr [EAX + 0x8]
00a3195b : TEST EDX,0xfffffffc
00a31961 : JZ 0x00a31970
00a31963 : CALL 0x008eb5c0
00a31968 : MOV AL,0x1
00a3196a : POP EDI
00a3196b : POP ESI
00a3196c : MOV ESP,EBP
00a3196e : POP EBP
00a3196f : RET
00a31970 : MOV ECX,dword ptr [EAX + 0x16c]
00a31976 : CMP byte ptr [ECX + 0x32],0x0
00a3197a : JZ 0x00a31a42
00a31980 : MOV EDX,dword ptr [0x017247d4]
00a31986 : PUSH 0x0
00a31988 : PUSH EDX
00a31989 : OR ECX,0xffffffff
00a3198c : CALL 0x00a0d390
00a31991 : XORPS XMM0,XMM0
00a31994 : XOR EAX,EAX
00a31996 : MOVSS dword ptr [ESP + 0x8],XMM0
00a3199c : MOV ECX,dword ptr [ESP + 0x8]
00a319a0 : MOV dword ptr [ESI + 0x468],ECX
00a319a6 : MOV dword ptr [ESI + 0x46c],EAX
00a319ac : CMP dword ptr [ESI + 0x4a4],EAX
00a319b2 : JNZ 0x00a319c9
00a319b4 : MOV EDX,dword ptr [0x00da9894]
00a319ba : MOV EAX,dword ptr [EDX]
00a319bc : MOV ECX,dword ptr [EAX + 0x16c]
00a319c2 : MOV EDX,dword ptr [ECX]
00a319c4 : MOV EAX,dword ptr [EDX + 0x20]
00a319c7 : CALL EAX
00a319c9 : MOV ECX,dword ptr [0x00da9894]
00a319cf : MOV EAX,dword ptr [ECX]
00a319d1 : TEST EAX,EAX
00a319d3 : JZ 0x00a319f8
00a319d5 : MOV EAX,dword ptr [EAX + 0x114]
00a319db : TEST EAX,EAX
00a319dd : JZ 0x00a319f8
00a319df : MOV EDX,dword ptr [EAX]
00a319e1 : PUSH -0x1
00a319e3 : PUSH -0x1
00a319e5 : PUSH 0xcc11e4
00a319ea : PUSH 0xcc11ec
00a319ef : PUSH EAX
00a319f0 : MOV EAX,dword ptr [EDX + 0x4]
00a319f3 : CALL EAX
00a319f5 : ADD ESP,0x14
00a319f8 : LEA EAX,[ESI + 0x49c]
00a319fe : CALL 0x0040f010
00a31a03 : MOV EAX,dword ptr [ESI + 0xac]
00a31a09 : TEST EAX,EAX
00a31a0b : JZ 0x00a31b19
00a31a11 : CMP byte ptr [EAX + 0x1f5a],0x0
00a31a18 : JZ 0x00a31b19
00a31a1e : CMP dword ptr [0x00da93ec],0x0
00a31a25 : JZ 0x00a31b19
00a31a2b : MOV ECX,dword ptr [ESI + 0x258]
00a31a31 : MOV EDX,dword ptr [ECX + 0x4]
00a31a34 : PUSH EDX
00a31a35 : CALL 0x00902130
00a31a3a : MOV AL,0x1
00a31a3c : POP EDI
00a31a3d : POP ESI
00a31a3e : MOV ESP,EBP
00a31a40 : POP EBP
00a31a41 : RET
00a31a42 : MOV EAX,dword ptr [EAX + 0x12c]
00a31a48 : TEST EAX,EAX
00a31a4a : JNZ 0x00a31a62
00a31a4c : MOV EAX,dword ptr [EAX + 0x3c]
00a31a4f : PUSH EAX
00a31a50 : MOV ECX,0x6
00a31a55 : CALL 0x00abc150
00a31a5a : MOV AL,0x1
00a31a5c : POP EDI
00a31a5d : POP ESI
00a31a5e : MOV ESP,EBP
00a31a60 : POP EBP
00a31a61 : RET
00a31a62 : MOV EAX,dword ptr [EAX + 0x10]
00a31a65 : MOV EAX,dword ptr [EAX + 0x3c]
00a31a68 : PUSH EAX
00a31a69 : MOV ECX,0x6
00a31a6e : CALL 0x00abc150
00a31a73 : MOV AL,0x1
00a31a75 : POP EDI
00a31a76 : POP ESI
00a31a77 : MOV ESP,EBP
00a31a79 : POP EBP
00a31a7a : RET
00a31a7b : CALL 0x00a2a690
00a31a80 : MOV AL,0x1
00a31a82 : POP EDI
00a31a83 : POP ESI
00a31a84 : MOV ESP,EBP
00a31a86 : POP EBP
00a31a87 : RET
00a31a88 : MOV ECX,dword ptr [0x00da9894]
00a31a8e : MOV ESI,dword ptr [ECX]
00a31a90 : MOV EAX,ESI
00a31a92 : CALL 0x008eb390
00a31a97 : TEST EAX,EAX
00a31a99 : JZ 0x00a31ab3
00a31a9b : MOV EAX,ESI
00a31a9d : CALL 0x008eb390
00a31aa2 : MOV EDX,dword ptr [EAX]
00a31aa4 : MOV ECX,EAX
00a31aa6 : MOV EAX,dword ptr [EDX + 0x3c]
00a31aa9 : CALL EAX
00a31aab : MOV AL,0x1
00a31aad : POP EDI
00a31aae : POP ESI
00a31aaf : MOV ESP,EBP
00a31ab1 : POP EBP
00a31ab2 : RET
00a31ab3 : CMP byte ptr [0x00da9877],0x0
00a31aba : JZ 0x00a31af7
00a31abc : PUSH 0x11
00a31abe : CALL dword ptr [0x00b8542c]
00a31ac4 : MOV ECX,0x8000
00a31ac9 : TEST CX,AX
00a31acc : JZ 0x00a31af7
00a31ace : MOV EDX,dword ptr [0x00da9894]
00a31ad4 : MOV EAX,dword ptr [EDX]
00a31ad6 : TEST EAX,EAX
00a31ad8 : JZ 0x00a31b19
00a31ada : MOV ECX,dword ptr [EAX + 0x114]
00a31ae0 : TEST ECX,ECX
00a31ae2 : JZ 0x00a31b19
00a31ae4 : MOV EAX,dword ptr [ECX]
00a31ae6 : MOV EDX,dword ptr [EAX]
00a31ae8 : PUSH 0xcc1200
00a31aed : CALL EDX
00a31aef : MOV AL,0x1
00a31af1 : POP EDI
00a31af2 : POP ESI
00a31af3 : MOV ESP,EBP
00a31af5 : POP EBP
00a31af6 : RET
00a31af7 : MOV EAX,[0x00da9894]
00a31afc : MOV EAX,dword ptr [EAX]
00a31afe : TEST EAX,EAX
00a31b00 : JZ 0x00a31b19
00a31b02 : MOV EAX,dword ptr [EAX + 0x114]
00a31b08 : TEST EAX,EAX
00a31b0a : JZ 0x00a31b19
00a31b0c : MOV EDX,dword ptr [EAX]
00a31b0e : MOV ECX,EAX
00a31b10 : MOV EAX,dword ptr [EDX]
00a31b12 : PUSH 0xcc1214
00a31b17 : CALL EAX
00a31b19 : POP EDI
00a31b1a : MOV AL,0x1
00a31b1c : POP ESI
00a31b1d : MOV ESP,EBP
00a31b1f : POP EBP
00a31b20 : RET
