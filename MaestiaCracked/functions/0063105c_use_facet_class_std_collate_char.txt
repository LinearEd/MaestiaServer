PROGRAM  : Maestia.exe
FUNCTION : use_facet<class_std::collate<char>_>
ENTRY    : 0063105c
BODY     : [[0063105c, 006310f8]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    class std::collate<char> const & __cdecl std::use_facet<class std::collate<char> >(class
   std::locale const &)
   
   Library: Visual Studio 2008 Release */

collate<char> * __cdecl std::use_facet<class_std::collate<char>_>(locale *param_1)

{
  collate<char> *pcVar1;
  undefined4 uVar2;
  collate<char> *pcVar3;
  int iVar4;
  bad_cast local_24 [12];
  _Lockit local_18 [4];
  collate<char> *local_14 [3];
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x14;
  local_8 = 0x631068;
  _Lockit::_Lockit(local_18,0);
  pcVar1 = DAT_00d7b608;
  local_8 = 0;
  local_14[0] = DAT_00d7b608;
  uVar2 = FUN_004d03e0();
  pcVar3 = (collate<char> *)FUN_004d0530(uVar2);
  if ((pcVar3 == (collate<char> *)0x0) && (pcVar3 = pcVar1, pcVar1 == (collate<char> *)0x0)) {
    iVar4 = ::Getcat(local_14,param_1);
    pcVar3 = local_14[0];
    if (iVar4 == -1) {
      bad_cast::bad_cast(local_24,"bad cast");
                    /* WARNING: Subroutine does not return */
      __CxxThrowException_8(local_24,&DAT_00ced974);
    }
    DAT_00d7b608 = local_14[0];
    FUN_004d0450();
    locale::facet::facet_Register((facet *)pcVar3);
  }
  local_8 = 0xffffffff;
  FUN_00622fc1();
  return pcVar3;
}



============================================================
DISASSEMBLY
============================================================
0063105c : PUSH 0x14
0063105e : MOV EAX,0xb0b956
00631063 : CALL 0x00640e1d
00631068 : PUSH 0x0
0063106a : LEA ECX,[EBP + -0x14]
0063106d : CALL 0x00622f99
00631072 : MOV ESI,dword ptr [0x00d7b608]
00631078 : AND dword ptr [EBP + -0x4],0x0
0063107c : MOV ECX,0xd7b62c
00631081 : MOV dword ptr [EBP + -0x10],ESI
00631084 : CALL 0x004d03e0
00631089 : MOV ECX,dword ptr [EBP + 0x8]
0063108c : PUSH EAX
0063108d : CALL 0x004d0530
00631092 : MOV EDI,EAX
00631094 : TEST EDI,EDI
00631096 : JNZ 0x006310e5
00631098 : TEST ESI,ESI
0063109a : JZ 0x006310a0
0063109c : MOV EDI,ESI
0063109e : JMP 0x006310e5
006310a0 : PUSH dword ptr [EBP + 0x8]
006310a3 : LEA EAX,[EBP + -0x10]
006310a6 : PUSH EAX
006310a7 : CALL 0x00630af0
006310ac : POP ECX
006310ad : POP ECX
006310ae : CMP EAX,-0x1
006310b1 : JNZ 0x006310ce
006310b3 : PUSH 0xcda594
006310b8 : LEA ECX,[EBP + -0x20]
006310bb : CALL 0x00634022
006310c0 : PUSH 0xced974
006310c5 : LEA EAX,[EBP + -0x20]
006310c8 : PUSH EAX
006310c9 : CALL 0x006409eb
006310ce : MOV EDI,dword ptr [EBP + -0x10]
006310d1 : MOV ECX,EDI
006310d3 : MOV dword ptr [0x00d7b608],EDI
006310d9 : CALL 0x004d0450
006310de : PUSH EDI
006310df : CALL 0x00624882
006310e4 : POP ECX
006310e5 : OR dword ptr [EBP + -0x4],0xffffffff
006310e9 : LEA ECX,[EBP + -0x14]
006310ec : CALL 0x00622fc1
006310f1 : MOV EAX,EDI
006310f3 : CALL 0x00640ebc
006310f8 : RET
