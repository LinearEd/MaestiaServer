PROGRAM  : Maestia.exe
FUNCTION : FUN_00940180
ENTRY    : 00940180
BODY     : [[00940180, 009402a5]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00940180(int param_1,int *param_2,ushort *param_3,undefined2 *param_4)

{
  ushort uVar1;
  ushort uVar2;
  uint uVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  ushort uVar10;
  uint local_c;
  uint local_8;
  
  iVar6 = (**(code **)(*param_2 + 0x20))();
  iVar4 = DAT_00d7c54c;
  if (iVar6 == 0) {
    return 0;
  }
  uVar3 = param_2[4];
  local_c = uVar3;
  FUN_004437f0(&local_c);
  uVar7 = local_8;
  if (local_8 != *(uint *)(iVar4 + 0x44)) {
    uVar7 = 0;
    if (*(int *)(local_8 + 0x10) != 0) {
      uVar1 = *(ushort *)(*(int *)(local_8 + 0x10) + 0xa4);
      uVar2 = *(ushort *)(*(int *)(param_1 + 0x3c) + 8);
      local_c = (uint)*(ushort *)(*(int *)(param_1 + 0x3c) + 0xc);
      uVar7 = 0;
      local_8 = 0;
      if (uVar2 != 0) {
        do {
          uVar10 = 0;
          if ((ushort)local_c != 0) {
            uVar7 = local_8 & 0xffff;
            do {
              iVar4 = *(int *)(param_1 + 0x3c);
              iVar6 = *(int *)(iVar4 + 0xc) * uVar7 + (uint)uVar10;
              if ((((iVar6 < *(int *)(iVar4 + 8) * *(int *)(iVar4 + 0xc)) && (-1 < iVar6)) &&
                  (iVar4 = *(int *)(*(int *)(iVar4 + 0x10) + iVar6 * 4), iVar4 != 0)) &&
                 ((piVar5 = *(int **)(iVar4 + 8), piVar5 != (int *)0x0 && (piVar5[4] == uVar3)))) {
                uVar8 = (**(code **)(*piVar5 + 0x40))();
                uVar9 = (**(code **)(*param_2 + 0x40))();
                uVar8 = (uVar9 & 0xffff) + (uVar8 & 0xffff);
                if (uVar8 <= uVar1) {
                  *param_3 = uVar10;
                  *param_4 = (undefined2)local_8;
                  return CONCAT31((int3)(CONCAT22((short)(uVar8 >> 0x10),(undefined2)local_8) >> 8),
                                  1);
                }
              }
              uVar10 = uVar10 + 1;
            } while (uVar10 < (ushort)local_c);
          }
          uVar7 = local_8 + 1;
          local_8 = uVar7;
        } while ((ushort)uVar7 < uVar2);
      }
    }
  }
  return uVar7 & 0xffffff00;
}



============================================================
DISASSEMBLY
============================================================
00940180 : PUSH EBP
00940181 : MOV EBP,ESP
00940183 : SUB ESP,0x14
00940186 : PUSH ESI
00940187 : MOV ESI,dword ptr [EBP + 0xc]
0094018a : MOV EAX,dword ptr [ESI]
0094018c : MOV EDX,dword ptr [EAX + 0x20]
0094018f : MOV ECX,ESI
00940191 : CALL EDX
00940193 : TEST EAX,EAX
00940195 : JNZ 0x009401a0
00940197 : XOR AL,AL
00940199 : POP ESI
0094019a : MOV ESP,EBP
0094019c : POP EBP
0094019d : RET 0x10
009401a0 : MOV EAX,dword ptr [ESI + 0x10]
009401a3 : MOV ESI,dword ptr [0x00d7c54c]
009401a9 : PUSH EBX
009401aa : MOV dword ptr [EBP + -0xc],EAX
009401ad : MOV dword ptr [EBP + -0x8],EAX
009401b0 : PUSH EDI
009401b1 : LEA EAX,[EBP + -0x8]
009401b4 : PUSH EAX
009401b5 : LEA ECX,[ESI + 0x40]
009401b8 : LEA EAX,[EBP + -0x4]
009401bb : CALL 0x004437f0
009401c0 : MOV EAX,dword ptr [EBP + -0x4]
009401c3 : CMP EAX,dword ptr [ESI + 0x44]
009401c6 : JZ 0x00940280
009401cc : MOV EAX,dword ptr [EAX + 0x10]
009401cf : TEST EAX,EAX
009401d1 : JZ 0x00940280
009401d7 : MOVZX ECX,word ptr [EAX + 0xa4]
009401de : MOV EDX,dword ptr [EBP + 0x8]
009401e1 : MOV EAX,dword ptr [EDX + 0x3c]
009401e4 : MOV dword ptr [EBP + -0x10],ECX
009401e7 : MOVZX ECX,word ptr [EAX + 0x8]
009401eb : MOVZX EAX,word ptr [EAX + 0xc]
009401ef : MOV dword ptr [EBP + -0x8],EAX
009401f2 : XOR EAX,EAX
009401f4 : XOR EDX,EDX
009401f6 : MOV dword ptr [EBP + -0x14],ECX
009401f9 : MOV dword ptr [EBP + -0x4],EAX
009401fc : CMP DX,CX
009401ff : JNC 0x00940280
00940205 : XOR EDX,EDX
00940207 : XOR EDI,EDI
00940209 : CMP DX,word ptr [EBP + -0x8]
0094020d : JNC 0x00940277
0094020f : MOVZX EBX,AX
00940212 : MOV EAX,dword ptr [EBP + 0x8]
00940215 : MOV ECX,dword ptr [EAX + 0x3c]
00940218 : MOV EDX,dword ptr [ECX + 0xc]
0094021b : MOV EAX,EDX
0094021d : IMUL EAX,EBX
00940220 : MOVZX ESI,DI
00940223 : ADD EAX,ESI
00940225 : MOV ESI,dword ptr [ECX + 0x8]
00940228 : IMUL ESI,EDX
0094022b : CMP EAX,ESI
0094022d : JGE 0x0094026a
0094022f : TEST EAX,EAX
00940231 : JL 0x0094026a
00940233 : MOV ECX,dword ptr [ECX + 0x10]
00940236 : MOV EAX,dword ptr [ECX + EAX*0x4]
00940239 : TEST EAX,EAX
0094023b : JZ 0x0094026a
0094023d : MOV ECX,dword ptr [EAX + 0x8]
00940240 : TEST ECX,ECX
00940242 : JZ 0x0094026a
00940244 : MOV EDX,dword ptr [EBP + -0xc]
00940247 : CMP dword ptr [ECX + 0x10],EDX
0094024a : JNZ 0x0094026a
0094024c : MOV EAX,dword ptr [ECX]
0094024e : MOV EDX,dword ptr [EAX + 0x40]
00940251 : CALL EDX
00940253 : MOV ECX,dword ptr [EBP + 0xc]
00940256 : MOVZX ESI,AX
00940259 : MOV EAX,dword ptr [ECX]
0094025b : MOV EDX,dword ptr [EAX + 0x40]
0094025e : CALL EDX
00940260 : MOVZX EAX,AX
00940263 : ADD EAX,ESI
00940265 : CMP dword ptr [EBP + -0x10],EAX
00940268 : JNC 0x0094028b
0094026a : INC EDI
0094026b : CMP DI,word ptr [EBP + -0x8]
0094026f : JC 0x00940212
00940271 : MOV EAX,dword ptr [EBP + -0x4]
00940274 : MOV ECX,dword ptr [EBP + -0x14]
00940277 : INC EAX
00940278 : MOV dword ptr [EBP + -0x4],EAX
0094027b : CMP AX,CX
0094027e : JC 0x00940205
00940280 : POP EDI
00940281 : POP EBX
00940282 : XOR AL,AL
00940284 : POP ESI
00940285 : MOV ESP,EBP
00940287 : POP EBP
00940288 : RET 0x10
0094028b : MOV ECX,dword ptr [EBP + 0x10]
0094028e : MOV AX,word ptr [EBP + -0x4]
00940292 : MOV EDX,dword ptr [EBP + 0x14]
00940295 : MOV word ptr [ECX],DI
00940298 : POP EDI
00940299 : POP EBX
0094029a : MOV word ptr [EDX],AX
0094029d : MOV AL,0x1
0094029f : POP ESI
009402a0 : MOV ESP,EBP
009402a2 : POP EBP
009402a3 : RET 0x10
