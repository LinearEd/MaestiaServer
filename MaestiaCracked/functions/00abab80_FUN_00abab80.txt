PROGRAM  : Maestia.exe
FUNCTION : FUN_00abab80
ENTRY    : 00abab80
BODY     : [[00abab80, 00abaf4e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00abab80(int param_1,int param_2)

{
  wchar_t wVar1;
  undefined1 uVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  wchar_t *pwVar6;
  wchar_t *pwVar7;
  bool bVar8;
  undefined1 auStack_70 [4];
  wchar_t *local_6c;
  int *local_68;
  undefined1 local_64 [4];
  undefined2 local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  int local_44;
  undefined1 local_38 [4];
  undefined2 local_34;
  undefined4 local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b465cd;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_70;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xffffff88;
  ExceptionList = &local_14;
  local_6c = (wchar_t *)(param_1 + 4);
  pwVar6 = local_6c;
  if (7 < *(uint *)(param_1 + 0x18)) {
    pwVar6 = *(wchar_t **)local_6c;
  }
  if ((pwVar6 == (wchar_t *)0x0) || (param_2 == 0)) goto LAB_00abaf30;
  FUN_00406460(&DAT_00c8f050);
  local_c = 0;
  uVar4 = FUN_00403dd0(param_2,uVar3);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_48,uVar4,local_64,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_20 = 7;
  local_24 = 0;
  local_34 = 0;
  local_c._0_1_ = 4;
  uVar2 = (undefined1)local_c;
  local_c._0_1_ = 4;
  if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  uVar3 = *(uint *)(param_1 + 0x18);
  local_4c = 7;
  local_50 = 0;
  local_60 = 0;
  pwVar6 = local_6c;
  if (7 < uVar3) {
    pwVar6 = *(wchar_t **)local_6c;
  }
  pwVar7 = L"onInit";
  do {
    wVar1 = *pwVar6;
    bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
    if (wVar1 != *pwVar7) {
LAB_00abacb6:
      iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
      goto LAB_00abacbb;
    }
    if (wVar1 == L'\0') break;
    wVar1 = pwVar6[1];
    bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
    if (wVar1 != pwVar7[1]) goto LAB_00abacb6;
    pwVar6 = pwVar6 + 2;
    pwVar7 = pwVar7 + 2;
  } while (wVar1 != L'\0');
  iVar5 = 0;
LAB_00abacbb:
  if (iVar5 == 0) {
    if (local_68[0x17] - local_68[0x16] >> 2 != 0) {
      FUN_00ab9920(*(undefined2 *)local_68[0x16]);
    }
    *(undefined2 *)((int)local_68 + 0x3a) = 0xffff;
  }
  else {
    pwVar6 = local_6c;
    if (7 < uVar3) {
      pwVar6 = *(wchar_t **)local_6c;
    }
    pwVar7 = L"Select";
    do {
      wVar1 = *pwVar6;
      bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
      if (wVar1 != *pwVar7) {
LAB_00abad26:
        iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_00abad2b;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar6[1];
      bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
      if (wVar1 != pwVar7[1]) goto LAB_00abad26;
      pwVar6 = pwVar6 + 2;
      pwVar7 = pwVar7 + 2;
    } while (wVar1 != L'\0');
    iVar5 = 0;
LAB_00abad2b:
    if (iVar5 == 0) {
      if (*(uint *)(local_44 + 0x18) < 8) {
        local_44 = local_44 + 4;
      }
      else {
        local_44 = *(int *)(local_44 + 4);
      }
      uVar3 = FUN_00634f4d(local_44);
      if (*(ushort *)((int)local_68 + 0x3a) != uVar3) {
        *(short *)((int)local_68 + 0x3a) = (short)uVar3;
        FUN_00ab8ea0(uVar3 & 0xffff);
      }
    }
    else {
      pwVar6 = local_6c;
      if (7 < uVar3) {
        pwVar6 = *(wchar_t **)local_6c;
      }
      pwVar7 = L"ApplyTitle";
      do {
        wVar1 = *pwVar6;
        bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
        if (wVar1 != *pwVar7) {
LAB_00abada6:
          iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
          goto LAB_00abadab;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar6[1];
        bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
        if (wVar1 != pwVar7[1]) goto LAB_00abada6;
        pwVar6 = pwVar6 + 2;
        pwVar7 = pwVar7 + 2;
      } while (wVar1 != L'\0');
      iVar5 = 0;
LAB_00abadab:
      if (iVar5 == 0) {
        FUN_00406460(L"IDS_CHAR_TITLE_APPLY");
        local_c._0_1_ = 5;
        FUN_0081d120(local_64);
        local_c = CONCAT31(local_c._1_3_,7);
        FUN_00406560();
        iVar5 = FUN_008ede80(local_38,2);
        if (iVar5 == 0) {
LAB_00abaec5:
          local_c = CONCAT31(local_c._1_3_,4);
          FUN_00406560();
        }
        else {
          if (*(code **)(iVar5 + 0x60) != (code *)0x0) {
            (**(code **)(iVar5 + 0x60))(1,iVar5);
          }
          *(code **)(iVar5 + 0x60) = FUN_00abab50;
          local_c = CONCAT31(local_c._1_3_,4);
          FUN_00406560();
        }
      }
      else {
        pwVar6 = local_6c;
        if (7 < uVar3) {
          pwVar6 = *(wchar_t **)local_6c;
        }
        pwVar7 = L"ClearTitle";
        do {
          wVar1 = *pwVar6;
          bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
          if (wVar1 != *pwVar7) {
LAB_00abae5c:
            iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
            goto LAB_00abae61;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar6[1];
          bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
          if (wVar1 != pwVar7[1]) goto LAB_00abae5c;
          pwVar6 = pwVar6 + 2;
          pwVar7 = pwVar7 + 2;
        } while (wVar1 != L'\0');
        iVar5 = 0;
LAB_00abae61:
        local_c._0_1_ = uVar2;
        if (iVar5 == 0) {
          FUN_00406460(L"IDS_CHAR_TITLE_CLEAR");
          local_c._0_1_ = 8;
          FUN_0081d120(local_64);
          local_c = CONCAT31(local_c._1_3_,10);
          FUN_00406560();
          iVar5 = FUN_008ede80(local_38,2);
          if (iVar5 != 0) {
            if (*(code **)(iVar5 + 0x60) != (code *)0x0) {
              (**(code **)(iVar5 + 0x60))(1,iVar5);
            }
            *(code **)(iVar5 + 0x60) = FUN_00abab20;
          }
          goto LAB_00abaec5;
        }
        pwVar6 = local_6c;
        if (7 < uVar3) {
          pwVar6 = *(wchar_t **)local_6c;
        }
        pwVar7 = L"Close";
        do {
          wVar1 = *pwVar6;
          bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
          if (wVar1 != *pwVar7) {
LAB_00abaf0b:
            iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
            goto LAB_00abaf10;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar6[1];
          bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
          if (wVar1 != pwVar7[1]) goto LAB_00abaf0b;
          pwVar6 = pwVar6 + 2;
          pwVar7 = pwVar7 + 2;
        } while (wVar1 != L'\0');
        iVar5 = 0;
LAB_00abaf10:
        if (iVar5 == 0) {
          (**(code **)(*local_68 + 0x20))();
        }
      }
    }
  }
  local_c = 0xffffffff;
  FUN_004042c0();
LAB_00abaf30:
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_70);
  return;
}



============================================================
DISASSEMBLY
============================================================
00abab80 : PUSH EBP
00abab81 : MOV EBP,ESP
00abab83 : AND ESP,0xfffffff8
00abab86 : PUSH -0x1
00abab88 : PUSH 0xb465cd
00abab8d : MOV EAX,FS:[0x0]
00abab93 : PUSH EAX
00abab94 : SUB ESP,0x5c
00abab97 : MOV EAX,[0x00d66fa0]
00abab9c : XOR EAX,ESP
00abab9e : MOV dword ptr [ESP + 0x54],EAX
00ababa2 : PUSH ESI
00ababa3 : PUSH EDI
00ababa4 : MOV EAX,[0x00d66fa0]
00ababa9 : XOR EAX,ESP
00ababab : PUSH EAX
00ababac : LEA EAX,[ESP + 0x68]
00ababb0 : MOV FS:[0x0],EAX
00ababb6 : MOV EDI,dword ptr [EBP + 0x8]
00ababb9 : CMP dword ptr [EDI + 0x18],0x8
00ababbd : MOV ESI,dword ptr [EBP + 0xc]
00ababc0 : LEA EAX,[EDI + 0x4]
00ababc3 : MOV dword ptr [ESP + 0x14],ECX
00ababc7 : MOV dword ptr [ESP + 0x10],EAX
00ababcb : JC 0x00ababcf
00ababcd : MOV EAX,dword ptr [EAX]
00ababcf : TEST EAX,EAX
00ababd1 : JZ 0x00abaf30
00ababd7 : TEST ESI,ESI
00ababd9 : JZ 0x00abaf30
00ababdf : PUSH 0xc8f050
00ababe4 : LEA ECX,[ESP + 0x1c]
00ababe8 : CALL 0x00406460
00ababed : MOV dword ptr [ESP + 0x70],0x0
00ababf5 : PUSH ESI
00ababf6 : LEA ESI,[ESP + 0x48]
00ababfa : CALL 0x00403dd0
00ababff : ADD ESP,0x4
00abac02 : MOV byte ptr [ESP + 0x70],0x1
00abac07 : PUSH 0x0
00abac09 : LEA ECX,[ESP + 0x1c]
00abac0d : PUSH ECX
00abac0e : PUSH EAX
00abac0f : LEA EDX,[ESP + 0x40]
00abac13 : PUSH EDX
00abac14 : CALL 0x0070cd60
00abac19 : ADD ESP,0x10
00abac1c : MOV byte ptr [ESP + 0x70],0x3
00abac21 : CMP dword ptr [ESP + 0x5c],0x8
00abac26 : JC 0x00abac31
00abac28 : MOV ECX,dword ptr [ESP + 0x48]
00abac2c : CALL 0x006f04e0
00abac31 : MOV ESI,0x7
00abac36 : XOR EAX,EAX
00abac38 : MOV dword ptr [ESP + 0x5c],ESI
00abac3c : MOV dword ptr [ESP + 0x58],0x0
00abac44 : MOV word ptr [ESP + 0x48],AX
00abac49 : MOV byte ptr [ESP + 0x70],0x4
00abac4e : CMP dword ptr [ESP + 0x30],0x8
00abac53 : JC 0x00abac5e
00abac55 : MOV ECX,dword ptr [ESP + 0x1c]
00abac59 : CALL 0x006f04e0
00abac5e : MOV EDI,dword ptr [EDI + 0x18]
00abac61 : XOR ECX,ECX
00abac63 : MOV dword ptr [ESP + 0x30],ESI
00abac67 : MOV ESI,dword ptr [ESP + 0x10]
00abac6b : MOV dword ptr [ESP + 0x2c],0x0
00abac73 : MOV word ptr [ESP + 0x1c],CX
00abac78 : CMP EDI,0x8
00abac7b : JC 0x00abac81
00abac7d : MOV EAX,dword ptr [ESI]
00abac7f : JMP 0x00abac85
00abac81 : MOV EAX,dword ptr [ESP + 0x10]
00abac85 : MOV ECX,0xc8f054
00abac8a : LEA EBX,[EBX]
00abac90 : MOV DX,word ptr [EAX]
00abac93 : CMP DX,word ptr [ECX]
00abac96 : JNZ 0x00abacb6
00abac98 : TEST DX,DX
00abac9b : JZ 0x00abacb2
00abac9d : MOV DX,word ptr [EAX + 0x2]
00abaca1 : CMP DX,word ptr [ECX + 0x2]
00abaca5 : JNZ 0x00abacb6
00abaca7 : ADD EAX,0x4
00abacaa : ADD ECX,0x4
00abacad : TEST DX,DX
00abacb0 : JNZ 0x00abac90
00abacb2 : XOR EAX,EAX
00abacb4 : JMP 0x00abacbb
00abacb6 : SBB EAX,EAX
00abacb8 : SBB EAX,-0x1
00abacbb : TEST EAX,EAX
00abacbd : JNZ 0x00abacec
00abacbf : MOV ESI,dword ptr [ESP + 0x14]
00abacc3 : MOV EDX,dword ptr [ESI + 0x5c]
00abacc6 : SUB EDX,dword ptr [ESI + 0x58]
00abacc9 : SAR EDX,0x2
00abaccc : TEST EDX,EDX
00abacce : JBE 0x00abacde
00abacd0 : MOV EAX,dword ptr [ESI + 0x58]
00abacd3 : MOVZX ECX,word ptr [EAX]
00abacd6 : PUSH ECX
00abacd7 : MOV ECX,ESI
00abacd9 : CALL 0x00ab9920
00abacde : MOV EDX,0xffff
00abace3 : MOV word ptr [ESI + 0x3a],DX
00abace7 : JMP 0x00abaf1f
00abacec : CMP EDI,0x8
00abacef : JC 0x00abacf5
00abacf1 : MOV EAX,dword ptr [ESI]
00abacf3 : JMP 0x00abacf7
00abacf5 : MOV EAX,ESI
00abacf7 : MOV ECX,0xc8f064
00abacfc : LEA ESP,[ESP]
00abad00 : MOV DX,word ptr [EAX]
00abad03 : CMP DX,word ptr [ECX]
00abad06 : JNZ 0x00abad26
00abad08 : TEST DX,DX
00abad0b : JZ 0x00abad22
00abad0d : MOV DX,word ptr [EAX + 0x2]
00abad11 : CMP DX,word ptr [ECX + 0x2]
00abad15 : JNZ 0x00abad26
00abad17 : ADD EAX,0x4
00abad1a : ADD ECX,0x4
00abad1d : TEST DX,DX
00abad20 : JNZ 0x00abad00
00abad22 : XOR EAX,EAX
00abad24 : JMP 0x00abad2b
00abad26 : SBB EAX,EAX
00abad28 : SBB EAX,-0x1
00abad2b : TEST EAX,EAX
00abad2d : JNZ 0x00abad6c
00abad2f : MOV EAX,dword ptr [ESP + 0x38]
00abad33 : CMP dword ptr [EAX + 0x18],0x8
00abad37 : JC 0x00abad3e
00abad39 : MOV EAX,dword ptr [EAX + 0x4]
00abad3c : JMP 0x00abad41
00abad3e : ADD EAX,0x4
00abad41 : PUSH EAX
00abad42 : CALL 0x00634f4d
00abad47 : MOV ECX,dword ptr [ESP + 0x18]
00abad4b : MOVZX EDX,word ptr [ECX + 0x3a]
00abad4f : ADD ESP,0x4
00abad52 : CMP EDX,EAX
00abad54 : JZ 0x00abaf1f
00abad5a : MOV word ptr [ECX + 0x3a],AX
00abad5e : MOVZX EAX,AX
00abad61 : PUSH EAX
00abad62 : CALL 0x00ab8ea0
00abad67 : JMP 0x00abaf1f
00abad6c : CMP EDI,0x8
00abad6f : JC 0x00abad75
00abad71 : MOV EAX,dword ptr [ESI]
00abad73 : JMP 0x00abad77
00abad75 : MOV EAX,ESI
00abad77 : MOV ECX,0xc8f074
00abad7c : LEA ESP,[ESP]
00abad80 : MOV DX,word ptr [EAX]
00abad83 : CMP DX,word ptr [ECX]
00abad86 : JNZ 0x00abada6
00abad88 : TEST DX,DX
00abad8b : JZ 0x00abada2
00abad8d : MOV DX,word ptr [EAX + 0x2]
00abad91 : CMP DX,word ptr [ECX + 0x2]
00abad95 : JNZ 0x00abada6
00abad97 : ADD EAX,0x4
00abad9a : ADD ECX,0x4
00abad9d : TEST DX,DX
00abada0 : JNZ 0x00abad80
00abada2 : XOR EAX,EAX
00abada4 : JMP 0x00abadab
00abada6 : SBB EAX,EAX
00abada8 : SBB EAX,-0x1
00abadab : TEST EAX,EAX
00abadad : JNZ 0x00abae26
00abadaf : PUSH 0xc8f08c
00abadb4 : LEA ECX,[ESP + 0x1c]
00abadb8 : CALL 0x00406460
00abadbd : MOV byte ptr [ESP + 0x70],0x5
00abadc2 : LEA ECX,[ESP + 0x18]
00abadc6 : PUSH ECX
00abadc7 : MOV ECX,dword ptr [0x0172491c]
00abadcd : LEA EDI,[ESP + 0x48]
00abadd1 : CALL 0x0081d120
00abadd6 : MOV byte ptr [ESP + 0x70],0x7
00abaddb : LEA ECX,[ESP + 0x18]
00abaddf : CALL 0x00406560
00abade4 : MOV EDX,dword ptr [0x00da9894]
00abadea : MOV ECX,dword ptr [EDX]
00abadec : PUSH 0x2
00abadee : MOV EAX,EDI
00abadf0 : PUSH EAX
00abadf1 : CALL 0x008ede80
00abadf6 : MOV ESI,EAX
00abadf8 : TEST ESI,ESI
00abadfa : JZ 0x00abaec5
00abae00 : MOV EAX,dword ptr [ESI + 0x60]
00abae03 : TEST EAX,EAX
00abae05 : JZ 0x00abae0c
00abae07 : PUSH ESI
00abae08 : PUSH 0x1
00abae0a : CALL EAX
00abae0c : MOV dword ptr [ESI + 0x60],0xabab50
00abae13 : MOV byte ptr [ESP + 0x70],0x4
00abae18 : LEA ECX,[ESP + 0x44]
00abae1c : CALL 0x00406560
00abae21 : JMP 0x00abaf1f
00abae26 : CMP EDI,0x8
00abae29 : JC 0x00abae2f
00abae2b : MOV EAX,dword ptr [ESI]
00abae2d : JMP 0x00abae31
00abae2f : MOV EAX,ESI
00abae31 : MOV ECX,0xc8f0b8
00abae36 : MOV DX,word ptr [EAX]
00abae39 : CMP DX,word ptr [ECX]
00abae3c : JNZ 0x00abae5c
00abae3e : TEST DX,DX
00abae41 : JZ 0x00abae58
00abae43 : MOV DX,word ptr [EAX + 0x2]
00abae47 : CMP DX,word ptr [ECX + 0x2]
00abae4b : JNZ 0x00abae5c
00abae4d : ADD EAX,0x4
00abae50 : ADD ECX,0x4
00abae53 : TEST DX,DX
00abae56 : JNZ 0x00abae36
00abae58 : XOR EAX,EAX
00abae5a : JMP 0x00abae61
00abae5c : SBB EAX,EAX
00abae5e : SBB EAX,-0x1
00abae61 : TEST EAX,EAX
00abae63 : JNZ 0x00abaed5
00abae65 : PUSH 0xc8f0d0
00abae6a : LEA ECX,[ESP + 0x1c]
00abae6e : CALL 0x00406460
00abae73 : MOV byte ptr [ESP + 0x70],0x8
00abae78 : LEA ECX,[ESP + 0x18]
00abae7c : PUSH ECX
00abae7d : MOV ECX,dword ptr [0x0172491c]
00abae83 : LEA EDI,[ESP + 0x48]
00abae87 : CALL 0x0081d120
00abae8c : MOV byte ptr [ESP + 0x70],0xa
00abae91 : LEA ECX,[ESP + 0x18]
00abae95 : CALL 0x00406560
00abae9a : MOV EDX,dword ptr [0x00da9894]
00abaea0 : MOV ECX,dword ptr [EDX]
00abaea2 : PUSH 0x2
00abaea4 : MOV EAX,EDI
00abaea6 : PUSH EAX
00abaea7 : CALL 0x008ede80
00abaeac : MOV ESI,EAX
00abaeae : TEST ESI,ESI
00abaeb0 : JZ 0x00abaec5
00abaeb2 : MOV EAX,dword ptr [ESI + 0x60]
00abaeb5 : TEST EAX,EAX
00abaeb7 : JZ 0x00abaebe
00abaeb9 : PUSH ESI
00abaeba : PUSH 0x1
00abaebc : CALL EAX
00abaebe : MOV dword ptr [ESI + 0x60],0xabab20
00abaec5 : MOV byte ptr [ESP + 0x70],0x4
00abaeca : LEA ECX,[ESP + 0x44]
00abaece : CALL 0x00406560
00abaed3 : JMP 0x00abaf1f
00abaed5 : CMP EDI,0x8
00abaed8 : JC 0x00abaede
00abaeda : MOV EAX,dword ptr [ESI]
00abaedc : JMP 0x00abaee0
00abaede : MOV EAX,ESI
00abaee0 : MOV ECX,0xc8f0fc
00abaee5 : MOV DX,word ptr [EAX]
00abaee8 : CMP DX,word ptr [ECX]
00abaeeb : JNZ 0x00abaf0b
00abaeed : TEST DX,DX
00abaef0 : JZ 0x00abaf07
00abaef2 : MOV DX,word ptr [EAX + 0x2]
00abaef6 : CMP DX,word ptr [ECX + 0x2]
00abaefa : JNZ 0x00abaf0b
00abaefc : ADD EAX,0x4
00abaeff : ADD ECX,0x4
00abaf02 : TEST DX,DX
00abaf05 : JNZ 0x00abaee5
00abaf07 : XOR EAX,EAX
00abaf09 : JMP 0x00abaf10
00abaf0b : SBB EAX,EAX
00abaf0d : SBB EAX,-0x1
00abaf10 : TEST EAX,EAX
00abaf12 : JNZ 0x00abaf1f
00abaf14 : MOV ECX,dword ptr [ESP + 0x14]
00abaf18 : MOV EDX,dword ptr [ECX]
00abaf1a : MOV EAX,dword ptr [EDX + 0x20]
00abaf1d : CALL EAX
00abaf1f : MOV dword ptr [ESP + 0x70],0xffffffff
00abaf27 : LEA ESI,[ESP + 0x34]
00abaf2b : CALL 0x004042c0
00abaf30 : MOV ECX,dword ptr [ESP + 0x68]
00abaf34 : MOV dword ptr FS:[0x0],ECX
00abaf3b : POP ECX
00abaf3c : POP EDI
00abaf3d : POP ESI
00abaf3e : MOV ECX,dword ptr [ESP + 0x54]
00abaf42 : XOR ECX,ESP
00abaf44 : CALL 0x00633e6b
00abaf49 : MOV ESP,EBP
00abaf4b : POP EBP
00abaf4c : RET 0x8
