PROGRAM  : Maestia.exe
FUNCTION : FUN_008703e0
ENTRY    : 008703e0
BODY     : [[008703e0, 0087053d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_008703e0(void)

{
  bool bVar1;
  DWORD DVar2;
  int in_ECX;
  uint local_30;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4905c;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_00861220(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (*(int *)(in_ECX + 0x18b8) != 0) {
    FUN_0083a5b0();
  }
  if (*(char *)(in_ECX + 0x1abf) != '\0') {
    DVar2 = timeGetTime();
    if (*(int *)(in_ECX + 0x1ac0) + 5000U < DVar2) {
      DVar2 = timeGetTime();
      *(DWORD *)(in_ECX + 0x1ac0) = DVar2;
      FUN_00406460(L"IDS_AFK_SCROLL_MSG");
      local_8 = 0;
      FUN_0081d120(local_2c);
      local_8._0_1_ = 1;
      FUN_0096afb0(*(undefined4 *)(*DAT_00da9894 + 0x134));
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_14 = 7;
      local_18 = 0;
      local_28 = 0;
    }
  }
  if (*(char *)(in_ECX + 0x1fe2) != '\0') {
    DVar2 = timeGetTime();
    bVar1 = DAT_01724530 < DVar2 - _DAT_00d7c564;
    *(bool *)(in_ECX + 0x1fe2) = bVar1;
    if (!bVar1) {
      if (*(undefined4 **)(*DAT_00da9894 + 0x118) != (undefined4 *)0x0) {
        (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x118))("NoticeDlgClose");
      }
      *(undefined1 *)(in_ECX + 0x1fe3) = 0;
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008703e0 : PUSH EBP
008703e1 : MOV EBP,ESP
008703e3 : PUSH -0x1
008703e5 : PUSH 0xb4905c
008703ea : MOV EAX,FS:[0x0]
008703f0 : PUSH EAX
008703f1 : SUB ESP,0x38
008703f4 : PUSH EBX
008703f5 : PUSH ESI
008703f6 : PUSH EDI
008703f7 : MOV EAX,[0x00d66fa0]
008703fc : XOR EAX,EBP
008703fe : PUSH EAX
008703ff : LEA EAX,[EBP + -0xc]
00870402 : MOV FS:[0x0],EAX
00870408 : MOV EBX,ECX
0087040a : CALL 0x00861220
0087040f : MOV ECX,dword ptr [EBX + 0x18b8]
00870415 : TEST ECX,ECX
00870417 : JZ 0x0087041e
00870419 : CALL 0x0083a5b0
0087041e : CMP byte ptr [EBX + 0x1abf],0x0
00870425 : JZ 0x008704e0
0087042b : MOV ESI,dword ptr [0x00b85598]
00870431 : CALL ESI
00870433 : MOV ECX,dword ptr [EBX + 0x1ac0]
00870439 : ADD ECX,0x1388
0087043f : CMP ECX,EAX
00870441 : JNC 0x008704e0
00870447 : CALL ESI
00870449 : PUSH 0xc428dc
0087044e : LEA ECX,[EBP + -0x28]
00870451 : MOV dword ptr [EBX + 0x1ac0],EAX
00870457 : CALL 0x00406460
0087045c : MOV dword ptr [EBP + -0x4],0x0
00870463 : MOV ECX,dword ptr [0x0172491c]
00870469 : LEA EDX,[EBP + -0x28]
0087046c : PUSH EDX
0087046d : LEA EDI,[EBP + -0x44]
00870470 : CALL 0x0081d120
00870475 : MOV byte ptr [EBP + -0x4],0x1
00870479 : MOV ECX,dword ptr [0x00da9894]
0087047f : MOV ECX,dword ptr [ECX]
00870481 : MOV ECX,dword ptr [ECX + 0x134]
00870487 : PUSH ECX
00870488 : MOV ESI,0xff00ff00
0087048d : MOV ECX,EAX
0087048f : CALL 0x0096afb0
00870494 : MOV byte ptr [EBP + -0x4],0x0
00870498 : MOV ESI,0x8
0087049d : CMP dword ptr [EBP + -0x2c],ESI
008704a0 : JC 0x008704aa
008704a2 : MOV ECX,dword ptr [EBP + -0x40]
008704a5 : CALL 0x006f04e0
008704aa : XOR EDI,EDI
008704ac : XOR EDX,EDX
008704ae : MOV dword ptr [EBP + -0x2c],0x7
008704b5 : MOV dword ptr [EBP + -0x30],EDI
008704b8 : MOV word ptr [EBP + -0x40],DX
008704bc : MOV dword ptr [EBP + -0x4],0xffffffff
008704c3 : CMP dword ptr [EBP + -0x10],ESI
008704c6 : JC 0x008704d0
008704c8 : MOV ECX,dword ptr [EBP + -0x24]
008704cb : CALL 0x006f04e0
008704d0 : XOR EAX,EAX
008704d2 : MOV dword ptr [EBP + -0x10],0x7
008704d9 : MOV dword ptr [EBP + -0x14],EDI
008704dc : MOV word ptr [EBP + -0x24],AX
008704e0 : CMP byte ptr [EBX + 0x1fe2],0x0
008704e7 : JZ 0x0087052c
008704e9 : CALL dword ptr [0x00b85598]
008704ef : SUB EAX,dword ptr [0x00d7c564]
008704f5 : CMP EAX,dword ptr [0x01724530]
008704fb : SETA AL
008704fe : MOV byte ptr [EBX + 0x1fe2],AL
00870504 : TEST AL,AL
00870506 : JNZ 0x0087052c
00870508 : MOV ECX,dword ptr [0x00da9894]
0087050e : MOV EDX,dword ptr [ECX]
00870510 : MOV ECX,dword ptr [EDX + 0x118]
00870516 : TEST ECX,ECX
00870518 : JZ 0x00870525
0087051a : MOV EAX,dword ptr [ECX]
0087051c : MOV EDX,dword ptr [EAX]
0087051e : PUSH 0xc42904
00870523 : CALL EDX
00870525 : MOV byte ptr [EBX + 0x1fe3],0x0
0087052c : MOV ECX,dword ptr [EBP + -0xc]
0087052f : MOV dword ptr FS:[0x0],ECX
00870536 : POP ECX
00870537 : POP EDI
00870538 : POP ESI
00870539 : POP EBX
0087053a : MOV ESP,EBP
0087053c : POP EBP
0087053d : RET
