PROGRAM  : Maestia.exe
FUNCTION : FUN_004452d0
ENTRY    : 004452d0
BODY     : [[004452d0, 0044540f] [00445421, 00445505]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004452d0(uint param_1,void *param_2,uint param_3,undefined4 *param_4)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  uint uVar6;
  uint extraout_ECX;
  undefined4 *puVar7;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7e1a0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = *(int *)(param_1 + 4);
  if (iVar3 == 0) {
    uVar6 = 0;
  }
  else {
    uVar6 = *(int *)(param_1 + 0xc) - iVar3 >> 2;
  }
  if (param_3 != 0) {
    iVar1 = *(int *)(param_1 + 8);
    iVar3 = iVar1 - iVar3 >> 2;
    if (0x3fffffffU - iVar3 < param_3) {
      iVar3 = FUN_00429be0();
      uVar6 = extraout_ECX;
    }
    uVar4 = iVar3 + param_3;
    if (uVar6 < uVar4) {
      if (0x3fffffff - (uVar6 >> 1) < uVar6) {
        param_1 = 0;
      }
      else {
        param_1 = uVar6 + (uVar6 >> 1);
      }
      if (param_1 < uVar4) {
        param_1 = uVar4;
      }
      iVar3 = FUN_004c1790();
      local_8 = 0;
      puVar7 = (undefined4 *)(iVar3 + ((int)param_2 - *(int *)(iVar2 + 4) >> 2) * 4);
      for (uVar6 = param_3; uVar6 != 0; uVar6 = uVar6 - 1) {
        *puVar7 = *param_4;
        puVar7 = puVar7 + 1;
      }
      FUN_00461070();
      FUN_00461070();
      local_8 = 0xffffffff;
      if (*(int *)(iVar2 + 4) == 0) {
        *(uint *)(iVar2 + 0xc) = iVar3 + param_1 * 4;
        *(uint *)(iVar2 + 8) =
             iVar3 + (param_3 + (*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) >> 2)) * 4;
        *(int *)(iVar2 + 4) = iVar3;
        ExceptionList = local_10;
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if ((uint)(iVar1 - (int)param_2 >> 2) < param_3) {
      uVar5 = *param_4;
      FUN_00461070();
      puVar7 = *(undefined4 **)(param_1 + 8);
      for (iVar3 = param_3 - ((int)puVar7 - (int)param_2 >> 2); iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar7 = uVar5;
        puVar7 = puVar7 + 1;
      }
      local_8 = 0xffffffff;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + param_3 * 4;
    }
    else {
      uVar5 = FUN_00461070();
      *(undefined4 *)(param_1 + 8) = uVar5;
      iVar3 = (int)((iVar1 + param_3 * -4) - (int)param_2) >> 2;
      if (0 < iVar3) {
        _memmove_s((void *)(iVar1 + iVar3 * -4),iVar3 * 4,param_2,iVar3 * 4);
      }
    }
    FUN_00445510(param_2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
004452d0 : PUSH EBP
004452d1 : MOV EBP,ESP
004452d3 : PUSH -0x1
004452d5 : PUSH 0xb7e1a0
004452da : MOV EAX,FS:[0x0]
004452e0 : PUSH EAX
004452e1 : SUB ESP,0x1c
004452e4 : PUSH EBX
004452e5 : PUSH ESI
004452e6 : PUSH EDI
004452e7 : MOV EAX,[0x00d66fa0]
004452ec : XOR EAX,EBP
004452ee : PUSH EAX
004452ef : LEA EAX,[EBP + -0xc]
004452f2 : MOV FS:[0x0],EAX
004452f8 : MOV dword ptr [EBP + -0x10],ESP
004452fb : MOV EBX,dword ptr [EBP + 0x8]
004452fe : MOV EDX,dword ptr [EBX + 0x4]
00445301 : TEST EDX,EDX
00445303 : JNZ 0x00445309
00445305 : XOR ECX,ECX
00445307 : JMP 0x00445313
00445309 : MOV EAX,dword ptr [EBX + 0xc]
0044530c : SUB EAX,EDX
0044530e : SAR EAX,0x2
00445311 : MOV ECX,EAX
00445313 : MOV EDI,dword ptr [EBP + 0x10]
00445316 : TEST EDI,EDI
00445318 : JZ 0x004454f2
0044531e : MOV ESI,dword ptr [EBX + 0x8]
00445321 : MOV EAX,ESI
00445323 : SUB EAX,EDX
00445325 : SAR EAX,0x2
00445328 : MOV EDX,0x3fffffff
0044532d : SUB EDX,EAX
0044532f : CMP EDX,EDI
00445331 : JNC 0x00445338
00445333 : CALL 0x00429be0
00445338 : ADD EAX,EDI
0044533a : CMP ECX,EAX
0044533c : JNC 0x00445421
00445342 : MOV EDX,ECX
00445344 : SHR EDX,0x1
00445346 : MOV ESI,0x3fffffff
0044534b : SUB ESI,EDX
0044534d : CMP ESI,ECX
0044534f : JNC 0x0044535d
00445351 : MOV dword ptr [EBP + 0x8],0x0
00445358 : MOV ECX,dword ptr [EBP + 0x8]
0044535b : JMP 0x00445362
0044535d : ADD ECX,EDX
0044535f : MOV dword ptr [EBP + 0x8],ECX
00445362 : CMP ECX,EAX
00445364 : JNC 0x0044536b
00445366 : MOV dword ptr [EBP + 0x8],EAX
00445369 : MOV ECX,EAX
0044536b : CALL 0x004c1790
00445370 : MOV dword ptr [EBP + -0x18],EAX
00445373 : MOV ESI,dword ptr [EBP + 0xc]
00445376 : SUB ESI,dword ptr [EBX + 0x4]
00445379 : SAR ESI,0x2
0044537c : XOR ECX,ECX
0044537e : MOV dword ptr [EBP + -0x14],ECX
00445381 : MOV dword ptr [EBP + -0x4],ECX
00445384 : WAIT
00445385 : LEA ECX,[EAX + ESI*0x4]
00445388 : MOV dword ptr [EBP + -0x1c],EDI
0044538b : MOV dword ptr [EBP + -0x20],ECX
0044538e : TEST EDI,EDI
00445390 : JBE 0x0044539f
00445392 : MOV EDX,dword ptr [EBP + 0x14]
00445395 : FLD float ptr [EDX]
00445397 : FSTP float ptr [ECX]
00445399 : DEC EDI
0044539a : ADD ECX,0x4
0044539d : JMP 0x00445388
0044539f : INC dword ptr [EBP + -0x14]
004453a2 : MOV EDX,EAX
004453a4 : MOV EAX,dword ptr [EBP + 0xc]
004453a7 : MOV EDI,dword ptr [EBX + 0x4]
004453aa : CALL 0x00461070
004453af : INC dword ptr [EBP + -0x14]
004453b2 : MOV EAX,dword ptr [EBP + 0x10]
004453b5 : LEA ECX,[ESI + EAX*0x1]
004453b8 : MOV ESI,dword ptr [EBP + -0x18]
004453bb : LEA EDX,[ESI + ECX*0x4]
004453be : MOV EAX,dword ptr [EBX + 0x8]
004453c1 : MOV EDI,dword ptr [EBP + 0xc]
004453c4 : CALL 0x00461070
004453c9 : WAIT
004453ca : MOV dword ptr [EBP + -0x4],0xffffffff
004453d1 : MOV ECX,dword ptr [EBX + 0x4]
004453d4 : MOV EDX,dword ptr [EBX + 0x8]
004453d7 : SUB EDX,ECX
004453d9 : SAR EDX,0x2
004453dc : MOV EDI,dword ptr [EBP + 0x10]
004453df : ADD EDI,EDX
004453e1 : TEST ECX,ECX
004453e3 : JZ 0x004453ea
004453e5 : CALL 0x006f04e0
004453ea : MOV EAX,dword ptr [EBP + 0x8]
004453ed : LEA ECX,[ESI + EAX*0x4]
004453f0 : MOV dword ptr [EBX + 0xc],ECX
004453f3 : LEA EDX,[ESI + EDI*0x4]
004453f6 : MOV dword ptr [EBX + 0x8],EDX
004453f9 : MOV dword ptr [EBX + 0x4],ESI
004453fc : MOV ECX,dword ptr [EBP + -0xc]
004453ff : MOV dword ptr FS:[0x0],ECX
00445406 : POP ECX
00445407 : POP EDI
00445408 : POP ESI
00445409 : POP EBX
0044540a : MOV ESP,EBP
0044540c : POP EBP
0044540d : RET 0x10
00445421 : MOV EAX,ESI
00445423 : MOV ECX,dword ptr [EBP + 0xc]
00445426 : SUB EAX,ECX
00445428 : SAR EAX,0x2
0044542b : CMP EAX,EDI
0044542d : JNC 0x00445496
0044542f : MOV EDX,dword ptr [EBP + 0x14]
00445432 : MOVSS XMM0,dword ptr [EDX]
00445436 : MOVSS dword ptr [EBP + 0x14],XMM0
0044543b : LEA EDX,[ECX + EDI*0x4]
0044543e : MOV EAX,ESI
00445440 : MOV EDI,ECX
00445442 : CALL 0x00461070
00445447 : MOV dword ptr [EBP + -0x4],0x2
0044544e : WAIT
0044544f : MOV ECX,dword ptr [EBX + 0x8]
00445452 : MOV ESI,ECX
00445454 : SUB ESI,dword ptr [EBP + 0xc]
00445457 : SAR ESI,0x2
0044545a : MOV EDX,dword ptr [EBP + 0x10]
0044545d : MOV EAX,EDX
0044545f : SUB EAX,ESI
00445461 : MOV dword ptr [EBP + -0x24],EAX
00445464 : MOV dword ptr [EBP + -0x28],ECX
00445467 : TEST EAX,EAX
00445469 : JBE 0x0044547a
0044546b : MOVSS XMM0,dword ptr [EBP + 0x14]
00445470 : MOVSS dword ptr [ECX],XMM0
00445474 : DEC EAX
00445475 : ADD ECX,0x4
00445478 : JMP 0x00445461
0044547a : WAIT
0044547b : MOV dword ptr [EBP + -0x4],0xffffffff
00445482 : LEA EAX,[EDX*0x4 + 0x0]
00445489 : ADD dword ptr [EBX + 0x8],EAX
0044548c : MOV ECX,dword ptr [EBX + 0x8]
0044548f : SUB ECX,EAX
00445491 : MOV EAX,dword ptr [EBP + 0xc]
00445494 : JMP 0x004454e6
00445496 : MOV ECX,dword ptr [EBP + 0x14]
00445499 : MOVSS XMM0,dword ptr [ECX]
0044549d : MOVSS dword ptr [EBP + 0x14],XMM0
004454a2 : LEA EAX,[EDI*0x4 + 0x0]
004454a9 : MOV dword ptr [EBP + 0x10],EAX
004454ac : MOV EDI,ESI
004454ae : SUB EDI,EAX
004454b0 : MOV EDX,ESI
004454b2 : MOV EAX,ESI
004454b4 : CALL 0x00461070
004454b9 : MOV dword ptr [EBX + 0x8],EAX
004454bc : MOV EAX,dword ptr [EBP + 0xc]
004454bf : SUB EDI,EAX
004454c1 : SAR EDI,0x2
004454c4 : TEST EDI,EDI
004454c6 : JLE 0x004454e0
004454c8 : LEA ECX,[EDI*0x4 + 0x0]
004454cf : PUSH ECX
004454d0 : PUSH EAX
004454d1 : PUSH ECX
004454d2 : SUB ESI,ECX
004454d4 : PUSH ESI
004454d5 : CALL 0x00634101
004454da : ADD ESP,0x10
004454dd : MOV EAX,dword ptr [EBP + 0xc]
004454e0 : MOV EDX,dword ptr [EBP + 0x10]
004454e3 : LEA ECX,[EDX + EAX*0x1]
004454e6 : PUSH EAX
004454e7 : LEA EDX,[EBP + 0x14]
004454ea : CALL 0x00445510
004454ef : ADD ESP,0x4
004454f2 : MOV ECX,dword ptr [EBP + -0xc]
004454f5 : MOV dword ptr FS:[0x0],ECX
004454fc : POP ECX
004454fd : POP EDI
004454fe : POP ESI
004454ff : POP EBX
00445500 : MOV ESP,EBP
00445502 : POP EBP
00445503 : RET 0x10
