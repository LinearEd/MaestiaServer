PROGRAM  : Maestia.exe
FUNCTION : FUN_00592050
ENTRY    : 00592050
BODY     : [[00592050, 0059223e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00592050(int *param_1,int *param_2)

{
  char *pcVar1;
  char cVar2;
  byte bVar3;
  GRefCountNTSImpl *pGVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  int in_ECX;
  GRefCountNTSImpl *this;
  int *piVar8;
  float10 fVar9;
  int *piStack0000000c;
  int *piStack_64;
  undefined1 local_50 [16];
  float afStack_40 [16];
  
  piStack_64 = *(int **)(in_ECX + 0x30);
  this = (GRefCountNTSImpl *)0x0;
  if (piStack_64 != (int *)0x0) {
    if (piStack_64[1] == 0) {
      if ((piStack_64 != (int *)0x0) && (*piStack_64 = *piStack_64 + -1, *piStack_64 == 0)) {
        FUN_00515cf0();
      }
      *(undefined4 *)(in_ECX + 0x30) = 0;
    }
    else {
      this = (GRefCountNTSImpl *)piStack_64[1];
      if (this != (GRefCountNTSImpl *)0x0) {
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
        piStack_64 = (int *)0x59208c;
        GRefCountNTSImpl::Release(this);
        piStack_64 = (int *)0x0;
        pGVar4 = (GRefCountNTSImpl *)(**(code **)(*(int *)this + 0x54))();
        if (pGVar4 == this) goto LAB_005920e6;
      }
    }
  }
  if (((2 < (uint)((undefined4 *)*param_2)[4]) && (pcVar1 = *(char **)*param_2, *pcVar1 == 'o')) &&
     (pcVar1[1] == 'n')) {
    piStack_64 = (int *)local_50;
    local_50[0] = 0;
    cVar2 = (**(code **)(*(int *)(in_ECX + 0x10) + 0x2c))(param_1,param_2);
    if (cVar2 == '\0') {
      piStack_64 = param_2;
      bVar3 = FUN_0058a5b0(param_1);
      if (bVar3 != 0) {
        *(byte *)(in_ECX + 0x34) = *(byte *)(in_ECX + 0x34) | bVar3;
      }
    }
    piStack_64 = (int *)0x5920e6;
    FUN_00526bc0();
  }
LAB_005920e6:
  if (this != (GRefCountNTSImpl *)0x0) {
    iVar6 = *param_2;
    if (*(int *)(iVar6 + 0xc) < 0) {
      iVar7 = *param_1;
      if (iVar6 == *(int *)(iVar7 + 0x244)) {
        piStack_64 = (int *)0x592113;
        uVar5 = (**(code **)(*(int *)this + 0x5c))();
        FUN_005272e0(&piStack_64,uVar5,0xffffffff,0);
        FUN_0058a700();
        piStack_64 = (int *)0x592136;
        GRefCountNTSImpl::Release(this);
        return;
      }
      if (iVar6 == *(int *)(iVar7 + 0x248)) {
        piStack_64 = (int *)0x592168;
        piStack_64 = (int *)(**(code **)(*(int *)this + 0x5c))();
        fVar9 = (float10)FUN_00527730();
        piStack_64 = (int *)(float)fVar9;
        FUN_0058a790();
        piStack_64 = (int *)0x59218c;
        GRefCountNTSImpl::Release(this);
        return;
      }
      if (iVar6 == *(int *)(iVar7 + 0x24c)) {
        piStack_64 = (int *)0x5921ab;
        piStack_64 = (int *)(**(code **)(*(int *)this + 0x5c))();
        iVar6 = FUN_00526fa0();
        if (iVar6 != 0) {
          *(uint *)(iVar6 + 8) = *(int *)(iVar6 + 8) + 1U & 0x8fffffff;
          piStack_64 = (int *)0x5921d3;
          iVar7 = (**(code **)(*(int *)(iVar6 + 0x10) + 8))();
          if (iVar7 == 7) {
            piStack0000000c = (int *)0x10;
            if ((int)*(int **)(iVar6 + 0x38) < 0x11) {
              piStack0000000c = *(int **)(iVar6 + 0x38);
            }
            piVar8 = (int *)0x0;
            if (piStack0000000c != (int *)0x0) {
              do {
                piStack_64 = (int *)0x592203;
                piStack_64 = (int *)(**(code **)(*(int *)this + 0x5c))();
                fVar9 = (float10)FUN_00527730();
                afStack_40[(int)piVar8] = (float)fVar9;
                piVar8 = (int *)((int)piVar8 + 1);
              } while (piVar8 < piStack0000000c);
            }
            piStack_64 = piStack0000000c;
            FUN_0058a800(afStack_40);
          }
          piStack_64 = (int *)0x59222e;
          FUN_00503db0();
        }
      }
    }
    piStack_64 = (int *)0x592235;
    GRefCountNTSImpl::Release(this);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00592050 : SUB ESP,0x50
00592053 : PUSH EBX
00592054 : MOV EBX,dword ptr [ESP + 0x58]
00592058 : PUSH EBP
00592059 : MOV EBP,dword ptr [ESP + 0x60]
0059205d : PUSH ESI
0059205e : PUSH EDI
0059205f : MOV EDI,ECX
00592061 : MOV EAX,dword ptr [EDI + 0x30]
00592064 : XOR ESI,ESI
00592066 : TEST EAX,EAX
00592068 : JZ 0x0059209b
0059206a : CMP dword ptr [EAX + 0x4],ESI
0059206d : JZ 0x00592140
00592073 : MOV ESI,dword ptr [EAX + 0x4]
00592076 : TEST ESI,ESI
00592078 : JZ 0x0059209b
0059207a : MOV EAX,0x1
0059207f : ADD dword ptr [ESI + 0x4],EAX
00592082 : ADD dword ptr [ESI + 0x4],EAX
00592085 : MOV ECX,ESI
00592087 : CALL 0x004ff7c0
0059208c : MOV EAX,dword ptr [ESI]
0059208e : MOV EDX,dword ptr [EAX + 0x54]
00592091 : PUSH 0x0
00592093 : MOV ECX,ESI
00592095 : CALL EDX
00592097 : CMP EAX,ESI
00592099 : JZ 0x005920e6
0059209b : MOV EAX,dword ptr [EBP]
0059209e : CMP dword ptr [EAX + 0x10],0x2
005920a2 : JBE 0x005920e6
005920a4 : MOV EAX,dword ptr [EAX]
005920a6 : CMP byte ptr [EAX],0x6f
005920a9 : JNZ 0x005920e6
005920ab : CMP byte ptr [EAX + 0x1],0x6e
005920af : JNZ 0x005920e6
005920b1 : MOV EAX,dword ptr [EDI + 0x10]
005920b4 : MOV EAX,dword ptr [EAX + 0x2c]
005920b7 : LEA EDX,[ESP + 0x10]
005920bb : PUSH EDX
005920bc : LEA ECX,[EDI + 0x10]
005920bf : PUSH EBP
005920c0 : PUSH EBX
005920c1 : MOV byte ptr [ESP + 0x1c],0x0
005920c6 : CALL EAX
005920c8 : TEST AL,AL
005920ca : JNZ 0x005920dd
005920cc : PUSH EBP
005920cd : PUSH EBX
005920ce : CALL 0x0058a5b0
005920d3 : ADD ESP,0x8
005920d6 : TEST AL,AL
005920d8 : JZ 0x005920dd
005920da : OR byte ptr [EDI + 0x34],AL
005920dd : LEA ECX,[ESP + 0x10]
005920e1 : CALL 0x00526bc0
005920e6 : TEST ESI,ESI
005920e8 : JZ 0x00592235
005920ee : MOV EAX,dword ptr [EBP]
005920f1 : MOV ECX,dword ptr [EAX + 0xc]
005920f4 : SHR ECX,0x1f
005920f7 : TEST CL,0x1
005920fa : JZ 0x0059222e
00592100 : MOV ECX,dword ptr [EBX]
00592102 : CMP EAX,dword ptr [ECX + 0x244]
00592108 : JNZ 0x00592157
0059210a : MOV EDX,dword ptr [ESI]
0059210c : MOV EAX,dword ptr [EDX + 0x5c]
0059210f : MOV ECX,ESI
00592111 : CALL EAX
00592113 : PUSH ECX
00592114 : MOV ECX,ESP
00592116 : PUSH 0x0
00592118 : PUSH -0x1
0059211a : PUSH EAX
0059211b : PUSH ECX
0059211c : MOV ECX,dword ptr [ESP + 0x80]
00592123 : CALL 0x005272e0
00592128 : MOV ECX,ESI
0059212a : CALL 0x0058a700
0059212f : MOV ECX,ESI
00592131 : CALL 0x004ff7c0
00592136 : POP EDI
00592137 : POP ESI
00592138 : POP EBP
00592139 : POP EBX
0059213a : ADD ESP,0x50
0059213d : RET 0xc
00592140 : TEST EAX,EAX
00592142 : JZ 0x0059214f
00592144 : ADD dword ptr [EAX],-0x1
00592147 : JNZ 0x0059214f
00592149 : PUSH EAX
0059214a : CALL 0x00515cf0
0059214f : MOV dword ptr [EDI + 0x30],ESI
00592152 : JMP 0x0059209b
00592157 : CMP EAX,dword ptr [ECX + 0x248]
0059215d : JNZ 0x00592196
0059215f : MOV EDX,dword ptr [ESI]
00592161 : MOV EAX,dword ptr [EDX + 0x5c]
00592164 : MOV ECX,ESI
00592166 : CALL EAX
00592168 : MOV ECX,dword ptr [ESP + 0x6c]
0059216c : PUSH EAX
0059216d : CALL 0x00527730
00592172 : FSTP float ptr [ESP + 0x6c]
00592176 : FLD float ptr [ESP + 0x6c]
0059217a : PUSH ECX
0059217b : MOV ECX,ESI
0059217d : FSTP float ptr [ESP]
00592180 : CALL 0x0058a790
00592185 : MOV ECX,ESI
00592187 : CALL 0x004ff7c0
0059218c : POP EDI
0059218d : POP ESI
0059218e : POP EBP
0059218f : POP EBX
00592190 : ADD ESP,0x50
00592193 : RET 0xc
00592196 : CMP EAX,dword ptr [ECX + 0x24c]
0059219c : JNZ 0x0059222e
005921a2 : MOV EDX,dword ptr [ESI]
005921a4 : MOV EAX,dword ptr [EDX + 0x5c]
005921a7 : MOV ECX,ESI
005921a9 : CALL EAX
005921ab : MOV ECX,dword ptr [ESP + 0x6c]
005921af : PUSH EAX
005921b0 : CALL 0x00526fa0
005921b5 : MOV EBP,EAX
005921b7 : TEST EBP,EBP
005921b9 : JZ 0x0059222e
005921bb : MOV ECX,dword ptr [EBP + 0x8]
005921be : INC ECX
005921bf : AND ECX,0x8fffffff
005921c5 : MOV dword ptr [EBP + 0x8],ECX
005921c8 : MOV EDX,dword ptr [EBP + 0x10]
005921cb : MOV EAX,dword ptr [EDX + 0x8]
005921ce : LEA ECX,[EBP + 0x10]
005921d1 : CALL EAX
005921d3 : CMP EAX,0x7
005921d6 : JNZ 0x00592227
005921d8 : MOV EAX,dword ptr [EBP + 0x38]
005921db : CMP EAX,0x10
005921de : MOV dword ptr [ESP + 0x6c],0x10
005921e6 : JG 0x005921ec
005921e8 : MOV dword ptr [ESP + 0x6c],EAX
005921ec : XOR EDI,EDI
005921ee : CMP dword ptr [ESP + 0x6c],EDI
005921f2 : JBE 0x00592216
005921f4 : MOV ECX,dword ptr [EBP + 0x34]
005921f7 : MOV EDX,dword ptr [ESI]
005921f9 : MOV EBX,dword ptr [ECX + EDI*0x4]
005921fc : MOV EAX,dword ptr [EDX + 0x5c]
005921ff : MOV ECX,ESI
00592201 : CALL EAX
00592203 : PUSH EAX
00592204 : MOV ECX,EBX
00592206 : CALL 0x00527730
0059220b : FSTP float ptr [ESP + EDI*0x4 + 0x20]
0059220f : INC EDI
00592210 : CMP EDI,dword ptr [ESP + 0x6c]
00592214 : JC 0x005921f4
00592216 : MOV ECX,dword ptr [ESP + 0x6c]
0059221a : PUSH ECX
0059221b : LEA EDX,[ESP + 0x24]
0059221f : PUSH EDX
00592220 : MOV ECX,ESI
00592222 : CALL 0x0058a800
00592227 : MOV ECX,EBP
00592229 : CALL 0x00503db0
0059222e : MOV ECX,ESI
00592230 : CALL 0x004ff7c0
00592235 : POP EDI
00592236 : POP ESI
00592237 : POP EBP
00592238 : POP EBX
00592239 : ADD ESP,0x50
0059223c : RET 0xc
