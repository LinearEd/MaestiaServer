PROGRAM  : Maestia.exe
FUNCTION : __87except
ENTRY    : 0065fcff
BODY     : [[0065fcff, 0065fe3d]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __87except
   
   Library: Visual Studio 2008 Release */

void __87except(int param_1,int *param_2,ushort *param_3)

{
  int iVar1;
  uint local_98;
  undefined4 local_94;
  undefined1 local_90 [48];
  undefined8 local_60;
  uint local_50;
  uint local_14;
  
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffff0;
  local_98 = (uint)*param_3;
  iVar1 = *param_2;
  if (iVar1 == 1) {
LAB_0065fd8e:
    local_94 = 8;
LAB_0065fd98:
    iVar1 = __handle_exc(local_94,param_2 + 6,local_98);
    if (iVar1 == 0) {
      if (((param_1 == 0x10) || (param_1 == 0x16)) || (param_1 == 0x1d)) {
        local_60 = *(undefined8 *)(param_2 + 4);
        local_50 = local_50 & 0xffffffe3 | 3;
      }
      else {
        local_50 = local_50 & 0xfffffffe;
      }
      __raise_exc(local_90,&local_98,local_94,param_1,param_2 + 2,param_2 + 6);
    }
  }
  else {
    if (iVar1 == 2) {
      local_94 = 4;
      goto LAB_0065fd98;
    }
    if (iVar1 == 3) {
      local_94 = 0x11;
      goto LAB_0065fd98;
    }
    if (iVar1 == 4) {
      local_94 = 0x12;
      goto LAB_0065fd98;
    }
    if (iVar1 == 5) goto LAB_0065fd8e;
    if (iVar1 == 7) {
      *param_2 = 1;
    }
    else if (iVar1 == 8) {
      local_94 = 0x10;
      goto LAB_0065fd98;
    }
  }
  __ctrlfp(local_98,0xffff);
  if ((*param_2 != 8) && (DAT_00d68284 == 0)) {
    iVar1 = FUN_006553b8(param_2);
    if (iVar1 != 0) goto LAB_0065fe2b;
  }
  __set_errno_from_matherr(*param_2);
LAB_0065fe2b:
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffff0);
  return;
}



============================================================
DISASSEMBLY
============================================================
0065fcff : MOV EDI,EDI
0065fd01 : PUSH EBX
0065fd02 : MOV EBX,ESP
0065fd04 : PUSH ECX
0065fd05 : PUSH ECX
0065fd06 : AND ESP,0xfffffff0
0065fd09 : ADD ESP,0x4
0065fd0c : PUSH EBP
0065fd0d : MOV EBP,dword ptr [EBX + 0x4]
0065fd10 : MOV dword ptr [ESP + 0x4],EBP
0065fd14 : MOV EBP,ESP
0065fd16 : SUB ESP,0x88
0065fd1c : MOV EAX,[0x00d66fa0]
0065fd21 : XOR EAX,EBP
0065fd23 : MOV dword ptr [EBP + -0x4],EAX
0065fd26 : MOV EAX,dword ptr [EBX + 0x10]
0065fd29 : MOVZX ECX,word ptr [EAX]
0065fd2c : PUSH ESI
0065fd2d : MOV ESI,dword ptr [EBX + 0xc]
0065fd30 : MOV EAX,dword ptr [ESI]
0065fd32 : DEC EAX
0065fd33 : PUSH EDI
0065fd34 : MOV dword ptr [EBP + 0xffffff78],ECX
0065fd3a : JZ 0x0065fd8e
0065fd3c : DEC EAX
0065fd3d : JZ 0x0065fd82
0065fd3f : DEC EAX
0065fd40 : JZ 0x0065fd76
0065fd42 : DEC EAX
0065fd43 : JZ 0x0065fd6a
0065fd45 : DEC EAX
0065fd46 : JZ 0x0065fd8e
0065fd48 : DEC EAX
0065fd49 : DEC EAX
0065fd4a : JZ 0x0065fd5f
0065fd4c : DEC EAX
0065fd4d : JNZ 0x0065fdf8
0065fd53 : MOV dword ptr [EBP + 0xffffff7c],0x10
0065fd5d : JMP 0x0065fd98
0065fd5f : MOV dword ptr [ESI],0x1
0065fd65 : JMP 0x0065fdf8
0065fd6a : MOV dword ptr [EBP + 0xffffff7c],0x12
0065fd74 : JMP 0x0065fd98
0065fd76 : MOV dword ptr [EBP + 0xffffff7c],0x11
0065fd80 : JMP 0x0065fd98
0065fd82 : MOV dword ptr [EBP + 0xffffff7c],0x4
0065fd8c : JMP 0x0065fd98
0065fd8e : MOV dword ptr [EBP + 0xffffff7c],0x8
0065fd98 : PUSH ECX
0065fd99 : LEA EDI,[ESI + 0x18]
0065fd9c : PUSH EDI
0065fd9d : PUSH dword ptr [EBP + 0xffffff7c]
0065fda3 : CALL 0x0065dae9
0065fda8 : ADD ESP,0xc
0065fdab : TEST EAX,EAX
0065fdad : JNZ 0x0065fdf8
0065fdaf : MOV EAX,dword ptr [EBX + 0x8]
0065fdb2 : CMP EAX,0x10
0065fdb5 : JZ 0x0065fdc7
0065fdb7 : CMP EAX,0x16
0065fdba : JZ 0x0065fdc7
0065fdbc : CMP EAX,0x1d
0065fdbf : JZ 0x0065fdc7
0065fdc1 : AND dword ptr [EBP + -0x40],0xfffffffe
0065fdc5 : JMP 0x0065fdd9
0065fdc7 : MOV ECX,dword ptr [EBP + -0x40]
0065fdca : FLD double ptr [ESI + 0x10]
0065fdcd : AND ECX,0xffffffe3
0065fdd0 : FSTP double ptr [EBP + -0x50]
0065fdd3 : OR ECX,0x3
0065fdd6 : MOV dword ptr [EBP + -0x40],ECX
0065fdd9 : PUSH EDI
0065fdda : LEA ECX,[ESI + 0x8]
0065fddd : PUSH ECX
0065fdde : PUSH EAX
0065fddf : PUSH dword ptr [EBP + 0xffffff7c]
0065fde5 : LEA EAX,[EBP + 0xffffff78]
0065fdeb : PUSH EAX
0065fdec : LEA EAX,[EBP + -0x80]
0065fdef : PUSH EAX
0065fdf0 : CALL 0x0065dac6
0065fdf5 : ADD ESP,0x18
0065fdf8 : PUSH 0xffff
0065fdfd : PUSH dword ptr [EBP + 0xffffff78]
0065fe03 : CALL 0x0065e064
0065fe08 : CMP dword ptr [ESI],0x8
0065fe0b : POP ECX
0065fe0c : POP ECX
0065fe0d : JZ 0x0065fe23
0065fe0f : CMP dword ptr [0x00d68284],0x0
0065fe16 : JNZ 0x0065fe23
0065fe18 : PUSH ESI
0065fe19 : CALL 0x006553b8
0065fe1e : POP ECX
0065fe1f : TEST EAX,EAX
0065fe21 : JNZ 0x0065fe2b
0065fe23 : PUSH dword ptr [ESI]
0065fe25 : CALL 0x0065dccb
0065fe2a : POP ECX
0065fe2b : MOV ECX,dword ptr [EBP + -0x4]
0065fe2e : POP EDI
0065fe2f : XOR ECX,EBP
0065fe31 : POP ESI
0065fe32 : CALL 0x00633e6b
0065fe37 : MOV ESP,EBP
0065fe39 : POP EBP
0065fe3a : MOV ESP,EBX
0065fe3c : POP EBX
0065fe3d : RET
