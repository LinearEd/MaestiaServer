PROGRAM  : Maestia.exe
FUNCTION : FUN_0045e690
ENTRY    : 0045e690
BODY     : [[0045e690, 0045e825] [0045e837, 0045e91d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0045e690(uint param_1,undefined4 *param_2,int *param_3)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int iVar3;
  uint *puVar4;
  int iVar5;
  uint uVar6;
  undefined4 uVar7;
  uint uStack_34;
  int local_24;
  undefined2 local_20;
  undefined1 local_1e;
  undefined4 local_1c;
  int local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a850;
  local_10 = ExceptionList;
  uStack_34 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_34;
  ExceptionList = &local_10;
  iVar5 = *(int *)(param_1 + 4);
  if (iVar5 == 0) {
    param_1 = 0;
  }
  else {
    param_1 = (*(int *)(param_1 + 0xc) - iVar5) / 7;
  }
  puVar1 = *(undefined4 **)(iVar3 + 8);
  iVar5 = ((int)puVar1 - iVar5) / 7;
  puVar4 = &uStack_34;
  if (iVar5 == 0x24924924) {
    iVar5 = FUN_00429be0();
    puVar4 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar4;
  uVar6 = iVar5 + 1;
  if (param_1 < uVar6) {
    if (0x24924924 - (param_1 >> 1) < param_1) {
      param_1 = 0;
    }
    else {
      param_1 = param_1 + (param_1 >> 1);
    }
    if (param_1 < uVar6) {
      param_1 = uVar6;
    }
    local_18 = FUN_0045f190();
    local_24 = ((int)param_2 - *(int *)(iVar3 + 4)) / 7;
    local_8 = 0;
    FUN_0045e580(param_3);
    iVar5 = local_18;
    local_1c = 1;
    FUN_0045e640(*(undefined4 *)(iVar3 + 4),param_2);
    local_1c = 2;
    FUN_0045e640(param_2,*(undefined4 *)(iVar3 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar3 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar3 + 0xc) = param_1 * 7 + iVar5;
    *(int *)(iVar3 + 8) = ((*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4)) / 7 + 1) * 7 + iVar5;
    *(int *)(iVar3 + 4) = iVar5;
    ExceptionList = local_10;
    return;
  }
  iVar5 = (int)puVar1 - (int)param_2 >> 0x1f;
  local_24 = *param_3;
  local_20 = (undefined2)param_3[1];
  local_1e = *(undefined1 *)((int)param_3 + 6);
  if (((int)puVar1 - (int)param_2) / 7 + iVar5 == iVar5) {
    FUN_0045e640(param_2,puVar1);
    local_8 = 2;
    FUN_0045e580(&local_24);
    local_8 = 0xffffffff;
    *(int *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 7;
  }
  else {
    uVar7 = FUN_0045e640((undefined4 *)((int)puVar1 + -7),puVar1);
    *(undefined4 *)(iVar3 + 8) = uVar7;
    puVar2 = (undefined4 *)((int)puVar1 + -7);
    while (param_2 != puVar2) {
      *(undefined4 *)((int)puVar1 + -7) = *(undefined4 *)((int)puVar2 + -7);
      *(undefined2 *)((int)puVar1 + -3) = *(undefined2 *)((int)puVar2 + -3);
      *(undefined1 *)((int)puVar1 + -1) = *(undefined1 *)((int)puVar2 + -1);
      puVar1 = (undefined4 *)((int)puVar1 + -7);
      puVar2 = (undefined4 *)((int)puVar2 + -7);
    }
  }
  FUN_0045e670();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0045e690 : PUSH EBP
0045e691 : MOV EBP,ESP
0045e693 : PUSH -0x1
0045e695 : PUSH 0xb7a850
0045e69a : MOV EAX,FS:[0x0]
0045e6a0 : PUSH EAX
0045e6a1 : SUB ESP,0x14
0045e6a4 : PUSH EBX
0045e6a5 : PUSH ESI
0045e6a6 : PUSH EDI
0045e6a7 : MOV EAX,[0x00d66fa0]
0045e6ac : XOR EAX,EBP
0045e6ae : PUSH EAX
0045e6af : LEA EAX,[EBP + -0xc]
0045e6b2 : MOV FS:[0x0],EAX
0045e6b8 : MOV dword ptr [EBP + -0x10],ESP
0045e6bb : MOV EBX,dword ptr [EBP + 0x8]
0045e6be : MOV EDI,dword ptr [EBX + 0x4]
0045e6c1 : TEST EDI,EDI
0045e6c3 : JNZ 0x0045e6ca
0045e6c5 : MOV dword ptr [EBP + 0x8],EDI
0045e6c8 : JMP 0x0045e6e5
0045e6ca : MOV ECX,dword ptr [EBX + 0xc]
0045e6cd : SUB ECX,EDI
0045e6cf : MOV EAX,0x92492493
0045e6d4 : IMUL ECX
0045e6d6 : ADD EDX,ECX
0045e6d8 : SAR EDX,0x2
0045e6db : MOV EAX,EDX
0045e6dd : SHR EAX,0x1f
0045e6e0 : ADD EAX,EDX
0045e6e2 : MOV dword ptr [EBP + 0x8],EAX
0045e6e5 : MOV ESI,dword ptr [EBX + 0x8]
0045e6e8 : MOV ECX,ESI
0045e6ea : SUB ECX,EDI
0045e6ec : MOV EAX,0x92492493
0045e6f1 : IMUL ECX
0045e6f3 : ADD EDX,ECX
0045e6f5 : SAR EDX,0x2
0045e6f8 : MOV EAX,EDX
0045e6fa : SHR EAX,0x1f
0045e6fd : ADD EAX,EDX
0045e6ff : MOV ECX,0x24924924
0045e704 : SUB ECX,EAX
0045e706 : CMP ECX,0x1
0045e709 : JNC 0x0045e710
0045e70b : CALL 0x00429be0
0045e710 : INC EAX
0045e711 : MOV ECX,dword ptr [EBP + 0x8]
0045e714 : CMP ECX,EAX
0045e716 : JNC 0x0045e837
0045e71c : MOV EDX,ECX
0045e71e : SHR EDX,0x1
0045e720 : MOV ESI,0x24924924
0045e725 : SUB ESI,EDX
0045e727 : CMP ESI,ECX
0045e729 : JNC 0x0045e737
0045e72b : MOV dword ptr [EBP + 0x8],0x0
0045e732 : MOV ECX,dword ptr [EBP + 0x8]
0045e735 : JMP 0x0045e73c
0045e737 : ADD ECX,EDX
0045e739 : MOV dword ptr [EBP + 0x8],ECX
0045e73c : CMP ECX,EAX
0045e73e : JNC 0x0045e745
0045e740 : MOV dword ptr [EBP + 0x8],EAX
0045e743 : MOV ECX,EAX
0045e745 : CALL 0x0045f190
0045e74a : MOV ESI,EAX
0045e74c : MOV dword ptr [EBP + -0x14],ESI
0045e74f : MOV ECX,dword ptr [EBP + 0xc]
0045e752 : SUB ECX,dword ptr [EBX + 0x4]
0045e755 : MOV EAX,0x92492493
0045e75a : IMUL ECX
0045e75c : ADD EDX,ECX
0045e75e : SAR EDX,0x2
0045e761 : MOV EAX,EDX
0045e763 : SHR EAX,0x1f
0045e766 : ADD EAX,EDX
0045e768 : MOV dword ptr [EBP + -0x20],EAX
0045e76b : MOV dword ptr [EBP + -0x4],0x0
0045e772 : MOV EDX,dword ptr [EBP + 0x10]
0045e775 : PUSH EDX
0045e776 : LEA EDI,[EAX*0x8 + 0x0]
0045e77d : SUB EDI,EAX
0045e77f : ADD EDI,ESI
0045e781 : MOV ESI,0x1
0045e786 : CALL 0x0045e580
0045e78b : MOV dword ptr [EBP + -0x18],ESI
0045e78e : MOV EAX,dword ptr [EBP + 0xc]
0045e791 : PUSH EAX
0045e792 : MOV ECX,dword ptr [EBX + 0x4]
0045e795 : PUSH ECX
0045e796 : MOV EDI,dword ptr [EBP + -0x14]
0045e799 : MOV EDX,EDI
0045e79b : CALL 0x0045e640
0045e7a0 : MOV dword ptr [EBP + -0x18],0x2
0045e7a7 : MOV EAX,dword ptr [EBP + -0x20]
0045e7aa : INC EAX
0045e7ab : LEA EDX,[EAX*0x8 + 0x0]
0045e7b2 : SUB EDX,EAX
0045e7b4 : ADD EDX,EDI
0045e7b6 : MOV EAX,dword ptr [EBX + 0x8]
0045e7b9 : PUSH EAX
0045e7ba : MOV ECX,dword ptr [EBP + 0xc]
0045e7bd : PUSH ECX
0045e7be : CALL 0x0045e640
0045e7c3 : MOV dword ptr [EBP + -0x4],0xffffffff
0045e7ca : MOV ECX,dword ptr [EBX + 0x4]
0045e7cd : MOV ESI,dword ptr [EBX + 0x8]
0045e7d0 : SUB ESI,ECX
0045e7d2 : MOV EAX,0x92492493
0045e7d7 : IMUL ESI
0045e7d9 : ADD EDX,ESI
0045e7db : SAR EDX,0x2
0045e7de : MOV EAX,EDX
0045e7e0 : SHR EAX,0x1f
0045e7e3 : LEA ESI,[EDX + EAX*0x1 + 0x1]
0045e7e7 : TEST ECX,ECX
0045e7e9 : JZ 0x0045e7f0
0045e7eb : CALL 0x006f04e0
0045e7f0 : MOV EAX,dword ptr [EBP + 0x8]
0045e7f3 : LEA ECX,[EAX*0x8 + 0x0]
0045e7fa : SUB ECX,EAX
0045e7fc : ADD ECX,EDI
0045e7fe : MOV dword ptr [EBX + 0xc],ECX
0045e801 : LEA EDX,[ESI*0x8 + 0x0]
0045e808 : SUB EDX,ESI
0045e80a : ADD EDX,EDI
0045e80c : MOV dword ptr [EBX + 0x8],EDX
0045e80f : MOV dword ptr [EBX + 0x4],EDI
0045e812 : MOV ECX,dword ptr [EBP + -0xc]
0045e815 : MOV dword ptr FS:[0x0],ECX
0045e81c : POP ECX
0045e81d : POP EDI
0045e81e : POP ESI
0045e81f : POP EBX
0045e820 : MOV ESP,EBP
0045e822 : POP EBP
0045e823 : RET 0xc
0045e837 : MOV ECX,ESI
0045e839 : MOV EDI,dword ptr [EBP + 0xc]
0045e83c : SUB ECX,EDI
0045e83e : MOV EAX,0x92492493
0045e843 : IMUL ECX
0045e845 : ADD EDX,ECX
0045e847 : SAR EDX,0x2
0045e84a : MOV EAX,EDX
0045e84c : SHR EAX,0x1f
0045e84f : ADD EAX,EDX
0045e851 : PUSH ESI
0045e852 : CMP EAX,0x1
0045e855 : MOV EAX,dword ptr [EBP + 0x10]
0045e858 : MOV ECX,dword ptr [EAX]
0045e85a : MOV DX,word ptr [EAX + 0x4]
0045e85e : MOV dword ptr [EBP + -0x20],ECX
0045e861 : MOV word ptr [EBP + -0x1c],DX
0045e865 : MOV AL,byte ptr [EAX + 0x6]
0045e868 : MOV byte ptr [EBP + -0x1a],AL
0045e86b : JNC 0x0045e8be
0045e86d : LEA EDX,[EDI + 0x7]
0045e870 : PUSH EDI
0045e871 : CALL 0x0045e640
0045e876 : MOV dword ptr [EBP + -0x4],0x2
0045e87d : MOV EDI,dword ptr [EBX + 0x8]
0045e880 : LEA ECX,[EBP + -0x20]
0045e883 : PUSH ECX
0045e884 : MOV ECX,EDI
0045e886 : SUB ECX,dword ptr [EBP + 0xc]
0045e889 : MOV EAX,0x92492493
0045e88e : IMUL ECX
0045e890 : ADD EDX,ECX
0045e892 : SAR EDX,0x2
0045e895 : MOV EAX,EDX
0045e897 : SHR EAX,0x1f
0045e89a : ADD EAX,EDX
0045e89c : MOV ESI,0x1
0045e8a1 : SUB ESI,EAX
0045e8a3 : CALL 0x0045e580
0045e8a8 : MOV dword ptr [EBP + -0x4],0xffffffff
0045e8af : ADD dword ptr [EBX + 0x8],0x7
0045e8b3 : MOV EBX,dword ptr [EBX + 0x8]
0045e8b6 : LEA ESI,[EBX + -0x7]
0045e8b9 : MOV EAX,dword ptr [EBP + 0xc]
0045e8bc : JMP 0x0045e902
0045e8be : LEA EDI,[ESI + -0x7]
0045e8c1 : PUSH EDI
0045e8c2 : MOV EDX,ESI
0045e8c4 : CALL 0x0045e640
0045e8c9 : MOV dword ptr [EBX + 0x8],EAX
0045e8cc : MOV ECX,EDI
0045e8ce : MOV EAX,dword ptr [EBP + 0xc]
0045e8d1 : MOV ESI,EAX
0045e8d3 : CMP EAX,ECX
0045e8d5 : JZ 0x0045e8ff
0045e8d7 : LEA EAX,[ECX + 0x7]
0045e8da : LEA EBX,[EBX]
0045e8e0 : SUB ECX,0x7
0045e8e3 : SUB EAX,0x7
0045e8e6 : MOV EDX,dword ptr [ECX]
0045e8e8 : MOV dword ptr [EAX],EDX
0045e8ea : MOV DX,word ptr [ECX + 0x4]
0045e8ee : MOV word ptr [EAX + 0x4],DX
0045e8f2 : MOV DL,byte ptr [ECX + 0x6]
0045e8f5 : MOV byte ptr [EAX + 0x6],DL
0045e8f8 : CMP ECX,ESI
0045e8fa : JNZ 0x0045e8e0
0045e8fc : MOV EAX,dword ptr [EBP + 0xc]
0045e8ff : LEA ESI,[EAX + 0x7]
0045e902 : LEA ECX,[EBP + -0x20]
0045e905 : CALL 0x0045e670
0045e90a : MOV ECX,dword ptr [EBP + -0xc]
0045e90d : MOV dword ptr FS:[0x0],ECX
0045e914 : POP ECX
0045e915 : POP EDI
0045e916 : POP ESI
0045e917 : POP EBX
0045e918 : MOV ESP,EBP
0045e91a : POP EBP
0045e91b : RET 0xc
