PROGRAM  : Maestia.exe
FUNCTION : ___removelocaleref
ENTRY    : 00639bb2
BODY     : [[00639bb2, 00639c4a]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    ___removelocaleref
   
   Library: Visual Studio 2008 Release */

LONG * ___removelocaleref(LONG *param_1)

{
  LONG *pLVar1;
  LONG *pLVar2;
  
  pLVar1 = param_1;
  if (param_1 != (LONG *)0x0) {
    InterlockedDecrement(param_1);
    if ((LONG *)param_1[0x2c] != (LONG *)0x0) {
      InterlockedDecrement((LONG *)param_1[0x2c]);
    }
    if ((LONG *)param_1[0x2e] != (LONG *)0x0) {
      InterlockedDecrement((LONG *)param_1[0x2e]);
    }
    if ((LONG *)param_1[0x2d] != (LONG *)0x0) {
      InterlockedDecrement((LONG *)param_1[0x2d]);
    }
    if ((LONG *)param_1[0x30] != (LONG *)0x0) {
      InterlockedDecrement((LONG *)param_1[0x30]);
    }
    pLVar2 = param_1 + 0x14;
    param_1 = (LONG *)0x6;
    do {
      if (((undefined *)pLVar2[-2] != &DAT_00d67d58) && ((LONG *)*pLVar2 != (LONG *)0x0)) {
        InterlockedDecrement((LONG *)*pLVar2);
      }
      if ((pLVar2[-1] != 0) && ((LONG *)pLVar2[1] != (LONG *)0x0)) {
        InterlockedDecrement((LONG *)pLVar2[1]);
      }
      pLVar2 = pLVar2 + 4;
      param_1 = (LONG *)((int)param_1 + -1);
    } while (param_1 != (LONG *)0x0);
    InterlockedDecrement((LONG *)(pLVar1[0x35] + 0xb4));
  }
  return pLVar1;
}



============================================================
DISASSEMBLY
============================================================
00639bb2 : MOV EDI,EDI
00639bb4 : PUSH EBP
00639bb5 : MOV EBP,ESP
00639bb7 : PUSH EDI
00639bb8 : MOV EDI,dword ptr [EBP + 0x8]
00639bbb : TEST EDI,EDI
00639bbd : JZ 0x00639c46
00639bc3 : PUSH EBX
00639bc4 : PUSH ESI
00639bc5 : MOV ESI,dword ptr [0x00b851b0]
00639bcb : PUSH EDI
00639bcc : CALL ESI
00639bce : MOV EAX,dword ptr [EDI + 0xb0]
00639bd4 : TEST EAX,EAX
00639bd6 : JZ 0x00639bdb
00639bd8 : PUSH EAX
00639bd9 : CALL ESI
00639bdb : MOV EAX,dword ptr [EDI + 0xb8]
00639be1 : TEST EAX,EAX
00639be3 : JZ 0x00639be8
00639be5 : PUSH EAX
00639be6 : CALL ESI
00639be8 : MOV EAX,dword ptr [EDI + 0xb4]
00639bee : TEST EAX,EAX
00639bf0 : JZ 0x00639bf5
00639bf2 : PUSH EAX
00639bf3 : CALL ESI
00639bf5 : MOV EAX,dword ptr [EDI + 0xc0]
00639bfb : TEST EAX,EAX
00639bfd : JZ 0x00639c02
00639bff : PUSH EAX
00639c00 : CALL ESI
00639c02 : LEA EBX,[EDI + 0x50]
00639c05 : MOV dword ptr [EBP + 0x8],0x6
00639c0c : CMP dword ptr [EBX + -0x8],0xd67d58
00639c13 : JZ 0x00639c1e
00639c15 : MOV EAX,dword ptr [EBX]
00639c17 : TEST EAX,EAX
00639c19 : JZ 0x00639c1e
00639c1b : PUSH EAX
00639c1c : CALL ESI
00639c1e : CMP dword ptr [EBX + -0x4],0x0
00639c22 : JZ 0x00639c2e
00639c24 : MOV EAX,dword ptr [EBX + 0x4]
00639c27 : TEST EAX,EAX
00639c29 : JZ 0x00639c2e
00639c2b : PUSH EAX
00639c2c : CALL ESI
00639c2e : ADD EBX,0x10
00639c31 : DEC dword ptr [EBP + 0x8]
00639c34 : JNZ 0x00639c0c
00639c36 : MOV EAX,dword ptr [EDI + 0xd4]
00639c3c : ADD EAX,0xb4
00639c41 : PUSH EAX
00639c42 : CALL ESI
00639c44 : POP ESI
00639c45 : POP EBX
00639c46 : MOV EAX,EDI
00639c48 : POP EDI
00639c49 : POP EBP
00639c4a : RET
