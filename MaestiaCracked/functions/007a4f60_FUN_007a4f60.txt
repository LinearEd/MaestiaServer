PROGRAM  : Maestia.exe
FUNCTION : FUN_007a4f60
ENTRY    : 007a4f60
BODY     : [[007a4f60, 007a502f]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007a4f60(int param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  
  iVar5 = param_2;
  if (param_2 == 0) {
    return 0x80004005;
  }
  *(int *)(param_2 + 0x78) = param_1;
  iVar1 = *(int *)(param_1 + 0x10bc);
  if (iVar1 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = *(int *)(param_1 + 0x10c4) - iVar1 >> 2;
  }
  piVar2 = *(int **)(param_1 + 0x10c0);
  if ((uint)((int)piVar2 - iVar1 >> 2) < uVar4) {
    *piVar2 = param_2;
    *(int **)(param_1 + 0x10c0) = piVar2 + 1;
  }
  else {
    FUN_004d2c60(param_1 + 0x10b8,piVar2,&param_2);
  }
  if (*(int *)(iVar5 + 4) == 0x16) {
    uVar3 = FUN_007a4160(*(undefined4 *)(iVar5 + 0x10b4));
    FUN_007a4e90(uVar3,iVar5);
    return 0;
  }
  param_2 = 4;
  FUN_00484470(&param_2);
  if (param_1 != *(int *)(param_1 + 0x10cc)) {
    FUN_007a4e90(*(undefined4 *)(param_1 + 0x10),iVar5);
    return 0;
  }
  FUN_007a4e90(0,iVar5);
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007a4f60 : PUSH EBP
007a4f61 : MOV EBP,ESP
007a4f63 : PUSH ECX
007a4f64 : MOV EAX,dword ptr [EBP + 0x8]
007a4f67 : PUSH EBX
007a4f68 : MOV EBX,dword ptr [EBP + 0xc]
007a4f6b : PUSH ESI
007a4f6c : PUSH EDI
007a4f6d : TEST EBX,EBX
007a4f6f : JNZ 0x007a4f7e
007a4f71 : MOV EAX,0x80004005
007a4f76 : POP EDI
007a4f77 : POP ESI
007a4f78 : POP EBX
007a4f79 : POP ECX
007a4f7a : POP EBP
007a4f7b : RET 0x8
007a4f7e : MOV dword ptr [EBX + 0x78],EAX
007a4f81 : MOV EDI,dword ptr [EAX + 0x10bc]
007a4f87 : ADD EAX,0x10b8
007a4f8c : TEST EDI,EDI
007a4f8e : JNZ 0x007a4f94
007a4f90 : XOR ECX,ECX
007a4f92 : JMP 0x007a4f9c
007a4f94 : MOV ECX,dword ptr [EAX + 0xc]
007a4f97 : SUB ECX,EDI
007a4f99 : SAR ECX,0x2
007a4f9c : MOV EDX,dword ptr [EAX + 0x8]
007a4f9f : MOV ESI,EDX
007a4fa1 : SUB ESI,EDI
007a4fa3 : SAR ESI,0x2
007a4fa6 : CMP ESI,ECX
007a4fa8 : JNC 0x007a4fb4
007a4faa : MOV dword ptr [EDX],EBX
007a4fac : ADD EDX,0x4
007a4faf : MOV dword ptr [EAX + 0x8],EDX
007a4fb2 : JMP 0x007a4fbf
007a4fb4 : LEA ECX,[EBP + 0xc]
007a4fb7 : PUSH ECX
007a4fb8 : PUSH EDX
007a4fb9 : PUSH EAX
007a4fba : CALL 0x004d2c60
007a4fbf : CMP dword ptr [EBX + 0x4],0x16
007a4fc3 : MOV ESI,dword ptr [EBP + 0x8]
007a4fc6 : JNZ 0x007a4fe5
007a4fc8 : MOV EDX,dword ptr [EBX + 0x10b4]
007a4fce : PUSH EBX
007a4fcf : PUSH EDX
007a4fd0 : CALL 0x007a4160
007a4fd5 : PUSH EAX
007a4fd6 : CALL 0x007a4e90
007a4fdb : XOR EAX,EAX
007a4fdd : POP EDI
007a4fde : POP ESI
007a4fdf : POP EBX
007a4fe0 : POP ECX
007a4fe1 : POP EBP
007a4fe2 : RET 0x8
007a4fe5 : LEA EAX,[EBP + 0xc]
007a4fe8 : PUSH EAX
007a4fe9 : LEA ECX,[ESI + 0x10c8]
007a4fef : LEA EAX,[EBP + 0x8]
007a4ff2 : MOV dword ptr [EBP + 0xc],0x4
007a4ff9 : CALL 0x00484470
007a4ffe : MOV EAX,dword ptr [EBP + 0x8]
007a5001 : CMP EAX,dword ptr [ESI + 0x10cc]
007a5007 : JZ 0x007a501d
007a5009 : MOV EAX,dword ptr [EAX + 0x10]
007a500c : PUSH EBX
007a500d : PUSH EAX
007a500e : CALL 0x007a4e90
007a5013 : XOR EAX,EAX
007a5015 : POP EDI
007a5016 : POP ESI
007a5017 : POP EBX
007a5018 : POP ECX
007a5019 : POP EBP
007a501a : RET 0x8
007a501d : XOR EAX,EAX
007a501f : PUSH EBX
007a5020 : PUSH EAX
007a5021 : CALL 0x007a4e90
007a5026 : POP EDI
007a5027 : POP ESI
007a5028 : XOR EAX,EAX
007a502a : POP EBX
007a502b : POP ECX
007a502c : POP EBP
007a502d : RET 0x8
