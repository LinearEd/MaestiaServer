PROGRAM  : Maestia.exe
FUNCTION : FUN_006197d0
ENTRY    : 006197d0
BODY     : [[006197d0, 00619a7f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006197d0(uint *param_1,float param_2)

{
  float fVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  bool bVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  int *piVar9;
  float fVar10;
  float fVar11;
  int local_10;
  
  fVar10 = (float)param_1[0xc] * (float)param_1[0xb] * (float)param_1[2] * (float)param_1[3] *
           param_2 + (float)param_1[9];
  param_1[10] = param_1[9];
  fVar1 = (float)param_1[4];
  bVar5 = fVar10 <= fVar1;
  param_1[9] = (uint)fVar10;
  if (bVar5) {
    param_1[9] = (uint)fVar1;
  }
  fVar10 = (float)param_1[9];
  fVar11 = (float)param_1[5];
  if (fVar10 < fVar11) {
    if (!bVar5) {
      if (0.0 <= (float)param_1[3]) {
        local_10 = (int)(longlong)ROUND(fVar10);
        fVar7 = (float)local_10;
        if (local_10 < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        piVar9 = (int *)(param_1[1] + 0x2c);
        piVar2 = *(int **)(*(int *)(param_1[1] + 0x2c) + param_1[6] * 4);
        fVar6 = (float)*piVar2;
        if (*piVar2 < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        if (fVar6 <= fVar7) {
          do {
            iVar3 = **(int **)(*piVar9 + param_1[7] * 4);
            fVar6 = (float)iVar3;
            if (iVar3 < 0) {
              fVar6 = fVar6 + 4.2949673e+09;
            }
            if (fVar7 < fVar6) break;
            param_1[6] = param_1[6] + 1;
            param_1[7] = param_1[7] + 1;
            local_10 = (int)(longlong)ROUND((float)param_1[9]);
            fVar6 = (float)local_10;
            if (local_10 < 0) {
              fVar6 = fVar6 + 4.2949673e+09;
            }
            piVar2 = *(int **)(*(int *)(param_1[1] + 0x2c) + param_1[6] * 4);
            fVar8 = (float)*piVar2;
            if (*piVar2 < 0) {
              fVar8 = fVar8 + 4.2949673e+09;
            }
          } while (fVar8 <= fVar6);
        }
      }
      else {
        piVar9 = (int *)(param_1[1] + 0x2c);
        local_10 = (int)(longlong)ROUND(fVar10);
        fVar7 = (float)local_10;
        if (local_10 < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        piVar2 = *(int **)(*piVar9 + param_1[6] * 4);
        fVar6 = (float)*piVar2;
        if (*piVar2 < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        if (fVar7 < fVar6) {
          do {
            param_1[6] = param_1[6] - 1;
            param_1[7] = param_1[7] - 1;
            local_10 = (int)(longlong)ROUND((float)param_1[9]);
            fVar7 = (float)local_10;
            if (local_10 < 0) {
              fVar7 = fVar7 + 4.2949673e+09;
            }
            iVar3 = **(int **)(*(int *)(param_1[1] + 0x2c) + param_1[6] * 4);
            fVar6 = (float)iVar3;
            if (iVar3 < 0) {
              fVar6 = fVar6 + 4.2949673e+09;
            }
          } while (fVar7 < fVar6);
        }
      }
      piVar2 = *(int **)(*piVar9 + param_1[6] * 4);
      fVar7 = (float)*piVar2;
      if (*piVar2 < 0) {
        fVar7 = fVar7 + 4.2949673e+09;
      }
      piVar9 = *(int **)(*piVar9 + param_1[7] * 4);
      fVar6 = (float)*piVar9;
      if (*piVar9 < 0) {
        fVar6 = fVar6 + 4.2949673e+09;
      }
      param_1[8] = (uint)((fVar10 - fVar7) / (fVar6 - fVar7));
    }
  }
  else {
    param_1[9] = (uint)fVar11;
    bVar5 = true;
  }
  if (0.0 < param_2) {
    if (!bVar5) goto LAB_00619a76;
    uVar4 = *param_1;
    if ((uVar4 & 1) == 0) {
      param_1[8] = 0x3f800000;
    }
    else {
      if ((uVar4 & 2) == 0) {
        fVar11 = fVar1;
      }
      param_1[9] = (uint)fVar11;
      param_1[6] = 0;
      param_1[7] = 1;
      param_1[8] = 0;
    }
    *param_1 = uVar4 | 4;
  }
  if (bVar5) {
    return;
  }
LAB_00619a76:
  *param_1 = *param_1 & 0xfffffffb;
  return;
}



============================================================
DISASSEMBLY
============================================================
006197d0 : PUSH EBP
006197d1 : MOV EBP,ESP
006197d3 : AND ESP,0xfffffff8
006197d6 : MOV ECX,dword ptr [EBP + 0x8]
006197d9 : MOVSS XMM0,dword ptr [ECX + 0x30]
006197de : MULSS XMM0,dword ptr [ECX + 0x2c]
006197e3 : MULSS XMM0,dword ptr [ECX + 0x8]
006197e8 : MOVSS XMM1,dword ptr [ECX + 0x24]
006197ed : MOVSS XMM2,dword ptr [ECX + 0xc]
006197f2 : MOVSS XMM4,dword ptr [EBP + 0xc]
006197f7 : SUB ESP,0xc
006197fa : PUSH EBX
006197fb : MULSS XMM0,XMM2
006197ff : PUSH ESI
00619800 : MULSS XMM0,XMM4
00619804 : ADDSS XMM0,XMM1
00619808 : PUSH EDI
00619809 : MOVSS dword ptr [ECX + 0x28],XMM1
0061980e : MOVSS XMM1,dword ptr [ECX + 0x10]
00619813 : XOR EDI,EDI
00619815 : COMISS XMM1,XMM0
00619818 : MOVSS dword ptr [ECX + 0x24],XMM0
0061981d : LEA EBX,[EDI + 0x1]
00619820 : JC 0x00619829
00619822 : MOVSS dword ptr [ECX + 0x24],XMM1
00619827 : MOV EDI,EBX
00619829 : MOVSS XMM3,dword ptr [ECX + 0x24]
0061982e : MOVSS XMM0,dword ptr [ECX + 0x14]
00619833 : MOVSS dword ptr [ESP + 0xc],XMM3
00619839 : COMISS XMM3,XMM0
0061983c : XORPS XMM3,XMM3
0061983f : JC 0x0061984d
00619841 : MOVSS dword ptr [ECX + 0x24],XMM0
00619846 : MOV EDI,EBX
00619848 : JMP 0x00619a34
0061984d : TEST EDI,EDI
0061984f : JNZ 0x00619a34
00619855 : COMISS XMM3,XMM2
00619858 : FLD float ptr [ESP + 0xc]
0061985c : FLD ST0
0061985e : JBE 0x00619926
00619864 : MOV EAX,dword ptr [ECX + 0x4]
00619867 : FNSTCW word ptr [ESP + 0xc]
0061986b : LEA ESI,[EAX + 0x2c]
0061986e : MOVZX EAX,word ptr [ESP + 0xc]
00619873 : OR EAX,0xc00
00619878 : MOV dword ptr [ESP + 0x10],EAX
0061987c : FLDCW word ptr [ESP + 0x10]
00619880 : FISTP qword ptr [ESP + 0x10]
00619884 : MOV EAX,dword ptr [ESP + 0x10]
00619888 : FLDCW word ptr [ESP + 0xc]
0061988c : FILD dword ptr [ESP + 0x10]
00619890 : TEST EAX,EAX
00619892 : JGE 0x0061989a
00619894 : FADD float ptr [0x00cdf0e0]
0061989a : MOV EAX,dword ptr [ESI]
0061989c : MOV EDX,dword ptr [ECX + 0x18]
0061989f : MOV EDX,dword ptr [EAX + EDX*0x4]
006198a2 : MOV EAX,dword ptr [EDX]
006198a4 : FILD dword ptr [EDX]
006198a6 : TEST EAX,EAX
006198a8 : JGE 0x006198b0
006198aa : FADD float ptr [0x00cdf0e0]
006198b0 : FCOMIP ST0,ST1
006198b2 : FSTP ST0
006198b4 : JBE 0x00619a01
006198ba : OR EDX,0xffffffff
006198bd : ADD dword ptr [ECX + 0x18],EDX
006198c0 : FNSTCW word ptr [ESP + 0xc]
006198c4 : MOVZX EAX,word ptr [ESP + 0xc]
006198c9 : ADD dword ptr [ECX + 0x1c],EDX
006198cc : OR EAX,0xc00
006198d1 : FLD float ptr [ECX + 0x24]
006198d4 : MOV dword ptr [ESP + 0x10],EAX
006198d8 : FLDCW word ptr [ESP + 0x10]
006198dc : FISTP qword ptr [ESP + 0x10]
006198e0 : MOV EAX,dword ptr [ESP + 0x10]
006198e4 : FLDCW word ptr [ESP + 0xc]
006198e8 : FILD dword ptr [ESP + 0x10]
006198ec : TEST EAX,EAX
006198ee : JGE 0x006198f6
006198f0 : FADD float ptr [0x00cdf0e0]
006198f6 : MOV EAX,dword ptr [ECX + 0x4]
006198f9 : MOV EAX,dword ptr [EAX + 0x2c]
006198fc : MOV EBX,dword ptr [ECX + 0x18]
006198ff : MOV EAX,dword ptr [EAX + EBX*0x4]
00619902 : MOV EAX,dword ptr [EAX]
00619904 : MOV dword ptr [ESP + 0x10],EAX
00619908 : FILD dword ptr [ESP + 0x10]
0061990c : TEST EAX,EAX
0061990e : JGE 0x00619916
00619910 : FADD float ptr [0x00cdf0e0]
00619916 : FCOMIP ST0,ST1
00619918 : FSTP ST0
0061991a : JA 0x006198bd
0061991c : MOV EBX,0x1
00619921 : JMP 0x00619a01
00619926 : FNSTCW word ptr [ESP + 0xc]
0061992a : MOVZX EAX,word ptr [ESP + 0xc]
0061992f : OR EAX,0xc00
00619934 : MOV dword ptr [ESP + 0x10],EAX
00619938 : FLDCW word ptr [ESP + 0x10]
0061993c : FISTP qword ptr [ESP + 0x10]
00619940 : MOV EDX,dword ptr [ESP + 0x10]
00619944 : FLDCW word ptr [ESP + 0xc]
00619948 : FILD dword ptr [ESP + 0x10]
0061994c : TEST EDX,EDX
0061994e : JGE 0x00619956
00619950 : FADD float ptr [0x00cdf0e0]
00619956 : MOV EAX,dword ptr [ECX + 0x4]
00619959 : MOV EDX,dword ptr [EAX + 0x2c]
0061995c : LEA ESI,[EAX + 0x2c]
0061995f : MOV EAX,dword ptr [ECX + 0x18]
00619962 : MOV EAX,dword ptr [EDX + EAX*0x4]
00619965 : MOV EDX,dword ptr [EAX]
00619967 : FILD dword ptr [EAX]
00619969 : TEST EDX,EDX
0061996b : JGE 0x00619973
0061996d : FADD float ptr [0x00cdf0e0]
00619973 : FXCH
00619975 : FCOMI ST0,ST1
00619977 : FSTP ST1
00619979 : JC 0x006199ff
0061997f : MOV EDX,dword ptr [ECX + 0x1c]
00619982 : MOV EAX,dword ptr [ESI]
00619984 : MOV EAX,dword ptr [EAX + EDX*0x4]
00619987 : MOV EAX,dword ptr [EAX]
00619989 : MOV dword ptr [ESP + 0x10],EAX
0061998d : FILD dword ptr [ESP + 0x10]
00619991 : TEST EAX,EAX
00619993 : JGE 0x0061999b
00619995 : FADD float ptr [0x00cdf0e0]
0061999b : FXCH
0061999d : FCOMI ST0,ST1
0061999f : FSTP ST1
006199a1 : JC 0x006199ff
006199a3 : ADD dword ptr [ECX + 0x18],EBX
006199a6 : FNSTCW word ptr [ESP + 0xc]
006199aa : MOVZX EAX,word ptr [ESP + 0xc]
006199af : INC EDX
006199b0 : OR EAX,0xc00
006199b5 : MOV dword ptr [ESP + 0x10],EAX
006199b9 : MOV dword ptr [ECX + 0x1c],EDX
006199bc : FLD float ptr [ECX + 0x24]
006199bf : FLDCW word ptr [ESP + 0x10]
006199c3 : FISTP qword ptr [ESP + 0x10]
006199c7 : MOV EDX,dword ptr [ESP + 0x10]
006199cb : FLDCW word ptr [ESP + 0xc]
006199cf : FILD dword ptr [ESP + 0x10]
006199d3 : TEST EDX,EDX
006199d5 : JGE 0x006199dd
006199d7 : FADD float ptr [0x00cdf0e0]
006199dd : MOV EAX,dword ptr [ECX + 0x4]
006199e0 : MOV EAX,dword ptr [EAX + 0x2c]
006199e3 : MOV EDX,dword ptr [ECX + 0x18]
006199e6 : MOV EDX,dword ptr [EAX + EDX*0x4]
006199e9 : MOV EAX,dword ptr [EDX]
006199eb : FILD dword ptr [EDX]
006199ed : TEST EAX,EAX
006199ef : JGE 0x006199f7
006199f1 : FADD float ptr [0x00cdf0e0]
006199f7 : FXCH
006199f9 : FCOMIP ST0,ST1
006199fb : FSTP ST0
006199fd : JNC 0x0061997f
006199ff : FSTP ST0
00619a01 : MOV EDX,dword ptr [ECX + 0x18]
00619a04 : MOV ESI,dword ptr [ESI]
00619a06 : MOV EAX,dword ptr [ESI + EDX*0x4]
00619a09 : MOV EDX,dword ptr [EAX]
00619a0b : FILD dword ptr [EAX]
00619a0d : TEST EDX,EDX
00619a0f : JGE 0x00619a17
00619a11 : FADD float ptr [0x00cdf0e0]
00619a17 : MOV EAX,dword ptr [ECX + 0x1c]
00619a1a : FSUB ST1,ST0
00619a1c : MOV EDX,dword ptr [ESI + EAX*0x4]
00619a1f : MOV EAX,dword ptr [EDX]
00619a21 : FILD dword ptr [EDX]
00619a23 : TEST EAX,EAX
00619a25 : JGE 0x00619a2d
00619a27 : FADD float ptr [0x00cdf0e0]
00619a2d : FSUBRP
00619a2f : FDIVP
00619a31 : FSTP float ptr [ECX + 0x20]
00619a34 : COMISS XMM4,XMM3
00619a37 : JBE 0x00619a72
00619a39 : TEST EDI,EDI
00619a3b : JZ 0x00619a76
00619a3d : MOV EAX,dword ptr [ECX]
00619a3f : TEST BL,AL
00619a41 : JZ 0x00619a60
00619a43 : TEST AL,0x2
00619a45 : JNZ 0x00619a4a
00619a47 : MOVAPS XMM0,XMM1
00619a4a : MOVSS dword ptr [ECX + 0x24],XMM0
00619a4f : MOV dword ptr [ECX + 0x18],0x0
00619a56 : MOV dword ptr [ECX + 0x1c],EBX
00619a59 : MOVSS dword ptr [ECX + 0x20],XMM3
00619a5e : JMP 0x00619a6d
00619a60 : MOVSS XMM0,dword ptr [0x00b86060]
00619a68 : MOVSS dword ptr [ECX + 0x20],XMM0
00619a6d : OR EAX,0x4
00619a70 : MOV dword ptr [ECX],EAX
00619a72 : TEST EDI,EDI
00619a74 : JNZ 0x00619a79
00619a76 : AND dword ptr [ECX],0xfffffffb
00619a79 : POP EDI
00619a7a : POP ESI
00619a7b : POP EBX
00619a7c : MOV ESP,EBP
00619a7e : POP EBP
00619a7f : RET
