PROGRAM  : Maestia.exe
FUNCTION : FUN_005d5b00
ENTRY    : 005d5b00
BODY     : [[005d5b00, 005d5b7f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d5b00(undefined4 param_1)

{
  byte *pbVar1;
  undefined1 *puVar2;
  int in_ECX;
  
  pbVar1 = *(byte **)(in_ECX + 0xc);
  if (pbVar1 != (byte *)0x0) {
    if (((*pbVar1 & 0x10) != 0) && (*(GRefCountImpl **)(pbVar1 + 4) != (GRefCountImpl *)0x0)) {
      GRefCountImpl::Release(*(GRefCountImpl **)(pbVar1 + 4));
    }
    if ((*(int *)(pbVar1 + 8) == 0) && (*(int *)(pbVar1 + 0xc) != 0)) {
      FUN_00524240();
    }
    FUN_00515cf0(pbVar1);
  }
  puVar2 = (undefined1 *)FUN_00515840(0x28,0);
  if (puVar2 != (undefined1 *)0x0) {
    *(undefined4 *)(puVar2 + 8) = 0;
    *(undefined4 *)(puVar2 + 0xc) = 0;
    GMatrix2D::SetIdentity((GMatrix2D *)(puVar2 + 0x10));
    *puVar2 = 0;
    FUN_005d5230(param_1);
    *(undefined1 **)(in_ECX + 0xc) = puVar2;
    return;
  }
  *(undefined4 *)(in_ECX + 0xc) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005d5b00 : PUSH ESI
005d5b01 : PUSH EDI
005d5b02 : MOV EDI,ECX
005d5b04 : MOV ESI,dword ptr [EDI + 0xc]
005d5b07 : TEST ESI,ESI
005d5b09 : JZ 0x005d5b34
005d5b0b : TEST byte ptr [ESI],0x10
005d5b0e : JZ 0x005d5b1c
005d5b10 : MOV ECX,dword ptr [ESI + 0x4]
005d5b13 : TEST ECX,ECX
005d5b15 : JZ 0x005d5b1c
005d5b17 : CALL 0x004ff7e0
005d5b1c : CMP dword ptr [ESI + 0x8],0x0
005d5b20 : JNZ 0x005d5b2e
005d5b22 : MOV ECX,dword ptr [ESI + 0xc]
005d5b25 : TEST ECX,ECX
005d5b27 : JZ 0x005d5b2e
005d5b29 : CALL 0x00524240
005d5b2e : PUSH ESI
005d5b2f : CALL 0x00515cf0
005d5b34 : MOV ECX,dword ptr [0x00d73250]
005d5b3a : PUSH 0x0
005d5b3c : PUSH 0x28
005d5b3e : CALL 0x00515840
005d5b43 : MOV ESI,EAX
005d5b45 : TEST ESI,ESI
005d5b47 : JZ 0x005d5b76
005d5b49 : LEA ECX,[ESI + 0x10]
005d5b4c : MOV dword ptr [ESI + 0x8],0x0
005d5b53 : MOV dword ptr [ESI + 0xc],0x0
005d5b5a : CALL 0x00522b80
005d5b5f : MOV EAX,dword ptr [ESP + 0xc]
005d5b63 : PUSH EAX
005d5b64 : MOV ECX,ESI
005d5b66 : MOV byte ptr [ESI],0x0
005d5b69 : CALL 0x005d5230
005d5b6e : MOV dword ptr [EDI + 0xc],ESI
005d5b71 : POP EDI
005d5b72 : POP ESI
005d5b73 : RET 0x4
005d5b76 : XOR EAX,EAX
005d5b78 : MOV dword ptr [EDI + 0xc],EAX
005d5b7b : POP EDI
005d5b7c : POP ESI
005d5b7d : RET 0x4
