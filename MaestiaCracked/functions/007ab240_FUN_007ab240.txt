PROGRAM  : Maestia.exe
FUNCTION : FUN_007ab240
ENTRY    : 007ab240
BODY     : [[007ab240, 007ab4ac]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007ab240(int param_1,int param_2)

{
  uint uVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  float *unaff_ESI;
  int unaff_EDI;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  undefined8 uVar10;
  undefined1 local_5c [64];
  float local_1c;
  float fStack_18;
  float local_14;
  float fStack_10;
  undefined1 local_c [4];
  undefined1 local_8 [4];
  
  cVar2 = *(char *)(unaff_EDI + 700);
  *unaff_ESI = 0.0;
  unaff_ESI[1] = 0.0;
  unaff_ESI[2] = 0.0;
  unaff_ESI[3] = 0.0;
  if ((cVar2 != '\0') && (*(char *)(unaff_EDI + 0x2bd) != '\0')) {
    cVar2 = FUN_007deaf0(*(undefined4 *)(unaff_EDI + 0x278),param_1,param_2,&param_1,&param_2,
                         local_c,local_8);
    if (cVar2 != '\0') {
      FUN_0040efe0(local_5c,0x10,4,&LAB_0040efc0);
      iVar4 = param_1;
      uVar10 = FUN_007aab50(param_1,param_2);
      uVar1 = *(uint *)((int)uVar10 + 0x18);
      fVar5 = 0.003921569;
      local_1c = (float)(uVar1 >> 0x10 & 0xff) * 0.003921569;
      fStack_18 = (float)(uVar1 >> 8 & 0xff) * 0.003921569;
      local_14 = (float)(uVar1 & 0xff) * 0.003921569;
      fStack_10 = (float)(uVar1 >> 0x18) * 0.003921569;
      param_2 = (int)((ulonglong)uVar10 >> 0x20) + 1;
      *(ulonglong *)unaff_ESI = CONCAT44(fStack_18,local_1c);
      *(ulonglong *)(unaff_ESI + 2) = CONCAT44(fStack_10,local_14);
      uVar10 = FUN_007aab50(iVar4,param_2);
      uVar1 = *(uint *)((int)uVar10 + 0x18);
      fVar6 = *unaff_ESI + (float)(uVar1 >> 0x10 & 0xff) * fVar5;
      fVar7 = unaff_ESI[1] + (float)(uVar1 >> 8 & 0xff) * fVar5;
      fVar8 = unaff_ESI[2] + (float)(uVar1 & 0xff) * fVar5;
      iVar4 = iVar4 + 1;
      fVar9 = unaff_ESI[3] + (float)(uVar1 >> 0x18) * fVar5;
      *unaff_ESI = fVar6;
      unaff_ESI[1] = fVar7;
      unaff_ESI[2] = fVar8;
      unaff_ESI[3] = fVar9;
      iVar3 = FUN_007aab50(iVar4,(int)((ulonglong)uVar10 >> 0x20));
      uVar1 = *(uint *)(iVar3 + 0x18);
      local_14 = (float)(uVar1 & 0xff) * fVar5;
      fVar8 = fVar8 + local_14;
      fVar6 = fVar6 + (float)(uVar1 >> 0x10 & 0xff) * fVar5;
      fVar7 = fVar7 + (float)(uVar1 >> 8 & 0xff) * fVar5;
      fVar9 = fVar9 + (float)(uVar1 >> 0x18) * fVar5;
      *unaff_ESI = fVar6;
      unaff_ESI[1] = fVar7;
      unaff_ESI[2] = fVar8;
      unaff_ESI[3] = fVar9;
      iVar4 = FUN_007aab50(iVar4,param_2);
      uVar1 = *(uint *)(iVar4 + 0x18);
      *unaff_ESI = (fVar6 + (float)(uVar1 >> 0x10 & 0xff) * fVar5) * 0.25;
      unaff_ESI[1] = (fVar7 + (float)(uVar1 >> 8 & 0xff) * fVar5) * 0.25;
      unaff_ESI[2] = (fVar8 + (float)(uVar1 & 0xff) * fVar5) * 0.25;
      unaff_ESI[3] = (fVar9 + (float)(uVar1 >> 0x18) * fVar5) * 0.25;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007ab240 : PUSH EBP
007ab241 : MOV EBP,ESP
007ab243 : XORPS XMM0,XMM0
007ab246 : SUB ESP,0x5c
007ab249 : CMP byte ptr [EDI + 0x2bc],0x0
007ab250 : PUSH EBX
007ab251 : MOVSS dword ptr [ESI],XMM0
007ab255 : MOVSS dword ptr [ESI + 0x4],XMM0
007ab25a : MOVSS dword ptr [ESI + 0x8],XMM0
007ab25f : MOVSS dword ptr [ESI + 0xc],XMM0
007ab264 : JZ 0x007ab4a4
007ab26a : CMP byte ptr [EDI + 0x2bd],0x0
007ab271 : JZ 0x007ab4a4
007ab277 : FLD float ptr [EBP + 0xc]
007ab27a : LEA EAX,[EBP + -0x4]
007ab27d : PUSH EAX
007ab27e : LEA ECX,[EBP + -0x8]
007ab281 : PUSH ECX
007ab282 : MOV ECX,dword ptr [EDI + 0x278]
007ab288 : LEA EDX,[EBP + 0xc]
007ab28b : PUSH EDX
007ab28c : LEA EAX,[EBP + 0x8]
007ab28f : PUSH EAX
007ab290 : SUB ESP,0x8
007ab293 : FSTP float ptr [ESP + 0x4]
007ab297 : FLD float ptr [EBP + 0x8]
007ab29a : FSTP float ptr [ESP]
007ab29d : PUSH ECX
007ab29e : CALL 0x007deaf0
007ab2a3 : TEST AL,AL
007ab2a5 : JZ 0x007ab4a4
007ab2ab : PUSH 0x40efc0
007ab2b0 : PUSH 0x4
007ab2b2 : PUSH 0x10
007ab2b4 : LEA EDX,[EBP + -0x58]
007ab2b7 : PUSH EDX
007ab2b8 : CALL 0x0040efe0
007ab2bd : MOV EDX,dword ptr [EBP + 0xc]
007ab2c0 : MOV EBX,dword ptr [EBP + 0x8]
007ab2c3 : PUSH EDX
007ab2c4 : PUSH EBX
007ab2c5 : MOV EAX,EDI
007ab2c7 : CALL 0x007aab50
007ab2cc : MOV EAX,dword ptr [EAX + 0x18]
007ab2cf : MOVSS XMM0,dword ptr [0x00cdf178]
007ab2d7 : MOV ECX,EAX
007ab2d9 : SHR ECX,0x10
007ab2dc : MOVZX ECX,CL
007ab2df : CVTSI2SS XMM1,ECX
007ab2e3 : MOV ECX,EAX
007ab2e5 : MULSS XMM1,XMM0
007ab2e9 : MOVSS dword ptr [EBP + -0x18],XMM1
007ab2ee : SHR ECX,0x8
007ab2f1 : MOVZX ECX,CL
007ab2f4 : CVTSI2SS XMM1,ECX
007ab2f8 : MULSS XMM1,XMM0
007ab2fc : MOVZX ECX,AL
007ab2ff : MOVSS dword ptr [EBP + -0x14],XMM1
007ab304 : CVTSI2SS XMM1,ECX
007ab308 : MULSS XMM1,XMM0
007ab30c : SHR EAX,0x18
007ab30f : MOVSS dword ptr [EBP + -0x10],XMM1
007ab314 : CVTSI2SS XMM1,EAX
007ab318 : MULSS XMM1,XMM0
007ab31c : LEA EAX,[EDX + 0x1]
007ab31f : MOVSS dword ptr [EBP + -0xc],XMM1
007ab324 : MOVQ XMM1,qword ptr [EBP + -0x18]
007ab329 : PUSH EAX
007ab32a : MOVQ qword ptr [ESI],XMM1
007ab32e : MOVQ XMM1,qword ptr [EBP + -0x10]
007ab333 : MOV dword ptr [EBP + 0xc],EAX
007ab336 : PUSH EBX
007ab337 : MOV EAX,EDI
007ab339 : MOVQ qword ptr [ESI + 0x8],XMM1
007ab33e : CALL 0x007aab50
007ab343 : MOV EAX,dword ptr [EAX + 0x18]
007ab346 : MOVSS XMM1,dword ptr [ESI]
007ab34a : MOV ECX,EAX
007ab34c : SHR ECX,0x10
007ab34f : MOVZX ECX,CL
007ab352 : CVTSI2SS XMM2,ECX
007ab356 : MOV ECX,EAX
007ab358 : SHR ECX,0x8
007ab35b : MOVZX ECX,CL
007ab35e : CVTSI2SS XMM3,ECX
007ab362 : MOVZX ECX,AL
007ab365 : MULSS XMM2,XMM0
007ab369 : ADDSS XMM1,XMM2
007ab36d : MOVSS XMM2,dword ptr [ESI + 0x4]
007ab372 : MULSS XMM3,XMM0
007ab376 : SHR EAX,0x18
007ab379 : ADDSS XMM2,XMM3
007ab37d : MOVSS XMM3,dword ptr [ESI + 0x8]
007ab382 : CVTSI2SS XMM4,ECX
007ab386 : MULSS XMM4,XMM0
007ab38a : CVTSI2SS XMM5,EAX
007ab38e : ADDSS XMM3,XMM4
007ab392 : MOVSS XMM4,dword ptr [ESI + 0xc]
007ab397 : PUSH EDX
007ab398 : INC EBX
007ab399 : MULSS XMM5,XMM0
007ab39d : ADDSS XMM4,XMM5
007ab3a1 : PUSH EBX
007ab3a2 : MOV EAX,EDI
007ab3a4 : MOVSS dword ptr [ESI],XMM1
007ab3a8 : MOVSS dword ptr [ESI + 0x4],XMM2
007ab3ad : MOVSS dword ptr [ESI + 0x8],XMM3
007ab3b2 : MOVSS dword ptr [ESI + 0xc],XMM4
007ab3b7 : CALL 0x007aab50
007ab3bc : MOV EAX,dword ptr [EAX + 0x18]
007ab3bf : MOV EDX,EAX
007ab3c1 : SHR EDX,0x10
007ab3c4 : MOVZX ECX,DL
007ab3c7 : MOV EDX,EAX
007ab3c9 : CVTSI2SS XMM5,ECX
007ab3cd : SHR EDX,0x8
007ab3d0 : MOVZX ECX,DL
007ab3d3 : MOVZX EDX,AL
007ab3d6 : SHR EAX,0x18
007ab3d9 : CVTSI2SS XMM7,EDX
007ab3dd : MULSS XMM7,XMM0
007ab3e1 : MOVSS dword ptr [EBP + -0x10],XMM7
007ab3e6 : ADDSS XMM3,dword ptr [EBP + -0x10]
007ab3eb : CVTSI2SS XMM7,EAX
007ab3ef : MOV EAX,dword ptr [EBP + 0xc]
007ab3f2 : PUSH EAX
007ab3f3 : CVTSI2SS XMM6,ECX
007ab3f7 : MULSS XMM5,XMM0
007ab3fb : MULSS XMM6,XMM0
007ab3ff : MULSS XMM7,XMM0
007ab403 : ADDSS XMM1,XMM5
007ab407 : ADDSS XMM2,XMM6
007ab40b : ADDSS XMM4,XMM7
007ab40f : PUSH EBX
007ab410 : MOV EAX,EDI
007ab412 : MOVSS dword ptr [ESI],XMM1
007ab416 : MOVSS dword ptr [ESI + 0x4],XMM2
007ab41b : MOVSS dword ptr [ESI + 0x8],XMM3
007ab420 : MOVSS dword ptr [ESI + 0xc],XMM4
007ab425 : CALL 0x007aab50
007ab42a : MOV EAX,dword ptr [EAX + 0x18]
007ab42d : MOV ECX,EAX
007ab42f : SHR ECX,0x10
007ab432 : MOVZX EDX,CL
007ab435 : MOV ECX,EAX
007ab437 : SHR ECX,0x8
007ab43a : CVTSI2SS XMM5,EDX
007ab43e : MOVZX EDX,CL
007ab441 : MOVZX ECX,AL
007ab444 : CVTSI2SS XMM7,ECX
007ab448 : MULSS XMM7,XMM0
007ab44c : MOVSS dword ptr [EBP + -0x10],XMM7
007ab451 : ADDSS XMM3,dword ptr [EBP + -0x10]
007ab456 : SHR EAX,0x18
007ab459 : MULSS XMM5,XMM0
007ab45d : CVTSI2SS XMM6,EDX
007ab461 : MULSS XMM6,XMM0
007ab465 : CVTSI2SS XMM7,EAX
007ab469 : MULSS XMM7,XMM0
007ab46d : MOVSS XMM0,dword ptr [0x00cdf320]
007ab475 : ADDSS XMM1,XMM5
007ab479 : ADDSS XMM2,XMM6
007ab47d : ADDSS XMM4,XMM7
007ab481 : MULSS XMM1,XMM0
007ab485 : MULSS XMM2,XMM0
007ab489 : MULSS XMM3,XMM0
007ab48d : MULSS XMM4,XMM0
007ab491 : MOVSS dword ptr [ESI],XMM1
007ab495 : MOVSS dword ptr [ESI + 0x4],XMM2
007ab49a : MOVSS dword ptr [ESI + 0x8],XMM3
007ab49f : MOVSS dword ptr [ESI + 0xc],XMM4
007ab4a4 : MOV EAX,ESI
007ab4a6 : POP EBX
007ab4a7 : MOV ESP,EBP
007ab4a9 : POP EBP
007ab4aa : RET 0x8
