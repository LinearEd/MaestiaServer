PROGRAM  : Maestia.exe
FUNCTION : FUN_008de5c0
ENTRY    : 008de5c0
BODY     : [[008de5c0, 008de81a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008de5c0(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  undefined1 local_a0 [84];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b45429;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(char *)(param_2 + 4) == '\x02') {
    FUN_00a84da0();
    goto LAB_008de7fd;
  }
  if (*(char *)(param_2 + 4) == '\x01') {
    FUN_00a81bf0(*(undefined4 *)(param_1 + 0x1dc));
    goto LAB_008de7fd;
  }
  if (*(int *)(param_1 + 0x8c) == 0) {
    FUN_008018d0(L"AvaGuiPremiumShop::OnCheckBuy  find Item NULL",local_14);
    goto LAB_008de7fd;
  }
  iVar4 = *(int *)(param_1 + 0xf0);
  iVar1 = *(int *)(param_1 + 0x1c8);
  FUN_00406460(L"IDS_PREMIUM_BUY_CHECK_MSG");
  local_8 = 0;
  iVar2 = FUN_0081d120(local_a0);
  local_8._0_1_ = 1;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar2 = iVar2 + 4;
  }
  else {
    iVar2 = *(int *)(iVar2 + 4);
  }
  FUN_00404750(iVar2,iVar4 - iVar1);
  local_8._0_1_ = 3;
  FUN_00406560();
  local_8._0_1_ = 4;
  FUN_00406560();
  if (*(int *)(param_1 + 0x1bc) == 1) {
    iVar4 = *(int *)(param_1 + 0xf8);
    iVar1 = *(int *)(param_1 + 0x1c8);
    FUN_00406460(L"IDS_PREMIUM_MILEAGEITEM_BUY_MSG");
    local_8._0_1_ = 5;
    iVar2 = FUN_0081d120(local_4c);
    local_8._0_1_ = 6;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,iVar4 - iVar1);
    local_8._0_1_ = 7;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8._0_1_ = 6;
    FUN_00406560();
    local_8._0_1_ = 5;
LAB_008de7b1:
    FUN_00406560();
    local_8._0_1_ = 4;
    FUN_00406560();
  }
  else if (*(int *)(param_1 + 0x1bc) == 2) {
    iVar4 = *(int *)(param_1 + 0x104);
    iVar1 = *(int *)(param_1 + 0x1c8);
    FUN_00406460(L"IDS_PREMIUM_GOLDITEM_BUY_MSG");
    local_8._0_1_ = 8;
    iVar2 = FUN_0081d120(local_4c);
    local_8._0_1_ = 9;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,iVar4 - iVar1);
    local_8._0_1_ = 10;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8._0_1_ = 9;
    FUN_00406560();
    local_8._0_1_ = 8;
    goto LAB_008de7b1;
  }
  iVar4 = FUN_008ede80(local_30,2);
  if (iVar4 != 0) {
    if (*(code **)(iVar4 + 0x60) != (code *)0x0) {
      (**(code **)(iVar4 + 0x60))(1,iVar4);
    }
    *(code **)(iVar4 + 0x60) = FUN_008de450;
  }
  local_8 = 0xffffffff;
  FUN_00406560();
LAB_008de7fd:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008de5c0 : PUSH EBP
008de5c1 : MOV EBP,ESP
008de5c3 : PUSH -0x1
008de5c5 : PUSH 0xb45429
008de5ca : MOV EAX,FS:[0x0]
008de5d0 : PUSH EAX
008de5d1 : SUB ESP,0xac
008de5d7 : MOV EAX,[0x00d66fa0]
008de5dc : XOR EAX,EBP
008de5de : MOV dword ptr [EBP + -0x10],EAX
008de5e1 : PUSH EBX
008de5e2 : PUSH ESI
008de5e3 : PUSH EDI
008de5e4 : PUSH EAX
008de5e5 : LEA EAX,[EBP + -0xc]
008de5e8 : MOV FS:[0x0],EAX
008de5ee : MOV EAX,dword ptr [EBP + 0xc]
008de5f1 : MOV AL,byte ptr [EAX + 0x4]
008de5f4 : MOV EBX,dword ptr [EBP + 0x8]
008de5f7 : CMP AL,0x2
008de5f9 : JNZ 0x008de60b
008de5fb : MOV ECX,dword ptr [EBX + 0x1d0]
008de601 : CALL 0x00a84da0
008de606 : JMP 0x008de7fd
008de60b : CMP AL,0x1
008de60d : JNZ 0x008de620
008de60f : MOV ECX,dword ptr [EBX + 0x1dc]
008de615 : PUSH ECX
008de616 : CALL 0x00a81bf0
008de61b : JMP 0x008de7fd
008de620 : CMP dword ptr [EBX + 0x8c],0x0
008de627 : JNZ 0x008de641
008de629 : MOV ESI,dword ptr [0x00da98e8]
008de62f : PUSH 0xc57360
008de634 : CALL 0x008018d0
008de639 : ADD ESP,0x4
008de63c : JMP 0x008de7fd
008de641 : MOV ESI,dword ptr [EBX + 0xf0]
008de647 : SUB ESI,dword ptr [EBX + 0x1c8]
008de64d : PUSH 0xc573bc
008de652 : LEA ECX,[EBP + 0xffffff64]
008de658 : CALL 0x00406460
008de65d : MOV dword ptr [EBP + -0x4],0x0
008de664 : MOV ECX,dword ptr [0x0172491c]
008de66a : LEA EDX,[EBP + 0xffffff64]
008de670 : PUSH EDX
008de671 : LEA EDI,[EBP + 0xffffff48]
008de677 : CALL 0x0081d120
008de67c : MOV byte ptr [EBP + -0x4],0x1
008de680 : CMP dword ptr [EAX + 0x18],0x8
008de684 : JC 0x008de68b
008de686 : MOV EAX,dword ptr [EAX + 0x4]
008de689 : JMP 0x008de68e
008de68b : ADD EAX,0x4
008de68e : PUSH ESI
008de68f : PUSH EAX
008de690 : LEA ESI,[EBP + -0x2c]
008de693 : CALL 0x00404750
008de698 : ADD ESP,0x8
008de69b : MOV byte ptr [EBP + -0x4],0x3
008de69f : LEA ECX,[EBP + 0xffffff48]
008de6a5 : CALL 0x00406560
008de6aa : MOV byte ptr [EBP + -0x4],0x4
008de6ae : LEA ECX,[EBP + 0xffffff64]
008de6b4 : CALL 0x00406560
008de6b9 : MOV EAX,dword ptr [EBX + 0x1bc]
008de6bf : CMP EAX,0x1
008de6c2 : JNZ 0x008de737
008de6c4 : MOV ESI,dword ptr [EBX + 0xf8]
008de6ca : SUB ESI,dword ptr [EBX + 0x1c8]
008de6d0 : PUSH 0xc573f0
008de6d5 : LEA ECX,[EBP + -0x48]
008de6d8 : CALL 0x00406460
008de6dd : MOV byte ptr [EBP + -0x4],0x5
008de6e1 : MOV ECX,dword ptr [0x0172491c]
008de6e7 : LEA EAX,[EBP + -0x48]
008de6ea : PUSH EAX
008de6eb : LEA EDI,[EBP + -0x80]
008de6ee : CALL 0x0081d120
008de6f3 : MOV BL,0x6
008de6f5 : MOV byte ptr [EBP + -0x4],BL
008de6f8 : CMP dword ptr [EAX + 0x18],0x8
008de6fc : JC 0x008de703
008de6fe : MOV EAX,dword ptr [EAX + 0x4]
008de701 : JMP 0x008de706
008de703 : ADD EAX,0x4
008de706 : PUSH ESI
008de707 : PUSH EAX
008de708 : LEA ESI,[EBP + -0x64]
008de70b : CALL 0x00404750
008de710 : ADD ESP,0x8
008de713 : MOV byte ptr [EBP + -0x4],0x7
008de717 : PUSH -0x1
008de719 : PUSH 0x0
008de71b : PUSH EAX
008de71c : LEA ECX,[EBP + -0x2c]
008de71f : CALL 0x00405eb0
008de724 : MOV byte ptr [EBP + -0x4],BL
008de727 : MOV ECX,ESI
008de729 : CALL 0x00406560
008de72e : MOV byte ptr [EBP + -0x4],0x5
008de732 : LEA ECX,[EBP + -0x80]
008de735 : JMP 0x008de7b1
008de737 : CMP EAX,0x2
008de73a : JNZ 0x008de7c2
008de740 : MOV ESI,dword ptr [EBX + 0x104]
008de746 : SUB ESI,dword ptr [EBX + 0x1c8]
008de74c : PUSH 0xc57430
008de751 : LEA ECX,[EBP + -0x48]
008de754 : CALL 0x00406460
008de759 : MOV byte ptr [EBP + -0x4],0x8
008de75d : LEA ECX,[EBP + -0x48]
008de760 : PUSH ECX
008de761 : MOV ECX,dword ptr [0x0172491c]
008de767 : LEA EDI,[EBP + -0x64]
008de76a : CALL 0x0081d120
008de76f : MOV BL,0x9
008de771 : MOV byte ptr [EBP + -0x4],BL
008de774 : CMP dword ptr [EAX + 0x18],0x8
008de778 : JC 0x008de77f
008de77a : MOV EAX,dword ptr [EAX + 0x4]
008de77d : JMP 0x008de782
008de77f : ADD EAX,0x4
008de782 : PUSH ESI
008de783 : PUSH EAX
008de784 : LEA ESI,[EBP + -0x80]
008de787 : CALL 0x00404750
008de78c : ADD ESP,0x8
008de78f : MOV byte ptr [EBP + -0x4],0xa
008de793 : PUSH -0x1
008de795 : PUSH 0x0
008de797 : PUSH EAX
008de798 : LEA ECX,[EBP + -0x2c]
008de79b : CALL 0x00405eb0
008de7a0 : MOV byte ptr [EBP + -0x4],BL
008de7a3 : MOV ECX,ESI
008de7a5 : CALL 0x00406560
008de7aa : MOV byte ptr [EBP + -0x4],0x8
008de7ae : LEA ECX,[EBP + -0x64]
008de7b1 : CALL 0x00406560
008de7b6 : MOV byte ptr [EBP + -0x4],0x4
008de7ba : LEA ECX,[EBP + -0x48]
008de7bd : CALL 0x00406560
008de7c2 : MOV EDX,dword ptr [0x00da9894]
008de7c8 : MOV ECX,dword ptr [EDX]
008de7ca : PUSH 0x2
008de7cc : LEA EAX,[EBP + -0x2c]
008de7cf : PUSH EAX
008de7d0 : CALL 0x008ede80
008de7d5 : MOV ESI,EAX
008de7d7 : TEST ESI,ESI
008de7d9 : JZ 0x008de7ee
008de7db : MOV EAX,dword ptr [ESI + 0x60]
008de7de : TEST EAX,EAX
008de7e0 : JZ 0x008de7e7
008de7e2 : PUSH ESI
008de7e3 : PUSH 0x1
008de7e5 : CALL EAX
008de7e7 : MOV dword ptr [ESI + 0x60],0x8de450
008de7ee : MOV dword ptr [EBP + -0x4],0xffffffff
008de7f5 : LEA ECX,[EBP + -0x2c]
008de7f8 : CALL 0x00406560
008de7fd : MOV ECX,dword ptr [EBP + -0xc]
008de800 : MOV dword ptr FS:[0x0],ECX
008de807 : POP ECX
008de808 : POP EDI
008de809 : POP ESI
008de80a : POP EBX
008de80b : MOV ECX,dword ptr [EBP + -0x10]
008de80e : XOR ECX,EBP
008de810 : CALL 0x00633e6b
008de815 : MOV ESP,EBP
008de817 : POP EBP
008de818 : RET 0x8
