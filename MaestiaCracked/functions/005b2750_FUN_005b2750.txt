PROGRAM  : Maestia.exe
FUNCTION : FUN_005b2750
ENTRY    : 005b2750
BODY     : [[005b2750, 005b27ce]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_005b2750(int *param_1,uint *param_2,int param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  
  if (param_4 == 0) {
    iVar2 = *(int *)(*(int *)(*param_2 & 0xfffffc00) + 0x18);
    *param_1 = iVar2;
    piVar1 = (int *)(iVar2 + 8);
    *piVar1 = *piVar1 + 1;
    return param_1;
  }
  if (param_3 < 0) {
    param_3 = 0;
  }
  iVar2 = FUN_00524bc0();
  if (iVar2 <= param_3) {
    iVar2 = *(int *)(*(int *)(*param_2 & 0xfffffc00) + 0x18);
    *param_1 = iVar2;
    piVar1 = (int *)(iVar2 + 8);
    *piVar1 = *piVar1 + 1;
    return param_1;
  }
  if ((param_4 < 0) || (iVar2 < param_3 + param_4)) {
    param_4 = iVar2 - param_3;
  }
  FUN_005257b0(param_1,param_3,param_3 + param_4);
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
005b2750 : PUSH EDI
005b2751 : MOV EDI,dword ptr [ESP + 0x14]
005b2755 : TEST EDI,EDI
005b2757 : JNZ 0x005b2775
005b2759 : MOV EAX,dword ptr [ESP + 0xc]
005b275d : MOV ECX,dword ptr [EAX]
005b275f : MOV EAX,dword ptr [ESP + 0x8]
005b2763 : AND ECX,0xfffffc00
005b2769 : MOV EDX,dword ptr [ECX]
005b276b : MOV ECX,dword ptr [EDX + 0x18]
005b276e : MOV dword ptr [EAX],ECX
005b2770 : INC dword ptr [ECX + 0x8]
005b2773 : POP EDI
005b2774 : RET
005b2775 : PUSH ESI
005b2776 : MOV ESI,dword ptr [ESP + 0x14]
005b277a : TEST ESI,ESI
005b277c : JGE 0x005b2780
005b277e : XOR ESI,ESI
005b2780 : PUSH EBX
005b2781 : MOV EBX,dword ptr [ESP + 0x14]
005b2785 : MOV ECX,EBX
005b2787 : CALL 0x00524bc0
005b278c : CMP ESI,EAX
005b278e : JL 0x005b27a9
005b2790 : MOV EAX,dword ptr [EBX]
005b2792 : AND EAX,0xfffffc00
005b2797 : MOV ECX,dword ptr [EAX]
005b2799 : MOV ECX,dword ptr [ECX + 0x18]
005b279c : MOV EAX,dword ptr [ESP + 0x10]
005b27a0 : POP EBX
005b27a1 : POP ESI
005b27a2 : MOV dword ptr [EAX],ECX
005b27a4 : INC dword ptr [ECX + 0x8]
005b27a7 : POP EDI
005b27a8 : RET
005b27a9 : TEST EDI,EDI
005b27ab : JL 0x005b27b4
005b27ad : LEA EDX,[ESI + EDI*0x1]
005b27b0 : CMP EDX,EAX
005b27b2 : JLE 0x005b27b8
005b27b4 : SUB EAX,ESI
005b27b6 : MOV EDI,EAX
005b27b8 : LEA EAX,[ESI + EDI*0x1]
005b27bb : PUSH EAX
005b27bc : PUSH ESI
005b27bd : MOV ESI,dword ptr [ESP + 0x18]
005b27c1 : PUSH ESI
005b27c2 : MOV ECX,EBX
005b27c4 : CALL 0x005257b0
005b27c9 : POP EBX
005b27ca : MOV EAX,ESI
005b27cc : POP ESI
005b27cd : POP EDI
005b27ce : RET
