PROGRAM  : Maestia.exe
FUNCTION : FUN_0054f2a0
ENTRY    : 0054f2a0
BODY     : [[0054f2a0, 0054f2f3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054f2a0(void)

{
  int *piVar1;
  undefined4 *puVar2;
  int *in_ECX;
  int iVar3;
  int iVar4;
  
  if (*in_ECX != 0) {
    iVar4 = 0;
    iVar3 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar2 = (undefined4 *)(iVar4 + 8 + *in_ECX);
      if (*(int *)(iVar4 + 8 + *in_ECX) != -2) {
        piVar1 = (int *)(puVar2[1] + 8);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 == 0) {
          FUN_00525340();
        }
        FUN_00526bd0();
        *puVar2 = 0xfffffffe;
      }
      iVar4 = iVar4 + 0x24;
      iVar3 = iVar3 + -1;
    } while (iVar3 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0054f2a0 : PUSH EBX
0054f2a1 : MOV EBX,ECX
0054f2a3 : MOV EAX,dword ptr [EBX]
0054f2a5 : TEST EAX,EAX
0054f2a7 : JZ 0x0054f2f2
0054f2a9 : MOV EAX,dword ptr [EAX + 0x4]
0054f2ac : PUSH EBP
0054f2ad : PUSH ESI
0054f2ae : PUSH EDI
0054f2af : XOR EDI,EDI
0054f2b1 : LEA EBP,[EAX + 0x1]
0054f2b4 : MOV EAX,dword ptr [EBX]
0054f2b6 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
0054f2bb : LEA ESI,[EDI + EAX*0x1 + 0x8]
0054f2bf : JZ 0x0054f2dd
0054f2c1 : MOV ECX,dword ptr [ESI + 0x4]
0054f2c4 : ADD dword ptr [ECX + 0x8],-0x1
0054f2c8 : JNZ 0x0054f2cf
0054f2ca : CALL 0x00525340
0054f2cf : LEA ECX,[ESI + 0x14]
0054f2d2 : CALL 0x00526bd0
0054f2d7 : MOV dword ptr [ESI],0xfffffffe
0054f2dd : ADD EDI,0x24
0054f2e0 : SUB EBP,0x1
0054f2e3 : JNZ 0x0054f2b4
0054f2e5 : MOV ECX,dword ptr [EBX]
0054f2e7 : PUSH ECX
0054f2e8 : CALL 0x00515cf0
0054f2ed : POP EDI
0054f2ee : POP ESI
0054f2ef : MOV dword ptr [EBX],EBP
0054f2f1 : POP EBP
0054f2f2 : POP EBX
0054f2f3 : RET
