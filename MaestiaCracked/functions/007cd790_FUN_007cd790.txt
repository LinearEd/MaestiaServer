PROGRAM  : Maestia.exe
FUNCTION : FUN_007cd790
ENTRY    : 007cd790
BODY     : [[007cd790, 007cda5d]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 FUN_007cd790(char param_1,char param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  code *pcVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  int *in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2880c;
  local_10 = ExceptionList;
  if ((param_1 == '\0') && (param_2 == '\0')) {
    if (*(char *)((int)in_ECX + 0x5d) == '\0') {
      if ((char)in_ECX[0x17] == '\0') {
        return 0;
      }
      goto LAB_007cd7eb;
    }
  }
  else {
LAB_007cd7eb:
    if ((*(char *)((int)in_ECX + 0x5d) == '\0') && (param_2 == '\0')) {
      ExceptionList = &local_10;
      iVar4 = (**(code **)(*in_ECX + 0x1c))();
      iVar5 = in_ECX[2];
      if (iVar4 == 2) {
        if (iVar5 != 0) {
          EnterCriticalSection((LPCRITICAL_SECTION)(iVar5 + 4));
        }
        local_8 = 1;
        puVar1 = (undefined4 *)in_ECX[0xe];
        for (puVar2 = (undefined4 *)*puVar1; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
          piVar6 = (int *)puVar2[9];
          if (piVar6 == (int *)0x0) {
            FUN_008018d0(L"[ERROR] [AvaNode::Update] node is NULL");
          }
          else if (piVar6[1] == 0x12345678) {
            if (((*(char *)((int)piVar6 + 0x5d) != '\0') || ((char)piVar6[0x17] != '\0')) &&
               (iVar5 = (**(code **)(*piVar6 + 0x1c))(), iVar5 != 1)) {
              (**(code **)(*piVar6 + 0x68))(1,0);
            }
          }
          else {
            if ((uint)in_ECX[9] < 8) {
              piVar6 = in_ECX + 4;
            }
            else {
              piVar6 = (int *)in_ECX[4];
            }
            FUN_008018d0(L"[CRITICAL] Deleted(2) AvaNode is being Updated: Parents name is %s",
                         piVar6);
          }
        }
      }
      else {
        if (iVar5 != 0) {
          EnterCriticalSection((LPCRITICAL_SECTION)(iVar5 + 4));
        }
        local_8 = 2;
        puVar1 = (undefined4 *)in_ECX[0xe];
        for (puVar2 = (undefined4 *)*puVar1; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
          piVar6 = (int *)puVar2[9];
          if (piVar6 == (int *)0x0) {
            FUN_008018d0(L"[ERROR] [AvaNode::Update] node is NULL");
          }
          else if (piVar6[1] == 0x12345678) {
            if ((*(char *)((int)piVar6 + 0x5d) != '\0') || ((char)piVar6[0x17] != '\0')) {
              (**(code **)(*piVar6 + 0x68))(1,0);
            }
          }
          else {
            if ((uint)in_ECX[9] < 8) {
              piVar6 = in_ECX + 4;
            }
            else {
              piVar6 = (int *)in_ECX[4];
            }
            FUN_008018d0(L"[CRITICAL] Deleted(2) AvaNode is being Updated: Parents name is %s",
                         piVar6);
          }
        }
      }
      goto LAB_007cda2c;
    }
  }
  ExceptionList = &local_10;
  (**(code **)(*in_ECX + 0x14))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (99999.0 < (float)in_ECX[0x31] || (float)in_ECX[0x31] == 99999.0) {
    pcVar3 = *(code **)(*in_ECX + 0x14);
    in_ECX[0x38] = 0;
    in_ECX[0x39] = 0;
    in_ECX[0x3a] = 0;
    in_ECX[0x3b] = 0x3f800000;
    (*pcVar3)();
  }
  if (in_ECX[2] != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX[2] + 4));
  }
  local_8 = 0;
  puVar1 = (undefined4 *)in_ECX[0xe];
  for (puVar2 = (undefined4 *)*puVar1; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
    piVar6 = (int *)puVar2[9];
    if (piVar6 == (int *)0x0) {
      FUN_008018d0(L"[AvaNode::Update] it->second is NULL");
    }
    else if (piVar6[1] == 0x12345678) {
      (**(code **)(*piVar6 + 0x68))(1,1);
    }
    else {
      if ((uint)in_ECX[9] < 8) {
        piVar6 = in_ECX + 4;
      }
      else {
        piVar6 = (int *)in_ECX[4];
      }
      FUN_008018d0(L"[CRITICAL] Deleted AvaNode is being Updated: Parents name is %s",piVar6);
    }
  }
LAB_007cda2c:
  local_8 = 0xffffffff;
  if (in_ECX[2] != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX[2] + 4));
  }
  *(undefined1 *)(in_ECX + 0x17) = 0;
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
007cd790 : PUSH EBP
007cd791 : MOV EBP,ESP
007cd793 : PUSH -0x1
007cd795 : PUSH 0xb2880c
007cd79a : MOV EAX,FS:[0x0]
007cd7a0 : PUSH EAX
007cd7a1 : SUB ESP,0x10
007cd7a4 : PUSH EBX
007cd7a5 : PUSH ESI
007cd7a6 : PUSH EDI
007cd7a7 : MOV EAX,[0x00d66fa0]
007cd7ac : XOR EAX,EBP
007cd7ae : PUSH EAX
007cd7af : LEA EAX,[EBP + -0xc]
007cd7b2 : MOV FS:[0x0],EAX
007cd7b8 : MOV EDI,ECX
007cd7ba : CMP byte ptr [EBP + 0x8],0x0
007cd7be : MOV AL,byte ptr [EDI + 0x5d]
007cd7c1 : MOV CL,byte ptr [EBP + 0xc]
007cd7c4 : JNZ 0x007cd7eb
007cd7c6 : TEST CL,CL
007cd7c8 : JNZ 0x007cd7eb
007cd7ca : TEST AL,AL
007cd7cc : JNZ 0x007cd94e
007cd7d2 : CMP byte ptr [EDI + 0x5c],CL
007cd7d5 : JNZ 0x007cd7eb
007cd7d7 : MOV ECX,dword ptr [EBP + -0xc]
007cd7da : MOV dword ptr FS:[0x0],ECX
007cd7e1 : POP ECX
007cd7e2 : POP EDI
007cd7e3 : POP ESI
007cd7e4 : POP EBX
007cd7e5 : MOV ESP,EBP
007cd7e7 : POP EBP
007cd7e8 : RET 0x8
007cd7eb : TEST AL,AL
007cd7ed : JNZ 0x007cd94e
007cd7f3 : TEST CL,CL
007cd7f5 : JNZ 0x007cd94e
007cd7fb : MOV EAX,dword ptr [EDI]
007cd7fd : MOV EDX,dword ptr [EAX + 0x1c]
007cd800 : MOV ECX,EDI
007cd802 : CALL EDX
007cd804 : XOR ECX,ECX
007cd806 : CMP EAX,0x2
007cd809 : SETZ CL
007cd80c : MOV dword ptr [EBP + 0xc],EDI
007cd80f : MOV EAX,ECX
007cd811 : TEST EAX,EAX
007cd813 : MOV EAX,dword ptr [EDI + 0x8]
007cd816 : JZ 0x007cd8bd
007cd81c : TEST EAX,EAX
007cd81e : JZ 0x007cd82a
007cd820 : ADD EAX,0x4
007cd823 : PUSH EAX
007cd824 : CALL dword ptr [0x00b85118]
007cd82a : MOV dword ptr [EBP + -0x4],0x1
007cd831 : MOV EAX,dword ptr [EDI + 0x38]
007cd834 : MOV EBX,dword ptr [EAX]
007cd836 : MOV dword ptr [EBP + 0x8],EAX
007cd839 : CMP EBX,EAX
007cd83b : JZ 0x007cda2c
007cd841 : MOV ESI,dword ptr [EBX + 0x24]
007cd844 : TEST ESI,ESI
007cd846 : JNZ 0x007cd85d
007cd848 : MOV ESI,dword ptr [0x00da98e8]
007cd84e : PUSH 0xc1f1e8
007cd853 : CALL 0x008018d0
007cd858 : ADD ESP,0x4
007cd85b : JMP 0x007cd8b1
007cd85d : CMP dword ptr [ESI + 0x4],0x12345678
007cd864 : JNZ 0x007cd88f
007cd866 : CMP byte ptr [ESI + 0x5d],0x0
007cd86a : JNZ 0x007cd872
007cd86c : CMP byte ptr [ESI + 0x5c],0x0
007cd870 : JZ 0x007cd8b1
007cd872 : MOV EDX,dword ptr [ESI]
007cd874 : MOV EAX,dword ptr [EDX + 0x1c]
007cd877 : MOV ECX,ESI
007cd879 : CALL EAX
007cd87b : CMP EAX,0x1
007cd87e : JZ 0x007cd8b1
007cd880 : MOV EDX,dword ptr [ESI]
007cd882 : MOV EAX,dword ptr [EDX + 0x68]
007cd885 : PUSH 0x0
007cd887 : PUSH 0x1
007cd889 : MOV ECX,ESI
007cd88b : CALL EAX
007cd88d : JMP 0x007cd8b1
007cd88f : CMP dword ptr [EDI + 0x24],0x8
007cd893 : JC 0x007cd89a
007cd895 : MOV EAX,dword ptr [EDI + 0x10]
007cd898 : JMP 0x007cd89d
007cd89a : LEA EAX,[EDI + 0x10]
007cd89d : MOV ESI,dword ptr [0x00da98e8]
007cd8a3 : PUSH EAX
007cd8a4 : PUSH 0xc1f238
007cd8a9 : CALL 0x008018d0
007cd8ae : ADD ESP,0x8
007cd8b1 : MOV EBX,dword ptr [EBX]
007cd8b3 : CMP EBX,dword ptr [EBP + 0x8]
007cd8b6 : JNZ 0x007cd841
007cd8b8 : JMP 0x007cda2c
007cd8bd : TEST EAX,EAX
007cd8bf : JZ 0x007cd8cb
007cd8c1 : ADD EAX,0x4
007cd8c4 : PUSH EAX
007cd8c5 : CALL dword ptr [0x00b85118]
007cd8cb : MOV dword ptr [EBP + -0x4],0x2
007cd8d2 : MOV EAX,dword ptr [EDI + 0x38]
007cd8d5 : MOV EBX,dword ptr [EAX]
007cd8d7 : MOV dword ptr [EBP + 0x8],EAX
007cd8da : CMP EBX,EAX
007cd8dc : JZ 0x007cda2c
007cd8e2 : MOV ECX,dword ptr [EBX + 0x24]
007cd8e5 : TEST ECX,ECX
007cd8e7 : JNZ 0x007cd8fe
007cd8e9 : MOV ESI,dword ptr [0x00da98e8]
007cd8ef : PUSH 0xc1f2c0
007cd8f4 : CALL 0x008018d0
007cd8f9 : ADD ESP,0x4
007cd8fc : JMP 0x007cd942
007cd8fe : CMP dword ptr [ECX + 0x4],0x12345678
007cd905 : JNZ 0x007cd920
007cd907 : CMP byte ptr [ECX + 0x5d],0x0
007cd90b : JNZ 0x007cd913
007cd90d : CMP byte ptr [ECX + 0x5c],0x0
007cd911 : JZ 0x007cd942
007cd913 : MOV EDX,dword ptr [ECX]
007cd915 : MOV EAX,dword ptr [EDX + 0x68]
007cd918 : PUSH 0x0
007cd91a : PUSH 0x1
007cd91c : CALL EAX
007cd91e : JMP 0x007cd942
007cd920 : CMP dword ptr [EDI + 0x24],0x8
007cd924 : JC 0x007cd92b
007cd926 : MOV EAX,dword ptr [EDI + 0x10]
007cd929 : JMP 0x007cd92e
007cd92b : LEA EAX,[EDI + 0x10]
007cd92e : MOV ESI,dword ptr [0x00da98e8]
007cd934 : PUSH EAX
007cd935 : PUSH 0xc1f310
007cd93a : CALL 0x008018d0
007cd93f : ADD ESP,0x8
007cd942 : MOV EBX,dword ptr [EBX]
007cd944 : CMP EBX,dword ptr [EBP + 0x8]
007cd947 : JNZ 0x007cd8e2
007cd949 : JMP 0x007cda2c
007cd94e : MOV EDX,dword ptr [EDI]
007cd950 : MOV EAX,dword ptr [EDX + 0x14]
007cd953 : MOV ECX,EDI
007cd955 : CALL EAX
007cd957 : MOVSS XMM0,dword ptr [0x00cdf664]
007cd95f : COMISS XMM0,dword ptr [EDI + 0xc4]
007cd966 : JA 0x007cd9aa
007cd968 : XORPS XMM0,XMM0
007cd96b : MOV EDX,dword ptr [EDI]
007cd96d : MOV EAX,dword ptr [EDX + 0x14]
007cd970 : MOVSS dword ptr [EBP + -0x1c],XMM0
007cd975 : MOVSS dword ptr [EBP + -0x18],XMM0
007cd97a : MOVSS dword ptr [EBP + -0x14],XMM0
007cd97f : MOVSS XMM0,dword ptr [0x00c10fc4]
007cd987 : MOVSS dword ptr [EBP + -0x10],XMM0
007cd98c : MOVQ XMM0,qword ptr [EBP + -0x1c]
007cd991 : MOVQ qword ptr [EDI + 0xe0],XMM0
007cd999 : MOVQ XMM0,qword ptr [EBP + -0x14]
007cd99e : MOV ECX,EDI
007cd9a0 : MOVQ qword ptr [EDI + 0xe8],XMM0
007cd9a8 : CALL EAX
007cd9aa : MOV EAX,dword ptr [EDI + 0x8]
007cd9ad : MOV dword ptr [EBP + 0xc],EDI
007cd9b0 : TEST EAX,EAX
007cd9b2 : JZ 0x007cd9be
007cd9b4 : ADD EAX,0x4
007cd9b7 : PUSH EAX
007cd9b8 : CALL dword ptr [0x00b85118]
007cd9be : MOV dword ptr [EBP + -0x4],0x0
007cd9c5 : MOV EAX,dword ptr [EDI + 0x38]
007cd9c8 : MOV EBX,dword ptr [EAX]
007cd9ca : MOV dword ptr [EBP + 0x8],EAX
007cd9cd : CMP EBX,EAX
007cd9cf : JZ 0x007cda2c
007cd9d1 : MOV ECX,dword ptr [EBX + 0x24]
007cd9d4 : TEST ECX,ECX
007cd9d6 : JNZ 0x007cd9ed
007cd9d8 : MOV ESI,dword ptr [0x00da98e8]
007cd9de : PUSH 0xc1f118
007cd9e3 : CALL 0x008018d0
007cd9e8 : ADD ESP,0x4
007cd9eb : JMP 0x007cda25
007cd9ed : CMP dword ptr [ECX + 0x4],0x12345678
007cd9f4 : JNZ 0x007cda03
007cd9f6 : MOV EDX,dword ptr [ECX]
007cd9f8 : MOV EAX,dword ptr [EDX + 0x68]
007cd9fb : PUSH 0x1
007cd9fd : PUSH 0x1
007cd9ff : CALL EAX
007cda01 : JMP 0x007cda25
007cda03 : CMP dword ptr [EDI + 0x24],0x8
007cda07 : JC 0x007cda0e
007cda09 : MOV EAX,dword ptr [EDI + 0x10]
007cda0c : JMP 0x007cda11
007cda0e : LEA EAX,[EDI + 0x10]
007cda11 : MOV ESI,dword ptr [0x00da98e8]
007cda17 : PUSH EAX
007cda18 : PUSH 0xc1f168
007cda1d : CALL 0x008018d0
007cda22 : ADD ESP,0x8
007cda25 : MOV EBX,dword ptr [EBX]
007cda27 : CMP EBX,dword ptr [EBP + 0x8]
007cda2a : JNZ 0x007cd9d1
007cda2c : MOV dword ptr [EBP + -0x4],0xffffffff
007cda33 : MOV EAX,dword ptr [EDI + 0x8]
007cda36 : TEST EAX,EAX
007cda38 : JZ 0x007cda44
007cda3a : ADD EAX,0x4
007cda3d : PUSH EAX
007cda3e : CALL dword ptr [0x00b8511c]
007cda44 : MOV byte ptr [EDI + 0x5c],0x0
007cda48 : MOV AL,0x1
007cda4a : MOV ECX,dword ptr [EBP + -0xc]
007cda4d : MOV dword ptr FS:[0x0],ECX
007cda54 : POP ECX
007cda55 : POP EDI
007cda56 : POP ESI
007cda57 : POP EBX
007cda58 : MOV ESP,EBP
007cda5a : POP EBP
007cda5b : RET 0x8
