PROGRAM  : Maestia.exe
FUNCTION : FUN_00547d10
ENTRY    : 00547d10
BODY     : [[00547d10, 00547e10]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00547d10(void)

{
  undefined4 *puVar1;
  uint uVar2;
  LONG LVar3;
  GRefCountImplCore *in_ECX;
  
  *(undefined ***)in_ECX = &PTR_FUN_00b8be3c;
  FUN_00544c80();
  puVar1 = *(undefined4 **)(in_ECX + 0x1c);
  if (puVar1 != (undefined4 *)0x0) {
    FUN_005034a0(*puVar1,puVar1[1]);
    FUN_00515cf0(*puVar1);
    FUN_00515cf0(puVar1);
  }
  puVar1 = *(undefined4 **)(in_ECX + 0x18);
  *(undefined4 *)(in_ECX + 0x1c) = 0;
  if (puVar1 != (undefined4 *)0x0) {
    *(undefined ***)(puVar1 + 7) = &PTR_FUN_00b8be38;
    FUN_005d5a00();
    FUN_005d4f60();
    FUN_00515cf0(puVar1[0x11]);
    if (puVar1[9] != 0) {
      FUN_00557b30();
    }
    GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)(puVar1 + 7));
    FUN_00515cf0(*puVar1);
    FUN_00515cf0(puVar1);
  }
  if (*(GRefCountImpl **)(in_ECX + 0x138) != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(*(GRefCountImpl **)(in_ECX + 0x138));
  }
  GRefCountImplCore::~GRefCountImplCore(in_ECX + 0x11c);
  if (*(GRefCountNTSImpl **)(in_ECX + 0x118) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0x118));
  }
  FUN_0059cf50();
  if (*(GRefCountNTSImpl **)(in_ECX + 0x14) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0x14));
  }
  if (*(GRefCountNTSImpl **)(in_ECX + 0x10) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0x10));
  }
  if (*(GRefCountNTSImpl **)(in_ECX + 0xc) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0xc));
  }
  uVar2 = *(uint *)(in_ECX + 8);
  LVar3 = InterlockedExchangeAdd((LONG *)((uVar2 & 0xfffffffc) + 4),-1);
  if (LVar3 == 1) {
    FUN_00515cf0(uVar2 & 0xfffffffc);
  }
  GRefCountImplCore::~GRefCountImplCore(in_ECX);
  return;
}



============================================================
DISASSEMBLY
============================================================
00547d10 : PUSH ESI
00547d11 : MOV ESI,ECX
00547d13 : PUSH EDI
00547d14 : MOV dword ptr [ESI],0xb8be3c
00547d1a : CALL 0x00544c80
00547d1f : MOV EDI,dword ptr [ESI + 0x1c]
00547d22 : TEST EDI,EDI
00547d24 : JZ 0x00547d43
00547d26 : MOV EAX,dword ptr [EDI + 0x4]
00547d29 : MOV ECX,dword ptr [EDI]
00547d2b : PUSH EAX
00547d2c : PUSH ECX
00547d2d : CALL 0x005034a0
00547d32 : MOV EDX,dword ptr [EDI]
00547d34 : ADD ESP,0x8
00547d37 : PUSH EDX
00547d38 : CALL 0x00515cf0
00547d3d : PUSH EDI
00547d3e : CALL 0x00515cf0
00547d43 : PUSH EBX
00547d44 : MOV EBX,dword ptr [ESI + 0x18]
00547d47 : MOV dword ptr [ESI + 0x1c],0x0
00547d4e : TEST EBX,EBX
00547d50 : JZ 0x00547d95
00547d52 : LEA EDI,[EBX + 0x1c]
00547d55 : LEA ECX,[EDI + 0x6c]
00547d58 : MOV dword ptr [EDI],0xb8be38
00547d5e : CALL 0x005d5a00
00547d63 : LEA ECX,[EDI + 0x44]
00547d66 : CALL 0x005d4f60
00547d6b : MOV EAX,dword ptr [EDI + 0x28]
00547d6e : PUSH EAX
00547d6f : CALL 0x00515cf0
00547d74 : MOV ECX,dword ptr [EDI + 0x8]
00547d77 : TEST ECX,ECX
00547d79 : JZ 0x00547d80
00547d7b : CALL 0x00557b30
00547d80 : MOV ECX,EDI
00547d82 : CALL 0x004ff7b0
00547d87 : MOV ECX,dword ptr [EBX]
00547d89 : PUSH ECX
00547d8a : CALL 0x00515cf0
00547d8f : PUSH EBX
00547d90 : CALL 0x00515cf0
00547d95 : MOV ECX,dword ptr [ESI + 0x138]
00547d9b : POP EBX
00547d9c : TEST ECX,ECX
00547d9e : JZ 0x00547da5
00547da0 : CALL 0x004ff7e0
00547da5 : LEA ECX,[ESI + 0x11c]
00547dab : CALL 0x004ff7b0
00547db0 : MOV ECX,dword ptr [ESI + 0x118]
00547db6 : TEST ECX,ECX
00547db8 : JZ 0x00547dbf
00547dba : CALL 0x004ff7c0
00547dbf : LEA ECX,[ESI + 0x28]
00547dc2 : CALL 0x0059cf50
00547dc7 : MOV ECX,dword ptr [ESI + 0x14]
00547dca : TEST ECX,ECX
00547dcc : JZ 0x00547dd3
00547dce : CALL 0x004ff7c0
00547dd3 : MOV ECX,dword ptr [ESI + 0x10]
00547dd6 : TEST ECX,ECX
00547dd8 : JZ 0x00547ddf
00547dda : CALL 0x004ff7c0
00547ddf : MOV ECX,dword ptr [ESI + 0xc]
00547de2 : TEST ECX,ECX
00547de4 : JZ 0x00547deb
00547de6 : CALL 0x004ff7c0
00547deb : MOV EDI,dword ptr [ESI + 0x8]
00547dee : AND EDI,0xfffffffc
00547df1 : PUSH -0x1
00547df3 : LEA EDX,[EDI + 0x4]
00547df6 : PUSH EDX
00547df7 : CALL dword ptr [0x00b851cc]
00547dfd : SUB EAX,0x1
00547e00 : JNZ 0x00547e08
00547e02 : PUSH EDI
00547e03 : CALL 0x00515cf0
00547e08 : POP EDI
00547e09 : MOV ECX,ESI
00547e0b : POP ESI
00547e0c : JMP 0x004ff7b0
