PROGRAM  : Maestia.exe
FUNCTION : FUN_005b6d40
ENTRY    : 005b6d40
BODY     : [[005b6d40, 005b6e5a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b6d40(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  uint uVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined4 *in_ECX;
  int iVar5;
  undefined4 uVar6;
  
  FUN_00522570(param_2,param_3,param_4);
  in_ECX[0x27] = param_1;
  *in_ECX = &PTR_FUN_00b907d0;
  in_ECX[3] = &PTR_LAB_00b907c4;
  in_ECX[0x1a] = &PTR_LAB_00b90770;
  in_ECX[0x28] = 0;
  in_ECX[0x29] = 0;
  in_ECX[0x2a] = 0;
  in_ECX[0x2b] = 0;
  in_ECX[0x2d] = 0;
  in_ECX[0x2c] = 0;
  in_ECX[0x2e] = 0;
  in_ECX[0x2f] = 0;
  FUN_005b5960(*(undefined4 *)(param_1 + 0x30));
  if (*(char *)(in_ECX[0x27] + 0x14) == '\0') {
    in_ECX[0x23] = in_ECX[0x23] & 0xffffdfff;
  }
  else {
    in_ECX[0x23] = in_ECX[0x23] | 0x2000;
  }
  uVar1 = *(uint *)(in_ECX[0x27] + 0x1c);
  uVar2 = in_ECX[0x2a];
  FUN_005b64b0(in_ECX + 0x29,uVar1);
  if (uVar2 < uVar1) {
    puVar3 = (undefined4 *)(in_ECX[0x29] + uVar2 * 4);
    for (iVar5 = uVar1 - uVar2; iVar5 != 0; iVar5 = iVar5 + -1) {
      if (puVar3 != (undefined4 *)0x0) {
        *puVar3 = 0;
      }
      puVar3 = puVar3 + 1;
    }
  }
  uVar6 = 9;
  uVar4 = FUN_0051cf30(9);
  FUN_0051d6a0(uVar4);
  iVar5 = FUN_00530980(uVar4,uVar6);
  if (iVar5 != 0) {
    *(uint *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1U & 0x8fffffff;
  }
  if (in_ECX[0x1b] != 0) {
    FUN_00503db0();
  }
  in_ECX[0x1b] = iVar5;
  FUN_005b67f0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005b6d40 : MOV EDX,dword ptr [ESP + 0xc]
005b6d44 : PUSH EBX
005b6d45 : PUSH EBP
005b6d46 : PUSH ESI
005b6d47 : PUSH EDI
005b6d48 : PUSH ECX
005b6d49 : MOV EAX,ESP
005b6d4b : MOV ESI,ECX
005b6d4d : MOV ECX,dword ptr [ESP + 0x24]
005b6d51 : MOV dword ptr [EAX],ECX
005b6d53 : MOV EAX,dword ptr [ESP + 0x1c]
005b6d57 : PUSH EDX
005b6d58 : PUSH EAX
005b6d59 : MOV ECX,ESI
005b6d5b : CALL 0x00522570
005b6d60 : MOV ECX,dword ptr [ESP + 0x14]
005b6d64 : XOR EAX,EAX
005b6d66 : MOV dword ptr [ESI + 0x9c],ECX
005b6d6c : MOV dword ptr [ESI],0xb907d0
005b6d72 : MOV dword ptr [ESI + 0xc],0xb907c4
005b6d79 : MOV dword ptr [ESI + 0x68],0xb90770
005b6d80 : MOV dword ptr [ESI + 0xa0],EAX
005b6d86 : MOV dword ptr [ESI + 0xa4],EAX
005b6d8c : MOV dword ptr [ESI + 0xa8],EAX
005b6d92 : LEA EDI,[ESI + 0xa4]
005b6d98 : MOV dword ptr [EDI + 0x8],EAX
005b6d9b : MOV dword ptr [ESI + 0xb4],EAX
005b6da1 : MOV dword ptr [ESI + 0xb0],EAX
005b6da7 : MOV dword ptr [ESI + 0xb8],EAX
005b6dad : MOV dword ptr [ESI + 0xbc],EAX
005b6db3 : MOV ECX,dword ptr [ECX + 0x30]
005b6db6 : PUSH ECX
005b6db7 : MOV ECX,ESI
005b6db9 : CALL 0x005b5960
005b6dbe : MOV EAX,dword ptr [ESI + 0x9c]
005b6dc4 : CMP byte ptr [EAX + 0x14],0x0
005b6dc8 : JZ 0x005b6dd6
005b6dca : OR dword ptr [ESI + 0x8c],0x2000
005b6dd4 : JMP 0x005b6de0
005b6dd6 : AND dword ptr [ESI + 0x8c],0xffffdfff
005b6de0 : MOV EBP,dword ptr [EAX + 0x1c]
005b6de3 : MOV EBX,dword ptr [EDI + 0x4]
005b6de6 : PUSH EBP
005b6de7 : PUSH EDI
005b6de8 : MOV ECX,EDI
005b6dea : CALL 0x005b64b0
005b6def : CMP EBP,EBX
005b6df1 : JBE 0x005b6e12
005b6df3 : SUB EBP,EBX
005b6df5 : MOV EDX,dword ptr [EDI]
005b6df7 : LEA EAX,[EDX + EBX*0x4]
005b6dfa : JZ 0x005b6e12
005b6dfc : LEA ESP,[ESP]
005b6e00 : TEST EAX,EAX
005b6e02 : JZ 0x005b6e0a
005b6e04 : MOV dword ptr [EAX],0x0
005b6e0a : ADD EAX,0x4
005b6e0d : SUB EBP,0x1
005b6e10 : JNZ 0x005b6e00
005b6e12 : PUSH 0x9
005b6e14 : MOV ECX,ESI
005b6e16 : CALL 0x0051cf30
005b6e1b : PUSH EAX
005b6e1c : MOV ECX,ESI
005b6e1e : CALL 0x0051d6a0
005b6e23 : MOV ECX,EAX
005b6e25 : CALL 0x00530980
005b6e2a : MOV EDI,EAX
005b6e2c : TEST EDI,EDI
005b6e2e : JZ 0x005b6e3c
005b6e30 : MOV EAX,dword ptr [EDI + 0x8]
005b6e33 : INC EAX
005b6e34 : AND EAX,0x8fffffff
005b6e39 : MOV dword ptr [EDI + 0x8],EAX
005b6e3c : MOV ECX,dword ptr [ESI + 0x6c]
005b6e3f : TEST ECX,ECX
005b6e41 : JZ 0x005b6e48
005b6e43 : CALL 0x00503db0
005b6e48 : MOV ECX,ESI
005b6e4a : MOV dword ptr [ESI + 0x6c],EDI
005b6e4d : CALL 0x005b67f0
005b6e52 : POP EDI
005b6e53 : MOV EAX,ESI
005b6e55 : POP ESI
005b6e56 : POP EBP
005b6e57 : POP EBX
005b6e58 : RET 0x10
