PROGRAM  : Maestia.exe
FUNCTION : FUN_0058ac30
ENTRY    : 0058ac30
BODY     : [[0058ac30, 0058ace2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058ac30(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int *in_ECX;
  
  iVar1 = in_ECX[0x69];
  in_ECX[0x2f] = in_ECX[0x2f] + 1;
  if ((iVar1 == 0) || (*(char *)(iVar1 + 0x18) != '\0')) {
    uVar2 = (**(code **)(*(int *)in_ECX[0x27] + 0x28))();
  }
  else {
    uVar2 = *(uint *)(iVar1 + 0x10);
  }
  uVar3 = (**(code **)(*(int *)in_ECX[0x27] + 0x28))();
  if ((uVar2 < uVar3) && (uVar2 <= (uint)in_ECX[0x2f])) {
    if (uVar2 != 0) {
      in_ECX[0x2f] = uVar2 - 1;
      return;
    }
    in_ECX[0x2f] = 0;
    return;
  }
  if (uVar3 <= (uint)in_ECX[0x2f]) {
    *(byte *)(in_ECX + 0x71) = *(byte *)(in_ECX + 0x71) | 2;
    in_ECX[0x2f] = 0;
    if (1 < uVar3) {
      FUN_005ec800(0);
      *(uint *)(in_ECX[0x28] + 0xb00) = *(uint *)(in_ECX[0x28] + 0xb00) | 0x400;
      return;
    }
    (**(code **)(*in_ECX + 0x124))(1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058ac30 : PUSH ESI
0058ac31 : MOV ESI,ECX
0058ac33 : MOV EAX,dword ptr [ESI + 0x1a4]
0058ac39 : INC dword ptr [ESI + 0xbc]
0058ac3f : PUSH EDI
0058ac40 : TEST EAX,EAX
0058ac42 : JZ 0x0058ac4f
0058ac44 : CMP byte ptr [EAX + 0x18],0x0
0058ac48 : JNZ 0x0058ac4f
0058ac4a : MOV EDI,dword ptr [EAX + 0x10]
0058ac4d : JMP 0x0058ac5e
0058ac4f : MOV ECX,dword ptr [ESI + 0x9c]
0058ac55 : MOV EAX,dword ptr [ECX]
0058ac57 : MOV EDX,dword ptr [EAX + 0x28]
0058ac5a : CALL EDX
0058ac5c : MOV EDI,EAX
0058ac5e : MOV ECX,dword ptr [ESI + 0x9c]
0058ac64 : MOV EAX,dword ptr [ECX]
0058ac66 : MOV EDX,dword ptr [EAX + 0x28]
0058ac69 : CALL EDX
0058ac6b : CMP EDI,EAX
0058ac6d : JNC 0x0058ac92
0058ac6f : CMP dword ptr [ESI + 0xbc],EDI
0058ac75 : JC 0x0058ac92
0058ac77 : TEST EDI,EDI
0058ac79 : JBE 0x0058ac87
0058ac7b : LEA EAX,[EDI + -0x1]
0058ac7e : POP EDI
0058ac7f : MOV dword ptr [ESI + 0xbc],EAX
0058ac85 : POP ESI
0058ac86 : RET
0058ac87 : XOR EAX,EAX
0058ac89 : POP EDI
0058ac8a : MOV dword ptr [ESI + 0xbc],EAX
0058ac90 : POP ESI
0058ac91 : RET
0058ac92 : CMP dword ptr [ESI + 0xbc],EAX
0058ac98 : JC 0x0058ace0
0058ac9a : OR byte ptr [ESI + 0x1c4],0x2
0058aca1 : MOV dword ptr [ESI + 0xbc],0x0
0058acab : CMP EAX,0x1
0058acae : JBE 0x0058acd2
0058acb0 : PUSH 0x0
0058acb2 : LEA ECX,[ESI + 0xa8]
0058acb8 : CALL 0x005ec800
0058acbd : MOV ESI,dword ptr [ESI + 0xa0]
0058acc3 : ADD ESI,0xb00
0058acc9 : OR dword ptr [ESI],0x400
0058accf : POP EDI
0058acd0 : POP ESI
0058acd1 : RET
0058acd2 : MOV EAX,dword ptr [ESI]
0058acd4 : MOV EDX,dword ptr [EAX + 0x124]
0058acda : PUSH 0x1
0058acdc : MOV ECX,ESI
0058acde : CALL EDX
0058ace0 : POP EDI
0058ace1 : POP ESI
0058ace2 : RET
