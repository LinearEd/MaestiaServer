PROGRAM  : Maestia.exe
FUNCTION : FUN_006f49c0
ENTRY    : 006f49c0
BODY     : [[006f49c0, 006f4b3e]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006f49c0(void)

{
  uintptr_t uVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b302b1;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_1c = 0;
  local_28 = (LPCRITICAL_SECTION)&DAT_00d72354;
  local_24 = ".\\AvIoBase.cpp";
  local_20 = 0x175;
  local_18 = 1;
  FUN_006ef1a0(&local_28);
  local_8 = 0;
  if (DAT_00da9d3c == 0) {
    DAT_00d8bd40 = 0;
    DAT_00d8bd44 = 0;
    puVar3 = &DAT_00d8bd40;
    puVar4 = &DAT_00d8bd48;
    for (iVar2 = 0x1e; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar4 = *puVar3;
      puVar3 = puVar3 + 1;
      puVar4 = puVar4 + 1;
    }
    DAT_00d8bdc0 = 0;
    DAT_00d8bdc4 = 0;
    puVar3 = &DAT_00d8bdc0;
    puVar4 = &DAT_00d8bdc8;
    for (iVar2 = 0x1e; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar4 = *puVar3;
      puVar3 = puVar3 + 1;
      puVar4 = puVar4 + 1;
    }
    DAT_00da9d40 = 2;
    DAT_00d6a620 = CreateIoCompletionPort((HANDLE)0xffffffff,(HANDLE)0x0,0,2);
    if (DAT_00d6a620 == (HANDLE)0x0) {
      local_8 = 0xffffffff;
      if (local_1c != 0) {
        LeaveCriticalSection(local_28);
      }
      ExceptionList = local_10;
      return 0;
    }
    DAT_00da9d3c = 1;
    local_8 = 0xffffffff;
    if (local_1c != 0) {
      LeaveCriticalSection(local_28);
      local_1c = 0;
    }
    if (0x10 < DAT_00da9d40) {
      DAT_00da9d40 = 0x10;
    }
    iVar2 = 0;
    if (0 < DAT_00da9d40) {
      do {
        local_14 = 0;
        uVar1 = __beginthreadex((void *)0x0,0,FUN_006f4750,(void *)0x0,0,&local_14);
        (&DAT_00d8be40)[iVar2] = uVar1;
        iVar2 = iVar2 + 1;
      } while (iVar2 < DAT_00da9d40);
    }
  }
  else {
    local_8 = 0xffffffff;
    if (local_1c != 0) {
      LeaveCriticalSection(local_28);
    }
  }
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
006f49c0 : PUSH EBP
006f49c1 : MOV EBP,ESP
006f49c3 : PUSH -0x1
006f49c5 : PUSH 0xb302b1
006f49ca : MOV EAX,FS:[0x0]
006f49d0 : PUSH EAX
006f49d1 : SUB ESP,0x18
006f49d4 : PUSH EBX
006f49d5 : PUSH ESI
006f49d6 : PUSH EDI
006f49d7 : MOV EAX,[0x00d66fa0]
006f49dc : XOR EAX,EBP
006f49de : PUSH EAX
006f49df : LEA EAX,[EBP + -0xc]
006f49e2 : MOV FS:[0x0],EAX
006f49e8 : LEA EAX,[EBP + -0x24]
006f49eb : XOR EBX,EBX
006f49ed : PUSH EAX
006f49ee : MOV dword ptr [EBP + -0x18],EBX
006f49f1 : MOV dword ptr [EBP + -0x24],0xd72354
006f49f8 : MOV dword ptr [EBP + -0x20],0xbf779c
006f49ff : MOV dword ptr [EBP + -0x1c],0x175
006f4a06 : MOV dword ptr [EBP + -0x14],0x1
006f4a0d : CALL 0x006ef1a0
006f4a12 : MOV dword ptr [EBP + -0x4],EBX
006f4a15 : CMP dword ptr [0x00da9d3c],EBX
006f4a1b : JZ 0x006f4a3f
006f4a1d : MOV dword ptr [EBP + -0x4],0xffffffff
006f4a24 : CMP dword ptr [EBP + -0x18],EBX
006f4a27 : JZ 0x006f4b28
006f4a2d : MOV ECX,dword ptr [EBP + -0x24]
006f4a30 : PUSH ECX
006f4a31 : CALL dword ptr [0x00b8511c]
006f4a37 : MOV dword ptr [EBP + -0x18],EBX
006f4a3a : JMP 0x006f4b28
006f4a3f : PUSH 0x2
006f4a41 : MOV dword ptr [0x00d8bd40],EBX
006f4a47 : MOV dword ptr [0x00d8bd44],EBX
006f4a4d : MOV ECX,0x1e
006f4a52 : MOV ESI,0xd8bd40
006f4a57 : MOV EDI,0xd8bd48
006f4a5c : MOVSD.REP ES:EDI,ESI
006f4a5e : PUSH EBX
006f4a5f : MOV dword ptr [0x00d8bdc0],EBX
006f4a65 : MOV dword ptr [0x00d8bdc4],EBX
006f4a6b : MOV ECX,0x1e
006f4a70 : MOV ESI,0xd8bdc0
006f4a75 : MOV EDI,0xd8bdc8
006f4a7a : MOVSD.REP ES:EDI,ESI
006f4a7c : PUSH EBX
006f4a7d : OR ESI,0xffffffff
006f4a80 : PUSH ESI
006f4a81 : MOV dword ptr [0x00da9d40],0x2
006f4a8b : CALL dword ptr [0x00b8538c]
006f4a91 : MOV [0x00d6a620],EAX
006f4a96 : CMP EAX,EBX
006f4a98 : JNZ 0x006f4ac3
006f4a9a : MOV dword ptr [EBP + -0x4],ESI
006f4a9d : CMP dword ptr [EBP + -0x18],EBX
006f4aa0 : JZ 0x006f4aaf
006f4aa2 : MOV EDX,dword ptr [EBP + -0x24]
006f4aa5 : PUSH EDX
006f4aa6 : CALL dword ptr [0x00b8511c]
006f4aac : MOV dword ptr [EBP + -0x18],EBX
006f4aaf : XOR EAX,EAX
006f4ab1 : MOV ECX,dword ptr [EBP + -0xc]
006f4ab4 : MOV dword ptr FS:[0x0],ECX
006f4abb : POP ECX
006f4abc : POP EDI
006f4abd : POP ESI
006f4abe : POP EBX
006f4abf : MOV ESP,EBP
006f4ac1 : POP EBP
006f4ac2 : RET
006f4ac3 : MOV dword ptr [0x00da9d3c],0x1
006f4acd : MOV dword ptr [EBP + -0x4],ESI
006f4ad0 : CMP dword ptr [EBP + -0x18],EBX
006f4ad3 : JZ 0x006f4ae2
006f4ad5 : MOV EAX,dword ptr [EBP + -0x24]
006f4ad8 : PUSH EAX
006f4ad9 : CALL dword ptr [0x00b8511c]
006f4adf : MOV dword ptr [EBP + -0x18],EBX
006f4ae2 : MOV EAX,[0x00da9d40]
006f4ae7 : CMP EAX,0x10
006f4aea : JLE 0x006f4af6
006f4aec : MOV EAX,0x10
006f4af1 : MOV [0x00da9d40],EAX
006f4af6 : XOR ESI,ESI
006f4af8 : CMP EAX,EBX
006f4afa : JLE 0x006f4b28
006f4afc : LEA ESP,[ESP]
006f4b00 : LEA ECX,[EBP + -0x10]
006f4b03 : PUSH ECX
006f4b04 : PUSH EBX
006f4b05 : PUSH EBX
006f4b06 : PUSH 0x6f4750
006f4b0b : PUSH EBX
006f4b0c : PUSH EBX
006f4b0d : MOV dword ptr [EBP + -0x10],EBX
006f4b10 : CALL 0x00635f44
006f4b15 : MOV dword ptr [ESI*0x4 + 0xd8be40],EAX
006f4b1c : INC ESI
006f4b1d : ADD ESP,0x18
006f4b20 : CMP ESI,dword ptr [0x00da9d40]
006f4b26 : JL 0x006f4b00
006f4b28 : MOV EAX,0x1
006f4b2d : MOV ECX,dword ptr [EBP + -0xc]
006f4b30 : MOV dword ptr FS:[0x0],ECX
006f4b37 : POP ECX
006f4b38 : POP EDI
006f4b39 : POP ESI
006f4b3a : POP EBX
006f4b3b : MOV ESP,EBP
006f4b3d : POP EBP
006f4b3e : RET
