PROGRAM  : Maestia.exe
FUNCTION : FUN_009e2560
ENTRY    : 009e2560
BODY     : [[009e2560, 009e27a5] [009e2836, 009e285b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009e2560(int param_1)

{
  int iVar1;
  uint *puVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  undefined4 *******pppppppuVar7;
  uint uStack_1b8;
  undefined1 auStack_118 [8];
  undefined1 auStack_110 [8];
  undefined1 local_108 [8];
  undefined1 auStack_100 [12];
  undefined2 uStack_f4;
  undefined4 uStack_e4;
  uint uStack_e0;
  undefined2 local_d8;
  undefined4 local_c8;
  uint local_c4;
  undefined2 local_a4 [2];
  int *local_a0;
  undefined2 auStack_9c [2];
  int *piStack_98;
  undefined2 auStack_94 [2];
  int iStack_90;
  undefined2 auStack_8c [2];
  int iStack_88;
  int local_84;
  int local_80;
  int iStack_7c;
  int *local_78;
  int *piStack_74;
  int iStack_70;
  int local_6c;
  int iStack_68;
  int *local_64;
  uint local_60;
  uint local_5c;
  uint local_58;
  undefined1 local_54 [4];
  undefined2 uStack_50;
  undefined4 uStack_40;
  uint uStack_3c;
  undefined1 auStack_38 [4];
  undefined4 ******appppppuStack_34 [4];
  undefined4 uStack_24;
  uint uStack_20;
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4ed94;
  local_10 = ExceptionList;
  uStack_1b8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_1b8;
  ExceptionList = &local_10;
  local_6c = param_1;
  local_1c = uStack_1b8;
  if (DAT_017247ac == 0) {
    local_80 = 0;
  }
  else {
    local_80 = -(uint)(*(int *)(DAT_017247ac + 0x28) != 0);
    puVar2 = &uStack_1b8;
    if (local_80 != 0) goto LAB_009e25c5;
  }
  FUN_008018d0(L"GBD NPC Set Search Error");
  puVar2 = (uint *)local_14;
LAB_009e25c5:
  do {
    do {
      while( true ) {
        do {
          do {
            local_14 = (undefined1 *)puVar2;
            if (local_80 == 0) {
              ExceptionList = local_10;
              __security_check_cookie(local_1c ^ (uint)&stack0xfffffffc);
              return;
            }
            puVar2 = (uint *)local_14;
          } while (DAT_017247ac == 0);
          local_58 = 0;
          FUN_00404160(&local_80,&local_60,&local_58);
          puVar2 = (uint *)local_14;
        } while (((local_58 == 0) || (*(short *)(local_58 + 4) != 0x6600)) ||
                (piVar4 = *(int **)(local_58 + 0xf0), local_64 = piVar4, piVar4 == (int *)0x0));
        if ((char)piVar4[0x10] != '\x02') break;
        FUN_0040eef0(local_58 + 0x18);
        local_8 = 0;
        FUN_00824120(DAT_0172491c);
        local_8 = CONCAT31(local_8._1_3_,2);
        if (7 < local_c4) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_c4 = 7;
        local_c8 = 0;
        local_d8 = 0;
        local_5c = 0;
        local_60 = 0;
        local_8._0_1_ = 3;
        local_64 = (int *)FUN_006f0300(0x28);
        local_8._0_1_ = 4;
        if (local_64 == (int *)0x0) {
          uVar3 = 0;
        }
        else {
          uVar3 = FUN_00419170(local_64,*(undefined2 *)(local_58 + 6),local_54,
                               *(undefined2 *)((int)piVar4 + 6));
        }
        local_8._0_1_ = 3;
        local_5c = uVar3;
        local_64 = (int *)FUN_006f0300(0x28);
        local_8 = CONCAT31(local_8._1_3_,5);
        if (local_64 == (int *)0x0) {
          local_58 = 0;
        }
        else {
          local_58 = FUN_00419170(local_64,*(undefined2 *)(local_58 + 6),local_54,
                                  *(undefined2 *)((int)piVar4 + 6));
        }
        iVar5 = local_6c;
        local_60 = local_58;
        local_8 = 2;
        local_64 = (int *)0x1;
        FUN_00413b60(&local_64);
        if (local_84 == *(int *)(iVar5 + 0x2c)) {
          local_78 = (int *)0x0;
          local_8 = CONCAT31(local_8._1_3_,8);
          local_64 = (int *)FUN_006f0300(0x10);
          local_a0 = (int *)0x0;
          if (local_64 != (int *)0x0) {
            local_64[1] = 0;
            local_64[2] = 0;
            local_64[3] = 0;
            local_a0 = local_64;
          }
          local_8 = 2;
          local_78 = local_a0;
          FUN_00449610();
          local_a4[0] = 1;
          FUN_0041ed30(local_108,local_a4);
          FUN_009e285c();
          return;
        }
        if (*(int *)(local_84 + 0x10) != 0) {
          FUN_00449610();
          FUN_009e285c();
          return;
        }
        if (uVar3 != 0) {
          FUN_00414770(uVar3);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_64 = (int *)0x0;
        piVar4 = (int *)FUN_00413b60(&local_64);
        local_84 = *piVar4;
        if (local_84 == *(int *)(local_6c + 0x2c)) {
          piStack_74 = (int *)0x0;
          local_8 = CONCAT31(local_8._1_3_,0xc);
          local_64 = (int *)FUN_006f0300(0x10);
          piStack_98 = (int *)0x0;
          if (local_64 != (int *)0x0) {
            local_64[1] = 0;
            local_64[2] = 0;
            local_64[3] = 0;
            piStack_98 = local_64;
          }
          local_8 = 2;
          piStack_74 = piStack_98;
          FUN_00449610();
          auStack_9c[0] = 0;
          FUN_0041ed30(auStack_110,auStack_9c);
          FUN_009e29a4();
          return;
        }
        if (*(int *)(local_84 + 0x10) != 0) {
          FUN_00449610();
          FUN_009e29a4();
          return;
        }
        if (local_58 != 0) {
          FUN_00414770(local_58);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = 0xffffffff;
        if (7 < uStack_3c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        uStack_3c = 7;
        uStack_40 = 0;
        uStack_50 = 0;
        puVar2 = (uint *)local_14;
      }
    } while (((char)piVar4[0x10] != '\x03') &&
            (iVar5 = (**(code **)(*piVar4 + 0x3c))(), puVar2 = (uint *)local_14, iVar5 == 0));
    FUN_0040eef0(piVar4 + 6);
    local_8 = 0x10;
    FUN_00824120(DAT_0172491c);
    local_8 = CONCAT31(local_8._1_3_,0x12);
    if (7 < uStack_e0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_e0 = 7;
    uStack_e4 = 0;
    uStack_f4 = 0;
    local_5c = 0;
    local_60 = 0;
    local_8._0_1_ = 0x13;
    iStack_70 = FUN_006f0300(0x28);
    local_8._0_1_ = 0x14;
    if (iStack_70 == 0) {
      uVar3 = 0;
    }
    else {
      uVar3 = FUN_00419170(iStack_70,*(undefined2 *)(local_58 + 6),auStack_38,
                           *(undefined2 *)((int)piVar4 + 6));
    }
    local_8._0_1_ = 0x13;
    local_5c = uVar3;
    iStack_70 = FUN_006f0300(0x28);
    local_8 = CONCAT31(local_8._1_3_,0x15);
    if (iStack_70 == 0) {
      local_60 = 0;
    }
    else {
      local_60 = FUN_00419170(iStack_70,*(undefined2 *)(local_58 + 6),auStack_38,
                              *(undefined2 *)((int)piVar4 + 6));
    }
    iVar5 = local_6c;
    local_8 = 0x12;
    local_58 = 2;
    FUN_00413b60(&local_58);
    iVar1 = iStack_68;
    if (iStack_68 == *(int *)(iVar5 + 0x2c)) {
      iStack_7c = 0;
      local_8 = CONCAT31(local_8._1_3_,0x18);
      iStack_70 = FUN_006f0300(0x10);
      iStack_88 = 0;
      if (iStack_70 != 0) {
        *(undefined4 *)(iStack_70 + 4) = 0;
        *(undefined4 *)(iStack_70 + 8) = 0;
        *(undefined4 *)(iStack_70 + 0xc) = 0;
        iStack_88 = iStack_70;
      }
      local_8 = 0x12;
      iStack_7c = iStack_88;
      FUN_00449610();
      auStack_8c[0] = 2;
      FUN_0041ed30(auStack_100,auStack_8c);
      FUN_009e2d48();
      return;
    }
    if (*(int *)(iStack_68 + 0x10) == 0) {
      if (uVar3 != 0) {
        FUN_00414770(uVar3);
        goto LAB_009e2d43;
      }
    }
    else {
      local_58 = 0;
      if (*(int *)(*(int *)(iStack_68 + 0x10) + 8) - *(int *)(*(int *)(iStack_68 + 0x10) + 4) >> 2
          == 0) {
LAB_009e2d17:
        FUN_00449610();
        FUN_009e2d48();
        return;
      }
      while( true ) {
        iVar5 = local_58 * 4;
        pppppppuVar7 = (undefined4 *******)appppppuStack_34[0];
        if (uStack_20 < 8) {
          pppppppuVar7 = appppppuStack_34;
        }
        iVar6 = FUN_00405bb0(pppppppuVar7);
        if ((iVar6 == 0) &&
           (*(uint *)(*(int *)(*(int *)(*(int *)(iVar1 + 0x10) + 4) + iVar5) + 0x24) ==
            (uint)*(ushort *)((int)local_64 + 6))) break;
        local_58 = local_58 + 1;
        iVar5 = *(int *)(iVar1 + 0x10);
        if ((uint)(*(int *)(iVar5 + 8) - *(int *)(iVar5 + 4) >> 2) <= local_58) goto LAB_009e2d17;
      }
      if (local_5c != 0) {
        FUN_00414770(local_5c);
LAB_009e2d43:
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    iVar1 = local_6c;
    iStack_68 = 0;
    piVar4 = (int *)FUN_00413b60(&iStack_68);
    iVar5 = *piVar4;
    iStack_68 = iVar5;
    if (iVar5 == *(int *)(iVar1 + 0x2c)) {
      iStack_70 = FUN_006f0760(0x10,"",0,(DAT_01725270 >> 3 & 1) == 0);
      iVar5 = 0;
      if (iStack_70 != 0) {
        *(undefined4 *)(iStack_70 + 4) = 0;
        *(undefined4 *)(iStack_70 + 8) = 0;
        *(undefined4 *)(iStack_70 + 0xc) = 0;
        iVar5 = iStack_70;
      }
      local_8 = CONCAT31((int3)((uint)local_8 >> 8),0x12);
      FUN_00449610();
      auStack_94[0] = 2;
      iStack_90 = iVar5;
      FUN_0041ed30(auStack_118,auStack_94);
    }
    else if (*(int *)(iVar5 + 0x10) == 0) {
joined_r0x009e2e85:
      if (local_60 != 0) {
        FUN_00414770(local_60);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      local_5c = 0;
      if (*(int *)(*(int *)(iVar5 + 0x10) + 8) - *(int *)(*(int *)(iVar5 + 0x10) + 4) >> 2 != 0) {
        do {
          iVar1 = local_5c * 4;
          pppppppuVar7 = (undefined4 *******)appppppuStack_34[0];
          if (uStack_20 < 8) {
            pppppppuVar7 = appppppuStack_34;
          }
          iVar6 = FUN_00405bb0(pppppppuVar7);
          if ((iVar6 == 0) &&
             (*(uint *)(*(int *)(*(int *)(*(int *)(iVar5 + 0x10) + 4) + iVar1) + 0x24) ==
              (uint)*(ushort *)((int)local_64 + 6))) goto joined_r0x009e2e85;
          local_5c = local_5c + 1;
        } while (local_5c <
                 (uint)(*(int *)(*(int *)(iVar5 + 0x10) + 8) - *(int *)(*(int *)(iVar5 + 0x10) + 4)
                       >> 2));
      }
      FUN_00449610();
    }
    local_8 = 0xffffffff;
    if (7 < uStack_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_20 = 7;
    uStack_24 = 0;
    appppppuStack_34[0] = (undefined4 ******)((uint)appppppuStack_34[0] & 0xffff0000);
    puVar2 = (uint *)local_14;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
009e2560 : PUSH EBP
009e2561 : MOV EBP,ESP
009e2563 : PUSH -0x1
009e2565 : PUSH 0xb4ed94
009e256a : MOV EAX,FS:[0x0]
009e2570 : PUSH EAX
009e2571 : SUB ESP,0x198
009e2577 : MOV EAX,[0x00d66fa0]
009e257c : XOR EAX,EBP
009e257e : MOV dword ptr [EBP + -0x18],EAX
009e2581 : PUSH EBX
009e2582 : PUSH ESI
009e2583 : PUSH EDI
009e2584 : PUSH EAX
009e2585 : LEA EAX,[EBP + -0xc]
009e2588 : MOV FS:[0x0],EAX
009e258e : MOV dword ptr [EBP + -0x10],ESP
009e2591 : MOV EAX,dword ptr [EBP + 0x8]
009e2594 : MOV dword ptr [EBP + -0x68],EAX
009e2597 : MOV EAX,[0x017247ac]
009e259c : TEST EAX,EAX
009e259e : JZ 0x009e26b4
009e25a4 : MOV EAX,dword ptr [EAX + 0x28]
009e25a7 : NEG EAX
009e25a9 : SBB EAX,EAX
009e25ab : MOV dword ptr [EBP + -0x7c],EAX
009e25ae : TEST EAX,EAX
009e25b0 : JNZ 0x009e25c5
009e25b2 : PUSH 0xc97c48
009e25b7 : MOV ESI,dword ptr [0x00da98e8]
009e25bd : CALL 0x008018d0
009e25c2 : ADD ESP,0x4
009e25c5 : CMP dword ptr [EBP + -0x7c],0x0
009e25c9 : JZ 0x009e2f7b
009e25cf : MOV EAX,[0x017247ac]
009e25d4 : TEST EAX,EAX
009e25d6 : JZ 0x009e25c5
009e25d8 : MOV dword ptr [EBP + -0x54],0x0
009e25df : LEA ECX,[EBP + -0x54]
009e25e2 : PUSH ECX
009e25e3 : LEA EDX,[EBP + -0x5c]
009e25e6 : PUSH EDX
009e25e7 : LEA ECX,[EBP + -0x7c]
009e25ea : PUSH ECX
009e25eb : CALL 0x00404160
009e25f0 : MOV EAX,dword ptr [EBP + -0x54]
009e25f3 : TEST EAX,EAX
009e25f5 : JZ 0x009e25c5
009e25f7 : MOV EDX,0x6600
009e25fc : CMP word ptr [EAX + 0x4],DX
009e2600 : JNZ 0x009e25c5
009e2602 : MOV EBX,dword ptr [EAX + 0xf0]
009e2608 : MOV dword ptr [EBP + -0x60],EBX
009e260b : TEST EBX,EBX
009e260d : JZ 0x009e25c5
009e260f : MOV AL,byte ptr [EBX + 0x40]
009e2612 : CMP AL,0x2
009e2614 : JNZ 0x009e2a7d
009e261a : MOV EAX,dword ptr [EBP + -0x54]
009e261d : ADD EAX,0x18
009e2620 : PUSH EAX
009e2621 : LEA ESI,[EBP + 0xffffff28]
009e2627 : CALL 0x0040eef0
009e262c : ADD ESP,0x4
009e262f : MOV dword ptr [EBP + -0x4],0x0
009e2636 : MOV ECX,dword ptr [0x0172491c]
009e263c : PUSH ECX
009e263d : MOV EDX,EAX
009e263f : LEA EDI,[EBP + -0x50]
009e2642 : CALL 0x00824120
009e2647 : MOV byte ptr [EBP + -0x4],0x2
009e264b : CMP dword ptr [EBP + 0xffffff40],0x8
009e2652 : JC 0x009e265f
009e2654 : MOV ECX,dword ptr [EBP + 0xffffff2c]
009e265a : CALL 0x006f04e0
009e265f : MOV dword ptr [EBP + 0xffffff40],0x7
009e2669 : XOR ESI,ESI
009e266b : MOV dword ptr [EBP + 0xffffff3c],ESI
009e2671 : XOR EDX,EDX
009e2673 : MOV word ptr [EBP + 0xffffff2c],DX
009e267a : MOV dword ptr [EBP + -0x58],ESI
009e267d : MOV dword ptr [EBP + -0x5c],ESI
009e2680 : MOV byte ptr [EBP + -0x4],0x3
009e2684 : PUSH 0x28
009e2686 : CALL 0x006f0300
009e268b : ADD ESP,0x4
009e268e : MOV dword ptr [EBP + -0x60],EAX
009e2691 : MOV byte ptr [EBP + -0x4],0x4
009e2695 : CMP EAX,ESI
009e2697 : JZ 0x009e26c0
009e2699 : MOVZX ECX,word ptr [EBX + 0x6]
009e269d : PUSH ECX
009e269e : LEA EDX,[EBP + -0x50]
009e26a1 : PUSH EDX
009e26a2 : MOV ECX,dword ptr [EBP + -0x54]
009e26a5 : MOVZX EDX,word ptr [ECX + 0x6]
009e26a9 : PUSH EDX
009e26aa : PUSH EAX
009e26ab : CALL 0x00419170
009e26b0 : MOV EDI,EAX
009e26b2 : JMP 0x009e26c2
009e26b4 : MOV dword ptr [EBP + -0x7c],0x0
009e26bb : JMP 0x009e25b2
009e26c0 : XOR EDI,EDI
009e26c2 : MOV byte ptr [EBP + -0x4],0x3
009e26c6 : MOV dword ptr [EBP + -0x58],EDI
009e26c9 : PUSH 0x28
009e26cb : CALL 0x006f0300
009e26d0 : ADD ESP,0x4
009e26d3 : MOV dword ptr [EBP + -0x60],EAX
009e26d6 : MOV byte ptr [EBP + -0x4],0x5
009e26da : CMP EAX,ESI
009e26dc : JZ 0x009e26fa
009e26de : MOVZX ECX,word ptr [EBX + 0x6]
009e26e2 : PUSH ECX
009e26e3 : LEA EDX,[EBP + -0x50]
009e26e6 : PUSH EDX
009e26e7 : MOV ECX,dword ptr [EBP + -0x54]
009e26ea : MOVZX EDX,word ptr [ECX + 0x6]
009e26ee : PUSH EDX
009e26ef : PUSH EAX
009e26f0 : CALL 0x00419170
009e26f5 : MOV dword ptr [EBP + -0x54],EAX
009e26f8 : JMP 0x009e26fd
009e26fa : MOV dword ptr [EBP + -0x54],ESI
009e26fd : MOV byte ptr [EBP + -0x4],0x3
009e2701 : MOV EAX,dword ptr [EBP + -0x54]
009e2704 : MOV dword ptr [EBP + -0x5c],EAX
009e2707 : MOV dword ptr [EBP + -0x4],0x2
009e270e : MOV dword ptr [EBP + -0x60],0x1
009e2715 : MOV EBX,dword ptr [EBP + -0x68]
009e2718 : LEA ESI,[EBX + 0x28]
009e271b : LEA ECX,[EBP + -0x60]
009e271e : PUSH ECX
009e271f : LEA EAX,[EBP + -0x80]
009e2722 : MOV ECX,ESI
009e2724 : CALL 0x00413b60
009e2729 : MOV EAX,dword ptr [EBX + 0x2c]
009e272c : MOV ECX,dword ptr [EBP + -0x80]
009e272f : XOR EBX,EBX
009e2731 : CMP ECX,EAX
009e2733 : JNZ 0x009e2836
009e2739 : MOV dword ptr [EBP + -0x74],EBX
009e273c : MOV byte ptr [EBP + -0x4],0x8
009e2740 : PUSH 0x10
009e2742 : CALL 0x006f0300
009e2747 : ADD ESP,0x4
009e274a : MOV dword ptr [EBP + -0x60],EAX
009e274d : MOV byte ptr [EBP + -0x4],0x9
009e2751 : CMP EAX,EBX
009e2753 : JZ 0x009e2760
009e2755 : MOV dword ptr [EAX + 0x4],EBX
009e2758 : MOV dword ptr [EAX + 0x8],EBX
009e275b : MOV dword ptr [EAX + 0xc],EBX
009e275e : MOV EBX,EAX
009e2760 : MOV byte ptr [EBP + -0x4],0x8
009e2764 : MOV dword ptr [EBP + -0x74],EBX
009e2767 : MOV dword ptr [EBP + -0x4],0x2
009e276e : LEA EDI,[EBP + -0x58]
009e2771 : MOV EDX,EBX
009e2773 : CALL 0x00449610
009e2778 : MOV EDX,0x1
009e277d : MOV word ptr [EBP + 0xffffff60],DX
009e2784 : MOV dword ptr [EBP + 0xffffff64],EBX
009e278a : LEA EAX,[EBP + 0xffffff60]
009e2790 : PUSH EAX
009e2791 : LEA ECX,[EBP + 0xfffffefc]
009e2797 : PUSH ECX
009e2798 : MOV EAX,ESI
009e279a : CALL 0x0041ed30
009e279f : XOR EBX,EBX
009e27a1 : JMP 0x009e285c
009e2836 : MOV ECX,dword ptr [ECX + 0x10]
009e2839 : CMP ECX,EBX
009e283b : JZ 0x009e284b
009e283d : LEA EDI,[EBP + -0x58]
009e2840 : MOV EDX,ECX
009e2842 : CALL 0x00449610
009e2847 : XOR EBX,EBX
009e2849 : JMP 0x009e285c
009e284b : CMP EDI,EBX
009e284d : JZ 0x009e285c
009e284f : PUSH EDI
009e2850 : CALL 0x00414770
009e2855 : MOV ECX,EDI
009e2857 : CALL 0x006f04e0
