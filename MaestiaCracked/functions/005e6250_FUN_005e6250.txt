PROGRAM  : Maestia.exe
FUNCTION : FUN_005e6250
ENTRY    : 005e6250
BODY     : [[005e6250, 005e636f]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005e6250(uint param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  LONG LVar2;
  int in_ECX;
  uint uVar3;
  undefined4 *local_14;
  uint *local_10;
  uint local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  if ((*(int *)(in_ECX + 0xc) == 0) || (param_1 == 0)) {
    return 0;
  }
  FUN_0051c480(param_1);
  local_14 = &param_1;
  iVar1 = FUN_005e5b90(&local_14);
  if ((iVar1 != 0) && (iVar1 != -4)) {
    uVar3 = param_1 & 0xfffffffc;
    LVar2 = InterlockedExchangeAdd((LONG *)(uVar3 + 4),-1);
    if (LVar2 == 1) {
      FUN_00515cf0(uVar3);
    }
    return 0;
  }
  FUN_0051c480(param_2);
  FUN_0051c600(&param_2);
  local_8 = param_4;
  uVar3 = param_2 & 0xfffffffc;
  local_4 = param_3;
  LVar2 = InterlockedExchangeAdd((LONG *)(uVar3 + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar3);
  }
  local_14 = &param_1;
  local_10 = &local_c;
  FUN_005e6170(*(undefined4 *)(in_ECX + 0xc),&local_14);
  LVar2 = InterlockedExchangeAdd((LONG *)((local_c & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_c & 0xfffffffc);
  }
  uVar3 = param_1 & 0xfffffffc;
  LVar2 = InterlockedExchangeAdd((LONG *)(uVar3 + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar3);
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
005e6250 : SUB ESP,0x14
005e6253 : PUSH EBX
005e6254 : MOV EBX,ECX
005e6256 : CMP dword ptr [EBX + 0xc],0x0
005e625a : JZ 0x005e6367
005e6260 : MOV EAX,dword ptr [ESP + 0x1c]
005e6264 : TEST EAX,EAX
005e6266 : JZ 0x005e6367
005e626c : PUSH ESI
005e626d : PUSH EAX
005e626e : LEA ECX,[ESP + 0x24]
005e6272 : CALL 0x0051c480
005e6277 : MOV ECX,dword ptr [EBX + 0xc]
005e627a : LEA EDX,[ESP + 0x8]
005e627e : LEA EAX,[ESP + 0x20]
005e6282 : PUSH EDX
005e6283 : MOV dword ptr [ESP + 0xc],EAX
005e6287 : CALL 0x005e5b90
005e628c : TEST EAX,EAX
005e628e : JZ 0x005e62bd
005e6290 : ADD EAX,0x4
005e6293 : JZ 0x005e62bd
005e6295 : MOV ESI,dword ptr [ESP + 0x20]
005e6299 : AND ESI,0xfffffffc
005e629c : PUSH -0x1
005e629e : LEA EAX,[ESI + 0x4]
005e62a1 : PUSH EAX
005e62a2 : CALL dword ptr [0x00b851cc]
005e62a8 : SUB EAX,0x1
005e62ab : JNZ 0x005e62b3
005e62ad : PUSH ESI
005e62ae : CALL 0x00515cf0
005e62b3 : POP ESI
005e62b4 : XOR AL,AL
005e62b6 : POP EBX
005e62b7 : ADD ESP,0x14
005e62ba : RET 0x10
005e62bd : MOV ECX,dword ptr [ESP + 0x24]
005e62c1 : PUSH EDI
005e62c2 : PUSH ECX
005e62c3 : LEA ECX,[ESP + 0x2c]
005e62c7 : CALL 0x0051c480
005e62cc : LEA EDX,[ESP + 0x28]
005e62d0 : PUSH EDX
005e62d1 : LEA ECX,[ESP + 0x18]
005e62d5 : CALL 0x0051c600
005e62da : FLD float ptr [ESP + 0x30]
005e62de : MOV ESI,dword ptr [ESP + 0x28]
005e62e2 : FSTP float ptr [ESP + 0x18]
005e62e6 : MOV EAX,dword ptr [ESP + 0x2c]
005e62ea : MOV EDI,dword ptr [0x00b851cc]
005e62f0 : AND ESI,0xfffffffc
005e62f3 : PUSH -0x1
005e62f5 : LEA ECX,[ESI + 0x4]
005e62f8 : PUSH ECX
005e62f9 : MOV dword ptr [ESP + 0x24],EAX
005e62fd : CALL EDI
005e62ff : SUB EAX,0x1
005e6302 : JNZ 0x005e630a
005e6304 : PUSH ESI
005e6305 : CALL 0x00515cf0
005e630a : MOV ECX,dword ptr [EBX + 0xc]
005e630d : LEA EDX,[ESP + 0x24]
005e6311 : MOV dword ptr [ESP + 0xc],EDX
005e6315 : LEA EDX,[ESP + 0xc]
005e6319 : PUSH EDX
005e631a : LEA EAX,[ESP + 0x18]
005e631e : PUSH ECX
005e631f : MOV dword ptr [ESP + 0x18],EAX
005e6323 : CALL 0x005e6170
005e6328 : MOV ESI,dword ptr [ESP + 0x14]
005e632c : AND ESI,0xfffffffc
005e632f : PUSH -0x1
005e6331 : LEA EAX,[ESI + 0x4]
005e6334 : PUSH EAX
005e6335 : CALL EDI
005e6337 : SUB EAX,0x1
005e633a : JNZ 0x005e6342
005e633c : PUSH ESI
005e633d : CALL 0x00515cf0
005e6342 : MOV ESI,dword ptr [ESP + 0x24]
005e6346 : AND ESI,0xfffffffc
005e6349 : PUSH -0x1
005e634b : LEA ECX,[ESI + 0x4]
005e634e : PUSH ECX
005e634f : CALL EDI
005e6351 : SUB EAX,0x1
005e6354 : POP EDI
005e6355 : JNZ 0x005e635d
005e6357 : PUSH ESI
005e6358 : CALL 0x00515cf0
005e635d : POP ESI
005e635e : MOV AL,0x1
005e6360 : POP EBX
005e6361 : ADD ESP,0x14
005e6364 : RET 0x10
005e6367 : XOR AL,AL
005e6369 : POP EBX
005e636a : ADD ESP,0x14
005e636d : RET 0x10
