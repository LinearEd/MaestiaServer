PROGRAM  : Maestia.exe
FUNCTION : FUN_00592380
ENTRY    : 00592380
BODY     : [[00592380, 00592435]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00592380(void)

{
  int *piVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 *in_ECX;
  uint uVar5;
  uint uVar6;
  undefined4 *local_4;
  
  piVar1 = in_ECX + 4;
  *piVar1 = 0;
  in_ECX[5] = 0;
  in_ECX[6] = 0;
  in_ECX[7] = 0;
  local_4 = in_ECX;
  puVar3 = (undefined4 *)FUN_00515d60(in_ECX,0x84,0);
  if ((uint)in_ECX[6] < 0xf) {
    if (*piVar1 == 0) {
      local_4 = (undefined4 *)0x2;
      iVar4 = FUN_00515d60(piVar1,0x40,&local_4);
    }
    else {
      iVar4 = FUN_00515c80(*piVar1,0x40);
    }
    *piVar1 = iVar4;
    in_ECX[6] = 0x10;
  }
  uVar5 = in_ECX[5] + 1;
  if (uVar5 < (uint)in_ECX[5]) {
    uVar6 = uVar5;
    if ((uint)in_ECX[6] >> 1 <= uVar5) goto LAB_00592403;
  }
  else {
    if (uVar5 < (uint)in_ECX[6]) goto LAB_00592403;
    uVar6 = (uVar5 >> 2) + uVar5;
  }
  FUN_005b5ef0(piVar1,uVar6);
LAB_00592403:
  in_ECX[5] = uVar5;
  puVar2 = (undefined4 *)(*piVar1 + -4 + uVar5 * 4);
  if (puVar2 != (undefined4 *)0x0) {
    *puVar2 = puVar3;
  }
  in_ECX[1] = puVar3;
  in_ECX[2] = puVar3 + 0x20;
  *in_ECX = puVar3;
  in_ECX[3] = puVar3;
  if (puVar3 != (undefined4 *)0x0) {
    *puVar3 = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00592380 : PUSH ECX
00592381 : PUSH EBX
00592382 : PUSH EBP
00592383 : PUSH ESI
00592384 : PUSH EDI
00592385 : XOR EDI,EDI
00592387 : MOV EBX,ECX
00592389 : PUSH EDI
0059238a : LEA ESI,[EBX + 0x10]
0059238d : MOV dword ptr [ESI],EDI
0059238f : MOV dword ptr [ESI + 0x4],EDI
00592392 : PUSH 0x84
00592397 : MOV dword ptr [ESI + 0x8],EDI
0059239a : PUSH EBX
0059239b : MOV dword ptr [EBX + 0x1c],EDI
0059239e : CALL 0x00515d60
005923a3 : CMP dword ptr [ESI + 0x8],0xf
005923a7 : MOV EBP,EAX
005923a9 : JNC 0x005923d9
005923ab : MOV EAX,dword ptr [ESI]
005923ad : CMP EAX,EDI
005923af : JZ 0x005923bb
005923b1 : PUSH 0x40
005923b3 : PUSH EAX
005923b4 : CALL 0x00515c80
005923b9 : JMP 0x005923d0
005923bb : LEA EAX,[ESP + 0x10]
005923bf : PUSH EAX
005923c0 : PUSH 0x40
005923c2 : PUSH ESI
005923c3 : MOV dword ptr [ESP + 0x1c],0x2
005923cb : CALL 0x00515d60
005923d0 : MOV dword ptr [ESI],EAX
005923d2 : MOV dword ptr [ESI + 0x8],0x10
005923d9 : MOV EDI,dword ptr [ESI + 0x4]
005923dc : INC EDI
005923dd : CMP EDI,dword ptr [ESI + 0x4]
005923e0 : JNC 0x005923ee
005923e2 : MOV ECX,dword ptr [ESI + 0x8]
005923e5 : SHR ECX,0x1
005923e7 : CMP EDI,ECX
005923e9 : JNC 0x00592403
005923eb : PUSH EDI
005923ec : JMP 0x005923fb
005923ee : CMP EDI,dword ptr [ESI + 0x8]
005923f1 : JC 0x00592403
005923f3 : MOV EDX,EDI
005923f5 : SHR EDX,0x2
005923f8 : ADD EDX,EDI
005923fa : PUSH EDX
005923fb : PUSH ESI
005923fc : MOV ECX,ESI
005923fe : CALL 0x005b5ef0
00592403 : MOV EAX,dword ptr [ESI]
00592405 : MOV dword ptr [ESI + 0x4],EDI
00592408 : LEA EDI,[EAX + EDI*0x4 + -0x4]
0059240c : TEST EDI,EDI
0059240e : JZ 0x00592412
00592410 : MOV dword ptr [EDI],EBP
00592412 : LEA ECX,[EBP + 0x80]
00592418 : MOV dword ptr [EBX + 0x4],EBP
0059241b : MOV dword ptr [EBX + 0x8],ECX
0059241e : MOV dword ptr [EBX],EBP
00592420 : MOV dword ptr [EBX + 0xc],EBP
00592423 : MOV EAX,EBX
00592425 : TEST EBP,EBP
00592427 : JZ 0x00592430
00592429 : MOV dword ptr [EBP],0x0
00592430 : POP EDI
00592431 : POP ESI
00592432 : POP EBP
00592433 : POP EBX
00592434 : POP ECX
00592435 : RET
