PROGRAM  : Maestia.exe
FUNCTION : FUN_009048f0
ENTRY    : 009048f0
BODY     : [[009048f0, 00904a17]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009048f0(int param_1,int param_2,undefined4 param_3)

{
  undefined1 uVar1;
  char cVar2;
  undefined2 uVar3;
  int *piVar4;
  int iVar5;
  undefined4 uVar6;
  int *unaff_ESI;
  bool bVar7;
  int local_8;
  
  bVar7 = false;
  if (unaff_ESI != (int *)0x0) {
    if ((char)((uint)unaff_ESI[4] >> 0x18) == '\x06') {
      piVar4 = (int *)FUN_004049b0(unaff_ESI[4]);
      if (piVar4 != (int *)0x0) {
        iVar5 = (**(code **)(*piVar4 + 0x44))();
        bVar7 = iVar5 != 0;
      }
    }
    piVar4 = *(int **)(*DAT_00da9894 + 0x114);
    if (*(uint *)(param_2 + 0x18) < 8) {
      local_8 = param_2 + 4;
    }
    else {
      local_8 = *(int *)(param_2 + 4);
    }
    iVar5 = *piVar4;
    uVar1 = (**(code **)(*unaff_ESI + 0x30))(bVar7,(uint)unaff_ESI[0x48] >> 2 & 1);
    cVar2 = (**(code **)(*unaff_ESI + 0x7c))(uVar1);
    uVar3 = (**(code **)(*unaff_ESI + 0x40))(param_3,cVar2 == '\0');
    (**(code **)(iVar5 + 4))(piVar4,"StorageInsertItem","%ls,%d,%d,%b,%b,%b,%d",local_8,uVar3);
    uVar6 = FUN_00a08b70();
    if ((*DAT_00da9894 != 0) && (piVar4 = *(int **)(*DAT_00da9894 + 0x114), piVar4 != (int *)0x0)) {
      (**(code **)(*piVar4 + 4))(piVar4,"StorageItemQuality","%d,%d",param_3,uVar6);
    }
    if (*(char *)(param_1 + 0x32) != '\0') {
      (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
                (*(int **)(*DAT_00da9894 + 0x114),"StorageSlotMoveEffect",&DAT_00c64394,param_3);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
009048f0 : PUSH EBP
009048f1 : MOV EBP,ESP
009048f3 : PUSH ECX
009048f4 : PUSH EBX
009048f5 : MOV EBX,dword ptr [EBP + 0xc]
009048f8 : MOV byte ptr [EBP + 0xf],0x0
009048fc : TEST ESI,ESI
009048fe : JZ 0x00904a11
00904904 : MOV EAX,dword ptr [ESI + 0x10]
00904907 : MOV ECX,EAX
00904909 : SHR ECX,0x18
0090490c : CMP CL,0x6
0090490f : JNZ 0x0090492d
00904911 : PUSH EAX
00904912 : CALL 0x004049b0
00904917 : ADD ESP,0x4
0090491a : TEST EAX,EAX
0090491c : JZ 0x0090492d
0090491e : MOV EDX,dword ptr [EAX]
00904920 : MOV ECX,EAX
00904922 : MOV EAX,dword ptr [EDX + 0x44]
00904925 : CALL EAX
00904927 : TEST EAX,EAX
00904929 : SETNZ byte ptr [EBP + 0xf]
0090492d : MOV EAX,dword ptr [ESI + 0x120]
00904933 : MOV ECX,dword ptr [0x00da9894]
00904939 : MOV EDX,dword ptr [ECX]
0090493b : SHR EAX,0x2
0090493e : AND EAX,0x1
00904941 : CMP dword ptr [EBX + 0x18],0x8
00904945 : PUSH EDI
00904946 : MOV EDI,dword ptr [EDX + 0x114]
0090494c : JC 0x00904956
0090494e : MOV ECX,dword ptr [EBX + 0x4]
00904951 : MOV dword ptr [EBP + -0x4],ECX
00904954 : JMP 0x0090495c
00904956 : ADD EBX,0x4
00904959 : MOV dword ptr [EBP + -0x4],EBX
0090495c : MOVZX EDX,byte ptr [EBP + 0xf]
00904960 : MOV EBX,dword ptr [EDI]
00904962 : PUSH EAX
00904963 : MOV EAX,dword ptr [ESI]
00904965 : PUSH EDX
00904966 : MOV EDX,dword ptr [EAX + 0x30]
00904969 : MOV ECX,ESI
0090496b : CALL EDX
0090496d : MOV EDX,dword ptr [ESI]
0090496f : MOVZX EAX,AL
00904972 : PUSH EAX
00904973 : MOV EAX,dword ptr [EDX + 0x7c]
00904976 : MOV ECX,ESI
00904978 : CALL EAX
0090497a : MOV EDX,dword ptr [EBP + 0x10]
0090497d : XOR ECX,ECX
0090497f : TEST AL,AL
00904981 : MOV EAX,dword ptr [ESI]
00904983 : SETZ CL
00904986 : PUSH ECX
00904987 : PUSH EDX
00904988 : MOV EDX,dword ptr [EAX + 0x40]
0090498b : MOV ECX,ESI
0090498d : CALL EDX
0090498f : MOV ECX,dword ptr [EBP + -0x4]
00904992 : MOV EDX,dword ptr [EBX + 0x4]
00904995 : MOVZX EAX,AX
00904998 : PUSH EAX
00904999 : PUSH ECX
0090499a : PUSH 0xc6434c
0090499f : PUSH 0xc64364
009049a4 : PUSH EDI
009049a5 : CALL EDX
009049a7 : ADD ESP,0x28
009049aa : MOV ECX,ESI
009049ac : CALL 0x00a08b70
009049b1 : MOV ECX,dword ptr [0x00da9894]
009049b7 : MOV ECX,dword ptr [ECX]
009049b9 : POP EDI
009049ba : TEST ECX,ECX
009049bc : JZ 0x009049e2
009049be : MOV ECX,dword ptr [ECX + 0x114]
009049c4 : TEST ECX,ECX
009049c6 : JZ 0x009049e2
009049c8 : MOV EDX,dword ptr [ECX]
009049ca : PUSH EAX
009049cb : MOV EAX,dword ptr [EBP + 0x10]
009049ce : PUSH EAX
009049cf : PUSH 0xc64378
009049d4 : PUSH 0xc64380
009049d9 : PUSH ECX
009049da : MOV ECX,dword ptr [EDX + 0x4]
009049dd : CALL ECX
009049df : ADD ESP,0x14
009049e2 : MOV EDX,dword ptr [EBP + 0x8]
009049e5 : CMP byte ptr [EDX + 0x32],0x0
009049e9 : JZ 0x00904a11
009049eb : MOV EAX,[0x00da9894]
009049f0 : MOV ECX,dword ptr [EAX]
009049f2 : MOV EAX,dword ptr [ECX + 0x114]
009049f8 : MOV ECX,dword ptr [EBP + 0x10]
009049fb : MOV EDX,dword ptr [EAX]
009049fd : MOV EDX,dword ptr [EDX + 0x4]
00904a00 : PUSH ECX
00904a01 : PUSH 0xc64394
00904a06 : PUSH 0xc64398
00904a0b : PUSH EAX
00904a0c : CALL EDX
00904a0e : ADD ESP,0x10
00904a11 : POP EBX
00904a12 : MOV ESP,EBP
00904a14 : POP EBP
00904a15 : RET 0xc
