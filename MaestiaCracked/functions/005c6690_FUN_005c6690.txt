PROGRAM  : Maestia.exe
FUNCTION : FUN_005c6690
ENTRY    : 005c6690
BODY     : [[005c6690, 005c6717]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c6690(int *param_1)

{
  int *piVar1;
  int *piVar2;
  undefined4 uVar3;
  int in_ECX;
  
  if (param_1 != (int *)0x0) {
    piVar2 = (int *)param_1[0x20];
    if (piVar2 == (int *)0x0) {
      piVar2 = (int *)FUN_00520df0();
    }
    if (piVar2 != (int *)0x0) {
      *piVar2 = *piVar2 + 1;
    }
    piVar1 = *(int **)(in_ECX + 0x34);
    if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 < 1)) {
      FUN_0051d070();
      FUN_00515cf0(piVar1);
    }
    *(int **)(in_ECX + 0x34) = piVar2;
    uVar3 = (**(code **)(*param_1 + 0x40))();
    *(undefined4 *)(in_ECX + 0x30) = uVar3;
    return;
  }
  *(undefined4 *)(in_ECX + 0x30) = 0;
  piVar2 = *(int **)(in_ECX + 0x34);
  if ((piVar2 != (int *)0x0) && (*piVar2 = *piVar2 + -1, *piVar2 < 1)) {
    FUN_0051d070();
    FUN_00515cf0(piVar2);
  }
  *(undefined4 *)(in_ECX + 0x34) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005c6690 : PUSH EBX
005c6691 : MOV EBX,dword ptr [ESP + 0x8]
005c6695 : PUSH ESI
005c6696 : PUSH EDI
005c6697 : MOV EDI,ECX
005c6699 : TEST EBX,EBX
005c669b : JZ 0x005c66e9
005c669d : MOV EAX,dword ptr [EBX + 0x80]
005c66a3 : PUSH EBP
005c66a4 : TEST EAX,EAX
005c66a6 : JNZ 0x005c66af
005c66a8 : MOV ECX,EBX
005c66aa : CALL 0x00520df0
005c66af : MOV EBP,EAX
005c66b1 : TEST EBP,EBP
005c66b3 : JZ 0x005c66b8
005c66b5 : INC dword ptr [EBP]
005c66b8 : MOV ESI,dword ptr [EDI + 0x34]
005c66bb : TEST ESI,ESI
005c66bd : JZ 0x005c66d3
005c66bf : DEC dword ptr [ESI]
005c66c1 : CMP dword ptr [ESI],0x0
005c66c4 : JG 0x005c66d3
005c66c6 : MOV ECX,ESI
005c66c8 : CALL 0x0051d070
005c66cd : PUSH ESI
005c66ce : CALL 0x00515cf0
005c66d3 : MOV dword ptr [EDI + 0x34],EBP
005c66d6 : MOV EAX,dword ptr [EBX]
005c66d8 : MOV EDX,dword ptr [EAX + 0x40]
005c66db : MOV ECX,EBX
005c66dd : CALL EDX
005c66df : POP EBP
005c66e0 : MOV dword ptr [EDI + 0x30],EAX
005c66e3 : POP EDI
005c66e4 : POP ESI
005c66e5 : POP EBX
005c66e6 : RET 0x4
005c66e9 : MOV dword ptr [EDI + 0x30],0x0
005c66f0 : MOV ESI,dword ptr [EDI + 0x34]
005c66f3 : TEST ESI,ESI
005c66f5 : JZ 0x005c670b
005c66f7 : DEC dword ptr [ESI]
005c66f9 : CMP dword ptr [ESI],0x0
005c66fc : JG 0x005c670b
005c66fe : MOV ECX,ESI
005c6700 : CALL 0x0051d070
005c6705 : PUSH ESI
005c6706 : CALL 0x00515cf0
005c670b : MOV dword ptr [EDI + 0x34],0x0
005c6712 : POP EDI
005c6713 : POP ESI
005c6714 : POP EBX
005c6715 : RET 0x4
