PROGRAM  : Maestia.exe
FUNCTION : FUN_0082f790
ENTRY    : 0082f790
BODY     : [[0082f790, 0082fa44]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0082f790(int param_1,undefined4 param_2)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  uint local_58;
  undefined1 local_54 [12];
  undefined1 local_48 [4];
  undefined4 local_44;
  undefined4 local_40;
  uint local_3c;
  undefined1 local_38 [4];
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined1 local_28 [12];
  undefined1 local_1c [12];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b43f75;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 0x6c) == 0) {
    local_34 = 0;
    local_30 = 0;
    local_2c = 0;
    local_8 = 1;
    FUN_0044af20(local_28);
    local_8._0_1_ = 2;
    FUN_00414880(local_1c);
    local_44 = 0;
    local_40 = 0;
    local_3c = 0;
    local_8._0_1_ = 4;
    iVar3 = FUN_0082e9e0(local_38);
    if (iVar3 == 0) {
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar4 = FUN_00404750(L"File not found %S\n",param_2);
      local_8._0_1_ = 5;
      (**(code **)(*piVar1 + 0x44))(uVar4,3);
      local_8 = CONCAT31(local_8._1_3_,4);
      if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8._0_1_ = 3;
      FUN_0044b1c0(local_48);
      local_8._0_1_ = 2;
      FUN_004146b0(local_1c);
    }
    else {
      iVar3 = FUN_0082eeb0(local_38,local_28);
      if (iVar3 != 0) {
        FUN_0044cb70(param_1 + 0xf8,local_38);
        if ((undefined1 *)(param_1 + 0x124) != local_28) {
          FUN_0044b900(**(undefined4 **)(param_1 + 0x128),*(undefined4 **)(param_1 + 0x128));
          FUN_0044d3f0(local_28);
        }
        if ((undefined1 *)(param_1 + 0x118) != local_1c) {
          FUN_00415570(**(undefined4 **)(param_1 + 0x11c),*(undefined4 **)(param_1 + 0x11c));
          FUN_0044d160(local_1c);
        }
        FUN_0044cd40(param_1 + 0x108,local_48);
        piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar4 = FUN_00404750(L"Macro built from file \'%S\': # of function %d, # of variables %d\n",
                             param_2,*(undefined4 *)(param_1 + 300),*(undefined4 *)(param_1 + 0x120)
                            );
        local_8._0_1_ = 6;
        (**(code **)(*piVar1 + 0x44))(uVar4,0x13);
        local_8._0_1_ = 4;
        FUN_00406560();
        local_8._0_1_ = 3;
        FUN_0044b1c0(local_48);
        local_8._0_1_ = 2;
        FUN_004146b0(local_1c);
        local_8 = CONCAT31(local_8._1_3_,1);
        FUN_0044a950(local_28);
        local_8 = 0xffffffff;
        FUN_004042c0();
        ExceptionList = local_10;
        return 1;
      }
      local_8._0_1_ = 3;
      FUN_0044b1c0(local_48);
      local_8._0_1_ = 2;
      FUN_004146b0(local_1c);
    }
    local_8 = CONCAT31(local_8._1_3_,1);
    FUN_0044a950(local_28);
    local_8 = 0xffffffff;
    FUN_004042c0();
  }
  else {
    FUN_00406460(L"Stop running macro first");
    local_8 = 0;
    (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_54,3,uVar2);
    local_8 = 0xffffffff;
    if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0082f790 : PUSH EBP
0082f791 : MOV EBP,ESP
0082f793 : PUSH -0x1
0082f795 : PUSH 0xb43f75
0082f79a : MOV EAX,FS:[0x0]
0082f7a0 : PUSH EAX
0082f7a1 : SUB ESP,0x64
0082f7a4 : PUSH EBX
0082f7a5 : PUSH ESI
0082f7a6 : PUSH EDI
0082f7a7 : MOV EAX,[0x00d66fa0]
0082f7ac : XOR EAX,EBP
0082f7ae : PUSH EAX
0082f7af : LEA EAX,[EBP + -0xc]
0082f7b2 : MOV FS:[0x0],EAX
0082f7b8 : MOV EBX,dword ptr [EBP + 0x8]
0082f7bb : XOR EDI,EDI
0082f7bd : CMP dword ptr [EBX + 0x6c],EDI
0082f7c0 : JZ 0x0082f816
0082f7c2 : PUSH 0xc35818
0082f7c7 : LEA ECX,[EBP + -0x50]
0082f7ca : CALL 0x00406460
0082f7cf : MOV dword ptr [EBP + -0x4],EDI
0082f7d2 : MOV EAX,[0x00da9894]
0082f7d7 : MOV EAX,dword ptr [EAX]
0082f7d9 : MOV ECX,dword ptr [EAX + 0x1a8]
0082f7df : MOV EDX,dword ptr [ECX]
0082f7e1 : MOV EDX,dword ptr [EDX + 0x44]
0082f7e4 : PUSH 0x3
0082f7e6 : LEA EAX,[EBP + -0x50]
0082f7e9 : PUSH EAX
0082f7ea : CALL EDX
0082f7ec : MOV dword ptr [EBP + -0x4],0xffffffff
0082f7f3 : CMP dword ptr [EBP + -0x38],0x8
0082f7f7 : JC 0x0082f801
0082f7f9 : MOV ECX,dword ptr [EBP + -0x4c]
0082f7fc : CALL 0x006f04e0
0082f801 : XOR EAX,EAX
0082f803 : MOV dword ptr [EBP + -0x38],0x7
0082f80a : MOV dword ptr [EBP + -0x3c],EDI
0082f80d : MOV word ptr [EBP + -0x4c],AX
0082f811 : JMP 0x0082fa2f
0082f816 : MOV dword ptr [EBP + -0x30],EDI
0082f819 : MOV dword ptr [EBP + -0x2c],EDI
0082f81c : MOV dword ptr [EBP + -0x28],EDI
0082f81f : MOV dword ptr [EBP + -0x4],0x1
0082f826 : LEA ECX,[EBP + -0x24]
0082f829 : PUSH ECX
0082f82a : CALL 0x0044af20
0082f82f : MOV byte ptr [EBP + -0x4],0x2
0082f833 : LEA EDX,[EBP + -0x18]
0082f836 : PUSH EDX
0082f837 : CALL 0x00414880
0082f83c : MOV byte ptr [EBP + -0x4],0x3
0082f840 : MOV dword ptr [EBP + -0x40],EDI
0082f843 : MOV dword ptr [EBP + -0x3c],EDI
0082f846 : MOV dword ptr [EBP + -0x38],EDI
0082f849 : MOV byte ptr [EBP + -0x4],0x4
0082f84d : MOV ESI,dword ptr [EBP + 0xc]
0082f850 : LEA EAX,[EBP + -0x34]
0082f853 : PUSH EAX
0082f854 : MOV ECX,ESI
0082f856 : CALL 0x0082e9e0
0082f85b : TEST EAX,EAX
0082f85d : JNZ 0x0082f8d7
0082f85f : MOV ECX,dword ptr [0x00da9894]
0082f865 : MOV EAX,dword ptr [ECX]
0082f867 : MOV EBX,dword ptr [EAX + 0x1a8]
0082f86d : PUSH ESI
0082f86e : PUSH 0xc3584c
0082f873 : LEA ESI,[EBP + -0x6c]
0082f876 : CALL 0x00404750
0082f87b : ADD ESP,0x8
0082f87e : MOV byte ptr [EBP + -0x4],0x5
0082f882 : MOV EDX,dword ptr [EBX]
0082f884 : PUSH 0x3
0082f886 : PUSH EAX
0082f887 : MOV EAX,dword ptr [EDX + 0x44]
0082f88a : MOV ECX,EBX
0082f88c : CALL EAX
0082f88e : MOV byte ptr [EBP + -0x4],0x4
0082f892 : CMP dword ptr [EBP + -0x54],0x8
0082f896 : JC 0x0082f8a0
0082f898 : MOV ECX,dword ptr [EBP + -0x68]
0082f89b : CALL 0x006f04e0
0082f8a0 : XOR ECX,ECX
0082f8a2 : MOV dword ptr [EBP + -0x54],0x7
0082f8a9 : MOV dword ptr [EBP + -0x58],EDI
0082f8ac : MOV word ptr [EBP + -0x68],CX
0082f8b0 : MOV byte ptr [EBP + -0x4],0x3
0082f8b4 : LEA EDX,[EBP + -0x44]
0082f8b7 : PUSH EDX
0082f8b8 : CALL 0x0044b1c0
0082f8bd : MOV byte ptr [EBP + -0x4],0x2
0082f8c1 : LEA EAX,[EBP + -0x18]
0082f8c4 : PUSH EAX
0082f8c5 : CALL 0x004146b0
0082f8ca : MOV byte ptr [EBP + -0x4],0x1
0082f8ce : LEA ECX,[EBP + -0x24]
0082f8d1 : PUSH ECX
0082f8d2 : JMP 0x0082fa1b
0082f8d7 : LEA EDX,[EBP + -0x24]
0082f8da : PUSH EDX
0082f8db : LEA EAX,[EBP + -0x34]
0082f8de : PUSH EAX
0082f8df : LEA EDX,[EBP + -0x44]
0082f8e2 : LEA ECX,[EBP + -0x18]
0082f8e5 : CALL 0x0082eeb0
0082f8ea : TEST EAX,EAX
0082f8ec : JZ 0x0082f9f9
0082f8f2 : LEA ECX,[EBP + -0x34]
0082f8f5 : PUSH ECX
0082f8f6 : LEA EDX,[EBX + 0xf8]
0082f8fc : PUSH EDX
0082f8fd : CALL 0x0044cb70
0082f902 : LEA ESI,[EBX + 0x124]
0082f908 : LEA EAX,[EBP + -0x24]
0082f90b : CMP ESI,EAX
0082f90d : JZ 0x0082f929
0082f90f : MOV EAX,dword ptr [ESI + 0x4]
0082f912 : MOV ECX,dword ptr [EAX]
0082f914 : PUSH EAX
0082f915 : PUSH ECX
0082f916 : LEA EDI,[EBP + 0x8]
0082f919 : CALL 0x0044b900
0082f91e : LEA ECX,[EBP + -0x24]
0082f921 : PUSH ECX
0082f922 : MOV EAX,ESI
0082f924 : CALL 0x0044d3f0
0082f929 : LEA ESI,[EBX + 0x118]
0082f92f : LEA EDX,[EBP + -0x18]
0082f932 : CMP ESI,EDX
0082f934 : JZ 0x0082f950
0082f936 : MOV EAX,dword ptr [ESI + 0x4]
0082f939 : MOV ECX,dword ptr [EAX]
0082f93b : PUSH EAX
0082f93c : PUSH ECX
0082f93d : LEA EDI,[EBP + 0x8]
0082f940 : CALL 0x00415570
0082f945 : LEA EAX,[EBP + -0x18]
0082f948 : PUSH EAX
0082f949 : MOV EAX,ESI
0082f94b : CALL 0x0044d160
0082f950 : LEA ECX,[EBP + -0x44]
0082f953 : PUSH ECX
0082f954 : LEA EDX,[EBX + 0x108]
0082f95a : PUSH EDX
0082f95b : CALL 0x0044cd40
0082f960 : MOV EAX,[0x00da9894]
0082f965 : MOV EAX,dword ptr [EAX]
0082f967 : MOV EDI,dword ptr [EAX + 0x1a8]
0082f96d : MOV EAX,dword ptr [EBX + 0x120]
0082f973 : MOV EBX,dword ptr [EBX + 0x12c]
0082f979 : MOV ECX,dword ptr [EBP + 0xc]
0082f97c : PUSH EAX
0082f97d : PUSH EBX
0082f97e : PUSH ECX
0082f97f : PUSH 0xc35878
0082f984 : LEA ESI,[EBP + -0x6c]
0082f987 : CALL 0x00404750
0082f98c : ADD ESP,0x10
0082f98f : MOV byte ptr [EBP + -0x4],0x6
0082f993 : MOV EDX,dword ptr [EDI]
0082f995 : PUSH 0x13
0082f997 : PUSH EAX
0082f998 : MOV EAX,dword ptr [EDX + 0x44]
0082f99b : MOV ECX,EDI
0082f99d : CALL EAX
0082f99f : MOV byte ptr [EBP + -0x4],0x4
0082f9a3 : MOV ECX,ESI
0082f9a5 : CALL 0x00406560
0082f9aa : MOV byte ptr [EBP + -0x4],0x3
0082f9ae : LEA ECX,[EBP + -0x44]
0082f9b1 : PUSH ECX
0082f9b2 : CALL 0x0044b1c0
0082f9b7 : MOV byte ptr [EBP + -0x4],0x2
0082f9bb : LEA EDX,[EBP + -0x18]
0082f9be : PUSH EDX
0082f9bf : CALL 0x004146b0
0082f9c4 : MOV byte ptr [EBP + -0x4],0x1
0082f9c8 : LEA EAX,[EBP + -0x24]
0082f9cb : PUSH EAX
0082f9cc : CALL 0x0044a950
0082f9d1 : MOV dword ptr [EBP + -0x4],0xffffffff
0082f9d8 : LEA ESI,[EBP + -0x34]
0082f9db : CALL 0x004042c0
0082f9e0 : MOV EAX,0x1
0082f9e5 : MOV ECX,dword ptr [EBP + -0xc]
0082f9e8 : MOV dword ptr FS:[0x0],ECX
0082f9ef : POP ECX
0082f9f0 : POP EDI
0082f9f1 : POP ESI
0082f9f2 : POP EBX
0082f9f3 : MOV ESP,EBP
0082f9f5 : POP EBP
0082f9f6 : RET 0x8
0082f9f9 : MOV byte ptr [EBP + -0x4],0x3
0082f9fd : LEA ECX,[EBP + -0x44]
0082fa00 : PUSH ECX
0082fa01 : CALL 0x0044b1c0
0082fa06 : MOV byte ptr [EBP + -0x4],0x2
0082fa0a : LEA EDX,[EBP + -0x18]
0082fa0d : PUSH EDX
0082fa0e : CALL 0x004146b0
0082fa13 : MOV byte ptr [EBP + -0x4],0x1
0082fa17 : LEA EAX,[EBP + -0x24]
0082fa1a : PUSH EAX
0082fa1b : CALL 0x0044a950
0082fa20 : MOV dword ptr [EBP + -0x4],0xffffffff
0082fa27 : LEA ESI,[EBP + -0x34]
0082fa2a : CALL 0x004042c0
0082fa2f : XOR EAX,EAX
0082fa31 : MOV ECX,dword ptr [EBP + -0xc]
0082fa34 : MOV dword ptr FS:[0x0],ECX
0082fa3b : POP ECX
0082fa3c : POP EDI
0082fa3d : POP ESI
0082fa3e : POP EBX
0082fa3f : MOV ESP,EBP
0082fa41 : POP EBP
0082fa42 : RET 0x8
