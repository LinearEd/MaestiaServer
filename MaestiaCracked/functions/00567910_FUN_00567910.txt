PROGRAM  : Maestia.exe
FUNCTION : FUN_00567910
ENTRY    : 00567910
BODY     : [[00567910, 00567ac4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00567910(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  int *piVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  int in_ECX;
  GMutex *this;
  undefined4 uVar5;
  GMatrix2D *pGVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  GMatrix2D local_84 [24];
  GRefCountNTSImpl *local_6c [27];
  
  *(undefined4 *)(in_ECX + 0x28) = param_1;
  FUN_00566b90(0,param_2);
  puVar2 = (undefined4 *)FUN_00515840(0x8c,0);
  if (puVar2 == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    *puVar2 = &PTR_LAB_00b85fe8;
    puVar2[1] = 1;
    puVar2[2] = 0;
    puVar2[3] = 0x40000;
    *puVar2 = &PTR_FUN_00b8caf8;
    FUN_0055bc10(0x1ff8);
  }
  FUN_0055bea0(param_2,param_3);
  puVar2[3] = 1;
  FUN_00566b90(1,puVar2);
  EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0xd0));
  FUN_00562f60(*(undefined4 *)(in_ECX + 0x44));
  FUN_00562f60(*(undefined4 *)(in_ECX + 0x44));
  *(undefined4 *)(in_ECX + 0x100) = 0;
  puVar3 = (undefined4 *)FUN_00515840(0x58,0);
  if (puVar3 != (undefined4 *)0x0) {
    piVar1 = puVar3 + 1;
    *puVar3 = *(undefined4 *)(in_ECX + 0x10);
    *(undefined4 **)(in_ECX + 0x10) = puVar3;
    if (piVar1 != (int *)0x0) {
      FUN_005628f0(puVar3 + 2);
      GMatrix2D::SetIdentity(local_84);
      uVar10 = 0;
      uVar9 = 0;
      uVar8 = 0;
      uVar7 = 0;
      pGVar6 = local_84;
      uVar5 = 1;
      uVar4 = FUN_0059d080(1,pGVar6,0,0,0,0);
      FUN_0051d350(1,1,0,uVar4,uVar5,pGVar6,uVar7,uVar8,uVar9,uVar10);
      FUN_005621e0(local_6c);
      *piVar1 = (int)(puVar3 + 2);
      **(int **)(in_ECX + 0xe8) = (int)piVar1;
      *(undefined4 *)(*(int *)(in_ECX + 0xe8) + 4) = 1;
      if (local_6c[0] != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(local_6c[0]);
      }
    }
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0xd0));
  uVar4 = *(undefined4 *)(in_ECX + 0x44);
  this = (GMutex *)(*(int *)(in_ECX + 0x84) + 8);
  GMutex::Lock(this);
  *(undefined4 *)(in_ECX + 0x78) = uVar4;
  *(undefined4 *)(in_ECX + 0x74) = 2;
  GWaitCondition::NotifyAll((GWaitCondition *)(*(int *)(in_ECX + 0x84) + 0x1c));
  GMutex::Unlock(this);
  if (puVar2 != (undefined4 *)0x0) {
    FUN_00524240();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00567910 : MOV EAX,dword ptr [ESP + 0x4]
00567914 : SUB ESP,0x84
0056791a : PUSH EBX
0056791b : MOV EBX,dword ptr [ESP + 0x90]
00567922 : PUSH EBP
00567923 : PUSH ESI
00567924 : PUSH EDI
00567925 : PUSH EBX
00567926 : MOV ESI,ECX
00567928 : MOV dword ptr [ESI + 0x28],EAX
0056792b : PUSH ECX
0056792c : MOV EAX,ESP
0056792e : XOR EBP,EBP
00567930 : MOV dword ptr [EAX],EBP
00567932 : CALL 0x00566b90
00567937 : MOV ECX,dword ptr [ESI + 0x1c]
0056793a : PUSH EBP
0056793b : PUSH 0x8c
00567940 : CALL 0x00515840
00567945 : MOV EDI,EAX
00567947 : CMP EDI,EBP
00567949 : JZ 0x00567977
0056794b : MOV dword ptr [EDI],0xb85fe8
00567951 : MOV dword ptr [EDI + 0x4],0x1
00567958 : MOV dword ptr [EDI + 0x8],EBP
0056795b : MOV dword ptr [EDI + 0xc],0x40000
00567962 : PUSH 0x1ff8
00567967 : LEA ECX,[EDI + 0x10]
0056796a : MOV dword ptr [EDI],0xb8caf8
00567970 : CALL 0x0055bc10
00567975 : JMP 0x00567979
00567977 : XOR EDI,EDI
00567979 : MOV ECX,dword ptr [ESP + 0xa0]
00567980 : PUSH ECX
00567981 : PUSH EBX
00567982 : MOV ECX,EDI
00567984 : CALL 0x0055bea0
00567989 : PUSH EDI
0056798a : PUSH ECX
0056798b : MOV EAX,ESP
0056798d : MOV dword ptr [EDI + 0xc],0x1
00567994 : MOV ECX,ESI
00567996 : MOV dword ptr [EAX],0x1
0056799c : CALL 0x00566b90
005679a1 : LEA EAX,[ESI + 0xd0]
005679a7 : PUSH EAX
005679a8 : CALL dword ptr [0x00b85118]
005679ae : MOV EAX,dword ptr [ESI + 0x44]
005679b1 : LEA EBX,[ESI + 0xe8]
005679b7 : PUSH EAX
005679b8 : MOV ECX,EBX
005679ba : CALL 0x00562f60
005679bf : MOV EAX,dword ptr [ESI + 0x44]
005679c2 : PUSH EAX
005679c3 : LEA ECX,[ESI + 0xf4]
005679c9 : CALL 0x00562f60
005679ce : PUSH EBP
005679cf : MOV dword ptr [ESI + 0x100],EBP
005679d5 : MOV ECX,dword ptr [ESI + 0x14]
005679d8 : PUSH 0x58
005679da : CALL 0x00515840
005679df : CMP EAX,EBP
005679e1 : JZ 0x00567a6e
005679e7 : MOV EDX,dword ptr [ESI + 0x10]
005679ea : LEA EBP,[EAX + 0x4]
005679ed : MOV dword ptr [EAX],EDX
005679ef : MOV dword ptr [ESI + 0x10],EAX
005679f2 : TEST EBP,EBP
005679f4 : JZ 0x00567a6e
005679f6 : LEA EAX,[EBP + 0x4]
005679f9 : PUSH EAX
005679fa : CALL 0x005628f0
005679ff : ADD ESP,0x4
00567a02 : LEA ECX,[ESP + 0x10]
00567a06 : CALL 0x00522b80
00567a0b : FLDZ
00567a0d : PUSH 0x0
00567a0f : PUSH 0x0
00567a11 : PUSH 0x0
00567a13 : PUSH ECX
00567a14 : FSTP float ptr [ESP]
00567a17 : LEA EAX,[ESP + 0x20]
00567a1b : PUSH EAX
00567a1c : PUSH 0x1
00567a1e : LEA ECX,[ESP + 0x8c]
00567a25 : CALL 0x0059d080
00567a2a : PUSH EAX
00567a2b : PUSH 0x0
00567a2d : PUSH 0x1
00567a2f : PUSH ECX
00567a30 : MOV EAX,ESP
00567a32 : LEA ECX,[ESP + 0x50]
00567a36 : MOV dword ptr [EAX],0x1
00567a3c : CALL 0x0051d350
00567a41 : LEA ECX,[ESP + 0x28]
00567a45 : PUSH ECX
00567a46 : LEA ECX,[EBP + 0x8]
00567a49 : CALL 0x005621e0
00567a4e : MOV ECX,dword ptr [ESP + 0x28]
00567a52 : LEA EAX,[EBP + 0x4]
00567a55 : MOV dword ptr [EBP],EAX
00567a58 : MOV EDX,dword ptr [EBX]
00567a5a : MOV dword ptr [EDX],EBP
00567a5c : MOV EAX,dword ptr [EBX]
00567a5e : MOV dword ptr [EAX + 0x4],0x1
00567a65 : TEST ECX,ECX
00567a67 : JZ 0x00567a6e
00567a69 : CALL 0x004ff7c0
00567a6e : LEA EAX,[ESI + 0xd0]
00567a74 : PUSH EAX
00567a75 : CALL dword ptr [0x00b8511c]
00567a7b : MOV EBX,dword ptr [ESI + 0x84]
00567a81 : MOV EBP,dword ptr [ESI + 0x44]
00567a84 : ADD EBX,0x8
00567a87 : MOV ECX,EBX
00567a89 : CALL 0x005162b0
00567a8e : MOV ECX,dword ptr [ESI + 0x84]
00567a94 : ADD ECX,0x1c
00567a97 : MOV dword ptr [ESI + 0x78],EBP
00567a9a : MOV dword ptr [ESI + 0x74],0x2
00567aa1 : CALL 0x00516460
00567aa6 : MOV ECX,EBX
00567aa8 : CALL 0x005170a0
00567aad : TEST EDI,EDI
00567aaf : JZ 0x00567ab8
00567ab1 : MOV ECX,EDI
00567ab3 : CALL 0x00524240
00567ab8 : POP EDI
00567ab9 : POP ESI
00567aba : POP EBP
00567abb : POP EBX
00567abc : ADD ESP,0x84
00567ac2 : RET 0xc
