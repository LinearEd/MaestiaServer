PROGRAM  : Maestia.exe
FUNCTION : FUN_009066c0
ENTRY    : 009066c0
BODY     : [[009066c0, 009067f7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009066c0(int param_1)

{
  int *piVar1;
  float fVar2;
  float fVar3;
  uint uVar4;
  int iVar5;
  uint in_ECX;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1ebc7;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_ECX != 0) {
    *(uint *)(param_1 + 0x1a4) = in_ECX;
    if (in_ECX < *(uint *)(param_1 + 0x1a8)) {
      *(uint *)(param_1 + 0x1a8) = in_ECX;
    }
    iVar5 = *(int *)(param_1 + 0x1a8);
    fVar2 = (float)iVar5;
    if (iVar5 < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar3 = (float)(int)in_ECX;
    if ((int)in_ECX < 0) {
      fVar3 = fVar3 + 4.2949673e+09;
    }
    *(float *)(param_1 + 0x1c0) = fVar2 / fVar3;
    if (*(float *)(param_1 + 0x1bc) == 0.0) {
      *(float *)(param_1 + 0x1bc) = fVar2 / fVar3;
    }
    if (*(int *)(*DAT_00da9894 + 0x114) != 0) {
      piVar1 = *(int **)(*DAT_00da9894 + 0x114);
      iVar5 = FUN_00404750(L"%d / %d ",iVar5);
      local_8 = 0;
      if (*(uint *)(iVar5 + 0x18) < 8) {
        iVar5 = iVar5 + 4;
      }
      else {
        iVar5 = *(int *)(iVar5 + 4);
      }
      (**(code **)(*piVar1 + 4))(piVar1,"SetMaxDp",&DAT_00c646c8,iVar5,uVar4);
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    *(undefined1 *)(param_1 + 0x1c5) = 1;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
009066c0 : PUSH EBP
009066c1 : MOV EBP,ESP
009066c3 : PUSH -0x1
009066c5 : PUSH 0xb1ebc7
009066ca : MOV EAX,FS:[0x0]
009066d0 : PUSH EAX
009066d1 : SUB ESP,0x1c
009066d4 : PUSH EBX
009066d5 : PUSH ESI
009066d6 : PUSH EDI
009066d7 : MOV EAX,[0x00d66fa0]
009066dc : XOR EAX,EBP
009066de : PUSH EAX
009066df : LEA EAX,[EBP + -0xc]
009066e2 : MOV FS:[0x0],EAX
009066e8 : MOV EBX,dword ptr [EBP + 0x8]
009066eb : TEST ECX,ECX
009066ed : JZ 0x009067e4
009066f3 : MOV dword ptr [EBX + 0x1a4],ECX
009066f9 : CMP ECX,dword ptr [EBX + 0x1a8]
009066ff : JNC 0x00906707
00906701 : MOV dword ptr [EBX + 0x1a8],ECX
00906707 : MOV EDX,dword ptr [EBX + 0x1a8]
0090670d : MOV EAX,EDX
0090670f : MOV dword ptr [EBP + 0x8],EAX
00906712 : FILD dword ptr [EBP + 0x8]
00906715 : TEST EAX,EAX
00906717 : JGE 0x0090671f
00906719 : FADD float ptr [0x00cdf0e0]
0090671f : MOV EAX,ECX
00906721 : MOV dword ptr [EBP + 0x8],EAX
00906724 : FILD dword ptr [EBP + 0x8]
00906727 : TEST EAX,EAX
00906729 : JGE 0x00906731
0090672b : FADD float ptr [0x00cdf0e0]
00906731 : FDIVP
00906733 : MOVSS XMM0,dword ptr [EBX + 0x1bc]
0090673b : UCOMISS XMM0,dword ptr [0x00b9b0b4]
00906742 : LAHF
00906743 : FST float ptr [EBP + 0x8]
00906746 : FSTP float ptr [EBX + 0x1c0]
0090674c : TEST AH,0x44
0090674f : JP 0x0090675e
00906751 : MOVSS XMM0,dword ptr [EBP + 0x8]
00906756 : MOVSS dword ptr [EBX + 0x1bc],XMM0
0090675e : MOV EAX,[0x00da9894]
00906763 : MOV EAX,dword ptr [EAX]
00906765 : CMP dword ptr [EAX + 0x114],0x0
0090676c : JZ 0x009067dd
0090676e : MOV EDI,dword ptr [EAX + 0x114]
00906774 : PUSH ECX
00906775 : PUSH EDX
00906776 : PUSH 0xc646b4
0090677b : LEA ESI,[EBP + -0x28]
0090677e : CALL 0x00404750
00906783 : ADD ESP,0xc
00906786 : MOV dword ptr [EBP + -0x4],0x0
0090678d : MOV ESI,0x8
00906792 : CMP dword ptr [EAX + 0x18],ESI
00906795 : JC 0x0090679c
00906797 : MOV EAX,dword ptr [EAX + 0x4]
0090679a : JMP 0x0090679f
0090679c : ADD EAX,0x4
0090679f : MOV ECX,dword ptr [EDI]
009067a1 : MOV EDX,dword ptr [ECX + 0x4]
009067a4 : PUSH EAX
009067a5 : PUSH 0xc646c8
009067aa : PUSH 0xc646cc
009067af : PUSH EDI
009067b0 : CALL EDX
009067b2 : ADD ESP,0x10
009067b5 : MOV dword ptr [EBP + -0x4],0xffffffff
009067bc : CMP dword ptr [EBP + -0x10],ESI
009067bf : JC 0x009067c9
009067c1 : MOV ECX,dword ptr [EBP + -0x24]
009067c4 : CALL 0x006f04e0
009067c9 : XOR EAX,EAX
009067cb : MOV dword ptr [EBP + -0x10],0x7
009067d2 : MOV dword ptr [EBP + -0x14],0x0
009067d9 : MOV word ptr [EBP + -0x24],AX
009067dd : MOV byte ptr [EBX + 0x1c5],0x1
009067e4 : MOV ECX,dword ptr [EBP + -0xc]
009067e7 : MOV dword ptr FS:[0x0],ECX
009067ee : POP ECX
009067ef : POP EDI
009067f0 : POP ESI
009067f1 : POP EBX
009067f2 : MOV ESP,EBP
009067f4 : POP EBP
009067f5 : RET 0x4
