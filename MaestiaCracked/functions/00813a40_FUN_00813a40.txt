PROGRAM  : Maestia.exe
FUNCTION : FUN_00813a40
ENTRY    : 00813a40
BODY     : [[00813a40, 00813c0f]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __alloca_probe replaced with injection: alloca_probe */

void FUN_00813a40(int param_1)

{
  char cVar1;
  uint uVar2;
  LPCSTR pCVar3;
  int iVar4;
  LPCSTR in_ECX;
  undefined4 unaff_EDI;
  undefined1 local_203c [4];
  undefined2 local_2038;
  undefined4 local_2028;
  uint local_2024;
  int local_2020;
  int local_201c;
  undefined4 local_2018;
  WCHAR local_2014 [4096];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1a9bf;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_201c = param_1;
  local_2018 = 0;
  local_14 = uVar2;
  _memset(local_2014,0,0x2000);
  pCVar3 = in_ECX;
  do {
    cVar1 = *pCVar3;
    pCVar3 = pCVar3 + 1;
  } while (cVar1 != '\0');
  iVar4 = MultiByteToWideChar(0x3b5,0,in_ECX,(int)(pCVar3 + (1 - (int)(in_ECX + 1))),local_2014,
                              0x400);
  if (iVar4 == 0) {
    FUN_00406460(L"MultiByteToWideChar");
    local_8 = 1;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaGameExcelData::GetStringToolTipData",0x30f,local_203c);
    }
    local_8 = local_8 & 0xffffff00;
    if (7 < local_2024) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
    local_2024 = 7;
    local_2028 = 0;
    local_2038 = 0;
    FUN_00406460(&DAT_00c2e324);
  }
  else {
    FUN_00406460(local_2014);
    local_8 = 2;
    FUN_0043acd0(local_201c + 0x3c,&local_2020);
    local_8 = local_8 & 0xffffff00;
    if (7 < local_2024) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
    local_2038 = 0;
    local_2024 = 7;
    local_2028 = 0;
    if (local_2020 == *(int *)(local_201c + 0x40)) {
      FUN_00406460(&DAT_00c2e378);
    }
    else {
      FUN_004541a0(unaff_EDI);
    }
  }
  local_8 = 0;
  local_2018 = 1;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00813a40 : PUSH EBP
00813a41 : MOV EBP,ESP
00813a43 : PUSH -0x1
00813a45 : PUSH 0xb1a9bf
00813a4a : MOV EAX,FS:[0x0]
00813a50 : PUSH EAX
00813a51 : MOV EAX,0x2030
00813a56 : CALL 0x0063b780
00813a5b : MOV EAX,[0x00d66fa0]
00813a60 : XOR EAX,EBP
00813a62 : MOV dword ptr [EBP + -0x10],EAX
00813a65 : PUSH EBX
00813a66 : PUSH ESI
00813a67 : PUSH EAX
00813a68 : LEA EAX,[EBP + -0xc]
00813a6b : MOV FS:[0x0],EAX
00813a71 : MOV EAX,dword ptr [EBP + 0x8]
00813a74 : XOR EBX,EBX
00813a76 : PUSH 0x2000
00813a7b : MOV ESI,ECX
00813a7d : LEA ECX,[EBP + 0xffffdff0]
00813a83 : PUSH EBX
00813a84 : PUSH ECX
00813a85 : MOV dword ptr [EBP + 0xffffdfe8],EAX
00813a8b : MOV dword ptr [EBP + 0xffffdfc4],EDI
00813a91 : MOV dword ptr [EBP + 0xffffdfec],EBX
00813a97 : CALL 0x0063b700
00813a9c : MOV EAX,ESI
00813a9e : ADD ESP,0xc
00813aa1 : LEA EDX,[EAX + 0x1]
00813aa4 : MOV CL,byte ptr [EAX]
00813aa6 : INC EAX
00813aa7 : CMP CL,BL
00813aa9 : JNZ 0x00813aa4
00813aab : PUSH 0x400
00813ab0 : SUB EAX,EDX
00813ab2 : LEA EDX,[EBP + 0xffffdff0]
00813ab8 : PUSH EDX
00813ab9 : INC EAX
00813aba : PUSH EAX
00813abb : PUSH ESI
00813abc : PUSH EBX
00813abd : PUSH 0x3b5
00813ac2 : CALL dword ptr [0x00b850e0]
00813ac8 : CMP EAX,EBX
00813aca : JNZ 0x00813b55
00813ad0 : PUSH 0xc2e2fc
00813ad5 : LEA ECX,[EBP + 0xffffdfc8]
00813adb : CALL 0x00406460
00813ae0 : MOV ESI,0x1
00813ae5 : MOV dword ptr [EBP + -0x4],ESI
00813ae8 : MOV EAX,[0x00da98e8]
00813aed : MOV ECX,dword ptr [EAX]
00813aef : CMP ECX,EBX
00813af1 : JZ 0x00813b0b
00813af3 : MOV EDX,dword ptr [ECX]
00813af5 : MOV EDX,dword ptr [EDX + 0x14]
00813af8 : LEA EAX,[EBP + 0xffffdfc8]
00813afe : PUSH EAX
00813aff : PUSH 0x30f
00813b04 : PUSH 0xc2e328
00813b09 : CALL EDX
00813b0b : MOV byte ptr [EBP + -0x4],BL
00813b0e : CMP dword ptr [EBP + 0xffffdfe0],0x8
00813b15 : JC 0x00813b22
00813b17 : MOV ECX,dword ptr [EBP + 0xffffdfcc]
00813b1d : CALL 0x006f04e0
00813b22 : XOR EAX,EAX
00813b24 : PUSH 0xc2e324
00813b29 : MOV ECX,EDI
00813b2b : MOV dword ptr [EBP + 0xffffdfe0],0x7
00813b35 : MOV dword ptr [EBP + 0xffffdfdc],EBX
00813b3b : MOV word ptr [EBP + 0xffffdfcc],AX
00813b42 : CALL 0x00406460
00813b47 : MOV dword ptr [EBP + -0x4],EBX
00813b4a : MOV dword ptr [EBP + 0xffffdfec],ESI
00813b50 : JMP 0x00813bf1
00813b55 : LEA ECX,[EBP + 0xffffdff0]
00813b5b : PUSH ECX
00813b5c : LEA ECX,[EBP + 0xffffdfc8]
00813b62 : CALL 0x00406460
00813b67 : MOV dword ptr [EBP + -0x4],0x2
00813b6e : MOV EAX,dword ptr [EBP + 0xffffdfe8]
00813b74 : LEA EDX,[EBP + 0xffffdfe4]
00813b7a : PUSH EDX
00813b7b : ADD EAX,0x3c
00813b7e : PUSH EAX
00813b7f : LEA ESI,[EBP + 0xffffdfc8]
00813b85 : CALL 0x0043acd0
00813b8a : MOV byte ptr [EBP + -0x4],BL
00813b8d : CMP dword ptr [EBP + 0xffffdfe0],0x8
00813b94 : JC 0x00813ba1
00813b96 : MOV ECX,dword ptr [EBP + 0xffffdfcc]
00813b9c : CALL 0x006f04e0
00813ba1 : MOV EDX,dword ptr [EBP + 0xffffdfe8]
00813ba7 : MOV EAX,dword ptr [EDX + 0x40]
00813baa : XOR ECX,ECX
00813bac : MOV word ptr [EBP + 0xffffdfcc],CX
00813bb3 : MOV ECX,dword ptr [EBP + 0xffffdfe4]
00813bb9 : MOV dword ptr [EBP + 0xffffdfe0],0x7
00813bc3 : MOV dword ptr [EBP + 0xffffdfdc],EBX
00813bc9 : CMP ECX,EAX
00813bcb : JNZ 0x00813bdb
00813bcd : PUSH 0xc2e378
00813bd2 : MOV ECX,EDI
00813bd4 : CALL 0x00406460
00813bd9 : JMP 0x00813be4
00813bdb : MOV ECX,dword ptr [ECX + 0x28]
00813bde : PUSH EDI
00813bdf : CALL 0x004541a0
00813be4 : MOV dword ptr [EBP + -0x4],EBX
00813be7 : MOV dword ptr [EBP + 0xffffdfec],0x1
00813bf1 : MOV EAX,EDI
00813bf3 : MOV ECX,dword ptr [EBP + -0xc]
00813bf6 : MOV dword ptr FS:[0x0],ECX
00813bfd : POP ECX
00813bfe : POP ESI
00813bff : POP EBX
00813c00 : MOV ECX,dword ptr [EBP + -0x10]
00813c03 : XOR ECX,EBP
00813c05 : CALL 0x00633e6b
00813c0a : MOV ESP,EBP
00813c0c : POP EBP
00813c0d : RET 0x4
