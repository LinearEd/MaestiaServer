PROGRAM  : Maestia.exe
FUNCTION : FUN_0050b9c0
ENTRY    : 0050b9c0
BODY     : [[0050b9c0, 0050bd3d]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_0050b9c0(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 *puVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  float *pfVar5;
  int *in_ECX;
  float10 fVar6;
  float fStack_60;
  float fStack_5c;
  float fStack_58;
  undefined4 uStack_54;
  float fStack_50;
  float fStack_4c;
  undefined4 uStack_48;
  float fStack_44;
  float fStack_40;
  float fStack_3c;
  double dStack_38;
  float fStack_30;
  undefined8 uStack_2c;
  float fStack_24;
  int local_20;
  int local_1c;
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  
  switch(param_1) {
  case 0:
    local_20 = in_ECX[0x11];
    local_1c = in_ECX[0x12];
    local_18 = in_ECX[0x13];
    local_14 = in_ECX[0x14];
    local_10 = in_ECX[0x15];
    local_c = in_ECX[0x16];
    uVar4 = (**(code **)(*in_ECX + 0x5c))();
    fVar6 = (float10)FUN_00527730(uVar4);
    dStack_38 = (double)(fVar6 * (float10)20.0);
    fStack_60 = (float)(fVar6 * (float10)20.0);
    fStack_5c = fStack_60;
    GMatrix2D::TransformByInverse
              ((GMatrix2D *)&local_20,(GPoint<float> *)&fStack_58,(GPoint<float> *)&fStack_60);
    fStack_60 = fStack_58;
    fStack_5c = (float)uStack_54;
    pfVar5 = (float *)FUN_0054ad50();
    fStack_60 = fStack_60 - *pfVar5;
    GMatrix2D::Transform
              ((GMatrix2D *)&local_20,(GPoint<float> *)&fStack_50,(GPoint<float> *)&fStack_60);
    fStack_60 = fStack_50;
    fStack_5c = fStack_4c;
    fStack_30 = (float)CONCAT31(fStack_30._1_3_,3);
    uStack_2c = (double)(fStack_50 / 20.0);
    cVar2 = FUN_0051df40(0,&fStack_30,0);
    if (cVar2 != '\0') {
      puVar1 = (undefined4 *)in_ECX[0x21];
      if (puVar1 != (undefined4 *)0x0) {
        uVar4 = FUN_0063b380();
        *puVar1 = uVar4;
      }
      FUN_00526bc0();
      return true;
    }
    break;
  case 1:
    uVar4 = (**(code **)(*in_ECX + 0x5c))();
    fVar6 = (float10)FUN_00527730(uVar4);
    dStack_38 = (double)(fVar6 * (float10)20.0);
    local_20 = in_ECX[0x11];
    local_1c = in_ECX[0x12];
    local_18 = in_ECX[0x13];
    local_14 = in_ECX[0x14];
    local_10 = in_ECX[0x15];
    local_c = in_ECX[0x16];
    fStack_60 = 0.0;
    fStack_5c = (float)(fVar6 * (float10)20.0);
    GMatrix2D::TransformByInverse
              ((GMatrix2D *)&local_20,(GPoint<float> *)&uStack_48,(GPoint<float> *)&fStack_60);
    fStack_60 = (float)uStack_48;
    fStack_5c = fStack_44;
    iVar3 = FUN_0054ad50();
    fStack_5c = fStack_5c - *(float *)(iVar3 + 4);
    GMatrix2D::Transform
              ((GMatrix2D *)&local_20,(GPoint<float> *)&fStack_40,(GPoint<float> *)&fStack_60);
    fStack_60 = fStack_40;
    fStack_5c = fStack_3c;
    fStack_30 = (float)CONCAT31(fStack_30._1_3_,3);
    uStack_2c = (double)(fStack_3c / 20.0);
    cVar2 = FUN_0051df40(1,&fStack_30,0);
    if (cVar2 != '\0') {
      iVar3 = in_ECX[0x21];
      if (iVar3 != 0) {
        uVar4 = FUN_0063b380();
        *(undefined4 *)(iVar3 + 4) = uVar4;
      }
      FUN_00526bc0();
      return true;
    }
    break;
  case 2:
  case 3:
  case 10:
    (**(code **)(*in_ECX + 0x13c))();
  default:
    cVar2 = FUN_0051df40(param_1,param_2,param_3);
    return cVar2 != '\0';
  case 8:
    uVar4 = (**(code **)(*in_ECX + 0x5c))();
    fVar6 = (float10)FUN_00527730(uVar4);
    dStack_38 = (double)fVar6;
    pfVar5 = (float *)FUN_0054ad50();
    fStack_24 = pfVar5[3];
    fStack_30 = *pfVar5;
    fStack_60 = (float)((float10)dStack_38 * (float10)20.0);
    uStack_2c = (double)CONCAT44(fStack_60 + fStack_30,pfVar5[1]);
    goto LAB_0050bc91;
  case 9:
    uVar4 = (**(code **)(*in_ECX + 0x5c))();
    fVar6 = (float10)FUN_00527730(uVar4);
    dStack_38 = (double)fVar6;
    pfVar5 = (float *)FUN_0054ad50();
    uStack_2c = *(double *)(pfVar5 + 1);
    fStack_30 = *pfVar5;
    fStack_60 = (float)((float10)dStack_38 * (float10)20.0);
    fStack_24 = pfVar5[1] + fStack_60;
LAB_0050bc91:
    FUN_00545a20(&fStack_30,1);
    (**(code **)(*in_ECX + 0x13c))();
    return true;
  }
  FUN_00526bc0();
  return false;
}



============================================================
DISASSEMBLY
============================================================
0050b9c0 : PUSH EBP
0050b9c1 : MOV EBP,ESP
0050b9c3 : AND ESP,0xfffffff8
0050b9c6 : SUB ESP,0x60
0050b9c9 : PUSH ESI
0050b9ca : PUSH EDI
0050b9cb : MOV EDI,dword ptr [EBP + 0x8]
0050b9ce : MOV ESI,ECX
0050b9d0 : CMP EDI,0xa
0050b9d3 : JA 0x0050bd21
0050b9d9 : MOVZX EAX,byte ptr [EDI + 0x50bd58]
0050b9e0 : JMP dword ptr [EAX*0x4 + 0x50bd40]
0050b9e7 : FLD float ptr [ESI + 0x44]
0050b9ea : MOV EDX,dword ptr [ESI]
0050b9ec : MOV EAX,dword ptr [EDX + 0x5c]
0050b9ef : FSTP float ptr [ESP + 0x50]
0050b9f3 : FLD float ptr [ESI + 0x48]
0050b9f6 : FSTP float ptr [ESP + 0x54]
0050b9fa : FLD float ptr [ESI + 0x4c]
0050b9fd : FSTP float ptr [ESP + 0x58]
0050ba01 : FLD float ptr [ESI + 0x50]
0050ba04 : FSTP float ptr [ESP + 0x5c]
0050ba08 : FLD float ptr [ESI + 0x54]
0050ba0b : FSTP float ptr [ESP + 0x60]
0050ba0f : FLD float ptr [ESI + 0x58]
0050ba12 : FSTP float ptr [ESP + 0x64]
0050ba16 : CALL EAX
0050ba18 : MOV ECX,dword ptr [EBP + 0xc]
0050ba1b : PUSH EAX
0050ba1c : CALL 0x00527730
0050ba21 : FMUL double ptr [0x00b86058]
0050ba27 : LEA ECX,[ESP + 0x10]
0050ba2b : PUSH ECX
0050ba2c : FST double ptr [ESP + 0x3c]
0050ba30 : LEA EDX,[ESP + 0x1c]
0050ba34 : FSTP float ptr [ESP + 0x10]
0050ba38 : PUSH EDX
0050ba39 : FLD float ptr [ESP + 0x14]
0050ba3d : LEA ECX,[ESP + 0x58]
0050ba41 : FST float ptr [ESP + 0x1c]
0050ba45 : FSTP float ptr [ESP + 0x18]
0050ba49 : CALL 0x00522fa0
0050ba4e : FLD float ptr [ESP + 0x18]
0050ba52 : MOV ECX,dword ptr [ESI + 0xa0]
0050ba58 : FSTP float ptr [ESP + 0x10]
0050ba5c : FLD float ptr [ESP + 0x1c]
0050ba60 : FSTP float ptr [ESP + 0x14]
0050ba64 : CALL 0x0054ad50
0050ba69 : FLD float ptr [ESP + 0x10]
0050ba6d : LEA ECX,[ESP + 0x20]
0050ba71 : FSUB float ptr [EAX]
0050ba73 : LEA EAX,[ESP + 0x10]
0050ba77 : PUSH EAX
0050ba78 : PUSH ECX
0050ba79 : LEA ECX,[ESP + 0x58]
0050ba7d : FSTP float ptr [ESP + 0x18]
0050ba81 : CALL 0x00522c50
0050ba86 : FLD float ptr [ESP + 0x20]
0050ba8a : FST float ptr [ESP + 0x10]
0050ba8e : PUSH 0x0
0050ba90 : FLD float ptr [ESP + 0x28]
0050ba94 : LEA EDX,[ESP + 0x44]
0050ba98 : FSTP float ptr [ESP + 0x18]
0050ba9c : PUSH EDX
0050ba9d : PUSH 0x0
0050ba9f : FDIV double ptr [0x00b86058]
0050baa5 : MOV ECX,ESI
0050baa7 : MOV byte ptr [ESP + 0x4c],0x3
0050baac : FSTP float ptr [ESP + 0x18]
0050bab0 : FLD float ptr [ESP + 0x18]
0050bab4 : FSTP double ptr [ESP + 0x50]
0050bab8 : CALL 0x0051df40
0050babd : TEST AL,AL
0050babf : JZ 0x0050bb04
0050bac1 : MOV ESI,dword ptr [ESI + 0x84]
0050bac7 : TEST ESI,ESI
0050bac9 : JZ 0x0050baf1
0050bacb : FLDZ
0050bacd : FLD double ptr [ESP + 0x38]
0050bad1 : FCOM
0050bad3 : FNSTSW AX
0050bad5 : FSTP ST1
0050bad7 : TEST AH,0x41
0050bada : JNZ 0x0050bae4
0050badc : FADD double ptr [0x00cdf120]
0050bae2 : JMP 0x0050baea
0050bae4 : FSUB double ptr [0x00cdf120]
0050baea : CALL 0x0063b380
0050baef : MOV dword ptr [ESI],EAX
0050baf1 : LEA ECX,[ESP + 0x40]
0050baf5 : CALL 0x00526bc0
0050bafa : MOV AL,0x1
0050bafc : POP EDI
0050bafd : POP ESI
0050bafe : MOV ESP,EBP
0050bb00 : POP EBP
0050bb01 : RET 0xc
0050bb04 : LEA ECX,[ESP + 0x40]
0050bb08 : CALL 0x00526bc0
0050bb0d : XOR AL,AL
0050bb0f : POP EDI
0050bb10 : POP ESI
0050bb11 : MOV ESP,EBP
0050bb13 : POP EBP
0050bb14 : RET 0xc
0050bb17 : MOV EAX,dword ptr [ESI]
0050bb19 : MOV EDX,dword ptr [EAX + 0x5c]
0050bb1c : CALL EDX
0050bb1e : MOV ECX,dword ptr [EBP + 0xc]
0050bb21 : PUSH EAX
0050bb22 : CALL 0x00527730
0050bb27 : FMUL double ptr [0x00b86058]
0050bb2d : LEA EAX,[ESP + 0x10]
0050bb31 : PUSH EAX
0050bb32 : FST double ptr [ESP + 0x3c]
0050bb36 : LEA ECX,[ESP + 0x2c]
0050bb3a : FLD float ptr [ESI + 0x44]
0050bb3d : PUSH ECX
0050bb3e : FSTP float ptr [ESP + 0x58]
0050bb42 : LEA ECX,[ESP + 0x58]
0050bb46 : FLD float ptr [ESI + 0x48]
0050bb49 : FSTP float ptr [ESP + 0x5c]
0050bb4d : FLD float ptr [ESI + 0x4c]
0050bb50 : FSTP float ptr [ESP + 0x60]
0050bb54 : FLD float ptr [ESI + 0x50]
0050bb57 : FSTP float ptr [ESP + 0x64]
0050bb5b : FLD float ptr [ESI + 0x54]
0050bb5e : FSTP float ptr [ESP + 0x68]
0050bb62 : FLD float ptr [ESI + 0x58]
0050bb65 : FSTP float ptr [ESP + 0x6c]
0050bb69 : FLDZ
0050bb6b : FSTP float ptr [ESP + 0x18]
0050bb6f : FSTP float ptr [ESP + 0x1c]
0050bb73 : CALL 0x00522fa0
0050bb78 : FLD float ptr [ESP + 0x28]
0050bb7c : MOV ECX,dword ptr [ESI + 0xa0]
0050bb82 : FSTP float ptr [ESP + 0x10]
0050bb86 : FLD float ptr [ESP + 0x2c]
0050bb8a : FSTP float ptr [ESP + 0x14]
0050bb8e : CALL 0x0054ad50
0050bb93 : FLD float ptr [ESP + 0x14]
0050bb97 : LEA EDX,[ESP + 0x10]
0050bb9b : FSUB float ptr [EAX + 0x4]
0050bb9e : PUSH EDX
0050bb9f : LEA EAX,[ESP + 0x34]
0050bba3 : PUSH EAX
0050bba4 : LEA ECX,[ESP + 0x58]
0050bba8 : FSTP float ptr [ESP + 0x1c]
0050bbac : CALL 0x00522c50
0050bbb1 : FLD float ptr [ESP + 0x30]
0050bbb5 : FSTP float ptr [ESP + 0x10]
0050bbb9 : PUSH 0x0
0050bbbb : FLD float ptr [ESP + 0x38]
0050bbbf : LEA ECX,[ESP + 0x44]
0050bbc3 : FST float ptr [ESP + 0x18]
0050bbc7 : PUSH ECX
0050bbc8 : FDIV double ptr [0x00b86058]
0050bbce : PUSH 0x1
0050bbd0 : MOV ECX,ESI
0050bbd2 : MOV byte ptr [ESP + 0x4c],0x3
0050bbd7 : FSTP float ptr [ESP + 0x18]
0050bbdb : FLD float ptr [ESP + 0x18]
0050bbdf : FSTP double ptr [ESP + 0x50]
0050bbe3 : CALL 0x0051df40
0050bbe8 : TEST AL,AL
0050bbea : JZ 0x0050bb04
0050bbf0 : MOV ESI,dword ptr [ESI + 0x84]
0050bbf6 : TEST ESI,ESI
0050bbf8 : JZ 0x0050bc21
0050bbfa : FLDZ
0050bbfc : FLD double ptr [ESP + 0x38]
0050bc00 : FCOM
0050bc02 : FNSTSW AX
0050bc04 : FSTP ST1
0050bc06 : TEST AH,0x41
0050bc09 : JNZ 0x0050bc13
0050bc0b : FADD double ptr [0x00cdf120]
0050bc11 : JMP 0x0050bc19
0050bc13 : FSUB double ptr [0x00cdf120]
0050bc19 : CALL 0x0063b380
0050bc1e : MOV dword ptr [ESI + 0x4],EAX
0050bc21 : LEA ECX,[ESP + 0x40]
0050bc25 : CALL 0x00526bc0
0050bc2a : MOV AL,0x1
0050bc2c : POP EDI
0050bc2d : POP ESI
0050bc2e : MOV ESP,EBP
0050bc30 : POP EBP
0050bc31 : RET 0xc
0050bc34 : MOV EDX,dword ptr [ESI]
0050bc36 : MOV EAX,dword ptr [EDX + 0x5c]
0050bc39 : CALL EAX
0050bc3b : MOV ECX,dword ptr [EBP + 0xc]
0050bc3e : PUSH EAX
0050bc3f : CALL 0x00527730
0050bc44 : FSTP double ptr [ESP + 0x38]
0050bc48 : MOV ECX,dword ptr [ESI + 0xa0]
0050bc4e : CALL 0x0054ad50
0050bc53 : FLD float ptr [EAX + 0x4]
0050bc56 : FSTP float ptr [ESP + 0xc]
0050bc5a : FLD float ptr [EAX + 0xc]
0050bc5d : FSTP float ptr [ESP + 0x10]
0050bc61 : FLD float ptr [EAX]
0050bc63 : FSTP float ptr [ESP + 0x40]
0050bc67 : FLD float ptr [ESP + 0xc]
0050bc6b : FSTP float ptr [ESP + 0x44]
0050bc6f : FLD float ptr [ESP + 0x10]
0050bc73 : FSTP float ptr [ESP + 0x4c]
0050bc77 : FLD double ptr [ESP + 0x38]
0050bc7b : FMUL double ptr [0x00b86058]
0050bc81 : FSTP float ptr [ESP + 0x10]
0050bc85 : FLD float ptr [ESP + 0x10]
0050bc89 : FADD float ptr [ESP + 0x40]
0050bc8d : FSTP float ptr [ESP + 0x48]
0050bc91 : PUSH 0x1
0050bc93 : LEA ECX,[ESP + 0x44]
0050bc97 : PUSH ECX
0050bc98 : MOV ECX,dword ptr [ESI + 0xa0]
0050bc9e : CALL 0x00545a20
0050bca3 : MOV EDX,dword ptr [ESI]
0050bca5 : MOV EAX,dword ptr [EDX + 0x13c]
0050bcab : MOV ECX,ESI
0050bcad : CALL EAX
0050bcaf : MOV AL,0x1
0050bcb1 : POP EDI
0050bcb2 : POP ESI
0050bcb3 : MOV ESP,EBP
0050bcb5 : POP EBP
0050bcb6 : RET 0xc
0050bcb9 : MOV EDX,dword ptr [ESI]
0050bcbb : MOV EAX,dword ptr [EDX + 0x5c]
0050bcbe : CALL EAX
0050bcc0 : MOV ECX,dword ptr [EBP + 0xc]
0050bcc3 : PUSH EAX
0050bcc4 : CALL 0x00527730
0050bcc9 : FSTP double ptr [ESP + 0x38]
0050bccd : MOV ECX,dword ptr [ESI + 0xa0]
0050bcd3 : CALL 0x0054ad50
0050bcd8 : FLD float ptr [EAX + 0x4]
0050bcdb : FSTP float ptr [ESP + 0x10]
0050bcdf : FLD float ptr [EAX + 0x8]
0050bce2 : FSTP float ptr [ESP + 0xc]
0050bce6 : FLD float ptr [EAX]
0050bce8 : FSTP float ptr [ESP + 0x40]
0050bcec : FLD float ptr [ESP + 0x10]
0050bcf0 : FST float ptr [ESP + 0x44]
0050bcf4 : FLD float ptr [ESP + 0xc]
0050bcf8 : FSTP float ptr [ESP + 0x48]
0050bcfc : FLD double ptr [ESP + 0x38]
0050bd00 : FMUL double ptr [0x00b86058]
0050bd06 : FSTP float ptr [ESP + 0x10]
0050bd0a : FADD float ptr [ESP + 0x10]
0050bd0e : FSTP float ptr [ESP + 0x4c]
0050bd12 : JMP 0x0050bc91
0050bd17 : MOV EDX,dword ptr [ESI]
0050bd19 : MOV EAX,dword ptr [EDX + 0x13c]
0050bd1f : CALL EAX
0050bd21 : MOV ECX,dword ptr [EBP + 0x10]
0050bd24 : MOV EDX,dword ptr [EBP + 0xc]
0050bd27 : PUSH ECX
0050bd28 : PUSH EDX
0050bd29 : PUSH EDI
0050bd2a : MOV ECX,ESI
0050bd2c : CALL 0x0051df40
0050bd31 : TEST AL,AL
0050bd33 : POP EDI
0050bd34 : SETNZ AL
0050bd37 : POP ESI
0050bd38 : MOV ESP,EBP
0050bd3a : POP EBP
0050bd3b : RET 0xc
