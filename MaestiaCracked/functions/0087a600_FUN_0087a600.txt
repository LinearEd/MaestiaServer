PROGRAM  : Maestia.exe
FUNCTION : FUN_0087a600
ENTRY    : 0087a600
BODY     : [[0087a600, 0087a8af]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0087a600(void)

{
  int *piVar1;
  DWORD DVar2;
  float *pfVar3;
  int iVar4;
  int iVar5;
  int in_ECX;
  int iVar6;
  undefined1 auStack_90 [8];
  undefined4 uStack_88;
  float *pfStack_84;
  undefined4 uStack_80;
  float *pfStack_7c;
  float *pfStack_78;
  uint uStack_74;
  undefined1 local_60 [12];
  float local_54;
  float local_50;
  float local_4c;
  float local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30 [3];
  float local_24;
  float local_20;
  float local_1c;
  int local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar6 = DAT_017247e4;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b492c7;
  local_10 = ExceptionList;
  uStack_74 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (DAT_00da93ec == 0) {
    return;
  }
  piVar1 = (int *)(DAT_017247e4 + 4);
  ExceptionList = &local_10;
  *(undefined4 *)(in_ECX + 0x78) = 0;
  if (*piVar1 == 0) {
    pfStack_78 = (float *)0x87a655;
    DVar2 = timeGetTime();
    *(DWORD *)(iVar6 + 0xc) = DVar2;
    iVar4 = DAT_017251ac;
    *(undefined4 *)(iVar6 + 0x14) = 0;
    *(undefined4 *)(iVar6 + 0x10) = 300;
    *piVar1 = 1;
    *(undefined4 *)(iVar4 + 0x49c) = 0;
  }
  local_18 = *(int *)(DAT_00da93ec + 0x74);
  iVar6 = 0;
  if (*(int *)(*DAT_00da9894 + 0x288) != 0) {
    iVar6 = *(int *)(*(int *)(*DAT_00da9894 + 0x288) + 0x38);
  }
  if (local_18 == 0) {
    ExceptionList = local_10;
    return;
  }
  if (iVar6 == 0) {
    ExceptionList = local_10;
    return;
  }
  pfStack_78 = &local_24;
  local_24 = 0.0;
  local_20 = 0.0;
  local_1c = 0.0;
  pfStack_7c = (float *)0x87a6cb;
  FUN_0087a110();
  piVar1 = DAT_00da9894;
  iVar4 = *(int *)(iVar6 + 1000);
  *(float *)(in_ECX + 0x80) = local_20;
  *(float *)(in_ECX + 0x7c) = local_24;
  *(float *)(in_ECX + 0x84) = local_1c;
  local_48 = *(float *)(iVar4 + 0x68);
  local_40 = *(float *)(iVar4 + 0x70);
  pfStack_78 = (float *)local_60;
  local_50 = *(float *)(iVar4 + 0x6c) + *(float *)(*(int *)(*piVar1 + 0x288) + 0xd4);
  local_54 = local_24;
  local_4c = local_1c;
  pfStack_7c = (float *)0x87a752;
  local_44 = local_50;
  pfVar3 = (float *)FUN_0087dca0();
  local_3c = *pfVar3;
  local_38 = pfVar3[1];
  local_34 = pfVar3[2];
  if (*(int *)(iVar6 + 1000) != 0) {
    local_14 = auStack_90;
    FUN_00406460(L"Bip01 Head");
    local_8 = 0xffffffff;
    iVar4 = FUN_00a664c0();
    if (iVar4 != 0) {
      iVar4 = *(int *)(iVar6 + 1000);
      local_14 = *(undefined1 **)(*(int *)(iVar6 + 0x18b4) + 0x18);
      pfStack_78 = (float *)0x87a7ca;
      iVar5 = FUN_007cc270();
      local_14 = (undefined1 *)
                 (((float)local_14 * 0.7 + *(float *)(iVar5 + 4)) - *(float *)(iVar4 + 0x6c));
      if ((float)local_14 != 0.0) goto LAB_0087a808;
    }
  }
  local_14 = (undefined1 *)(*(float *)(*(int *)(iVar6 + 0x18b4) + 0x18) + local_38);
LAB_0087a808:
  local_30[2] = local_40 - local_1c;
  pfStack_7c = local_30;
  local_30[0] = local_48 - local_24;
  local_30[1] = 0.0;
  uStack_80 = 0x87a83f;
  pfStack_78 = pfStack_7c;
  local_38 = (float)local_14;
  D3DXVec3Normalize();
  local_30[1] = 0.0;
  local_24 = local_3c - local_30[0] * DAT_00d72c20;
  uStack_80 = 0;
  pfStack_84 = &local_54;
  local_1c = local_34 - local_30[2] * DAT_00d72c20;
  local_20 = (float)local_14;
  uStack_88 = 0x87a89e;
  FUN_007f1b30();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0087a600 : PUSH EBP
0087a601 : MOV EBP,ESP
0087a603 : PUSH -0x1
0087a605 : PUSH 0xb492c7
0087a60a : MOV EAX,FS:[0x0]
0087a610 : PUSH EAX
0087a611 : SUB ESP,0x54
0087a614 : PUSH EBX
0087a615 : PUSH ESI
0087a616 : PUSH EDI
0087a617 : MOV EAX,[0x00d66fa0]
0087a61c : XOR EAX,EBP
0087a61e : PUSH EAX
0087a61f : LEA EAX,[EBP + -0xc]
0087a622 : MOV FS:[0x0],EAX
0087a628 : MOV ESI,ECX
0087a62a : CMP dword ptr [0x00da93ec],0x0
0087a631 : JZ 0x0087a89e
0087a637 : MOV EDI,dword ptr [0x017247e4]
0087a63d : XORPS XMM0,XMM0
0087a640 : LEA EBX,[EDI + 0x4]
0087a643 : MOV dword ptr [ESI + 0x78],0x0
0087a64a : CMP dword ptr [EBX],0x0
0087a64d : JNZ 0x0087a67c
0087a64f : CALL dword ptr [0x00b85598]
0087a655 : XORPS XMM0,XMM0
0087a658 : MOV dword ptr [EDI + 0xc],EAX
0087a65b : MOV EAX,[0x017251ac]
0087a660 : MOV dword ptr [EDI + 0x14],0x0
0087a667 : MOV dword ptr [EDI + 0x10],0x12c
0087a66e : MOV dword ptr [EBX],0x1
0087a674 : MOVSS dword ptr [EAX + 0x49c],XMM0
0087a67c : MOV EDX,dword ptr [0x00da9894]
0087a682 : MOV ECX,dword ptr [0x00da93ec]
0087a688 : MOV EAX,dword ptr [EDX]
0087a68a : MOV ECX,dword ptr [ECX + 0x74]
0087a68d : XOR EBX,EBX
0087a68f : MOV dword ptr [EBP + -0x14],ECX
0087a692 : CMP dword ptr [EAX + 0x288],EBX
0087a698 : JZ 0x0087a6a3
0087a69a : MOV EAX,dword ptr [EAX + 0x288]
0087a6a0 : MOV EBX,dword ptr [EAX + 0x38]
0087a6a3 : TEST ECX,ECX
0087a6a5 : JZ 0x0087a89e
0087a6ab : TEST EBX,EBX
0087a6ad : JZ 0x0087a89e
0087a6b3 : LEA EAX,[EBP + -0x20]
0087a6b6 : PUSH EAX
0087a6b7 : MOVSS dword ptr [EBP + -0x20],XMM0
0087a6bc : MOVSS dword ptr [EBP + -0x1c],XMM0
0087a6c1 : MOVSS dword ptr [EBP + -0x18],XMM0
0087a6c6 : CALL 0x0087a110
0087a6cb : MOV EAX,dword ptr [EBX + 0x3e8]
0087a6d1 : MOVSS XMM1,dword ptr [EBP + -0x20]
0087a6d6 : MOVSS XMM0,dword ptr [EBP + -0x1c]
0087a6db : MOVSS XMM2,dword ptr [EBP + -0x18]
0087a6e0 : MOV ECX,dword ptr [0x00da9894]
0087a6e6 : ADD EAX,0x68
0087a6e9 : MOVSS dword ptr [ESI + 0x80],XMM0
0087a6f1 : MOVSS dword ptr [ESI + 0x7c],XMM1
0087a6f6 : MOVSS dword ptr [ESI + 0x84],XMM2
0087a6fe : MOVSS XMM0,dword ptr [EAX]
0087a702 : MOVSS XMM3,dword ptr [EAX + 0x8]
0087a707 : MOVSS dword ptr [EBP + -0x44],XMM0
0087a70c : MOVSS XMM0,dword ptr [EAX + 0x4]
0087a711 : MOV EAX,dword ptr [ECX]
0087a713 : MOV EAX,dword ptr [EAX + 0x288]
0087a719 : MOVSS dword ptr [EBP + -0x3c],XMM3
0087a71e : MOVSS XMM3,dword ptr [EAX + 0xd4]
0087a726 : MOV EAX,dword ptr [EBX + 0x18b4]
0087a72c : LEA EDX,[EBP + -0x5c]
0087a72f : ADDSS XMM0,XMM3
0087a733 : PUSH EDX
0087a734 : MOV ECX,0x7
0087a739 : MOVSS dword ptr [EBP + -0x40],XMM0
0087a73e : MOVSS dword ptr [EBP + -0x50],XMM1
0087a743 : MOVSS dword ptr [EBP + -0x4c],XMM0
0087a748 : MOVSS dword ptr [EBP + -0x48],XMM2
0087a74d : CALL 0x0087dca0
0087a752 : MOVSS XMM0,dword ptr [EAX]
0087a756 : MOV ESI,dword ptr [EBX + 0x3e8]
0087a75c : MOVSS dword ptr [EBP + -0x38],XMM0
0087a761 : MOVSS XMM0,dword ptr [EAX + 0x4]
0087a766 : MOVSS dword ptr [EBP + -0x34],XMM0
0087a76b : MOVSS XMM0,dword ptr [EAX + 0x8]
0087a770 : MOVSS dword ptr [EBP + -0x30],XMM0
0087a775 : TEST ESI,ESI
0087a777 : JZ 0x0087a7f3
0087a779 : SUB ESP,0x1c
0087a77c : MOV ECX,ESP
0087a77e : MOV dword ptr [EBP + -0x10],ESP
0087a781 : PUSH 0xc43ae4
0087a786 : CALL 0x00406460
0087a78b : MOV dword ptr [EBP + -0x4],0x0
0087a792 : MOV ESI,dword ptr [ESI + 0x288]
0087a798 : MOV dword ptr [EBP + -0x4],0xffffffff
0087a79f : MOV EDI,ESI
0087a7a1 : CALL 0x00a664c0
0087a7a6 : TEST EAX,EAX
0087a7a8 : JZ 0x0087a7f3
0087a7aa : MOV ECX,dword ptr [EBX + 0x18b4]
0087a7b0 : MOV EDI,dword ptr [EBX + 0x3e8]
0087a7b6 : MOVSS XMM0,dword ptr [ECX + 0x18]
0087a7bb : MOV ESI,EAX
0087a7bd : MOVSS dword ptr [EBP + -0x10],XMM0
0087a7c2 : ADD EDI,0x68
0087a7c5 : CALL 0x007cc270
0087a7ca : MOVSS XMM0,dword ptr [EBP + -0x10]
0087a7cf : MULSS XMM0,dword ptr [0x00cdf190]
0087a7d7 : ADDSS XMM0,dword ptr [EAX + 0x4]
0087a7dc : SUBSS XMM0,dword ptr [EDI + 0x4]
0087a7e1 : UCOMISS XMM0,dword ptr [0x00b9b0b4]
0087a7e8 : LAHF
0087a7e9 : MOVSS dword ptr [EBP + -0x10],XMM0
0087a7ee : TEST AH,0x44
0087a7f1 : JP 0x0087a808
0087a7f3 : MOV EDX,dword ptr [EBX + 0x18b4]
0087a7f9 : MOVSS XMM0,dword ptr [EDX + 0x18]
0087a7fe : ADDSS XMM0,dword ptr [EBP + -0x34]
0087a803 : MOVSS dword ptr [EBP + -0x10],XMM0
0087a808 : MOVSS XMM1,dword ptr [EBP + -0x3c]
0087a80d : XORPS XMM2,XMM2
0087a810 : SUBSS XMM1,dword ptr [EBP + -0x18]
0087a815 : LEA EAX,[EBP + -0x2c]
0087a818 : MOVSS dword ptr [EBP + -0x34],XMM0
0087a81d : MOVSS XMM0,dword ptr [EBP + -0x44]
0087a822 : SUBSS XMM0,dword ptr [EBP + -0x20]
0087a827 : PUSH EAX
0087a828 : MOV ECX,EAX
0087a82a : PUSH ECX
0087a82b : MOVSS dword ptr [EBP + -0x2c],XMM0
0087a830 : MOVSS dword ptr [EBP + -0x28],XMM2
0087a835 : MOVSS dword ptr [EBP + -0x24],XMM1
0087a83a : CALL 0x004ff722
0087a83f : XORPS XMM0,XMM0
0087a842 : MOVSS XMM2,dword ptr [0x00d72c20]
0087a84a : MOVSS XMM1,dword ptr [EBP + -0x24]
0087a84f : MOVSS XMM3,dword ptr [EBP + -0x10]
0087a854 : MOV ESI,dword ptr [EBP + -0x14]
0087a857 : MOVSS dword ptr [EBP + -0x28],XMM0
0087a85c : MOVSS XMM0,dword ptr [EBP + -0x2c]
0087a861 : MULSS XMM0,XMM2
0087a865 : MULSS XMM1,XMM2
0087a869 : MOVSS XMM2,dword ptr [EBP + -0x38]
0087a86e : SUBSS XMM2,XMM0
0087a872 : MOVSS XMM0,dword ptr [EBP + -0x30]
0087a877 : PUSH 0x0
0087a879 : LEA EDX,[EBP + -0x50]
0087a87c : SUBSS XMM0,XMM1
0087a880 : PUSH EDX
0087a881 : LEA EAX,[EBP + -0x38]
0087a884 : LEA ECX,[EBP + -0x20]
0087a887 : LEA EDI,[EBP + -0x44]
0087a88a : MOVSS dword ptr [EBP + -0x20],XMM2
0087a88f : MOVSS dword ptr [EBP + -0x1c],XMM3
0087a894 : MOVSS dword ptr [EBP + -0x18],XMM0
0087a899 : CALL 0x007f1b30
0087a89e : MOV ECX,dword ptr [EBP + -0xc]
0087a8a1 : MOV dword ptr FS:[0x0],ECX
0087a8a8 : POP ECX
0087a8a9 : POP EDI
0087a8aa : POP ESI
0087a8ab : POP EBX
0087a8ac : MOV ESP,EBP
0087a8ae : POP EBP
0087a8af : RET
