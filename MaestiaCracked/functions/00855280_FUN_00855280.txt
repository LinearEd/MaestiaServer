PROGRAM  : Maestia.exe
FUNCTION : FUN_00855280
ENTRY    : 00855280
BODY     : [[00855280, 008553be]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00855280(float *param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float *unaff_EDI;
  float10 fVar5;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  
  FUN_00444ff0();
  fVar1 = param_1[2];
  fVar2 = param_1[1];
  fVar3 = *param_1;
  fVar5 = (float10)FUN_0040f460(local_10 * local_10 + local_14 * local_14 + local_18 * local_18);
  fVar4 = (float)((float10)(fVar1 * local_10 + fVar2 * local_14 + fVar3 * local_18 + local_c) /
                 fVar5);
  *unaff_EDI = fVar3 - local_18 * fVar4;
  unaff_EDI[1] = fVar2 - local_14 * fVar4;
  unaff_EDI[2] = fVar1 - local_10 * fVar4;
  D3DXVec3Normalize();
  return;
}



============================================================
DISASSEMBLY
============================================================
00855280 : PUSH EBP
00855281 : MOV EBP,ESP
00855283 : AND ESP,0xfffffff8
00855286 : SUB ESP,0x30
00855289 : MOV EAX,dword ptr [EAX + 0x3e8]
0085528f : MOVSS XMM0,dword ptr [EAX + 0x140]
00855297 : MOVSS dword ptr [ESP + 0x14],XMM0
0085529d : XORPS XMM0,XMM0
008552a0 : PUSH EBX
008552a1 : MOV EBX,dword ptr [EBP + 0x8]
008552a4 : MOVSS dword ptr [ESP + 0x1c],XMM0
008552aa : MOVSS XMM0,dword ptr [EAX + 0x144]
008552b2 : PUSH ESI
008552b3 : LEA EAX,[ESP + 0x1c]
008552b7 : LEA ESI,[ESP + 0x28]
008552bb : MOVSS dword ptr [ESP + 0x24],XMM0
008552c1 : CALL 0x00444ff0
008552c6 : MOVSS XMM0,dword ptr [EBX + 0x8]
008552cb : MOVSS dword ptr [ESP + 0x14],XMM0
008552d1 : MOVSS XMM0,dword ptr [EBX + 0x4]
008552d6 : MOVSS dword ptr [ESP + 0x10],XMM0
008552dc : MOVSS XMM0,dword ptr [EBX]
008552e0 : MOVSS dword ptr [ESP + 0xc],XMM0
008552e6 : FLD float ptr [ESP + 0xc]
008552ea : MOVSS XMM0,dword ptr [ESP + 0x30]
008552f0 : FMUL float ptr [ESP + 0x28]
008552f4 : MOVAPS XMM1,XMM0
008552f7 : FLD float ptr [ESP + 0x10]
008552fb : MULSS XMM1,XMM0
008552ff : FMUL float ptr [ESP + 0x2c]
00855303 : MOVSS XMM0,dword ptr [ESP + 0x2c]
00855309 : MOVAPS XMM2,XMM0
0085530c : MULSS XMM2,XMM0
00855310 : MOVSS XMM0,dword ptr [ESP + 0x28]
00855316 : FADDP
00855318 : FLD float ptr [ESP + 0x14]
0085531c : ADDSS XMM1,XMM2
00855320 : FMUL float ptr [ESP + 0x30]
00855324 : MOVAPS XMM2,XMM0
00855327 : MULSS XMM2,XMM0
0085532b : PUSH ECX
0085532c : FADDP
0085532e : ADDSS XMM1,XMM2
00855332 : MOVSS dword ptr [ESP],XMM1
00855337 : FADD float ptr [ESP + 0x38]
0085533b : FSTP float ptr [ESP + 0x1c]
0085533f : CALL 0x0040f460
00855344 : FDIVR float ptr [ESP + 0x1c]
00855348 : MOVSS XMM0,dword ptr [ESP + 0x2c]
0085534e : ADD ESP,0x4
00855351 : PUSH EDI
00855352 : PUSH EDI
00855353 : FSTP float ptr [ESP + 0x20]
00855357 : MOVSS XMM1,dword ptr [ESP + 0x20]
0085535d : MULSS XMM0,XMM1
00855361 : MOVAPS XMM2,XMM0
00855364 : MOVSS XMM0,dword ptr [ESP + 0x34]
0085536a : MULSS XMM0,XMM1
0085536e : MOVAPS XMM3,XMM0
00855371 : MOVSS XMM0,dword ptr [ESP + 0x38]
00855377 : MULSS XMM0,XMM1
0085537b : MOVAPS XMM1,XMM0
0085537e : MOVSS XMM0,dword ptr [ESP + 0x14]
00855384 : SUBSS XMM0,XMM2
00855388 : MOVAPS XMM2,XMM0
0085538b : MOVSS XMM0,dword ptr [ESP + 0x18]
00855391 : SUBSS XMM0,XMM3
00855395 : MOVAPS XMM3,XMM0
00855398 : MOVSS XMM0,dword ptr [ESP + 0x1c]
0085539e : SUBSS XMM0,XMM1
008553a2 : MOVSS dword ptr [EDI],XMM2
008553a6 : MOVSS dword ptr [EDI + 0x4],XMM3
008553ab : MOVSS dword ptr [EDI + 0x8],XMM0
008553b0 : CALL 0x004ff722
008553b5 : POP ESI
008553b6 : MOV EAX,EDI
008553b8 : POP EBX
008553b9 : MOV ESP,EBP
008553bb : POP EBP
008553bc : RET 0x4
