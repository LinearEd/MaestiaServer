PROGRAM  : Maestia.exe
FUNCTION : FUN_00600bc0
ENTRY    : 00600bc0
BODY     : [[00600bc0, 00600dc7] [00600dd0, 00600e1c] [00600e20, 00600e5e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00600bc0(void)

{
  float *pfVar1;
  float fVar2;
  undefined4 uVar3;
  uint uVar4;
  int in_ECX;
  int *piVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  float local_10;
  float local_c;
  uint local_8;
  
  if (*(int *)(in_ECX + 0x7c) != 0) {
    iVar7 = *(int *)(in_ECX + 0xdc) + 1;
    FUN_005fa0f0(iVar7,0x20);
    *(int *)(in_ECX + 0xd0) = iVar7;
    FUN_005fb8b0(*(int *)(in_ECX + 0xdc) + 1,1);
    *(undefined4 *)(in_ECX + 0x114) = 0xf149f2ca;
    *(undefined4 *)(in_ECX + 0x118) = 0xf149f2ca;
    if (*(char *)(in_ECX + 4) != '\0') {
      FUN_005fb4e0();
    }
    FUN_005fdf30();
    local_8 = 0;
    FUN_005fa0f0(*(undefined4 *)(in_ECX + 0x60),0x20);
    FUN_005fa0f0(*(undefined4 *)(in_ECX + 0x60),0x20);
    FUN_005fa0f0(*(undefined4 *)(in_ECX + 0x60),0x20);
    uVar3 = *(undefined4 *)(in_ECX + 0x60);
    FUN_005fa0f0(uVar3,0x20);
    *(undefined4 *)(in_ECX + 0xb4) = uVar3;
    FUN_005fa030(*(undefined4 *)(in_ECX + 0x60),0x20);
    FUN_005fa030(*(undefined4 *)(in_ECX + 0x60),0x20);
    *(undefined4 *)(in_ECX + 0x134) = 0;
    *(undefined4 *)(in_ECX + 0x144) = 0;
    local_c = *(float *)(*(int *)(*(int *)(in_ECX + 0x3c) +
                                 (*(uint *)**(undefined4 **)(in_ECX + 0x88) >> 10) * 4) + 4 +
                        (*(uint *)**(undefined4 **)(in_ECX + 0x88) & 0x3ff) * 8);
    if (*(int *)(in_ECX + 0x7c) != 0) {
      uVar4 = 0;
      do {
        local_8 = local_8 + 1;
        local_10 = local_c;
        if (local_8 < *(uint *)(in_ECX + 0x7c)) {
          uVar6 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x88) + (local_8 >> 10) * 4) +
                           (local_8 & 0x3ff) * 4);
          local_10 = *(float *)(*(int *)(*(int *)(in_ECX + 0x3c) + (uVar6 >> 10) * 4) + 4 +
                               (uVar6 & 0x3ff) * 8);
        }
        uVar6 = uVar4;
        if (uVar4 < *(uint *)(in_ECX + 0x74)) {
          piVar5 = (int *)(*(int *)(in_ECX + 0x70) + uVar4 * 4);
          do {
            if (*(float *)(*piVar5 + 4) < local_c == (*(float *)(*piVar5 + 4) == local_c)) break;
            uVar6 = uVar6 + 1;
            piVar5 = piVar5 + 1;
          } while (uVar6 < *(uint *)(in_ECX + 0x74));
        }
        uVar4 = FUN_005fc270(local_c,local_10,uVar4,uVar6 - uVar4);
        if (*(int *)(in_ECX + 0xbc) == 0) {
          if (uVar4 != 0) {
            FUN_005f9670(in_ECX + 0x8c);
          }
          FUN_005ffdc0(in_ECX + 0x8c,local_c);
        }
        else {
          FUN_00600890(local_c,local_10,uVar4);
        }
        if ((uVar4 & 2) != 0) {
          uVar4 = 0;
          uVar8 = 0;
          if (*(int *)(in_ECX + 0x90) != 0) {
            do {
              iVar7 = *(int *)(*(int *)(in_ECX + 0x8c) + uVar4 * 4);
              if ((*(byte *)(iVar7 + 0x2c) & 2) == 0) {
                *(int *)(*(int *)(in_ECX + 0x8c) + uVar8 * 4) = iVar7;
                uVar8 = uVar8 + 1;
              }
              uVar4 = uVar4 + 1;
            } while (uVar4 < *(uint *)(in_ECX + 0x90));
          }
          if (uVar8 < *(uint *)(in_ECX + 0x90)) {
            *(uint *)(in_ECX + 0x90) = uVar8;
          }
        }
        local_c = local_10;
        uVar4 = uVar6;
      } while (local_8 < *(uint *)(in_ECX + 0x7c));
    }
    if ((*(char *)(in_ECX + 8) != '\0') && (uVar4 = 0, *(int *)(in_ECX + 0x104) != 0)) {
      do {
        iVar7 = *(int *)(*(int *)(in_ECX + 0x110) + (uVar4 >> 10) * 4);
        fVar2 = *(float *)(iVar7 + 4 + (uVar4 & 0x3ff) * 8);
        pfVar1 = (float *)(iVar7 + (uVar4 & 0x3ff) * 8);
        uVar4 = uVar4 + 1;
        pfVar1[1] = -*pfVar1;
        *pfVar1 = fVar2;
      } while (uVar4 < *(uint *)(in_ECX + 0x104));
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00600bc0 : SUB ESP,0x10
00600bc3 : PUSH ESI
00600bc4 : MOV ESI,ECX
00600bc6 : CMP dword ptr [ESI + 0x7c],0x0
00600bca : JZ 0x00600e5a
00600bd0 : PUSH EBX
00600bd1 : PUSH EBP
00600bd2 : PUSH EDI
00600bd3 : MOV EDI,dword ptr [ESI + 0xdc]
00600bd9 : PUSH 0x20
00600bdb : INC EDI
00600bdc : LEA EBX,[ESI + 0xcc]
00600be2 : PUSH EDI
00600be3 : MOV ECX,EBX
00600be5 : CALL 0x005fa0f0
00600bea : MOV dword ptr [EBX + 0x4],EDI
00600bed : MOV EAX,dword ptr [ESI + 0xdc]
00600bf3 : PUSH 0x1
00600bf5 : INC EAX
00600bf6 : PUSH EAX
00600bf7 : MOV ECX,ESI
00600bf9 : CALL 0x005fb8b0
00600bfe : FLD float ptr [0x00b9571c]
00600c04 : CMP byte ptr [ESI + 0x4],0x0
00600c08 : FST float ptr [ESI + 0x114]
00600c0e : FSTP float ptr [ESI + 0x118]
00600c14 : JZ 0x00600c1d
00600c16 : MOV ECX,ESI
00600c18 : CALL 0x005fb4e0
00600c1d : MOV ECX,ESI
00600c1f : CALL 0x005fdf30
00600c24 : MOV EDX,dword ptr [ESI + 0x60]
00600c27 : PUSH 0x20
00600c29 : LEA ECX,[ESI + 0x8c]
00600c2f : PUSH EDX
00600c30 : MOV dword ptr [ESP + 0x20],0x0
00600c38 : XOR EBX,EBX
00600c3a : CALL 0x005fa0f0
00600c3f : MOV EAX,dword ptr [ESI + 0x60]
00600c42 : PUSH 0x20
00600c44 : PUSH EAX
00600c45 : LEA ECX,[ESI + 0x98]
00600c4b : CALL 0x005fa0f0
00600c50 : MOV ECX,dword ptr [ESI + 0x60]
00600c53 : PUSH 0x20
00600c55 : PUSH ECX
00600c56 : LEA ECX,[ESI + 0xa4]
00600c5c : CALL 0x005fa0f0
00600c61 : MOV EDI,dword ptr [ESI + 0x60]
00600c64 : PUSH 0x20
00600c66 : LEA EBP,[ESI + 0xb0]
00600c6c : PUSH EDI
00600c6d : MOV ECX,EBP
00600c6f : CALL 0x005fa0f0
00600c74 : MOV dword ptr [EBP + 0x4],EDI
00600c77 : MOV EDX,dword ptr [ESI + 0x60]
00600c7a : PUSH 0x20
00600c7c : PUSH EDX
00600c7d : LEA ECX,[ESI + 0x11c]
00600c83 : CALL 0x005fa030
00600c88 : MOV EAX,dword ptr [ESI + 0x60]
00600c8b : PUSH 0x20
00600c8d : PUSH EAX
00600c8e : LEA ECX,[ESI + 0x128]
00600c94 : CALL 0x005fa030
00600c99 : MOV EDX,dword ptr [ESI + 0x88]
00600c9f : MOV EDI,dword ptr [ESI + 0x3c]
00600ca2 : XOR ECX,ECX
00600ca4 : MOV dword ptr [ESI + 0x134],ECX
00600caa : MOV dword ptr [ESI + 0x144],ECX
00600cb0 : MOV EAX,dword ptr [EDX]
00600cb2 : MOV EAX,dword ptr [EAX]
00600cb4 : MOV EDX,EAX
00600cb6 : SHR EDX,0xa
00600cb9 : MOV EDX,dword ptr [EDI + EDX*0x4]
00600cbc : AND EAX,0x3ff
00600cc1 : FLD float ptr [EDX + EAX*0x8 + 0x4]
00600cc5 : FSTP float ptr [ESP + 0x10]
00600cc9 : FLD float ptr [ESP + 0x10]
00600ccd : FSTP float ptr [ESP + 0x14]
00600cd1 : CMP dword ptr [ESI + 0x7c],ECX
00600cd4 : JBE 0x00600e0b
00600cda : LEA EBX,[EBX]
00600ce0 : MOV EBP,dword ptr [ESP + 0x18]
00600ce4 : INC EBP
00600ce5 : MOV dword ptr [ESP + 0x18],EBP
00600ce9 : CMP EBP,dword ptr [ESI + 0x7c]
00600cec : JNC 0x00600d1f
00600cee : MOV ECX,dword ptr [ESI + 0x88]
00600cf4 : MOV EAX,EBP
00600cf6 : SHR EAX,0xa
00600cf9 : MOV EAX,dword ptr [ECX + EAX*0x4]
00600cfc : MOV EDX,EBP
00600cfe : AND EDX,0x3ff
00600d04 : MOV EAX,dword ptr [EAX + EDX*0x4]
00600d07 : MOV EDX,dword ptr [ESI + 0x3c]
00600d0a : MOV ECX,EAX
00600d0c : SHR ECX,0xa
00600d0f : MOV ECX,dword ptr [EDX + ECX*0x4]
00600d12 : AND EAX,0x3ff
00600d17 : FLD float ptr [ECX + EAX*0x8 + 0x4]
00600d1b : FSTP float ptr [ESP + 0x10]
00600d1f : FLD float ptr [ESP + 0x14]
00600d23 : MOV EDX,EBX
00600d25 : CMP EBX,dword ptr [ESI + 0x74]
00600d28 : JNC 0x00600d47
00600d2a : MOV EAX,dword ptr [ESI + 0x70]
00600d2d : LEA ECX,[EAX + EBX*0x4]
00600d30 : MOV EAX,dword ptr [ECX]
00600d32 : FLD float ptr [EAX + 0x4]
00600d35 : FCOMP
00600d37 : FNSTSW AX
00600d39 : TEST AH,0x41
00600d3c : JP 0x00600d47
00600d3e : INC EBX
00600d3f : ADD ECX,0x4
00600d42 : CMP EBX,dword ptr [ESI + 0x74]
00600d45 : JC 0x00600d30
00600d47 : FLD float ptr [ESP + 0x10]
00600d4b : MOV ECX,EBX
00600d4d : SUB ECX,EDX
00600d4f : PUSH ECX
00600d50 : PUSH EDX
00600d51 : SUB ESP,0x8
00600d54 : FSTP float ptr [ESP + 0x4]
00600d58 : MOV ECX,ESI
00600d5a : FSTP float ptr [ESP]
00600d5d : CALL 0x005fc270
00600d62 : CMP dword ptr [ESI + 0xbc],0x0
00600d69 : MOV dword ptr [ESP + 0x1c],EAX
00600d6d : JZ 0x00600d8b
00600d6f : FLD float ptr [ESP + 0x10]
00600d73 : PUSH EAX
00600d74 : SUB ESP,0x8
00600d77 : FSTP float ptr [ESP + 0x4]
00600d7b : MOV ECX,ESI
00600d7d : FLD float ptr [ESP + 0x20]
00600d81 : FSTP float ptr [ESP]
00600d84 : CALL 0x00600890
00600d89 : JMP 0x00600db3
00600d8b : TEST EAX,EAX
00600d8d : JZ 0x00600d9d
00600d8f : LEA EAX,[ESI + 0x8c]
00600d95 : PUSH EAX
00600d96 : MOV ECX,ESI
00600d98 : CALL 0x005f9670
00600d9d : FLD float ptr [ESP + 0x14]
00600da1 : PUSH ECX
00600da2 : LEA EAX,[ESI + 0x8c]
00600da8 : FSTP float ptr [ESP]
00600dab : PUSH EAX
00600dac : MOV ECX,ESI
00600dae : CALL 0x005ffdc0
00600db3 : TEST byte ptr [ESP + 0x1c],0x2
00600db8 : JZ 0x00600dfa
00600dba : XOR EDX,EDX
00600dbc : XOR EDI,EDI
00600dbe : CMP dword ptr [ESI + 0x90],EDX
00600dc4 : JBE 0x00600dec
00600dc6 : JMP 0x00600dd0
00600dd0 : MOV EAX,dword ptr [ESI + 0x8c]
00600dd6 : MOV ECX,dword ptr [EAX + EDX*0x4]
00600dd9 : TEST byte ptr [ECX + 0x2c],0x2
00600ddd : JNZ 0x00600de3
00600ddf : MOV dword ptr [EAX + EDI*0x4],ECX
00600de2 : INC EDI
00600de3 : INC EDX
00600de4 : CMP EDX,dword ptr [ESI + 0x90]
00600dea : JC 0x00600dd0
00600dec : CMP EDI,dword ptr [ESI + 0x90]
00600df2 : JNC 0x00600dfa
00600df4 : MOV dword ptr [ESI + 0x90],EDI
00600dfa : FLD float ptr [ESP + 0x10]
00600dfe : FSTP float ptr [ESP + 0x14]
00600e02 : CMP EBP,dword ptr [ESI + 0x7c]
00600e05 : JC 0x00600ce0
00600e0b : CMP byte ptr [ESI + 0x8],0x0
00600e0f : JZ 0x00600e57
00600e11 : XOR ECX,ECX
00600e13 : CMP dword ptr [ESI + 0x104],ECX
00600e19 : JBE 0x00600e57
00600e1b : JMP 0x00600e20
00600e20 : MOV EAX,dword ptr [ESI + 0x110]
00600e26 : MOV EDX,ECX
00600e28 : SHR EDX,0xa
00600e2b : MOV EDX,dword ptr [EAX + EDX*0x4]
00600e2e : MOV EDI,ECX
00600e30 : AND EDI,0x3ff
00600e36 : FLD float ptr [EDX + EDI*0x8 + 0x4]
00600e3a : LEA EAX,[EDX + EDI*0x8]
00600e3d : FSTP float ptr [ESP + 0x1c]
00600e41 : INC ECX
00600e42 : FLD float ptr [EAX]
00600e44 : FCHS
00600e46 : FSTP float ptr [EAX + 0x4]
00600e49 : FLD float ptr [ESP + 0x1c]
00600e4d : FSTP float ptr [EAX]
00600e4f : CMP ECX,dword ptr [ESI + 0x104]
00600e55 : JC 0x00600e20
00600e57 : POP EDI
00600e58 : POP EBP
00600e59 : POP EBX
00600e5a : POP ESI
00600e5b : ADD ESP,0x10
00600e5e : RET
