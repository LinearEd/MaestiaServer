PROGRAM  : Maestia.exe
FUNCTION : FUN_00501410
ENTRY    : 00501410
BODY     : [[00501410, 005014fe]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00501410(int param_1)

{
  byte *pbVar1;
  double dVar2;
  int iVar3;
  float10 fVar4;
  float10 fVar5;
  undefined4 uVar6;
  
  if (((*(int *)(param_1 + 8) != 0) &&
      (iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar3 == 4)) &&
     (1 < *(int *)(param_1 + 0x1c))) {
    uVar6 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(0);
    fVar4 = (float10)FUN_00527730(uVar6);
    uVar6 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(1);
    fVar5 = (float10)FUN_00527730(uVar6);
    iVar3 = FUN_0054ad70((float)((float10)20.0 * (float10)(double)fVar4),
                         (float)(fVar5 * (float10)20.0));
    pbVar1 = *(byte **)(param_1 + 4);
    if (iVar3 == -1) {
      if (4 < *pbVar1) {
        FUN_00526400();
      }
      dVar2 = -1.0;
      *pbVar1 = 3;
    }
    else {
      if (4 < *pbVar1) {
        FUN_00526400();
      }
      dVar2 = (double)iVar3;
      *pbVar1 = 3;
      if (iVar3 < 0) {
        *(double *)(pbVar1 + 4) = dVar2 + 4294967296.0;
        return;
      }
    }
    *(double *)(pbVar1 + 4) = dVar2;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00501410 : SUB ESP,0x8
00501413 : PUSH ESI
00501414 : MOV ESI,dword ptr [ESP + 0x10]
00501418 : CMP dword ptr [ESI + 0x8],0x0
0050141c : JZ 0x005014fa
00501422 : MOV ECX,dword ptr [ESI + 0x8]
00501425 : MOV EAX,dword ptr [ECX]
00501427 : MOV EDX,dword ptr [EAX + 0x8]
0050142a : CALL EDX
0050142c : CMP EAX,0x4
0050142f : JNZ 0x005014fa
00501435 : MOV EAX,dword ptr [ESI + 0x8]
00501438 : PUSH EDI
00501439 : TEST EAX,EAX
0050143b : JZ 0x00501442
0050143d : LEA EDI,[EAX + -0x68]
00501440 : JMP 0x00501444
00501442 : XOR EDI,EDI
00501444 : CMP dword ptr [ESI + 0x1c],0x2
00501448 : JL 0x005014f9
0050144e : MOV EAX,dword ptr [ESI + 0x18]
00501451 : PUSH EAX
00501452 : PUSH 0x0
00501454 : MOV ECX,ESI
00501456 : CALL 0x00526260
0050145b : MOV ECX,EAX
0050145d : CALL 0x00527730
00501462 : FSTP double ptr [ESP + 0x8]
00501466 : MOV ECX,dword ptr [ESI + 0x18]
00501469 : PUSH ECX
0050146a : PUSH 0x1
0050146c : MOV ECX,ESI
0050146e : CALL 0x00526260
00501473 : MOV ECX,EAX
00501475 : CALL 0x00527730
0050147a : FLD double ptr [0x00b86058]
00501480 : MOV ECX,dword ptr [EDI + 0xa0]
00501486 : FMUL ST1
00501488 : FXCH
0050148a : SUB ESP,0x8
0050148d : FSTP float ptr [ESP + 0x1c]
00501491 : FLD float ptr [ESP + 0x1c]
00501495 : FSTP float ptr [ESP + 0x4]
00501499 : FMUL double ptr [ESP + 0x10]
0050149d : FSTP float ptr [ESP + 0x1c]
005014a1 : FLD float ptr [ESP + 0x1c]
005014a5 : FSTP float ptr [ESP]
005014a8 : CALL 0x0054ad70
005014ad : MOV ESI,dword ptr [ESI + 0x4]
005014b0 : MOV EDI,EAX
005014b2 : CMP EDI,-0x1
005014b5 : JZ 0x005014e1
005014b7 : CMP byte ptr [ESI],0x5
005014ba : JC 0x005014c3
005014bc : MOV ECX,ESI
005014be : CALL 0x00526400
005014c3 : MOV dword ptr [ESP + 0x14],EDI
005014c7 : FILD dword ptr [ESP + 0x14]
005014cb : MOV byte ptr [ESI],0x3
005014ce : TEST EDI,EDI
005014d0 : JGE 0x005014f6
005014d2 : FADD double ptr [0x00cdf6f8]
005014d8 : POP EDI
005014d9 : FSTP double ptr [ESI + 0x4]
005014dc : POP ESI
005014dd : ADD ESP,0x8
005014e0 : RET
005014e1 : CMP byte ptr [ESI],0x5
005014e4 : JC 0x005014ed
005014e6 : MOV ECX,ESI
005014e8 : CALL 0x00526400
005014ed : FLD double ptr [0x00b86090]
005014f3 : MOV byte ptr [ESI],0x3
005014f6 : FSTP double ptr [ESI + 0x4]
005014f9 : POP EDI
005014fa : POP ESI
005014fb : ADD ESP,0x8
005014fe : RET
