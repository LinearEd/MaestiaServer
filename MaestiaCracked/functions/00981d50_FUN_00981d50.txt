PROGRAM  : Maestia.exe
FUNCTION : FUN_00981d50
ENTRY    : 00981d50
BODY     : [[00981d50, 00981e9c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00981d50(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined4 *unaff_ESI;
  undefined1 local_9c [64];
  undefined1 local_5c [4];
  undefined4 local_58;
  int local_54;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  int local_20;
  undefined4 local_1c;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b20c82;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_58 = param_4;
  local_14 = uVar1;
  FUN_00423550(&param_2);
  if (local_54 == *(int *)(param_1 + 0x88)) {
    FUN_004231a0(uVar1);
    local_8 = 0;
    FUN_00405eb0(local_58,0,0xffffffff);
    local_1c = param_3;
    local_34 = *unaff_ESI;
    local_30 = unaff_ESI[1];
    local_20 = in_ECX % 20000;
    local_2c = unaff_ESI[2];
    uVar2 = FUN_004237d0(local_9c,&param_2);
    local_8._0_1_ = 1;
    FUN_004234b0(local_5c,uVar2);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00423210(local_9c);
    *(undefined1 *)(param_1 + 0xbd) = 1;
    local_8 = 0xffffffff;
    FUN_00486950();
  }
  else {
    FUN_00405eb0(local_58,0,0xffffffff);
    *(undefined4 *)(local_54 + 0x2c) = *unaff_ESI;
    *(undefined4 *)(local_54 + 0x30) = unaff_ESI[1];
    *(undefined4 *)(local_54 + 0x34) = unaff_ESI[2];
    *(undefined4 *)(local_54 + 0x44) = param_3;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00981d50 : PUSH EBP
00981d51 : MOV EBP,ESP
00981d53 : PUSH -0x1
00981d55 : PUSH 0xb20c82
00981d5a : MOV EAX,FS:[0x0]
00981d60 : PUSH EAX
00981d61 : SUB ESP,0x90
00981d67 : MOV EAX,[0x00d66fa0]
00981d6c : XOR EAX,EBP
00981d6e : MOV dword ptr [EBP + -0x10],EAX
00981d71 : PUSH EBX
00981d72 : PUSH EDI
00981d73 : PUSH EAX
00981d74 : LEA EAX,[EBP + -0xc]
00981d77 : MOV FS:[0x0],EAX
00981d7d : MOV EDI,ECX
00981d7f : MOV EAX,dword ptr [EBP + 0x14]
00981d82 : MOV EBX,dword ptr [EBP + 0x8]
00981d85 : LEA EDX,[EBP + 0xc]
00981d88 : MOV dword ptr [EBP + -0x54],EAX
00981d8b : LEA ECX,[EBX + 0x84]
00981d91 : PUSH EDX
00981d92 : LEA EAX,[EBP + -0x50]
00981d95 : CALL 0x00423550
00981d9a : MOV EAX,dword ptr [EBX + 0x88]
00981da0 : MOV ECX,dword ptr [EBP + -0x50]
00981da3 : CMP ECX,EAX
00981da5 : JZ 0x00981dd6
00981da7 : MOV EAX,dword ptr [EBP + -0x54]
00981daa : PUSH -0x1
00981dac : PUSH 0x0
00981dae : PUSH EAX
00981daf : ADD ECX,0x10
00981db2 : CALL 0x00405eb0
00981db7 : FLD float ptr [ESI]
00981db9 : MOV EAX,dword ptr [EBP + -0x50]
00981dbc : MOV ECX,dword ptr [EBP + 0x10]
00981dbf : FSTP float ptr [EAX + 0x2c]
00981dc2 : FLD float ptr [ESI + 0x4]
00981dc5 : FSTP float ptr [EAX + 0x30]
00981dc8 : FLD float ptr [ESI + 0x8]
00981dcb : FSTP float ptr [EAX + 0x34]
00981dce : MOV dword ptr [EAX + 0x44],ECX
00981dd1 : JMP 0x00981e80
00981dd6 : LEA ECX,[EBP + -0x4c]
00981dd9 : CALL 0x004231a0
00981dde : MOV dword ptr [EBP + -0x4],0x0
00981de5 : MOV EDX,dword ptr [EBP + -0x54]
00981de8 : PUSH -0x1
00981dea : PUSH 0x0
00981dec : PUSH EDX
00981ded : LEA ECX,[EBP + -0x4c]
00981df0 : CALL 0x00405eb0
00981df5 : MOV EAX,dword ptr [EBP + 0x10]
00981df8 : MOV dword ptr [EBP + -0x18],EAX
00981dfb : MOVSS XMM0,dword ptr [ESI]
00981dff : MOV EAX,0x68db8bad
00981e04 : IMUL EDI
00981e06 : SAR EDX,0xd
00981e09 : MOV ECX,EDX
00981e0b : SHR ECX,0x1f
00981e0e : ADD ECX,EDX
00981e10 : IMUL ECX,ECX,0x4e20
00981e16 : MOVSS dword ptr [EBP + -0x30],XMM0
00981e1b : MOVSS XMM0,dword ptr [ESI + 0x4]
00981e20 : SUB EDI,ECX
00981e22 : LEA EDX,[EBP + 0xc]
00981e25 : PUSH EDX
00981e26 : LEA EAX,[EBP + 0xffffff68]
00981e2c : MOVSS dword ptr [EBP + -0x2c],XMM0
00981e31 : MOVSS XMM0,dword ptr [ESI + 0x8]
00981e36 : MOV dword ptr [EBP + -0x1c],EDI
00981e39 : PUSH EAX
00981e3a : LEA EDI,[EBP + -0x4c]
00981e3d : MOVSS dword ptr [EBP + -0x28],XMM0
00981e42 : CALL 0x004237d0
00981e47 : MOV byte ptr [EBP + -0x4],0x1
00981e4b : PUSH EAX
00981e4c : LEA ECX,[EBP + -0x58]
00981e4f : PUSH ECX
00981e50 : LEA EAX,[EBX + 0x84]
00981e56 : CALL 0x004234b0
00981e5b : MOV byte ptr [EBP + -0x4],0x0
00981e5f : LEA EDX,[EBP + 0xffffff68]
00981e65 : PUSH EDX
00981e66 : CALL 0x00423210
00981e6b : MOV byte ptr [EBX + 0xbd],0x1
00981e72 : MOV dword ptr [EBP + -0x4],0xffffffff
00981e79 : MOV ECX,EDI
00981e7b : CALL 0x00486950
00981e80 : MOV ECX,dword ptr [EBP + -0xc]
00981e83 : MOV dword ptr FS:[0x0],ECX
00981e8a : POP ECX
00981e8b : POP EDI
00981e8c : POP EBX
00981e8d : MOV ECX,dword ptr [EBP + -0x10]
00981e90 : XOR ECX,EBP
00981e92 : CALL 0x00633e6b
00981e97 : MOV ESP,EBP
00981e99 : POP EBP
00981e9a : RET 0x10
