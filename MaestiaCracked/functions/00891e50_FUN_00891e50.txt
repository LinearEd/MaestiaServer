PROGRAM  : Maestia.exe
FUNCTION : FUN_00891e50
ENTRY    : 00891e50
BODY     : [[00891e50, 00891fce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00891e50(char param_1)

{
  int iVar1;
  undefined1 uVar2;
  int *piVar3;
  int *piVar4;
  int *in_ECX;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int *local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b49429;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((char)in_ECX[0x51c] == '\0') {
    *(char *)(in_ECX + 0x51c) = param_1;
    if (param_1 == '\0') {
      local_18 = in_ECX;
      (**(code **)(*in_ECX + 0x200))(local_14);
      iVar1 = in_ECX[0xe3];
      local_2c = (LPCRITICAL_SECTION)(iVar1 + 0x70);
      local_20 = 0;
      local_28 = ".\\Objects\\AvaEffectMgr.cpp";
      local_24 = 0x22b;
      local_1c = 1;
      FUN_006ef1a0(&local_2c);
      local_8 = 0xffffffff;
      if (local_20 != 0) {
        LeaveCriticalSection(local_2c);
        local_20 = 0;
      }
      piVar3 = (int *)FUN_00a6bba0(0x192);
      if (piVar3 == (int *)0x0) {
        piVar3 = (int *)FUN_00a6bad0(0x192);
        if (piVar3 != (int *)0x0) {
          piVar4 = (int *)FUN_00a6b6b0();
          if (piVar4 == (int *)0x0) {
            FUN_00a6c940();
            piVar4 = piVar3;
          }
          in_ECX = local_18;
          if (*(char *)(iVar1 + 0x5c) != '\0') {
            (**(code **)(*piVar4 + 0xd4))();
            FUN_00a6b5d0();
            in_ECX = local_18;
          }
        }
      }
      else {
        piVar4 = (int *)FUN_00a6b780();
        if (piVar4 == (int *)0x0) {
          FUN_00a6d020(iVar1,0);
          piVar4 = piVar3;
        }
        in_ECX = local_18;
        if (*(char *)(iVar1 + 0x5c) != '\0') {
          (**(code **)(*piVar4 + 0x24))();
          FUN_00a6c0d0();
          in_ECX = local_18;
        }
      }
    }
    else {
      uVar2 = (**(code **)(*in_ECX + 0x200))();
      FUN_00a6d180(in_ECX[0xe3],1,0,uVar2);
    }
    FUN_0088ba40(0,0);
    if ((char)in_ECX[0x51c] == '\x01') {
      *(undefined1 *)(in_ECX + 0x51c) = 0;
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00891e50 : PUSH EBP
00891e51 : MOV EBP,ESP
00891e53 : PUSH -0x1
00891e55 : PUSH 0xb49429
00891e5a : MOV EAX,FS:[0x0]
00891e60 : PUSH EAX
00891e61 : SUB ESP,0x1c
00891e64 : MOV EAX,[0x00d66fa0]
00891e69 : XOR EAX,EBP
00891e6b : MOV dword ptr [EBP + -0x10],EAX
00891e6e : PUSH EBX
00891e6f : PUSH ESI
00891e70 : PUSH EDI
00891e71 : PUSH EAX
00891e72 : LEA EAX,[EBP + -0xc]
00891e75 : MOV FS:[0x0],EAX
00891e7b : MOV AL,byte ptr [EBP + 0x8]
00891e7e : MOV ESI,ECX
00891e80 : CMP byte ptr [ESI + 0x1470],0x0
00891e87 : MOV dword ptr [EBP + -0x14],ESI
00891e8a : JNZ 0x00891fb1
00891e90 : MOV byte ptr [ESI + 0x1470],AL
00891e96 : TEST AL,AL
00891e98 : JZ 0x00891ec2
00891e9a : MOV EAX,dword ptr [ESI]
00891e9c : MOV EDX,dword ptr [EAX + 0x200]
00891ea2 : CALL EDX
00891ea4 : MOV ECX,dword ptr [ESI + 0x38c]
00891eaa : MOVZX EAX,AL
00891ead : PUSH EAX
00891eae : PUSH 0x0
00891eb0 : PUSH 0x1
00891eb2 : PUSH ECX
00891eb3 : MOV ECX,0x192
00891eb8 : CALL 0x00a6d180
00891ebd : JMP 0x00891f98
00891ec2 : MOV EDX,dword ptr [ESI]
00891ec4 : MOV EAX,dword ptr [EDX + 0x200]
00891eca : CALL EAX
00891ecc : MOV EBX,dword ptr [ESI + 0x38c]
00891ed2 : LEA EDX,[EBP + -0x28]
00891ed5 : LEA ECX,[EBX + 0x70]
00891ed8 : XOR EDI,EDI
00891eda : PUSH EDX
00891edb : MOV dword ptr [EBP + -0x1c],EDI
00891ede : MOV dword ptr [EBP + -0x28],ECX
00891ee1 : MOV dword ptr [EBP + -0x24],0xc43e84
00891ee8 : MOV dword ptr [EBP + -0x20],0x22b
00891eef : MOV dword ptr [EBP + -0x18],0x1
00891ef6 : CALL 0x006ef1a0
00891efb : MOV dword ptr [EBP + -0x4],0xffffffff
00891f02 : CMP dword ptr [EBP + -0x1c],EDI
00891f05 : JZ 0x00891f14
00891f07 : MOV EAX,dword ptr [EBP + -0x28]
00891f0a : PUSH EAX
00891f0b : CALL dword ptr [0x00b8511c]
00891f11 : MOV dword ptr [EBP + -0x1c],EDI
00891f14 : PUSH 0x192
00891f19 : MOV ECX,EBX
00891f1b : CALL 0x00a6bba0
00891f20 : MOV EDI,EAX
00891f22 : MOV ECX,EBX
00891f24 : TEST EDI,EDI
00891f26 : JZ 0x00891f56
00891f28 : CALL 0x00a6b780
00891f2d : MOV ESI,EAX
00891f2f : TEST ESI,ESI
00891f31 : JNZ 0x00891f3c
00891f33 : PUSH EAX
00891f34 : PUSH EBX
00891f35 : CALL 0x00a6d020
00891f3a : MOV ESI,EDI
00891f3c : CMP byte ptr [EBX + 0x5c],0x0
00891f40 : JZ 0x00891f95
00891f42 : MOV EDX,dword ptr [ESI]
00891f44 : MOV EAX,dword ptr [EDX + 0x24]
00891f47 : MOV ECX,ESI
00891f49 : CALL EAX
00891f4b : MOV ECX,ESI
00891f4d : MOV EDX,EBX
00891f4f : CALL 0x00a6c0d0
00891f54 : JMP 0x00891f95
00891f56 : PUSH 0x192
00891f5b : CALL 0x00a6bad0
00891f60 : MOV EDI,EAX
00891f62 : TEST EDI,EDI
00891f64 : JZ 0x00891f98
00891f66 : MOV ECX,EBX
00891f68 : CALL 0x00a6b6b0
00891f6d : MOV ESI,EAX
00891f6f : TEST ESI,ESI
00891f71 : JNZ 0x00891f7c
00891f73 : MOV ESI,EBX
00891f75 : CALL 0x00a6c940
00891f7a : MOV ESI,EDI
00891f7c : CMP byte ptr [EBX + 0x5c],0x0
00891f80 : JZ 0x00891f95
00891f82 : MOV EDX,dword ptr [ESI]
00891f84 : MOV EAX,dword ptr [EDX + 0xd4]
00891f8a : MOV ECX,ESI
00891f8c : CALL EAX
00891f8e : MOV ECX,EBX
00891f90 : CALL 0x00a6b5d0
00891f95 : MOV ESI,dword ptr [EBP + -0x14]
00891f98 : PUSH 0x0
00891f9a : PUSH 0x0
00891f9c : CALL 0x0088ba40
00891fa1 : CMP byte ptr [ESI + 0x1470],0x1
00891fa8 : JNZ 0x00891fb1
00891faa : MOV byte ptr [ESI + 0x1470],0x0
00891fb1 : MOV ECX,dword ptr [EBP + -0xc]
00891fb4 : MOV dword ptr FS:[0x0],ECX
00891fbb : POP ECX
00891fbc : POP EDI
00891fbd : POP ESI
00891fbe : POP EBX
00891fbf : MOV ECX,dword ptr [EBP + -0x10]
00891fc2 : XOR ECX,EBP
00891fc4 : CALL 0x00633e6b
00891fc9 : MOV ESP,EBP
00891fcb : POP EBP
00891fcc : RET 0x4
