PROGRAM  : Maestia.exe
FUNCTION : FUN_00a495c0
ENTRY    : 00a495c0
BODY     : [[00a495c0, 00a4972f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a495c0(void)

{
  float fVar1;
  short in_AX;
  float *pfVar2;
  int unaff_ESI;
  float fVar3;
  float fVar4;
  float fVar5;
  float local_10;
  float local_c;
  float local_8;
  
  if (*(int *)(unaff_ESI + 0x78) == 4) {
    if (in_AX != 0) {
      *(undefined1 *)(unaff_ESI + 0x261) = 0;
    }
    fVar3 = 0.0;
    fVar5 = (float)(int)in_AX * 0.005 + *(float *)(unaff_ESI + 0x228);
    *(float *)(unaff_ESI + 0x228) = fVar5;
    if (fVar5 < 14.0) {
      if (fVar5 <= 0.0) {
        *(undefined4 *)(unaff_ESI + 0x228) = 0;
      }
    }
    else {
      *(undefined4 *)(unaff_ESI + 0x228) = 0x41600000;
    }
    fVar5 = 0.0;
    fVar4 = 0.0;
    if ((*(int *)(unaff_ESI + 0x54) != 0) && (*(int *)(*(int *)(unaff_ESI + 0x54) + 0x18b4) != 0)) {
      pfVar2 = (float *)FUN_0087dca0(&local_10);
      fVar3 = *pfVar2;
      fVar5 = pfVar2[1];
      fVar4 = pfVar2[2];
    }
    fVar1 = *(float *)(unaff_ESI + 0x228);
    local_10 = *(float *)(unaff_ESI + 0x238) +
               fVar1 * (fVar3 - *(float *)(unaff_ESI + 0x238)) * 0.05882353;
    local_c = *(float *)(unaff_ESI + 0x23c) +
              (((float)(*(int *)(unaff_ESI + 0x1d0) + 1) * fVar1 * 0.014 +
               fVar1 * 0.05882353 * (fVar5 - *(float *)(unaff_ESI + 0x23c))) -
              (fVar1 / (float)(*(int *)(unaff_ESI + 0x1d0) + 10)) * 0.7);
    local_8 = *(float *)(unaff_ESI + 0x240) +
              fVar1 * (fVar4 - *(float *)(unaff_ESI + 0x240)) * 0.05882353;
    (**(code **)(**(int **)(unaff_ESI + 0x30) + 0xc))(&local_10);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a495c0 : PUSH EBP
00a495c1 : MOV EBP,ESP
00a495c3 : SUB ESP,0xc
00a495c6 : CMP dword ptr [ESI + 0x78],0x4
00a495ca : JNZ 0x00a4972c
00a495d0 : TEST AX,AX
00a495d3 : JZ 0x00a495dc
00a495d5 : MOV byte ptr [ESI + 0x261],0x0
00a495dc : MOVSS XMM1,dword ptr [0x00cdf348]
00a495e4 : XORPS XMM0,XMM0
00a495e7 : CWDE
00a495e8 : CVTSI2SS XMM3,EAX
00a495ec : MULSS XMM3,dword ptr [0x00cdf2e4]
00a495f4 : ADDSS XMM3,dword ptr [ESI + 0x228]
00a495fc : COMISS XMM3,XMM1
00a495ff : MOVSS dword ptr [ESI + 0x228],XMM3
00a49607 : JC 0x00a49613
00a49609 : MOVSS dword ptr [ESI + 0x228],XMM1
00a49611 : JMP 0x00a49620
00a49613 : COMISS XMM0,XMM3
00a49616 : JC 0x00a49620
00a49618 : MOVSS dword ptr [ESI + 0x228],XMM0
00a49620 : MOV EAX,dword ptr [ESI + 0x54]
00a49623 : MOVAPS XMM1,XMM0
00a49626 : MOVAPS XMM2,XMM0
00a49629 : TEST EAX,EAX
00a4962b : JZ 0x00a49658
00a4962d : CMP dword ptr [EAX + 0x18b4],0x0
00a49634 : JZ 0x00a49658
00a49636 : MOV EAX,dword ptr [EAX + 0x18b4]
00a4963c : LEA ECX,[EBP + -0xc]
00a4963f : PUSH ECX
00a49640 : MOV ECX,0x7
00a49645 : CALL 0x0087dca0
00a4964a : MOVSS XMM0,dword ptr [EAX]
00a4964e : MOVSS XMM1,dword ptr [EAX + 0x4]
00a49653 : MOVSS XMM2,dword ptr [EAX + 0x8]
00a49658 : SUBSS XMM1,dword ptr [ESI + 0x23c]
00a49660 : SUBSS XMM0,dword ptr [ESI + 0x238]
00a49668 : MOV EAX,dword ptr [ESI + 0x1d0]
00a4966e : SUBSS XMM2,dword ptr [ESI + 0x240]
00a49676 : MOV ECX,dword ptr [ESI + 0x30]
00a49679 : MOVAPS XMM4,XMM1
00a4967c : MOVAPS XMM3,XMM0
00a4967f : MOVSS XMM0,dword ptr [ESI + 0x228]
00a49687 : LEA EDX,[EAX + 0x1]
00a4968a : MOVAPS XMM1,XMM0
00a4968d : MULSS XMM1,XMM3
00a49691 : MOVSS XMM3,dword ptr [0x00cdf388]
00a49699 : CVTSI2SS XMM5,EDX
00a4969d : MULSS XMM5,XMM0
00a496a1 : MOVAPS XMM6,XMM0
00a496a4 : MULSS XMM6,XMM3
00a496a8 : MULSS XMM6,XMM4
00a496ac : CVTSS2SD XMM4,XMM6
00a496b0 : CVTSS2SD XMM5,XMM5
00a496b4 : MULSD XMM5,qword ptr [0x00cdf380]
00a496bc : ADDSD XMM5,XMM4
00a496c0 : ADD EAX,0xa
00a496c3 : CVTSI2SS XMM4,EAX
00a496c7 : MOVAPS XMM6,XMM0
00a496ca : MULSS XMM1,XMM3
00a496ce : DIVSS XMM6,XMM4
00a496d2 : MULSS XMM0,XMM2
00a496d6 : MOVSS XMM2,dword ptr [ESI + 0x238]
00a496de : CVTSS2SD XMM4,XMM6
00a496e2 : MULSD XMM4,qword ptr [0x00cdf378]
00a496ea : ADDSS XMM2,XMM1
00a496ee : MOVSS XMM1,dword ptr [ESI + 0x23c]
00a496f6 : MULSS XMM0,XMM3
00a496fa : MOVSS XMM3,dword ptr [ESI + 0x240]
00a49702 : SUBSD XMM5,XMM4
00a49706 : CVTSD2SS XMM4,XMM5
00a4970a : ADDSS XMM1,XMM4
00a4970e : ADDSS XMM3,XMM0
00a49712 : MOVSS dword ptr [EBP + -0xc],XMM2
00a49717 : MOVSS dword ptr [EBP + -0x8],XMM1
00a4971c : MOVSS dword ptr [EBP + -0x4],XMM3
00a49721 : MOV EAX,dword ptr [ECX]
00a49723 : MOV EAX,dword ptr [EAX + 0xc]
00a49726 : LEA EDX,[EBP + -0xc]
00a49729 : PUSH EDX
00a4972a : CALL EAX
00a4972c : MOV ESP,EBP
00a4972e : POP EBP
00a4972f : RET
