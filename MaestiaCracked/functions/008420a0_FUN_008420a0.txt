PROGRAM  : Maestia.exe
FUNCTION : FUN_008420a0
ENTRY    : 008420a0
BODY     : [[008420a0, 008421ff]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008420a0(uint *param_1)

{
  uint uVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  undefined1 *puVar6;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2a039;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar1 = *param_1;
  if ((((uVar1 != 0) && (uVar1 >> 0x10 == 0x768)) &&
      (piVar3 = (int *)FUN_004049b0(uVar1,DAT_00d66fa0 ^ (uint)&stack0xfffffffc),
      piVar3 != (int *)0x0)) && (iVar4 = (**(code **)(*piVar3 + 0x3c))(), iVar4 != 0)) {
    iVar4 = (**(code **)(piVar3[0x7aa] + 4))();
    while (iVar4 != 0) {
      iVar5 = FUN_004f5680();
      if (iVar5 != 0) {
        FUN_00406f50();
      }
    }
    iVar4 = 0;
    iVar5 = 0;
    do {
      iVar2 = piVar3[(uint)*(byte *)((int)param_1 + 0xb) + iVar5 + 0x9d];
      if (iVar2 != 0) {
        puVar6 = (undefined1 *)FUN_006f0300(0x10);
        if (puVar6 == (undefined1 *)0x0) {
          puVar6 = (undefined1 *)0x0;
        }
        else {
          *(undefined4 *)(puVar6 + 4) = 0;
          *puVar6 = 1;
          puVar6[1] = 0;
          *(undefined4 *)(puVar6 + 8) = 0;
          *(undefined4 *)(puVar6 + 0xc) = 0;
        }
        local_8 = 0xffffffff;
        *(int *)(puVar6 + 8) = iVar2;
        if (iVar4 < 0x42) {
          puVar6[1] = (byte)iVar4 & 1;
          *(int *)(puVar6 + 4) = iVar4;
          *puVar6 = 1;
        }
        else {
          puVar6[1] = 0;
          *(int *)(puVar6 + 4) = iVar4;
          *puVar6 = 0;
        }
        FUN_00449610();
      }
      iVar5 = iVar5 + 0x16;
      iVar4 = iVar4 + 1;
    } while (iVar5 < 0x70c);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008420a0 : PUSH EBP
008420a1 : MOV EBP,ESP
008420a3 : PUSH -0x1
008420a5 : PUSH 0xb2a039
008420aa : MOV EAX,FS:[0x0]
008420b0 : PUSH EAX
008420b1 : SUB ESP,0x10
008420b4 : PUSH EBX
008420b5 : PUSH ESI
008420b6 : PUSH EDI
008420b7 : MOV EAX,[0x00d66fa0]
008420bc : XOR EAX,EBP
008420be : PUSH EAX
008420bf : LEA EAX,[EBP + -0xc]
008420c2 : MOV FS:[0x0],EAX
008420c8 : MOV EAX,dword ptr [EBP + 0x8]
008420cb : MOV EAX,dword ptr [EAX]
008420cd : TEST EAX,EAX
008420cf : JZ 0x008421ec
008420d5 : MOV ECX,EAX
008420d7 : SHR ECX,0x10
008420da : CMP ECX,0x768
008420e0 : JNZ 0x008421ec
008420e6 : PUSH EAX
008420e7 : CALL 0x004049b0
008420ec : MOV EDI,EAX
008420ee : ADD ESP,0x4
008420f1 : MOV dword ptr [EBP + -0x14],EDI
008420f4 : TEST EDI,EDI
008420f6 : JZ 0x008421ec
008420fc : MOV EDX,dword ptr [EDI]
008420fe : MOV EAX,dword ptr [EDX + 0x3c]
00842101 : MOV ECX,EDI
00842103 : CALL EAX
00842105 : TEST EAX,EAX
00842107 : JZ 0x008421ec
0084210d : MOV EDX,dword ptr [EDI + 0x1ea8]
00842113 : MOV EAX,dword ptr [EDX + 0x4]
00842116 : LEA EBX,[EDI + 0x1ea8]
0084211c : MOV ECX,EBX
0084211e : CALL EAX
00842120 : MOV dword ptr [EBP + -0x10],EAX
00842123 : TEST EAX,EAX
00842125 : JZ 0x0084215c
00842127 : LEA EDX,[EBP + -0x10]
0084212a : MOV EAX,EBX
0084212c : CALL 0x004f5680
00842131 : TEST EAX,EAX
00842133 : JZ 0x00842156
00842135 : MOVZX ECX,word ptr [EAX + 0x4]
00842139 : MOVZX EDX,word ptr [EAX + 0x6]
0084213d : SHL ECX,0x10
00842140 : OR ECX,EDX
00842142 : MOV EDX,dword ptr [EBP + 0x8]
00842145 : ADD EDX,0x48
00842148 : LEA EDI,[EBP + -0x18]
0084214b : MOV dword ptr [EBP + -0x18],ECX
0084214e : CALL 0x00406f50
00842153 : MOV EDI,dword ptr [EBP + -0x14]
00842156 : CMP dword ptr [EBP + -0x10],0x0
0084215a : JNZ 0x00842127
0084215c : XOR EBX,EBX
0084215e : XOR ESI,ESI
00842160 : JMP 0x00842165
00842162 : MOV EDI,dword ptr [EBP + -0x14]
00842165 : MOV EAX,dword ptr [EBP + 0x8]
00842168 : MOVZX ECX,byte ptr [EAX + 0xb]
0084216c : ADD ECX,ESI
0084216e : MOV EDI,dword ptr [EDI + ECX*0x4 + 0x274]
00842175 : TEST EDI,EDI
00842177 : JZ 0x008421dc
00842179 : PUSH 0x10
0084217b : CALL 0x006f0300
00842180 : ADD ESP,0x4
00842183 : MOV dword ptr [EBP + -0x18],EAX
00842186 : XOR ECX,ECX
00842188 : MOV dword ptr [EBP + -0x4],ECX
0084218b : CMP EAX,ECX
0084218d : JZ 0x008421a0
0084218f : MOV dword ptr [EAX + 0x4],ECX
00842192 : MOV byte ptr [EAX],0x1
00842195 : MOV byte ptr [EAX + 0x1],CL
00842198 : MOV dword ptr [EAX + 0x8],ECX
0084219b : MOV dword ptr [EAX + 0xc],ECX
0084219e : JMP 0x008421a2
008421a0 : XOR EAX,EAX
008421a2 : MOV dword ptr [EBP + -0x4],0xffffffff
008421a9 : CMP EBX,0x42
008421ac : MOV dword ptr [EBP + -0x18],EAX
008421af : MOV dword ptr [EAX + 0x8],EDI
008421b2 : JGE 0x008421c4
008421b4 : MOV DL,BL
008421b6 : AND DL,0x1
008421b9 : MOV byte ptr [EAX + 0x1],DL
008421bc : MOV dword ptr [EAX + 0x4],EBX
008421bf : MOV byte ptr [EAX],0x1
008421c2 : JMP 0x008421ce
008421c4 : MOV byte ptr [EAX + 0x1],0x0
008421c8 : MOV dword ptr [EAX + 0x4],EBX
008421cb : MOV byte ptr [EAX],0x0
008421ce : MOV EDX,dword ptr [EBP + 0x8]
008421d1 : ADD EDX,0x38
008421d4 : LEA EDI,[EBP + -0x18]
008421d7 : CALL 0x00449610
008421dc : ADD ESI,0x16
008421df : INC EBX
008421e0 : CMP ESI,0x70c
008421e6 : JL 0x00842162
008421ec : MOV ECX,dword ptr [EBP + -0xc]
008421ef : MOV dword ptr FS:[0x0],ECX
008421f6 : POP ECX
008421f7 : POP EDI
008421f8 : POP ESI
008421f9 : POP EBX
008421fa : MOV ESP,EBP
008421fc : POP EBP
008421fd : RET 0x4
