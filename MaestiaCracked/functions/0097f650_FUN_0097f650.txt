PROGRAM  : Maestia.exe
FUNCTION : FUN_0097f650
ENTRY    : 0097f650
BODY     : [[0097f650, 0097f9e1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0097f650(void)

{
  int iVar1;
  byte bVar2;
  uint uVar3;
  int *piVar4;
  ushort uVar5;
  int in_ECX;
  int in_EDX;
  uint uVar6;
  int iVar7;
  double dVar8;
  double dVar9;
  int *local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60803;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar3;
  if (in_EDX == 0) {
    FUN_00406460(L"arg pointer is null!");
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaGuiMyStatusList::UpdateStatusTooltip",0x369,local_30);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_2c = 0;
    local_18 = 7;
    local_1c = 0;
    goto LAB_0097f9c6;
  }
  uVar6 = 0;
  local_50 = (int *)0x0;
  if (*(int *)(in_ECX + 0x44) - *(int *)(in_ECX + 0x40) >> 2 == 0) {
LAB_0097f727:
    uVar6 = 0;
    if (*(int *)(in_ECX + 0x54) - *(int *)(in_ECX + 0x50) >> 2 != 0) {
      piVar4 = *(int **)(in_ECX + 0x50);
      do {
        if ((*piVar4 != 0) && (*(int *)*piVar4 == *(int *)(in_EDX + 4))) {
          local_50 = (int *)*piVar4;
        }
        uVar6 = uVar6 + 1;
        piVar4 = piVar4 + 1;
      } while (uVar6 < (uint)(*(int *)(in_ECX + 0x54) - *(int *)(in_ECX + 0x50) >> 2));
      if (local_50 != (int *)0x0) goto LAB_0097f7d1;
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    FUN_00406360(L"can\'t find buff",0xf);
    local_8 = 1;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaGuiMyStatusList::UpdateStatusTooltip",0x389,local_30);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_2c = 0;
    local_18 = 7;
    local_1c = 0;
  }
  else {
    piVar4 = *(int **)(in_ECX + 0x40);
    do {
      if ((*piVar4 != 0) && (*(int *)*piVar4 == *(int *)(in_EDX + 4))) {
        local_50 = (int *)*piVar4;
      }
      uVar6 = uVar6 + 1;
      piVar4 = piVar4 + 1;
    } while (uVar6 < (uint)(*(int *)(in_ECX + 0x44) - *(int *)(in_ECX + 0x40) >> 2));
    if (local_50 == (int *)0x0) goto LAB_0097f727;
LAB_0097f7d1:
    if (0 < (int)(*(int *)(in_EDX + 0x5c) - *(int *)(in_EDX + 0x58) & 0xfffffff8U)) {
      uVar5 = 0;
      if ((short)(*(int *)(in_EDX + 0x5c) - *(int *)(in_EDX + 0x58) >> 3) != 0) {
        do {
          piVar4 = DAT_00da9894;
          uVar6 = (uint)uVar5;
          bVar2 = 0;
          if (uVar6 < (uint)(*(int *)(in_EDX + 0x5c) - *(int *)(in_EDX + 0x58) >> 3)) {
            bVar2 = *(byte *)(*(int *)(in_EDX + 0x58) + uVar6 * 8);
            iVar1 = *(int *)(*(int *)(in_EDX + 0x58) + 4 + uVar6 * 8);
            if (0x41 < bVar2) goto LAB_0097f8d1;
            uVar6 = (uint)bVar2;
            local_50[uVar6 + 0xd6] = iVar1;
            iVar7 = *piVar4;
            if (((iVar7 != 0) && (*(int *)(iVar7 + 0x140) != 0)) &&
               (*(int *)(*(int *)(iVar7 + 0x140) + 0x38) != 0)) {
              dVar8 = (double)uVar6 * 1.5;
              dVar9 = (double)((ulonglong)dVar8 & 0x8000000000000000 | 0x4330000000000000);
              dVar9 = (dVar8 + dVar9) - dVar9;
              iVar7 = (int)(dVar9 - (double)(-(ulonglong)
                                              ((double)((ulonglong)dVar8 & 0x8000000000000000) <
                                              dVar9 - dVar8) & 0x3ff0000000000000));
              if (iVar7 < 0x75) {
                FUN_009c3800(uVar6,local_50[iVar7 + 0x16] + iVar1);
              }
            }
          }
          else {
LAB_0097f8d1:
            FUN_00404750(L"tooltip update fail.. invalid skill passive type[%d]",bVar2,uVar3);
            local_8 = 2;
            if ((int *)*DAT_00da98e8 != (int *)0x0) {
              (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                        (L"AvaGuiMyStatusList::UpdateStatusTooltip",0x3ab,local_4c);
            }
            local_8 = 0xffffffff;
            if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            local_34 = 7;
            local_38 = 0;
            local_48 = 0;
          }
          uVar5 = uVar5 + 1;
        } while (uVar5 < (ushort)(*(int *)(in_EDX + 0x5c) - *(int *)(in_EDX + 0x58) >> 3));
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = 0;
      FUN_00406360(&DAT_00c7f5f0,0);
      local_8 = 3;
      FUN_0096ce40(local_50);
      FUN_00405eb0(local_30,0,0xffffffff);
      FUN_0096be40();
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = 0;
    }
  }
LAB_0097f9c6:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0097f650 : PUSH EBP
0097f651 : MOV EBP,ESP
0097f653 : PUSH -0x1
0097f655 : PUSH 0xb60803
0097f65a : MOV EAX,FS:[0x0]
0097f660 : PUSH EAX
0097f661 : SUB ESP,0x48
0097f664 : MOV EAX,[0x00d66fa0]
0097f669 : XOR EAX,EBP
0097f66b : MOV dword ptr [EBP + -0x10],EAX
0097f66e : PUSH EBX
0097f66f : PUSH ESI
0097f670 : PUSH EDI
0097f671 : PUSH EAX
0097f672 : LEA EAX,[EBP + -0xc]
0097f675 : MOV FS:[0x0],EAX
0097f67b : MOV EDI,EDX
0097f67d : XOR EBX,EBX
0097f67f : MOV dword ptr [EBP + -0x50],ECX
0097f682 : CMP EDI,EBX
0097f684 : JNZ 0x0097f6e2
0097f686 : PUSH 0xc7f444
0097f68b : LEA ECX,[EBP + -0x2c]
0097f68e : CALL 0x00406460
0097f693 : MOV dword ptr [EBP + -0x4],EBX
0097f696 : MOV EAX,[0x00da98e8]
0097f69b : MOV ECX,dword ptr [EAX]
0097f69d : CMP ECX,EBX
0097f69f : JZ 0x0097f6b6
0097f6a1 : MOV EDX,dword ptr [ECX]
0097f6a3 : MOV EDX,dword ptr [EDX + 0x14]
0097f6a6 : LEA EAX,[EBP + -0x2c]
0097f6a9 : PUSH EAX
0097f6aa : PUSH 0x369
0097f6af : PUSH 0xc7f470
0097f6b4 : CALL EDX
0097f6b6 : MOV dword ptr [EBP + -0x4],0xffffffff
0097f6bd : CMP dword ptr [EBP + -0x14],0x8
0097f6c1 : JC 0x0097f6cb
0097f6c3 : MOV ECX,dword ptr [EBP + -0x28]
0097f6c6 : CALL 0x006f04e0
0097f6cb : XOR EAX,EAX
0097f6cd : MOV word ptr [EBP + -0x28],AX
0097f6d1 : MOV dword ptr [EBP + -0x14],0x7
0097f6d8 : MOV dword ptr [EBP + -0x18],EBX
0097f6db : XOR AL,AL
0097f6dd : JMP 0x0097f9c6
0097f6e2 : MOV EAX,dword ptr [ECX + 0x44]
0097f6e5 : SUB EAX,dword ptr [ECX + 0x40]
0097f6e8 : XOR EDX,EDX
0097f6ea : SAR EAX,0x2
0097f6ed : MOV dword ptr [EBP + -0x4c],EBX
0097f6f0 : TEST EAX,EAX
0097f6f2 : JBE 0x0097f727
0097f6f4 : MOV EBX,dword ptr [ECX + 0x44]
0097f6f7 : SUB EBX,dword ptr [ECX + 0x40]
0097f6fa : MOV EAX,dword ptr [ECX + 0x40]
0097f6fd : SAR EBX,0x2
0097f700 : CMP dword ptr [EAX],0x0
0097f703 : JZ 0x0097f714
0097f705 : MOV ESI,dword ptr [EDI + 0x4]
0097f708 : MOV ECX,dword ptr [EAX]
0097f70a : CMP dword ptr [ECX],ESI
0097f70c : JNZ 0x0097f711
0097f70e : MOV dword ptr [EBP + -0x4c],ECX
0097f711 : MOV ECX,dword ptr [EBP + -0x50]
0097f714 : INC EDX
0097f715 : ADD EAX,0x4
0097f718 : CMP EDX,EBX
0097f71a : JC 0x0097f700
0097f71c : XOR EBX,EBX
0097f71e : CMP dword ptr [EBP + -0x4c],EBX
0097f721 : JNZ 0x0097f7d1
0097f727 : MOV EDX,dword ptr [ECX + 0x54]
0097f72a : SUB EDX,dword ptr [ECX + 0x50]
0097f72d : SAR EDX,0x2
0097f730 : TEST EDX,EDX
0097f732 : JBE 0x0097f75f
0097f734 : MOV ESI,dword ptr [ECX + 0x54]
0097f737 : SUB ESI,dword ptr [ECX + 0x50]
0097f73a : MOV EAX,dword ptr [ECX + 0x50]
0097f73d : SAR ESI,0x2
0097f740 : CMP dword ptr [EAX],0x0
0097f743 : JZ 0x0097f751
0097f745 : MOV EDX,dword ptr [EDI + 0x4]
0097f748 : MOV ECX,dword ptr [EAX]
0097f74a : CMP dword ptr [ECX],EDX
0097f74c : JNZ 0x0097f751
0097f74e : MOV dword ptr [EBP + -0x4c],ECX
0097f751 : INC EBX
0097f752 : ADD EAX,0x4
0097f755 : CMP EBX,ESI
0097f757 : JC 0x0097f740
0097f759 : CMP dword ptr [EBP + -0x4c],0x0
0097f75d : JNZ 0x0097f7d1
0097f75f : PUSH 0xf
0097f761 : XOR EAX,EAX
0097f763 : MOV ESI,0x7
0097f768 : XOR EDI,EDI
0097f76a : PUSH 0xc7f4c0
0097f76f : LEA ECX,[EBP + -0x2c]
0097f772 : MOV dword ptr [EBP + -0x14],ESI
0097f775 : MOV dword ptr [EBP + -0x18],EDI
0097f778 : MOV word ptr [EBP + -0x28],AX
0097f77c : CALL 0x00406360
0097f781 : MOV dword ptr [EBP + -0x4],0x1
0097f788 : MOV ECX,dword ptr [0x00da98e8]
0097f78e : MOV ECX,dword ptr [ECX]
0097f790 : CMP ECX,EDI
0097f792 : JZ 0x0097f7a9
0097f794 : MOV EDX,dword ptr [ECX]
0097f796 : MOV EDX,dword ptr [EDX + 0x14]
0097f799 : LEA EAX,[EBP + -0x2c]
0097f79c : PUSH EAX
0097f79d : PUSH 0x389
0097f7a2 : PUSH 0xc7f4e0
0097f7a7 : CALL EDX
0097f7a9 : MOV dword ptr [EBP + -0x4],0xffffffff
0097f7b0 : CMP dword ptr [EBP + -0x14],0x8
0097f7b4 : JC 0x0097f7be
0097f7b6 : MOV ECX,dword ptr [EBP + -0x28]
0097f7b9 : CALL 0x006f04e0
0097f7be : XOR EAX,EAX
0097f7c0 : MOV word ptr [EBP + -0x28],AX
0097f7c4 : MOV dword ptr [EBP + -0x14],ESI
0097f7c7 : MOV dword ptr [EBP + -0x18],EDI
0097f7ca : XOR AL,AL
0097f7cc : JMP 0x0097f9c6
0097f7d1 : MOV ECX,dword ptr [EDI + 0x5c]
0097f7d4 : SUB ECX,dword ptr [EDI + 0x58]
0097f7d7 : TEST ECX,0xfffffff8
0097f7dd : JLE 0x0097f9c4
0097f7e3 : MOV EDX,dword ptr [EDI + 0x5c]
0097f7e6 : SUB EDX,dword ptr [EDI + 0x58]
0097f7e9 : XOR ECX,ECX
0097f7eb : SAR EDX,0x3
0097f7ee : XOR EAX,EAX
0097f7f0 : MOV dword ptr [EBP + -0x54],ECX
0097f7f3 : CMP AX,DX
0097f7f6 : JNC 0x0097f94e
0097f7fc : MOV EDX,dword ptr [EDI + 0x5c]
0097f7ff : SUB EDX,dword ptr [EDI + 0x58]
0097f802 : MOVZX ECX,CX
0097f805 : SAR EDX,0x3
0097f808 : XOR AL,AL
0097f80a : CMP ECX,EDX
0097f80c : JNC 0x0097f8d1
0097f812 : MOV EDX,dword ptr [EDI + 0x58]
0097f815 : MOV AL,byte ptr [EDX + ECX*0x8]
0097f818 : MOV ECX,dword ptr [EDX + ECX*0x8 + 0x4]
0097f81c : CMP AL,0x42
0097f81e : JNC 0x0097f8d1
0097f824 : MOV EBX,dword ptr [EBP + -0x4c]
0097f827 : MOVZX EDX,AL
0097f82a : MOV EAX,[0x00da9894]
0097f82f : MOV dword ptr [EBX + EDX*0x4 + 0x358],ECX
0097f836 : MOV EAX,dword ptr [EAX]
0097f838 : TEST EAX,EAX
0097f83a : JZ 0x0097f935
0097f840 : CMP dword ptr [EAX + 0x140],0x0
0097f847 : JZ 0x0097f935
0097f84d : MOV ESI,dword ptr [EAX + 0x140]
0097f853 : CMP dword ptr [ESI + 0x38],0x0
0097f857 : JZ 0x0097f935
0097f85d : MOVSD XMM2,qword ptr [0x00cdf118]
0097f865 : MOVSD XMM3,qword ptr [0x00cdf110]
0097f86d : CVTSI2SD XMM1,EDX
0097f871 : MULSD XMM1,qword ptr [0x00cdf898]
0097f879 : ANDPD XMM2,XMM1
0097f87d : ORPD XMM3,XMM2
0097f881 : MOVAPD XMM0,XMM1
0097f885 : ADDSD XMM0,XMM3
0097f889 : SUBSD XMM0,XMM3
0097f88d : MOVAPD XMM3,XMM0
0097f891 : SUBSD XMM3,XMM1
0097f895 : MOVSD XMM1,qword ptr [0x00cdf108]
0097f89d : CMPNLESD XMM3,XMM2
0097f8a2 : ANDPD XMM3,XMM1
0097f8a6 : SUBSD XMM0,XMM3
0097f8aa : CVTTSD2SI ESI,XMM0
0097f8ae : CMP ESI,0x75
0097f8b1 : JGE 0x0097f935
0097f8b7 : MOV ESI,dword ptr [EBX + ESI*0x4 + 0x58]
0097f8bb : MOV EAX,dword ptr [EAX + 0x140]
0097f8c1 : MOV EAX,dword ptr [EAX + 0x38]
0097f8c4 : ADD ESI,ECX
0097f8c6 : PUSH ESI
0097f8c7 : PUSH EDX
0097f8c8 : MOV ECX,EAX
0097f8ca : CALL 0x009c3800
0097f8cf : JMP 0x0097f935
0097f8d1 : MOVZX ECX,AL
0097f8d4 : PUSH ECX
0097f8d5 : PUSH 0xc7f530
0097f8da : LEA ESI,[EBP + -0x48]
0097f8dd : CALL 0x00404750
0097f8e2 : ADD ESP,0x8
0097f8e5 : MOV dword ptr [EBP + -0x4],0x2
0097f8ec : MOV EDX,dword ptr [0x00da98e8]
0097f8f2 : MOV ECX,dword ptr [EDX]
0097f8f4 : TEST ECX,ECX
0097f8f6 : JZ 0x0097f90c
0097f8f8 : MOV EAX,dword ptr [ECX]
0097f8fa : MOV EAX,dword ptr [EAX + 0x14]
0097f8fd : MOV EDX,ESI
0097f8ff : PUSH EDX
0097f900 : PUSH 0x3ab
0097f905 : PUSH 0xc7f5a0
0097f90a : CALL EAX
0097f90c : MOV dword ptr [EBP + -0x4],0xffffffff
0097f913 : CMP dword ptr [EBP + -0x30],0x8
0097f917 : JC 0x0097f921
0097f919 : MOV ECX,dword ptr [EBP + -0x44]
0097f91c : CALL 0x006f04e0
0097f921 : XOR ECX,ECX
0097f923 : MOV dword ptr [EBP + -0x30],0x7
0097f92a : MOV dword ptr [EBP + -0x34],0x0
0097f931 : MOV word ptr [EBP + -0x44],CX
0097f935 : MOV EDX,dword ptr [EDI + 0x5c]
0097f938 : SUB EDX,dword ptr [EDI + 0x58]
0097f93b : MOV ECX,dword ptr [EBP + -0x54]
0097f93e : INC ECX
0097f93f : SAR EDX,0x3
0097f942 : MOV dword ptr [EBP + -0x54],ECX
0097f945 : CMP CX,DX
0097f948 : JC 0x0097f7fc
0097f94e : XOR EAX,EAX
0097f950 : PUSH EAX
0097f951 : MOV EDI,0x7
0097f956 : PUSH 0xc7f5f0
0097f95b : LEA ECX,[EBP + -0x2c]
0097f95e : MOV dword ptr [EBP + -0x14],EDI
0097f961 : MOV dword ptr [EBP + -0x18],0x0
0097f968 : MOV word ptr [EBP + -0x28],AX
0097f96c : CALL 0x00406360
0097f971 : MOV dword ptr [EBP + -0x4],0x3
0097f978 : MOV ESI,dword ptr [EBP + -0x4c]
0097f97b : PUSH ESI
0097f97c : LEA ECX,[EBP + -0x2c]
0097f97f : CALL 0x0096ce40
0097f984 : ADD ESP,0x4
0097f987 : PUSH -0x1
0097f989 : PUSH 0x0
0097f98b : LEA ECX,[EBP + -0x2c]
0097f98e : PUSH ECX
0097f98f : LEA ECX,[ESI + 0x38]
0097f992 : CALL 0x00405eb0
0097f997 : MOV ECX,dword ptr [EBP + -0x50]
0097f99a : CALL 0x0096be40
0097f99f : MOV dword ptr [EBP + -0x4],0xffffffff
0097f9a6 : CMP dword ptr [EBP + -0x14],0x8
0097f9aa : JC 0x0097f9b4
0097f9ac : MOV ECX,dword ptr [EBP + -0x28]
0097f9af : CALL 0x006f04e0
0097f9b4 : XOR EDX,EDX
0097f9b6 : MOV dword ptr [EBP + -0x14],EDI
0097f9b9 : MOV dword ptr [EBP + -0x18],0x0
0097f9c0 : MOV word ptr [EBP + -0x28],DX
0097f9c4 : MOV AL,0x1
0097f9c6 : MOV ECX,dword ptr [EBP + -0xc]
0097f9c9 : MOV dword ptr FS:[0x0],ECX
0097f9d0 : POP ECX
0097f9d1 : POP EDI
0097f9d2 : POP ESI
0097f9d3 : POP EBX
0097f9d4 : MOV ECX,dword ptr [EBP + -0x10]
0097f9d7 : XOR ECX,EBP
0097f9d9 : CALL 0x00633e6b
0097f9de : MOV ESP,EBP
0097f9e0 : POP EBP
0097f9e1 : RET
