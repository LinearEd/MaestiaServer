PROGRAM  : Maestia.exe
FUNCTION : FUN_0043ebf0
ENTRY    : 0043ebf0
BODY     : [[0043ebf0, 0043ec6d] [0043ec70, 0043ed9c] [0043eda0, 0043ee06]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0043ebf0(int param_1,int *param_2,int param_3,int *param_4)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  char cVar7;
  uint uVar8;
  ushort *puVar9;
  int iVar10;
  ushort *puVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  undefined8 uVar15;
  
  iVar10 = param_3;
  uVar8 = FUN_0042c360(0x1f31d);
  uVar15 = FUN_0063871f(uVar8 & 0x7fffffff);
  iVar14 = param_1;
  uVar8 = (int)((ulonglong)uVar15 >> 0x20) * 0x41a7 + (int)uVar15 * -0xb14;
  if ((int)uVar8 < 0) {
    uVar8 = uVar8 + 0x7fffffff;
  }
  uVar8 = *(uint *)(param_1 + 0x20) & uVar8;
  if (*(uint *)(param_1 + 0x24) <= uVar8) {
    uVar8 = uVar8 + (-1 - (*(uint *)(param_1 + 0x20) >> 1));
  }
  iVar4 = uVar8 * 4;
  piVar13 = *(int **)(iVar4 + 4 + *(int *)(param_1 + 0x14));
  piVar1 = *(int **)(iVar4 + *(int *)(param_1 + 0x14));
  if (piVar13 != piVar1) {
    uVar2 = *(uint *)(iVar10 + 0x14);
    do {
      piVar13 = (int *)piVar13[1];
      uVar3 = piVar13[7];
      if ((uint)piVar13[8] < 8) {
        puVar9 = (ushort *)(piVar13 + 3);
      }
      else {
        puVar9 = (ushort *)piVar13[3];
      }
      uVar12 = uVar2;
      if (uVar3 <= uVar2) {
        uVar12 = uVar3;
      }
      if (*(uint *)(iVar10 + 0x18) < 8) {
        puVar11 = (ushort *)(param_3 + 4);
      }
      else {
        puVar11 = *(ushort **)(param_3 + 4);
      }
      for (; uVar12 != 0; uVar12 = uVar12 - 1) {
        if (*puVar11 != *puVar9) {
          uVar12 = (-(uint)(*puVar11 < *puVar9) & 0xfffffffe) + 1;
          if (uVar12 != 0) goto LAB_0043ecc8;
          break;
        }
        puVar11 = puVar11 + 1;
        puVar9 = puVar9 + 1;
      }
      if (uVar3 <= uVar2) {
        uVar12 = (uint)(uVar2 != uVar3);
LAB_0043ecc8:
        if (-1 < (int)uVar12) {
          cVar7 = FUN_0042be00();
          if (cVar7 == '\0') {
            if (param_4 != *(int **)(iVar14 + 8)) {
              FUN_004ce130(&param_1,param_4);
            }
            *param_2 = (int)piVar13;
            *(undefined1 *)(param_2 + 1) = 0;
            return;
          }
          piVar13 = (int *)*piVar13;
          break;
        }
      }
    } while (piVar13 != piVar1);
  }
  if (param_4 == *(int **)(iVar14 + 8)) {
    iVar10 = FUN_0042c2a0(piVar13,piVar13[1],param_3);
    FUN_0043f020();
    piVar13[1] = iVar10;
    **(int **)(iVar10 + 4) = iVar10;
    param_4 = (int *)piVar13[1];
  }
  else if (((param_4 != *(int **)(iVar14 + 8)) && (piVar13 != param_4)) &&
          (piVar13 != (int *)*param_4)) {
    FUN_0043efc0(piVar13,param_4,(int *)*param_4);
    iVar14 = param_1;
  }
  iVar10 = *(int *)(iVar14 + 0x14);
  piVar1 = *(int **)(iVar4 + iVar10);
  while ((piVar13 == piVar1 && (*(int **)(iVar4 + iVar10) = param_4, uVar8 != 0))) {
    iVar10 = *(int *)(iVar14 + 0x14);
    uVar8 = uVar8 - 1;
    iVar4 = uVar8 * 4;
    piVar1 = *(int **)(iVar4 + iVar10);
  }
  fVar5 = (float)*(int *)(iVar14 + 0xc);
  if (*(int *)(iVar14 + 0xc) < 0) {
    fVar5 = fVar5 + 4.2949673e+09;
  }
  fVar6 = (float)*(int *)(iVar14 + 0x24);
  if (*(int *)(iVar14 + 0x24) < 0) {
    fVar6 = fVar6 + 4.2949673e+09;
  }
  if (*(float *)(iVar14 + 0x28) < fVar5 / fVar6) {
    FUN_0043ee10();
  }
  *param_2 = (int)param_4;
  *(undefined1 *)(param_2 + 1) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
0043ebf0 : PUSH EBP
0043ebf1 : MOV EBP,ESP
0043ebf3 : SUB ESP,0x14
0043ebf6 : PUSH EBX
0043ebf7 : PUSH ESI
0043ebf8 : PUSH EDI
0043ebf9 : MOV EDI,dword ptr [EBP + 0x10]
0043ebfc : PUSH 0x1f31d
0043ec01 : MOV EAX,EDI
0043ec03 : CALL 0x0042c360
0043ec08 : AND EAX,0x7fffffff
0043ec0d : PUSH EAX
0043ec0e : CALL 0x0063871f
0043ec13 : IMUL EDX,EDX,0x41a7
0043ec19 : IMUL EAX,EAX,0xb14
0043ec1f : ADD ESP,0x8
0043ec22 : SUB EDX,EAX
0043ec24 : JNS 0x0043ec2c
0043ec26 : ADD EDX,0x7fffffff
0043ec2c : MOV ESI,dword ptr [EBP + 0x8]
0043ec2f : MOV ECX,dword ptr [ESI + 0x20]
0043ec32 : MOV EAX,ECX
0043ec34 : AND EAX,EDX
0043ec36 : CMP dword ptr [ESI + 0x24],EAX
0043ec39 : JA 0x0043ec44
0043ec3b : SHR ECX,0x1
0043ec3d : OR EDX,0xffffffff
0043ec40 : SUB EDX,ECX
0043ec42 : ADD EAX,EDX
0043ec44 : MOV ECX,dword ptr [ESI + 0x14]
0043ec47 : MOV dword ptr [EBP + -0x8],EAX
0043ec4a : ADD EAX,EAX
0043ec4c : ADD EAX,EAX
0043ec4e : MOV EBX,dword ptr [EAX + ECX*0x1 + 0x4]
0043ec52 : MOV dword ptr [EBP + -0x14],EAX
0043ec55 : ADD EAX,ECX
0043ec57 : MOV EAX,dword ptr [EAX]
0043ec59 : MOV dword ptr [EBP + -0x10],EAX
0043ec5c : CMP EBX,EAX
0043ec5e : JZ 0x0043ecd1
0043ec60 : MOV EDX,dword ptr [EDI + 0x14]
0043ec63 : MOV EAX,dword ptr [EDI + 0x18]
0043ec66 : MOV dword ptr [EBP + -0x4],EDX
0043ec69 : MOV dword ptr [EBP + -0xc],EAX
0043ec6c : JMP 0x0043ec73
0043ec70 : MOV EDX,dword ptr [EBP + -0x4]
0043ec73 : MOV EBX,dword ptr [EBX + 0x4]
0043ec76 : CMP dword ptr [EBX + 0x20],0x8
0043ec7a : MOV EDI,dword ptr [EBX + 0x1c]
0043ec7d : JC 0x0043ec84
0043ec7f : MOV EAX,dword ptr [EBX + 0xc]
0043ec82 : JMP 0x0043ec87
0043ec84 : LEA EAX,[EBX + 0xc]
0043ec87 : CMP EDX,EDI
0043ec89 : JC 0x0043ec8d
0043ec8b : MOV EDX,EDI
0043ec8d : CMP dword ptr [EBP + -0xc],0x8
0043ec91 : MOV ECX,dword ptr [EBP + 0x10]
0043ec94 : JC 0x0043ec9b
0043ec96 : MOV ECX,dword ptr [ECX + 0x4]
0043ec99 : JMP 0x0043ec9e
0043ec9b : ADD ECX,0x4
0043ec9e : TEST EDX,EDX
0043eca0 : JBE 0x0043ecb8
0043eca2 : MOV SI,word ptr [ECX]
0043eca5 : CMP SI,word ptr [EAX]
0043eca8 : JNZ 0x0043ed16
0043ecaa : ADD ECX,0x2
0043ecad : ADD EAX,0x2
0043ecb0 : SUB EDX,0x1
0043ecb3 : JNZ 0x0043eca2
0043ecb5 : MOV ESI,dword ptr [EBP + 0x8]
0043ecb8 : MOV EAX,dword ptr [EBP + -0x4]
0043ecbb : CMP EAX,EDI
0043ecbd : JC 0x0043eccc
0043ecbf : XOR ECX,ECX
0043ecc1 : CMP EAX,EDI
0043ecc3 : SETNZ CL
0043ecc6 : MOV EAX,ECX
0043ecc8 : TEST EAX,EAX
0043ecca : JGE 0x0043ed2b
0043eccc : CMP EBX,dword ptr [EBP + -0x10]
0043eccf : JNZ 0x0043ec70
0043ecd1 : MOV EDI,dword ptr [EBP + 0x14]
0043ecd4 : CMP EDI,dword ptr [ESI + 0x8]
0043ecd7 : JZ 0x0043ed65
0043ecdd : CMP EDI,dword ptr [ESI + 0x8]
0043ece0 : LEA EDX,[ESI + 0x4]
0043ece3 : JZ 0x0043ed90
0043ece9 : MOV EAX,dword ptr [EDI]
0043eceb : CMP EDX,EDX
0043eced : JNZ 0x0043ecff
0043ecef : CMP EBX,EDI
0043ecf1 : JZ 0x0043ed90
0043ecf7 : CMP EBX,EAX
0043ecf9 : JZ 0x0043ed90
0043ecff : PUSH EAX
0043ed00 : PUSH EDI
0043ed01 : PUSH EBX
0043ed02 : MOV EDI,0x1
0043ed07 : MOV ESI,EDX
0043ed09 : CALL 0x0043efc0
0043ed0e : MOV EDI,dword ptr [EBP + 0x14]
0043ed11 : MOV ESI,dword ptr [EBP + 0x8]
0043ed14 : JMP 0x0043ed90
0043ed16 : MOV DX,SI
0043ed19 : CMP DX,word ptr [EAX]
0043ed1c : SBB EAX,EAX
0043ed1e : AND EAX,0xfffffffe
0043ed21 : ADD EAX,0x1
0043ed24 : JZ 0x0043ecb5
0043ed26 : MOV ESI,dword ptr [EBP + 0x8]
0043ed29 : JMP 0x0043ecc8
0043ed2b : MOV EAX,dword ptr [EBP + 0x10]
0043ed2e : LEA ECX,[EBX + 0x8]
0043ed31 : CALL 0x0042be00
0043ed36 : TEST AL,AL
0043ed38 : JZ 0x0043ed3e
0043ed3a : MOV EBX,dword ptr [EBX]
0043ed3c : JMP 0x0043ecd1
0043ed3e : MOV EAX,dword ptr [EBP + 0x14]
0043ed41 : CMP EAX,dword ptr [ESI + 0x8]
0043ed44 : JZ 0x0043ed53
0043ed46 : PUSH EAX
0043ed47 : LEA EDX,[EBP + 0x8]
0043ed4a : PUSH EDX
0043ed4b : LEA EDI,[ESI + 0x4]
0043ed4e : CALL 0x004ce130
0043ed53 : MOV EAX,dword ptr [EBP + 0xc]
0043ed56 : POP EDI
0043ed57 : POP ESI
0043ed58 : MOV dword ptr [EAX],EBX
0043ed5a : MOV byte ptr [EAX + 0x4],0x0
0043ed5e : POP EBX
0043ed5f : MOV ESP,EBP
0043ed61 : POP EBP
0043ed62 : RET 0x10
0043ed65 : MOV EAX,dword ptr [EBP + 0x10]
0043ed68 : MOV ECX,dword ptr [EBX + 0x4]
0043ed6b : PUSH EAX
0043ed6c : PUSH ECX
0043ed6d : PUSH EBX
0043ed6e : CALL 0x0042c2a0
0043ed73 : LEA EDX,[ESI + 0x4]
0043ed76 : MOV ECX,0x1
0043ed7b : MOV EDI,EAX
0043ed7d : CALL 0x0043f020
0043ed82 : MOV dword ptr [EBX + 0x4],EDI
0043ed85 : MOV EDX,dword ptr [EDI + 0x4]
0043ed88 : MOV dword ptr [EDX],EDI
0043ed8a : MOV EDI,dword ptr [EBX + 0x4]
0043ed8d : MOV dword ptr [EBP + 0x14],EDI
0043ed90 : MOV EAX,dword ptr [ESI + 0x14]
0043ed93 : MOV ECX,dword ptr [EBP + -0x14]
0043ed96 : CMP EBX,dword ptr [ECX + EAX*0x1]
0043ed99 : JNZ 0x0043edc0
0043ed9b : JMP 0x0043eda3
0043eda0 : MOV EDI,dword ptr [EBP + 0x14]
0043eda3 : MOV dword ptr [ECX + EAX*0x1],EDI
0043eda6 : MOV ECX,dword ptr [EBP + -0x8]
0043eda9 : TEST ECX,ECX
0043edab : JZ 0x0043edbd
0043edad : MOV EAX,dword ptr [ESI + 0x14]
0043edb0 : DEC ECX
0043edb1 : MOV dword ptr [EBP + -0x8],ECX
0043edb4 : ADD ECX,ECX
0043edb6 : ADD ECX,ECX
0043edb8 : CMP EBX,dword ptr [ECX + EAX*0x1]
0043edbb : JZ 0x0043eda0
0043edbd : MOV EDI,dword ptr [EBP + 0x14]
0043edc0 : MOV EAX,dword ptr [ESI + 0xc]
0043edc3 : FILD dword ptr [ESI + 0xc]
0043edc6 : TEST EAX,EAX
0043edc8 : JGE 0x0043edd0
0043edca : FADD float ptr [0x00cdf0e0]
0043edd0 : MOV ECX,dword ptr [ESI + 0x24]
0043edd3 : FILD dword ptr [ESI + 0x24]
0043edd6 : TEST ECX,ECX
0043edd8 : JGE 0x0043ede0
0043edda : FADD float ptr [0x00cdf0e0]
0043ede0 : FDIVP
0043ede2 : FLD float ptr [ESI + 0x28]
0043ede5 : FXCH
0043ede7 : FCOMIP ST0,ST1
0043ede9 : FSTP ST0
0043edeb : JBE 0x0043edf5
0043eded : CALL 0x0043ee10
0043edf2 : MOV EDI,dword ptr [EBP + 0x14]
0043edf5 : MOV EAX,dword ptr [EBP + 0xc]
0043edf8 : MOV dword ptr [EAX],EDI
0043edfa : POP EDI
0043edfb : POP ESI
0043edfc : MOV byte ptr [EAX + 0x4],0x1
0043ee00 : POP EBX
0043ee01 : MOV ESP,EBP
0043ee03 : POP EBP
0043ee04 : RET 0x10
