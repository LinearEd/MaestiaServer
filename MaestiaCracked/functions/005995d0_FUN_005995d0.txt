PROGRAM  : Maestia.exe
FUNCTION : FUN_005995d0
ENTRY    : 005995d0
BODY     : [[005995d0, 005996cf]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005995d0(GMatrix2D *param_1,float *param_2,undefined4 *param_3)

{
  float fVar1;
  float fVar2;
  GMatrix2D *this;
  float *pfVar3;
  float local_20;
  float local_1c;
  float local_18 [5];
  undefined4 local_4;
  
  pfVar3 = param_2;
  this = param_1;
  fVar1 = *param_2;
  fVar2 = param_2[1];
  *(float *)(param_1 + 8) =
       fVar2 * *(float *)(param_1 + 4) + fVar1 * *(float *)param_1 + *(float *)(param_1 + 8);
  *(float *)(param_1 + 0x14) =
       fVar2 * *(float *)(param_1 + 0x10) + *(float *)(param_1 + 0xc) * fVar1 +
       *(float *)(param_1 + 0x14);
  local_20 = 1.0;
  param_2 = (float *)(param_2[2] - *param_2);
  if (32767.0 < (float)param_2) {
    local_20 = (float)param_2 / 32767.0;
    param_2 = (float *)0x46fffe00;
  }
  local_1c = 1.0;
  param_1 = (GMatrix2D *)(pfVar3[3] - pfVar3[1]);
  if (32767.0 < (float)param_1) {
    local_1c = (float)param_1 / 32767.0;
    param_1 = (GMatrix2D *)0x46fffe00;
  }
  local_18[0] = local_20;
  local_18[1] = 0.0;
  local_18[2] = 0.0;
  local_18[3] = 0.0;
  local_18[4] = local_1c;
  local_4 = 0;
  GMatrix2D::Prepend(this,(GMatrix2D *)local_18);
  *param_3 = 0;
  param_3[1] = 0;
  param_3[2] = (float)param_2 + 0.0;
  param_3[3] = (float)param_1 + 0.0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005995d0 : SUB ESP,0x20
005995d3 : MOV EDX,dword ptr [ESP + 0x28]
005995d7 : MOV ECX,dword ptr [ESP + 0x24]
005995db : FLD float ptr [EDX]
005995dd : FSTP float ptr [ESP + 0x4]
005995e1 : FLD float ptr [EDX + 0x4]
005995e4 : FSTP float ptr [ESP + 0x28]
005995e8 : FLD float ptr [ECX + 0x4]
005995eb : FLD float ptr [ESP + 0x28]
005995ef : FLD ST0
005995f1 : FMULP ST2
005995f3 : FLD float ptr [ECX]
005995f5 : FLD float ptr [ESP + 0x4]
005995f9 : FLD ST0
005995fb : FMULP ST2
005995fd : FXCH ST3
005995ff : FADDP
00599601 : FADD float ptr [ECX + 0x8]
00599604 : FSTP float ptr [ECX + 0x8]
00599607 : FLD float ptr [ECX + 0xc]
0059960a : FMULP ST2
0059960c : FMUL float ptr [ECX + 0x10]
0059960f : FADDP
00599611 : FADD float ptr [ECX + 0x14]
00599614 : FSTP float ptr [ECX + 0x14]
00599617 : FLD1
00599619 : FST float ptr [ESP]
0059961c : FLD float ptr [EDX + 0x8]
0059961f : FSUB float ptr [EDX]
00599621 : FSTP float ptr [ESP + 0x28]
00599625 : FLD float ptr [ESP + 0x28]
00599629 : FLD double ptr [0x00b8d1d0]
0059962f : FCOM
00599631 : FNSTSW AX
00599633 : FLD float ptr [0x00cdf18c]
00599639 : TEST AH,0x5
0059963c : JP 0x00599678
0059963e : FXCH ST2
00599640 : FDIV ST0,ST1
00599642 : FSTP float ptr [ESP]
00599645 : FXCH
00599647 : FST float ptr [ESP + 0x28]
0059964b : FXCH
0059964d : FXCH ST2
0059964f : FSTP float ptr [ESP + 0x4]
00599653 : FLD float ptr [EDX + 0xc]
00599656 : FSUB float ptr [EDX + 0x4]
00599659 : FSTP float ptr [ESP + 0x24]
0059965d : FLD float ptr [ESP + 0x24]
00599661 : FCOM ST2
00599663 : FNSTSW AX
00599665 : TEST AH,0x41
00599668 : JNZ 0x0059967c
0059966a : FDIVRP ST2,ST0
0059966c : FXCH
0059966e : FSTP float ptr [ESP + 0x4]
00599672 : FSTP float ptr [ESP + 0x24]
00599676 : JMP 0x00599682
00599678 : FSTP ST2
0059967a : JMP 0x0059964d
0059967c : FSTP ST2
0059967e : FSTP ST1
00599680 : FSTP ST0
00599682 : FLD float ptr [ESP]
00599685 : LEA EAX,[ESP + 0x8]
00599689 : FSTP float ptr [ESP + 0x8]
0059968d : PUSH EAX
0059968e : FLDZ
00599690 : FST float ptr [ESP + 0x10]
00599694 : FST float ptr [ESP + 0x14]
00599698 : FST float ptr [ESP + 0x18]
0059969c : FLD float ptr [ESP + 0x8]
005996a0 : FSTP float ptr [ESP + 0x1c]
005996a4 : FSTP float ptr [ESP + 0x20]
005996a8 : CALL 0x00522e20
005996ad : MOV EAX,dword ptr [ESP + 0x2c]
005996b1 : FLDZ
005996b3 : FST float ptr [EAX]
005996b5 : FSTP float ptr [EAX + 0x4]
005996b8 : FLD float ptr [ESP + 0x28]
005996bc : FLDZ
005996be : FADD ST1,ST0
005996c0 : FXCH
005996c2 : FSTP float ptr [EAX + 0x8]
005996c5 : FADD float ptr [ESP + 0x24]
005996c9 : FSTP float ptr [EAX + 0xc]
005996cc : ADD ESP,0x20
005996cf : RET
