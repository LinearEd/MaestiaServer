PROGRAM  : Maestia.exe
FUNCTION : FUN_007e9a90
ENTRY    : 007e9a90
BODY     : [[007e9a90, 007e9d68]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007e9a90(int param_1,float *param_2,undefined4 param_3,undefined4 param_4)

{
  float *pfVar1;
  int *piVar2;
  float *pfVar3;
  char cVar4;
  float *in_EAX;
  size_t _NumOfElements;
  undefined4 *unaff_EDI;
  float in_XMM6_Da;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  float local_58;
  float local_54;
  float local_50;
  float local_4c;
  float local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  undefined4 local_1c;
  float local_18;
  undefined4 local_14;
  size_t local_10;
  int local_c;
  undefined4 local_8;
  
  pfVar3 = param_2;
  DAT_01720f4c = *in_EAX;
  DAT_01720f50 = in_EAX[1];
  DAT_01720f54 = in_EAX[2];
  local_54 = in_EAX[1];
  local_58 = *in_EAX;
  local_50 = in_EAX[2];
  pfVar1 = param_2 + 2;
  param_2 = (float *)0xc61c4000;
  local_1c = 0;
  local_18 = 0.0;
  local_14 = 0;
  local_64 = 0;
  local_5c = 0;
  local_24 = local_54 + 20.0;
  local_60 = 0xbf800000;
  local_48 = pfVar3[1] * in_XMM6_Da + local_54;
  local_4c = *pfVar3 * in_XMM6_Da + local_58;
  local_44 = *pfVar1 * in_XMM6_Da + local_50;
  local_3c = local_48 + 20.0;
  local_30 = local_48 - local_24;
  local_34 = local_4c - local_58;
  local_2c = local_44 - local_50;
  local_8 = 0;
  local_40 = local_4c;
  local_38 = local_44;
  local_28 = local_58;
  local_20 = local_50;
  D3DXVec3Normalize(&local_34,&local_34);
  _NumOfElements = FUN_007e8090(&local_34,&local_28);
  if ((int)_NumOfElements < 1) {
    return 0;
  }
  local_10 = _NumOfElements;
  if (1 < (int)_NumOfElements) {
    _qsort(*(void **)(param_1 + 0xfc),_NumOfElements,4,FUN_007e03d0);
  }
  local_c = 0;
  if (0 < (int)_NumOfElements) {
    do {
      piVar2 = *(int **)(*(int *)(*(int *)(param_1 + 0xfc) + local_c * 4) + 8);
      if ((((piVar2 == (int *)0x0) || (piVar2[0xc1] != 1)) && (piVar2[0xc1] != 2)) &&
         (piVar2[0xc1] != 0xd)) goto LAB_007e9d4e;
      cVar4 = FUN_007d5bf0(piVar2);
      if (cVar4 == '\0') {
        cVar4 = FUN_007d5cf0(piVar2);
        if (cVar4 != '\0') goto LAB_007e9cab;
        cVar4 = (**(code **)(*piVar2 + 200))(&local_28,&local_34,param_4);
        if (cVar4 != '\0') {
          cVar4 = (**(code **)(*piVar2 + 0x110))
                            (&local_58,&local_28,&local_4c,&local_40,pfVar3,&local_1c,param_3,
                             param_4);
          if ((cVar4 == '\0') || (local_18 <= (float)param_2)) goto LAB_007e9d4e;
          local_8 = 2;
          goto LAB_007e9d31;
        }
      }
      else {
LAB_007e9cab:
        cVar4 = (**(code **)(*piVar2 + 200))(&local_28,&local_34,param_4);
        if (cVar4 != '\0') {
          cVar4 = (**(code **)(*piVar2 + 0x110))
                            (&local_58,&local_28,&local_4c,&local_40,pfVar3,&local_1c,param_3,
                             param_4);
          if ((cVar4 != '\0') && ((float)param_2 < local_18)) {
            local_8 = 2;
            goto LAB_007e9d31;
          }
        }
        cVar4 = FUN_007e22b0(&local_64,&local_40,&local_1c);
        if ((cVar4 != '\0') && ((float)param_2 < local_18)) {
          local_8 = 1;
LAB_007e9d31:
          *unaff_EDI = local_1c;
          unaff_EDI[1] = local_18;
          unaff_EDI[2] = local_14;
          param_2 = (float *)local_18;
        }
      }
LAB_007e9d4e:
      local_c = local_c + 1;
    } while (local_c < (int)local_10);
  }
  return local_8;
}



============================================================
DISASSEMBLY
============================================================
007e9a90 : PUSH EBP
007e9a91 : MOV EBP,ESP
007e9a93 : SUB ESP,0x60
007e9a96 : MOVSS XMM0,dword ptr [EAX]
007e9a9a : MOVSS XMM1,dword ptr [0x00cdf0d0]
007e9aa2 : MOVSS dword ptr [0x01720f4c],XMM0
007e9aaa : MOVSS XMM0,dword ptr [EAX + 0x4]
007e9aaf : MOVSS dword ptr [0x01720f50],XMM0
007e9ab7 : MOVSS XMM0,dword ptr [EAX + 0x8]
007e9abc : MOVSS dword ptr [0x01720f54],XMM0
007e9ac4 : MOVSS XMM0,dword ptr [0x00cdf7d8]
007e9acc : MOVSS XMM4,dword ptr [EAX + 0x4]
007e9ad1 : MOVSS XMM3,dword ptr [EAX]
007e9ad5 : MOVSS XMM5,dword ptr [EAX + 0x8]
007e9ada : PUSH EBX
007e9adb : MOV EBX,dword ptr [EBP + 0xc]
007e9ade : MOVSS XMM2,dword ptr [EBX + 0x8]
007e9ae3 : MOVSS dword ptr [EBP + 0xc],XMM0
007e9ae8 : XORPS XMM0,XMM0
007e9aeb : MOVSS dword ptr [EBP + -0x18],XMM0
007e9af0 : MOVSS dword ptr [EBP + -0x14],XMM0
007e9af5 : MOVSS dword ptr [EBP + -0x10],XMM0
007e9afa : MOVSS dword ptr [EBP + -0x60],XMM0
007e9aff : MOVSS dword ptr [EBP + -0x58],XMM0
007e9b04 : MOVAPS XMM0,XMM4
007e9b07 : MOVSS dword ptr [EBP + -0x50],XMM0
007e9b0c : ADDSS XMM0,dword ptr [0x00cdf140]
007e9b14 : MOVSS dword ptr [EBP + -0x20],XMM0
007e9b19 : MOVSS XMM0,dword ptr [EBX]
007e9b1d : MOVSS dword ptr [EBP + -0x5c],XMM1
007e9b22 : MOVSS XMM1,dword ptr [EBX + 0x4]
007e9b27 : PUSH ESI
007e9b28 : LEA EAX,[EBP + -0x30]
007e9b2b : MULSS XMM0,XMM6
007e9b2f : MULSS XMM1,XMM6
007e9b33 : ADDSS XMM1,XMM4
007e9b37 : MULSS XMM2,XMM6
007e9b3b : ADDSS XMM0,XMM3
007e9b3f : ADDSS XMM2,XMM5
007e9b43 : MOVAPS XMM4,XMM1
007e9b46 : ADDSS XMM4,dword ptr [0x00cdf140]
007e9b4e : PUSH EAX
007e9b4f : MOV ECX,EAX
007e9b51 : MOVSS dword ptr [EBP + -0x48],XMM0
007e9b56 : MOVSS dword ptr [EBP + -0x44],XMM1
007e9b5b : SUBSS XMM1,dword ptr [EBP + -0x20]
007e9b60 : MOVSS dword ptr [EBP + -0x40],XMM2
007e9b65 : MOVSS dword ptr [EBP + -0x3c],XMM0
007e9b6a : MOVSS dword ptr [EBP + -0x34],XMM2
007e9b6f : SUBSS XMM0,XMM3
007e9b73 : SUBSS XMM2,XMM5
007e9b77 : PUSH ECX
007e9b78 : MOV dword ptr [EBP + -0x4],0x0
007e9b7f : MOVSS dword ptr [EBP + -0x54],XMM3
007e9b84 : MOVSS dword ptr [EBP + -0x4c],XMM5
007e9b89 : MOVSS dword ptr [EBP + -0x24],XMM3
007e9b8e : MOVSS dword ptr [EBP + -0x1c],XMM5
007e9b93 : MOVSS dword ptr [EBP + -0x38],XMM4
007e9b98 : MOVSS dword ptr [EBP + -0x30],XMM0
007e9b9d : MOVSS dword ptr [EBP + -0x2c],XMM1
007e9ba2 : MOVSS dword ptr [EBP + -0x28],XMM2
007e9ba7 : CALL 0x004ff722
007e9bac : MOV ECX,dword ptr [EBP + 0x8]
007e9baf : LEA EDX,[EBP + -0x24]
007e9bb2 : PUSH EDX
007e9bb3 : LEA EAX,[EBP + -0x30]
007e9bb6 : PUSH EAX
007e9bb7 : CALL 0x007e8090
007e9bbc : MOV ESI,EAX
007e9bbe : MOV dword ptr [EBP + -0xc],ESI
007e9bc1 : TEST ESI,ESI
007e9bc3 : JG 0x007e9bcf
007e9bc5 : XOR EAX,EAX
007e9bc7 : POP ESI
007e9bc8 : POP EBX
007e9bc9 : MOV ESP,EBP
007e9bcb : POP EBP
007e9bcc : RET 0x10
007e9bcf : CMP ESI,0x1
007e9bd2 : JLE 0x007e9bee
007e9bd4 : MOV ECX,dword ptr [EBP + 0x8]
007e9bd7 : MOV EDX,dword ptr [ECX + 0xfc]
007e9bdd : PUSH 0x7e03d0
007e9be2 : PUSH 0x4
007e9be4 : PUSH ESI
007e9be5 : PUSH EDX
007e9be6 : CALL 0x00635ad0
007e9beb : ADD ESP,0x10
007e9bee : XOR EAX,EAX
007e9bf0 : MOV dword ptr [EBP + -0x8],EAX
007e9bf3 : TEST ESI,ESI
007e9bf5 : JLE 0x007e9d5e
007e9bfb : MOV ECX,dword ptr [EBP + 0x8]
007e9bfe : MOV EDX,dword ptr [ECX + 0xfc]
007e9c04 : MOV EAX,dword ptr [EDX + EAX*0x4]
007e9c07 : MOV ESI,dword ptr [EAX + 0x8]
007e9c0a : TEST ESI,ESI
007e9c0c : JZ 0x007e9c17
007e9c0e : CMP dword ptr [ESI + 0x304],0x1
007e9c15 : JZ 0x007e9c2b
007e9c17 : MOV EAX,dword ptr [ESI + 0x304]
007e9c1d : CMP EAX,0x2
007e9c20 : JZ 0x007e9c2b
007e9c22 : CMP EAX,0xd
007e9c25 : JNZ 0x007e9d4e
007e9c2b : PUSH ESI
007e9c2c : CALL 0x007d5bf0
007e9c31 : TEST AL,AL
007e9c33 : JNZ 0x007e9cab
007e9c35 : PUSH ESI
007e9c36 : CALL 0x007d5cf0
007e9c3b : TEST AL,AL
007e9c3d : JNZ 0x007e9cab
007e9c3f : MOV EAX,dword ptr [EBP + 0x14]
007e9c42 : MOV EDX,dword ptr [ESI]
007e9c44 : MOV EDX,dword ptr [EDX + 0xc8]
007e9c4a : PUSH EAX
007e9c4b : LEA ECX,[EBP + -0x30]
007e9c4e : PUSH ECX
007e9c4f : LEA EAX,[EBP + -0x24]
007e9c52 : PUSH EAX
007e9c53 : MOV ECX,ESI
007e9c55 : CALL EDX
007e9c57 : TEST AL,AL
007e9c59 : JZ 0x007e9d4e
007e9c5f : MOV ECX,dword ptr [EBP + 0x14]
007e9c62 : MOV EDX,dword ptr [EBP + 0x10]
007e9c65 : MOV EAX,dword ptr [ESI]
007e9c67 : PUSH ECX
007e9c68 : PUSH EDX
007e9c69 : LEA ECX,[EBP + -0x18]
007e9c6c : PUSH ECX
007e9c6d : PUSH EBX
007e9c6e : LEA EDX,[EBP + -0x3c]
007e9c71 : PUSH EDX
007e9c72 : LEA ECX,[EBP + -0x48]
007e9c75 : PUSH ECX
007e9c76 : LEA EDX,[EBP + -0x24]
007e9c79 : PUSH EDX
007e9c7a : MOV EDX,dword ptr [EAX + 0x110]
007e9c80 : LEA ECX,[EBP + -0x54]
007e9c83 : PUSH ECX
007e9c84 : MOV ECX,ESI
007e9c86 : CALL EDX
007e9c88 : TEST AL,AL
007e9c8a : JZ 0x007e9d4e
007e9c90 : MOVSS XMM0,dword ptr [EBP + -0x14]
007e9c95 : COMISS XMM0,dword ptr [EBP + 0xc]
007e9c99 : JBE 0x007e9d4e
007e9c9f : MOV dword ptr [EBP + -0x4],0x2
007e9ca6 : JMP 0x007e9d31
007e9cab : MOV ECX,dword ptr [EBP + 0x14]
007e9cae : MOV EAX,dword ptr [ESI]
007e9cb0 : PUSH ECX
007e9cb1 : LEA EDX,[EBP + -0x30]
007e9cb4 : PUSH EDX
007e9cb5 : MOV EDX,dword ptr [EAX + 0xc8]
007e9cbb : LEA ECX,[EBP + -0x24]
007e9cbe : PUSH ECX
007e9cbf : MOV ECX,ESI
007e9cc1 : CALL EDX
007e9cc3 : TEST AL,AL
007e9cc5 : JZ 0x007e9d08
007e9cc7 : MOV ECX,dword ptr [EBP + 0x14]
007e9cca : MOV EDX,dword ptr [EBP + 0x10]
007e9ccd : MOV EAX,dword ptr [ESI]
007e9ccf : PUSH ECX
007e9cd0 : PUSH EDX
007e9cd1 : LEA ECX,[EBP + -0x18]
007e9cd4 : PUSH ECX
007e9cd5 : PUSH EBX
007e9cd6 : LEA EDX,[EBP + -0x3c]
007e9cd9 : PUSH EDX
007e9cda : LEA ECX,[EBP + -0x48]
007e9cdd : PUSH ECX
007e9cde : LEA EDX,[EBP + -0x24]
007e9ce1 : PUSH EDX
007e9ce2 : MOV EDX,dword ptr [EAX + 0x110]
007e9ce8 : LEA ECX,[EBP + -0x54]
007e9ceb : PUSH ECX
007e9cec : MOV ECX,ESI
007e9cee : CALL EDX
007e9cf0 : TEST AL,AL
007e9cf2 : JZ 0x007e9d08
007e9cf4 : MOVSS XMM0,dword ptr [EBP + -0x14]
007e9cf9 : COMISS XMM0,dword ptr [EBP + 0xc]
007e9cfd : JBE 0x007e9d08
007e9cff : MOV dword ptr [EBP + -0x4],0x2
007e9d06 : JMP 0x007e9d31
007e9d08 : LEA EAX,[EBP + -0x18]
007e9d0b : PUSH EAX
007e9d0c : LEA ECX,[EBP + -0x3c]
007e9d0f : PUSH ECX
007e9d10 : LEA EDX,[EBP + -0x60]
007e9d13 : PUSH EDX
007e9d14 : MOV ECX,ESI
007e9d16 : CALL 0x007e22b0
007e9d1b : TEST AL,AL
007e9d1d : JZ 0x007e9d4e
007e9d1f : MOVSS XMM0,dword ptr [EBP + -0x14]
007e9d24 : COMISS XMM0,dword ptr [EBP + 0xc]
007e9d28 : JBE 0x007e9d4e
007e9d2a : MOV dword ptr [EBP + -0x4],0x1
007e9d31 : MOVSS XMM1,dword ptr [EBP + -0x18]
007e9d36 : MOVSS dword ptr [EDI],XMM1
007e9d3a : MOVSS XMM1,dword ptr [EBP + -0x10]
007e9d3f : MOVSS dword ptr [EDI + 0x4],XMM0
007e9d44 : MOVSS dword ptr [EDI + 0x8],XMM1
007e9d49 : MOVSS dword ptr [EBP + 0xc],XMM0
007e9d4e : MOV EAX,dword ptr [EBP + -0x8]
007e9d51 : INC EAX
007e9d52 : CMP EAX,dword ptr [EBP + -0xc]
007e9d55 : MOV dword ptr [EBP + -0x8],EAX
007e9d58 : JL 0x007e9bfb
007e9d5e : MOV EAX,dword ptr [EBP + -0x4]
007e9d61 : POP ESI
007e9d62 : POP EBX
007e9d63 : MOV ESP,EBP
007e9d65 : POP EBP
007e9d66 : RET 0x10
