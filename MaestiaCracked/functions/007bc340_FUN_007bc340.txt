PROGRAM  : Maestia.exe
FUNCTION : FUN_007bc340
ENTRY    : 007bc340
BODY     : [[007bc340, 007bc471]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bc340(char param_1)

{
  uint uVar1;
  int unaff_EDI;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0ec6f;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(unaff_EDI + 4);
  local_18 = 0;
  local_20 = ".\\mss\\AvaMssMgr.cpp";
  local_1c = 0x5ac;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  if (*(int *)(unaff_EDI + 0x20) == 0) {
    local_8 = 0xffffffff;
    if (local_18 != 0) {
      LeaveCriticalSection(local_24);
      ExceptionList = local_10;
      return;
    }
  }
  else if (*(char *)(unaff_EDI + 0xdb) == '\0') {
    local_8 = 0xffffffff;
    if (local_18 != 0) {
      LeaveCriticalSection(local_24);
      ExceptionList = local_10;
      return;
    }
  }
  else {
    *(char *)(unaff_EDI + 0xdc) = param_1;
    if (*(int *)(unaff_EDI + 0x7c) != 0) {
      if (param_1 == '\0') {
        FUN_00753e70(uVar1);
      }
      else {
        FUN_007540a0();
        FUN_00753ed0(*(undefined4 *)(unaff_EDI + 0xa0));
      }
    }
    if (local_18 != 0) {
      local_8 = 0xffffffff;
      LeaveCriticalSection(local_24);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bc340 : PUSH EBP
007bc341 : MOV EBP,ESP
007bc343 : PUSH -0x1
007bc345 : PUSH 0xb0ec6f
007bc34a : MOV EAX,FS:[0x0]
007bc350 : PUSH EAX
007bc351 : SUB ESP,0x14
007bc354 : PUSH EBX
007bc355 : PUSH ESI
007bc356 : MOV EAX,[0x00d66fa0]
007bc35b : XOR EAX,EBP
007bc35d : PUSH EAX
007bc35e : LEA EAX,[EBP + -0xc]
007bc361 : MOV FS:[0x0],EAX
007bc367 : MOV BL,byte ptr [EBP + 0x8]
007bc36a : LEA ECX,[EBP + -0x20]
007bc36d : LEA EAX,[EDI + 0x4]
007bc370 : XOR ESI,ESI
007bc372 : PUSH ECX
007bc373 : MOV dword ptr [EBP + -0x14],ESI
007bc376 : MOV dword ptr [EBP + -0x20],EAX
007bc379 : MOV dword ptr [EBP + -0x1c],0xc19060
007bc380 : MOV dword ptr [EBP + -0x18],0x5ac
007bc387 : MOV dword ptr [EBP + -0x10],0x1
007bc38e : CALL 0x006ef1a0
007bc393 : MOV dword ptr [EBP + -0x4],ESI
007bc396 : CMP dword ptr [EDI + 0x20],ESI
007bc399 : JNZ 0x007bc3cb
007bc39b : MOV dword ptr [EBP + -0x4],0xffffffff
007bc3a2 : CMP dword ptr [EBP + -0x14],ESI
007bc3a5 : JZ 0x007bc45f
007bc3ab : MOV EDX,dword ptr [EBP + -0x20]
007bc3ae : PUSH EDX
007bc3af : CALL dword ptr [0x00b8511c]
007bc3b5 : MOV dword ptr [EBP + -0x14],ESI
007bc3b8 : MOV ECX,dword ptr [EBP + -0xc]
007bc3bb : MOV dword ptr FS:[0x0],ECX
007bc3c2 : POP ECX
007bc3c3 : POP ESI
007bc3c4 : POP EBX
007bc3c5 : MOV ESP,EBP
007bc3c7 : POP EBP
007bc3c8 : RET 0x4
007bc3cb : CMP byte ptr [EDI + 0xdb],0x0
007bc3d2 : JNZ 0x007bc400
007bc3d4 : MOV dword ptr [EBP + -0x4],0xffffffff
007bc3db : CMP dword ptr [EBP + -0x14],ESI
007bc3de : JZ 0x007bc45f
007bc3e0 : MOV EAX,dword ptr [EBP + -0x20]
007bc3e3 : PUSH EAX
007bc3e4 : CALL dword ptr [0x00b8511c]
007bc3ea : MOV dword ptr [EBP + -0x14],ESI
007bc3ed : MOV ECX,dword ptr [EBP + -0xc]
007bc3f0 : MOV dword ptr FS:[0x0],ECX
007bc3f7 : POP ECX
007bc3f8 : POP ESI
007bc3f9 : POP EBX
007bc3fa : MOV ESP,EBP
007bc3fc : POP EBP
007bc3fd : RET 0x4
007bc400 : MOV ESI,dword ptr [EDI + 0x7c]
007bc403 : MOV byte ptr [EDI + 0xdc],BL
007bc409 : TEST ESI,ESI
007bc40b : JNZ 0x007bc41f
007bc40d : MOV dword ptr [EBP + -0x4],0xffffffff
007bc414 : CMP dword ptr [EBP + -0x14],ESI
007bc417 : JZ 0x007bc45f
007bc419 : MOV ECX,dword ptr [EBP + -0x20]
007bc41c : PUSH ECX
007bc41d : JMP 0x007bc452
007bc41f : TEST BL,BL
007bc421 : JZ 0x007bc43c
007bc423 : CALL 0x007540a0
007bc428 : FLD float ptr [EDI + 0xa0]
007bc42e : MOV ESI,dword ptr [EDI + 0x7c]
007bc431 : PUSH ECX
007bc432 : FSTP float ptr [ESP]
007bc435 : CALL 0x00753ed0
007bc43a : JMP 0x007bc441
007bc43c : CALL 0x00753e70
007bc441 : MOV dword ptr [EBP + -0x4],0xffffffff
007bc448 : CMP dword ptr [EBP + -0x14],0x0
007bc44c : JZ 0x007bc45f
007bc44e : MOV EDX,dword ptr [EBP + -0x20]
007bc451 : PUSH EDX
007bc452 : CALL dword ptr [0x00b8511c]
007bc458 : MOV dword ptr [EBP + -0x14],0x0
007bc45f : MOV ECX,dword ptr [EBP + -0xc]
007bc462 : MOV dword ptr FS:[0x0],ECX
007bc469 : POP ECX
007bc46a : POP ESI
007bc46b : POP EBX
007bc46c : MOV ESP,EBP
007bc46e : POP EBP
007bc46f : RET 0x4
