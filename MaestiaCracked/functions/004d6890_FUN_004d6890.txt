PROGRAM  : Maestia.exe
FUNCTION : FUN_004d6890
ENTRY    : 004d6890
BODY     : [[004d6890, 004d6944]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004d6890(void)

{
  int iVar1;
  int in_ECX;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b79c40;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(int *)(in_ECX + 4) == 0) ||
     ((uint)(*(int *)(in_ECX + 0xc) - *(int *)(in_ECX + 4) >> 3) < 0x50000)) {
    iVar1 = FUN_0040c2e0();
    local_8 = 0;
    local_18 = local_18 & 0xffffff00;
    FUN_004d6b10(*(undefined4 *)(in_ECX + 4),*(undefined4 *)(in_ECX + 8),iVar1,iVar1,local_18);
    local_8 = 0xffffffff;
    if (*(int *)(in_ECX + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(int *)(in_ECX + 0xc) = iVar1 + 0x280000;
    *(int *)(in_ECX + 8) = iVar1 + (*(int *)(in_ECX + 8) - *(int *)(in_ECX + 4) >> 3) * 8;
    *(int *)(in_ECX + 4) = iVar1;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
004d6890 : PUSH EBP
004d6891 : MOV EBP,ESP
004d6893 : PUSH -0x1
004d6895 : PUSH 0xb79c40
004d689a : MOV EAX,FS:[0x0]
004d68a0 : PUSH EAX
004d68a1 : SUB ESP,0xc
004d68a4 : PUSH EBX
004d68a5 : PUSH ESI
004d68a6 : PUSH EDI
004d68a7 : MOV EAX,[0x00d66fa0]
004d68ac : XOR EAX,EBP
004d68ae : PUSH EAX
004d68af : LEA EAX,[EBP + -0xc]
004d68b2 : MOV FS:[0x0],EAX
004d68b8 : MOV dword ptr [EBP + -0x10],ESP
004d68bb : MOV ESI,ECX
004d68bd : MOV ECX,dword ptr [ESI + 0x4]
004d68c0 : TEST ECX,ECX
004d68c2 : JZ 0x004d68d3
004d68c4 : MOV EAX,dword ptr [ESI + 0xc]
004d68c7 : SUB EAX,ECX
004d68c9 : SAR EAX,0x3
004d68cc : CMP EAX,0x50000
004d68d1 : JNC 0x004d6933
004d68d3 : MOV ECX,0x50000
004d68d8 : CALL 0x0040c2e0
004d68dd : MOV EBX,EAX
004d68df : MOV dword ptr [EBP + -0x18],EBX
004d68e2 : MOV dword ptr [EBP + -0x4],0x0
004d68e9 : MOV EAX,dword ptr [ESI + 0x8]
004d68ec : MOV ECX,dword ptr [ESI + 0x4]
004d68ef : MOV byte ptr [EBP + -0x14],0x0
004d68f3 : MOV EDX,dword ptr [EBP + -0x14]
004d68f6 : PUSH EDX
004d68f7 : MOV EDX,dword ptr [EBP + -0x18]
004d68fa : PUSH EDX
004d68fb : PUSH EBX
004d68fc : PUSH EAX
004d68fd : PUSH ECX
004d68fe : CALL 0x004d6b10
004d6903 : ADD ESP,0x14
004d6906 : MOV dword ptr [EBP + -0x4],0xffffffff
004d690d : MOV ECX,dword ptr [ESI + 0x4]
004d6910 : MOV EDI,dword ptr [ESI + 0x8]
004d6913 : SUB EDI,ECX
004d6915 : SAR EDI,0x3
004d6918 : TEST ECX,ECX
004d691a : JZ 0x004d6921
004d691c : CALL 0x006f04e0
004d6921 : LEA EAX,[EBX + 0x280000]
004d6927 : MOV dword ptr [ESI + 0xc],EAX
004d692a : LEA ECX,[EBX + EDI*0x8]
004d692d : MOV dword ptr [ESI + 0x8],ECX
004d6930 : MOV dword ptr [ESI + 0x4],EBX
004d6933 : MOV ECX,dword ptr [EBP + -0xc]
004d6936 : MOV dword ptr FS:[0x0],ECX
004d693d : POP ECX
004d693e : POP EDI
004d693f : POP ESI
004d6940 : POP EBX
004d6941 : MOV ESP,EBP
004d6943 : POP EBP
004d6944 : RET
