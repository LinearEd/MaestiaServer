PROGRAM  : Maestia.exe
FUNCTION : FUN_00a6a570
ENTRY    : 00a6a570
BODY     : [[00a6a570, 00a6a6a6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a6a570(int param_1,short param_2)

{
  char cVar1;
  undefined2 uVar2;
  undefined2 uVar3;
  int iVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  int iVar8;
  
  if (*(int *)(param_1 + 8) != 0) {
    uVar2 = *(undefined2 *)(*(int *)(DAT_0172491c + 0x17c) + 0x16d8);
    uVar3 = *(undefined2 *)(*(int *)(DAT_0172491c + 0x17c) + 0x7c);
    piVar7 = (int *)**(int **)(param_1 + 4);
    if (piVar7 != *(int **)(param_1 + 4)) {
      do {
        iVar4 = piVar7[4];
        iVar8 = *(int *)(iVar4 + 4);
        if ((((*(uint *)(iVar8 + 0xa0) & 1 << ((byte)uVar2 & 0x1f)) != 0) &&
            ((*(uint *)(iVar8 + 0xa4) & 1 << ((byte)uVar3 & 0x1f)) != 0)) &&
           (*(int *)(iVar4 + 0x28) != 0)) {
          if (((*(short *)(iVar8 + 0xce) == param_2) || (*(short *)(iVar8 + 0xd0) == param_2)) ||
             (*(short *)(iVar8 + 0xc0) == param_2)) {
            FUN_00405ae0(iVar4 + 8);
          }
          iVar8 = 0x44;
          do {
            if ((*(short *)(iVar8 + -0x20 + *(int *)(iVar4 + 4)) == param_2) ||
               (*(short *)(iVar8 + *(int *)(iVar4 + 4)) == param_2)) {
              FUN_00405ae0(iVar4 + 8);
            }
            iVar8 = iVar8 + 2;
          } while (iVar8 < 0x54);
        }
        if (*(char *)((int)piVar7 + 0x15) == '\0') {
          piVar5 = (int *)piVar7[2];
          if (*(char *)((int)piVar5 + 0x15) == '\0') {
            cVar1 = *(char *)(*piVar5 + 0x15);
            piVar7 = piVar5;
            piVar5 = (int *)*piVar5;
            while (cVar1 == '\0') {
              cVar1 = *(char *)(*piVar5 + 0x15);
              piVar7 = piVar5;
              piVar5 = (int *)*piVar5;
            }
          }
          else {
            cVar1 = *(char *)(piVar7[1] + 0x15);
            piVar6 = (int *)piVar7[1];
            piVar5 = piVar7;
            while ((piVar7 = piVar6, cVar1 == '\0' && (piVar5 == (int *)piVar7[2]))) {
              cVar1 = *(char *)(piVar7[1] + 0x15);
              piVar6 = (int *)piVar7[1];
              piVar5 = piVar7;
            }
          }
        }
      } while (piVar7 != *(int **)(param_1 + 4));
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a6a570 : PUSH EBP
00a6a571 : MOV EBP,ESP
00a6a573 : SUB ESP,0x8
00a6a576 : PUSH EBX
00a6a577 : PUSH ESI
00a6a578 : MOV ESI,dword ptr [EBP + 0x8]
00a6a57b : CMP dword ptr [ESI + 0x8],0x0
00a6a57f : PUSH EDI
00a6a580 : JZ 0x00a6a69e
00a6a586 : MOV EAX,[0x0172491c]
00a6a58b : MOV EAX,dword ptr [EAX + 0x17c]
00a6a591 : MOVZX EDX,word ptr [EAX + 0x16d8]
00a6a598 : MOVZX ECX,word ptr [EAX + 0x7c]
00a6a59c : MOV EAX,dword ptr [ESI + 0x4]
00a6a59f : MOV EBX,dword ptr [EAX]
00a6a5a1 : CMP EBX,EAX
00a6a5a3 : JZ 0x00a6a69e
00a6a5a9 : MOV ESI,0x1
00a6a5ae : SHL ESI,CL
00a6a5b0 : MOV EAX,0x1
00a6a5b5 : MOV CL,DL
00a6a5b7 : SHL EAX,CL
00a6a5b9 : MOV dword ptr [EBP + -0x8],ESI
00a6a5bc : MOV dword ptr [EBP + -0x4],EAX
00a6a5bf : NOP
00a6a5c0 : MOV EDI,dword ptr [EBX + 0x10]
00a6a5c3 : MOV EAX,dword ptr [EDI + 0x4]
00a6a5c6 : MOV CL,0x1
00a6a5c8 : TEST dword ptr [EAX + 0xa4],ESI
00a6a5ce : JNZ 0x00a6a5d2
00a6a5d0 : XOR CL,CL
00a6a5d2 : MOV EDX,dword ptr [EBP + -0x4]
00a6a5d5 : TEST dword ptr [EAX + 0xa0],EDX
00a6a5db : JZ 0x00a6a64b
00a6a5dd : TEST CL,CL
00a6a5df : JZ 0x00a6a64b
00a6a5e1 : CMP dword ptr [EDI + 0x28],0x0
00a6a5e5 : JZ 0x00a6a64b
00a6a5e7 : MOV CX,word ptr [EBP + 0xc]
00a6a5eb : CMP word ptr [EAX + 0xce],CX
00a6a5f2 : JZ 0x00a6a60c
00a6a5f4 : CMP word ptr [EAX + 0xd0],CX
00a6a5fb : JZ 0x00a6a60c
00a6a5fd : CMP word ptr [EAX + 0xc0],CX
00a6a604 : JNZ 0x00a6a618
00a6a606 : LEA EAX,[EDI + 0x8]
00a6a609 : PUSH EAX
00a6a60a : JMP 0x00a6a610
00a6a60c : LEA ECX,[EDI + 0x8]
00a6a60f : PUSH ECX
00a6a610 : MOV EAX,dword ptr [EBP + 0x10]
00a6a613 : CALL 0x00405ae0
00a6a618 : MOV ESI,0x44
00a6a61d : LEA ECX,[ECX]
00a6a620 : MOV EAX,dword ptr [EDI + 0x4]
00a6a623 : MOV CX,word ptr [EBP + 0xc]
00a6a627 : CMP word ptr [ESI + EAX*0x1 + -0x20],CX
00a6a62c : JZ 0x00a6a634
00a6a62e : CMP word ptr [ESI + EAX*0x1],CX
00a6a632 : JNZ 0x00a6a640
00a6a634 : MOV EAX,dword ptr [EBP + 0x10]
00a6a637 : LEA EDX,[EDI + 0x8]
00a6a63a : PUSH EDX
00a6a63b : CALL 0x00405ae0
00a6a640 : ADD ESI,0x2
00a6a643 : CMP ESI,0x54
00a6a646 : JL 0x00a6a620
00a6a648 : MOV ESI,dword ptr [EBP + -0x8]
00a6a64b : CMP byte ptr [EBX + 0x15],0x0
00a6a64f : JNZ 0x00a6a692
00a6a651 : MOV ECX,dword ptr [EBX + 0x8]
00a6a654 : CMP byte ptr [ECX + 0x15],0x0
00a6a658 : JNZ 0x00a6a670
00a6a65a : MOV EAX,dword ptr [ECX]
00a6a65c : CMP byte ptr [EAX + 0x15],0x0
00a6a660 : JNZ 0x00a6a66c
00a6a662 : MOV ECX,EAX
00a6a664 : MOV EAX,dword ptr [ECX]
00a6a666 : CMP byte ptr [EAX + 0x15],0x0
00a6a66a : JZ 0x00a6a662
00a6a66c : MOV EBX,ECX
00a6a66e : JMP 0x00a6a692
00a6a670 : MOV EAX,dword ptr [EBX + 0x4]
00a6a673 : CMP byte ptr [EAX + 0x15],0x0
00a6a677 : JNZ 0x00a6a690
00a6a679 : LEA ESP,[ESP]
00a6a680 : CMP EBX,dword ptr [EAX + 0x8]
00a6a683 : JNZ 0x00a6a690
00a6a685 : MOV EBX,EAX
00a6a687 : MOV EAX,dword ptr [EAX + 0x4]
00a6a68a : CMP byte ptr [EAX + 0x15],0x0
00a6a68e : JZ 0x00a6a680
00a6a690 : MOV EBX,EAX
00a6a692 : MOV EAX,dword ptr [EBP + 0x8]
00a6a695 : CMP EBX,dword ptr [EAX + 0x4]
00a6a698 : JNZ 0x00a6a5c0
00a6a69e : POP EDI
00a6a69f : POP ESI
00a6a6a0 : POP EBX
00a6a6a1 : MOV ESP,EBP
00a6a6a3 : POP EBP
00a6a6a4 : RET 0xc
