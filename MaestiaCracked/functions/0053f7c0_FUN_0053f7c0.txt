PROGRAM  : Maestia.exe
FUNCTION : FUN_0053f7c0
ENTRY    : 0053f7c0
BODY     : [[0053f7c0, 0053f892]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053f7c0(GRefCountNTSImpl *param_1)

{
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  GRefCountNTSImpl *pGVar3;
  bool bVar4;
  undefined1 *puVar5;
  GRefCountNTSImpl *pGVar6;
  undefined1 local_2c [24];
  GRefCountNTSImpl *local_14;
  ushort local_2;
  
  pGVar6 = param_1;
  bVar4 = (*(ushort *)(param_1 + 0x2a) >> 9 & 1) == 0;
  if (bVar4) {
    param_1 = (GRefCountNTSImpl *)0x0;
    pGVar3 = (GRefCountNTSImpl *)&param_1;
  }
  else {
    pGVar3 = param_1 + 0x18;
  }
  iVar1 = *(int *)pGVar3;
  if ((bVar4) && (param_1 != (GRefCountNTSImpl *)0x0)) {
    GRefCountNTSImpl::Release(param_1);
  }
  if (iVar1 != 0) {
    FUN_0053de80(pGVar6,0);
    if (local_14 != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(local_14);
    }
    puVar5 = local_2c;
    local_2 = local_2 | 0x200;
    local_14 = (GRefCountNTSImpl *)0x0;
    FUN_0053f720(puVar5);
    uVar2 = FUN_00560f80(puVar5);
    if (*(GRefCountImpl **)(in_ECX + 0x1c) != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(*(GRefCountImpl **)(in_ECX + 0x1c));
    }
    *(undefined4 *)(in_ECX + 0x1c) = uVar2;
    FUN_00504260();
    return;
  }
  FUN_0053f720(pGVar6);
  uVar2 = FUN_00560f80(pGVar6);
  if (*(GRefCountImpl **)(in_ECX + 0x1c) != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(*(GRefCountImpl **)(in_ECX + 0x1c));
  }
  *(undefined4 *)(in_ECX + 0x1c) = uVar2;
  return;
}



============================================================
DISASSEMBLY
============================================================
0053f7c0 : SUB ESP,0x30
0053f7c3 : PUSH ESI
0053f7c4 : PUSH EDI
0053f7c5 : MOV EDI,dword ptr [ESP + 0x3c]
0053f7c9 : MOV ESI,ECX
0053f7cb : MOV CX,word ptr [EDI + 0x2a]
0053f7cf : XOR EAX,EAX
0053f7d1 : SHR CX,0x9
0053f7d5 : MOV dword ptr [ESP + 0x8],EAX
0053f7d9 : TEST CL,0x1
0053f7dc : JZ 0x0053f7e7
0053f7de : MOV ECX,dword ptr [ESP + 0x3c]
0053f7e2 : LEA EDX,[EDI + 0x18]
0053f7e5 : JMP 0x0053f7f6
0053f7e7 : XOR ECX,ECX
0053f7e9 : MOV EAX,0x1
0053f7ee : MOV dword ptr [ESP + 0x3c],ECX
0053f7f2 : LEA EDX,[ESP + 0x3c]
0053f7f6 : PUSH EBX
0053f7f7 : MOV EBX,dword ptr [EDX]
0053f7f9 : TEST AL,0x1
0053f7fb : JZ 0x0053f806
0053f7fd : TEST ECX,ECX
0053f7ff : JZ 0x0053f806
0053f801 : CALL 0x004ff7c0
0053f806 : TEST EBX,EBX
0053f808 : POP EBX
0053f809 : JZ 0x0053f86b
0053f80b : PUSH 0x0
0053f80d : PUSH EDI
0053f80e : LEA ECX,[ESP + 0x14]
0053f812 : CALL 0x0053de80
0053f817 : MOV ECX,dword ptr [ESP + 0x24]
0053f81b : TEST ECX,ECX
0053f81d : JZ 0x0053f824
0053f81f : CALL 0x004ff7c0
0053f824 : LEA EAX,[ESP + 0xc]
0053f828 : MOV EDX,0x200
0053f82d : OR word ptr [ESP + 0x36],DX
0053f832 : PUSH EAX
0053f833 : MOV ECX,ESI
0053f835 : MOV dword ptr [ESP + 0x28],0x0
0053f83d : CALL 0x0053f720
0053f842 : MOV ECX,EAX
0053f844 : CALL 0x00560f80
0053f849 : MOV ECX,dword ptr [ESI + 0x1c]
0053f84c : MOV EDI,EAX
0053f84e : TEST ECX,ECX
0053f850 : JZ 0x0053f857
0053f852 : CALL 0x004ff7e0
0053f857 : LEA ECX,[ESP + 0xc]
0053f85b : MOV dword ptr [ESI + 0x1c],EDI
0053f85e : CALL 0x00504260
0053f863 : POP EDI
0053f864 : POP ESI
0053f865 : ADD ESP,0x30
0053f868 : RET 0x4
0053f86b : PUSH EDI
0053f86c : MOV ECX,ESI
0053f86e : CALL 0x0053f720
0053f873 : MOV ECX,EAX
0053f875 : CALL 0x00560f80
0053f87a : MOV ECX,dword ptr [ESI + 0x1c]
0053f87d : MOV EDI,EAX
0053f87f : TEST ECX,ECX
0053f881 : JZ 0x0053f888
0053f883 : CALL 0x004ff7e0
0053f888 : MOV dword ptr [ESI + 0x1c],EDI
0053f88b : POP EDI
0053f88c : POP ESI
0053f88d : ADD ESP,0x30
0053f890 : RET 0x4
