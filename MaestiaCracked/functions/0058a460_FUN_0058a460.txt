PROGRAM  : Maestia.exe
FUNCTION : FUN_0058a460
ENTRY    : 0058a460
BODY     : [[0058a460, 0058a58e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058a460(int param_1)

{
  int iVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  int *piVar5;
  undefined4 uVar6;
  int local_8;
  undefined4 *local_4;
  
  iVar1 = param_1;
  if (*(int **)(param_1 + 8) == (int *)0x0) {
    piVar5 = *(int **)(*(int *)(param_1 + 0x18) + 0x74);
  }
  else {
    iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar3 != 2) {
      return;
    }
    if (*(int *)(iVar1 + 8) == 0) {
      return;
    }
    piVar5 = (int *)(*(int *)(iVar1 + 8) + -0x68);
  }
  if ((piVar5 != (int *)0x0) && (0 < *(int *)(iVar1 + 0x1c))) {
    uVar4 = 0;
    if (1 < *(int *)(iVar1 + 0x1c)) {
      uVar6 = *(undefined4 *)(iVar1 + 0x18);
      FUN_00526260(1);
      FUN_005272e0(&local_8,uVar6,0xffffffff,0);
      FUN_00525d70(&param_1);
      *(int *)(local_8 + 8) = *(int *)(local_8 + 8) + -1;
      if (*(int *)(local_8 + 8) == 0) {
        FUN_00525340();
      }
      cVar2 = FUN_004ffc90(&DAT_00b8e598);
      if (cVar2 == '\0') {
        cVar2 = FUN_004ffc90(&DAT_00b8e590);
        if (cVar2 != '\0') {
          uVar4 = 2;
        }
      }
      else {
        uVar4 = 1;
      }
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
      if (*(int *)(param_1 + 8) == 0) {
        FUN_00525340();
      }
    }
    uVar6 = *(undefined4 *)(iVar1 + 0x18);
    FUN_00526260(0);
    FUN_005272e0(&local_4,uVar6,0xffffffff,0);
    uVar6 = *local_4;
    (**(code **)(*piVar5 + 0x40))(piVar5,uVar6,uVar4);
    FUN_00571930(piVar5,uVar6,uVar4);
    local_4[2] = local_4[2] + -1;
    if (local_4[2] == 0) {
      FUN_00525340();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058a460 : SUB ESP,0x8
0058a463 : PUSH ESI
0058a464 : MOV ESI,dword ptr [ESP + 0x10]
0058a468 : MOV ECX,dword ptr [ESI + 0x8]
0058a46b : PUSH EDI
0058a46c : TEST ECX,ECX
0058a46e : JNZ 0x0058a478
0058a470 : MOV EAX,dword ptr [ESI + 0x18]
0058a473 : MOV EDI,dword ptr [EAX + 0x74]
0058a476 : JMP 0x0058a496
0058a478 : MOV EDX,dword ptr [ECX]
0058a47a : MOV EAX,dword ptr [EDX + 0x8]
0058a47d : CALL EAX
0058a47f : CMP EAX,0x2
0058a482 : JNZ 0x0058a589
0058a488 : MOV EDI,dword ptr [ESI + 0x8]
0058a48b : TEST EDI,EDI
0058a48d : JZ 0x0058a589
0058a493 : ADD EDI,-0x68
0058a496 : TEST EDI,EDI
0058a498 : JZ 0x0058a589
0058a49e : MOV EAX,dword ptr [ESI + 0x1c]
0058a4a1 : TEST EAX,EAX
0058a4a3 : JLE 0x0058a589
0058a4a9 : PUSH EBX
0058a4aa : PUSH EBP
0058a4ab : XOR EBP,EBP
0058a4ad : CMP EAX,0x1
0058a4b0 : JLE 0x0058a53b
0058a4b6 : MOV EBX,dword ptr [ESI + 0x18]
0058a4b9 : PUSH 0x1
0058a4bb : MOV ECX,ESI
0058a4bd : CALL 0x00526260
0058a4c2 : PUSH EBP
0058a4c3 : PUSH -0x1
0058a4c5 : PUSH EBX
0058a4c6 : LEA ECX,[ESP + 0x1c]
0058a4ca : PUSH ECX
0058a4cb : MOV ECX,EAX
0058a4cd : CALL 0x005272e0
0058a4d2 : LEA EDX,[ESP + 0x1c]
0058a4d6 : PUSH EDX
0058a4d7 : LEA ECX,[ESP + 0x14]
0058a4db : CALL 0x00525d70
0058a4e0 : MOV EAX,dword ptr [ESP + 0x10]
0058a4e4 : DEC dword ptr [EAX + 0x8]
0058a4e7 : MOV ECX,EAX
0058a4e9 : ADD EAX,0x8
0058a4ec : CMP dword ptr [EAX],EBP
0058a4ee : JNZ 0x0058a4f5
0058a4f0 : CALL 0x00525340
0058a4f5 : PUSH 0xb8e598
0058a4fa : LEA ECX,[ESP + 0x20]
0058a4fe : CALL 0x004ffc90
0058a503 : TEST AL,AL
0058a505 : JZ 0x0058a50e
0058a507 : MOV EBP,0x1
0058a50c : JMP 0x0058a525
0058a50e : PUSH 0xb8e590
0058a513 : LEA ECX,[ESP + 0x20]
0058a517 : CALL 0x004ffc90
0058a51c : TEST AL,AL
0058a51e : JZ 0x0058a525
0058a520 : MOV EBP,0x2
0058a525 : MOV EAX,dword ptr [ESP + 0x1c]
0058a529 : DEC dword ptr [EAX + 0x8]
0058a52c : MOV ECX,EAX
0058a52e : ADD EAX,0x8
0058a531 : CMP dword ptr [EAX],0x0
0058a534 : JNZ 0x0058a53b
0058a536 : CALL 0x00525340
0058a53b : MOV EBX,dword ptr [ESI + 0x18]
0058a53e : PUSH 0x0
0058a540 : MOV ECX,ESI
0058a542 : CALL 0x00526260
0058a547 : PUSH 0x0
0058a549 : PUSH -0x1
0058a54b : PUSH EBX
0058a54c : LEA ECX,[ESP + 0x20]
0058a550 : PUSH ECX
0058a551 : MOV ECX,EAX
0058a553 : CALL 0x005272e0
0058a558 : MOV EDX,dword ptr [ESP + 0x14]
0058a55c : MOV EAX,dword ptr [EDX]
0058a55e : PUSH EBP
0058a55f : PUSH EAX
0058a560 : MOV EAX,dword ptr [EDI]
0058a562 : MOV EDX,dword ptr [EAX + 0x40]
0058a565 : PUSH EDI
0058a566 : MOV ECX,EDI
0058a568 : CALL EDX
0058a56a : MOV ECX,EAX
0058a56c : CALL 0x00571930
0058a571 : MOV EAX,dword ptr [ESP + 0x14]
0058a575 : DEC dword ptr [EAX + 0x8]
0058a578 : MOV ECX,EAX
0058a57a : ADD EAX,0x8
0058a57d : CMP dword ptr [EAX],0x0
0058a580 : POP EBP
0058a581 : POP EBX
0058a582 : JNZ 0x0058a589
0058a584 : CALL 0x00525340
0058a589 : POP EDI
0058a58a : POP ESI
0058a58b : ADD ESP,0x8
0058a58e : RET
