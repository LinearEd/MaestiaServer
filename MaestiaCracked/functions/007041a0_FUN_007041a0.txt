PROGRAM  : Maestia.exe
FUNCTION : FUN_007041a0
ENTRY    : 007041a0
BODY     : [[007041a0, 007042e5]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007041a0(void)

{
  uint uVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  int *unaff_EDI;
  undefined1 local_20 [8];
  undefined4 local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b42eef;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (DAT_00d7c54c != (undefined4 *)0x0) {
    FUN_004f7170(&stack0xffffffec);
    iVar2 = FUN_006f0760(0x40,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar1);
    local_8 = 0;
    if (iVar2 == 0) {
      puVar3 = (undefined4 *)0x0;
    }
    else {
      puVar3 = (undefined4 *)FUN_00704140(iVar2);
    }
    local_8 = 0xffffffff;
    (**(code **)*DAT_00d7c54c)((short)unaff_EDI[1],puVar3);
    (**(code **)(*unaff_EDI + 0x2c))();
    (**(code **)(*unaff_EDI + 0x30))();
    iVar2 = (**(code **)*puVar3)(*(undefined2 *)((int)unaff_EDI + 6));
    if (iVar2 != 0) {
      local_18 = CONCAT22((short)unaff_EDI[1],*(undefined2 *)((int)unaff_EDI + 6));
      FUN_00451e00(local_20,&local_18);
      ExceptionList = local_10;
      return 1;
    }
    if (DAT_00d72e90 != 0) {
      uVar4 = FUN_006ee420(".\\SfBaseCtrl.cpp",0x393);
      FUN_006ee470(L"[ERROR] %s %d\n",uVar4);
      DAT_00d72e90 = 0;
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007041a0 : PUSH EBP
007041a1 : MOV EBP,ESP
007041a3 : PUSH -0x1
007041a5 : PUSH 0xb42eef
007041aa : MOV EAX,FS:[0x0]
007041b0 : PUSH EAX
007041b1 : SUB ESP,0x14
007041b4 : PUSH ESI
007041b5 : MOV EAX,[0x00d66fa0]
007041ba : XOR EAX,EBP
007041bc : PUSH EAX
007041bd : LEA EAX,[EBP + -0xc]
007041c0 : MOV FS:[0x0],EAX
007041c6 : CMP dword ptr [0x00d7c54c],0x0
007041cd : JZ 0x00704297
007041d3 : MOVZX ESI,word ptr [EDI + 0x4]
007041d7 : LEA EAX,[EBP + -0x10]
007041da : PUSH EAX
007041db : MOV dword ptr [EBP + -0x10],0x0
007041e2 : CALL 0x004f7170
007041e7 : MOV ESI,dword ptr [EBP + -0x10]
007041ea : TEST ESI,ESI
007041ec : JNZ 0x0070423f
007041ee : MOV ECX,dword ptr [0x01725270]
007041f4 : SHR ECX,0x3
007041f7 : MOV EDX,ESI
007041f9 : AND ECX,0x1
007041fc : SETZ DL
007041ff : PUSH EDX
00704200 : PUSH ESI
00704201 : PUSH 0xbf1a4a
00704206 : PUSH 0x40
00704208 : CALL 0x006f0760
0070420d : ADD ESP,0x10
00704210 : MOV dword ptr [EBP + -0x10],EAX
00704213 : MOV dword ptr [EBP + -0x4],ESI
00704216 : TEST EAX,EAX
00704218 : JZ 0x00704222
0070421a : PUSH EAX
0070421b : CALL 0x00704140
00704220 : JMP 0x00704224
00704222 : XOR EAX,EAX
00704224 : MOV dword ptr [EBP + -0x4],0xffffffff
0070422b : MOV ECX,dword ptr [0x00d7c54c]
00704231 : MOV EDX,dword ptr [ECX]
00704233 : MOV EDX,dword ptr [EDX]
00704235 : PUSH EAX
00704236 : MOV ESI,EAX
00704238 : MOVZX EAX,word ptr [EDI + 0x4]
0070423c : PUSH EAX
0070423d : CALL EDX
0070423f : MOV EAX,dword ptr [EDI]
00704241 : MOV EDX,dword ptr [EAX + 0x2c]
00704244 : PUSH EDI
00704245 : MOV ECX,EDI
00704247 : CALL EDX
00704249 : MOV EAX,dword ptr [EDI]
0070424b : MOV EDX,dword ptr [EAX + 0x30]
0070424e : PUSH EDI
0070424f : MOV ECX,EDI
00704251 : CALL EDX
00704253 : MOVZX ECX,word ptr [EDI + 0x6]
00704257 : MOV EAX,dword ptr [ESI]
00704259 : MOV EDX,dword ptr [EAX]
0070425b : PUSH EDI
0070425c : PUSH ECX
0070425d : MOV ECX,ESI
0070425f : CALL EDX
00704261 : TEST EAX,EAX
00704263 : JNZ 0x007042a9
00704265 : CMP dword ptr [0x00d72e90],EAX
0070426b : JZ 0x00704297
0070426d : PUSH 0x393
00704272 : PUSH 0xbfc2c8
00704277 : CALL 0x006ee420
0070427c : ADD ESP,0x4
0070427f : PUSH EAX
00704280 : PUSH 0xbfc2dc
00704285 : CALL 0x006ee470
0070428a : ADD ESP,0xc
0070428d : MOV dword ptr [0x00d72e90],0x0
00704297 : XOR EAX,EAX
00704299 : MOV ECX,dword ptr [EBP + -0xc]
0070429c : MOV dword ptr FS:[0x0],ECX
007042a3 : POP ECX
007042a4 : POP ESI
007042a5 : MOV ESP,EBP
007042a7 : POP EBP
007042a8 : RET
007042a9 : MOVZX EAX,word ptr [EDI + 0x4]
007042ad : MOVZX ECX,word ptr [EDI + 0x6]
007042b1 : SHL EAX,0x10
007042b4 : OR EAX,ECX
007042b6 : MOV dword ptr [EBP + -0x14],EAX
007042b9 : LEA EDX,[EBP + -0x14]
007042bc : PUSH EDX
007042bd : LEA EAX,[EBP + -0x1c]
007042c0 : PUSH EAX
007042c1 : MOV EAX,[0x00d7c54c]
007042c6 : ADD EAX,0x40
007042c9 : MOV dword ptr [EBP + -0x10],EDI
007042cc : CALL 0x00451e00
007042d1 : MOV EAX,0x1
007042d6 : MOV ECX,dword ptr [EBP + -0xc]
007042d9 : MOV dword ptr FS:[0x0],ECX
007042e0 : POP ECX
007042e1 : POP ESI
007042e2 : MOV ESP,EBP
007042e4 : POP EBP
007042e5 : RET
