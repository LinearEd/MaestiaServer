PROGRAM  : Maestia.exe
FUNCTION : FUN_005ab970
ENTRY    : 005ab970
BODY     : [[005ab970, 005aba26]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ab970(int *param_1,int param_2,int param_3)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined4 *in_ECX;
  uint uVar5;
  
  iVar4 = param_1[8];
  uVar5 = (((param_1[9] << ((byte)*in_ECX & 0x1f)) - param_2) - param_3) + (int)param_1;
  if (param_2 - (int)param_1 != 0) {
    uVar2 = (uint)(param_2 - (int)param_1) >> ((byte)*in_ECX & 0x1f);
    *param_1 = (int)param_1;
    param_1[9] = uVar2;
    param_1[1] = (int)param_1;
    iVar3 = FUN_005ab560(param_1);
    if (iVar3 != 0) {
      param_1[1] = *(int *)(iVar3 + 4);
      *param_1 = iVar3;
      *(int **)(iVar3 + 4) = param_1;
      *(int **)param_1[1] = param_1;
    }
    FUN_005ab500(param_1);
    in_ECX[5] = in_ECX[5] + uVar2;
  }
  if (uVar5 != 0) {
    uVar5 = uVar5 >> ((byte)*in_ECX & 0x1f);
    piVar1 = (int *)(param_3 + param_2);
    piVar1[9] = uVar5;
    piVar1[8] = iVar4;
    *piVar1 = (int)piVar1;
    piVar1[1] = (int)piVar1;
    iVar4 = FUN_005ab560(piVar1);
    if (iVar4 != 0) {
      piVar1[1] = *(int *)(iVar4 + 4);
      *piVar1 = iVar4;
      *(int **)(iVar4 + 4) = piVar1;
      *(int **)piVar1[1] = piVar1;
    }
    FUN_005ab500(piVar1);
    in_ECX[5] = in_ECX[5] + uVar5;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005ab970 : PUSH ECX
005ab971 : PUSH EBX
005ab972 : PUSH EBP
005ab973 : MOV EBP,dword ptr [ESP + 0x14]
005ab977 : PUSH ESI
005ab978 : MOV ESI,dword ptr [ESP + 0x14]
005ab97c : MOV EAX,dword ptr [ESI + 0x20]
005ab97f : PUSH EDI
005ab980 : MOV EDI,dword ptr [ESI + 0x24]
005ab983 : MOV EBX,ECX
005ab985 : MOV ECX,dword ptr [EBX]
005ab987 : SHL EDI,CL
005ab989 : MOV dword ptr [ESP + 0x10],EAX
005ab98d : MOV EAX,EBP
005ab98f : SUB EAX,ESI
005ab991 : SUB EDI,EBP
005ab993 : SUB EDI,dword ptr [ESP + 0x20]
005ab997 : ADD EDI,ESI
005ab999 : TEST EAX,EAX
005ab99b : JZ 0x005ab9d8
005ab99d : SHR EAX,CL
005ab99f : PUSH ESI
005ab9a0 : LEA ECX,[EBX + 0xc]
005ab9a3 : MOV dword ptr [ESI],ESI
005ab9a5 : MOV dword ptr [ESP + 0x1c],EAX
005ab9a9 : MOV dword ptr [ESI + 0x24],EAX
005ab9ac : MOV dword ptr [ESI + 0x4],ESI
005ab9af : CALL 0x005ab560
005ab9b4 : TEST EAX,EAX
005ab9b6 : JZ 0x005ab9c8
005ab9b8 : MOV ECX,dword ptr [EAX + 0x4]
005ab9bb : MOV dword ptr [ESI + 0x4],ECX
005ab9be : MOV dword ptr [ESI],EAX
005ab9c0 : MOV dword ptr [EAX + 0x4],ESI
005ab9c3 : MOV EDX,dword ptr [ESI + 0x4]
005ab9c6 : MOV dword ptr [EDX],ESI
005ab9c8 : PUSH ESI
005ab9c9 : LEA ECX,[EBX + 0x10]
005ab9cc : CALL 0x005ab500
005ab9d1 : MOV EAX,dword ptr [ESP + 0x18]
005ab9d5 : ADD dword ptr [EBX + 0x14],EAX
005ab9d8 : TEST EDI,EDI
005ab9da : JZ 0x005aba1f
005ab9dc : MOV ECX,dword ptr [EBX]
005ab9de : MOV EDX,dword ptr [ESP + 0x10]
005ab9e2 : SHR EDI,CL
005ab9e4 : MOV ECX,dword ptr [ESP + 0x20]
005ab9e8 : LEA ESI,[ECX + EBP*0x1]
005ab9eb : PUSH ESI
005ab9ec : LEA ECX,[EBX + 0xc]
005ab9ef : MOV dword ptr [ESI + 0x24],EDI
005ab9f2 : MOV dword ptr [ESI + 0x20],EDX
005ab9f5 : MOV dword ptr [ESI],ESI
005ab9f7 : MOV dword ptr [ESI + 0x4],ESI
005ab9fa : CALL 0x005ab560
005ab9ff : TEST EAX,EAX
005aba01 : JZ 0x005aba13
005aba03 : MOV ECX,dword ptr [EAX + 0x4]
005aba06 : MOV dword ptr [ESI + 0x4],ECX
005aba09 : MOV dword ptr [ESI],EAX
005aba0b : MOV dword ptr [EAX + 0x4],ESI
005aba0e : MOV EDX,dword ptr [ESI + 0x4]
005aba11 : MOV dword ptr [EDX],ESI
005aba13 : PUSH ESI
005aba14 : LEA ECX,[EBX + 0x10]
005aba17 : CALL 0x005ab500
005aba1c : ADD dword ptr [EBX + 0x14],EDI
005aba1f : POP EDI
005aba20 : POP ESI
005aba21 : POP EBP
005aba22 : POP EBX
005aba23 : POP ECX
005aba24 : RET 0xc
