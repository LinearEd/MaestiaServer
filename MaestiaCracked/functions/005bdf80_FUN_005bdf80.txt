PROGRAM  : Maestia.exe
FUNCTION : FUN_005bdf80
ENTRY    : 005bdf80
BODY     : [[005bdf80, 005be0be]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005bdf80(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,&LAB_005bbe60);
    puVar1 = puVar3 + 4;
    *puVar3 = &PTR_LAB_00b8dd80;
    *puVar1 = &PTR_LAB_00b910c8;
    FUN_0057bb10(&local_18,puVar1);
    FUN_00530a70(puVar1,&local_18,&PTR_s_getBeginIndex_00b91090,7);
  }
  puVar1 = param_1;
  uVar6 = 0;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x50,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005bdf30(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x15;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x5c,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005bdf80 : SUB ESP,0x18
005bdf83 : PUSH EBX
005bdf84 : PUSH EBP
005bdf85 : PUSH ESI
005bdf86 : MOV ESI,dword ptr [ESP + 0x2c]
005bdf8a : MOV ECX,dword ptr [ESI + 0x288]
005bdf90 : PUSH EDI
005bdf91 : PUSH 0x0
005bdf93 : PUSH 0x34
005bdf95 : MOV dword ptr [ESP + 0x18],ESI
005bdf99 : MOV byte ptr [ESP + 0x1c],0x8
005bdf9e : CALL 0x00515840
005bdfa3 : MOV EDI,EAX
005bdfa5 : TEST EDI,EDI
005bdfa7 : JZ 0x005bdfeb
005bdfa9 : PUSH 0x5bbe60
005bdfae : LEA EAX,[ESP + 0x14]
005bdfb2 : PUSH EAX
005bdfb3 : MOV ECX,EDI
005bdfb5 : CALL 0x00568960
005bdfba : LEA EBX,[EDI + 0x10]
005bdfbd : LEA ECX,[ESP + 0x10]
005bdfc1 : PUSH EBX
005bdfc2 : PUSH ECX
005bdfc3 : MOV dword ptr [EDI],0xb8dd80
005bdfc9 : MOV dword ptr [EBX],0xb910c8
005bdfcf : CALL 0x0057bb10
005bdfd4 : PUSH 0x7
005bdfd6 : PUSH 0xb91090
005bdfdb : LEA EDX,[ESP + 0x20]
005bdfdf : PUSH EDX
005bdfe0 : PUSH EBX
005bdfe1 : CALL 0x00530a70
005bdfe6 : ADD ESP,0x18
005bdfe9 : JMP 0x005bdfed
005bdfeb : XOR EDI,EDI
005bdfed : MOV EBP,dword ptr [ESP + 0x2c]
005bdff1 : XOR EBX,EBX
005bdff3 : PUSH EBX
005bdff4 : MOV byte ptr [EBP + 0x8],0x0
005bdff8 : MOV dword ptr [EBP],EDI
005bdffb : MOV dword ptr [EBP + 0x4],EBX
005bdffe : MOV ECX,dword ptr [ESI + 0x288]
005be004 : PUSH 0x50
005be006 : CALL 0x00515840
005be00b : MOV EDI,EAX
005be00d : CMP EDI,EBX
005be00f : JZ 0x005be03b
005be011 : PUSH EBP
005be012 : PUSH 0x1
005be014 : MOV ECX,ESI
005be016 : CALL 0x00530910
005be01b : PUSH EAX
005be01c : LEA EAX,[ESP + 0x18]
005be020 : PUSH EAX
005be021 : MOV ECX,EDI
005be023 : CALL 0x005bdf30
005be028 : MOV EBX,EAX
005be02a : TEST EBX,EBX
005be02c : JZ 0x005be03b
005be02e : MOV ECX,dword ptr [EBX + 0x8]
005be031 : INC ECX
005be032 : AND ECX,0x8fffffff
005be038 : MOV dword ptr [EBX + 0x8],ECX
005be03b : LEA EDX,[ESP + 0x30]
005be03f : PUSH EDX
005be040 : LEA EAX,[ESP + 0x30]
005be044 : PUSH EAX
005be045 : LEA ECX,[ESI + 0x278]
005be04b : MOV dword ptr [ESP + 0x38],EBX
005be04f : MOV dword ptr [ESP + 0x34],0x15
005be057 : CALL 0x0050ff10
005be05c : MOV ECX,dword ptr [ESP + 0x30]
005be060 : TEST ECX,ECX
005be062 : JZ 0x005be069
005be064 : CALL 0x00503db0
005be069 : MOV EAX,dword ptr [ESI + 0x2a0]
005be06f : ADD EAX,0x10
005be072 : LEA ECX,[ESP + 0x30]
005be076 : PUSH ECX
005be077 : MOV byte ptr [ESP + 0x34],0x0
005be07c : MOV EDI,dword ptr [EAX]
005be07e : PUSH EBP
005be07f : LEA ECX,[ESP + 0x20]
005be083 : MOV dword ptr [ESP + 0x34],EAX
005be087 : ADD EDI,0x28
005be08a : CALL 0x00526210
005be08f : MOV ECX,dword ptr [ESP + 0x30]
005be093 : PUSH EAX
005be094 : MOV EAX,dword ptr [EDI]
005be096 : ADD ESI,0x5c
005be099 : PUSH ESI
005be09a : LEA EDX,[ESP + 0x1c]
005be09e : PUSH EDX
005be09f : CALL EAX
005be0a1 : LEA ECX,[ESP + 0x18]
005be0a5 : CALL 0x00526bc0
005be0aa : TEST EBX,EBX
005be0ac : JZ 0x005be0b5
005be0ae : MOV ECX,EBX
005be0b0 : CALL 0x00503db0
005be0b5 : POP EDI
005be0b6 : POP ESI
005be0b7 : MOV EAX,EBP
005be0b9 : POP EBP
005be0ba : POP EBX
005be0bb : ADD ESP,0x18
005be0be : RET
