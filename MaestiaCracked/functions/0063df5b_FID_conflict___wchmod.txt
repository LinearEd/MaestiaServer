PROGRAM  : Maestia.exe
FUNCTION : FID_conflict:__wchmod
ENTRY    : 0063df5b
BODY     : [[0063df5b, 0063dfc9]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Multiple Matches With Different Base Names
    __chmod
    __wchmod
   
   Library: Visual Studio 2008 Release */

int __cdecl FID_conflict___wchmod(char *_Filename,int _Mode)

{
  ulong *puVar1;
  int *piVar2;
  DWORD DVar3;
  BOOL BVar4;
  
  if (_Filename == (char *)0x0) {
    puVar1 = ___doserrno();
    *puVar1 = 0;
    piVar2 = __errno();
    *piVar2 = 0x16;
    __invalid_parameter(0,0,0,0,0);
  }
  else {
    DVar3 = GetFileAttributesW((LPCWSTR)_Filename);
    if (DVar3 != 0xffffffff) {
      if ((_Mode & 0x80U) == 0) {
        DVar3 = DVar3 | 1;
      }
      else {
        DVar3 = DVar3 & 0xfffffffe;
      }
      BVar4 = SetFileAttributesW((LPCWSTR)_Filename,DVar3);
      if (BVar4 != 0) {
        return 0;
      }
    }
    DVar3 = GetLastError();
    __dosmaperr(DVar3);
  }
  return -1;
}



============================================================
DISASSEMBLY
============================================================
0063df5b : MOV EDI,EDI
0063df5d : PUSH EBP
0063df5e : MOV EBP,ESP
0063df60 : PUSH ESI
0063df61 : XOR ESI,ESI
0063df63 : CMP dword ptr [EBP + 0x8],ESI
0063df66 : JNZ 0x0063df8c
0063df68 : CALL 0x0063ab95
0063df6d : MOV dword ptr [EAX],ESI
0063df6f : CALL 0x0063ab82
0063df74 : PUSH ESI
0063df75 : PUSH ESI
0063df76 : PUSH ESI
0063df77 : PUSH ESI
0063df78 : PUSH ESI
0063df79 : MOV dword ptr [EAX],0x16
0063df7f : CALL 0x006372b8
0063df84 : ADD ESP,0x14
0063df87 : OR EAX,0xffffffff
0063df8a : JMP 0x0063dfc7
0063df8c : PUSH dword ptr [EBP + 0x8]
0063df8f : CALL dword ptr [0x00b85120]
0063df95 : CMP EAX,-0x1
0063df98 : JNZ 0x0063dfa9
0063df9a : CALL dword ptr [0x00b85128]
0063dfa0 : PUSH EAX
0063dfa1 : CALL 0x0063aba8
0063dfa6 : POP ECX
0063dfa7 : JMP 0x0063df87
0063dfa9 : TEST byte ptr [EBP + 0xc],0x80
0063dfad : JZ 0x0063dfb4
0063dfaf : AND EAX,0xfffffffe
0063dfb2 : JMP 0x0063dfb7
0063dfb4 : OR EAX,0x1
0063dfb7 : PUSH EAX
0063dfb8 : PUSH dword ptr [EBP + 0x8]
0063dfbb : CALL dword ptr [0x00b851c4]
0063dfc1 : TEST EAX,EAX
0063dfc3 : JZ 0x0063df9a
0063dfc5 : XOR EAX,EAX
0063dfc7 : POP ESI
0063dfc8 : POP EBP
0063dfc9 : RET
