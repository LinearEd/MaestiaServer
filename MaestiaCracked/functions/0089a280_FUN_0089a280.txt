PROGRAM  : Maestia.exe
FUNCTION : FUN_0089a280
ENTRY    : 0089a280
BODY     : [[0089a280, 0089a495]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0089a280(int param_1,int param_2,int param_3,undefined4 param_4)

{
  code *pcVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  int *in_ECX;
  
  if ((char)in_ECX[0x518] != '\0') {
    in_ECX[0x519] = param_1;
    in_ECX[0x51a] = param_2;
    *(undefined2 *)(in_ECX + 0x51b) = (undefined2)param_3;
    return;
  }
  pcVar1 = *(code **)(*in_ECX + 0x284);
  *(undefined1 *)(in_ECX + 0x164) = 1;
  *(undefined1 *)((int)in_ECX + 0x4cd) = 1;
  *(undefined1 *)((int)in_ECX + 0x4ce) = 1;
  *(undefined1 *)((int)in_ECX + 0x4cb) = 0;
  *(undefined1 *)(in_ECX + 0x133) = 0;
  (*pcVar1)();
  if ((short)param_1 != 0x138a) {
    if ((char)in_ECX[0x109] != '\0') {
      return;
    }
    cVar3 = FUN_00876040();
    if (cVar3 != '\0') {
      FUN_0090c160();
      return;
    }
  }
  iVar2 = param_1;
  FUN_00896ec0();
  in_ECX[0x32] = param_2;
  in_ECX[0x46] = param_2;
  in_ECX[0x38] = iVar2;
  iVar4 = DAT_00d7c54c;
  *(undefined1 *)(in_ECX + 0x3c) = 0;
  param_1 = iVar2;
  FUN_004437f0(&param_1);
  if (param_3 == *(int *)(iVar4 + 0x44)) {
    iVar4 = 0;
  }
  else {
    iVar4 = *(int *)(param_3 + 0x10);
  }
  if (*(char *)((int)in_ECX + 0x4c9) != '\0') {
    if ((iVar4 != 0) && ((*(uint *)(iVar4 + 0x40) & 0x800) != 0)) {
      (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
                (in_ECX + 0x3e6,1,0,1);
      return;
    }
    cVar3 = FUN_00876040();
    if (cVar3 == '\0') {
      (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
                (in_ECX + 0x3ca,1,1,0);
      return;
    }
    (**(code **)(*in_ECX + 0xbc))();
    return;
  }
  if ((iVar4 != 0) && ((*(uint *)(iVar4 + 0x40) & 0x800) != 0)) {
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x3ae,1,0,1);
    return;
  }
  (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
            (in_ECX + 0x392,1,0,1);
  return;
}



============================================================
DISASSEMBLY
============================================================
0089a280 : PUSH EBP
0089a281 : MOV EBP,ESP
0089a283 : PUSH EBX
0089a284 : MOV EBX,ECX
0089a286 : CMP byte ptr [EBX + 0x1460],0x0
0089a28d : JZ 0x0089a2b1
0089a28f : MOV EAX,dword ptr [EBP + 0x8]
0089a292 : MOV ECX,dword ptr [EBP + 0xc]
0089a295 : MOV DX,word ptr [EBP + 0x10]
0089a299 : MOV dword ptr [EBX + 0x1464],EAX
0089a29f : MOV dword ptr [EBX + 0x1468],ECX
0089a2a5 : MOV word ptr [EBX + 0x146c],DX
0089a2ac : POP EBX
0089a2ad : POP EBP
0089a2ae : RET 0x10
0089a2b1 : MOV EAX,dword ptr [EBX]
0089a2b3 : MOV EDX,dword ptr [EAX + 0x284]
0089a2b9 : PUSH ESI
0089a2ba : PUSH EDI
0089a2bb : MOV byte ptr [EBX + 0x590],0x1
0089a2c2 : MOV byte ptr [EBX + 0x4cd],0x1
0089a2c9 : MOV byte ptr [EBX + 0x4ce],0x1
0089a2d0 : MOV byte ptr [EBX + 0x4cb],0x0
0089a2d7 : MOV byte ptr [EBX + 0x4cc],0x0
0089a2de : CALL EDX
0089a2e0 : MOV ESI,dword ptr [EBP + 0x8]
0089a2e3 : MOV EAX,0x138a
0089a2e8 : CMP SI,AX
0089a2eb : JZ 0x0089a335
0089a2ed : CMP byte ptr [EBX + 0x424],0x0
0089a2f4 : JNZ 0x0089a48f
0089a2fa : MOV ECX,dword ptr [EBX + 0x138]
0089a300 : MOV EDX,dword ptr [ECX + 0x4]
0089a303 : LEA ESI,[EBX + 0x1158]
0089a309 : LEA EDI,[EDX + EBX*0x1 + 0x138]
0089a310 : CALL 0x00876040
0089a315 : TEST AL,AL
0089a317 : JZ 0x0089a332
0089a319 : MOV EAX,[0x00da9894]
0089a31e : MOV ECX,dword ptr [EAX]
0089a320 : MOV ESI,dword ptr [ECX + 0x18c]
0089a326 : CALL 0x0090c160
0089a32b : POP EDI
0089a32c : POP ESI
0089a32d : POP EBX
0089a32e : POP EBP
0089a32f : RET 0x10
0089a332 : MOV ESI,dword ptr [EBP + 0x8]
0089a335 : MOV EDX,dword ptr [EBP + 0x14]
0089a338 : MOV EAX,dword ptr [EBP + 0x10]
0089a33b : PUSH EDX
0089a33c : PUSH EAX
0089a33d : PUSH ESI
0089a33e : PUSH EBX
0089a33f : CALL 0x00896ec0
0089a344 : MOV EAX,dword ptr [EBP + 0xc]
0089a347 : MOV dword ptr [EBX + 0xc8],EAX
0089a34d : MOV dword ptr [EBX + 0x118],EAX
0089a353 : MOV dword ptr [EBX + 0xe0],ESI
0089a359 : MOV dword ptr [EBP + 0x8],ESI
0089a35c : MOV ESI,dword ptr [0x00d7c54c]
0089a362 : LEA ECX,[EBP + 0x8]
0089a365 : PUSH ECX
0089a366 : LEA ECX,[ESI + 0x40]
0089a369 : LEA EAX,[EBP + 0x10]
0089a36c : MOV byte ptr [EBX + 0xf0],0x0
0089a373 : CALL 0x004437f0
0089a378 : MOV EAX,dword ptr [EBP + 0x10]
0089a37b : CMP EAX,dword ptr [ESI + 0x44]
0089a37e : JZ 0x0089a385
0089a380 : MOV EAX,dword ptr [EAX + 0x10]
0089a383 : JMP 0x0089a387
0089a385 : XOR EAX,EAX
0089a387 : CMP byte ptr [EBX + 0x4c9],0x0
0089a38e : JNZ 0x0089a3fd
0089a390 : TEST EAX,EAX
0089a392 : JZ 0x0089a3cd
0089a394 : TEST dword ptr [EAX + 0x40],0x800
0089a39b : JZ 0x0089a3cd
0089a39d : MOV EDX,dword ptr [EBX + 0x138]
0089a3a3 : MOV EAX,dword ptr [EDX + 0x4]
0089a3a6 : MOV EDX,dword ptr [EAX + EBX*0x1 + 0x138]
0089a3ad : PUSH 0x1
0089a3af : LEA ECX,[EAX + EBX*0x1 + 0x138]
0089a3b6 : MOV EAX,dword ptr [EDX + 0x10]
0089a3b9 : PUSH 0x0
0089a3bb : PUSH 0x1
0089a3bd : ADD EBX,0xeb8
0089a3c3 : PUSH EBX
0089a3c4 : CALL EAX
0089a3c6 : POP EDI
0089a3c7 : POP ESI
0089a3c8 : POP EBX
0089a3c9 : POP EBP
0089a3ca : RET 0x10
0089a3cd : MOV ECX,dword ptr [EBX + 0x138]
0089a3d3 : MOV EDX,dword ptr [ECX + 0x4]
0089a3d6 : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0089a3dd : PUSH 0x1
0089a3df : LEA ECX,[EDX + EBX*0x1 + 0x138]
0089a3e6 : MOV EDX,dword ptr [EAX + 0x10]
0089a3e9 : PUSH 0x0
0089a3eb : PUSH 0x1
0089a3ed : ADD EBX,0xe48
0089a3f3 : PUSH EBX
0089a3f4 : CALL EDX
0089a3f6 : POP EDI
0089a3f7 : POP ESI
0089a3f8 : POP EBX
0089a3f9 : POP EBP
0089a3fa : RET 0x10
0089a3fd : TEST EAX,EAX
0089a3ff : JZ 0x0089a43a
0089a401 : TEST dword ptr [EAX + 0x40],0x800
0089a408 : JZ 0x0089a43a
0089a40a : MOV EAX,dword ptr [EBX + 0x138]
0089a410 : MOV ECX,dword ptr [EAX + 0x4]
0089a413 : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x138]
0089a41a : MOV EAX,dword ptr [EDX + 0x10]
0089a41d : PUSH 0x1
0089a41f : LEA ECX,[ECX + EBX*0x1 + 0x138]
0089a426 : PUSH 0x0
0089a428 : PUSH 0x1
0089a42a : ADD EBX,0xf98
0089a430 : PUSH EBX
0089a431 : CALL EAX
0089a433 : POP EDI
0089a434 : POP ESI
0089a435 : POP EBX
0089a436 : POP EBP
0089a437 : RET 0x10
0089a43a : MOV EAX,dword ptr [EBX + 0x138]
0089a440 : MOV ECX,dword ptr [EAX + 0x4]
0089a443 : LEA ESI,[EBX + 0xf28]
0089a449 : LEA EDI,[ECX + EBX*0x1 + 0x138]
0089a450 : CALL 0x00876040
0089a455 : TEST AL,AL
0089a457 : JZ 0x0089a46c
0089a459 : MOV EDX,dword ptr [EBX]
0089a45b : MOV EAX,dword ptr [EDX + 0xbc]
0089a461 : MOV ECX,EBX
0089a463 : CALL EAX
0089a465 : POP EDI
0089a466 : POP ESI
0089a467 : POP EBX
0089a468 : POP EBP
0089a469 : RET 0x10
0089a46c : MOV EAX,dword ptr [EBX + 0x138]
0089a472 : MOV ECX,dword ptr [EAX + 0x4]
0089a475 : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x138]
0089a47c : MOV EAX,dword ptr [EDX + 0x10]
0089a47f : PUSH 0x0
0089a481 : PUSH 0x1
0089a483 : LEA ECX,[ECX + EBX*0x1 + 0x138]
0089a48a : PUSH 0x1
0089a48c : PUSH ESI
0089a48d : CALL EAX
0089a48f : POP EDI
0089a490 : POP ESI
0089a491 : POP EBX
0089a492 : POP EBP
0089a493 : RET 0x10
