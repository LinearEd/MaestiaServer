PROGRAM  : Maestia.exe
FUNCTION : do_put
ENTRY    : 006292bc
BODY     : [[006292bc, 00629404]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3_GS replaced with injection: EH_prolog3 */
/* Library Function - Multiple Matches With Same Base Name
    protected: virtual class std::ostreambuf_iterator<unsigned short,struct
   std::char_traits<unsigned short> > __thiscall std::num_put<unsigned short,class
   std::ostreambuf_iterator<unsigned short,struct std::char_traits<unsigned short> > >::do_put(class
   std::ostreambuf_iterator<unsigned short,struct std::char_traits<unsigned short> >,class
   std::ios_base &,unsigned short,bool)const 
    protected: virtual class std::ostreambuf_iterator<wchar_t,struct std::char_traits<wchar_t> >
   __thiscall std::num_put<wchar_t,class std::ostreambuf_iterator<wchar_t,struct
   std::char_traits<wchar_t> > >::do_put(class std::ostreambuf_iterator<wchar_t,struct
   std::char_traits<wchar_t> >,class std::ios_base &,wchar_t,bool)const 
   
   Library: Visual Studio 2008 Release */

void do_put(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4,undefined4 param_5,
           char param_6)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  undefined4 *puVar5;
  int *in_ECX;
  undefined1 local_60 [28];
  undefined1 local_44 [4];
  undefined1 local_40 [4];
  undefined4 local_3c;
  undefined4 local_38;
  int *local_34;
  basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
  local_30 [4];
  undefined4 **local_2c [4];
  uint local_1c;
  uint local_18;
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x50;
  local_8 = 0x6292c8;
  local_38 = param_1;
  if ((*(uint *)(param_4 + 0x10) & 0x4000) == 0) {
    (**(code **)(*in_ECX + 0x1c))(param_1,param_2,param_3,param_4,param_5,param_6);
  }
  else {
    local_34 = in_ECX;
    uVar3 = FUN_004d0b70(local_40);
    local_8 = 0;
    local_3c = use_facet<>(uVar3);
    FUN_00451310();
    std::
    basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
    ::
    basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
              (local_30);
    local_8 = 1;
    if (param_6 == '\0') {
      uVar3 = curr_symbol(local_60);
      local_8._0_1_ = 3;
    }
    else {
      uVar3 = positive_sign(local_60);
      local_8._0_1_ = 2;
    }
    FID_conflict_assign(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,1);
    FID_conflict__Tidy(1,0);
    uVar1 = *(uint *)(param_4 + 0x18);
    if (((int)uVar1 < 1) || (uVar1 <= local_1c)) {
      iVar4 = 0;
    }
    else {
      iVar4 = uVar1 - local_1c;
    }
    if ((*(uint *)(param_4 + 0x10) & 0x1c0) != 0x40) {
      puVar5 = (undefined4 *)Rep(local_34,local_44,param_2,param_3,param_5,iVar4);
      param_2 = *puVar5;
      param_3 = puVar5[1];
      iVar4 = 0;
    }
    if (local_18 < 8) {
      local_2c[0] = local_2c;
    }
    puVar5 = (undefined4 *)Put(local_34,local_44,param_2,param_3,local_2c[0],local_1c);
    uVar3 = *puVar5;
    uVar2 = puVar5[1];
    *(undefined4 *)(param_4 + 0x18) = 0;
    Rep(local_34,local_38,uVar3,uVar2,param_5,iVar4);
    FID_conflict__Tidy(1,0);
  }
  FUN_00640ed0();
  return;
}



============================================================
DISASSEMBLY
============================================================
006292bc : PUSH 0x50
006292be : MOV EAX,0xb0b9d6
006292c3 : CALL 0x00640e86
006292c8 : MOV ESI,dword ptr [EBP + 0x14]
006292cb : TEST dword ptr [ESI + 0x10],0x4000
006292d2 : MOV EDI,dword ptr [EBP + 0x8]
006292d5 : MOV dword ptr [EBP + -0x30],ECX
006292d8 : MOV dword ptr [EBP + -0x34],EDI
006292db : JNZ 0x006292f9
006292dd : MOVZX EDX,byte ptr [EBP + 0x1c]
006292e1 : MOV EAX,dword ptr [ECX]
006292e3 : PUSH EDX
006292e4 : PUSH dword ptr [EBP + 0x18]
006292e7 : PUSH ESI
006292e8 : PUSH dword ptr [EBP + 0x10]
006292eb : PUSH dword ptr [EBP + 0xc]
006292ee : PUSH EDI
006292ef : CALL dword ptr [EAX + 0x1c]
006292f2 : MOV EAX,EDI
006292f4 : JMP 0x006293fd
006292f9 : LEA EAX,[EBP + -0x3c]
006292fc : PUSH EAX
006292fd : MOV ECX,ESI
006292ff : CALL 0x004d0b70
00629304 : XOR EBX,EBX
00629306 : PUSH EAX
00629307 : MOV dword ptr [EBP + -0x4],EBX
0062930a : CALL 0x00628b70
0062930f : POP ECX
00629310 : LEA ECX,[EBP + -0x3c]
00629313 : MOV dword ptr [EBP + -0x38],EAX
00629316 : CALL 0x00451310
0062931b : LEA ECX,[EBP + -0x2c]
0062931e : CALL 0x006269a6
00629323 : MOV ECX,dword ptr [EBP + -0x38]
00629326 : XOR EDI,EDI
00629328 : INC EDI
00629329 : LEA EAX,[EBP + -0x5c]
0062932c : MOV dword ptr [EBP + -0x4],EDI
0062932f : PUSH EAX
00629330 : CMP byte ptr [EBP + 0x1c],BL
00629333 : JZ 0x00629340
00629335 : CALL 0x0063097b
0062933a : MOV byte ptr [EBP + -0x4],0x2
0062933e : JMP 0x00629349
00629340 : CALL 0x00626a5e
00629345 : MOV byte ptr [EBP + -0x4],0x3
00629349 : PUSH -0x1
0062934b : PUSH EBX
0062934c : PUSH EAX
0062934d : LEA ECX,[EBP + -0x2c]
00629350 : CALL 0x00626b9c
00629355 : PUSH EBX
00629356 : PUSH EDI
00629357 : LEA ECX,[EBP + -0x5c]
0062935a : MOV byte ptr [EBP + -0x4],0x1
0062935e : CALL 0x006266c9
00629363 : MOV EAX,dword ptr [ESI + 0x18]
00629366 : CMP EAX,EBX
00629368 : JLE 0x00629376
0062936a : CMP EAX,dword ptr [EBP + -0x18]
0062936d : JBE 0x00629376
0062936f : SUB EAX,dword ptr [EBP + -0x18]
00629372 : MOV EDI,EAX
00629374 : JMP 0x00629378
00629376 : XOR EDI,EDI
00629378 : MOV EAX,dword ptr [ESI + 0x10]
0062937b : AND EAX,0x1c0
00629380 : CMP EAX,0x40
00629383 : JZ 0x006293ab
00629385 : PUSH EDI
00629386 : PUSH dword ptr [EBP + 0x18]
00629389 : LEA EAX,[EBP + -0x40]
0062938c : PUSH dword ptr [EBP + 0x10]
0062938f : PUSH dword ptr [EBP + 0xc]
00629392 : PUSH EAX
00629393 : PUSH dword ptr [EBP + -0x30]
00629396 : CALL 0x006264ac
0062939b : MOV ECX,dword ptr [EAX]
0062939d : MOV dword ptr [EBP + 0xc],ECX
006293a0 : MOV EAX,dword ptr [EAX + 0x4]
006293a3 : ADD ESP,0x18
006293a6 : MOV dword ptr [EBP + 0x10],EAX
006293a9 : XOR EDI,EDI
006293ab : CMP dword ptr [EBP + -0x14],0x8
006293af : MOV EAX,dword ptr [EBP + -0x28]
006293b2 : JNC 0x006293b7
006293b4 : LEA EAX,[EBP + -0x28]
006293b7 : PUSH dword ptr [EBP + -0x18]
006293ba : PUSH EAX
006293bb : PUSH dword ptr [EBP + 0x10]
006293be : LEA EAX,[EBP + -0x40]
006293c1 : PUSH dword ptr [EBP + 0xc]
006293c4 : PUSH EAX
006293c5 : PUSH dword ptr [EBP + -0x30]
006293c8 : CALL 0x00625faf
006293cd : MOV ECX,dword ptr [EAX]
006293cf : PUSH EDI
006293d0 : PUSH dword ptr [EBP + 0x18]
006293d3 : MOV dword ptr [EBP + 0xc],ECX
006293d6 : MOV EAX,dword ptr [EAX + 0x4]
006293d9 : PUSH EAX
006293da : PUSH ECX
006293db : PUSH dword ptr [EBP + -0x34]
006293de : MOV dword ptr [EBP + 0x10],EAX
006293e1 : PUSH dword ptr [EBP + -0x30]
006293e4 : MOV dword ptr [ESI + 0x18],EBX
006293e7 : CALL 0x006264ac
006293ec : ADD ESP,0x30
006293ef : PUSH EBX
006293f0 : PUSH 0x1
006293f2 : LEA ECX,[EBP + -0x2c]
006293f5 : CALL 0x006266c9
006293fa : MOV EAX,dword ptr [EBP + -0x34]
006293fd : CALL 0x00640ed0
00629402 : RET 0x18
