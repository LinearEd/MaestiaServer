PROGRAM  : Maestia.exe
FUNCTION : FUN_006b6070
ENTRY    : 006b6070
BODY     : [[006b6070, 006b6176]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b6070(void)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  ushort *in_ECX;
  int unaff_ESI;
  
  uVar1 = *in_ECX;
  if ((uVar1 < *(ushort *)(unaff_ESI + 0x2c)) &&
     (*(uint *)(in_ECX + 2) < *(uint *)(unaff_ESI + 0x17c))) {
    (**(code **)(unaff_ESI + 0x250))();
    if (*(short *)(unaff_ESI + 0x158) == 0) {
      iVar4 = (uint)uVar1 * 8;
      uVar5 = FUN_006b3f10();
      *(undefined4 *)(iVar4 + *(int *)(unaff_ESI + 0x30)) = uVar5;
      uVar5 = FUN_006b3f10();
      *(undefined4 *)(*(int *)(unaff_ESI + 0x30) + 4 + iVar4) = uVar5;
      iVar2 = *(int *)(unaff_ESI + 0x30);
      iVar3 = *(int *)(unaff_ESI + 0x34);
      *(undefined4 *)(iVar3 + iVar4) = *(undefined4 *)(iVar2 + iVar4);
      *(undefined4 *)(iVar3 + 4 + iVar4) = *(undefined4 *)(iVar2 + 4 + iVar4);
    }
    (**(code **)(unaff_ESI + 0x23c))();
    if ((*(byte *)(unaff_ESI + 0x170) & 1) != 0) {
      (**(code **)(unaff_ESI + 0x238))();
    }
    (**(code **)(unaff_ESI + 0x248))();
    *(ushort *)(unaff_ESI + 0x11c) = uVar1;
    *(ushort *)(unaff_ESI + 0x11e) = uVar1;
    return;
  }
  if (*(char *)(unaff_ESI + 0x231) != '\0') {
    *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b6070 : MOV EAX,dword ptr [ECX + 0x4]
006b6073 : PUSH EBP
006b6074 : MOVZX EBP,word ptr [ECX]
006b6077 : CMP BP,word ptr [ESI + 0x2c]
006b607b : JNC 0x006b6165
006b6081 : CMP EAX,dword ptr [ESI + 0x17c]
006b6087 : JNC 0x006b6165
006b608d : PUSH EBX
006b608e : PUSH EDI
006b608f : PUSH EAX
006b6090 : MOV EAX,dword ptr [ESI + 0x250]
006b6096 : PUSH ESI
006b6097 : CALL EAX
006b6099 : ADD ESP,0x8
006b609c : CMP word ptr [ESI + 0x158],0x0
006b60a4 : MOV EBX,EAX
006b60a6 : JNZ 0x006b60ee
006b60a8 : MOVSX EAX,word ptr [ESI + 0x12a]
006b60af : MOVZX EDI,BP
006b60b2 : ADD EDI,EDI
006b60b4 : ADD EDI,EDI
006b60b6 : MOV ECX,EBX
006b60b8 : ADD EDI,EDI
006b60ba : CALL 0x006b3f10
006b60bf : MOV ECX,dword ptr [ESI + 0x30]
006b60c2 : MOV dword ptr [EDI + ECX*0x1],EAX
006b60c5 : MOVSX EAX,word ptr [ESI + 0x12c]
006b60cc : MOV ECX,EBX
006b60ce : CALL 0x006b3f10
006b60d3 : MOV EDX,dword ptr [ESI + 0x30]
006b60d6 : MOV dword ptr [EDX + EDI*0x1 + 0x4],EAX
006b60da : MOV EAX,dword ptr [ESI + 0x30]
006b60dd : MOV EDX,dword ptr [EAX + EDI*0x1]
006b60e0 : MOV ECX,dword ptr [ESI + 0x34]
006b60e3 : MOV dword ptr [ECX + EDI*0x1],EDX
006b60e6 : MOV EAX,dword ptr [EAX + EDI*0x1 + 0x4]
006b60ea : MOV dword ptr [ECX + EDI*0x1 + 0x4],EAX
006b60ee : MOV EDX,dword ptr [ESI + 0x34]
006b60f1 : MOVZX ECX,BP
006b60f4 : LEA EAX,[EDX + ECX*0x8]
006b60f7 : MOV ECX,dword ptr [EAX + 0x4]
006b60fa : MOV EDX,dword ptr [EAX]
006b60fc : MOV EAX,dword ptr [ESI + 0x23c]
006b6102 : PUSH ECX
006b6103 : PUSH EDX
006b6104 : PUSH ESI
006b6105 : CALL EAX
006b6107 : ADD ESP,0xc
006b610a : TEST byte ptr [ESI + 0x170],0x1
006b6111 : MOV EDI,EAX
006b6113 : JZ 0x006b613f
006b6115 : MOV EAX,EBX
006b6117 : SUB EAX,EDI
006b6119 : JNS 0x006b611f
006b611b : MOV EAX,EDI
006b611d : SUB EAX,EBX
006b611f : CMP EAX,dword ptr [ESI + 0x140]
006b6125 : JLE 0x006b6129
006b6127 : MOV EBX,EDI
006b6129 : MOV ECX,dword ptr [ESI + 0x108]
006b612f : MOV EDX,dword ptr [ESI + 0x238]
006b6135 : PUSH ECX
006b6136 : PUSH EBX
006b6137 : PUSH ESI
006b6138 : CALL EDX
006b613a : ADD ESP,0xc
006b613d : MOV EBX,EAX
006b613f : MOV ECX,dword ptr [ESI + 0x248]
006b6145 : SUB EBX,EDI
006b6147 : PUSH EBX
006b6148 : PUSH EBP
006b6149 : LEA EAX,[ESI + 0x24]
006b614c : PUSH EAX
006b614d : PUSH ESI
006b614e : CALL ECX
006b6150 : ADD ESP,0x10
006b6153 : POP EDI
006b6154 : POP EBX
006b6155 : MOV word ptr [ESI + 0x11c],BP
006b615c : MOV word ptr [ESI + 0x11e],BP
006b6163 : POP EBP
006b6164 : RET
006b6165 : CMP byte ptr [ESI + 0x231],0x0
006b616c : JZ 0x006b6175
006b616e : MOV dword ptr [ESI + 0xc],0x86
006b6175 : POP EBP
006b6176 : RET
