PROGRAM  : Maestia.exe
FUNCTION : FUN_00476650
ENTRY    : 00476650
BODY     : [[00476650, 00476708]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00476695) */

undefined4 * FUN_00476650(void)

{
  uint uVar1;
  uint uVar2;
  int in_EAX;
  int in_ECX;
  ushort *puVar3;
  ushort *puVar4;
  uint uVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *local_c;
  
  local_c = *(undefined4 **)(in_EAX + 4);
  if (*(char *)((int)local_c[1] + 0xa79) == '\0') {
    uVar1 = *(uint *)(in_ECX + 0x14);
    puVar6 = (undefined4 *)local_c[1];
    do {
      puVar3 = (ushort *)(in_ECX + 4);
      if (7 < *(uint *)(in_ECX + 0x18)) {
        puVar3 = *(ushort **)(in_ECX + 4);
      }
      uVar2 = puVar6[8];
      uVar5 = uVar2;
      if (uVar1 <= uVar2) {
        uVar5 = uVar1;
      }
      if ((uint)puVar6[9] < 8) {
        puVar4 = (ushort *)(puVar6 + 4);
      }
      else {
        puVar4 = (ushort *)puVar6[4];
      }
      for (; uVar5 != 0; uVar5 = uVar5 - 1) {
        if (*puVar4 != *puVar3) {
          uVar5 = (-(uint)(*puVar4 < *puVar3) & 0xfffffffe) + 1;
          if (uVar5 != 0) goto LAB_004766d3;
          break;
        }
        puVar4 = puVar4 + 1;
        puVar3 = puVar3 + 1;
      }
      if (uVar2 < uVar1) {
LAB_004766d7:
        puVar7 = (undefined4 *)puVar6[2];
      }
      else {
        uVar5 = (uint)(uVar2 != uVar1);
LAB_004766d3:
        if ((int)uVar5 < 0) goto LAB_004766d7;
        puVar7 = (undefined4 *)*puVar6;
        local_c = puVar6;
      }
      puVar6 = puVar7;
    } while (*(char *)((int)puVar7 + 0xa79) == '\0');
  }
  return local_c;
}



============================================================
DISASSEMBLY
============================================================
00476650 : PUSH EBP
00476651 : MOV EBP,ESP
00476653 : SUB ESP,0x10
00476656 : MOV EAX,dword ptr [EAX + 0x4]
00476659 : PUSH EDI
0047665a : MOV EDI,dword ptr [EAX + 0x4]
0047665d : CMP byte ptr [EDI + 0xa79],0x0
00476664 : MOV dword ptr [EBP + -0x8],EAX
00476667 : JNZ 0x00476704
0047666d : MOV EAX,dword ptr [ECX + 0x14]
00476670 : MOV EDX,dword ptr [ECX + 0x18]
00476673 : PUSH EBX
00476674 : ADD ECX,0x4
00476677 : PUSH ESI
00476678 : MOV dword ptr [EBP + -0x4],EAX
0047667b : MOV dword ptr [EBP + -0x10],EDX
0047667e : MOV dword ptr [EBP + -0xc],ECX
00476681 : JMP 0x00476686
00476683 : MOV ECX,dword ptr [EBP + -0xc]
00476686 : CMP dword ptr [EBP + -0x10],0x8
0047668a : JC 0x0047668e
0047668c : MOV ECX,dword ptr [ECX]
0047668e : MOV EBX,dword ptr [EDI + 0x20]
00476691 : MOV EDX,EBX
00476693 : CMP EDX,EBX
00476695 : CMOVC EBX,EDX
00476698 : MOV ESI,EBX
0047669a : CMP EBX,EAX
0047669c : JC 0x004766a0
0047669e : MOV ESI,EAX
004766a0 : CMP dword ptr [EDI + 0x24],0x8
004766a4 : JC 0x004766ab
004766a6 : MOV EDX,dword ptr [EDI + 0x10]
004766a9 : JMP 0x004766ae
004766ab : LEA EDX,[EDI + 0x10]
004766ae : TEST ESI,ESI
004766b0 : JBE 0x004766c8
004766b2 : MOV AX,word ptr [EDX]
004766b5 : CMP AX,word ptr [ECX]
004766b8 : JNZ 0x004766dc
004766ba : ADD EDX,0x2
004766bd : ADD ECX,0x2
004766c0 : SUB ESI,0x1
004766c3 : JNZ 0x004766b2
004766c5 : MOV EAX,dword ptr [EBP + -0x4]
004766c8 : CMP EBX,EAX
004766ca : JC 0x004766d7
004766cc : XOR ECX,ECX
004766ce : CMP EBX,EAX
004766d0 : SETNZ CL
004766d3 : TEST ECX,ECX
004766d5 : JGE 0x004766f1
004766d7 : MOV EDI,dword ptr [EDI + 0x8]
004766da : JMP 0x004766f6
004766dc : MOV DX,AX
004766df : CMP DX,word ptr [ECX]
004766e2 : SBB ECX,ECX
004766e4 : AND ECX,0xfffffffe
004766e7 : ADD ECX,0x1
004766ea : JZ 0x004766c5
004766ec : MOV EAX,dword ptr [EBP + -0x4]
004766ef : JMP 0x004766d3
004766f1 : MOV dword ptr [EBP + -0x8],EDI
004766f4 : MOV EDI,dword ptr [EDI]
004766f6 : CMP byte ptr [EDI + 0xa79],0x0
004766fd : JZ 0x00476683
004766ff : MOV EAX,dword ptr [EBP + -0x8]
00476702 : POP ESI
00476703 : POP EBX
00476704 : POP EDI
00476705 : MOV ESP,EBP
00476707 : POP EBP
00476708 : RET
