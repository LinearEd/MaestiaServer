PROGRAM  : Maestia.exe
FUNCTION : FUN_009ca1a0
ENTRY    : 009ca1a0
BODY     : [[009ca1a0, 009ca620]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009ca1a0(int param_1)

{
  short sVar1;
  uint uVar2;
  short *psVar3;
  int iVar4;
  int in_ECX;
  undefined4 *puVar5;
  undefined4 ****ppppuVar6;
  uint local_2e0;
  uint local_2c4;
  undefined1 local_2c0 [4];
  undefined2 local_2bc;
  undefined4 local_2ac;
  uint local_2a8;
  undefined1 local_2a4 [4];
  undefined2 local_2a0;
  undefined4 local_290;
  uint local_28c;
  int local_288;
  undefined4 local_280;
  undefined4 local_270;
  uint local_26c;
  undefined1 local_268 [4];
  undefined2 local_264;
  undefined4 local_254;
  uint local_250;
  undefined4 local_248;
  undefined4 local_238;
  uint local_234;
  undefined4 ***local_22c [4];
  undefined4 local_21c;
  uint local_218;
  undefined1 local_214 [512];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b226ee;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_288 = param_1;
  local_218 = 7;
  local_21c = 0;
  local_22c[0] = (undefined4 ***)((uint)local_22c[0] & 0xffff0000);
  psVar3 = (short *)(in_ECX + 4);
  do {
    sVar1 = *psVar3;
    psVar3 = psVar3 + 1;
  } while (sVar1 != 0);
  local_14 = uVar2;
  FUN_00406360((short *)(in_ECX + 4),(int)psVar3 - (in_ECX + 6) >> 1);
  local_8 = 0;
  local_248 = (undefined4 *)((uint)local_248._2_2_ << 0x10);
  local_234 = 7;
  local_238 = 0;
  psVar3 = (short *)(in_ECX + 0x54);
  do {
    sVar1 = *psVar3;
    psVar3 = psVar3 + 1;
  } while (sVar1 != 0);
  FUN_00406360((short *)(in_ECX + 0x54),(int)psVar3 - (in_ECX + 0x56) >> 1);
  local_8._0_1_ = 1;
  local_26c = 7;
  local_270 = 0;
  local_280 = (undefined4 *)((uint)local_280._2_2_ << 0x10);
  FUN_00405eb0(*(int *)(DAT_0172491c + 0x17c) + 0xc,0,0xffffffff);
  local_8._0_1_ = 2;
  puVar5 = local_280;
  if (local_26c < 8) {
    puVar5 = &local_280;
  }
  FUN_0040e4a0(L" AvaGuiBattleStage::ReceiveResult MyName:%s, GetBattleType:%d",puVar5,
               *(undefined4 *)(local_288 + 0x38),uVar2);
  FUN_008018d0(local_214);
  if (*(int *)(local_288 + 0x38) == 1) {
    FUN_00406460(L"IDS_BATTLESTAGE_RESULT");
    local_8._0_1_ = 3;
    iVar4 = FUN_0081d120(local_2c0);
    local_8._0_1_ = 4;
    puVar5 = local_248;
    if (local_234 < 8) {
      puVar5 = &local_248;
    }
    ppppuVar6 = (undefined4 ****)local_22c[0];
    if (local_218 < 8) {
      ppppuVar6 = local_22c;
    }
    if (*(uint *)(iVar4 + 0x18) < 8) {
      iVar4 = iVar4 + 4;
    }
    else {
      iVar4 = *(int *)(iVar4 + 4);
    }
    FUN_00404750(iVar4,ppppuVar6,puVar5);
    local_8 = CONCAT31(local_8._1_3_,6);
    if (7 < local_2c4) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 7;
    if (7 < local_2a8) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_2bc = 0;
    local_2a8 = 7;
    local_2ac = 0;
    (**(code **)(**(int **)(*(int *)(local_288 + 4) + 0x1a8) + 0x44))(local_268,0x14);
    local_8._0_1_ = 2;
    if (7 < local_250) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    if (*(int *)(local_288 + 0x38) != 2) goto LAB_009ca53c;
    FUN_00406460(L"IDS_BATTLESTAGE_RESULT_PARTY");
    local_8._0_1_ = 8;
    iVar4 = FUN_0081d120(local_2a4);
    local_8._0_1_ = 9;
    puVar5 = local_248;
    if (local_234 < 8) {
      puVar5 = &local_248;
    }
    ppppuVar6 = (undefined4 ****)local_22c[0];
    if (local_218 < 8) {
      ppppuVar6 = local_22c;
    }
    if (*(uint *)(iVar4 + 0x18) < 8) {
      iVar4 = iVar4 + 4;
    }
    else {
      iVar4 = *(int *)(iVar4 + 4);
    }
    FUN_00404750(iVar4,ppppuVar6,puVar5);
    local_8 = CONCAT31(local_8._1_3_,0xb);
    if (7 < local_2e0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 0xc;
    if (7 < local_28c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_2a0 = 0;
    local_28c = 7;
    local_290 = 0;
    (**(code **)(**(int **)(*(int *)(local_288 + 4) + 0x1a8) + 0x44))(local_268,0x14);
    local_8._0_1_ = 2;
    if (7 < local_250) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8._0_1_ = 2;
  local_264 = 0;
  local_254 = 0;
  local_250 = 7;
LAB_009ca53c:
  FUN_009c8ee0();
  iVar4 = *DAT_00da9894;
  if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
    (**(code **)(**(int **)(iVar4 + 0x114) + 4))
              (*(int **)(iVar4 + 0x114),"TargetPopupButtonVisible",&DAT_00c634cc,1);
  }
  local_8 = CONCAT31(local_8._1_3_,1);
  if (7 < local_26c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_26c = 7;
  local_270 = 0;
  local_280 = (undefined4 *)((uint)local_280 & 0xffff0000);
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_234) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_234 = 7;
  local_238 = 0;
  local_248 = (undefined4 *)((uint)local_248 & 0xffff0000);
  local_8 = 0xffffffff;
  if (local_218 < 8) {
    local_218 = 7;
    local_21c = 0;
    local_22c[0] = (undefined4 ***)((uint)local_22c[0] & 0xffff0000);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009ca1a0 : PUSH EBP
009ca1a1 : MOV EBP,ESP
009ca1a3 : PUSH -0x1
009ca1a5 : PUSH 0xb226ee
009ca1aa : MOV EAX,FS:[0x0]
009ca1b0 : PUSH EAX
009ca1b1 : SUB ESP,0x2e8
009ca1b7 : MOV EAX,[0x00d66fa0]
009ca1bc : XOR EAX,EBP
009ca1be : MOV dword ptr [EBP + -0x10],EAX
009ca1c1 : PUSH EBX
009ca1c2 : PUSH ESI
009ca1c3 : PUSH EDI
009ca1c4 : PUSH EAX
009ca1c5 : LEA EAX,[EBP + -0xc]
009ca1c8 : MOV FS:[0x0],EAX
009ca1ce : MOV EAX,dword ptr [EBP + 0x8]
009ca1d1 : MOV ESI,ECX
009ca1d3 : LEA ECX,[ESI + 0x4]
009ca1d6 : XOR EBX,EBX
009ca1d8 : MOV dword ptr [EBP + 0xfffffd7c],EAX
009ca1de : XOR EDX,EDX
009ca1e0 : MOV EAX,ECX
009ca1e2 : MOV dword ptr [EBP + 0xfffffdec],0x7
009ca1ec : MOV dword ptr [EBP + 0xfffffde8],EBX
009ca1f2 : MOV word ptr [EBP + 0xfffffdd8],DX
009ca1f9 : LEA EDI,[EAX + 0x2]
009ca1fc : LEA ESP,[ESP]
009ca200 : MOV DX,word ptr [EAX]
009ca203 : ADD EAX,0x2
009ca206 : CMP DX,BX
009ca209 : JNZ 0x009ca200
009ca20b : SUB EAX,EDI
009ca20d : SAR EAX,0x1
009ca20f : PUSH EAX
009ca210 : PUSH ECX
009ca211 : LEA ECX,[EBP + 0xfffffdd4]
009ca217 : CALL 0x00406360
009ca21c : MOV dword ptr [EBP + -0x4],EBX
009ca21f : XOR EAX,EAX
009ca221 : LEA ECX,[ESI + 0x54]
009ca224 : MOV word ptr [EBP + 0xfffffdbc],AX
009ca22b : MOV EDI,0x7
009ca230 : MOV EAX,ECX
009ca232 : MOV dword ptr [EBP + 0xfffffdd0],EDI
009ca238 : MOV dword ptr [EBP + 0xfffffdcc],EBX
009ca23e : LEA EDX,[EAX + 0x2]
009ca241 : MOV SI,word ptr [EAX]
009ca244 : ADD EAX,0x2
009ca247 : CMP SI,BX
009ca24a : JNZ 0x009ca241
009ca24c : SUB EAX,EDX
009ca24e : SAR EAX,0x1
009ca250 : PUSH EAX
009ca251 : PUSH ECX
009ca252 : LEA ECX,[EBP + 0xfffffdb8]
009ca258 : CALL 0x00406360
009ca25d : MOV byte ptr [EBP + -0x4],0x1
009ca261 : MOV ECX,dword ptr [0x0172491c]
009ca267 : MOV EAX,dword ptr [ECX + 0x17c]
009ca26d : PUSH -0x1
009ca26f : ADD EAX,0xc
009ca272 : PUSH EBX
009ca273 : XOR EDX,EDX
009ca275 : PUSH EAX
009ca276 : LEA ECX,[EBP + 0xfffffd80]
009ca27c : MOV dword ptr [EBP + 0xfffffd98],EDI
009ca282 : MOV dword ptr [EBP + 0xfffffd94],EBX
009ca288 : MOV word ptr [EBP + 0xfffffd84],DX
009ca28f : CALL 0x00405eb0
009ca294 : MOV byte ptr [EBP + -0x4],0x2
009ca298 : CMP dword ptr [EBP + 0xfffffd98],0x8
009ca29f : MOV EAX,dword ptr [EBP + 0xfffffd7c]
009ca2a5 : MOV EAX,dword ptr [EAX + 0x38]
009ca2a8 : MOV ECX,dword ptr [EBP + 0xfffffd84]
009ca2ae : JNC 0x009ca2b6
009ca2b0 : LEA ECX,[EBP + 0xfffffd84]
009ca2b6 : PUSH EAX
009ca2b7 : PUSH ECX
009ca2b8 : PUSH 0xc92d68
009ca2bd : LEA EDX,[EBP + 0xfffffdf0]
009ca2c3 : CALL 0x0040e4a0
009ca2c8 : MOV ESI,dword ptr [0x00da98e8]
009ca2ce : LEA ECX,[EBP + 0xfffffdf0]
009ca2d4 : PUSH ECX
009ca2d5 : CALL 0x008018d0
009ca2da : MOV EDX,dword ptr [EBP + 0xfffffd7c]
009ca2e0 : MOV EAX,dword ptr [EDX + 0x38]
009ca2e3 : ADD ESP,0x10
009ca2e6 : SUB EAX,0x1
009ca2e9 : JZ 0x009ca414
009ca2ef : SUB EAX,0x1
009ca2f2 : JNZ 0x009ca53c
009ca2f8 : PUSH 0xc92e14
009ca2fd : LEA ECX,[EBP + 0xfffffd60]
009ca303 : CALL 0x00406460
009ca308 : MOV byte ptr [EBP + -0x4],0x8
009ca30c : MOV ECX,dword ptr [0x0172491c]
009ca312 : LEA EAX,[EBP + 0xfffffd60]
009ca318 : PUSH EAX
009ca319 : LEA EDI,[EBP + 0xfffffd0c]
009ca31f : CALL 0x0081d120
009ca324 : MOV byte ptr [EBP + -0x4],0x9
009ca328 : MOV EDX,dword ptr [EBP + 0xfffffdbc]
009ca32e : MOV EDI,0x8
009ca333 : CMP dword ptr [EBP + 0xfffffdd0],EDI
009ca339 : JNC 0x009ca341
009ca33b : LEA EDX,[EBP + 0xfffffdbc]
009ca341 : MOV ECX,dword ptr [EBP + 0xfffffdd8]
009ca347 : CMP dword ptr [EBP + 0xfffffdec],EDI
009ca34d : JNC 0x009ca355
009ca34f : LEA ECX,[EBP + 0xfffffdd8]
009ca355 : CMP dword ptr [EAX + 0x18],EDI
009ca358 : JC 0x009ca35f
009ca35a : MOV EAX,dword ptr [EAX + 0x4]
009ca35d : JMP 0x009ca362
009ca35f : ADD EAX,0x4
009ca362 : PUSH EDX
009ca363 : PUSH ECX
009ca364 : PUSH EAX
009ca365 : LEA ESI,[EBP + 0xfffffd9c]
009ca36b : CALL 0x00404750
009ca370 : ADD ESP,0xc
009ca373 : MOV byte ptr [EBP + -0x4],0xb
009ca377 : CMP dword ptr [EBP + 0xfffffd24],EDI
009ca37d : JC 0x009ca38a
009ca37f : MOV ECX,dword ptr [EBP + 0xfffffd10]
009ca385 : CALL 0x006f04e0
009ca38a : MOV ESI,0x7
009ca38f : XOR ECX,ECX
009ca391 : MOV dword ptr [EBP + 0xfffffd24],ESI
009ca397 : MOV dword ptr [EBP + 0xfffffd20],EBX
009ca39d : MOV word ptr [EBP + 0xfffffd10],CX
009ca3a4 : MOV byte ptr [EBP + -0x4],0xc
009ca3a8 : CMP dword ptr [EBP + 0xfffffd78],EDI
009ca3ae : JC 0x009ca3bb
009ca3b0 : MOV ECX,dword ptr [EBP + 0xfffffd64]
009ca3b6 : CALL 0x006f04e0
009ca3bb : MOV EAX,dword ptr [EBP + 0xfffffd7c]
009ca3c1 : MOV ECX,dword ptr [EAX + 0x4]
009ca3c4 : XOR EDX,EDX
009ca3c6 : MOV word ptr [EBP + 0xfffffd64],DX
009ca3cd : MOV dword ptr [EBP + 0xfffffd78],ESI
009ca3d3 : MOV dword ptr [EBP + 0xfffffd74],EBX
009ca3d9 : MOV ECX,dword ptr [ECX + 0x1a8]
009ca3df : MOV EDX,dword ptr [ECX]
009ca3e1 : MOV EDX,dword ptr [EDX + 0x44]
009ca3e4 : PUSH 0x14
009ca3e6 : LEA EAX,[EBP + 0xfffffd9c]
009ca3ec : PUSH EAX
009ca3ed : CALL EDX
009ca3ef : MOV byte ptr [EBP + -0x4],0x2
009ca3f3 : CMP dword ptr [EBP + 0xfffffdb4],EDI
009ca3f9 : JC 0x009ca406
009ca3fb : MOV ECX,dword ptr [EBP + 0xfffffda0]
009ca401 : CALL 0x006f04e0
009ca406 : XOR EAX,EAX
009ca408 : MOV word ptr [EBP + 0xfffffda0],AX
009ca40f : JMP 0x009ca52b
009ca414 : PUSH 0xc92de4
009ca419 : LEA ECX,[EBP + 0xfffffd44]
009ca41f : CALL 0x00406460
009ca424 : MOV byte ptr [EBP + -0x4],0x3
009ca428 : LEA ECX,[EBP + 0xfffffd44]
009ca42e : PUSH ECX
009ca42f : MOV ECX,dword ptr [0x0172491c]
009ca435 : LEA EDI,[EBP + 0xfffffd28]
009ca43b : CALL 0x0081d120
009ca440 : MOV byte ptr [EBP + -0x4],0x4
009ca444 : MOV EDX,dword ptr [EBP + 0xfffffdbc]
009ca44a : MOV EDI,0x8
009ca44f : CMP dword ptr [EBP + 0xfffffdd0],EDI
009ca455 : JNC 0x009ca45d
009ca457 : LEA EDX,[EBP + 0xfffffdbc]
009ca45d : MOV ECX,dword ptr [EBP + 0xfffffdd8]
009ca463 : CMP dword ptr [EBP + 0xfffffdec],EDI
009ca469 : JNC 0x009ca471
009ca46b : LEA ECX,[EBP + 0xfffffdd8]
009ca471 : CMP dword ptr [EAX + 0x18],EDI
009ca474 : JC 0x009ca47b
009ca476 : MOV EAX,dword ptr [EAX + 0x4]
009ca479 : JMP 0x009ca47e
009ca47b : ADD EAX,0x4
009ca47e : PUSH EDX
009ca47f : PUSH ECX
009ca480 : PUSH EAX
009ca481 : LEA ESI,[EBP + 0xfffffd9c]
009ca487 : CALL 0x00404750
009ca48c : ADD ESP,0xc
009ca48f : MOV byte ptr [EBP + -0x4],0x6
009ca493 : CMP dword ptr [EBP + 0xfffffd40],EDI
009ca499 : JC 0x009ca4a6
009ca49b : MOV ECX,dword ptr [EBP + 0xfffffd2c]
009ca4a1 : CALL 0x006f04e0
009ca4a6 : MOV ESI,0x7
009ca4ab : XOR EDX,EDX
009ca4ad : MOV dword ptr [EBP + 0xfffffd40],ESI
009ca4b3 : MOV dword ptr [EBP + 0xfffffd3c],EBX
009ca4b9 : MOV word ptr [EBP + 0xfffffd2c],DX
009ca4c0 : MOV byte ptr [EBP + -0x4],0x7
009ca4c4 : CMP dword ptr [EBP + 0xfffffd5c],EDI
009ca4ca : JC 0x009ca4d7
009ca4cc : MOV ECX,dword ptr [EBP + 0xfffffd48]
009ca4d2 : CALL 0x006f04e0
009ca4d7 : MOV ECX,dword ptr [EBP + 0xfffffd7c]
009ca4dd : MOV EDX,dword ptr [ECX + 0x4]
009ca4e0 : XOR EAX,EAX
009ca4e2 : MOV word ptr [EBP + 0xfffffd48],AX
009ca4e9 : MOV dword ptr [EBP + 0xfffffd5c],ESI
009ca4ef : MOV dword ptr [EBP + 0xfffffd58],EBX
009ca4f5 : MOV ECX,dword ptr [EDX + 0x1a8]
009ca4fb : MOV EAX,dword ptr [ECX]
009ca4fd : MOV EAX,dword ptr [EAX + 0x44]
009ca500 : PUSH 0x14
009ca502 : LEA EDX,[EBP + 0xfffffd9c]
009ca508 : PUSH EDX
009ca509 : CALL EAX
009ca50b : MOV byte ptr [EBP + -0x4],0x2
009ca50f : CMP dword ptr [EBP + 0xfffffdb4],EDI
009ca515 : JC 0x009ca522
009ca517 : MOV ECX,dword ptr [EBP + 0xfffffda0]
009ca51d : CALL 0x006f04e0
009ca522 : XOR ECX,ECX
009ca524 : MOV word ptr [EBP + 0xfffffda0],CX
009ca52b : MOV EDI,0x7
009ca530 : MOV dword ptr [EBP + 0xfffffdb0],EBX
009ca536 : MOV dword ptr [EBP + 0xfffffdb4],ESI
009ca53c : MOV EAX,dword ptr [EBP + 0xfffffd7c]
009ca542 : CALL 0x009c8ee0
009ca547 : MOV EDX,dword ptr [0x00da9894]
009ca54d : MOV EAX,dword ptr [EDX]
009ca54f : CMP EAX,EBX
009ca551 : JZ 0x009ca578
009ca553 : CMP dword ptr [EAX + 0x114],EBX
009ca559 : JZ 0x009ca578
009ca55b : MOV EAX,dword ptr [EAX + 0x114]
009ca561 : MOV ECX,dword ptr [EAX]
009ca563 : MOV EDX,dword ptr [ECX + 0x4]
009ca566 : PUSH 0x1
009ca568 : PUSH 0xc634cc
009ca56d : PUSH 0xc634d0
009ca572 : PUSH EAX
009ca573 : CALL EDX
009ca575 : ADD ESP,0x10
009ca578 : MOV byte ptr [EBP + -0x4],0x1
009ca57c : MOV ESI,0x8
009ca581 : CMP dword ptr [EBP + 0xfffffd98],ESI
009ca587 : JC 0x009ca594
009ca589 : MOV ECX,dword ptr [EBP + 0xfffffd84]
009ca58f : CALL 0x006f04e0
009ca594 : XOR EAX,EAX
009ca596 : MOV dword ptr [EBP + 0xfffffd98],EDI
009ca59c : MOV dword ptr [EBP + 0xfffffd94],EBX
009ca5a2 : MOV word ptr [EBP + 0xfffffd84],AX
009ca5a9 : MOV byte ptr [EBP + -0x4],BL
009ca5ac : CMP dword ptr [EBP + 0xfffffdd0],ESI
009ca5b2 : JC 0x009ca5bf
009ca5b4 : MOV ECX,dword ptr [EBP + 0xfffffdbc]
009ca5ba : CALL 0x006f04e0
009ca5bf : XOR ECX,ECX
009ca5c1 : MOV dword ptr [EBP + 0xfffffdd0],EDI
009ca5c7 : MOV dword ptr [EBP + 0xfffffdcc],EBX
009ca5cd : MOV word ptr [EBP + 0xfffffdbc],CX
009ca5d4 : MOV dword ptr [EBP + -0x4],0xffffffff
009ca5db : CMP dword ptr [EBP + 0xfffffdec],ESI
009ca5e1 : JC 0x009ca5ee
009ca5e3 : MOV ECX,dword ptr [EBP + 0xfffffdd8]
009ca5e9 : CALL 0x006f04e0
009ca5ee : XOR EDX,EDX
009ca5f0 : MOV dword ptr [EBP + 0xfffffdec],EDI
009ca5f6 : MOV dword ptr [EBP + 0xfffffde8],EBX
009ca5fc : MOV word ptr [EBP + 0xfffffdd8],DX
009ca603 : MOV ECX,dword ptr [EBP + -0xc]
009ca606 : MOV dword ptr FS:[0x0],ECX
009ca60d : POP ECX
009ca60e : POP EDI
009ca60f : POP ESI
009ca610 : POP EBX
009ca611 : MOV ECX,dword ptr [EBP + -0x10]
009ca614 : XOR ECX,EBP
009ca616 : CALL 0x00633e6b
009ca61b : MOV ESP,EBP
009ca61d : POP EBP
009ca61e : RET 0x4
