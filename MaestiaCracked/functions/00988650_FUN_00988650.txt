PROGRAM  : Maestia.exe
FUNCTION : FUN_00988650
ENTRY    : 00988650
BODY     : [[00988650, 00988929]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00988650(int param_1)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 uVar4;
  int *in_ECX;
  undefined4 extraout_ECX;
  undefined4 extraout_ECX_00;
  undefined1 local_6c [28];
  undefined1 local_50 [28];
  int *local_34;
  undefined4 **local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  piVar1 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5b172;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  switch(*(undefined1 *)(param_1 + 4)) {
  case 0:
    if (*(int *)(param_1 + 5) == 0) {
      (**(code **)(*in_ECX + 0x18))(1,300);
    }
    break;
  case 1:
    if (*(int *)(param_1 + 5) == 0) {
      (**(code **)(*in_ECX + 0x20))();
    }
    break;
  case 2:
    iVar3 = *(int *)(param_1 + 5);
    if (iVar3 == 0) {
      FUN_009873c0();
    }
    else if (iVar3 == 0x1023) {
      if (((DAT_0172491c != 0) && (*DAT_00da9894 != 0)) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
        FUN_00406460(L"IDS_MAESTONE_GAMBLE_SHORT_MAESTONES");
        local_8 = 0;
        piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar4 = FUN_0081d120(local_50);
        local_8._0_1_ = 1;
        (**(code **)(*piVar1 + 0x44))(uVar4,3);
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_00406560();
        local_8 = 0xffffffff;
        FUN_00406560();
      }
    }
    else if ((((iVar3 == 0x1037) && (DAT_0172491c != 0)) && (*DAT_00da9894 != 0)) &&
            (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
      FUN_00406460(L"IDS_MAESTONE_GAMBLE_NOT_MOVE_MAESTONES");
      local_8 = 2;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar4 = FUN_0081d120(local_6c);
      local_8._0_1_ = 3;
      (**(code **)(*piVar1 + 0x44))(uVar4,3);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    break;
  case 3:
    local_34 = in_ECX;
    iVar3 = FUN_00703c00(0x600);
    uVar4 = extraout_ECX;
    if (iVar3 != 0) {
      FUN_00824a20(DAT_0172491c,0);
      local_8 = 4;
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      FUN_009adfc0(*(undefined4 *)(*DAT_00da9894 + 0x1a8),0x13,
                   (int)(*(byte *)(iVar3 + 0x40) - 1) / 10 + 1,local_2c[0]);
      local_8 = 0xffffffff;
      FUN_00406560();
      uVar4 = extraout_ECX_00;
      in_ECX = local_34;
    }
    if (0 < in_ECX[0x43]) {
      uVar4 = FUN_00838510(uVar4,param_1);
      FUN_0082dc60(uVar4,param_1);
    }
    break;
  case 4:
    if (*(char *)((int)in_ECX + 0x32) != '\0') {
      *(undefined1 *)(in_ECX + 0x90) = 0;
      if ((*piVar1 != 0) &&
         (puVar2 = *(undefined4 **)(*piVar1 + 0x114), puVar2 != (undefined4 *)0x0)) {
        (**(code **)*puVar2)("mc_maestonegamble.StopGamble",local_14);
      }
      if ((*DAT_00da9894 != 0) &&
         (puVar2 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar2 != (undefined4 *)0x0)) {
        (**(code **)*puVar2)("mc_maestonegamble.ResetGamebleStage");
      }
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00988650 : PUSH EBP
00988651 : MOV EBP,ESP
00988653 : PUSH -0x1
00988655 : PUSH 0xb5b172
0098865a : MOV EAX,FS:[0x0]
00988660 : PUSH EAX
00988661 : SUB ESP,0x98
00988667 : MOV EAX,[0x00d66fa0]
0098866c : XOR EAX,EBP
0098866e : MOV dword ptr [EBP + -0x10],EAX
00988671 : PUSH EBX
00988672 : PUSH ESI
00988673 : PUSH EDI
00988674 : PUSH EAX
00988675 : LEA EAX,[EBP + -0xc]
00988678 : MOV FS:[0x0],EAX
0098867e : MOV EBX,dword ptr [EBP + 0x8]
00988681 : MOVZX EAX,byte ptr [EBX + 0x4]
00988685 : MOV ESI,ECX
00988687 : MOV dword ptr [EBP + -0x30],ESI
0098868a : CMP EAX,0x4
0098868d : JA 0x0098890c
00988693 : JMP dword ptr [EAX*0x4 + 0x98892c]
0098869a : CMP dword ptr [EBX + 0x5],0x0
0098869e : JNZ 0x0098890c
009886a4 : MOV EAX,dword ptr [ESI]
009886a6 : MOV EDX,dword ptr [EAX + 0x18]
009886a9 : PUSH 0x12c
009886ae : PUSH 0x1
009886b0 : CALL EDX
009886b2 : JMP 0x0098890c
009886b7 : CMP dword ptr [EBX + 0x5],0x0
009886bb : JNZ 0x0098890c
009886c1 : MOV EAX,dword ptr [ESI]
009886c3 : MOV EDX,dword ptr [EAX + 0x20]
009886c6 : CALL EDX
009886c8 : JMP 0x0098890c
009886cd : MOV EBX,dword ptr [EBX + 0x5]
009886d0 : TEST EBX,EBX
009886d2 : JNZ 0x009886e0
009886d4 : MOV EAX,ESI
009886d6 : CALL 0x009873c0
009886db : JMP 0x0098890c
009886e0 : CMP EBX,0x1023
009886e6 : JNZ 0x0098877b
009886ec : CMP dword ptr [0x0172491c],0x0
009886f3 : JZ 0x0098890c
009886f9 : MOV EAX,[0x00da9894]
009886fe : MOV EAX,dword ptr [EAX]
00988700 : TEST EAX,EAX
00988702 : JZ 0x0098890c
00988708 : CMP dword ptr [EAX + 0x1a8],0x0
0098870f : JZ 0x0098890c
00988715 : PUSH 0xc82560
0098871a : LEA ECX,[EBP + -0x4c]
0098871d : CALL 0x00406460
00988722 : MOV dword ptr [EBP + -0x4],0x0
00988729 : MOV ECX,dword ptr [0x00da9894]
0098872f : MOV EAX,dword ptr [ECX]
00988731 : MOV ECX,dword ptr [0x0172491c]
00988737 : MOV ESI,dword ptr [EAX + 0x1a8]
0098873d : LEA EDX,[EBP + -0x4c]
00988740 : PUSH EDX
00988741 : LEA EDI,[EBP + 0xffffff7c]
00988747 : CALL 0x0081d120
0098874c : MOV byte ptr [EBP + -0x4],0x1
00988750 : MOV EDX,dword ptr [ESI]
00988752 : PUSH 0x3
00988754 : PUSH EAX
00988755 : MOV EAX,dword ptr [EDX + 0x44]
00988758 : MOV ECX,ESI
0098875a : CALL EAX
0098875c : MOV byte ptr [EBP + -0x4],0x0
00988760 : MOV ECX,EDI
00988762 : CALL 0x00406560
00988767 : MOV dword ptr [EBP + -0x4],0xffffffff
0098876e : LEA ECX,[EBP + -0x4c]
00988771 : CALL 0x00406560
00988776 : JMP 0x0098890c
0098877b : CMP EBX,0x1037
00988781 : JNZ 0x0098890c
00988787 : CMP dword ptr [0x0172491c],0x0
0098878e : JZ 0x0098890c
00988794 : MOV ECX,dword ptr [0x00da9894]
0098879a : MOV EAX,dword ptr [ECX]
0098879c : TEST EAX,EAX
0098879e : JZ 0x0098890c
009887a4 : CMP dword ptr [EAX + 0x1a8],0x0
009887ab : JZ 0x0098890c
009887b1 : PUSH 0xc825a8
009887b6 : LEA ECX,[EBP + -0x68]
009887b9 : CALL 0x00406460
009887be : MOV EBX,0x2
009887c3 : MOV dword ptr [EBP + -0x4],EBX
009887c6 : MOV EDX,dword ptr [0x00da9894]
009887cc : MOV EAX,dword ptr [EDX]
009887ce : MOV ESI,dword ptr [EAX + 0x1a8]
009887d4 : MOV ECX,dword ptr [0x0172491c]
009887da : LEA EAX,[EBP + -0x68]
009887dd : PUSH EAX
009887de : LEA EDI,[EBP + 0xffffff60]
009887e4 : CALL 0x0081d120
009887e9 : MOV byte ptr [EBP + -0x4],0x3
009887ed : MOV EDX,dword ptr [ESI]
009887ef : PUSH 0x3
009887f1 : PUSH EAX
009887f2 : MOV EAX,dword ptr [EDX + 0x44]
009887f5 : MOV ECX,ESI
009887f7 : CALL EAX
009887f9 : MOV byte ptr [EBP + -0x4],BL
009887fc : MOV ECX,EDI
009887fe : CALL 0x00406560
00988803 : MOV dword ptr [EBP + -0x4],0xffffffff
0098880a : LEA ECX,[EBP + -0x68]
0098880d : CALL 0x00406560
00988812 : JMP 0x0098890c
00988817 : MOV DI,word ptr [EBX + 0x7]
0098881b : PUSH 0x600
00988820 : CALL 0x00703c00
00988825 : MOV EDI,EAX
00988827 : ADD ESP,0x4
0098882a : TEST EDI,EDI
0098882c : JZ 0x0098889e
0098882e : MOV ECX,dword ptr [0x0172491c]
00988834 : PUSH 0x0
00988836 : LEA EDX,[EDI + 0x18]
00988839 : PUSH ECX
0098883a : LEA ESI,[EBP + -0x2c]
0098883d : CALL 0x00824a20
00988842 : MOV dword ptr [EBP + -0x4],0x4
00988849 : MOVZX ECX,byte ptr [EDI + 0x40]
0098884d : DEC ECX
0098884e : MOV EAX,0x66666667
00988853 : IMUL ECX
00988855 : MOV ECX,dword ptr [EBP + -0x28]
00988858 : SAR EDX,0x2
0098885b : MOV EAX,EDX
0098885d : SHR EAX,0x1f
00988860 : CMP dword ptr [EBP + -0x14],0x8
00988864 : LEA EDX,[EDX + EAX*0x1 + 0x1]
00988868 : JNC 0x0098886d
0098886a : LEA ECX,[EBP + -0x28]
0098886d : MOV EAX,[0x00da9894]
00988872 : MOV EAX,dword ptr [EAX]
00988874 : MOV EAX,dword ptr [EAX + 0x1a8]
0098887a : PUSH ECX
0098887b : PUSH EDX
0098887c : PUSH 0x13
0098887e : PUSH EAX
0098887f : MOV ECX,0xc825f8
00988884 : CALL 0x009adfc0
00988889 : ADD ESP,0x10
0098888c : MOV dword ptr [EBP + -0x4],0xffffffff
00988893 : LEA ECX,[EBP + -0x2c]
00988896 : CALL 0x00406560
0098889b : MOV ESI,dword ptr [EBP + -0x30]
0098889e : CMP dword ptr [ESI + 0x10c],0x0
009888a5 : JLE 0x0098890c
009888a7 : PUSH EBX
009888a8 : PUSH ECX
009888a9 : CALL 0x00838510
009888ae : ADD ESP,0x4
009888b1 : PUSH EAX
009888b2 : CALL 0x0082dc60
009888b7 : JMP 0x0098890c
009888b9 : CMP byte ptr [ESI + 0x32],0x0
009888bd : JZ 0x0098890c
009888bf : MOV ECX,dword ptr [0x00da9894]
009888c5 : MOV byte ptr [ESI + 0x240],0x0
009888cc : MOV EAX,dword ptr [ECX]
009888ce : TEST EAX,EAX
009888d0 : JZ 0x009888e9
009888d2 : MOV EAX,dword ptr [EAX + 0x114]
009888d8 : TEST EAX,EAX
009888da : JZ 0x009888e9
009888dc : MOV EDX,dword ptr [EAX]
009888de : MOV ECX,EAX
009888e0 : MOV EAX,dword ptr [EDX]
009888e2 : PUSH 0xc82630
009888e7 : CALL EAX
009888e9 : MOV ECX,dword ptr [0x00da9894]
009888ef : MOV EAX,dword ptr [ECX]
009888f1 : TEST EAX,EAX
009888f3 : JZ 0x0098890c
009888f5 : MOV EAX,dword ptr [EAX + 0x114]
009888fb : TEST EAX,EAX
009888fd : JZ 0x0098890c
009888ff : MOV EDX,dword ptr [EAX]
00988901 : MOV ECX,EAX
00988903 : MOV EAX,dword ptr [EDX]
00988905 : PUSH 0xc82650
0098890a : CALL EAX
0098890c : MOV ECX,dword ptr [EBP + -0xc]
0098890f : MOV dword ptr FS:[0x0],ECX
00988916 : POP ECX
00988917 : POP EDI
00988918 : POP ESI
00988919 : POP EBX
0098891a : MOV ECX,dword ptr [EBP + -0x10]
0098891d : XOR ECX,EBP
0098891f : CALL 0x00633e6b
00988924 : MOV ESP,EBP
00988926 : POP EBP
00988927 : RET 0x4
