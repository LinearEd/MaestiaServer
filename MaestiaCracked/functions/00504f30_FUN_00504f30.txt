PROGRAM  : Maestia.exe
FUNCTION : FUN_00504f30
ENTRY    : 00504f30
BODY     : [[00504f30, 00504fce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00504f30(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  uint uVar4;
  
  if ((uint)in_ECX[5] < 2) {
    *in_ECX = *in_ECX + 0x10;
    if (*in_ECX == 0) {
      return;
    }
    *(undefined1 *)*in_ECX = 0;
    return;
  }
  iVar3 = *(int *)(in_ECX[4] + -4 + in_ECX[5] * 4);
  piVar1 = in_ECX + 4;
  *(int *)(iVar3 + 0x200) = in_ECX[7];
  in_ECX[7] = iVar3;
  uVar2 = in_ECX[5] - 1;
  if (uVar2 < (uint)in_ECX[5]) {
    uVar4 = uVar2;
    if ((uint)in_ECX[6] >> 1 <= uVar2) goto LAB_00504f83;
  }
  else {
    if (uVar2 < (uint)in_ECX[6]) goto LAB_00504f83;
    uVar4 = (uVar2 >> 2) + uVar2;
  }
  FUN_005b5ef0(piVar1,uVar4);
LAB_00504f83:
  in_ECX[5] = uVar2;
  iVar3 = *(int *)(*piVar1 + -4 + uVar2 * 4);
  in_ECX[1] = iVar3;
  in_ECX[2] = iVar3 + 0x200;
  *in_ECX = iVar3 + 0x1f0;
  if (1 < (uint)in_ECX[5]) {
    in_ECX[3] = *(int *)(*piVar1 + -8 + in_ECX[5] * 4) + 0x1f0;
    return;
  }
  in_ECX[3] = in_ECX[1];
  return;
}



============================================================
DISASSEMBLY
============================================================
00504f30 : PUSH ESI
00504f31 : MOV ESI,ECX
00504f33 : CMP dword ptr [ESI + 0x14],0x1
00504f37 : JBE 0x00504fc3
00504f3d : MOV EAX,dword ptr [ESI + 0x14]
00504f40 : MOV ECX,dword ptr [ESI + 0x10]
00504f43 : MOV EAX,dword ptr [ECX + EAX*0x4 + -0x4]
00504f47 : MOV EDX,dword ptr [ESI + 0x1c]
00504f4a : PUSH EBX
00504f4b : PUSH EDI
00504f4c : LEA EDI,[ESI + 0x10]
00504f4f : MOV dword ptr [EAX + 0x200],EDX
00504f55 : MOV dword ptr [ESI + 0x1c],EAX
00504f58 : MOV EAX,dword ptr [EDI + 0x4]
00504f5b : LEA EBX,[EAX + -0x1]
00504f5e : CMP EBX,EAX
00504f60 : JNC 0x00504f6e
00504f62 : MOV EAX,dword ptr [EDI + 0x8]
00504f65 : SHR EAX,0x1
00504f67 : CMP EBX,EAX
00504f69 : JNC 0x00504f83
00504f6b : PUSH EBX
00504f6c : JMP 0x00504f7b
00504f6e : CMP EBX,dword ptr [EDI + 0x8]
00504f71 : JC 0x00504f83
00504f73 : MOV ECX,EBX
00504f75 : SHR ECX,0x2
00504f78 : ADD ECX,EBX
00504f7a : PUSH ECX
00504f7b : PUSH EDI
00504f7c : MOV ECX,EDI
00504f7e : CALL 0x005b5ef0
00504f83 : MOV dword ptr [EDI + 0x4],EBX
00504f86 : MOV EAX,dword ptr [EDI]
00504f88 : MOV EDX,EBX
00504f8a : MOV EAX,dword ptr [EAX + EDX*0x4 + -0x4]
00504f8e : MOV dword ptr [ESI + 0x4],EAX
00504f91 : ADD EAX,0x200
00504f96 : MOV dword ptr [ESI + 0x8],EAX
00504f99 : ADD EAX,-0x10
00504f9c : MOV dword ptr [ESI],EAX
00504f9e : MOV EAX,dword ptr [ESI + 0x14]
00504fa1 : CMP EAX,0x1
00504fa4 : JBE 0x00504fb9
00504fa6 : MOV ECX,dword ptr [EDI]
00504fa8 : MOV EDX,dword ptr [ECX + EAX*0x4 + -0x8]
00504fac : ADD EDX,0x1f0
00504fb2 : POP EDI
00504fb3 : MOV dword ptr [ESI + 0xc],EDX
00504fb6 : POP EBX
00504fb7 : POP ESI
00504fb8 : RET
00504fb9 : MOV EAX,dword ptr [ESI + 0x4]
00504fbc : POP EDI
00504fbd : POP EBX
00504fbe : MOV dword ptr [ESI + 0xc],EAX
00504fc1 : POP ESI
00504fc2 : RET
00504fc3 : ADD dword ptr [ESI],0x10
00504fc6 : MOV ESI,dword ptr [ESI]
00504fc8 : JZ 0x00504fb7
00504fca : MOV byte ptr [ESI],0x0
00504fcd : POP ESI
00504fce : RET
