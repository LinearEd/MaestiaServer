PROGRAM  : Maestia.exe
FUNCTION : FUN_00797040
ENTRY    : 00797040
BODY     : [[00797040, 007971a3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00797040(float param_1)

{
  float fVar1;
  float fVar2;
  int *piVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int unaff_EDI;
  float10 fVar7;
  
  iVar5 = *(int *)(unaff_EDI + 0x2cc) - *(int *)(unaff_EDI + 0x2c8) >> 2;
  iVar6 = 0;
  if (0 < iVar5) {
    do {
      if ((*(int *)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4) != 0) &&
         (piVar3 = *(int **)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4),
         *(short *)((int)piVar3 + 0x16) == -0x11b8)) {
        piVar3 = (int *)*piVar3;
        if (*(char *)((int)piVar3 + 0x5d) != '\0') {
          (**(code **)(*piVar3 + 0x14))();
        }
        piVar4 = (int *)**(int **)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4);
        if (*(char *)((int)piVar4 + 0x5d) != '\0') {
          (**(code **)(*piVar4 + 0x14))();
        }
        fVar1 = (float)piVar4[0x2e];
        piVar4 = *(int **)(*(int *)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4) + 4);
        fVar2 = (float)piVar3[0x30];
        if (*(char *)((int)piVar4 + 0x5d) != '\0') {
          (**(code **)(*piVar4 + 0x14))();
        }
        piVar3 = *(int **)(*(int *)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4) + 4);
        if (*(char *)((int)piVar3 + 0x5d) != '\0') {
          (**(code **)(*piVar3 + 0x14))();
        }
        fVar7 = (float10)FUN_0040f460((fVar1 - (float)piVar3[0x2e]) * (fVar1 - (float)piVar3[0x2e])
                                      + (fVar2 - (float)piVar4[0x30]) *
                                        (fVar2 - (float)piVar4[0x30]));
        if ((float10)param_1 <= fVar7) {
          *(undefined4 *)(*(int *)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4) + 0x18) = 0x3c23d70a;
        }
        else {
          *(undefined4 *)(*(int *)(*(int *)(unaff_EDI + 0x2c8) + iVar6 * 4) + 0x18) = 0x40000000;
        }
      }
      iVar6 = iVar6 + 1;
    } while (iVar6 < iVar5);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00797040 : PUSH EBP
00797041 : MOV EBP,ESP
00797043 : SUB ESP,0x14
00797046 : MOV ECX,dword ptr [EDI + 0x2cc]
0079704c : SUB ECX,dword ptr [EDI + 0x2c8]
00797052 : PUSH EBX
00797053 : SAR ECX,0x2
00797056 : PUSH ESI
00797057 : XOR ESI,ESI
00797059 : MOV dword ptr [EBP + -0x4],ECX
0079705c : TEST ECX,ECX
0079705e : JLE 0x0079719c
00797064 : MOV EAX,dword ptr [EDI + 0x2c8]
0079706a : CMP dword ptr [EAX + ESI*0x4],0x0
0079706e : LEA EAX,[EAX + ESI*0x4]
00797071 : JZ 0x00797193
00797077 : MOV EAX,dword ptr [EAX]
00797079 : MOV EDX,0xee48
0079707e : CMP word ptr [EAX + 0x16],DX
00797082 : JNZ 0x00797193
00797088 : MOV EAX,dword ptr [EAX]
0079708a : CMP byte ptr [EAX + 0x5d],0x0
0079708e : MOV dword ptr [EBP + -0x8],EAX
00797091 : JZ 0x0079709c
00797093 : MOV EDX,dword ptr [EAX]
00797095 : MOV ECX,EAX
00797097 : MOV EAX,dword ptr [EDX + 0x14]
0079709a : CALL EAX
0079709c : MOV ECX,dword ptr [EDI + 0x2c8]
007970a2 : MOV EDX,dword ptr [ECX + ESI*0x4]
007970a5 : MOV EBX,dword ptr [EDX]
007970a7 : CMP byte ptr [EBX + 0x5d],0x0
007970ab : JZ 0x007970b6
007970ad : MOV EAX,dword ptr [EBX]
007970af : MOV EDX,dword ptr [EAX + 0x14]
007970b2 : MOV ECX,EBX
007970b4 : CALL EDX
007970b6 : MOV ECX,dword ptr [EDI + 0x2c8]
007970bc : MOVSS XMM0,dword ptr [EBX + 0xb8]
007970c4 : MOV EDX,dword ptr [ECX + ESI*0x4]
007970c7 : MOV EAX,dword ptr [EBP + -0x8]
007970ca : MOV EBX,dword ptr [EDX + 0x4]
007970cd : CMP byte ptr [EBX + 0x5d],0x0
007970d1 : MOVSS XMM1,dword ptr [EAX + 0xc0]
007970d9 : MOVSS dword ptr [EBP + -0x10],XMM0
007970de : MOVSS dword ptr [EBP + -0xc],XMM1
007970e3 : JZ 0x007970f8
007970e5 : MOV EAX,dword ptr [EBX]
007970e7 : MOV EDX,dword ptr [EAX + 0x14]
007970ea : MOV ECX,EBX
007970ec : CALL EDX
007970ee : MOVSS XMM1,dword ptr [EBP + -0xc]
007970f3 : MOVSS XMM0,dword ptr [EBP + -0x10]
007970f8 : MOV EAX,dword ptr [EDI + 0x2c8]
007970fe : MOV ECX,dword ptr [EAX + ESI*0x4]
00797101 : MOV ECX,dword ptr [ECX + 0x4]
00797104 : CMP byte ptr [ECX + 0x5d],0x0
00797108 : MOV dword ptr [EBP + -0x8],ECX
0079710b : JZ 0x00797121
0079710d : MOV EDX,dword ptr [ECX]
0079710f : MOV EAX,dword ptr [EDX + 0x14]
00797112 : CALL EAX
00797114 : MOVSS XMM1,dword ptr [EBP + -0xc]
00797119 : MOVSS XMM0,dword ptr [EBP + -0x10]
0079711e : MOV ECX,dword ptr [EBP + -0x8]
00797121 : MOVSS XMM2,dword ptr [ECX + 0xb8]
00797129 : MOVSS XMM3,dword ptr [EBX + 0xc0]
00797131 : SUBSS XMM0,XMM2
00797135 : MOVAPS XMM2,XMM0
00797138 : MULSS XMM2,XMM0
0079713c : SUBSS XMM1,XMM3
00797140 : MOVAPS XMM0,XMM1
00797143 : MULSS XMM0,XMM1
00797147 : PUSH ECX
00797148 : ADDSS XMM2,XMM0
0079714c : MOVSS dword ptr [ESP],XMM2
00797151 : CALL 0x0040f460
00797156 : FLD float ptr [EBP + 0x8]
00797159 : ADD ESP,0x4
0079715c : FCOMIP ST0,ST1
0079715e : FSTP ST0
00797160 : JBE 0x0079717a
00797162 : MOV ECX,dword ptr [EDI + 0x2c8]
00797168 : MOV EDX,dword ptr [ECX + ESI*0x4]
0079716b : MOVSS XMM0,dword ptr [0x00cdf144]
00797173 : MOVSS dword ptr [EDX + 0x18],XMM0
00797178 : JMP 0x00797190
0079717a : MOV EAX,dword ptr [EDI + 0x2c8]
00797180 : MOV ECX,dword ptr [EAX + ESI*0x4]
00797183 : MOVSS XMM0,dword ptr [0x00cdf23c]
0079718b : MOVSS dword ptr [ECX + 0x18],XMM0
00797190 : MOV ECX,dword ptr [EBP + -0x4]
00797193 : INC ESI
00797194 : CMP ESI,ECX
00797196 : JL 0x00797064
0079719c : POP ESI
0079719d : POP EBX
0079719e : MOV ESP,EBP
007971a0 : POP EBP
007971a1 : RET 0x4
