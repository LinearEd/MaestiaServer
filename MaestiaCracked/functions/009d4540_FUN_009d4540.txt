PROGRAM  : Maestia.exe
FUNCTION : FUN_009d4540
ENTRY    : 009d4540
BODY     : [[009d4540, 009d473b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009d4540(undefined4 param_1,undefined4 param_2)

{
  ushort uVar1;
  undefined4 uVar2;
  int *in_ECX;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4e82f;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = (ushort)param_2;
  switch(param_1) {
  case 0xc382:
    if (uVar1 < *(ushort *)((int)in_ECX + 0x3a)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc383:
    if ((*(ushort *)(in_ECX + 0xe) < uVar1) && (1 < uVar1)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc384:
    (**(code **)(*in_ECX + 0x20))();
    if (*(ushort *)((int)in_ECX + 0x3a) < uVar1) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 0;
      FUN_0081d120(local_68);
      local_8._0_1_ = 2;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 3;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else if (uVar1 < *(ushort *)(in_ECX + 0xe)) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 4;
      FUN_0081d120(local_4c);
      local_8._0_1_ = 6;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 7;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,6);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else {
      FUN_009ac1d0();
      (**(code **)(*in_ECX + 0x44))(param_2);
      FUN_009ac1d0();
    }
    break;
  case 0xc386:
    (**(code **)(*in_ECX + 0x20))(local_14);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009d4540 : PUSH EBP
009d4541 : MOV EBP,ESP
009d4543 : PUSH -0x1
009d4545 : PUSH 0xb4e82f
009d454a : MOV EAX,FS:[0x0]
009d4550 : PUSH EAX
009d4551 : SUB ESP,0x90
009d4557 : MOV EAX,[0x00d66fa0]
009d455c : XOR EAX,EBP
009d455e : MOV dword ptr [EBP + -0x10],EAX
009d4561 : PUSH EBX
009d4562 : PUSH ESI
009d4563 : PUSH EDI
009d4564 : PUSH EAX
009d4565 : LEA EAX,[EBP + -0xc]
009d4568 : MOV FS:[0x0],EAX
009d456e : MOV EAX,dword ptr [EBP + 0x8]
009d4571 : ADD EAX,0xffff3c7e
009d4576 : MOV EBX,ECX
009d4578 : CMP EAX,0x4
009d457b : JA 0x009d471e
009d4581 : JMP dword ptr [EAX*0x4 + 0x9d473c]
009d4588 : MOV EAX,dword ptr [EBP + 0xc]
009d458b : CMP AX,word ptr [EBX + 0x3a]
009d458f : JNC 0x009d471e
009d4595 : LEA ESI,[EAX + 0x1]
009d4598 : MOV EDI,EBX
009d459a : CALL 0x009ac1d0
009d459f : JMP 0x009d471e
009d45a4 : MOV EAX,dword ptr [EBP + 0xc]
009d45a7 : CMP AX,word ptr [EBX + 0x38]
009d45ab : JBE 0x009d471e
009d45b1 : CMP AX,0x1
009d45b5 : JBE 0x009d471e
009d45bb : LEA ESI,[EAX + -0x1]
009d45be : MOV EDI,EBX
009d45c0 : CALL 0x009ac1d0
009d45c5 : JMP 0x009d471e
009d45ca : MOV EAX,dword ptr [EBX]
009d45cc : MOV EDX,dword ptr [EAX + 0x20]
009d45cf : CALL EDX
009d45d1 : MOV ESI,dword ptr [EBP + 0xc]
009d45d4 : CMP SI,word ptr [EBX + 0x3a]
009d45d8 : JBE 0x009d4667
009d45de : PUSH 0xc95988
009d45e3 : LEA ECX,[EBP + -0x64]
009d45e6 : CALL 0x00406460
009d45eb : MOV dword ptr [EBP + -0x4],0x0
009d45f2 : MOV ECX,dword ptr [0x0172491c]
009d45f8 : LEA EAX,[EBP + -0x64]
009d45fb : PUSH EAX
009d45fc : LEA EDI,[EBP + -0x2c]
009d45ff : CALL 0x0081d120
009d4604 : MOV byte ptr [EBP + -0x4],0x2
009d4608 : LEA ECX,[EBP + -0x64]
009d460b : CALL 0x00406560
009d4610 : MOV ECX,dword ptr [0x0172491c]
009d4616 : MOV EDX,EDI
009d4618 : PUSH ECX
009d4619 : LEA EDI,[EBP + -0x80]
009d461c : CALL 0x00824120
009d4621 : MOV byte ptr [EBP + -0x4],0x3
009d4625 : PUSH -0x1
009d4627 : PUSH 0x0
009d4629 : PUSH EAX
009d462a : LEA ECX,[EBP + -0x2c]
009d462d : CALL 0x00405eb0
009d4632 : MOV byte ptr [EBP + -0x4],0x2
009d4636 : MOV ECX,EDI
009d4638 : CALL 0x00406560
009d463d : MOV EDX,dword ptr [EBX + 0x4]
009d4640 : MOV ECX,dword ptr [EDX + 0x1a8]
009d4646 : MOV EAX,dword ptr [ECX]
009d4648 : MOV EAX,dword ptr [EAX + 0x44]
009d464b : PUSH 0x3
009d464d : LEA EDX,[EBP + -0x2c]
009d4650 : PUSH EDX
009d4651 : CALL EAX
009d4653 : MOV dword ptr [EBP + -0x4],0xffffffff
009d465a : LEA ECX,[EBP + -0x2c]
009d465d : CALL 0x00406560
009d4662 : JMP 0x009d471e
009d4667 : CMP SI,word ptr [EBX + 0x38]
009d466b : JNC 0x009d46fa
009d4671 : PUSH 0xc959c8
009d4676 : LEA ECX,[EBP + -0x48]
009d4679 : CALL 0x00406460
009d467e : MOV dword ptr [EBP + -0x4],0x4
009d4685 : LEA ECX,[EBP + -0x48]
009d4688 : PUSH ECX
009d4689 : MOV ECX,dword ptr [0x0172491c]
009d468f : LEA EDI,[EBP + -0x2c]
009d4692 : CALL 0x0081d120
009d4697 : MOV byte ptr [EBP + -0x4],0x6
009d469b : LEA ECX,[EBP + -0x48]
009d469e : CALL 0x00406560
009d46a3 : MOV EDX,dword ptr [0x0172491c]
009d46a9 : PUSH EDX
009d46aa : MOV EDX,EDI
009d46ac : LEA EDI,[EBP + 0xffffff64]
009d46b2 : CALL 0x00824120
009d46b7 : MOV byte ptr [EBP + -0x4],0x7
009d46bb : PUSH -0x1
009d46bd : PUSH 0x0
009d46bf : PUSH EAX
009d46c0 : LEA ECX,[EBP + -0x2c]
009d46c3 : CALL 0x00405eb0
009d46c8 : MOV byte ptr [EBP + -0x4],0x6
009d46cc : MOV ECX,EDI
009d46ce : CALL 0x00406560
009d46d3 : MOV EAX,dword ptr [EBX + 0x4]
009d46d6 : MOV ECX,dword ptr [EAX + 0x1a8]
009d46dc : MOV EDX,dword ptr [ECX]
009d46de : MOV EDX,dword ptr [EDX + 0x44]
009d46e1 : PUSH 0x3
009d46e3 : LEA EAX,[EBP + -0x2c]
009d46e6 : PUSH EAX
009d46e7 : CALL EDX
009d46e9 : MOV dword ptr [EBP + -0x4],0xffffffff
009d46f0 : LEA ECX,[EBP + -0x2c]
009d46f3 : CALL 0x00406560
009d46f8 : JMP 0x009d471e
009d46fa : MOV EDI,EBX
009d46fc : CALL 0x009ac1d0
009d4701 : MOV EAX,dword ptr [EBX]
009d4703 : MOV EDX,dword ptr [EAX + 0x44]
009d4706 : PUSH ESI
009d4707 : MOV ECX,EBX
009d4709 : CALL EDX
009d470b : MOV ESI,0x1
009d4710 : CALL 0x009ac1d0
009d4715 : JMP 0x009d471e
009d4717 : MOV EAX,dword ptr [EBX]
009d4719 : MOV EDX,dword ptr [EAX + 0x20]
009d471c : CALL EDX
009d471e : MOV ECX,dword ptr [EBP + -0xc]
009d4721 : MOV dword ptr FS:[0x0],ECX
009d4728 : POP ECX
009d4729 : POP EDI
009d472a : POP ESI
009d472b : POP EBX
009d472c : MOV ECX,dword ptr [EBP + -0x10]
009d472f : XOR ECX,EBP
009d4731 : CALL 0x00633e6b
009d4736 : MOV ESP,EBP
009d4738 : POP EBP
009d4739 : RET 0x8
