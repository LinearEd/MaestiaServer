PROGRAM  : Maestia.exe
FUNCTION : FUN_004c8120
ENTRY    : 004c8120
BODY     : [[004c8120, 004c83cd]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004c8240) */
/* WARNING: Removing unreachable block (ram,0x004c8250) */
/* WARNING: Removing unreachable block (ram,0x004c8259) */
/* WARNING: Removing unreachable block (ram,0x004c825c) */
/* WARNING: Removing unreachable block (ram,0x004c824c) */
/* WARNING: Removing unreachable block (ram,0x004c8269) */
/* WARNING: Removing unreachable block (ram,0x004c8279) */
/* WARNING: Removing unreachable block (ram,0x004c8284) */
/* WARNING: Removing unreachable block (ram,0x004c8280) */
/* WARNING: Removing unreachable block (ram,0x004c8274) */
/* WARNING: Removing unreachable block (ram,0x004c8287) */
/* WARNING: Removing unreachable block (ram,0x004c8297) */
/* WARNING: Removing unreachable block (ram,0x004c829f) */

void FUN_004c8120(int param_1,undefined4 param_2,int *param_3)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  undefined4 uVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  undefined1 local_60 [40];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  int local_1c;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7ad85;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_3 + 0x3d) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_38);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_60,&DAT_00ced890);
  }
  local_18 = param_3;
  FUN_004c9470(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar7 = (int *)*param_3;
  if (*(char *)((int)piVar7 + 0x3d) == '\0') {
    if (*(char *)(param_3[2] + 0x3d) == '\0') {
      piVar7 = (int *)param_3[2];
    }
  }
  else {
    piVar7 = (int *)param_3[2];
  }
  piVar6 = (int *)param_3[1];
  if (*(char *)((int)piVar7 + 0x3d) == '\0') {
    piVar7[1] = (int)piVar6;
  }
  if (*(int **)(*(int *)(param_1 + 4) + 4) == param_3) {
    *(int **)(*(int *)(param_1 + 4) + 4) = piVar7;
  }
  else if ((int *)*piVar6 == param_3) {
    *piVar6 = (int)piVar7;
  }
  else {
    piVar6[2] = (int)piVar7;
  }
  if ((int *)**(undefined4 **)(param_1 + 4) == param_3) {
    piVar5 = piVar6;
    if (*(char *)((int)piVar7 + 0x3d) == '\0') {
      cVar1 = *(char *)(*piVar7 + 0x3d);
      piVar2 = (int *)*piVar7;
      piVar5 = piVar7;
      while (piVar3 = piVar2, cVar1 == '\0') {
        piVar2 = (int *)*piVar3;
        cVar1 = *(char *)((int)piVar2 + 0x3d);
        piVar5 = piVar3;
      }
    }
    **(undefined4 **)(param_1 + 4) = piVar5;
  }
  local_1c = *(int *)(param_1 + 4);
  if (*(int **)(local_1c + 8) == param_3) {
    if (*(char *)((int)piVar7 + 0x3d) == '\0') {
      uVar4 = FUN_00437aa0();
      *(undefined4 *)(local_1c + 8) = uVar4;
    }
    else {
      *(int **)(local_1c + 8) = piVar6;
    }
  }
  if ((char)local_18[0xf] == '\x01') {
    if (piVar7 != *(int **)(*(int *)(param_1 + 4) + 4)) {
      do {
        piVar5 = piVar6;
        if ((char)piVar7[0xf] != '\x01') break;
        piVar6 = (int *)*piVar5;
        if (piVar7 == piVar6) {
          piVar6 = (int *)piVar5[2];
          if ((char)piVar6[0xf] == '\0') {
            *(undefined1 *)(piVar6 + 0xf) = 1;
            *(undefined1 *)(piVar5 + 0xf) = 0;
            FUN_00477700(param_1);
            piVar6 = (int *)piVar5[2];
          }
          if (*(char *)((int)piVar6 + 0x3d) == '\0') {
            if ((*(char *)(*piVar6 + 0x3c) != '\x01') || (*(char *)(piVar6[2] + 0x3c) != '\x01')) {
              if (*(char *)(piVar6[2] + 0x3c) == '\x01') {
                *(undefined1 *)(*piVar6 + 0x3c) = 1;
                *(undefined1 *)(piVar6 + 0xf) = 0;
                FUN_00437560(param_1);
                piVar6 = (int *)piVar5[2];
              }
              *(char *)(piVar6 + 0xf) = (char)piVar5[0xf];
              *(undefined1 *)(piVar5 + 0xf) = 1;
              *(undefined1 *)(piVar6[2] + 0x3c) = 1;
              FUN_00477700(param_1);
              break;
            }
LAB_004c8367:
            *(undefined1 *)(piVar6 + 0xf) = 0;
          }
        }
        else {
          if ((char)piVar6[0xf] == '\0') {
            *(undefined1 *)(piVar6 + 0xf) = 1;
            *(undefined1 *)(piVar5 + 0xf) = 0;
            FUN_00437560(param_1);
            piVar6 = (int *)*piVar5;
          }
          if (*(char *)((int)piVar6 + 0x3d) == '\0') {
            if ((*(char *)(piVar6[2] + 0x3c) == '\x01') && (*(char *)(*piVar6 + 0x3c) == '\x01'))
            goto LAB_004c8367;
            if (*(char *)(*piVar6 + 0x3c) == '\x01') {
              *(undefined1 *)(piVar6[2] + 0x3c) = 1;
              *(undefined1 *)(piVar6 + 0xf) = 0;
              FUN_00477700(param_1);
              piVar6 = (int *)*piVar5;
            }
            *(char *)(piVar6 + 0xf) = (char)piVar5[0xf];
            *(undefined1 *)(piVar5 + 0xf) = 1;
            *(undefined1 *)(*piVar6 + 0x3c) = 1;
            FUN_00437560(param_1);
            break;
          }
        }
        piVar6 = (int *)piVar5[1];
        piVar7 = piVar5;
      } while (piVar5 != *(int **)(*(int *)(param_1 + 4) + 4));
    }
    *(undefined1 *)(piVar7 + 0xf) = 1;
  }
  local_8 = 0xffffffff;
  FUN_0044cb00(local_18 + 3);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
004c8120 : PUSH EBP
004c8121 : MOV EBP,ESP
004c8123 : PUSH -0x1
004c8125 : PUSH 0xb7ad85
004c812a : MOV EAX,FS:[0x0]
004c8130 : PUSH EAX
004c8131 : SUB ESP,0x50
004c8134 : PUSH EBX
004c8135 : PUSH ESI
004c8136 : PUSH EDI
004c8137 : MOV EAX,[0x00d66fa0]
004c813c : XOR EAX,EBP
004c813e : PUSH EAX
004c813f : LEA EAX,[EBP + -0xc]
004c8142 : MOV FS:[0x0],EAX
004c8148 : MOV EAX,dword ptr [EBP + 0x10]
004c814b : CMP byte ptr [EAX + 0x3d],0x0
004c814f : JZ 0x004c818d
004c8151 : PUSH 0x1b
004c8153 : XOR ESI,ESI
004c8155 : PUSH 0xcca4a8
004c815a : LEA ECX,[EBP + -0x34]
004c815d : MOV dword ptr [EBP + -0x1c],0xf
004c8164 : MOV dword ptr [EBP + -0x20],ESI
004c8167 : MOV byte ptr [EBP + -0x30],0x0
004c816b : CALL 0x00404b50
004c8170 : MOV dword ptr [EBP + -0x4],ESI
004c8173 : LEA EAX,[EBP + -0x34]
004c8176 : PUSH EAX
004c8177 : LEA ECX,[EBP + -0x5c]
004c817a : CALL 0x00403c10
004c817f : PUSH 0xced890
004c8184 : LEA ECX,[EBP + -0x5c]
004c8187 : PUSH ECX
004c8188 : CALL 0x006409eb
004c818d : MOV EBX,EAX
004c818f : LEA EDX,[EBP + 0x10]
004c8192 : MOV dword ptr [EBP + -0x14],EBX
004c8195 : CALL 0x004c9470
004c819a : MOV ECX,dword ptr [EBX]
004c819c : CMP byte ptr [ECX + 0x3d],0x0
004c81a0 : JZ 0x004c81a7
004c81a2 : MOV EDI,dword ptr [EBX + 0x8]
004c81a5 : JMP 0x004c81c1
004c81a7 : MOV EDX,dword ptr [EBX + 0x8]
004c81aa : CMP byte ptr [EDX + 0x3d],0x0
004c81ae : JZ 0x004c81b4
004c81b0 : MOV EDI,ECX
004c81b2 : JMP 0x004c81c1
004c81b4 : MOV EAX,dword ptr [EBP + 0x10]
004c81b7 : MOV EDI,dword ptr [EAX + 0x8]
004c81ba : LEA EDX,[EAX + 0x8]
004c81bd : CMP EAX,EBX
004c81bf : JNZ 0x004c8240
004c81c1 : CMP byte ptr [EDI + 0x3d],0x0
004c81c5 : MOV ESI,dword ptr [EBX + 0x4]
004c81c8 : JNZ 0x004c81cd
004c81ca : MOV dword ptr [EDI + 0x4],ESI
004c81cd : MOV EDX,dword ptr [EBP + 0x8]
004c81d0 : MOV EAX,dword ptr [EDX + 0x4]
004c81d3 : CMP dword ptr [EAX + 0x4],EBX
004c81d6 : JNZ 0x004c81dd
004c81d8 : MOV dword ptr [EAX + 0x4],EDI
004c81db : JMP 0x004c81e8
004c81dd : CMP dword ptr [ESI],EBX
004c81df : JNZ 0x004c81e5
004c81e1 : MOV dword ptr [ESI],EDI
004c81e3 : JMP 0x004c81e8
004c81e5 : MOV dword ptr [ESI + 0x8],EDI
004c81e8 : MOV EAX,dword ptr [EDX + 0x4]
004c81eb : CMP dword ptr [EAX],EBX
004c81ed : JNZ 0x004c8212
004c81ef : CMP byte ptr [EDI + 0x3d],0x0
004c81f3 : JZ 0x004c81f9
004c81f5 : MOV ECX,ESI
004c81f7 : JMP 0x004c820d
004c81f9 : MOV EAX,dword ptr [EDI]
004c81fb : CMP byte ptr [EAX + 0x3d],0x0
004c81ff : MOV ECX,EDI
004c8201 : JNZ 0x004c820d
004c8203 : MOV ECX,EAX
004c8205 : MOV EAX,dword ptr [ECX]
004c8207 : CMP byte ptr [EAX + 0x3d],0x0
004c820b : JZ 0x004c8203
004c820d : MOV EAX,dword ptr [EDX + 0x4]
004c8210 : MOV dword ptr [EAX],ECX
004c8212 : MOV ECX,dword ptr [EDX + 0x4]
004c8215 : MOV dword ptr [EBP + -0x18],ECX
004c8218 : CMP dword ptr [ECX + 0x8],EBX
004c821b : JNZ 0x004c82a2
004c8221 : CMP byte ptr [EDI + 0x3d],0x0
004c8225 : JZ 0x004c822e
004c8227 : MOV EAX,ESI
004c8229 : MOV dword ptr [ECX + 0x8],EAX
004c822c : JMP 0x004c82a2
004c822e : MOV EAX,EDI
004c8230 : CALL 0x00437aa0
004c8235 : MOV ECX,dword ptr [EBP + -0x18]
004c8238 : MOV EDX,dword ptr [EBP + 0x8]
004c823b : MOV dword ptr [ECX + 0x8],EAX
004c823e : JMP 0x004c82a2
004c8240 : MOV dword ptr [ECX + 0x4],EAX
004c8243 : MOV ECX,dword ptr [EBX]
004c8245 : MOV dword ptr [EAX],ECX
004c8247 : CMP EAX,dword ptr [EBX + 0x8]
004c824a : JNZ 0x004c8250
004c824c : MOV ESI,EAX
004c824e : JMP 0x004c8269
004c8250 : CMP byte ptr [EDI + 0x3d],0x0
004c8254 : MOV ESI,dword ptr [EAX + 0x4]
004c8257 : JNZ 0x004c825c
004c8259 : MOV dword ptr [EDI + 0x4],ESI
004c825c : MOV dword ptr [ESI],EDI
004c825e : MOV ECX,dword ptr [EBX + 0x8]
004c8261 : MOV dword ptr [EDX],ECX
004c8263 : MOV EDX,dword ptr [EBX + 0x8]
004c8266 : MOV dword ptr [EDX + 0x4],EAX
004c8269 : MOV ECX,dword ptr [EBP + 0x8]
004c826c : MOV ECX,dword ptr [ECX + 0x4]
004c826f : CMP dword ptr [ECX + 0x4],EBX
004c8272 : JNZ 0x004c8279
004c8274 : MOV dword ptr [ECX + 0x4],EAX
004c8277 : JMP 0x004c8287
004c8279 : MOV ECX,dword ptr [EBX + 0x4]
004c827c : CMP dword ptr [ECX],EBX
004c827e : JNZ 0x004c8284
004c8280 : MOV dword ptr [ECX],EAX
004c8282 : JMP 0x004c8287
004c8284 : MOV dword ptr [ECX + 0x8],EAX
004c8287 : MOV EDX,dword ptr [EBX + 0x4]
004c828a : MOV dword ptr [EAX + 0x4],EDX
004c828d : LEA ECX,[EBX + 0x3c]
004c8290 : ADD EAX,0x3c
004c8293 : CMP EAX,ECX
004c8295 : JZ 0x004c829f
004c8297 : MOV BL,byte ptr [ECX]
004c8299 : MOV DL,byte ptr [EAX]
004c829b : MOV byte ptr [EAX],BL
004c829d : MOV byte ptr [ECX],DL
004c829f : MOV EDX,dword ptr [EBP + 0x8]
004c82a2 : MOV EAX,dword ptr [EBP + -0x14]
004c82a5 : MOV BL,0x1
004c82a7 : CMP byte ptr [EAX + 0x3c],BL
004c82aa : JNZ 0x004c83b3
004c82b0 : MOV ECX,dword ptr [EDX + 0x4]
004c82b3 : CMP EDI,dword ptr [ECX + 0x4]
004c82b6 : JZ 0x004c83b0
004c82bc : LEA ESP,[ESP]
004c82c0 : CMP byte ptr [EDI + 0x3c],BL
004c82c3 : JNZ 0x004c83b0
004c82c9 : MOV ECX,dword ptr [ESI]
004c82cb : CMP EDI,ECX
004c82cd : JNZ 0x004c8338
004c82cf : MOV ECX,dword ptr [ESI + 0x8]
004c82d2 : CMP byte ptr [ECX + 0x3c],0x0
004c82d6 : JNZ 0x004c82ed
004c82d8 : MOV byte ptr [ECX + 0x3c],BL
004c82db : PUSH EDX
004c82dc : MOV ECX,ESI
004c82de : MOV byte ptr [ESI + 0x3c],0x0
004c82e2 : CALL 0x00477700
004c82e7 : MOV ECX,dword ptr [ESI + 0x8]
004c82ea : MOV EDX,dword ptr [EBP + 0x8]
004c82ed : CMP byte ptr [ECX + 0x3d],0x0
004c82f1 : JNZ 0x004c836b
004c82f3 : MOV EAX,dword ptr [ECX]
004c82f5 : CMP byte ptr [EAX + 0x3c],BL
004c82f8 : JNZ 0x004c8302
004c82fa : MOV EAX,dword ptr [ECX + 0x8]
004c82fd : CMP byte ptr [EAX + 0x3c],BL
004c8300 : JZ 0x004c8367
004c8302 : MOV EAX,dword ptr [ECX + 0x8]
004c8305 : CMP byte ptr [EAX + 0x3c],BL
004c8308 : JNZ 0x004c831f
004c830a : MOV EAX,dword ptr [ECX]
004c830c : MOV byte ptr [EAX + 0x3c],BL
004c830f : PUSH EDX
004c8310 : MOV byte ptr [ECX + 0x3c],0x0
004c8314 : CALL 0x00437560
004c8319 : MOV ECX,dword ptr [ESI + 0x8]
004c831c : MOV EDX,dword ptr [EBP + 0x8]
004c831f : MOV AL,byte ptr [ESI + 0x3c]
004c8322 : MOV byte ptr [ECX + 0x3c],AL
004c8325 : MOV byte ptr [ESI + 0x3c],BL
004c8328 : MOV ECX,dword ptr [ECX + 0x8]
004c832b : MOV byte ptr [ECX + 0x3c],BL
004c832e : PUSH EDX
004c832f : MOV ECX,ESI
004c8331 : CALL 0x00477700
004c8336 : JMP 0x004c83b0
004c8338 : CMP byte ptr [ECX + 0x3c],0x0
004c833c : JNZ 0x004c8352
004c833e : MOV byte ptr [ECX + 0x3c],BL
004c8341 : PUSH EDX
004c8342 : MOV ECX,ESI
004c8344 : MOV byte ptr [ESI + 0x3c],0x0
004c8348 : CALL 0x00437560
004c834d : MOV ECX,dword ptr [ESI]
004c834f : MOV EDX,dword ptr [EBP + 0x8]
004c8352 : CMP byte ptr [ECX + 0x3d],0x0
004c8356 : JNZ 0x004c836b
004c8358 : MOV EAX,dword ptr [ECX + 0x8]
004c835b : CMP byte ptr [EAX + 0x3c],BL
004c835e : JNZ 0x004c837e
004c8360 : MOV EAX,dword ptr [ECX]
004c8362 : CMP byte ptr [EAX + 0x3c],BL
004c8365 : JNZ 0x004c837e
004c8367 : MOV byte ptr [ECX + 0x3c],0x0
004c836b : MOV ECX,dword ptr [EDX + 0x4]
004c836e : MOV EDI,ESI
004c8370 : MOV ESI,dword ptr [ESI + 0x4]
004c8373 : CMP EDI,dword ptr [ECX + 0x4]
004c8376 : JNZ 0x004c82c0
004c837c : JMP 0x004c83b0
004c837e : MOV EAX,dword ptr [ECX]
004c8380 : CMP byte ptr [EAX + 0x3c],BL
004c8383 : JNZ 0x004c839a
004c8385 : MOV EAX,dword ptr [ECX + 0x8]
004c8388 : MOV byte ptr [EAX + 0x3c],BL
004c838b : PUSH EDX
004c838c : MOV byte ptr [ECX + 0x3c],0x0
004c8390 : CALL 0x00477700
004c8395 : MOV ECX,dword ptr [ESI]
004c8397 : MOV EDX,dword ptr [EBP + 0x8]
004c839a : MOV AL,byte ptr [ESI + 0x3c]
004c839d : MOV byte ptr [ECX + 0x3c],AL
004c83a0 : MOV byte ptr [ESI + 0x3c],BL
004c83a3 : MOV ECX,dword ptr [ECX]
004c83a5 : MOV byte ptr [ECX + 0x3c],BL
004c83a8 : PUSH EDX
004c83a9 : MOV ECX,ESI
004c83ab : CALL 0x00437560
004c83b0 : MOV byte ptr [EDI + 0x3c],BL
004c83b3 : MOV dword ptr [EBP + -0x4],0xffffffff
004c83ba : MOV EDX,dword ptr [EBP + -0x14]
004c83bd : ADD EDX,0xc
004c83c0 : PUSH EDX
004c83c1 : CALL 0x0044cb00
004c83c6 : MOV ECX,dword ptr [EBP + -0x14]
004c83c9 : CALL 0x006f04e0
