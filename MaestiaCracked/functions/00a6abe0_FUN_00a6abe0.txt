PROGRAM  : Maestia.exe
FUNCTION : FUN_00a6abe0
ENTRY    : 00a6abe0
BODY     : [[00a6abe0, 00a6ad48]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a6abe0(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *in_ECX;
  float10 fVar4;
  float fVar5;
  float fVar6;
  
  if (*(char *)((int)in_ECX + 0x15ae) != '\0') {
    iVar3 = in_ECX[0xfa];
    iVar1 = *(int *)(iVar3 + 0x6c);
    iVar2 = *(int *)(iVar3 + 0x70);
    in_ECX[0x560] = *(int *)(iVar3 + 0x68);
    in_ECX[0x561] = iVar1;
    in_ECX[0x562] = iVar2;
    FUN_008840b0();
    return;
  }
  iVar1 = in_ECX[0xfa];
  fVar6 = (float)in_ECX[0x808] - *(float *)(iVar1 + 0x70);
  fVar5 = (float)in_ECX[0x806] - *(float *)(iVar1 + 0x68);
  fVar4 = (float10)FUN_0040f460(fVar6 * fVar6 + fVar5 * fVar5);
  in_ECX[0x7a7] = (int)(float)fVar4;
  if ((fVar4 < (float10)0.0001) && (in_ECX[0x16e] == 0)) {
    (**(code **)(*in_ECX + 0x2a0))(in_ECX + 0x806,1);
    *(undefined1 *)((int)in_ECX + 0x7bd) = 1;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,0,1,0);
    return;
  }
  if (((float)in_ECX[0x806] != *(float *)(iVar1 + 0x68)) ||
     (((float)in_ECX[0x807] != *(float *)(iVar1 + 0x6c) ||
      ((float)in_ECX[0x808] != *(float *)(iVar1 + 0x70))))) {
    in_ECX[0x11d] = (int)fVar5;
    in_ECX[0x11e] = (int)fVar6;
  }
  D3DXVec2Normalize(in_ECX + 0x11d,in_ECX + 0x11d);
  FUN_008512c0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00a6abe0 : PUSH EBP
00a6abe1 : MOV EBP,ESP
00a6abe3 : AND ESP,0xfffffff8
00a6abe6 : SUB ESP,0xc
00a6abe9 : PUSH EBX
00a6abea : PUSH ESI
00a6abeb : MOV ESI,ECX
00a6abed : CMP byte ptr [ESI + 0x15ae],0x0
00a6abf4 : PUSH EDI
00a6abf5 : JZ 0x00a6ac33
00a6abf7 : MOV EAX,dword ptr [ESI + 0x3e8]
00a6abfd : MOVSS XMM0,dword ptr [EAX + 0x68]
00a6ac02 : MOVSS XMM1,dword ptr [EAX + 0x6c]
00a6ac07 : MOVSS XMM2,dword ptr [EAX + 0x70]
00a6ac0c : ADD EAX,0x68
00a6ac0f : MOVSS dword ptr [ESI + 0x1580],XMM0
00a6ac17 : MOVSS dword ptr [ESI + 0x1584],XMM1
00a6ac1f : MOVSS dword ptr [ESI + 0x1588],XMM2
00a6ac27 : CALL 0x008840b0
00a6ac2c : POP EDI
00a6ac2d : POP ESI
00a6ac2e : POP EBX
00a6ac2f : MOV ESP,EBP
00a6ac31 : POP EBP
00a6ac32 : RET
00a6ac33 : MOV EBX,dword ptr [ESI + 0x3e8]
00a6ac39 : MOVSS XMM1,dword ptr [ESI + 0x2020]
00a6ac41 : SUBSS XMM1,dword ptr [EBX + 0x70]
00a6ac46 : MOVSS XMM0,dword ptr [ESI + 0x2018]
00a6ac4e : SUBSS XMM0,dword ptr [EBX + 0x68]
00a6ac53 : LEA EDI,[ESI + 0x2018]
00a6ac59 : MOVAPS XMM2,XMM1
00a6ac5c : MULSS XMM2,XMM1
00a6ac60 : MOVSS dword ptr [ESP + 0x14],XMM1
00a6ac66 : MOVAPS XMM1,XMM0
00a6ac69 : MULSS XMM1,XMM0
00a6ac6d : PUSH ECX
00a6ac6e : ADDSS XMM2,XMM1
00a6ac72 : MOVSS dword ptr [ESP + 0x10],XMM0
00a6ac78 : MOVSS dword ptr [ESP],XMM2
00a6ac7d : CALL 0x0040f460
00a6ac82 : FST float ptr [ESI + 0x1e9c]
00a6ac88 : FLD float ptr [0x00cdf398]
00a6ac8e : ADD ESP,0x4
00a6ac91 : FCOMIP ST0,ST1
00a6ac93 : FSTP ST0
00a6ac95 : JBE 0x00a6ace6
00a6ac97 : CMP dword ptr [ESI + 0x5b8],0x0
00a6ac9e : JNZ 0x00a6ace6
00a6aca0 : MOV EAX,dword ptr [ESI]
00a6aca2 : MOV EDX,dword ptr [EAX + 0x2a0]
00a6aca8 : PUSH 0x1
00a6acaa : PUSH EDI
00a6acab : MOV ECX,ESI
00a6acad : CALL EDX
00a6acaf : MOV EAX,dword ptr [ESI + 0x138]
00a6acb5 : MOV byte ptr [ESI + 0x7bd],0x1
00a6acbc : MOV ECX,dword ptr [EAX + 0x4]
00a6acbf : MOV EDX,dword ptr [ECX + ESI*0x1 + 0x138]
00a6acc6 : MOV EAX,dword ptr [EDX + 0x10]
00a6acc9 : PUSH 0x0
00a6accb : LEA ECX,[ECX + ESI*0x1 + 0x138]
00a6acd2 : PUSH 0x1
00a6acd4 : PUSH 0x0
00a6acd6 : ADD ESI,0x6d8
00a6acdc : PUSH ESI
00a6acdd : CALL EAX
00a6acdf : POP EDI
00a6ace0 : POP ESI
00a6ace1 : POP EBX
00a6ace2 : MOV ESP,EBP
00a6ace4 : POP EBP
00a6ace5 : RET
00a6ace6 : MOVSS XMM0,dword ptr [EDI]
00a6acea : UCOMISS XMM0,dword ptr [EBX + 0x68]
00a6acee : LAHF
00a6acef : TEST AH,0x44
00a6acf2 : JP 0x00a6ad12
00a6acf4 : MOVSS XMM0,dword ptr [EDI + 0x4]
00a6acf9 : UCOMISS XMM0,dword ptr [EBX + 0x6c]
00a6acfd : LAHF
00a6acfe : TEST AH,0x44
00a6ad01 : JP 0x00a6ad12
00a6ad03 : MOVSS XMM0,dword ptr [EDI + 0x8]
00a6ad08 : UCOMISS XMM0,dword ptr [EBX + 0x70]
00a6ad0c : LAHF
00a6ad0d : TEST AH,0x44
00a6ad10 : JNP 0x00a6ad2e
00a6ad12 : MOVSS XMM0,dword ptr [ESP + 0xc]
00a6ad18 : MOVSS dword ptr [ESI + 0x474],XMM0
00a6ad20 : MOVSS XMM0,dword ptr [ESP + 0x14]
00a6ad26 : MOVSS dword ptr [ESI + 0x478],XMM0
00a6ad2e : LEA EAX,[ESI + 0x474]
00a6ad34 : PUSH EAX
00a6ad35 : PUSH EAX
00a6ad36 : CALL 0x004ff71c
00a6ad3b : MOV ECX,ESI
00a6ad3d : CALL 0x008512c0
00a6ad42 : POP EDI
00a6ad43 : POP ESI
00a6ad44 : POP EBX
00a6ad45 : MOV ESP,EBP
00a6ad47 : POP EBP
00a6ad48 : RET
