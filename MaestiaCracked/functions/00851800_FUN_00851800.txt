PROGRAM  : Maestia.exe
FUNCTION : FUN_00851800
ENTRY    : 00851800
BODY     : [[00851800, 008519e0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00851800(void)

{
  float fVar1;
  char cVar2;
  undefined1 uVar3;
  int *in_EAX;
  int iVar4;
  DWORD DVar5;
  undefined1 local_40 [4];
  float local_3c;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  float local_18;
  undefined4 local_14;
  float local_10;
  float local_c;
  undefined1 local_5;
  
  if ((char)in_EAX[0x67c] == '\0') {
    return;
  }
  cVar2 = FUN_00889650();
  if (cVar2 != '\0') {
    iVar4 = in_EAX[0xfa];
    local_34 = 0;
    local_2c = 0;
    local_28 = 0;
    local_24 = 0;
    local_20 = 0;
    local_c = 0.0;
    local_30 = 0xbf800000;
    local_1c = *(undefined4 *)(iVar4 + 0x68);
    local_14 = *(undefined4 *)(iVar4 + 0x70);
    local_3c = 0.0;
    local_18 = *(float *)(iVar4 + 0x6c) + DAT_00d72c20;
    iVar4 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_34,local_40,&local_28,&local_c);
    FUN_007e3cb0(local_1c,local_14,&local_10,&local_5,&local_28);
    if ((iVar4 != 0) && (local_10 < local_3c)) {
      local_10 = local_3c;
    }
    local_18 = local_10;
    (**(code **)(*in_EAX + 0x2a0))(&local_1c,1);
  }
  DVar5 = timeGetTime();
  local_10 = (float)(DVar5 - in_EAX[0x67d]);
  fVar1 = (float)(int)local_10;
  if ((int)local_10 < 0) {
    fVar1 = fVar1 + 4.2949673e+09;
  }
  fVar1 = fVar1 * 0.001;
  if ((in_EAX[0x62a] == 0) || (*(char *)(in_EAX[0x62a] + 0x20) == '\0')) {
    local_c = ((float)in_EAX[0x680] * fVar1 - (float)in_EAX[0x681] * fVar1 * fVar1 * DAT_00d72c24) *
              (float)in_EAX[0x682];
    if (fVar1 < (float)in_EAX[0x683]) {
      uVar3 = 1;
      goto LAB_008519ca;
    }
  }
  else {
    local_c = ((float)in_EAX[0x685] * fVar1 - (float)in_EAX[0x686] * fVar1 * fVar1 * DAT_00d72c24) *
              (float)in_EAX[0x687];
    if (fVar1 < (float)in_EAX[0x688]) {
      uVar3 = 1;
      goto LAB_008519ca;
    }
  }
  uVar3 = 0;
LAB_008519ca:
  *(undefined1 *)(in_EAX + 0x67e) = uVar3;
  FUN_008502a0(local_c);
  return;
}



============================================================
DISASSEMBLY
============================================================
00851800 : PUSH EBP
00851801 : MOV EBP,ESP
00851803 : SUB ESP,0x3c
00851806 : PUSH ESI
00851807 : MOV ESI,EAX
00851809 : CMP byte ptr [ESI + 0x19f0],0x0
00851810 : JZ 0x008519dc
00851816 : CALL 0x00889650
0085181b : TEST AL,AL
0085181d : JZ 0x008518fd
00851823 : XORPS XMM0,XMM0
00851826 : MOV EAX,dword ptr [ESI + 0x3e8]
0085182c : MOVSS XMM1,dword ptr [0x00cdf0d0]
00851834 : PUSH EBX
00851835 : PUSH EDI
00851836 : ADD EAX,0x68
00851839 : LEA ECX,[EBP + -0x8]
0085183c : PUSH ECX
0085183d : MOVSS dword ptr [EBP + -0x30],XMM0
00851842 : MOVSS dword ptr [EBP + -0x28],XMM0
00851847 : MOVSS dword ptr [EBP + -0x24],XMM0
0085184c : MOVSS dword ptr [EBP + -0x20],XMM0
00851851 : MOVSS dword ptr [EBP + -0x1c],XMM0
00851856 : MOVSS dword ptr [EBP + -0x8],XMM0
0085185b : MOVSS dword ptr [EBP + -0x2c],XMM1
00851860 : FLD float ptr [EAX]
00851862 : MOVSS XMM1,dword ptr [EAX + 0x8]
00851867 : LEA EDX,[EBP + -0x24]
0085186a : PUSH EDX
0085186b : MOVSS dword ptr [EBP + -0x38],XMM0
00851870 : MOVSS XMM0,dword ptr [EAX + 0x4]
00851875 : FSTP float ptr [EBP + -0x18]
00851878 : MOV EAX,[0x00da93ec]
0085187d : MOV EAX,dword ptr [EAX + 0xc]
00851880 : ADDSS XMM0,dword ptr [0x00d72c20]
00851888 : LEA ECX,[EBP + -0x3c]
0085188b : PUSH ECX
0085188c : LEA EDX,[EBP + -0x30]
0085188f : PUSH EDX
00851890 : PUSH EAX
00851891 : LEA EDI,[EBP + -0x18]
00851894 : MOVSS dword ptr [EBP + -0x10],XMM1
00851899 : MOVSS dword ptr [EBP + -0x14],XMM0
0085189e : CALL 0x007e9d70
008518a3 : FLD float ptr [EBP + -0x10]
008518a6 : MOV EBX,EAX
008518a8 : LEA EAX,[EBP + -0x24]
008518ab : PUSH EAX
008518ac : MOV EAX,[0x00da93ec]
008518b1 : MOV EDI,dword ptr [EAX + 0xc]
008518b4 : LEA ECX,[EBP + -0x1]
008518b7 : PUSH ECX
008518b8 : LEA EDX,[EBP + -0xc]
008518bb : PUSH EDX
008518bc : SUB ESP,0x8
008518bf : FSTP float ptr [ESP + 0x4]
008518c3 : FLD float ptr [EBP + -0x18]
008518c6 : FSTP float ptr [ESP]
008518c9 : CALL 0x007e3cb0
008518ce : MOVSS XMM0,dword ptr [EBP + -0xc]
008518d3 : POP EDI
008518d4 : TEST EBX,EBX
008518d6 : POP EBX
008518d7 : JZ 0x008518e6
008518d9 : MOVSS XMM1,dword ptr [EBP + -0x38]
008518de : COMISS XMM1,XMM0
008518e1 : JBE 0x008518e6
008518e3 : MOVAPS XMM0,XMM1
008518e6 : MOV EDX,dword ptr [ESI]
008518e8 : MOV EDX,dword ptr [EDX + 0x2a0]
008518ee : PUSH 0x1
008518f0 : LEA EAX,[EBP + -0x18]
008518f3 : PUSH EAX
008518f4 : MOV ECX,ESI
008518f6 : MOVSS dword ptr [EBP + -0x14],XMM0
008518fb : CALL EDX
008518fd : CALL dword ptr [0x00b85598]
00851903 : SUB EAX,dword ptr [ESI + 0x19f4]
00851909 : MOV dword ptr [EBP + -0xc],EAX
0085190c : FILD dword ptr [EBP + -0xc]
0085190f : TEST EAX,EAX
00851911 : JGE 0x00851919
00851913 : FADD float ptr [0x00cdf0e0]
00851919 : FMUL float ptr [0x00cdf128]
0085191f : MOV EAX,dword ptr [ESI + 0x18a8]
00851925 : FSTP float ptr [EBP + -0x8]
00851928 : TEST EAX,EAX
0085192a : JZ 0x0085197d
0085192c : CMP byte ptr [EAX + 0x20],0x0
00851930 : JZ 0x0085197d
00851932 : MOVSS XMM0,dword ptr [EBP + -0x8]
00851937 : MOVSS XMM2,dword ptr [ESI + 0x1a18]
0085193f : MOVSS XMM1,dword ptr [ESI + 0x1a14]
00851947 : MULSS XMM2,XMM0
0085194b : MULSS XMM1,XMM0
0085194f : MULSS XMM2,XMM0
00851953 : MULSS XMM2,dword ptr [0x00d72c24]
0085195b : SUBSS XMM1,XMM2
0085195f : MULSS XMM1,dword ptr [ESI + 0x1a1c]
00851967 : MOVSS dword ptr [EBP + -0x8],XMM1
0085196c : MOVSS XMM1,dword ptr [ESI + 0x1a20]
00851974 : COMISS XMM1,XMM0
00851977 : JBE 0x008519c8
00851979 : MOV AL,0x1
0085197b : JMP 0x008519ca
0085197d : MOVSS XMM0,dword ptr [EBP + -0x8]
00851982 : MOVSS XMM2,dword ptr [ESI + 0x1a04]
0085198a : MOVSS XMM1,dword ptr [ESI + 0x1a00]
00851992 : MULSS XMM2,XMM0
00851996 : MULSS XMM1,XMM0
0085199a : MULSS XMM2,XMM0
0085199e : MULSS XMM2,dword ptr [0x00d72c24]
008519a6 : SUBSS XMM1,XMM2
008519aa : MULSS XMM1,dword ptr [ESI + 0x1a08]
008519b2 : MOVSS dword ptr [EBP + -0x8],XMM1
008519b7 : MOVSS XMM1,dword ptr [ESI + 0x1a0c]
008519bf : COMISS XMM1,XMM0
008519c2 : JBE 0x008519c8
008519c4 : MOV AL,0x1
008519c6 : JMP 0x008519ca
008519c8 : XOR AL,AL
008519ca : FLD float ptr [EBP + -0x8]
008519cd : PUSH ECX
008519ce : FSTP float ptr [ESP]
008519d1 : MOV byte ptr [ESI + 0x19f8],AL
008519d7 : CALL 0x008502a0
008519dc : POP ESI
008519dd : MOV ESP,EBP
008519df : POP EBP
008519e0 : RET
