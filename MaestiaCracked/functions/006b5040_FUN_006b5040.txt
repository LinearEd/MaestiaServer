PROGRAM  : Maestia.exe
FUNCTION : FUN_006b5040
ENTRY    : 006b5040
BODY     : [[006b5040, 006b5103]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b5040(int *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined4 *puVar5;
  int unaff_EDI;
  
  uVar1 = param_1[1];
  uVar4 = *(int *)(unaff_EDI + 0x1a4) + 1;
  if (uVar1 < uVar4) {
    uVar2 = *(uint *)(unaff_EDI + 0x194);
    uVar3 = uVar1 * 0x10 + uVar2;
    if ((uVar4 != *(uint *)(unaff_EDI + 0x18c)) || (*(uint *)(uVar3 + 8) != uVar1)) {
      uVar4 = *(uint *)(unaff_EDI + 0x18c) * 0x10 + uVar2;
      for (uVar3 = uVar2; (uVar3 < uVar4 && (*(uint *)(uVar3 + 8) != uVar1)); uVar3 = uVar3 + 0x10)
      {
      }
      if (uVar3 == uVar4) goto LAB_006b5096;
    }
    if (*(char *)(uVar3 + 0xc) != '\0') {
      if (*(int *)(unaff_EDI + 0x1b0) <= *(int *)(unaff_EDI + 0x1ac)) {
        *(undefined4 *)(unaff_EDI + 0xc) = 0x82;
        return;
      }
      if (0 < *param_1) {
        puVar5 = (undefined4 *)(*(int *)(unaff_EDI + 0x1ac) * 0x10 + *(int *)(unaff_EDI + 0x1b4));
        *puVar5 = *(undefined4 *)(unaff_EDI + 0x160);
        puVar5[1] = *(int *)(unaff_EDI + 0x168) + 1;
        puVar5[2] = *param_1;
        puVar5[3] = *(undefined4 *)(uVar3 + 4);
        *(int *)(unaff_EDI + 0x1ac) = *(int *)(unaff_EDI + 0x1ac) + 1;
        FUN_006b4210();
        *(undefined1 *)(unaff_EDI + 0x178) = 0;
      }
      return;
    }
  }
LAB_006b5096:
  *(undefined4 *)(unaff_EDI + 0xc) = 0x86;
  return;
}



============================================================
DISASSEMBLY
============================================================
006b5040 : MOV EAX,dword ptr [EDI + 0x1a4]
006b5046 : PUSH EBX
006b5047 : PUSH EBP
006b5048 : MOV EBP,dword ptr [ESP + 0xc]
006b504c : MOV EDX,dword ptr [EBP + 0x4]
006b504f : PUSH ESI
006b5050 : LEA ESI,[EAX + 0x1]
006b5053 : CMP EDX,ESI
006b5055 : JNC 0x006b5096
006b5057 : MOV EBX,dword ptr [EDI + 0x194]
006b505d : MOV ECX,dword ptr [EDI + 0x18c]
006b5063 : MOV EAX,EDX
006b5065 : SHL EAX,0x4
006b5068 : ADD EAX,EBX
006b506a : CMP ESI,ECX
006b506c : JNZ 0x006b5073
006b506e : CMP dword ptr [EAX + 0x8],EDX
006b5071 : JZ 0x006b5090
006b5073 : MOV EAX,EBX
006b5075 : SHL ECX,0x4
006b5078 : ADD ECX,EAX
006b507a : CMP EAX,ECX
006b507c : JNC 0x006b508e
006b507e : MOV EDI,EDI
006b5080 : CMP dword ptr [EAX + 0x8],EDX
006b5083 : JZ 0x006b508c
006b5085 : ADD EAX,0x10
006b5088 : CMP EAX,ECX
006b508a : JC 0x006b5080
006b508c : CMP EAX,ECX
006b508e : JZ 0x006b5096
006b5090 : CMP byte ptr [EAX + 0xc],0x0
006b5094 : JNZ 0x006b50a1
006b5096 : POP ESI
006b5097 : POP EBP
006b5098 : MOV dword ptr [EDI + 0xc],0x86
006b509f : POP EBX
006b50a0 : RET
006b50a1 : MOV ECX,dword ptr [EDI + 0x1ac]
006b50a7 : CMP ECX,dword ptr [EDI + 0x1b0]
006b50ad : JL 0x006b50ba
006b50af : POP ESI
006b50b0 : POP EBP
006b50b1 : MOV dword ptr [EDI + 0xc],0x82
006b50b8 : POP EBX
006b50b9 : RET
006b50ba : CMP dword ptr [EBP],0x0
006b50be : JLE 0x006b5100
006b50c0 : MOV EDX,dword ptr [EDI + 0x160]
006b50c6 : SHL ECX,0x4
006b50c9 : ADD ECX,dword ptr [EDI + 0x1b4]
006b50cf : MOV dword ptr [ECX],EDX
006b50d1 : MOV EDX,dword ptr [EDI + 0x168]
006b50d7 : INC EDX
006b50d8 : MOV dword ptr [ECX + 0x4],EDX
006b50db : MOV EDX,dword ptr [EBP]
006b50de : MOV dword ptr [ECX + 0x8],EDX
006b50e1 : MOV EDX,dword ptr [EAX + 0x4]
006b50e4 : MOV dword ptr [ECX + 0xc],EDX
006b50e7 : INC dword ptr [EDI + 0x1ac]
006b50ed : MOV ESI,dword ptr [EAX + 0x4]
006b50f0 : MOV ECX,dword ptr [EAX]
006b50f2 : MOV EAX,EDI
006b50f4 : CALL 0x006b4210
006b50f9 : MOV byte ptr [EDI + 0x178],0x0
006b5100 : POP ESI
006b5101 : POP EBP
006b5102 : POP EBX
006b5103 : RET
