PROGRAM  : Maestia.exe
FUNCTION : FUN_009c0fe0
ENTRY    : 009c0fe0
BODY     : [[009c0fe0, 009c11fb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c0fe0(int param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  undefined4 uVar4;
  int in_ECX;
  undefined4 ****ppppuVar5;
  int in_EDX;
  uint local_38;
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b21cf8;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(int *)(param_1 + 0x68) = in_ECX;
  if (30000 < in_EDX) {
    in_EDX = 0;
  }
  *(int *)(param_1 + 0x7c) = in_EDX;
  uVar3 = *(int *)(param_1 + 0x94) + in_ECX;
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  uVar3 = ((int)uVar3 < 1) - 1 & uVar3;
  local_14 = uVar2;
  FUN_00406360(&DAT_00c90bb0,0);
  local_8 = 0;
  if (*(int *)(param_1 + 0x94) == 0) {
    if (0 < in_EDX) {
      uVar4 = FUN_00404750(L"%d<font face=\'$NormalFont\' color=\'#E5C173\'>(+%d)</font>",uVar3,
                           in_EDX);
      local_8._0_1_ = 4;
      FUN_00405eb0(uVar4,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_009c1177;
    }
    if (in_EDX < 0) {
      uVar4 = FUN_00404750(L"%d<font face=\'$NormalFont\' color=\'#FF0000\'>(%d)</font>",uVar3,
                           in_EDX);
      local_8._0_1_ = 5;
    }
    else {
      uVar4 = FUN_00404750(&DAT_00c90ea8,uVar3,uVar2);
      local_8._0_1_ = 6;
    }
  }
  else {
    if (0 < in_EDX) {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font><font face=\'$NormalFont\' color=\'#E5C173\'> (+%d)</font>"
                           ,uVar3,in_EDX);
      local_8._0_1_ = 1;
      FUN_00405eb0(uVar4,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_009c1177;
    }
    if (in_EDX < 0) {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font><font face=\'$NormalFont\' color=\'#FF0000\'> (%d)</font>"
                           ,uVar3,in_EDX);
      local_8._0_1_ = 2;
    }
    else {
      uVar4 = FUN_00404750(L"<font face=\'$NormalFont\' color=\'#33FF00\'>%d</font>",uVar3,uVar2);
      local_8._0_1_ = 3;
    }
  }
  FUN_00405eb0(uVar4,0,0xffffffff);
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_00406560();
LAB_009c1177:
  iVar1 = *DAT_00da9894;
  if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
    ppppuVar5 = (undefined4 ****)local_2c[0];
    if (local_18 < 8) {
      ppppuVar5 = local_2c;
    }
    (**(code **)(**(int **)(iVar1 + 0x114) + 4))
              (*(int **)(iVar1 + 0x114),param_1 + 8,"%s,%ls","SetCharWisdomPlus",ppppuVar5);
  }
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009c0fe0 : PUSH EBP
009c0fe1 : MOV EBP,ESP
009c0fe3 : PUSH -0x1
009c0fe5 : PUSH 0xb21cf8
009c0fea : MOV EAX,FS:[0x0]
009c0ff0 : PUSH EAX
009c0ff1 : SUB ESP,0x40
009c0ff4 : MOV EAX,[0x00d66fa0]
009c0ff9 : XOR EAX,EBP
009c0ffb : MOV dword ptr [EBP + -0x10],EAX
009c0ffe : PUSH EBX
009c0fff : PUSH ESI
009c1000 : PUSH EDI
009c1001 : PUSH EAX
009c1002 : LEA EAX,[EBP + -0xc]
009c1005 : MOV FS:[0x0],EAX
009c100b : MOV ESI,EDX
009c100d : MOV EAX,dword ptr [EBP + 0x8]
009c1010 : XOR EBX,EBX
009c1012 : MOV dword ptr [EAX + 0x68],ECX
009c1015 : CMP ESI,0x7530
009c101b : CMOVG ESI,EBX
009c101e : MOV dword ptr [EBP + -0x30],EAX
009c1021 : MOV dword ptr [EAX + 0x7c],ESI
009c1024 : MOV EAX,dword ptr [EAX + 0x94]
009c102a : ADD EAX,ECX
009c102c : XOR ECX,ECX
009c102e : CMP EAX,EBX
009c1030 : SETLE CL
009c1033 : PUSH EBX
009c1034 : XOR EDX,EDX
009c1036 : PUSH 0xc90bb0
009c103b : MOV dword ptr [EBP + -0x14],0x7
009c1042 : MOV dword ptr [EBP + -0x18],EBX
009c1045 : MOV word ptr [EBP + -0x28],DX
009c1049 : DEC ECX
009c104a : AND ECX,EAX
009c104c : MOV EDI,ECX
009c104e : LEA ECX,[EBP + -0x2c]
009c1051 : CALL 0x00406360
009c1056 : MOV dword ptr [EBP + -0x4],EBX
009c1059 : MOV EAX,dword ptr [EBP + -0x30]
009c105c : CMP dword ptr [EAX + 0x94],EBX
009c1062 : JZ 0x009c10e8
009c1068 : CMP ESI,EBX
009c106a : JLE 0x009c10b4
009c106c : PUSH ESI
009c106d : PUSH EDI
009c106e : PUSH 0xc90bb8
009c1073 : LEA ESI,[EBP + -0x4c]
009c1076 : CALL 0x00404750
009c107b : ADD ESP,0xc
009c107e : MOV byte ptr [EBP + -0x4],0x1
009c1082 : PUSH -0x1
009c1084 : PUSH EBX
009c1085 : PUSH EAX
009c1086 : LEA ECX,[EBP + -0x2c]
009c1089 : CALL 0x00405eb0
009c108e : MOV byte ptr [EBP + -0x4],BL
009c1091 : CMP dword ptr [EBP + -0x34],0x8
009c1095 : JC 0x009c109f
009c1097 : MOV ECX,dword ptr [EBP + -0x48]
009c109a : CALL 0x006f04e0
009c109f : XOR ECX,ECX
009c10a1 : MOV dword ptr [EBP + -0x34],0x7
009c10a8 : MOV dword ptr [EBP + -0x38],EBX
009c10ab : MOV word ptr [EBP + -0x48],CX
009c10af : JMP 0x009c1177
009c10b4 : JGE 0x009c10d1
009c10b6 : PUSH ESI
009c10b7 : PUSH EDI
009c10b8 : PUSH 0xc90c90
009c10bd : LEA ESI,[EBP + -0x4c]
009c10c0 : CALL 0x00404750
009c10c5 : ADD ESP,0xc
009c10c8 : MOV byte ptr [EBP + -0x4],0x2
009c10cc : JMP 0x009c1160
009c10d1 : PUSH EDI
009c10d2 : PUSH 0xc90d60
009c10d7 : LEA ESI,[EBP + -0x4c]
009c10da : CALL 0x00404750
009c10df : ADD ESP,0x8
009c10e2 : MOV byte ptr [EBP + -0x4],0x3
009c10e6 : JMP 0x009c1160
009c10e8 : CMP ESI,EBX
009c10ea : JLE 0x009c1131
009c10ec : PUSH ESI
009c10ed : PUSH EDI
009c10ee : PUSH 0xc90dc8
009c10f3 : LEA ESI,[EBP + -0x4c]
009c10f6 : CALL 0x00404750
009c10fb : ADD ESP,0xc
009c10fe : MOV byte ptr [EBP + -0x4],0x4
009c1102 : PUSH -0x1
009c1104 : PUSH EBX
009c1105 : PUSH EAX
009c1106 : LEA ECX,[EBP + -0x2c]
009c1109 : CALL 0x00405eb0
009c110e : MOV byte ptr [EBP + -0x4],BL
009c1111 : CMP dword ptr [EBP + -0x34],0x8
009c1115 : JC 0x009c111f
009c1117 : MOV ECX,dword ptr [EBP + -0x48]
009c111a : CALL 0x006f04e0
009c111f : XOR EDX,EDX
009c1121 : MOV dword ptr [EBP + -0x34],0x7
009c1128 : MOV dword ptr [EBP + -0x38],EBX
009c112b : MOV word ptr [EBP + -0x48],DX
009c112f : JMP 0x009c1177
009c1131 : JGE 0x009c114b
009c1133 : PUSH ESI
009c1134 : PUSH EDI
009c1135 : PUSH 0xc90e38
009c113a : LEA ESI,[EBP + -0x4c]
009c113d : CALL 0x00404750
009c1142 : ADD ESP,0xc
009c1145 : MOV byte ptr [EBP + -0x4],0x5
009c1149 : JMP 0x009c1160
009c114b : PUSH EDI
009c114c : PUSH 0xc90ea8
009c1151 : LEA ESI,[EBP + -0x4c]
009c1154 : CALL 0x00404750
009c1159 : ADD ESP,0x8
009c115c : MOV byte ptr [EBP + -0x4],0x6
009c1160 : PUSH -0x1
009c1162 : PUSH EBX
009c1163 : PUSH EAX
009c1164 : LEA ECX,[EBP + -0x2c]
009c1167 : CALL 0x00405eb0
009c116c : MOV byte ptr [EBP + -0x4],BL
009c116f : LEA ECX,[EBP + -0x4c]
009c1172 : CALL 0x00406560
009c1177 : MOV EAX,[0x00da9894]
009c117c : MOV EAX,dword ptr [EAX]
009c117e : CMP EAX,EBX
009c1180 : JZ 0x009c11b9
009c1182 : CMP dword ptr [EAX + 0x114],EBX
009c1188 : JZ 0x009c11b9
009c118a : CMP dword ptr [EBP + -0x14],0x8
009c118e : MOV EAX,dword ptr [EAX + 0x114]
009c1194 : MOV ECX,dword ptr [EBP + -0x28]
009c1197 : JNC 0x009c119c
009c1199 : LEA ECX,[EBP + -0x28]
009c119c : MOV EDX,dword ptr [EAX]
009c119e : MOV EDX,dword ptr [EDX + 0x4]
009c11a1 : PUSH ECX
009c11a2 : MOV ECX,dword ptr [EBP + -0x30]
009c11a5 : PUSH 0xc90eb0
009c11aa : PUSH 0xc90ec4
009c11af : ADD ECX,0x8
009c11b2 : PUSH ECX
009c11b3 : PUSH EAX
009c11b4 : CALL EDX
009c11b6 : ADD ESP,0x14
009c11b9 : MOV dword ptr [EBP + -0x4],0xffffffff
009c11c0 : CMP dword ptr [EBP + -0x14],0x8
009c11c4 : JC 0x009c11ce
009c11c6 : MOV ECX,dword ptr [EBP + -0x28]
009c11c9 : CALL 0x006f04e0
009c11ce : XOR EAX,EAX
009c11d0 : MOV dword ptr [EBP + -0x14],0x7
009c11d7 : MOV dword ptr [EBP + -0x18],EBX
009c11da : MOV word ptr [EBP + -0x28],AX
009c11de : MOV ECX,dword ptr [EBP + -0xc]
009c11e1 : MOV dword ptr FS:[0x0],ECX
009c11e8 : POP ECX
009c11e9 : POP EDI
009c11ea : POP ESI
009c11eb : POP EBX
009c11ec : MOV ECX,dword ptr [EBP + -0x10]
009c11ef : XOR ECX,EBP
009c11f1 : CALL 0x00633e6b
009c11f6 : MOV ESP,EBP
009c11f8 : POP EBP
009c11f9 : RET 0x4
