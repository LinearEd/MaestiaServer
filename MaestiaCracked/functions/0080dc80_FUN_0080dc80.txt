PROGRAM  : Maestia.exe
FUNCTION : FUN_0080dc80
ENTRY    : 0080dc80
BODY     : [[0080dc80, 0080e045]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0080dc80(void)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int in_ECX;
  undefined1 auStack_90 [4];
  undefined4 uStack_8c;
  undefined4 uStack_88;
  undefined4 uStack_84;
  undefined4 uStack_7c;
  uint uStack_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_68;
  uint uStack_64;
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_58;
  undefined2 uStack_50;
  undefined4 uStack_40;
  uint uStack_3c;
  undefined1 auStack_38 [4];
  undefined2 uStack_34;
  undefined4 uStack_24;
  uint uStack_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int iStack_c;
  
  iStack_c = 0xffffffff;
  puStack_10 = &LAB_00b5ee65;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_90;
  ExceptionList = &local_14;
  if (*(int *)(in_ECX + 0x38) == 0) {
    FUN_008018d0(L"RandomApplyCustomize m_pBeautyShopCharacter Is NULL ");
  }
  else {
    (**(code **)(**(int **)(in_ECX + 0x38) + 0x244))(DAT_00d66fa0 ^ (uint)&stack0xffffff68);
    iVar1 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
    iVar3 = *(int *)(in_ECX + 0x90);
    if (iVar1 != 0) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      else if (10 < iVar3) {
        iVar3 = 10;
      }
      *(int *)(iVar1 + 0x24) = iVar3;
    }
    iVar1 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
    iVar3 = *(int *)(in_ECX + 0x94);
    if (iVar1 != 0) {
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      else if (10 < iVar3) {
        iVar3 = 10;
      }
      *(int *)(iVar1 + 0x28) = iVar3;
    }
    iVar1 = *(int *)(in_ECX + 0x38);
    if (*(int *)(iVar1 + 0x18b4) != 0) {
      *(undefined4 *)(*(int *)(iVar1 + 0x18b4) + 0x2c) = *(undefined4 *)(in_ECX + 0x88);
      *(undefined4 *)(*(int *)(iVar1 + 0x18b4) + 0x30) = 0xffffcca6;
    }
    iVar1 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
    if (iVar1 != 0) {
      *(undefined4 *)(iVar1 + 0x30) = *(undefined4 *)(in_ECX + 0x8c);
    }
    FUN_0080d360(in_ECX);
    FUN_0080d160(in_ECX);
    FUN_00406460(L"BeautyShopChar");
    iStack_c = 0;
    uStack_60 = 0x3f800000;
    uStack_5c = 0x3f800000;
    uStack_58 = 0x3f800000;
    uStack_7c = 0;
    uStack_78 = 0;
    uStack_74 = 0;
    uStack_70 = 0x3f800000;
    uStack_8c = 0;
    uStack_88 = 0;
    uStack_84 = 0;
    uVar4 = (**(code **)(**(int **)(*(int *)(DAT_00da93ec + 8) + 0x24) + 0x20))
                      (auStack_38,&uStack_8c,&uStack_7c,&uStack_60);
    (**(code **)(**(int **)(in_ECX + 0x38) + 0x1ec))(uVar4);
    (**(code **)(**(int **)(in_ECX + 0x38) + 0x1e8))(0);
    (**(code **)(**(int **)(in_ECX + 0x38) + 600))
              (*(undefined1 *)((int)*(int **)(in_ECX + 0x38) + 0x3ad));
    (**(code **)(**(int **)(in_ECX + 0x38) + 0x2a0))(in_ECX + 0x60,1);
    FUN_0085f980(*(undefined4 *)(in_ECX + 0x6c),*(undefined4 *)(in_ECX + 0x70));
    *(undefined1 *)(*(int *)(in_ECX + 0x38) + 0x198d) = 0;
    FUN_00854ed0(*(undefined4 *)(in_ECX + 0x38),0);
    if (*(int *)(DAT_00da93ec + 0x41c) != 0) {
      FUN_00878950();
    }
    iVar1 = *DAT_00da9894;
    if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar1 + 0x114) + 4))
                (*(int **)(iVar1 + 0x114),"mc_beautyshop.SetStature",&DAT_00c2dc64,
                 *(undefined4 *)(in_ECX + 0x90));
    }
    iVar1 = *DAT_00da9894;
    if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar1 + 0x114) + 4))
                (*(int **)(iVar1 + 0x114),"mc_beautyshop.SetForm",&DAT_00c2dc84,
                 *(undefined4 *)(in_ECX + 0x94));
    }
    piVar2 = *(int **)(*(int *)(in_ECX + 0x38) + 1000);
    if (piVar2 != (int *)0x0) {
      (**(code **)(*piVar2 + 0x9c))(8);
      iVar1 = *(int *)(in_ECX + 0x38);
      *(undefined1 *)(iVar1 + 0x1528) = 1;
      piVar2 = *(int **)(iVar1 + 1000);
      if (piVar2 != (int *)0x0) {
        (**(code **)(*piVar2 + 0xb0))(1);
      }
    }
    iVar1 = *(int *)(*(int *)(in_ECX + 0x38) + 1000);
    uStack_8c = *(undefined4 *)(iVar1 + 0x68);
    uStack_84 = *(undefined4 *)(iVar1 + 0x70);
    uStack_88 = 0;
    FUN_00406460(L"ID_EF_SELECT_FX");
    iStack_c._0_1_ = 1;
    uVar4 = FUN_0081cfe0(DAT_0172491c,&uStack_7c);
    iStack_c._0_1_ = 2;
    FUN_00898150(uVar4,&uStack_8c);
    iStack_c = CONCAT31(iStack_c._1_3_,1);
    if (7 < uStack_3c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_3c = 7;
    uStack_40 = 0;
    uStack_50 = 0;
    iStack_c = (uint)iStack_c._1_3_ << 8;
    if (7 < uStack_64) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_64 = 7;
    uStack_68 = 0;
    uStack_78 = uStack_78 & 0xffff0000;
    iStack_c = 0xffffffff;
    if (7 < uStack_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_20 = 7;
    uStack_24 = 0;
    uStack_34 = 0;
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_90);
  return;
}



============================================================
DISASSEMBLY
============================================================
0080dc80 : PUSH EBP
0080dc81 : MOV EBP,ESP
0080dc83 : AND ESP,0xfffffff8
0080dc86 : PUSH -0x1
0080dc88 : PUSH 0xb5ee65
0080dc8d : MOV EAX,FS:[0x0]
0080dc93 : PUSH EAX
0080dc94 : SUB ESP,0x7c
0080dc97 : MOV EAX,[0x00d66fa0]
0080dc9c : XOR EAX,ESP
0080dc9e : MOV dword ptr [ESP + 0x74],EAX
0080dca2 : PUSH ESI
0080dca3 : PUSH EDI
0080dca4 : MOV EAX,[0x00d66fa0]
0080dca9 : XOR EAX,ESP
0080dcab : PUSH EAX
0080dcac : LEA EAX,[ESP + 0x88]
0080dcb3 : MOV FS:[0x0],EAX
0080dcb9 : MOV EDI,ECX
0080dcbb : CMP dword ptr [EDI + 0x38],0x0
0080dcbf : JNZ 0x0080dcd9
0080dcc1 : MOV ESI,dword ptr [0x00da98e8]
0080dcc7 : PUSH 0xc2dbd8
0080dccc : CALL 0x008018d0
0080dcd1 : ADD ESP,0x4
0080dcd4 : JMP 0x0080e026
0080dcd9 : MOV ECX,dword ptr [EDI + 0x38]
0080dcdc : MOV EAX,dword ptr [ECX]
0080dcde : MOV EDX,dword ptr [EAX + 0x244]
0080dce4 : CALL EDX
0080dce6 : MOV ECX,dword ptr [EDI + 0x38]
0080dce9 : MOV ECX,dword ptr [ECX + 0x18b4]
0080dcef : MOV EAX,dword ptr [EDI + 0x90]
0080dcf5 : TEST ECX,ECX
0080dcf7 : JZ 0x0080dd0e
0080dcf9 : TEST EAX,EAX
0080dcfb : JGE 0x0080dd01
0080dcfd : XOR EAX,EAX
0080dcff : JMP 0x0080dd0b
0080dd01 : CMP EAX,0xb
0080dd04 : JL 0x0080dd0b
0080dd06 : MOV EAX,0xa
0080dd0b : MOV dword ptr [ECX + 0x24],EAX
0080dd0e : MOV ECX,dword ptr [EDI + 0x38]
0080dd11 : MOV ECX,dword ptr [ECX + 0x18b4]
0080dd17 : MOV EAX,dword ptr [EDI + 0x94]
0080dd1d : TEST ECX,ECX
0080dd1f : JZ 0x0080dd36
0080dd21 : TEST EAX,EAX
0080dd23 : JGE 0x0080dd29
0080dd25 : XOR EAX,EAX
0080dd27 : JMP 0x0080dd33
0080dd29 : CMP EAX,0xb
0080dd2c : JL 0x0080dd33
0080dd2e : MOV EAX,0xa
0080dd33 : MOV dword ptr [ECX + 0x28],EAX
0080dd36 : MOV EAX,dword ptr [EDI + 0x38]
0080dd39 : CMP dword ptr [EAX + 0x18b4],0x0
0080dd40 : MOV EDX,dword ptr [EDI + 0x88]
0080dd46 : JZ 0x0080dd5e
0080dd48 : MOV ECX,dword ptr [EAX + 0x18b4]
0080dd4e : MOV dword ptr [ECX + 0x2c],EDX
0080dd51 : MOV EAX,dword ptr [EAX + 0x18b4]
0080dd57 : MOV dword ptr [EAX + 0x30],0xffffcca6
0080dd5e : MOV EAX,dword ptr [EDI + 0x38]
0080dd61 : MOV EAX,dword ptr [EAX + 0x18b4]
0080dd67 : MOV ECX,dword ptr [EDI + 0x8c]
0080dd6d : TEST EAX,EAX
0080dd6f : JZ 0x0080dd74
0080dd71 : MOV dword ptr [EAX + 0x30],ECX
0080dd74 : PUSH EDI
0080dd75 : CALL 0x0080d360
0080dd7a : PUSH EDI
0080dd7b : CALL 0x0080d160
0080dd80 : PUSH 0xc2dc44
0080dd85 : LEA ECX,[ESP + 0x68]
0080dd89 : CALL 0x00406460
0080dd8e : MOV dword ptr [ESP + 0x90],0x0
0080dd99 : XORPS XMM0,XMM0
0080dd9c : MOVSS XMM1,dword ptr [0x00c10fc4]
0080dda4 : MOV EAX,[0x00da93ec]
0080dda9 : MOV EAX,dword ptr [EAX + 0x8]
0080ddac : MOVSS dword ptr [ESP + 0x3c],XMM1
0080ddb2 : MOVSS dword ptr [ESP + 0x40],XMM1
0080ddb8 : MOVSS dword ptr [ESP + 0x44],XMM1
0080ddbe : MOVSS dword ptr [ESP + 0x20],XMM0
0080ddc4 : MOVSS dword ptr [ESP + 0x24],XMM0
0080ddca : MOVSS dword ptr [ESP + 0x28],XMM0
0080ddd0 : MOVSS dword ptr [ESP + 0x2c],XMM1
0080ddd6 : MOVSS dword ptr [ESP + 0x10],XMM0
0080dddc : MOVSS dword ptr [ESP + 0x14],XMM0
0080dde2 : MOVSS dword ptr [ESP + 0x18],XMM0
0080dde8 : MOV ECX,dword ptr [EAX + 0x24]
0080ddeb : MOV EDX,dword ptr [ECX]
0080dded : MOV EDX,dword ptr [EDX + 0x20]
0080ddf0 : LEA EAX,[ESP + 0x3c]
0080ddf4 : PUSH EAX
0080ddf5 : LEA EAX,[ESP + 0x24]
0080ddf9 : PUSH EAX
0080ddfa : LEA EAX,[ESP + 0x18]
0080ddfe : PUSH EAX
0080ddff : LEA EAX,[ESP + 0x70]
0080de03 : PUSH EAX
0080de04 : CALL EDX
0080de06 : MOV ECX,dword ptr [EDI + 0x38]
0080de09 : MOV EDX,dword ptr [ECX]
0080de0b : PUSH EAX
0080de0c : MOV EAX,dword ptr [EDX + 0x1ec]
0080de12 : CALL EAX
0080de14 : MOV ECX,dword ptr [EDI + 0x38]
0080de17 : MOV EDX,dword ptr [ECX]
0080de19 : MOV EAX,dword ptr [EDX + 0x1e8]
0080de1f : PUSH 0x0
0080de21 : CALL EAX
0080de23 : MOV ECX,dword ptr [EDI + 0x38]
0080de26 : MOV DL,byte ptr [ECX + 0x3ad]
0080de2c : MOV EAX,dword ptr [ECX]
0080de2e : MOV EAX,dword ptr [EAX + 0x258]
0080de34 : MOV byte ptr [ESP + 0x1c],DL
0080de38 : MOV EDX,dword ptr [ESP + 0x1c]
0080de3c : PUSH EDX
0080de3d : CALL EAX
0080de3f : MOV ECX,dword ptr [EDI + 0x38]
0080de42 : MOV EDX,dword ptr [ECX]
0080de44 : MOV EDX,dword ptr [EDX + 0x2a0]
0080de4a : PUSH 0x1
0080de4c : LEA EAX,[EDI + 0x60]
0080de4f : PUSH EAX
0080de50 : CALL EDX
0080de52 : FLD float ptr [EDI + 0x6c]
0080de55 : FLD float ptr [EDI + 0x70]
0080de58 : MOV ECX,dword ptr [EDI + 0x38]
0080de5b : SUB ESP,0x8
0080de5e : FSTP float ptr [ESP + 0x4]
0080de62 : FSTP float ptr [ESP]
0080de65 : CALL 0x0085f980
0080de6a : MOV EAX,dword ptr [EDI + 0x38]
0080de6d : MOV byte ptr [EAX + 0x198d],0x0
0080de74 : MOV EAX,dword ptr [EDI + 0x38]
0080de77 : PUSH 0x0
0080de79 : PUSH EAX
0080de7a : CALL 0x00854ed0
0080de7f : MOV ECX,dword ptr [0x00da93ec]
0080de85 : MOV EDX,dword ptr [ECX + 0x41c]
0080de8b : TEST EDX,EDX
0080de8d : JZ 0x0080de94
0080de8f : CALL 0x00878950
0080de94 : MOV EDX,dword ptr [0x00da9894]
0080de9a : MOV EAX,dword ptr [EDX]
0080de9c : TEST EAX,EAX
0080de9e : JZ 0x0080decb
0080dea0 : CMP dword ptr [EAX + 0x114],0x0
0080dea7 : JZ 0x0080decb
0080dea9 : MOV EDX,dword ptr [EDI + 0x90]
0080deaf : MOV EAX,dword ptr [EAX + 0x114]
0080deb5 : MOV ECX,dword ptr [EAX]
0080deb7 : PUSH EDX
0080deb8 : PUSH 0xc2dc64
0080debd : PUSH 0xc2dc68
0080dec2 : PUSH EAX
0080dec3 : MOV EAX,dword ptr [ECX + 0x4]
0080dec6 : CALL EAX
0080dec8 : ADD ESP,0x10
0080decb : MOV ECX,dword ptr [0x00da9894]
0080ded1 : MOV EAX,dword ptr [ECX]
0080ded3 : TEST EAX,EAX
0080ded5 : JZ 0x0080df02
0080ded7 : CMP dword ptr [EAX + 0x114],0x0
0080dede : JZ 0x0080df02
0080dee0 : MOV ECX,dword ptr [EDI + 0x94]
0080dee6 : MOV EAX,dword ptr [EAX + 0x114]
0080deec : MOV EDX,dword ptr [EAX]
0080deee : MOV EDX,dword ptr [EDX + 0x4]
0080def1 : PUSH ECX
0080def2 : PUSH 0xc2dc84
0080def7 : PUSH 0xc2dc88
0080defc : PUSH EAX
0080defd : CALL EDX
0080deff : ADD ESP,0x10
0080df02 : MOV EAX,dword ptr [EDI + 0x38]
0080df05 : MOV ECX,dword ptr [EAX + 0x3e8]
0080df0b : TEST ECX,ECX
0080df0d : JZ 0x0080df3d
0080df0f : MOV EDX,dword ptr [ECX]
0080df11 : MOV EAX,dword ptr [EDX + 0x9c]
0080df17 : PUSH 0x8
0080df19 : CALL EAX
0080df1b : MOV EAX,dword ptr [EDI + 0x38]
0080df1e : MOV byte ptr [EAX + 0x1528],0x1
0080df25 : MOV EAX,dword ptr [EAX + 0x3e8]
0080df2b : TEST EAX,EAX
0080df2d : JZ 0x0080df3d
0080df2f : MOV EDX,dword ptr [EAX]
0080df31 : MOV ECX,EAX
0080df33 : MOV EAX,dword ptr [EDX + 0xb0]
0080df39 : PUSH 0x1
0080df3b : CALL EAX
0080df3d : MOV ECX,dword ptr [EDI + 0x38]
0080df40 : MOV EAX,dword ptr [ECX + 0x3e8]
0080df46 : MOVSS XMM0,dword ptr [EAX + 0x68]
0080df4b : MOVSS XMM1,dword ptr [EAX + 0x70]
0080df50 : ADD EAX,0x68
0080df53 : MOVSS dword ptr [ESP + 0x10],XMM0
0080df59 : XORPS XMM0,XMM0
0080df5c : PUSH 0xc2dca0
0080df61 : LEA ECX,[ESP + 0x24]
0080df65 : MOVSS dword ptr [ESP + 0x1c],XMM1
0080df6b : MOVSS dword ptr [ESP + 0x18],XMM0
0080df71 : CALL 0x00406460
0080df76 : MOV byte ptr [ESP + 0x90],0x1
0080df7e : MOV EAX,[0x0172491c]
0080df83 : LEA EDX,[ESP + 0x20]
0080df87 : PUSH EDX
0080df88 : PUSH EAX
0080df89 : LEA ESI,[ESP + 0x50]
0080df8d : CALL 0x0081cfe0
0080df92 : MOV byte ptr [ESP + 0x90],0x2
0080df9a : MOV ESI,dword ptr [EDI + 0x38]
0080df9d : LEA ECX,[ESP + 0x10]
0080dfa1 : PUSH ECX
0080dfa2 : PUSH EAX
0080dfa3 : CALL 0x00898150
0080dfa8 : MOV byte ptr [ESP + 0x90],0x1
0080dfb0 : CMP dword ptr [ESP + 0x60],0x8
0080dfb5 : JC 0x0080dfc0
0080dfb7 : MOV ECX,dword ptr [ESP + 0x4c]
0080dfbb : CALL 0x006f04e0
0080dfc0 : XOR EDX,EDX
0080dfc2 : MOV EDI,0x7
0080dfc7 : XOR ESI,ESI
0080dfc9 : MOV dword ptr [ESP + 0x60],EDI
0080dfcd : MOV dword ptr [ESP + 0x5c],ESI
0080dfd1 : MOV word ptr [ESP + 0x4c],DX
0080dfd6 : MOV byte ptr [ESP + 0x90],DL
0080dfdd : CMP dword ptr [ESP + 0x38],0x8
0080dfe2 : JC 0x0080dfed
0080dfe4 : MOV ECX,dword ptr [ESP + 0x24]
0080dfe8 : CALL 0x006f04e0
0080dfed : XOR EAX,EAX
0080dfef : MOV dword ptr [ESP + 0x38],EDI
0080dff3 : MOV dword ptr [ESP + 0x34],ESI
0080dff7 : MOV word ptr [ESP + 0x24],AX
0080dffc : MOV dword ptr [ESP + 0x90],0xffffffff
0080e007 : CMP dword ptr [ESP + 0x7c],0x8
0080e00c : JC 0x0080e017
0080e00e : MOV ECX,dword ptr [ESP + 0x68]
0080e012 : CALL 0x006f04e0
0080e017 : XOR ECX,ECX
0080e019 : MOV dword ptr [ESP + 0x7c],EDI
0080e01d : MOV dword ptr [ESP + 0x78],ESI
0080e021 : MOV word ptr [ESP + 0x68],CX
0080e026 : MOV ECX,dword ptr [ESP + 0x88]
0080e02d : MOV dword ptr FS:[0x0],ECX
0080e034 : POP ECX
0080e035 : POP EDI
0080e036 : POP ESI
0080e037 : MOV ECX,dword ptr [ESP + 0x74]
0080e03b : XOR ECX,ESP
0080e03d : CALL 0x00633e6b
0080e042 : MOV ESP,EBP
0080e044 : POP EBP
0080e045 : RET
