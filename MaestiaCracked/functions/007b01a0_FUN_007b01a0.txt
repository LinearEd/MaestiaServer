PROGRAM  : Maestia.exe
FUNCTION : FUN_007b01a0
ENTRY    : 007b01a0
BODY     : [[007b01a0, 007b03cd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007b01a0(undefined4 param_1)

{
  int *piVar1;
  undefined4 uVar2;
  int *piVar3;
  int iVar4;
  int unaff_EDI;
  void *local_8;
  
  uVar2 = DAT_01725204;
  if (*(char *)(unaff_EDI + 0x2bd) == '\0') {
    return;
  }
  if ((*(int *)(unaff_EDI + 0x398) == 0) && (*(char *)(unaff_EDI + 0x39d) != '\x01')) {
    return;
  }
  piVar1 = *(int **)(DAT_017251ac + 0x18);
  if (*(int *)(unaff_EDI + 0x30c) == 0) {
    return;
  }
  piVar3 = (int *)FUN_007bfd10();
  if (piVar3 == (int *)0x0) {
    iVar4 = *(int *)(unaff_EDI + 0x2d0) * *(int *)(unaff_EDI + 0x2cc);
    DAT_00da9ab0 = iVar4 * 6;
    FUN_007c08d0(uVar2,iVar4 * 0xc);
    piVar3 = (int *)FUN_007bfd10();
    if (piVar3 == (int *)0x0) {
      return;
    }
    *(undefined1 *)(unaff_EDI + 0x39d) = 1;
  }
  if (*(char *)(unaff_EDI + 0x39d) != '\0') {
    local_8 = (void *)0x0;
    if (piVar3 == (int *)0x0) {
      return;
    }
    FUN_007af090();
    iVar4 = (**(code **)(*piVar3 + 0x2c))(piVar3,0,*(int *)(unaff_EDI + 0x398) * 2,&local_8,0);
    if (iVar4 < 0) {
      return;
    }
    _memcpy(local_8,*(void **)(unaff_EDI + 0x394),*(int *)(unaff_EDI + 0x398) * 2);
    (**(code **)(*piVar3 + 0x30))(piVar3);
    *(undefined1 *)(unaff_EDI + 0x39d) = 0;
  }
  (**(code **)(*piVar1 + 400))(piVar1,0,*(undefined4 *)(unaff_EDI + 0x30c),0,0x48);
  (**(code **)(*piVar1 + 0x1a0))(piVar1,piVar3);
  FUN_00779340();
  if (*(char *)(*(int *)(unaff_EDI + 0x278) + 0x2ba8) == '\0') {
    if (*(int *)(DAT_017251ac + 0x3f4) != 0) {
      FUN_007dd110(DAT_017251c4,unaff_EDI + 0x3a0);
      FUN_007dceb0(DAT_017251c4,unaff_EDI + 0x3a0);
      iVar4 = *(int *)(unaff_EDI + 0x2490);
      *(int *)(iVar4 + 0xfc) = unaff_EDI + 0x264;
      *(int *)(iVar4 + 0xf8) = unaff_EDI + 0x250;
    }
    (**(code **)(**(int **)(unaff_EDI + 0x2490) + 0x18))
              (param_1,*(undefined4 *)(unaff_EDI + 0x304),*(int *)(unaff_EDI + 0x398) / 3);
    return;
  }
  FUN_00777f60(param_1,*(undefined4 *)(unaff_EDI + 0x304));
  return;
}



============================================================
DISASSEMBLY
============================================================
007b01a0 : PUSH EBP
007b01a1 : MOV EBP,ESP
007b01a3 : SUB ESP,0x8
007b01a6 : CMP byte ptr [EDI + 0x2bd],0x0
007b01ad : JZ 0x007b03c8
007b01b3 : CMP dword ptr [EDI + 0x398],0x0
007b01ba : JNZ 0x007b01c9
007b01bc : CMP byte ptr [EDI + 0x39d],0x1
007b01c3 : JNZ 0x007b03c8
007b01c9 : CMP dword ptr [EDI + 0x30c],0x0
007b01d0 : MOV EAX,[0x017251ac]
007b01d5 : MOV ECX,dword ptr [EAX + 0x18]
007b01d8 : MOV dword ptr [EBP + -0x8],ECX
007b01db : JZ 0x007b03c8
007b01e1 : MOV ECX,dword ptr [EDI + 0x2e0]
007b01e7 : MOV EAX,dword ptr [EDI + 0x2dc]
007b01ed : PUSH EBX
007b01ee : PUSH ESI
007b01ef : MOV ESI,dword ptr [0x01725204]
007b01f5 : CALL 0x007bfd10
007b01fa : MOV EBX,EAX
007b01fc : TEST EBX,EBX
007b01fe : JNZ 0x007b0255
007b0200 : MOV EAX,dword ptr [EDI + 0x2d0]
007b0206 : IMUL EAX,dword ptr [EDI + 0x2cc]
007b020d : MOV ECX,dword ptr [EDI + 0x2e0]
007b0213 : LEA EAX,[EAX + EAX*0x2]
007b0216 : ADD EAX,EAX
007b0218 : LEA EDX,[EAX + EAX*0x1]
007b021b : PUSH EDX
007b021c : MOV [0x00da9ab0],EAX
007b0221 : MOV EAX,dword ptr [EDI + 0x2dc]
007b0227 : PUSH ESI
007b0228 : CALL 0x007c08d0
007b022d : MOV ECX,dword ptr [EDI + 0x2e0]
007b0233 : MOV EAX,dword ptr [EDI + 0x2dc]
007b0239 : MOV ESI,dword ptr [0x01725204]
007b023f : CALL 0x007bfd10
007b0244 : MOV EBX,EAX
007b0246 : TEST EBX,EBX
007b0248 : JZ 0x007b03c6
007b024e : MOV byte ptr [EDI + 0x39d],0x1
007b0255 : CMP byte ptr [EDI + 0x39d],0x0
007b025c : JZ 0x007b02c0
007b025e : MOV dword ptr [EBP + -0x4],0x0
007b0265 : TEST EBX,EBX
007b0267 : JZ 0x007b03c6
007b026d : MOV ESI,EDI
007b026f : CALL 0x007af090
007b0274 : MOV EDX,dword ptr [EDI + 0x398]
007b027a : MOV EAX,dword ptr [EBX]
007b027c : MOV EAX,dword ptr [EAX + 0x2c]
007b027f : PUSH 0x0
007b0281 : LEA ECX,[EBP + -0x4]
007b0284 : PUSH ECX
007b0285 : ADD EDX,EDX
007b0287 : PUSH EDX
007b0288 : PUSH 0x0
007b028a : PUSH EBX
007b028b : CALL EAX
007b028d : TEST EAX,EAX
007b028f : JL 0x007b03c6
007b0295 : MOV ECX,dword ptr [EDI + 0x398]
007b029b : MOV EDX,dword ptr [EDI + 0x394]
007b02a1 : MOV EAX,dword ptr [EBP + -0x4]
007b02a4 : ADD ECX,ECX
007b02a6 : PUSH ECX
007b02a7 : PUSH EDX
007b02a8 : PUSH EAX
007b02a9 : CALL 0x0063ae40
007b02ae : MOV ECX,dword ptr [EBX]
007b02b0 : MOV EDX,dword ptr [ECX + 0x30]
007b02b3 : ADD ESP,0xc
007b02b6 : PUSH EBX
007b02b7 : CALL EDX
007b02b9 : MOV byte ptr [EDI + 0x39d],0x0
007b02c0 : MOV ECX,dword ptr [EDI + 0x30c]
007b02c6 : MOV ESI,dword ptr [EBP + -0x8]
007b02c9 : MOV EAX,dword ptr [ESI]
007b02cb : MOV EDX,dword ptr [EAX + 0x190]
007b02d1 : PUSH 0x48
007b02d3 : PUSH 0x0
007b02d5 : PUSH ECX
007b02d6 : PUSH 0x0
007b02d8 : PUSH ESI
007b02d9 : CALL EDX
007b02db : MOV EAX,dword ptr [ESI]
007b02dd : MOV ECX,dword ptr [EAX + 0x1a0]
007b02e3 : PUSH EBX
007b02e4 : PUSH ESI
007b02e5 : CALL ECX
007b02e7 : MOV ESI,dword ptr [EDI + 0x25bc]
007b02ed : MOV EAX,dword ptr [EDI + 0x2490]
007b02f3 : CALL 0x00779340
007b02f8 : MOV EDX,dword ptr [EDI + 0x278]
007b02fe : CMP byte ptr [EDX + 0x2ba8],0x0
007b0305 : JZ 0x007b0339
007b0307 : MOV ECX,dword ptr [EDI + 0x398]
007b030d : MOV EAX,0x55555556
007b0312 : IMUL ECX
007b0314 : MOV ECX,dword ptr [EBP + 0x8]
007b0317 : MOV EAX,EDX
007b0319 : SHR EDX,0x1f
007b031c : ADD EDX,EAX
007b031e : MOV EAX,dword ptr [EDI + 0x304]
007b0324 : PUSH EAX
007b0325 : MOV EAX,dword ptr [EDI + 0x2490]
007b032b : PUSH ECX
007b032c : CALL 0x00777f60
007b0331 : POP ESI
007b0332 : POP EBX
007b0333 : MOV ESP,EBP
007b0335 : POP EBP
007b0336 : RET 0x4
007b0339 : MOV EDX,dword ptr [0x017251ac]
007b033f : CMP dword ptr [EDX + 0x3f4],0x0
007b0346 : JZ 0x007b0399
007b0348 : MOV EAX,[0x017251c4]
007b034d : LEA EBX,[EDI + 0x3a0]
007b0353 : PUSH EBX
007b0354 : LEA ESI,[EDI + 0x250]
007b035a : PUSH EAX
007b035b : LEA ECX,[EDI + 0x260]
007b0361 : MOV EAX,ESI
007b0363 : CALL 0x007dd110
007b0368 : MOV EDX,dword ptr [0x017251c4]
007b036e : PUSH EBX
007b036f : LEA EAX,[EDI + 0x264]
007b0375 : LEA ECX,[EDI + 0x274]
007b037b : PUSH EDX
007b037c : CALL 0x007dceb0
007b0381 : MOV EAX,dword ptr [EDI + 0x2490]
007b0387 : LEA ECX,[EDI + 0x264]
007b038d : MOV dword ptr [EAX + 0xfc],ECX
007b0393 : MOV dword ptr [EAX + 0xf8],ESI
007b0399 : MOV EDX,dword ptr [EDI + 0x398]
007b039f : MOV ECX,dword ptr [EDI + 0x2490]
007b03a5 : MOV ESI,dword ptr [ECX]
007b03a7 : MOV EAX,0x55555556
007b03ac : IMUL EDX
007b03ae : MOV EAX,EDX
007b03b0 : SHR EAX,0x1f
007b03b3 : ADD EAX,EDX
007b03b5 : MOV EDX,dword ptr [EDI + 0x304]
007b03bb : PUSH EAX
007b03bc : MOV EAX,dword ptr [EBP + 0x8]
007b03bf : PUSH EDX
007b03c0 : MOV EDX,dword ptr [ESI + 0x18]
007b03c3 : PUSH EAX
007b03c4 : CALL EDX
007b03c6 : POP ESI
007b03c7 : POP EBX
007b03c8 : MOV ESP,EBP
007b03ca : POP EBP
007b03cb : RET 0x4
