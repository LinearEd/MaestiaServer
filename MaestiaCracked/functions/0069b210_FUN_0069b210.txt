PROGRAM  : Maestia.exe
FUNCTION : FUN_0069b210
ENTRY    : 0069b210
BODY     : [[0069b210, 0069b2ce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0069b210(void)

{
  uint uVar1;
  undefined4 *puVar2;
  int *piVar3;
  int *in_EAX;
  int iVar4;
  uint *in_ECX;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  byte *local_8;
  uint local_4;
  
  iVar6 = *in_EAX;
  local_8 = (byte *)in_EAX[2];
  uVar8 = 0;
  uVar7 = 0;
  local_4 = 0;
  FUN_0069b010();
  if (iVar6 != 0) {
    iVar5 = 0;
    do {
      if (uVar7 == 0) {
        local_4 = (uint)*local_8;
        local_8 = local_8 + 1;
        uVar7 = 0x80;
      }
      if ((local_4 & uVar7) != 0) {
        uVar1 = *(uint *)(in_ECX[2] + 0x10 + iVar5);
        iVar4 = in_ECX[2] + iVar5;
        if (((uVar1 & 4) == 0) && (*(uint *)(iVar4 + 0x10) = uVar1 | 4, uVar8 < *in_ECX)) {
          *(int *)(in_ECX[3] + uVar8 * 4) = iVar4;
          uVar8 = uVar8 + 1;
        }
      }
      uVar7 = (int)uVar7 >> 1;
      iVar5 = iVar5 + 0x1c;
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
  }
  in_ECX[1] = uVar8;
  puVar2 = (undefined4 *)in_ECX[3];
  if (1 < (int)uVar8) {
    iVar6 = 0;
    local_4 = uVar8 - 1;
    local_8 = (byte *)puVar2;
    do {
      local_8 = (byte *)((int)local_8 + 4);
      piVar3 = *(int **)local_8;
      for (iVar5 = iVar6; (-1 < iVar5 && (*piVar3 <= *(int *)puVar2[iVar5])); iVar5 = iVar5 + -1) {
        puVar2[iVar5 + 1] = (int *)puVar2[iVar5];
        puVar2[iVar5] = piVar3;
      }
      iVar6 = iVar6 + 1;
      local_4 = local_4 + -1;
    } while (local_4 != 0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0069b210 : SUB ESP,0x8
0069b213 : PUSH EBX
0069b214 : MOV EBX,dword ptr [EAX]
0069b216 : PUSH EBP
0069b217 : PUSH ESI
0069b218 : MOV ESI,ECX
0069b21a : MOV ECX,dword ptr [EAX + 0x8]
0069b21d : PUSH EDI
0069b21e : XOR EDI,EDI
0069b220 : MOV EAX,ESI
0069b222 : XOR EBP,EBP
0069b224 : MOV dword ptr [ESP + 0x14],EDI
0069b228 : MOV dword ptr [ESP + 0x10],ECX
0069b22c : CALL 0x0069b010
0069b231 : TEST EBX,EBX
0069b233 : JBE 0x0069b27f
0069b235 : XOR EDX,EDX
0069b237 : TEST EBP,EBP
0069b239 : JNZ 0x0069b250
0069b23b : MOV EAX,dword ptr [ESP + 0x10]
0069b23f : MOVZX ECX,byte ptr [EAX]
0069b242 : INC EAX
0069b243 : MOV dword ptr [ESP + 0x14],ECX
0069b247 : MOV dword ptr [ESP + 0x10],EAX
0069b24b : MOV EBP,0x80
0069b250 : TEST dword ptr [ESP + 0x14],EBP
0069b254 : JZ 0x0069b275
0069b256 : MOV EAX,dword ptr [ESI + 0x8]
0069b259 : MOV ECX,dword ptr [EAX + EDX*0x1 + 0x10]
0069b25d : ADD EAX,EDX
0069b25f : TEST CL,0x4
0069b262 : JNZ 0x0069b275
0069b264 : OR ECX,0x4
0069b267 : MOV dword ptr [EAX + 0x10],ECX
0069b26a : CMP EDI,dword ptr [ESI]
0069b26c : JNC 0x0069b275
0069b26e : MOV ECX,dword ptr [ESI + 0xc]
0069b271 : MOV dword ptr [ECX + EDI*0x4],EAX
0069b274 : INC EDI
0069b275 : SAR EBP,0x1
0069b277 : ADD EDX,0x1c
0069b27a : SUB EBX,0x1
0069b27d : JNZ 0x0069b237
0069b27f : CMP EDI,0x1
0069b282 : MOV dword ptr [ESI + 0x4],EDI
0069b285 : MOV ESI,dword ptr [ESI + 0xc]
0069b288 : JLE 0x0069b2c7
0069b28a : XOR EBP,EBP
0069b28c : LEA EBX,[ESI + 0x4]
0069b28f : DEC EDI
0069b290 : MOV dword ptr [ESP + 0x10],EBX
0069b294 : MOV dword ptr [ESP + 0x14],EDI
0069b298 : MOV EDX,dword ptr [ESP + 0x10]
0069b29c : MOV EDX,dword ptr [EDX]
0069b29e : MOV EAX,EBP
0069b2a0 : TEST EBP,EBP
0069b2a2 : JL 0x0069b2ba
0069b2a4 : MOV ECX,dword ptr [ESI + EAX*0x4]
0069b2a7 : MOV EDI,dword ptr [ECX]
0069b2a9 : CMP EDI,dword ptr [EDX]
0069b2ab : JL 0x0069b2ba
0069b2ad : SUB EAX,0x1
0069b2b0 : MOV dword ptr [EBX + EAX*0x4 + 0x4],ECX
0069b2b4 : MOV dword ptr [ESI + EAX*0x4 + 0x4],EDX
0069b2b8 : JNS 0x0069b2a4
0069b2ba : ADD dword ptr [ESP + 0x10],0x4
0069b2bf : INC EBP
0069b2c0 : SUB dword ptr [ESP + 0x14],0x1
0069b2c5 : JNZ 0x0069b298
0069b2c7 : POP EDI
0069b2c8 : POP ESI
0069b2c9 : POP EBP
0069b2ca : POP EBX
0069b2cb : ADD ESP,0x8
0069b2ce : RET
