PROGRAM  : Maestia.exe
FUNCTION : FUN_00575860
ENTRY    : 00575860
BODY     : [[00575860, 005759fb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00575860(int *param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  GRefCountNTSImpl *local_58 [9];
  GMatrix2D local_34 [24];
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined2 local_10;
  undefined1 local_e;
  undefined1 local_d;
  undefined4 uStack_c;
  int iStack_8;
  int local_4;
  
  local_58[0] = (GRefCountNTSImpl *)0x0;
  FUN_0059d080();
  GMatrix2D::SetIdentity(local_34);
  local_1c = 0;
  local_14 = 0x40000;
  local_d = 0;
  local_18 = 0;
  local_10 = 0;
  local_e = 0;
  FUN_00573fa0(local_58,param_2);
  if (local_4 == 0) {
    iVar1 = (**(code **)(*param_1 + 0x5c))();
    if (iStack_8 != 0) {
      param_1 = (int *)FUN_00525530(iStack_8);
      param_1[2] = param_1[2] + 1;
      piVar2 = (int *)&param_1;
    }
    else {
      piVar2 = (int *)(*(int *)(iVar1 + 0x78) + 8);
    }
    param_2 = *piVar2;
    *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + 1;
    if (iStack_8 != 0) {
      piVar2 = param_1 + 2;
      *piVar2 = *piVar2 + -1;
      if (*piVar2 == 0) {
        FUN_00525340();
      }
    }
    FUN_00594270(local_58,&param_2,uStack_c,0,0xffffffff,4,0,0);
  }
  else {
    if (local_4 == 1) {
      FUN_0058b050(local_58);
      goto LAB_005759e7;
    }
    if (local_4 != 2) goto LAB_005759e7;
    iVar1 = (**(code **)(*param_1 + 0x5c))();
    if (iStack_8 != 0) {
      param_1 = (int *)FUN_00525530(iStack_8);
      param_1[2] = param_1[2] + 1;
      piVar2 = (int *)&param_1;
    }
    else {
      piVar2 = (int *)(*(int *)(iVar1 + 0x78) + 8);
    }
    param_2 = *piVar2;
    *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + 1;
    if (iStack_8 != 0) {
      piVar2 = param_1 + 2;
      *piVar2 = *piVar2 + -1;
      if (*piVar2 == 0) {
        FUN_00525340();
      }
    }
    FUN_0058cb00(local_58,&param_2);
  }
  *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
  if (*(int *)(param_2 + 8) == 0) {
    FUN_00525340();
  }
LAB_005759e7:
  if (local_58[0] != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(local_58[0]);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00575860 : SUB ESP,0x5c
00575863 : PUSH EBX
00575864 : PUSH ESI
00575865 : MOV ESI,ECX
00575867 : XOR EBX,EBX
00575869 : LEA ECX,[ESP + 0x10]
0057586d : MOV dword ptr [ESP + 0x8],EBX
00575871 : MOV dword ptr [ESP + 0xc],EBX
00575875 : CALL 0x0059d080
0057587a : LEA ECX,[ESP + 0x30]
0057587e : CALL 0x00522b80
00575883 : FLDZ
00575885 : MOV ECX,dword ptr [ESP + 0x6c]
00575889 : FSTP float ptr [ESP + 0x48]
0057588d : PUSH ECX
0057588e : XOR EAX,EAX
00575890 : LEA EDX,[ESP + 0x10]
00575894 : PUSH EDX
00575895 : MOV ECX,ESI
00575897 : MOV dword ptr [ESP + 0x58],0x40000
0057589f : MOV byte ptr [ESP + 0x5f],BL
005758a3 : MOV dword ptr [ESP + 0x54],EBX
005758a7 : MOV word ptr [ESP + 0x5c],AX
005758ac : MOV byte ptr [ESP + 0x5e],AL
005758b0 : CALL 0x00573fa0
005758b5 : MOV EAX,dword ptr [ESP + 0x60]
005758b9 : SUB EAX,EBX
005758bb : JZ 0x00575953
005758c1 : SUB EAX,0x1
005758c4 : JZ 0x00575940
005758c6 : SUB EAX,0x1
005758c9 : JNZ 0x005759e7
005758cf : MOV ESI,dword ptr [ESP + 0x68]
005758d3 : MOV EAX,dword ptr [ESI]
005758d5 : MOV EDX,dword ptr [EAX + 0x5c]
005758d8 : MOV ECX,ESI
005758da : CALL EDX
005758dc : MOV ECX,dword ptr [ESP + 0x5c]
005758e0 : TEST ECX,ECX
005758e2 : JNZ 0x005758f0
005758e4 : MOV ECX,dword ptr [EAX + 0x78]
005758e7 : MOV EAX,dword ptr [ESP + 0x68]
005758eb : ADD ECX,0x8
005758ee : JMP 0x0057590f
005758f0 : MOV EAX,dword ptr [EAX + 0x78]
005758f3 : PUSH ECX
005758f4 : LEA ECX,[EAX + 0x254]
005758fa : MOV EBX,0x2
005758ff : CALL 0x00525530
00575904 : INC dword ptr [EAX + 0x8]
00575907 : MOV dword ptr [ESP + 0x68],EAX
0057590b : LEA ECX,[ESP + 0x68]
0057590f : MOV ECX,dword ptr [ECX]
00575911 : MOV dword ptr [ESP + 0x6c],ECX
00575915 : INC dword ptr [ECX + 0x8]
00575918 : TEST BL,0x2
0057591b : JZ 0x0057592a
0057591d : ADD dword ptr [EAX + 0x8],-0x1
00575921 : JNZ 0x0057592a
00575923 : MOV ECX,EAX
00575925 : CALL 0x00525340
0057592a : LEA EAX,[ESP + 0x6c]
0057592e : PUSH EAX
0057592f : LEA ECX,[ESP + 0x10]
00575933 : PUSH ECX
00575934 : MOV ECX,ESI
00575936 : CALL 0x0058cb00
0057593b : JMP 0x005759d1
00575940 : MOV ECX,dword ptr [ESP + 0x68]
00575944 : LEA EDX,[ESP + 0xc]
00575948 : PUSH EDX
00575949 : CALL 0x0058b050
0057594e : JMP 0x005759e7
00575953 : MOV ESI,dword ptr [ESP + 0x68]
00575957 : MOV EAX,dword ptr [ESI]
00575959 : MOV EDX,dword ptr [EAX + 0x5c]
0057595c : MOV ECX,ESI
0057595e : CALL EDX
00575960 : MOV ECX,dword ptr [ESP + 0x5c]
00575964 : TEST ECX,ECX
00575966 : JNZ 0x00575974
00575968 : MOV ECX,dword ptr [EAX + 0x78]
0057596b : MOV EAX,dword ptr [ESP + 0x68]
0057596f : ADD ECX,0x8
00575972 : JMP 0x00575993
00575974 : MOV EAX,dword ptr [EAX + 0x78]
00575977 : PUSH ECX
00575978 : LEA ECX,[EAX + 0x254]
0057597e : MOV EBX,0x1
00575983 : CALL 0x00525530
00575988 : ADD dword ptr [EAX + 0x8],EBX
0057598b : MOV dword ptr [ESP + 0x68],EAX
0057598f : LEA ECX,[ESP + 0x68]
00575993 : MOV ECX,dword ptr [ECX]
00575995 : MOV dword ptr [ESP + 0x6c],ECX
00575999 : INC dword ptr [ECX + 0x8]
0057599c : TEST BL,0x1
0057599f : JZ 0x005759ae
005759a1 : ADD dword ptr [EAX + 0x8],-0x1
005759a5 : JNZ 0x005759ae
005759a7 : MOV ECX,EAX
005759a9 : CALL 0x00525340
005759ae : MOV EAX,dword ptr [ESP + 0x58]
005759b2 : PUSH 0x0
005759b4 : PUSH 0x0
005759b6 : PUSH 0x4
005759b8 : PUSH -0x1
005759ba : PUSH 0x0
005759bc : PUSH EAX
005759bd : LEA ECX,[ESP + 0x84]
005759c4 : PUSH ECX
005759c5 : LEA EDX,[ESP + 0x28]
005759c9 : PUSH EDX
005759ca : MOV ECX,ESI
005759cc : CALL 0x00594270
005759d1 : MOV EAX,dword ptr [ESP + 0x6c]
005759d5 : DEC dword ptr [EAX + 0x8]
005759d8 : MOV ECX,EAX
005759da : ADD EAX,0x8
005759dd : CMP dword ptr [EAX],0x0
005759e0 : JNZ 0x005759e7
005759e2 : CALL 0x00525340
005759e7 : MOV ECX,dword ptr [ESP + 0xc]
005759eb : POP ESI
005759ec : POP EBX
005759ed : TEST ECX,ECX
005759ef : JZ 0x005759f6
005759f1 : CALL 0x004ff7c0
005759f6 : ADD ESP,0x5c
005759f9 : RET 0x8
