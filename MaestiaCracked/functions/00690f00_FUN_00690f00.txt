PROGRAM  : Maestia.exe
FUNCTION : FUN_00690f00
ENTRY    : 00690f00
BODY     : [[00690f00, 0069106f]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00690f00(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int local_10;
  int iStack_c;
  uint uStack_8;
  uint uStack_4;
  
  iVar1 = param_2;
  uVar3 = *(undefined4 *)(param_2 + 0x1c);
  *(int *)(param_1 + 0x16c) = param_2;
  param_2 = (**(code **)(param_1 + 0x1fc))(param_1,0x6e616d65,param_2,&local_10);
  if (param_2 == 0) {
    iVar2 = FUN_00687830(iVar1);
    iStack_c = iVar2;
    param_2 = FUN_006889e0(iVar1,&DAT_00bd93dc,param_1 + 0x15c);
    if (param_2 == 0) {
      iVar4 = *(int *)(param_1 + 0x160);
      uStack_8 = iVar2 + 6 + iVar4 * 0xc;
      uStack_4 = local_10 + iVar2;
      if (uStack_4 < uStack_8) {
        return 0x91;
      }
      *(undefined4 *)(param_1 + 0x160) = 0;
      uVar3 = FUN_0068a220(uVar3,0x14,0,iVar4,0,&param_2);
      *(undefined4 *)(param_1 + 0x168) = uVar3;
      if ((param_2 == 0) && (param_2 = FUN_00688900(iVar1,iVar4 * 0xc), param_2 == 0)) {
        iVar2 = *(int *)(param_1 + 0x168);
        for (; iVar4 != 0; iVar4 = iVar4 + -1) {
          param_2 = FUN_006889e0(iVar1,&DAT_00bd93f0,iVar2);
          if ((param_2 == 0) && (*(ushort *)(iVar2 + 8) != 0)) {
            *(int *)(iVar2 + 0xc) = *(int *)(iVar2 + 0xc) + *(int *)(param_1 + 0x164) + iStack_c;
            if ((*(uint *)(iVar2 + 0xc) < uStack_8) ||
               (uStack_4 < (uint)*(ushort *)(iVar2 + 8) + *(uint *)(iVar2 + 0xc))) {
              *(undefined4 *)(iVar2 + 0xc) = 0;
              *(undefined2 *)(iVar2 + 8) = 0;
            }
            else {
              iVar2 = iVar2 + 0x14;
            }
          }
        }
        *(int *)(param_1 + 0x160) = (iVar2 - *(int *)(param_1 + 0x168)) / 0x14;
        FUN_006889b0(iVar1);
        *(undefined2 *)(param_1 + 0x158) = *(undefined2 *)(param_1 + 0x160);
      }
    }
  }
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
00690f00 : SUB ESP,0x10
00690f03 : MOV EAX,dword ptr [ESP + 0x14]
00690f07 : PUSH EBX
00690f08 : MOV EBX,dword ptr [ESP + 0x1c]
00690f0c : PUSH ESI
00690f0d : MOV ESI,dword ptr [EBX + 0x1c]
00690f10 : PUSH EDI
00690f11 : LEA ECX,[ESP + 0xc]
00690f15 : PUSH ECX
00690f16 : PUSH EBX
00690f17 : LEA EDI,[EAX + 0x15c]
00690f1d : MOV dword ptr [EDI + 0x10],EBX
00690f20 : MOV EDX,dword ptr [EAX + 0x1fc]
00690f26 : PUSH 0x6e616d65
00690f2b : PUSH EAX
00690f2c : CALL EDX
00690f2e : ADD ESP,0x10
00690f31 : MOV dword ptr [ESP + 0x24],EAX
00690f35 : TEST EAX,EAX
00690f37 : JNZ 0x00691069
00690f3d : PUSH EBP
00690f3e : PUSH EBX
00690f3f : CALL 0x00687830
00690f44 : PUSH EDI
00690f45 : MOV EBP,EAX
00690f47 : PUSH 0xbd93dc
00690f4c : PUSH EBX
00690f4d : MOV dword ptr [ESP + 0x24],EBP
00690f51 : CALL 0x006889e0
00690f56 : ADD ESP,0x10
00690f59 : MOV dword ptr [ESP + 0x28],EAX
00690f5d : TEST EAX,EAX
00690f5f : JNZ 0x00691068
00690f65 : MOV EAX,dword ptr [EDI + 0x4]
00690f68 : MOV EDX,dword ptr [ESP + 0x10]
00690f6c : LEA ECX,[EAX + EAX*0x2]
00690f6f : LEA ECX,[EBP + ECX*0x4 + 0x6]
00690f73 : ADD EDX,EBP
00690f75 : MOV dword ptr [ESP + 0x18],ECX
00690f79 : MOV dword ptr [ESP + 0x1c],EDX
00690f7d : CMP ECX,EDX
00690f7f : JBE 0x00690f8e
00690f81 : POP EBP
00690f82 : POP EDI
00690f83 : POP ESI
00690f84 : MOV EAX,0x91
00690f89 : POP EBX
00690f8a : ADD ESP,0x10
00690f8d : RET
00690f8e : MOV EBP,EAX
00690f90 : LEA EAX,[ESP + 0x28]
00690f94 : PUSH EAX
00690f95 : PUSH 0x0
00690f97 : PUSH EBP
00690f98 : PUSH 0x0
00690f9a : PUSH 0x14
00690f9c : PUSH ESI
00690f9d : MOV dword ptr [EDI + 0x4],0x0
00690fa4 : CALL 0x0068a220
00690fa9 : MOV dword ptr [EDI + 0xc],EAX
00690fac : MOV EAX,dword ptr [ESP + 0x40]
00690fb0 : ADD ESP,0x18
00690fb3 : TEST EAX,EAX
00690fb5 : JNZ 0x00691068
00690fbb : LEA ECX,[EBP + EBP*0x2]
00690fbf : ADD ECX,ECX
00690fc1 : ADD ECX,ECX
00690fc3 : PUSH ECX
00690fc4 : PUSH EBX
00690fc5 : CALL 0x00688900
00690fca : ADD ESP,0x8
00690fcd : MOV dword ptr [ESP + 0x28],EAX
00690fd1 : TEST EAX,EAX
00690fd3 : JNZ 0x00691068
00690fd9 : MOV ESI,dword ptr [EDI + 0xc]
00690fdc : TEST EBP,EBP
00690fde : JBE 0x00691035
00690fe0 : PUSH ESI
00690fe1 : PUSH 0xbd93f0
00690fe6 : PUSH EBX
00690fe7 : CALL 0x006889e0
00690fec : ADD ESP,0xc
00690fef : MOV dword ptr [ESP + 0x28],EAX
00690ff3 : TEST EAX,EAX
00690ff5 : JNZ 0x00691030
00690ff7 : MOVZX ECX,word ptr [ESI + 0x8]
00690ffb : TEST CX,CX
00690ffe : JZ 0x00691030
00691000 : MOV EDX,dword ptr [EDI + 0x8]
00691003 : ADD EDX,dword ptr [ESP + 0x14]
00691007 : ADD dword ptr [ESI + 0xc],EDX
0069100a : MOV EAX,dword ptr [ESI + 0xc]
0069100d : CMP EAX,dword ptr [ESP + 0x18]
00691011 : JC 0x00691023
00691013 : MOVZX ECX,CX
00691016 : ADD ECX,EAX
00691018 : CMP ECX,dword ptr [ESP + 0x1c]
0069101c : JA 0x00691023
0069101e : ADD ESI,0x14
00691021 : JMP 0x00691030
00691023 : XOR EDX,EDX
00691025 : MOV dword ptr [ESI + 0xc],0x0
0069102c : MOV word ptr [ESI + 0x8],DX
00691030 : SUB EBP,0x1
00691033 : JNZ 0x00690fe0
00691035 : SUB ESI,dword ptr [EDI + 0xc]
00691038 : MOV EAX,0x66666667
0069103d : IMUL ESI
0069103f : SAR EDX,0x3
00691042 : MOV EAX,EDX
00691044 : SHR EAX,0x1f
00691047 : ADD EAX,EDX
00691049 : PUSH EBX
0069104a : MOV dword ptr [EDI + 0x4],EAX
0069104d : CALL 0x006889b0
00691052 : MOV CX,word ptr [EDI + 0x4]
00691056 : MOV EDX,dword ptr [ESP + 0x28]
0069105a : MOV EAX,dword ptr [ESP + 0x2c]
0069105e : ADD ESP,0x4
00691061 : MOV word ptr [EDX + 0x158],CX
00691068 : POP EBP
00691069 : POP EDI
0069106a : POP ESI
0069106b : POP EBX
0069106c : ADD ESP,0x10
0069106f : RET
