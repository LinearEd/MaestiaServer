PROGRAM  : Maestia.exe
FUNCTION : FUN_005545d0
ENTRY    : 005545d0
BODY     : [[005545d0, 005547b0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005545d0(float *param_1,char param_2)

{
  float fVar1;
  short *psVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int in_ECX;
  int iVar6;
  int iVar7;
  int iVar8;
  
  if (*(uint *)(in_ECX + 4) < *(uint *)(in_ECX + 8)) {
    psVar2 = *(short **)(in_ECX + 0x1c);
    if (psVar2 == (short *)0x0) {
      if (*(int *)(in_ECX + 0x18) == 0) {
        *(undefined4 *)(in_ECX + 0x14) = **(undefined4 **)(in_ECX + 0x20);
        *(undefined4 **)(in_ECX + 0x20) = *(undefined4 **)(in_ECX + 0x20) + 1;
        *(undefined4 *)(in_ECX + 0x18) = 1;
      }
      if ((*(uint *)(in_ECX + 0x18) & *(uint *)(in_ECX + 0x14)) != 0) {
        piVar4 = *(int **)(in_ECX + 0x20);
        iVar5 = *piVar4;
        *(int **)(in_ECX + 0x20) = piVar4 + 1;
        iVar6 = piVar4[1];
        *(int **)(in_ECX + 0x20) = piVar4 + 2;
        iVar8 = piVar4[2];
        *(int **)(in_ECX + 0x20) = piVar4 + 3;
        iVar7 = piVar4[3];
        *(int **)(in_ECX + 0x20) = piVar4 + 4;
        goto LAB_0055463e;
      }
      piVar4 = *(int **)(in_ECX + 0x20);
      iVar5 = *piVar4;
      *(int **)(in_ECX + 0x20) = piVar4 + 1;
      iVar6 = piVar4[1];
      *(int **)(in_ECX + 0x20) = piVar4 + 2;
    }
    else {
      if (0x8000 < *(uint *)(in_ECX + 0x18)) {
        *(int *)(in_ECX + 0x14) = (int)*psVar2;
        *(short **)(in_ECX + 0x1c) = psVar2 + 1;
        *(undefined4 *)(in_ECX + 0x18) = 1;
      }
      if ((*(uint *)(in_ECX + 0x18) & *(uint *)(in_ECX + 0x14)) != 0) {
        psVar2 = *(short **)(in_ECX + 0x1c);
        iVar5 = (int)*psVar2;
        *(short **)(in_ECX + 0x1c) = psVar2 + 1;
        iVar6 = (int)psVar2[1];
        *(short **)(in_ECX + 0x1c) = psVar2 + 2;
        iVar8 = (int)psVar2[2];
        *(short **)(in_ECX + 0x1c) = psVar2 + 3;
        iVar7 = (int)psVar2[3];
        *(short **)(in_ECX + 0x1c) = psVar2 + 4;
LAB_0055463e:
        *param_1 = (float)(*(int *)(in_ECX + 0xc) + iVar5) * *(float *)(in_ECX + 0x24);
        param_1[1] = (float)(*(int *)(in_ECX + 0x10) + iVar6) * *(float *)(in_ECX + 0x24);
        param_1[2] = (float)(iVar8 + iVar5 + *(int *)(in_ECX + 0xc)) * *(float *)(in_ECX + 0x24);
        iVar3 = *(int *)(in_ECX + 0x10);
        fVar1 = *(float *)(in_ECX + 0x24);
        *(undefined1 *)(param_1 + 4) = 1;
        param_1[3] = (float)(iVar3 + iVar7 + iVar6) * fVar1;
        *(int *)(in_ECX + 0xc) = *(int *)(in_ECX + 0xc) + iVar8 + iVar5;
        *(int *)(in_ECX + 0x10) = *(int *)(in_ECX + 0x10) + iVar7 + iVar6;
        *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
        *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) << 1;
        return;
      }
      psVar2 = *(short **)(in_ECX + 0x1c);
      iVar5 = (int)*psVar2;
      *(short **)(in_ECX + 0x1c) = psVar2 + 1;
      iVar6 = (int)psVar2[1];
      *(short **)(in_ECX + 0x1c) = psVar2 + 2;
    }
    param_1[2] = (float)(*(int *)(in_ECX + 0xc) + iVar5) * *(float *)(in_ECX + 0x24);
    param_1[3] = (float)(*(int *)(in_ECX + 0x10) + iVar6) * *(float *)(in_ECX + 0x24);
    if (param_2 == '\0') {
      *(undefined1 *)(param_1 + 4) = 0;
    }
    else {
      *param_1 = *(float *)(in_ECX + 0x24) * ((float)*(int *)(in_ECX + 0xc) + (float)iVar5 * 0.5);
      iVar8 = *(int *)(in_ECX + 0x10);
      fVar1 = *(float *)(in_ECX + 0x24);
      *(undefined1 *)(param_1 + 4) = 1;
      param_1[1] = ((float)iVar6 * 0.5 + (float)iVar8) * fVar1;
    }
    *(int *)(in_ECX + 0x10) = *(int *)(in_ECX + 0x10) + iVar6;
    *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
    *(int *)(in_ECX + 0xc) = *(int *)(in_ECX + 0xc) + iVar5;
    *(int *)(in_ECX + 0x18) = *(int *)(in_ECX + 0x18) << 1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005545d0 : MOV EAX,dword ptr [ECX + 0x4]
005545d3 : SUB ESP,0xc
005545d6 : CMP EAX,dword ptr [ECX + 0x8]
005545d9 : JNC 0x005547ab
005545df : MOV EAX,dword ptr [ECX + 0x1c]
005545e2 : PUSH EBX
005545e3 : PUSH EBP
005545e4 : PUSH ESI
005545e5 : PUSH EDI
005545e6 : MOV EBX,0x1
005545eb : TEST EAX,EAX
005545ed : JZ 0x00554730
005545f3 : CMP dword ptr [ECX + 0x18],0x8000
005545fa : JBE 0x0055460b
005545fc : MOVSX EDX,word ptr [EAX]
005545ff : ADD EAX,0x2
00554602 : MOV dword ptr [ECX + 0x14],EDX
00554605 : MOV dword ptr [ECX + 0x1c],EAX
00554608 : MOV dword ptr [ECX + 0x18],EBX
0055460b : MOV EAX,dword ptr [ECX + 0x14]
0055460e : TEST dword ptr [ECX + 0x18],EAX
00554611 : JZ 0x005546b2
00554617 : MOV EDX,dword ptr [ECX + 0x1c]
0055461a : MOVSX EAX,word ptr [EDX]
0055461d : LEA ESI,[EDX + 0x2]
00554620 : MOV dword ptr [ECX + 0x1c],ESI
00554623 : MOVSX EDX,word ptr [ESI]
00554626 : ADD ESI,0x2
00554629 : MOV dword ptr [ECX + 0x1c],ESI
0055462c : MOVSX EDI,word ptr [ESI]
0055462f : ADD ESI,0x2
00554632 : MOV dword ptr [ECX + 0x1c],ESI
00554635 : MOVSX EBP,word ptr [ESI]
00554638 : ADD ESI,0x2
0055463b : MOV dword ptr [ECX + 0x1c],ESI
0055463e : MOV ESI,dword ptr [ECX + 0xc]
00554641 : ADD ESI,EAX
00554643 : MOV dword ptr [ESP + 0x24],ESI
00554647 : FILD dword ptr [ESP + 0x24]
0055464b : MOV ESI,dword ptr [ESP + 0x20]
0055464f : FMUL float ptr [ECX + 0x24]
00554652 : FSTP float ptr [ESI]
00554654 : MOV EBX,dword ptr [ECX + 0x10]
00554657 : ADD EBX,EDX
00554659 : MOV dword ptr [ESP + 0x24],EBX
0055465d : FILD dword ptr [ESP + 0x24]
00554661 : LEA EBX,[EDI + EAX*0x1]
00554664 : ADD EDI,EAX
00554666 : FMUL float ptr [ECX + 0x24]
00554669 : FSTP float ptr [ESI + 0x4]
0055466c : ADD EBX,dword ptr [ECX + 0xc]
0055466f : MOV dword ptr [ESP + 0x24],EBX
00554673 : FILD dword ptr [ESP + 0x24]
00554677 : FMUL float ptr [ECX + 0x24]
0055467a : FSTP float ptr [ESI + 0x8]
0055467d : MOV EBX,dword ptr [ECX + 0x10]
00554680 : ADD EBX,EBP
00554682 : ADD EBX,EDX
00554684 : MOV dword ptr [ESP + 0x24],EBX
00554688 : FILD dword ptr [ESP + 0x24]
0055468c : MOV EBX,0x1
00554691 : ADD EBP,EDX
00554693 : FMUL float ptr [ECX + 0x24]
00554696 : MOV byte ptr [ESI + 0x10],BL
00554699 : FSTP float ptr [ESI + 0xc]
0055469c : ADD dword ptr [ECX + 0xc],EDI
0055469f : ADD dword ptr [ECX + 0x10],EBP
005546a2 : ADD dword ptr [ECX + 0x4],EBX
005546a5 : SHL dword ptr [ECX + 0x18],0x1
005546a8 : POP EDI
005546a9 : POP ESI
005546aa : POP EBP
005546ab : POP EBX
005546ac : ADD ESP,0xc
005546af : RET 0x8
005546b2 : MOV EAX,dword ptr [ECX + 0x1c]
005546b5 : MOVSX EDX,word ptr [EAX]
005546b8 : ADD EAX,0x2
005546bb : MOV dword ptr [ECX + 0x1c],EAX
005546be : MOVSX ESI,word ptr [EAX]
005546c1 : ADD EAX,0x2
005546c4 : MOV dword ptr [ESP + 0x10],EDX
005546c8 : MOV dword ptr [ESP + 0x14],ESI
005546cc : MOV dword ptr [ECX + 0x1c],EAX
005546cf : MOV EAX,dword ptr [ECX + 0xc]
005546d2 : ADD EAX,EDX
005546d4 : MOV dword ptr [ESP + 0x18],EAX
005546d8 : FILD dword ptr [ESP + 0x18]
005546dc : MOV EAX,dword ptr [ESP + 0x20]
005546e0 : FMUL float ptr [ECX + 0x24]
005546e3 : FSTP float ptr [EAX + 0x8]
005546e6 : MOV EDI,dword ptr [ECX + 0x10]
005546e9 : ADD EDI,ESI
005546eb : CMP byte ptr [ESP + 0x24],0x0
005546f0 : MOV dword ptr [ESP + 0x20],EDI
005546f4 : FILD dword ptr [ESP + 0x20]
005546f8 : FMUL float ptr [ECX + 0x24]
005546fb : FSTP float ptr [EAX + 0xc]
005546fe : JZ 0x00554797
00554704 : FILD dword ptr [ESP + 0x10]
00554708 : FLD double ptr [0x00cdf120]
0055470e : FMUL ST1
00554710 : FILD dword ptr [ECX + 0xc]
00554713 : FADDP ST2,ST0
00554715 : FLD float ptr [ECX + 0x24]
00554718 : FMULP ST2
0055471a : FXCH
0055471c : FSTP float ptr [EAX]
0055471e : FIMUL dword ptr [ESP + 0x14]
00554722 : FIADD dword ptr [ECX + 0x10]
00554725 : FMUL float ptr [ECX + 0x24]
00554728 : MOV byte ptr [EAX + 0x10],BL
0055472b : FSTP float ptr [EAX + 0x4]
0055472e : JMP 0x0055479b
00554730 : CMP dword ptr [ECX + 0x18],0x0
00554734 : JNZ 0x00554747
00554736 : MOV EAX,dword ptr [ECX + 0x20]
00554739 : MOV EDX,dword ptr [EAX]
0055473b : ADD EAX,0x4
0055473e : MOV dword ptr [ECX + 0x14],EDX
00554741 : MOV dword ptr [ECX + 0x20],EAX
00554744 : MOV dword ptr [ECX + 0x18],EBX
00554747 : MOV EAX,dword ptr [ECX + 0x14]
0055474a : TEST dword ptr [ECX + 0x18],EAX
0055474d : JZ 0x00554777
0055474f : MOV EDX,dword ptr [ECX + 0x20]
00554752 : MOV EAX,dword ptr [EDX]
00554754 : LEA ESI,[EDX + 0x4]
00554757 : MOV dword ptr [ECX + 0x20],ESI
0055475a : MOV EDX,dword ptr [ESI]
0055475c : ADD ESI,0x4
0055475f : MOV dword ptr [ECX + 0x20],ESI
00554762 : MOV EDI,dword ptr [ESI]
00554764 : ADD ESI,0x4
00554767 : MOV dword ptr [ECX + 0x20],ESI
0055476a : MOV EBP,dword ptr [ESI]
0055476c : ADD ESI,0x4
0055476f : MOV dword ptr [ECX + 0x20],ESI
00554772 : JMP 0x0055463e
00554777 : MOV EAX,dword ptr [ECX + 0x20]
0055477a : MOV EDX,dword ptr [EAX]
0055477c : ADD EAX,0x4
0055477f : MOV dword ptr [ECX + 0x20],EAX
00554782 : MOV ESI,dword ptr [EAX]
00554784 : ADD EAX,0x4
00554787 : MOV dword ptr [ESP + 0x10],EDX
0055478b : MOV dword ptr [ESP + 0x14],ESI
0055478f : MOV dword ptr [ECX + 0x20],EAX
00554792 : JMP 0x005546cf
00554797 : MOV byte ptr [EAX + 0x10],0x0
0055479b : ADD dword ptr [ECX + 0x10],ESI
0055479e : ADD dword ptr [ECX + 0x4],EBX
005547a1 : ADD dword ptr [ECX + 0xc],EDX
005547a4 : SHL dword ptr [ECX + 0x18],0x1
005547a7 : POP EDI
005547a8 : POP ESI
005547a9 : POP EBP
005547aa : POP EBX
005547ab : ADD ESP,0xc
005547ae : RET 0x8
