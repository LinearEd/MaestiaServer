PROGRAM  : Maestia.exe
FUNCTION : FUN_0084e210
ENTRY    : 0084e210
BODY     : [[0084e210, 0084e597]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0084e210(int param_1,int *param_2,char param_3,undefined4 param_4,undefined4 param_5,
                 undefined4 param_6)

{
  int *piVar1;
  int *piVar2;
  undefined1 uVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  LONG LVar7;
  undefined4 uVar8;
  uint uVar9;
  int *in_ECX;
  int local_1dc [101];
  int local_48;
  LPCRITICAL_SECTION local_3c;
  char *local_38;
  undefined4 local_34;
  int local_30;
  undefined4 local_2c;
  int *local_28;
  int local_24;
  int *local_20;
  int local_1c;
  int *local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b344d6;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_1c = param_1;
  local_20 = param_2;
  if (in_ECX[0x16] == 0) {
    FUN_008018d0(L"[AvaPlayerPart::AttachMeshBasicNode] Add a mesh node does not exist can not create mesh item."
                 ,local_14);
  }
  else {
    local_28 = in_ECX;
    iVar5 = FUN_00405bb0(&DAT_00c3c8d4);
    if (iVar5 != 0) {
      (**(code **)(*in_ECX + 0xc))(0);
    }
    FUN_00405eb0(param_1,0,0xffffffff);
    iVar6 = FUN_00405bb0(&DAT_00c3c8d8);
    iVar5 = DAT_017251b8;
    if (iVar6 != 0) {
      local_18 = (int *)0x0;
      FUN_00484470(&local_18);
      if (local_24 == *(int *)(iVar5 + 0x50)) {
        local_18 = (int *)0x0;
      }
      else {
        local_18 = *(int **)(local_24 + 0x10);
      }
      if ((((local_20 != (int *)0x0) && (param_3 != '\0')) && (local_18 != (int *)0x0)) &&
         (*(int *)(iVar5 + 0x60) == 0)) {
        LVar7 = InterlockedIncrement((LONG *)&DAT_00da9888);
        local_24 = LVar7;
        local_48 = FUN_006f0760(0x11c,".\\Loading\\AvaBaseBackgroundLoader.cpp",0xf3,0);
        local_8 = 9;
        if (local_48 == 0) {
          iVar5 = 0;
        }
        else {
          iVar5 = FUN_00793c50(local_48);
        }
        local_8 = 0xffffffff;
        *(undefined4 *)(iVar5 + 0x10c) = param_4;
        *(undefined4 *)(iVar5 + 0x2c) = 0;
        *(undefined4 *)(iVar5 + 0xec) = 0;
        FUN_00405eb0(local_1c,0,0xffffffff);
        *(int **)(iVar5 + 0x110) = in_ECX;
        uVar8 = FUN_00404750(L"%d_%d_100",local_20[1],LVar7);
        local_8 = 0xb;
        FUN_00405eb0(uVar8,0,0xffffffff);
        local_8 = 0xffffffff;
        FUN_00406560();
        piVar2 = local_20;
        *(int *)(iVar5 + 0xe4) = local_20[1];
        *(int *)(iVar5 + 0x8c) = *(int *)(local_20[0x4e] + 8) + 0x138 + (int)local_20;
        if (DAT_00da93ec == 0) {
          iVar6 = 0;
        }
        else {
          iVar6 = DAT_00da93ec + 0x10;
        }
        *(int *)(iVar5 + 0xe8) = iVar6;
        *(undefined1 *)(iVar5 + 0x118) = (undefined1)param_5;
        *(int *)(iVar5 + 0x114) = local_24;
        uVar3 = (**(code **)(*local_20 + 0x1d8))();
        *(undefined1 *)(iVar5 + 0x119) = uVar3;
        sVar4 = (**(code **)(*piVar2 + 0x1e4))();
        if (sVar4 == 0) {
          FUN_00858190(param_5);
        }
        FUN_00792980();
        param_1 = local_1c;
        in_ECX = local_28;
      }
      local_3c = (LPCRITICAL_SECTION)(in_ECX + 4);
      local_30 = 0;
      local_38 = ".\\Objects\\AvaPlayerParts.cpp";
      local_34 = 0xe7;
      local_2c = 1;
      FUN_006ef1a0(&local_3c);
      local_8 = 0xc;
      *(undefined1 *)(in_ECX[0x16] + 0x2a1) = 1;
      if (((local_20 == (int *)0x0) || (param_3 == '\0')) || (local_18 == (int *)0x0)) {
        (**(code **)(*(int *)in_ECX[0x16] + 0xe8))(param_1,0,0,param_4,1,param_6,0);
      }
      else {
        FUN_007d8fa0(in_ECX[0x16],param_4,param_6);
      }
      local_1c = 0;
      FUN_007d38e0(&local_1c);
      if (local_1c != 0) {
        local_18 = local_1dc;
        do {
          piVar2 = local_18;
          iVar5 = in_ECX[0x2b];
          if (iVar5 == 0) {
            uVar9 = 0;
          }
          else {
            uVar9 = in_ECX[0x2d] - iVar5 >> 2;
          }
          piVar1 = (int *)in_ECX[0x2c];
          if ((uint)((int)piVar1 - iVar5 >> 2) < uVar9) {
            *piVar1 = *local_18;
            in_ECX[0x2c] = (int)(piVar1 + 1);
          }
          else {
            FUN_0042fe80(in_ECX + 0x2a,piVar1,local_18);
          }
          iVar5 = *piVar2;
          if (iVar5 != 0) {
            *(short *)(iVar5 + 0x2dc) = (short)in_ECX[0x56];
          }
          local_18 = piVar2 + 1;
          local_1c = local_1c + -1;
        } while (local_1c != 0);
      }
      *(undefined1 *)(in_ECX[0x16] + 0x2a1) = 0;
      local_8 = 0xffffffff;
      if (local_30 != 0) {
        LeaveCriticalSection(local_3c);
        local_30 = 0;
      }
      FUN_0084c220();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0084e210 : PUSH EBP
0084e211 : MOV EBP,ESP
0084e213 : PUSH -0x1
0084e215 : PUSH 0xb344d6
0084e21a : MOV EAX,FS:[0x0]
0084e220 : PUSH EAX
0084e221 : SUB ESP,0x1cc
0084e227 : MOV EAX,[0x00d66fa0]
0084e22c : XOR EAX,EBP
0084e22e : MOV dword ptr [EBP + -0x10],EAX
0084e231 : PUSH EBX
0084e232 : PUSH ESI
0084e233 : PUSH EDI
0084e234 : PUSH EAX
0084e235 : LEA EAX,[EBP + -0xc]
0084e238 : MOV FS:[0x0],EAX
0084e23e : MOV EBX,dword ptr [EBP + 0x8]
0084e241 : MOV EAX,dword ptr [EBP + 0xc]
0084e244 : MOV ESI,ECX
0084e246 : CMP dword ptr [ESI + 0x58],0x0
0084e24a : MOV dword ptr [EBP + -0x24],ESI
0084e24d : MOV dword ptr [EBP + -0x18],EBX
0084e250 : MOV dword ptr [EBP + -0x1c],EAX
0084e253 : JZ 0x0084e567
0084e259 : MOV EAX,dword ptr [EBX + 0x14]
0084e25c : PUSH 0xc3c8d4
0084e261 : XOR EDI,EDI
0084e263 : MOV ECX,EBX
0084e265 : CALL 0x00405bb0
0084e26a : TEST EAX,EAX
0084e26c : JZ 0x0084e278
0084e26e : MOV EDX,dword ptr [ESI]
0084e270 : MOV EAX,dword ptr [EDX + 0xc]
0084e273 : PUSH EDI
0084e274 : MOV ECX,ESI
0084e276 : CALL EAX
0084e278 : PUSH -0x1
0084e27a : PUSH 0x0
0084e27c : PUSH EBX
0084e27d : LEA ECX,[ESI + 0x60]
0084e280 : CALL 0x00405eb0
0084e285 : MOV EAX,dword ptr [EBX + 0x14]
0084e288 : PUSH 0xc3c8d8
0084e28d : XOR EDI,EDI
0084e28f : MOV ECX,EBX
0084e291 : CALL 0x00405bb0
0084e296 : TEST EAX,EAX
0084e298 : JZ 0x0084e57a
0084e29e : MOV dword ptr [EBP + -0x14],EDI
0084e2a1 : MOV EDI,dword ptr [0x017251b8]
0084e2a7 : LEA ECX,[EBP + -0x14]
0084e2aa : PUSH ECX
0084e2ab : LEA ECX,[EDI + 0x4c]
0084e2ae : LEA EAX,[EBP + -0x20]
0084e2b1 : CALL 0x00484470
0084e2b6 : MOV EAX,dword ptr [EDI + 0x50]
0084e2b9 : MOV ECX,dword ptr [EBP + -0x20]
0084e2bc : CMP ECX,EAX
0084e2be : JNZ 0x0084e2c9
0084e2c0 : MOV dword ptr [EBP + -0x14],0x0
0084e2c7 : JMP 0x0084e2cf
0084e2c9 : MOV EDX,dword ptr [ECX + 0x10]
0084e2cc : MOV dword ptr [EBP + -0x14],EDX
0084e2cf : CMP dword ptr [EBP + -0x1c],0x0
0084e2d3 : JZ 0x0084e42d
0084e2d9 : CMP byte ptr [EBP + 0x10],0x0
0084e2dd : JZ 0x0084e42d
0084e2e3 : CMP dword ptr [EBP + -0x14],0x0
0084e2e7 : JZ 0x0084e42d
0084e2ed : CMP dword ptr [EDI + 0x60],0x0
0084e2f1 : JNZ 0x0084e42d
0084e2f7 : PUSH 0xda9888
0084e2fc : CALL dword ptr [0x00b850dc]
0084e302 : PUSH 0x0
0084e304 : PUSH 0xf3
0084e309 : MOV EDI,EAX
0084e30b : PUSH 0xc15494
0084e310 : PUSH 0x11c
0084e315 : MOV dword ptr [EBP + -0x20],EDI
0084e318 : CALL 0x006f0760
0084e31d : ADD ESP,0x10
0084e320 : MOV dword ptr [EBP + -0x44],EAX
0084e323 : MOV dword ptr [EBP + -0x4],0x9
0084e32a : TEST EAX,EAX
0084e32c : JZ 0x0084e338
0084e32e : PUSH EAX
0084e32f : CALL 0x00793c50
0084e334 : MOV EBX,EAX
0084e336 : JMP 0x0084e33a
0084e338 : XOR EBX,EBX
0084e33a : MOV dword ptr [EBP + -0x4],0xffffffff
0084e341 : MOV ECX,dword ptr [EBP + 0x14]
0084e344 : MOV EDX,dword ptr [EBP + -0x18]
0084e347 : XOR EAX,EAX
0084e349 : PUSH -0x1
0084e34b : PUSH EAX
0084e34c : MOV dword ptr [EBX + 0x10c],ECX
0084e352 : PUSH EDX
0084e353 : LEA ECX,[EBX + 0xf0]
0084e359 : MOV dword ptr [EBX + 0x2c],EAX
0084e35c : MOV dword ptr [EBX + 0xec],EAX
0084e362 : CALL 0x00405eb0
0084e367 : MOV EAX,dword ptr [EBP + -0x1c]
0084e36a : MOV dword ptr [EBX + 0x110],ESI
0084e370 : MOV EAX,dword ptr [EAX + 0x4]
0084e373 : PUSH EDI
0084e374 : PUSH EAX
0084e375 : PUSH 0xc3c8dc
0084e37a : LEA ESI,[EBP + -0x40]
0084e37d : CALL 0x00404750
0084e382 : ADD ESP,0xc
0084e385 : MOV dword ptr [EBP + -0x4],0xb
0084e38c : PUSH -0x1
0084e38e : PUSH 0x0
0084e390 : PUSH EAX
0084e391 : LEA ECX,[EBX + 0xc]
0084e394 : CALL 0x00405eb0
0084e399 : MOV dword ptr [EBP + -0x4],0xffffffff
0084e3a0 : MOV ECX,ESI
0084e3a2 : CALL 0x00406560
0084e3a7 : MOV EDI,dword ptr [EBP + -0x1c]
0084e3aa : MOV EAX,dword ptr [EDI + 0x4]
0084e3ad : MOV dword ptr [EBX + 0xe4],EAX
0084e3b3 : MOV ECX,dword ptr [EDI + 0x138]
0084e3b9 : MOV EDX,dword ptr [ECX + 0x8]
0084e3bc : LEA EAX,[EDX + EDI*0x1 + 0x138]
0084e3c3 : MOV dword ptr [EBX + 0x8c],EAX
0084e3c9 : MOV EAX,[0x00da93ec]
0084e3ce : TEST EAX,EAX
0084e3d0 : JZ 0x0084e3d7
0084e3d2 : ADD EAX,0x10
0084e3d5 : JMP 0x0084e3d9
0084e3d7 : XOR EAX,EAX
0084e3d9 : MOV ESI,dword ptr [EBP + -0x20]
0084e3dc : MOV dword ptr [EBX + 0xe8],EAX
0084e3e2 : MOV AL,byte ptr [EBP + 0x18]
0084e3e5 : MOV byte ptr [EBX + 0x118],AL
0084e3eb : MOV dword ptr [EBX + 0x114],ESI
0084e3f1 : MOV EDX,dword ptr [EDI]
0084e3f3 : MOV EAX,dword ptr [EDX + 0x1d8]
0084e3f9 : MOV ECX,EDI
0084e3fb : CALL EAX
0084e3fd : MOV byte ptr [EBX + 0x119],AL
0084e403 : MOV EDX,dword ptr [EDI]
0084e405 : MOV EAX,dword ptr [EDX + 0x1e4]
0084e40b : MOV ECX,EDI
0084e40d : CALL EAX
0084e40f : TEST AX,AX
0084e412 : JNZ 0x0084e41d
0084e414 : MOV ECX,dword ptr [EBP + 0x18]
0084e417 : PUSH ECX
0084e418 : CALL 0x00858190
0084e41d : MOV ESI,dword ptr [EBP + -0x14]
0084e420 : MOV EDI,EBX
0084e422 : CALL 0x00792980
0084e427 : MOV ESI,dword ptr [EBP + -0x24]
0084e42a : MOV EBX,dword ptr [EBP + -0x18]
0084e42d : LEA EAX,[EBP + -0x38]
0084e430 : LEA EDX,[ESI + 0x10]
0084e433 : PUSH EAX
0084e434 : MOV dword ptr [EBP + -0x2c],0x0
0084e43b : MOV dword ptr [EBP + -0x38],EDX
0084e43e : MOV dword ptr [EBP + -0x34],0xc3c8f0
0084e445 : MOV dword ptr [EBP + -0x30],0xe7
0084e44c : MOV dword ptr [EBP + -0x28],0x1
0084e453 : CALL 0x006ef1a0
0084e458 : MOV dword ptr [EBP + -0x4],0xc
0084e45f : CMP dword ptr [EBP + -0x1c],0x0
0084e463 : MOV EAX,dword ptr [ESI + 0x58]
0084e466 : MOV byte ptr [EAX + 0x2a1],0x1
0084e46d : JZ 0x0084e490
0084e46f : CMP byte ptr [EBP + 0x10],0x0
0084e473 : JZ 0x0084e490
0084e475 : CMP dword ptr [EBP + -0x14],0x0
0084e479 : JZ 0x0084e490
0084e47b : MOV ECX,dword ptr [EBP + 0x1c]
0084e47e : MOV EDX,dword ptr [EBP + 0x14]
0084e481 : MOV EAX,dword ptr [ESI + 0x58]
0084e484 : PUSH ECX
0084e485 : PUSH EDX
0084e486 : PUSH EAX
0084e487 : MOV ECX,EBX
0084e489 : CALL 0x007d8fa0
0084e48e : JMP 0x0084e4ae
0084e490 : MOV EAX,dword ptr [EBP + 0x1c]
0084e493 : MOV ECX,dword ptr [ESI + 0x58]
0084e496 : MOV EDX,dword ptr [ECX]
0084e498 : MOV EDX,dword ptr [EDX + 0xe8]
0084e49e : PUSH 0x0
0084e4a0 : PUSH EAX
0084e4a1 : MOV EAX,dword ptr [EBP + 0x14]
0084e4a4 : PUSH 0x1
0084e4a6 : PUSH EAX
0084e4a7 : PUSH 0x0
0084e4a9 : PUSH 0x0
0084e4ab : PUSH EBX
0084e4ac : CALL EDX
0084e4ae : MOV EDI,dword ptr [ESI + 0x58]
0084e4b1 : LEA EAX,[EBP + -0x18]
0084e4b4 : PUSH EAX
0084e4b5 : LEA EAX,[EBP + 0xfffffe28]
0084e4bb : MOV dword ptr [EBP + -0x18],0x0
0084e4c2 : CALL 0x007d38e0
0084e4c7 : MOV EAX,dword ptr [EBP + -0x18]
0084e4ca : TEST EAX,EAX
0084e4cc : JBE 0x0084e538
0084e4ce : LEA ECX,[EBP + 0xfffffe28]
0084e4d4 : LEA EDI,[ESI + 0xa8]
0084e4da : MOV dword ptr [EBP + -0x14],ECX
0084e4dd : MOV dword ptr [EBP + -0x18],EAX
0084e4e0 : MOV EDX,dword ptr [EDI + 0x4]
0084e4e3 : TEST EDX,EDX
0084e4e5 : JNZ 0x0084e4eb
0084e4e7 : XOR EAX,EAX
0084e4e9 : JMP 0x0084e4f3
0084e4eb : MOV EAX,dword ptr [EDI + 0xc]
0084e4ee : SUB EAX,EDX
0084e4f0 : SAR EAX,0x2
0084e4f3 : MOV ECX,dword ptr [EDI + 0x8]
0084e4f6 : MOV EBX,ECX
0084e4f8 : SUB EBX,EDX
0084e4fa : SAR EBX,0x2
0084e4fd : CMP EBX,EAX
0084e4ff : MOV EBX,dword ptr [EBP + -0x14]
0084e502 : JNC 0x0084e510
0084e504 : MOV EDX,dword ptr [EBX]
0084e506 : MOV dword ptr [ECX],EDX
0084e508 : ADD ECX,0x4
0084e50b : MOV dword ptr [EDI + 0x8],ECX
0084e50e : JMP 0x0084e518
0084e510 : PUSH EBX
0084e511 : PUSH ECX
0084e512 : PUSH EDI
0084e513 : CALL 0x0042fe80
0084e518 : MOV EAX,dword ptr [EBX]
0084e51a : TEST EAX,EAX
0084e51c : JZ 0x0084e52c
0084e51e : MOVZX ECX,word ptr [ESI + 0x158]
0084e525 : MOV word ptr [EAX + 0x2dc],CX
0084e52c : ADD EBX,0x4
0084e52f : SUB dword ptr [EBP + -0x18],0x1
0084e533 : MOV dword ptr [EBP + -0x14],EBX
0084e536 : JNZ 0x0084e4e0
0084e538 : MOV EAX,dword ptr [ESI + 0x58]
0084e53b : MOV byte ptr [EAX + 0x2a1],0x0
0084e542 : MOV dword ptr [EBP + -0x4],0xffffffff
0084e549 : CMP dword ptr [EBP + -0x2c],0x0
0084e54d : JZ 0x0084e560
0084e54f : MOV EAX,dword ptr [EBP + -0x38]
0084e552 : PUSH EAX
0084e553 : CALL dword ptr [0x00b8511c]
0084e559 : MOV dword ptr [EBP + -0x2c],0x0
0084e560 : CALL 0x0084c220
0084e565 : JMP 0x0084e57a
0084e567 : MOV ESI,dword ptr [0x00da98e8]
0084e56d : PUSH 0xc3c910
0084e572 : CALL 0x008018d0
0084e577 : ADD ESP,0x4
0084e57a : MOV ECX,dword ptr [EBP + -0xc]
0084e57d : MOV dword ptr FS:[0x0],ECX
0084e584 : POP ECX
0084e585 : POP EDI
0084e586 : POP ESI
0084e587 : POP EBX
0084e588 : MOV ECX,dword ptr [EBP + -0x10]
0084e58b : XOR ECX,EBP
0084e58d : CALL 0x00633e6b
0084e592 : MOV ESP,EBP
0084e594 : POP EBP
0084e595 : RET 0x18
