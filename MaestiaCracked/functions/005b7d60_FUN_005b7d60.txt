PROGRAM  : Maestia.exe
FUNCTION : FUN_005b7d60
ENTRY    : 005b7d60
BODY     : [[005b7d60, 005b7ef0]]

============================================================
DECOMPILED C CODE
============================================================

float * FUN_005b7d60(float *param_1,undefined4 param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  byte bVar6;
  bool bVar7;
  int iVar8;
  float *pfVar9;
  int *in_ECX;
  int iVar10;
  uint uVar11;
  undefined1 local_10 [16];
  
  *param_1 = 0.0;
  param_1[1] = 0.0;
  iVar8 = in_ECX[0x27];
  param_1[2] = 0.0;
  uVar11 = 0;
  param_1[3] = 0.0;
  bVar7 = false;
  if (*(int *)(iVar8 + 0x1c) != 0) {
    iVar10 = 0;
    do {
      iVar5 = in_ECX[0x2e];
      iVar8 = *(int *)(iVar8 + 0x18) + iVar10;
      if (iVar5 == 0) {
        bVar6 = *(byte *)(iVar8 + 0x48) & 8;
joined_r0x005b7db5:
        if (bVar6 != 0) {
          pfVar9 = (float *)(**(code **)(*in_ECX + 0x13c))(local_10,param_2,uVar11);
          fVar1 = *pfVar9;
          fVar2 = pfVar9[1];
          fVar3 = pfVar9[2];
          fVar4 = pfVar9[3];
          if ((fVar1 != fVar3) || (fVar2 != fVar4)) {
            if (bVar7) {
              if (*param_1 <= fVar1) {
                fVar1 = *param_1;
              }
              if (fVar3 < param_1[2]) {
                fVar3 = param_1[2];
              }
              if (param_1[1] <= fVar2) {
                fVar2 = param_1[1];
              }
              if (fVar4 < param_1[3]) {
                fVar4 = param_1[3];
              }
              *param_1 = fVar1;
              param_1[1] = fVar2;
              param_1[2] = fVar3;
              param_1[3] = fVar4;
            }
            else {
              bVar7 = true;
              *param_1 = fVar1;
              param_1[1] = fVar2;
              param_1[2] = fVar3;
              param_1[3] = fVar4;
            }
          }
        }
      }
      else {
        if (iVar5 == 1) {
          bVar6 = *(byte *)(iVar8 + 0x48) & 2;
          goto joined_r0x005b7db5;
        }
        if (iVar5 == 2) {
          bVar6 = *(byte *)(iVar8 + 0x48) & 4;
          goto joined_r0x005b7db5;
        }
      }
      iVar8 = in_ECX[0x27];
      uVar11 = uVar11 + 1;
      iVar10 = iVar10 + 0x4c;
    } while (uVar11 < *(uint *)(iVar8 + 0x1c));
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
005b7d60 : SUB ESP,0x30
005b7d63 : FLDZ
005b7d65 : PUSH EBP
005b7d66 : PUSH ESI
005b7d67 : MOV ESI,dword ptr [ESP + 0x3c]
005b7d6b : PUSH EDI
005b7d6c : FST float ptr [ESI]
005b7d6e : MOV EDI,ECX
005b7d70 : FST float ptr [ESI + 0x4]
005b7d73 : MOV EAX,dword ptr [EDI + 0x9c]
005b7d79 : FST float ptr [ESI + 0x8]
005b7d7c : XOR EBP,EBP
005b7d7e : FSTP float ptr [ESI + 0xc]
005b7d81 : MOV byte ptr [ESP + 0x40],0x0
005b7d86 : CMP dword ptr [EAX + 0x1c],EBP
005b7d89 : JBE 0x005b7ee6
005b7d8f : PUSH EBX
005b7d90 : XOR EBX,EBX
005b7d92 : MOV EAX,dword ptr [EAX + 0x18]
005b7d95 : MOV ECX,dword ptr [EDI + 0xb8]
005b7d9b : ADD EAX,EBX
005b7d9d : TEST ECX,ECX
005b7d9f : JNZ 0x005b7dac
005b7da1 : TEST byte ptr [EAX + 0x48],0x8
005b7da5 : JNZ 0x005b7dcf
005b7da7 : JMP 0x005b7ed2
005b7dac : CMP ECX,0x1
005b7daf : JNZ 0x005b7dbc
005b7db1 : TEST byte ptr [EAX + 0x48],0x2
005b7db5 : JNZ 0x005b7dcf
005b7db7 : JMP 0x005b7ed2
005b7dbc : CMP ECX,0x2
005b7dbf : JNZ 0x005b7ed2
005b7dc5 : TEST byte ptr [EAX + 0x48],0x4
005b7dc9 : JZ 0x005b7ed2
005b7dcf : MOV ECX,dword ptr [ESP + 0x48]
005b7dd3 : MOV EAX,dword ptr [EDI]
005b7dd5 : MOV EAX,dword ptr [EAX + 0x13c]
005b7ddb : PUSH EBP
005b7ddc : PUSH ECX
005b7ddd : LEA EDX,[ESP + 0x38]
005b7de1 : PUSH EDX
005b7de2 : MOV ECX,EDI
005b7de4 : CALL EAX
005b7de6 : FLD float ptr [EAX]
005b7de8 : FSTP float ptr [ESP + 0x20]
005b7dec : FLD float ptr [EAX + 0x4]
005b7def : FSTP float ptr [ESP + 0x24]
005b7df3 : FLD float ptr [EAX + 0x8]
005b7df6 : FSTP float ptr [ESP + 0x28]
005b7dfa : FLD float ptr [EAX + 0xc]
005b7dfd : FSTP float ptr [ESP + 0x2c]
005b7e01 : FLD float ptr [ESP + 0x28]
005b7e05 : FLD ST0
005b7e07 : FLD float ptr [ESP + 0x20]
005b7e0b : FLD ST0
005b7e0d : FUCOMP ST2
005b7e0f : FNSTSW AX
005b7e11 : FSTP ST1
005b7e13 : FLD float ptr [ESP + 0x2c]
005b7e17 : FLD float ptr [ESP + 0x24]
005b7e1b : TEST AH,0x44
005b7e1e : JP 0x005b7e31
005b7e20 : FLD ST1
005b7e22 : FLD ST1
005b7e24 : FUCOMPP
005b7e26 : FNSTSW AX
005b7e28 : TEST AH,0x44
005b7e2b : JNP 0x005b7eca
005b7e31 : CMP byte ptr [ESP + 0x44],0x0
005b7e36 : JNZ 0x005b7e53
005b7e38 : FXCH ST2
005b7e3a : MOV byte ptr [ESP + 0x44],0x1
005b7e3f : FSTP float ptr [ESI]
005b7e41 : FXCH
005b7e43 : FSTP float ptr [ESI + 0x4]
005b7e46 : FXCH
005b7e48 : FSTP float ptr [ESI + 0x8]
005b7e4b : FSTP float ptr [ESI + 0xc]
005b7e4e : JMP 0x005b7ed2
005b7e53 : FLD float ptr [ESI]
005b7e55 : FCOMP ST3
005b7e57 : FNSTSW AX
005b7e59 : TEST AH,0x41
005b7e5c : JNZ 0x005b7e62
005b7e5e : FXCH ST2
005b7e60 : JMP 0x005b7e66
005b7e62 : FSTP ST2
005b7e64 : FLD float ptr [ESI]
005b7e66 : FSTP float ptr [ESP + 0x10]
005b7e6a : FLD float ptr [ESI + 0x8]
005b7e6d : FCOMP ST3
005b7e6f : FNSTSW AX
005b7e71 : TEST AH,0x41
005b7e74 : JNZ 0x005b7e7d
005b7e76 : FSTP ST2
005b7e78 : FLD float ptr [ESI + 0x8]
005b7e7b : JMP 0x005b7e7f
005b7e7d : FXCH ST2
005b7e7f : FSTP float ptr [ESP + 0x18]
005b7e83 : FLD float ptr [ESI + 0x4]
005b7e86 : FCOMP
005b7e88 : FNSTSW AX
005b7e8a : TEST AH,0x41
005b7e8d : JZ 0x005b7e94
005b7e8f : FSTP ST0
005b7e91 : FLD float ptr [ESI + 0x4]
005b7e94 : FSTP float ptr [ESP + 0x14]
005b7e98 : FLD float ptr [ESI + 0xc]
005b7e9b : FCOMP
005b7e9d : FNSTSW AX
005b7e9f : TEST AH,0x41
005b7ea2 : JNZ 0x005b7ea9
005b7ea4 : FSTP ST0
005b7ea6 : FLD float ptr [ESI + 0xc]
005b7ea9 : FSTP float ptr [ESP + 0x1c]
005b7ead : FLD float ptr [ESP + 0x10]
005b7eb1 : FSTP float ptr [ESI]
005b7eb3 : FLD float ptr [ESP + 0x14]
005b7eb7 : FSTP float ptr [ESI + 0x4]
005b7eba : FLD float ptr [ESP + 0x18]
005b7ebe : FSTP float ptr [ESI + 0x8]
005b7ec1 : FLD float ptr [ESP + 0x1c]
005b7ec5 : FSTP float ptr [ESI + 0xc]
005b7ec8 : JMP 0x005b7ed2
005b7eca : FSTP ST2
005b7ecc : FSTP ST2
005b7ece : FSTP ST0
005b7ed0 : FSTP ST0
005b7ed2 : MOV EAX,dword ptr [EDI + 0x9c]
005b7ed8 : INC EBP
005b7ed9 : ADD EBX,0x4c
005b7edc : CMP EBP,dword ptr [EAX + 0x1c]
005b7edf : JC 0x005b7d92
005b7ee5 : POP EBX
005b7ee6 : POP EDI
005b7ee7 : MOV EAX,ESI
005b7ee9 : POP ESI
005b7eea : POP EBP
005b7eeb : ADD ESP,0x30
005b7eee : RET 0x8
