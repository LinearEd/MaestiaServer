PROGRAM  : Maestia.exe
FUNCTION : FUN_00a78d60
ENTRY    : 00a78d60
BODY     : [[00a78d60, 00a78f11]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a78d60(int param_1)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int *in_ECX;
  undefined1 local_38 [28];
  undefined1 local_1c [12];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar3 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5ff6e;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (param_1 != 0) {
    iVar1 = *DAT_00da9894;
    if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar1 + 0x114) + 4))
                (*(int **)(iVar1 + 0x114),"OtherCharInfoParamSet","%s,%d,%d","OtherCharacterInfo",0,
                 0,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    }
    if ((*(int *)(DAT_0172491c + 0x17c) != 0) && (iVar3 == *(int *)(DAT_0172491c + 0x17c))) {
      FUN_00406460(L"IDS_PLAYERPREIVEW_MYCHAR_NONOPEN");
      local_8 = 0;
      piVar2 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar4 = FUN_0081d120(local_38);
      local_8._0_1_ = 1;
      (**(code **)(*piVar2 + 0x44))(uVar4,3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
    if ((*(int *)(DAT_0172491c + 0x90) != 0) &&
       (*(int *)(*(int *)(DAT_0172491c + 0x90) + 0x110) != 0)) {
      FUN_007c8800(5,1);
      *(undefined1 *)(in_ECX + 0x26a) = 1;
    }
    uVar4 = DAT_00da93ec;
    in_ECX[0x275] = *(int *)(iVar3 + 4);
    FUN_00a2ae50(uVar4);
    FUN_00a78a50(iVar3);
    (**(code **)(*in_ECX + 0x18))(0,300);
    FUN_00428480(in_ECX + 0x276,&param_1);
    if (param_1 == in_ECX[0x277]) {
      FUN_00428320(in_ECX + 0x276,local_1c,iVar3 + 0xc);
      if ((*(int *)(*DAT_00da9894 + 0x140) != 0) &&
         (iVar3 = *(int *)(*(int *)(*DAT_00da9894 + 0x140) + 0x38), iVar3 != 0)) {
        *(int *)(iVar3 + 0x95c) = *(int *)(iVar3 + 0x95c) + 1;
        (**(code **)(*(int *)(iVar3 + 0x38) + 4))(0x1f,*(undefined4 *)(iVar3 + 0x95c));
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a78d60 : PUSH EBP
00a78d61 : MOV EBP,ESP
00a78d63 : PUSH -0x1
00a78d65 : PUSH 0xb5ff6e
00a78d6a : MOV EAX,FS:[0x0]
00a78d70 : PUSH EAX
00a78d71 : SUB ESP,0x48
00a78d74 : PUSH EBX
00a78d75 : PUSH ESI
00a78d76 : PUSH EDI
00a78d77 : MOV EAX,[0x00d66fa0]
00a78d7c : XOR EAX,EBP
00a78d7e : PUSH EAX
00a78d7f : LEA EAX,[EBP + -0xc]
00a78d82 : MOV FS:[0x0],EAX
00a78d88 : MOV EBX,dword ptr [EBP + 0x8]
00a78d8b : MOV EDI,ECX
00a78d8d : TEST EBX,EBX
00a78d8f : JZ 0x00a78efe
00a78d95 : MOV EAX,[0x00da9894]
00a78d9a : MOV EAX,dword ptr [EAX]
00a78d9c : TEST EAX,EAX
00a78d9e : JZ 0x00a78dcd
00a78da0 : CMP dword ptr [EAX + 0x114],0x0
00a78da7 : JZ 0x00a78dcd
00a78da9 : MOV EAX,dword ptr [EAX + 0x114]
00a78daf : MOV ECX,dword ptr [EAX]
00a78db1 : MOV EDX,dword ptr [ECX + 0x4]
00a78db4 : PUSH 0x0
00a78db6 : PUSH 0x0
00a78db8 : PUSH 0xc504e4
00a78dbd : PUSH 0xc504f8
00a78dc2 : PUSH 0xc50504
00a78dc7 : PUSH EAX
00a78dc8 : CALL EDX
00a78dca : ADD ESP,0x18
00a78dcd : MOV ECX,dword ptr [0x0172491c]
00a78dd3 : MOV EAX,dword ptr [ECX + 0x17c]
00a78dd9 : TEST EAX,EAX
00a78ddb : JZ 0x00a78e52
00a78ddd : CMP EBX,EAX
00a78ddf : JNZ 0x00a78e52
00a78de1 : PUSH 0xc50520
00a78de6 : LEA ECX,[EBP + -0x34]
00a78de9 : CALL 0x00406460
00a78dee : MOV dword ptr [EBP + -0x4],0x0
00a78df5 : MOV EAX,[0x00da9894]
00a78dfa : MOV EAX,dword ptr [EAX]
00a78dfc : MOV ESI,dword ptr [EAX + 0x1a8]
00a78e02 : LEA ECX,[EBP + -0x34]
00a78e05 : PUSH ECX
00a78e06 : MOV ECX,dword ptr [0x0172491c]
00a78e0c : LEA EDI,[EBP + -0x50]
00a78e0f : CALL 0x0081d120
00a78e14 : MOV byte ptr [EBP + -0x4],0x1
00a78e18 : MOV EDX,dword ptr [ESI]
00a78e1a : PUSH 0x3
00a78e1c : PUSH EAX
00a78e1d : MOV EAX,dword ptr [EDX + 0x44]
00a78e20 : MOV ECX,ESI
00a78e22 : CALL EAX
00a78e24 : MOV byte ptr [EBP + -0x4],0x0
00a78e28 : MOV ECX,EDI
00a78e2a : CALL 0x00406560
00a78e2f : MOV dword ptr [EBP + -0x4],0xffffffff
00a78e36 : LEA ECX,[EBP + -0x34]
00a78e39 : CALL 0x00406560
00a78e3e : MOV ECX,dword ptr [EBP + -0xc]
00a78e41 : MOV dword ptr FS:[0x0],ECX
00a78e48 : POP ECX
00a78e49 : POP EDI
00a78e4a : POP ESI
00a78e4b : POP EBX
00a78e4c : MOV ESP,EBP
00a78e4e : POP EBP
00a78e4f : RET 0x4
00a78e52 : MOV EAX,dword ptr [ECX + 0x90]
00a78e58 : TEST EAX,EAX
00a78e5a : JZ 0x00a78e78
00a78e5c : MOV EAX,dword ptr [EAX + 0x110]
00a78e62 : TEST EAX,EAX
00a78e64 : JZ 0x00a78e78
00a78e66 : PUSH 0x1
00a78e68 : PUSH 0x5
00a78e6a : MOV ESI,EAX
00a78e6c : CALL 0x007c8800
00a78e71 : MOV byte ptr [EDI + 0x9a8],0x1
00a78e78 : MOV EDX,dword ptr [0x00da93ec]
00a78e7e : MOV ECX,dword ptr [EBX + 0x4]
00a78e81 : PUSH EDX
00a78e82 : MOV dword ptr [EDI + 0x9d4],ECX
00a78e88 : CALL 0x00a2ae50
00a78e8d : PUSH EBX
00a78e8e : CALL 0x00a78a50
00a78e93 : MOV EAX,dword ptr [EDI]
00a78e95 : MOV EDX,dword ptr [EAX + 0x18]
00a78e98 : PUSH 0x12c
00a78e9d : PUSH 0x0
00a78e9f : MOV ECX,EDI
00a78ea1 : CALL EDX
00a78ea3 : LEA EAX,[EBP + 0x8]
00a78ea6 : LEA ESI,[EBX + 0xc]
00a78ea9 : PUSH EAX
00a78eaa : LEA EBX,[EDI + 0x9d8]
00a78eb0 : PUSH EBX
00a78eb1 : CALL 0x00428480
00a78eb6 : MOV ECX,dword ptr [EBP + 0x8]
00a78eb9 : CMP ECX,dword ptr [EDI + 0x9dc]
00a78ebf : JNZ 0x00a78efe
00a78ec1 : PUSH ESI
00a78ec2 : LEA EDX,[EBP + -0x18]
00a78ec5 : PUSH EDX
00a78ec6 : PUSH EBX
00a78ec7 : CALL 0x00428320
00a78ecc : MOV EAX,[0x00da9894]
00a78ed1 : MOV ECX,dword ptr [EAX]
00a78ed3 : MOV EAX,dword ptr [ECX + 0x140]
00a78ed9 : TEST EAX,EAX
00a78edb : JZ 0x00a78efe
00a78edd : MOV EAX,dword ptr [EAX + 0x38]
00a78ee0 : TEST EAX,EAX
00a78ee2 : JZ 0x00a78efe
00a78ee4 : INC dword ptr [EAX + 0x95c]
00a78eea : MOV EDX,dword ptr [EAX + 0x38]
00a78eed : LEA ECX,[EAX + 0x38]
00a78ef0 : MOV EAX,dword ptr [ECX + 0x924]
00a78ef6 : PUSH EAX
00a78ef7 : MOV EAX,dword ptr [EDX + 0x4]
00a78efa : PUSH 0x1f
00a78efc : CALL EAX
00a78efe : MOV ECX,dword ptr [EBP + -0xc]
00a78f01 : MOV dword ptr FS:[0x0],ECX
00a78f08 : POP ECX
00a78f09 : POP EDI
00a78f0a : POP ESI
00a78f0b : POP EBX
00a78f0c : MOV ESP,EBP
00a78f0e : POP EBP
00a78f0f : RET 0x4
