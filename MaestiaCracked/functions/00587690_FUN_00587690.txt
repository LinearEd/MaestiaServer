PROGRAM  : Maestia.exe
FUNCTION : FUN_00587690
ENTRY    : 00587690
BODY     : [[00587690, 005878e9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00587690(int *param_1,int param_2,int param_3)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 in_stack_00000020;
  undefined4 in_stack_00000024;
  int *local_14c;
  int local_148;
  int local_140 [80];
  
  if ((uint)(param_3 - param_2) < 2) {
    FUN_00586dd0(in_stack_00000020,in_stack_00000024);
    FUN_00515cf0(in_stack_00000020);
    return;
  }
  local_14c = local_140;
  local_148 = param_3;
  do {
    while( true ) {
      iVar6 = param_2 + 1;
      iVar5 = param_2;
      if (local_148 - param_2 < 10) break;
      iVar5 = *param_1;
      uVar2 = *(undefined4 *)(iVar5 + param_2 * 4);
      iVar4 = (local_148 - param_2) / 2 + param_2;
      *(undefined4 *)(iVar5 + param_2 * 4) = *(undefined4 *)(iVar5 + iVar4 * 4);
      *(undefined4 *)(iVar5 + iVar4 * 4) = uVar2;
      iVar4 = local_148 + -1;
      iVar5 = FUN_00586660(*(undefined4 *)(*param_1 + -4 + local_148 * 4),
                           *(undefined4 *)(*param_1 + iVar6 * 4));
      if (iVar5 < 0) {
        iVar5 = *param_1;
        uVar2 = *(undefined4 *)(iVar5 + iVar4 * 4);
        *(undefined4 *)(iVar5 + iVar4 * 4) = *(undefined4 *)(iVar5 + iVar6 * 4);
        *(undefined4 *)(iVar5 + iVar6 * 4) = uVar2;
      }
      iVar5 = FUN_00586660(*(undefined4 *)(*param_1 + param_2 * 4),
                           *(undefined4 *)(*param_1 + iVar6 * 4));
      if (iVar5 < 0) {
        iVar5 = *param_1;
        uVar2 = *(undefined4 *)(iVar5 + param_2 * 4);
        *(undefined4 *)(iVar5 + param_2 * 4) = *(undefined4 *)(iVar5 + iVar6 * 4);
        *(undefined4 *)(iVar5 + iVar6 * 4) = uVar2;
      }
      iVar5 = FUN_00586660(*(undefined4 *)(*param_1 + iVar4 * 4),
                           *(undefined4 *)(*param_1 + param_2 * 4));
      if (iVar5 < 0) {
        iVar5 = *param_1;
        uVar2 = *(undefined4 *)(iVar5 + iVar4 * 4);
        *(undefined4 *)(iVar5 + iVar4 * 4) = *(undefined4 *)(iVar5 + param_2 * 4);
        *(undefined4 *)(iVar5 + param_2 * 4) = uVar2;
      }
      while( true ) {
        do {
          iVar5 = iVar6 * 4;
          iVar6 = iVar6 + 1;
          iVar5 = FUN_00586660(*(undefined4 *)(*param_1 + 4 + iVar5),
                               *(undefined4 *)(*param_1 + param_2 * 4));
        } while (iVar5 < 0);
        do {
          iVar5 = iVar4 * 4;
          iVar4 = iVar4 + -1;
          iVar5 = FUN_00586660(*(undefined4 *)(*param_1 + param_2 * 4),
                               *(undefined4 *)(*param_1 + -4 + iVar5));
        } while (iVar5 < 0);
        iVar5 = *param_1;
        uVar2 = *(undefined4 *)(iVar5 + iVar4 * 4);
        if (iVar4 < iVar6) break;
        uVar3 = *(undefined4 *)(iVar5 + iVar6 * 4);
        *(undefined4 *)(iVar5 + iVar6 * 4) = uVar2;
        *(undefined4 *)(iVar5 + iVar4 * 4) = uVar3;
      }
      uVar3 = *(undefined4 *)(iVar5 + param_2 * 4);
      *(undefined4 *)(iVar5 + param_2 * 4) = uVar2;
      *(undefined4 *)(iVar5 + iVar4 * 4) = uVar3;
      if (local_148 - iVar6 < iVar4 - param_2) {
        *local_14c = param_2;
        local_14c[1] = iVar4;
        param_2 = iVar6;
        local_14c = local_14c + 2;
      }
      else {
        *local_14c = iVar6;
        local_14c[1] = local_148;
        local_14c = local_14c + 2;
        local_148 = iVar4;
      }
    }
    while (iVar4 = iVar6, iVar4 < local_148) {
      iVar6 = FUN_00586660(*(undefined4 *)(*param_1 + iVar5 * 4 + 4),
                           *(undefined4 *)(*param_1 + iVar5 * 4));
      while (iVar6 < 0) {
        iVar6 = *param_1;
        uVar2 = *(undefined4 *)(iVar6 + 4 + iVar5 * 4);
        puVar1 = (undefined4 *)(iVar6 + iVar5 * 4);
        puVar1[1] = *(undefined4 *)(iVar6 + iVar5 * 4);
        *puVar1 = uVar2;
        if (iVar5 == param_2) break;
        iVar5 = iVar5 + -1;
        iVar6 = FUN_00586660(*(undefined4 *)(*param_1 + iVar5 * 4 + 4),
                             *(undefined4 *)(*param_1 + iVar5 * 4));
      }
      iVar5 = iVar4;
      iVar6 = iVar4 + 1;
    }
    if (local_14c <= local_140) {
      FUN_00586dd0(in_stack_00000020,in_stack_00000024);
      FUN_00515cf0(in_stack_00000020);
      return;
    }
    param_2 = local_14c[-2];
    local_148 = local_14c[-1];
    local_14c = local_14c + -2;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
00587690 : MOV EAX,dword ptr [ESP + 0xc]
00587694 : SUB ESP,0x14c
0058769a : PUSH EBP
0058769b : MOV EBP,dword ptr [ESP + 0x158]
005876a2 : MOV ECX,EAX
005876a4 : SUB ECX,EBP
005876a6 : CMP ECX,0x2
005876a9 : JNC 0x005876d8
005876ab : MOV EDX,dword ptr [ESP + 0x174]
005876b2 : MOV EAX,dword ptr [ESP + 0x170]
005876b9 : PUSH EDX
005876ba : PUSH EAX
005876bb : CALL 0x00586dd0
005876c0 : MOV ECX,dword ptr [ESP + 0x178]
005876c7 : ADD ESP,0x8
005876ca : PUSH ECX
005876cb : CALL 0x00515cf0
005876d0 : POP EBP
005876d1 : ADD ESP,0x14c
005876d7 : RET
005876d8 : PUSH EBX
005876d9 : PUSH ESI
005876da : MOV ESI,dword ptr [ESP + 0x15c]
005876e1 : PUSH EDI
005876e2 : LEA ECX,[ESP + 0x1c]
005876e6 : MOV dword ptr [ESP + 0x14],EAX
005876ea : MOV dword ptr [ESP + 0x10],ECX
005876ee : MOV EDI,EDI
005876f0 : MOV EDX,dword ptr [ESP + 0x14]
005876f4 : MOV EAX,EDX
005876f6 : SUB EAX,EBP
005876f8 : CMP EAX,0x9
005876fb : LEA EBX,[EBP + 0x1]
005876fe : JLE 0x00587841
00587704 : MOV ECX,dword ptr [ESI]
00587706 : CDQ
00587707 : SUB EAX,EDX
00587709 : MOV EDX,dword ptr [ECX + EBP*0x4]
0058770c : SAR EAX,0x1
0058770e : ADD EAX,EBP
00587710 : MOV EDI,dword ptr [ECX + EAX*0x4]
00587713 : LEA EAX,[ECX + EAX*0x4]
00587716 : MOV dword ptr [ECX + EBP*0x4],EDI
00587719 : MOV EDI,dword ptr [ESP + 0x14]
0058771d : MOV dword ptr [EAX],EDX
0058771f : MOV EAX,dword ptr [ESI]
00587721 : MOV ECX,dword ptr [EAX + EBX*0x4]
00587724 : MOV EAX,dword ptr [EAX + EDI*0x4 + -0x4]
00587728 : DEC EDI
00587729 : PUSH ECX
0058772a : PUSH EAX
0058772b : LEA ECX,[ESP + 0x174]
00587732 : CALL 0x00586660
00587737 : TEST EAX,EAX
00587739 : JGE 0x00587749
0058773b : MOV EAX,dword ptr [ESI]
0058773d : MOV EDX,dword ptr [EAX + EBX*0x4]
00587740 : MOV ECX,dword ptr [EAX + EDI*0x4]
00587743 : MOV dword ptr [EAX + EDI*0x4],EDX
00587746 : MOV dword ptr [EAX + EBX*0x4],ECX
00587749 : MOV EAX,dword ptr [ESI]
0058774b : MOV ECX,dword ptr [EAX + EBX*0x4]
0058774e : MOV EAX,dword ptr [EAX + EBP*0x4]
00587751 : PUSH ECX
00587752 : PUSH EAX
00587753 : LEA ECX,[ESP + 0x174]
0058775a : CALL 0x00586660
0058775f : TEST EAX,EAX
00587761 : JGE 0x00587775
00587763 : MOV EAX,dword ptr [ESI]
00587765 : MOV ECX,dword ptr [EAX + EBP*0x4]
00587768 : MOV EDX,dword ptr [EAX + EBX*0x4]
0058776b : MOV dword ptr [EAX + EBP*0x4],EDX
0058776e : MOV dword ptr [ESP + 0x18],ECX
00587772 : MOV dword ptr [EAX + EBX*0x4],ECX
00587775 : MOV EAX,dword ptr [ESI]
00587777 : MOV ECX,dword ptr [EAX + EBP*0x4]
0058777a : MOV EAX,dword ptr [EAX + EDI*0x4]
0058777d : PUSH ECX
0058777e : PUSH EAX
0058777f : LEA ECX,[ESP + 0x174]
00587786 : CALL 0x00586660
0058778b : TEST EAX,EAX
0058778d : JGE 0x005877a0
0058778f : MOV EAX,dword ptr [ESI]
00587791 : MOV EDX,dword ptr [EAX + EBP*0x4]
00587794 : MOV ECX,dword ptr [EAX + EDI*0x4]
00587797 : MOV dword ptr [EAX + EDI*0x4],EDX
0058779a : MOV dword ptr [EAX + EBP*0x4],ECX
0058779d : LEA ECX,[ECX]
005877a0 : MOV EAX,dword ptr [ESI]
005877a2 : MOV ECX,dword ptr [EAX + EBP*0x4]
005877a5 : MOV EAX,dword ptr [EAX + EBX*0x4 + 0x4]
005877a9 : INC EBX
005877aa : PUSH ECX
005877ab : PUSH EAX
005877ac : LEA ECX,[ESP + 0x174]
005877b3 : CALL 0x00586660
005877b8 : TEST EAX,EAX
005877ba : JL 0x005877a0
005877bc : LEA ESP,[ESP]
005877c0 : MOV EAX,dword ptr [ESI]
005877c2 : MOV ECX,dword ptr [EAX + EDI*0x4 + -0x4]
005877c6 : MOV EAX,dword ptr [EAX + EBP*0x4]
005877c9 : DEC EDI
005877ca : PUSH ECX
005877cb : PUSH EAX
005877cc : LEA ECX,[ESP + 0x174]
005877d3 : CALL 0x00586660
005877d8 : TEST EAX,EAX
005877da : JL 0x005877c0
005877dc : CMP EBX,EDI
005877de : MOV EAX,dword ptr [ESI]
005877e0 : MOV EDX,dword ptr [EAX + EDI*0x4]
005877e3 : JG 0x005877f0
005877e5 : MOV ECX,dword ptr [EAX + EBX*0x4]
005877e8 : MOV dword ptr [EAX + EBX*0x4],EDX
005877eb : MOV dword ptr [EAX + EDI*0x4],ECX
005877ee : JMP 0x005877a0
005877f0 : MOV ECX,dword ptr [EAX + EBP*0x4]
005877f3 : MOV dword ptr [EAX + EBP*0x4],EDX
005877f6 : MOV dword ptr [EAX + EDI*0x4],ECX
005877f9 : MOV EAX,dword ptr [ESP + 0x14]
005877fd : MOV dword ptr [ESP + 0x18],ECX
00587801 : MOV EDX,EAX
00587803 : MOV ECX,EDI
00587805 : SUB EDX,EBX
00587807 : SUB ECX,EBP
00587809 : CMP ECX,EDX
0058780b : JLE 0x00587826
0058780d : MOV EAX,dword ptr [ESP + 0x10]
00587811 : ADD dword ptr [ESP + 0x10],0x8
00587816 : MOV ECX,dword ptr [ESP + 0x10]
0058781a : MOV dword ptr [EAX],EBP
0058781c : MOV dword ptr [EAX + 0x4],EDI
0058781f : MOV EBP,EBX
00587821 : JMP 0x005876f0
00587826 : MOV ECX,dword ptr [ESP + 0x10]
0058782a : ADD dword ptr [ESP + 0x10],0x8
0058782f : MOV dword ptr [ECX],EBX
00587831 : MOV dword ptr [ECX + 0x4],EAX
00587834 : MOV ECX,dword ptr [ESP + 0x10]
00587838 : MOV dword ptr [ESP + 0x14],EDI
0058783c : JMP 0x005876f0
00587841 : CMP EBX,EDX
00587843 : MOV EDI,EBP
00587845 : JGE 0x005878a4
00587847 : MOV EDX,dword ptr [ESI]
00587849 : MOV ECX,dword ptr [EDX + EDI*0x4]
0058784c : LEA EAX,[EDX + EDI*0x4]
0058784f : MOV EAX,dword ptr [EAX + 0x4]
00587852 : PUSH ECX
00587853 : PUSH EAX
00587854 : LEA ECX,[ESP + 0x174]
0058785b : CALL 0x00586660
00587860 : TEST EAX,EAX
00587862 : JGE 0x00587897
00587864 : MOV EAX,dword ptr [ESI]
00587866 : MOV EDX,dword ptr [EAX + EDI*0x4]
00587869 : MOV ECX,dword ptr [EAX + EDI*0x4 + 0x4]
0058786d : LEA EAX,[EAX + EDI*0x4]
00587870 : MOV dword ptr [EAX + 0x4],EDX
00587873 : MOV dword ptr [EAX],ECX
00587875 : CMP EDI,EBP
00587877 : JZ 0x00587897
00587879 : MOV EAX,dword ptr [ESI]
0058787b : DEC EDI
0058787c : MOV ECX,dword ptr [EAX + EDI*0x4]
0058787f : LEA EAX,[EAX + EDI*0x4]
00587882 : MOV EAX,dword ptr [EAX + 0x4]
00587885 : PUSH ECX
00587886 : PUSH EAX
00587887 : LEA ECX,[ESP + 0x174]
0058788e : CALL 0x00586660
00587893 : TEST EAX,EAX
00587895 : JL 0x00587864
00587897 : MOV EDI,EBX
00587899 : INC EBX
0058789a : CMP EBX,dword ptr [ESP + 0x14]
0058789e : JL 0x00587847
005878a0 : MOV ECX,dword ptr [ESP + 0x10]
005878a4 : LEA EDX,[ESP + 0x1c]
005878a8 : CMP ECX,EDX
005878aa : JBE 0x005878ba
005878ac : MOV EBP,dword ptr [ECX + -0x8]
005878af : MOV EAX,dword ptr [ECX + -0x4]
005878b2 : SUB ECX,0x8
005878b5 : JMP 0x005876e6
005878ba : MOV ECX,dword ptr [ESP + 0x180]
005878c1 : MOV EDX,dword ptr [ESP + 0x17c]
005878c8 : PUSH ECX
005878c9 : PUSH EDX
005878ca : CALL 0x00586dd0
005878cf : MOV EAX,dword ptr [ESP + 0x184]
005878d6 : ADD ESP,0x8
005878d9 : PUSH EAX
005878da : CALL 0x00515cf0
005878df : POP EDI
005878e0 : POP ESI
005878e1 : POP EBX
005878e2 : POP EBP
005878e3 : ADD ESP,0x14c
005878e9 : RET
