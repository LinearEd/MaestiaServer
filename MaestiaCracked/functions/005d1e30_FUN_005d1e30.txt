PROGRAM  : Maestia.exe
FUNCTION : FUN_005d1e30
ENTRY    : 005d1e30
BODY     : [[005d1e30, 005d20c1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d1e30(uint param_1)

{
  int *piVar1;
  longlong lVar2;
  uint uVar3;
  int iVar4;
  undefined4 *puVar5;
  int iVar6;
  undefined2 in_FPUControlWord;
  float10 fVar7;
  undefined1 *puVar8;
  undefined1 *puStack_38;
  int iStack_34;
  longlong *plStack_30;
  undefined1 *puStack_2c;
  undefined4 *puStack_28;
  longlong lStack_18;
  undefined1 auStack_10 [4];
  undefined1 auStack_c [12];
  
  uVar3 = param_1;
  if (*(int *)(param_1 + 8) != 0) {
    puStack_28 = (undefined4 *)0x5d1e4a;
    iVar4 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar4 == 0x28) {
      iVar4 = *(int *)(uVar3 + 8);
      if (iVar4 == 0) {
        puVar5 = (undefined4 *)0x0;
      }
      else {
        puVar5 = (undefined4 *)(iVar4 + -0x10);
        if (puVar5 != (undefined4 *)0x0) {
          *(uint *)(iVar4 + -8) = *(int *)(iVar4 + -8) + 1U & 0x8fffffff;
        }
      }
      goto LAB_005d1eaa;
    }
  }
  puStack_28 = (undefined4 *)0x0;
  puStack_2c = (undefined1 *)0x3c;
  plStack_30 = (longlong *)0x5d1e84;
  puVar5 = (undefined4 *)FUN_00515840();
  if (puVar5 == (undefined4 *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puStack_2c = *(undefined1 **)(uVar3 + 0x18);
    puStack_28 = (undefined4 *)0x1;
    plStack_30 = (longlong *)0x5d1e97;
    FUN_005cf200();
    *puVar5 = &PTR_LAB_00b9329c;
    puVar5[4] = &PTR_LAB_00b93248;
  }
LAB_005d1eaa:
  puStack_2c = (undefined1 *)0x5d1eb3;
  puStack_28 = puVar5;
  FUN_005271c0();
  *(undefined1 *)((int)puVar5 + 0x3b) = 0xff;
  *(undefined1 *)((int)puVar5 + 0x31) = 0x40;
  *(undefined1 *)((int)puVar5 + 0x32) = 0x40;
  *(undefined1 *)((int)puVar5 + 0x33) = 0x10;
  if (0 < *(int *)(uVar3 + 0x1c)) {
    puStack_28 = *(undefined4 **)(uVar3 + 0x18);
    puStack_2c = (undefined1 *)0x0;
    plStack_30 = (longlong *)0x5d1eda;
    FUN_00526260();
    puStack_2c = (undefined1 *)0x5d1ee1;
    fVar7 = (float10)FUN_00527730();
    param_1._2_2_ = (undefined2)((uint)(float)fVar7 >> 0x10);
    param_1 = CONCAT22(param_1._2_2_,in_FPUControlWord);
    lVar2 = (longlong)ROUND((float)fVar7 * 16.0 + 0.5);
    lStack_18._0_4_ = (uint)lVar2;
    if (0xfe < (uint)lStack_18) {
      lStack_18._0_4_ = 0xff;
    }
    *(char *)((int)puVar5 + 0x31) = (char)(uint)lStack_18;
    lStack_18 = lVar2;
    if (1 < *(int *)(uVar3 + 0x1c)) {
      puStack_28 = *(undefined4 **)(uVar3 + 0x18);
      puStack_2c = (undefined1 *)0x1;
      plStack_30 = (longlong *)0x5d1f39;
      FUN_00526260();
      puStack_2c = (undefined1 *)0x5d1f40;
      fVar7 = (float10)FUN_00527730();
      param_1._2_2_ = (undefined2)((uint)(float)fVar7 >> 0x10);
      param_1 = CONCAT22(param_1._2_2_,in_FPUControlWord);
      lVar2 = (longlong)ROUND((float)fVar7 * 16.0 + 0.5);
      lStack_18._0_4_ = (uint)lVar2;
      if (0xfe < (uint)lStack_18) {
        lStack_18._0_4_ = 0xff;
      }
      *(char *)((int)puVar5 + 0x32) = (char)(uint)lStack_18;
      lStack_18 = lVar2;
    }
  }
  iVar6 = *(int *)(uVar3 + 0x18) + 0x78;
  puStack_28 = (undefined4 *)0x0;
  puStack_2c = (undefined1 *)0x5;
  plStack_30 = (longlong *)&DAT_00b8a574;
  auStack_10[0] = 10;
  piVar1 = puVar5 + 4;
  param_1 = param_1 & 0xffffff00;
  iStack_34 = 0x5d1fb2;
  iVar4 = FUN_00525380();
  puStack_28 = &param_1;
  puStack_2c = auStack_10;
  lStack_18 = CONCAT44(lStack_18._4_4_,iVar4);
  *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
  plStack_30 = &lStack_18;
  puStack_38 = (undefined1 *)0x5d1fd2;
  iStack_34 = iVar6;
  (**(code **)(*piVar1 + 0x28))();
  puVar5 = puStack_28;
  puStack_28[2] = puStack_28[2] + -1;
  if (puVar5[2] == 0) {
    puStack_38 = (undefined1 *)0x5d1fe8;
    FUN_00525340();
  }
  puStack_38 = (undefined1 *)0x5d1ff1;
  FUN_00526bc0();
  puStack_38 = (undefined1 *)0x0;
  auStack_c[0] = 0;
  puStack_28 = (undefined4 *)FUN_00525380("blurY",5);
  puStack_38 = auStack_c;
  puStack_28[2] = puStack_28[2] + 1;
  (**(code **)(*piVar1 + 0x28))(iVar6,&puStack_28,&stack0xffffffe0);
  puVar8 = puStack_38;
  *(int *)(puStack_38 + 8) = *(int *)(puStack_38 + 8) + -1;
  if (*(int *)(puVar8 + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  plStack_30 = (longlong *)CONCAT31(plStack_30._1_3_,10);
  puStack_38 = (undefined1 *)FUN_00525380("quality",7,0);
  puVar8 = &stack0xffffffe4;
  *(int *)(puStack_38 + 8) = *(int *)(puStack_38 + 8) + 1;
  (**(code **)(*piVar1 + 0x28))(iVar6,&puStack_38,&plStack_30);
  *(int *)(puVar8 + 8) = *(int *)(puVar8 + 8) + -1;
  if (*(int *)(puVar8 + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  FUN_00503db0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005d1e30 : SUB ESP,0x18
005d1e33 : PUSH EBP
005d1e34 : PUSH ESI
005d1e35 : MOV ESI,dword ptr [ESP + 0x24]
005d1e39 : CMP dword ptr [ESI + 0x8],0x0
005d1e3d : PUSH EDI
005d1e3e : JZ 0x005d1e6f
005d1e40 : MOV ECX,dword ptr [ESI + 0x8]
005d1e43 : MOV EAX,dword ptr [ECX]
005d1e45 : MOV EDX,dword ptr [EAX + 0x8]
005d1e48 : CALL EDX
005d1e4a : CMP EAX,0x28
005d1e4d : JNZ 0x005d1e6f
005d1e4f : MOV EAX,dword ptr [ESI + 0x8]
005d1e52 : TEST EAX,EAX
005d1e54 : JZ 0x005d1e6b
005d1e56 : LEA EBP,[EAX + -0x10]
005d1e59 : TEST EBP,EBP
005d1e5b : JZ 0x005d1eaa
005d1e5d : MOV EAX,dword ptr [EBP + 0x8]
005d1e60 : INC EAX
005d1e61 : AND EAX,0x8fffffff
005d1e66 : MOV dword ptr [EBP + 0x8],EAX
005d1e69 : JMP 0x005d1eaa
005d1e6b : XOR EBP,EBP
005d1e6d : JMP 0x005d1eaa
005d1e6f : MOV ECX,dword ptr [ESI + 0x18]
005d1e72 : MOV EDX,dword ptr [ECX + 0x78]
005d1e75 : MOV ECX,dword ptr [EDX + 0x288]
005d1e7b : PUSH 0x0
005d1e7d : PUSH 0x3c
005d1e7f : CALL 0x00515840
005d1e84 : MOV EDI,EAX
005d1e86 : TEST EDI,EDI
005d1e88 : JZ 0x005d1ea6
005d1e8a : MOV EAX,dword ptr [ESI + 0x18]
005d1e8d : PUSH 0x1
005d1e8f : PUSH EAX
005d1e90 : MOV ECX,EDI
005d1e92 : CALL 0x005cf200
005d1e97 : MOV dword ptr [EDI],0xb9329c
005d1e9d : MOV dword ptr [EDI + 0x10],0xb93248
005d1ea4 : JMP 0x005d1ea8
005d1ea6 : XOR EDI,EDI
005d1ea8 : MOV EBP,EDI
005d1eaa : MOV ECX,dword ptr [ESI + 0x4]
005d1ead : PUSH EBP
005d1eae : CALL 0x005271c0
005d1eb3 : MOV AL,0x40
005d1eb5 : MOV byte ptr [EBP + 0x3b],0xff
005d1eb9 : MOV byte ptr [EBP + 0x31],AL
005d1ebc : MOV byte ptr [EBP + 0x32],AL
005d1ebf : MOV byte ptr [EBP + 0x33],0x10
005d1ec3 : CMP dword ptr [ESI + 0x1c],0x0
005d1ec7 : JLE 0x005d1f85
005d1ecd : MOV ECX,dword ptr [ESI + 0x18]
005d1ed0 : PUSH ECX
005d1ed1 : PUSH 0x0
005d1ed3 : MOV ECX,ESI
005d1ed5 : CALL 0x00526260
005d1eda : MOV ECX,EAX
005d1edc : CALL 0x00527730
005d1ee1 : FSTP float ptr [ESP + 0x28]
005d1ee5 : FLD float ptr [ESP + 0x28]
005d1ee9 : FMUL double ptr [0x00b86b68]
005d1eef : FNSTCW word ptr [ESP + 0x28]
005d1ef3 : MOVZX EAX,word ptr [ESP + 0x28]
005d1ef8 : FADD double ptr [0x00cdf120]
005d1efe : OR EAX,0xc00
005d1f03 : MOV dword ptr [ESP + 0xc],EAX
005d1f07 : FLDCW word ptr [ESP + 0xc]
005d1f0b : FISTP qword ptr [ESP + 0xc]
005d1f0f : MOV EAX,dword ptr [ESP + 0xc]
005d1f13 : FLDCW word ptr [ESP + 0x28]
005d1f17 : CMP EAX,0xff
005d1f1c : JC 0x005d1f23
005d1f1e : MOV EAX,0xff
005d1f23 : MOV byte ptr [EBP + 0x31],AL
005d1f26 : CMP dword ptr [ESI + 0x1c],0x1
005d1f2a : JLE 0x005d1f85
005d1f2c : MOV EDX,dword ptr [ESI + 0x18]
005d1f2f : PUSH EDX
005d1f30 : PUSH 0x1
005d1f32 : MOV ECX,ESI
005d1f34 : CALL 0x00526260
005d1f39 : MOV ECX,EAX
005d1f3b : CALL 0x00527730
005d1f40 : FSTP float ptr [ESP + 0x28]
005d1f44 : FLD float ptr [ESP + 0x28]
005d1f48 : FMUL double ptr [0x00b86b68]
005d1f4e : FNSTCW word ptr [ESP + 0x28]
005d1f52 : MOVZX EAX,word ptr [ESP + 0x28]
005d1f57 : FADD double ptr [0x00cdf120]
005d1f5d : OR EAX,0xc00
005d1f62 : MOV dword ptr [ESP + 0xc],EAX
005d1f66 : FLDCW word ptr [ESP + 0xc]
005d1f6a : FISTP qword ptr [ESP + 0xc]
005d1f6e : MOV EAX,dword ptr [ESP + 0xc]
005d1f72 : FLDCW word ptr [ESP + 0x28]
005d1f76 : CMP EAX,0xff
005d1f7b : JC 0x005d1f82
005d1f7d : MOV EAX,0xff
005d1f82 : MOV byte ptr [EBP + 0x32],AL
005d1f85 : MOV ESI,dword ptr [ESI + 0x18]
005d1f88 : MOV EAX,dword ptr [ESI + 0x78]
005d1f8b : ADD ESI,0x78
005d1f8e : PUSH 0x0
005d1f90 : ADD EAX,0x8
005d1f93 : PUSH 0x5
005d1f95 : PUSH 0xb8a574
005d1f9a : LEA ECX,[EAX + 0x24c]
005d1fa0 : MOV byte ptr [ESP + 0x20],0xa
005d1fa5 : LEA EDI,[EBP + 0x10]
005d1fa8 : MOV byte ptr [ESP + 0x34],0x0
005d1fad : CALL 0x00525380
005d1fb2 : LEA ECX,[ESP + 0x28]
005d1fb6 : PUSH ECX
005d1fb7 : LEA EDX,[ESP + 0x18]
005d1fbb : PUSH EDX
005d1fbc : MOV dword ptr [ESP + 0x14],EAX
005d1fc0 : INC dword ptr [EAX + 0x8]
005d1fc3 : MOV EAX,dword ptr [EDI]
005d1fc5 : MOV EDX,dword ptr [EAX + 0x28]
005d1fc8 : LEA ECX,[ESP + 0x14]
005d1fcc : PUSH ECX
005d1fcd : PUSH ESI
005d1fce : MOV ECX,EDI
005d1fd0 : CALL EDX
005d1fd2 : MOV EAX,dword ptr [ESP + 0xc]
005d1fd6 : DEC dword ptr [EAX + 0x8]
005d1fd9 : MOV ECX,EAX
005d1fdb : ADD EAX,0x8
005d1fde : CMP dword ptr [EAX],0x0
005d1fe1 : JNZ 0x005d1fe8
005d1fe3 : CALL 0x00525340
005d1fe8 : LEA ECX,[ESP + 0x14]
005d1fec : CALL 0x00526bc0
005d1ff1 : MOV EAX,dword ptr [ESI]
005d1ff3 : PUSH 0x0
005d1ff5 : ADD EAX,0x8
005d1ff8 : PUSH 0x5
005d1ffa : PUSH 0xb8a56c
005d1fff : LEA ECX,[EAX + 0x24c]
005d2005 : MOV byte ptr [ESP + 0x20],0xa
005d200a : MOV byte ptr [ESP + 0x34],0x0
005d200f : CALL 0x00525380
005d2014 : LEA ECX,[ESP + 0x28]
005d2018 : PUSH ECX
005d2019 : LEA EDX,[ESP + 0x18]
005d201d : PUSH EDX
005d201e : MOV dword ptr [ESP + 0x14],EAX
005d2022 : INC dword ptr [EAX + 0x8]
005d2025 : MOV EAX,dword ptr [EDI]
005d2027 : MOV EDX,dword ptr [EAX + 0x28]
005d202a : LEA ECX,[ESP + 0x14]
005d202e : PUSH ECX
005d202f : PUSH ESI
005d2030 : MOV ECX,EDI
005d2032 : CALL EDX
005d2034 : MOV EAX,dword ptr [ESP + 0xc]
005d2038 : DEC dword ptr [EAX + 0x8]
005d203b : MOV ECX,EAX
005d203d : ADD EAX,0x8
005d2040 : CMP dword ptr [EAX],0x0
005d2043 : JNZ 0x005d204a
005d2045 : CALL 0x00525340
005d204a : LEA ECX,[ESP + 0x14]
005d204e : CALL 0x00526bc0
005d2053 : MOV EAX,dword ptr [ESI]
005d2055 : PUSH 0x0
005d2057 : ADD EAX,0x8
005d205a : PUSH 0x7
005d205c : PUSH 0xb92fa0
005d2061 : LEA ECX,[EAX + 0x24c]
005d2067 : MOV byte ptr [ESP + 0x20],0xa
005d206c : MOV byte ptr [ESP + 0x34],0x0
005d2071 : CALL 0x00525380
005d2076 : LEA ECX,[ESP + 0x28]
005d207a : PUSH ECX
005d207b : LEA EDX,[ESP + 0x18]
005d207f : PUSH EDX
005d2080 : MOV dword ptr [ESP + 0x14],EAX
005d2084 : INC dword ptr [EAX + 0x8]
005d2087 : MOV EAX,dword ptr [EDI]
005d2089 : MOV EDX,dword ptr [EAX + 0x28]
005d208c : LEA ECX,[ESP + 0x14]
005d2090 : PUSH ECX
005d2091 : PUSH ESI
005d2092 : MOV ECX,EDI
005d2094 : CALL EDX
005d2096 : MOV EAX,dword ptr [ESP + 0xc]
005d209a : DEC dword ptr [EAX + 0x8]
005d209d : MOV ECX,EAX
005d209f : ADD EAX,0x8
005d20a2 : CMP dword ptr [EAX],0x0
005d20a5 : JNZ 0x005d20ac
005d20a7 : CALL 0x00525340
005d20ac : LEA ECX,[ESP + 0x14]
005d20b0 : CALL 0x00526bc0
005d20b5 : POP EDI
005d20b6 : POP ESI
005d20b7 : MOV ECX,EBP
005d20b9 : POP EBP
005d20ba : ADD ESP,0x18
005d20bd : JMP 0x00503db0
