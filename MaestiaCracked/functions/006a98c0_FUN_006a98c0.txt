PROGRAM  : Maestia.exe
FUNCTION : FUN_006a98c0
ENTRY    : 006a98c0
BODY     : [[006a98c0, 006a99d2]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a98c0(char param_1)

{
  undefined4 uVar1;
  byte bVar2;
  ushort uVar3;
  int iVar4;
  int in_ECX;
  int *unaff_ESI;
  int unaff_EDI;
  int local_4;
  
  uVar1 = *(undefined4 *)(unaff_EDI + 0x1c);
  unaff_ESI[1] = 0;
  unaff_ESI[2] = 0;
  unaff_ESI[3] = 0;
  unaff_ESI[4] = 0;
  unaff_ESI[5] = 0;
  unaff_ESI[6] = 0;
  unaff_ESI[7] = 0;
  *unaff_ESI = unaff_EDI;
  iVar4 = FUN_00687830();
  unaff_ESI[1] = iVar4;
  uVar3 = FUN_00687a80();
  local_4 = in_ECX;
  if (in_ECX != 0) goto LAB_006a99b7;
  if (uVar3 == 0) {
    return 0;
  }
  bVar2 = FUN_00687a20();
  if ((byte)(bVar2 - 1) < 4) {
    *(byte *)(unaff_ESI + 3) = bVar2;
    unaff_ESI[2] = (uint)uVar3;
    unaff_ESI[4] = (uVar3 + 1) * (uint)bVar2 + 3 + unaff_ESI[1];
    local_4 = FUN_00687800();
    if (local_4 != 0) goto LAB_006a99b7;
    iVar4 = FUN_006a9870();
    if (iVar4 != 0) {
      unaff_ESI[5] = iVar4 + -1;
      if (param_1 == '\0') {
        local_4 = FUN_00687800();
        if (local_4 == 0) {
          return 0;
        }
      }
      else {
        local_4 = FUN_0068a1f0();
        if (local_4 == 0) {
          return 0;
        }
      }
      goto LAB_006a99b7;
    }
  }
  local_4 = 8;
LAB_006a99b7:
  FUN_00687f30(uVar1,unaff_ESI[6]);
  unaff_ESI[6] = 0;
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
006a98c0 : PUSH ECX
006a98c1 : XOR EAX,EAX
006a98c3 : PUSH EBX
006a98c4 : PUSH EBP
006a98c5 : MOV EBP,dword ptr [EDI + 0x1c]
006a98c8 : MOV dword ptr [ESI + 0x4],EAX
006a98cb : MOV dword ptr [ESI + 0x8],EAX
006a98ce : MOV dword ptr [ESI + 0xc],EAX
006a98d1 : MOV dword ptr [ESI + 0x10],EAX
006a98d4 : MOV dword ptr [ESI + 0x14],EAX
006a98d7 : MOV dword ptr [ESI + 0x18],EAX
006a98da : MOV dword ptr [ESI + 0x1c],EAX
006a98dd : PUSH EDI
006a98de : MOV dword ptr [ESI],EDI
006a98e0 : CALL 0x00687830
006a98e5 : MOV dword ptr [ESI + 0x4],EAX
006a98e8 : LEA EAX,[ESP + 0xc]
006a98ec : PUSH EAX
006a98ed : PUSH EDI
006a98ee : CALL 0x00687a80
006a98f3 : MOVZX EBX,AX
006a98f6 : MOV EAX,dword ptr [ESP + 0x14]
006a98fa : ADD ESP,0xc
006a98fd : TEST EAX,EAX
006a98ff : JNZ 0x006a99b7
006a9905 : TEST BX,BX
006a9908 : JBE 0x006a99cf
006a990e : LEA ECX,[ESP + 0x8]
006a9912 : PUSH ECX
006a9913 : PUSH EDI
006a9914 : CALL 0x00687a20
006a9919 : ADD ESP,0x8
006a991c : CMP dword ptr [ESP + 0x8],0x0
006a9921 : JNZ 0x006a99b7
006a9927 : MOV DL,AL
006a9929 : DEC DL
006a992b : CMP DL,0x3
006a992e : JA 0x006a99af
006a9930 : MOVZX ECX,BX
006a9933 : MOVZX EDX,AL
006a9936 : MOV byte ptr [ESI + 0xc],AL
006a9939 : LEA EAX,[ECX + 0x1]
006a993c : IMUL EAX,EDX
006a993f : MOV dword ptr [ESI + 0x8],ECX
006a9942 : MOV ECX,dword ptr [ESI + 0x4]
006a9945 : LEA ECX,[EAX + ECX*0x1 + 0x3]
006a9949 : SUB EAX,EDX
006a994b : PUSH EAX
006a994c : PUSH EDI
006a994d : MOV dword ptr [ESI + 0x10],ECX
006a9950 : CALL 0x00687800
006a9955 : ADD ESP,0x8
006a9958 : MOV dword ptr [ESP + 0x8],EAX
006a995c : TEST EAX,EAX
006a995e : JNZ 0x006a99b7
006a9960 : LEA EBX,[ESP + 0x8]
006a9964 : MOV EAX,ESI
006a9966 : CALL 0x006a9870
006a996b : CMP dword ptr [ESP + 0x8],0x0
006a9970 : JNZ 0x006a99b7
006a9972 : TEST EAX,EAX
006a9974 : JZ 0x006a99af
006a9976 : DEC EAX
006a9977 : CMP byte ptr [ESP + 0x10],0x0
006a997c : MOV dword ptr [ESI + 0x14],EAX
006a997f : JZ 0x006a999b
006a9981 : LEA EDX,[ESI + 0x1c]
006a9984 : PUSH EDX
006a9985 : PUSH EAX
006a9986 : PUSH EDI
006a9987 : CALL 0x0068a1f0
006a998c : ADD ESP,0xc
006a998f : MOV dword ptr [ESP + 0x8],EAX
006a9993 : TEST EAX,EAX
006a9995 : JNZ 0x006a99b7
006a9997 : POP EBP
006a9998 : POP EBX
006a9999 : POP ECX
006a999a : RET
006a999b : PUSH EAX
006a999c : PUSH EDI
006a999d : CALL 0x00687800
006a99a2 : ADD ESP,0x8
006a99a5 : MOV dword ptr [ESP + 0x8],EAX
006a99a9 : TEST EAX,EAX
006a99ab : JZ 0x006a99cf
006a99ad : JMP 0x006a99b7
006a99af : MOV dword ptr [ESP + 0x8],0x8
006a99b7 : MOV EAX,dword ptr [ESI + 0x18]
006a99ba : PUSH EAX
006a99bb : PUSH EBP
006a99bc : CALL 0x00687f30
006a99c1 : MOV EAX,dword ptr [ESP + 0x10]
006a99c5 : ADD ESP,0x8
006a99c8 : MOV dword ptr [ESI + 0x18],0x0
006a99cf : POP EBP
006a99d0 : POP EBX
006a99d1 : POP ECX
006a99d2 : RET
