PROGRAM  : Maestia.exe
FUNCTION : FUN_009efe10
ENTRY    : 009efe10
BODY     : [[009efe10, 009f0256]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009efe10(float param_1)

{
  float fVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int in_ECX;
  uint uVar6;
  int local_d0;
  float local_cc;
  longlong local_c8;
  undefined1 local_c0 [4];
  undefined2 local_bc;
  undefined4 local_ac;
  uint local_a8;
  undefined2 local_a0;
  undefined4 local_90;
  uint local_8c;
  undefined2 local_84;
  undefined4 local_74;
  uint local_70;
  undefined1 local_6c [4];
  undefined2 local_68;
  undefined4 local_58;
  uint local_54;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  iVar4 = DAT_00d7c54c;
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b24821;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff20;
  ExceptionList = &local_14;
  if (in_ECX != 0) {
    local_cc = param_1;
    FUN_004437f0(&local_cc);
    iVar4 = *(int *)(iVar4 + 0x44);
    if (local_d0 == iVar4) {
      local_d0 = 0;
    }
    else {
      local_d0 = *(int *)(local_d0 + 0x10);
    }
    local_cc = *(float *)(in_ECX + 0x10);
    FUN_004437f0(&local_cc);
    if ((uint)local_c8 == iVar4) {
      iVar4 = 0;
    }
    else {
      iVar4 = *(int *)((uint)local_c8 + 0x10);
    }
    uVar6 = *(uint *)(in_ECX + 0xbc);
    if (iVar4 != 0) {
      local_cc = 1.0;
      if (local_d0 != 0) {
        local_cc = (float)*(ushort *)(local_d0 + 0x46) * 0.0001;
      }
      iVar4 = *(int *)(iVar4 + 0x54);
      local_c8 = CONCAT44(local_c8._4_4_,iVar4);
      fVar1 = (float)iVar4;
      if (iVar4 < 0) {
        fVar1 = fVar1 + 4.2949673e+09;
      }
      if (uVar6 < 2) {
        local_c8 = (longlong)ROUND(fVar1 * local_cc + 0.01);
        uVar6 = (uint)local_c8;
      }
      FUN_00406460(L"IDS_ITEMEQUIP_PURCHASE2");
      local_c = 0;
      uVar3 = FUN_0070c2d0(uVar6,0,uVar2);
      local_c._0_1_ = 1;
      FUN_0081d120(local_50);
      local_c._0_1_ = 2;
      uVar3 = FUN_00403450(local_34,uVar3);
      local_c._0_1_ = 3;
      FUN_00405eb0(uVar3,0,0xffffffff);
      local_c = CONCAT31(local_c._1_3_,2);
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_1c = 7;
      local_20 = 0;
      local_30 = 0;
      local_c = CONCAT31(local_c._1_3_,1);
      if (7 < local_8c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8c = 7;
      local_90 = 0;
      local_a0 = 0;
      local_c = (uint)local_c._1_3_ << 8;
      if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_70 = 7;
      local_74 = 0;
      local_84 = 0;
      local_c = 0xffffffff;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_38 = 7;
      local_3c = 0;
      local_4c = 0;
      iVar4 = FUN_0081cbe0(DAT_0172491c);
      local_c = 4;
      if (*(uint *)(iVar4 + 0x18) < 8) {
        iVar4 = iVar4 + 4;
      }
      else {
        iVar4 = *(int *)(iVar4 + 4);
      }
      uVar3 = FUN_00404750(L" %s@N",iVar4);
      local_c._0_1_ = 5;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_c = CONCAT31(local_c._1_3_,4);
      if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_54 = 7;
      local_58 = 0;
      local_68 = 0;
      local_c = 0xffffffff;
      if (7 < local_a8) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_a8 = 7;
      iVar4 = (int)ABS((1.0 - local_cc) * 100.0);
      local_ac = 0;
      local_bc = 0;
      if (0 < iVar4) {
        FUN_00406460(L"IDS_APPLY_BUY_TAX");
        local_c = 6;
        iVar5 = FUN_0081d120(local_c0);
        local_c._0_1_ = 7;
        if (*(uint *)(iVar5 + 0x18) < 8) {
          iVar5 = iVar5 + 4;
        }
        else {
          iVar5 = *(int *)(iVar5 + 4);
        }
        uVar3 = FUN_00404750(iVar5,iVar4);
        local_c._0_1_ = 8;
        uVar3 = FUN_00403380(local_6c,uVar3);
        local_c._0_1_ = 9;
        FUN_00405c30(uVar3,0,0xffffffff);
        local_c._0_1_ = 8;
        FUN_00406560();
        local_c._0_1_ = 7;
        FUN_00406560();
        local_c = CONCAT31(local_c._1_3_,6);
        FUN_00406560();
        local_c = 0xffffffff;
        FUN_00406560();
      }
      FUN_00404870(&DAT_00ca4c0c,1);
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
009efe10 : PUSH EBP
009efe11 : MOV EBP,ESP
009efe13 : AND ESP,0xfffffff8
009efe16 : PUSH -0x1
009efe18 : PUSH 0xb24821
009efe1d : MOV EAX,FS:[0x0]
009efe23 : PUSH EAX
009efe24 : SUB ESP,0xc0
009efe2a : PUSH EBX
009efe2b : PUSH ESI
009efe2c : PUSH EDI
009efe2d : MOV EAX,[0x00d66fa0]
009efe32 : XOR EAX,ESP
009efe34 : PUSH EAX
009efe35 : LEA EAX,[ESP + 0xd0]
009efe3c : MOV FS:[0x0],EAX
009efe42 : MOV ESI,ECX
009efe44 : TEST ESI,ESI
009efe46 : JZ 0x009f0241
009efe4c : MOV EAX,dword ptr [EBP + 0x8]
009efe4f : MOV EBX,dword ptr [0x00d7c54c]
009efe55 : LEA ECX,[ESP + 0x18]
009efe59 : MOV dword ptr [ESP + 0x18],EAX
009efe5d : LEA EDI,[EBX + 0x40]
009efe60 : PUSH ECX
009efe61 : LEA EAX,[ESP + 0x18]
009efe65 : MOV ECX,EDI
009efe67 : CALL 0x004437f0
009efe6c : MOV EBX,dword ptr [EBX + 0x44]
009efe6f : MOV EAX,dword ptr [ESP + 0x14]
009efe73 : CMP EAX,EBX
009efe75 : JZ 0x009efe80
009efe77 : MOV EDX,dword ptr [EAX + 0x10]
009efe7a : MOV dword ptr [ESP + 0x14],EDX
009efe7e : JMP 0x009efe88
009efe80 : MOV dword ptr [ESP + 0x14],0x0
009efe88 : MOV EAX,dword ptr [ESI + 0x10]
009efe8b : LEA ECX,[ESP + 0x18]
009efe8f : MOV dword ptr [ESP + 0x18],EAX
009efe93 : PUSH ECX
009efe94 : LEA EAX,[ESP + 0x20]
009efe98 : MOV ECX,EDI
009efe9a : CALL 0x004437f0
009efe9f : MOV EAX,dword ptr [ESP + 0x1c]
009efea3 : CMP EAX,EBX
009efea5 : JZ 0x009efeac
009efea7 : MOV EAX,dword ptr [EAX + 0x10]
009efeaa : JMP 0x009efeae
009efeac : XOR EAX,EAX
009efeae : MOV EDI,dword ptr [ESI + 0xbc]
009efeb4 : MOV byte ptr [ESP + 0x13],0x0
009efeb9 : CMP EDI,0x1
009efebc : JBE 0x009efec3
009efebe : MOV byte ptr [ESP + 0x13],0x1
009efec3 : TEST EAX,EAX
009efec5 : JZ 0x009f0241
009efecb : MOV ECX,dword ptr [ESP + 0x14]
009efecf : MOVSS XMM0,dword ptr [0x00c10fc4]
009efed7 : MOVSS dword ptr [ESP + 0x18],XMM0
009efedd : TEST ECX,ECX
009efedf : JZ 0x009efef7
009efee1 : MOVZX EDX,word ptr [ECX + 0x46]
009efee5 : CVTSI2SS XMM0,EDX
009efee9 : MULSS XMM0,dword ptr [0x00cdf398]
009efef1 : MOVSS dword ptr [ESP + 0x18],XMM0
009efef7 : MOV EAX,dword ptr [EAX + 0x54]
009efefa : MOV dword ptr [ESP + 0x1c],EAX
009efefe : FILD dword ptr [ESP + 0x1c]
009eff02 : TEST EAX,EAX
009eff04 : JGE 0x009eff0c
009eff06 : FADD float ptr [0x00cdf0e0]
009eff0c : CMP byte ptr [ESP + 0x13],0x0
009eff11 : FMUL float ptr [ESP + 0x18]
009eff15 : JZ 0x009eff1b
009eff17 : FSTP ST0
009eff19 : JMP 0x009eff43
009eff1b : FADD float ptr [0x00cdf23c]
009eff21 : FNSTCW word ptr [ESP + 0x14]
009eff25 : MOVZX EAX,word ptr [ESP + 0x14]
009eff2a : OR EAX,0xc00
009eff2f : MOV dword ptr [ESP + 0x1c],EAX
009eff33 : FLDCW word ptr [ESP + 0x1c]
009eff37 : FISTP qword ptr [ESP + 0x1c]
009eff3b : MOV EDI,dword ptr [ESP + 0x1c]
009eff3f : FLDCW word ptr [ESP + 0x14]
009eff43 : PUSH 0xca4b9c
009eff48 : LEA ECX,[ESP + 0x98]
009eff4f : CALL 0x00406460
009eff54 : MOV dword ptr [ESP + 0xd8],0x0
009eff5f : PUSH 0x0
009eff61 : PUSH EDI
009eff62 : LEA ECX,[ESP + 0x64]
009eff66 : CALL 0x0070c2d0
009eff6b : ADD ESP,0x8
009eff6e : MOV EBX,EAX
009eff70 : MOV byte ptr [ESP + 0xd8],0x1
009eff78 : LEA ECX,[ESP + 0x94]
009eff7f : PUSH ECX
009eff80 : MOV ECX,dword ptr [0x0172491c]
009eff86 : LEA EDI,[ESP + 0x44]
009eff8a : CALL 0x0081d120
009eff8f : MOV byte ptr [ESP + 0xd8],0x2
009eff97 : LEA EDX,[ESP + 0xb0]
009eff9e : PUSH EBX
009eff9f : PUSH EDX
009effa0 : MOV ECX,EAX
009effa2 : CALL 0x00403450
009effa7 : ADD ESP,0x8
009effaa : MOV byte ptr [ESP + 0xd8],0x3
009effb2 : MOV ECX,dword ptr [EBP + 0xc]
009effb5 : PUSH -0x1
009effb7 : XOR ESI,ESI
009effb9 : PUSH ESI
009effba : PUSH EAX
009effbb : CALL 0x00405eb0
009effc0 : MOV byte ptr [ESP + 0xd8],0x2
009effc8 : MOV EBX,0x8
009effcd : CMP dword ptr [ESP + 0xc8],EBX
009effd4 : JC 0x009effe2
009effd6 : MOV ECX,dword ptr [ESP + 0xb4]
009effdd : CALL 0x006f04e0
009effe2 : MOV EDI,0x7
009effe7 : XOR EAX,EAX
009effe9 : MOV dword ptr [ESP + 0xc8],EDI
009efff0 : MOV dword ptr [ESP + 0xc4],ESI
009efff7 : MOV word ptr [ESP + 0xb4],AX
009effff : MOV byte ptr [ESP + 0xd8],0x1
009f0007 : CMP dword ptr [ESP + 0x58],EBX
009f000b : JC 0x009f0016
009f000d : MOV ECX,dword ptr [ESP + 0x44]
009f0011 : CALL 0x006f04e0
009f0016 : XOR ECX,ECX
009f0018 : MOV dword ptr [ESP + 0x58],EDI
009f001c : MOV dword ptr [ESP + 0x54],ESI
009f0020 : MOV word ptr [ESP + 0x44],CX
009f0025 : MOV byte ptr [ESP + 0xd8],CL
009f002c : CMP dword ptr [ESP + 0x74],EBX
009f0030 : JC 0x009f003b
009f0032 : MOV ECX,dword ptr [ESP + 0x60]
009f0036 : CALL 0x006f04e0
009f003b : XOR EDX,EDX
009f003d : MOV dword ptr [ESP + 0x74],EDI
009f0041 : MOV dword ptr [ESP + 0x70],ESI
009f0045 : MOV word ptr [ESP + 0x60],DX
009f004a : MOV dword ptr [ESP + 0xd8],0xffffffff
009f0055 : CMP dword ptr [ESP + 0xac],EBX
009f005c : JC 0x009f006a
009f005e : MOV ECX,dword ptr [ESP + 0x98]
009f0065 : CALL 0x006f04e0
009f006a : XOR EAX,EAX
009f006c : MOV dword ptr [ESP + 0xac],EDI
009f0073 : MOV dword ptr [ESP + 0xa8],ESI
009f007a : MOV word ptr [ESP + 0x98],AX
009f0082 : MOV ECX,0xca4bcc
009f0087 : CMP byte ptr [ESP + 0x13],AL
009f008b : JNZ 0x009f0092
009f008d : MOV ECX,0xca4bd0
009f0092 : MOV EDX,dword ptr [0x0172491c]
009f0098 : PUSH EDX
009f0099 : LEA ESI,[ESP + 0x28]
009f009d : CALL 0x0081cbe0
009f00a2 : MOV dword ptr [ESP + 0xd8],0x4
009f00ad : CMP dword ptr [EAX + 0x18],EBX
009f00b0 : JC 0x009f00b7
009f00b2 : MOV EAX,dword ptr [EAX + 0x4]
009f00b5 : JMP 0x009f00ba
009f00b7 : ADD EAX,0x4
009f00ba : PUSH EAX
009f00bb : PUSH 0xca4bd8
009f00c0 : LEA ESI,[ESP + 0x80]
009f00c7 : CALL 0x00404750
009f00cc : ADD ESP,0x8
009f00cf : MOV byte ptr [ESP + 0xd8],0x5
009f00d7 : MOV ECX,dword ptr [EBP + 0xc]
009f00da : PUSH -0x1
009f00dc : XOR EDI,EDI
009f00de : PUSH EDI
009f00df : PUSH EAX
009f00e0 : CALL 0x00405c30
009f00e5 : MOV byte ptr [ESP + 0xd8],0x4
009f00ed : CMP dword ptr [ESP + 0x90],EBX
009f00f4 : JC 0x009f00ff
009f00f6 : MOV ECX,dword ptr [ESP + 0x7c]
009f00fa : CALL 0x006f04e0
009f00ff : MOV ESI,0x7
009f0104 : XOR EAX,EAX
009f0106 : MOV dword ptr [ESP + 0x90],ESI
009f010d : MOV dword ptr [ESP + 0x8c],EDI
009f0114 : MOV word ptr [ESP + 0x7c],AX
009f0119 : MOV dword ptr [ESP + 0xd8],0xffffffff
009f0124 : CMP dword ptr [ESP + 0x3c],EBX
009f0128 : JC 0x009f0133
009f012a : MOV ECX,dword ptr [ESP + 0x28]
009f012e : CALL 0x006f04e0
009f0133 : MOVSS XMM0,dword ptr [0x00c10fc4]
009f013b : SUBSS XMM0,dword ptr [ESP + 0x18]
009f0141 : MULSS XMM0,dword ptr [0x00cdf230]
009f0149 : MOVSS XMM1,dword ptr [0x00cdf350]
009f0151 : MOV dword ptr [ESP + 0x3c],ESI
009f0155 : XOR ECX,ECX
009f0157 : ANDPS XMM0,XMM1
009f015a : CVTTSS2SI ESI,XMM0
009f015e : CMP ESI,EDI
009f0160 : MOV dword ptr [ESP + 0x38],EDI
009f0164 : MOV word ptr [ESP + 0x28],CX
009f0169 : JLE 0x009f0232
009f016f : PUSH 0xca4be4
009f0174 : LEA ECX,[ESP + 0x28]
009f0178 : CALL 0x00406460
009f017d : MOV dword ptr [ESP + 0xd8],0x6
009f0188 : MOV ECX,dword ptr [0x0172491c]
009f018e : LEA EDX,[ESP + 0x24]
009f0192 : PUSH EDX
009f0193 : LEA EDI,[ESP + 0x44]
009f0197 : CALL 0x0081d120
009f019c : MOV byte ptr [ESP + 0xd8],0x7
009f01a4 : CMP dword ptr [EAX + 0x18],EBX
009f01a7 : JC 0x009f01ae
009f01a9 : MOV EAX,dword ptr [EAX + 0x4]
009f01ac : JMP 0x009f01b1
009f01ae : ADD EAX,0x4
009f01b1 : PUSH ESI
009f01b2 : PUSH EAX
009f01b3 : LEA ESI,[ESP + 0x64]
009f01b7 : CALL 0x00404750
009f01bc : MOV byte ptr [ESP + 0xe0],BL
009f01c3 : PUSH EAX
009f01c4 : LEA EAX,[ESP + 0x84]
009f01cb : PUSH EAX
009f01cc : MOV EDX,0xca4c08
009f01d1 : CALL 0x00403380
009f01d6 : ADD ESP,0x10
009f01d9 : MOV byte ptr [ESP + 0xd8],0x9
009f01e1 : MOV ECX,dword ptr [EBP + 0xc]
009f01e4 : PUSH -0x1
009f01e6 : PUSH 0x0
009f01e8 : PUSH EAX
009f01e9 : CALL 0x00405c30
009f01ee : MOV byte ptr [ESP + 0xd8],BL
009f01f5 : LEA ECX,[ESP + 0x78]
009f01f9 : CALL 0x00406560
009f01fe : MOV byte ptr [ESP + 0xd8],0x7
009f0206 : MOV ECX,ESI
009f0208 : CALL 0x00406560
009f020d : MOV byte ptr [ESP + 0xd8],0x6
009f0215 : LEA ECX,[ESP + 0x40]
009f0219 : CALL 0x00406560
009f021e : MOV dword ptr [ESP + 0xd8],0xffffffff
009f0229 : LEA ECX,[ESP + 0x24]
009f022d : CALL 0x00406560
009f0232 : MOV ESI,dword ptr [EBP + 0xc]
009f0235 : PUSH 0x1
009f0237 : PUSH 0xca4c0c
009f023c : CALL 0x00404870
009f0241 : MOV ECX,dword ptr [ESP + 0xd0]
009f0248 : MOV dword ptr FS:[0x0],ECX
009f024f : POP ECX
009f0250 : POP EDI
009f0251 : POP ESI
009f0252 : POP EBX
009f0253 : MOV ESP,EBP
009f0255 : POP EBP
009f0256 : RET
