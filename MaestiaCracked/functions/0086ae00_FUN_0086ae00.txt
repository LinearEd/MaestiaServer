PROGRAM  : Maestia.exe
FUNCTION : FUN_0086ae00
ENTRY    : 0086ae00
BODY     : [[0086ae00, 0086b0a1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0086ae00(int param_1)

{
  int iVar1;
  short sVar2;
  uint uVar3;
  int *piVar4;
  undefined4 uVar5;
  int *in_ECX;
  int local_9c;
  int local_98;
  undefined4 local_94;
  undefined4 local_90;
  undefined4 local_8c;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined1 auStack_7c [28];
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined1 local_50 [4];
  undefined2 uStack_4c;
  undefined4 uStack_3c;
  uint uStack_38;
  undefined4 uStack_28;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b38053;
  local_14 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xffffff58;
  ExceptionList = &local_14;
  in_ECX[0xfb] = param_1;
  iVar1 = DAT_00d7c54c;
  if (param_1 != 0) {
    *(undefined1 *)(param_1 + 0x241) = 1;
    local_9c = in_ECX[2];
    FUN_004437f0(&local_9c);
    if (((local_98 == *(int *)(iVar1 + 0x44)) || (*(int *)(local_98 + 0x10) == 0)) ||
       ((*(uint *)(*(int *)(local_98 + 0x10) + 0x4c) & 0x200000) == 0)) {
      FUN_00406460(L"DUMMY_MODEL");
      local_c = 0;
      local_88 = 0x3f800000;
      local_84 = 0x3f800000;
      local_80 = 0x3f800000;
      local_60 = 0;
      local_5c = 0;
      local_58 = 0;
      local_54 = 0x3f800000;
      local_94 = 0;
      local_90 = 0;
      local_8c = 0;
      piVar4 = (int *)(**(code **)(*(int *)in_ECX[0xfb] + 0x20))
                                (local_50,&local_94,&local_60,&local_88,uVar3);
      local_c = 0xffffffff;
      if (7 < uStack_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uStack_38 = 7;
      uStack_3c = 0;
      uStack_4c = 0;
      if (piVar4 != (int *)0x0) {
        sVar2 = (**(code **)(*in_ECX + 0x1e4))();
        if (sVar2 == 7) {
          FUN_00406460(L"dummy_pet.mmf");
          local_c = 1;
          (**(code **)(*piVar4 + 0xe8))(auStack_7c,0,0,0,0,0,0);
        }
        else {
          sVar2 = (**(code **)(*in_ECX + 0x1e4))();
          if (sVar2 == 1) {
            FUN_00406460(L"ID_EF_MESH_DUMMY_PC_M");
            local_c = 4;
            uVar5 = FUN_0081cfe0(DAT_0172491c,auStack_7c);
            local_c = CONCAT31(local_c._1_3_,5);
            (**(code **)(*piVar4 + 0xe8))(uVar5,0,0,0,0,0,0);
            uStack_28 = CONCAT31(uStack_28._1_3_,4);
          }
          else {
            FUN_00406460(L"ID_EF_MESH_DUMMY_MOB");
            local_c = 2;
            uVar5 = FUN_0081cfe0(DAT_0172491c,auStack_7c);
            local_c = CONCAT31(local_c._1_3_,3);
            (**(code **)(*piVar4 + 0xe8))(uVar5,0,0,0,0,0,0);
            uStack_28 = CONCAT31(uStack_28._1_3_,2);
          }
          FUN_00406560();
        }
        uStack_28 = 0xffffffff;
        FUN_00406560();
        FUN_007d48a0(0,0);
        (**(code **)(*piVar4 + 0x114))(1,0x50);
      }
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
0086ae00 : PUSH EBP
0086ae01 : MOV EBP,ESP
0086ae03 : AND ESP,0xfffffff8
0086ae06 : PUSH -0x1
0086ae08 : PUSH 0xb38053
0086ae0d : MOV EAX,FS:[0x0]
0086ae13 : PUSH EAX
0086ae14 : SUB ESP,0x88
0086ae1a : PUSH EBX
0086ae1b : PUSH ESI
0086ae1c : PUSH EDI
0086ae1d : MOV EAX,[0x00d66fa0]
0086ae22 : XOR EAX,ESP
0086ae24 : PUSH EAX
0086ae25 : LEA EAX,[ESP + 0x98]
0086ae2c : MOV FS:[0x0],EAX
0086ae32 : MOV ESI,ECX
0086ae34 : MOV EAX,dword ptr [EBP + 0x8]
0086ae37 : MOV dword ptr [ESI + 0x3ec],EAX
0086ae3d : TEST EAX,EAX
0086ae3f : JZ 0x0086b08a
0086ae45 : MOV EDI,dword ptr [0x00d7c54c]
0086ae4b : MOV byte ptr [EAX + 0x241],0x1
0086ae52 : MOV EAX,dword ptr [ESI + 0x8]
0086ae55 : LEA ECX,[ESP + 0x10]
0086ae59 : MOV dword ptr [ESP + 0x10],EAX
0086ae5d : PUSH ECX
0086ae5e : LEA ECX,[EDI + 0x40]
0086ae61 : LEA EAX,[ESP + 0x18]
0086ae65 : CALL 0x004437f0
0086ae6a : MOV EDI,dword ptr [EDI + 0x44]
0086ae6d : MOV EAX,dword ptr [ESP + 0x14]
0086ae71 : CMP EAX,EDI
0086ae73 : JZ 0x0086ae89
0086ae75 : MOV EAX,dword ptr [EAX + 0x10]
0086ae78 : TEST EAX,EAX
0086ae7a : JZ 0x0086ae89
0086ae7c : TEST dword ptr [EAX + 0x4c],0x200000
0086ae83 : JNZ 0x0086b08a
0086ae89 : PUSH 0xc417e8
0086ae8e : LEA ECX,[ESP + 0x60]
0086ae92 : CALL 0x00406460
0086ae97 : MOV dword ptr [ESP + 0xa0],0x0
0086aea2 : XORPS XMM0,XMM0
0086aea5 : MOVSS XMM1,dword ptr [0x00c10fc4]
0086aead : MOV ECX,dword ptr [ESI + 0x3ec]
0086aeb3 : LEA EAX,[ESP + 0x24]
0086aeb7 : PUSH EAX
0086aeb8 : LEA EAX,[ESP + 0x50]
0086aebc : PUSH EAX
0086aebd : LEA EAX,[ESP + 0x20]
0086aec1 : PUSH EAX
0086aec2 : MOVSS dword ptr [ESP + 0x30],XMM1
0086aec8 : MOVSS dword ptr [ESP + 0x34],XMM1
0086aece : MOVSS dword ptr [ESP + 0x38],XMM1
0086aed4 : MOVSS dword ptr [ESP + 0x58],XMM0
0086aeda : MOVSS dword ptr [ESP + 0x5c],XMM0
0086aee0 : MOVSS dword ptr [ESP + 0x60],XMM0
0086aee6 : MOVSS dword ptr [ESP + 0x64],XMM1
0086aeec : MOVSS dword ptr [ESP + 0x24],XMM0
0086aef2 : MOVSS dword ptr [ESP + 0x28],XMM0
0086aef8 : MOVSS dword ptr [ESP + 0x2c],XMM0
0086aefe : MOV EDX,dword ptr [ECX]
0086af00 : MOV EDX,dword ptr [EDX + 0x20]
0086af03 : LEA EAX,[ESP + 0x68]
0086af07 : PUSH EAX
0086af08 : CALL EDX
0086af0a : OR EBX,0xffffffff
0086af0d : MOV EDI,EAX
0086af0f : MOV dword ptr [ESP + 0xa0],EBX
0086af16 : CMP dword ptr [ESP + 0x74],0x8
0086af1b : JC 0x0086af26
0086af1d : MOV ECX,dword ptr [ESP + 0x60]
0086af21 : CALL 0x006f04e0
0086af26 : XOR EAX,EAX
0086af28 : MOV dword ptr [ESP + 0x74],0x7
0086af30 : MOV dword ptr [ESP + 0x70],0x0
0086af38 : MOV word ptr [ESP + 0x60],AX
0086af3d : TEST EDI,EDI
0086af3f : JZ 0x0086b08a
0086af45 : MOV EDX,dword ptr [ESI]
0086af47 : MOV EAX,dword ptr [EDX + 0x1e4]
0086af4d : MOV ECX,ESI
0086af4f : CALL EAX
0086af51 : CMP AX,0x7
0086af55 : JNZ 0x0086af92
0086af57 : PUSH 0xc41800
0086af5c : LEA ECX,[ESP + 0x34]
0086af60 : CALL 0x00406460
0086af65 : MOV dword ptr [ESP + 0xa0],0x1
0086af70 : MOV EDX,dword ptr [EDI]
0086af72 : MOV EDX,dword ptr [EDX + 0xe8]
0086af78 : PUSH 0x0
0086af7a : PUSH 0x0
0086af7c : PUSH 0x0
0086af7e : PUSH 0x0
0086af80 : PUSH 0x0
0086af82 : PUSH 0x0
0086af84 : LEA EAX,[ESP + 0x48]
0086af88 : PUSH EAX
0086af89 : MOV ECX,EDI
0086af8b : CALL EDX
0086af8d : JMP 0x0086b05f
0086af92 : MOV EAX,dword ptr [ESI]
0086af94 : MOV EDX,dword ptr [EAX + 0x1e4]
0086af9a : MOV ECX,ESI
0086af9c : CALL EDX
0086af9e : LEA ECX,[ESP + 0x30]
0086afa2 : CMP AX,0x1
0086afa6 : JZ 0x0086b000
0086afa8 : PUSH 0xc4181c
0086afad : CALL 0x00406460
0086afb2 : MOV dword ptr [ESP + 0xa0],0x2
0086afbd : MOV ECX,dword ptr [0x0172491c]
0086afc3 : LEA EAX,[ESP + 0x30]
0086afc7 : PUSH EAX
0086afc8 : PUSH ECX
0086afc9 : LEA ESI,[ESP + 0x80]
0086afd0 : CALL 0x0081cfe0
0086afd5 : MOV byte ptr [ESP + 0xa0],0x3
0086afdd : MOV EDX,dword ptr [EDI]
0086afdf : PUSH 0x0
0086afe1 : PUSH 0x0
0086afe3 : PUSH 0x0
0086afe5 : PUSH 0x0
0086afe7 : PUSH 0x0
0086afe9 : PUSH 0x0
0086afeb : PUSH EAX
0086afec : MOV EAX,dword ptr [EDX + 0xe8]
0086aff2 : MOV ECX,EDI
0086aff4 : CALL EAX
0086aff6 : MOV byte ptr [ESP + 0xa0],0x2
0086affe : JMP 0x0086b056
0086b000 : PUSH 0xc41848
0086b005 : CALL 0x00406460
0086b00a : MOV dword ptr [ESP + 0xa0],0x4
0086b015 : MOV EDX,dword ptr [0x0172491c]
0086b01b : LEA ECX,[ESP + 0x30]
0086b01f : PUSH ECX
0086b020 : PUSH EDX
0086b021 : LEA ESI,[ESP + 0x80]
0086b028 : CALL 0x0081cfe0
0086b02d : MOV byte ptr [ESP + 0xa0],0x5
0086b035 : MOV EDX,dword ptr [EDI]
0086b037 : PUSH 0x0
0086b039 : PUSH 0x0
0086b03b : PUSH 0x0
0086b03d : PUSH 0x0
0086b03f : PUSH 0x0
0086b041 : PUSH 0x0
0086b043 : PUSH EAX
0086b044 : MOV EAX,dword ptr [EDX + 0xe8]
0086b04a : MOV ECX,EDI
0086b04c : CALL EAX
0086b04e : MOV byte ptr [ESP + 0xa0],0x4
0086b056 : LEA ECX,[ESP + 0x78]
0086b05a : CALL 0x00406560
0086b05f : MOV dword ptr [ESP + 0xa0],EBX
0086b066 : LEA ECX,[ESP + 0x30]
0086b06a : CALL 0x00406560
0086b06f : PUSH 0x0
0086b071 : PUSH 0x0
0086b073 : MOV ECX,EDI
0086b075 : CALL 0x007d48a0
0086b07a : MOV EDX,dword ptr [EDI]
0086b07c : MOV EAX,dword ptr [EDX + 0x114]
0086b082 : PUSH 0x50
0086b084 : PUSH 0x1
0086b086 : MOV ECX,EDI
0086b088 : CALL EAX
0086b08a : MOV ECX,dword ptr [ESP + 0x98]
0086b091 : MOV dword ptr FS:[0x0],ECX
0086b098 : POP ECX
0086b099 : POP EDI
0086b09a : POP ESI
0086b09b : POP EBX
0086b09c : MOV ESP,EBP
0086b09e : POP EBP
0086b09f : RET 0x4
