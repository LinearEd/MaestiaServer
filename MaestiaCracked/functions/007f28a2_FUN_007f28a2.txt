PROGRAM  : Maestia.exe
FUNCTION : FUN_007f28a2
ENTRY    : 007f28a2
BODY     : [[007f28a2, 007f2a8f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f28a2(void)

{
  float in_EAX;
  int in_ECX;
  float unaff_ESI;
  bool in_CF;
  bool in_ZF;
  float unaff_retaddr;
  float fStack00000004;
  float fStack00000008;
  float fStack0000000c;
  float in_stack_00000010;
  float in_stack_00000014;
  float in_stack_00000018;
  float in_stack_0000001c;
  float in_stack_00000020;
  float in_stack_00000024;
  float in_stack_00000028;
  float in_stack_0000002c;
  float in_stack_00000030;
  float in_stack_00000034;
  undefined4 in_stack_00000038;
  undefined1 *in_stack_0000003c;
  undefined1 *in_stack_00000040;
  undefined1 *in_stack_00000044;
  undefined4 in_stack_00000048;
  undefined4 in_stack_0000004c;
  undefined4 in_stack_00000050;
  undefined4 in_stack_00000054;
  undefined4 in_stack_00000058;
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined1 *puVar3;
  
  if (in_CF || in_ZF) {
    puVar3 = (undefined1 *)&stack0x00000004;
    fStack00000004 = 0.0;
    fStack00000008 = 0.0;
    fStack0000000c = 0.0;
    D3DXVec3Normalize(puVar3);
    fStack00000008 =
         *(float *)(in_ECX + 0x24) * fStack00000004 - *(float *)(in_ECX + 0x28) * unaff_retaddr;
    puVar1 = (undefined1 *)&stack0x00000008;
    fStack0000000c =
         *(float *)(in_ECX + 0x28) * unaff_ESI - *(float *)(in_ECX + 0x20) * fStack00000004;
    in_stack_00000010 =
         *(float *)(in_ECX + 0x20) * unaff_retaddr - *(float *)(in_ECX + 0x24) * unaff_ESI;
    in_stack_00000020 = fStack00000008;
    in_stack_00000024 = fStack0000000c;
    in_stack_00000028 = in_stack_00000010;
    puVar2 = puVar1;
    D3DXVec3Normalize(puVar1,puVar1);
    fStack0000000c = in_EAX * fStack00000008 - unaff_ESI * fStack00000004;
    in_stack_00000010 = unaff_ESI * unaff_retaddr - (float)puVar3 * fStack00000008;
    in_stack_00000014 = (float)puVar3 * fStack00000004 - in_EAX * unaff_retaddr;
    in_stack_00000018 = fStack0000000c;
    in_stack_0000001c = in_stack_00000010;
    in_stack_00000020 = in_stack_00000014;
    D3DXVec3Normalize(&stack0x0000000c,&stack0x0000000c);
    in_stack_00000044 = puVar3;
    in_stack_00000040 = puVar2;
    in_stack_0000003c = puVar1;
    in_stack_00000054 = 0;
    in_stack_00000050 = 0;
    in_stack_0000004c = 0;
    in_stack_00000048 = 0;
    in_stack_00000038 = 0;
    in_stack_00000028 = 0.0;
    in_stack_00000058 = 0x3f800000;
    in_stack_0000002c = fStack00000004;
    in_stack_00000030 = fStack00000008;
    in_stack_00000034 = fStack0000000c;
    D3DXQuaternionRotationMatrix(in_ECX + 0x170,&stack0x0000001c);
    *(undefined1 *)(in_ECX + 0x154) = 1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007f28a2 : PUSH ESI
007f28a3 : MOV ESI,ECX
007f28a5 : JA 0x007f2a89
007f28ab : XORPS XMM0,XMM0
007f28ae : PUSH EAX
007f28af : LEA EAX,[ESP + 0xc]
007f28b3 : PUSH EAX
007f28b4 : MOVSS dword ptr [ESP + 0x10],XMM0
007f28ba : MOVSS dword ptr [ESP + 0x14],XMM0
007f28c0 : MOVSS dword ptr [ESP + 0x18],XMM0
007f28c6 : CALL 0x004ff722
007f28cb : MOVSS XMM0,dword ptr [ESI + 0x28]
007f28d0 : MOVSS XMM2,dword ptr [ESI + 0x24]
007f28d5 : MOVSS XMM3,dword ptr [ESP + 0x10]
007f28db : MOVSS XMM4,dword ptr [ESP + 0xc]
007f28e1 : MOVAPS XMM5,XMM0
007f28e4 : MOVAPS XMM1,XMM2
007f28e7 : MULSS XMM1,XMM3
007f28eb : MULSS XMM5,XMM4
007f28ef : SUBSS XMM1,XMM5
007f28f3 : MOVSS XMM5,dword ptr [ESP + 0x8]
007f28f9 : MOVSS dword ptr [ESP + 0x2c],XMM1
007f28ff : MOVSS XMM1,dword ptr [ESI + 0x20]
007f2904 : MOVAPS XMM6,XMM1
007f2907 : LEA EDX,[ESP + 0x14]
007f290b : MULSS XMM0,XMM5
007f290f : MULSS XMM1,XMM4
007f2913 : MULSS XMM2,XMM5
007f2917 : MULSS XMM6,XMM3
007f291b : SUBSS XMM0,XMM6
007f291f : SUBSS XMM1,XMM2
007f2923 : MOVSS dword ptr [ESP + 0x34],XMM1
007f2929 : MOV ECX,dword ptr [ESP + 0x34]
007f292d : PUSH EDX
007f292e : MOV EAX,EDX
007f2930 : MOVSS dword ptr [ESP + 0x34],XMM0
007f2936 : MOVQ XMM0,qword ptr [ESP + 0x30]
007f293c : PUSH EAX
007f293d : MOVQ qword ptr [ESP + 0x1c],XMM0
007f2943 : MOV dword ptr [ESP + 0x24],ECX
007f2947 : CALL 0x004ff722
007f294c : MOVSS XMM0,dword ptr [ESP + 0x10]
007f2952 : MOVSS XMM2,dword ptr [ESP + 0xc]
007f2958 : MOVSS XMM3,dword ptr [ESP + 0x1c]
007f295e : MOVSS XMM4,dword ptr [ESP + 0x18]
007f2964 : MOVAPS XMM5,XMM0
007f2967 : MOVAPS XMM1,XMM2
007f296a : MULSS XMM1,XMM3
007f296e : MULSS XMM5,XMM4
007f2972 : SUBSS XMM1,XMM5
007f2976 : MOVSS XMM5,dword ptr [ESP + 0x14]
007f297c : MOVSS dword ptr [ESP + 0x2c],XMM1
007f2982 : MOVSS XMM1,dword ptr [ESP + 0x8]
007f2988 : MOVAPS XMM6,XMM1
007f298b : LEA EDX,[ESP + 0x20]
007f298f : MULSS XMM0,XMM5
007f2993 : MULSS XMM1,XMM4
007f2997 : MULSS XMM2,XMM5
007f299b : MULSS XMM6,XMM3
007f299f : SUBSS XMM0,XMM6
007f29a3 : SUBSS XMM1,XMM2
007f29a7 : MOVSS dword ptr [ESP + 0x34],XMM1
007f29ad : MOV ECX,dword ptr [ESP + 0x34]
007f29b1 : PUSH EDX
007f29b2 : MOV EAX,EDX
007f29b4 : MOVSS dword ptr [ESP + 0x34],XMM0
007f29ba : MOVQ XMM0,qword ptr [ESP + 0x30]
007f29c0 : PUSH EAX
007f29c1 : MOVQ qword ptr [ESP + 0x28],XMM0
007f29c7 : MOV dword ptr [ESP + 0x30],ECX
007f29cb : CALL 0x004ff722
007f29d0 : XORPS XMM0,XMM0
007f29d3 : MOVSS dword ptr [ESP + 0x70],XMM0
007f29d9 : MOVSS dword ptr [ESP + 0x6c],XMM0
007f29df : MOVSS dword ptr [ESP + 0x68],XMM0
007f29e5 : MOVSS dword ptr [ESP + 0x64],XMM0
007f29eb : MOVSS dword ptr [ESP + 0x54],XMM0
007f29f1 : MOVSS dword ptr [ESP + 0x44],XMM0
007f29f7 : MOVSS XMM0,dword ptr [0x00c10fc4]
007f29ff : MOVSS dword ptr [ESP + 0x74],XMM0
007f2a05 : MOVSS XMM0,dword ptr [ESP + 0x14]
007f2a0b : MOVSS dword ptr [ESP + 0x38],XMM0
007f2a11 : MOVSS XMM0,dword ptr [ESP + 0x18]
007f2a17 : MOVSS dword ptr [ESP + 0x3c],XMM0
007f2a1d : MOVSS XMM0,dword ptr [ESP + 0x1c]
007f2a23 : MOVSS dword ptr [ESP + 0x40],XMM0
007f2a29 : MOVSS XMM0,dword ptr [ESP + 0x20]
007f2a2f : MOVSS dword ptr [ESP + 0x48],XMM0
007f2a35 : MOVSS XMM0,dword ptr [ESP + 0x24]
007f2a3b : MOVSS dword ptr [ESP + 0x4c],XMM0
007f2a41 : MOVSS XMM0,dword ptr [ESP + 0x28]
007f2a47 : MOVSS dword ptr [ESP + 0x50],XMM0
007f2a4d : MOVSS XMM0,dword ptr [ESP + 0x8]
007f2a53 : MOVSS dword ptr [ESP + 0x58],XMM0
007f2a59 : MOVSS XMM0,dword ptr [ESP + 0xc]
007f2a5f : LEA ECX,[ESP + 0x38]
007f2a63 : PUSH ECX
007f2a64 : LEA EDX,[ESI + 0x170]
007f2a6a : MOVSS dword ptr [ESP + 0x60],XMM0
007f2a70 : MOVSS XMM0,dword ptr [ESP + 0x14]
007f2a76 : PUSH EDX
007f2a77 : MOVSS dword ptr [ESP + 0x68],XMM0
007f2a7d : CALL 0x00664c7e
007f2a82 : MOV byte ptr [ESI + 0x154],0x1
007f2a89 : POP ESI
007f2a8a : MOV ESP,EBP
007f2a8c : POP EBP
007f2a8d : RET 0x4
