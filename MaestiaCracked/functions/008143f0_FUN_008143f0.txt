PROGRAM  : Maestia.exe
FUNCTION : FUN_008143f0
ENTRY    : 008143f0
BODY     : [[008143f0, 00814540]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_008143f0(int param_1,int param_2,int param_3,uint param_4,uint param_5)

{
  int iVar1;
  int *piVar2;
  uint *puVar3;
  void **ppvVar4;
  uint uVar5;
  int *piVar6;
  uint uVar7;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b29867;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  uVar7 = 0;
  if (*(int *)(param_1 + 0xa0) != 0) {
    piVar6 = *(int **)(param_1 + 0x9c);
    piVar2 = (int *)*piVar6;
    ppvVar4 = &local_10;
    while (ExceptionList = ppvVar4, piVar2 != piVar6) {
      puVar3 = (uint *)piVar2[4];
      if (((ushort)puVar3[1] <= param_4) && (param_4 <= *(ushort *)((int)puVar3 + 6))) {
        uVar7 = *puVar3;
      }
      if ((*puVar3 == param_5) && ((int)(puVar3[8] - puVar3[7]) >> 2 != 0)) {
        uVar7 = *puVar3 + 1;
      }
      FUN_00416210(uVar5);
      ppvVar4 = ExceptionList;
    }
    if ((*(uint *)(param_1 + 0xa0) < uVar7) || (uVar7 == 0)) {
      *(undefined4 *)(param_2 + 0x18) = 7;
      *(undefined4 *)(param_2 + 0x14) = 0;
      *(undefined2 *)(param_2 + 4) = 0;
      FUN_00406360(&DAT_00c2ea44,0);
    }
    else {
      piVar6 = (int *)FUN_00451ea0();
      iVar1 = *(int *)(*piVar6 + 0xc) + param_3 * 0x1c;
      if (*(uint *)(*(int *)(*piVar6 + 0xc) + 0x18 + param_3 * 0x1c) < 8) {
        FUN_00406460(iVar1 + 4);
      }
      else {
        FUN_00406460(*(undefined4 *)(iVar1 + 4));
      }
    }
    ExceptionList = local_10;
    return param_2;
  }
  ExceptionList = &local_10;
  FUN_00406460(&DAT_00c2ea40);
  ExceptionList = local_10;
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
008143f0 : PUSH EBP
008143f1 : MOV EBP,ESP
008143f3 : PUSH -0x1
008143f5 : PUSH 0xb29867
008143fa : MOV EAX,FS:[0x0]
00814400 : PUSH EAX
00814401 : SUB ESP,0x8
00814404 : PUSH EBX
00814405 : PUSH ESI
00814406 : PUSH EDI
00814407 : MOV EAX,[0x00d66fa0]
0081440c : XOR EAX,EBP
0081440e : PUSH EAX
0081440f : LEA EAX,[EBP + -0xc]
00814412 : MOV FS:[0x0],EAX
00814418 : MOV EBX,dword ptr [EBP + 0x8]
0081441b : XOR ESI,ESI
0081441d : MOV dword ptr [EBP + -0x10],ESI
00814420 : CMP dword ptr [EBX + 0xa0],ESI
00814426 : JA 0x00814457
00814428 : MOV EDI,dword ptr [EBP + 0xc]
0081442b : PUSH 0xc2ea40
00814430 : MOV ECX,EDI
00814432 : CALL 0x00406460
00814437 : MOV dword ptr [EBP + -0x4],ESI
0081443a : MOV dword ptr [EBP + -0x10],0x1
00814441 : MOV EAX,EDI
00814443 : MOV ECX,dword ptr [EBP + -0xc]
00814446 : MOV dword ptr FS:[0x0],ECX
0081444d : POP ECX
0081444e : POP EDI
0081444f : POP ESI
00814450 : POP EBX
00814451 : MOV ESP,EBP
00814453 : POP EBP
00814454 : RET 0x14
00814457 : MOV EDI,dword ptr [EBX + 0x9c]
0081445d : MOV EAX,dword ptr [EDI]
0081445f : MOV dword ptr [EBP + 0x8],EAX
00814462 : CMP EAX,EDI
00814464 : JZ 0x008144a4
00814466 : MOV EAX,dword ptr [EAX + 0x10]
00814469 : MOVZX EDX,word ptr [EAX + 0x4]
0081446d : MOV ECX,dword ptr [EBP + 0x14]
00814470 : CMP EDX,ECX
00814472 : JA 0x0081447e
00814474 : MOVZX EDX,word ptr [EAX + 0x6]
00814478 : CMP ECX,EDX
0081447a : JA 0x0081447e
0081447c : MOV ESI,dword ptr [EAX]
0081447e : MOV ECX,dword ptr [EAX]
00814480 : CMP ECX,dword ptr [EBP + 0x18]
00814483 : JNZ 0x00814495
00814485 : MOV EDX,dword ptr [EAX + 0x20]
00814488 : SUB EDX,dword ptr [EAX + 0x1c]
0081448b : SAR EDX,0x2
0081448e : TEST EDX,EDX
00814490 : JBE 0x00814495
00814492 : LEA ESI,[ECX + 0x1]
00814495 : LEA EDX,[EBP + 0x8]
00814498 : CALL 0x00416210
0081449d : MOV EAX,dword ptr [EBP + 0x8]
008144a0 : CMP EAX,EDI
008144a2 : JNZ 0x00814466
008144a4 : XOR EDI,EDI
008144a6 : CMP dword ptr [EBX + 0xa0],ESI
008144ac : JC 0x00814501
008144ae : CMP ESI,EDI
008144b0 : JZ 0x00814501
008144b2 : LEA EAX,[EBX + 0x98]
008144b8 : LEA ECX,[EBP + 0x8]
008144bb : MOV dword ptr [EBP + 0x8],ESI
008144be : CALL 0x00451ea0
008144c3 : MOV EAX,dword ptr [EAX]
008144c5 : MOV ECX,dword ptr [EBP + 0x10]
008144c8 : ADD EAX,0x8
008144cb : MOV EAX,dword ptr [EAX + 0x4]
008144ce : LEA EDX,[ECX*0x8 + 0x0]
008144d5 : SUB EDX,ECX
008144d7 : CMP dword ptr [EAX + EDX*0x4 + 0x18],0x8
008144dc : LEA EAX,[EAX + EDX*0x4]
008144df : JC 0x008144f1
008144e1 : MOV EAX,dword ptr [EAX + 0x4]
008144e4 : MOV ESI,dword ptr [EBP + 0xc]
008144e7 : PUSH EAX
008144e8 : MOV ECX,ESI
008144ea : CALL 0x00406460
008144ef : JMP 0x00814521
008144f1 : MOV ESI,dword ptr [EBP + 0xc]
008144f4 : ADD EAX,0x4
008144f7 : PUSH EAX
008144f8 : MOV ECX,ESI
008144fa : CALL 0x00406460
008144ff : JMP 0x00814521
00814501 : MOV ESI,dword ptr [EBP + 0xc]
00814504 : XOR ECX,ECX
00814506 : MOV dword ptr [ESI + 0x18],0x7
0081450d : MOV dword ptr [ESI + 0x14],EDI
00814510 : PUSH EDI
00814511 : MOV word ptr [ESI + 0x4],CX
00814515 : PUSH 0xc2ea44
0081451a : MOV ECX,ESI
0081451c : CALL 0x00406360
00814521 : MOV dword ptr [EBP + -0x4],EDI
00814524 : MOV dword ptr [EBP + -0x10],0x1
0081452b : MOV EAX,ESI
0081452d : MOV ECX,dword ptr [EBP + -0xc]
00814530 : MOV dword ptr FS:[0x0],ECX
00814537 : POP ECX
00814538 : POP EDI
00814539 : POP ESI
0081453a : POP EBX
0081453b : MOV ESP,EBP
0081453d : POP EBP
0081453e : RET 0x14
