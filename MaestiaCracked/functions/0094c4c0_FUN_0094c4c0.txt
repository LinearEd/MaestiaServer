PROGRAM  : Maestia.exe
FUNCTION : FUN_0094c4c0
ENTRY    : 0094c4c0
BODY     : [[0094c4c0, 0094c783]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0094c4c0(int param_1)

{
  int iVar1;
  wchar_t *pwVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 in_ECX;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [4];
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b53655;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(*DAT_00da9894 + 0x128) == 0) {
    FUN_00406460(L"Mouse pointer is Null!");
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiPetList::UseSummonPetItem",0x516,local_30)
      ;
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    iVar4 = *(int *)(*(int *)(*DAT_00da9894 + 0x128) + 0x5c);
    if (iVar4 == 7) {
      if (*(int *)(param_1 + 0x80) == 1) {
LAB_0094c5fb:
        iVar1 = FUN_00945670(local_14);
        if (iVar1 == 0) {
          FUN_00404750(L"Can\'t find pet.. key[%u]");
          local_8 = 1;
          if ((int *)*DAT_00da98e8 != (int *)0x0) {
            (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                      (L"AvaGuiPetList::UseSummonPetItem",0x522,local_4c);
          }
          local_8 = 0xffffffff;
          FUN_00406560();
        }
        else {
          pwVar2 = L"IDS_SUMMONPET_USE_REBIRTHITEM_CONFIRM";
          if (iVar4 != 7) {
            pwVar2 = L"IDS_SUMMONPET_USE_CASHFEED_CONFIRM";
          }
          FUN_00406460(pwVar2);
          local_8 = 2;
          puVar3 = local_2c;
          if (local_18 < 8) {
            puVar3 = &local_2c;
          }
          FUN_00406460(puVar3);
          local_8._0_1_ = 3;
          iVar4 = FUN_0081d120(local_4c);
          local_8._0_1_ = 4;
          if (*(uint *)(iVar1 + 0x24) < 8) {
            iVar1 = iVar1 + 0x10;
          }
          else {
            iVar1 = *(int *)(iVar1 + 0x10);
          }
          if (*(uint *)(iVar4 + 0x18) < 8) {
            iVar4 = iVar4 + 4;
          }
          else {
            iVar4 = *(int *)(iVar4 + 4);
          }
          FUN_00404750(iVar4,iVar1);
          local_8._0_1_ = 6;
          FUN_00406560();
          local_8._0_1_ = 7;
          FUN_00406560();
          iVar4 = FUN_008ede80(local_68,2);
          if (iVar4 == 0) {
            FUN_00406460(L"Failed make dialog");
            local_8._0_1_ = 8;
            if ((int *)*DAT_00da98e8 != (int *)0x0) {
              (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                        (L"AvaGuiPetList::UseSummonPetItem",0x532,local_4c);
            }
            local_8._0_1_ = 7;
            FUN_00406560();
          }
          else {
            *(undefined4 *)(iVar4 + 0x6c) = in_ECX;
            *(undefined4 *)(iVar4 + 0x70) = 3;
            if (*(code **)(iVar4 + 0x60) != (code *)0x0) {
              (**(code **)(iVar4 + 0x60))(1,iVar4);
            }
            *(code **)(iVar4 + 0x60) = FUN_0094c2c0;
          }
          local_8 = CONCAT31(local_8._1_3_,2);
          FUN_00406560();
          local_8 = 0xffffffff;
          FUN_00406560();
        }
        goto LAB_0094c5cb;
      }
    }
    else if ((iVar4 == 8) && (*(int *)(param_1 + 0x80) == 2)) goto LAB_0094c5fb;
    FUN_00404750(L"Mouse status[%d] is not summon pet rebirth type!",iVar4);
    local_8 = 9;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiPetList::UseSummonPetItem",0x537,local_30)
      ;
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
  local_8 = 0xffffffff;
  local_1c = 0;
  local_18 = 7;
LAB_0094c5cb:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0094c4c0 : PUSH EBP
0094c4c1 : MOV EBP,ESP
0094c4c3 : PUSH -0x1
0094c4c5 : PUSH 0xb53655
0094c4ca : MOV EAX,FS:[0x0]
0094c4d0 : PUSH EAX
0094c4d1 : SUB ESP,0x78
0094c4d4 : MOV EAX,[0x00d66fa0]
0094c4d9 : XOR EAX,EBP
0094c4db : MOV dword ptr [EBP + -0x10],EAX
0094c4de : PUSH EBX
0094c4df : PUSH ESI
0094c4e0 : PUSH EDI
0094c4e1 : PUSH EAX
0094c4e2 : LEA EAX,[EBP + -0xc]
0094c4e5 : MOV FS:[0x0],EAX
0094c4eb : MOV EAX,dword ptr [EBP + 0x8]
0094c4ee : MOV EDI,ECX
0094c4f0 : MOV ECX,dword ptr [0x00da9894]
0094c4f6 : MOV ECX,dword ptr [ECX]
0094c4f8 : MOV ECX,dword ptr [ECX + 0x128]
0094c4fe : XOR EBX,EBX
0094c500 : MOV dword ptr [EBP + -0x68],EDI
0094c503 : CMP ECX,EBX
0094c505 : JNZ 0x0094c555
0094c507 : PUSH 0xc73ca8
0094c50c : LEA ECX,[EBP + -0x2c]
0094c50f : CALL 0x00406460
0094c514 : MOV dword ptr [EBP + -0x4],EBX
0094c517 : MOV EDX,dword ptr [0x00da98e8]
0094c51d : MOV ECX,dword ptr [EDX]
0094c51f : CMP ECX,EBX
0094c521 : JZ 0x0094c538
0094c523 : MOV EAX,dword ptr [ECX]
0094c525 : MOV EAX,dword ptr [EAX + 0x14]
0094c528 : LEA EDX,[EBP + -0x2c]
0094c52b : PUSH EDX
0094c52c : PUSH 0x516
0094c531 : PUSH 0xc73cd8
0094c536 : CALL EAX
0094c538 : MOV dword ptr [EBP + -0x4],0xffffffff
0094c53f : CMP dword ptr [EBP + -0x14],0x8
0094c543 : JC 0x0094c54d
0094c545 : MOV ECX,dword ptr [EBP + -0x28]
0094c548 : CALL 0x006f04e0
0094c54d : XOR ECX,ECX
0094c54f : MOV word ptr [EBP + -0x28],CX
0094c553 : JMP 0x0094c5c1
0094c555 : MOV ESI,dword ptr [ECX + 0x5c]
0094c558 : CMP ESI,0x7
0094c55b : JNZ 0x0094c5e9
0094c561 : CMP dword ptr [EAX + 0x80],0x1
0094c568 : JZ 0x0094c5fb
0094c56e : PUSH ESI
0094c56f : PUSH 0xc73ec8
0094c574 : LEA ESI,[EBP + -0x2c]
0094c577 : CALL 0x00404750
0094c57c : ADD ESP,0x8
0094c57f : MOV dword ptr [EBP + -0x4],0x9
0094c586 : MOV ECX,dword ptr [0x00da98e8]
0094c58c : MOV ECX,dword ptr [ECX]
0094c58e : CMP ECX,EBX
0094c590 : JZ 0x0094c5a6
0094c592 : MOV EDX,dword ptr [ECX]
0094c594 : MOV EDX,dword ptr [EDX + 0x14]
0094c597 : MOV EAX,ESI
0094c599 : PUSH EAX
0094c59a : PUSH 0x537
0094c59f : PUSH 0xc73f30
0094c5a4 : CALL EDX
0094c5a6 : MOV dword ptr [EBP + -0x4],0xffffffff
0094c5ad : CMP dword ptr [EBP + -0x14],0x8
0094c5b1 : JC 0x0094c5bb
0094c5b3 : MOV ECX,dword ptr [EBP + -0x28]
0094c5b6 : CALL 0x006f04e0
0094c5bb : XOR EAX,EAX
0094c5bd : MOV word ptr [EBP + -0x28],AX
0094c5c1 : MOV dword ptr [EBP + -0x18],EBX
0094c5c4 : MOV dword ptr [EBP + -0x14],0x7
0094c5cb : MOV ECX,dword ptr [EBP + -0xc]
0094c5ce : MOV dword ptr FS:[0x0],ECX
0094c5d5 : POP ECX
0094c5d6 : POP EDI
0094c5d7 : POP ESI
0094c5d8 : POP EBX
0094c5d9 : MOV ECX,dword ptr [EBP + -0x10]
0094c5dc : XOR ECX,EBP
0094c5de : CALL 0x00633e6b
0094c5e3 : MOV ESP,EBP
0094c5e5 : POP EBP
0094c5e6 : RET 0x4
0094c5e9 : CMP ESI,0x8
0094c5ec : JNZ 0x0094c56e
0094c5ee : CMP dword ptr [EAX + 0x80],0x2
0094c5f5 : JNZ 0x0094c56e
0094c5fb : MOV EDX,EDI
0094c5fd : CALL 0x00945670
0094c602 : MOV EBX,EAX
0094c604 : TEST EBX,EBX
0094c606 : JNZ 0x0094c654
0094c608 : PUSH EDI
0094c609 : PUSH 0xc73d18
0094c60e : LEA ESI,[EBP + -0x48]
0094c611 : CALL 0x00404750
0094c616 : ADD ESP,0x8
0094c619 : MOV dword ptr [EBP + -0x4],0x1
0094c620 : MOV EDX,dword ptr [0x00da98e8]
0094c626 : MOV ECX,dword ptr [EDX]
0094c628 : TEST ECX,ECX
0094c62a : JZ 0x0094c640
0094c62c : MOV EAX,dword ptr [ECX]
0094c62e : MOV EAX,dword ptr [EAX + 0x14]
0094c631 : MOV EDX,ESI
0094c633 : PUSH EDX
0094c634 : PUSH 0x522
0094c639 : PUSH 0xc73d50
0094c63e : CALL EAX
0094c640 : MOV dword ptr [EBP + -0x4],0xffffffff
0094c647 : LEA ECX,[EBP + -0x48]
0094c64a : CALL 0x00406560
0094c64f : JMP 0x0094c5cb
0094c654 : MOV EAX,0xc73d90
0094c659 : CMP ESI,0x7
0094c65c : JZ 0x0094c663
0094c65e : MOV EAX,0xc73e18
0094c663 : PUSH EAX
0094c664 : LEA ECX,[EBP + -0x2c]
0094c667 : CALL 0x00406460
0094c66c : MOV dword ptr [EBP + -0x4],0x2
0094c673 : CMP dword ptr [EBP + -0x14],0x8
0094c677 : MOV EAX,dword ptr [EBP + -0x28]
0094c67a : JNC 0x0094c67f
0094c67c : LEA EAX,[EBP + -0x28]
0094c67f : PUSH EAX
0094c680 : LEA ECX,[EBP + -0x48]
0094c683 : CALL 0x00406460
0094c688 : MOV byte ptr [EBP + -0x4],0x3
0094c68c : LEA ECX,[EBP + -0x48]
0094c68f : PUSH ECX
0094c690 : MOV ECX,dword ptr [0x0172491c]
0094c696 : LEA EDI,[EBP + 0xffffff7c]
0094c69c : CALL 0x0081d120
0094c6a1 : MOV byte ptr [EBP + -0x4],0x4
0094c6a5 : MOV ECX,0x8
0094c6aa : CMP dword ptr [EBX + 0x24],ECX
0094c6ad : JC 0x0094c6b4
0094c6af : MOV EBX,dword ptr [EBX + 0x10]
0094c6b2 : JMP 0x0094c6b7
0094c6b4 : ADD EBX,0x10
0094c6b7 : CMP dword ptr [EAX + 0x18],ECX
0094c6ba : JC 0x0094c6c1
0094c6bc : MOV EAX,dword ptr [EAX + 0x4]
0094c6bf : JMP 0x0094c6c4
0094c6c1 : ADD EAX,0x4
0094c6c4 : PUSH EBX
0094c6c5 : PUSH EAX
0094c6c6 : LEA ESI,[EBP + -0x64]
0094c6c9 : CALL 0x00404750
0094c6ce : ADD ESP,0x8
0094c6d1 : MOV byte ptr [EBP + -0x4],0x6
0094c6d5 : LEA ECX,[EBP + 0xffffff7c]
0094c6db : CALL 0x00406560
0094c6e0 : MOV byte ptr [EBP + -0x4],0x7
0094c6e4 : LEA ECX,[EBP + -0x48]
0094c6e7 : CALL 0x00406560
0094c6ec : MOV EDX,dword ptr [0x00da9894]
0094c6f2 : MOV ECX,dword ptr [EDX]
0094c6f4 : PUSH 0x2
0094c6f6 : MOV EAX,ESI
0094c6f8 : PUSH EAX
0094c6f9 : CALL 0x008ede80
0094c6fe : MOV ESI,EAX
0094c700 : TEST ESI,ESI
0094c702 : JZ 0x0094c726
0094c704 : MOV EAX,dword ptr [ESI + 0x60]
0094c707 : MOV ECX,dword ptr [EBP + -0x68]
0094c70a : MOV dword ptr [ESI + 0x6c],ECX
0094c70d : MOV dword ptr [ESI + 0x70],0x3
0094c714 : TEST EAX,EAX
0094c716 : JZ 0x0094c71d
0094c718 : PUSH ESI
0094c719 : PUSH 0x1
0094c71b : CALL EAX
0094c71d : MOV dword ptr [ESI + 0x60],0x94c2c0
0094c724 : JMP 0x0094c764
0094c726 : PUSH 0xc73e60
0094c72b : LEA ECX,[EBP + -0x48]
0094c72e : CALL 0x00406460
0094c733 : MOV byte ptr [EBP + -0x4],0x8
0094c737 : MOV EDX,dword ptr [0x00da98e8]
0094c73d : MOV ECX,dword ptr [EDX]
0094c73f : TEST ECX,ECX
0094c741 : JZ 0x0094c758
0094c743 : MOV EAX,dword ptr [ECX]
0094c745 : MOV EAX,dword ptr [EAX + 0x14]
0094c748 : LEA EDX,[EBP + -0x48]
0094c74b : PUSH EDX
0094c74c : PUSH 0x532
0094c751 : PUSH 0xc73e88
0094c756 : CALL EAX
0094c758 : MOV byte ptr [EBP + -0x4],0x7
0094c75c : LEA ECX,[EBP + -0x48]
0094c75f : CALL 0x00406560
0094c764 : MOV byte ptr [EBP + -0x4],0x2
0094c768 : LEA ECX,[EBP + -0x64]
0094c76b : CALL 0x00406560
0094c770 : MOV dword ptr [EBP + -0x4],0xffffffff
0094c777 : LEA ECX,[EBP + -0x2c]
0094c77a : CALL 0x00406560
0094c77f : JMP 0x0094c5cb
