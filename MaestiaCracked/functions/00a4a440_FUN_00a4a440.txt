PROGRAM  : Maestia.exe
FUNCTION : FUN_00a4a440
ENTRY    : 00a4a440
BODY     : [[00a4a440, 00a4a4e6] [00a4a4f0, 00a4a635] [00a4a640, 00a4a89f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a4a440(int param_1)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  undefined4 ******ppppppuVar6;
  byte *pbVar7;
  byte *pbVar8;
  int *piVar9;
  int iVar10;
  bool bVar11;
  int local_178 [2];
  int local_170;
  int local_16c;
  undefined4 local_168;
  undefined1 local_164 [4];
  int *local_160;
  int *local_15c;
  int local_158;
  char local_154;
  ushort local_153;
  undefined1 local_150 [4];
  undefined1 local_14c;
  undefined4 local_13c;
  uint local_138;
  undefined1 local_134 [4];
  undefined4 *****local_130 [4];
  undefined4 local_120;
  uint local_11c;
  byte local_118 [256];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b171eb;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar2 = FUN_00a49990(*(undefined2 *)(param_1 + 0x168),*(undefined1 *)(param_1 + 0x1e0),local_18);
  if (*(int *)(iVar2 + 300) != 0) {
    local_160 = (int *)0x0;
    local_15c = (int *)0x0;
    local_158 = 0;
    local_170 = 0;
    local_16c = 0;
    local_168 = 0;
    local_8 = 1;
    iVar2 = (**(code **)(*(int *)(*(int *)(iVar2 + 300) + 800) + 4))();
    while (iVar2 != 0) {
      iVar3 = FUN_004f5680();
      local_178[0] = iVar3;
      if ((iVar3 != 0) && ((*(byte *)(iVar3 + 0x80) & 2) != 0)) {
        if (local_160 == (int *)0x0) {
          uVar4 = 0;
        }
        else {
          uVar4 = local_158 - (int)local_160 >> 2;
        }
        if ((uint)((int)local_15c - (int)local_160 >> 2) < uVar4) {
          *local_15c = iVar3;
          local_15c = local_15c + 1;
        }
        else {
          FUN_004d2c60(local_164,local_15c,local_178);
        }
        iVar3 = FUN_00634e90(iVar3 + 0x40,&DAT_00cc7394);
        if (iVar3 == 0) {
          FUN_00449610();
        }
      }
    }
    iVar10 = 0;
    iVar2 = local_16c - local_170 >> 2;
    iVar3 = *(int *)(param_1 + 0x16c) % iVar2;
    *(int *)(param_1 + 0x16c) = iVar3;
    if (iVar3 < iVar2) {
      if (iVar3 < 0) {
        *(int *)(param_1 + 0x16c) = iVar2 + -1;
      }
    }
    else {
      *(undefined4 *)(param_1 + 0x16c) = 0;
    }
    FUN_00404c30(*(int *)(local_170 + *(int *)(param_1 + 0x16c) * 4) + 0x40);
    local_8._0_1_ = 2;
    uVar5 = FUN_00401a80(local_150,&DAT_00cc739c,1);
    FUN_00403fa0(local_134,uVar5);
    local_8 = CONCAT31(local_8._1_3_,3);
    piVar9 = local_160;
    if (local_160 != local_15c) {
      do {
        ppppppuVar6 = (undefined4 ******)local_130[0];
        if (local_11c < 0x10) {
          ppppppuVar6 = local_130;
        }
        iVar2 = FUN_00634e90(*piVar9 + 0x40,ppppppuVar6);
        if (iVar2 != 0) {
          iVar10 = iVar10 + 1;
        }
        piVar9 = piVar9 + 1;
      } while (piVar9 != local_15c);
    }
    iVar2 = *(int *)(param_1 + 0x170) % (iVar10 + -1);
    *(int *)(param_1 + 0x170) = iVar2;
    if (iVar2 < iVar10 + -1) {
      if (iVar2 < 0) {
        *(int *)(param_1 + 0x170) = iVar10 + -2;
      }
    }
    else {
      *(undefined4 *)(param_1 + 0x170) = 0;
    }
    piVar9 = *(int **)(param_1 + 0x4c);
    if (piVar9 != (int *)0x0) {
      (**(code **)(*piVar9 + 4))(piVar9,"SetFace",&DAT_00cc73a0,*(undefined4 *)(param_1 + 0x16c));
      (**(code **)(**(int **)(param_1 + 0x4c) + 4))
                (*(int **)(param_1 + 0x4c),"SetTattoo",&DAT_00cc73ac,
                 *(undefined4 *)(param_1 + 0x170));
    }
    local_118[0] = 0;
    _memset(local_118 + 1,0,0xff);
    local_154 = (char)(*(int *)(param_1 + 0x170) / 10) + '0';
    local_153 = (ushort)(byte)((char)(*(int *)(param_1 + 0x170) % 10) + 0x30);
    ppppppuVar6 = (undefined4 ******)local_130[0];
    if (local_11c < 0x10) {
      ppppppuVar6 = local_130;
    }
    FUN_00410870("%s_de_%s.mmf",ppppppuVar6,&local_154);
    piVar9 = local_160;
    if (local_160 != local_15c) {
      do {
        pbVar8 = local_118;
        pbVar7 = (byte *)(*piVar9 + 0x40);
        do {
          bVar1 = *pbVar7;
          bVar11 = bVar1 < *pbVar8;
          if (bVar1 != *pbVar8) {
LAB_00a4a790:
            iVar2 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
            goto LAB_00a4a795;
          }
          if (bVar1 == 0) break;
          bVar1 = pbVar7[1];
          bVar11 = bVar1 < pbVar8[1];
          if (bVar1 != pbVar8[1]) goto LAB_00a4a790;
          pbVar7 = pbVar7 + 2;
          pbVar8 = pbVar8 + 2;
        } while (bVar1 != 0);
        iVar2 = 0;
LAB_00a4a795:
        if (iVar2 == 0) {
          *(undefined2 *)(param_1 + 0x292) = *(undefined2 *)(*piVar9 + 6);
          break;
        }
        piVar9 = piVar9 + 1;
      } while (piVar9 != local_15c);
      local_15c = local_160;
    }
    if (local_170 != local_16c) {
      local_16c = local_170;
    }
    local_8 = CONCAT31(local_8._1_3_,2);
    if (0xf < local_11c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_11c = 0xf;
    local_120 = 0;
    local_130[0] = (undefined4 *****)((uint)local_130[0] & 0xffffff00);
    local_8 = CONCAT31(local_8._1_3_,1);
    if (0xf < local_138) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_138 = 0xf;
    local_13c = 0;
    local_14c = 0;
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_170 != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_170 = 0;
    local_16c = 0;
    local_168 = 0;
    local_8 = 0xffffffff;
    if (local_160 != (int *)0x0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_160 = (int *)0x0;
    local_15c = (int *)0x0;
    local_158 = 0;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a4a440 : PUSH EBP
00a4a441 : MOV EBP,ESP
00a4a443 : PUSH -0x1
00a4a445 : PUSH 0xb171eb
00a4a44a : MOV EAX,FS:[0x0]
00a4a450 : PUSH EAX
00a4a451 : SUB ESP,0x170
00a4a457 : MOV EAX,[0x00d66fa0]
00a4a45c : XOR EAX,EBP
00a4a45e : MOV dword ptr [EBP + -0x14],EAX
00a4a461 : PUSH EBX
00a4a462 : PUSH ESI
00a4a463 : PUSH EDI
00a4a464 : PUSH EAX
00a4a465 : LEA EAX,[EBP + -0xc]
00a4a468 : MOV FS:[0x0],EAX
00a4a46e : MOV EBX,dword ptr [EBP + 0x8]
00a4a471 : MOVZX EAX,byte ptr [EBX + 0x1e0]
00a4a478 : MOVZX ECX,word ptr [EBX + 0x168]
00a4a47f : PUSH EAX
00a4a480 : PUSH ECX
00a4a481 : CALL 0x00a49990
00a4a486 : MOV EAX,dword ptr [EAX + 0x12c]
00a4a48c : XOR EDI,EDI
00a4a48e : ADD ESP,0x8
00a4a491 : CMP EAX,EDI
00a4a493 : JZ 0x00a4a882
00a4a499 : MOV dword ptr [EBP + 0xfffffea4],EDI
00a4a49f : MOV dword ptr [EBP + 0xfffffea8],EDI
00a4a4a5 : MOV dword ptr [EBP + 0xfffffeac],EDI
00a4a4ab : MOV dword ptr [EBP + -0x4],EDI
00a4a4ae : MOV dword ptr [EBP + 0xfffffe94],EDI
00a4a4b4 : MOV dword ptr [EBP + 0xfffffe98],EDI
00a4a4ba : MOV dword ptr [EBP + 0xfffffe9c],EDI
00a4a4c0 : MOV byte ptr [EBP + -0x4],0x1
00a4a4c4 : MOV EDX,dword ptr [EAX + 0x320]
00a4a4ca : LEA ESI,[EAX + 0x320]
00a4a4d0 : MOV EAX,dword ptr [EDX + 0x4]
00a4a4d3 : MOV ECX,ESI
00a4a4d5 : CALL EAX
00a4a4d7 : MOV dword ptr [EBP + 0xfffffe88],EAX
00a4a4dd : CMP EAX,EDI
00a4a4df : JZ 0x00a4a5a0
00a4a4e5 : JMP 0x00a4a4f0
00a4a4f0 : LEA EDX,[EBP + 0xfffffe88]
00a4a4f6 : MOV EAX,ESI
00a4a4f8 : CALL 0x004f5680
00a4a4fd : MOV EDI,EAX
00a4a4ff : MOV dword ptr [EBP + 0xfffffe8c],EDI
00a4a505 : TEST EDI,EDI
00a4a507 : JZ 0x00a4a591
00a4a50d : TEST byte ptr [EDI + 0x80],0x2
00a4a514 : JZ 0x00a4a591
00a4a516 : MOV ECX,dword ptr [EBP + 0xfffffea4]
00a4a51c : TEST ECX,ECX
00a4a51e : JNZ 0x00a4a524
00a4a520 : XOR EAX,EAX
00a4a522 : JMP 0x00a4a52f
00a4a524 : MOV EAX,dword ptr [EBP + 0xfffffeac]
00a4a52a : SUB EAX,ECX
00a4a52c : SAR EAX,0x2
00a4a52f : MOV EDX,dword ptr [EBP + 0xfffffea8]
00a4a535 : SUB EDX,ECX
00a4a537 : SAR EDX,0x2
00a4a53a : CMP EDX,EAX
00a4a53c : JNC 0x00a4a551
00a4a53e : MOV EAX,dword ptr [EBP + 0xfffffea8]
00a4a544 : MOV dword ptr [EAX],EDI
00a4a546 : ADD EAX,0x4
00a4a549 : MOV dword ptr [EBP + 0xfffffea8],EAX
00a4a54f : JMP 0x00a4a56b
00a4a551 : MOV ECX,dword ptr [EBP + 0xfffffea8]
00a4a557 : LEA EAX,[EBP + 0xfffffe8c]
00a4a55d : PUSH EAX
00a4a55e : PUSH ECX
00a4a55f : LEA EDX,[EBP + 0xfffffea0]
00a4a565 : PUSH EDX
00a4a566 : CALL 0x004d2c60
00a4a56b : LEA EAX,[EDI + 0x40]
00a4a56e : PUSH 0xcc7394
00a4a573 : PUSH EAX
00a4a574 : CALL 0x00634e90
00a4a579 : ADD ESP,0x8
00a4a57c : TEST EAX,EAX
00a4a57e : JNZ 0x00a4a591
00a4a580 : LEA EDI,[EBP + 0xfffffe8c]
00a4a586 : LEA EDX,[EBP + 0xfffffe90]
00a4a58c : CALL 0x00449610
00a4a591 : CMP dword ptr [EBP + 0xfffffe88],0x0
00a4a598 : JNZ 0x00a4a4f0
00a4a59e : XOR EDI,EDI
00a4a5a0 : MOV ECX,dword ptr [EBP + 0xfffffe98]
00a4a5a6 : SUB ECX,dword ptr [EBP + 0xfffffe94]
00a4a5ac : MOV EAX,dword ptr [EBX + 0x16c]
00a4a5b2 : SAR ECX,0x2
00a4a5b5 : CDQ
00a4a5b6 : IDIV ECX
00a4a5b8 : CMP EDX,ECX
00a4a5ba : MOV dword ptr [EBX + 0x16c],EDX
00a4a5c0 : JL 0x00a4a5ca
00a4a5c2 : MOV dword ptr [EBX + 0x16c],EDI
00a4a5c8 : JMP 0x00a4a5d5
00a4a5ca : CMP EDX,EDI
00a4a5cc : JGE 0x00a4a5d5
00a4a5ce : DEC ECX
00a4a5cf : MOV dword ptr [EBX + 0x16c],ECX
00a4a5d5 : MOV EAX,dword ptr [EBX + 0x16c]
00a4a5db : MOV ECX,dword ptr [EBP + 0xfffffe94]
00a4a5e1 : MOV EDX,dword ptr [ECX + EAX*0x4]
00a4a5e4 : LEA EAX,[ECX + EAX*0x4]
00a4a5e7 : ADD EDX,0x40
00a4a5ea : PUSH EDX
00a4a5eb : LEA ECX,[EBP + 0xfffffeb4]
00a4a5f1 : CALL 0x00404c30
00a4a5f6 : MOV byte ptr [EBP + -0x4],0x2
00a4a5fa : PUSH 0x1
00a4a5fc : PUSH 0xcc739c
00a4a601 : LEA EAX,[EBP + 0xfffffeb4]
00a4a607 : PUSH EAX
00a4a608 : CALL 0x00401a80
00a4a60d : PUSH EAX
00a4a60e : LEA ECX,[EBP + 0xfffffed0]
00a4a614 : PUSH ECX
00a4a615 : XOR ECX,ECX
00a4a617 : LEA EDX,[EBP + 0xfffffeb4]
00a4a61d : CALL 0x00403fa0
00a4a622 : MOV byte ptr [EBP + -0x4],0x3
00a4a626 : MOV ESI,dword ptr [EBP + 0xfffffea4]
00a4a62c : CMP ESI,dword ptr [EBP + 0xfffffea8]
00a4a632 : JZ 0x00a4a674
00a4a634 : JMP 0x00a4a640
00a4a640 : CMP dword ptr [EBP + 0xfffffee8],0x10
00a4a647 : MOV ECX,dword ptr [EBP + 0xfffffed4]
00a4a64d : JNC 0x00a4a655
00a4a64f : LEA ECX,[EBP + 0xfffffed4]
00a4a655 : MOV EAX,dword ptr [ESI]
00a4a657 : ADD EAX,0x40
00a4a65a : PUSH ECX
00a4a65b : PUSH EAX
00a4a65c : CALL 0x00634e90
00a4a661 : ADD ESP,0x8
00a4a664 : TEST EAX,EAX
00a4a666 : JZ 0x00a4a669
00a4a668 : INC EDI
00a4a669 : ADD ESI,0x4
00a4a66c : CMP ESI,dword ptr [EBP + 0xfffffea8]
00a4a672 : JNZ 0x00a4a640
00a4a674 : MOV EAX,dword ptr [EBX + 0x170]
00a4a67a : DEC EDI
00a4a67b : CDQ
00a4a67c : IDIV EDI
00a4a67e : CMP EDX,EDI
00a4a680 : MOV dword ptr [EBX + 0x170],EDX
00a4a686 : JL 0x00a4a694
00a4a688 : MOV dword ptr [EBX + 0x170],0x0
00a4a692 : JMP 0x00a4a69f
00a4a694 : TEST EDX,EDX
00a4a696 : JGE 0x00a4a69f
00a4a698 : DEC EDI
00a4a699 : MOV dword ptr [EBX + 0x170],EDI
00a4a69f : MOV EAX,dword ptr [EBX + 0x4c]
00a4a6a2 : TEST EAX,EAX
00a4a6a4 : JZ 0x00a4a6de
00a4a6a6 : MOV ECX,dword ptr [EBX + 0x16c]
00a4a6ac : MOV EDX,dword ptr [EAX]
00a4a6ae : MOV EDX,dword ptr [EDX + 0x4]
00a4a6b1 : PUSH ECX
00a4a6b2 : PUSH 0xcc73a0
00a4a6b7 : PUSH 0xcc73a4
00a4a6bc : PUSH EAX
00a4a6bd : CALL EDX
00a4a6bf : MOV EDX,dword ptr [EBX + 0x170]
00a4a6c5 : MOV EAX,dword ptr [EBX + 0x4c]
00a4a6c8 : MOV ECX,dword ptr [EAX]
00a4a6ca : PUSH EDX
00a4a6cb : PUSH 0xcc73ac
00a4a6d0 : PUSH 0xcc73b0
00a4a6d5 : PUSH EAX
00a4a6d6 : MOV EAX,dword ptr [ECX + 0x4]
00a4a6d9 : CALL EAX
00a4a6db : ADD ESP,0x20
00a4a6de : PUSH 0xff
00a4a6e3 : LEA ECX,[EBP + 0xfffffeed]
00a4a6e9 : PUSH 0x0
00a4a6eb : PUSH ECX
00a4a6ec : MOV byte ptr [EBP + 0xfffffeec],0x0
00a4a6f3 : CALL 0x0063b700
00a4a6f8 : MOV EAX,dword ptr [EBX + 0x170]
00a4a6fe : XOR EDX,EDX
00a4a700 : MOV word ptr [EBP + 0xfffffeb1],DX
00a4a707 : CDQ
00a4a708 : MOV ECX,0xa
00a4a70d : IDIV ECX
00a4a70f : ADD ESP,0xc
00a4a712 : ADD AL,0x30
00a4a714 : ADD DL,0x30
00a4a717 : CMP dword ptr [EBP + 0xfffffee8],0x10
00a4a71e : MOV byte ptr [EBP + 0xfffffeb0],AL
00a4a724 : MOV EAX,dword ptr [EBP + 0xfffffed4]
00a4a72a : MOV byte ptr [EBP + 0xfffffeb1],DL
00a4a730 : JNC 0x00a4a738
00a4a732 : LEA EAX,[EBP + 0xfffffed4]
00a4a738 : LEA EDX,[EBP + 0xfffffeb0]
00a4a73e : PUSH EDX
00a4a73f : PUSH EAX
00a4a740 : PUSH 0xcc73bc
00a4a745 : LEA EDX,[EBP + 0xfffffeec]
00a4a74b : CALL 0x00410870
00a4a750 : MOV ESI,dword ptr [EBP + 0xfffffea4]
00a4a756 : MOV EDI,dword ptr [EBP + 0xfffffea8]
00a4a75c : ADD ESP,0xc
00a4a75f : CMP ESI,EDI
00a4a761 : JZ 0x00a4a7bb
00a4a763 : MOV EAX,dword ptr [ESI]
00a4a765 : LEA ECX,[EBP + 0xfffffeec]
00a4a76b : ADD EAX,0x40
00a4a76e : MOV EDI,EDI
00a4a770 : MOV DL,byte ptr [EAX]
00a4a772 : CMP DL,byte ptr [ECX]
00a4a774 : JNZ 0x00a4a790
00a4a776 : TEST DL,DL
00a4a778 : JZ 0x00a4a78c
00a4a77a : MOV DL,byte ptr [EAX + 0x1]
00a4a77d : CMP DL,byte ptr [ECX + 0x1]
00a4a780 : JNZ 0x00a4a790
00a4a782 : ADD EAX,0x2
00a4a785 : ADD ECX,0x2
00a4a788 : TEST DL,DL
00a4a78a : JNZ 0x00a4a770
00a4a78c : XOR EAX,EAX
00a4a78e : JMP 0x00a4a795
00a4a790 : SBB EAX,EAX
00a4a792 : SBB EAX,-0x1
00a4a795 : TEST EAX,EAX
00a4a797 : JZ 0x00a4a7a2
00a4a799 : ADD ESI,0x4
00a4a79c : CMP ESI,EDI
00a4a79e : JNZ 0x00a4a763
00a4a7a0 : JMP 0x00a4a7af
00a4a7a2 : MOV EAX,dword ptr [ESI]
00a4a7a4 : MOV CX,word ptr [EAX + 0x6]
00a4a7a8 : MOV word ptr [EBX + 0x292],CX
00a4a7af : MOV EDX,dword ptr [EBP + 0xfffffea4]
00a4a7b5 : MOV dword ptr [EBP + 0xfffffea8],EDX
00a4a7bb : MOV EBX,dword ptr [EBP + 0xfffffe94]
00a4a7c1 : CMP EBX,dword ptr [EBP + 0xfffffe98]
00a4a7c7 : JZ 0x00a4a7cf
00a4a7c9 : MOV dword ptr [EBP + 0xfffffe98],EBX
00a4a7cf : MOV byte ptr [EBP + -0x4],0x2
00a4a7d3 : MOV EDI,0x10
00a4a7d8 : CMP dword ptr [EBP + 0xfffffee8],EDI
00a4a7de : JC 0x00a4a7eb
00a4a7e0 : MOV ECX,dword ptr [EBP + 0xfffffed4]
00a4a7e6 : CALL 0x006f04e0
00a4a7eb : MOV ESI,0xf
00a4a7f0 : MOV dword ptr [EBP + 0xfffffee8],ESI
00a4a7f6 : MOV dword ptr [EBP + 0xfffffee4],0x0
00a4a800 : MOV byte ptr [EBP + 0xfffffed4],0x0
00a4a807 : MOV byte ptr [EBP + -0x4],0x1
00a4a80b : CMP dword ptr [EBP + 0xfffffecc],EDI
00a4a811 : JC 0x00a4a81e
00a4a813 : MOV ECX,dword ptr [EBP + 0xfffffeb8]
00a4a819 : CALL 0x006f04e0
00a4a81e : MOV dword ptr [EBP + 0xfffffecc],ESI
00a4a824 : MOV dword ptr [EBP + 0xfffffec8],0x0
00a4a82e : MOV byte ptr [EBP + 0xfffffeb8],0x0
00a4a835 : MOV byte ptr [EBP + -0x4],0x0
00a4a839 : TEST EBX,EBX
00a4a83b : JZ 0x00a4a844
00a4a83d : MOV ECX,EBX
00a4a83f : CALL 0x006f04e0
00a4a844 : XOR EAX,EAX
00a4a846 : MOV dword ptr [EBP + 0xfffffe94],EAX
00a4a84c : MOV dword ptr [EBP + 0xfffffe98],EAX
00a4a852 : MOV dword ptr [EBP + 0xfffffe9c],EAX
00a4a858 : MOV dword ptr [EBP + -0x4],0xffffffff
00a4a85f : MOV ECX,dword ptr [EBP + 0xfffffea4]
00a4a865 : CMP ECX,EAX
00a4a867 : JZ 0x00a4a86e
00a4a869 : CALL 0x006f04e0
00a4a86e : XOR EAX,EAX
00a4a870 : MOV dword ptr [EBP + 0xfffffea4],EAX
00a4a876 : MOV dword ptr [EBP + 0xfffffea8],EAX
00a4a87c : MOV dword ptr [EBP + 0xfffffeac],EAX
00a4a882 : MOV ECX,dword ptr [EBP + -0xc]
00a4a885 : MOV dword ptr FS:[0x0],ECX
00a4a88c : POP ECX
00a4a88d : POP EDI
00a4a88e : POP ESI
00a4a88f : POP EBX
00a4a890 : MOV ECX,dword ptr [EBP + -0x14]
00a4a893 : XOR ECX,EBP
00a4a895 : CALL 0x00633e6b
00a4a89a : MOV ESP,EBP
00a4a89c : POP EBP
00a4a89d : RET 0x4
