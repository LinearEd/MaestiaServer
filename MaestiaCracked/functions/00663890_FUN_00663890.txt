PROGRAM  : Maestia.exe
FUNCTION : FUN_00663890
ENTRY    : 00663890
BODY     : [[00663890, 0066397c]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00663890(int param_1,uint param_2,int *param_3,uint *param_4)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  
  uVar5 = 0;
  if (param_3 == (int *)0x0) {
    return 0x80004003;
  }
  if (param_4 == (uint *)0x0) {
    if (1 < param_2) {
      return 0x80070057;
    }
  }
  else {
    *param_4 = 0;
  }
  iVar2 = (**(code **)(**(int **)(param_1 + 0xc) + 0x14))();
  if (iVar2 != *(int *)(param_1 + 0x10)) {
    uVar3 = (**(code **)(**(int **)(param_1 + 0xc) + 0x14))();
    *(undefined4 *)(param_1 + 0x10) = uVar3;
    uVar3 = (**(code **)(**(int **)(param_1 + 0xc) + 0x18))();
    *(undefined4 *)(param_1 + 8) = uVar3;
    *(undefined4 *)(param_1 + 4) = 0;
  }
  if (param_2 != 0) {
    do {
      iVar2 = *(int *)(param_1 + 4);
      if (*(int *)(param_1 + 8) <= iVar2) break;
      *(int *)(param_1 + 4) = iVar2 + 1;
      iVar2 = (**(code **)(**(int **)(param_1 + 0xc) + 0x1c))(iVar2);
      if (iVar2 == 0) {
        return 0x80040203;
      }
      iVar4 = FUN_00664a60(iVar2);
      if (iVar4 == 0) {
        piVar1 = (int *)(iVar2 + 0xc);
        *param_3 = (int)piVar1;
        (**(code **)(*piVar1 + 4))(piVar1);
        param_3 = param_3 + 1;
        uVar5 = uVar5 + 1;
        FUN_00664b00(iVar2);
      }
    } while (uVar5 < param_2);
  }
  if (param_4 != (uint *)0x0) {
    *param_4 = uVar5;
  }
  return (uint)(param_2 != uVar5);
}



============================================================
DISASSEMBLY
============================================================
00663890 : PUSH EBP
00663891 : XOR EBP,EBP
00663893 : CMP dword ptr [ESP + 0x10],EBP
00663897 : JNZ 0x006638a2
00663899 : MOV EAX,0x80004003
0066389e : POP EBP
0066389f : RET 0x10
006638a2 : MOV EAX,dword ptr [ESP + 0x14]
006638a6 : CMP EAX,EBP
006638a8 : JZ 0x0066395d
006638ae : MOV dword ptr [EAX],EBP
006638b0 : PUSH EDI
006638b1 : MOV EDI,dword ptr [ESP + 0xc]
006638b5 : MOV ECX,dword ptr [EDI + 0xc]
006638b8 : MOV EAX,dword ptr [ECX]
006638ba : MOV EDX,dword ptr [EAX + 0x14]
006638bd : CALL EDX
006638bf : CMP EAX,dword ptr [EDI + 0x10]
006638c2 : JZ 0x006638e1
006638c4 : MOV ECX,dword ptr [EDI + 0xc]
006638c7 : MOV EAX,dword ptr [ECX]
006638c9 : MOV EDX,dword ptr [EAX + 0x14]
006638cc : CALL EDX
006638ce : MOV ECX,dword ptr [EDI + 0xc]
006638d1 : MOV dword ptr [EDI + 0x10],EAX
006638d4 : MOV EAX,dword ptr [ECX]
006638d6 : MOV EDX,dword ptr [EAX + 0x18]
006638d9 : CALL EDX
006638db : MOV dword ptr [EDI + 0x8],EAX
006638de : MOV dword ptr [EDI + 0x4],EBP
006638e1 : PUSH EBX
006638e2 : PUSH ESI
006638e3 : CMP dword ptr [ESP + 0x18],EBP
006638e7 : JBE 0x00663943
006638e9 : LEA ESP,[ESP]
006638f0 : MOV EAX,dword ptr [EDI + 0x4]
006638f3 : CMP dword ptr [EDI + 0x8],EAX
006638f6 : JLE 0x00663943
006638f8 : LEA ECX,[EAX + 0x1]
006638fb : MOV dword ptr [EDI + 0x4],ECX
006638fe : MOV ECX,dword ptr [EDI + 0xc]
00663901 : MOV EDX,dword ptr [ECX]
00663903 : PUSH EAX
00663904 : MOV EAX,dword ptr [EDX + 0x1c]
00663907 : CALL EAX
00663909 : MOV ESI,EAX
0066390b : TEST ESI,ESI
0066390d : JZ 0x00663971
0066390f : LEA EBX,[EDI + 0x18]
00663912 : PUSH ESI
00663913 : MOV ECX,EBX
00663915 : CALL 0x00664a60
0066391a : TEST EAX,EAX
0066391c : JNZ 0x0066393d
0066391e : MOV ECX,dword ptr [ESP + 0x1c]
00663922 : LEA EAX,[ESI + 0xc]
00663925 : MOV dword ptr [ECX],EAX
00663927 : MOV EDX,dword ptr [EAX]
00663929 : PUSH EAX
0066392a : MOV EAX,dword ptr [EDX + 0x4]
0066392d : CALL EAX
0066392f : ADD dword ptr [ESP + 0x1c],0x4
00663934 : PUSH ESI
00663935 : MOV ECX,EBX
00663937 : INC EBP
00663938 : CALL 0x00664b00
0066393d : CMP EBP,dword ptr [ESP + 0x18]
00663941 : JC 0x006638f0
00663943 : MOV EAX,dword ptr [ESP + 0x20]
00663947 : TEST EAX,EAX
00663949 : JZ 0x0066394d
0066394b : MOV dword ptr [EAX],EBP
0066394d : POP ESI
0066394e : XOR EAX,EAX
00663950 : CMP dword ptr [ESP + 0x14],EBP
00663954 : POP EBX
00663955 : POP EDI
00663956 : SETNZ AL
00663959 : POP EBP
0066395a : RET 0x10
0066395d : CMP dword ptr [ESP + 0xc],0x1
00663962 : JBE 0x006638b0
00663968 : MOV EAX,0x80070057
0066396d : POP EBP
0066396e : RET 0x10
00663971 : POP ESI
00663972 : POP EBX
00663973 : POP EDI
00663974 : MOV EAX,0x80040203
00663979 : POP EBP
0066397a : RET 0x10
