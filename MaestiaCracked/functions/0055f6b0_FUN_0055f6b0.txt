PROGRAM  : Maestia.exe
FUNCTION : FUN_0055f6b0
ENTRY    : 0055f6b0
BODY     : [[0055f6b0, 0055f795]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055f6b0(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  char cVar5;
  uint uVar6;
  undefined4 *in_ECX;
  uint uVar7;
  uint *puVar8;
  uint local_8;
  
  piVar2 = (int *)*in_ECX;
  puVar1 = (undefined4 *)(*piVar2 + 0x10 + in_ECX[1] * 0xc);
  uVar6 = FUN_0055ebd0(*puVar1);
  iVar3 = *piVar2;
  uVar6 = *(uint *)(iVar3 + 4) & uVar6;
  puVar8 = (uint *)(iVar3 + 8 + uVar6 * 0xc);
  if ((*(int *)(iVar3 + 8 + uVar6 * 0xc) != -2) && (puVar8[1] == uVar6)) {
    local_8 = 0xffffffff;
    uVar4 = uVar6;
    while ((uVar7 = uVar4, puVar8[1] != uVar6 || (cVar5 = FUN_0055e900(*puVar1), cVar5 == '\0'))) {
      uVar4 = *puVar8;
      if (uVar4 == 0xffffffff) {
        return;
      }
      puVar8 = (uint *)(*piVar2 + 8 + uVar4 * 0xc);
      local_8 = uVar7;
    }
    if (uVar7 != in_ECX[1]) {
      return;
    }
    if (uVar6 == uVar7) {
      if (*puVar8 != 0xffffffff) {
        puVar8 = (uint *)(*piVar2 + 8 + *puVar8 * 0xc);
        FUN_00513fa0();
        FUN_00513520(puVar8);
        in_ECX[1] = in_ECX[1] + -1;
      }
    }
    else {
      *(uint *)(*piVar2 + 8 + local_8 * 0xc) = *puVar8;
    }
    if ((GRefCountImpl *)puVar8[2] != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release((GRefCountImpl *)puVar8[2]);
    }
    *puVar8 = 0xfffffffe;
    *(int *)*piVar2 = *(int *)*piVar2 + -1;
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0055f6b0 : SUB ESP,0x10
0055f6b3 : PUSH EBX
0055f6b4 : PUSH EBP
0055f6b5 : MOV EBP,ECX
0055f6b7 : MOV EBX,dword ptr [EBP]
0055f6ba : MOV EAX,dword ptr [EBP + 0x4]
0055f6bd : MOV ECX,dword ptr [EBX]
0055f6bf : LEA EAX,[EAX + EAX*0x2]
0055f6c2 : LEA EAX,[ECX + EAX*0x4 + 0x10]
0055f6c6 : PUSH ESI
0055f6c7 : MOV dword ptr [ESP + 0x18],EAX
0055f6cb : MOV EAX,dword ptr [EAX]
0055f6cd : PUSH EDI
0055f6ce : PUSH EAX
0055f6cf : LEA ECX,[ESP + 0x17]
0055f6d3 : CALL 0x0055ebd0
0055f6d8 : MOV ECX,dword ptr [EBX]
0055f6da : MOV ESI,dword ptr [ECX + 0x4]
0055f6dd : AND ESI,EAX
0055f6df : LEA EDX,[ESI + ESI*0x2]
0055f6e2 : CMP dword ptr [ECX + EDX*0x4 + 0x8],-0x2
0055f6e7 : LEA EDI,[ECX + EDX*0x4 + 0x8]
0055f6eb : JZ 0x0055f78e
0055f6f1 : CMP dword ptr [EDI + 0x4],ESI
0055f6f4 : JNZ 0x0055f78e
0055f6fa : MOV dword ptr [ESP + 0x14],ESI
0055f6fe : MOV dword ptr [ESP + 0x18],0xffffffff
0055f706 : MOV EAX,dword ptr [ESP + 0x14]
0055f70a : CMP dword ptr [EDI + 0x4],EAX
0055f70d : JNZ 0x0055f722
0055f70f : MOV ECX,dword ptr [ESP + 0x1c]
0055f713 : MOV EAX,dword ptr [ECX]
0055f715 : MOV ECX,dword ptr [EDI + 0x8]
0055f718 : PUSH EAX
0055f719 : CALL 0x0055e900
0055f71e : TEST AL,AL
0055f720 : JNZ 0x0055f738
0055f722 : MOV dword ptr [ESP + 0x18],ESI
0055f726 : MOV ESI,dword ptr [EDI]
0055f728 : CMP ESI,-0x1
0055f72b : JZ 0x0055f78e
0055f72d : MOV EAX,dword ptr [EBX]
0055f72f : LEA EDX,[ESI + ESI*0x2]
0055f732 : LEA EDI,[EAX + EDX*0x4 + 0x8]
0055f736 : JMP 0x0055f706
0055f738 : CMP ESI,dword ptr [EBP + 0x4]
0055f73b : JNZ 0x0055f78e
0055f73d : CMP dword ptr [ESP + 0x14],ESI
0055f741 : JNZ 0x0055f769
0055f743 : MOV EAX,dword ptr [EDI]
0055f745 : CMP EAX,-0x1
0055f748 : JZ 0x0055f778
0055f74a : MOV EDX,dword ptr [EBX]
0055f74c : LEA ECX,[EAX + EAX*0x2]
0055f74f : LEA ESI,[EDX + ECX*0x4 + 0x8]
0055f753 : MOV ECX,EDI
0055f755 : CALL 0x00513fa0
0055f75a : PUSH ESI
0055f75b : MOV ECX,EDI
0055f75d : CALL 0x00513520
0055f762 : DEC dword ptr [EBP + 0x4]
0055f765 : MOV EDI,ESI
0055f767 : JMP 0x0055f778
0055f769 : MOV EAX,dword ptr [ESP + 0x18]
0055f76d : MOV ECX,dword ptr [EBX]
0055f76f : MOV EDX,dword ptr [EDI]
0055f771 : LEA EAX,[EAX + EAX*0x2]
0055f774 : MOV dword ptr [ECX + EAX*0x4 + 0x8],EDX
0055f778 : MOV ECX,dword ptr [EDI + 0x8]
0055f77b : TEST ECX,ECX
0055f77d : JZ 0x0055f784
0055f77f : CALL 0x004ff7e0
0055f784 : MOV dword ptr [EDI],0xfffffffe
0055f78a : MOV EBX,dword ptr [EBX]
0055f78c : DEC dword ptr [EBX]
0055f78e : POP EDI
0055f78f : POP ESI
0055f790 : POP EBP
0055f791 : POP EBX
0055f792 : ADD ESP,0x10
0055f795 : RET
