PROGRAM  : Maestia.exe
FUNCTION : FUN_006d7c40
ENTRY    : 006d7c40
BODY     : [[006d7c40, 006d7e6d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006d7c40(int param_1,int *param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 *puVar3;
  int *piVar4;
  undefined4 *puVar5;
  int *piVar6;
  short *psVar7;
  int iStack_c;
  int iStack_8;
  
  if (param_2[5] != 100) {
    *(undefined4 *)(*param_2 + 0x14) = 0x14;
    *(int *)(*param_2 + 0x18) = param_2[5];
    (**(code **)*param_2)(param_2);
  }
  param_2[7] = *(int *)(param_1 + 0x1c);
  param_2[8] = *(int *)(param_1 + 0x20);
  param_2[9] = *(int *)(param_1 + 0x24);
  param_2[10] = *(int *)(param_1 + 0x28);
  FUN_006d78e0(param_2);
  FUN_006d7570(param_2,*(undefined4 *)(param_1 + 0x28));
  param_2[0xe] = *(int *)(param_1 + 0xc0);
  piVar6 = (int *)(param_1 + 0x90);
  *(undefined1 *)((int)param_2 + 0xb3) = *(undefined1 *)(param_1 + 0x10a);
  piVar4 = param_2 + 0x12;
  iStack_c = 4;
  do {
    if (*piVar6 != 0) {
      if (*piVar4 == 0) {
        iVar2 = FUN_006d9540(param_2);
        *piVar4 = iVar2;
      }
      puVar3 = (undefined4 *)*piVar6;
      puVar5 = (undefined4 *)*piVar4;
      for (iVar2 = 0x20; iVar2 != 0; iVar2 = iVar2 + -1) {
        *puVar5 = *puVar3;
        puVar3 = puVar3 + 1;
        puVar5 = puVar5 + 1;
      }
      *(undefined1 *)(*piVar4 + 0x80) = 0;
    }
    piVar6 = piVar6 + 1;
    piVar4 = piVar4 + 1;
    iStack_c = iStack_c + -1;
  } while (iStack_c != 0);
  iVar2 = *(int *)(param_1 + 0x24);
  param_2[0xf] = iVar2;
  if ((iVar2 < 1) || (10 < iVar2)) {
    *(undefined4 *)(*param_2 + 0x14) = 0x1a;
    *(int *)(*param_2 + 0x18) = param_2[0xf];
    *(undefined4 *)(*param_2 + 0x1c) = 10;
    (**(code **)*param_2)(param_2);
  }
  puVar3 = (undefined4 *)param_2[0x11];
  puVar5 = *(undefined4 **)(param_1 + 0xc4);
  iStack_8 = 0;
  if (0 < param_2[0xf]) {
    do {
      *puVar3 = *puVar5;
      puVar3[2] = puVar5[2];
      puVar3[3] = puVar5[3];
      uVar1 = puVar5[4];
      puVar3[4] = uVar1;
      if ((3 < uVar1) || (*(int *)(param_1 + 0x90 + uVar1 * 4) == 0)) {
        *(undefined4 *)(*param_2 + 0x14) = 0x34;
        *(uint *)(*param_2 + 0x18) = uVar1;
        (**(code **)*param_2)(param_2);
      }
      psVar7 = *(short **)(param_1 + 0x90 + uVar1 * 4);
      if (puVar5[0x13] != 0) {
        iVar2 = puVar5[0x13] - (int)psVar7;
        iStack_c = 0x40;
        do {
          if (*(short *)(iVar2 + (int)psVar7) != *psVar7) {
            *(undefined4 *)(*param_2 + 0x14) = 0x2c;
            *(uint *)(*param_2 + 0x18) = uVar1;
            (**(code **)*param_2)(param_2);
          }
          psVar7 = psVar7 + 1;
          iStack_c = iStack_c + -1;
        } while (iStack_c != 0);
      }
      iStack_8 = iStack_8 + 1;
      puVar3 = puVar3 + 0x15;
      puVar5 = puVar5 + 0x15;
    } while (iStack_8 < param_2[0xf]);
  }
  if (*(char *)(param_1 + 0x100) != '\0') {
    if (*(char *)(param_1 + 0x101) == '\x01') {
      *(undefined1 *)((int)param_2 + 0xc5) = 1;
      *(undefined1 *)((int)param_2 + 0xc6) = *(undefined1 *)(param_1 + 0x102);
    }
    *(undefined1 *)((int)param_2 + 199) = *(undefined1 *)(param_1 + 0x103);
    *(undefined2 *)(param_2 + 0x32) = *(undefined2 *)(param_1 + 0x104);
    *(undefined2 *)((int)param_2 + 0xca) = *(undefined2 *)(param_1 + 0x106);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006d7c40 : SUB ESP,0xc
006d7c43 : PUSH EBP
006d7c44 : MOV EBP,dword ptr [ESP + 0x18]
006d7c48 : CMP dword ptr [EBP + 0x14],0x64
006d7c4c : PUSH EDI
006d7c4d : JZ 0x006d7c6d
006d7c4f : MOV EAX,dword ptr [EBP]
006d7c52 : MOV dword ptr [EAX + 0x14],0x14
006d7c59 : MOV ECX,dword ptr [EBP]
006d7c5c : MOV EDX,dword ptr [EBP + 0x14]
006d7c5f : MOV dword ptr [ECX + 0x18],EDX
006d7c62 : MOV EAX,dword ptr [EBP]
006d7c65 : MOV ECX,dword ptr [EAX]
006d7c67 : PUSH EBP
006d7c68 : CALL ECX
006d7c6a : ADD ESP,0x4
006d7c6d : MOV EDI,dword ptr [ESP + 0x18]
006d7c71 : MOV EDX,dword ptr [EDI + 0x1c]
006d7c74 : MOV dword ptr [EBP + 0x1c],EDX
006d7c77 : MOV EAX,dword ptr [EDI + 0x20]
006d7c7a : MOV dword ptr [EBP + 0x20],EAX
006d7c7d : MOV ECX,dword ptr [EDI + 0x24]
006d7c80 : PUSH EBX
006d7c81 : MOV dword ptr [EBP + 0x24],ECX
006d7c84 : MOV EDX,dword ptr [EDI + 0x28]
006d7c87 : PUSH ESI
006d7c88 : PUSH EBP
006d7c89 : MOV dword ptr [EBP + 0x28],EDX
006d7c8c : CALL 0x006d78e0
006d7c91 : MOV EAX,dword ptr [EDI + 0x28]
006d7c94 : PUSH EAX
006d7c95 : PUSH EBP
006d7c96 : CALL 0x006d7570
006d7c9b : MOV ECX,dword ptr [EDI + 0xc0]
006d7ca1 : MOV dword ptr [EBP + 0x38],ECX
006d7ca4 : MOV DL,byte ptr [EDI + 0x10a]
006d7caa : LEA ESI,[EDI + 0x90]
006d7cb0 : ADD ESP,0xc
006d7cb3 : MOV byte ptr [EBP + 0xb3],DL
006d7cb9 : MOV dword ptr [ESP + 0x24],ESI
006d7cbd : LEA EBX,[EBP + 0x48]
006d7cc0 : MOV dword ptr [ESP + 0x10],0x4
006d7cc8 : CMP dword ptr [ESI],0x0
006d7ccb : JZ 0x006d7cf9
006d7ccd : CMP dword ptr [EBX],0x0
006d7cd0 : JNZ 0x006d7cdd
006d7cd2 : PUSH EBP
006d7cd3 : CALL 0x006d9540
006d7cd8 : ADD ESP,0x4
006d7cdb : MOV dword ptr [EBX],EAX
006d7cdd : MOV ESI,dword ptr [ESI]
006d7cdf : MOV EDI,dword ptr [EBX]
006d7ce1 : MOV ECX,0x20
006d7ce6 : MOVSD.REP ES:EDI,ESI
006d7ce8 : MOV EAX,dword ptr [EBX]
006d7cea : MOV EDI,dword ptr [ESP + 0x20]
006d7cee : MOV ESI,dword ptr [ESP + 0x24]
006d7cf2 : MOV byte ptr [EAX + 0x80],0x0
006d7cf9 : ADD ESI,0x4
006d7cfc : ADD EBX,0x4
006d7cff : SUB dword ptr [ESP + 0x10],0x1
006d7d04 : MOV dword ptr [ESP + 0x24],ESI
006d7d08 : JNZ 0x006d7cc8
006d7d0a : MOV EAX,dword ptr [EDI + 0x24]
006d7d0d : CMP EAX,0x1
006d7d10 : MOV dword ptr [EBP + 0x3c],EAX
006d7d13 : JL 0x006d7d1a
006d7d15 : CMP EAX,0xa
006d7d18 : JLE 0x006d7d42
006d7d1a : MOV ECX,dword ptr [EBP]
006d7d1d : MOV dword ptr [ECX + 0x14],0x1a
006d7d24 : MOV EDX,dword ptr [EBP]
006d7d27 : MOV EAX,dword ptr [EBP + 0x3c]
006d7d2a : MOV dword ptr [EDX + 0x18],EAX
006d7d2d : MOV ECX,dword ptr [EBP]
006d7d30 : MOV dword ptr [ECX + 0x1c],0xa
006d7d37 : MOV EDX,dword ptr [EBP]
006d7d3a : MOV EAX,dword ptr [EDX]
006d7d3c : PUSH EBP
006d7d3d : CALL EAX
006d7d3f : ADD ESP,0x4
006d7d42 : CMP dword ptr [EBP + 0x3c],0x0
006d7d46 : MOV EDX,dword ptr [EBP + 0x44]
006d7d49 : MOV EBX,dword ptr [EDI + 0xc4]
006d7d4f : MOV dword ptr [ESP + 0x14],0x0
006d7d57 : MOV dword ptr [ESP + 0x24],EDX
006d7d5b : JLE 0x006d7e19
006d7d61 : MOV ECX,dword ptr [EBX]
006d7d63 : MOV dword ptr [EDX],ECX
006d7d65 : MOV EAX,dword ptr [EBX + 0x8]
006d7d68 : MOV dword ptr [EDX + 0x8],EAX
006d7d6b : MOV ECX,dword ptr [EBX + 0xc]
006d7d6e : MOV dword ptr [EDX + 0xc],ECX
006d7d71 : MOV ESI,dword ptr [EBX + 0x10]
006d7d74 : MOV dword ptr [EDX + 0x10],ESI
006d7d77 : CMP ESI,0x3
006d7d7a : JA 0x006d7d86
006d7d7c : CMP dword ptr [EDI + ESI*0x4 + 0x90],0x0
006d7d84 : JNZ 0x006d7da5
006d7d86 : MOV EDX,dword ptr [EBP]
006d7d89 : MOV dword ptr [EDX + 0x14],0x34
006d7d90 : MOV EAX,dword ptr [EBP]
006d7d93 : MOV dword ptr [EAX + 0x18],ESI
006d7d96 : MOV ECX,dword ptr [EBP]
006d7d99 : MOV EDX,dword ptr [ECX]
006d7d9b : PUSH EBP
006d7d9c : CALL EDX
006d7d9e : MOV EDX,dword ptr [ESP + 0x28]
006d7da2 : ADD ESP,0x4
006d7da5 : MOV ECX,dword ptr [EBX + 0x4c]
006d7da8 : MOV EAX,dword ptr [EDI + ESI*0x4 + 0x90]
006d7daf : TEST ECX,ECX
006d7db1 : JZ 0x006d7dfd
006d7db3 : SUB ECX,EAX
006d7db5 : MOV EDI,EAX
006d7db7 : MOV dword ptr [ESP + 0x18],ECX
006d7dbb : MOV dword ptr [ESP + 0x10],0x40
006d7dc3 : MOV AX,word ptr [ECX + EDI*0x1]
006d7dc7 : CMP AX,word ptr [EDI]
006d7dca : JZ 0x006d7def
006d7dcc : MOV ECX,dword ptr [EBP]
006d7dcf : MOV dword ptr [ECX + 0x14],0x2c
006d7dd6 : MOV EDX,dword ptr [EBP]
006d7dd9 : MOV dword ptr [EDX + 0x18],ESI
006d7ddc : MOV EAX,dword ptr [EBP]
006d7ddf : MOV ECX,dword ptr [EAX]
006d7de1 : PUSH EBP
006d7de2 : CALL ECX
006d7de4 : MOV ECX,dword ptr [ESP + 0x1c]
006d7de8 : MOV EDX,dword ptr [ESP + 0x28]
006d7dec : ADD ESP,0x4
006d7def : ADD EDI,0x2
006d7df2 : SUB dword ptr [ESP + 0x10],0x1
006d7df7 : JNZ 0x006d7dc3
006d7df9 : MOV EDI,dword ptr [ESP + 0x20]
006d7dfd : MOV EAX,dword ptr [ESP + 0x14]
006d7e01 : INC EAX
006d7e02 : ADD EDX,0x54
006d7e05 : ADD EBX,0x54
006d7e08 : CMP EAX,dword ptr [EBP + 0x3c]
006d7e0b : MOV dword ptr [ESP + 0x14],EAX
006d7e0f : MOV dword ptr [ESP + 0x24],EDX
006d7e13 : JL 0x006d7d61
006d7e19 : CMP byte ptr [EDI + 0x100],0x0
006d7e20 : POP ESI
006d7e21 : POP EBX
006d7e22 : JZ 0x006d7e68
006d7e24 : CMP byte ptr [EDI + 0x101],0x1
006d7e2b : JNZ 0x006d7e40
006d7e2d : MOV byte ptr [EBP + 0xc5],0x1
006d7e34 : MOV DL,byte ptr [EDI + 0x102]
006d7e3a : MOV byte ptr [EBP + 0xc6],DL
006d7e40 : MOV AL,byte ptr [EDI + 0x103]
006d7e46 : MOV byte ptr [EBP + 0xc7],AL
006d7e4c : MOV CX,word ptr [EDI + 0x104]
006d7e53 : MOV word ptr [EBP + 0xc8],CX
006d7e5a : MOV DX,word ptr [EDI + 0x106]
006d7e61 : MOV word ptr [EBP + 0xca],DX
006d7e68 : POP EDI
006d7e69 : POP EBP
006d7e6a : ADD ESP,0xc
006d7e6d : RET
