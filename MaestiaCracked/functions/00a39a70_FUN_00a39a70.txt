PROGRAM  : Maestia.exe
FUNCTION : FUN_00a39a70
ENTRY    : 00a39a70
BODY     : [[00a39a70, 00a39b28] [00a39b30, 00a39c58] [00a39c60, 00a39dee]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a39a70(int param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  char cVar3;
  int iVar4;
  int *piVar5;
  float fVar6;
  int in_ECX;
  undefined8 *puVar7;
  float fVar8;
  int *local_50;
  int local_4c;
  int local_48;
  int iStack_44;
  float local_40;
  undefined4 local_3c;
  float local_38;
  undefined4 local_34;
  float fStack_30;
  float fStack_28;
  undefined8 local_20;
  float local_18;
  undefined4 uStack_14;
  undefined1 local_10;
  undefined1 uStack_f;
  undefined1 uStack_e;
  undefined1 uStack_d;
  undefined2 local_c;
  undefined1 local_a;
  
  uVar1 = *(undefined4 *)(param_1 + 4);
  local_50 = (int *)FUN_00a1a840(uVar1);
  if (((local_50 != (int *)0x0) || (local_50 = (int *)FUN_00a1a6d0(uVar1), local_50 != (int *)0x0))
     || (local_50 = (int *)FUN_00a1a780(uVar1), local_50 != (int *)0x0)) {
    uVar1 = *(undefined4 *)(in_ECX + 0x46c);
    iVar4 = FUN_00a1a840(uVar1);
    if ((iVar4 == 0) && (iVar4 = FUN_00a1a6d0(uVar1), iVar4 == 0)) {
      iVar4 = FUN_00a1a780(uVar1);
    }
    piVar5 = *(int **)(in_ECX + 0xac);
    if (piVar5 != (int *)0x0) {
      if (piVar5 == local_50) {
        if (((piVar5 != (int *)0x0) && (piVar5 == local_50)) &&
           ((iVar4 == 0 || (cVar3 = FUN_0040e200(), cVar3 != '\0')))) {
          FUN_0040e4c0();
          puVar7 = (undefined8 *)(param_1 + 0x11);
          local_38 = 0.0;
          local_34 = 0;
          local_40 = 0.0;
          local_3c = 0;
          local_48 = 0;
          if (*(char *)(param_1 + 0x10) != '\0') {
            do {
              local_20 = *puVar7;
              local_c = *(undefined2 *)((int)puVar7 + 0x14);
              uVar1 = *(undefined4 *)(puVar7 + 2);
              fVar8 = *(float *)(puVar7 + 1);
              uStack_14 = *(undefined4 *)((int)puVar7 + 0xc);
              local_10 = (undefined1)uVar1;
              uStack_f = (undefined1)((uint)uVar1 >> 8);
              uStack_e = (undefined1)((uint)uVar1 >> 0x10);
              uStack_d = (undefined1)((uint)uVar1 >> 0x18);
              puVar7 = (undefined8 *)((int)puVar7 + 0x16);
              local_4c = DAT_00da93ec;
              local_18 = fVar8;
              piVar5 = (int *)FUN_00a1a840((undefined4)local_20);
              if (piVar5 == (int *)0x0) {
                piVar5 = (int *)FUN_00a1a6d0((undefined4)local_20);
                if (piVar5 != (int *)0x0) goto LAB_00a39cce;
                piVar5 = (int *)FUN_00a1a780((undefined4)local_20);
                if (piVar5 != (int *)0x0) goto LAB_00a39cce;
              }
              else {
LAB_00a39cce:
                (**(code **)(*piVar5 + 0x330))(CONCAT22(local_c,CONCAT11(uStack_d,uStack_e)) != 0);
                FUN_00a1c790();
                fVar6 = (float)(piVar5[0x29] - CONCAT13(local_10,uStack_14._1_3_));
                if ((fVar8 <= local_38) ||
                   ((*(byte *)(param_1 + 0x10) != 1 &&
                    ((*(byte *)(param_1 + 0x10) < 2 ||
                     (fVar6 == local_18 || (int)fVar6 - (int)local_18 < 0)))))) {
                  if (local_40 < fVar8) {
                    local_3c = (undefined4)local_20;
                    local_40 = fVar8;
                    fStack_28 = fVar8;
                  }
                }
                else {
                  local_34 = (undefined4)local_20;
                  local_38 = fVar8;
                  fStack_30 = fVar8;
                }
                local_4c = CONCAT22(*(undefined2 *)(in_ECX + 0x450),(short)piVar5[2]);
                FUN_004437f0(&local_4c);
                if (((uint)local_18 < 10) || (iStack_44 != *(int *)(in_ECX + 0x74c))) {
                  FUN_00a23360(piVar5);
                }
              }
              local_48 = local_48 + 1;
            } while (local_48 < (int)(uint)*(byte *)(param_1 + 0x10));
          }
          FUN_00a38280();
        }
      }
      else {
        iVar4 = FUN_004049b0(*(undefined4 *)(param_1 + 0xc));
        if (((iVar4 != 0) && (*(char *)(iVar4 + 0x204) != '\x04')) &&
           (local_4c = 0, *(char *)(param_1 + 0x10) != '\0')) {
          do {
            local_20 = *(undefined8 *)(param_1 + 0x11);
            uVar1 = *(undefined4 *)(param_1 + 0x21);
            local_c = *(undefined2 *)(param_1 + 0x25);
            local_a = *(undefined1 *)(param_1 + 0x27);
            uVar2 = (undefined4)local_20;
            local_10 = (undefined1)uVar1;
            uStack_f = (undefined1)((uint)uVar1 >> 8);
            uStack_e = (undefined1)((uint)uVar1 >> 0x10);
            uStack_d = (undefined1)((uint)uVar1 >> 0x18);
            local_18 = (float)*(undefined8 *)(param_1 + 0x19);
            uStack_14 = (undefined4)((ulonglong)*(undefined8 *)(param_1 + 0x19) >> 0x20);
            piVar5 = (int *)FUN_00a1a840((undefined4)local_20);
            if ((((piVar5 != (int *)0x0) ||
                 (piVar5 = (int *)FUN_00a1a6d0(uVar2), piVar5 != (int *)0x0)) ||
                (piVar5 = (int *)FUN_00a1a780(uVar2), piVar5 != (int *)0x0)) &&
               (((**(code **)(*piVar5 + 0x330))(CONCAT13(local_a,CONCAT21(local_c,uStack_d)) != 0),
                piVar5[1] == *(int *)(*(int *)(in_ECX + 0xac) + 4) &&
                ((iVar4 = FUN_00a1ba80(), iVar4 == 0 || (cVar3 = FUN_0040e200(), cVar3 != '\0'))))))
            {
              local_34 = *(undefined4 *)(param_1 + 4);
              local_38 = 0.0;
              FUN_00a38280();
            }
            local_4c = local_4c + 1;
          } while (local_4c < (int)(uint)*(byte *)(param_1 + 0x10));
        }
      }
    }
    (**(code **)(*local_50 + 0x378))
              (*(undefined4 *)(param_1 + 0xc),*(undefined1 *)(param_1 + 0x10),param_1 + 0x11);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a39a70 : PUSH EBP
00a39a71 : MOV EBP,ESP
00a39a73 : AND ESP,0xfffffff8
00a39a76 : SUB ESP,0x4c
00a39a79 : PUSH EBX
00a39a7a : PUSH ESI
00a39a7b : MOV ESI,dword ptr [EBP + 0x8]
00a39a7e : MOV EBX,dword ptr [ESI + 0x4]
00a39a81 : PUSH EDI
00a39a82 : PUSH EBX
00a39a83 : MOV EDI,ECX
00a39a85 : CALL 0x00a1a840
00a39a8a : MOV dword ptr [ESP + 0x10],EAX
00a39a8e : TEST EAX,EAX
00a39a90 : JNZ 0x00a39ab6
00a39a92 : PUSH EBX
00a39a93 : MOV ECX,EDI
00a39a95 : CALL 0x00a1a6d0
00a39a9a : MOV dword ptr [ESP + 0x10],EAX
00a39a9e : TEST EAX,EAX
00a39aa0 : JNZ 0x00a39ab6
00a39aa2 : PUSH EBX
00a39aa3 : MOV ECX,EDI
00a39aa5 : CALL 0x00a1a780
00a39aaa : MOV dword ptr [ESP + 0x10],EAX
00a39aae : TEST EAX,EAX
00a39ab0 : JZ 0x00a39de6
00a39ab6 : MOV EBX,dword ptr [EDI + 0x46c]
00a39abc : PUSH EBX
00a39abd : MOV ECX,EDI
00a39abf : CALL 0x00a1a840
00a39ac4 : TEST EAX,EAX
00a39ac6 : JNZ 0x00a39adc
00a39ac8 : PUSH EBX
00a39ac9 : MOV ECX,EDI
00a39acb : CALL 0x00a1a6d0
00a39ad0 : TEST EAX,EAX
00a39ad2 : JNZ 0x00a39adc
00a39ad4 : PUSH EBX
00a39ad5 : MOV ECX,EDI
00a39ad7 : CALL 0x00a1a780
00a39adc : MOV ECX,dword ptr [EDI + 0xac]
00a39ae2 : TEST ECX,ECX
00a39ae4 : JZ 0x00a39dcb
00a39aea : CMP ECX,dword ptr [ESP + 0x10]
00a39aee : JZ 0x00a39c06
00a39af4 : MOV EAX,dword ptr [ESI + 0xc]
00a39af7 : PUSH EAX
00a39af8 : CALL 0x004049b0
00a39afd : ADD ESP,0x4
00a39b00 : TEST EAX,EAX
00a39b02 : JZ 0x00a39dcb
00a39b08 : CMP byte ptr [EAX + 0x204],0x4
00a39b0f : JZ 0x00a39dcb
00a39b15 : CMP byte ptr [ESI + 0x10],0x0
00a39b19 : MOV dword ptr [ESP + 0x14],0x0
00a39b21 : JBE 0x00a39dcb
00a39b27 : JMP 0x00a39b30
00a39b30 : MOVQ XMM0,qword ptr [ESI + 0x11]
00a39b35 : MOV ECX,dword ptr [ESI + 0x21]
00a39b38 : MOV DX,word ptr [ESI + 0x25]
00a39b3c : MOV AL,byte ptr [ESI + 0x27]
00a39b3f : MOVQ qword ptr [ESP + 0x40],XMM0
00a39b45 : MOV EBX,dword ptr [ESP + 0x40]
00a39b49 : MOVQ XMM0,qword ptr [ESI + 0x19]
00a39b4e : MOV dword ptr [ESP + 0x50],ECX
00a39b52 : PUSH EBX
00a39b53 : MOV ECX,EDI
00a39b55 : MOVQ qword ptr [ESP + 0x4c],XMM0
00a39b5b : MOV word ptr [ESP + 0x58],DX
00a39b60 : MOV byte ptr [ESP + 0x5a],AL
00a39b64 : CALL 0x00a1a840
00a39b69 : MOV ESI,EAX
00a39b6b : TEST ESI,ESI
00a39b6d : JNZ 0x00a39b8b
00a39b6f : PUSH EBX
00a39b70 : MOV ECX,EDI
00a39b72 : CALL 0x00a1a6d0
00a39b77 : MOV ESI,EAX
00a39b79 : TEST ESI,ESI
00a39b7b : JNZ 0x00a39b8b
00a39b7d : PUSH EBX
00a39b7e : MOV ECX,EDI
00a39b80 : CALL 0x00a1a780
00a39b85 : MOV ESI,EAX
00a39b87 : TEST ESI,ESI
00a39b89 : JZ 0x00a39be7
00a39b8b : CMP dword ptr [ESP + 0x53],0x0
00a39b90 : MOV EDX,dword ptr [ESI]
00a39b92 : MOV EDX,dword ptr [EDX + 0x330]
00a39b98 : SETNZ AL
00a39b9b : MOVZX ECX,AL
00a39b9e : PUSH ECX
00a39b9f : MOV ECX,ESI
00a39ba1 : CALL EDX
00a39ba3 : MOV EAX,dword ptr [EDI + 0xac]
00a39ba9 : MOV ECX,dword ptr [ESI + 0x4]
00a39bac : CMP ECX,dword ptr [EAX + 0x4]
00a39baf : JNZ 0x00a39be7
00a39bb1 : MOV ESI,dword ptr [EDI + 0x46c]
00a39bb7 : CALL 0x00a1ba80
00a39bbc : TEST EAX,EAX
00a39bbe : JZ 0x00a39bc9
00a39bc0 : CALL 0x0040e200
00a39bc5 : TEST AL,AL
00a39bc7 : JZ 0x00a39be7
00a39bc9 : MOV EDX,dword ptr [EBP + 0x8]
00a39bcc : MOV EAX,dword ptr [EDX + 0x4]
00a39bcf : XORPS XMM0,XMM0
00a39bd2 : MOV dword ptr [ESP + 0x2c],EAX
00a39bd6 : LEA EAX,[ESP + 0x28]
00a39bda : MOV ESI,EDI
00a39bdc : MOVSS dword ptr [ESP + 0x28],XMM0
00a39be2 : CALL 0x00a38280
00a39be7 : MOV ECX,dword ptr [EBP + 0x8]
00a39bea : MOV EAX,dword ptr [ESP + 0x14]
00a39bee : MOVZX EDX,byte ptr [ECX + 0x10]
00a39bf2 : INC EAX
00a39bf3 : CMP EAX,EDX
00a39bf5 : MOV dword ptr [ESP + 0x14],EAX
00a39bf9 : MOV ESI,ECX
00a39bfb : JL 0x00a39b30
00a39c01 : JMP 0x00a39dcb
00a39c06 : TEST ECX,ECX
00a39c08 : JZ 0x00a39dcb
00a39c0e : CMP ECX,dword ptr [ESP + 0x10]
00a39c12 : JNZ 0x00a39dcb
00a39c18 : TEST EAX,EAX
00a39c1a : JZ 0x00a39c29
00a39c1c : CALL 0x0040e200
00a39c21 : TEST AL,AL
00a39c23 : JZ 0x00a39dcb
00a39c29 : CALL 0x0040e4c0
00a39c2e : XORPS XMM0,XMM0
00a39c31 : XOR EAX,EAX
00a39c33 : LEA EBX,[ESI + 0x11]
00a39c36 : MOVSS dword ptr [ESP + 0x28],XMM0
00a39c3c : MOV dword ptr [ESP + 0x2c],EAX
00a39c40 : MOVSS dword ptr [ESP + 0x20],XMM0
00a39c46 : MOV dword ptr [ESP + 0x24],EAX
00a39c4a : MOV dword ptr [ESP + 0x18],EAX
00a39c4e : CMP byte ptr [ESI + 0x10],AL
00a39c51 : JBE 0x00a39db7
00a39c57 : JMP 0x00a39c60
00a39c60 : MOVQ XMM0,qword ptr [EBX]
00a39c64 : MOV CX,word ptr [EBX + 0x14]
00a39c68 : MOV EAX,dword ptr [EBX + 0x10]
00a39c6b : MOVQ qword ptr [ESP + 0x40],XMM0
00a39c71 : MOV EDX,dword ptr [ESP + 0x40]
00a39c75 : MOVQ XMM0,qword ptr [EBX + 0x8]
00a39c7a : MOV word ptr [ESP + 0x54],CX
00a39c7f : MOV ECX,dword ptr [0x00da93ec]
00a39c85 : PUSH EDX
00a39c86 : MOVQ qword ptr [ESP + 0x4c],XMM0
00a39c8c : MOV dword ptr [ESP + 0x54],EAX
00a39c90 : ADD EBX,0x16
00a39c93 : MOV dword ptr [ESP + 0x18],ECX
00a39c97 : CALL 0x00a1a840
00a39c9c : MOV ESI,EAX
00a39c9e : TEST ESI,ESI
00a39ca0 : JNZ 0x00a39cce
00a39ca2 : MOV EAX,dword ptr [ESP + 0x40]
00a39ca6 : MOV ECX,dword ptr [ESP + 0x14]
00a39caa : PUSH EAX
00a39cab : CALL 0x00a1a6d0
00a39cb0 : MOV ESI,EAX
00a39cb2 : TEST ESI,ESI
00a39cb4 : JNZ 0x00a39cce
00a39cb6 : MOV ECX,dword ptr [ESP + 0x40]
00a39cba : PUSH ECX
00a39cbb : MOV ECX,dword ptr [ESP + 0x18]
00a39cbf : CALL 0x00a1a780
00a39cc4 : MOV ESI,EAX
00a39cc6 : TEST ESI,ESI
00a39cc8 : JZ 0x00a39d89
00a39cce : CMP dword ptr [ESP + 0x52],0x0
00a39cd3 : MOV EDX,dword ptr [ESI]
00a39cd5 : MOV EDX,dword ptr [EDX + 0x330]
00a39cdb : SETNZ AL
00a39cde : MOVZX ECX,AL
00a39ce1 : PUSH ECX
00a39ce2 : MOV ECX,ESI
00a39ce4 : CALL EDX
00a39ce6 : CALL 0x00a1c790
00a39ceb : MOV EAX,dword ptr [ESI + 0xa4]
00a39cf1 : SUB EAX,dword ptr [ESP + 0x4d]
00a39cf5 : SUB EAX,dword ptr [ESP + 0x48]
00a39cf9 : COMISS XMM0,dword ptr [ESP + 0x28]
00a39cfe : JBE 0x00a39d29
00a39d00 : MOV ECX,dword ptr [EBP + 0x8]
00a39d03 : MOV CL,byte ptr [ECX + 0x10]
00a39d06 : CMP CL,0x1
00a39d09 : JZ 0x00a39d11
00a39d0b : JBE 0x00a39d29
00a39d0d : TEST EAX,EAX
00a39d0f : JLE 0x00a39d29
00a39d11 : MOV EAX,dword ptr [ESP + 0x40]
00a39d15 : MOVSS dword ptr [ESP + 0x30],XMM0
00a39d1b : MOV EDX,dword ptr [ESP + 0x30]
00a39d1f : MOV dword ptr [ESP + 0x28],EDX
00a39d23 : MOV dword ptr [ESP + 0x2c],EAX
00a39d27 : JMP 0x00a39d46
00a39d29 : COMISS XMM0,dword ptr [ESP + 0x20]
00a39d2e : JBE 0x00a39d46
00a39d30 : MOV EDX,dword ptr [ESP + 0x40]
00a39d34 : MOVSS dword ptr [ESP + 0x38],XMM0
00a39d3a : MOV ECX,dword ptr [ESP + 0x38]
00a39d3e : MOV dword ptr [ESP + 0x20],ECX
00a39d42 : MOV dword ptr [ESP + 0x24],EDX
00a39d46 : MOVZX EAX,word ptr [EDI + 0x450]
00a39d4d : MOVZX ECX,word ptr [ESI + 0x8]
00a39d51 : SHL EAX,0x10
00a39d54 : OR EAX,ECX
00a39d56 : LEA EDX,[ESP + 0x14]
00a39d5a : MOV dword ptr [ESP + 0x14],EAX
00a39d5e : PUSH EDX
00a39d5f : LEA ECX,[EDI + 0x748]
00a39d65 : LEA EAX,[ESP + 0x20]
00a39d69 : CALL 0x004437f0
00a39d6e : CMP dword ptr [ESP + 0x48],0xa
00a39d73 : JC 0x00a39d81
00a39d75 : MOV EAX,dword ptr [ESP + 0x1c]
00a39d79 : CMP EAX,dword ptr [EDI + 0x74c]
00a39d7f : JZ 0x00a39d89
00a39d81 : PUSH ESI
00a39d82 : MOV ECX,EDI
00a39d84 : CALL 0x00a23360
00a39d89 : MOV ECX,dword ptr [EBP + 0x8]
00a39d8c : MOV EAX,dword ptr [ESP + 0x18]
00a39d90 : MOVZX EDX,byte ptr [ECX + 0x10]
00a39d94 : INC EAX
00a39d95 : CMP EAX,EDX
00a39d97 : MOV dword ptr [ESP + 0x18],EAX
00a39d9b : JL 0x00a39c60
00a39da1 : MOVSS XMM0,dword ptr [ESP + 0x28]
00a39da7 : COMISS XMM0,dword ptr [0x00b9b0b4]
00a39dae : JA 0x00a39dbd
00a39db0 : COMISS XMM0,dword ptr [ESP + 0x20]
00a39db5 : JA 0x00a39dbd
00a39db7 : LEA EAX,[ESP + 0x20]
00a39dbb : JMP 0x00a39dc1
00a39dbd : LEA EAX,[ESP + 0x28]
00a39dc1 : MOV ESI,EDI
00a39dc3 : CALL 0x00a38280
00a39dc8 : MOV ESI,dword ptr [EBP + 0x8]
00a39dcb : MOV ECX,dword ptr [ESP + 0x10]
00a39dcf : MOV EAX,dword ptr [ECX]
00a39dd1 : MOV EAX,dword ptr [EAX + 0x378]
00a39dd7 : LEA EDX,[ESI + 0x11]
00a39dda : PUSH EDX
00a39ddb : MOVZX EDX,byte ptr [ESI + 0x10]
00a39ddf : PUSH EDX
00a39de0 : MOV EDX,dword ptr [ESI + 0xc]
00a39de3 : PUSH EDX
00a39de4 : CALL EAX
00a39de6 : POP EDI
00a39de7 : POP ESI
00a39de8 : POP EBX
00a39de9 : MOV ESP,EBP
00a39deb : POP EBP
00a39dec : RET 0x4
