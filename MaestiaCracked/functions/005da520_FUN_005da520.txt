PROGRAM  : Maestia.exe
FUNCTION : FUN_005da520
ENTRY    : 005da520
BODY     : [[005da520, 005da5d3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005da520(undefined4 param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  undefined4 *in_ECX;
  uint uVar6;
  uint uVar7;
  
  iVar5 = in_ECX[6];
  if (iVar5 == 0) {
    in_ECX[1] = param_1;
    *in_ECX = 1;
  }
  uVar3 = *(uint *)(param_2 + 0x184);
  uVar7 = iVar5 + uVar3 * 2 + uVar3;
  piVar1 = in_ECX + 5;
  if (uVar7 < (uint)in_ECX[6]) {
    uVar6 = uVar7;
    if ((uint)in_ECX[7] >> 1 <= uVar7) goto LAB_005da571;
  }
  else {
    if (uVar7 < (uint)in_ECX[7]) goto LAB_005da571;
    uVar6 = (uVar7 >> 2) + uVar7;
  }
  FUN_005da0e0(piVar1,uVar6);
LAB_005da571:
  uVar6 = 0;
  in_ECX[6] = uVar7;
  if (uVar3 != 0) {
    iVar5 = iVar5 * 2;
    do {
      iVar4 = *(int *)(*(int *)(param_2 + 400) + (uVar6 >> 10) * 4);
      iVar2 = iVar4 + (uVar6 & 0x3ff) * 0xc;
      *(undefined2 *)(iVar5 + *piVar1) = *(undefined2 *)(iVar4 + (uVar6 & 0x3ff) * 0xc);
      *(undefined2 *)(iVar5 + 2 + *piVar1) = *(undefined2 *)(iVar2 + 4);
      *(undefined2 *)(iVar5 + 4 + *piVar1) = *(undefined2 *)(iVar2 + 8);
      uVar6 = uVar6 + 1;
      iVar5 = iVar5 + 6;
    } while (uVar6 < uVar3);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005da520 : PUSH EBX
005da521 : PUSH EBP
005da522 : MOV EBP,dword ptr [ECX + 0x18]
005da525 : PUSH ESI
005da526 : PUSH EDI
005da527 : TEST EBP,EBP
005da529 : JNZ 0x005da538
005da52b : MOV EAX,dword ptr [ESP + 0x14]
005da52f : MOV dword ptr [ECX + 0x4],EAX
005da532 : MOV dword ptr [ECX],0x1
005da538 : MOV EDX,dword ptr [ESP + 0x18]
005da53c : MOV EBX,dword ptr [EDX + 0x184]
005da542 : LEA EDI,[EBP + EBX*0x2]
005da546 : ADD EDI,EBX
005da548 : CMP EDI,dword ptr [ECX + 0x18]
005da54b : LEA ESI,[ECX + 0x14]
005da54e : JNC 0x005da55c
005da550 : MOV EAX,dword ptr [ESI + 0x8]
005da553 : SHR EAX,0x1
005da555 : CMP EDI,EAX
005da557 : JNC 0x005da571
005da559 : PUSH EDI
005da55a : JMP 0x005da569
005da55c : CMP EDI,dword ptr [ESI + 0x8]
005da55f : JC 0x005da571
005da561 : MOV ECX,EDI
005da563 : SHR ECX,0x2
005da566 : ADD ECX,EDI
005da568 : PUSH ECX
005da569 : PUSH ESI
005da56a : MOV ECX,ESI
005da56c : CALL 0x005da0e0
005da571 : XOR EDX,EDX
005da573 : MOV dword ptr [ESI + 0x4],EDI
005da576 : TEST EBX,EBX
005da578 : JBE 0x005da5cd
005da57a : LEA EAX,[EBP + EBP*0x1]
005da57e : MOV EDI,EDI
005da580 : MOV ECX,dword ptr [ESP + 0x18]
005da584 : MOV EBP,dword ptr [ECX + 0x190]
005da58a : MOV EDI,EDX
005da58c : SHR EDI,0xa
005da58f : MOV EDI,dword ptr [EBP + EDI*0x4]
005da593 : MOV ECX,EDX
005da595 : AND ECX,0x3ff
005da59b : LEA ECX,[ECX + ECX*0x2]
005da59e : MOV BP,word ptr [EDI + ECX*0x4]
005da5a2 : LEA ECX,[EDI + ECX*0x4]
005da5a5 : MOV EDI,dword ptr [ESI]
005da5a7 : MOV word ptr [EAX + EDI*0x1],BP
005da5ab : MOV EDI,dword ptr [ESI]
005da5ad : MOV BP,word ptr [ECX + 0x4]
005da5b1 : ADD EAX,0x2
005da5b4 : MOV word ptr [EAX + EDI*0x1],BP
005da5b8 : MOV EDI,dword ptr [ESI]
005da5ba : MOV CX,word ptr [ECX + 0x8]
005da5be : ADD EAX,0x2
005da5c1 : MOV word ptr [EAX + EDI*0x1],CX
005da5c5 : INC EDX
005da5c6 : ADD EAX,0x2
005da5c9 : CMP EDX,EBX
005da5cb : JC 0x005da580
005da5cd : POP EDI
005da5ce : POP ESI
005da5cf : POP EBP
005da5d0 : POP EBX
005da5d1 : RET 0x8
