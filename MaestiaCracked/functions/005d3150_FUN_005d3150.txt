PROGRAM  : Maestia.exe
FUNCTION : FUN_005d3150
ENTRY    : 005d3150
BODY     : [[005d3150, 005d31ce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d3150(undefined4 param_1,int param_2)

{
  int iVar1;
  int *in_ECX;
  uint uVar2;
  
  if (param_2 == 0) {
    if (*in_ECX != 0) {
      FUN_00515cf0(*in_ECX);
      *in_ECX = 0;
    }
    in_ECX[2] = 0;
    return;
  }
  uVar2 = param_2 + 3U >> 2;
  if (*in_ECX != 0) {
    iVar1 = FUN_00515c80(*in_ECX,uVar2 * 0xa0);
    in_ECX[2] = uVar2 * 4;
    *in_ECX = iVar1;
    return;
  }
  param_2 = 2;
  iVar1 = FUN_00515840(uVar2 * 0xa0,&param_2);
  in_ECX[2] = uVar2 * 4;
  *in_ECX = iVar1;
  return;
}



============================================================
DISASSEMBLY
============================================================
005d3150 : MOV EAX,dword ptr [ESP + 0x8]
005d3154 : PUSH EDI
005d3155 : MOV EDI,ECX
005d3157 : TEST EAX,EAX
005d3159 : JNZ 0x005d3178
005d315b : MOV EAX,dword ptr [EDI]
005d315d : TEST EAX,EAX
005d315f : JZ 0x005d316d
005d3161 : PUSH EAX
005d3162 : CALL 0x00515cf0
005d3167 : MOV dword ptr [EDI],0x0
005d316d : MOV dword ptr [EDI + 0x8],0x0
005d3174 : POP EDI
005d3175 : RET 0x8
005d3178 : PUSH ESI
005d3179 : LEA ESI,[EAX + 0x3]
005d317c : MOV EAX,dword ptr [EDI]
005d317e : SHR ESI,0x2
005d3181 : ADD ESI,ESI
005d3183 : ADD ESI,ESI
005d3185 : TEST EAX,EAX
005d3187 : JZ 0x005d31a3
005d3189 : LEA ECX,[ESI + ESI*0x4]
005d318c : ADD ECX,ECX
005d318e : ADD ECX,ECX
005d3190 : ADD ECX,ECX
005d3192 : PUSH ECX
005d3193 : PUSH EAX
005d3194 : CALL 0x00515c80
005d3199 : MOV dword ptr [EDI + 0x8],ESI
005d319c : POP ESI
005d319d : MOV dword ptr [EDI],EAX
005d319f : POP EDI
005d31a0 : RET 0x8
005d31a3 : MOV ECX,dword ptr [0x00d73250]
005d31a9 : LEA EAX,[ESI + ESI*0x4]
005d31ac : ADD EAX,EAX
005d31ae : LEA EDX,[ESP + 0x10]
005d31b2 : ADD EAX,EAX
005d31b4 : PUSH EDX
005d31b5 : ADD EAX,EAX
005d31b7 : PUSH EAX
005d31b8 : MOV dword ptr [ESP + 0x18],0x2
005d31c0 : CALL 0x00515840
005d31c5 : MOV dword ptr [EDI + 0x8],ESI
005d31c8 : POP ESI
005d31c9 : MOV dword ptr [EDI],EAX
005d31cb : POP EDI
005d31cc : RET 0x8
