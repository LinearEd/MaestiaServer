PROGRAM  : Maestia.exe
FUNCTION : FUN_008f2280
ENTRY    : 008f2280
BODY     : [[008f2280, 008f2469]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f2280(undefined4 param_1)

{
  int iVar1;
  undefined4 uVar2;
  uint in_EDX;
  undefined1 local_6c [28];
  int local_50;
  undefined1 local_4c [32];
  undefined4 **local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60096;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (((char)(in_EDX >> 0x18) == '\x06') &&
     ((*(int *)(*(int *)(*DAT_00da9894 + 0x284) + 0x138) == 0 || (in_EDX >> 0x10 != 0x68c)))) {
    iVar1 = FUN_008eb580(local_14);
    if ((iVar1 != 0) && ((DAT_00da93ec == 0 || (*(char *)(DAT_00da93ec + 0x4c0) == '\0')))) {
      iVar1 = FUN_004049b0();
      if (iVar1 != 0) {
        FUN_00406460(&DAT_00c5dd80);
        local_8 = 0;
        iVar1 = FUN_009f2840(param_1);
        if (iVar1 == 0) {
          uVar2 = FUN_00824a20(DAT_0172491c,0);
          local_8._0_1_ = 2;
        }
        else {
          uVar2 = FUN_009b2070(iVar1,0);
          local_8._0_1_ = 1;
        }
        FUN_00405eb0(uVar2,0,0xffffffff);
        local_8._0_1_ = 0;
        FUN_00406560();
        FUN_00406460(L"IDS_ITEMTYPEICON_GET_ITEM");
        local_8._0_1_ = 3;
        iVar1 = FUN_0081d120(local_6c);
        local_8._0_1_ = 4;
        if (local_18 < 8) {
          local_2c[0] = local_2c;
        }
        if (*(uint *)(iVar1 + 0x18) < 8) {
          iVar1 = iVar1 + 4;
        }
        else {
          iVar1 = *(int *)(iVar1 + 4);
        }
        FUN_00404750(L"%s %s",iVar1,local_2c[0]);
        local_8._0_1_ = 6;
        FUN_00406560();
        local_8 = CONCAT31(local_8._1_3_,7);
        FUN_00406560();
        (**(code **)(**(int **)(local_50 + 0x1a8) + 0x44))(local_4c,4);
        iVar1 = *DAT_00da9894;
        if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
          (**(code **)**(undefined4 **)(iVar1 + 0x114))("mc_quickslot.SetLootingEffect");
        }
        local_8 = local_8 & 0xffffff00;
        FUN_00406560();
        local_8 = 0xffffffff;
        FUN_00406560();
      }
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008f2280 : PUSH EBP
008f2281 : MOV EBP,ESP
008f2283 : PUSH -0x1
008f2285 : PUSH 0xb60096
008f228a : MOV EAX,FS:[0x0]
008f2290 : PUSH EAX
008f2291 : SUB ESP,0x7c
008f2294 : MOV EAX,[0x00d66fa0]
008f2299 : XOR EAX,EBP
008f229b : MOV dword ptr [EBP + -0x10],EAX
008f229e : PUSH EBX
008f229f : PUSH ESI
008f22a0 : PUSH EDI
008f22a1 : PUSH EAX
008f22a2 : LEA EAX,[EBP + -0xc]
008f22a5 : MOV FS:[0x0],EAX
008f22ab : MOV ESI,EDX
008f22ad : MOV EAX,ESI
008f22af : SHR EAX,0x18
008f22b2 : MOV dword ptr [EBP + -0x4c],ECX
008f22b5 : CMP AL,0x6
008f22b7 : JNZ 0x008f244c
008f22bd : MOV EDX,dword ptr [0x00da9894]
008f22c3 : MOV EAX,dword ptr [EDX]
008f22c5 : MOV EAX,dword ptr [EAX + 0x284]
008f22cb : MOV EAX,dword ptr [EAX + 0x138]
008f22d1 : XOR EBX,EBX
008f22d3 : CMP EAX,EBX
008f22d5 : JZ 0x008f22e7
008f22d7 : MOV EAX,ESI
008f22d9 : SHR EAX,0x10
008f22dc : CMP EAX,0x68c
008f22e1 : JZ 0x008f244c
008f22e7 : MOV EDI,dword ptr [EBP + 0xc]
008f22ea : MOV EAX,ECX
008f22ec : CALL 0x008eb580
008f22f1 : TEST EAX,EAX
008f22f3 : JZ 0x008f244c
008f22f9 : MOV EAX,[0x00da93ec]
008f22fe : CMP EAX,EBX
008f2300 : JZ 0x008f230e
008f2302 : CMP byte ptr [EAX + 0x4c0],BL
008f2308 : JNZ 0x008f244c
008f230e : PUSH ESI
008f230f : CALL 0x004049b0
008f2314 : MOV EDI,EAX
008f2316 : ADD ESP,0x4
008f2319 : CMP EDI,EBX
008f231b : JZ 0x008f244c
008f2321 : PUSH 0xc5dd80
008f2326 : LEA ECX,[EBP + -0x2c]
008f2329 : CALL 0x00406460
008f232e : MOV dword ptr [EBP + -0x4],EBX
008f2331 : MOV ECX,dword ptr [EBP + 0x8]
008f2334 : PUSH ECX
008f2335 : MOV ECX,dword ptr [0x017247f0]
008f233b : MOV EAX,ESI
008f233d : CALL 0x009f2840
008f2342 : PUSH EBX
008f2343 : CMP EAX,EBX
008f2345 : JZ 0x008f2356
008f2347 : PUSH EAX
008f2348 : LEA ECX,[EBP + -0x68]
008f234b : CALL 0x009b2070
008f2350 : MOV byte ptr [EBP + -0x4],0x1
008f2354 : JMP 0x008f236b
008f2356 : MOV EAX,[0x0172491c]
008f235b : LEA EDX,[EDI + 0x18]
008f235e : PUSH EAX
008f235f : LEA ESI,[EBP + -0x68]
008f2362 : CALL 0x00824a20
008f2367 : MOV byte ptr [EBP + -0x4],0x2
008f236b : PUSH -0x1
008f236d : PUSH EBX
008f236e : PUSH EAX
008f236f : LEA ECX,[EBP + -0x2c]
008f2372 : CALL 0x00405eb0
008f2377 : MOV byte ptr [EBP + -0x4],BL
008f237a : LEA ECX,[EBP + -0x68]
008f237d : CALL 0x00406560
008f2382 : PUSH 0xc5dd84
008f2387 : LEA ECX,[EBP + -0x68]
008f238a : CALL 0x00406460
008f238f : MOV byte ptr [EBP + -0x4],0x3
008f2393 : LEA ECX,[EBP + -0x68]
008f2396 : PUSH ECX
008f2397 : MOV ECX,dword ptr [0x0172491c]
008f239d : LEA EDI,[EBP + 0xffffff7c]
008f23a3 : CALL 0x0081d120
008f23a8 : MOV byte ptr [EBP + -0x4],0x4
008f23ac : MOV ECX,dword ptr [EBP + -0x28]
008f23af : MOV EDX,0x8
008f23b4 : CMP dword ptr [EBP + -0x14],EDX
008f23b7 : JNC 0x008f23bc
008f23b9 : LEA ECX,[EBP + -0x28]
008f23bc : CMP dword ptr [EAX + 0x18],EDX
008f23bf : JC 0x008f23c6
008f23c1 : MOV EAX,dword ptr [EAX + 0x4]
008f23c4 : JMP 0x008f23c9
008f23c6 : ADD EAX,0x4
008f23c9 : PUSH ECX
008f23ca : PUSH EAX
008f23cb : PUSH 0xc5ddb8
008f23d0 : LEA ESI,[EBP + -0x48]
008f23d3 : CALL 0x00404750
008f23d8 : ADD ESP,0xc
008f23db : MOV byte ptr [EBP + -0x4],0x6
008f23df : LEA ECX,[EBP + 0xffffff7c]
008f23e5 : CALL 0x00406560
008f23ea : MOV byte ptr [EBP + -0x4],0x7
008f23ee : LEA ECX,[EBP + -0x68]
008f23f1 : CALL 0x00406560
008f23f6 : MOV EDX,dword ptr [EBP + -0x4c]
008f23f9 : MOV ECX,dword ptr [EDX + 0x1a8]
008f23ff : MOV EAX,dword ptr [ECX]
008f2401 : MOV EAX,dword ptr [EAX + 0x44]
008f2404 : PUSH 0x4
008f2406 : MOV EDX,ESI
008f2408 : PUSH EDX
008f2409 : CALL EAX
008f240b : MOV ECX,dword ptr [0x00da9894]
008f2411 : MOV EAX,dword ptr [ECX]
008f2413 : CMP EAX,EBX
008f2415 : JZ 0x008f2432
008f2417 : CMP dword ptr [EAX + 0x114],EBX
008f241d : JZ 0x008f2432
008f241f : MOV EAX,dword ptr [EAX + 0x114]
008f2425 : MOV EDX,dword ptr [EAX]
008f2427 : MOV ECX,EAX
008f2429 : MOV EAX,dword ptr [EDX]
008f242b : PUSH 0xc5ddc4
008f2430 : CALL EAX
008f2432 : MOV byte ptr [EBP + -0x4],BL
008f2435 : LEA ECX,[EBP + -0x48]
008f2438 : CALL 0x00406560
008f243d : MOV dword ptr [EBP + -0x4],0xffffffff
008f2444 : LEA ECX,[EBP + -0x2c]
008f2447 : CALL 0x00406560
008f244c : MOV ECX,dword ptr [EBP + -0xc]
008f244f : MOV dword ptr FS:[0x0],ECX
008f2456 : POP ECX
008f2457 : POP EDI
008f2458 : POP ESI
008f2459 : POP EBX
008f245a : MOV ECX,dword ptr [EBP + -0x10]
008f245d : XOR ECX,EBP
008f245f : CALL 0x00633e6b
008f2464 : MOV ESP,EBP
008f2466 : POP EBP
008f2467 : RET 0x8
