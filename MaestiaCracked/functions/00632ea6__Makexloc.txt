PROGRAM  : Maestia.exe
FUNCTION : _Makexloc
ENTRY    : 00632ea6
BODY     : [[00632ea6, 00633180]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    private: static void __cdecl std::locale::_Locimp::_Makexloc(class std::_Locinfo const
   &,int,class std::locale::_Locimp *,class std::locale const *)
   
   Library: Visual Studio 2008 Release */

void __cdecl
std::locale::_Locimp::_Makexloc(_Locinfo *param_1,int param_2,_Locimp *param_3,locale *param_4)

{
  collate<char> *this;
  facet *pfVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  moneypunct<char,0> *this_00;
  moneypunct<char,1> *this_01;
  time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_> *this_02;
  time_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_> *this_03;
  
  if ((param_2 & 1U) != 0) {
    if (param_4 == (locale *)0x0) {
      this = (collate<char> *)FUN_006f0300(0x10);
      if (this == (collate<char> *)0x0) {
        pfVar1 = (facet *)0x0;
      }
      else {
        pfVar1 = (facet *)collate<char>::collate<char>(this,param_1,0);
      }
      uVar2 = FUN_004d03e0();
    }
    else {
      uVar2 = FUN_004d03e0();
      pfVar1 = (facet *)use_facet<class_std::collate<char>_>(param_4);
    }
    _Addfac(param_3,pfVar1,uVar2);
  }
  if ((param_2 & 0x20U) != 0) {
    if (param_4 == (locale *)0x0) {
      pfVar1 = (facet *)FUN_006f0300(8);
      if (pfVar1 == (facet *)0x0) {
        pfVar1 = (facet *)0x0;
      }
      else {
        *(undefined4 *)(pfVar1 + 4) = 0;
        *(undefined ***)pfVar1 = messages<char>::vftable;
      }
      uVar2 = FUN_004d03e0();
    }
    else {
      uVar2 = FUN_004d03e0();
      pfVar1 = (facet *)use_facet<class_std::messages<char>_>(param_4);
    }
    _Addfac(param_3,pfVar1,uVar2);
  }
  uVar2 = param_2 & 4;
  if (uVar2 != 0) {
    if (param_4 == (locale *)0x0) {
      iVar3 = FUN_006f0300(0x10);
      if (iVar3 == 0) {
        pfVar1 = (facet *)0x0;
      }
      else {
        pfVar1 = (facet *)FID_conflict_money_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                                    (param_1,0);
      }
      uVar4 = FUN_004d03e0();
    }
    else {
      uVar4 = FUN_004d03e0();
      pfVar1 = (facet *)::use_facet<>(param_4);
    }
    _Addfac(param_3,pfVar1,uVar4);
  }
  if (uVar2 != 0) {
    if (param_4 == (locale *)0x0) {
      iVar3 = FUN_006f0300(0x10);
      if (iVar3 == 0) {
        pfVar1 = (facet *)0x0;
      }
      else {
        pfVar1 = (facet *)FID_conflict_money_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                                    (param_1,0);
      }
      uVar4 = FUN_004d03e0();
    }
    else {
      uVar4 = FUN_004d03e0();
      pfVar1 = (facet *)::use_facet<>(param_4);
    }
    _Addfac(param_3,pfVar1,uVar4);
    if (uVar2 != 0) {
      if (param_4 == (locale *)0x0) {
        this_00 = (moneypunct<char,0> *)FUN_006f0300(0x34);
        if (this_00 == (moneypunct<char,0> *)0x0) {
          pfVar1 = (facet *)0x0;
        }
        else {
          pfVar1 = (facet *)moneypunct<char,0>::moneypunct<char,0>(this_00,param_1,0,false);
        }
        uVar4 = FUN_004d03e0();
      }
      else {
        uVar4 = FUN_004d03e0();
        pfVar1 = (facet *)::use_facet<>(param_4);
      }
      _Addfac(param_3,pfVar1,uVar4);
      if (uVar2 != 0) {
        if (param_4 == (locale *)0x0) {
          this_01 = (moneypunct<char,1> *)FUN_006f0300(0x34);
          if (this_01 == (moneypunct<char,1> *)0x0) {
            pfVar1 = (facet *)0x0;
          }
          else {
            pfVar1 = (facet *)moneypunct<char,1>::moneypunct<char,1>(this_01,param_1,0,false);
          }
          uVar2 = FUN_004d03e0();
        }
        else {
          uVar2 = FUN_004d03e0();
          pfVar1 = (facet *)::use_facet<>(param_4);
        }
        _Addfac(param_3,pfVar1,uVar2);
      }
    }
  }
  if ((param_2 & 0x10U) != 0) {
    if (param_4 == (locale *)0x0) {
      this_02 = (time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_>
                 *)FUN_006f0300(0x1c);
      if (this_02 ==
          (time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_> *)0x0
         ) {
        pfVar1 = (facet *)0x0;
      }
      else {
        pfVar1 = (facet *)time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_>
                          ::
                          time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_>
                                    (this_02,param_1,0);
      }
      uVar2 = FUN_004d03e0();
    }
    else {
      uVar2 = FUN_004d03e0();
      pfVar1 = (facet *)use_facet<class_std::time_get<char,class_std::istreambuf_iterator<char,struct_std::char_traits<char>_>_>_>
                                  (param_4);
    }
    _Addfac(param_3,pfVar1,uVar2);
  }
  if ((param_2 & 0x10U) != 0) {
    if (param_4 == (locale *)0x0) {
      this_03 = (time_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                 *)FUN_006f0300(0x14);
      if (this_03 ==
          (time_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_> *)0x0
         ) {
        pfVar1 = (facet *)0x0;
      }
      else {
        pfVar1 = (facet *)time_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                          ::
                          time_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                                    (this_03,param_1,0);
      }
      uVar2 = FUN_004d03e0();
    }
    else {
      uVar2 = FUN_004d03e0();
      pfVar1 = (facet *)::use_facet<>(param_4);
    }
    _Addfac(param_3,pfVar1,uVar2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00632ea6 : PUSH 0x4
00632ea8 : MOV EAX,0xb0c48b
00632ead : CALL 0x00640e1d
00632eb2 : XOR EDI,EDI
00632eb4 : MOV dword ptr [EBP + -0x10],EDI
00632eb7 : MOV EBX,dword ptr [EBP + 0xc]
00632eba : TEST BL,0x1
00632ebd : JZ 0x00632f0c
00632ebf : CMP dword ptr [EBP + 0x14],EDI
00632ec2 : JNZ 0x00632eef
00632ec4 : PUSH 0x10
00632ec6 : CALL 0x006f0300
00632ecb : POP ECX
00632ecc : CMP EAX,EDI
00632ece : JZ 0x00632edf
00632ed0 : PUSH EDI
00632ed1 : PUSH dword ptr [EBP + 0x8]
00632ed4 : MOV ECX,EAX
00632ed6 : CALL 0x006304e8
00632edb : MOV ESI,EAX
00632edd : JMP 0x00632ee1
00632edf : XOR ESI,ESI
00632ee1 : MOV ECX,0xd7b62c
00632ee6 : CALL 0x004d03e0
00632eeb : PUSH EAX
00632eec : PUSH ESI
00632eed : JMP 0x00632f04
00632eef : MOV ECX,0xd7b62c
00632ef4 : CALL 0x004d03e0
00632ef9 : PUSH EAX
00632efa : PUSH dword ptr [EBP + 0x14]
00632efd : CALL 0x0063105c
00632f02 : POP ECX
00632f03 : PUSH EAX
00632f04 : MOV ECX,dword ptr [EBP + 0x10]
00632f07 : CALL 0x00623162
00632f0c : TEST BL,0x20
00632f0f : JZ 0x00632f5c
00632f11 : CMP dword ptr [EBP + 0x14],EDI
00632f14 : JNZ 0x00632f3f
00632f16 : PUSH 0x8
00632f18 : CALL 0x006f0300
00632f1d : POP ECX
00632f1e : CMP EAX,EDI
00632f20 : JZ 0x00632f2f
00632f22 : MOV dword ptr [EAX + 0x4],EDI
00632f25 : MOV dword ptr [EAX],0xb95fa8
00632f2b : MOV ESI,EAX
00632f2d : JMP 0x00632f31
00632f2f : XOR ESI,ESI
00632f31 : MOV ECX,0xd7b644
00632f36 : CALL 0x004d03e0
00632f3b : PUSH EAX
00632f3c : PUSH ESI
00632f3d : JMP 0x00632f54
00632f3f : MOV ECX,0xd7b644
00632f44 : CALL 0x004d03e0
00632f49 : PUSH EAX
00632f4a : PUSH dword ptr [EBP + 0x14]
00632f4d : CALL 0x006310f9
00632f52 : POP ECX
00632f53 : PUSH EAX
00632f54 : MOV ECX,dword ptr [EBP + 0x10]
00632f57 : CALL 0x00623162
00632f5c : AND EBX,0x4
00632f5f : JZ 0x00632fae
00632f61 : CMP dword ptr [EBP + 0x14],EDI
00632f64 : JNZ 0x00632f91
00632f66 : PUSH 0x10
00632f68 : CALL 0x006f0300
00632f6d : POP ECX
00632f6e : CMP EAX,EDI
00632f70 : JZ 0x00632f81
00632f72 : PUSH EDI
00632f73 : PUSH dword ptr [EBP + 0x8]
00632f76 : MOV ECX,EAX
00632f78 : CALL 0x00630550
00632f7d : MOV ESI,EAX
00632f7f : JMP 0x00632f83
00632f81 : XOR ESI,ESI
00632f83 : MOV ECX,0xd7b634
00632f88 : CALL 0x004d03e0
00632f8d : PUSH EAX
00632f8e : PUSH ESI
00632f8f : JMP 0x00632fa6
00632f91 : MOV ECX,0xd7b634
00632f96 : CALL 0x004d03e0
00632f9b : PUSH EAX
00632f9c : PUSH dword ptr [EBP + 0x14]
00632f9f : CALL 0x00631196
00632fa4 : POP ECX
00632fa5 : PUSH EAX
00632fa6 : MOV ECX,dword ptr [EBP + 0x10]
00632fa9 : CALL 0x00623162
00632fae : CMP EBX,EDI
00632fb0 : JZ 0x006330c7
00632fb6 : CMP dword ptr [EBP + 0x14],EDI
00632fb9 : JNZ 0x00632fe6
00632fbb : PUSH 0x10
00632fbd : CALL 0x006f0300
00632fc2 : POP ECX
00632fc3 : CMP EAX,EDI
00632fc5 : JZ 0x00632fd6
00632fc7 : PUSH EDI
00632fc8 : PUSH dword ptr [EBP + 0x8]
00632fcb : MOV ECX,EAX
00632fcd : CALL 0x006305a4
00632fd2 : MOV ESI,EAX
00632fd4 : JMP 0x00632fd8
00632fd6 : XOR ESI,ESI
00632fd8 : MOV ECX,0xd7b630
00632fdd : CALL 0x004d03e0
00632fe2 : PUSH EAX
00632fe3 : PUSH ESI
00632fe4 : JMP 0x00632ffb
00632fe6 : MOV ECX,0xd7b630
00632feb : CALL 0x004d03e0
00632ff0 : PUSH EAX
00632ff1 : PUSH dword ptr [EBP + 0x14]
00632ff4 : CALL 0x00631233
00632ff9 : POP ECX
00632ffa : PUSH EAX
00632ffb : MOV ECX,dword ptr [EBP + 0x10]
00632ffe : CALL 0x00623162
00633003 : CMP EBX,EDI
00633005 : JZ 0x006330c7
0063300b : CMP dword ptr [EBP + 0x14],EDI
0063300e : JNZ 0x0063304a
00633010 : PUSH 0x34
00633012 : CALL 0x006f0300
00633017 : POP ECX
00633018 : MOV ECX,EAX
0063301a : MOV dword ptr [EBP + -0x10],ECX
0063301d : MOV dword ptr [EBP + -0x4],0x11
00633024 : CMP ECX,EDI
00633026 : JZ 0x00633036
00633028 : PUSH EDI
00633029 : PUSH EDI
0063302a : PUSH dword ptr [EBP + 0x8]
0063302d : CALL 0x006308e3
00633032 : MOV ESI,EAX
00633034 : JMP 0x00633038
00633036 : XOR ESI,ESI
00633038 : OR dword ptr [EBP + -0x4],0xffffffff
0063303c : MOV ECX,0xd7b640
00633041 : CALL 0x004d03e0
00633046 : PUSH EAX
00633047 : PUSH ESI
00633048 : JMP 0x0063305f
0063304a : MOV ECX,0xd7b640
0063304f : CALL 0x004d03e0
00633054 : PUSH EAX
00633055 : PUSH dword ptr [EBP + 0x14]
00633058 : CALL 0x006312d0
0063305d : POP ECX
0063305e : PUSH EAX
0063305f : MOV ECX,dword ptr [EBP + 0x10]
00633062 : CALL 0x00623162
00633067 : CMP EBX,EDI
00633069 : JZ 0x006330c7
0063306b : CMP dword ptr [EBP + 0x14],EDI
0063306e : JNZ 0x006330aa
00633070 : PUSH 0x34
00633072 : CALL 0x006f0300
00633077 : POP ECX
00633078 : MOV ECX,EAX
0063307a : MOV dword ptr [EBP + -0x10],ECX
0063307d : MOV dword ptr [EBP + -0x4],0x17
00633084 : CMP ECX,EDI
00633086 : JZ 0x00633096
00633088 : PUSH EDI
00633089 : PUSH EDI
0063308a : PUSH dword ptr [EBP + 0x8]
0063308d : CALL 0x0063092f
00633092 : MOV ESI,EAX
00633094 : JMP 0x00633098
00633096 : XOR ESI,ESI
00633098 : OR dword ptr [EBP + -0x4],0xffffffff
0063309c : MOV ECX,0xd7b63c
006330a1 : CALL 0x004d03e0
006330a6 : PUSH EAX
006330a7 : PUSH ESI
006330a8 : JMP 0x006330bf
006330aa : MOV ECX,0xd7b63c
006330af : CALL 0x004d03e0
006330b4 : PUSH EAX
006330b5 : PUSH dword ptr [EBP + 0x14]
006330b8 : CALL 0x0063136d
006330bd : POP ECX
006330be : PUSH EAX
006330bf : MOV ECX,dword ptr [EBP + 0x10]
006330c2 : CALL 0x00623162
006330c7 : MOV EBX,dword ptr [EBP + 0xc]
006330ca : AND EBX,0x10
006330cd : JZ 0x0063312a
006330cf : CMP dword ptr [EBP + 0x14],EDI
006330d2 : JNZ 0x0063310d
006330d4 : PUSH 0x1c
006330d6 : CALL 0x006f0300
006330db : POP ECX
006330dc : MOV ECX,EAX
006330de : MOV dword ptr [EBP + 0xc],ECX
006330e1 : MOV dword ptr [EBP + -0x4],0x1d
006330e8 : CMP ECX,EDI
006330ea : JZ 0x006330f9
006330ec : PUSH EDI
006330ed : PUSH dword ptr [EBP + 0x8]
006330f0 : CALL 0x006325a5
006330f5 : MOV ESI,EAX
006330f7 : JMP 0x006330fb
006330f9 : XOR ESI,ESI
006330fb : OR dword ptr [EBP + -0x4],0xffffffff
006330ff : MOV ECX,0xd7b628
00633104 : CALL 0x004d03e0
00633109 : PUSH EAX
0063310a : PUSH ESI
0063310b : JMP 0x00633122
0063310d : MOV ECX,0xd7b628
00633112 : CALL 0x004d03e0
00633117 : PUSH EAX
00633118 : PUSH dword ptr [EBP + 0x14]
0063311b : CALL 0x00632e09
00633120 : POP ECX
00633121 : PUSH EAX
00633122 : MOV ECX,dword ptr [EBP + 0x10]
00633125 : CALL 0x00623162
0063312a : CMP EBX,EDI
0063312c : JZ 0x0063317b
0063312e : CMP dword ptr [EBP + 0x14],EDI
00633131 : JNZ 0x0063315e
00633133 : PUSH 0x14
00633135 : CALL 0x006f0300
0063313a : POP ECX
0063313b : CMP EAX,EDI
0063313d : JZ 0x0063314e
0063313f : PUSH EDI
00633140 : PUSH dword ptr [EBP + 0x8]
00633143 : MOV ECX,EAX
00633145 : CALL 0x006305e7
0063314a : MOV ESI,EAX
0063314c : JMP 0x00633150
0063314e : XOR ESI,ESI
00633150 : MOV ECX,0xd7b638
00633155 : CALL 0x004d03e0
0063315a : PUSH EAX
0063315b : PUSH ESI
0063315c : JMP 0x00633173
0063315e : MOV ECX,0xd7b638
00633163 : CALL 0x004d03e0
00633168 : PUSH EAX
00633169 : PUSH dword ptr [EBP + 0x14]
0063316c : CALL 0x0063140a
00633171 : POP ECX
00633172 : PUSH EAX
00633173 : MOV ECX,dword ptr [EBP + 0x10]
00633176 : CALL 0x00623162
0063317b : CALL 0x00640ebc
00633180 : RET
