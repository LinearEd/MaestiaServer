PROGRAM  : Maestia.exe
FUNCTION : FUN_0078e650
ENTRY    : 0078e650
BODY     : [[0078e650, 0078e8b1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0078e650(void)

{
  undefined4 uVar1;
  char cVar2;
  uint uVar3;
  int iVar4;
  undefined4 ****ppppuVar5;
  int unaff_EDI;
  undefined4 local_88;
  undefined1 local_4c [4];
  undefined4 ***local_48 [4];
  uint local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b47d94;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar3;
  if ((((DAT_00d6ab01 != '\0') || (*(char *)(unaff_EDI + 0x24) == '\0')) &&
      ((*(int *)(DAT_017251ac + 0x20) == 0 || (*(char *)(unaff_EDI + 0x24) == '\0')))) &&
     (*(char *)(unaff_EDI + 0x5d) == '\0')) {
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    local_18 = 7;
    local_1c = 0;
    FUN_00405eb0(unaff_EDI + 4,0,0xffffffff);
    local_8 = 0;
    FUN_0070d390(uVar3);
    uVar1 = DAT_017251c8;
    local_8._0_1_ = 1;
    *(undefined1 *)(unaff_EDI + 0x24) = 0;
    cVar2 = FUN_008036f0(uVar1,local_30);
    if (cVar2 != '\0') {
      FUN_0040e420(local_30,local_4c);
      local_8._0_1_ = 2;
      FUN_0070c1f0();
      if (local_34 < 8) {
        local_48[0] = local_48;
      }
      iVar4 = FUN_00405b70(local_48[0]);
      if (((iVar4 == 0) && (2 < local_38)) && (local_38 == 3)) {
        *(undefined4 *)(unaff_EDI + 0x58) = 0;
      }
      iVar4 = FUN_007b4450(*(undefined4 *)(DAT_017251ac + 0x18),local_88,0xffffffff,0xffffffff,0,0,
                           DAT_00d6ab01 == '\0',1,5,*(undefined4 *)(unaff_EDI + 0x58),
                           unaff_EDI + 0x3c,unaff_EDI + 0x38,1);
      if (iVar4 < 0) {
        ppppuVar5 = (undefined4 ****)local_2c[0];
        if (local_18 < 8) {
          ppppuVar5 = local_2c;
        }
        FUN_008018d0(L"[AvaMeshTxtr::Restore] Failed CreateTextureFromFileInMemoryEx Name : %s, (%d)"
                     ,ppppuVar5,iVar4);
        FUN_00664d50(iVar4);
        FUN_0070d4c0();
        *(undefined1 *)(unaff_EDI + 0x5c) = 1;
        local_8._0_1_ = 1;
        FUN_00406560();
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_0070d710();
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      else {
        FUN_0070d4c0();
        *(undefined1 *)(unaff_EDI + 0x24) = 1;
        if (*(char *)(unaff_EDI + 0x60) != '\0') {
          FUN_0078e480();
        }
        local_8._0_1_ = 1;
        FUN_00406560();
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_0070d710();
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      goto LAB_0078e897;
    }
    FUN_0070d4c0();
    *(undefined1 *)(unaff_EDI + 0x5c) = 1;
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_0070d710();
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  }
  local_8 = 0xffffffff;
LAB_0078e897:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0078e650 : PUSH EBP
0078e651 : MOV EBP,ESP
0078e653 : PUSH -0x1
0078e655 : PUSH 0xb47d94
0078e65a : MOV EAX,FS:[0x0]
0078e660 : PUSH EAX
0078e661 : SUB ESP,0x98
0078e667 : MOV EAX,[0x00d66fa0]
0078e66c : XOR EAX,EBP
0078e66e : MOV dword ptr [EBP + -0x10],EAX
0078e671 : PUSH EBX
0078e672 : PUSH ESI
0078e673 : PUSH EAX
0078e674 : LEA EAX,[EBP + -0xc]
0078e677 : MOV FS:[0x0],EAX
0078e67d : CMP byte ptr [0x00d6ab01],0x0
0078e684 : JNZ 0x0078e690
0078e686 : CMP byte ptr [EDI + 0x24],0x0
0078e68a : JNZ 0x0078e73e
0078e690 : MOV EAX,[0x017251ac]
0078e695 : XOR ESI,ESI
0078e697 : CMP dword ptr [EAX + 0x20],ESI
0078e69a : JZ 0x0078e6a6
0078e69c : CMP byte ptr [EDI + 0x24],0x0
0078e6a0 : JNZ 0x0078e73e
0078e6a6 : CMP byte ptr [EDI + 0x5d],0x0
0078e6aa : JNZ 0x0078e73e
0078e6b0 : PUSH -0x1
0078e6b2 : XOR ECX,ECX
0078e6b4 : LEA EAX,[EDI + 0x4]
0078e6b7 : PUSH ESI
0078e6b8 : MOV word ptr [EBP + -0x28],CX
0078e6bc : MOV EBX,0x7
0078e6c1 : PUSH EAX
0078e6c2 : LEA ECX,[EBP + -0x2c]
0078e6c5 : MOV dword ptr [EBP + -0x14],EBX
0078e6c8 : MOV dword ptr [EBP + -0x18],ESI
0078e6cb : CALL 0x00405eb0
0078e6d0 : MOV dword ptr [EBP + -0x4],ESI
0078e6d3 : LEA ECX,[EBP + 0xffffff60]
0078e6d9 : CALL 0x0070d390
0078e6de : MOV byte ptr [EBP + -0x4],0x1
0078e6e2 : MOV EAX,[0x017251c8]
0078e6e7 : LEA EDX,[EBP + -0x2c]
0078e6ea : PUSH EDX
0078e6eb : PUSH EAX
0078e6ec : LEA ECX,[EBP + 0xffffff60]
0078e6f2 : MOV byte ptr [EDI + 0x24],0x0
0078e6f6 : CALL 0x008036f0
0078e6fb : TEST AL,AL
0078e6fd : JNZ 0x0078e745
0078e6ff : LEA ECX,[EBP + 0xffffff60]
0078e705 : CALL 0x0070d4c0
0078e70a : MOV byte ptr [EDI + 0x5c],0x1
0078e70e : MOV byte ptr [EBP + -0x4],0x0
0078e712 : LEA ECX,[EBP + 0xffffff60]
0078e718 : CALL 0x0070d710
0078e71d : MOV dword ptr [EBP + -0x4],0xffffffff
0078e724 : CMP dword ptr [EBP + -0x14],0x8
0078e728 : JC 0x0078e732
0078e72a : MOV ECX,dword ptr [EBP + -0x28]
0078e72d : CALL 0x006f04e0
0078e732 : XOR ECX,ECX
0078e734 : MOV dword ptr [EBP + -0x14],EBX
0078e737 : MOV dword ptr [EBP + -0x18],ESI
0078e73a : MOV word ptr [EBP + -0x28],CX
0078e73e : XOR AL,AL
0078e740 : JMP 0x0078e897
0078e745 : MOV ECX,dword ptr [EBP + -0x18]
0078e748 : LEA EAX,[EBP + -0x48]
0078e74b : PUSH EAX
0078e74c : LEA EAX,[EBP + -0x2c]
0078e74f : LEA EDX,[ECX + -0x3]
0078e752 : PUSH EAX
0078e753 : CALL 0x0040e420
0078e758 : MOV byte ptr [EBP + -0x4],0x2
0078e75c : LEA ECX,[EBP + -0x48]
0078e75f : CALL 0x0070c1f0
0078e764 : MOV EBX,dword ptr [EBP + -0x34]
0078e767 : MOV EDX,EBX
0078e769 : CMP EBX,0x3
0078e76c : JC 0x0078e773
0078e76e : MOV EDX,0x3
0078e773 : CMP dword ptr [EBP + -0x30],0x8
0078e777 : MOV EAX,dword ptr [EBP + -0x44]
0078e77a : JNC 0x0078e77f
0078e77c : LEA EAX,[EBP + -0x44]
0078e77f : PUSH EAX
0078e780 : MOV ECX,0xc13a34
0078e785 : CALL 0x00405b70
0078e78a : ADD ESP,0x4
0078e78d : CMP EAX,ESI
0078e78f : JNZ 0x0078e7a5
0078e791 : CMP EBX,0x3
0078e794 : JC 0x0078e7a5
0078e796 : XOR EAX,EAX
0078e798 : CMP EBX,0x3
0078e79b : SETNZ AL
0078e79e : CMP EAX,ESI
0078e7a0 : JNZ 0x0078e7a5
0078e7a2 : MOV dword ptr [EDI + 0x58],ESI
0078e7a5 : MOV ECX,dword ptr [0x017251ac]
0078e7ab : PUSH 0x1
0078e7ad : MOV ECX,dword ptr [ECX + 0x18]
0078e7b0 : XOR EAX,EAX
0078e7b2 : CMP byte ptr [0x00d6ab01],AL
0078e7b8 : LEA EDX,[EDI + 0x38]
0078e7bb : PUSH EDX
0078e7bc : LEA EDX,[EDI + 0x3c]
0078e7bf : PUSH EDX
0078e7c0 : MOV EDX,dword ptr [EDI + 0x58]
0078e7c3 : PUSH EDX
0078e7c4 : PUSH 0x5
0078e7c6 : SETZ AL
0078e7c9 : PUSH 0x1
0078e7cb : PUSH EAX
0078e7cc : MOV EAX,dword ptr [EBP + 0xffffff7c]
0078e7d2 : PUSH ESI
0078e7d3 : PUSH ESI
0078e7d4 : PUSH -0x1
0078e7d6 : PUSH -0x1
0078e7d8 : PUSH EAX
0078e7d9 : PUSH ECX
0078e7da : MOV ECX,dword ptr [EBP + -0x80]
0078e7dd : CALL 0x007b4450
0078e7e2 : MOV EBX,EAX
0078e7e4 : ADD ESP,0x34
0078e7e7 : CMP EBX,ESI
0078e7e9 : JGE 0x0078e84f
0078e7eb : CMP dword ptr [EBP + -0x14],0x8
0078e7ef : MOV EAX,dword ptr [EBP + -0x28]
0078e7f2 : JNC 0x0078e7f7
0078e7f4 : LEA EAX,[EBP + -0x28]
0078e7f7 : MOV ESI,dword ptr [0x00da98e8]
0078e7fd : PUSH EBX
0078e7fe : PUSH EAX
0078e7ff : PUSH 0xc13a40
0078e804 : CALL 0x008018d0
0078e809 : ADD ESP,0xc
0078e80c : PUSH EBX
0078e80d : CALL 0x00664d50
0078e812 : LEA ECX,[EBP + 0xffffff60]
0078e818 : CALL 0x0070d4c0
0078e81d : MOV byte ptr [EDI + 0x5c],0x1
0078e821 : MOV byte ptr [EBP + -0x4],0x1
0078e825 : LEA ECX,[EBP + -0x48]
0078e828 : CALL 0x00406560
0078e82d : MOV byte ptr [EBP + -0x4],0x0
0078e831 : LEA ECX,[EBP + 0xffffff60]
0078e837 : CALL 0x0070d710
0078e83c : MOV dword ptr [EBP + -0x4],0xffffffff
0078e843 : LEA ECX,[EBP + -0x2c]
0078e846 : CALL 0x00406560
0078e84b : XOR AL,AL
0078e84d : JMP 0x0078e897
0078e84f : LEA ECX,[EBP + 0xffffff60]
0078e855 : CALL 0x0070d4c0
0078e85a : CMP byte ptr [EDI + 0x60],0x0
0078e85e : MOV byte ptr [EDI + 0x24],0x1
0078e862 : JZ 0x0078e86b
0078e864 : MOV ECX,EDI
0078e866 : CALL 0x0078e480
0078e86b : MOV byte ptr [EBP + -0x4],0x1
0078e86f : LEA ECX,[EBP + -0x48]
0078e872 : CALL 0x00406560
0078e877 : MOV byte ptr [EBP + -0x4],0x0
0078e87b : LEA ECX,[EBP + 0xffffff60]
0078e881 : CALL 0x0070d710
0078e886 : MOV dword ptr [EBP + -0x4],0xffffffff
0078e88d : LEA ECX,[EBP + -0x2c]
0078e890 : CALL 0x00406560
0078e895 : MOV AL,0x1
0078e897 : MOV ECX,dword ptr [EBP + -0xc]
0078e89a : MOV dword ptr FS:[0x0],ECX
0078e8a1 : POP ECX
0078e8a2 : POP ESI
0078e8a3 : POP EBX
0078e8a4 : MOV ECX,dword ptr [EBP + -0x10]
0078e8a7 : XOR ECX,EBP
0078e8a9 : CALL 0x00633e6b
0078e8ae : MOV ESP,EBP
0078e8b0 : POP EBP
0078e8b1 : RET
