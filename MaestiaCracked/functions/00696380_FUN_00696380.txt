PROGRAM  : Maestia.exe
FUNCTION : FUN_00696380
ENTRY    : 00696380
BODY     : [[00696380, 006964b0]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00696380(void)

{
  ushort uVar1;
  int in_EAX;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  ushort *in_ECX;
  uint uVar5;
  uint uVar6;
  int local_4;
  
  uVar1 = in_ECX[2];
  uVar2 = *(undefined4 *)(in_EAX + 0x1c);
  switch(uVar1) {
  case 1:
  case 3:
    if (*in_ECX <= in_ECX[1]) {
      iVar4 = (uint)in_ECX[1] - (uint)*in_ECX;
      *(int *)(in_ECX + 0xc) = iVar4 + 1;
      uVar5 = iVar4 + 2;
      uVar2 = FUN_0068a220(uVar2,4,0,uVar5,0,&local_4);
      *(undefined4 *)(in_ECX + 0xe) = uVar2;
      if (local_4 != 0) {
        return local_4;
      }
      iVar4 = FUN_00688900();
      if (iVar4 != 0) {
        return iVar4;
      }
      uVar6 = 0;
      local_4 = 0;
      if (uVar5 != 0) {
        do {
          if (uVar1 == 1) {
            uVar3 = FUN_006879a0();
          }
          else {
            uVar3 = FUN_00687940();
            uVar3 = uVar3 & 0xffff;
          }
          *(uint *)(*(int *)(in_ECX + 0xe) + uVar6 * 4) = *(int *)(in_ECX + 4) + uVar3;
          uVar6 = uVar6 + 1;
        } while (uVar6 < uVar5);
      }
      FUN_006889b0();
      return local_4;
    }
  default:
    local_4 = 3;
    break;
  case 2:
    iVar4 = FUN_00696250();
    return iVar4;
  case 4:
    iVar4 = FUN_00696290(1);
    return iVar4;
  case 5:
    local_4 = FUN_00696250();
    if (local_4 == 0) {
      iVar4 = FUN_00696290(0);
      return iVar4;
    }
  }
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
00696380 : SUB ESP,0x8
00696383 : PUSH EBX
00696384 : PUSH EBP
00696385 : PUSH ESI
00696386 : PUSH EDI
00696387 : MOV EDI,ECX
00696389 : MOV EBX,EAX
0069638b : MOVZX EAX,word ptr [EDI + 0x4]
0069638f : MOV EDX,dword ptr [EBX + 0x1c]
00696392 : MOVZX ECX,AX
00696395 : DEC ECX
00696396 : CMP ECX,0x4
00696399 : JA 0x006964a4
0069639f : JMP dword ptr [ECX*0x4 + 0x6964b4]
006963a6 : MOVZX ECX,word ptr [EDI]
006963a9 : CMP AX,0x1
006963ad : MOVZX EAX,word ptr [EDI + 0x2]
006963b1 : SETZ byte ptr [ESP + 0x13]
006963b6 : CMP AX,CX
006963b9 : JC 0x006964a4
006963bf : MOVZX EBP,AX
006963c2 : MOVZX ECX,CX
006963c5 : SUB EBP,ECX
006963c7 : LEA EAX,[ESP + 0x14]
006963cb : PUSH EAX
006963cc : INC EBP
006963cd : PUSH 0x0
006963cf : MOV dword ptr [EDI + 0x18],EBP
006963d2 : INC EBP
006963d3 : PUSH EBP
006963d4 : PUSH 0x0
006963d6 : PUSH 0x4
006963d8 : PUSH EDX
006963d9 : CALL 0x0068a220
006963de : MOV dword ptr [EDI + 0x1c],EAX
006963e1 : MOV EAX,dword ptr [ESP + 0x2c]
006963e5 : ADD ESP,0x18
006963e8 : TEST EAX,EAX
006963ea : JNZ 0x006964a9
006963f0 : XOR ECX,ECX
006963f2 : CMP byte ptr [ESP + 0x13],CL
006963f6 : SETNZ CL
006963f9 : LEA ECX,[ECX + ECX*0x1 + 0x2]
006963fd : IMUL ECX,EBP
00696400 : PUSH ECX
00696401 : PUSH EBX
00696402 : CALL 0x00688900
00696407 : ADD ESP,0x8
0069640a : MOV dword ptr [ESP + 0x14],EAX
0069640e : TEST EAX,EAX
00696410 : JNZ 0x006964a9
00696416 : XOR ESI,ESI
00696418 : TEST EBP,EBP
0069641a : JBE 0x0069644a
0069641c : LEA ESP,[ESP]
00696420 : CMP byte ptr [ESP + 0x13],0x0
00696425 : PUSH EBX
00696426 : JZ 0x0069642f
00696428 : CALL 0x006879a0
0069642d : JMP 0x00696437
0069642f : CALL 0x00687940
00696434 : MOVZX EAX,AX
00696437 : MOV EDX,dword ptr [EDI + 0x8]
0069643a : ADD EDX,EAX
0069643c : MOV EAX,dword ptr [EDI + 0x1c]
0069643f : MOV dword ptr [EAX + ESI*0x4],EDX
00696442 : INC ESI
00696443 : ADD ESP,0x4
00696446 : CMP ESI,EBP
00696448 : JC 0x00696420
0069644a : PUSH EBX
0069644b : CALL 0x006889b0
00696450 : MOV EAX,dword ptr [ESP + 0x18]
00696454 : ADD ESP,0x4
00696457 : POP EDI
00696458 : POP ESI
00696459 : POP EBP
0069645a : POP EBX
0069645b : ADD ESP,0x8
0069645e : RET
0069645f : MOV ESI,EBX
00696461 : MOV EAX,EDI
00696463 : CALL 0x00696250
00696468 : POP EDI
00696469 : POP ESI
0069646a : POP EBP
0069646b : POP EBX
0069646c : ADD ESP,0x8
0069646f : RET
00696470 : PUSH 0x1
00696472 : CALL 0x00696290
00696477 : ADD ESP,0x4
0069647a : POP EDI
0069647b : POP ESI
0069647c : POP EBP
0069647d : POP EBX
0069647e : ADD ESP,0x8
00696481 : RET
00696482 : MOV ESI,EBX
00696484 : MOV EAX,EDI
00696486 : CALL 0x00696250
0069648b : MOV dword ptr [ESP + 0x14],EAX
0069648f : TEST EAX,EAX
00696491 : JNZ 0x006964a9
00696493 : PUSH EAX
00696494 : CALL 0x00696290
00696499 : ADD ESP,0x4
0069649c : POP EDI
0069649d : POP ESI
0069649e : POP EBP
0069649f : POP EBX
006964a0 : ADD ESP,0x8
006964a3 : RET
006964a4 : MOV EAX,0x3
006964a9 : POP EDI
006964aa : POP ESI
006964ab : POP EBP
006964ac : POP EBX
006964ad : ADD ESP,0x8
006964b0 : RET
