PROGRAM  : Maestia.exe
FUNCTION : FUN_009d2540
ENTRY    : 009d2540
BODY     : [[009d2540, 009d2714] [009d271b, 009d2744] [009d2747, 009d2756] [009d275e, 009d27d7] [009d27e1, 009d28c1] [009d28c4, 009d2901] [009d2904, 009d293d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x009d25fb) */
/* WARNING: Removing unreachable block (ram,0x009d2677) */

void FUN_009d2540(void)

{
  char cVar1;
  uint *puVar2;
  int iVar3;
  uint *puVar4;
  uint *puVar5;
  uint uVar6;
  int iVar7;
  undefined4 uVar8;
  undefined4 *in_ECX;
  int iVar9;
  int *piVar10;
  undefined4 local_24;
  uint *local_1c;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b36315;
  local_10 = ExceptionList;
  uVar6 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_LAB_00ccc140;
  local_8 = 10;
  piVar10 = (int *)in_ECX[0x35];
  if (piVar10 != (int *)in_ECX[0x36]) {
    do {
      iVar7 = *piVar10;
      if (iVar7 != 0) {
        if (*(int *)(iVar7 + 0xa0) != 0) {
          *(undefined4 *)(*(int *)(iVar7 + 0xa0) + 0x24) = 0;
        }
        if (*(int **)(iVar7 + 0xa0) != (int *)0x0) {
          (**(code **)(**(int **)(iVar7 + 0xa0) + 0x18))(1);
          *(undefined4 *)(iVar7 + 0xa0) = 0;
        }
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      piVar10 = piVar10 + 1;
    } while (piVar10 != (int *)in_ECX[0x36]);
  }
  if (in_ECX[0x35] != in_ECX[0x36]) {
    in_ECX[0x36] = in_ECX[0x35];
  }
  piVar10 = (int *)in_ECX[0x19];
  if (piVar10 != (int *)in_ECX[0x1a]) {
    do {
      iVar7 = *piVar10;
      if (iVar7 != 0) {
        if (*(int *)(iVar7 + 0xa0) != 0) {
          *(undefined4 *)(*(int *)(iVar7 + 0xa0) + 0x24) = 0;
        }
        if (*(int **)(iVar7 + 0xa0) != (int *)0x0) {
          (**(code **)(**(int **)(iVar7 + 0xa0) + 0x18))(1,uVar6);
          *(undefined4 *)(iVar7 + 0xa0) = 0;
        }
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      piVar10 = piVar10 + 1;
    } while (piVar10 != (int *)in_ECX[0x1a]);
  }
  if (in_ECX[0x19] != in_ECX[0x1a]) {
    in_ECX[0x1a] = in_ECX[0x19];
  }
  FUN_009d0760(in_ECX);
  FUN_007cb7a0(in_ECX + 3);
  local_1c = (uint *)in_ECX[0x50];
  puVar2 = (uint *)*local_1c;
  while (puVar2 != local_1c) {
    uVar6 = puVar2[4];
    if (uVar6 != 0) {
      iVar7 = 0;
      iVar9 = *(int *)(uVar6 + 8) - *(int *)(uVar6 + 4) >> 2;
      if (0 < iVar9) {
        do {
          if (*(int *)(*(int *)(puVar2[4] + 4) + iVar7 * 4) != 0) {
            iVar3 = *(int *)(*(int *)(puVar2[4] + 4) + iVar7 * 4);
            if (iVar3 != 0) {
              local_8 = CONCAT31(local_8._1_3_,10);
              if (7 < *(uint *)(iVar3 + 0x1c)) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              *(undefined4 *)(iVar3 + 0x1c) = 7;
              *(undefined4 *)(iVar3 + 0x18) = 0;
              *(undefined2 *)(iVar3 + 8) = 0;
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            *(undefined4 *)(*(int *)(puVar2[4] + 4) + iVar7 * 4) = 0;
            local_24 = 0;
          }
          iVar7 = iVar7 + 1;
        } while (iVar7 < iVar9);
      }
      uVar6 = puVar2[4];
      if (uVar6 != 0) {
        if (*(int *)(uVar6 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        *(undefined4 *)(uVar6 + 4) = 0;
        *(undefined4 *)(uVar6 + 8) = 0;
        *(undefined4 *)(uVar6 + 0xc) = 0;
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    if (*(char *)((int)puVar2 + 0x15) == '\0') {
      puVar4 = (uint *)puVar2[2];
      if (*(char *)((int)puVar4 + 0x15) == '\0') {
        cVar1 = *(char *)((int)*puVar4 + 0x15);
        puVar2 = puVar4;
        puVar4 = (uint *)*puVar4;
        while (cVar1 == '\0') {
          cVar1 = *(char *)((int)*puVar4 + 0x15);
          puVar2 = puVar4;
          puVar4 = (uint *)*puVar4;
        }
      }
      else {
        cVar1 = *(char *)((int)puVar2[1] + 0x15);
        puVar5 = (uint *)puVar2[1];
        puVar4 = puVar2;
        while ((puVar2 = puVar5, cVar1 == '\0' && (puVar4 == (uint *)puVar2[2]))) {
          cVar1 = *(char *)((int)puVar2[1] + 0x15);
          puVar5 = (uint *)puVar2[1];
          puVar4 = puVar2;
        }
      }
    }
  }
  if (*(char *)(*(int *)(in_ECX[0x50] + 4) + 0x15) == '\0') {
    FUN_00401c00(*(undefined4 *)(*(int *)(in_ECX[0x50] + 4) + 8));
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  *(undefined4 *)(in_ECX[0x50] + 4) = in_ECX[0x50];
  in_ECX[0x51] = 0;
  *(undefined4 *)in_ECX[0x50] = in_ECX[0x50];
  *(undefined4 *)(in_ECX[0x50] + 8) = in_ECX[0x50];
  if (in_ECX[0x5a] != in_ECX[0x5b]) {
    local_1c = (uint *)((uint)local_1c & 0xffffff00);
    uVar8 = FUN_004175d0(in_ECX[0x5b],local_24,local_24,local_1c);
    FUN_00417890(uVar8,local_24);
    in_ECX[0x5b] = uVar8;
  }
  if (in_ECX[0x56] != in_ECX[0x57]) {
    local_1c = (uint *)((uint)local_1c & 0xffffff00);
    uVar8 = FUN_004175d0(in_ECX[0x57],local_24,local_24,local_1c);
    FUN_00417890(uVar8,local_24);
    in_ECX[0x57] = uVar8;
  }
  if ((int *)in_ECX[0x17] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0x17] + 8))(1);
    in_ECX[0x17] = 0;
  }
  local_8 = CONCAT31(local_8._1_3_,9);
  if (in_ECX[0x5a] != 0) {
    FUN_00417890(in_ECX[0x5a],local_24);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x5a] = 0;
  in_ECX[0x5b] = 0;
  in_ECX[0x5c] = 0;
  local_8 = CONCAT31(local_8._1_3_,8);
  if (in_ECX[0x56] != 0) {
    FUN_00417890(in_ECX[0x56],local_24);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x56] = 0;
  in_ECX[0x57] = 0;
  in_ECX[0x58] = 0;
  local_8 = CONCAT31(local_8._1_3_,7);
  FUN_0041a090(*(undefined4 *)in_ECX[0x53],(undefined4 *)in_ECX[0x53]);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
009d2540 : PUSH EBP
009d2541 : MOV EBP,ESP
009d2543 : PUSH -0x1
009d2545 : PUSH 0xb36315
009d254a : MOV EAX,FS:[0x0]
009d2550 : PUSH EAX
009d2551 : SUB ESP,0x14
009d2554 : PUSH EBX
009d2555 : PUSH ESI
009d2556 : PUSH EDI
009d2557 : MOV EAX,[0x00d66fa0]
009d255c : XOR EAX,EBP
009d255e : PUSH EAX
009d255f : LEA EAX,[EBP + -0xc]
009d2562 : MOV FS:[0x0],EAX
009d2568 : MOV EBX,ECX
009d256a : MOV dword ptr [EBP + -0x1c],EBX
009d256d : MOV dword ptr [EBX],0xccc140
009d2573 : MOV dword ptr [EBP + -0x4],0xa
009d257a : MOV EDI,dword ptr [EBX + 0xd4]
009d2580 : MOV EAX,dword ptr [EBX + 0xd8]
009d2586 : CMP EDI,EAX
009d2588 : JZ 0x009d25d6
009d258a : LEA EBX,[EBX]
009d2590 : MOV ESI,dword ptr [EDI]
009d2592 : TEST ESI,ESI
009d2594 : JZ 0x009d25cb
009d2596 : MOV EAX,dword ptr [ESI + 0xa0]
009d259c : TEST EAX,EAX
009d259e : JZ 0x009d25a7
009d25a0 : MOV dword ptr [EAX + 0x24],0x0
009d25a7 : MOV ECX,dword ptr [ESI + 0xa0]
009d25ad : TEST ECX,ECX
009d25af : JZ 0x009d25c4
009d25b1 : MOV EAX,dword ptr [ECX]
009d25b3 : MOV EDX,dword ptr [EAX + 0x18]
009d25b6 : PUSH 0x1
009d25b8 : CALL EDX
009d25ba : MOV dword ptr [ESI + 0xa0],0x0
009d25c4 : MOV ECX,ESI
009d25c6 : CALL 0x006f04e0
009d25cb : ADD EDI,0x4
009d25ce : CMP EDI,dword ptr [EBX + 0xd8]
009d25d4 : JNZ 0x009d2590
009d25d6 : MOV ECX,dword ptr [EBX + 0xd8]
009d25dc : MOV ESI,dword ptr [EBX + 0xd4]
009d25e2 : CMP ESI,ECX
009d25e4 : JZ 0x009d260d
009d25e6 : MOV EAX,ECX
009d25e8 : SUB EAX,ECX
009d25ea : SAR EAX,0x2
009d25ed : LEA EDX,[EAX*0x4 + 0x0]
009d25f4 : LEA EDI,[EDX + ESI*0x1]
009d25f7 : TEST EAX,EAX
009d25f9 : JLE 0x009d2607
009d25fb : PUSH EDX
009d25fc : PUSH ECX
009d25fd : PUSH EDX
009d25fe : PUSH ESI
009d25ff : CALL 0x00634101
009d2604 : ADD ESP,0x10
009d2607 : MOV dword ptr [EBX + 0xd8],EDI
009d260d : MOV EDI,dword ptr [EBX + 0x64]
009d2610 : CMP EDI,dword ptr [EBX + 0x68]
009d2613 : JZ 0x009d2658
009d2615 : MOV ESI,dword ptr [EDI]
009d2617 : TEST ESI,ESI
009d2619 : JZ 0x009d2650
009d261b : MOV EAX,dword ptr [ESI + 0xa0]
009d2621 : TEST EAX,EAX
009d2623 : JZ 0x009d262c
009d2625 : MOV dword ptr [EAX + 0x24],0x0
009d262c : MOV ECX,dword ptr [ESI + 0xa0]
009d2632 : TEST ECX,ECX
009d2634 : JZ 0x009d2649
009d2636 : MOV EAX,dword ptr [ECX]
009d2638 : MOV EDX,dword ptr [EAX + 0x18]
009d263b : PUSH 0x1
009d263d : CALL EDX
009d263f : MOV dword ptr [ESI + 0xa0],0x0
009d2649 : MOV ECX,ESI
009d264b : CALL 0x006f04e0
009d2650 : ADD EDI,0x4
009d2653 : CMP EDI,dword ptr [EBX + 0x68]
009d2656 : JNZ 0x009d2615
009d2658 : MOV ECX,dword ptr [EBX + 0x68]
009d265b : MOV ESI,dword ptr [EBX + 0x64]
009d265e : CMP ESI,ECX
009d2660 : JZ 0x009d2686
009d2662 : MOV EAX,ECX
009d2664 : SUB EAX,ECX
009d2666 : SAR EAX,0x2
009d2669 : LEA EDX,[EAX*0x4 + 0x0]
009d2670 : LEA EDI,[EDX + ESI*0x1]
009d2673 : TEST EAX,EAX
009d2675 : JLE 0x009d2683
009d2677 : PUSH EDX
009d2678 : PUSH ECX
009d2679 : PUSH EDX
009d267a : PUSH ESI
009d267b : CALL 0x00634101
009d2680 : ADD ESP,0x10
009d2683 : MOV dword ptr [EBX + 0x68],EDI
009d2686 : PUSH EBX
009d2687 : CALL 0x009d0760
009d268c : MOV ESI,dword ptr [0x017251d0]
009d2692 : LEA EAX,[EBX + 0xc]
009d2695 : PUSH EAX
009d2696 : CALL 0x007cb7a0
009d269b : MOV EAX,dword ptr [EBX + 0x140]
009d26a1 : MOV EDI,dword ptr [EAX]
009d26a3 : MOV dword ptr [EBP + -0x18],EAX
009d26a6 : CMP EDI,EAX
009d26a8 : JZ 0x009d27ab
009d26ae : MOV EDI,EDI
009d26b0 : MOV EAX,dword ptr [EDI + 0x10]
009d26b3 : TEST EAX,EAX
009d26b5 : JZ 0x009d275e
009d26bb : MOV EDX,dword ptr [EAX + 0x8]
009d26be : SUB EDX,dword ptr [EAX + 0x4]
009d26c1 : XOR EAX,EAX
009d26c3 : SAR EDX,0x2
009d26c6 : MOV dword ptr [EBP + -0x14],EDX
009d26c9 : MOV dword ptr [EBP + -0x10],EAX
009d26cc : TEST EDX,EDX
009d26ce : JLE 0x009d2730
009d26d0 : MOV ECX,dword ptr [EDI + 0x10]
009d26d3 : MOV ECX,dword ptr [ECX + 0x4]
009d26d6 : CMP dword ptr [ECX + EAX*0x4],0x0
009d26da : LEA ECX,[ECX + EAX*0x4]
009d26dd : JZ 0x009d2728
009d26df : MOV ESI,dword ptr [ECX]
009d26e1 : MOV dword ptr [EBP + -0x20],ESI
009d26e4 : TEST ESI,ESI
009d26e6 : JZ 0x009d271b
009d26e8 : MOV byte ptr [EBP + -0x4],0xa
009d26ec : CMP dword ptr [ESI + 0x1c],0x8
009d26f0 : JC 0x009d26fa
009d26f2 : MOV ECX,dword ptr [ESI + 0x8]
009d26f5 : CALL 0x006f04e0
009d26fa : XOR EDX,EDX
009d26fc : MOV dword ptr [ESI + 0x1c],0x7
009d2703 : MOV dword ptr [ESI + 0x18],0x0
009d270a : MOV ECX,ESI
009d270c : MOV word ptr [ESI + 0x8],DX
009d2710 : CALL 0x006f04e0
009d271b : MOV ECX,dword ptr [EDI + 0x10]
009d271e : MOV ECX,dword ptr [ECX + 0x4]
009d2721 : MOV dword ptr [ECX + EAX*0x4],0x0
009d2728 : INC EAX
009d2729 : CMP EAX,EDX
009d272b : MOV dword ptr [EBP + -0x10],EAX
009d272e : JL 0x009d26d0
009d2730 : MOV ESI,dword ptr [EDI + 0x10]
009d2733 : TEST ESI,ESI
009d2735 : JZ 0x009d275e
009d2737 : MOV ECX,dword ptr [ESI + 0x4]
009d273a : XOR EAX,EAX
009d273c : CMP ECX,EAX
009d273e : JZ 0x009d2747
009d2740 : CALL 0x006f04e0
009d2747 : MOV ECX,ESI
009d2749 : MOV dword ptr [ESI + 0x4],EAX
009d274c : MOV dword ptr [ESI + 0x8],EAX
009d274f : MOV dword ptr [ESI + 0xc],EAX
009d2752 : CALL 0x006f04e0
009d275e : CMP byte ptr [EDI + 0x15],0x0
009d2762 : JNZ 0x009d27a2
009d2764 : MOV EAX,dword ptr [EDI + 0x8]
009d2767 : CMP byte ptr [EAX + 0x15],0x0
009d276b : JNZ 0x009d2783
009d276d : MOV EDI,EAX
009d276f : MOV EAX,dword ptr [EDI]
009d2771 : CMP byte ptr [EAX + 0x15],0x0
009d2775 : JNZ 0x009d27a2
009d2777 : MOV EDI,EAX
009d2779 : MOV EAX,dword ptr [EDI]
009d277b : CMP byte ptr [EAX + 0x15],0x0
009d277f : JZ 0x009d2777
009d2781 : JMP 0x009d27a2
009d2783 : MOV EAX,dword ptr [EDI + 0x4]
009d2786 : CMP byte ptr [EAX + 0x15],0x0
009d278a : JNZ 0x009d27a0
009d278c : LEA ESP,[ESP]
009d2790 : CMP EDI,dword ptr [EAX + 0x8]
009d2793 : JNZ 0x009d27a0
009d2795 : MOV EDI,EAX
009d2797 : MOV EAX,dword ptr [EAX + 0x4]
009d279a : CMP byte ptr [EAX + 0x15],0x0
009d279e : JZ 0x009d2790
009d27a0 : MOV EDI,EAX
009d27a2 : CMP EDI,dword ptr [EBP + -0x18]
009d27a5 : JNZ 0x009d26b0
009d27ab : MOV EDX,dword ptr [EBX + 0x140]
009d27b1 : MOV ESI,dword ptr [EDX + 0x4]
009d27b4 : CMP byte ptr [ESI + 0x15],0x0
009d27b8 : LEA EDI,[EBX + 0x13c]
009d27be : MOV dword ptr [EBP + -0x10],ESI
009d27c1 : JNZ 0x009d27e1
009d27c3 : MOV EAX,dword ptr [ESI + 0x8]
009d27c6 : PUSH EAX
009d27c7 : MOV ECX,EDI
009d27c9 : CALL 0x00401c00
009d27ce : MOV ECX,dword ptr [EBP + -0x10]
009d27d1 : MOV ESI,dword ptr [ESI]
009d27d3 : CALL 0x006f04e0
009d27e1 : MOV EAX,dword ptr [EDI + 0x4]
009d27e4 : MOV dword ptr [EAX + 0x4],EAX
009d27e7 : MOV EAX,dword ptr [EDI + 0x4]
009d27ea : MOV dword ptr [EDI + 0x8],0x0
009d27f1 : MOV dword ptr [EAX],EAX
009d27f3 : MOV EDI,dword ptr [EDI + 0x4]
009d27f6 : MOV dword ptr [EDI + 0x8],EDI
009d27f9 : MOV ECX,dword ptr [EBX + 0x16c]
009d27ff : MOV EAX,dword ptr [EBX + 0x168]
009d2805 : CMP EAX,ECX
009d2807 : JZ 0x009d283a
009d2809 : MOV byte ptr [EBP + -0x18],0x0
009d280d : MOV EDX,dword ptr [EBP + -0x18]
009d2810 : PUSH EDX
009d2811 : MOV EDX,dword ptr [EBP + -0x20]
009d2814 : PUSH EDX
009d2815 : MOV EDX,dword ptr [EBP + -0x20]
009d2818 : PUSH EDX
009d2819 : PUSH ECX
009d281a : CALL 0x004175d0
009d281f : MOV EDI,dword ptr [EBX + 0x16c]
009d2825 : MOV ESI,EAX
009d2827 : MOV EAX,dword ptr [EBP + -0x20]
009d282a : PUSH EAX
009d282b : PUSH ESI
009d282c : CALL 0x00417890
009d2831 : ADD ESP,0x18
009d2834 : MOV dword ptr [EBX + 0x16c],ESI
009d283a : MOV ECX,dword ptr [EBX + 0x15c]
009d2840 : MOV EAX,dword ptr [EBX + 0x158]
009d2846 : CMP EAX,ECX
009d2848 : JZ 0x009d287b
009d284a : MOV byte ptr [EBP + -0x18],0x0
009d284e : MOV EDX,dword ptr [EBP + -0x18]
009d2851 : PUSH EDX
009d2852 : MOV EDX,dword ptr [EBP + -0x20]
009d2855 : PUSH EDX
009d2856 : MOV EDX,dword ptr [EBP + -0x20]
009d2859 : PUSH EDX
009d285a : PUSH ECX
009d285b : CALL 0x004175d0
009d2860 : MOV EDI,dword ptr [EBX + 0x15c]
009d2866 : MOV ESI,EAX
009d2868 : MOV EAX,dword ptr [EBP + -0x20]
009d286b : PUSH EAX
009d286c : PUSH ESI
009d286d : CALL 0x00417890
009d2872 : ADD ESP,0x18
009d2875 : MOV dword ptr [EBX + 0x15c],ESI
009d287b : MOV ECX,dword ptr [EBX + 0x5c]
009d287e : XOR EAX,EAX
009d2880 : CMP ECX,EAX
009d2882 : JZ 0x009d2896
009d2884 : MOV EDX,dword ptr [ECX]
009d2886 : MOV EAX,dword ptr [EDX + 0x8]
009d2889 : PUSH 0x1
009d288b : CALL EAX
009d288d : MOV dword ptr [EBX + 0x5c],0x0
009d2894 : XOR EAX,EAX
009d2896 : MOV byte ptr [EBP + -0x4],0x9
009d289a : MOV ECX,dword ptr [EBX + 0x168]
009d28a0 : CMP ECX,EAX
009d28a2 : JZ 0x009d28c4
009d28a4 : MOV EDX,dword ptr [EBP + -0x20]
009d28a7 : MOV EDI,dword ptr [EBX + 0x16c]
009d28ad : PUSH EDX
009d28ae : PUSH ECX
009d28af : CALL 0x00417890
009d28b4 : MOV ECX,dword ptr [EBX + 0x168]
009d28ba : ADD ESP,0x8
009d28bd : CALL 0x006f04e0
009d28c4 : MOV dword ptr [EBX + 0x168],EAX
009d28ca : MOV dword ptr [EBX + 0x16c],EAX
009d28d0 : MOV dword ptr [EBX + 0x170],EAX
009d28d6 : MOV byte ptr [EBP + -0x4],0x8
009d28da : MOV ECX,dword ptr [EBX + 0x158]
009d28e0 : CMP ECX,EAX
009d28e2 : JZ 0x009d2904
009d28e4 : MOV EAX,dword ptr [EBP + -0x20]
009d28e7 : MOV EDI,dword ptr [EBX + 0x15c]
009d28ed : PUSH EAX
009d28ee : PUSH ECX
009d28ef : CALL 0x00417890
009d28f4 : MOV ECX,dword ptr [EBX + 0x158]
009d28fa : ADD ESP,0x8
009d28fd : CALL 0x006f04e0
009d2904 : MOV dword ptr [EBX + 0x158],EAX
009d290a : MOV dword ptr [EBX + 0x15c],EAX
009d2910 : MOV dword ptr [EBX + 0x160],EAX
009d2916 : MOV byte ptr [EBP + -0x4],0x7
009d291a : LEA ESI,[EBX + 0x148]
009d2920 : MOV dword ptr [EBP + -0x20],ESI
009d2923 : MOV byte ptr [EBP + -0x4],0x7
009d2927 : MOV EAX,dword ptr [ESI + 0x4]
009d292a : MOV ECX,dword ptr [EAX]
009d292c : PUSH EAX
009d292d : PUSH ECX
009d292e : LEA EDI,[EBP + -0x20]
009d2931 : CALL 0x0041a090
009d2936 : MOV ECX,dword ptr [ESI + 0x4]
009d2939 : CALL 0x006f04e0
