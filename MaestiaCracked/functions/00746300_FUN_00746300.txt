PROGRAM  : Maestia.exe
FUNCTION : FUN_00746300
ENTRY    : 00746300
BODY     : [[00746300, 007463ee]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00746300(void)

{
  wchar_t wVar1;
  int iVar2;
  uint uVar3;
  BOOL BVar4;
  wchar_t *pwVar5;
  undefined4 *unaff_ESI;
  wchar_t local_114;
  undefined1 local_112 [254];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b16012;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar3;
  FUN_004c2dd0(unaff_ESI);
  local_8 = 0;
  unaff_ESI[0xf] = &PTR_FUN_00cdec94;
  BVar4 = InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)(unaff_ESI + 0x10),4000);
  if (BVar4 == 0) {
    InitializeCriticalSection((LPCRITICAL_SECTION)(unaff_ESI + 0x10));
  }
  iVar2 = DAT_00da9b08;
  local_8 = CONCAT31(local_8._1_3_,1);
  *unaff_ESI = &PTR_FUN_00cd8c54;
  unaff_ESI[0xf] = &PTR_LAB_00cd8c64;
  unaff_ESI[0x16] = 0;
  __snwprintf(&local_114,0x80,L"BgResetEvent_%d",iVar2,uVar3);
  pwVar5 = &local_114;
  do {
    wVar1 = *pwVar5;
    pwVar5 = pwVar5 + 1;
  } while (wVar1 != L'\0');
  FUN_00406360(&local_114,(int)pwVar5 - (int)local_112 >> 1);
  DAT_00da9b08 = DAT_00da9b08 + 1;
  unaff_ESI[1] = 3;
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00746300 : PUSH EBP
00746301 : MOV EBP,ESP
00746303 : PUSH -0x1
00746305 : PUSH 0xb16012
0074630a : MOV EAX,FS:[0x0]
00746310 : PUSH EAX
00746311 : SUB ESP,0x108
00746317 : MOV EAX,[0x00d66fa0]
0074631c : XOR EAX,EBP
0074631e : MOV dword ptr [EBP + -0x10],EAX
00746321 : PUSH EDI
00746322 : PUSH EAX
00746323 : LEA EAX,[EBP + -0xc]
00746326 : MOV FS:[0x0],EAX
0074632c : PUSH ESI
0074632d : MOV dword ptr [EBP + 0xfffffeec],ESI
00746333 : CALL 0x004c2dd0
00746338 : MOV dword ptr [EBP + -0x4],0x0
0074633f : PUSH 0xfa0
00746344 : LEA EDI,[ESI + 0x40]
00746347 : PUSH EDI
00746348 : MOV dword ptr [ESI + 0x3c],0xcdec94
0074634f : CALL dword ptr [0x00b85110]
00746355 : TEST EAX,EAX
00746357 : JNZ 0x00746360
00746359 : PUSH EDI
0074635a : CALL dword ptr [0x00b85114]
00746360 : MOV byte ptr [EBP + -0x4],0x1
00746364 : MOV EAX,[0x00da9b08]
00746369 : PUSH EAX
0074636a : PUSH 0xc0871c
0074636f : LEA ECX,[EBP + 0xfffffef0]
00746375 : PUSH 0x80
0074637a : PUSH ECX
0074637b : MOV dword ptr [ESI],0xcd8c54
00746381 : MOV dword ptr [ESI + 0x3c],0xcd8c64
00746388 : MOV dword ptr [ESI + 0x58],0x0
0074638f : CALL 0x006343c8
00746394 : LEA EAX,[EBP + 0xfffffef0]
0074639a : ADD ESP,0x10
0074639d : LEA EDX,[EAX + 0x2]
007463a0 : MOV CX,word ptr [EAX]
007463a3 : ADD EAX,0x2
007463a6 : TEST CX,CX
007463a9 : JNZ 0x007463a0
007463ab : SUB EAX,EDX
007463ad : SAR EAX,0x1
007463af : PUSH EAX
007463b0 : LEA EDX,[EBP + 0xfffffef0]
007463b6 : PUSH EDX
007463b7 : LEA ECX,[ESI + 0xc]
007463ba : CALL 0x00406360
007463bf : INC dword ptr [0x00da9b08]
007463c5 : MOV dword ptr [ESI + 0x4],0x3
007463cc : MOV dword ptr [EBP + -0x4],0xffffffff
007463d3 : MOV EAX,ESI
007463d5 : MOV ECX,dword ptr [EBP + -0xc]
007463d8 : MOV dword ptr FS:[0x0],ECX
007463df : POP ECX
007463e0 : POP EDI
007463e1 : MOV ECX,dword ptr [EBP + -0x10]
007463e4 : XOR ECX,EBP
007463e6 : CALL 0x00633e6b
007463eb : MOV ESP,EBP
007463ed : POP EBP
007463ee : RET
