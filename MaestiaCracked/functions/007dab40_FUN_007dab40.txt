PROGRAM  : Maestia.exe
FUNCTION : FUN_007dab40
ENTRY    : 007dab40
BODY     : [[007dab40, 007dac7e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007dab40(int *param_1,undefined2 param_2,int param_3)

{
  short sVar1;
  code *pcVar2;
  char cVar3;
  int *piVar4;
  short *psVar5;
  int *in_ECX;
  int in_EDX;
  int unaff_EDI;
  short local_208;
  undefined1 local_206 [510];
  uint local_8;
  
  local_8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*(char *)(unaff_EDI + 0x4c) != '\0') {
    param_2 = 3;
  }
  piVar4 = (int *)FUN_00b03620(param_2);
  if (piVar4 == (int *)0x0) {
    if ((uint)in_ECX[9] < 8) {
      piVar4 = in_ECX + 4;
    }
    else {
      piVar4 = (int *)in_ECX[4];
    }
    FUN_0040e4a0(L"[AvaSceneNode::AttachMeshEntity] Create Failed [%s]",piVar4);
    FUN_008018d0(&local_208);
    if (in_EDX != 0) {
      psVar5 = &local_208;
      do {
        sVar1 = *psVar5;
        psVar5 = psVar5 + 1;
      } while (sVar1 != 0);
      FUN_00406360(&local_208,(int)psVar5 - (int)local_206 >> 1);
    }
  }
  else {
    (**(code **)(*piVar4 + 8))(unaff_EDI + 0x14);
    pcVar2 = *(code **)(*piVar4 + 0xa0);
    piVar4[0x74] = param_3;
    *(undefined1 *)((int)piVar4 + 0x2da) = *(undefined1 *)((int)param_1 + 0x2bf);
    cVar3 = (*pcVar2)();
    if (cVar3 != '\0') {
      piVar4[0x7b] = param_1[0xa2];
      (**(code **)(*param_1 + 0x128))(piVar4);
      (**(code **)(*in_ECX + 0xec))(piVar4,1);
      __security_check_cookie(local_8 ^ (uint)&stack0xfffffffc);
      return;
    }
  }
  __security_check_cookie(local_8 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007dab40 : PUSH EBP
007dab41 : MOV EBP,ESP
007dab43 : SUB ESP,0x20c
007dab49 : MOV EAX,[0x00d66fa0]
007dab4e : XOR EAX,EBP
007dab50 : MOV dword ptr [EBP + -0x4],EAX
007dab53 : CMP byte ptr [EDI + 0x4c],0x0
007dab57 : MOV EAX,dword ptr [EBP + 0xc]
007dab5a : PUSH EBX
007dab5b : MOV EBX,dword ptr [EBP + 0x8]
007dab5e : PUSH ESI
007dab5f : MOV dword ptr [EBP + 0xfffffdf8],ECX
007dab65 : MOV dword ptr [EBP + 0xfffffdf4],EDX
007dab6b : JZ 0x007dab72
007dab6d : MOV EAX,0x3
007dab72 : MOVZX EAX,AX
007dab75 : PUSH EAX
007dab76 : CALL 0x00b03620
007dab7b : MOV ESI,EAX
007dab7d : ADD ESP,0x4
007dab80 : TEST ESI,ESI
007dab82 : JNZ 0x007dac01
007dab84 : MOV EAX,dword ptr [EBP + 0xfffffdf8]
007dab8a : CMP dword ptr [EAX + 0x24],0x8
007dab8e : JC 0x007dab95
007dab90 : MOV EAX,dword ptr [EAX + 0x10]
007dab93 : JMP 0x007dab98
007dab95 : ADD EAX,0x10
007dab98 : PUSH EAX
007dab99 : PUSH 0xc1fe18
007dab9e : LEA EDX,[EBP + 0xfffffdfc]
007daba4 : CALL 0x0040e4a0
007daba9 : MOV ESI,dword ptr [0x00da98e8]
007dabaf : LEA ECX,[EBP + 0xfffffdfc]
007dabb5 : PUSH ECX
007dabb6 : CALL 0x008018d0
007dabbb : MOV ECX,dword ptr [EBP + 0xfffffdf4]
007dabc1 : ADD ESP,0xc
007dabc4 : TEST ECX,ECX
007dabc6 : JZ 0x007dabed
007dabc8 : LEA EAX,[EBP + 0xfffffdfc]
007dabce : LEA ESI,[EAX + 0x2]
007dabd1 : MOV DX,word ptr [EAX]
007dabd4 : ADD EAX,0x2
007dabd7 : TEST DX,DX
007dabda : JNZ 0x007dabd1
007dabdc : SUB EAX,ESI
007dabde : SAR EAX,0x1
007dabe0 : PUSH EAX
007dabe1 : LEA EDX,[EBP + 0xfffffdfc]
007dabe7 : PUSH EDX
007dabe8 : CALL 0x00406360
007dabed : POP ESI
007dabee : XOR AL,AL
007dabf0 : POP EBX
007dabf1 : MOV ECX,dword ptr [EBP + -0x4]
007dabf4 : XOR ECX,EBP
007dabf6 : CALL 0x00633e6b
007dabfb : MOV ESP,EBP
007dabfd : POP EBP
007dabfe : RET 0x10
007dac01 : MOV EAX,dword ptr [ESI]
007dac03 : MOV EDX,dword ptr [EAX + 0x8]
007dac06 : LEA ECX,[EDI + 0x14]
007dac09 : PUSH ECX
007dac0a : MOV ECX,ESI
007dac0c : CALL EDX
007dac0e : MOV EAX,dword ptr [EBP + 0x10]
007dac11 : MOV EDX,dword ptr [ESI]
007dac13 : MOV EDX,dword ptr [EDX + 0xa0]
007dac19 : MOV dword ptr [ESI + 0x1d0],EAX
007dac1f : MOV CL,byte ptr [EBX + 0x2bf]
007dac25 : MOV EAX,dword ptr [EBP + 0xfffffdf4]
007dac2b : MOV byte ptr [ESI + 0x2da],CL
007dac31 : MOV ECX,dword ptr [EBP + 0x14]
007dac34 : PUSH EAX
007dac35 : PUSH ECX
007dac36 : PUSH EDI
007dac37 : MOV ECX,ESI
007dac39 : CALL EDX
007dac3b : TEST AL,AL
007dac3d : JZ 0x007dabed
007dac3f : MOV EAX,dword ptr [EBX + 0x288]
007dac45 : MOV dword ptr [ESI + 0x1ec],EAX
007dac4b : MOV EDX,dword ptr [EBX]
007dac4d : MOV EAX,dword ptr [EDX + 0x128]
007dac53 : PUSH ESI
007dac54 : MOV ECX,EBX
007dac56 : CALL EAX
007dac58 : MOV ECX,dword ptr [EBP + 0xfffffdf8]
007dac5e : MOV EDX,dword ptr [ECX]
007dac60 : MOV EAX,dword ptr [EDX + 0xec]
007dac66 : PUSH 0x1
007dac68 : PUSH ESI
007dac69 : CALL EAX
007dac6b : MOV ECX,dword ptr [EBP + -0x4]
007dac6e : POP ESI
007dac6f : XOR ECX,EBP
007dac71 : MOV AL,0x1
007dac73 : POP EBX
007dac74 : CALL 0x00633e6b
007dac79 : MOV ESP,EBP
007dac7b : POP EBP
007dac7c : RET 0x10
