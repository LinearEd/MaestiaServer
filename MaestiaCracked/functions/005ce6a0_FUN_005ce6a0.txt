PROGRAM  : Maestia.exe
FUNCTION : FUN_005ce6a0
ENTRY    : 005ce6a0
BODY     : [[005ce6a0, 005ce850]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ce6a0(int param_1)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  char cVar5;
  int iVar6;
  uint *puVar7;
  int unaff_EDI;
  int local_38 [6];
  undefined1 local_20 [4];
  undefined1 auStack_1c [12];
  undefined1 local_10;
  int iStack_8;
  int *piStack_4;
  
  piVar1 = (int *)(param_1 + 0x78);
  local_10 = 0;
  local_20[0] = 0;
  local_38[0] = FUN_00525380("System",6,0);
  *(int *)(local_38[0] + 8) = *(int *)(local_38[0] + 8) + 1;
  cVar5 = (**(code **)(*(int *)(*(int *)(*piVar1 + 0x2a0) + 0x10) + 0x2c))(piVar1,local_38,local_20)
  ;
  if (cVar5 != '\0') {
    iVar6 = FUN_00526fa0(param_1);
    cVar5 = (**(code **)(*(int *)(iVar6 + 0x10) + 0x2c))(piVar1,*piVar1 + 0x60,auStack_1c);
    if (((cVar5 != '\0') && (iVar6 = FUN_00526fa0(param_1), iVar6 != 0)) && (iVar6 + 0x10 != 0)) {
      iVar2 = *piStack_4;
      if (*(int *)(iVar2 + 0x10) == 0) {
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(undefined1 **)(param_1 + 8) != (undefined1 *)0x0) {
          **(undefined1 **)(param_1 + 8) = 1;
        }
      }
      else {
        *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        local_38[0] = iVar2;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(int *)(param_1 + 8) != 0) {
          FUN_005266c0(&stack0xffffffc4);
        }
        FUN_00526bc0();
      }
      puVar7 = (uint *)(param_1 + 8);
      uVar3 = *puVar7;
      iVar2 = *(int *)(param_1 + 0xc);
      iVar4 = *(int *)(param_1 + 0x1c);
      iStack_8 = FUN_00525380("onSetIMEName",0xc,0);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + 1;
      FUN_0057bb40(param_1,iVar6 + 0x10,&iStack_8,1,
                   ((int)(uVar3 - iVar2) >> 4) + -0x20 + iVar4 * 0x20);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + -1;
      if (*(int *)(iStack_8 + 8) == 0) {
        FUN_00525340();
      }
      FUN_00526bc0();
      *puVar7 = *puVar7 - 0x10;
      if (*puVar7 < *(uint *)(param_1 + 0xc)) {
        FUN_00504f30();
      }
    }
  }
  *(int *)(unaff_EDI + 8) = *(int *)(unaff_EDI + 8) + -1;
  if (*(int *)(unaff_EDI + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005ce6a0 : SUB ESP,0x38
005ce6a3 : PUSH EBP
005ce6a4 : MOV EBP,dword ptr [ESP + 0x40]
005ce6a8 : MOV EAX,dword ptr [EBP + 0x78]
005ce6ab : PUSH ESI
005ce6ac : PUSH EDI
005ce6ad : PUSH 0x0
005ce6af : LEA EDI,[EBP + 0x78]
005ce6b2 : PUSH 0x6
005ce6b4 : PUSH 0xb86464
005ce6b9 : LEA ECX,[EAX + 0x254]
005ce6bf : MOV byte ptr [ESP + 0x40],0x0
005ce6c4 : MOV byte ptr [ESP + 0x30],0x0
005ce6c9 : CALL 0x00525380
005ce6ce : MOV dword ptr [ESP + 0xc],EAX
005ce6d2 : MOV ESI,0x1
005ce6d7 : ADD dword ptr [EAX + 0x8],ESI
005ce6da : MOV EAX,dword ptr [EDI]
005ce6dc : MOV ECX,dword ptr [EAX + 0x2a0]
005ce6e2 : MOV EDX,dword ptr [ECX + 0x10]
005ce6e5 : MOV EDX,dword ptr [EDX + 0x2c]
005ce6e8 : LEA EAX,[ESP + 0x24]
005ce6ec : PUSH EAX
005ce6ed : ADD ECX,0x10
005ce6f0 : LEA EAX,[ESP + 0x10]
005ce6f4 : PUSH EAX
005ce6f5 : PUSH EDI
005ce6f6 : CALL EDX
005ce6f8 : TEST AL,AL
005ce6fa : JZ 0x005ce822
005ce700 : PUSH EBX
005ce701 : PUSH EBP
005ce702 : LEA ECX,[ESP + 0x2c]
005ce706 : CALL 0x00526fa0
005ce70b : MOV EDX,dword ptr [EDI]
005ce70d : LEA ECX,[EAX + 0x10]
005ce710 : MOV EAX,dword ptr [ECX]
005ce712 : LEA EBX,[ESP + 0x38]
005ce716 : PUSH EBX
005ce717 : ADD EDX,0x60
005ce71a : PUSH EDX
005ce71b : MOV EDX,dword ptr [EAX + 0x2c]
005ce71e : PUSH EDI
005ce71f : CALL EDX
005ce721 : TEST AL,AL
005ce723 : JZ 0x005ce821
005ce729 : PUSH EBP
005ce72a : MOV ECX,EBX
005ce72c : CALL 0x00526fa0
005ce731 : TEST EAX,EAX
005ce733 : JZ 0x005ce821
005ce739 : ADD EAX,0x10
005ce73c : MOV dword ptr [ESP + 0x14],EAX
005ce740 : JZ 0x005ce821
005ce746 : MOV EAX,dword ptr [ESP + 0x50]
005ce74a : MOV EAX,dword ptr [EAX]
005ce74c : CMP dword ptr [EAX + 0x10],0x0
005ce750 : JZ 0x005ce78f
005ce752 : MOV dword ptr [ESP + 0x1c],EAX
005ce756 : MOV byte ptr [ESP + 0x18],0x5
005ce75b : ADD dword ptr [EAX + 0x8],ESI
005ce75e : ADD dword ptr [EBP + 0x8],0x10
005ce762 : MOV EAX,dword ptr [EBP + 0x8]
005ce765 : CMP EAX,dword ptr [EBP + 0x10]
005ce768 : LEA ESI,[EBP + 0x8]
005ce76b : JC 0x005ce774
005ce76d : MOV ECX,ESI
005ce76f : CALL 0x00504050
005ce774 : MOV ECX,dword ptr [ESI]
005ce776 : TEST ECX,ECX
005ce778 : JZ 0x005ce784
005ce77a : LEA EDX,[ESP + 0x18]
005ce77e : PUSH EDX
005ce77f : CALL 0x005266c0
005ce784 : LEA ECX,[ESP + 0x18]
005ce788 : CALL 0x00526bc0
005ce78d : JMP 0x005ce7ae
005ce78f : ADD dword ptr [EBP + 0x8],0x10
005ce793 : MOV EAX,dword ptr [EBP + 0x8]
005ce796 : CMP EAX,dword ptr [EBP + 0x10]
005ce799 : LEA ESI,[EBP + 0x8]
005ce79c : JC 0x005ce7a5
005ce79e : MOV ECX,ESI
005ce7a0 : CALL 0x00504050
005ce7a5 : MOV EAX,dword ptr [ESI]
005ce7a7 : TEST EAX,EAX
005ce7a9 : JZ 0x005ce7ae
005ce7ab : MOV byte ptr [EAX],0x1
005ce7ae : MOV EAX,dword ptr [ESI]
005ce7b0 : SUB EAX,dword ptr [ESI + 0x4]
005ce7b3 : MOV ECX,dword ptr [ESI + 0x14]
005ce7b6 : MOV EDI,dword ptr [EDI]
005ce7b8 : PUSH 0x0
005ce7ba : SHL ECX,0x5
005ce7bd : SAR EAX,0x4
005ce7c0 : PUSH 0xc
005ce7c2 : LEA EBX,[EAX + ECX*0x1 + -0x20]
005ce7c6 : PUSH 0xb92c3c
005ce7cb : LEA ECX,[EDI + 0x254]
005ce7d1 : CALL 0x00525380
005ce7d6 : PUSH EBX
005ce7d7 : MOV dword ptr [ESP + 0x50],EAX
005ce7db : INC dword ptr [EAX + 0x8]
005ce7de : MOV EAX,dword ptr [ESP + 0x18]
005ce7e2 : PUSH 0x1
005ce7e4 : LEA EDX,[ESP + 0x54]
005ce7e8 : PUSH EDX
005ce7e9 : PUSH EAX
005ce7ea : PUSH EBP
005ce7eb : CALL 0x0057bb40
005ce7f0 : MOV EAX,dword ptr [ESP + 0x60]
005ce7f4 : DEC dword ptr [EAX + 0x8]
005ce7f7 : MOV ECX,EAX
005ce7f9 : ADD EAX,0x8
005ce7fc : ADD ESP,0x14
005ce7ff : CMP dword ptr [EAX],0x0
005ce802 : JNZ 0x005ce809
005ce804 : CALL 0x00525340
005ce809 : MOV ECX,dword ptr [ESI]
005ce80b : CALL 0x00526bc0
005ce810 : ADD dword ptr [ESI],-0x10
005ce813 : MOV EAX,dword ptr [ESI]
005ce815 : CMP EAX,dword ptr [ESI + 0x4]
005ce818 : JNC 0x005ce821
005ce81a : MOV ECX,ESI
005ce81c : CALL 0x00504f30
005ce821 : POP EBX
005ce822 : MOV EAX,dword ptr [ESP + 0xc]
005ce826 : DEC dword ptr [EAX + 0x8]
005ce829 : MOV ECX,EAX
005ce82b : ADD EAX,0x8
005ce82e : CMP dword ptr [EAX],0x0
005ce831 : POP EDI
005ce832 : POP ESI
005ce833 : POP EBP
005ce834 : JNZ 0x005ce83b
005ce836 : CALL 0x00525340
005ce83b : LEA ECX,[ESP + 0x18]
005ce83f : CALL 0x00526bc0
005ce844 : LEA ECX,[ESP + 0x28]
005ce848 : CALL 0x00526bc0
005ce84d : ADD ESP,0x38
005ce850 : RET
