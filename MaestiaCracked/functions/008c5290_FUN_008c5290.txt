PROGRAM  : Maestia.exe
FUNCTION : FUN_008c5290
ENTRY    : 008c5290
BODY     : [[008c5290, 008c55cd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008c5290(int param_1)

{
  short sVar1;
  uint uVar2;
  int *piVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  undefined1 *puVar8;
  bool bVar9;
  uint local_2c;
  uint local_28;
  uint local_20;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b34ea6;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_008c49d0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if ((*(int *)(*DAT_00da9894 + 0x130) != 0) &&
     (*(int *)(*(int *)(*DAT_00da9894 + 0x130) + 0x40) != 0)) {
    if (*(char *)(param_1 + 0x58) == '\0') {
      FUN_008c4be0(param_1);
    }
    else {
      FUN_008c5110(param_1);
    }
    local_2c = 0;
    if (*(int *)(*DAT_00da9894 + 0x40) != 0) {
      do {
        iVar6 = FUN_008eb810();
        if (((iVar6 != 0) && (*(char *)(iVar6 + 100) != '\0')) &&
           (iVar6 = *(int *)(iVar6 + 0x3c), iVar6 != 0)) {
          uVar2 = *(uint *)(iVar6 + 0xc);
          if ((short)*(uint *)(iVar6 + 8) != 0) {
            local_28 = *(uint *)(iVar6 + 8) & 0xffff;
            local_18 = 0;
            do {
              if ((short)uVar2 != 0) {
                local_20 = uVar2 & 0xffff;
                local_14 = 0;
                do {
                  iVar7 = local_18 * *(int *)(iVar6 + 0xc) + local_14;
                  if (((iVar7 < *(int *)(iVar6 + 8) * *(int *)(iVar6 + 0xc)) && (-1 < iVar7)) &&
                     ((iVar7 = *(int *)(*(int *)(iVar6 + 0x10) + iVar7 * 4), iVar7 != 0 &&
                      (piVar3 = *(int **)(iVar7 + 8), piVar3 != (int *)0x0)))) {
                    if (*(char *)(param_1 + 0x58) == '\0') {
                      if ((char)((uint)piVar3[4] >> 0x10) == -0x74) goto LAB_008c557a;
                      iVar7 = (**(code **)(*piVar3 + 0x20))();
                      bVar9 = iVar7 == 0;
                    }
                    else {
                      bVar9 = (char)((uint)piVar3[4] >> 0x10) == -0x74;
                    }
                    if (((bVar9) && (iVar7 = FUN_004049b0(piVar3[4]), iVar7 != 0)) &&
                       (cVar4 = FUN_00a079e0(), cVar4 != '\0')) {
                      if (*(char *)(param_1 + 0x58) == '\0') {
                        if ((piVar3[0x2c] != piVar3[0x2e]) &&
                           (iVar7 = FUN_004049b0(piVar3[4]), iVar7 != 0)) {
                          iVar7 = FUN_00425350();
                          if (iVar7 / 10 < 1) {
                            iVar7 = 1;
                          }
                          else {
                            iVar7 = FUN_00425350();
                            iVar7 = iVar7 / 10;
                          }
                          goto LAB_008c5537;
                        }
                      }
                      else {
                        sVar1 = *(short *)(iVar7 + 0xa4);
                        sVar5 = (**(code **)(*piVar3 + 0x40))();
                        sVar5 = sVar1 - sVar5;
                        if (sVar5 != 0) {
                          iVar7 = FUN_007035b0(sVar1,sVar5,*(undefined4 *)(iVar7 + 0x50));
LAB_008c5537:
                          puVar8 = (undefined1 *)FUN_006f0300(0xc);
                          if (puVar8 == (undefined1 *)0x0) {
                            puVar8 = (undefined1 *)0x0;
                          }
                          else {
                            *puVar8 = 0;
                            *(undefined4 *)(puVar8 + 4) = 0;
                            *(undefined4 *)(puVar8 + 8) = 0;
                          }
                          local_8 = 0xffffffff;
                          *(int **)(puVar8 + 8) = piVar3;
                          *puVar8 = 0;
                          *(int *)(puVar8 + 4) = iVar7;
                          FUN_00449730();
                        }
                      }
                    }
                  }
LAB_008c557a:
                  local_14 = local_14 + 1;
                  local_20 = local_20 - 1;
                } while (local_20 != 0);
              }
              local_18 = local_18 + 1;
              local_28 = local_28 - 1;
            } while (local_28 != 0);
          }
        }
        local_2c = local_2c + 1;
      } while (local_2c < *(uint *)(*DAT_00da9894 + 0x40));
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008c5290 : PUSH EBP
008c5291 : MOV EBP,ESP
008c5293 : PUSH -0x1
008c5295 : PUSH 0xb34ea6
008c529a : MOV EAX,FS:[0x0]
008c52a0 : PUSH EAX
008c52a1 : SUB ESP,0x28
008c52a4 : PUSH EBX
008c52a5 : PUSH ESI
008c52a6 : PUSH EDI
008c52a7 : MOV EAX,[0x00d66fa0]
008c52ac : XOR EAX,EBP
008c52ae : PUSH EAX
008c52af : LEA EAX,[EBP + -0xc]
008c52b2 : MOV FS:[0x0],EAX
008c52b8 : MOV ESI,dword ptr [EBP + 0x8]
008c52bb : CALL 0x008c49d0
008c52c0 : MOV EAX,[0x00da9894]
008c52c5 : MOV EAX,dword ptr [EAX]
008c52c7 : MOV ECX,dword ptr [EAX + 0x130]
008c52cd : TEST ECX,ECX
008c52cf : JZ 0x008c55ba
008c52d5 : MOV EAX,ECX
008c52d7 : CMP dword ptr [EAX + 0x40],0x0
008c52db : JZ 0x008c55ba
008c52e1 : CMP byte ptr [ESI + 0x58],0x0
008c52e5 : PUSH ESI
008c52e6 : JZ 0x008c52ef
008c52e8 : CALL 0x008c5110
008c52ed : JMP 0x008c52f4
008c52ef : CALL 0x008c4be0
008c52f4 : MOV ECX,dword ptr [0x00da9894]
008c52fa : MOV EAX,dword ptr [ECX]
008c52fc : XOR ESI,ESI
008c52fe : MOV dword ptr [EBP + -0x28],ESI
008c5301 : CMP dword ptr [EAX + 0x40],ESI
008c5304 : JBE 0x008c55ba
008c530a : MOV ECX,ESI
008c530c : CALL 0x008eb810
008c5311 : TEST EAX,EAX
008c5313 : JZ 0x008c55a5
008c5319 : CMP byte ptr [EAX + 0x64],0x0
008c531d : JZ 0x008c55a5
008c5323 : MOV EDX,dword ptr [EAX + 0x3c]
008c5326 : MOV dword ptr [EBP + -0x20],EDX
008c5329 : TEST EDX,EDX
008c532b : JZ 0x008c55a5
008c5331 : MOV EAX,dword ptr [EDX + 0x8]
008c5334 : MOV ECX,dword ptr [EDX + 0xc]
008c5337 : XOR EDI,EDI
008c5339 : MOV dword ptr [EBP + -0x30],ECX
008c533c : CMP DI,AX
008c533f : JNC 0x008c55a5
008c5345 : MOVZX EAX,AX
008c5348 : MOV dword ptr [EBP + -0x14],EDI
008c534b : MOV dword ptr [EBP + -0x24],EAX
008c534e : XOR EAX,EAX
008c5350 : CMP AX,CX
008c5353 : JNC 0x008c5591
008c5359 : MOVZX ECX,CX
008c535c : MOV dword ptr [EBP + -0x10],EAX
008c535f : MOV dword ptr [EBP + -0x1c],ECX
008c5362 : MOV ECX,dword ptr [EDX + 0xc]
008c5365 : MOV EAX,dword ptr [EBP + -0x14]
008c5368 : MOV ESI,dword ptr [EDX + 0x8]
008c536b : IMUL EAX,ECX
008c536e : ADD EAX,dword ptr [EBP + -0x10]
008c5371 : IMUL ESI,ECX
008c5374 : CMP EAX,ESI
008c5376 : JGE 0x008c557a
008c537c : TEST EAX,EAX
008c537e : JL 0x008c557a
008c5384 : MOV EDX,dword ptr [EDX + 0x10]
008c5387 : MOV EAX,dword ptr [EDX + EAX*0x4]
008c538a : TEST EAX,EAX
008c538c : JZ 0x008c557a
008c5392 : MOV EBX,dword ptr [EAX + 0x8]
008c5395 : TEST EBX,EBX
008c5397 : JZ 0x008c557a
008c539d : MOV EAX,dword ptr [EBP + 0x8]
008c53a0 : CMP byte ptr [EAX + 0x58],0x0
008c53a4 : JZ 0x008c53b1
008c53a6 : MOV ECX,dword ptr [EBX + 0x10]
008c53a9 : SHR ECX,0x10
008c53ac : CMP CL,0x8c
008c53af : JMP 0x008c53cb
008c53b1 : MOV EDX,dword ptr [EBX + 0x10]
008c53b4 : SHR EDX,0x10
008c53b7 : CMP DL,0x8c
008c53ba : JZ 0x008c557a
008c53c0 : MOV EAX,dword ptr [EBX]
008c53c2 : MOV EDX,dword ptr [EAX + 0x20]
008c53c5 : MOV ECX,EBX
008c53c7 : CALL EDX
008c53c9 : TEST EAX,EAX
008c53cb : JNZ 0x008c557a
008c53d1 : MOV EDI,dword ptr [EBX + 0x10]
008c53d4 : PUSH EDI
008c53d5 : CALL 0x004049b0
008c53da : MOV ESI,EAX
008c53dc : ADD ESP,0x4
008c53df : TEST ESI,ESI
008c53e1 : JZ 0x008c557a
008c53e7 : MOV EAX,EDI
008c53e9 : CALL 0x00a079e0
008c53ee : TEST AL,AL
008c53f0 : JZ 0x008c557a
008c53f6 : MOV EAX,dword ptr [EBP + 0x8]
008c53f9 : CMP byte ptr [EAX + 0x58],0x0
008c53fd : JZ 0x008c543f
008c53ff : MOVZX EDI,word ptr [ESI + 0xa4]
008c5406 : MOV EDX,dword ptr [EBX]
008c5408 : MOV EAX,dword ptr [EDX + 0x40]
008c540b : MOV ECX,EBX
008c540d : MOV dword ptr [EBP + -0x18],EDI
008c5410 : CALL EAX
008c5412 : SUB DI,AX
008c5415 : MOVZX EAX,DI
008c5418 : TEST AX,AX
008c541b : JZ 0x008c557a
008c5421 : MOV ECX,dword ptr [ESI + 0x50]
008c5424 : MOVZX EDX,word ptr [EBP + -0x18]
008c5428 : MOVZX DI,byte ptr [ESI + 0x40]
008c542d : PUSH ECX
008c542e : PUSH EAX
008c542f : PUSH EDX
008c5430 : CALL 0x007035b0
008c5435 : ADD ESP,0xc
008c5438 : MOV EDI,EAX
008c543a : JMP 0x008c5537
008c543f : MOV EDI,dword ptr [EBX + 0xb0]
008c5445 : MOV ESI,dword ptr [EBX + 0xb8]
008c544b : CMP EDI,ESI
008c544d : JZ 0x008c557a
008c5453 : MOV EAX,dword ptr [EBX + 0x10]
008c5456 : PUSH EAX
008c5457 : CALL 0x004049b0
008c545c : ADD ESP,0x4
008c545f : TEST EAX,EAX
008c5461 : JZ 0x008c557a
008c5467 : MOV EAX,dword ptr [EAX + 0x54]
008c546a : MOV dword ptr [EBP + -0x2c],EAX
008c546d : FILD dword ptr [EBP + -0x2c]
008c5470 : TEST EAX,EAX
008c5472 : JGE 0x008c547a
008c5474 : FADD float ptr [0x00cdf0e0]
008c547a : LEA ECX,[EDI + EDI*0x4]
008c547d : FMUL float ptr [0x00cdf23c]
008c5483 : ADD ECX,ECX
008c5485 : MOV EAX,0x10624dd3
008c548a : IMUL ECX
008c548c : FSTP float ptr [EBP + -0x18]
008c548f : SAR EDX,0x6
008c5492 : MOV ECX,EDX
008c5494 : SHR ECX,0x1f
008c5497 : ADD ECX,EDX
008c5499 : MOV EAX,ECX
008c549b : MOV dword ptr [EBP + -0x2c],EAX
008c549e : LEA ECX,[ESI + ESI*0x4]
008c54a1 : ADD ECX,ECX
008c54a3 : MOV EAX,0x10624dd3
008c54a8 : IMUL ECX
008c54aa : MOV ECX,dword ptr [EBP + -0x2c]
008c54ad : SAR EDX,0x6
008c54b0 : MOV EAX,EDX
008c54b2 : SHR EAX,0x1f
008c54b5 : ADD EAX,EDX
008c54b7 : SUB EAX,ECX
008c54b9 : CVTSI2SS XMM0,EAX
008c54bd : MULSS XMM0,dword ptr [EBP + -0x18]
008c54c2 : CALL 0x00425350
008c54c7 : MOV ECX,EAX
008c54c9 : MOV EAX,0x66666667
008c54ce : IMUL ECX
008c54d0 : SAR EDX,0x2
008c54d3 : MOV ECX,EDX
008c54d5 : SHR ECX,0x1f
008c54d8 : ADD ECX,EDX
008c54da : CMP ECX,0x1
008c54dd : JGE 0x008c54e6
008c54df : MOV EDI,0x1
008c54e4 : JMP 0x008c5537
008c54e6 : LEA ECX,[EDI + EDI*0x4]
008c54e9 : ADD ECX,ECX
008c54eb : MOV EAX,0x10624dd3
008c54f0 : IMUL ECX
008c54f2 : SAR EDX,0x6
008c54f5 : MOV EAX,EDX
008c54f7 : SHR EAX,0x1f
008c54fa : ADD EAX,EDX
008c54fc : MOV EDI,EAX
008c54fe : LEA ECX,[ESI + ESI*0x4]
008c5501 : ADD ECX,ECX
008c5503 : MOV EAX,0x10624dd3
008c5508 : IMUL ECX
008c550a : SAR EDX,0x6
008c550d : MOV ECX,EDX
008c550f : SHR ECX,0x1f
008c5512 : ADD ECX,EDX
008c5514 : SUB ECX,EDI
008c5516 : CVTSI2SS XMM0,ECX
008c551a : MULSS XMM0,dword ptr [EBP + -0x18]
008c551f : CALL 0x00425350
008c5524 : MOV ECX,EAX
008c5526 : MOV EAX,0x66666667
008c552b : IMUL ECX
008c552d : SAR EDX,0x2
008c5530 : MOV EDI,EDX
008c5532 : SHR EDI,0x1f
008c5535 : ADD EDI,EDX
008c5537 : PUSH 0xc
008c5539 : CALL 0x006f0300
008c553e : ADD ESP,0x4
008c5541 : MOV dword ptr [EBP + -0x2c],EAX
008c5544 : XOR ECX,ECX
008c5546 : MOV dword ptr [EBP + -0x4],ECX
008c5549 : CMP EAX,ECX
008c554b : JZ 0x008c5557
008c554d : MOV byte ptr [EAX],CL
008c554f : MOV dword ptr [EAX + 0x4],ECX
008c5552 : MOV dword ptr [EAX + 0x8],ECX
008c5555 : JMP 0x008c5559
008c5557 : XOR EAX,EAX
008c5559 : MOV dword ptr [EBP + -0x4],0xffffffff
008c5560 : MOV EDX,dword ptr [EBP + 0x8]
008c5563 : MOV dword ptr [EAX + 0x8],EBX
008c5566 : MOV byte ptr [EAX],0x0
008c5569 : MOV dword ptr [EAX + 0x4],EDI
008c556c : ADD EDX,0x38
008c556f : LEA EDI,[EBP + -0x2c]
008c5572 : MOV dword ptr [EBP + -0x2c],EAX
008c5575 : CALL 0x00449730
008c557a : MOV EDX,dword ptr [EBP + -0x20]
008c557d : MOV EAX,0x1
008c5582 : ADD dword ptr [EBP + -0x10],EAX
008c5585 : SUB dword ptr [EBP + -0x1c],EAX
008c5588 : JNZ 0x008c5362
008c558e : MOV ECX,dword ptr [EBP + -0x30]
008c5591 : MOV EAX,0x1
008c5596 : ADD dword ptr [EBP + -0x14],EAX
008c5599 : SUB dword ptr [EBP + -0x24],EAX
008c559c : JNZ 0x008c534e
008c55a2 : MOV ESI,dword ptr [EBP + -0x28]
008c55a5 : MOV EDX,dword ptr [0x00da9894]
008c55ab : MOV EAX,dword ptr [EDX]
008c55ad : INC ESI
008c55ae : MOV dword ptr [EBP + -0x28],ESI
008c55b1 : CMP ESI,dword ptr [EAX + 0x40]
008c55b4 : JC 0x008c530a
008c55ba : MOV ECX,dword ptr [EBP + -0xc]
008c55bd : MOV dword ptr FS:[0x0],ECX
008c55c4 : POP ECX
008c55c5 : POP EDI
008c55c6 : POP ESI
008c55c7 : POP EBX
008c55c8 : MOV ESP,EBP
008c55ca : POP EBP
008c55cb : RET 0x4
