PROGRAM  : Maestia.exe
FUNCTION : FUN_0058eeb0
ENTRY    : 0058eeb0
BODY     : [[0058eeb0, 0058ef59]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058eeb0(void)

{
  int iVar1;
  int in_ECX;
  undefined4 local_4;
  
  if ((*(byte *)(in_ECX + 0x1c4) & 8) == 0) {
    *(byte *)(in_ECX + 0x1c4) = *(byte *)(in_ECX + 0x1c4) | 8;
    FUN_0058c6c0(0);
    local_4 = local_4 & 0xffff0000;
    iVar1 = FUN_00571c40(5);
    *(undefined4 *)(iVar1 + 4) = 2;
    *(int *)(in_ECX + 4) = *(int *)(in_ECX + 4) + 1;
    if (*(GRefCountNTSImpl **)(iVar1 + 8) != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar1 + 8));
    }
    *(int *)(iVar1 + 8) = in_ECX;
    if (*(GRefCountNTSImpl **)(iVar1 + 0xc) != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar1 + 0xc));
    }
    *(undefined4 *)(iVar1 + 0xc) = 0;
    *(undefined4 *)(iVar1 + 0x10) = 1;
    *(undefined4 *)(iVar1 + 0x14) = 0;
    *(undefined4 *)(iVar1 + 0x18) = 0xff000000;
    *(uint *)(iVar1 + 0x1c) = local_4;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058eeb0 : SUB ESP,0x10
0058eeb3 : PUSH ESI
0058eeb4 : MOV ESI,ECX
0058eeb6 : MOV AL,byte ptr [ESI + 0x1c4]
0058eebc : TEST AL,0x8
0058eebe : JNZ 0x0058ef55
0058eec4 : PUSH EBX
0058eec5 : PUSH EDI
0058eec6 : OR AL,0x8
0058eec8 : XOR EBX,EBX
0058eeca : PUSH EBX
0058eecb : MOV byte ptr [ESI + 0x1c4],AL
0058eed1 : CALL 0x0058c6c0
0058eed6 : XOR EAX,EAX
0058eed8 : MOV word ptr [ESP + 0x14],AX
0058eedd : MOV EAX,dword ptr [ESI + 0xa0]
0058eee3 : PUSH 0x5
0058eee5 : LEA ECX,[EAX + 0xa2c]
0058eeeb : MOV dword ptr [ESP + 0x10],0x1
0058eef3 : MOV dword ptr [ESP + 0x14],EBX
0058eef7 : MOV byte ptr [ESP + 0x1a],BL
0058eefb : MOV byte ptr [ESP + 0x1b],0xff
0058ef00 : MOV byte ptr [ESP + 0x1c],BL
0058ef04 : MOV byte ptr [ESP + 0x1d],BL
0058ef08 : CALL 0x00571c40
0058ef0d : MOV EDI,EAX
0058ef0f : MOV dword ptr [EDI + 0x4],0x2
0058ef16 : INC dword ptr [ESI + 0x4]
0058ef19 : MOV ECX,dword ptr [EDI + 0x8]
0058ef1c : CMP ECX,EBX
0058ef1e : JZ 0x0058ef25
0058ef20 : CALL 0x004ff7c0
0058ef25 : MOV dword ptr [EDI + 0x8],ESI
0058ef28 : MOV ECX,dword ptr [EDI + 0xc]
0058ef2b : CMP ECX,EBX
0058ef2d : JZ 0x0058ef34
0058ef2f : CALL 0x004ff7c0
0058ef34 : MOV ECX,dword ptr [ESP + 0xc]
0058ef38 : MOV EDX,dword ptr [ESP + 0x10]
0058ef3c : MOV EAX,dword ptr [ESP + 0x14]
0058ef40 : MOV dword ptr [EDI + 0xc],EBX
0058ef43 : MOV dword ptr [EDI + 0x10],ECX
0058ef46 : MOV ECX,dword ptr [ESP + 0x18]
0058ef4a : MOV dword ptr [EDI + 0x14],EDX
0058ef4d : MOV dword ptr [EDI + 0x18],EAX
0058ef50 : MOV dword ptr [EDI + 0x1c],ECX
0058ef53 : POP EDI
0058ef54 : POP EBX
0058ef55 : POP ESI
0058ef56 : ADD ESP,0x10
0058ef59 : RET
