PROGRAM  : Maestia.exe
FUNCTION : FUN_00844f70
ENTRY    : 00844f70
BODY     : [[00844f70, 00845167]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00844f70(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  char cVar4;
  int local_80;
  int local_7c;
  wchar_t *local_78;
  uint uStack_74;
  undefined1 local_4c [28];
  float local_30;
  float local_2c;
  float local_28;
  int local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined1 *local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar2 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4c489;
  local_10 = ExceptionList;
  uStack_74 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((*(int *)(*(int *)(DAT_017248f8 + 0x1c) + 8) != 0) &&
     (iVar1 = *(int *)(**(int **)(*(int *)(DAT_017248f8 + 0x1c) + 4) + 0x10), iVar1 != 0)) {
    local_78 = (wchar_t *)&local_14;
    local_14 = *(ushort *)(*(int *)(iVar1 + 4) + 0xb8) | 0x66000000;
    local_7c = 0x844fe2;
    FUN_004437f0();
    if ((local_18 != (undefined1 *)*(int *)(iVar2 + 0x44)) &&
       ((iVar2 = *(int *)((int)local_18 + 0x10), iVar2 != 0 && (*(int *)(iVar2 + 0xf0) != 0)))) {
      local_24 = 0;
      local_1c = 0;
      local_20 = 0;
      local_30 = (float)*(ushort *)(iVar2 + 0x82);
      local_28 = (float)*(ushort *)(iVar2 + 0x86);
      local_78 = *(wchar_t **)(DAT_00da93ec + 0xc);
      local_2c = (float)*(ushort *)(iVar2 + 0x84);
      local_7c = 0x84505e;
      FUN_007e9290();
      local_78 = (wchar_t *)local_1c;
      local_7c = local_24;
      local_80 = DAT_00da93ec;
      cVar4 = FUN_00a30a90();
      if (cVar4 == '\0') {
        if (((DAT_0172491c != 0) && (*DAT_00da9894 != 0)) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0))
        {
          local_78 = L"IDS_CHARACTER_NOT_MOVALBE";
          local_7c = 0x8450b8;
          FUN_00406460();
          local_8 = 0;
          piVar3 = *(int **)(*DAT_00da9894 + 0x1a8);
          local_78 = (wchar_t *)local_4c;
          local_7c = 0x8450df;
          local_7c = FUN_0081d120();
          local_8._0_1_ = 1;
          local_78 = (wchar_t *)0x3;
          local_80 = 0x8450ef;
          (**(code **)(*piVar3 + 0x44))();
          local_8 = (uint)local_8._1_3_ << 8;
          local_80 = 0x8450fa;
          FUN_00406560();
          local_8 = 0xffffffff;
          local_80 = 0x845109;
          FUN_00406560();
          ExceptionList = local_10;
          return;
        }
      }
      else {
        local_18 = (undefined1 *)&local_80;
        local_80 = local_24;
        local_7c = local_20;
        local_78 = (wchar_t *)local_1c;
        FUN_00a1b660();
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00844f70 : PUSH EBP
00844f71 : MOV EBP,ESP
00844f73 : PUSH -0x1
00844f75 : PUSH 0xb4c489
00844f7a : MOV EAX,FS:[0x0]
00844f80 : PUSH EAX
00844f81 : SUB ESP,0x58
00844f84 : PUSH ESI
00844f85 : PUSH EDI
00844f86 : MOV EAX,[0x00d66fa0]
00844f8b : XOR EAX,EBP
00844f8d : PUSH EAX
00844f8e : LEA EAX,[EBP + -0xc]
00844f91 : MOV FS:[0x0],EAX
00844f97 : MOV EAX,[0x017248f8]
00844f9c : MOV EAX,dword ptr [EAX + 0x1c]
00844f9f : MOV ECX,dword ptr [EAX + 0x8]
00844fa2 : TEST ECX,ECX
00844fa4 : JZ 0x00845157
00844faa : MOV EAX,dword ptr [EAX + 0x4]
00844fad : MOV EAX,dword ptr [EAX]
00844faf : MOV EAX,dword ptr [EAX + 0x10]
00844fb2 : TEST EAX,EAX
00844fb4 : JZ 0x00845157
00844fba : MOV ECX,dword ptr [EAX + 0x4]
00844fbd : MOVZX EDX,word ptr [ECX + 0xb8]
00844fc4 : MOV ESI,dword ptr [0x00d7c54c]
00844fca : LEA EAX,[EBP + -0x10]
00844fcd : OR EDX,0x66000000
00844fd3 : PUSH EAX
00844fd4 : LEA ECX,[ESI + 0x40]
00844fd7 : LEA EAX,[EBP + -0x14]
00844fda : MOV dword ptr [EBP + -0x10],EDX
00844fdd : CALL 0x004437f0
00844fe2 : MOV ESI,dword ptr [ESI + 0x44]
00844fe5 : MOV EAX,dword ptr [EBP + -0x14]
00844fe8 : CMP EAX,ESI
00844fea : JZ 0x00845157
00844ff0 : MOV EAX,dword ptr [EAX + 0x10]
00844ff3 : TEST EAX,EAX
00844ff5 : JZ 0x00845157
00844ffb : MOV ESI,dword ptr [EAX + 0xf0]
00845001 : TEST ESI,ESI
00845003 : JZ 0x00845157
00845009 : MOVZX ECX,word ptr [EAX + 0x82]
00845010 : FLDZ
00845012 : MOVZX EDX,word ptr [EAX + 0x84]
00845019 : FST float ptr [EBP + -0x20]
0084501c : FSTP float ptr [EBP + -0x18]
0084501f : XORPS XMM0,XMM0
00845022 : MOVZX EAX,word ptr [EAX + 0x86]
00845029 : MOVSS dword ptr [EBP + -0x1c],XMM0
0084502e : CVTSI2SS XMM0,ECX
00845032 : MOV ECX,dword ptr [0x00da93ec]
00845038 : CVTSI2SS XMM2,EAX
0084503c : MOV EAX,dword ptr [ECX + 0xc]
0084503f : CVTSI2SS XMM1,EDX
00845043 : PUSH EAX
00845044 : LEA EDX,[EBP + -0x20]
00845047 : LEA ECX,[EBP + -0x2c]
0084504a : MOVSS dword ptr [EBP + -0x2c],XMM0
0084504f : MOVSS dword ptr [EBP + -0x28],XMM1
00845054 : MOVSS dword ptr [EBP + -0x24],XMM2
00845059 : CALL 0x007e9290
0084505e : FLD float ptr [EBP + -0x18]
00845061 : MOV EDX,dword ptr [0x00da93ec]
00845067 : SUB ESP,0x8
0084506a : FSTP float ptr [ESP + 0x4]
0084506e : FLD float ptr [EBP + -0x20]
00845071 : FSTP float ptr [ESP]
00845074 : PUSH EDX
00845075 : CALL 0x00a30a90
0084507a : TEST AL,AL
0084507c : JNZ 0x0084511a
00845082 : CMP dword ptr [0x0172491c],0x0
00845089 : JZ 0x00845157
0084508f : MOV EAX,[0x00da9894]
00845094 : MOV EAX,dword ptr [EAX]
00845096 : TEST EAX,EAX
00845098 : JZ 0x00845157
0084509e : CMP dword ptr [EAX + 0x1a8],0x0
008450a5 : JZ 0x00845157
008450ab : PUSH 0xc3bae0
008450b0 : LEA ECX,[EBP + -0x48]
008450b3 : CALL 0x00406460
008450b8 : MOV dword ptr [EBP + -0x4],0x0
008450bf : MOV ECX,dword ptr [0x00da9894]
008450c5 : MOV EAX,dword ptr [ECX]
008450c7 : MOV ECX,dword ptr [0x0172491c]
008450cd : MOV ESI,dword ptr [EAX + 0x1a8]
008450d3 : LEA EDX,[EBP + -0x48]
008450d6 : PUSH EDX
008450d7 : LEA EDI,[EBP + -0x64]
008450da : CALL 0x0081d120
008450df : MOV byte ptr [EBP + -0x4],0x1
008450e3 : MOV EDX,dword ptr [ESI]
008450e5 : PUSH 0x3
008450e7 : PUSH EAX
008450e8 : MOV EAX,dword ptr [EDX + 0x44]
008450eb : MOV ECX,ESI
008450ed : CALL EAX
008450ef : MOV byte ptr [EBP + -0x4],0x0
008450f3 : MOV ECX,EDI
008450f5 : CALL 0x00406560
008450fa : MOV dword ptr [EBP + -0x4],0xffffffff
00845101 : LEA ECX,[EBP + -0x48]
00845104 : CALL 0x00406560
00845109 : MOV ECX,dword ptr [EBP + -0xc]
0084510c : MOV dword ptr FS:[0x0],ECX
00845113 : POP ECX
00845114 : POP EDI
00845115 : POP ESI
00845116 : MOV ESP,EBP
00845118 : POP EBP
00845119 : RET
0084511a : MOVSS XMM0,dword ptr [EBP + -0x20]
0084511f : SUB ESP,0xc
00845122 : MOV EAX,ESP
00845124 : MOVSS dword ptr [EAX],XMM0
00845128 : MOVSS XMM0,dword ptr [EBP + -0x1c]
0084512d : MOVSS dword ptr [EAX + 0x4],XMM0
00845132 : MOVSS XMM0,dword ptr [EBP + -0x18]
00845137 : MOVSS dword ptr [EAX + 0x8],XMM0
0084513c : MOVZX EDI,word ptr [ESI + 0x4]
00845140 : MOVZX ECX,word ptr [ESI + 0x6]
00845144 : MOV ESI,dword ptr [0x00da93ec]
0084514a : SHL EDI,0x10
0084514d : OR EDI,ECX
0084514f : MOV dword ptr [EBP + -0x14],ESP
00845152 : CALL 0x00a1b660
00845157 : MOV ECX,dword ptr [EBP + -0xc]
0084515a : MOV dword ptr FS:[0x0],ECX
00845161 : POP ECX
00845162 : POP EDI
00845163 : POP ESI
00845164 : MOV ESP,EBP
00845166 : POP EBP
00845167 : RET
