PROGRAM  : Maestia.exe
FUNCTION : FUN_004d6ac0
ENTRY    : 004d6ac0
BODY     : [[004d6ac0, 004d6adc] [004d6ae0, 004d6b0d]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_004d6ac0(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  ushort in_AX;
  int in_ECX;
  
  puVar1 = (undefined4 *)
           (*(int *)(in_ECX + 0x20) + ((uint)(in_AX >> 4) % *(uint *)(in_ECX + 0x24)) * 4);
  puVar2 = (undefined4 *)*puVar1;
  while( true ) {
    if (puVar2 == (undefined4 *)0x0) {
      return 0;
    }
    if (*(ushort *)(puVar2 + 2) == in_AX) break;
    puVar1 = puVar2;
    puVar2 = (undefined4 *)*puVar2;
  }
  *puVar1 = *puVar2;
  *puVar2 = *(undefined4 *)(in_ECX + 0x38);
  *(undefined4 **)(in_ECX + 0x38) = puVar2;
  *(int *)(in_ECX + 0x30) = *(int *)(in_ECX + 0x30) + -1;
  *(int *)(in_ECX + 0x28) = *(int *)(in_ECX + 0x28) + -1;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
004d6ac0 : PUSH ESI
004d6ac1 : MOV SI,AX
004d6ac4 : MOVZX EAX,SI
004d6ac7 : SHR EAX,0x4
004d6aca : XOR EDX,EDX
004d6acc : DIV dword ptr [ECX + 0x24]
004d6acf : MOV EAX,dword ptr [ECX + 0x20]
004d6ad2 : LEA EDX,[EAX + EDX*0x4]
004d6ad5 : MOV EAX,dword ptr [EDX]
004d6ad7 : TEST EAX,EAX
004d6ad9 : JZ 0x004d6aee
004d6adb : JMP 0x004d6ae0
004d6ae0 : CMP word ptr [EAX + 0x8],SI
004d6ae4 : JZ 0x004d6af2
004d6ae6 : MOV EDX,EAX
004d6ae8 : MOV EAX,dword ptr [EAX]
004d6aea : TEST EAX,EAX
004d6aec : JNZ 0x004d6ae0
004d6aee : XOR EAX,EAX
004d6af0 : POP ESI
004d6af1 : RET
004d6af2 : MOV ESI,dword ptr [EAX]
004d6af4 : MOV dword ptr [EDX],ESI
004d6af6 : MOV EDX,dword ptr [ECX + 0x38]
004d6af9 : MOV dword ptr [EAX],EDX
004d6afb : MOV dword ptr [ECX + 0x38],EAX
004d6afe : OR EAX,0xffffffff
004d6b01 : ADD dword ptr [ECX + 0x30],EAX
004d6b04 : ADD dword ptr [ECX + 0x28],EAX
004d6b07 : MOV EAX,0x1
004d6b0c : POP ESI
004d6b0d : RET
