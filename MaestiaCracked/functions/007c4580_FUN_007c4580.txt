PROGRAM  : Maestia.exe
FUNCTION : FUN_007c4580
ENTRY    : 007c4580
BODY     : [[007c4580, 007c468f]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_007c4580(undefined4 *param_1)

{
  BOOL BVar1;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3a06f;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_008026a0(param_1);
  if (param_1 + 0x34 == (undefined4 *)0x0) {
    DAT_017251f8 = (undefined4 *)0x0;
  }
  else {
    DAT_017251f8 = param_1;
  }
  local_8._0_1_ = 1;
  local_8._1_3_ = 0;
  *param_1 = &PTR_FUN_00cd4da4;
  param_1[0x34] = 0;
  param_1[0x35] = 0;
  FUN_00463b70(param_1 + 0x37);
  local_8 = CONCAT31(local_8._1_3_,2);
  param_1[0x3d] = &PTR_FUN_00cdec94;
  BVar1 = InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)(param_1 + 0x3e),4000);
  if (BVar1 == 0) {
    InitializeCriticalSection((LPCRITICAL_SECTION)(param_1 + 0x3e));
  }
  local_8 = CONCAT31(local_8._1_3_,3);
  param_1[0x44] = &PTR_FUN_00cdec94;
  BVar1 = InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)(param_1 + 0x45),4000);
  if (BVar1 == 0) {
    InitializeCriticalSection((LPCRITICAL_SECTION)(param_1 + 0x45));
  }
  local_8 = CONCAT31(local_8._1_3_,4);
  FUN_00401c00(*(undefined4 *)(param_1[0x38] + 4));
  *(undefined4 *)(param_1[0x38] + 4) = param_1[0x38];
  param_1[0x39] = 0;
  *(undefined4 *)param_1[0x38] = param_1[0x38];
  *(undefined4 *)(param_1[0x38] + 8) = param_1[0x38];
  param_1[0x36] = 0;
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
007c4580 : PUSH EBP
007c4581 : MOV EBP,ESP
007c4583 : PUSH -0x1
007c4585 : PUSH 0xb3a06f
007c458a : MOV EAX,FS:[0x0]
007c4590 : PUSH EAX
007c4591 : PUSH EBX
007c4592 : PUSH ESI
007c4593 : PUSH EDI
007c4594 : MOV EAX,[0x00d66fa0]
007c4599 : XOR EAX,EBP
007c459b : PUSH EAX
007c459c : LEA EAX,[EBP + -0xc]
007c459f : MOV FS:[0x0],EAX
007c45a5 : MOV ESI,dword ptr [EBP + 0x8]
007c45a8 : PUSH ESI
007c45a9 : CALL 0x008026a0
007c45ae : XOR ECX,ECX
007c45b0 : MOV dword ptr [EBP + -0x4],ECX
007c45b3 : LEA EAX,[ESI + 0xd0]
007c45b9 : CMP EAX,ECX
007c45bb : JZ 0x007c45cb
007c45bd : LEA EDX,[EAX + 0xffffff30]
007c45c3 : MOV dword ptr [0x017251f8],EDX
007c45c9 : JMP 0x007c45d1
007c45cb : MOV dword ptr [0x017251f8],ECX
007c45d1 : MOV byte ptr [EBP + -0x4],0x1
007c45d5 : LEA EDI,[ESI + 0xdc]
007c45db : PUSH EDI
007c45dc : MOV dword ptr [ESI],0xcd4da4
007c45e2 : MOV dword ptr [EAX],ECX
007c45e4 : MOV dword ptr [ESI + 0xd4],ECX
007c45ea : CALL 0x00463b70
007c45ef : MOV byte ptr [EBP + -0x4],0x2
007c45f3 : PUSH 0xfa0
007c45f8 : LEA EBX,[ESI + 0xf8]
007c45fe : PUSH EBX
007c45ff : MOV dword ptr [ESI + 0xf4],0xcdec94
007c4609 : CALL dword ptr [0x00b85110]
007c460f : TEST EAX,EAX
007c4611 : JNZ 0x007c461a
007c4613 : PUSH EBX
007c4614 : CALL dword ptr [0x00b85114]
007c461a : MOV byte ptr [EBP + -0x4],0x3
007c461e : PUSH 0xfa0
007c4623 : LEA EBX,[ESI + 0x114]
007c4629 : PUSH EBX
007c462a : MOV dword ptr [ESI + 0x110],0xcdec94
007c4634 : CALL dword ptr [0x00b85110]
007c463a : TEST EAX,EAX
007c463c : JNZ 0x007c4645
007c463e : PUSH EBX
007c463f : CALL dword ptr [0x00b85114]
007c4645 : MOV byte ptr [EBP + -0x4],0x4
007c4649 : MOV EAX,dword ptr [EDI + 0x4]
007c464c : MOV ECX,dword ptr [EAX + 0x4]
007c464f : PUSH ECX
007c4650 : MOV ECX,EDI
007c4652 : CALL 0x00401c00
007c4657 : MOV EAX,dword ptr [EDI + 0x4]
007c465a : MOV dword ptr [EAX + 0x4],EAX
007c465d : MOV EAX,dword ptr [EDI + 0x4]
007c4660 : XOR ECX,ECX
007c4662 : MOV dword ptr [EDI + 0x8],ECX
007c4665 : MOV dword ptr [EAX],EAX
007c4667 : MOV EDI,dword ptr [EDI + 0x4]
007c466a : MOV dword ptr [EDI + 0x8],EDI
007c466d : MOV dword ptr [ESI + 0xd8],ECX
007c4673 : MOV dword ptr [EBP + -0x4],0xffffffff
007c467a : MOV EAX,ESI
007c467c : MOV ECX,dword ptr [EBP + -0xc]
007c467f : MOV dword ptr FS:[0x0],ECX
007c4686 : POP ECX
007c4687 : POP EDI
007c4688 : POP ESI
007c4689 : POP EBX
007c468a : MOV ESP,EBP
007c468c : POP EBP
007c468d : RET 0x4
