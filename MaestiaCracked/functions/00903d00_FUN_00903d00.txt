PROGRAM  : Maestia.exe
FUNCTION : FUN_00903d00
ENTRY    : 00903d00
BODY     : [[00903d00, 00903e58]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00903d00(undefined4 param_1,undefined4 param_2)

{
  ushort uVar1;
  int *in_ECX;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1eb6a;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = (ushort)param_2;
  switch(param_1) {
  case 0xc382:
    if (uVar1 < *(ushort *)((int)in_ECX + 0x3a)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc383:
    if ((*(ushort *)(in_ECX + 0xe) < uVar1) && (1 < uVar1)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc384:
    if (*(ushort *)((int)in_ECX + 0x3a) < uVar1) {
      FUN_00406460(L"IDS_BUY_MSG_BOX_TOO_MANY_ITEM");
      local_8 = 0;
      FUN_0081d120(local_4c);
      local_8 = CONCAT31(local_8._1_3_,2);
    }
    else {
      if (*(ushort *)(in_ECX + 0xe) <= uVar1) {
        (**(code **)(*in_ECX + 0x44))(param_2,local_14);
        FUN_009ac1d0();
        goto switchD_00903d3e_caseD_c386;
      }
      FUN_00406460(L"IDS_BUY_MSG_BOX_TOO_SMALL_ITEM");
      local_8 = 3;
      FUN_0081d120(local_68);
      local_8 = CONCAT31(local_8._1_3_,5);
    }
    FUN_00406560();
    (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
    local_8 = 0xffffffff;
    FUN_00406560();
    break;
  case 0xc386:
switchD_00903d3e_caseD_c386:
    (**(code **)(*in_ECX + 0x20))();
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00903d00 : PUSH EBP
00903d01 : MOV EBP,ESP
00903d03 : PUSH -0x1
00903d05 : PUSH 0xb1eb6a
00903d0a : MOV EAX,FS:[0x0]
00903d10 : PUSH EAX
00903d11 : SUB ESP,0x58
00903d14 : MOV EAX,[0x00d66fa0]
00903d19 : XOR EAX,EBP
00903d1b : MOV dword ptr [EBP + -0x10],EAX
00903d1e : PUSH EBX
00903d1f : PUSH ESI
00903d20 : PUSH EDI
00903d21 : PUSH EAX
00903d22 : LEA EAX,[EBP + -0xc]
00903d25 : MOV FS:[0x0],EAX
00903d2b : MOV EAX,dword ptr [EBP + 0x8]
00903d2e : ADD EAX,0xffff3c7e
00903d33 : MOV EBX,ECX
00903d35 : CMP EAX,0x4
00903d38 : JA 0x00903e3b
00903d3e : JMP dword ptr [EAX*0x4 + 0x903e5c]
00903d45 : MOV EAX,dword ptr [EBP + 0xc]
00903d48 : CMP AX,word ptr [EBX + 0x3a]
00903d4c : JNC 0x00903e3b
00903d52 : LEA ESI,[EAX + 0x1]
00903d55 : MOV EDI,EBX
00903d57 : CALL 0x009ac1d0
00903d5c : JMP 0x00903e3b
00903d61 : MOV EAX,dword ptr [EBP + 0xc]
00903d64 : CMP AX,word ptr [EBX + 0x38]
00903d68 : JBE 0x00903e3b
00903d6e : CMP AX,0x1
00903d72 : JBE 0x00903e3b
00903d78 : LEA ESI,[EAX + -0x1]
00903d7b : MOV EDI,EBX
00903d7d : CALL 0x009ac1d0
00903d82 : JMP 0x00903e3b
00903d87 : MOV EAX,dword ptr [EBP + 0xc]
00903d8a : CMP AX,word ptr [EBX + 0x3a]
00903d8e : JBE 0x00903de9
00903d90 : PUSH 0xc64240
00903d95 : LEA ECX,[EBP + -0x48]
00903d98 : CALL 0x00406460
00903d9d : MOV dword ptr [EBP + -0x4],0x0
00903da4 : MOV ECX,dword ptr [0x0172491c]
00903daa : LEA EAX,[EBP + -0x48]
00903dad : PUSH EAX
00903dae : LEA EDI,[EBP + -0x2c]
00903db1 : CALL 0x0081d120
00903db6 : MOV byte ptr [EBP + -0x4],0x2
00903dba : LEA ECX,[EBP + -0x48]
00903dbd : CALL 0x00406560
00903dc2 : MOV ECX,dword ptr [EBX + 0x4]
00903dc5 : MOV ECX,dword ptr [ECX + 0x1a8]
00903dcb : MOV EDX,dword ptr [ECX]
00903dcd : MOV EDX,dword ptr [EDX + 0x44]
00903dd0 : PUSH 0x3
00903dd2 : LEA EAX,[EBP + -0x2c]
00903dd5 : PUSH EAX
00903dd6 : CALL EDX
00903dd8 : MOV dword ptr [EBP + -0x4],0xffffffff
00903ddf : LEA ECX,[EBP + -0x2c]
00903de2 : CALL 0x00406560
00903de7 : JMP 0x00903e3b
00903de9 : CMP AX,word ptr [EBX + 0x38]
00903ded : JNC 0x00903e1e
00903def : PUSH 0xc6427c
00903df4 : LEA ECX,[EBP + -0x64]
00903df7 : CALL 0x00406460
00903dfc : MOV dword ptr [EBP + -0x4],0x3
00903e03 : MOV ECX,dword ptr [0x0172491c]
00903e09 : LEA EAX,[EBP + -0x64]
00903e0c : PUSH EAX
00903e0d : LEA EDI,[EBP + -0x2c]
00903e10 : CALL 0x0081d120
00903e15 : MOV byte ptr [EBP + -0x4],0x5
00903e19 : LEA ECX,[EBP + -0x64]
00903e1c : JMP 0x00903dbd
00903e1e : MOV EDX,dword ptr [EBX]
00903e20 : PUSH EAX
00903e21 : MOV EAX,dword ptr [EDX + 0x44]
00903e24 : CALL EAX
00903e26 : MOV ESI,0x1
00903e2b : MOV EDI,EBX
00903e2d : CALL 0x009ac1d0
00903e32 : MOV ECX,EBX
00903e34 : MOV EDX,dword ptr [EBX]
00903e36 : MOV EAX,dword ptr [EDX + 0x20]
00903e39 : CALL EAX
00903e3b : MOV ECX,dword ptr [EBP + -0xc]
00903e3e : MOV dword ptr FS:[0x0],ECX
00903e45 : POP ECX
00903e46 : POP EDI
00903e47 : POP ESI
00903e48 : POP EBX
00903e49 : MOV ECX,dword ptr [EBP + -0x10]
00903e4c : XOR ECX,EBP
00903e4e : CALL 0x00633e6b
00903e53 : MOV ESP,EBP
00903e55 : POP EBP
00903e56 : RET 0x8
