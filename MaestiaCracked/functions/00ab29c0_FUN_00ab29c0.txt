PROGRAM  : Maestia.exe
FUNCTION : FUN_00ab29c0
ENTRY    : 00ab29c0
BODY     : [[00ab29c0, 00ab2a79] [00ab2a80, 00ab2c21]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ab29c0(undefined4 param_1,ushort param_2)

{
  short sVar1;
  uint uVar2;
  int iVar3;
  short ****ppppsVar4;
  short *psVar5;
  uint in_ECX;
  short ****ppppsVar6;
  int *in_EDX;
  short *psVar7;
  wchar_t *pwVar8;
  undefined4 uVar9;
  uint local_90;
  uint local_74;
  uint local_58;
  undefined1 local_54 [4];
  undefined2 local_50;
  undefined4 local_40;
  uint local_3c;
  undefined4 local_34;
  short ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5ca75;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c[0] = (short ***)((uint)local_2c[0] & 0xffff0000);
  local_34 = param_1;
  local_18 = 7;
  local_1c = 0;
  local_14 = uVar2;
  FUN_00406360(&DAT_00c9a280,0);
  local_8 = 0;
  iVar3 = (**(code **)(*in_EDX + 0x38))(uVar2);
  if (iVar3 == 0) {
    if (in_ECX >> 0x10 == 0x76e) {
      uVar9 = 0x22;
      pwVar8 = L"IDS_TOOLTIP_CONDACTIVE_SKILL_TITLE";
    }
    else {
      uVar9 = 0x1f;
      pwVar8 = L"IDS_TOOLTIP_PASSIVE_SKILL_TITLE";
    }
  }
  else {
    uVar9 = 0x1e;
    pwVar8 = L"IDS_TOOLTIP_ACTIVE_SKILL_TITLE";
  }
  FUN_00406360(pwVar8,uVar9);
  ppppsVar6 = (short ****)local_2c[0];
  if (local_18 < 8) {
    ppppsVar6 = local_2c;
  }
  local_3c = 7;
  local_40 = 0;
  local_50 = 0;
  ppppsVar4 = ppppsVar6;
  do {
    sVar1 = *(short *)ppppsVar4;
    ppppsVar4 = (short ****)((int)ppppsVar4 + 2);
  } while (sVar1 != 0);
  FUN_00406360(ppppsVar6,(int)ppppsVar4 - (int)((int)ppppsVar6 + 2) >> 1);
  local_8._0_1_ = 1;
  iVar3 = FUN_0081d120(local_54);
  local_8._0_1_ = 2;
  if (*(uint *)(iVar3 + 0x18) < 8) {
    psVar7 = (short *)(iVar3 + 4);
  }
  else {
    psVar7 = *(short **)(iVar3 + 4);
  }
  psVar5 = psVar7;
  do {
    sVar1 = *psVar5;
    psVar5 = psVar5 + 1;
  } while (sVar1 != 0);
  FUN_00406360(psVar7,(int)psVar5 - (int)(psVar7 + 1) >> 1);
  local_8 = CONCAT31(local_8._1_3_,1);
  if (7 < local_74) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8._0_1_ = 0;
  if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_3c = 7;
  local_40 = 0;
  local_50 = 0;
  iVar3 = FUN_00824a20(DAT_0172491c,0);
  local_8._0_1_ = 3;
  if (*(uint *)(iVar3 + 0x18) < 8) {
    iVar3 = iVar3 + 4;
  }
  else {
    iVar3 = *(int *)(iVar3 + 4);
  }
  ppppsVar6 = (short ****)local_2c[0];
  if (local_18 < 8) {
    ppppsVar6 = local_2c;
  }
  uVar9 = FUN_00404750(ppppsVar6,iVar3,param_2 + 1);
  local_8._0_1_ = 4;
  FUN_00405c30(uVar9,0,0xffffffff);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_90) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  FUN_00404870(&DAT_00c9a350,1);
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (short ***)((uint)local_2c[0] & 0xffff0000);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ab29c0 : PUSH EBP
00ab29c1 : MOV EBP,ESP
00ab29c3 : PUSH -0x1
00ab29c5 : PUSH 0xb5ca75
00ab29ca : MOV EAX,FS:[0x0]
00ab29d0 : PUSH EAX
00ab29d1 : SUB ESP,0x9c
00ab29d7 : MOV EAX,[0x00d66fa0]
00ab29dc : XOR EAX,EBP
00ab29de : MOV dword ptr [EBP + -0x10],EAX
00ab29e1 : PUSH EBX
00ab29e2 : PUSH ESI
00ab29e3 : PUSH EDI
00ab29e4 : PUSH EAX
00ab29e5 : LEA EAX,[EBP + -0xc]
00ab29e8 : MOV FS:[0x0],EAX
00ab29ee : MOV EDI,ECX
00ab29f0 : MOV EAX,dword ptr [EBP + 0x8]
00ab29f3 : XOR EBX,EBX
00ab29f5 : XOR ECX,ECX
00ab29f7 : PUSH EBX
00ab29f8 : MOV ESI,EDX
00ab29fa : MOV word ptr [EBP + -0x28],CX
00ab29fe : PUSH 0xc9a280
00ab2a03 : LEA ECX,[EBP + -0x2c]
00ab2a06 : MOV dword ptr [EBP + -0x34],ESI
00ab2a09 : MOV dword ptr [EBP + -0x30],EAX
00ab2a0c : MOV dword ptr [EBP + -0x14],0x7
00ab2a13 : MOV dword ptr [EBP + -0x18],EBX
00ab2a16 : CALL 0x00406360
00ab2a1b : MOV dword ptr [EBP + -0x4],EBX
00ab2a1e : MOV EDX,dword ptr [ESI]
00ab2a20 : MOV EAX,dword ptr [EDX + 0x38]
00ab2a23 : MOV ECX,ESI
00ab2a25 : CALL EAX
00ab2a27 : TEST EAX,EAX
00ab2a29 : JZ 0x00ab2a34
00ab2a2b : PUSH 0x1e
00ab2a2d : PUSH 0xc9a284
00ab2a32 : JMP 0x00ab2a4f
00ab2a34 : SHR EDI,0x10
00ab2a37 : CMP EDI,0x76e
00ab2a3d : JNZ 0x00ab2a48
00ab2a3f : PUSH 0x22
00ab2a41 : PUSH 0xc9a2c8
00ab2a46 : JMP 0x00ab2a4f
00ab2a48 : PUSH 0x1f
00ab2a4a : PUSH 0xc9a310
00ab2a4f : LEA ECX,[EBP + -0x2c]
00ab2a52 : CALL 0x00406360
00ab2a57 : CMP dword ptr [EBP + -0x14],0x8
00ab2a5b : MOV EDX,dword ptr [EBP + -0x28]
00ab2a5e : JNC 0x00ab2a63
00ab2a60 : LEA EDX,[EBP + -0x28]
00ab2a63 : XOR ECX,ECX
00ab2a65 : MOV EAX,EDX
00ab2a67 : MOV dword ptr [EBP + -0x38],0x7
00ab2a6e : MOV dword ptr [EBP + -0x3c],EBX
00ab2a71 : MOV word ptr [EBP + -0x4c],CX
00ab2a75 : LEA ESI,[EAX + 0x2]
00ab2a78 : JMP 0x00ab2a80
00ab2a80 : MOV CX,word ptr [EAX]
00ab2a83 : ADD EAX,0x2
00ab2a86 : CMP CX,BX
00ab2a89 : JNZ 0x00ab2a80
00ab2a8b : SUB EAX,ESI
00ab2a8d : SAR EAX,0x1
00ab2a8f : PUSH EAX
00ab2a90 : PUSH EDX
00ab2a91 : LEA ECX,[EBP + -0x50]
00ab2a94 : CALL 0x00406360
00ab2a99 : MOV byte ptr [EBP + -0x4],0x1
00ab2a9d : MOV ECX,dword ptr [0x0172491c]
00ab2aa3 : LEA EDX,[EBP + -0x50]
00ab2aa6 : PUSH EDX
00ab2aa7 : LEA EDI,[EBP + 0xffffff78]
00ab2aad : CALL 0x0081d120
00ab2ab2 : MOV byte ptr [EBP + -0x4],0x2
00ab2ab6 : MOV EDI,0x8
00ab2abb : CMP dword ptr [EAX + 0x18],EDI
00ab2abe : JC 0x00ab2ac5
00ab2ac0 : MOV EDX,dword ptr [EAX + 0x4]
00ab2ac3 : JMP 0x00ab2ac8
00ab2ac5 : LEA EDX,[EAX + 0x4]
00ab2ac8 : MOV EAX,EDX
00ab2aca : LEA ESI,[EAX + 0x2]
00ab2acd : LEA ECX,[ECX]
00ab2ad0 : MOV CX,word ptr [EAX]
00ab2ad3 : ADD EAX,0x2
00ab2ad6 : CMP CX,BX
00ab2ad9 : JNZ 0x00ab2ad0
00ab2adb : SUB EAX,ESI
00ab2add : SAR EAX,0x1
00ab2adf : PUSH EAX
00ab2ae0 : PUSH EDX
00ab2ae1 : LEA ECX,[EBP + -0x2c]
00ab2ae4 : CALL 0x00406360
00ab2ae9 : MOV byte ptr [EBP + -0x4],0x1
00ab2aed : CMP dword ptr [EBP + -0x70],EDI
00ab2af0 : JC 0x00ab2afd
00ab2af2 : MOV ECX,dword ptr [EBP + 0xffffff7c]
00ab2af8 : CALL 0x006f04e0
00ab2afd : MOV ESI,0x7
00ab2b02 : XOR EAX,EAX
00ab2b04 : MOV dword ptr [EBP + -0x70],ESI
00ab2b07 : MOV dword ptr [EBP + -0x74],EBX
00ab2b0a : MOV word ptr [EBP + 0xffffff7c],AX
00ab2b11 : MOV byte ptr [EBP + -0x4],BL
00ab2b14 : CMP dword ptr [EBP + -0x38],EDI
00ab2b17 : JC 0x00ab2b21
00ab2b19 : MOV ECX,dword ptr [EBP + -0x4c]
00ab2b1c : CALL 0x006f04e0
00ab2b21 : MOV EAX,[0x0172491c]
00ab2b26 : MOV EDX,dword ptr [EBP + -0x34]
00ab2b29 : PUSH EBX
00ab2b2a : MOV dword ptr [EBP + -0x38],ESI
00ab2b2d : XOR ECX,ECX
00ab2b2f : ADD EDX,0x18
00ab2b32 : PUSH EAX
00ab2b33 : LEA ESI,[EBP + 0xffffff5c]
00ab2b39 : MOV dword ptr [EBP + -0x3c],EBX
00ab2b3c : MOV word ptr [EBP + -0x4c],CX
00ab2b40 : CALL 0x00824a20
00ab2b45 : MOV byte ptr [EBP + -0x4],0x3
00ab2b49 : CMP dword ptr [EAX + 0x18],EDI
00ab2b4c : JC 0x00ab2b53
00ab2b4e : MOV EAX,dword ptr [EAX + 0x4]
00ab2b51 : JMP 0x00ab2b56
00ab2b53 : ADD EAX,0x4
00ab2b56 : MOV ECX,dword ptr [EBP + -0x28]
00ab2b59 : CMP dword ptr [EBP + -0x14],EDI
00ab2b5c : JNC 0x00ab2b61
00ab2b5e : LEA ECX,[EBP + -0x28]
00ab2b61 : MOVZX EDX,word ptr [EBP + 0xc]
00ab2b65 : INC EDX
00ab2b66 : PUSH EDX
00ab2b67 : PUSH EAX
00ab2b68 : PUSH ECX
00ab2b69 : LEA ESI,[EBP + -0x6c]
00ab2b6c : CALL 0x00404750
00ab2b71 : ADD ESP,0xc
00ab2b74 : MOV byte ptr [EBP + -0x4],0x4
00ab2b78 : MOV ESI,dword ptr [EBP + -0x30]
00ab2b7b : PUSH -0x1
00ab2b7d : PUSH EBX
00ab2b7e : PUSH EAX
00ab2b7f : MOV ECX,ESI
00ab2b81 : CALL 0x00405c30
00ab2b86 : MOV byte ptr [EBP + -0x4],0x3
00ab2b8a : CMP dword ptr [EBP + -0x54],EDI
00ab2b8d : JC 0x00ab2b97
00ab2b8f : MOV ECX,dword ptr [EBP + -0x68]
00ab2b92 : CALL 0x006f04e0
00ab2b97 : XOR EAX,EAX
00ab2b99 : MOV dword ptr [EBP + -0x54],0x7
00ab2ba0 : MOV dword ptr [EBP + -0x58],EBX
00ab2ba3 : MOV word ptr [EBP + -0x68],AX
00ab2ba7 : MOV byte ptr [EBP + -0x4],BL
00ab2baa : CMP dword ptr [EBP + 0xffffff74],EDI
00ab2bb0 : JC 0x00ab2bbd
00ab2bb2 : MOV ECX,dword ptr [EBP + 0xffffff60]
00ab2bb8 : CALL 0x006f04e0
00ab2bbd : PUSH 0x1
00ab2bbf : XOR ECX,ECX
00ab2bc1 : PUSH 0xc9a350
00ab2bc6 : MOV dword ptr [EBP + 0xffffff74],0x7
00ab2bd0 : MOV dword ptr [EBP + 0xffffff70],EBX
00ab2bd6 : MOV word ptr [EBP + 0xffffff60],CX
00ab2bdd : CALL 0x00404870
00ab2be2 : MOV dword ptr [EBP + -0x4],0xffffffff
00ab2be9 : CMP dword ptr [EBP + -0x14],EDI
00ab2bec : JC 0x00ab2bf6
00ab2bee : MOV ECX,dword ptr [EBP + -0x28]
00ab2bf1 : CALL 0x006f04e0
00ab2bf6 : XOR EDX,EDX
00ab2bf8 : MOV dword ptr [EBP + -0x14],0x7
00ab2bff : MOV dword ptr [EBP + -0x18],EBX
00ab2c02 : MOV word ptr [EBP + -0x28],DX
00ab2c06 : MOV ECX,dword ptr [EBP + -0xc]
00ab2c09 : MOV dword ptr FS:[0x0],ECX
00ab2c10 : POP ECX
00ab2c11 : POP EDI
00ab2c12 : POP ESI
00ab2c13 : POP EBX
00ab2c14 : MOV ECX,dword ptr [EBP + -0x10]
00ab2c17 : XOR ECX,EBP
00ab2c19 : CALL 0x00633e6b
00ab2c1e : MOV ESP,EBP
00ab2c20 : POP EBP
00ab2c21 : RET
