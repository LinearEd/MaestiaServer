PROGRAM  : Maestia.exe
FUNCTION : FUN_00406f50
ENTRY    : 00406f50
BODY     : [[00406f50, 00406f8f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00406f50(void)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  int in_EDX;
  undefined4 *unaff_EDI;
  
  iVar1 = *(int *)(in_EDX + 4);
  if (iVar1 == 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = *(int *)(in_EDX + 0xc) - iVar1 >> 2;
  }
  puVar2 = *(undefined4 **)(in_EDX + 8);
  if ((uint)((int)puVar2 - iVar1 >> 2) < uVar3) {
    *puVar2 = *unaff_EDI;
    *(undefined4 **)(in_EDX + 8) = puVar2 + 1;
    return;
  }
  FUN_00408c10(in_EDX,puVar2,1,unaff_EDI);
  return;
}



============================================================
DISASSEMBLY
============================================================
00406f50 : PUSH ECX
00406f51 : PUSH EBX
00406f52 : PUSH ESI
00406f53 : MOV ESI,dword ptr [EDX + 0x4]
00406f56 : TEST ESI,ESI
00406f58 : JNZ 0x00406f5e
00406f5a : XOR EAX,EAX
00406f5c : JMP 0x00406f66
00406f5e : MOV EAX,dword ptr [EDX + 0xc]
00406f61 : SUB EAX,ESI
00406f63 : SAR EAX,0x2
00406f66 : MOV ECX,dword ptr [EDX + 0x8]
00406f69 : MOV EBX,ECX
00406f6b : SUB EBX,ESI
00406f6d : SAR EBX,0x2
00406f70 : CMP EBX,EAX
00406f72 : JNC 0x00406f82
00406f74 : MOV EAX,dword ptr [EDI]
00406f76 : MOV dword ptr [ECX],EAX
00406f78 : ADD ECX,0x4
00406f7b : MOV dword ptr [EDX + 0x8],ECX
00406f7e : POP ESI
00406f7f : POP EBX
00406f80 : POP ECX
00406f81 : RET
00406f82 : PUSH EDI
00406f83 : PUSH 0x1
00406f85 : PUSH ECX
00406f86 : PUSH EDX
00406f87 : CALL 0x00408c10
00406f8c : POP ESI
00406f8d : POP EBX
00406f8e : POP ECX
00406f8f : RET
