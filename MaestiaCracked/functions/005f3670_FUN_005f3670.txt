PROGRAM  : Maestia.exe
FUNCTION : FUN_005f3670
ENTRY    : 005f3670
BODY     : [[005f3670, 005f37b5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f3670(int param_1)

{
  undefined2 uVar1;
  undefined2 uVar2;
  int *piVar3;
  int iVar4;
  int in_ECX;
  undefined4 local_8;
  undefined4 local_4;
  
  piVar3 = *(int **)(*(int *)(param_1 + 8) + 0x10);
  if (piVar3 != (int *)0x0) {
    FUN_005f3620(piVar3[4]);
    FUN_005f3620(piVar3[5]);
    if (*piVar3 != 0) {
      FUN_005f29a0(piVar3);
    }
    *piVar3 = 0;
    *piVar3 = *(int *)(in_ECX + 0x70);
    *(int **)(in_ECX + 0x70) = piVar3;
  }
  piVar3 = *(int **)(*(int *)(param_1 + 8) + 0x14);
  if (piVar3 != (int *)0x0) {
    FUN_005f3620(piVar3[4]);
    FUN_005f3620(piVar3[5]);
    if (*piVar3 != 0) {
      FUN_005f29a0(piVar3);
    }
    *piVar3 = 0;
    *piVar3 = *(int *)(in_ECX + 0x70);
    *(int **)(in_ECX + 0x70) = piVar3;
  }
  if (**(int **)(param_1 + 8) != 0) {
    FUN_005f29a0(*(int **)(param_1 + 8));
  }
  iVar4 = *(int *)(param_1 + 0x1c);
  if ((*(short *)(iVar4 + 6) != 0) && (param_1 == *(int *)(iVar4 + 0x14))) {
    *(short *)(param_1 + 0x24) = *(short *)(param_1 + 0x24) + *(short *)(iVar4 + 6);
    *(undefined2 *)(iVar4 + 6) = 0;
  }
  **(undefined4 **)(param_1 + 8) = 0;
  uVar1 = *(undefined2 *)(param_1 + 0x24);
  local_8 = CONCAT22(*(undefined2 *)(*(int *)(param_1 + 0x1c) + 2),*(undefined2 *)(param_1 + 0x22));
  uVar2 = *(undefined2 *)(*(int *)(param_1 + 0x1c) + 4);
  iVar4 = *(int *)(param_1 + 8);
  *(undefined4 *)(iVar4 + 0x18) = local_8;
  local_4 = CONCAT22(uVar2,uVar1);
  *(undefined4 *)(iVar4 + 0x1c) = local_4;
  *(undefined4 *)(*(int *)(param_1 + 8) + 0x10) = 0;
  *(undefined4 *)(*(int *)(param_1 + 8) + 0x14) = 0;
  *(undefined2 *)(param_1 + 0x26) = 0;
  if ((*(ushort *)(param_1 + 0x20) & 0x4000) != 0) {
    *(ushort *)(param_1 + 0x20) = *(ushort *)(param_1 + 0x20) & 0xbfff;
    *(undefined4 *)(param_1 + 0x18) = *(undefined4 *)(in_ECX + 0x54);
    *(int *)(param_1 + 0x14) = in_ECX + 0x3c;
    *(int *)(*(int *)(in_ECX + 0x54) + 0x14) = param_1;
    *(int *)(in_ECX + 0x54) = param_1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005f3670 : SUB ESP,0x8
005f3673 : PUSH EBX
005f3674 : PUSH ESI
005f3675 : MOV ESI,dword ptr [ESP + 0x14]
005f3679 : MOV EAX,dword ptr [ESI + 0x8]
005f367c : MOV EBX,dword ptr [EAX + 0x10]
005f367f : PUSH EDI
005f3680 : MOV EDI,ECX
005f3682 : TEST EBX,EBX
005f3684 : JZ 0x005f36bb
005f3686 : MOV ECX,dword ptr [EBX + 0x10]
005f3689 : PUSH ECX
005f368a : MOV ECX,EDI
005f368c : CALL 0x005f3620
005f3691 : MOV EDX,dword ptr [EBX + 0x14]
005f3694 : PUSH EDX
005f3695 : MOV ECX,EDI
005f3697 : CALL 0x005f3620
005f369c : CMP dword ptr [EBX],0x0
005f369f : JZ 0x005f36ad
005f36a1 : PUSH EBX
005f36a2 : LEA ECX,[EDI + 0x84]
005f36a8 : CALL 0x005f29a0
005f36ad : MOV dword ptr [EBX],0x0
005f36b3 : MOV EAX,dword ptr [EDI + 0x70]
005f36b6 : MOV dword ptr [EBX],EAX
005f36b8 : MOV dword ptr [EDI + 0x70],EBX
005f36bb : MOV ECX,dword ptr [ESI + 0x8]
005f36be : MOV EBX,dword ptr [ECX + 0x14]
005f36c1 : TEST EBX,EBX
005f36c3 : JZ 0x005f36fa
005f36c5 : MOV EDX,dword ptr [EBX + 0x10]
005f36c8 : PUSH EDX
005f36c9 : MOV ECX,EDI
005f36cb : CALL 0x005f3620
005f36d0 : MOV EAX,dword ptr [EBX + 0x14]
005f36d3 : PUSH EAX
005f36d4 : MOV ECX,EDI
005f36d6 : CALL 0x005f3620
005f36db : CMP dword ptr [EBX],0x0
005f36de : JZ 0x005f36ec
005f36e0 : PUSH EBX
005f36e1 : LEA ECX,[EDI + 0x84]
005f36e7 : CALL 0x005f29a0
005f36ec : MOV dword ptr [EBX],0x0
005f36f2 : MOV ECX,dword ptr [EDI + 0x70]
005f36f5 : MOV dword ptr [EBX],ECX
005f36f7 : MOV dword ptr [EDI + 0x70],EBX
005f36fa : MOV EAX,dword ptr [ESI + 0x8]
005f36fd : CMP dword ptr [EAX],0x0
005f3700 : JZ 0x005f370e
005f3702 : PUSH EAX
005f3703 : LEA ECX,[EDI + 0x84]
005f3709 : CALL 0x005f29a0
005f370e : MOV EAX,dword ptr [ESI + 0x1c]
005f3711 : MOVZX ECX,word ptr [EAX + 0x6]
005f3715 : TEST CX,CX
005f3718 : JZ 0x005f3729
005f371a : CMP ESI,dword ptr [EAX + 0x14]
005f371d : JNZ 0x005f3729
005f371f : ADD word ptr [ESI + 0x24],CX
005f3723 : XOR EDX,EDX
005f3725 : MOV word ptr [EAX + 0x6],DX
005f3729 : MOV EAX,dword ptr [ESI + 0x8]
005f372c : MOV dword ptr [EAX],0x0
005f3732 : MOV EAX,dword ptr [ESI + 0x1c]
005f3735 : MOVZX EDX,word ptr [EAX + 0x2]
005f3739 : MOVZX ECX,word ptr [ESI + 0x22]
005f373d : MOV word ptr [ESP + 0xc],CX
005f3742 : MOVZX ECX,word ptr [ESI + 0x24]
005f3746 : MOV word ptr [ESP + 0xe],DX
005f374b : MOVZX EDX,word ptr [EAX + 0x4]
005f374f : MOV EAX,dword ptr [ESI + 0x8]
005f3752 : MOV word ptr [ESP + 0x10],CX
005f3757 : MOV ECX,dword ptr [ESP + 0xc]
005f375b : MOV dword ptr [EAX + 0x18],ECX
005f375e : MOV word ptr [ESP + 0x12],DX
005f3763 : MOV EDX,dword ptr [ESP + 0x10]
005f3767 : MOV dword ptr [EAX + 0x1c],EDX
005f376a : MOV EAX,dword ptr [ESI + 0x8]
005f376d : MOV dword ptr [EAX + 0x10],0x0
005f3774 : MOV ECX,dword ptr [ESI + 0x8]
005f3777 : MOV dword ptr [ECX + 0x14],0x0
005f377e : MOVZX EAX,word ptr [ESI + 0x20]
005f3782 : XOR EDX,EDX
005f3784 : MOV word ptr [ESI + 0x26],DX
005f3788 : TEST EAX,0x4000
005f378d : JZ 0x005f37ad
005f378f : AND EAX,0xbfff
005f3794 : MOV word ptr [ESI + 0x20],AX
005f3798 : MOV ECX,dword ptr [EDI + 0x54]
005f379b : LEA EAX,[EDI + 0x3c]
005f379e : MOV dword ptr [ESI + 0x18],ECX
005f37a1 : MOV dword ptr [ESI + 0x14],EAX
005f37a4 : MOV EDX,dword ptr [EAX + 0x18]
005f37a7 : MOV dword ptr [EDX + 0x14],ESI
005f37aa : MOV dword ptr [EAX + 0x18],ESI
005f37ad : POP EDI
005f37ae : POP ESI
005f37af : POP EBX
005f37b0 : ADD ESP,0x8
005f37b3 : RET 0x4
