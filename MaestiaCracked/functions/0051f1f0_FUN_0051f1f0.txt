PROGRAM  : Maestia.exe
FUNCTION : FUN_0051f1f0
ENTRY    : 0051f1f0
BODY     : [[0051f1f0, 0051f3fd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051f1f0(void)

{
  float fVar1;
  float fVar2;
  int iVar3;
  int *in_ECX;
  float unaff_EDI;
  float fStack_64;
  float fStack_60;
  undefined8 uStack_5c;
  undefined4 uStack_54;
  undefined8 uStack_50;
  undefined4 uStack_48;
  undefined4 uStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 uStack_24;
  int *local_20;
  undefined1 local_1c;
  char local_1b;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  local_14 = 0.0;
  local_18 = 0.0;
  local_c = 0.0;
  local_10 = 0.0;
  local_4 = 0.0;
  local_20 = (int *)0x0;
  local_8 = 0.0;
  local_1c = 0;
  local_1b = '\0';
  iVar3 = (**(code **)(*in_ECX + 0x40))();
  FUN_0051f070(&local_20);
  if (in_ECX == local_20) {
    uStack_5c = (double)CONCAT44(*(undefined4 *)(iVar3 + 0x958),(float)uStack_5c);
    uStack_54 = *(undefined4 *)(iVar3 + 0x95c);
    GMatrix2D::SetIdentity((GMatrix2D *)&uStack_38);
    iVar3 = in_ECX[8];
    if (iVar3 != 0) {
      GMatrix2D::SetIdentity((GMatrix2D *)&uStack_50);
      if (*(int *)(iVar3 + 0x20) == 0) {
        uStack_50 = *(double *)(iVar3 + 0x44);
        uStack_48 = *(undefined4 *)(iVar3 + 0x4c);
        uStack_44 = *(undefined4 *)(iVar3 + 0x50);
        uStack_40 = *(undefined4 *)(iVar3 + 0x54);
        uStack_3c = *(undefined4 *)(iVar3 + 0x58);
      }
      else {
        FUN_0051cdf0(&uStack_50);
        GMatrix2D::Prepend((GMatrix2D *)&uStack_50,(GMatrix2D *)(iVar3 + 0x44));
      }
      uStack_38 = (undefined4)uStack_50;
      uStack_34 = uStack_50._4_4_;
      uStack_30 = uStack_48;
      uStack_2c = uStack_44;
      uStack_28 = uStack_40;
      uStack_24 = uStack_3c;
    }
    GMatrix2D::TransformByInverse
              ((GMatrix2D *)&uStack_38,(GPoint<float> *)&fStack_60,
               (GPoint<float> *)((int)&uStack_5c + 4));
    fVar1 = local_8 + fStack_60;
    fVar2 = local_4 + (float)uStack_5c;
    fStack_60 = fVar1;
    if (local_1b != '\0') {
      fStack_60 = local_10;
      if (fVar1 < local_10) {
        fStack_60 = fVar1;
      }
      if (fStack_60 < local_18) {
        fStack_60 = local_18;
      }
      fStack_64 = local_c;
      if (fVar2 < local_c) {
        fStack_64 = fVar2;
      }
      fVar2 = fStack_64;
      if (fStack_64 < local_14) {
        fVar2 = local_14;
      }
    }
    uStack_5c = (double)CONCAT44(uStack_5c._4_4_,fVar2);
    (**(code **)(*in_ECX + 0x14))(0);
    uStack_54 = CONCAT31(uStack_54._1_3_,3);
    uStack_50 = (double)(fStack_64 / 20.0);
    (**(code **)(*in_ECX + 0xfc))(0,&uStack_54,0);
    FUN_00526bc0();
    fStack_60 = (float)CONCAT31(fStack_60._1_3_,3);
    uStack_5c = (double)(unaff_EDI / 20.0);
    (**(code **)(*in_ECX + 0xfc))(1,&fStack_60,0);
    FUN_00526bc0();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0051f1f0 : SUB ESP,0x64
0051f1f3 : FLDZ
0051f1f5 : PUSH ESI
0051f1f6 : FST float ptr [ESP + 0x54]
0051f1fa : MOV ESI,ECX
0051f1fc : MOV EAX,dword ptr [ESI]
0051f1fe : FST float ptr [ESP + 0x50]
0051f202 : MOV EDX,dword ptr [EAX + 0x40]
0051f205 : FST float ptr [ESP + 0x5c]
0051f209 : FST float ptr [ESP + 0x58]
0051f20d : PUSH EDI
0051f20e : FST float ptr [ESP + 0x68]
0051f212 : MOV dword ptr [ESP + 0x4c],0x0
0051f21a : FSTP float ptr [ESP + 0x64]
0051f21e : MOV byte ptr [ESP + 0x50],0x0
0051f223 : MOV byte ptr [ESP + 0x51],0x0
0051f228 : CALL EDX
0051f22a : MOV EDI,EAX
0051f22c : LEA EAX,[ESP + 0x4c]
0051f230 : PUSH EAX
0051f231 : MOV ECX,EDI
0051f233 : CALL 0x0051f070
0051f238 : CMP ESI,dword ptr [ESP + 0x4c]
0051f23c : JNZ 0x0051f3f8
0051f242 : FLD float ptr [EDI + 0x958]
0051f248 : LEA ECX,[ESP + 0x34]
0051f24c : FSTP float ptr [ESP + 0x14]
0051f250 : FLD float ptr [EDI + 0x95c]
0051f256 : FSTP float ptr [ESP + 0x18]
0051f25a : CALL 0x00522b80
0051f25f : MOV EDI,dword ptr [ESI + 0x20]
0051f262 : TEST EDI,EDI
0051f264 : JZ 0x0051f2ed
0051f26a : LEA ECX,[ESP + 0x1c]
0051f26e : CALL 0x00522b80
0051f273 : MOV ECX,dword ptr [EDI + 0x20]
0051f276 : TEST ECX,ECX
0051f278 : JZ 0x0051f293
0051f27a : LEA EDX,[ESP + 0x1c]
0051f27e : PUSH EDX
0051f27f : CALL 0x0051cdf0
0051f284 : ADD EDI,0x44
0051f287 : PUSH EDI
0051f288 : LEA ECX,[ESP + 0x20]
0051f28c : CALL 0x00522e20
0051f291 : JMP 0x0051f2bd
0051f293 : FLD float ptr [EDI + 0x44]
0051f296 : FSTP float ptr [ESP + 0x1c]
0051f29a : FLD float ptr [EDI + 0x48]
0051f29d : FSTP float ptr [ESP + 0x20]
0051f2a1 : FLD float ptr [EDI + 0x4c]
0051f2a4 : FSTP float ptr [ESP + 0x24]
0051f2a8 : FLD float ptr [EDI + 0x50]
0051f2ab : FSTP float ptr [ESP + 0x28]
0051f2af : FLD float ptr [EDI + 0x54]
0051f2b2 : FSTP float ptr [ESP + 0x2c]
0051f2b6 : FLD float ptr [EDI + 0x58]
0051f2b9 : FSTP float ptr [ESP + 0x30]
0051f2bd : FLD float ptr [ESP + 0x1c]
0051f2c1 : FSTP float ptr [ESP + 0x34]
0051f2c5 : FLD float ptr [ESP + 0x20]
0051f2c9 : FSTP float ptr [ESP + 0x38]
0051f2cd : FLD float ptr [ESP + 0x24]
0051f2d1 : FSTP float ptr [ESP + 0x3c]
0051f2d5 : FLD float ptr [ESP + 0x28]
0051f2d9 : FSTP float ptr [ESP + 0x40]
0051f2dd : FLD float ptr [ESP + 0x2c]
0051f2e1 : FSTP float ptr [ESP + 0x44]
0051f2e5 : FLD float ptr [ESP + 0x30]
0051f2e9 : FSTP float ptr [ESP + 0x48]
0051f2ed : LEA EAX,[ESP + 0x14]
0051f2f1 : PUSH EAX
0051f2f2 : LEA ECX,[ESP + 0x10]
0051f2f6 : PUSH ECX
0051f2f7 : LEA ECX,[ESP + 0x3c]
0051f2fb : CALL 0x00522fa0
0051f300 : FLD float ptr [ESP + 0x64]
0051f304 : CMP byte ptr [ESP + 0x51],0x0
0051f309 : FADD float ptr [ESP + 0xc]
0051f30d : FSTP float ptr [ESP + 0xc]
0051f311 : FLD float ptr [ESP + 0x68]
0051f315 : FADD float ptr [ESP + 0x10]
0051f319 : FSTP float ptr [ESP + 0x10]
0051f31d : JZ 0x0051f38b
0051f31f : FLD float ptr [ESP + 0xc]
0051f323 : FLD float ptr [ESP + 0x5c]
0051f327 : FCOM
0051f329 : FNSTSW AX
0051f32b : TEST AH,0x41
0051f32e : JNZ 0x0051f334
0051f330 : FSTP ST0
0051f332 : JMP 0x0051f336
0051f334 : FSTP ST1
0051f336 : FSTP float ptr [ESP + 0x8]
0051f33a : FLD float ptr [ESP + 0x8]
0051f33e : FLD float ptr [ESP + 0x54]
0051f342 : FCOM
0051f344 : FNSTSW AX
0051f346 : TEST AH,0x41
0051f349 : JNZ 0x0051f34f
0051f34b : FSTP ST1
0051f34d : JMP 0x0051f351
0051f34f : FSTP ST0
0051f351 : FSTP float ptr [ESP + 0xc]
0051f355 : FLD float ptr [ESP + 0x10]
0051f359 : FLD float ptr [ESP + 0x60]
0051f35d : FCOM
0051f35f : FNSTSW AX
0051f361 : TEST AH,0x41
0051f364 : JNZ 0x0051f36a
0051f366 : FSTP ST0
0051f368 : JMP 0x0051f36c
0051f36a : FSTP ST1
0051f36c : FSTP float ptr [ESP + 0x8]
0051f370 : FLD float ptr [ESP + 0x8]
0051f374 : FLD float ptr [ESP + 0x58]
0051f378 : FCOM
0051f37a : FNSTSW AX
0051f37c : TEST AH,0x41
0051f37f : JNZ 0x0051f385
0051f381 : FSTP ST1
0051f383 : JMP 0x0051f387
0051f385 : FSTP ST0
0051f387 : FSTP float ptr [ESP + 0x10]
0051f38b : MOV EDX,dword ptr [ESI]
0051f38d : MOV EAX,dword ptr [EDX + 0x14]
0051f390 : PUSH 0x0
0051f392 : MOV ECX,ESI
0051f394 : CALL EAX
0051f396 : FLD float ptr [ESP + 0xc]
0051f39a : FDIV double ptr [0x00b86058]
0051f3a0 : MOV EDX,dword ptr [ESI]
0051f3a2 : MOV EDX,dword ptr [EDX + 0xfc]
0051f3a8 : PUSH 0x0
0051f3aa : LEA EAX,[ESP + 0x20]
0051f3ae : PUSH EAX
0051f3af : PUSH 0x0
0051f3b1 : MOV ECX,ESI
0051f3b3 : MOV byte ptr [ESP + 0x28],0x3
0051f3b8 : FSTP double ptr [ESP + 0x2c]
0051f3bc : CALL EDX
0051f3be : LEA ECX,[ESP + 0x1c]
0051f3c2 : CALL 0x00526bc0
0051f3c7 : FLD float ptr [ESP + 0x10]
0051f3cb : FDIV double ptr [0x00b86058]
0051f3d1 : MOV EAX,dword ptr [ESI]
0051f3d3 : MOV EDX,dword ptr [EAX + 0xfc]
0051f3d9 : PUSH 0x0
0051f3db : LEA ECX,[ESP + 0x20]
0051f3df : PUSH ECX
0051f3e0 : PUSH 0x1
0051f3e2 : MOV ECX,ESI
0051f3e4 : MOV byte ptr [ESP + 0x28],0x3
0051f3e9 : FSTP double ptr [ESP + 0x2c]
0051f3ed : CALL EDX
0051f3ef : LEA ECX,[ESP + 0x1c]
0051f3f3 : CALL 0x00526bc0
0051f3f8 : POP EDI
0051f3f9 : POP ESI
0051f3fa : ADD ESP,0x64
0051f3fd : RET
