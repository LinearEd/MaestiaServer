PROGRAM  : Maestia.exe
FUNCTION : FUN_006a0c10
ENTRY    : 006a0c10
BODY     : [[006a0c10, 006a0db5]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a0c10(int param_1)

{
  int in_EAX;
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int local_24;
  int local_20;
  uint local_1c;
  undefined4 local_18;
  uint local_14 [5];
  
  local_18 = *(undefined4 *)(param_1 + 100);
  local_24 = 0;
  local_24 = FUN_006a0660(8,&local_1c,local_14);
  if (local_24 != 0) {
    return local_24;
  }
  local_24 = FUN_00688900();
  if (local_24 != 0) {
    return local_24;
  }
  local_1c = FUN_006879e0();
  uVar4 = local_1c >> 2 & 1;
  if (uVar4 == 0) {
    iVar1 = FUN_006879e0();
  }
  else {
    iVar1 = FUN_006879a0();
  }
  FUN_006889b0();
  if (((local_1c & 0xffffff00) != 0) || (iVar1 != *(int *)(param_1 + 0x120))) {
    return 3;
  }
  local_20 = FUN_0068a220(local_18,4,0,iVar1,0,&local_24);
  if (local_24 != 0) {
    return local_24;
  }
  iVar5 = 0;
  if (0 < iVar1) {
    do {
      if (uVar4 == 1) {
        uVar2 = FUN_00687bd0();
      }
      else {
        uVar2 = FUN_00687c50();
      }
      *(undefined4 *)(local_20 + iVar5 * 4) = uVar2;
      iVar5 = iVar5 + 1;
    } while (iVar5 < iVar1);
    if (local_24 != 0) goto LAB_006a0d98;
  }
  iVar5 = 0;
  do {
    if (uVar4 == 1) {
      FUN_00687bd0();
    }
    else {
      FUN_00687c50();
    }
    if (local_24 != 0) goto LAB_006a0d98;
    iVar5 = iVar5 + 1;
  } while (iVar5 < 4);
  iVar5 = 0;
  if (0 < iVar1) {
    iVar3 = 0;
    do {
      uVar4 = *(uint *)(local_20 + iVar5 * 4);
      if ((-1 < (int)uVar4) && (uVar4 <= local_14[0])) {
        *(uint *)(*(int *)(param_1 + 0x124) + 0xc + iVar3) = *(int *)(in_EAX + 8) + uVar4;
      }
      iVar5 = iVar5 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar5 < iVar1);
  }
  *(uint *)(param_1 + 0x134) = local_1c;
LAB_006a0d98:
  FUN_00687f30(local_18,local_20);
  return local_24;
}



============================================================
DISASSEMBLY
============================================================
006a0c10 : SUB ESP,0x24
006a0c13 : PUSH EBX
006a0c14 : PUSH ESI
006a0c15 : MOV ESI,dword ptr [ESP + 0x30]
006a0c19 : PUSH EDI
006a0c1a : MOV EDI,dword ptr [ESI + 0xc0]
006a0c20 : LEA ECX,[ESP + 0x1c]
006a0c24 : MOV EBX,EAX
006a0c26 : MOV EAX,dword ptr [ESI + 0x64]
006a0c29 : PUSH ECX
006a0c2a : LEA EDX,[ESP + 0x18]
006a0c2e : PUSH EDX
006a0c2f : MOV dword ptr [ESP + 0x20],EAX
006a0c33 : MOV EAX,dword ptr [ESI + 0xbc]
006a0c39 : PUSH 0x8
006a0c3b : MOV dword ptr [ESP + 0x18],0x0
006a0c43 : CALL 0x006a0660
006a0c48 : ADD ESP,0xc
006a0c4b : MOV dword ptr [ESP + 0xc],EAX
006a0c4f : TEST EAX,EAX
006a0c51 : JNZ 0x006a0daf
006a0c57 : PUSH 0x8
006a0c59 : PUSH EBX
006a0c5a : CALL 0x00688900
006a0c5f : ADD ESP,0x8
006a0c62 : MOV dword ptr [ESP + 0xc],EAX
006a0c66 : TEST EAX,EAX
006a0c68 : JNZ 0x006a0daf
006a0c6e : PUSH EBP
006a0c6f : PUSH EBX
006a0c70 : CALL 0x006879e0
006a0c75 : MOV EBP,EAX
006a0c77 : ADD ESP,0x4
006a0c7a : SHR EBP,0x2
006a0c7d : AND EBP,0x1
006a0c80 : MOV dword ptr [ESP + 0x18],EAX
006a0c84 : PUSH EBX
006a0c85 : JZ 0x006a0c8e
006a0c87 : CALL 0x006879a0
006a0c8c : JMP 0x006a0c93
006a0c8e : CALL 0x006879e0
006a0c93 : ADD ESP,0x4
006a0c96 : PUSH EBX
006a0c97 : MOV EDI,EAX
006a0c99 : CALL 0x006889b0
006a0c9e : ADD ESP,0x4
006a0ca1 : TEST dword ptr [ESP + 0x18],0xffffff00
006a0ca9 : JNZ 0x006a0cb3
006a0cab : CMP EDI,dword ptr [ESI + 0x120]
006a0cb1 : JZ 0x006a0cc0
006a0cb3 : POP EBP
006a0cb4 : POP EDI
006a0cb5 : POP ESI
006a0cb6 : MOV EAX,0x3
006a0cbb : POP EBX
006a0cbc : ADD ESP,0x24
006a0cbf : RET
006a0cc0 : MOV ECX,dword ptr [ESP + 0x1c]
006a0cc4 : LEA EAX,[ESP + 0x10]
006a0cc8 : PUSH EAX
006a0cc9 : PUSH 0x0
006a0ccb : PUSH EDI
006a0ccc : PUSH 0x0
006a0cce : PUSH 0x4
006a0cd0 : PUSH ECX
006a0cd1 : CALL 0x0068a220
006a0cd6 : MOV dword ptr [ESP + 0x2c],EAX
006a0cda : MOV EAX,dword ptr [ESP + 0x28]
006a0cde : ADD ESP,0x18
006a0ce1 : TEST EAX,EAX
006a0ce3 : JNZ 0x006a0dae
006a0ce9 : XOR ESI,ESI
006a0ceb : TEST EDI,EDI
006a0ced : JLE 0x006a0d1d
006a0cef : NOP
006a0cf0 : LEA EDX,[ESP + 0x10]
006a0cf4 : PUSH EDX
006a0cf5 : PUSH EBX
006a0cf6 : CMP EBP,0x1
006a0cf9 : JNZ 0x006a0d02
006a0cfb : CALL 0x00687bd0
006a0d00 : JMP 0x006a0d07
006a0d02 : CALL 0x00687c50
006a0d07 : MOV ECX,dword ptr [ESP + 0x1c]
006a0d0b : MOV dword ptr [ECX + ESI*0x4],EAX
006a0d0e : INC ESI
006a0d0f : ADD ESP,0x8
006a0d12 : CMP ESI,EDI
006a0d14 : JL 0x006a0cf0
006a0d16 : CMP dword ptr [ESP + 0x10],0x0
006a0d1b : JNZ 0x006a0d98
006a0d1d : XOR ESI,ESI
006a0d1f : NOP
006a0d20 : CMP EBP,0x1
006a0d23 : JNZ 0x006a0d32
006a0d25 : LEA EDX,[ESP + 0x10]
006a0d29 : PUSH EDX
006a0d2a : PUSH EBX
006a0d2b : CALL 0x00687bd0
006a0d30 : JMP 0x006a0d3d
006a0d32 : LEA EAX,[ESP + 0x10]
006a0d36 : PUSH EAX
006a0d37 : PUSH EBX
006a0d38 : CALL 0x00687c50
006a0d3d : ADD ESP,0x8
006a0d40 : CMP dword ptr [ESP + 0x10],0x0
006a0d45 : JNZ 0x006a0d98
006a0d47 : INC ESI
006a0d48 : CMP ESI,0x4
006a0d4b : JL 0x006a0d20
006a0d4d : XOR ECX,ECX
006a0d4f : TEST EDI,EDI
006a0d51 : JLE 0x006a0d8a
006a0d53 : MOV ESI,dword ptr [ESP + 0x20]
006a0d57 : XOR EDX,EDX
006a0d59 : LEA ESP,[ESP]
006a0d60 : MOV EAX,dword ptr [ESP + 0x14]
006a0d64 : MOV EAX,dword ptr [EAX + ECX*0x4]
006a0d67 : TEST EAX,EAX
006a0d69 : JL 0x006a0d82
006a0d6b : CMP EAX,ESI
006a0d6d : JA 0x006a0d82
006a0d6f : MOV EBP,dword ptr [EBX + 0x8]
006a0d72 : ADD EBP,EAX
006a0d74 : MOV EAX,dword ptr [ESP + 0x38]
006a0d78 : MOV EAX,dword ptr [EAX + 0x124]
006a0d7e : MOV dword ptr [EAX + EDX*0x1 + 0xc],EBP
006a0d82 : INC ECX
006a0d83 : ADD EDX,0x10
006a0d86 : CMP ECX,EDI
006a0d88 : JL 0x006a0d60
006a0d8a : MOV ECX,dword ptr [ESP + 0x18]
006a0d8e : MOV EDX,dword ptr [ESP + 0x38]
006a0d92 : MOV dword ptr [EDX + 0x134],ECX
006a0d98 : MOV EAX,dword ptr [ESP + 0x14]
006a0d9c : MOV ECX,dword ptr [ESP + 0x1c]
006a0da0 : PUSH EAX
006a0da1 : PUSH ECX
006a0da2 : CALL 0x00687f30
006a0da7 : MOV EAX,dword ptr [ESP + 0x18]
006a0dab : ADD ESP,0x8
006a0dae : POP EBP
006a0daf : POP EDI
006a0db0 : POP ESI
006a0db1 : POP EBX
006a0db2 : ADD ESP,0x24
006a0db5 : RET
