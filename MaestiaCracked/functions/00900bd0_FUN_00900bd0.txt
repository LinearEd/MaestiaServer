PROGRAM  : Maestia.exe
FUNCTION : FUN_00900bd0
ENTRY    : 00900bd0
BODY     : [[00900bd0, 00900dae]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00900bd0(void)

{
  int iVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int in_ECX;
  undefined4 ***pppuVar6;
  int *piVar7;
  uint local_40;
  int local_3c;
  int local_38;
  char local_33;
  char local_32;
  char local_31;
  undefined4 **local_2c [4];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar1 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1e93b;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  bVar2 = false;
  iVar4 = *(int *)(in_ECX + 0x74) - *(int *)(in_ECX + 0x70) >> 2;
  local_31 = '\0';
  local_32 = '\0';
  local_33 = '\0';
  local_14 = uVar3;
  if (0 < iVar4) {
    piVar7 = *(int **)(in_ECX + 0x70);
    local_38 = iVar4;
    do {
      uVar5 = *(uint *)(*piVar7 + 4) >> 0x10;
      if (uVar5 == 0x140b) {
        bVar2 = true;
      }
      else if (uVar5 == 0x1441) {
        local_31 = '\x01';
      }
      else if (uVar5 == 0x1410) {
        local_40 = *(uint *)(*piVar7 + 4);
        FUN_004437f0(&local_40);
        if (((local_3c != *(int *)(iVar1 + 0x44)) && (*(int *)(local_3c + 0x10) != 0)) &&
           (*(int *)(*(int *)(local_3c + 0x10) + 0x1ac) < 0)) {
          local_32 = '\x01';
        }
      }
      else if (uVar5 == 0x140e) {
        local_33 = '\x01';
      }
      piVar7 = piVar7 + 1;
      local_38 = local_38 + -1;
    } while (local_38 != 0);
    local_38 = 0;
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffffff00);
  local_8 = 0;
  if ((bVar2) || (local_31 == '\x01')) {
    FUN_00404b50("StunStateAndFearState",0x15);
  }
  else if (local_31 == '\0') {
    if (local_32 == '\x01') {
      if (local_33 == '\x01') {
        FUN_0040eec0("DOTStateAndSilenceState");
      }
      else if (local_33 == '\0') {
        FUN_0040eec0("DOTState");
      }
    }
    else if (local_32 == '\0') {
      if (local_33 == '\x01') {
        FUN_0040eec0("SilenceState");
      }
      else if (local_33 == '\0') {
        FUN_0040eec0("NomalState");
      }
    }
  }
  if (((local_1c != 0) && (iVar1 = *DAT_00da9894, iVar1 != 0)) && (*(int *)(iVar1 + 0x114) != 0)) {
    pppuVar6 = (undefined4 ***)local_2c[0];
    if (local_18 < 0x10) {
      pppuVar6 = local_2c;
    }
    (**(code **)(**(int **)(iVar1 + 0x114) + 4))
              (*(int **)(iVar1 + 0x114),"MyInfoSetState","%s,%s,%d,%d","Target",pppuVar6,0,0,uVar3);
  }
  local_8 = 0xffffffff;
  if (local_18 < 0x10) {
    local_18 = 0xf;
    local_1c = 0;
    local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffffff00);
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00900bd0 : PUSH EBP
00900bd1 : MOV EBP,ESP
00900bd3 : PUSH -0x1
00900bd5 : PUSH 0xb1e93b
00900bda : MOV EAX,FS:[0x0]
00900be0 : PUSH EAX
00900be1 : SUB ESP,0x30
00900be4 : MOV EAX,[0x00d66fa0]
00900be9 : XOR EAX,EBP
00900beb : MOV dword ptr [EBP + -0x10],EAX
00900bee : PUSH EBX
00900bef : PUSH ESI
00900bf0 : PUSH EDI
00900bf1 : PUSH EAX
00900bf2 : LEA EAX,[EBP + -0xc]
00900bf5 : MOV FS:[0x0],EAX
00900bfb : MOV EAX,dword ptr [ECX + 0x74]
00900bfe : SUB EAX,dword ptr [ECX + 0x70]
00900c01 : XOR BL,BL
00900c03 : XOR DL,DL
00900c05 : SAR EAX,0x2
00900c08 : MOV byte ptr [EBP + -0x2d],BL
00900c0b : MOV byte ptr [EBP + -0x2e],BL
00900c0e : MOV byte ptr [EBP + -0x2f],DL
00900c11 : TEST EAX,EAX
00900c13 : JLE 0x00900c93
00900c15 : MOV ESI,dword ptr [ECX + 0x70]
00900c18 : MOV EDI,dword ptr [0x00d7c54c]
00900c1e : MOV dword ptr [EBP + -0x34],EAX
00900c21 : MOV EAX,dword ptr [ESI]
00900c23 : MOV ECX,dword ptr [EAX + 0x4]
00900c26 : MOV EAX,ECX
00900c28 : SHR EAX,0x10
00900c2b : CMP EAX,0x140b
00900c30 : JNZ 0x00900c36
00900c32 : MOV BL,0x1
00900c34 : JMP 0x00900c87
00900c36 : CMP EAX,0x1441
00900c3b : JNZ 0x00900c43
00900c3d : MOV byte ptr [EBP + -0x2d],0x1
00900c41 : JMP 0x00900c87
00900c43 : CMP EAX,0x1410
00900c48 : JNZ 0x00900c7c
00900c4a : MOV dword ptr [EBP + -0x3c],ECX
00900c4d : LEA ECX,[EBP + -0x3c]
00900c50 : PUSH ECX
00900c51 : LEA ECX,[EDI + 0x40]
00900c54 : LEA EAX,[EBP + -0x38]
00900c57 : CALL 0x004437f0
00900c5c : MOV EAX,dword ptr [EDI + 0x44]
00900c5f : MOV ECX,dword ptr [EBP + -0x38]
00900c62 : CMP ECX,EAX
00900c64 : JZ 0x00900c87
00900c66 : MOV EAX,dword ptr [ECX + 0x10]
00900c69 : TEST EAX,EAX
00900c6b : JZ 0x00900c87
00900c6d : CMP dword ptr [EAX + 0x1ac],0x0
00900c74 : JGE 0x00900c87
00900c76 : MOV byte ptr [EBP + -0x2e],0x1
00900c7a : JMP 0x00900c87
00900c7c : CMP EAX,0x140e
00900c81 : JNZ 0x00900c87
00900c83 : MOV byte ptr [EBP + -0x2f],0x1
00900c87 : ADD ESI,0x4
00900c8a : SUB dword ptr [EBP + -0x34],0x1
00900c8e : JNZ 0x00900c21
00900c90 : MOV DL,byte ptr [EBP + -0x2f]
00900c93 : XOR EAX,EAX
00900c95 : MOV EDI,0xf
00900c9a : MOV dword ptr [EBP + -0x14],EDI
00900c9d : MOV dword ptr [EBP + -0x18],EAX
00900ca0 : MOV byte ptr [EBP + -0x28],AL
00900ca3 : MOV dword ptr [EBP + -0x4],EAX
00900ca6 : CMP BL,0x1
00900ca9 : JZ 0x00900d12
00900cab : MOV AL,byte ptr [EBP + -0x2d]
00900cae : CMP AL,0x1
00900cb0 : JZ 0x00900d12
00900cb2 : TEST BL,BL
00900cb4 : JNZ 0x00900d21
00900cb6 : TEST AL,AL
00900cb8 : JNZ 0x00900d21
00900cba : MOV AL,byte ptr [EBP + -0x2e]
00900cbd : CMP AL,0x1
00900cbf : JNZ 0x00900ce7
00900cc1 : CMP DL,AL
00900cc3 : JNZ 0x00900cd4
00900cc5 : PUSH 0xc63670
00900cca : LEA ECX,[EBP + -0x2c]
00900ccd : CALL 0x0040eec0
00900cd2 : JMP 0x00900d21
00900cd4 : TEST DL,DL
00900cd6 : JNZ 0x00900d21
00900cd8 : PUSH 0xc63688
00900cdd : LEA ECX,[EBP + -0x2c]
00900ce0 : CALL 0x0040eec0
00900ce5 : JMP 0x00900d21
00900ce7 : TEST AL,AL
00900ce9 : JNZ 0x00900d21
00900ceb : CMP DL,0x1
00900cee : JNZ 0x00900cff
00900cf0 : PUSH 0xc63694
00900cf5 : LEA ECX,[EBP + -0x2c]
00900cf8 : CALL 0x0040eec0
00900cfd : JMP 0x00900d21
00900cff : TEST DL,DL
00900d01 : JNZ 0x00900d21
00900d03 : PUSH 0xc636a4
00900d08 : LEA ECX,[EBP + -0x2c]
00900d0b : CALL 0x0040eec0
00900d10 : JMP 0x00900d21
00900d12 : PUSH 0x15
00900d14 : PUSH 0xc63658
00900d19 : LEA ECX,[EBP + -0x2c]
00900d1c : CALL 0x00404b50
00900d21 : CMP dword ptr [EBP + -0x18],0x0
00900d25 : MOV ESI,0x10
00900d2a : JBE 0x00900d71
00900d2c : MOV EDX,dword ptr [0x00da9894]
00900d32 : MOV EAX,dword ptr [EDX]
00900d34 : TEST EAX,EAX
00900d36 : JZ 0x00900d71
00900d38 : CMP dword ptr [EAX + 0x114],0x0
00900d3f : JZ 0x00900d71
00900d41 : MOV EAX,dword ptr [EAX + 0x114]
00900d47 : MOV ECX,dword ptr [EBP + -0x28]
00900d4a : CMP dword ptr [EBP + -0x14],ESI
00900d4d : JNC 0x00900d52
00900d4f : LEA ECX,[EBP + -0x28]
00900d52 : MOV EDX,dword ptr [EAX]
00900d54 : PUSH 0x0
00900d56 : PUSH 0x0
00900d58 : PUSH ECX
00900d59 : PUSH 0xc636b0
00900d5e : PUSH 0xc636b8
00900d63 : PUSH 0xc636c4
00900d68 : PUSH EAX
00900d69 : MOV EAX,dword ptr [EDX + 0x4]
00900d6c : CALL EAX
00900d6e : ADD ESP,0x1c
00900d71 : MOV dword ptr [EBP + -0x4],0xffffffff
00900d78 : CMP dword ptr [EBP + -0x14],ESI
00900d7b : JC 0x00900d85
00900d7d : MOV ECX,dword ptr [EBP + -0x28]
00900d80 : CALL 0x006f04e0
00900d85 : MOV dword ptr [EBP + -0x14],EDI
00900d88 : MOV dword ptr [EBP + -0x18],0x0
00900d8f : MOV byte ptr [EBP + -0x28],0x0
00900d93 : MOV ECX,dword ptr [EBP + -0xc]
00900d96 : MOV dword ptr FS:[0x0],ECX
00900d9d : POP ECX
00900d9e : POP EDI
00900d9f : POP ESI
00900da0 : POP EBX
00900da1 : MOV ECX,dword ptr [EBP + -0x10]
00900da4 : XOR ECX,EBP
00900da6 : CALL 0x00633e6b
00900dab : MOV ESP,EBP
00900dad : POP EBP
00900dae : RET
