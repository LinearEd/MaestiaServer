PROGRAM  : Maestia.exe
FUNCTION : FUN_00a20290
ENTRY    : 00a20290
BODY     : [[00a20290, 00a202e5] [00a202f0, 00a20490]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a20290(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  int iVar4;
  int *piVar5;
  float10 fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  uint local_5c;
  undefined1 local_58 [4];
  undefined2 local_54;
  undefined4 local_44;
  uint local_40;
  int local_3c;
  int *local_38;
  int *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2637c;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  if (*(int *)(in_ECX + 0xd0) != 0) {
    piVar5 = *(int **)(in_ECX + 0xcc);
    local_34 = (int *)*piVar5;
    local_3c = in_ECX;
    local_38 = piVar5;
    if (local_34 != piVar5) {
      do {
        iVar1 = local_34[4];
        if (*(char *)(iVar1 + 0x65c) != '\0') {
          iVar3 = *(int *)(*(int *)(in_ECX + 0xac) + 1000);
          iVar4 = *(int *)(iVar1 + 1000);
          fVar7 = *(float *)(iVar4 + 0x68) - *(float *)(iVar3 + 0x68);
          fVar8 = *(float *)(iVar4 + 0x6c) - *(float *)(iVar3 + 0x6c);
          fVar9 = *(float *)(iVar4 + 0x70) - *(float *)(iVar3 + 0x70);
          fVar6 = (float10)FUN_0040f460(fVar7 * fVar7 + fVar8 * fVar8 + fVar9 * fVar9,uVar2);
          if (fVar6 < (float10)150.0) {
            if (*(int *)(DAT_0172490c + 8) == 0) {
              FUN_00406460(L"IDS_GUI_NEWQUEST_CHATMSG");
              local_8 = 0;
              iVar3 = FUN_0081d120(local_58);
              local_8._0_1_ = 1;
              if (*(uint *)(iVar1 + 0x24) < 8) {
                iVar4 = iVar1 + 0x10;
              }
              else {
                iVar4 = *(int *)(iVar1 + 0x10);
              }
              if (*(uint *)(iVar3 + 0x18) < 8) {
                iVar3 = iVar3 + 4;
              }
              else {
                iVar3 = *(int *)(iVar3 + 4);
              }
              FUN_00404750(iVar3,iVar4);
              local_8 = CONCAT31(local_8._1_3_,3);
              if (7 < local_5c) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              local_5c = 7;
              local_8 = CONCAT31(local_8._1_3_,4);
              if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              local_54 = 0;
              local_40 = 7;
              local_44 = 0;
              (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_30,0x10);
              local_8 = 0xffffffff;
              if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              local_18 = 7;
              local_1c = 0;
              local_2c = 0;
              in_ECX = local_3c;
              piVar5 = local_38;
            }
            *(undefined1 *)(iVar1 + 0x65c) = 0;
          }
        }
        FUN_00416210();
      } while (local_34 != piVar5);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a20290 : PUSH EBP
00a20291 : MOV EBP,ESP
00a20293 : PUSH -0x1
00a20295 : PUSH 0xb2637c
00a2029a : MOV EAX,FS:[0x0]
00a202a0 : PUSH EAX
00a202a1 : SUB ESP,0x64
00a202a4 : MOV EAX,[0x00d66fa0]
00a202a9 : XOR EAX,EBP
00a202ab : MOV dword ptr [EBP + -0x10],EAX
00a202ae : PUSH EBX
00a202af : PUSH ESI
00a202b0 : PUSH EDI
00a202b1 : PUSH EAX
00a202b2 : LEA EAX,[EBP + -0xc]
00a202b5 : MOV FS:[0x0],EAX
00a202bb : MOV ESI,ECX
00a202bd : MOV EAX,dword ptr [ESI + 0xd0]
00a202c3 : MOV dword ptr [EBP + -0x38],ESI
00a202c6 : TEST EAX,EAX
00a202c8 : JZ 0x00a20475
00a202ce : MOV EDI,dword ptr [ESI + 0xcc]
00a202d4 : MOV EAX,dword ptr [EDI]
00a202d6 : MOV dword ptr [EBP + -0x34],EDI
00a202d9 : MOV dword ptr [EBP + -0x30],EAX
00a202dc : CMP EAX,EDI
00a202de : JZ 0x00a20475
00a202e4 : JMP 0x00a202f0
00a202f0 : MOV EBX,dword ptr [EAX + 0x10]
00a202f3 : CMP byte ptr [EBX + 0x65c],0x0
00a202fa : JZ 0x00a20462
00a20300 : MOV EAX,dword ptr [ESI + 0xac]
00a20306 : MOV EAX,dword ptr [EAX + 0x3e8]
00a2030c : MOV ECX,dword ptr [EBX + 0x3e8]
00a20312 : MOVSS XMM0,dword ptr [ECX + 0x68]
00a20317 : SUBSS XMM0,dword ptr [EAX + 0x68]
00a2031c : MOVSS XMM1,dword ptr [ECX + 0x6c]
00a20321 : SUBSS XMM1,dword ptr [EAX + 0x6c]
00a20326 : MOVSS XMM2,dword ptr [ECX + 0x70]
00a2032b : SUBSS XMM2,dword ptr [EAX + 0x70]
00a20330 : ADD ECX,0x68
00a20333 : ADD EAX,0x68
00a20336 : MOVAPS XMM3,XMM0
00a20339 : MULSS XMM3,XMM0
00a2033d : MOVAPS XMM0,XMM1
00a20340 : MULSS XMM0,XMM1
00a20344 : ADDSS XMM3,XMM0
00a20348 : MOVAPS XMM0,XMM2
00a2034b : MULSS XMM0,XMM2
00a2034f : PUSH ECX
00a20350 : ADDSS XMM3,XMM0
00a20354 : MOVSS dword ptr [ESP],XMM3
00a20359 : CALL 0x0040f460
00a2035e : FLD float ptr [0x00cdf22c]
00a20364 : ADD ESP,0x4
00a20367 : FCOMIP ST0,ST1
00a20369 : FSTP ST0
00a2036b : JBE 0x00a20462
00a20371 : MOV ECX,dword ptr [0x0172490c]
00a20377 : CMP dword ptr [ECX + 0x8],0x0
00a2037b : JNZ 0x00a2045b
00a20381 : PUSH 0xcc3cb4
00a20386 : LEA ECX,[EBP + -0x54]
00a20389 : CALL 0x00406460
00a2038e : MOV dword ptr [EBP + -0x4],0x0
00a20395 : MOV ECX,dword ptr [0x0172491c]
00a2039b : LEA EDX,[EBP + -0x54]
00a2039e : PUSH EDX
00a2039f : LEA EDI,[EBP + -0x70]
00a203a2 : CALL 0x0081d120
00a203a7 : MOV byte ptr [EBP + -0x4],0x1
00a203ab : MOV EDI,0x8
00a203b0 : CMP dword ptr [EBX + 0x24],EDI
00a203b3 : JC 0x00a203ba
00a203b5 : MOV ECX,dword ptr [EBX + 0x10]
00a203b8 : JMP 0x00a203bd
00a203ba : LEA ECX,[EBX + 0x10]
00a203bd : CMP dword ptr [EAX + 0x18],EDI
00a203c0 : JC 0x00a203c7
00a203c2 : MOV EAX,dword ptr [EAX + 0x4]
00a203c5 : JMP 0x00a203ca
00a203c7 : ADD EAX,0x4
00a203ca : PUSH ECX
00a203cb : PUSH EAX
00a203cc : LEA ESI,[EBP + -0x2c]
00a203cf : CALL 0x00404750
00a203d4 : ADD ESP,0x8
00a203d7 : MOV byte ptr [EBP + -0x4],0x3
00a203db : CMP dword ptr [EBP + -0x58],EDI
00a203de : JC 0x00a203e8
00a203e0 : MOV ECX,dword ptr [EBP + -0x6c]
00a203e3 : CALL 0x006f04e0
00a203e8 : MOV EDI,0x7
00a203ed : XOR ESI,ESI
00a203ef : XOR EAX,EAX
00a203f1 : MOV dword ptr [EBP + -0x58],EDI
00a203f4 : MOV dword ptr [EBP + -0x5c],ESI
00a203f7 : MOV word ptr [EBP + -0x6c],AX
00a203fb : MOV byte ptr [EBP + -0x4],0x4
00a203ff : CMP dword ptr [EBP + -0x3c],0x8
00a20403 : JC 0x00a2040d
00a20405 : MOV ECX,dword ptr [EBP + -0x50]
00a20408 : CALL 0x006f04e0
00a2040d : MOV EDX,dword ptr [0x00da9894]
00a20413 : XOR ECX,ECX
00a20415 : MOV word ptr [EBP + -0x50],CX
00a20419 : MOV dword ptr [EBP + -0x3c],EDI
00a2041c : MOV dword ptr [EBP + -0x40],ESI
00a2041f : MOV EAX,dword ptr [EDX]
00a20421 : MOV ECX,dword ptr [EAX + 0x1a8]
00a20427 : MOV EAX,dword ptr [ECX]
00a20429 : MOV EAX,dword ptr [EAX + 0x44]
00a2042c : PUSH 0x10
00a2042e : LEA EDX,[EBP + -0x2c]
00a20431 : PUSH EDX
00a20432 : CALL EAX
00a20434 : MOV dword ptr [EBP + -0x4],0xffffffff
00a2043b : CMP dword ptr [EBP + -0x14],0x8
00a2043f : JC 0x00a20449
00a20441 : MOV ECX,dword ptr [EBP + -0x28]
00a20444 : CALL 0x006f04e0
00a20449 : XOR ECX,ECX
00a2044b : MOV dword ptr [EBP + -0x14],EDI
00a2044e : MOV EDI,dword ptr [EBP + -0x34]
00a20451 : MOV dword ptr [EBP + -0x18],ESI
00a20454 : MOV ESI,dword ptr [EBP + -0x38]
00a20457 : MOV word ptr [EBP + -0x28],CX
00a2045b : MOV byte ptr [EBX + 0x65c],0x0
00a20462 : LEA EDX,[EBP + -0x30]
00a20465 : CALL 0x00416210
00a2046a : MOV EAX,dword ptr [EBP + -0x30]
00a2046d : CMP EAX,EDI
00a2046f : JNZ 0x00a202f0
00a20475 : MOV ECX,dword ptr [EBP + -0xc]
00a20478 : MOV dword ptr FS:[0x0],ECX
00a2047f : POP ECX
00a20480 : POP EDI
00a20481 : POP ESI
00a20482 : POP EBX
00a20483 : MOV ECX,dword ptr [EBP + -0x10]
00a20486 : XOR ECX,EBP
00a20488 : CALL 0x00633e6b
00a2048d : MOV ESP,EBP
00a2048f : POP EBP
00a20490 : RET
