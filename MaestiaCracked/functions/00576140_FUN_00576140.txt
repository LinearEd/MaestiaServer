PROGRAM  : Maestia.exe
FUNCTION : FUN_00576140
ENTRY    : 00576140
BODY     : [[00576140, 00576211]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00576140(void)

{
  int iVar1;
  LONG LVar2;
  int in_ECX;
  uint uVar3;
  bool bVar4;
  char local_5;
  uint local_4;
  
  FUN_0051b6e0();
  iVar1 = *(int *)(in_ECX + 0x14);
  bVar4 = *(int *)(iVar1 + 0x24) == 1;
  uVar3 = local_4;
  if (bVar4) {
    FUN_0051bc20(iVar1 + 0x1c);
    local_5 = *(char *)(iVar1 + 0x28);
    uVar3 = *(uint *)(iVar1 + 0x20);
  }
  if (*(char *)(*(int *)(in_ECX + 0x10) + 100) == '\0') {
    if (!bVar4) goto LAB_0057619d;
    if ((local_5 == '\0') && (*(char *)(*(int *)(in_ECX + 0x10) + 0x2c) == '\x06')) {
      FUN_00526400();
    }
    FUN_00575c40(*(undefined4 *)(in_ECX + 0x10),*(undefined4 *)(in_ECX + 0x18),&local_4,uVar3);
  }
  else if (!bVar4) {
LAB_0057619d:
    LVar2 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
    if (LVar2 == 1) {
      FUN_00515cf0(local_4 & 0xfffffffc);
    }
    return 0;
  }
  LVar2 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(local_4 & 0xfffffffc);
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00576140 : SUB ESP,0x8
00576143 : PUSH EBX
00576144 : PUSH ESI
00576145 : PUSH EDI
00576146 : MOV EDI,ECX
00576148 : LEA ECX,[ESP + 0x10]
0057614c : CALL 0x0051b6e0
00576151 : MOV ESI,dword ptr [EDI + 0x14]
00576154 : MOV EAX,dword ptr [ESI + 0x24]
00576157 : CMP EAX,0x1
0057615a : JZ 0x00576168
0057615c : MOV DL,byte ptr [ESP + 0xf]
00576160 : MOV EBX,dword ptr [ESP + 0x10]
00576164 : XOR AL,AL
00576166 : JMP 0x0057617d
00576168 : LEA EAX,[ESI + 0x1c]
0057616b : PUSH EAX
0057616c : LEA ECX,[ESP + 0x14]
00576170 : CALL 0x0051bc20
00576175 : MOV EBX,dword ptr [ESI + 0x20]
00576178 : MOV DL,byte ptr [ESI + 0x28]
0057617b : MOV AL,0x1
0057617d : MOV ECX,dword ptr [EDI + 0x10]
00576180 : CMP byte ptr [ECX + 0x64],0x0
00576184 : JZ 0x00576199
00576186 : TEST AL,AL
00576188 : JZ 0x0057619d
0057618a : MOV ESI,dword ptr [ESP + 0x10]
0057618e : AND ESI,0xfffffffc
00576191 : PUSH -0x1
00576193 : LEA ECX,[ESI + 0x4]
00576196 : PUSH ECX
00576197 : JMP 0x005761f8
00576199 : TEST AL,AL
0057619b : JNZ 0x005761c4
0057619d : MOV ESI,dword ptr [ESP + 0x10]
005761a1 : AND ESI,0xfffffffc
005761a4 : PUSH -0x1
005761a6 : LEA EDX,[ESI + 0x4]
005761a9 : PUSH EDX
005761aa : CALL dword ptr [0x00b851cc]
005761b0 : SUB EAX,0x1
005761b3 : JNZ 0x005761bb
005761b5 : PUSH ESI
005761b6 : CALL 0x00515cf0
005761bb : POP EDI
005761bc : POP ESI
005761bd : XOR AL,AL
005761bf : POP EBX
005761c0 : ADD ESP,0x8
005761c3 : RET
005761c4 : TEST DL,DL
005761c6 : JNZ 0x005761d5
005761c8 : ADD ECX,0x2c
005761cb : CMP byte ptr [ECX],0x6
005761ce : JNZ 0x005761d5
005761d0 : CALL 0x00526400
005761d5 : MOV ECX,dword ptr [EDI + 0x18]
005761d8 : MOV EDX,dword ptr [EDI + 0x10]
005761db : PUSH EBX
005761dc : LEA EAX,[ESP + 0x14]
005761e0 : PUSH EAX
005761e1 : PUSH ECX
005761e2 : MOV ECX,dword ptr [EDI + 0xc]
005761e5 : PUSH EDX
005761e6 : CALL 0x00575c40
005761eb : MOV ESI,dword ptr [ESP + 0x10]
005761ef : AND ESI,0xfffffffc
005761f2 : PUSH -0x1
005761f4 : LEA EAX,[ESI + 0x4]
005761f7 : PUSH EAX
005761f8 : CALL dword ptr [0x00b851cc]
005761fe : SUB EAX,0x1
00576201 : JNZ 0x00576209
00576203 : PUSH ESI
00576204 : CALL 0x00515cf0
00576209 : POP EDI
0057620a : POP ESI
0057620b : MOV AL,0x1
0057620d : POP EBX
0057620e : ADD ESP,0x8
00576211 : RET
