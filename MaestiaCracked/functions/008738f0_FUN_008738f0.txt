PROGRAM  : Maestia.exe
FUNCTION : FUN_008738f0
ENTRY    : 008738f0
BODY     : [[008738f0, 008739e3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008738f0(undefined4 param_1,int param_2,int param_3)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int in_ECX;
  int iVar5;
  
  FUN_008683f0(param_1,param_2,param_3);
  iVar3 = FUN_009f2740(param_1);
  iVar2 = DAT_00d7c54c;
  iVar5 = 0;
  if (iVar3 != 0) {
    iVar5 = *(int *)(iVar3 + 0x20) + -1;
  }
  param_3 = param_1;
  FUN_004437f0(&param_3);
  if ((param_2 != *(int *)(iVar2 + 0x44)) && (iVar2 = *(int *)(param_2 + 0x10), iVar2 != 0)) {
    param_3 = 0;
    FUN_00841330(CONCAT22(*(undefined2 *)(iVar2 + 4),*(undefined2 *)(iVar2 + 6)),0x45,0,&param_3);
    uVar4 = *(int *)(iVar2 + 0x3dc + iVar5 * 4) + param_3;
    uVar4 = uVar4 & ((int)uVar4 < 1) - 1;
    *(uint *)(in_ECX + 0x1f94) = uVar4;
    FUN_0090c460(*(undefined4 *)(*DAT_00da9894 + 0x18c),uVar4);
    if (((*(uint *)(iVar2 + 0x40) & 0x80000000) != 0) &&
       ((iVar2 = *(int *)(*DAT_00da9894 + 0x2cc), *(char *)(iVar2 + 0x32) == '\x01' &&
        (*(char *)(iVar2 + 0x39) == '\x01')))) {
      piVar1 = (int *)(iVar2 + 0x3c);
      *piVar1 = *piVar1 + -1;
      if (-1 < *piVar1) {
        FUN_0099c210();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008738f0 : PUSH EBP
008738f1 : MOV EBP,ESP
008738f3 : PUSH ECX
008738f4 : MOV EAX,dword ptr [EBP + 0x10]
008738f7 : MOV EDX,dword ptr [EBP + 0xc]
008738fa : PUSH EBX
008738fb : MOV EBX,dword ptr [EBP + 0x8]
008738fe : PUSH ESI
008738ff : PUSH EDI
00873900 : PUSH EAX
00873901 : PUSH EDX
00873902 : PUSH EBX
00873903 : MOV dword ptr [EBP + -0x4],ECX
00873906 : CALL 0x008683f0
0087390b : MOV ECX,dword ptr [0x017247f0]
00873911 : PUSH EBX
00873912 : CALL 0x009f2740
00873917 : XOR EDI,EDI
00873919 : TEST EAX,EAX
0087391b : JZ 0x00873921
0087391d : MOV EDI,dword ptr [EAX + 0x20]
00873920 : DEC EDI
00873921 : MOV ESI,dword ptr [0x00d7c54c]
00873927 : LEA EAX,[EBP + 0x10]
0087392a : PUSH EAX
0087392b : LEA ECX,[ESI + 0x40]
0087392e : LEA EAX,[EBP + 0xc]
00873931 : MOV dword ptr [EBP + 0x10],EBX
00873934 : CALL 0x004437f0
00873939 : MOV EAX,dword ptr [EBP + 0xc]
0087393c : CMP EAX,dword ptr [ESI + 0x44]
0087393f : JZ 0x008739db
00873945 : MOV ESI,dword ptr [EAX + 0x10]
00873948 : TEST ESI,ESI
0087394a : JZ 0x008739db
00873950 : MOVZX EDX,word ptr [ESI + 0x4]
00873954 : MOVZX EAX,word ptr [ESI + 0x6]
00873958 : LEA ECX,[EBP + 0x10]
0087395b : PUSH ECX
0087395c : MOV ECX,dword ptr [0x01724910]
00873962 : PUSH 0x0
00873964 : SHL EDX,0x10
00873967 : PUSH 0x45
00873969 : OR EDX,EAX
0087396b : PUSH EDX
0087396c : MOV dword ptr [EBP + 0x10],0x0
00873973 : CALL 0x00841330
00873978 : MOV EAX,dword ptr [ESI + EDI*0x4 + 0x3dc]
0087397f : ADD EAX,dword ptr [EBP + 0x10]
00873982 : MOV EDX,dword ptr [EBP + -0x4]
00873985 : XOR ECX,ECX
00873987 : TEST EAX,EAX
00873989 : SETLE CL
0087398c : DEC ECX
0087398d : AND EAX,ECX
0087398f : MOV dword ptr [EDX + 0x1f94],EAX
00873995 : PUSH EAX
00873996 : MOV EAX,[0x00da9894]
0087399b : MOV ECX,dword ptr [EAX]
0087399d : MOV EDX,dword ptr [ECX + 0x18c]
008739a3 : PUSH EDX
008739a4 : MOV ECX,EBX
008739a6 : CALL 0x0090c460
008739ab : TEST dword ptr [ESI + 0x40],0x80000000
008739b2 : JZ 0x008739db
008739b4 : MOV EAX,[0x00da9894]
008739b9 : MOV ECX,dword ptr [EAX]
008739bb : MOV EAX,dword ptr [ECX + 0x2cc]
008739c1 : CMP byte ptr [EAX + 0x32],0x1
008739c5 : JNZ 0x008739db
008739c7 : CMP byte ptr [EAX + 0x39],0x1
008739cb : JNZ 0x008739db
008739cd : ADD dword ptr [EAX + 0x3c],-0x1
008739d1 : MOV ECX,dword ptr [EAX + 0x3c]
008739d4 : JS 0x008739db
008739d6 : CALL 0x0099c210
008739db : POP EDI
008739dc : POP ESI
008739dd : POP EBX
008739de : MOV ESP,EBP
008739e0 : POP EBP
008739e1 : RET 0xc
