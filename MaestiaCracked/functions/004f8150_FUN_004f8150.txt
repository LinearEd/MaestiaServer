PROGRAM  : Maestia.exe
FUNCTION : FUN_004f8150
ENTRY    : 004f8150
BODY     : [[004f8150, 004f825f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004f8150(uint param_1,uint param_2,undefined4 param_3)

{
  int iVar1;
  int in_ECX;
  int iVar2;
  uint uVar3;
  
  if (*(uint *)(in_ECX + 0x14) < param_1) {
    FUN_00622f07();
  }
  if (-*(int *)(in_ECX + 0x14) - 1U <= param_2) {
    FUN_00622ecf();
  }
  if (param_2 != 0) {
    uVar3 = *(int *)(in_ECX + 0x14) + param_2;
    if (0x7ffffffe < uVar3) {
      FUN_00622ecf();
    }
    if (*(uint *)(in_ECX + 0x18) < uVar3) {
      FUN_00406170(uVar3,*(undefined4 *)(in_ECX + 0x14));
    }
    else if (uVar3 == 0) {
      *(undefined4 *)(in_ECX + 0x14) = 0;
      if (*(uint *)(in_ECX + 0x18) < 8) {
        *(undefined2 *)(in_ECX + 4) = 0;
        return;
      }
      **(undefined2 **)(in_ECX + 4) = 0;
      return;
    }
    if (uVar3 != 0) {
      if (*(uint *)(in_ECX + 0x18) < 8) {
        iVar1 = in_ECX + 4;
        iVar2 = in_ECX + 4;
      }
      else {
        iVar1 = *(int *)(in_ECX + 4);
        iVar2 = *(int *)(in_ECX + 4);
      }
      _memmove_s((void *)(iVar2 + (param_1 + param_2) * 2),
                 ((*(uint *)(in_ECX + 0x18) - param_1) - param_2) * 2,(void *)(iVar1 + param_1 * 2),
                 (*(int *)(in_ECX + 0x14) - param_1) * 2);
      FUN_004132e0(param_1,param_2,param_3);
      *(uint *)(in_ECX + 0x14) = uVar3;
      if (7 < *(uint *)(in_ECX + 0x18)) {
        *(undefined2 *)(*(int *)(in_ECX + 4) + uVar3 * 2) = 0;
        return;
      }
      *(undefined2 *)(in_ECX + 4 + uVar3 * 2) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
004f8150 : PUSH EBP
004f8151 : MOV EBP,ESP
004f8153 : PUSH EBX
004f8154 : PUSH ESI
004f8155 : PUSH EDI
004f8156 : MOV EDI,dword ptr [EBP + 0x8]
004f8159 : MOV ESI,ECX
004f815b : CMP dword ptr [ESI + 0x14],EDI
004f815e : JNC 0x004f8165
004f8160 : CALL 0x00622f07
004f8165 : MOV EBX,dword ptr [EBP + 0xc]
004f8168 : OR EAX,0xffffffff
004f816b : SUB EAX,dword ptr [ESI + 0x14]
004f816e : CMP EAX,EBX
004f8170 : JA 0x004f8177
004f8172 : CALL 0x00622ecf
004f8177 : TEST EBX,EBX
004f8179 : JBE 0x004f8257
004f817f : MOV EBX,dword ptr [ESI + 0x14]
004f8182 : ADD EBX,dword ptr [EBP + 0xc]
004f8185 : CMP EBX,0x7ffffffe
004f818b : JBE 0x004f8192
004f818d : CALL 0x00622ecf
004f8192 : MOV EAX,dword ptr [ESI + 0x18]
004f8195 : CMP EAX,EBX
004f8197 : JNC 0x004f81ba
004f8199 : MOV ECX,dword ptr [ESI + 0x14]
004f819c : PUSH ECX
004f819d : PUSH EBX
004f819e : MOV ECX,ESI
004f81a0 : CALL 0x00406170
004f81a5 : TEST EBX,EBX
004f81a7 : JBE 0x004f8257
004f81ad : MOV EAX,dword ptr [ESI + 0x18]
004f81b0 : CMP EAX,0x8
004f81b3 : JC 0x004f81e8
004f81b5 : MOV ECX,dword ptr [ESI + 0x4]
004f81b8 : JMP 0x004f81eb
004f81ba : TEST EBX,EBX
004f81bc : JNZ 0x004f81a7
004f81be : MOV dword ptr [ESI + 0x14],EBX
004f81c1 : CMP EAX,0x8
004f81c4 : JC 0x004f81d7
004f81c6 : MOV EAX,dword ptr [ESI + 0x4]
004f81c9 : XOR EDX,EDX
004f81cb : POP EDI
004f81cc : MOV word ptr [EAX],DX
004f81cf : MOV EAX,ESI
004f81d1 : POP ESI
004f81d2 : POP EBX
004f81d3 : POP EBP
004f81d4 : RET 0xc
004f81d7 : LEA EAX,[ESI + 0x4]
004f81da : XOR EDX,EDX
004f81dc : POP EDI
004f81dd : MOV word ptr [EAX],DX
004f81e0 : MOV EAX,ESI
004f81e2 : POP ESI
004f81e3 : POP EBX
004f81e4 : POP EBP
004f81e5 : RET 0xc
004f81e8 : LEA ECX,[ESI + 0x4]
004f81eb : MOV dword ptr [EBP + 0x8],ECX
004f81ee : CMP EAX,0x8
004f81f1 : JC 0x004f81f8
004f81f3 : MOV ECX,dword ptr [ESI + 0x4]
004f81f6 : JMP 0x004f81fb
004f81f8 : LEA ECX,[ESI + 0x4]
004f81fb : MOV EDX,dword ptr [ESI + 0x14]
004f81fe : SUB EDX,EDI
004f8200 : ADD EDX,EDX
004f8202 : PUSH EDX
004f8203 : MOV EDX,dword ptr [EBP + 0x8]
004f8206 : LEA EDX,[EDX + EDI*0x2]
004f8209 : PUSH EDX
004f820a : MOV EDX,dword ptr [EBP + 0xc]
004f820d : SUB EAX,EDI
004f820f : SUB EAX,EDX
004f8211 : ADD EAX,EAX
004f8213 : PUSH EAX
004f8214 : LEA EAX,[EDI + EDX*0x1]
004f8217 : LEA ECX,[ECX + EAX*0x2]
004f821a : PUSH ECX
004f821b : CALL 0x00634101
004f8220 : MOV EDX,dword ptr [EBP + 0x10]
004f8223 : MOV EAX,dword ptr [EBP + 0xc]
004f8226 : ADD ESP,0x10
004f8229 : PUSH EDX
004f822a : PUSH EAX
004f822b : PUSH EDI
004f822c : MOV ECX,ESI
004f822e : CALL 0x004132e0
004f8233 : CMP dword ptr [ESI + 0x18],0x8
004f8237 : MOV dword ptr [ESI + 0x14],EBX
004f823a : JC 0x004f824e
004f823c : MOV EAX,dword ptr [ESI + 0x4]
004f823f : XOR ECX,ECX
004f8241 : MOV word ptr [EAX + EBX*0x2],CX
004f8245 : POP EDI
004f8246 : MOV EAX,ESI
004f8248 : POP ESI
004f8249 : POP EBX
004f824a : POP EBP
004f824b : RET 0xc
004f824e : LEA EAX,[ESI + 0x4]
004f8251 : XOR ECX,ECX
004f8253 : MOV word ptr [EAX + EBX*0x2],CX
004f8257 : POP EDI
004f8258 : MOV EAX,ESI
004f825a : POP ESI
004f825b : POP EBX
004f825c : POP EBP
004f825d : RET 0xc
