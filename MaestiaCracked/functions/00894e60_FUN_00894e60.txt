PROGRAM  : Maestia.exe
FUNCTION : FUN_00894e60
ENTRY    : 00894e60
BODY     : [[00894e60, 008952b7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00894e60(int param_1,short param_2,char param_3)

{
  short sVar1;
  bool bVar2;
  int iVar3;
  undefined4 uVar4;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4e119;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((((*(char *)(param_1 + 0x3b0) == '\0') && (*(int *)(param_1 + 0x44c) != 0)) &&
      (iVar3 = FUN_00405bb0(), iVar3 == 0)) && (*(ushort *)(param_1 + 0x43a) < 600)) {
    *(undefined1 *)(param_1 + 0x3b0) = 1;
  }
  local_2c = 0;
  local_18 = 7;
  local_1c = 0;
  FUN_00406360();
  local_8._0_1_ = 0;
  local_8._1_3_ = 0;
  sVar1 = *(short *)(param_1 + 0x43a);
  bVar2 = false;
  if ((((((sVar1 == 5) || (sVar1 == 0x1e)) ||
        ((sVar1 == 0x1f || ((sVar1 == 0x4a || (sVar1 == 0x4c)))))) || (sVar1 == 0x46)) ||
      (((((sVar1 == 0x48 || (sVar1 == 3)) || (sVar1 == 6)) || ((sVar1 == 0x20 || (sVar1 == 0x21))))
       || (((sVar1 == 0x4b || ((sVar1 == 0x4d || (sVar1 == 0x47)))) ||
           ((sVar1 == 0x49 || (sVar1 == 4)))))))) && (*(char *)(param_1 + 0x3b0) == '\0')) {
    bVar2 = true;
    FUN_00404750();
    local_8._0_1_ = 1;
    FUN_00405eb0();
    local_8._0_1_ = 0;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_34 = 7;
    local_38 = 0;
    local_48 = 0;
  }
  local_8._0_1_ = 0;
  FUN_0088fa20();
  if (*(char *)(param_1 + 0x3b0) == '\0') {
    iVar3 = FUN_00abdb50();
    if ((bVar2) && (iVar3 != 0)) {
      FUN_00405660(local_30);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070cb90(local_4c);
      local_8._0_1_ = 3;
      FUN_00abfb20();
      local_8._0_1_ = 0;
      FUN_00406560();
    }
    if (param_3 == '\0') {
      if (param_2 == 1000) {
        if (*(int *)(param_1 + 0x448) != 0) {
          FUN_00439cf0();
          *(undefined4 *)(param_1 + 0x448) = 0;
        }
        iVar3 = FUN_006f0760();
        local_8._0_1_ = 5;
        if (iVar3 == 0) {
          *(undefined4 *)(param_1 + 0x448) = 0;
        }
        else {
          uVar4 = FUN_00a68870();
          *(undefined4 *)(param_1 + 0x448) = uVar4;
        }
      }
      else if (param_2 == 2000) {
        if (*(int *)(param_1 + 0x44c) != 0) {
          FUN_00439cf0();
          *(undefined4 *)(param_1 + 0x44c) = 0;
        }
        iVar3 = FUN_006f0760();
        local_8._0_1_ = 6;
        if (iVar3 == 0) {
          *(undefined4 *)(param_1 + 0x44c) = 0;
        }
        else {
          uVar4 = FUN_00a68870();
          *(undefined4 *)(param_1 + 0x44c) = uVar4;
        }
      }
      else {
        if (param_2 != 3000) goto LAB_008951ec;
        if (*(int *)(param_1 + 0x450) != 0) {
          FUN_00439cf0();
          *(undefined4 *)(param_1 + 0x450) = 0;
        }
        iVar3 = FUN_006f0760();
        local_8._0_1_ = 7;
        if (iVar3 == 0) {
          uVar4 = 0;
        }
        else {
          uVar4 = FUN_00a68870();
        }
        *(undefined4 *)(param_1 + 0x450) = uVar4;
      }
      local_8._0_1_ = 0;
      FUN_00a686a0();
    }
    else {
      iVar3 = FUN_006f0760();
      local_8._0_1_ = 4;
      if (iVar3 != 0) {
        FUN_00a68870();
      }
      local_8._0_1_ = 0;
      FUN_00a686a0();
      FUN_00449730();
    }
  }
LAB_008951ec:
  if ((*(int *)(param_1 + 0x448) == 0) || (param_2 != 1000)) {
    if ((*(int *)(param_1 + 0x44c) != 0) && (param_2 == 2000)) {
      FUN_00a674f0();
      FUN_00a67400();
      *(undefined2 *)(param_1 + 0x468) = *(undefined2 *)(*(int *)(param_1 + 0x44c) + 0xe4);
      goto LAB_00895271;
    }
    if ((*(int *)(param_1 + 0x450) == 0) || (param_2 != 3000)) goto LAB_00895271;
    FUN_00a674f0();
  }
  else {
    FUN_00a674f0();
  }
  FUN_00a67400();
LAB_00895271:
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00894e60 : PUSH EBP
00894e61 : MOV EBP,ESP
00894e63 : PUSH -0x1
00894e65 : PUSH 0xb4e119
00894e6a : MOV EAX,FS:[0x0]
00894e70 : PUSH EAX
00894e71 : SUB ESP,0x48
00894e74 : MOV EAX,[0x00d66fa0]
00894e79 : XOR EAX,EBP
00894e7b : MOV dword ptr [EBP + -0x10],EAX
00894e7e : PUSH EBX
00894e7f : PUSH ESI
00894e80 : PUSH EDI
00894e81 : PUSH EAX
00894e82 : LEA EAX,[EBP + -0xc]
00894e85 : MOV FS:[0x0],EAX
00894e8b : MOV EBX,dword ptr [EBP + 0x8]
00894e8e : CMP byte ptr [EBX + 0x3b0],0x0
00894e95 : MOV EDI,ECX
00894e97 : MOV dword ptr [EBP + -0x50],EDI
00894e9a : JNZ 0x00894ee1
00894e9c : MOV EAX,dword ptr [EBX + 0x44c]
00894ea2 : TEST EAX,EAX
00894ea4 : JZ 0x00894ee1
00894ea6 : CMP dword ptr [EDI + 0x18],0x8
00894eaa : MOV EDX,dword ptr [EDI + 0x14]
00894ead : LEA ECX,[EAX + 0x24]
00894eb0 : JC 0x00894eb7
00894eb2 : MOV EAX,dword ptr [EDI + 0x4]
00894eb5 : JMP 0x00894eba
00894eb7 : LEA EAX,[EDI + 0x4]
00894eba : PUSH EAX
00894ebb : MOV EAX,dword ptr [ECX + 0x14]
00894ebe : MOV EDI,EDX
00894ec0 : CALL 0x00405bb0
00894ec5 : TEST EAX,EAX
00894ec7 : JNZ 0x00894ede
00894ec9 : MOV EAX,0x258
00894ece : CMP word ptr [EBX + 0x43a],AX
00894ed5 : JNC 0x00894ede
00894ed7 : MOV byte ptr [EBX + 0x3b0],0x1
00894ede : MOV EDI,dword ptr [EBP + -0x50]
00894ee1 : XOR ESI,ESI
00894ee3 : XOR ECX,ECX
00894ee5 : PUSH ESI
00894ee6 : MOV word ptr [EBP + -0x28],CX
00894eea : PUSH 0xc4607c
00894eef : LEA ECX,[EBP + -0x2c]
00894ef2 : MOV dword ptr [EBP + -0x14],0x7
00894ef9 : MOV dword ptr [EBP + -0x18],ESI
00894efc : CALL 0x00406360
00894f01 : MOV dword ptr [EBP + -0x4],ESI
00894f04 : MOVZX EAX,word ptr [EBX + 0x43a]
00894f0b : MOV byte ptr [EBP + -0x49],0x0
00894f0f : CMP AX,0x5
00894f13 : JZ 0x00894f6f
00894f15 : CMP AX,0x1e
00894f19 : JZ 0x00894f6f
00894f1b : CMP AX,0x1f
00894f1f : JZ 0x00894f6f
00894f21 : CMP AX,0x4a
00894f25 : JZ 0x00894f6f
00894f27 : CMP AX,0x4c
00894f2b : JZ 0x00894f6f
00894f2d : CMP AX,0x46
00894f31 : JZ 0x00894f6f
00894f33 : CMP AX,0x48
00894f37 : JZ 0x00894f6f
00894f39 : CMP AX,0x3
00894f3d : JZ 0x00894f6f
00894f3f : CMP AX,0x6
00894f43 : JZ 0x00894f6f
00894f45 : CMP AX,0x20
00894f49 : JZ 0x00894f6f
00894f4b : CMP AX,0x21
00894f4f : JZ 0x00894f6f
00894f51 : CMP AX,0x4b
00894f55 : JZ 0x00894f6f
00894f57 : CMP AX,0x4d
00894f5b : JZ 0x00894f6f
00894f5d : CMP AX,0x47
00894f61 : JZ 0x00894f6f
00894f63 : CMP AX,0x49
00894f67 : JZ 0x00894f6f
00894f69 : CMP AX,0x4
00894f6d : JNZ 0x00894fce
00894f6f : CMP byte ptr [EBX + 0x3b0],0x0
00894f76 : JNZ 0x00894fce
00894f78 : MOVZX EAX,word ptr [EBX + 0xf2]
00894f7f : MOVZX EDX,AX
00894f82 : PUSH EDX
00894f83 : PUSH 0xc46080
00894f88 : LEA ESI,[EBP + -0x48]
00894f8b : MOV byte ptr [EBP + -0x49],0x1
00894f8f : CALL 0x00404750
00894f94 : ADD ESP,0x8
00894f97 : MOV byte ptr [EBP + -0x4],0x1
00894f9b : PUSH -0x1
00894f9d : PUSH 0x0
00894f9f : PUSH EAX
00894fa0 : LEA ECX,[EBP + -0x2c]
00894fa3 : CALL 0x00405eb0
00894fa8 : MOV byte ptr [EBP + -0x4],0x0
00894fac : CMP dword ptr [EBP + -0x30],0x8
00894fb0 : JC 0x00894fba
00894fb2 : MOV ECX,dword ptr [EBP + -0x44]
00894fb5 : CALL 0x006f04e0
00894fba : XOR EAX,EAX
00894fbc : MOV dword ptr [EBP + -0x30],0x7
00894fc3 : MOV dword ptr [EBP + -0x34],0x0
00894fca : MOV word ptr [EBP + -0x44],AX
00894fce : MOV ECX,dword ptr [EBP + 0x18]
00894fd1 : MOV EDX,dword ptr [EBP + 0x14]
00894fd4 : MOV ESI,dword ptr [EBP + 0xc]
00894fd7 : PUSH ECX
00894fd8 : PUSH EDX
00894fd9 : PUSH EBX
00894fda : MOV EAX,ESI
00894fdc : CALL 0x0088fa20
00894fe1 : CMP byte ptr [EBX + 0x3b0],0x0
00894fe8 : JNZ 0x008951ec
00894fee : MOV ECX,dword ptr [EBX + 0x440]
00894ff4 : PUSH EDI
00894ff5 : CALL 0x00abdb50
00894ffa : CMP byte ptr [EBP + -0x49],0x0
00894ffe : MOV EDI,EAX
00895000 : JZ 0x00895052
00895002 : TEST EDI,EDI
00895004 : JZ 0x00895052
00895006 : SUB ESP,0x1c
00895009 : LEA EAX,[EBP + -0x2c]
0089500c : MOV ECX,ESP
0089500e : MOV dword ptr [EBP + -0x50],ESP
00895011 : PUSH EAX
00895012 : CALL 0x00405660
00895017 : MOV byte ptr [EBP + -0x4],0x2
0089501b : LEA EDX,[EBP + -0x48]
0089501e : LEA ECX,[EDI + 0x8]
00895021 : PUSH EDX
00895022 : MOV byte ptr [EBP + -0x4],0x0
00895026 : CALL 0x0070cb90
0089502b : ADD ESP,0x20
0089502e : MOV byte ptr [EBP + -0x4],0x3
00895032 : LEA EAX,[EBP + -0x48]
00895035 : PUSH EAX
00895036 : MOV EAX,dword ptr [EBX + 0x440]
0089503c : CALL 0x00abfb20
00895041 : TEST EAX,EAX
00895043 : CMOVNZ EDI,EAX
00895046 : MOV byte ptr [EBP + -0x4],0x0
0089504a : LEA ECX,[EBP + -0x48]
0089504d : CALL 0x00406560
00895052 : CMP byte ptr [EBP + 0x10],0x0
00895056 : JZ 0x008950a8
00895058 : PUSH 0x0
0089505a : PUSH 0x354
0089505f : PUSH 0xc4608c
00895064 : PUSH 0xf4
00895069 : CALL 0x006f0760
0089506e : ADD ESP,0x10
00895071 : MOV dword ptr [EBP + -0x50],EAX
00895074 : MOV byte ptr [EBP + -0x4],0x4
00895078 : TEST EAX,EAX
0089507a : JZ 0x00895084
0089507c : PUSH EAX
0089507d : CALL 0x00a68870
00895082 : JMP 0x00895086
00895084 : XOR EAX,EAX
00895086 : MOV byte ptr [EBP + -0x4],0x0
0089508a : PUSH EDI
0089508b : MOV EDI,EAX
0089508d : MOV dword ptr [EBP + -0x50],EAX
00895090 : CALL 0x00a686a0
00895095 : LEA EDX,[EBX + 0x454]
0089509b : LEA EDI,[EBP + -0x50]
0089509e : CALL 0x00449730
008950a3 : JMP 0x008951ec
008950a8 : MOV ECX,0x3e8
008950ad : CMP SI,CX
008950b0 : JNZ 0x00895119
008950b2 : MOV EAX,dword ptr [EBX + 0x448]
008950b8 : TEST EAX,EAX
008950ba : JZ 0x008950d0
008950bc : MOV ESI,EAX
008950be : CALL 0x00439cf0
008950c3 : MOV ESI,dword ptr [EBP + 0xc]
008950c6 : MOV dword ptr [EBX + 0x448],0x0
008950d0 : PUSH 0x0
008950d2 : PUSH 0x35d
008950d7 : PUSH 0xc460cc
008950dc : PUSH 0xf4
008950e1 : CALL 0x006f0760
008950e6 : ADD ESP,0x10
008950e9 : MOV dword ptr [EBP + -0x50],EAX
008950ec : MOV byte ptr [EBP + -0x4],0x5
008950f0 : TEST EAX,EAX
008950f2 : JZ 0x00895109
008950f4 : PUSH EAX
008950f5 : CALL 0x00a68870
008950fa : MOV byte ptr [EBP + -0x4],0x0
008950fe : MOV dword ptr [EBX + 0x448],EAX
00895104 : JMP 0x008951e4
00895109 : XOR EAX,EAX
0089510b : MOV byte ptr [EBP + -0x4],AL
0089510e : MOV dword ptr [EBX + 0x448],EAX
00895114 : JMP 0x008951e4
00895119 : MOV EDX,0x7d0
0089511e : CMP SI,DX
00895121 : JNZ 0x00895184
00895123 : MOV EAX,dword ptr [EBX + 0x44c]
00895129 : TEST EAX,EAX
0089512b : JZ 0x00895141
0089512d : MOV ESI,EAX
0089512f : CALL 0x00439cf0
00895134 : MOV ESI,dword ptr [EBP + 0xc]
00895137 : MOV dword ptr [EBX + 0x44c],0x0
00895141 : PUSH 0x0
00895143 : PUSH 0x362
00895148 : PUSH 0xc4610c
0089514d : PUSH 0xf4
00895152 : CALL 0x006f0760
00895157 : ADD ESP,0x10
0089515a : MOV dword ptr [EBP + -0x50],EAX
0089515d : MOV byte ptr [EBP + -0x4],0x6
00895161 : TEST EAX,EAX
00895163 : JZ 0x00895177
00895165 : PUSH EAX
00895166 : CALL 0x00a68870
0089516b : MOV byte ptr [EBP + -0x4],0x0
0089516f : MOV dword ptr [EBX + 0x44c],EAX
00895175 : JMP 0x008951e4
00895177 : XOR EAX,EAX
00895179 : MOV byte ptr [EBP + -0x4],AL
0089517c : MOV dword ptr [EBX + 0x44c],EAX
00895182 : JMP 0x008951e4
00895184 : MOV EAX,0xbb8
00895189 : CMP SI,AX
0089518c : JNZ 0x008951ec
0089518e : MOV EAX,dword ptr [EBX + 0x450]
00895194 : TEST EAX,EAX
00895196 : JZ 0x008951ac
00895198 : MOV ESI,EAX
0089519a : CALL 0x00439cf0
0089519f : MOV ESI,dword ptr [EBP + 0xc]
008951a2 : MOV dword ptr [EBX + 0x450],0x0
008951ac : PUSH 0x0
008951ae : PUSH 0x367
008951b3 : PUSH 0xc4614c
008951b8 : PUSH 0xf4
008951bd : CALL 0x006f0760
008951c2 : ADD ESP,0x10
008951c5 : MOV dword ptr [EBP + -0x50],EAX
008951c8 : MOV byte ptr [EBP + -0x4],0x7
008951cc : TEST EAX,EAX
008951ce : JZ 0x008951d8
008951d0 : PUSH EAX
008951d1 : CALL 0x00a68870
008951d6 : JMP 0x008951da
008951d8 : XOR EAX,EAX
008951da : MOV byte ptr [EBP + -0x4],0x0
008951de : MOV dword ptr [EBX + 0x450],EAX
008951e4 : PUSH EDI
008951e5 : MOV EDI,EAX
008951e7 : CALL 0x00a686a0
008951ec : MOV EDI,dword ptr [EBX + 0x448]
008951f2 : TEST EDI,EDI
008951f4 : JZ 0x0089520d
008951f6 : MOV ECX,0x3e8
008951fb : CMP SI,CX
008951fe : JNZ 0x0089520d
00895200 : CALL 0x00a674f0
00895205 : MOV EAX,dword ptr [EBX + 0x448]
0089520b : JMP 0x00895269
0089520d : MOV EDI,dword ptr [EBX + 0x44c]
00895213 : TEST EDI,EDI
00895215 : JZ 0x0089524a
00895217 : MOV EDX,0x7d0
0089521c : CMP SI,DX
0089521f : JNZ 0x0089524a
00895221 : CALL 0x00a674f0
00895226 : MOV EDI,dword ptr [EBX + 0x4]
00895229 : MOV EAX,dword ptr [EBX + 0x44c]
0089522f : CALL 0x00a67400
00895234 : MOV EAX,dword ptr [EBX + 0x44c]
0089523a : MOVZX EAX,word ptr [EAX + 0xe4]
00895241 : MOV word ptr [EBX + 0x468],AX
00895248 : JMP 0x00895271
0089524a : MOV EDI,dword ptr [EBX + 0x450]
00895250 : TEST EDI,EDI
00895252 : JZ 0x00895271
00895254 : MOV ECX,0xbb8
00895259 : CMP SI,CX
0089525c : JNZ 0x00895271
0089525e : CALL 0x00a674f0
00895263 : MOV EAX,dword ptr [EBX + 0x450]
00895269 : MOV EDI,dword ptr [EBX + 0x4]
0089526c : CALL 0x00a67400
00895271 : MOV dword ptr [EBP + -0x4],0xffffffff
00895278 : CMP dword ptr [EBP + -0x14],0x8
0089527c : JC 0x00895286
0089527e : MOV ECX,dword ptr [EBP + -0x28]
00895281 : CALL 0x006f04e0
00895286 : XOR EDX,EDX
00895288 : MOV dword ptr [EBP + -0x14],0x7
0089528f : MOV dword ptr [EBP + -0x18],0x0
00895296 : MOV word ptr [EBP + -0x28],DX
0089529a : MOV ECX,dword ptr [EBP + -0xc]
0089529d : MOV dword ptr FS:[0x0],ECX
008952a4 : POP ECX
008952a5 : POP EDI
008952a6 : POP ESI
008952a7 : POP EBX
008952a8 : MOV ECX,dword ptr [EBP + -0x10]
008952ab : XOR ECX,EBP
008952ad : CALL 0x00633e6b
008952b2 : MOV ESP,EBP
008952b4 : POP EBP
008952b5 : RET 0x14
