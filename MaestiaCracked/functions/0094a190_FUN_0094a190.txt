PROGRAM  : Maestia.exe
FUNCTION : FUN_0094a190
ENTRY    : 0094a190
BODY     : [[0094a190, 0094a383]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0094a190(undefined4 param_1,undefined2 param_2,char param_3)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int in_EAX;
  int *piVar4;
  DWORD DVar5;
  int iVar6;
  uint uVar7;
  
  if ((*(int *)(in_EAX + 100) - *(int *)(in_EAX + 0x60) & 0xfffffffcU) != 0) {
    piVar1 = *(int **)(in_EAX + 100);
    piVar4 = (int *)FUN_004268b0(*(undefined4 *)(in_EAX + 0x60),piVar1,param_1);
    if (((int *)*piVar4 != piVar1) && (iVar2 = *(int *)*piVar4, iVar2 != 0)) {
      if (*(short *)(iVar2 + 10) != 2) {
        *(int *)(in_EAX + 0x78) = *(int *)(in_EAX + 0x78) + 1;
      }
      *(undefined2 *)(iVar2 + 10) = 2;
      *(undefined2 *)(iVar2 + 8) = param_2;
      if (*(char *)(iVar2 + 0xb8) != '\0') {
        param_3 = '\0';
      }
      if (*(char *)(in_EAX + 0x32) != '\0') {
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))(piVar1,"mc_petlist.UpdatePetState","%d,%d",param_1,2);
        }
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))
                    (piVar1,"mc_petinfo.UpdatePetState","%d,%d",param_1,*(undefined2 *)(iVar2 + 10))
          ;
        }
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))
                    (piVar1,"mc_petlist.UpdateNowSummonedPetCnt","%d,%d",
                     *(undefined4 *)(in_EAX + 0x78),*(undefined4 *)(in_EAX + 0x7c));
        }
        if (*(int *)(iVar2 + 0xb4) != 0) {
          uVar7 = 0;
          if ((*(int *)(iVar2 + 0xbc) != 0) && (param_3 == '\0')) {
            DVar5 = timeGetTime();
            uVar7 = (DVar5 - *(int *)(iVar2 + 0xbc)) / 100;
          }
          uVar3 = *(uint *)(iVar2 + 0xb4);
          if (uVar3 < uVar7) {
            uVar7 = uVar3;
          }
          *(uint *)(iVar2 + 0xb4) = uVar3 - uVar7;
          if (param_3 == '\0') {
            DVar5 = timeGetTime();
            *(DWORD *)(iVar2 + 0xbc) = DVar5;
          }
          if ((*DAT_00da9894 != 0) &&
             (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
            if (*(uint *)(iVar2 + 0xb0) < 8) {
              iVar6 = iVar2 + 0x9c;
            }
            else {
              iVar6 = *(int *)(iVar2 + 0x9c);
            }
            (**(code **)(*piVar1 + 4))
                      (piVar1,"mc_petinfo.UpdateCashFeedState","%d,%ls,%d,%b",param_1,iVar6,
                       *(undefined4 *)(iVar2 + 0xb4),param_3);
          }
        }
      }
      uVar7 = (uint)((float)*(ushort *)(iVar2 + 8) * 0.33333334);
      if ((ushort)(*(ushort *)(iVar2 + 8) - 1) < 2) {
        FUN_00945fb0(1);
        return;
      }
      if ((short)uVar7 != 0) {
        FUN_00945fb0(uVar7 & 0xffff);
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0094a190 : PUSH EBP
0094a191 : MOV EBP,ESP
0094a193 : PUSH EBX
0094a194 : MOV EBX,dword ptr [EBP + 0x8]
0094a197 : PUSH EDI
0094a198 : MOV EDI,EAX
0094a19a : MOV EAX,dword ptr [EDI + 0x64]
0094a19d : SUB EAX,dword ptr [EDI + 0x60]
0094a1a0 : TEST EAX,0xfffffffc
0094a1a5 : JZ 0x0094a37e
0094a1ab : MOV EAX,dword ptr [EDI + 0x60]
0094a1ae : PUSH ESI
0094a1af : MOV ESI,dword ptr [EDI + 0x64]
0094a1b2 : PUSH EBX
0094a1b3 : PUSH ESI
0094a1b4 : PUSH EAX
0094a1b5 : LEA EAX,[EBP + 0x8]
0094a1b8 : CALL 0x004268b0
0094a1bd : MOV EAX,dword ptr [EAX]
0094a1bf : ADD ESP,0xc
0094a1c2 : CMP EAX,ESI
0094a1c4 : JZ 0x0094a37d
0094a1ca : MOV ESI,dword ptr [EAX]
0094a1cc : TEST ESI,ESI
0094a1ce : JZ 0x0094a37d
0094a1d4 : MOV ECX,0x2
0094a1d9 : CMP CX,word ptr [ESI + 0xa]
0094a1dd : JZ 0x0094a1e2
0094a1df : INC dword ptr [EDI + 0x78]
0094a1e2 : CMP byte ptr [ESI + 0xb8],0x0
0094a1e9 : MOV AX,word ptr [EBP + 0xc]
0094a1ed : MOV EDX,ECX
0094a1ef : MOV word ptr [ESI + 0xa],DX
0094a1f3 : MOV word ptr [ESI + 0x8],AX
0094a1f7 : JZ 0x0094a1fd
0094a1f9 : MOV byte ptr [EBP + 0x10],0x0
0094a1fd : CMP byte ptr [EDI + 0x32],0x0
0094a201 : JZ 0x0094a33f
0094a207 : MOV ECX,dword ptr [0x00da9894]
0094a20d : MOV EAX,dword ptr [ECX]
0094a20f : TEST EAX,EAX
0094a211 : JZ 0x0094a235
0094a213 : MOV EAX,dword ptr [EAX + 0x114]
0094a219 : TEST EAX,EAX
0094a21b : JZ 0x0094a235
0094a21d : MOV EDX,dword ptr [EAX]
0094a21f : PUSH 0x2
0094a221 : PUSH EBX
0094a222 : PUSH 0xc739fc
0094a227 : PUSH 0xc73a04
0094a22c : PUSH EAX
0094a22d : MOV EAX,dword ptr [EDX + 0x4]
0094a230 : CALL EAX
0094a232 : ADD ESP,0x14
0094a235 : MOV ECX,dword ptr [0x00da9894]
0094a23b : MOV EAX,dword ptr [ECX]
0094a23d : TEST EAX,EAX
0094a23f : JZ 0x0094a266
0094a241 : MOV EAX,dword ptr [EAX + 0x114]
0094a247 : TEST EAX,EAX
0094a249 : JZ 0x0094a266
0094a24b : MOVZX ECX,word ptr [ESI + 0xa]
0094a24f : MOV EDX,dword ptr [EAX]
0094a251 : MOV EDX,dword ptr [EDX + 0x4]
0094a254 : PUSH ECX
0094a255 : PUSH EBX
0094a256 : PUSH 0xc73a20
0094a25b : PUSH 0xc73a28
0094a260 : PUSH EAX
0094a261 : CALL EDX
0094a263 : ADD ESP,0x14
0094a266 : MOV EAX,[0x00da9894]
0094a26b : MOV EAX,dword ptr [EAX]
0094a26d : TEST EAX,EAX
0094a26f : JZ 0x0094a298
0094a271 : MOV EAX,dword ptr [EAX + 0x114]
0094a277 : TEST EAX,EAX
0094a279 : JZ 0x0094a298
0094a27b : MOV EDX,dword ptr [EDI + 0x7c]
0094a27e : MOV ECX,dword ptr [EAX]
0094a280 : PUSH EDX
0094a281 : MOV EDX,dword ptr [EDI + 0x78]
0094a284 : PUSH EDX
0094a285 : PUSH 0xc73a44
0094a28a : PUSH 0xc73a4c
0094a28f : PUSH EAX
0094a290 : MOV EAX,dword ptr [ECX + 0x4]
0094a293 : CALL EAX
0094a295 : ADD ESP,0x14
0094a298 : CMP dword ptr [ESI + 0xb4],0x0
0094a29f : JBE 0x0094a33f
0094a2a5 : MOV EDI,dword ptr [0x00b85598]
0094a2ab : XOR EDX,EDX
0094a2ad : CMP dword ptr [ESI + 0xbc],EDX
0094a2b3 : JBE 0x0094a2ce
0094a2b5 : CMP byte ptr [EBP + 0x10],DL
0094a2b8 : JNZ 0x0094a2ce
0094a2ba : CALL EDI
0094a2bc : MOV ECX,EAX
0094a2be : SUB ECX,dword ptr [ESI + 0xbc]
0094a2c4 : MOV EAX,0x51eb851f
0094a2c9 : MUL ECX
0094a2cb : SHR EDX,0x5
0094a2ce : MOV EAX,dword ptr [ESI + 0xb4]
0094a2d4 : CMP EAX,EDX
0094a2d6 : CMOVC EDX,EAX
0094a2d9 : SUB EAX,EDX
0094a2db : CMP byte ptr [EBP + 0x10],0x0
0094a2df : MOV dword ptr [ESI + 0xb4],EAX
0094a2e5 : JNZ 0x0094a2ef
0094a2e7 : CALL EDI
0094a2e9 : MOV dword ptr [ESI + 0xbc],EAX
0094a2ef : MOV ECX,dword ptr [0x00da9894]
0094a2f5 : MOV EAX,dword ptr [ECX]
0094a2f7 : TEST EAX,EAX
0094a2f9 : JZ 0x0094a33f
0094a2fb : MOV EAX,dword ptr [EAX + 0x114]
0094a301 : TEST EAX,EAX
0094a303 : JZ 0x0094a33f
0094a305 : CMP dword ptr [ESI + 0xb0],0x8
0094a30c : JC 0x0094a316
0094a30e : MOV ECX,dword ptr [ESI + 0x9c]
0094a314 : JMP 0x0094a31c
0094a316 : LEA ECX,[ESI + 0x9c]
0094a31c : MOVZX EDI,byte ptr [EBP + 0x10]
0094a320 : MOV EDX,dword ptr [EAX]
0094a322 : PUSH EDI
0094a323 : MOV EDI,dword ptr [ESI + 0xb4]
0094a329 : PUSH EDI
0094a32a : PUSH ECX
0094a32b : PUSH EBX
0094a32c : PUSH 0xc73a70
0094a331 : PUSH 0xc73a80
0094a336 : PUSH EAX
0094a337 : MOV EAX,dword ptr [EDX + 0x4]
0094a33a : CALL EAX
0094a33c : ADD ESP,0x1c
0094a33f : MOVZX EAX,word ptr [ESI + 0x8]
0094a343 : MOVZX ECX,AX
0094a346 : CVTSI2SS XMM0,ECX
0094a34a : MULSS XMM0,dword ptr [0x00cdf294]
0094a352 : DEC EAX
0094a353 : CVTTSS2SI EDX,XMM0
0094a357 : MOVZX ECX,DX
0094a35a : CMP AX,0x1
0094a35e : JA 0x0094a372
0094a360 : MOV ECX,0x1
0094a365 : PUSH ECX
0094a366 : CALL 0x00945fb0
0094a36b : POP ESI
0094a36c : POP EDI
0094a36d : POP EBX
0094a36e : POP EBP
0094a36f : RET 0xc
0094a372 : TEST CX,CX
0094a375 : JBE 0x0094a37d
0094a377 : PUSH ECX
0094a378 : CALL 0x00945fb0
0094a37d : POP ESI
0094a37e : POP EDI
0094a37f : POP EBX
0094a380 : POP EBP
0094a381 : RET 0xc
