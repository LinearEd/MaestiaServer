PROGRAM  : Maestia.exe
FUNCTION : FUN_006e3410
ENTRY    : 006e3410
BODY     : [[006e3410, 006e3456] [006e3460, 006e350c] [006e3510, 006e3658]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006e3410(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  char cVar5;
  int iVar6;
  undefined4 *puVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  int *piVar12;
  int iVar13;
  int local_24;
  int local_20;
  int iStack_14;
  int local_10;
  
  iVar1 = *(int *)(param_1 + 0xe0);
  iVar2 = *(int *)(param_1 + 0x148);
  iVar8 = *(int *)(iVar2 + 0x10);
  uVar9 = *(int *)(param_1 + 0xf8) - 1;
  if (*(int *)(iVar2 + 0x14) <= iVar8) {
    *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
    FUN_006d7e70();
    return 1;
  }
  do {
    for (uVar11 = *(uint *)(iVar2 + 0xc); uVar11 <= uVar9; uVar11 = uVar11 + 1) {
      iVar13 = 0;
      local_10 = 0;
      if (0 < *(int *)(param_1 + 0xe4)) {
        piVar12 = (int *)(param_1 + 0xe8);
        do {
          iVar3 = *piVar12;
          if (uVar11 < uVar9) {
            iVar10 = *(int *)(iVar3 + 0x34);
          }
          else {
            iVar10 = *(int *)(iVar3 + 0x44);
          }
          iVar4 = *(int *)(iVar3 + 0x40);
          local_24 = iVar8 * 8;
          local_20 = 0;
          if (0 < *(int *)(iVar3 + 0x38)) {
            iVar6 = *(int *)(iVar3 + 0x34);
            do {
              if ((*(uint *)(iVar2 + 8) < iVar1 - 1U) || (local_20 + iVar8 < *(int *)(iVar3 + 0x48))
                 ) {
                (**(code **)(*(int *)(param_1 + 0x158) + 4))
                          (param_1,iVar3,*(undefined4 *)(param_2 + *(int *)(iVar3 + 4) * 4),
                           *(undefined4 *)(iVar2 + 0x18 + iVar13 * 4),local_24,iVar4 * uVar11,iVar10
                          );
                if ((iVar10 < *(int *)(iVar3 + 0x34)) &&
                   (FUN_006d9620(*(undefined4 *)(iVar2 + 0x18 + (iVar13 + iVar10) * 4),
                                 (*(int *)(iVar3 + 0x34) - iVar10) * 0x80),
                   iVar10 < *(int *)(iVar3 + 0x34))) {
                  puVar7 = (undefined4 *)(iVar2 + 0x18 + (iVar13 + iVar10) * 4);
                  iStack_14 = iVar10;
                  do {
                    *(undefined2 *)*puVar7 = *(undefined2 *)puVar7[-1];
                    iStack_14 = iStack_14 + 1;
                    puVar7 = puVar7 + 1;
                  } while (iStack_14 < *(int *)(iVar3 + 0x34));
                }
              }
              else {
                FUN_006d9620(*(undefined4 *)(iVar2 + 0x18 + iVar13 * 4),iVar6 << 7);
                iVar6 = 0;
                if (0 < *(int *)(iVar3 + 0x34)) {
                  puVar7 = (undefined4 *)(iVar2 + 0x18 + iVar13 * 4);
                  do {
                    iVar6 = iVar6 + 1;
                    *(undefined2 *)*puVar7 = **(undefined2 **)(iVar2 + 0x14 + iVar13 * 4);
                    puVar7 = puVar7 + 1;
                  } while (iVar6 < *(int *)(iVar3 + 0x34));
                }
              }
              iVar6 = *(int *)(iVar3 + 0x34);
              local_24 = local_24 + 8;
              local_20 = local_20 + 1;
              iVar13 = iVar13 + iVar6;
            } while (local_20 < *(int *)(iVar3 + 0x38));
          }
          local_10 = local_10 + 1;
          piVar12 = piVar12 + 1;
        } while (local_10 < *(int *)(param_1 + 0xe4));
      }
      cVar5 = (**(code **)(*(int *)(param_1 + 0x15c) + 4))(param_1,iVar2 + 0x18);
      if (cVar5 == '\0') {
        *(uint *)(iVar2 + 0xc) = uVar11;
        *(int *)(iVar2 + 0x10) = iVar8;
        return 0;
      }
    }
    iVar8 = iVar8 + 1;
    *(undefined4 *)(iVar2 + 0xc) = 0;
    if (*(int *)(iVar2 + 0x14) <= iVar8) {
      *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
      FUN_006d7e70();
      return 1;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
006e3410 : SUB ESP,0x2c
006e3413 : PUSH EBX
006e3414 : PUSH EBP
006e3415 : PUSH ESI
006e3416 : MOV ESI,dword ptr [ESP + 0x3c]
006e341a : MOV EAX,dword ptr [ESI + 0xe0]
006e3420 : MOV EBX,dword ptr [ESI + 0x148]
006e3426 : MOV ECX,dword ptr [ESI + 0xf8]
006e342c : DEC EAX
006e342d : MOV dword ptr [ESP + 0x30],EAX
006e3431 : MOV EAX,dword ptr [EBX + 0x10]
006e3434 : DEC ECX
006e3435 : CMP EAX,dword ptr [EBX + 0x14]
006e3438 : PUSH EDI
006e3439 : MOV dword ptr [ESP + 0x20],ECX
006e343d : MOV dword ptr [ESP + 0x10],EAX
006e3441 : JL 0x006e3464
006e3443 : INC dword ptr [EBX + 0x8]
006e3446 : MOV ECX,ESI
006e3448 : CALL 0x006d7e70
006e344d : POP EDI
006e344e : POP ESI
006e344f : POP EBP
006e3450 : MOV AL,0x1
006e3452 : POP EBX
006e3453 : ADD ESP,0x2c
006e3456 : RET
006e3460 : MOV ECX,dword ptr [ESP + 0x20]
006e3464 : MOV EBP,dword ptr [EBX + 0xc]
006e3467 : MOV dword ptr [ESP + 0x14],EBP
006e346b : CMP EBP,ECX
006e346d : JA 0x006e361c
006e3473 : XOR EDI,EDI
006e3475 : CMP dword ptr [ESI + 0xe4],EDI
006e347b : MOV dword ptr [ESP + 0x2c],EDI
006e347f : JLE 0x006e35f2
006e3485 : ADD ESI,0xe8
006e348b : MOV dword ptr [ESP + 0x30],ESI
006e348f : NOP
006e3490 : MOV ESI,dword ptr [ESI]
006e3492 : CMP EBP,dword ptr [ESP + 0x20]
006e3496 : JNC 0x006e349d
006e3498 : MOV EBP,dword ptr [ESI + 0x34]
006e349b : JMP 0x006e34a0
006e349d : MOV EBP,dword ptr [ESI + 0x44]
006e34a0 : MOV EAX,dword ptr [ESI + 0x40]
006e34a3 : IMUL EAX,dword ptr [ESP + 0x14]
006e34a8 : MOV dword ptr [ESP + 0x38],EAX
006e34ac : MOV EAX,dword ptr [ESP + 0x10]
006e34b0 : ADD EAX,EAX
006e34b2 : ADD EAX,EAX
006e34b4 : ADD EAX,EAX
006e34b6 : CMP dword ptr [ESI + 0x38],0x0
006e34ba : MOV dword ptr [ESP + 0x24],EBP
006e34be : MOV dword ptr [ESP + 0x18],EAX
006e34c2 : MOV dword ptr [ESP + 0x1c],0x0
006e34ca : JLE 0x006e35c8
006e34d0 : MOV EAX,dword ptr [ESI + 0x34]
006e34d3 : MOV ECX,dword ptr [ESP + 0x34]
006e34d7 : CMP dword ptr [EBX + 0x8],ECX
006e34da : JC 0x006e352f
006e34dc : MOV EDX,dword ptr [ESP + 0x1c]
006e34e0 : MOV ECX,dword ptr [ESP + 0x10]
006e34e4 : ADD EDX,ECX
006e34e6 : CMP EDX,dword ptr [ESI + 0x48]
006e34e9 : JL 0x006e352f
006e34eb : MOV EDX,dword ptr [EBX + EDI*0x4 + 0x18]
006e34ef : SHL EAX,0x7
006e34f2 : PUSH EAX
006e34f3 : PUSH EDX
006e34f4 : CALL 0x006d9620
006e34f9 : XOR EAX,EAX
006e34fb : ADD ESP,0x8
006e34fe : CMP dword ptr [ESI + 0x34],EAX
006e3501 : JLE 0x006e35ac
006e3507 : LEA ECX,[EBX + EDI*0x4 + 0x18]
006e350b : JMP 0x006e3510
006e3510 : MOV EDX,dword ptr [EBX + EDI*0x4 + 0x14]
006e3514 : MOV EBP,dword ptr [ECX]
006e3516 : MOV DX,word ptr [EDX]
006e3519 : INC EAX
006e351a : MOV word ptr [EBP],DX
006e351e : ADD ECX,0x4
006e3521 : CMP EAX,dword ptr [ESI + 0x34]
006e3524 : JL 0x006e3510
006e3526 : MOV EBP,dword ptr [ESP + 0x24]
006e352a : JMP 0x006e35ac
006e352f : MOV EAX,dword ptr [ESP + 0x40]
006e3533 : MOV ECX,dword ptr [EAX + 0x158]
006e3539 : MOV EDX,dword ptr [ESP + 0x38]
006e353d : MOV EAX,dword ptr [ESP + 0x18]
006e3541 : PUSH EBP
006e3542 : PUSH EDX
006e3543 : MOV EDX,dword ptr [EBX + EDI*0x4 + 0x18]
006e3547 : PUSH EAX
006e3548 : MOV EAX,dword ptr [ESI + 0x4]
006e354b : PUSH EDX
006e354c : MOV EDX,dword ptr [ESP + 0x54]
006e3550 : MOV EAX,dword ptr [EDX + EAX*0x4]
006e3553 : MOV EDX,dword ptr [ESP + 0x50]
006e3557 : PUSH EAX
006e3558 : MOV EAX,dword ptr [ECX + 0x4]
006e355b : PUSH ESI
006e355c : PUSH EDX
006e355d : CALL EAX
006e355f : MOV EAX,dword ptr [ESI + 0x34]
006e3562 : ADD ESP,0x1c
006e3565 : CMP EBP,EAX
006e3567 : JGE 0x006e35ac
006e3569 : SUB EAX,EBP
006e356b : SHL EAX,0x7
006e356e : LEA ECX,[EDI + EBP*0x1]
006e3571 : MOV EDX,dword ptr [EBX + ECX*0x4 + 0x18]
006e3575 : PUSH EAX
006e3576 : PUSH EDX
006e3577 : CALL 0x006d9620
006e357c : ADD ESP,0x8
006e357f : CMP EBP,dword ptr [ESI + 0x34]
006e3582 : MOV dword ptr [ESP + 0x28],EBP
006e3586 : JGE 0x006e35ac
006e3588 : LEA EAX,[EDI + EBP*0x1]
006e358b : LEA EAX,[EBX + EAX*0x4 + 0x18]
006e358f : NOP
006e3590 : MOV ECX,dword ptr [EAX + -0x4]
006e3593 : MOV CX,word ptr [ECX]
006e3596 : MOV EDX,dword ptr [EAX]
006e3598 : MOV word ptr [EDX],CX
006e359b : MOV ECX,dword ptr [ESP + 0x28]
006e359f : INC ECX
006e35a0 : ADD EAX,0x4
006e35a3 : CMP ECX,dword ptr [ESI + 0x34]
006e35a6 : MOV dword ptr [ESP + 0x28],ECX
006e35aa : JL 0x006e3590
006e35ac : MOV ECX,dword ptr [ESP + 0x1c]
006e35b0 : MOV EAX,dword ptr [ESI + 0x34]
006e35b3 : ADD dword ptr [ESP + 0x18],0x8
006e35b8 : INC ECX
006e35b9 : ADD EDI,EAX
006e35bb : CMP ECX,dword ptr [ESI + 0x38]
006e35be : MOV dword ptr [ESP + 0x1c],ECX
006e35c2 : JL 0x006e34d3
006e35c8 : MOV EAX,dword ptr [ESP + 0x2c]
006e35cc : MOV ESI,dword ptr [ESP + 0x30]
006e35d0 : MOV EDX,dword ptr [ESP + 0x40]
006e35d4 : MOV EBP,dword ptr [ESP + 0x14]
006e35d8 : INC EAX
006e35d9 : ADD ESI,0x4
006e35dc : CMP EAX,dword ptr [EDX + 0xe4]
006e35e2 : MOV dword ptr [ESP + 0x2c],EAX
006e35e6 : MOV dword ptr [ESP + 0x30],ESI
006e35ea : JL 0x006e3490
006e35f0 : MOV ESI,EDX
006e35f2 : MOV ECX,dword ptr [ESI + 0x15c]
006e35f8 : MOV EDX,dword ptr [ECX + 0x4]
006e35fb : LEA EAX,[EBX + 0x18]
006e35fe : PUSH EAX
006e35ff : PUSH ESI
006e3600 : CALL EDX
006e3602 : ADD ESP,0x8
006e3605 : TEST AL,AL
006e3607 : JZ 0x006e3645
006e3609 : INC EBP
006e360a : MOV dword ptr [ESP + 0x14],EBP
006e360e : CMP EBP,dword ptr [ESP + 0x20]
006e3612 : JBE 0x006e3473
006e3618 : MOV EAX,dword ptr [ESP + 0x10]
006e361c : INC EAX
006e361d : MOV dword ptr [EBX + 0xc],0x0
006e3624 : CMP EAX,dword ptr [EBX + 0x14]
006e3627 : MOV dword ptr [ESP + 0x10],EAX
006e362b : JL 0x006e3460
006e3631 : INC dword ptr [EBX + 0x8]
006e3634 : MOV ECX,ESI
006e3636 : CALL 0x006d7e70
006e363b : POP EDI
006e363c : POP ESI
006e363d : POP EBP
006e363e : MOV AL,0x1
006e3640 : POP EBX
006e3641 : ADD ESP,0x2c
006e3644 : RET
006e3645 : MOV EAX,dword ptr [ESP + 0x10]
006e3649 : POP EDI
006e364a : POP ESI
006e364b : MOV dword ptr [EBX + 0xc],EBP
006e364e : MOV dword ptr [EBX + 0x10],EAX
006e3651 : POP EBP
006e3652 : XOR AL,AL
006e3654 : POP EBX
006e3655 : ADD ESP,0x2c
006e3658 : RET
