PROGRAM  : Maestia.exe
FUNCTION : FUN_0085e680
ENTRY    : 0085e680
BODY     : [[0085e680, 0085e87d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Type propagation algorithm not settling */

void FUN_0085e680(int param_1,char param_2)

{
  int iVar1;
  char cVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined **local_118 [47];
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  float local_40;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  float local_28;
  undefined4 local_24;
  float local_20 [4];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar1 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4420a;
  local_10 = ExceptionList;
  if (*(int *)(param_1 + 0x18a8) == 0) {
    return;
  }
  ExceptionList = &local_10;
  if ((*(char *)(*(int *)(param_1 + 0x18a8) + 0x20) != '\0') &&
     (((param_2 == '\0' ||
       (cVar2 = FUN_00876040(DAT_00d66fa0 ^ (uint)&stack0xfffffffc), cVar2 == '\0')) &&
      (*(char *)(*(int *)(iVar1 + 0x18a8) + 0xec) == '\0')))) {
    if (*(int *)(*(int *)(iVar1 + 0x18a8) + 0x30) == 0) {
      ExceptionList = local_10;
      return;
    }
    local_38 = *(undefined4 *)(iVar1 + 0x1580);
    local_34 = *(undefined4 *)(iVar1 + 0x1584);
    local_30 = *(undefined4 *)(iVar1 + 0x1588);
    D3DXVec3Normalize(&local_38,&local_38);
    local_50 = 0;
    local_4c = 0xbf800000;
    local_48 = 0;
    iVar3 = FUN_007d5b60(local_118);
    local_2c = *(undefined4 *)(iVar3 + 0x20);
    local_24 = *(undefined4 *)(iVar3 + 0x28);
    local_8 = 0xffffffff;
    local_28 = *(float *)(iVar3 + 0x24) + DAT_00d72c20;
    local_5c = 0;
    local_58 = 0;
    local_54 = 0;
    param_1 = 0;
    local_118[0] = &PTR_FUN_00cd083c;
    local_40 = 0.0;
    iVar3 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_50,&local_44,&local_5c,&param_1)
    ;
    local_20[1] = 0.0;
    local_20[2] = 0.0;
    local_20[3] = 0.0;
    FUN_007e3cb0(*(undefined4 *)(*(int *)(iVar1 + 1000) + 0x68),
                 *(undefined4 *)(*(int *)(iVar1 + 1000) + 0x70),local_20,&stack0x0000000b,
                 local_20 + 1);
    if ((iVar3 == 0) || (local_40 <= local_20[0])) {
      D3DXVec3Normalize(local_20 + 1,local_20 + 1);
      puVar4 = &local_44;
      FUN_00855280(local_20 + 1);
      goto LAB_0085e863;
    }
  }
  puVar4 = &DAT_00d720f0;
LAB_0085e863:
  FUN_00856310(puVar4);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0085e680 : PUSH EBP
0085e681 : MOV EBP,ESP
0085e683 : PUSH -0x1
0085e685 : PUSH 0xb4420a
0085e68a : MOV EAX,FS:[0x0]
0085e690 : PUSH EAX
0085e691 : SUB ESP,0x10c
0085e697 : PUSH EBX
0085e698 : PUSH ESI
0085e699 : PUSH EDI
0085e69a : MOV EAX,[0x00d66fa0]
0085e69f : XOR EAX,EBP
0085e6a1 : PUSH EAX
0085e6a2 : LEA EAX,[EBP + -0xc]
0085e6a5 : MOV FS:[0x0],EAX
0085e6ab : MOV EBX,dword ptr [EBP + 0x8]
0085e6ae : MOV EAX,dword ptr [EBX + 0x18a8]
0085e6b4 : TEST EAX,EAX
0085e6b6 : JZ 0x0085e86a
0085e6bc : CMP byte ptr [EAX + 0x20],0x0
0085e6c0 : JNZ 0x0085e6cc
0085e6c2 : PUSH 0xd720f0
0085e6c7 : JMP 0x0085e863
0085e6cc : CMP byte ptr [EBP + 0xc],0x0
0085e6d0 : JZ 0x0085e6f1
0085e6d2 : MOV EAX,dword ptr [EBX + 0x138]
0085e6d8 : MOV ECX,dword ptr [EAX + 0x4]
0085e6db : LEA ESI,[EBX + 0x1c58]
0085e6e1 : LEA EDI,[ECX + EBX*0x1 + 0x138]
0085e6e8 : CALL 0x00876040
0085e6ed : TEST AL,AL
0085e6ef : JNZ 0x0085e6c2
0085e6f1 : MOV EAX,dword ptr [EBX + 0x18a8]
0085e6f7 : CMP byte ptr [EAX + 0xec],0x0
0085e6fe : JNZ 0x0085e6c2
0085e700 : CMP dword ptr [EAX + 0x30],0x0
0085e704 : JZ 0x0085e86a
0085e70a : MOVSS XMM0,dword ptr [EBX + 0x1580]
0085e712 : MOVSS XMM1,dword ptr [EBX + 0x1584]
0085e71a : MOVSS XMM2,dword ptr [EBX + 0x1588]
0085e722 : LEA EDX,[EBP + -0x34]
0085e725 : PUSH EDX
0085e726 : MOV EAX,EDX
0085e728 : PUSH EAX
0085e729 : MOVSS dword ptr [EBP + -0x34],XMM0
0085e72e : MOVSS dword ptr [EBP + -0x30],XMM1
0085e733 : MOVSS dword ptr [EBP + -0x2c],XMM2
0085e738 : CALL 0x004ff722
0085e73d : XORPS XMM0,XMM0
0085e740 : MOVSS XMM1,dword ptr [0x00cdf0d0]
0085e748 : LEA ECX,[EBP + 0xfffffeec]
0085e74e : PUSH ECX
0085e74f : MOV ECX,dword ptr [EBX + 0x3e8]
0085e755 : MOVSS dword ptr [EBP + -0x4c],XMM0
0085e75a : MOVSS dword ptr [EBP + -0x48],XMM1
0085e75f : MOVSS dword ptr [EBP + -0x44],XMM0
0085e764 : CALL 0x007d5b60
0085e769 : MOV dword ptr [EBP + -0x4],0x0
0085e770 : MOVSS XMM0,dword ptr [EAX + 0x20]
0085e775 : MOVSS XMM1,dword ptr [EAX + 0x24]
0085e77a : MOVSS XMM2,dword ptr [EAX + 0x28]
0085e77f : MOVSS dword ptr [EBP + -0x28],XMM0
0085e784 : MOVSS dword ptr [EBP + -0x24],XMM1
0085e789 : MOVSS dword ptr [EBP + -0x20],XMM2
0085e78e : MOV dword ptr [EBP + -0x4],0xffffffff
0085e795 : MOVSS XMM0,dword ptr [EBP + -0x24]
0085e79a : ADDSS XMM0,dword ptr [0x00d72c20]
0085e7a2 : MOV EDX,dword ptr [0x00da93ec]
0085e7a8 : MOVSS dword ptr [EBP + -0x24],XMM0
0085e7ad : XORPS XMM0,XMM0
0085e7b0 : MOVSS dword ptr [EBP + -0x58],XMM0
0085e7b5 : MOVSS dword ptr [EBP + -0x54],XMM0
0085e7ba : MOVSS dword ptr [EBP + -0x50],XMM0
0085e7bf : MOVSS dword ptr [EBP + 0x8],XMM0
0085e7c4 : LEA ECX,[EBP + 0x8]
0085e7c7 : PUSH ECX
0085e7c8 : MOV dword ptr [EBP + 0xfffffeec],0xcd083c
0085e7d2 : MOV EAX,dword ptr [EDX + 0xc]
0085e7d5 : LEA EDX,[EBP + -0x58]
0085e7d8 : PUSH EDX
0085e7d9 : LEA ECX,[EBP + -0x40]
0085e7dc : PUSH ECX
0085e7dd : LEA EDX,[EBP + -0x4c]
0085e7e0 : PUSH EDX
0085e7e1 : PUSH EAX
0085e7e2 : LEA EDI,[EBP + -0x28]
0085e7e5 : MOVSS dword ptr [EBP + -0x3c],XMM0
0085e7ea : CALL 0x007e9d70
0085e7ef : XORPS XMM0,XMM0
0085e7f2 : LEA ECX,[EBP + -0x18]
0085e7f5 : PUSH ECX
0085e7f6 : LEA EDX,[EBP + 0xf]
0085e7f9 : PUSH EDX
0085e7fa : MOV EDX,dword ptr [0x00da93ec]
0085e800 : LEA ECX,[EBP + -0x1c]
0085e803 : MOV ESI,EAX
0085e805 : MOV EAX,dword ptr [EBX + 0x3e8]
0085e80b : MOVSS dword ptr [EBP + -0x18],XMM0
0085e810 : MOVSS dword ptr [EBP + -0x14],XMM0
0085e815 : MOVSS dword ptr [EBP + -0x10],XMM0
0085e81a : FLD float ptr [EAX + 0x70]
0085e81d : MOV EDI,dword ptr [EDX + 0xc]
0085e820 : PUSH ECX
0085e821 : SUB ESP,0x8
0085e824 : FSTP float ptr [ESP + 0x4]
0085e828 : FLD float ptr [EAX + 0x68]
0085e82b : FSTP float ptr [ESP]
0085e82e : CALL 0x007e3cb0
0085e833 : TEST ESI,ESI
0085e835 : JZ 0x0085e846
0085e837 : MOVSS XMM0,dword ptr [EBP + -0x3c]
0085e83c : COMISS XMM0,dword ptr [EBP + -0x1c]
0085e840 : JA 0x0085e6c2
0085e846 : LEA EAX,[EBP + -0x18]
0085e849 : PUSH EAX
0085e84a : MOV ECX,EAX
0085e84c : PUSH ECX
0085e84d : CALL 0x004ff722
0085e852 : LEA EDX,[EBP + -0x18]
0085e855 : PUSH EDX
0085e856 : LEA EDI,[EBP + -0x40]
0085e859 : MOV EAX,EBX
0085e85b : CALL 0x00855280
0085e860 : MOV EAX,EDI
0085e862 : PUSH EAX
0085e863 : MOV ESI,EBX
0085e865 : CALL 0x00856310
0085e86a : MOV ECX,dword ptr [EBP + -0xc]
0085e86d : MOV dword ptr FS:[0x0],ECX
0085e874 : POP ECX
0085e875 : POP EDI
0085e876 : POP ESI
0085e877 : POP EBX
0085e878 : MOV ESP,EBP
0085e87a : POP EBP
0085e87b : RET 0x8
