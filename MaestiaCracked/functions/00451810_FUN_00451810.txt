PROGRAM  : Maestia.exe
FUNCTION : FUN_00451810
ENTRY    : 00451810
BODY     : [[00451810, 00451884]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00451810(void)

{
  int iVar1;
  uint uVar2;
  uint in_ECX;
  _Lockit local_14 [4];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b70cc8;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  std::_Lockit::_Lockit(local_14,0);
  iVar1 = *(int *)(in_ECX + 4);
  if ((iVar1 != 0) && (iVar1 != -1)) {
    *(int *)(in_ECX + 4) = iVar1 + -1;
  }
  iVar1 = *(int *)(in_ECX + 4);
  local_8 = 0xffffffff;
  FUN_00622fc1(uVar2);
  ExceptionList = local_10;
  return ~-(uint)(iVar1 != 0) & in_ECX;
}



============================================================
DISASSEMBLY
============================================================
00451810 : PUSH EBP
00451811 : MOV EBP,ESP
00451813 : PUSH -0x1
00451815 : PUSH 0xb70cc8
0045181a : MOV EAX,FS:[0x0]
00451820 : PUSH EAX
00451821 : PUSH ECX
00451822 : PUSH ESI
00451823 : PUSH EDI
00451824 : MOV EAX,[0x00d66fa0]
00451829 : XOR EAX,EBP
0045182b : PUSH EAX
0045182c : LEA EAX,[EBP + -0xc]
0045182f : MOV FS:[0x0],EAX
00451835 : MOV EDI,ECX
00451837 : PUSH 0x0
00451839 : LEA ECX,[EBP + -0x10]
0045183c : CALL 0x00622f99
00451841 : MOV dword ptr [EBP + -0x4],0x0
00451848 : MOV EAX,dword ptr [EDI + 0x4]
0045184b : TEST EAX,EAX
0045184d : JBE 0x00451858
0045184f : CMP EAX,-0x1
00451852 : JNC 0x00451858
00451854 : DEC EAX
00451855 : MOV dword ptr [EDI + 0x4],EAX
00451858 : MOV ESI,dword ptr [EDI + 0x4]
0045185b : NEG ESI
0045185d : SBB ESI,ESI
0045185f : NOT ESI
00451861 : AND ESI,EDI
00451863 : MOV dword ptr [EBP + -0x4],0xffffffff
0045186a : LEA ECX,[EBP + -0x10]
0045186d : CALL 0x00622fc1
00451872 : MOV EAX,ESI
00451874 : MOV ECX,dword ptr [EBP + -0xc]
00451877 : MOV dword ptr FS:[0x0],ECX
0045187e : POP ECX
0045187f : POP EDI
00451880 : POP ESI
00451881 : MOV ESP,EBP
00451883 : POP EBP
00451884 : RET
