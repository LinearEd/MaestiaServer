PROGRAM  : Maestia.exe
FUNCTION : FUN_0091fc60
ENTRY    : 0091fc60
BODY     : [[0091fc60, 0091fe38]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0091fdfe) */

void FUN_0091fc60(void)

{
  short sVar1;
  int *piVar2;
  int in_ECX;
  int iVar3;
  int aiStack_c [2];
  
  sVar1 = *(short *)(in_ECX + 0x3a);
  if (sVar1 == 0) {
    sVar1 = *(short *)(in_ECX + 0x3c);
  }
  iVar3 = *(int *)(in_ECX + 0x44);
  if (iVar3 != *(int *)(in_ECX + 0x48)) {
    do {
      if (*(short *)(iVar3 + 4) == sVar1) {
        if ((*(char *)(iVar3 + 7) == '\0') || (*(char *)(iVar3 + 7) == '\x05')) {
          FUN_0091fc20();
        }
        if (*(char *)(iVar3 + 6) == '\x15') {
          *(undefined1 *)(DAT_00da93ec + 0x3a8) = 0;
        }
        break;
      }
      iVar3 = iVar3 + 0xf0;
    } while (iVar3 != *(int *)(in_ECX + 0x48));
  }
  piVar2 = DAT_00da9894;
  *(undefined2 *)(in_ECX + 0x3a) = 0;
  *(undefined1 *)(in_ECX + 0x38) = 0;
  if ((*piVar2 != 0) && (piVar2 = *(int **)(*piVar2 + 0x114), piVar2 != (int *)0x0)) {
    (**(code **)(*piVar2 + 4))(piVar2,"RvRJoinType",&DAT_00c67a04,0);
  }
  if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
    (**(code **)(*piVar2 + 4))(piVar2,"QuestShoutcutVisible",&DAT_00c67a14,1);
  }
  FUN_00a1adc0(1);
  if (((*(int *)(in_ECX + 0x6c) == 2) && (*DAT_00da9894 != 0)) &&
     (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
    (**(code **)(*piVar2 + 4))
              (piVar2,"mc_RvR.pRvR.SetRvRCount",&DAT_00c67a30,
               (*(int *)(in_ECX + 0x48) - *(int *)(in_ECX + 0x44)) / 0xf0);
  }
  *(undefined2 *)(in_ECX + 100) = 0;
  *(undefined4 *)(in_ECX + 0x60) = 0;
  *(undefined4 *)(in_ECX + 0x68) = 0;
  *(undefined2 *)(in_ECX + 0x1b4) = 0;
  FUN_00918690();
  FUN_00918690();
  FUN_004080a0(DAT_00da93ec + 0x388,aiStack_c,*(undefined4 *)(DAT_00da93ec + 0x38c),
               *(undefined4 *)(DAT_00da93ec + 0x390));
  piVar2 = (int *)(in_ECX + 0x9c);
  aiStack_c[0] = 2;
  do {
    if (piVar2[-1] != *piVar2) {
      *piVar2 = piVar2[-1];
    }
    piVar2 = piVar2 + 4;
    aiStack_c[0] = aiStack_c[0] + -1;
  } while (aiStack_c[0] != 0);
  *(undefined4 *)(in_ECX + 500) = 0;
  *(undefined4 *)(in_ECX + 0x1f8) = 0;
  *(undefined4 *)(in_ECX + 0x1fc) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0091fc60 : PUSH EBP
0091fc61 : MOV EBP,ESP
0091fc63 : AND ESP,0xfffffff8
0091fc66 : SUB ESP,0xc
0091fc69 : PUSH EBX
0091fc6a : PUSH ESI
0091fc6b : PUSH EDI
0091fc6c : MOV EDI,ECX
0091fc6e : MOVZX ESI,word ptr [EDI + 0x3a]
0091fc72 : MOVZX EAX,SI
0091fc75 : TEST AX,AX
0091fc78 : JNZ 0x0091fc86
0091fc7a : MOVZX EAX,SI
0091fc7d : TEST SI,SI
0091fc80 : JNZ 0x0091fc86
0091fc82 : MOVZX EAX,word ptr [EDI + 0x3c]
0091fc86 : MOV EBX,dword ptr [EDI + 0x44]
0091fc89 : CMP EBX,dword ptr [EDI + 0x48]
0091fc8c : JZ 0x0091fcc5
0091fc8e : MOV EDI,EDI
0091fc90 : CMP word ptr [EBX + 0x4],AX
0091fc94 : JZ 0x0091fca3
0091fc96 : ADD EBX,0xf0
0091fc9c : CMP EBX,dword ptr [EDI + 0x48]
0091fc9f : JNZ 0x0091fc90
0091fca1 : JMP 0x0091fcc5
0091fca3 : MOV AL,byte ptr [EBX + 0x7]
0091fca6 : TEST AL,AL
0091fca8 : JZ 0x0091fcae
0091fcaa : CMP AL,0x5
0091fcac : JNZ 0x0091fcb3
0091fcae : CALL 0x0091fc20
0091fcb3 : CMP byte ptr [EBX + 0x6],0x15
0091fcb7 : JNZ 0x0091fcc5
0091fcb9 : MOV EAX,[0x00da93ec]
0091fcbe : MOV byte ptr [EAX + 0x3a8],0x0
0091fcc5 : MOV EDX,dword ptr [0x00da9894]
0091fccb : XOR ECX,ECX
0091fccd : MOV word ptr [EDI + 0x3a],CX
0091fcd1 : MOV byte ptr [EDI + 0x38],CL
0091fcd4 : MOV EAX,dword ptr [EDX]
0091fcd6 : TEST EAX,EAX
0091fcd8 : JZ 0x0091fcfb
0091fcda : MOV EAX,dword ptr [EAX + 0x114]
0091fce0 : TEST EAX,EAX
0091fce2 : JZ 0x0091fcfb
0091fce4 : MOV ECX,dword ptr [EAX]
0091fce6 : MOV EDX,dword ptr [ECX + 0x4]
0091fce9 : PUSH 0x0
0091fceb : PUSH 0xc67a04
0091fcf0 : PUSH 0xc67a08
0091fcf5 : PUSH EAX
0091fcf6 : CALL EDX
0091fcf8 : ADD ESP,0x10
0091fcfb : MOV EAX,[0x00da9894]
0091fd00 : MOV EAX,dword ptr [EAX]
0091fd02 : TEST EAX,EAX
0091fd04 : JZ 0x0091fd27
0091fd06 : MOV EAX,dword ptr [EAX + 0x114]
0091fd0c : TEST EAX,EAX
0091fd0e : JZ 0x0091fd27
0091fd10 : MOV ECX,dword ptr [EAX]
0091fd12 : MOV EDX,dword ptr [ECX + 0x4]
0091fd15 : PUSH 0x1
0091fd17 : PUSH 0xc67a14
0091fd1c : PUSH 0xc67a18
0091fd21 : PUSH EAX
0091fd22 : CALL EDX
0091fd24 : ADD ESP,0x10
0091fd27 : MOV EAX,[0x00da93ec]
0091fd2c : PUSH 0x1
0091fd2e : CALL 0x00a1adc0
0091fd33 : CMP dword ptr [EDI + 0x6c],0x2
0091fd37 : JNZ 0x0091fd7d
0091fd39 : MOV EAX,[0x00da9894]
0091fd3e : MOV EAX,dword ptr [EAX]
0091fd40 : TEST EAX,EAX
0091fd42 : JZ 0x0091fd7d
0091fd44 : MOV ESI,dword ptr [EAX + 0x114]
0091fd4a : TEST ESI,ESI
0091fd4c : JZ 0x0091fd7d
0091fd4e : MOV ECX,dword ptr [EDI + 0x48]
0091fd51 : SUB ECX,dword ptr [EDI + 0x44]
0091fd54 : MOV EBX,dword ptr [ESI]
0091fd56 : MOV EAX,0x88888889
0091fd5b : IMUL ECX
0091fd5d : ADD EDX,ECX
0091fd5f : SAR EDX,0x7
0091fd62 : MOV ECX,EDX
0091fd64 : SHR ECX,0x1f
0091fd67 : ADD ECX,EDX
0091fd69 : MOV EDX,dword ptr [EBX + 0x4]
0091fd6c : PUSH ECX
0091fd6d : PUSH 0xc67a30
0091fd72 : PUSH 0xc67a34
0091fd77 : PUSH ESI
0091fd78 : CALL EDX
0091fd7a : ADD ESP,0x10
0091fd7d : XOR EAX,EAX
0091fd7f : XOR ECX,ECX
0091fd81 : MOV word ptr [EDI + 0x64],AX
0091fd85 : MOV dword ptr [EDI + 0x60],EAX
0091fd88 : MOV dword ptr [EDI + 0x68],EAX
0091fd8b : MOV word ptr [EDI + 0x1b4],CX
0091fd92 : LEA EAX,[ECX + 0x1]
0091fd95 : MOV ECX,EDI
0091fd97 : CALL 0x00918690
0091fd9c : MOV EAX,0x2
0091fda1 : MOV ECX,EDI
0091fda3 : CALL 0x00918690
0091fda8 : MOV EAX,[0x00da93ec]
0091fdad : MOV ECX,dword ptr [EAX + 0x390]
0091fdb3 : MOV EDX,dword ptr [EAX + 0x38c]
0091fdb9 : ADD EAX,0x388
0091fdbe : PUSH ECX
0091fdbf : PUSH EDX
0091fdc0 : LEA EDX,[ESP + 0x1c]
0091fdc4 : PUSH EDX
0091fdc5 : PUSH EAX
0091fdc6 : CALL 0x004080a0
0091fdcb : LEA EAX,[EDI + 0x9c]
0091fdd1 : MOV dword ptr [ESP + 0x10],EAX
0091fdd5 : MOV dword ptr [ESP + 0x14],0x2
0091fddd : LEA ECX,[ECX]
0091fde0 : MOV ESI,dword ptr [EAX + -0x4]
0091fde3 : MOV ECX,dword ptr [EAX]
0091fde5 : CMP ESI,ECX
0091fde7 : JZ 0x0091fe10
0091fde9 : MOV EAX,ECX
0091fdeb : SUB EAX,ECX
0091fded : SAR EAX,0x2
0091fdf0 : LEA EDX,[EAX*0x4 + 0x0]
0091fdf7 : LEA EBX,[EDX + ESI*0x1]
0091fdfa : TEST EAX,EAX
0091fdfc : JLE 0x0091fe0a
0091fdfe : PUSH EDX
0091fdff : PUSH ECX
0091fe00 : PUSH EDX
0091fe01 : PUSH ESI
0091fe02 : CALL 0x00634101
0091fe07 : ADD ESP,0x10
0091fe0a : MOV EAX,dword ptr [ESP + 0x10]
0091fe0e : MOV dword ptr [EAX],EBX
0091fe10 : ADD EAX,0x10
0091fe13 : SUB dword ptr [ESP + 0x14],0x1
0091fe18 : MOV dword ptr [ESP + 0x10],EAX
0091fe1c : JNZ 0x0091fde0
0091fe1e : XOR EAX,EAX
0091fe20 : MOV dword ptr [EDI + 0x1f4],EAX
0091fe26 : MOV dword ptr [EDI + 0x1f8],EAX
0091fe2c : MOV dword ptr [EDI + 0x1fc],EAX
0091fe32 : POP EDI
0091fe33 : POP ESI
0091fe34 : POP EBX
0091fe35 : MOV ESP,EBP
0091fe37 : POP EBP
0091fe38 : RET
