PROGRAM  : Maestia.exe
FUNCTION : FUN_0072a080
ENTRY    : 0072a080
BODY     : [[0072a080, 0072a167]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0072a080(void)

{
  int *piVar1;
  uint uVar2;
  int *unaff_ESI;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b477aa;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_28 = (LPCRITICAL_SECTION)(unaff_ESI + 0x53);
  local_1c = 0;
  local_24 = ".\\Gui\\AvaUITalkBalloon.cpp";
  local_20 = 0x10d;
  local_18 = 1;
  FUN_006ef1a0(&local_28);
  local_8 = 0;
  if (((unaff_ESI[6] != 0) && (*unaff_ESI != 0)) &&
     (piVar1 = *(int **)(DAT_017251ac + 0x18), piVar1 != (int *)0x0)) {
    (**(code **)(*piVar1 + 0x104))(piVar1,1,0,uVar2);
    local_14 = *(int *)unaff_ESI[5];
    if ((int *)local_14 != (int *)unaff_ESI[5]) {
      do {
        FUN_00729780(unaff_ESI);
        FUN_004c6c40();
      } while (local_14 != unaff_ESI[5]);
    }
    FUN_00728840();
    FUN_00728960(unaff_ESI);
  }
  if (local_1c != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_28);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0072a080 : PUSH EBP
0072a081 : MOV EBP,ESP
0072a083 : PUSH -0x1
0072a085 : PUSH 0xb477aa
0072a08a : MOV EAX,FS:[0x0]
0072a090 : PUSH EAX
0072a091 : SUB ESP,0x1c
0072a094 : PUSH EDI
0072a095 : MOV EAX,[0x00d66fa0]
0072a09a : XOR EAX,EBP
0072a09c : PUSH EAX
0072a09d : LEA EAX,[EBP + -0xc]
0072a0a0 : MOV FS:[0x0],EAX
0072a0a6 : LEA ECX,[EBP + -0x24]
0072a0a9 : LEA EAX,[ESI + 0x14c]
0072a0af : XOR EDI,EDI
0072a0b1 : PUSH ECX
0072a0b2 : MOV dword ptr [EBP + -0x18],EDI
0072a0b5 : MOV dword ptr [EBP + -0x24],EAX
0072a0b8 : MOV dword ptr [EBP + -0x20],0xc02518
0072a0bf : MOV dword ptr [EBP + -0x1c],0x10d
0072a0c6 : MOV dword ptr [EBP + -0x14],0x1
0072a0cd : CALL 0x006ef1a0
0072a0d2 : MOV dword ptr [EBP + -0x4],EDI
0072a0d5 : CMP dword ptr [ESI + 0x18],EDI
0072a0d8 : JNZ 0x0072a0ec
0072a0da : MOV dword ptr [EBP + -0x4],0xffffffff
0072a0e1 : CMP dword ptr [EBP + -0x18],EDI
0072a0e4 : JZ 0x0072a158
0072a0e6 : MOV EDX,dword ptr [EBP + -0x24]
0072a0e9 : PUSH EDX
0072a0ea : JMP 0x0072a14f
0072a0ec : CMP dword ptr [ESI],EDI
0072a0ee : JZ 0x0072a13f
0072a0f0 : MOV ECX,dword ptr [0x017251ac]
0072a0f6 : MOV EAX,dword ptr [ECX + 0x18]
0072a0f9 : CMP EAX,EDI
0072a0fb : JZ 0x0072a0da
0072a0fd : MOV ECX,dword ptr [EAX]
0072a0ff : MOV EDX,dword ptr [ECX + 0x104]
0072a105 : PUSH EDI
0072a106 : PUSH 0x1
0072a108 : PUSH EAX
0072a109 : CALL EDX
0072a10b : MOV ECX,dword ptr [ESI + 0x14]
0072a10e : MOV EAX,dword ptr [ECX]
0072a110 : MOV dword ptr [EBP + -0x10],EAX
0072a113 : CMP EAX,ECX
0072a115 : JZ 0x0072a132
0072a117 : LEA ECX,[EAX + 0xc]
0072a11a : PUSH ESI
0072a11b : CALL 0x00729780
0072a120 : LEA EDX,[EBP + -0x10]
0072a123 : CALL 0x004c6c40
0072a128 : MOV ECX,dword ptr [ESI + 0x14]
0072a12b : MOV EAX,dword ptr [EBP + -0x10]
0072a12e : CMP EAX,ECX
0072a130 : JNZ 0x0072a117
0072a132 : MOV ECX,ESI
0072a134 : CALL 0x00728840
0072a139 : PUSH ESI
0072a13a : CALL 0x00728960
0072a13f : MOV dword ptr [EBP + -0x4],0xffffffff
0072a146 : CMP dword ptr [EBP + -0x18],EDI
0072a149 : JZ 0x0072a158
0072a14b : MOV EAX,dword ptr [EBP + -0x24]
0072a14e : PUSH EAX
0072a14f : CALL dword ptr [0x00b8511c]
0072a155 : MOV dword ptr [EBP + -0x18],EDI
0072a158 : MOV ECX,dword ptr [EBP + -0xc]
0072a15b : MOV dword ptr FS:[0x0],ECX
0072a162 : POP ECX
0072a163 : POP EDI
0072a164 : MOV ESP,EBP
0072a166 : POP EBP
0072a167 : RET
