PROGRAM  : Maestia.exe
FUNCTION : FUN_0086a690
ENTRY    : 0086a690
BODY     : [[0086a690, 0086a87e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0086a690(void)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  int iVar3;
  undefined4 local_38;
  int local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1bd62;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_38 = *(undefined4 *)(in_ECX + 8);
  local_14 = uVar1;
  FUN_004437f0(&local_38);
  if ((local_34 != *(int *)(iVar3 + 0x44)) && (*(int *)(local_34 + 0x10) != 0)) {
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    local_8 = 0;
    iVar3 = *(int *)(*(int *)(local_34 + 0x10) + 0x1ac);
    if (iVar3 != 0) {
      local_34 = (**(code **)(*(int *)(iVar3 + 0x1c4) + 4))(uVar1);
      if (local_34 == 0) {
        if (*(uint *)(in_ECX + 0x24) < 8) {
          iVar3 = in_ECX + 0x10;
        }
        else {
          iVar3 = *(int *)(in_ECX + 0x10);
        }
        FUN_00808780(L"[AvaNonPlayerCharacter::LoadCharacterData], %s",iVar3);
        local_8 = 0xffffffff;
        FUN_00406560();
        goto LAB_0086a863;
      }
      iVar3 = FUN_004f5680();
      uVar2 = FUN_00404350(iVar3 + 0x18);
      local_8._0_1_ = 1;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
    }
    FUN_00405eb0(local_30,0,0xffffffff);
    local_34 = 0x5f;
    iVar3 = FUN_00407cc0(&local_34,1);
    if (iVar3 != -1) {
      FUN_00405e10(iVar3,local_1c - iVar3);
      FUN_00404870(L"_death.mmf",10);
    }
    FUN_00405eb0(local_30,0,0xffffffff);
    local_34 = 0x5f;
    iVar3 = FUN_00407cc0(&local_34,1);
    if (iVar3 != -1) {
      FUN_00405e10(iVar3,local_1c - iVar3);
      FUN_00404870(L"_death.mbf",10);
    }
    FUN_00405eb0(local_30,0,0xffffffff);
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
  }
LAB_0086a863:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0086a690 : PUSH EBP
0086a691 : MOV EBP,ESP
0086a693 : PUSH -0x1
0086a695 : PUSH 0xb1bd62
0086a69a : MOV EAX,FS:[0x0]
0086a6a0 : PUSH EAX
0086a6a1 : SUB ESP,0x44
0086a6a4 : MOV EAX,[0x00d66fa0]
0086a6a9 : XOR EAX,EBP
0086a6ab : MOV dword ptr [EBP + -0x10],EAX
0086a6ae : PUSH EBX
0086a6af : PUSH ESI
0086a6b0 : PUSH EDI
0086a6b1 : PUSH EAX
0086a6b2 : LEA EAX,[EBP + -0xc]
0086a6b5 : MOV FS:[0x0],EAX
0086a6bb : MOV ESI,dword ptr [0x00d7c54c]
0086a6c1 : MOV EBX,ECX
0086a6c3 : MOV EAX,dword ptr [EBX + 0x8]
0086a6c6 : LEA ECX,[EBP + -0x34]
0086a6c9 : MOV dword ptr [EBP + -0x34],EAX
0086a6cc : PUSH ECX
0086a6cd : LEA ECX,[ESI + 0x40]
0086a6d0 : LEA EAX,[EBP + -0x30]
0086a6d3 : CALL 0x004437f0
0086a6d8 : MOV ESI,dword ptr [ESI + 0x44]
0086a6db : MOV EAX,dword ptr [EBP + -0x30]
0086a6de : CMP EAX,ESI
0086a6e0 : JZ 0x0086a863
0086a6e6 : MOV EAX,dword ptr [EAX + 0x10]
0086a6e9 : XOR EDI,EDI
0086a6eb : CMP EAX,EDI
0086a6ed : JZ 0x0086a863
0086a6f3 : XOR EDX,EDX
0086a6f5 : MOV dword ptr [EBP + -0x14],0x7
0086a6fc : MOV dword ptr [EBP + -0x18],EDI
0086a6ff : MOV word ptr [EBP + -0x28],DX
0086a703 : MOV dword ptr [EBP + -0x4],EDI
0086a706 : MOV ESI,dword ptr [EAX + 0x1ac]
0086a70c : CMP ESI,EDI
0086a70e : JZ 0x0086a78f
0086a710 : MOV EAX,dword ptr [ESI + 0x1c4]
0086a716 : MOV EDX,dword ptr [EAX + 0x4]
0086a719 : ADD ESI,0x1c4
0086a71f : MOV ECX,ESI
0086a721 : CALL EDX
0086a723 : MOV dword ptr [EBP + -0x30],EAX
0086a726 : CMP EAX,EDI
0086a728 : JNZ 0x0086a75a
0086a72a : CMP dword ptr [EBX + 0x24],0x8
0086a72e : JC 0x0086a735
0086a730 : MOV EBX,dword ptr [EBX + 0x10]
0086a733 : JMP 0x0086a738
0086a735 : ADD EBX,0x10
0086a738 : PUSH EBX
0086a739 : PUSH 0xc41758
0086a73e : CALL 0x00808780
0086a743 : ADD ESP,0x8
0086a746 : MOV dword ptr [EBP + -0x4],0xffffffff
0086a74d : LEA ECX,[EBP + -0x2c]
0086a750 : CALL 0x00406560
0086a755 : JMP 0x0086a863
0086a75a : LEA EDX,[EBP + -0x30]
0086a75d : MOV EAX,ESI
0086a75f : CALL 0x004f5680
0086a764 : ADD EAX,0x18
0086a767 : PUSH EAX
0086a768 : LEA ESI,[EBP + -0x50]
0086a76b : CALL 0x00404350
0086a770 : ADD ESP,0x4
0086a773 : MOV byte ptr [EBP + -0x4],0x1
0086a777 : PUSH -0x1
0086a779 : PUSH 0x0
0086a77b : PUSH EAX
0086a77c : LEA ECX,[EBP + -0x2c]
0086a77f : CALL 0x00405eb0
0086a784 : MOV byte ptr [EBP + -0x4],0x0
0086a788 : MOV ECX,ESI
0086a78a : CALL 0x00406560
0086a78f : PUSH -0x1
0086a791 : PUSH 0x0
0086a793 : LEA EAX,[EBP + -0x2c]
0086a796 : PUSH EAX
0086a797 : LEA ECX,[EBX + 0x36c]
0086a79d : CALL 0x00405eb0
0086a7a2 : PUSH 0x1
0086a7a4 : LEA ECX,[EBP + -0x30]
0086a7a7 : PUSH ECX
0086a7a8 : OR ECX,0xffffffff
0086a7ab : LEA EDI,[EBP + -0x2c]
0086a7ae : MOV dword ptr [EBP + -0x30],0x5f
0086a7b5 : CALL 0x00407cc0
0086a7ba : CMP EAX,-0x1
0086a7bd : JZ 0x0086a7db
0086a7bf : MOV EDX,dword ptr [EBP + -0x18]
0086a7c2 : SUB EDX,EAX
0086a7c4 : PUSH EDX
0086a7c5 : PUSH EAX
0086a7c6 : MOV ECX,EDI
0086a7c8 : CALL 0x00405e10
0086a7cd : PUSH 0xa
0086a7cf : PUSH 0xc417b8
0086a7d4 : MOV ESI,EDI
0086a7d6 : CALL 0x00404870
0086a7db : PUSH -0x1
0086a7dd : PUSH 0x0
0086a7df : LEA EAX,[EBP + -0x2c]
0086a7e2 : PUSH EAX
0086a7e3 : LEA ECX,[EBX + 0x350]
0086a7e9 : CALL 0x00405eb0
0086a7ee : PUSH 0x1
0086a7f0 : LEA ECX,[EBP + -0x30]
0086a7f3 : PUSH ECX
0086a7f4 : OR ECX,0xffffffff
0086a7f7 : LEA EDI,[EBP + -0x2c]
0086a7fa : MOV dword ptr [EBP + -0x30],0x5f
0086a801 : CALL 0x00407cc0
0086a806 : CMP EAX,-0x1
0086a809 : JZ 0x0086a827
0086a80b : MOV EDX,dword ptr [EBP + -0x18]
0086a80e : SUB EDX,EAX
0086a810 : PUSH EDX
0086a811 : PUSH EAX
0086a812 : MOV ECX,EDI
0086a814 : CALL 0x00405e10
0086a819 : PUSH 0xa
0086a81b : PUSH 0xc417d0
0086a820 : MOV ESI,EDI
0086a822 : CALL 0x00404870
0086a827 : PUSH -0x1
0086a829 : PUSH 0x0
0086a82b : LEA EAX,[EBP + -0x2c]
0086a82e : PUSH EAX
0086a82f : LEA ECX,[EBX + 0x334]
0086a835 : CALL 0x00405eb0
0086a83a : MOV dword ptr [EBP + -0x4],0xffffffff
0086a841 : CMP dword ptr [EBP + -0x14],0x8
0086a845 : JC 0x0086a84f
0086a847 : MOV ECX,dword ptr [EBP + -0x28]
0086a84a : CALL 0x006f04e0
0086a84f : XOR ECX,ECX
0086a851 : MOV dword ptr [EBP + -0x14],0x7
0086a858 : MOV dword ptr [EBP + -0x18],0x0
0086a85f : MOV word ptr [EBP + -0x28],CX
0086a863 : MOV ECX,dword ptr [EBP + -0xc]
0086a866 : MOV dword ptr FS:[0x0],ECX
0086a86d : POP ECX
0086a86e : POP EDI
0086a86f : POP ESI
0086a870 : POP EBX
0086a871 : MOV ECX,dword ptr [EBP + -0x10]
0086a874 : XOR ECX,EBP
0086a876 : CALL 0x00633e6b
0086a87b : MOV ESP,EBP
0086a87d : POP EBP
0086a87e : RET
