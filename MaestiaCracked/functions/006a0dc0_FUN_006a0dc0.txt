PROGRAM  : Maestia.exe
FUNCTION : FUN_006a0dc0
ENTRY    : 006a0dc0
BODY     : [[006a0dc0, 006a101e]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a0dc0(int param_1)

{
  short sVar1;
  short sVar2;
  undefined2 uVar3;
  int iVar4;
  int iVar5;
  undefined2 *puVar6;
  int iVar7;
  uint uVar8;
  undefined4 uVar9;
  int iVar10;
  int local_24;
  undefined4 local_20;
  int local_1c;
  int local_18;
  uint local_14;
  int local_10;
  uint local_c;
  int local_8;
  int local_4;
  
  local_20 = *(undefined4 *)(param_1 + 100);
  local_24 = 0;
  local_4 = 0;
  local_24 = FUN_006a0660(0x20,&local_14,&local_8);
  if ((local_24 != 0) || (local_24 = FUN_00688900(), local_24 != 0)) {
    return local_24;
  }
  local_14 = FUN_006879e0();
  local_c = local_14 >> 2 & 1;
  if (local_c == 0) {
    sVar1 = FUN_00687970();
    local_18 = (int)sVar1;
    sVar2 = FUN_00687970();
    sVar1 = FUN_00687970();
    local_1c = (int)sVar1;
    sVar1 = FUN_00687970();
    uVar3 = FUN_00687970();
  }
  else {
    sVar1 = FUN_00687940();
    local_18 = (int)sVar1;
    sVar2 = FUN_00687940();
    sVar1 = FUN_00687940();
    local_1c = (int)sVar1;
    sVar1 = FUN_00687940();
    uVar3 = FUN_00687940();
  }
  *(undefined2 *)(param_1 + 0x130) = uVar3;
  FUN_006889b0();
  uVar9 = local_20;
  if ((local_14 & 0xffffff00) == 0) {
    local_8 = (sVar2 - local_18) + 1;
    local_10 = ((sVar1 - local_1c) + 1) * local_8;
    iVar4 = FUN_0068a220(local_20,8,0,local_10,0,&local_24);
    if (local_24 != 0) {
      return 0x40;
    }
    local_24 = FUN_00688900();
    iVar5 = local_4;
    if (local_24 == 0) {
      iVar10 = 0;
      local_14 = 0;
      if (0 < local_10) {
        do {
          uVar8 = local_14;
          if (local_c == 1) {
            sVar1 = FUN_00687940();
          }
          else {
            sVar1 = FUN_00687970();
          }
          if (sVar1 != -1) {
            *(short *)(iVar4 + 4 + iVar10 * 8) = sVar1;
            iVar10 = iVar10 + 1;
            *(int *)(iVar4 + -8 + iVar10 * 8) =
                 ((int)uVar8 / local_8 + local_1c) * 0x100 + (int)uVar8 % local_8 + local_18;
            uVar8 = local_14;
          }
          local_14 = uVar8 + 1;
        } while ((int)local_14 < local_10);
      }
      FUN_006889b0();
      iVar5 = FUN_0068a220(local_20,8,0,iVar10,0,&local_24);
      uVar9 = local_20;
      if (local_24 == 0) {
        iVar7 = 0;
        if (0 < iVar10) {
          puVar6 = (undefined2 *)(iVar5 + 4);
          do {
            *(undefined4 *)(puVar6 + -2) = *(undefined4 *)(iVar4 + iVar7 * 8);
            *puVar6 = *(undefined2 *)((iVar4 - iVar5) + (int)puVar6);
            iVar7 = iVar7 + 1;
            puVar6 = puVar6 + 4;
          } while (iVar7 < iVar10);
        }
        *(int *)(param_1 + 0x128) = iVar10;
        *(int *)(param_1 + 300) = iVar5;
        FUN_00687f30(local_20,iVar4);
        return local_24;
      }
    }
    FUN_00687f30(uVar9,iVar5);
    FUN_00687f30(uVar9,iVar4);
    return local_24;
  }
  return 3;
}



============================================================
DISASSEMBLY
============================================================
006a0dc0 : SUB ESP,0x24
006a0dc3 : PUSH EBX
006a0dc4 : PUSH EBP
006a0dc5 : MOV EBP,dword ptr [ESP + 0x30]
006a0dc9 : PUSH ESI
006a0dca : PUSH EDI
006a0dcb : MOV EDI,dword ptr [EBP + 0xc0]
006a0dd1 : LEA ECX,[ESP + 0x2c]
006a0dd5 : MOV EBX,EAX
006a0dd7 : MOV EAX,dword ptr [EBP + 0x64]
006a0dda : PUSH ECX
006a0ddb : LEA EDX,[ESP + 0x24]
006a0ddf : PUSH EDX
006a0de0 : XOR ESI,ESI
006a0de2 : MOV dword ptr [ESP + 0x1c],EAX
006a0de6 : MOV EAX,dword ptr [EBP + 0xbc]
006a0dec : PUSH 0x20
006a0dee : MOV dword ptr [ESP + 0x1c],ESI
006a0df2 : MOV dword ptr [ESP + 0x3c],ESI
006a0df6 : CALL 0x006a0660
006a0dfb : ADD ESP,0xc
006a0dfe : MOV dword ptr [ESP + 0x10],EAX
006a0e02 : CMP EAX,ESI
006a0e04 : JNZ 0x006a1017
006a0e0a : PUSH 0xe
006a0e0c : PUSH EBX
006a0e0d : CALL 0x00688900
006a0e12 : ADD ESP,0x8
006a0e15 : MOV dword ptr [ESP + 0x10],EAX
006a0e19 : CMP EAX,ESI
006a0e1b : JNZ 0x006a1017
006a0e21 : PUSH EBX
006a0e22 : CALL 0x006879e0
006a0e27 : MOV dword ptr [ESP + 0x24],EAX
006a0e2b : ADD ESP,0x4
006a0e2e : SHR EAX,0x2
006a0e31 : AND EAX,0x1
006a0e34 : MOV dword ptr [ESP + 0x28],EAX
006a0e38 : PUSH EBX
006a0e39 : JZ 0x006a0e6c
006a0e3b : CALL 0x00687940
006a0e40 : CWDE
006a0e41 : PUSH EBX
006a0e42 : MOV dword ptr [ESP + 0x24],EAX
006a0e46 : CALL 0x00687940
006a0e4b : PUSH EBX
006a0e4c : MOVSX EDI,AX
006a0e4f : CALL 0x00687940
006a0e54 : MOVSX ECX,AX
006a0e57 : PUSH EBX
006a0e58 : MOV dword ptr [ESP + 0x28],ECX
006a0e5c : CALL 0x00687940
006a0e61 : PUSH EBX
006a0e62 : MOVSX ESI,AX
006a0e65 : CALL 0x00687940
006a0e6a : JMP 0x006a0e9b
006a0e6c : CALL 0x00687970
006a0e71 : MOVSX EDX,AX
006a0e74 : PUSH EBX
006a0e75 : MOV dword ptr [ESP + 0x24],EDX
006a0e79 : CALL 0x00687970
006a0e7e : PUSH EBX
006a0e7f : MOVSX EDI,AX
006a0e82 : CALL 0x00687970
006a0e87 : CWDE
006a0e88 : PUSH EBX
006a0e89 : MOV dword ptr [ESP + 0x28],EAX
006a0e8d : CALL 0x00687970
006a0e92 : PUSH EBX
006a0e93 : MOVSX ESI,AX
006a0e96 : CALL 0x00687970
006a0e9b : ADD ESP,0x14
006a0e9e : PUSH EBX
006a0e9f : MOV word ptr [EBP + 0x130],AX
006a0ea6 : CALL 0x006889b0
006a0eab : ADD ESP,0x4
006a0eae : TEST dword ptr [ESP + 0x20],0xffffff00
006a0eb6 : JZ 0x006a0ec5
006a0eb8 : POP EDI
006a0eb9 : POP ESI
006a0eba : POP EBP
006a0ebb : MOV EAX,0x3
006a0ec0 : POP EBX
006a0ec1 : ADD ESP,0x24
006a0ec4 : RET
006a0ec5 : SUB ESI,dword ptr [ESP + 0x18]
006a0ec9 : SUB EDI,dword ptr [ESP + 0x1c]
006a0ecd : MOV EBP,dword ptr [ESP + 0x14]
006a0ed1 : INC EDI
006a0ed2 : INC ESI
006a0ed3 : IMUL ESI,EDI
006a0ed6 : LEA ECX,[ESP + 0x10]
006a0eda : PUSH ECX
006a0edb : PUSH 0x0
006a0edd : PUSH ESI
006a0ede : PUSH 0x0
006a0ee0 : PUSH 0x8
006a0ee2 : PUSH EBP
006a0ee3 : MOV dword ptr [ESP + 0x44],EDI
006a0ee7 : MOV dword ptr [ESP + 0x3c],ESI
006a0eeb : CALL 0x0068a220
006a0ef0 : ADD ESP,0x18
006a0ef3 : CMP dword ptr [ESP + 0x10],0x0
006a0ef8 : MOV EDI,EAX
006a0efa : JZ 0x006a0f09
006a0efc : POP EDI
006a0efd : POP ESI
006a0efe : POP EBP
006a0eff : MOV EAX,0x40
006a0f04 : POP EBX
006a0f05 : ADD ESP,0x24
006a0f08 : RET
006a0f09 : LEA EDX,[ESI + ESI*0x1]
006a0f0c : PUSH EDX
006a0f0d : PUSH EBX
006a0f0e : CALL 0x00688900
006a0f13 : ADD ESP,0x8
006a0f16 : MOV dword ptr [ESP + 0x10],EAX
006a0f1a : TEST EAX,EAX
006a0f1c : JNZ 0x006a0fac
006a0f22 : XOR EBP,EBP
006a0f24 : XOR ESI,ESI
006a0f26 : CMP dword ptr [ESP + 0x24],EBP
006a0f2a : MOV dword ptr [ESP + 0x20],EBP
006a0f2e : JLE 0x006a0f7e
006a0f30 : CMP dword ptr [ESP + 0x28],0x1
006a0f35 : PUSH EBX
006a0f36 : JNZ 0x006a0f3f
006a0f38 : CALL 0x00687940
006a0f3d : JMP 0x006a0f44
006a0f3f : CALL 0x00687970
006a0f44 : MOVSX ECX,AX
006a0f47 : ADD ESP,0x4
006a0f4a : CMP ECX,-0x1
006a0f4d : JZ 0x006a0f73
006a0f4f : MOV EAX,EBP
006a0f51 : CDQ
006a0f52 : IDIV dword ptr [ESP + 0x2c]
006a0f56 : MOV EBP,dword ptr [ESP + 0x18]
006a0f5a : MOV word ptr [EDI + ESI*0x8 + 0x4],CX
006a0f5f : ADD EAX,EBP
006a0f61 : MOV EBP,dword ptr [ESP + 0x20]
006a0f65 : SHL EAX,0x8
006a0f68 : ADD EAX,EDX
006a0f6a : ADD EAX,dword ptr [ESP + 0x1c]
006a0f6e : INC ESI
006a0f6f : MOV dword ptr [EDI + ESI*0x8 + -0x8],EAX
006a0f73 : INC EBP
006a0f74 : CMP EBP,dword ptr [ESP + 0x24]
006a0f78 : MOV dword ptr [ESP + 0x20],EBP
006a0f7c : JL 0x006a0f30
006a0f7e : PUSH EBX
006a0f7f : CALL 0x006889b0
006a0f84 : MOV ECX,dword ptr [ESP + 0x18]
006a0f88 : LEA EAX,[ESP + 0x14]
006a0f8c : PUSH EAX
006a0f8d : PUSH 0x0
006a0f8f : PUSH ESI
006a0f90 : PUSH 0x0
006a0f92 : PUSH 0x8
006a0f94 : PUSH ECX
006a0f95 : CALL 0x0068a220
006a0f9a : ADD ESP,0x1c
006a0f9d : CMP dword ptr [ESP + 0x10],0x0
006a0fa2 : MOV EBX,EAX
006a0fa4 : JZ 0x006a0fcd
006a0fa6 : MOV EBP,dword ptr [ESP + 0x14]
006a0faa : JMP 0x006a0fb0
006a0fac : MOV EBX,dword ptr [ESP + 0x30]
006a0fb0 : PUSH EBX
006a0fb1 : PUSH EBP
006a0fb2 : CALL 0x00687f30
006a0fb7 : PUSH EDI
006a0fb8 : PUSH EBP
006a0fb9 : CALL 0x00687f30
006a0fbe : MOV EAX,dword ptr [ESP + 0x20]
006a0fc2 : ADD ESP,0x10
006a0fc5 : POP EDI
006a0fc6 : POP ESI
006a0fc7 : POP EBP
006a0fc8 : POP EBX
006a0fc9 : ADD ESP,0x24
006a0fcc : RET
006a0fcd : XOR ECX,ECX
006a0fcf : TEST ESI,ESI
006a0fd1 : JLE 0x006a0ff5
006a0fd3 : MOV EDX,EDI
006a0fd5 : LEA EAX,[EBX + 0x4]
006a0fd8 : SUB EDX,EBX
006a0fda : LEA EBX,[EBX]
006a0fe0 : MOV EBP,dword ptr [EDI + ECX*0x8]
006a0fe3 : MOV dword ptr [EAX + -0x4],EBP
006a0fe6 : MOV BP,word ptr [EDX + EAX*0x1]
006a0fea : MOV word ptr [EAX],BP
006a0fed : INC ECX
006a0fee : ADD EAX,0x8
006a0ff1 : CMP ECX,ESI
006a0ff3 : JL 0x006a0fe0
006a0ff5 : MOV EAX,dword ptr [ESP + 0x38]
006a0ff9 : MOV EDX,dword ptr [ESP + 0x14]
006a0ffd : PUSH EDI
006a0ffe : PUSH EDX
006a0fff : MOV dword ptr [EAX + 0x128],ESI
006a1005 : MOV dword ptr [EAX + 0x12c],EBX
006a100b : CALL 0x00687f30
006a1010 : MOV EAX,dword ptr [ESP + 0x18]
006a1014 : ADD ESP,0x8
006a1017 : POP EDI
006a1018 : POP ESI
006a1019 : POP EBP
006a101a : POP EBX
006a101b : ADD ESP,0x24
006a101e : RET
