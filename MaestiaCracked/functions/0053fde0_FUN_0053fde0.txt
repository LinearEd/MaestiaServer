PROGRAM  : Maestia.exe
FUNCTION : FUN_0053fde0
ENTRY    : 0053fde0
BODY     : [[0053fde0, 0053ff7e] [0053ff80, 00540089]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053fde0(int param_1,int param_2)

{
  int *piVar1;
  uint uVar2;
  char cVar3;
  uint uVar4;
  int *piVar5;
  int *in_ECX;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  bool bVar10;
  bool bVar11;
  
  uVar7 = in_ECX[1];
  if (uVar7 == 0) {
    return;
  }
  uVar4 = FUN_0053bc40(param_1);
  if ((int)uVar4 < 0) {
    uVar4 = 0;
  }
  else if (uVar7 <= uVar4) {
    uVar4 = uVar7 - 1;
  }
  if (param_2 == -1) {
    param_2 = 0x7fffffff - param_1;
  }
  piVar5 = (int *)(*in_ECX + uVar4 * 0xc);
  iVar8 = *piVar5;
  uVar9 = uVar4;
  if (param_1 < iVar8) {
LAB_0053ff40:
    iVar8 = FUN_0050a360(param_1);
    if (0 < iVar8) goto LAB_0053ff65;
    bVar11 = SBORROW4(uVar4,uVar7);
    bVar10 = (int)(uVar4 - uVar7) < 0;
  }
  else if (piVar5[1] + iVar8 + -1 < param_1 + -1 + param_2) {
    if ((param_1 < iVar8) || (uVar2 = piVar5[1], (int)((uVar2 - 1) + iVar8) < param_1))
    goto LAB_0053ff40;
    uVar7 = (uVar2 - param_1) + iVar8;
    if (uVar2 < uVar7) {
      piVar5[1] = 0;
    }
    else {
      piVar5[1] = uVar2 - uVar7;
    }
    if (piVar5[1] == 0) {
      if ((-1 < (int)uVar4) && (uVar4 < (uint)in_ECX[1])) {
        FUN_0053f6c0(uVar4);
      }
      goto LAB_0053ff65;
    }
    bVar11 = SBORROW4(uVar4,in_ECX[1]);
    bVar10 = (int)(uVar4 - in_ECX[1]) < 0;
  }
  else {
    if (iVar8 == param_1) {
      iVar6 = param_2;
      if (piVar5[1] < param_2) {
        iVar6 = piVar5[1];
      }
      piVar1 = piVar5 + 1;
      *piVar1 = *piVar1 - iVar6;
      *piVar5 = iVar8 + iVar6;
      if (((*piVar1 == 0) && (-1 < (int)uVar4)) && (uVar4 < (uint)in_ECX[1])) {
        FUN_0053f6c0(uVar4);
      }
      goto LAB_0053ff65;
    }
    if (piVar5[1] + iVar8 <= param_1 + param_2) {
      FUN_0050a340(param_2);
      if ((int)uVar4 < in_ECX[1]) {
        uVar9 = uVar4 + 1;
      }
      uVar4 = uVar9;
      if ((int)uVar9 < in_ECX[1]) {
        uVar4 = uVar9 + 1;
      }
      goto LAB_0053ff65;
    }
    FUN_0050a340(param_2);
    if (piVar5[1] == 0) {
      FUN_0053f9d0();
      goto LAB_0053ff65;
    }
    bVar11 = SBORROW4(uVar4,in_ECX[1]);
    bVar10 = (int)(uVar4 - in_ECX[1]) < 0;
  }
  if (bVar11 != bVar10) {
    uVar4 = uVar4 + 1;
    uVar9 = uVar4;
  }
LAB_0053ff65:
  cVar3 = FUN_0050b420();
  if (cVar3 == '\0') {
    do {
      piVar5 = (int *)(*in_ECX + uVar4 * 0xc);
      iVar8 = *piVar5;
      if ((iVar8 < param_1) || (param_1 + -1 + param_2 < piVar5[1] + -1 + iVar8)) break;
      if ((-1 < (int)uVar4) && (uVar4 < (uint)in_ECX[1])) {
        FUN_0053f6c0(uVar4);
      }
      cVar3 = FUN_0050b420();
    } while (cVar3 == '\0');
  }
  if ((-1 < (int)uVar4) && (uVar4 < (uint)in_ECX[1])) {
    piVar5 = (int *)(*in_ECX + uVar4 * 0xc);
    iVar8 = param_1 + -1 + param_2;
    if ((*piVar5 <= iVar8) && (iVar6 = piVar5[1], iVar8 <= iVar6 + -1 + *piVar5)) {
      iVar8 = (param_1 - *piVar5) + param_2;
      if (iVar6 < iVar8) {
        iVar8 = iVar6;
      }
      *piVar5 = *piVar5 + iVar8;
      piVar5[1] = iVar6 - iVar8;
    }
  }
  if ((((-1 < (int)uVar9) && (uVar7 = uVar9 - 1, -1 < (int)uVar7)) && (uVar7 < (uint)in_ECX[1])) &&
     (uVar9 < (uint)in_ECX[1])) {
    iVar6 = *in_ECX;
    piVar5 = (int *)(iVar6 + uVar7 * 0xc);
    iVar8 = iVar6 + uVar9 * 0xc;
    if ((piVar5[1] + *piVar5 == *(int *)(iVar6 + uVar9 * 0xc) - param_2) &&
       (piVar5[2] == *(int *)(iVar8 + 8))) {
      piVar5[1] = piVar5[1] + *(int *)(iVar8 + 4);
      FUN_0053f9d0();
    }
  }
  iVar8 = uVar9 * 0xc;
  while ((-1 < iVar8 && (uVar9 < (uint)in_ECX[1]))) {
    *(int *)(*in_ECX + iVar8) = *(int *)(*in_ECX + iVar8) - param_2;
    if ((int)uVar9 < in_ECX[1]) {
      uVar9 = uVar9 + 1;
      iVar8 = iVar8 + 0xc;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0053fde0 : SUB ESP,0x14
0053fde3 : PUSH EBP
0053fde4 : MOV EBP,ECX
0053fde6 : PUSH ESI
0053fde7 : MOV ESI,dword ptr [EBP + 0x4]
0053fdea : MOV dword ptr [ESP + 0x8],EBP
0053fdee : MOV dword ptr [ESP + 0xc],ESI
0053fdf2 : TEST ESI,ESI
0053fdf4 : JBE 0x00540082
0053fdfa : PUSH EBX
0053fdfb : MOV EBX,dword ptr [ESP + 0x24]
0053fdff : PUSH EDI
0053fe00 : PUSH EBX
0053fe01 : CALL 0x0053bc40
0053fe06 : MOV dword ptr [ESP + 0x1c],EBP
0053fe0a : TEST EAX,EAX
0053fe0c : JGE 0x0053fe12
0053fe0e : XOR ESI,ESI
0053fe10 : JMP 0x0053fe1b
0053fe12 : CMP EAX,ESI
0053fe14 : JC 0x0053fe19
0053fe16 : DEC ESI
0053fe17 : JMP 0x0053fe1b
0053fe19 : MOV ESI,EAX
0053fe1b : MOV ECX,dword ptr [ESP + 0x2c]
0053fe1f : MOV dword ptr [ESP + 0x20],ESI
0053fe23 : CMP ECX,-0x1
0053fe26 : JNZ 0x0053fe35
0053fe28 : MOV EAX,0x7fffffff
0053fe2d : SUB EAX,EBX
0053fe2f : MOV dword ptr [ESP + 0x2c],EAX
0053fe33 : MOV ECX,EAX
0053fe35 : MOV EDX,dword ptr [EBP]
0053fe38 : LEA EAX,[ESI + ESI*0x2]
0053fe3b : LEA EDI,[EDX + EAX*0x4]
0053fe3e : MOV EAX,dword ptr [EDI]
0053fe40 : CMP EBX,EAX
0053fe42 : JL 0x0053ff40
0053fe48 : MOV EDX,dword ptr [EDI + 0x4]
0053fe4b : ADD EDX,EAX
0053fe4d : MOV dword ptr [ESP + 0x28],EDX
0053fe51 : LEA EBP,[EBX + ECX*0x1 + -0x1]
0053fe55 : DEC EDX
0053fe56 : CMP EBP,EDX
0053fe58 : JG 0x0053fef7
0053fe5e : CMP EAX,EBX
0053fe60 : JNZ 0x0053fe98
0053fe62 : MOV EDX,dword ptr [EDI + 0x4]
0053fe65 : CMP ECX,EDX
0053fe67 : JLE 0x0053fe6b
0053fe69 : MOV ECX,EDX
0053fe6b : ADD EAX,ECX
0053fe6d : SUB dword ptr [EDI + 0x4],ECX
0053fe70 : MOV dword ptr [EDI],EAX
0053fe72 : JNZ 0x0053ff57
0053fe78 : TEST ESI,ESI
0053fe7a : JL 0x0053ff57
0053fe80 : MOV ECX,dword ptr [ESP + 0x10]
0053fe84 : CMP ESI,dword ptr [ECX + 0x4]
0053fe87 : JNC 0x0053ff57
0053fe8d : PUSH ESI
0053fe8e : CALL 0x0053f6c0
0053fe93 : JMP 0x0053ff57
0053fe98 : LEA EAX,[EBX + ECX*0x1]
0053fe9b : CMP dword ptr [ESP + 0x28],EAX
0053fe9f : PUSH ECX
0053fea0 : MOV ECX,EDI
0053fea2 : JLE 0x0053fec9
0053fea4 : CALL 0x0050a340
0053fea9 : CMP dword ptr [EDI + 0x4],0x0
0053fead : JNZ 0x0053febd
0053feaf : LEA ECX,[ESP + 0x1c]
0053feb3 : CALL 0x0053f9d0
0053feb8 : JMP 0x0053ff57
0053febd : MOV EAX,dword ptr [ESP + 0x10]
0053fec1 : CMP ESI,dword ptr [EAX + 0x4]
0053fec4 : JMP 0x0053ff50
0053fec9 : CALL 0x0050a340
0053fece : MOV ECX,dword ptr [ESP + 0x10]
0053fed2 : MOV EAX,dword ptr [ECX + 0x4]
0053fed5 : CMP ESI,EAX
0053fed7 : JGE 0x0053fede
0053fed9 : INC ESI
0053feda : MOV dword ptr [ESP + 0x20],ESI
0053fede : CMP ESI,EAX
0053fee0 : MOV EBP,dword ptr [ESP + 0x1c]
0053fee4 : MOV EDI,ESI
0053fee6 : MOV dword ptr [ESP + 0x14],EBP
0053feea : MOV dword ptr [ESP + 0x18],EDI
0053feee : JGE 0x0053ff65
0053fef0 : INC ESI
0053fef1 : MOV dword ptr [ESP + 0x20],ESI
0053fef5 : JMP 0x0053ff65
0053fef7 : CMP EBX,EAX
0053fef9 : MOV EBP,dword ptr [ESP + 0x10]
0053fefd : JL 0x0053ff40
0053feff : MOV ECX,dword ptr [EDI + 0x4]
0053ff02 : LEA EDX,[ECX + EAX*0x1 + -0x1]
0053ff06 : CMP EBX,EDX
0053ff08 : JG 0x0053ff40
0053ff0a : MOV EDX,ECX
0053ff0c : SUB EDX,EBX
0053ff0e : ADD EDX,EAX
0053ff10 : CMP EDX,ECX
0053ff12 : JBE 0x0053ff1d
0053ff14 : MOV dword ptr [EDI + 0x4],0x0
0053ff1b : JMP 0x0053ff22
0053ff1d : SUB ECX,EDX
0053ff1f : MOV dword ptr [EDI + 0x4],ECX
0053ff22 : CMP dword ptr [EDI + 0x4],0x0
0053ff26 : JNZ 0x0053ff3b
0053ff28 : TEST ESI,ESI
0053ff2a : JL 0x0053ff57
0053ff2c : CMP ESI,dword ptr [EBP + 0x4]
0053ff2f : JNC 0x0053ff57
0053ff31 : PUSH ESI
0053ff32 : MOV ECX,EBP
0053ff34 : CALL 0x0053f6c0
0053ff39 : JMP 0x0053ff57
0053ff3b : CMP ESI,dword ptr [EBP + 0x4]
0053ff3e : JMP 0x0053ff50
0053ff40 : PUSH EBX
0053ff41 : MOV ECX,EDI
0053ff43 : CALL 0x0050a360
0053ff48 : TEST EAX,EAX
0053ff4a : JG 0x0053ff57
0053ff4c : CMP ESI,dword ptr [ESP + 0x14]
0053ff50 : JGE 0x0053ff57
0053ff52 : INC ESI
0053ff53 : MOV dword ptr [ESP + 0x20],ESI
0053ff57 : MOV EBP,dword ptr [ESP + 0x1c]
0053ff5b : MOV EDI,ESI
0053ff5d : MOV dword ptr [ESP + 0x14],EBP
0053ff61 : MOV dword ptr [ESP + 0x18],EDI
0053ff65 : LEA ECX,[ESP + 0x1c]
0053ff69 : CALL 0x0050b420
0053ff6e : TEST AL,AL
0053ff70 : JNZ 0x0053ffc3
0053ff72 : LEA ECX,[ESI + ESI*0x2]
0053ff75 : ADD ECX,ECX
0053ff77 : ADD ECX,ECX
0053ff79 : MOV dword ptr [ESP + 0x28],ECX
0053ff7d : JMP 0x0053ff84
0053ff80 : MOV ECX,dword ptr [ESP + 0x28]
0053ff84 : MOV EDX,dword ptr [ESP + 0x10]
0053ff88 : MOV EAX,dword ptr [EDX]
0053ff8a : ADD EAX,ECX
0053ff8c : MOV ECX,dword ptr [EAX]
0053ff8e : CMP ECX,EBX
0053ff90 : JL 0x0053ffc7
0053ff92 : MOV EAX,dword ptr [EAX + 0x4]
0053ff95 : LEA ECX,[EAX + ECX*0x1 + -0x1]
0053ff99 : MOV EAX,dword ptr [ESP + 0x2c]
0053ff9d : LEA EAX,[EBX + EAX*0x1 + -0x1]
0053ffa1 : CMP ECX,EAX
0053ffa3 : JG 0x0053ffc7
0053ffa5 : TEST ESI,ESI
0053ffa7 : JL 0x0053ffb6
0053ffa9 : CMP ESI,dword ptr [EDX + 0x4]
0053ffac : JNC 0x0053ffb6
0053ffae : PUSH ESI
0053ffaf : MOV ECX,EDX
0053ffb1 : CALL 0x0053f6c0
0053ffb6 : LEA ECX,[ESP + 0x1c]
0053ffba : CALL 0x0050b420
0053ffbf : TEST AL,AL
0053ffc1 : JZ 0x0053ff80
0053ffc3 : MOV EDX,dword ptr [ESP + 0x10]
0053ffc7 : TEST ESI,ESI
0053ffc9 : JL 0x00540006
0053ffcb : CMP ESI,dword ptr [EDX + 0x4]
0053ffce : JNC 0x00540006
0053ffd0 : MOV EDX,dword ptr [EDX]
0053ffd2 : MOV ECX,dword ptr [ESP + 0x2c]
0053ffd6 : LEA EAX,[ESI + ESI*0x2]
0053ffd9 : LEA EAX,[EDX + EAX*0x4]
0053ffdc : MOV EDX,dword ptr [EAX]
0053ffde : LEA ECX,[EBX + ECX*0x1 + -0x1]
0053ffe2 : CMP ECX,EDX
0053ffe4 : JL 0x00540006
0053ffe6 : MOV ESI,dword ptr [EAX + 0x4]
0053ffe9 : LEA EDX,[ESI + EDX*0x1 + -0x1]
0053ffed : CMP ECX,EDX
0053ffef : JG 0x00540006
0053fff1 : SUB EBX,dword ptr [EAX]
0053fff3 : MOV ECX,ESI
0053fff5 : ADD EBX,dword ptr [ESP + 0x2c]
0053fff9 : CMP EBX,ECX
0053fffb : JLE 0x0053ffff
0053fffd : MOV EBX,ECX
0053ffff : ADD dword ptr [EAX],EBX
00540001 : SUB ECX,EBX
00540003 : MOV dword ptr [EAX + 0x4],ECX
00540006 : TEST EDI,EDI
00540008 : JL 0x00540052
0054000a : LEA EAX,[EDI + -0x1]
0054000d : TEST EAX,EAX
0054000f : JL 0x00540052
00540011 : MOV ECX,dword ptr [EBP + 0x4]
00540014 : CMP EAX,ECX
00540016 : JNC 0x00540052
00540018 : CMP EDI,ECX
0054001a : JNC 0x00540052
0054001c : MOV ECX,dword ptr [EBP]
0054001f : LEA EAX,[EAX + EAX*0x2]
00540022 : LEA EAX,[ECX + EAX*0x4]
00540025 : LEA EDX,[EDI + EDI*0x2]
00540028 : MOV ESI,dword ptr [ECX + EDX*0x4]
0054002b : SUB ESI,dword ptr [ESP + 0x2c]
0054002f : LEA ECX,[ECX + EDX*0x4]
00540032 : MOV EDX,dword ptr [EAX + 0x4]
00540035 : ADD EDX,dword ptr [EAX]
00540037 : CMP EDX,ESI
00540039 : JNZ 0x00540052
0054003b : MOV EDX,dword ptr [EAX + 0x8]
0054003e : CMP EDX,dword ptr [ECX + 0x8]
00540041 : JNZ 0x00540052
00540043 : MOV ECX,dword ptr [ECX + 0x4]
00540046 : ADD dword ptr [EAX + 0x4],ECX
00540049 : LEA ECX,[ESP + 0x14]
0054004d : CALL 0x0053f9d0
00540052 : LEA ECX,[EDI + EDI*0x2]
00540055 : ADD ECX,ECX
00540057 : ADD ECX,ECX
00540059 : LEA ESP,[ESP]
00540060 : TEST ECX,ECX
00540062 : JL 0x00540080
00540064 : CMP EDI,dword ptr [EBP + 0x4]
00540067 : JNC 0x00540080
00540069 : MOV EAX,dword ptr [EBP]
0054006c : MOV EDX,dword ptr [ESP + 0x2c]
00540070 : SUB dword ptr [EAX + ECX*0x1],EDX
00540073 : ADD EAX,ECX
00540075 : CMP EDI,dword ptr [EBP + 0x4]
00540078 : JGE 0x00540060
0054007a : INC EDI
0054007b : ADD ECX,0xc
0054007e : JMP 0x00540060
00540080 : POP EDI
00540081 : POP EBX
00540082 : POP ESI
00540083 : POP EBP
00540084 : ADD ESP,0x14
00540087 : RET 0x8
