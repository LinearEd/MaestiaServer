PROGRAM  : Maestia.exe
FUNCTION : FUN_007f3460
ENTRY    : 007f3460
BODY     : [[007f3460, 007f3788]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007f3460(int param_1)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int in_EAX;
  uint *puVar4;
  int *unaff_EDI;
  char *pcVar5;
  uint uStack_8c;
  uint uStack_88;
  uint uStack_84;
  undefined8 uStack_80;
  undefined8 uStack_78;
  undefined8 uStack_70;
  undefined8 uStack_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined1 auStack_50 [76];
  
  iVar1 = unaff_EDI[4];
  if (iVar1 == 0) {
    return 0;
  }
  if (unaff_EDI[6] == in_EAX) {
    if (unaff_EDI[5] != param_1) {
      if (*(int *)(iVar1 + 0x1c) != 0) {
        (**(code **)(**(int **)(iVar1 + 0x1c) + 0x108))(*(int **)(iVar1 + 0x1c));
      }
      if (*(int *)(unaff_EDI[4] + 0x1c) != 0) {
        piVar2 = *(int **)(unaff_EDI[4] + 0x1c);
        (**(code **)(*piVar2 + 0x100))(piVar2,param_1);
      }
      unaff_EDI[5] = param_1;
      return unaff_EDI[4];
    }
    goto LAB_007f377e;
  }
  if (unaff_EDI[6] != 0) {
    if (*(int *)(iVar1 + 0x1c) != 0) {
      (**(code **)(**(int **)(iVar1 + 0x1c) + 0x108))(*(int **)(iVar1 + 0x1c));
    }
    FUN_0077c620();
    if (*(int *)(unaff_EDI[4] + 0x1c) != 0) {
      piVar2 = *(int **)(unaff_EDI[4] + 0x1c);
      (**(code **)(*piVar2 + 0x10c))(piVar2);
    }
  }
  unaff_EDI[5] = param_1;
  iVar1 = unaff_EDI[4];
  unaff_EDI[6] = in_EAX;
  if (in_EAX == 2) {
    if (*(int *)(iVar1 + 0x1c) != 0) {
      pcVar5 = "TerrainSplatting";
LAB_007f352e:
      (**(code **)(**(int **)(iVar1 + 0x1c) + 0xe8))(*(int **)(iVar1 + 0x1c),pcVar5);
    }
  }
  else if (*(int *)(iVar1 + 0x1c) != 0) {
    pcVar5 = "TerrainOneTexture";
    goto LAB_007f352e;
  }
  iVar1 = DAT_017251c4;
  if (DAT_017251c4 == -4) {
    return 0;
  }
  if (*(int *)(unaff_EDI[4] + 0x2c) != 0) {
    puVar4 = (uint *)(**(code **)(*unaff_EDI + 0x14))();
    uStack_8c = *puVar4;
    uStack_88 = puVar4[1];
    uStack_84 = puVar4[2];
    FUN_0077c3c0(unaff_EDI[4]);
  }
  if (*(int *)(unaff_EDI[4] + 0x98) != 0) {
    uStack_8c = *(uint *)(iVar1 + 0x30) ^ 0x80000000;
    uStack_88 = *(uint *)(iVar1 + 0x34) ^ 0x80000000;
    uStack_84 = *(uint *)(iVar1 + 0x38) ^ 0x80000000;
    D3DXVec3Normalize(&uStack_8c,&uStack_8c);
    FUN_0077c3c0(unaff_EDI[4]);
  }
  iVar3 = unaff_EDI[4];
  if (*(int *)(iVar3 + 0xa0) != 0) {
    uStack_80 = *(undefined8 *)(iVar1 + 0x48);
    uStack_78 = *(undefined8 *)(iVar1 + 0x50);
    if ((*(int *)(iVar3 + 0x1c) != 0) && (*(int *)(iVar3 + 0xa0) != 0)) {
      (**(code **)(**(int **)(iVar3 + 0x1c) + 0x50))
                (*(int **)(iVar3 + 0x1c),*(int *)(iVar3 + 0xa0),&uStack_80,0x10);
    }
  }
  iVar3 = unaff_EDI[4];
  if (*(int *)(iVar3 + 0xbc) != 0) {
    uStack_70 = *(undefined8 *)(DAT_017251ac + 0x1f8);
    uStack_68 = *(undefined8 *)(DAT_017251ac + 0x200);
    if ((*(int *)(iVar3 + 0x1c) != 0) && (*(int *)(iVar3 + 0xbc) != 0)) {
      (**(code **)(**(int **)(iVar3 + 0x1c) + 0x50))
                (*(int **)(iVar3 + 0x1c),*(int *)(iVar3 + 0xbc),&uStack_70,0x10);
    }
  }
  iVar3 = unaff_EDI[4];
  if (*(int *)(iVar3 + 0xa4) != 0) {
    uStack_60 = *(undefined8 *)(iVar1 + 0x68);
    uStack_58 = *(undefined8 *)(iVar1 + 0x70);
    if ((*(int *)(iVar3 + 0x1c) != 0) && (*(int *)(iVar3 + 0xa4) != 0)) {
      (**(code **)(**(int **)(iVar3 + 0x1c) + 0x50))
                (*(int **)(iVar3 + 0x1c),*(int *)(iVar3 + 0xa4),&uStack_60,0x10);
    }
  }
  if (*(int *)(DAT_017251ac + 0x3d8) == 3) {
    if (*(int *)(unaff_EDI[4] + 0x13c) != 0) {
      FUN_00781db0(auStack_50);
      FUN_0077c350();
    }
    if (*(int *)(unaff_EDI[4] + 0x140) != 0) {
      FUN_0077c300();
    }
    if (*(int *)(unaff_EDI[4] + 0x148) != 0) {
      FUN_0077c5a0(*(undefined4 *)(DAT_017251c4 + 0x194));
    }
  }
  FUN_0077c290();
  if (*(int *)(unaff_EDI[4] + 0x1c) != 0) {
    piVar2 = *(int **)(unaff_EDI[4] + 0x1c);
    (**(code **)(*piVar2 + 0x100))(piVar2,param_1);
  }
LAB_007f377e:
  return unaff_EDI[4];
}



============================================================
DISASSEMBLY
============================================================
007f3460 : PUSH EBP
007f3461 : MOV EBP,ESP
007f3463 : AND ESP,0xfffffff0
007f3466 : SUB ESP,0x88
007f346c : PUSH EBX
007f346d : PUSH ESI
007f346e : MOV ESI,EAX
007f3470 : MOV EAX,dword ptr [EDI + 0x10]
007f3473 : TEST EAX,EAX
007f3475 : JNZ 0x007f3481
007f3477 : XOR EAX,EAX
007f3479 : POP ESI
007f347a : POP EBX
007f347b : MOV ESP,EBP
007f347d : POP EBP
007f347e : RET 0x4
007f3481 : MOV ECX,dword ptr [EDI + 0x18]
007f3484 : CMP ECX,ESI
007f3486 : JNZ 0x007f34ce
007f3488 : MOV ESI,dword ptr [EBP + 0x8]
007f348b : CMP dword ptr [EDI + 0x14],ESI
007f348e : JZ 0x007f377e
007f3494 : CMP dword ptr [EAX + 0x1c],0x0
007f3498 : JZ 0x007f34a8
007f349a : MOV EAX,dword ptr [EAX + 0x1c]
007f349d : MOV ECX,dword ptr [EAX]
007f349f : MOV EDX,dword ptr [ECX + 0x108]
007f34a5 : PUSH EAX
007f34a6 : CALL EDX
007f34a8 : MOV EAX,dword ptr [EDI + 0x10]
007f34ab : CMP dword ptr [EAX + 0x1c],0x0
007f34af : JZ 0x007f34c0
007f34b1 : MOV EAX,dword ptr [EAX + 0x1c]
007f34b4 : MOV ECX,dword ptr [EAX]
007f34b6 : MOV EDX,dword ptr [ECX + 0x100]
007f34bc : PUSH ESI
007f34bd : PUSH EAX
007f34be : CALL EDX
007f34c0 : MOV dword ptr [EDI + 0x14],ESI
007f34c3 : MOV EAX,dword ptr [EDI + 0x10]
007f34c6 : POP ESI
007f34c7 : POP EBX
007f34c8 : MOV ESP,EBP
007f34ca : POP EBP
007f34cb : RET 0x4
007f34ce : TEST ECX,ECX
007f34d0 : JZ 0x007f3505
007f34d2 : CMP dword ptr [EAX + 0x1c],0x0
007f34d6 : JZ 0x007f34e6
007f34d8 : MOV EAX,dword ptr [EAX + 0x1c]
007f34db : MOV ECX,dword ptr [EAX]
007f34dd : MOV EDX,dword ptr [ECX + 0x108]
007f34e3 : PUSH EAX
007f34e4 : CALL EDX
007f34e6 : MOV EAX,dword ptr [EDI + 0x10]
007f34e9 : CALL 0x0077c620
007f34ee : MOV EAX,dword ptr [EDI + 0x10]
007f34f1 : CMP dword ptr [EAX + 0x1c],0x0
007f34f5 : JZ 0x007f3505
007f34f7 : MOV EAX,dword ptr [EAX + 0x1c]
007f34fa : MOV ECX,dword ptr [EAX]
007f34fc : MOV EDX,dword ptr [ECX + 0x10c]
007f3502 : PUSH EAX
007f3503 : CALL EDX
007f3505 : MOV EAX,dword ptr [EBP + 0x8]
007f3508 : MOV dword ptr [EDI + 0x14],EAX
007f350b : MOV EAX,dword ptr [EDI + 0x10]
007f350e : MOV dword ptr [EDI + 0x18],ESI
007f3511 : CMP ESI,0x2
007f3514 : JNZ 0x007f3523
007f3516 : CMP dword ptr [EAX + 0x1c],0x0
007f351a : JZ 0x007f353c
007f351c : PUSH 0xc24784
007f3521 : JMP 0x007f352e
007f3523 : CMP dword ptr [EAX + 0x1c],0x0
007f3527 : JZ 0x007f353c
007f3529 : PUSH 0xc24848
007f352e : MOV EAX,dword ptr [EAX + 0x1c]
007f3531 : MOV ECX,dword ptr [EAX]
007f3533 : MOV EDX,dword ptr [ECX + 0xe8]
007f3539 : PUSH EAX
007f353a : CALL EDX
007f353c : MOV EBX,dword ptr [0x017251c4]
007f3542 : ADD EBX,0x4
007f3545 : JZ 0x007f3477
007f354b : MOV EAX,dword ptr [EDI + 0x10]
007f354e : CMP dword ptr [EAX + 0x2c],0x0
007f3552 : JZ 0x007f358f
007f3554 : MOV EDX,dword ptr [EDI]
007f3556 : MOV EAX,dword ptr [EDX + 0x14]
007f3559 : MOV ECX,EDI
007f355b : CALL EAX
007f355d : MOVSS XMM0,dword ptr [EAX]
007f3561 : MOV ECX,dword ptr [EDI + 0x10]
007f3564 : MOVSS dword ptr [ESP + 0x14],XMM0
007f356a : MOVSS XMM0,dword ptr [EAX + 0x4]
007f356f : MOVSS dword ptr [ESP + 0x18],XMM0
007f3575 : MOVSS XMM0,dword ptr [EAX + 0x8]
007f357a : PUSH ECX
007f357b : LEA ECX,[ESP + 0x18]
007f357f : MOV ESI,0x2
007f3584 : MOVSS dword ptr [ESP + 0x20],XMM0
007f358a : CALL 0x0077c3c0
007f358f : MOV EDX,dword ptr [EDI + 0x10]
007f3592 : CMP dword ptr [EDX + 0x98],0x0
007f3599 : JZ 0x007f35ec
007f359b : MOVSS XMM3,dword ptr [0x00cdf0c0]
007f35a3 : MOVSS XMM0,dword ptr [EBX + 0x2c]
007f35a8 : MOVSS XMM1,dword ptr [EBX + 0x30]
007f35ad : MOVSS XMM2,dword ptr [EBX + 0x34]
007f35b2 : LEA EAX,[ESP + 0x14]
007f35b6 : PUSH EAX
007f35b7 : MOV ECX,EAX
007f35b9 : XORPS XMM0,XMM3
007f35bc : XORPS XMM1,XMM3
007f35bf : XORPS XMM2,XMM3
007f35c2 : PUSH ECX
007f35c3 : MOVSS dword ptr [ESP + 0x1c],XMM0
007f35c9 : MOVSS dword ptr [ESP + 0x20],XMM1
007f35cf : MOVSS dword ptr [ESP + 0x24],XMM2
007f35d5 : CALL 0x004ff722
007f35da : MOV EDX,dword ptr [EDI + 0x10]
007f35dd : PUSH EDX
007f35de : LEA ECX,[ESP + 0x18]
007f35e2 : MOV ESI,0x1d
007f35e7 : CALL 0x0077c3c0
007f35ec : MOV EAX,dword ptr [EDI + 0x10]
007f35ef : CMP dword ptr [EAX + 0xa0],0x0
007f35f6 : JZ 0x007f3631
007f35f8 : MOVQ XMM0,qword ptr [EBX + 0x44]
007f35fd : MOVQ qword ptr [ESP + 0x20],XMM0
007f3603 : MOVQ XMM0,qword ptr [EBX + 0x4c]
007f3608 : MOVQ qword ptr [ESP + 0x28],XMM0
007f360e : CMP dword ptr [EAX + 0x1c],0x0
007f3612 : JZ 0x007f3631
007f3614 : MOV ECX,dword ptr [EAX + 0xa0]
007f361a : TEST ECX,ECX
007f361c : JZ 0x007f3631
007f361e : MOV EAX,dword ptr [EAX + 0x1c]
007f3621 : MOV EDX,dword ptr [EAX]
007f3623 : PUSH 0x10
007f3625 : LEA ESI,[ESP + 0x24]
007f3629 : PUSH ESI
007f362a : PUSH ECX
007f362b : PUSH EAX
007f362c : MOV EAX,dword ptr [EDX + 0x50]
007f362f : CALL EAX
007f3631 : MOV EAX,dword ptr [EDI + 0x10]
007f3634 : CMP dword ptr [EAX + 0xbc],0x0
007f363b : JZ 0x007f3682
007f363d : MOV ECX,dword ptr [0x017251ac]
007f3643 : MOVQ XMM0,qword ptr [ECX + 0x1f8]
007f364b : MOVQ qword ptr [ESP + 0x30],XMM0
007f3651 : MOVQ XMM0,qword ptr [ECX + 0x200]
007f3659 : MOVQ qword ptr [ESP + 0x38],XMM0
007f365f : CMP dword ptr [EAX + 0x1c],0x0
007f3663 : JZ 0x007f3682
007f3665 : MOV ECX,dword ptr [EAX + 0xbc]
007f366b : TEST ECX,ECX
007f366d : JZ 0x007f3682
007f366f : MOV EAX,dword ptr [EAX + 0x1c]
007f3672 : MOV EDX,dword ptr [EAX]
007f3674 : PUSH 0x10
007f3676 : LEA ESI,[ESP + 0x34]
007f367a : PUSH ESI
007f367b : PUSH ECX
007f367c : PUSH EAX
007f367d : MOV EAX,dword ptr [EDX + 0x50]
007f3680 : CALL EAX
007f3682 : MOV EAX,dword ptr [EDI + 0x10]
007f3685 : CMP dword ptr [EAX + 0xa4],0x0
007f368c : JZ 0x007f36c7
007f368e : MOVQ XMM0,qword ptr [EBX + 0x64]
007f3693 : MOVQ qword ptr [ESP + 0x40],XMM0
007f3699 : MOVQ XMM0,qword ptr [EBX + 0x6c]
007f369e : MOVQ qword ptr [ESP + 0x48],XMM0
007f36a4 : CMP dword ptr [EAX + 0x1c],0x0
007f36a8 : JZ 0x007f36c7
007f36aa : MOV ECX,dword ptr [EAX + 0xa4]
007f36b0 : TEST ECX,ECX
007f36b2 : JZ 0x007f36c7
007f36b4 : MOV EAX,dword ptr [EAX + 0x1c]
007f36b7 : MOV EDX,dword ptr [EAX]
007f36b9 : PUSH 0x10
007f36bb : LEA ESI,[ESP + 0x44]
007f36bf : PUSH ESI
007f36c0 : PUSH ECX
007f36c1 : PUSH EAX
007f36c2 : MOV EAX,dword ptr [EDX + 0x50]
007f36c5 : CALL EAX
007f36c7 : MOV ECX,dword ptr [0x017251ac]
007f36cd : CMP dword ptr [ECX + 0x3d8],0x3
007f36d4 : JNZ 0x007f375b
007f36da : MOV EDX,dword ptr [EDI + 0x10]
007f36dd : CMP dword ptr [EDX + 0x13c],0x0
007f36e4 : JZ 0x007f370d
007f36e6 : MOV ECX,dword ptr [0x01725204]
007f36ec : MOV ECX,dword ptr [ECX + 0x270]
007f36f2 : LEA EAX,[ESP + 0x50]
007f36f6 : PUSH EAX
007f36f7 : CALL 0x00781db0
007f36fc : MOV EAX,dword ptr [EDI + 0x10]
007f36ff : LEA ESI,[ESP + 0x50]
007f3703 : MOV ECX,0x46
007f3708 : CALL 0x0077c350
007f370d : MOV EAX,dword ptr [EDI + 0x10]
007f3710 : CMP dword ptr [EAX + 0x140],0x0
007f3717 : JZ 0x007f3735
007f3719 : MOV EDX,dword ptr [0x01725204]
007f371f : MOV ECX,dword ptr [EDX + 0x270]
007f3725 : MOV ESI,dword ptr [ECX + 0x218]
007f372b : MOV ECX,0x47
007f3730 : CALL 0x0077c300
007f3735 : MOV ECX,dword ptr [EDI + 0x10]
007f3738 : CMP dword ptr [ECX + 0x148],0x0
007f373f : JZ 0x007f375b
007f3741 : MOV EDX,dword ptr [0x017251c4]
007f3747 : FLD float ptr [EDX + 0x194]
007f374d : PUSH ECX
007f374e : MOV EAX,0x49
007f3753 : FSTP float ptr [ESP]
007f3756 : CALL 0x0077c5a0
007f375b : MOV EAX,dword ptr [EDI + 0x10]
007f375e : CALL 0x0077c290
007f3763 : MOV EAX,dword ptr [EDI + 0x10]
007f3766 : CMP dword ptr [EAX + 0x1c],0x0
007f376a : JZ 0x007f377e
007f376c : MOV EAX,dword ptr [EAX + 0x1c]
007f376f : MOV EDX,dword ptr [EBP + 0x8]
007f3772 : MOV ECX,dword ptr [EAX]
007f3774 : PUSH EDX
007f3775 : PUSH EAX
007f3776 : MOV EAX,dword ptr [ECX + 0x100]
007f377c : CALL EAX
007f377e : MOV EAX,dword ptr [EDI + 0x10]
007f3781 : POP ESI
007f3782 : POP EBX
007f3783 : MOV ESP,EBP
007f3785 : POP EBP
007f3786 : RET 0x4
