PROGRAM  : Maestia.exe
FUNCTION : FUN_007603e0
ENTRY    : 007603e0
BODY     : [[007603e0, 00760469] [00760470, 00760629] [00760630, 007606a9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007603e0(uint param_1,int param_2)

{
  short *psVar1;
  uint uVar2;
  uint uVar3;
  int *in_ECX;
  undefined4 *puVar4;
  int iVar5;
  int iVar6;
  ushort uVar7;
  short sVar8;
  ushort uVar9;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3bfb9;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(param_1 + 0x80);
  local_20 = 0;
  local_28 = ".\\Resource\\AvaAniData.cpp";
  local_24 = 0x1ec;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  param_1 = 0;
  (**(code **)(*in_ECX + 0xc))(&param_1,2,1,uVar2);
  *(undefined2 *)(param_2 + 0xe0) = (undefined2)param_1;
  if (*(int *)(param_2 + 0xe4) != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  uVar2 = param_1 & 0xffff;
  local_18 = FUN_006f0760(uVar2 * 0x10,"",0,(DAT_01725270 >> 3 & 1) == 0);
  if (local_18 == 0) {
    local_14 = 0;
  }
  else {
    iVar5 = uVar2 - 1;
    local_14 = local_18;
    if (-1 < iVar5) {
      puVar4 = (undefined4 *)(local_18 + 0xc);
      do {
        *(undefined2 *)(puVar4 + -3) = 0;
        puVar4[-2] = 0;
        puVar4[-1] = 0;
        *puVar4 = 0;
        puVar4 = puVar4 + 4;
        iVar5 = iVar5 + -1;
      } while (-1 < iVar5);
    }
  }
  local_8 = local_8 & 0xffffff00;
  sVar8 = 0;
  uVar9 = 0;
  if ((short)param_1 != 0) {
    uVar7 = 0;
    do {
      psVar1 = (short *)((uint)uVar7 * 0x10 + local_14);
      (**(code **)(*in_ECX + 0xc))(psVar1,2,1);
      (**(code **)(*in_ECX + 0xc))(psVar1 + 2,4,3);
      uVar9 = (ushort)param_1;
      sVar8 = *psVar1;
      uVar7 = uVar7 + 1;
    } while (uVar7 < uVar9);
  }
  if (uVar9 != 1) {
    uVar2 = 1;
    if (1 < (int)(uVar9 - 1)) {
      uVar3 = 1;
      do {
        iVar5 = uVar3 * 0x10 + 4 + local_14;
        if (((*(float *)(local_14 + 4) != *(float *)(uVar3 * 0x10 + 4 + local_14)) ||
            (*(float *)(local_14 + 8) != *(float *)(iVar5 + 4))) ||
           (*(float *)(local_14 + 0xc) != *(float *)(iVar5 + 8))) {
          uVar9 = sVar8 + 1;
          local_18 = FUN_006f0760((uint)uVar9 * 0x10,"",0,(DAT_01725270 >> 3 & 1) == 0);
          if (local_18 == 0) {
            iVar5 = 0;
          }
          else {
            iVar6 = uVar9 - 1;
            iVar5 = local_18;
            if (-1 < iVar6) {
              puVar4 = (undefined4 *)(local_18 + 0xc);
              do {
                *(undefined2 *)(puVar4 + -3) = 0;
                puVar4[-2] = 0;
                puVar4[-1] = 0;
                *puVar4 = 0;
                puVar4 = puVar4 + 4;
                iVar6 = iVar6 + -1;
              } while (-1 < iVar6);
            }
          }
          local_8 = local_8 & 0xffffff00;
          *(int *)(param_2 + 0xe4) = iVar5;
          uVar7 = 0;
          *(ushort *)(param_2 + 0xe0) = uVar9;
          if (uVar9 != 0) {
            iVar5 = 0;
            do {
              *(ushort *)(iVar5 + *(int *)(param_2 + 0xe4)) = uVar7;
              FUN_004bd710(param_1);
              uVar7 = uVar7 + 1;
              iVar5 = iVar5 + 0x10;
            } while (uVar7 < uVar9);
          }
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        uVar2 = uVar2 + 1;
        uVar3 = uVar2 & 0xffff;
      } while ((int)uVar3 < (int)(uVar9 - 1));
    }
    *(undefined2 *)(param_2 + 0xe0) = 1;
  }
  *(int *)(param_2 + 0xe4) = local_14;
  local_8 = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007603e0 : PUSH EBP
007603e1 : MOV EBP,ESP
007603e3 : PUSH -0x1
007603e5 : PUSH 0xb3bfb9
007603ea : MOV EAX,FS:[0x0]
007603f0 : PUSH EAX
007603f1 : SUB ESP,0x1c
007603f4 : PUSH EBX
007603f5 : PUSH ESI
007603f6 : PUSH EDI
007603f7 : MOV EAX,[0x00d66fa0]
007603fc : XOR EAX,EBP
007603fe : PUSH EAX
007603ff : LEA EAX,[EBP + -0xc]
00760402 : MOV FS:[0x0],EAX
00760408 : MOV EDI,ECX
0076040a : MOV EAX,dword ptr [EBP + 0x8]
0076040d : LEA ECX,[EBP + -0x28]
00760410 : SUB EAX,-0x80
00760413 : XOR EBX,EBX
00760415 : PUSH ECX
00760416 : MOV dword ptr [EBP + -0x1c],EBX
00760419 : MOV dword ptr [EBP + -0x28],EAX
0076041c : MOV dword ptr [EBP + -0x24],0xc0c354
00760423 : MOV dword ptr [EBP + -0x20],0x1ec
0076042a : MOV dword ptr [EBP + -0x18],0x1
00760431 : CALL 0x006ef1a0
00760436 : MOV dword ptr [EBP + -0x4],EBX
00760439 : MOV EDX,dword ptr [EDI]
0076043b : MOV EDX,dword ptr [EDX + 0xc]
0076043e : PUSH 0x1
00760440 : PUSH 0x2
00760442 : LEA EAX,[EBP + 0x8]
00760445 : PUSH EAX
00760446 : MOV ECX,EDI
00760448 : MOV dword ptr [EBP + 0x8],EBX
0076044b : CALL EDX
0076044d : MOV ESI,dword ptr [EBP + 0xc]
00760450 : MOV ECX,dword ptr [ESI + 0xe4]
00760456 : MOV AX,word ptr [EBP + 0x8]
0076045a : MOV word ptr [ESI + 0xe0],AX
00760461 : CMP ECX,EBX
00760463 : JZ 0x00760470
00760465 : CALL 0x006f04e0
00760470 : MOVZX ESI,word ptr [EBP + 0x8]
00760474 : XOR ECX,ECX
00760476 : MOV EAX,ESI
00760478 : MOV EDX,0x10
0076047d : MUL EDX
0076047f : SETO CL
00760482 : MOV EDX,0x0
00760487 : NEG ECX
00760489 : OR EAX,ECX
0076048b : MOV ECX,dword ptr [0x01725270]
00760491 : SHR ECX,0x3
00760494 : AND ECX,0x1
00760497 : SETZ DL
0076049a : PUSH EDX
0076049b : PUSH EBX
0076049c : PUSH 0xbf1a4b
007604a1 : PUSH EAX
007604a2 : CALL 0x006f0760
007604a7 : ADD ESP,0x10
007604aa : MOV dword ptr [EBP + -0x14],EAX
007604ad : MOV byte ptr [EBP + -0x4],0x1
007604b1 : XORPS XMM0,XMM0
007604b4 : CMP EAX,EBX
007604b6 : JZ 0x007604e5
007604b8 : LEA EDX,[ESI + -0x1]
007604bb : CMP EDX,EBX
007604bd : JL 0x007604de
007604bf : LEA ECX,[EAX + 0xc]
007604c2 : XOR ESI,ESI
007604c4 : MOV word ptr [ECX + -0xc],SI
007604c8 : MOVSS dword ptr [ECX + -0x8],XMM0
007604cd : MOVSS dword ptr [ECX + -0x4],XMM0
007604d2 : MOVSS dword ptr [ECX],XMM0
007604d6 : ADD ECX,0x10
007604d9 : SUB EDX,0x1
007604dc : JNS 0x007604c2
007604de : MOV ECX,EAX
007604e0 : MOV dword ptr [EBP + -0x10],ECX
007604e3 : JMP 0x007604ea
007604e5 : MOV dword ptr [EBP + -0x10],EBX
007604e8 : MOV ECX,EBX
007604ea : MOV byte ptr [EBP + -0x4],0x0
007604ee : MOV EAX,dword ptr [EBP + 0x8]
007604f1 : XOR EDX,EDX
007604f3 : XOR ESI,ESI
007604f5 : CMP DX,AX
007604f8 : JNC 0x00760537
007604fa : LEA EBX,[EBX]
00760500 : MOV EDX,dword ptr [EDI]
00760502 : MOVZX EAX,BX
00760505 : SHL EAX,0x4
00760508 : PUSH 0x1
0076050a : LEA ESI,[EAX + ECX*0x1]
0076050d : MOV EAX,dword ptr [EDX + 0xc]
00760510 : PUSH 0x2
00760512 : PUSH ESI
00760513 : MOV ECX,EDI
00760515 : CALL EAX
00760517 : MOV EDX,dword ptr [EDI]
00760519 : MOV EDX,dword ptr [EDX + 0xc]
0076051c : PUSH 0x3
0076051e : PUSH 0x4
00760520 : LEA EAX,[ESI + 0x4]
00760523 : PUSH EAX
00760524 : MOV ECX,EDI
00760526 : CALL EDX
00760528 : MOV EAX,dword ptr [EBP + 0x8]
0076052b : MOVZX ESI,word ptr [ESI]
0076052e : MOV ECX,dword ptr [EBP + -0x10]
00760531 : INC EBX
00760532 : CMP BX,AX
00760535 : JC 0x00760500
00760537 : CMP AX,0x1
0076053b : JZ 0x0076059a
0076053d : MOVZX EAX,AX
00760540 : MOV EDI,0x1
00760545 : LEA EBX,[EAX + -0x1]
00760548 : CMP EBX,EDI
0076054a : JLE 0x0076058b
0076054c : MOVSS XMM0,dword ptr [ECX + 0x4]
00760551 : MOV EAX,EDI
00760553 : SHL EAX,0x4
00760556 : UCOMISS XMM0,dword ptr [EAX + ECX*0x1 + 0x4]
0076055b : LEA EDX,[EAX + ECX*0x1 + 0x4]
0076055f : LAHF
00760560 : TEST AH,0x44
00760563 : JP 0x007605d5
00760565 : MOVSS XMM1,dword ptr [ECX + 0x8]
0076056a : UCOMISS XMM1,dword ptr [EDX + 0x4]
0076056e : LAHF
0076056f : TEST AH,0x44
00760572 : JP 0x007605d5
00760574 : MOVSS XMM1,dword ptr [ECX + 0xc]
00760579 : UCOMISS XMM1,dword ptr [EDX + 0x8]
0076057d : LAHF
0076057e : TEST AH,0x44
00760581 : JP 0x007605d5
00760583 : INC EDI
00760584 : MOVZX EAX,DI
00760587 : CMP EAX,EBX
00760589 : JL 0x00760553
0076058b : MOV EDX,dword ptr [EBP + 0xc]
0076058e : MOV EAX,0x1
00760593 : MOV word ptr [EDX + 0xe0],AX
0076059a : MOV EAX,dword ptr [EBP + 0xc]
0076059d : MOV dword ptr [EAX + 0xe4],ECX
007605a3 : MOV dword ptr [EBP + -0x4],0xffffffff
007605aa : CMP dword ptr [EBP + -0x1c],0x0
007605ae : JZ 0x007605c1
007605b0 : MOV ECX,dword ptr [EBP + -0x28]
007605b3 : PUSH ECX
007605b4 : CALL dword ptr [0x00b8511c]
007605ba : MOV dword ptr [EBP + -0x1c],0x0
007605c1 : MOV ECX,dword ptr [EBP + -0xc]
007605c4 : MOV dword ptr FS:[0x0],ECX
007605cb : POP ECX
007605cc : POP EDI
007605cd : POP ESI
007605ce : POP EBX
007605cf : MOV ESP,EBP
007605d1 : POP EBP
007605d2 : RET 0x8
007605d5 : INC ESI
007605d6 : XOR ECX,ECX
007605d8 : MOVZX EDI,SI
007605db : MOV EAX,EDI
007605dd : MOV EDX,0x10
007605e2 : MUL EDX
007605e4 : SETO CL
007605e7 : MOV EDX,0x0
007605ec : NEG ECX
007605ee : OR EAX,ECX
007605f0 : MOV ECX,dword ptr [0x01725270]
007605f6 : SHR ECX,0x3
007605f9 : AND ECX,0x1
007605fc : SETZ DL
007605ff : PUSH EDX
00760600 : PUSH 0x0
00760602 : PUSH 0xbf1a4b
00760607 : PUSH EAX
00760608 : CALL 0x006f0760
0076060d : ADD ESP,0x10
00760610 : MOV dword ptr [EBP + -0x14],EAX
00760613 : MOV byte ptr [EBP + -0x4],0x2
00760617 : TEST EAX,EAX
00760619 : JZ 0x00760650
0076061b : LEA EDX,[EDI + -0x1]
0076061e : TEST EDX,EDX
00760620 : JL 0x0076064c
00760622 : XORPS XMM0,XMM0
00760625 : LEA ECX,[EAX + 0xc]
00760628 : JMP 0x00760630
00760630 : XOR EDI,EDI
00760632 : MOV word ptr [ECX + -0xc],DI
00760636 : MOVSS dword ptr [ECX + -0x8],XMM0
0076063b : MOVSS dword ptr [ECX + -0x4],XMM0
00760640 : MOVSS dword ptr [ECX],XMM0
00760644 : ADD ECX,0x10
00760647 : SUB EDX,0x1
0076064a : JNS 0x00760630
0076064c : MOV ECX,EAX
0076064e : JMP 0x00760652
00760650 : XOR ECX,ECX
00760652 : MOV byte ptr [EBP + -0x4],0x0
00760656 : MOV EAX,dword ptr [EBP + 0xc]
00760659 : MOV dword ptr [EAX + 0xe4],ECX
0076065f : XOR ECX,ECX
00760661 : XOR EDI,EDI
00760663 : MOV word ptr [EAX + 0xe0],SI
0076066a : CMP CX,SI
0076066d : JNC 0x007606a2
0076066f : XOR EBX,EBX
00760671 : JMP 0x00760676
00760673 : MOV EAX,dword ptr [EBP + 0xc]
00760676 : MOV EDX,dword ptr [EAX + 0xe4]
0076067c : MOV word ptr [EBX + EDX*0x1],DI
00760680 : MOV ECX,dword ptr [EBP + 0x8]
00760683 : MOV EDX,dword ptr [EAX + 0xe4]
00760689 : PUSH ECX
0076068a : MOV ECX,dword ptr [EBP + -0x10]
0076068d : LEA EDX,[EBX + EDX*0x1 + 0x4]
00760691 : CALL 0x004bd710
00760696 : INC EDI
00760697 : ADD ESP,0x4
0076069a : ADD EBX,0x10
0076069d : CMP DI,SI
007606a0 : JC 0x00760673
007606a2 : MOV ECX,dword ptr [EBP + -0x10]
007606a5 : CALL 0x006f04e0
