PROGRAM  : Maestia.exe
FUNCTION : FUN_005fcde0
ENTRY    : 005fcde0
BODY     : [[005fcde0, 005fd073]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005fcde0(int param_1,uint param_2)

{
  uint *puVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int in_ECX;
  uint uVar7;
  uint uVar8;
  uint local_2c;
  undefined4 local_28;
  uint local_20;
  int local_1c;
  uint local_18;
  uint *local_14;
  uint local_c;
  char local_4;
  
  iVar5 = *(int *)(param_1 + 4);
  iVar3 = *(int *)(iVar5 + 0x14);
  iVar4 = *(int *)(iVar5 + 0x10);
  *(undefined4 *)(iVar5 + 0x14) = 0;
  local_28 = *(undefined4 *)(param_1 + 4);
  local_20 = *(uint *)(iVar3 + 0x10);
  local_1c = *(int *)(iVar3 + 0x14);
  uVar6 = *(uint *)(iVar3 + 8);
  local_18 = *(uint *)(iVar3 + 0xc);
  local_14 = &local_2c;
  local_c = *(uint *)(*(int *)(*(int *)(in_ECX + 0x150) + (local_20 >> 4) * 4) +
                     (local_20 & 0xf) * 8);
  iVar5 = *(int *)(iVar3 + 4);
  local_4 = '\x01';
  local_2c = uVar6;
  do {
    uVar8 = local_20;
    if (uVar6 != local_c) {
      if (local_4 == '\0') {
        if ((iVar5 != iVar4) || (local_14[1] == 0)) {
          puVar1 = (uint *)(in_ECX + 0x154);
          uVar8 = *(uint *)(in_ECX + 0x154) >> 6;
          if (*(uint *)(in_ECX + 0x158) <= uVar8) {
            FUN_005fa3f0(uVar8);
          }
          puVar2 = (undefined4 *)
                   (*(int *)(*(int *)(in_ECX + 0x160) + uVar8 * 4) + (*puVar1 & 0x3f) * 0x18);
          *puVar2 = 0;
          puVar2[1] = 0xffffffff;
          puVar2[2] = 0xffffffff;
          puVar2[3] = 0xffffffff;
          puVar2[4] = iVar4;
          puVar2[5] = 0;
          *puVar1 = *puVar1 + 1;
          uVar8 = *(int *)(*(int *)(in_ECX + 0x160) + (*puVar1 - 1 >> 6) * 4) +
                  (*puVar1 - 1 & 0x3f) * 0x18;
          local_14[1] = uVar8;
          if (uVar6 != 0xffffffff) {
            FUN_005fcb20(uVar8,uVar6 | 0x40000000);
          }
          if (local_c != 0xffffffff) {
            FUN_005fcb20(uVar8,local_c & 0xbfffffff);
          }
        }
        uVar8 = local_20;
        if (local_1c == 0) {
          uVar6 = local_14[1];
          uVar7 = param_2 | 0x40000000;
          *(uint *)(param_1 + 4) = uVar6;
        }
        else {
          uVar6 = local_14[1];
          if (param_2 == 0xffffffff) goto LAB_005fcfae;
          FUN_005fcb20(uVar6,param_2 | 0x40000000);
          uVar7 = param_2 & 0xbfffffff;
        }
      }
      else {
        FUN_005fcb20(*(undefined4 *)(param_1 + 4),local_c);
        uVar6 = *(uint *)(param_1 + 4);
        if (param_2 == 0xffffffff) goto LAB_005fcfae;
        FUN_005fcb20(uVar6,param_2 | 0x40000000);
        uVar7 = param_2 & 0xbfffffff;
      }
      FUN_005fcb20(uVar6,uVar7);
    }
LAB_005fcfae:
    uVar6 = local_c;
    local_4 = '\0';
    if (local_1c == 0) {
      uVar6 = *(int *)(in_ECX + 0x134) - 1;
      if (iVar3 == *(int *)(*(int *)(in_ECX + 0x140) + (uVar6 >> 4) * 4) + (uVar6 & 0xf) * 0x1c) {
        if (*(uint *)(iVar3 + 0x10) < *(uint *)(in_ECX + 0x144)) {
          *(uint *)(in_ECX + 0x144) = *(uint *)(iVar3 + 0x10);
        }
        if (*(int *)(in_ECX + 0x134) != 0) {
          *(int *)(in_ECX + 0x134) = *(int *)(in_ECX + 0x134) + -1;
        }
      }
      return;
    }
    local_1c = local_1c + -1;
    local_20 = uVar8 + 1;
    local_14 = (uint *)(*(int *)(*(int *)(in_ECX + 0x150) + (uVar8 >> 4) * 4) + (uVar8 & 0xf) * 8);
    if (local_1c == 0) {
      local_c = local_18;
    }
    else {
      local_c = *(uint *)(*(int *)(*(int *)(in_ECX + 0x150) + (local_20 >> 4) * 4) +
                         (local_20 & 0xf) * 8);
    }
    if (local_14[1] == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = *(int *)(local_14[1] + 0x10);
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005fcde0 : SUB ESP,0x34
005fcde3 : PUSH EBX
005fcde4 : PUSH EBP
005fcde5 : PUSH ESI
005fcde6 : PUSH EDI
005fcde7 : MOV EDI,ECX
005fcde9 : MOV ECX,dword ptr [ESP + 0x48]
005fcded : MOV EAX,dword ptr [ECX + 0x4]
005fcdf0 : MOV EBX,dword ptr [EAX + 0x14]
005fcdf3 : MOV EDX,dword ptr [EAX + 0x10]
005fcdf6 : MOV dword ptr [EAX + 0x14],0x0
005fcdfd : MOV EAX,dword ptr [ECX + 0x4]
005fce00 : MOV ESI,dword ptr [EBX + 0x10]
005fce03 : MOV ECX,dword ptr [EBX + 0x14]
005fce06 : MOV EBP,dword ptr [EBX + 0x8]
005fce09 : MOV dword ptr [ESP + 0x1c],EAX
005fce0d : MOV dword ptr [ESP + 0x10],EDX
005fce11 : MOV EDX,dword ptr [EBX + 0xc]
005fce14 : MOV dword ptr [ESP + 0x28],ECX
005fce18 : LEA EAX,[ESP + 0x18]
005fce1c : MOV dword ptr [ESP + 0x30],EAX
005fce20 : MOV dword ptr [ESP + 0x2c],EDX
005fce24 : MOV EDX,dword ptr [EDI + 0x150]
005fce2a : MOV ECX,ESI
005fce2c : SHR ECX,0x4
005fce2f : MOV ECX,dword ptr [EDX + ECX*0x4]
005fce32 : MOV EAX,ESI
005fce34 : AND EAX,0xf
005fce37 : MOV EDX,dword ptr [ECX + EAX*0x8]
005fce3a : MOV EAX,dword ptr [EBX + 0x4]
005fce3d : MOV dword ptr [ESP + 0x14],EBX
005fce41 : MOV dword ptr [ESP + 0x18],EBP
005fce45 : MOV dword ptr [ESP + 0x24],ESI
005fce49 : MOV dword ptr [ESP + 0x38],EDX
005fce4d : MOV byte ptr [ESP + 0x40],0x1
005fce52 : MOV ECX,dword ptr [ESP + 0x38]
005fce56 : CMP EBP,ECX
005fce58 : JZ 0x005fcfae
005fce5e : CMP byte ptr [ESP + 0x40],0x0
005fce63 : JZ 0x005fcea4
005fce65 : MOV EBP,dword ptr [ESP + 0x48]
005fce69 : MOV EAX,dword ptr [EBP + 0x4]
005fce6c : PUSH ECX
005fce6d : PUSH EAX
005fce6e : MOV ECX,EDI
005fce70 : CALL 0x005fcb20
005fce75 : MOV EAX,dword ptr [ESP + 0x4c]
005fce79 : MOV EBP,dword ptr [EBP + 0x4]
005fce7c : CMP EAX,-0x1
005fce7f : JZ 0x005fcfae
005fce85 : OR EAX,0x40000000
005fce8a : PUSH EAX
005fce8b : PUSH EBP
005fce8c : MOV ECX,EDI
005fce8e : CALL 0x005fcb20
005fce93 : MOV ECX,dword ptr [ESP + 0x4c]
005fce97 : AND ECX,0xbfffffff
005fce9d : PUSH ECX
005fce9e : PUSH EBP
005fce9f : JMP 0x005fcfa7
005fcea4 : CMP EAX,dword ptr [ESP + 0x10]
005fcea8 : JNZ 0x005fceb8
005fceaa : MOV EDX,dword ptr [ESP + 0x30]
005fceae : CMP dword ptr [EDX + 0x4],0x0
005fceb2 : JNZ 0x005fcf5c
005fceb8 : MOV EBX,dword ptr [EDI + 0x154]
005fcebe : LEA ESI,[EDI + 0x154]
005fcec4 : SHR EBX,0x6
005fcec7 : CMP EBX,dword ptr [ESI + 0x4]
005fceca : JC 0x005fced4
005fcecc : PUSH EBX
005fcecd : MOV ECX,ESI
005fcecf : CALL 0x005fa3f0
005fced4 : MOV EAX,dword ptr [ESI]
005fced6 : MOV ECX,dword ptr [ESI + 0xc]
005fced9 : AND EAX,0x3f
005fcedc : LEA EDX,[EAX + EAX*0x2]
005fcedf : MOV EAX,dword ptr [ECX + EBX*0x4]
005fcee2 : LEA EAX,[EAX + EDX*0x8]
005fcee5 : XOR ECX,ECX
005fcee7 : MOV dword ptr [EAX],ECX
005fcee9 : OR ECX,0xffffffff
005fceec : MOV dword ptr [EAX + 0x4],ECX
005fceef : OR ECX,0xffffffff
005fcef2 : MOV dword ptr [EAX + 0x8],ECX
005fcef5 : OR ECX,0xffffffff
005fcef8 : MOV dword ptr [EAX + 0xc],ECX
005fcefb : MOV ECX,dword ptr [ESP + 0x10]
005fceff : MOV dword ptr [EAX + 0x10],ECX
005fcf02 : XOR ECX,ECX
005fcf04 : MOV dword ptr [EAX + 0x14],ECX
005fcf07 : INC dword ptr [ESI]
005fcf09 : MOV EAX,dword ptr [ESI]
005fcf0b : MOV ECX,dword ptr [ESI + 0xc]
005fcf0e : DEC EAX
005fcf0f : MOV EDX,EAX
005fcf11 : SHR EDX,0x6
005fcf14 : MOV ECX,dword ptr [ECX + EDX*0x4]
005fcf17 : MOV EDX,dword ptr [ESP + 0x30]
005fcf1b : AND EAX,0x3f
005fcf1e : LEA EAX,[EAX + EAX*0x2]
005fcf21 : LEA ESI,[ECX + EAX*0x8]
005fcf24 : MOV dword ptr [EDX + 0x4],ESI
005fcf27 : CMP EBP,-0x1
005fcf2a : JZ 0x005fcf3b
005fcf2c : OR EBP,0x40000000
005fcf32 : PUSH EBP
005fcf33 : PUSH ESI
005fcf34 : MOV ECX,EDI
005fcf36 : CALL 0x005fcb20
005fcf3b : CMP dword ptr [ESP + 0x38],-0x1
005fcf40 : JZ 0x005fcf54
005fcf42 : MOV EAX,dword ptr [ESP + 0x38]
005fcf46 : AND EAX,0xbfffffff
005fcf4b : PUSH EAX
005fcf4c : PUSH ESI
005fcf4d : MOV ECX,EDI
005fcf4f : CALL 0x005fcb20
005fcf54 : MOV EBX,dword ptr [ESP + 0x14]
005fcf58 : MOV ESI,dword ptr [ESP + 0x24]
005fcf5c : CMP dword ptr [ESP + 0x28],0x0
005fcf61 : MOV ECX,dword ptr [ESP + 0x30]
005fcf65 : JZ 0x005fcf91
005fcf67 : CMP dword ptr [ESP + 0x4c],-0x1
005fcf6c : MOV EBP,dword ptr [ECX + 0x4]
005fcf6f : JZ 0x005fcfae
005fcf71 : MOV EDX,dword ptr [ESP + 0x4c]
005fcf75 : OR EDX,0x40000000
005fcf7b : PUSH EDX
005fcf7c : PUSH EBP
005fcf7d : MOV ECX,EDI
005fcf7f : CALL 0x005fcb20
005fcf84 : MOV EAX,dword ptr [ESP + 0x4c]
005fcf88 : AND EAX,0xbfffffff
005fcf8d : PUSH EAX
005fcf8e : PUSH EBP
005fcf8f : JMP 0x005fcfa7
005fcf91 : MOV EAX,dword ptr [ECX + 0x4]
005fcf94 : MOV ECX,dword ptr [ESP + 0x4c]
005fcf98 : MOV EDX,dword ptr [ESP + 0x48]
005fcf9c : OR ECX,0x40000000
005fcfa2 : PUSH ECX
005fcfa3 : MOV dword ptr [EDX + 0x4],EAX
005fcfa6 : PUSH EAX
005fcfa7 : MOV ECX,EDI
005fcfa9 : CALL 0x005fcb20
005fcfae : CMP dword ptr [ESP + 0x28],0x0
005fcfb3 : MOV byte ptr [ESP + 0x40],0x0
005fcfb8 : JZ 0x005fd020
005fcfba : MOV ECX,dword ptr [EDI + 0x150]
005fcfc0 : DEC dword ptr [ESP + 0x28]
005fcfc4 : MOV EBP,dword ptr [ESP + 0x38]
005fcfc8 : MOV EAX,ESI
005fcfca : MOV EDX,EAX
005fcfcc : SHR EDX,0x4
005fcfcf : MOV EDX,dword ptr [ECX + EDX*0x4]
005fcfd2 : AND EAX,0xf
005fcfd5 : INC ESI
005fcfd6 : CMP dword ptr [ESP + 0x28],0x0
005fcfdb : LEA EAX,[EDX + EAX*0x8]
005fcfde : MOV dword ptr [ESP + 0x24],ESI
005fcfe2 : MOV dword ptr [ESP + 0x30],EAX
005fcfe6 : JZ 0x005fcffe
005fcfe8 : MOV EDX,ESI
005fcfea : SHR EDX,0x4
005fcfed : MOV ECX,dword ptr [ECX + EDX*0x4]
005fcff0 : MOV EAX,ESI
005fcff2 : AND EAX,0xf
005fcff5 : MOV EDX,dword ptr [ECX + EAX*0x8]
005fcff8 : MOV dword ptr [ESP + 0x38],EDX
005fcffc : JMP 0x005fd006
005fcffe : MOV EAX,dword ptr [ESP + 0x2c]
005fd002 : MOV dword ptr [ESP + 0x38],EAX
005fd006 : MOV ECX,dword ptr [ESP + 0x30]
005fd00a : MOV EAX,dword ptr [ECX + 0x4]
005fd00d : TEST EAX,EAX
005fd00f : JZ 0x005fd019
005fd011 : MOV EAX,dword ptr [EAX + 0x10]
005fd014 : JMP 0x005fce52
005fd019 : XOR EAX,EAX
005fd01b : JMP 0x005fce52
005fd020 : MOV EAX,dword ptr [EDI + 0x134]
005fd026 : MOV ECX,dword ptr [EDI + 0x140]
005fd02c : DEC EAX
005fd02d : MOV EDX,EAX
005fd02f : AND EAX,0xf
005fd032 : SHR EDX,0x4
005fd035 : MOV EDX,dword ptr [ECX + EDX*0x4]
005fd038 : LEA ESI,[EAX*0x8 + 0x0]
005fd03f : SUB ESI,EAX
005fd041 : LEA EAX,[EDX + ESI*0x4]
005fd044 : CMP EBX,EAX
005fd046 : JNZ 0x005fd06a
005fd048 : MOV EBX,dword ptr [EBX + 0x10]
005fd04b : CMP EBX,dword ptr [EDI + 0x144]
005fd051 : JNC 0x005fd059
005fd053 : MOV dword ptr [EDI + 0x144],EBX
005fd059 : MOV EAX,dword ptr [EDI + 0x134]
005fd05f : TEST EAX,EAX
005fd061 : JZ 0x005fd06a
005fd063 : DEC EAX
005fd064 : MOV dword ptr [EDI + 0x134],EAX
005fd06a : POP EDI
005fd06b : POP ESI
005fd06c : POP EBP
005fd06d : POP EBX
005fd06e : ADD ESP,0x34
005fd071 : RET 0x8
