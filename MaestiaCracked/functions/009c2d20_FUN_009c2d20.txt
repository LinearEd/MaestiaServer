PROGRAM  : Maestia.exe
FUNCTION : FUN_009c2d20
ENTRY    : 009c2d20
BODY     : [[009c2d20, 009c2f6a] [009c2f70, 009c3128]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c2d20(int param_1)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int in_ECX;
  uint uVar7;
  undefined1 local_64 [4];
  int local_60;
  uint local_5c;
  uint local_58;
  uint local_54;
  byte local_4d;
  undefined1 local_4c [56];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5bc5d;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  if ((DAT_00da93ec != 0) &&
     (piVar2 = (int *)FUN_00a1a840(*(undefined4 *)(param_1 + 4)), piVar2 != (int *)0x0)) {
    *(short *)(param_1 + 0x4c) = (short)in_ECX;
    if (in_ECX == 1) {
      FUN_009c1860(param_1);
      FUN_009c1640(param_1);
      FUN_009c1420(param_1);
      FUN_009c1200(param_1);
      FUN_009c0fe0(param_1);
      iVar3 = *DAT_00da9894;
      if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
        piVar2 = *(int **)(iVar3 + 0x114);
        iVar3 = FUN_00404750(&DAT_00c91008,*(undefined4 *)(param_1 + 0x80));
        local_8 = 0;
        if (*(uint *)(iVar3 + 0x18) < 8) {
          iVar3 = iVar3 + 4;
        }
        else {
          iVar3 = *(int *)(iVar3 + 4);
        }
        (**(code **)(*piVar2 + 4))(piVar2,param_1 + 8,"%s,%ls","SetCharStat",iVar3);
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      if ((*(short *)(param_1 + 0x4e) == 1) && (iVar3 = *DAT_00da9894, iVar3 != 0)) {
        piVar2 = *(int **)(iVar3 + 0x114);
        if (piVar2 != (int *)0x0) {
          (**(code **)(*piVar2 + 4))
                    (piVar2,param_1 + 8,"%s,%s","SetEquipAbilityChangeDefence",&DAT_00c91024);
          FUN_009c2b60();
          goto LAB_009c310b;
        }
        if ((iVar3 != 0) && (piVar2 = *(int **)(iVar3 + 0x114), piVar2 != (int *)0x0)) {
          (**(code **)(*piVar2 + 4))
                    (piVar2,param_1 + 8,"%s,%s","SetEquipAbilityChangeAttack",&DAT_00c91050);
        }
      }
      FUN_009c2b60();
    }
    else {
      FUN_00863f70(piVar2,local_4c);
      local_8 = 1;
      FUN_009c0300(param_1);
      FUN_009c0270(param_1);
      (**(code **)(*piVar2 + 0x47c))(uVar1);
      FUN_009c1c20(param_1);
      FUN_00406460(&DAT_00c91078);
      local_8._0_1_ = 2;
      local_5c = (uint)*(ushort *)(piVar2 + 0x1f);
      local_4d = 0;
      local_58 = 0;
      if ((local_5c == 1) || (local_5c == 2)) {
        if (DAT_01724814 != 0) {
          local_54 = -(uint)(*(int *)(DAT_01724814 + 0x28) != 0);
          while (local_54 != 0) {
            if (DAT_01724814 != 0) {
              local_60 = 0;
              FUN_00404160(&local_54,local_64,&local_60);
              if (local_60 != 0) {
                if (*(byte *)((int)piVar2 + 0x18ca) == 0xd) {
                  local_4d = 0;
                  local_58 = 0;
                  FUN_00406360(&DAT_00c910fc,0);
                }
                else if ((uint)*(byte *)(local_60 + 0x18) == *(byte *)((int)piVar2 + 0x18ca) + 1) {
                  local_4d = *(byte *)(local_60 + 0x70);
                  local_58 = *(uint *)(local_60 + 0x6c);
                  uVar5 = FUN_00824a20(DAT_0172491c,0);
                  local_8._0_1_ = 3;
                  FUN_00405eb0(uVar5,0,0xffffffff);
                  local_8._0_1_ = 2;
                  FUN_00406560();
                }
              }
            }
          }
        }
        FUN_009c02b0(param_1);
        iVar3 = 0;
        if (local_4d != 0) {
          local_54 = (uint)local_4d;
          uVar1 = (**(code **)(*piVar2 + 0x47c))();
          if (local_54 < uVar1) {
            iVar3 = (**(code **)(*piVar2 + 0x47c))();
            iVar3 = iVar3 - local_54;
          }
        }
        FUN_009c1b50(iVar3);
        local_5c = 0;
        uVar4 = (**(code **)(*piVar2 + 0x464))();
        uVar1 = local_58;
        uVar7 = local_5c;
        if (uVar4 < local_58) {
          iVar3 = (**(code **)(*piVar2 + 0x464))();
          uVar7 = uVar1 - iVar3;
        }
        FUN_009c1a80(uVar7);
        uVar5 = (**(code **)(*piVar2 + 0x464))();
        uVar6 = (**(code **)(*piVar2 + 0x46c))(uVar5);
        (**(code **)(*piVar2 + 0x468))(uVar6);
        FUN_009c03f0(uVar6,uVar5);
        uVar5 = (**(code **)(*piVar2 + 0x478))();
        uVar6 = (**(code **)(*piVar2 + 0x470))(uVar5);
        (**(code **)(*piVar2 + 0x474))(uVar6);
        FUN_009c0350(uVar6,uVar5);
      }
      else {
        FUN_008018d0(L"[AvaGuiCharacterBase::RefreshCharInfo] fault Allianceindex !!");
      }
      local_8 = CONCAT31(local_8._1_3_,1);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
LAB_009c310b:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009c2d20 : PUSH EBP
009c2d21 : MOV EBP,ESP
009c2d23 : PUSH -0x1
009c2d25 : PUSH 0xb5bc5d
009c2d2a : MOV EAX,FS:[0x0]
009c2d30 : PUSH EAX
009c2d31 : SUB ESP,0x70
009c2d34 : MOV EAX,[0x00d66fa0]
009c2d39 : XOR EAX,EBP
009c2d3b : MOV dword ptr [EBP + -0x10],EAX
009c2d3e : PUSH EBX
009c2d3f : PUSH ESI
009c2d40 : PUSH EDI
009c2d41 : PUSH EAX
009c2d42 : LEA EAX,[EBP + -0xc]
009c2d45 : MOV FS:[0x0],EAX
009c2d4b : MOV ESI,ECX
009c2d4d : MOV ECX,dword ptr [0x00da93ec]
009c2d53 : MOV EBX,dword ptr [EBP + 0x8]
009c2d56 : TEST ECX,ECX
009c2d58 : JZ 0x009c310b
009c2d5e : MOV EAX,dword ptr [EBX + 0x4]
009c2d61 : PUSH EAX
009c2d62 : CALL 0x00a1a840
009c2d67 : MOV EDI,EAX
009c2d69 : TEST EDI,EDI
009c2d6b : JZ 0x009c310b
009c2d71 : MOV word ptr [EBX + 0x4c],SI
009c2d75 : CMP ESI,0x1
009c2d78 : JNZ 0x009c2ec9
009c2d7e : MOV EDX,dword ptr [EDI + 0x16b4]
009c2d84 : MOV ECX,dword ptr [EDI + 0x16b0]
009c2d8a : PUSH EBX
009c2d8b : CALL 0x009c1860
009c2d90 : MOV EDX,dword ptr [EDI + 0x16bc]
009c2d96 : MOV ECX,dword ptr [EDI + 0x16b8]
009c2d9c : PUSH EBX
009c2d9d : CALL 0x009c1640
009c2da2 : MOV EDX,dword ptr [EDI + 0x16d4]
009c2da8 : MOV ECX,dword ptr [EDI + 0x16d0]
009c2dae : PUSH EBX
009c2daf : CALL 0x009c1420
009c2db4 : MOV EDX,dword ptr [EDI + 0x16c4]
009c2dba : MOV ECX,dword ptr [EDI + 0x16c0]
009c2dc0 : PUSH EBX
009c2dc1 : CALL 0x009c1200
009c2dc6 : MOV EDX,dword ptr [EDI + 0x16cc]
009c2dcc : MOV EDI,dword ptr [EDI + 0x16c8]
009c2dd2 : PUSH EBX
009c2dd3 : MOV ECX,EDI
009c2dd5 : CALL 0x009c0fe0
009c2dda : MOV ECX,dword ptr [0x00da9894]
009c2de0 : MOV EAX,dword ptr [ECX]
009c2de2 : TEST EAX,EAX
009c2de4 : JZ 0x009c2e4a
009c2de6 : CMP dword ptr [EAX + 0x114],0x0
009c2ded : JZ 0x009c2e4a
009c2def : MOV EDX,dword ptr [EBX + 0x80]
009c2df5 : MOV EDI,dword ptr [EAX + 0x114]
009c2dfb : PUSH EDX
009c2dfc : PUSH 0xc91008
009c2e01 : LEA ESI,[EBP + -0x48]
009c2e04 : CALL 0x00404750
009c2e09 : ADD ESP,0x8
009c2e0c : MOV dword ptr [EBP + -0x4],0x0
009c2e13 : CMP dword ptr [EAX + 0x18],0x8
009c2e17 : JC 0x009c2e1e
009c2e19 : MOV EAX,dword ptr [EAX + 0x4]
009c2e1c : JMP 0x009c2e21
009c2e1e : ADD EAX,0x4
009c2e21 : MOV ECX,dword ptr [EDI]
009c2e23 : PUSH EAX
009c2e24 : MOV EAX,dword ptr [ECX + 0x4]
009c2e27 : PUSH 0xc91010
009c2e2c : PUSH 0xc9101c
009c2e31 : LEA EDX,[EBX + 0x8]
009c2e34 : PUSH EDX
009c2e35 : PUSH EDI
009c2e36 : CALL EAX
009c2e38 : ADD ESP,0x14
009c2e3b : MOV dword ptr [EBP + -0x4],0xffffffff
009c2e42 : LEA ECX,[EBP + -0x48]
009c2e45 : CALL 0x00406560
009c2e4a : CMP word ptr [EBX + 0x4e],0x1
009c2e4f : JNZ 0x009c2ebd
009c2e51 : MOV ECX,dword ptr [0x00da9894]
009c2e57 : MOV EAX,dword ptr [ECX]
009c2e59 : TEST EAX,EAX
009c2e5b : JZ 0x009c2ebd
009c2e5d : MOV ECX,dword ptr [EAX + 0x114]
009c2e63 : TEST ECX,ECX
009c2e65 : JZ 0x009c2e91
009c2e67 : MOV EDX,dword ptr [ECX]
009c2e69 : PUSH 0xc91024
009c2e6e : PUSH 0xc91028
009c2e73 : PUSH 0xc91048
009c2e78 : LEA EAX,[EBX + 0x8]
009c2e7b : PUSH EAX
009c2e7c : PUSH ECX
009c2e7d : MOV ECX,dword ptr [EDX + 0x4]
009c2e80 : CALL ECX
009c2e82 : ADD ESP,0x14
009c2e85 : MOV EDI,EBX
009c2e87 : CALL 0x009c2b60
009c2e8c : JMP 0x009c310b
009c2e91 : TEST EAX,EAX
009c2e93 : JZ 0x009c2ebd
009c2e95 : MOV EAX,dword ptr [EAX + 0x114]
009c2e9b : TEST EAX,EAX
009c2e9d : JZ 0x009c2ebd
009c2e9f : MOV EDX,dword ptr [EAX]
009c2ea1 : MOV EDX,dword ptr [EDX + 0x4]
009c2ea4 : PUSH 0xc91050
009c2ea9 : PUSH 0xc91054
009c2eae : PUSH 0xc91070
009c2eb3 : LEA ECX,[EBX + 0x8]
009c2eb6 : PUSH ECX
009c2eb7 : PUSH EAX
009c2eb8 : CALL EDX
009c2eba : ADD ESP,0x14
009c2ebd : MOV EDI,EBX
009c2ebf : CALL 0x009c2b60
009c2ec4 : JMP 0x009c310b
009c2ec9 : LEA EAX,[EBP + -0x48]
009c2ecc : PUSH EAX
009c2ecd : PUSH EDI
009c2ece : CALL 0x00863f70
009c2ed3 : MOV dword ptr [EBP + -0x4],0x1
009c2eda : PUSH EBX
009c2edb : LEA ECX,[EBP + -0x48]
009c2ede : CALL 0x009c0300
009c2ee3 : MOVZX EDX,byte ptr [EDI + 0x18ca]
009c2eea : PUSH EBX
009c2eeb : CALL 0x009c0270
009c2ef0 : MOV EDX,dword ptr [EDI]
009c2ef2 : MOV EAX,dword ptr [EDX + 0x47c]
009c2ef8 : MOV ECX,EDI
009c2efa : CALL EAX
009c2efc : PUSH EBX
009c2efd : MOV ECX,EAX
009c2eff : CALL 0x009c1c20
009c2f04 : PUSH 0xc91078
009c2f09 : LEA ECX,[EBP + -0x2c]
009c2f0c : CALL 0x00406460
009c2f11 : MOV byte ptr [EBP + -0x4],0x2
009c2f15 : MOVZX EAX,word ptr [EDI + 0x7c]
009c2f19 : MOVZX ESI,AX
009c2f1c : MOV byte ptr [EBP + -0x49],0x0
009c2f20 : MOV dword ptr [EBP + -0x54],0x0
009c2f27 : MOV dword ptr [EBP + -0x58],ESI
009c2f2a : CMP ESI,0x1
009c2f2d : JZ 0x009c2f4c
009c2f2f : CMP ESI,0x2
009c2f32 : JZ 0x009c2f4c
009c2f34 : MOV ESI,dword ptr [0x00da98e8]
009c2f3a : PUSH 0xc91080
009c2f3f : CALL 0x008018d0
009c2f44 : ADD ESP,0x4
009c2f47 : JMP 0x009c30f0
009c2f4c : MOV EAX,[0x01724814]
009c2f51 : TEST EAX,EAX
009c2f53 : JZ 0x009c301b
009c2f59 : MOV ECX,dword ptr [EAX + 0x28]
009c2f5c : NEG ECX
009c2f5e : SBB ECX,ECX
009c2f60 : MOV dword ptr [EBP + -0x50],ECX
009c2f63 : JZ 0x009c301b
009c2f69 : JMP 0x009c2f75
009c2f70 : MOV EAX,[0x01724814]
009c2f75 : TEST EAX,EAX
009c2f77 : JZ 0x009c3011
009c2f7d : LEA ECX,[EBP + -0x5c]
009c2f80 : PUSH ECX
009c2f81 : LEA EDX,[EBP + -0x60]
009c2f84 : PUSH EDX
009c2f85 : LEA ECX,[EBP + -0x50]
009c2f88 : PUSH ECX
009c2f89 : MOV dword ptr [EBP + -0x5c],0x0
009c2f90 : CALL 0x00404160
009c2f95 : MOV EAX,dword ptr [EBP + -0x5c]
009c2f98 : TEST EAX,EAX
009c2f9a : JZ 0x009c3011
009c2f9c : MOV CL,byte ptr [EDI + 0x18ca]
009c2fa2 : CMP CL,0xd
009c2fa5 : JNZ 0x009c2fc3
009c2fa7 : PUSH 0x0
009c2fa9 : PUSH 0xc910fc
009c2fae : LEA ECX,[EBP + -0x2c]
009c2fb1 : MOV byte ptr [EBP + -0x49],0x0
009c2fb5 : MOV dword ptr [EBP + -0x54],0x0
009c2fbc : CALL 0x00406360
009c2fc1 : JMP 0x009c3011
009c2fc3 : MOVZX EDX,CL
009c2fc6 : MOVZX ECX,byte ptr [EAX + 0x18]
009c2fca : INC EDX
009c2fcb : CMP ECX,EDX
009c2fcd : JNZ 0x009c3011
009c2fcf : MOV DL,byte ptr [EAX + 0x70]
009c2fd2 : MOV ECX,dword ptr [EAX + 0x6c]
009c2fd5 : MOV byte ptr [EBP + -0x49],DL
009c2fd8 : LEA EDX,[ESI + ESI*0x4]
009c2fdb : LEA EDX,[EAX + EDX*0x8 + -0xf]
009c2fdf : MOV EAX,[0x0172491c]
009c2fe4 : PUSH 0x0
009c2fe6 : PUSH EAX
009c2fe7 : LEA ESI,[EBP + -0x7c]
009c2fea : MOV dword ptr [EBP + -0x54],ECX
009c2fed : CALL 0x00824a20
009c2ff2 : MOV byte ptr [EBP + -0x4],0x3
009c2ff6 : PUSH -0x1
009c2ff8 : PUSH 0x0
009c2ffa : PUSH EAX
009c2ffb : LEA ECX,[EBP + -0x2c]
009c2ffe : CALL 0x00405eb0
009c3003 : MOV byte ptr [EBP + -0x4],0x2
009c3007 : MOV ECX,ESI
009c3009 : CALL 0x00406560
009c300e : MOV ESI,dword ptr [EBP + -0x58]
009c3011 : CMP dword ptr [EBP + -0x50],0x0
009c3015 : JNZ 0x009c2f70
009c301b : PUSH EBX
009c301c : LEA ECX,[EBP + -0x2c]
009c301f : CALL 0x009c02b0
009c3024 : MOV AL,byte ptr [EBP + -0x49]
009c3027 : XOR ESI,ESI
009c3029 : TEST AL,AL
009c302b : JZ 0x009c3055
009c302d : MOV EDX,dword ptr [EDI]
009c302f : MOVZX ECX,AL
009c3032 : MOV EAX,dword ptr [EDX + 0x47c]
009c3038 : MOV dword ptr [EBP + -0x50],ECX
009c303b : MOV ECX,EDI
009c303d : CALL EAX
009c303f : CMP EAX,dword ptr [EBP + -0x50]
009c3042 : JBE 0x009c3055
009c3044 : MOV EDX,dword ptr [EDI]
009c3046 : MOV EAX,dword ptr [EDX + 0x47c]
009c304c : MOV ECX,EDI
009c304e : CALL EAX
009c3050 : MOV ESI,EAX
009c3052 : SUB ESI,dword ptr [EBP + -0x50]
009c3055 : PUSH ESI
009c3056 : MOV ECX,EBX
009c3058 : CALL 0x009c1b50
009c305d : MOV EDX,dword ptr [EDI]
009c305f : MOV EAX,dword ptr [EDX + 0x464]
009c3065 : MOV ECX,EDI
009c3067 : MOV dword ptr [EBP + -0x58],0x0
009c306e : CALL EAX
009c3070 : MOV ESI,dword ptr [EBP + -0x54]
009c3073 : CMP ESI,EAX
009c3075 : JBE 0x009c3087
009c3077 : MOV EDX,dword ptr [EDI]
009c3079 : MOV EAX,dword ptr [EDX + 0x464]
009c307f : MOV ECX,EDI
009c3081 : CALL EAX
009c3083 : SUB ESI,EAX
009c3085 : JMP 0x009c308a
009c3087 : MOV ESI,dword ptr [EBP + -0x58]
009c308a : PUSH ESI
009c308b : MOV ECX,EBX
009c308d : CALL 0x009c1a80
009c3092 : MOV EDX,dword ptr [EDI]
009c3094 : MOV EAX,dword ptr [EDX + 0x464]
009c309a : MOV ECX,EDI
009c309c : CALL EAX
009c309e : MOV EDX,dword ptr [EDI]
009c30a0 : PUSH EAX
009c30a1 : MOV EAX,dword ptr [EDX + 0x46c]
009c30a7 : MOV ECX,EDI
009c30a9 : CALL EAX
009c30ab : MOV EDX,dword ptr [EDI]
009c30ad : PUSH EAX
009c30ae : MOV EAX,dword ptr [EDX + 0x468]
009c30b4 : MOV ECX,EDI
009c30b6 : CALL EAX
009c30b8 : MOV EDX,EAX
009c30ba : MOV EAX,EBX
009c30bc : CALL 0x009c03f0
009c30c1 : MOV EDX,dword ptr [EDI]
009c30c3 : MOV EAX,dword ptr [EDX + 0x478]
009c30c9 : MOV ECX,EDI
009c30cb : CALL EAX
009c30cd : MOV EDX,dword ptr [EDI]
009c30cf : PUSH EAX
009c30d0 : MOV EAX,dword ptr [EDX + 0x470]
009c30d6 : MOV ECX,EDI
009c30d8 : CALL EAX
009c30da : MOV EDX,dword ptr [EDI]
009c30dc : PUSH EAX
009c30dd : MOV EAX,dword ptr [EDX + 0x474]
009c30e3 : MOV ECX,EDI
009c30e5 : CALL EAX
009c30e7 : MOV EDX,EAX
009c30e9 : MOV EAX,EBX
009c30eb : CALL 0x009c0350
009c30f0 : MOV byte ptr [EBP + -0x4],0x1
009c30f4 : LEA ECX,[EBP + -0x2c]
009c30f7 : CALL 0x00406560
009c30fc : MOV dword ptr [EBP + -0x4],0xffffffff
009c3103 : LEA ECX,[EBP + -0x48]
009c3106 : CALL 0x00406560
009c310b : MOV ECX,dword ptr [EBP + -0xc]
009c310e : MOV dword ptr FS:[0x0],ECX
009c3115 : POP ECX
009c3116 : POP EDI
009c3117 : POP ESI
009c3118 : POP EBX
009c3119 : MOV ECX,dword ptr [EBP + -0x10]
009c311c : XOR ECX,EBP
009c311e : CALL 0x00633e6b
009c3123 : MOV ESP,EBP
009c3125 : POP EBP
009c3126 : RET 0x4
