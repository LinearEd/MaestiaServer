PROGRAM  : Maestia.exe
FUNCTION : FUN_00576cb0
ENTRY    : 00576cb0
BODY     : [[00576cb0, 00576d87] [00576d90, 00576db8] [00576dc0, 00576e8b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00576cb0(undefined4 param_1,uint param_2)

{
  undefined4 *puVar1;
  int *piVar2;
  undefined4 *puVar3;
  int iVar4;
  int *in_ECX;
  int iVar5;
  int iVar6;
  float10 fVar7;
  longlong local_c;
  int *local_4;
  
  iVar5 = 0;
  if (param_2 == 0) {
    FUN_00576c50();
    return;
  }
  local_4 = in_ECX;
  if (param_2 < 8) {
    iVar6 = 8;
  }
  else {
    fVar7 = (float10)FUN_0063b270();
    local_c = (longlong)ROUND((float)fVar7 / 0.6931472 + 1.0);
    iVar6 = 1 << ((byte)local_c & 0x1f);
  }
  local_c._0_4_ = 0x143;
  puVar3 = (undefined4 *)FUN_00515d60(param_1,iVar6 * 0x1c + 8,&local_c);
  *puVar3 = 0;
  puVar3[1] = iVar6 + -1;
  if (iVar6 != 0) {
    iVar4 = 0;
    do {
      *(undefined4 *)(iVar4 + 8 + (int)puVar3) = 0xfffffffe;
      iVar4 = iVar4 + 0x1c;
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
  }
  if (*in_ECX != 0) {
    local_c._0_4_ = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar1 = (undefined4 *)(iVar5 + 8 + *in_ECX);
      if (*(int *)(iVar5 + 8 + *in_ECX) != -2) {
        FUN_0057a450(param_1,puVar1 + 1,*(undefined4 *)(puVar1[1] + 0xc));
        if (((*(byte *)(puVar1 + 6) & 2) == 0) && (puVar1[4] != 0)) {
          FUN_00503db0();
        }
        puVar1[4] = 0;
        if (((*(byte *)(puVar1 + 6) & 1) == 0) && (puVar1[5] != 0)) {
          FUN_00503db0();
        }
        puVar1[5] = 0;
        piVar2 = (int *)puVar1[3];
        if ((piVar2 != (int *)0x0) && (*piVar2 = *piVar2 + -1, *piVar2 < 1)) {
          FUN_0051d070();
          FUN_00515cf0(piVar2);
        }
        if (puVar1[2] != 0) {
          FUN_00503db0();
        }
        piVar2 = (int *)(puVar1[1] + 8);
        *piVar2 = *piVar2 + -1;
        if (*piVar2 == 0) {
          FUN_00525340();
        }
        *puVar1 = 0xfffffffe;
        in_ECX = local_4;
      }
      iVar5 = iVar5 + 0x1c;
      local_c._0_4_ = (int)local_c + -1;
    } while ((int)local_c != 0);
    FUN_00515cf0(*in_ECX);
  }
  *in_ECX = (int)puVar3;
  FUN_00576c50();
  return;
}



============================================================
DISASSEMBLY
============================================================
00576cb0 : SUB ESP,0xc
00576cb3 : MOV EAX,dword ptr [ESP + 0x14]
00576cb7 : PUSH EBX
00576cb8 : PUSH EDI
00576cb9 : XOR EBX,EBX
00576cbb : MOV EDI,ECX
00576cbd : MOV dword ptr [ESP + 0x10],EDI
00576cc1 : CMP EAX,EBX
00576cc3 : JNZ 0x00576cd2
00576cc5 : CALL 0x00576c50
00576cca : POP EDI
00576ccb : POP EBX
00576ccc : ADD ESP,0xc
00576ccf : RET 0x8
00576cd2 : PUSH ESI
00576cd3 : CMP EAX,0x8
00576cd6 : JNC 0x00576cdf
00576cd8 : MOV ESI,0x8
00576cdd : JMP 0x00576d44
00576cdf : DEC EAX
00576ce0 : MOV dword ptr [ESP + 0x20],EAX
00576ce4 : FILD dword ptr [ESP + 0x20]
00576ce8 : TEST EAX,EAX
00576cea : JGE 0x00576cf2
00576cec : FADD float ptr [0x00cdf0e0]
00576cf2 : CALL 0x0063b270
00576cf7 : FSTP float ptr [ESP + 0x20]
00576cfb : FLD float ptr [ESP + 0x20]
00576cff : MOV ESI,0x1
00576d04 : FDIV double ptr [0x00b85fe0]
00576d0a : FSTP float ptr [ESP + 0x20]
00576d0e : FLD float ptr [ESP + 0x20]
00576d12 : FADD double ptr [0x00cdf108]
00576d18 : FSTP float ptr [ESP + 0x20]
00576d1c : FLD float ptr [ESP + 0x20]
00576d20 : FNSTCW word ptr [ESP + 0x20]
00576d24 : MOVZX EAX,word ptr [ESP + 0x20]
00576d29 : OR EAX,0xc00
00576d2e : MOV dword ptr [ESP + 0xc],EAX
00576d32 : FLDCW word ptr [ESP + 0xc]
00576d36 : FISTP qword ptr [ESP + 0xc]
00576d3a : MOV CL,byte ptr [ESP + 0xc]
00576d3e : SHL ESI,CL
00576d40 : FLDCW word ptr [ESP + 0x20]
00576d44 : LEA ECX,[ESI*0x8 + 0x0]
00576d4b : LEA EAX,[ESP + 0xc]
00576d4f : PUSH EAX
00576d50 : MOV EAX,dword ptr [ESP + 0x20]
00576d54 : SUB ECX,ESI
00576d56 : LEA EDX,[ECX*0x4 + 0x8]
00576d5d : PUSH EDX
00576d5e : PUSH EAX
00576d5f : MOV dword ptr [ESP + 0x2c],EBX
00576d63 : MOV dword ptr [ESP + 0x18],0x143
00576d6b : CALL 0x00515d60
00576d70 : MOV dword ptr [ESP + 0x20],EAX
00576d74 : MOV dword ptr [EAX],EBX
00576d76 : MOV EDX,dword ptr [ESP + 0x20]
00576d7a : LEA ECX,[ESI + -0x1]
00576d7d : MOV dword ptr [EDX + 0x4],ECX
00576d80 : CMP ESI,EBX
00576d82 : JBE 0x00576da4
00576d84 : XOR EAX,EAX
00576d86 : JMP 0x00576d90
00576d90 : MOV ECX,dword ptr [ESP + 0x20]
00576d94 : MOV dword ptr [EAX + ECX*0x1 + 0x8],0xfffffffe
00576d9c : ADD EAX,0x1c
00576d9f : SUB ESI,0x1
00576da2 : JNZ 0x00576d90
00576da4 : MOV EAX,dword ptr [EDI]
00576da6 : CMP EAX,EBX
00576da8 : JZ 0x00576e6c
00576dae : MOV EAX,dword ptr [EAX + 0x4]
00576db1 : INC EAX
00576db2 : MOV dword ptr [ESP + 0xc],EAX
00576db6 : PUSH EBP
00576db7 : JMP 0x00576dc0
00576dc0 : MOV EDX,dword ptr [EDI]
00576dc2 : CMP dword ptr [EBX + EDX*0x1 + 0x8],-0x2
00576dc7 : LEA EBP,[EBX + EDX*0x1 + 0x8]
00576dcb : JZ 0x00576e55
00576dd1 : MOV EAX,dword ptr [EBP + 0x4]
00576dd4 : MOV ECX,dword ptr [EAX + 0xc]
00576dd7 : MOV EDX,dword ptr [ESP + 0x20]
00576ddb : LEA ESI,[EBP + 0x4]
00576dde : PUSH ECX
00576ddf : PUSH ESI
00576de0 : PUSH EDX
00576de1 : LEA ECX,[ESP + 0x30]
00576de5 : CALL 0x0057a450
00576dea : TEST byte ptr [ESI + 0x14],0x2
00576dee : JNZ 0x00576dfc
00576df0 : MOV ECX,dword ptr [ESI + 0xc]
00576df3 : TEST ECX,ECX
00576df5 : JZ 0x00576dfc
00576df7 : CALL 0x00503db0
00576dfc : XOR EDI,EDI
00576dfe : TEST byte ptr [ESI + 0x14],0x1
00576e02 : MOV dword ptr [ESI + 0xc],EDI
00576e05 : JNZ 0x00576e13
00576e07 : MOV ECX,dword ptr [ESI + 0x10]
00576e0a : CMP ECX,EDI
00576e0c : JZ 0x00576e13
00576e0e : CALL 0x00503db0
00576e13 : MOV dword ptr [ESI + 0x10],EDI
00576e16 : MOV EDI,dword ptr [ESI + 0x8]
00576e19 : TEST EDI,EDI
00576e1b : JZ 0x00576e31
00576e1d : DEC dword ptr [EDI]
00576e1f : CMP dword ptr [EDI],0x0
00576e22 : JG 0x00576e31
00576e24 : MOV ECX,EDI
00576e26 : CALL 0x0051d070
00576e2b : PUSH EDI
00576e2c : CALL 0x00515cf0
00576e31 : MOV ECX,dword ptr [ESI + 0x4]
00576e34 : TEST ECX,ECX
00576e36 : JZ 0x00576e3d
00576e38 : CALL 0x00503db0
00576e3d : MOV ECX,dword ptr [ESI]
00576e3f : ADD dword ptr [ECX + 0x8],-0x1
00576e43 : JNZ 0x00576e4a
00576e45 : CALL 0x00525340
00576e4a : MOV EDI,dword ptr [ESP + 0x18]
00576e4e : MOV dword ptr [EBP],0xfffffffe
00576e55 : ADD EBX,0x1c
00576e58 : SUB dword ptr [ESP + 0x10],0x1
00576e5d : JNZ 0x00576dc0
00576e63 : MOV EAX,dword ptr [EDI]
00576e65 : PUSH EAX
00576e66 : CALL 0x00515cf0
00576e6b : POP EBP
00576e6c : MOV ECX,dword ptr [ESP + 0x20]
00576e70 : MOV dword ptr [EDI],ECX
00576e72 : LEA ECX,[ESP + 0x20]
00576e76 : MOV dword ptr [ESP + 0x20],0x0
00576e7e : CALL 0x00576c50
00576e83 : POP ESI
00576e84 : POP EDI
00576e85 : POP EBX
00576e86 : ADD ESP,0xc
00576e89 : RET 0x8
