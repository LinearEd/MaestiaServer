PROGRAM  : Maestia.exe
FUNCTION : FUN_005d5bd0
ENTRY    : 005d5bd0
BODY     : [[005d5bd0, 005d5d2d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d5bd0(undefined4 param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  int *in_ECX;
  int iVar6;
  int iVar7;
  int iVar8;
  float10 fVar9;
  longlong local_c;
  int *local_4;
  
  iVar8 = 0;
  if (param_2 == 0) {
    FUN_005a2e40();
    return;
  }
  local_4 = in_ECX;
  if (param_2 < 8) {
    iVar7 = 8;
  }
  else {
    fVar9 = (float10)FUN_0063b270();
    local_c = (longlong)ROUND((float)fVar9 / 0.6931472 + 1.0);
    iVar7 = 1 << ((byte)local_c & 0x1f);
  }
  local_c = CONCAT44(local_c._4_4_,2);
  puVar4 = (undefined4 *)FUN_00515d60(param_1,iVar7 * 0xc + 8,&local_c);
  *puVar4 = 0;
  puVar4[1] = iVar7 + -1;
  if (iVar7 != 0) {
    iVar5 = 0;
    do {
      *(undefined4 *)(iVar5 + 8 + (int)puVar4) = 0xfffffffe;
      iVar5 = iVar5 + 0xc;
      iVar7 = iVar7 + -1;
    } while (iVar7 != 0);
  }
  if (*in_ECX != 0) {
    iVar7 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar3 = (undefined4 *)(iVar8 + 8 + *in_ECX);
      if (*(int *)(iVar8 + 8 + *in_ECX) != -2) {
        puVar1 = puVar3 + 2;
        iVar5 = 4;
        iVar6 = 0x1505;
        do {
          iVar2 = iVar5 + -1;
          iVar5 = iVar5 + -1;
          iVar6 = iVar6 * 0x1003f + (uint)*(byte *)(iVar2 + (int)puVar1);
        } while (iVar5 != 0);
        FUN_005d5480(param_1,puVar1,iVar6);
        *puVar3 = 0xfffffffe;
        in_ECX = local_4;
      }
      iVar8 = iVar8 + 0xc;
      iVar7 = iVar7 + -1;
    } while (iVar7 != 0);
    FUN_00515cf0(*in_ECX);
  }
  *in_ECX = (int)puVar4;
  return;
}



============================================================
DISASSEMBLY
============================================================
005d5bd0 : SUB ESP,0xc
005d5bd3 : MOV EAX,dword ptr [ESP + 0x14]
005d5bd7 : PUSH EBP
005d5bd8 : PUSH EDI
005d5bd9 : XOR EDI,EDI
005d5bdb : MOV EBP,ECX
005d5bdd : MOV dword ptr [ESP + 0x10],EBP
005d5be1 : CMP EAX,EDI
005d5be3 : JNZ 0x005d5bf2
005d5be5 : CALL 0x005a2e40
005d5bea : POP EDI
005d5beb : POP EBP
005d5bec : ADD ESP,0xc
005d5bef : RET 0x8
005d5bf2 : PUSH ESI
005d5bf3 : CMP EAX,0x8
005d5bf6 : JNC 0x005d5bff
005d5bf8 : MOV ESI,0x8
005d5bfd : JMP 0x005d5c64
005d5bff : DEC EAX
005d5c00 : MOV dword ptr [ESP + 0x20],EAX
005d5c04 : FILD dword ptr [ESP + 0x20]
005d5c08 : TEST EAX,EAX
005d5c0a : JGE 0x005d5c12
005d5c0c : FADD float ptr [0x00cdf0e0]
005d5c12 : CALL 0x0063b270
005d5c17 : FSTP float ptr [ESP + 0x20]
005d5c1b : FLD float ptr [ESP + 0x20]
005d5c1f : MOV ESI,0x1
005d5c24 : FDIV double ptr [0x00b85fe0]
005d5c2a : FSTP float ptr [ESP + 0x20]
005d5c2e : FLD float ptr [ESP + 0x20]
005d5c32 : FADD double ptr [0x00cdf108]
005d5c38 : FSTP float ptr [ESP + 0x20]
005d5c3c : FLD float ptr [ESP + 0x20]
005d5c40 : FNSTCW word ptr [ESP + 0x20]
005d5c44 : MOVZX EAX,word ptr [ESP + 0x20]
005d5c49 : OR EAX,0xc00
005d5c4e : MOV dword ptr [ESP + 0xc],EAX
005d5c52 : FLDCW word ptr [ESP + 0xc]
005d5c56 : FISTP qword ptr [ESP + 0xc]
005d5c5a : MOV CL,byte ptr [ESP + 0xc]
005d5c5e : SHL ESI,CL
005d5c60 : FLDCW word ptr [ESP + 0x20]
005d5c64 : LEA EAX,[ESP + 0xc]
005d5c68 : PUSH EAX
005d5c69 : MOV EAX,dword ptr [ESP + 0x20]
005d5c6d : LEA ECX,[ESI + ESI*0x2]
005d5c70 : LEA EDX,[ECX*0x4 + 0x8]
005d5c77 : PUSH EDX
005d5c78 : PUSH EAX
005d5c79 : MOV dword ptr [ESP + 0x2c],EDI
005d5c7d : MOV dword ptr [ESP + 0x18],0x2
005d5c85 : CALL 0x00515d60
005d5c8a : MOV dword ptr [ESP + 0x20],EAX
005d5c8e : MOV dword ptr [EAX],EDI
005d5c90 : MOV EDX,dword ptr [ESP + 0x20]
005d5c94 : LEA ECX,[ESI + -0x1]
005d5c97 : MOV dword ptr [EDX + 0x4],ECX
005d5c9a : CMP ESI,EDI
005d5c9c : JBE 0x005d5cb4
005d5c9e : XOR EAX,EAX
005d5ca0 : MOV ECX,dword ptr [ESP + 0x20]
005d5ca4 : MOV dword ptr [EAX + ECX*0x1 + 0x8],0xfffffffe
005d5cac : ADD EAX,0xc
005d5caf : SUB ESI,0x1
005d5cb2 : JNZ 0x005d5ca0
005d5cb4 : MOV EAX,dword ptr [EBP]
005d5cb7 : CMP EAX,EDI
005d5cb9 : JZ 0x005d5d1e
005d5cbb : MOV EAX,dword ptr [EAX + 0x4]
005d5cbe : PUSH EBX
005d5cbf : LEA EBX,[EAX + 0x1]
005d5cc2 : MOV EDX,dword ptr [EBP]
005d5cc5 : CMP dword ptr [EDI + EDX*0x1 + 0x8],-0x2
005d5cca : LEA ESI,[EDI + EDX*0x1 + 0x8]
005d5cce : JZ 0x005d5d0c
005d5cd0 : LEA EDX,[ESI + 0x8]
005d5cd3 : MOV EAX,0x4
005d5cd8 : MOV ECX,0x1505
005d5cdd : LEA ECX,[ECX]
005d5ce0 : MOVZX EBP,byte ptr [EAX + EDX*0x1 + -0x1]
005d5ce5 : IMUL ECX,ECX,0x1003f
005d5ceb : DEC EAX
005d5cec : ADD ECX,EBP
005d5cee : TEST EAX,EAX
005d5cf0 : JA 0x005d5ce0
005d5cf2 : MOV EAX,dword ptr [ESP + 0x20]
005d5cf6 : PUSH ECX
005d5cf7 : PUSH EDX
005d5cf8 : PUSH EAX
005d5cf9 : LEA ECX,[ESP + 0x30]
005d5cfd : CALL 0x005d5480
005d5d02 : MOV EBP,dword ptr [ESP + 0x18]
005d5d06 : MOV dword ptr [ESI],0xfffffffe
005d5d0c : ADD EDI,0xc
005d5d0f : SUB EBX,0x1
005d5d12 : JNZ 0x005d5cc2
005d5d14 : MOV ECX,dword ptr [EBP]
005d5d17 : PUSH ECX
005d5d18 : CALL 0x00515cf0
005d5d1d : POP EBX
005d5d1e : MOV EDX,dword ptr [ESP + 0x20]
005d5d22 : POP ESI
005d5d23 : POP EDI
005d5d24 : MOV dword ptr [EBP],EDX
005d5d27 : POP EBP
005d5d28 : ADD ESP,0xc
005d5d2b : RET 0x8
