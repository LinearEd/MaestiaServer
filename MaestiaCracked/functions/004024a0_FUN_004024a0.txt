PROGRAM  : Maestia.exe
FUNCTION : FUN_004024a0
ENTRY    : 004024a0
BODY     : [[004024a0, 00402607] [0040260e, 00402628] [0040266d, 00402705] [00402723, 004027a0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004024a0(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uStack_70;
  uint local_54;
  uint local_50;
  undefined1 local_4c [52];
  uint local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b79a74;
  local_10 = ExceptionList;
  uStack_70 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_70;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_54 = 0;
  }
  else {
    local_54 = (*(int *)(param_1 + 0xc) - iVar2) / 0x34;
  }
  iVar5 = *(int *)(param_1 + 8);
  iVar2 = (iVar5 - iVar2) / 0x34;
  local_18 = uStack_70;
  puVar1 = &uStack_70;
  if (iVar2 == 0x4ec4ec4) {
    iVar2 = FUN_00429be0();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_54 < uVar3) {
    if (0x4ec4ec4 - (local_54 >> 1) < local_54) {
      local_54 = 0;
    }
    else {
      local_54 = local_54 + (local_54 >> 1);
    }
    if (local_54 < uVar3) {
      local_54 = uVar3;
    }
    iVar2 = FUN_004036f0();
    local_8 = 0;
    FUN_00401f90(param_3);
    FUN_004036c0(*(undefined4 *)(param_1 + 4),param_2);
    FUN_004036c0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_00402480();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_54 * 0x34 + iVar2;
    *(int *)(param_1 + 8) =
         ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x34 + 1) * 0x34 + iVar2;
    *(int *)(param_1 + 4) = iVar2;
  }
  else {
    iVar5 = iVar5 - param_2;
    iVar2 = iVar5 >> 0x1f;
    if (iVar5 / 0x34 + iVar2 == iVar2) {
      FUN_004029d0(local_4c);
      local_8 = 2;
      FUN_004036c0(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00401f90(local_4c);
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x34;
      FUN_00403950(*(int *)(param_1 + 8) + -0x34);
    }
    else {
      FUN_004029d0(local_4c);
      local_8 = 5;
      uVar4 = FUN_004036c0(*(int *)(param_1 + 8) + -0x34,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar4;
      local_50 = param_3 & 0xffffff00;
      FUN_004039a0(param_2,local_50,local_50,local_50);
      FUN_00403950(param_2 + 0x34);
    }
    local_8 = 0xffffffff;
    FUN_004427d0(local_4c);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
004024a0 : PUSH EBP
004024a1 : MOV EBP,ESP
004024a3 : PUSH -0x1
004024a5 : PUSH 0xb79a74
004024aa : MOV EAX,FS:[0x0]
004024b0 : PUSH EAX
004024b1 : SUB ESP,0x50
004024b4 : MOV EAX,[0x00d66fa0]
004024b9 : XOR EAX,EBP
004024bb : MOV dword ptr [EBP + -0x14],EAX
004024be : PUSH EBX
004024bf : PUSH ESI
004024c0 : PUSH EDI
004024c1 : PUSH EAX
004024c2 : LEA EAX,[EBP + -0xc]
004024c5 : MOV FS:[0x0],EAX
004024cb : MOV dword ptr [EBP + -0x10],ESP
004024ce : MOV EBX,dword ptr [EBP + 0x8]
004024d1 : MOV dword ptr [EBP + -0x54],EBX
004024d4 : MOV EAX,dword ptr [EBP + 0x10]
004024d7 : MOV dword ptr [EBP + -0x4c],EAX
004024da : MOV ECX,dword ptr [EBX + 0x4]
004024dd : TEST ECX,ECX
004024df : JNZ 0x004024e5
004024e1 : XOR EDI,EDI
004024e3 : JMP 0x004024fd
004024e5 : MOV EDX,dword ptr [EBX + 0xc]
004024e8 : SUB EDX,ECX
004024ea : MOV EAX,0x4ec4ec4f
004024ef : IMUL EDX
004024f1 : SAR EDX,0x4
004024f4 : MOV EAX,EDX
004024f6 : SHR EAX,0x1f
004024f9 : ADD EAX,EDX
004024fb : MOV EDI,EAX
004024fd : MOV ESI,dword ptr [EBX + 0x8]
00402500 : MOV EDX,ESI
00402502 : SUB EDX,ECX
00402504 : MOV EAX,0x4ec4ec4f
00402509 : IMUL EDX
0040250b : SAR EDX,0x4
0040250e : MOV EAX,EDX
00402510 : SHR EAX,0x1f
00402513 : ADD EAX,EDX
00402515 : MOV ECX,0x4ec4ec4
0040251a : SUB ECX,EAX
0040251c : CMP ECX,0x1
0040251f : JNC 0x00402526
00402521 : CALL 0x00429be0
00402526 : INC EAX
00402527 : CMP EDI,EAX
00402529 : JNC 0x0040266d
0040252f : MOV ECX,EDI
00402531 : SHR ECX,0x1
00402533 : MOV EDX,0x4ec4ec4
00402538 : SUB EDX,ECX
0040253a : CMP EDX,EDI
0040253c : JNC 0x0040254a
0040253e : MOV dword ptr [EBP + -0x50],0x0
00402545 : MOV EDI,dword ptr [EBP + -0x50]
00402548 : JMP 0x0040254f
0040254a : ADD EDI,ECX
0040254c : MOV dword ptr [EBP + -0x50],EDI
0040254f : CMP EDI,EAX
00402551 : JNC 0x00402558
00402553 : MOV dword ptr [EBP + -0x50],EAX
00402556 : MOV EDI,EAX
00402558 : MOV ECX,EDI
0040255a : CALL 0x004036f0
0040255f : MOV ESI,EAX
00402561 : MOV dword ptr [EBP + -0x5c],ESI
00402564 : MOV ECX,dword ptr [EBP + 0xc]
00402567 : SUB ECX,dword ptr [EBX + 0x4]
0040256a : MOV EAX,0x4ec4ec4f
0040256f : IMUL ECX
00402571 : SAR EDX,0x4
00402574 : MOV EAX,EDX
00402576 : SHR EAX,0x1f
00402579 : ADD EAX,EDX
0040257b : MOV dword ptr [EBP + -0x54],EAX
0040257e : XOR ECX,ECX
00402580 : MOV dword ptr [EBP + -0x58],ECX
00402583 : MOV dword ptr [EBP + -0x4],ECX
00402586 : MOV ECX,dword ptr [EBP + -0x4c]
00402589 : PUSH ECX
0040258a : MOV EDI,EAX
0040258c : IMUL EDI,EDI,0x34
0040258f : ADD EDI,ESI
00402591 : MOV ESI,0x1
00402596 : CALL 0x00401f90
0040259b : MOV dword ptr [EBP + -0x58],ESI
0040259e : MOV EDX,dword ptr [EBP + 0xc]
004025a1 : PUSH EDX
004025a2 : MOV EAX,dword ptr [EBX + 0x4]
004025a5 : PUSH EAX
004025a6 : MOV EDI,dword ptr [EBP + -0x5c]
004025a9 : MOV EDX,EDI
004025ab : CALL 0x004036c0
004025b0 : MOV dword ptr [EBP + -0x58],0x2
004025b7 : MOV EDX,dword ptr [EBP + -0x54]
004025ba : INC EDX
004025bb : IMUL EDX,EDX,0x34
004025be : ADD EDX,EDI
004025c0 : MOV ECX,dword ptr [EBX + 0x8]
004025c3 : PUSH ECX
004025c4 : MOV EAX,dword ptr [EBP + 0xc]
004025c7 : PUSH EAX
004025c8 : CALL 0x004036c0
004025cd : MOV dword ptr [EBP + -0x4],0xffffffff
004025d4 : MOV ECX,dword ptr [EBX + 0x8]
004025d7 : MOV ESI,dword ptr [EBX + 0x4]
004025da : SUB ECX,ESI
004025dc : MOV EAX,0x4ec4ec4f
004025e1 : IMUL ECX
004025e3 : SAR EDX,0x4
004025e6 : MOV ECX,EDX
004025e8 : SHR ECX,0x1f
004025eb : LEA EDX,[EDX + ECX*0x1 + 0x1]
004025ef : MOV dword ptr [EBP + -0x4c],EDX
004025f2 : TEST ESI,ESI
004025f4 : JZ 0x0040260e
004025f6 : MOV EDI,dword ptr [EBX + 0x8]
004025f9 : MOV EAX,ESI
004025fb : CALL 0x00402480
00402600 : MOV ECX,dword ptr [EBX + 0x4]
00402603 : CALL 0x006f04e0
0040260e : MOV EAX,dword ptr [EBP + -0x50]
00402611 : IMUL EAX,EAX,0x34
00402614 : ADD EAX,EDI
00402616 : MOV dword ptr [EBX + 0xc],EAX
00402619 : IMUL EDX,EDX,0x34
0040261c : ADD EDX,EDI
0040261e : MOV dword ptr [EBX + 0x8],EDX
00402621 : MOV dword ptr [EBX + 0x4],EDI
00402624 : JMP 0x00402783
0040266d : SUB ESI,dword ptr [EBP + 0xc]
00402670 : MOV EAX,0x4ec4ec4f
00402675 : IMUL ESI
00402677 : SAR EDX,0x4
0040267a : MOV EAX,EDX
0040267c : SHR EAX,0x1f
0040267f : ADD EAX,EDX
00402681 : MOV EDI,dword ptr [EBP + -0x4c]
00402684 : CMP EAX,0x1
00402687 : JNC 0x00402723
0040268d : LEA ECX,[EBP + -0x48]
00402690 : PUSH ECX
00402691 : CALL 0x004029d0
00402696 : MOV dword ptr [EBP + -0x4],0x2
0040269d : MOV EAX,dword ptr [EBP + 0xc]
004026a0 : LEA EDX,[EAX + 0x34]
004026a3 : MOV ECX,dword ptr [EBX + 0x8]
004026a6 : PUSH ECX
004026a7 : PUSH EAX
004026a8 : CALL 0x004036c0
004026ad : MOV byte ptr [EBP + -0x4],0x3
004026b1 : MOV EDI,dword ptr [EBX + 0x8]
004026b4 : LEA EDX,[EBP + -0x48]
004026b7 : PUSH EDX
004026b8 : MOV ECX,EDI
004026ba : SUB ECX,dword ptr [EBP + 0xc]
004026bd : MOV EAX,0x4ec4ec4f
004026c2 : IMUL ECX
004026c4 : SAR EDX,0x4
004026c7 : MOV EAX,EDX
004026c9 : SHR EAX,0x1f
004026cc : ADD EAX,EDX
004026ce : MOV ESI,0x1
004026d3 : SUB ESI,EAX
004026d5 : CALL 0x00401f90
004026da : MOV dword ptr [EBP + -0x4],0x2
004026e1 : ADD dword ptr [EBX + 0x8],0x34
004026e5 : MOV EBX,dword ptr [EBX + 0x8]
004026e8 : LEA EAX,[EBX + -0x34]
004026eb : PUSH EAX
004026ec : LEA EDI,[EBP + -0x48]
004026ef : MOV EAX,dword ptr [EBP + 0xc]
004026f2 : CALL 0x00403950
004026f7 : ADD ESP,0x4
004026fa : MOV dword ptr [EBP + -0x4],0xffffffff
00402701 : MOV ECX,EDI
00402703 : PUSH ECX
00402704 : JMP 0x0040277e
00402723 : LEA EAX,[EBP + -0x48]
00402726 : PUSH EAX
00402727 : CALL 0x004029d0
0040272c : MOV dword ptr [EBP + -0x4],0x5
00402733 : MOV ESI,dword ptr [EBX + 0x8]
00402736 : LEA EDI,[ESI + -0x34]
00402739 : PUSH ESI
0040273a : PUSH EDI
0040273b : MOV EDX,ESI
0040273d : CALL 0x004036c0
00402742 : MOV dword ptr [EBX + 0x8],EAX
00402745 : MOV byte ptr [EBP + -0x4c],0x0
00402749 : MOV ECX,dword ptr [EBP + -0x4c]
0040274c : PUSH ECX
0040274d : MOV EDX,dword ptr [EBP + -0x4c]
00402750 : PUSH EDX
00402751 : MOV EAX,dword ptr [EBP + -0x4c]
00402754 : PUSH EAX
00402755 : MOV ECX,dword ptr [EBP + 0xc]
00402758 : PUSH ECX
00402759 : MOV EAX,ESI
0040275b : MOV ECX,EDI
0040275d : CALL 0x004039a0
00402762 : MOV EAX,dword ptr [EBP + 0xc]
00402765 : LEA EDX,[EAX + 0x34]
00402768 : PUSH EDX
00402769 : LEA EDI,[EBP + -0x48]
0040276c : CALL 0x00403950
00402771 : ADD ESP,0x14
00402774 : MOV dword ptr [EBP + -0x4],0xffffffff
0040277b : MOV EAX,EDI
0040277d : PUSH EAX
0040277e : CALL 0x004427d0
00402783 : MOV ECX,dword ptr [EBP + -0xc]
00402786 : MOV dword ptr FS:[0x0],ECX
0040278d : POP ECX
0040278e : POP EDI
0040278f : POP ESI
00402790 : POP EBX
00402791 : MOV ECX,dword ptr [EBP + -0x14]
00402794 : XOR ECX,EBP
00402796 : CALL 0x00633e6b
0040279b : MOV ESP,EBP
0040279d : POP EBP
0040279e : RET 0xc
