PROGRAM  : Maestia.exe
FUNCTION : FUN_005bd530
ENTRY    : 005bd530
BODY     : [[005bd530, 005bd5d4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bd530(GRefCountNTSImpl *param_1)

{
  byte *pbVar1;
  double dVar2;
  GRefCountNTSImpl *pGVar3;
  GRefCountNTSImpl *this;
  int iVar4;
  undefined4 *puVar5;
  
  pGVar3 = param_1;
  pbVar1 = *(byte **)(param_1 + 4);
  if (4 < *pbVar1) {
    FUN_00526400();
  }
  *pbVar1 = 3;
  pbVar1[4] = 0;
  pbVar1[5] = 0;
  pbVar1[6] = 0;
  pbVar1[7] = 0;
  pbVar1[8] = 0;
  pbVar1[9] = 0;
  pbVar1[10] = 0xf0;
  pbVar1[0xb] = 0xbf;
  if (*(int *)(pGVar3 + 0x18) != 0) {
    puVar5 = &param_1;
    FUN_005296a0(puVar5);
    FUN_00597b80(puVar5);
    this = param_1;
    if (param_1 != (GRefCountNTSImpl *)0x0) {
      iVar4 = (**(code **)(*(int *)param_1 + 0x9c))();
      if (iVar4 == 4) {
        param_1 = (GRefCountNTSImpl *)(**(code **)(*(int *)this + 0x160))();
        dVar2 = (double)(int)param_1;
        if ((int)param_1 < 0) {
          dVar2 = dVar2 + 4294967296.0;
        }
        pbVar1 = *(byte **)(pGVar3 + 4);
        if (4 < *pbVar1) {
          FUN_00526400();
        }
        *pbVar1 = 3;
        *(double *)(pbVar1 + 4) = dVar2;
      }
      GRefCountNTSImpl::Release(this);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bd530 : SUB ESP,0x8
005bd533 : PUSH EBX
005bd534 : MOV EBX,dword ptr [ESP + 0x10]
005bd538 : PUSH ESI
005bd539 : MOV ESI,dword ptr [EBX + 0x4]
005bd53c : CMP byte ptr [ESI],0x5
005bd53f : JC 0x005bd548
005bd541 : MOV ECX,ESI
005bd543 : CALL 0x00526400
005bd548 : FLD double ptr [0x00b86090]
005bd54e : MOV byte ptr [ESI],0x3
005bd551 : FSTP double ptr [ESI + 0x4]
005bd554 : MOV ECX,dword ptr [EBX + 0x18]
005bd557 : TEST ECX,ECX
005bd559 : JZ 0x005bd5cf
005bd55b : PUSH EDI
005bd55c : LEA EAX,[ESP + 0x18]
005bd560 : PUSH EAX
005bd561 : CALL 0x005296a0
005bd566 : MOV ECX,EAX
005bd568 : CALL 0x00597b80
005bd56d : MOV EDI,dword ptr [ESP + 0x18]
005bd571 : TEST EDI,EDI
005bd573 : JZ 0x005bd5ce
005bd575 : MOV EDX,dword ptr [EDI]
005bd577 : MOV EAX,dword ptr [EDX + 0x9c]
005bd57d : MOV ECX,EDI
005bd57f : CALL EAX
005bd581 : CMP EAX,0x4
005bd584 : JNZ 0x005bd5c1
005bd586 : MOV EDX,dword ptr [EDI]
005bd588 : MOV EAX,dword ptr [EDX + 0x160]
005bd58e : MOV ECX,EDI
005bd590 : CALL EAX
005bd592 : MOV dword ptr [ESP + 0x18],EAX
005bd596 : FILD dword ptr [ESP + 0x18]
005bd59a : TEST EAX,EAX
005bd59c : JGE 0x005bd5a4
005bd59e : FADD double ptr [0x00cdf6f8]
005bd5a4 : MOV ESI,dword ptr [EBX + 0x4]
005bd5a7 : FSTP double ptr [ESP + 0xc]
005bd5ab : CMP byte ptr [ESI],0x5
005bd5ae : JC 0x005bd5b7
005bd5b0 : MOV ECX,ESI
005bd5b2 : CALL 0x00526400
005bd5b7 : FLD double ptr [ESP + 0xc]
005bd5bb : MOV byte ptr [ESI],0x3
005bd5be : FSTP double ptr [ESI + 0x4]
005bd5c1 : MOV ECX,EDI
005bd5c3 : POP EDI
005bd5c4 : POP ESI
005bd5c5 : POP EBX
005bd5c6 : ADD ESP,0x8
005bd5c9 : JMP 0x004ff7c0
005bd5ce : POP EDI
005bd5cf : POP ESI
005bd5d0 : POP EBX
005bd5d1 : ADD ESP,0x8
005bd5d4 : RET
