PROGRAM  : Maestia.exe
FUNCTION : FUN_0069a030
ENTRY    : 0069a030
BODY     : [[0069a030, 0069a145]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0069a030(int *param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int in_EAX;
  uint *puVar6;
  int iVar7;
  uint uVar8;
  byte *pbVar9;
  uint uVar10;
  undefined4 *_Dst;
  byte *pbVar11;
  
  iVar7 = in_EAX;
  if (param_2 < in_EAX) {
    iVar7 = param_2;
    param_2 = in_EAX;
  }
  if (((iVar7 < param_2) && (-1 < iVar7)) && (param_2 < *param_1)) {
    iVar1 = param_1[2];
    uVar8 = *(uint *)(param_2 * 0x10 + iVar1);
    _Dst = (undefined4 *)(param_2 * 0x10 + iVar1);
    puVar6 = (uint *)(iVar7 * 0x10 + iVar1);
    uVar10 = *puVar6;
    if (uVar8 != 0) {
      if (uVar10 < uVar8) {
        iVar7 = FUN_00699d40(param_3);
        if (iVar7 != 0) {
          return iVar7;
        }
        for (; uVar10 < uVar8; uVar10 = uVar10 + 1) {
          FUN_00699dc0();
        }
      }
      pbVar9 = (byte *)_Dst[2];
      pbVar11 = (byte *)puVar6[2];
      for (uVar8 = uVar8 + 7 >> 3; uVar8 != 0; uVar8 = uVar8 - 1) {
        *pbVar11 = *pbVar11 | *pbVar9;
        pbVar11 = pbVar11 + 1;
        pbVar9 = pbVar9 + 1;
      }
    }
    *_Dst = 0;
    _Dst[3] = 0;
    iVar7 = (*param_1 - param_2) + -1;
    if (0 < iVar7) {
      uVar2 = _Dst[2];
      uVar3 = _Dst[3];
      uVar4 = *_Dst;
      uVar5 = _Dst[1];
      _memmove(_Dst,_Dst + 4,iVar7 * 0x10);
      _Dst[iVar7 * 4] = uVar4;
      _Dst[iVar7 * 4 + 1] = uVar5;
      _Dst[iVar7 * 4 + 2] = uVar2;
      _Dst[iVar7 * 4 + 3] = uVar3;
    }
    *param_1 = *param_1 + -1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0069a030 : SUB ESP,0x14
0069a033 : MOV EDX,dword ptr [ESP + 0x1c]
0069a037 : CMP EAX,EDX
0069a039 : MOV dword ptr [ESP],0x0
0069a040 : JLE 0x0069a04c
0069a042 : MOV ECX,EAX
0069a044 : MOV EAX,EDX
0069a046 : MOV dword ptr [ESP + 0x1c],ECX
0069a04a : MOV EDX,ECX
0069a04c : CMP EAX,EDX
0069a04e : PUSH EBX
0069a04f : PUSH EBP
0069a050 : PUSH ESI
0069a051 : PUSH EDI
0069a052 : JGE 0x0069a13a
0069a058 : TEST EAX,EAX
0069a05a : JL 0x0069a13a
0069a060 : MOV ECX,dword ptr [ESP + 0x28]
0069a064 : CMP EDX,dword ptr [ECX]
0069a066 : JGE 0x0069a13a
0069a06c : MOV ECX,dword ptr [ECX + 0x8]
0069a06f : MOV ESI,EDX
0069a071 : SHL ESI,0x4
0069a074 : MOV EBX,dword ptr [ESI + ECX*0x1]
0069a077 : SHL EAX,0x4
0069a07a : ADD ESI,ECX
0069a07c : ADD EAX,ECX
0069a07e : MOV EDI,EAX
0069a080 : MOV EBP,dword ptr [EDI]
0069a082 : TEST EBX,EBX
0069a084 : JBE 0x0069a0dd
0069a086 : CMP EBX,EBP
0069a088 : JBE 0x0069a0c2
0069a08a : MOV EAX,dword ptr [ESP + 0x30]
0069a08e : PUSH EAX
0069a08f : MOV EDX,EBX
0069a091 : CALL 0x00699d40
0069a096 : ADD ESP,0x4
0069a099 : MOV dword ptr [ESP + 0x10],EAX
0069a09d : TEST EAX,EAX
0069a09f : JNZ 0x0069a13e
0069a0a5 : CMP EBP,EBX
0069a0a7 : JNC 0x0069a0be
0069a0a9 : LEA ESP,[ESP]
0069a0b0 : MOV ECX,EBP
0069a0b2 : MOV EDX,EDI
0069a0b4 : CALL 0x00699dc0
0069a0b9 : INC EBP
0069a0ba : CMP EBP,EBX
0069a0bc : JC 0x0069a0b0
0069a0be : MOV EDX,dword ptr [ESP + 0x2c]
0069a0c2 : MOV ECX,dword ptr [ESI + 0x8]
0069a0c5 : MOV EDI,dword ptr [EDI + 0x8]
0069a0c8 : LEA EAX,[EBX + 0x7]
0069a0cb : SHR EAX,0x3
0069a0ce : TEST EAX,EAX
0069a0d0 : JBE 0x0069a0dd
0069a0d2 : MOV BL,byte ptr [ECX]
0069a0d4 : OR byte ptr [EDI],BL
0069a0d6 : INC EDI
0069a0d7 : INC ECX
0069a0d8 : SUB EAX,0x1
0069a0db : JNZ 0x0069a0d2
0069a0dd : MOV ECX,dword ptr [ESP + 0x28]
0069a0e1 : MOV dword ptr [ESI],0x0
0069a0e7 : MOV dword ptr [ESI + 0xc],0x0
0069a0ee : MOV EAX,dword ptr [ECX]
0069a0f0 : SUB EAX,EDX
0069a0f2 : DEC EAX
0069a0f3 : TEST EAX,EAX
0069a0f5 : JLE 0x0069a138
0069a0f7 : MOV ECX,dword ptr [ESI + 0x8]
0069a0fa : MOV EDX,dword ptr [ESI + 0xc]
0069a0fd : MOV EBX,dword ptr [ESI]
0069a0ff : MOV EBP,dword ptr [ESI + 0x4]
0069a102 : SHL EAX,0x4
0069a105 : MOV EDI,EAX
0069a107 : PUSH EDI
0069a108 : LEA EAX,[ESI + 0x10]
0069a10b : PUSH EAX
0069a10c : PUSH ESI
0069a10d : MOV dword ptr [ESP + 0x28],ECX
0069a111 : MOV dword ptr [ESP + 0x2c],EDX
0069a115 : CALL 0x00636880
0069a11a : MOV ECX,dword ptr [ESP + 0x28]
0069a11e : MOV EDX,dword ptr [ESP + 0x2c]
0069a122 : MOV dword ptr [EDI + ESI*0x1],EBX
0069a125 : MOV dword ptr [EDI + ESI*0x1 + 0x4],EBP
0069a129 : MOV dword ptr [EDI + ESI*0x1 + 0x8],ECX
0069a12d : MOV ECX,dword ptr [ESP + 0x34]
0069a131 : ADD ESP,0xc
0069a134 : MOV dword ptr [EDI + ESI*0x1 + 0xc],EDX
0069a138 : DEC dword ptr [ECX]
0069a13a : MOV EAX,dword ptr [ESP + 0x10]
0069a13e : POP EDI
0069a13f : POP ESI
0069a140 : POP EBP
0069a141 : POP EBX
0069a142 : ADD ESP,0x14
0069a145 : RET
