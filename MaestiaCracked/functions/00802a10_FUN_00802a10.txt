PROGRAM  : Maestia.exe
FUNCTION : FUN_00802a10
ENTRY    : 00802a10
BODY     : [[00802a10, 00802b87]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00802a72) */
/* WARNING: Removing unreachable block (ram,0x00802aa9) */

void FUN_00802a10(void)

{
  uint uVar1;
  undefined4 *in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b377ab;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_FUN_00cd4398;
  local_8 = 6;
  FUN_00802790(uVar1);
  if (in_ECX[0x27] != in_ECX[0x28]) {
    in_ECX[0x28] = in_ECX[0x27];
  }
  if (in_ECX[0x2b] != in_ECX[0x2c]) {
    in_ECX[0x2c] = in_ECX[0x2b];
  }
  DeleteCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x2e));
  local_8 = CONCAT31(local_8._1_3_,5);
  if (in_ECX[0x2b] != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x2b] = 0;
  in_ECX[0x2c] = 0;
  in_ECX[0x2d] = 0;
  local_8 = CONCAT31(local_8._1_3_,4);
  if (in_ECX[0x27] != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x27] = 0;
  in_ECX[0x28] = 0;
  in_ECX[0x29] = 0;
  local_8._0_1_ = 3;
  FUN_00458600(in_ECX + 0x1a);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (in_ECX[0x16] == 0) {
    in_ECX[0x16] = 0;
    in_ECX[0x17] = 0;
    in_ECX[0x18] = 0;
    local_8._0_1_ = 1;
    FUN_00458590(in_ECX + 0x12);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00458520(in_ECX + 0xf);
    local_8 = 0xffffffff;
    FUN_004bd6c0(in_ECX + 4);
    ExceptionList = local_10;
    return;
  }
  FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00802a10 : PUSH EBP
00802a11 : MOV EBP,ESP
00802a13 : PUSH -0x1
00802a15 : PUSH 0xb377ab
00802a1a : MOV EAX,FS:[0x0]
00802a20 : PUSH EAX
00802a21 : PUSH ECX
00802a22 : PUSH EBX
00802a23 : PUSH ESI
00802a24 : PUSH EDI
00802a25 : MOV EAX,[0x00d66fa0]
00802a2a : XOR EAX,EBP
00802a2c : PUSH EAX
00802a2d : LEA EAX,[EBP + -0xc]
00802a30 : MOV FS:[0x0],EAX
00802a36 : MOV ESI,ECX
00802a38 : MOV dword ptr [EBP + -0x10],ESI
00802a3b : MOV dword ptr [ESI],0xcd4398
00802a41 : MOV dword ptr [EBP + -0x4],0x6
00802a48 : CALL 0x00802790
00802a4d : MOV ECX,dword ptr [ESI + 0xa0]
00802a53 : MOV EDI,dword ptr [ESI + 0x9c]
00802a59 : CMP EDI,ECX
00802a5b : JZ 0x00802a84
00802a5d : MOV EAX,ECX
00802a5f : SUB EAX,ECX
00802a61 : SAR EAX,0x2
00802a64 : LEA EDX,[EAX*0x4 + 0x0]
00802a6b : LEA EBX,[EDX + EDI*0x1]
00802a6e : TEST EAX,EAX
00802a70 : JLE 0x00802a7e
00802a72 : PUSH EDX
00802a73 : PUSH ECX
00802a74 : PUSH EDX
00802a75 : PUSH EDI
00802a76 : CALL 0x00634101
00802a7b : ADD ESP,0x10
00802a7e : MOV dword ptr [ESI + 0xa0],EBX
00802a84 : MOV ECX,dword ptr [ESI + 0xb0]
00802a8a : MOV EDI,dword ptr [ESI + 0xac]
00802a90 : CMP EDI,ECX
00802a92 : JZ 0x00802abb
00802a94 : MOV EAX,ECX
00802a96 : SUB EAX,ECX
00802a98 : SAR EAX,0x2
00802a9b : LEA EDX,[EAX*0x4 + 0x0]
00802aa2 : LEA EBX,[EDX + EDI*0x1]
00802aa5 : TEST EAX,EAX
00802aa7 : JLE 0x00802ab5
00802aa9 : PUSH EDX
00802aaa : PUSH ECX
00802aab : PUSH EDX
00802aac : PUSH EDI
00802aad : CALL 0x00634101
00802ab2 : ADD ESP,0x10
00802ab5 : MOV dword ptr [ESI + 0xb0],EBX
00802abb : LEA EAX,[ESI + 0xb8]
00802ac1 : PUSH EAX
00802ac2 : CALL dword ptr [0x00b850fc]
00802ac8 : MOV byte ptr [EBP + -0x4],0x5
00802acc : MOV ECX,dword ptr [ESI + 0xac]
00802ad2 : XOR EBX,EBX
00802ad4 : CMP ECX,EBX
00802ad6 : JZ 0x00802add
00802ad8 : CALL 0x006f04e0
00802add : MOV dword ptr [ESI + 0xac],EBX
00802ae3 : MOV dword ptr [ESI + 0xb0],EBX
00802ae9 : MOV dword ptr [ESI + 0xb4],EBX
00802aef : MOV byte ptr [EBP + -0x4],0x4
00802af3 : MOV ECX,dword ptr [ESI + 0x9c]
00802af9 : CMP ECX,EBX
00802afb : JZ 0x00802b02
00802afd : CALL 0x006f04e0
00802b02 : MOV dword ptr [ESI + 0x9c],EBX
00802b08 : MOV dword ptr [ESI + 0xa0],EBX
00802b0e : MOV dword ptr [ESI + 0xa4],EBX
00802b14 : MOV byte ptr [EBP + -0x4],0x3
00802b18 : LEA ECX,[ESI + 0x68]
00802b1b : PUSH ECX
00802b1c : CALL 0x00458600
00802b21 : MOV byte ptr [EBP + -0x4],0x2
00802b25 : MOV EAX,dword ptr [ESI + 0x58]
00802b28 : CMP EAX,EBX
00802b2a : JZ 0x00802b43
00802b2c : MOV EDX,dword ptr [EBP + -0x10]
00802b2f : MOV EDI,dword ptr [ESI + 0x5c]
00802b32 : PUSH EDX
00802b33 : CALL 0x00405450
00802b38 : MOV ECX,dword ptr [ESI + 0x58]
00802b3b : ADD ESP,0x4
00802b3e : CALL 0x006f04e0
00802b43 : MOV dword ptr [ESI + 0x58],EBX
00802b46 : MOV dword ptr [ESI + 0x5c],EBX
00802b49 : MOV dword ptr [ESI + 0x60],EBX
00802b4c : MOV byte ptr [EBP + -0x4],0x1
00802b50 : LEA EAX,[ESI + 0x48]
00802b53 : PUSH EAX
00802b54 : CALL 0x00458590
00802b59 : MOV byte ptr [EBP + -0x4],0x0
00802b5d : LEA ECX,[ESI + 0x3c]
00802b60 : PUSH ECX
00802b61 : CALL 0x00458520
00802b66 : MOV dword ptr [EBP + -0x4],0xffffffff
00802b6d : ADD ESI,0x10
00802b70 : PUSH ESI
00802b71 : CALL 0x004bd6c0
00802b76 : MOV ECX,dword ptr [EBP + -0xc]
00802b79 : MOV dword ptr FS:[0x0],ECX
00802b80 : POP ECX
00802b81 : POP EDI
00802b82 : POP ESI
00802b83 : POP EBX
00802b84 : MOV ESP,EBP
00802b86 : POP EBP
00802b87 : RET
