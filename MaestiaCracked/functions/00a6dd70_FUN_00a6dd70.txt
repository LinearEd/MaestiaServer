PROGRAM  : Maestia.exe
FUNCTION : FUN_00a6dd70
ENTRY    : 00a6dd70
BODY     : [[00a6dd70, 00a6e071]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a6dd70(undefined1 *param_1,undefined4 *param_2,char param_3,undefined4 param_4,
                 undefined4 *param_5)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  undefined4 *puVar7;
  int in_ECX;
  int in_stack_00000024;
  uint in_stack_00000028;
  undefined1 *puVar8;
  LPCRITICAL_SECTION local_78;
  char *local_74;
  undefined4 local_70;
  int local_6c;
  undefined4 local_68;
  undefined1 local_64 [68];
  undefined4 local_20;
  undefined4 local_1c;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b50bdd;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_8 = 0;
  local_78 = (LPCRITICAL_SECTION)(in_ECX + 0x70);
  local_6c = 0;
  local_74 = ".\\Objects\\AvaEffectMgr.cpp";
  local_70 = 0x295;
  local_68 = 1;
  local_14 = uVar2;
  FUN_006ef1a0(&local_78);
  local_8._0_1_ = 1;
  if (param_3 == '\0') {
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_6c != 0) {
      LeaveCriticalSection(local_78);
      local_6c = 0;
    }
    piVar4 = (int *)FUN_00a6bd50(param_1);
    if (piVar4 == (int *)0x0) {
      puVar7 = param_5;
      if (in_stack_00000028 < 8) {
        puVar7 = &param_5;
      }
      iVar5 = FUN_00405b70(puVar7,uVar2);
      if ((iVar5 != 0) || (puVar8 = param_1, in_stack_00000024 != 0)) {
        puVar8 = (undefined1 *)&param_4;
      }
      piVar4 = (int *)FUN_00a6c6a0(in_ECX,param_1,puVar8);
      if (piVar4 != (int *)0x0) goto LAB_00a6dedf;
      piVar4 = (int *)FUN_00a6bc70(param_1);
      if (piVar4 == (int *)0x0) {
        puVar7 = param_5;
        if (in_stack_00000028 < 8) {
          puVar7 = &param_5;
        }
        iVar5 = FUN_00405b70(puVar7);
        if ((iVar5 != 0) || (puVar8 = param_1, in_stack_00000024 != 0)) {
          puVar8 = (undefined1 *)&param_4;
        }
        piVar4 = (int *)FUN_00a6d690(in_ECX,param_1,puVar8);
        if (piVar4 == (int *)0x0) {
          local_8 = 0xffffffff;
          if (7 < in_stack_00000028) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          goto LAB_00a6e04d;
        }
      }
      piVar6 = (int *)FUN_00a6b6b0();
      if (piVar6 != (int *)0x0) {
        cVar1 = FUN_00794bc0();
        if ((cVar1 != '\0') || (cVar1 = FUN_00794ba0(), cVar1 == '\0')) goto LAB_00a6e00f;
LAB_00a6df62:
        local_8 = 0xffffffff;
        FUN_00406560();
        goto LAB_00a6e054;
      }
      FUN_00a6c940();
      piVar6 = piVar4;
LAB_00a6e00f:
      FUN_00404130();
      if (*(char *)(in_ECX + 0x5c) != '\0') {
        (**(code **)(*piVar6 + 0xd0))();
      }
    }
    else {
LAB_00a6dedf:
      piVar6 = (int *)FUN_00a6b780();
      if (piVar6 == (int *)0x0) {
        FUN_00a6d020(in_ECX,1);
        piVar6 = piVar4;
      }
      else {
        cVar1 = (**(code **)(*piVar6 + 0x30))();
        if ((cVar1 == '\0') &&
           ((*(char *)((int)piVar6 + 5) != '\0' ||
            (cVar1 = (**(code **)(*piVar6 + 0x34))(), cVar1 != '\0')))) goto LAB_00a6df62;
      }
      iVar5 = piVar6[5];
      *(undefined4 *)(iVar5 + 0x68) = *param_2;
      *(undefined4 *)(iVar5 + 0x6c) = param_2[1];
      *(undefined4 *)(iVar5 + 0x70) = param_2[2];
      *(undefined1 *)(iVar5 + 0x5d) = 1;
      *(undefined1 *)(iVar5 + 0x134) = 1;
      *(undefined1 *)(iVar5 + 0x5c) = 1;
      if (*(int **)(iVar5 + 0x2c) != (int *)0x0) {
        (**(code **)(**(int **)(iVar5 + 0x2c) + 0x60))(iVar5);
      }
      if (*(char *)(in_ECX + 0x5c) != '\0') {
        (**(code **)(*piVar6 + 0x20))();
      }
    }
    local_8 = 0xffffffff;
    if (7 < in_stack_00000028) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    FUN_00441900(local_64);
    local_8._0_1_ = 2;
    local_64[0] = 0;
    FUN_00405eb0(param_1,0,0xffffffff);
    FUN_00405eb0(&param_4,0,0xffffffff);
    iVar5 = *(int *)(in_ECX + 0x48);
    local_20 = 0;
    local_1c = 0;
    iVar3 = FUN_00441160(iVar5,*(undefined4 *)(iVar5 + 4),local_64);
    FUN_00441220();
    *(int *)(iVar5 + 4) = iVar3;
    **(int **)(iVar3 + 4) = iVar3;
    local_8._0_1_ = 1;
    FUN_004403d0(local_64);
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_6c != 0) {
      LeaveCriticalSection(local_78);
      local_6c = 0;
    }
    local_8 = 0xffffffff;
    if (7 < in_stack_00000028) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
LAB_00a6e04d:
  local_8 = 0xffffffff;
  in_stack_00000024 = 0;
  param_5 = (undefined4 *)((uint)param_5 & 0xffff0000);
  in_stack_00000028 = 7;
LAB_00a6e054:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a6dd70 : PUSH EBP
00a6dd71 : MOV EBP,ESP
00a6dd73 : PUSH -0x1
00a6dd75 : PUSH 0xb50bdd
00a6dd7a : MOV EAX,FS:[0x0]
00a6dd80 : PUSH EAX
00a6dd81 : SUB ESP,0x6c
00a6dd84 : MOV EAX,[0x00d66fa0]
00a6dd89 : XOR EAX,EBP
00a6dd8b : MOV dword ptr [EBP + -0x10],EAX
00a6dd8e : PUSH EBX
00a6dd8f : PUSH ESI
00a6dd90 : PUSH EDI
00a6dd91 : PUSH EAX
00a6dd92 : LEA EAX,[EBP + -0xc]
00a6dd95 : MOV FS:[0x0],EAX
00a6dd9b : MOV EBX,dword ptr [EBP + 0x8]
00a6dd9e : MOV ESI,ECX
00a6dda0 : XOR EDI,EDI
00a6dda2 : MOV dword ptr [EBP + -0x4],EDI
00a6dda5 : LEA ECX,[EBP + -0x74]
00a6dda8 : LEA EAX,[ESI + 0x70]
00a6ddab : PUSH ECX
00a6ddac : MOV dword ptr [EBP + -0x68],EDI
00a6ddaf : MOV dword ptr [EBP + -0x74],EAX
00a6ddb2 : MOV dword ptr [EBP + -0x70],0xc43ea0
00a6ddb9 : MOV dword ptr [EBP + -0x6c],0x295
00a6ddc0 : MOV dword ptr [EBP + -0x64],0x1
00a6ddc7 : CALL 0x006ef1a0
00a6ddcc : MOV byte ptr [EBP + -0x4],0x1
00a6ddd0 : CMP byte ptr [EBP + 0x10],0x0
00a6ddd4 : JZ 0x00a6de79
00a6ddda : LEA EDX,[EBP + -0x60]
00a6dddd : PUSH EDX
00a6ddde : CALL 0x00441900
00a6dde3 : MOV byte ptr [EBP + -0x4],0x2
00a6dde7 : PUSH -0x1
00a6dde9 : PUSH EDI
00a6ddea : PUSH EBX
00a6ddeb : LEA ECX,[EBP + -0x54]
00a6ddee : MOV byte ptr [EBP + -0x60],0x0
00a6ddf2 : CALL 0x00405eb0
00a6ddf7 : PUSH -0x1
00a6ddf9 : PUSH EDI
00a6ddfa : LEA EAX,[EBP + 0x14]
00a6ddfd : PUSH EAX
00a6ddfe : LEA ECX,[EBP + -0x38]
00a6de01 : CALL 0x00405eb0
00a6de06 : LEA EBX,[ESI + 0x44]
00a6de09 : MOV ESI,dword ptr [EBX + 0x4]
00a6de0c : LEA ECX,[EBP + -0x60]
00a6de0f : MOV dword ptr [EBP + -0x1c],EDI
00a6de12 : MOV dword ptr [EBP + -0x18],EDI
00a6de15 : MOV EDX,dword ptr [ESI + 0x4]
00a6de18 : PUSH ECX
00a6de19 : PUSH EDX
00a6de1a : PUSH ESI
00a6de1b : CALL 0x00441160
00a6de20 : MOV ECX,EBX
00a6de22 : MOV EDI,EAX
00a6de24 : CALL 0x00441220
00a6de29 : MOV dword ptr [ESI + 0x4],EDI
00a6de2c : MOV EAX,dword ptr [EDI + 0x4]
00a6de2f : MOV dword ptr [EAX],EDI
00a6de31 : MOV byte ptr [EBP + -0x4],0x1
00a6de35 : LEA EAX,[EBP + -0x60]
00a6de38 : PUSH EAX
00a6de39 : CALL 0x004403d0
00a6de3e : MOV byte ptr [EBP + -0x4],0x0
00a6de42 : XOR ESI,ESI
00a6de44 : CMP dword ptr [EBP + -0x68],ESI
00a6de47 : JZ 0x00a6de56
00a6de49 : MOV ECX,dword ptr [EBP + -0x74]
00a6de4c : PUSH ECX
00a6de4d : CALL dword ptr [0x00b8511c]
00a6de53 : MOV dword ptr [EBP + -0x68],ESI
00a6de56 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6de5d : CMP dword ptr [EBP + 0x2c],0x8
00a6de61 : JC 0x00a6de6b
00a6de63 : MOV ECX,dword ptr [EBP + 0x18]
00a6de66 : CALL 0x006f04e0
00a6de6b : XOR EDX,EDX
00a6de6d : MOV dword ptr [EBP + 0x28],ESI
00a6de70 : MOV word ptr [EBP + 0x18],DX
00a6de74 : JMP 0x00a6e04d
00a6de79 : MOV byte ptr [EBP + -0x4],0x0
00a6de7d : CMP dword ptr [EBP + -0x68],EDI
00a6de80 : JZ 0x00a6de8f
00a6de82 : MOV EAX,dword ptr [EBP + -0x74]
00a6de85 : PUSH EAX
00a6de86 : CALL dword ptr [0x00b8511c]
00a6de8c : MOV dword ptr [EBP + -0x68],EDI
00a6de8f : PUSH EBX
00a6de90 : MOV ECX,ESI
00a6de92 : CALL 0x00a6bd50
00a6de97 : MOV EDI,EAX
00a6de99 : TEST EDI,EDI
00a6de9b : JNZ 0x00a6dedf
00a6de9d : CMP dword ptr [EBP + 0x2c],0x8
00a6dea1 : MOV EAX,dword ptr [EBP + 0x18]
00a6dea4 : JNC 0x00a6dea9
00a6dea6 : LEA EAX,[EBP + 0x18]
00a6dea9 : PUSH EAX
00a6deaa : XOR EDX,EDX
00a6deac : MOV ECX,0xc43ebc
00a6deb1 : CALL 0x00405b70
00a6deb6 : ADD ESP,0x4
00a6deb9 : TEST EAX,EAX
00a6debb : JNZ 0x00a6deca
00a6debd : CMP dword ptr [EBP + 0x28],EAX
00a6dec0 : SETNZ AL
00a6dec3 : TEST EAX,EAX
00a6dec5 : JNZ 0x00a6deca
00a6dec7 : PUSH EBX
00a6dec8 : JMP 0x00a6dece
00a6deca : LEA ECX,[EBP + 0x14]
00a6decd : PUSH ECX
00a6dece : PUSH EBX
00a6decf : PUSH ESI
00a6ded0 : CALL 0x00a6c6a0
00a6ded5 : MOV EDI,EAX
00a6ded7 : TEST EDI,EDI
00a6ded9 : JZ 0x00a6df76
00a6dedf : MOV ECX,ESI
00a6dee1 : CALL 0x00a6b780
00a6dee6 : MOV EBX,EAX
00a6dee8 : TEST EBX,EBX
00a6deea : JNZ 0x00a6df43
00a6deec : PUSH 0x1
00a6deee : PUSH ESI
00a6deef : CALL 0x00a6d020
00a6def4 : MOV EBX,EDI
00a6def6 : MOV EAX,dword ptr [EBX + 0x14]
00a6def9 : MOV ECX,dword ptr [EBP + 0xc]
00a6defc : FLD float ptr [ECX]
00a6defe : FSTP float ptr [EAX + 0x68]
00a6df01 : FLD float ptr [ECX + 0x4]
00a6df04 : FSTP float ptr [EAX + 0x6c]
00a6df07 : FLD float ptr [ECX + 0x8]
00a6df0a : FSTP float ptr [EAX + 0x70]
00a6df0d : MOV ECX,dword ptr [EAX + 0x2c]
00a6df10 : MOV byte ptr [EAX + 0x5d],0x1
00a6df14 : MOV byte ptr [EAX + 0x134],0x1
00a6df1b : MOV byte ptr [EAX + 0x5c],0x1
00a6df1f : TEST ECX,ECX
00a6df21 : JZ 0x00a6df2b
00a6df23 : MOV EDX,dword ptr [ECX]
00a6df25 : PUSH EAX
00a6df26 : MOV EAX,dword ptr [EDX + 0x60]
00a6df29 : CALL EAX
00a6df2b : CMP byte ptr [ESI + 0x5c],0x0
00a6df2f : JZ 0x00a6e02b
00a6df35 : MOV EDX,dword ptr [EBX]
00a6df37 : MOV EAX,dword ptr [EDX + 0x20]
00a6df3a : MOV ECX,EBX
00a6df3c : CALL EAX
00a6df3e : JMP 0x00a6e02b
00a6df43 : MOV EDX,dword ptr [EBX]
00a6df45 : MOV EAX,dword ptr [EDX + 0x30]
00a6df48 : MOV ECX,EBX
00a6df4a : CALL EAX
00a6df4c : TEST AL,AL
00a6df4e : JNZ 0x00a6def6
00a6df50 : CMP byte ptr [EBX + 0x5],AL
00a6df53 : JNZ 0x00a6df62
00a6df55 : MOV EDX,dword ptr [EBX]
00a6df57 : MOV EAX,dword ptr [EDX + 0x34]
00a6df5a : MOV ECX,EBX
00a6df5c : CALL EAX
00a6df5e : TEST AL,AL
00a6df60 : JZ 0x00a6def6
00a6df62 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6df69 : LEA ECX,[EBP + 0x14]
00a6df6c : CALL 0x00406560
00a6df71 : JMP 0x00a6e054
00a6df76 : PUSH EBX
00a6df77 : MOV ECX,ESI
00a6df79 : CALL 0x00a6bc70
00a6df7e : MOV EDI,EAX
00a6df80 : TEST EDI,EDI
00a6df82 : JNZ 0x00a6dfdf
00a6df84 : CMP dword ptr [EBP + 0x2c],0x8
00a6df88 : MOV EAX,dword ptr [EBP + 0x18]
00a6df8b : JNC 0x00a6df90
00a6df8d : LEA EAX,[EBP + 0x18]
00a6df90 : PUSH EAX
00a6df91 : XOR EDX,EDX
00a6df93 : MOV ECX,0xc43ec0
00a6df98 : CALL 0x00405b70
00a6df9d : ADD ESP,0x4
00a6dfa0 : TEST EAX,EAX
00a6dfa2 : JNZ 0x00a6dfb1
00a6dfa4 : CMP dword ptr [EBP + 0x28],EAX
00a6dfa7 : SETNZ AL
00a6dfaa : TEST EAX,EAX
00a6dfac : JNZ 0x00a6dfb1
00a6dfae : PUSH EBX
00a6dfaf : JMP 0x00a6dfb5
00a6dfb1 : LEA ECX,[EBP + 0x14]
00a6dfb4 : PUSH ECX
00a6dfb5 : PUSH EBX
00a6dfb6 : PUSH ESI
00a6dfb7 : CALL 0x00a6d690
00a6dfbc : MOV EDI,EAX
00a6dfbe : TEST EDI,EDI
00a6dfc0 : JNZ 0x00a6dfdf
00a6dfc2 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6dfc9 : CMP dword ptr [EBP + 0x2c],0x8
00a6dfcd : JC 0x00a6dfd7
00a6dfcf : MOV ECX,dword ptr [EBP + 0x18]
00a6dfd2 : CALL 0x006f04e0
00a6dfd7 : XOR EDX,EDX
00a6dfd9 : MOV word ptr [EBP + 0x18],DX
00a6dfdd : JMP 0x00a6e046
00a6dfdf : MOV ECX,ESI
00a6dfe1 : CALL 0x00a6b6b0
00a6dfe6 : MOV EBX,EAX
00a6dfe8 : TEST EBX,EBX
00a6dfea : JNZ 0x00a6dff5
00a6dfec : CALL 0x00a6c940
00a6dff1 : MOV EBX,EDI
00a6dff3 : JMP 0x00a6e00f
00a6dff5 : MOV EAX,EBX
00a6dff7 : CALL 0x00794bc0
00a6dffc : TEST AL,AL
00a6dffe : JNZ 0x00a6e00f
00a6e000 : MOV EAX,EBX
00a6e002 : CALL 0x00794ba0
00a6e007 : TEST AL,AL
00a6e009 : JNZ 0x00a6df62
00a6e00f : MOV ECX,dword ptr [EBP + 0xc]
00a6e012 : MOV EAX,EBX
00a6e014 : CALL 0x00404130
00a6e019 : CMP byte ptr [ESI + 0x5c],0x0
00a6e01d : JZ 0x00a6e02b
00a6e01f : MOV EAX,dword ptr [EBX]
00a6e021 : MOV EDX,dword ptr [EAX + 0xd0]
00a6e027 : MOV ECX,EBX
00a6e029 : CALL EDX
00a6e02b : MOV dword ptr [EBP + -0x4],0xffffffff
00a6e032 : CMP dword ptr [EBP + 0x2c],0x8
00a6e036 : JC 0x00a6e040
00a6e038 : MOV ECX,dword ptr [EBP + 0x18]
00a6e03b : CALL 0x006f04e0
00a6e040 : XOR EAX,EAX
00a6e042 : MOV word ptr [EBP + 0x18],AX
00a6e046 : MOV dword ptr [EBP + 0x28],0x0
00a6e04d : MOV dword ptr [EBP + 0x2c],0x7
00a6e054 : MOV ECX,dword ptr [EBP + -0xc]
00a6e057 : MOV dword ptr FS:[0x0],ECX
00a6e05e : POP ECX
00a6e05f : POP EDI
00a6e060 : POP ESI
00a6e061 : POP EBX
00a6e062 : MOV ECX,dword ptr [EBP + -0x10]
00a6e065 : XOR ECX,EBP
00a6e067 : CALL 0x00633e6b
00a6e06c : MOV ESP,EBP
00a6e06e : POP EBP
00a6e06f : RET 0x28
