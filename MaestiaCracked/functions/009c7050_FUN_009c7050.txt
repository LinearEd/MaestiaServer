PROGRAM  : Maestia.exe
FUNCTION : FUN_009c7050
ENTRY    : 009c7050
BODY     : [[009c7050, 009c70bd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c7050(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int unaff_ESI;
  
  if (*(char *)(unaff_ESI + 0x32) != '\0') {
    if ((*DAT_00da9894 != 0) &&
       (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
      (**(code **)*puVar1)("EnchantClose");
    }
    piVar2 = *(int **)(*(int *)(unaff_ESI + 4) + 0x128);
    if (*(char *)((int)piVar2 + 0x59) == '\0') {
      piVar2[0x13] = 0;
      piVar2[0x10] = -1;
      *(undefined2 *)(piVar2 + 0x11) = 0xffff;
      *(undefined2 *)((int)piVar2 + 0x46) = 0xffff;
      *(undefined2 *)(piVar2 + 0x12) = 0xffff;
    }
    (**(code **)(*piVar2 + 0x20))();
    FUN_008f76d0();
  }
  *(undefined4 *)(unaff_ESI + 100) = 0xffffffff;
  return;
}



============================================================
DISASSEMBLY
============================================================
009c7050 : PUSH ECX
009c7051 : CMP byte ptr [ESI + 0x32],0x0
009c7055 : JZ 0x009c70b5
009c7057 : MOV EAX,[0x00da9894]
009c705c : MOV EAX,dword ptr [EAX]
009c705e : TEST EAX,EAX
009c7060 : JZ 0x009c7077
009c7062 : MOV ECX,dword ptr [EAX + 0x114]
009c7068 : TEST ECX,ECX
009c706a : JZ 0x009c7077
009c706c : MOV EDX,dword ptr [ECX]
009c706e : MOV EAX,dword ptr [EDX]
009c7070 : PUSH 0xc9238c
009c7075 : CALL EAX
009c7077 : MOV ECX,dword ptr [ESI + 0x4]
009c707a : MOV ECX,dword ptr [ECX + 0x128]
009c7080 : CMP byte ptr [ECX + 0x59],0x0
009c7084 : JNZ 0x009c70a7
009c7086 : MOV EDX,0xffff
009c708b : MOV EAX,EDX
009c708d : MOV dword ptr [ECX + 0x4c],0x0
009c7094 : MOV dword ptr [ECX + 0x40],0xffffffff
009c709b : MOV word ptr [ECX + 0x44],DX
009c709f : MOV word ptr [ECX + 0x46],AX
009c70a3 : MOV word ptr [ECX + 0x48],DX
009c70a7 : MOV EAX,dword ptr [ECX]
009c70a9 : MOV EDX,dword ptr [EAX + 0x20]
009c70ac : CALL EDX
009c70ae : MOV ECX,ESI
009c70b0 : CALL 0x008f76d0
009c70b5 : MOV dword ptr [ESI + 0x64],0xffffffff
009c70bc : POP ECX
009c70bd : RET
