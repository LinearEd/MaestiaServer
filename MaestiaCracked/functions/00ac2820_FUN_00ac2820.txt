PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac2820
ENTRY    : 00ac2820
BODY     : [[00ac2820, 00ac2896] [00ac28a1, 00ac2933]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00ac28c9) */
/* WARNING: Removing unreachable block (ram,0x00ac28d0) */

void FUN_00ac2820(undefined4 *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  uint uVar3;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = (int)param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3a96f;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)((int)param_1 + 0x30);
  local_18 = 0;
  local_20 = ".\\Objects\\AvaCharacterOptionList.cpp";
  local_1c = 0x8a;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  param_1 = *(undefined4 **)(iVar2 + 8);
  puVar1 = (undefined4 *)*param_1;
  while( true ) {
    if (puVar1 == param_1) {
      FUN_00458e80(iVar2 + 4);
      param_1 = *(undefined4 **)(iVar2 + 8);
      if (*(int *)(iVar2 + 0x14) != *(int *)(iVar2 + 0x18)) {
        *(int *)(iVar2 + 0x18) = *(int *)(iVar2 + 0x14);
      }
      FUN_0044f580(iVar2 + 0x10,*(undefined4 *)(iVar2 + 0x14),&param_1);
      *(undefined4 *)(iVar2 + 0x20) = 7;
      *(undefined4 *)(iVar2 + 0x24) = 8;
      local_8 = 0xffffffff;
      if (local_18 != 0) {
        LeaveCriticalSection(local_24);
      }
      ExceptionList = local_10;
      return;
    }
    if (puVar1[9] != 0) break;
    puVar1 = (undefined4 *)*puVar1;
  }
  FUN_00ac2470(puVar1[9]);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0(uVar3);
}



============================================================
DISASSEMBLY
============================================================
00ac2820 : PUSH EBP
00ac2821 : MOV EBP,ESP
00ac2823 : PUSH -0x1
00ac2825 : PUSH 0xb3a96f
00ac282a : MOV EAX,FS:[0x0]
00ac2830 : PUSH EAX
00ac2831 : SUB ESP,0x18
00ac2834 : PUSH EBX
00ac2835 : PUSH ESI
00ac2836 : PUSH EDI
00ac2837 : MOV EAX,[0x00d66fa0]
00ac283c : XOR EAX,EBP
00ac283e : PUSH EAX
00ac283f : LEA EAX,[EBP + -0xc]
00ac2842 : MOV FS:[0x0],EAX
00ac2848 : MOV EBX,dword ptr [EBP + 0x8]
00ac284b : LEA ECX,[EBP + -0x20]
00ac284e : LEA EAX,[EBX + 0x30]
00ac2851 : XOR ESI,ESI
00ac2853 : PUSH ECX
00ac2854 : MOV dword ptr [EBP + -0x14],ESI
00ac2857 : MOV dword ptr [EBP + -0x20],EAX
00ac285a : MOV dword ptr [EBP + -0x1c],0xc44b50
00ac2861 : MOV dword ptr [EBP + -0x18],0x8a
00ac2868 : MOV dword ptr [EBP + -0x10],0x1
00ac286f : CALL 0x006ef1a0
00ac2874 : MOV dword ptr [EBP + -0x4],ESI
00ac2877 : MOV EAX,dword ptr [EBX + 0x8]
00ac287a : MOV ESI,dword ptr [EAX]
00ac287c : MOV dword ptr [EBP + 0x8],EAX
00ac287f : CMP ESI,EAX
00ac2881 : JZ 0x00ac28a7
00ac2883 : MOV EDI,dword ptr [ESI + 0x24]
00ac2886 : TEST EDI,EDI
00ac2888 : JZ 0x00ac28a1
00ac288a : PUSH EDI
00ac288b : CALL 0x00ac2470
00ac2890 : MOV ECX,EDI
00ac2892 : CALL 0x006f04e0
00ac28a1 : MOV ESI,dword ptr [ESI]
00ac28a3 : CMP ESI,EAX
00ac28a5 : JNZ 0x00ac2883
00ac28a7 : LEA EDX,[EBX + 0x4]
00ac28aa : PUSH EDX
00ac28ab : CALL 0x00458e80
00ac28b0 : MOV EAX,dword ptr [EBX + 0x8]
00ac28b3 : MOV EDX,dword ptr [EBX + 0x14]
00ac28b6 : LEA ESI,[EBX + 0x10]
00ac28b9 : MOV dword ptr [EBP + 0x8],EAX
00ac28bc : MOV EAX,dword ptr [ESI + 0x8]
00ac28bf : CMP EDX,EAX
00ac28c1 : JZ 0x00ac28e1
00ac28c3 : MOV ECX,EAX
00ac28c5 : CMP EAX,EAX
00ac28c7 : JZ 0x00ac28de
00ac28c9 : LEA ESP,[ESP]
00ac28d0 : MOV EDI,dword ptr [ECX]
00ac28d2 : MOV dword ptr [EDX],EDI
00ac28d4 : ADD ECX,0x4
00ac28d7 : ADD EDX,0x4
00ac28da : CMP ECX,EAX
00ac28dc : JNZ 0x00ac28d0
00ac28de : MOV dword ptr [ESI + 0x8],EDX
00ac28e1 : MOV EAX,dword ptr [ESI + 0x4]
00ac28e4 : LEA ECX,[EBP + 0x8]
00ac28e7 : PUSH ECX
00ac28e8 : PUSH EAX
00ac28e9 : PUSH ESI
00ac28ea : MOV ECX,0x9
00ac28ef : CALL 0x0044f580
00ac28f4 : MOV dword ptr [EBX + 0x20],0x7
00ac28fb : MOV dword ptr [EBX + 0x24],0x8
00ac2902 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac2909 : CMP dword ptr [EBP + -0x14],0x0
00ac290d : JZ 0x00ac2920
00ac290f : MOV EDX,dword ptr [EBP + -0x20]
00ac2912 : PUSH EDX
00ac2913 : CALL dword ptr [0x00b8511c]
00ac2919 : MOV dword ptr [EBP + -0x14],0x0
00ac2920 : MOV ECX,dword ptr [EBP + -0xc]
00ac2923 : MOV dword ptr FS:[0x0],ECX
00ac292a : POP ECX
00ac292b : POP EDI
00ac292c : POP ESI
00ac292d : POP EBX
00ac292e : MOV ESP,EBP
00ac2930 : POP EBP
00ac2931 : RET 0x4
