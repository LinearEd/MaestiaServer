PROGRAM  : Maestia.exe
FUNCTION : FUN_009bde10
ENTRY    : 009bde10
BODY     : [[009bde10, 009bdf63]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __alloca_probe replaced with injection: alloca_probe */

void FUN_009bde10(int param_1)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  ushort *unaff_ESI;
  ushort *puVar5;
  undefined2 local_4010 [8194];
  uint local_c;
  undefined4 uStack_8;
  
  uStack_8 = 0x9bde1d;
  local_c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  puVar5 = unaff_ESI + 0xd;
  iVar3 = (*unaff_ESI & 0x1fff) - 0x1a;
  local_4010[0] = 0;
  FUN_009bd660(param_1,local_4010);
  piVar2 = *(int **)(param_1 + 0x470);
  *(uint *)(param_1 + 0x50) = (uint)(byte)unaff_ESI[4];
  uVar4 = (uint)*(byte *)((int)unaff_ESI + 9);
  *(uint *)(param_1 + 0x54) = uVar4;
  if (piVar2 != *(int **)(param_1 + 0x474)) {
    do {
      iVar1 = *piVar2;
      if (*(int *)(unaff_ESI + 5) == iVar1) {
        *(char *)((int)piVar2 + 0x22) = (char)unaff_ESI[0xb];
        uVar4 = (uint)*(byte *)((int)unaff_ESI + 0x19);
        *(byte *)((int)piVar2 + 0x23) = *(byte *)((int)unaff_ESI + 0x19);
      }
      if (*(int *)(unaff_ESI + 7) == iVar1) {
        *(undefined1 *)((int)piVar2 + 0x22) = *(undefined1 *)((int)unaff_ESI + 0x17);
        uVar4 = (uint)*(byte *)((int)unaff_ESI + 0x19);
        *(byte *)((int)piVar2 + 0x23) = *(byte *)((int)unaff_ESI + 0x19);
      }
      if (*(int *)(unaff_ESI + 9) == iVar1) {
        *(char *)((int)piVar2 + 0x22) = (char)unaff_ESI[0xc];
        uVar4 = (uint)*(byte *)((int)unaff_ESI + 0x19);
        *(byte *)((int)piVar2 + 0x23) = *(byte *)((int)unaff_ESI + 0x19);
      }
      piVar2 = piVar2 + 0xb;
    } while (piVar2 != *(int **)(param_1 + 0x474));
  }
  if (*(char *)(param_1 + 0x32) != '\0') {
    if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
      (**(code **)(*piVar2 + 4))
                (piVar2,"mc_charpetlist.SetPetList","%d,%d,%d,%ls",(char)unaff_ESI[3],9,
                 (int)(short)unaff_ESI[2],local_4010);
      uVar4 = extraout_EDX;
    }
    if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
      (**(code **)(*piVar2 + 4))
                (piVar2,"mc_charpetlist.SetHireCount","%d,%d",*(undefined4 *)(param_1 + 0x54),
                 *(undefined4 *)(param_1 + 0x50));
      uVar4 = extraout_EDX_00;
    }
    if (*(int *)(param_1 + 0x58) == 2) {
      FUN_009bd030(param_1);
      uVar4 = extraout_EDX_01;
    }
  }
  __security_check_cookie(local_c ^ (uint)&stack0xfffffffc,uVar4,iVar3,puVar5);
  return;
}



============================================================
DISASSEMBLY
============================================================
009bde10 : PUSH EBP
009bde11 : MOV EBP,ESP
009bde13 : MOV EAX,0x4014
009bde18 : CALL 0x0063b780
009bde1d : MOV EAX,[0x00d66fa0]
009bde22 : XOR EAX,EBP
009bde24 : MOV dword ptr [EBP + -0x8],EAX
009bde27 : MOVZX ECX,word ptr [ESI]
009bde2a : PUSH EBX
009bde2b : MOV EBX,dword ptr [EBP + 0x8]
009bde2e : LEA EAX,[ESI + 0x1a]
009bde31 : PUSH EDI
009bde32 : AND ECX,0x1fff
009bde38 : XOR EDX,EDX
009bde3a : MOV dword ptr [EBP + 0xffffbff0],EAX
009bde40 : SUB ECX,0x1a
009bde43 : LEA EAX,[EBP + 0xffffbff4]
009bde49 : MOV word ptr [EBP + 0xffffbff4],DX
009bde50 : MOVZX EDX,byte ptr [ESI + 0x7]
009bde54 : PUSH EAX
009bde55 : MOV dword ptr [EBP + 0xffffbfec],ECX
009bde5b : PUSH EBX
009bde5c : LEA EDI,[EBP + 0xffffbfec]
009bde62 : LEA ECX,[EBP + 0xffffbff0]
009bde68 : CALL 0x009bd660
009bde6d : MOVZX ECX,byte ptr [ESI + 0x8]
009bde71 : MOV EAX,dword ptr [EBX + 0x470]
009bde77 : MOV dword ptr [EBX + 0x50],ECX
009bde7a : MOVZX EDX,byte ptr [ESI + 0x9]
009bde7e : MOV dword ptr [EBX + 0x54],EDX
009bde81 : CMP EAX,dword ptr [EBX + 0x474]
009bde87 : JZ 0x009bded0
009bde89 : LEA ESP,[ESP]
009bde90 : MOV EDI,dword ptr [EAX]
009bde92 : CMP dword ptr [ESI + 0xa],EDI
009bde95 : JNZ 0x009bdea3
009bde97 : MOV CL,byte ptr [ESI + 0x16]
009bde9a : MOV byte ptr [EAX + 0x22],CL
009bde9d : MOV DL,byte ptr [ESI + 0x19]
009bdea0 : MOV byte ptr [EAX + 0x23],DL
009bdea3 : CMP dword ptr [ESI + 0xe],EDI
009bdea6 : JNZ 0x009bdeb4
009bdea8 : MOV CL,byte ptr [ESI + 0x17]
009bdeab : MOV byte ptr [EAX + 0x22],CL
009bdeae : MOV DL,byte ptr [ESI + 0x19]
009bdeb1 : MOV byte ptr [EAX + 0x23],DL
009bdeb4 : CMP dword ptr [ESI + 0x12],EDI
009bdeb7 : JNZ 0x009bdec5
009bdeb9 : MOV CL,byte ptr [ESI + 0x18]
009bdebc : MOV byte ptr [EAX + 0x22],CL
009bdebf : MOV DL,byte ptr [ESI + 0x19]
009bdec2 : MOV byte ptr [EAX + 0x23],DL
009bdec5 : ADD EAX,0x2c
009bdec8 : CMP EAX,dword ptr [EBX + 0x474]
009bdece : JNZ 0x009bde90
009bded0 : CMP byte ptr [EBX + 0x32],0x0
009bded4 : JZ 0x009bdf52
009bded6 : MOV EAX,[0x00da9894]
009bdedb : MOV EAX,dword ptr [EAX]
009bdedd : TEST EAX,EAX
009bdedf : JZ 0x009bdf13
009bdee1 : MOV EAX,dword ptr [EAX + 0x114]
009bdee7 : TEST EAX,EAX
009bdee9 : JZ 0x009bdf13
009bdeeb : MOV ECX,dword ptr [EAX]
009bdeed : LEA EDX,[EBP + 0xffffbff4]
009bdef3 : PUSH EDX
009bdef4 : MOVSX EDX,word ptr [ESI + 0x4]
009bdef8 : PUSH EDX
009bdef9 : MOVZX EDX,byte ptr [ESI + 0x6]
009bdefd : PUSH 0x9
009bdeff : PUSH EDX
009bdf00 : PUSH 0xc8f41c
009bdf05 : PUSH 0xc8f42c
009bdf0a : PUSH EAX
009bdf0b : MOV EAX,dword ptr [ECX + 0x4]
009bdf0e : CALL EAX
009bdf10 : ADD ESP,0x1c
009bdf13 : MOV ECX,dword ptr [0x00da9894]
009bdf19 : MOV EAX,dword ptr [ECX]
009bdf1b : TEST EAX,EAX
009bdf1d : JZ 0x009bdf46
009bdf1f : MOV EAX,dword ptr [EAX + 0x114]
009bdf25 : TEST EAX,EAX
009bdf27 : JZ 0x009bdf46
009bdf29 : MOV ECX,dword ptr [EBX + 0x50]
009bdf2c : MOV EDX,dword ptr [EAX]
009bdf2e : MOV EDX,dword ptr [EDX + 0x4]
009bdf31 : PUSH ECX
009bdf32 : MOV ECX,dword ptr [EBX + 0x54]
009bdf35 : PUSH ECX
009bdf36 : PUSH 0xc8f448
009bdf3b : PUSH 0xc8f450
009bdf40 : PUSH EAX
009bdf41 : CALL EDX
009bdf43 : ADD ESP,0x14
009bdf46 : CMP dword ptr [EBX + 0x58],0x2
009bdf4a : JNZ 0x009bdf52
009bdf4c : PUSH EBX
009bdf4d : CALL 0x009bd030
009bdf52 : MOV ECX,dword ptr [EBP + -0x8]
009bdf55 : POP EDI
009bdf56 : XOR ECX,EBP
009bdf58 : POP EBX
009bdf59 : CALL 0x00633e6b
009bdf5e : MOV ESP,EBP
009bdf60 : POP EBP
009bdf61 : RET 0x4
