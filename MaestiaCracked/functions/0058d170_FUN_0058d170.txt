PROGRAM  : Maestia.exe
FUNCTION : FUN_0058d170
ENTRY    : 0058d170
BODY     : [[0058d170, 0058d2a9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058d170(int param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  int *piVar5;
  float10 fVar6;
  longlong local_8;
  
  iVar3 = param_1;
  if (*(int **)(param_1 + 8) == (int *)0x0) {
    piVar5 = *(int **)(*(int *)(param_1 + 0x18) + 0x74);
  }
  else {
    iVar2 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar2 != 2) {
      return;
    }
    if (*(int *)(iVar3 + 8) == 0) {
      return;
    }
    piVar5 = (int *)(*(int *)(iVar3 + 8) + -0x68);
  }
  if (piVar5 != (int *)0x0) {
    if (*(int *)(iVar3 + 0x1c) < 1) {
      iVar3 = piVar5[0x20];
      if (iVar3 == 0) {
        iVar3 = FUN_00520df0();
      }
      FUN_0051daa0(piVar5 + 3,"Error: %s, GFx_SpriteGotoAndPlay needs one arg\n",
                   **(undefined4 **)(iVar3 + 0xc));
      return;
    }
    pcVar4 = (char *)FUN_00526260(0);
    param_1 = -1;
    if (*pcVar4 == '\x05') {
      FUN_005272e0(&local_8,*(undefined4 *)(iVar3 + 0x18),0xffffffff,0);
      cVar1 = (**(code **)(*piVar5 + 0x11c))(*(undefined4 *)local_8,&param_1,1);
      if (cVar1 == '\0') {
        *(int *)((int)(undefined4 *)local_8 + 8) = *(int *)((int)(undefined4 *)local_8 + 8) + -1;
        if (*(int *)((int)(undefined4 *)local_8 + 8) != 0) {
          return;
        }
        FUN_00525340();
        return;
      }
      *(int *)((int)(undefined4 *)local_8 + 8) = *(int *)((int)(undefined4 *)local_8 + 8) + -1;
      if (*(int *)((int)(undefined4 *)local_8 + 8) == 0) {
        FUN_00525340();
      }
    }
    else {
      fVar6 = (float10)FUN_00527730(*(undefined4 *)(iVar3 + 0x18));
      local_8 = (longlong)ROUND(fVar6);
      param_1 = (int)(undefined4 *)local_8 + -1;
    }
    (**(code **)(*piVar5 + 0x120))(param_1);
    (**(code **)(*piVar5 + 0x124))(0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058d170 : SUB ESP,0x8
0058d173 : PUSH ESI
0058d174 : PUSH EDI
0058d175 : MOV EDI,dword ptr [ESP + 0x14]
0058d179 : MOV ECX,dword ptr [EDI + 0x8]
0058d17c : TEST ECX,ECX
0058d17e : JNZ 0x0058d188
0058d180 : MOV EAX,dword ptr [EDI + 0x18]
0058d183 : MOV ESI,dword ptr [EAX + 0x74]
0058d186 : JMP 0x0058d1a6
0058d188 : MOV EDX,dword ptr [ECX]
0058d18a : MOV EAX,dword ptr [EDX + 0x8]
0058d18d : CALL EAX
0058d18f : CMP EAX,0x2
0058d192 : JNZ 0x0058d275
0058d198 : MOV EAX,dword ptr [EDI + 0x8]
0058d19b : TEST EAX,EAX
0058d19d : JZ 0x0058d275
0058d1a3 : LEA ESI,[EAX + -0x68]
0058d1a6 : TEST ESI,ESI
0058d1a8 : JZ 0x0058d275
0058d1ae : CMP dword ptr [EDI + 0x1c],0x1
0058d1b2 : JGE 0x0058d1e2
0058d1b4 : MOV EAX,dword ptr [ESI + 0x80]
0058d1ba : TEST EAX,EAX
0058d1bc : JNZ 0x0058d1c5
0058d1be : MOV ECX,ESI
0058d1c0 : CALL 0x00520df0
0058d1c5 : MOV ECX,dword ptr [EAX + 0xc]
0058d1c8 : MOV EDX,dword ptr [ECX]
0058d1ca : PUSH EDX
0058d1cb : PUSH 0xb8e674
0058d1d0 : ADD ESI,0xc
0058d1d3 : PUSH ESI
0058d1d4 : CALL 0x0051daa0
0058d1d9 : ADD ESP,0xc
0058d1dc : POP EDI
0058d1dd : POP ESI
0058d1de : ADD ESP,0x8
0058d1e1 : RET
0058d1e2 : PUSH 0x0
0058d1e4 : MOV ECX,EDI
0058d1e6 : CALL 0x00526260
0058d1eb : MOV ECX,EAX
0058d1ed : MOV EAX,dword ptr [EDI + 0x18]
0058d1f0 : MOV dword ptr [ESP + 0x14],0xffffffff
0058d1f8 : CMP byte ptr [ECX],0x5
0058d1fb : JNZ 0x0058d27b
0058d1fd : PUSH 0x0
0058d1ff : PUSH -0x1
0058d201 : PUSH EAX
0058d202 : LEA EDX,[ESP + 0x14]
0058d206 : PUSH EDX
0058d207 : CALL 0x005272e0
0058d20c : MOV EAX,dword ptr [ESP + 0x8]
0058d210 : MOV EAX,dword ptr [EAX]
0058d212 : MOV EDX,dword ptr [ESI]
0058d214 : MOV EDX,dword ptr [EDX + 0x11c]
0058d21a : PUSH 0x1
0058d21c : LEA ECX,[ESP + 0x18]
0058d220 : PUSH ECX
0058d221 : PUSH EAX
0058d222 : MOV ECX,ESI
0058d224 : CALL EDX
0058d226 : TEST AL,AL
0058d228 : MOV EAX,dword ptr [ESP + 0x8]
0058d22c : MOV ECX,EAX
0058d22e : JNZ 0x0058d246
0058d230 : DEC dword ptr [EAX + 0x8]
0058d233 : ADD EAX,0x8
0058d236 : CMP dword ptr [EAX],0x0
0058d239 : JNZ 0x0058d275
0058d23b : CALL 0x00525340
0058d240 : POP EDI
0058d241 : POP ESI
0058d242 : ADD ESP,0x8
0058d245 : RET
0058d246 : DEC dword ptr [EAX + 0x8]
0058d249 : ADD EAX,0x8
0058d24c : CMP dword ptr [EAX],0x0
0058d24f : JNZ 0x0058d256
0058d251 : CALL 0x00525340
0058d256 : MOV EAX,dword ptr [ESP + 0x14]
0058d25a : MOV EDX,dword ptr [ESI]
0058d25c : PUSH EAX
0058d25d : MOV EAX,dword ptr [EDX + 0x120]
0058d263 : MOV ECX,ESI
0058d265 : CALL EAX
0058d267 : MOV EDX,dword ptr [ESI]
0058d269 : MOV EAX,dword ptr [EDX + 0x124]
0058d26f : PUSH 0x0
0058d271 : MOV ECX,ESI
0058d273 : CALL EAX
0058d275 : POP EDI
0058d276 : POP ESI
0058d277 : ADD ESP,0x8
0058d27a : RET
0058d27b : PUSH EAX
0058d27c : CALL 0x00527730
0058d281 : FNSTCW word ptr [ESP + 0x14]
0058d285 : MOVZX EAX,word ptr [ESP + 0x14]
0058d28a : OR EAX,0xc00
0058d28f : MOV dword ptr [ESP + 0x8],EAX
0058d293 : FLDCW word ptr [ESP + 0x8]
0058d297 : FISTP qword ptr [ESP + 0x8]
0058d29b : MOV EAX,dword ptr [ESP + 0x8]
0058d29f : DEC EAX
0058d2a0 : FLDCW word ptr [ESP + 0x14]
0058d2a4 : MOV dword ptr [ESP + 0x14],EAX
0058d2a8 : JMP 0x0058d25a
