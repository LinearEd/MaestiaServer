PROGRAM  : Maestia.exe
FUNCTION : FUN_0074ac30
ENTRY    : 0074ac30
BODY     : [[0074ac30, 0074ae87] [0074ae90, 0074af4d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0074ae28) */

void FUN_0074ac30(undefined4 param_1)

{
  undefined4 *puVar1;
  char cVar2;
  uint uVar3;
  int in_ECX;
  int *piVar4;
  int *piVar5;
  int iStack_5c;
  undefined4 *local_58;
  int iStack_54;
  undefined1 auStack_50 [4];
  int *piStack_4c;
  int *piStack_48;
  int iStack_44;
  LPCRITICAL_SECTION p_Stack_40;
  char *pcStack_3c;
  undefined4 uStack_38;
  int iStack_34;
  undefined4 uStack_30;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  void *local_14;
  undefined1 *puStack_10;
  uint local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b30c17;
  local_14 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xffffff98;
  ExceptionList = &local_14;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 0x7c);
  local_20 = 0;
  local_28 = ".\\World\\AvaRenderQueue.cpp";
  local_24 = 0xcb;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_c = 0;
  if (*(int *)(in_ECX + 0x48) != 0) {
    puVar1 = *(undefined4 **)(in_ECX + 0x44);
    local_58 = (undefined4 *)*puVar1;
    while (local_58 != puVar1) {
      (**(code **)(*(int *)local_58[3] + 0x28))(param_1,uVar3);
      FUN_0045d060();
    }
  }
  FUN_0045cd30(*(undefined4 *)(*(int *)(in_ECX + 0x44) + 4));
  *(int *)(*(int *)(in_ECX + 0x44) + 4) = *(int *)(in_ECX + 0x44);
  *(undefined4 *)(in_ECX + 0x48) = 0;
  *(undefined4 *)*(undefined4 *)(in_ECX + 0x44) = *(undefined4 *)(in_ECX + 0x44);
  *(int *)(*(int *)(in_ECX + 0x44) + 8) = *(int *)(in_ECX + 0x44);
  local_58 = (undefined4 *)0x0;
  if ((*(int *)(in_ECX + 0x54) - *(int *)(in_ECX + 0x50) & 0xfffffffcU) != 0) {
    iStack_54 = *(int *)(DAT_017251cc + 8);
    if (iStack_54 != 0) {
      piStack_4c = (int *)0x0;
      piStack_48 = (int *)0x0;
      iStack_44 = 0;
      local_c._0_1_ = 1;
      p_Stack_40 = (LPCRITICAL_SECTION)(in_ECX + 0x60);
      iStack_34 = 0;
      pcStack_3c = ".\\World\\AvaRenderQueue.cpp";
      uStack_38 = 0xea;
      uStack_30 = 1;
      FUN_006ef1a0(&p_Stack_40);
      local_c = CONCAT31(local_c._1_3_,2);
      FUN_004c0850(*(int *)(in_ECX + 0x54) - *(int *)(in_ECX + 0x50) >> 2);
      piVar5 = *(int **)(in_ECX + 0x50);
      piVar4 = piStack_48;
      if (piVar5 != *(int **)(in_ECX + 0x54)) {
        do {
          iStack_5c = *piVar5;
          if ((*(uint *)(iStack_5c + 0x220) >> 2 != 0) && (*(int *)(iStack_5c + 0x1e4) != 0)) {
            if (piStack_4c == (int *)0x0) {
              uVar3 = 0;
            }
            else {
              uVar3 = iStack_44 - (int)piStack_4c >> 2;
            }
            if ((uint)((int)piVar4 - (int)piStack_4c >> 2) < uVar3) {
              *piVar4 = iStack_5c;
              piStack_48 = piVar4 + 1;
            }
            else {
              FUN_004d2c60(auStack_50,piVar4,&iStack_5c);
            }
            local_58 = (undefined4 *)((int)local_58 + (*(uint *)(iStack_5c + 0x220) >> 2));
            piVar4 = piStack_48;
          }
          piVar5 = piVar5 + 1;
        } while (piVar5 != *(int **)(in_ECX + 0x54));
      }
      (*(code *)PTR_FUN_00d6d240)
                (0,0xb,"Pati Ent.  %3d",*(int *)(in_ECX + 0x54) - *(int *)(in_ECX + 0x50) >> 2);
      if (*(int *)(in_ECX + 0x50) != *(int *)(in_ECX + 0x54)) {
        *(int *)(in_ECX + 0x54) = *(int *)(in_ECX + 0x50);
        piVar4 = piStack_48;
      }
      local_c = CONCAT31(local_c._1_3_,1);
      if (iStack_34 != 0) {
        LeaveCriticalSection(p_Stack_40);
        iStack_34 = 0;
      }
      piVar5 = piStack_4c;
      FUN_004c0a80(piStack_4c,piVar4,(int)piVar4 - (int)piStack_4c >> 2,FUN_007482d0);
      cVar2 = FUN_00766330();
      if (cVar2 != '\0') {
        for (; piVar5 != piVar4; piVar5 = piVar5 + 1) {
          if ((char)((int *)*piVar5)[0x7b] == '\0') {
            (**(code **)(*(int *)*piVar5 + 0x28))(param_1);
          }
        }
        FUN_00765ba0();
        for (piVar5 = piStack_4c; piVar5 != piVar4; piVar5 = piVar5 + 1) {
          if ((char)((int *)*piVar5)[0x7b] != '\0') {
            (**(code **)(*(int *)*piVar5 + 0x28))(param_1);
          }
        }
        FUN_00765cb0();
        piVar5 = piStack_4c;
      }
      local_c = local_c & 0xffffff00;
      if (piVar5 != (int *)0x0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      piStack_4c = (int *)0x0;
      piStack_48 = (int *)0x0;
      iStack_44 = 0;
    }
    (*(code *)PTR_FUN_00d6d240)(0,0xc,"Paticles %5d",local_58);
  }
  local_c = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
0074ac30 : PUSH EBP
0074ac31 : MOV EBP,ESP
0074ac33 : AND ESP,0xfffffff8
0074ac36 : PUSH -0x1
0074ac38 : PUSH 0xb30c17
0074ac3d : MOV EAX,FS:[0x0]
0074ac43 : PUSH EAX
0074ac44 : SUB ESP,0x48
0074ac47 : PUSH EBX
0074ac48 : PUSH ESI
0074ac49 : PUSH EDI
0074ac4a : MOV EAX,[0x00d66fa0]
0074ac4f : XOR EAX,ESP
0074ac51 : PUSH EAX
0074ac52 : LEA EAX,[ESP + 0x58]
0074ac56 : MOV FS:[0x0],EAX
0074ac5c : MOV ESI,ECX
0074ac5e : LEA ECX,[ESP + 0x40]
0074ac62 : LEA EAX,[ESI + 0x7c]
0074ac65 : XOR EBX,EBX
0074ac67 : PUSH ECX
0074ac68 : MOV dword ptr [ESP + 0x50],EBX
0074ac6c : MOV dword ptr [ESP + 0x44],EAX
0074ac70 : MOV dword ptr [ESP + 0x48],0xc08990
0074ac78 : MOV dword ptr [ESP + 0x4c],0xcb
0074ac80 : MOV dword ptr [ESP + 0x54],0x1
0074ac88 : CALL 0x006ef1a0
0074ac8d : MOV dword ptr [ESP + 0x60],EBX
0074ac91 : CMP dword ptr [ESI + 0x48],EBX
0074ac94 : JZ 0x0074acc2
0074ac96 : MOV EDI,dword ptr [ESI + 0x44]
0074ac99 : MOV EAX,dword ptr [EDI]
0074ac9b : MOV dword ptr [ESP + 0x14],EAX
0074ac9f : CMP EAX,EDI
0074aca1 : JZ 0x0074acc2
0074aca3 : MOV ECX,dword ptr [EAX + 0xc]
0074aca6 : MOV EDX,dword ptr [ECX]
0074aca8 : MOV EAX,dword ptr [EBP + 0x8]
0074acab : MOV EDX,dword ptr [EDX + 0x28]
0074acae : PUSH EAX
0074acaf : CALL EDX
0074acb1 : LEA EDX,[ESP + 0x14]
0074acb5 : CALL 0x0045d060
0074acba : MOV EAX,dword ptr [ESP + 0x14]
0074acbe : CMP EAX,EDI
0074acc0 : JNZ 0x0074aca3
0074acc2 : MOV EAX,dword ptr [ESI + 0x44]
0074acc5 : MOV ECX,dword ptr [EAX + 0x4]
0074acc8 : LEA EDI,[ESI + 0x40]
0074accb : PUSH ECX
0074accc : MOV ECX,EDI
0074acce : CALL 0x0045cd30
0074acd3 : MOV EAX,dword ptr [EDI + 0x4]
0074acd6 : MOV dword ptr [EAX + 0x4],EAX
0074acd9 : MOV EAX,dword ptr [EDI + 0x4]
0074acdc : MOV dword ptr [EDI + 0x8],EBX
0074acdf : MOV dword ptr [EAX],EAX
0074ace1 : MOV EDI,dword ptr [EDI + 0x4]
0074ace4 : MOV dword ptr [EDI + 0x8],EDI
0074ace7 : MOV EDX,dword ptr [ESI + 0x54]
0074acea : SUB EDX,dword ptr [ESI + 0x50]
0074aced : MOV dword ptr [ESP + 0x14],EBX
0074acf1 : TEST EDX,0xfffffffc
0074acf7 : JZ 0x0074af1c
0074acfd : MOV EAX,[0x017251cc]
0074ad02 : MOV EAX,dword ptr [EAX + 0x8]
0074ad05 : MOV dword ptr [ESP + 0x18],EAX
0074ad09 : CMP EAX,EBX
0074ad0b : JZ 0x0074af06
0074ad11 : MOV dword ptr [ESP + 0x20],EBX
0074ad15 : MOV dword ptr [ESP + 0x24],EBX
0074ad19 : MOV dword ptr [ESP + 0x28],EBX
0074ad1d : MOV byte ptr [ESP + 0x60],0x1
0074ad22 : LEA EDX,[ESP + 0x2c]
0074ad26 : LEA ECX,[ESI + 0x60]
0074ad29 : PUSH EDX
0074ad2a : MOV dword ptr [ESP + 0x3c],EBX
0074ad2e : MOV dword ptr [ESP + 0x30],ECX
0074ad32 : MOV dword ptr [ESP + 0x34],0xc089ac
0074ad3a : MOV dword ptr [ESP + 0x38],0xea
0074ad42 : MOV dword ptr [ESP + 0x40],0x1
0074ad4a : CALL 0x006ef1a0
0074ad4f : MOV byte ptr [ESP + 0x60],0x2
0074ad54 : MOV EAX,dword ptr [ESI + 0x54]
0074ad57 : SUB EAX,dword ptr [ESI + 0x50]
0074ad5a : LEA ECX,[ESP + 0x1c]
0074ad5e : SAR EAX,0x2
0074ad61 : PUSH EAX
0074ad62 : CALL 0x004c0850
0074ad67 : MOV EDI,dword ptr [ESI + 0x50]
0074ad6a : MOV EAX,dword ptr [ESI + 0x54]
0074ad6d : MOV EBX,dword ptr [ESP + 0x24]
0074ad71 : CMP EDI,EAX
0074ad73 : JZ 0x0074aded
0074ad75 : MOV EAX,dword ptr [EDI]
0074ad77 : MOV ECX,dword ptr [EAX + 0x220]
0074ad7d : SHR ECX,0x2
0074ad80 : MOV dword ptr [ESP + 0x10],EAX
0074ad84 : TEST ECX,ECX
0074ad86 : JLE 0x0074ade5
0074ad88 : CMP dword ptr [EAX + 0x1e4],0x0
0074ad8f : JZ 0x0074ade5
0074ad91 : MOV ECX,dword ptr [ESP + 0x20]
0074ad95 : TEST ECX,ECX
0074ad97 : JNZ 0x0074ad9d
0074ad99 : XOR EAX,EAX
0074ad9b : JMP 0x0074ada6
0074ad9d : MOV EAX,dword ptr [ESP + 0x28]
0074ada1 : SUB EAX,ECX
0074ada3 : SAR EAX,0x2
0074ada6 : MOV EDX,EBX
0074ada8 : SUB EDX,ECX
0074adaa : SAR EDX,0x2
0074adad : CMP EDX,EAX
0074adaf : JNC 0x0074adc0
0074adb1 : MOV EAX,dword ptr [ESP + 0x10]
0074adb5 : MOV dword ptr [EBX],EAX
0074adb7 : ADD EBX,0x4
0074adba : MOV dword ptr [ESP + 0x24],EBX
0074adbe : JMP 0x0074add4
0074adc0 : LEA ECX,[ESP + 0x10]
0074adc4 : PUSH ECX
0074adc5 : PUSH EBX
0074adc6 : LEA EDX,[ESP + 0x24]
0074adca : PUSH EDX
0074adcb : CALL 0x004d2c60
0074add0 : MOV EBX,dword ptr [ESP + 0x24]
0074add4 : MOV EAX,dword ptr [ESP + 0x10]
0074add8 : MOV ECX,dword ptr [EAX + 0x220]
0074adde : SHR ECX,0x2
0074ade1 : ADD dword ptr [ESP + 0x14],ECX
0074ade5 : ADD EDI,0x4
0074ade8 : CMP EDI,dword ptr [ESI + 0x54]
0074adeb : JNZ 0x0074ad75
0074aded : MOV EDX,dword ptr [ESI + 0x54]
0074adf0 : SUB EDX,dword ptr [ESI + 0x50]
0074adf3 : SAR EDX,0x2
0074adf6 : PUSH EDX
0074adf7 : PUSH 0xc089c8
0074adfc : PUSH 0xb
0074adfe : PUSH 0x0
0074ae00 : CALL dword ptr [0x00d6d240]
0074ae06 : MOV ECX,dword ptr [ESI + 0x54]
0074ae09 : MOV EDI,dword ptr [ESI + 0x50]
0074ae0c : ADD ESP,0x10
0074ae0f : CMP EDI,ECX
0074ae11 : JZ 0x0074ae3b
0074ae13 : MOV EAX,ECX
0074ae15 : SUB EAX,ECX
0074ae17 : SAR EAX,0x2
0074ae1a : LEA EDX,[EAX*0x4 + 0x0]
0074ae21 : LEA EBX,[EDI + EDX*0x1]
0074ae24 : TEST EAX,EAX
0074ae26 : JLE 0x0074ae34
0074ae28 : PUSH EDX
0074ae29 : PUSH ECX
0074ae2a : PUSH EDX
0074ae2b : PUSH EDI
0074ae2c : CALL 0x00634101
0074ae31 : ADD ESP,0x10
0074ae34 : MOV dword ptr [ESI + 0x54],EBX
0074ae37 : MOV EBX,dword ptr [ESP + 0x24]
0074ae3b : MOV byte ptr [ESP + 0x60],0x1
0074ae40 : CMP dword ptr [ESP + 0x38],0x0
0074ae45 : JZ 0x0074ae5a
0074ae47 : MOV EAX,dword ptr [ESP + 0x2c]
0074ae4b : PUSH EAX
0074ae4c : CALL dword ptr [0x00b8511c]
0074ae52 : MOV dword ptr [ESP + 0x38],0x0
0074ae5a : MOV ESI,dword ptr [ESP + 0x20]
0074ae5e : MOV ECX,EBX
0074ae60 : SUB ECX,ESI
0074ae62 : PUSH 0x7482d0
0074ae67 : SAR ECX,0x2
0074ae6a : PUSH ECX
0074ae6b : PUSH EBX
0074ae6c : PUSH ESI
0074ae6d : CALL 0x004c0a80
0074ae72 : MOV EDI,dword ptr [ESP + 0x28]
0074ae76 : ADD ESP,0x10
0074ae79 : CALL 0x00766330
0074ae7e : TEST AL,AL
0074ae80 : JZ 0x0074aee6
0074ae82 : CMP ESI,EBX
0074ae84 : JZ 0x0074aead
0074ae86 : JMP 0x0074ae90
0074ae90 : MOV ECX,dword ptr [ESI]
0074ae92 : CMP byte ptr [ECX + 0x1ec],0x0
0074ae99 : JNZ 0x0074aea6
0074ae9b : MOV EDX,dword ptr [ECX]
0074ae9d : MOV EAX,dword ptr [EBP + 0x8]
0074aea0 : MOV EDX,dword ptr [EDX + 0x28]
0074aea3 : PUSH EAX
0074aea4 : CALL EDX
0074aea6 : ADD ESI,0x4
0074aea9 : CMP ESI,EBX
0074aeab : JNZ 0x0074ae90
0074aead : CALL 0x00765ba0
0074aeb2 : MOV ESI,dword ptr [ESP + 0x20]
0074aeb6 : CMP ESI,EBX
0074aeb8 : JZ 0x0074aedd
0074aeba : LEA EBX,[EBX]
0074aec0 : MOV ECX,dword ptr [ESI]
0074aec2 : CMP byte ptr [ECX + 0x1ec],0x0
0074aec9 : JZ 0x0074aed6
0074aecb : MOV EAX,dword ptr [ECX]
0074aecd : MOV EDX,dword ptr [EBP + 0x8]
0074aed0 : MOV EAX,dword ptr [EAX + 0x28]
0074aed3 : PUSH EDX
0074aed4 : CALL EAX
0074aed6 : ADD ESI,0x4
0074aed9 : CMP ESI,EBX
0074aedb : JNZ 0x0074aec0
0074aedd : CALL 0x00765cb0
0074aee2 : MOV ESI,dword ptr [ESP + 0x20]
0074aee6 : MOV byte ptr [ESP + 0x60],0x0
0074aeeb : XOR EDI,EDI
0074aeed : CMP ESI,EDI
0074aeef : JZ 0x0074aef8
0074aef1 : MOV ECX,ESI
0074aef3 : CALL 0x006f04e0
0074aef8 : MOV dword ptr [ESP + 0x20],EDI
0074aefc : MOV dword ptr [ESP + 0x24],EDI
0074af00 : MOV dword ptr [ESP + 0x28],EDI
0074af04 : XOR EBX,EBX
0074af06 : MOV ECX,dword ptr [ESP + 0x14]
0074af0a : PUSH ECX
0074af0b : PUSH 0xc089d8
0074af10 : PUSH 0xc
0074af12 : PUSH EBX
0074af13 : CALL dword ptr [0x00d6d240]
0074af19 : ADD ESP,0x10
0074af1c : MOV dword ptr [ESP + 0x60],0xffffffff
0074af24 : CMP dword ptr [ESP + 0x4c],EBX
0074af28 : JZ 0x0074af39
0074af2a : MOV EDX,dword ptr [ESP + 0x40]
0074af2e : PUSH EDX
0074af2f : CALL dword ptr [0x00b8511c]
0074af35 : MOV dword ptr [ESP + 0x4c],EBX
0074af39 : MOV ECX,dword ptr [ESP + 0x58]
0074af3d : MOV dword ptr FS:[0x0],ECX
0074af44 : POP ECX
0074af45 : POP EDI
0074af46 : POP ESI
0074af47 : POP EBX
0074af48 : MOV ESP,EBP
0074af4a : POP EBP
0074af4b : RET 0x4
