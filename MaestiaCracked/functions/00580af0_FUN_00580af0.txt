PROGRAM  : Maestia.exe
FUNCTION : FUN_00580af0
ENTRY    : 00580af0
BODY     : [[00580af0, 00580c10]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00580af0(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_00580380);
    *puVar3 = &PTR_LAB_00b8d930;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x94,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_00580a50(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x20;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x88,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
00580af0 : SUB ESP,0x18
00580af3 : PUSH EBX
00580af4 : PUSH EBP
00580af5 : PUSH ESI
00580af6 : MOV ESI,dword ptr [ESP + 0x2c]
00580afa : MOV ECX,dword ptr [ESI + 0x288]
00580b00 : PUSH EDI
00580b01 : XOR EBX,EBX
00580b03 : PUSH EBX
00580b04 : PUSH 0x34
00580b06 : MOV dword ptr [ESP + 0x18],ESI
00580b0a : MOV byte ptr [ESP + 0x1c],0x8
00580b0f : CALL 0x00515840
00580b14 : MOV EDI,EAX
00580b16 : CMP EDI,EBX
00580b18 : JZ 0x00580b3a
00580b1a : PUSH 0x580380
00580b1f : LEA EAX,[ESP + 0x14]
00580b23 : PUSH EAX
00580b24 : MOV ECX,EDI
00580b26 : CALL 0x00568960
00580b2b : MOV dword ptr [EDI],0xb8d930
00580b31 : MOV dword ptr [EDI + 0x10],0xb90510
00580b38 : JMP 0x00580b3c
00580b3a : XOR EDI,EDI
00580b3c : MOV EBP,dword ptr [ESP + 0x2c]
00580b40 : PUSH EBX
00580b41 : MOV byte ptr [EBP + 0x8],BL
00580b44 : MOV dword ptr [EBP],EDI
00580b47 : MOV dword ptr [EBP + 0x4],EBX
00580b4a : MOV ECX,dword ptr [ESI + 0x288]
00580b50 : PUSH 0x94
00580b55 : CALL 0x00515840
00580b5a : MOV EDI,EAX
00580b5c : CMP EDI,EBX
00580b5e : JZ 0x00580b8a
00580b60 : PUSH EBP
00580b61 : PUSH 0x1
00580b63 : MOV ECX,ESI
00580b65 : CALL 0x00530910
00580b6a : PUSH EAX
00580b6b : LEA ECX,[ESP + 0x18]
00580b6f : PUSH ECX
00580b70 : MOV ECX,EDI
00580b72 : CALL 0x00580a50
00580b77 : MOV EBX,EAX
00580b79 : TEST EBX,EBX
00580b7b : JZ 0x00580b8a
00580b7d : MOV EDX,dword ptr [EBX + 0x8]
00580b80 : INC EDX
00580b81 : AND EDX,0x8fffffff
00580b87 : MOV dword ptr [EBX + 0x8],EDX
00580b8a : LEA EAX,[ESP + 0x30]
00580b8e : PUSH EAX
00580b8f : LEA ECX,[ESP + 0x30]
00580b93 : PUSH ECX
00580b94 : LEA ECX,[ESI + 0x278]
00580b9a : MOV dword ptr [ESP + 0x38],EBX
00580b9e : MOV dword ptr [ESP + 0x34],0x20
00580ba6 : CALL 0x0050ff10
00580bab : MOV ECX,dword ptr [ESP + 0x30]
00580baf : TEST ECX,ECX
00580bb1 : JZ 0x00580bb8
00580bb3 : CALL 0x00503db0
00580bb8 : MOV EAX,dword ptr [ESI + 0x2a0]
00580bbe : ADD EAX,0x10
00580bc1 : LEA EDX,[ESP + 0x30]
00580bc5 : MOV byte ptr [ESP + 0x30],0x0
00580bca : MOV EDI,dword ptr [EAX]
00580bcc : PUSH EDX
00580bcd : PUSH EBP
00580bce : LEA ECX,[ESP + 0x20]
00580bd2 : MOV dword ptr [ESP + 0x34],EAX
00580bd6 : ADD EDI,0x28
00580bd9 : CALL 0x00526210
00580bde : MOV ECX,dword ptr [ESP + 0x30]
00580be2 : MOV EDX,dword ptr [EDI]
00580be4 : PUSH EAX
00580be5 : ADD ESI,0x88
00580beb : PUSH ESI
00580bec : LEA EAX,[ESP + 0x1c]
00580bf0 : PUSH EAX
00580bf1 : CALL EDX
00580bf3 : LEA ECX,[ESP + 0x18]
00580bf7 : CALL 0x00526bc0
00580bfc : TEST EBX,EBX
00580bfe : JZ 0x00580c07
00580c00 : MOV ECX,EBX
00580c02 : CALL 0x00503db0
00580c07 : POP EDI
00580c08 : POP ESI
00580c09 : MOV EAX,EBP
00580c0b : POP EBP
00580c0c : POP EBX
00580c0d : ADD ESP,0x18
00580c10 : RET
