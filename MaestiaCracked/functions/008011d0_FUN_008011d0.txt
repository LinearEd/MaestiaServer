PROGRAM  : Maestia.exe
FUNCTION : FUN_008011d0
ENTRY    : 008011d0
BODY     : [[008011d0, 00801357]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_008011d0(void)

{
  uint uVar1;
  BOOL BVar2;
  int in_ECX;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b2968c;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((DAT_01726c34 & 1) == 0) {
    DAT_01726c34 = DAT_01726c34 | 1;
    local_8 = 0;
    _DAT_01726c18 = &PTR_FUN_00cdec94;
    BVar2 = InitializeCriticalSectionAndSpinCount((LPCRITICAL_SECTION)&DAT_01726c1c,4000);
    if (BVar2 == 0) {
      InitializeCriticalSection((LPCRITICAL_SECTION)&DAT_01726c1c);
    }
    _atexit((_func_4879 *)&LAB_00b845d0);
  }
  local_8 = 0xffffffff;
  local_18 = 0;
  local_24 = (LPCRITICAL_SECTION)&DAT_01726c1c;
  local_20 = ".\\AvaApp.cpp";
  local_1c = 0xbd;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 1;
  DAT_00da9ad8 = GetTickCount();
  (**(code **)(*DAT_017251e0 + 0x1c))(uVar1);
  (**(code **)(*DAT_017251c8 + 0x1c))();
  (**(code **)(*DAT_017251d8 + 0x1c))();
  (**(code **)(*DAT_017251bc + 0x1c))();
  (**(code **)(*DAT_017251f0 + 0x1c))();
  (**(code **)(*DAT_017251f4 + 0x1c))();
  (**(code **)(*DAT_017251e8 + 0x1c))();
  (**(code **)(*DAT_017251ec + 0x1c))();
  (**(code **)(*DAT_017251dc + 0x1c))();
  (**(code **)(*DAT_017251f8 + 0x1c))();
  (**(code **)(*DAT_017251fc + 0x1c))();
  if ((*(int *)(in_ECX + 0xc) != 0) && (*(char *)(in_ECX + 0x30) == '\0')) {
    FUN_007fd100();
  }
  local_8 = 0xffffffff;
  if (local_18 != 0) {
    LeaveCriticalSection(local_24);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008011d0 : PUSH EBP
008011d1 : MOV EBP,ESP
008011d3 : PUSH -0x1
008011d5 : PUSH 0xb2968c
008011da : MOV EAX,FS:[0x0]
008011e0 : PUSH EAX
008011e1 : SUB ESP,0x14
008011e4 : PUSH EBX
008011e5 : PUSH ESI
008011e6 : PUSH EDI
008011e7 : MOV EAX,[0x00d66fa0]
008011ec : XOR EAX,EBP
008011ee : PUSH EAX
008011ef : LEA EAX,[EBP + -0xc]
008011f2 : MOV FS:[0x0],EAX
008011f8 : MOV ESI,ECX
008011fa : MOV EBX,0x1
008011ff : TEST byte ptr [0x01726c34],BL
00801205 : JNZ 0x00801251
00801207 : OR dword ptr [0x01726c34],EBX
0080120d : MOV dword ptr [EBP + -0x4],0x0
00801214 : PUSH 0xfa0
00801219 : PUSH 0x1726c1c
0080121e : MOV dword ptr [0x01726c18],0xcdec94
00801228 : CALL dword ptr [0x00b85110]
0080122e : TEST EAX,EAX
00801230 : JNZ 0x0080123d
00801232 : PUSH 0x1726c1c
00801237 : CALL dword ptr [0x00b85114]
0080123d : PUSH 0xb845d0
00801242 : CALL 0x006356bc
00801247 : ADD ESP,0x4
0080124a : MOV dword ptr [EBP + -0x4],0xffffffff
00801251 : LEA EAX,[EBP + -0x20]
00801254 : PUSH EAX
00801255 : MOV dword ptr [EBP + -0x14],0x0
0080125c : MOV dword ptr [EBP + -0x20],0x1726c1c
00801263 : MOV dword ptr [EBP + -0x1c],0xc28a28
0080126a : MOV dword ptr [EBP + -0x18],0xbd
00801271 : MOV dword ptr [EBP + -0x10],EBX
00801274 : CALL 0x006ef1a0
00801279 : MOV dword ptr [EBP + -0x4],EBX
0080127c : CALL dword ptr [0x00b850d8]
00801282 : MOV ECX,dword ptr [0x017251e0]
00801288 : MOV EDX,dword ptr [ECX]
0080128a : MOV [0x00da9ad8],EAX
0080128f : MOV EAX,dword ptr [EDX + 0x1c]
00801292 : CALL EAX
00801294 : MOV ECX,dword ptr [0x017251c8]
0080129a : MOV EDX,dword ptr [ECX]
0080129c : MOV EAX,dword ptr [EDX + 0x1c]
0080129f : CALL EAX
008012a1 : MOV ECX,dword ptr [0x017251d8]
008012a7 : MOV EDX,dword ptr [ECX]
008012a9 : MOV EAX,dword ptr [EDX + 0x1c]
008012ac : CALL EAX
008012ae : MOV ECX,dword ptr [0x017251bc]
008012b4 : MOV EDX,dword ptr [ECX]
008012b6 : MOV EAX,dword ptr [EDX + 0x1c]
008012b9 : CALL EAX
008012bb : MOV ECX,dword ptr [0x017251f0]
008012c1 : MOV EDX,dword ptr [ECX]
008012c3 : MOV EAX,dword ptr [EDX + 0x1c]
008012c6 : CALL EAX
008012c8 : MOV ECX,dword ptr [0x017251f4]
008012ce : MOV EDX,dword ptr [ECX]
008012d0 : MOV EAX,dword ptr [EDX + 0x1c]
008012d3 : CALL EAX
008012d5 : MOV ECX,dword ptr [0x017251e8]
008012db : MOV EDX,dword ptr [ECX]
008012dd : MOV EAX,dword ptr [EDX + 0x1c]
008012e0 : CALL EAX
008012e2 : MOV ECX,dword ptr [0x017251ec]
008012e8 : MOV EDX,dword ptr [ECX]
008012ea : MOV EAX,dword ptr [EDX + 0x1c]
008012ed : CALL EAX
008012ef : MOV ECX,dword ptr [0x017251dc]
008012f5 : MOV EDX,dword ptr [ECX]
008012f7 : MOV EAX,dword ptr [EDX + 0x1c]
008012fa : CALL EAX
008012fc : MOV ECX,dword ptr [0x017251f8]
00801302 : MOV EDX,dword ptr [ECX]
00801304 : MOV EAX,dword ptr [EDX + 0x1c]
00801307 : CALL EAX
00801309 : MOV ECX,dword ptr [0x017251fc]
0080130f : MOV EDX,dword ptr [ECX]
00801311 : MOV EAX,dword ptr [EDX + 0x1c]
00801314 : CALL EAX
00801316 : MOV EDI,dword ptr [ESI + 0xc]
00801319 : TEST EDI,EDI
0080131b : JZ 0x00801328
0080131d : CMP byte ptr [ESI + 0x30],0x0
00801321 : JNZ 0x00801328
00801323 : CALL 0x007fd100
00801328 : MOV dword ptr [EBP + -0x4],0xffffffff
0080132f : CMP dword ptr [EBP + -0x14],0x0
00801333 : JZ 0x00801346
00801335 : MOV ECX,dword ptr [EBP + -0x20]
00801338 : PUSH ECX
00801339 : CALL dword ptr [0x00b8511c]
0080133f : MOV dword ptr [EBP + -0x14],0x0
00801346 : MOV ECX,dword ptr [EBP + -0xc]
00801349 : MOV dword ptr FS:[0x0],ECX
00801350 : POP ECX
00801351 : POP EDI
00801352 : POP ESI
00801353 : POP EBX
00801354 : MOV ESP,EBP
00801356 : POP EBP
00801357 : RET
