PROGRAM  : Maestia.exe
FUNCTION : FUN_00874470
ENTRY    : 00874470
BODY     : [[00874470, 008747d8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00874470(void)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  int in_ECX;
  int *piVar5;
  int in_EDX;
  wchar_t *pwVar6;
  undefined4 uVar7;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  piVar5 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b66360;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined1 *)(in_ECX + 0x1fdd) = 1;
  iVar3 = *piVar5;
  if (iVar3 == 0) {
    FUN_00406460(L"window mgr is null");
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaMyCharacter::ReceiveSwapLookChangeWeaponSet",0xce7,local_30);
    }
    piVar5 = DAT_00da9894;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    *(undefined1 *)(in_ECX + 0x1fdd) = 0;
    *(undefined1 *)(in_ECX + 0x1fdc) = 0;
    if ((*piVar5 != 0) && (piVar5 = *(int **)(*piVar5 + 0x114), piVar5 != (int *)0x0)) {
      (**(code **)(*piVar5 + 4))(piVar5,"SetShowDisableBtn",&DAT_00c42ee0,0);
    }
    goto LAB_008747bd;
  }
  iVar1 = *(int *)(iVar3 + 0x130);
  if (((iVar1 == 0) || (*(int *)(iVar1 + 0x3c) == 0)) || (*(int *)(iVar3 + 0x200) == 0)) {
    FUN_00406460(L"gui Equip or Haildom pointer is null");
    local_8 = 1;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaMyCharacter::ReceiveSwapLookChangeWeaponSet",0xced,local_30);
    }
    piVar5 = DAT_00da9894;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    *(undefined1 *)(in_ECX + 0x1fdd) = 0;
    *(undefined1 *)(in_ECX + 0x1fdc) = 0;
    if ((*piVar5 != 0) && (piVar5 = *(int **)(*piVar5 + 0x114), piVar5 != (int *)0x0)) {
      (**(code **)(*piVar5 + 4))(piVar5,"SetShowDisableBtn",&DAT_00c42ee0,0);
    }
    goto LAB_008747bd;
  }
  if (iVar1 == 0) {
    piVar5 = (int *)0x0;
  }
  else {
    piVar5 = *(int **)(iVar1 + 0x3c);
  }
  iVar3 = (**(code **)(*piVar5 + 0x74))(0x1a,0,local_14);
  if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
    piVar5 = (int *)0x0;
  }
  else {
    piVar5 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
  }
  iVar4 = (**(code **)(*piVar5 + 0x74))(0x1b,0);
  iVar1 = *(int *)(in_EDX + 0xc);
  if (((iVar1 == -1) || (iVar3 == 0)) || (iVar1 != *(int *)(iVar3 + 0xc))) {
    iVar3 = *(int *)(in_EDX + 0x16);
    if (((iVar3 == -1) || (iVar4 == 0)) || (iVar3 != *(int *)(iVar4 + 0xc))) {
      iVar3 = *(int *)(*DAT_00da9894 + 0x140);
      bVar2 = false;
      if ((((iVar3 != 0) && (iVar3 = *(int *)(iVar3 + 0x38), iVar3 != 0)) &&
          (*(char *)(iVar3 + 0x32) != '\0')) && (*(short *)(iVar3 + 0x80) == 1)) {
        bVar2 = true;
      }
      iVar3 = *(int *)(*DAT_00da9894 + 0x130);
      if (iVar3 == 0) {
        piVar5 = (int *)0x0;
      }
      else {
        piVar5 = *(int **)(iVar3 + 0x3c);
      }
      (**(code **)(*piVar5 + 0x6c))(0,0x1a,0,0,0x1c,0,0);
      if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
        piVar5 = (int *)0x0;
      }
      else {
        piVar5 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
      }
      (**(code **)(*piVar5 + 0x6c))(0,0x1b,0,0,0x1d,0,0);
      FUN_00a3ae90(*(undefined4 *)(in_EDX + 0x10),0x1a,*(undefined2 *)(in_EDX + 0x14),0);
      FUN_00a3ae90(*(undefined4 *)(in_EDX + 0x1a),0x1b,*(undefined2 *)(in_EDX + 0x1e),0);
      *(undefined1 *)(in_ECX + 0x1fdd) = 0;
      if (!bVar2) {
        FUN_0086d7c0();
      }
      goto LAB_008747bd;
    }
    FUN_00404750(L"Can\'t find Item Key!!!!, weapon[%u], shield[%u]",iVar1,iVar3);
    local_8 = 3;
    piVar5 = (int *)*DAT_00da98e8;
    if (piVar5 != (int *)0x0) {
      uVar7 = 0xcfe;
      pwVar6 = L"AvaMyCharacter::ReceiveSwapLookChangeWeaponSet";
      goto LAB_008745f6;
    }
  }
  else {
    FUN_00404750(L"Can\'t find Item Key!!!!, weapon[%u], shield[%u]",iVar1,
                 *(undefined4 *)(in_EDX + 0x16));
    local_8 = 2;
    piVar5 = (int *)*DAT_00da98e8;
    if (piVar5 != (int *)0x0) {
      uVar7 = 0xcf7;
      pwVar6 = L"AvaMyCharacter::ReceiveSwapLookChangeWeaponSet";
LAB_008745f6:
      (**(code **)(*piVar5 + 0x14))(pwVar6,uVar7,local_30);
    }
  }
  *(undefined1 *)(in_ECX + 0x1fdd) = 0;
  FUN_0086d7c0();
  local_8 = 0xffffffff;
  FUN_00406560();
LAB_008747bd:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00874470 : PUSH EBP
00874471 : MOV EBP,ESP
00874473 : PUSH -0x1
00874475 : PUSH 0xb66360
0087447a : MOV EAX,FS:[0x0]
00874480 : PUSH EAX
00874481 : SUB ESP,0x2c
00874484 : MOV EAX,[0x00d66fa0]
00874489 : XOR EAX,EBP
0087448b : MOV dword ptr [EBP + -0x10],EAX
0087448e : PUSH EBX
0087448f : PUSH ESI
00874490 : PUSH EDI
00874491 : PUSH EAX
00874492 : LEA EAX,[EBP + -0xc]
00874495 : MOV FS:[0x0],EAX
0087449b : MOV EAX,[0x00da9894]
008744a0 : MOV EDI,ECX
008744a2 : MOV byte ptr [EDI + 0x1fdd],0x1
008744a9 : MOV EAX,dword ptr [EAX]
008744ab : XOR EBX,EBX
008744ad : MOV dword ptr [EBP + -0x34],EDI
008744b0 : MOV ESI,EDX
008744b2 : CMP EAX,EBX
008744b4 : JNZ 0x00874552
008744ba : PUSH 0xc42bbc
008744bf : LEA ECX,[EBP + -0x2c]
008744c2 : CALL 0x00406460
008744c7 : MOV dword ptr [EBP + -0x4],EBX
008744ca : MOV ECX,dword ptr [0x00da98e8]
008744d0 : MOV ECX,dword ptr [ECX]
008744d2 : CMP ECX,EBX
008744d4 : JZ 0x008744eb
008744d6 : MOV EDX,dword ptr [ECX]
008744d8 : MOV EDX,dword ptr [EDX + 0x14]
008744db : LEA EAX,[EBP + -0x2c]
008744de : PUSH EAX
008744df : PUSH 0xce7
008744e4 : PUSH 0xc42be8
008744e9 : CALL EDX
008744eb : MOV dword ptr [EBP + -0x4],0xffffffff
008744f2 : CMP dword ptr [EBP + -0x14],0x8
008744f6 : JC 0x00874500
008744f8 : MOV ECX,dword ptr [EBP + -0x28]
008744fb : CALL 0x006f04e0
00874500 : MOV ECX,dword ptr [0x00da9894]
00874506 : XOR EAX,EAX
00874508 : MOV dword ptr [EBP + -0x14],0x7
0087450f : MOV dword ptr [EBP + -0x18],EBX
00874512 : MOV word ptr [EBP + -0x28],AX
00874516 : MOV byte ptr [EDI + 0x1fdd],BL
0087451c : MOV byte ptr [EDI + 0x1fdc],BL
00874522 : MOV EAX,dword ptr [ECX]
00874524 : CMP EAX,EBX
00874526 : JZ 0x008747bd
0087452c : MOV EAX,dword ptr [EAX + 0x114]
00874532 : CMP EAX,EBX
00874534 : JZ 0x008747bd
0087453a : MOV EDX,dword ptr [EAX]
0087453c : PUSH EBX
0087453d : PUSH 0xc42ee0
00874542 : PUSH 0xc42ee4
00874547 : PUSH EAX
00874548 : MOV EAX,dword ptr [EDX + 0x4]
0087454b : CALL EAX
0087454d : JMP 0x008747ba
00874552 : MOV ECX,dword ptr [EAX + 0x130]
00874558 : CMP ECX,EBX
0087455a : JZ 0x0087472b
00874560 : CMP dword ptr [ECX + 0x3c],EBX
00874563 : JZ 0x0087472b
00874569 : CMP dword ptr [EAX + 0x200],EBX
0087456f : JZ 0x0087472b
00874575 : MOV EAX,ECX
00874577 : CMP EAX,EBX
00874579 : JNZ 0x0087457f
0087457b : XOR ECX,ECX
0087457d : JMP 0x00874582
0087457f : MOV ECX,dword ptr [EAX + 0x3c]
00874582 : MOV EDX,dword ptr [ECX]
00874584 : MOV EAX,dword ptr [EDX + 0x74]
00874587 : PUSH EBX
00874588 : PUSH 0x1a
0087458a : CALL EAX
0087458c : MOV ECX,dword ptr [0x00da9894]
00874592 : MOV EDI,EAX
00874594 : MOV EAX,dword ptr [ECX]
00874596 : MOV EAX,dword ptr [EAX + 0x130]
0087459c : CMP EAX,EBX
0087459e : JNZ 0x008745a4
008745a0 : XOR ECX,ECX
008745a2 : JMP 0x008745a7
008745a4 : MOV ECX,dword ptr [EAX + 0x3c]
008745a7 : MOV EDX,dword ptr [ECX]
008745a9 : MOV EAX,dword ptr [EDX + 0x74]
008745ac : PUSH EBX
008745ad : PUSH 0x1b
008745af : CALL EAX
008745b1 : MOV ECX,dword ptr [ESI + 0xc]
008745b4 : CMP ECX,-0x1
008745b7 : JZ 0x0087461f
008745b9 : CMP EDI,EBX
008745bb : JZ 0x0087461f
008745bd : CMP ECX,dword ptr [EDI + 0xc]
008745c0 : JNZ 0x0087461f
008745c2 : MOV EDX,dword ptr [ESI + 0x16]
008745c5 : PUSH EDX
008745c6 : PUSH ECX
008745c7 : PUSH 0xc42cf8
008745cc : LEA ESI,[EBP + -0x2c]
008745cf : CALL 0x00404750
008745d4 : ADD ESP,0xc
008745d7 : MOV dword ptr [EBP + -0x4],0x2
008745de : MOV EAX,[0x00da98e8]
008745e3 : MOV ECX,dword ptr [EAX]
008745e5 : CMP ECX,EBX
008745e7 : JZ 0x008745fd
008745e9 : MOV EAX,ESI
008745eb : PUSH EAX
008745ec : PUSH 0xcf7
008745f1 : PUSH 0xc42d58
008745f6 : MOV EDX,dword ptr [ECX]
008745f8 : MOV EDX,dword ptr [EDX + 0x14]
008745fb : CALL EDX
008745fd : MOV EAX,dword ptr [EBP + -0x34]
00874600 : MOV byte ptr [EAX + 0x1fdd],BL
00874606 : CALL 0x0086d7c0
0087460b : MOV dword ptr [EBP + -0x4],0xffffffff
00874612 : LEA ECX,[EBP + -0x2c]
00874615 : CALL 0x00406560
0087461a : JMP 0x008747bd
0087461f : MOV EDX,dword ptr [ESI + 0x16]
00874622 : CMP EDX,-0x1
00874625 : JZ 0x00874663
00874627 : CMP EAX,EBX
00874629 : JZ 0x00874663
0087462b : CMP EDX,dword ptr [EAX + 0xc]
0087462e : JNZ 0x00874663
00874630 : PUSH EDX
00874631 : PUSH ECX
00874632 : PUSH 0xc42db8
00874637 : LEA ESI,[EBP + -0x2c]
0087463a : CALL 0x00404750
0087463f : ADD ESP,0xc
00874642 : MOV dword ptr [EBP + -0x4],0x3
00874649 : MOV EAX,[0x00da98e8]
0087464e : MOV ECX,dword ptr [EAX]
00874650 : CMP ECX,EBX
00874652 : JZ 0x008745fd
00874654 : MOV EAX,ESI
00874656 : PUSH EAX
00874657 : PUSH 0xcfe
0087465c : PUSH 0xc42e18
00874661 : JMP 0x008745f6
00874663 : MOV EAX,[0x00da9894]
00874668 : MOV ECX,dword ptr [EAX]
0087466a : MOV EAX,dword ptr [ECX + 0x140]
00874670 : MOV byte ptr [EBP + -0x2d],BL
00874673 : CMP EAX,EBX
00874675 : JZ 0x00874691
00874677 : MOV EAX,dword ptr [EAX + 0x38]
0087467a : CMP EAX,EBX
0087467c : JZ 0x00874691
0087467e : CMP byte ptr [EAX + 0x32],BL
00874681 : JZ 0x00874691
00874683 : CMP word ptr [EAX + 0x80],0x1
0087468b : JNZ 0x00874691
0087468d : MOV byte ptr [EBP + -0x2d],0x1
00874691 : MOV EAX,dword ptr [ECX + 0x130]
00874697 : CMP EAX,EBX
00874699 : JNZ 0x0087469f
0087469b : XOR ECX,ECX
0087469d : JMP 0x008746a2
0087469f : MOV ECX,dword ptr [EAX + 0x3c]
008746a2 : MOV EDX,dword ptr [ECX]
008746a4 : MOV EAX,dword ptr [EDX + 0x6c]
008746a7 : PUSH EBX
008746a8 : PUSH EBX
008746a9 : PUSH 0x1c
008746ab : PUSH EBX
008746ac : PUSH EBX
008746ad : PUSH 0x1a
008746af : PUSH EBX
008746b0 : CALL EAX
008746b2 : MOV ECX,dword ptr [0x00da9894]
008746b8 : MOV EAX,dword ptr [ECX]
008746ba : MOV EAX,dword ptr [EAX + 0x130]
008746c0 : CMP EAX,EBX
008746c2 : JNZ 0x008746c8
008746c4 : XOR ECX,ECX
008746c6 : JMP 0x008746cb
008746c8 : MOV ECX,dword ptr [EAX + 0x3c]
008746cb : MOV EDX,dword ptr [ECX]
008746cd : MOV EAX,dword ptr [EDX + 0x6c]
008746d0 : PUSH EBX
008746d1 : PUSH EBX
008746d2 : PUSH 0x1d
008746d4 : PUSH EBX
008746d5 : PUSH EBX
008746d6 : PUSH 0x1b
008746d8 : PUSH EBX
008746d9 : CALL EAX
008746db : MOVZX ECX,word ptr [ESI + 0x14]
008746df : MOV EDX,dword ptr [ESI + 0x10]
008746e2 : MOV EAX,dword ptr [ESI + 0x4]
008746e5 : MOV EDI,dword ptr [0x00da93ec]
008746eb : PUSH EBX
008746ec : PUSH ECX
008746ed : PUSH 0x1a
008746ef : PUSH EDX
008746f0 : CALL 0x00a3ae90
008746f5 : MOVZX EAX,word ptr [ESI + 0x1e]
008746f9 : MOV ECX,dword ptr [ESI + 0x1a]
008746fc : MOV EDI,dword ptr [0x00da93ec]
00874702 : PUSH EBX
00874703 : PUSH EAX
00874704 : MOV EAX,dword ptr [ESI + 0x4]
00874707 : PUSH 0x1b
00874709 : PUSH ECX
0087470a : CALL 0x00a3ae90
0087470f : MOV EAX,dword ptr [EBP + -0x34]
00874712 : MOV byte ptr [EAX + 0x1fdd],BL
00874718 : CMP byte ptr [EBP + -0x2d],BL
0087471b : JNZ 0x008747bd
00874721 : CALL 0x0086d7c0
00874726 : JMP 0x008747bd
0087472b : PUSH 0xc42c48
00874730 : LEA ECX,[EBP + -0x2c]
00874733 : CALL 0x00406460
00874738 : MOV dword ptr [EBP + -0x4],0x1
0087473f : MOV EDX,dword ptr [0x00da98e8]
00874745 : MOV ECX,dword ptr [EDX]
00874747 : CMP ECX,EBX
00874749 : JZ 0x00874760
0087474b : MOV EAX,dword ptr [ECX]
0087474d : MOV EAX,dword ptr [EAX + 0x14]
00874750 : LEA EDX,[EBP + -0x2c]
00874753 : PUSH EDX
00874754 : PUSH 0xced
00874759 : PUSH 0xc42c98
0087475e : CALL EAX
00874760 : MOV dword ptr [EBP + -0x4],0xffffffff
00874767 : CMP dword ptr [EBP + -0x14],0x8
0087476b : JC 0x00874775
0087476d : MOV ECX,dword ptr [EBP + -0x28]
00874770 : CALL 0x006f04e0
00874775 : MOV EDX,dword ptr [0x00da9894]
0087477b : XOR ECX,ECX
0087477d : MOV dword ptr [EBP + -0x14],0x7
00874784 : MOV dword ptr [EBP + -0x18],EBX
00874787 : MOV word ptr [EBP + -0x28],CX
0087478b : MOV byte ptr [EDI + 0x1fdd],BL
00874791 : MOV byte ptr [EDI + 0x1fdc],BL
00874797 : MOV EAX,dword ptr [EDX]
00874799 : CMP EAX,EBX
0087479b : JZ 0x008747bd
0087479d : MOV EAX,dword ptr [EAX + 0x114]
008747a3 : CMP EAX,EBX
008747a5 : JZ 0x008747bd
008747a7 : MOV ECX,dword ptr [EAX]
008747a9 : MOV EDX,dword ptr [ECX + 0x4]
008747ac : PUSH EBX
008747ad : PUSH 0xc42ee0
008747b2 : PUSH 0xc42ee4
008747b7 : PUSH EAX
008747b8 : CALL EDX
008747ba : ADD ESP,0x10
008747bd : MOV ECX,dword ptr [EBP + -0xc]
008747c0 : MOV dword ptr FS:[0x0],ECX
008747c7 : POP ECX
008747c8 : POP EDI
008747c9 : POP ESI
008747ca : POP EBX
008747cb : MOV ECX,dword ptr [EBP + -0x10]
008747ce : XOR ECX,EBP
008747d0 : CALL 0x00633e6b
008747d5 : MOV ESP,EBP
008747d7 : POP EBP
008747d8 : RET
