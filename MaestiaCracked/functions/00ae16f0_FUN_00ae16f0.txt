PROGRAM  : Maestia.exe
FUNCTION : FUN_00ae16f0
ENTRY    : 00ae16f0
BODY     : [[00ae16f0, 00ae19e3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ae16f0(void)

{
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined1 local_b4 [28];
  undefined1 local_98 [28];
  undefined1 local_7c [4];
  int local_78;
  undefined4 ***local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b655a9;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  switch(*(undefined1 *)(in_ECX + 3)) {
  case 1:
    if (DAT_00da93ec != 0) {
      FUN_00a33950(DAT_00da93ec);
    }
    break;
  case 2:
    if (DAT_00da93ec != 0) {
      FUN_00a204c0(in_ECX);
    }
    break;
  case 3:
    if (DAT_00da93ec != 0) {
      FUN_00a205c0(in_ECX);
    }
    break;
  case 4:
    if (DAT_00da93ec == 0) break;
    FUN_00a1be20(in_ECX);
    iVar1 = *DAT_00da9894;
    if (((iVar1 == 0) || (*(int *)(iVar1 + 0x274) == 0)) ||
       (*(int *)(*(int *)(iVar1 + 0x274) + 0x44) == 0)) break;
    FUN_00412100(local_7c);
    local_8 = 0;
    if (local_78 != 0) {
      FUN_00406460(L"IDS_ITEM_TIME_LIMIT_NOTICE");
      local_8._0_1_ = 1;
      iVar1 = FUN_0081d120(local_b4);
      local_8._0_1_ = 2;
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      uVar2 = FUN_00404750(iVar1,local_2c[0]);
      local_8._0_1_ = 3;
      FUN_008ede80(uVar2,0);
      local_8._0_1_ = 2;
      FUN_00406560();
      local_8._0_1_ = 1;
      FUN_00406560();
      local_8 = (uint)local_8._1_3_ << 8;
LAB_00ae1856:
      FUN_00406560();
      *(undefined4 *)(*(int *)(*DAT_00da9894 + 0x274) + 0x44) = 0;
      FUN_008e4660();
    }
    goto LAB_00ae187c;
  case 0xb:
    if (DAT_00da93ec != 0) {
      FUN_00a1bdc0(in_ECX);
    }
    break;
  case 0xc:
    if (DAT_00da93ec == 0) break;
    FUN_00a334a0(in_ECX);
    iVar1 = *DAT_00da9894;
    if (((iVar1 == 0) || (*(int *)(iVar1 + 0x274) == 0)) ||
       (*(int *)(*(int *)(iVar1 + 0x274) + 0x44) == 0)) break;
    FUN_00412100(local_7c);
    local_8 = 4;
    if (local_78 != 0) {
      FUN_00406460(L"IDS_ITEM_TIME_LIMIT_NOTICE");
      local_8._0_1_ = 5;
      iVar1 = FUN_0081d120(local_98);
      local_8._0_1_ = 6;
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      uVar2 = FUN_00404750(iVar1,local_2c[0]);
      local_8._0_1_ = 7;
      FUN_008ede80(uVar2,0);
      local_8._0_1_ = 6;
      FUN_00406560();
      local_8._0_1_ = 5;
      FUN_00406560();
      local_8 = CONCAT31(local_8._1_3_,4);
      goto LAB_00ae1856;
    }
LAB_00ae187c:
    local_8 = 0xffffffff;
    FUN_00412070(local_7c);
    break;
  case 0xd:
    if (DAT_00da93ec != 0) {
      FUN_00a357b0(in_ECX);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ae16f0 : PUSH EBP
00ae16f1 : MOV EBP,ESP
00ae16f3 : PUSH -0x1
00ae16f5 : PUSH 0xb655a9
00ae16fa : MOV EAX,FS:[0x0]
00ae1700 : PUSH EAX
00ae1701 : SUB ESP,0x118
00ae1707 : MOV EAX,[0x00d66fa0]
00ae170c : XOR EAX,EBP
00ae170e : MOV dword ptr [EBP + -0x10],EAX
00ae1711 : PUSH ESI
00ae1712 : PUSH EDI
00ae1713 : PUSH EAX
00ae1714 : LEA EAX,[EBP + -0xc]
00ae1717 : MOV FS:[0x0],EAX
00ae171d : MOVZX EAX,byte ptr [ECX + 0x3]
00ae1721 : DEC EAX
00ae1722 : CMP EAX,0xc
00ae1725 : JA 0x00ae19c4
00ae172b : JMP dword ptr [EAX*0x4 + 0xae19e4]
00ae1732 : MOV EAX,[0x00da93ec]
00ae1737 : TEST EAX,EAX
00ae1739 : JZ 0x00ae19c4
00ae173f : PUSH EAX
00ae1740 : CALL 0x00a33950
00ae1745 : JMP 0x00ae19c4
00ae174a : MOV EDI,dword ptr [0x00da93ec]
00ae1750 : TEST EDI,EDI
00ae1752 : JZ 0x00ae19c4
00ae1758 : PUSH ECX
00ae1759 : CALL 0x00a204c0
00ae175e : JMP 0x00ae19c4
00ae1763 : MOV ESI,dword ptr [0x00da93ec]
00ae1769 : TEST ESI,ESI
00ae176b : JZ 0x00ae19c4
00ae1771 : PUSH ECX
00ae1772 : CALL 0x00a1be20
00ae1777 : MOV EAX,[0x00da9894]
00ae177c : MOV EAX,dword ptr [EAX]
00ae177e : TEST EAX,EAX
00ae1780 : JZ 0x00ae19c4
00ae1786 : CMP dword ptr [EAX + 0x274],0x0
00ae178d : JZ 0x00ae19c4
00ae1793 : MOV ECX,dword ptr [EAX + 0x274]
00ae1799 : CMP dword ptr [ECX + 0x44],0x0
00ae179d : JZ 0x00ae19c4
00ae17a3 : MOV EAX,ECX
00ae17a5 : LEA ECX,[EBP + -0x78]
00ae17a8 : PUSH ECX
00ae17a9 : MOV ECX,EAX
00ae17ab : CALL 0x00412100
00ae17b0 : MOV dword ptr [EBP + -0x4],0x0
00ae17b7 : CMP dword ptr [EBP + -0x74],0x0
00ae17bb : JZ 0x00ae187c
00ae17c1 : PUSH 0xcb7f30
00ae17c6 : LEA ECX,[EBP + 0xffffff50]
00ae17cc : CALL 0x00406460
00ae17d1 : MOV byte ptr [EBP + -0x4],0x1
00ae17d5 : MOV ECX,dword ptr [0x0172491c]
00ae17db : LEA EDX,[EBP + 0xffffff50]
00ae17e1 : PUSH EDX
00ae17e2 : LEA EDI,[EBP + 0xffffff34]
00ae17e8 : CALL 0x0081d120
00ae17ed : MOV byte ptr [EBP + -0x4],0x2
00ae17f1 : MOV ECX,dword ptr [EBP + -0x28]
00ae17f4 : MOV EDX,0x8
00ae17f9 : CMP dword ptr [EBP + -0x14],EDX
00ae17fc : JNC 0x00ae1801
00ae17fe : LEA ECX,[EBP + -0x28]
00ae1801 : CMP dword ptr [EAX + 0x18],EDX
00ae1804 : JC 0x00ae180b
00ae1806 : MOV EAX,dword ptr [EAX + 0x4]
00ae1809 : JMP 0x00ae180e
00ae180b : ADD EAX,0x4
00ae180e : PUSH ECX
00ae180f : PUSH EAX
00ae1810 : LEA ESI,[EBP + 0xfffffee0]
00ae1816 : CALL 0x00404750
00ae181b : ADD ESP,0x8
00ae181e : MOV byte ptr [EBP + -0x4],0x3
00ae1822 : MOV ECX,dword ptr [0x00da9894]
00ae1828 : MOV ECX,dword ptr [ECX]
00ae182a : PUSH 0x0
00ae182c : PUSH EAX
00ae182d : CALL 0x008ede80
00ae1832 : MOV byte ptr [EBP + -0x4],0x2
00ae1836 : MOV ECX,ESI
00ae1838 : CALL 0x00406560
00ae183d : MOV byte ptr [EBP + -0x4],0x1
00ae1841 : LEA ECX,[EBP + 0xffffff34]
00ae1847 : CALL 0x00406560
00ae184c : MOV byte ptr [EBP + -0x4],0x0
00ae1850 : LEA ECX,[EBP + 0xffffff50]
00ae1856 : CALL 0x00406560
00ae185b : MOV EAX,[0x00da9894]
00ae1860 : MOV ECX,dword ptr [EAX]
00ae1862 : MOV ECX,dword ptr [ECX + 0x274]
00ae1868 : MOV dword ptr [ECX + 0x44],0x0
00ae186f : MOV EAX,dword ptr [EAX]
00ae1871 : MOV ECX,dword ptr [EAX + 0x274]
00ae1877 : CALL 0x008e4660
00ae187c : MOV dword ptr [EBP + -0x4],0xffffffff
00ae1883 : LEA EDX,[EBP + -0x78]
00ae1886 : PUSH EDX
00ae1887 : CALL 0x00412070
00ae188c : JMP 0x00ae19c4
00ae1891 : MOV EDI,dword ptr [0x00da93ec]
00ae1897 : TEST EDI,EDI
00ae1899 : JZ 0x00ae19c4
00ae189f : PUSH ECX
00ae18a0 : CALL 0x00a1bdc0
00ae18a5 : JMP 0x00ae19c4
00ae18aa : MOV EDI,dword ptr [0x00da93ec]
00ae18b0 : TEST EDI,EDI
00ae18b2 : JZ 0x00ae19c4
00ae18b8 : PUSH ECX
00ae18b9 : CALL 0x00a334a0
00ae18be : MOV EAX,[0x00da9894]
00ae18c3 : MOV EAX,dword ptr [EAX]
00ae18c5 : TEST EAX,EAX
00ae18c7 : JZ 0x00ae19c4
00ae18cd : CMP dword ptr [EAX + 0x274],0x0
00ae18d4 : JZ 0x00ae19c4
00ae18da : MOV ECX,dword ptr [EAX + 0x274]
00ae18e0 : CMP dword ptr [ECX + 0x44],0x0
00ae18e4 : JZ 0x00ae19c4
00ae18ea : MOV EAX,ECX
00ae18ec : LEA ECX,[EBP + -0x78]
00ae18ef : PUSH ECX
00ae18f0 : MOV ECX,EAX
00ae18f2 : CALL 0x00412100
00ae18f7 : MOV dword ptr [EBP + -0x4],0x4
00ae18fe : CMP dword ptr [EBP + -0x74],0x0
00ae1902 : JZ 0x00ae187c
00ae1908 : PUSH 0xcb7f68
00ae190d : LEA ECX,[EBP + 0xffffff6c]
00ae1913 : CALL 0x00406460
00ae1918 : MOV byte ptr [EBP + -0x4],0x5
00ae191c : MOV ECX,dword ptr [0x0172491c]
00ae1922 : LEA EDX,[EBP + 0xffffff6c]
00ae1928 : PUSH EDX
00ae1929 : LEA EDI,[EBP + 0xffffff18]
00ae192f : CALL 0x0081d120
00ae1934 : MOV byte ptr [EBP + -0x4],0x6
00ae1938 : MOV ECX,dword ptr [EBP + -0x28]
00ae193b : MOV EDX,0x8
00ae1940 : CMP dword ptr [EBP + -0x14],EDX
00ae1943 : JNC 0x00ae1948
00ae1945 : LEA ECX,[EBP + -0x28]
00ae1948 : CMP dword ptr [EAX + 0x18],EDX
00ae194b : JC 0x00ae1952
00ae194d : MOV EAX,dword ptr [EAX + 0x4]
00ae1950 : JMP 0x00ae1955
00ae1952 : ADD EAX,0x4
00ae1955 : PUSH ECX
00ae1956 : PUSH EAX
00ae1957 : LEA ESI,[EBP + 0xfffffefc]
00ae195d : CALL 0x00404750
00ae1962 : ADD ESP,0x8
00ae1965 : MOV byte ptr [EBP + -0x4],0x7
00ae1969 : MOV ECX,dword ptr [0x00da9894]
00ae196f : MOV ECX,dword ptr [ECX]
00ae1971 : PUSH 0x0
00ae1973 : PUSH EAX
00ae1974 : CALL 0x008ede80
00ae1979 : MOV byte ptr [EBP + -0x4],0x6
00ae197d : MOV ECX,ESI
00ae197f : CALL 0x00406560
00ae1984 : MOV byte ptr [EBP + -0x4],0x5
00ae1988 : LEA ECX,[EBP + 0xffffff18]
00ae198e : CALL 0x00406560
00ae1993 : MOV byte ptr [EBP + -0x4],0x4
00ae1997 : LEA ECX,[EBP + 0xffffff6c]
00ae199d : JMP 0x00ae1856
00ae19a2 : MOV EAX,[0x00da93ec]
00ae19a7 : TEST EAX,EAX
00ae19a9 : JZ 0x00ae19c4
00ae19ab : PUSH ECX
00ae19ac : CALL 0x00a205c0
00ae19b1 : JMP 0x00ae19c4
00ae19b3 : MOV EAX,[0x00da93ec]
00ae19b8 : TEST EAX,EAX
00ae19ba : JZ 0x00ae19c4
00ae19bc : PUSH ECX
00ae19bd : MOV ECX,EAX
00ae19bf : CALL 0x00a357b0
00ae19c4 : MOV EAX,0x1
00ae19c9 : MOV ECX,dword ptr [EBP + -0xc]
00ae19cc : MOV dword ptr FS:[0x0],ECX
00ae19d3 : POP ECX
00ae19d4 : POP EDI
00ae19d5 : POP ESI
00ae19d6 : MOV ECX,dword ptr [EBP + -0x10]
00ae19d9 : XOR ECX,EBP
00ae19db : CALL 0x00633e6b
00ae19e0 : MOV ESP,EBP
00ae19e2 : POP EBP
00ae19e3 : RET
