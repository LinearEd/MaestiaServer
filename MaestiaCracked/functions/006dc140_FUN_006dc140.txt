PROGRAM  : Maestia.exe
FUNCTION : FUN_006dc140
ENTRY    : 006dc140
BODY     : [[006dc140, 006dc20c] [006dc210, 006dc398]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006dc140(int *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  int *piVar5;
  undefined4 *puVar6;
  int iVar7;
  bool bVar8;
  bool bVar9;
  int local_c;
  int *local_8;
  
  bVar8 = param_1[0x5b] != 0;
  iVar2 = param_1[0x66];
  bVar4 = false;
  if (bVar8) {
    if ((param_1[0x5c] < param_1[0x5b]) || (0x3f < param_1[0x5c])) {
      bVar4 = true;
    }
    bVar9 = param_1[0x49] == 1;
  }
  else {
    bVar9 = param_1[0x5c] == 0;
  }
  if (!bVar9) {
    bVar4 = true;
  }
  if ((param_1[0x5d] != 0) && (param_1[0x5e] != param_1[0x5d] + -1)) {
    bVar4 = true;
  }
  if ((0xd < param_1[0x5e]) || (bVar4)) {
    *(undefined4 *)(*param_1 + 0x14) = 0x10;
    *(int *)(*param_1 + 0x18) = param_1[0x5b];
    *(int *)(*param_1 + 0x1c) = param_1[0x5c];
    *(int *)(*param_1 + 0x20) = param_1[0x5d];
    *(int *)(*param_1 + 0x24) = param_1[0x5e];
    (**(code **)*param_1)(param_1);
  }
  local_c = 0;
  if (0 < param_1[0x49]) {
    local_8 = param_1 + 0x4a;
    do {
      iVar3 = *(int *)(*local_8 + 4);
      piVar5 = (int *)(iVar3 * 0x100 + param_1[0x23]);
      if ((bVar8) && (*piVar5 < 0)) {
        *(undefined4 *)(*param_1 + 0x14) = 0x73;
        *(int *)(*param_1 + 0x18) = iVar3;
        *(undefined4 *)(*param_1 + 0x1c) = 0;
        (**(code **)(*param_1 + 4))(param_1,0xffffffff);
      }
      iVar7 = param_1[0x5b];
      if (iVar7 <= param_1[0x5c]) {
        do {
          if (param_1[0x5d] != (piVar5[iVar7] & (piVar5[iVar7] < 0) - 1)) {
            *(undefined4 *)(*param_1 + 0x14) = 0x73;
            *(int *)(*param_1 + 0x18) = iVar3;
            *(int *)(*param_1 + 0x1c) = iVar7;
            (**(code **)(*param_1 + 4))(param_1,0xffffffff);
          }
          piVar5[iVar7] = param_1[0x5e];
          iVar7 = iVar7 + 1;
        } while (iVar7 <= param_1[0x5c]);
      }
      local_8 = local_8 + 1;
      local_c = local_c + 1;
    } while (local_c < param_1[0x49]);
  }
  if (param_1[0x5d] == 0) {
    if (bVar8) {
      *(code **)(iVar2 + 4) = FUN_006dba40;
    }
    else {
      *(code **)(iVar2 + 4) = FUN_006db800;
    }
  }
  else if (bVar8) {
    *(undefined1 **)(iVar2 + 4) = &LAB_006dbd60;
  }
  else {
    *(code **)(iVar2 + 4) = FUN_006dbc80;
  }
  local_c = 0;
  if (0 < param_1[0x49]) {
    puVar6 = (undefined4 *)(iVar2 + 0x18);
    piVar5 = param_1 + 0x4a;
    do {
      if (bVar8) {
        iVar3 = *(int *)(*piVar5 + 0x18);
        puVar1 = (undefined4 *)(iVar2 + 0x2c + iVar3 * 4);
        FUN_006dac70(param_1,0,iVar3,puVar1);
        *(undefined4 *)(iVar2 + 0x3c) = *puVar1;
      }
      else if (param_1[0x5d] == 0) {
        iVar3 = *(int *)(*piVar5 + 0x14);
        FUN_006dac70(param_1,1,iVar3,iVar2 + 0x2c + iVar3 * 4);
      }
      *puVar6 = 0;
      local_c = local_c + 1;
      piVar5 = piVar5 + 1;
      puVar6 = puVar6 + 1;
    } while (local_c < param_1[0x49]);
  }
  *(undefined4 *)(iVar2 + 0x10) = 0;
  *(undefined4 *)(iVar2 + 0xc) = 0;
  *(undefined4 *)(iVar2 + 0x14) = 0;
  *(undefined1 *)(iVar2 + 8) = 0;
  *(int *)(iVar2 + 0x28) = param_1[0x3f];
  return;
}



============================================================
DISASSEMBLY
============================================================
006dc140 : SUB ESP,0xc
006dc143 : PUSH EBX
006dc144 : PUSH EBP
006dc145 : PUSH ESI
006dc146 : MOV ESI,dword ptr [ESP + 0x1c]
006dc14a : MOV EAX,dword ptr [ESI + 0x16c]
006dc150 : XOR EBP,EBP
006dc152 : CMP EAX,EBP
006dc154 : SETZ BL
006dc157 : PUSH EDI
006dc158 : MOV EDI,dword ptr [ESI + 0x198]
006dc15e : XOR CL,CL
006dc160 : MOV dword ptr [ESP + 0x18],EDI
006dc164 : MOV byte ptr [ESP + 0x20],BL
006dc168 : TEST BL,BL
006dc16a : JZ 0x006dc174
006dc16c : CMP dword ptr [ESI + 0x170],EBP
006dc172 : JMP 0x006dc18c
006dc174 : MOV EDX,dword ptr [ESI + 0x170]
006dc17a : CMP EAX,EDX
006dc17c : JG 0x006dc183
006dc17e : CMP EDX,0x40
006dc181 : JL 0x006dc185
006dc183 : MOV CL,0x1
006dc185 : CMP dword ptr [ESI + 0x124],0x1
006dc18c : JZ 0x006dc190
006dc18e : MOV CL,0x1
006dc190 : MOV EAX,dword ptr [ESI + 0x174]
006dc196 : CMP EAX,EBP
006dc198 : JZ 0x006dc1a5
006dc19a : DEC EAX
006dc19b : CMP dword ptr [ESI + 0x178],EAX
006dc1a1 : JZ 0x006dc1a5
006dc1a3 : MOV CL,0x1
006dc1a5 : CMP dword ptr [ESI + 0x178],0xd
006dc1ac : JG 0x006dc1b2
006dc1ae : TEST CL,CL
006dc1b0 : JZ 0x006dc1f1
006dc1b2 : MOV EAX,dword ptr [ESI]
006dc1b4 : MOV dword ptr [EAX + 0x14],0x10
006dc1bb : MOV ECX,dword ptr [ESI]
006dc1bd : MOV EDX,dword ptr [ESI + 0x16c]
006dc1c3 : MOV dword ptr [ECX + 0x18],EDX
006dc1c6 : MOV EAX,dword ptr [ESI]
006dc1c8 : MOV ECX,dword ptr [ESI + 0x170]
006dc1ce : MOV dword ptr [EAX + 0x1c],ECX
006dc1d1 : MOV EDX,dword ptr [ESI]
006dc1d3 : MOV EAX,dword ptr [ESI + 0x174]
006dc1d9 : MOV dword ptr [EDX + 0x20],EAX
006dc1dc : MOV ECX,dword ptr [ESI]
006dc1de : MOV EDX,dword ptr [ESI + 0x178]
006dc1e4 : MOV dword ptr [ECX + 0x24],EDX
006dc1e7 : MOV EAX,dword ptr [ESI]
006dc1e9 : MOV ECX,dword ptr [EAX]
006dc1eb : PUSH ESI
006dc1ec : CALL ECX
006dc1ee : ADD ESP,0x4
006dc1f1 : CMP dword ptr [ESI + 0x124],EBP
006dc1f7 : MOV dword ptr [ESP + 0x10],EBP
006dc1fb : JLE 0x006dc2d0
006dc201 : LEA EDX,[ESI + 0x128]
006dc207 : MOV dword ptr [ESP + 0x14],EDX
006dc20b : JMP 0x006dc210
006dc210 : MOV EAX,dword ptr [ESP + 0x14]
006dc214 : MOV ECX,dword ptr [EAX]
006dc216 : MOV EBX,dword ptr [ECX + 0x4]
006dc219 : MOV EBP,EBX
006dc21b : SHL EBP,0x8
006dc21e : ADD EBP,dword ptr [ESI + 0x8c]
006dc224 : CMP byte ptr [ESP + 0x20],0x0
006dc229 : JNZ 0x006dc255
006dc22b : CMP dword ptr [EBP],0x0
006dc22f : JGE 0x006dc255
006dc231 : MOV EDX,dword ptr [ESI]
006dc233 : MOV dword ptr [EDX + 0x14],0x73
006dc23a : MOV EAX,dword ptr [ESI]
006dc23c : MOV dword ptr [EAX + 0x18],EBX
006dc23f : MOV ECX,dword ptr [ESI]
006dc241 : MOV dword ptr [ECX + 0x1c],0x0
006dc248 : MOV EDX,dword ptr [ESI]
006dc24a : MOV EAX,dword ptr [EDX + 0x4]
006dc24d : PUSH -0x1
006dc24f : PUSH ESI
006dc250 : CALL EAX
006dc252 : ADD ESP,0x8
006dc255 : MOV EDI,dword ptr [ESI + 0x16c]
006dc25b : CMP EDI,dword ptr [ESI + 0x170]
006dc261 : JG 0x006dc2ac
006dc263 : MOV EAX,dword ptr [EBP + EDI*0x4]
006dc267 : XOR ECX,ECX
006dc269 : TEST EAX,EAX
006dc26b : SETL CL
006dc26e : DEC ECX
006dc26f : AND EAX,ECX
006dc271 : CMP dword ptr [ESI + 0x174],EAX
006dc277 : JZ 0x006dc299
006dc279 : MOV EDX,dword ptr [ESI]
006dc27b : MOV dword ptr [EDX + 0x14],0x73
006dc282 : MOV EAX,dword ptr [ESI]
006dc284 : MOV dword ptr [EAX + 0x18],EBX
006dc287 : MOV ECX,dword ptr [ESI]
006dc289 : MOV dword ptr [ECX + 0x1c],EDI
006dc28c : MOV EDX,dword ptr [ESI]
006dc28e : MOV EAX,dword ptr [EDX + 0x4]
006dc291 : PUSH -0x1
006dc293 : PUSH ESI
006dc294 : CALL EAX
006dc296 : ADD ESP,0x8
006dc299 : MOV ECX,dword ptr [ESI + 0x178]
006dc29f : MOV dword ptr [EBP + EDI*0x4],ECX
006dc2a3 : INC EDI
006dc2a4 : CMP EDI,dword ptr [ESI + 0x170]
006dc2aa : JLE 0x006dc263
006dc2ac : MOV EAX,dword ptr [ESP + 0x10]
006dc2b0 : ADD dword ptr [ESP + 0x14],0x4
006dc2b5 : INC EAX
006dc2b6 : CMP EAX,dword ptr [ESI + 0x124]
006dc2bc : MOV dword ptr [ESP + 0x10],EAX
006dc2c0 : JL 0x006dc210
006dc2c6 : MOV EDI,dword ptr [ESP + 0x18]
006dc2ca : MOV BL,byte ptr [ESP + 0x20]
006dc2ce : XOR EBP,EBP
006dc2d0 : CMP dword ptr [ESI + 0x174],EBP
006dc2d6 : JNZ 0x006dc2ee
006dc2d8 : TEST BL,BL
006dc2da : JZ 0x006dc2e5
006dc2dc : MOV dword ptr [EDI + 0x4],0x6db800
006dc2e3 : JMP 0x006dc302
006dc2e5 : MOV dword ptr [EDI + 0x4],0x6dba40
006dc2ec : JMP 0x006dc302
006dc2ee : TEST BL,BL
006dc2f0 : JZ 0x006dc2fb
006dc2f2 : MOV dword ptr [EDI + 0x4],0x6dbc80
006dc2f9 : JMP 0x006dc302
006dc2fb : MOV dword ptr [EDI + 0x4],0x6dbd60
006dc302 : CMP dword ptr [ESI + 0x124],EBP
006dc308 : MOV dword ptr [ESP + 0x10],EBP
006dc30c : JLE 0x006dc37b
006dc30e : LEA EBP,[EDI + 0x18]
006dc311 : LEA EBX,[ESI + 0x128]
006dc317 : CMP byte ptr [ESP + 0x20],0x0
006dc31c : MOV EAX,dword ptr [EBX]
006dc31e : JZ 0x006dc33c
006dc320 : CMP dword ptr [ESI + 0x174],0x0
006dc327 : JNZ 0x006dc35b
006dc329 : MOV EAX,dword ptr [EAX + 0x14]
006dc32c : LEA EDX,[EDI + EAX*0x4 + 0x2c]
006dc330 : PUSH EDX
006dc331 : PUSH EAX
006dc332 : PUSH 0x1
006dc334 : PUSH ESI
006dc335 : CALL 0x006dac70
006dc33a : JMP 0x006dc358
006dc33c : MOV EAX,dword ptr [EAX + 0x18]
006dc33f : LEA EDI,[EDI + EAX*0x4 + 0x2c]
006dc343 : PUSH EDI
006dc344 : PUSH EAX
006dc345 : PUSH 0x0
006dc347 : PUSH ESI
006dc348 : CALL 0x006dac70
006dc34d : MOV EAX,dword ptr [EDI]
006dc34f : MOV ECX,dword ptr [ESP + 0x28]
006dc353 : MOV dword ptr [ECX + 0x3c],EAX
006dc356 : MOV EDI,ECX
006dc358 : ADD ESP,0x10
006dc35b : MOV EAX,dword ptr [ESP + 0x10]
006dc35f : MOV dword ptr [EBP],0x0
006dc366 : INC EAX
006dc367 : ADD EBX,0x4
006dc36a : ADD EBP,0x4
006dc36d : CMP EAX,dword ptr [ESI + 0x124]
006dc373 : MOV dword ptr [ESP + 0x10],EAX
006dc377 : JL 0x006dc317
006dc379 : XOR EBP,EBP
006dc37b : MOV dword ptr [EDI + 0x10],EBP
006dc37e : MOV dword ptr [EDI + 0xc],EBP
006dc381 : MOV dword ptr [EDI + 0x14],EBP
006dc384 : MOV byte ptr [EDI + 0x8],0x0
006dc388 : MOV EDX,dword ptr [ESI + 0xfc]
006dc38e : MOV dword ptr [EDI + 0x28],EDX
006dc391 : POP EDI
006dc392 : POP ESI
006dc393 : POP EBP
006dc394 : POP EBX
006dc395 : ADD ESP,0xc
006dc398 : RET
