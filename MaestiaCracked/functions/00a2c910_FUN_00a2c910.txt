PROGRAM  : Maestia.exe
FUNCTION : FUN_00a2c910
ENTRY    : 00a2c910
BODY     : [[00a2c910, 00a2ca81]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a2c910(int param_1,undefined4 param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  int iVar4;
  uint local_4c;
  uint local_30;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b428e2;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_28 = 0;
  *(undefined4 *)(param_1 + 0x5ac) = param_2;
  local_14 = 7;
  local_18 = 0;
  FUN_00406360(L"IDS_CHARACTER_OPEN_SELECT_REBIRTH",0x21);
  local_8 = 0;
  iVar2 = FUN_0081d120(local_2c);
  local_8._0_1_ = 1;
  if (*(uint *)(in_ECX + 0x18) < 8) {
    iVar4 = in_ECX + 4;
  }
  else {
    iVar4 = *(int *)(in_ECX + 4);
  }
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar2 = iVar2 + 4;
  }
  else {
    iVar2 = *(int *)(iVar2 + 4);
  }
  uVar3 = FUN_00404750(iVar2,iVar4,uVar1);
  local_8._0_1_ = 2;
  FUN_00405eb0(uVar3,0,0xffffffff);
  local_8 = CONCAT31(local_8._1_3_,1);
  if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = 0xffffffff;
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  if (*(char *)((int)*(int **)(*DAT_00da9894 + 0x144) + 0x32) != '\0') {
    (**(code **)(**(int **)(*DAT_00da9894 + 0x144) + 0x20))();
  }
  iVar2 = FUN_008ede80(param_1 + 0x5b0,2);
  if (iVar2 != 0) {
    if (*(code **)(iVar2 + 0x60) != (code *)0x0) {
      (**(code **)(iVar2 + 0x60))(1,iVar2);
    }
    *(code **)(iVar2 + 0x60) = FUN_00a2a730;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a2c910 : PUSH EBP
00a2c911 : MOV EBP,ESP
00a2c913 : PUSH -0x1
00a2c915 : PUSH 0xb428e2
00a2c91a : MOV EAX,FS:[0x0]
00a2c920 : PUSH EAX
00a2c921 : SUB ESP,0x54
00a2c924 : PUSH EBX
00a2c925 : PUSH ESI
00a2c926 : PUSH EDI
00a2c927 : MOV EAX,[0x00d66fa0]
00a2c92c : XOR EAX,EBP
00a2c92e : PUSH EAX
00a2c92f : LEA EAX,[EBP + -0xc]
00a2c932 : MOV FS:[0x0],EAX
00a2c938 : MOV ESI,ECX
00a2c93a : MOV EBX,dword ptr [EBP + 0x8]
00a2c93d : MOV EAX,dword ptr [EBP + 0xc]
00a2c940 : XOR ECX,ECX
00a2c942 : PUSH 0x21
00a2c944 : MOV word ptr [EBP + -0x24],CX
00a2c948 : XOR EDI,EDI
00a2c94a : PUSH 0xcc3598
00a2c94f : LEA ECX,[EBP + -0x28]
00a2c952 : MOV dword ptr [EBX + 0x5ac],EAX
00a2c958 : MOV dword ptr [EBP + -0x10],0x7
00a2c95f : MOV dword ptr [EBP + -0x14],EDI
00a2c962 : CALL 0x00406360
00a2c967 : MOV dword ptr [EBP + -0x4],EDI
00a2c96a : MOV ECX,dword ptr [0x0172491c]
00a2c970 : LEA EDX,[EBP + -0x28]
00a2c973 : PUSH EDX
00a2c974 : LEA EDI,[EBP + -0x60]
00a2c977 : CALL 0x0081d120
00a2c97c : MOV byte ptr [EBP + -0x4],0x1
00a2c980 : MOV EDI,0x8
00a2c985 : CMP dword ptr [ESI + 0x18],EDI
00a2c988 : JC 0x00a2c98f
00a2c98a : MOV ESI,dword ptr [ESI + 0x4]
00a2c98d : JMP 0x00a2c992
00a2c98f : ADD ESI,0x4
00a2c992 : CMP dword ptr [EAX + 0x18],EDI
00a2c995 : JC 0x00a2c99c
00a2c997 : MOV EAX,dword ptr [EAX + 0x4]
00a2c99a : JMP 0x00a2c99f
00a2c99c : ADD EAX,0x4
00a2c99f : PUSH ESI
00a2c9a0 : PUSH EAX
00a2c9a1 : LEA ESI,[EBP + -0x44]
00a2c9a4 : CALL 0x00404750
00a2c9a9 : ADD ESP,0x8
00a2c9ac : MOV byte ptr [EBP + -0x4],0x2
00a2c9b0 : PUSH -0x1
00a2c9b2 : PUSH 0x0
00a2c9b4 : LEA ESI,[EBX + 0x5b0]
00a2c9ba : PUSH EAX
00a2c9bb : MOV ECX,ESI
00a2c9bd : CALL 0x00405eb0
00a2c9c2 : MOV byte ptr [EBP + -0x4],0x1
00a2c9c6 : CMP dword ptr [EBP + -0x2c],EDI
00a2c9c9 : JC 0x00a2c9d3
00a2c9cb : MOV ECX,dword ptr [EBP + -0x40]
00a2c9ce : CALL 0x006f04e0
00a2c9d3 : XOR EAX,EAX
00a2c9d5 : MOV EBX,0x7
00a2c9da : MOV dword ptr [EBP + -0x2c],EBX
00a2c9dd : MOV dword ptr [EBP + -0x30],0x0
00a2c9e4 : MOV word ptr [EBP + -0x40],AX
00a2c9e8 : MOV byte ptr [EBP + -0x4],AL
00a2c9eb : CMP dword ptr [EBP + -0x48],EDI
00a2c9ee : JC 0x00a2c9f8
00a2c9f0 : MOV ECX,dword ptr [EBP + -0x5c]
00a2c9f3 : CALL 0x006f04e0
00a2c9f8 : XOR ECX,ECX
00a2c9fa : MOV dword ptr [EBP + -0x48],EBX
00a2c9fd : MOV dword ptr [EBP + -0x4c],0x0
00a2ca04 : MOV word ptr [EBP + -0x5c],CX
00a2ca08 : MOV dword ptr [EBP + -0x4],0xffffffff
00a2ca0f : CMP dword ptr [EBP + -0x10],EDI
00a2ca12 : JC 0x00a2ca1c
00a2ca14 : MOV ECX,dword ptr [EBP + -0x24]
00a2ca17 : CALL 0x006f04e0
00a2ca1c : MOV EAX,[0x00da9894]
00a2ca21 : XOR EDX,EDX
00a2ca23 : MOV dword ptr [EBP + -0x10],EBX
00a2ca26 : MOV dword ptr [EBP + -0x14],0x0
00a2ca2d : MOV word ptr [EBP + -0x24],DX
00a2ca31 : MOV ECX,dword ptr [EAX]
00a2ca33 : MOV ECX,dword ptr [ECX + 0x144]
00a2ca39 : CMP byte ptr [ECX + 0x32],DL
00a2ca3c : JZ 0x00a2ca45
00a2ca3e : MOV EDX,dword ptr [ECX]
00a2ca40 : MOV EAX,dword ptr [EDX + 0x20]
00a2ca43 : CALL EAX
00a2ca45 : MOV ECX,dword ptr [0x00da9894]
00a2ca4b : MOV ECX,dword ptr [ECX]
00a2ca4d : PUSH 0x2
00a2ca4f : PUSH ESI
00a2ca50 : CALL 0x008ede80
00a2ca55 : MOV ESI,EAX
00a2ca57 : TEST ESI,ESI
00a2ca59 : JZ 0x00a2ca6e
00a2ca5b : MOV EAX,dword ptr [ESI + 0x60]
00a2ca5e : TEST EAX,EAX
00a2ca60 : JZ 0x00a2ca67
00a2ca62 : PUSH ESI
00a2ca63 : PUSH 0x1
00a2ca65 : CALL EAX
00a2ca67 : MOV dword ptr [ESI + 0x60],0xa2a730
00a2ca6e : MOV ECX,dword ptr [EBP + -0xc]
00a2ca71 : MOV dword ptr FS:[0x0],ECX
00a2ca78 : POP ECX
00a2ca79 : POP EDI
00a2ca7a : POP ESI
00a2ca7b : POP EBX
00a2ca7c : MOV ESP,EBP
00a2ca7e : POP EBP
00a2ca7f : RET 0x8
