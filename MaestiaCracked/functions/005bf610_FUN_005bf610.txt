PROGRAM  : Maestia.exe
FUNCTION : FUN_005bf610
ENTRY    : 005bf610
BODY     : [[005bf610, 005bf71c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005bf610(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  undefined4 *puVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar5 = 0;
  local_18 = param_2;
  local_14 = 8;
  iVar3 = FUN_00515840(0x58,0);
  if (iVar3 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = FUN_005bef20(&local_18,*(undefined4 *)(iVar2 + 0x284));
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = uVar4;
  param_1[1] = 0;
  iVar3 = FUN_00515840(0x50,0);
  if (iVar3 != 0) {
    puVar6 = puVar1;
    uVar4 = FUN_00530910(1);
    uVar5 = FUN_005beec0(&local_18,uVar4,puVar6);
    if (uVar5 != 0) {
      *(uint *)(uVar5 + 8) = *(int *)(uVar5 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x1b;
  param_2 = uVar5;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  param_2 = param_2 & 0xffffff00;
  iVar3 = *param_1;
  puVar6 = &param_2;
  uVar4 = FUN_00526210(puVar1);
  (**(code **)(iVar3 + 0x28))(&local_18,iVar2 + 0x74,uVar4,puVar6);
  FUN_00526bc0();
  if (uVar5 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005bf610 : SUB ESP,0x18
005bf613 : PUSH EBX
005bf614 : PUSH EBP
005bf615 : PUSH ESI
005bf616 : MOV ESI,dword ptr [ESP + 0x2c]
005bf61a : MOV ECX,dword ptr [ESI + 0x288]
005bf620 : XOR EBX,EBX
005bf622 : PUSH EBX
005bf623 : PUSH 0x58
005bf625 : MOV dword ptr [ESP + 0x14],ESI
005bf629 : MOV byte ptr [ESP + 0x18],0x8
005bf62e : CALL 0x00515840
005bf633 : CMP EAX,EBX
005bf635 : JZ 0x005bf64c
005bf637 : MOV ECX,dword ptr [ESI + 0x284]
005bf63d : PUSH ECX
005bf63e : LEA ECX,[ESP + 0x10]
005bf642 : PUSH ECX
005bf643 : MOV ECX,EAX
005bf645 : CALL 0x005bef20
005bf64a : JMP 0x005bf64e
005bf64c : XOR EAX,EAX
005bf64e : MOV EBP,dword ptr [ESP + 0x28]
005bf652 : PUSH EDI
005bf653 : PUSH EBX
005bf654 : MOV byte ptr [EBP + 0x8],BL
005bf657 : MOV dword ptr [EBP],EAX
005bf65a : MOV dword ptr [EBP + 0x4],EBX
005bf65d : MOV ECX,dword ptr [ESI + 0x288]
005bf663 : PUSH 0x50
005bf665 : CALL 0x00515840
005bf66a : MOV EDI,EAX
005bf66c : CMP EDI,EBX
005bf66e : JZ 0x005bf699
005bf670 : PUSH EBP
005bf671 : PUSH 0x1
005bf673 : MOV ECX,ESI
005bf675 : CALL 0x00530910
005bf67a : PUSH EAX
005bf67b : LEA EDX,[ESP + 0x18]
005bf67f : PUSH EDX
005bf680 : MOV ECX,EDI
005bf682 : CALL 0x005beec0
005bf687 : MOV EBX,EAX
005bf689 : TEST EBX,EBX
005bf68b : JZ 0x005bf699
005bf68d : MOV EAX,dword ptr [EBX + 0x8]
005bf690 : INC EAX
005bf691 : AND EAX,0x8fffffff
005bf696 : MOV dword ptr [EBX + 0x8],EAX
005bf699 : LEA ECX,[ESP + 0x30]
005bf69d : PUSH ECX
005bf69e : LEA EDX,[ESP + 0x30]
005bf6a2 : PUSH EDX
005bf6a3 : LEA ECX,[ESI + 0x278]
005bf6a9 : MOV dword ptr [ESP + 0x38],EBX
005bf6ad : MOV dword ptr [ESP + 0x34],0x1b
005bf6b5 : CALL 0x0050ff10
005bf6ba : MOV ECX,dword ptr [ESP + 0x30]
005bf6be : TEST ECX,ECX
005bf6c0 : JZ 0x005bf6c7
005bf6c2 : CALL 0x00503db0
005bf6c7 : MOV EAX,dword ptr [ESI + 0x2a0]
005bf6cd : ADD EAX,0x10
005bf6d0 : MOV byte ptr [ESP + 0x30],0x0
005bf6d5 : MOV EDI,dword ptr [EAX]
005bf6d7 : MOV dword ptr [ESP + 0x2c],EAX
005bf6db : LEA EAX,[ESP + 0x30]
005bf6df : PUSH EAX
005bf6e0 : PUSH EBP
005bf6e1 : LEA ECX,[ESP + 0x20]
005bf6e5 : ADD EDI,0x28
005bf6e8 : CALL 0x00526210
005bf6ed : MOV EDX,dword ptr [EDI]
005bf6ef : PUSH EAX
005bf6f0 : ADD ESI,0x74
005bf6f3 : PUSH ESI
005bf6f4 : LEA ECX,[ESP + 0x1c]
005bf6f8 : PUSH ECX
005bf6f9 : MOV ECX,dword ptr [ESP + 0x3c]
005bf6fd : CALL EDX
005bf6ff : LEA ECX,[ESP + 0x18]
005bf703 : CALL 0x00526bc0
005bf708 : POP EDI
005bf709 : TEST EBX,EBX
005bf70b : JZ 0x005bf714
005bf70d : MOV ECX,EBX
005bf70f : CALL 0x00503db0
005bf714 : POP ESI
005bf715 : MOV EAX,EBP
005bf717 : POP EBP
005bf718 : POP EBX
005bf719 : ADD ESP,0x18
005bf71c : RET
