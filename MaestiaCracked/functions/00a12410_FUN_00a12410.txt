PROGRAM  : Maestia.exe
FUNCTION : FUN_00a12410
ENTRY    : 00a12410
BODY     : [[00a12410, 00a12559]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a12410(void)

{
  undefined4 uVar1;
  int iVar2;
  FILE *_File;
  char *pcVar3;
  int in_ECX;
  int local_12c;
  undefined4 local_124;
  undefined4 local_120;
  undefined4 local_11c;
  int local_118;
  undefined4 local_114;
  FILE *local_110;
  char local_10c [260];
  uint local_8;
  
  local_8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  _File = __wfopen(L"keymap.txt",L"r");
  local_110 = _File;
  if (_File != (FILE *)0x0) {
    pcVar3 = _fgets(local_10c,0x100,_File);
    while (pcVar3 != (char *)0x0) {
      local_120 = 0;
      local_114 = 0;
      local_11c = 0;
      local_118 = 0;
      FID_conflict__sscanf(local_10c,"%d, %d, %d, %d",&local_120,&local_114,&local_11c,&local_118);
      iVar2 = local_118;
      uVar1 = local_11c;
      local_124 = local_120;
      FUN_0040f910(&local_124);
      if (local_12c != *(int *)(in_ECX + 4)) {
        *(undefined4 *)(local_12c + 0x14) = local_114;
        *(undefined4 *)(local_12c + 0x18) = uVar1;
        *(int *)(local_12c + 0x1c) = iVar2;
        if (*(int *)(local_12c + 0x18) == iVar2) {
          *(undefined4 *)(local_12c + 0x1c) = 0;
        }
      }
      pcVar3 = _fgets(local_10c,0x100,local_110);
      _File = local_110;
    }
    FUN_00a121f0();
    _fclose(_File);
  }
  __security_check_cookie(local_8 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a12410 : PUSH EBP
00a12411 : MOV EBP,ESP
00a12413 : SUB ESP,0x12c
00a12419 : MOV EAX,[0x00d66fa0]
00a1241e : XOR EAX,EBP
00a12420 : MOV dword ptr [EBP + -0x4],EAX
00a12423 : PUSH EBX
00a12424 : PUSH ESI
00a12425 : PUSH EDI
00a12426 : PUSH 0xcbdf34
00a1242b : PUSH 0xcbdf38
00a12430 : MOV ESI,ECX
00a12432 : CALL 0x00636404
00a12437 : MOV EDI,EAX
00a12439 : XOR EBX,EBX
00a1243b : ADD ESP,0x8
00a1243e : MOV dword ptr [EBP + 0xfffffef4],EDI
00a12444 : CMP EDI,EBX
00a12446 : JZ 0x00a12549
00a1244c : PUSH EDI
00a1244d : LEA EAX,[EBP + 0xfffffef8]
00a12453 : PUSH 0x100
00a12458 : PUSH EAX
00a12459 : CALL 0x0063646e
00a1245e : ADD ESP,0xc
00a12461 : TEST EAX,EAX
00a12463 : JZ 0x00a1253b
00a12469 : LEA ESP,[ESP]
00a12470 : LEA ECX,[EBP + 0xfffffeec]
00a12476 : PUSH ECX
00a12477 : LEA EDX,[EBP + 0xfffffee8]
00a1247d : PUSH EDX
00a1247e : LEA EAX,[EBP + 0xfffffef0]
00a12484 : PUSH EAX
00a12485 : LEA ECX,[EBP + 0xfffffee4]
00a1248b : PUSH ECX
00a1248c : LEA EDX,[EBP + 0xfffffef8]
00a12492 : PUSH 0xcbdf50
00a12497 : PUSH EDX
00a12498 : MOV dword ptr [EBP + 0xfffffee4],EBX
00a1249e : MOV dword ptr [EBP + 0xfffffef0],EBX
00a124a4 : MOV dword ptr [EBP + 0xfffffee8],EBX
00a124aa : MOV dword ptr [EBP + 0xfffffeec],EBX
00a124b0 : CALL 0x00636620
00a124b5 : MOV EAX,dword ptr [EBP + 0xfffffee8]
00a124bb : MOV ECX,dword ptr [EBP + 0xfffffee4]
00a124c1 : MOV EDI,dword ptr [EBP + 0xfffffeec]
00a124c7 : ADD ESP,0x18
00a124ca : LEA EDX,[EBP + 0xfffffee0]
00a124d0 : MOV dword ptr [EBP + 0xfffffedc],EAX
00a124d6 : MOV dword ptr [EBP + 0xfffffee0],ECX
00a124dc : PUSH EDX
00a124dd : LEA EAX,[EBP + 0xfffffed8]
00a124e3 : MOV ECX,ESI
00a124e5 : CALL 0x0040f910
00a124ea : MOV EAX,dword ptr [EBP + 0xfffffed8]
00a124f0 : CMP EAX,dword ptr [ESI + 0x4]
00a124f3 : JZ 0x00a12512
00a124f5 : MOV ECX,dword ptr [EBP + 0xfffffef0]
00a124fb : MOV EDX,dword ptr [EBP + 0xfffffedc]
00a12501 : MOV dword ptr [EAX + 0x14],ECX
00a12504 : MOV dword ptr [EAX + 0x18],EDX
00a12507 : MOV dword ptr [EAX + 0x1c],EDI
00a1250a : CMP dword ptr [EAX + 0x18],EDI
00a1250d : JNZ 0x00a12512
00a1250f : MOV dword ptr [EAX + 0x1c],EBX
00a12512 : MOV EAX,dword ptr [EBP + 0xfffffef4]
00a12518 : PUSH EAX
00a12519 : LEA ECX,[EBP + 0xfffffef8]
00a1251f : PUSH 0x100
00a12524 : PUSH ECX
00a12525 : CALL 0x0063646e
00a1252a : ADD ESP,0xc
00a1252d : TEST EAX,EAX
00a1252f : JNZ 0x00a12470
00a12535 : MOV EDI,dword ptr [EBP + 0xfffffef4]
00a1253b : CALL 0x00a121f0
00a12540 : PUSH EDI
00a12541 : CALL 0x006366db
00a12546 : ADD ESP,0x4
00a12549 : MOV ECX,dword ptr [EBP + -0x4]
00a1254c : POP EDI
00a1254d : POP ESI
00a1254e : XOR ECX,EBP
00a12550 : POP EBX
00a12551 : CALL 0x00633e6b
00a12556 : MOV ESP,EBP
00a12558 : POP EBP
00a12559 : RET
