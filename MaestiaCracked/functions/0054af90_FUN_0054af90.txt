PROGRAM  : Maestia.exe
FUNCTION : FUN_0054af90
ENTRY    : 0054af90
BODY     : [[0054af90, 0054b098]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0054af90(float param_1,float param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  int iVar4;
  int in_ECX;
  int local_28 [3];
  undefined4 local_1c;
  uint local_18;
  undefined4 local_8;
  uint local_4;
  
  if ((*(byte *)(in_ECX + 0x143) & 3) != 0) {
    FUN_00549ad0();
    *(byte *)(in_ECX + 0x143) = *(byte *)(in_ECX + 0x143) & 0xfc;
  }
  fVar1 = *(float *)(in_ECX + 0x40);
  fVar2 = *(float *)(in_ECX + 0xf4);
  param_2 = param_2 - (*(float *)(in_ECX + 0x44) - *(float *)(in_ECX + 0xf8));
  iVar4 = FUN_005993d0();
  fVar3 = (float)iVar4;
  if (iVar4 < 0) {
    fVar3 = fVar3 + 4.2949673e+09;
  }
  FUN_00599ff0(local_28,fVar3 + param_2);
  if (((local_28[0] == 0) || (*(uint *)(local_28[0] + 4) <= (uint)local_28[2])) || (local_28[2] < 0)
     ) {
    local_28[1] = 0;
    local_8 = 0;
    local_1c = 0;
    if (0.0 < param_2) {
      local_28[2] = *(int *)(in_ECX + 0x2c) - 1;
    }
    else {
      local_28[2] = 0;
    }
    local_4 = CONCAT31(local_4._1_3_,*(byte *)(in_ECX + 0x9c) >> 2) & 0xffffff01;
    local_18 = local_4;
    local_28[0] = in_ECX + 0x28;
  }
  if (((local_28[0] != 0) && ((uint)local_28[2] < *(uint *)(local_28[0] + 4))) && (-1 < local_28[2])
     ) {
    iVar4 = FUN_00546800(local_28[2],param_1 - (fVar1 - fVar2));
    return iVar4;
  }
  return -(uint)(*(int *)(in_ECX + 0x2c) != 0);
}



============================================================
DISASSEMBLY
============================================================
0054af90 : SUB ESP,0x2c
0054af93 : PUSH EDI
0054af94 : MOV EDI,ECX
0054af96 : TEST byte ptr [EDI + 0x143],0x3
0054af9d : JZ 0x0054afab
0054af9f : CALL 0x00549ad0
0054afa4 : AND byte ptr [EDI + 0x143],0xfc
0054afab : FLD float ptr [ESP + 0x34]
0054afaf : PUSH ESI
0054afb0 : FLD float ptr [EDI + 0x40]
0054afb3 : LEA ESI,[EDI + 0x28]
0054afb6 : FSUB float ptr [EDI + 0xf4]
0054afbc : MOV ECX,ESI
0054afbe : FSUBP
0054afc0 : FSTP float ptr [ESP + 0x38]
0054afc4 : FLD float ptr [ESP + 0x3c]
0054afc8 : FLD float ptr [EDI + 0x44]
0054afcb : FSUB float ptr [EDI + 0xf8]
0054afd1 : FSUBP
0054afd3 : FSTP float ptr [ESP + 0x3c]
0054afd7 : CALL 0x005993d0
0054afdc : MOV dword ptr [ESP + 0x8],EAX
0054afe0 : FILD dword ptr [ESP + 0x8]
0054afe4 : TEST EAX,EAX
0054afe6 : JGE 0x0054afee
0054afe8 : FADD float ptr [0x00cdf0e0]
0054afee : FADD float ptr [ESP + 0x3c]
0054aff2 : PUSH ECX
0054aff3 : LEA EAX,[ESP + 0x10]
0054aff7 : MOV ECX,ESI
0054aff9 : FSTP float ptr [ESP + 0xc]
0054affd : FLD float ptr [ESP + 0xc]
0054b001 : FSTP float ptr [ESP]
0054b004 : PUSH EAX
0054b005 : CALL 0x00599ff0
0054b00a : MOV EAX,dword ptr [ESP + 0xc]
0054b00e : TEST EAX,EAX
0054b010 : JZ 0x0054b01f
0054b012 : MOV ECX,dword ptr [ESP + 0x14]
0054b016 : CMP ECX,dword ptr [EAX + 0x4]
0054b019 : JNC 0x0054b01f
0054b01b : TEST ECX,ECX
0054b01d : JGE 0x0054b066
0054b01f : FLDZ
0054b021 : XOR EDX,EDX
0054b023 : FCOM float ptr [ESP + 0x3c]
0054b027 : MOV dword ptr [ESP + 0x10],EDX
0054b02b : FNSTSW AX
0054b02d : FSTP float ptr [ESP + 0x2c]
0054b031 : MOV EDX,dword ptr [ESP + 0x2c]
0054b035 : MOV dword ptr [ESP + 0x18],EDX
0054b039 : TEST AH,0x1
0054b03c : JNZ 0x0054b042
0054b03e : XOR ECX,ECX
0054b040 : JMP 0x0054b048
0054b042 : MOV EAX,dword ptr [EDI + 0x2c]
0054b045 : LEA ECX,[EAX + -0x1]
0054b048 : MOV AL,byte ptr [ESI + 0x74]
0054b04b : SHR AL,0x2
0054b04e : AND AL,0x1
0054b050 : MOV byte ptr [ESP + 0x30],AL
0054b054 : MOV EDX,dword ptr [ESP + 0x30]
0054b058 : MOV EAX,ESI
0054b05a : MOV dword ptr [ESP + 0x1c],EDX
0054b05e : MOV dword ptr [ESP + 0x14],ECX
0054b062 : MOV dword ptr [ESP + 0xc],EAX
0054b066 : POP ESI
0054b067 : TEST EAX,EAX
0054b069 : JZ 0x0054b08b
0054b06b : CMP ECX,dword ptr [EAX + 0x4]
0054b06e : JNC 0x0054b08b
0054b070 : TEST ECX,ECX
0054b072 : JL 0x0054b08b
0054b074 : FLD float ptr [ESP + 0x34]
0054b078 : PUSH ECX
0054b079 : FSTP float ptr [ESP]
0054b07c : PUSH ECX
0054b07d : MOV ECX,EDI
0054b07f : CALL 0x00546800
0054b084 : POP EDI
0054b085 : ADD ESP,0x2c
0054b088 : RET 0x8
0054b08b : MOV EAX,dword ptr [EDI + 0x2c]
0054b08e : NEG EAX
0054b090 : SBB EAX,EAX
0054b092 : POP EDI
0054b093 : ADD ESP,0x2c
0054b096 : RET 0x8
