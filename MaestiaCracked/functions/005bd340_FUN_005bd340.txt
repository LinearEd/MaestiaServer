PROGRAM  : Maestia.exe
FUNCTION : FUN_005bd340
ENTRY    : 005bd340
BODY     : [[005bd340, 005bd3da]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bd340(GRefCountNTSImpl *param_1)

{
  byte *pbVar1;
  double dVar2;
  GRefCountNTSImpl *pGVar3;
  GRefCountNTSImpl *this;
  int iVar4;
  undefined4 *puVar5;
  
  pGVar3 = param_1;
  pbVar1 = *(byte **)(param_1 + 4);
  if (4 < *pbVar1) {
    FUN_00526400();
  }
  *pbVar1 = 3;
  pbVar1[4] = 0;
  pbVar1[5] = 0;
  pbVar1[6] = 0;
  pbVar1[7] = 0;
  pbVar1[8] = 0;
  pbVar1[9] = 0;
  pbVar1[10] = 0xf0;
  pbVar1[0xb] = 0xbf;
  if (*(int *)(pGVar3 + 0x18) != 0) {
    puVar5 = &param_1;
    FUN_005296a0(puVar5);
    FUN_00597b80(puVar5);
    this = param_1;
    if (param_1 != (GRefCountNTSImpl *)0x0) {
      iVar4 = (**(code **)(*(int *)param_1 + 0x9c))();
      if (iVar4 == 4) {
        param_1 = (GRefCountNTSImpl *)(**(code **)(*(int *)this + 0x158))();
        pbVar1 = *(byte **)(pGVar3 + 4);
        dVar2 = (double)(int)param_1;
        if (4 < *pbVar1) {
          FUN_00526400();
        }
        *pbVar1 = 3;
        *(double *)(pbVar1 + 4) = dVar2;
      }
      GRefCountNTSImpl::Release(this);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bd340 : SUB ESP,0x8
005bd343 : PUSH EBX
005bd344 : MOV EBX,dword ptr [ESP + 0x10]
005bd348 : PUSH ESI
005bd349 : MOV ESI,dword ptr [EBX + 0x4]
005bd34c : CMP byte ptr [ESI],0x5
005bd34f : JC 0x005bd358
005bd351 : MOV ECX,ESI
005bd353 : CALL 0x00526400
005bd358 : FLD double ptr [0x00b86090]
005bd35e : MOV byte ptr [ESI],0x3
005bd361 : FSTP double ptr [ESI + 0x4]
005bd364 : MOV ECX,dword ptr [EBX + 0x18]
005bd367 : TEST ECX,ECX
005bd369 : JZ 0x005bd3d5
005bd36b : PUSH EDI
005bd36c : LEA EAX,[ESP + 0x18]
005bd370 : PUSH EAX
005bd371 : CALL 0x005296a0
005bd376 : MOV ECX,EAX
005bd378 : CALL 0x00597b80
005bd37d : MOV EDI,dword ptr [ESP + 0x18]
005bd381 : TEST EDI,EDI
005bd383 : JZ 0x005bd3d4
005bd385 : MOV EDX,dword ptr [EDI]
005bd387 : MOV EAX,dword ptr [EDX + 0x9c]
005bd38d : MOV ECX,EDI
005bd38f : CALL EAX
005bd391 : CMP EAX,0x4
005bd394 : JNZ 0x005bd3c7
005bd396 : MOV EDX,dword ptr [EDI]
005bd398 : MOV EAX,dword ptr [EDX + 0x158]
005bd39e : MOV ECX,EDI
005bd3a0 : CALL EAX
005bd3a2 : MOV ESI,dword ptr [EBX + 0x4]
005bd3a5 : CMP byte ptr [ESI],0x5
005bd3a8 : MOV dword ptr [ESP + 0x18],EAX
005bd3ac : FILD dword ptr [ESP + 0x18]
005bd3b0 : FSTP double ptr [ESP + 0xc]
005bd3b4 : JC 0x005bd3bd
005bd3b6 : MOV ECX,ESI
005bd3b8 : CALL 0x00526400
005bd3bd : FLD double ptr [ESP + 0xc]
005bd3c1 : MOV byte ptr [ESI],0x3
005bd3c4 : FSTP double ptr [ESI + 0x4]
005bd3c7 : MOV ECX,EDI
005bd3c9 : POP EDI
005bd3ca : POP ESI
005bd3cb : POP EBX
005bd3cc : ADD ESP,0x8
005bd3cf : JMP 0x004ff7c0
005bd3d4 : POP EDI
005bd3d5 : POP ESI
005bd3d6 : POP EBX
005bd3d7 : ADD ESP,0x8
005bd3da : RET
