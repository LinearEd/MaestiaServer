PROGRAM  : Maestia.exe
FUNCTION : FUN_009a1550
ENTRY    : 009a1550
BODY     : [[009a1550, 009a1788]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a1550(int *param_1)

{
  undefined2 uVar1;
  int *piVar2;
  int iVar3;
  undefined1 local_30 [4];
  undefined4 local_2c;
  undefined4 local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b38de3;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (param_1[1] == 0) {
    FUN_008018d0();
  }
  else {
    piVar2 = (int *)FUN_008eb580();
    if (piVar2 == (int *)0x0) {
      FUN_008018d0();
    }
    else {
      iVar3 = (**(code **)(*piVar2 + 0x74))();
      if (iVar3 == 0) {
        FUN_008018d0();
      }
      else {
        iVar3 = (**(code **)(*param_1 + 0x74))();
        if (iVar3 == 0) {
          FUN_008018d0();
        }
        local_18 = 7;
        local_1c = 0;
        local_2c = (uint)local_2c._2_2_ << 0x10;
        local_8 = 0;
        (**(code **)(*param_1 + 0x58))();
        FUN_00405660(local_30);
        local_8 = local_8 & 0xffffff00;
        FUN_008f75f0();
        local_8._0_1_ = 2;
        FUN_00405eb0();
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_00406560();
        if (*(char *)((int)piVar2 + 0x32) == '\0') {
          (**(code **)(*piVar2 + 0x18))();
        }
        if (iVar3 == 0) {
          (**(code **)(*piVar2 + 0x78))();
        }
        else {
          (**(code **)(*piVar2 + 0x78))();
          (**(code **)(*param_1 + 0x78))();
          FUN_00941640();
        }
        (**(code **)(*param_1 + 0x70))();
        uVar1 = FUN_009a01c0();
        (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
                  (*(int **)(*DAT_00da9894 + 0x114),"SetCharEquip","%d,%ls,%d",uVar1);
        local_8 = 0xffffffff;
        FUN_00406560();
      }
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009a1550 : PUSH EBP
009a1551 : MOV EBP,ESP
009a1553 : PUSH -0x1
009a1555 : PUSH 0xb38de3
009a155a : MOV EAX,FS:[0x0]
009a1560 : PUSH EAX
009a1561 : SUB ESP,0x48
009a1564 : MOV EAX,[0x00d66fa0]
009a1569 : XOR EAX,EBP
009a156b : MOV dword ptr [EBP + -0x10],EAX
009a156e : PUSH EBX
009a156f : PUSH ESI
009a1570 : PUSH EDI
009a1571 : PUSH EAX
009a1572 : LEA EAX,[EBP + -0xc]
009a1575 : MOV FS:[0x0],EAX
009a157b : MOV EBX,dword ptr [EBP + 0x8]
009a157e : MOV EAX,dword ptr [EBX + 0x4]
009a1581 : TEST EAX,EAX
009a1583 : JNZ 0x009a15a7
009a1585 : MOV ESI,dword ptr [0x00da98e8]
009a158b : PUSH 0xc88c98
009a1590 : PUSH 0x144
009a1595 : PUSH 0xc88cd8
009a159a : CALL 0x008018d0
009a159f : ADD ESP,0xc
009a15a2 : JMP 0x009a176b
009a15a7 : MOV EDI,dword ptr [EBP + 0xc]
009a15aa : CALL 0x008eb580
009a15af : MOV EDI,EAX
009a15b1 : TEST EDI,EDI
009a15b3 : JNZ 0x009a15d7
009a15b5 : MOV ESI,dword ptr [0x00da98e8]
009a15bb : PUSH 0xc88d20
009a15c0 : PUSH 0x149
009a15c5 : PUSH 0xc88d60
009a15ca : CALL 0x008018d0
009a15cf : ADD ESP,0xc
009a15d2 : JMP 0x009a176b
009a15d7 : MOV ECX,dword ptr [EBP + 0x14]
009a15da : MOV EAX,dword ptr [EDI]
009a15dc : MOV EDX,dword ptr [EBP + 0x10]
009a15df : MOV EAX,dword ptr [EAX + 0x74]
009a15e2 : PUSH ECX
009a15e3 : PUSH EDX
009a15e4 : MOV ECX,EDI
009a15e6 : CALL EAX
009a15e8 : MOV ESI,EAX
009a15ea : MOV dword ptr [EBP + -0x30],ESI
009a15ed : TEST ESI,ESI
009a15ef : JNZ 0x009a1613
009a15f1 : MOV ESI,dword ptr [0x00da98e8]
009a15f7 : PUSH 0xc88da8
009a15fc : PUSH 0x14f
009a1601 : PUSH 0xc88de8
009a1606 : CALL 0x008018d0
009a160b : ADD ESP,0xc
009a160e : JMP 0x009a176b
009a1613 : MOV EDX,dword ptr [EBX]
009a1615 : MOV EAX,dword ptr [EBP + 0x18]
009a1618 : MOV EDX,dword ptr [EDX + 0x74]
009a161b : PUSH 0x0
009a161d : PUSH EAX
009a161e : MOV ECX,EBX
009a1620 : CALL EDX
009a1622 : MOV dword ptr [EBP + -0x34],EAX
009a1625 : TEST EAX,EAX
009a1627 : JNZ 0x009a163f
009a1629 : MOV ESI,dword ptr [0x00da98e8]
009a162f : PUSH 0xc88e30
009a1634 : CALL 0x008018d0
009a1639 : MOV ESI,dword ptr [EBP + -0x30]
009a163c : ADD ESP,0x4
009a163f : MOV EAX,dword ptr [ESI + 0x10]
009a1642 : XOR ECX,ECX
009a1644 : XOR EDX,EDX
009a1646 : MOV dword ptr [EBP + -0x14],0x7
009a164d : MOV dword ptr [EBP + -0x18],ECX
009a1650 : MOV word ptr [EBP + -0x28],DX
009a1654 : MOV dword ptr [EBP + -0x4],ECX
009a1657 : MOV EDX,dword ptr [EBX]
009a1659 : MOV EDX,dword ptr [EDX + 0x58]
009a165c : LEA ECX,[EBP + -0x2c]
009a165f : PUSH ECX
009a1660 : PUSH EAX
009a1661 : MOV ECX,EBX
009a1663 : CALL EDX
009a1665 : SUB ESP,0x1c
009a1668 : LEA EAX,[EBP + -0x2c]
009a166b : MOV ECX,ESP
009a166d : MOV dword ptr [EBP + -0x38],ESP
009a1670 : PUSH EAX
009a1671 : CALL 0x00405660
009a1676 : MOV byte ptr [EBP + -0x4],0x1
009a167a : MOV byte ptr [EBP + -0x4],0x0
009a167e : LEA ECX,[EBP + -0x54]
009a1681 : CALL 0x008f75f0
009a1686 : ADD ESP,0x1c
009a1689 : MOV byte ptr [EBP + -0x4],0x2
009a168d : PUSH -0x1
009a168f : PUSH 0x0
009a1691 : PUSH EAX
009a1692 : LEA ECX,[EBP + -0x2c]
009a1695 : CALL 0x00405eb0
009a169a : MOV byte ptr [EBP + -0x4],0x0
009a169e : LEA ECX,[EBP + -0x54]
009a16a1 : CALL 0x00406560
009a16a6 : CMP byte ptr [EDI + 0x32],0x0
009a16aa : JNZ 0x009a16bc
009a16ac : MOV EDX,dword ptr [EDI]
009a16ae : MOV EAX,dword ptr [EDX + 0x18]
009a16b1 : PUSH 0x12c
009a16b6 : PUSH 0x0
009a16b8 : MOV ECX,EDI
009a16ba : CALL EAX
009a16bc : CMP dword ptr [EBP + -0x34],0x0
009a16c0 : MOV ECX,dword ptr [EBP + 0x10]
009a16c3 : JNZ 0x009a16d5
009a16c5 : MOV EAX,dword ptr [EBP + 0x14]
009a16c8 : MOV EDX,dword ptr [EDI]
009a16ca : MOV EDX,dword ptr [EDX + 0x78]
009a16cd : PUSH EAX
009a16ce : PUSH ECX
009a16cf : MOV ECX,EDI
009a16d1 : CALL EDX
009a16d3 : JMP 0x009a1707
009a16d5 : MOV ESI,dword ptr [EBP + 0x14]
009a16d8 : MOV EAX,dword ptr [EDI]
009a16da : MOV EDX,dword ptr [EAX + 0x78]
009a16dd : PUSH ESI
009a16de : PUSH ECX
009a16df : MOV ECX,EDI
009a16e1 : CALL EDX
009a16e3 : MOV ECX,dword ptr [EBP + 0x18]
009a16e6 : MOV EAX,dword ptr [EBX]
009a16e8 : MOV EDX,dword ptr [EAX + 0x78]
009a16eb : PUSH 0x0
009a16ed : PUSH ECX
009a16ee : MOV ECX,EBX
009a16f0 : CALL EDX
009a16f2 : MOV EAX,dword ptr [EBP + 0x10]
009a16f5 : PUSH 0x0
009a16f7 : PUSH 0x0
009a16f9 : PUSH ESI
009a16fa : PUSH EAX
009a16fb : PUSH EDI
009a16fc : MOV EDI,dword ptr [EBP + -0x34]
009a16ff : CALL 0x00941640
009a1704 : MOV ESI,dword ptr [EBP + -0x30]
009a1707 : MOV EDI,dword ptr [EBP + 0x18]
009a170a : MOV EDX,dword ptr [EBX]
009a170c : MOV EAX,dword ptr [EDX + 0x70]
009a170f : PUSH 0x0
009a1711 : PUSH EDI
009a1712 : PUSH ESI
009a1713 : MOV ECX,EBX
009a1715 : CALL EAX
009a1717 : MOV ECX,EDI
009a1719 : CALL 0x009a01c0
009a171e : CMP dword ptr [EBP + -0x14],0x8
009a1722 : MOV EDX,dword ptr [0x00da9894]
009a1728 : MOV ESI,dword ptr [ESI + 0xb0]
009a172e : MOVZX ECX,AX
009a1731 : MOV EAX,dword ptr [EDX]
009a1733 : MOV EAX,dword ptr [EAX + 0x114]
009a1739 : MOV EDX,dword ptr [EBP + -0x28]
009a173c : JNC 0x009a1741
009a173e : LEA EDX,[EBP + -0x28]
009a1741 : MOV EDI,dword ptr [EAX]
009a1743 : PUSH ESI
009a1744 : PUSH EDX
009a1745 : MOV EDX,dword ptr [EDI + 0x4]
009a1748 : MOVZX ECX,CX
009a174b : PUSH ECX
009a174c : PUSH 0xc88c8c
009a1751 : PUSH 0xc88e94
009a1756 : PUSH EAX
009a1757 : CALL EDX
009a1759 : ADD ESP,0x18
009a175c : MOV dword ptr [EBP + -0x4],0xffffffff
009a1763 : LEA ECX,[EBP + -0x2c]
009a1766 : CALL 0x00406560
009a176b : MOV ECX,dword ptr [EBP + -0xc]
009a176e : MOV dword ptr FS:[0x0],ECX
009a1775 : POP ECX
009a1776 : POP EDI
009a1777 : POP ESI
009a1778 : POP EBX
009a1779 : MOV ECX,dword ptr [EBP + -0x10]
009a177c : XOR ECX,EBP
009a177e : CALL 0x00633e6b
009a1783 : MOV ESP,EBP
009a1785 : POP EBP
009a1786 : RET 0x14
