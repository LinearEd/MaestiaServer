PROGRAM  : Maestia.exe
FUNCTION : FUN_0053cfd0
ENTRY    : 0053cfd0
BODY     : [[0053cfd0, 0053d063]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053cfd0(void)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  GRefCountImpl *this;
  undefined4 *in_ECX;
  
  piVar2 = (int *)in_ECX[6];
  if ((piVar2 == (int *)0x0) || (uVar3 = in_ECX[7], (uint)piVar2[1] <= uVar3)) {
    *(undefined2 *)(in_ECX + 2) = 0;
    in_ECX[1] = in_ECX[7];
  }
  else {
    *(undefined2 *)(in_ECX + 2) = *(undefined2 *)(*piVar2 + uVar3 * 2);
    in_ECX[1] = uVar3;
    uVar4 = in_ECX[5];
    if ((-1 < (int)uVar4) && (uVar4 < (uint)((int *)in_ECX[4])[1])) {
      iVar5 = *(int *)in_ECX[4];
      iVar1 = iVar5 + uVar4 * 0xc;
      if (uVar3 < *(uint *)(iVar5 + uVar4 * 0xc)) {
        if ((GRefCountImpl *)*in_ECX != (GRefCountImpl *)0x0) {
          GRefCountImpl::Release((GRefCountImpl *)*in_ECX);
        }
        *in_ECX = 0;
        return;
      }
      this = *(GRefCountImpl **)(iVar1 + 8);
      if (this != (GRefCountImpl *)0x0) {
        GRefCountImpl::AddRef(this);
      }
      if ((GRefCountImpl *)*in_ECX != (GRefCountImpl *)0x0) {
        GRefCountImpl::Release((GRefCountImpl *)*in_ECX);
      }
      *in_ECX = *(undefined4 *)(iVar1 + 8);
      return;
    }
  }
  if ((GRefCountImpl *)*in_ECX != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)*in_ECX);
  }
  *in_ECX = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0053cfd0 : PUSH ESI
0053cfd1 : MOV ESI,ECX
0053cfd3 : MOV ECX,dword ptr [ESI + 0x18]
0053cfd6 : TEST ECX,ECX
0053cfd8 : JZ 0x0053d043
0053cfda : MOV EAX,dword ptr [ESI + 0x1c]
0053cfdd : CMP EAX,dword ptr [ECX + 0x4]
0053cfe0 : JNC 0x0053d043
0053cfe2 : MOV ECX,dword ptr [ECX]
0053cfe4 : MOV DX,word ptr [ECX + EAX*0x2]
0053cfe8 : MOV word ptr [ESI + 0x8],DX
0053cfec : MOV dword ptr [ESI + 0x4],EAX
0053cfef : MOV ECX,dword ptr [ESI + 0x14]
0053cff2 : TEST ECX,ECX
0053cff4 : JL 0x0053d04f
0053cff6 : MOV EDX,dword ptr [ESI + 0x10]
0053cff9 : CMP ECX,dword ptr [EDX + 0x4]
0053cffc : JNC 0x0053d04f
0053cffe : MOV EDX,dword ptr [EDX]
0053d000 : LEA ECX,[ECX + ECX*0x2]
0053d003 : CMP EAX,dword ptr [EDX + ECX*0x4]
0053d006 : PUSH EDI
0053d007 : LEA EDI,[EDX + ECX*0x4]
0053d00a : JNC 0x0053d022
0053d00c : MOV ECX,dword ptr [ESI]
0053d00e : TEST ECX,ECX
0053d010 : JZ 0x0053d017
0053d012 : CALL 0x004ff7e0
0053d017 : POP EDI
0053d018 : MOV dword ptr [ESI],0x0
0053d01e : MOV EAX,ESI
0053d020 : POP ESI
0053d021 : RET
0053d022 : MOV ECX,dword ptr [EDI + 0x8]
0053d025 : TEST ECX,ECX
0053d027 : JZ 0x0053d02e
0053d029 : CALL 0x00523dd0
0053d02e : MOV ECX,dword ptr [ESI]
0053d030 : TEST ECX,ECX
0053d032 : JZ 0x0053d039
0053d034 : CALL 0x004ff7e0
0053d039 : MOV EAX,dword ptr [EDI + 0x8]
0053d03c : MOV dword ptr [ESI],EAX
0053d03e : POP EDI
0053d03f : MOV EAX,ESI
0053d041 : POP ESI
0053d042 : RET
0053d043 : MOV EDX,dword ptr [ESI + 0x1c]
0053d046 : XOR ECX,ECX
0053d048 : MOV word ptr [ESI + 0x8],CX
0053d04c : MOV dword ptr [ESI + 0x4],EDX
0053d04f : MOV ECX,dword ptr [ESI]
0053d051 : TEST ECX,ECX
0053d053 : JZ 0x0053d05a
0053d055 : CALL 0x004ff7e0
0053d05a : MOV dword ptr [ESI],0x0
0053d060 : MOV EAX,ESI
0053d062 : POP ESI
0053d063 : RET
