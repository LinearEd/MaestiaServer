PROGRAM  : Maestia.exe
FUNCTION : FUN_0052fab0
ENTRY    : 0052fab0
BODY     : [[0052fab0, 0052fc12]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052fab0(void)

{
  int iVar1;
  char cVar2;
  int *piVar3;
  undefined4 uVar4;
  int *in_ECX;
  char *pcVar5;
  int iVar6;
  uint *puVar7;
  int local_2c;
  int iStack_28;
  byte local_24;
  undefined1 local_20 [16];
  undefined1 local_10 [16];
  
  iVar1 = *in_ECX;
  if (*(uint *)(iVar1 + 0xc) < *(uint *)(iVar1 + 8)) {
    pcVar5 = (char *)(*(uint *)(iVar1 + 8) - 0x10);
  }
  else {
    pcVar5 = *(char **)(iVar1 + 0x14);
  }
  local_10[0] = 1;
  if ((*pcVar5 == '\b') || (*pcVar5 == '\v')) {
    FUN_00527140(&local_2c,iVar1);
    if ((local_2c != 0) && (piVar3 = (int *)FUN_005270f0(*in_ECX), piVar3 != (int *)0x0)) {
      local_20[0] = 0;
      cVar2 = (**(code **)(*(int *)(local_2c + 0x10) + 0x2c))
                        ((int *)(*in_ECX + 0x78),*(int *)(*in_ECX + 0x78) + 0x130,local_20);
      if (cVar2 != '\0') {
        uVar4 = FUN_00526fa0(*in_ECX);
        cVar2 = (**(code **)(*piVar3 + 0x48))(*in_ECX,uVar4,1);
        if (cVar2 != '\0') {
          FUN_00527270(piVar3);
        }
      }
      FUN_00526bc0();
    }
    if (((local_24 & 2) == 0) && (local_2c != 0)) {
      FUN_00503db0();
    }
    local_2c = 0;
    if (((local_24 & 1) == 0) && (iStack_28 != 0)) {
      FUN_00503db0();
    }
  }
  iVar1 = *in_ECX;
  puVar7 = (uint *)(iVar1 + 8);
  if (*(int *)(iVar1 + 8) - 0x20U < *(uint *)(iVar1 + 0xc)) {
    iVar6 = 2;
    do {
      FUN_00526bc0();
      *puVar7 = *puVar7 - 0x10;
      if (*puVar7 < *(uint *)(iVar1 + 0xc)) {
        FUN_00504f30();
      }
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
  }
  else {
    FUN_00526bc0();
    *puVar7 = *puVar7 - 0x10;
    FUN_00526bc0();
    *puVar7 = *puVar7 - 0x10;
  }
  iVar1 = *in_ECX;
  *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 0x10;
  if (*(uint *)(iVar1 + 0x10) <= *(uint *)(iVar1 + 8)) {
    FUN_00504050();
  }
  if (*(int *)(iVar1 + 8) != 0) {
    FUN_005266c0(local_10);
  }
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
0052fab0 : SUB ESP,0x2c
0052fab3 : PUSH ESI
0052fab4 : PUSH EDI
0052fab5 : MOV EDI,ECX
0052fab7 : MOV EAX,dword ptr [EDI]
0052fab9 : MOV ESI,dword ptr [EAX + 0x8]
0052fabc : MOV ECX,ESI
0052fabe : CMP ECX,dword ptr [EAX + 0xc]
0052fac1 : JBE 0x0052fac8
0052fac3 : ADD ECX,-0x10
0052fac6 : JMP 0x0052facb
0052fac8 : MOV ECX,dword ptr [EAX + 0x14]
0052facb : MOV byte ptr [ESP + 0x24],0x1
0052fad0 : MOV DL,byte ptr [ECX]
0052fad2 : PUSH EBX
0052fad3 : CMP DL,0x8
0052fad6 : JZ 0x0052fae1
0052fad8 : CMP DL,0xb
0052fadb : JNZ 0x0052fb93
0052fae1 : PUSH EAX
0052fae2 : LEA EAX,[ESP + 0x10]
0052fae6 : PUSH EAX
0052fae7 : CALL 0x00527140
0052faec : CMP dword ptr [ESP + 0xc],0x0
0052faf1 : JZ 0x0052fb63
0052faf3 : MOV ECX,dword ptr [EDI]
0052faf5 : PUSH ECX
0052faf6 : MOV ECX,ESI
0052faf8 : CALL 0x005270f0
0052fafd : MOV ESI,EAX
0052faff : TEST ESI,ESI
0052fb01 : JZ 0x0052fb63
0052fb03 : MOV EAX,dword ptr [EDI]
0052fb05 : MOV ECX,dword ptr [ESP + 0xc]
0052fb09 : PUSH EBP
0052fb0a : ADD EAX,0x78
0052fb0d : MOV byte ptr [ESP + 0x1c],0x0
0052fb12 : MOV EDX,dword ptr [EAX]
0052fb14 : MOV EBX,dword ptr [ECX + 0x10]
0052fb17 : LEA EBP,[ESP + 0x1c]
0052fb1b : PUSH EBP
0052fb1c : ADD EDX,0x130
0052fb22 : ADD ECX,0x10
0052fb25 : PUSH EDX
0052fb26 : MOV EDX,dword ptr [EBX + 0x2c]
0052fb29 : PUSH EAX
0052fb2a : CALL EDX
0052fb2c : POP EBP
0052fb2d : TEST AL,AL
0052fb2f : JZ 0x0052fb5a
0052fb31 : MOV EAX,dword ptr [EDI]
0052fb33 : PUSH EAX
0052fb34 : LEA ECX,[ESP + 0x1c]
0052fb38 : CALL 0x00526fa0
0052fb3d : MOV EDX,dword ptr [ESI]
0052fb3f : MOV EDX,dword ptr [EDX + 0x48]
0052fb42 : PUSH 0x1
0052fb44 : PUSH EAX
0052fb45 : MOV EAX,dword ptr [EDI]
0052fb47 : PUSH EAX
0052fb48 : MOV ECX,ESI
0052fb4a : CALL EDX
0052fb4c : TEST AL,AL
0052fb4e : JZ 0x0052fb5a
0052fb50 : PUSH ESI
0052fb51 : LEA ECX,[ESP + 0x2c]
0052fb55 : CALL 0x00527270
0052fb5a : LEA ECX,[ESP + 0x18]
0052fb5e : CALL 0x00526bc0
0052fb63 : TEST byte ptr [ESP + 0x14],0x2
0052fb68 : JNZ 0x0052fb77
0052fb6a : MOV ECX,dword ptr [ESP + 0xc]
0052fb6e : TEST ECX,ECX
0052fb70 : JZ 0x0052fb77
0052fb72 : CALL 0x00503db0
0052fb77 : TEST byte ptr [ESP + 0x14],0x1
0052fb7c : MOV dword ptr [ESP + 0xc],0x0
0052fb84 : JNZ 0x0052fb93
0052fb86 : MOV ECX,dword ptr [ESP + 0x10]
0052fb8a : TEST ECX,ECX
0052fb8c : JZ 0x0052fb93
0052fb8e : CALL 0x00503db0
0052fb93 : MOV ESI,dword ptr [EDI]
0052fb95 : MOV ECX,dword ptr [ESI + 0x8]
0052fb98 : ADD ESI,0x8
0052fb9b : LEA EAX,[ECX + -0x20]
0052fb9e : CMP EAX,dword ptr [ESI + 0x4]
0052fba1 : JNC 0x0052fbc7
0052fba3 : MOV EBX,0x2
0052fba8 : MOV ECX,dword ptr [ESI]
0052fbaa : CALL 0x00526bc0
0052fbaf : ADD dword ptr [ESI],-0x10
0052fbb2 : MOV EAX,dword ptr [ESI]
0052fbb4 : CMP EAX,dword ptr [ESI + 0x4]
0052fbb7 : JNC 0x0052fbc0
0052fbb9 : MOV ECX,ESI
0052fbbb : CALL 0x00504f30
0052fbc0 : SUB EBX,0x1
0052fbc3 : JNZ 0x0052fba8
0052fbc5 : JMP 0x0052fbd9
0052fbc7 : CALL 0x00526bc0
0052fbcc : ADD dword ptr [ESI],-0x10
0052fbcf : MOV ECX,dword ptr [ESI]
0052fbd1 : CALL 0x00526bc0
0052fbd6 : ADD dword ptr [ESI],-0x10
0052fbd9 : MOV ESI,dword ptr [EDI]
0052fbdb : ADD dword ptr [ESI + 0x8],0x10
0052fbdf : MOV EAX,dword ptr [ESI + 0x8]
0052fbe2 : ADD ESI,0x8
0052fbe5 : POP EBX
0052fbe6 : CMP EAX,dword ptr [ESI + 0x8]
0052fbe9 : JC 0x0052fbf2
0052fbeb : MOV ECX,ESI
0052fbed : CALL 0x00504050
0052fbf2 : MOV ESI,dword ptr [ESI]
0052fbf4 : TEST ESI,ESI
0052fbf6 : JZ 0x0052fc04
0052fbf8 : LEA ECX,[ESP + 0x24]
0052fbfc : PUSH ECX
0052fbfd : MOV ECX,ESI
0052fbff : CALL 0x005266c0
0052fc04 : LEA ECX,[ESP + 0x24]
0052fc08 : CALL 0x00526bc0
0052fc0d : POP EDI
0052fc0e : POP ESI
0052fc0f : ADD ESP,0x2c
0052fc12 : RET
