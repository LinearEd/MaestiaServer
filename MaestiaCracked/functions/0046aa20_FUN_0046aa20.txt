PROGRAM  : Maestia.exe
FUNCTION : FUN_0046aa20
ENTRY    : 0046aa20
BODY     : [[0046aa20, 0046ab07]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_0046aa20(undefined4 param_1)

{
  char *_Src;
  char cVar1;
  int iVar2;
  char *pcVar3;
  size_t _Size;
  int unaff_EDI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b8229b;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(int *)(unaff_EDI + 4) != 0) &&
     (cVar1 = FUN_00a5cdd0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc), cVar1 != '\0')) {
    *(undefined4 *)(unaff_EDI + 0x118) = 0;
    *(undefined1 *)(unaff_EDI + 0x11c) = 0;
  }
  cVar1 = FUN_00a5ce20(param_1);
  if (cVar1 != '\0') {
    iVar2 = FUN_00455a80("Color_%x",param_1);
    local_8 = 0;
    _Src = (char *)(iVar2 + 8);
    if (_Src == (char *)0x0) {
      *(undefined4 *)(unaff_EDI + 0x118) = 0;
      *(undefined1 *)(unaff_EDI + 0x11c) = 0;
    }
    else {
      pcVar3 = _Src;
      do {
        cVar1 = *pcVar3;
        pcVar3 = pcVar3 + 1;
      } while (cVar1 != '\0');
      _Size = (int)pcVar3 - (iVar2 + 9);
      if (_Size != 0) {
        _memmove((void *)(unaff_EDI + 0x11c),_Src,_Size);
      }
      *(size_t *)(unaff_EDI + 0x118) = _Size;
      *(undefined1 *)(_Size + 0x11c + unaff_EDI) = 0;
    }
  }
  ExceptionList = local_10;
  return *(int *)(unaff_EDI + 4) != 0;
}



============================================================
DISASSEMBLY
============================================================
0046aa20 : PUSH EBP
0046aa21 : MOV EBP,ESP
0046aa23 : PUSH -0x1
0046aa25 : PUSH 0xb8229b
0046aa2a : MOV EAX,FS:[0x0]
0046aa30 : PUSH EAX
0046aa31 : SUB ESP,0x10c
0046aa37 : PUSH EBX
0046aa38 : PUSH ESI
0046aa39 : MOV EAX,[0x00d66fa0]
0046aa3e : XOR EAX,EBP
0046aa40 : PUSH EAX
0046aa41 : LEA EAX,[EBP + -0xc]
0046aa44 : MOV FS:[0x0],EAX
0046aa4a : MOV EBX,dword ptr [EBP + 0x8]
0046aa4d : CMP dword ptr [EDI + 0x4],0x0
0046aa51 : JZ 0x0046aa6f
0046aa53 : MOV ESI,EDI
0046aa55 : CALL 0x00a5cdd0
0046aa5a : TEST AL,AL
0046aa5c : JZ 0x0046aa6f
0046aa5e : MOV dword ptr [EDI + 0x118],0x0
0046aa68 : MOV byte ptr [EDI + 0x11c],0x0
0046aa6f : PUSH EBX
0046aa70 : MOV EAX,EDI
0046aa72 : CALL 0x00a5ce20
0046aa77 : TEST AL,AL
0046aa79 : JZ 0x0046aaed
0046aa7b : PUSH EBX
0046aa7c : PUSH 0xcd5800
0046aa81 : LEA ESI,[EBP + 0xfffffee8]
0046aa87 : CALL 0x00455a80
0046aa8c : ADD ESP,0x8
0046aa8f : XOR ECX,ECX
0046aa91 : MOV dword ptr [EBP + -0x4],ECX
0046aa94 : LEA EDX,[EAX + 0x8]
0046aa97 : CMP EDX,ECX
0046aa99 : JNZ 0x0046aaa9
0046aa9b : MOV dword ptr [EDI + 0x118],ECX
0046aaa1 : MOV byte ptr [EDI + 0x11c],CL
0046aaa7 : JMP 0x0046aadc
0046aaa9 : MOV EAX,EDX
0046aaab : LEA ESI,[EAX + 0x1]
0046aaae : MOV EDI,EDI
0046aab0 : MOV CL,byte ptr [EAX]
0046aab2 : INC EAX
0046aab3 : TEST CL,CL
0046aab5 : JNZ 0x0046aab0
0046aab7 : SUB EAX,ESI
0046aab9 : MOV ESI,EAX
0046aabb : JZ 0x0046aace
0046aabd : PUSH ESI
0046aabe : PUSH EDX
0046aabf : LEA EAX,[EDI + 0x11c]
0046aac5 : PUSH EAX
0046aac6 : CALL 0x00636880
0046aacb : ADD ESP,0xc
0046aace : MOV dword ptr [EDI + 0x118],ESI
0046aad4 : MOV byte ptr [ESI + EDI*0x1 + 0x11c],0x0
0046aadc : MOV dword ptr [EBP + -0x4],0xffffffff
0046aae3 : MOV dword ptr [EBP + 0xfffffee8],0xcd3f48
0046aaed : XOR EAX,EAX
0046aaef : CMP dword ptr [EDI + 0x4],EAX
0046aaf2 : SETNZ AL
0046aaf5 : MOV ECX,dword ptr [EBP + -0xc]
0046aaf8 : MOV dword ptr FS:[0x0],ECX
0046aaff : POP ECX
0046ab00 : POP ESI
0046ab01 : POP EBX
0046ab02 : MOV ESP,EBP
0046ab04 : POP EBP
0046ab05 : RET 0x4
