PROGRAM  : Maestia.exe
FUNCTION : FUN_0084e730
ENTRY    : 0084e730
BODY     : [[0084e730, 0084ea3c] [0084ea40, 0084ea66] [0084eaa9, 0084eaad] [0084f132, 0084f157]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0084e730(undefined4 param_1,undefined4 param_2)

{
  int iVar1;
  uint3 uVar2;
  char cVar3;
  undefined4 uVar4;
  short *psVar5;
  undefined1 auStack_20c [16];
  undefined4 local_1fc;
  int local_1f8 [4];
  undefined4 local_1e8;
  undefined1 local_1c8 [4];
  undefined2 local_1c4;
  undefined4 local_1b4;
  uint local_1b0;
  undefined2 local_194;
  undefined4 local_184;
  uint local_180;
  undefined2 local_178;
  undefined4 local_168;
  uint local_164;
  undefined2 local_140;
  undefined4 local_130;
  uint local_12c;
  undefined1 local_c8 [28];
  undefined4 local_ac;
  int local_a8;
  undefined1 local_70 [64];
  int local_30;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b4413c;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_20c;
  ExceptionList = &local_14;
  local_1e8 = param_1;
  FUN_0070d390(DAT_00d66fa0 ^ (uint)&stack0xfffffde8);
  local_c = 0;
  local_140 = 0;
  local_12c = 7;
  local_130 = 0;
  FUN_00406360(L"Script.mvd",10);
  iVar1 = DAT_017251a0;
  local_c._0_1_ = 1;
  FUN_0043acd0(DAT_017251a0 + 4,local_1f8);
  uVar2 = local_c._1_3_;
  if (local_1f8[0] == *(int *)(iVar1 + 8)) {
    local_1fc = 0;
  }
  else {
    local_1fc = *(undefined4 *)(local_1f8[0] + 0x28);
  }
  local_c = (uint)local_c._1_3_ << 8;
  if (7 < local_12c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_12c = 7;
  local_130 = 0;
  local_140 = 0;
  local_180 = 7;
  local_184 = 0;
  local_194 = 0;
  local_c._0_1_ = 2;
  local_178 = 0;
  local_164 = 7;
  local_168 = 0;
  local_c._1_3_ = uVar2;
  FUN_00406360(L"vdisk root\\enchant\\",0x13);
  local_c._0_1_ = 3;
  uVar4 = FUN_00403450(local_1c8,param_2);
  local_c._0_1_ = 4;
  FUN_00405eb0(uVar4,0,0xffffffff);
  local_c._0_1_ = 3;
  if (7 < local_1b0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1b0 = 7;
  local_1b4 = 0;
  local_1c4 = 0;
  cVar3 = FUN_00802fa0(local_1fc,local_c8);
  if (cVar3 == '\0') {
    FUN_0070d4c0();
    local_c = CONCAT31(local_c._1_3_,2);
    if (7 < local_164) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_164 = 7;
    local_168 = 0;
    local_178 = 0;
    local_c = (uint)local_c._1_3_ << 8;
    if (7 < local_180) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    if (local_a8 != 0) {
      FUN_0089e830(local_70);
      local_c = CONCAT31(local_c._1_3_,5);
      psVar5 = (short *)FUN_0089f0f0(local_ac,local_a8);
      do {
        psVar5 = (short *)FUN_0089edf0(psVar5,local_70);
        if (psVar5 == (short *)0x0) break;
      } while (*psVar5 != 0);
      if (local_30 != 0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    FUN_0070d4c0();
    local_c = CONCAT31(local_c._1_3_,2);
    if (7 < local_164) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_164 = 7;
    local_168 = 0;
    local_178 = 0;
    local_c = (uint)local_c._1_3_ << 8;
    if (7 < local_180) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_164 = 7;
  local_168 = 0;
  local_178 = 0;
  local_194 = 0;
  local_184 = 0;
  local_180 = 7;
  local_c = 0xffffffff;
  FUN_0070d710();
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_20c);
  return;
}



============================================================
DISASSEMBLY
============================================================
0084e730 : PUSH EBP
0084e731 : MOV EBP,ESP
0084e733 : AND ESP,0xfffffff8
0084e736 : PUSH -0x1
0084e738 : PUSH 0xb4413c
0084e73d : MOV EAX,FS:[0x0]
0084e743 : PUSH EAX
0084e744 : SUB ESP,0x1f8
0084e74a : MOV EAX,[0x00d66fa0]
0084e74f : XOR EAX,ESP
0084e751 : MOV dword ptr [ESP + 0x1f0],EAX
0084e758 : PUSH EBX
0084e759 : PUSH ESI
0084e75a : PUSH EDI
0084e75b : MOV EAX,[0x00d66fa0]
0084e760 : XOR EAX,ESP
0084e762 : PUSH EAX
0084e763 : LEA EAX,[ESP + 0x208]
0084e76a : MOV FS:[0x0],EAX
0084e770 : MOV EAX,dword ptr [EBP + 0x8]
0084e773 : MOV EBX,dword ptr [EBP + 0xc]
0084e776 : LEA ECX,[ESP + 0x154]
0084e77d : MOV dword ptr [ESP + 0x34],EAX
0084e781 : CALL 0x0070d390
0084e786 : XOR EAX,EAX
0084e788 : MOV dword ptr [ESP + 0x210],EAX
0084e78f : XOR ECX,ECX
0084e791 : PUSH 0xa
0084e793 : MOV word ptr [ESP + 0xe0],CX
0084e79b : PUSH 0xc3ce60
0084e7a0 : LEA ECX,[ESP + 0xe0]
0084e7a7 : MOV dword ptr [ESP + 0xf8],0x7
0084e7b2 : MOV dword ptr [ESP + 0xf4],EAX
0084e7b9 : CALL 0x00406360
0084e7be : MOV byte ptr [ESP + 0x210],0x1
0084e7c6 : MOV EDI,dword ptr [0x017251a0]
0084e7cc : LEA EDX,[ESP + 0x24]
0084e7d0 : PUSH EDX
0084e7d1 : LEA EAX,[EDI + 0x4]
0084e7d4 : PUSH EAX
0084e7d5 : LEA ESI,[ESP + 0xe0]
0084e7dc : CALL 0x0043acd0
0084e7e1 : MOV EDI,dword ptr [EDI + 0x8]
0084e7e4 : MOV EAX,dword ptr [ESP + 0x24]
0084e7e8 : CMP EAX,EDI
0084e7ea : JNZ 0x0084e7f4
0084e7ec : XOR EDI,EDI
0084e7ee : MOV dword ptr [ESP + 0x20],EDI
0084e7f2 : JMP 0x0084e7fd
0084e7f4 : MOV ECX,dword ptr [EAX + 0x28]
0084e7f7 : MOV dword ptr [ESP + 0x20],ECX
0084e7fb : XOR EDI,EDI
0084e7fd : MOV byte ptr [ESP + 0x210],0x0
0084e805 : CMP dword ptr [ESP + 0xf0],0x8
0084e80d : JC 0x0084e81b
0084e80f : MOV ECX,dword ptr [ESP + 0xdc]
0084e816 : CALL 0x006f04e0
0084e81b : MOV ESI,0x7
0084e820 : XOR EDX,EDX
0084e822 : XOR EAX,EAX
0084e824 : MOV dword ptr [ESP + 0xf0],ESI
0084e82b : MOV dword ptr [ESP + 0xec],EDI
0084e832 : MOV word ptr [ESP + 0xdc],DX
0084e83a : MOV dword ptr [ESP + 0x9c],ESI
0084e841 : MOV dword ptr [ESP + 0x98],EDI
0084e848 : MOV word ptr [ESP + 0x88],AX
0084e850 : MOV byte ptr [ESP + 0x210],0x2
0084e858 : XOR ECX,ECX
0084e85a : PUSH 0x13
0084e85c : MOV word ptr [ESP + 0xa8],CX
0084e864 : PUSH 0xc3ce78
0084e869 : LEA ECX,[ESP + 0xa8]
0084e870 : MOV dword ptr [ESP + 0xc0],ESI
0084e877 : MOV dword ptr [ESP + 0xbc],EDI
0084e87e : CALL 0x00406360
0084e883 : MOV byte ptr [ESP + 0x210],0x3
0084e88b : LEA EDX,[ESP + 0x54]
0084e88f : PUSH EBX
0084e890 : PUSH EDX
0084e891 : LEA ECX,[ESP + 0xa8]
0084e898 : CALL 0x00403450
0084e89d : ADD ESP,0x8
0084e8a0 : MOV byte ptr [ESP + 0x210],0x4
0084e8a8 : PUSH -0x1
0084e8aa : PUSH EDI
0084e8ab : PUSH EAX
0084e8ac : LEA ECX,[ESP + 0x90]
0084e8b3 : CALL 0x00405eb0
0084e8b8 : MOV byte ptr [ESP + 0x210],0x3
0084e8c0 : MOV EBX,0x8
0084e8c5 : CMP dword ptr [ESP + 0x6c],EBX
0084e8c9 : JC 0x0084e8d4
0084e8cb : MOV ECX,dword ptr [ESP + 0x58]
0084e8cf : CALL 0x006f04e0
0084e8d4 : MOV EDX,dword ptr [ESP + 0x20]
0084e8d8 : LEA ECX,[ESP + 0x154]
0084e8df : PUSH ECX
0084e8e0 : XOR EAX,EAX
0084e8e2 : PUSH EDX
0084e8e3 : LEA EDX,[ESP + 0x8c]
0084e8ea : MOV dword ptr [ESP + 0x74],ESI
0084e8ee : MOV dword ptr [ESP + 0x70],EDI
0084e8f2 : MOV word ptr [ESP + 0x60],AX
0084e8f7 : CALL 0x00802fa0
0084e8fc : ADD ESP,0x8
0084e8ff : TEST AL,AL
0084e901 : JNZ 0x0084e99a
0084e907 : LEA ECX,[ESP + 0x154]
0084e90e : CALL 0x0070d4c0
0084e913 : MOV byte ptr [ESP + 0x210],0x2
0084e91b : CMP dword ptr [ESP + 0xb8],EBX
0084e922 : JC 0x0084e930
0084e924 : MOV ECX,dword ptr [ESP + 0xa4]
0084e92b : CALL 0x006f04e0
0084e930 : XOR EAX,EAX
0084e932 : MOV dword ptr [ESP + 0xb8],ESI
0084e939 : MOV dword ptr [ESP + 0xb4],EDI
0084e940 : MOV word ptr [ESP + 0xa4],AX
0084e948 : MOV byte ptr [ESP + 0x210],AL
0084e94f : CMP dword ptr [ESP + 0x9c],EBX
0084e956 : JC 0x0084e964
0084e958 : MOV ECX,dword ptr [ESP + 0x88]
0084e95f : CALL 0x006f04e0
0084e964 : XOR ECX,ECX
0084e966 : MOV word ptr [ESP + 0x88],CX
0084e96e : MOV dword ptr [ESP + 0x98],EDI
0084e975 : MOV dword ptr [ESP + 0x9c],ESI
0084e97c : MOV dword ptr [ESP + 0x210],0xffffffff
0084e987 : LEA ECX,[ESP + 0x154]
0084e98e : CALL 0x0070d710
0084e993 : XOR AL,AL
0084e995 : JMP 0x0084f132
0084e99a : CMP dword ptr [ESP + 0x174],EDI
0084e9a1 : JNZ 0x0084ea0f
0084e9a3 : LEA ECX,[ESP + 0x154]
0084e9aa : CALL 0x0070d4c0
0084e9af : MOV byte ptr [ESP + 0x210],0x2
0084e9b7 : CMP dword ptr [ESP + 0xb8],EBX
0084e9be : JC 0x0084e9cc
0084e9c0 : MOV ECX,dword ptr [ESP + 0xa4]
0084e9c7 : CALL 0x006f04e0
0084e9cc : XOR EDX,EDX
0084e9ce : MOV dword ptr [ESP + 0xb8],ESI
0084e9d5 : MOV dword ptr [ESP + 0xb4],EDI
0084e9dc : MOV word ptr [ESP + 0xa4],DX
0084e9e4 : MOV byte ptr [ESP + 0x210],DL
0084e9eb : CMP dword ptr [ESP + 0x9c],EBX
0084e9f2 : JC 0x0084ea00
0084e9f4 : MOV ECX,dword ptr [ESP + 0x88]
0084e9fb : CALL 0x006f04e0
0084ea00 : XOR EAX,EAX
0084ea02 : MOV word ptr [ESP + 0x88],AX
0084ea0a : JMP 0x0084e96e
0084ea0f : LEA ECX,[ESP + 0x1ac]
0084ea16 : PUSH ECX
0084ea17 : CALL 0x0089e830
0084ea1c : MOV byte ptr [ESP + 0x210],0x5
0084ea24 : MOV EDX,dword ptr [ESP + 0x174]
0084ea2b : MOV EAX,dword ptr [ESP + 0x170]
0084ea32 : PUSH EDX
0084ea33 : PUSH EAX
0084ea34 : CALL 0x0089f0f0
0084ea39 : MOV EBX,EAX
0084ea3b : JMP 0x0084ea40
0084ea40 : LEA ECX,[ESP + 0x1ac]
0084ea47 : PUSH ECX
0084ea48 : PUSH EAX
0084ea49 : CALL 0x0089edf0
0084ea4e : CMP EAX,EDI
0084ea50 : JZ 0x0084ea57
0084ea52 : CMP word ptr [EAX],DI
0084ea55 : JNZ 0x0084ea40
0084ea57 : MOV ECX,EBX
0084ea59 : CMP dword ptr [ESP + 0x1ec],EDI
0084ea60 : JNZ 0x0084eaa9
0084ea62 : CALL 0x006f04e0
0084eaa9 : CALL 0x006f04e0
0084f132 : MOV ECX,dword ptr [ESP + 0x208]
0084f139 : MOV dword ptr FS:[0x0],ECX
0084f140 : POP ECX
0084f141 : POP EDI
0084f142 : POP ESI
0084f143 : POP EBX
0084f144 : MOV ECX,dword ptr [ESP + 0x1f0]
0084f14b : XOR ECX,ESP
0084f14d : CALL 0x00633e6b
0084f152 : MOV ESP,EBP
0084f154 : POP EBP
0084f155 : RET 0x8
