PROGRAM  : Maestia.exe
FUNCTION : FUN_0056ee30
ENTRY    : 0056ee30
BODY     : [[0056ee30, 0056ef65]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056ee30(void)

{
  int iVar1;
  undefined4 uVar2;
  LONG LVar3;
  int in_ECX;
  uint uVar4;
  undefined4 local_c;
  uint local_8;
  uint local_4;
  
  iVar1 = FUN_0051b1a0();
  if (iVar1 != 0) {
    local_c = 3;
    FUN_0051c600(in_ECX + 0x20);
    FUN_0051c600(in_ECX + 0x18);
    uVar2 = FUN_00514460(*(undefined4 *)(in_ECX + 0x10),&local_c,*(undefined4 *)(in_ECX + 0x14),0,0)
    ;
    if (*(int *)(in_ECX + 0x24) != 0) {
      FUN_00524240();
    }
    *(undefined4 *)(in_ECX + 0x24) = uVar2;
    uVar4 = local_4 & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar4 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar4);
    }
    uVar4 = local_8 & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar4 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar4);
    }
  }
  if (*(int *)(in_ECX + 0x24) == 0) {
    local_c = 3;
    FUN_0051c600(in_ECX + 0x1c);
    FUN_0051c600(in_ECX + 0x18);
    uVar2 = FUN_00514460(*(undefined4 *)(in_ECX + 0x10),&local_c,*(undefined4 *)(in_ECX + 0x14),0,0)
    ;
    if (*(int *)(in_ECX + 0x24) != 0) {
      FUN_00524240();
    }
    *(undefined4 *)(in_ECX + 0x24) = uVar2;
    LVar3 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(local_4 & 0xfffffffc);
    }
    LVar3 = InterlockedExchangeAdd((LONG *)((local_8 & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(local_8 & 0xfffffffc);
    }
  }
  InterlockedExchange((LONG *)(in_ECX + 0x28),1);
  return;
}



============================================================
DISASSEMBLY
============================================================
0056ee30 : SUB ESP,0xc
0056ee33 : PUSH EBX
0056ee34 : PUSH ESI
0056ee35 : MOV ESI,ECX
0056ee37 : PUSH EDI
0056ee38 : LEA EDI,[ESI + 0x20]
0056ee3b : MOV ECX,EDI
0056ee3d : CALL 0x0051b1a0
0056ee42 : MOV EBX,dword ptr [0x00b851cc]
0056ee48 : TEST EAX,EAX
0056ee4a : JBE 0x0056eec9
0056ee4c : PUSH EDI
0056ee4d : LEA ECX,[ESP + 0x14]
0056ee51 : MOV dword ptr [ESP + 0x10],0x3
0056ee59 : CALL 0x0051c600
0056ee5e : LEA EAX,[ESI + 0x18]
0056ee61 : PUSH EAX
0056ee62 : LEA ECX,[ESP + 0x18]
0056ee66 : CALL 0x0051c600
0056ee6b : MOV ECX,dword ptr [ESI + 0x14]
0056ee6e : MOV EAX,dword ptr [ESI + 0x10]
0056ee71 : PUSH 0x0
0056ee73 : PUSH 0x0
0056ee75 : PUSH ECX
0056ee76 : LEA EDX,[ESP + 0x18]
0056ee7a : PUSH EDX
0056ee7b : PUSH EAX
0056ee7c : CALL 0x00514460
0056ee81 : MOV ECX,dword ptr [ESI + 0x24]
0056ee84 : ADD ESP,0x14
0056ee87 : MOV EDI,EAX
0056ee89 : TEST ECX,ECX
0056ee8b : JZ 0x0056ee92
0056ee8d : CALL 0x00524240
0056ee92 : MOV dword ptr [ESI + 0x24],EDI
0056ee95 : MOV EDI,dword ptr [ESP + 0x14]
0056ee99 : AND EDI,0xfffffffc
0056ee9c : PUSH -0x1
0056ee9e : LEA EAX,[EDI + 0x4]
0056eea1 : PUSH EAX
0056eea2 : CALL EBX
0056eea4 : SUB EAX,0x1
0056eea7 : JNZ 0x0056eeaf
0056eea9 : PUSH EDI
0056eeaa : CALL 0x00515cf0
0056eeaf : MOV EDI,dword ptr [ESP + 0x10]
0056eeb3 : AND EDI,0xfffffffc
0056eeb6 : PUSH -0x1
0056eeb8 : LEA ECX,[EDI + 0x4]
0056eebb : PUSH ECX
0056eebc : CALL EBX
0056eebe : SUB EAX,0x1
0056eec1 : JNZ 0x0056eec9
0056eec3 : PUSH EDI
0056eec4 : CALL 0x00515cf0
0056eec9 : CMP dword ptr [ESI + 0x24],0x0
0056eecd : JNZ 0x0056ef53
0056eed3 : LEA EDX,[ESI + 0x1c]
0056eed6 : PUSH EDX
0056eed7 : LEA ECX,[ESP + 0x14]
0056eedb : MOV dword ptr [ESP + 0x10],0x3
0056eee3 : CALL 0x0051c600
0056eee8 : LEA EAX,[ESI + 0x18]
0056eeeb : PUSH EAX
0056eeec : LEA ECX,[ESP + 0x18]
0056eef0 : CALL 0x0051c600
0056eef5 : MOV ECX,dword ptr [ESI + 0x14]
0056eef8 : MOV EAX,dword ptr [ESI + 0x10]
0056eefb : PUSH 0x0
0056eefd : PUSH 0x0
0056eeff : PUSH ECX
0056ef00 : LEA EDX,[ESP + 0x18]
0056ef04 : PUSH EDX
0056ef05 : PUSH EAX
0056ef06 : CALL 0x00514460
0056ef0b : MOV ECX,dword ptr [ESI + 0x24]
0056ef0e : ADD ESP,0x14
0056ef11 : MOV EDI,EAX
0056ef13 : TEST ECX,ECX
0056ef15 : JZ 0x0056ef1c
0056ef17 : CALL 0x00524240
0056ef1c : MOV dword ptr [ESI + 0x24],EDI
0056ef1f : MOV EDI,dword ptr [ESP + 0x14]
0056ef23 : AND EDI,0xfffffffc
0056ef26 : PUSH -0x1
0056ef28 : LEA EAX,[EDI + 0x4]
0056ef2b : PUSH EAX
0056ef2c : CALL EBX
0056ef2e : SUB EAX,0x1
0056ef31 : JNZ 0x0056ef39
0056ef33 : PUSH EDI
0056ef34 : CALL 0x00515cf0
0056ef39 : MOV EDI,dword ptr [ESP + 0x10]
0056ef3d : AND EDI,0xfffffffc
0056ef40 : PUSH -0x1
0056ef42 : LEA ECX,[EDI + 0x4]
0056ef45 : PUSH ECX
0056ef46 : CALL EBX
0056ef48 : SUB EAX,0x1
0056ef4b : JNZ 0x0056ef53
0056ef4d : PUSH EDI
0056ef4e : CALL 0x00515cf0
0056ef53 : PUSH 0x1
0056ef55 : ADD ESI,0x28
0056ef58 : PUSH ESI
0056ef59 : CALL dword ptr [0x00b85108]
0056ef5f : POP EDI
0056ef60 : POP ESI
0056ef61 : POP EBX
0056ef62 : ADD ESP,0xc
0056ef65 : RET
