PROGRAM  : Maestia.exe
FUNCTION : FUN_007ea3c0
ENTRY    : 007ea3c0
BODY     : [[007ea3c0, 007ea747]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007ea3c0(undefined4 param_1,undefined4 param_2)

{
  int *piVar1;
  uint uVar2;
  char cVar3;
  uint uVar4;
  int iVar5;
  int unaff_ESI;
  bool bVar6;
  bool bVar7;
  float10 fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  undefined **local_158 [33];
  undefined **local_d4 [33];
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30;
  int local_2c;
  float local_28;
  int local_24;
  float local_20;
  int *local_1c;
  float local_18;
  float local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b436f5;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = FUN_007e8090(param_1,param_2);
  if (local_2c < 1) {
    ExceptionList = local_10;
    return 0;
  }
  local_24 = 0;
  if (0 < local_2c) {
    do {
      piVar1 = *(int **)(*(int *)(*(int *)(unaff_ESI + 0xfc) + local_24 * 4) + 8);
      if (piVar1 != (int *)0x0) {
        uVar2 = piVar1[0xc2];
        local_1c = piVar1;
        cVar3 = FUN_007d5cf0(piVar1);
        if (cVar3 == '\0') {
          cVar3 = FUN_007d5bf0(piVar1);
          if (((cVar3 == '\0') && ((~uVar2 & 1) != 0)) &&
             ((iVar5 = piVar1[0xc1], iVar5 == 1 || ((iVar5 == 2 || (iVar5 == 0xe)))))) {
            if (*(char *)((int)piVar1 + 0x5d) != '\0') {
              (**(code **)(*piVar1 + 0x14))(uVar4);
            }
            fVar10 = *(float *)(unaff_ESI + 0x200) - *(float *)(unaff_ESI + 0x20c);
            fVar14 = *(float *)(unaff_ESI + 0x208) - *(float *)(unaff_ESI + 0x214);
            fVar12 = (float)piVar1[0x2e] - *(float *)(unaff_ESI + 0x20c);
            fVar13 = (float)piVar1[0x30] - *(float *)(unaff_ESI + 0x214);
            fVar11 = (float)piVar1[0x2f] - *(float *)(unaff_ESI + 0x210);
            fVar9 = (float)piVar1[0x2f] - *(float *)(unaff_ESI + 0x210);
            local_20 = fVar10 * fVar10 + fVar11 * fVar11 + fVar14 * fVar14;
            local_14 = fVar12 * fVar12 + fVar9 * fVar9 + fVar13 * fVar13;
            iVar5 = FUN_0043d910(local_d4);
            local_38 = *(float *)(iVar5 + 4);
            local_28 = *(float *)(iVar5 + 8);
            local_34 = *(float *)(iVar5 + 0xc);
            local_8 = 0xffffffff;
            local_d4[0] = &PTR_FUN_00cd083c;
            iVar5 = FUN_0043d910(local_158);
            local_8 = 0xffffffff;
            local_158[0] = &PTR_FUN_00cd083c;
            if (((((*(float *)(unaff_ESI + 0x200) <= local_38) ||
                  (*(float *)(iVar5 + 0x10) <= *(float *)(unaff_ESI + 0x200))) ||
                 (*(float *)(unaff_ESI + 0x204) <= local_28)) ||
                ((*(float *)(iVar5 + 0x14) <= *(float *)(unaff_ESI + 0x204) ||
                 (*(float *)(unaff_ESI + 0x208) <= local_34)))) ||
               ((*(float *)(iVar5 + 0x18) <= *(float *)(unaff_ESI + 0x208) || (piVar1[0xc1] == 0xe))
               )) {
              bVar7 = local_20 == local_14;
              bVar6 = local_20 < local_14;
            }
            else {
              local_44 = *(float *)(unaff_ESI + 0x200) - *(float *)(unaff_ESI + 0x20c);
              local_3c = *(float *)(unaff_ESI + 0x208) - *(float *)(unaff_ESI + 0x214);
              local_40 = *(float *)(unaff_ESI + 0x204) - *(float *)(unaff_ESI + 0x210);
              fVar8 = (float10)FUN_0040f460(local_44 * local_44 + local_3c * local_3c +
                                            local_40 * local_40);
              local_30 = (float)fVar8;
              local_18 = 0.0;
              local_50 = 0;
              local_4c = 0;
              local_48 = 0;
              D3DXVec3Normalize(&local_50,&local_44);
              cVar3 = (**(code **)(*piVar1 + 0x108))(param_2,param_1,&local_18);
              if (cVar3 == '\0') goto LAB_007ea716;
              bVar7 = local_30 == local_18;
              bVar6 = local_30 < local_18;
            }
            if (!bVar6 && !bVar7) {
              if (piVar1[0xc1] == 0xe) {
                if ((*(char *)(unaff_ESI + 0x2a8b) == '\0') ||
                   (*(char *)(*(int *)(*(int *)(unaff_ESI + 0x20) + 0x104) + 0xa9ba) == '\0'))
                goto LAB_007ea716;
                FUN_007b5400(piVar1 + 3,1);
              }
              else {
                (**(code **)(*piVar1 + 0x114))(1,0x46);
              }
              FUN_00449610();
            }
          }
        }
      }
LAB_007ea716:
      local_24 = local_24 + 1;
    } while (local_24 < local_2c);
  }
  ExceptionList = local_10;
  return *(int *)(unaff_ESI + 0x220) - *(int *)(unaff_ESI + 0x21c) >> 2;
}



============================================================
DISASSEMBLY
============================================================
007ea3c0 : PUSH EBP
007ea3c1 : MOV EBP,ESP
007ea3c3 : PUSH -0x1
007ea3c5 : PUSH 0xb436f5
007ea3ca : MOV EAX,FS:[0x0]
007ea3d0 : PUSH EAX
007ea3d1 : SUB ESP,0x148
007ea3d7 : PUSH EBX
007ea3d8 : PUSH EDI
007ea3d9 : MOV EAX,[0x00d66fa0]
007ea3de : XOR EAX,EBP
007ea3e0 : PUSH EAX
007ea3e1 : LEA EAX,[EBP + -0xc]
007ea3e4 : MOV FS:[0x0],EAX
007ea3ea : MOV EAX,dword ptr [EBP + 0xc]
007ea3ed : MOV ECX,dword ptr [EBP + 0x8]
007ea3f0 : PUSH EAX
007ea3f1 : PUSH ECX
007ea3f2 : MOV ECX,ESI
007ea3f4 : CALL 0x007e8090
007ea3f9 : MOV dword ptr [EBP + -0x28],EAX
007ea3fc : TEST EAX,EAX
007ea3fe : JG 0x007ea415
007ea400 : XOR EAX,EAX
007ea402 : MOV ECX,dword ptr [EBP + -0xc]
007ea405 : MOV dword ptr FS:[0x0],ECX
007ea40c : POP ECX
007ea40d : POP EDI
007ea40e : POP EBX
007ea40f : MOV ESP,EBP
007ea411 : POP EBP
007ea412 : RET 0x8
007ea415 : XOR ECX,ECX
007ea417 : MOV dword ptr [EBP + -0x20],ECX
007ea41a : TEST EAX,EAX
007ea41c : JLE 0x007ea726
007ea422 : MOV EDX,dword ptr [ESI + 0xfc]
007ea428 : MOV EAX,dword ptr [EDX + ECX*0x4]
007ea42b : MOV EDI,dword ptr [EAX + 0x8]
007ea42e : MOV dword ptr [EBP + -0x18],EDI
007ea431 : TEST EDI,EDI
007ea433 : JZ 0x007ea716
007ea439 : MOV EBX,dword ptr [EDI + 0x308]
007ea43f : PUSH EDI
007ea440 : CALL 0x007d5cf0
007ea445 : TEST AL,AL
007ea447 : JNZ 0x007ea716
007ea44d : PUSH EDI
007ea44e : CALL 0x007d5bf0
007ea453 : TEST AL,AL
007ea455 : JNZ 0x007ea716
007ea45b : NOT EBX
007ea45d : TEST BL,0x1
007ea460 : JZ 0x007ea716
007ea466 : MOV EAX,dword ptr [EDI + 0x304]
007ea46c : CMP EAX,0x1
007ea46f : JZ 0x007ea47f
007ea471 : CMP EAX,0x2
007ea474 : JZ 0x007ea47f
007ea476 : CMP EAX,0xe
007ea479 : JNZ 0x007ea716
007ea47f : CMP byte ptr [EDI + 0x5d],0x0
007ea483 : JZ 0x007ea48e
007ea485 : MOV EDX,dword ptr [EDI]
007ea487 : MOV EAX,dword ptr [EDX + 0x14]
007ea48a : MOV ECX,EDI
007ea48c : CALL EAX
007ea48e : MOVSS XMM1,dword ptr [ESI + 0x200]
007ea496 : SUBSS XMM1,dword ptr [ESI + 0x20c]
007ea49e : MOVSS XMM0,dword ptr [EDI + 0xbc]
007ea4a6 : MOVSS XMM5,dword ptr [ESI + 0x208]
007ea4ae : SUBSS XMM5,dword ptr [ESI + 0x214]
007ea4b6 : MOVSS XMM3,dword ptr [EDI + 0xb8]
007ea4be : MOVSS XMM4,dword ptr [EDI + 0xc0]
007ea4c6 : SUBSS XMM3,dword ptr [ESI + 0x20c]
007ea4ce : SUBSS XMM4,dword ptr [ESI + 0x214]
007ea4d6 : MOVAPS XMM2,XMM1
007ea4d9 : MOVAPS XMM1,XMM0
007ea4dc : SUBSS XMM1,dword ptr [ESI + 0x210]
007ea4e4 : SUBSS XMM0,dword ptr [ESI + 0x210]
007ea4ec : MOVAPS XMM6,XMM1
007ea4ef : MULSS XMM6,XMM1
007ea4f3 : MULSS XMM2,XMM2
007ea4f7 : ADDSS XMM2,XMM6
007ea4fb : MOVAPS XMM1,XMM5
007ea4fe : MULSS XMM1,XMM5
007ea502 : ADDSS XMM2,XMM1
007ea506 : MOVSS dword ptr [EBP + -0x1c],XMM2
007ea50b : MOVAPS XMM2,XMM0
007ea50e : MULSS XMM2,XMM0
007ea512 : MOVAPS XMM1,XMM3
007ea515 : MULSS XMM1,XMM1
007ea519 : LEA ECX,[EBP + 0xffffff30]
007ea51f : MOVAPS XMM0,XMM4
007ea522 : ADDSS XMM1,XMM2
007ea526 : MULSS XMM0,XMM4
007ea52a : PUSH ECX
007ea52b : ADDSS XMM1,XMM0
007ea52f : MOV ECX,EDI
007ea531 : MOVSS dword ptr [EBP + -0x10],XMM1
007ea536 : CALL 0x0043d910
007ea53b : MOV dword ptr [EBP + -0x4],0x0
007ea542 : MOVSS XMM0,dword ptr [EAX + 0x4]
007ea547 : MOVSS dword ptr [EBP + -0x34],XMM0
007ea54c : MOVSS XMM0,dword ptr [EAX + 0x8]
007ea551 : MOVSS dword ptr [EBP + -0x24],XMM0
007ea556 : MOVSS XMM0,dword ptr [EAX + 0xc]
007ea55b : OR EBX,0xffffffff
007ea55e : MOVSS dword ptr [EBP + -0x30],XMM0
007ea563 : MOV dword ptr [EBP + -0x4],EBX
007ea566 : LEA EDX,[EBP + 0xfffffeac]
007ea56c : PUSH EDX
007ea56d : MOV ECX,EDI
007ea56f : MOV dword ptr [EBP + 0xffffff30],0xcd083c
007ea579 : CALL 0x0043d910
007ea57e : MOV dword ptr [EBP + -0x4],0x1
007ea585 : MOVSS XMM1,dword ptr [EAX + 0x10]
007ea58a : MOVSS XMM2,dword ptr [EAX + 0x14]
007ea58f : MOVSS XMM3,dword ptr [EAX + 0x18]
007ea594 : MOV dword ptr [EBP + -0x4],EBX
007ea597 : MOVSS XMM0,dword ptr [ESI + 0x200]
007ea59f : COMISS XMM0,dword ptr [EBP + -0x34]
007ea5a3 : MOV dword ptr [EBP + 0xfffffeac],0xcd083c
007ea5ad : JBE 0x007ea6b7
007ea5b3 : COMISS XMM1,XMM0
007ea5b6 : JBE 0x007ea6b7
007ea5bc : MOVSS XMM0,dword ptr [ESI + 0x204]
007ea5c4 : COMISS XMM0,dword ptr [EBP + -0x24]
007ea5c8 : JBE 0x007ea6b7
007ea5ce : COMISS XMM2,XMM0
007ea5d1 : JBE 0x007ea6b7
007ea5d7 : MOVSS XMM0,dword ptr [ESI + 0x208]
007ea5df : COMISS XMM0,dword ptr [EBP + -0x30]
007ea5e3 : JBE 0x007ea6b7
007ea5e9 : COMISS XMM3,XMM0
007ea5ec : JBE 0x007ea6b7
007ea5f2 : CMP dword ptr [EDI + 0x304],0xe
007ea5f9 : JZ 0x007ea6b7
007ea5ff : MOVSS XMM0,dword ptr [ESI + 0x200]
007ea607 : SUBSS XMM0,dword ptr [ESI + 0x20c]
007ea60f : MOVSS XMM2,dword ptr [ESI + 0x208]
007ea617 : SUBSS XMM2,dword ptr [ESI + 0x214]
007ea61f : MOVSS XMM1,dword ptr [ESI + 0x204]
007ea627 : SUBSS XMM1,dword ptr [ESI + 0x210]
007ea62f : MOVAPS XMM3,XMM0
007ea632 : MULSS XMM3,XMM0
007ea636 : MOVSS dword ptr [EBP + -0x40],XMM0
007ea63b : MOVAPS XMM0,XMM2
007ea63e : MULSS XMM0,XMM2
007ea642 : ADDSS XMM3,XMM0
007ea646 : MOVAPS XMM0,XMM1
007ea649 : MULSS XMM0,XMM1
007ea64d : PUSH ECX
007ea64e : ADDSS XMM3,XMM0
007ea652 : MOVSS dword ptr [EBP + -0x3c],XMM1
007ea657 : MOVSS dword ptr [EBP + -0x38],XMM2
007ea65c : MOVSS dword ptr [ESP],XMM3
007ea661 : CALL 0x0040f460
007ea666 : FSTP float ptr [EBP + -0x2c]
007ea669 : XORPS XMM0,XMM0
007ea66c : ADD ESP,0x4
007ea66f : LEA EAX,[EBP + -0x40]
007ea672 : PUSH EAX
007ea673 : LEA ECX,[EBP + -0x4c]
007ea676 : PUSH ECX
007ea677 : MOVSS dword ptr [EBP + -0x14],XMM0
007ea67c : MOVSS dword ptr [EBP + -0x4c],XMM0
007ea681 : MOVSS dword ptr [EBP + -0x48],XMM0
007ea686 : MOVSS dword ptr [EBP + -0x44],XMM0
007ea68b : CALL 0x004ff722
007ea690 : MOV ECX,dword ptr [EBP + 0x8]
007ea693 : MOV EDX,dword ptr [EDI]
007ea695 : MOV EDX,dword ptr [EDX + 0x108]
007ea69b : LEA EAX,[EBP + -0x14]
007ea69e : PUSH EAX
007ea69f : MOV EAX,dword ptr [EBP + 0xc]
007ea6a2 : PUSH ECX
007ea6a3 : PUSH EAX
007ea6a4 : MOV ECX,EDI
007ea6a6 : CALL EDX
007ea6a8 : TEST AL,AL
007ea6aa : JZ 0x007ea716
007ea6ac : MOVSS XMM0,dword ptr [EBP + -0x2c]
007ea6b1 : COMISS XMM0,dword ptr [EBP + -0x14]
007ea6b5 : JMP 0x007ea6c0
007ea6b7 : MOVSS XMM0,dword ptr [EBP + -0x1c]
007ea6bc : COMISS XMM0,dword ptr [EBP + -0x10]
007ea6c0 : JBE 0x007ea716
007ea6c2 : CMP dword ptr [EDI + 0x304],0xe
007ea6c9 : JZ 0x007ea6dd
007ea6cb : MOV EAX,dword ptr [EDI]
007ea6cd : MOV EDX,dword ptr [EAX + 0x114]
007ea6d3 : PUSH 0x46
007ea6d5 : PUSH 0x1
007ea6d7 : MOV ECX,EDI
007ea6d9 : CALL EDX
007ea6db : JMP 0x007ea708
007ea6dd : CMP byte ptr [ESI + 0x2a8b],0x0
007ea6e4 : JZ 0x007ea716
007ea6e6 : MOV EAX,dword ptr [ESI + 0x20]
007ea6e9 : MOV EAX,dword ptr [EAX + 0x104]
007ea6ef : CMP byte ptr [EAX + 0xa9ba],0x0
007ea6f6 : JZ 0x007ea716
007ea6f8 : LEA ECX,[EDI + 0x68]
007ea6fb : ADD EDI,0xc
007ea6fe : PUSH 0x1
007ea700 : PUSH EDI
007ea701 : MOV EDI,EAX
007ea703 : CALL 0x007b5400
007ea708 : LEA EDI,[EBP + -0x18]
007ea70b : LEA EDX,[ESI + 0x218]
007ea711 : CALL 0x00449610
007ea716 : MOV ECX,dword ptr [EBP + -0x20]
007ea719 : INC ECX
007ea71a : CMP ECX,dword ptr [EBP + -0x28]
007ea71d : MOV dword ptr [EBP + -0x20],ECX
007ea720 : JL 0x007ea422
007ea726 : MOV EAX,dword ptr [ESI + 0x220]
007ea72c : SUB EAX,dword ptr [ESI + 0x21c]
007ea732 : SAR EAX,0x2
007ea735 : MOV ECX,dword ptr [EBP + -0xc]
007ea738 : MOV dword ptr FS:[0x0],ECX
007ea73f : POP ECX
007ea740 : POP EDI
007ea741 : POP EBX
007ea742 : MOV ESP,EBP
007ea744 : POP EBP
007ea745 : RET 0x8
