PROGRAM  : Maestia.exe
FUNCTION : FUN_005d5070
ENTRY    : 005d5070
BODY     : [[005d5070, 005d510e]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005d5070(ushort param_1)

{
  int iVar1;
  ushort uVar2;
  int iVar3;
  int in_ECX;
  uint uVar4;
  int iVar5;
  
  if (param_1 == *(ushort *)(in_ECX + 10)) {
    return 1;
  }
  iVar5 = 0;
  if ((param_1 != 0) && (iVar5 = FUN_00515840((uint)param_1 * 8,0), iVar5 == 0)) {
    return 0;
  }
  if (*(int *)(in_ECX + 0xc) != 0) {
    uVar2 = *(ushort *)(in_ECX + 10);
    if (param_1 < uVar2) {
      uVar2 = param_1;
    }
    uVar4 = 0;
    if (uVar2 != 0) {
      do {
        iVar3 = *(int *)(in_ECX + 0xc);
        iVar1 = uVar4 * 8;
        *(undefined1 *)(iVar1 + iVar5) = *(undefined1 *)(iVar3 + iVar1);
        uVar4 = uVar4 + 1;
        *(undefined4 *)(iVar1 + 4 + iVar5) = *(undefined4 *)(iVar3 + iVar1 + 4);
      } while (uVar4 < uVar2);
    }
    FUN_00515cf0(*(undefined4 *)(in_ECX + 0xc));
  }
  *(int *)(in_ECX + 0xc) = iVar5;
  *(ushort *)(in_ECX + 10) = param_1;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
005d5070 : PUSH EBX
005d5071 : MOV BX,word ptr [ESP + 0x8]
005d5076 : PUSH EBP
005d5077 : MOV EBP,ECX
005d5079 : CMP BX,word ptr [EBP + 0xa]
005d507d : JNZ 0x005d5086
005d507f : POP EBP
005d5080 : MOV AL,0x1
005d5082 : POP EBX
005d5083 : RET 0x4
005d5086 : PUSH EDI
005d5087 : XOR EDI,EDI
005d5089 : TEST BX,BX
005d508c : JZ 0x005d50b2
005d508e : MOV ECX,dword ptr [0x00d73250]
005d5094 : MOVZX EAX,BX
005d5097 : ADD EAX,EAX
005d5099 : ADD EAX,EAX
005d509b : PUSH EDI
005d509c : ADD EAX,EAX
005d509e : PUSH EAX
005d509f : CALL 0x00515840
005d50a4 : MOV EDI,EAX
005d50a6 : TEST EDI,EDI
005d50a8 : JNZ 0x005d50b2
005d50aa : POP EDI
005d50ab : POP EBP
005d50ac : XOR AL,AL
005d50ae : POP EBX
005d50af : RET 0x4
005d50b2 : CMP dword ptr [EBP + 0xc],0x0
005d50b6 : JZ 0x005d5100
005d50b8 : MOVZX EAX,word ptr [EBP + 0xa]
005d50bc : CMP BX,AX
005d50bf : JNC 0x005d50c6
005d50c1 : MOVZX EAX,BX
005d50c4 : JMP 0x005d50c9
005d50c6 : MOVZX EAX,AX
005d50c9 : MOVZX EDX,AX
005d50cc : PUSH ESI
005d50cd : XOR ESI,ESI
005d50cf : TEST EDX,EDX
005d50d1 : JBE 0x005d50f6
005d50d3 : MOV EAX,dword ptr [EBP + 0xc]
005d50d6 : LEA ECX,[ESI*0x8 + 0x0]
005d50dd : MOV BL,byte ptr [EAX + ECX*0x1]
005d50e0 : ADD EAX,ECX
005d50e2 : MOV byte ptr [ECX + EDI*0x1],BL
005d50e5 : MOV EAX,dword ptr [EAX + 0x4]
005d50e8 : INC ESI
005d50e9 : MOV dword ptr [ECX + EDI*0x1 + 0x4],EAX
005d50ed : CMP ESI,EDX
005d50ef : JC 0x005d50d3
005d50f1 : MOV BX,word ptr [ESP + 0x14]
005d50f6 : MOV ECX,dword ptr [EBP + 0xc]
005d50f9 : PUSH ECX
005d50fa : CALL 0x00515cf0
005d50ff : POP ESI
005d5100 : MOV dword ptr [EBP + 0xc],EDI
005d5103 : POP EDI
005d5104 : MOV word ptr [EBP + 0xa],BX
005d5108 : POP EBP
005d5109 : MOV AL,0x1
005d510b : POP EBX
005d510c : RET 0x4
