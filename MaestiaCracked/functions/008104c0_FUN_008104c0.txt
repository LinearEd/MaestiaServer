PROGRAM  : Maestia.exe
FUNCTION : FUN_008104c0
ENTRY    : 008104c0
BODY     : [[008104c0, 008105a5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008104c0(void)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  uint local_30;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b6847b;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  FUN_00406360(L"IDS_BUEATYSHOP_CLOSE",0x14);
  local_8 = 0;
  uVar2 = FUN_0081d120(local_2c);
  local_8._0_1_ = 1;
  iVar3 = FUN_008ede80(uVar2,2);
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = 0xffffffff;
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  if (iVar3 != 0) {
    if (*(code **)(iVar3 + 0x60) != (code *)0x0) {
      (**(code **)(iVar3 + 0x60))(1,iVar3,uVar1);
    }
    *(code **)(iVar3 + 0x60) = FUN_0080fe50;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008104c0 : PUSH EBP
008104c1 : MOV EBP,ESP
008104c3 : PUSH -0x1
008104c5 : PUSH 0xb6847b
008104ca : MOV EAX,FS:[0x0]
008104d0 : PUSH EAX
008104d1 : SUB ESP,0x38
008104d4 : PUSH EBX
008104d5 : PUSH ESI
008104d6 : PUSH EDI
008104d7 : MOV EAX,[0x00d66fa0]
008104dc : XOR EAX,EBP
008104de : PUSH EAX
008104df : LEA EAX,[EBP + -0xc]
008104e2 : MOV FS:[0x0],EAX
008104e8 : PUSH 0x14
008104ea : XOR EAX,EAX
008104ec : XOR EBX,EBX
008104ee : PUSH 0xc2d7a4
008104f3 : LEA ECX,[EBP + -0x28]
008104f6 : MOV dword ptr [EBP + -0x10],0x7
008104fd : MOV dword ptr [EBP + -0x14],EBX
00810500 : MOV word ptr [EBP + -0x24],AX
00810504 : CALL 0x00406360
00810509 : MOV dword ptr [EBP + -0x4],EBX
0081050c : LEA ECX,[EBP + -0x28]
0081050f : PUSH ECX
00810510 : MOV ECX,dword ptr [0x0172491c]
00810516 : LEA EDI,[EBP + -0x44]
00810519 : CALL 0x0081d120
0081051e : MOV byte ptr [EBP + -0x4],0x1
00810522 : MOV EDX,dword ptr [0x00da9894]
00810528 : MOV ECX,dword ptr [EDX]
0081052a : PUSH 0x2
0081052c : PUSH EAX
0081052d : CALL 0x008ede80
00810532 : MOV ESI,EAX
00810534 : MOV byte ptr [EBP + -0x4],BL
00810537 : MOV EDI,0x8
0081053c : CMP dword ptr [EBP + -0x2c],EDI
0081053f : JC 0x00810549
00810541 : MOV ECX,dword ptr [EBP + -0x40]
00810544 : CALL 0x006f04e0
00810549 : XOR EAX,EAX
0081054b : MOV dword ptr [EBP + -0x2c],0x7
00810552 : MOV dword ptr [EBP + -0x30],EBX
00810555 : MOV word ptr [EBP + -0x40],AX
00810559 : MOV dword ptr [EBP + -0x4],0xffffffff
00810560 : CMP dword ptr [EBP + -0x10],EDI
00810563 : JC 0x0081056d
00810565 : MOV ECX,dword ptr [EBP + -0x24]
00810568 : CALL 0x006f04e0
0081056d : XOR ECX,ECX
0081056f : MOV dword ptr [EBP + -0x10],0x7
00810576 : MOV dword ptr [EBP + -0x14],EBX
00810579 : MOV word ptr [EBP + -0x24],CX
0081057d : CMP ESI,EBX
0081057f : JZ 0x00810594
00810581 : MOV EAX,dword ptr [ESI + 0x60]
00810584 : CMP EAX,EBX
00810586 : JZ 0x0081058d
00810588 : PUSH ESI
00810589 : PUSH 0x1
0081058b : CALL EAX
0081058d : MOV dword ptr [ESI + 0x60],0x80fe50
00810594 : MOV ECX,dword ptr [EBP + -0xc]
00810597 : MOV dword ptr FS:[0x0],ECX
0081059e : POP ECX
0081059f : POP EDI
008105a0 : POP ESI
008105a1 : POP EBX
008105a2 : MOV ESP,EBP
008105a4 : POP EBP
008105a5 : RET
