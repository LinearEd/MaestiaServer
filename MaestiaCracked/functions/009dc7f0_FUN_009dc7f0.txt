PROGRAM  : Maestia.exe
FUNCTION : FUN_009dc7f0
ENTRY    : 009dc7f0
BODY     : [[009dc7f0, 009dca8f]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x009dc91f) */

void FUN_009dc7f0(void)

{
  int *piVar1;
  undefined1 uVar2;
  undefined4 uVar3;
  int iVar4;
  int in_ECX;
  int in_EDX;
  uint local_7c;
  uint local_60;
  uint local_44;
  int *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b22da0;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(in_ECX + 0x11c) == 0) {
    FUN_00406460(&DAT_00c9952c);
    local_8 = 0;
  }
  else if (*(int *)(*(int *)(in_ECX + 0x11c) + 0x30) == 0) {
    FUN_00406460(&DAT_00c99530);
    local_8 = 0;
  }
  else {
    FUN_00406460(&DAT_00c99534);
    local_8 = 1;
    local_34 = *(int **)(*(int *)(in_ECX + 0x11c) + 0x2c);
    piVar1 = (int *)*local_34;
    uVar3 = FUN_00404750(L"0&ALL|");
    local_8._0_1_ = 2;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 1;
    uVar2 = (undefined1)local_8;
    local_8._0_1_ = 1;
    if (7 < local_44) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    while (local_8._0_1_ = uVar2, piVar1 != local_34) {
      if (*(short *)(piVar1 + 3) == 1) {
        uVar3 = FUN_00404750(L"%d&Npc|",*(undefined2 *)(piVar1 + 3));
        local_8._0_1_ = 3;
        FUN_00405c30(uVar3,0,0xffffffff);
      }
      else if (*(short *)(piVar1 + 3) == 2) {
        uVar3 = FUN_00404750(L"%d&Monster|",*(undefined2 *)(piVar1 + 3));
        local_8._0_1_ = 4;
        FUN_00405c30(uVar3,0,0xffffffff);
        local_8._0_1_ = 1;
        if (7 < local_60) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_60 = 7;
      }
      else {
        uVar3 = FUN_00404750(L"AvaAdminCommand Is in a class definition, but did not add in NPC type (%d)"
                             ,*(undefined2 *)(piVar1 + 3));
        local_8._0_1_ = 5;
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          (**(code **)(*(int *)*DAT_00da98e8 + 0x10))(uVar3);
        }
        local_8._0_1_ = 1;
        if (7 < local_7c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_7c = 7;
      }
      local_8._0_1_ = 1;
      FUN_00416210();
      uVar2 = (undefined1)local_8;
    }
    local_34 = (int *)0x7c;
    iVar4 = FUN_00407cc0(&local_34,1);
    if (iVar4 != -1) {
      FUN_00405e10(iVar4,1);
    }
    *(undefined4 *)(in_EDX + 0x18) = 7;
    *(undefined4 *)(in_EDX + 0x14) = 0;
    *(undefined2 *)(in_EDX + 4) = 0;
    FUN_00405eb0(local_30,0,0xffffffff);
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009dc7f0 : PUSH EBP
009dc7f1 : MOV EBP,ESP
009dc7f3 : PUSH -0x1
009dc7f5 : PUSH 0xb22da0
009dc7fa : MOV EAX,FS:[0x0]
009dc800 : PUSH EAX
009dc801 : SUB ESP,0x84
009dc807 : MOV EAX,[0x00d66fa0]
009dc80c : XOR EAX,EBP
009dc80e : MOV dword ptr [EBP + -0x10],EAX
009dc811 : PUSH EBX
009dc812 : PUSH ESI
009dc813 : PUSH EDI
009dc814 : PUSH EAX
009dc815 : LEA EAX,[EBP + -0xc]
009dc818 : MOV FS:[0x0],EAX
009dc81e : XOR EBX,EBX
009dc820 : MOV ESI,ECX
009dc822 : MOV dword ptr [EBP + -0x34],EBX
009dc825 : MOV EAX,dword ptr [ESI + 0x11c]
009dc82b : MOV EDI,EDX
009dc82d : MOV dword ptr [EBP + -0x3c],EDI
009dc830 : CMP EAX,EBX
009dc832 : JNZ 0x009dc84f
009dc834 : PUSH 0xc9952c
009dc839 : MOV ECX,EDI
009dc83b : CALL 0x00406460
009dc840 : MOV dword ptr [EBP + -0x4],EBX
009dc843 : MOV dword ptr [EBP + -0x34],0x1
009dc84a : JMP 0x009dca72
009dc84f : CMP dword ptr [EAX + 0x30],EBX
009dc852 : JNZ 0x009dc86f
009dc854 : PUSH 0xc99530
009dc859 : MOV ECX,EDI
009dc85b : CALL 0x00406460
009dc860 : MOV dword ptr [EBP + -0x4],EBX
009dc863 : MOV dword ptr [EBP + -0x34],0x1
009dc86a : JMP 0x009dca72
009dc86f : PUSH 0xc99534
009dc874 : LEA ECX,[EBP + -0x2c]
009dc877 : CALL 0x00406460
009dc87c : MOV EBX,0x1
009dc881 : MOV dword ptr [EBP + -0x4],EBX
009dc884 : MOV EAX,dword ptr [ESI + 0x11c]
009dc88a : MOV ECX,dword ptr [EAX + 0x2c]
009dc88d : MOV EDI,dword ptr [ECX]
009dc88f : MOV EAX,ECX
009dc891 : PUSH 0xc99538
009dc896 : LEA ESI,[EBP + -0x58]
009dc899 : MOV dword ptr [EBP + -0x38],EDI
009dc89c : MOV dword ptr [EBP + -0x30],EAX
009dc89f : CALL 0x00404750
009dc8a4 : ADD ESP,0x4
009dc8a7 : MOV byte ptr [EBP + -0x4],0x2
009dc8ab : PUSH -0x1
009dc8ad : PUSH 0x0
009dc8af : PUSH EAX
009dc8b0 : LEA ECX,[EBP + -0x2c]
009dc8b3 : CALL 0x00405c30
009dc8b8 : MOV byte ptr [EBP + -0x4],BL
009dc8bb : CMP dword ptr [EBP + -0x40],0x8
009dc8bf : JC 0x009dc8c9
009dc8c1 : MOV ECX,dword ptr [EBP + -0x54]
009dc8c4 : CALL 0x006f04e0
009dc8c9 : XOR ECX,ECX
009dc8cb : MOV ESI,0x7
009dc8d0 : MOV dword ptr [EBP + -0x40],ESI
009dc8d3 : MOV dword ptr [EBP + -0x44],0x0
009dc8da : MOV word ptr [EBP + -0x54],CX
009dc8de : CMP EDI,dword ptr [EBP + -0x30]
009dc8e1 : JZ 0x009dca07
009dc8e7 : MOVZX EAX,word ptr [EDI + 0xc]
009dc8eb : CMP AX,BX
009dc8ee : JNZ 0x009dc940
009dc8f0 : MOVZX EDX,word ptr [EDI + 0xc]
009dc8f4 : PUSH EDX
009dc8f5 : PUSH 0xc99548
009dc8fa : LEA ESI,[EBP + -0x58]
009dc8fd : CALL 0x00404750
009dc902 : ADD ESP,0x8
009dc905 : MOV byte ptr [EBP + -0x4],0x3
009dc909 : PUSH -0x1
009dc90b : PUSH 0x0
009dc90d : PUSH EAX
009dc90e : LEA ECX,[EBP + -0x2c]
009dc911 : CALL 0x00405c30
009dc916 : MOV byte ptr [EBP + -0x4],BL
009dc919 : CMP dword ptr [EBP + -0x40],0x8
009dc91d : JC 0x009dc927
009dc91f : MOV ECX,dword ptr [EBP + -0x54]
009dc922 : CALL 0x006f04e0
009dc927 : XOR EAX,EAX
009dc929 : MOV dword ptr [EBP + -0x40],0x7
009dc930 : MOV dword ptr [EBP + -0x44],0x0
009dc937 : MOV word ptr [EBP + -0x54],AX
009dc93b : JMP 0x009dc9ee
009dc940 : CMP AX,0x2
009dc944 : JNZ 0x009dc993
009dc946 : MOVZX ECX,word ptr [EDI + 0xc]
009dc94a : PUSH ECX
009dc94b : PUSH 0xc99558
009dc950 : LEA ESI,[EBP + -0x74]
009dc953 : CALL 0x00404750
009dc958 : ADD ESP,0x8
009dc95b : MOV byte ptr [EBP + -0x4],0x4
009dc95f : PUSH -0x1
009dc961 : PUSH 0x0
009dc963 : PUSH EAX
009dc964 : LEA ECX,[EBP + -0x2c]
009dc967 : CALL 0x00405c30
009dc96c : MOV byte ptr [EBP + -0x4],BL
009dc96f : CMP dword ptr [EBP + -0x5c],0x8
009dc973 : JC 0x009dc97d
009dc975 : MOV ECX,dword ptr [EBP + -0x70]
009dc978 : CALL 0x006f04e0
009dc97d : XOR EDX,EDX
009dc97f : MOV dword ptr [EBP + -0x5c],0x7
009dc986 : MOV dword ptr [EBP + -0x60],0x0
009dc98d : MOV word ptr [EBP + -0x70],DX
009dc991 : JMP 0x009dc9ee
009dc993 : MOVZX EAX,word ptr [EDI + 0xc]
009dc997 : PUSH EAX
009dc998 : PUSH 0xc99570
009dc99d : LEA ESI,[EBP + 0xffffff70]
009dc9a3 : CALL 0x00404750
009dc9a8 : ADD ESP,0x8
009dc9ab : MOV byte ptr [EBP + -0x4],0x5
009dc9af : MOV ECX,dword ptr [0x00da98e8]
009dc9b5 : MOV ECX,dword ptr [ECX]
009dc9b7 : TEST ECX,ECX
009dc9b9 : JZ 0x009dc9c3
009dc9bb : MOV EDX,dword ptr [ECX]
009dc9bd : PUSH EAX
009dc9be : MOV EAX,dword ptr [EDX + 0x10]
009dc9c1 : CALL EAX
009dc9c3 : MOV byte ptr [EBP + -0x4],BL
009dc9c6 : CMP dword ptr [EBP + -0x78],0x8
009dc9ca : JC 0x009dc9d7
009dc9cc : MOV ECX,dword ptr [EBP + 0xffffff74]
009dc9d2 : CALL 0x006f04e0
009dc9d7 : XOR ECX,ECX
009dc9d9 : MOV dword ptr [EBP + -0x78],0x7
009dc9e0 : MOV dword ptr [EBP + -0x7c],0x0
009dc9e7 : MOV word ptr [EBP + 0xffffff74],CX
009dc9ee : LEA EDX,[EBP + -0x38]
009dc9f1 : CALL 0x00416210
009dc9f6 : MOV EDI,dword ptr [EBP + -0x38]
009dc9f9 : CMP EDI,dword ptr [EBP + -0x30]
009dc9fc : JNZ 0x009dc8e7
009dca02 : MOV ESI,0x7
009dca07 : PUSH EBX
009dca08 : LEA EDX,[EBP + -0x30]
009dca0b : PUSH EDX
009dca0c : OR ECX,0xffffffff
009dca0f : LEA EDI,[EBP + -0x2c]
009dca12 : MOV dword ptr [EBP + -0x30],0x7c
009dca19 : CALL 0x00407cc0
009dca1e : CMP EAX,-0x1
009dca21 : JZ 0x009dca2c
009dca23 : PUSH EBX
009dca24 : PUSH EAX
009dca25 : MOV ECX,EDI
009dca27 : CALL 0x00405e10
009dca2c : MOV EDI,dword ptr [EBP + -0x3c]
009dca2f : XOR EAX,EAX
009dca31 : PUSH -0x1
009dca33 : PUSH EAX
009dca34 : LEA ECX,[EBP + -0x2c]
009dca37 : PUSH ECX
009dca38 : MOV dword ptr [EDI + 0x18],ESI
009dca3b : MOV dword ptr [EDI + 0x14],0x0
009dca42 : MOV ECX,EDI
009dca44 : MOV word ptr [EDI + 0x4],AX
009dca48 : CALL 0x00405eb0
009dca4d : MOV dword ptr [EBP + -0x34],EBX
009dca50 : MOV byte ptr [EBP + -0x4],0x0
009dca54 : CMP dword ptr [EBP + -0x14],0x8
009dca58 : JC 0x009dca62
009dca5a : MOV ECX,dword ptr [EBP + -0x28]
009dca5d : CALL 0x006f04e0
009dca62 : XOR EDX,EDX
009dca64 : MOV dword ptr [EBP + -0x14],ESI
009dca67 : MOV dword ptr [EBP + -0x18],0x0
009dca6e : MOV word ptr [EBP + -0x28],DX
009dca72 : MOV EAX,EDI
009dca74 : MOV ECX,dword ptr [EBP + -0xc]
009dca77 : MOV dword ptr FS:[0x0],ECX
009dca7e : POP ECX
009dca7f : POP EDI
009dca80 : POP ESI
009dca81 : POP EBX
009dca82 : MOV ECX,dword ptr [EBP + -0x10]
009dca85 : XOR ECX,EBP
009dca87 : CALL 0x00633e6b
009dca8c : MOV ESP,EBP
009dca8e : POP EBP
009dca8f : RET
