PROGRAM  : Maestia.exe
FUNCTION : FUN_005ff9f0
ENTRY    : 005ff9f0
BODY     : [[005ff9f0, 005ffac8] [005ffad0, 005ffcf9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ff9f0(uint param_1)

{
  uint *puVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  uint uVar7;
  uint uVar8;
  int in_ECX;
  byte bVar9;
  float10 fVar10;
  undefined4 uVar11;
  uint uVar12;
  undefined4 uVar13;
  
  *(undefined4 *)(in_ECX + 0x184) = 0;
  *(undefined4 *)(in_ECX + 0x194) = 0;
  *(undefined4 *)(in_ECX + 0x1a4) = 0;
  *(undefined4 *)(in_ECX + 0x1c4) = 0;
  *(undefined4 *)(in_ECX + 0x1c8) = 0;
  *(undefined4 *)(in_ECX + 0x1cc) = 0;
  *(undefined4 *)(in_ECX + 0x1d0) = 0;
  iVar2 = *(int *)(*(int *)(*(int *)(in_ECX + 0x160) + (param_1 >> 6) * 4) + (param_1 & 0x3f) * 0x18
                  );
  if (((iVar2 != 0) && (*(int *)(iVar2 + 4) != 0)) && (*(int *)(*(int *)(iVar2 + 4) + 4) != 0)) {
    puVar1 = (uint *)(in_ECX + 0x174);
    *puVar1 = 0;
    FUN_005fbd20(iVar2);
    iVar2 = *(int *)(iVar2 + 4);
    FUN_005fbd20(iVar2);
    puVar3 = *(undefined4 **)(iVar2 + 4);
    iVar2 = puVar3[1];
    while (iVar2 != 0) {
      uVar4 = *puVar3;
      uVar5 = *(undefined4 *)
               (*(int *)(*(int *)(in_ECX + 0x180) + (*puVar1 - 1 >> 8) * 4) +
               (*puVar1 - 1 & 0xff) * 4);
      bVar9 = (byte)((uint)uVar4 >> 0x1e);
      if ((bVar9 & 1) == ((byte)((uint)uVar5 >> 0x1e) & 1)) {
        uVar7 = *puVar1;
        while (1 < uVar7) {
          uVar7 = *puVar1 - 1;
          uVar8 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x180) + (uVar7 >> 8) * 4) +
                           (uVar7 & 0xff) * 4);
          uVar7 = *puVar1 - 2;
          uVar7 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x180) + (uVar7 >> 8) * 4) +
                           (uVar7 & 0xff) * 4);
          fVar10 = (float10)FUN_005f97b0(uVar4,uVar8,uVar7);
          if ((uint)(fVar10 < (float10)0.0) != (uVar8 >> 0x1e & 1)) break;
          uVar12 = uVar7;
          if ((uVar8 >> 0x1e & 1) != 0) {
            uVar12 = uVar8;
            uVar8 = uVar7;
          }
          FUN_005fef80(uVar4,uVar12,uVar8);
          if (*puVar1 != 0) {
            *puVar1 = *puVar1 - 1;
          }
          uVar7 = *puVar1;
        }
      }
      else {
        uVar7 = *puVar1;
        while (1 < uVar7) {
          uVar6 = *(undefined4 *)
                   (*(int *)(*(int *)(in_ECX + 0x180) + (*puVar1 - 1 >> 8) * 4) +
                   (*puVar1 - 1 & 0xff) * 4);
          if (*puVar1 != 0) {
            *puVar1 = *puVar1 - 1;
          }
          uVar7 = *puVar1 - 1;
          if ((bVar9 & 1) == 0) {
            uVar13 = *(undefined4 *)
                      (*(int *)(*(int *)(in_ECX + 0x180) + (uVar7 >> 8) * 4) + (uVar7 & 0xff) * 4);
            uVar11 = uVar6;
          }
          else {
            uVar11 = *(undefined4 *)
                      (*(int *)(*(int *)(in_ECX + 0x180) + (uVar7 >> 8) * 4) + (uVar7 & 0xff) * 4);
            uVar13 = uVar6;
          }
          FUN_005fef80(uVar4,uVar11,uVar13);
          uVar7 = *puVar1;
        }
        if (*puVar1 != 0) {
          *puVar1 = *puVar1 - 1;
        }
        uVar7 = *puVar1 >> 8;
        if (*(uint *)(in_ECX + 0x178) <= uVar7) {
          FUN_005fa150(uVar7);
        }
        *(undefined4 *)(*(int *)(*(int *)(in_ECX + 0x180) + uVar7 * 4) + (*puVar1 & 0xff) * 4) =
             uVar5;
        *puVar1 = *puVar1 + 1;
      }
      uVar7 = *puVar1 >> 8;
      if (*(uint *)(in_ECX + 0x178) <= uVar7) {
        FUN_005fa150(uVar7);
      }
      *(undefined4 *)(*(int *)(*(int *)(in_ECX + 0x180) + uVar7 * 4) + (*puVar1 & 0xff) * 4) = uVar4
      ;
      *puVar1 = *puVar1 + 1;
      puVar3 = (undefined4 *)puVar3[1];
      iVar2 = puVar3[1];
    }
    uVar4 = *puVar3;
    uVar7 = *puVar1;
    while (1 < uVar7) {
      uVar7 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x180) + (*puVar1 - 1 >> 8) * 4) +
                       (*puVar1 - 1 & 0xff) * 4);
      if (*puVar1 != 0) {
        *puVar1 = *puVar1 - 1;
      }
      uVar8 = *puVar1 - 1;
      if ((uVar7 >> 0x1e & 1) == 0) {
        FUN_005fef80(uVar4,*(undefined4 *)
                            (*(int *)(*(int *)(in_ECX + 0x180) + (uVar8 >> 8) * 4) +
                            (uVar8 & 0xff) * 4),uVar7);
      }
      else {
        FUN_005fef80(uVar4,uVar7,
                     *(undefined4 *)
                      (*(int *)(*(int *)(in_ECX + 0x180) + (uVar8 >> 8) * 4) + (uVar8 & 0xff) * 4));
      }
      uVar7 = *puVar1;
    }
    if (((3 < *(uint *)(in_ECX + 0x194)) && (3 < *(uint *)(in_ECX + 0x1a4))) &&
       (1 < *(int *)(in_ECX + 0x1c8))) {
      if (*(uint *)(in_ECX + 0x1c4) < *(uint *)(in_ECX + 0x184)) {
        *(uint *)(in_ECX + 0x184) = *(uint *)(in_ECX + 0x1c4);
      }
      FUN_005fecf0();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005ff9f0 : MOV EAX,dword ptr [ESP + 0x4]
005ff9f4 : SUB ESP,0x8
005ff9f7 : PUSH EBX
005ff9f8 : PUSH EBP
005ff9f9 : XOR EBP,EBP
005ff9fb : PUSH EDI
005ff9fc : MOV EDI,ECX
005ff9fe : MOV EDX,dword ptr [EDI + 0x160]
005ffa04 : MOV ECX,EAX
005ffa06 : SHR ECX,0x6
005ffa09 : AND EAX,0x3f
005ffa0c : MOV dword ptr [EDI + 0x184],EBP
005ffa12 : MOV dword ptr [EDI + 0x194],EBP
005ffa18 : MOV dword ptr [EDI + 0x1a4],EBP
005ffa1e : MOV dword ptr [EDI + 0x1c4],EBP
005ffa24 : MOV dword ptr [EDI + 0x1c8],EBP
005ffa2a : MOV dword ptr [EDI + 0x1cc],EBP
005ffa30 : MOV dword ptr [EDI + 0x1d0],EBP
005ffa36 : MOV ECX,dword ptr [EDX + ECX*0x4]
005ffa39 : LEA EAX,[EAX + EAX*0x2]
005ffa3c : MOV EBX,dword ptr [ECX + EAX*0x8]
005ffa3f : CMP EBX,EBP
005ffa41 : JZ 0x005ffcf1
005ffa47 : MOV EAX,dword ptr [EBX + 0x4]
005ffa4a : CMP EAX,EBP
005ffa4c : JZ 0x005ffcf1
005ffa52 : CMP dword ptr [EAX + 0x4],EBP
005ffa55 : JZ 0x005ffcf1
005ffa5b : PUSH ESI
005ffa5c : LEA ESI,[EDI + 0x174]
005ffa62 : PUSH EBX
005ffa63 : MOV ECX,ESI
005ffa65 : MOV dword ptr [ESI],EBP
005ffa67 : CALL 0x005fbd20
005ffa6c : MOV EBX,dword ptr [EBX + 0x4]
005ffa6f : PUSH EBX
005ffa70 : MOV ECX,ESI
005ffa72 : CALL 0x005fbd20
005ffa77 : MOV EBX,dword ptr [EBX + 0x4]
005ffa7a : MOV dword ptr [ESP + 0x10],EBX
005ffa7e : CMP dword ptr [EBX + 0x4],EBP
005ffa81 : JZ 0x005ffc3c
005ffa87 : MOV EAX,dword ptr [ESI]
005ffa89 : MOV EDX,dword ptr [ESP + 0x10]
005ffa8d : MOV EBX,dword ptr [EDX]
005ffa8f : MOV EDX,dword ptr [ESI + 0xc]
005ffa92 : DEC EAX
005ffa93 : MOV ECX,EAX
005ffa95 : AND EAX,0xff
005ffa9a : SHR ECX,0x8
005ffa9d : MOV ECX,dword ptr [EDX + ECX*0x4]
005ffaa0 : MOV EBP,dword ptr [ECX + EAX*0x4]
005ffaa3 : MOV EDX,EBX
005ffaa5 : MOV EAX,EBP
005ffaa7 : SHR EDX,0x1e
005ffaaa : SHR EAX,0x1e
005ffaad : AND DL,0x1
005ffab0 : AND AL,0x1
005ffab2 : MOV dword ptr [ESP + 0x14],EBP
005ffab6 : MOV byte ptr [ESP + 0x1c],DL
005ffaba : CMP DL,AL
005ffabc : JZ 0x005ffb6a
005ffac2 : CMP dword ptr [ESI],0x1
005ffac5 : JBE 0x005ffb33
005ffac7 : JMP 0x005ffad4
005ffad0 : MOV DL,byte ptr [ESP + 0x1c]
005ffad4 : MOV EAX,dword ptr [ESI]
005ffad6 : MOV EBP,dword ptr [ESI + 0xc]
005ffad9 : DEC EAX
005ffada : MOV ECX,EAX
005ffadc : SHR ECX,0x8
005ffadf : MOV ECX,dword ptr [EBP + ECX*0x4]
005ffae3 : AND EAX,0xff
005ffae8 : MOV ECX,dword ptr [ECX + EAX*0x4]
005ffaeb : MOV EAX,dword ptr [ESI]
005ffaed : TEST EAX,EAX
005ffaef : JZ 0x005ffaf4
005ffaf1 : DEC EAX
005ffaf2 : MOV dword ptr [ESI],EAX
005ffaf4 : MOV EAX,dword ptr [ESI]
005ffaf6 : DEC EAX
005ffaf7 : TEST DL,DL
005ffaf9 : MOV EDX,EAX
005ffafb : JZ 0x005ffb12
005ffafd : PUSH ECX
005ffafe : MOV ECX,dword ptr [ESI + 0xc]
005ffb01 : SHR EDX,0x8
005ffb04 : MOV EDX,dword ptr [ECX + EDX*0x4]
005ffb07 : AND EAX,0xff
005ffb0c : MOV EAX,dword ptr [EDX + EAX*0x4]
005ffb0f : PUSH EAX
005ffb10 : JMP 0x005ffb26
005ffb12 : MOV EBP,dword ptr [ESI + 0xc]
005ffb15 : SHR EDX,0x8
005ffb18 : MOV EDX,dword ptr [EBP + EDX*0x4]
005ffb1c : AND EAX,0xff
005ffb21 : MOV EAX,dword ptr [EDX + EAX*0x4]
005ffb24 : PUSH EAX
005ffb25 : PUSH ECX
005ffb26 : PUSH EBX
005ffb27 : MOV ECX,EDI
005ffb29 : CALL 0x005fef80
005ffb2e : CMP dword ptr [ESI],0x1
005ffb31 : JA 0x005ffad0
005ffb33 : MOV EAX,dword ptr [ESI]
005ffb35 : TEST EAX,EAX
005ffb37 : JZ 0x005ffb3c
005ffb39 : DEC EAX
005ffb3a : MOV dword ptr [ESI],EAX
005ffb3c : MOV EBP,dword ptr [ESI]
005ffb3e : SHR EBP,0x8
005ffb41 : CMP EBP,dword ptr [ESI + 0x4]
005ffb44 : JC 0x005ffb4e
005ffb46 : PUSH EBP
005ffb47 : MOV ECX,ESI
005ffb49 : CALL 0x005fa150
005ffb4e : MOV ECX,dword ptr [ESI + 0xc]
005ffb51 : MOV EDX,dword ptr [ESI]
005ffb53 : MOV EAX,dword ptr [ECX + EBP*0x4]
005ffb56 : MOV ECX,dword ptr [ESP + 0x14]
005ffb5a : AND EDX,0xff
005ffb60 : MOV dword ptr [EAX + EDX*0x4],ECX
005ffb63 : INC dword ptr [ESI]
005ffb65 : JMP 0x005ffc01
005ffb6a : CMP dword ptr [ESI],0x1
005ffb6d : JBE 0x005ffc01
005ffb73 : MOV ECX,dword ptr [ESI]
005ffb75 : MOV EDX,dword ptr [EDI + 0x180]
005ffb7b : LEA EAX,[ECX + -0x1]
005ffb7e : MOV EBP,EAX
005ffb80 : AND EAX,0xff
005ffb85 : SHR EBP,0x8
005ffb88 : MOV EBP,dword ptr [EDX + EBP*0x4]
005ffb8b : MOV EBP,dword ptr [EBP + EAX*0x4]
005ffb8f : LEA EAX,[ECX + -0x2]
005ffb92 : MOV ECX,EAX
005ffb94 : SHR ECX,0x8
005ffb97 : MOV EDX,dword ptr [EDX + ECX*0x4]
005ffb9a : AND EAX,0xff
005ffb9f : MOV EAX,dword ptr [EDX + EAX*0x4]
005ffba2 : PUSH EAX
005ffba3 : PUSH EBP
005ffba4 : PUSH EBX
005ffba5 : MOV ECX,EDI
005ffba7 : MOV dword ptr [ESP + 0x28],EAX
005ffbab : CALL 0x005f97b0
005ffbb0 : FCOMP float ptr [0x00b9b0b4]
005ffbb6 : FNSTSW AX
005ffbb8 : TEST AH,0x5
005ffbbb : JP 0x005ffbc4
005ffbbd : MOV ECX,0x1
005ffbc2 : JMP 0x005ffbc6
005ffbc4 : XOR ECX,ECX
005ffbc6 : MOV EAX,EBP
005ffbc8 : SHR EAX,0x1e
005ffbcb : MOVZX EDX,AL
005ffbce : AND EDX,0x1
005ffbd1 : CMP ECX,EDX
005ffbd3 : JNZ 0x005ffc01
005ffbd5 : TEST AL,0x1
005ffbd7 : JZ 0x005ffbe1
005ffbd9 : MOV EAX,dword ptr [ESP + 0x1c]
005ffbdd : PUSH EAX
005ffbde : PUSH EBP
005ffbdf : JMP 0x005ffbe7
005ffbe1 : MOV ECX,dword ptr [ESP + 0x1c]
005ffbe5 : PUSH EBP
005ffbe6 : PUSH ECX
005ffbe7 : PUSH EBX
005ffbe8 : MOV ECX,EDI
005ffbea : CALL 0x005fef80
005ffbef : MOV EAX,dword ptr [ESI]
005ffbf1 : TEST EAX,EAX
005ffbf3 : JZ 0x005ffbf8
005ffbf5 : DEC EAX
005ffbf6 : MOV dword ptr [ESI],EAX
005ffbf8 : CMP dword ptr [ESI],0x1
005ffbfb : JA 0x005ffb73
005ffc01 : MOV EBP,dword ptr [ESI]
005ffc03 : SHR EBP,0x8
005ffc06 : CMP EBP,dword ptr [ESI + 0x4]
005ffc09 : JC 0x005ffc13
005ffc0b : PUSH EBP
005ffc0c : MOV ECX,ESI
005ffc0e : CALL 0x005fa150
005ffc13 : MOV EDX,dword ptr [ESI + 0xc]
005ffc16 : MOV EAX,dword ptr [ESI]
005ffc18 : MOV ECX,dword ptr [EDX + EBP*0x4]
005ffc1b : MOV EDX,dword ptr [ESP + 0x10]
005ffc1f : AND EAX,0xff
005ffc24 : MOV dword ptr [ECX + EAX*0x4],EBX
005ffc27 : INC dword ptr [ESI]
005ffc29 : MOV EAX,dword ptr [EDX + 0x4]
005ffc2c : CMP dword ptr [EAX + 0x4],0x0
005ffc30 : MOV dword ptr [ESP + 0x10],EAX
005ffc34 : JNZ 0x005ffa87
005ffc3a : XOR EBP,EBP
005ffc3c : CMP dword ptr [ESI],0x1
005ffc3f : MOV EAX,dword ptr [ESP + 0x10]
005ffc43 : MOV EBX,dword ptr [EAX]
005ffc45 : JBE 0x005ffcb7
005ffc47 : MOV EAX,dword ptr [ESI]
005ffc49 : MOV EDX,dword ptr [ESI + 0xc]
005ffc4c : DEC EAX
005ffc4d : MOV ECX,EAX
005ffc4f : SHR ECX,0x8
005ffc52 : MOV ECX,dword ptr [EDX + ECX*0x4]
005ffc55 : AND EAX,0xff
005ffc5a : MOV ECX,dword ptr [ECX + EAX*0x4]
005ffc5d : MOV EAX,dword ptr [ESI]
005ffc5f : CMP EAX,EBP
005ffc61 : JZ 0x005ffc66
005ffc63 : DEC EAX
005ffc64 : MOV dword ptr [ESI],EAX
005ffc66 : MOV EAX,dword ptr [ESI]
005ffc68 : MOV EDX,ECX
005ffc6a : SHR EDX,0x1e
005ffc6d : DEC EAX
005ffc6e : TEST DL,0x1
005ffc71 : JZ 0x005ffc95
005ffc73 : MOV EBP,dword ptr [ESI + 0xc]
005ffc76 : MOV EDX,EAX
005ffc78 : SHR EDX,0x8
005ffc7b : MOV EDX,dword ptr [EBP + EDX*0x4]
005ffc7f : AND EAX,0xff
005ffc84 : MOV EAX,dword ptr [EDX + EAX*0x4]
005ffc87 : PUSH EAX
005ffc88 : PUSH ECX
005ffc89 : PUSH EBX
005ffc8a : MOV ECX,EDI
005ffc8c : CALL 0x005fef80
005ffc91 : XOR EBP,EBP
005ffc93 : JMP 0x005ffcb2
005ffc95 : MOV EDX,dword ptr [ESI + 0xc]
005ffc98 : PUSH ECX
005ffc99 : MOV ECX,EAX
005ffc9b : SHR ECX,0x8
005ffc9e : MOV ECX,dword ptr [EDX + ECX*0x4]
005ffca1 : AND EAX,0xff
005ffca6 : MOV EDX,dword ptr [ECX + EAX*0x4]
005ffca9 : PUSH EDX
005ffcaa : PUSH EBX
005ffcab : MOV ECX,EDI
005ffcad : CALL 0x005fef80
005ffcb2 : CMP dword ptr [ESI],0x1
005ffcb5 : JA 0x005ffc47
005ffcb7 : MOV EAX,0x3
005ffcbc : POP ESI
005ffcbd : CMP dword ptr [EDI + 0x194],EAX
005ffcc3 : JBE 0x005ffcf1
005ffcc5 : CMP dword ptr [EDI + 0x1a4],EAX
005ffccb : JBE 0x005ffcf1
005ffccd : CMP dword ptr [EDI + 0x1c8],0x1
005ffcd4 : JLE 0x005ffcf1
005ffcd6 : MOV EAX,dword ptr [EDI + 0x1c4]
005ffcdc : CMP EAX,dword ptr [EDI + 0x184]
005ffce2 : JNC 0x005ffcea
005ffce4 : MOV dword ptr [EDI + 0x184],EAX
005ffcea : MOV ECX,EDI
005ffcec : CALL 0x005fecf0
005ffcf1 : POP EDI
005ffcf2 : POP EBP
005ffcf3 : POP EBX
005ffcf4 : ADD ESP,0x8
005ffcf7 : RET 0x4
