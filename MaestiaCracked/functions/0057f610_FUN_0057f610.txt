PROGRAM  : Maestia.exe
FUNCTION : FUN_0057f610
ENTRY    : 0057f610
BODY     : [[0057f610, 0057fa2d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0057f824) */

void FUN_0057f610(int *param_1,int param_2)

{
  int *piVar1;
  bool bVar2;
  uint *puVar3;
  int iVar4;
  undefined1 *puVar5;
  int in_ECX;
  byte bVar6;
  int iVar7;
  bool bVar8;
  undefined1 local_20 [16];
  undefined1 local_10 [4];
  double local_c;
  
  FUN_00504700(param_2);
  local_20[0] = 1;
  bVar8 = (*(byte *)(param_2 + 0x2a) >> 4 & 1) == 0;
  if (bVar8) {
    puVar5 = local_20;
  }
  else {
    local_10[0] = 2;
    local_c = (double)(CONCAT71(local_c._1_7_,*(undefined1 *)(param_2 + 0x28)) & 0xffffffffffffff01)
    ;
    puVar5 = local_10;
  }
  bVar8 = !bVar8;
  iVar7 = in_ECX + 0x10;
  FUN_00500670(param_1,&DAT_00b8d6ac,puVar5);
  if (bVar8) {
    FUN_00526bc0();
  }
  bVar6 = !bVar8 && bVar8;
  if ((*(byte *)(param_2 + 0x2a) >> 5 & 1) == 0) {
    puVar5 = local_20;
  }
  else {
    bVar6 = bVar6 | 2;
    local_c = (double)(CONCAT71(local_c._1_7_,*(byte *)(param_2 + 0x28) >> 1) & 0xffffffffffffff01);
    local_10[0] = 2;
    puVar5 = local_10;
  }
  FUN_00500670(param_1,"italic",puVar5);
  if ((bVar6 & 2) != 0) {
    bVar6 = bVar6 & 0xfd;
    FUN_00526bc0();
  }
  if ((*(byte *)(param_2 + 0x2a) >> 6 & 1) == 0) {
    puVar5 = local_20;
  }
  else {
    bVar6 = bVar6 | 4;
    local_10[0] = 2;
    local_c = (double)(CONCAT71(local_c._1_7_,*(byte *)(param_2 + 0x28) >> 2) & 0xffffffffffffff01);
    puVar5 = local_10;
  }
  FUN_00500670(param_1,"underline",puVar5);
  if ((bVar6 & 4) != 0) {
    bVar6 = bVar6 & 0xfb;
    FUN_00526bc0();
  }
  if ((*(byte *)(param_2 + 0x2a) >> 3 & 1) == 0) {
    puVar5 = local_20;
  }
  else {
    bVar6 = bVar6 | 8;
    local_10[0] = 3;
    puVar5 = local_10;
    local_c = (double)((float)*(ushort *)(param_2 + 0x26) / 20.0);
  }
  FUN_00500670(param_1,&DAT_00b8d7a4,puVar5);
  if ((bVar6 & 8) != 0) {
    bVar6 = bVar6 & 0xf7;
    FUN_00526bc0();
  }
  if ((*(byte *)(param_2 + 0x2a) >> 2 & 1) == 0) {
    puVar5 = local_20;
    iVar4 = iVar7;
  }
  else {
    bVar6 = bVar6 | 0x30;
    puVar3 = (uint *)FUN_0055ef50();
    iVar4 = FUN_00525450((*puVar3 & 0xfffffffc) + 8,*(uint *)(*puVar3 & 0xfffffffc) & 0x7fffffff);
    *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
    local_10[0] = 5;
    local_c = (double)CONCAT44(local_c._4_4_,iVar4);
    *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
    puVar5 = local_10;
  }
  FUN_00500670(param_1,&DAT_00b8d7cc,puVar5);
  if ((bVar6 & 0x20) != 0) {
    bVar6 = bVar6 & 0xdf;
    FUN_00526bc0();
  }
  if ((bVar6 & 0x10) != 0) {
    bVar6 = bVar6 & 0xef;
    piVar1 = (int *)(iVar4 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
  }
  if ((*(byte *)(param_2 + 0x2a) & 1) == 0) {
    puVar5 = local_20;
  }
  else {
    bVar6 = bVar6 | 0x40;
    local_c = (double)(*(uint *)(param_2 + 0x20) & 0xffffff);
    local_10[0] = 3;
    puVar5 = local_10;
  }
  FUN_00500670(param_1,"color",puVar5);
  if ((bVar6 & 0x40) != 0) {
    bVar6 = bVar6 & 0xbf;
    FUN_00526bc0();
  }
  if ((*(byte *)(param_2 + 0x2a) >> 1 & 1) == 0) {
    puVar5 = local_20;
  }
  else {
    bVar6 = bVar6 | 0x80;
    local_10[0] = 3;
    puVar5 = local_10;
    local_c = (double)((float)(int)*(short *)(param_2 + 0x24) / 20.0);
  }
  FUN_00500670(param_1,"letterSpacing",puVar5);
  if ((char)bVar6 < '\0') {
    FUN_00526bc0();
  }
  bVar8 = -1 < *(char *)(param_2 + 0x2a);
  if (bVar8) {
    puVar5 = local_20;
  }
  else {
    local_10[0] = 2;
    local_c = (double)(CONCAT71(local_c._1_7_,*(byte *)(param_2 + 0x28) >> 3) & 0xffffffffffffff01);
    puVar5 = local_10;
  }
  FUN_00500670(param_1,"kerning",puVar5);
  if (!bVar8) {
    FUN_00526bc0();
  }
  bVar2 = false;
  bVar8 = false;
  if ((*(ushort *)(param_2 + 0x2a) & 0x100) != 0) {
    iVar4 = FUN_0051b1a0();
    if (iVar4 != 0) {
      bVar2 = true;
      bVar8 = true;
      iVar7 = FUN_00525450((*(uint *)(param_2 + 0x10) & 0xfffffffc) + 8,
                           *(uint *)(*(uint *)(param_2 + 0x10) & 0xfffffffc) & 0x7fffffff);
      *(int *)(iVar7 + 8) = *(int *)(iVar7 + 8) + 1;
      local_10[0] = 5;
      local_c = (double)CONCAT44(local_c._4_4_,iVar7);
      *(int *)(iVar7 + 8) = *(int *)(iVar7 + 8) + 1;
      puVar5 = local_10;
      goto LAB_0057f975;
    }
  }
  puVar5 = local_20;
LAB_0057f975:
  FUN_00500670(param_1,&DAT_00b8d794,puVar5);
  if (bVar8) {
    FUN_00526bc0();
  }
  if (bVar2) {
    piVar1 = (int *)(iVar7 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
  }
  if (*(char *)(*param_1 + 0x2a4) == '\x01') {
    bVar8 = (*(byte *)(param_2 + 0x2a) & 1) == 0;
    if (bVar8) {
      puVar5 = local_20;
    }
    else {
      local_10[0] = 3;
      puVar5 = local_10;
      local_c = ((double)*(byte *)(param_2 + 0x23) * 100.0) / 255.0;
    }
    FUN_00500670(param_1,"alpha",puVar5);
    if (!bVar8) {
      FUN_00526bc0();
    }
  }
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
0057f610 : SUB ESP,0x24
0057f613 : PUSH EBX
0057f614 : PUSH EBP
0057f615 : PUSH ESI
0057f616 : PUSH EDI
0057f617 : MOV EDI,dword ptr [ESP + 0x3c]
0057f61b : MOV ESI,ECX
0057f61d : XOR EBX,EBX
0057f61f : PUSH EDI
0057f620 : LEA ECX,[ESI + 0x30]
0057f623 : MOV dword ptr [ESP + 0x14],EBX
0057f627 : CALL 0x00504700
0057f62c : MOV AL,byte ptr [EDI + 0x2a]
0057f62f : SHR AL,0x4
0057f632 : MOV byte ptr [ESP + 0x14],0x1
0057f637 : TEST AL,0x1
0057f639 : JZ 0x0057f654
0057f63b : MOV CL,byte ptr [EDI + 0x28]
0057f63e : MOV EBX,0x1
0057f643 : AND CL,BL
0057f645 : MOV byte ptr [ESP + 0x24],0x2
0057f64a : MOV byte ptr [ESP + 0x28],CL
0057f64e : LEA EAX,[ESP + 0x24]
0057f652 : JMP 0x0057f658
0057f654 : LEA EAX,[ESP + 0x14]
0057f658 : MOV EBP,dword ptr [ESP + 0x38]
0057f65c : PUSH EAX
0057f65d : ADD ESI,0x10
0057f660 : PUSH 0xb8d6ac
0057f665 : PUSH EBP
0057f666 : MOV ECX,ESI
0057f668 : MOV dword ptr [ESP + 0x48],ESI
0057f66c : CALL 0x00500670
0057f671 : TEST BL,0x1
0057f674 : JZ 0x0057f682
0057f676 : LEA ECX,[ESP + 0x24]
0057f67a : AND EBX,0xfffffffe
0057f67d : CALL 0x00526bc0
0057f682 : MOV DL,byte ptr [EDI + 0x2a]
0057f685 : SHR DL,0x5
0057f688 : TEST DL,0x1
0057f68b : JZ 0x0057f6a6
0057f68d : MOV AL,byte ptr [EDI + 0x28]
0057f690 : SHR AL,0x1
0057f692 : OR EBX,0x2
0057f695 : AND AL,0x1
0057f697 : MOV byte ptr [ESP + 0x28],AL
0057f69b : MOV byte ptr [ESP + 0x24],0x2
0057f6a0 : LEA EAX,[ESP + 0x24]
0057f6a4 : JMP 0x0057f6aa
0057f6a6 : LEA EAX,[ESP + 0x14]
0057f6aa : PUSH EAX
0057f6ab : PUSH 0xb8d6a4
0057f6b0 : PUSH EBP
0057f6b1 : MOV ECX,ESI
0057f6b3 : CALL 0x00500670
0057f6b8 : TEST BL,0x2
0057f6bb : JZ 0x0057f6c9
0057f6bd : LEA ECX,[ESP + 0x24]
0057f6c1 : AND EBX,0xfffffffd
0057f6c4 : CALL 0x00526bc0
0057f6c9 : MOV CL,byte ptr [EDI + 0x2a]
0057f6cc : SHR CL,0x6
0057f6cf : TEST CL,0x1
0057f6d2 : JZ 0x0057f6ef
0057f6d4 : MOV DL,byte ptr [EDI + 0x28]
0057f6d7 : SHR DL,0x2
0057f6da : OR EBX,0x4
0057f6dd : AND DL,0x1
0057f6e0 : MOV byte ptr [ESP + 0x24],0x2
0057f6e5 : MOV byte ptr [ESP + 0x28],DL
0057f6e9 : LEA EAX,[ESP + 0x24]
0057f6ed : JMP 0x0057f6f3
0057f6ef : LEA EAX,[ESP + 0x14]
0057f6f3 : PUSH EAX
0057f6f4 : PUSH 0xb8d6bc
0057f6f9 : PUSH EBP
0057f6fa : MOV ECX,ESI
0057f6fc : CALL 0x00500670
0057f701 : TEST BL,0x4
0057f704 : JZ 0x0057f712
0057f706 : LEA ECX,[ESP + 0x24]
0057f70a : AND EBX,0xfffffffb
0057f70d : CALL 0x00526bc0
0057f712 : MOV AL,byte ptr [EDI + 0x2a]
0057f715 : SHR AL,0x3
0057f718 : TEST AL,0x1
0057f71a : JZ 0x0057f748
0057f71c : MOVZX ECX,word ptr [EDI + 0x26]
0057f720 : MOV dword ptr [ESP + 0x38],ECX
0057f724 : OR EBX,0x8
0057f727 : MOV byte ptr [ESP + 0x24],0x3
0057f72c : FILD dword ptr [ESP + 0x38]
0057f730 : LEA EAX,[ESP + 0x24]
0057f734 : FDIV double ptr [0x00b86058]
0057f73a : FSTP float ptr [ESP + 0x38]
0057f73e : FLD float ptr [ESP + 0x38]
0057f742 : FSTP double ptr [ESP + 0x28]
0057f746 : JMP 0x0057f74c
0057f748 : LEA EAX,[ESP + 0x14]
0057f74c : PUSH EAX
0057f74d : PUSH 0xb8d7a4
0057f752 : PUSH EBP
0057f753 : MOV ECX,ESI
0057f755 : CALL 0x00500670
0057f75a : TEST BL,0x8
0057f75d : JZ 0x0057f76b
0057f75f : LEA ECX,[ESP + 0x24]
0057f763 : AND EBX,0xfffffff7
0057f766 : CALL 0x00526bc0
0057f76b : MOV DL,byte ptr [EDI + 0x2a]
0057f76e : SHR DL,0x2
0057f771 : TEST DL,0x1
0057f774 : JZ 0x0057f7c4
0057f776 : MOV ECX,EDI
0057f778 : OR EBX,0x30
0057f77b : CALL 0x0055ef50
0057f780 : MOV EAX,dword ptr [EAX]
0057f782 : MOV ECX,dword ptr [EBP]
0057f785 : MOV EDX,EAX
0057f787 : AND EDX,0xfffffffc
0057f78a : MOV EDX,dword ptr [EDX]
0057f78c : AND EDX,0x7fffffff
0057f792 : AND EAX,0xfffffffc
0057f795 : ADD ECX,0x8
0057f798 : PUSH EDX
0057f799 : ADD EAX,0x8
0057f79c : PUSH EAX
0057f79d : ADD ECX,0x24c
0057f7a3 : CALL 0x00525450
0057f7a8 : MOV ESI,EAX
0057f7aa : MOV EAX,0x1
0057f7af : ADD dword ptr [ESI + 0x8],EAX
0057f7b2 : MOV byte ptr [ESP + 0x24],0x5
0057f7b7 : MOV dword ptr [ESP + 0x28],ESI
0057f7bb : ADD dword ptr [ESI + 0x8],EAX
0057f7be : LEA EAX,[ESP + 0x24]
0057f7c2 : JMP 0x0057f7cc
0057f7c4 : MOV ESI,dword ptr [ESP + 0x3c]
0057f7c8 : LEA EAX,[ESP + 0x14]
0057f7cc : MOV ECX,dword ptr [ESP + 0x3c]
0057f7d0 : PUSH EAX
0057f7d1 : PUSH 0xb8d7cc
0057f7d6 : PUSH EBP
0057f7d7 : CALL 0x00500670
0057f7dc : TEST BL,0x20
0057f7df : JZ 0x0057f7ed
0057f7e1 : LEA ECX,[ESP + 0x24]
0057f7e5 : AND EBX,0xffffffdf
0057f7e8 : CALL 0x00526bc0
0057f7ed : TEST BL,0x10
0057f7f0 : JZ 0x0057f802
0057f7f2 : AND EBX,0xffffffef
0057f7f5 : ADD dword ptr [ESI + 0x8],-0x1
0057f7f9 : JNZ 0x0057f802
0057f7fb : MOV ECX,ESI
0057f7fd : CALL 0x00525340
0057f802 : TEST byte ptr [EDI + 0x2a],0x1
0057f806 : JZ 0x0057f834
0057f808 : MOV EAX,dword ptr [EDI + 0x20]
0057f80b : AND EAX,0xffffff
0057f810 : OR EBX,0x40
0057f813 : MOV dword ptr [ESP + 0x38],EAX
0057f817 : FILD dword ptr [ESP + 0x38]
0057f81b : MOV byte ptr [ESP + 0x24],0x3
0057f820 : TEST EAX,EAX
0057f822 : JGE 0x0057f82a
0057f824 : FADD double ptr [0x00cdf6f8]
0057f82a : FSTP double ptr [ESP + 0x28]
0057f82e : LEA EAX,[ESP + 0x24]
0057f832 : JMP 0x0057f838
0057f834 : LEA EAX,[ESP + 0x14]
0057f838 : MOV ESI,dword ptr [ESP + 0x3c]
0057f83c : PUSH EAX
0057f83d : PUSH 0xb8d75c
0057f842 : PUSH EBP
0057f843 : MOV ECX,ESI
0057f845 : CALL 0x00500670
0057f84a : TEST BL,0x40
0057f84d : JZ 0x0057f85b
0057f84f : LEA ECX,[ESP + 0x24]
0057f853 : AND EBX,0xffffffbf
0057f856 : CALL 0x00526bc0
0057f85b : MOV CL,byte ptr [EDI + 0x2a]
0057f85e : SHR CL,0x1
0057f860 : TEST CL,0x1
0057f863 : JZ 0x0057f894
0057f865 : MOVSX EDX,word ptr [EDI + 0x24]
0057f869 : MOV dword ptr [ESP + 0x38],EDX
0057f86d : OR EBX,0x80
0057f873 : MOV byte ptr [ESP + 0x24],0x3
0057f878 : FILD dword ptr [ESP + 0x38]
0057f87c : LEA EAX,[ESP + 0x24]
0057f880 : FDIV double ptr [0x00b86058]
0057f886 : FSTP float ptr [ESP + 0x38]
0057f88a : FLD float ptr [ESP + 0x38]
0057f88e : FSTP double ptr [ESP + 0x28]
0057f892 : JMP 0x0057f898
0057f894 : LEA EAX,[ESP + 0x14]
0057f898 : PUSH EAX
0057f899 : PUSH 0xb8d784
0057f89e : PUSH EBP
0057f89f : MOV ECX,ESI
0057f8a1 : CALL 0x00500670
0057f8a6 : TEST BL,BL
0057f8a8 : JNS 0x0057f8b9
0057f8aa : LEA ECX,[ESP + 0x24]
0057f8ae : AND EBX,0xffffff7f
0057f8b4 : CALL 0x00526bc0
0057f8b9 : MOV AL,byte ptr [EDI + 0x2a]
0057f8bc : SHR AL,0x7
0057f8bf : TEST AL,0x1
0057f8c1 : JZ 0x0057f8e1
0057f8c3 : MOV CL,byte ptr [EDI + 0x28]
0057f8c6 : SHR CL,0x3
0057f8c9 : OR EBX,0x100
0057f8cf : AND CL,0x1
0057f8d2 : MOV byte ptr [ESP + 0x24],0x2
0057f8d7 : MOV byte ptr [ESP + 0x28],CL
0057f8db : LEA EAX,[ESP + 0x24]
0057f8df : JMP 0x0057f8e5
0057f8e1 : LEA EAX,[ESP + 0x14]
0057f8e5 : PUSH EAX
0057f8e6 : PUSH 0xb8d71c
0057f8eb : PUSH EBP
0057f8ec : MOV ECX,ESI
0057f8ee : CALL 0x00500670
0057f8f3 : TEST EBX,0x100
0057f8f9 : JZ 0x0057f90a
0057f8fb : LEA ECX,[ESP + 0x24]
0057f8ff : AND EBX,0xfffffeff
0057f905 : CALL 0x00526bc0
0057f90a : MOV EDX,0x100
0057f90f : TEST word ptr [EDI + 0x2a],DX
0057f913 : JZ 0x0057f96d
0057f915 : LEA ESI,[EDI + 0x10]
0057f918 : MOV ECX,ESI
0057f91a : CALL 0x0051b1a0
0057f91f : TEST EAX,EAX
0057f921 : JZ 0x0057f96d
0057f923 : MOV EAX,dword ptr [ESI]
0057f925 : MOV ECX,dword ptr [EBP]
0057f928 : MOV EDX,EAX
0057f92a : AND EDX,0xfffffffc
0057f92d : MOV EDX,dword ptr [EDX]
0057f92f : AND EDX,0x7fffffff
0057f935 : AND EAX,0xfffffffc
0057f938 : ADD ECX,0x8
0057f93b : PUSH EDX
0057f93c : ADD EAX,0x8
0057f93f : PUSH EAX
0057f940 : ADD ECX,0x24c
0057f946 : OR EBX,0x600
0057f94c : CALL 0x00525450
0057f951 : MOV ESI,EAX
0057f953 : MOV EAX,0x1
0057f958 : ADD dword ptr [ESI + 0x8],EAX
0057f95b : MOV byte ptr [ESP + 0x24],0x5
0057f960 : MOV dword ptr [ESP + 0x28],ESI
0057f964 : ADD dword ptr [ESI + 0x8],EAX
0057f967 : LEA EAX,[ESP + 0x24]
0057f96b : JMP 0x0057f975
0057f96d : MOV ESI,dword ptr [ESP + 0x3c]
0057f971 : LEA EAX,[ESP + 0x14]
0057f975 : MOV ECX,dword ptr [ESP + 0x3c]
0057f979 : PUSH EAX
0057f97a : PUSH 0xb8d794
0057f97f : PUSH EBP
0057f980 : CALL 0x00500670
0057f985 : TEST EBX,0x400
0057f98b : JZ 0x0057f99c
0057f98d : LEA ECX,[ESP + 0x24]
0057f991 : AND EBX,0xfffffbff
0057f997 : CALL 0x00526bc0
0057f99c : TEST EBX,0x200
0057f9a2 : JZ 0x0057f9b7
0057f9a4 : AND EBX,0xfffffdff
0057f9aa : ADD dword ptr [ESI + 0x8],-0x1
0057f9ae : JNZ 0x0057f9b7
0057f9b0 : MOV ECX,ESI
0057f9b2 : CALL 0x00525340
0057f9b7 : MOV EAX,dword ptr [EBP]
0057f9ba : CMP byte ptr [EAX + 0x2a4],0x1
0057f9c1 : JNZ 0x0057fa1b
0057f9c3 : TEST byte ptr [EDI + 0x2a],0x1
0057f9c7 : JZ 0x0057f9f6
0057f9c9 : MOVZX ECX,byte ptr [EDI + 0x23]
0057f9cd : MOV dword ptr [ESP + 0x38],ECX
0057f9d1 : OR EBX,0x800
0057f9d7 : MOV byte ptr [ESP + 0x24],0x3
0057f9dc : FILD dword ptr [ESP + 0x38]
0057f9e0 : LEA EAX,[ESP + 0x24]
0057f9e4 : FMUL double ptr [0x00cdf2a8]
0057f9ea : FDIV double ptr [0x00b86b48]
0057f9f0 : FSTP double ptr [ESP + 0x28]
0057f9f4 : JMP 0x0057f9fa
0057f9f6 : LEA EAX,[ESP + 0x14]
0057f9fa : MOV ECX,dword ptr [ESP + 0x3c]
0057f9fe : PUSH EAX
0057f9ff : PUSH 0xb8a444
0057fa04 : PUSH EBP
0057fa05 : CALL 0x00500670
0057fa0a : TEST EBX,0x800
0057fa10 : JZ 0x0057fa1b
0057fa12 : LEA ECX,[ESP + 0x24]
0057fa16 : CALL 0x00526bc0
0057fa1b : LEA ECX,[ESP + 0x14]
0057fa1f : CALL 0x00526bc0
0057fa24 : POP EDI
0057fa25 : POP ESI
0057fa26 : POP EBP
0057fa27 : POP EBX
0057fa28 : ADD ESP,0x24
0057fa2b : RET 0x8
