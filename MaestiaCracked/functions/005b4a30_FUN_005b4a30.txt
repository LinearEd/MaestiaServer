PROGRAM  : Maestia.exe
FUNCTION : FUN_005b4a30
ENTRY    : 005b4a30
BODY     : [[005b4a30, 005b4b4a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005b4a30(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005b4770);
    *puVar3 = &PTR_LAB_00b90290;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x54,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005b4980(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x5;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x1c,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005b4a30 : SUB ESP,0x18
005b4a33 : PUSH EBX
005b4a34 : PUSH EBP
005b4a35 : PUSH ESI
005b4a36 : MOV ESI,dword ptr [ESP + 0x2c]
005b4a3a : MOV ECX,dword ptr [ESI + 0x288]
005b4a40 : PUSH EDI
005b4a41 : XOR EBX,EBX
005b4a43 : PUSH EBX
005b4a44 : PUSH 0x34
005b4a46 : MOV dword ptr [ESP + 0x18],ESI
005b4a4a : MOV byte ptr [ESP + 0x1c],0x8
005b4a4f : CALL 0x00515840
005b4a54 : MOV EDI,EAX
005b4a56 : CMP EDI,EBX
005b4a58 : JZ 0x005b4a7a
005b4a5a : PUSH 0x5b4770
005b4a5f : LEA EAX,[ESP + 0x14]
005b4a63 : PUSH EAX
005b4a64 : MOV ECX,EDI
005b4a66 : CALL 0x00568960
005b4a6b : MOV dword ptr [EDI],0xb90290
005b4a71 : MOV dword ptr [EDI + 0x10],0xb90510
005b4a78 : JMP 0x005b4a7c
005b4a7a : XOR EDI,EDI
005b4a7c : MOV EBP,dword ptr [ESP + 0x2c]
005b4a80 : PUSH EBX
005b4a81 : MOV byte ptr [EBP + 0x8],BL
005b4a84 : MOV dword ptr [EBP],EDI
005b4a87 : MOV dword ptr [EBP + 0x4],EBX
005b4a8a : MOV ECX,dword ptr [ESI + 0x288]
005b4a90 : PUSH 0x54
005b4a92 : CALL 0x00515840
005b4a97 : MOV EDI,EAX
005b4a99 : CMP EDI,EBX
005b4a9b : JZ 0x005b4ac7
005b4a9d : PUSH EBP
005b4a9e : PUSH 0x1
005b4aa0 : MOV ECX,ESI
005b4aa2 : CALL 0x00530910
005b4aa7 : PUSH EAX
005b4aa8 : LEA ECX,[ESP + 0x18]
005b4aac : PUSH ECX
005b4aad : MOV ECX,EDI
005b4aaf : CALL 0x005b4980
005b4ab4 : MOV EBX,EAX
005b4ab6 : TEST EBX,EBX
005b4ab8 : JZ 0x005b4ac7
005b4aba : MOV EDX,dword ptr [EBX + 0x8]
005b4abd : INC EDX
005b4abe : AND EDX,0x8fffffff
005b4ac4 : MOV dword ptr [EBX + 0x8],EDX
005b4ac7 : LEA EAX,[ESP + 0x30]
005b4acb : PUSH EAX
005b4acc : LEA ECX,[ESP + 0x30]
005b4ad0 : PUSH ECX
005b4ad1 : LEA ECX,[ESI + 0x278]
005b4ad7 : MOV dword ptr [ESP + 0x38],EBX
005b4adb : MOV dword ptr [ESP + 0x34],0x5
005b4ae3 : CALL 0x0050ff10
005b4ae8 : MOV ECX,dword ptr [ESP + 0x30]
005b4aec : TEST ECX,ECX
005b4aee : JZ 0x005b4af5
005b4af0 : CALL 0x00503db0
005b4af5 : MOV EAX,dword ptr [ESI + 0x2a0]
005b4afb : ADD EAX,0x10
005b4afe : LEA EDX,[ESP + 0x30]
005b4b02 : MOV byte ptr [ESP + 0x30],0x0
005b4b07 : MOV EDI,dword ptr [EAX]
005b4b09 : PUSH EDX
005b4b0a : PUSH EBP
005b4b0b : LEA ECX,[ESP + 0x20]
005b4b0f : MOV dword ptr [ESP + 0x34],EAX
005b4b13 : ADD EDI,0x28
005b4b16 : CALL 0x00526210
005b4b1b : MOV ECX,dword ptr [ESP + 0x30]
005b4b1f : MOV EDX,dword ptr [EDI]
005b4b21 : PUSH EAX
005b4b22 : ADD ESI,0x1c
005b4b25 : PUSH ESI
005b4b26 : LEA EAX,[ESP + 0x1c]
005b4b2a : PUSH EAX
005b4b2b : CALL EDX
005b4b2d : LEA ECX,[ESP + 0x18]
005b4b31 : CALL 0x00526bc0
005b4b36 : TEST EBX,EBX
005b4b38 : JZ 0x005b4b41
005b4b3a : MOV ECX,EBX
005b4b3c : CALL 0x00503db0
005b4b41 : POP EDI
005b4b42 : POP ESI
005b4b43 : MOV EAX,EBP
005b4b45 : POP EBP
005b4b46 : POP EBX
005b4b47 : ADD ESP,0x18
005b4b4a : RET
