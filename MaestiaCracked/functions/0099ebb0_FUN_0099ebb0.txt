PROGRAM  : Maestia.exe
FUNCTION : FUN_0099ebb0
ENTRY    : 0099ebb0
BODY     : [[0099ebb0, 0099eca1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099ebb0(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short *psVar4;
  int unaff_EDI;
  uint local_8;
  
  local_8 = 0;
  if (*(int *)(unaff_EDI + 0x5c) - *(int *)(unaff_EDI + 0x58) >> 2 != 0) {
    do {
      iVar2 = *(int *)(*(int *)(unaff_EDI + 0x58) + local_8 * 4);
      if ((*(int *)(iVar2 + 8) == *(int *)(param_1 + 4)) &&
         (*(int *)(iVar2 + 0xc) == *(int *)(param_1 + 8))) {
        psVar4 = (short *)(param_1 + 0xc);
        do {
          sVar1 = *psVar4;
          psVar4 = psVar4 + 1;
        } while (sVar1 != 0);
        FUN_00406360((short *)(param_1 + 0xc),(int)psVar4 - (param_1 + 0xe) >> 1);
        iVar3 = DAT_0172489c;
        if ((*(int *)(unaff_EDI + 0xb0) == *(int *)(iVar2 + 8)) &&
           (*(int *)(unaff_EDI + 0xb4) == *(int *)(iVar2 + 0xc))) {
          *(undefined4 *)(DAT_0172489c + 0x2c) = 0xffffffff;
          *(undefined4 *)(iVar3 + 4) = 0x2000;
          *(undefined4 *)(iVar3 + 8) = 0xc;
          *(undefined4 *)(iVar3 + 0x1c) = 0xffffff;
          *(undefined4 *)(iVar3 + 0x10) = 0;
          *(undefined4 *)(iVar3 + 0x14) = 0;
          *(undefined4 *)(iVar3 + 0x18) = 300;
          *(undefined1 *)(iVar3 + 1) = 0;
          *(undefined4 *)(iVar3 + 0x20) = 0;
          *(undefined4 *)(iVar3 + 0xc) = 0;
          *(undefined1 *)(iVar3 + 2) = 0;
          *(undefined1 *)(iVar3 + 0x30) = 1;
          *(undefined4 *)(iVar3 + 0x2c) = *(undefined4 *)(unaff_EDI + 0x2c);
          FUN_008f9b20(iVar2 + 0x2c,0,0);
        }
      }
      local_8 = local_8 + 1;
    } while (local_8 < (uint)(*(int *)(unaff_EDI + 0x5c) - *(int *)(unaff_EDI + 0x58) >> 2));
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0099ebb0 : PUSH EBP
0099ebb1 : MOV EBP,ESP
0099ebb3 : PUSH ECX
0099ebb4 : MOV ECX,dword ptr [EDI + 0x5c]
0099ebb7 : SUB ECX,dword ptr [EDI + 0x58]
0099ebba : XOR EAX,EAX
0099ebbc : SAR ECX,0x2
0099ebbf : MOV dword ptr [EBP + -0x4],EAX
0099ebc2 : TEST ECX,ECX
0099ebc4 : JBE 0x0099ec9c
0099ebca : PUSH EBX
0099ebcb : PUSH ESI
0099ebcc : LEA ESP,[ESP]
0099ebd0 : MOV EDX,dword ptr [EDI + 0x58]
0099ebd3 : MOV ESI,dword ptr [EDX + EAX*0x4]
0099ebd6 : MOV ECX,dword ptr [ESI + 0x8]
0099ebd9 : MOV EAX,dword ptr [EBP + 0x8]
0099ebdc : CMP ECX,dword ptr [EAX + 0x4]
0099ebdf : JNZ 0x0099ec82
0099ebe5 : MOV EDX,dword ptr [ESI + 0xc]
0099ebe8 : CMP EDX,dword ptr [EAX + 0x8]
0099ebeb : JNZ 0x0099ec82
0099ebf1 : LEA EDX,[EAX + 0xc]
0099ebf4 : MOV EAX,EDX
0099ebf6 : LEA EBX,[EAX + 0x2]
0099ebf9 : LEA ESP,[ESP]
0099ec00 : MOV CX,word ptr [EAX]
0099ec03 : ADD EAX,0x2
0099ec06 : TEST CX,CX
0099ec09 : JNZ 0x0099ec00
0099ec0b : SUB EAX,EBX
0099ec0d : SAR EAX,0x1
0099ec0f : PUSH EAX
0099ec10 : LEA EBX,[ESI + 0x2c]
0099ec13 : PUSH EDX
0099ec14 : MOV ECX,EBX
0099ec16 : CALL 0x00406360
0099ec1b : MOV EAX,dword ptr [EDI + 0xb0]
0099ec21 : CMP EAX,dword ptr [ESI + 0x8]
0099ec24 : JNZ 0x0099ec82
0099ec26 : MOV ECX,dword ptr [EDI + 0xb4]
0099ec2c : CMP ECX,dword ptr [ESI + 0xc]
0099ec2f : JNZ 0x0099ec82
0099ec31 : MOV ESI,dword ptr [0x0172489c]
0099ec37 : XOR EAX,EAX
0099ec39 : PUSH EAX
0099ec3a : MOV dword ptr [ESI + 0x2c],0xffffffff
0099ec41 : MOV dword ptr [ESI + 0x4],0x2000
0099ec48 : MOV dword ptr [ESI + 0x8],0xc
0099ec4f : MOV dword ptr [ESI + 0x1c],0xffffff
0099ec56 : MOV dword ptr [ESI + 0x10],EAX
0099ec59 : MOV dword ptr [ESI + 0x14],EAX
0099ec5c : MOV dword ptr [ESI + 0x18],0x12c
0099ec63 : MOV byte ptr [ESI + 0x1],AL
0099ec66 : MOV dword ptr [ESI + 0x20],EAX
0099ec69 : MOV dword ptr [ESI + 0xc],EAX
0099ec6c : MOV byte ptr [ESI + 0x2],AL
0099ec6f : MOV byte ptr [ESI + 0x30],0x1
0099ec73 : MOV EDX,dword ptr [EDI + 0x2c]
0099ec76 : PUSH EAX
0099ec77 : PUSH EBX
0099ec78 : XOR ECX,ECX
0099ec7a : MOV dword ptr [ESI + 0x2c],EDX
0099ec7d : CALL 0x008f9b20
0099ec82 : MOV ECX,dword ptr [EDI + 0x5c]
0099ec85 : SUB ECX,dword ptr [EDI + 0x58]
0099ec88 : MOV EAX,dword ptr [EBP + -0x4]
0099ec8b : INC EAX
0099ec8c : SAR ECX,0x2
0099ec8f : MOV dword ptr [EBP + -0x4],EAX
0099ec92 : CMP EAX,ECX
0099ec94 : JC 0x0099ebd0
0099ec9a : POP ESI
0099ec9b : POP EBX
0099ec9c : MOV ESP,EBP
0099ec9e : POP EBP
0099ec9f : RET 0x4
