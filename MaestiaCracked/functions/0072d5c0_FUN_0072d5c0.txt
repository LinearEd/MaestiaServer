PROGRAM  : Maestia.exe
FUNCTION : FUN_0072d5c0
ENTRY    : 0072d5c0
BODY     : [[0072d5c0, 0072d7e5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0072d5c0(int *param_1,int param_2)

{
  undefined4 *in_ECX;
  int iVar1;
  wchar_t *pwVar2;
  undefined4 *local_3c;
  int local_38;
  undefined4 *local_34;
  undefined1 local_30 [4];
  undefined4 **local_2c [4];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b26fda;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_38 = param_2;
  if ((param_1 == (int *)0x0) || (param_2 == 0)) {
    FUN_008018d0(L"AvaMoviePlayer [DrawScene] d3ddev or texture is NULL",local_14);
  }
  else if (in_ECX[0x19] == 0) {
    FUN_008018d0(L"AvaMoviePlayer [DrawScene] m_vertexBuffer is NULL",local_14);
  }
  else {
    local_34 = in_ECX;
    FUN_0072d0d0();
    (**(code **)(*(int *)in_ECX[0x19] + 0x2c))((int *)in_ECX[0x19],0,4,&local_3c,0);
    for (iVar1 = 0x18; in_ECX = in_ECX + 1, iVar1 != 0; iVar1 = iVar1 + -1) {
      *local_3c = *in_ECX;
      local_3c = local_3c + 1;
    }
    (**(code **)(*(int *)local_34[0x19] + 0x30))((int *)local_34[0x19]);
    (**(code **)(*param_1 + 0xac))(param_1,0,0,1,0xff000000,0x3f800000,0);
    (**(code **)(*param_1 + 0xe4))(param_1,0x3c,(int)*(short *)(local_34 + 0x1a) << 0x18);
    iVar1 = (**(code **)(*param_1 + 0xa4))(param_1);
    if (iVar1 < 0) {
      pwVar2 = L"AvaMoviePlayer [DrawScene] d3ddev->BegineScene() return FAILED";
    }
    else {
      (**(code **)(*param_1 + 0x104))(param_1,0,local_38);
      (**(code **)(*param_1 + 0x10c))(param_1,0,4,2);
      (**(code **)(*param_1 + 0x10c))(param_1,0,5,3);
      (**(code **)(*param_1 + 400))(param_1,0,local_34[0x19],0,0x18);
      (**(code **)(*param_1 + 0x164))(param_1,0x142);
      (**(code **)(*param_1 + 0x144))(param_1,5,0,2);
      if ((DAT_017251d4 != 0) && (local_34[0x1b] == 1)) {
        FUN_004c5290(DAT_017251d4,local_30);
        local_8 = 0;
        if ((local_1c != 0) && (local_34[0x1d] != 0)) {
          if (local_18 < 8) {
            local_2c[0] = local_2c;
          }
          (**(code **)(*(int *)local_34[0x1d] + 0x3c))
                    ((int *)local_34[0x1d],0,local_2c[0],0xffffffff,local_34 + 0x1f,0x11,0xffffffff)
          ;
        }
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      (**(code **)(*param_1 + 0x104))(param_1,0,0);
      iVar1 = (**(code **)(*param_1 + 0xa8))(param_1);
      if (-1 < iVar1) goto LAB_0072d7c8;
      pwVar2 = L"AvaMoviePlayer [DrawScene] d3ddev->EndScene() return FAILED";
    }
    FUN_008018d0(pwVar2);
  }
LAB_0072d7c8:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0072d5c0 : PUSH EBP
0072d5c1 : MOV EBP,ESP
0072d5c3 : PUSH -0x1
0072d5c5 : PUSH 0xb26fda
0072d5ca : MOV EAX,FS:[0x0]
0072d5d0 : PUSH EAX
0072d5d1 : SUB ESP,0x2c
0072d5d4 : MOV EAX,[0x00d66fa0]
0072d5d9 : XOR EAX,EBP
0072d5db : MOV dword ptr [EBP + -0x10],EAX
0072d5de : PUSH EBX
0072d5df : PUSH ESI
0072d5e0 : PUSH EDI
0072d5e1 : PUSH EAX
0072d5e2 : LEA EAX,[EBP + -0xc]
0072d5e5 : MOV FS:[0x0],EAX
0072d5eb : MOV EBX,dword ptr [EBP + 0x8]
0072d5ee : MOV EAX,dword ptr [EBP + 0xc]
0072d5f1 : MOV ESI,ECX
0072d5f3 : MOV dword ptr [EBP + -0x30],ESI
0072d5f6 : MOV dword ptr [EBP + -0x34],EAX
0072d5f9 : TEST EBX,EBX
0072d5fb : JZ 0x0072d7b0
0072d601 : TEST EAX,EAX
0072d603 : JZ 0x0072d7b0
0072d609 : CMP dword ptr [ESI + 0x64],0x0
0072d60d : JNZ 0x0072d629
0072d60f : MOV ESI,dword ptr [0x00da98e8]
0072d615 : PUSH 0xc02ce8
0072d61a : CALL 0x008018d0
0072d61f : MOV EAX,0x8876086c
0072d624 : JMP 0x0072d7c5
0072d629 : MOV EAX,ESI
0072d62b : CALL 0x0072d0d0
0072d630 : MOV EAX,dword ptr [ESI + 0x64]
0072d633 : MOV ECX,dword ptr [EAX]
0072d635 : PUSH 0x0
0072d637 : LEA EDX,[EBP + -0x38]
0072d63a : PUSH EDX
0072d63b : PUSH 0x4
0072d63d : PUSH 0x0
0072d63f : PUSH EAX
0072d640 : MOV EAX,dword ptr [ECX + 0x2c]
0072d643 : CALL EAX
0072d645 : MOV EDI,dword ptr [EBP + -0x38]
0072d648 : ADD ESI,0x4
0072d64b : MOV ECX,0x18
0072d650 : MOVSD.REP ES:EDI,ESI
0072d652 : MOV ESI,dword ptr [EBP + -0x30]
0072d655 : MOV EAX,dword ptr [ESI + 0x64]
0072d658 : MOV ECX,dword ptr [EAX]
0072d65a : MOV EDX,dword ptr [ECX + 0x30]
0072d65d : PUSH EAX
0072d65e : CALL EDX
0072d660 : MOV EAX,dword ptr [EBX]
0072d662 : FLD1
0072d664 : PUSH 0x0
0072d666 : PUSH ECX
0072d667 : MOV ECX,dword ptr [EAX + 0xac]
0072d66d : FSTP float ptr [ESP]
0072d670 : PUSH 0xff000000
0072d675 : PUSH 0x1
0072d677 : PUSH 0x0
0072d679 : PUSH 0x0
0072d67b : PUSH EBX
0072d67c : CALL ECX
0072d67e : MOVSX EAX,word ptr [ESI + 0x68]
0072d682 : MOV EDX,dword ptr [EBX]
0072d684 : MOV ECX,dword ptr [EDX + 0xe4]
0072d68a : SHL EAX,0x18
0072d68d : PUSH EAX
0072d68e : PUSH 0x3c
0072d690 : PUSH EBX
0072d691 : CALL ECX
0072d693 : MOV EDX,dword ptr [EBX]
0072d695 : MOV EAX,dword ptr [EDX + 0xa4]
0072d69b : PUSH EBX
0072d69c : CALL EAX
0072d69e : TEST EAX,EAX
0072d6a0 : JGE 0x0072d6bc
0072d6a2 : PUSH 0xc02d88
0072d6a7 : MOV ESI,dword ptr [0x00da98e8]
0072d6ad : CALL 0x008018d0
0072d6b2 : MOV EAX,0x80004005
0072d6b7 : JMP 0x0072d7c5
0072d6bc : MOV EDX,dword ptr [EBP + -0x34]
0072d6bf : MOV ECX,dword ptr [EBX]
0072d6c1 : MOV EAX,dword ptr [ECX + 0x104]
0072d6c7 : PUSH EDX
0072d6c8 : PUSH 0x0
0072d6ca : PUSH EBX
0072d6cb : CALL EAX
0072d6cd : MOV ECX,dword ptr [EBX]
0072d6cf : MOV EDX,dword ptr [ECX + 0x10c]
0072d6d5 : PUSH 0x2
0072d6d7 : PUSH 0x4
0072d6d9 : PUSH 0x0
0072d6db : PUSH EBX
0072d6dc : CALL EDX
0072d6de : MOV EAX,dword ptr [EBX]
0072d6e0 : MOV ECX,dword ptr [EAX + 0x10c]
0072d6e6 : PUSH 0x3
0072d6e8 : PUSH 0x5
0072d6ea : PUSH 0x0
0072d6ec : PUSH EBX
0072d6ed : CALL ECX
0072d6ef : MOV EAX,dword ptr [ESI + 0x64]
0072d6f2 : MOV EDX,dword ptr [EBX]
0072d6f4 : MOV ECX,dword ptr [EDX + 0x190]
0072d6fa : PUSH 0x18
0072d6fc : PUSH 0x0
0072d6fe : PUSH EAX
0072d6ff : PUSH 0x0
0072d701 : PUSH EBX
0072d702 : CALL ECX
0072d704 : MOV EDX,dword ptr [EBX]
0072d706 : MOV EAX,dword ptr [EDX + 0x164]
0072d70c : PUSH 0x142
0072d711 : PUSH EBX
0072d712 : CALL EAX
0072d714 : MOV ECX,dword ptr [EBX]
0072d716 : MOV EDX,dword ptr [ECX + 0x144]
0072d71c : PUSH 0x2
0072d71e : PUSH 0x0
0072d720 : PUSH 0x5
0072d722 : PUSH EBX
0072d723 : CALL EDX
0072d725 : MOV EAX,[0x017251d4]
0072d72a : TEST EAX,EAX
0072d72c : JZ 0x0072d784
0072d72e : CMP dword ptr [ESI + 0x6c],0x1
0072d732 : JNZ 0x0072d784
0072d734 : LEA ECX,[EBP + -0x2c]
0072d737 : PUSH ECX
0072d738 : PUSH EAX
0072d739 : CALL 0x004c5290
0072d73e : MOV dword ptr [EBP + -0x4],0x0
0072d745 : CMP dword ptr [EBP + -0x18],0x0
0072d749 : JZ 0x0072d775
0072d74b : CMP dword ptr [ESI + 0x74],0x0
0072d74f : JZ 0x0072d775
0072d751 : CMP dword ptr [EBP + -0x14],0x8
0072d755 : MOV ECX,dword ptr [EBP + -0x28]
0072d758 : JNC 0x0072d75d
0072d75a : LEA ECX,[EBP + -0x28]
0072d75d : MOV EAX,dword ptr [ESI + 0x74]
0072d760 : MOV EDX,dword ptr [EAX]
0072d762 : PUSH -0x1
0072d764 : PUSH 0x11
0072d766 : ADD ESI,0x7c
0072d769 : PUSH ESI
0072d76a : PUSH -0x1
0072d76c : PUSH ECX
0072d76d : PUSH 0x0
0072d76f : PUSH EAX
0072d770 : MOV EAX,dword ptr [EDX + 0x3c]
0072d773 : CALL EAX
0072d775 : MOV dword ptr [EBP + -0x4],0xffffffff
0072d77c : LEA ECX,[EBP + -0x2c]
0072d77f : CALL 0x00406560
0072d784 : MOV ECX,dword ptr [EBX]
0072d786 : MOV EDX,dword ptr [ECX + 0x104]
0072d78c : PUSH 0x0
0072d78e : PUSH 0x0
0072d790 : PUSH EBX
0072d791 : CALL EDX
0072d793 : MOV EAX,dword ptr [EBX]
0072d795 : MOV ECX,dword ptr [EAX + 0xa8]
0072d79b : PUSH EBX
0072d79c : CALL ECX
0072d79e : TEST EAX,EAX
0072d7a0 : JGE 0x0072d7ac
0072d7a2 : PUSH 0xc02e08
0072d7a7 : JMP 0x0072d6a7
0072d7ac : XOR EAX,EAX
0072d7ae : JMP 0x0072d7c8
0072d7b0 : MOV ESI,dword ptr [0x00da98e8]
0072d7b6 : PUSH 0xc02c78
0072d7bb : CALL 0x008018d0
0072d7c0 : MOV EAX,0x80004003
0072d7c5 : ADD ESP,0x4
0072d7c8 : MOV ECX,dword ptr [EBP + -0xc]
0072d7cb : MOV dword ptr FS:[0x0],ECX
0072d7d2 : POP ECX
0072d7d3 : POP EDI
0072d7d4 : POP ESI
0072d7d5 : POP EBX
0072d7d6 : MOV ECX,dword ptr [EBP + -0x10]
0072d7d9 : XOR ECX,EBP
0072d7db : CALL 0x00633e6b
0072d7e0 : MOV ESP,EBP
0072d7e2 : POP EBP
0072d7e3 : RET 0x8
