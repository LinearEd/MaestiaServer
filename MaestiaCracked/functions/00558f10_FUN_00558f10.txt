PROGRAM  : Maestia.exe
FUNCTION : FUN_00558f10
ENTRY    : 00558f10
BODY     : [[00558f10, 00558fbc] [00558fc0, 005590b6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00558f10(undefined4 param_1,undefined4 param_2,int param_3,int param_4,undefined4 param_5)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  byte *pbVar4;
  int in_ECX;
  uint uVar5;
  undefined1 local_34 [20];
  byte *local_20;
  byte *local_1c;
  ushort local_10;
  uint local_c;
  uint local_8;
  
  iVar2 = *(int *)(*(int *)(param_3 + 0x18) + 0x10);
  iVar1 = iVar2 + 8;
  FUN_005dd100();
  FUN_005dcbb0(param_2);
  *(byte *)(iVar2 + 0x4c) = *(byte *)(in_ECX + 0x24) >> 3 & 1;
  if ((*(byte *)(in_ECX + 0x24) & 0x10) != 0) {
    FUN_005d9f10(in_ECX + 4,param_5);
  }
  if ((param_4 != 0) && (FUN_005ac2c0(), (*(byte *)(in_ECX + 0x24) & 0x10) != 0)) {
    uVar3 = FUN_005acfa0(local_34,in_ECX + 4);
    FUN_005d9f10(uVar3,param_5);
  }
  FUN_005548f0(in_ECX);
  if (local_c < local_8) {
    uVar5 = (uint)local_10;
    do {
      pbVar4 = local_20;
      if ((*local_20 & 7) == 0) {
        FUN_00558820(param_1,iVar1,param_3,param_4);
        FUN_005dd100();
        if (local_8 <= local_c) break;
        if ((*pbVar4 & 7) == 0) {
          local_20 = pbVar4 + 1;
        }
        else {
          FUN_00555bc0();
          uVar5 = (uint)local_10;
        }
        local_c = local_c + 1;
        pbVar4 = local_1c + -(uVar5 & 0xffff);
        if (*(int *)(pbVar4 + 4) <= (int)(local_20 + (-8 - (int)pbVar4))) {
          iVar2 = *(int *)pbVar4;
          if (iVar2 == 0) {
            local_20 = (byte *)0x0;
          }
          else {
            local_20 = (byte *)(iVar2 + 8);
            uVar5 = (int)local_20 - iVar2;
            local_10 = (ushort)uVar5;
            local_1c = local_20;
          }
        }
      }
      else {
        FUN_00558bc0(iVar1);
        uVar5 = (uint)local_10;
      }
    } while (local_c < local_8);
  }
  FUN_00558820(param_1,iVar1,param_3,param_4);
  FUN_005dd100();
  if ((param_4 != 0) && (*(int *)(param_4 + 0x164) != 0)) {
    FUN_005acc90();
    FUN_005dbf50(param_4 + 0x160);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00558f10 : MOV EAX,dword ptr [ESP + 0xc]
00558f14 : SUB ESP,0x34
00558f17 : PUSH EBX
00558f18 : PUSH EBP
00558f19 : MOV EBP,ECX
00558f1b : MOV ECX,dword ptr [EAX + 0x18]
00558f1e : PUSH ESI
00558f1f : MOV ESI,dword ptr [ECX + 0x10]
00558f22 : PUSH EDI
00558f23 : LEA EDI,[ESI + 0x8]
00558f26 : MOV ECX,EDI
00558f28 : CALL 0x005dd100
00558f2d : FLD float ptr [ESP + 0x4c]
00558f31 : PUSH ECX
00558f32 : MOV ECX,EDI
00558f34 : FSTP float ptr [ESP]
00558f37 : CALL 0x005dcbb0
00558f3c : MOV DL,byte ptr [EBP + 0x24]
00558f3f : MOV EBX,dword ptr [ESP + 0x48]
00558f43 : SHR DL,0x3
00558f46 : AND DL,0x1
00558f49 : MOV byte ptr [ESI + 0x4c],DL
00558f4c : TEST byte ptr [EBP + 0x24],0x10
00558f50 : JZ 0x00558f65
00558f52 : FLD float ptr [ESP + 0x58]
00558f56 : PUSH ECX
00558f57 : LEA EAX,[EBP + 0x4]
00558f5a : FSTP float ptr [ESP]
00558f5d : PUSH EAX
00558f5e : MOV ECX,EBX
00558f60 : CALL 0x005d9f10
00558f65 : MOV ESI,dword ptr [ESP + 0x54]
00558f69 : TEST ESI,ESI
00558f6b : JZ 0x00558f9a
00558f6d : MOV ECX,ESI
00558f6f : CALL 0x005ac2c0
00558f74 : TEST byte ptr [EBP + 0x24],0x10
00558f78 : JZ 0x00558f9a
00558f7a : FLD float ptr [ESP + 0x58]
00558f7e : PUSH ECX
00558f7f : FSTP float ptr [ESP]
00558f82 : LEA ECX,[EBP + 0x4]
00558f85 : PUSH ECX
00558f86 : LEA EDX,[ESP + 0x18]
00558f8a : PUSH EDX
00558f8b : MOV ECX,ESI
00558f8d : CALL 0x005acfa0
00558f92 : PUSH EAX
00558f93 : MOV ECX,EBX
00558f95 : CALL 0x005d9f10
00558f9a : PUSH EBP
00558f9b : LEA ECX,[ESP + 0x24]
00558f9f : CALL 0x005548f0
00558fa4 : MOV EAX,dword ptr [ESP + 0x3c]
00558fa8 : CMP dword ptr [ESP + 0x38],EAX
00558fac : JNC 0x00559075
00558fb2 : MOV BX,word ptr [ESP + 0x34]
00558fb7 : MOV ESI,dword ptr [ESP + 0x24]
00558fbb : JMP 0x00558fc0
00558fc0 : TEST byte ptr [ESI],0x7
00558fc3 : JNZ 0x0055904c
00558fc9 : MOV ECX,dword ptr [ESP + 0x54]
00558fcd : MOV EDX,dword ptr [ESP + 0x50]
00558fd1 : MOV EAX,dword ptr [ESP + 0x48]
00558fd5 : PUSH ECX
00558fd6 : PUSH EDX
00558fd7 : PUSH EDI
00558fd8 : PUSH EAX
00558fd9 : MOV ECX,EBP
00558fdb : CALL 0x00558820
00558fe0 : MOV ECX,EDI
00558fe2 : CALL 0x005dd100
00558fe7 : MOV ECX,dword ptr [ESP + 0x38]
00558feb : CMP ECX,dword ptr [ESP + 0x3c]
00558fef : JNC 0x0055906d
00558ff1 : TEST byte ptr [ESI],0x7
00558ff4 : JNZ 0x00558ffd
00558ff6 : INC ESI
00558ff7 : MOV dword ptr [ESP + 0x24],ESI
00558ffb : JMP 0x0055900f
00558ffd : LEA ECX,[ESP + 0x20]
00559001 : CALL 0x00555bc0
00559006 : MOV BX,word ptr [ESP + 0x34]
0055900b : MOV ESI,dword ptr [ESP + 0x24]
0055900f : MOV EAX,dword ptr [ESP + 0x28]
00559013 : INC dword ptr [ESP + 0x38]
00559017 : MOVZX EDX,BX
0055901a : SUB EAX,EDX
0055901c : MOV ECX,ESI
0055901e : SUB ECX,EAX
00559020 : SUB ECX,0x8
00559023 : CMP ECX,dword ptr [EAX + 0x4]
00559026 : JL 0x0055905f
00559028 : MOV EAX,dword ptr [EAX]
0055902a : TEST EAX,EAX
0055902c : JZ 0x00559044
0055902e : LEA ESI,[EAX + 0x8]
00559031 : MOV EBX,ESI
00559033 : SUB EBX,EAX
00559035 : MOV dword ptr [ESP + 0x24],ESI
00559039 : MOV dword ptr [ESP + 0x28],ESI
0055903d : MOV word ptr [ESP + 0x34],BX
00559042 : JMP 0x0055905f
00559044 : XOR ESI,ESI
00559046 : MOV dword ptr [ESP + 0x24],ESI
0055904a : JMP 0x0055905f
0055904c : PUSH EDI
0055904d : LEA ECX,[ESP + 0x24]
00559051 : CALL 0x00558bc0
00559056 : MOV BX,word ptr [ESP + 0x34]
0055905b : MOV ESI,dword ptr [ESP + 0x24]
0055905f : MOV EDX,dword ptr [ESP + 0x3c]
00559063 : CMP dword ptr [ESP + 0x38],EDX
00559067 : JC 0x00558fc0
0055906d : MOV EBX,dword ptr [ESP + 0x48]
00559071 : MOV ESI,dword ptr [ESP + 0x54]
00559075 : MOV EAX,dword ptr [ESP + 0x50]
00559079 : PUSH ESI
0055907a : PUSH EAX
0055907b : PUSH EDI
0055907c : PUSH EBX
0055907d : MOV ECX,EBP
0055907f : CALL 0x00558820
00559084 : MOV ECX,EDI
00559086 : CALL 0x005dd100
0055908b : TEST ESI,ESI
0055908d : JZ 0x005590ad
0055908f : CMP dword ptr [ESI + 0x164],0x0
00559096 : JZ 0x005590ad
00559098 : MOV ECX,ESI
0055909a : CALL 0x005acc90
0055909f : ADD ESI,0x160
005590a5 : PUSH ESI
005590a6 : MOV ECX,EBX
005590a8 : CALL 0x005dbf50
005590ad : POP EDI
005590ae : POP ESI
005590af : POP EBP
005590b0 : POP EBX
005590b1 : ADD ESP,0x34
005590b4 : RET 0x14
