PROGRAM  : Maestia.exe
FUNCTION : FUN_00a041a0
ENTRY    : 00a041a0
BODY     : [[00a041a0, 00a044aa]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a041a0(undefined4 param_1,undefined4 param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  undefined1 local_9c [28];
  undefined1 local_80 [28];
  undefined1 local_64 [28];
  undefined1 local_48 [28];
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b25654;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  switch(param_1) {
  case 1:
    FUN_00406460(L"IDS_BUILDUP_HEALTH");
    local_8 = 0;
    iVar2 = FUN_0081d120(local_48);
    local_8._0_1_ = 1;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2,uVar1);
    local_8._0_1_ = 2;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 1;
    FUN_00406560();
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00406560();
    break;
  case 2:
    FUN_00406460(L"IDS_BUILDUP_STRENGTH");
    local_8 = 3;
    iVar2 = FUN_0081d120(local_80);
    local_8._0_1_ = 4;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2);
    local_8._0_1_ = 5;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 4;
    FUN_00406560();
    local_8 = CONCAT31(local_8._1_3_,3);
    FUN_00406560();
    break;
  default:
    goto switchD_00a041df_caseD_3;
  case 4:
    FUN_00406460(L"IDS_BUILDUP_AGILE");
    local_8 = 6;
    iVar2 = FUN_0081d120(local_2c);
    local_8._0_1_ = 7;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2);
    local_8._0_1_ = 8;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 7;
    FUN_00406560();
    local_8 = CONCAT31(local_8._1_3_,6);
    FUN_00406560();
    break;
  case 8:
    FUN_00406460(L"IDS_BUILDUP_INTELLIGENCE");
    local_8 = 9;
    iVar2 = FUN_0081d120(local_64);
    local_8._0_1_ = 10;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2);
    local_8._0_1_ = 0xb;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 10;
    FUN_00406560();
    local_8 = CONCAT31(local_8._1_3_,9);
    FUN_00406560();
    break;
  case 0x10:
    FUN_00406460(L"IDS_BUILDUP_SPELL");
    local_8 = 0xc;
    iVar2 = FUN_0081d120(local_9c);
    local_8._0_1_ = 0xd;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2);
    local_8._0_1_ = 0xe;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8._0_1_ = 0xd;
    FUN_00406560();
    local_8 = CONCAT31(local_8._1_3_,0xc);
    FUN_00406560();
  }
  local_8 = 0xffffffff;
  FUN_00406560();
switchD_00a041df_caseD_3:
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a041a0 : PUSH EBP
00a041a1 : MOV EBP,ESP
00a041a3 : PUSH -0x1
00a041a5 : PUSH 0xb25654
00a041aa : MOV EAX,FS:[0x0]
00a041b0 : PUSH EAX
00a041b1 : SUB ESP,0x1a4
00a041b7 : PUSH EBX
00a041b8 : PUSH ESI
00a041b9 : PUSH EDI
00a041ba : MOV EAX,[0x00d66fa0]
00a041bf : XOR EAX,EBP
00a041c1 : PUSH EAX
00a041c2 : LEA EAX,[EBP + -0xc]
00a041c5 : MOV FS:[0x0],EAX
00a041cb : MOV EAX,dword ptr [EBP + 0x8]
00a041ce : DEC EAX
00a041cf : CMP EAX,0xf
00a041d2 : JA 0x00a04497
00a041d8 : MOVZX EAX,byte ptr [EAX + 0xa044c4]
00a041df : JMP dword ptr [EAX*0x4 + 0xa044ac]
00a041e6 : PUSH 0xca9004
00a041eb : LEA ECX,[EBP + -0x44]
00a041ee : CALL 0x00406460
00a041f3 : MOV dword ptr [EBP + -0x4],0x0
00a041fa : LEA ECX,[EBP + -0x44]
00a041fd : PUSH ECX
00a041fe : MOV ECX,dword ptr [0x0172491c]
00a04204 : LEA EDI,[EBP + 0xffffff14]
00a0420a : CALL 0x0081d120
00a0420f : MOV BL,0x1
00a04211 : MOV byte ptr [EBP + -0x4],BL
00a04214 : CMP dword ptr [EAX + 0x18],0x8
00a04218 : JC 0x00a0421f
00a0421a : MOV EAX,dword ptr [EAX + 0x4]
00a0421d : JMP 0x00a04222
00a0421f : ADD EAX,0x4
00a04222 : MOV EDX,dword ptr [EBP + 0xc]
00a04225 : PUSH EDX
00a04226 : PUSH EAX
00a04227 : LEA ESI,[EBP + 0xfffffea4]
00a0422d : CALL 0x00404750
00a04232 : ADD ESP,0x8
00a04235 : MOV byte ptr [EBP + -0x4],0x2
00a04239 : MOV ECX,dword ptr [EBP + 0x10]
00a0423c : PUSH -0x1
00a0423e : PUSH 0x0
00a04240 : PUSH EAX
00a04241 : CALL 0x00405c30
00a04246 : MOV byte ptr [EBP + -0x4],BL
00a04249 : MOV ECX,ESI
00a0424b : CALL 0x00406560
00a04250 : MOV byte ptr [EBP + -0x4],0x0
00a04254 : LEA ECX,[EBP + 0xffffff14]
00a0425a : CALL 0x00406560
00a0425f : MOV dword ptr [EBP + -0x4],0xffffffff
00a04266 : LEA ECX,[EBP + -0x44]
00a04269 : JMP 0x00a04492
00a0426e : PUSH 0xca902c
00a04273 : LEA ECX,[EBP + -0x7c]
00a04276 : CALL 0x00406460
00a0427b : MOV dword ptr [EBP + -0x4],0x3
00a04282 : MOV ECX,dword ptr [0x0172491c]
00a04288 : LEA EAX,[EBP + -0x7c]
00a0428b : PUSH EAX
00a0428c : LEA EDI,[EBP + 0xfffffedc]
00a04292 : CALL 0x0081d120
00a04297 : MOV BL,0x4
00a04299 : MOV byte ptr [EBP + -0x4],BL
00a0429c : CMP dword ptr [EAX + 0x18],0x8
00a042a0 : JC 0x00a042a7
00a042a2 : MOV EAX,dword ptr [EAX + 0x4]
00a042a5 : JMP 0x00a042aa
00a042a7 : ADD EAX,0x4
00a042aa : MOV ECX,dword ptr [EBP + 0xc]
00a042ad : PUSH ECX
00a042ae : PUSH EAX
00a042af : LEA ESI,[EBP + 0xffffff4c]
00a042b5 : CALL 0x00404750
00a042ba : ADD ESP,0x8
00a042bd : MOV byte ptr [EBP + -0x4],0x5
00a042c1 : MOV ECX,dword ptr [EBP + 0x10]
00a042c4 : PUSH -0x1
00a042c6 : PUSH 0x0
00a042c8 : PUSH EAX
00a042c9 : CALL 0x00405c30
00a042ce : MOV byte ptr [EBP + -0x4],BL
00a042d1 : MOV ECX,ESI
00a042d3 : CALL 0x00406560
00a042d8 : MOV byte ptr [EBP + -0x4],0x3
00a042dc : LEA ECX,[EBP + 0xfffffedc]
00a042e2 : CALL 0x00406560
00a042e7 : MOV dword ptr [EBP + -0x4],0xffffffff
00a042ee : LEA ECX,[EBP + -0x7c]
00a042f1 : JMP 0x00a04492
00a042f6 : PUSH 0xca9058
00a042fb : LEA ECX,[EBP + -0x28]
00a042fe : CALL 0x00406460
00a04303 : MOV dword ptr [EBP + -0x4],0x6
00a0430a : MOV ECX,dword ptr [0x0172491c]
00a04310 : LEA EDX,[EBP + -0x28]
00a04313 : PUSH EDX
00a04314 : LEA EDI,[EBP + 0xffffff30]
00a0431a : CALL 0x0081d120
00a0431f : MOV BL,0x7
00a04321 : MOV byte ptr [EBP + -0x4],BL
00a04324 : CMP dword ptr [EAX + 0x18],0x8
00a04328 : JC 0x00a0432f
00a0432a : MOV EAX,dword ptr [EAX + 0x4]
00a0432d : JMP 0x00a04332
00a0432f : ADD EAX,0x4
00a04332 : MOV ECX,dword ptr [EBP + 0xc]
00a04335 : PUSH ECX
00a04336 : PUSH EAX
00a04337 : LEA ESI,[EBP + 0xfffffe6c]
00a0433d : CALL 0x00404750
00a04342 : ADD ESP,0x8
00a04345 : MOV byte ptr [EBP + -0x4],0x8
00a04349 : MOV ECX,dword ptr [EBP + 0x10]
00a0434c : PUSH -0x1
00a0434e : PUSH 0x0
00a04350 : PUSH EAX
00a04351 : CALL 0x00405c30
00a04356 : MOV byte ptr [EBP + -0x4],BL
00a04359 : MOV ECX,ESI
00a0435b : CALL 0x00406560
00a04360 : MOV byte ptr [EBP + -0x4],0x6
00a04364 : LEA ECX,[EBP + 0xffffff30]
00a0436a : CALL 0x00406560
00a0436f : MOV dword ptr [EBP + -0x4],0xffffffff
00a04376 : LEA ECX,[EBP + -0x28]
00a04379 : JMP 0x00a04492
00a0437e : PUSH 0xca907c
00a04383 : LEA ECX,[EBP + -0x60]
00a04386 : CALL 0x00406460
00a0438b : MOV dword ptr [EBP + -0x4],0x9
00a04392 : MOV ECX,dword ptr [0x0172491c]
00a04398 : LEA EDX,[EBP + -0x60]
00a0439b : PUSH EDX
00a0439c : LEA EDI,[EBP + 0xfffffec0]
00a043a2 : CALL 0x0081d120
00a043a7 : MOV BL,0xa
00a043a9 : MOV byte ptr [EBP + -0x4],BL
00a043ac : CMP dword ptr [EAX + 0x18],0x8
00a043b0 : JC 0x00a043b7
00a043b2 : MOV EAX,dword ptr [EAX + 0x4]
00a043b5 : JMP 0x00a043ba
00a043b7 : ADD EAX,0x4
00a043ba : MOV ECX,dword ptr [EBP + 0xc]
00a043bd : PUSH ECX
00a043be : PUSH EAX
00a043bf : LEA ESI,[EBP + 0xfffffef8]
00a043c5 : CALL 0x00404750
00a043ca : ADD ESP,0x8
00a043cd : MOV byte ptr [EBP + -0x4],0xb
00a043d1 : MOV ECX,dword ptr [EBP + 0x10]
00a043d4 : PUSH -0x1
00a043d6 : PUSH 0x0
00a043d8 : PUSH EAX
00a043d9 : CALL 0x00405c30
00a043de : MOV byte ptr [EBP + -0x4],BL
00a043e1 : MOV ECX,ESI
00a043e3 : CALL 0x00406560
00a043e8 : MOV byte ptr [EBP + -0x4],0x9
00a043ec : LEA ECX,[EBP + 0xfffffec0]
00a043f2 : CALL 0x00406560
00a043f7 : MOV dword ptr [EBP + -0x4],0xffffffff
00a043fe : LEA ECX,[EBP + -0x60]
00a04401 : JMP 0x00a04492
00a04406 : PUSH 0xca90b0
00a0440b : LEA ECX,[EBP + 0xffffff68]
00a04411 : CALL 0x00406460
00a04416 : MOV dword ptr [EBP + -0x4],0xc
00a0441d : MOV ECX,dword ptr [0x0172491c]
00a04423 : LEA EDX,[EBP + 0xffffff68]
00a04429 : PUSH EDX
00a0442a : LEA EDI,[EBP + 0xfffffe50]
00a04430 : CALL 0x0081d120
00a04435 : MOV BL,0xd
00a04437 : MOV byte ptr [EBP + -0x4],BL
00a0443a : CMP dword ptr [EAX + 0x18],0x8
00a0443e : JC 0x00a04445
00a04440 : MOV EAX,dword ptr [EAX + 0x4]
00a04443 : JMP 0x00a04448
00a04445 : ADD EAX,0x4
00a04448 : MOV ECX,dword ptr [EBP + 0xc]
00a0444b : PUSH ECX
00a0444c : PUSH EAX
00a0444d : LEA ESI,[EBP + 0xfffffe88]
00a04453 : CALL 0x00404750
00a04458 : ADD ESP,0x8
00a0445b : MOV byte ptr [EBP + -0x4],0xe
00a0445f : MOV ECX,dword ptr [EBP + 0x10]
00a04462 : PUSH -0x1
00a04464 : PUSH 0x0
00a04466 : PUSH EAX
00a04467 : CALL 0x00405c30
00a0446c : MOV byte ptr [EBP + -0x4],BL
00a0446f : MOV ECX,ESI
00a04471 : CALL 0x00406560
00a04476 : MOV byte ptr [EBP + -0x4],0xc
00a0447a : LEA ECX,[EBP + 0xfffffe50]
00a04480 : CALL 0x00406560
00a04485 : MOV dword ptr [EBP + -0x4],0xffffffff
00a0448c : LEA ECX,[EBP + 0xffffff68]
00a04492 : CALL 0x00406560
00a04497 : MOV ECX,dword ptr [EBP + -0xc]
00a0449a : MOV dword ptr FS:[0x0],ECX
00a044a1 : POP ECX
00a044a2 : POP EDI
00a044a3 : POP ESI
00a044a4 : POP EBX
00a044a5 : MOV ESP,EBP
00a044a7 : POP EBP
00a044a8 : RET 0xc
