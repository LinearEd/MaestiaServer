PROGRAM  : Maestia.exe
FUNCTION : FUN_0055d220
ENTRY    : 0055d220
BODY     : [[0055d220, 0055d647]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055d220(undefined4 param_1,undefined4 param_2,char param_3)

{
  int *piVar1;
  char cVar2;
  undefined4 uVar3;
  int in_ECX;
  int *in_EDX;
  undefined1 *puVar4;
  char *pcVar5;
  int iVar6;
  int **ppiVar7;
  undefined *puVar8;
  undefined4 local_43c;
  undefined1 *local_438;
  undefined4 local_434;
  int *local_430;
  undefined4 local_42c;
  undefined4 local_428;
  int *local_424;
  int *local_420;
  int *local_41c;
  int local_418;
  undefined1 local_414 [4];
  undefined1 local_410 [1028];
  uint local_c;
  
  local_c = DAT_00d66fa0 ^ (uint)&local_43c;
  local_42c = param_1;
  if (in_ECX == 0) goto LAB_0055d633;
  iVar6 = *in_EDX;
  if (iVar6 != 1) {
    if (iVar6 == 3) {
      local_430 = (int *)FUN_0055c2b0();
      pcVar5 = "Movie resource: \"{0}\" {1} found, requires faux";
LAB_0055d2d6:
      local_438 = local_410;
      local_434 = 0x400;
      local_43c = 2;
      FUN_0055cff0(&local_43c,pcVar5,&local_42c,&local_430);
      FUN_0055c5d0(local_410);
      __security_check_cookie(local_c ^ (uint)&local_43c);
      return;
    }
    if (iVar6 == 2) {
      local_430 = (int *)FUN_0055c2b0();
      local_438 = local_410;
      local_43c = 2;
      local_434 = 0x400;
      FUN_0055cff0(&local_43c,
                   "Movie resource: \"{0}\" {1} ref found, requires FontLib/Map/Provider.",
                   &local_42c,&local_430);
      FUN_0055c5d0(local_410);
      __security_check_cookie(local_c ^ (uint)&local_43c);
      return;
    }
    local_430 = in_EDX;
    local_428 = FUN_0055c2b0();
    local_438 = local_410;
    local_43c = 2;
    local_434 = 0x400;
    FUN_0055cff0(&local_43c,"Movie resource: \"{0}\" {1} not found.",&local_42c,&local_428);
    FUN_0055c5d0(local_410);
    if (*in_EDX != 4) {
      if (*in_EDX != 5) {
        local_428 = FUN_0055c2b0();
        local_438 = local_410;
        local_43c = 2;
        local_434 = 0x400;
        FUN_0055cff0(&local_43c,"Imports       : \"{0}\" {1} not found.",&local_42c,&local_428);
        FUN_0055c5d0(local_410);
        local_420 = in_EDX + 1;
        if (((int *)*local_420 != (int *)0x0) && (*(int *)*local_420 != 0)) {
          FUN_0051b6e0();
          FUN_0055ce30(&local_41c);
          while (((iVar6 = local_418, piVar1 = local_41c, local_41c != (int *)0x0 &&
                  (*local_41c != 0)) && (local_418 <= *(int *)(*local_41c + 4)))) {
            uVar3 = FUN_0055ce30(&local_43c);
            cVar2 = FUN_0055c940(uVar3);
            if (cVar2 == '\0') {
              FUN_0051b950(&DAT_00b8c748,0xffffffff);
            }
            iVar6 = *piVar1 + 0x10 + iVar6 * 0xc;
            puVar8 = &DAT_00b8ba98;
            ppiVar7 = &local_420;
            puVar4 = local_414;
            FUN_0051c480(&DAT_00b8ba98);
            FUN_0051c710(puVar4,iVar6);
            uVar3 = FUN_0051c6e0(ppiVar7,puVar8);
            FUN_0051bd70(uVar3);
            FUN_0045b730();
            FUN_0045b730();
            FUN_0045b730();
            FUN_0055c900();
          }
          local_438 = local_410;
          local_43c = 2;
          local_434 = 0x400;
          FUN_0053e0a0(&local_43c,"              : {0}.",&local_428);
          FUN_0055c5d0(local_410);
          FUN_0045b730();
          in_EDX = local_430;
        }
        local_424 = (int *)FUN_0055c2b0();
        local_43c = 2;
        local_434 = 0x400;
        if (*in_EDX != 6) {
          local_438 = local_410;
          FUN_0055cff0(&local_43c,"Exported      : \"{0}\" {1} not found.",&local_42c,&local_424);
          goto LAB_0055d29d;
        }
        ppiVar7 = &local_424;
        pcVar5 = "Exported      : \"{0}\" {1} found.";
        goto LAB_0055d286;
      }
      if (param_3 != '\0') {
        local_430 = (int *)FUN_0055c2b0();
        pcVar5 = "Imports       : \"{0}\" {1} import delegates to font library.";
        goto LAB_0055d2d6;
      }
    }
    local_424 = (int *)FUN_0055c2b0();
    local_438 = local_410;
    local_43c = 2;
    local_434 = 0x400;
    FUN_0055d080(&local_43c,"Imports       : \"{0}\" {1} found in \"{2}\".",&local_42c,&local_424,
                 in_EDX + 2);
    FUN_0055c5d0(local_410);
LAB_0055d633:
    __security_check_cookie(local_c ^ (uint)&local_43c);
    return;
  }
  local_430 = (int *)FUN_0055c2b0();
  ppiVar7 = &local_430;
  pcVar5 = "Movie resource: \"{0}\" {1} found.";
LAB_0055d286:
  local_434 = 0x400;
  local_43c = 2;
  local_438 = local_410;
  FUN_0055cff0(&local_43c,pcVar5,&local_42c,ppiVar7);
LAB_0055d29d:
  FUN_0055c5d0(local_410);
  __security_check_cookie(local_c ^ (uint)&local_43c);
  return;
}



============================================================
DISASSEMBLY
============================================================
0055d220 : PUSH EBP
0055d221 : MOV EBP,ESP
0055d223 : AND ESP,0xfffffff8
0055d226 : SUB ESP,0x434
0055d22c : MOV EAX,[0x00d66fa0]
0055d231 : XOR EAX,ESP
0055d233 : MOV dword ptr [ESP + 0x430],EAX
0055d23a : MOV EAX,dword ptr [EBP + 0x8]
0055d23d : PUSH EBX
0055d23e : PUSH ESI
0055d23f : PUSH EDI
0055d240 : MOV EDI,ECX
0055d242 : MOV EBX,EDX
0055d244 : MOV dword ptr [ESP + 0x1c],EAX
0055d248 : MOV dword ptr [ESP + 0x18],EBX
0055d24c : TEST EDI,EDI
0055d24e : JZ 0x0055d633
0055d254 : MOV EAX,dword ptr [EBX]
0055d256 : CMP EAX,0x1
0055d259 : JNZ 0x0055d2ba
0055d25b : MOV EAX,dword ptr [EBP + 0xc]
0055d25e : CALL 0x0055c2b0
0055d263 : LEA EDX,[ESP + 0x18]
0055d267 : MOV dword ptr [ESP + 0x18],EAX
0055d26b : PUSH EDX
0055d26c : LEA EAX,[ESP + 0x20]
0055d270 : PUSH EAX
0055d271 : MOV dword ptr [ESP + 0x14],0x2
0055d279 : MOV dword ptr [ESP + 0x1c],0x400
0055d281 : PUSH 0xb8c84c
0055d286 : LEA ECX,[ESP + 0x44]
0055d28a : MOV dword ptr [ESP + 0x1c],ECX
0055d28e : LEA ECX,[ESP + 0x18]
0055d292 : PUSH ECX
0055d293 : CALL 0x0055cff0
0055d298 : LEA EDX,[ESP + 0x48]
0055d29c : PUSH EDX
0055d29d : CALL 0x0055c5d0
0055d2a2 : ADD ESP,0x14
0055d2a5 : POP EDI
0055d2a6 : POP ESI
0055d2a7 : POP EBX
0055d2a8 : MOV ECX,dword ptr [ESP + 0x430]
0055d2af : XOR ECX,ESP
0055d2b1 : CALL 0x00633e6b
0055d2b6 : MOV ESP,EBP
0055d2b8 : POP EBP
0055d2b9 : RET
0055d2ba : CMP EAX,0x3
0055d2bd : JNZ 0x0055d31e
0055d2bf : MOV EAX,dword ptr [EBP + 0xc]
0055d2c2 : CALL 0x0055c2b0
0055d2c7 : LEA ECX,[ESP + 0x18]
0055d2cb : PUSH ECX
0055d2cc : LEA EDX,[ESP + 0x20]
0055d2d0 : PUSH EDX
0055d2d1 : PUSH 0xb8c81c
0055d2d6 : MOV dword ptr [ESP + 0x24],EAX
0055d2da : LEA EAX,[ESP + 0x44]
0055d2de : MOV dword ptr [ESP + 0x1c],EAX
0055d2e2 : LEA EAX,[ESP + 0x18]
0055d2e6 : PUSH EAX
0055d2e7 : MOV dword ptr [ESP + 0x24],0x400
0055d2ef : MOV dword ptr [ESP + 0x1c],0x2
0055d2f7 : CALL 0x0055cff0
0055d2fc : LEA ECX,[ESP + 0x48]
0055d300 : PUSH ECX
0055d301 : CALL 0x0055c5d0
0055d306 : ADD ESP,0x14
0055d309 : POP EDI
0055d30a : POP ESI
0055d30b : POP EBX
0055d30c : MOV ECX,dword ptr [ESP + 0x430]
0055d313 : XOR ECX,ESP
0055d315 : CALL 0x00633e6b
0055d31a : MOV ESP,EBP
0055d31c : POP EBP
0055d31d : RET
0055d31e : CMP EAX,0x2
0055d321 : JNZ 0x0055d382
0055d323 : MOV EAX,dword ptr [EBP + 0xc]
0055d326 : CALL 0x0055c2b0
0055d32b : MOV dword ptr [ESP + 0x18],EAX
0055d32f : LEA EAX,[ESP + 0x18]
0055d333 : PUSH EAX
0055d334 : LEA ECX,[ESP + 0x20]
0055d338 : LEA EDX,[ESP + 0x3c]
0055d33c : PUSH ECX
0055d33d : MOV dword ptr [ESP + 0x18],EDX
0055d341 : LEA EDX,[ESP + 0x14]
0055d345 : PUSH 0xb8c7d8
0055d34a : PUSH EDX
0055d34b : MOV dword ptr [ESP + 0x1c],0x2
0055d353 : MOV dword ptr [ESP + 0x24],0x400
0055d35b : CALL 0x0055cff0
0055d360 : LEA EAX,[ESP + 0x48]
0055d364 : PUSH EAX
0055d365 : CALL 0x0055c5d0
0055d36a : ADD ESP,0x14
0055d36d : POP EDI
0055d36e : POP ESI
0055d36f : POP EBX
0055d370 : MOV ECX,dword ptr [ESP + 0x430]
0055d377 : XOR ECX,ESP
0055d379 : CALL 0x00633e6b
0055d37e : MOV ESP,EBP
0055d380 : POP EBP
0055d381 : RET
0055d382 : MOV ESI,dword ptr [EBP + 0xc]
0055d385 : MOV EAX,ESI
0055d387 : CALL 0x0055c2b0
0055d38c : LEA EDX,[ESP + 0x20]
0055d390 : PUSH EDX
0055d391 : MOV dword ptr [ESP + 0x24],EAX
0055d395 : LEA EAX,[ESP + 0x20]
0055d399 : LEA ECX,[ESP + 0x3c]
0055d39d : PUSH EAX
0055d39e : MOV dword ptr [ESP + 0x18],ECX
0055d3a2 : LEA ECX,[ESP + 0x14]
0055d3a6 : PUSH 0xb8c7b0
0055d3ab : PUSH ECX
0055d3ac : MOV dword ptr [ESP + 0x1c],0x2
0055d3b4 : MOV dword ptr [ESP + 0x24],0x400
0055d3bc : CALL 0x0055cff0
0055d3c1 : LEA EDX,[ESP + 0x48]
0055d3c5 : PUSH EDX
0055d3c6 : CALL 0x0055c5d0
0055d3cb : MOV EAX,dword ptr [EBX]
0055d3cd : ADD ESP,0x14
0055d3d0 : CMP EAX,0x4
0055d3d3 : JZ 0x0055d5e6
0055d3d9 : CMP EAX,0x5
0055d3dc : JNZ 0x0055d403
0055d3de : CMP byte ptr [EBP + 0x10],0x0
0055d3e2 : JZ 0x0055d5e6
0055d3e8 : MOV EAX,ESI
0055d3ea : CALL 0x0055c2b0
0055d3ef : LEA ECX,[ESP + 0x18]
0055d3f3 : PUSH ECX
0055d3f4 : LEA EDX,[ESP + 0x20]
0055d3f8 : PUSH EDX
0055d3f9 : PUSH 0xb8c774
0055d3fe : JMP 0x0055d2d6
0055d403 : MOV EAX,ESI
0055d405 : CALL 0x0055c2b0
0055d40a : MOV dword ptr [ESP + 0x20],EAX
0055d40e : LEA EAX,[ESP + 0x20]
0055d412 : PUSH EAX
0055d413 : LEA ECX,[ESP + 0x20]
0055d417 : LEA EDX,[ESP + 0x3c]
0055d41b : PUSH ECX
0055d41c : MOV dword ptr [ESP + 0x18],EDX
0055d420 : LEA EDX,[ESP + 0x14]
0055d424 : PUSH 0xb8c74c
0055d429 : PUSH EDX
0055d42a : MOV dword ptr [ESP + 0x1c],0x2
0055d432 : MOV dword ptr [ESP + 0x24],0x400
0055d43a : CALL 0x0055cff0
0055d43f : LEA EAX,[ESP + 0x48]
0055d443 : PUSH EAX
0055d444 : CALL 0x0055c5d0
0055d449 : LEA EAX,[EBX + 0x4]
0055d44c : MOV dword ptr [ESP + 0x3c],EAX
0055d450 : MOV EAX,dword ptr [EAX]
0055d452 : ADD ESP,0x14
0055d455 : TEST EAX,EAX
0055d457 : JZ 0x0055d587
0055d45d : CMP dword ptr [EAX],0x0
0055d460 : JBE 0x0055d587
0055d466 : LEA ECX,[ESP + 0x20]
0055d46a : CALL 0x0051b6e0
0055d46f : LEA ECX,[ESP + 0x2c]
0055d473 : PUSH ECX
0055d474 : MOV ECX,dword ptr [ESP + 0x2c]
0055d478 : CALL 0x0055ce30
0055d47d : LEA ECX,[ECX]
0055d480 : MOV EBX,dword ptr [ESP + 0x2c]
0055d484 : TEST EBX,EBX
0055d486 : JZ 0x0055d541
0055d48c : CMP dword ptr [EBX],0x0
0055d48f : JZ 0x0055d541
0055d495 : MOV EDX,dword ptr [EBX]
0055d497 : MOV ESI,dword ptr [ESP + 0x30]
0055d49b : CMP ESI,dword ptr [EDX + 0x4]
0055d49e : JG 0x0055d53e
0055d4a4 : MOV ECX,dword ptr [ESP + 0x18]
0055d4a8 : LEA EAX,[ESP + 0xc]
0055d4ac : PUSH EAX
0055d4ad : ADD ECX,0x4
0055d4b0 : CALL 0x0055ce30
0055d4b5 : PUSH EAX
0055d4b6 : LEA ECX,[ESP + 0x30]
0055d4ba : CALL 0x0055c940
0055d4bf : TEST AL,AL
0055d4c1 : JNZ 0x0055d4d3
0055d4c3 : PUSH -0x1
0055d4c5 : PUSH 0xb8c748
0055d4ca : LEA ECX,[ESP + 0x28]
0055d4ce : CALL 0x0051b950
0055d4d3 : MOV EDX,dword ptr [EBX]
0055d4d5 : LEA ECX,[ESI + ESI*0x2]
0055d4d8 : LEA EAX,[EDX + ECX*0x4 + 0x10]
0055d4dc : PUSH 0xb8ba98
0055d4e1 : LEA ECX,[ESP + 0x2c]
0055d4e5 : PUSH ECX
0055d4e6 : PUSH EAX
0055d4e7 : LEA EDX,[ESP + 0x40]
0055d4eb : PUSH EDX
0055d4ec : PUSH 0xb8ba98
0055d4f1 : LEA ECX,[ESP + 0x38]
0055d4f5 : CALL 0x0051c480
0055d4fa : MOV ECX,EAX
0055d4fc : CALL 0x0051c710
0055d501 : MOV ECX,EAX
0055d503 : CALL 0x0051c6e0
0055d508 : PUSH EAX
0055d509 : LEA ECX,[ESP + 0x24]
0055d50d : CALL 0x0051bd70
0055d512 : LEA ECX,[ESP + 0x28]
0055d516 : CALL 0x0045b730
0055d51b : LEA ECX,[ESP + 0x34]
0055d51f : CALL 0x0045b730
0055d524 : LEA ECX,[ESP + 0x24]
0055d528 : CALL 0x0045b730
0055d52d : LEA ECX,[ESP + 0x2c]
0055d531 : CALL 0x0055c900
0055d536 : MOV ESI,dword ptr [EBP + 0xc]
0055d539 : JMP 0x0055d480
0055d53e : MOV ESI,dword ptr [EBP + 0xc]
0055d541 : LEA ECX,[ESP + 0x20]
0055d545 : PUSH ECX
0055d546 : LEA EDX,[ESP + 0x10]
0055d54a : LEA EAX,[ESP + 0x3c]
0055d54e : PUSH 0xb8c730
0055d553 : PUSH EDX
0055d554 : MOV dword ptr [ESP + 0x18],0x2
0055d55c : MOV dword ptr [ESP + 0x1c],EAX
0055d560 : MOV dword ptr [ESP + 0x20],0x400
0055d568 : CALL 0x0053e0a0
0055d56d : LEA EAX,[ESP + 0x44]
0055d571 : PUSH EAX
0055d572 : CALL 0x0055c5d0
0055d577 : ADD ESP,0x10
0055d57a : LEA ECX,[ESP + 0x20]
0055d57e : CALL 0x0045b730
0055d583 : MOV EBX,dword ptr [ESP + 0x18]
0055d587 : MOV EAX,ESI
0055d589 : CALL 0x0055c2b0
0055d58e : CMP dword ptr [EBX],0x6
0055d591 : MOV dword ptr [ESP + 0x24],EAX
0055d595 : MOV dword ptr [ESP + 0xc],0x2
0055d59d : MOV dword ptr [ESP + 0x14],0x400
0055d5a5 : JNZ 0x0055d5bb
0055d5a7 : LEA EDX,[ESP + 0x24]
0055d5ab : PUSH EDX
0055d5ac : LEA EAX,[ESP + 0x20]
0055d5b0 : PUSH EAX
0055d5b1 : PUSH 0xb8c70c
0055d5b6 : JMP 0x0055d286
0055d5bb : LEA ECX,[ESP + 0x24]
0055d5bf : PUSH ECX
0055d5c0 : LEA EDX,[ESP + 0x20]
0055d5c4 : LEA EAX,[ESP + 0x3c]
0055d5c8 : PUSH EDX
0055d5c9 : MOV dword ptr [ESP + 0x18],EAX
0055d5cd : LEA EAX,[ESP + 0x14]
0055d5d1 : PUSH 0xb8c6e4
0055d5d6 : PUSH EAX
0055d5d7 : CALL 0x0055cff0
0055d5dc : LEA ECX,[ESP + 0x48]
0055d5e0 : PUSH ECX
0055d5e1 : JMP 0x0055d29d
0055d5e6 : MOV EAX,ESI
0055d5e8 : CALL 0x0055c2b0
0055d5ed : MOV dword ptr [ESP + 0x24],EAX
0055d5f1 : ADD EBX,0x8
0055d5f4 : PUSH EBX
0055d5f5 : LEA EAX,[ESP + 0x28]
0055d5f9 : PUSH EAX
0055d5fa : LEA ECX,[ESP + 0x24]
0055d5fe : LEA EDX,[ESP + 0x40]
0055d602 : PUSH ECX
0055d603 : MOV dword ptr [ESP + 0x1c],EDX
0055d607 : LEA EDX,[ESP + 0x18]
0055d60b : PUSH 0xb8c6b8
0055d610 : PUSH EDX
0055d611 : MOV dword ptr [ESP + 0x20],0x2
0055d619 : MOV dword ptr [ESP + 0x28],0x400
0055d621 : CALL 0x0055d080
0055d626 : LEA EAX,[ESP + 0x4c]
0055d62a : PUSH EAX
0055d62b : CALL 0x0055c5d0
0055d630 : ADD ESP,0x18
0055d633 : MOV ECX,dword ptr [ESP + 0x43c]
0055d63a : POP EDI
0055d63b : POP ESI
0055d63c : POP EBX
0055d63d : XOR ECX,ESP
0055d63f : CALL 0x00633e6b
0055d644 : MOV ESP,EBP
0055d646 : POP EBP
0055d647 : RET
