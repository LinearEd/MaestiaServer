PROGRAM  : Maestia.exe
FUNCTION : FUN_00680b50
ENTRY    : 00680b50
BODY     : [[00680b50, 00680d32]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00680b50(void)

{
  ushort uVar1;
  GRefCountImpl *this;
  int iVar2;
  uint *puVar3;
  LONG LVar4;
  byte bVar5;
  int in_ECX;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 *unaff_retaddr;
  uint3 uVar9;
  undefined4 local_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 uStack_14;
  undefined4 uStack_10;
  undefined4 uStack_c;
  
  if (*(int *)(in_ECX + 4) != 0) {
    this = (GRefCountImpl *)(**(code **)(*(int *)(*(int *)(in_ECX + 4) + 8) + 0xc))();
    if (this != (GRefCountImpl *)0x0) {
      uVar8 = 0xffffffff;
      uStack_18 = 0xffffffff;
      uStack_20 = 0xffffffff;
      uStack_1c = 0xffffffff;
      uStack_c = 0xffffffff;
      uStack_10 = 0xffffffff;
      local_24 = 0xffffffff;
      uVar6 = 0xffffffff;
      uVar7 = 0xffffffff;
      uStack_14 = 0xffffffff;
      if ((*(byte *)(unaff_retaddr + 10) & 1) != 0) {
        uStack_18 = *unaff_retaddr;
      }
      uVar1 = *(ushort *)(unaff_retaddr + 10);
      bVar5 = (byte)uVar1;
      if ((bVar5 >> 1 & 1) != 0) {
        uStack_20 = unaff_retaddr[1];
      }
      if ((bVar5 >> 3 & 1) != 0) {
        uStack_1c = unaff_retaddr[3];
      }
      uVar9 = (uint3)((uint)unaff_retaddr >> 8);
      if ((bVar5 >> 4 & 1) != 0) {
        uVar8 = unaff_retaddr[4];
      }
      if ((bVar5 >> 5 & 1) != 0) {
        local_24 = unaff_retaddr[5];
      }
      if ((bVar5 >> 2 & 1) != 0) {
        uVar6 = unaff_retaddr[2];
      }
      if ((bVar5 >> 4 & 1) != 0) {
        uVar8 = unaff_retaddr[4];
      }
      if ((bVar5 >> 6 & 1) != 0) {
        uVar7 = unaff_retaddr[8];
      }
      if ((char)bVar5 < '\0') {
        uStack_c = unaff_retaddr[6];
      }
      if ((uVar1 >> 8 & 1) != 0) {
        uStack_10 = unaff_retaddr[7];
      }
      if ((uVar1 >> 9 & 1) != 0) {
        uStack_14 = unaff_retaddr[9];
      }
      iVar2 = FUN_0051b1a0();
      if (iVar2 != 0) {
        puVar3 = (uint *)FUN_0051c6e0(&stack0x00000000,".SetCandidateListProps");
        FUN_00678eb0(uRam0000001f,(*puVar3 & 0xfffffffc) + 8,"%d %d %d %d %d %d %d",uStack_18,
                     uStack_1c,uStack_20,uVar8,uVar7,uVar6,local_24);
        iVar2 = (uint)uVar9 * 0x100;
        LVar4 = InterlockedExchangeAdd((LONG *)(iVar2 + 4),-1);
        if (LVar4 == 1) {
          FUN_00515cf0(iVar2);
        }
        puVar3 = (uint *)FUN_0051c6e0(&stack0x00000000,".SetReadingWindowProps");
        FUN_00678eb0(uRam0000001f,(*puVar3 & 0xfffffffc) + 8,"%d %d %d",uStack_c,uStack_10,uStack_14
                    );
        iVar2 = (uint)uVar9 * 0x100;
        LVar4 = InterlockedExchangeAdd((LONG *)(iVar2 + 4),-1);
        if (LVar4 == 1) {
          FUN_00515cf0(iVar2);
        }
      }
      GRefCountImpl::Release(this);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00680b50 : SUB ESP,0x24
00680b53 : MOV EAX,dword ptr [ECX + 0x4]
00680b56 : MOV dword ptr [ESP],ECX
00680b59 : TEST EAX,EAX
00680b5b : JZ 0x00680d2d
00680b61 : LEA ECX,[EAX + 0x8]
00680b64 : MOV EAX,dword ptr [ECX]
00680b66 : MOV EDX,dword ptr [EAX + 0xc]
00680b69 : PUSH 0x1b
00680b6b : CALL EDX
00680b6d : MOV dword ptr [ESP + 0x20],EAX
00680b71 : TEST EAX,EAX
00680b73 : JZ 0x00680d2d
00680b79 : MOV EAX,dword ptr [ESP + 0x28]
00680b7d : PUSH EBX
00680b7e : PUSH EBP
00680b7f : PUSH ESI
00680b80 : OR ESI,0xffffffff
00680b83 : TEST byte ptr [EAX + 0x28],0x1
00680b87 : PUSH EDI
00680b88 : MOV dword ptr [ESP + 0x20],ESI
00680b8c : MOV dword ptr [ESP + 0x18],ESI
00680b90 : MOV dword ptr [ESP + 0x1c],ESI
00680b94 : MOV dword ptr [ESP + 0x2c],ESI
00680b98 : MOV dword ptr [ESP + 0x28],ESI
00680b9c : MOV dword ptr [ESP + 0x14],ESI
00680ba0 : MOV EBX,ESI
00680ba2 : MOV EBP,ESI
00680ba4 : MOV dword ptr [ESP + 0x24],ESI
00680ba8 : JZ 0x00680bb0
00680baa : MOV ECX,dword ptr [EAX]
00680bac : MOV dword ptr [ESP + 0x20],ECX
00680bb0 : MOVZX ECX,word ptr [EAX + 0x28]
00680bb4 : MOV DL,CL
00680bb6 : SHR DL,0x1
00680bb8 : TEST DL,0x1
00680bbb : JZ 0x00680bc4
00680bbd : MOV EDX,dword ptr [EAX + 0x4]
00680bc0 : MOV dword ptr [ESP + 0x18],EDX
00680bc4 : MOV DL,CL
00680bc6 : SHR DL,0x3
00680bc9 : TEST DL,0x1
00680bcc : JZ 0x00680bd5
00680bce : MOV EDX,dword ptr [EAX + 0xc]
00680bd1 : MOV dword ptr [ESP + 0x1c],EDX
00680bd5 : MOV DL,CL
00680bd7 : SHR DL,0x4
00680bda : AND DL,0x1
00680bdd : MOV byte ptr [ESP + 0x38],DL
00680be1 : JZ 0x00680be6
00680be3 : MOV ESI,dword ptr [EAX + 0x10]
00680be6 : MOV DL,CL
00680be8 : SHR DL,0x5
00680beb : TEST DL,0x1
00680bee : JZ 0x00680bf7
00680bf0 : MOV EDX,dword ptr [EAX + 0x14]
00680bf3 : MOV dword ptr [ESP + 0x14],EDX
00680bf7 : MOV DL,CL
00680bf9 : SHR DL,0x2
00680bfc : TEST DL,0x1
00680bff : JZ 0x00680c04
00680c01 : MOV EBX,dword ptr [EAX + 0x8]
00680c04 : CMP byte ptr [ESP + 0x38],0x0
00680c09 : JZ 0x00680c0e
00680c0b : MOV ESI,dword ptr [EAX + 0x10]
00680c0e : MOV DL,CL
00680c10 : SHR DL,0x6
00680c13 : TEST DL,0x1
00680c16 : JZ 0x00680c1b
00680c18 : MOV EBP,dword ptr [EAX + 0x20]
00680c1b : MOV DL,CL
00680c1d : SHR DL,0x7
00680c20 : TEST DL,0x1
00680c23 : JZ 0x00680c2c
00680c25 : MOV EDX,dword ptr [EAX + 0x18]
00680c28 : MOV dword ptr [ESP + 0x2c],EDX
00680c2c : MOV EDX,ECX
00680c2e : SHR EDX,0x8
00680c31 : TEST DL,0x1
00680c34 : JZ 0x00680c3d
00680c36 : MOV EDX,dword ptr [EAX + 0x1c]
00680c39 : MOV dword ptr [ESP + 0x28],EDX
00680c3d : SHR ECX,0x9
00680c40 : TEST CL,0x1
00680c43 : JZ 0x00680c4c
00680c45 : MOV EAX,dword ptr [EAX + 0x24]
00680c48 : MOV dword ptr [ESP + 0x24],EAX
00680c4c : MOV EDI,dword ptr [ESP + 0x10]
00680c50 : ADD EDI,0x8
00680c53 : MOV ECX,EDI
00680c55 : CALL 0x0051b1a0
00680c5a : TEST EAX,EAX
00680c5c : JZ 0x00680d20
00680c62 : PUSH 0xbd80c8
00680c67 : LEA ECX,[ESP + 0x3c]
00680c6b : PUSH ECX
00680c6c : MOV ECX,EDI
00680c6e : CALL 0x0051c6e0
00680c73 : MOV EDX,dword ptr [ESP + 0x14]
00680c77 : MOV ECX,dword ptr [ESP + 0x18]
00680c7b : PUSH EDX
00680c7c : MOV EDX,dword ptr [ESP + 0x20]
00680c80 : PUSH EBX
00680c81 : PUSH EBP
00680c82 : PUSH ESI
00680c83 : PUSH ECX
00680c84 : MOV ECX,dword ptr [ESP + 0x34]
00680c88 : PUSH EDX
00680c89 : MOV EDX,dword ptr [EAX]
00680c8b : MOV EAX,dword ptr [ESP + 0x28]
00680c8f : PUSH ECX
00680c90 : MOV ECX,dword ptr [EAX + 0x4]
00680c93 : AND EDX,0xfffffffc
00680c96 : PUSH 0xbd80b0
00680c9b : ADD EDX,0x8
00680c9e : PUSH EDX
00680c9f : PUSH ECX
00680ca0 : CALL 0x00678eb0
00680ca5 : MOV ESI,dword ptr [ESP + 0x60]
00680ca9 : MOV EBX,dword ptr [0x00b851cc]
00680caf : ADD ESP,0x28
00680cb2 : AND ESI,0xfffffffc
00680cb5 : PUSH -0x1
00680cb7 : LEA EDX,[ESI + 0x4]
00680cba : PUSH EDX
00680cbb : CALL EBX
00680cbd : SUB EAX,0x1
00680cc0 : JNZ 0x00680cc8
00680cc2 : PUSH ESI
00680cc3 : CALL 0x00515cf0
00680cc8 : PUSH 0xbd8098
00680ccd : LEA EAX,[ESP + 0x3c]
00680cd1 : PUSH EAX
00680cd2 : MOV ECX,EDI
00680cd4 : CALL 0x0051c6e0
00680cd9 : MOV ECX,dword ptr [ESP + 0x24]
00680cdd : MOV EDX,dword ptr [ESP + 0x28]
00680ce1 : PUSH ECX
00680ce2 : MOV ECX,dword ptr [ESP + 0x30]
00680ce6 : PUSH EDX
00680ce7 : MOV EDX,dword ptr [EAX]
00680ce9 : MOV EAX,dword ptr [ESP + 0x18]
00680ced : PUSH ECX
00680cee : MOV ECX,dword ptr [EAX + 0x4]
00680cf1 : AND EDX,0xfffffffc
00680cf4 : PUSH 0xbd7fd8
00680cf9 : ADD EDX,0x8
00680cfc : PUSH EDX
00680cfd : PUSH ECX
00680cfe : CALL 0x00678eb0
00680d03 : MOV ESI,dword ptr [ESP + 0x50]
00680d07 : ADD ESP,0x18
00680d0a : AND ESI,0xfffffffc
00680d0d : PUSH -0x1
00680d0f : LEA EDX,[ESI + 0x4]
00680d12 : PUSH EDX
00680d13 : CALL EBX
00680d15 : SUB EAX,0x1
00680d18 : JNZ 0x00680d20
00680d1a : PUSH ESI
00680d1b : CALL 0x00515cf0
00680d20 : MOV ECX,dword ptr [ESP + 0x30]
00680d24 : CALL 0x004ff7e0
00680d29 : POP EDI
00680d2a : POP ESI
00680d2b : POP EBP
00680d2c : POP EBX
00680d2d : ADD ESP,0x24
00680d30 : RET 0x4
