PROGRAM  : Maestia.exe
FUNCTION : FUN_005c4f60
ENTRY    : 005c4f60
BODY     : [[005c4f60, 005c5001]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c4f60(void)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  int in_ECX;
  int *piVar5;
  int *piVar6;
  
  FUN_0054f630();
  iVar1 = *(int *)(in_ECX + 0x34);
  piVar6 = (int *)(in_ECX + 0x34);
  if (iVar1 == 0) {
    uVar4 = 0;
    piVar6 = (int *)0x0;
  }
  else {
    uVar4 = 0;
    piVar5 = (int *)(iVar1 + 8);
    do {
      if (*piVar5 != -2) break;
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar4 <= *(uint *)(iVar1 + 4));
  }
  do {
    do {
      if (((piVar6 == (int *)0x0) || (iVar1 = *piVar6, iVar1 == 0)) ||
         (*(int *)(iVar1 + 4) < (int)uVar4)) {
        return;
      }
      puVar2 = *(undefined4 **)(uVar4 * 0x10 + 0x14 + iVar1);
      puVar2[2] = puVar2[2] + -1;
      if ((puVar2[2] & 0x70000000) != 0x10000000) {
        puVar2[2] = puVar2[2] & 0x9fffffff | 0x10000000;
        (**(code **)*puVar2)(1);
      }
      uVar3 = *(uint *)(*piVar6 + 4);
    } while (((int)uVar3 < (int)uVar4) || (uVar4 = uVar4 + 1, uVar3 < uVar4));
    piVar5 = (int *)(uVar4 * 0x10 + 8 + *piVar6);
    do {
      if (*piVar5 != -2) break;
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar4 <= uVar3);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005c4f60 : PUSH ESI
005c4f61 : PUSH EDI
005c4f62 : MOV ESI,ECX
005c4f64 : CALL 0x0054f630
005c4f69 : MOV ECX,dword ptr [ESI + 0x34]
005c4f6c : ADD ESI,0x34
005c4f6f : TEST ECX,ECX
005c4f71 : JNZ 0x005c4f77
005c4f73 : XOR EAX,EAX
005c4f75 : JMP 0x005c4f8f
005c4f77 : MOV EDX,dword ptr [ECX + 0x4]
005c4f7a : XOR EAX,EAX
005c4f7c : ADD ECX,0x8
005c4f7f : NOP
005c4f80 : CMP dword ptr [ECX],-0x2
005c4f83 : JNZ 0x005c4f8d
005c4f85 : INC EAX
005c4f86 : ADD ECX,0x10
005c4f89 : CMP EAX,EDX
005c4f8b : JBE 0x005c4f80
005c4f8d : MOV ECX,ESI
005c4f8f : MOV EDI,ECX
005c4f91 : MOV ESI,EAX
005c4f93 : TEST EDI,EDI
005c4f95 : JZ 0x005c4fff
005c4f97 : MOV EAX,dword ptr [EDI]
005c4f99 : TEST EAX,EAX
005c4f9b : JZ 0x005c4fff
005c4f9d : CMP ESI,dword ptr [EAX + 0x4]
005c4fa0 : JG 0x005c4fff
005c4fa2 : MOV ECX,ESI
005c4fa4 : SHL ECX,0x4
005c4fa7 : MOV ECX,dword ptr [ECX + EAX*0x1 + 0x14]
005c4fab : DEC dword ptr [ECX + 0x8]
005c4fae : MOV EAX,dword ptr [ECX + 0x8]
005c4fb1 : MOV EDX,EAX
005c4fb3 : AND EDX,0x70000000
005c4fb9 : CMP EDX,0x10000000
005c4fbf : JZ 0x005c4fd6
005c4fc1 : AND EAX,0x9fffffff
005c4fc6 : OR EAX,0x10000000
005c4fcb : MOV dword ptr [ECX + 0x8],EAX
005c4fce : MOV EAX,dword ptr [ECX]
005c4fd0 : MOV EDX,dword ptr [EAX]
005c4fd2 : PUSH 0x1
005c4fd4 : CALL EDX
005c4fd6 : MOV ECX,dword ptr [EDI]
005c4fd8 : MOV EAX,dword ptr [ECX + 0x4]
005c4fdb : CMP ESI,EAX
005c4fdd : JG 0x005c4f93
005c4fdf : INC ESI
005c4fe0 : CMP ESI,EAX
005c4fe2 : JA 0x005c4f93
005c4fe4 : MOV EDX,ESI
005c4fe6 : SHL EDX,0x4
005c4fe9 : LEA ECX,[EDX + ECX*0x1 + 0x8]
005c4fed : LEA ECX,[ECX]
005c4ff0 : CMP dword ptr [ECX],-0x2
005c4ff3 : JNZ 0x005c4f93
005c4ff5 : INC ESI
005c4ff6 : ADD ECX,0x10
005c4ff9 : CMP ESI,EAX
005c4ffb : JBE 0x005c4ff0
005c4ffd : JMP 0x005c4f93
005c4fff : POP EDI
005c5000 : POP ESI
005c5001 : RET
