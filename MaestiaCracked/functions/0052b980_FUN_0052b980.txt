PROGRAM  : Maestia.exe
FUNCTION : FUN_0052b980
ENTRY    : 0052b980
BODY     : [[0052b980, 0052ba6a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052b980(void)

{
  uint uVar1;
  double dVar2;
  uint uVar3;
  uint *in_ECX;
  uint local_10;
  undefined4 local_8;
  uint local_4;
  
  in_ECX[7] = in_ECX[7] + 1;
  in_ECX[0xd] = in_ECX[0xd] + 1;
  uVar1 = *in_ECX;
  uVar3 = in_ECX[9];
  if (in_ECX[9] <= uVar1) {
    uVar3 = uVar1;
  }
  in_ECX[9] = uVar3;
  if (((in_ECX[0xf] != 0) && (in_ECX[8] < uVar1)) ||
     ((in_ECX[0x10] != 0 && ((in_ECX[0x10] <= in_ECX[7] && (in_ECX[0xf] < uVar1)))))) {
    local_4 = 0;
    local_8 = 0;
    FUN_00503ad0(&local_8);
    if (in_ECX[0xf] < local_4) {
      in_ECX[9] = uVar1;
      in_ECX[8] = in_ECX[0xf];
    }
    uVar3 = uVar1 - local_4;
    if (uVar1 - local_4 < in_ECX[8]) {
      uVar3 = in_ECX[8];
    }
    dVar2 = (double)(int)uVar3;
    in_ECX[8] = uVar3;
    if ((int)uVar3 < 0) {
      dVar2 = dVar2 + 4294967296.0;
    }
    local_10 = (uint)(longlong)ROUND(dVar2 * 0.7);
    if (in_ECX[9] < local_10) {
      in_ECX[8] = local_10;
    }
    in_ECX[0xe] = in_ECX[0xd];
    in_ECX[7] = 0;
    in_ECX[0xc] = in_ECX[9];
    in_ECX[0xb] = local_4;
  }
  in_ECX[10] = uVar1;
  return;
}



============================================================
DISASSEMBLY
============================================================
0052b980 : SUB ESP,0x14
0052b983 : PUSH ESI
0052b984 : MOV ESI,ECX
0052b986 : MOV EAX,0x1
0052b98b : ADD dword ptr [ESI + 0x1c],EAX
0052b98e : ADD dword ptr [ESI + 0x34],EAX
0052b991 : MOV EAX,dword ptr [ESI + 0x24]
0052b994 : MOV EDX,dword ptr [ESI + 0x1c]
0052b997 : PUSH EDI
0052b998 : MOV EDI,dword ptr [ESI]
0052b99a : CMP EDI,EAX
0052b99c : JC 0x0052b9a0
0052b99e : MOV EAX,EDI
0052b9a0 : MOV ECX,dword ptr [ESI + 0x3c]
0052b9a3 : MOV dword ptr [ESI + 0x24],EAX
0052b9a6 : TEST ECX,ECX
0052b9a8 : JZ 0x0052b9af
0052b9aa : CMP EDI,dword ptr [ESI + 0x20]
0052b9ad : JA 0x0052b9ca
0052b9af : MOV EAX,dword ptr [ESI + 0x40]
0052b9b2 : TEST EAX,EAX
0052b9b4 : JZ 0x0052ba62
0052b9ba : CMP EDX,EAX
0052b9bc : JC 0x0052ba62
0052b9c2 : CMP EDI,ECX
0052b9c4 : JBE 0x0052ba62
0052b9ca : LEA EAX,[ESP + 0x14]
0052b9ce : PUSH EAX
0052b9cf : MOV ECX,ESI
0052b9d1 : MOV dword ptr [ESP + 0x1c],0x0
0052b9d9 : MOV dword ptr [ESP + 0x18],0x0
0052b9e1 : CALL 0x00503ad0
0052b9e6 : MOV EAX,dword ptr [ESI + 0x3c]
0052b9e9 : MOV ECX,dword ptr [ESP + 0x18]
0052b9ed : CMP ECX,EAX
0052b9ef : JBE 0x0052b9f7
0052b9f1 : MOV dword ptr [ESI + 0x24],EDI
0052b9f4 : MOV dword ptr [ESI + 0x20],EAX
0052b9f7 : MOV EAX,EDI
0052b9f9 : SUB EAX,ECX
0052b9fb : MOV ECX,dword ptr [ESI + 0x20]
0052b9fe : CMP EAX,ECX
0052ba00 : JNC 0x0052ba04
0052ba02 : MOV EAX,ECX
0052ba04 : MOV dword ptr [ESP + 0xc],EAX
0052ba08 : FILD dword ptr [ESP + 0xc]
0052ba0c : MOV dword ptr [ESI + 0x20],EAX
0052ba0f : TEST EAX,EAX
0052ba11 : JGE 0x0052ba19
0052ba13 : FADD double ptr [0x00cdf6f8]
0052ba19 : FMUL double ptr [0x00cdf378]
0052ba1f : FNSTCW word ptr [ESP + 0xa]
0052ba23 : MOVZX EAX,word ptr [ESP + 0xa]
0052ba28 : OR EAX,0xc00
0052ba2d : MOV dword ptr [ESP + 0xc],EAX
0052ba31 : FLDCW word ptr [ESP + 0xc]
0052ba35 : FISTP qword ptr [ESP + 0xc]
0052ba39 : MOV ECX,dword ptr [ESP + 0xc]
0052ba3d : MOV EAX,dword ptr [ESI + 0x24]
0052ba40 : FLDCW word ptr [ESP + 0xa]
0052ba44 : CMP EAX,ECX
0052ba46 : JNC 0x0052ba4b
0052ba48 : MOV dword ptr [ESI + 0x20],ECX
0052ba4b : MOV ECX,dword ptr [ESI + 0x34]
0052ba4e : MOV EDX,dword ptr [ESP + 0x18]
0052ba52 : MOV dword ptr [ESI + 0x38],ECX
0052ba55 : MOV dword ptr [ESI + 0x1c],0x0
0052ba5c : MOV dword ptr [ESI + 0x30],EAX
0052ba5f : MOV dword ptr [ESI + 0x2c],EDX
0052ba62 : MOV dword ptr [ESI + 0x28],EDI
0052ba65 : POP EDI
0052ba66 : POP ESI
0052ba67 : ADD ESP,0x14
0052ba6a : RET
