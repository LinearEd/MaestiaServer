PROGRAM  : Maestia.exe
FUNCTION : FUN_00903280
ENTRY    : 00903280
BODY     : [[00903280, 0090358e]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00903457) */

void FUN_00903280(int param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  undefined4 uVar5;
  int iVar6;
  byte bVar7;
  undefined4 *puVar8;
  uint local_18;
  undefined4 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar6 = (int)param_2;
  iVar2 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5263f;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  param_2 = *(undefined4 **)((int)param_2 + 8);
  if ((uint)param_2 >> 0x10 == 0x143e) {
    return;
  }
  ExceptionList = &local_10;
  FUN_004437f0(&param_2);
  if ((local_14 == *(undefined4 **)(iVar2 + 0x44)) ||
     (puVar1 = (undefined4 *)local_14[4], param_2 = puVar1, puVar1 == (undefined4 *)0x0))
  goto LAB_00903573;
  if ((*(int *)(iVar6 + 0xc) == 0) && (*(char *)(iVar6 + 0x12) != '\0')) {
    piVar4 = (int *)FUN_00a1ba80();
    if (piVar4 == (int *)0x0) {
      ExceptionList = local_10;
      return;
    }
    (**(code **)(*piVar4 + 900))(*(undefined4 *)(DAT_00da93ec + 0x24c),*(undefined4 *)(iVar6 + 4));
    ExceptionList = local_10;
    return;
  }
  if (*(char *)(iVar6 + 0x10) == '\0') {
    puVar8 = *(undefined4 **)(param_1 + 0x70);
    if (puVar8 != *(undefined4 **)(param_1 + 0x74)) {
      do {
        if (*(int *)(iVar6 + 4) == *(int *)*puVar8) {
          ((int *)*puVar8)[4] = *(int *)(iVar6 + 0x18);
          FUN_00901220(uVar3);
          ExceptionList = local_10;
          return;
        }
        puVar8 = puVar8 + 1;
      } while (puVar8 != *(undefined4 **)(param_1 + 0x74));
    }
  }
  else {
    puVar8 = *(undefined4 **)(param_1 + 0x60);
    if (puVar8 != *(undefined4 **)(param_1 + 100)) {
      do {
        if (*(int *)(iVar6 + 4) == *(int *)*puVar8) {
          ((int *)*puVar8)[4] = *(int *)(iVar6 + 0x18);
          FUN_00901220(uVar3);
          ExceptionList = local_10;
          return;
        }
        puVar8 = puVar8 + 1;
      } while (puVar8 != *(undefined4 **)(param_1 + 100));
    }
  }
  puVar8 = (undefined4 *)0x0;
  local_14 = (undefined4 *)FUN_006f0760(0x658,".\\Gui\\AvaGuiTarget.cpp",0x3cd,0);
  local_8 = 0;
  if (local_14 != (undefined4 *)0x0) {
    puVar8 = (undefined4 *)FUN_00425260(local_14);
  }
  local_8 = 0xffffffff;
  *puVar8 = *(undefined4 *)(iVar6 + 4);
  puVar8[1] = *(undefined4 *)(iVar6 + 8);
  local_14 = puVar8;
  uVar5 = FUN_00404350(puVar1 + 0x20);
  local_8 = 1;
  FUN_00405eb0(uVar5,0,0xffffffff);
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  puVar8[4] = *(undefined4 *)(iVar6 + 0x18);
  puVar8[2] = *(undefined4 *)(iVar6 + 0xc);
  timeGetTime();
  uVar5 = DAT_0172491c;
  *(bool *)(puVar8 + 6) = *(char *)(iVar6 + 0x12) == '\0';
  uVar5 = FUN_00824a20(uVar5,0);
  local_8 = 2;
  FUN_00405eb0(uVar5,0,0xffffffff);
  local_8 = 0xffffffff;
  uVar3 = 0;
  if (*(char *)(iVar6 + 0x10) == '\0') {
    iVar2 = *(int *)(param_1 + 0x70);
    iVar6 = param_1 + 0x6c;
    bVar7 = (byte)(*(int *)(param_1 + 0x74) - *(int *)(param_1 + 0x70) >> 2);
    if (iVar2 == 0) {
      uVar3 = 0;
    }
    else {
      uVar3 = *(int *)(param_1 + 0x78) - iVar2 >> 2;
    }
    param_2 = *(undefined4 **)(param_1 + 0x74);
    if (uVar3 <= (uint)((int)param_2 - iVar2 >> 2)) goto LAB_0090355b;
    *param_2 = puVar8;
    *(undefined4 **)(param_1 + 0x74) = param_2 + 1;
  }
  else {
    iVar2 = *(int *)(param_1 + 0x60);
    iVar6 = param_1 + 0x5c;
    bVar7 = (byte)(*(int *)(param_1 + 100) - *(int *)(param_1 + 0x60) >> 2);
    if (iVar2 != 0) {
      uVar3 = *(int *)(param_1 + 0x68) - iVar2 >> 2;
    }
    param_2 = *(undefined4 **)(param_1 + 100);
    if ((uint)((int)param_2 - iVar2 >> 2) < uVar3) {
      *param_2 = puVar8;
      *(undefined4 **)(param_1 + 100) = param_2 + 1;
    }
    else {
LAB_0090355b:
      FUN_0042fe80(iVar6,param_2,&local_14);
    }
  }
  if (0x17 < bVar7) {
    ExceptionList = local_10;
    return;
  }
  FUN_00901220();
LAB_00903573:
  FUN_00900bd0();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00903280 : PUSH EBP
00903281 : MOV EBP,ESP
00903283 : PUSH -0x1
00903285 : PUSH 0xb5263f
0090328a : MOV EAX,FS:[0x0]
00903290 : PUSH EAX
00903291 : SUB ESP,0x24
00903294 : PUSH EBX
00903295 : PUSH ESI
00903296 : PUSH EDI
00903297 : MOV EAX,[0x00d66fa0]
0090329c : XOR EAX,EBP
0090329e : PUSH EAX
0090329f : LEA EAX,[EBP + -0xc]
009032a2 : MOV FS:[0x0],EAX
009032a8 : MOV EBX,dword ptr [EBP + 0xc]
009032ab : MOV EAX,dword ptr [EBX + 0x8]
009032ae : MOV ECX,EAX
009032b0 : SHR ECX,0x10
009032b3 : CMP ECX,0x143e
009032b9 : JZ 0x0090357b
009032bf : MOV ESI,dword ptr [0x00d7c54c]
009032c5 : LEA EDX,[EBP + 0xc]
009032c8 : MOV dword ptr [EBP + 0xc],EAX
009032cb : PUSH EDX
009032cc : LEA ECX,[ESI + 0x40]
009032cf : LEA EAX,[EBP + -0x10]
009032d2 : CALL 0x004437f0
009032d7 : MOV ESI,dword ptr [ESI + 0x44]
009032da : MOV EAX,dword ptr [EBP + -0x10]
009032dd : CMP EAX,ESI
009032df : JZ 0x00903573
009032e5 : MOV ESI,dword ptr [EAX + 0x10]
009032e8 : MOV dword ptr [EBP + 0xc],ESI
009032eb : TEST ESI,ESI
009032ed : JZ 0x00903573
009032f3 : CMP dword ptr [EBX + 0xc],0x0
009032f7 : JNZ 0x00903349
009032f9 : CMP byte ptr [EBX + 0x12],0x0
009032fd : JZ 0x00903349
009032ff : MOV EDI,dword ptr [0x00da93ec]
00903305 : MOV ESI,dword ptr [EDI + 0x24c]
0090330b : CALL 0x00a1ba80
00903310 : TEST EAX,EAX
00903312 : JZ 0x0090357b
00903318 : MOV ECX,dword ptr [EBX + 0x4]
0090331b : MOV EDX,dword ptr [EAX]
0090331d : MOV EDX,dword ptr [EDX + 0x384]
00903323 : PUSH ECX
00903324 : MOV ECX,dword ptr [0x00da93ec]
0090332a : MOV ECX,dword ptr [ECX + 0x24c]
00903330 : PUSH ECX
00903331 : MOV ECX,EAX
00903333 : CALL EDX
00903335 : MOV ECX,dword ptr [EBP + -0xc]
00903338 : MOV dword ptr FS:[0x0],ECX
0090333f : POP ECX
00903340 : POP EDI
00903341 : POP ESI
00903342 : POP EBX
00903343 : MOV ESP,EBP
00903345 : POP EBP
00903346 : RET 0x8
00903349 : CMP byte ptr [EBX + 0x10],0x0
0090334d : MOV ECX,dword ptr [EBP + 0x8]
00903350 : JZ 0x009034b5
00903356 : MOV EAX,dword ptr [ECX + 0x60]
00903359 : MOV EDX,dword ptr [ECX + 0x64]
0090335c : CMP EAX,EDX
0090335e : JZ 0x00903377
00903360 : MOV EDI,dword ptr [EBX + 0x4]
00903363 : MOV ESI,dword ptr [EAX]
00903365 : CMP EDI,dword ptr [ESI]
00903367 : JZ 0x00903494
0090336d : ADD EAX,0x4
00903370 : CMP EAX,EDX
00903372 : JNZ 0x00903363
00903374 : MOV ESI,dword ptr [EBP + 0xc]
00903377 : XOR EDI,EDI
00903379 : PUSH EDI
0090337a : PUSH 0x3cd
0090337f : PUSH 0xc63110
00903384 : PUSH 0x658
00903389 : CALL 0x006f0760
0090338e : ADD ESP,0x10
00903391 : MOV dword ptr [EBP + -0x10],EAX
00903394 : MOV dword ptr [EBP + -0x4],EDI
00903397 : CMP EAX,EDI
00903399 : JZ 0x009033a3
0090339b : PUSH EAX
0090339c : CALL 0x00425260
009033a1 : MOV EDI,EAX
009033a3 : MOV dword ptr [EBP + -0x4],0xffffffff
009033aa : MOV EDX,dword ptr [EBX + 0x4]
009033ad : MOV dword ptr [EDI],EDX
009033af : MOV EAX,dword ptr [EBX + 0x8]
009033b2 : SUB ESI,-0x80
009033b5 : PUSH ESI
009033b6 : LEA ESI,[EBP + -0x2c]
009033b9 : MOV dword ptr [EBP + -0x10],EDI
009033bc : MOV dword ptr [EDI + 0x4],EAX
009033bf : CALL 0x00404350
009033c4 : ADD ESP,0x4
009033c7 : MOV dword ptr [EBP + -0x4],0x1
009033ce : PUSH -0x1
009033d0 : PUSH 0x0
009033d2 : LEA ECX,[EDI + 0x1c]
009033d5 : PUSH EAX
009033d6 : CALL 0x00405eb0
009033db : MOV dword ptr [EBP + -0x4],0xffffffff
009033e2 : CMP dword ptr [EBP + -0x14],0x8
009033e6 : JC 0x009033f0
009033e8 : MOV ECX,dword ptr [EBP + -0x28]
009033eb : CALL 0x006f04e0
009033f0 : XOR EAX,EAX
009033f2 : MOV word ptr [EBP + -0x28],AX
009033f6 : MOV EAX,dword ptr [EBX + 0x18]
009033f9 : MOV dword ptr [EDI + 0x10],EAX
009033fc : MOV EAX,dword ptr [EBX + 0xc]
009033ff : MOV dword ptr [EBP + -0x14],0x7
00903406 : MOV dword ptr [EBP + -0x18],0x0
0090340d : MOV dword ptr [EDI + 0x8],EAX
00903410 : CALL dword ptr [0x00b85598]
00903416 : CMP byte ptr [EBX + 0x12],0x0
0090341a : MOV EAX,[0x0172491c]
0090341f : MOV EDX,dword ptr [EBP + 0xc]
00903422 : SETZ CL
00903425 : PUSH 0x0
00903427 : ADD EDX,0x18
0090342a : PUSH EAX
0090342b : LEA ESI,[EBP + -0x2c]
0090342e : MOV byte ptr [EDI + 0x18],CL
00903431 : CALL 0x00824a20
00903436 : MOV dword ptr [EBP + -0x4],0x2
0090343d : PUSH -0x1
0090343f : PUSH 0x0
00903441 : LEA ECX,[EDI + 0x38]
00903444 : PUSH EAX
00903445 : CALL 0x00405eb0
0090344a : MOV dword ptr [EBP + -0x4],0xffffffff
00903451 : CMP dword ptr [EBP + -0x14],0x8
00903455 : JC 0x0090345f
00903457 : MOV ECX,dword ptr [EBP + -0x28]
0090345a : CALL 0x006f04e0
0090345f : MOV EAX,dword ptr [EBP + 0x8]
00903462 : XOR ECX,ECX
00903464 : MOV dword ptr [EBP + -0x14],0x7
0090346b : MOV dword ptr [EBP + -0x18],0x0
00903472 : MOV word ptr [EBP + -0x28],CX
00903476 : CMP byte ptr [EBX + 0x10],CL
00903479 : JZ 0x00903520
0090347f : MOV EBX,dword ptr [EAX + 0x64]
00903482 : SUB EBX,dword ptr [EAX + 0x60]
00903485 : MOV EDX,dword ptr [EAX + 0x60]
00903488 : ADD EAX,0x5c
0090348b : SAR EBX,0x2
0090348e : TEST EDX,EDX
00903490 : JNZ 0x009034fc
00903492 : JMP 0x00903504
00903494 : MOV EDX,dword ptr [EBX + 0x18]
00903497 : MOV EAX,ESI
00903499 : MOV dword ptr [EAX + 0x10],EDX
0090349c : CALL 0x00901220
009034a1 : MOV ECX,dword ptr [EBP + -0xc]
009034a4 : MOV dword ptr FS:[0x0],ECX
009034ab : POP ECX
009034ac : POP EDI
009034ad : POP ESI
009034ae : POP EBX
009034af : MOV ESP,EBP
009034b1 : POP EBP
009034b2 : RET 0x8
009034b5 : MOV EAX,dword ptr [ECX + 0x70]
009034b8 : MOV ECX,dword ptr [ECX + 0x74]
009034bb : CMP EAX,ECX
009034bd : JZ 0x00903377
009034c3 : MOV EDX,dword ptr [EBX + 0x4]
009034c6 : MOV EDI,dword ptr [EAX]
009034c8 : CMP EDX,dword ptr [EDI]
009034ca : JZ 0x009034d8
009034cc : ADD EAX,0x4
009034cf : CMP EAX,ECX
009034d1 : JNZ 0x009034c6
009034d3 : JMP 0x00903377
009034d8 : MOV ECX,dword ptr [EBX + 0x18]
009034db : MOV EAX,EDI
009034dd : MOV dword ptr [EAX + 0x10],ECX
009034e0 : MOV ECX,dword ptr [EBP + 0x8]
009034e3 : CALL 0x00901220
009034e8 : MOV ECX,dword ptr [EBP + -0xc]
009034eb : MOV dword ptr FS:[0x0],ECX
009034f2 : POP ECX
009034f3 : POP EDI
009034f4 : POP ESI
009034f5 : POP EBX
009034f6 : MOV ESP,EBP
009034f8 : POP EBP
009034f9 : RET 0x8
009034fc : MOV ECX,dword ptr [EAX + 0xc]
009034ff : SUB ECX,EDX
00903501 : SAR ECX,0x2
00903504 : MOV ESI,dword ptr [EAX + 0x8]
00903507 : MOV dword ptr [EBP + 0xc],ESI
0090350a : SUB ESI,EDX
0090350c : SAR ESI,0x2
0090350f : CMP ESI,ECX
00903511 : MOV ECX,dword ptr [EBP + 0xc]
00903514 : JNC 0x0090355b
00903516 : MOV dword ptr [ECX],EDI
00903518 : ADD ECX,0x4
0090351b : MOV dword ptr [EAX + 0x8],ECX
0090351e : JMP 0x00903566
00903520 : MOV EBX,dword ptr [EAX + 0x74]
00903523 : SUB EBX,dword ptr [EAX + 0x70]
00903526 : MOV EDX,dword ptr [EAX + 0x70]
00903529 : ADD EAX,0x6c
0090352c : SAR EBX,0x2
0090352f : TEST EDX,EDX
00903531 : JNZ 0x00903537
00903533 : XOR ECX,ECX
00903535 : JMP 0x0090353f
00903537 : MOV ECX,dword ptr [EAX + 0xc]
0090353a : SUB ECX,EDX
0090353c : SAR ECX,0x2
0090353f : MOV ESI,dword ptr [EAX + 0x8]
00903542 : MOV dword ptr [EBP + 0xc],ESI
00903545 : SUB ESI,EDX
00903547 : SAR ESI,0x2
0090354a : CMP ESI,ECX
0090354c : MOV ECX,dword ptr [EBP + 0xc]
0090354f : JNC 0x0090355b
00903551 : MOV dword ptr [ECX],EDI
00903553 : ADD ECX,0x4
00903556 : MOV dword ptr [EAX + 0x8],ECX
00903559 : JMP 0x00903566
0090355b : LEA EDX,[EBP + -0x10]
0090355e : PUSH EDX
0090355f : PUSH ECX
00903560 : PUSH EAX
00903561 : CALL 0x0042fe80
00903566 : CMP BL,0x18
00903569 : JNC 0x0090357b
0090356b : MOV ECX,dword ptr [EBP + 0x8]
0090356e : CALL 0x00901220
00903573 : MOV ECX,dword ptr [EBP + 0x8]
00903576 : CALL 0x00900bd0
0090357b : MOV ECX,dword ptr [EBP + -0xc]
0090357e : MOV dword ptr FS:[0x0],ECX
00903585 : POP ECX
00903586 : POP EDI
00903587 : POP ESI
00903588 : POP EBX
00903589 : MOV ESP,EBP
0090358b : POP EBP
0090358c : RET 0x8
