PROGRAM  : Maestia.exe
FUNCTION : FUN_00588650
ENTRY    : 00588650
BODY     : [[00588650, 005886c6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00588650(int param_1,char param_2)

{
  undefined4 *puVar1;
  GRefCountImpl *this;
  int *piVar2;
  int in_ECX;
  
  if ((*(int *)(in_ECX + 0xc) != 0) && (param_1 != 0)) {
    this = *(GRefCountImpl **)(*(int *)(param_1 + 0x1c) + 0xc);
    if (this != (GRefCountImpl *)0x0) {
      GRefCountImpl::AddRef(this);
    }
    piVar2 = *(int **)(in_ECX + 0xc);
    FUN_005627b0(piVar2,piVar2[1] + 1);
    puVar1 = (undefined4 *)(*piVar2 + -4 + piVar2[1] * 4);
    if (puVar1 != (undefined4 *)0x0) {
      if (this != (GRefCountImpl *)0x0) {
        GRefCountImpl::AddRef(this);
      }
      *puVar1 = this;
    }
    if (this != (GRefCountImpl *)0x0) {
      FUN_00524240();
    }
    if ((param_2 != '\0') && (*(int *)(param_1 + 8) != 0)) {
      (**(code **)(**(int **)(param_1 + 8) + 8))(param_1);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00588650 : PUSH ESI
00588651 : MOV ESI,ECX
00588653 : CMP dword ptr [ESI + 0xc],0x0
00588657 : JZ 0x005886c3
00588659 : PUSH EBX
0058865a : MOV EBX,dword ptr [ESP + 0xc]
0058865e : TEST EBX,EBX
00588660 : JZ 0x005886c2
00588662 : MOV EAX,dword ptr [EBX + 0x1c]
00588665 : PUSH EDI
00588666 : MOV EDI,dword ptr [EAX + 0xc]
00588669 : TEST EDI,EDI
0058866b : JZ 0x00588674
0058866d : MOV ECX,EDI
0058866f : CALL 0x00523dd0
00588674 : MOV ESI,dword ptr [ESI + 0xc]
00588677 : MOV ECX,dword ptr [ESI + 0x4]
0058867a : INC ECX
0058867b : PUSH ECX
0058867c : PUSH ESI
0058867d : MOV ECX,ESI
0058867f : CALL 0x005627b0
00588684 : MOV EDX,dword ptr [ESI + 0x4]
00588687 : MOV EAX,dword ptr [ESI]
00588689 : LEA ESI,[EAX + EDX*0x4 + -0x4]
0058868d : TEST ESI,ESI
0058868f : JZ 0x0058869e
00588691 : TEST EDI,EDI
00588693 : JZ 0x0058869c
00588695 : MOV ECX,EDI
00588697 : CALL 0x00523dd0
0058869c : MOV dword ptr [ESI],EDI
0058869e : TEST EDI,EDI
005886a0 : JZ 0x005886a9
005886a2 : MOV ECX,EDI
005886a4 : CALL 0x00524240
005886a9 : CMP byte ptr [ESP + 0x14],0x0
005886ae : POP EDI
005886af : JZ 0x005886c2
005886b1 : CMP dword ptr [EBX + 0x8],0x0
005886b5 : JZ 0x005886c2
005886b7 : MOV ECX,dword ptr [EBX + 0x8]
005886ba : MOV EDX,dword ptr [ECX]
005886bc : MOV EAX,dword ptr [EDX + 0x8]
005886bf : PUSH EBX
005886c0 : CALL EAX
005886c2 : POP EBX
005886c3 : POP ESI
005886c4 : RET 0x8
