PROGRAM  : Maestia.exe
FUNCTION : FUN_00842810
ENTRY    : 00842810
BODY     : [[00842810, 00842a70]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00842810(void)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  undefined4 uVar6;
  int *unaff_EDI;
  wchar_t *pwVar7;
  int local_14;
  int local_10;
  int local_c;
  int local_8;
  
  if (*unaff_EDI != 0) {
    iVar3 = unaff_EDI[0x10] - unaff_EDI[0xf] >> 2;
    local_8 = 0;
    if (0 < iVar3) {
      do {
        iVar4 = DAT_00d7c54c;
        pcVar1 = *(char **)(unaff_EDI[0xf] + local_8 * 4);
        if (pcVar1 != (char *)0x0) {
          iVar2 = unaff_EDI[0x16];
          if (iVar2 == 0) {
            local_c = *unaff_EDI;
            FUN_004437f0(&local_c);
            if ((local_10 != *(int *)(iVar4 + 0x44)) &&
               (piVar5 = *(int **)(local_10 + 0x10), piVar5 != (int *)0x0)) {
              iVar4 = (**(code **)(*piVar5 + 0x3c))();
              if (iVar4 != 0) {
                if (((*pcVar1 == '\0') || (iVar4 = *(int *)(pcVar1 + 4), 0x41 < iVar4)) &&
                   ((iVar4 = *(int *)(pcVar1 + 4), iVar4 < 0x42 || (0x51 < iVar4)))) {
                  pwVar7 = 
                  L"AvaPassiveSkillData::UpdatePassiveData PASSIVE_SKILL pPassiveData->nType Value range Over%d"
                  ;
LAB_00842a1e:
                  FUN_008018d0(pwVar7,iVar4);
                }
                else {
LAB_008428ab:
                  *(int *)(pcVar1 + 8) =
                       piVar5[(uint)*(byte *)((int)unaff_EDI + 0xb) + iVar4 * 0x16 + 0x9d];
                }
              }
            }
          }
          else if (iVar2 == 1) {
            local_c = *unaff_EDI;
            FUN_004437f0(&local_c);
            if ((local_14 != *(int *)(iVar4 + 0x44)) &&
               (piVar5 = *(int **)(local_14 + 0x10), piVar5 != (int *)0x0)) {
              iVar4 = (**(code **)(*piVar5 + 0x3c))();
              if (iVar4 != 0) {
                if (((*pcVar1 == '\0') || (iVar4 = *(int *)(pcVar1 + 4), 0x41 < iVar4)) &&
                   ((iVar4 = *(int *)(pcVar1 + 4), iVar4 < 0x42 || (0x4a < iVar4)))) {
                  pwVar7 = 
                  L"AvaPassiveSkillData::UpdatePassiveData PASSIVE_STATUS pPassiveData->nType value range over %d"
                  ;
                  goto LAB_00842a1e;
                }
                goto LAB_008428ab;
              }
            }
          }
          else if (iVar2 == 2) {
            piVar5 = (int *)FUN_004049b0(*unaff_EDI);
            if (piVar5 != (int *)0x0) {
              iVar4 = (**(code **)(*piVar5 + 0x3c))();
              if (iVar4 != 0) {
                if ((*pcVar1 == '\0') || (0x41 < *(int *)(pcVar1 + 4))) {
                  iVar4 = *(int *)(pcVar1 + 4);
                  if ((iVar4 < 0x42) || (0x43 < iVar4)) {
                    pwVar7 = 
                    L"AvaPassiveSkillData::UpdatePassiveData PASSIVE_PC pPassiveData->nType Value range over %d"
                    ;
                    goto LAB_00842a1e;
                  }
                  *(int *)(pcVar1 + 8) =
                       piVar5[(uint)*(byte *)((int)unaff_EDI + 0xb) + iVar4 * 0x16 + 0x9d];
                }
                else {
                  FUN_00841590(pcVar1);
                  FUN_009c3a10(*(undefined4 *)(pcVar1 + 4),-*(int *)(pcVar1 + 8));
                  if (pcVar1[1] == '\0') {
                    iVar4 = piVar5[(uint)*(byte *)((int)unaff_EDI + 0xb) +
                                   *(int *)(pcVar1 + 4) * 0x16 + 0x9d];
                    *(int *)(pcVar1 + 8) = iVar4;
                    *(int *)(pcVar1 + 0xc) = iVar4;
                  }
                  else {
                    iVar4 = piVar5[(uint)*(byte *)((int)unaff_EDI + 0xb) +
                                   *(int *)(pcVar1 + 4) * 0x16 + 0x9d];
                    *(int *)(pcVar1 + 8) = iVar4;
                    if (*(int *)(pcVar1 + 4) - 3U < 0xf) {
                      uVar6 = FUN_00840d10(iVar4);
                      *(undefined4 *)(pcVar1 + 0xc) = uVar6;
                    }
                    else {
                      pcVar1[0xc] = '\0';
                      pcVar1[0xd] = '\0';
                      pcVar1[0xe] = '\0';
                      pcVar1[0xf] = '\0';
                    }
                  }
                }
              }
            }
          }
        }
        local_8 = local_8 + 1;
      } while (local_8 < iVar3);
    }
    iVar3 = unaff_EDI[0x16];
    if (iVar3 == 0) {
      FUN_00840ec0(unaff_EDI);
      return;
    }
    if (iVar3 == 1) {
      FUN_00842790(unaff_EDI);
      return;
    }
    if (iVar3 == 2) {
      FUN_00841a80(unaff_EDI);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00842810 : PUSH EBP
00842811 : MOV EBP,ESP
00842813 : SUB ESP,0x18
00842816 : CMP dword ptr [EDI],0x0
00842819 : PUSH EBX
0084281a : PUSH ESI
0084281b : JZ 0x00842a6b
00842821 : MOV EAX,dword ptr [EDI + 0x40]
00842824 : SUB EAX,dword ptr [EDI + 0x3c]
00842827 : XOR ECX,ECX
00842829 : SAR EAX,0x2
0084282c : MOV dword ptr [EBP + -0x14],EAX
0084282f : MOV dword ptr [EBP + -0x4],ECX
00842832 : TEST EAX,EAX
00842834 : JLE 0x00842a3c
0084283a : MOV EAX,dword ptr [EDI + 0x3c]
0084283d : MOV ESI,dword ptr [EAX + ECX*0x4]
00842840 : TEST ESI,ESI
00842842 : JZ 0x00842a2c
00842848 : MOV EAX,dword ptr [EDI + 0x58]
0084284b : TEST EAX,EAX
0084284d : JNZ 0x008428ce
0084284f : MOV ECX,dword ptr [EDI]
00842851 : MOV EBX,dword ptr [0x00d7c54c]
00842857 : LEA EDX,[EBP + -0x8]
0084285a : MOV dword ptr [EBP + -0x8],ECX
0084285d : PUSH EDX
0084285e : LEA ECX,[EBX + 0x40]
00842861 : LEA EAX,[EBP + -0xc]
00842864 : CALL 0x004437f0
00842869 : MOV EAX,dword ptr [EBP + -0xc]
0084286c : CMP EAX,dword ptr [EBX + 0x44]
0084286f : JZ 0x00842a2c
00842875 : MOV EBX,dword ptr [EAX + 0x10]
00842878 : TEST EBX,EBX
0084287a : JZ 0x00842a2c
00842880 : MOV EAX,dword ptr [EBX]
00842882 : MOV EDX,dword ptr [EAX + 0x3c]
00842885 : MOV ECX,EBX
00842887 : CALL EDX
00842889 : TEST EAX,EAX
0084288b : JZ 0x00842a2c
00842891 : CMP byte ptr [ESI],0x0
00842894 : JZ 0x0084289e
00842896 : MOV EAX,dword ptr [ESI + 0x4]
00842899 : CMP EAX,0x42
0084289c : JL 0x008428ab
0084289e : MOV EAX,dword ptr [ESI + 0x4]
008428a1 : CMP EAX,0x42
008428a4 : JL 0x008428c3
008428a6 : CMP EAX,0x52
008428a9 : JGE 0x008428c3
008428ab : MOVZX ECX,byte ptr [EDI + 0xb]
008428af : IMUL EAX,EAX,0x16
008428b2 : ADD ECX,EAX
008428b4 : MOV EDX,dword ptr [EBX + ECX*0x4 + 0x274]
008428bb : MOV dword ptr [ESI + 0x8],EDX
008428be : JMP 0x00842a2c
008428c3 : PUSH EAX
008428c4 : PUSH 0xc3a408
008428c9 : JMP 0x00842a1e
008428ce : CMP EAX,0x1
008428d1 : JNZ 0x0084293e
008428d3 : MOV EAX,dword ptr [EDI]
008428d5 : MOV EBX,dword ptr [0x00d7c54c]
008428db : LEA ECX,[EBP + -0x8]
008428de : MOV dword ptr [EBP + -0x8],EAX
008428e1 : PUSH ECX
008428e2 : LEA ECX,[EBX + 0x40]
008428e5 : LEA EAX,[EBP + -0x10]
008428e8 : CALL 0x004437f0
008428ed : MOV EAX,dword ptr [EBP + -0x10]
008428f0 : CMP EAX,dword ptr [EBX + 0x44]
008428f3 : JZ 0x00842a2c
008428f9 : MOV EBX,dword ptr [EAX + 0x10]
008428fc : TEST EBX,EBX
008428fe : JZ 0x00842a2c
00842904 : MOV EDX,dword ptr [EBX]
00842906 : MOV EAX,dword ptr [EDX + 0x3c]
00842909 : MOV ECX,EBX
0084290b : CALL EAX
0084290d : TEST EAX,EAX
0084290f : JZ 0x00842a2c
00842915 : CMP byte ptr [ESI],0x0
00842918 : JZ 0x00842922
0084291a : MOV EAX,dword ptr [ESI + 0x4]
0084291d : CMP EAX,0x42
00842920 : JL 0x008428ab
00842922 : MOV EAX,dword ptr [ESI + 0x4]
00842925 : CMP EAX,0x42
00842928 : JL 0x00842933
0084292a : CMP EAX,0x4b
0084292d : JL 0x008428ab
00842933 : PUSH EAX
00842934 : PUSH 0xc3a4c0
00842939 : JMP 0x00842a1e
0084293e : CMP EAX,0x2
00842941 : JNZ 0x00842a2c
00842947 : MOV EAX,dword ptr [EDI]
00842949 : PUSH EAX
0084294a : CALL 0x004049b0
0084294f : MOV EBX,EAX
00842951 : ADD ESP,0x4
00842954 : TEST EBX,EBX
00842956 : JZ 0x00842a2c
0084295c : MOV EDX,dword ptr [EBX]
0084295e : MOV EAX,dword ptr [EDX + 0x3c]
00842961 : MOV ECX,EBX
00842963 : CALL EAX
00842965 : TEST EAX,EAX
00842967 : JZ 0x00842a2c
0084296d : CMP byte ptr [ESI],0x0
00842970 : JZ 0x008429f6
00842976 : CMP dword ptr [ESI + 0x4],0x42
0084297a : JGE 0x008429f6
0084297c : PUSH ESI
0084297d : XOR CL,CL
0084297f : CALL 0x00841590
00842984 : MOV ECX,dword ptr [ESI + 0x8]
00842987 : MOV EDX,dword ptr [ESI + 0x4]
0084298a : MOV EAX,[0x00da9894]
0084298f : NEG ECX
00842991 : PUSH ECX
00842992 : MOV ECX,dword ptr [EAX]
00842994 : PUSH EDX
00842995 : MOV EDX,dword ptr [ECX + 0x140]
0084299b : MOV ECX,dword ptr [EDX + 0x38]
0084299e : CALL 0x009c3a10
008429a3 : CMP byte ptr [ESI + 0x1],0x0
008429a7 : JZ 0x008429db
008429a9 : MOV EAX,dword ptr [ESI + 0x4]
008429ac : MOVZX ECX,byte ptr [EDI + 0xb]
008429b0 : MOV EDX,EAX
008429b2 : IMUL EDX,EDX,0x16
008429b5 : ADD ECX,EDX
008429b7 : MOV EBX,dword ptr [EBX + ECX*0x4 + 0x274]
008429be : LEA EDX,[EAX + -0x3]
008429c1 : MOV dword ptr [ESI + 0x8],EBX
008429c4 : CMP EDX,0xe
008429c7 : JA 0x008429d4
008429c9 : PUSH EBX
008429ca : CALL 0x00840d10
008429cf : MOV dword ptr [ESI + 0xc],EAX
008429d2 : JMP 0x00842a2c
008429d4 : XOR EAX,EAX
008429d6 : MOV dword ptr [ESI + 0xc],EAX
008429d9 : JMP 0x00842a2c
008429db : MOV ECX,dword ptr [ESI + 0x4]
008429de : MOVZX EAX,byte ptr [EDI + 0xb]
008429e2 : IMUL ECX,ECX,0x16
008429e5 : ADD EAX,ECX
008429e7 : MOV EBX,dword ptr [EBX + EAX*0x4 + 0x274]
008429ee : MOV dword ptr [ESI + 0x8],EBX
008429f1 : MOV dword ptr [ESI + 0xc],EBX
008429f4 : JMP 0x00842a2c
008429f6 : MOV EAX,dword ptr [ESI + 0x4]
008429f9 : CMP EAX,0x42
008429fc : JL 0x00842a18
008429fe : CMP EAX,0x44
00842a01 : JGE 0x00842a18
00842a03 : MOVZX EDX,byte ptr [EDI + 0xb]
00842a07 : IMUL EAX,EAX,0x16
00842a0a : ADD EDX,EAX
00842a0c : MOV EAX,dword ptr [EBX + EDX*0x4 + 0x274]
00842a13 : MOV dword ptr [ESI + 0x8],EAX
00842a16 : JMP 0x00842a2c
00842a18 : PUSH EAX
00842a19 : PUSH 0xc3a590
00842a1e : MOV ESI,dword ptr [0x00da98e8]
00842a24 : CALL 0x008018d0
00842a29 : ADD ESP,0x8
00842a2c : MOV ECX,dword ptr [EBP + -0x4]
00842a2f : INC ECX
00842a30 : CMP ECX,dword ptr [EBP + -0x14]
00842a33 : MOV dword ptr [EBP + -0x4],ECX
00842a36 : JL 0x0084283a
00842a3c : MOV EAX,dword ptr [EDI + 0x58]
00842a3f : TEST EAX,EAX
00842a41 : JNZ 0x00842a4f
00842a43 : PUSH EDI
00842a44 : CALL 0x00840ec0
00842a49 : POP ESI
00842a4a : POP EBX
00842a4b : MOV ESP,EBP
00842a4d : POP EBP
00842a4e : RET
00842a4f : CMP EAX,0x1
00842a52 : JNZ 0x00842a60
00842a54 : PUSH EDI
00842a55 : CALL 0x00842790
00842a5a : POP ESI
00842a5b : POP EBX
00842a5c : MOV ESP,EBP
00842a5e : POP EBP
00842a5f : RET
00842a60 : CMP EAX,0x2
00842a63 : JNZ 0x00842a6b
00842a65 : PUSH EDI
00842a66 : CALL 0x00841a80
00842a6b : POP ESI
00842a6c : POP EBX
00842a6d : MOV ESP,EBP
00842a6f : POP EBP
00842a70 : RET
