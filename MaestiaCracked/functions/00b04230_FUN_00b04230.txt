PROGRAM  : Maestia.exe
FUNCTION : FUN_00b04230
ENTRY    : 00b04230
BODY     : [[00b04230, 00b0432c]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_00b04230(int param_1)

{
  uint uVar1;
  int *piVar2;
  uint in_ECX;
  undefined1 local_2c [24];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4b87a;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar1 = in_ECX >> 0x18;
  if (uVar1 == 6) {
    piVar2 = (int *)FUN_00b03c40(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  }
  else if (uVar1 == 7) {
    piVar2 = (int *)FUN_00b03bd0();
  }
  else {
    if (uVar1 != 0xf) {
      FUN_008018d0(L"[ERROR] invalid proto %d");
      FUN_00406460(L"invalid Item CrateType");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaItemFactory::Create",0x3d,local_2c);
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      ExceptionList = local_10;
      return (int *)0x0;
    }
    piVar2 = (int *)FUN_00b03b60();
  }
  if (piVar2 != (int *)0x0) {
    (**(code **)(*piVar2 + 0x28))();
    piVar2[3] = param_1;
  }
  ExceptionList = local_10;
  return piVar2;
}



============================================================
DISASSEMBLY
============================================================
00b04230 : PUSH EBP
00b04231 : MOV EBP,ESP
00b04233 : PUSH -0x1
00b04235 : PUSH 0xb4b87a
00b0423a : MOV EAX,FS:[0x0]
00b04240 : PUSH EAX
00b04241 : SUB ESP,0x1c
00b04244 : PUSH ESI
00b04245 : PUSH EDI
00b04246 : MOV EAX,[0x00d66fa0]
00b0424b : XOR EAX,EBP
00b0424d : PUSH EAX
00b0424e : LEA EAX,[EBP + -0xc]
00b04251 : MOV FS:[0x0],EAX
00b04257 : MOV EDI,ECX
00b04259 : MOV EAX,EDI
00b0425b : SHR EAX,0x18
00b0425e : MOVZX EAX,AL
00b04261 : SUB EAX,0x6
00b04264 : JZ 0x00b042ff
00b0426a : SUB EAX,0x1
00b0426d : JZ 0x00b042f8
00b04273 : SUB EAX,0x8
00b04276 : JZ 0x00b042f1
00b04278 : MOV ESI,dword ptr [0x00da98e8]
00b0427e : PUSH EDI
00b0427f : PUSH 0xca56d4
00b04284 : CALL 0x008018d0
00b04289 : ADD ESP,0x8
00b0428c : PUSH 0xca5708
00b04291 : LEA ECX,[EBP + -0x28]
00b04294 : CALL 0x00406460
00b04299 : XOR ESI,ESI
00b0429b : MOV dword ptr [EBP + -0x4],ESI
00b0429e : MOV EAX,[0x00da98e8]
00b042a3 : MOV ECX,dword ptr [EAX]
00b042a5 : CMP ECX,ESI
00b042a7 : JZ 0x00b042bb
00b042a9 : MOV EDX,dword ptr [ECX]
00b042ab : MOV EDX,dword ptr [EDX + 0x14]
00b042ae : LEA EAX,[EBP + -0x28]
00b042b1 : PUSH EAX
00b042b2 : PUSH 0x3d
00b042b4 : PUSH 0xca5738
00b042b9 : CALL EDX
00b042bb : MOV dword ptr [EBP + -0x4],0xffffffff
00b042c2 : CMP dword ptr [EBP + -0x10],0x8
00b042c6 : JC 0x00b042d0
00b042c8 : MOV ECX,dword ptr [EBP + -0x24]
00b042cb : CALL 0x006f04e0
00b042d0 : XOR EAX,EAX
00b042d2 : MOV dword ptr [EBP + -0x10],0x7
00b042d9 : MOV dword ptr [EBP + -0x14],ESI
00b042dc : MOV word ptr [EBP + -0x24],AX
00b042e0 : MOV ECX,dword ptr [EBP + -0xc]
00b042e3 : MOV dword ptr FS:[0x0],ECX
00b042ea : POP ECX
00b042eb : POP EDI
00b042ec : POP ESI
00b042ed : MOV ESP,EBP
00b042ef : POP EBP
00b042f0 : RET
00b042f1 : CALL 0x00b03b60
00b042f6 : JMP 0x00b04304
00b042f8 : CALL 0x00b03bd0
00b042fd : JMP 0x00b04304
00b042ff : CALL 0x00b03c40
00b04304 : MOV ESI,EAX
00b04306 : TEST ESI,ESI
00b04308 : JZ 0x00b0431a
00b0430a : MOV EDX,dword ptr [ESI]
00b0430c : MOV EAX,dword ptr [EDX + 0x28]
00b0430f : PUSH EDI
00b04310 : MOV ECX,ESI
00b04312 : CALL EAX
00b04314 : MOV ECX,dword ptr [EBP + 0x8]
00b04317 : MOV dword ptr [ESI + 0xc],ECX
00b0431a : MOV EAX,ESI
00b0431c : MOV ECX,dword ptr [EBP + -0xc]
00b0431f : MOV dword ptr FS:[0x0],ECX
00b04326 : POP ECX
00b04327 : POP EDI
00b04328 : POP ESI
00b04329 : MOV ESP,EBP
00b0432b : POP EBP
00b0432c : RET
