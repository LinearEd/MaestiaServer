PROGRAM  : Maestia.exe
FUNCTION : FUN_00771b90
ENTRY    : 00771b90
BODY     : [[00771b90, 00771dd1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00771b90(undefined4 *param_1,char param_2,undefined4 param_3,undefined4 param_4)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  undefined4 *in_ECX;
  undefined4 in_EDX;
  int unaff_ESI;
  undefined **local_38;
  int *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b16075;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined4 *)(unaff_ESI + 0x110c4) = *in_ECX;
  *(undefined4 *)(unaff_ESI + 0x110c8) = in_ECX[1];
  *(undefined4 *)(unaff_ESI + 0x110cc) = in_ECX[2];
  local_18 = 7;
  *(undefined4 *)(unaff_ESI + 0x110d0) = *param_1;
  local_1c = 0;
  *(undefined4 *)(unaff_ESI + 0x110d4) = param_1[1];
  *(undefined4 *)(unaff_ESI + 0x110d8) = param_1[2];
  *(undefined4 *)(unaff_ESI + 0x110e4) = param_3;
  *(undefined4 *)(unaff_ESI + 0x110e8) = param_4;
  *(undefined4 *)(unaff_ESI + 0x110ec) = 0x3f800000;
  local_2c = 0;
  local_14 = uVar2;
  FUN_00405eb0(in_EDX,0,0xffffffff);
  local_8 = 0;
  local_34 = (int *)&DAT_0000002e;
  iVar3 = FUN_00407cc0(&local_34,1);
  if (iVar3 == -1) {
    if (7 < local_18) {
      local_8 = iVar3;
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    FUN_00405e10(iVar3,local_1c - iVar3);
    iVar3 = *(int *)(unaff_ESI + 0x110e4);
    if (param_2 == '\0') {
      if ((((iVar3 == 2) || (iVar3 == 3)) || (iVar3 == 4)) || (iVar3 == 5)) {
        FUN_00404980(local_30);
      }
      iVar3 = (**(code **)(*DAT_017251f4 + 4))(&local_38,local_30);
      local_8 = CONCAT31(local_8._1_3_,1);
    }
    else {
      if ((iVar3 == 0) || (iVar3 == 1)) {
        FUN_00404980(local_30);
      }
      iVar3 = (**(code **)(*DAT_017251f4 + 4))(&local_38,local_30,uVar2);
      local_8 = CONCAT31(local_8._1_3_,2);
    }
    piVar1 = *(int **)(unaff_ESI + 0x110bc);
    if (piVar1 != *(int **)(iVar3 + 4)) {
      if (piVar1 != (int *)0x0) {
        (**(code **)(*piVar1 + 0x30))();
      }
      if (*(int *)(iVar3 + 4) != 0) {
        InterlockedIncrement((LONG *)(*(int *)(iVar3 + 4) + 0x2c));
      }
      *(undefined4 *)(unaff_ESI + 0x110bc) = *(undefined4 *)(iVar3 + 4);
    }
    local_8 = local_8 & 0xffffff00;
    local_38 = &PTR_FUN_00cd4964;
    if (local_34 != (int *)0x0) {
      (**(code **)(*local_34 + 0x30))();
      local_34 = (int *)0x0;
    }
    *(undefined4 *)(unaff_ESI + 0x110ac) = DAT_00d72c20;
    *(undefined4 *)(unaff_ESI + 0x110b0) = 0;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8 = 0xffffffff;
  local_2c = 0;
  local_1c = 0;
  local_18 = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00771b90 : PUSH EBP
00771b91 : MOV EBP,ESP
00771b93 : PUSH -0x1
00771b95 : PUSH 0xb16075
00771b9a : MOV EAX,FS:[0x0]
00771ba0 : PUSH EAX
00771ba1 : SUB ESP,0x28
00771ba4 : MOV EAX,[0x00d66fa0]
00771ba9 : XOR EAX,EBP
00771bab : MOV dword ptr [EBP + -0x10],EAX
00771bae : PUSH EBX
00771baf : PUSH EDI
00771bb0 : PUSH EAX
00771bb1 : LEA EAX,[EBP + -0xc]
00771bb4 : MOV FS:[0x0],EAX
00771bba : MOV EAX,dword ptr [EBP + 0x8]
00771bbd : FLD float ptr [ECX]
00771bbf : MOVSS XMM0,dword ptr [0x00c10fc4]
00771bc7 : FSTP float ptr [ESI + 0x110c4]
00771bcd : PUSH -0x1
00771bcf : FLD float ptr [ECX + 0x4]
00771bd2 : XOR EBX,EBX
00771bd4 : FSTP float ptr [ESI + 0x110c8]
00771bda : PUSH EBX
00771bdb : FLD float ptr [ECX + 0x8]
00771bde : MOV ECX,dword ptr [EBP + 0x14]
00771be1 : FSTP float ptr [ESI + 0x110cc]
00771be7 : PUSH EDX
00771be8 : FLD float ptr [EAX]
00771bea : MOV dword ptr [EBP + -0x14],0x7
00771bf1 : FSTP float ptr [ESI + 0x110d0]
00771bf7 : MOV dword ptr [EBP + -0x18],EBX
00771bfa : FLD float ptr [EAX + 0x4]
00771bfd : FSTP float ptr [ESI + 0x110d4]
00771c03 : FLD float ptr [EAX + 0x8]
00771c06 : MOV EAX,dword ptr [EBP + 0x10]
00771c09 : FSTP float ptr [ESI + 0x110d8]
00771c0f : MOV dword ptr [ESI + 0x110e4],EAX
00771c15 : MOV dword ptr [ESI + 0x110e8],ECX
00771c1b : XOR EAX,EAX
00771c1d : LEA ECX,[EBP + -0x2c]
00771c20 : MOVSS dword ptr [ESI + 0x110ec],XMM0
00771c28 : MOV word ptr [EBP + -0x28],AX
00771c2c : CALL 0x00405eb0
00771c31 : MOV dword ptr [EBP + -0x4],EBX
00771c34 : PUSH 0x1
00771c36 : LEA ECX,[EBP + -0x30]
00771c39 : PUSH ECX
00771c3a : OR ECX,0xffffffff
00771c3d : LEA EDI,[EBP + -0x2c]
00771c40 : MOV dword ptr [EBP + -0x30],0x2e
00771c47 : CALL 0x00407cc0
00771c4c : CMP EAX,-0x1
00771c4f : JNZ 0x00771c6f
00771c51 : MOV dword ptr [EBP + -0x4],EAX
00771c54 : CMP dword ptr [EBP + -0x14],0x8
00771c58 : JC 0x00771c62
00771c5a : MOV ECX,dword ptr [EBP + -0x28]
00771c5d : CALL 0x006f04e0
00771c62 : XOR EDX,EDX
00771c64 : MOV word ptr [EBP + -0x28],DX
00771c68 : XOR AL,AL
00771c6a : JMP 0x00771dab
00771c6f : MOV ECX,dword ptr [EBP + -0x18]
00771c72 : SUB ECX,EAX
00771c74 : PUSH ECX
00771c75 : PUSH EAX
00771c76 : LEA ECX,[EBP + -0x2c]
00771c79 : CALL 0x00405e10
00771c7e : MOV EAX,dword ptr [ESI + 0x110e4]
00771c84 : CMP byte ptr [EBP + 0xc],BL
00771c87 : JNZ 0x00771ce9
00771c89 : CMP EAX,0x2
00771c8c : JNZ 0x00771c99
00771c8e : LEA EDX,[EBP + -0x2c]
00771c91 : PUSH EDX
00771c92 : MOV EDX,0xc0f2f0
00771c97 : JMP 0x00771cc7
00771c99 : CMP EAX,0x3
00771c9c : JNZ 0x00771ca9
00771c9e : LEA EAX,[EBP + -0x2c]
00771ca1 : PUSH EAX
00771ca2 : MOV EDX,0xc0f2fc
00771ca7 : JMP 0x00771cc7
00771ca9 : CMP EAX,0x4
00771cac : JNZ 0x00771cb9
00771cae : LEA ECX,[EBP + -0x2c]
00771cb1 : PUSH ECX
00771cb2 : MOV EDX,0xc0f308
00771cb7 : JMP 0x00771cc7
00771cb9 : CMP EAX,0x5
00771cbc : JNZ 0x00771ccc
00771cbe : LEA EDX,[EBP + -0x2c]
00771cc1 : PUSH EDX
00771cc2 : MOV EDX,0xc0f314
00771cc7 : CALL 0x00404980
00771ccc : MOV ECX,dword ptr [0x017251f4]
00771cd2 : MOV EAX,dword ptr [ECX]
00771cd4 : MOV EAX,dword ptr [EAX + 0x4]
00771cd7 : LEA EDX,[EBP + -0x2c]
00771cda : PUSH EDX
00771cdb : LEA EDX,[EBP + -0x34]
00771cde : PUSH EDX
00771cdf : CALL EAX
00771ce1 : MOV EDI,EAX
00771ce3 : MOV byte ptr [EBP + -0x4],0x1
00771ce7 : JMP 0x00771d26
00771ce9 : CMP EAX,EBX
00771ceb : JNZ 0x00771cf8
00771ced : LEA ECX,[EBP + -0x2c]
00771cf0 : PUSH ECX
00771cf1 : MOV EDX,0xc0f320
00771cf6 : JMP 0x00771d06
00771cf8 : CMP EAX,0x1
00771cfb : JNZ 0x00771d0b
00771cfd : LEA EDX,[EBP + -0x2c]
00771d00 : PUSH EDX
00771d01 : MOV EDX,0xc0f32c
00771d06 : CALL 0x00404980
00771d0b : MOV ECX,dword ptr [0x017251f4]
00771d11 : MOV EAX,dword ptr [ECX]
00771d13 : MOV EAX,dword ptr [EAX + 0x4]
00771d16 : LEA EDX,[EBP + -0x2c]
00771d19 : PUSH EDX
00771d1a : LEA EDX,[EBP + -0x34]
00771d1d : PUSH EDX
00771d1e : CALL EAX
00771d20 : MOV EDI,EAX
00771d22 : MOV byte ptr [EBP + -0x4],0x2
00771d26 : MOV EAX,dword ptr [EDI + 0x4]
00771d29 : MOV ECX,dword ptr [ESI + 0x110bc]
00771d2f : CMP ECX,EAX
00771d31 : JZ 0x00771d58
00771d33 : CMP ECX,EBX
00771d35 : JZ 0x00771d3e
00771d37 : MOV EDX,dword ptr [ECX]
00771d39 : MOV EAX,dword ptr [EDX + 0x30]
00771d3c : CALL EAX
00771d3e : MOV EAX,dword ptr [EDI + 0x4]
00771d41 : CMP EAX,EBX
00771d43 : JZ 0x00771d4f
00771d45 : ADD EAX,0x2c
00771d48 : PUSH EAX
00771d49 : CALL dword ptr [0x00b850dc]
00771d4f : MOV ECX,dword ptr [EDI + 0x4]
00771d52 : MOV dword ptr [ESI + 0x110bc],ECX
00771d58 : MOV byte ptr [EBP + -0x4],BL
00771d5b : MOV ECX,dword ptr [EBP + -0x30]
00771d5e : MOV dword ptr [EBP + -0x34],0xcd4964
00771d65 : CMP ECX,EBX
00771d67 : JZ 0x00771d73
00771d69 : MOV EDX,dword ptr [ECX]
00771d6b : MOV EAX,dword ptr [EDX + 0x30]
00771d6e : CALL EAX
00771d70 : MOV dword ptr [EBP + -0x30],EBX
00771d73 : MOVSS XMM0,dword ptr [0x00d72c20]
00771d7b : MOVSS dword ptr [ESI + 0x110ac],XMM0
00771d83 : XORPS XMM0,XMM0
00771d86 : MOVSS dword ptr [ESI + 0x110b0],XMM0
00771d8e : MOV dword ptr [EBP + -0x4],0xffffffff
00771d95 : CMP dword ptr [EBP + -0x14],0x8
00771d99 : JC 0x00771da3
00771d9b : MOV ECX,dword ptr [EBP + -0x28]
00771d9e : CALL 0x006f04e0
00771da3 : XOR ECX,ECX
00771da5 : MOV word ptr [EBP + -0x28],CX
00771da9 : MOV AL,0x1
00771dab : MOV dword ptr [EBP + -0x18],EBX
00771dae : MOV dword ptr [EBP + -0x14],0x7
00771db5 : MOV ECX,dword ptr [EBP + -0xc]
00771db8 : MOV dword ptr FS:[0x0],ECX
00771dbf : POP ECX
00771dc0 : POP EDI
00771dc1 : POP EBX
00771dc2 : MOV ECX,dword ptr [EBP + -0x10]
00771dc5 : XOR ECX,EBP
00771dc7 : CALL 0x00633e6b
00771dcc : MOV ESP,EBP
00771dce : POP EBP
00771dcf : RET 0x10
