PROGRAM  : Maestia.exe
FUNCTION : FUN_008319a0
ENTRY    : 008319a0
BODY     : [[008319a0, 00831a5b]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_008319a0(int param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1b39f;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = *(uint *)(param_1 + 0x28);
  if ((uVar1 == 0) || (*(uint *)(param_1 + 0x2c) == 0)) {
    *(undefined4 *)(param_2 + 0x18) = 7;
    *(undefined4 *)(param_2 + 0x14) = 0;
    *(undefined2 *)(param_2 + 4) = 0;
    FUN_00406360(&DAT_00c397c0,0);
  }
  else {
    if (uVar1 < *(uint *)(param_1 + 0x2c)) {
      *(uint *)(param_1 + 0x2c) = uVar1;
    }
    *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x2c) + -1;
    uVar3 = FUN_004c9510(uVar2);
    *(undefined4 *)(param_2 + 0x18) = 7;
    *(undefined4 *)(param_2 + 0x14) = 0;
    *(undefined2 *)(param_2 + 4) = 0;
    FUN_00405eb0(uVar3,0,0xffffffff);
  }
  ExceptionList = local_10;
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
008319a0 : PUSH EBP
008319a1 : MOV EBP,ESP
008319a3 : PUSH -0x1
008319a5 : PUSH 0xb1b39f
008319aa : MOV EAX,FS:[0x0]
008319b0 : PUSH EAX
008319b1 : SUB ESP,0x10
008319b4 : PUSH ESI
008319b5 : PUSH EDI
008319b6 : MOV EAX,[0x00d66fa0]
008319bb : XOR EAX,EBP
008319bd : PUSH EAX
008319be : LEA EAX,[EBP + -0xc]
008319c1 : MOV FS:[0x0],EAX
008319c7 : MOV ESI,dword ptr [EBP + 0xc]
008319ca : MOV EAX,dword ptr [EBP + 0x8]
008319cd : XOR EDI,EDI
008319cf : MOV dword ptr [EBP + -0x10],EDI
008319d2 : MOV ECX,dword ptr [EAX + 0x28]
008319d5 : CMP ECX,EDI
008319d7 : JZ 0x00831a20
008319d9 : MOV EDX,dword ptr [EAX + 0x2c]
008319dc : CMP EDX,EDI
008319de : JBE 0x00831a20
008319e0 : CMP EDX,ECX
008319e2 : JBE 0x008319e7
008319e4 : MOV dword ptr [EAX + 0x2c],ECX
008319e7 : MOV ECX,dword ptr [EAX + 0x24]
008319ea : MOV EDX,dword ptr [EAX + 0xc]
008319ed : DEC dword ptr [EAX + 0x2c]
008319f0 : MOV EAX,dword ptr [EAX + 0x2c]
008319f3 : ADD ECX,EAX
008319f5 : LEA EAX,[EBP + -0x18]
008319f8 : MOV dword ptr [EBP + -0x18],EDX
008319fb : MOV dword ptr [EBP + -0x14],ECX
008319fe : CALL 0x004c9510
00831a03 : PUSH -0x1
00831a05 : XOR ECX,ECX
00831a07 : MOV dword ptr [ESI + 0x18],0x7
00831a0e : MOV dword ptr [ESI + 0x14],EDI
00831a11 : PUSH EDI
00831a12 : MOV word ptr [ESI + 0x4],CX
00831a16 : PUSH EAX
00831a17 : MOV ECX,ESI
00831a19 : CALL 0x00405eb0
00831a1e : JMP 0x00831a3d
00831a20 : PUSH EDI
00831a21 : XOR EDX,EDX
00831a23 : MOV dword ptr [ESI + 0x18],0x7
00831a2a : MOV dword ptr [ESI + 0x14],EDI
00831a2d : PUSH 0xc397c0
00831a32 : MOV ECX,ESI
00831a34 : MOV word ptr [ESI + 0x4],DX
00831a38 : CALL 0x00406360
00831a3d : MOV dword ptr [EBP + -0x4],EDI
00831a40 : MOV dword ptr [EBP + -0x10],0x1
00831a47 : MOV EAX,ESI
00831a49 : MOV ECX,dword ptr [EBP + -0xc]
00831a4c : MOV dword ptr FS:[0x0],ECX
00831a53 : POP ECX
00831a54 : POP EDI
00831a55 : POP ESI
00831a56 : MOV ESP,EBP
00831a58 : POP EBP
00831a59 : RET 0x8
