PROGRAM  : Maestia.exe
FUNCTION : FUN_0054f630
ENTRY    : 0054f630
BODY     : [[0054f630, 0054f6fc] [0054f700, 0054f748]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054f630(void)

{
  int iVar1;
  uint uVar2;
  undefined4 *puVar3;
  uint uVar4;
  int *piVar5;
  int in_ECX;
  int *piVar6;
  undefined1 local_8 [8];
  
  iVar1 = *(int *)(in_ECX + 0x18);
  piVar6 = (int *)(in_ECX + 0x18);
  if (iVar1 == 0) {
    uVar4 = 0;
    piVar6 = (int *)0x0;
  }
  else {
    uVar4 = 0;
    piVar5 = (int *)(iVar1 + 8);
    do {
      if (*piVar5 != -2) break;
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 6;
    } while (uVar4 <= *(uint *)(iVar1 + 4));
  }
  do {
    if (((piVar6 == (int *)0x0) || (*piVar6 == 0)) || (*(int *)(*piVar6 + 4) < (int)uVar4)) break;
    FUN_00526310();
    uVar2 = *(uint *)(*piVar6 + 4);
    if (((int)uVar4 <= (int)uVar2) && (uVar4 = uVar4 + 1, uVar4 <= uVar2)) {
      piVar5 = (int *)(*piVar6 + 8 + uVar4 * 0x18);
      do {
        if (*piVar5 != -2) break;
        uVar4 = uVar4 + 1;
        piVar5 = piVar5 + 6;
      } while (uVar4 <= uVar2);
    }
  } while( true );
  FUN_00568530();
  if (*(int *)(in_ECX + 0x28) == 0) {
LAB_0054f710:
    puVar3 = *(undefined4 **)(in_ECX + 0x14);
    if (puVar3 != (undefined4 *)0x0) {
      puVar3[2] = puVar3[2] + -1;
      if ((puVar3[2] & 0x70000000) != 0x10000000) {
        puVar3[2] = puVar3[2] & 0x9fffffff | 0x10000000;
        (**(code **)*puVar3)(1);
      }
    }
    return;
  }
  piVar5 = (int *)FUN_0054f300(local_8);
  piVar6 = (int *)*piVar5;
  uVar4 = piVar5[1];
  do {
    if (((piVar6 == (int *)0x0) || (*piVar6 == 0)) || (*(int *)(*piVar6 + 4) < (int)uVar4))
    goto LAB_0054f710;
    FUN_00568530();
    FUN_00526310();
    uVar2 = *(uint *)(*piVar6 + 4);
    if (((int)uVar4 <= (int)uVar2) && (uVar4 = uVar4 + 1, uVar4 <= uVar2)) {
      piVar5 = (int *)(*piVar6 + 8 + uVar4 * 0x24);
      do {
        if (*piVar5 != -2) break;
        uVar4 = uVar4 + 1;
        piVar5 = piVar5 + 9;
      } while (uVar4 <= uVar2);
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0054f630 : SUB ESP,0x8
0054f633 : PUSH EBP
0054f634 : MOV EBP,ECX
0054f636 : MOV ECX,dword ptr [EBP + 0x18]
0054f639 : PUSH ESI
0054f63a : LEA ESI,[EBP + 0x18]
0054f63d : PUSH EDI
0054f63e : TEST ECX,ECX
0054f640 : JNZ 0x0054f646
0054f642 : XOR EAX,EAX
0054f644 : JMP 0x0054f65f
0054f646 : MOV EDX,dword ptr [ECX + 0x4]
0054f649 : XOR EAX,EAX
0054f64b : ADD ECX,0x8
0054f64e : MOV EDI,EDI
0054f650 : CMP dword ptr [ECX],-0x2
0054f653 : JNZ 0x0054f65d
0054f655 : INC EAX
0054f656 : ADD ECX,0x18
0054f659 : CMP EAX,EDX
0054f65b : JBE 0x0054f650
0054f65d : MOV ECX,ESI
0054f65f : MOV EDI,ECX
0054f661 : MOV ESI,EAX
0054f663 : TEST EDI,EDI
0054f665 : JZ 0x0054f6a2
0054f667 : MOV EAX,dword ptr [EDI]
0054f669 : TEST EAX,EAX
0054f66b : JZ 0x0054f6a2
0054f66d : CMP ESI,dword ptr [EAX + 0x4]
0054f670 : JG 0x0054f6a2
0054f672 : LEA ECX,[ESI + ESI*0x2]
0054f675 : LEA ECX,[EAX + ECX*0x8 + 0x10]
0054f679 : CALL 0x00526310
0054f67e : MOV ECX,dword ptr [EDI]
0054f680 : MOV EAX,dword ptr [ECX + 0x4]
0054f683 : CMP ESI,EAX
0054f685 : JG 0x0054f663
0054f687 : INC ESI
0054f688 : CMP ESI,EAX
0054f68a : JA 0x0054f663
0054f68c : LEA EDX,[ESI + ESI*0x2]
0054f68f : LEA ECX,[ECX + EDX*0x8 + 0x8]
0054f693 : CMP dword ptr [ECX],-0x2
0054f696 : JNZ 0x0054f663
0054f698 : INC ESI
0054f699 : ADD ECX,0x18
0054f69c : CMP ESI,EAX
0054f69e : JBE 0x0054f693
0054f6a0 : JMP 0x0054f663
0054f6a2 : LEA ECX,[EBP + 0x1c]
0054f6a5 : CALL 0x00568530
0054f6aa : MOV ECX,dword ptr [EBP + 0x28]
0054f6ad : TEST ECX,ECX
0054f6af : JZ 0x0054f710
0054f6b1 : PUSH EBX
0054f6b2 : LEA EAX,[ESP + 0x10]
0054f6b6 : PUSH EAX
0054f6b7 : CALL 0x0054f300
0054f6bc : MOV EBX,dword ptr [EAX]
0054f6be : MOV ESI,dword ptr [EAX + 0x4]
0054f6c1 : TEST EBX,EBX
0054f6c3 : JZ 0x0054f70f
0054f6c5 : MOV EAX,dword ptr [EBX]
0054f6c7 : TEST EAX,EAX
0054f6c9 : JZ 0x0054f70f
0054f6cb : CMP ESI,dword ptr [EAX + 0x4]
0054f6ce : JG 0x0054f70f
0054f6d0 : LEA ECX,[ESI + ESI*0x8]
0054f6d3 : LEA EDI,[EAX + ECX*0x4 + 0x10]
0054f6d7 : MOV ECX,EDI
0054f6d9 : CALL 0x00568530
0054f6de : LEA ECX,[EDI + 0xc]
0054f6e1 : CALL 0x00526310
0054f6e6 : MOV ECX,dword ptr [EBX]
0054f6e8 : MOV EAX,dword ptr [ECX + 0x4]
0054f6eb : CMP ESI,EAX
0054f6ed : JG 0x0054f6c1
0054f6ef : INC ESI
0054f6f0 : CMP ESI,EAX
0054f6f2 : JA 0x0054f6c1
0054f6f4 : LEA EDX,[ESI + ESI*0x8]
0054f6f7 : LEA ECX,[ECX + EDX*0x4 + 0x8]
0054f6fb : JMP 0x0054f700
0054f700 : CMP dword ptr [ECX],-0x2
0054f703 : JNZ 0x0054f6c1
0054f705 : INC ESI
0054f706 : ADD ECX,0x24
0054f709 : CMP ESI,EAX
0054f70b : JBE 0x0054f700
0054f70d : JMP 0x0054f6c1
0054f70f : POP EBX
0054f710 : MOV ECX,dword ptr [EBP + 0x14]
0054f713 : POP EDI
0054f714 : POP ESI
0054f715 : POP EBP
0054f716 : TEST ECX,ECX
0054f718 : JZ 0x0054f745
0054f71a : DEC dword ptr [ECX + 0x8]
0054f71d : MOV EAX,dword ptr [ECX + 0x8]
0054f720 : MOV EDX,EAX
0054f722 : AND EDX,0x70000000
0054f728 : CMP EDX,0x10000000
0054f72e : JZ 0x0054f745
0054f730 : AND EAX,0x9fffffff
0054f735 : OR EAX,0x10000000
0054f73a : MOV dword ptr [ECX + 0x8],EAX
0054f73d : MOV EAX,dword ptr [ECX]
0054f73f : MOV EDX,dword ptr [EAX]
0054f741 : PUSH 0x1
0054f743 : CALL EDX
0054f745 : ADD ESP,0x8
0054f748 : RET
