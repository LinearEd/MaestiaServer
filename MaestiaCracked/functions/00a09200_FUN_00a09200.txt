PROGRAM  : Maestia.exe
FUNCTION : FUN_00a09200
ENTRY    : 00a09200
BODY     : [[00a09200, 00a0941e]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_00a09200(void)

{
  int *piVar1;
  char cVar2;
  undefined4 uVar3;
  int iVar4;
  int *in_ECX;
  uint local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4ef9f;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = in_ECX;
  cVar2 = FUN_008896f0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (cVar2 != '\0') {
    FUN_00406460(L"IDS_DISABLE_DEAD");
    local_8 = 0;
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_0081d120(local_30);
    local_8._0_1_ = 1;
    (**(code **)(*piVar1 + 0x44))(uVar3,3);
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_34 = 7;
    local_38 = 0;
    local_48 = 0;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    FUN_008a1050(0xca);
    ExceptionList = local_10;
    return false;
  }
  if ((*(byte *)(in_ECX + 0x48) & 4) == 0) {
    cVar2 = (**(code **)(*in_ECX + 0x80))();
    ExceptionList = local_10;
    return cVar2 != '\0';
  }
  FUN_00406460(L"IDS_TRADEBINDITEM_CHANGE_BOUND_STATE");
  local_8 = 2;
  iVar4 = FUN_0081d120(local_4c);
  local_8._0_1_ = 3;
  if (*(uint *)(iVar4 + 0x18) < 8) {
    iVar4 = iVar4 + 4;
  }
  else {
    iVar4 = *(int *)(iVar4 + 4);
  }
  FUN_00406460(iVar4);
  local_8._0_1_ = 4;
  iVar4 = FUN_008ede80(local_30,2);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  local_8 = CONCAT31(local_8._1_3_,2);
  if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = 0xffffffff;
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_34 = 7;
  local_38 = 0;
  local_48 = 0;
  if (iVar4 != 0) {
    *(int **)(iVar4 + 0x6c) = local_14;
    *(undefined4 *)(iVar4 + 0x70) = 1;
    if (*(code **)(iVar4 + 0x60) != (code *)0x0) {
      (**(code **)(iVar4 + 0x60))(1,iVar4);
    }
    *(code **)(iVar4 + 0x60) = FUN_00a09100;
  }
  ExceptionList = local_10;
  return false;
}



============================================================
DISASSEMBLY
============================================================
00a09200 : PUSH EBP
00a09201 : MOV EBP,ESP
00a09203 : PUSH -0x1
00a09205 : PUSH 0xb4ef9f
00a0920a : MOV EAX,FS:[0x0]
00a09210 : PUSH EAX
00a09211 : SUB ESP,0x58
00a09214 : PUSH EBX
00a09215 : PUSH ESI
00a09216 : PUSH EDI
00a09217 : MOV EAX,[0x00d66fa0]
00a0921c : XOR EAX,EBP
00a0921e : PUSH EAX
00a0921f : LEA EAX,[EBP + -0xc]
00a09222 : MOV FS:[0x0],EAX
00a09228 : MOV ESI,ECX
00a0922a : MOV dword ptr [EBP + -0x10],ESI
00a0922d : MOV EAX,[0x0172491c]
00a09232 : MOV EAX,dword ptr [EAX + 0x17c]
00a09238 : CALL 0x008896f0
00a0923d : TEST AL,AL
00a0923f : JZ 0x00a092f1
00a09245 : PUSH 0xcaa5d0
00a0924a : LEA ECX,[EBP + -0x2c]
00a0924d : CALL 0x00406460
00a09252 : XOR EBX,EBX
00a09254 : MOV dword ptr [EBP + -0x4],EBX
00a09257 : MOV ECX,dword ptr [0x00da9894]
00a0925d : MOV EAX,dword ptr [ECX]
00a0925f : MOV ECX,dword ptr [0x0172491c]
00a09265 : MOV ESI,dword ptr [EAX + 0x1a8]
00a0926b : LEA EDX,[EBP + -0x2c]
00a0926e : PUSH EDX
00a0926f : LEA EDI,[EBP + -0x48]
00a09272 : CALL 0x0081d120
00a09277 : MOV byte ptr [EBP + -0x4],0x1
00a0927b : MOV EDX,dword ptr [ESI]
00a0927d : PUSH 0x3
00a0927f : PUSH EAX
00a09280 : MOV EAX,dword ptr [EDX + 0x44]
00a09283 : MOV ECX,ESI
00a09285 : CALL EAX
00a09287 : MOV byte ptr [EBP + -0x4],BL
00a0928a : MOV EDI,0x8
00a0928f : CMP dword ptr [EBP + -0x30],EDI
00a09292 : JC 0x00a0929c
00a09294 : MOV ECX,dword ptr [EBP + -0x44]
00a09297 : CALL 0x006f04e0
00a0929c : MOV ESI,0x7
00a092a1 : XOR ECX,ECX
00a092a3 : MOV dword ptr [EBP + -0x30],ESI
00a092a6 : MOV dword ptr [EBP + -0x34],EBX
00a092a9 : MOV word ptr [EBP + -0x44],CX
00a092ad : MOV dword ptr [EBP + -0x4],0xffffffff
00a092b4 : CMP dword ptr [EBP + -0x14],EDI
00a092b7 : JC 0x00a092c1
00a092b9 : MOV ECX,dword ptr [EBP + -0x28]
00a092bc : CALL 0x006f04e0
00a092c1 : MOV ECX,dword ptr [0x017248dc]
00a092c7 : XOR EDX,EDX
00a092c9 : PUSH 0xca
00a092ce : MOV dword ptr [EBP + -0x14],ESI
00a092d1 : MOV dword ptr [EBP + -0x18],EBX
00a092d4 : MOV word ptr [EBP + -0x28],DX
00a092d8 : CALL 0x008a1050
00a092dd : XOR AL,AL
00a092df : MOV ECX,dword ptr [EBP + -0xc]
00a092e2 : MOV dword ptr FS:[0x0],ECX
00a092e9 : POP ECX
00a092ea : POP EDI
00a092eb : POP ESI
00a092ec : POP EBX
00a092ed : MOV ESP,EBP
00a092ef : POP EBP
00a092f0 : RET
00a092f1 : TEST byte ptr [ESI + 0x120],0x4
00a092f8 : JZ 0x00a093fc
00a092fe : PUSH 0xcaa5f8
00a09303 : LEA ECX,[EBP + -0x48]
00a09306 : CALL 0x00406460
00a0930b : MOV dword ptr [EBP + -0x4],0x2
00a09312 : MOV ECX,dword ptr [0x0172491c]
00a09318 : LEA EAX,[EBP + -0x48]
00a0931b : PUSH EAX
00a0931c : LEA EDI,[EBP + -0x64]
00a0931f : CALL 0x0081d120
00a09324 : MOV BL,0x3
00a09326 : MOV byte ptr [EBP + -0x4],BL
00a09329 : MOV EDI,0x8
00a0932e : CMP dword ptr [EAX + 0x18],EDI
00a09331 : JC 0x00a09338
00a09333 : MOV EAX,dword ptr [EAX + 0x4]
00a09336 : JMP 0x00a0933b
00a09338 : ADD EAX,0x4
00a0933b : PUSH EAX
00a0933c : LEA ECX,[EBP + -0x2c]
00a0933f : CALL 0x00406460
00a09344 : MOV byte ptr [EBP + -0x4],0x4
00a09348 : MOV ECX,dword ptr [0x00da9894]
00a0934e : MOV ECX,dword ptr [ECX]
00a09350 : PUSH 0x2
00a09352 : LEA EDX,[EBP + -0x2c]
00a09355 : PUSH EDX
00a09356 : CALL 0x008ede80
00a0935b : MOV ESI,EAX
00a0935d : MOV byte ptr [EBP + -0x4],BL
00a09360 : CMP dword ptr [EBP + -0x14],EDI
00a09363 : JC 0x00a0936d
00a09365 : MOV ECX,dword ptr [EBP + -0x28]
00a09368 : CALL 0x006f04e0
00a0936d : XOR EBX,EBX
00a0936f : XOR EAX,EAX
00a09371 : MOV dword ptr [EBP + -0x14],0x7
00a09378 : MOV dword ptr [EBP + -0x18],EBX
00a0937b : MOV word ptr [EBP + -0x28],AX
00a0937f : MOV byte ptr [EBP + -0x4],0x2
00a09383 : CMP dword ptr [EBP + -0x4c],EDI
00a09386 : JC 0x00a09390
00a09388 : MOV ECX,dword ptr [EBP + -0x60]
00a0938b : CALL 0x006f04e0
00a09390 : XOR ECX,ECX
00a09392 : MOV dword ptr [EBP + -0x4c],0x7
00a09399 : MOV dword ptr [EBP + -0x50],EBX
00a0939c : MOV word ptr [EBP + -0x60],CX
00a093a0 : MOV dword ptr [EBP + -0x4],0xffffffff
00a093a7 : CMP dword ptr [EBP + -0x30],EDI
00a093aa : JC 0x00a093b4
00a093ac : MOV ECX,dword ptr [EBP + -0x44]
00a093af : CALL 0x006f04e0
00a093b4 : XOR EDX,EDX
00a093b6 : MOV dword ptr [EBP + -0x30],0x7
00a093bd : MOV dword ptr [EBP + -0x34],EBX
00a093c0 : MOV word ptr [EBP + -0x44],DX
00a093c4 : CMP ESI,EBX
00a093c6 : JZ 0x00a093e8
00a093c8 : MOV EAX,dword ptr [EBP + -0x10]
00a093cb : MOV dword ptr [ESI + 0x6c],EAX
00a093ce : MOV EAX,dword ptr [ESI + 0x60]
00a093d1 : MOV dword ptr [ESI + 0x70],0x1
00a093d8 : CMP EAX,EBX
00a093da : JZ 0x00a093e1
00a093dc : PUSH ESI
00a093dd : PUSH 0x1
00a093df : CALL EAX
00a093e1 : MOV dword ptr [ESI + 0x60],0xa09100
00a093e8 : XOR AL,AL
00a093ea : MOV ECX,dword ptr [EBP + -0xc]
00a093ed : MOV dword ptr FS:[0x0],ECX
00a093f4 : POP ECX
00a093f5 : POP EDI
00a093f6 : POP ESI
00a093f7 : POP EBX
00a093f8 : MOV ESP,EBP
00a093fa : POP EBP
00a093fb : RET
00a093fc : MOV EDX,dword ptr [ESI]
00a093fe : MOV EAX,dword ptr [EDX + 0x80]
00a09404 : MOV ECX,ESI
00a09406 : CALL EAX
00a09408 : TEST AL,AL
00a0940a : SETNZ AL
00a0940d : MOV ECX,dword ptr [EBP + -0xc]
00a09410 : MOV dword ptr FS:[0x0],ECX
00a09417 : POP ECX
00a09418 : POP EDI
00a09419 : POP ESI
00a0941a : POP EBX
00a0941b : MOV ESP,EBP
00a0941d : POP EBP
00a0941e : RET
