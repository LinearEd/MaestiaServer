PROGRAM  : Maestia.exe
FUNCTION : FUN_00467cd0
ENTRY    : 00467cd0
BODY     : [[00467cd0, 00467e8a]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_00467cd0(int param_1)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  byte bVar7;
  byte bVar8;
  byte bVar9;
  uint uVar10;
  int iVar11;
  char *pcVar12;
  undefined **local_224 [66];
  undefined **local_11c;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b82791;
  local_10 = ExceptionList;
  uVar10 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 0x1114) == 0) {
    pcVar12 = "CGrassRI::InitShader, no shader loader was passed in from CForestRI";
  }
  else {
    iVar11 = FUN_00468bb0(param_1 + 0x1aa4,"Grass.hlsl");
    local_8 = 0;
    bVar1 = FUN_0046a810(*(undefined4 *)(param_1 + 0x1114),iVar11 + 8,"GrassVertex","GrassPixel");
    local_8 = 0xffffffff;
    local_11c = &PTR_FUN_00cd3f48;
    if (bVar1 != 0) {
      FUN_00451af0();
      local_8 = 1;
      iVar11 = FUN_0046a950(local_224);
      local_8 = CONCAT31(local_8._1_3_,2);
      param_1 = param_1 + 0x1118;
      bVar2 = FUN_0046a8e0(iVar11 + 8,param_1,2);
      local_224[0] = &PTR_FUN_00cd3f48;
      local_8 = 0xffffffff;
      local_11c = &PTR_FUN_00cd3f48;
      bVar3 = FUN_0046a8e0("g_mGrassUnitBillboard",param_1,2);
      bVar4 = FUN_0046a8e0("g_vGrassInfo",param_1,2);
      bVar5 = FUN_0046a8e0("g_vLightDir",param_1,2);
      bVar6 = FUN_0046a8e0("g_vMaterialAmbient",param_1,2);
      bVar7 = FUN_0046a8e0("g_vMaterialDiffuse",param_1,2);
      bVar8 = FUN_0046a8e0("g_vMaterialDiffuse",param_1,2);
      bVar9 = FUN_0046a8e0("g_vMyPosition",param_1,2);
      ExceptionList = local_10;
      return bVar1 & bVar2 & bVar3 & bVar4 & bVar5 & bVar6 & bVar7 & bVar8 & bVar9;
    }
    pcVar12 = "CGrassRI::InitShader, technique \'Grass\' failed to load";
  }
  local_8 = 0xffffffff;
  FUN_00807d70(pcVar12,uVar10);
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00467cd0 : PUSH EBP
00467cd1 : MOV EBP,ESP
00467cd3 : PUSH -0x1
00467cd5 : PUSH 0xb82791
00467cda : MOV EAX,FS:[0x0]
00467ce0 : PUSH EAX
00467ce1 : SUB ESP,0x218
00467ce7 : PUSH EBX
00467ce8 : PUSH ESI
00467ce9 : PUSH EDI
00467cea : MOV EAX,[0x00d66fa0]
00467cef : XOR EAX,EBP
00467cf1 : PUSH EAX
00467cf2 : LEA EAX,[EBP + -0xc]
00467cf5 : MOV FS:[0x0],EAX
00467cfb : MOV EDI,dword ptr [EBP + 0x8]
00467cfe : XOR BL,BL
00467d00 : CMP dword ptr [EDI + 0x1114],0x0
00467d07 : JZ 0x00467e68
00467d0d : PUSH 0xcd5234
00467d12 : LEA EAX,[EDI + 0x1aa4]
00467d18 : PUSH EAX
00467d19 : LEA ESI,[EBP + 0xfffffee8]
00467d1f : CALL 0x00468bb0
00467d24 : MOV dword ptr [EBP + -0x4],0x0
00467d2b : MOV EDX,dword ptr [EDI + 0x1114]
00467d31 : PUSH 0xcd521c
00467d36 : PUSH 0xcd5228
00467d3b : ADD EAX,0x8
00467d3e : LEA ECX,[EDI + 0x1118]
00467d44 : PUSH EAX
00467d45 : PUSH EDX
00467d46 : MOV EDI,ECX
00467d48 : CALL 0x0046a810
00467d4d : MOV BL,AL
00467d4f : MOV dword ptr [EBP + -0x4],0xffffffff
00467d56 : MOV dword ptr [EBP + 0xfffffee8],0xcd3f48
00467d60 : TEST BL,BL
00467d62 : JZ 0x00467e61
00467d68 : MOV EDX,0xcd5240
00467d6d : LEA ESI,[EBP + 0xfffffee8]
00467d73 : CALL 0x00451af0
00467d78 : MOV dword ptr [EBP + -0x4],0x1
00467d7f : LEA EAX,[EBP + 0xfffffde0]
00467d85 : PUSH EAX
00467d86 : MOV EDI,ESI
00467d88 : CALL 0x0046a950
00467d8d : MOV ECX,EAX
00467d8f : MOV byte ptr [EBP + -0x4],0x2
00467d93 : MOV EDI,dword ptr [EBP + 0x8]
00467d96 : PUSH 0x2
00467d98 : LEA ESI,[EDI + 0x1118]
00467d9e : PUSH ESI
00467d9f : ADD ECX,0x8
00467da2 : LEA EAX,[EDI + 0x1234]
00467da8 : PUSH ECX
00467da9 : CALL 0x0046a8e0
00467dae : AND BL,AL
00467db0 : MOV byte ptr [EBP + -0x4],0x1
00467db4 : MOV EAX,0xcd3f48
00467db9 : MOV dword ptr [EBP + 0xfffffde0],EAX
00467dbf : MOV dword ptr [EBP + -0x4],0xffffffff
00467dc6 : PUSH 0x2
00467dc8 : PUSH ESI
00467dc9 : MOV dword ptr [EBP + 0xfffffee8],EAX
00467dcf : LEA EAX,[EDI + 0x134c]
00467dd5 : PUSH 0xcd524c
00467dda : CALL 0x0046a8e0
00467ddf : PUSH 0x2
00467de1 : PUSH ESI
00467de2 : AND BL,AL
00467de4 : LEA EAX,[EDI + 0x1464]
00467dea : PUSH 0xcd5264
00467def : CALL 0x0046a8e0
00467df4 : PUSH 0x2
00467df6 : PUSH ESI
00467df7 : AND BL,AL
00467df9 : LEA EAX,[EDI + 0x157c]
00467dff : PUSH 0xcd5274
00467e04 : CALL 0x0046a8e0
00467e09 : PUSH 0x2
00467e0b : PUSH ESI
00467e0c : AND BL,AL
00467e0e : LEA EAX,[EDI + 0x1694]
00467e14 : PUSH 0xcd5280
00467e19 : CALL 0x0046a8e0
00467e1e : PUSH 0x2
00467e20 : PUSH ESI
00467e21 : AND BL,AL
00467e23 : LEA EAX,[EDI + 0x17ac]
00467e29 : PUSH 0xcd5294
00467e2e : CALL 0x0046a8e0
00467e33 : PUSH 0x2
00467e35 : PUSH ESI
00467e36 : AND BL,AL
00467e38 : PUSH 0xcd5294
00467e3d : LEA EAX,[EDI + 0x17ac]
00467e43 : CALL 0x0046a8e0
00467e48 : PUSH 0x2
00467e4a : PUSH ESI
00467e4b : AND BL,AL
00467e4d : LEA EAX,[EDI + 0x18c4]
00467e53 : PUSH 0xcd52a8
00467e58 : CALL 0x0046a8e0
00467e5d : AND BL,AL
00467e5f : JMP 0x00467e75
00467e61 : PUSH 0xcd52b8
00467e66 : JMP 0x00467e6d
00467e68 : PUSH 0xcd52f0
00467e6d : CALL 0x00807d70
00467e72 : ADD ESP,0x4
00467e75 : MOV AL,BL
00467e77 : MOV ECX,dword ptr [EBP + -0xc]
00467e7a : MOV dword ptr FS:[0x0],ECX
00467e81 : POP ECX
00467e82 : POP EDI
00467e83 : POP ESI
00467e84 : POP EBX
00467e85 : MOV ESP,EBP
00467e87 : POP EBP
00467e88 : RET 0x4
