PROGRAM  : Maestia.exe
FUNCTION : FUN_006aebc0
ENTRY    : 006aebc0
BODY     : [[006aebc0, 006aecf8] [006aed00, 006aedba]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006aebc0(uint param_1)

{
  undefined4 uVar1;
  uint uVar2;
  uint in_EAX;
  uint *puVar3;
  uint uVar4;
  uint uVar5;
  uint *puVar6;
  int in_ECX;
  int iVar7;
  int iVar8;
  int local_4;
  
  uVar1 = *(undefined4 *)(in_ECX + 100);
  puVar3 = *(uint **)(in_ECX + 0x210);
  local_4 = 0;
  if (puVar3 == (uint *)0x0) {
    puVar3 = (uint *)FUN_00688c00(uVar1,0x1a4,&local_4);
    if (local_4 != 0) {
      return local_4;
    }
    puVar3[0x68] = 0;
    *(uint **)(in_ECX + 0x210) = puVar3;
  }
  if (in_EAX != 0) {
    if (*puVar3 == 0) {
      uVar4 = FUN_0068a220(uVar1,0x20,0);
      puVar3[0x25] = uVar4;
      if (local_4 != 0) {
        return local_4;
      }
      uVar4 = FUN_0068a220(uVar1,0xc4,0);
      puVar3[0x36] = uVar4;
      if (local_4 != 0) {
        return local_4;
      }
      uVar4 = FUN_0068a220(uVar1,0x10,0);
      puVar3[0x48] = uVar4;
      if (local_4 != 0) {
        return local_4;
      }
      uVar4 = FUN_0068a220(uVar1,4,0,in_EAX * 2,0,&local_4);
      puVar3[0x22] = uVar4;
      if (local_4 != 0) {
        return local_4;
      }
      puVar3[0x23] = uVar4 + in_EAX * 4;
      puVar3[0x24] = in_ECX + 0x84;
      puVar3[0x35] = in_ECX + 0xa4;
      puVar3[0x47] = in_ECX + 0x1c8;
      if (1 < in_EAX) {
        puVar6 = puVar3 + 0x37;
        iVar7 = in_EAX - 1;
        do {
          *puVar6 = puVar6[-1] + 0xc4;
          puVar6[-0x11] = puVar6[-0x12] + 0x20;
          puVar6[0x12] = puVar6[0x11] + 0x10;
          puVar6 = puVar6 + 1;
          iVar7 = iVar7 + -1;
        } while (iVar7 != 0);
      }
      *puVar3 = in_EAX;
    }
    else if (*puVar3 != in_EAX) {
      return 3;
    }
  }
  if (param_1 != 0) {
    if ((puVar3[1] != 0) && (puVar3[1] != param_1)) {
      return 3;
    }
    puVar3[1] = param_1;
  }
  uVar4 = *puVar3;
  uVar2 = puVar3[1];
  if (((uVar4 != 0) && (uVar2 != 0)) && (puVar3[6] == 0)) {
    uVar5 = FUN_0068a220(uVar1,4,0,uVar4 * uVar2,0,&local_4);
    puVar3[6] = uVar5;
    if ((local_4 == 0) && (1 < uVar4)) {
      puVar6 = puVar3 + 7;
      iVar8 = uVar4 - 1;
      iVar7 = uVar2 * 4;
      do {
        *puVar6 = puVar3[6] + iVar7;
        puVar6 = puVar6 + 1;
        iVar7 = iVar7 + uVar2 * 4;
        iVar8 = iVar8 + -1;
      } while (iVar8 != 0);
    }
  }
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
006aebc0 : PUSH ECX
006aebc1 : PUSH EBX
006aebc2 : PUSH EBP
006aebc3 : MOV EBX,ECX
006aebc5 : MOV EBP,dword ptr [EBX + 0x64]
006aebc8 : PUSH ESI
006aebc9 : MOV ESI,dword ptr [EBX + 0x210]
006aebcf : PUSH EDI
006aebd0 : MOV EDI,EAX
006aebd2 : MOV dword ptr [ESP + 0x10],0x0
006aebda : TEST ESI,ESI
006aebdc : JNZ 0x006aec0e
006aebde : LEA EAX,[ESP + 0x10]
006aebe2 : PUSH EAX
006aebe3 : PUSH 0x1a4
006aebe8 : PUSH EBP
006aebe9 : CALL 0x00688c00
006aebee : ADD ESP,0xc
006aebf1 : CMP dword ptr [ESP + 0x10],0x0
006aebf6 : MOV ESI,EAX
006aebf8 : JNZ 0x006aedb1
006aebfe : MOV dword ptr [ESI + 0x1a0],0x0
006aec08 : MOV dword ptr [EBX + 0x210],ESI
006aec0e : TEST EDI,EDI
006aec10 : JBE 0x006aed2d
006aec16 : MOV EAX,dword ptr [ESI]
006aec18 : TEST EAX,EAX
006aec1a : JNZ 0x006aed29
006aec20 : LEA ECX,[ESP + 0x10]
006aec24 : PUSH ECX
006aec25 : PUSH EAX
006aec26 : PUSH EDI
006aec27 : PUSH EAX
006aec28 : PUSH 0x20
006aec2a : PUSH EBP
006aec2b : CALL 0x0068a220
006aec30 : ADD ESP,0x18
006aec33 : MOV dword ptr [ESI + 0x94],EAX
006aec39 : CMP dword ptr [ESP + 0x10],0x0
006aec3e : JNZ 0x006aedb1
006aec44 : LEA EDX,[ESP + 0x10]
006aec48 : PUSH EDX
006aec49 : PUSH 0x0
006aec4b : PUSH EDI
006aec4c : PUSH 0x0
006aec4e : PUSH 0xc4
006aec53 : PUSH EBP
006aec54 : CALL 0x0068a220
006aec59 : ADD ESP,0x18
006aec5c : MOV dword ptr [ESI + 0xd8],EAX
006aec62 : CMP dword ptr [ESP + 0x10],0x0
006aec67 : JNZ 0x006aedb1
006aec6d : LEA EAX,[ESP + 0x10]
006aec71 : PUSH EAX
006aec72 : PUSH 0x0
006aec74 : PUSH EDI
006aec75 : PUSH 0x0
006aec77 : PUSH 0x10
006aec79 : PUSH EBP
006aec7a : CALL 0x0068a220
006aec7f : ADD ESP,0x18
006aec82 : MOV dword ptr [ESI + 0x120],EAX
006aec88 : CMP dword ptr [ESP + 0x10],0x0
006aec8d : JNZ 0x006aedb1
006aec93 : LEA ECX,[ESP + 0x10]
006aec97 : PUSH ECX
006aec98 : PUSH 0x0
006aec9a : LEA EDX,[EDI + EDI*0x1]
006aec9d : PUSH EDX
006aec9e : PUSH 0x0
006aeca0 : PUSH 0x4
006aeca2 : PUSH EBP
006aeca3 : CALL 0x0068a220
006aeca8 : ADD ESP,0x18
006aecab : MOV dword ptr [ESI + 0x88],EAX
006aecb1 : CMP dword ptr [ESP + 0x10],0x0
006aecb6 : JNZ 0x006aedb1
006aecbc : LEA ECX,[EBX + 0x84]
006aecc2 : LEA EDX,[EBX + 0xa4]
006aecc8 : ADD EBX,0x1c8
006aecce : LEA EAX,[EAX + EDI*0x4]
006aecd1 : MOV dword ptr [ESI + 0x8c],EAX
006aecd7 : MOV dword ptr [ESI + 0x90],ECX
006aecdd : MOV dword ptr [ESI + 0xd4],EDX
006aece3 : MOV dword ptr [ESI + 0x11c],EBX
006aece9 : CMP EDI,0x2
006aecec : JC 0x006aed25
006aecee : LEA EAX,[ESI + 0xdc]
006aecf4 : LEA ECX,[EDI + -0x1]
006aecf7 : JMP 0x006aed00
006aed00 : MOV EDX,dword ptr [EAX + -0x4]
006aed03 : ADD EDX,0xc4
006aed09 : MOV dword ptr [EAX],EDX
006aed0b : MOV EDX,dword ptr [EAX + -0x48]
006aed0e : ADD EDX,0x20
006aed11 : MOV dword ptr [EAX + -0x44],EDX
006aed14 : MOV EDX,dword ptr [EAX + 0x44]
006aed17 : ADD EDX,0x10
006aed1a : MOV dword ptr [EAX + 0x48],EDX
006aed1d : ADD EAX,0x4
006aed20 : SUB ECX,0x1
006aed23 : JNZ 0x006aed00
006aed25 : MOV dword ptr [ESI],EDI
006aed27 : JMP 0x006aed2d
006aed29 : CMP EAX,EDI
006aed2b : JNZ 0x006aed40
006aed2d : MOV ECX,dword ptr [ESP + 0x18]
006aed31 : TEST ECX,ECX
006aed33 : JBE 0x006aed55
006aed35 : MOV EAX,dword ptr [ESI + 0x4]
006aed38 : TEST EAX,EAX
006aed3a : JZ 0x006aed52
006aed3c : CMP EAX,ECX
006aed3e : JZ 0x006aed52
006aed40 : POP EDI
006aed41 : POP ESI
006aed42 : POP EBP
006aed43 : MOV dword ptr [ESP + 0x4],0x3
006aed4b : MOV EAX,dword ptr [ESP + 0x4]
006aed4f : POP EBX
006aed50 : POP ECX
006aed51 : RET
006aed52 : MOV dword ptr [ESI + 0x4],ECX
006aed55 : MOV EDI,dword ptr [ESI]
006aed57 : MOV EBX,dword ptr [ESI + 0x4]
006aed5a : TEST EDI,EDI
006aed5c : JZ 0x006aedb1
006aed5e : TEST EBX,EBX
006aed60 : JZ 0x006aedb1
006aed62 : CMP dword ptr [ESI + 0x18],0x0
006aed66 : JNZ 0x006aedb1
006aed68 : MOV ECX,EDI
006aed6a : IMUL ECX,EBX
006aed6d : LEA EAX,[ESP + 0x10]
006aed71 : PUSH EAX
006aed72 : PUSH 0x0
006aed74 : PUSH ECX
006aed75 : PUSH 0x0
006aed77 : PUSH 0x4
006aed79 : PUSH EBP
006aed7a : CALL 0x0068a220
006aed7f : ADD ESP,0x18
006aed82 : MOV dword ptr [ESI + 0x18],EAX
006aed85 : CMP dword ptr [ESP + 0x10],0x0
006aed8a : JNZ 0x006aedb1
006aed8c : CMP EDI,0x1
006aed8f : JBE 0x006aedb1
006aed91 : LEA EDX,[EBX*0x4 + 0x0]
006aed98 : MOV ECX,EDX
006aed9a : LEA EAX,[ESI + 0x1c]
006aed9d : DEC EDI
006aed9e : MOV EDI,EDI
006aeda0 : MOV EBX,dword ptr [ESI + 0x18]
006aeda3 : ADD EBX,ECX
006aeda5 : MOV dword ptr [EAX],EBX
006aeda7 : ADD EAX,0x4
006aedaa : ADD ECX,EDX
006aedac : SUB EDI,0x1
006aedaf : JNZ 0x006aeda0
006aedb1 : MOV EAX,dword ptr [ESP + 0x10]
006aedb5 : POP EDI
006aedb6 : POP ESI
006aedb7 : POP EBP
006aedb8 : POP EBX
006aedb9 : POP ECX
006aedba : RET
