PROGRAM  : Maestia.exe
FUNCTION : FUN_0085f220
ENTRY    : 0085f220
BODY     : [[0085f220, 0085f3ea] [0085f3ed, 0085f40d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0085f220(void)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  int iVar3;
  uint local_40;
  undefined **local_38;
  int *local_34;
  undefined1 local_30 [4];
  int local_2c;
  int local_28;
  int local_24;
  int local_20;
  undefined4 local_1c;
  void *pvStack_18;
  void *local_14;
  undefined1 *puStack_10;
  uint local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b48ea8;
  local_14 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xffffffb0;
  ExceptionList = &local_14;
  if (*(char *)(in_ECX + -0x199a) != '\0') {
    (**(code **)(*(int *)(in_ECX + -0x1f5c) + 0x228))(0);
    ExceptionList = pvStack_18;
    return;
  }
  local_24 = 0;
  local_20 = 0;
  local_1c = 0;
  local_c = 0;
  if (*(int *)(in_ECX + -0x1b74) != 0) {
    FUN_007db420(&local_28);
  }
  local_40 = 0;
  iVar3 = local_20 - local_24 >> 0x1f;
  if ((local_20 - local_24) / 0x1c + iVar3 != iVar3) {
    iVar3 = 0;
    do {
      uVar2 = FUN_007cf910(DAT_017251c8,&local_38,iVar3 + local_24,1);
      local_c._0_1_ = 1;
      FUN_0043e5a0(local_30,uVar2);
      local_c = CONCAT31(local_c._1_3_,3);
      local_38 = &PTR_FUN_00cd4964;
      if (local_34 != (int *)0x0) {
        (**(code **)(*local_34 + 0x30))();
        local_34 = (int *)0x0;
      }
      if ((*(int *)(DAT_017251ac + 0x20) != 0) && (local_2c != 0)) {
        FUN_0078e480();
      }
      local_c = local_c & 0xffffff00;
      FUN_0040ed80(local_30);
      local_40 = local_40 + 1;
      iVar3 = iVar3 + 0x1c;
    } while (local_40 < (uint)((local_20 - local_24) / 0x1c));
  }
  iVar3 = local_24;
  if (local_24 != local_20) {
    FUN_00405450(in_ECX,uVar1);
    local_20 = iVar3;
  }
  (**(code **)(*(int *)(in_ECX + -0x1f5c) + 0x224))();
  (**(code **)(*(int *)(in_ECX + -0x1f5c) + 0x228))(0);
  *(undefined1 *)(in_ECX + -0x18fe) = 1;
  puStack_10 = (undefined1 *)0xffffffff;
  if (local_28 == 0) {
    ExceptionList = pvStack_18;
    return;
  }
  FUN_00405450(local_40);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0085f220 : PUSH EBP
0085f221 : MOV EBP,ESP
0085f223 : AND ESP,0xfffffff8
0085f226 : PUSH -0x1
0085f228 : PUSH 0xb48ea8
0085f22d : MOV EAX,FS:[0x0]
0085f233 : PUSH EAX
0085f234 : SUB ESP,0x30
0085f237 : PUSH EBX
0085f238 : PUSH ESI
0085f239 : PUSH EDI
0085f23a : MOV EAX,[0x00d66fa0]
0085f23f : XOR EAX,ESP
0085f241 : PUSH EAX
0085f242 : LEA EAX,[ESP + 0x40]
0085f246 : MOV FS:[0x0],EAX
0085f24c : MOV EBX,ECX
0085f24e : MOV dword ptr [ESP + 0x18],EBX
0085f252 : MOV AL,byte ptr [EBX + 0xffffe666]
0085f258 : TEST AL,AL
0085f25a : JZ 0x0085f287
0085f25c : MOV EAX,dword ptr [EBX + 0xffffe0a4]
0085f262 : MOV EDX,dword ptr [EAX + 0x228]
0085f268 : LEA ECX,[EBX + 0xffffe0a4]
0085f26e : PUSH 0x0
0085f270 : CALL EDX
0085f272 : MOV ECX,dword ptr [ESP + 0x40]
0085f276 : MOV dword ptr FS:[0x0],ECX
0085f27d : POP ECX
0085f27e : POP EDI
0085f27f : POP ESI
0085f280 : POP EBX
0085f281 : MOV ESP,EBP
0085f283 : POP EBP
0085f284 : RET 0x4
0085f287 : XOR ESI,ESI
0085f289 : MOV dword ptr [ESP + 0x30],ESI
0085f28d : MOV dword ptr [ESP + 0x34],ESI
0085f291 : MOV dword ptr [ESP + 0x38],ESI
0085f295 : MOV dword ptr [ESP + 0x48],ESI
0085f299 : MOV ECX,dword ptr [EBX + 0xffffe48c]
0085f29f : CMP ECX,ESI
0085f2a1 : JZ 0x0085f2ad
0085f2a3 : LEA EAX,[ESP + 0x2c]
0085f2a7 : PUSH EAX
0085f2a8 : CALL 0x007db420
0085f2ad : MOV EDI,dword ptr [ESP + 0x34]
0085f2b1 : MOV dword ptr [ESP + 0x14],ESI
0085f2b5 : MOV ESI,dword ptr [ESP + 0x30]
0085f2b9 : MOV ECX,EDI
0085f2bb : SUB ECX,ESI
0085f2bd : MOV EAX,0x92492493
0085f2c2 : IMUL ECX
0085f2c4 : ADD EDX,ECX
0085f2c6 : SAR EDX,0x4
0085f2c9 : MOV ECX,EDX
0085f2cb : SHR ECX,0x1f
0085f2ce : ADD ECX,EDX
0085f2d0 : JZ 0x0085f37e
0085f2d6 : XOR EBX,EBX
0085f2d8 : PUSH 0x1
0085f2da : LEA EAX,[EBX + ESI*0x1]
0085f2dd : PUSH EAX
0085f2de : MOV EAX,[0x017251c8]
0085f2e3 : LEA EDX,[ESP + 0x24]
0085f2e7 : PUSH EDX
0085f2e8 : PUSH EAX
0085f2e9 : CALL 0x007cf910
0085f2ee : MOV byte ptr [ESP + 0x48],0x1
0085f2f3 : PUSH EAX
0085f2f4 : LEA ECX,[ESP + 0x28]
0085f2f8 : PUSH ECX
0085f2f9 : CALL 0x0043e5a0
0085f2fe : MOV byte ptr [ESP + 0x48],0x3
0085f303 : MOV ECX,dword ptr [ESP + 0x20]
0085f307 : MOV dword ptr [ESP + 0x1c],0xcd4964
0085f30f : TEST ECX,ECX
0085f311 : JZ 0x0085f322
0085f313 : MOV EDX,dword ptr [ECX]
0085f315 : MOV EAX,dword ptr [EDX + 0x30]
0085f318 : CALL EAX
0085f31a : MOV dword ptr [ESP + 0x20],0x0
0085f322 : MOV ECX,dword ptr [0x017251ac]
0085f328 : CMP dword ptr [ECX + 0x20],0x0
0085f32c : JZ 0x0085f33b
0085f32e : MOV ECX,dword ptr [ESP + 0x28]
0085f332 : TEST ECX,ECX
0085f334 : JZ 0x0085f33b
0085f336 : CALL 0x0078e480
0085f33b : MOV byte ptr [ESP + 0x48],0x0
0085f340 : LEA EDX,[ESP + 0x24]
0085f344 : PUSH EDX
0085f345 : CALL 0x0040ed80
0085f34a : MOV EDI,dword ptr [ESP + 0x34]
0085f34e : MOV ESI,dword ptr [ESP + 0x30]
0085f352 : INC dword ptr [ESP + 0x14]
0085f356 : MOV ECX,EDI
0085f358 : SUB ECX,ESI
0085f35a : MOV EAX,0x92492493
0085f35f : IMUL ECX
0085f361 : ADD EDX,ECX
0085f363 : SAR EDX,0x4
0085f366 : MOV EAX,EDX
0085f368 : SHR EAX,0x1f
0085f36b : ADD EAX,EDX
0085f36d : ADD EBX,0x1c
0085f370 : CMP dword ptr [ESP + 0x14],EAX
0085f374 : JC 0x0085f2d8
0085f37a : MOV EBX,dword ptr [ESP + 0x18]
0085f37e : CMP ESI,EDI
0085f380 : JZ 0x0085f395
0085f382 : MOV ECX,dword ptr [ESP + 0x18]
0085f386 : PUSH ECX
0085f387 : MOV EAX,ESI
0085f389 : CALL 0x00405450
0085f38e : ADD ESP,0x4
0085f391 : MOV dword ptr [ESP + 0x34],ESI
0085f395 : MOV EDX,dword ptr [EBX + 0xffffe0a4]
0085f39b : MOV EAX,dword ptr [EDX + 0x224]
0085f3a1 : LEA ESI,[EBX + 0xffffe0a4]
0085f3a7 : MOV ECX,ESI
0085f3a9 : CALL EAX
0085f3ab : MOV EDX,dword ptr [ESI]
0085f3ad : MOV EAX,dword ptr [EDX + 0x228]
0085f3b3 : XOR EDI,EDI
0085f3b5 : PUSH EDI
0085f3b6 : MOV ECX,ESI
0085f3b8 : CALL EAX
0085f3ba : MOV byte ptr [EBX + 0xffffe702],0x1
0085f3c1 : MOV dword ptr [ESP + 0x48],0xffffffff
0085f3c9 : MOV EAX,dword ptr [ESP + 0x30]
0085f3cd : CMP EAX,EDI
0085f3cf : JZ 0x0085f3ed
0085f3d1 : MOV ECX,dword ptr [ESP + 0x18]
0085f3d5 : MOV EDI,dword ptr [ESP + 0x34]
0085f3d9 : PUSH ECX
0085f3da : CALL 0x00405450
0085f3df : MOV ECX,dword ptr [ESP + 0x34]
0085f3e3 : ADD ESP,0x4
0085f3e6 : CALL 0x006f04e0
0085f3ed : MOV dword ptr [ESP + 0x30],EDI
0085f3f1 : MOV dword ptr [ESP + 0x34],EDI
0085f3f5 : MOV dword ptr [ESP + 0x38],EDI
0085f3f9 : MOV ECX,dword ptr [ESP + 0x40]
0085f3fd : MOV dword ptr FS:[0x0],ECX
0085f404 : POP ECX
0085f405 : POP EDI
0085f406 : POP ESI
0085f407 : POP EBX
0085f408 : MOV ESP,EBP
0085f40a : POP EBP
0085f40b : RET 0x4
