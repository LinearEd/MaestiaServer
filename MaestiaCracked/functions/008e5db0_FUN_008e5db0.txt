PROGRAM  : Maestia.exe
FUNCTION : FUN_008e5db0
ENTRY    : 008e5db0
BODY     : [[008e5db0, 008e5fab]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008e5db0(undefined4 param_1,undefined4 param_2)

{
  ushort uVar1;
  undefined4 uVar2;
  int *in_ECX;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4e215;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = (ushort)param_2;
  switch(param_1) {
  case 0xc382:
    if (uVar1 < *(ushort *)((int)in_ECX + 0x3a)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc383:
    if ((*(ushort *)(in_ECX + 0xe) < uVar1) && (1 < uVar1)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc384:
    (**(code **)(*in_ECX + 0x20))();
    if (*(ushort *)((int)in_ECX + 0x3a) < uVar1) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 0;
      FUN_0081d120(local_68);
      local_8._0_1_ = 2;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 3;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else if (uVar1 < *(ushort *)(in_ECX + 0xe)) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 4;
      FUN_0081d120(local_4c);
      local_8._0_1_ = 6;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 7;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,6);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else {
      FUN_009ac1d0();
      (**(code **)(*in_ECX + 0x44))(param_2);
      FUN_009ac1d0();
    }
    break;
  case 0xc386:
    (**(code **)(*in_ECX + 0x20))(local_14);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008e5db0 : PUSH EBP
008e5db1 : MOV EBP,ESP
008e5db3 : PUSH -0x1
008e5db5 : PUSH 0xb4e215
008e5dba : MOV EAX,FS:[0x0]
008e5dc0 : PUSH EAX
008e5dc1 : SUB ESP,0x90
008e5dc7 : MOV EAX,[0x00d66fa0]
008e5dcc : XOR EAX,EBP
008e5dce : MOV dword ptr [EBP + -0x10],EAX
008e5dd1 : PUSH EBX
008e5dd2 : PUSH ESI
008e5dd3 : PUSH EDI
008e5dd4 : PUSH EAX
008e5dd5 : LEA EAX,[EBP + -0xc]
008e5dd8 : MOV FS:[0x0],EAX
008e5dde : MOV EAX,dword ptr [EBP + 0x8]
008e5de1 : ADD EAX,0xffff3c7e
008e5de6 : MOV EBX,ECX
008e5de8 : CMP EAX,0x4
008e5deb : JA 0x008e5f8e
008e5df1 : JMP dword ptr [EAX*0x4 + 0x8e5fac]
008e5df8 : MOV EAX,dword ptr [EBP + 0xc]
008e5dfb : CMP AX,word ptr [EBX + 0x3a]
008e5dff : JNC 0x008e5f8e
008e5e05 : LEA ESI,[EAX + 0x1]
008e5e08 : MOV EDI,EBX
008e5e0a : CALL 0x009ac1d0
008e5e0f : JMP 0x008e5f8e
008e5e14 : MOV EAX,dword ptr [EBP + 0xc]
008e5e17 : CMP AX,word ptr [EBX + 0x38]
008e5e1b : JBE 0x008e5f8e
008e5e21 : CMP AX,0x1
008e5e25 : JBE 0x008e5f8e
008e5e2b : LEA ESI,[EAX + -0x1]
008e5e2e : MOV EDI,EBX
008e5e30 : CALL 0x009ac1d0
008e5e35 : JMP 0x008e5f8e
008e5e3a : MOV EAX,dword ptr [EBX]
008e5e3c : MOV EDX,dword ptr [EAX + 0x20]
008e5e3f : CALL EDX
008e5e41 : MOV ESI,dword ptr [EBP + 0xc]
008e5e44 : CMP SI,word ptr [EBX + 0x3a]
008e5e48 : JBE 0x008e5ed7
008e5e4e : PUSH 0xc59bbc
008e5e53 : LEA ECX,[EBP + -0x64]
008e5e56 : CALL 0x00406460
008e5e5b : MOV dword ptr [EBP + -0x4],0x0
008e5e62 : MOV ECX,dword ptr [0x0172491c]
008e5e68 : LEA EAX,[EBP + -0x64]
008e5e6b : PUSH EAX
008e5e6c : LEA EDI,[EBP + -0x2c]
008e5e6f : CALL 0x0081d120
008e5e74 : MOV byte ptr [EBP + -0x4],0x2
008e5e78 : LEA ECX,[EBP + -0x64]
008e5e7b : CALL 0x00406560
008e5e80 : MOV ECX,dword ptr [0x0172491c]
008e5e86 : MOV EDX,EDI
008e5e88 : PUSH ECX
008e5e89 : LEA EDI,[EBP + -0x80]
008e5e8c : CALL 0x00824120
008e5e91 : MOV byte ptr [EBP + -0x4],0x3
008e5e95 : PUSH -0x1
008e5e97 : PUSH 0x0
008e5e99 : PUSH EAX
008e5e9a : LEA ECX,[EBP + -0x2c]
008e5e9d : CALL 0x00405eb0
008e5ea2 : MOV byte ptr [EBP + -0x4],0x2
008e5ea6 : MOV ECX,EDI
008e5ea8 : CALL 0x00406560
008e5ead : MOV EDX,dword ptr [EBX + 0x4]
008e5eb0 : MOV ECX,dword ptr [EDX + 0x1a8]
008e5eb6 : MOV EAX,dword ptr [ECX]
008e5eb8 : MOV EAX,dword ptr [EAX + 0x44]
008e5ebb : PUSH 0x3
008e5ebd : LEA EDX,[EBP + -0x2c]
008e5ec0 : PUSH EDX
008e5ec1 : CALL EAX
008e5ec3 : MOV dword ptr [EBP + -0x4],0xffffffff
008e5eca : LEA ECX,[EBP + -0x2c]
008e5ecd : CALL 0x00406560
008e5ed2 : JMP 0x008e5f8e
008e5ed7 : CMP SI,word ptr [EBX + 0x38]
008e5edb : JNC 0x008e5f6a
008e5ee1 : PUSH 0xc59bfc
008e5ee6 : LEA ECX,[EBP + -0x48]
008e5ee9 : CALL 0x00406460
008e5eee : MOV dword ptr [EBP + -0x4],0x4
008e5ef5 : LEA ECX,[EBP + -0x48]
008e5ef8 : PUSH ECX
008e5ef9 : MOV ECX,dword ptr [0x0172491c]
008e5eff : LEA EDI,[EBP + -0x2c]
008e5f02 : CALL 0x0081d120
008e5f07 : MOV byte ptr [EBP + -0x4],0x6
008e5f0b : LEA ECX,[EBP + -0x48]
008e5f0e : CALL 0x00406560
008e5f13 : MOV EDX,dword ptr [0x0172491c]
008e5f19 : PUSH EDX
008e5f1a : MOV EDX,EDI
008e5f1c : LEA EDI,[EBP + 0xffffff64]
008e5f22 : CALL 0x00824120
008e5f27 : MOV byte ptr [EBP + -0x4],0x7
008e5f2b : PUSH -0x1
008e5f2d : PUSH 0x0
008e5f2f : PUSH EAX
008e5f30 : LEA ECX,[EBP + -0x2c]
008e5f33 : CALL 0x00405eb0
008e5f38 : MOV byte ptr [EBP + -0x4],0x6
008e5f3c : MOV ECX,EDI
008e5f3e : CALL 0x00406560
008e5f43 : MOV EAX,dword ptr [EBX + 0x4]
008e5f46 : MOV ECX,dword ptr [EAX + 0x1a8]
008e5f4c : MOV EDX,dword ptr [ECX]
008e5f4e : MOV EDX,dword ptr [EDX + 0x44]
008e5f51 : PUSH 0x3
008e5f53 : LEA EAX,[EBP + -0x2c]
008e5f56 : PUSH EAX
008e5f57 : CALL EDX
008e5f59 : MOV dword ptr [EBP + -0x4],0xffffffff
008e5f60 : LEA ECX,[EBP + -0x2c]
008e5f63 : CALL 0x00406560
008e5f68 : JMP 0x008e5f8e
008e5f6a : MOV EDI,EBX
008e5f6c : CALL 0x009ac1d0
008e5f71 : MOV EAX,dword ptr [EBX]
008e5f73 : MOV EDX,dword ptr [EAX + 0x44]
008e5f76 : PUSH ESI
008e5f77 : MOV ECX,EBX
008e5f79 : CALL EDX
008e5f7b : MOV ESI,0x1
008e5f80 : CALL 0x009ac1d0
008e5f85 : JMP 0x008e5f8e
008e5f87 : MOV EAX,dword ptr [EBX]
008e5f89 : MOV EDX,dword ptr [EAX + 0x20]
008e5f8c : CALL EDX
008e5f8e : MOV ECX,dword ptr [EBP + -0xc]
008e5f91 : MOV dword ptr FS:[0x0],ECX
008e5f98 : POP ECX
008e5f99 : POP EDI
008e5f9a : POP ESI
008e5f9b : POP EBX
008e5f9c : MOV ECX,dword ptr [EBP + -0x10]
008e5f9f : XOR ECX,EBP
008e5fa1 : CALL 0x00633e6b
008e5fa6 : MOV ESP,EBP
008e5fa8 : POP EBP
008e5fa9 : RET 0x8
