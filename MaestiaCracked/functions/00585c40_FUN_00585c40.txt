PROGRAM  : Maestia.exe
FUNCTION : FUN_00585c40
ENTRY    : 00585c40
BODY     : [[00585c40, 00585e2d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00585c40(int param_1)

{
  int iVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  undefined1 *puVar5;
  int iVar6;
  int iVar7;
  undefined4 uVar8;
  int local_10;
  int local_8;
  undefined4 local_4;
  
  cVar2 = FUN_00526030(7);
  if (cVar2 == '\0') {
    FUN_00526050("Array",0,0);
    return;
  }
  if (*(int *)(param_1 + 8) == 0) {
    iVar6 = 0;
  }
  else {
    iVar6 = *(int *)(param_1 + 8) + -0x10;
  }
  if (*(int *)(param_1 + 0x1c) == 0) {
    puVar5 = *(undefined1 **)(param_1 + 4);
    FUN_00526400();
    *puVar5 = 0;
    return;
  }
  uVar8 = *(undefined4 *)(param_1 + 0x18);
  FUN_00526260(0);
  FUN_00527730(uVar8);
  local_10 = FUN_0063b380();
  if (local_10 < 0) {
    local_10 = local_10 + *(int *)(iVar6 + 0x38);
    if (local_10 < 0) {
      local_10 = 0;
    }
  }
  iVar3 = *(int *)(iVar6 + 0x38);
  if (iVar3 < local_10) {
    local_10 = iVar3;
  }
  iVar3 = iVar3 - local_10;
  if (1 < *(int *)(param_1 + 0x1c)) {
    uVar8 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(1);
    FUN_00527730(uVar8);
    iVar3 = FUN_0063b380();
    if (iVar3 < 0) {
      iVar3 = 0;
    }
    if (*(int *)(iVar6 + 0x38) <= iVar3 + local_10) {
      iVar3 = *(int *)(iVar6 + 0x38) - local_10;
    }
  }
  iVar4 = *(int *)(*(int *)(param_1 + 0x18) + 0x78);
  iVar4 = FUN_005324f0(*(undefined4 *)(iVar4 + 0x2a0),iVar4 + 0x10,0,0xffffffff);
  if (iVar4 != 0) {
    if (0 < iVar3) {
      iVar7 = local_10 * 4;
      local_8 = iVar3;
      do {
        iVar1 = *(int *)(iVar7 + *(int *)(iVar6 + 0x34));
        if (iVar1 == 0) {
          FUN_005855c0();
        }
        else {
          FUN_00585540(iVar1);
        }
        iVar7 = iVar7 + 4;
        local_8 = local_8 + -1;
      } while (local_8 != 0);
      local_8 = 0;
    }
    FUN_005271c0(iVar4);
    if (iVar3 != 0) {
      FUN_00585610(local_10,iVar3);
    }
    if (2 < *(int *)(param_1 + 0x1c)) {
      FUN_005856e0(local_10,*(int *)(param_1 + 0x1c) + -2);
      iVar3 = 2;
      if (2 < *(int *)(param_1 + 0x1c)) {
        iVar4 = local_10 * 4;
        do {
          local_4 = FUN_00526260(iVar3);
          iVar7 = local_10 + -2 + iVar3;
          if ((-1 < iVar7) && (iVar7 < *(int *)(iVar6 + 0x38))) {
            if (*(int *)(iVar4 + *(int *)(iVar6 + 0x34)) == 0) {
              local_8 = 0x143;
              puVar5 = (undefined1 *)FUN_00515d60(iVar6,0x10,&local_8);
              if (puVar5 == (undefined1 *)0x0) {
                puVar5 = (undefined1 *)0x0;
              }
              else {
                *puVar5 = 0;
              }
              *(undefined1 **)(iVar4 + *(int *)(iVar6 + 0x34)) = puVar5;
            }
            FUN_005268b0(local_4);
          }
          iVar3 = iVar3 + 1;
          iVar4 = iVar4 + 4;
        } while (iVar3 < *(int *)(param_1 + 0x1c));
      }
    }
    FUN_00503db0();
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00585c40 : SUB ESP,0x10
00585c43 : PUSH EBX
00585c44 : MOV EBX,dword ptr [ESP + 0x18]
00585c48 : PUSH 0x7
00585c4a : MOV ECX,EBX
00585c4c : CALL 0x00526030
00585c51 : TEST AL,AL
00585c53 : JNZ 0x00585c6a
00585c55 : PUSH 0x0
00585c57 : PUSH 0x0
00585c59 : PUSH 0xb8df10
00585c5e : MOV ECX,EBX
00585c60 : CALL 0x00526050
00585c65 : POP EBX
00585c66 : ADD ESP,0x10
00585c69 : RET
00585c6a : PUSH EBP
00585c6b : MOV EBP,dword ptr [EBX + 0x8]
00585c6e : TEST EBP,EBP
00585c70 : JZ 0x00585c77
00585c72 : ADD EBP,-0x10
00585c75 : JMP 0x00585c79
00585c77 : XOR EBP,EBP
00585c79 : CMP dword ptr [EBX + 0x1c],0x0
00585c7d : JNZ 0x00585c92
00585c7f : MOV EBX,dword ptr [EBX + 0x4]
00585c82 : MOV ECX,EBX
00585c84 : CALL 0x00526400
00585c89 : POP EBP
00585c8a : MOV byte ptr [EBX],0x0
00585c8d : POP EBX
00585c8e : ADD ESP,0x10
00585c91 : RET
00585c92 : MOV EAX,dword ptr [EBX + 0x18]
00585c95 : PUSH ESI
00585c96 : PUSH EAX
00585c97 : PUSH 0x0
00585c99 : MOV ECX,EBX
00585c9b : CALL 0x00526260
00585ca0 : MOV ECX,EAX
00585ca2 : CALL 0x00527730
00585ca7 : CALL 0x0063b380
00585cac : MOV ESI,EAX
00585cae : MOV dword ptr [ESP + 0xc],ESI
00585cb2 : TEST ESI,ESI
00585cb4 : JGE 0x00585ccb
00585cb6 : ADD ESI,dword ptr [EBP + 0x38]
00585cb9 : MOV dword ptr [ESP + 0xc],ESI
00585cbd : JNS 0x00585ccb
00585cbf : MOV dword ptr [ESP + 0xc],0x0
00585cc7 : MOV ESI,dword ptr [ESP + 0xc]
00585ccb : MOV EAX,dword ptr [EBP + 0x38]
00585cce : CMP ESI,EAX
00585cd0 : JLE 0x00585cd8
00585cd2 : MOV dword ptr [ESP + 0xc],EAX
00585cd6 : MOV ESI,EAX
00585cd8 : SUB EAX,ESI
00585cda : CMP dword ptr [EBX + 0x1c],0x2
00585cde : PUSH EDI
00585cdf : MOV EDI,EAX
00585ce1 : JL 0x00585d12
00585ce3 : MOV ECX,dword ptr [EBX + 0x18]
00585ce6 : PUSH ECX
00585ce7 : PUSH 0x1
00585ce9 : MOV ECX,EBX
00585ceb : CALL 0x00526260
00585cf0 : MOV ECX,EAX
00585cf2 : CALL 0x00527730
00585cf7 : CALL 0x0063b380
00585cfc : MOV EDI,EAX
00585cfe : TEST EDI,EDI
00585d00 : JGE 0x00585d04
00585d02 : XOR EDI,EDI
00585d04 : MOV EAX,dword ptr [EBP + 0x38]
00585d07 : LEA EDX,[EDI + ESI*0x1]
00585d0a : CMP EDX,EAX
00585d0c : JL 0x00585d12
00585d0e : SUB EAX,ESI
00585d10 : MOV EDI,EAX
00585d12 : MOV ECX,dword ptr [EBX + 0x18]
00585d15 : MOV EAX,dword ptr [ECX + 0x78]
00585d18 : PUSH -0x1
00585d1a : MOV EDX,EAX
00585d1c : MOV EDX,dword ptr [EDX + 0x2a0]
00585d22 : PUSH 0x0
00585d24 : ADD EAX,0x10
00585d27 : PUSH EAX
00585d28 : PUSH EDX
00585d29 : CALL 0x005324f0
00585d2e : MOV ECX,EAX
00585d30 : MOV dword ptr [ESP + 0x14],ECX
00585d34 : TEST ECX,ECX
00585d36 : JZ 0x00585e26
00585d3c : TEST EDI,EDI
00585d3e : JLE 0x00585d71
00585d40 : ADD ESI,ESI
00585d42 : ADD ESI,ESI
00585d44 : MOV dword ptr [ESP + 0x18],EDI
00585d48 : MOV EAX,dword ptr [EBP + 0x34]
00585d4b : MOV EAX,dword ptr [ESI + EAX*0x1]
00585d4e : TEST EAX,EAX
00585d50 : JZ 0x00585d5a
00585d52 : PUSH EAX
00585d53 : CALL 0x00585540
00585d58 : JMP 0x00585d5f
00585d5a : CALL 0x005855c0
00585d5f : MOV ECX,dword ptr [ESP + 0x14]
00585d63 : ADD ESI,0x4
00585d66 : SUB dword ptr [ESP + 0x18],0x1
00585d6b : JNZ 0x00585d48
00585d6d : MOV ESI,dword ptr [ESP + 0x10]
00585d71 : PUSH ECX
00585d72 : MOV ECX,dword ptr [EBX + 0x4]
00585d75 : CALL 0x005271c0
00585d7a : TEST EDI,EDI
00585d7c : JZ 0x00585d87
00585d7e : PUSH EDI
00585d7f : PUSH ESI
00585d80 : MOV ECX,EBP
00585d82 : CALL 0x00585610
00585d87 : MOV EAX,dword ptr [EBX + 0x1c]
00585d8a : CMP EAX,0x3
00585d8d : JL 0x00585e16
00585d93 : ADD EAX,-0x2
00585d96 : PUSH EAX
00585d97 : PUSH ESI
00585d98 : MOV ECX,EBP
00585d9a : CALL 0x005856e0
00585d9f : MOV ESI,0x2
00585da4 : CMP dword ptr [EBX + 0x1c],ESI
00585da7 : JLE 0x00585e16
00585da9 : MOV EDI,dword ptr [ESP + 0x10]
00585dad : ADD EDI,EDI
00585daf : ADD EDI,EDI
00585db1 : PUSH ESI
00585db2 : MOV ECX,EBX
00585db4 : CALL 0x00526260
00585db9 : MOV ECX,dword ptr [ESP + 0x10]
00585dbd : MOV dword ptr [ESP + 0x1c],EAX
00585dc1 : LEA EAX,[ECX + ESI*0x1 + -0x2]
00585dc5 : TEST EAX,EAX
00585dc7 : JL 0x00585e0d
00585dc9 : CMP EAX,dword ptr [EBP + 0x38]
00585dcc : JGE 0x00585e0d
00585dce : MOV EDX,dword ptr [EBP + 0x34]
00585dd1 : CMP dword ptr [EDI + EDX*0x1],0x0
00585dd5 : JNZ 0x00585dfd
00585dd7 : LEA EAX,[ESP + 0x18]
00585ddb : PUSH EAX
00585ddc : PUSH 0x10
00585dde : PUSH EBP
00585ddf : MOV dword ptr [ESP + 0x24],0x143
00585de7 : CALL 0x00515d60
00585dec : TEST EAX,EAX
00585dee : JZ 0x00585df5
00585df0 : MOV byte ptr [EAX],0x0
00585df3 : JMP 0x00585df7
00585df5 : XOR EAX,EAX
00585df7 : MOV ECX,dword ptr [EBP + 0x34]
00585dfa : MOV dword ptr [EDI + ECX*0x1],EAX
00585dfd : MOV EDX,dword ptr [ESP + 0x1c]
00585e01 : MOV EAX,dword ptr [EBP + 0x34]
00585e04 : MOV ECX,dword ptr [EDI + EAX*0x1]
00585e07 : PUSH EDX
00585e08 : CALL 0x005268b0
00585e0d : INC ESI
00585e0e : ADD EDI,0x4
00585e11 : CMP ESI,dword ptr [EBX + 0x1c]
00585e14 : JL 0x00585db1
00585e16 : MOV ECX,dword ptr [ESP + 0x14]
00585e1a : POP EDI
00585e1b : POP ESI
00585e1c : POP EBP
00585e1d : POP EBX
00585e1e : ADD ESP,0x10
00585e21 : JMP 0x00503db0
00585e26 : POP EDI
00585e27 : POP ESI
00585e28 : POP EBP
00585e29 : POP EBX
00585e2a : ADD ESP,0x10
00585e2d : RET
