PROGRAM  : Maestia.exe
FUNCTION : FUN_00a1c790
ENTRY    : 00a1c790
BODY     : [[00a1c790, 00a1c952]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a1c790(void)

{
  int iVar1;
  int iVar2;
  int unaff_ESI;
  int unaff_EDI;
  float10 fVar3;
  float10 fVar4;
  undefined4 local_2c [3];
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  if (((unaff_ESI != 0) && (iVar2 = *(int *)(unaff_EDI + 0xac), unaff_ESI != iVar2)) &&
     ((*(uint *)(unaff_ESI + 8) >> 0x10 != 0x509 ||
      ((((iVar1 = FUN_004049b0(*(uint *)(unaff_ESI + 8)), iVar1 == 0 ||
         (*(short *)(iVar1 + 0x1b0) != 3)) && (*(short *)(iVar1 + 0x1b0) != 2)) &&
       (*(short *)(iVar1 + 0x1b0) != 1)))))) {
    iVar2 = *(int *)(iVar2 + 1000);
    local_20 = *(float *)(iVar2 + 0x68);
    local_1c = *(float *)(iVar2 + 0x6c);
    local_18 = *(float *)(iVar2 + 0x70);
    (**(code **)(**(int **)(unaff_EDI + 0x74) + 8))(local_2c);
    iVar2 = *(int *)(unaff_ESI + 1000);
    local_c = *(float *)(iVar2 + 0x70) - local_18;
    local_10 = *(float *)(iVar2 + 0x6c) - local_1c;
    local_14 = *(float *)(iVar2 + 0x68) - local_20;
    fVar3 = (float10)FUN_0040f460(local_c * local_c + local_10 * local_10 + local_14 * local_14);
    iVar2 = *(int *)(*(int *)(unaff_EDI + 0xac) + 0xc4) + *(int *)(unaff_ESI + 0xc4);
    fVar4 = (float10)iVar2;
    if (iVar2 < 0) {
      fVar4 = fVar4 + (float10)4.2949673e+09;
    }
    local_8 = (float)((fVar3 - fVar4) * (float10)0.1);
    D3DXVec3Normalize(&local_14,&local_14);
    if (local_8 <= 25.0) {
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a1c790 : PUSH EBP
00a1c791 : MOV EBP,ESP
00a1c793 : SUB ESP,0x2c
00a1c796 : PUSH EBX
00a1c797 : TEST ESI,ESI
00a1c799 : JZ 0x00a1c94b
00a1c79f : MOV EBX,dword ptr [EDI + 0xac]
00a1c7a5 : CMP ESI,EBX
00a1c7a7 : JZ 0x00a1c94b
00a1c7ad : MOV EAX,dword ptr [ESI + 0x8]
00a1c7b0 : MOV ECX,EAX
00a1c7b2 : SHR ECX,0x10
00a1c7b5 : CMP ECX,0x509
00a1c7bb : JNZ 0x00a1c7f3
00a1c7bd : PUSH EAX
00a1c7be : CALL 0x004049b0
00a1c7c3 : ADD ESP,0x4
00a1c7c6 : TEST EAX,EAX
00a1c7c8 : JZ 0x00a1c7d8
00a1c7ca : CMP word ptr [EAX + 0x1b0],0x3
00a1c7d2 : JZ 0x00a1c94b
00a1c7d8 : MOVZX EAX,word ptr [EAX + 0x1b0]
00a1c7df : CMP AX,0x2
00a1c7e3 : JZ 0x00a1c94b
00a1c7e9 : CMP AX,0x1
00a1c7ed : JZ 0x00a1c94b
00a1c7f3 : MOV EAX,dword ptr [EBX + 0x3e8]
00a1c7f9 : MOVSS XMM0,dword ptr [EAX + 0x68]
00a1c7fe : MOV ECX,dword ptr [EDI + 0x74]
00a1c801 : MOV EDX,dword ptr [ECX]
00a1c803 : MOV EDX,dword ptr [EDX + 0x8]
00a1c806 : ADD EAX,0x68
00a1c809 : MOVSS dword ptr [EBP + -0x1c],XMM0
00a1c80e : MOVSS XMM0,dword ptr [EAX + 0x4]
00a1c813 : MOVSS dword ptr [EBP + -0x18],XMM0
00a1c818 : MOVSS XMM0,dword ptr [EAX + 0x8]
00a1c81d : LEA EAX,[EBP + -0x28]
00a1c820 : PUSH EAX
00a1c821 : MOVSS dword ptr [EBP + -0x14],XMM0
00a1c826 : CALL EDX
00a1c828 : XORPS XMM0,XMM0
00a1c82b : MOV EAX,dword ptr [ESI + 0x3e8]
00a1c831 : MOVSS dword ptr [EBP + -0x10],XMM0
00a1c836 : MOVSS dword ptr [EBP + -0xc],XMM0
00a1c83b : MOVSS dword ptr [EBP + -0x8],XMM0
00a1c840 : MOVSS XMM2,dword ptr [EAX + 0x70]
00a1c845 : SUBSS XMM2,dword ptr [EBP + -0x14]
00a1c84a : MOVSS XMM0,dword ptr [EAX + 0x68]
00a1c84f : MOVSS XMM1,dword ptr [EAX + 0x6c]
00a1c854 : SUBSS XMM1,dword ptr [EBP + -0x18]
00a1c859 : SUBSS XMM0,dword ptr [EBP + -0x1c]
00a1c85e : ADD EAX,0x68
00a1c861 : MOVAPS XMM3,XMM2
00a1c864 : MULSS XMM3,XMM2
00a1c868 : MOVSS dword ptr [EBP + -0x8],XMM2
00a1c86d : MOVAPS XMM2,XMM1
00a1c870 : MULSS XMM2,XMM1
00a1c874 : MOVSS dword ptr [EBP + -0xc],XMM1
00a1c879 : MOVAPS XMM1,XMM0
00a1c87c : ADDSS XMM3,XMM2
00a1c880 : MULSS XMM1,XMM0
00a1c884 : PUSH ECX
00a1c885 : ADDSS XMM3,XMM1
00a1c889 : MOVSS dword ptr [EBP + -0x10],XMM0
00a1c88e : MOVSS dword ptr [ESP],XMM3
00a1c893 : CALL 0x0040f460
00a1c898 : MOV EAX,dword ptr [EDI + 0xac]
00a1c89e : MOV ECX,dword ptr [EAX + 0xc4]
00a1c8a4 : ADD ECX,dword ptr [ESI + 0xc4]
00a1c8aa : ADD ESP,0x4
00a1c8ad : MOV dword ptr [EBP + -0x4],ECX
00a1c8b0 : FILD dword ptr [EBP + -0x4]
00a1c8b3 : TEST ECX,ECX
00a1c8b5 : JGE 0x00a1c8bd
00a1c8b7 : FADD float ptr [0x00cdf0e0]
00a1c8bd : FSUBP
00a1c8bf : LEA EDX,[EBP + -0x10]
00a1c8c2 : PUSH EDX
00a1c8c3 : MOV EAX,EDX
00a1c8c5 : FMUL float ptr [0x00cdf0f0]
00a1c8cb : PUSH EAX
00a1c8cc : FSTP float ptr [EBP + -0x4]
00a1c8cf : CALL 0x004ff722
00a1c8d4 : FLD float ptr [0x00cdf500]
00a1c8da : FLD float ptr [EBP + -0x4]
00a1c8dd : FCOMIP ST0,ST1
00a1c8df : FSTP ST0
00a1c8e1 : JA 0x00a1c94b
00a1c8e3 : MOVSS XMM0,dword ptr [EBP + -0x20]
00a1c8e8 : MULSS XMM0,dword ptr [EBP + -0x8]
00a1c8ed : MOVSS XMM1,dword ptr [EBP + -0x24]
00a1c8f2 : MULSS XMM1,dword ptr [EBP + -0xc]
00a1c8f7 : ADDSS XMM0,XMM1
00a1c8fb : MOVSS XMM1,dword ptr [EBP + -0x28]
00a1c900 : MULSS XMM1,dword ptr [EBP + -0x10]
00a1c905 : ADDSS XMM0,XMM1
00a1c909 : MOVSS XMM1,dword ptr [0x00c10fc4]
00a1c911 : ADDSS XMM0,XMM1
00a1c915 : COMISS XMM0,XMM1
00a1c918 : JA 0x00a1c922
00a1c91a : MULSS XMM0,dword ptr [0x00cdf0e4]
00a1c922 : MULSS XMM0,dword ptr [0x00cdf4e4]
00a1c92a : MOVAPS XMM1,XMM0
00a1c92d : MOVSS XMM0,dword ptr [0x00cdf500]
00a1c935 : SUBSS XMM0,dword ptr [EBP + -0x4]
00a1c93a : MULSS XMM0,dword ptr [0x00c10f24]
00a1c942 : ADDSS XMM0,XMM1
00a1c946 : POP EBX
00a1c947 : MOV ESP,EBP
00a1c949 : POP EBP
00a1c94a : RET
00a1c94b : XORPS XMM0,XMM0
00a1c94e : POP EBX
00a1c94f : MOV ESP,EBP
00a1c951 : POP EBP
00a1c952 : RET
