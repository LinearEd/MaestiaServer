PROGRAM  : Maestia.exe
FUNCTION : FUN_00409590
ENTRY    : 00409590
BODY     : [[00409590, 0040966c] [00409670, 00409758]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00409590(undefined4 *param_1,char param_2)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  int *piVar5;
  int *in_ECX;
  int iVar6;
  int *piVar7;
  undefined1 local_58 [40];
  undefined1 local_30 [4];
  undefined1 local_2c;
  undefined4 local_1c;
  undefined4 local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a1c8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (0x1ffffffd < DAT_0172107c) {
    local_18 = 0xf;
    local_1c = 0;
    local_2c = 0;
    FUN_00404b50("map/set<T> too long",0x13);
    local_8 = 0;
    FUN_00404af0(local_30);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_58,&DAT_00ced8cc);
  }
  piVar4 = (int *)FUN_00486360(DAT_01721078,in_ECX,DAT_01721078);
  DAT_0172107c = DAT_0172107c + 1;
  if (in_ECX == DAT_01721078) {
    DAT_01721078[1] = (int)piVar4;
    *DAT_01721078 = (int)piVar4;
  }
  else {
    if (param_2 != '\0') {
      *in_ECX = (int)piVar4;
      if (in_ECX == (int *)*DAT_01721078) {
        *DAT_01721078 = (int)piVar4;
      }
      goto LAB_0040965a;
    }
    in_ECX[2] = (int)piVar4;
    if (in_ECX != (int *)DAT_01721078[2]) goto LAB_0040965a;
  }
  DAT_01721078[2] = (int)piVar4;
LAB_0040965a:
  cVar1 = *(char *)(piVar4[1] + 0x14);
  piVar7 = piVar4;
  do {
    if (cVar1 != '\0') {
      *(undefined1 *)(DAT_01721078[1] + 0x14) = 1;
      *param_1 = piVar4;
      ExceptionList = local_10;
      return;
    }
    piVar5 = piVar7 + 1;
    piVar2 = (int *)*piVar5;
    piVar3 = (int *)piVar2[1];
    if (piVar2 == (int *)*piVar3) {
      iVar6 = piVar3[2];
      if (*(char *)(iVar6 + 0x14) == '\0') {
LAB_004096b1:
        *(undefined1 *)(piVar2 + 5) = 1;
        *(undefined1 *)(iVar6 + 0x14) = 1;
        *(undefined1 *)(*(int *)(*piVar5 + 4) + 0x14) = 0;
        piVar7 = *(int **)(*piVar5 + 4);
      }
      else {
        if (piVar7 == (int *)piVar2[2]) {
          FUN_0040ad60();
          piVar7 = piVar2;
        }
        *(undefined1 *)(piVar7[1] + 0x14) = 1;
        *(undefined1 *)(*(int *)(piVar7[1] + 4) + 0x14) = 0;
        FUN_0040adb0();
      }
    }
    else {
      iVar6 = *piVar3;
      if (*(char *)(iVar6 + 0x14) == '\0') goto LAB_004096b1;
      if (piVar7 == (int *)*piVar2) {
        FUN_0040adb0();
        piVar7 = piVar2;
      }
      *(undefined1 *)(piVar7[1] + 0x14) = 1;
      *(undefined1 *)(*(int *)(piVar7[1] + 4) + 0x14) = 0;
      iVar6 = *(int *)(piVar7[1] + 4);
      piVar2 = *(int **)(iVar6 + 8);
      *(int *)(iVar6 + 8) = *piVar2;
      if (*(char *)(*piVar2 + 0x15) == '\0') {
        *(int *)(*piVar2 + 4) = iVar6;
      }
      piVar2[1] = *(int *)(iVar6 + 4);
      if (iVar6 == DAT_01721078[1]) {
        DAT_01721078[1] = (int)piVar2;
      }
      else {
        piVar3 = *(int **)(iVar6 + 4);
        if (iVar6 == *piVar3) {
          *piVar3 = (int)piVar2;
        }
        else {
          piVar3[2] = (int)piVar2;
        }
      }
      *piVar2 = iVar6;
      *(int **)(iVar6 + 4) = piVar2;
    }
    cVar1 = *(char *)(piVar7[1] + 0x14);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
00409590 : PUSH EBP
00409591 : MOV EBP,ESP
00409593 : PUSH -0x1
00409595 : PUSH 0xb7a1c8
0040959a : MOV EAX,FS:[0x0]
004095a0 : PUSH EAX
004095a1 : SUB ESP,0x48
004095a4 : PUSH EBX
004095a5 : PUSH ESI
004095a6 : PUSH EDI
004095a7 : MOV EAX,[0x00d66fa0]
004095ac : XOR EAX,EBP
004095ae : PUSH EAX
004095af : LEA EAX,[EBP + -0xc]
004095b2 : MOV FS:[0x0],EAX
004095b8 : MOV ESI,ECX
004095ba : CMP dword ptr [0x0172107c],0x1ffffffe
004095c4 : JC 0x00409601
004095c6 : PUSH 0x13
004095c8 : XOR EBX,EBX
004095ca : PUSH 0xcca4c4
004095cf : LEA ECX,[EBP + -0x2c]
004095d2 : MOV dword ptr [EBP + -0x14],0xf
004095d9 : MOV dword ptr [EBP + -0x18],EBX
004095dc : MOV byte ptr [EBP + -0x28],BL
004095df : CALL 0x00404b50
004095e4 : MOV dword ptr [EBP + -0x4],EBX
004095e7 : LEA EAX,[EBP + -0x2c]
004095ea : PUSH EAX
004095eb : LEA ECX,[EBP + -0x54]
004095ee : CALL 0x00404af0
004095f3 : PUSH 0xced8cc
004095f8 : LEA ECX,[EBP + -0x54]
004095fb : PUSH ECX
004095fc : CALL 0x006409eb
00409601 : MOV EAX,[0x01721078]
00409606 : MOV ECX,dword ptr [EBP + 0x10]
00409609 : PUSH EAX
0040960a : PUSH ESI
0040960b : PUSH EAX
0040960c : CALL 0x00486360
00409611 : INC dword ptr [0x0172107c]
00409617 : MOV EDI,EAX
00409619 : MOV EAX,[0x01721078]
0040961e : XOR EBX,EBX
00409620 : CMP ESI,EAX
00409622 : JNZ 0x00409636
00409624 : MOV dword ptr [EAX + 0x4],EDI
00409627 : MOV EDX,dword ptr [0x01721078]
0040962d : MOV dword ptr [EDX],EDI
0040962f : MOV EAX,[0x01721078]
00409634 : JMP 0x00409657
00409636 : CMP byte ptr [EBP + 0xc],BL
00409639 : JZ 0x0040964a
0040963b : MOV dword ptr [ESI],EDI
0040963d : MOV EAX,[0x01721078]
00409642 : CMP ESI,dword ptr [EAX]
00409644 : JNZ 0x0040965a
00409646 : MOV dword ptr [EAX],EDI
00409648 : JMP 0x0040965a
0040964a : MOV dword ptr [ESI + 0x8],EDI
0040964d : MOV EAX,[0x01721078]
00409652 : CMP ESI,dword ptr [EAX + 0x8]
00409655 : JNZ 0x0040965a
00409657 : MOV dword ptr [EAX + 0x8],EDI
0040965a : MOV ECX,dword ptr [EDI + 0x4]
0040965d : LEA EAX,[EDI + 0x4]
00409660 : MOV ESI,EDI
00409662 : CMP byte ptr [ECX + 0x14],BL
00409665 : JNZ 0x00409733
0040966b : JMP 0x00409670
00409670 : MOV ECX,dword ptr [EAX]
00409672 : MOV EDX,dword ptr [ECX + 0x4]
00409675 : CMP ECX,dword ptr [EDX]
00409677 : JNZ 0x004096aa
00409679 : MOV EDX,dword ptr [EDX + 0x8]
0040967c : CMP byte ptr [EDX + 0x14],BL
0040967f : JZ 0x004096b1
00409681 : CMP ESI,dword ptr [ECX + 0x8]
00409684 : JNZ 0x0040968d
00409686 : MOV ESI,ECX
00409688 : CALL 0x0040ad60
0040968d : MOV EAX,dword ptr [ESI + 0x4]
00409690 : MOV byte ptr [EAX + 0x14],0x1
00409694 : MOV ECX,dword ptr [ESI + 0x4]
00409697 : MOV EDX,dword ptr [ECX + 0x4]
0040969a : MOV byte ptr [EDX + 0x14],BL
0040969d : MOV EAX,dword ptr [ESI + 0x4]
004096a0 : MOV ECX,dword ptr [EAX + 0x4]
004096a3 : CALL 0x0040adb0
004096a8 : JMP 0x00409724
004096aa : MOV EDX,dword ptr [EDX]
004096ac : CMP byte ptr [EDX + 0x14],BL
004096af : JNZ 0x004096c8
004096b1 : MOV byte ptr [ECX + 0x14],0x1
004096b5 : MOV byte ptr [EDX + 0x14],0x1
004096b9 : MOV EDX,dword ptr [EAX]
004096bb : MOV ECX,dword ptr [EDX + 0x4]
004096be : MOV byte ptr [ECX + 0x14],BL
004096c1 : MOV EDX,dword ptr [EAX]
004096c3 : MOV ESI,dword ptr [EDX + 0x4]
004096c6 : JMP 0x00409724
004096c8 : CMP ESI,dword ptr [ECX]
004096ca : JNZ 0x004096d3
004096cc : MOV ESI,ECX
004096ce : CALL 0x0040adb0
004096d3 : MOV EAX,dword ptr [ESI + 0x4]
004096d6 : MOV byte ptr [EAX + 0x14],0x1
004096da : MOV ECX,dword ptr [ESI + 0x4]
004096dd : MOV EDX,dword ptr [ECX + 0x4]
004096e0 : MOV byte ptr [EDX + 0x14],BL
004096e3 : MOV EAX,dword ptr [ESI + 0x4]
004096e6 : MOV EAX,dword ptr [EAX + 0x4]
004096e9 : MOV ECX,dword ptr [EAX + 0x8]
004096ec : MOV EDX,dword ptr [ECX]
004096ee : MOV dword ptr [EAX + 0x8],EDX
004096f1 : MOV EDX,dword ptr [ECX]
004096f3 : CMP byte ptr [EDX + 0x15],BL
004096f6 : JNZ 0x004096fb
004096f8 : MOV dword ptr [EDX + 0x4],EAX
004096fb : MOV EDX,dword ptr [EAX + 0x4]
004096fe : MOV dword ptr [ECX + 0x4],EDX
00409701 : MOV EDX,dword ptr [0x01721078]
00409707 : CMP EAX,dword ptr [EDX + 0x4]
0040970a : JNZ 0x00409711
0040970c : MOV dword ptr [EDX + 0x4],ECX
0040970f : JMP 0x0040971f
00409711 : MOV EDX,dword ptr [EAX + 0x4]
00409714 : CMP EAX,dword ptr [EDX]
00409716 : JNZ 0x0040971c
00409718 : MOV dword ptr [EDX],ECX
0040971a : JMP 0x0040971f
0040971c : MOV dword ptr [EDX + 0x8],ECX
0040971f : MOV dword ptr [ECX],EAX
00409721 : MOV dword ptr [EAX + 0x4],ECX
00409724 : MOV ECX,dword ptr [ESI + 0x4]
00409727 : LEA EAX,[ESI + 0x4]
0040972a : CMP byte ptr [ECX + 0x14],BL
0040972d : JZ 0x00409670
00409733 : MOV EDX,dword ptr [0x01721078]
00409739 : MOV EAX,dword ptr [EDX + 0x4]
0040973c : MOV byte ptr [EAX + 0x14],0x1
00409740 : MOV EAX,dword ptr [EBP + 0x8]
00409743 : MOV dword ptr [EAX],EDI
00409745 : MOV ECX,dword ptr [EBP + -0xc]
00409748 : MOV dword ptr FS:[0x0],ECX
0040974f : POP ECX
00409750 : POP EDI
00409751 : POP ESI
00409752 : POP EBX
00409753 : MOV ESP,EBP
00409755 : POP EBP
00409756 : RET 0xc
