PROGRAM  : Maestia.exe
FUNCTION : FUN_008eb8b0
ENTRY    : 008eb8b0
BODY     : [[008eb8b0, 008eb93b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008eb8b0(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int *piVar3;
  int unaff_ESI;
  
  if ((*DAT_00da9894 != 0) &&
     (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
    (**(code **)*puVar1)("SetCloseAllInventory");
  }
  if (*(char *)((int)*(int **)(unaff_ESI + 0x130) + 0x32) != '\0') {
    (**(code **)(**(int **)(unaff_ESI + 0x130) + 0x20))();
  }
  piVar2 = *(int **)(unaff_ESI + 500);
  if ((piVar2 != (int *)0x0) && (*(char *)((int)piVar2 + 0x32) != '\0')) {
    (**(code **)(*piVar2 + 0x20))();
  }
  piVar2 = *(int **)(unaff_ESI + 0x3c);
  piVar3 = (int *)*piVar2;
  while( true ) {
    if (piVar3 == piVar2) {
      *(undefined1 *)(unaff_ESI + 0x36) = 0;
      return;
    }
    piVar2 = (int *)piVar3[4];
    if (piVar2 == (int *)0x0) break;
    if (*(char *)((int)piVar2 + 0x32) != '\0') {
      (**(code **)(*piVar2 + 0x20))();
    }
    FUN_00416210();
    piVar2 = *(int **)(unaff_ESI + 0x3c);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008eb8b0 : PUSH EBP
008eb8b1 : MOV EBP,ESP
008eb8b3 : PUSH ECX
008eb8b4 : MOV EAX,[0x00da9894]
008eb8b9 : MOV EAX,dword ptr [EAX]
008eb8bb : TEST EAX,EAX
008eb8bd : JZ 0x008eb8d6
008eb8bf : MOV EAX,dword ptr [EAX + 0x114]
008eb8c5 : TEST EAX,EAX
008eb8c7 : JZ 0x008eb8d6
008eb8c9 : MOV EDX,dword ptr [EAX]
008eb8cb : MOV ECX,EAX
008eb8cd : MOV EAX,dword ptr [EDX]
008eb8cf : PUSH 0xc5d948
008eb8d4 : CALL EAX
008eb8d6 : MOV ECX,dword ptr [ESI + 0x130]
008eb8dc : CMP byte ptr [ECX + 0x32],0x0
008eb8e0 : JZ 0x008eb8e9
008eb8e2 : MOV EDX,dword ptr [ECX]
008eb8e4 : MOV EAX,dword ptr [EDX + 0x20]
008eb8e7 : CALL EAX
008eb8e9 : MOV ECX,dword ptr [ESI + 0x1f4]
008eb8ef : TEST ECX,ECX
008eb8f1 : JZ 0x008eb900
008eb8f3 : CMP byte ptr [ECX + 0x32],0x0
008eb8f7 : JZ 0x008eb900
008eb8f9 : MOV EDX,dword ptr [ECX]
008eb8fb : MOV EAX,dword ptr [EDX + 0x20]
008eb8fe : CALL EAX
008eb900 : MOV ECX,dword ptr [ESI + 0x3c]
008eb903 : MOV EAX,dword ptr [ECX]
008eb905 : MOV dword ptr [EBP + -0x4],EAX
008eb908 : CMP EAX,ECX
008eb90a : JZ 0x008eb934
008eb90c : LEA ESP,[ESP]
008eb910 : MOV ECX,dword ptr [EAX + 0x10]
008eb913 : TEST ECX,ECX
008eb915 : JZ 0x008eb938
008eb917 : CMP byte ptr [ECX + 0x32],0x0
008eb91b : JZ 0x008eb924
008eb91d : MOV EDX,dword ptr [ECX]
008eb91f : MOV EAX,dword ptr [EDX + 0x20]
008eb922 : CALL EAX
008eb924 : LEA EDX,[EBP + -0x4]
008eb927 : CALL 0x00416210
008eb92c : MOV EAX,dword ptr [EBP + -0x4]
008eb92f : CMP EAX,dword ptr [ESI + 0x3c]
008eb932 : JNZ 0x008eb910
008eb934 : MOV byte ptr [ESI + 0x36],0x0
008eb938 : MOV ESP,EBP
008eb93a : POP EBP
008eb93b : RET
