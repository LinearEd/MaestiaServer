PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac8330
ENTRY    : 00ac8330
BODY     : [[00ac8330, 00ac8412] [00ac841c, 00ac8438]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00ac8330(void)

{
  uint uVar1;
  int iVar2;
  longlong lVar3;
  uint uVar4;
  void *pvVar5;
  int unaff_ESI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  pvVar5 = ExceptionList;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3ba47;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar2 = *(int *)(unaff_ESI + 0x220);
  uVar1 = iVar2 + 1;
  *(uint *)(unaff_ESI + 0x220) = uVar1;
  if (*(uint *)(unaff_ESI + 0x224) <= uVar1) {
    uVar1 = *(uint *)(unaff_ESI + 0x224) * 2;
    lVar3 = (ulonglong)uVar1 * 0x18;
    pvVar5 = (void *)FUN_006f0760((uint)lVar3 | -(uint)((int)((ulonglong)lVar3 >> 0x20) != 0),"",0,
                                  (DAT_01725270 >> 3 & 1) == 0,uVar4);
    local_8 = 0;
    if (pvVar5 == (void *)0x0) {
      pvVar5 = (void *)0x0;
    }
    else {
      FUN_0040efe0(pvVar5,0x18,uVar1,&LAB_004bd000);
    }
    local_8 = 0xffffffff;
    _memcpy(pvVar5,*(void **)(unaff_ESI + 0x21c),*(int *)(unaff_ESI + 0x224) * 0x18);
    *(int *)(unaff_ESI + 0x224) = *(int *)(unaff_ESI + 0x224) * 2;
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  ExceptionList = pvVar5;
  return *(int *)(unaff_ESI + 0x21c) + iVar2 * 0x18;
}



============================================================
DISASSEMBLY
============================================================
00ac8330 : PUSH EBP
00ac8331 : MOV EBP,ESP
00ac8333 : PUSH -0x1
00ac8335 : PUSH 0xb3ba47
00ac833a : MOV EAX,FS:[0x0]
00ac8340 : PUSH EAX
00ac8341 : SUB ESP,0x8
00ac8344 : PUSH EBX
00ac8345 : PUSH EDI
00ac8346 : MOV EAX,[0x00d66fa0]
00ac834b : XOR EAX,EBP
00ac834d : PUSH EAX
00ac834e : LEA EAX,[EBP + -0xc]
00ac8351 : MOV FS:[0x0],EAX
00ac8357 : MOV ECX,dword ptr [ESI + 0x220]
00ac835d : MOV EAX,dword ptr [ESI + 0x224]
00ac8363 : LEA EDX,[ECX + 0x1]
00ac8366 : MOV dword ptr [EBP + -0x10],ECX
00ac8369 : MOV dword ptr [ESI + 0x220],EDX
00ac836f : CMP EDX,EAX
00ac8371 : JC 0x00ac841c
00ac8377 : LEA EBX,[EAX + EAX*0x1]
00ac837a : XOR ECX,ECX
00ac837c : MOV EAX,EBX
00ac837e : MOV EDX,0x18
00ac8383 : MUL EDX
00ac8385 : SETO CL
00ac8388 : MOV EDX,0x0
00ac838d : NEG ECX
00ac838f : OR EAX,ECX
00ac8391 : MOV ECX,dword ptr [0x01725270]
00ac8397 : SHR ECX,0x3
00ac839a : AND ECX,0x1
00ac839d : SETZ DL
00ac83a0 : PUSH EDX
00ac83a1 : PUSH 0x0
00ac83a3 : PUSH 0xbf1a4b
00ac83a8 : PUSH EAX
00ac83a9 : CALL 0x006f0760
00ac83ae : MOV EDI,EAX
00ac83b0 : ADD ESP,0x10
00ac83b3 : MOV dword ptr [EBP + -0x14],EDI
00ac83b6 : MOV dword ptr [EBP + -0x4],0x0
00ac83bd : TEST EDI,EDI
00ac83bf : JZ 0x00ac83d1
00ac83c1 : PUSH 0x4bd000
00ac83c6 : PUSH EBX
00ac83c7 : PUSH 0x18
00ac83c9 : PUSH EDI
00ac83ca : CALL 0x0040efe0
00ac83cf : JMP 0x00ac83d3
00ac83d1 : XOR EDI,EDI
00ac83d3 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac83da : MOV EAX,dword ptr [ESI + 0x224]
00ac83e0 : MOV ECX,dword ptr [ESI + 0x21c]
00ac83e6 : LEA EAX,[EAX + EAX*0x2]
00ac83e9 : ADD EAX,EAX
00ac83eb : ADD EAX,EAX
00ac83ed : ADD EAX,EAX
00ac83ef : PUSH EAX
00ac83f0 : PUSH ECX
00ac83f1 : PUSH EDI
00ac83f2 : CALL 0x0063ae40
00ac83f7 : MOV EDX,dword ptr [ESI + 0x224]
00ac83fd : MOV ECX,dword ptr [ESI + 0x21c]
00ac8403 : ADD EDX,EDX
00ac8405 : ADD ESP,0xc
00ac8408 : MOV dword ptr [ESI + 0x224],EDX
00ac840e : CALL 0x006f04e0
00ac841c : LEA EAX,[ECX + ECX*0x2]
00ac841f : MOV ECX,dword ptr [ESI + 0x21c]
00ac8425 : LEA EAX,[ECX + EAX*0x8]
00ac8428 : MOV ECX,dword ptr [EBP + -0xc]
00ac842b : MOV dword ptr FS:[0x0],ECX
00ac8432 : POP ECX
00ac8433 : POP EDI
00ac8434 : POP EBX
00ac8435 : MOV ESP,EBP
00ac8437 : POP EBP
00ac8438 : RET
