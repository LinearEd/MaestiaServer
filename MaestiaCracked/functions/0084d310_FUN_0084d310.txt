PROGRAM  : Maestia.exe
FUNCTION : FUN_0084d310
ENTRY    : 0084d310
BODY     : [[0084d310, 0084d3f1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0084d310(int param_1)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  uint uVar4;
  int in_ECX;
  undefined1 local_3c [4];
  undefined2 local_38;
  undefined4 local_28;
  uint local_24;
  undefined1 local_20 [4];
  int *local_1c;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2a115;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar1 = *(int *)(*(int *)(param_1 + 0x58 + in_ECX * 4) + 0x288);
  if (iVar1 != 0) {
    FUN_00445580(local_20,iVar1 + 8);
    local_8 = 0;
    piVar2 = (int *)*local_1c;
    local_14 = local_1c;
    while (piVar2 != local_14) {
      piVar3 = (int *)piVar2[4];
      local_38 = 0;
      local_24 = 7;
      local_28 = 0;
      FUN_00406360(L"Enchant",7);
      local_8._0_1_ = 1;
      (**(code **)(*piVar3 + 0x2c))(local_3c,uVar4);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_24) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_24 = 7;
      local_28 = 0;
      local_38 = 0;
      FUN_00416210();
    }
    local_8 = 0xffffffff;
    FUN_0040f3f0(local_20);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0084d310 : PUSH EBP
0084d311 : MOV EBP,ESP
0084d313 : PUSH -0x1
0084d315 : PUSH 0xb2a115
0084d31a : MOV EAX,FS:[0x0]
0084d320 : PUSH EAX
0084d321 : SUB ESP,0x30
0084d324 : PUSH EBX
0084d325 : PUSH ESI
0084d326 : PUSH EDI
0084d327 : MOV EAX,[0x00d66fa0]
0084d32c : XOR EAX,EBP
0084d32e : PUSH EAX
0084d32f : LEA EAX,[EBP + -0xc]
0084d332 : MOV FS:[0x0],EAX
0084d338 : MOV EAX,dword ptr [EBP + 0x8]
0084d33b : MOV EDX,dword ptr [EAX + ECX*0x4 + 0x58]
0084d33f : MOV EAX,dword ptr [EDX + 0x288]
0084d345 : XOR EBX,EBX
0084d347 : CMP EAX,EBX
0084d349 : JZ 0x0084d3de
0084d34f : ADD EAX,0x8
0084d352 : PUSH EAX
0084d353 : LEA EAX,[EBP + -0x1c]
0084d356 : PUSH EAX
0084d357 : CALL 0x00445580
0084d35c : MOV dword ptr [EBP + -0x4],EBX
0084d35f : MOV ECX,dword ptr [EBP + -0x18]
0084d362 : MOV EAX,dword ptr [ECX]
0084d364 : MOV dword ptr [EBP + -0x10],ECX
0084d367 : MOV dword ptr [EBP + 0x8],EAX
0084d36a : CMP EAX,ECX
0084d36c : JZ 0x0084d3ce
0084d36e : MOV EDI,0x7
0084d373 : MOV ESI,dword ptr [EAX + 0x10]
0084d376 : XOR ECX,ECX
0084d378 : PUSH EDI
0084d379 : MOV word ptr [EBP + -0x34],CX
0084d37d : PUSH 0xc3cf54
0084d382 : LEA ECX,[EBP + -0x38]
0084d385 : MOV dword ptr [EBP + -0x20],EDI
0084d388 : MOV dword ptr [EBP + -0x24],EBX
0084d38b : CALL 0x00406360
0084d390 : MOV byte ptr [EBP + -0x4],0x1
0084d394 : MOV EDX,dword ptr [ESI]
0084d396 : MOV EDX,dword ptr [EDX + 0x2c]
0084d399 : LEA EAX,[EBP + -0x38]
0084d39c : PUSH EAX
0084d39d : MOV ECX,ESI
0084d39f : CALL EDX
0084d3a1 : MOV byte ptr [EBP + -0x4],BL
0084d3a4 : CMP dword ptr [EBP + -0x20],0x8
0084d3a8 : JC 0x0084d3b2
0084d3aa : MOV ECX,dword ptr [EBP + -0x34]
0084d3ad : CALL 0x006f04e0
0084d3b2 : XOR EAX,EAX
0084d3b4 : LEA EDX,[EBP + 0x8]
0084d3b7 : MOV dword ptr [EBP + -0x20],EDI
0084d3ba : MOV dword ptr [EBP + -0x24],EBX
0084d3bd : MOV word ptr [EBP + -0x34],AX
0084d3c1 : CALL 0x00416210
0084d3c6 : MOV EAX,dword ptr [EBP + 0x8]
0084d3c9 : CMP EAX,dword ptr [EBP + -0x10]
0084d3cc : JNZ 0x0084d373
0084d3ce : MOV dword ptr [EBP + -0x4],0xffffffff
0084d3d5 : LEA ECX,[EBP + -0x1c]
0084d3d8 : PUSH ECX
0084d3d9 : CALL 0x0040f3f0
0084d3de : MOV ECX,dword ptr [EBP + -0xc]
0084d3e1 : MOV dword ptr FS:[0x0],ECX
0084d3e8 : POP ECX
0084d3e9 : POP EDI
0084d3ea : POP ESI
0084d3eb : POP EBX
0084d3ec : MOV ESP,EBP
0084d3ee : POP EBP
0084d3ef : RET 0x4
