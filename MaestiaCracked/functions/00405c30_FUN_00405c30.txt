PROGRAM  : Maestia.exe
FUNCTION : FUN_00405c30
ENTRY    : 00405c30
BODY     : [[00405c30, 00405d41]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00405c30(int param_1,uint param_2,uint param_3)

{
  uint uVar1;
  int in_ECX;
  int iVar2;
  
  if (*(uint *)(param_1 + 0x14) < param_2) {
    FUN_00622f07();
  }
  uVar1 = *(int *)(param_1 + 0x14) - param_2;
  if (uVar1 < param_3) {
    param_3 = uVar1;
  }
  uVar1 = *(uint *)(in_ECX + 0x14);
  if ((-uVar1 - 1 <= param_3) || (uVar1 + param_3 < uVar1)) {
    FUN_00622ecf();
  }
  if (param_3 != 0) {
    uVar1 = *(int *)(in_ECX + 0x14) + param_3;
    if (0x7ffffffe < uVar1) {
      FUN_00622ecf();
    }
    if (*(uint *)(in_ECX + 0x18) < uVar1) {
      FUN_00406170(uVar1,*(undefined4 *)(in_ECX + 0x14));
    }
    else if (uVar1 == 0) {
      *(undefined4 *)(in_ECX + 0x14) = 0;
      if (7 < *(uint *)(in_ECX + 0x18)) {
        **(undefined2 **)(in_ECX + 4) = 0;
        return;
      }
      *(undefined2 *)(in_ECX + 4) = 0;
      return;
    }
    if (uVar1 != 0) {
      if (*(uint *)(param_1 + 0x18) < 8) {
        param_1 = param_1 + 4;
      }
      else {
        param_1 = *(int *)(param_1 + 4);
      }
      if (*(uint *)(in_ECX + 0x18) < 8) {
        iVar2 = in_ECX + 4;
      }
      else {
        iVar2 = *(int *)(in_ECX + 4);
      }
      _memcpy_s((void *)(iVar2 + *(int *)(in_ECX + 0x14) * 2),
                (*(uint *)(in_ECX + 0x18) - *(int *)(in_ECX + 0x14)) * 2,
                (void *)(param_1 + param_2 * 2),param_3 * 2);
      *(uint *)(in_ECX + 0x14) = uVar1;
      if (7 < *(uint *)(in_ECX + 0x18)) {
        *(undefined2 *)(*(int *)(in_ECX + 4) + uVar1 * 2) = 0;
        return;
      }
      *(undefined2 *)(in_ECX + 4 + uVar1 * 2) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00405c30 : PUSH EBP
00405c31 : MOV EBP,ESP
00405c33 : PUSH EBX
00405c34 : MOV EBX,dword ptr [EBP + 0xc]
00405c37 : PUSH ESI
00405c38 : PUSH EDI
00405c39 : MOV EDI,dword ptr [EBP + 0x8]
00405c3c : MOV ESI,ECX
00405c3e : CMP dword ptr [EDI + 0x14],EBX
00405c41 : JNC 0x00405c48
00405c43 : CALL 0x00622f07
00405c48 : MOV EAX,dword ptr [EDI + 0x14]
00405c4b : SUB EAX,EBX
00405c4d : MOV EBX,dword ptr [EBP + 0x10]
00405c50 : CMP EAX,EBX
00405c52 : CMOVC EBX,EAX
00405c55 : MOV EAX,dword ptr [ESI + 0x14]
00405c58 : OR ECX,0xffffffff
00405c5b : SUB ECX,EAX
00405c5d : CMP ECX,EBX
00405c5f : JBE 0x00405c68
00405c61 : LEA EDX,[EAX + EBX*0x1]
00405c64 : CMP EDX,EAX
00405c66 : JNC 0x00405c6d
00405c68 : CALL 0x00622ecf
00405c6d : TEST EBX,EBX
00405c6f : JBE 0x00405d39
00405c75 : MOV EDI,dword ptr [ESI + 0x14]
00405c78 : ADD EDI,EBX
00405c7a : CMP EDI,0x7ffffffe
00405c80 : JBE 0x00405c87
00405c82 : CALL 0x00622ecf
00405c87 : MOV EAX,dword ptr [ESI + 0x18]
00405c8a : CMP EAX,EDI
00405c8c : JNC 0x00405cb0
00405c8e : MOV EAX,dword ptr [ESI + 0x14]
00405c91 : PUSH EAX
00405c92 : PUSH EDI
00405c93 : MOV ECX,ESI
00405c95 : CALL 0x00406170
00405c9a : TEST EDI,EDI
00405c9c : JBE 0x00405d39
00405ca2 : MOV EAX,dword ptr [EBP + 0x8]
00405ca5 : CMP dword ptr [EAX + 0x18],0x8
00405ca9 : JC 0x00405cde
00405cab : MOV EDX,dword ptr [EAX + 0x4]
00405cae : JMP 0x00405ce1
00405cb0 : TEST EDI,EDI
00405cb2 : JNZ 0x00405c9c
00405cb4 : MOV dword ptr [ESI + 0x14],EDI
00405cb7 : CMP EAX,0x8
00405cba : JC 0x00405ccd
00405cbc : MOV EAX,dword ptr [ESI + 0x4]
00405cbf : XOR ECX,ECX
00405cc1 : POP EDI
00405cc2 : MOV word ptr [EAX],CX
00405cc5 : MOV EAX,ESI
00405cc7 : POP ESI
00405cc8 : POP EBX
00405cc9 : POP EBP
00405cca : RET 0xc
00405ccd : LEA EAX,[ESI + 0x4]
00405cd0 : XOR ECX,ECX
00405cd2 : POP EDI
00405cd3 : MOV word ptr [EAX],CX
00405cd6 : MOV EAX,ESI
00405cd8 : POP ESI
00405cd9 : POP EBX
00405cda : POP EBP
00405cdb : RET 0xc
00405cde : LEA EDX,[EAX + 0x4]
00405ce1 : MOV EAX,dword ptr [ESI + 0x18]
00405ce4 : CMP EAX,0x8
00405ce7 : JC 0x00405cee
00405ce9 : MOV ECX,dword ptr [ESI + 0x4]
00405cec : JMP 0x00405cf1
00405cee : LEA ECX,[ESI + 0x4]
00405cf1 : MOV dword ptr [EBP + 0x8],ECX
00405cf4 : MOV ECX,dword ptr [ESI + 0x14]
00405cf7 : ADD EBX,EBX
00405cf9 : PUSH EBX
00405cfa : MOV EBX,dword ptr [EBP + 0xc]
00405cfd : SUB EAX,ECX
00405cff : LEA EDX,[EDX + EBX*0x2]
00405d02 : PUSH EDX
00405d03 : ADD EAX,EAX
00405d05 : PUSH EAX
00405d06 : MOV EAX,dword ptr [EBP + 0x8]
00405d09 : LEA ECX,[EAX + ECX*0x2]
00405d0c : PUSH ECX
00405d0d : CALL 0x00633ea4
00405d12 : ADD ESP,0x10
00405d15 : CMP dword ptr [ESI + 0x18],0x8
00405d19 : MOV dword ptr [ESI + 0x14],EDI
00405d1c : JC 0x00405d30
00405d1e : MOV EAX,dword ptr [ESI + 0x4]
00405d21 : XOR EDX,EDX
00405d23 : MOV word ptr [EAX + EDI*0x2],DX
00405d27 : POP EDI
00405d28 : MOV EAX,ESI
00405d2a : POP ESI
00405d2b : POP EBX
00405d2c : POP EBP
00405d2d : RET 0xc
00405d30 : LEA EAX,[ESI + 0x4]
00405d33 : XOR EDX,EDX
00405d35 : MOV word ptr [EAX + EDI*0x2],DX
00405d39 : POP EDI
00405d3a : MOV EAX,ESI
00405d3c : POP ESI
00405d3d : POP EBX
00405d3e : POP EBP
00405d3f : RET 0xc
