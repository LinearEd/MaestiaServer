PROGRAM  : Maestia.exe
FUNCTION : FUN_0094b1e0
ENTRY    : 0094b1e0
BODY     : [[0094b1e0, 0094b34c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0094b1e0(int param_1,undefined4 param_2)

{
  int *piVar1;
  int iVar2;
  uint8_t *packet;
  byte bVar3;
  undefined1 local_2c [24];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3ff9d;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*DAT_00da9894 != 0) {
    if (param_1 == 0) {
      iVar2 = *(int *)ThreadLocalStoragePointer;
      bVar3 = (byte)((ulonglong)(*(byte *)(iVar2 + 0x18) + 1) % 3);
      *(byte *)(iVar2 + 0x18) = bVar3;
      packet = (uint8_t *)((uint)bVar3 * 0x2000 + 0x122cb8 + iVar2);
      if (packet == (uint8_t *)0x0) {
        packet = (uint8_t *)0x0;
      }
      else {
        packet[0] = '\0';
        packet[1] = '\0';
        packet[2] = 0xcb;
        packet[3] = '\x0e';
        packet[4] = '\x01';
        *(undefined4 *)(packet + 5) = param_2;
      }
      local_8 = 0xffffffff;
      if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
        FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),9,packet);
      }
    }
    else if ((param_1 == 1) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
      (**(code **)(*piVar1 + 4))
                (piVar1,"mc_petlist.SetButtonDisable",&DAT_00c72a28,0,
                 DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
      ExceptionList = local_10;
      return;
    }
    ExceptionList = local_10;
    return;
  }
  FUN_00406460(L"Window mgr is null!");
  local_8 = 0;
  if ((int *)*DAT_00da98e8 != (int *)0x0) {
    (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"RequestSummonPetKeepCallback",0x89,local_2c);
  }
  local_8 = 0xffffffff;
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0094b1e0 : PUSH EBP
0094b1e1 : MOV EBP,ESP
0094b1e3 : PUSH -0x1
0094b1e5 : PUSH 0xb3ff9d
0094b1ea : MOV EAX,FS:[0x0]
0094b1f0 : PUSH EAX
0094b1f1 : SUB ESP,0x1c
0094b1f4 : PUSH EDI
0094b1f5 : MOV EAX,[0x00d66fa0]
0094b1fa : XOR EAX,EBP
0094b1fc : PUSH EAX
0094b1fd : LEA EAX,[EBP + -0xc]
0094b200 : MOV FS:[0x0],EAX
0094b206 : MOV EAX,[0x00da9894]
0094b20b : MOV ECX,dword ptr [EAX]
0094b20d : TEST ECX,ECX
0094b20f : JNZ 0x0094b281
0094b211 : PUSH 0xc72a00
0094b216 : LEA ECX,[EBP + -0x28]
0094b219 : CALL 0x00406460
0094b21e : MOV dword ptr [EBP + -0x4],0x0
0094b225 : MOV ECX,dword ptr [0x00da98e8]
0094b22b : MOV ECX,dword ptr [ECX]
0094b22d : TEST ECX,ECX
0094b22f : JZ 0x0094b246
0094b231 : MOV EDX,dword ptr [ECX]
0094b233 : MOV EDX,dword ptr [EDX + 0x14]
0094b236 : LEA EAX,[EBP + -0x28]
0094b239 : PUSH EAX
0094b23a : PUSH 0x89
0094b23f : PUSH 0xc72914
0094b244 : CALL EDX
0094b246 : MOV dword ptr [EBP + -0x4],0xffffffff
0094b24d : CMP dword ptr [EBP + -0x10],0x8
0094b251 : JC 0x0094b25b
0094b253 : MOV ECX,dword ptr [EBP + -0x24]
0094b256 : CALL 0x006f04e0
0094b25b : XOR EAX,EAX
0094b25d : MOV dword ptr [EBP + -0x10],0x7
0094b264 : MOV dword ptr [EBP + -0x14],0x0
0094b26b : MOV word ptr [EBP + -0x24],AX
0094b26f : MOV ECX,dword ptr [EBP + -0xc]
0094b272 : MOV dword ptr FS:[0x0],ECX
0094b279 : POP ECX
0094b27a : POP EDI
0094b27b : MOV ESP,EBP
0094b27d : POP EBP
0094b27e : RET 0x8
0094b281 : MOV EAX,dword ptr [EBP + 0x8]
0094b284 : SUB EAX,0x0
0094b287 : JZ 0x0094b2c9
0094b289 : SUB EAX,0x1
0094b28c : JNZ 0x0094b33b
0094b292 : MOV EAX,dword ptr [ECX + 0x114]
0094b298 : TEST EAX,EAX
0094b29a : JZ 0x0094b33b
0094b2a0 : MOV ECX,dword ptr [EAX]
0094b2a2 : MOV EDX,dword ptr [ECX + 0x4]
0094b2a5 : PUSH 0x0
0094b2a7 : PUSH 0xc72a28
0094b2ac : PUSH 0xc72a2c
0094b2b1 : PUSH EAX
0094b2b2 : CALL EDX
0094b2b4 : ADD ESP,0x10
0094b2b7 : MOV ECX,dword ptr [EBP + -0xc]
0094b2ba : MOV dword ptr FS:[0x0],ECX
0094b2c1 : POP ECX
0094b2c2 : POP EDI
0094b2c3 : MOV ESP,EBP
0094b2c5 : POP EBP
0094b2c6 : RET 0x8
0094b2c9 : MOV EAX,FS:[0x2c]
0094b2cf : MOV ECX,dword ptr [EAX]
0094b2d1 : MOVZX EAX,byte ptr [ECX + 0x18]
0094b2d5 : INC EAX
0094b2d6 : CDQ
0094b2d7 : MOV EDI,0x3
0094b2dc : IDIV EDI
0094b2de : MOV byte ptr [ECX + 0x18],DL
0094b2e1 : MOVZX EDX,DL
0094b2e4 : SHL EDX,0xd
0094b2e7 : LEA EAX,[EDX + ECX*0x1 + 0x122cb8]
0094b2ee : MOV dword ptr [EBP + 0x8],EAX
0094b2f1 : MOV dword ptr [EBP + -0x4],0x1
0094b2f8 : TEST EAX,EAX
0094b2fa : JZ 0x0094b315
0094b2fc : MOV EDX,dword ptr [EBP + 0xc]
0094b2ff : XOR ECX,ECX
0094b301 : MOV word ptr [EAX],CX
0094b304 : MOV byte ptr [EAX + 0x2],0xcb
0094b308 : MOV byte ptr [EAX + 0x3],0xe
0094b30c : MOV byte ptr [EAX + 0x4],0x1
0094b310 : MOV dword ptr [EAX + 0x5],EDX
0094b313 : JMP 0x0094b317
0094b315 : XOR EAX,EAX
0094b317 : MOV dword ptr [EBP + -0x4],0xffffffff
0094b31e : MOV EDX,dword ptr [0x017247d4]
0094b324 : MOV ECX,dword ptr [EDX + 0x4]
0094b327 : TEST ECX,ECX
0094b329 : JZ 0x0094b33b
0094b32b : CMP byte ptr [EDX + 0x8],0x0
0094b32f : JZ 0x0094b33b
0094b331 : PUSH 0x9
0094b333 : PUSH ECX
0094b334 : MOV EDI,EAX
0094b336 : CALL 0x00a0dd40
0094b33b : MOV ECX,dword ptr [EBP + -0xc]
0094b33e : MOV dword ptr FS:[0x0],ECX
0094b345 : POP ECX
0094b346 : POP EDI
0094b347 : MOV ESP,EBP
0094b349 : POP EBP
0094b34a : RET 0x8
