PROGRAM  : Maestia.exe
FUNCTION : FUN_009d4fe0
ENTRY    : 009d4fe0
BODY     : [[009d4fe0, 009d549a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __alloca_probe replaced with injection: alloca_probe */

void FUN_009d4fe0(int param_1)

{
  wchar_t wVar1;
  undefined4 *puVar2;
  char cVar3;
  uint uVar4;
  int iVar5;
  wchar_t *pwVar6;
  undefined4 uVar7;
  undefined4 ****ppppuVar8;
  undefined4 ****ppppuVar9;
  undefined4 ****ppppuVar10;
  uint local_40cc;
  undefined1 local_40c8 [4];
  undefined2 local_40c4;
  undefined4 local_40b4;
  uint local_40b0;
  undefined4 local_40ac;
  int local_40a8;
  undefined4 local_40a4;
  undefined4 local_40a0;
  int local_409c;
  undefined4 local_4098;
  int local_4094;
  int local_4090;
  byte local_408a;
  byte local_4089;
  undefined1 local_4088 [4];
  undefined4 ***local_4084 [4];
  undefined4 local_4074;
  uint local_4070;
  undefined2 local_4068;
  undefined4 local_4058;
  uint local_4054;
  undefined1 local_4050 [4];
  undefined4 ***local_404c [4];
  undefined4 local_403c;
  uint local_4038;
  undefined4 ***local_4030 [4];
  undefined4 local_4020;
  uint local_401c;
  wchar_t local_4018;
  undefined1 local_4016 [16382];
  uint local_18;
  undefined4 uStack_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b60ee7;
  local_10 = ExceptionList;
  uStack_14 = 0x9d4ffb;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_409c = *(int *)(param_1 + 0xe8) - *(int *)(param_1 + 0xe4) >> 2;
  local_4094 = param_1;
  local_4018 = L'\0';
  local_4090 = 0;
  local_18 = uVar4;
  if (0 < local_409c) {
    do {
      local_4098 = 1;
      local_4038 = 7;
      local_403c = 0;
      local_404c[0] = (undefined4 ***)((uint)local_404c[0] & 0xffff0000);
      local_4054 = 7;
      local_4058 = 0;
      local_4068 = 0;
      local_8._0_1_ = 1;
      local_8._1_3_ = 0;
      puVar2 = *(undefined4 **)(*(int *)(local_4094 + 0xe4) + local_4090 * 4);
      iVar5 = FUN_009d4900(local_4094,puVar2[4],puVar2[6],puVar2[7],&local_408a,&local_4098,
                           local_4050,&local_40a4);
      if (iVar5 != 0) {
        pwVar6 = &local_4018;
        do {
          wVar1 = *pwVar6;
          pwVar6 = pwVar6 + 1;
        } while (wVar1 != L'\0');
        local_40a8 = (int)pwVar6 - (int)local_4016 >> 1;
        local_40a0 = 0;
        FUN_009d36c0(local_4088,&local_40a0);
        local_8._0_1_ = 2;
        local_4089 = 0;
        if ((puVar2[0x28] != 0) &&
           (cVar3 = (**(code **)(*(int *)puVar2[0x28] + 0x30))(), cVar3 != '\0')) {
          local_4089 = 1;
        }
        local_40ac = FUN_00a08b70();
        local_4030[0] = (undefined4 ***)((uint)local_4030[0] & 0xffff0000);
        local_401c = 7;
        local_4020 = 0;
        FUN_00406360(&DAT_00c96784,0);
        local_8._0_1_ = 3;
        if (*(char *)((int)puVar2 + 0x3a) != '\0') {
          local_40b0 = 7;
          local_40b4 = 0;
          local_40c4 = 0;
          FUN_00406360(L"IDS_AUCTION_BIDING",0x12);
          local_8._0_1_ = 4;
          uVar7 = FUN_0081d120(local_40c8);
          local_8._0_1_ = 5;
          FUN_00405eb0(uVar7,0,0xffffffff);
          local_8 = CONCAT31(local_8._1_3_,4);
          if (7 < local_40cc) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_40cc = 7;
          local_8._0_1_ = 3;
          if (7 < local_40b0) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_40b0 = 7;
          local_40b4 = 0;
          local_40c4 = 0;
        }
        local_8._0_1_ = 3;
        uVar7 = 0;
        if ((puVar2[0x28] != 0) && (*(short *)(puVar2[0x28] + 0x124) != 0)) {
          uVar7 = 1;
        }
        ppppuVar10 = (undefined4 ****)local_4030[0];
        if (local_401c < 8) {
          ppppuVar10 = local_4030;
        }
        ppppuVar9 = (undefined4 ****)local_4084[0];
        if (local_4070 < 8) {
          ppppuVar9 = local_4084;
        }
        ppppuVar8 = (undefined4 ****)local_404c[0];
        if (local_4038 < 8) {
          ppppuVar8 = local_404c;
        }
        __snwprintf((wchar_t *)(local_4016 + local_40a8 * 2 + -2),0x2000 - local_40a8,
                    L"%I64d&%s&%s&%d&%d&%s&%d&%d&%d&%d&%d&%d&%d&%d&%d&%d",*puVar2,puVar2[1],
                    ppppuVar8,ppppuVar9,(uint)local_408a,local_4098,ppppuVar10,puVar2[9],puVar2[10],
                    puVar2[0xb],puVar2[0xc],local_40a4,(uint)*(ushort *)(puVar2 + 0xe),local_40a0,
                    (uint)local_4089,uVar7,local_40ac);
        local_8 = CONCAT31(local_8._1_3_,2);
        if (7 < local_401c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_401c = 7;
        local_4020 = 0;
        local_4030[0] = (undefined4 ***)((uint)local_4030[0] & 0xffff0000);
        local_8._0_1_ = 1;
        if (7 < local_4070) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_4070 = 7;
        local_4074 = 0;
        local_4084[0] = (undefined4 ***)((uint)local_4084[0] & 0xffff0000);
      }
      if (local_4090 != local_409c + -1) {
        _wcscat_s(&local_4018,0x2000,L"|");
      }
      if (puVar2[0x28] == 0) {
        FUN_009d39e0(local_4094);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_4054) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_4054 = 7;
      local_4058 = 0;
      local_4068 = 0;
      local_8 = 0xffffffff;
      if (7 < local_4038) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_404c[0] = (undefined4 ***)((uint)local_404c[0] & 0xffff0000);
      local_4090 = local_4090 + 1;
      local_4038 = 7;
      local_403c = 0;
    } while (local_4090 < local_409c);
  }
  local_8 = 0xffffffff;
  (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
            (*(int **)(*DAT_00da9894 + 0x114),"mc_auction.bidSearch.OnSearchResult","%d,%d,%d,%ls",
             *(undefined4 *)(local_4094 + 0xf4),*(undefined1 *)(local_4094 + 0xf8),
             *(undefined2 *)(local_4094 + 0xfa),&local_4018,uVar4);
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009d4fe0 : PUSH EBP
009d4fe1 : MOV EBP,ESP
009d4fe3 : PUSH -0x1
009d4fe5 : PUSH 0xb60ee7
009d4fea : MOV EAX,FS:[0x0]
009d4ff0 : PUSH EAX
009d4ff1 : MOV EAX,0x40d8
009d4ff6 : CALL 0x0063b780
009d4ffb : MOV EAX,[0x00d66fa0]
009d5000 : XOR EAX,EBP
009d5002 : MOV dword ptr [EBP + -0x14],EAX
009d5005 : PUSH EBX
009d5006 : PUSH ESI
009d5007 : PUSH EDI
009d5008 : PUSH EAX
009d5009 : LEA EAX,[EBP + -0xc]
009d500c : MOV FS:[0x0],EAX
009d5012 : MOV EAX,dword ptr [EBP + 0x8]
009d5015 : MOV ECX,dword ptr [EAX + 0xe8]
009d501b : SUB ECX,dword ptr [EAX + 0xe4]
009d5021 : XOR EBX,EBX
009d5023 : SAR ECX,0x2
009d5026 : XOR EDX,EDX
009d5028 : CMP ECX,EBX
009d502a : MOV dword ptr [EBP + 0xffffbf70],EAX
009d5030 : MOV dword ptr [EBP + 0xffffbf68],ECX
009d5036 : MOV word ptr [EBP + 0xffffbfec],DX
009d503d : MOV dword ptr [EBP + 0xffffbf74],EBX
009d5043 : JLE 0x009d543c
009d5049 : LEA ESP,[ESP]
009d5050 : MOV ECX,0x7
009d5055 : XOR EDX,EDX
009d5057 : MOV dword ptr [EBP + 0xffffbf6c],0x1
009d5061 : MOV dword ptr [EBP + 0xffffbfcc],ECX
009d5067 : MOV dword ptr [EBP + 0xffffbfc8],EBX
009d506d : MOV word ptr [EBP + 0xffffbfb8],DX
009d5074 : MOV dword ptr [EBP + -0x4],EBX
009d5077 : MOV dword ptr [EBP + 0xffffbfb0],ECX
009d507d : XOR ECX,ECX
009d507f : MOV dword ptr [EBP + 0xffffbfac],EBX
009d5085 : MOV word ptr [EBP + 0xffffbf9c],CX
009d508c : MOV byte ptr [EBP + -0x4],0x1
009d5090 : MOV EDX,dword ptr [EAX + 0xe4]
009d5096 : MOV ECX,dword ptr [EBP + 0xffffbf74]
009d509c : MOV ESI,dword ptr [EDX + ECX*0x4]
009d509f : LEA EDX,[EBP + 0xffffbf60]
009d50a5 : PUSH EDX
009d50a6 : LEA ECX,[EBP + 0xffffbfb4]
009d50ac : PUSH ECX
009d50ad : LEA EDX,[EBP + 0xffffbf6c]
009d50b3 : PUSH EDX
009d50b4 : MOV EDX,dword ptr [ESI + 0x1c]
009d50b7 : LEA ECX,[EBP + 0xffffbf7a]
009d50bd : PUSH ECX
009d50be : MOV ECX,dword ptr [ESI + 0x18]
009d50c1 : PUSH EDX
009d50c2 : MOV EDX,dword ptr [ESI + 0x10]
009d50c5 : PUSH ECX
009d50c6 : PUSH EDX
009d50c7 : PUSH EAX
009d50c8 : LEA EDI,[EBP + 0xffffbf98]
009d50ce : CALL 0x009d4900
009d50d3 : TEST EAX,EAX
009d50d5 : JZ 0x009d5378
009d50db : LEA EAX,[EBP + 0xffffbfec]
009d50e1 : LEA EDX,[EAX + 0x2]
009d50e4 : MOV CX,word ptr [EAX]
009d50e7 : ADD EAX,0x2
009d50ea : CMP CX,BX
009d50ed : JNZ 0x009d50e4
009d50ef : SUB EAX,EDX
009d50f1 : SAR EAX,0x1
009d50f3 : MOV dword ptr [EBP + 0xffffbf5c],EAX
009d50f9 : LEA EAX,[EBP + 0xffffbf64]
009d50ff : PUSH EAX
009d5100 : LEA ECX,[EBP + 0xffffbf7c]
009d5106 : PUSH ECX
009d5107 : LEA EDX,[EBP + 0xffffbf98]
009d510d : MOV ECX,ESI
009d510f : MOV dword ptr [EBP + 0xffffbf64],EBX
009d5115 : CALL 0x009d36c0
009d511a : MOV byte ptr [EBP + -0x4],0x2
009d511e : MOV byte ptr [EBP + 0xffffbf7b],BL
009d5124 : CMP dword ptr [ESI + 0xa0],EBX
009d512a : JZ 0x009d5144
009d512c : MOV ECX,dword ptr [ESI + 0xa0]
009d5132 : MOV EDX,dword ptr [ECX]
009d5134 : MOV EAX,dword ptr [EDX + 0x30]
009d5137 : CALL EAX
009d5139 : TEST AL,AL
009d513b : JZ 0x009d5144
009d513d : MOV byte ptr [EBP + 0xffffbf7b],0x1
009d5144 : MOV ECX,dword ptr [ESI + 0xa0]
009d514a : CALL 0x00a08b70
009d514f : XOR ECX,ECX
009d5151 : PUSH EBX
009d5152 : MOV word ptr [EBP + 0xffffbfd4],CX
009d5159 : MOV EDI,0x7
009d515e : PUSH 0xc96784
009d5163 : LEA ECX,[EBP + 0xffffbfd0]
009d5169 : MOV dword ptr [EBP + 0xffffbf58],EAX
009d516f : MOV dword ptr [EBP + 0xffffbfe8],EDI
009d5175 : MOV dword ptr [EBP + 0xffffbfe4],EBX
009d517b : CALL 0x00406360
009d5180 : MOV byte ptr [EBP + -0x4],0x3
009d5184 : CMP byte ptr [ESI + 0x3a],BL
009d5187 : JZ 0x009d5242
009d518d : PUSH 0x12
009d518f : XOR EDX,EDX
009d5191 : PUSH 0xc96788
009d5196 : LEA ECX,[EBP + 0xffffbf3c]
009d519c : MOV dword ptr [EBP + 0xffffbf54],EDI
009d51a2 : MOV dword ptr [EBP + 0xffffbf50],EBX
009d51a8 : MOV word ptr [EBP + 0xffffbf40],DX
009d51af : CALL 0x00406360
009d51b4 : MOV byte ptr [EBP + -0x4],0x4
009d51b8 : MOV ECX,dword ptr [0x0172491c]
009d51be : LEA EAX,[EBP + 0xffffbf3c]
009d51c4 : PUSH EAX
009d51c5 : LEA EDI,[EBP + 0xffffbf20]
009d51cb : CALL 0x0081d120
009d51d0 : MOV byte ptr [EBP + -0x4],0x5
009d51d4 : PUSH -0x1
009d51d6 : PUSH EBX
009d51d7 : PUSH EAX
009d51d8 : LEA ECX,[EBP + 0xffffbfd0]
009d51de : CALL 0x00405eb0
009d51e3 : MOV byte ptr [EBP + -0x4],0x4
009d51e7 : CMP dword ptr [EBP + 0xffffbf38],0x8
009d51ee : JC 0x009d51fb
009d51f0 : MOV ECX,dword ptr [EBP + 0xffffbf24]
009d51f6 : CALL 0x006f04e0
009d51fb : MOV EDI,0x7
009d5200 : XOR ECX,ECX
009d5202 : MOV dword ptr [EBP + 0xffffbf38],EDI
009d5208 : MOV dword ptr [EBP + 0xffffbf34],EBX
009d520e : MOV word ptr [EBP + 0xffffbf24],CX
009d5215 : MOV byte ptr [EBP + -0x4],0x3
009d5219 : CMP dword ptr [EBP + 0xffffbf54],0x8
009d5220 : JC 0x009d522d
009d5222 : MOV ECX,dword ptr [EBP + 0xffffbf40]
009d5228 : CALL 0x006f04e0
009d522d : XOR EDX,EDX
009d522f : MOV dword ptr [EBP + 0xffffbf54],EDI
009d5235 : MOV dword ptr [EBP + 0xffffbf50],EBX
009d523b : MOV word ptr [EBP + 0xffffbf40],DX
009d5242 : MOV EAX,dword ptr [ESI + 0xa0]
009d5248 : XOR DL,DL
009d524a : CMP EAX,EBX
009d524c : JZ 0x009d525c
009d524e : MOVZX EAX,word ptr [EAX + 0x124]
009d5255 : CMP AX,BX
009d5258 : JZ 0x009d525c
009d525a : MOV DL,0x1
009d525c : CMP dword ptr [EBP + 0xffffbfe8],0x8
009d5263 : MOV EDI,dword ptr [EBP + 0xffffbfd4]
009d5269 : JNC 0x009d5271
009d526b : LEA EDI,[EBP + 0xffffbfd4]
009d5271 : MOV ECX,dword ptr [EBP + 0xffffbf80]
009d5277 : MOV EAX,0x8
009d527c : CMP dword ptr [EBP + 0xffffbf94],EAX
009d5282 : JNC 0x009d528a
009d5284 : LEA ECX,[EBP + 0xffffbf80]
009d528a : CMP dword ptr [EBP + 0xffffbfcc],EAX
009d5290 : MOV EAX,dword ptr [EBP + 0xffffbfb8]
009d5296 : JNC 0x009d529e
009d5298 : LEA EAX,[EBP + 0xffffbfb8]
009d529e : PUSH dword ptr [EBP + 0xffffbf58]
009d52a4 : MOVZX EDX,DL
009d52a7 : PUSH EDX
009d52a8 : MOVZX EDX,byte ptr [EBP + 0xffffbf7b]
009d52af : PUSH EDX
009d52b0 : MOV EDX,dword ptr [EBP + 0xffffbf64]
009d52b6 : PUSH EDX
009d52b7 : MOVZX EDX,word ptr [ESI + 0x38]
009d52bb : PUSH EDX
009d52bc : MOV EDX,dword ptr [EBP + 0xffffbf60]
009d52c2 : PUSH EDX
009d52c3 : MOV EDX,dword ptr [ESI + 0x30]
009d52c6 : PUSH EDX
009d52c7 : MOV EDX,dword ptr [ESI + 0x2c]
009d52ca : PUSH EDX
009d52cb : MOV EDX,dword ptr [ESI + 0x28]
009d52ce : PUSH EDX
009d52cf : MOV EDX,dword ptr [ESI + 0x24]
009d52d2 : PUSH EDX
009d52d3 : MOV EDX,dword ptr [EBP + 0xffffbf6c]
009d52d9 : PUSH EDI
009d52da : PUSH EDX
009d52db : MOVZX EDX,byte ptr [EBP + 0xffffbf7a]
009d52e2 : PUSH EDX
009d52e3 : PUSH ECX
009d52e4 : MOV ECX,dword ptr [ESI]
009d52e6 : PUSH EAX
009d52e7 : MOV EAX,dword ptr [ESI + 0x4]
009d52ea : PUSH EAX
009d52eb : MOV EAX,dword ptr [EBP + 0xffffbf5c]
009d52f1 : PUSH ECX
009d52f2 : MOV EDX,0x2000
009d52f7 : SUB EDX,EAX
009d52f9 : PUSH 0xc967b0
009d52fe : PUSH EDX
009d52ff : LEA EAX,[EBP + EAX*0x2 + 0xffffbfec]
009d5306 : PUSH EAX
009d5307 : CALL 0x006343c8
009d530c : ADD ESP,0x50
009d530f : MOV byte ptr [EBP + -0x4],0x2
009d5313 : MOV EDI,0x8
009d5318 : CMP dword ptr [EBP + 0xffffbfe8],EDI
009d531e : JC 0x009d532b
009d5320 : MOV ECX,dword ptr [EBP + 0xffffbfd4]
009d5326 : CALL 0x006f04e0
009d532b : XOR EBX,EBX
009d532d : XOR ECX,ECX
009d532f : MOV dword ptr [EBP + 0xffffbfe8],0x7
009d5339 : MOV dword ptr [EBP + 0xffffbfe4],EBX
009d533f : MOV word ptr [EBP + 0xffffbfd4],CX
009d5346 : MOV byte ptr [EBP + -0x4],0x1
009d534a : CMP dword ptr [EBP + 0xffffbf94],EDI
009d5350 : JC 0x009d535d
009d5352 : MOV ECX,dword ptr [EBP + 0xffffbf80]
009d5358 : CALL 0x006f04e0
009d535d : XOR EDX,EDX
009d535f : MOV dword ptr [EBP + 0xffffbf94],0x7
009d5369 : MOV dword ptr [EBP + 0xffffbf90],EBX
009d536f : MOV word ptr [EBP + 0xffffbf80],DX
009d5376 : JMP 0x009d537d
009d5378 : MOV EDI,0x8
009d537d : MOV EAX,dword ptr [EBP + 0xffffbf68]
009d5383 : DEC EAX
009d5384 : CMP dword ptr [EBP + 0xffffbf74],EAX
009d538a : JZ 0x009d53a5
009d538c : PUSH 0xc96818
009d5391 : LEA EAX,[EBP + 0xffffbfec]
009d5397 : PUSH 0x2000
009d539c : PUSH EAX
009d539d : CALL 0x006362c1
009d53a2 : ADD ESP,0xc
009d53a5 : CMP dword ptr [ESI + 0xa0],EBX
009d53ab : JNZ 0x009d53bb
009d53ad : MOV ECX,dword ptr [EBP + 0xffffbf70]
009d53b3 : PUSH ECX
009d53b4 : MOV ECX,ESI
009d53b6 : CALL 0x009d39e0
009d53bb : MOV byte ptr [EBP + -0x4],BL
009d53be : CMP dword ptr [EBP + 0xffffbfb0],EDI
009d53c4 : JC 0x009d53d1
009d53c6 : MOV ECX,dword ptr [EBP + 0xffffbf9c]
009d53cc : CALL 0x006f04e0
009d53d1 : XOR EDX,EDX
009d53d3 : MOV dword ptr [EBP + 0xffffbfb0],0x7
009d53dd : MOV dword ptr [EBP + 0xffffbfac],EBX
009d53e3 : MOV word ptr [EBP + 0xffffbf9c],DX
009d53ea : MOV dword ptr [EBP + -0x4],0xffffffff
009d53f1 : CMP dword ptr [EBP + 0xffffbfcc],EDI
009d53f7 : JC 0x009d5404
009d53f9 : MOV ECX,dword ptr [EBP + 0xffffbfb8]
009d53ff : CALL 0x006f04e0
009d5404 : XOR EAX,EAX
009d5406 : MOV word ptr [EBP + 0xffffbfb8],AX
009d540d : MOV EAX,dword ptr [EBP + 0xffffbf74]
009d5413 : INC EAX
009d5414 : CMP EAX,dword ptr [EBP + 0xffffbf68]
009d541a : MOV dword ptr [EBP + 0xffffbf74],EAX
009d5420 : MOV EAX,dword ptr [EBP + 0xffffbf70]
009d5426 : MOV dword ptr [EBP + 0xffffbfcc],0x7
009d5430 : MOV dword ptr [EBP + 0xffffbfc8],EBX
009d5436 : JL 0x009d5050
009d543c : MOV ECX,dword ptr [0x00da9894]
009d5442 : MOV EDX,dword ptr [ECX]
009d5444 : MOV ECX,dword ptr [EDX + 0x114]
009d544a : MOV EDX,dword ptr [ECX]
009d544c : LEA ESI,[EBP + 0xffffbfec]
009d5452 : PUSH ESI
009d5453 : MOVZX ESI,word ptr [EAX + 0xfa]
009d545a : PUSH ESI
009d545b : MOVZX ESI,byte ptr [EAX + 0xf8]
009d5462 : MOV EAX,dword ptr [EAX + 0xf4]
009d5468 : PUSH ESI
009d5469 : PUSH EAX
009d546a : PUSH 0xc9681c
009d546f : PUSH 0xc9682c
009d5474 : PUSH ECX
009d5475 : MOV ECX,dword ptr [EDX + 0x4]
009d5478 : CALL ECX
009d547a : ADD ESP,0x1c
009d547d : MOV ECX,dword ptr [EBP + -0xc]
009d5480 : MOV dword ptr FS:[0x0],ECX
009d5487 : POP ECX
009d5488 : POP EDI
009d5489 : POP ESI
009d548a : POP EBX
009d548b : MOV ECX,dword ptr [EBP + -0x14]
009d548e : XOR ECX,EBP
009d5490 : CALL 0x00633e6b
009d5495 : MOV ESP,EBP
009d5497 : POP EBP
009d5498 : RET 0x4
