PROGRAM  : Maestia.exe
FUNCTION : FUN_0079c8b0
ENTRY    : 0079c8b0
BODY     : [[0079c8b0, 0079ca39]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0079c8b0(void)

{
  int *piVar1;
  int in_EAX;
  DWORD DVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  undefined1 auStack_24 [4];
  float local_20;
  int local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  
  if ((*(char *)(in_EAX + 0x146) != '\0') &&
     (iVar3 = *(int *)(in_EAX + 0x15c) - *(int *)(in_EAX + 0x158), iVar4 = iVar3 >> 0x1f,
     iVar3 / 0x18 + iVar4 != iVar4)) {
    DVar2 = GetTickCount();
    local_1c = DVar2 - *(int *)(in_EAX + 0x150);
    fVar5 = (float)local_1c;
    if (local_1c < 0) {
      fVar5 = fVar5 + 4.2949673e+09;
    }
    if (*(char *)(in_EAX + 0x147) == '\0') {
      local_20 = (*(float *)(in_EAX + 0x14c) - (fVar5 * 0.001 - *(float *)(in_EAX + 0x148))) /
                 *(float *)(in_EAX + 0x14c);
      if (local_20 < 0.0) {
        FUN_0079c5c0();
        return;
      }
    }
    else {
      local_20 = (fVar5 * 0.001) / *(float *)(in_EAX + 0x148);
      if (1.0 < local_20) {
        local_20 = 1.0;
        *(undefined1 *)(in_EAX + 0x147) = 0;
      }
    }
    local_1c = (*(int *)(in_EAX + 0x15c) - *(int *)(in_EAX + 0x158)) / 0x18;
    if (0 < local_1c) {
      iVar4 = 0;
      fVar5 = local_20;
      do {
        piVar1 = *(int **)(iVar4 + *(int *)(in_EAX + 0x158));
        iVar3 = iVar4 + *(int *)(in_EAX + 0x158);
        if (piVar1 != (int *)0x0) {
          local_18 = 0;
          local_14 = 0;
          local_10 = 0;
          local_c = 0x3f800000;
          D3DXQuaternionRotationAxis(&local_18,iVar3 + 4,*(float *)(iVar3 + 0x10) * fVar5);
          (**(code **)(*piVar1 + 0x90))(auStack_24);
          FUN_0079b9d0(piVar1);
          fVar5 = local_20;
        }
        iVar4 = iVar4 + 0x18;
        local_1c = local_1c + -1;
      } while (local_1c != 0);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0079c8b0 : PUSH EBP
0079c8b1 : MOV EBP,ESP
0079c8b3 : AND ESP,0xfffffff8
0079c8b6 : SUB ESP,0x1c
0079c8b9 : PUSH EBX
0079c8ba : PUSH ESI
0079c8bb : MOV ESI,EAX
0079c8bd : CMP byte ptr [ESI + 0x146],0x0
0079c8c4 : PUSH EDI
0079c8c5 : JZ 0x0079c9f7
0079c8cb : MOV ECX,dword ptr [ESI + 0x15c]
0079c8d1 : SUB ECX,dword ptr [ESI + 0x158]
0079c8d7 : MOV EAX,0x2aaaaaab
0079c8dc : IMUL ECX
0079c8de : SAR EDX,0x2
0079c8e1 : MOV EAX,EDX
0079c8e3 : SHR EAX,0x1f
0079c8e6 : ADD EAX,EDX
0079c8e8 : JZ 0x0079c9f7
0079c8ee : CALL dword ptr [0x00b850d8]
0079c8f4 : SUB EAX,dword ptr [ESI + 0x150]
0079c8fa : MOV dword ptr [ESP + 0x14],EAX
0079c8fe : FILD dword ptr [ESP + 0x14]
0079c902 : TEST EAX,EAX
0079c904 : JGE 0x0079c90c
0079c906 : FADD float ptr [0x00cdf0e0]
0079c90c : CMP byte ptr [ESI + 0x147],0x0
0079c913 : FMUL float ptr [0x00cdf128]
0079c919 : MOVSS XMM3,dword ptr [0x00c10fc4]
0079c921 : XORPS XMM1,XMM1
0079c924 : FSTP float ptr [ESP + 0x10]
0079c928 : JZ 0x0079c9fe
0079c92e : MOVSS XMM0,dword ptr [ESP + 0x10]
0079c934 : DIVSS XMM0,dword ptr [ESI + 0x148]
0079c93c : COMISS XMM0,XMM3
0079c93f : MOVSS dword ptr [ESP + 0x10],XMM0
0079c945 : JBE 0x0079c957
0079c947 : MOVAPS XMM0,XMM3
0079c94a : MOVSS dword ptr [ESP + 0x10],XMM0
0079c950 : MOV byte ptr [ESI + 0x147],0x0
0079c957 : MOV ECX,dword ptr [ESI + 0x15c]
0079c95d : SUB ECX,dword ptr [ESI + 0x158]
0079c963 : MOV EAX,0x2aaaaaab
0079c968 : IMUL ECX
0079c96a : SAR EDX,0x2
0079c96d : MOV EAX,EDX
0079c96f : SHR EAX,0x1f
0079c972 : ADD EAX,EDX
0079c974 : TEST EAX,EAX
0079c976 : JLE 0x0079c9f7
0079c978 : XOR EBX,EBX
0079c97a : MOV dword ptr [ESP + 0x14],EAX
0079c97e : MOV ECX,dword ptr [ESI + 0x158]
0079c984 : MOV EDI,dword ptr [EBX + ECX*0x1]
0079c987 : LEA EAX,[EBX + ECX*0x1]
0079c98a : TEST EDI,EDI
0079c98c : JZ 0x0079c9ed
0079c98e : MOVSS dword ptr [ESP + 0x18],XMM1
0079c994 : MOVSS dword ptr [ESP + 0x1c],XMM1
0079c99a : MOVSS dword ptr [ESP + 0x20],XMM1
0079c9a0 : PUSH ECX
0079c9a1 : MOVSS dword ptr [ESP + 0x28],XMM3
0079c9a7 : MOVSS XMM1,dword ptr [EAX + 0x10]
0079c9ac : MULSS XMM1,XMM0
0079c9b0 : MOVSS dword ptr [ESP],XMM1
0079c9b5 : ADD EAX,0x4
0079c9b8 : PUSH EAX
0079c9b9 : LEA EDX,[ESP + 0x20]
0079c9bd : PUSH EDX
0079c9be : CALL 0x004ff710
0079c9c3 : MOV EAX,dword ptr [EDI]
0079c9c5 : MOV EDX,dword ptr [EAX + 0x90]
0079c9cb : LEA ECX,[ESP + 0x18]
0079c9cf : PUSH ECX
0079c9d0 : MOV ECX,EDI
0079c9d2 : CALL EDX
0079c9d4 : PUSH EDI
0079c9d5 : MOV ECX,ESI
0079c9d7 : CALL 0x0079b9d0
0079c9dc : XORPS XMM1,XMM1
0079c9df : MOVSS XMM3,dword ptr [0x00c10fc4]
0079c9e7 : MOVSS XMM0,dword ptr [ESP + 0x10]
0079c9ed : ADD EBX,0x18
0079c9f0 : SUB dword ptr [ESP + 0x14],0x1
0079c9f5 : JNZ 0x0079c97e
0079c9f7 : POP EDI
0079c9f8 : POP ESI
0079c9f9 : POP EBX
0079c9fa : MOV ESP,EBP
0079c9fc : POP EBP
0079c9fd : RET
0079c9fe : MOVSS XMM2,dword ptr [ESI + 0x14c]
0079ca06 : MOVSS XMM4,dword ptr [ESP + 0x10]
0079ca0c : SUBSS XMM4,dword ptr [ESI + 0x148]
0079ca14 : MOVAPS XMM0,XMM2
0079ca17 : SUBSS XMM0,XMM4
0079ca1b : DIVSS XMM0,XMM2
0079ca1f : COMISS XMM1,XMM0
0079ca22 : MOVSS dword ptr [ESP + 0x10],XMM0
0079ca28 : JBE 0x0079c957
0079ca2e : CALL 0x0079c5c0
0079ca33 : POP EDI
0079ca34 : POP ESI
0079ca35 : POP EBX
0079ca36 : MOV ESP,EBP
0079ca38 : POP EBP
0079ca39 : RET
