PROGRAM  : Maestia.exe
FUNCTION : FUN_00900500
ENTRY    : 00900500
BODY     : [[00900500, 00900629]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00900500(int param_1,int param_2,int param_3)

{
  int *piVar1;
  float fVar2;
  float fVar3;
  int iVar4;
  undefined4 uVar5;
  
  if (param_3 != 0) {
    iVar4 = FUN_00a1a840();
    if ((((iVar4 != 0) || (iVar4 = FUN_00a1a6d0(), iVar4 != 0)) ||
        (iVar4 = FUN_00a1a780(), iVar4 != 0)) && (*(char *)(iVar4 + 0x3b1) != '\0')) {
      *(undefined4 *)(param_1 + 0xa4) = 0;
      *(undefined4 *)(param_1 + 0xa0) = 0;
      *(undefined1 *)(param_1 + 0xac) = 1;
      return;
    }
    fVar2 = (float)param_2;
    if (param_2 < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar3 = (float)param_3;
    if (param_3 < 0) {
      fVar3 = fVar3 + 4.2949673e+09;
    }
    fVar2 = fVar2 / fVar3;
    *(float *)(param_1 + 0xa0) = fVar2;
    if (fVar2 < *(float *)(param_1 + 0xa4)) {
      if (*(float *)(param_1 + 0xa4) - fVar2 <= DAT_00d72c24) {
        uVar5 = 0x3cb43958;
      }
      else {
        uVar5 = 0xbcb43958;
      }
      *(undefined4 *)(param_1 + 0xa8) = uVar5;
    }
    *(undefined1 *)(param_1 + 0xac) = 1;
    return;
  }
  if (*DAT_00da9894 == 0) {
    return;
  }
  piVar1 = *(int **)(*DAT_00da9894 + 0x114);
  if (piVar1 == (int *)0x0) {
    return;
  }
  (**(code **)(*piVar1 + 4))(piVar1,"SetTargetHpScale",&DAT_00c63048,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
00900500 : PUSH EBP
00900501 : MOV EBP,ESP
00900503 : AND ESP,0xffffffc0
00900506 : SUB ESP,0x34
00900509 : CMP dword ptr [EBP + 0x10],0x0
0090050d : PUSH EBX
0090050e : MOV EBX,dword ptr [EBP + 0x8]
00900511 : PUSH ESI
00900512 : PUSH EDI
00900513 : JNZ 0x00900558
00900515 : MOV EAX,[0x00da9894]
0090051a : MOV EAX,dword ptr [EAX]
0090051c : TEST EAX,EAX
0090051e : JZ 0x00900621
00900524 : MOV EAX,dword ptr [EAX + 0x114]
0090052a : TEST EAX,EAX
0090052c : JZ 0x00900621
00900532 : FLDZ
00900534 : MOV ECX,dword ptr [EAX]
00900536 : MOV EDX,dword ptr [ECX + 0x4]
00900539 : SUB ESP,0x8
0090053c : FSTP double ptr [ESP]
0090053f : PUSH 0xc63048
00900544 : PUSH 0xc6304c
00900549 : PUSH EAX
0090054a : CALL EDX
0090054c : ADD ESP,0x14
0090054f : POP EDI
00900550 : POP ESI
00900551 : POP EBX
00900552 : MOV ESP,EBP
00900554 : POP EBP
00900555 : RET 0xc
00900558 : MOV ECX,dword ptr [0x00da93ec]
0090055e : MOV ESI,dword ptr [ECX + 0x24c]
00900564 : PUSH ESI
00900565 : MOV EDI,ECX
00900567 : CALL 0x00a1a840
0090056c : TEST EAX,EAX
0090056e : JNZ 0x00900588
00900570 : PUSH ESI
00900571 : MOV ECX,EDI
00900573 : CALL 0x00a1a6d0
00900578 : TEST EAX,EAX
0090057a : JNZ 0x00900588
0090057c : PUSH ESI
0090057d : MOV ECX,EDI
0090057f : CALL 0x00a1a780
00900584 : TEST EAX,EAX
00900586 : JZ 0x009005b4
00900588 : CMP byte ptr [EAX + 0x3b1],0x0
0090058f : JZ 0x009005b4
00900591 : XORPS XMM0,XMM0
00900594 : MOVSS dword ptr [EBX + 0xa4],XMM0
0090059c : MOVSS dword ptr [EBX + 0xa0],XMM0
009005a4 : MOV byte ptr [EBX + 0xac],0x1
009005ab : POP EDI
009005ac : POP ESI
009005ad : POP EBX
009005ae : MOV ESP,EBP
009005b0 : POP EBP
009005b1 : RET 0xc
009005b4 : MOV EAX,dword ptr [EBP + 0xc]
009005b7 : FILD dword ptr [EBP + 0xc]
009005ba : TEST EAX,EAX
009005bc : JGE 0x009005c4
009005be : FADD float ptr [0x00cdf0e0]
009005c4 : MOV ECX,dword ptr [EBP + 0x10]
009005c7 : FILD dword ptr [EBP + 0x10]
009005ca : TEST ECX,ECX
009005cc : JGE 0x009005d4
009005ce : FADD float ptr [0x00cdf0e0]
009005d4 : FDIVP
009005d6 : MOVSS XMM0,dword ptr [EBX + 0xa4]
009005de : FST float ptr [ESP + 0x3c]
009005e2 : FSTP float ptr [EBX + 0xa0]
009005e8 : MOVSS XMM1,dword ptr [ESP + 0x3c]
009005ee : COMISS XMM0,XMM1
009005f1 : JBE 0x0090061a
009005f3 : SUBSS XMM0,XMM1
009005f7 : COMISS XMM0,dword ptr [0x00d72c24]
009005fe : JBE 0x0090060a
00900600 : MOVSS XMM0,dword ptr [0x00cdf52c]
00900608 : JMP 0x00900612
0090060a : MOVSS XMM0,dword ptr [0x00cdf528]
00900612 : MOVSS dword ptr [EBX + 0xa8],XMM0
0090061a : MOV byte ptr [EBX + 0xac],0x1
00900621 : POP EDI
00900622 : POP ESI
00900623 : POP EBX
00900624 : MOV ESP,EBP
00900626 : POP EBP
00900627 : RET 0xc
