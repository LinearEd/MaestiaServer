PROGRAM  : Maestia.exe
FUNCTION : FUN_007af180
ENTRY    : 007af180
BODY     : [[007af180, 007af24c] [007af250, 007af3d4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007af180(undefined4 param_1,undefined4 param_2,int param_3,undefined4 param_4)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  int iVar5;
  undefined4 in_EDX;
  int unaff_ESI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3c5ca;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined4 *)(unaff_ESI + 0x2430) = 0;
  *(undefined4 **)(unaff_ESI + 0x244c) = (undefined4 *)(unaff_ESI + 0x2430);
  *(undefined4 *)(unaff_ESI + 0x2d4) = in_EDX;
  uVar1 = DAT_01725270;
  *(undefined4 *)(unaff_ESI + 0x2dc) = param_1;
  *(int *)(unaff_ESI + 0x2d8) = param_3;
  *(undefined4 *)(unaff_ESI + 0x2444) = 0;
  *(undefined4 **)(unaff_ESI + 0x2438) = (undefined4 *)(unaff_ESI + 0x2444);
  *(undefined4 *)(unaff_ESI + 0x2e0) = param_2;
  *(undefined4 *)(unaff_ESI + 0x2454) = 0;
  *(undefined4 *)(unaff_ESI + 0x243c) = 0;
  *(undefined4 *)(unaff_ESI + 0x2440) = 0;
  *(undefined4 *)(unaff_ESI + 0x2434) = 0;
  *(undefined4 *)(unaff_ESI + 0x2450) = 0;
  *(undefined4 *)(unaff_ESI + 0x242c) = 0x3f800000;
  *(undefined4 *)(unaff_ESI + 0x278) = param_4;
  uVar3 = FUN_006f0760(0x80,"",0,(uVar1 >> 3 & 1) == 0,uVar2);
  *(undefined4 *)(unaff_ESI + 0x378) = uVar3;
  param_3 = 0;
  do {
    puVar4 = (undefined4 *)FUN_006f0760(0x34,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar2);
    if (puVar4 == (undefined4 *)0x0) {
      puVar4 = (undefined4 *)0x0;
    }
    else {
      puVar4[7] = 0;
      puVar4[8] = 0;
      puVar4[9] = 0;
      puVar4[10] = 0;
      puVar4[0xb] = 0;
      puVar4[0xc] = 0;
      *puVar4 = 1;
      puVar4[1] = 0;
      *(undefined1 *)(puVar4 + 6) = 0xff;
      puVar4[5] = 0xffffffff;
      puVar4[4] = 0xffffffff;
      puVar4[3] = 0xffffffff;
      puVar4[2] = 0xffffffff;
    }
    local_8 = 0xffffffff;
    *(undefined4 **)(param_3 + *(int *)(unaff_ESI + 0x378)) = puVar4;
    param_3 = param_3 + 4;
  } while (param_3 < 0x80);
  uVar3 = FUN_006f0760(0x80,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar2);
  *(undefined4 *)(unaff_ESI + 0x37c) = uVar3;
  param_3 = 0;
  do {
    puVar4 = (undefined4 *)FUN_006f0760(0x34,"",0,(DAT_01725270 >> 3 & 1) == 0);
    if (puVar4 == (undefined4 *)0x0) {
      puVar4 = (undefined4 *)0x0;
    }
    else {
      puVar4[7] = 0;
      puVar4[8] = 0;
      puVar4[9] = 0;
      puVar4[10] = 0;
      puVar4[0xb] = 0;
      puVar4[0xc] = 0;
      *puVar4 = 1;
      puVar4[1] = 0;
      *(undefined1 *)(puVar4 + 6) = 0xff;
      puVar4[5] = 0xffffffff;
      puVar4[4] = 0xffffffff;
      puVar4[3] = 0xffffffff;
      puVar4[2] = 0xffffffff;
    }
    local_8 = 0xffffffff;
    *(undefined4 **)(param_3 + *(int *)(unaff_ESI + 0x37c)) = puVar4;
    param_3 = param_3 + 4;
  } while (param_3 < 0x80);
  iVar5 = FUN_007e5140(*(undefined4 *)(unaff_ESI + 0x278));
  *(int *)(unaff_ESI + 0x2490) = iVar5;
  *(undefined4 *)(iVar5 + 4) = param_1;
  *(undefined4 *)(iVar5 + 8) = param_2;
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
007af180 : PUSH EBP
007af181 : MOV EBP,ESP
007af183 : PUSH -0x1
007af185 : PUSH 0xb3c5ca
007af18a : MOV EAX,FS:[0x0]
007af190 : PUSH EAX
007af191 : PUSH EBX
007af192 : PUSH EDI
007af193 : MOV EAX,[0x00d66fa0]
007af198 : XOR EAX,EBP
007af19a : PUSH EAX
007af19b : LEA EAX,[EBP + -0xc]
007af19e : MOV FS:[0x0],EAX
007af1a4 : XOR EBX,EBX
007af1a6 : MOVSS XMM0,dword ptr [0x00c10fc4]
007af1ae : LEA EAX,[ESI + 0x2430]
007af1b4 : MOV dword ptr [EAX],EBX
007af1b6 : MOV dword ptr [ESI + 0x244c],EAX
007af1bc : MOV EAX,dword ptr [EBP + 0x8]
007af1bf : MOV dword ptr [ESI + 0x2d4],EDX
007af1c5 : MOV EDX,dword ptr [0x01725270]
007af1cb : MOV dword ptr [ESI + 0x2dc],EAX
007af1d1 : MOV EAX,dword ptr [EBP + 0x10]
007af1d4 : MOV dword ptr [ESI + 0x2d8],EAX
007af1da : SHR EDX,0x3
007af1dd : MOV EAX,EBX
007af1df : AND EDX,0x1
007af1e2 : SETZ AL
007af1e5 : LEA ECX,[ESI + 0x2444]
007af1eb : MOV dword ptr [ECX],EBX
007af1ed : MOV dword ptr [ESI + 0x2438],ECX
007af1f3 : MOV ECX,dword ptr [EBP + 0xc]
007af1f6 : MOV dword ptr [ESI + 0x2e0],ECX
007af1fc : MOV ECX,dword ptr [EBP + 0x14]
007af1ff : PUSH EAX
007af200 : PUSH EBX
007af201 : PUSH 0xbf1a4b
007af206 : PUSH 0x80
007af20b : MOV dword ptr [ESI + 0x2454],EBX
007af211 : MOV dword ptr [ESI + 0x243c],EBX
007af217 : MOV dword ptr [ESI + 0x2440],EBX
007af21d : MOV dword ptr [ESI + 0x2434],EBX
007af223 : MOV dword ptr [ESI + 0x2450],EBX
007af229 : MOVSS dword ptr [ESI + 0x242c],XMM0
007af231 : MOV dword ptr [ESI + 0x278],ECX
007af237 : CALL 0x006f0760
007af23c : ADD ESP,0x10
007af23f : MOV dword ptr [ESI + 0x378],EAX
007af245 : MOV dword ptr [EBP + 0x10],EBX
007af248 : OR EDI,0xffffffff
007af24b : JMP 0x007af250
007af250 : MOV ECX,dword ptr [0x01725270]
007af256 : SHR ECX,0x3
007af259 : MOV EDX,0x0
007af25e : AND ECX,0x1
007af261 : SETZ DL
007af264 : PUSH EDX
007af265 : PUSH EBX
007af266 : PUSH 0xbf1a4a
007af26b : PUSH 0x34
007af26d : CALL 0x006f0760
007af272 : ADD ESP,0x10
007af275 : MOV dword ptr [EBP + 0x14],EAX
007af278 : MOV dword ptr [EBP + -0x4],EBX
007af27b : CMP EAX,EBX
007af27d : JZ 0x007af2bb
007af27f : XORPS XMM0,XMM0
007af282 : MOVSS dword ptr [EAX + 0x1c],XMM0
007af287 : MOVSS dword ptr [EAX + 0x20],XMM0
007af28c : MOVSS dword ptr [EAX + 0x24],XMM0
007af291 : MOVSS dword ptr [EAX + 0x28],XMM0
007af296 : MOVSS dword ptr [EAX + 0x2c],XMM0
007af29b : MOVSS dword ptr [EAX + 0x30],XMM0
007af2a0 : MOV dword ptr [EAX],0x1
007af2a6 : MOV dword ptr [EAX + 0x4],EBX
007af2a9 : MOV byte ptr [EAX + 0x18],0xff
007af2ad : MOV dword ptr [EAX + 0x14],EDI
007af2b0 : MOV dword ptr [EAX + 0x10],EDI
007af2b3 : MOV dword ptr [EAX + 0xc],EDI
007af2b6 : MOV dword ptr [EAX + 0x8],EDI
007af2b9 : JMP 0x007af2bd
007af2bb : XOR EAX,EAX
007af2bd : MOV dword ptr [EBP + -0x4],EDI
007af2c0 : MOV ECX,dword ptr [EBP + 0x10]
007af2c3 : MOV EDX,dword ptr [ESI + 0x378]
007af2c9 : MOV dword ptr [ECX + EDX*0x1],EAX
007af2cc : ADD ECX,0x4
007af2cf : CMP ECX,0x80
007af2d5 : MOV dword ptr [EBP + 0x10],ECX
007af2d8 : JL 0x007af250
007af2de : MOV EAX,[0x01725270]
007af2e3 : SHR EAX,0x3
007af2e6 : MOV ECX,0x0
007af2eb : AND EAX,0x1
007af2ee : SETZ CL
007af2f1 : PUSH ECX
007af2f2 : PUSH EBX
007af2f3 : PUSH 0xbf1a4b
007af2f8 : PUSH 0x80
007af2fd : CALL 0x006f0760
007af302 : ADD ESP,0x10
007af305 : MOV dword ptr [ESI + 0x37c],EAX
007af30b : MOV dword ptr [EBP + 0x10],EBX
007af30e : MOV EDI,EDI
007af310 : MOV EDX,dword ptr [0x01725270]
007af316 : SHR EDX,0x3
007af319 : MOV EAX,0x0
007af31e : AND EDX,0x1
007af321 : SETZ AL
007af324 : PUSH EAX
007af325 : PUSH EBX
007af326 : PUSH 0xbf1a4a
007af32b : PUSH 0x34
007af32d : CALL 0x006f0760
007af332 : ADD ESP,0x10
007af335 : MOV dword ptr [EBP + 0x14],EAX
007af338 : MOV dword ptr [EBP + -0x4],0x1
007af33f : CMP EAX,EBX
007af341 : JZ 0x007af37f
007af343 : XORPS XMM0,XMM0
007af346 : MOVSS dword ptr [EAX + 0x1c],XMM0
007af34b : MOVSS dword ptr [EAX + 0x20],XMM0
007af350 : MOVSS dword ptr [EAX + 0x24],XMM0
007af355 : MOVSS dword ptr [EAX + 0x28],XMM0
007af35a : MOVSS dword ptr [EAX + 0x2c],XMM0
007af35f : MOVSS dword ptr [EAX + 0x30],XMM0
007af364 : MOV dword ptr [EAX],0x1
007af36a : MOV dword ptr [EAX + 0x4],EBX
007af36d : MOV byte ptr [EAX + 0x18],0xff
007af371 : MOV dword ptr [EAX + 0x14],EDI
007af374 : MOV dword ptr [EAX + 0x10],EDI
007af377 : MOV dword ptr [EAX + 0xc],EDI
007af37a : MOV dword ptr [EAX + 0x8],EDI
007af37d : JMP 0x007af381
007af37f : XOR EAX,EAX
007af381 : MOV dword ptr [EBP + -0x4],EDI
007af384 : MOV ECX,dword ptr [EBP + 0x10]
007af387 : MOV EDX,dword ptr [ESI + 0x37c]
007af38d : MOV dword ptr [ECX + EDX*0x1],EAX
007af390 : ADD ECX,0x4
007af393 : CMP ECX,0x80
007af399 : MOV dword ptr [EBP + 0x10],ECX
007af39c : JL 0x007af310
007af3a2 : MOV EAX,dword ptr [ESI + 0x278]
007af3a8 : PUSH EAX
007af3a9 : CALL 0x007e5140
007af3ae : MOV ECX,dword ptr [EBP + 0x8]
007af3b1 : MOV EDX,dword ptr [EBP + 0xc]
007af3b4 : MOV dword ptr [ESI + 0x2490],EAX
007af3ba : MOV dword ptr [EAX + 0x4],ECX
007af3bd : MOV dword ptr [EAX + 0x8],EDX
007af3c0 : MOV AL,0x1
007af3c2 : MOV ECX,dword ptr [EBP + -0xc]
007af3c5 : MOV dword ptr FS:[0x0],ECX
007af3cc : POP ECX
007af3cd : POP EDI
007af3ce : POP EBX
007af3cf : MOV ESP,EBP
007af3d1 : POP EBP
007af3d2 : RET 0x10
