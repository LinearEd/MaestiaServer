PROGRAM  : Maestia.exe
FUNCTION : FUN_005058b0
ENTRY    : 005058b0
BODY     : [[005058b0, 005059ef]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005058b0(int param_1)

{
  undefined1 *puVar1;
  char cVar2;
  int iVar3;
  float10 fVar4;
  undefined4 uVar5;
  undefined4 uStack_38;
  float fStack_30;
  float fStack_2c;
  float fStack_28;
  float fStack_24;
  double dStack_20;
  double dStack_18;
  double dStack_10;
  double dStack_8;
  
  if (((*(int *)(param_1 + 8) != 0) &&
      (iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar3 == 4)) &&
     (0 < *(int *)(param_1 + 0x1c))) {
    uVar5 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(0);
    fVar4 = (float10)FUN_00527730(uVar5);
    uStack_38 = (undefined4)(longlong)ROUND(fVar4);
    fStack_30 = 0.0;
    fStack_2c = 0.0;
    fStack_28 = 0.0;
    fStack_24 = 0.0;
    cVar2 = FUN_0054b830(&fStack_30,uStack_38);
    if (cVar2 == '\0') {
      puVar1 = *(undefined1 **)(param_1 + 4);
      FUN_00526400();
      *puVar1 = 1;
    }
    else {
      iVar3 = FUN_00515840(0x30,0);
      if (iVar3 == 0) {
        iVar3 = 0;
      }
      else {
        iVar3 = FUN_00582490(*(undefined4 *)(param_1 + 0x18));
      }
      dStack_20 = (double)(fStack_30 / 20.0);
      dStack_18 = (double)(fStack_2c / 20.0);
      dStack_10 = (double)(fStack_28 / 20.0);
      dStack_8 = (double)(fStack_24 / 20.0);
      FUN_00580d50(*(undefined4 *)(param_1 + 0x18),&dStack_20);
      FUN_005271c0(iVar3);
      if (iVar3 != 0) {
        FUN_00503db0();
        return;
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005058b0 : SUB ESP,0x38
005058b3 : PUSH ESI
005058b4 : MOV ESI,dword ptr [ESP + 0x40]
005058b8 : CMP dword ptr [ESI + 0x8],0x0
005058bc : JZ 0x005059eb
005058c2 : MOV ECX,dword ptr [ESI + 0x8]
005058c5 : MOV EAX,dword ptr [ECX]
005058c7 : MOV EDX,dword ptr [EAX + 0x8]
005058ca : CALL EDX
005058cc : CMP EAX,0x4
005058cf : JNZ 0x005059eb
005058d5 : MOV EAX,dword ptr [ESI + 0x8]
005058d8 : PUSH EDI
005058d9 : TEST EAX,EAX
005058db : JZ 0x005058e2
005058dd : LEA EDI,[EAX + -0x68]
005058e0 : JMP 0x005058e4
005058e2 : XOR EDI,EDI
005058e4 : CMP dword ptr [ESI + 0x1c],0x1
005058e8 : JL 0x005059ea
005058ee : MOV EAX,dword ptr [ESI + 0x18]
005058f1 : PUSH EAX
005058f2 : PUSH 0x0
005058f4 : MOV ECX,ESI
005058f6 : CALL 0x00526260
005058fb : MOV ECX,EAX
005058fd : CALL 0x00527730
00505902 : FNSTCW word ptr [ESP + 0x44]
00505906 : MOVZX EAX,word ptr [ESP + 0x44]
0050590b : OR EAX,0xc00
00505910 : MOV dword ptr [ESP + 0x8],EAX
00505914 : MOV ECX,dword ptr [EDI + 0xa0]
0050591a : LEA EDX,[ESP + 0x10]
0050591e : FLDCW word ptr [ESP + 0x8]
00505922 : FISTP qword ptr [ESP + 0x8]
00505926 : MOV EAX,dword ptr [ESP + 0x8]
0050592a : PUSH EAX
0050592b : PUSH EDX
0050592c : FLDCW word ptr [ESP + 0x4c]
00505930 : FLDZ
00505932 : FST float ptr [ESP + 0x18]
00505936 : FSTP float ptr [ESP + 0x1c]
0050593a : FLDZ
0050593c : FADD ST0,ST0
0050593e : FSTP float ptr [ESP + 0x4c]
00505942 : FLD float ptr [ESP + 0x4c]
00505946 : FST float ptr [ESP + 0x20]
0050594a : FSTP float ptr [ESP + 0x24]
0050594e : CALL 0x0054b830
00505953 : TEST AL,AL
00505955 : JZ 0x005059dd
0050595b : MOV EAX,dword ptr [ESI + 0x18]
0050595e : MOV ECX,dword ptr [EAX + 0x78]
00505961 : MOV ECX,dword ptr [ECX + 0x288]
00505967 : PUSH 0x0
00505969 : PUSH 0x30
0050596b : CALL 0x00515840
00505970 : TEST EAX,EAX
00505972 : JZ 0x00505983
00505974 : MOV EDX,dword ptr [ESI + 0x18]
00505977 : PUSH EDX
00505978 : MOV ECX,EAX
0050597a : CALL 0x00582490
0050597f : MOV EDI,EAX
00505981 : JMP 0x00505985
00505983 : XOR EDI,EDI
00505985 : FLD float ptr [ESP + 0x10]
00505989 : MOV ECX,dword ptr [ESI + 0x18]
0050598c : FLD double ptr [0x00b86058]
00505992 : LEA EAX,[ESP + 0x20]
00505996 : FDIV ST1,ST0
00505998 : PUSH EAX
00505999 : PUSH ECX
0050599a : MOV ECX,EDI
0050599c : FXCH
0050599e : FSTP double ptr [ESP + 0x28]
005059a2 : FLD float ptr [ESP + 0x1c]
005059a6 : FDIV ST0,ST1
005059a8 : FSTP double ptr [ESP + 0x30]
005059ac : FLD float ptr [ESP + 0x20]
005059b0 : FDIV ST0,ST1
005059b2 : FSTP double ptr [ESP + 0x38]
005059b6 : FDIVR float ptr [ESP + 0x24]
005059ba : FSTP double ptr [ESP + 0x40]
005059be : CALL 0x00580d50
005059c3 : MOV ECX,dword ptr [ESI + 0x4]
005059c6 : PUSH EDI
005059c7 : CALL 0x005271c0
005059cc : TEST EDI,EDI
005059ce : JZ 0x005059ea
005059d0 : MOV ECX,EDI
005059d2 : CALL 0x00503db0
005059d7 : POP EDI
005059d8 : POP ESI
005059d9 : ADD ESP,0x38
005059dc : RET
005059dd : MOV ESI,dword ptr [ESI + 0x4]
005059e0 : MOV ECX,ESI
005059e2 : CALL 0x00526400
005059e7 : MOV byte ptr [ESI],0x1
005059ea : POP EDI
005059eb : POP ESI
005059ec : ADD ESP,0x38
005059ef : RET
