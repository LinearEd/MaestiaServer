PROGRAM  : Maestia.exe
FUNCTION : FUN_00507e60
ENTRY    : 00507e60
BODY     : [[00507e60, 00507ea9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00507e60(void)

{
  undefined4 *puVar1;
  int *in_ECX;
  int iVar2;
  int iVar3;
  
  if (*in_ECX != 0) {
    iVar3 = 0;
    iVar2 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar1 = (undefined4 *)(iVar3 + 8 + *in_ECX);
      if (*(int *)(iVar3 + 8 + *in_ECX) != -2) {
        if (puVar1[2] != 0) {
          FUN_00503db0();
        }
        *puVar1 = 0xfffffffe;
      }
      iVar3 = iVar3 + 0xc;
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00507e60 : PUSH EBX
00507e61 : MOV EBX,ECX
00507e63 : MOV EAX,dword ptr [EBX]
00507e65 : TEST EAX,EAX
00507e67 : JZ 0x00507ea8
00507e69 : MOV EAX,dword ptr [EAX + 0x4]
00507e6c : PUSH EBP
00507e6d : PUSH ESI
00507e6e : PUSH EDI
00507e6f : XOR EDI,EDI
00507e71 : LEA EBP,[EAX + 0x1]
00507e74 : MOV EAX,dword ptr [EBX]
00507e76 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
00507e7b : LEA ESI,[EDI + EAX*0x1 + 0x8]
00507e7f : JZ 0x00507e93
00507e81 : MOV ECX,dword ptr [ESI + 0x8]
00507e84 : TEST ECX,ECX
00507e86 : JZ 0x00507e8d
00507e88 : CALL 0x00503db0
00507e8d : MOV dword ptr [ESI],0xfffffffe
00507e93 : ADD EDI,0xc
00507e96 : SUB EBP,0x1
00507e99 : JNZ 0x00507e74
00507e9b : MOV ECX,dword ptr [EBX]
00507e9d : PUSH ECX
00507e9e : CALL 0x00515cf0
00507ea3 : POP EDI
00507ea4 : POP ESI
00507ea5 : MOV dword ptr [EBX],EBP
00507ea7 : POP EBP
00507ea8 : POP EBX
00507ea9 : RET
