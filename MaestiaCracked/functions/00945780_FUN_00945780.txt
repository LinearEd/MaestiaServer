PROGRAM  : Maestia.exe
FUNCTION : FUN_00945780
ENTRY    : 00945780
BODY     : [[00945780, 009458b0]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_00945780(undefined4 param_1)

{
  int *piVar1;
  int in_EAX;
  int *piVar2;
  DWORD DVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  piVar2 = (int *)(*(int *)(in_EAX + 100) - *(int *)(in_EAX + 0x60));
  if (((uint)piVar2 & 0xfffffffc) != 0) {
    piVar1 = *(int **)(in_EAX + 100);
    piVar2 = (int *)FUN_004268b0(*(undefined4 *)(in_EAX + 0x60),piVar1,param_1);
    piVar2 = (int *)*piVar2;
    if ((piVar2 != piVar1) && (iVar7 = *piVar2, iVar7 != 0)) {
      iVar6 = *(int *)(iVar7 + 0xb4);
      if (*(char *)(iVar7 + 0xb8) == '\0') {
        piVar2 = (int *)timeGetTime();
        *(int **)(iVar7 + 0xbc) = piVar2;
      }
      else if (*(int *)(iVar7 + 0xbc) != 0) {
        DVar3 = timeGetTime();
        uVar4 = DVar3 - *(int *)(iVar7 + 0xbc);
        piVar2 = (int *)(uVar4 * 0x51eb851f);
        iVar6 = *(int *)(iVar7 + 0xb4) - uVar4 / 100;
      }
      if (*(char *)(in_EAX + 0x32) != '\0') {
        if ((*DAT_00da9894 != 0) &&
           (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
          if (*(uint *)(iVar7 + 0xb0) < 8) {
            iVar5 = iVar7 + 0x9c;
          }
          else {
            iVar5 = *(int *)(iVar7 + 0x9c);
          }
          (**(code **)(*piVar2 + 4))(piVar2,"mc_petlist.UpdateCashFeedState","%d,%ls",param_1,iVar5)
          ;
        }
        piVar2 = (int *)0x0;
        if (*DAT_00da9894 != 0) {
          piVar1 = *(int **)(*DAT_00da9894 + 0x114);
          piVar2 = (int *)0x0;
          if (piVar1 != (int *)0x0) {
            if (*(uint *)(iVar7 + 0xb0) < 8) {
              iVar7 = iVar7 + 0x9c;
            }
            else {
              iVar7 = *(int *)(iVar7 + 0x9c);
            }
            piVar2 = (int *)(**(code **)(*piVar1 + 4))
                                      (piVar1,"mc_petinfo.UpdateCashFeedState","%d,%ls,%d,%b",
                                       param_1,iVar7,iVar6,0);
          }
        }
      }
    }
  }
  return piVar2;
}



============================================================
DISASSEMBLY
============================================================
00945780 : PUSH EBP
00945781 : MOV EBP,ESP
00945783 : PUSH ECX
00945784 : PUSH EDI
00945785 : MOV EDI,EAX
00945787 : MOV EAX,dword ptr [EDI + 0x64]
0094578a : SUB EAX,dword ptr [EDI + 0x60]
0094578d : TEST EAX,0xfffffffc
00945792 : JZ 0x009458aa
00945798 : MOV ECX,dword ptr [EBP + 0x8]
0094579b : MOV EAX,dword ptr [EDI + 0x60]
0094579e : PUSH ESI
0094579f : MOV ESI,dword ptr [EDI + 0x64]
009457a2 : PUSH ECX
009457a3 : PUSH ESI
009457a4 : PUSH EAX
009457a5 : LEA EAX,[EBP + -0x4]
009457a8 : CALL 0x004268b0
009457ad : MOV EAX,dword ptr [EAX]
009457af : ADD ESP,0xc
009457b2 : CMP EAX,ESI
009457b4 : JZ 0x009458a9
009457ba : MOV ESI,dword ptr [EAX]
009457bc : TEST ESI,ESI
009457be : JZ 0x009458a9
009457c4 : CMP byte ptr [ESI + 0xb8],0x0
009457cb : PUSH EBX
009457cc : MOV EBX,dword ptr [ESI + 0xb4]
009457d2 : JNZ 0x009457e2
009457d4 : CALL dword ptr [0x00b85598]
009457da : MOV dword ptr [ESI + 0xbc],EAX
009457e0 : JMP 0x0094580b
009457e2 : CMP dword ptr [ESI + 0xbc],0x0
009457e9 : JBE 0x0094580b
009457eb : CALL dword ptr [0x00b85598]
009457f1 : MOV EBX,dword ptr [ESI + 0xb4]
009457f7 : MOV ECX,EAX
009457f9 : SUB ECX,dword ptr [ESI + 0xbc]
009457ff : MOV EAX,0x51eb851f
00945804 : MUL ECX
00945806 : SHR EDX,0x5
00945809 : SUB EBX,EDX
0094580b : CMP byte ptr [EDI + 0x32],0x0
0094580f : JZ 0x009458a8
00945815 : MOV EDX,dword ptr [0x00da9894]
0094581b : MOV EAX,dword ptr [EDX]
0094581d : MOV EDI,0x8
00945822 : TEST EAX,EAX
00945824 : JZ 0x00945860
00945826 : MOV EAX,dword ptr [EAX + 0x114]
0094582c : TEST EAX,EAX
0094582e : JZ 0x00945860
00945830 : CMP dword ptr [ESI + 0xb0],EDI
00945836 : JC 0x00945840
00945838 : MOV ECX,dword ptr [ESI + 0x9c]
0094583e : JMP 0x00945846
00945840 : LEA ECX,[ESI + 0x9c]
00945846 : MOV EDX,dword ptr [EAX]
00945848 : MOV EDX,dword ptr [EDX + 0x4]
0094584b : PUSH ECX
0094584c : MOV ECX,dword ptr [EBP + 0x8]
0094584f : PUSH ECX
00945850 : PUSH 0xc73980
00945855 : PUSH 0xc73988
0094585a : PUSH EAX
0094585b : CALL EDX
0094585d : ADD ESP,0x14
00945860 : MOV EAX,[0x00da9894]
00945865 : MOV EAX,dword ptr [EAX]
00945867 : TEST EAX,EAX
00945869 : JZ 0x009458a8
0094586b : MOV EAX,dword ptr [EAX + 0x114]
00945871 : TEST EAX,EAX
00945873 : JZ 0x009458a8
00945875 : CMP dword ptr [ESI + 0xb0],EDI
0094587b : JC 0x00945885
0094587d : MOV ESI,dword ptr [ESI + 0x9c]
00945883 : JMP 0x0094588b
00945885 : ADD ESI,0x9c
0094588b : MOV EDX,dword ptr [EBP + 0x8]
0094588e : MOV ECX,dword ptr [EAX]
00945890 : PUSH 0x0
00945892 : PUSH EBX
00945893 : PUSH ESI
00945894 : PUSH EDX
00945895 : PUSH 0xc739a8
0094589a : PUSH 0xc739b8
0094589f : PUSH EAX
009458a0 : MOV EAX,dword ptr [ECX + 0x4]
009458a3 : CALL EAX
009458a5 : ADD ESP,0x1c
009458a8 : POP EBX
009458a9 : POP ESI
009458aa : POP EDI
009458ab : MOV ESP,EBP
009458ad : POP EBP
009458ae : RET 0x4
