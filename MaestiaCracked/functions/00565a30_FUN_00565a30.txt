PROGRAM  : Maestia.exe
FUNCTION : FUN_00565a30
ENTRY    : 00565a30
BODY     : [[00565a30, 00565b29]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00565a30(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint *puVar3;
  int *piVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_00565a6b;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_00563d70(param_1,iVar7);
LAB_00565a6b:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x14);
  if (*puVar1 == 0xfffffffe) {
    FUN_00562a40(param_2,0xffffffff);
    puVar1[1] = param_3;
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x14) != -2);
  uVar5 = puVar1[1];
  iVar2 = iVar7 + 8 + uVar6 * 0x14;
  if (uVar5 != param_3) {
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x14);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x14); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x14)) {
      uVar5 = *puVar3;
      puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x14);
    }
    if (iVar2 != 0) {
      FUN_005629f0(puVar1);
    }
    *puVar3 = uVar6;
    FUN_00561280(param_2);
    puVar1[1] = param_3;
    *puVar1 = 0xffffffff;
    return;
  }
  if (iVar2 != 0) {
    FUN_005629f0(puVar1);
  }
  FUN_00561280(param_2);
  *puVar1 = uVar6;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
00565a30 : PUSH EBP
00565a31 : PUSH ESI
00565a32 : PUSH EDI
00565a33 : MOV EDI,ECX
00565a35 : MOV EAX,dword ptr [EDI]
00565a37 : TEST EAX,EAX
00565a39 : JNZ 0x00565a44
00565a3b : MOV EAX,dword ptr [ESP + 0x10]
00565a3f : PUSH 0x8
00565a41 : PUSH EAX
00565a42 : JMP 0x00565a66
00565a44 : MOV ECX,dword ptr [EAX + 0x4]
00565a47 : LEA EDX,[ECX*0x4 + 0x4]
00565a4e : MOV ECX,dword ptr [EAX]
00565a50 : LEA ECX,[ECX + ECX*0x4]
00565a53 : CMP ECX,EDX
00565a55 : JBE 0x00565a6b
00565a57 : MOV EDX,dword ptr [EAX + 0x4]
00565a5a : MOV ECX,dword ptr [ESP + 0x10]
00565a5e : LEA EAX,[EDX + EDX*0x1 + 0x2]
00565a62 : PUSH EAX
00565a63 : PUSH ECX
00565a64 : MOV ECX,EDI
00565a66 : CALL 0x00563d70
00565a6b : MOV EAX,dword ptr [EDI]
00565a6d : MOV ESI,dword ptr [ESP + 0x18]
00565a71 : AND ESI,dword ptr [EAX + 0x4]
00565a74 : INC dword ptr [EAX]
00565a76 : MOV EAX,dword ptr [EDI]
00565a78 : LEA EDX,[ESI + ESI*0x4]
00565a7b : LEA EBP,[EAX + EDX*0x4 + 0x8]
00565a7f : MOV EDX,0xfffffffe
00565a84 : CMP dword ptr [EBP],EDX
00565a87 : JNZ 0x00565aa0
00565a89 : MOV EAX,dword ptr [ESP + 0x14]
00565a8d : PUSH -0x1
00565a8f : PUSH EAX
00565a90 : MOV ECX,EBP
00565a92 : CALL 0x00562a40
00565a97 : POP EDI
00565a98 : MOV dword ptr [EBP + 0x4],ESI
00565a9b : POP ESI
00565a9c : POP EBP
00565a9d : RET 0xc
00565aa0 : MOV ECX,dword ptr [EAX + 0x4]
00565aa3 : MOV EDI,ESI
00565aa5 : PUSH EBX
00565aa6 : INC EDI
00565aa7 : AND EDI,ECX
00565aa9 : LEA EBX,[EDI + EDI*0x4]
00565aac : CMP dword ptr [EAX + EBX*0x4 + 0x8],EDX
00565ab0 : JNZ 0x00565aa6
00565ab2 : MOV EDX,dword ptr [EBP + 0x4]
00565ab5 : LEA ECX,[EDI + EDI*0x4]
00565ab8 : LEA ECX,[EAX + ECX*0x4 + 0x8]
00565abc : CMP EDX,ESI
00565abe : JNZ 0x00565ae4
00565ac0 : TEST ECX,ECX
00565ac2 : JZ 0x00565aca
00565ac4 : PUSH EBP
00565ac5 : CALL 0x005629f0
00565aca : MOV EDX,dword ptr [ESP + 0x18]
00565ace : PUSH EDX
00565acf : LEA ECX,[EBP + 0x8]
00565ad2 : CALL 0x00561280
00565ad7 : POP EBX
00565ad8 : MOV dword ptr [EBP],EDI
00565adb : POP EDI
00565adc : MOV dword ptr [EBP + 0x4],ESI
00565adf : POP ESI
00565ae0 : POP EBP
00565ae1 : RET 0xc
00565ae4 : LEA EDX,[EDX + EDX*0x4]
00565ae7 : CMP dword ptr [EAX + EDX*0x4 + 0x8],ESI
00565aeb : LEA EBX,[EAX + EDX*0x4 + 0x8]
00565aef : JZ 0x00565b00
00565af1 : MOV EBX,dword ptr [EBX]
00565af3 : LEA EDX,[EBX + EBX*0x4]
00565af6 : CMP dword ptr [EAX + EDX*0x4 + 0x8],ESI
00565afa : LEA EBX,[EAX + EDX*0x4 + 0x8]
00565afe : JNZ 0x00565af1
00565b00 : TEST ECX,ECX
00565b02 : JZ 0x00565b0a
00565b04 : PUSH EBP
00565b05 : CALL 0x005629f0
00565b0a : MOV EAX,dword ptr [ESP + 0x18]
00565b0e : PUSH EAX
00565b0f : LEA ECX,[EBP + 0x8]
00565b12 : MOV dword ptr [EBX],EDI
00565b14 : CALL 0x00561280
00565b19 : POP EBX
00565b1a : POP EDI
00565b1b : MOV dword ptr [EBP + 0x4],ESI
00565b1e : POP ESI
00565b1f : MOV dword ptr [EBP],0xffffffff
00565b26 : POP EBP
00565b27 : RET 0xc
