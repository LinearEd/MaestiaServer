PROGRAM  : Maestia.exe
FUNCTION : FUN_0053a3d0
ENTRY    : 0053a3d0
BODY     : [[0053a3d0, 0053a56f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053a3d0(float *param_1)

{
  byte bVar1;
  byte bVar2;
  float *pfVar3;
  undefined4 uVar4;
  byte bVar5;
  int *in_ECX;
  uint uVar6;
  float10 extraout_ST0;
  float10 extraout_ST0_00;
  float10 extraout_ST0_01;
  uint local_8;
  
  pfVar3 = param_1;
  if (in_ECX[3] != 0) {
    in_ECX[2] = in_ECX[2] + 1;
  }
  in_ECX[3] = 0;
  bVar1 = *(byte *)(in_ECX[2] + *in_ECX);
  in_ECX[3] = 1;
  bVar2 = *(byte *)(in_ECX[2] + *in_ECX);
  in_ECX[3] = 2;
  uVar4 = FUN_00539d00(4);
  bVar5 = (byte)uVar4;
  if ((bVar2 & 0x40) == 0) {
    *param_1 = 1.0;
    param_1[2] = 1.0;
    param_1[4] = 1.0;
  }
  else {
    local_8 = FUN_00539d00(uVar4);
    uVar6 = 1 << (bVar5 - 1 & 0x1f);
    if ((local_8 & uVar6) != 0) {
      local_8 = local_8 | -1 << (bVar5 & 0x1f);
    }
    *param_1 = (float)(int)local_8 * 0.00390625;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[2] = (float)((float10)(int)param_1 * extraout_ST0);
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[4] = (float)(extraout_ST0_00 * (float10)(int)param_1);
  }
  pfVar3[6] = 1.0;
  if ((bVar1 & 0x80) != 0) {
    param_1 = (float *)FUN_00539d00(uVar4);
    uVar6 = 1 << (bVar5 - 1 & 0x1f);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[1] = (float)(int)param_1;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[3] = (float)(int)param_1;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[5] = (float)(int)param_1;
    pfVar3[7] = (float)extraout_ST0_01;
    return;
  }
  pfVar3[1] = 0.0;
  pfVar3[3] = 0.0;
  pfVar3[5] = 0.0;
  pfVar3[7] = 0.0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0053a3d0 : SUB ESP,0x8
0053a3d3 : PUSH EBX
0053a3d4 : PUSH EBP
0053a3d5 : PUSH ESI
0053a3d6 : MOV ESI,ECX
0053a3d8 : CMP dword ptr [ESI + 0xc],0x0
0053a3dc : PUSH EDI
0053a3dd : JZ 0x0053a3e2
0053a3df : INC dword ptr [ESI + 0x8]
0053a3e2 : MOV ECX,dword ptr [ESI]
0053a3e4 : MOV EAX,dword ptr [ESI + 0x8]
0053a3e7 : ADD EAX,ECX
0053a3e9 : MOV dword ptr [ESI + 0xc],0x0
0053a3f0 : MOVZX EDX,byte ptr [EAX]
0053a3f3 : MOV ECX,0x0
0053a3f8 : AND EDX,0x80
0053a3fe : SETNZ CL
0053a401 : MOV dword ptr [ESI + 0xc],0x1
0053a408 : MOVZX EBX,byte ptr [EAX]
0053a40b : PUSH 0x4
0053a40d : AND EBX,0x40
0053a410 : MOV dword ptr [ESP + 0x18],ECX
0053a414 : MOV ECX,ESI
0053a416 : MOV dword ptr [ESI + 0xc],0x2
0053a41d : CALL 0x00539d00
0053a422 : MOV EDI,EAX
0053a424 : TEST EBX,EBX
0053a426 : JZ 0x0053a4b6
0053a42c : PUSH EDI
0053a42d : MOV ECX,ESI
0053a42f : CALL 0x00539d00
0053a434 : LEA ECX,[EDI + -0x1]
0053a437 : MOV EBX,0x1
0053a43c : SHL EBX,CL
0053a43e : MOV dword ptr [ESP + 0x10],EAX
0053a442 : TEST EAX,EBX
0053a444 : JZ 0x0053a453
0053a446 : OR EDX,0xffffffff
0053a449 : MOV ECX,EDI
0053a44b : SHL EDX,CL
0053a44d : OR EAX,EDX
0053a44f : MOV dword ptr [ESP + 0x10],EAX
0053a453 : FILD dword ptr [ESP + 0x10]
0053a457 : MOV EBP,dword ptr [ESP + 0x1c]
0053a45b : FLD double ptr [0x00b86f00]
0053a461 : PUSH EDI
0053a462 : MOV ECX,ESI
0053a464 : FMUL ST1
0053a466 : FXCH
0053a468 : FSTP float ptr [EBP]
0053a46b : CALL 0x00539d00
0053a470 : MOV dword ptr [ESP + 0x1c],EAX
0053a474 : TEST EAX,EBX
0053a476 : JZ 0x0053a485
0053a478 : OR EDX,0xffffffff
0053a47b : MOV ECX,EDI
0053a47d : SHL EDX,CL
0053a47f : OR EAX,EDX
0053a481 : MOV dword ptr [ESP + 0x1c],EAX
0053a485 : FILD dword ptr [ESP + 0x1c]
0053a489 : PUSH EDI
0053a48a : MOV ECX,ESI
0053a48c : FMUL ST1
0053a48e : FSTP float ptr [EBP + 0x8]
0053a491 : CALL 0x00539d00
0053a496 : MOV dword ptr [ESP + 0x1c],EAX
0053a49a : TEST EAX,EBX
0053a49c : JZ 0x0053a4ab
0053a49e : OR EDX,0xffffffff
0053a4a1 : MOV ECX,EDI
0053a4a3 : SHL EDX,CL
0053a4a5 : OR EAX,EDX
0053a4a7 : MOV dword ptr [ESP + 0x1c],EAX
0053a4ab : FIMUL dword ptr [ESP + 0x1c]
0053a4af : FSTP float ptr [EBP + 0x10]
0053a4b2 : FLD1
0053a4b4 : JMP 0x0053a4c5
0053a4b6 : FLD1
0053a4b8 : MOV EBP,dword ptr [ESP + 0x1c]
0053a4bc : FST float ptr [EBP]
0053a4bf : FST float ptr [EBP + 0x8]
0053a4c2 : FST float ptr [EBP + 0x10]
0053a4c5 : CMP dword ptr [ESP + 0x14],0x0
0053a4ca : FST float ptr [EBP + 0x18]
0053a4cd : JZ 0x0053a556
0053a4d3 : PUSH EDI
0053a4d4 : MOV ECX,ESI
0053a4d6 : CALL 0x00539d00
0053a4db : LEA ECX,[EDI + -0x1]
0053a4de : MOV EBX,0x1
0053a4e3 : SHL EBX,CL
0053a4e5 : MOV dword ptr [ESP + 0x1c],EAX
0053a4e9 : TEST EAX,EBX
0053a4eb : JZ 0x0053a4fa
0053a4ed : OR EDX,0xffffffff
0053a4f0 : MOV ECX,EDI
0053a4f2 : SHL EDX,CL
0053a4f4 : OR EAX,EDX
0053a4f6 : MOV dword ptr [ESP + 0x1c],EAX
0053a4fa : FILD dword ptr [ESP + 0x1c]
0053a4fe : PUSH EDI
0053a4ff : MOV ECX,ESI
0053a501 : FSTP float ptr [EBP + 0x4]
0053a504 : CALL 0x00539d00
0053a509 : MOV dword ptr [ESP + 0x1c],EAX
0053a50d : TEST EAX,EBX
0053a50f : JZ 0x0053a51e
0053a511 : OR EDX,0xffffffff
0053a514 : MOV ECX,EDI
0053a516 : SHL EDX,CL
0053a518 : OR EAX,EDX
0053a51a : MOV dword ptr [ESP + 0x1c],EAX
0053a51e : FILD dword ptr [ESP + 0x1c]
0053a522 : PUSH EDI
0053a523 : MOV ECX,ESI
0053a525 : FSTP float ptr [EBP + 0xc]
0053a528 : CALL 0x00539d00
0053a52d : MOV dword ptr [ESP + 0x1c],EAX
0053a531 : TEST EAX,EBX
0053a533 : JZ 0x0053a542
0053a535 : OR EDX,0xffffffff
0053a538 : MOV ECX,EDI
0053a53a : SHL EDX,CL
0053a53c : OR EAX,EDX
0053a53e : MOV dword ptr [ESP + 0x1c],EAX
0053a542 : FILD dword ptr [ESP + 0x1c]
0053a546 : POP EDI
0053a547 : POP ESI
0053a548 : FSTP float ptr [EBP + 0x14]
0053a54b : FSTP float ptr [EBP + 0x1c]
0053a54e : POP EBP
0053a54f : POP EBX
0053a550 : ADD ESP,0x8
0053a553 : RET 0x4
0053a556 : FSTP ST0
0053a558 : POP EDI
0053a559 : FLDZ
0053a55b : POP ESI
0053a55c : FST float ptr [EBP + 0x4]
0053a55f : FST float ptr [EBP + 0xc]
0053a562 : FST float ptr [EBP + 0x14]
0053a565 : FSTP float ptr [EBP + 0x1c]
0053a568 : POP EBP
0053a569 : POP EBX
0053a56a : ADD ESP,0x8
0053a56d : RET 0x4
