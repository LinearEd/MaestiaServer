PROGRAM  : Maestia.exe
FUNCTION : FUN_009518e0
ENTRY    : 009518e0
BODY     : [[009518e0, 00951bdb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009518e0(undefined4 param_1)

{
  undefined4 *puVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  undefined1 local_9c [28];
  undefined1 local_80 [4];
  undefined2 local_7c;
  undefined4 *local_6c;
  uint local_68;
  undefined4 local_64;
  uint local_60;
  int local_5c;
  uint local_58;
  int *local_54;
  int *local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 *local_8;
  
  local_8 = (undefined4 *)0xffffffff;
  puStack_c = &LAB_00b2cf9e;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_64 = param_1;
  local_14 = uVar2;
  if (((*DAT_00da9894 != 0) &&
      (piVar5 = *(int **)(*DAT_00da9894 + 0x290), local_50 = piVar5, piVar5 != (int *)0x0)) &&
     (local_54 = (int *)piVar5[0x18], local_54 != (int *)piVar5[0x19])) {
    do {
      puVar1 = (undefined4 *)*local_54;
      if (puVar1 == (undefined4 *)0x0) {
        local_68 = 7;
        local_7c = 0;
        local_6c = puVar1;
        FUN_00406360(L"Pet pointer is Null",0x13);
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          local_8 = puVar1;
          (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                    (L"AvaGuiPetFeed::GatherFeedPet",0x6c,local_80,uVar2);
        }
        local_8 = (undefined4 *)0xffffffff;
        if (7 < local_68) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_68 = 7;
        local_7c = 0;
        local_6c = (undefined4 *)0x0;
      }
      else {
        iVar3 = FUN_009f2a00(*puVar1);
        if (iVar3 == 0) {
          FUN_00404750(L"Can\'t find pet from ItemMgr.. key[%u]",*puVar1);
          local_8 = (undefined4 *)0x1;
          if ((int *)*DAT_00da98e8 != (int *)0x0) {
            (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                      (L"AvaGuiPetFeed::GatherFeedPet",0x74,local_30);
          }
          local_8 = (undefined4 *)0xffffffff;
          if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_18 = 7;
          local_1c = 0;
          local_2c = 0;
        }
        else {
          local_58 = 0;
          local_60 = 0;
          iVar3 = (**(code **)(*piVar5 + 0xa0))(*puVar1,&local_58,&local_60);
          if (iVar3 == 0) {
            FUN_00404750(L"Can\'t find item from view... info[ %u, %u, %u ]",*puVar1,
                         local_58 & 0xffff,local_60 & 0xffff);
            local_8 = (undefined4 *)0x2;
            if ((int *)*DAT_00da98e8 != (int *)0x0) {
              (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                        (L"AvaGuiPetFeed::GatherFeedPet",0x7e,local_4c);
            }
            local_8 = (undefined4 *)0xffffffff;
            if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            local_34 = 7;
            local_38 = 0;
            local_48 = 0;
            piVar5 = local_50;
          }
          else {
            piVar5 = local_50;
            if (((*(short *)((int)puVar1 + 10) != 0) && (*(short *)((int)puVar1 + 10) != 3)) &&
               (*(ushort *)(puVar1 + 2) < 300)) {
              local_5c = FUN_006f0300(0x2c);
              local_8 = (undefined4 *)0x3;
              if (local_5c == 0) {
                iVar4 = 0;
              }
              else {
                iVar4 = FUN_00427980(local_5c);
              }
              local_8 = (undefined4 *)0xffffffff;
              local_5c = iVar4;
              if (iVar4 == 0) {
                FUN_00406460(L"Alloc failed");
                local_8 = (undefined4 *)0x4;
                if ((int *)*DAT_00da98e8 != (int *)0x0) {
                  (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                            (L"AvaGuiPetFeed::GatherFeedPet",0x8b,local_9c);
                }
                local_8 = (undefined4 *)0xffffffff;
                FUN_00406560();
                piVar5 = local_50;
              }
              else {
                FUN_00405d70(puVar1 + 3);
                *(undefined2 *)(iVar4 + 0x1c) = *(undefined2 *)(puVar1 + 2);
                *(undefined2 *)(iVar4 + 0x1e) = *(undefined2 *)((int)puVar1 + 10);
                *(int *)(iVar4 + 0x28) = iVar3;
                *(undefined1 *)(iVar4 + 0x20) = 0;
                *(int *)(iVar4 + 0x24) = (300 - *(short *)(iVar4 + 0x1c)) * 0x30;
                FUN_00449730();
                piVar5 = local_50;
              }
            }
          }
        }
      }
      local_54 = local_54 + 1;
    } while (local_54 != (int *)piVar5[0x19]);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009518e0 : PUSH EBP
009518e1 : MOV EBP,ESP
009518e3 : PUSH -0x1
009518e5 : PUSH 0xb2cf9e
009518ea : MOV EAX,FS:[0x0]
009518f0 : PUSH EAX
009518f1 : SUB ESP,0x90
009518f7 : MOV EAX,[0x00d66fa0]
009518fc : XOR EAX,EBP
009518fe : MOV dword ptr [EBP + -0x10],EAX
00951901 : PUSH EBX
00951902 : PUSH ESI
00951903 : PUSH EDI
00951904 : PUSH EAX
00951905 : LEA EAX,[EBP + -0xc]
00951908 : MOV FS:[0x0],EAX
0095190e : MOV EAX,dword ptr [EBP + 0x8]
00951911 : MOV ECX,dword ptr [0x00da9894]
00951917 : MOV dword ptr [EBP + -0x60],EAX
0095191a : MOV EAX,dword ptr [ECX]
0095191c : TEST EAX,EAX
0095191e : JZ 0x00951bbe
00951924 : MOV EBX,dword ptr [EAX + 0x290]
0095192a : MOV dword ptr [EBP + -0x4c],EBX
0095192d : TEST EBX,EBX
0095192f : JZ 0x00951bbe
00951935 : MOV EAX,dword ptr [EBX + 0x60]
00951938 : MOV dword ptr [EBP + -0x50],EAX
0095193b : CMP EAX,dword ptr [EBX + 0x64]
0095193e : JZ 0x00951bbe
00951944 : JMP 0x00951949
00951946 : MOV EAX,dword ptr [EBP + -0x50]
00951949 : MOV EDI,dword ptr [EAX]
0095194b : TEST EDI,EDI
0095194d : JNZ 0x009519b5
0095194f : PUSH 0x13
00951951 : XOR EDX,EDX
00951953 : MOV ESI,0x7
00951958 : PUSH 0xc753c4
0095195d : LEA ECX,[EBP + -0x7c]
00951960 : MOV dword ptr [EBP + -0x64],ESI
00951963 : MOV dword ptr [EBP + -0x68],EDI
00951966 : MOV word ptr [EBP + -0x78],DX
0095196a : CALL 0x00406360
0095196f : MOV dword ptr [EBP + -0x4],EDI
00951972 : MOV EAX,[0x00da98e8]
00951977 : MOV ECX,dword ptr [EAX]
00951979 : CMP ECX,EDI
0095197b : JZ 0x0095198f
0095197d : MOV EDX,dword ptr [ECX]
0095197f : MOV EDX,dword ptr [EDX + 0x14]
00951982 : LEA EAX,[EBP + -0x7c]
00951985 : PUSH EAX
00951986 : PUSH 0x6c
00951988 : PUSH 0xc752b4
0095198d : CALL EDX
0095198f : MOV dword ptr [EBP + -0x4],0xffffffff
00951996 : CMP dword ptr [EBP + -0x64],0x8
0095199a : JC 0x009519a4
0095199c : MOV ECX,dword ptr [EBP + -0x78]
0095199f : CALL 0x006f04e0
009519a4 : XOR EAX,EAX
009519a6 : MOV dword ptr [EBP + -0x64],ESI
009519a9 : MOV dword ptr [EBP + -0x68],EDI
009519ac : MOV word ptr [EBP + -0x78],AX
009519b0 : JMP 0x00951bac
009519b5 : MOV ECX,dword ptr [EDI]
009519b7 : PUSH ECX
009519b8 : MOV ECX,dword ptr [0x017247f0]
009519be : CALL 0x009f2a00
009519c3 : TEST EAX,EAX
009519c5 : JNZ 0x00951a2b
009519c7 : MOV EDX,dword ptr [EDI]
009519c9 : PUSH EDX
009519ca : PUSH 0xc75428
009519cf : LEA ESI,[EBP + -0x2c]
009519d2 : CALL 0x00404750
009519d7 : ADD ESP,0x8
009519da : MOV dword ptr [EBP + -0x4],0x1
009519e1 : MOV EAX,[0x00da98e8]
009519e6 : MOV ECX,dword ptr [EAX]
009519e8 : TEST ECX,ECX
009519ea : JZ 0x009519fd
009519ec : MOV EDX,dword ptr [ECX]
009519ee : MOV EDX,dword ptr [EDX + 0x14]
009519f1 : MOV EAX,ESI
009519f3 : PUSH EAX
009519f4 : PUSH 0x74
009519f6 : PUSH 0xc753ec
009519fb : CALL EDX
009519fd : MOV dword ptr [EBP + -0x4],0xffffffff
00951a04 : CMP dword ptr [EBP + -0x14],0x8
00951a08 : JC 0x00951a12
00951a0a : MOV ECX,dword ptr [EBP + -0x28]
00951a0d : CALL 0x006f04e0
00951a12 : XOR EAX,EAX
00951a14 : MOV dword ptr [EBP + -0x14],0x7
00951a1b : MOV dword ptr [EBP + -0x18],0x0
00951a22 : MOV word ptr [EBP + -0x28],AX
00951a26 : JMP 0x00951bac
00951a2b : MOV EDX,dword ptr [EBX]
00951a2d : MOV EDX,dword ptr [EDX + 0xa0]
00951a33 : XOR EAX,EAX
00951a35 : MOV dword ptr [EBP + -0x54],EAX
00951a38 : MOV dword ptr [EBP + -0x5c],EAX
00951a3b : LEA EAX,[EBP + -0x5c]
00951a3e : PUSH EAX
00951a3f : MOV EAX,dword ptr [EDI]
00951a41 : LEA ECX,[EBP + -0x54]
00951a44 : PUSH ECX
00951a45 : PUSH EAX
00951a46 : MOV ECX,EBX
00951a48 : CALL EDX
00951a4a : MOV EBX,EAX
00951a4c : TEST EBX,EBX
00951a4e : JNZ 0x00951abe
00951a50 : MOVZX EAX,word ptr [EBP + -0x5c]
00951a54 : MOVZX ECX,word ptr [EBP + -0x54]
00951a58 : MOV EDX,dword ptr [EDI]
00951a5a : PUSH EAX
00951a5b : PUSH ECX
00951a5c : PUSH EDX
00951a5d : PUSH 0xc754b0
00951a62 : LEA ESI,[EBP + -0x48]
00951a65 : CALL 0x00404750
00951a6a : ADD ESP,0x10
00951a6d : MOV dword ptr [EBP + -0x4],0x2
00951a74 : MOV EAX,[0x00da98e8]
00951a79 : MOV ECX,dword ptr [EAX]
00951a7b : TEST ECX,ECX
00951a7d : JZ 0x00951a90
00951a7f : MOV EDX,dword ptr [ECX]
00951a81 : MOV EDX,dword ptr [EDX + 0x14]
00951a84 : MOV EAX,ESI
00951a86 : PUSH EAX
00951a87 : PUSH 0x7e
00951a89 : PUSH 0xc75474
00951a8e : CALL EDX
00951a90 : MOV dword ptr [EBP + -0x4],0xffffffff
00951a97 : CMP dword ptr [EBP + -0x30],0x8
00951a9b : JC 0x00951aa5
00951a9d : MOV ECX,dword ptr [EBP + -0x44]
00951aa0 : CALL 0x006f04e0
00951aa5 : XOR EAX,EAX
00951aa7 : MOV dword ptr [EBP + -0x30],0x7
00951aae : MOV dword ptr [EBP + -0x34],0x0
00951ab5 : MOV word ptr [EBP + -0x44],AX
00951ab9 : JMP 0x00951ba9
00951abe : MOVZX EAX,word ptr [EDI + 0xa]
00951ac2 : TEST AX,AX
00951ac5 : JZ 0x00951ba9
00951acb : CMP AX,0x3
00951acf : JZ 0x00951ba9
00951ad5 : MOV ECX,0x12c
00951ada : CMP word ptr [EDI + 0x8],CX
00951ade : JNC 0x00951ba9
00951ae4 : PUSH 0x2c
00951ae6 : CALL 0x006f0300
00951aeb : ADD ESP,0x4
00951aee : MOV dword ptr [EBP + -0x58],EAX
00951af1 : MOV dword ptr [EBP + -0x4],0x3
00951af8 : TEST EAX,EAX
00951afa : JZ 0x00951b06
00951afc : PUSH EAX
00951afd : CALL 0x00427980
00951b02 : MOV ESI,EAX
00951b04 : JMP 0x00951b08
00951b06 : XOR ESI,ESI
00951b08 : MOV dword ptr [EBP + -0x4],0xffffffff
00951b0f : MOV dword ptr [EBP + -0x58],ESI
00951b12 : TEST ESI,ESI
00951b14 : JNZ 0x00951b65
00951b16 : PUSH 0xc75510
00951b1b : LEA ECX,[EBP + 0xffffff68]
00951b21 : CALL 0x00406460
00951b26 : MOV dword ptr [EBP + -0x4],0x4
00951b2d : MOV EDX,dword ptr [0x00da98e8]
00951b33 : MOV ECX,dword ptr [EDX]
00951b35 : TEST ECX,ECX
00951b37 : JZ 0x00951b51
00951b39 : MOV EAX,dword ptr [ECX]
00951b3b : MOV EAX,dword ptr [EAX + 0x14]
00951b3e : LEA EDX,[EBP + 0xffffff68]
00951b44 : PUSH EDX
00951b45 : PUSH 0x8b
00951b4a : PUSH 0xc7552c
00951b4f : CALL EAX
00951b51 : MOV dword ptr [EBP + -0x4],0xffffffff
00951b58 : LEA ECX,[EBP + 0xffffff68]
00951b5e : CALL 0x00406560
00951b63 : JMP 0x00951ba9
00951b65 : LEA ECX,[EDI + 0xc]
00951b68 : PUSH ECX
00951b69 : MOV ECX,ESI
00951b6b : CALL 0x00405d70
00951b70 : MOV DX,word ptr [EDI + 0x8]
00951b74 : MOV word ptr [ESI + 0x1c],DX
00951b78 : MOV AX,word ptr [EDI + 0xa]
00951b7c : MOV word ptr [ESI + 0x1e],AX
00951b80 : MOV dword ptr [ESI + 0x28],EBX
00951b83 : MOV byte ptr [ESI + 0x20],0x0
00951b87 : MOVSX ECX,word ptr [ESI + 0x1c]
00951b8b : MOV EAX,0x12c
00951b90 : SUB EAX,ECX
00951b92 : LEA EDX,[EAX + EAX*0x2]
00951b95 : SHL EDX,0x4
00951b98 : MOV dword ptr [ESI + 0x24],EDX
00951b9b : MOV EDX,dword ptr [EBP + -0x60]
00951b9e : ADD EDX,0x38
00951ba1 : LEA EDI,[EBP + -0x58]
00951ba4 : CALL 0x00449730
00951ba9 : MOV EBX,dword ptr [EBP + -0x4c]
00951bac : MOV EAX,dword ptr [EBP + -0x50]
00951baf : ADD EAX,0x4
00951bb2 : MOV dword ptr [EBP + -0x50],EAX
00951bb5 : CMP EAX,dword ptr [EBX + 0x64]
00951bb8 : JNZ 0x00951946
00951bbe : MOV ECX,dword ptr [EBP + -0xc]
00951bc1 : MOV dword ptr FS:[0x0],ECX
00951bc8 : POP ECX
00951bc9 : POP EDI
00951bca : POP ESI
00951bcb : POP EBX
00951bcc : MOV ECX,dword ptr [EBP + -0x10]
00951bcf : XOR ECX,EBP
00951bd1 : CALL 0x00633e6b
00951bd6 : MOV ESP,EBP
00951bd8 : POP EBP
00951bd9 : RET 0x4
