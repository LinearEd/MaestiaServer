PROGRAM  : Maestia.exe
FUNCTION : FUN_00a1e570
ENTRY    : 00a1e570
BODY     : [[00a1e570, 00a1e697]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a1e570(void)

{
  undefined4 uVar1;
  int *piVar2;
  DWORD DVar3;
  BOOL BVar4;
  int iVar5;
  int iVar6;
  int unaff_EDI;
  bool bVar7;
  wchar_t *pwVar8;
  undefined1 local_20 [12];
  undefined1 local_14 [12];
  undefined4 *local_8;
  
  bVar7 = *(char *)(unaff_EDI + 0x264) == '\0';
  *(bool *)(unaff_EDI + 0x264) = bVar7;
  if (!bVar7) {
    return;
  }
  if (*(int *)(unaff_EDI + 0x580) == 0) goto LAB_00a1e603;
  iVar6 = *(int *)(*(int *)(unaff_EDI + 0xc) + 0x2ac4);
  if (iVar6 != 0) {
    *(undefined1 *)(iVar6 + 0x2eee9) = 1;
  }
  DVar3 = WaitForSingleObject(*(HANDLE *)(unaff_EDI + 0x580),0xffffffff);
  if (DVar3 == 0) {
    BVar4 = CloseHandle(*(HANDLE *)(unaff_EDI + 0x580));
    if (BVar4 == 0) {
      pwVar8 = L"Pathfinder CloseHandle Error";
      goto LAB_00a1e5dc;
    }
  }
  else {
    pwVar8 = L"WaitForSigleObject Error";
LAB_00a1e5dc:
    FUN_008018d0(pwVar8);
  }
  InterlockedExchange((LONG *)(unaff_EDI + 0x57c),0);
  *(undefined4 *)(unaff_EDI + 0x580) = 0;
LAB_00a1e603:
  if (*(int **)(unaff_EDI + 0xac) == (int *)0x0) {
    if (*(int **)(unaff_EDI + 0x59c) == (int *)0x0) {
      return;
    }
    iVar6 = **(int **)(unaff_EDI + 0x59c);
    piVar2 = *(int **)(unaff_EDI + 0x74);
    local_8 = (undefined4 *)(**(code **)(*piVar2 + 8))(local_20);
    iVar5 = (**(code **)(*piVar2 + 8))(local_14,0);
    uVar1 = *(undefined4 *)(iVar5 + 8);
  }
  else {
    iVar6 = **(int **)(unaff_EDI + 0xac);
    piVar2 = *(int **)(unaff_EDI + 0x74);
    local_8 = (undefined4 *)(**(code **)(*piVar2 + 8))(local_14);
    iVar5 = (**(code **)(*piVar2 + 8))(local_20,0);
    uVar1 = *(undefined4 *)(iVar5 + 8);
  }
  (**(code **)(iVar6 + 0x2b0))(*local_8,uVar1);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a1e570 : PUSH EBP
00a1e571 : MOV EBP,ESP
00a1e573 : SUB ESP,0x1c
00a1e576 : CMP byte ptr [EDI + 0x264],0x0
00a1e57d : SETZ AL
00a1e580 : MOV byte ptr [EDI + 0x264],AL
00a1e586 : TEST AL,AL
00a1e588 : JZ 0x00a1e694
00a1e58e : CMP dword ptr [EDI + 0x580],0x0
00a1e595 : PUSH ESI
00a1e596 : JZ 0x00a1e603
00a1e598 : MOV EAX,dword ptr [EDI + 0xc]
00a1e59b : MOV EAX,dword ptr [EAX + 0x2ac4]
00a1e5a1 : TEST EAX,EAX
00a1e5a3 : JZ 0x00a1e5ac
00a1e5a5 : MOV byte ptr [EAX + 0x2eee9],0x1
00a1e5ac : MOV EAX,dword ptr [EDI + 0x580]
00a1e5b2 : PUSH -0x1
00a1e5b4 : PUSH EAX
00a1e5b5 : CALL dword ptr [0x00b85100]
00a1e5bb : TEST EAX,EAX
00a1e5bd : JNZ 0x00a1e5d7
00a1e5bf : MOV ECX,dword ptr [EDI + 0x580]
00a1e5c5 : PUSH ECX
00a1e5c6 : CALL dword ptr [0x00b85104]
00a1e5cc : TEST EAX,EAX
00a1e5ce : JNZ 0x00a1e5ea
00a1e5d0 : PUSH 0xcc4aac
00a1e5d5 : JMP 0x00a1e5dc
00a1e5d7 : PUSH 0xcc4ae8
00a1e5dc : MOV ESI,dword ptr [0x00da98e8]
00a1e5e2 : CALL 0x008018d0
00a1e5e7 : ADD ESP,0x4
00a1e5ea : PUSH 0x0
00a1e5ec : LEA EDX,[EDI + 0x57c]
00a1e5f2 : PUSH EDX
00a1e5f3 : CALL dword ptr [0x00b85108]
00a1e5f9 : MOV dword ptr [EDI + 0x580],0x0
00a1e603 : MOV EAX,dword ptr [EDI + 0xac]
00a1e609 : PUSH EBX
00a1e60a : TEST EAX,EAX
00a1e60c : JZ 0x00a1e642
00a1e60e : MOV EBX,dword ptr [EAX]
00a1e610 : MOV EAX,dword ptr [EDI + 0x74]
00a1e613 : MOV ESI,EAX
00a1e615 : MOV EDX,dword ptr [ESI]
00a1e617 : MOV EDX,dword ptr [EDX + 0x8]
00a1e61a : LEA EAX,[EBP + -0x10]
00a1e61d : PUSH EAX
00a1e61e : MOV ECX,ESI
00a1e620 : CALL EDX
00a1e622 : MOV dword ptr [EBP + -0x4],EAX
00a1e625 : MOV EAX,dword ptr [ESI]
00a1e627 : MOV EDX,dword ptr [EAX + 0x8]
00a1e62a : PUSH 0x0
00a1e62c : LEA ECX,[EBP + -0x1c]
00a1e62f : PUSH ECX
00a1e630 : MOV ECX,ESI
00a1e632 : CALL EDX
00a1e634 : FLD float ptr [EAX + 0x8]
00a1e637 : MOV EAX,dword ptr [EBP + -0x4]
00a1e63a : MOV ECX,dword ptr [EDI + 0xac]
00a1e640 : JMP 0x00a1e67e
00a1e642 : MOV EAX,dword ptr [EDI + 0x59c]
00a1e648 : TEST EAX,EAX
00a1e64a : JZ 0x00a1e692
00a1e64c : MOV EBX,dword ptr [EAX]
00a1e64e : MOV EAX,dword ptr [EDI + 0x74]
00a1e651 : MOV ESI,EAX
00a1e653 : MOV EDX,dword ptr [ESI]
00a1e655 : MOV EDX,dword ptr [EDX + 0x8]
00a1e658 : LEA EAX,[EBP + -0x1c]
00a1e65b : PUSH EAX
00a1e65c : MOV ECX,ESI
00a1e65e : CALL EDX
00a1e660 : MOV dword ptr [EBP + -0x4],EAX
00a1e663 : MOV EAX,dword ptr [ESI]
00a1e665 : MOV EDX,dword ptr [EAX + 0x8]
00a1e668 : PUSH 0x0
00a1e66a : LEA ECX,[EBP + -0x10]
00a1e66d : PUSH ECX
00a1e66e : MOV ECX,ESI
00a1e670 : CALL EDX
00a1e672 : FLD float ptr [EAX + 0x8]
00a1e675 : MOV EAX,dword ptr [EBP + -0x4]
00a1e678 : MOV ECX,dword ptr [EDI + 0x59c]
00a1e67e : MOV EDX,dword ptr [EBX + 0x2b0]
00a1e684 : SUB ESP,0x8
00a1e687 : FSTP float ptr [ESP + 0x4]
00a1e68b : FLD float ptr [EAX]
00a1e68d : FSTP float ptr [ESP]
00a1e690 : CALL EDX
00a1e692 : POP EBX
00a1e693 : POP ESI
00a1e694 : MOV ESP,EBP
00a1e696 : POP EBP
00a1e697 : RET
