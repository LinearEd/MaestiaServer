PROGRAM  : Maestia.exe
FUNCTION : FUN_005b1c10
ENTRY    : 005b1c10
BODY     : [[005b1c10, 005b1de8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b1c10(int param_1)

{
  byte *pbVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 uVar7;
  undefined4 *local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  int local_4;
  
  cVar2 = FUN_00526030(8);
  if (cVar2 == '\0') {
    FUN_00526050("String",0,0);
    return;
  }
  if (*(int *)(param_1 + 8) == 0) {
    iVar6 = 0;
  }
  else {
    iVar6 = *(int *)(param_1 + 8) + -0x10;
  }
  if (*(int *)(param_1 + 0x1c) < 1) {
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    pbVar1[4] = 0;
    pbVar1[5] = 0;
    pbVar1[6] = 0;
    pbVar1[7] = 0;
    pbVar1[8] = 0;
    pbVar1[9] = 0;
    pbVar1[10] = 0xf0;
    pbVar1[0xb] = 0xbf;
    *pbVar1 = 3;
    return;
  }
  uVar7 = *(undefined4 *)(param_1 + 0x18);
  FUN_00526260(0);
  FUN_005272e0(&local_18,uVar7,0xffffffff,0);
  iVar3 = FUN_00524bc0();
  if (iVar3 == 0) {
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    *pbVar1 = 3;
    pbVar1[4] = 0;
    pbVar1[5] = 0;
    pbVar1[6] = 0;
    pbVar1[7] = 0;
    pbVar1[8] = 0;
    pbVar1[9] = 0;
    pbVar1[10] = 0;
    pbVar1[0xb] = 0;
    local_18[2] = local_18[2] + -1;
    if (local_18[2] == 0) {
      FUN_00525340();
      return;
    }
  }
  else {
    local_10 = *local_18;
    local_14 = **(undefined4 **)(iVar6 + 0x30);
    iVar6 = 0;
    if (1 < *(int *)(param_1 + 0x1c)) {
      uVar7 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(1);
      FUN_00527730(uVar7);
      iVar6 = FUN_0063b380();
    }
    local_4 = FUN_0051aa70(&local_10);
    iVar3 = 0;
    iVar4 = FUN_0051aa70(&local_14);
    while (iVar4 != 0) {
      if ((iVar6 <= iVar3) && (iVar4 == local_4)) {
        local_c = local_14;
        local_8 = local_10;
        iVar4 = FUN_0051aa70(&local_c);
        iVar5 = FUN_0051aa70(&local_8);
        while (iVar4 != 0) {
          if (iVar5 == 0) goto LAB_005b1dd2;
          if (iVar4 != iVar5) break;
          iVar4 = FUN_0051aa70(&local_c);
          iVar5 = FUN_0051aa70(&local_8);
        }
        if (iVar5 == 0) {
LAB_005b1dd2:
          FUN_005b4b50(iVar3);
          goto LAB_005b1db4;
        }
        if (iVar4 == 0) {
          FUN_005b4b50(0xffffffff);
          goto LAB_005b1db4;
        }
      }
      iVar3 = iVar3 + 1;
      iVar4 = FUN_0051aa70(&local_14);
    }
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    *pbVar1 = 3;
    pbVar1[4] = 0;
    pbVar1[5] = 0;
    pbVar1[6] = 0;
    pbVar1[7] = 0;
    pbVar1[8] = 0;
    pbVar1[9] = 0;
    pbVar1[10] = 0xf0;
    pbVar1[0xb] = 0xbf;
LAB_005b1db4:
    local_18[2] = local_18[2] + -1;
    if (local_18[2] == 0) {
      FUN_00525340();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005b1c10 : SUB ESP,0x18
005b1c13 : PUSH EDI
005b1c14 : MOV EDI,dword ptr [ESP + 0x20]
005b1c18 : PUSH 0x8
005b1c1a : MOV ECX,EDI
005b1c1c : CALL 0x00526030
005b1c21 : TEST AL,AL
005b1c23 : JNZ 0x005b1c3a
005b1c25 : PUSH 0x0
005b1c27 : PUSH 0x0
005b1c29 : PUSH 0xb8f800
005b1c2e : MOV ECX,EDI
005b1c30 : CALL 0x00526050
005b1c35 : POP EDI
005b1c36 : ADD ESP,0x18
005b1c39 : RET
005b1c3a : MOV EAX,dword ptr [EDI + 0x8]
005b1c3d : PUSH EBX
005b1c3e : TEST EAX,EAX
005b1c40 : JZ 0x005b1c47
005b1c42 : LEA EBX,[EAX + -0x10]
005b1c45 : JMP 0x005b1c49
005b1c47 : XOR EBX,EBX
005b1c49 : CMP dword ptr [EDI + 0x1c],0x1
005b1c4d : JGE 0x005b1c70
005b1c4f : MOV EDI,dword ptr [EDI + 0x4]
005b1c52 : CMP byte ptr [EDI],0x5
005b1c55 : JC 0x005b1c5e
005b1c57 : MOV ECX,EDI
005b1c59 : CALL 0x00526400
005b1c5e : FLD double ptr [0x00b86090]
005b1c64 : POP EBX
005b1c65 : FSTP double ptr [EDI + 0x4]
005b1c68 : MOV byte ptr [EDI],0x3
005b1c6b : POP EDI
005b1c6c : ADD ESP,0x18
005b1c6f : RET
005b1c70 : PUSH ESI
005b1c71 : MOV ESI,dword ptr [EDI + 0x18]
005b1c74 : PUSH 0x0
005b1c76 : MOV ECX,EDI
005b1c78 : CALL 0x00526260
005b1c7d : PUSH 0x0
005b1c7f : PUSH -0x1
005b1c81 : PUSH ESI
005b1c82 : LEA ECX,[ESP + 0x18]
005b1c86 : PUSH ECX
005b1c87 : MOV ECX,EAX
005b1c89 : CALL 0x005272e0
005b1c8e : LEA ECX,[ESP + 0xc]
005b1c92 : CALL 0x00524bc0
005b1c97 : TEST EAX,EAX
005b1c99 : JNZ 0x005b1cd3
005b1c9b : MOV ESI,dword ptr [EDI + 0x4]
005b1c9e : CMP byte ptr [ESI],0x5
005b1ca1 : JC 0x005b1caa
005b1ca3 : MOV ECX,ESI
005b1ca5 : CALL 0x00526400
005b1caa : FLDZ
005b1cac : MOV byte ptr [ESI],0x3
005b1caf : FSTP double ptr [ESI + 0x4]
005b1cb2 : MOV EAX,dword ptr [ESP + 0xc]
005b1cb6 : DEC dword ptr [EAX + 0x8]
005b1cb9 : MOV ECX,EAX
005b1cbb : ADD EAX,0x8
005b1cbe : CMP dword ptr [EAX],0x0
005b1cc1 : JNZ 0x005b1dcb
005b1cc7 : CALL 0x00525340
005b1ccc : POP ESI
005b1ccd : POP EBX
005b1cce : POP EDI
005b1ccf : ADD ESP,0x18
005b1cd2 : RET
005b1cd3 : MOV EDX,dword ptr [ESP + 0xc]
005b1cd7 : MOV EAX,dword ptr [EDX]
005b1cd9 : MOV dword ptr [ESP + 0x14],EAX
005b1cdd : MOV ECX,dword ptr [EBX + 0x30]
005b1ce0 : MOV EDX,dword ptr [ECX]
005b1ce2 : PUSH EBP
005b1ce3 : XOR EBP,EBP
005b1ce5 : CMP dword ptr [EDI + 0x1c],0x1
005b1ce9 : MOV dword ptr [ESP + 0x14],EDX
005b1ced : JLE 0x005b1d0a
005b1cef : MOV EAX,dword ptr [EDI + 0x18]
005b1cf2 : PUSH EAX
005b1cf3 : PUSH 0x1
005b1cf5 : MOV ECX,EDI
005b1cf7 : CALL 0x00526260
005b1cfc : MOV ECX,EAX
005b1cfe : CALL 0x00527730
005b1d03 : CALL 0x0063b380
005b1d08 : MOV EBP,EAX
005b1d0a : LEA ECX,[ESP + 0x18]
005b1d0e : PUSH ECX
005b1d0f : CALL 0x0051aa70
005b1d14 : LEA EDX,[ESP + 0x14]
005b1d18 : PUSH EDX
005b1d19 : MOV dword ptr [ESP + 0x28],EAX
005b1d1d : XOR EBX,EBX
005b1d1f : CALL 0x0051aa70
005b1d24 : TEST EAX,EAX
005b1d26 : JZ 0x005b1d99
005b1d28 : CMP EBX,EBP
005b1d2a : JL 0x005b1d8a
005b1d2c : CMP EAX,dword ptr [ESP + 0x24]
005b1d30 : JNZ 0x005b1d8a
005b1d32 : MOV EAX,dword ptr [ESP + 0x14]
005b1d36 : MOV ECX,dword ptr [ESP + 0x18]
005b1d3a : LEA EDX,[ESP + 0x1c]
005b1d3e : PUSH EDX
005b1d3f : MOV dword ptr [ESP + 0x20],EAX
005b1d43 : MOV dword ptr [ESP + 0x24],ECX
005b1d47 : CALL 0x0051aa70
005b1d4c : MOV ESI,EAX
005b1d4e : LEA EAX,[ESP + 0x20]
005b1d52 : PUSH EAX
005b1d53 : CALL 0x0051aa70
005b1d58 : TEST ESI,ESI
005b1d5a : JZ 0x005b1d82
005b1d5c : LEA ESP,[ESP]
005b1d60 : TEST EAX,EAX
005b1d62 : JZ 0x005b1dd2
005b1d64 : CMP ESI,EAX
005b1d66 : JNZ 0x005b1d82
005b1d68 : LEA ECX,[ESP + 0x1c]
005b1d6c : PUSH ECX
005b1d6d : CALL 0x0051aa70
005b1d72 : LEA EDX,[ESP + 0x20]
005b1d76 : PUSH EDX
005b1d77 : MOV ESI,EAX
005b1d79 : CALL 0x0051aa70
005b1d7e : TEST ESI,ESI
005b1d80 : JNZ 0x005b1d60
005b1d82 : TEST EAX,EAX
005b1d84 : JZ 0x005b1dd2
005b1d86 : TEST ESI,ESI
005b1d88 : JZ 0x005b1ddd
005b1d8a : LEA EAX,[ESP + 0x14]
005b1d8e : PUSH EAX
005b1d8f : INC EBX
005b1d90 : CALL 0x0051aa70
005b1d95 : TEST EAX,EAX
005b1d97 : JNZ 0x005b1d28
005b1d99 : MOV ESI,dword ptr [EDI + 0x4]
005b1d9c : CMP byte ptr [ESI],0x5
005b1d9f : JC 0x005b1da8
005b1da1 : MOV ECX,ESI
005b1da3 : CALL 0x00526400
005b1da8 : FLD double ptr [0x00b86090]
005b1dae : MOV byte ptr [ESI],0x3
005b1db1 : FSTP double ptr [ESI + 0x4]
005b1db4 : MOV EAX,dword ptr [ESP + 0x10]
005b1db8 : DEC dword ptr [EAX + 0x8]
005b1dbb : MOV ECX,EAX
005b1dbd : ADD EAX,0x8
005b1dc0 : CMP dword ptr [EAX],0x0
005b1dc3 : JNZ 0x005b1dca
005b1dc5 : CALL 0x00525340
005b1dca : POP EBP
005b1dcb : POP ESI
005b1dcc : POP EBX
005b1dcd : POP EDI
005b1dce : ADD ESP,0x18
005b1dd1 : RET
005b1dd2 : MOV ECX,dword ptr [EDI + 0x4]
005b1dd5 : PUSH EBX
005b1dd6 : CALL 0x005b4b50
005b1ddb : JMP 0x005b1db4
005b1ddd : MOV ECX,dword ptr [EDI + 0x4]
005b1de0 : PUSH -0x1
005b1de2 : CALL 0x005b4b50
005b1de7 : JMP 0x005b1db4
