PROGRAM  : Maestia.exe
FUNCTION : FUN_007bde30
ENTRY    : 007bde30
BODY     : [[007bde30, 007bde89] [007bdeb8, 007be1b4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bde30(float *param_1)

{
  float fVar1;
  undefined4 uVar2;
  int iVar3;
  int *piVar4;
  char cVar5;
  int *piVar6;
  int iVar7;
  int unaff_EDI;
  float10 fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  
  if (*(int *)(unaff_EDI + 0x20) != 0) {
    piVar6 = *(int **)(unaff_EDI + 0xe4);
    if (piVar6 != *(int **)(unaff_EDI + 0xe8)) {
      do {
        iVar3 = *piVar6;
        if ((((*(char *)(iVar3 + 0x48) == '\0') || (*(int *)(iVar3 + 0x4c) == 0)) &&
            (*(int *)(iVar3 + 0x58) != 0)) &&
           (cVar5 = FUN_007bd2e0(*(int *)(iVar3 + 0x58),0xfffffffb), cVar5 == '\0')) {
          FUN_00414770(iVar3);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        piVar6 = piVar6 + 1;
        piVar4 = *(int **)(iVar3 + 0x4c);
        if (piVar4 == (int *)0x0) {
          return;
        }
        if (*(char *)((int)piVar4 + 0x5d) != '\0') {
          (**(code **)(*piVar4 + 0x14))();
        }
        fVar1 = (float)piVar4[0x2f];
        fVar11 = (float)piVar4[0x30];
        fVar9 = (float)piVar4[0x2e] - *param_1;
        fVar10 = fVar1 - param_1[1];
        fVar12 = fVar11 - param_1[2];
        *(int *)(iVar3 + 0x20) = piVar4[0x2e];
        *(float *)(iVar3 + 0x24) = fVar1;
        *(float *)(iVar3 + 0x28) = fVar11;
        fVar8 = (float10)FUN_0040f460(fVar12 * fVar12 + fVar9 * fVar9 + fVar10 * fVar10);
        *(float *)(iVar3 + 0x40) = (float)fVar8;
        if ((float10)*(float *)(iVar3 + 0x30) + (float10)20.0 < fVar8) {
LAB_007bdf7c:
          *(float *)(iVar3 + 0x40) = (float)fVar8 + 1e+08;
        }
        else if (*(char *)(iVar3 + 0x54) == '\0') {
LAB_007bdf73:
          if (*(char *)(unaff_EDI + 0xd8) == '\0') goto LAB_007bdf7c;
        }
        else {
          if (*(char *)(unaff_EDI + 0xd9) == '\0') goto LAB_007bdf7c;
          if (*(char *)(iVar3 + 0x54) == '\0') goto LAB_007bdf73;
        }
      } while (piVar6 != *(int **)(unaff_EDI + 0xe8));
    }
    if ((*(int *)(unaff_EDI + 0xe8) - *(int *)(unaff_EDI + 0xe4) & 0xfffffffcU) != 0) {
      FUN_00464b40(*(int *)(unaff_EDI + 0xe4),*(int *)(unaff_EDI + 0xe8),
                   *(int *)(unaff_EDI + 0xe8) - *(int *)(unaff_EDI + 0xe4) >> 2,FUN_007baff0);
      piVar6 = *(int **)(unaff_EDI + 0xe4);
      param_1 = (float *)0xa;
      if (piVar6 != *(int **)(unaff_EDI + 0xe8)) {
        do {
          iVar3 = *piVar6;
          if ((int)param_1 < 1) {
            piVar4 = *(int **)(iVar3 + 0x58);
            if (piVar4 != (int *)0x0) {
              if ((*piVar4 != 0) && (iVar7 = _AIL_sample_status_4(*piVar4), iVar7 == 4)) {
                _AIL_end_sample_4(*piVar4);
              }
              cVar5 = FUN_007bd2e0(*(undefined4 *)(iVar3 + 0x58),0xfffffffb);
              if ((cVar5 == '\0') && (*(int *)(iVar3 + 0x58) != 0)) {
                FUN_00464400();
                *(undefined4 *)(iVar3 + 0x58) = 0;
              }
            }
          }
          else if (*(int *)(iVar3 + 0x58) != 0) {
            if (*(char *)(unaff_EDI + 0xd9) == '\0') {
              if ((*(int *)(iVar3 + 0x58) != 0) && (*(char *)(unaff_EDI + 0xd9) == '\0')) {
                FUN_00753ea0();
              }
            }
            else {
              FUN_00754170();
            }
          }
          param_1 = (float *)((int)param_1 + -1);
          piVar6 = piVar6 + 1;
        } while (piVar6 != *(int **)(unaff_EDI + 0xe8));
      }
      piVar6 = *(int **)(unaff_EDI + 0xe4);
      param_1 = (float *)0xa;
      if (piVar6 != *(int **)(unaff_EDI + 0xe8)) {
        do {
          if ((int)param_1 < 1) break;
          iVar3 = *piVar6;
          if (*(int *)(iVar3 + 0x58) == 0) {
            if (*(float *)(iVar3 + 0x40) <= 1e+08 && *(float *)(iVar3 + 0x40) != 1e+08) {
              iVar7 = FUN_007bd5a0(iVar3 + 4);
              *(int *)(iVar3 + 0x58) = iVar7;
              if (iVar7 != 0) {
                fVar1 = *(float *)(iVar3 + 0x44);
                if (*(char *)(iVar3 + 0x54) == '\0') {
                  fVar11 = *(float *)(unaff_EDI + 0x9c);
                }
                else {
                  fVar11 = *(float *)(unaff_EDI + 0xa4);
                }
                *(float *)(iVar3 + 0x44) = fVar11 * fVar1;
                iVar7 = FUN_00754450(iVar7,*(undefined4 *)(unaff_EDI + 0x20),iVar3);
                if (iVar7 == 1) {
                  *(float *)(iVar3 + 0x44) = fVar1;
                }
                else {
                  cVar5 = FUN_007bd2e0(*(undefined4 *)(iVar3 + 0x58),iVar7);
                  if ((cVar5 == '\0') && (*(int *)(iVar3 + 0x58) != 0)) {
                    FUN_00464400();
                    *(undefined4 *)(iVar3 + 0x58) = 0;
                  }
                }
              }
            }
          }
          else {
            if (*(char *)(unaff_EDI + 0xdd) != '\0') {
              if (*(char *)(iVar3 + 0x54) == '\0') {
                uVar2 = *(undefined4 *)(unaff_EDI + 0x9c);
              }
              else {
                uVar2 = *(undefined4 *)(unaff_EDI + 0xa4);
              }
              FUN_00753ed0(uVar2);
            }
            FUN_00753e10();
          }
          param_1 = (float *)((int)param_1 + -1);
          piVar6 = piVar6 + 1;
        } while (piVar6 != *(int **)(unaff_EDI + 0xe8));
      }
      *(undefined1 *)(unaff_EDI + 0xdd) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007bde30 : PUSH EBP
007bde31 : MOV EBP,ESP
007bde33 : SUB ESP,0xc
007bde36 : CMP dword ptr [EDI + 0x20],0x0
007bde3a : PUSH EBX
007bde3b : PUSH ESI
007bde3c : JZ 0x007be1ad
007bde42 : MOV EBX,dword ptr [EDI + 0xe4]
007bde48 : CMP EBX,dword ptr [EDI + 0xe8]
007bde4e : JZ 0x007bdf9d
007bde54 : LEA EAX,[EBX + 0x4]
007bde57 : MOV dword ptr [EBP + -0x8],EAX
007bde5a : MOV ESI,dword ptr [EBX]
007bde5c : CMP byte ptr [ESI + 0x48],0x0
007bde60 : JZ 0x007bde68
007bde62 : CMP dword ptr [ESI + 0x4c],0x0
007bde66 : JNZ 0x007bdeb8
007bde68 : MOV EAX,dword ptr [ESI + 0x58]
007bde6b : TEST EAX,EAX
007bde6d : JZ 0x007bdeb8
007bde6f : PUSH -0x5
007bde71 : PUSH EAX
007bde72 : MOV ECX,EDI
007bde74 : CALL 0x007bd2e0
007bde79 : TEST AL,AL
007bde7b : JNZ 0x007bdeb8
007bde7d : PUSH ESI
007bde7e : CALL 0x00414770
007bde83 : MOV ECX,ESI
007bde85 : CALL 0x006f04e0
007bdeb8 : ADD dword ptr [EBP + -0x8],0x4
007bdebc : ADD EBX,0x4
007bdebf : MOV dword ptr [EBP + -0x4],EBX
007bdec2 : MOV EBX,dword ptr [ESI + 0x4c]
007bdec5 : TEST EBX,EBX
007bdec7 : JZ 0x007be1ad
007bdecd : CMP byte ptr [EBX + 0x5d],0x0
007bded1 : JZ 0x007bdedc
007bded3 : MOV EDX,dword ptr [EBX]
007bded5 : MOV EAX,dword ptr [EDX + 0x14]
007bded8 : MOV ECX,EBX
007bdeda : CALL EAX
007bdedc : MOVSS XMM3,dword ptr [EBX + 0xb8]
007bdee4 : MOVSS XMM4,dword ptr [EBX + 0xbc]
007bdeec : MOVSS XMM5,dword ptr [EBX + 0xc0]
007bdef4 : MOV EAX,dword ptr [EBP + 0x8]
007bdef7 : MOVAPS XMM0,XMM3
007bdefa : SUBSS XMM0,dword ptr [EAX]
007bdefe : MOVAPS XMM1,XMM4
007bdf01 : SUBSS XMM1,dword ptr [EAX + 0x4]
007bdf06 : MOVAPS XMM2,XMM5
007bdf09 : SUBSS XMM2,dword ptr [EAX + 0x8]
007bdf0e : MOVSS dword ptr [ESI + 0x20],XMM3
007bdf13 : MOVAPS XMM3,XMM2
007bdf16 : MULSS XMM3,XMM2
007bdf1a : MOVAPS XMM2,XMM0
007bdf1d : MULSS XMM2,XMM0
007bdf21 : MOVAPS XMM0,XMM1
007bdf24 : ADDSS XMM3,XMM2
007bdf28 : MULSS XMM0,XMM1
007bdf2c : PUSH ECX
007bdf2d : ADDSS XMM3,XMM0
007bdf31 : MOVSS dword ptr [ESI + 0x24],XMM4
007bdf36 : MOVSS dword ptr [ESI + 0x28],XMM5
007bdf3b : MOVSS dword ptr [ESP],XMM3
007bdf40 : CALL 0x0040f460
007bdf45 : FST float ptr [EBP + -0xc]
007bdf48 : FST float ptr [ESI + 0x40]
007bdf4b : ADD ESP,0x4
007bdf4e : FLD float ptr [ESI + 0x30]
007bdf51 : FADD float ptr [0x00cdf140]
007bdf57 : FXCH
007bdf59 : FCOMIP ST0,ST1
007bdf5b : FSTP ST0
007bdf5d : JA 0x007bdf7c
007bdf5f : MOV AL,byte ptr [ESI + 0x54]
007bdf62 : TEST AL,AL
007bdf64 : JZ 0x007bdf73
007bdf66 : CMP byte ptr [EDI + 0xd9],0x0
007bdf6d : JZ 0x007bdf7c
007bdf6f : TEST AL,AL
007bdf71 : JNZ 0x007bdf8e
007bdf73 : CMP byte ptr [EDI + 0xd8],0x0
007bdf7a : JNZ 0x007bdf8e
007bdf7c : MOVSS XMM0,dword ptr [EBP + -0xc]
007bdf81 : ADDSS XMM0,dword ptr [0x00cdf65c]
007bdf89 : MOVSS dword ptr [ESI + 0x40],XMM0
007bdf8e : MOV EBX,dword ptr [EBP + -0x4]
007bdf91 : CMP EBX,dword ptr [EDI + 0xe8]
007bdf97 : JNZ 0x007bde5a
007bdf9d : MOV ECX,dword ptr [EDI + 0xe8]
007bdfa3 : SUB ECX,dword ptr [EDI + 0xe4]
007bdfa9 : TEST ECX,0xfffffffc
007bdfaf : JZ 0x007be1ad
007bdfb5 : MOV EAX,dword ptr [EDI + 0xe8]
007bdfbb : MOV ECX,dword ptr [EDI + 0xe4]
007bdfc1 : MOV EDX,EAX
007bdfc3 : SUB EDX,ECX
007bdfc5 : PUSH 0x7baff0
007bdfca : SAR EDX,0x2
007bdfcd : PUSH EDX
007bdfce : PUSH EAX
007bdfcf : PUSH ECX
007bdfd0 : CALL 0x00464b40
007bdfd5 : MOV EAX,dword ptr [EDI + 0xe4]
007bdfdb : ADD ESP,0x10
007bdfde : MOV dword ptr [EBP + 0x8],0xa
007bdfe5 : MOV dword ptr [EBP + -0x4],EAX
007bdfe8 : CMP EAX,dword ptr [EDI + 0xe8]
007bdfee : JZ 0x007be08e
007bdff4 : CMP dword ptr [EBP + 0x8],0x0
007bdff8 : MOV EBX,dword ptr [EAX]
007bdffa : JG 0x007be049
007bdffc : MOV ESI,dword ptr [EBX + 0x58]
007bdfff : TEST ESI,ESI
007be001 : JZ 0x007be076
007be003 : MOV EAX,dword ptr [ESI]
007be005 : TEST EAX,EAX
007be007 : JZ 0x007be023
007be009 : PUSH EAX
007be00a : CALL dword ptr [0x00b85708]
007be010 : CMP EAX,0x4
007be013 : SETZ AL
007be016 : TEST AL,AL
007be018 : JZ 0x007be023
007be01a : MOV EAX,dword ptr [ESI]
007be01c : PUSH EAX
007be01d : CALL dword ptr [0x00b856f4]
007be023 : MOV ECX,dword ptr [EBX + 0x58]
007be026 : PUSH -0x5
007be028 : PUSH ECX
007be029 : MOV ECX,EDI
007be02b : CALL 0x007bd2e0
007be030 : TEST AL,AL
007be032 : JNZ 0x007be076
007be034 : MOV ESI,dword ptr [EBX + 0x58]
007be037 : TEST ESI,ESI
007be039 : JZ 0x007be076
007be03b : CALL 0x00464400
007be040 : MOV dword ptr [EBX + 0x58],0x0
007be047 : JMP 0x007be076
007be049 : MOV EBX,dword ptr [EBX + 0x58]
007be04c : TEST EBX,EBX
007be04e : JZ 0x007be076
007be050 : CMP byte ptr [EDI + 0xd9],0x0
007be057 : JZ 0x007be062
007be059 : MOV ESI,EBX
007be05b : CALL 0x00754170
007be060 : JMP 0x007be076
007be062 : TEST EBX,EBX
007be064 : JZ 0x007be076
007be066 : CMP byte ptr [EDI + 0xd9],0x0
007be06d : JNZ 0x007be076
007be06f : MOV ESI,EBX
007be071 : CALL 0x00753ea0
007be076 : MOV EAX,dword ptr [EBP + -0x4]
007be079 : DEC dword ptr [EBP + 0x8]
007be07c : ADD EAX,0x4
007be07f : MOV dword ptr [EBP + -0x4],EAX
007be082 : CMP EAX,dword ptr [EDI + 0xe8]
007be088 : JNZ 0x007bdff4
007be08e : MOV ESI,dword ptr [EDI + 0xe4]
007be094 : MOV dword ptr [EBP + 0x8],0xa
007be09b : MOV dword ptr [EBP + -0x4],ESI
007be09e : CMP ESI,dword ptr [EDI + 0xe8]
007be0a4 : JZ 0x007be1a6
007be0aa : CMP dword ptr [EBP + 0x8],0x0
007be0ae : JLE 0x007be1a6
007be0b4 : MOV EBX,dword ptr [ESI]
007be0b6 : MOV EAX,dword ptr [EBX + 0x58]
007be0b9 : TEST EAX,EAX
007be0bb : JNZ 0x007be15b
007be0c1 : MOVSS XMM0,dword ptr [0x00cdf65c]
007be0c9 : COMISS XMM0,dword ptr [EBX + 0x40]
007be0cd : JBE 0x007be157
007be0d3 : LEA EDX,[EBX + 0x4]
007be0d6 : PUSH EDX
007be0d7 : MOV ECX,EDI
007be0d9 : CALL 0x007bd5a0
007be0de : MOV dword ptr [EBX + 0x58],EAX
007be0e1 : TEST EAX,EAX
007be0e3 : JZ 0x007be191
007be0e9 : CMP byte ptr [EBX + 0x54],0x0
007be0ed : MOVSS XMM0,dword ptr [EBX + 0x44]
007be0f2 : MOVSS dword ptr [EBP + -0xc],XMM0
007be0f7 : JZ 0x007be103
007be0f9 : MOVSS XMM1,dword ptr [EDI + 0xa4]
007be101 : JMP 0x007be10b
007be103 : MOVSS XMM1,dword ptr [EDI + 0x9c]
007be10b : MULSS XMM1,XMM0
007be10f : MOVSS dword ptr [EBX + 0x44],XMM1
007be114 : MOV ECX,dword ptr [EDI + 0x20]
007be117 : PUSH EBX
007be118 : PUSH ECX
007be119 : PUSH EAX
007be11a : CALL 0x00754450
007be11f : CMP EAX,0x1
007be122 : JNZ 0x007be130
007be124 : MOVSS XMM0,dword ptr [EBP + -0xc]
007be129 : MOVSS dword ptr [EBX + 0x44],XMM0
007be12e : JMP 0x007be191
007be130 : MOV EDX,dword ptr [EBX + 0x58]
007be133 : PUSH EAX
007be134 : PUSH EDX
007be135 : MOV ECX,EDI
007be137 : CALL 0x007bd2e0
007be13c : TEST AL,AL
007be13e : JNZ 0x007be191
007be140 : MOV EAX,dword ptr [EBX + 0x58]
007be143 : TEST EAX,EAX
007be145 : JZ 0x007be191
007be147 : MOV ESI,EAX
007be149 : CALL 0x00464400
007be14e : MOV dword ptr [EBX + 0x58],0x0
007be155 : JMP 0x007be18e
007be157 : TEST EAX,EAX
007be159 : JZ 0x007be191
007be15b : CMP byte ptr [EDI + 0xdd],0x0
007be162 : JZ 0x007be183
007be164 : CMP byte ptr [EBX + 0x54],0x0
007be168 : PUSH ECX
007be169 : MOV ESI,EAX
007be16b : JZ 0x007be175
007be16d : FLD float ptr [EDI + 0xa4]
007be173 : JMP 0x007be17b
007be175 : FLD float ptr [EDI + 0x9c]
007be17b : FSTP float ptr [ESP]
007be17e : CALL 0x00753ed0
007be183 : MOV ESI,dword ptr [EBX + 0x58]
007be186 : LEA EAX,[EBX + 0x20]
007be189 : CALL 0x00753e10
007be18e : MOV ESI,dword ptr [EBP + -0x4]
007be191 : DEC dword ptr [EBP + 0x8]
007be194 : ADD ESI,0x4
007be197 : MOV dword ptr [EBP + -0x4],ESI
007be19a : CMP ESI,dword ptr [EDI + 0xe8]
007be1a0 : JNZ 0x007be0aa
007be1a6 : MOV byte ptr [EDI + 0xdd],0x0
007be1ad : POP ESI
007be1ae : POP EBX
007be1af : MOV ESP,EBP
007be1b1 : POP EBP
007be1b2 : RET 0x4
