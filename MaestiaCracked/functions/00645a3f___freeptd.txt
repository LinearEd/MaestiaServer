PROGRAM  : Maestia.exe
FUNCTION : __freeptd
ENTRY    : 00645a3f
BODY     : [[00645a3f, 00645aac]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __freeptd
   
   Library: Visual Studio 2008 Release */

void __cdecl __freeptd(_ptiddata _Ptd)

{
  LPVOID pvVar1;
  code *pcVar2;
  int iVar3;
  
  if (DAT_00d67558 != -1) {
    if ((_Ptd == (_ptiddata)0x0) && (pvVar1 = TlsGetValue(DAT_00d6755c), pvVar1 != (LPVOID)0x0)) {
      iVar3 = DAT_00d67558;
      pcVar2 = TlsGetValue(DAT_00d6755c);
      _Ptd = (_ptiddata)(*pcVar2)(iVar3);
    }
    pcVar2 = (code *)__decode_pointer(DAT_00d7be54,DAT_00d67558,0);
    (*pcVar2)();
    __freefls_4(_Ptd);
  }
  if (DAT_00d6755c != 0xffffffff) {
    TlsSetValue(DAT_00d6755c,(LPVOID)0x0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00645a3f : MOV EDI,EDI
00645a41 : PUSH EBP
00645a42 : MOV EBP,ESP
00645a44 : CMP dword ptr [0x00d67558],-0x1
00645a4b : JZ 0x00645a98
00645a4d : CMP dword ptr [EBP + 0x8],0x0
00645a51 : JNZ 0x00645a7a
00645a53 : PUSH ESI
00645a54 : PUSH dword ptr [0x00d6755c]
00645a5a : MOV ESI,dword ptr [0x00b8527c]
00645a60 : CALL ESI
00645a62 : TEST EAX,EAX
00645a64 : JZ 0x00645a79
00645a66 : PUSH dword ptr [0x00d67558]
00645a6c : PUSH dword ptr [0x00d6755c]
00645a72 : CALL ESI
00645a74 : CALL EAX
00645a76 : MOV dword ptr [EBP + 0x8],EAX
00645a79 : POP ESI
00645a7a : PUSH 0x0
00645a7c : PUSH dword ptr [0x00d67558]
00645a82 : PUSH dword ptr [0x00d7be54]
00645a88 : CALL 0x0064566d
00645a8d : POP ECX
00645a8e : CALL EAX
00645a90 : PUSH dword ptr [EBP + 0x8]
00645a93 : CALL 0x00645910
00645a98 : MOV EAX,[0x00d6755c]
00645a9d : CMP EAX,-0x1
00645aa0 : JZ 0x00645aab
00645aa2 : PUSH 0x0
00645aa4 : PUSH EAX
00645aa5 : CALL dword ptr [0x00b85274]
00645aab : POP EBP
00645aac : RET
