PROGRAM  : Maestia.exe
FUNCTION : FUN_007f8ff0
ENTRY    : 007f8ff0
BODY     : [[007f8ff0, 007f91a3]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007f8ff0(int param_1,uint param_2,int *param_3,undefined4 param_4)

{
  int iVar1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  undefined4 local_44;
  undefined1 local_40;
  undefined4 local_3c;
  uint local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_28;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b293ee;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (param_2 < 0x283) {
    if (param_2 == 0x282) goto LAB_007f907c;
    if (0x10f < param_2) {
      if (param_2 != 0x281) {
        return 0;
      }
      return 1;
    }
    if (0x10c < param_2) goto LAB_007f907c;
    bVar6 = param_2 == 0x51;
  }
  else {
    if (param_2 == 0x286) goto LAB_007f907c;
    bVar6 = param_2 == 0x290;
  }
  if (!bVar6) {
    return 0;
  }
LAB_007f907c:
  local_38 = param_2;
  local_34 = param_3;
  uVar5 = 0;
  param_3 = (int *)(param_1 + 0xc);
  bVar6 = false;
  local_40 = 0;
  local_44 = 0xe;
  local_3c = 0;
  local_30 = param_4;
  local_28 = 1;
  ExceptionList = &local_10;
  do {
    iVar1 = *param_3;
    if ((((iVar1 != 0) && (*(int *)(iVar1 + 4) == 2)) && (0 < *(int *)(iVar1 + 0x60))) &&
       (cVar2 = (**(code **)(**(int **)(iVar1 + 0x54) + 0xc4))(uVar3), cVar2 != '\0')) {
      local_24 = (LPCRITICAL_SECTION)(iVar1 + 0xc);
      bVar6 = true;
      local_18 = 0;
      local_20 = ".\\World\\AvaWorld.cpp";
      local_1c = 0xf1b;
      local_14 = 1;
      FUN_006ef1a0(&local_24);
      local_8 = 0;
      uVar4 = (**(code **)(**(int **)(iVar1 + 0x54) + 0xa4))(&local_44);
      if ((uVar4 & 2) != 0) {
        local_8 = 0xffffffff;
        if (local_18 != 0) {
          LeaveCriticalSection(local_24);
        }
        ExceptionList = local_10;
        return 1;
      }
      local_8 = 0xffffffff;
      if (local_18 != 0) {
        LeaveCriticalSection(local_24);
        local_18 = 0;
      }
    }
    param_3 = param_3 + 1;
    uVar5 = uVar5 + 1;
  } while (uVar5 < 0x20);
  if (!bVar6) {
    FUN_008018d0(L"[AvaWorld::OnGfxMsgProcIME] No Focus");
  }
  ExceptionList = local_10;
  return 2;
}



============================================================
DISASSEMBLY
============================================================
007f8ff0 : PUSH EBP
007f8ff1 : MOV EBP,ESP
007f8ff3 : PUSH -0x1
007f8ff5 : PUSH 0xb293ee
007f8ffa : MOV EAX,FS:[0x0]
007f9000 : PUSH EAX
007f9001 : SUB ESP,0x34
007f9004 : PUSH EBX
007f9005 : PUSH ESI
007f9006 : PUSH EDI
007f9007 : MOV EAX,[0x00d66fa0]
007f900c : XOR EAX,EBP
007f900e : PUSH EAX
007f900f : LEA EAX,[EBP + -0xc]
007f9012 : MOV FS:[0x0],EAX
007f9018 : MOV EAX,dword ptr [EBP + 0xc]
007f901b : CMP EAX,0x282
007f9020 : JA 0x007f9057
007f9022 : JZ 0x007f907c
007f9024 : CMP EAX,0x10f
007f9029 : JA 0x007f9037
007f902b : CMP EAX,0x10d
007f9030 : JNC 0x007f907c
007f9032 : CMP EAX,0x51
007f9035 : JMP 0x007f9064
007f9037 : CMP EAX,0x281
007f903c : JNZ 0x007f9066
007f903e : MOV EAX,0x1
007f9043 : MOV ECX,dword ptr [EBP + -0xc]
007f9046 : MOV dword ptr FS:[0x0],ECX
007f904d : POP ECX
007f904e : POP EDI
007f904f : POP ESI
007f9050 : POP EBX
007f9051 : MOV ESP,EBP
007f9053 : POP EBP
007f9054 : RET 0x10
007f9057 : MOV ECX,EAX
007f9059 : SUB ECX,0x286
007f905f : JZ 0x007f907c
007f9061 : SUB ECX,0xa
007f9064 : JZ 0x007f907c
007f9066 : XOR EAX,EAX
007f9068 : MOV ECX,dword ptr [EBP + -0xc]
007f906b : MOV dword ptr FS:[0x0],ECX
007f9072 : POP ECX
007f9073 : POP EDI
007f9074 : POP ESI
007f9075 : POP EBX
007f9076 : MOV ESP,EBP
007f9078 : POP EBP
007f9079 : RET 0x10
007f907c : MOV ECX,dword ptr [EBP + 0x14]
007f907f : MOV dword ptr [EBP + -0x34],EAX
007f9082 : MOV EAX,dword ptr [EBP + 0x10]
007f9085 : XOR EBX,EBX
007f9087 : MOV dword ptr [EBP + -0x30],EAX
007f908a : MOV EAX,dword ptr [EBP + 0x8]
007f908d : XOR EDI,EDI
007f908f : ADD EAX,0xc
007f9092 : MOV byte ptr [EBP + 0xf],BL
007f9095 : MOV byte ptr [EBP + -0x3c],BL
007f9098 : MOV dword ptr [EBP + -0x40],0xe
007f909f : MOV dword ptr [EBP + -0x38],EBX
007f90a2 : MOV dword ptr [EBP + -0x2c],ECX
007f90a5 : MOV dword ptr [EBP + -0x28],EDX
007f90a8 : MOV dword ptr [EBP + -0x24],0x1
007f90af : MOV dword ptr [EBP + 0x10],EAX
007f90b2 : MOV ECX,dword ptr [EBP + 0x10]
007f90b5 : MOV ESI,dword ptr [ECX]
007f90b7 : CMP ESI,EBX
007f90b9 : JZ 0x007f9133
007f90bb : CMP dword ptr [ESI + 0x4],0x2
007f90bf : JNZ 0x007f9133
007f90c1 : CMP dword ptr [ESI + 0x60],EBX
007f90c4 : JLE 0x007f9133
007f90c6 : MOV ECX,dword ptr [ESI + 0x54]
007f90c9 : MOV EDX,dword ptr [ECX]
007f90cb : MOV EAX,dword ptr [EDX + 0xc4]
007f90d1 : CALL EAX
007f90d3 : TEST AL,AL
007f90d5 : JZ 0x007f9133
007f90d7 : LEA EDX,[EBP + -0x20]
007f90da : LEA ECX,[ESI + 0xc]
007f90dd : PUSH EDX
007f90de : MOV byte ptr [EBP + 0xf],0x1
007f90e2 : MOV dword ptr [EBP + -0x14],EBX
007f90e5 : MOV dword ptr [EBP + -0x20],ECX
007f90e8 : MOV dword ptr [EBP + -0x1c],0xc25a30
007f90ef : MOV dword ptr [EBP + -0x18],0xf1b
007f90f6 : MOV dword ptr [EBP + -0x10],0x1
007f90fd : CALL 0x006ef1a0
007f9102 : MOV dword ptr [EBP + -0x4],EBX
007f9105 : MOV ECX,dword ptr [ESI + 0x54]
007f9108 : MOV EAX,dword ptr [ECX]
007f910a : MOV EAX,dword ptr [EAX + 0xa4]
007f9110 : LEA EDX,[EBP + -0x40]
007f9113 : PUSH EDX
007f9114 : CALL EAX
007f9116 : TEST AL,0x2
007f9118 : JNZ 0x007f9172
007f911a : MOV dword ptr [EBP + -0x4],0xffffffff
007f9121 : CMP dword ptr [EBP + -0x14],EBX
007f9124 : JZ 0x007f9133
007f9126 : MOV ECX,dword ptr [EBP + -0x20]
007f9129 : PUSH ECX
007f912a : CALL dword ptr [0x00b8511c]
007f9130 : MOV dword ptr [EBP + -0x14],EBX
007f9133 : ADD dword ptr [EBP + 0x10],0x4
007f9137 : INC EDI
007f9138 : CMP EDI,0x20
007f913b : JC 0x007f90b2
007f9141 : CMP byte ptr [EBP + 0xf],BL
007f9144 : JNZ 0x007f9159
007f9146 : MOV ESI,dword ptr [0x00da98e8]
007f914c : PUSH 0xc25a48
007f9151 : CALL 0x008018d0
007f9156 : ADD ESP,0x4
007f9159 : MOV EAX,0x2
007f915e : MOV ECX,dword ptr [EBP + -0xc]
007f9161 : MOV dword ptr FS:[0x0],ECX
007f9168 : POP ECX
007f9169 : POP EDI
007f916a : POP ESI
007f916b : POP EBX
007f916c : MOV ESP,EBP
007f916e : POP EBP
007f916f : RET 0x10
007f9172 : MOV dword ptr [EBP + -0x4],0xffffffff
007f9179 : CMP dword ptr [EBP + -0x14],EBX
007f917c : JZ 0x007f918b
007f917e : MOV EDX,dword ptr [EBP + -0x20]
007f9181 : PUSH EDX
007f9182 : CALL dword ptr [0x00b8511c]
007f9188 : MOV dword ptr [EBP + -0x14],EBX
007f918b : MOV EAX,0x1
007f9190 : MOV ECX,dword ptr [EBP + -0xc]
007f9193 : MOV dword ptr FS:[0x0],ECX
007f919a : POP ECX
007f919b : POP EDI
007f919c : POP ESI
007f919d : POP EBX
007f919e : MOV ESP,EBP
007f91a0 : POP EBP
007f91a1 : RET 0x10
