PROGRAM  : Maestia.exe
FUNCTION : FUN_006b6930
ENTRY    : 006b6930
BODY     : [[006b6930, 006b6b46]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b6930(void)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  int unaff_ESI;
  int local_14;
  undefined4 local_c;
  
  if (*(int *)(unaff_ESI + 0x10) < *(int *)(unaff_ESI + 0x130)) {
    *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
    return;
  }
  if (((*(short *)(unaff_ESI + 0x158) == 0) || (*(short *)(unaff_ESI + 0x15a) == 0)) ||
     (*(short *)(unaff_ESI + 0x15c) == 0)) {
    bVar2 = true;
    bVar1 = true;
  }
  else {
    bVar1 = false;
    bVar2 = false;
  }
  if (*(ushort *)(unaff_ESI + 0x11e) < *(ushort *)(unaff_ESI + 0x2c)) {
    if (*(ushort *)(unaff_ESI + 0x120) < *(ushort *)(unaff_ESI + 0x50)) {
      local_14 = (**(code **)(unaff_ESI + 0x240))();
      local_c = (**(code **)(unaff_ESI + 0x23c))();
    }
    else {
      local_14 = 0;
      local_c = 0;
    }
    iVar3 = *(int *)(unaff_ESI + 0x130);
    while (0 < iVar3) {
      *(int *)(unaff_ESI + 0x1c) = *(int *)(unaff_ESI + 0x1c) + -1;
      if (*(uint *)(*(int *)(unaff_ESI + 0x18) + *(int *)(unaff_ESI + 0x1c) * 4) <
          (uint)*(ushort *)(unaff_ESI + 0x74)) {
        if (bVar1) {
          iVar3 = (**(code **)(unaff_ESI + 0x240))();
        }
        else {
          iVar3 = (**(code **)(unaff_ESI + 0x240))();
        }
        (**(code **)(unaff_ESI + 0x23c))();
        if ((iVar3 != 0) && (local_14 != 0)) {
          FUN_00685d60(iVar3,local_c,local_14);
        }
        (**(code **)(unaff_ESI + 0x248))();
        bVar1 = bVar2;
      }
      else if (*(char *)(unaff_ESI + 0x231) != '\0') {
        *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
        return;
      }
      *(int *)(unaff_ESI + 0x130) = *(int *)(unaff_ESI + 0x130) + -1;
      iVar3 = *(int *)(unaff_ESI + 0x130);
    }
    *(undefined4 *)(unaff_ESI + 0x130) = 1;
    *(undefined4 *)(unaff_ESI + 0x20) = *(undefined4 *)(unaff_ESI + 0x1c);
  }
  else if (*(char *)(unaff_ESI + 0x231) != '\0') {
    *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b6930 : MOV EAX,dword ptr [ESI + 0x10]
006b6933 : SUB ESP,0x14
006b6936 : CMP EAX,dword ptr [ESI + 0x130]
006b693c : JGE 0x006b6949
006b693e : MOV dword ptr [ESI + 0xc],0x86
006b6945 : ADD ESP,0x14
006b6948 : RET
006b6949 : XOR ECX,ECX
006b694b : PUSH EBX
006b694c : CMP word ptr [ESI + 0x158],CX
006b6953 : JZ 0x006b696f
006b6955 : CMP word ptr [ESI + 0x15a],CX
006b695c : JZ 0x006b696f
006b695e : CMP word ptr [ESI + 0x15c],CX
006b6965 : JZ 0x006b696f
006b6967 : XOR EBX,EBX
006b6969 : MOV dword ptr [ESP + 0x8],EBX
006b696d : JMP 0x006b697b
006b696f : MOV dword ptr [ESP + 0x8],0x1
006b6977 : MOV EBX,dword ptr [ESP + 0x8]
006b697b : MOVZX EAX,word ptr [ESI + 0x11e]
006b6982 : CMP AX,word ptr [ESI + 0x2c]
006b6986 : JC 0x006b69a0
006b6988 : CMP byte ptr [ESI + 0x231],CL
006b698e : JZ 0x006b6b42
006b6994 : MOV dword ptr [ESI + 0xc],0x86
006b699b : POP EBX
006b699c : ADD ESP,0x14
006b699f : RET
006b69a0 : MOVZX EAX,AX
006b69a3 : ADD EAX,EAX
006b69a5 : ADD EAX,EAX
006b69a7 : ADD EAX,EAX
006b69a9 : PUSH EDI
006b69aa : CMP EBX,ECX
006b69ac : JZ 0x006b69b3
006b69ae : MOV EDI,dword ptr [ESI + 0x30]
006b69b1 : JMP 0x006b69b6
006b69b3 : MOV EDI,dword ptr [ESI + 0x38]
006b69b6 : PUSH EBP
006b69b7 : MOV EBP,dword ptr [ESI + 0x34]
006b69ba : ADD EBP,EAX
006b69bc : ADD EDI,EAX
006b69be : MOVZX EAX,word ptr [ESI + 0x120]
006b69c5 : MOV dword ptr [ESP + 0x18],EBP
006b69c9 : CMP AX,word ptr [ESI + 0x50]
006b69cd : JNC 0x006b6a29
006b69cf : CMP EBX,ECX
006b69d1 : MOVZX ECX,AX
006b69d4 : JZ 0x006b69db
006b69d6 : MOV EDX,dword ptr [ESI + 0x54]
006b69d9 : JMP 0x006b69de
006b69db : MOV EDX,dword ptr [ESI + 0x5c]
006b69de : LEA EAX,[EDX + ECX*0x8]
006b69e1 : MOV ECX,dword ptr [EAX + 0x4]
006b69e4 : MOV EDX,dword ptr [EAX]
006b69e6 : SUB ECX,dword ptr [EDI + 0x4]
006b69e9 : SUB EDX,dword ptr [EDI]
006b69eb : MOV EAX,dword ptr [ESI + 0x240]
006b69f1 : PUSH ECX
006b69f2 : PUSH EDX
006b69f3 : PUSH ESI
006b69f4 : CALL EAX
006b69f6 : MOVZX ECX,word ptr [ESI + 0x120]
006b69fd : MOV EDX,dword ptr [ESI + 0x58]
006b6a00 : MOV dword ptr [ESP + 0x18],EAX
006b6a04 : LEA EAX,[EDX + ECX*0x8]
006b6a07 : MOV ECX,dword ptr [EAX + 0x4]
006b6a0a : MOV EDX,dword ptr [EAX]
006b6a0c : SUB ECX,dword ptr [EBP + 0x4]
006b6a0f : SUB EDX,dword ptr [EBP]
006b6a12 : MOV EAX,dword ptr [ESI + 0x23c]
006b6a18 : ADD ESP,0xc
006b6a1b : PUSH ECX
006b6a1c : PUSH EDX
006b6a1d : PUSH ESI
006b6a1e : CALL EAX
006b6a20 : ADD ESP,0xc
006b6a23 : MOV dword ptr [ESP + 0x14],EAX
006b6a27 : JMP 0x006b6a31
006b6a29 : MOV dword ptr [ESP + 0xc],ECX
006b6a2d : MOV dword ptr [ESP + 0x14],ECX
006b6a31 : CMP dword ptr [ESI + 0x130],0x0
006b6a38 : JLE 0x006b6b30
006b6a3e : MOV EDI,EDI
006b6a40 : DEC dword ptr [ESI + 0x1c]
006b6a43 : MOV EAX,dword ptr [ESI + 0x1c]
006b6a46 : MOV ECX,dword ptr [ESI + 0x18]
006b6a49 : MOVZX EDX,word ptr [ESI + 0x74]
006b6a4d : MOV EBP,dword ptr [ECX + EAX*0x4]
006b6a50 : CMP EBP,EDX
006b6a52 : JC 0x006b6a6f
006b6a54 : CMP byte ptr [ESI + 0x231],0x0
006b6a5b : JZ 0x006b6b1d
006b6a61 : POP EBP
006b6a62 : POP EDI
006b6a63 : MOV dword ptr [ESI + 0xc],0x86
006b6a6a : POP EBX
006b6a6b : ADD ESP,0x14
006b6a6e : RET
006b6a6f : TEST EBX,EBX
006b6a71 : JZ 0x006b6a92
006b6a73 : MOV EAX,dword ptr [ESI + 0x78]
006b6a76 : MOV ECX,dword ptr [EAX + EBP*0x8 + 0x4]
006b6a7a : MOV EDX,dword ptr [EAX + EBP*0x8]
006b6a7d : SUB ECX,dword ptr [EDI + 0x4]
006b6a80 : SUB EDX,dword ptr [EDI]
006b6a82 : LEA EAX,[EAX + EBP*0x8]
006b6a85 : MOV EAX,dword ptr [ESI + 0x240]
006b6a8b : PUSH ECX
006b6a8c : PUSH EDX
006b6a8d : PUSH ESI
006b6a8e : CALL EAX
006b6a90 : JMP 0x006b6ab1
006b6a92 : MOV ECX,dword ptr [ESI + 0x80]
006b6a98 : MOV EDX,dword ptr [ECX + EBP*0x8 + 0x4]
006b6a9c : SUB EDX,dword ptr [EDI + 0x4]
006b6a9f : LEA EAX,[ECX + EBP*0x8]
006b6aa2 : MOV EAX,dword ptr [EAX]
006b6aa4 : SUB EAX,dword ptr [EDI]
006b6aa6 : MOV ECX,dword ptr [ESI + 0x240]
006b6aac : PUSH EDX
006b6aad : PUSH EAX
006b6aae : PUSH ESI
006b6aaf : CALL ECX
006b6ab1 : MOV EDX,dword ptr [ESI + 0x7c]
006b6ab4 : MOV ECX,dword ptr [ESP + 0x24]
006b6ab8 : MOV EBX,EAX
006b6aba : LEA EAX,[EDX + EBP*0x8]
006b6abd : MOV EDX,dword ptr [EAX + 0x4]
006b6ac0 : SUB EDX,dword ptr [ECX + 0x4]
006b6ac3 : MOV EAX,dword ptr [EAX]
006b6ac5 : SUB EAX,dword ptr [ECX]
006b6ac7 : MOV ECX,dword ptr [ESI + 0x23c]
006b6acd : ADD ESP,0xc
006b6ad0 : PUSH EDX
006b6ad1 : PUSH EAX
006b6ad2 : PUSH ESI
006b6ad3 : CALL ECX
006b6ad5 : ADD ESP,0xc
006b6ad8 : MOV ECX,EAX
006b6ada : MOV dword ptr [ESP + 0x1c],ECX
006b6ade : TEST EBX,EBX
006b6ae0 : JZ 0x006b6b03
006b6ae2 : MOV EAX,dword ptr [ESP + 0xc]
006b6ae6 : TEST EAX,EAX
006b6ae8 : JZ 0x006b6aff
006b6aea : MOV EDX,dword ptr [ESP + 0x14]
006b6aee : PUSH EAX
006b6aef : PUSH EDX
006b6af0 : PUSH EBX
006b6af1 : CALL 0x00685d60
006b6af6 : MOV ECX,dword ptr [ESP + 0x28]
006b6afa : ADD ESP,0xc
006b6afd : JMP 0x006b6b05
006b6aff : MOV EAX,ECX
006b6b01 : JMP 0x006b6b05
006b6b03 : XOR EAX,EAX
006b6b05 : SUB EAX,ECX
006b6b07 : MOV ECX,dword ptr [ESI + 0x248]
006b6b0d : PUSH EAX
006b6b0e : PUSH EBP
006b6b0f : LEA EAX,[ESI + 0x6c]
006b6b12 : PUSH EAX
006b6b13 : PUSH ESI
006b6b14 : CALL ECX
006b6b16 : MOV EBX,dword ptr [ESP + 0x20]
006b6b1a : ADD ESP,0x10
006b6b1d : DEC dword ptr [ESI + 0x130]
006b6b23 : CMP dword ptr [ESI + 0x130],0x0
006b6b2a : JG 0x006b6a40
006b6b30 : MOV EDX,dword ptr [ESI + 0x1c]
006b6b33 : POP EBP
006b6b34 : MOV dword ptr [ESI + 0x130],0x1
006b6b3e : MOV dword ptr [ESI + 0x20],EDX
006b6b41 : POP EDI
006b6b42 : POP EBX
006b6b43 : ADD ESP,0x14
006b6b46 : RET
