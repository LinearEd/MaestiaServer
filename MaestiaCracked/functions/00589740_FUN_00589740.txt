PROGRAM  : Maestia.exe
FUNCTION : FUN_00589740
ENTRY    : 00589740
BODY     : [[00589740, 00589a14]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00589740(int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  bool bVar7;
  undefined1 *puVar8;
  uint *puVar9;
  int local_84;
  uint local_80;
  uint local_7c;
  undefined4 local_78;
  int iStack_74;
  undefined4 local_70;
  uint uStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  uint local_60;
  undefined4 local_5c;
  undefined4 uStack_54;
  uint local_50;
  undefined4 local_4c;
  int local_40;
  uint *puStack_3c;
  undefined4 uStack_38;
  uint *puStack_34;
  int iStack_30;
  int iStack_2c;
  int iStack_28;
  undefined4 uStack_24;
  undefined1 auStack_20 [16];
  undefined1 local_10 [16];
  
  uVar4 = *(undefined4 *)(param_1 + 0x18);
  local_84 = 0;
  local_80 = 0;
  local_7c = 0;
  local_60 = 0;
  local_5c = 0;
  local_50 = 0;
  local_4c = 0;
  local_10[0] = 0;
  local_78 = uVar4;
  FUN_00527270(*(undefined4 *)(param_1 + 8));
  bVar7 = *(int *)(param_1 + 8) == 0;
  if (bVar7) {
    local_70 = CONCAT31(local_70._1_3_,1);
    puVar2 = &local_70;
  }
  else {
    puVar2 = (undefined4 *)local_10;
  }
  puVar9 = &local_60;
  uVar3 = uVar4;
  FUN_005296a0(uVar4,puVar2,puVar9);
  FUN_00588cb0(uVar3,puVar2,puVar9);
  if (bVar7) {
    FUN_00526bc0();
  }
  FUN_005896e0(&local_60);
  iStack_74 = 0;
  uVar5 = local_80;
  uVar6 = local_80;
  if (0 < *(int *)(param_1 + 0x1c)) {
    do {
      puVar2 = &local_70;
      local_70 = 0;
      uStack_6c = 0;
      uVar3 = FUN_00526260(iStack_74);
      FUN_005296a0(uVar4,uVar3,puVar2);
      FUN_00588cb0(uVar4,uVar3,puVar2);
      uVar6 = uVar5 + 1;
      if (uVar6 < uVar5) {
        FUN_0067fa30(uVar6 * 0x10 + local_84,uVar5 - uVar6);
        uVar5 = uVar6;
        if (uVar6 < local_7c >> 1) {
LAB_00589860:
          FUN_00589540(&local_84,uVar5);
        }
      }
      else if (local_7c <= uVar6) {
        uVar5 = (uVar6 >> 2) + uVar6;
        goto LAB_00589860;
      }
      uVar4 = uStack_68;
      uVar5 = uStack_6c;
      puVar2 = (undefined4 *)(uVar6 * 0x10 + -0x10 + local_84);
      local_80 = uVar6;
      if (puVar2 != (undefined4 *)0x0) {
        *puVar2 = 0;
        puVar2[1] = uStack_6c;
        puVar2[2] = uStack_68;
        puVar2[3] = uStack_64;
        if ((uStack_6c >> 6 & 1) != 0) {
          *puVar2 = local_70;
          FUN_00588a50(puVar2,uStack_68);
        }
      }
      if ((uVar5 >> 6 & 1) != 0) {
        FUN_00588b40(&local_70,uVar4);
        local_70 = 0;
      }
      iStack_74 = iStack_74 + 1;
      uVar4 = local_78;
      uVar5 = uVar6;
    } while (iStack_74 < *(int *)(param_1 + 0x1c));
  }
  auStack_20[0] = 0;
  FUN_00527270(*(undefined4 *)(param_1 + 8));
  puVar9 = &local_60;
  puVar8 = auStack_20;
  FUN_005296a0(uVar4,puVar8,puVar9);
  FUN_00588cb0(uVar4,puVar8,puVar9);
  uStack_38 = FUN_005296a0();
  iVar1 = local_84;
  puStack_3c = &local_50;
  puStack_34 = &local_60;
  if (*(int *)(param_1 + 0x1c) < 1) {
    iStack_2c = 0;
  }
  else {
    iStack_2c = local_84 + 0x10;
  }
  iStack_28 = uVar6 - 1;
  uStack_24 = *(undefined4 *)(local_40 + 0x34);
  iStack_30 = local_84;
  (**(code **)(**(int **)(local_40 + 0x30) + 4))(&puStack_3c);
  if ((local_50 & 0x8f) != 0) {
    uVar4 = *(undefined4 *)(param_1 + 4);
    puVar2 = &uStack_54;
    FUN_005296a0(puVar2,uVar4);
    FUN_00588880(puVar2,uVar4);
  }
  FUN_00526bc0();
  FUN_00526bc0();
  if ((local_50 >> 6 & 1) != 0) {
    FUN_00588b40(&uStack_54,local_4c);
    uStack_54 = 0;
  }
  if ((local_60 >> 6 & 1) != 0) {
    FUN_00588b40(&uStack_64,local_5c);
    uStack_64 = 0;
  }
  FUN_0067fa30(iVar1,uVar6);
  FUN_00515cf0(iVar1);
  return;
}



============================================================
DISASSEMBLY
============================================================
00589740 : SUB ESP,0x84
00589746 : PUSH EBX
00589747 : PUSH EBP
00589748 : MOV EBP,dword ptr [ESP + 0x90]
0058974f : MOV EAX,dword ptr [EBP + 0x8]
00589752 : PUSH ESI
00589753 : MOV ESI,dword ptr [EBP + 0x18]
00589756 : PUSH EDI
00589757 : XOR EDI,EDI
00589759 : XOR EBX,EBX
0058975b : MOV dword ptr [ESP + 0x54],ECX
0058975f : MOV dword ptr [ESP + 0x1c],EBX
00589763 : PUSH EAX
00589764 : LEA ECX,[ESP + 0x88]
0058976b : MOV dword ptr [ESP + 0x20],ESI
0058976f : MOV dword ptr [ESP + 0x14],EDI
00589773 : MOV dword ptr [ESP + 0x18],EDI
00589777 : MOV dword ptr [ESP + 0x1c],EDI
0058977b : MOV dword ptr [ESP + 0x38],EDI
0058977f : MOV dword ptr [ESP + 0x3c],EDI
00589783 : MOV dword ptr [ESP + 0x48],EDI
00589787 : MOV dword ptr [ESP + 0x4c],EDI
0058978b : MOV byte ptr [ESP + 0x88],BL
00589792 : CALL 0x00527270
00589797 : CMP dword ptr [EBP + 0x8],EDI
0058979a : JZ 0x005897a5
0058979c : LEA EAX,[ESP + 0x84]
005897a3 : JMP 0x005897b2
005897a5 : MOV EBX,0x1
005897aa : MOV byte ptr [ESP + 0x24],BL
005897ae : LEA EAX,[ESP + 0x24]
005897b2 : LEA ECX,[ESP + 0x34]
005897b6 : PUSH ECX
005897b7 : PUSH EAX
005897b8 : PUSH ESI
005897b9 : MOV ECX,ESI
005897bb : CALL 0x005296a0
005897c0 : MOV ECX,EAX
005897c2 : CALL 0x00588cb0
005897c7 : TEST BL,0x1
005897ca : JZ 0x005897d5
005897cc : LEA ECX,[ESP + 0x24]
005897d0 : CALL 0x00526bc0
005897d5 : LEA EDX,[ESP + 0x34]
005897d9 : PUSH EDX
005897da : LEA ECX,[ESP + 0x14]
005897de : CALL 0x005896e0
005897e3 : CMP dword ptr [EBP + 0x1c],EDI
005897e6 : MOV dword ptr [ESP + 0x20],EDI
005897ea : MOV EDI,dword ptr [ESP + 0x14]
005897ee : JLE 0x005898f1
005897f4 : MOV ECX,dword ptr [ESP + 0x20]
005897f8 : LEA EAX,[ESP + 0x24]
005897fc : PUSH EAX
005897fd : XOR EBX,EBX
005897ff : PUSH ECX
00589800 : MOV ECX,EBP
00589802 : MOV dword ptr [ESP + 0x2c],EBX
00589806 : MOV dword ptr [ESP + 0x30],EBX
0058980a : CALL 0x00526260
0058980f : PUSH EAX
00589810 : PUSH ESI
00589811 : MOV ECX,ESI
00589813 : CALL 0x005296a0
00589818 : MOV ECX,EAX
0058981a : CALL 0x00588cb0
0058981f : LEA ESI,[EDI + 0x1]
00589822 : CMP ESI,EDI
00589824 : JNC 0x0058984d
00589826 : MOV EDX,ESI
00589828 : SHL EDX,0x4
0058982b : ADD EDX,dword ptr [ESP + 0x10]
0058982f : SUB EDI,ESI
00589831 : PUSH EDI
00589832 : PUSH EDX
00589833 : CALL 0x0067fa30
00589838 : MOV EAX,dword ptr [ESP + 0x20]
0058983c : SHR EAX,0x1
0058983e : ADD ESP,0x8
00589841 : CMP ESI,EAX
00589843 : JNC 0x00589869
00589845 : PUSH ESI
00589846 : LEA ECX,[ESP + 0x14]
0058984a : PUSH ECX
0058984b : JMP 0x00589860
0058984d : CMP ESI,dword ptr [ESP + 0x18]
00589851 : JC 0x00589869
00589853 : MOV EDX,ESI
00589855 : SHR EDX,0x2
00589858 : ADD EDX,ESI
0058985a : PUSH EDX
0058985b : LEA EAX,[ESP + 0x14]
0058985f : PUSH EAX
00589860 : LEA ECX,[ESP + 0x18]
00589864 : CALL 0x00589540
00589869 : MOV ECX,dword ptr [ESP + 0x10]
0058986d : MOV EBP,dword ptr [ESP + 0x24]
00589871 : MOV EDI,ESI
00589873 : SHL ESI,0x4
00589876 : LEA EAX,[ESI + ECX*0x1 + -0x10]
0058987a : MOV ESI,dword ptr [ESP + 0x28]
0058987e : CMP EAX,EBX
00589880 : MOV EBX,dword ptr [ESP + 0x2c]
00589884 : MOV dword ptr [ESP + 0x14],EDI
00589888 : JZ 0x005898b4
0058988a : MOV EDX,dword ptr [ESP + 0x30]
0058988e : MOV ECX,ESI
00589890 : SHR ECX,0x6
00589893 : MOV dword ptr [EAX],0x0
00589899 : MOV dword ptr [EAX + 0x4],ESI
0058989c : MOV dword ptr [EAX + 0x8],EBX
0058989f : MOV dword ptr [EAX + 0xc],EDX
005898a2 : TEST CL,0x1
005898a5 : JZ 0x005898b4
005898a7 : MOV EDX,EBX
005898a9 : PUSH EDX
005898aa : PUSH EAX
005898ab : MOV ECX,EBP
005898ad : MOV dword ptr [EAX],EBP
005898af : CALL 0x00588a50
005898b4 : MOV EAX,ESI
005898b6 : SHR EAX,0x6
005898b9 : TEST AL,0x1
005898bb : JZ 0x005898d2
005898bd : PUSH EBX
005898be : LEA ECX,[ESP + 0x28]
005898c2 : PUSH ECX
005898c3 : MOV ECX,EBP
005898c5 : CALL 0x00588b40
005898ca : MOV dword ptr [ESP + 0x24],0x0
005898d2 : MOV EAX,dword ptr [ESP + 0x20]
005898d6 : MOV EDX,dword ptr [ESP + 0x98]
005898dd : MOV ESI,dword ptr [ESP + 0x1c]
005898e1 : INC EAX
005898e2 : CMP EAX,dword ptr [EDX + 0x1c]
005898e5 : MOV dword ptr [ESP + 0x20],EAX
005898e9 : MOV EBP,EDX
005898eb : JL 0x005897f4
005898f1 : MOV EAX,dword ptr [EBP + 0x8]
005898f4 : PUSH EAX
005898f5 : LEA ECX,[ESP + 0x78]
005898f9 : MOV byte ptr [ESP + 0x78],0x0
005898fe : CALL 0x00527270
00589903 : LEA ECX,[ESP + 0x34]
00589907 : PUSH ECX
00589908 : LEA EDX,[ESP + 0x78]
0058990c : PUSH EDX
0058990d : PUSH ESI
0058990e : MOV ECX,ESI
00589910 : CALL 0x005296a0
00589915 : MOV ECX,EAX
00589917 : CALL 0x00588cb0
0058991c : MOV ECX,ESI
0058991e : CALL 0x005296a0
00589923 : CMP dword ptr [EBP + 0x1c],0x0
00589927 : MOV EBX,dword ptr [ESP + 0x10]
0058992b : MOV dword ptr [ESP + 0x5c],EAX
0058992f : LEA EAX,[ESP + 0x44]
00589933 : LEA ECX,[ESP + 0x34]
00589937 : MOV dword ptr [ESP + 0x58],EAX
0058993b : MOV dword ptr [ESP + 0x60],ECX
0058993f : JLE 0x0058994a
00589941 : LEA EDX,[EBX + 0x10]
00589944 : MOV dword ptr [ESP + 0x68],EDX
00589948 : JMP 0x00589952
0058994a : MOV dword ptr [ESP + 0x68],0x0
00589952 : LEA EAX,[EDI + -0x1]
00589955 : MOV dword ptr [ESP + 0x6c],EAX
00589959 : MOV EAX,dword ptr [ESP + 0x54]
0058995d : MOV ECX,dword ptr [EAX + 0x34]
00589960 : MOV dword ptr [ESP + 0x70],ECX
00589964 : MOV ECX,dword ptr [EAX + 0x30]
00589967 : MOV dword ptr [ESP + 0x64],EBX
0058996b : MOV EDX,dword ptr [ECX]
0058996d : MOV EDX,dword ptr [EDX + 0x4]
00589970 : LEA EAX,[ESP + 0x58]
00589974 : PUSH EAX
00589975 : CALL EDX
00589977 : TEST byte ptr [ESP + 0x48],0x8f
0058997c : JZ 0x00589995
0058997e : MOV EAX,dword ptr [EBP + 0x4]
00589981 : PUSH EAX
00589982 : LEA ECX,[ESP + 0x48]
00589986 : PUSH ECX
00589987 : MOV ECX,ESI
00589989 : CALL 0x005296a0
0058998e : MOV ECX,EAX
00589990 : CALL 0x00588880
00589995 : LEA ECX,[ESP + 0x74]
00589999 : CALL 0x00526bc0
0058999e : LEA ECX,[ESP + 0x84]
005899a5 : CALL 0x00526bc0
005899aa : MOV EDX,dword ptr [ESP + 0x48]
005899ae : SHR EDX,0x6
005899b1 : TEST DL,0x1
005899b4 : JZ 0x005899d1
005899b6 : MOV EAX,dword ptr [ESP + 0x4c]
005899ba : PUSH EAX
005899bb : LEA ECX,[ESP + 0x48]
005899bf : PUSH ECX
005899c0 : MOV ECX,dword ptr [ESP + 0x4c]
005899c4 : CALL 0x00588b40
005899c9 : MOV dword ptr [ESP + 0x44],0x0
005899d1 : MOV EDX,dword ptr [ESP + 0x38]
005899d5 : SHR EDX,0x6
005899d8 : TEST DL,0x1
005899db : JZ 0x005899f8
005899dd : MOV EAX,dword ptr [ESP + 0x3c]
005899e1 : PUSH EAX
005899e2 : LEA ECX,[ESP + 0x38]
005899e6 : PUSH ECX
005899e7 : MOV ECX,dword ptr [ESP + 0x3c]
005899eb : CALL 0x00588b40
005899f0 : MOV dword ptr [ESP + 0x34],0x0
005899f8 : PUSH EDI
005899f9 : PUSH EBX
005899fa : CALL 0x0067fa30
005899ff : ADD ESP,0x8
00589a02 : PUSH EBX
00589a03 : CALL 0x00515cf0
00589a08 : POP EDI
00589a09 : POP ESI
00589a0a : POP EBP
00589a0b : POP EBX
00589a0c : ADD ESP,0x84
00589a12 : RET 0x4
