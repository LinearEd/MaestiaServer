PROGRAM  : Maestia.exe
FUNCTION : FUN_0072d7f0
ENTRY    : 0072d7f0
BODY     : [[0072d7f0, 0072da3a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0072d7f0(void)

{
  int iVar1;
  HDC hdc;
  undefined4 ***pppuVar2;
  int in_ECX;
  int *in_EDX;
  undefined1 local_30 [4];
  undefined4 **local_2c [4];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b27007;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_EDX == (int *)0x0) {
    FUN_008018d0(L"CPlaneScene [Init] d3ddev is NULL",local_14);
  }
  else {
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0xe4))();
    (**(code **)(*in_EDX + 0x114))();
    (**(code **)(*in_EDX + 0x114))();
    (**(code **)(*in_EDX + 0x114))();
    (**(code **)(*in_EDX + 0x114))();
    (**(code **)(*in_EDX + 0x114))();
    *(undefined4 *)(in_ECX + 100) = 0;
    iVar1 = (**(code **)(*in_EDX + 0x68))();
    if (iVar1 < 0) {
      FUN_008018d0(L"AvaMoviePlayer[PlaneScen] Not CreateVertexBuffer");
    }
    else {
      hdc = GetDC((HWND)0x0);
      GetDeviceCaps(hdc,0x5a);
      ReleaseDC((HWND)0x0,hdc);
      *(undefined2 *)(in_ECX + 0x68) = 0;
      *(undefined4 *)(in_ECX + 0x6c) = 0;
      FUN_0072d1d0(in_EDX);
      FUN_004c5310(DAT_017251d4,local_30);
      local_8 = 0;
      pppuVar2 = (undefined4 ***)local_2c[0];
      if (local_18 < 8) {
        pppuVar2 = local_2c;
      }
      iVar1 = FUN_00405b70(pppuVar2);
      if ((iVar1 == 0) && (local_1c == 0)) {
        FUN_00405c00(local_30);
      }
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      iVar1 = D3DXCreateFontW(in_EDX,*(undefined4 *)(in_ECX + 0x78),0,700,1,0,1,8,2,0,local_2c[0],
                              in_ECX + 0x74);
      if (iVar1 < 0) {
        FUN_008018d0(L"AvaMoviePlayer[PlaneScen] Not CreateFont");
      }
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0072d7f0 : PUSH EBP
0072d7f1 : MOV EBP,ESP
0072d7f3 : PUSH -0x1
0072d7f5 : PUSH 0xb27007
0072d7fa : MOV EAX,FS:[0x0]
0072d800 : PUSH EAX
0072d801 : SUB ESP,0x24
0072d804 : MOV EAX,[0x00d66fa0]
0072d809 : XOR EAX,EBP
0072d80b : MOV dword ptr [EBP + -0x10],EAX
0072d80e : PUSH EBX
0072d80f : PUSH ESI
0072d810 : PUSH EDI
0072d811 : PUSH EAX
0072d812 : LEA EAX,[EBP + -0xc]
0072d815 : MOV FS:[0x0],EAX
0072d81b : MOV ESI,EDX
0072d81d : MOV EDI,ECX
0072d81f : TEST ESI,ESI
0072d821 : JNZ 0x0072d840
0072d823 : MOV ESI,dword ptr [0x00da98e8]
0072d829 : PUSH 0xc02b68
0072d82e : CALL 0x008018d0
0072d833 : ADD ESP,0x4
0072d836 : MOV EAX,0x80004003
0072d83b : JMP 0x0072da1f
0072d840 : MOV EAX,dword ptr [ESI]
0072d842 : MOV ECX,dword ptr [EAX + 0xe4]
0072d848 : PUSH 0x1
0072d84a : PUSH 0x16
0072d84c : PUSH ESI
0072d84d : CALL ECX
0072d84f : MOV EDX,dword ptr [ESI]
0072d851 : MOV EAX,dword ptr [EDX + 0xe4]
0072d857 : PUSH 0x0
0072d859 : PUSH 0x89
0072d85e : PUSH ESI
0072d85f : CALL EAX
0072d861 : MOV ECX,dword ptr [ESI]
0072d863 : MOV EDX,dword ptr [ECX + 0xe4]
0072d869 : PUSH 0x1
0072d86b : PUSH 0x1b
0072d86d : PUSH ESI
0072d86e : CALL EDX
0072d870 : MOV EAX,dword ptr [ESI]
0072d872 : MOV ECX,dword ptr [EAX + 0xe4]
0072d878 : PUSH 0x5
0072d87a : PUSH 0x13
0072d87c : PUSH ESI
0072d87d : CALL ECX
0072d87f : MOV EDX,dword ptr [ESI]
0072d881 : MOV EAX,dword ptr [EDX + 0xe4]
0072d887 : PUSH 0x6
0072d889 : PUSH 0x14
0072d88b : PUSH ESI
0072d88c : CALL EAX
0072d88e : MOV ECX,dword ptr [ESI]
0072d890 : MOV EDX,dword ptr [ECX + 0xe4]
0072d896 : PUSH 0x1
0072d898 : PUSH 0xf
0072d89a : PUSH ESI
0072d89b : CALL EDX
0072d89d : MOV EAX,dword ptr [ESI]
0072d89f : MOV ECX,dword ptr [EAX + 0xe4]
0072d8a5 : PUSH 0x10
0072d8a7 : PUSH 0x18
0072d8a9 : PUSH ESI
0072d8aa : CALL ECX
0072d8ac : MOV EDX,dword ptr [ESI]
0072d8ae : MOV EAX,dword ptr [EDX + 0xe4]
0072d8b4 : PUSH 0x5
0072d8b6 : PUSH 0x19
0072d8b8 : PUSH ESI
0072d8b9 : CALL EAX
0072d8bb : MOV ECX,dword ptr [ESI]
0072d8bd : MOV EDX,dword ptr [ECX + 0x114]
0072d8c3 : PUSH 0x3
0072d8c5 : PUSH 0x1
0072d8c7 : PUSH 0x0
0072d8c9 : PUSH ESI
0072d8ca : CALL EDX
0072d8cc : MOV EAX,dword ptr [ESI]
0072d8ce : MOV ECX,dword ptr [EAX + 0x114]
0072d8d4 : PUSH 0x3
0072d8d6 : PUSH 0x2
0072d8d8 : PUSH 0x0
0072d8da : PUSH ESI
0072d8db : CALL ECX
0072d8dd : MOV EDX,dword ptr [ESI]
0072d8df : MOV EAX,dword ptr [EDX + 0x114]
0072d8e5 : PUSH 0x2
0072d8e7 : PUSH 0x5
0072d8e9 : PUSH 0x0
0072d8eb : PUSH ESI
0072d8ec : CALL EAX
0072d8ee : MOV ECX,dword ptr [ESI]
0072d8f0 : MOV EDX,dword ptr [ECX + 0x114]
0072d8f6 : PUSH 0x2
0072d8f8 : PUSH 0x6
0072d8fa : PUSH 0x0
0072d8fc : PUSH ESI
0072d8fd : CALL EDX
0072d8ff : MOV EAX,dword ptr [ESI]
0072d901 : PUSH 0x2
0072d903 : PUSH 0x7
0072d905 : PUSH 0x0
0072d907 : PUSH ESI
0072d908 : MOV ECX,dword ptr [EAX + 0x114]
0072d90e : CALL ECX
0072d910 : PUSH 0x0
0072d912 : LEA EAX,[EDI + 0x64]
0072d915 : PUSH EAX
0072d916 : PUSH 0x0
0072d918 : PUSH 0x142
0072d91d : PUSH 0x208
0072d922 : MOV dword ptr [EAX],0x0
0072d928 : MOV EDX,dword ptr [ESI]
0072d92a : MOV EAX,dword ptr [EDX + 0x68]
0072d92d : PUSH 0x60
0072d92f : PUSH ESI
0072d930 : CALL EAX
0072d932 : MOV EBX,EAX
0072d934 : TEST EBX,EBX
0072d936 : JGE 0x0072d952
0072d938 : MOV ESI,dword ptr [0x00da98e8]
0072d93e : PUSH 0xc02bb0
0072d943 : CALL 0x008018d0
0072d948 : ADD ESP,0x4
0072d94b : MOV EAX,EBX
0072d94d : JMP 0x0072da1f
0072d952 : PUSH 0x0
0072d954 : CALL dword ptr [0x00b85500]
0072d95a : MOV EBX,EAX
0072d95c : PUSH 0x5a
0072d95e : PUSH EBX
0072d95f : CALL dword ptr [0x00b8507c]
0072d965 : PUSH EBX
0072d966 : XOR EBX,EBX
0072d968 : PUSH EBX
0072d969 : CALL dword ptr [0x00b85428]
0072d96f : XOR ECX,ECX
0072d971 : PUSH ESI
0072d972 : MOV word ptr [EDI + 0x68],CX
0072d976 : MOV dword ptr [EDI + 0x6c],EBX
0072d979 : CALL 0x0072d1d0
0072d97e : MOV EAX,[0x017251d4]
0072d983 : LEA EDX,[EBP + -0x2c]
0072d986 : PUSH EDX
0072d987 : PUSH EAX
0072d988 : CALL 0x004c5310
0072d98d : MOV dword ptr [EBP + -0x4],EBX
0072d990 : CMP dword ptr [EBP + -0x14],0x8
0072d994 : MOV EAX,dword ptr [EBP + -0x28]
0072d997 : JNC 0x0072d99c
0072d999 : LEA EAX,[EBP + -0x28]
0072d99c : PUSH EAX
0072d99d : XOR EDX,EDX
0072d99f : MOV ECX,0xc02bac
0072d9a4 : CALL 0x00405b70
0072d9a9 : ADD ESP,0x4
0072d9ac : CMP EAX,EBX
0072d9ae : JNZ 0x0072d9ca
0072d9b0 : XOR EAX,EAX
0072d9b2 : CMP dword ptr [EBP + -0x18],EBX
0072d9b5 : SETNZ AL
0072d9b8 : CMP EAX,EBX
0072d9ba : JNZ 0x0072d9ca
0072d9bc : LEA ECX,[EBP + -0x2c]
0072d9bf : PUSH ECX
0072d9c0 : MOV EDX,0xc02c14
0072d9c5 : CALL 0x00405c00
0072d9ca : CMP dword ptr [EBP + -0x14],0x8
0072d9ce : MOV ECX,dword ptr [EDI + 0x78]
0072d9d1 : MOV EAX,dword ptr [EBP + -0x28]
0072d9d4 : JNC 0x0072d9d9
0072d9d6 : LEA EAX,[EBP + -0x28]
0072d9d9 : ADD EDI,0x74
0072d9dc : PUSH EDI
0072d9dd : PUSH EAX
0072d9de : PUSH EBX
0072d9df : PUSH 0x2
0072d9e1 : PUSH 0x8
0072d9e3 : PUSH 0x1
0072d9e5 : PUSH EBX
0072d9e6 : PUSH 0x1
0072d9e8 : PUSH 0x2bc
0072d9ed : PUSH EBX
0072d9ee : PUSH ECX
0072d9ef : PUSH ESI
0072d9f0 : CALL 0x00664cea
0072d9f5 : MOV EDI,EAX
0072d9f7 : CMP EDI,EBX
0072d9f9 : JGE 0x0072da0e
0072d9fb : MOV ESI,dword ptr [0x00da98e8]
0072da01 : PUSH 0xc02c20
0072da06 : CALL 0x008018d0
0072da0b : ADD ESP,0x4
0072da0e : MOV dword ptr [EBP + -0x4],0xffffffff
0072da15 : LEA ECX,[EBP + -0x2c]
0072da18 : CALL 0x00406560
0072da1d : MOV EAX,EDI
0072da1f : MOV ECX,dword ptr [EBP + -0xc]
0072da22 : MOV dword ptr FS:[0x0],ECX
0072da29 : POP ECX
0072da2a : POP EDI
0072da2b : POP ESI
0072da2c : POP EBX
0072da2d : MOV ECX,dword ptr [EBP + -0x10]
0072da30 : XOR ECX,EBP
0072da32 : CALL 0x00633e6b
0072da37 : MOV ESP,EBP
0072da39 : POP EBP
0072da3a : RET
