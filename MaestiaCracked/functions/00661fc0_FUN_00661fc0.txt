PROGRAM  : Maestia.exe
FUNCTION : FUN_00661fc0
ENTRY    : 00661fc0
BODY     : [[00661fc0, 00662091]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00661fc0(int *param_1,int param_2)

{
  int iVar1;
  int in_ECX;
  uint uVar2;
  int *local_8;
  int local_4;
  
  uVar2 = 0;
  local_8 = (int *)0x0;
  if ((param_2 != 0) && (iVar1 = FUN_00664420(), iVar1 == 0)) {
    iVar1 = FUN_00661e00(param_1,param_2);
    return iVar1;
  }
  local_4 = -0x7ffbfdf9;
  do {
    if (uVar2 == *(byte *)(in_ECX + 0x26)) {
      iVar1 = (**(code **)(*param_1 + 0x30))(param_1,&local_8);
    }
    else {
      iVar1 = (**(code **)(*(int *)(in_ECX + 0xc) + 0x30))(in_ECX + 0xc,&local_8);
    }
    if (-1 < iVar1) {
      iVar1 = FUN_00661ec0(param_1,param_2,local_8);
      (**(code **)(*local_8 + 8))(local_8);
      if (-1 < iVar1) {
        return 0;
      }
      if (((iVar1 != -0x7fffbffb) && (iVar1 != -0x7ff8ffa9)) && (iVar1 != -0x7ffbfdd6)) {
        local_4 = iVar1;
      }
    }
    uVar2 = uVar2 + 1;
  } while ((int)uVar2 < 2);
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
00661fc0 : SUB ESP,0x8
00661fc3 : PUSH EBP
00661fc4 : PUSH ESI
00661fc5 : MOV ESI,dword ptr [ESP + 0x18]
00661fc9 : XOR EBP,EBP
00661fcb : PUSH EDI
00661fcc : MOV EDI,ECX
00661fce : MOV dword ptr [ESP + 0xc],EBP
00661fd2 : CMP ESI,EBP
00661fd4 : JZ 0x00661ff7
00661fd6 : MOV ECX,ESI
00661fd8 : CALL 0x00664420
00661fdd : TEST EAX,EAX
00661fdf : JNZ 0x00661ff7
00661fe1 : MOV EAX,dword ptr [ESP + 0x18]
00661fe5 : PUSH ESI
00661fe6 : PUSH EAX
00661fe7 : MOV ECX,EDI
00661fe9 : CALL 0x00661e00
00661fee : POP EDI
00661fef : POP ESI
00661ff0 : POP EBP
00661ff1 : ADD ESP,0x8
00661ff4 : RET 0x8
00661ff7 : PUSH EBX
00661ff8 : MOV EBX,dword ptr [ESP + 0x1c]
00661ffc : MOV dword ptr [ESP + 0x14],0x80040207
00662004 : JMP 0x0066200a
00662006 : MOV ESI,dword ptr [ESP + 0x20]
0066200a : MOVZX ECX,byte ptr [EDI + 0x26]
0066200e : CMP EBP,ECX
00662010 : JNZ 0x00662021
00662012 : MOV EDX,dword ptr [EBX]
00662014 : MOV ECX,dword ptr [EDX + 0x30]
00662017 : LEA EAX,[ESP + 0x10]
0066201b : PUSH EAX
0066201c : PUSH EBX
0066201d : CALL ECX
0066201f : JMP 0x00662032
00662021 : MOV EDX,dword ptr [EDI + 0xc]
00662024 : MOV EDX,dword ptr [EDX + 0x30]
00662027 : LEA EAX,[EDI + 0xc]
0066202a : LEA ECX,[ESP + 0x10]
0066202e : PUSH ECX
0066202f : PUSH EAX
00662030 : CALL EDX
00662032 : TEST EAX,EAX
00662034 : JL 0x00662072
00662036 : MOV EAX,dword ptr [ESP + 0x10]
0066203a : PUSH EAX
0066203b : PUSH ESI
0066203c : PUSH EBX
0066203d : MOV ECX,EDI
0066203f : CALL 0x00661ec0
00662044 : MOV ESI,EAX
00662046 : MOV EAX,dword ptr [ESP + 0x10]
0066204a : MOV ECX,dword ptr [EAX]
0066204c : MOV EDX,dword ptr [ECX + 0x8]
0066204f : PUSH EAX
00662050 : CALL EDX
00662052 : TEST ESI,ESI
00662054 : JGE 0x00662086
00662056 : CMP ESI,0x80004005
0066205c : JZ 0x00662072
0066205e : CMP ESI,0x80070057
00662064 : JZ 0x00662072
00662066 : CMP ESI,0x8004022a
0066206c : JZ 0x00662072
0066206e : MOV dword ptr [ESP + 0x14],ESI
00662072 : INC EBP
00662073 : CMP EBP,0x2
00662076 : JL 0x00662006
00662078 : MOV EAX,dword ptr [ESP + 0x14]
0066207c : POP EBX
0066207d : POP EDI
0066207e : POP ESI
0066207f : POP EBP
00662080 : ADD ESP,0x8
00662083 : RET 0x8
00662086 : POP EBX
00662087 : POP EDI
00662088 : POP ESI
00662089 : XOR EAX,EAX
0066208b : POP EBP
0066208c : ADD ESP,0x8
0066208f : RET 0x8
