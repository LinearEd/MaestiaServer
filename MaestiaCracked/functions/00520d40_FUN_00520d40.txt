PROGRAM  : Maestia.exe
FUNCTION : FUN_00520d40
ENTRY    : 00520d40
BODY     : [[00520d40, 00520dec]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00520d40(int *param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int in_ECX;
  
  piVar2 = param_1;
  if (*(int *)(*param_1 + 0x10) != 0) {
    *(uint *)(in_ECX + 0x8c) = *(uint *)(in_ECX + 0x8c) & 0xffffbfff;
  }
  if (*(int *)(in_ECX + 0x80) != 0) {
    FUN_00520c70(param_1,*(undefined4 *)(in_ECX + 0x20));
    return;
  }
  param_1 = (int *)0x143;
  iVar3 = FUN_00515d60(in_ECX,0x14,&param_1);
  if (iVar3 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = FUN_00520b80(piVar2,*(undefined4 *)(in_ECX + 0x20),in_ECX);
  }
  piVar2 = *(int **)(in_ECX + 0x80);
  if ((piVar2 != (int *)0x0) && (*piVar2 = *piVar2 + -1, *piVar2 < 1)) {
    piVar1 = (int *)(piVar2[4] + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    piVar1 = (int *)(piVar2[3] + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    piVar1 = (int *)(piVar2[2] + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    FUN_00515cf0(piVar2);
  }
  *(undefined4 *)(in_ECX + 0x80) = uVar4;
  return;
}



============================================================
DISASSEMBLY
============================================================
00520d40 : PUSH ESI
00520d41 : MOV ESI,dword ptr [ESP + 0x8]
00520d45 : MOV EAX,dword ptr [ESI]
00520d47 : CMP dword ptr [EAX + 0x10],0x0
00520d4b : PUSH EDI
00520d4c : MOV EDI,ECX
00520d4e : JZ 0x00520d5a
00520d50 : AND dword ptr [EDI + 0x8c],0xffffbfff
00520d5a : MOV ECX,dword ptr [EDI + 0x80]
00520d60 : TEST ECX,ECX
00520d62 : JZ 0x00520d73
00520d64 : MOV EDX,dword ptr [EDI + 0x20]
00520d67 : PUSH EDX
00520d68 : PUSH ESI
00520d69 : CALL 0x00520c70
00520d6e : POP EDI
00520d6f : POP ESI
00520d70 : RET 0x4
00520d73 : PUSH EBP
00520d74 : LEA EAX,[ESP + 0x10]
00520d78 : PUSH EAX
00520d79 : PUSH 0x14
00520d7b : PUSH EDI
00520d7c : MOV dword ptr [ESP + 0x1c],0x143
00520d84 : CALL 0x00515d60
00520d89 : TEST EAX,EAX
00520d8b : JZ 0x00520d9e
00520d8d : MOV ECX,dword ptr [EDI + 0x20]
00520d90 : PUSH EDI
00520d91 : PUSH ECX
00520d92 : PUSH ESI
00520d93 : MOV ECX,EAX
00520d95 : CALL 0x00520b80
00520d9a : MOV EBP,EAX
00520d9c : JMP 0x00520da0
00520d9e : XOR EBP,EBP
00520da0 : MOV ESI,dword ptr [EDI + 0x80]
00520da6 : TEST ESI,ESI
00520da8 : JZ 0x00520de1
00520daa : DEC dword ptr [ESI]
00520dac : CMP dword ptr [ESI],0x0
00520daf : JG 0x00520de1
00520db1 : MOV ECX,dword ptr [ESI + 0x10]
00520db4 : ADD dword ptr [ECX + 0x8],-0x1
00520db8 : JNZ 0x00520dbf
00520dba : CALL 0x00525340
00520dbf : MOV ECX,dword ptr [ESI + 0xc]
00520dc2 : ADD dword ptr [ECX + 0x8],-0x1
00520dc6 : JNZ 0x00520dcd
00520dc8 : CALL 0x00525340
00520dcd : MOV ECX,dword ptr [ESI + 0x8]
00520dd0 : ADD dword ptr [ECX + 0x8],-0x1
00520dd4 : JNZ 0x00520ddb
00520dd6 : CALL 0x00525340
00520ddb : PUSH ESI
00520ddc : CALL 0x00515cf0
00520de1 : MOV dword ptr [EDI + 0x80],EBP
00520de7 : POP EBP
00520de8 : POP EDI
00520de9 : POP ESI
00520dea : RET 0x4
