PROGRAM  : Maestia.exe
FUNCTION : FUN_0094e700
ENTRY    : 0094e700
BODY     : [[0094e700, 0094e8dd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0094e700(int param_1)

{
  int iVar1;
  int iVar2;
  char cVar3;
  uint uVar4;
  int *piVar5;
  int iVar6;
  undefined4 uVar7;
  LONG LVar8;
  undefined4 uVar9;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int *local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  iVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1ff59;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(DAT_017251ac + 0x424);
  local_20 = 0;
  local_28 = ".\\Gui\\AvaGuiPetInfo.cpp";
  local_24 = 0x113;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  iVar1 = *(int *)(DAT_0172491c + 0x90);
  param_1 = *(undefined4 *)(iVar2 + 0x80);
  iVar6 = *(int *)(iVar1 + 0x110);
  FUN_00484470(&param_1);
  if (local_14 == *(int *)(iVar6 + 8)) {
    cVar3 = '\0';
  }
  else if (*(int *)(local_14 + 0x10) == 0) {
    cVar3 = '\0';
  }
  else {
    cVar3 = *(char *)(*(int *)(local_14 + 0x10) + 0x4c);
  }
  if ((*(char *)(iVar2 + 0x38) != '\0') || (cVar3 != '\0')) {
    if (*(uint *)(iVar2 + 0x7c) < 0x10) {
      iVar6 = iVar2 + 0x68;
    }
    else {
      iVar6 = *(int *)(iVar2 + 0x68);
    }
    piVar5 = (int *)FUN_007f5ff0(iVar1,iVar6);
    if (piVar5 != (int *)0x0) {
      uVar4 = (**(code **)(*piVar5 + 8))(uVar4);
      if (((uVar4 & 0xff00) == 0x100) && (local_14 = piVar5[3], local_14 != 0)) {
        iVar6 = FUN_007c8740(*(undefined4 *)(iVar2 + 0x80));
        iVar1 = DAT_017251ac;
        if (iVar6 != 0) {
          *(undefined1 *)(iVar2 + 0x38) = 0;
          piVar5 = (int *)(**(code **)(**(int **)(iVar1 + 0x4a4) + 8))();
          local_8 = CONCAT31(local_8._1_3_,1);
          uVar9 = 0;
          local_18 = piVar5;
          uVar7 = FUN_007c8740(*(undefined4 *)(iVar2 + 0x80));
          cVar3 = (**(code **)(*piVar5 + 0x34))(uVar7,uVar9);
          if (cVar3 == '\0') {
            FUN_008018d0(L"PREVIEW_RTT Texture InitTexture Failed !!!!");
          }
          else {
            FUN_00512430(piVar5);
          }
          local_8 = local_8 & 0xffffff00;
          LVar8 = InterlockedExchangeAdd(piVar5 + 1,-1);
          if (LVar8 == 1) {
            (**(code **)*piVar5)(1);
          }
        }
      }
    }
  }
  local_8 = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0094e700 : PUSH EBP
0094e701 : MOV EBP,ESP
0094e703 : PUSH -0x1
0094e705 : PUSH 0xb1ff59
0094e70a : MOV EAX,FS:[0x0]
0094e710 : PUSH EAX
0094e711 : SUB ESP,0x1c
0094e714 : PUSH EBX
0094e715 : PUSH ESI
0094e716 : PUSH EDI
0094e717 : MOV EAX,[0x00d66fa0]
0094e71c : XOR EAX,EBP
0094e71e : PUSH EAX
0094e71f : LEA EAX,[EBP + -0xc]
0094e722 : MOV FS:[0x0],EAX
0094e728 : MOV EBX,dword ptr [EBP + 0x8]
0094e72b : MOV EAX,[0x017251ac]
0094e730 : LEA ECX,[EBP + -0x28]
0094e733 : ADD EAX,0x424
0094e738 : XOR ESI,ESI
0094e73a : PUSH ECX
0094e73b : MOV dword ptr [EBP + -0x1c],ESI
0094e73e : MOV dword ptr [EBP + -0x28],EAX
0094e741 : MOV dword ptr [EBP + -0x24],0xc748e4
0094e748 : MOV dword ptr [EBP + -0x20],0x113
0094e74f : MOV dword ptr [EBP + -0x18],0x1
0094e756 : CALL 0x006ef1a0
0094e75b : MOV dword ptr [EBP + -0x4],ESI
0094e75e : MOV EDX,dword ptr [0x0172491c]
0094e764 : MOV EDI,dword ptr [EDX + 0x90]
0094e76a : MOV EAX,dword ptr [EBX + 0x80]
0094e770 : MOV ESI,dword ptr [EDI + 0x110]
0094e776 : LEA ECX,[EBP + 0x8]
0094e779 : MOV dword ptr [EBP + 0x8],EAX
0094e77c : PUSH ECX
0094e77d : LEA ECX,[ESI + 0x4]
0094e780 : LEA EAX,[EBP + -0x10]
0094e783 : CALL 0x00484470
0094e788 : MOV ESI,dword ptr [ESI + 0x8]
0094e78b : MOV EAX,dword ptr [EBP + -0x10]
0094e78e : CMP EAX,ESI
0094e790 : JNZ 0x0094e796
0094e792 : XOR AL,AL
0094e794 : JMP 0x0094e7a4
0094e796 : MOV EAX,dword ptr [EAX + 0x10]
0094e799 : TEST EAX,EAX
0094e79b : JNZ 0x0094e7a1
0094e79d : XOR AL,AL
0094e79f : JMP 0x0094e7a4
0094e7a1 : MOV AL,byte ptr [EAX + 0x4c]
0094e7a4 : CMP byte ptr [EBX + 0x38],0x0
0094e7a8 : JNZ 0x0094e7b2
0094e7aa : TEST AL,AL
0094e7ac : JZ 0x0094e8ac
0094e7b2 : CMP dword ptr [EBX + 0x7c],0x10
0094e7b6 : JC 0x0094e7bd
0094e7b8 : MOV EAX,dword ptr [EBX + 0x68]
0094e7bb : JMP 0x0094e7c0
0094e7bd : LEA EAX,[EBX + 0x68]
0094e7c0 : PUSH EAX
0094e7c1 : PUSH EDI
0094e7c2 : CALL 0x007f5ff0
0094e7c7 : MOV ESI,EAX
0094e7c9 : TEST ESI,ESI
0094e7cb : JZ 0x0094e8ac
0094e7d1 : MOV EDX,dword ptr [ESI]
0094e7d3 : MOV EAX,dword ptr [EDX + 0x8]
0094e7d6 : MOV ECX,ESI
0094e7d8 : CALL EAX
0094e7da : AND EAX,0xff00
0094e7df : CMP EAX,0x100
0094e7e4 : JNZ 0x0094e8ac
0094e7ea : MOV ESI,dword ptr [ESI + 0xc]
0094e7ed : MOV dword ptr [EBP + -0x10],ESI
0094e7f0 : TEST ESI,ESI
0094e7f2 : JZ 0x0094e8ac
0094e7f8 : MOV ECX,dword ptr [0x0172491c]
0094e7fe : MOV EAX,dword ptr [ECX + 0x90]
0094e804 : MOV EAX,dword ptr [EAX + 0x110]
0094e80a : MOV EDX,dword ptr [EBX + 0x80]
0094e810 : PUSH EDX
0094e811 : MOV ESI,EAX
0094e813 : CALL 0x007c8740
0094e818 : TEST EAX,EAX
0094e81a : JZ 0x0094e8ac
0094e820 : MOV EAX,[0x017251ac]
0094e825 : MOV byte ptr [EBX + 0x38],0x0
0094e829 : MOV ECX,dword ptr [EAX + 0x4a4]
0094e82f : MOV EDX,dword ptr [ECX]
0094e831 : MOV EAX,dword ptr [EDX + 0x8]
0094e834 : CALL EAX
0094e836 : MOV EDI,EAX
0094e838 : MOV dword ptr [EBP + -0x14],EDI
0094e83b : MOV byte ptr [EBP + -0x4],0x1
0094e83f : MOV ECX,dword ptr [0x0172491c]
0094e845 : MOV EAX,dword ptr [ECX + 0x90]
0094e84b : MOV EAX,dword ptr [EAX + 0x110]
0094e851 : MOV EDX,dword ptr [EBX + 0x80]
0094e857 : PUSH 0x0
0094e859 : PUSH EDX
0094e85a : MOV ESI,EAX
0094e85c : CALL 0x007c8740
0094e861 : PUSH EAX
0094e862 : MOV EAX,dword ptr [EDI]
0094e864 : MOV EAX,dword ptr [EAX + 0x34]
0094e867 : MOV ECX,EDI
0094e869 : CALL EAX
0094e86b : TEST AL,AL
0094e86d : JZ 0x0094e87a
0094e86f : MOV ECX,dword ptr [EBP + -0x10]
0094e872 : PUSH EDI
0094e873 : CALL 0x00512430
0094e878 : JMP 0x0094e88d
0094e87a : MOV ESI,dword ptr [0x00da98e8]
0094e880 : PUSH 0xc74900
0094e885 : CALL 0x008018d0
0094e88a : ADD ESP,0x4
0094e88d : MOV byte ptr [EBP + -0x4],0x0
0094e891 : PUSH -0x1
0094e893 : LEA ECX,[EDI + 0x4]
0094e896 : PUSH ECX
0094e897 : CALL dword ptr [0x00b851cc]
0094e89d : ADD EAX,-0x1
0094e8a0 : JNZ 0x0094e8ac
0094e8a2 : MOV EDX,dword ptr [EDI]
0094e8a4 : MOV EAX,dword ptr [EDX]
0094e8a6 : PUSH 0x1
0094e8a8 : MOV ECX,EDI
0094e8aa : CALL EAX
0094e8ac : MOV dword ptr [EBP + -0x4],0xffffffff
0094e8b3 : CMP dword ptr [EBP + -0x1c],0x0
0094e8b7 : JZ 0x0094e8ca
0094e8b9 : MOV ECX,dword ptr [EBP + -0x28]
0094e8bc : PUSH ECX
0094e8bd : CALL dword ptr [0x00b8511c]
0094e8c3 : MOV dword ptr [EBP + -0x1c],0x0
0094e8ca : MOV ECX,dword ptr [EBP + -0xc]
0094e8cd : MOV dword ptr FS:[0x0],ECX
0094e8d4 : POP ECX
0094e8d5 : POP EDI
0094e8d6 : POP ESI
0094e8d7 : POP EBX
0094e8d8 : MOV ESP,EBP
0094e8da : POP EBP
0094e8db : RET 0x4
