PROGRAM  : Maestia.exe
FUNCTION : FUN_0047fb00
ENTRY    : 0047fb00
BODY     : [[0047fb00, 0047fc53]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0047fb00(int param_1)

{
  char cVar1;
  uint uVar2;
  char *pcVar3;
  int iVar4;
  undefined4 uVar5;
  char *in_ECX;
  int *unaff_EDI;
  int *local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b70b20;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*unaff_EDI != 0) {
    return 1;
  }
  local_18 = (int *)0x0;
  local_14 = (int *)0x0;
  local_8._0_1_ = 1;
  local_8._1_3_ = 0;
  pcVar3 = in_ECX;
  do {
    cVar1 = *pcVar3;
    pcVar3 = pcVar3 + 1;
  } while (cVar1 != '\0');
  ExceptionList = &local_10;
  iVar4 = D3DXAssembleShader(in_ECX,(int)pcVar3 - (int)(in_ECX + 1),0,0,1,&local_14,&local_18);
  if (iVar4 < 0) {
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_14 != (int *)0x0) {
      (**(code **)(*local_14 + 8))(local_14);
    }
    local_8 = 0xffffffff;
    if (local_18 != (int *)0x0) {
      (**(code **)(*local_18 + 8))(local_18);
    }
  }
  else {
    if (local_14 != (int *)0x0) {
      iVar4 = **(int **)(param_1 + 0xf0);
      uVar5 = (**(code **)(*local_14 + 0xc))(local_14);
      iVar4 = (**(code **)(iVar4 + 0x1a8))(*(undefined4 *)(param_1 + 0xf0),uVar5);
      if (iVar4 == 0) {
        local_8 = (uint)local_8._1_3_ << 8;
        if (local_14 != (int *)0x0) {
          (**(code **)(*local_14 + 8))(local_14);
        }
        local_8 = 0xffffffff;
        if (local_18 == (int *)0x0) {
          ExceptionList = local_10;
          return 1;
        }
        (**(code **)(*local_18 + 8))(local_18);
        ExceptionList = local_10;
        return 1;
      }
    }
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_14 != (int *)0x0) {
      (**(code **)(*local_14 + 8))(local_14,uVar2);
    }
    local_8 = 0xffffffff;
    if (local_18 != (int *)0x0) {
      (**(code **)(*local_18 + 8))(local_18);
      ExceptionList = local_10;
      return 0;
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0047fb00 : PUSH EBP
0047fb01 : MOV EBP,ESP
0047fb03 : PUSH -0x1
0047fb05 : PUSH 0xb70b20
0047fb0a : MOV EAX,FS:[0x0]
0047fb10 : PUSH EAX
0047fb11 : SUB ESP,0x8
0047fb14 : PUSH EBX
0047fb15 : PUSH ESI
0047fb16 : MOV EAX,[0x00d66fa0]
0047fb1b : XOR EAX,EBP
0047fb1d : PUSH EAX
0047fb1e : LEA EAX,[EBP + -0xc]
0047fb21 : MOV FS:[0x0],EAX
0047fb27 : MOV ESI,ECX
0047fb29 : MOV EAX,dword ptr [EDI]
0047fb2b : XOR EBX,EBX
0047fb2d : CMP EAX,EBX
0047fb2f : JNZ 0x0047fbfe
0047fb35 : MOV dword ptr [EBP + -0x14],EBX
0047fb38 : MOV dword ptr [EBP + -0x4],EBX
0047fb3b : MOV dword ptr [EBP + -0x10],EBX
0047fb3e : MOV byte ptr [EBP + -0x4],0x1
0047fb42 : MOV EAX,ESI
0047fb44 : LEA EDX,[EAX + 0x1]
0047fb47 : MOV CL,byte ptr [EAX]
0047fb49 : INC EAX
0047fb4a : CMP CL,BL
0047fb4c : JNZ 0x0047fb47
0047fb4e : SUB EAX,EDX
0047fb50 : LEA ECX,[EBP + -0x14]
0047fb53 : PUSH ECX
0047fb54 : LEA EDX,[EBP + -0x10]
0047fb57 : PUSH EDX
0047fb58 : PUSH 0x1
0047fb5a : PUSH EBX
0047fb5b : PUSH EBX
0047fb5c : PUSH EAX
0047fb5d : PUSH ESI
0047fb5e : CALL 0x00664cf0
0047fb63 : CMP EAX,EBX
0047fb65 : JGE 0x0047fba4
0047fb67 : MOV byte ptr [EBP + -0x4],BL
0047fb6a : MOV EAX,dword ptr [EBP + -0x10]
0047fb6d : CMP EAX,EBX
0047fb6f : JZ 0x0047fb79
0047fb71 : MOV ECX,dword ptr [EAX]
0047fb73 : MOV EDX,dword ptr [ECX + 0x8]
0047fb76 : PUSH EAX
0047fb77 : CALL EDX
0047fb79 : MOV dword ptr [EBP + -0x4],0xffffffff
0047fb80 : MOV EAX,dword ptr [EBP + -0x14]
0047fb83 : CMP EAX,EBX
0047fb85 : JZ 0x0047fb8f
0047fb87 : MOV ECX,dword ptr [EAX]
0047fb89 : MOV EDX,dword ptr [ECX + 0x8]
0047fb8c : PUSH EAX
0047fb8d : CALL EDX
0047fb8f : XOR AL,AL
0047fb91 : MOV ECX,dword ptr [EBP + -0xc]
0047fb94 : MOV dword ptr FS:[0x0],ECX
0047fb9b : POP ECX
0047fb9c : POP ESI
0047fb9d : POP EBX
0047fb9e : MOV ESP,EBP
0047fba0 : POP EBP
0047fba1 : RET 0x4
0047fba4 : MOV EAX,dword ptr [EBP + -0x10]
0047fba7 : CMP EAX,EBX
0047fba9 : JZ 0x0047fc13
0047fbab : MOV ECX,dword ptr [EBP + 0x8]
0047fbae : MOV EDX,dword ptr [ECX + 0xf0]
0047fbb4 : MOV ECX,dword ptr [EAX]
0047fbb6 : MOV ESI,dword ptr [EDX]
0047fbb8 : MOV EDX,dword ptr [ECX + 0xc]
0047fbbb : PUSH EDI
0047fbbc : PUSH EAX
0047fbbd : CALL EDX
0047fbbf : MOV EDX,dword ptr [ESI + 0x1a8]
0047fbc5 : PUSH EAX
0047fbc6 : MOV EAX,dword ptr [EBP + 0x8]
0047fbc9 : MOV ECX,dword ptr [EAX + 0xf0]
0047fbcf : PUSH ECX
0047fbd0 : CALL EDX
0047fbd2 : CMP EAX,EBX
0047fbd4 : JNZ 0x0047fc13
0047fbd6 : MOV byte ptr [EBP + -0x4],BL
0047fbd9 : MOV EAX,dword ptr [EBP + -0x10]
0047fbdc : CMP EAX,EBX
0047fbde : JZ 0x0047fbe8
0047fbe0 : MOV ECX,dword ptr [EAX]
0047fbe2 : MOV EDX,dword ptr [ECX + 0x8]
0047fbe5 : PUSH EAX
0047fbe6 : CALL EDX
0047fbe8 : MOV dword ptr [EBP + -0x4],0xffffffff
0047fbef : MOV EAX,dword ptr [EBP + -0x14]
0047fbf2 : CMP EAX,EBX
0047fbf4 : JZ 0x0047fbfe
0047fbf6 : MOV ECX,dword ptr [EAX]
0047fbf8 : MOV EDX,dword ptr [ECX + 0x8]
0047fbfb : PUSH EAX
0047fbfc : CALL EDX
0047fbfe : MOV AL,0x1
0047fc00 : MOV ECX,dword ptr [EBP + -0xc]
0047fc03 : MOV dword ptr FS:[0x0],ECX
0047fc0a : POP ECX
0047fc0b : POP ESI
0047fc0c : POP EBX
0047fc0d : MOV ESP,EBP
0047fc0f : POP EBP
0047fc10 : RET 0x4
0047fc13 : MOV byte ptr [EBP + -0x4],BL
0047fc16 : MOV EAX,dword ptr [EBP + -0x10]
0047fc19 : CMP EAX,EBX
0047fc1b : JZ 0x0047fc25
0047fc1d : MOV ECX,dword ptr [EAX]
0047fc1f : MOV EDX,dword ptr [ECX + 0x8]
0047fc22 : PUSH EAX
0047fc23 : CALL EDX
0047fc25 : MOV dword ptr [EBP + -0x4],0xffffffff
0047fc2c : MOV EAX,dword ptr [EBP + -0x14]
0047fc2f : CMP EAX,EBX
0047fc31 : JZ 0x0047fb8f
0047fc37 : MOV ECX,dword ptr [EAX]
0047fc39 : MOV EDX,dword ptr [ECX + 0x8]
0047fc3c : PUSH EAX
0047fc3d : CALL EDX
0047fc3f : XOR AL,AL
0047fc41 : MOV ECX,dword ptr [EBP + -0xc]
0047fc44 : MOV dword ptr FS:[0x0],ECX
0047fc4b : POP ECX
0047fc4c : POP ESI
0047fc4d : POP EBX
0047fc4e : MOV ESP,EBP
0047fc50 : POP EBP
0047fc51 : RET 0x4
