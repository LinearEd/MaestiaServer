PROGRAM  : Maestia.exe
FUNCTION : FUN_00552a40
ENTRY    : 00552a40
BODY     : [[00552a40, 00552b1f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00552a40(int *param_1,undefined4 param_2,int param_3)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int in_ECX;
  undefined1 local_10 [12];
  int iStack_4;
  
  if ((*(int *)(in_ECX + 0x1c) == 0) && (param_3 == 0)) {
    iVar3 = FUN_00515840(0xc,0);
    if (iVar3 != 0) {
      FUN_00551e10(param_2);
      *(int *)(in_ECX + 0x1c) = iVar3;
      return;
    }
    *(undefined4 *)(in_ECX + 0x1c) = 0;
    return;
  }
  local_10[0] = 0;
  cVar2 = (**(code **)(*(int *)(param_3 + 0x10) + 0x2c))(param_1,*param_1 + 0x130,local_10);
  if (cVar2 != '\0') {
    iVar3 = FUN_00526fa0(0);
    if (iVar3 != 0) {
      *(uint *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1U & 0x8fffffff;
    }
    piVar1 = (int *)(**(int **)(in_ECX + 0x1c) + iStack_4 * 4);
    if (iVar3 != 0) {
      *(uint *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1U & 0x8fffffff;
    }
    if (*piVar1 != 0) {
      FUN_00503db0();
    }
    *piVar1 = iVar3;
    if (iVar3 != 0) {
      FUN_00503db0();
    }
  }
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00552a40 : SUB ESP,0x10
00552a43 : PUSH ESI
00552a44 : PUSH EDI
00552a45 : MOV EDI,ECX
00552a47 : CMP dword ptr [EDI + 0x1c],0x0
00552a4b : MOV ECX,dword ptr [ESP + 0x24]
00552a4f : JNZ 0x00552a94
00552a51 : TEST ECX,ECX
00552a53 : JNZ 0x00552a94
00552a55 : MOV EAX,dword ptr [ESP + 0x1c]
00552a59 : MOV ECX,dword ptr [EAX]
00552a5b : MOV ECX,dword ptr [ECX + 0x288]
00552a61 : PUSH 0x0
00552a63 : PUSH 0xc
00552a65 : CALL 0x00515840
00552a6a : MOV ESI,EAX
00552a6c : TEST ESI,ESI
00552a6e : JZ 0x00552a87
00552a70 : MOV EDX,dword ptr [ESP + 0x20]
00552a74 : PUSH EDX
00552a75 : MOV ECX,ESI
00552a77 : CALL 0x00551e10
00552a7c : MOV dword ptr [EDI + 0x1c],ESI
00552a7f : POP EDI
00552a80 : POP ESI
00552a81 : ADD ESP,0x10
00552a84 : RET 0xc
00552a87 : XOR ESI,ESI
00552a89 : MOV dword ptr [EDI + 0x1c],ESI
00552a8c : POP EDI
00552a8d : POP ESI
00552a8e : ADD ESP,0x10
00552a91 : RET 0xc
00552a94 : MOV EDX,dword ptr [ESP + 0x1c]
00552a98 : MOV EAX,dword ptr [EDX]
00552a9a : MOV ESI,dword ptr [ECX + 0x10]
00552a9d : PUSH EBX
00552a9e : ADD EAX,0x130
00552aa3 : LEA EBX,[ESP + 0xc]
00552aa7 : PUSH EBX
00552aa8 : ADD ECX,0x10
00552aab : PUSH EAX
00552aac : MOV EAX,dword ptr [ESI + 0x2c]
00552aaf : PUSH EDX
00552ab0 : MOV byte ptr [ESP + 0x18],0x0
00552ab5 : CALL EAX
00552ab7 : POP EBX
00552ab8 : TEST AL,AL
00552aba : JZ 0x00552b0f
00552abc : PUSH 0x0
00552abe : LEA ECX,[ESP + 0xc]
00552ac2 : CALL 0x00526fa0
00552ac7 : MOV ESI,EAX
00552ac9 : TEST ESI,ESI
00552acb : JZ 0x00552ada
00552acd : MOV ECX,dword ptr [ESI + 0x8]
00552ad0 : INC ECX
00552ad1 : AND ECX,0x8fffffff
00552ad7 : MOV dword ptr [ESI + 0x8],ECX
00552ada : MOV EDX,dword ptr [EDI + 0x1c]
00552add : MOV EAX,dword ptr [EDX]
00552adf : MOV ECX,dword ptr [ESP + 0x20]
00552ae3 : LEA EDI,[EAX + ECX*0x4]
00552ae6 : TEST ESI,ESI
00552ae8 : JZ 0x00552af7
00552aea : MOV EDX,dword ptr [ESI + 0x8]
00552aed : INC EDX
00552aee : AND EDX,0x8fffffff
00552af4 : MOV dword ptr [ESI + 0x8],EDX
00552af7 : MOV ECX,dword ptr [EDI]
00552af9 : TEST ECX,ECX
00552afb : JZ 0x00552b02
00552afd : CALL 0x00503db0
00552b02 : MOV dword ptr [EDI],ESI
00552b04 : TEST ESI,ESI
00552b06 : JZ 0x00552b0f
00552b08 : MOV ECX,ESI
00552b0a : CALL 0x00503db0
00552b0f : LEA ECX,[ESP + 0x8]
00552b13 : CALL 0x00526bc0
00552b18 : POP EDI
00552b19 : POP ESI
00552b1a : ADD ESP,0x10
00552b1d : RET 0xc
