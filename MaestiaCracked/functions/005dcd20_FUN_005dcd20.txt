PROGRAM  : Maestia.exe
FUNCTION : FUN_005dcd20
ENTRY    : 005dcd20
BODY     : [[005dcd20, 005dd08d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005dcd20(float param_1)

{
  float *pfVar1;
  int iVar2;
  uint uVar3;
  float fVar4;
  int in_ECX;
  uint uVar5;
  float fVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  float fVar10;
  uint local_1c;
  int local_18;
  float local_8;
  float local_4;
  
  fVar4 = param_1;
  local_1c = 0;
  if (*(int *)(in_ECX + 0x18) != 0) {
    do {
      iVar2 = *(int *)(*(int *)(in_ECX + 0x24) + (local_1c >> 6) * 4);
      uVar8 = *(uint *)(iVar2 + 4 + (local_1c & 0x3f) * 0x18);
      if (2 < uVar8) {
        uVar3 = *(uint *)(iVar2 + (local_1c & 0x3f) * 0x18 + 8);
        iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar3 >> 8) * 4);
        fVar10 = *(float *)(iVar2 + (uVar3 & 0xff) * 8);
        fVar6 = *(float *)(iVar2 + 4 + (uVar3 & 0xff) * 8);
        uVar7 = uVar8 - 1;
        uVar5 = 1;
        if (1 < uVar7) {
          local_8 = fVar10;
          local_4 = fVar6;
          if (3 < (int)(uVar8 - 2)) {
            uVar9 = uVar3 + 2;
            param_1 = (float)((uVar8 - 6 >> 2) + 1);
            uVar5 = (int)param_1 * 4 + 1;
            do {
              iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar9 - 1 >> 8) * 4);
              uVar8 = uVar9 - 1 & 0xff;
              pfVar1 = (float *)(iVar2 + uVar8 * 8);
              if (ABS(*(float *)(iVar2 + uVar8 * 8) - local_8) + ABS(pfVar1[1] - local_4) < fVar4) {
                *pfVar1 = fVar10;
                pfVar1[1] = fVar6;
              }
              else {
                fVar10 = *pfVar1;
                fVar6 = pfVar1[1];
                local_8 = fVar10;
                local_4 = fVar6;
              }
              iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar9 >> 8) * 4);
              pfVar1 = (float *)(iVar2 + (uVar9 & 0xff) * 8);
              if (ABS(*(float *)(iVar2 + (uVar9 & 0xff) * 8) - local_8) + ABS(pfVar1[1] - local_4) <
                  fVar4) {
                *pfVar1 = fVar10;
                pfVar1[1] = fVar6;
              }
              else {
                fVar10 = *pfVar1;
                fVar6 = pfVar1[1];
                local_8 = fVar10;
                local_4 = fVar6;
              }
              iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar9 + 1 >> 8) * 4);
              uVar8 = uVar9 + 1 & 0xff;
              pfVar1 = (float *)(iVar2 + uVar8 * 8);
              if (ABS(*(float *)(iVar2 + uVar8 * 8) - local_8) + ABS(pfVar1[1] - local_4) < fVar4) {
                *pfVar1 = fVar10;
                pfVar1[1] = fVar6;
              }
              else {
                fVar10 = *pfVar1;
                fVar6 = pfVar1[1];
                local_8 = fVar10;
                local_4 = fVar6;
              }
              iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar9 + 2 >> 8) * 4);
              uVar8 = uVar9 + 2 & 0xff;
              pfVar1 = (float *)(iVar2 + uVar8 * 8);
              if (ABS(*(float *)(iVar2 + uVar8 * 8) - local_8) + ABS(pfVar1[1] - local_4) < fVar4) {
                *pfVar1 = fVar10;
                pfVar1[1] = fVar6;
              }
              else {
                fVar10 = *pfVar1;
                fVar6 = pfVar1[1];
                local_8 = fVar10;
                local_4 = fVar6;
              }
              uVar9 = uVar9 + 4;
              param_1 = (float)((int)param_1 + -1);
            } while (param_1 != 0.0);
          }
          if (uVar5 < uVar7) {
            uVar8 = uVar5 + uVar3;
            local_18 = uVar7 - uVar5;
            do {
              iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar8 >> 8) * 4);
              pfVar1 = (float *)(iVar2 + (uVar8 & 0xff) * 8);
              if (ABS(*(float *)(iVar2 + (uVar8 & 0xff) * 8) - local_8) + ABS(pfVar1[1] - local_4) <
                  fVar4) {
                *pfVar1 = fVar10;
                pfVar1[1] = fVar6;
              }
              else {
                fVar10 = *pfVar1;
                fVar6 = pfVar1[1];
                local_8 = fVar10;
                local_4 = fVar6;
              }
              uVar8 = uVar8 + 1;
              local_18 = local_18 + -1;
            } while (local_18 != 0);
          }
        }
        uVar3 = uVar3 + uVar7;
        iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar3 >> 8) * 4);
        fVar10 = *(float *)(iVar2 + (uVar3 & 0xff) * 8);
        fVar6 = *(float *)(iVar2 + 4 + (uVar3 & 0xff) * 8);
        iVar2 = *(int *)(*(int *)(in_ECX + 0x14) + (uVar3 - 1 >> 8) * 4);
        uVar8 = uVar3 - 1 & 0xff;
        pfVar1 = (float *)(iVar2 + uVar8 * 8);
        if (ABS(*(float *)(iVar2 + uVar8 * 8) - fVar10) + ABS(pfVar1[1] - fVar6) < fVar4) {
          *pfVar1 = fVar10;
          pfVar1[1] = fVar6;
        }
      }
      local_1c = local_1c + 1;
    } while (local_1c < *(uint *)(in_ECX + 0x18));
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005dcd20 : SUB ESP,0x1c
005dcd23 : XOR EDX,EDX
005dcd25 : MOV dword ptr [ESP],EDX
005dcd28 : CMP dword ptr [ECX + 0x18],EDX
005dcd2b : JBE 0x005dd088
005dcd31 : FLD float ptr [ESP + 0x20]
005dcd35 : PUSH EBX
005dcd36 : PUSH EBP
005dcd37 : PUSH ESI
005dcd38 : PUSH EDI
005dcd39 : MOV EDI,dword ptr [ECX + 0x24]
005dcd3c : MOV ESI,EDX
005dcd3e : MOV EAX,EDX
005dcd40 : AND EAX,0x3f
005dcd43 : SHR ESI,0x6
005dcd46 : MOV ESI,dword ptr [EDI + ESI*0x4]
005dcd49 : LEA EAX,[EAX + EAX*0x2]
005dcd4c : MOV EBP,dword ptr [ESI + EAX*0x8 + 0x4]
005dcd50 : LEA EAX,[ESI + EAX*0x8]
005dcd53 : CMP EBP,0x2
005dcd56 : JBE 0x005dd074
005dcd5c : MOV ESI,dword ptr [EAX + 0x8]
005dcd5f : MOV EDI,dword ptr [ECX + 0x14]
005dcd62 : MOV EDX,ESI
005dcd64 : SHR EDX,0x8
005dcd67 : MOV EDX,dword ptr [EDI + EDX*0x4]
005dcd6a : MOV EAX,ESI
005dcd6c : AND EAX,0xff
005dcd71 : MOV EDI,dword ptr [EDX + EAX*0x8]
005dcd74 : MOV EBX,dword ptr [EDX + EAX*0x8 + 0x4]
005dcd78 : DEC EBP
005dcd79 : MOV EDX,0x1
005dcd7e : MOV dword ptr [ESP + 0x20],ESI
005dcd82 : MOV dword ptr [ESP + 0x18],EBP
005dcd86 : MOV dword ptr [ESP + 0x24],EDI
005dcd8a : MOV dword ptr [ESP + 0x28],EBX
005dcd8e : CMP EBP,EDX
005dcd90 : JBE 0x005dcff9
005dcd96 : LEA EAX,[EBP + -0x1]
005dcd99 : CMP EAX,0x4
005dcd9c : JL 0x005dcf6d
005dcda2 : ADD EBP,-0x5
005dcda5 : SHR EBP,0x2
005dcda8 : ADD ESI,0x2
005dcdab : INC EBP
005dcdac : LEA EDX,[EBP*0x4 + 0x1]
005dcdb3 : MOV dword ptr [ESP + 0x30],EBP
005dcdb7 : MOV dword ptr [ESP + 0x1c],EDX
005dcdbb : MOV EDX,dword ptr [ECX + 0x14]
005dcdbe : LEA EAX,[ESI + -0x1]
005dcdc1 : SHR EAX,0x8
005dcdc4 : MOV EAX,dword ptr [EDX + EAX*0x4]
005dcdc7 : LEA EBP,[ESI + -0x1]
005dcdca : AND EBP,0xff
005dcdd0 : FLD float ptr [EAX + EBP*0x8]
005dcdd3 : LEA EDX,[EAX + EBP*0x8]
005dcdd6 : FSUB float ptr [ESP + 0x24]
005dcdda : FSTP float ptr [ESP + 0x14]
005dcdde : FLD float ptr [ESP + 0x14]
005dcde2 : FABS
005dcde4 : FSTP float ptr [ESP + 0x14]
005dcde8 : FLD float ptr [ESP + 0x14]
005dcdec : FLD float ptr [EDX + 0x4]
005dcdef : FSUB float ptr [ESP + 0x28]
005dcdf3 : FSTP float ptr [ESP + 0x14]
005dcdf7 : FLD float ptr [ESP + 0x14]
005dcdfb : FABS
005dcdfd : FSTP float ptr [ESP + 0x14]
005dce01 : FADD float ptr [ESP + 0x14]
005dce05 : FCOMP
005dce07 : FNSTSW AX
005dce09 : TEST AH,0x1
005dce0c : JNZ 0x005dce1d
005dce0e : MOV EDI,dword ptr [EDX]
005dce10 : MOV EBX,dword ptr [EDX + 0x4]
005dce13 : MOV dword ptr [ESP + 0x24],EDI
005dce17 : MOV dword ptr [ESP + 0x28],EBX
005dce1b : JMP 0x005dce22
005dce1d : MOV dword ptr [EDX],EDI
005dce1f : MOV dword ptr [EDX + 0x4],EBX
005dce22 : MOV EAX,dword ptr [ECX + 0x14]
005dce25 : MOV EDX,ESI
005dce27 : SHR EDX,0x8
005dce2a : MOV EDX,dword ptr [EAX + EDX*0x4]
005dce2d : MOV EBP,ESI
005dce2f : AND EBP,0xff
005dce35 : FLD float ptr [EDX + EBP*0x8]
005dce38 : LEA EDX,[EDX + EBP*0x8]
005dce3b : FSUB float ptr [ESP + 0x24]
005dce3f : FSTP float ptr [ESP + 0x14]
005dce43 : FLD float ptr [ESP + 0x14]
005dce47 : FABS
005dce49 : FSTP float ptr [ESP + 0x14]
005dce4d : FLD float ptr [ESP + 0x14]
005dce51 : FLD float ptr [EDX + 0x4]
005dce54 : FSUB float ptr [ESP + 0x28]
005dce58 : FSTP float ptr [ESP + 0x14]
005dce5c : FLD float ptr [ESP + 0x14]
005dce60 : FABS
005dce62 : FSTP float ptr [ESP + 0x14]
005dce66 : FADD float ptr [ESP + 0x14]
005dce6a : FCOMP
005dce6c : FNSTSW AX
005dce6e : TEST AH,0x1
005dce71 : JNZ 0x005dce82
005dce73 : MOV EDI,dword ptr [EDX]
005dce75 : MOV EBX,dword ptr [EDX + 0x4]
005dce78 : MOV dword ptr [ESP + 0x24],EDI
005dce7c : MOV dword ptr [ESP + 0x28],EBX
005dce80 : JMP 0x005dce87
005dce82 : MOV dword ptr [EDX],EDI
005dce84 : MOV dword ptr [EDX + 0x4],EBX
005dce87 : MOV EBP,dword ptr [ECX + 0x14]
005dce8a : LEA EAX,[ESI + 0x1]
005dce8d : MOV EDX,EAX
005dce8f : SHR EDX,0x8
005dce92 : MOV EDX,dword ptr [EBP + EDX*0x4]
005dce96 : AND EAX,0xff
005dce9b : FLD float ptr [EDX + EAX*0x8]
005dce9e : LEA EDX,[EDX + EAX*0x8]
005dcea1 : FSUB float ptr [ESP + 0x24]
005dcea5 : FSTP float ptr [ESP + 0x14]
005dcea9 : FLD float ptr [ESP + 0x14]
005dcead : FABS
005dceaf : FSTP float ptr [ESP + 0x14]
005dceb3 : FLD float ptr [ESP + 0x14]
005dceb7 : FLD float ptr [EDX + 0x4]
005dceba : FSUB float ptr [ESP + 0x28]
005dcebe : FSTP float ptr [ESP + 0x14]
005dcec2 : FLD float ptr [ESP + 0x14]
005dcec6 : FABS
005dcec8 : FSTP float ptr [ESP + 0x14]
005dcecc : FADD float ptr [ESP + 0x14]
005dced0 : FCOMP
005dced2 : FNSTSW AX
005dced4 : TEST AH,0x1
005dced7 : JNZ 0x005dcee8
005dced9 : MOV EDI,dword ptr [EDX]
005dcedb : MOV EBX,dword ptr [EDX + 0x4]
005dcede : MOV dword ptr [ESP + 0x24],EDI
005dcee2 : MOV dword ptr [ESP + 0x28],EBX
005dcee6 : JMP 0x005dceed
005dcee8 : MOV dword ptr [EDX],EDI
005dceea : MOV dword ptr [EDX + 0x4],EBX
005dceed : MOV EBP,dword ptr [ECX + 0x14]
005dcef0 : LEA EAX,[ESI + 0x2]
005dcef3 : MOV EDX,EAX
005dcef5 : SHR EDX,0x8
005dcef8 : MOV EDX,dword ptr [EBP + EDX*0x4]
005dcefc : AND EAX,0xff
005dcf01 : FLD float ptr [EDX + EAX*0x8]
005dcf04 : LEA EDX,[EDX + EAX*0x8]
005dcf07 : FSUB float ptr [ESP + 0x24]
005dcf0b : FSTP float ptr [ESP + 0x14]
005dcf0f : FLD float ptr [ESP + 0x14]
005dcf13 : FABS
005dcf15 : FSTP float ptr [ESP + 0x14]
005dcf19 : FLD float ptr [ESP + 0x14]
005dcf1d : FLD float ptr [EDX + 0x4]
005dcf20 : FSUB float ptr [ESP + 0x28]
005dcf24 : FSTP float ptr [ESP + 0x14]
005dcf28 : FLD float ptr [ESP + 0x14]
005dcf2c : FABS
005dcf2e : FSTP float ptr [ESP + 0x14]
005dcf32 : FADD float ptr [ESP + 0x14]
005dcf36 : FCOMP
005dcf38 : FNSTSW AX
005dcf3a : TEST AH,0x1
005dcf3d : JNZ 0x005dcf4e
005dcf3f : MOV EDI,dword ptr [EDX]
005dcf41 : MOV EBX,dword ptr [EDX + 0x4]
005dcf44 : MOV dword ptr [ESP + 0x24],EDI
005dcf48 : MOV dword ptr [ESP + 0x28],EBX
005dcf4c : JMP 0x005dcf53
005dcf4e : MOV dword ptr [EDX],EDI
005dcf50 : MOV dword ptr [EDX + 0x4],EBX
005dcf53 : ADD ESI,0x4
005dcf56 : SUB dword ptr [ESP + 0x30],0x1
005dcf5b : JNZ 0x005dcdbb
005dcf61 : MOV EDX,dword ptr [ESP + 0x1c]
005dcf65 : MOV EBP,dword ptr [ESP + 0x18]
005dcf69 : MOV ESI,dword ptr [ESP + 0x20]
005dcf6d : CMP EDX,EBP
005dcf6f : JNC 0x005dcff9
005dcf75 : LEA EAX,[EDX + ESI*0x1]
005dcf78 : SUB EBP,EDX
005dcf7a : MOV dword ptr [ESP + 0x30],EAX
005dcf7e : MOV dword ptr [ESP + 0x14],EBP
005dcf82 : MOV EBP,dword ptr [ECX + 0x14]
005dcf85 : MOV EDX,EAX
005dcf87 : SHR EDX,0x8
005dcf8a : MOV EDX,dword ptr [EBP + EDX*0x4]
005dcf8e : AND EAX,0xff
005dcf93 : FLD float ptr [EDX + EAX*0x8]
005dcf96 : LEA EDX,[EDX + EAX*0x8]
005dcf99 : FSUB float ptr [ESP + 0x24]
005dcf9d : FSTP float ptr [ESP + 0x20]
005dcfa1 : FLD float ptr [ESP + 0x20]
005dcfa5 : FABS
005dcfa7 : FSTP float ptr [ESP + 0x20]
005dcfab : FLD float ptr [ESP + 0x20]
005dcfaf : FLD float ptr [EDX + 0x4]
005dcfb2 : FSUB float ptr [ESP + 0x28]
005dcfb6 : FSTP float ptr [ESP + 0x20]
005dcfba : FLD float ptr [ESP + 0x20]
005dcfbe : FABS
005dcfc0 : FSTP float ptr [ESP + 0x20]
005dcfc4 : FADD float ptr [ESP + 0x20]
005dcfc8 : FCOMP
005dcfca : FNSTSW AX
005dcfcc : TEST AH,0x1
005dcfcf : JNZ 0x005dcfe0
005dcfd1 : MOV EDI,dword ptr [EDX]
005dcfd3 : MOV EBX,dword ptr [EDX + 0x4]
005dcfd6 : MOV dword ptr [ESP + 0x24],EDI
005dcfda : MOV dword ptr [ESP + 0x28],EBX
005dcfde : JMP 0x005dcfe5
005dcfe0 : MOV dword ptr [EDX],EDI
005dcfe2 : MOV dword ptr [EDX + 0x4],EBX
005dcfe5 : MOV EAX,dword ptr [ESP + 0x30]
005dcfe9 : INC EAX
005dcfea : SUB dword ptr [ESP + 0x14],0x1
005dcfef : MOV dword ptr [ESP + 0x30],EAX
005dcff3 : JNZ 0x005dcf82
005dcff5 : MOV EBP,dword ptr [ESP + 0x18]
005dcff9 : LEA EDX,[ESI + EBP*0x1]
005dcffc : MOV ESI,dword ptr [ECX + 0x14]
005dcfff : MOV EDI,EDX
005dd001 : MOV EAX,EDX
005dd003 : AND EAX,0xff
005dd008 : SHR EDI,0x8
005dd00b : MOV EDI,dword ptr [ESI + EDI*0x4]
005dd00e : MOV EBX,dword ptr [EDI + EAX*0x8]
005dd011 : MOV EDI,dword ptr [EDI + EAX*0x8 + 0x4]
005dd015 : LEA EAX,[EDX + -0x1]
005dd018 : MOV EDX,EAX
005dd01a : SHR EDX,0x8
005dd01d : MOV EDX,dword ptr [ESI + EDX*0x4]
005dd020 : AND EAX,0xff
005dd025 : FLD float ptr [EDX + EAX*0x8]
005dd028 : LEA EDX,[EDX + EAX*0x8]
005dd02b : MOV dword ptr [ESP + 0x24],EBX
005dd02f : FSUB float ptr [ESP + 0x24]
005dd033 : MOV dword ptr [ESP + 0x28],EDI
005dd037 : FSTP float ptr [ESP + 0x30]
005dd03b : FLD float ptr [ESP + 0x30]
005dd03f : FABS
005dd041 : FSTP float ptr [ESP + 0x30]
005dd045 : FLD float ptr [ESP + 0x30]
005dd049 : FLD float ptr [EDX + 0x4]
005dd04c : FSUB float ptr [ESP + 0x28]
005dd050 : FSTP float ptr [ESP + 0x30]
005dd054 : FLD float ptr [ESP + 0x30]
005dd058 : FABS
005dd05a : FSTP float ptr [ESP + 0x30]
005dd05e : FADD float ptr [ESP + 0x30]
005dd062 : FCOMP
005dd064 : FNSTSW AX
005dd066 : TEST AH,0x5
005dd069 : JP 0x005dd070
005dd06b : MOV dword ptr [EDX],EBX
005dd06d : MOV dword ptr [EDX + 0x4],EDI
005dd070 : MOV EDX,dword ptr [ESP + 0x10]
005dd074 : INC EDX
005dd075 : MOV dword ptr [ESP + 0x10],EDX
005dd079 : CMP EDX,dword ptr [ECX + 0x18]
005dd07c : JC 0x005dcd39
005dd082 : POP EDI
005dd083 : FSTP ST0
005dd085 : POP ESI
005dd086 : POP EBP
005dd087 : POP EBX
005dd088 : ADD ESP,0x1c
005dd08b : RET 0x4
