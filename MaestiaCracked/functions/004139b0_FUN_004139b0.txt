PROGRAM  : Maestia.exe
FUNCTION : FUN_004139b0
ENTRY    : 004139b0
BODY     : [[004139b0, 00413a4a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004139cf) */

int FUN_004139b0(int param_1,short *param_2,int param_3)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  short *psVar4;
  int iVar5;
  short *psVar6;
  
  if ((param_3 != 0) && (*(int *)(param_1 + 0x14) != 0)) {
    uVar2 = *(uint *)(param_1 + 0x18);
    piVar1 = (int *)(param_1 + 4);
    piVar3 = piVar1;
    if (7 < uVar2) {
      piVar3 = (int *)*piVar1;
    }
    psVar6 = (short *)((int)piVar3 + (*(int *)(param_1 + 0x14) + -1) * 2);
    while( true ) {
      psVar4 = param_2;
      iVar5 = param_3;
      do {
        if (*psVar4 == *psVar6) {
          if (7 < uVar2) {
            return (int)psVar6 - *piVar1 >> 1;
          }
          return (int)psVar6 - (int)piVar1 >> 1;
        }
        psVar4 = psVar4 + 1;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
      psVar4 = (short *)FUN_00404a10();
      if (psVar6 == psVar4) break;
      psVar6 = psVar6 + -1;
    }
  }
  return -1;
}



============================================================
DISASSEMBLY
============================================================
004139b0 : PUSH EBP
004139b1 : MOV EBP,ESP
004139b3 : CMP dword ptr [EBP + 0x10],0x0
004139b7 : PUSH EBX
004139b8 : MOV EBX,dword ptr [EBP + 0x8]
004139bb : PUSH ESI
004139bc : PUSH EDI
004139bd : JBE 0x00413a41
004139c3 : MOV EAX,dword ptr [EBX + 0x14]
004139c6 : TEST EAX,EAX
004139c8 : JBE 0x00413a41
004139ca : CMP EAX,-0x1
004139cd : JBE 0x004139d4
004139cf : OR ECX,0xffffffff
004139d2 : JMP 0x004139d7
004139d4 : LEA ECX,[EAX + -0x1]
004139d7 : MOV EAX,dword ptr [EBX + 0x18]
004139da : MOV dword ptr [EBP + 0x8],EAX
004139dd : LEA EDI,[EBX + 0x4]
004139e0 : CMP EAX,0x8
004139e3 : JC 0x004139e9
004139e5 : MOV EAX,dword ptr [EDI]
004139e7 : JMP 0x004139eb
004139e9 : MOV EAX,EDI
004139eb : LEA ESI,[EAX + ECX*0x2]
004139ee : MOV EDI,EDI
004139f0 : MOV ECX,dword ptr [EBP + 0x10]
004139f3 : MOV EAX,dword ptr [EBP + 0xc]
004139f6 : MOVZX EDX,word ptr [ESI]
004139f9 : LEA ESP,[ESP]
00413a00 : CMP word ptr [EAX],DX
00413a03 : JZ 0x00413a1d
00413a05 : ADD EAX,0x2
00413a08 : SUB ECX,0x1
00413a0b : JNZ 0x00413a00
00413a0d : MOV ECX,EBX
00413a0f : CALL 0x00404a10
00413a14 : CMP ESI,EAX
00413a16 : JZ 0x00413a41
00413a18 : SUB ESI,0x2
00413a1b : JMP 0x004139f0
00413a1d : CMP dword ptr [EBP + 0x8],0x8
00413a21 : JC 0x00413a32
00413a23 : MOV ECX,dword ptr [EDI]
00413a25 : MOV EAX,ESI
00413a27 : POP EDI
00413a28 : SUB EAX,ECX
00413a2a : POP ESI
00413a2b : SAR EAX,0x1
00413a2d : POP EBX
00413a2e : POP EBP
00413a2f : RET 0xc
00413a32 : MOV ECX,EDI
00413a34 : MOV EAX,ESI
00413a36 : POP EDI
00413a37 : SUB EAX,ECX
00413a39 : POP ESI
00413a3a : SAR EAX,0x1
00413a3c : POP EBX
00413a3d : POP EBP
00413a3e : RET 0xc
00413a41 : POP EDI
00413a42 : POP ESI
00413a43 : OR EAX,0xffffffff
00413a46 : POP EBX
00413a47 : POP EBP
00413a48 : RET 0xc
