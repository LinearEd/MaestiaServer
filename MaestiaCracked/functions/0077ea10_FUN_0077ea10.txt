PROGRAM  : Maestia.exe
FUNCTION : FUN_0077ea10
ENTRY    : 0077ea10
BODY     : [[0077ea10, 0077ecfa]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0077ea10(void)

{
  int *piVar1;
  uint uVar2;
  int in_ECX;
  int iVar3;
  int *piVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  int *piStack_124;
  char *local_120;
  float *pfStack_11c;
  undefined4 uStack_118;
  int *piStack_114;
  char *local_110;
  float *local_10c;
  undefined1 *puStack_108;
  uint uStack_104;
  float local_dc;
  float local_d8;
  float local_d4;
  float local_d0;
  undefined4 uStack_bc;
  undefined4 uStack_b8;
  undefined4 uStack_b4;
  undefined4 uStack_b0;
  undefined1 *local_ac;
  undefined1 local_a8 [8];
  undefined1 local_a0 [32];
  undefined1 local_80 [32];
  undefined **ppuStack_60;
  undefined4 auStack_5c [18];
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b1930f;
  local_14 = ExceptionList;
  uStack_104 = DAT_00d66fa0 ^ (uint)&stack0xffffff00;
  ExceptionList = &local_14;
  piVar1 = *(int **)(*(int *)(*(int *)(in_ECX + 0x14) + 0x14) + 0x1c);
  if (piVar1 != (int *)0x0) {
    piVar4 = *(int **)(in_ECX + 8);
    if (piVar4 != *(int **)(in_ECX + 0xc)) {
      do {
        puStack_108 = (undefined1 *)*piVar4;
        local_ac = (undefined1 *)&piStack_124;
        local_10c = (float *)0x7;
        local_110 = (char *)0x0;
        local_120 = (char *)((uint)local_120 & 0xffff0000);
        FUN_00405eb0(*(int *)(*(int *)((int)puStack_108 + 0x18) + 4) + 8,0,0xffffffff);
        local_c = 0xffffffff;
        FUN_00438060();
        local_c = 1;
        puStack_108 = local_a0;
        local_10c = (float *)0x77ead1;
        FUN_00452dc0();
        local_c._0_1_ = 2;
        puStack_108 = local_a0;
        local_10c = (float *)local_a8;
        local_110 = (char *)(in_ECX + 0x48);
        piStack_114 = (int *)0x77eaf0;
        FUN_004645b0();
        local_c = CONCAT31(local_c._1_3_,1);
        puStack_108 = local_a0;
        local_10c = (float *)0x77eb02;
        FUN_0044cb00();
        local_c = 0xffffffff;
        local_10c = (float *)0x77eb15;
        puStack_108 = local_80;
        FUN_0044cb00();
        piVar4 = piVar4 + 1;
      } while (piVar4 != *(int **)(in_ECX + 0xc));
    }
    local_d4 = 0.0;
    local_d0 = 0.0;
    local_dc = 1.0 / (*(float *)(DAT_017251ac + 0x218) - *(float *)(DAT_017251ac + 0x214));
    puStack_108 = (undefined1 *)0x10;
    local_d8 = local_dc * -1.0;
    local_10c = &local_dc;
    local_dc = local_dc * *(float *)(DAT_017251ac + 0x218);
    local_110 = "vFogParam";
    uStack_118 = 0x77eb9b;
    piStack_114 = piVar1;
    (**(code **)(*piVar1 + 0x50))();
    uVar2 = *(uint *)(DAT_017251ac + 0x20c);
    local_dc = (float)(uVar2 >> 0x10 & 0xff) * 0.003921569;
    local_d8 = (float)(uVar2 >> 8 & 0xff) * 0.003921569;
    local_d4 = (float)(uVar2 & 0xff) * 0.003921569;
    uStack_118 = 0x10;
    pfStack_11c = &local_dc;
    local_d0 = (float)(uVar2 >> 0x18) * 0.003921569;
    local_120 = "vFogColor";
    piStack_124 = piVar1;
    (**(code **)(*piVar1 + 0x50))();
    if (DAT_017251ac == -0x1a8) {
      puVar5 = (undefined4 *)0x0;
    }
    else {
      puVar5 = (undefined4 *)(DAT_017251ac + 0x1ac);
    }
    puVar6 = auStack_5c;
    for (iVar3 = 0x11; iVar3 != 0; iVar3 = iVar3 + -1) {
      *puVar6 = *puVar5;
      puVar5 = puVar5 + 1;
      puVar6 = puVar6 + 1;
    }
    ppuStack_60 = &PTR_FUN_00cd083c;
    local_c = 3;
    if (DAT_017251c4 != -4) {
      puStack_108 = (undefined1 *)0x10;
      uStack_b8 = 0;
      uStack_b4 = 0;
      uStack_b0 = 0;
      local_10c = (float *)&uStack_bc;
      uStack_bc = 0x43480000;
      local_110 = "vRenderParam";
      uStack_118 = 0x77eca7;
      piStack_114 = piVar1;
      (**(code **)(*piVar1 + 0x50))();
      uStack_118 = 0x10;
      pfStack_11c = (float *)&stack0xffffff04;
      local_120 = "vSpecular";
      piStack_124 = piVar1;
      (**(code **)(*piVar1 + 0x50))();
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
0077ea10 : PUSH EBP
0077ea11 : MOV EBP,ESP
0077ea13 : AND ESP,0xfffffff8
0077ea16 : PUSH -0x1
0077ea18 : PUSH 0xb1930f
0077ea1d : MOV EAX,FS:[0x0]
0077ea23 : PUSH EAX
0077ea24 : SUB ESP,0xe0
0077ea2a : PUSH EBX
0077ea2b : PUSH ESI
0077ea2c : PUSH EDI
0077ea2d : MOV EAX,[0x00d66fa0]
0077ea32 : XOR EAX,ESP
0077ea34 : PUSH EAX
0077ea35 : LEA EAX,[ESP + 0xf0]
0077ea3c : MOV FS:[0x0],EAX
0077ea42 : MOV dword ptr [ESP + 0x10],ECX
0077ea46 : MOV EAX,dword ptr [ECX + 0x14]
0077ea49 : MOV EAX,dword ptr [EAX + 0x14]
0077ea4c : MOV ESI,dword ptr [EAX + 0x1c]
0077ea4f : MOV dword ptr [ESP + 0x14],ESI
0077ea53 : TEST ESI,ESI
0077ea55 : JZ 0x0077ece3
0077ea5b : MOV EBX,dword ptr [ECX + 0x8]
0077ea5e : MOV ECX,dword ptr [ECX + 0xc]
0077ea61 : CMP EBX,ECX
0077ea63 : JZ 0x0077eb29
0077ea69 : MOV EAX,dword ptr [EBX]
0077ea6b : MOV ECX,dword ptr [EAX + 0x18]
0077ea6e : MOV ECX,dword ptr [ECX + 0x4]
0077ea71 : PUSH EAX
0077ea72 : SUB ESP,0x1c
0077ea75 : LEA EAX,[ECX + 0x8]
0077ea78 : MOV ECX,ESP
0077ea7a : MOV dword ptr [ESP + 0x78],ESP
0077ea7e : PUSH -0x1
0077ea80 : XOR ESI,ESI
0077ea82 : PUSH ESI
0077ea83 : XOR EDX,EDX
0077ea85 : MOV dword ptr [ECX + 0x18],0x7
0077ea8c : MOV dword ptr [ECX + 0x14],ESI
0077ea8f : PUSH EAX
0077ea90 : MOV word ptr [ECX + 0x4],DX
0077ea94 : CALL 0x00405eb0
0077ea99 : MOV dword ptr [ESP + 0x118],ESI
0077eaa0 : MOV dword ptr [ESP + 0x118],0xffffffff
0077eaab : LEA ESI,[ESP + 0xa4]
0077eab2 : CALL 0x00438060
0077eab7 : ADD ESP,0x20
0077eaba : MOV dword ptr [ESP + 0xf8],0x1
0077eac5 : LEA ECX,[ESP + 0x64]
0077eac9 : PUSH ECX
0077eaca : MOV EDI,EAX
0077eacc : CALL 0x00452dc0
0077ead1 : MOV byte ptr [ESP + 0xf8],0x2
0077ead9 : LEA EDX,[ESP + 0x64]
0077eadd : PUSH EDX
0077eade : LEA EAX,[ESP + 0x60]
0077eae2 : PUSH EAX
0077eae3 : MOV EAX,dword ptr [ESP + 0x18]
0077eae7 : ADD EAX,0x48
0077eaea : PUSH EAX
0077eaeb : CALL 0x004645b0
0077eaf0 : MOV byte ptr [ESP + 0xf8],0x1
0077eaf8 : LEA ECX,[ESP + 0x64]
0077eafc : PUSH ECX
0077eafd : CALL 0x0044cb00
0077eb02 : MOV dword ptr [ESP + 0xf8],0xffffffff
0077eb0d : MOV EDX,ESI
0077eb0f : PUSH EDX
0077eb10 : CALL 0x0044cb00
0077eb15 : MOV EAX,dword ptr [ESP + 0x10]
0077eb19 : ADD EBX,0x4
0077eb1c : CMP EBX,dword ptr [EAX + 0xc]
0077eb1f : JNZ 0x0077ea69
0077eb25 : MOV ESI,dword ptr [ESP + 0x14]
0077eb29 : XORPS XMM0,XMM0
0077eb2c : MOV EAX,[0x017251ac]
0077eb31 : MOVSS dword ptr [ESP + 0x28],XMM0
0077eb37 : MOVSS dword ptr [ESP + 0x2c],XMM0
0077eb3d : MOVSS dword ptr [ESP + 0x30],XMM0
0077eb43 : MOVSS dword ptr [ESP + 0x34],XMM0
0077eb49 : MOVSS XMM1,dword ptr [EAX + 0x218]
0077eb51 : MOVSS XMM0,dword ptr [EAX + 0x214]
0077eb59 : MOVAPS XMM2,XMM1
0077eb5c : SUBSS XMM2,XMM0
0077eb60 : MOVSS XMM0,dword ptr [0x00c10fc4]
0077eb68 : DIVSS XMM0,XMM2
0077eb6c : PUSH 0x10
0077eb6e : MOVAPS XMM2,XMM0
0077eb71 : MULSS XMM0,dword ptr [0x00cdf0d0]
0077eb79 : LEA EDX,[ESP + 0x2c]
0077eb7d : PUSH EDX
0077eb7e : MULSS XMM2,XMM1
0077eb82 : MOVSS dword ptr [ESP + 0x30],XMM2
0077eb88 : MOVSS dword ptr [ESP + 0x34],XMM0
0077eb8e : MOV ECX,dword ptr [ESI]
0077eb90 : MOV EAX,dword ptr [ECX + 0x50]
0077eb93 : PUSH 0xc10c74
0077eb98 : PUSH ESI
0077eb99 : CALL EAX
0077eb9b : MOV ECX,dword ptr [0x017251ac]
0077eba1 : MOV EAX,dword ptr [ECX + 0x20c]
0077eba7 : MOVSS XMM0,dword ptr [0x00cdf178]
0077ebaf : MOV EDX,EAX
0077ebb1 : SHR EDX,0x10
0077ebb4 : MOVZX ECX,DL
0077ebb7 : MOV EDX,EAX
0077ebb9 : SHR EDX,0x8
0077ebbc : CVTSI2SS XMM1,ECX
0077ebc0 : MULSS XMM1,XMM0
0077ebc4 : MOVSS dword ptr [ESP + 0x38],XMM1
0077ebca : MOVZX ECX,DL
0077ebcd : MOVZX EDX,AL
0077ebd0 : CVTSI2SS XMM1,ECX
0077ebd4 : MULSS XMM1,XMM0
0077ebd8 : MOVSS dword ptr [ESP + 0x3c],XMM1
0077ebde : CVTSI2SS XMM1,EDX
0077ebe2 : MULSS XMM1,XMM0
0077ebe6 : MOVSS dword ptr [ESP + 0x40],XMM1
0077ebec : SHR EAX,0x18
0077ebef : PUSH 0x10
0077ebf1 : CVTSI2SS XMM1,EAX
0077ebf5 : LEA ECX,[ESP + 0x3c]
0077ebf9 : PUSH ECX
0077ebfa : MULSS XMM1,XMM0
0077ebfe : MOVSS dword ptr [ESP + 0x4c],XMM1
0077ec04 : MOV EAX,dword ptr [ESI]
0077ec06 : MOV EDX,dword ptr [EAX + 0x50]
0077ec09 : PUSH 0xc10d88
0077ec0e : PUSH ESI
0077ec0f : CALL EDX
0077ec11 : XORPS XMM0,XMM0
0077ec14 : MOV EAX,[0x017251ac]
0077ec19 : ADD EAX,0x1a8
0077ec1e : MOVSS dword ptr [ESP + 0x24],XMM0
0077ec24 : MOVSS dword ptr [ESP + 0x20],XMM0
0077ec2a : MOVSS dword ptr [ESP + 0x1c],XMM0
0077ec30 : MOVSS dword ptr [ESP + 0x18],XMM0
0077ec36 : JZ 0x0077ec3d
0077ec38 : LEA ESI,[EAX + 0x4]
0077ec3b : JMP 0x0077ec3f
0077ec3d : XOR ESI,ESI
0077ec3f : MOV ECX,0x11
0077ec44 : LEA EDI,[ESP + 0xa8]
0077ec4b : MOV EBX,0xcd083c
0077ec50 : MOVSD.REP ES:EDI,ESI
0077ec52 : MOV dword ptr [ESP + 0xa4],EBX
0077ec59 : MOV dword ptr [ESP + 0xf8],0x3
0077ec64 : MOV ESI,dword ptr [0x017251c4]
0077ec6a : ADD ESI,0x4
0077ec6d : JZ 0x0077ecd1
0077ec6f : MOV EDI,dword ptr [ESP + 0x14]
0077ec73 : PUSH 0x10
0077ec75 : MOVSS dword ptr [ESP + 0x50],XMM0
0077ec7b : MOVSS dword ptr [ESP + 0x54],XMM0
0077ec81 : MOVSS dword ptr [ESP + 0x58],XMM0
0077ec87 : MOVSS XMM0,dword ptr [0x00c10f24]
0077ec8f : LEA ECX,[ESP + 0x4c]
0077ec93 : PUSH ECX
0077ec94 : MOVSS dword ptr [ESP + 0x50],XMM0
0077ec9a : MOV EAX,dword ptr [EDI]
0077ec9c : MOV EDX,dword ptr [EAX + 0x50]
0077ec9f : PUSH 0xc10d94
0077eca4 : PUSH EDI
0077eca5 : CALL EDX
0077eca7 : MOVQ XMM0,qword ptr [ESI + 0x64]
0077ecac : PUSH 0x10
0077ecae : MOVQ qword ptr [ESP + 0x1c],XMM0
0077ecb4 : MOVQ XMM0,qword ptr [ESI + 0x6c]
0077ecb9 : LEA ECX,[ESP + 0x1c]
0077ecbd : PUSH ECX
0077ecbe : MOVQ qword ptr [ESP + 0x28],XMM0
0077ecc4 : MOV EAX,dword ptr [EDI]
0077ecc6 : MOV EDX,dword ptr [EAX + 0x50]
0077ecc9 : PUSH 0xc10da4
0077ecce : PUSH EDI
0077eccf : CALL EDX
0077ecd1 : MOV dword ptr [ESP + 0xf8],0xffffffff
0077ecdc : MOV dword ptr [ESP + 0xa4],EBX
0077ece3 : MOV ECX,dword ptr [ESP + 0xf0]
0077ecea : MOV dword ptr FS:[0x0],ECX
0077ecf1 : POP ECX
0077ecf2 : POP EDI
0077ecf3 : POP ESI
0077ecf4 : POP EBX
0077ecf5 : MOV ESP,EBP
0077ecf7 : POP EBP
0077ecf8 : RET 0x4
