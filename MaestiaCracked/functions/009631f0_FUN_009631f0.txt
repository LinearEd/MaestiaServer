PROGRAM  : Maestia.exe
FUNCTION : FUN_009631f0
ENTRY    : 009631f0
BODY     : [[009631f0, 009632f4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009631f0(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int iVar3;
  int in_ECX;
  
  FUN_0045cd30(*(undefined4 *)(*(int *)(in_ECX + 0x54) + 4));
  *(int *)(*(int *)(in_ECX + 0x54) + 4) = *(int *)(in_ECX + 0x54);
  *(undefined4 *)(in_ECX + 0x58) = 0;
  *(undefined4 *)*(undefined4 *)(in_ECX + 0x54) = *(undefined4 *)(in_ECX + 0x54);
  *(int *)(*(int *)(in_ECX + 0x54) + 8) = *(int *)(in_ECX + 0x54);
  FUN_0045cd30(*(undefined4 *)(*(int *)(in_ECX + 0x60) + 4));
  *(int *)(*(int *)(in_ECX + 0x60) + 4) = *(int *)(in_ECX + 0x60);
  *(undefined4 *)(in_ECX + 100) = 0;
  *(undefined4 *)*(undefined4 *)(in_ECX + 0x60) = *(undefined4 *)(in_ECX + 0x60);
  *(int *)(*(int *)(in_ECX + 0x60) + 8) = *(int *)(in_ECX + 0x60);
  *(undefined2 *)(in_ECX + 0x8a) = 0xffff;
  *(undefined1 *)(in_ECX + 0x68) = 0;
  (**(code **)(**(int **)(in_ECX + 0x78) + 0x20))();
  if ((*DAT_00da9894 != 0) &&
     (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
    (**(code **)*puVar1)("ShopInitialize");
  }
  if ((*DAT_00da9894 != 0) &&
     (puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar1 != (undefined4 *)0x0)) {
    (**(code **)*puVar1)("ShopClose");
  }
  piVar2 = *(int **)(*DAT_00da9894 + 0x1c4);
  if ((piVar2 != (int *)0x0) && (*(char *)((int)piVar2 + 0x32) != '\0')) {
    (**(code **)(*piVar2 + 0x20))();
  }
  iVar3 = FUN_008eb760(0x20);
  if (iVar3 != 0) {
    FUN_008eb6c0(0x20);
  }
  *(undefined4 *)(DAT_017247f0 + 0x10) = 0;
  FUN_009f2920();
  FUN_008f76d0();
  return;
}



============================================================
DISASSEMBLY
============================================================
009631f0 : PUSH EBX
009631f1 : MOV EBX,ECX
009631f3 : MOV EAX,dword ptr [EBX + 0x54]
009631f6 : MOV ECX,dword ptr [EAX + 0x4]
009631f9 : PUSH ESI
009631fa : LEA ESI,[EBX + 0x50]
009631fd : PUSH EDI
009631fe : PUSH ECX
009631ff : MOV ECX,ESI
00963201 : CALL 0x0045cd30
00963206 : MOV EAX,dword ptr [ESI + 0x4]
00963209 : MOV dword ptr [EAX + 0x4],EAX
0096320c : MOV EAX,dword ptr [ESI + 0x4]
0096320f : XOR EDI,EDI
00963211 : MOV dword ptr [ESI + 0x8],EDI
00963214 : MOV dword ptr [EAX],EAX
00963216 : MOV ESI,dword ptr [ESI + 0x4]
00963219 : MOV dword ptr [ESI + 0x8],ESI
0096321c : MOV EDX,dword ptr [EBX + 0x60]
0096321f : MOV EAX,dword ptr [EDX + 0x4]
00963222 : LEA ESI,[EBX + 0x5c]
00963225 : PUSH EAX
00963226 : MOV ECX,ESI
00963228 : CALL 0x0045cd30
0096322d : MOV EAX,dword ptr [ESI + 0x4]
00963230 : MOV dword ptr [EAX + 0x4],EAX
00963233 : MOV EAX,dword ptr [ESI + 0x4]
00963236 : MOV dword ptr [ESI + 0x8],EDI
00963239 : MOV dword ptr [EAX],EAX
0096323b : MOV ESI,dword ptr [ESI + 0x4]
0096323e : MOV dword ptr [ESI + 0x8],ESI
00963241 : MOV ECX,0xffff
00963246 : MOV word ptr [EBX + 0x8a],CX
0096324d : MOV ECX,dword ptr [EBX + 0x78]
00963250 : MOV byte ptr [EBX + 0x68],0x0
00963254 : MOV EDX,dword ptr [ECX]
00963256 : MOV EAX,dword ptr [EDX + 0x20]
00963259 : CALL EAX
0096325b : MOV ECX,dword ptr [0x00da9894]
00963261 : MOV EAX,dword ptr [ECX]
00963263 : CMP EAX,EDI
00963265 : JZ 0x0096327e
00963267 : MOV EAX,dword ptr [EAX + 0x114]
0096326d : CMP EAX,EDI
0096326f : JZ 0x0096327e
00963271 : MOV EDX,dword ptr [EAX]
00963273 : MOV ECX,EAX
00963275 : MOV EAX,dword ptr [EDX]
00963277 : PUSH 0xc7a3b4
0096327c : CALL EAX
0096327e : MOV ECX,dword ptr [0x00da9894]
00963284 : MOV EAX,dword ptr [ECX]
00963286 : CMP EAX,EDI
00963288 : JZ 0x0096329f
0096328a : MOV ECX,dword ptr [EAX + 0x114]
00963290 : CMP ECX,EDI
00963292 : JZ 0x0096329f
00963294 : MOV EDX,dword ptr [ECX]
00963296 : MOV EAX,dword ptr [EDX]
00963298 : PUSH 0xc7a3c4
0096329d : CALL EAX
0096329f : MOV ECX,dword ptr [0x00da9894]
009632a5 : MOV EDX,dword ptr [ECX]
009632a7 : MOV ECX,dword ptr [EDX + 0x1c4]
009632ad : CMP ECX,EDI
009632af : JZ 0x009632be
009632b1 : CMP byte ptr [ECX + 0x32],0x0
009632b5 : JZ 0x009632be
009632b7 : MOV EAX,dword ptr [ECX]
009632b9 : MOV EDX,dword ptr [EAX + 0x20]
009632bc : CALL EDX
009632be : MOV EAX,[0x00da9894]
009632c3 : MOV ESI,dword ptr [EAX]
009632c5 : PUSH 0x20
009632c7 : MOV EAX,ESI
009632c9 : CALL 0x008eb760
009632ce : TEST EAX,EAX
009632d0 : JZ 0x009632dd
009632d2 : PUSH 0x20
009632d4 : MOV EDI,ESI
009632d6 : CALL 0x008eb6c0
009632db : XOR EDI,EDI
009632dd : MOV ECX,dword ptr [0x017247f0]
009632e3 : MOV dword ptr [ECX + 0x10],EDI
009632e6 : CALL 0x009f2920
009632eb : POP EDI
009632ec : POP ESI
009632ed : MOV ECX,EBX
009632ef : POP EBX
009632f0 : JMP 0x008f76d0
