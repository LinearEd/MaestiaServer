PROGRAM  : Maestia.exe
FUNCTION : FUN_009eddb0
ENTRY    : 009eddb0
BODY     : [[009eddb0, 009edf3d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009eddb0(int param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  bool bVar4;
  ushort uVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  
  piVar1 = *(int **)(param_1 + 0xc);
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined4 *)(param_1 + 0x30) = 0;
  piVar2 = (int *)*piVar1;
  while (piVar2 != piVar1) {
    piVar1 = (int *)piVar2[4];
    if (piVar1 == (int *)0x0) {
      FUN_008018d0(L"AvaItemTypeIcon::UpdateItemCount() pItem NULL");
    }
    else if (piVar1[2] == 0x12345668) {
      if (piVar1[10] != 0) {
        iVar3 = *(int *)(piVar1[10] + 0x2c);
        iVar6 = FUN_008eb580();
        if ((((iVar6 == 0) || (iVar7 = FUN_009f2840(*(undefined4 *)(iVar6 + 0x60)), iVar7 == 0)) ||
            (*(int *)(iVar7 + 0x28) == 0)) ||
           (((iVar7 = *(int *)(*(int *)(iVar7 + 0x28) + 0x2c), iVar7 != 0x40 && (iVar7 != 0x41)) &&
            ((iVar7 != 0x42 && (iVar7 != 0x94)))))) {
          bVar4 = false;
        }
        else {
          bVar4 = true;
        }
        if ((iVar3 == 0) || ((iVar6 != 0 && (!bVar4)))) {
          uVar8 = (**(code **)(*piVar1 + 0x40))();
          *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x30) + (uVar8 & 0xffff);
          if (DAT_017247f8 != *(int *)(param_1 + 0x30)) {
            DAT_017247f8 = *(int *)(param_1 + 0x30);
            *(undefined1 *)(param_1 + 0x34) = 1;
          }
        }
        uVar8 = (**(code **)(*piVar1 + 0x40))();
        *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x2c) + (uVar8 & 0xffff);
      }
    }
    else {
      FUN_008018d0(L"AvaItemTypeIcon::UpdateItemCount() pItem dangling pointer");
    }
    FUN_00416210();
    piVar1 = *(int **)(param_1 + 0xc);
  }
  if (*(int *)(param_1 + 0x18) == 2) {
    iVar3 = *(int *)(*DAT_00da9894 + 0x200);
    if (iVar3 != 0) {
      uVar5 = FUN_008bfc90(iVar3,*(undefined4 *)(param_1 + 0x1c));
      if (uVar5 != 0) {
        *(undefined1 *)(param_1 + 0x34) = 1;
        *(uint *)(param_1 + 0x30) = (uint)uVar5;
        FUN_009ed390();
        return;
      }
    }
  }
  else {
    iVar3 = *(int *)(*DAT_00da9894 + 0x14c);
    if ((iVar3 != 0) && (*(int *)(param_1 + 0x18) == 1)) {
      FUN_00a92ec0(iVar3,*(undefined4 *)(param_1 + 0x1c),*(undefined4 *)(param_1 + 0x30));
    }
  }
  FUN_009ed390();
  return;
}



============================================================
DISASSEMBLY
============================================================
009eddb0 : PUSH EBP
009eddb1 : MOV EBP,ESP
009eddb3 : SUB ESP,0x8
009eddb6 : PUSH EBX
009eddb7 : MOV EBX,dword ptr [EBP + 0x8]
009eddba : MOV ECX,dword ptr [EBX + 0xc]
009eddbd : XOR EAX,EAX
009eddbf : MOV dword ptr [EBX + 0x2c],EAX
009eddc2 : MOV dword ptr [EBX + 0x30],EAX
009eddc5 : MOV EAX,dword ptr [ECX]
009eddc7 : PUSH ESI
009eddc8 : PUSH EDI
009eddc9 : MOV dword ptr [EBP + -0x4],EAX
009eddcc : CMP EAX,ECX
009eddce : JZ 0x009edecb
009eddd4 : MOV ESI,dword ptr [EAX + 0x10]
009eddd7 : TEST ESI,ESI
009eddd9 : JNZ 0x009eddf3
009edddb : MOV ESI,dword ptr [0x00da98e8]
009edde1 : PUSH 0xc9fcb0
009edde6 : CALL 0x008018d0
009eddeb : ADD ESP,0x4
009eddee : JMP 0x009edeb7
009eddf3 : CMP dword ptr [ESI + 0x8],0x12345668
009eddfa : JZ 0x009ede14
009eddfc : MOV ESI,dword ptr [0x00da98e8]
009ede02 : PUSH 0xc9fd30
009ede07 : CALL 0x008018d0
009ede0c : ADD ESP,0x4
009ede0f : JMP 0x009edeb7
009ede14 : MOV EAX,dword ptr [ESI + 0x28]
009ede17 : TEST EAX,EAX
009ede19 : JZ 0x009edeb7
009ede1f : MOV EAX,dword ptr [EAX + 0x2c]
009ede22 : MOV dword ptr [EBP + -0x8],EAX
009ede25 : MOV EDI,EAX
009ede27 : MOV EAX,[0x00da9894]
009ede2c : MOV EAX,dword ptr [EAX]
009ede2e : MOV byte ptr [EBP + 0xb],0x0
009ede32 : CALL 0x008eb580
009ede37 : MOV EDI,EAX
009ede39 : TEST EDI,EDI
009ede3b : JZ 0x009ede74
009ede3d : MOV ECX,dword ptr [EDI + 0x60]
009ede40 : MOV EAX,dword ptr [EDI + 0x5c]
009ede43 : PUSH ECX
009ede44 : MOV ECX,dword ptr [EBX + 0x4]
009ede47 : CALL 0x009f2840
009ede4c : TEST EAX,EAX
009ede4e : JZ 0x009ede74
009ede50 : MOV EAX,dword ptr [EAX + 0x28]
009ede53 : TEST EAX,EAX
009ede55 : JZ 0x009ede74
009ede57 : MOV EAX,dword ptr [EAX + 0x2c]
009ede5a : CMP EAX,0x40
009ede5d : JZ 0x009ede70
009ede5f : CMP EAX,0x41
009ede62 : JZ 0x009ede70
009ede64 : CMP EAX,0x42
009ede67 : JZ 0x009ede70
009ede69 : CMP EAX,0x94
009ede6e : JNZ 0x009ede74
009ede70 : MOV AL,0x1
009ede72 : JMP 0x009ede77
009ede74 : MOV AL,byte ptr [EBP + 0xb]
009ede77 : CMP dword ptr [EBP + -0x8],0x0
009ede7b : JZ 0x009ede85
009ede7d : TEST EDI,EDI
009ede7f : JZ 0x009edea8
009ede81 : TEST AL,AL
009ede83 : JNZ 0x009edea8
009ede85 : MOV EDX,dword ptr [ESI]
009ede87 : MOV EAX,dword ptr [EDX + 0x40]
009ede8a : MOV ECX,ESI
009ede8c : CALL EAX
009ede8e : MOVZX ECX,AX
009ede91 : ADD dword ptr [EBX + 0x30],ECX
009ede94 : MOV EAX,dword ptr [EBX + 0x30]
009ede97 : CMP dword ptr [0x017247f8],EAX
009ede9d : JZ 0x009edea8
009ede9f : MOV [0x017247f8],EAX
009edea4 : MOV byte ptr [EBX + 0x34],0x1
009edea8 : MOV EDX,dword ptr [ESI]
009edeaa : MOV EAX,dword ptr [EDX + 0x40]
009edead : MOV ECX,ESI
009edeaf : CALL EAX
009edeb1 : MOVZX ECX,AX
009edeb4 : ADD dword ptr [EBX + 0x2c],ECX
009edeb7 : LEA EDX,[EBP + -0x4]
009edeba : CALL 0x00416210
009edebf : MOV EAX,dword ptr [EBP + -0x4]
009edec2 : CMP EAX,dword ptr [EBX + 0xc]
009edec5 : JNZ 0x009eddd4
009edecb : MOV ECX,dword ptr [EBX + 0x18]
009edece : MOV EDX,dword ptr [0x00da9894]
009eded4 : MOV EAX,dword ptr [EDX]
009eded6 : CMP ECX,0x2
009eded9 : JNZ 0x009edf11
009ededb : MOV ECX,dword ptr [EAX + 0x200]
009edee1 : TEST ECX,ECX
009edee3 : JZ 0x009edf2e
009edee5 : MOV EAX,dword ptr [EBX + 0x1c]
009edee8 : PUSH EAX
009edee9 : PUSH ECX
009edeea : CALL 0x008bfc90
009edeef : MOVZX EAX,AX
009edef2 : TEST AX,AX
009edef5 : JZ 0x009edf2e
009edef7 : MOVZX ECX,AX
009edefa : MOV EDI,EBX
009edefc : MOV byte ptr [EBX + 0x34],0x1
009edf00 : MOV dword ptr [EBX + 0x30],ECX
009edf03 : CALL 0x009ed390
009edf08 : POP EDI
009edf09 : POP ESI
009edf0a : POP EBX
009edf0b : MOV ESP,EBP
009edf0d : POP EBP
009edf0e : RET 0x4
009edf11 : MOV EAX,dword ptr [EAX + 0x14c]
009edf17 : TEST EAX,EAX
009edf19 : JZ 0x009edf2e
009edf1b : CMP ECX,0x1
009edf1e : JNZ 0x009edf2e
009edf20 : MOV ECX,dword ptr [EBX + 0x30]
009edf23 : MOV EDX,dword ptr [EBX + 0x1c]
009edf26 : PUSH ECX
009edf27 : PUSH EDX
009edf28 : PUSH EAX
009edf29 : CALL 0x00a92ec0
009edf2e : MOV EDI,EBX
009edf30 : CALL 0x009ed390
009edf35 : POP EDI
009edf36 : POP ESI
009edf37 : POP EBX
009edf38 : MOV ESP,EBP
009edf3a : POP EBP
009edf3b : RET 0x4
