PROGRAM  : Maestia.exe
FUNCTION : FUN_00995840
ENTRY    : 00995840
BODY     : [[00995840, 00995a04]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00995840(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined4 ***pppuVar3;
  int iVar4;
  int iVar5;
  undefined4 local_38;
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b21047;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  if ((*DAT_00da9894 == 0) || (*(int *)(*DAT_00da9894 + 0x1d4) == 0)) goto LAB_009959e7;
  FUN_00406460();
  local_8 = 0;
  iVar5 = 0;
  local_38 = 0;
  if (in_ECX == 1) {
    iVar5 = *(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 400) -
            *(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 0x18c);
LAB_009958e5:
    iVar5 = iVar5 >> 2;
    if (0 < iVar5) {
      FUN_00638370((double)((float)iVar5 * 0.16666667),uVar1);
      local_38 = FUN_0063b380();
    }
  }
  else if (in_ECX == 2) {
    iVar5 = *(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 0x1a0) -
            *(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 0x19c);
    goto LAB_009958e5;
  }
  iVar5 = iVar5 + *(int *)(param_1 + 0x88) * -6;
  iVar4 = iVar5 + -6;
  if (iVar4 < 0) {
    iVar4 = 0;
  }
  if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x1d4) != 0)) {
    uVar2 = FUN_008d4bf0(in_ECX,iVar4,iVar5);
    local_8._0_1_ = 1;
    FUN_00405eb0(uVar2,0,0xffffffff);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00406560();
  }
  iVar5 = *DAT_00da9894;
  if ((iVar5 != 0) && (*(int *)(iVar5 + 0x114) != 0)) {
    pppuVar3 = (undefined4 ***)local_2c[0];
    if (local_18 < 8) {
      pppuVar3 = local_2c;
    }
    (**(code **)(**(int **)(iVar5 + 0x114) + 4))
              (*(int **)(iVar5 + 0x114),"mc_gachabox.SetGachaTypeList","%d,%ls,%d,%d",
               *(undefined2 *)(param_1 + 0x38),pppuVar3,*(undefined4 *)(param_1 + 0x88),local_38);
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
LAB_009959e7:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00995840 : PUSH EBP
00995841 : MOV EBP,ESP
00995843 : PUSH -0x1
00995845 : PUSH 0xb21047
0099584a : MOV EAX,FS:[0x0]
00995850 : PUSH EAX
00995851 : SUB ESP,0x44
00995854 : MOV EAX,[0x00d66fa0]
00995859 : XOR EAX,EBP
0099585b : MOV dword ptr [EBP + -0x10],EAX
0099585e : PUSH EBX
0099585f : PUSH ESI
00995860 : PUSH EDI
00995861 : PUSH EAX
00995862 : LEA EAX,[EBP + -0xc]
00995865 : MOV FS:[0x0],EAX
0099586b : MOV EDI,ECX
0099586d : MOV EAX,dword ptr [EBP + 0x8]
00995870 : MOV ECX,dword ptr [0x00da9894]
00995876 : MOV dword ptr [EBP + -0x30],EAX
00995879 : MOV EAX,dword ptr [ECX]
0099587b : XOR EBX,EBX
0099587d : CMP EAX,EBX
0099587f : JZ 0x009959e7
00995885 : CMP dword ptr [EAX + 0x1d4],EBX
0099588b : JZ 0x009959e7
00995891 : PUSH 0xc86f04
00995896 : LEA ECX,[EBP + -0x2c]
00995899 : CALL 0x00406460
0099589e : MOV dword ptr [EBP + -0x4],EBX
009958a1 : XOR ESI,ESI
009958a3 : MOV dword ptr [EBP + -0x34],EBX
009958a6 : CMP EDI,0x1
009958a9 : JNZ 0x009958c7
009958ab : MOV EDX,dword ptr [0x00da9894]
009958b1 : MOV EAX,dword ptr [EDX]
009958b3 : MOV EAX,dword ptr [EAX + 0x1d4]
009958b9 : MOV ESI,dword ptr [EAX + 0x190]
009958bf : SUB ESI,dword ptr [EAX + 0x18c]
009958c5 : JMP 0x009958e5
009958c7 : CMP EDI,0x2
009958ca : JNZ 0x00995914
009958cc : MOV EAX,[0x00da9894]
009958d1 : MOV EAX,dword ptr [EAX]
009958d3 : MOV EAX,dword ptr [EAX + 0x1d4]
009958d9 : MOV ESI,dword ptr [EAX + 0x1a0]
009958df : SUB ESI,dword ptr [EAX + 0x19c]
009958e5 : SAR ESI,0x2
009958e8 : CMP ESI,EBX
009958ea : JLE 0x00995914
009958ec : CVTSI2SS XMM0,ESI
009958f0 : MULSS XMM0,dword ptr [0x00cdf1cc]
009958f8 : SUB ESP,0x8
009958fb : CVTSS2SD XMM0,XMM0
009958ff : MOVSD qword ptr [ESP],XMM0
00995904 : CALL 0x00638370
00995909 : ADD ESP,0x8
0099590c : CALL 0x0063b380
00995911 : MOV dword ptr [EBP + -0x34],EAX
00995914 : MOV ECX,dword ptr [EBP + -0x30]
00995917 : MOV EAX,dword ptr [ECX + 0x88]
0099591d : LEA EDX,[EAX + EAX*0x2]
00995920 : MOV EAX,[0x00da9894]
00995925 : MOV EAX,dword ptr [EAX]
00995927 : ADD EDX,EDX
00995929 : SUB ESI,EDX
0099592b : LEA EDX,[ESI + -0x6]
0099592e : CMP EDX,EBX
00995930 : CMOVL EDX,EBX
00995933 : CMP EAX,EBX
00995935 : JZ 0x0099596d
00995937 : CMP dword ptr [EAX + 0x1d4],EBX
0099593d : JZ 0x0099596d
0099593f : MOV EAX,dword ptr [EAX + 0x1d4]
00995945 : PUSH ESI
00995946 : PUSH EDX
00995947 : PUSH EDI
00995948 : LEA EDX,[EBP + -0x50]
0099594b : MOV ECX,EAX
0099594d : CALL 0x008d4bf0
00995952 : MOV byte ptr [EBP + -0x4],0x1
00995956 : PUSH -0x1
00995958 : PUSH EBX
00995959 : PUSH EAX
0099595a : LEA ECX,[EBP + -0x2c]
0099595d : CALL 0x00405eb0
00995962 : MOV byte ptr [EBP + -0x4],BL
00995965 : LEA ECX,[EBP + -0x50]
00995968 : CALL 0x00406560
0099596d : MOV ECX,dword ptr [0x00da9894]
00995973 : MOV EAX,dword ptr [ECX]
00995975 : MOV ESI,0x8
0099597a : CMP EAX,EBX
0099597c : JZ 0x009959c3
0099597e : CMP dword ptr [EAX + 0x114],EBX
00995984 : JZ 0x009959c3
00995986 : MOV EAX,dword ptr [EAX + 0x114]
0099598c : MOV ECX,dword ptr [EBP + -0x28]
0099598f : CMP dword ptr [EBP + -0x14],ESI
00995992 : JNC 0x00995997
00995994 : LEA ECX,[EBP + -0x28]
00995997 : MOV EDI,dword ptr [EBP + -0x34]
0099599a : MOV EDX,dword ptr [EAX]
0099599c : MOV EDX,dword ptr [EDX + 0x4]
0099599f : PUSH EDI
009959a0 : MOV EDI,dword ptr [EBP + -0x30]
009959a3 : MOV EDI,dword ptr [EDI + 0x88]
009959a9 : PUSH EDI
009959aa : PUSH ECX
009959ab : MOV ECX,dword ptr [EBP + -0x30]
009959ae : MOVZX ECX,word ptr [ECX + 0x38]
009959b2 : PUSH ECX
009959b3 : PUSH 0xc86fe0
009959b8 : PUSH 0xc86ff0
009959bd : PUSH EAX
009959be : CALL EDX
009959c0 : ADD ESP,0x1c
009959c3 : MOV dword ptr [EBP + -0x4],0xffffffff
009959ca : CMP dword ptr [EBP + -0x14],ESI
009959cd : JC 0x009959d7
009959cf : MOV ECX,dword ptr [EBP + -0x28]
009959d2 : CALL 0x006f04e0
009959d7 : XOR EAX,EAX
009959d9 : MOV dword ptr [EBP + -0x14],0x7
009959e0 : MOV dword ptr [EBP + -0x18],EBX
009959e3 : MOV word ptr [EBP + -0x28],AX
009959e7 : MOV ECX,dword ptr [EBP + -0xc]
009959ea : MOV dword ptr FS:[0x0],ECX
009959f1 : POP ECX
009959f2 : POP EDI
009959f3 : POP ESI
009959f4 : POP EBX
009959f5 : MOV ECX,dword ptr [EBP + -0x10]
009959f8 : XOR ECX,EBP
009959fa : CALL 0x00633e6b
009959ff : MOV ESP,EBP
00995a01 : POP EBP
00995a02 : RET 0x4
