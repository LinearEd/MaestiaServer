PROGRAM  : Maestia.exe
FUNCTION : FUN_008d1a60
ENTRY    : 008d1a60
BODY     : [[008d1a60, 008d1c81]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_008d1a60(int param_1,int param_2,char param_3)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  wchar_t *pwVar8;
  
  if ((((*(char *)(*(int *)(param_1 + 0xb8) + 1) == '\0') && (param_2 != -1)) &&
      ((iVar3 = FUN_00a1a840(param_2), iVar3 != 0 ||
       ((iVar3 = FUN_00a1a6d0(param_2), iVar3 != 0 || (iVar3 = FUN_00a1a780(param_2), iVar3 != 0))))
      )) && ((*(char *)(iVar3 + 0x3ad) != '\0' && (cVar2 = FUN_008896f0(), cVar2 != '\0')))) {
    iVar3 = *(int *)(*DAT_00da9894 + 300);
    iVar4 = 0;
    if (iVar3 != 0) {
      iVar4 = *(int *)(iVar3 + 0xc);
    }
    iVar3 = *(int *)(*DAT_00da9894 + 300);
    iVar5 = 0;
    if (iVar3 != 0) {
      iVar5 = *(int *)(iVar3 + 0xc);
    }
    piVar1 = *(int **)(iVar5 + 0x4c + (uint)*(ushort *)(iVar4 + 0x5c) * 4);
    if ((piVar1 != (int *)0x0) &&
       (puVar7 = *(undefined4 **)(param_1 + 0x8c), puVar7 != *(undefined4 **)(param_1 + 0x90))) {
      do {
        uVar6 = *(undefined4 *)*puVar7;
        iVar3 = (**(code **)(*piVar1 + 0x98))(uVar6);
        if (((*(int *)(iVar3 + 8) != 0) &&
            (((cVar2 = FUN_009082d0(), cVar2 == '\0' &&
              (iVar3 = (**(code **)(*piVar1 + 0x74))(uVar6,piVar1[0x14]), iVar3 != 0)) &&
             (*(int *)(iVar3 + 0x24) != 0)))) &&
           (((*(char *)(*(int *)(iVar3 + 0x24) + 0xb1) != '\0' &&
             (iVar3 = FUN_004049b0(*(undefined4 *)(iVar3 + 0x10)), iVar3 != 0)) &&
            (*(char *)(iVar3 + 4) == '.')))) {
          if (param_3 == '\0') {
            if ((*(byte *)(iVar3 + 0x40) & 1) == 0) {
              FUN_00a364b0(param_2,0);
              FUN_00a0d390(DAT_017247d4,5);
              if (*(int *)(*DAT_00da9894 + 300) == 0) {
                FUN_00930240(0,0);
                pwVar8 = L"[AutoGameLOG] Others use a resurrection skill";
              }
              else {
                FUN_00930240(*(undefined4 *)(*(int *)(*DAT_00da9894 + 300) + 0xc),0);
                pwVar8 = L"[AutoGameLOG] Others use a resurrection skill";
              }
              goto LAB_008d1bfb;
            }
          }
          else if ((*(byte *)(iVar3 + 0x40) & 1) != 0) {
            FUN_00a364b0(param_2,0);
            FUN_00a0d390(DAT_017247d4,5);
            if (*(int *)(*DAT_00da9894 + 300) == 0) {
              uVar6 = 0;
            }
            else {
              uVar6 = *(undefined4 *)(*(int *)(*DAT_00da9894 + 300) + 0xc);
            }
            FUN_00930240(uVar6,0);
            pwVar8 = L"[AutoGameLOG] himself to use a resurrection skill";
LAB_008d1bfb:
            FUN_008018d0(pwVar8);
            *(undefined1 *)(param_1 + 0xca) = 1;
            DAT_00da9870 = timeGetTime();
            return 1;
          }
        }
        puVar7 = puVar7 + 1;
      } while (puVar7 != *(undefined4 **)(param_1 + 0x90));
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
008d1a60 : PUSH EBP
008d1a61 : MOV EBP,ESP
008d1a63 : AND ESP,0xfffffff8
008d1a66 : PUSH ECX
008d1a67 : PUSH EBX
008d1a68 : MOV EBX,dword ptr [EBP + 0x8]
008d1a6b : MOV EAX,dword ptr [EBX + 0xb8]
008d1a71 : CMP byte ptr [EAX + 0x1],0x0
008d1a75 : PUSH ESI
008d1a76 : PUSH EDI
008d1a77 : JNZ 0x008d1bde
008d1a7d : MOV ESI,dword ptr [EBP + 0xc]
008d1a80 : CMP ESI,-0x1
008d1a83 : JZ 0x008d1bde
008d1a89 : MOV ECX,dword ptr [0x00da93ec]
008d1a8f : PUSH ESI
008d1a90 : MOV EDI,ECX
008d1a92 : CALL 0x00a1a840
008d1a97 : TEST EAX,EAX
008d1a99 : JNZ 0x008d1ab7
008d1a9b : PUSH ESI
008d1a9c : MOV ECX,EDI
008d1a9e : CALL 0x00a1a6d0
008d1aa3 : TEST EAX,EAX
008d1aa5 : JNZ 0x008d1ab7
008d1aa7 : PUSH ESI
008d1aa8 : MOV ECX,EDI
008d1aaa : CALL 0x00a1a780
008d1aaf : TEST EAX,EAX
008d1ab1 : JZ 0x008d1bde
008d1ab7 : CMP byte ptr [EAX + 0x3ad],0x0
008d1abe : JZ 0x008d1bde
008d1ac4 : CALL 0x008896f0
008d1ac9 : TEST AL,AL
008d1acb : JZ 0x008d1bde
008d1ad1 : MOV ECX,dword ptr [0x00da9894]
008d1ad7 : MOV ECX,dword ptr [ECX]
008d1ad9 : MOV EAX,dword ptr [ECX + 0x12c]
008d1adf : TEST EAX,EAX
008d1ae1 : JZ 0x008d1ae6
008d1ae3 : MOV EAX,dword ptr [EAX + 0xc]
008d1ae6 : MOVZX EDX,word ptr [EAX + 0x5c]
008d1aea : MOV EAX,dword ptr [ECX + 0x12c]
008d1af0 : TEST EAX,EAX
008d1af2 : JZ 0x008d1af7
008d1af4 : MOV EAX,dword ptr [EAX + 0xc]
008d1af7 : MOVZX EDX,DX
008d1afa : MOV EDI,dword ptr [EAX + EDX*0x4 + 0x4c]
008d1afe : TEST EDI,EDI
008d1b00 : JZ 0x008d1bde
008d1b06 : MOV ESI,dword ptr [EBX + 0x8c]
008d1b0c : MOV dword ptr [ESP + 0xc],ESI
008d1b10 : CMP ESI,dword ptr [EBX + 0x90]
008d1b16 : JZ 0x008d1bde
008d1b1c : LEA ESP,[ESP]
008d1b20 : MOV EAX,dword ptr [ESI]
008d1b22 : MOV EBX,dword ptr [EAX]
008d1b24 : MOV EDX,dword ptr [EDI]
008d1b26 : MOV EAX,dword ptr [EDX + 0x98]
008d1b2c : PUSH EBX
008d1b2d : MOV ECX,EDI
008d1b2f : CALL EAX
008d1b31 : CMP dword ptr [EAX + 0x8],0x0
008d1b35 : JZ 0x008d1bc8
008d1b3b : MOV ESI,EAX
008d1b3d : CALL 0x009082d0
008d1b42 : TEST AL,AL
008d1b44 : JNZ 0x008d1bc4
008d1b46 : MOV EAX,dword ptr [EDI + 0x50]
008d1b49 : MOV EDX,dword ptr [EDI]
008d1b4b : PUSH EAX
008d1b4c : MOV EAX,dword ptr [EDX + 0x74]
008d1b4f : PUSH EBX
008d1b50 : MOV ECX,EDI
008d1b52 : CALL EAX
008d1b54 : TEST EAX,EAX
008d1b56 : JZ 0x008d1bc4
008d1b58 : MOV ECX,dword ptr [EAX + 0x24]
008d1b5b : TEST ECX,ECX
008d1b5d : JZ 0x008d1bc4
008d1b5f : CMP byte ptr [ECX + 0xb1],0x0
008d1b66 : JZ 0x008d1bc4
008d1b68 : MOV ECX,dword ptr [EAX + 0x10]
008d1b6b : PUSH ECX
008d1b6c : CALL 0x004049b0
008d1b71 : ADD ESP,0x4
008d1b74 : TEST EAX,EAX
008d1b76 : JZ 0x008d1bc4
008d1b78 : CMP byte ptr [EAX + 0x4],0x2e
008d1b7c : JNZ 0x008d1bc4
008d1b7e : CMP byte ptr [EBP + 0x10],0x0
008d1b82 : JZ 0x008d1bbe
008d1b84 : TEST byte ptr [EAX + 0x40],0x1
008d1b88 : JZ 0x008d1bc4
008d1b8a : MOV ESI,dword ptr [EBP + 0xc]
008d1b8d : MOV ECX,dword ptr [0x00da93ec]
008d1b93 : PUSH 0x0
008d1b95 : PUSH ESI
008d1b96 : CALL 0x00a364b0
008d1b9b : MOV EAX,[0x017247d4]
008d1ba0 : PUSH 0x5
008d1ba2 : PUSH EAX
008d1ba3 : MOV ECX,ESI
008d1ba5 : CALL 0x00a0d390
008d1baa : MOV ECX,dword ptr [0x00da9894]
008d1bb0 : MOV EAX,dword ptr [ECX]
008d1bb2 : MOV EAX,dword ptr [EAX + 0x12c]
008d1bb8 : TEST EAX,EAX
008d1bba : JNZ 0x008d1be9
008d1bbc : JMP 0x008d1bec
008d1bbe : TEST byte ptr [EAX + 0x40],0x1
008d1bc2 : JZ 0x008d1c29
008d1bc4 : MOV ESI,dword ptr [ESP + 0xc]
008d1bc8 : MOV EDX,dword ptr [EBP + 0x8]
008d1bcb : ADD ESI,0x4
008d1bce : MOV dword ptr [ESP + 0xc],ESI
008d1bd2 : CMP ESI,dword ptr [EDX + 0x90]
008d1bd8 : JNZ 0x008d1b20
008d1bde : XOR AL,AL
008d1be0 : POP EDI
008d1be1 : POP ESI
008d1be2 : POP EBX
008d1be3 : MOV ESP,EBP
008d1be5 : POP EBP
008d1be6 : RET 0xc
008d1be9 : MOV EAX,dword ptr [EAX + 0xc]
008d1bec : PUSH 0x0
008d1bee : PUSH EAX
008d1bef : MOV EAX,EBX
008d1bf1 : CALL 0x00930240
008d1bf6 : PUSH 0xc54b70
008d1bfb : MOV ESI,dword ptr [0x00da98e8]
008d1c01 : CALL 0x008018d0
008d1c06 : MOV EDX,dword ptr [EBP + 0x8]
008d1c09 : ADD ESP,0x4
008d1c0c : MOV byte ptr [EDX + 0xca],0x1
008d1c13 : CALL dword ptr [0x00b85598]
008d1c19 : POP EDI
008d1c1a : POP ESI
008d1c1b : MOV [0x00da9870],EAX
008d1c20 : MOV AL,0x1
008d1c22 : POP EBX
008d1c23 : MOV ESP,EBP
008d1c25 : POP EBP
008d1c26 : RET 0xc
008d1c29 : MOV ESI,dword ptr [EBP + 0xc]
008d1c2c : MOV ECX,dword ptr [0x00da93ec]
008d1c32 : PUSH 0x0
008d1c34 : PUSH ESI
008d1c35 : CALL 0x00a364b0
008d1c3a : MOV EAX,[0x017247d4]
008d1c3f : PUSH 0x5
008d1c41 : PUSH EAX
008d1c42 : MOV ECX,ESI
008d1c44 : CALL 0x00a0d390
008d1c49 : MOV ECX,dword ptr [0x00da9894]
008d1c4f : MOV EAX,dword ptr [ECX]
008d1c51 : MOV EAX,dword ptr [EAX + 0x12c]
008d1c57 : TEST EAX,EAX
008d1c59 : JNZ 0x008d1c6b
008d1c5b : PUSH EAX
008d1c5c : PUSH EAX
008d1c5d : MOV EAX,EBX
008d1c5f : CALL 0x00930240
008d1c64 : PUSH 0xc54be0
008d1c69 : JMP 0x008d1bfb
008d1c6b : MOV EAX,dword ptr [EAX + 0xc]
008d1c6e : PUSH 0x0
008d1c70 : PUSH EAX
008d1c71 : MOV EAX,EBX
008d1c73 : CALL 0x00930240
008d1c78 : PUSH 0xc54be0
008d1c7d : JMP 0x008d1bfb
