PROGRAM  : Maestia.exe
FUNCTION : FUN_00881d00
ENTRY    : 00881d00
BODY     : [[00881d00, 00881fb7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00881d00(int param_1,int param_2,uint param_3,undefined4 param_4,undefined4 param_5)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  DWORD DVar4;
  int iVar5;
  undefined1 auStack_d4 [3];
  char cStack_d1;
  int local_d0;
  int iStack_cc;
  LPCRITICAL_SECTION p_Stack_c8;
  char *pcStack_c4;
  undefined4 uStack_c0;
  int iStack_bc;
  undefined4 uStack_b8;
  uint local_b4 [3];
  undefined2 uStack_a8;
  undefined4 uStack_98;
  uint uStack_94;
  undefined1 auStack_90 [4];
  uint uStack_8c;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_28;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b63692;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_d4;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff20;
  ExceptionList = &local_14;
  iVar3 = FUN_00880fc0(param_2,param_3);
  iVar5 = DAT_00d7c54c;
  if (iVar3 != 0) {
    local_b4[0] = param_3;
    *(undefined4 *)(iVar3 + 0xc) = param_5;
    *(undefined1 *)(iVar3 + 0x11) = 0;
    FUN_004437f0(local_b4);
    if (local_d0 != *(int *)(iVar5 + 0x44)) {
      local_d0 = *(int *)(local_d0 + 0x10);
      if (local_d0 != 0) {
        if ((*(byte *)(local_d0 + 0x144) & 0x40) == 0) {
          *(undefined1 *)(iVar3 + 0x12) = 1;
        }
        else {
          *(undefined1 *)(iVar3 + 0x12) = 0;
        }
        FUN_00404350(local_d0 + 0x18,uVar2);
        local_c = 0;
        DVar4 = timeGetTime();
        *(DWORD *)(iVar3 + 0x18) = DVar4;
        (**(code **)(**(int **)(param_1 + 0x2c) + 0x310))(iVar3,0);
        if (param_2 != -0x10000) {
          cStack_d1 = '\0';
          if (param_3 >> 0x10 == 0x1410) {
            iVar5 = FUN_004049b0(param_3);
            if ((iVar5 != 0) &&
               ((((cVar1 = *(char *)(iVar5 + 0x1a4), cVar1 != '\x02' && (cVar1 != '\x04')) &&
                 (cVar1 != '\x03')) || (cStack_d1 = '\x01', *(int *)(iVar5 + 0x1ac) < 1)))) {
              cStack_d1 = '\0';
            }
          }
          FUN_0040e250(auStack_90);
          local_c._0_1_ = 1;
          uStack_8c = param_3;
          uStack_84 = *(undefined4 *)(*(int *)(param_1 + 0x2c) + 4);
          uStack_80 = param_4;
          if (((*(byte *)(local_d0 + 0x144) & 1) != 0) || (uStack_28 = 0x10, cStack_d1 == '\x01')) {
            uStack_28 = 0xe;
          }
          FUN_00883670(DAT_017248e4);
          local_c = (uint)local_c._1_3_ << 8;
          FUN_00406bd0(auStack_90);
        }
        FUN_00880830();
        p_Stack_c8 = (LPCRITICAL_SECTION)(param_1 + 0x38);
        iStack_bc = 0;
        pcStack_c4 = ".\\Objects\\AvaCharStatus.cpp";
        uStack_c0 = 0x10c;
        uStack_b8 = 1;
        FUN_006ef1a0(&p_Stack_c8);
        local_c._0_1_ = 2;
        if ((*(int *)(iVar3 + 0xc) == 0) && (*(char *)(iVar3 + 0x12) != '\0')) {
          local_c = (uint)local_c._1_3_ << 8;
          if (iStack_bc != 0) {
            LeaveCriticalSection(p_Stack_c8);
            iStack_bc = 0;
          }
          local_c = 0xffffffff;
          FUN_00406560();
        }
        else {
          local_d0 = param_2;
          iStack_cc = iVar3;
          FUN_00451f10(local_b4,&local_d0);
          local_c = (uint)local_c._1_3_ << 8;
          if (iStack_bc != 0) {
            LeaveCriticalSection(p_Stack_c8);
            iStack_bc = 0;
          }
          local_c = 0xffffffff;
          if (7 < uStack_94) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          uStack_94 = 7;
          uStack_98 = 0;
          uStack_a8 = 0;
        }
      }
    }
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_d4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00881d00 : PUSH EBP
00881d01 : MOV EBP,ESP
00881d03 : AND ESP,0xfffffff8
00881d06 : PUSH -0x1
00881d08 : PUSH 0xb63692
00881d0d : MOV EAX,FS:[0x0]
00881d13 : PUSH EAX
00881d14 : SUB ESP,0xc0
00881d1a : MOV EAX,[0x00d66fa0]
00881d1f : XOR EAX,ESP
00881d21 : MOV dword ptr [ESP + 0xb8],EAX
00881d28 : PUSH EBX
00881d29 : PUSH ESI
00881d2a : PUSH EDI
00881d2b : MOV EAX,[0x00d66fa0]
00881d30 : XOR EAX,ESP
00881d32 : PUSH EAX
00881d33 : LEA EAX,[ESP + 0xd0]
00881d3a : MOV FS:[0x0],EAX
00881d40 : MOV ESI,dword ptr [EBP + 0x10]
00881d43 : MOV EAX,dword ptr [EBP + 0xc]
00881d46 : MOV EBX,dword ptr [EBP + 0x8]
00881d49 : PUSH ESI
00881d4a : PUSH EAX
00881d4b : MOV ECX,EBX
00881d4d : CALL 0x00880fc0
00881d52 : MOV EDI,EAX
00881d54 : TEST EDI,EDI
00881d56 : JZ 0x00881f92
00881d5c : MOV ECX,dword ptr [EBP + 0x18]
00881d5f : MOV dword ptr [ESP + 0x30],ESI
00881d63 : MOV ESI,dword ptr [0x00d7c54c]
00881d69 : LEA EDX,[ESP + 0x30]
00881d6d : MOV dword ptr [EDI + 0xc],ECX
00881d70 : PUSH EDX
00881d71 : LEA ECX,[ESI + 0x40]
00881d74 : LEA EAX,[ESP + 0x18]
00881d78 : MOV byte ptr [EDI + 0x11],0x0
00881d7c : CALL 0x004437f0
00881d81 : MOV ESI,dword ptr [ESI + 0x44]
00881d84 : MOV EAX,dword ptr [ESP + 0x14]
00881d88 : CMP EAX,ESI
00881d8a : JZ 0x00881f92
00881d90 : MOV EAX,dword ptr [EAX + 0x10]
00881d93 : MOV dword ptr [ESP + 0x14],EAX
00881d97 : TEST EAX,EAX
00881d99 : JZ 0x00881f92
00881d9f : TEST byte ptr [EAX + 0x144],0x40
00881da6 : JZ 0x00881dae
00881da8 : MOV byte ptr [EDI + 0x12],0x0
00881dac : JMP 0x00881db2
00881dae : MOV byte ptr [EDI + 0x12],0x1
00881db2 : ADD EAX,0x18
00881db5 : PUSH EAX
00881db6 : LEA ESI,[ESP + 0x3c]
00881dba : CALL 0x00404350
00881dbf : ADD ESP,0x4
00881dc2 : XOR ESI,ESI
00881dc4 : MOV dword ptr [ESP + 0xd8],ESI
00881dcb : CALL dword ptr [0x00b85598]
00881dd1 : MOV dword ptr [EDI + 0x18],EAX
00881dd4 : MOV ECX,dword ptr [EBX + 0x2c]
00881dd7 : MOV EAX,dword ptr [ECX]
00881dd9 : MOV EDX,dword ptr [EAX + 0x310]
00881ddf : PUSH ESI
00881de0 : PUSH EDI
00881de1 : CALL EDX
00881de3 : CMP dword ptr [EBP + 0xc],0xffff0000
00881dea : JZ 0x00881eae
00881df0 : MOV ESI,dword ptr [EBP + 0x10]
00881df3 : MOV EAX,ESI
00881df5 : SHR EAX,0x10
00881df8 : MOV byte ptr [ESP + 0x13],0x0
00881dfd : CMP EAX,0x1410
00881e02 : JNZ 0x00881e39
00881e04 : PUSH ESI
00881e05 : CALL 0x004049b0
00881e0a : ADD ESP,0x4
00881e0d : TEST EAX,EAX
00881e0f : JZ 0x00881e39
00881e11 : MOV CL,byte ptr [EAX + 0x1a4]
00881e17 : CMP CL,0x2
00881e1a : JZ 0x00881e26
00881e1c : CMP CL,0x4
00881e1f : JZ 0x00881e26
00881e21 : CMP CL,0x3
00881e24 : JNZ 0x00881e34
00881e26 : CMP dword ptr [EAX + 0x1ac],0x0
00881e2d : MOV byte ptr [ESP + 0x13],0x1
00881e32 : JG 0x00881e39
00881e34 : MOV byte ptr [ESP + 0x13],0x0
00881e39 : LEA ECX,[ESP + 0x54]
00881e3d : PUSH ECX
00881e3e : CALL 0x0040e250
00881e43 : MOV byte ptr [ESP + 0xd8],0x1
00881e4b : MOV EDX,dword ptr [EBX + 0x2c]
00881e4e : MOV ECX,dword ptr [ESP + 0x14]
00881e52 : TEST byte ptr [ECX + 0x144],0x1
00881e59 : MOV dword ptr [ESP + 0x58],ESI
00881e5d : MOV EAX,dword ptr [EDX + 0x4]
00881e60 : MOV dword ptr [ESP + 0x60],EAX
00881e64 : MOV EAX,dword ptr [EBP + 0x14]
00881e67 : MOV dword ptr [ESP + 0x64],EAX
00881e6b : JNZ 0x00881e7f
00881e6d : CMP byte ptr [ESP + 0x13],0x1
00881e72 : MOV dword ptr [ESP + 0xbc],0x10
00881e7d : JNZ 0x00881e8a
00881e7f : MOV dword ptr [ESP + 0xbc],0xe
00881e8a : MOV EDX,dword ptr [0x017248e4]
00881e90 : PUSH EDX
00881e91 : LEA ECX,[ESP + 0x58]
00881e95 : CALL 0x00883670
00881e9a : MOV byte ptr [ESP + 0xd8],0x0
00881ea2 : LEA EAX,[ESP + 0x54]
00881ea6 : PUSH EAX
00881ea7 : CALL 0x00406bd0
00881eac : XOR ESI,ESI
00881eae : MOV ECX,EDI
00881eb0 : MOV EAX,EBX
00881eb2 : CALL 0x00880830
00881eb7 : LEA EDX,[ESP + 0x1c]
00881ebb : LEA ECX,[EBX + 0x38]
00881ebe : PUSH EDX
00881ebf : MOV dword ptr [ESP + 0x2c],ESI
00881ec3 : MOV dword ptr [ESP + 0x20],ECX
00881ec7 : MOV dword ptr [ESP + 0x24],0xc44794
00881ecf : MOV dword ptr [ESP + 0x28],0x10c
00881ed7 : MOV dword ptr [ESP + 0x30],0x1
00881edf : CALL 0x006ef1a0
00881ee4 : MOV byte ptr [ESP + 0xd8],0x2
00881eec : CMP dword ptr [EDI + 0xc],ESI
00881eef : JNZ 0x00881f2a
00881ef1 : CMP byte ptr [EDI + 0x12],0x0
00881ef5 : JZ 0x00881f2a
00881ef7 : MOV byte ptr [ESP + 0xd8],0x0
00881eff : CMP dword ptr [ESP + 0x28],ESI
00881f03 : JZ 0x00881f14
00881f05 : MOV EAX,dword ptr [ESP + 0x1c]
00881f09 : PUSH EAX
00881f0a : CALL dword ptr [0x00b8511c]
00881f10 : MOV dword ptr [ESP + 0x28],ESI
00881f14 : MOV dword ptr [ESP + 0xd8],0xffffffff
00881f1f : LEA ECX,[ESP + 0x38]
00881f23 : CALL 0x00406560
00881f28 : JMP 0x00881f92
00881f2a : MOV ECX,dword ptr [EBP + 0xc]
00881f2d : LEA EDX,[ESP + 0x14]
00881f31 : PUSH EDX
00881f32 : LEA EAX,[ESP + 0x34]
00881f36 : PUSH EAX
00881f37 : LEA EAX,[EBX + 0x20]
00881f3a : MOV dword ptr [ESP + 0x1c],ECX
00881f3e : MOV dword ptr [ESP + 0x20],EDI
00881f42 : CALL 0x00451f10
00881f47 : MOV byte ptr [ESP + 0xd8],0x0
00881f4f : CMP dword ptr [ESP + 0x28],ESI
00881f53 : JZ 0x00881f64
00881f55 : MOV ECX,dword ptr [ESP + 0x1c]
00881f59 : PUSH ECX
00881f5a : CALL dword ptr [0x00b8511c]
00881f60 : MOV dword ptr [ESP + 0x28],ESI
00881f64 : MOV dword ptr [ESP + 0xd8],0xffffffff
00881f6f : CMP dword ptr [ESP + 0x50],0x8
00881f74 : JC 0x00881f7f
00881f76 : MOV ECX,dword ptr [ESP + 0x3c]
00881f7a : CALL 0x006f04e0
00881f7f : XOR EDX,EDX
00881f81 : MOV dword ptr [ESP + 0x50],0x7
00881f89 : MOV dword ptr [ESP + 0x4c],ESI
00881f8d : MOV word ptr [ESP + 0x3c],DX
00881f92 : MOV ECX,dword ptr [ESP + 0xd0]
00881f99 : MOV dword ptr FS:[0x0],ECX
00881fa0 : POP ECX
00881fa1 : POP EDI
00881fa2 : POP ESI
00881fa3 : POP EBX
00881fa4 : MOV ECX,dword ptr [ESP + 0xb8]
00881fab : XOR ECX,ESP
00881fad : CALL 0x00633e6b
00881fb2 : MOV ESP,EBP
00881fb4 : POP EBP
00881fb5 : RET 0x14
