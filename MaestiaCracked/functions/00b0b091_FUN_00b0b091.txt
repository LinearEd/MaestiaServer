PROGRAM  : Maestia.exe
FUNCTION : FUN_00b0b091
ENTRY    : 00b0b091
BODY     : [[00b0b091, 00b0b5a6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00b0b091(void)

{
  undefined1 auVar1 [16];
  ushort uVar2;
  ushort uVar3;
  uint6 uVar4;
  uint uVar5;
  uint uVar6;
  int in_EDX;
  int iVar7;
  double dVar8;
  undefined1 in_XMM0 [16];
  undefined1 auVar9 [16];
  double dVar10;
  undefined1 in_XMM1 [16];
  undefined1 auVar11 [16];
  longlong lVar12;
  undefined1 auVar13 [16];
  ulonglong in_XMM4_Qb;
  ushort uVar14;
  undefined2 in_XMM5_Wf;
  undefined2 in_XMM5_Wg;
  undefined2 in_XMM5_Wh;
  ushort uVar15;
  undefined8 in_XMM7_Qb;
  
  dVar8 = in_XMM0._0_8_;
  uVar2 = in_XMM0._6_2_;
  dVar10 = in_XMM1._0_8_;
  uVar3 = in_XMM1._6_2_;
  if ((0xf00 < (uVar2 & 0x7ff0) - 0x3870) || (0xf00 < (uVar3 & 0x7ff0) - 0x3870)) {
    uVar6 = uVar2 & 0x7ff0;
    uVar5 = uVar3 & 0x7ff0;
    if (uVar6 == 0x7ff0) {
      if (((in_XMM0._4_4_ & 0xfffff) != 0 || in_XMM0._0_4_ != 0) || (uVar5 < 0x7ff0)) {
        return;
      }
      if ((in_XMM1._4_4_ & 0xfffff) != 0 || in_XMM1._0_4_ != 0) {
        return;
      }
      if (((ulonglong)dVar10 & 0x8000000000000000) != 0) {
        return;
      }
      return;
    }
    if (uVar5 == 0x7ff0) {
      if ((in_XMM1._4_4_ & 0xfffff) != 0 || in_XMM1._0_4_ != 0) {
        return;
      }
      if (((ulonglong)dVar10 & 0x8000000000000000) != 0) {
        return;
      }
      return;
    }
    iVar7 = 0x400;
    if ((uVar2 & 0x7ff0) == 0) {
      iVar7 = 0x90;
      dVar8 = dVar8 * 3.602879701896397e+16;
      uVar6 = (ushort)((ulonglong)dVar8 >> 0x30) & 0x7ff0;
      if (((ulonglong)dVar8 & 0x7ff0000000000000) == 0) {
        return;
      }
    }
    if ((uVar3 & 0x7ff0) == 0) {
      iVar7 = iVar7 + 0x370;
      in_XMM1._0_8_ = dVar10 * 3.602879701896397e+16;
      uVar5 = (ushort)((ulonglong)in_XMM1._0_8_ >> 0x30) & 0x7ff0;
      if (((ulonglong)in_XMM1._0_8_ & 0x7ff0000000000000) == 0) {
        return;
      }
    }
    uVar5 = (iVar7 + uVar6) - uVar5;
    if (0x800 < uVar5) goto LAB_00b0b322;
    in_EDX = uVar5 + 0x3bf0;
    auVar11._0_8_ = in_XMM1._0_8_ & 0x800fffffffffffff;
    auVar11._8_8_ = in_XMM1._8_8_ & in_XMM4_Qb;
    dVar8 = (double)((ulonglong)dVar8 & 0x800fffffffffffff | (ulonglong)(ushort)in_EDX << 0x30);
    auVar13._8_8_ = in_XMM7_Qb;
    auVar13._0_8_ = 0x3ff0000000000000;
    in_XMM1 = auVar11 | auVar13;
  }
  auVar9._8_8_ = in_XMM1._0_8_;
  auVar9._0_8_ = dVar8;
  uVar4 = CONCAT24(in_XMM5_Wh,CONCAT22(in_XMM5_Wg,in_XMM5_Wf)) ^
          CONCAT24(in_XMM5_Wh,CONCAT22(in_XMM5_Wg,in_XMM5_Wf));
  uVar14 = in_XMM1._6_2_ + 0x800;
  uVar15 = (short)(uVar4 >> 0x20) + in_XMM1._14_2_;
  uVar4 = CONCAT24(uVar15,CONCAT22((short)(uVar4 >> 0x10) + in_XMM1._12_2_,
                                   (short)uVar4 + in_XMM1._10_2_)) >> 0xd;
  auVar1._4_2_ = uVar14 >> 0xd;
  auVar1._0_4_ = (int)(CONCAT24(uVar14,in_XMM1._2_4_) >> 0xd);
  auVar1._6_2_ = 0;
  auVar1._8_2_ = (short)uVar4;
  auVar1._10_2_ = (short)(uVar4 >> 0x10);
  auVar1._12_2_ = uVar15 >> 0xd;
  auVar1._14_2_ = 0;
  auVar13 = rcpss(ZEXT816(0),auVar1);
  lVar12 = auVar13._0_8_ << 0x1d;
  movmskpd(in_EDX,auVar9);
  uVar5 = ((ushort)((uint)((int)((ulonglong)
                                 ((double)CONCAT26((short)((ulonglong)lVar12 >> 0x30) + 0x3800,
                                                   (int6)lVar12) * dVar8) >> 0x20) + 0x8000) >> 0x10
                   ) & 0x7fff) & 0x7ff0;
  if (uVar5 - 0x3f9e < 0x462) {
    return;
  }
  if (uVar5 - 0x3bf0 < 0x3af) {
    return;
  }
LAB_00b0b322:
  if ((uVar3 & 0x7ff0) < (uVar2 & 0x7ff0)) {
    return;
  }
  if (0x7fff < uVar3) {
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00b0b091 : SUB ESP,0x14
00b0b094 : PEXTRW EAX,XMM0,0x3
00b0b099 : AND EAX,0x7ff0
00b0b09e : MOVLPD qword ptr [ESP + 0x4],XMM0
00b0b0a4 : SUB EAX,0x3870
00b0b0a9 : CMP EAX,0xf00
00b0b0ae : MOVLPD qword ptr [ESP + 0xc],XMM1
00b0b0b4 : JA 0x00b0b38c
00b0b0ba : PEXTRW EAX,XMM1,0x3
00b0b0bf : AND EAX,0x7ff0
00b0b0c4 : SUB EAX,0x3870
00b0b0c9 : CMP EAX,0xf00
00b0b0ce : JA 0x00b0b38c
00b0b0d4 : UNPCKLPD XMM0,XMM1
00b0b0d8 : XORPD XMM5,XMM5
00b0b0dc : XORPD XMM3,XMM3
00b0b0e0 : MOV EAX,0x800
00b0b0e5 : PINSRW XMM5,EAX,0x3
00b0b0ea : PADDW XMM5,XMM1
00b0b0ee : PSRLQ XMM5,0x1d
00b0b0f3 : RCPSS XMM3,XMM5
00b0b0f7 : XORPD XMM4,XMM4
00b0b0fb : MOV ECX,0x3800
00b0b100 : PINSRW XMM4,ECX,0x3
00b0b105 : PSLLQ XMM3,0x1d
00b0b10a : PADDW XMM3,XMM4
00b0b10e : MULSD XMM3,XMM0
00b0b112 : XORPD XMM2,XMM2
00b0b116 : XORPD XMM6,XMM6
00b0b11a : XORPD XMM7,XMM7
00b0b11e : MOV EAX,0x8000
00b0b123 : PINSRW XMM6,EAX,0x2
00b0b128 : MOV ECX,0x7fff
00b0b12d : PINSRW XMM7,ECX,0x3
00b0b132 : PADDD XMM3,XMM6
00b0b136 : ANDPD XMM3,XMM7
00b0b13a : MOVSD XMM5,XMM3
00b0b13e : PEXTRW EAX,XMM3,0x3
00b0b143 : MOV ECX,0x4040
00b0b148 : PINSRW XMM2,ECX,0x3
00b0b14d : MINSD XMM3,XMM2
00b0b151 : MOVMSKPD EDX,XMM0
00b0b155 : PSLLQ XMM0,0x1
00b0b15a : PSRLQ XMM0,0x1
00b0b15f : CMPLESD XMM5,XMM2
00b0b164 : PSLLQ XMM1,0x1
00b0b169 : PSRLQ XMM1,0x1
00b0b16e : MOVSD XMM6,XMM1
00b0b172 : MOVSD XMM7,XMM1
00b0b176 : MOVSD XMM2,XMM0
00b0b17a : MOV ECX,0x0
00b0b17f : PINSRW XMM6,ECX,0x0
00b0b184 : SUBSD XMM7,XMM6
00b0b188 : MOVSD XMM4,XMM0
00b0b18c : MULSD XMM6,XMM3
00b0b190 : MULSD XMM4,XMM3
00b0b194 : MULSD XMM7,XMM3
00b0b198 : ANDPD XMM0,XMM5
00b0b19c : SUBSD XMM0,XMM6
00b0b1a0 : ANDPD XMM1,XMM5
00b0b1a4 : ADDSD XMM4,XMM1
00b0b1a8 : SUBSD XMM0,XMM7
00b0b1ac : AND EAX,0x7ff0
00b0b1b1 : SUB EAX,0x3f9e
00b0b1b6 : CMP EAX,0x461
00b0b1bb : JA 0x00b0b26f
00b0b1c1 : DIVSD XMM0,XMM4
00b0b1c5 : PEXTRW ECX,XMM3,0x3
00b0b1ca : MOVLPD XMM2,qword ptr [0x00ce4380]
00b0b1d2 : MOVLPD XMM3,qword ptr [0x00ce4390]
00b0b1da : PEXTRW EAX,XMM5,0x0
00b0b1df : ADD EDX,EDX
00b0b1e1 : MOVAPD XMM6,xmmword ptr [EDX*0x8 + 0xce4280]
00b0b1ea : MOVAPD XMM1,xmmword ptr [EDX*0x8 + 0xce42c0]
00b0b1f3 : SUB ECX,0x3f9e
00b0b1f9 : NOT EAX
00b0b1fb : AND EAX,0x1
00b0b1fe : ADD ECX,EAX
00b0b200 : ADD ECX,ECX
00b0b202 : MOVAPD XMM5,xmmword ptr [ECX*0x8 + 0xce3800]
00b0b20b : XORPD XMM5,XMM1
00b0b20f : ADDPD XMM5,XMM6
00b0b213 : MOVSD XMM6,XMM5
00b0b217 : UNPCKHPD XMM5,XMM5
00b0b21b : ADD ESP,0x14
00b0b21e : XORPD XMM1,XMM0
00b0b222 : MOVSD XMM4,XMM1
00b0b226 : MULSD XMM0,XMM0
00b0b22a : MULSD XMM2,XMM0
00b0b22e : ADDSD XMM3,XMM0
00b0b232 : ADDSD XMM1,XMM6
00b0b236 : SUBSD XMM6,XMM1
00b0b23a : ADDSD XMM6,XMM4
00b0b23e : ADDSD XMM2,qword ptr [0x00ce4388]
00b0b246 : MULSD XMM3,XMM0
00b0b24a : MULSD XMM4,XMM0
00b0b24e : ADDSD XMM6,XMM5
00b0b252 : MULSD XMM2,XMM4
00b0b256 : ADDSD XMM3,qword ptr [0x00ce4398]
00b0b25e : MULSD XMM2,XMM3
00b0b262 : ADDSD XMM2,XMM6
00b0b266 : ADDSD XMM1,XMM2
00b0b26a : MOVAPD XMM0,XMM1
00b0b26e : RET
00b0b26f : ADD EAX,0x3ae
00b0b274 : CMP EAX,0x3ae
00b0b279 : JA 0x00b0b322
00b0b27f : XORPD XMM4,XMM4
00b0b283 : MOV ECX,0x3ff0
00b0b288 : PINSRW XMM4,ECX,0x3
00b0b28d : DIVSD XMM4,XMM1
00b0b291 : ADD ESP,0x14
00b0b294 : ADD EDX,EDX
00b0b296 : MOVAPD XMM6,xmmword ptr [EDX*0x8 + 0xce42c0]
00b0b29f : UNPCKLPD XMM3,XMM3
00b0b2a3 : XORPD XMM0,XMM6
00b0b2a7 : XORPD XMM2,XMM6
00b0b2ab : XORPD XMM3,XMM6
00b0b2af : MOVAPD XMM7,xmmword ptr [EDX*0x8 + 0xce4300]
00b0b2b8 : MOVLPD XMM1,qword ptr [0x00ce4380]
00b0b2c0 : MOVLPD XMM5,qword ptr [0x00ce4390]
00b0b2c8 : ANDPD XMM3,xmmword ptr [EDX*0x8 + 0xce4340]
00b0b2d1 : MULSD XMM2,XMM4
00b0b2d5 : MULSD XMM0,XMM4
00b0b2d9 : MOVSD XMM6,XMM2
00b0b2dd : MULSD XMM2,XMM2
00b0b2e1 : MULSD XMM1,XMM2
00b0b2e5 : ADDSD XMM5,XMM2
00b0b2e9 : MULSD XMM6,XMM2
00b0b2ed : ADDSD XMM1,qword ptr [0x00ce4388]
00b0b2f5 : MULSD XMM5,XMM2
00b0b2f9 : ADDSD XMM7,XMM0
00b0b2fd : ADDPD XMM7,XMM3
00b0b301 : MULSD XMM1,XMM6
00b0b305 : ADDSD XMM5,qword ptr [0x00ce4398]
00b0b30d : MULSD XMM5,XMM1
00b0b311 : ADDSD XMM5,XMM7
00b0b315 : UNPCKHPD XMM7,XMM7
00b0b319 : ADDSD XMM5,XMM7
00b0b31d : MOVAPD XMM0,XMM5
00b0b321 : RET
00b0b322 : MOVLPD XMM1,qword ptr [ESP + 0xc]
00b0b328 : MOVLPD XMM0,qword ptr [ESP + 0x4]
00b0b32e : PEXTRW EAX,XMM1,0x3
00b0b333 : AND EAX,0x7ff0
00b0b338 : PEXTRW ECX,XMM0,0x3
00b0b33d : AND ECX,0x7ff0
00b0b343 : CMP ECX,EAX
00b0b345 : JG 0x00b0b374
00b0b347 : PEXTRW ECX,XMM1,0x3
00b0b34c : CMP ECX,0x7fff
00b0b352 : JG 0x00b0b35c
00b0b354 : ADD ESP,0x14
00b0b357 : DIVSD XMM0,XMM1
00b0b35b : RET
00b0b35c : ADD ESP,0x14
00b0b35f : ANDPD XMM0,xmmword ptr [0x00ce4270]
00b0b367 : MOVLPD XMM2,qword ptr [0x00ce4250]
00b0b36f : XORPD XMM0,XMM2
00b0b373 : RET
00b0b374 : ADD ESP,0x14
00b0b377 : ANDPD XMM0,xmmword ptr [0x00ce4270]
00b0b37f : MOVLPD XMM2,qword ptr [0x00ce4240]
00b0b387 : XORPD XMM0,XMM2
00b0b38b : RET
00b0b38c : PEXTRW ECX,XMM0,0x3
00b0b391 : AND ECX,0x7ff0
00b0b397 : PEXTRW EAX,XMM1,0x3
00b0b39c : AND EAX,0x7ff0
00b0b3a1 : CMP ECX,0x7ff0
00b0b3a7 : JZ 0x00b0b452
00b0b3ad : CMP EAX,0x7ff0
00b0b3b2 : JZ 0x00b0b50a
00b0b3b8 : MOVLPD XMM3,qword ptr [0x00ce43a8]
00b0b3c0 : MOV EDX,0x400
00b0b3c5 : MOVLPD XMM4,qword ptr [0x00ce43a0]
00b0b3cd : XORPD XMM6,XMM6
00b0b3d1 : MOVLPD XMM7,qword ptr [0x00ce43b0]
00b0b3d9 : CMP ECX,0x0
00b0b3dc : JZ 0x00b0b413
00b0b3de : CMP EAX,0x0
00b0b3e1 : JZ 0x00b0b433
00b0b3e3 : ADD EDX,ECX
00b0b3e5 : SUB EDX,EAX
00b0b3e7 : CMP EDX,0x800
00b0b3ed : JA 0x00b0b322
00b0b3f3 : ADD EDX,0x3bf0
00b0b3f9 : PINSRW XMM6,EDX,0x3
00b0b3fe : ANDPD XMM0,XMM4
00b0b402 : ANDPD XMM1,XMM4
00b0b406 : ORPD XMM0,XMM6
00b0b40a : ORPD XMM1,XMM7
00b0b40e : JMP 0x00b0b0d4
00b0b413 : SUB EDX,0x370
00b0b419 : MULSD XMM0,XMM3
00b0b41d : PEXTRW ECX,XMM0,0x3
00b0b422 : AND ECX,0x7ff0
00b0b428 : CMP ECX,0x0
00b0b42b : JZ 0x00b0b55b
00b0b431 : JMP 0x00b0b3de
00b0b433 : ADD EDX,0x370
00b0b439 : MULSD XMM1,XMM3
00b0b43d : PEXTRW EAX,XMM1,0x3
00b0b442 : AND EAX,0x7ff0
00b0b447 : CMP EAX,0x0
00b0b44a : JZ 0x00b0b584
00b0b450 : JMP 0x00b0b3e3
00b0b452 : MOVD EDX,XMM0
00b0b456 : MOVSD XMM2,XMM0
00b0b45a : PSRLQ XMM2,0x20
00b0b45f : MOVD ECX,XMM2
00b0b463 : AND ECX,0xfffff
00b0b469 : OR ECX,EDX
00b0b46b : CMP ECX,0x0
00b0b46e : JNZ 0x00b0b496
00b0b470 : PSRLQ XMM0,0x3f
00b0b475 : PSLLQ XMM0,0x3f
00b0b47a : CMP EAX,0x7ff0
00b0b47f : JNC 0x00b0b49a
00b0b481 : MOVAPD XMM5,xmmword ptr [0x00ce4240]
00b0b489 : PSHUFD XMM4,XMM5,0xee
00b0b48e : ADDSD XMM5,XMM4
00b0b492 : ORPD XMM0,XMM5
00b0b496 : ADD ESP,0x14
00b0b499 : RET
00b0b49a : MOVD EAX,XMM1
00b0b49e : MOVSD XMM2,XMM1
00b0b4a2 : PSRLQ XMM2,0x20
00b0b4a7 : MOVD ECX,XMM2
00b0b4ab : MOV EDX,0x80000000
00b0b4b0 : AND EDX,ECX
00b0b4b2 : AND ECX,0xfffff
00b0b4b8 : OR ECX,EAX
00b0b4ba : CMP ECX,0x0
00b0b4bd : JNZ 0x00b0b4dd
00b0b4bf : CMP EDX,0x0
00b0b4c2 : JNZ 0x00b0b4e5
00b0b4c4 : ADD ESP,0x14
00b0b4c7 : MOVAPD XMM5,xmmword ptr [0x00ce4260]
00b0b4cf : PSHUFD XMM4,XMM5,0xee
00b0b4d4 : ADDSD XMM5,XMM4
00b0b4d8 : ORPD XMM0,XMM5
00b0b4dc : RET
00b0b4dd : ADD ESP,0x14
00b0b4e0 : MOVSD XMM0,XMM1
00b0b4e4 : RET
00b0b4e5 : ADD ESP,0x14
00b0b4e8 : MOVAPD XMM5,xmmword ptr [0x00ce4260]
00b0b4f0 : MOVAPD XMM6,xmmword ptr [0x00ce4240]
00b0b4f8 : ADDPD XMM5,XMM6
00b0b4fc : PSHUFD XMM6,XMM5,0xee
00b0b501 : ADDPD XMM5,XMM6
00b0b505 : ORPD XMM0,XMM5
00b0b509 : RET
00b0b50a : MOVD EAX,XMM1
00b0b50e : MOVSD XMM2,XMM1
00b0b512 : PSRLQ XMM2,0x20
00b0b517 : MOVD ECX,XMM2
00b0b51b : MOV EDX,0x80000000
00b0b520 : AND EDX,ECX
00b0b522 : AND ECX,0xfffff
00b0b528 : OR ECX,EAX
00b0b52a : CMP ECX,0x0
00b0b52d : JNZ 0x00b0b4dd
00b0b52f : PSRLQ XMM0,0x3f
00b0b534 : PSLLQ XMM0,0x3f
00b0b539 : CMP EDX,0x0
00b0b53c : JNZ 0x00b0b542
00b0b53e : ADD ESP,0x14
00b0b541 : RET
00b0b542 : ADD ESP,0x14
00b0b545 : MOVAPD XMM5,xmmword ptr [0x00ce4250]
00b0b54d : PSHUFD XMM4,XMM5,0xee
00b0b552 : ADDSD XMM5,XMM4
00b0b556 : ORPD XMM0,XMM5
00b0b55a : RET
00b0b55b : PEXTRW EDX,XMM1,0x3
00b0b560 : AND EDX,0x8000
00b0b566 : CMP EDX,0x0
00b0b569 : JZ 0x00b0b580
00b0b56b : MOVAPD XMM5,xmmword ptr [0x00ce4250]
00b0b573 : PSHUFD XMM4,XMM5,0xee
00b0b578 : ADDSD XMM5,XMM4
00b0b57c : ORPD XMM0,XMM5
00b0b580 : ADD ESP,0x14
00b0b583 : RET
00b0b584 : ADD ESP,0x14
00b0b587 : MOVAPD XMM5,xmmword ptr [0x00ce4240]
00b0b58f : PSRLQ XMM0,0x3f
00b0b594 : PSLLQ XMM0,0x3f
00b0b599 : PSHUFD XMM4,XMM5,0xee
00b0b59e : ADDSD XMM5,XMM4
00b0b5a2 : ORPD XMM0,XMM5
00b0b5a6 : RET
