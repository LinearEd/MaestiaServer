PROGRAM  : Maestia.exe
FUNCTION : FUN_00a6d180
ENTRY    : 00a6d180
BODY     : [[00a6d180, 00a6d3ce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a6d180(int param_1,char param_2,char param_3,char param_4)

{
  int iVar1;
  char cVar2;
  uint uVar3;
  int iVar4;
  int *piVar5;
  int *piVar6;
  undefined4 in_ECX;
  LPCRITICAL_SECTION local_78;
  char *local_74;
  undefined4 local_70;
  int local_6c;
  undefined4 local_68;
  undefined1 local_64 [8];
  char local_5c;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b44266;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_78 = (LPCRITICAL_SECTION)(param_1 + 0x70);
  local_6c = 0;
  local_74 = ".\\Objects\\AvaEffectMgr.cpp";
  local_70 = 0x22b;
  local_68 = 1;
  local_14 = uVar3;
  FUN_006ef1a0(&local_78);
  local_8 = 0;
  if ((param_2 != '\0') && (param_4 != '\0')) {
    FUN_00441900(local_64);
    local_8._0_1_ = 1;
    iVar1 = *(int *)(param_1 + 0x48);
    local_64[0] = 1;
    local_5c = param_3;
    iVar4 = FUN_00441160(iVar1,*(undefined4 *)(iVar1 + 4),local_64);
    FUN_00441220();
    *(int *)(iVar1 + 4) = iVar4;
    **(int **)(iVar4 + 4) = iVar4;
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_004403d0(local_64);
    local_8 = 0xffffffff;
    if (local_6c != 0) {
      LeaveCriticalSection(local_78);
      local_6c = 0;
    }
    goto LAB_00a6d3b1;
  }
  local_8 = 0xffffffff;
  if (local_6c != 0) {
    LeaveCriticalSection(local_78);
    local_6c = 0;
  }
  piVar5 = (int *)FUN_00a6bba0(in_ECX);
  if (piVar5 == (int *)0x0) {
    piVar5 = (int *)FUN_00a6bad0(in_ECX);
    if (piVar5 == (int *)0x0) goto LAB_00a6d3b1;
    piVar6 = (int *)FUN_00a6b6b0(uVar3);
    if (piVar6 == (int *)0x0) {
      FUN_00a6c940();
      piVar6 = piVar5;
LAB_00a6d360:
      if (param_2 != '\0') {
        if (*(char *)(param_1 + 0x5c) != '\0') {
          (**(code **)(*piVar6 + 0xd0))();
        }
        goto LAB_00a6d3b1;
      }
    }
    else if (param_2 != '\0') {
      cVar2 = FUN_00794bc0();
      if (cVar2 == '\0') {
        cVar2 = FUN_00794ba0();
        if (cVar2 != '\0') goto LAB_00a6d3b1;
      }
      goto LAB_00a6d360;
    }
    if ((((piVar6[0x5f] != 0) && (1000.0 <= *(float *)(piVar6[0x5f] + 0x24))) || (param_3 != '\0'))
       && (*(char *)(param_1 + 0x5c) != '\0')) {
      (**(code **)(*piVar6 + 0xd4))();
      FUN_00a6b5d0();
    }
    goto LAB_00a6d3b1;
  }
  piVar6 = (int *)FUN_00a6b780();
  if (piVar6 == (int *)0x0) {
    FUN_00a6d020(param_1,0);
    piVar6 = piVar5;
LAB_00a6d2cd:
    if (param_2 != '\0') {
      if (*(char *)(param_1 + 0x5c) != '\0') {
        (**(code **)(*piVar6 + 0x20))();
      }
      goto LAB_00a6d3b1;
    }
  }
  else if (param_2 != '\0') {
    cVar2 = (**(code **)(*piVar6 + 0x30))();
    if (cVar2 == '\0') {
      if (*(char *)((int)piVar6 + 5) != '\0') goto LAB_00a6d3b1;
      cVar2 = (**(code **)(*piVar6 + 0x34))();
      if (cVar2 != '\0') goto LAB_00a6d3b1;
    }
    goto LAB_00a6d2cd;
  }
  if (((*(char *)((int)piVar6 + 5) != '\0') || (param_3 != '\0')) &&
     (*(char *)(param_1 + 0x5c) != '\0')) {
    (**(code **)(*piVar6 + 0x24))();
    FUN_00a6c0d0();
  }
LAB_00a6d3b1:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a6d180 : PUSH EBP
00a6d181 : MOV EBP,ESP
00a6d183 : PUSH -0x1
00a6d185 : PUSH 0xb44266
00a6d18a : MOV EAX,FS:[0x0]
00a6d190 : PUSH EAX
00a6d191 : SUB ESP,0x6c
00a6d194 : MOV EAX,[0x00d66fa0]
00a6d199 : XOR EAX,EBP
00a6d19b : MOV dword ptr [EBP + -0x10],EAX
00a6d19e : PUSH EBX
00a6d19f : PUSH ESI
00a6d1a0 : PUSH EDI
00a6d1a1 : PUSH EAX
00a6d1a2 : LEA EAX,[EBP + -0xc]
00a6d1a5 : MOV FS:[0x0],EAX
00a6d1ab : MOV EDI,ECX
00a6d1ad : MOV EBX,dword ptr [EBP + 0x8]
00a6d1b0 : LEA ECX,[EBP + -0x74]
00a6d1b3 : LEA EAX,[EBX + 0x70]
00a6d1b6 : XOR ESI,ESI
00a6d1b8 : PUSH ECX
00a6d1b9 : MOV dword ptr [EBP + -0x68],ESI
00a6d1bc : MOV dword ptr [EBP + -0x74],EAX
00a6d1bf : MOV dword ptr [EBP + -0x70],0xc43e84
00a6d1c6 : MOV dword ptr [EBP + -0x6c],0x22b
00a6d1cd : MOV dword ptr [EBP + -0x64],0x1
00a6d1d4 : CALL 0x006ef1a0
00a6d1d9 : MOV dword ptr [EBP + -0x4],ESI
00a6d1dc : CMP byte ptr [EBP + 0xc],0x0
00a6d1e0 : JZ 0x00a6d25b
00a6d1e2 : CMP byte ptr [EBP + 0x14],0x0
00a6d1e6 : JZ 0x00a6d25b
00a6d1e8 : LEA EDX,[EBP + -0x60]
00a6d1eb : PUSH EDX
00a6d1ec : CALL 0x00441900
00a6d1f1 : MOV byte ptr [EBP + -0x4],0x1
00a6d1f5 : MOV AL,byte ptr [EBP + 0x10]
00a6d1f8 : MOV dword ptr [EBP + -0x5c],EDI
00a6d1fb : MOV EDI,dword ptr [EBX + 0x48]
00a6d1fe : LEA ESI,[EBX + 0x44]
00a6d201 : LEA ECX,[EBP + -0x60]
00a6d204 : MOV byte ptr [EBP + -0x60],0x1
00a6d208 : MOV byte ptr [EBP + -0x58],AL
00a6d20b : MOV EDX,dword ptr [EDI + 0x4]
00a6d20e : PUSH ECX
00a6d20f : PUSH EDX
00a6d210 : PUSH EDI
00a6d211 : CALL 0x00441160
00a6d216 : MOV ECX,ESI
00a6d218 : MOV EBX,EAX
00a6d21a : CALL 0x00441220
00a6d21f : MOV dword ptr [EDI + 0x4],EBX
00a6d222 : MOV EAX,dword ptr [EBX + 0x4]
00a6d225 : MOV dword ptr [EAX],EBX
00a6d227 : MOV byte ptr [EBP + -0x4],0x0
00a6d22b : LEA EAX,[EBP + -0x60]
00a6d22e : PUSH EAX
00a6d22f : CALL 0x004403d0
00a6d234 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6d23b : CMP dword ptr [EBP + -0x68],0x0
00a6d23f : JZ 0x00a6d3b1
00a6d245 : MOV ECX,dword ptr [EBP + -0x74]
00a6d248 : PUSH ECX
00a6d249 : CALL dword ptr [0x00b8511c]
00a6d24f : MOV dword ptr [EBP + -0x68],0x0
00a6d256 : JMP 0x00a6d3b1
00a6d25b : MOV dword ptr [EBP + -0x4],0xffffffff
00a6d262 : CMP dword ptr [EBP + -0x68],ESI
00a6d265 : JZ 0x00a6d274
00a6d267 : MOV EDX,dword ptr [EBP + -0x74]
00a6d26a : PUSH EDX
00a6d26b : CALL dword ptr [0x00b8511c]
00a6d271 : MOV dword ptr [EBP + -0x68],ESI
00a6d274 : PUSH EDI
00a6d275 : MOV ECX,EBX
00a6d277 : CALL 0x00a6bba0
00a6d27c : MOV ESI,EAX
00a6d27e : MOV ECX,EBX
00a6d280 : TEST ESI,ESI
00a6d282 : JZ 0x00a6d31c
00a6d288 : MOV EDI,ESI
00a6d28a : CALL 0x00a6b780
00a6d28f : MOV EDI,EAX
00a6d291 : TEST EDI,EDI
00a6d293 : JNZ 0x00a6d2a0
00a6d295 : PUSH EAX
00a6d296 : PUSH EBX
00a6d297 : MOV EDI,ESI
00a6d299 : CALL 0x00a6d020
00a6d29e : JMP 0x00a6d2cd
00a6d2a0 : CMP byte ptr [EBP + 0xc],0x0
00a6d2a4 : JZ 0x00a6d2eb
00a6d2a6 : MOV EAX,dword ptr [EDI]
00a6d2a8 : MOV EDX,dword ptr [EAX + 0x30]
00a6d2ab : MOV ECX,EDI
00a6d2ad : CALL EDX
00a6d2af : TEST AL,AL
00a6d2b1 : JNZ 0x00a6d2cd
00a6d2b3 : CMP byte ptr [EDI + 0x5],AL
00a6d2b6 : JNZ 0x00a6d3b1
00a6d2bc : MOV EAX,dword ptr [EDI]
00a6d2be : MOV EDX,dword ptr [EAX + 0x34]
00a6d2c1 : MOV ECX,EDI
00a6d2c3 : CALL EDX
00a6d2c5 : TEST AL,AL
00a6d2c7 : JNZ 0x00a6d3b1
00a6d2cd : CMP byte ptr [EBP + 0xc],0x0
00a6d2d1 : JZ 0x00a6d2eb
00a6d2d3 : CMP byte ptr [EBX + 0x5c],0x0
00a6d2d7 : JZ 0x00a6d3b1
00a6d2dd : MOV EAX,dword ptr [EDI]
00a6d2df : MOV EDX,dword ptr [EAX + 0x20]
00a6d2e2 : MOV ECX,EDI
00a6d2e4 : CALL EDX
00a6d2e6 : JMP 0x00a6d3b1
00a6d2eb : CMP byte ptr [EDI + 0x5],0x0
00a6d2ef : JNZ 0x00a6d2fb
00a6d2f1 : CMP byte ptr [EBP + 0x10],0x0
00a6d2f5 : JZ 0x00a6d3b1
00a6d2fb : CMP byte ptr [EBX + 0x5c],0x0
00a6d2ff : JZ 0x00a6d3b1
00a6d305 : MOV EAX,dword ptr [EDI]
00a6d307 : MOV EDX,dword ptr [EAX + 0x24]
00a6d30a : MOV ECX,EDI
00a6d30c : CALL EDX
00a6d30e : MOV ECX,EDI
00a6d310 : MOV EDX,EBX
00a6d312 : CALL 0x00a6c0d0
00a6d317 : JMP 0x00a6d3b1
00a6d31c : PUSH EDI
00a6d31d : CALL 0x00a6bad0
00a6d322 : MOV EDI,EAX
00a6d324 : TEST EDI,EDI
00a6d326 : JZ 0x00a6d3b1
00a6d32c : MOV ECX,EBX
00a6d32e : CALL 0x00a6b6b0
00a6d333 : MOV ESI,EAX
00a6d335 : TEST ESI,ESI
00a6d337 : JNZ 0x00a6d344
00a6d339 : MOV ESI,EBX
00a6d33b : CALL 0x00a6c940
00a6d340 : MOV ESI,EDI
00a6d342 : JMP 0x00a6d360
00a6d344 : CMP byte ptr [EBP + 0xc],0x0
00a6d348 : JZ 0x00a6d37a
00a6d34a : MOV EAX,EDI
00a6d34c : CALL 0x00794bc0
00a6d351 : TEST AL,AL
00a6d353 : JNZ 0x00a6d360
00a6d355 : MOV EAX,EDI
00a6d357 : CALL 0x00794ba0
00a6d35c : TEST AL,AL
00a6d35e : JNZ 0x00a6d3b1
00a6d360 : CMP byte ptr [EBP + 0xc],0x0
00a6d364 : JZ 0x00a6d37a
00a6d366 : CMP byte ptr [EBX + 0x5c],0x0
00a6d36a : JZ 0x00a6d3b1
00a6d36c : MOV EAX,dword ptr [ESI]
00a6d36e : MOV EDX,dword ptr [EAX + 0xd0]
00a6d374 : MOV ECX,ESI
00a6d376 : CALL EDX
00a6d378 : JMP 0x00a6d3b1
00a6d37a : MOV EAX,dword ptr [ESI + 0x17c]
00a6d380 : TEST EAX,EAX
00a6d382 : JZ 0x00a6d392
00a6d384 : MOVSS XMM0,dword ptr [EAX + 0x24]
00a6d389 : COMISS XMM0,dword ptr [0x00cdf16c]
00a6d390 : JNC 0x00a6d398
00a6d392 : CMP byte ptr [EBP + 0x10],0x0
00a6d396 : JZ 0x00a6d3b1
00a6d398 : CMP byte ptr [EBX + 0x5c],0x0
00a6d39c : JZ 0x00a6d3b1
00a6d39e : MOV EAX,dword ptr [ESI]
00a6d3a0 : MOV EDX,dword ptr [EAX + 0xd4]
00a6d3a6 : MOV ECX,ESI
00a6d3a8 : CALL EDX
00a6d3aa : MOV ECX,EBX
00a6d3ac : CALL 0x00a6b5d0
00a6d3b1 : MOV ECX,dword ptr [EBP + -0xc]
00a6d3b4 : MOV dword ptr FS:[0x0],ECX
00a6d3bb : POP ECX
00a6d3bc : POP EDI
00a6d3bd : POP ESI
00a6d3be : POP EBX
00a6d3bf : MOV ECX,dword ptr [EBP + -0x10]
00a6d3c2 : XOR ECX,EBP
00a6d3c4 : CALL 0x00633e6b
00a6d3c9 : MOV ESP,EBP
00a6d3cb : POP EBP
00a6d3cc : RET 0x10
