PROGRAM  : Maestia.exe
FUNCTION : FUN_00530980
ENTRY    : 00530980
BODY     : [[00530980, 00530a6b]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00530980(int param_1,int param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int in_ECX;
  undefined1 local_10 [8];
  undefined4 uStack_8;
  int iStack_4;
  
  iVar2 = FUN_00530910(param_2);
  if (iVar2 != 0) {
    *(uint *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1U & 0x8fffffff;
  }
  local_10[0] = 0;
  cVar1 = (**(code **)(*(int *)(*(int *)(in_ECX + 0x2a0) + 0x10) + 0x2c))
                    (param_1 + 0x78,in_ECX + 8 + param_2 * 4,local_10);
  if ((cVar1 != '\0') && (iVar3 = FUN_00526fa0(uStack_8), iVar3 != 0)) {
    *(uint *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1U & 0x8fffffff;
    cVar1 = (**(code **)(*(int *)(iVar3 + 0x10) + 0x2c))
                      (param_1 + 0x78,in_ECX + 0x130,&stack0xffffffe4);
    if (cVar1 != '\0') {
      iStack_4 = FUN_00526fa0(uStack_8);
      if (iStack_4 != 0) {
        *(uint *)(iStack_4 + 8) = *(int *)(iStack_4 + 8) + 1U & 0x8fffffff;
      }
      if (iVar2 != 0) {
        FUN_00503db0();
      }
    }
    FUN_00503db0();
  }
  FUN_00526bc0();
  iVar2 = iStack_4;
  if (iStack_4 != 0) {
    FUN_00503db0();
  }
  return iVar2;
}



============================================================
DISASSEMBLY
============================================================
00530980 : SUB ESP,0x10
00530983 : PUSH EBX
00530984 : PUSH EBP
00530985 : MOV EBP,dword ptr [ESP + 0x20]
00530989 : PUSH ESI
0053098a : PUSH EDI
0053098b : PUSH EBP
0053098c : MOV ESI,ECX
0053098e : CALL 0x00530910
00530993 : MOV EBX,EAX
00530995 : TEST EBX,EBX
00530997 : JZ 0x005309a5
00530999 : MOV EAX,dword ptr [EBX + 0x8]
0053099c : INC EAX
0053099d : AND EAX,0x8fffffff
005309a2 : MOV dword ptr [EBX + 0x8],EAX
005309a5 : MOV ECX,dword ptr [ESI + 0x2a0]
005309ab : MOV EDI,dword ptr [ESP + 0x24]
005309af : LEA EAX,[ESP + 0x10]
005309b3 : PUSH EAX
005309b4 : ADD ECX,0x10
005309b7 : LEA EAX,[ESI + EBP*0x4 + 0x8]
005309bb : MOV byte ptr [ESP + 0x14],0x0
005309c0 : MOV EDX,dword ptr [ECX]
005309c2 : MOV EDX,dword ptr [EDX + 0x2c]
005309c5 : PUSH EAX
005309c6 : ADD EDI,0x78
005309c9 : PUSH EDI
005309ca : MOV dword ptr [ESP + 0x34],EBX
005309ce : CALL EDX
005309d0 : TEST AL,AL
005309d2 : JZ 0x00530a48
005309d4 : MOV EAX,dword ptr [ESP + 0x24]
005309d8 : PUSH EAX
005309d9 : LEA ECX,[ESP + 0x14]
005309dd : CALL 0x00526fa0
005309e2 : MOV EBP,EAX
005309e4 : TEST EBP,EBP
005309e6 : JZ 0x00530a48
005309e8 : MOV ECX,dword ptr [EBP + 0x8]
005309eb : INC ECX
005309ec : AND ECX,0x8fffffff
005309f2 : MOV dword ptr [EBP + 0x8],ECX
005309f5 : MOV EDX,dword ptr [EBP + 0x10]
005309f8 : MOV EDX,dword ptr [EDX + 0x2c]
005309fb : LEA EAX,[ESP + 0x10]
005309ff : PUSH EAX
00530a00 : LEA ECX,[EBP + 0x10]
00530a03 : ADD ESI,0x130
00530a09 : PUSH ESI
00530a0a : PUSH EDI
00530a0b : CALL EDX
00530a0d : TEST AL,AL
00530a0f : JZ 0x00530a41
00530a11 : MOV EAX,dword ptr [ESP + 0x24]
00530a15 : PUSH EAX
00530a16 : LEA ECX,[ESP + 0x14]
00530a1a : CALL 0x00526fa0
00530a1f : MOV ESI,EAX
00530a21 : TEST ESI,ESI
00530a23 : JZ 0x00530a32
00530a25 : MOV ECX,dword ptr [ESI + 0x8]
00530a28 : INC ECX
00530a29 : AND ECX,0x8fffffff
00530a2f : MOV dword ptr [ESI + 0x8],ECX
00530a32 : TEST EBX,EBX
00530a34 : JZ 0x00530a3d
00530a36 : MOV ECX,EBX
00530a38 : CALL 0x00503db0
00530a3d : MOV dword ptr [ESP + 0x28],ESI
00530a41 : MOV ECX,EBP
00530a43 : CALL 0x00503db0
00530a48 : LEA ECX,[ESP + 0x10]
00530a4c : CALL 0x00526bc0
00530a51 : MOV ESI,dword ptr [ESP + 0x28]
00530a55 : TEST ESI,ESI
00530a57 : JZ 0x00530a60
00530a59 : MOV ECX,ESI
00530a5b : CALL 0x00503db0
00530a60 : POP EDI
00530a61 : MOV EAX,ESI
00530a63 : POP ESI
00530a64 : POP EBP
00530a65 : POP EBX
00530a66 : ADD ESP,0x10
00530a69 : RET 0x8
