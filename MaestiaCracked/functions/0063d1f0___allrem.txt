PROGRAM  : Maestia.exe
FUNCTION : __allrem
ENTRY    : 0063d1f0
BODY     : [[0063d1f0, 0063d2a1]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __allrem
   
   Library: Visual Studio 2008 Release */

undefined8 __allrem(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  bool bVar12;
  bool bVar13;
  
  bVar13 = (int)param_2 < 0;
  if (bVar13) {
    bVar12 = param_1 != 0;
    param_1 = -param_1;
    param_2 = -(uint)bVar12 - param_2;
  }
  uVar11 = (uint)bVar13;
  if ((int)param_4 < 0) {
    bVar13 = param_3 != 0;
    param_3 = -param_3;
    param_4 = -(uint)bVar13 - param_4;
  }
  uVar3 = param_1;
  uVar4 = param_3;
  uVar8 = param_2;
  uVar9 = param_4;
  if (param_4 == 0) {
    iVar5 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) %
                 (ulonglong)param_3);
    iVar6 = 0;
    if ((int)(uVar11 - 1) < 0) goto LAB_0063d29d;
  }
  else {
    do {
      uVar10 = uVar9 >> 1;
      uVar4 = uVar4 >> 1 | (uint)((uVar9 & 1) != 0) << 0x1f;
      uVar7 = uVar8 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar8 & 1) != 0) << 0x1f;
      uVar8 = uVar7;
      uVar9 = uVar10;
    } while (uVar10 != 0);
    uVar1 = CONCAT44(uVar7,uVar3) / (ulonglong)uVar4;
    uVar3 = (int)uVar1 * param_4;
    lVar2 = (uVar1 & 0xffffffff) * (ulonglong)param_3;
    uVar8 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar4 = (uint)lVar2;
    uVar9 = uVar8 + uVar3;
    if (((CARRY4(uVar8,uVar3)) || (param_2 < uVar9)) || ((param_2 <= uVar9 && (param_1 < uVar4)))) {
      bVar13 = uVar4 < param_3;
      uVar4 = uVar4 - param_3;
      uVar9 = (uVar9 - param_4) - (uint)bVar13;
    }
    iVar5 = uVar4 - param_1;
    iVar6 = (uVar9 - param_2) - (uint)(uVar4 < param_1);
    if (-1 < (int)(uVar11 - 1)) goto LAB_0063d29d;
  }
  bVar13 = iVar5 != 0;
  iVar5 = -iVar5;
  iVar6 = -(uint)bVar13 - iVar6;
LAB_0063d29d:
  return CONCAT44(iVar6,iVar5);
}



============================================================
DISASSEMBLY
============================================================
0063d1f0 : PUSH EBX
0063d1f1 : PUSH EDI
0063d1f2 : XOR EDI,EDI
0063d1f4 : MOV EAX,dword ptr [ESP + 0x10]
0063d1f8 : OR EAX,EAX
0063d1fa : JGE 0x0063d210
0063d1fc : INC EDI
0063d1fd : MOV EDX,dword ptr [ESP + 0xc]
0063d201 : NEG EAX
0063d203 : NEG EDX
0063d205 : SBB EAX,0x0
0063d208 : MOV dword ptr [ESP + 0x10],EAX
0063d20c : MOV dword ptr [ESP + 0xc],EDX
0063d210 : MOV EAX,dword ptr [ESP + 0x18]
0063d214 : OR EAX,EAX
0063d216 : JGE 0x0063d22b
0063d218 : MOV EDX,dword ptr [ESP + 0x14]
0063d21c : NEG EAX
0063d21e : NEG EDX
0063d220 : SBB EAX,0x0
0063d223 : MOV dword ptr [ESP + 0x18],EAX
0063d227 : MOV dword ptr [ESP + 0x14],EDX
0063d22b : OR EAX,EAX
0063d22d : JNZ 0x0063d24a
0063d22f : MOV ECX,dword ptr [ESP + 0x14]
0063d233 : MOV EAX,dword ptr [ESP + 0x10]
0063d237 : XOR EDX,EDX
0063d239 : DIV ECX
0063d23b : MOV EAX,dword ptr [ESP + 0xc]
0063d23f : DIV ECX
0063d241 : MOV EAX,EDX
0063d243 : XOR EDX,EDX
0063d245 : DEC EDI
0063d246 : JNS 0x0063d296
0063d248 : JMP 0x0063d29d
0063d24a : MOV EBX,EAX
0063d24c : MOV ECX,dword ptr [ESP + 0x14]
0063d250 : MOV EDX,dword ptr [ESP + 0x10]
0063d254 : MOV EAX,dword ptr [ESP + 0xc]
0063d258 : SHR EBX,0x1
0063d25a : RCR ECX,0x1
0063d25c : SHR EDX,0x1
0063d25e : RCR EAX,0x1
0063d260 : OR EBX,EBX
0063d262 : JNZ 0x0063d258
0063d264 : DIV ECX
0063d266 : MOV ECX,EAX
0063d268 : MUL dword ptr [ESP + 0x18]
0063d26c : XCHG EAX,ECX
0063d26d : MUL dword ptr [ESP + 0x14]
0063d271 : ADD EDX,ECX
0063d273 : JC 0x0063d283
0063d275 : CMP EDX,dword ptr [ESP + 0x10]
0063d279 : JA 0x0063d283
0063d27b : JC 0x0063d28b
0063d27d : CMP EAX,dword ptr [ESP + 0xc]
0063d281 : JBE 0x0063d28b
0063d283 : SUB EAX,dword ptr [ESP + 0x14]
0063d287 : SBB EDX,dword ptr [ESP + 0x18]
0063d28b : SUB EAX,dword ptr [ESP + 0xc]
0063d28f : SBB EDX,dword ptr [ESP + 0x10]
0063d293 : DEC EDI
0063d294 : JNS 0x0063d29d
0063d296 : NEG EDX
0063d298 : NEG EAX
0063d29a : SBB EDX,0x0
0063d29d : POP EDI
0063d29e : POP EBX
0063d29f : RET 0x10
