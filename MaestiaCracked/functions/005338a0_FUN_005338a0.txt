PROGRAM  : Maestia.exe
FUNCTION : FUN_005338a0
ENTRY    : 005338a0
BODY     : [[005338a0, 00533a0b]]

============================================================
DECOMPILED C CODE
============================================================

undefined1
FUN_005338a0(char *param_1,undefined4 param_2,int param_3,undefined4 param_4,undefined4 param_5,
            undefined4 param_6)

{
  char *pcVar1;
  undefined4 uVar2;
  char cVar3;
  undefined1 uVar4;
  int iVar5;
  int local_30;
  int local_2c;
  int local_28;
  byte local_24;
  char local_20 [16];
  undefined1 local_10 [16];
  
  uVar2 = param_4;
  pcVar1 = param_1;
  if ((param_1 != (char *)0x0) && (*param_1 != '\0')) {
    local_30 = 0;
    local_10[0] = 0;
    local_20[0] = '\0';
    param_1 = (char *)FUN_00525530(param_1);
    *(int *)((int)param_1 + 8) = *(int *)((int)param_1 + 8) + 1;
    cVar3 = FUN_005331f0(&param_1,local_10,0,&local_30,local_20,0);
    *(int *)((int)param_1 + 8) = *(int *)((int)param_1 + 8) + -1;
    if (*(int *)((int)param_1 + 8) == 0) {
      FUN_00525340();
    }
    if (cVar3 != '\0') {
      FUN_00527140(&local_2c,uVar2);
      if (local_2c != 0) {
        if ((local_20[0] == '\a') || (local_20[0] == '\x06')) {
          iVar5 = FUN_005270f0(uVar2);
        }
        else {
          iVar5 = param_3;
          if (local_30 != 0) {
            iVar5 = local_30 + 0x68;
          }
        }
        uVar4 = FUN_0052c930(local_10,param_2,iVar5,uVar2,param_5,param_6,pcVar1);
        if (((local_24 & 2) == 0) && (local_2c != 0)) {
          FUN_00503db0();
        }
        local_2c = 0;
        if (((local_24 & 1) == 0) && (local_28 != 0)) {
          FUN_00503db0();
        }
        local_28 = 0;
        FUN_00526bc0();
        FUN_00526bc0();
        return uVar4;
      }
      local_2c = 0;
      if (((local_24 & 1) == 0) && (local_28 != 0)) {
        FUN_00503db0();
      }
      local_28 = 0;
    }
    FUN_00526bc0();
    FUN_00526bc0();
    return 0;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
005338a0 : SUB ESP,0x30
005338a3 : PUSH EBP
005338a4 : PUSH EDI
005338a5 : MOV EDI,dword ptr [ESP + 0x3c]
005338a9 : XOR EBP,EBP
005338ab : CMP EDI,EBP
005338ad : JZ 0x00533a04
005338b3 : CMP byte ptr [EDI],0x0
005338b6 : JZ 0x00533a04
005338bc : PUSH EBX
005338bd : PUSH ESI
005338be : MOV ESI,dword ptr [ESP + 0x50]
005338c2 : MOV EAX,dword ptr [ESI + 0x78]
005338c5 : PUSH EDI
005338c6 : LEA ECX,[EAX + 0x254]
005338cc : MOV dword ptr [ESP + 0x14],EBP
005338d0 : MOV byte ptr [ESP + 0x34],0x0
005338d5 : MOV byte ptr [ESP + 0x24],0x0
005338da : CALL 0x00525530
005338df : MOV dword ptr [ESP + 0x44],EAX
005338e3 : INC dword ptr [EAX + 0x8]
005338e6 : PUSH EBP
005338e7 : LEA EAX,[ESP + 0x24]
005338eb : PUSH EAX
005338ec : LEA ECX,[ESP + 0x18]
005338f0 : PUSH ECX
005338f1 : PUSH EBP
005338f2 : LEA EDX,[ESP + 0x40]
005338f6 : PUSH EDX
005338f7 : LEA EAX,[ESP + 0x58]
005338fb : PUSH EAX
005338fc : MOV ECX,ESI
005338fe : CALL 0x005331f0
00533903 : TEST AL,AL
00533905 : MOV EAX,dword ptr [ESP + 0x44]
00533909 : SETZ BL
0053390c : DEC dword ptr [EAX + 0x8]
0053390f : MOV ECX,EAX
00533911 : ADD EAX,0x8
00533914 : CMP dword ptr [EAX],EBP
00533916 : JNZ 0x0053391d
00533918 : CALL 0x00525340
0053391d : TEST BL,BL
0053391f : JNZ 0x00533952
00533921 : PUSH ESI
00533922 : LEA ECX,[ESP + 0x18]
00533926 : PUSH ECX
00533927 : LEA ECX,[ESP + 0x38]
0053392b : CALL 0x00527140
00533930 : CMP dword ptr [ESP + 0x14],EBP
00533934 : JNZ 0x0053396e
00533936 : TEST byte ptr [ESP + 0x1c],0x1
0053393b : MOV dword ptr [ESP + 0x14],EBP
0053393f : JNZ 0x0053394e
00533941 : MOV ECX,dword ptr [ESP + 0x18]
00533945 : CMP ECX,EBP
00533947 : JZ 0x0053394e
00533949 : CALL 0x00503db0
0053394e : MOV dword ptr [ESP + 0x18],EBP
00533952 : LEA ECX,[ESP + 0x20]
00533956 : CALL 0x00526bc0
0053395b : LEA ECX,[ESP + 0x30]
0053395f : CALL 0x00526bc0
00533964 : POP ESI
00533965 : POP EBX
00533966 : POP EDI
00533967 : XOR AL,AL
00533969 : POP EBP
0053396a : ADD ESP,0x30
0053396d : RET
0053396e : MOV AL,byte ptr [ESP + 0x20]
00533972 : CMP AL,0x7
00533974 : JZ 0x00533987
00533976 : CMP AL,0x6
00533978 : JZ 0x00533987
0053397a : MOV EAX,dword ptr [ESP + 0x10]
0053397e : CMP EAX,EBP
00533980 : JZ 0x00533993
00533982 : ADD EAX,0x68
00533985 : JMP 0x00533997
00533987 : PUSH ESI
00533988 : LEA ECX,[ESP + 0x24]
0053398c : CALL 0x005270f0
00533991 : JMP 0x00533997
00533993 : MOV EAX,dword ptr [ESP + 0x4c]
00533997 : MOV EDX,dword ptr [ESP + 0x58]
0053399b : MOV ECX,dword ptr [ESP + 0x54]
0053399f : PUSH EDI
005339a0 : PUSH EDX
005339a1 : MOV EDX,dword ptr [ESP + 0x50]
005339a5 : PUSH ECX
005339a6 : PUSH ESI
005339a7 : PUSH EAX
005339a8 : PUSH EDX
005339a9 : LEA EAX,[ESP + 0x48]
005339ad : PUSH EAX
005339ae : CALL 0x0052c930
005339b3 : ADD ESP,0x1c
005339b6 : TEST byte ptr [ESP + 0x1c],0x2
005339bb : MOV BL,AL
005339bd : JNZ 0x005339cc
005339bf : MOV ECX,dword ptr [ESP + 0x14]
005339c3 : CMP ECX,EBP
005339c5 : JZ 0x005339cc
005339c7 : CALL 0x00503db0
005339cc : TEST byte ptr [ESP + 0x1c],0x1
005339d1 : MOV dword ptr [ESP + 0x14],EBP
005339d5 : JNZ 0x005339e4
005339d7 : MOV ECX,dword ptr [ESP + 0x18]
005339db : CMP ECX,EBP
005339dd : JZ 0x005339e4
005339df : CALL 0x00503db0
005339e4 : LEA ECX,[ESP + 0x20]
005339e8 : MOV dword ptr [ESP + 0x18],EBP
005339ec : CALL 0x00526bc0
005339f1 : LEA ECX,[ESP + 0x30]
005339f5 : CALL 0x00526bc0
005339fa : POP ESI
005339fb : MOV AL,BL
005339fd : POP EBX
005339fe : POP EDI
005339ff : POP EBP
00533a00 : ADD ESP,0x30
00533a03 : RET
00533a04 : POP EDI
00533a05 : XOR AL,AL
00533a07 : POP EBP
00533a08 : ADD ESP,0x30
00533a0b : RET
