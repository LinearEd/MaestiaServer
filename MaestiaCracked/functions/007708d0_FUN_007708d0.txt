PROGRAM  : Maestia.exe
FUNCTION : FUN_007708d0
ENTRY    : 007708d0
BODY     : [[007708d0, 00770a5b]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007708d0(int param_1,undefined4 *param_2,int param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  int iVar6;
  short sVar7;
  short *psVar8;
  int in_EDX;
  int iVar9;
  int iVar10;
  float *pfVar11;
  undefined8 *puVar12;
  float10 fVar13;
  float fVar14;
  undefined4 *local_c;
  
  iVar6 = *(int *)(param_1 + 0x78);
  if (iVar6 + in_EDX < 0x400) {
    iVar9 = *(int *)(param_1 + 0x7c);
    *(int *)(param_1 + 0x7c) = iVar9 + -2 + in_EDX;
    iVar10 = 2;
    psVar8 = (short *)(param_1 + 0x9080 + iVar9 * 6);
    if (2 < in_EDX) {
      do {
        sVar7 = (short)iVar6;
        psVar8[1] = (short)iVar10 + -1 + sVar7;
        *psVar8 = sVar7;
        psVar8[2] = (short)iVar10 + sVar7;
        iVar10 = iVar10 + 1;
        psVar8 = psVar8 + 3;
      } while (iVar10 < in_EDX);
    }
    iVar9 = iVar6;
    if (0 < in_EDX) {
      local_c = param_2;
      puVar12 = (undefined8 *)((iVar6 + 0x508) * 0x10 + param_1);
      pfVar11 = (float *)(param_3 + 8);
      iVar10 = (int)param_2 - param_3;
      param_2 = (undefined4 *)(param_1 + 0x88 + iVar6 * 0xc);
      param_3 = in_EDX;
      do {
        param_2[-2] = *local_c;
        param_2[-1] = *(undefined4 *)(iVar10 + -4 + (int)pfVar11);
        *param_2 = *(undefined4 *)(iVar10 + (int)pfVar11);
        fVar14 = pfVar11[-2];
        fVar1 = *(float *)(param_1 + 0x10);
        fVar2 = pfVar11[-1];
        fVar3 = *(float *)(param_1 + 0xc);
        fVar4 = *pfVar11;
        fVar5 = *(float *)(param_1 + 0x14);
        fVar13 = (float10)FUN_0040f460(pfVar11[-1] * pfVar11[-1] + *pfVar11 * *pfVar11 +
                                       fVar14 * fVar14);
        fVar13 = ((float10)(fVar4 * fVar5 + fVar14 * fVar3 + fVar1 * fVar2) / fVar13 -
                 (float10)0.0001) * (float10)1.0001;
        fVar14 = (float)fVar13;
        if (fVar13 <= (float10)0) {
          fVar14 = 0.0;
        }
        *puVar12 = 0x3f800000;
        param_2 = param_2 + 3;
        local_c = local_c + 3;
        puVar12[1] = (ulonglong)(uint)fVar14 << 0x20;
        pfVar11 = pfVar11 + 3;
        puVar12 = puVar12 + 2;
        param_3 = param_3 + -1;
        iVar9 = iVar6 + in_EDX;
      } while (param_3 != 0);
    }
    *(int *)(param_1 + 0x78) = iVar9;
    return 1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007708d0 : PUSH EBP
007708d1 : MOV EBP,ESP
007708d3 : SUB ESP,0x28
007708d6 : MOV EAX,dword ptr [EBP + 0x8]
007708d9 : PUSH EBX
007708da : MOV EBX,dword ptr [EAX + 0x78]
007708dd : LEA ECX,[EBX + EDX*0x1]
007708e0 : CMP ECX,0x400
007708e6 : PUSH ESI
007708e7 : PUSH EDI
007708e8 : MOV dword ptr [EBP + -0xc],ECX
007708eb : JL 0x007708f8
007708ed : XOR AL,AL
007708ef : POP EDI
007708f0 : POP ESI
007708f1 : POP EBX
007708f2 : MOV ESP,EBP
007708f4 : POP EBP
007708f5 : RET 0xc
007708f8 : MOV ESI,dword ptr [EAX + 0x7c]
007708fb : LEA ECX,[ESI + ESI*0x2]
007708fe : LEA ESI,[ESI + EDX*0x1 + -0x2]
00770902 : MOV dword ptr [EAX + 0x7c],ESI
00770905 : MOV ESI,0x2
0077090a : CMP EDX,ESI
0077090c : LEA ECX,[EAX + ECX*0x2 + 0x9080]
00770913 : JLE 0x0077092f
00770915 : LEA EDI,[ESI + EBX*0x1 + -0x1]
00770919 : MOV word ptr [ECX + 0x2],DI
0077091d : LEA EDI,[ESI + EBX*0x1]
00770920 : MOV word ptr [ECX],BX
00770923 : MOV word ptr [ECX + 0x4],DI
00770927 : INC ESI
00770928 : ADD ECX,0x6
0077092b : CMP ESI,EDX
0077092d : JL 0x00770915
0077092f : TEST EDX,EDX
00770931 : JLE 0x00770a4e
00770937 : MOV ECX,dword ptr [EBP + 0xc]
0077093a : MOV ESI,dword ptr [EBP + 0x10]
0077093d : MOVSS XMM0,dword ptr [0x00c10fc4]
00770945 : LEA EDI,[EBX + 0x508]
0077094b : SHL EDI,0x4
0077094e : LEA EBX,[EBX + EBX*0x2]
00770951 : MOV dword ptr [EBP + -0x8],ECX
00770954 : ADD EDI,EAX
00770956 : ADD ESI,0x8
00770959 : SUB ECX,dword ptr [EBP + 0x10]
0077095c : LEA EBX,[EAX + EBX*0x4 + 0x88]
00770963 : MOVSS dword ptr [EBP + -0x24],XMM0
00770968 : XORPS XMM0,XMM0
0077096b : MOV dword ptr [EBP + 0xc],EBX
0077096e : MOV EBX,dword ptr [EBP + -0xc]
00770971 : MOVSS dword ptr [EBP + -0x20],XMM0
00770976 : MOVSS dword ptr [EBP + -0x1c],XMM0
0077097b : MOV dword ptr [EBP + -0x10],ECX
0077097e : MOV dword ptr [EBP + 0x10],EDX
00770981 : JMP 0x00770986
00770983 : MOV ECX,dword ptr [EBP + -0x10]
00770986 : MOV EDX,dword ptr [EBP + -0x8]
00770989 : FLD float ptr [EDX]
0077098b : MOV EDX,dword ptr [EBP + 0xc]
0077098e : FSTP float ptr [EDX + -0x8]
00770991 : PUSH ECX
00770992 : FLD float ptr [ECX + ESI*0x1 + -0x4]
00770996 : FSTP float ptr [EDX + -0x4]
00770999 : FLD float ptr [ECX + ESI*0x1]
0077099c : FSTP float ptr [EDX]
0077099e : MOVSS XMM2,dword ptr [ESI + -0x8]
007709a3 : FLD float ptr [EAX + 0x10]
007709a6 : MOVSS XMM1,dword ptr [ESI + -0x4]
007709ab : FMUL float ptr [ESI + -0x4]
007709ae : MOVSS XMM0,dword ptr [ESI]
007709b2 : MOVSS dword ptr [EBP + -0xc],XMM2
007709b7 : FLD float ptr [EBP + -0xc]
007709ba : MOVAPS XMM3,XMM1
007709bd : FMUL float ptr [EAX + 0xc]
007709c0 : MULSS XMM3,XMM1
007709c4 : MOVAPS XMM1,XMM0
007709c7 : MULSS XMM1,XMM0
007709cb : FADDP
007709cd : MOVAPS XMM0,XMM2
007709d0 : FLD float ptr [ESI]
007709d2 : ADDSS XMM3,XMM1
007709d6 : FMUL float ptr [EAX + 0x14]
007709d9 : MULSS XMM0,XMM2
007709dd : ADDSS XMM3,XMM0
007709e1 : MOVSS dword ptr [ESP],XMM3
007709e6 : FADDP
007709e8 : FSTP float ptr [EBP + -0x14]
007709eb : CALL 0x0040f460
007709f0 : FDIVR float ptr [EBP + -0x14]
007709f3 : ADD ESP,0x4
007709f6 : FSUB float ptr [0x00cdf398]
007709fc : FMUL float ptr [0x00cdf3e0]
00770a02 : FST float ptr [EBP + -0x14]
00770a05 : FLDZ
00770a07 : FXCH
00770a09 : FCOMIP ST0,ST1
00770a0b : FSTP ST0
00770a0d : JBE 0x00770a16
00770a0f : MOVSS XMM0,dword ptr [EBP + -0x14]
00770a14 : JMP 0x00770a19
00770a16 : XORPS XMM0,XMM0
00770a19 : MOVSS dword ptr [EBP + -0x18],XMM0
00770a1e : MOVQ XMM0,qword ptr [EBP + -0x24]
00770a23 : MOVQ qword ptr [EDI],XMM0
00770a27 : MOVQ XMM0,qword ptr [EBP + -0x1c]
00770a2c : MOV EAX,0xc
00770a31 : ADD dword ptr [EBP + 0xc],EAX
00770a34 : ADD dword ptr [EBP + -0x8],EAX
00770a37 : MOVQ qword ptr [EDI + 0x8],XMM0
00770a3c : ADD ESI,EAX
00770a3e : MOV EAX,dword ptr [EBP + 0x8]
00770a41 : ADD EDI,0x10
00770a44 : SUB dword ptr [EBP + 0x10],0x1
00770a48 : JNZ 0x00770983
00770a4e : POP EDI
00770a4f : MOV dword ptr [EAX + 0x78],EBX
00770a52 : POP ESI
00770a53 : MOV AL,0x1
00770a55 : POP EBX
00770a56 : MOV ESP,EBP
00770a58 : POP EBP
00770a59 : RET 0xc
