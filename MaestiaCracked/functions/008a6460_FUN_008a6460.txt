PROGRAM  : Maestia.exe
FUNCTION : FUN_008a6460
ENTRY    : 008a6460
BODY     : [[008a6460, 008a67b5] [008a67b8, 008a67f0] [008a67f3, 008a681e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008a6460(undefined4 param_1,undefined4 param_2)

{
  ushort uVar1;
  wchar_t wVar2;
  undefined1 uVar3;
  uint uVar4;
  undefined4 uVar5;
  ushort *puVar6;
  int iVar7;
  int iVar8;
  wchar_t *pwVar9;
  ushort *puVar10;
  wchar_t *pwVar11;
  int iVar12;
  bool bVar13;
  undefined1 auStack_7c [4];
  int *local_78;
  undefined1 local_74 [4];
  int local_70;
  int local_6c;
  undefined4 local_68;
  undefined1 local_64 [4];
  undefined2 local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  int local_44;
  int local_40;
  undefined4 local_3c;
  undefined1 local_38 [4];
  undefined2 local_34;
  undefined4 local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b44904;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_7c;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xffffff78;
  ExceptionList = &local_14;
  local_4c = 7;
  local_50 = 0;
  local_60 = 0;
  FUN_00406360(&DAT_00c49f7c,1);
  local_c = 0;
  uVar5 = FUN_00403dd0(param_2,uVar4);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_48,uVar5,local_64,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_20 = 7;
  local_24 = 0;
  local_34 = 0;
  local_c._0_1_ = 4;
  if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_60 = 0;
  local_4c = 7;
  local_50 = 0;
  local_20 = 7;
  local_24 = 0;
  local_34 = 0;
  FUN_00406360(&DAT_00c49f80,1);
  local_c._0_1_ = 5;
  uVar5 = FUN_00403dd0(param_2,uVar4);
  local_c._0_1_ = 6;
  FUN_0070cd60(local_74,uVar5,local_38,0);
  local_c = CONCAT31(local_c._1_3_,8);
  if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_4c = 7;
  local_50 = 0;
  local_60 = 0;
  local_c._0_1_ = 9;
  uVar3 = (undefined1)local_c;
  local_c._0_1_ = 9;
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_34 = 0;
  iVar7 = local_6c - local_70 >> 0x1f;
  local_20 = 7;
  local_24 = 0;
  if ((local_6c - local_70) / 0x1c + iVar7 != iVar7) {
    if (*(uint *)(local_70 + 0x18) < 8) {
      puVar6 = (ushort *)(local_70 + 4);
    }
    else {
      puVar6 = *(ushort **)(local_70 + 4);
    }
    puVar10 = &DAT_00c49f84;
    do {
      uVar1 = *puVar6;
      bVar13 = uVar1 < *puVar10;
      if (uVar1 != *puVar10) {
LAB_008a6646:
        iVar7 = (1 - (uint)bVar13) - (uint)(bVar13 != 0);
        goto LAB_008a664b;
      }
      if (uVar1 == 0) break;
      uVar1 = puVar6[1];
      bVar13 = uVar1 < puVar10[1];
      if (uVar1 != puVar10[1]) goto LAB_008a6646;
      puVar6 = puVar6 + 2;
      puVar10 = puVar10 + 2;
    } while (uVar1 != 0);
    iVar7 = 0;
LAB_008a664b:
    if (iVar7 == 0) {
      FUN_00406460(&DAT_00c49f90);
      local_c._0_1_ = 10;
      if (1 < (uint)((local_6c - local_70) / 0x1c)) {
        FUN_00405eb0(local_70 + 0x1c,0,0xffffffff);
      }
      FUN_008a6350(local_78);
      local_c._0_1_ = 9;
      if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_20 = 7;
      local_24 = 0;
      local_34 = 0;
      goto LAB_008a678c;
    }
  }
  iVar7 = local_40 - local_44 >> 0x1f;
  iVar12 = (local_40 - local_44) / 0x1c + iVar7;
  if (iVar12 == iVar7) {
LAB_008a6736:
    if (iVar12 == iVar7) goto LAB_008a678c;
    if (*(uint *)(local_44 + 0x18) < 8) {
      pwVar9 = (wchar_t *)(local_44 + 4);
    }
    else {
      pwVar9 = *(wchar_t **)(local_44 + 4);
    }
    pwVar11 = L"onClose";
    do {
      wVar2 = *pwVar9;
      bVar13 = (ushort)wVar2 < (ushort)*pwVar11;
      if (wVar2 != *pwVar11) {
LAB_008a6776:
        iVar7 = (1 - (uint)bVar13) - (uint)(bVar13 != 0);
        goto LAB_008a677b;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar9[1];
      bVar13 = (ushort)wVar2 < (ushort)pwVar11[1];
      if (wVar2 != pwVar11[1]) goto LAB_008a6776;
      pwVar9 = pwVar9 + 2;
      pwVar11 = pwVar11 + 2;
    } while (wVar2 != L'\0');
    iVar7 = 0;
LAB_008a677b:
    if (iVar7 != 0) goto LAB_008a678c;
  }
  else {
    if (*(uint *)(local_44 + 0x18) < 8) {
      pwVar9 = (wchar_t *)(local_44 + 4);
    }
    else {
      pwVar9 = *(wchar_t **)(local_44 + 4);
    }
    pwVar11 = L"onCancel";
    do {
      wVar2 = *pwVar9;
      bVar13 = (ushort)wVar2 < (ushort)*pwVar11;
      if (wVar2 != *pwVar11) {
LAB_008a672d:
        iVar8 = (1 - (uint)bVar13) - (uint)(bVar13 != 0);
        goto LAB_008a6732;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar9[1];
      bVar13 = (ushort)wVar2 < (ushort)pwVar11[1];
      if (wVar2 != pwVar11[1]) goto LAB_008a672d;
      pwVar9 = pwVar9 + 2;
      pwVar11 = pwVar11 + 2;
    } while (wVar2 != L'\0');
    iVar8 = 0;
LAB_008a6732:
    if (iVar8 != 0) goto LAB_008a6736;
  }
  local_c._0_1_ = uVar3;
  (**(code **)(*local_78 + 0x20))();
LAB_008a678c:
  local_c = CONCAT31(local_c._1_3_,4);
  if (local_70 != 0) {
    FUN_00405450(local_78);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_70 = 0;
  local_6c = 0;
  local_68 = 0;
  local_c = 0xffffffff;
  if (local_44 == 0) {
    local_44 = 0;
    local_40 = 0;
    local_3c = 0;
    ExceptionList = local_14;
    __security_check_cookie(local_1c ^ (uint)auStack_7c);
    return;
  }
  FUN_00405450(local_78);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008a6460 : PUSH EBP
008a6461 : MOV EBP,ESP
008a6463 : AND ESP,0xfffffff8
008a6466 : PUSH -0x1
008a6468 : PUSH 0xb44904
008a646d : MOV EAX,FS:[0x0]
008a6473 : PUSH EAX
008a6474 : SUB ESP,0x68
008a6477 : MOV EAX,[0x00d66fa0]
008a647c : XOR EAX,ESP
008a647e : MOV dword ptr [ESP + 0x60],EAX
008a6482 : PUSH EBX
008a6483 : PUSH ESI
008a6484 : PUSH EDI
008a6485 : MOV EAX,[0x00d66fa0]
008a648a : XOR EAX,ESP
008a648c : PUSH EAX
008a648d : LEA EAX,[ESP + 0x78]
008a6491 : MOV FS:[0x0],EAX
008a6497 : MOV EDI,dword ptr [EBP + 0xc]
008a649a : PUSH 0x1
008a649c : MOV dword ptr [ESP + 0x18],ECX
008a64a0 : XOR EAX,EAX
008a64a2 : MOV EBX,0x7
008a64a7 : XOR ESI,ESI
008a64a9 : PUSH 0xc49f7c
008a64ae : LEA ECX,[ESP + 0x30]
008a64b2 : MOV dword ptr [ESP + 0x48],EBX
008a64b6 : MOV dword ptr [ESP + 0x44],ESI
008a64ba : MOV word ptr [ESP + 0x34],AX
008a64bf : CALL 0x00406360
008a64c4 : MOV dword ptr [ESP + 0x80],ESI
008a64cb : PUSH EDI
008a64cc : LEA ESI,[ESP + 0x58]
008a64d0 : CALL 0x00403dd0
008a64d5 : ADD ESP,0x4
008a64d8 : MOV byte ptr [ESP + 0x80],0x1
008a64e0 : XOR ESI,ESI
008a64e2 : PUSH ESI
008a64e3 : LEA ECX,[ESP + 0x2c]
008a64e7 : PUSH ECX
008a64e8 : PUSH EAX
008a64e9 : LEA EDX,[ESP + 0x50]
008a64ed : PUSH EDX
008a64ee : CALL 0x0070cd60
008a64f3 : ADD ESP,0x10
008a64f6 : MOV byte ptr [ESP + 0x80],0x3
008a64fe : CMP dword ptr [ESP + 0x6c],0x8
008a6503 : JC 0x008a650e
008a6505 : MOV ECX,dword ptr [ESP + 0x58]
008a6509 : CALL 0x006f04e0
008a650e : XOR EAX,EAX
008a6510 : MOV dword ptr [ESP + 0x6c],EBX
008a6514 : MOV dword ptr [ESP + 0x68],ESI
008a6518 : MOV word ptr [ESP + 0x58],AX
008a651d : MOV byte ptr [ESP + 0x80],0x4
008a6525 : CMP dword ptr [ESP + 0x40],0x8
008a652a : JC 0x008a6535
008a652c : MOV ECX,dword ptr [ESP + 0x2c]
008a6530 : CALL 0x006f04e0
008a6535 : XOR ECX,ECX
008a6537 : PUSH 0x1
008a6539 : MOV word ptr [ESP + 0x30],CX
008a653e : XOR EDX,EDX
008a6540 : PUSH 0xc49f80
008a6545 : LEA ECX,[ESP + 0x5c]
008a6549 : MOV dword ptr [ESP + 0x48],EBX
008a654d : MOV dword ptr [ESP + 0x44],ESI
008a6551 : MOV dword ptr [ESP + 0x74],EBX
008a6555 : MOV dword ptr [ESP + 0x70],ESI
008a6559 : MOV word ptr [ESP + 0x60],DX
008a655e : CALL 0x00406360
008a6563 : MOV byte ptr [ESP + 0x80],0x5
008a656b : PUSH EDI
008a656c : LEA ESI,[ESP + 0x2c]
008a6570 : CALL 0x00403dd0
008a6575 : ADD ESP,0x4
008a6578 : MOV byte ptr [ESP + 0x80],0x6
008a6580 : XOR EDI,EDI
008a6582 : PUSH EDI
008a6583 : LEA ECX,[ESP + 0x58]
008a6587 : PUSH ECX
008a6588 : PUSH EAX
008a6589 : LEA EDX,[ESP + 0x24]
008a658d : PUSH EDX
008a658e : CALL 0x0070cd60
008a6593 : ADD ESP,0x10
008a6596 : MOV byte ptr [ESP + 0x80],0x8
008a659e : MOV ESI,0x8
008a65a3 : CMP dword ptr [ESP + 0x40],ESI
008a65a7 : JC 0x008a65b2
008a65a9 : MOV ECX,dword ptr [ESP + 0x2c]
008a65ad : CALL 0x006f04e0
008a65b2 : XOR EAX,EAX
008a65b4 : MOV dword ptr [ESP + 0x40],EBX
008a65b8 : MOV dword ptr [ESP + 0x3c],EDI
008a65bc : MOV word ptr [ESP + 0x2c],AX
008a65c1 : MOV byte ptr [ESP + 0x80],0x9
008a65c9 : CMP dword ptr [ESP + 0x6c],ESI
008a65cd : JC 0x008a65d8
008a65cf : MOV ECX,dword ptr [ESP + 0x58]
008a65d3 : CALL 0x006f04e0
008a65d8 : MOV ESI,dword ptr [ESP + 0x1c]
008a65dc : XOR ECX,ECX
008a65de : MOV word ptr [ESP + 0x58],CX
008a65e3 : MOV ECX,dword ptr [ESP + 0x20]
008a65e7 : SUB ECX,ESI
008a65e9 : MOV EAX,0x92492493
008a65ee : IMUL ECX
008a65f0 : ADD EDX,ECX
008a65f2 : SAR EDX,0x4
008a65f5 : MOV EAX,EDX
008a65f7 : SHR EAX,0x1f
008a65fa : ADD EAX,EDX
008a65fc : MOV dword ptr [ESP + 0x6c],EBX
008a6600 : MOV dword ptr [ESP + 0x68],EDI
008a6604 : JZ 0x008a66d5
008a660a : CMP dword ptr [ESI + 0x18],0x8
008a660e : JC 0x008a6615
008a6610 : MOV EAX,dword ptr [ESI + 0x4]
008a6613 : JMP 0x008a6618
008a6615 : LEA EAX,[ESI + 0x4]
008a6618 : MOV ECX,0xc49f84
008a661d : LEA ECX,[ECX]
008a6620 : MOV DX,word ptr [EAX]
008a6623 : CMP DX,word ptr [ECX]
008a6626 : JNZ 0x008a6646
008a6628 : CMP DX,DI
008a662b : JZ 0x008a6642
008a662d : MOV DX,word ptr [EAX + 0x2]
008a6631 : CMP DX,word ptr [ECX + 0x2]
008a6635 : JNZ 0x008a6646
008a6637 : ADD EAX,0x4
008a663a : ADD ECX,0x4
008a663d : CMP DX,DI
008a6640 : JNZ 0x008a6620
008a6642 : XOR EAX,EAX
008a6644 : JMP 0x008a664b
008a6646 : SBB EAX,EAX
008a6648 : SBB EAX,-0x1
008a664b : CMP EAX,EDI
008a664d : JNZ 0x008a66d5
008a6653 : PUSH 0xc49f90
008a6658 : LEA ECX,[ESP + 0x58]
008a665c : CALL 0x00406460
008a6661 : MOV byte ptr [ESP + 0x80],0xa
008a6669 : MOV ECX,dword ptr [ESP + 0x20]
008a666d : MOV ESI,dword ptr [ESP + 0x1c]
008a6671 : SUB ECX,ESI
008a6673 : MOV EAX,0x92492493
008a6678 : IMUL ECX
008a667a : ADD EDX,ECX
008a667c : SAR EDX,0x4
008a667f : MOV ECX,EDX
008a6681 : SHR ECX,0x1f
008a6684 : ADD ECX,EDX
008a6686 : CMP ECX,0x1
008a6689 : JBE 0x008a669b
008a668b : PUSH -0x1
008a668d : LEA EAX,[ESI + 0x1c]
008a6690 : PUSH EDI
008a6691 : PUSH EAX
008a6692 : LEA ECX,[ESP + 0x60]
008a6696 : CALL 0x00405eb0
008a669b : MOV EDX,dword ptr [ESP + 0x14]
008a669f : PUSH EDX
008a66a0 : LEA ECX,[ESP + 0x58]
008a66a4 : CALL 0x008a6350
008a66a9 : MOV byte ptr [ESP + 0x80],0x9
008a66b1 : CMP dword ptr [ESP + 0x6c],0x8
008a66b6 : JC 0x008a66c1
008a66b8 : MOV ECX,dword ptr [ESP + 0x58]
008a66bc : CALL 0x006f04e0
008a66c1 : XOR EAX,EAX
008a66c3 : MOV dword ptr [ESP + 0x6c],EBX
008a66c7 : MOV dword ptr [ESP + 0x68],EDI
008a66cb : MOV word ptr [ESP + 0x58],AX
008a66d0 : JMP 0x008a678c
008a66d5 : MOV ECX,dword ptr [ESP + 0x4c]
008a66d9 : MOV EDI,dword ptr [ESP + 0x48]
008a66dd : SUB ECX,EDI
008a66df : MOV EAX,0x92492493
008a66e4 : IMUL ECX
008a66e6 : ADD EDX,ECX
008a66e8 : SAR EDX,0x4
008a66eb : MOV ESI,EDX
008a66ed : SHR ESI,0x1f
008a66f0 : ADD ESI,EDX
008a66f2 : JZ 0x008a6736
008a66f4 : CMP dword ptr [EDI + 0x18],0x8
008a66f8 : JC 0x008a66ff
008a66fa : MOV EAX,dword ptr [EDI + 0x4]
008a66fd : JMP 0x008a6702
008a66ff : LEA EAX,[EDI + 0x4]
008a6702 : MOV ECX,0xc49f94
008a6707 : MOV DX,word ptr [EAX]
008a670a : CMP DX,word ptr [ECX]
008a670d : JNZ 0x008a672d
008a670f : TEST DX,DX
008a6712 : JZ 0x008a6729
008a6714 : MOV DX,word ptr [EAX + 0x2]
008a6718 : CMP DX,word ptr [ECX + 0x2]
008a671c : JNZ 0x008a672d
008a671e : ADD EAX,0x4
008a6721 : ADD ECX,0x4
008a6724 : TEST DX,DX
008a6727 : JNZ 0x008a6707
008a6729 : XOR EAX,EAX
008a672b : JMP 0x008a6732
008a672d : SBB EAX,EAX
008a672f : SBB EAX,-0x1
008a6732 : TEST EAX,EAX
008a6734 : JZ 0x008a677f
008a6736 : TEST ESI,ESI
008a6738 : JZ 0x008a678a
008a673a : CMP dword ptr [EDI + 0x18],0x8
008a673e : JC 0x008a6745
008a6740 : MOV EAX,dword ptr [EDI + 0x4]
008a6743 : JMP 0x008a6748
008a6745 : LEA EAX,[EDI + 0x4]
008a6748 : MOV ECX,0xc49fa8
008a674d : LEA ECX,[ECX]
008a6750 : MOV DX,word ptr [EAX]
008a6753 : CMP DX,word ptr [ECX]
008a6756 : JNZ 0x008a6776
008a6758 : TEST DX,DX
008a675b : JZ 0x008a6772
008a675d : MOV DX,word ptr [EAX + 0x2]
008a6761 : CMP DX,word ptr [ECX + 0x2]
008a6765 : JNZ 0x008a6776
008a6767 : ADD EAX,0x4
008a676a : ADD ECX,0x4
008a676d : TEST DX,DX
008a6770 : JNZ 0x008a6750
008a6772 : XOR EAX,EAX
008a6774 : JMP 0x008a677b
008a6776 : SBB EAX,EAX
008a6778 : SBB EAX,-0x1
008a677b : TEST EAX,EAX
008a677d : JNZ 0x008a678a
008a677f : MOV ECX,dword ptr [ESP + 0x14]
008a6783 : MOV EDX,dword ptr [ECX]
008a6785 : MOV EAX,dword ptr [EDX + 0x20]
008a6788 : CALL EAX
008a678a : XOR EDI,EDI
008a678c : MOV byte ptr [ESP + 0x80],0x4
008a6794 : MOV EAX,dword ptr [ESP + 0x1c]
008a6798 : CMP EAX,EDI
008a679a : JZ 0x008a67b8
008a679c : MOV ECX,dword ptr [ESP + 0x14]
008a67a0 : MOV EDI,dword ptr [ESP + 0x20]
008a67a4 : PUSH ECX
008a67a5 : CALL 0x00405450
008a67aa : MOV ECX,dword ptr [ESP + 0x20]
008a67ae : ADD ESP,0x4
008a67b1 : CALL 0x006f04e0
008a67b8 : MOV dword ptr [ESP + 0x1c],EDI
008a67bc : MOV dword ptr [ESP + 0x20],EDI
008a67c0 : MOV dword ptr [ESP + 0x24],EDI
008a67c4 : MOV dword ptr [ESP + 0x80],0xffffffff
008a67cf : MOV EAX,dword ptr [ESP + 0x48]
008a67d3 : CMP EAX,EDI
008a67d5 : JZ 0x008a67f3
008a67d7 : MOV EDX,dword ptr [ESP + 0x14]
008a67db : MOV EDI,dword ptr [ESP + 0x4c]
008a67df : PUSH EDX
008a67e0 : CALL 0x00405450
008a67e5 : MOV ECX,dword ptr [ESP + 0x4c]
008a67e9 : ADD ESP,0x4
008a67ec : CALL 0x006f04e0
008a67f3 : MOV dword ptr [ESP + 0x48],EDI
008a67f7 : MOV dword ptr [ESP + 0x4c],EDI
008a67fb : MOV dword ptr [ESP + 0x50],EDI
008a67ff : MOV ECX,dword ptr [ESP + 0x78]
008a6803 : MOV dword ptr FS:[0x0],ECX
008a680a : POP ECX
008a680b : POP EDI
008a680c : POP ESI
008a680d : POP EBX
008a680e : MOV ECX,dword ptr [ESP + 0x60]
008a6812 : XOR ECX,ESP
008a6814 : CALL 0x00633e6b
008a6819 : MOV ESP,EBP
008a681b : POP EBP
008a681c : RET 0x8
