PROGRAM  : Maestia.exe
FUNCTION : FUN_00473350
ENTRY    : 00473350
BODY     : [[00473350, 00473424]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00473350(int param_1,int param_2,uint param_3)

{
  undefined4 *puVar1;
  uint uVar2;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7417a;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)(param_1 + 0x10) == '\0') {
    FUN_004717c0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    *(undefined4 *)(param_1 + 4) = 0;
    *(undefined4 *)(param_1 + 0xc) = 0;
  }
  *(undefined4 *)(param_1 + 8) = 0;
  if (*(char *)(param_1 + 0x10) != '\0') {
    *(undefined4 *)(param_1 + 0xc) = 0;
    *(undefined4 *)(param_1 + 4) = 0;
  }
  if (param_2 != 0) {
    uVar2 = 0;
    *(uint *)(param_1 + 0xc) = param_3 / 0x14;
    *(int *)(param_1 + 4) = param_2;
    if (param_3 / 0x14 != 0) {
      do {
        puVar1 = (undefined4 *)(*(int *)(param_1 + 4) + uVar2 * 0x14);
        if (puVar1 != (undefined4 *)0x0) {
          *puVar1 = 0;
          puVar1[1] = 0;
          puVar1[2] = 0;
        }
        uVar2 = uVar2 + 1;
      } while (uVar2 < *(uint *)(param_1 + 0xc));
    }
    *(undefined1 *)(param_1 + 0x10) = 1;
    ExceptionList = local_10;
    return;
  }
  *(undefined1 *)(param_1 + 0x10) = 0;
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00473350 : PUSH EBP
00473351 : MOV EBP,ESP
00473353 : PUSH -0x1
00473355 : PUSH 0xb7417a
0047335a : MOV EAX,FS:[0x0]
00473360 : PUSH EAX
00473361 : PUSH ECX
00473362 : PUSH EBX
00473363 : PUSH ESI
00473364 : PUSH EDI
00473365 : MOV EAX,[0x00d66fa0]
0047336a : XOR EAX,EBP
0047336c : PUSH EAX
0047336d : LEA EAX,[EBP + -0xc]
00473370 : MOV FS:[0x0],EAX
00473376 : MOV EDI,dword ptr [EBP + 0x8]
00473379 : XOR EBX,EBX
0047337b : CMP byte ptr [EDI + 0x10],BL
0047337e : JNZ 0x00473394
00473380 : MOV EAX,dword ptr [EDI + 0x4]
00473383 : LEA ESI,[EBP + -0x10]
00473386 : MOV dword ptr [EBP + -0x10],EAX
00473389 : CALL 0x004717c0
0047338e : MOV dword ptr [EDI + 0x4],EBX
00473391 : MOV dword ptr [EDI + 0xc],EBX
00473394 : MOV dword ptr [EDI + 0x8],EBX
00473397 : CMP byte ptr [EDI + 0x10],BL
0047339a : JZ 0x004733a2
0047339c : MOV dword ptr [EDI + 0xc],EBX
0047339f : MOV dword ptr [EDI + 0x4],EBX
004733a2 : MOV ECX,dword ptr [EBP + 0xc]
004733a5 : CMP ECX,EBX
004733a7 : JNZ 0x004733c0
004733a9 : MOV byte ptr [EDI + 0x10],BL
004733ac : MOV ECX,dword ptr [EBP + -0xc]
004733af : MOV dword ptr FS:[0x0],ECX
004733b6 : POP ECX
004733b7 : POP EDI
004733b8 : POP ESI
004733b9 : POP EBX
004733ba : MOV ESP,EBP
004733bc : POP EBP
004733bd : RET 0xc
004733c0 : MOV EAX,0xcccccccd
004733c5 : MUL dword ptr [EBP + 0x10]
004733c8 : SHR EDX,0x4
004733cb : XOR EAX,EAX
004733cd : MOV dword ptr [EDI + 0xc],EDX
004733d0 : MOV dword ptr [EDI + 0x4],ECX
004733d3 : MOV dword ptr [EBP + 0xc],EAX
004733d6 : CMP EDX,EBX
004733d8 : JBE 0x0047340d
004733da : XORPS XMM0,XMM0
004733dd : OR EDX,0xffffffff
004733e0 : MOV ESI,dword ptr [EDI + 0x4]
004733e3 : LEA ECX,[EAX + EAX*0x4]
004733e6 : LEA ECX,[ESI + ECX*0x4]
004733e9 : MOV dword ptr [EBP + 0x10],ECX
004733ec : MOV dword ptr [EBP + -0x4],EBX
004733ef : CMP ECX,EBX
004733f1 : JZ 0x00473401
004733f3 : MOVSS dword ptr [ECX],XMM0
004733f7 : MOVSS dword ptr [ECX + 0x4],XMM0
004733fc : MOVSS dword ptr [ECX + 0x8],XMM0
00473401 : MOV dword ptr [EBP + -0x4],EDX
00473404 : INC EAX
00473405 : MOV dword ptr [EBP + 0xc],EAX
00473408 : CMP EAX,dword ptr [EDI + 0xc]
0047340b : JC 0x004733e0
0047340d : MOV byte ptr [EDI + 0x10],0x1
00473411 : MOV ECX,dword ptr [EBP + -0xc]
00473414 : MOV dword ptr FS:[0x0],ECX
0047341b : POP ECX
0047341c : POP EDI
0047341d : POP ESI
0047341e : POP EBX
0047341f : MOV ESP,EBP
00473421 : POP EBP
00473422 : RET 0xc
