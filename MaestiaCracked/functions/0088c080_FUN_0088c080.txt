PROGRAM  : Maestia.exe
FUNCTION : FUN_0088c080
ENTRY    : 0088c080
BODY     : [[0088c080, 0088c28c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0088c080(int *param_1,uint param_2,undefined8 *param_3)

{
  undefined8 uVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  int *piVar6;
  int *piVar7;
  int in_ECX;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined8 local_34;
  int local_2c;
  undefined4 uStack_28;
  undefined1 uStack_24;
  undefined1 uStack_23;
  undefined2 uStack_22;
  undefined2 local_20;
  int *local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1c621;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_1c = param_1;
  FUN_004437f0(&local_1c);
  if (local_18 == *(int *)(iVar3 + 0x44)) {
    local_1c = (int *)0x0;
  }
  else {
    local_1c = *(int **)(local_18 + 0x10);
    if (local_1c != (int *)0x0) goto LAB_0088c131;
  }
  FUN_00406460(L"ulSkillProto Error");
  local_8 = 0;
  if ((int *)*DAT_00da98e8 != (int *)0x0) {
    (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
              (L"AvaBaseCharacter::OnMsgMagicSkillEnd",0x19dc,local_50,uVar5);
  }
  local_8 = 0xffffffff;
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
LAB_0088c131:
  local_14 = 0;
  if (param_2 != 0) {
    piVar6 = (int *)(in_ECX + 0x2c4);
    do {
      local_34 = *param_3;
      uVar2 = *(undefined4 *)(param_3 + 2);
      local_20 = *(undefined2 *)((int)param_3 + 0x14);
      uVar1 = param_3[1];
      local_2c = (int)uVar1;
      uStack_28 = (undefined4)((ulonglong)uVar1 >> 0x20);
      uVar4 = uStack_28;
      uStack_24 = (undefined1)uVar2;
      uStack_23 = (undefined1)((uint)uVar2 >> 8);
      uStack_22 = (undefined2)((uint)uVar2 >> 0x10);
      uStack_28._1_3_ = (undefined3)((ulonglong)uVar1 >> 0x28);
      *(uint *)(in_ECX + 0x314) = param_2;
      *piVar6 = local_2c + CONCAT13(uStack_24,uStack_28._1_3_);
      piVar6[-0x3c] = CONCAT13(uStack_24,uStack_28._1_3_);
      piVar6[-0x14] = (int)local_34;
      piVar6[-0x28] = local_2c;
      *(undefined1 *)(in_ECX + 0x1be + local_14) = uStack_23;
      local_18 = DAT_00da93ec;
      uStack_28._0_1_ = (byte)((ulonglong)uVar1 >> 0x20);
      param_3 = (undefined8 *)((int)param_3 + 0x16);
      *(byte *)(in_ECX + 0xd9) = (byte)uStack_28 & 1;
      uStack_28 = uVar4;
      piVar7 = (int *)FUN_00a1a840((int)local_34);
      if (piVar7 == (int *)0x0) {
        piVar7 = (int *)FUN_00a1a6d0((int)local_34);
        if (piVar7 != (int *)0x0) goto LAB_0088c1f4;
        piVar7 = (int *)FUN_00a1a780((int)local_34);
        if (piVar7 != (int *)0x0) goto LAB_0088c1f4;
      }
      else {
LAB_0088c1f4:
        if (local_1c != (int *)0x0) {
          (**(code **)(*local_1c + 0x40))();
        }
        *(int *)(in_ECX + 0x118) = (int)local_34;
        *(int *)(in_ECX + 0x128) = local_2c;
        *(undefined1 *)(in_ECX + 0xcc) = 1;
        *(undefined1 *)(in_ECX + 0x125) = 1;
        (**(code **)(*piVar7 + 0x364))(param_1);
        (**(code **)(*piVar7 + 0x330))(CONCAT22(local_20,uStack_22) != 0);
        if (local_34._4_4_ < (uint)piVar7[0x29]) {
          (**(code **)(*piVar7 + 0x1ac))(piVar7[0x29] - local_34._4_4_);
        }
      }
      piVar6 = piVar6 + 1;
      local_14 = local_14 + 1;
    } while (local_14 < param_2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0088c080 : PUSH EBP
0088c081 : MOV EBP,ESP
0088c083 : PUSH -0x1
0088c085 : PUSH 0xb1c621
0088c08a : MOV EAX,FS:[0x0]
0088c090 : PUSH EAX
0088c091 : SUB ESP,0x40
0088c094 : PUSH EBX
0088c095 : PUSH ESI
0088c096 : PUSH EDI
0088c097 : MOV EAX,[0x00d66fa0]
0088c09c : XOR EAX,EBP
0088c09e : PUSH EAX
0088c09f : LEA EAX,[EBP + -0xc]
0088c0a2 : MOV FS:[0x0],EAX
0088c0a8 : MOV EDI,ECX
0088c0aa : MOV EAX,dword ptr [EBP + 0x8]
0088c0ad : MOV ESI,dword ptr [0x00d7c54c]
0088c0b3 : LEA ECX,[EBP + -0x18]
0088c0b6 : MOV dword ptr [EBP + -0x18],EAX
0088c0b9 : PUSH ECX
0088c0ba : LEA ECX,[ESI + 0x40]
0088c0bd : LEA EAX,[EBP + -0x14]
0088c0c0 : CALL 0x004437f0
0088c0c5 : MOV ESI,dword ptr [ESI + 0x44]
0088c0c8 : MOV EAX,dword ptr [EBP + -0x14]
0088c0cb : CMP EAX,ESI
0088c0cd : JZ 0x0088c14b
0088c0cf : MOV EAX,dword ptr [EAX + 0x10]
0088c0d2 : XOR ESI,ESI
0088c0d4 : MOV dword ptr [EBP + -0x18],EAX
0088c0d7 : TEST EAX,EAX
0088c0d9 : JNZ 0x0088c131
0088c0db : PUSH 0xc46f34
0088c0e0 : LEA ECX,[EBP + -0x4c]
0088c0e3 : CALL 0x00406460
0088c0e8 : MOV dword ptr [EBP + -0x4],ESI
0088c0eb : MOV EDX,dword ptr [0x00da98e8]
0088c0f1 : MOV ECX,dword ptr [EDX]
0088c0f3 : CMP ECX,ESI
0088c0f5 : JZ 0x0088c10c
0088c0f7 : MOV EAX,dword ptr [ECX]
0088c0f9 : MOV EAX,dword ptr [EAX + 0x14]
0088c0fc : LEA EDX,[EBP + -0x4c]
0088c0ff : PUSH EDX
0088c100 : PUSH 0x19dc
0088c105 : PUSH 0xc46f60
0088c10a : CALL EAX
0088c10c : MOV dword ptr [EBP + -0x4],0xffffffff
0088c113 : CMP dword ptr [EBP + -0x34],0x8
0088c117 : JC 0x0088c121
0088c119 : MOV ECX,dword ptr [EBP + -0x48]
0088c11c : CALL 0x006f04e0
0088c121 : XOR ECX,ECX
0088c123 : MOV dword ptr [EBP + -0x34],0x7
0088c12a : MOV dword ptr [EBP + -0x38],ESI
0088c12d : MOV word ptr [EBP + -0x48],CX
0088c131 : MOV dword ptr [EBP + -0x10],ESI
0088c134 : CMP dword ptr [EBP + 0xc],ESI
0088c137 : JBE 0x0088c279
0088c13d : MOV EBX,dword ptr [EBP + 0x10]
0088c140 : LEA EAX,[EDI + 0x2c4]
0088c146 : MOV dword ptr [EBP + 0x10],EAX
0088c149 : JMP 0x0088c155
0088c14b : XOR ESI,ESI
0088c14d : MOV dword ptr [EBP + -0x18],ESI
0088c150 : JMP 0x0088c0db
0088c152 : MOV EAX,dword ptr [EBP + 0x10]
0088c155 : MOVQ XMM0,qword ptr [EBX]
0088c159 : MOV EDX,dword ptr [EBX + 0x10]
0088c15c : MOV CX,word ptr [EBX + 0x14]
0088c160 : MOVQ qword ptr [EBP + -0x30],XMM0
0088c165 : MOVQ XMM0,qword ptr [EBX + 0x8]
0088c16a : MOVQ qword ptr [EBP + -0x28],XMM0
0088c16f : MOV ESI,dword ptr [EBP + -0x28]
0088c172 : MOV dword ptr [EBP + -0x20],EDX
0088c175 : MOV EDX,dword ptr [EBP + 0xc]
0088c178 : MOV word ptr [EBP + -0x1c],CX
0088c17c : MOV ECX,dword ptr [EBP + -0x23]
0088c17f : MOV dword ptr [EDI + 0x314],EDX
0088c185 : MOV EDX,dword ptr [EBP + -0x30]
0088c188 : ADD ESI,ECX
0088c18a : MOV dword ptr [EAX],ESI
0088c18c : MOV ESI,dword ptr [EBP + -0x28]
0088c18f : MOV dword ptr [EAX + 0xffffff10],ECX
0088c195 : MOV ECX,dword ptr [EBP + -0x10]
0088c198 : MOV dword ptr [EAX + -0x50],EDX
0088c19b : MOV dword ptr [EAX + 0xffffff60],ESI
0088c1a1 : MOVZX EAX,byte ptr [EBP + -0x1f]
0088c1a5 : MOV byte ptr [EDI + ECX*0x1 + 0x1be],AL
0088c1ac : MOVZX EAX,byte ptr [EBP + -0x24]
0088c1b0 : MOV ECX,dword ptr [0x00da93ec]
0088c1b6 : AND AL,0x1
0088c1b8 : PUSH EDX
0088c1b9 : ADD EBX,0x16
0088c1bc : MOV byte ptr [EDI + 0xd9],AL
0088c1c2 : MOV dword ptr [EBP + -0x14],ECX
0088c1c5 : CALL 0x00a1a840
0088c1ca : MOV ESI,EAX
0088c1cc : TEST ESI,ESI
0088c1ce : JNZ 0x0088c1f4
0088c1d0 : MOV ECX,dword ptr [EBP + -0x30]
0088c1d3 : PUSH ECX
0088c1d4 : MOV ECX,dword ptr [EBP + -0x14]
0088c1d7 : CALL 0x00a1a6d0
0088c1dc : MOV ESI,EAX
0088c1de : TEST ESI,ESI
0088c1e0 : JNZ 0x0088c1f4
0088c1e2 : MOV EDX,dword ptr [EBP + -0x30]
0088c1e5 : MOV ECX,dword ptr [EBP + -0x14]
0088c1e8 : PUSH EDX
0088c1e9 : CALL 0x00a1a780
0088c1ee : MOV ESI,EAX
0088c1f0 : TEST ESI,ESI
0088c1f2 : JZ 0x0088c265
0088c1f4 : MOV ECX,dword ptr [EBP + -0x18]
0088c1f7 : TEST ECX,ECX
0088c1f9 : JZ 0x0088c202
0088c1fb : MOV EAX,dword ptr [ECX]
0088c1fd : MOV EDX,dword ptr [EAX + 0x40]
0088c200 : CALL EDX
0088c202 : MOV EAX,dword ptr [EBP + -0x30]
0088c205 : MOV ECX,dword ptr [EBP + -0x28]
0088c208 : MOV dword ptr [EDI + 0x118],EAX
0088c20e : MOV EAX,dword ptr [EBP + 0x8]
0088c211 : MOV dword ptr [EDI + 0x128],ECX
0088c217 : MOV byte ptr [EDI + 0xcc],0x1
0088c21e : MOV byte ptr [EDI + 0x125],0x1
0088c225 : MOV EDX,dword ptr [ESI]
0088c227 : MOV EDX,dword ptr [EDX + 0x364]
0088c22d : PUSH EAX
0088c22e : MOV ECX,ESI
0088c230 : CALL EDX
0088c232 : CMP dword ptr [EBP + -0x1e],0x0
0088c236 : MOV EAX,dword ptr [ESI]
0088c238 : MOV EAX,dword ptr [EAX + 0x330]
0088c23e : SETNZ CL
0088c241 : MOVZX EDX,CL
0088c244 : PUSH EDX
0088c245 : MOV ECX,ESI
0088c247 : CALL EAX
0088c249 : MOV EAX,dword ptr [ESI + 0xa4]
0088c24f : MOV ECX,dword ptr [EBP + -0x2c]
0088c252 : CMP EAX,ECX
0088c254 : JBE 0x0088c265
0088c256 : MOV EDX,dword ptr [ESI]
0088c258 : SUB EAX,ECX
0088c25a : PUSH EAX
0088c25b : MOV EAX,dword ptr [EDX + 0x1ac]
0088c261 : MOV ECX,ESI
0088c263 : CALL EAX
0088c265 : MOV EAX,dword ptr [EBP + -0x10]
0088c268 : ADD dword ptr [EBP + 0x10],0x4
0088c26c : INC EAX
0088c26d : MOV dword ptr [EBP + -0x10],EAX
0088c270 : CMP EAX,dword ptr [EBP + 0xc]
0088c273 : JC 0x0088c152
0088c279 : MOV ECX,dword ptr [EBP + -0xc]
0088c27c : MOV dword ptr FS:[0x0],ECX
0088c283 : POP ECX
0088c284 : POP EDI
0088c285 : POP ESI
0088c286 : POP EBX
0088c287 : MOV ESP,EBP
0088c289 : POP EBP
0088c28a : RET 0xc
