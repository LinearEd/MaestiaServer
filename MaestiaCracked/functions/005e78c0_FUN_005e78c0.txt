PROGRAM  : Maestia.exe
FUNCTION : FUN_005e78c0
ENTRY    : 005e78c0
BODY     : [[005e78c0, 005e7a34]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e78c0(int param_1,undefined4 *param_2)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined1 uVar3;
  undefined1 uVar4;
  int iVar5;
  LONG LVar6;
  undefined2 uVar7;
  int iVar8;
  uint local_c;
  int local_8;
  int local_4;
  
  iVar8 = *(int *)(param_1 + 0x314);
  if (iVar8 == 0) {
    iVar8 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar8 + 0x15) = 0;
  if (*(int *)(iVar8 + 0x30) - *(int *)(iVar8 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar5 = *(int *)(iVar8 + 0x2c);
  uVar1 = *(undefined1 *)(*(int *)(iVar8 + 0x3c) + 1 + iVar5);
  uVar2 = *(undefined1 *)(*(int *)(iVar8 + 0x3c) + iVar5);
  *(int *)(iVar8 + 0x2c) = iVar5 + 2;
  *(undefined1 *)(iVar8 + 0x15) = 0;
  if (*(int *)(iVar8 + 0x30) - (iVar5 + 2) < 2) {
    FUN_00539fb0(2);
  }
  iVar5 = *(int *)(iVar8 + 0x2c);
  uVar3 = *(undefined1 *)(*(int *)(iVar8 + 0x3c) + 1 + iVar5);
  uVar4 = *(undefined1 *)(*(int *)(iVar8 + 0x3c) + iVar5);
  *(int *)(iVar8 + 0x2c) = iVar5 + 2;
  *(undefined1 *)(iVar8 + 0x15) = 0;
  if (*(int *)(iVar8 + 0x30) - (iVar5 + 2) < 2) {
    FUN_00539fb0(2);
  }
  iVar5 = *(int *)(iVar8 + 0x2c);
  uVar7 = CONCAT11(*(undefined1 *)(*(int *)(iVar8 + 0x3c) + 1 + iVar5),
                   *(undefined1 *)(*(int *)(iVar8 + 0x3c) + iVar5));
  *(int *)(iVar8 + 0x2c) = iVar5 + 2;
  FUN_0051b6e0();
  FUN_0053a9b0(&local_c);
  GThread::OnExit((GThread *)*param_2);
  FUN_005e70e0(param_1,CONCAT11(uVar1,uVar2) | 0x50000,(local_c & 0xfffffffc) + 8,&DAT_00cca874,
               CONCAT11(uVar3,uVar4),uVar7,uVar7);
  if ((local_8 == 0) && (local_4 != 0)) {
    FUN_00524240();
  }
  LVar6 = InterlockedExchangeAdd((LONG *)((local_c & 0xfffffffc) + 4),-1);
  if (LVar6 == 1) {
    FUN_00515cf0(local_c & 0xfffffffc);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005e78c0 : SUB ESP,0xc
005e78c3 : PUSH EBX
005e78c4 : PUSH EBP
005e78c5 : PUSH ESI
005e78c6 : MOV ESI,dword ptr [ESP + 0x1c]
005e78ca : MOV EAX,dword ptr [ESI + 0x314]
005e78d0 : PUSH EDI
005e78d1 : TEST EAX,EAX
005e78d3 : JNZ 0x005e78da
005e78d5 : ADD ESI,0x28
005e78d8 : JMP 0x005e78dc
005e78da : MOV ESI,EAX
005e78dc : MOV EAX,dword ptr [ESI + 0x30]
005e78df : SUB EAX,dword ptr [ESI + 0x2c]
005e78e2 : MOV byte ptr [ESI + 0x15],0x0
005e78e6 : CMP EAX,0x2
005e78e9 : JGE 0x005e78f4
005e78eb : PUSH 0x2
005e78ed : MOV ECX,ESI
005e78ef : CALL 0x00539fb0
005e78f4 : MOV EAX,dword ptr [ESI + 0x2c]
005e78f7 : MOV ECX,dword ptr [ESI + 0x3c]
005e78fa : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7900 : ADD ECX,EAX
005e7902 : MOVZX CX,byte ptr [ECX]
005e7906 : SHL DX,0x8
005e790a : OR DX,CX
005e790d : MOVZX EDX,DX
005e7910 : LEA ECX,[EAX + 0x2]
005e7913 : MOVZX EAX,DX
005e7916 : MOV EDX,dword ptr [ESI + 0x30]
005e7919 : OR EAX,0x50000
005e791e : SUB EDX,ECX
005e7920 : CMP EDX,0x2
005e7923 : MOV dword ptr [ESI + 0x2c],ECX
005e7926 : MOV EBX,EAX
005e7928 : MOV byte ptr [ESI + 0x15],0x0
005e792c : JGE 0x005e7937
005e792e : PUSH 0x2
005e7930 : MOV ECX,ESI
005e7932 : CALL 0x00539fb0
005e7937 : MOV EAX,dword ptr [ESI + 0x2c]
005e793a : MOV ECX,dword ptr [ESI + 0x3c]
005e793d : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7943 : ADD ECX,EAX
005e7945 : MOVZX CX,byte ptr [ECX]
005e7949 : SHL DX,0x8
005e794d : OR DX,CX
005e7950 : MOVZX EBP,DX
005e7953 : MOV EDX,dword ptr [ESI + 0x30]
005e7956 : ADD EAX,0x2
005e7959 : SUB EDX,EAX
005e795b : CMP EDX,0x2
005e795e : MOV dword ptr [ESI + 0x2c],EAX
005e7961 : MOV byte ptr [ESI + 0x15],0x0
005e7965 : JGE 0x005e7970
005e7967 : PUSH 0x2
005e7969 : MOV ECX,ESI
005e796b : CALL 0x00539fb0
005e7970 : MOV EAX,dword ptr [ESI + 0x2c]
005e7973 : MOV ECX,dword ptr [ESI + 0x3c]
005e7976 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e797c : ADD ECX,EAX
005e797e : MOVZX CX,byte ptr [ECX]
005e7982 : SHL DX,0x8
005e7986 : OR DX,CX
005e7989 : ADD EAX,0x2
005e798c : LEA ECX,[ESP + 0x10]
005e7990 : MOVZX EDI,DX
005e7993 : MOV dword ptr [ESI + 0x2c],EAX
005e7996 : CALL 0x0051b6e0
005e799b : LEA EDX,[ESP + 0x10]
005e799f : PUSH EDX
005e79a0 : MOV ECX,ESI
005e79a2 : CALL 0x0053a9b0
005e79a7 : MOV EAX,dword ptr [ESP + 0x10]
005e79ab : MOVZX ECX,DI
005e79ae : PUSH ECX
005e79af : AND EAX,0xfffffffc
005e79b2 : ADD EAX,0x8
005e79b5 : PUSH EAX
005e79b6 : MOV EAX,dword ptr [ESP + 0x2c]
005e79ba : MOV ECX,dword ptr [EAX]
005e79bc : MOVZX EDX,BP
005e79bf : PUSH EDX
005e79c0 : PUSH EBX
005e79c1 : PUSH ECX
005e79c2 : PUSH 0xb943c0
005e79c7 : PUSH ESI
005e79c8 : CALL 0x0051d420
005e79cd : MOV EAX,dword ptr [ESP + 0x2c]
005e79d1 : MOV EDX,dword ptr [ESP + 0x3c]
005e79d5 : ADD ESP,0x1c
005e79d8 : PUSH EDI
005e79d9 : PUSH EDI
005e79da : PUSH EBP
005e79db : AND EAX,0xfffffffc
005e79de : PUSH 0xcca874
005e79e3 : ADD EAX,0x8
005e79e6 : PUSH EAX
005e79e7 : PUSH ECX
005e79e8 : MOV EAX,ESP
005e79ea : MOV dword ptr [EAX],EBX
005e79ec : PUSH EDX
005e79ed : LEA EBX,[ESP + 0x30]
005e79f1 : CALL 0x005e70e0
005e79f6 : ADD ESP,0x1c
005e79f9 : CMP dword ptr [ESP + 0x14],0x0
005e79fe : JNZ 0x005e7a0d
005e7a00 : MOV ECX,dword ptr [ESP + 0x18]
005e7a04 : TEST ECX,ECX
005e7a06 : JZ 0x005e7a0d
005e7a08 : CALL 0x00524240
005e7a0d : MOV ESI,dword ptr [ESP + 0x10]
005e7a11 : AND ESI,0xfffffffc
005e7a14 : PUSH -0x1
005e7a16 : LEA EAX,[ESI + 0x4]
005e7a19 : PUSH EAX
005e7a1a : CALL dword ptr [0x00b851cc]
005e7a20 : SUB EAX,0x1
005e7a23 : JNZ 0x005e7a2b
005e7a25 : PUSH ESI
005e7a26 : CALL 0x00515cf0
005e7a2b : POP EDI
005e7a2c : POP ESI
005e7a2d : POP EBP
005e7a2e : POP EBX
005e7a2f : ADD ESP,0xc
005e7a32 : RET 0x8
