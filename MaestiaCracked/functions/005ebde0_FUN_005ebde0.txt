PROGRAM  : Maestia.exe
FUNCTION : FUN_005ebde0
ENTRY    : 005ebde0
BODY     : [[005ebde0, 005ebe63] [005ebe70, 005ebf1a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ebde0(int *param_1)

{
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  int iVar3;
  uint uVar4;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  uVar4 = 0;
  iVar3 = 0;
  if (param_1[1] != 0) {
    do {
      iVar1 = *(int *)(*param_1 + uVar4 * 4);
      if ((*(int *)(iVar1 + 0x10) == 0) &&
         ((*(int *)(*(int *)(in_ECX + 8) + 0x20) == 0 ||
          (iVar1 = (**(code **)(**(int **)(iVar1 + 0xc) + 0x38))(),
          iVar1 <= *(int *)(*(int *)(in_ECX + 8) + 0x20))))) {
        iVar1 = (**(code **)(**(int **)(*(int *)(*param_1 + uVar4 * 4) + 0xc) + 0x38))();
        iVar3 = iVar3 + iVar1;
      }
      uVar4 = uVar4 + 1;
    } while (uVar4 < (uint)param_1[1]);
  }
  local_c = 0;
  local_8 = 0;
  local_4 = 0;
  if (iVar3 != 0) {
    FUN_005d3150(&local_c,iVar3);
  }
  if (*(int *)(in_ECX + 0x148) != 0) {
    iVar1 = 0;
    iVar3 = *(int *)(*(int *)(in_ECX + 0x148) + 4) + 1;
    do {
      if (*(int *)(iVar1 + 8 + *(int *)(in_ECX + 0x148)) != -2) {
        *(undefined4 *)(iVar1 + 8 + *(int *)(in_ECX + 0x148)) = 0xfffffffe;
      }
      iVar1 = iVar1 + 0x18;
      iVar3 = iVar3 + -1;
    } while (iVar3 != 0);
    FUN_00515cf0(*(undefined4 *)(in_ECX + 0x148));
    *(undefined4 *)(in_ECX + 0x148) = 0;
  }
  uVar4 = 0;
  if (param_1[1] != 0) {
    do {
      iVar3 = *(int *)(*param_1 + uVar4 * 4);
      if ((*(int *)(iVar3 + 0x10) == 0) &&
         ((*(int *)(*(int *)(in_ECX + 8) + 0x20) == 0 ||
          (iVar3 = (**(code **)(**(int **)(iVar3 + 0xc) + 0x38))(),
          iVar3 <= *(int *)(*(int *)(in_ECX + 8) + 0x20))))) {
        FUN_005ebb40(&local_c,*(undefined4 *)(*param_1 + uVar4 * 4));
      }
      uVar4 = uVar4 + 1;
    } while (uVar4 < (uint)param_1[1]);
  }
  uVar2 = FUN_005eb4d0(&local_c);
  FUN_005ea940(&local_c,uVar2);
  FUN_00515cf0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005ebde0 : SUB ESP,0xc
005ebde3 : PUSH EBX
005ebde4 : MOV EBX,dword ptr [ESP + 0x14]
005ebde8 : PUSH EBP
005ebde9 : PUSH ESI
005ebdea : XOR ESI,ESI
005ebdec : XOR EBP,EBP
005ebdee : PUSH EDI
005ebdef : MOV EDI,ECX
005ebdf1 : CMP dword ptr [EBX + 0x4],ESI
005ebdf4 : JBE 0x005ebe33
005ebdf6 : MOV EAX,dword ptr [EBX]
005ebdf8 : MOV EAX,dword ptr [EAX + ESI*0x4]
005ebdfb : CMP dword ptr [EAX + 0x10],0x0
005ebdff : JNZ 0x005ebe2d
005ebe01 : MOV ECX,dword ptr [EDI + 0x8]
005ebe04 : CMP dword ptr [ECX + 0x20],0x0
005ebe08 : JZ 0x005ebe1c
005ebe0a : MOV ECX,dword ptr [EAX + 0xc]
005ebe0d : MOV EDX,dword ptr [ECX]
005ebe0f : MOV EAX,dword ptr [EDX + 0x38]
005ebe12 : CALL EAX
005ebe14 : MOV ECX,dword ptr [EDI + 0x8]
005ebe17 : CMP EAX,dword ptr [ECX + 0x20]
005ebe1a : JG 0x005ebe2d
005ebe1c : MOV EDX,dword ptr [EBX]
005ebe1e : MOV EAX,dword ptr [EDX + ESI*0x4]
005ebe21 : MOV ECX,dword ptr [EAX + 0xc]
005ebe24 : MOV EDX,dword ptr [ECX]
005ebe26 : MOV EAX,dword ptr [EDX + 0x38]
005ebe29 : CALL EAX
005ebe2b : ADD EBP,EAX
005ebe2d : INC ESI
005ebe2e : CMP ESI,dword ptr [EBX + 0x4]
005ebe31 : JC 0x005ebdf6
005ebe33 : XOR EAX,EAX
005ebe35 : MOV dword ptr [ESP + 0x10],EAX
005ebe39 : MOV dword ptr [ESP + 0x14],EAX
005ebe3d : MOV dword ptr [ESP + 0x18],EAX
005ebe41 : CMP EBP,EAX
005ebe43 : JBE 0x005ebe50
005ebe45 : PUSH EBP
005ebe46 : LEA ECX,[ESP + 0x14]
005ebe4a : PUSH ECX
005ebe4b : CALL 0x005d3150
005ebe50 : MOV EAX,dword ptr [EDI + 0x148]
005ebe56 : TEST EAX,EAX
005ebe58 : JZ 0x005ebea5
005ebe5a : MOV EAX,dword ptr [EAX + 0x4]
005ebe5d : XOR ECX,ECX
005ebe5f : LEA EDX,[EAX + 0x1]
005ebe62 : JMP 0x005ebe70
005ebe70 : MOV EAX,dword ptr [EDI + 0x148]
005ebe76 : CMP dword ptr [ECX + EAX*0x1 + 0x8],-0x2
005ebe7b : LEA EAX,[ECX + EAX*0x1 + 0x8]
005ebe7f : JZ 0x005ebe87
005ebe81 : MOV dword ptr [EAX],0xfffffffe
005ebe87 : ADD ECX,0x18
005ebe8a : SUB EDX,0x1
005ebe8d : JNZ 0x005ebe70
005ebe8f : MOV ECX,dword ptr [EDI + 0x148]
005ebe95 : PUSH ECX
005ebe96 : CALL 0x00515cf0
005ebe9b : MOV dword ptr [EDI + 0x148],0x0
005ebea5 : XOR ESI,ESI
005ebea7 : CMP dword ptr [EBX + 0x4],ESI
005ebeaa : JBE 0x005ebeee
005ebeac : LEA ESP,[ESP]
005ebeb0 : MOV EDX,dword ptr [EBX]
005ebeb2 : MOV EAX,dword ptr [EDX + ESI*0x4]
005ebeb5 : CMP dword ptr [EAX + 0x10],0x0
005ebeb9 : JNZ 0x005ebee8
005ebebb : MOV ECX,dword ptr [EDI + 0x8]
005ebebe : CMP dword ptr [ECX + 0x20],0x0
005ebec2 : JZ 0x005ebed6
005ebec4 : MOV ECX,dword ptr [EAX + 0xc]
005ebec7 : MOV EDX,dword ptr [ECX]
005ebec9 : MOV EAX,dword ptr [EDX + 0x38]
005ebecc : CALL EAX
005ebece : MOV ECX,dword ptr [EDI + 0x8]
005ebed1 : CMP EAX,dword ptr [ECX + 0x20]
005ebed4 : JG 0x005ebee8
005ebed6 : MOV EDX,dword ptr [EBX]
005ebed8 : MOV EAX,dword ptr [EDX + ESI*0x4]
005ebedb : PUSH EAX
005ebedc : LEA ECX,[ESP + 0x14]
005ebee0 : PUSH ECX
005ebee1 : MOV ECX,EDI
005ebee3 : CALL 0x005ebb40
005ebee8 : INC ESI
005ebee9 : CMP ESI,dword ptr [EBX + 0x4]
005ebeec : JC 0x005ebeb0
005ebeee : LEA EDX,[ESP + 0x10]
005ebef2 : PUSH EDX
005ebef3 : MOV ECX,EDI
005ebef5 : CALL 0x005eb4d0
005ebefa : PUSH EAX
005ebefb : LEA EAX,[ESP + 0x14]
005ebeff : PUSH EAX
005ebf00 : MOV ECX,EDI
005ebf02 : CALL 0x005ea940
005ebf07 : MOV ECX,dword ptr [ESP + 0x10]
005ebf0b : POP EDI
005ebf0c : POP ESI
005ebf0d : POP EBP
005ebf0e : POP EBX
005ebf0f : ADD ESP,0xc
005ebf12 : MOV dword ptr [ESP + 0x4],ECX
005ebf16 : JMP 0x00515cf0
