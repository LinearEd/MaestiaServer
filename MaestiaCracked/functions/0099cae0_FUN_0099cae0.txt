PROGRAM  : Maestia.exe
FUNCTION : FUN_0099cae0
ENTRY    : 0099cae0
BODY     : [[0099cae0, 0099cd80]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0099cae0(int *param_1,int param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 uVar3;
  int *piVar4;
  undefined2 in_FPUControlWord;
  float10 fVar5;
  undefined1 local_44 [28];
  undefined1 local_28 [4];
  int local_24;
  undefined8 local_1c;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4630f;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar2 = FUN_0099c2b0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (iVar2 == 0) {
    if (((DAT_0172491c == 0) || (*DAT_00da9894 == 0)) || (*(int *)(*DAT_00da9894 + 0x1a8) == 0))
    goto LAB_0099cb8c;
    FUN_00406460(L"IDS_ERROR_NOT_FISHING");
    piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
    local_8 = iVar2;
    uVar3 = FUN_0081d120(local_44);
    local_8._0_1_ = 1;
    (**(code **)(*piVar4 + 0x44))(uVar3,3);
    local_8 = (uint)local_8._1_3_ << 8;
  }
  else {
    iVar2 = FUN_00a1a6d0(*(undefined4 *)(*(int *)(*DAT_00da9894 + 0x16c) + 0x7c));
    if (iVar2 == 0) {
      if (*DAT_00da9894 == 0) {
        ExceptionList = local_10;
        return 0;
      }
      puVar1 = *(undefined4 **)(*DAT_00da9894 + 0x114);
      if (puVar1 == (undefined4 *)0x0) {
        ExceptionList = local_10;
        return 0;
      }
      (**(code **)*puVar1)("FishAutoStop");
      ExceptionList = local_10;
      return 0;
    }
    iVar2 = FUN_004049b0(*(undefined4 *)(iVar2 + 8));
    if ((iVar2 == 0) || ((*(uint *)(iVar2 + 0x4c) & 0x400000) != 0)) {
      iVar2 = FUN_009a0330(0);
      if (iVar2 == 0) {
        ExceptionList = local_10;
        return 0;
      }
      FUN_0040e750(iVar2,local_28);
      local_8 = 4;
      param_1 = (int *)0x27;
      FUN_00484470(&param_1);
      if (local_1c._4_4_ != local_24) {
        piVar4 = (int *)(**(code **)(**(int **)(*(int *)(*DAT_00da9894 + 0x17c) + 0x48) + 0xc4))
                                  (*(undefined2 *)(local_1c._4_4_ + 0x12));
        if ((piVar4 == (int *)0x0) || (iVar2 = (**(code **)(*piVar4 + 0x20))(), iVar2 != 2)) {
          local_8 = 0xffffffff;
          FUN_0040f3f0(local_28);
          ExceptionList = local_10;
          return 0;
        }
        fVar5 = (float10)(**(code **)(*piVar4 + 0x88))();
        param_1 = (int *)CONCAT22(in_FPUControlWord,param_1._0_2_);
        local_1c = (longlong)ROUND(fVar5);
        if ((int)local_1c != 0) {
          iVar2 = ((int)local_1c + 0x6bb) * param_2;
          local_8 = 0xffffffff;
          FUN_0040f3f0(local_28);
          ExceptionList = local_10;
          return iVar2;
        }
      }
      local_8 = 0xffffffff;
      FUN_0040f3f0(local_28);
      ExceptionList = local_10;
      return 0;
    }
    if (((DAT_0172491c == 0) || (*DAT_00da9894 == 0)) || (*(int *)(*DAT_00da9894 + 0x1a8) == 0))
    goto LAB_0099cb8c;
    FUN_00406460(L"IDS_ERROR_NOT_FISHING");
    local_8 = 2;
    piVar4 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_0081d120(local_44);
    local_8._0_1_ = 3;
    (**(code **)(*piVar4 + 0x44))(uVar3,3);
    local_8 = CONCAT31(local_8._1_3_,2);
  }
  FUN_00406560();
  local_8 = 0xffffffff;
  FUN_00406560();
LAB_0099cb8c:
  (**(code **)(*param_1 + 0x20))();
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0099cae0 : PUSH EBP
0099cae1 : MOV EBP,ESP
0099cae3 : PUSH -0x1
0099cae5 : PUSH 0xb4630f
0099caea : MOV EAX,FS:[0x0]
0099caf0 : PUSH EAX
0099caf1 : SUB ESP,0x50
0099caf4 : PUSH ESI
0099caf5 : PUSH EDI
0099caf6 : MOV EAX,[0x00d66fa0]
0099cafb : XOR EAX,EBP
0099cafd : PUSH EAX
0099cafe : LEA EAX,[EBP + -0xc]
0099cb01 : MOV FS:[0x0],EAX
0099cb07 : CALL 0x0099c2b0
0099cb0c : MOV EDI,EAX
0099cb0e : TEST EDI,EDI
0099cb10 : JNZ 0x0099cb9b
0099cb16 : CMP dword ptr [0x0172491c],EAX
0099cb1c : JZ 0x0099cb8c
0099cb1e : MOV EAX,[0x00da9894]
0099cb23 : MOV EAX,dword ptr [EAX]
0099cb25 : TEST EAX,EAX
0099cb27 : JZ 0x0099cb8c
0099cb29 : CMP dword ptr [EAX + 0x1a8],EDI
0099cb2f : JZ 0x0099cb8c
0099cb31 : PUSH 0xc881a0
0099cb36 : LEA ECX,[EBP + -0x40]
0099cb39 : CALL 0x00406460
0099cb3e : MOV dword ptr [EBP + -0x4],EDI
0099cb41 : MOV ECX,dword ptr [0x00da9894]
0099cb47 : MOV EAX,dword ptr [ECX]
0099cb49 : MOV ECX,dword ptr [0x0172491c]
0099cb4f : MOV ESI,dword ptr [EAX + 0x1a8]
0099cb55 : LEA EDX,[EBP + -0x40]
0099cb58 : PUSH EDX
0099cb59 : LEA EDI,[EBP + -0x5c]
0099cb5c : CALL 0x0081d120
0099cb61 : MOV byte ptr [EBP + -0x4],0x1
0099cb65 : MOV EDX,dword ptr [ESI]
0099cb67 : PUSH 0x3
0099cb69 : PUSH EAX
0099cb6a : MOV EAX,dword ptr [EDX + 0x44]
0099cb6d : MOV ECX,ESI
0099cb6f : CALL EAX
0099cb71 : MOV byte ptr [EBP + -0x4],0x0
0099cb75 : LEA ECX,[EBP + -0x5c]
0099cb78 : CALL 0x00406560
0099cb7d : MOV dword ptr [EBP + -0x4],0xffffffff
0099cb84 : LEA ECX,[EBP + -0x40]
0099cb87 : CALL 0x00406560
0099cb8c : MOV ECX,dword ptr [EBP + 0x8]
0099cb8f : MOV EDX,dword ptr [ECX]
0099cb91 : MOV EAX,dword ptr [EDX + 0x20]
0099cb94 : CALL EAX
0099cb96 : JMP 0x0099cd6c
0099cb9b : MOV ECX,dword ptr [0x00da9894]
0099cba1 : MOV EAX,dword ptr [ECX]
0099cba3 : MOV EAX,dword ptr [EAX + 0x16c]
0099cba9 : MOV EAX,dword ptr [EAX + 0x7c]
0099cbac : MOV ECX,dword ptr [0x00da93ec]
0099cbb2 : PUSH EAX
0099cbb3 : CALL 0x00a1a6d0
0099cbb8 : TEST EAX,EAX
0099cbba : JZ 0x0099cd4b
0099cbc0 : MOV EAX,dword ptr [EAX + 0x8]
0099cbc3 : PUSH EAX
0099cbc4 : CALL 0x004049b0
0099cbc9 : ADD ESP,0x4
0099cbcc : TEST EAX,EAX
0099cbce : JZ 0x0099cc43
0099cbd0 : TEST dword ptr [EAX + 0x4c],0x400000
0099cbd7 : JNZ 0x0099cc43
0099cbd9 : CMP dword ptr [0x0172491c],0x0
0099cbe0 : JZ 0x0099cb8c
0099cbe2 : MOV EDX,dword ptr [0x00da9894]
0099cbe8 : MOV EAX,dword ptr [EDX]
0099cbea : TEST EAX,EAX
0099cbec : JZ 0x0099cb8c
0099cbee : CMP dword ptr [EAX + 0x1a8],0x0
0099cbf5 : JZ 0x0099cb8c
0099cbf7 : PUSH 0xc881cc
0099cbfc : LEA ECX,[EBP + -0x40]
0099cbff : CALL 0x00406460
0099cc04 : MOV dword ptr [EBP + -0x4],0x2
0099cc0b : MOV EAX,[0x00da9894]
0099cc10 : MOV EAX,dword ptr [EAX]
0099cc12 : MOV ESI,dword ptr [EAX + 0x1a8]
0099cc18 : LEA ECX,[EBP + -0x40]
0099cc1b : PUSH ECX
0099cc1c : MOV ECX,dword ptr [0x0172491c]
0099cc22 : LEA EDI,[EBP + -0x5c]
0099cc25 : CALL 0x0081d120
0099cc2a : MOV byte ptr [EBP + -0x4],0x3
0099cc2e : MOV EDX,dword ptr [ESI]
0099cc30 : PUSH 0x3
0099cc32 : PUSH EAX
0099cc33 : MOV EAX,dword ptr [EDX + 0x44]
0099cc36 : MOV ECX,ESI
0099cc38 : CALL EAX
0099cc3a : MOV byte ptr [EBP + -0x4],0x2
0099cc3e : JMP 0x0099cb75
0099cc43 : MOV ECX,dword ptr [0x00da9894]
0099cc49 : MOV EAX,dword ptr [ECX]
0099cc4b : MOV EAX,dword ptr [EAX + 0x130]
0099cc51 : TEST EAX,EAX
0099cc53 : JZ 0x0099cc58
0099cc55 : MOV EAX,dword ptr [EAX + 0x3c]
0099cc58 : PUSH 0x0
0099cc5a : CALL 0x009a0330
0099cc5f : TEST EAX,EAX
0099cc61 : JZ 0x0099cd6c
0099cc67 : LEA EDX,[EBP + -0x24]
0099cc6a : PUSH EDX
0099cc6b : PUSH EAX
0099cc6c : CALL 0x0040e750
0099cc71 : MOV dword ptr [EBP + -0x4],0x4
0099cc78 : LEA EAX,[EBP + 0x8]
0099cc7b : PUSH EAX
0099cc7c : LEA EAX,[EBP + -0x14]
0099cc7f : LEA ECX,[EBP + -0x24]
0099cc82 : MOV dword ptr [EBP + 0x8],0x27
0099cc89 : CALL 0x00484470
0099cc8e : MOV EAX,dword ptr [EBP + -0x14]
0099cc91 : CMP EAX,dword ptr [EBP + -0x20]
0099cc94 : JNZ 0x0099ccab
0099cc96 : MOV dword ptr [EBP + -0x4],0xffffffff
0099cc9d : LEA ECX,[EBP + -0x24]
0099cca0 : PUSH ECX
0099cca1 : CALL 0x0040f3f0
0099cca6 : JMP 0x0099cd6c
0099ccab : MOV EDX,dword ptr [0x00da9894]
0099ccb1 : MOV ECX,dword ptr [EDX]
0099ccb3 : MOVZX EAX,word ptr [EAX + 0x12]
0099ccb7 : MOV ECX,dword ptr [ECX + 0x17c]
0099ccbd : MOV ECX,dword ptr [ECX + 0x48]
0099ccc0 : MOV EDX,dword ptr [ECX]
0099ccc2 : PUSH EAX
0099ccc3 : MOV EAX,dword ptr [EDX + 0xc4]
0099ccc9 : CALL EAX
0099cccb : MOV ESI,EAX
0099cccd : TEST ESI,ESI
0099cccf : JZ 0x0099cd39
0099ccd1 : MOV EDX,dword ptr [ESI]
0099ccd3 : MOV EAX,dword ptr [EDX + 0x20]
0099ccd6 : MOV ECX,ESI
0099ccd8 : CALL EAX
0099ccda : CMP EAX,0x2
0099ccdd : JNZ 0x0099cd39
0099ccdf : MOV EDX,dword ptr [ESI]
0099cce1 : MOV EAX,dword ptr [EDX + 0x88]
0099cce7 : MOV ECX,ESI
0099cce9 : CALL EAX
0099cceb : FNSTCW word ptr [EBP + 0xa]
0099ccee : MOVZX EAX,word ptr [EBP + 0xa]
0099ccf2 : OR EAX,0xc00
0099ccf7 : MOV dword ptr [EBP + -0x14],EAX
0099ccfa : FLDCW word ptr [EBP + -0x14]
0099ccfd : FISTP qword ptr [EBP + -0x18]
0099cd00 : MOV EAX,dword ptr [EBP + -0x18]
0099cd03 : FLDCW word ptr [EBP + 0xa]
0099cd06 : TEST EAX,EAX
0099cd08 : JZ 0x0099cc96
0099cd0a : LEA ESI,[EAX + 0x6bb]
0099cd10 : IMUL ESI,dword ptr [EBP + 0xc]
0099cd14 : MOV dword ptr [EBP + -0x4],0xffffffff
0099cd1b : LEA EDX,[EBP + -0x24]
0099cd1e : PUSH EDX
0099cd1f : CALL 0x0040f3f0
0099cd24 : MOV EAX,ESI
0099cd26 : MOV ECX,dword ptr [EBP + -0xc]
0099cd29 : MOV dword ptr FS:[0x0],ECX
0099cd30 : POP ECX
0099cd31 : POP EDI
0099cd32 : POP ESI
0099cd33 : MOV ESP,EBP
0099cd35 : POP EBP
0099cd36 : RET 0x8
0099cd39 : MOV dword ptr [EBP + -0x4],0xffffffff
0099cd40 : LEA EAX,[EBP + -0x24]
0099cd43 : PUSH EAX
0099cd44 : CALL 0x0040f3f0
0099cd49 : JMP 0x0099cd6c
0099cd4b : MOV ECX,dword ptr [0x00da9894]
0099cd51 : MOV EAX,dword ptr [ECX]
0099cd53 : TEST EAX,EAX
0099cd55 : JZ 0x0099cd6c
0099cd57 : MOV ECX,dword ptr [EAX + 0x114]
0099cd5d : TEST ECX,ECX
0099cd5f : JZ 0x0099cd6c
0099cd61 : MOV EDX,dword ptr [ECX]
0099cd63 : MOV EAX,dword ptr [EDX]
0099cd65 : PUSH 0xc881f8
0099cd6a : CALL EAX
0099cd6c : XOR EAX,EAX
0099cd6e : MOV ECX,dword ptr [EBP + -0xc]
0099cd71 : MOV dword ptr FS:[0x0],ECX
0099cd78 : POP ECX
0099cd79 : POP EDI
0099cd7a : POP ESI
0099cd7b : MOV ESP,EBP
0099cd7d : POP EBP
0099cd7e : RET 0x8
