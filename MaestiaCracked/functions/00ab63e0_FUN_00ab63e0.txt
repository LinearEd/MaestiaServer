PROGRAM  : Maestia.exe
FUNCTION : FUN_00ab63e0
ENTRY    : 00ab63e0
BODY     : [[00ab63e0, 00ab6558]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00ab63e0(int param_1,undefined4 param_2,int param_3,short param_4)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  undefined4 local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b426f0;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar4 = 0;
  *(undefined4 *)(param_1 + 4) = 0;
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined4 *)(param_1 + 0xc) = 0;
  local_8 = 0;
  local_18 = 1;
  local_14 = 0;
  do {
    if (*(uint *)(param_3 + 0x18) < 8) {
      iVar2 = param_3 + 4;
    }
    else {
      iVar2 = *(int *)(param_3 + 4);
    }
    iVar2 = FUN_00403c70(iVar2,*(undefined4 *)(param_3 + 0x14));
    if (iVar2 != iVar4) {
      if ((iVar2 == -1) || ((param_4 != 0 && ((short)local_14 == param_4)))) {
        uVar3 = FUN_0040e420(param_2,local_34);
        local_8 = 1;
        FUN_00405ae0(uVar3);
        local_8 = local_8 & 0xffffff00;
        if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0(uVar1);
        }
        ExceptionList = local_10;
        return param_1;
      }
      uVar3 = FUN_0040e420(param_2,local_34);
      local_8 = 2;
      FUN_00405ae0(uVar3);
      local_8 = local_8 & 0xffffff00;
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0(uVar1);
      }
      local_1c = 7;
      local_20 = 0;
      local_30 = 0;
    }
    if (*(uint *)(param_3 + 0x18) < 8) {
      iVar4 = param_3 + 4;
    }
    else {
      iVar4 = *(int *)(param_3 + 4);
    }
    iVar4 = FUN_00412db0(iVar4,*(undefined4 *)(param_3 + 0x14));
    local_14 = local_14 + 1;
  } while (iVar2 != -1);
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00ab63e0 : PUSH EBP
00ab63e1 : MOV EBP,ESP
00ab63e3 : PUSH -0x1
00ab63e5 : PUSH 0xb426f0
00ab63ea : MOV EAX,FS:[0x0]
00ab63f0 : PUSH EAX
00ab63f1 : SUB ESP,0x24
00ab63f4 : PUSH EBX
00ab63f5 : PUSH ESI
00ab63f6 : PUSH EDI
00ab63f7 : MOV EAX,[0x00d66fa0]
00ab63fc : XOR EAX,EBP
00ab63fe : PUSH EAX
00ab63ff : LEA EAX,[EBP + -0xc]
00ab6402 : MOV FS:[0x0],EAX
00ab6408 : MOV EBX,dword ptr [EBP + 0xc]
00ab640b : XOR ESI,ESI
00ab640d : MOV dword ptr [EBP + -0x4],ESI
00ab6410 : MOV dword ptr [EBP + -0x14],ESI
00ab6413 : MOV EAX,dword ptr [EBP + 0x8]
00ab6416 : MOV dword ptr [EAX + 0x4],ESI
00ab6419 : MOV dword ptr [EAX + 0x8],ESI
00ab641c : MOV dword ptr [EAX + 0xc],ESI
00ab641f : MOV dword ptr [EBP + -0x4],ESI
00ab6422 : MOV dword ptr [EBP + -0x14],0x1
00ab6429 : MOV dword ptr [EBP + -0x10],ESI
00ab642c : LEA ESP,[ESP]
00ab6430 : MOV EAX,dword ptr [EBP + 0x10]
00ab6433 : CMP dword ptr [EAX + 0x18],0x8
00ab6437 : MOV ECX,dword ptr [EAX + 0x14]
00ab643a : JC 0x00ab6443
00ab643c : ADD EAX,0x4
00ab643f : MOV EAX,dword ptr [EAX]
00ab6441 : JMP 0x00ab6446
00ab6443 : ADD EAX,0x4
00ab6446 : PUSH ECX
00ab6447 : PUSH EAX
00ab6448 : MOV EDX,ESI
00ab644a : MOV EAX,EBX
00ab644c : CALL 0x00403c70
00ab6451 : MOV EDI,EAX
00ab6453 : CMP EDI,ESI
00ab6455 : JZ 0x00ab64b9
00ab6457 : CMP EDI,-0x1
00ab645a : JZ 0x00ab64fe
00ab6460 : MOV AX,word ptr [EBP + 0x14]
00ab6464 : TEST AX,AX
00ab6467 : JZ 0x00ab6473
00ab6469 : CMP word ptr [EBP + -0x10],AX
00ab646d : JZ 0x00ab64fe
00ab6473 : LEA EAX,[EBP + -0x30]
00ab6476 : PUSH EAX
00ab6477 : MOV ECX,EDI
00ab6479 : SUB ECX,ESI
00ab647b : PUSH EBX
00ab647c : MOV EDX,ESI
00ab647e : CALL 0x0040e420
00ab6483 : MOV dword ptr [EBP + -0x4],0x2
00ab648a : PUSH EAX
00ab648b : MOV EAX,dword ptr [EBP + 0x8]
00ab648e : CALL 0x00405ae0
00ab6493 : MOV byte ptr [EBP + -0x4],0x0
00ab6497 : CMP dword ptr [EBP + -0x18],0x8
00ab649b : JC 0x00ab64a5
00ab649d : MOV ECX,dword ptr [EBP + -0x2c]
00ab64a0 : CALL 0x006f04e0
00ab64a5 : XOR ECX,ECX
00ab64a7 : MOV dword ptr [EBP + -0x18],0x7
00ab64ae : MOV dword ptr [EBP + -0x1c],0x0
00ab64b5 : MOV word ptr [EBP + -0x2c],CX
00ab64b9 : MOV EAX,dword ptr [EBP + 0x10]
00ab64bc : CMP dword ptr [EAX + 0x18],0x8
00ab64c0 : MOV ECX,dword ptr [EAX + 0x14]
00ab64c3 : LEA EDX,[EDI + 0x1]
00ab64c6 : JC 0x00ab64cf
00ab64c8 : ADD EAX,0x4
00ab64cb : MOV EAX,dword ptr [EAX]
00ab64cd : JMP 0x00ab64d2
00ab64cf : ADD EAX,0x4
00ab64d2 : PUSH ECX
00ab64d3 : PUSH EAX
00ab64d4 : MOV EAX,EBX
00ab64d6 : CALL 0x00412db0
00ab64db : INC dword ptr [EBP + -0x10]
00ab64de : MOV ESI,EAX
00ab64e0 : CMP EDI,-0x1
00ab64e3 : JNZ 0x00ab6430
00ab64e9 : MOV EAX,dword ptr [EBP + 0x8]
00ab64ec : MOV ECX,dword ptr [EBP + -0xc]
00ab64ef : MOV dword ptr FS:[0x0],ECX
00ab64f6 : POP ECX
00ab64f7 : POP EDI
00ab64f8 : POP ESI
00ab64f9 : POP EBX
00ab64fa : MOV ESP,EBP
00ab64fc : POP EBP
00ab64fd : RET
00ab64fe : LEA EDX,[EBP + -0x30]
00ab6501 : PUSH EDX
00ab6502 : PUSH EBX
00ab6503 : OR ECX,0xffffffff
00ab6506 : MOV EDX,ESI
00ab6508 : CALL 0x0040e420
00ab650d : MOV dword ptr [EBP + -0x4],0x1
00ab6514 : MOV ESI,dword ptr [EBP + 0x8]
00ab6517 : PUSH EAX
00ab6518 : MOV EAX,ESI
00ab651a : CALL 0x00405ae0
00ab651f : MOV byte ptr [EBP + -0x4],0x0
00ab6523 : CMP dword ptr [EBP + -0x18],0x8
00ab6527 : JC 0x00ab6531
00ab6529 : MOV ECX,dword ptr [EBP + -0x2c]
00ab652c : CALL 0x006f04e0
00ab6531 : XOR EAX,EAX
00ab6533 : MOV word ptr [EBP + -0x2c],AX
00ab6537 : MOV dword ptr [EBP + -0x18],0x7
00ab653e : MOV dword ptr [EBP + -0x1c],0x0
00ab6545 : MOV EAX,ESI
00ab6547 : MOV ECX,dword ptr [EBP + -0xc]
00ab654a : MOV dword ptr FS:[0x0],ECX
00ab6551 : POP ECX
00ab6552 : POP EDI
00ab6553 : POP ESI
00ab6554 : POP EBX
00ab6555 : MOV ESP,EBP
00ab6557 : POP EBP
00ab6558 : RET
