PROGRAM  : Maestia.exe
FUNCTION : FUN_00586000
ENTRY    : 00586000
BODY     : [[00586000, 00586114]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00586000(int param_1)

{
  int iVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  char *pcVar5;
  undefined4 uVar6;
  undefined1 auStack_10 [4];
  undefined4 uStack_c;
  
  iVar2 = param_1;
  if (((*(int *)(param_1 + 8) == 0) ||
      (iVar4 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar4 != 7)) ||
     (cVar3 = (**(code **)(**(int **)(iVar2 + 8) + 0x40))(), cVar3 != '\0')) {
    iVar4 = FUN_00515840(0x48,0);
    if (iVar4 == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = FUN_00585130(*(undefined4 *)(iVar2 + 0x18));
    }
  }
  else {
    iVar1 = *(int *)(iVar2 + 8);
    if (iVar1 == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = iVar1 + -0x10;
      if (iVar4 != 0) {
        *(uint *)(iVar1 + -8) = *(int *)(iVar1 + -8) + 1U & 0x8fffffff;
      }
    }
  }
  param_1 = CONCAT31(param_1._1_3_,1);
  auStack_10[0] = 4;
  uStack_c = 0;
  (**(code **)(*(int *)(iVar4 + 0x10) + 0xc))
            (*(int *)(iVar2 + 0x18),*(int *)(*(int *)(iVar2 + 0x18) + 0x78) + 0x250,auStack_10,
             &param_1);
  FUN_00526bc0();
  if (*(int *)(iVar2 + 0x1c) != 0) {
    if (*(int *)(iVar2 + 0x1c) == 1) {
      pcVar5 = (char *)FUN_00526260(0);
      if ((*pcVar5 == '\x03') || (*pcVar5 == '\x04')) {
        uVar6 = *(undefined4 *)(iVar2 + 0x18);
        FUN_00526260(0);
        FUN_00527730(uVar6);
        uVar6 = FUN_0063b380();
        FUN_00585260(uVar6);
        goto LAB_00586100;
      }
    }
    FUN_00584630(iVar2);
  }
LAB_00586100:
  FUN_005271c0(iVar4);
  FUN_00503db0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00586000 : SUB ESP,0x10
00586003 : PUSH ESI
00586004 : MOV ESI,dword ptr [ESP + 0x18]
00586008 : CMP dword ptr [ESI + 0x8],0x0
0058600c : PUSH EDI
0058600d : JZ 0x0058604c
0058600f : MOV ECX,dword ptr [ESI + 0x8]
00586012 : MOV EAX,dword ptr [ECX]
00586014 : MOV EDX,dword ptr [EAX + 0x8]
00586017 : CALL EDX
00586019 : CMP EAX,0x7
0058601c : JNZ 0x0058604c
0058601e : MOV ECX,dword ptr [ESI + 0x8]
00586021 : MOV EAX,dword ptr [ECX]
00586023 : MOV EDX,dword ptr [EAX + 0x40]
00586026 : CALL EDX
00586028 : TEST AL,AL
0058602a : JNZ 0x0058604c
0058602c : MOV EAX,dword ptr [ESI + 0x8]
0058602f : TEST EAX,EAX
00586031 : JZ 0x00586048
00586033 : LEA EDI,[EAX + -0x10]
00586036 : TEST EDI,EDI
00586038 : JZ 0x00586076
0058603a : MOV EAX,dword ptr [EDI + 0x8]
0058603d : INC EAX
0058603e : AND EAX,0x8fffffff
00586043 : MOV dword ptr [EDI + 0x8],EAX
00586046 : JMP 0x00586076
00586048 : XOR EDI,EDI
0058604a : JMP 0x00586076
0058604c : MOV ECX,dword ptr [ESI + 0x18]
0058604f : MOV EDX,dword ptr [ECX + 0x78]
00586052 : MOV ECX,dword ptr [EDX + 0x288]
00586058 : PUSH 0x0
0058605a : PUSH 0x48
0058605c : CALL 0x00515840
00586061 : TEST EAX,EAX
00586063 : JZ 0x00586072
00586065 : MOV ECX,dword ptr [ESI + 0x18]
00586068 : PUSH ECX
00586069 : MOV ECX,EAX
0058606b : CALL 0x00585130
00586070 : JMP 0x00586074
00586072 : XOR EAX,EAX
00586074 : MOV EDI,EAX
00586076 : MOV EAX,dword ptr [ESI + 0x18]
00586079 : MOV EDX,dword ptr [EDI + 0x10]
0058607c : PUSH EBX
0058607d : LEA EBX,[ESP + 0x20]
00586081 : PUSH EBX
00586082 : LEA EBX,[ESP + 0x10]
00586086 : PUSH EBX
00586087 : MOV byte ptr [ESP + 0x28],0x1
0058608c : MOV byte ptr [ESP + 0x14],0x4
00586091 : MOV dword ptr [ESP + 0x18],0x0
00586099 : MOV EBX,dword ptr [EAX + 0x78]
0058609c : LEA ECX,[EDI + 0x10]
0058609f : ADD EBX,0x250
005860a5 : PUSH EBX
005860a6 : PUSH EAX
005860a7 : MOV EAX,dword ptr [EDX + 0xc]
005860aa : CALL EAX
005860ac : LEA ECX,[ESP + 0xc]
005860b0 : CALL 0x00526bc0
005860b5 : MOV EAX,dword ptr [ESI + 0x1c]
005860b8 : POP EBX
005860b9 : TEST EAX,EAX
005860bb : JZ 0x00586100
005860bd : CMP EAX,0x1
005860c0 : JNZ 0x005860f8
005860c2 : PUSH 0x0
005860c4 : MOV ECX,ESI
005860c6 : CALL 0x00526260
005860cb : MOV AL,byte ptr [EAX]
005860cd : CMP AL,0x3
005860cf : JZ 0x005860d5
005860d1 : CMP AL,0x4
005860d3 : JNZ 0x005860f8
005860d5 : MOV ECX,dword ptr [ESI + 0x18]
005860d8 : PUSH ECX
005860d9 : PUSH 0x0
005860db : MOV ECX,ESI
005860dd : CALL 0x00526260
005860e2 : MOV ECX,EAX
005860e4 : CALL 0x00527730
005860e9 : CALL 0x0063b380
005860ee : PUSH EAX
005860ef : MOV ECX,EDI
005860f1 : CALL 0x00585260
005860f6 : JMP 0x00586100
005860f8 : PUSH ESI
005860f9 : MOV ECX,EDI
005860fb : CALL 0x00584630
00586100 : MOV ECX,dword ptr [ESI + 0x4]
00586103 : PUSH EDI
00586104 : CALL 0x005271c0
00586109 : MOV ECX,EDI
0058610b : POP EDI
0058610c : POP ESI
0058610d : ADD ESP,0x10
00586110 : JMP 0x00503db0
