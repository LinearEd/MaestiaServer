PROGRAM  : Maestia.exe
FUNCTION : FUN_006c0400
ENTRY    : 006c0400
BODY     : [[006c0400, 006c04e3]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006c0400(int param_1)

{
  void *_Src;
  uint uVar1;
  undefined4 uVar2;
  void *pvVar3;
  uint uVar4;
  int iVar5;
  int unaff_ESI;
  int unaff_EDI;
  undefined4 local_4;
  
  local_4 = *(void **)(unaff_EDI + 0xc);
  pvVar3 = *(void **)(unaff_ESI + 0x34);
  _Src = *(void **)(unaff_ESI + 0x30);
  if (pvVar3 < _Src) {
    pvVar3 = *(void **)(unaff_ESI + 0x2c);
  }
  uVar1 = *(uint *)(unaff_EDI + 0x10);
  uVar4 = (int)pvVar3 - (int)_Src;
  if (uVar1 < (uint)((int)pvVar3 - (int)_Src)) {
    uVar4 = uVar1;
  }
  if ((uVar4 != 0) && (param_1 == -5)) {
    param_1 = 0;
  }
  *(int *)(unaff_EDI + 0x14) = *(int *)(unaff_EDI + 0x14) + uVar4;
  *(uint *)(unaff_EDI + 0x10) = uVar1 - uVar4;
  if (*(code **)(unaff_ESI + 0x38) != (code *)0x0) {
    uVar2 = (**(code **)(unaff_ESI + 0x38))(*(undefined4 *)(unaff_ESI + 0x3c),_Src,uVar4);
    *(undefined4 *)(unaff_ESI + 0x3c) = uVar2;
    *(undefined4 *)(unaff_EDI + 0x30) = uVar2;
  }
  _memcpy(local_4,_Src,uVar4);
  local_4 = (void *)((int)local_4 + uVar4);
  iVar5 = (int)_Src + uVar4;
  if (iVar5 == *(int *)(unaff_ESI + 0x2c)) {
    pvVar3 = *(void **)(unaff_ESI + 0x28);
    if (*(int *)(unaff_ESI + 0x34) == *(int *)(unaff_ESI + 0x2c)) {
      *(void **)(unaff_ESI + 0x34) = pvVar3;
    }
    uVar1 = *(uint *)(unaff_EDI + 0x10);
    uVar4 = *(int *)(unaff_ESI + 0x34) - (int)pvVar3;
    if (uVar1 < uVar4) {
      uVar4 = uVar1;
    }
    if ((uVar4 != 0) && (param_1 == -5)) {
      param_1 = 0;
    }
    *(int *)(unaff_EDI + 0x14) = *(int *)(unaff_EDI + 0x14) + uVar4;
    *(uint *)(unaff_EDI + 0x10) = uVar1 - uVar4;
    if (*(code **)(unaff_ESI + 0x38) != (code *)0x0) {
      uVar2 = (**(code **)(unaff_ESI + 0x38))(*(undefined4 *)(unaff_ESI + 0x3c),pvVar3,uVar4);
      *(undefined4 *)(unaff_ESI + 0x3c) = uVar2;
      *(undefined4 *)(unaff_EDI + 0x30) = uVar2;
    }
    _memcpy(local_4,pvVar3,uVar4);
    local_4 = (void *)((int)local_4 + uVar4);
    iVar5 = (int)pvVar3 + uVar4;
  }
  *(void **)(unaff_EDI + 0xc) = local_4;
  *(int *)(unaff_ESI + 0x30) = iVar5;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
006c0400 : PUSH ECX
006c0401 : MOV EAX,dword ptr [EDI + 0xc]
006c0404 : PUSH EBX
006c0405 : MOV EBX,dword ptr [ESI + 0x34]
006c0408 : PUSH EBP
006c0409 : MOV EBP,dword ptr [ESI + 0x30]
006c040c : MOV dword ptr [ESP + 0x8],EAX
006c0410 : CMP EBP,EBX
006c0412 : JBE 0x006c0417
006c0414 : MOV EBX,dword ptr [ESI + 0x2c]
006c0417 : MOV EAX,dword ptr [EDI + 0x10]
006c041a : SUB EBX,EBP
006c041c : CMP EBX,EAX
006c041e : JBE 0x006c0422
006c0420 : MOV EBX,EAX
006c0422 : TEST EBX,EBX
006c0424 : JZ 0x006c0435
006c0426 : CMP dword ptr [ESP + 0x10],-0x5
006c042b : JNZ 0x006c0435
006c042d : MOV dword ptr [ESP + 0x10],0x0
006c0435 : ADD dword ptr [EDI + 0x14],EBX
006c0438 : SUB EAX,EBX
006c043a : MOV dword ptr [EDI + 0x10],EAX
006c043d : MOV EAX,dword ptr [ESI + 0x38]
006c0440 : TEST EAX,EAX
006c0442 : JZ 0x006c0455
006c0444 : MOV ECX,dword ptr [ESI + 0x3c]
006c0447 : PUSH EBX
006c0448 : PUSH EBP
006c0449 : PUSH ECX
006c044a : CALL EAX
006c044c : MOV dword ptr [ESI + 0x3c],EAX
006c044f : ADD ESP,0xc
006c0452 : MOV dword ptr [EDI + 0x30],EAX
006c0455 : MOV EDX,dword ptr [ESP + 0x8]
006c0459 : PUSH EBX
006c045a : PUSH EBP
006c045b : PUSH EDX
006c045c : CALL 0x0063ae40
006c0461 : MOV EAX,dword ptr [ESI + 0x2c]
006c0464 : ADD dword ptr [ESP + 0x14],EBX
006c0468 : ADD EBP,EBX
006c046a : ADD ESP,0xc
006c046d : CMP EBP,EAX
006c046f : JNZ 0x006c04d2
006c0471 : MOV EBP,dword ptr [ESI + 0x28]
006c0474 : CMP dword ptr [ESI + 0x34],EAX
006c0477 : JNZ 0x006c047c
006c0479 : MOV dword ptr [ESI + 0x34],EBP
006c047c : MOV EBX,dword ptr [ESI + 0x34]
006c047f : MOV EAX,dword ptr [EDI + 0x10]
006c0482 : SUB EBX,EBP
006c0484 : CMP EBX,EAX
006c0486 : JBE 0x006c048a
006c0488 : MOV EBX,EAX
006c048a : TEST EBX,EBX
006c048c : JZ 0x006c049d
006c048e : CMP dword ptr [ESP + 0x10],-0x5
006c0493 : JNZ 0x006c049d
006c0495 : MOV dword ptr [ESP + 0x10],0x0
006c049d : ADD dword ptr [EDI + 0x14],EBX
006c04a0 : SUB EAX,EBX
006c04a2 : MOV dword ptr [EDI + 0x10],EAX
006c04a5 : MOV EAX,dword ptr [ESI + 0x38]
006c04a8 : TEST EAX,EAX
006c04aa : JZ 0x006c04bd
006c04ac : MOV ECX,dword ptr [ESI + 0x3c]
006c04af : PUSH EBX
006c04b0 : PUSH EBP
006c04b1 : PUSH ECX
006c04b2 : CALL EAX
006c04b4 : MOV dword ptr [ESI + 0x3c],EAX
006c04b7 : ADD ESP,0xc
006c04ba : MOV dword ptr [EDI + 0x30],EAX
006c04bd : MOV EDX,dword ptr [ESP + 0x8]
006c04c1 : PUSH EBX
006c04c2 : PUSH EBP
006c04c3 : PUSH EDX
006c04c4 : CALL 0x0063ae40
006c04c9 : ADD dword ptr [ESP + 0x14],EBX
006c04cd : ADD ESP,0xc
006c04d0 : ADD EBP,EBX
006c04d2 : MOV EAX,dword ptr [ESP + 0x8]
006c04d6 : MOV dword ptr [EDI + 0xc],EAX
006c04d9 : MOV EAX,dword ptr [ESP + 0x10]
006c04dd : MOV dword ptr [ESI + 0x30],EBP
006c04e0 : POP EBP
006c04e1 : POP EBX
006c04e2 : POP ECX
006c04e3 : RET
