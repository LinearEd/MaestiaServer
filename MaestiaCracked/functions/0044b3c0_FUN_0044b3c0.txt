PROGRAM  : Maestia.exe
FUNCTION : FUN_0044b3c0
ENTRY    : 0044b3c0
BODY     : [[0044b3c0, 0044b508] [0044b50c, 0044b51a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0044b3c0(void)

{
  void *pvVar1;
  rsize_t _DstSize;
  uint uVar2;
  undefined4 *_Dst;
  int iVar3;
  int iVar4;
  uint uVar5;
  int unaff_ESI;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint local_8;
  
  uVar2 = *(uint *)(unaff_ESI + 0x14);
  local_8 = 1;
  if (uVar2 == 0x9249249) {
    uVar2 = FUN_00442c50();
  }
  uVar5 = uVar2 >> 1;
  if (uVar5 < 8) {
    uVar5 = 8;
  }
  else if (uVar5 < 2) goto LAB_0044b408;
  if (uVar2 <= 0x9249249 - uVar5) {
    local_8 = uVar5;
  }
LAB_0044b408:
  uVar2 = *(uint *)(unaff_ESI + 0x18);
  _Dst = (undefined4 *)FUN_004c1790();
  iVar4 = uVar2 * 4;
  pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + iVar4);
  iVar3 = (*(int *)(unaff_ESI + 0x14) * 4 - (int)pvVar1) + *(int *)(unaff_ESI + 0x10) >> 2;
  puVar7 = _Dst + uVar2 + iVar3;
  if (iVar3 != 0) {
    _memmove_s(_Dst + uVar2,iVar3 * 4,pvVar1,iVar3 * 4);
  }
  if (local_8 < uVar2) {
    iVar3 = (int)(local_8 * 4) >> 2;
    if (iVar3 != 0) {
      _DstSize = iVar3 * 4;
      _memmove_s(puVar7,_DstSize,*(void **)(unaff_ESI + 0x10),_DstSize);
    }
    pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + local_8 * 4);
    iVar4 = (*(int *)(unaff_ESI + 0x10) - (int)pvVar1) + iVar4 >> 2;
    puVar7 = _Dst + iVar4;
    uVar2 = local_8;
    if (iVar4 != 0) {
      _memmove_s(_Dst,iVar4 * 4,pvVar1,iVar4 * 4);
    }
  }
  else {
    iVar4 = iVar4 >> 2;
    puVar6 = puVar7 + iVar4;
    if (iVar4 != 0) {
      _memmove_s(puVar7,iVar4 * 4,*(void **)(unaff_ESI + 0x10),iVar4 * 4);
    }
    iVar4 = local_8 - uVar2;
    puVar7 = _Dst;
    if (iVar4 != 0) {
      for (; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = 0;
        puVar6 = puVar6 + 1;
      }
    }
  }
  if (uVar2 != 0) {
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar7 = 0;
      puVar7 = puVar7 + 1;
    }
  }
  if (*(int *)(unaff_ESI + 0x10) == 0) {
    *(int *)(unaff_ESI + 0x14) = *(int *)(unaff_ESI + 0x14) + local_8;
    *(undefined4 **)(unaff_ESI + 0x10) = _Dst;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0044b3c0 : PUSH EBP
0044b3c1 : MOV EBP,ESP
0044b3c3 : SUB ESP,0x10
0044b3c6 : MOV EAX,dword ptr [ESI + 0x14]
0044b3c9 : MOV ECX,0x9249249
0044b3ce : MOV EDX,0x1
0044b3d3 : SUB ECX,EAX
0044b3d5 : PUSH EBX
0044b3d6 : PUSH EDI
0044b3d7 : MOV dword ptr [EBP + -0x4],EDX
0044b3da : CMP ECX,EDX
0044b3dc : JNC 0x0044b3e3
0044b3de : CALL 0x00442c50
0044b3e3 : MOV ECX,EAX
0044b3e5 : SHR ECX,0x1
0044b3e7 : CMP ECX,0x8
0044b3ea : JNC 0x0044b3f3
0044b3ec : MOV ECX,0x8
0044b3f1 : JMP 0x0044b3f8
0044b3f3 : CMP ECX,0x1
0044b3f6 : JBE 0x0044b408
0044b3f8 : MOV EDI,0x9249249
0044b3fd : SUB EDI,ECX
0044b3ff : CMP EAX,EDI
0044b401 : JA 0x0044b408
0044b403 : MOV EDX,ECX
0044b405 : MOV dword ptr [EBP + -0x4],ECX
0044b408 : MOV EDI,dword ptr [ESI + 0x18]
0044b40b : LEA ECX,[EAX + EDX*0x1]
0044b40e : MOV dword ptr [EBP + -0xc],EDI
0044b411 : CALL 0x004c1790
0044b416 : MOV ECX,dword ptr [ESI + 0x10]
0044b419 : MOV dword ptr [EBP + -0x8],EAX
0044b41c : ADD EDI,EDI
0044b41e : ADD EDI,EDI
0044b420 : LEA EDX,[EDI + EAX*0x1]
0044b423 : MOV EAX,dword ptr [ESI + 0x14]
0044b426 : ADD EAX,EAX
0044b428 : LEA EBX,[ECX + EDI*0x1]
0044b42b : ADD EAX,EAX
0044b42d : SUB EAX,EBX
0044b42f : ADD EAX,ECX
0044b431 : SAR EAX,0x2
0044b434 : LEA ECX,[EAX*0x4 + 0x0]
0044b43b : MOV dword ptr [EBP + -0x10],EBX
0044b43e : LEA EBX,[ECX + EDX*0x1]
0044b441 : TEST EAX,EAX
0044b443 : JBE 0x0044b454
0044b445 : MOV EAX,dword ptr [EBP + -0x10]
0044b448 : PUSH ECX
0044b449 : PUSH EAX
0044b44a : PUSH ECX
0044b44b : PUSH EDX
0044b44c : CALL 0x00634101
0044b451 : ADD ESP,0x10
0044b454 : MOV EDX,dword ptr [EBP + -0x4]
0044b457 : MOV ECX,dword ptr [ESI + 0x10]
0044b45a : CMP dword ptr [EBP + -0xc],EDX
0044b45d : JA 0x0044b4a3
0044b45f : MOV EAX,ECX
0044b461 : SUB EAX,ECX
0044b463 : ADD EAX,EDI
0044b465 : SAR EAX,0x2
0044b468 : LEA EDI,[EAX*0x4 + 0x0]
0044b46f : LEA EDX,[EDI + EBX*0x1]
0044b472 : MOV dword ptr [EBP + -0x10],EDX
0044b475 : TEST EAX,EAX
0044b477 : JBE 0x0044b485
0044b479 : PUSH EDI
0044b47a : PUSH ECX
0044b47b : PUSH EDI
0044b47c : PUSH EBX
0044b47d : CALL 0x00634101
0044b482 : ADD ESP,0x10
0044b485 : MOV EDX,dword ptr [EBP + -0x4]
0044b488 : MOV EBX,dword ptr [EBP + -0xc]
0044b48b : MOV ECX,EDX
0044b48d : SUB ECX,EBX
0044b48f : JZ 0x0044b498
0044b491 : MOV EDI,dword ptr [EBP + -0x10]
0044b494 : XOR EAX,EAX
0044b496 : STOSD.REP ES:EDI
0044b498 : TEST EBX,EBX
0044b49a : JBE 0x0044b4fd
0044b49c : MOV EDI,dword ptr [EBP + -0x8]
0044b49f : MOV ECX,EBX
0044b4a1 : JMP 0x0044b4f9
0044b4a3 : LEA EAX,[EDX*0x4 + 0x0]
0044b4aa : SAR EAX,0x2
0044b4ad : TEST EAX,EAX
0044b4af : JBE 0x0044b4c4
0044b4b1 : ADD EAX,EAX
0044b4b3 : ADD EAX,EAX
0044b4b5 : PUSH EAX
0044b4b6 : PUSH ECX
0044b4b7 : PUSH EAX
0044b4b8 : PUSH EBX
0044b4b9 : CALL 0x00634101
0044b4be : MOV EDX,dword ptr [EBP + -0x4]
0044b4c1 : ADD ESP,0x10
0044b4c4 : MOV EAX,dword ptr [ESI + 0x10]
0044b4c7 : LEA EBX,[EAX + EDX*0x4]
0044b4ca : SUB EAX,EBX
0044b4cc : ADD EAX,EDI
0044b4ce : MOV EDI,dword ptr [EBP + -0x8]
0044b4d1 : SAR EAX,0x2
0044b4d4 : LEA ECX,[EAX*0x4 + 0x0]
0044b4db : ADD EDI,ECX
0044b4dd : TEST EAX,EAX
0044b4df : JBE 0x0044b4f3
0044b4e1 : MOV EAX,dword ptr [EBP + -0x8]
0044b4e4 : PUSH ECX
0044b4e5 : PUSH EBX
0044b4e6 : PUSH ECX
0044b4e7 : PUSH EAX
0044b4e8 : CALL 0x00634101
0044b4ed : MOV EDX,dword ptr [EBP + -0x4]
0044b4f0 : ADD ESP,0x10
0044b4f3 : TEST EDX,EDX
0044b4f5 : JBE 0x0044b4fd
0044b4f7 : MOV ECX,EDX
0044b4f9 : XOR EAX,EAX
0044b4fb : STOSD.REP ES:EDI
0044b4fd : MOV ECX,dword ptr [ESI + 0x10]
0044b500 : TEST ECX,ECX
0044b502 : JZ 0x0044b50c
0044b504 : CALL 0x006f04e0
0044b50c : MOV ECX,dword ptr [EBP + -0x8]
0044b50f : ADD dword ptr [ESI + 0x14],EDX
0044b512 : POP EDI
0044b513 : MOV dword ptr [ESI + 0x10],ECX
0044b516 : POP EBX
0044b517 : MOV ESP,EBP
0044b519 : POP EBP
0044b51a : RET
