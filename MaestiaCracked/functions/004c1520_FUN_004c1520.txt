PROGRAM  : Maestia.exe
FUNCTION : FUN_004c1520
ENTRY    : 004c1520
BODY     : [[004c1520, 004c1566]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_004c1520(void)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  int *in_EDX;
  int iVar4;
  
  piVar1 = (int *)*in_EDX;
  uVar3 = (uint)in_EDX[1] >> 2;
  uVar2 = in_EDX[1] & 3;
  if (piVar1 == (int *)0x0) {
    iVar4 = 0;
  }
  else {
    iVar4 = *piVar1;
  }
  if (*(uint *)(iVar4 + 0x14) <= uVar3) {
    if (piVar1 == (int *)0x0) {
      iVar4 = 0;
    }
    else {
      iVar4 = *piVar1;
    }
    uVar3 = uVar3 - *(int *)(iVar4 + 0x14);
  }
  if (piVar1 != (int *)0x0) {
    return *(int *)(*(int *)(*piVar1 + 0x10) + uVar3 * 4) + uVar2 * 4;
  }
  return *(int *)(iRam00000010 + uVar3 * 4) + uVar2 * 4;
}



============================================================
DISASSEMBLY
============================================================
004c1520 : MOV EAX,dword ptr [EDX + 0x4]
004c1523 : MOV EDX,dword ptr [EDX]
004c1525 : MOV ECX,EAX
004c1527 : SHR ECX,0x2
004c152a : AND EAX,0x3
004c152d : PUSH ESI
004c152e : TEST EDX,EDX
004c1530 : JZ 0x004c1536
004c1532 : MOV ESI,dword ptr [EDX]
004c1534 : JMP 0x004c1538
004c1536 : XOR ESI,ESI
004c1538 : CMP dword ptr [ESI + 0x14],ECX
004c153b : JA 0x004c154a
004c153d : TEST EDX,EDX
004c153f : JZ 0x004c1545
004c1541 : MOV ESI,dword ptr [EDX]
004c1543 : JMP 0x004c1547
004c1545 : XOR ESI,ESI
004c1547 : SUB ECX,dword ptr [ESI + 0x14]
004c154a : POP ESI
004c154b : TEST EDX,EDX
004c154d : JZ 0x004c155b
004c154f : MOV EDX,dword ptr [EDX]
004c1551 : MOV EDX,dword ptr [EDX + 0x10]
004c1554 : MOV ECX,dword ptr [EDX + ECX*0x4]
004c1557 : LEA EAX,[ECX + EAX*0x4]
004c155a : RET
004c155b : XOR EDX,EDX
004c155d : MOV EDX,dword ptr [EDX + 0x10]
004c1560 : MOV ECX,dword ptr [EDX + ECX*0x4]
004c1563 : LEA EAX,[ECX + EAX*0x4]
004c1566 : RET
