PROGRAM  : Maestia.exe
FUNCTION : FUN_008c1480
ENTRY    : 008c1480
BODY     : [[008c1480, 008c1586]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_008c1480(int param_1)

{
  undefined8 *puVar1;
  char cVar2;
  int iVar3;
  short *psVar4;
  int iVar5;
  uint uVar6;
  int iStack_30;
  int local_2c;
  short local_24;
  
  iVar3 = *(int *)(param_1 + 0x5c);
  cVar2 = FUN_008c11e0();
  if (cVar2 == '\0') {
    FUN_008018d0(L"[AvaGuiSkillTree::IsPossibleRemoveSkill] Skill Not Found");
    return 0;
  }
  uVar6 = 0;
  if (0 < (int)(*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4) & 0xfffffffcU)) {
    do {
      if (uVar6 < (uint)(*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4) >> 2)) {
        puVar1 = *(undefined8 **)(*(int *)(iVar3 + 4) + uVar6 * 4);
        iStack_30 = (int)((ulonglong)*puVar1 >> 0x20);
        if ((((iStack_30 != 0) && (local_2c = (int)puVar1[1], -1 < local_2c)) &&
            (local_24 = (short)puVar1[2], local_24 != 0)) &&
           (iVar3 = FUN_00703c00(0xa100), iVar3 != 0)) {
          iVar5 = 0;
          psVar4 = (short *)(iVar3 + 0x22);
          do {
            if (((*psVar4 != 0) && (*psVar4 == 0)) && (psVar4[1] == 0)) {
              return 0;
            }
            iVar5 = iVar5 + 1;
            psVar4 = psVar4 + 2;
          } while (iVar5 < 5);
        }
      }
      iVar3 = *(int *)(param_1 + 0x5c);
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < *(int *)(iVar3 + 8) - *(int *)(iVar3 + 4) >> 2);
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
008c1480 : PUSH EBP
008c1481 : MOV EBP,ESP
008c1483 : SUB ESP,0x30
008c1486 : MOV EDX,dword ptr [EBP + 0x8]
008c1489 : PUSH ESI
008c148a : MOV ESI,dword ptr [EBP + 0xc]
008c148d : XOR ECX,ECX
008c148f : PUSH EDI
008c1490 : MOV EDI,dword ptr [EDX + 0x5c]
008c1493 : XOR EAX,EAX
008c1495 : MOV word ptr [EBP + -0x8],CX
008c1499 : LEA EDX,[EBP + -0x18]
008c149c : MOV ECX,EDI
008c149e : MOV word ptr [EBP + -0x16],AX
008c14a2 : MOV dword ptr [EBP + -0x14],EAX
008c14a5 : MOV dword ptr [EBP + -0x10],EAX
008c14a8 : CALL 0x008c11e0
008c14ad : TEST AL,AL
008c14af : JNZ 0x008c14ce
008c14b1 : MOV ESI,dword ptr [0x00da98e8]
008c14b7 : PUSH 0xc4f628
008c14bc : CALL 0x008018d0
008c14c1 : ADD ESP,0x4
008c14c4 : XOR AL,AL
008c14c6 : POP EDI
008c14c7 : POP ESI
008c14c8 : MOV ESP,EBP
008c14ca : POP EBP
008c14cb : RET 0x8
008c14ce : MOV EAX,dword ptr [EDI + 0x8]
008c14d1 : SUB EAX,dword ptr [EDI + 0x4]
008c14d4 : XOR ESI,ESI
008c14d6 : TEST EAX,0xfffffffc
008c14db : JLE 0x008c157d
008c14e1 : MOV EAX,dword ptr [EDI + 0x4]
008c14e4 : MOV ECX,dword ptr [EDI + 0x8]
008c14e7 : SUB ECX,EAX
008c14e9 : SAR ECX,0x2
008c14ec : CMP ESI,ECX
008c14ee : JNC 0x008c1565
008c14f0 : MOV EAX,dword ptr [EAX + ESI*0x4]
008c14f3 : MOVQ XMM0,qword ptr [EAX]
008c14f7 : MOV EDX,dword ptr [EBP + -0x14]
008c14fa : MOVQ qword ptr [EBP + -0x30],XMM0
008c14ff : MOVQ XMM0,qword ptr [EAX + 0x8]
008c1504 : MOVQ qword ptr [EBP + -0x28],XMM0
008c1509 : MOVQ XMM0,qword ptr [EAX + 0x10]
008c150e : MOVQ qword ptr [EBP + -0x20],XMM0
008c1513 : CMP dword ptr [EBP + -0x2c],EDX
008c1516 : JZ 0x008c1565
008c1518 : MOV EAX,dword ptr [EBP + -0x10]
008c151b : CMP dword ptr [EBP + -0x28],EAX
008c151e : JL 0x008c1565
008c1520 : CMP word ptr [EBP + -0x20],0x0
008c1525 : JZ 0x008c1565
008c1527 : MOV EDI,dword ptr [EBP + -0x30]
008c152a : PUSH 0xa100
008c152f : CALL 0x00703c00
008c1534 : ADD ESP,0x4
008c1537 : TEST EAX,EAX
008c1539 : JZ 0x008c1565
008c153b : XOR ECX,ECX
008c153d : ADD EAX,0x22
008c1540 : MOVZX EDX,word ptr [EAX]
008c1543 : TEST DX,DX
008c1546 : JZ 0x008c155c
008c1548 : CMP DX,word ptr [EBP + -0x16]
008c154c : JNZ 0x008c155c
008c154e : MOV DX,word ptr [EBP + -0x8]
008c1552 : CMP word ptr [EAX + 0x2],DX
008c1556 : JZ 0x008c14c4
008c155c : INC ECX
008c155d : ADD EAX,0x4
008c1560 : CMP ECX,0x5
008c1563 : JL 0x008c1540
008c1565 : MOV EAX,dword ptr [EBP + 0x8]
008c1568 : MOV EDI,dword ptr [EAX + 0x5c]
008c156b : MOV ECX,dword ptr [EDI + 0x8]
008c156e : SUB ECX,dword ptr [EDI + 0x4]
008c1571 : INC ESI
008c1572 : SAR ECX,0x2
008c1575 : CMP ESI,ECX
008c1577 : JL 0x008c14e1
008c157d : POP EDI
008c157e : MOV AL,0x1
008c1580 : POP ESI
008c1581 : MOV ESP,EBP
008c1583 : POP EBP
008c1584 : RET 0x8
