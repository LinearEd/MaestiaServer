PROGRAM  : Maestia.exe
FUNCTION : FUN_0056d1e0
ENTRY    : 0056d1e0
BODY     : [[0056d1e0, 0056d5b2]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0056d1e0(int *param_1)

{
  char cVar1;
  GRefCountImpl *pGVar2;
  uint uVar3;
  undefined4 uVar4;
  int *in_ECX;
  float fStack_8;
  float fStack_4;
  
  cVar1 = (**(code **)(*in_ECX + 0xc4))();
  if ((cVar1 == '\0') && (*param_1 != 8)) {
    return 0;
  }
  if ((in_ECX[0x279] != 0) && (*(byte *)(param_1 + 1) != 0)) {
    FUN_005b0970(0x90,*(byte *)(param_1 + 1) >> 4 & 1);
    FUN_005b0970(0x14,*(byte *)(param_1 + 1) >> 3 & 1);
    FUN_005b0970(0x91,*(byte *)(param_1 + 1) >> 5 & 1);
  }
  if (*param_1 == 8) {
    in_ECX[0x2c0] = in_ECX[0x2c0] | 0x40000;
    pGVar2 = (GRefCountImpl *)(**(code **)(in_ECX[2] + 0xc))(0x1b);
    if (pGVar2 != (GRefCountImpl *)0x0) {
      (**(code **)(*(int *)pGVar2 + 0x44))();
      GRefCountImpl::Release(pGVar2);
    }
    return 1;
  }
  switch(*param_1) {
  case 1:
    if ((uint)param_1[6] < (uint)in_ECX[0x275]) {
      fStack_8 = ((float)in_ECX[0x2c] * (float)param_1[2] + (float)in_ECX[0x2e]) * 20.0;
      fStack_4 = ((float)in_ECX[0x2d] * (float)param_1[3] + (float)in_ECX[0x2f]) * 20.0;
      FUN_0056ade0(param_1[6],&fStack_8);
      return 3;
    }
    break;
  case 2:
    uVar3 = param_1[6];
    if (uVar3 < (uint)in_ECX[0x275]) {
      uVar4 = 0;
      fStack_8 = (float)in_ECX[0x2c] * (float)param_1[2] + (float)in_ECX[0x2e];
      fStack_4 = (float)in_ECX[0x2d] * (float)param_1[3] + (float)in_ECX[0x2f];
LAB_0056d3c3:
      fStack_8 = fStack_8 * 20.0;
      fStack_4 = fStack_4 * 20.0;
      FUN_0056ae20(uVar3,&fStack_8,1 << ((byte)param_1[5] & 0x1f),uVar4);
      return 3;
    }
    break;
  case 3:
    uVar3 = param_1[6];
    if (uVar3 < (uint)in_ECX[0x275]) {
      uVar4 = 0x80;
      fStack_8 = (float)in_ECX[0x2c] * (float)param_1[2] + (float)in_ECX[0x2e];
      fStack_4 = (float)in_ECX[0x2d] * (float)param_1[3] + (float)in_ECX[0x2f];
      goto LAB_0056d3c3;
    }
    break;
  case 4:
    uVar3 = param_1[6];
    if (uVar3 < (uint)in_ECX[0x275]) {
      fStack_8 = ((float)in_ECX[0x2c] * (float)param_1[2] + (float)in_ECX[0x2e]) * 20.0;
      fStack_4 = ((float)in_ECX[0x2d] * (float)param_1[3] + (float)in_ECX[0x2f]) * 20.0;
      uVar4 = FUN_0063b380();
      FUN_0056ae80(uVar3,&fStack_8,uVar4);
      return 3;
    }
    break;
  case 5:
    if (in_ECX[0x279] != 0) {
      FUN_005b09b0(param_1[2],(char)param_1[3],(char)param_1[1]);
    }
    FUN_0056b040((short)param_1[2],(char)param_1[3],(char)param_1[1]);
    uVar3 = param_1[4];
    if ((0x1f < uVar3) && (uVar3 != 0x7f)) {
      FUN_0056b0a0(uVar3);
    }
    return 3;
  case 6:
    if (in_ECX[0x279] != 0) {
      FUN_005b0a00(param_1[2],(char)param_1[3],(char)param_1[1]);
    }
    FUN_0056b070((short)param_1[2],(char)param_1[3],(char)param_1[1]);
    return 3;
  case 9:
    FUN_005b0870();
    FUN_0056b900();
    in_ECX[0x2c0] = in_ECX[0x2c0] & 0xfffbffff;
    pGVar2 = (GRefCountImpl *)(**(code **)(in_ECX[2] + 0xc))(0x1b);
    if (pGVar2 != (GRefCountImpl *)0x0) {
      (**(code **)(*(int *)pGVar2 + 0x44))();
      GRefCountImpl::Release(pGVar2);
    }
    break;
  case 0xd:
    FUN_0056b0a0(param_1[2]);
    return 3;
  case 0xe:
    pGVar2 = (GRefCountImpl *)(**(code **)(in_ECX[2] + 0xc))(0x1b);
    if (pGVar2 != (GRefCountImpl *)0x0) {
      uVar4 = (**(code **)(*(int *)pGVar2 + 0x60))();
      GRefCountImpl::Release(pGVar2);
      return uVar4;
    }
    uVar4 = FUN_005ebf90(param_1);
    return uVar4;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0056d1e0 : SUB ESP,0x8
0056d1e3 : PUSH ESI
0056d1e4 : MOV ESI,ECX
0056d1e6 : MOV EAX,dword ptr [ESI]
0056d1e8 : MOV EDX,dword ptr [EAX + 0xc4]
0056d1ee : PUSH EDI
0056d1ef : CALL EDX
0056d1f1 : MOV EDI,dword ptr [ESP + 0x14]
0056d1f5 : TEST AL,AL
0056d1f7 : JNZ 0x0056d208
0056d1f9 : CMP dword ptr [EDI],0x8
0056d1fc : JZ 0x0056d208
0056d1fe : POP EDI
0056d1ff : XOR EAX,EAX
0056d201 : POP ESI
0056d202 : ADD ESP,0x8
0056d205 : RET 0x4
0056d208 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d20e : TEST ECX,ECX
0056d210 : JZ 0x0056d262
0056d212 : MOV AL,byte ptr [EDI + 0x4]
0056d215 : TEST AL,AL
0056d217 : JZ 0x0056d262
0056d219 : SHR AL,0x4
0056d21c : AND AL,0x1
0056d21e : MOVZX EAX,AL
0056d221 : PUSH EAX
0056d222 : PUSH 0x90
0056d227 : CALL 0x005b0970
0056d22c : MOV CL,byte ptr [EDI + 0x4]
0056d22f : SHR CL,0x3
0056d232 : AND CL,0x1
0056d235 : MOVZX EDX,CL
0056d238 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d23e : PUSH EDX
0056d23f : PUSH 0x14
0056d241 : CALL 0x005b0970
0056d246 : MOV AL,byte ptr [EDI + 0x4]
0056d249 : SHR AL,0x5
0056d24c : AND AL,0x1
0056d24e : MOVZX ECX,AL
0056d251 : PUSH ECX
0056d252 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d258 : PUSH 0x91
0056d25d : CALL 0x005b0970
0056d262 : MOV EAX,dword ptr [EDI]
0056d264 : CMP EAX,0x8
0056d267 : JNZ 0x0056d2a4
0056d269 : OR dword ptr [ESI + 0xb00],0x40000
0056d273 : MOV EDX,dword ptr [ESI + 0x8]
0056d276 : MOV EAX,dword ptr [EDX + 0xc]
0056d279 : LEA ECX,[ESI + 0x8]
0056d27c : PUSH 0x1b
0056d27e : CALL EAX
0056d280 : MOV EDI,EAX
0056d282 : TEST EDI,EDI
0056d284 : JZ 0x0056d297
0056d286 : MOV EDX,dword ptr [EDI]
0056d288 : MOV EAX,dword ptr [EDX + 0x44]
0056d28b : PUSH ESI
0056d28c : MOV ECX,EDI
0056d28e : CALL EAX
0056d290 : MOV ECX,EDI
0056d292 : CALL 0x004ff7e0
0056d297 : POP EDI
0056d298 : MOV EAX,0x1
0056d29d : POP ESI
0056d29e : ADD ESP,0x8
0056d2a1 : RET 0x4
0056d2a4 : DEC EAX
0056d2a5 : PUSH EBX
0056d2a6 : CMP EAX,0xd
0056d2a9 : JA 0x0056d5a8
0056d2af : JMP dword ptr [EAX*0x4 + 0x56d5b4]
0056d2b6 : MOV EAX,dword ptr [EDI + 0x18]
0056d2b9 : CMP EAX,dword ptr [ESI + 0x9d4]
0056d2bf : JNC 0x0056d5a8
0056d2c5 : FLD float ptr [ESI + 0xb0]
0056d2cb : LEA ECX,[ESP + 0xc]
0056d2cf : FMUL float ptr [EDI + 0x8]
0056d2d2 : PUSH ECX
0056d2d3 : PUSH EAX
0056d2d4 : LEA ECX,[ESI + 0x144]
0056d2da : FADD float ptr [ESI + 0xb8]
0056d2e0 : FSTP float ptr [ESP + 0x20]
0056d2e4 : FLD float ptr [ESP + 0x20]
0056d2e8 : FLD double ptr [0x00b86058]
0056d2ee : FMUL ST1
0056d2f0 : FXCH
0056d2f2 : FSTP float ptr [ESP + 0x14]
0056d2f6 : FLD float ptr [ESI + 0xb4]
0056d2fc : FMUL float ptr [EDI + 0xc]
0056d2ff : FADD float ptr [ESI + 0xbc]
0056d305 : FSTP float ptr [ESP + 0x20]
0056d309 : FMUL float ptr [ESP + 0x20]
0056d30d : FSTP float ptr [ESP + 0x18]
0056d311 : CALL 0x0056ade0
0056d316 : POP EBX
0056d317 : POP EDI
0056d318 : MOV EAX,0x3
0056d31d : POP ESI
0056d31e : ADD ESP,0x8
0056d321 : RET 0x4
0056d324 : MOV EAX,dword ptr [EDI + 0x18]
0056d327 : CMP EAX,dword ptr [ESI + 0x9d4]
0056d32d : JNC 0x0056d5a8
0056d333 : FLD float ptr [ESI + 0xb0]
0056d339 : PUSH 0x80
0056d33e : FMUL float ptr [EDI + 0x8]
0056d341 : FADD float ptr [ESI + 0xb8]
0056d347 : FSTP float ptr [ESP + 0x1c]
0056d34b : FLD float ptr [ESP + 0x1c]
0056d34f : FLD double ptr [0x00b86058]
0056d355 : FMUL ST1
0056d357 : FXCH
0056d359 : FSTP float ptr [ESP + 0x10]
0056d35d : FLD float ptr [ESI + 0xb4]
0056d363 : FMUL float ptr [EDI + 0xc]
0056d366 : FADD float ptr [ESI + 0xbc]
0056d36c : FSTP float ptr [ESP + 0x1c]
0056d370 : FMUL float ptr [ESP + 0x1c]
0056d374 : JMP 0x0056d3c3
0056d376 : MOV EAX,dword ptr [EDI + 0x18]
0056d379 : CMP EAX,dword ptr [ESI + 0x9d4]
0056d37f : JNC 0x0056d5a8
0056d385 : FLD float ptr [ESI + 0xb0]
0056d38b : PUSH 0x0
0056d38d : FMUL float ptr [EDI + 0x8]
0056d390 : FADD float ptr [ESI + 0xb8]
0056d396 : FSTP float ptr [ESP + 0x1c]
0056d39a : FLD float ptr [ESP + 0x1c]
0056d39e : FLD double ptr [0x00b86058]
0056d3a4 : FMUL ST1
0056d3a6 : FXCH
0056d3a8 : FSTP float ptr [ESP + 0x10]
0056d3ac : FLD float ptr [ESI + 0xb4]
0056d3b2 : FMUL float ptr [EDI + 0xc]
0056d3b5 : FADD float ptr [ESI + 0xbc]
0056d3bb : FSTP float ptr [ESP + 0x1c]
0056d3bf : FMUL float ptr [ESP + 0x1c]
0056d3c3 : MOV ECX,dword ptr [EDI + 0x14]
0056d3c6 : FSTP float ptr [ESP + 0x14]
0056d3ca : MOV EDX,0x1
0056d3cf : SHL EDX,CL
0056d3d1 : LEA ECX,[ESP + 0x10]
0056d3d5 : PUSH EDX
0056d3d6 : PUSH ECX
0056d3d7 : PUSH EAX
0056d3d8 : LEA ECX,[ESI + 0x144]
0056d3de : CALL 0x0056ae20
0056d3e3 : POP EBX
0056d3e4 : POP EDI
0056d3e5 : MOV EAX,0x3
0056d3ea : POP ESI
0056d3eb : ADD ESP,0x8
0056d3ee : RET 0x4
0056d3f1 : MOV EBX,dword ptr [EDI + 0x18]
0056d3f4 : CMP EBX,dword ptr [ESI + 0x9d4]
0056d3fa : JNC 0x0056d5a8
0056d400 : FLD float ptr [ESI + 0xb0]
0056d406 : FMUL float ptr [EDI + 0x8]
0056d409 : FADD float ptr [ESI + 0xb8]
0056d40f : FSTP float ptr [ESP + 0x18]
0056d413 : FLD float ptr [ESP + 0x18]
0056d417 : FLD double ptr [0x00b86058]
0056d41d : FMUL ST1
0056d41f : FXCH
0056d421 : FSTP float ptr [ESP + 0xc]
0056d425 : FLD float ptr [ESI + 0xb4]
0056d42b : FMUL float ptr [EDI + 0xc]
0056d42e : FADD float ptr [ESI + 0xbc]
0056d434 : FSTP float ptr [ESP + 0x18]
0056d438 : FMUL float ptr [ESP + 0x18]
0056d43c : FSTP float ptr [ESP + 0x10]
0056d440 : FLD float ptr [EDI + 0x10]
0056d443 : CALL 0x0063b380
0056d448 : PUSH EAX
0056d449 : LEA EDX,[ESP + 0x10]
0056d44d : PUSH EDX
0056d44e : PUSH EBX
0056d44f : LEA ECX,[ESI + 0x144]
0056d455 : CALL 0x0056ae80
0056d45a : POP EBX
0056d45b : POP EDI
0056d45c : MOV EAX,0x3
0056d461 : POP ESI
0056d462 : ADD ESP,0x8
0056d465 : RET 0x4
0056d468 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d46e : TEST ECX,ECX
0056d470 : JZ 0x0056d485
0056d472 : MOVZX EAX,byte ptr [EDI + 0x4]
0056d476 : MOVZX EDX,byte ptr [EDI + 0xc]
0056d47a : PUSH EAX
0056d47b : MOV EAX,dword ptr [EDI + 0x8]
0056d47e : PUSH EDX
0056d47f : PUSH EAX
0056d480 : CALL 0x005b09b0
0056d485 : MOVZX ECX,byte ptr [EDI + 0x4]
0056d489 : MOVZX EDX,byte ptr [EDI + 0xc]
0056d48d : MOVZX EAX,word ptr [EDI + 0x8]
0056d491 : PUSH ECX
0056d492 : PUSH EDX
0056d493 : ADD ESI,0x144
0056d499 : PUSH EAX
0056d49a : MOV ECX,ESI
0056d49c : CALL 0x0056b040
0056d4a1 : MOV EDI,dword ptr [EDI + 0x10]
0056d4a4 : CMP EDI,0x20
0056d4a7 : JC 0x0056d4b6
0056d4a9 : CMP EDI,0x7f
0056d4ac : JZ 0x0056d4b6
0056d4ae : PUSH EDI
0056d4af : MOV ECX,ESI
0056d4b1 : CALL 0x0056b0a0
0056d4b6 : POP EBX
0056d4b7 : POP EDI
0056d4b8 : MOV EAX,0x3
0056d4bd : POP ESI
0056d4be : ADD ESP,0x8
0056d4c1 : RET 0x4
0056d4c4 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d4ca : TEST ECX,ECX
0056d4cc : JZ 0x0056d4e1
0056d4ce : MOVZX EDX,byte ptr [EDI + 0x4]
0056d4d2 : MOVZX EAX,byte ptr [EDI + 0xc]
0056d4d6 : PUSH EDX
0056d4d7 : MOV EDX,dword ptr [EDI + 0x8]
0056d4da : PUSH EAX
0056d4db : PUSH EDX
0056d4dc : CALL 0x005b0a00
0056d4e1 : MOVZX EAX,byte ptr [EDI + 0x4]
0056d4e5 : MOVZX ECX,byte ptr [EDI + 0xc]
0056d4e9 : MOVZX EDX,word ptr [EDI + 0x8]
0056d4ed : PUSH EAX
0056d4ee : PUSH ECX
0056d4ef : PUSH EDX
0056d4f0 : LEA ECX,[ESI + 0x144]
0056d4f6 : CALL 0x0056b070
0056d4fb : POP EBX
0056d4fc : POP EDI
0056d4fd : MOV EAX,0x3
0056d502 : POP ESI
0056d503 : ADD ESP,0x8
0056d506 : RET 0x4
0056d509 : MOV EAX,dword ptr [EDI + 0x8]
0056d50c : PUSH EAX
0056d50d : LEA ECX,[ESI + 0x144]
0056d513 : CALL 0x0056b0a0
0056d518 : POP EBX
0056d519 : POP EDI
0056d51a : MOV EAX,0x3
0056d51f : POP ESI
0056d520 : ADD ESP,0x8
0056d523 : RET 0x4
0056d526 : MOV EDX,dword ptr [ESI + 0x8]
0056d529 : MOV EAX,dword ptr [EDX + 0xc]
0056d52c : LEA ECX,[ESI + 0x8]
0056d52f : PUSH 0x1b
0056d531 : CALL EAX
0056d533 : MOV EBX,EAX
0056d535 : PUSH EDI
0056d536 : TEST EBX,EBX
0056d538 : JZ 0x0056d558
0056d53a : MOV EDX,dword ptr [EBX]
0056d53c : MOV EAX,dword ptr [EDX + 0x60]
0056d53f : PUSH ESI
0056d540 : MOV ECX,EBX
0056d542 : CALL EAX
0056d544 : MOV ECX,EBX
0056d546 : MOV ESI,EAX
0056d548 : CALL 0x004ff7e0
0056d54d : POP EBX
0056d54e : POP EDI
0056d54f : MOV EAX,ESI
0056d551 : POP ESI
0056d552 : ADD ESP,0x8
0056d555 : RET 0x4
0056d558 : MOV ECX,ESI
0056d55a : CALL 0x005ebf90
0056d55f : POP EBX
0056d560 : POP EDI
0056d561 : POP ESI
0056d562 : ADD ESP,0x8
0056d565 : RET 0x4
0056d568 : MOV ECX,dword ptr [ESI + 0x9e4]
0056d56e : CALL 0x005b0870
0056d573 : MOV ECX,ESI
0056d575 : CALL 0x0056b900
0056d57a : AND dword ptr [ESI + 0xb00],0xfffbffff
0056d584 : MOV EDX,dword ptr [ESI + 0x8]
0056d587 : MOV EAX,dword ptr [EDX + 0xc]
0056d58a : LEA ECX,[ESI + 0x8]
0056d58d : PUSH 0x1b
0056d58f : CALL EAX
0056d591 : MOV EDI,EAX
0056d593 : TEST EDI,EDI
0056d595 : JZ 0x0056d5a8
0056d597 : MOV EDX,dword ptr [EDI]
0056d599 : MOV EAX,dword ptr [EDX + 0x44]
0056d59c : PUSH ESI
0056d59d : MOV ECX,EDI
0056d59f : CALL EAX
0056d5a1 : MOV ECX,EDI
0056d5a3 : CALL 0x004ff7e0
0056d5a8 : POP EBX
0056d5a9 : POP EDI
0056d5aa : XOR EAX,EAX
0056d5ac : POP ESI
0056d5ad : ADD ESP,0x8
0056d5b0 : RET 0x4
