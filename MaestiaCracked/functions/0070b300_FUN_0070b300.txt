PROGRAM  : Maestia.exe
FUNCTION : FUN_0070b300
ENTRY    : 0070b300
BODY     : [[0070b300, 0070b3e6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070b300(int param_1)

{
  LPCWSTR **pppWVar1;
  int unaff_ESI;
  undefined1 local_2c [4];
  LPCWSTR *local_28 [4];
  size_t local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b17668;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (0 < param_1) {
    do {
      local_8 = 0xffffffff;
      local_14 = 7;
      local_18 = 0;
      local_28[0] = (LPCWSTR *)((uint)local_28[0] & 0xffff0000);
      FUN_00406360(&DAT_00bfd070,2);
      local_8 = 0;
      if (*(FILE **)(unaff_ESI + 0x20) != (FILE *)0x0) {
        pppWVar1 = (LPCWSTR **)local_28[0];
        if (local_14 < 8) {
          pppWVar1 = local_28;
        }
        _fwrite(pppWVar1,2,local_18,*(FILE **)(unaff_ESI + 0x20));
      }
      if (*(char *)(unaff_ESI + 0x5c) != '\0') {
        pppWVar1 = (LPCWSTR **)local_28[0];
        if (local_14 < 8) {
          pppWVar1 = local_28;
        }
        OutputDebugStringW((LPCWSTR)pppWVar1);
      }
      if (*(char *)(unaff_ESI + 0x5d) != '\0') {
        FUN_00704fe0(local_2c);
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      param_1 = param_1 + -1;
      local_28[0] = (LPCWSTR *)((uint)local_28[0] & 0xffff0000);
    } while (param_1 != 0);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0070b300 : PUSH EBP
0070b301 : MOV EBP,ESP
0070b303 : PUSH -0x1
0070b305 : PUSH 0xb17668
0070b30a : MOV EAX,FS:[0x0]
0070b310 : PUSH EAX
0070b311 : SUB ESP,0x1c
0070b314 : PUSH EBX
0070b315 : PUSH EDI
0070b316 : MOV EAX,[0x00d66fa0]
0070b31b : XOR EAX,EBP
0070b31d : PUSH EAX
0070b31e : LEA EAX,[EBP + -0xc]
0070b321 : MOV FS:[0x0],EAX
0070b327 : MOV EAX,dword ptr [EBP + 0x8]
0070b32a : XOR EBX,EBX
0070b32c : CMP EAX,EBX
0070b32e : JLE 0x0070b3d4
0070b334 : MOV dword ptr [EBP + 0x8],EAX
0070b337 : PUSH 0x2
0070b339 : XOR EAX,EAX
0070b33b : PUSH 0xbfd070
0070b340 : LEA ECX,[EBP + -0x28]
0070b343 : MOV dword ptr [EBP + -0x10],0x7
0070b34a : MOV dword ptr [EBP + -0x14],EBX
0070b34d : MOV word ptr [EBP + -0x24],AX
0070b351 : CALL 0x00406360
0070b356 : MOV dword ptr [EBP + -0x4],EBX
0070b359 : MOV EAX,dword ptr [ESI + 0x20]
0070b35c : CMP EAX,EBX
0070b35e : JZ 0x0070b37c
0070b360 : CMP dword ptr [EBP + -0x10],0x8
0070b364 : MOV ECX,dword ptr [EBP + -0x24]
0070b367 : JNC 0x0070b36c
0070b369 : LEA ECX,[EBP + -0x24]
0070b36c : MOV EDX,dword ptr [EBP + -0x14]
0070b36f : PUSH EAX
0070b370 : PUSH EDX
0070b371 : PUSH 0x2
0070b373 : PUSH ECX
0070b374 : CALL 0x006376ef
0070b379 : ADD ESP,0x10
0070b37c : CMP byte ptr [ESI + 0x5c],BL
0070b37f : JZ 0x0070b394
0070b381 : CMP dword ptr [EBP + -0x10],0x8
0070b385 : MOV EAX,dword ptr [EBP + -0x24]
0070b388 : JNC 0x0070b38d
0070b38a : LEA EAX,[EBP + -0x24]
0070b38d : PUSH EAX
0070b38e : CALL dword ptr [0x00b8512c]
0070b394 : CMP byte ptr [ESI + 0x5d],BL
0070b397 : JZ 0x0070b3a5
0070b399 : LEA EAX,[EBP + -0x28]
0070b39c : PUSH EAX
0070b39d : LEA EDI,[ESI + 0x60]
0070b3a0 : CALL 0x00704fe0
0070b3a5 : MOV dword ptr [EBP + -0x4],0xffffffff
0070b3ac : CMP dword ptr [EBP + -0x10],0x8
0070b3b0 : JC 0x0070b3ba
0070b3b2 : MOV ECX,dword ptr [EBP + -0x24]
0070b3b5 : CALL 0x006f04e0
0070b3ba : XOR ECX,ECX
0070b3bc : SUB dword ptr [EBP + 0x8],0x1
0070b3c0 : MOV dword ptr [EBP + -0x10],0x7
0070b3c7 : MOV dword ptr [EBP + -0x14],EBX
0070b3ca : MOV word ptr [EBP + -0x24],CX
0070b3ce : JNZ 0x0070b337
0070b3d4 : MOV ECX,dword ptr [EBP + -0xc]
0070b3d7 : MOV dword ptr FS:[0x0],ECX
0070b3de : POP ECX
0070b3df : POP EDI
0070b3e0 : POP EBX
0070b3e1 : MOV ESP,EBP
0070b3e3 : POP EBP
0070b3e4 : RET 0x4
