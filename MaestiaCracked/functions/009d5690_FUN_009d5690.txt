PROGRAM  : Maestia.exe
FUNCTION : FUN_009d5690
ENTRY    : 009d5690
BODY     : [[009d5690, 009d592a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009d5690(ushort *param_1)

{
  int *piVar1;
  int iVar2;
  int in_ECX;
  int *piVar3;
  int local_48;
  int local_44;
  int local_40;
  int local_3c;
  undefined1 local_38 [32];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60f40;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 2) == 0) {
    if ((char)param_1[8] == '\x01') {
      local_48 = (int)param_1 + 0x19;
      local_44 = (*param_1 & 0x1fff) - 0x19;
      local_3c = in_ECX;
      local_40 = FUN_006f0760(0xa8,"",0,(DAT_01725270 >> 3 & 1) == 0);
      local_8 = 0;
      if (local_40 == 0) {
        local_40 = 0;
      }
      else {
        local_40 = FUN_0041bd90();
      }
      local_8 = 0xffffffff;
      FUN_0041b8b0(local_40,&local_48);
      iVar2 = local_3c;
      FUN_00449730();
      piVar3 = *(int **)(iVar2 + 0xe4);
      in_ECX = local_3c;
      if (piVar3 != *(int **)(iVar2 + 0xe8)) {
        do {
          piVar1 = (int *)*piVar3;
          if ((*piVar1 == *(int *)(param_1 + 4)) && (piVar1[1] == *(int *)(param_1 + 6))) {
            *(undefined1 *)((int)piVar1 + 0x3a) = 1;
            if (*(int *)((int)param_1 + 0x11) != 0) {
              piVar1[10] = -*(int *)((int)param_1 + 0x11);
            }
            break;
          }
          piVar3 = piVar3 + 1;
        } while (piVar3 != *(int **)(local_3c + 0xe8));
      }
    }
    else {
      FUN_009d4750(*(undefined4 *)((int)param_1 + 0x15),(char)param_1[8] + 'd');
      if ((*(int *)(*DAT_00da9894 + 0x140) != 0) &&
         (iVar2 = *(int *)(*(int *)(*DAT_00da9894 + 0x140) + 0x38), iVar2 != 0)) {
        *(int *)(iVar2 + 0x970) = *(int *)(iVar2 + 0x970) + 1;
        (**(code **)(*(int *)(iVar2 + 0x38) + 4))(0x24,*(undefined4 *)(iVar2 + 0x970));
      }
    }
    FUN_0041a840("%I64d",*(undefined4 *)(param_1 + 4),*(undefined4 *)(param_1 + 6));
    (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
              (*(int **)(*DAT_00da9894 + 0x114),"mc_auction.bidSearch.BidPlaced","%s,%d,%d",local_38
               ,(char)param_1[8],*(undefined4 *)((int)param_1 + 0x11));
    if ((*DAT_00da9894 != 0) && (piVar3 = *(int **)(*DAT_00da9894 + 0x114), piVar3 != (int *)0x0)) {
      (**(code **)(*piVar3 + 4))
                (piVar3,"mc_auction.SetMoney",&DAT_00c96d8c,
                 *(undefined4 *)(*(int *)(DAT_0172491c + 0x17c) + 0x1ed0));
    }
    if ((*(int *)(*DAT_00da9894 + 0x140) != 0) &&
       (iVar2 = *(int *)(*(int *)(*DAT_00da9894 + 0x140) + 0x38), iVar2 != 0)) {
      *(int *)(iVar2 + 0x96c) = *(int *)(iVar2 + 0x96c) + 1;
      (**(code **)(*(int *)(iVar2 + 0x38) + 4))(0x23,*(undefined4 *)(iVar2 + 0x96c));
    }
    FUN_009d4fe0(in_ECX);
  }
  else {
    FUN_009d1020(local_18);
  }
  if (((((char)param_1[8] != '\x01') || (*(int *)(param_1 + 2) == 0x12000012)) ||
      (*(int *)(param_1 + 2) == 0x1200000a)) &&
     (iVar2 = FUN_009d02f0(*(undefined4 *)(param_1 + 4),*(undefined4 *)(param_1 + 6)), iVar2 != 0))
  {
    if ((*(int *)(in_ECX + 0xe8) - *(int *)(in_ECX + 0xe4) & 0xfffffffcU) == 0) {
      if (*(int *)(in_ECX + 0xf4) == 0) {
        *(undefined4 *)(in_ECX + 0xf4) = 0;
      }
      else {
        *(int *)(in_ECX + 0xf4) = *(int *)(in_ECX + 0xf4) + -1;
      }
    }
    FUN_009d3610(0);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009d5690 : PUSH EBP
009d5691 : MOV EBP,ESP
009d5693 : PUSH -0x1
009d5695 : PUSH 0xb60f40
009d569a : MOV EAX,FS:[0x0]
009d56a0 : PUSH EAX
009d56a1 : SUB ESP,0x38
009d56a4 : MOV EAX,[0x00d66fa0]
009d56a9 : XOR EAX,EBP
009d56ab : MOV dword ptr [EBP + -0x14],EAX
009d56ae : PUSH EBX
009d56af : PUSH ESI
009d56b0 : PUSH EDI
009d56b1 : PUSH EAX
009d56b2 : LEA EAX,[EBP + -0xc]
009d56b5 : MOV FS:[0x0],EAX
009d56bb : MOV EBX,dword ptr [EBP + 0x8]
009d56be : MOV EDI,ECX
009d56c0 : MOV ECX,dword ptr [EBX + 0x4]
009d56c3 : MOV dword ptr [EBP + -0x38],EDI
009d56c6 : TEST ECX,ECX
009d56c8 : JNZ 0x009d58a7
009d56ce : MOV AL,byte ptr [EBX + 0x10]
009d56d1 : CMP AL,0x1
009d56d3 : JZ 0x009d5724
009d56d5 : MOV ECX,dword ptr [EBX + 0x15]
009d56d8 : ADD AL,0x64
009d56da : MOVZX EAX,AL
009d56dd : PUSH EAX
009d56de : PUSH ECX
009d56df : CALL 0x009d4750
009d56e4 : MOV EDX,dword ptr [0x00da9894]
009d56ea : MOV EAX,dword ptr [EDX]
009d56ec : MOV EAX,dword ptr [EAX + 0x140]
009d56f2 : TEST EAX,EAX
009d56f4 : JZ 0x009d57e8
009d56fa : MOV EAX,dword ptr [EAX + 0x38]
009d56fd : TEST EAX,EAX
009d56ff : JZ 0x009d57e8
009d5705 : INC dword ptr [EAX + 0x970]
009d570b : MOV EDX,dword ptr [EAX + 0x38]
009d570e : LEA ECX,[EAX + 0x38]
009d5711 : MOV EAX,dword ptr [ECX + 0x938]
009d5717 : PUSH EAX
009d5718 : MOV EAX,dword ptr [EDX + 0x4]
009d571b : PUSH 0x24
009d571d : CALL EAX
009d571f : JMP 0x009d57e8
009d5724 : MOVZX EDX,word ptr [EBX]
009d5727 : MOV EAX,[0x01725270]
009d572c : AND EDX,0x1fff
009d5732 : LEA ECX,[EBX + 0x19]
009d5735 : MOV dword ptr [EBP + -0x44],ECX
009d5738 : SUB EDX,0x19
009d573b : SHR EAX,0x3
009d573e : MOV ECX,0x0
009d5743 : AND EAX,0x1
009d5746 : SETZ CL
009d5749 : MOV dword ptr [EBP + -0x40],EDX
009d574c : PUSH ECX
009d574d : PUSH 0x0
009d574f : PUSH 0xbf1a4a
009d5754 : PUSH 0xa8
009d5759 : CALL 0x006f0760
009d575e : ADD ESP,0x10
009d5761 : MOV dword ptr [EBP + -0x3c],EAX
009d5764 : MOV dword ptr [EBP + -0x4],0x0
009d576b : TEST EAX,EAX
009d576d : JZ 0x009d5776
009d576f : CALL 0x0041bd90
009d5774 : JMP 0x009d5778
009d5776 : XOR EAX,EAX
009d5778 : MOV dword ptr [EBP + -0x4],0xffffffff
009d577f : LEA EDX,[EBP + -0x44]
009d5782 : PUSH EDX
009d5783 : PUSH EAX
009d5784 : LEA ESI,[EBP + -0x40]
009d5787 : MOV dword ptr [EBP + -0x3c],EAX
009d578a : CALL 0x0041b8b0
009d578f : MOV ESI,dword ptr [EBP + -0x38]
009d5792 : LEA EDX,[ESI + 0xd0]
009d5798 : LEA EDI,[EBP + -0x3c]
009d579b : CALL 0x00449730
009d57a0 : MOV ECX,dword ptr [ESI + 0xe4]
009d57a6 : CMP ECX,dword ptr [ESI + 0xe8]
009d57ac : JZ 0x009d57e5
009d57ae : MOV EDX,dword ptr [EBX + 0x8]
009d57b1 : MOV ESI,dword ptr [EBX + 0xc]
009d57b4 : MOV EAX,dword ptr [ECX]
009d57b6 : MOV EDI,dword ptr [EAX]
009d57b8 : CMP EDI,EDX
009d57ba : JNZ 0x009d57c3
009d57bc : MOV EDI,dword ptr [EAX + 0x4]
009d57bf : CMP EDI,ESI
009d57c1 : JZ 0x009d57d5
009d57c3 : MOV EAX,dword ptr [EBP + -0x38]
009d57c6 : ADD ECX,0x4
009d57c9 : CMP ECX,dword ptr [EAX + 0xe8]
009d57cf : JNZ 0x009d57b4
009d57d1 : MOV EDI,EAX
009d57d3 : JMP 0x009d57e8
009d57d5 : MOV byte ptr [EAX + 0x3a],0x1
009d57d9 : MOV ECX,dword ptr [EBX + 0x11]
009d57dc : TEST ECX,ECX
009d57de : JBE 0x009d57e5
009d57e0 : NEG ECX
009d57e2 : MOV dword ptr [EAX + 0x28],ECX
009d57e5 : MOV EDI,dword ptr [EBP + -0x38]
009d57e8 : MOV ECX,dword ptr [EBX + 0xc]
009d57eb : MOV EDX,dword ptr [EBX + 0x8]
009d57ee : PUSH ECX
009d57ef : PUSH EDX
009d57f0 : PUSH 0xc966f8
009d57f5 : LEA EDX,[EBP + -0x34]
009d57f8 : CALL 0x0041a840
009d57fd : MOV EAX,[0x00da9894]
009d5802 : MOV ECX,dword ptr [EAX]
009d5804 : MOV EAX,dword ptr [ECX + 0x114]
009d580a : MOV ECX,dword ptr [EBX + 0x11]
009d580d : MOV EDX,dword ptr [EAX]
009d580f : MOV EDX,dword ptr [EDX + 0x4]
009d5812 : ADD ESP,0xc
009d5815 : PUSH ECX
009d5816 : MOVZX ECX,byte ptr [EBX + 0x10]
009d581a : PUSH ECX
009d581b : LEA ECX,[EBP + -0x34]
009d581e : PUSH ECX
009d581f : PUSH 0xc96700
009d5824 : PUSH 0xc9670c
009d5829 : PUSH EAX
009d582a : CALL EDX
009d582c : MOV EAX,[0x00da9894]
009d5831 : MOV EAX,dword ptr [EAX]
009d5833 : ADD ESP,0x18
009d5836 : TEST EAX,EAX
009d5838 : JZ 0x009d586c
009d583a : MOV EAX,dword ptr [EAX + 0x114]
009d5840 : TEST EAX,EAX
009d5842 : JZ 0x009d586c
009d5844 : MOV EDX,dword ptr [0x0172491c]
009d584a : MOV EDX,dword ptr [EDX + 0x17c]
009d5850 : MOV EDX,dword ptr [EDX + 0x1ed0]
009d5856 : MOV ECX,dword ptr [EAX]
009d5858 : PUSH EDX
009d5859 : PUSH 0xc96d8c
009d585e : PUSH 0xc96dd0
009d5863 : PUSH EAX
009d5864 : MOV EAX,dword ptr [ECX + 0x4]
009d5867 : CALL EAX
009d5869 : ADD ESP,0x10
009d586c : MOV ECX,dword ptr [0x00da9894]
009d5872 : MOV EDX,dword ptr [ECX]
009d5874 : MOV EAX,dword ptr [EDX + 0x140]
009d587a : TEST EAX,EAX
009d587c : JZ 0x009d589f
009d587e : MOV EAX,dword ptr [EAX + 0x38]
009d5881 : TEST EAX,EAX
009d5883 : JZ 0x009d589f
009d5885 : INC dword ptr [EAX + 0x96c]
009d588b : MOV EDX,dword ptr [EAX + 0x38]
009d588e : LEA ECX,[EAX + 0x38]
009d5891 : MOV EAX,dword ptr [ECX + 0x934]
009d5897 : PUSH EAX
009d5898 : MOV EAX,dword ptr [EDX + 0x4]
009d589b : PUSH 0x23
009d589d : CALL EAX
009d589f : PUSH EDI
009d58a0 : CALL 0x009d4fe0
009d58a5 : JMP 0x009d58ac
009d58a7 : CALL 0x009d1020
009d58ac : CMP byte ptr [EBX + 0x10],0x1
009d58b0 : JNZ 0x009d58c3
009d58b2 : MOV EAX,dword ptr [EBX + 0x4]
009d58b5 : CMP EAX,0x12000012
009d58ba : JZ 0x009d58c3
009d58bc : CMP EAX,0x1200000a
009d58c1 : JNZ 0x009d590d
009d58c3 : MOV ECX,dword ptr [EBX + 0xc]
009d58c6 : MOV EDX,dword ptr [EBX + 0x8]
009d58c9 : PUSH ECX
009d58ca : PUSH EDX
009d58cb : CALL 0x009d02f0
009d58d0 : TEST EAX,EAX
009d58d2 : JZ 0x009d590d
009d58d4 : MOV EAX,dword ptr [EDI + 0xe8]
009d58da : SUB EAX,dword ptr [EDI + 0xe4]
009d58e0 : TEST EAX,0xfffffffc
009d58e5 : JNZ 0x009d5904
009d58e7 : MOV EAX,dword ptr [EDI + 0xf4]
009d58ed : TEST EAX,EAX
009d58ef : JBE 0x009d58fa
009d58f1 : DEC EAX
009d58f2 : MOV dword ptr [EDI + 0xf4],EAX
009d58f8 : JMP 0x009d5904
009d58fa : MOV dword ptr [EDI + 0xf4],0x0
009d5904 : PUSH 0x0
009d5906 : MOV ESI,EDI
009d5908 : CALL 0x009d3610
009d590d : MOV ECX,dword ptr [EBP + -0xc]
009d5910 : MOV dword ptr FS:[0x0],ECX
009d5917 : POP ECX
009d5918 : POP EDI
009d5919 : POP ESI
009d591a : POP EBX
009d591b : MOV ECX,dword ptr [EBP + -0x14]
009d591e : XOR ECX,EBP
009d5920 : CALL 0x00633e6b
009d5925 : MOV ESP,EBP
009d5927 : POP EBP
009d5928 : RET 0x4
