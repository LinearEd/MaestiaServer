PROGRAM  : Maestia.exe
FUNCTION : FUN_00a31020
ENTRY    : 00a31020
BODY     : [[00a31020, 00a31124]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a31020(void)

{
  undefined4 uVar1;
  int iVar2;
  int in_EAX;
  int iVar3;
  DWORD DVar4;
  int in_ECX;
  int local_c;
  undefined4 local_8;
  
  uVar1 = *(undefined4 *)(in_EAX + 4);
  iVar3 = FUN_00a1a840(uVar1);
  if (((iVar3 != 0) || (iVar3 = FUN_00a1a6d0(uVar1), iVar3 != 0)) ||
     (iVar3 = FUN_00a1a780(uVar1), iVar3 != 0)) {
    iVar2 = DAT_00d7c54c;
    local_8 = *(undefined4 *)(iVar3 + 8);
    FUN_004437f0(&local_8);
    if (local_c == *(int *)(iVar2 + 0x44)) {
      return;
    }
    if (*(int *)(local_c + 0x10) == 0) {
      return;
    }
  }
  if (iVar3 == *(int *)(in_ECX + 0xac)) {
    DVar4 = timeGetTime();
    iVar3 = DAT_017247f0;
    *(DWORD *)(in_ECX + 0x368) = DVar4;
    *(undefined1 *)(in_ECX + 0x374) = 1;
    if (iVar3 != 0) {
      FUN_009f3180(2,*(undefined4 *)(*(int *)(in_ECX + 0xac) + 0xa8),1);
    }
    if (*(char *)(in_ECX + 0x550) != '\0') {
      *(undefined1 *)(in_ECX + 0x550) = 0;
      *(undefined4 *)(in_ECX + 0x548) = 0;
      *(undefined4 *)(in_ECX + 0x54c) = 0;
      *(undefined1 *)(in_ECX + 0x551) = 1;
      *(undefined1 *)(in_ECX + 0x553) = 1;
      if (*(int **)(in_ECX + 0x1bc) != (int *)0x0) {
        (**(code **)(**(int **)(in_ECX + 0x1bc) + 0x20))();
      }
      if (*(int **)(in_ECX + 0x1b8) != (int *)0x0) {
        (**(code **)(**(int **)(in_ECX + 0x1b8) + 0x24))();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a31020 : PUSH EBP
00a31021 : MOV EBP,ESP
00a31023 : SUB ESP,0xc
00a31026 : PUSH EBX
00a31027 : MOV EBX,dword ptr [EAX + 0x4]
00a3102a : PUSH ESI
00a3102b : PUSH EDI
00a3102c : PUSH EBX
00a3102d : MOV ESI,ECX
00a3102f : CALL 0x00a1a840
00a31034 : MOV EDI,EAX
00a31036 : TEST EDI,EDI
00a31038 : JNZ 0x00a31056
00a3103a : PUSH EBX
00a3103b : MOV ECX,ESI
00a3103d : CALL 0x00a1a6d0
00a31042 : MOV EDI,EAX
00a31044 : TEST EDI,EDI
00a31046 : JNZ 0x00a31056
00a31048 : PUSH EBX
00a31049 : MOV ECX,ESI
00a3104b : CALL 0x00a1a780
00a31050 : MOV EDI,EAX
00a31052 : TEST EDI,EDI
00a31054 : JZ 0x00a31087
00a31056 : MOV ECX,dword ptr [EDI + 0x8]
00a31059 : MOV EBX,dword ptr [0x00d7c54c]
00a3105f : LEA EDX,[EBP + -0x4]
00a31062 : MOV dword ptr [EBP + -0x4],ECX
00a31065 : PUSH EDX
00a31066 : LEA ECX,[EBX + 0x40]
00a31069 : LEA EAX,[EBP + -0x8]
00a3106c : CALL 0x004437f0
00a31071 : MOV EAX,dword ptr [EBP + -0x8]
00a31074 : CMP EAX,dword ptr [EBX + 0x44]
00a31077 : JZ 0x00a3111e
00a3107d : CMP dword ptr [EAX + 0x10],0x0
00a31081 : JZ 0x00a3111e
00a31087 : CMP EDI,dword ptr [ESI + 0xac]
00a3108d : JNZ 0x00a3111e
00a31093 : CALL dword ptr [0x00b85598]
00a31099 : MOV ECX,dword ptr [0x017247f0]
00a3109f : MOV EBX,0x1
00a310a4 : MOV dword ptr [ESI + 0x368],EAX
00a310aa : MOV byte ptr [ESI + 0x374],BL
00a310b0 : TEST ECX,ECX
00a310b2 : JZ 0x00a310c9
00a310b4 : MOV EAX,dword ptr [ESI + 0xac]
00a310ba : MOV EDX,dword ptr [EAX + 0xa8]
00a310c0 : PUSH EBX
00a310c1 : PUSH EDX
00a310c2 : PUSH 0x2
00a310c4 : CALL 0x009f3180
00a310c9 : CMP byte ptr [ESI + 0x550],0x0
00a310d0 : JZ 0x00a3111e
00a310d2 : MOV ECX,dword ptr [ESI + 0x1bc]
00a310d8 : XORPS XMM0,XMM0
00a310db : MOV byte ptr [ESI + 0x550],0x0
00a310e2 : MOV dword ptr [ESI + 0x548],0x0
00a310ec : MOVSS dword ptr [ESI + 0x54c],XMM0
00a310f4 : MOV byte ptr [ESI + 0x551],BL
00a310fa : MOV byte ptr [ESI + 0x553],BL
00a31100 : TEST ECX,ECX
00a31102 : JZ 0x00a3110b
00a31104 : MOV EAX,dword ptr [ECX]
00a31106 : MOV EDX,dword ptr [EAX + 0x20]
00a31109 : CALL EDX
00a3110b : MOV ESI,dword ptr [ESI + 0x1b8]
00a31111 : TEST ESI,ESI
00a31113 : JZ 0x00a3111e
00a31115 : MOV EAX,dword ptr [ESI]
00a31117 : MOV EDX,dword ptr [EAX + 0x24]
00a3111a : MOV ECX,ESI
00a3111c : CALL EDX
00a3111e : POP EDI
00a3111f : POP ESI
00a31120 : POP EBX
00a31121 : MOV ESP,EBP
00a31123 : POP EBP
00a31124 : RET
