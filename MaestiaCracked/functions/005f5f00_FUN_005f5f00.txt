PROGRAM  : Maestia.exe
FUNCTION : FUN_005f5f00
ENTRY    : 005f5f00
BODY     : [[005f5f00, 005f5fd0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f5f00(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  undefined4 *puVar1;
  undefined4 *in_ECX;
  int unaff_EBX;
  int local_18;
  uint local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  *in_ECX = param_1;
  in_ECX[2] = param_4;
  in_ECX[3] = param_4 - 0x20U >> 5;
  in_ECX[1] = param_3;
  in_ECX[4] = 0;
  in_ECX[5] = 0;
  *(undefined1 *)(in_ECX + 6) = 0;
  puVar1 = in_ECX + 7;
  *puVar1 = puVar1;
  in_ECX[8] = puVar1;
  in_ECX[10] = in_ECX + 9;
  in_ECX[0xb] = in_ECX + 9;
  in_ECX[0x11] = 0;
  in_ECX[0x12] = 0;
  FUN_005ab8e0(param_2);
  local_18 = 0;
  local_14 = 0;
  local_10 = 0;
  local_c = 0;
  local_8 = 0;
  local_4 = 0;
  (*(code *)**(undefined4 **)*in_ECX)(&local_18);
  if (local_14 < 0x1000) {
    local_14 = 0x1000;
  }
  in_ECX[4] = unaff_EBX;
  in_ECX[5] = local_18;
  if (unaff_EBX == 0) {
    in_ECX[4] = 1;
  }
  if (local_18 == 0) {
    in_ECX[5] = 0x80000000;
  }
  *(undefined1 *)(in_ECX + 6) = (undefined1)local_8;
  in_ECX[1] = ((in_ECX[1] + -1 + local_14) / local_14) * local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
005f5f00 : SUB ESP,0x18
005f5f03 : MOV EAX,dword ptr [ESP + 0x1c]
005f5f07 : MOV EDX,dword ptr [ESP + 0x20]
005f5f0b : PUSH EBX
005f5f0c : PUSH ESI
005f5f0d : MOV ESI,ECX
005f5f0f : MOV ECX,dword ptr [ESP + 0x2c]
005f5f13 : MOV dword ptr [ESI],EAX
005f5f15 : MOV EAX,dword ptr [ESP + 0x30]
005f5f19 : MOV dword ptr [ESI + 0x8],EAX
005f5f1c : ADD EAX,-0x20
005f5f1f : SHR EAX,0x5
005f5f22 : MOV dword ptr [ESI + 0xc],EAX
005f5f25 : MOV dword ptr [ESI + 0x4],ECX
005f5f28 : XOR EBX,EBX
005f5f2a : MOV dword ptr [ESI + 0x10],EBX
005f5f2d : MOV dword ptr [ESI + 0x14],EBX
005f5f30 : MOV byte ptr [ESI + 0x18],BL
005f5f33 : LEA EAX,[ESI + 0x1c]
005f5f36 : MOV dword ptr [EAX],EAX
005f5f38 : MOV dword ptr [EAX + 0x4],EAX
005f5f3b : LEA EAX,[ESI + 0x24]
005f5f3e : MOV dword ptr [EAX + 0x4],EAX
005f5f41 : MOV dword ptr [EAX + 0x8],EAX
005f5f44 : MOV dword ptr [ESI + 0x44],EBX
005f5f47 : PUSH EDX
005f5f48 : LEA ECX,[ESI + 0x4c]
005f5f4b : MOV dword ptr [ESI + 0x48],EBX
005f5f4e : CALL 0x005ab8e0
005f5f53 : MOV ECX,dword ptr [ESI]
005f5f55 : XOR EAX,EAX
005f5f57 : MOV dword ptr [ESP + 0x8],EAX
005f5f5b : MOV dword ptr [ESP + 0xc],EAX
005f5f5f : MOV dword ptr [ESP + 0x10],EAX
005f5f63 : MOV dword ptr [ESP + 0x14],EAX
005f5f67 : MOV dword ptr [ESP + 0x18],EAX
005f5f6b : MOV dword ptr [ESP + 0x1c],EAX
005f5f6f : MOV EAX,dword ptr [ECX]
005f5f71 : MOV EAX,dword ptr [EAX]
005f5f73 : LEA EDX,[ESP + 0x8]
005f5f77 : PUSH EDX
005f5f78 : CALL EAX
005f5f7a : MOV ECX,dword ptr [ESP + 0x10]
005f5f7e : CMP ECX,0x1000
005f5f84 : JNC 0x005f5f8b
005f5f86 : MOV ECX,0x1000
005f5f8b : MOV EAX,dword ptr [ESP + 0x8]
005f5f8f : MOV EDX,dword ptr [ESP + 0xc]
005f5f93 : MOV dword ptr [ESI + 0x10],EAX
005f5f96 : MOV dword ptr [ESI + 0x14],EDX
005f5f99 : CMP EAX,EBX
005f5f9b : JNZ 0x005f5fa4
005f5f9d : MOV dword ptr [ESI + 0x10],0x1
005f5fa4 : CMP EDX,EBX
005f5fa6 : JNZ 0x005f5faf
005f5fa8 : MOV dword ptr [ESI + 0x14],0x80000000
005f5faf : MOV DL,byte ptr [ESP + 0x1c]
005f5fb3 : MOV EAX,dword ptr [ESI + 0x4]
005f5fb6 : MOV byte ptr [ESI + 0x18],DL
005f5fb9 : LEA EAX,[EAX + ECX*0x1 + -0x1]
005f5fbd : XOR EDX,EDX
005f5fbf : DIV ECX
005f5fc1 : IMUL EAX,ECX
005f5fc4 : MOV dword ptr [ESI + 0x4],EAX
005f5fc7 : MOV EAX,ESI
005f5fc9 : POP ESI
005f5fca : POP EBX
005f5fcb : ADD ESP,0x18
005f5fce : RET 0x10
