PROGRAM  : Maestia.exe
FUNCTION : do_put
ENTRY    : 00629173
BODY     : [[00629173, 006292bb]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3_GS replaced with injection: EH_prolog3 */
/* Library Function - Multiple Matches With Same Base Name
    protected: virtual class std::ostreambuf_iterator<unsigned short,struct
   std::char_traits<unsigned short> > __thiscall std::num_put<unsigned short,class
   std::ostreambuf_iterator<unsigned short,struct std::char_traits<unsigned short> > >::do_put(class
   std::ostreambuf_iterator<unsigned short,struct std::char_traits<unsigned short> >,class
   std::ios_base &,unsigned short,bool)const 
    protected: virtual class std::ostreambuf_iterator<wchar_t,struct std::char_traits<wchar_t> >
   __thiscall std::num_put<wchar_t,class std::ostreambuf_iterator<wchar_t,struct
   std::char_traits<wchar_t> > >::do_put(class std::ostreambuf_iterator<wchar_t,struct
   std::char_traits<wchar_t> >,class std::ios_base &,wchar_t,bool)const 
   
   Library: Visual Studio 2008 Release */

void do_put(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4,undefined4 param_5,
           char param_6)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  undefined4 *puVar5;
  int *in_ECX;
  undefined1 local_60 [28];
  undefined1 local_44 [4];
  undefined1 local_40 [4];
  undefined4 local_3c;
  undefined4 local_38;
  int *local_34;
  undefined4 **local_2c [4];
  uint local_1c;
  uint local_18;
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x50;
  local_8 = 0x62917f;
  local_38 = param_1;
  if ((*(uint *)(param_4 + 0x10) & 0x4000) == 0) {
    (**(code **)(*in_ECX + 0x1c))(param_1,param_2,param_3,param_4,param_5,param_6);
  }
  else {
    local_34 = in_ECX;
    uVar3 = FUN_004d0b70(local_40);
    local_8 = 0;
    local_3c = use_facet<>(uVar3);
    FUN_00451310();
    FUN_00405d90();
    local_8 = 1;
    if (param_6 == '\0') {
      uVar3 = curr_symbol(local_60);
      local_8._0_1_ = 3;
    }
    else {
      uVar3 = positive_sign(local_60);
      local_8._0_1_ = 2;
    }
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,1);
    FUN_00406510(1,0);
    uVar1 = *(uint *)(param_4 + 0x18);
    if (((int)uVar1 < 1) || (uVar1 <= local_1c)) {
      iVar4 = 0;
    }
    else {
      iVar4 = uVar1 - local_1c;
    }
    if ((*(uint *)(param_4 + 0x10) & 0x1c0) != 0x40) {
      puVar5 = (undefined4 *)Rep(local_34,local_44,param_2,param_3,param_5,iVar4);
      param_2 = *puVar5;
      param_3 = puVar5[1];
      iVar4 = 0;
    }
    if (local_18 < 8) {
      local_2c[0] = local_2c;
    }
    puVar5 = (undefined4 *)Put(local_34,local_44,param_2,param_3,local_2c[0],local_1c);
    uVar3 = *puVar5;
    uVar2 = puVar5[1];
    *(undefined4 *)(param_4 + 0x18) = 0;
    Rep(local_34,local_38,uVar3,uVar2,param_5,iVar4);
    FUN_00406510(1,0);
  }
  FUN_00640ed0();
  return;
}



============================================================
DISASSEMBLY
============================================================
00629173 : PUSH 0x50
00629175 : MOV EAX,0xb0b991
0062917a : CALL 0x00640e86
0062917f : MOV ESI,dword ptr [EBP + 0x14]
00629182 : TEST dword ptr [ESI + 0x10],0x4000
00629189 : MOV EDI,dword ptr [EBP + 0x8]
0062918c : MOV dword ptr [EBP + -0x30],ECX
0062918f : MOV dword ptr [EBP + -0x34],EDI
00629192 : JNZ 0x006291b0
00629194 : MOVZX EDX,byte ptr [EBP + 0x1c]
00629198 : MOV EAX,dword ptr [ECX]
0062919a : PUSH EDX
0062919b : PUSH dword ptr [EBP + 0x18]
0062919e : PUSH ESI
0062919f : PUSH dword ptr [EBP + 0x10]
006291a2 : PUSH dword ptr [EBP + 0xc]
006291a5 : PUSH EDI
006291a6 : CALL dword ptr [EAX + 0x1c]
006291a9 : MOV EAX,EDI
006291ab : JMP 0x006292b4
006291b0 : LEA EAX,[EBP + -0x3c]
006291b3 : PUSH EAX
006291b4 : MOV ECX,ESI
006291b6 : CALL 0x004d0b70
006291bb : XOR EBX,EBX
006291bd : PUSH EAX
006291be : MOV dword ptr [EBP + -0x4],EBX
006291c1 : CALL 0x006284b1
006291c6 : POP ECX
006291c7 : LEA ECX,[EBP + -0x3c]
006291ca : MOV dword ptr [EBP + -0x38],EAX
006291cd : CALL 0x00451310
006291d2 : LEA ECX,[EBP + -0x2c]
006291d5 : CALL 0x00405d90
006291da : MOV ECX,dword ptr [EBP + -0x38]
006291dd : XOR EDI,EDI
006291df : INC EDI
006291e0 : LEA EAX,[EBP + -0x5c]
006291e3 : MOV dword ptr [EBP + -0x4],EDI
006291e6 : PUSH EAX
006291e7 : CMP byte ptr [EBP + 0x1c],BL
006291ea : JZ 0x006291f7
006291ec : CALL 0x0063097b
006291f1 : MOV byte ptr [EBP + -0x4],0x2
006291f5 : JMP 0x00629200
006291f7 : CALL 0x00626a5e
006291fc : MOV byte ptr [EBP + -0x4],0x3
00629200 : PUSH -0x1
00629202 : PUSH EBX
00629203 : PUSH EAX
00629204 : LEA ECX,[EBP + -0x2c]
00629207 : CALL 0x00405eb0
0062920c : PUSH EBX
0062920d : PUSH EDI
0062920e : LEA ECX,[EBP + -0x5c]
00629211 : MOV byte ptr [EBP + -0x4],0x1
00629215 : CALL 0x00406510
0062921a : MOV EAX,dword ptr [ESI + 0x18]
0062921d : CMP EAX,EBX
0062921f : JLE 0x0062922d
00629221 : CMP EAX,dword ptr [EBP + -0x18]
00629224 : JBE 0x0062922d
00629226 : SUB EAX,dword ptr [EBP + -0x18]
00629229 : MOV EDI,EAX
0062922b : JMP 0x0062922f
0062922d : XOR EDI,EDI
0062922f : MOV EAX,dword ptr [ESI + 0x10]
00629232 : AND EAX,0x1c0
00629237 : CMP EAX,0x40
0062923a : JZ 0x00629262
0062923c : PUSH EDI
0062923d : PUSH dword ptr [EBP + 0x18]
00629240 : LEA EAX,[EBP + -0x40]
00629243 : PUSH dword ptr [EBP + 0x10]
00629246 : PUSH dword ptr [EBP + 0xc]
00629249 : PUSH EAX
0062924a : PUSH dword ptr [EBP + -0x30]
0062924d : CALL 0x006264ac
00629252 : MOV ECX,dword ptr [EAX]
00629254 : MOV dword ptr [EBP + 0xc],ECX
00629257 : MOV EAX,dword ptr [EAX + 0x4]
0062925a : ADD ESP,0x18
0062925d : MOV dword ptr [EBP + 0x10],EAX
00629260 : XOR EDI,EDI
00629262 : CMP dword ptr [EBP + -0x14],0x8
00629266 : MOV EAX,dword ptr [EBP + -0x28]
00629269 : JNC 0x0062926e
0062926b : LEA EAX,[EBP + -0x28]
0062926e : PUSH dword ptr [EBP + -0x18]
00629271 : PUSH EAX
00629272 : PUSH dword ptr [EBP + 0x10]
00629275 : LEA EAX,[EBP + -0x40]
00629278 : PUSH dword ptr [EBP + 0xc]
0062927b : PUSH EAX
0062927c : PUSH dword ptr [EBP + -0x30]
0062927f : CALL 0x00625faf
00629284 : MOV ECX,dword ptr [EAX]
00629286 : PUSH EDI
00629287 : PUSH dword ptr [EBP + 0x18]
0062928a : MOV dword ptr [EBP + 0xc],ECX
0062928d : MOV EAX,dword ptr [EAX + 0x4]
00629290 : PUSH EAX
00629291 : PUSH ECX
00629292 : PUSH dword ptr [EBP + -0x34]
00629295 : MOV dword ptr [EBP + 0x10],EAX
00629298 : PUSH dword ptr [EBP + -0x30]
0062929b : MOV dword ptr [ESI + 0x18],EBX
0062929e : CALL 0x006264ac
006292a3 : ADD ESP,0x30
006292a6 : PUSH EBX
006292a7 : PUSH 0x1
006292a9 : LEA ECX,[EBP + -0x2c]
006292ac : CALL 0x00406510
006292b1 : MOV EAX,dword ptr [EBP + -0x34]
006292b4 : CALL 0x00640ed0
006292b9 : RET 0x18
