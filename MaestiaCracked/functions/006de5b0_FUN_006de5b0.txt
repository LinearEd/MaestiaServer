PROGRAM  : Maestia.exe
FUNCTION : FUN_006de5b0
ENTRY    : 006de5b0
BODY     : [[006de5b0, 006de658] [006de660, 006de72f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006de5b0(int *param_1,char param_2)

{
  int iVar1;
  int *piVar2;
  undefined4 uVar3;
  int *piVar4;
  int iVar5;
  bool bVar6;
  int local_4;
  
  piVar2 = param_1;
  iVar1 = param_1[0x57];
  *(int **)(iVar1 + 0x20) = param_1;
  *(char *)(iVar1 + 0xc) = param_2;
  bVar6 = param_1[0x4b] == 0;
  if (param_1[0x4d] == 0) {
    if (bVar6) {
      *(undefined1 **)(iVar1 + 4) = &LAB_006ddee0;
    }
    else {
      *(undefined1 **)(iVar1 + 4) = &LAB_006de020;
    }
  }
  else if (bVar6) {
    *(undefined1 **)(iVar1 + 4) = &LAB_006de1d0;
  }
  else {
    *(undefined1 **)(iVar1 + 4) = &LAB_006de290;
    if (*(int *)(iVar1 + 0x40) == 0) {
      uVar3 = (**(code **)param_1[1])(param_1,1,1000);
      *(undefined4 *)(iVar1 + 0x40) = uVar3;
    }
  }
  if (param_2 == '\0') {
    *(undefined1 **)(iVar1 + 8) = &LAB_006de4a0;
  }
  else {
    *(code **)(iVar1 + 8) = FUN_006de4e0;
  }
  local_4 = 0;
  if (0 < param_1[0x39]) {
    piVar4 = param_1 + 0x3a;
    param_1 = (undefined4 *)(iVar1 + 0x24);
    do {
      iVar5 = *piVar4;
      *param_1 = 0;
      if (bVar6) {
        if (piVar2[0x4d] == 0) {
          iVar5 = *(int *)(iVar5 + 0x14);
          goto LAB_006de682;
        }
      }
      else {
        iVar5 = *(int *)(iVar5 + 0x18);
        *(int *)(iVar1 + 0x34) = iVar5;
LAB_006de682:
        if (param_2 == '\0') {
          FUN_006dcdb0(piVar2,bVar6,iVar5,iVar1 + 0x4c + iVar5 * 4);
        }
        else {
          if ((iVar5 < 0) || (3 < iVar5)) {
            *(undefined4 *)(*piVar2 + 0x14) = 0x32;
            *(int *)(*piVar2 + 0x18) = iVar5;
            (**(code **)*piVar2)(piVar2);
          }
          if (*(int *)(iVar1 + 0x5c + iVar5 * 4) == 0) {
            uVar3 = (**(code **)piVar2[1])(piVar2,1,0x404);
            *(undefined4 *)(iVar1 + 0x5c + iVar5 * 4) = uVar3;
          }
          _memset(*(void **)(iVar1 + 0x5c + iVar5 * 4),0,0x404);
        }
      }
      param_1 = param_1 + 1;
      local_4 = local_4 + 1;
      piVar4 = piVar4 + 1;
    } while (local_4 < piVar2[0x39]);
  }
  *(undefined4 *)(iVar1 + 0x38) = 0;
  *(undefined4 *)(iVar1 + 0x3c) = 0;
  *(undefined4 *)(iVar1 + 0x18) = 0;
  *(undefined4 *)(iVar1 + 0x1c) = 0;
  iVar5 = piVar2[0x2f];
  *(undefined4 *)(iVar1 + 0x48) = 0;
  *(int *)(iVar1 + 0x44) = iVar5;
  return;
}



============================================================
DISASSEMBLY
============================================================
006de5b0 : SUB ESP,0x8
006de5b3 : PUSH EBX
006de5b4 : MOV BL,byte ptr [ESP + 0x14]
006de5b8 : PUSH EBP
006de5b9 : PUSH ESI
006de5ba : MOV ESI,dword ptr [ESP + 0x18]
006de5be : MOV EBP,dword ptr [ESI + 0x15c]
006de5c4 : PUSH EDI
006de5c5 : XOR EDI,EDI
006de5c7 : MOV dword ptr [EBP + 0x20],ESI
006de5ca : MOV byte ptr [EBP + 0xc],BL
006de5cd : CMP dword ptr [ESI + 0x12c],EDI
006de5d3 : SETZ AL
006de5d6 : MOV byte ptr [ESP + 0x10],AL
006de5da : CMP dword ptr [ESI + 0x134],EDI
006de5e0 : JNZ 0x006de5f8
006de5e2 : TEST AL,AL
006de5e4 : JZ 0x006de5ef
006de5e6 : MOV dword ptr [EBP + 0x4],0x6ddee0
006de5ed : JMP 0x006de626
006de5ef : MOV dword ptr [EBP + 0x4],0x6de020
006de5f6 : JMP 0x006de626
006de5f8 : TEST AL,AL
006de5fa : JZ 0x006de605
006de5fc : MOV dword ptr [EBP + 0x4],0x6de1d0
006de603 : JMP 0x006de626
006de605 : MOV dword ptr [EBP + 0x4],0x6de290
006de60c : CMP dword ptr [EBP + 0x40],EDI
006de60f : JNZ 0x006de626
006de611 : MOV EAX,dword ptr [ESI + 0x4]
006de614 : MOV ECX,dword ptr [EAX]
006de616 : PUSH 0x3e8
006de61b : PUSH 0x1
006de61d : PUSH ESI
006de61e : CALL ECX
006de620 : ADD ESP,0xc
006de623 : MOV dword ptr [EBP + 0x40],EAX
006de626 : TEST BL,BL
006de628 : JZ 0x006de633
006de62a : MOV dword ptr [EBP + 0x8],0x6de4e0
006de631 : JMP 0x006de63a
006de633 : MOV dword ptr [EBP + 0x8],0x6de4a0
006de63a : CMP dword ptr [ESI + 0xe4],EDI
006de640 : MOV dword ptr [ESP + 0x14],EDI
006de644 : JLE 0x006de710
006de64a : LEA EDX,[EBP + 0x24]
006de64d : MOV dword ptr [ESP + 0x1c],EDX
006de651 : LEA EBX,[ESI + 0xe8]
006de657 : JMP 0x006de660
006de660 : CMP byte ptr [ESP + 0x10],0x0
006de665 : MOV ECX,dword ptr [ESP + 0x1c]
006de669 : MOV EAX,dword ptr [EBX]
006de66b : MOV dword ptr [ECX],EDI
006de66d : JZ 0x006de67c
006de66f : CMP dword ptr [ESI + 0x134],EDI
006de675 : JNZ 0x006de6f3
006de677 : MOV EDI,dword ptr [EAX + 0x14]
006de67a : JMP 0x006de682
006de67c : MOV EDI,dword ptr [EAX + 0x18]
006de67f : MOV dword ptr [EBP + 0x34],EDI
006de682 : CMP byte ptr [ESP + 0x20],0x0
006de687 : JZ 0x006de6dd
006de689 : TEST EDI,EDI
006de68b : JL 0x006de692
006de68d : CMP EDI,0x4
006de690 : JL 0x006de6aa
006de692 : MOV EDX,dword ptr [ESI]
006de694 : MOV dword ptr [EDX + 0x14],0x32
006de69b : MOV EAX,dword ptr [ESI]
006de69d : MOV dword ptr [EAX + 0x18],EDI
006de6a0 : MOV ECX,dword ptr [ESI]
006de6a2 : MOV EDX,dword ptr [ECX]
006de6a4 : PUSH ESI
006de6a5 : CALL EDX
006de6a7 : ADD ESP,0x4
006de6aa : CMP dword ptr [EBP + EDI*0x4 + 0x5c],0x0
006de6af : JNZ 0x006de6c7
006de6b1 : MOV EAX,dword ptr [ESI + 0x4]
006de6b4 : MOV ECX,dword ptr [EAX]
006de6b6 : PUSH 0x404
006de6bb : PUSH 0x1
006de6bd : PUSH ESI
006de6be : CALL ECX
006de6c0 : ADD ESP,0xc
006de6c3 : MOV dword ptr [EBP + EDI*0x4 + 0x5c],EAX
006de6c7 : MOV EDX,dword ptr [EBP + EDI*0x4 + 0x5c]
006de6cb : PUSH 0x404
006de6d0 : PUSH 0x0
006de6d2 : PUSH EDX
006de6d3 : CALL 0x0063b700
006de6d8 : ADD ESP,0xc
006de6db : JMP 0x006de6f1
006de6dd : MOV ECX,dword ptr [ESP + 0x10]
006de6e1 : LEA EAX,[EBP + EDI*0x4 + 0x4c]
006de6e5 : PUSH EAX
006de6e6 : PUSH EDI
006de6e7 : PUSH ECX
006de6e8 : PUSH ESI
006de6e9 : CALL 0x006dcdb0
006de6ee : ADD ESP,0x10
006de6f1 : XOR EDI,EDI
006de6f3 : MOV EAX,dword ptr [ESP + 0x14]
006de6f7 : ADD dword ptr [ESP + 0x1c],0x4
006de6fc : INC EAX
006de6fd : ADD EBX,0x4
006de700 : CMP EAX,dword ptr [ESI + 0xe4]
006de706 : MOV dword ptr [ESP + 0x14],EAX
006de70a : JL 0x006de660
006de710 : MOV dword ptr [EBP + 0x38],EDI
006de713 : MOV dword ptr [EBP + 0x3c],EDI
006de716 : MOV dword ptr [EBP + 0x18],EDI
006de719 : MOV dword ptr [EBP + 0x1c],EDI
006de71c : MOV EDX,dword ptr [ESI + 0xbc]
006de722 : MOV dword ptr [EBP + 0x48],EDI
006de725 : POP EDI
006de726 : POP ESI
006de727 : MOV dword ptr [EBP + 0x44],EDX
006de72a : POP EBP
006de72b : POP EBX
006de72c : ADD ESP,0x8
006de72f : RET
