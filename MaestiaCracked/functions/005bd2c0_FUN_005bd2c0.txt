PROGRAM  : Maestia.exe
FUNCTION : FUN_005bd2c0
ENTRY    : 005bd2c0
BODY     : [[005bd2c0, 005bd331]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bd2c0(GRefCountNTSImpl *param_1)

{
  int *piVar1;
  undefined1 *puVar2;
  byte *pbVar3;
  GRefCountNTSImpl *pGVar4;
  GRefCountNTSImpl *this;
  int iVar5;
  undefined4 *puVar6;
  
  pGVar4 = param_1;
  puVar2 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar2 = 1;
  if (*(int *)(pGVar4 + 0x18) != 0) {
    puVar6 = &param_1;
    FUN_005296a0(puVar6);
    FUN_00597b80(puVar6);
    this = param_1;
    if (param_1 != (GRefCountNTSImpl *)0x0) {
      iVar5 = *(int *)(param_1 + 0x80);
      if (iVar5 == 0) {
        iVar5 = FUN_00520df0();
      }
      pbVar3 = *(byte **)(pGVar4 + 4);
      if (4 < *pbVar3) {
        FUN_00526400();
      }
      *pbVar3 = 5;
      iVar5 = *(int *)(iVar5 + 0xc);
      *(int *)(pbVar3 + 4) = iVar5;
      piVar1 = (int *)(iVar5 + 8);
      *piVar1 = *piVar1 + 1;
      GRefCountNTSImpl::Release(this);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bd2c0 : PUSH EBP
005bd2c1 : MOV EBP,dword ptr [ESP + 0x8]
005bd2c5 : PUSH ESI
005bd2c6 : MOV ESI,dword ptr [EBP + 0x4]
005bd2c9 : MOV ECX,ESI
005bd2cb : CALL 0x00526400
005bd2d0 : MOV byte ptr [ESI],0x1
005bd2d3 : MOV ECX,dword ptr [EBP + 0x18]
005bd2d6 : TEST ECX,ECX
005bd2d8 : JZ 0x005bd32f
005bd2da : PUSH EDI
005bd2db : LEA EAX,[ESP + 0x10]
005bd2df : PUSH EAX
005bd2e0 : CALL 0x005296a0
005bd2e5 : MOV ECX,EAX
005bd2e7 : CALL 0x00597b80
005bd2ec : MOV EDI,dword ptr [ESP + 0x10]
005bd2f0 : TEST EDI,EDI
005bd2f2 : JZ 0x005bd32e
005bd2f4 : PUSH EBX
005bd2f5 : MOV EBX,dword ptr [EDI + 0x80]
005bd2fb : TEST EBX,EBX
005bd2fd : JNZ 0x005bd308
005bd2ff : MOV ECX,EDI
005bd301 : CALL 0x00520df0
005bd306 : MOV EBX,EAX
005bd308 : MOV ESI,dword ptr [EBP + 0x4]
005bd30b : CMP byte ptr [ESI],0x5
005bd30e : JC 0x005bd317
005bd310 : MOV ECX,ESI
005bd312 : CALL 0x00526400
005bd317 : MOV byte ptr [ESI],0x5
005bd31a : MOV EAX,dword ptr [EBX + 0xc]
005bd31d : POP EBX
005bd31e : MOV ECX,EDI
005bd320 : POP EDI
005bd321 : MOV dword ptr [ESI + 0x4],EAX
005bd324 : INC dword ptr [EAX + 0x8]
005bd327 : POP ESI
005bd328 : POP EBP
005bd329 : JMP 0x004ff7c0
005bd32e : POP EDI
005bd32f : POP ESI
005bd330 : POP EBP
005bd331 : RET
