PROGRAM  : Maestia.exe
FUNCTION : FUN_008d1e20
ENTRY    : 008d1e20
BODY     : [[008d1e20, 008d1fbd] [008d1fc0, 008d21f9]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Type propagation algorithm not settling */

void FUN_008d1e20(int param_1)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  void **ppvVar5;
  char cVar6;
  uint uVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int *piVar14;
  undefined4 uVar15;
  undefined4 *puVar16;
  int iStack_5c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b63780;
  local_14 = ExceptionList;
  uVar7 = DAT_00d66fa0 ^ (uint)&stack0xffffff98;
  if (*(char *)(*(int *)(param_1 + 0xb8) + 1) == '\0') {
    iVar8 = *(int *)(*DAT_00da9894 + 300);
    iVar10 = 0;
    if (iVar8 != 0) {
      iVar10 = *(int *)(iVar8 + 0xc);
    }
    iVar8 = *(int *)(*DAT_00da9894 + 300);
    iVar11 = 0;
    if (iVar8 != 0) {
      iVar11 = *(int *)(iVar8 + 0xc);
    }
    piVar2 = *(int **)(iVar11 + 0x4c + (uint)*(ushort *)(iVar10 + 0x5c) * 4);
    if ((piVar2 != (int *)0x0) &&
       (puVar16 = *(undefined4 **)(param_1 + 0x3c), ppvVar5 = &local_14,
       puVar16 != *(undefined4 **)(param_1 + 0x40))) {
      do {
        ExceptionList = ppvVar5;
        timeGetTime();
        uVar15 = *(undefined4 *)*puVar16;
        iVar8 = (**(code **)(*piVar2 + 0x98))(uVar15,uVar7);
        if ((iVar8 != 0) &&
           (((*(int *)(iVar8 + 8) != 0 && (cVar6 = FUN_009082d0(), cVar6 == '\0')) &&
            (piVar9 = (int *)(**(code **)(*piVar2 + 0x74))(uVar15,piVar2[0x14]),
            piVar9 != (int *)0x0)))) {
          if (piVar9[9] == 0) {
            cVar6 = '\0';
          }
          else {
            cVar6 = *(char *)(piVar9[9] + 0xb1);
          }
          iVar8 = (**(code **)(*piVar9 + 0x20))();
          if ((iVar8 == 2) && (cVar6 != '\0')) {
            iVar8 = FUN_008413b0(piVar9[4],0);
            piVar9 = (int *)FUN_004049b0(piVar9[4]);
            if (((iVar8 != 0) && (piVar9 != (int *)0x0)) &&
               ((iVar10 = (**(code **)(*piVar9 + 0x40))(), iVar10 == 0 ||
                (((uint)piVar9[0x27b] >> 0xb & 1) != 0)))) {
              iVar10 = *(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54);
              if (iVar10 == 0) {
                ExceptionList = local_14;
                return;
              }
              iStack_5c = 0;
              if ((short)*(undefined4 *)(iVar10 + 0x30) != 0) {
                do {
                  iVar11 = FUN_00ab67c0(iStack_5c);
                  iVar12 = FUN_00a1ba80();
                  if (((iVar12 != 0) && (*(char *)(iVar12 + 0x3ad) != '\0')) &&
                     (cVar6 = FUN_008896f0(), cVar6 == '\0')) {
                    bVar1 = *(byte *)(iVar8 + 0xb);
                    iVar12 = (**(code **)(*piVar9 + 0x38))();
                    if (iVar12 != 0) {
                      iVar12 = (**(code **)(piVar9[(uint)bVar1 * 0xd + 0x129] + 4))();
joined_r0x008d203b:
                      if (iVar12 != 0) {
                        iVar13 = FUN_004f5680();
                        if (((iVar13 != 0) && ((*(byte *)(iVar13 + 0x144) & 1) != 0)) &&
                           (iVar3 = *DAT_00da9894, *(int *)(iVar3 + 0x14c) != 0)) {
                          for (piVar14 = *(int **)(*(int *)(iVar3 + 0x14c) + 0x48);
                              piVar14 != *(int **)(*(int *)(iVar3 + 0x14c) + 0x4c);
                              piVar14 = piVar14 + 1) {
                            iVar4 = *piVar14;
                            if ((iVar4 != 0) && (*(int *)(iVar4 + 0x80) == *(int *)(iVar11 + 0x58)))
                            {
                              if (iVar4 != 0) {
                                for (piVar14 = *(int **)(*(int *)(iVar3 + 0x14c) + 0x48);
                                    (piVar14 != *(int **)(*(int *)(iVar3 + 0x14c) + 0x4c) &&
                                    ((*piVar14 == 0 ||
                                     (*(int *)(*piVar14 + 0x80) != *(int *)(iVar11 + 0x58)))));
                                    piVar14 = piVar14 + 1) {
                                }
                                cVar6 = FUN_0095ae70();
                                if (cVar6 == '\0') {
                                  FUN_00a364b0(*(undefined4 *)(iVar11 + 0x58),0);
                                  FUN_00a0d390(DAT_017247d4,1);
                                  uVar15 = 0;
                                  if (*(int *)(*DAT_00da9894 + 300) != 0) {
                                    uVar15 = *(undefined4 *)(*(int *)(*DAT_00da9894 + 300) + 0xc);
                                  }
                                  FUN_00930240(uVar15,0);
                                  uVar15 = FUN_00404750(
                                                  L"[AutoGameLOG] Party members to use buffskills proto ->"
                                                  ,CONCAT22(*(undefined2 *)(iVar13 + 4),
                                                            *(undefined2 *)(iVar13 + 6)));
                                  uStack_c = 0;
                                  FUN_00801630(uVar15);
                                  uStack_c = 0xffffffff;
                                  FUN_00406560();
                                  *(undefined1 *)(param_1 + 0xca) = 1;
                                  DAT_00da9870 = timeGetTime();
                                  ExceptionList = local_14;
                                  return;
                                }
                              }
                              break;
                            }
                          }
                        }
                        goto joined_r0x008d203b;
                      }
                    }
                  }
                  iStack_5c = iStack_5c + 1;
                } while ((ushort)iStack_5c < *(ushort *)(iVar10 + 0x30));
              }
            }
          }
        }
        puVar16 = puVar16 + 1;
        ppvVar5 = ExceptionList;
        if (puVar16 == *(undefined4 **)(param_1 + 0x40)) {
          ExceptionList = local_14;
          return;
        }
      } while( true );
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008d1e20 : PUSH EBP
008d1e21 : MOV EBP,ESP
008d1e23 : AND ESP,0xfffffff8
008d1e26 : PUSH -0x1
008d1e28 : PUSH 0xb63780
008d1e2d : MOV EAX,FS:[0x0]
008d1e33 : PUSH EAX
008d1e34 : SUB ESP,0x48
008d1e37 : PUSH EBX
008d1e38 : PUSH ESI
008d1e39 : PUSH EDI
008d1e3a : MOV EAX,[0x00d66fa0]
008d1e3f : XOR EAX,ESP
008d1e41 : PUSH EAX
008d1e42 : LEA EAX,[ESP + 0x58]
008d1e46 : MOV FS:[0x0],EAX
008d1e4c : MOV EBX,dword ptr [EBP + 0x8]
008d1e4f : MOV EAX,dword ptr [EBX + 0xb8]
008d1e55 : MOV AL,byte ptr [EAX + 0x1]
008d1e58 : TEST AL,AL
008d1e5a : JNZ 0x008d21e5
008d1e60 : MOV ECX,dword ptr [0x00da9894]
008d1e66 : MOV ECX,dword ptr [ECX]
008d1e68 : MOV EAX,dword ptr [ECX + 0x12c]
008d1e6e : TEST EAX,EAX
008d1e70 : JZ 0x008d1e75
008d1e72 : MOV EAX,dword ptr [EAX + 0xc]
008d1e75 : MOVZX EDX,word ptr [EAX + 0x5c]
008d1e79 : MOV EAX,dword ptr [ECX + 0x12c]
008d1e7f : TEST EAX,EAX
008d1e81 : JZ 0x008d1e86
008d1e83 : MOV EAX,dword ptr [EAX + 0xc]
008d1e86 : MOVZX EDX,DX
008d1e89 : MOV EDI,dword ptr [EAX + EDX*0x4 + 0x4c]
008d1e8d : MOV dword ptr [ESP + 0x30],EDI
008d1e91 : TEST EDI,EDI
008d1e93 : JZ 0x008d21e5
008d1e99 : MOV ESI,dword ptr [EBX + 0x3c]
008d1e9c : MOV dword ptr [ESP + 0x14],ESI
008d1ea0 : CMP ESI,dword ptr [EBX + 0x40]
008d1ea3 : JZ 0x008d21e5
008d1ea9 : LEA ESP,[ESP]
008d1eb0 : CALL dword ptr [0x00b85598]
008d1eb6 : MOV EAX,dword ptr [ESI]
008d1eb8 : MOV EBX,dword ptr [EAX]
008d1eba : MOV EDX,dword ptr [EDI]
008d1ebc : MOV EAX,dword ptr [EDX + 0x98]
008d1ec2 : PUSH EBX
008d1ec3 : MOV ECX,EDI
008d1ec5 : MOV dword ptr [ESP + 0x38],EBX
008d1ec9 : CALL EAX
008d1ecb : TEST EAX,EAX
008d1ecd : JZ 0x008d211d
008d1ed3 : CMP dword ptr [EAX + 0x8],0x0
008d1ed7 : JZ 0x008d211d
008d1edd : MOV ESI,EAX
008d1edf : CALL 0x009082d0
008d1ee4 : TEST AL,AL
008d1ee6 : JNZ 0x008d2119
008d1eec : MOV EAX,dword ptr [EDI + 0x50]
008d1eef : MOV EDX,dword ptr [EDI]
008d1ef1 : PUSH EAX
008d1ef2 : MOV EAX,dword ptr [EDX + 0x74]
008d1ef5 : PUSH EBX
008d1ef6 : MOV ECX,EDI
008d1ef8 : CALL EAX
008d1efa : MOV ESI,EAX
008d1efc : TEST ESI,ESI
008d1efe : JZ 0x008d2119
008d1f04 : MOV EAX,dword ptr [ESI + 0x24]
008d1f07 : TEST EAX,EAX
008d1f09 : JZ 0x008d1f13
008d1f0b : MOV BL,byte ptr [EAX + 0xb1]
008d1f11 : JMP 0x008d1f15
008d1f13 : XOR BL,BL
008d1f15 : MOV EDX,dword ptr [ESI]
008d1f17 : MOV EAX,dword ptr [EDX + 0x20]
008d1f1a : MOV ECX,ESI
008d1f1c : CALL EAX
008d1f1e : CMP EAX,0x2
008d1f21 : JNZ 0x008d2119
008d1f27 : TEST BL,BL
008d1f29 : JZ 0x008d2119
008d1f2f : MOV EAX,dword ptr [ESI + 0x10]
008d1f32 : MOV ECX,dword ptr [0x01724910]
008d1f38 : PUSH 0x0
008d1f3a : PUSH EAX
008d1f3b : CALL 0x008413b0
008d1f40 : MOV ESI,dword ptr [ESI + 0x10]
008d1f43 : PUSH ESI
008d1f44 : MOV dword ptr [ESP + 0x1c],EAX
008d1f48 : CALL 0x004049b0
008d1f4d : ADD ESP,0x4
008d1f50 : CMP dword ptr [ESP + 0x18],0x0
008d1f55 : MOV EBX,EAX
008d1f57 : MOV dword ptr [ESP + 0x2c],EBX
008d1f5b : JZ 0x008d2119
008d1f61 : TEST EBX,EBX
008d1f63 : JZ 0x008d2119
008d1f69 : MOV EDX,dword ptr [EBX]
008d1f6b : MOV EAX,dword ptr [EDX + 0x40]
008d1f6e : MOV ECX,EBX
008d1f70 : CALL EAX
008d1f72 : TEST EAX,EAX
008d1f74 : JZ 0x008d1f88
008d1f76 : MOV EAX,dword ptr [EBX + 0x9ec]
008d1f7c : SHR EAX,0xb
008d1f7f : AND EAX,0x1
008d1f82 : JZ 0x008d2119
008d1f88 : MOV ECX,dword ptr [0x0172491c]
008d1f8e : MOV EAX,dword ptr [ECX + 0x17c]
008d1f94 : MOV ECX,dword ptr [EAX + 0x1f54]
008d1f9a : MOV dword ptr [ESP + 0x20],ECX
008d1f9e : TEST ECX,ECX
008d1fa0 : JZ 0x008d21e5
008d1fa6 : MOV EAX,dword ptr [ECX + 0x30]
008d1fa9 : XOR EDX,EDX
008d1fab : MOV dword ptr [ESP + 0x10],0x0
008d1fb3 : CMP DX,AX
008d1fb6 : JNC 0x008d2119
008d1fbc : JMP 0x008d1fc2
008d1fc0 : MOV ECX,EDX
008d1fc2 : MOV EAX,dword ptr [ESP + 0x10]
008d1fc6 : PUSH EAX
008d1fc7 : CALL 0x00ab67c0
008d1fcc : MOV ESI,dword ptr [EAX + 0x58]
008d1fcf : MOV EDI,dword ptr [0x00da93ec]
008d1fd5 : MOV dword ptr [ESP + 0x24],EAX
008d1fd9 : CALL 0x00a1ba80
008d1fde : TEST EAX,EAX
008d1fe0 : JZ 0x008d20fe
008d1fe6 : CMP byte ptr [EAX + 0x3ad],0x0
008d1fed : JZ 0x008d20fe
008d1ff3 : CALL 0x008896f0
008d1ff8 : TEST AL,AL
008d1ffa : JNZ 0x008d20fe
008d2000 : MOV ECX,dword ptr [ESP + 0x18]
008d2004 : MOV EDX,dword ptr [EBX]
008d2006 : MOVZX ESI,byte ptr [ECX + 0xb]
008d200a : MOV EAX,dword ptr [EDX + 0x38]
008d200d : MOV ECX,EBX
008d200f : CALL EAX
008d2011 : TEST EAX,EAX
008d2013 : JZ 0x008d20fe
008d2019 : IMUL ESI,ESI,0x34
008d201c : MOV EDX,dword ptr [ESI + EBX*0x1 + 0x4a4]
008d2023 : MOV EAX,dword ptr [EDX + 0x4]
008d2026 : LEA ESI,[ESI + EBX*0x1 + 0x4a4]
008d202d : MOV ECX,ESI
008d202f : MOV dword ptr [ESP + 0x28],ESI
008d2033 : CALL EAX
008d2035 : MOV dword ptr [ESP + 0x1c],EAX
008d2039 : TEST EAX,EAX
008d203b : JZ 0x008d20fe
008d2041 : JMP 0x008d2047
008d2043 : MOV ESI,dword ptr [ESP + 0x28]
008d2047 : LEA EDX,[ESP + 0x1c]
008d204b : MOV EAX,ESI
008d204d : CALL 0x004f5680
008d2052 : MOV EBX,EAX
008d2054 : TEST EBX,EBX
008d2056 : JZ 0x008d20ef
008d205c : TEST byte ptr [EBX + 0x144],0x1
008d2063 : JZ 0x008d20ef
008d2069 : MOV ECX,dword ptr [0x00da9894]
008d206f : MOV ESI,dword ptr [ECX]
008d2071 : CMP dword ptr [ESI + 0x14c],0x0
008d2078 : JZ 0x008d20ef
008d207a : MOV EDX,dword ptr [ESP + 0x24]
008d207e : MOV ECX,dword ptr [ESI + 0x14c]
008d2084 : MOV EDI,dword ptr [EDX + 0x58]
008d2087 : MOV EAX,dword ptr [ECX + 0x48]
008d208a : MOV EDX,dword ptr [ECX + 0x4c]
008d208d : CMP EAX,EDX
008d208f : JZ 0x008d20ef
008d2091 : MOV ECX,dword ptr [EAX]
008d2093 : TEST ECX,ECX
008d2095 : JZ 0x008d209f
008d2097 : CMP dword ptr [ECX + 0x80],EDI
008d209d : JZ 0x008d20a8
008d209f : ADD EAX,0x4
008d20a2 : CMP EAX,EDX
008d20a4 : JNZ 0x008d2091
008d20a6 : JMP 0x008d20ef
008d20a8 : TEST ECX,ECX
008d20aa : JZ 0x008d20ef
008d20ac : MOV ECX,dword ptr [ESI + 0x14c]
008d20b2 : MOV EAX,dword ptr [ECX + 0x48]
008d20b5 : MOV EDX,dword ptr [ECX + 0x4c]
008d20b8 : CMP EAX,EDX
008d20ba : JZ 0x008d20d5
008d20bc : LEA ESP,[ESP]
008d20c0 : MOV ECX,dword ptr [EAX]
008d20c2 : TEST ECX,ECX
008d20c4 : JZ 0x008d20ce
008d20c6 : CMP dword ptr [ECX + 0x80],EDI
008d20cc : JZ 0x008d2145
008d20ce : ADD EAX,0x4
008d20d1 : CMP EAX,EDX
008d20d3 : JNZ 0x008d20c0
008d20d5 : XOR EAX,EAX
008d20d7 : MOVZX EDX,word ptr [EBX + 0x4]
008d20db : MOVZX ECX,word ptr [EBX + 0x6]
008d20df : SHL EDX,0x10
008d20e2 : OR EDX,ECX
008d20e4 : MOV ECX,EAX
008d20e6 : CALL 0x0095ae70
008d20eb : TEST AL,AL
008d20ed : JZ 0x008d2149
008d20ef : CMP dword ptr [ESP + 0x1c],0x0
008d20f4 : JNZ 0x008d2043
008d20fa : MOV EBX,dword ptr [ESP + 0x2c]
008d20fe : MOV EAX,dword ptr [ESP + 0x10]
008d2102 : MOV EDX,dword ptr [ESP + 0x20]
008d2106 : INC EAX
008d2107 : MOV dword ptr [ESP + 0x10],EAX
008d210b : CMP AX,word ptr [EDX + 0x30]
008d210f : JC 0x008d1fc0
008d2115 : MOV EDI,dword ptr [ESP + 0x30]
008d2119 : MOV ESI,dword ptr [ESP + 0x14]
008d211d : MOV EAX,dword ptr [EBP + 0x8]
008d2120 : ADD ESI,0x4
008d2123 : MOV dword ptr [ESP + 0x14],ESI
008d2127 : CMP ESI,dword ptr [EAX + 0x40]
008d212a : JNZ 0x008d1eb0
008d2130 : MOV ECX,dword ptr [ESP + 0x58]
008d2134 : MOV dword ptr FS:[0x0],ECX
008d213b : POP ECX
008d213c : POP EDI
008d213d : POP ESI
008d213e : POP EBX
008d213f : MOV ESP,EBP
008d2141 : POP EBP
008d2142 : RET 0x4
008d2145 : MOV EAX,ECX
008d2147 : JMP 0x008d20d7
008d2149 : MOV ESI,dword ptr [ESP + 0x24]
008d214d : MOV ECX,dword ptr [ESI + 0x58]
008d2150 : PUSH 0x0
008d2152 : PUSH ECX
008d2153 : MOV ECX,dword ptr [0x00da93ec]
008d2159 : CALL 0x00a364b0
008d215e : MOV EDX,dword ptr [0x017247d4]
008d2164 : MOV ECX,dword ptr [ESI + 0x58]
008d2167 : PUSH 0x1
008d2169 : PUSH EDX
008d216a : CALL 0x00a0d390
008d216f : MOV EAX,[0x00da9894]
008d2174 : MOV EAX,dword ptr [EAX]
008d2176 : MOV EAX,dword ptr [EAX + 0x12c]
008d217c : TEST EAX,EAX
008d217e : JZ 0x008d2183
008d2180 : MOV EAX,dword ptr [EAX + 0xc]
008d2183 : PUSH 0x0
008d2185 : PUSH EAX
008d2186 : MOV EAX,dword ptr [ESP + 0x3c]
008d218a : CALL 0x00930240
008d218f : MOVZX EAX,word ptr [EBX + 0x4]
008d2193 : MOVZX ECX,word ptr [EBX + 0x6]
008d2197 : SHL EAX,0x10
008d219a : OR EAX,ECX
008d219c : PUSH EAX
008d219d : PUSH 0xc54ac8
008d21a2 : LEA ESI,[ESP + 0x40]
008d21a6 : CALL 0x00404750
008d21ab : ADD ESP,0x8
008d21ae : MOV dword ptr [ESP + 0x60],0x0
008d21b6 : PUSH EAX
008d21b7 : MOV EAX,[0x00da98e8]
008d21bc : CALL 0x00801630
008d21c1 : MOV dword ptr [ESP + 0x60],0xffffffff
008d21c9 : MOV ECX,ESI
008d21cb : CALL 0x00406560
008d21d0 : MOV EDX,dword ptr [EBP + 0x8]
008d21d3 : MOV byte ptr [EDX + 0xca],0x1
008d21da : CALL dword ptr [0x00b85598]
008d21e0 : MOV [0x00da9870],EAX
008d21e5 : MOV ECX,dword ptr [ESP + 0x58]
008d21e9 : MOV dword ptr FS:[0x0],ECX
008d21f0 : POP ECX
008d21f1 : POP EDI
008d21f2 : POP ESI
008d21f3 : POP EBX
008d21f4 : MOV ESP,EBP
008d21f6 : POP EBP
008d21f7 : RET 0x4
