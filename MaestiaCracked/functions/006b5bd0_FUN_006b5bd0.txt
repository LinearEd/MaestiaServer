PROGRAM  : Maestia.exe
FUNCTION : FUN_006b5bd0
ENTRY    : 006b5bd0
BODY     : [[006b5bd0, 006b5c7b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b5bd0(void)

{
  int iVar1;
  char cVar2;
  undefined4 uVar3;
  undefined4 extraout_ECX;
  int unaff_ESI;
  undefined1 local_2c [4];
  undefined1 local_28 [4];
  undefined1 local_24 [36];
  
  if (*(int *)(unaff_ESI + 0x10) < *(int *)(unaff_ESI + 0x130)) {
    *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
    return;
  }
  cVar2 = FUN_006b5a20(local_28,local_2c,local_24);
  if (cVar2 == '\0') {
    uVar3 = 1;
    iVar1 = *(int *)(unaff_ESI + 0x130);
    while (0 < iVar1) {
      *(int *)(unaff_ESI + 0x1c) = *(int *)(unaff_ESI + 0x1c) + -1;
      if (*(ushort *)(*(int *)(unaff_ESI + 0x18) + *(int *)(unaff_ESI + 0x1c) * 4) <
          *(ushort *)(unaff_ESI + 0x74)) {
        FUN_006b5b40();
        uVar3 = extraout_ECX;
      }
      else if (*(char *)(unaff_ESI + 0x231) != '\0') {
        *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
        return;
      }
      *(int *)(unaff_ESI + 0x130) = *(int *)(unaff_ESI + 0x130) + -1;
      iVar1 = *(int *)(unaff_ESI + 0x130);
    }
    *(undefined4 *)(unaff_ESI + 0x130) = uVar3;
    *(undefined4 *)(unaff_ESI + 0x20) = *(undefined4 *)(unaff_ESI + 0x1c);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b5bd0 : MOV EAX,dword ptr [ESI + 0x10]
006b5bd3 : SUB ESP,0x30
006b5bd6 : CMP EAX,dword ptr [ESI + 0x130]
006b5bdc : JGE 0x006b5be9
006b5bde : MOV dword ptr [ESI + 0xc],0x86
006b5be5 : ADD ESP,0x30
006b5be8 : RET
006b5be9 : PUSH EBX
006b5bea : LEA ECX,[ESP + 0x10]
006b5bee : PUSH ECX
006b5bef : LEA EDX,[ESP + 0xc]
006b5bf3 : PUSH EDX
006b5bf4 : LEA EAX,[ESP + 0x14]
006b5bf8 : PUSH EAX
006b5bf9 : LEA EDX,[ESP + 0x10]
006b5bfd : MOV EBX,ESI
006b5bff : CALL 0x006b5a20
006b5c04 : ADD ESP,0xc
006b5c07 : TEST AL,AL
006b5c09 : JNZ 0x006b5c77
006b5c0b : CMP dword ptr [ESI + 0x130],0x0
006b5c12 : PUSH EBP
006b5c13 : PUSH EDI
006b5c14 : MOV ECX,0x1
006b5c19 : JLE 0x006b5c69
006b5c1b : MOV EDI,dword ptr [ESP + 0x10]
006b5c1f : MOV EBX,dword ptr [ESP + 0x14]
006b5c23 : OR EBP,0xffffffff
006b5c26 : ADD dword ptr [ESI + 0x1c],EBP
006b5c29 : MOV EAX,dword ptr [ESI + 0x1c]
006b5c2c : MOV EDX,dword ptr [ESI + 0x18]
006b5c2f : MOVZX EDX,word ptr [EDX + EAX*0x4]
006b5c33 : CMP DX,word ptr [ESI + 0x74]
006b5c37 : JC 0x006b5c50
006b5c39 : CMP byte ptr [ESI + 0x231],0x0
006b5c40 : JZ 0x006b5c5a
006b5c42 : POP EDI
006b5c43 : POP EBP
006b5c44 : MOV dword ptr [ESI + 0xc],0x86
006b5c4b : POP EBX
006b5c4c : ADD ESP,0x30
006b5c4f : RET
006b5c50 : PUSH EDI
006b5c51 : PUSH ESI
006b5c52 : CALL 0x006b5b40
006b5c57 : ADD ESP,0x8
006b5c5a : ADD dword ptr [ESI + 0x130],EBP
006b5c60 : CMP dword ptr [ESI + 0x130],0x0
006b5c67 : JG 0x006b5c26
006b5c69 : MOV EAX,dword ptr [ESI + 0x1c]
006b5c6c : POP EDI
006b5c6d : MOV dword ptr [ESI + 0x130],ECX
006b5c73 : MOV dword ptr [ESI + 0x20],EAX
006b5c76 : POP EBP
006b5c77 : POP EBX
006b5c78 : ADD ESP,0x30
006b5c7b : RET
