PROGRAM  : Maestia.exe
FUNCTION : FUN_005bf790
ENTRY    : 005bf790
BODY     : [[005bf790, 005bf82a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bf790(int param_1)

{
  undefined1 *puVar1;
  char cVar2;
  undefined1 uVar3;
  uint uVar4;
  uint uVar5;
  undefined4 uVar6;
  
  cVar2 = FUN_00526030(0x29);
  if (cVar2 != '\0') {
    if (((*(int *)(param_1 + 8) != 0) && (*(int *)(param_1 + 8) != 0x10)) &&
       (0 < *(int *)(param_1 + 0x1c))) {
      uVar6 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(0);
      uVar4 = FUN_00527a80(uVar6);
      if (*(int *)(param_1 + 0x1c) < 2) {
        uVar5 = FUN_005ed7b0();
      }
      else {
        uVar6 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(1);
        uVar5 = FUN_00527a80(uVar6);
      }
      if (uVar5 <= uVar4) {
        uVar5 = uVar4 + 1;
      }
      uVar3 = FUN_005ed9b0(uVar4,uVar5);
      puVar1 = *(undefined1 **)(param_1 + 4);
      FUN_00526400();
      *puVar1 = 2;
      puVar1[4] = uVar3;
    }
    return;
  }
  FUN_00526050("TextSnapshot",0,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005bf790 : PUSH ESI
005bf791 : MOV ESI,dword ptr [ESP + 0x8]
005bf795 : PUSH 0x29
005bf797 : MOV ECX,ESI
005bf799 : CALL 0x00526030
005bf79e : TEST AL,AL
005bf7a0 : JNZ 0x005bf7b4
005bf7a2 : PUSH 0x0
005bf7a4 : PUSH 0x0
005bf7a6 : PUSH 0xb8fd10
005bf7ab : MOV ECX,ESI
005bf7ad : CALL 0x00526050
005bf7b2 : POP ESI
005bf7b3 : RET
005bf7b4 : MOV EAX,dword ptr [ESI + 0x8]
005bf7b7 : TEST EAX,EAX
005bf7b9 : JZ 0x005bf829
005bf7bb : PUSH EBX
005bf7bc : LEA EBX,[EAX + -0x10]
005bf7bf : TEST EBX,EBX
005bf7c1 : JZ 0x005bf828
005bf7c3 : CMP dword ptr [ESI + 0x1c],0x1
005bf7c7 : JL 0x005bf828
005bf7c9 : MOV EAX,dword ptr [ESI + 0x18]
005bf7cc : PUSH EDI
005bf7cd : PUSH EAX
005bf7ce : PUSH 0x0
005bf7d0 : MOV ECX,ESI
005bf7d2 : CALL 0x00526260
005bf7d7 : MOV ECX,EAX
005bf7d9 : CALL 0x00527a80
005bf7de : CMP dword ptr [ESI + 0x1c],0x1
005bf7e2 : MOV EDI,EAX
005bf7e4 : JLE 0x005bf7fc
005bf7e6 : MOV ECX,dword ptr [ESI + 0x18]
005bf7e9 : PUSH ECX
005bf7ea : PUSH 0x1
005bf7ec : MOV ECX,ESI
005bf7ee : CALL 0x00526260
005bf7f3 : MOV ECX,EAX
005bf7f5 : CALL 0x00527a80
005bf7fa : JMP 0x005bf804
005bf7fc : LEA ECX,[EBX + 0x30]
005bf7ff : CALL 0x005ed7b0
005bf804 : CMP EAX,EDI
005bf806 : JA 0x005bf80b
005bf808 : LEA EAX,[EDI + 0x1]
005bf80b : PUSH EAX
005bf80c : PUSH EDI
005bf80d : LEA ECX,[EBX + 0x30]
005bf810 : CALL 0x005ed9b0
005bf815 : MOV ESI,dword ptr [ESI + 0x4]
005bf818 : MOV ECX,ESI
005bf81a : MOV BL,AL
005bf81c : CALL 0x00526400
005bf821 : MOV byte ptr [ESI],0x2
005bf824 : MOV byte ptr [ESI + 0x4],BL
005bf827 : POP EDI
005bf828 : POP EBX
005bf829 : POP ESI
005bf82a : RET
