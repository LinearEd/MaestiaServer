PROGRAM  : Maestia.exe
FUNCTION : FUN_005d5a40
ENTRY    : 005d5a40
BODY     : [[005d5a40, 005d5af2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d5a40(int param_1)

{
  byte *pbVar1;
  undefined4 uVar2;
  undefined1 *puVar3;
  int in_ECX;
  
  *(undefined2 *)(in_ECX + 4) = *(undefined2 *)(param_1 + 4);
  *(undefined4 *)(in_ECX + 8) = *(undefined4 *)(param_1 + 8);
  pbVar1 = *(byte **)(in_ECX + 0xc);
  *(undefined2 *)(in_ECX + 0x10) = *(undefined2 *)(param_1 + 0x10);
  *(undefined4 *)(in_ECX + 0x14) = *(undefined4 *)(param_1 + 0x14);
  if (pbVar1 != (byte *)0x0) {
    if (((*pbVar1 & 0x10) != 0) && (*(GRefCountImpl **)(pbVar1 + 4) != (GRefCountImpl *)0x0)) {
      GRefCountImpl::Release(*(GRefCountImpl **)(pbVar1 + 4));
    }
    if ((*(int *)(pbVar1 + 8) == 0) && (*(int *)(pbVar1 + 0xc) != 0)) {
      FUN_00524240();
    }
    FUN_00515cf0(pbVar1);
    *(undefined4 *)(in_ECX + 0xc) = 0;
  }
  if (*(int *)(param_1 + 0xc) != 0) {
    puVar3 = (undefined1 *)FUN_00515840(0x28,0);
    if (puVar3 != (undefined1 *)0x0) {
      uVar2 = *(undefined4 *)(param_1 + 0xc);
      *(undefined4 *)(puVar3 + 8) = 0;
      *(undefined4 *)(puVar3 + 0xc) = 0;
      GMatrix2D::SetIdentity((GMatrix2D *)(puVar3 + 0x10));
      *puVar3 = 0;
      FUN_005d5230(uVar2);
      *(undefined1 **)(in_ECX + 0xc) = puVar3;
      return;
    }
    *(undefined4 *)(in_ECX + 0xc) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005d5a40 : PUSH EBP
005d5a41 : MOV EBP,dword ptr [ESP + 0x8]
005d5a45 : MOV AX,word ptr [EBP + 0x4]
005d5a49 : PUSH ESI
005d5a4a : PUSH EDI
005d5a4b : MOV EDI,ECX
005d5a4d : MOV word ptr [EDI + 0x4],AX
005d5a51 : MOV ECX,dword ptr [EBP + 0x8]
005d5a54 : MOV dword ptr [EDI + 0x8],ECX
005d5a57 : MOV DX,word ptr [EBP + 0x10]
005d5a5b : MOV ESI,dword ptr [EDI + 0xc]
005d5a5e : MOV word ptr [EDI + 0x10],DX
005d5a62 : FLD float ptr [EBP + 0x14]
005d5a65 : FSTP float ptr [EDI + 0x14]
005d5a68 : TEST ESI,ESI
005d5a6a : JZ 0x005d5a9c
005d5a6c : TEST byte ptr [ESI],0x10
005d5a6f : JZ 0x005d5a7d
005d5a71 : MOV ECX,dword ptr [ESI + 0x4]
005d5a74 : TEST ECX,ECX
005d5a76 : JZ 0x005d5a7d
005d5a78 : CALL 0x004ff7e0
005d5a7d : CMP dword ptr [ESI + 0x8],0x0
005d5a81 : JNZ 0x005d5a8f
005d5a83 : MOV ECX,dword ptr [ESI + 0xc]
005d5a86 : TEST ECX,ECX
005d5a88 : JZ 0x005d5a8f
005d5a8a : CALL 0x00524240
005d5a8f : PUSH ESI
005d5a90 : CALL 0x00515cf0
005d5a95 : MOV dword ptr [EDI + 0xc],0x0
005d5a9c : CMP dword ptr [EBP + 0xc],0x0
005d5aa0 : JZ 0x005d5aeb
005d5aa2 : MOV ECX,dword ptr [0x00d73250]
005d5aa8 : PUSH 0x0
005d5aaa : PUSH 0x28
005d5aac : CALL 0x00515840
005d5ab1 : MOV ESI,EAX
005d5ab3 : TEST ESI,ESI
005d5ab5 : JZ 0x005d5ae6
005d5ab7 : MOV EBP,dword ptr [EBP + 0xc]
005d5aba : LEA ECX,[ESI + 0x10]
005d5abd : MOV dword ptr [ESI + 0x8],0x0
005d5ac4 : MOV dword ptr [ESI + 0xc],0x0
005d5acb : CALL 0x00522b80
005d5ad0 : PUSH EBP
005d5ad1 : MOV ECX,ESI
005d5ad3 : MOV byte ptr [ESI],0x0
005d5ad6 : CALL 0x005d5230
005d5adb : MOV dword ptr [EDI + 0xc],ESI
005d5ade : MOV EAX,EDI
005d5ae0 : POP EDI
005d5ae1 : POP ESI
005d5ae2 : POP EBP
005d5ae3 : RET 0x4
005d5ae6 : XOR ESI,ESI
005d5ae8 : MOV dword ptr [EDI + 0xc],ESI
005d5aeb : MOV EAX,EDI
005d5aed : POP EDI
005d5aee : POP ESI
005d5aef : POP EBP
005d5af0 : RET 0x4
