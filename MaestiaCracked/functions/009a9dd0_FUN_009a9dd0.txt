PROGRAM  : Maestia.exe
FUNCTION : FUN_009a9dd0
ENTRY    : 009a9dd0
BODY     : [[009a9dd0, 009a9fcb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a9dd0(undefined4 param_1,undefined4 param_2)

{
  ushort uVar1;
  undefined4 uVar2;
  int *in_ECX;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4e527;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = (ushort)param_2;
  switch(param_1) {
  case 0xc382:
    if (uVar1 < *(ushort *)((int)in_ECX + 0x3a)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc383:
    if ((*(ushort *)(in_ECX + 0xe) < uVar1) && (1 < uVar1)) {
      FUN_009ac1d0();
    }
    break;
  case 0xc384:
    (**(code **)(*in_ECX + 0x20))();
    if (*(ushort *)((int)in_ECX + 0x3a) < uVar1) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 0;
      FUN_0081d120(local_68);
      local_8._0_1_ = 2;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 3;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else if (uVar1 < *(ushort *)(in_ECX + 0xe)) {
      FUN_00406460(L"IDS_GUI_INPUT_WRONG_ITEM_COUNT");
      local_8 = 4;
      FUN_0081d120(local_4c);
      local_8._0_1_ = 6;
      FUN_00406560();
      uVar2 = FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 7;
      FUN_00405eb0(uVar2,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,6);
      FUN_00406560();
      (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_30,3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    else {
      FUN_009ac1d0();
      (**(code **)(*in_ECX + 0x44))(param_2);
      FUN_009ac1d0();
    }
    break;
  case 0xc386:
    (**(code **)(*in_ECX + 0x20))(local_14);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009a9dd0 : PUSH EBP
009a9dd1 : MOV EBP,ESP
009a9dd3 : PUSH -0x1
009a9dd5 : PUSH 0xb4e527
009a9dda : MOV EAX,FS:[0x0]
009a9de0 : PUSH EAX
009a9de1 : SUB ESP,0x90
009a9de7 : MOV EAX,[0x00d66fa0]
009a9dec : XOR EAX,EBP
009a9dee : MOV dword ptr [EBP + -0x10],EAX
009a9df1 : PUSH EBX
009a9df2 : PUSH ESI
009a9df3 : PUSH EDI
009a9df4 : PUSH EAX
009a9df5 : LEA EAX,[EBP + -0xc]
009a9df8 : MOV FS:[0x0],EAX
009a9dfe : MOV EAX,dword ptr [EBP + 0x8]
009a9e01 : ADD EAX,0xffff3c7e
009a9e06 : MOV EBX,ECX
009a9e08 : CMP EAX,0x4
009a9e0b : JA 0x009a9fae
009a9e11 : JMP dword ptr [EAX*0x4 + 0x9a9fcc]
009a9e18 : MOV EAX,dword ptr [EBP + 0xc]
009a9e1b : CMP AX,word ptr [EBX + 0x3a]
009a9e1f : JNC 0x009a9fae
009a9e25 : LEA ESI,[EAX + 0x1]
009a9e28 : MOV EDI,EBX
009a9e2a : CALL 0x009ac1d0
009a9e2f : JMP 0x009a9fae
009a9e34 : MOV EAX,dword ptr [EBP + 0xc]
009a9e37 : CMP AX,word ptr [EBX + 0x38]
009a9e3b : JBE 0x009a9fae
009a9e41 : CMP AX,0x1
009a9e45 : JBE 0x009a9fae
009a9e4b : LEA ESI,[EAX + -0x1]
009a9e4e : MOV EDI,EBX
009a9e50 : CALL 0x009ac1d0
009a9e55 : JMP 0x009a9fae
009a9e5a : MOV EAX,dword ptr [EBX]
009a9e5c : MOV EDX,dword ptr [EAX + 0x20]
009a9e5f : CALL EDX
009a9e61 : MOV ESI,dword ptr [EBP + 0xc]
009a9e64 : CMP SI,word ptr [EBX + 0x3a]
009a9e68 : JBE 0x009a9ef7
009a9e6e : PUSH 0xc8a5a0
009a9e73 : LEA ECX,[EBP + -0x64]
009a9e76 : CALL 0x00406460
009a9e7b : MOV dword ptr [EBP + -0x4],0x0
009a9e82 : MOV ECX,dword ptr [0x0172491c]
009a9e88 : LEA EAX,[EBP + -0x64]
009a9e8b : PUSH EAX
009a9e8c : LEA EDI,[EBP + -0x2c]
009a9e8f : CALL 0x0081d120
009a9e94 : MOV byte ptr [EBP + -0x4],0x2
009a9e98 : LEA ECX,[EBP + -0x64]
009a9e9b : CALL 0x00406560
009a9ea0 : MOV ECX,dword ptr [0x0172491c]
009a9ea6 : MOV EDX,EDI
009a9ea8 : PUSH ECX
009a9ea9 : LEA EDI,[EBP + -0x80]
009a9eac : CALL 0x00824120
009a9eb1 : MOV byte ptr [EBP + -0x4],0x3
009a9eb5 : PUSH -0x1
009a9eb7 : PUSH 0x0
009a9eb9 : PUSH EAX
009a9eba : LEA ECX,[EBP + -0x2c]
009a9ebd : CALL 0x00405eb0
009a9ec2 : MOV byte ptr [EBP + -0x4],0x2
009a9ec6 : MOV ECX,EDI
009a9ec8 : CALL 0x00406560
009a9ecd : MOV EDX,dword ptr [EBX + 0x4]
009a9ed0 : MOV ECX,dword ptr [EDX + 0x1a8]
009a9ed6 : MOV EAX,dword ptr [ECX]
009a9ed8 : MOV EAX,dword ptr [EAX + 0x44]
009a9edb : PUSH 0x3
009a9edd : LEA EDX,[EBP + -0x2c]
009a9ee0 : PUSH EDX
009a9ee1 : CALL EAX
009a9ee3 : MOV dword ptr [EBP + -0x4],0xffffffff
009a9eea : LEA ECX,[EBP + -0x2c]
009a9eed : CALL 0x00406560
009a9ef2 : JMP 0x009a9fae
009a9ef7 : CMP SI,word ptr [EBX + 0x38]
009a9efb : JNC 0x009a9f8a
009a9f01 : PUSH 0xc8a5e0
009a9f06 : LEA ECX,[EBP + -0x48]
009a9f09 : CALL 0x00406460
009a9f0e : MOV dword ptr [EBP + -0x4],0x4
009a9f15 : LEA ECX,[EBP + -0x48]
009a9f18 : PUSH ECX
009a9f19 : MOV ECX,dword ptr [0x0172491c]
009a9f1f : LEA EDI,[EBP + -0x2c]
009a9f22 : CALL 0x0081d120
009a9f27 : MOV byte ptr [EBP + -0x4],0x6
009a9f2b : LEA ECX,[EBP + -0x48]
009a9f2e : CALL 0x00406560
009a9f33 : MOV EDX,dword ptr [0x0172491c]
009a9f39 : PUSH EDX
009a9f3a : MOV EDX,EDI
009a9f3c : LEA EDI,[EBP + 0xffffff64]
009a9f42 : CALL 0x00824120
009a9f47 : MOV byte ptr [EBP + -0x4],0x7
009a9f4b : PUSH -0x1
009a9f4d : PUSH 0x0
009a9f4f : PUSH EAX
009a9f50 : LEA ECX,[EBP + -0x2c]
009a9f53 : CALL 0x00405eb0
009a9f58 : MOV byte ptr [EBP + -0x4],0x6
009a9f5c : MOV ECX,EDI
009a9f5e : CALL 0x00406560
009a9f63 : MOV EAX,dword ptr [EBX + 0x4]
009a9f66 : MOV ECX,dword ptr [EAX + 0x1a8]
009a9f6c : MOV EDX,dword ptr [ECX]
009a9f6e : MOV EDX,dword ptr [EDX + 0x44]
009a9f71 : PUSH 0x3
009a9f73 : LEA EAX,[EBP + -0x2c]
009a9f76 : PUSH EAX
009a9f77 : CALL EDX
009a9f79 : MOV dword ptr [EBP + -0x4],0xffffffff
009a9f80 : LEA ECX,[EBP + -0x2c]
009a9f83 : CALL 0x00406560
009a9f88 : JMP 0x009a9fae
009a9f8a : MOV EDI,EBX
009a9f8c : CALL 0x009ac1d0
009a9f91 : MOV EAX,dword ptr [EBX]
009a9f93 : MOV EDX,dword ptr [EAX + 0x44]
009a9f96 : PUSH ESI
009a9f97 : MOV ECX,EBX
009a9f99 : CALL EDX
009a9f9b : MOV ESI,0x1
009a9fa0 : CALL 0x009ac1d0
009a9fa5 : JMP 0x009a9fae
009a9fa7 : MOV EAX,dword ptr [EBX]
009a9fa9 : MOV EDX,dword ptr [EAX + 0x20]
009a9fac : CALL EDX
009a9fae : MOV ECX,dword ptr [EBP + -0xc]
009a9fb1 : MOV dword ptr FS:[0x0],ECX
009a9fb8 : POP ECX
009a9fb9 : POP EDI
009a9fba : POP ESI
009a9fbb : POP EBX
009a9fbc : MOV ECX,dword ptr [EBP + -0x10]
009a9fbf : XOR ECX,EBP
009a9fc1 : CALL 0x00633e6b
009a9fc6 : MOV ESP,EBP
009a9fc8 : POP EBP
009a9fc9 : RET 0x8
