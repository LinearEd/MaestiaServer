PROGRAM  : Maestia.exe
FUNCTION : FUN_00424200
ENTRY    : 00424200
BODY     : [[00424200, 00424335] [00424347, 0042443b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00424200(uint param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  uint uVar6;
  uint extraout_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  uVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7be50;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = *(int *)(param_1 + 4);
  if (iVar3 == 0) {
    uVar6 = 0;
  }
  else {
    uVar6 = *(int *)(param_1 + 0xc) - iVar3 >> 4;
  }
  iVar1 = *(int *)(param_1 + 8);
  iVar3 = iVar1 - iVar3 >> 4;
  if (iVar3 == 0xfffffff) {
    iVar3 = FUN_00429be0();
    uVar6 = extraout_ECX;
  }
  uVar4 = iVar3 + 1;
  if (uVar6 < uVar4) {
    if (0xfffffff - (uVar6 >> 1) < uVar6) {
      param_1 = 0;
    }
    else {
      param_1 = uVar6 + (uVar6 >> 1);
    }
    if (param_1 < uVar4) {
      param_1 = uVar4;
    }
    iVar3 = FUN_00424e80();
    local_8 = 0;
    FUN_00423d70();
    FUN_00424e10(*(undefined4 *)(uVar2 + 4),param_2);
    FUN_00424e10(param_2,*(undefined4 *)(uVar2 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(uVar2 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(uVar2 + 0xc) = param_1 * 0x10 + iVar3;
    *(int *)(uVar2 + 8) = ((*(int *)(uVar2 + 8) - *(int *)(uVar2 + 4) >> 4) + 1) * 0x10 + iVar3;
    *(int *)(uVar2 + 4) = iVar3;
    ExceptionList = local_10;
    return;
  }
  if (iVar1 - param_2 >> 4 == 0) {
    FUN_00424e10(param_2,iVar1);
    local_8 = 2;
    FUN_00423d70();
    local_8 = 0xffffffff;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
    FUN_00424e40(param_2);
    ExceptionList = local_10;
    return;
  }
  uVar5 = FUN_00424e10(iVar1 + -0x10,iVar1);
  *(undefined4 *)(param_1 + 8) = uVar5;
  param_1 = param_1 & 0xffffff00;
  FUN_00424fd0(param_2,param_2,param_1);
  FUN_00424e40(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00424200 : PUSH EBP
00424201 : MOV EBP,ESP
00424203 : PUSH -0x1
00424205 : PUSH 0xb7be50
0042420a : MOV EAX,FS:[0x0]
00424210 : PUSH EAX
00424211 : SUB ESP,0x24
00424214 : PUSH EBX
00424215 : PUSH ESI
00424216 : PUSH EDI
00424217 : MOV EAX,[0x00d66fa0]
0042421c : XOR EAX,EBP
0042421e : PUSH EAX
0042421f : LEA EAX,[EBP + -0xc]
00424222 : MOV FS:[0x0],EAX
00424228 : MOV dword ptr [EBP + -0x10],ESP
0042422b : MOV ESI,ECX
0042422d : MOV EBX,dword ptr [EBP + 0x8]
00424230 : MOV EDX,dword ptr [EBX + 0x4]
00424233 : TEST EDX,EDX
00424235 : JNZ 0x0042423b
00424237 : XOR ECX,ECX
00424239 : JMP 0x00424245
0042423b : MOV EAX,dword ptr [EBX + 0xc]
0042423e : SUB EAX,EDX
00424240 : SAR EAX,0x4
00424243 : MOV ECX,EAX
00424245 : MOV EDI,dword ptr [EBX + 0x8]
00424248 : MOV EAX,EDI
0042424a : SUB EAX,EDX
0042424c : SAR EAX,0x4
0042424f : MOV EDX,0xfffffff
00424254 : SUB EDX,EAX
00424256 : CMP EDX,0x1
00424259 : JNC 0x00424260
0042425b : CALL 0x00429be0
00424260 : INC EAX
00424261 : CMP ECX,EAX
00424263 : JNC 0x00424347
00424269 : MOV EDX,ECX
0042426b : SHR EDX,0x1
0042426d : MOV EDI,0xfffffff
00424272 : SUB EDI,EDX
00424274 : CMP EDI,ECX
00424276 : JNC 0x00424284
00424278 : MOV dword ptr [EBP + 0x8],0x0
0042427f : MOV ECX,dword ptr [EBP + 0x8]
00424282 : JMP 0x00424289
00424284 : ADD ECX,EDX
00424286 : MOV dword ptr [EBP + 0x8],ECX
00424289 : CMP ECX,EAX
0042428b : JNC 0x00424292
0042428d : MOV dword ptr [EBP + 0x8],EAX
00424290 : MOV ECX,EAX
00424292 : CALL 0x00424e80
00424297 : MOV dword ptr [EBP + -0x14],EAX
0042429a : MOV EDI,dword ptr [EBP + 0xc]
0042429d : SUB EDI,dword ptr [EBX + 0x4]
004242a0 : SAR EDI,0x4
004242a3 : MOV dword ptr [EBP + -0x1c],EDI
004242a6 : MOV dword ptr [EBP + -0x4],0x0
004242ad : SHL EDI,0x4
004242b0 : ADD EDI,EAX
004242b2 : MOV EDX,ESI
004242b4 : MOV ESI,0x1
004242b9 : CALL 0x00423d70
004242be : MOV dword ptr [EBP + -0x18],ESI
004242c1 : MOV EAX,dword ptr [EBP + 0xc]
004242c4 : PUSH EAX
004242c5 : MOV ECX,dword ptr [EBX + 0x4]
004242c8 : PUSH ECX
004242c9 : MOV EDI,dword ptr [EBP + -0x14]
004242cc : MOV EDX,EDI
004242ce : CALL 0x00424e10
004242d3 : MOV dword ptr [EBP + -0x18],0x2
004242da : MOV EDX,dword ptr [EBP + -0x1c]
004242dd : INC EDX
004242de : SHL EDX,0x4
004242e1 : ADD EDX,EDI
004242e3 : MOV EAX,dword ptr [EBX + 0x8]
004242e6 : PUSH EAX
004242e7 : MOV ECX,dword ptr [EBP + 0xc]
004242ea : PUSH ECX
004242eb : CALL 0x00424e10
004242f0 : MOV dword ptr [EBP + -0x4],0xffffffff
004242f7 : MOV ECX,dword ptr [EBX + 0x4]
004242fa : MOV ESI,dword ptr [EBX + 0x8]
004242fd : SUB ESI,ECX
004242ff : SAR ESI,0x4
00424302 : INC ESI
00424303 : TEST ECX,ECX
00424305 : JZ 0x0042430c
00424307 : CALL 0x006f04e0
0042430c : MOV EAX,dword ptr [EBP + 0x8]
0042430f : SHL EAX,0x4
00424312 : ADD EAX,EDI
00424314 : MOV dword ptr [EBX + 0xc],EAX
00424317 : SHL ESI,0x4
0042431a : ADD ESI,EDI
0042431c : MOV dword ptr [EBX + 0x8],ESI
0042431f : MOV dword ptr [EBX + 0x4],EDI
00424322 : MOV ECX,dword ptr [EBP + -0xc]
00424325 : MOV dword ptr FS:[0x0],ECX
0042432c : POP ECX
0042432d : POP EDI
0042432e : POP ESI
0042432f : POP EBX
00424330 : MOV ESP,EBP
00424332 : POP EBP
00424333 : RET 0x8
00424347 : MOV EDX,EDI
00424349 : MOV EAX,dword ptr [EBP + 0xc]
0042434c : SUB EDX,EAX
0042434e : SAR EDX,0x4
00424351 : MOV ECX,dword ptr [ESI]
00424353 : MOVSS XMM0,dword ptr [ESI + 0x4]
00424358 : PUSH EDI
00424359 : MOV dword ptr [EBP + -0x2c],ECX
0042435c : MOVSS dword ptr [EBP + -0x28],XMM0
00424361 : CMP EDX,0x1
00424364 : JNC 0x004243d8
00424366 : MOVSS XMM1,dword ptr [ESI + 0x8]
0042436b : MOVSS XMM2,dword ptr [ESI + 0xc]
00424370 : MOVSS dword ptr [EBP + -0x24],XMM1
00424375 : MOVSS dword ptr [EBP + -0x20],XMM2
0042437a : LEA EDX,[EAX + 0x10]
0042437d : PUSH EAX
0042437e : CALL 0x00424e10
00424383 : MOV dword ptr [EBP + -0x4],0x2
0042438a : MOV EDI,dword ptr [EBX + 0x8]
0042438d : MOV EDX,EDI
0042438f : SUB EDX,dword ptr [EBP + 0xc]
00424392 : SAR EDX,0x4
00424395 : MOV ESI,0x1
0042439a : SUB ESI,EDX
0042439c : LEA EDX,[EBP + -0x2c]
0042439f : CALL 0x00423d70
004243a4 : MOV dword ptr [EBP + -0x4],0xffffffff
004243ab : ADD dword ptr [EBX + 0x8],0x10
004243af : MOV EBX,dword ptr [EBX + 0x8]
004243b2 : LEA EDX,[EBX + -0x10]
004243b5 : MOV EAX,dword ptr [EBP + 0xc]
004243b8 : PUSH EAX
004243b9 : LEA ECX,[EBP + -0x2c]
004243bc : CALL 0x00424e40
004243c1 : ADD ESP,0x4
004243c4 : MOV ECX,dword ptr [EBP + -0xc]
004243c7 : MOV dword ptr FS:[0x0],ECX
004243ce : POP ECX
004243cf : POP EDI
004243d0 : POP ESI
004243d1 : POP EBX
004243d2 : MOV ESP,EBP
004243d4 : POP EBP
004243d5 : RET 0x8
004243d8 : MOVSS XMM0,dword ptr [ESI + 0x8]
004243dd : MOVSS dword ptr [EBP + -0x24],XMM0
004243e2 : MOVSS XMM0,dword ptr [ESI + 0xc]
004243e7 : MOVSS dword ptr [EBP + -0x20],XMM0
004243ec : LEA ESI,[EDI + -0x10]
004243ef : PUSH ESI
004243f0 : MOV EDX,EDI
004243f2 : CALL 0x00424e10
004243f7 : MOV dword ptr [EBX + 0x8],EAX
004243fa : MOV byte ptr [EBP + 0x8],0x0
004243fe : MOV EDX,dword ptr [EBP + 0x8]
00424401 : PUSH EDX
00424402 : MOV EAX,dword ptr [EBP + 0xc]
00424405 : PUSH EAX
00424406 : MOV ECX,dword ptr [EBP + 0xc]
00424409 : PUSH ECX
0042440a : MOV EAX,EDI
0042440c : MOV ECX,ESI
0042440e : MOV EDI,dword ptr [EBP + 0xc]
00424411 : CALL 0x00424fd0
00424416 : MOV EAX,dword ptr [EBP + 0xc]
00424419 : LEA EDX,[EAX + 0x10]
0042441c : PUSH EAX
0042441d : LEA ECX,[EBP + -0x2c]
00424420 : CALL 0x00424e40
00424425 : ADD ESP,0x10
00424428 : MOV ECX,dword ptr [EBP + -0xc]
0042442b : MOV dword ptr FS:[0x0],ECX
00424432 : POP ECX
00424433 : POP EDI
00424434 : POP ESI
00424435 : POP EBX
00424436 : MOV ESP,EBP
00424438 : POP EBP
00424439 : RET 0x8
