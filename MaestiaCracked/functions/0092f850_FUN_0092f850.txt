PROGRAM  : Maestia.exe
FUNCTION : FUN_0092f850
ENTRY    : 0092f850
BODY     : [[0092f850, 0092fc0c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0092f850(uint param_1)

{
  ushort uVar1;
  int iVar2;
  undefined4 *puVar3;
  uint uVar4;
  char cVar5;
  undefined4 uVar6;
  int *piVar7;
  int iVar8;
  int *in_ECX;
  uint uVar9;
  undefined1 local_38 [28];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b63bf3;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (((char)in_ECX[2] != '\0') && (iVar2 = *(int *)(in_ECX[1] + 0x128), iVar2 != 0)) {
    local_14 = (param_1 & 0xffff) / 10;
    uVar9 = (param_1 & 0xffff) % 10;
    local_18 = uVar9;
    local_1c = (**(code **)(*in_ECX + 0x74))
                         (uVar9,(short)in_ECX[0x14],DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    if ((*(int *)(iVar2 + 0x40) == 0x80) &&
       (cVar5 = FUN_00907c00((short)in_ECX[0x14]), cVar5 != '\0')) {
      ExceptionList = local_10;
      return;
    }
    if (((local_1c != 0) && (*(char *)(local_1c + 0x3c) != '\0')) ||
       ((iVar8 = *(int *)(iVar2 + 0x4c), iVar8 != 0 && (*(char *)(iVar8 + 0x3c) != '\0')))) {
      FUN_00406460(L"IDS_DISABLE_MOVE_ITEM");
      local_8 = 0;
      piVar7 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar6 = FUN_0081d120(local_38);
      local_8._0_1_ = 1;
      (**(code **)(*piVar7 + 0x44))(uVar6,3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      if (*DAT_00da9894 == 0) {
        ExceptionList = local_10;
        return;
      }
      puVar3 = *(undefined4 **)(*DAT_00da9894 + 0x114);
      if (puVar3 == (undefined4 *)0x0) {
        ExceptionList = local_10;
        return;
      }
      (**(code **)*puVar3)("MoveSlotDragStop");
      ExceptionList = local_10;
      return;
    }
    uVar4 = *(uint *)(iVar2 + 0x40);
    if (uVar4 < 0x92) {
      if (uVar4 == 0x91) {
        uVar1 = *(ushort *)(in_ECX + 0x14);
        if ((uVar1 != 0) && (uVar1 < 4)) {
          local_14 = (uint)uVar1;
        }
        if (iVar8 == 0) {
          uVar6 = 0;
        }
        else {
          uVar6 = *(undefined4 *)(iVar8 + 0x10);
        }
        FUN_008ef880(0x91,uVar6,uVar9,local_14);
        ExceptionList = local_10;
        return;
      }
      if (uVar4 == 0x80) {
        uVar1 = *(ushort *)(in_ECX + 0x14);
        if ((uVar1 != 0) && (uVar1 < 4)) {
          param_1 = uVar9 + (uint)uVar1 * 10;
        }
        if (*(short *)(iVar2 + 0x48) != (short)param_1) {
          FUN_008efa90(0x80,*(undefined2 *)(iVar2 + 0x44),*(undefined2 *)(iVar2 + 0x46),0x80,
                       (param_1 & 0xffff) % 10,(param_1 & 0xffff) / 10);
          ExceptionList = local_10;
          return;
        }
        goto LAB_0092fa4a;
      }
      if (uVar4 == 0x90) {
        if (iVar8 == 0) {
          uVar6 = 0;
        }
        else {
          uVar6 = *(undefined4 *)(iVar8 + 0x10);
        }
        piVar7 = (int *)FUN_004049b0(uVar6);
        if ((piVar7 == (int *)0x0) || (iVar8 = (**(code **)(*piVar7 + 0x3c))(), iVar8 == 0)) {
          uVar1 = *(ushort *)(in_ECX + 0x14);
          if ((uVar1 != 0) && (uVar1 < 4)) {
            local_14 = (uint)uVar1;
          }
          if (*(int *)(iVar2 + 0x4c) == 0) {
            uVar6 = 0;
          }
          else {
            uVar6 = *(undefined4 *)(*(int *)(iVar2 + 0x4c) + 0x10);
          }
          FUN_008ef880(0x90,uVar6,uVar9,local_14);
          ExceptionList = local_10;
          return;
        }
        FUN_00406460(L"IDS_GUI_PASSIVESKILL_CANT_REGIST");
        local_8 = 2;
        piVar7 = *(int **)(in_ECX[1] + 0x1a8);
        uVar6 = FUN_0081d120(local_38);
        local_8._0_1_ = 3;
        (**(code **)(*piVar7 + 0x44))(uVar6,3);
        local_8 = CONCAT31(local_8._1_3_,2);
        FUN_00406560();
        local_8 = 0xffffffff;
        FUN_00406560();
        goto LAB_0092fa4a;
      }
    }
    else if (uVar4 == 0xffffffff) {
      if (local_1c == 0) {
        ExceptionList = local_10;
        return;
      }
      FUN_0097fb30(local_1c,uVar9,(short)in_ECX[0x14]);
      ExceptionList = local_10;
      return;
    }
    iVar8 = FUN_008eb580();
    if (iVar8 != 0) {
      cVar5 = FUN_00930c10(in_ECX[0x13]);
      if (cVar5 != '\0') {
        if ((*(int *)(iVar2 + 0x4c) == 0) || (*(char *)(*(int *)(iVar2 + 0x4c) + 0x12) != 'd')) {
          uVar1 = *(ushort *)(in_ECX + 0x14);
          if ((uVar1 == 0) || (uVar9 = (uint)uVar1, 3 < uVar1)) {
            uVar9 = local_14;
          }
          FUN_008efa90(*(undefined4 *)(iVar2 + 0x40),*(undefined2 *)(iVar2 + 0x44),
                       *(undefined2 *)(iVar2 + 0x46),0x80,local_18,uVar9);
          ExceptionList = local_10;
          return;
        }
      }
LAB_0092fa4a:
      FUN_0097fa60();
      ExceptionList = local_10;
      return;
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0092f850 : PUSH EBP
0092f851 : MOV EBP,ESP
0092f853 : PUSH -0x1
0092f855 : PUSH 0xb63bf3
0092f85a : MOV EAX,FS:[0x0]
0092f860 : PUSH EAX
0092f861 : SUB ESP,0x48
0092f864 : PUSH EBX
0092f865 : PUSH ESI
0092f866 : PUSH EDI
0092f867 : MOV EAX,[0x00d66fa0]
0092f86c : XOR EAX,EBP
0092f86e : PUSH EAX
0092f86f : LEA EAX,[EBP + -0xc]
0092f872 : MOV FS:[0x0],EAX
0092f878 : MOV ESI,ECX
0092f87a : MOV AL,byte ptr [ESI + 0x8]
0092f87d : TEST AL,AL
0092f87f : JZ 0x0092fbf9
0092f885 : MOV EAX,dword ptr [ESI + 0x4]
0092f888 : MOV EBX,dword ptr [EAX + 0x128]
0092f88e : TEST EBX,EBX
0092f890 : JZ 0x0092fbf9
0092f896 : MOVZX EAX,word ptr [EBP + 0x8]
0092f89a : CDQ
0092f89b : MOV ECX,0xa
0092f8a0 : IDIV ECX
0092f8a2 : MOV ECX,ESI
0092f8a4 : MOVZX EAX,AX
0092f8a7 : MOV dword ptr [EBP + -0x10],EAX
0092f8aa : MOVZX EAX,word ptr [ESI + 0x50]
0092f8ae : MOVZX EDI,DX
0092f8b1 : MOV EDX,dword ptr [ESI]
0092f8b3 : MOV EDX,dword ptr [EDX + 0x74]
0092f8b6 : PUSH EAX
0092f8b7 : PUSH EDI
0092f8b8 : MOV dword ptr [EBP + -0x14],EDI
0092f8bb : CALL EDX
0092f8bd : MOV ECX,dword ptr [EBX + 0x40]
0092f8c0 : MOVZX EDX,word ptr [ESI + 0x50]
0092f8c4 : MOV dword ptr [EBP + -0x18],EAX
0092f8c7 : CMP ECX,0x80
0092f8cd : JNZ 0x0092f8e2
0092f8cf : PUSH EDX
0092f8d0 : MOV ECX,EBX
0092f8d2 : CALL 0x00907c00
0092f8d7 : TEST AL,AL
0092f8d9 : JNZ 0x0092fbf9
0092f8df : MOV EAX,dword ptr [EBP + -0x18]
0092f8e2 : TEST EAX,EAX
0092f8e4 : JZ 0x0092f8ec
0092f8e6 : CMP byte ptr [EAX + 0x3c],0x0
0092f8ea : JNZ 0x0092f901
0092f8ec : MOV EDX,dword ptr [EBX + 0x4c]
0092f8ef : TEST EDX,EDX
0092f8f1 : JZ 0x0092f99d
0092f8f7 : CMP byte ptr [EDX + 0x3c],0x0
0092f8fb : JZ 0x0092f99d
0092f901 : PUSH 0xc6db54
0092f906 : LEA ECX,[EBP + -0x34]
0092f909 : CALL 0x00406460
0092f90e : MOV dword ptr [EBP + -0x4],0x0
0092f915 : MOV EAX,[0x00da9894]
0092f91a : MOV EAX,dword ptr [EAX]
0092f91c : MOV ESI,dword ptr [EAX + 0x1a8]
0092f922 : LEA ECX,[EBP + -0x34]
0092f925 : PUSH ECX
0092f926 : MOV ECX,dword ptr [0x0172491c]
0092f92c : LEA EDI,[EBP + -0x50]
0092f92f : CALL 0x0081d120
0092f934 : MOV byte ptr [EBP + -0x4],0x1
0092f938 : MOV EDX,dword ptr [ESI]
0092f93a : PUSH 0x3
0092f93c : PUSH EAX
0092f93d : MOV EAX,dword ptr [EDX + 0x44]
0092f940 : MOV ECX,ESI
0092f942 : CALL EAX
0092f944 : MOV byte ptr [EBP + -0x4],0x0
0092f948 : MOV ECX,EDI
0092f94a : CALL 0x00406560
0092f94f : MOV dword ptr [EBP + -0x4],0xffffffff
0092f956 : LEA ECX,[EBP + -0x34]
0092f959 : CALL 0x00406560
0092f95e : MOV ECX,dword ptr [0x00da9894]
0092f964 : MOV EAX,dword ptr [ECX]
0092f966 : TEST EAX,EAX
0092f968 : JZ 0x0092fbf9
0092f96e : MOV EAX,dword ptr [EAX + 0x114]
0092f974 : TEST EAX,EAX
0092f976 : JZ 0x0092fbf9
0092f97c : MOV EDX,dword ptr [EAX]
0092f97e : MOV ECX,EAX
0092f980 : MOV EAX,dword ptr [EDX]
0092f982 : PUSH 0xc6db80
0092f987 : CALL EAX
0092f989 : MOV ECX,dword ptr [EBP + -0xc]
0092f98c : MOV dword ptr FS:[0x0],ECX
0092f993 : POP ECX
0092f994 : POP EDI
0092f995 : POP ESI
0092f996 : POP EBX
0092f997 : MOV ESP,EBP
0092f999 : POP EBP
0092f99a : RET 0x4
0092f99d : MOV ECX,dword ptr [EBX + 0x40]
0092f9a0 : CMP ECX,0x91
0092f9a6 : JA 0x0092fb5e
0092f9ac : JZ 0x0092fb17
0092f9b2 : MOV EAX,ECX
0092f9b4 : SUB EAX,0x80
0092f9b9 : JZ 0x0092faaf
0092f9bf : SUB EAX,0x10
0092f9c2 : JNZ 0x0092fb63
0092f9c8 : TEST EDX,EDX
0092f9ca : JZ 0x0092f9d1
0092f9cc : MOV EDX,dword ptr [EDX + 0x10]
0092f9cf : JMP 0x0092f9d3
0092f9d1 : XOR EDX,EDX
0092f9d3 : PUSH EDX
0092f9d4 : CALL 0x004049b0
0092f9d9 : ADD ESP,0x4
0092f9dc : TEST EAX,EAX
0092f9de : JZ 0x0092fa65
0092f9e4 : MOV EDX,dword ptr [EAX]
0092f9e6 : MOV ECX,EAX
0092f9e8 : MOV EAX,dword ptr [EDX + 0x3c]
0092f9eb : CALL EAX
0092f9ed : TEST EAX,EAX
0092f9ef : JZ 0x0092fa65
0092f9f1 : PUSH 0xc6db98
0092f9f6 : LEA ECX,[EBP + -0x34]
0092f9f9 : CALL 0x00406460
0092f9fe : MOV dword ptr [EBP + -0x4],0x2
0092fa05 : MOV ECX,dword ptr [ESI + 0x4]
0092fa08 : MOV ESI,dword ptr [ECX + 0x1a8]
0092fa0e : MOV ECX,dword ptr [0x0172491c]
0092fa14 : LEA EDX,[EBP + -0x34]
0092fa17 : PUSH EDX
0092fa18 : LEA EDI,[EBP + -0x50]
0092fa1b : CALL 0x0081d120
0092fa20 : MOV byte ptr [EBP + -0x4],0x3
0092fa24 : MOV EDX,dword ptr [ESI]
0092fa26 : PUSH 0x3
0092fa28 : PUSH EAX
0092fa29 : MOV EAX,dword ptr [EDX + 0x44]
0092fa2c : MOV ECX,ESI
0092fa2e : CALL EAX
0092fa30 : MOV byte ptr [EBP + -0x4],0x2
0092fa34 : MOV ECX,EDI
0092fa36 : CALL 0x00406560
0092fa3b : MOV dword ptr [EBP + -0x4],0xffffffff
0092fa42 : LEA ECX,[EBP + -0x34]
0092fa45 : CALL 0x00406560
0092fa4a : MOV ECX,EBX
0092fa4c : CALL 0x0097fa60
0092fa51 : MOV ECX,dword ptr [EBP + -0xc]
0092fa54 : MOV dword ptr FS:[0x0],ECX
0092fa5b : POP ECX
0092fa5c : POP EDI
0092fa5d : POP ESI
0092fa5e : POP EBX
0092fa5f : MOV ESP,EBP
0092fa61 : POP EBP
0092fa62 : RET 0x4
0092fa65 : MOVZX EAX,word ptr [ESI + 0x50]
0092fa69 : TEST AX,AX
0092fa6c : JBE 0x0092fa7a
0092fa6e : CMP AX,0x4
0092fa72 : JNC 0x0092fa7a
0092fa74 : MOVZX ECX,AX
0092fa77 : MOV dword ptr [EBP + -0x10],ECX
0092fa7a : MOV EBX,dword ptr [EBX + 0x4c]
0092fa7d : TEST EBX,EBX
0092fa7f : JZ 0x0092fa86
0092fa81 : MOV EBX,dword ptr [EBX + 0x10]
0092fa84 : JMP 0x0092fa88
0092fa86 : XOR EBX,EBX
0092fa88 : MOV EDX,dword ptr [EBP + -0x10]
0092fa8b : PUSH EDX
0092fa8c : PUSH EDI
0092fa8d : PUSH EBX
0092fa8e : PUSH 0x90
0092fa93 : CALL 0x008ef880
0092fa98 : ADD ESP,0x10
0092fa9b : MOV ECX,dword ptr [EBP + -0xc]
0092fa9e : MOV dword ptr FS:[0x0],ECX
0092faa5 : POP ECX
0092faa6 : POP EDI
0092faa7 : POP ESI
0092faa8 : POP EBX
0092faa9 : MOV ESP,EBP
0092faab : POP EBP
0092faac : RET 0x4
0092faaf : MOVZX EAX,word ptr [ESI + 0x50]
0092fab3 : TEST AX,AX
0092fab6 : JBE 0x0092facd
0092fab8 : CMP AX,0x4
0092fabc : JNC 0x0092facd
0092fabe : MOVZX EAX,AX
0092fac1 : MOVZX ECX,DI
0092fac4 : LEA EAX,[EAX + EAX*0x4]
0092fac7 : LEA EDX,[ECX + EAX*0x2]
0092faca : MOV dword ptr [EBP + 0x8],EDX
0092facd : MOV EAX,dword ptr [EBP + 0x8]
0092fad0 : CMP word ptr [EBX + 0x48],AX
0092fad4 : JZ 0x0092fa4a
0092fada : MOVZX EAX,AX
0092fadd : CDQ
0092fade : MOV ECX,0xa
0092fae3 : IDIV ECX
0092fae5 : PUSH EAX
0092fae6 : MOVZX EAX,word ptr [EBX + 0x44]
0092faea : PUSH EDX
0092faeb : MOVZX EDX,word ptr [EBX + 0x46]
0092faef : PUSH 0x80
0092faf4 : PUSH EDX
0092faf5 : PUSH EAX
0092faf6 : PUSH 0x80
0092fafb : CALL 0x008efa90
0092fb00 : ADD ESP,0x18
0092fb03 : MOV ECX,dword ptr [EBP + -0xc]
0092fb06 : MOV dword ptr FS:[0x0],ECX
0092fb0d : POP ECX
0092fb0e : POP EDI
0092fb0f : POP ESI
0092fb10 : POP EBX
0092fb11 : MOV ESP,EBP
0092fb13 : POP EBP
0092fb14 : RET 0x4
0092fb17 : MOVZX EAX,word ptr [ESI + 0x50]
0092fb1b : TEST AX,AX
0092fb1e : JBE 0x0092fb2c
0092fb20 : CMP AX,0x4
0092fb24 : JNC 0x0092fb2c
0092fb26 : MOVZX ECX,AX
0092fb29 : MOV dword ptr [EBP + -0x10],ECX
0092fb2c : TEST EDX,EDX
0092fb2e : JZ 0x0092fb35
0092fb30 : MOV EDX,dword ptr [EDX + 0x10]
0092fb33 : JMP 0x0092fb37
0092fb35 : XOR EDX,EDX
0092fb37 : MOV EAX,dword ptr [EBP + -0x10]
0092fb3a : PUSH EAX
0092fb3b : PUSH EDI
0092fb3c : PUSH EDX
0092fb3d : PUSH 0x91
0092fb42 : CALL 0x008ef880
0092fb47 : ADD ESP,0x10
0092fb4a : MOV ECX,dword ptr [EBP + -0xc]
0092fb4d : MOV dword ptr FS:[0x0],ECX
0092fb54 : POP ECX
0092fb55 : POP EDI
0092fb56 : POP ESI
0092fb57 : POP EBX
0092fb58 : MOV ESP,EBP
0092fb5a : POP EBP
0092fb5b : RET 0x4
0092fb5e : CMP ECX,-0x1
0092fb61 : JZ 0x0092fbe2
0092fb63 : MOV EAX,dword ptr [ESI + 0x4]
0092fb66 : MOV EDI,ECX
0092fb68 : CALL 0x008eb580
0092fb6d : TEST EAX,EAX
0092fb6f : JZ 0x0092fbf9
0092fb75 : MOV ECX,dword ptr [ESI + 0x4c]
0092fb78 : PUSH ECX
0092fb79 : MOV ECX,EBX
0092fb7b : CALL 0x00930c10
0092fb80 : TEST AL,AL
0092fb82 : JZ 0x0092fa4a
0092fb88 : MOV EAX,dword ptr [EBX + 0x4c]
0092fb8b : MOVZX ECX,word ptr [EBX + 0x44]
0092fb8f : MOVZX EDX,word ptr [EBX + 0x46]
0092fb93 : TEST EAX,EAX
0092fb95 : JZ 0x0092fba1
0092fb97 : CMP byte ptr [EAX + 0x12],0x64
0092fb9b : JZ 0x0092fa4a
0092fba1 : MOVZX EAX,word ptr [ESI + 0x50]
0092fba5 : TEST AX,AX
0092fba8 : JBE 0x0092fbb3
0092fbaa : CMP AX,0x4
0092fbae : MOVZX EAX,AX
0092fbb1 : JC 0x0092fbb6
0092fbb3 : MOV EAX,dword ptr [EBP + -0x10]
0092fbb6 : PUSH EAX
0092fbb7 : MOV EAX,dword ptr [EBP + -0x14]
0092fbba : PUSH EAX
0092fbbb : PUSH 0x80
0092fbc0 : PUSH EDX
0092fbc1 : PUSH ECX
0092fbc2 : MOV ECX,dword ptr [EBX + 0x40]
0092fbc5 : PUSH ECX
0092fbc6 : CALL 0x008efa90
0092fbcb : ADD ESP,0x18
0092fbce : MOV ECX,dword ptr [EBP + -0xc]
0092fbd1 : MOV dword ptr FS:[0x0],ECX
0092fbd8 : POP ECX
0092fbd9 : POP EDI
0092fbda : POP ESI
0092fbdb : POP EBX
0092fbdc : MOV ESP,EBP
0092fbde : POP EBP
0092fbdf : RET 0x4
0092fbe2 : TEST EAX,EAX
0092fbe4 : JZ 0x0092fbf9
0092fbe6 : MOVZX EDX,word ptr [ESI + 0x50]
0092fbea : PUSH EDX
0092fbeb : PUSH EDI
0092fbec : PUSH EAX
0092fbed : MOV EAX,0x80
0092fbf2 : MOV ECX,EBX
0092fbf4 : CALL 0x0097fb30
0092fbf9 : MOV ECX,dword ptr [EBP + -0xc]
0092fbfc : MOV dword ptr FS:[0x0],ECX
0092fc03 : POP ECX
0092fc04 : POP EDI
0092fc05 : POP ESI
0092fc06 : POP EBX
0092fc07 : MOV ESP,EBP
0092fc09 : POP EBP
0092fc0a : RET 0x4
