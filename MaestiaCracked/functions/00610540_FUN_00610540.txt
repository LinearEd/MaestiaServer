PROGRAM  : Maestia.exe
FUNCTION : FUN_00610540
ENTRY    : 00610540
BODY     : [[00610540, 00610640]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00610540(uint param_1,int *param_2)

{
  int *piVar1;
  int in_ECX;
  int iVar2;
  uint *puVar3;
  uint uVar4;
  int *piVar5;
  int *piVar6;
  int local_38 [7];
  int local_1c [7];
  
  piVar1 = (int *)(*(int *)(*(int *)(in_ECX + 0x50) + (param_1 >> 8) * 4) + (param_1 & 0xff) * 0x1c)
  ;
  piVar5 = piVar1;
  piVar6 = local_38;
  for (iVar2 = 7; iVar2 != 0; iVar2 = iVar2 + -1) {
    *piVar6 = *piVar5;
    piVar5 = piVar5 + 1;
    piVar6 = piVar6 + 1;
  }
  piVar5 = piVar1;
  piVar6 = local_1c;
  for (iVar2 = 7; iVar2 != 0; iVar2 = iVar2 + -1) {
    *piVar6 = *piVar5;
    piVar5 = piVar5 + 1;
    piVar6 = piVar6 + 1;
  }
  local_38[3] = param_2[1];
  local_38[0] = local_38[0] + *param_2;
  local_38[2] = local_38[2] - *param_2;
  local_1c[1] = local_1c[1] + local_38[3];
  local_1c[3] = local_1c[3] - local_38[3];
  puVar3 = (uint *)(in_ECX + 0x44);
  uVar4 = *(uint *)(in_ECX + 0x44) >> 8;
  if (*(uint *)(in_ECX + 0x48) <= uVar4) {
    FUN_0060ff30(uVar4);
  }
  piVar5 = local_38;
  piVar6 = (int *)(*(int *)(*(int *)(in_ECX + 0x50) + uVar4 * 4) + (*puVar3 & 0xff) * 0x1c);
  for (iVar2 = 7; iVar2 != 0; iVar2 = iVar2 + -1) {
    *piVar6 = *piVar5;
    piVar5 = piVar5 + 1;
    piVar6 = piVar6 + 1;
  }
  *puVar3 = *puVar3 + 1;
  uVar4 = *puVar3 >> 8;
  if (*(uint *)(in_ECX + 0x48) <= uVar4) {
    FUN_0060ff30(uVar4);
  }
  piVar5 = local_1c;
  piVar6 = (int *)(*(int *)(*(int *)(in_ECX + 0x50) + uVar4 * 4) + (*puVar3 & 0xff) * 0x1c);
  for (iVar2 = 7; iVar2 != 0; iVar2 = iVar2 + -1) {
    *piVar6 = *piVar5;
    piVar5 = piVar5 + 1;
    piVar6 = piVar6 + 1;
  }
  *puVar3 = *puVar3 + 1;
  piVar1[2] = *param_2;
  piVar1[3] = param_2[1];
  piVar1[4] = param_2[2];
  piVar1[5] = *puVar3 - 2;
  piVar1[6] = *puVar3 - 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
00610540 : SUB ESP,0x38
00610543 : MOV EAX,dword ptr [ESP + 0x3c]
00610547 : PUSH EBX
00610548 : MOV EBX,ECX
0061054a : MOV EDX,dword ptr [EBX + 0x50]
0061054d : MOV ECX,EAX
0061054f : AND EAX,0xff
00610554 : PUSH EBP
00610555 : PUSH ESI
00610556 : SHR ECX,0x8
00610559 : LEA ESI,[EAX*0x8 + 0x0]
00610560 : SUB ESI,EAX
00610562 : MOV EAX,dword ptr [EDX + ECX*0x4]
00610565 : LEA EBP,[EAX + ESI*0x4]
00610568 : MOV EAX,dword ptr [ESP + 0x4c]
0061056c : PUSH EDI
0061056d : MOV ECX,0x7
00610572 : MOV ESI,EBP
00610574 : LEA EDI,[ESP + 0x10]
00610578 : MOVSD.REP ES:EDI,ESI
0061057a : MOV ECX,0x7
0061057f : MOV ESI,EBP
00610581 : LEA EDI,[ESP + 0x2c]
00610585 : MOVSD.REP ES:EDI,ESI
00610587 : MOV ECX,dword ptr [EAX]
00610589 : MOV EAX,dword ptr [EAX + 0x4]
0061058c : MOV ESI,dword ptr [EBX + 0x44]
0061058f : ADD dword ptr [ESP + 0x10],ECX
00610593 : SUB dword ptr [ESP + 0x18],ECX
00610597 : ADD dword ptr [ESP + 0x30],EAX
0061059b : SUB dword ptr [ESP + 0x38],EAX
0061059f : ADD EBX,0x44
006105a2 : SHR ESI,0x8
006105a5 : MOV dword ptr [ESP + 0x1c],EAX
006105a9 : CMP ESI,dword ptr [EBX + 0x4]
006105ac : JC 0x006105b6
006105ae : PUSH ESI
006105af : MOV ECX,EBX
006105b1 : CALL 0x0060ff30
006105b6 : MOV EAX,dword ptr [EBX]
006105b8 : MOV ECX,dword ptr [EBX + 0xc]
006105bb : AND EAX,0xff
006105c0 : LEA EDX,[EAX*0x8 + 0x0]
006105c7 : SUB EDX,EAX
006105c9 : MOV EAX,dword ptr [ECX + ESI*0x4]
006105cc : LEA EDI,[EAX + EDX*0x4]
006105cf : MOV ECX,0x7
006105d4 : LEA ESI,[ESP + 0x10]
006105d8 : MOVSD.REP ES:EDI,ESI
006105da : INC dword ptr [EBX]
006105dc : MOV ESI,dword ptr [EBX]
006105de : SHR ESI,0x8
006105e1 : CMP ESI,dword ptr [EBX + 0x4]
006105e4 : JC 0x006105ee
006105e6 : PUSH ESI
006105e7 : MOV ECX,EBX
006105e9 : CALL 0x0060ff30
006105ee : MOV EAX,dword ptr [EBX]
006105f0 : MOV ECX,dword ptr [EBX + 0xc]
006105f3 : AND EAX,0xff
006105f8 : LEA EDX,[EAX*0x8 + 0x0]
006105ff : SUB EDX,EAX
00610601 : MOV EAX,dword ptr [ECX + ESI*0x4]
00610604 : LEA EDI,[EAX + EDX*0x4]
00610607 : MOV EAX,dword ptr [ESP + 0x50]
0061060b : MOV ECX,0x7
00610610 : LEA ESI,[ESP + 0x2c]
00610614 : MOVSD.REP ES:EDI,ESI
00610616 : INC dword ptr [EBX]
00610618 : MOV ECX,dword ptr [EAX]
0061061a : MOV dword ptr [EBP + 0x8],ECX
0061061d : MOV EDX,dword ptr [EAX + 0x4]
00610620 : MOV dword ptr [EBP + 0xc],EDX
00610623 : MOV EAX,dword ptr [EAX + 0x8]
00610626 : MOV dword ptr [EBP + 0x10],EAX
00610629 : MOV ECX,dword ptr [EBX]
0061062b : SUB ECX,0x2
0061062e : MOV dword ptr [EBP + 0x14],ECX
00610631 : MOV EDX,dword ptr [EBX]
00610633 : POP EDI
00610634 : DEC EDX
00610635 : POP ESI
00610636 : MOV dword ptr [EBP + 0x18],EDX
00610639 : POP EBP
0061063a : POP EBX
0061063b : ADD ESP,0x38
0061063e : RET 0x8
