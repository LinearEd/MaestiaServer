PROGRAM  : Maestia.exe
FUNCTION : FUN_007d8670
ENTRY    : 007d8670
BODY     : [[007d8670, 007d88bc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007d8670(void)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 *in_ECX;
  undefined1 local_38 [4];
  undefined2 local_34;
  undefined4 local_24;
  uint local_20;
  undefined4 *local_1c;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b28f8c;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_FUN_00cd4978;
  local_8 = 5;
  if (in_ECX[0xa4] != 0) {
    FUN_00406460(L"[AvaSceneNode::~AvaSceneNode] need release EventController");
    local_8._0_1_ = 6;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaLib::AvaSceneNode::~AvaSceneNode",0x62,local_38);
    }
    local_8 = CONCAT31(local_8._1_3_,5);
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_20 = 7;
    local_24 = 0;
    local_34 = 0;
  }
  FUN_007d7940(uVar1);
  FUN_007cde90();
  if ((undefined4 *)in_ECX[0xa2] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)in_ECX[0xa2])(1);
    in_ECX[0xa2] = 0;
  }
  if ((undefined4 *)in_ECX[0xa3] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)in_ECX[0xa3])(1);
    in_ECX[0xa3] = 0;
  }
  local_1c = in_ECX;
  if (in_ECX[2] != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX[2] + 4));
  }
  local_8._0_1_ = 7;
  FUN_00460730(in_ECX + 0x98);
  local_14 = in_ECX[0x99];
  FUN_004402f0();
  in_ECX[0x9f] = 7;
  in_ECX[0xa0] = 8;
  local_8 = CONCAT31(local_8._1_3_,5);
  if (in_ECX[2] != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX[2] + 4));
  }
  if (in_ECX[0x8d] != in_ECX[0x8e]) {
    local_14 = local_14 & 0xffffff00;
    uVar2 = FUN_00461270(in_ECX[0x8e],local_1c,local_1c,local_14);
    FUN_00461370(uVar2,local_1c);
    in_ECX[0x8e] = uVar2;
  }
  if ((undefined4 *)in_ECX[0xad] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)in_ECX[0xad])(1);
    in_ECX[0xad] = 0;
  }
  if ((undefined4 *)in_ECX[0xae] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)in_ECX[0xae])(1);
    in_ECX[0xae] = 0;
  }
  local_8 = CONCAT31(local_8._1_3_,4);
  if (in_ECX[0xaa] != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0xaa] = 0;
  in_ECX[0xab] = 0;
  in_ECX[0xac] = 0;
  local_8._0_1_ = 3;
  FUN_0045fd90(in_ECX + 0x97);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (in_ECX[0x8d] != 0) {
    FUN_00461370(in_ECX[0x8d],local_1c);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x8d] = 0;
  in_ECX[0x8e] = 0;
  in_ECX[0x8f] = 0;
  in_ECX[0x6b] = &PTR_FUN_00cd083c;
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_004bd6c0(in_ECX + 0x60);
  local_8 = 0xffffffff;
  FUN_007ce390();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007d8670 : PUSH EBP
007d8671 : MOV EBP,ESP
007d8673 : PUSH -0x1
007d8675 : PUSH 0xb28f8c
007d867a : MOV EAX,FS:[0x0]
007d8680 : PUSH EAX
007d8681 : SUB ESP,0x2c
007d8684 : PUSH EBX
007d8685 : PUSH ESI
007d8686 : PUSH EDI
007d8687 : MOV EAX,[0x00d66fa0]
007d868c : XOR EAX,EBP
007d868e : PUSH EAX
007d868f : LEA EAX,[EBP + -0xc]
007d8692 : MOV FS:[0x0],EAX
007d8698 : MOV EDI,ECX
007d869a : MOV dword ptr [EBP + -0x14],EDI
007d869d : MOV dword ptr [EDI],0xcd4978
007d86a3 : MOV dword ptr [EBP + -0x4],0x5
007d86aa : XOR ESI,ESI
007d86ac : CMP dword ptr [EDI + 0x290],ESI
007d86b2 : JZ 0x007d8704
007d86b4 : PUSH 0xc1fd20
007d86b9 : LEA ECX,[EBP + -0x34]
007d86bc : CALL 0x00406460
007d86c1 : MOV byte ptr [EBP + -0x4],0x6
007d86c5 : MOV EAX,[0x00da98e8]
007d86ca : MOV ECX,dword ptr [EAX]
007d86cc : CMP ECX,ESI
007d86ce : JZ 0x007d86e2
007d86d0 : MOV EDX,dword ptr [ECX]
007d86d2 : MOV EDX,dword ptr [EDX + 0x14]
007d86d5 : LEA EAX,[EBP + -0x34]
007d86d8 : PUSH EAX
007d86d9 : PUSH 0x62
007d86db : PUSH 0xc1fd98
007d86e0 : CALL EDX
007d86e2 : MOV byte ptr [EBP + -0x4],0x5
007d86e6 : CMP dword ptr [EBP + -0x1c],0x8
007d86ea : JC 0x007d86f4
007d86ec : MOV ECX,dword ptr [EBP + -0x30]
007d86ef : CALL 0x006f04e0
007d86f4 : XOR EAX,EAX
007d86f6 : MOV dword ptr [EBP + -0x1c],0x7
007d86fd : MOV dword ptr [EBP + -0x20],ESI
007d8700 : MOV word ptr [EBP + -0x30],AX
007d8704 : MOV ECX,EDI
007d8706 : CALL 0x007d7940
007d870b : MOV ECX,EDI
007d870d : CALL 0x007cde90
007d8712 : MOV ECX,dword ptr [EDI + 0x288]
007d8718 : CMP ECX,ESI
007d871a : JZ 0x007d872a
007d871c : MOV EDX,dword ptr [ECX]
007d871e : MOV EAX,dword ptr [EDX]
007d8720 : PUSH 0x1
007d8722 : CALL EAX
007d8724 : MOV dword ptr [EDI + 0x288],ESI
007d872a : MOV ECX,dword ptr [EDI + 0x28c]
007d8730 : CMP ECX,ESI
007d8732 : JZ 0x007d8742
007d8734 : MOV EDX,dword ptr [ECX]
007d8736 : MOV EAX,dword ptr [EDX]
007d8738 : PUSH 0x1
007d873a : CALL EAX
007d873c : MOV dword ptr [EDI + 0x28c],ESI
007d8742 : MOV EAX,dword ptr [EDI + 0x8]
007d8745 : MOV dword ptr [EBP + -0x18],EDI
007d8748 : CMP EAX,ESI
007d874a : JZ 0x007d8756
007d874c : ADD EAX,0x4
007d874f : PUSH EAX
007d8750 : CALL dword ptr [0x00b85118]
007d8756 : MOV byte ptr [EBP + -0x4],0x7
007d875a : LEA EBX,[EDI + 0x25c]
007d8760 : LEA ECX,[EBX + 0x4]
007d8763 : PUSH ECX
007d8764 : CALL 0x00460730
007d8769 : MOV EDX,dword ptr [EBX + 0x8]
007d876c : LEA ESI,[EBX + 0x10]
007d876f : LEA EAX,[EBP + -0x10]
007d8772 : MOV dword ptr [EBP + -0x10],EDX
007d8775 : CALL 0x004402f0
007d877a : MOV dword ptr [EBX + 0x20],0x7
007d8781 : MOV dword ptr [EBX + 0x24],0x8
007d8788 : MOV byte ptr [EBP + -0x4],0x5
007d878c : MOV EAX,dword ptr [EDI + 0x8]
007d878f : XOR ESI,ESI
007d8791 : CMP EAX,ESI
007d8793 : JZ 0x007d879f
007d8795 : ADD EAX,0x4
007d8798 : PUSH EAX
007d8799 : CALL dword ptr [0x00b8511c]
007d879f : MOV ECX,dword ptr [EDI + 0x238]
007d87a5 : MOV EAX,dword ptr [EDI + 0x234]
007d87ab : CMP EAX,ECX
007d87ad : JZ 0x007d87e2
007d87af : MOV byte ptr [EBP + -0x10],0x0
007d87b3 : MOV EDX,dword ptr [EBP + -0x10]
007d87b6 : PUSH EDX
007d87b7 : MOV EDX,dword ptr [EBP + -0x18]
007d87ba : PUSH EDX
007d87bb : MOV EDX,dword ptr [EBP + -0x18]
007d87be : PUSH EDX
007d87bf : PUSH ECX
007d87c0 : CALL 0x00461270
007d87c5 : MOV ECX,dword ptr [EDI + 0x238]
007d87cb : MOV ESI,EAX
007d87cd : MOV EAX,dword ptr [EBP + -0x18]
007d87d0 : PUSH EAX
007d87d1 : PUSH ESI
007d87d2 : CALL 0x00461370
007d87d7 : ADD ESP,0x18
007d87da : MOV dword ptr [EDI + 0x238],ESI
007d87e0 : XOR ESI,ESI
007d87e2 : MOV ECX,dword ptr [EDI + 0x2b4]
007d87e8 : CMP ECX,ESI
007d87ea : JZ 0x007d87fa
007d87ec : MOV EDX,dword ptr [ECX]
007d87ee : MOV EAX,dword ptr [EDX]
007d87f0 : PUSH 0x1
007d87f2 : CALL EAX
007d87f4 : MOV dword ptr [EDI + 0x2b4],ESI
007d87fa : MOV ECX,dword ptr [EDI + 0x2b8]
007d8800 : CMP ECX,ESI
007d8802 : JZ 0x007d8812
007d8804 : MOV EDX,dword ptr [ECX]
007d8806 : MOV EAX,dword ptr [EDX]
007d8808 : PUSH 0x1
007d880a : CALL EAX
007d880c : MOV dword ptr [EDI + 0x2b8],ESI
007d8812 : MOV byte ptr [EBP + -0x4],0x4
007d8816 : MOV ECX,dword ptr [EDI + 0x2a8]
007d881c : CMP ECX,ESI
007d881e : JZ 0x007d8825
007d8820 : CALL 0x006f04e0
007d8825 : MOV dword ptr [EDI + 0x2a8],ESI
007d882b : MOV dword ptr [EDI + 0x2ac],ESI
007d8831 : MOV dword ptr [EDI + 0x2b0],ESI
007d8837 : MOV byte ptr [EBP + -0x4],0x3
007d883b : PUSH EBX
007d883c : CALL 0x0045fd90
007d8841 : MOV byte ptr [EBP + -0x4],0x2
007d8845 : MOV EAX,dword ptr [EDI + 0x234]
007d884b : CMP EAX,ESI
007d884d : JZ 0x007d886d
007d884f : MOV EDX,dword ptr [EBP + -0x18]
007d8852 : MOV ECX,dword ptr [EDI + 0x238]
007d8858 : PUSH EDX
007d8859 : PUSH EAX
007d885a : CALL 0x00461370
007d885f : MOV ECX,dword ptr [EDI + 0x234]
007d8865 : ADD ESP,0x8
007d8868 : CALL 0x006f04e0
007d886d : MOV dword ptr [EDI + 0x234],ESI
007d8873 : MOV dword ptr [EDI + 0x238],ESI
007d8879 : MOV dword ptr [EDI + 0x23c],ESI
007d887f : MOV byte ptr [EBP + -0x4],0x1
007d8883 : MOV dword ptr [EDI + 0x1ac],0xcd083c
007d888d : MOV byte ptr [EBP + -0x4],0x0
007d8891 : LEA EAX,[EDI + 0x180]
007d8897 : PUSH EAX
007d8898 : CALL 0x004bd6c0
007d889d : MOV dword ptr [EBP + -0x4],0xffffffff
007d88a4 : MOV ECX,EDI
007d88a6 : CALL 0x007ce390
007d88ab : MOV ECX,dword ptr [EBP + -0xc]
007d88ae : MOV dword ptr FS:[0x0],ECX
007d88b5 : POP ECX
007d88b6 : POP EDI
007d88b7 : POP ESI
007d88b8 : POP EBX
007d88b9 : MOV ESP,EBP
007d88bb : POP EBP
007d88bc : RET
