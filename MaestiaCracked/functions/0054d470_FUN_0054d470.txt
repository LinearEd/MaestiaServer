PROGRAM  : Maestia.exe
FUNCTION : FUN_0054d470
ENTRY    : 0054d470
BODY     : [[0054d470, 0054d4c3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054d470(undefined4 param_1)

{
  short *psVar1;
  int iVar2;
  int in_ECX;
  
  *(undefined4 *)(in_ECX + 0x3c) = param_1;
  psVar1 = (short *)(*(int *)(in_ECX + 0xc) + 0x34);
  *psVar1 = *psVar1 + -1;
  iVar2 = *(int *)(in_ECX + 0xc);
  if ((*(byte *)(iVar2 + 0x68) & 1) == 0) {
    *(ushort *)(iVar2 + 0x68) = *(ushort *)(iVar2 + 0x68) | 8;
  }
  else {
    *(ushort *)(iVar2 + 0x68) = *(ushort *)(iVar2 + 0x68) & 0xfff7;
  }
  *(undefined8 *)(iVar2 + 0x38) = 0;
  FUN_0054d2b0(*(int *)(in_ECX + 0x30) + *(int *)(in_ECX + 0x3c),0,
               *(byte *)(*(int *)(in_ECX + 0xc) + 0x69) & 1);
  return;
}



============================================================
DISASSEMBLY
============================================================
0054d470 : MOV EAX,ECX
0054d472 : MOV ECX,dword ptr [ESP + 0x4]
0054d476 : MOV dword ptr [EAX + 0x3c],ECX
0054d479 : MOV ECX,dword ptr [EAX + 0xc]
0054d47c : ADD ECX,0x24
0054d47f : MOV EDX,0xffff
0054d484 : ADD word ptr [ECX + 0x10],DX
0054d488 : MOV ECX,dword ptr [EAX + 0xc]
0054d48b : TEST byte ptr [ECX + 0x68],0x1
0054d48f : JNZ 0x0054d498
0054d491 : OR word ptr [ECX + 0x68],0x8
0054d496 : JMP 0x0054d4a1
0054d498 : MOV EDX,0xfff7
0054d49d : AND word ptr [ECX + 0x68],DX
0054d4a1 : FLDZ
0054d4a3 : FSTP double ptr [ECX + 0x38]
0054d4a6 : MOV ECX,dword ptr [EAX + 0xc]
0054d4a9 : MOV DL,byte ptr [ECX + 0x69]
0054d4ac : AND DL,0x1
0054d4af : MOVZX EDX,DL
0054d4b2 : PUSH EDX
0054d4b3 : MOV EDX,dword ptr [EAX + 0x30]
0054d4b6 : ADD EDX,dword ptr [EAX + 0x3c]
0054d4b9 : PUSH 0x0
0054d4bb : PUSH EDX
0054d4bc : CALL 0x0054d2b0
0054d4c1 : RET 0x4
