PROGRAM  : Maestia.exe
FUNCTION : FUN_005d07c0
ENTRY    : 005d07c0
BODY     : [[005d07c0, 005d0937]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005d07c0(undefined4 *param_1,uint param_2)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 uVar6;
  uint uVar7;
  int local_18;
  undefined1 local_14;
  int local_10;
  int local_c;
  byte local_8;
  
  iVar3 = param_2;
  iVar4 = *(int *)(param_2 + 0x9c);
  piVar1 = (int *)(iVar4 + 8);
  *piVar1 = *piVar1 + 1;
  iVar4 = FUN_00530480(iVar4);
  if (iVar4 == 0) {
    FUN_005cf4c0(&local_10,iVar3);
    if (((local_8 & 2) == 0) && (local_10 != 0)) {
      FUN_00503db0();
    }
    local_10 = 0;
    if (((local_8 & 1) == 0) && (local_c != 0)) {
      FUN_00503db0();
    }
  }
  local_18 = iVar3;
  local_14 = 8;
  puVar5 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar5 == (undefined4 *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005cff50);
    *puVar5 = &PTR_LAB_00b93030;
    puVar5[4] = &PTR_LAB_00b90510;
  }
  puVar2 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = puVar5;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x5c,0);
  if (iVar4 == 0) {
    uVar7 = 0;
  }
  else {
    puVar5 = puVar2;
    uVar6 = FUN_00530910(0x25);
    uVar7 = FUN_005d0720(&local_18,uVar6,puVar5);
    if (uVar7 != 0) {
      *(uint *)(uVar7 + 8) = *(int *)(uVar7 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (undefined4 *)0x26;
  param_2 = uVar7;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  puVar5 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *(int *)(*(int *)(iVar3 + 0x29c) + 0x10);
  uVar6 = FUN_00526210(puVar2);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar3 + 0xa0,uVar6,puVar5);
  FUN_00526bc0();
  if (uVar7 != 0) {
    FUN_00503db0();
  }
  return puVar2;
}



============================================================
DISASSEMBLY
============================================================
005d07c0 : SUB ESP,0x18
005d07c3 : PUSH EBX
005d07c4 : PUSH EBP
005d07c5 : PUSH ESI
005d07c6 : MOV ESI,dword ptr [ESP + 0x2c]
005d07ca : MOV EAX,dword ptr [ESI + 0x9c]
005d07d0 : PUSH EDI
005d07d1 : PUSH ECX
005d07d2 : MOV ECX,ESP
005d07d4 : MOV dword ptr [ECX],EAX
005d07d6 : INC dword ptr [EAX + 0x8]
005d07d9 : MOV ECX,ESI
005d07db : CALL 0x00530480
005d07e0 : XOR EBX,EBX
005d07e2 : CMP EAX,EBX
005d07e4 : JNZ 0x005d0820
005d07e6 : LEA EAX,[ESP + 0x18]
005d07ea : PUSH ESI
005d07eb : PUSH EAX
005d07ec : CALL 0x005cf4c0
005d07f1 : ADD ESP,0x8
005d07f4 : TEST byte ptr [ESP + 0x20],0x2
005d07f9 : JNZ 0x005d0808
005d07fb : MOV ECX,dword ptr [ESP + 0x18]
005d07ff : CMP ECX,EBX
005d0801 : JZ 0x005d0808
005d0803 : CALL 0x00503db0
005d0808 : TEST byte ptr [ESP + 0x20],0x1
005d080d : MOV dword ptr [ESP + 0x18],EBX
005d0811 : JNZ 0x005d0820
005d0813 : MOV ECX,dword ptr [ESP + 0x1c]
005d0817 : CMP ECX,EBX
005d0819 : JZ 0x005d0820
005d081b : CALL 0x00503db0
005d0820 : MOV ECX,dword ptr [ESI + 0x288]
005d0826 : PUSH EBX
005d0827 : PUSH 0x34
005d0829 : MOV dword ptr [ESP + 0x18],ESI
005d082d : MOV byte ptr [ESP + 0x1c],0x8
005d0832 : CALL 0x00515840
005d0837 : MOV EDI,EAX
005d0839 : CMP EDI,EBX
005d083b : JZ 0x005d085f
005d083d : PUSH 0x5cff50
005d0842 : LEA ECX,[ESP + 0x14]
005d0846 : PUSH ECX
005d0847 : MOV ECX,EDI
005d0849 : CALL 0x00568960
005d084e : MOV dword ptr [EDI],0xb93030
005d0854 : MOV dword ptr [EDI + 0x10],0xb90510
005d085b : MOV EAX,EDI
005d085d : JMP 0x005d0861
005d085f : XOR EAX,EAX
005d0861 : MOV EDI,dword ptr [ESP + 0x2c]
005d0865 : PUSH EBX
005d0866 : MOV byte ptr [EDI + 0x8],BL
005d0869 : MOV dword ptr [EDI],EAX
005d086b : MOV dword ptr [EDI + 0x4],EBX
005d086e : MOV ECX,dword ptr [ESI + 0x288]
005d0874 : PUSH 0x5c
005d0876 : CALL 0x00515840
005d087b : MOV EBP,EAX
005d087d : CMP EBP,EBX
005d087f : JZ 0x005d0931
005d0885 : PUSH EDI
005d0886 : PUSH 0x25
005d0888 : MOV ECX,ESI
005d088a : CALL 0x00530910
005d088f : PUSH EAX
005d0890 : LEA EDX,[ESP + 0x18]
005d0894 : PUSH EDX
005d0895 : MOV ECX,EBP
005d0897 : CALL 0x005d0720
005d089c : MOV EBP,EAX
005d089e : CMP EBP,EBX
005d08a0 : JZ 0x005d08ae
005d08a2 : MOV EAX,dword ptr [EBP + 0x8]
005d08a5 : INC EAX
005d08a6 : AND EAX,0x8fffffff
005d08ab : MOV dword ptr [EBP + 0x8],EAX
005d08ae : LEA ECX,[ESP + 0x30]
005d08b2 : PUSH ECX
005d08b3 : LEA EDX,[ESP + 0x30]
005d08b7 : PUSH EDX
005d08b8 : LEA ECX,[ESI + 0x278]
005d08be : MOV dword ptr [ESP + 0x38],EBP
005d08c2 : MOV dword ptr [ESP + 0x34],0x26
005d08ca : CALL 0x0050ff10
005d08cf : MOV ECX,dword ptr [ESP + 0x30]
005d08d3 : CMP ECX,EBX
005d08d5 : JZ 0x005d08dc
005d08d7 : CALL 0x00503db0
005d08dc : MOV EAX,dword ptr [ESI + 0x29c]
005d08e2 : LEA ECX,[ESP + 0x30]
005d08e6 : PUSH ECX
005d08e7 : MOV byte ptr [ESP + 0x34],BL
005d08eb : MOV EBX,dword ptr [EAX + 0x10]
005d08ee : PUSH EDI
005d08ef : LEA ECX,[ESP + 0x20]
005d08f3 : CALL 0x00526210
005d08f8 : MOV ECX,dword ptr [ESI + 0x29c]
005d08fe : PUSH EAX
005d08ff : LEA EDX,[ESI + 0xa0]
005d0905 : PUSH EDX
005d0906 : MOV EDX,dword ptr [EBX + 0x28]
005d0909 : LEA EAX,[ESP + 0x1c]
005d090d : PUSH EAX
005d090e : ADD ECX,0x10
005d0911 : CALL EDX
005d0913 : LEA ECX,[ESP + 0x18]
005d0917 : CALL 0x00526bc0
005d091c : TEST EBP,EBP
005d091e : JZ 0x005d0927
005d0920 : MOV ECX,EBP
005d0922 : CALL 0x00503db0
005d0927 : MOV EAX,EDI
005d0929 : POP EDI
005d092a : POP ESI
005d092b : POP EBP
005d092c : POP EBX
005d092d : ADD ESP,0x18
005d0930 : RET
005d0931 : XOR EBP,EBP
005d0933 : JMP 0x005d08ae
