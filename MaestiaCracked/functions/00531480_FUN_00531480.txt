PROGRAM  : Maestia.exe
FUNCTION : FUN_00531480
ENTRY    : 00531480
BODY     : [[00531480, 005316ba]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00531480(char param_1)

{
  undefined4 *puVar1;
  int in_ECX;
  int **ppiStack_68;
  undefined1 **ppuStack_64;
  uint *puStack_60;
  undefined1 *puStack_5c;
  int **ppiStack_58;
  undefined1 *puStack_54;
  uint *puStack_50;
  undefined1 *puStack_4c;
  int *piStack_48;
  undefined1 *puStack_44;
  char *pcStack_40;
  int *piStack_3c;
  undefined1 *puStack_38;
  uint local_24;
  int local_20;
  int local_1c;
  char local_18 [4];
  undefined1 local_14;
  undefined1 local_10 [8];
  undefined1 auStack_8 [8];
  
  if (param_1 == '\0') {
    if (*(int *)(in_ECX + 0x2a0) != 0) {
      FUN_00503db0();
    }
    *(undefined4 *)(in_ECX + 0x2a0) = 0;
  }
  else {
    puStack_38 = (undefined1 *)0x34;
    piStack_3c = (int *)0x5314a2;
    puVar1 = (undefined4 *)FUN_00515840();
    if (puVar1 == (undefined4 *)0x0) {
      puVar1 = (undefined4 *)0x0;
    }
    else {
      puStack_38 = (undefined1 *)0x5314c1;
      FUN_005510d0();
      *puVar1 = &PTR_LAB_00b8b1cc;
      puVar1[4] = &PTR_LAB_00b8b178;
      puVar1[0xc] = in_ECX;
    }
    puStack_38 = (undefined1 *)0x0;
    piStack_3c = (int *)0x9;
    pcStack_40 = "gfxPlayer";
    local_14 = 8;
    puStack_44 = (undefined1 *)0x5314f3;
    local_1c = FUN_00525380();
    puStack_38 = (undefined1 *)0x0;
    *(int *)(local_1c + 8) = *(int *)(local_1c + 8) + 1;
    piStack_3c = (int *)0xb;
    pcStack_40 = "gfxLanguage";
    puStack_44 = (undefined1 *)0x531516;
    local_20 = FUN_00525380();
    puStack_38 = (undefined1 *)0x0;
    *(int *)(local_20 + 8) = *(int *)(local_20 + 8) + 1;
    piStack_3c = (int *)0x6;
    pcStack_40 = "gfxArg";
    puStack_44 = (undefined1 *)0x531534;
    local_24 = FUN_00525380();
    *(int *)(local_24 + 8) = *(int *)(local_24 + 8) + 1;
    puStack_38 = local_10;
    piStack_3c = &local_1c;
    local_10[0] = 0;
    pcStack_40 = local_18;
    puStack_44 = (undefined1 *)0x53155e;
    (**(code **)(*(int *)(*(int *)(in_ECX + 0x2a0) + 0x10) + 0x2c))();
    puStack_44 = auStack_8;
    piStack_48 = &local_1c;
    puStack_4c = &stack0xffffffd8;
    puStack_50 = &local_24;
    auStack_8[0] = 0;
    puStack_54 = (undefined1 *)0x531583;
    (**(code **)(puVar1[4] + 0x28))();
    puStack_54 = &stack0xffffffd4;
    ppiStack_58 = &piStack_3c;
    puStack_5c = &stack0xffffffcc;
    puStack_60 = (uint *)0x5315a2;
    (**(code **)(*(int *)(*(int *)(in_ECX + 0x2a0) + 0x10) + 0x2c))();
    puStack_60 = &local_24;
    ppuStack_64 = &puStack_38;
    ppiStack_68 = &piStack_48;
    local_24 = local_24 & 0xffffff00;
    (**(code **)(puVar1[4] + 0x28))(&pcStack_40);
    (**(code **)(*(int *)(*(int *)(in_ECX + 0x2a0) + 0x10) + 0x2c))
              (&puStack_50,&puStack_5c,&piStack_48);
    pcStack_40 = (char *)((uint)pcStack_40 & 0xffffff00);
    (**(code **)(puVar1[4] + 0x28))(&puStack_5c,&ppiStack_68,&puStack_54,&pcStack_40);
    puVar1[2] = puVar1[2] + 1 & 0x8fffffff;
    if (*(int *)(in_ECX + 0x2a0) != 0) {
      FUN_00503db0();
    }
    *(undefined4 **)(in_ECX + 0x2a0) = puVar1;
    FUN_00526bc0();
    *(int *)(local_24 + 8) = *(int *)(local_24 + 8) + -1;
    if (*(int *)(local_24 + 8) == 0) {
      FUN_00525340();
    }
    *(int *)(local_20 + 8) = *(int *)(local_20 + 8) + -1;
    if (*(int *)(local_20 + 8) == 0) {
      FUN_00525340();
    }
    *(int *)(local_1c + 8) = *(int *)(local_1c + 8) + -1;
    if (*(int *)(local_1c + 8) == 0) {
      FUN_00525340();
    }
    FUN_00503db0();
  }
  FUN_00530700();
  FUN_00507ef0();
  FUN_00507e60();
  *(undefined4 *)(in_ECX + 0x284) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00531480 : SUB ESP,0x24
00531483 : PUSH EBX
00531484 : XOR EBX,EBX
00531486 : PUSH ESI
00531487 : MOV ESI,ECX
00531489 : CMP byte ptr [ESP + 0x30],BL
0053148d : JZ 0x00531677
00531493 : MOV ECX,dword ptr [ESI + 0x288]
00531499 : PUSH EBP
0053149a : PUSH EBX
0053149b : PUSH 0x34
0053149d : CALL 0x00515840
005314a2 : MOV EBP,EAX
005314a4 : CMP EBP,EBX
005314a6 : JZ 0x005314d4
005314a8 : MOV EAX,dword ptr [ESI + 0x284]
005314ae : CMP EAX,EBX
005314b0 : JZ 0x005314b7
005314b2 : ADD EAX,0x18
005314b5 : JMP 0x005314b9
005314b7 : XOR EAX,EAX
005314b9 : PUSH EAX
005314ba : MOV ECX,EBP
005314bc : CALL 0x005510d0
005314c1 : MOV dword ptr [EBP],0xb8b1cc
005314c8 : MOV dword ptr [EBP + 0x10],0xb8b178
005314cf : MOV dword ptr [EBP + 0x30],ESI
005314d2 : JMP 0x005314d6
005314d4 : XOR EBP,EBP
005314d6 : PUSH EDI
005314d7 : PUSH EBX
005314d8 : PUSH 0x9
005314da : PUSH 0xb8b6b4
005314df : LEA ECX,[ESI + 0x254]
005314e5 : MOV dword ptr [ESP + 0x28],ESI
005314e9 : MOV byte ptr [ESP + 0x2c],0x8
005314ee : CALL 0x00525380
005314f3 : PUSH EBX
005314f4 : MOV dword ptr [ESP + 0x1c],EAX
005314f8 : MOV EDI,0x1
005314fd : ADD dword ptr [EAX + 0x8],EDI
00531500 : MOV ECX,dword ptr [ESP + 0x20]
00531504 : PUSH 0xb
00531506 : PUSH 0xb8b6a8
0053150b : ADD ECX,0x254
00531511 : CALL 0x00525380
00531516 : PUSH EBX
00531517 : MOV dword ptr [ESP + 0x18],EAX
0053151b : ADD dword ptr [EAX + 0x8],EDI
0053151e : MOV ECX,dword ptr [ESP + 0x20]
00531522 : PUSH 0x6
00531524 : PUSH 0xb8b6a0
00531529 : ADD ECX,0x254
0053152f : CALL 0x00525380
00531534 : MOV dword ptr [ESP + 0x10],EAX
00531538 : ADD dword ptr [EAX + 0x8],EDI
0053153b : MOV EAX,dword ptr [ESI + 0x2a0]
00531541 : LEA EDX,[ESP + 0x24]
00531545 : PUSH EDX
00531546 : LEA ECX,[EAX + 0x10]
00531549 : LEA EDX,[ESP + 0x1c]
0053154d : PUSH EDX
0053154e : MOV byte ptr [ESP + 0x2c],BL
00531552 : MOV EAX,dword ptr [ECX]
00531554 : MOV EAX,dword ptr [EAX + 0x2c]
00531557 : LEA EDX,[ESP + 0x24]
0053155b : PUSH EDX
0053155c : CALL EAX
0053155e : MOV EDX,dword ptr [EBP + 0x10]
00531561 : MOV EDX,dword ptr [EDX + 0x28]
00531564 : LEA EAX,[ESP + 0x38]
00531568 : PUSH EAX
00531569 : LEA ECX,[ESP + 0x28]
0053156d : PUSH ECX
0053156e : LEA EAX,[ESP + 0x20]
00531572 : LEA EDI,[EBP + 0x10]
00531575 : PUSH EAX
00531576 : LEA ECX,[ESP + 0x28]
0053157a : PUSH ECX
0053157b : MOV ECX,EDI
0053157d : MOV byte ptr [ESP + 0x48],BL
00531581 : CALL EDX
00531583 : MOV EAX,dword ptr [ESI + 0x2a0]
00531589 : LEA EDX,[ESP + 0x24]
0053158d : PUSH EDX
0053158e : LEA ECX,[EAX + 0x10]
00531591 : MOV EAX,dword ptr [ECX]
00531593 : MOV EAX,dword ptr [EAX + 0x2c]
00531596 : LEA EDX,[ESP + 0x18]
0053159a : PUSH EDX
0053159b : LEA EDX,[ESP + 0x24]
0053159f : PUSH EDX
005315a0 : CALL EAX
005315a2 : MOV EDX,dword ptr [EDI]
005315a4 : MOV EDX,dword ptr [EDX + 0x28]
005315a7 : LEA EAX,[ESP + 0x38]
005315ab : PUSH EAX
005315ac : LEA ECX,[ESP + 0x28]
005315b0 : PUSH ECX
005315b1 : LEA EAX,[ESP + 0x1c]
005315b5 : PUSH EAX
005315b6 : LEA ECX,[ESP + 0x28]
005315ba : PUSH ECX
005315bb : MOV ECX,EDI
005315bd : MOV byte ptr [ESP + 0x48],BL
005315c1 : CALL EDX
005315c3 : MOV EAX,dword ptr [ESI + 0x2a0]
005315c9 : LEA ECX,[EAX + 0x10]
005315cc : MOV EAX,dword ptr [ECX]
005315ce : LEA EDX,[ESP + 0x24]
005315d2 : MOV EAX,dword ptr [EAX + 0x2c]
005315d5 : PUSH EDX
005315d6 : LEA EDX,[ESP + 0x14]
005315da : PUSH EDX
005315db : LEA EDX,[ESP + 0x24]
005315df : PUSH EDX
005315e0 : CALL EAX
005315e2 : MOV EDX,dword ptr [EDI]
005315e4 : MOV EDX,dword ptr [EDX + 0x28]
005315e7 : LEA EAX,[ESP + 0x38]
005315eb : PUSH EAX
005315ec : LEA ECX,[ESP + 0x28]
005315f0 : PUSH ECX
005315f1 : LEA EAX,[ESP + 0x18]
005315f5 : PUSH EAX
005315f6 : LEA ECX,[ESP + 0x28]
005315fa : PUSH ECX
005315fb : MOV ECX,EDI
005315fd : MOV byte ptr [ESP + 0x48],BL
00531601 : CALL EDX
00531603 : MOV EAX,dword ptr [EBP + 0x8]
00531606 : INC EAX
00531607 : AND EAX,0x8fffffff
0053160c : MOV dword ptr [EBP + 0x8],EAX
0053160f : MOV ECX,dword ptr [ESI + 0x2a0]
00531615 : POP EDI
00531616 : CMP ECX,EBX
00531618 : JZ 0x0053161f
0053161a : CALL 0x00503db0
0053161f : LEA ECX,[ESP + 0x20]
00531623 : MOV dword ptr [ESI + 0x2a0],EBP
00531629 : CALL 0x00526bc0
0053162e : MOV EAX,dword ptr [ESP + 0xc]
00531632 : DEC dword ptr [EAX + 0x8]
00531635 : MOV ECX,EAX
00531637 : ADD EAX,0x8
0053163a : CMP dword ptr [EAX],EBX
0053163c : JNZ 0x00531643
0053163e : CALL 0x00525340
00531643 : MOV EAX,dword ptr [ESP + 0x10]
00531647 : DEC dword ptr [EAX + 0x8]
0053164a : MOV ECX,EAX
0053164c : ADD EAX,0x8
0053164f : CMP dword ptr [EAX],EBX
00531651 : JNZ 0x00531658
00531653 : CALL 0x00525340
00531658 : MOV EAX,dword ptr [ESP + 0x14]
0053165c : DEC dword ptr [EAX + 0x8]
0053165f : MOV ECX,EAX
00531661 : ADD EAX,0x8
00531664 : CMP dword ptr [EAX],EBX
00531666 : JNZ 0x0053166d
00531668 : CALL 0x00525340
0053166d : MOV ECX,EBP
0053166f : CALL 0x00503db0
00531674 : POP EBP
00531675 : JMP 0x0053168c
00531677 : MOV ECX,dword ptr [ESI + 0x2a0]
0053167d : CMP ECX,EBX
0053167f : JZ 0x00531686
00531681 : CALL 0x00503db0
00531686 : MOV dword ptr [ESI + 0x2a0],EBX
0053168c : LEA ECX,[ESI + 0x27c]
00531692 : CALL 0x00530700
00531697 : LEA ECX,[ESI + 0x280]
0053169d : CALL 0x00507ef0
005316a2 : LEA ECX,[ESI + 0x278]
005316a8 : CALL 0x00507e60
005316ad : MOV dword ptr [ESI + 0x284],EBX
005316b3 : POP ESI
005316b4 : POP EBX
005316b5 : ADD ESP,0x24
005316b8 : RET 0x4
