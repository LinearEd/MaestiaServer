PROGRAM  : Maestia.exe
FUNCTION : FUN_007bc7f0
ENTRY    : 007bc7f0
BODY     : [[007bc7f0, 007bc8de]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bc7f0(void)

{
  int iVar1;
  int *piVar2;
  int in_ECX;
  int unaff_EDI;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  undefined1 local_14 [4];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0ecfb;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_28 = (LPCRITICAL_SECTION)(in_ECX + 4);
  local_1c = 0;
  local_24 = ".\\mss\\AvaMssMgr.cpp";
  local_20 = 0x3d3;
  local_18 = 1;
  FUN_006ef1a0(&local_28);
  local_8 = 0;
  if ((unaff_EDI != 0) && (*(int *)(in_ECX + 0x20) != 0)) {
    FUN_004648c0(local_14,*(undefined4 *)(in_ECX + 0x50),*(undefined4 *)(in_ECX + 0x54));
    for (piVar2 = *(int **)(in_ECX + 0xe4); piVar2 != *(int **)(in_ECX + 0xe8); piVar2 = piVar2 + 1)
    {
      iVar1 = *piVar2;
      if ((iVar1 != 0) && (*(int *)(iVar1 + 0x4c) == unaff_EDI)) {
        *(undefined4 *)(iVar1 + 0x4c) = 0;
        *(undefined1 *)(*piVar2 + 0x48) = 0;
        break;
      }
    }
  }
  if (local_1c != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_28);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bc7f0 : PUSH EBP
007bc7f1 : MOV EBP,ESP
007bc7f3 : PUSH -0x1
007bc7f5 : PUSH 0xb0ecfb
007bc7fa : MOV EAX,FS:[0x0]
007bc800 : PUSH EAX
007bc801 : SUB ESP,0x18
007bc804 : PUSH EBX
007bc805 : PUSH ESI
007bc806 : MOV EAX,[0x00d66fa0]
007bc80b : XOR EAX,EBP
007bc80d : PUSH EAX
007bc80e : LEA EAX,[EBP + -0xc]
007bc811 : MOV FS:[0x0],EAX
007bc817 : MOV ESI,ECX
007bc819 : LEA ECX,[EBP + -0x24]
007bc81c : LEA EAX,[ESI + 0x4]
007bc81f : XOR EBX,EBX
007bc821 : PUSH ECX
007bc822 : MOV dword ptr [EBP + -0x18],EBX
007bc825 : MOV dword ptr [EBP + -0x24],EAX
007bc828 : MOV dword ptr [EBP + -0x20],0xc18f48
007bc82f : MOV dword ptr [EBP + -0x1c],0x3d3
007bc836 : MOV dword ptr [EBP + -0x14],0x1
007bc83d : CALL 0x006ef1a0
007bc842 : MOV dword ptr [EBP + -0x4],EBX
007bc845 : CMP EDI,EBX
007bc847 : JNZ 0x007bc85b
007bc849 : MOV dword ptr [EBP + -0x4],0xffffffff
007bc850 : CMP dword ptr [EBP + -0x18],EBX
007bc853 : JZ 0x007bc8ce
007bc855 : MOV EDX,dword ptr [EBP + -0x24]
007bc858 : PUSH EDX
007bc859 : JMP 0x007bc8c5
007bc85b : CMP dword ptr [ESI + 0x20],EBX
007bc85e : JNZ 0x007bc872
007bc860 : MOV dword ptr [EBP + -0x4],0xffffffff
007bc867 : CMP dword ptr [EBP + -0x18],EBX
007bc86a : JZ 0x007bc8ce
007bc86c : MOV EAX,dword ptr [EBP + -0x24]
007bc86f : PUSH EAX
007bc870 : JMP 0x007bc8c5
007bc872 : MOV EAX,dword ptr [ESI + 0x54]
007bc875 : MOV ECX,dword ptr [ESI + 0x50]
007bc878 : PUSH EDI
007bc879 : PUSH EAX
007bc87a : PUSH ECX
007bc87b : LEA ECX,[EBP + -0x10]
007bc87e : PUSH ECX
007bc87f : CALL 0x004648c0
007bc884 : MOV EAX,dword ptr [ESI + 0xe4]
007bc88a : MOV ESI,dword ptr [ESI + 0xe8]
007bc890 : ADD ESP,0x10
007bc893 : CMP EAX,ESI
007bc895 : JZ 0x007bc8b5
007bc897 : MOV ECX,dword ptr [EAX]
007bc899 : CMP ECX,EBX
007bc89b : JZ 0x007bc8a2
007bc89d : CMP dword ptr [ECX + 0x4c],EDI
007bc8a0 : JZ 0x007bc8ab
007bc8a2 : ADD EAX,0x4
007bc8a5 : CMP EAX,ESI
007bc8a7 : JNZ 0x007bc897
007bc8a9 : JMP 0x007bc8b5
007bc8ab : MOV EDX,ECX
007bc8ad : MOV dword ptr [EDX + 0x4c],EBX
007bc8b0 : MOV EAX,dword ptr [EAX]
007bc8b2 : MOV byte ptr [EAX + 0x48],BL
007bc8b5 : MOV dword ptr [EBP + -0x4],0xffffffff
007bc8bc : CMP dword ptr [EBP + -0x18],EBX
007bc8bf : JZ 0x007bc8ce
007bc8c1 : MOV ECX,dword ptr [EBP + -0x24]
007bc8c4 : PUSH ECX
007bc8c5 : CALL dword ptr [0x00b8511c]
007bc8cb : MOV dword ptr [EBP + -0x18],EBX
007bc8ce : MOV ECX,dword ptr [EBP + -0xc]
007bc8d1 : MOV dword ptr FS:[0x0],ECX
007bc8d8 : POP ECX
007bc8d9 : POP ESI
007bc8da : POP EBX
007bc8db : MOV ESP,EBP
007bc8dd : POP EBP
007bc8de : RET
