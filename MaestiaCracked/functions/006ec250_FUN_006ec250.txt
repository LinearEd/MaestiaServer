PROGRAM  : Maestia.exe
FUNCTION : FUN_006ec250
ENTRY    : 006ec250
BODY     : [[006ec250, 006ec350]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int * FUN_006ec250(void)

{
  size_t _Size;
  int *piVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int unaff_EDI;
  bool bVar5;
  int *local_4;
  
  if ((*(byte *)(unaff_EDI + 8) & 1) != 0) {
    __wassert(L"aDefines.size( ) % 2 == 0",L".\\Source\\Shaders.cpp",0x53);
  }
  iVar3 = (*(uint *)(unaff_EDI + 8) >> 1) + 1;
  iVar2 = 0;
  _Size = iVar3 * 8 + 4;
  if (DAT_00da98c8 == (int *)0x0) {
    piVar1 = _malloc(_Size);
  }
  else {
    piVar1 = (int *)(**(code **)(*DAT_00da98c8 + 4))();
  }
  if (piVar1 == (int *)0x0) {
    local_4 = (int *)0x0;
  }
  else {
    _DAT_00da98cc = _DAT_00da98cc + _Size;
    _DAT_00da98d0 = _DAT_00da98d0 + 1;
    local_4 = piVar1 + 1;
    *piVar1 = iVar3;
  }
  uVar4 = 0;
  if (0 < *(int *)(unaff_EDI + 8)) {
    bVar5 = *(int *)(unaff_EDI + 8) != 0;
    do {
      if (!bVar5) {
        __wassert(L"uiIndex < m_uiSize",
                  L"d:\\MaestiaProject\\MaestiaSrc\\Client\\Main\\include\\SpeedTree5.1.1\\Core/Array.inl"
                  ,0x142);
      }
      local_4[((int)uVar4 / 2) * 2] = *(int *)(unaff_EDI + 4) + 8 + iVar2;
      if (*(uint *)(unaff_EDI + 8) <= uVar4 + 1) {
        __wassert(L"uiIndex < m_uiSize",
                  L"d:\\MaestiaProject\\MaestiaSrc\\Client\\Main\\include\\SpeedTree5.1.1\\Core/Array.inl"
                  ,0x142);
      }
      (local_4 + ((int)uVar4 / 2) * 2)[1] = *(int *)(unaff_EDI + 4) + 0x110 + iVar2;
      uVar4 = uVar4 + 2;
      iVar2 = iVar2 + 0x210;
      bVar5 = uVar4 < *(uint *)(unaff_EDI + 8);
    } while ((int)uVar4 < (int)*(uint *)(unaff_EDI + 8));
  }
  local_4[((int)uVar4 / 2) * 2] = 0;
  (local_4 + ((int)uVar4 / 2) * 2)[1] = 0;
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
006ec250 : PUSH ECX
006ec251 : TEST byte ptr [EDI + 0x8],0x1
006ec255 : JZ 0x006ec26b
006ec257 : PUSH 0x53
006ec259 : PUSH 0xbf2018
006ec25e : PUSH 0xbf2044
006ec263 : CALL 0x00640200
006ec268 : ADD ESP,0xc
006ec26b : MOV ECX,dword ptr [0x00da98c8]
006ec271 : PUSH EBX
006ec272 : PUSH EBP
006ec273 : PUSH ESI
006ec274 : MOV ESI,dword ptr [EDI + 0x8]
006ec277 : SHR ESI,0x1
006ec279 : INC ESI
006ec27a : XOR EBP,EBP
006ec27c : LEA EBX,[ESI*0x8 + 0x4]
006ec283 : PUSH EBX
006ec284 : CMP ECX,EBP
006ec286 : JZ 0x006ec291
006ec288 : MOV EAX,dword ptr [ECX]
006ec28a : MOV EDX,dword ptr [EAX + 0x4]
006ec28d : CALL EDX
006ec28f : JMP 0x006ec299
006ec291 : CALL 0x00636043
006ec296 : ADD ESP,0x4
006ec299 : CMP EAX,EBP
006ec29b : JZ 0x006ec2b4
006ec29d : ADD dword ptr [0x00da98cc],EBX
006ec2a3 : INC dword ptr [0x00da98d0]
006ec2a9 : LEA ECX,[EAX + 0x4]
006ec2ac : MOV dword ptr [EAX],ESI
006ec2ae : MOV dword ptr [ESP + 0xc],ECX
006ec2b2 : JMP 0x006ec2b8
006ec2b4 : MOV dword ptr [ESP + 0xc],EBP
006ec2b8 : MOV EAX,dword ptr [EDI + 0x8]
006ec2bb : XOR ESI,ESI
006ec2bd : CMP EAX,EBP
006ec2bf : JLE 0x006ec32f
006ec2c1 : CMP ESI,EAX
006ec2c3 : JC 0x006ec2dc
006ec2c5 : PUSH 0x142
006ec2ca : PUSH 0xcded60
006ec2cf : PUSH 0xcdee2c
006ec2d4 : CALL 0x00640200
006ec2d9 : ADD ESP,0xc
006ec2dc : MOV ECX,dword ptr [ESP + 0xc]
006ec2e0 : MOV EAX,ESI
006ec2e2 : CDQ
006ec2e3 : SUB EAX,EDX
006ec2e5 : MOV EDX,dword ptr [EDI + 0x4]
006ec2e8 : SAR EAX,0x1
006ec2ea : LEA EBX,[ECX + EAX*0x8]
006ec2ed : LEA EAX,[EDX + EBP*0x1 + 0x8]
006ec2f1 : LEA ECX,[ESI + 0x1]
006ec2f4 : MOV dword ptr [EBX],EAX
006ec2f6 : CMP ECX,dword ptr [EDI + 0x8]
006ec2f9 : JC 0x006ec312
006ec2fb : PUSH 0x142
006ec300 : PUSH 0xcded60
006ec305 : PUSH 0xcdee2c
006ec30a : CALL 0x00640200
006ec30f : ADD ESP,0xc
006ec312 : MOV EDX,dword ptr [EDI + 0x4]
006ec315 : LEA EAX,[EDX + EBP*0x1 + 0x110]
006ec31c : MOV dword ptr [EBX + 0x4],EAX
006ec31f : MOV EAX,dword ptr [EDI + 0x8]
006ec322 : ADD ESI,0x2
006ec325 : ADD EBP,0x210
006ec32b : CMP ESI,EAX
006ec32d : JL 0x006ec2c3
006ec32f : MOV ECX,dword ptr [ESP + 0xc]
006ec333 : MOV EAX,ESI
006ec335 : CDQ
006ec336 : SUB EAX,EDX
006ec338 : SAR EAX,0x1
006ec33a : LEA EAX,[ECX + EAX*0x8]
006ec33d : POP ESI
006ec33e : POP EBP
006ec33f : MOV dword ptr [EAX],0x0
006ec345 : MOV dword ptr [EAX + 0x4],0x0
006ec34c : MOV EAX,ECX
006ec34e : POP EBX
006ec34f : POP ECX
006ec350 : RET
