PROGRAM  : Maestia.exe
FUNCTION : FUN_00500860
ENTRY    : 00500860
BODY     : [[00500860, 005008b9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00500860(void)

{
  LONG LVar1;
  int in_ECX;
  uint uVar2;
  
  if (*(int *)(in_ECX + 4) != 0) {
    FUN_0055cd60(in_ECX);
  }
  if (*(int *)(in_ECX + 0x14) != 0) {
    FUN_00524240();
  }
  *(undefined4 *)(in_ECX + 0x14) = 0;
  if (*(int *)(in_ECX + 0x18) != 0) {
    FUN_00524240();
  }
  if (*(int *)(in_ECX + 0x14) != 0) {
    FUN_00524240();
  }
  uVar2 = *(uint *)(in_ECX + 0xc) & 0xfffffffc;
  LVar1 = InterlockedExchangeAdd((LONG *)(uVar2 + 4),-1);
  if (LVar1 == 1) {
    FUN_00515cf0(uVar2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00500860 : PUSH ESI
00500861 : MOV ESI,ECX
00500863 : MOV ECX,dword ptr [ESI + 0x4]
00500866 : TEST ECX,ECX
00500868 : JZ 0x00500870
0050086a : PUSH ESI
0050086b : CALL 0x0055cd60
00500870 : MOV ECX,dword ptr [ESI + 0x14]
00500873 : TEST ECX,ECX
00500875 : JZ 0x0050087c
00500877 : CALL 0x00524240
0050087c : MOV dword ptr [ESI + 0x14],0x0
00500883 : MOV ECX,dword ptr [ESI + 0x18]
00500886 : TEST ECX,ECX
00500888 : JZ 0x0050088f
0050088a : CALL 0x00524240
0050088f : MOV ECX,dword ptr [ESI + 0x14]
00500892 : TEST ECX,ECX
00500894 : JZ 0x0050089b
00500896 : CALL 0x00524240
0050089b : MOV ESI,dword ptr [ESI + 0xc]
0050089e : AND ESI,0xfffffffc
005008a1 : PUSH -0x1
005008a3 : LEA EAX,[ESI + 0x4]
005008a6 : PUSH EAX
005008a7 : CALL dword ptr [0x00b851cc]
005008ad : SUB EAX,0x1
005008b0 : JNZ 0x005008b8
005008b2 : PUSH ESI
005008b3 : CALL 0x00515cf0
005008b8 : POP ESI
005008b9 : RET
