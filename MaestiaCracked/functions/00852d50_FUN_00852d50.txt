PROGRAM  : Maestia.exe
FUNCTION : FUN_00852d50
ENTRY    : 00852d50
BODY     : [[00852d50, 0085358f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00852d50(void)

{
  int *piVar1;
  float fVar2;
  char cVar3;
  int iVar4;
  DWORD DVar5;
  int iVar6;
  int *in_ECX;
  float unaff_EBX;
  float fVar7;
  float10 fVar8;
  float10 fVar9;
  float fVar10;
  undefined4 uVar11;
  undefined4 *puVar12;
  uint uStack_18c;
  float fStack_17c;
  float local_174;
  float local_170;
  float fStack_16c;
  undefined1 uStack_165;
  float fStack_164;
  float fStack_160;
  float local_15c;
  float local_154;
  float local_150;
  float local_14c;
  undefined4 uStack_148;
  undefined4 uStack_144;
  float fStack_140;
  undefined4 uStack_13c;
  undefined4 uStack_138;
  float fStack_134;
  int iStack_12c;
  int iStack_128;
  int iStack_124;
  undefined4 uStack_120;
  undefined4 uStack_11c;
  undefined4 uStack_118;
  undefined **appuStack_dc [36];
  void *pvStack_4c;
  void *pvStack_48;
  void *pvStack_44;
  undefined4 uStack_3c;
  void *pvStack_34;
  void *pvStack_2c;
  void *pvStack_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b4c4fa;
  local_14 = ExceptionList;
  uStack_18c = DAT_00d66fa0 ^ (uint)&stack0xfffffe78;
  ExceptionList = &local_14;
  iVar6 = in_ECX[0x18d];
  local_170 = (float)DAT_00da93ec;
  local_174 = (float)FUN_00a1a840(iVar6);
  if (((local_174 == 0.0) && (local_174 = (float)FUN_00a1a6d0(iVar6), local_174 == 0.0)) &&
     (local_174 = (float)FUN_00a1a780(iVar6), local_174 == 0.0)) {
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,1,1,0);
    ExceptionList = pvStack_44;
    return;
  }
  fVar7 = local_174;
  *(undefined1 *)((int)in_ECX + 0xa5d) = 1;
  iVar6 = *(int *)((int)local_174 + 1000);
  iVar4 = in_ECX[0xfa];
  local_170 = *(float *)(iVar6 + 0x68) - *(float *)(iVar4 + 0x68);
  local_15c = *(float *)(iVar6 + 0x6c) - *(float *)(iVar4 + 0x6c);
  fVar10 = *(float *)(iVar6 + 0x70) - *(float *)(iVar4 + 0x70);
  local_154 = local_170;
  local_150 = local_15c;
  local_14c = fVar10;
  D3DXVec3Normalize(&local_154,&local_154);
  if (((char)in_ECX[0x18c] == '\0') && ((char)in_ECX[0x56b] == '\0')) {
    (**(code **)(*in_ECX + 0x2ac))(local_15c,local_154);
  }
  iVar4 = in_ECX[0x31];
  fVar8 = (float10)FUN_0040f460(fVar10 * fVar10 + fStack_164 * fStack_164 + unaff_EBX * unaff_EBX);
  iVar6 = *(int *)((int)fVar7 + 0xc4) + iVar4;
  fVar9 = (float10)iVar6;
  if (iVar6 < 0) {
    fVar9 = fVar9 + (float10)4.2949673e+09;
  }
  if ((char)in_ECX[0x18e] == '\0') {
    fVar10 = (float)in_ECX[0x695];
    if (in_ECX[0x695] < 0) {
      fVar10 = fVar10 + 4.2949673e+09;
    }
    iVar4 = *(int *)((int)fVar7 + 0xc4) + iVar4;
    fVar2 = (float)iVar4;
    if (iVar4 < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    in_ECX[0x696] = (int)(fVar10 - fVar2);
  }
  if (in_ECX[0x62a] != 0) {
    if (*(char *)(in_ECX[0x62a] + 0x20) == '\0') {
      FUN_00856310(&DAT_00d720f0);
    }
    else {
      cVar3 = FUN_00876040();
      fVar7 = fStack_17c;
      if (cVar3 == '\0') {
        if (*(char *)(in_ECX[0x62a] + 0xec) == '\0') {
          if (*(int *)(in_ECX[0x62a] + 0x30) == 0) goto LAB_00853109;
          iStack_12c = in_ECX[0x560];
          iStack_128 = in_ECX[0x561];
          iStack_124 = in_ECX[0x562];
          D3DXVec3Normalize(&iStack_12c,&iStack_12c);
          local_174 = 0.0;
          local_170 = -1.0;
          fStack_16c = 0.0;
          iVar6 = FUN_007d5b60(appuStack_dc);
          uStack_144 = *(undefined4 *)(iVar6 + 0x20);
          uStack_13c = *(undefined4 *)(iVar6 + 0x28);
          local_14 = (void *)0xffffffff;
          fStack_140 = *(float *)(iVar6 + 0x24) + DAT_00d72c20;
          uStack_120 = 0;
          uStack_11c = 0;
          uStack_118 = 0;
          appuStack_dc[0] = &PTR_FUN_00cd083c;
          fStack_134 = 0.0;
          iVar6 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_174,&uStack_138,
                               &uStack_120,&stack0xfffffe80);
          local_150 = 0.0;
          local_14c = 0.0;
          uStack_148 = 0;
          FUN_007e3cb0(*(undefined4 *)(in_ECX[0xfa] + 0x68),*(undefined4 *)(in_ECX[0xfa] + 0x70),
                       &fStack_164,&uStack_165,&local_150);
          if ((iVar6 == 0) || (fStack_134 <= fStack_164)) {
            D3DXVec3Normalize(&local_150,&local_150);
            puVar12 = &uStack_138;
            FUN_00855280(&local_150);
          }
          else {
            puVar12 = &DAT_00d720f0;
          }
        }
        else {
          puVar12 = &DAT_00d720f0;
        }
      }
      else {
        puVar12 = &DAT_00d720f0;
      }
      FUN_00856310(puVar12);
    }
  }
LAB_00853109:
  if (((float)in_ECX[0x696] == 0.0) || ((float)in_ECX[0x696] < 0.1)) {
    in_ECX[0x696] = 0x3d4ccccd;
  }
  if ((float)(fVar8 - fVar9) < (float)in_ECX[0x696] ||
      (float)(fVar8 - fVar9) == (float)in_ECX[0x696]) {
    cVar3 = FUN_008896a0();
    if (cVar3 == '\0') {
      *(undefined1 *)((int)in_ECX + 0x1877) = 1;
    }
    cVar3 = (char)in_ECX[0x18e];
    if (cVar3 != '\0') {
      if (cVar3 == '\x03') {
        (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
                  (in_ECX + 0x1b6,1,1,0);
        iVar6 = FUN_004049b0(*(undefined4 *)((int)fVar7 + 8));
        if (((iVar6 != 0) && ((*(uint *)(iVar6 + 0x4c) & 0x400000) != 0)) &&
           ((in_ECX[1] == *(int *)(*(int *)(DAT_0172491c + 0x17c) + 4) &&
            ((*DAT_00da9894 != 0 &&
             (piVar1 = *(int **)(*DAT_00da9894 + 0x2cc), piVar1 != (int *)0x0)))))) {
          (**(code **)(*piVar1 + 0x18))(0,300);
        }
        goto LAB_0085341b;
      }
      if ((cVar3 == '\x02') && (cVar3 = FUN_008896a0(), cVar3 == '\0')) {
        DVar5 = timeGetTime();
        in_ECX[0x11f] = DVar5;
        (**(code **)(*in_ECX + 0x188))(0x14,1,0,0,0,0x3f800000);
        ExceptionList = pvStack_34;
        return;
      }
      if ((char)in_ECX[0x18e] != '\x01') {
        DVar5 = timeGetTime();
        in_ECX[0x11f] = DVar5;
        ExceptionList = pvStack_1c;
        return;
      }
      fStack_16c = *(float *)((int)fVar7 + 0x1ac) - (float)in_ECX[0x6b];
      local_174 = *(float *)((int)fVar7 + 0x1a4) - (float)in_ECX[0x69];
      (**(code **)(*in_ECX + 0x2b0))(local_174,fStack_16c,0);
    }
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,1,1,0);
    ExceptionList = pvStack_2c;
    return;
  }
  fStack_164 = local_15c;
  *(undefined1 *)((int)in_ECX + 0x1877) = 0;
  fStack_160 = local_154;
  DVar5 = timeGetTime();
  in_ECX[0x11f] = DVar5;
  if ((float)in_ECX[0x11c] <= 1e-05) {
    in_ECX[0x11c] = in_ECX[0x11b];
  }
  uVar11 = 1;
  (**(code **)(*in_ECX + 0x188))(7,1,0,0,0,0x3f800000);
  (**(code **)(*in_ECX + 0x19c))(7);
  (**(code **)(*in_ECX + 0x254))(1,in_ECX + 1,0);
  cVar3 = FUN_0085f410(in_ECX,uVar11,&uStack_18c);
  if (cVar3 != '\0') {
    in_ECX[0x5b8] = 0;
    ExceptionList = pvStack_44;
    return;
  }
  DVar5 = GetTickCount();
  if (in_ECX[0x5b8] == 0) {
    in_ECX[0x5b8] = DVar5;
  }
  else {
    in_ECX[0x5b7] = DVar5 - in_ECX[0x5b8];
  }
  if ((char)in_ECX[0x18e] != '\x03') {
    if ((((2999 < (uint)in_ECX[0x5b7]) && ((**(code **)(*in_ECX + 0x338))(1), DAT_0172491c != 0)) &&
        (*DAT_00da9894 != 0)) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
      FUN_00406460(L"IDS_CHAR_FINDMOVE_FAILE");
      uStack_3c = 1;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar11 = FUN_0081d120(&uStack_13c);
      uStack_3c = CONCAT31(uStack_3c._1_3_,2);
      (**(code **)(*piVar1 + 0x44))(uVar11,3);
      pvStack_44 = (void *)CONCAT31(pvStack_44._1_3_,1);
      FUN_00406560();
      pvStack_44 = (void *)0xffffffff;
      FUN_00406560();
      ExceptionList = pvStack_4c;
      return;
    }
    ExceptionList = pvStack_44;
    return;
  }
  (**(code **)(*in_ECX + 0x338))(1);
LAB_0085341b:
  FUN_00a0d390(DAT_017247d4,2);
  ExceptionList = pvStack_48;
  return;
}



============================================================
DISASSEMBLY
============================================================
00852d50 : PUSH EBP
00852d51 : MOV EBP,ESP
00852d53 : AND ESP,0xfffffff8
00852d56 : PUSH -0x1
00852d58 : PUSH 0xb4c4fa
00852d5d : MOV EAX,FS:[0x0]
00852d63 : PUSH EAX
00852d64 : SUB ESP,0x168
00852d6a : PUSH EBX
00852d6b : PUSH ESI
00852d6c : PUSH EDI
00852d6d : MOV EAX,[0x00d66fa0]
00852d72 : XOR EAX,ESP
00852d74 : PUSH EAX
00852d75 : LEA EAX,[ESP + 0x178]
00852d7c : MOV FS:[0x0],EAX
00852d82 : MOV EBX,ECX
00852d84 : MOV ESI,dword ptr [EBX + 0x634]
00852d8a : MOV ECX,dword ptr [0x00da93ec]
00852d90 : PUSH ESI
00852d91 : MOV dword ptr [ESP + 0x20],ECX
00852d95 : CALL 0x00a1a840
00852d9a : MOV EDI,EAX
00852d9c : MOV dword ptr [ESP + 0x18],EDI
00852da0 : TEST EDI,EDI
00852da2 : JNZ 0x00852dd0
00852da4 : MOV EDI,dword ptr [ESP + 0x1c]
00852da8 : PUSH ESI
00852da9 : MOV ECX,EDI
00852dab : CALL 0x00a1a6d0
00852db0 : MOV dword ptr [ESP + 0x18],EAX
00852db4 : TEST EAX,EAX
00852db6 : JNZ 0x00852dcc
00852db8 : PUSH ESI
00852db9 : MOV ECX,EDI
00852dbb : CALL 0x00a1a780
00852dc0 : MOV dword ptr [ESP + 0x18],EAX
00852dc4 : TEST EAX,EAX
00852dc6 : JZ 0x00853551
00852dcc : MOV EDI,dword ptr [ESP + 0x18]
00852dd0 : MOV byte ptr [EBX + 0xa5d],0x1
00852dd7 : MOV EAX,dword ptr [EDI + 0x3e8]
00852ddd : MOVSS XMM0,dword ptr [EAX + 0x68]
00852de2 : MOVSS XMM1,dword ptr [EAX + 0x6c]
00852de7 : MOVSS XMM2,dword ptr [EAX + 0x70]
00852dec : ADD EAX,0x68
00852def : MOV EAX,dword ptr [EBX + 0x3e8]
00852df5 : SUBSS XMM0,dword ptr [EAX + 0x68]
00852dfa : SUBSS XMM1,dword ptr [EAX + 0x6c]
00852dff : SUBSS XMM2,dword ptr [EAX + 0x70]
00852e04 : ADD EAX,0x68
00852e07 : LEA EAX,[ESP + 0x38]
00852e0b : PUSH EAX
00852e0c : MOV ECX,EAX
00852e0e : PUSH ECX
00852e0f : MOVSS dword ptr [ESP + 0x24],XMM0
00852e15 : MOVSS dword ptr [ESP + 0x38],XMM1
00852e1b : MOVSS dword ptr [ESP + 0x1c],XMM2
00852e21 : MOVSS dword ptr [ESP + 0x40],XMM0
00852e27 : MOVSS dword ptr [ESP + 0x44],XMM1
00852e2d : MOVSS dword ptr [ESP + 0x48],XMM2
00852e33 : CALL 0x004ff722
00852e38 : CMP byte ptr [EBX + 0x630],0x0
00852e3f : JNZ 0x00852e68
00852e41 : CMP byte ptr [EBX + 0x15ac],0x0
00852e48 : JNZ 0x00852e68
00852e4a : FLD float ptr [ESP + 0x40]
00852e4e : MOV EDX,dword ptr [EBX]
00852e50 : MOV EAX,dword ptr [EDX + 0x2ac]
00852e56 : SUB ESP,0x8
00852e59 : FSTP float ptr [ESP + 0x4]
00852e5d : MOV ECX,EBX
00852e5f : FLD float ptr [ESP + 0x40]
00852e63 : FSTP float ptr [ESP]
00852e66 : CALL EAX
00852e68 : MOVSS XMM0,dword ptr [ESP + 0x1c]
00852e6e : MOV ESI,dword ptr [EBX + 0xc4]
00852e74 : MOVAPS XMM1,XMM0
00852e77 : MULSS XMM1,XMM0
00852e7b : MOVSS XMM0,dword ptr [ESP + 0x30]
00852e81 : MOVAPS XMM2,XMM0
00852e84 : MULSS XMM2,XMM0
00852e88 : MOVSS XMM0,dword ptr [ESP + 0x14]
00852e8e : ADDSS XMM1,XMM2
00852e92 : MOVAPS XMM2,XMM0
00852e95 : MULSS XMM2,XMM0
00852e99 : PUSH ECX
00852e9a : ADDSS XMM1,XMM2
00852e9e : MOVSS dword ptr [ESP],XMM1
00852ea3 : CALL 0x0040f460
00852ea8 : MOV EAX,dword ptr [EDI + 0xc4]
00852eae : LEA ECX,[EAX + ESI*0x1]
00852eb1 : ADD ESP,0x4
00852eb4 : MOV dword ptr [ESP + 0x14],ECX
00852eb8 : FILD dword ptr [ESP + 0x14]
00852ebc : TEST ECX,ECX
00852ebe : JGE 0x00852ec6
00852ec0 : FADD float ptr [0x00cdf0e0]
00852ec6 : CMP byte ptr [EBX + 0x638],0x0
00852ecd : FSUBP
00852ecf : FSTP float ptr [ESP + 0x1c]
00852ed3 : JNZ 0x00852f07
00852ed5 : MOV EDX,dword ptr [EBX + 0x1a54]
00852edb : FILD dword ptr [EBX + 0x1a54]
00852ee1 : TEST EDX,EDX
00852ee3 : JGE 0x00852eeb
00852ee5 : FADD float ptr [0x00cdf0e0]
00852eeb : ADD EAX,ESI
00852eed : MOV dword ptr [ESP + 0x14],EAX
00852ef1 : FILD dword ptr [ESP + 0x14]
00852ef5 : TEST EAX,EAX
00852ef7 : JGE 0x00852eff
00852ef9 : FADD float ptr [0x00cdf0e0]
00852eff : FSUBP
00852f01 : FSTP float ptr [EBX + 0x1a58]
00852f07 : MOV EAX,dword ptr [EBX + 0x18a8]
00852f0d : TEST EAX,EAX
00852f0f : JZ 0x00853109
00852f15 : CMP byte ptr [EAX + 0x20],0x0
00852f19 : JNZ 0x00852f2c
00852f1b : PUSH 0xd720f0
00852f20 : MOV ESI,EBX
00852f22 : CALL 0x00856310
00852f27 : JMP 0x00853109
00852f2c : MOV EAX,dword ptr [EBX + 0x138]
00852f32 : MOV ECX,dword ptr [EAX + 0x4]
00852f35 : LEA ESI,[EBX + 0x1c58]
00852f3b : LEA EDI,[ECX + EBX*0x1 + 0x138]
00852f42 : CALL 0x00876040
00852f47 : TEST AL,AL
00852f49 : JZ 0x00852f55
00852f4b : PUSH 0xd720f0
00852f50 : JMP 0x008530fe
00852f55 : MOV EAX,dword ptr [EBX + 0x18a8]
00852f5b : CMP byte ptr [EAX + 0xec],0x0
00852f62 : JZ 0x00852f6e
00852f64 : PUSH 0xd720f0
00852f69 : JMP 0x008530fe
00852f6e : CMP dword ptr [EAX + 0x30],0x0
00852f72 : JZ 0x00853105
00852f78 : MOVSS XMM0,dword ptr [EBX + 0x1580]
00852f80 : MOVSS XMM1,dword ptr [EBX + 0x1584]
00852f88 : MOVSS XMM2,dword ptr [EBX + 0x1588]
00852f90 : LEA EDX,[ESP + 0x68]
00852f94 : PUSH EDX
00852f95 : MOV EAX,EDX
00852f97 : PUSH EAX
00852f98 : MOVSS dword ptr [ESP + 0x70],XMM0
00852f9e : MOVSS dword ptr [ESP + 0x74],XMM1
00852fa4 : MOVSS dword ptr [ESP + 0x78],XMM2
00852faa : CALL 0x004ff722
00852faf : XORPS XMM0,XMM0
00852fb2 : MOVSS XMM1,dword ptr [0x00cdf0d0]
00852fba : LEA ECX,[ESP + 0xb8]
00852fc1 : PUSH ECX
00852fc2 : MOV ECX,dword ptr [EBX + 0x3e8]
00852fc8 : MOVSS dword ptr [ESP + 0x24],XMM0
00852fce : MOVSS dword ptr [ESP + 0x28],XMM1
00852fd4 : MOVSS dword ptr [ESP + 0x2c],XMM0
00852fda : CALL 0x007d5b60
00852fdf : MOV dword ptr [ESP + 0x180],0x0
00852fea : MOVSS XMM0,dword ptr [EAX + 0x20]
00852fef : MOVSS XMM1,dword ptr [EAX + 0x24]
00852ff4 : MOVSS XMM2,dword ptr [EAX + 0x28]
00852ff9 : MOVSS dword ptr [ESP + 0x50],XMM0
00852fff : MOVSS dword ptr [ESP + 0x54],XMM1
00853005 : MOVSS dword ptr [ESP + 0x58],XMM2
0085300b : MOV dword ptr [ESP + 0x180],0xffffffff
00853016 : MOVSS XMM0,dword ptr [ESP + 0x54]
0085301c : ADDSS XMM0,dword ptr [0x00d72c20]
00853024 : MOV EDX,dword ptr [0x00da93ec]
0085302a : MOVSS dword ptr [ESP + 0x54],XMM0
00853030 : XORPS XMM0,XMM0
00853033 : MOVSS dword ptr [ESP + 0x74],XMM0
00853039 : MOVSS dword ptr [ESP + 0x78],XMM0
0085303f : MOVSS dword ptr [ESP + 0x7c],XMM0
00853045 : MOVSS dword ptr [ESP + 0x14],XMM0
0085304b : LEA ECX,[ESP + 0x14]
0085304f : PUSH ECX
00853050 : MOV dword ptr [ESP + 0xbc],0xcd083c
0085305b : MOV EAX,dword ptr [EDX + 0xc]
0085305e : LEA EDX,[ESP + 0x78]
00853062 : PUSH EDX
00853063 : LEA ECX,[ESP + 0x64]
00853067 : PUSH ECX
00853068 : LEA EDX,[ESP + 0x2c]
0085306c : PUSH EDX
0085306d : PUSH EAX
0085306e : LEA EDI,[ESP + 0x64]
00853072 : MOVSS dword ptr [ESP + 0x74],XMM0
00853078 : CALL 0x007e9d70
0085307d : XORPS XMM0,XMM0
00853080 : LEA ECX,[ESP + 0x44]
00853084 : PUSH ECX
00853085 : MOV ESI,EAX
00853087 : MOV EAX,[0x00da93ec]
0085308c : MOVSS dword ptr [ESP + 0x48],XMM0
00853092 : MOVSS dword ptr [ESP + 0x4c],XMM0
00853098 : MOVSS dword ptr [ESP + 0x50],XMM0
0085309e : MOV EDI,dword ptr [EAX + 0xc]
008530a1 : MOV EAX,dword ptr [EBX + 0x3e8]
008530a7 : FLD float ptr [EAX + 0x70]
008530aa : LEA EDX,[ESP + 0x33]
008530ae : PUSH EDX
008530af : LEA ECX,[ESP + 0x38]
008530b3 : PUSH ECX
008530b4 : SUB ESP,0x8
008530b7 : FSTP float ptr [ESP + 0x4]
008530bb : FLD float ptr [EAX + 0x68]
008530be : FSTP float ptr [ESP]
008530c1 : CALL 0x007e3cb0
008530c6 : TEST ESI,ESI
008530c8 : JZ 0x008530de
008530ca : MOVSS XMM0,dword ptr [ESP + 0x60]
008530d0 : COMISS XMM0,dword ptr [ESP + 0x30]
008530d5 : JBE 0x008530de
008530d7 : PUSH 0xd720f0
008530dc : JMP 0x008530fe
008530de : LEA EDX,[ESP + 0x44]
008530e2 : PUSH EDX
008530e3 : MOV EAX,EDX
008530e5 : PUSH EAX
008530e6 : CALL 0x004ff722
008530eb : LEA ECX,[ESP + 0x44]
008530ef : PUSH ECX
008530f0 : LEA EDI,[ESP + 0x60]
008530f4 : MOV EAX,EBX
008530f6 : CALL 0x00855280
008530fb : MOV EDX,EDI
008530fd : PUSH EDX
008530fe : MOV ESI,EBX
00853100 : CALL 0x00856310
00853105 : MOV EDI,dword ptr [ESP + 0x18]
00853109 : MOVSS XMM0,dword ptr [EBX + 0x1a58]
00853111 : UCOMISS XMM0,dword ptr [0x00b9b0b4]
00853118 : LAHF
00853119 : TEST AH,0x44
0085311c : JNP 0x0085312b
0085311e : MOVSS XMM1,dword ptr [0x00cdf0f0]
00853126 : COMISS XMM1,XMM0
00853129 : JBE 0x0085313b
0085312b : MOVSS XMM0,dword ptr [0x00cdf0f4]
00853133 : MOVSS dword ptr [EBX + 0x1a58],XMM0
0085313b : MOVSS XMM0,dword ptr [ESP + 0x1c]
00853141 : COMISS XMM0,dword ptr [EBX + 0x1a58]
00853148 : JBE 0x00853379
0085314e : MOVSS XMM0,dword ptr [ESP + 0x38]
00853154 : MOV ESI,dword ptr [EBX + 0x47c]
0085315a : MOVSS dword ptr [ESP + 0x30],XMM0
00853160 : MOVSS XMM0,dword ptr [ESP + 0x40]
00853166 : MOV byte ptr [EBX + 0x1877],0x0
0085316d : MOVSS dword ptr [ESP + 0x34],XMM0
00853173 : CALL dword ptr [0x00b85598]
00853179 : MOVSS XMM0,dword ptr [0x00cdf32c]
00853181 : COMISS XMM0,dword ptr [EBX + 0x470]
00853188 : MOV dword ptr [EBX + 0x47c],EAX
0085318e : JC 0x0085319c
00853190 : FLD float ptr [EBX + 0x46c]
00853196 : FSTP float ptr [EBX + 0x470]
0085319c : SUB EAX,ESI
0085319e : MOV dword ptr [ESP + 0x14],EAX
008531a2 : FILD dword ptr [ESP + 0x14]
008531a6 : TEST EAX,EAX
008531a8 : JGE 0x008531b0
008531aa : FADD float ptr [0x00cdf0e0]
008531b0 : FMUL float ptr [EBX + 0x470]
008531b6 : MOV EAX,dword ptr [EBX]
008531b8 : MOV EDX,dword ptr [EAX + 0x188]
008531be : PUSH ECX
008531bf : FSTP float ptr [ESP + 0x18]
008531c3 : MOV ECX,EBX
008531c5 : FLD1
008531c7 : FSTP float ptr [ESP]
008531ca : PUSH 0x0
008531cc : PUSH 0x0
008531ce : PUSH 0x0
008531d0 : PUSH 0x1
008531d2 : PUSH 0x7
008531d4 : CALL EDX
008531d6 : MOV EAX,dword ptr [EBX]
008531d8 : MOV EDX,dword ptr [EAX + 0x19c]
008531de : PUSH 0x7
008531e0 : MOV ECX,EBX
008531e2 : CALL EDX
008531e4 : MOV EAX,dword ptr [EBX]
008531e6 : MOV EDX,dword ptr [EAX + 0x254]
008531ec : PUSH 0x0
008531ee : LEA ECX,[EBX + 0x4]
008531f1 : PUSH ECX
008531f2 : PUSH 0x1
008531f4 : MOV ECX,EBX
008531f6 : CALL EDX
008531f8 : FLD float ptr [ESP + 0x14]
008531fc : MOV EAX,dword ptr [EBX + 0x3e8]
00853202 : MOVSS XMM0,dword ptr [EAX + 0x68]
00853207 : MOVSS XMM1,dword ptr [EAX + 0x6c]
0085320c : MOVSS XMM2,dword ptr [EAX + 0x70]
00853211 : ADD EAX,0x68
00853214 : LEA EAX,[ESP + 0x30]
00853218 : PUSH EAX
00853219 : PUSH ECX
0085321a : FSTP float ptr [ESP]
0085321d : PUSH EBX
0085321e : LEA EAX,[ESP + 0x2c]
00853222 : MOVSS dword ptr [ESP + 0x2c],XMM0
00853228 : MOVSS dword ptr [ESP + 0x30],XMM1
0085322e : MOVSS dword ptr [ESP + 0x34],XMM2
00853234 : CALL 0x0085f410
00853239 : TEST AL,AL
0085323b : JNZ 0x00853359
00853241 : CALL dword ptr [0x00b850d8]
00853247 : MOV ECX,dword ptr [EBX + 0x16e0]
0085324d : TEST ECX,ECX
0085324f : JNZ 0x00853259
00853251 : MOV dword ptr [EBX + 0x16e0],EAX
00853257 : JMP 0x00853261
00853259 : SUB EAX,ECX
0085325b : MOV dword ptr [EBX + 0x16dc],EAX
00853261 : CMP byte ptr [EBX + 0x638],0x3
00853268 : JNZ 0x0085327d
0085326a : MOV EDX,dword ptr [EBX]
0085326c : MOV EAX,dword ptr [EDX + 0x338]
00853272 : PUSH 0x1
00853274 : MOV ECX,EBX
00853276 : CALL EAX
00853278 : JMP 0x0085341b
0085327d : CMP dword ptr [EBX + 0x16dc],0xbb8
00853287 : JC 0x0085357a
0085328d : MOV EDX,dword ptr [EBX]
0085328f : MOV EAX,dword ptr [EDX + 0x338]
00853295 : PUSH 0x1
00853297 : MOV ECX,EBX
00853299 : CALL EAX
0085329b : CMP dword ptr [0x0172491c],0x0
008532a2 : JZ 0x0085357a
008532a8 : MOV ECX,dword ptr [0x00da9894]
008532ae : MOV EAX,dword ptr [ECX]
008532b0 : TEST EAX,EAX
008532b2 : JZ 0x0085357a
008532b8 : CMP dword ptr [EAX + 0x1a8],0x0
008532bf : JZ 0x0085357a
008532c5 : PUSH 0xc3d4d0
008532ca : LEA ECX,[ESP + 0x84]
008532d1 : CALL 0x00406460
008532d6 : MOV dword ptr [ESP + 0x180],0x1
008532e1 : MOV EDX,dword ptr [0x00da9894]
008532e7 : MOV EAX,dword ptr [EDX]
008532e9 : MOV ESI,dword ptr [EAX + 0x1a8]
008532ef : MOV ECX,dword ptr [0x0172491c]
008532f5 : LEA EAX,[ESP + 0x80]
008532fc : PUSH EAX
008532fd : LEA EDI,[ESP + 0xa0]
00853304 : CALL 0x0081d120
00853309 : MOV byte ptr [ESP + 0x180],0x2
00853311 : MOV EDX,dword ptr [ESI]
00853313 : PUSH 0x3
00853315 : PUSH EAX
00853316 : MOV EAX,dword ptr [EDX + 0x44]
00853319 : MOV ECX,ESI
0085331b : CALL EAX
0085331d : MOV byte ptr [ESP + 0x180],0x1
00853325 : MOV ECX,EDI
00853327 : CALL 0x00406560
0085332c : MOV dword ptr [ESP + 0x180],0xffffffff
00853337 : LEA ECX,[ESP + 0x80]
0085333e : CALL 0x00406560
00853343 : MOV ECX,dword ptr [ESP + 0x178]
0085334a : MOV dword ptr FS:[0x0],ECX
00853351 : POP ECX
00853352 : POP EDI
00853353 : POP ESI
00853354 : POP EBX
00853355 : MOV ESP,EBP
00853357 : POP EBP
00853358 : RET
00853359 : MOV dword ptr [EBX + 0x16e0],0x0
00853363 : MOV ECX,dword ptr [ESP + 0x178]
0085336a : MOV dword ptr FS:[0x0],ECX
00853371 : POP ECX
00853372 : POP EDI
00853373 : POP ESI
00853374 : POP EBX
00853375 : MOV ESP,EBP
00853377 : POP EBP
00853378 : RET
00853379 : MOV EAX,EDI
0085337b : CALL 0x008896a0
00853380 : TEST AL,AL
00853382 : JNZ 0x0085338b
00853384 : MOV byte ptr [EBX + 0x1877],0x1
0085338b : MOV AL,byte ptr [EBX + 0x638]
00853391 : TEST AL,AL
00853393 : JZ 0x008534f0
00853399 : CMP AL,0x3
0085339b : JNZ 0x00853442
008533a1 : MOV EAX,dword ptr [EBX + 0x138]
008533a7 : MOV ECX,dword ptr [EAX + 0x4]
008533aa : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x138]
008533b1 : MOV EDX,dword ptr [EDX + 0x10]
008533b4 : PUSH 0x0
008533b6 : PUSH 0x1
008533b8 : LEA ECX,[ECX + EBX*0x1 + 0x138]
008533bf : PUSH 0x1
008533c1 : LEA EAX,[EBX + 0x6d8]
008533c7 : PUSH EAX
008533c8 : CALL EDX
008533ca : MOV EAX,dword ptr [EDI + 0x8]
008533cd : PUSH EAX
008533ce : CALL 0x004049b0
008533d3 : ADD ESP,0x4
008533d6 : TEST EAX,EAX
008533d8 : JZ 0x0085341b
008533da : TEST dword ptr [EAX + 0x4c],0x400000
008533e1 : JZ 0x0085341b
008533e3 : MOV ECX,dword ptr [0x0172491c]
008533e9 : MOV EDX,dword ptr [ECX + 0x17c]
008533ef : MOV EAX,dword ptr [EBX + 0x4]
008533f2 : CMP EAX,dword ptr [EDX + 0x4]
008533f5 : JNZ 0x0085341b
008533f7 : MOV ECX,dword ptr [0x00da9894]
008533fd : MOV EAX,dword ptr [ECX]
008533ff : TEST EAX,EAX
00853401 : JZ 0x0085341b
00853403 : MOV ECX,dword ptr [EAX + 0x2cc]
00853409 : TEST ECX,ECX
0085340b : JZ 0x0085341b
0085340d : MOV EDX,dword ptr [ECX]
0085340f : MOV EAX,dword ptr [EDX + 0x18]
00853412 : PUSH 0x12c
00853417 : PUSH 0x0
00853419 : CALL EAX
0085341b : MOV ECX,dword ptr [0x017247d4]
00853421 : PUSH 0x2
00853423 : PUSH ECX
00853424 : MOV ECX,dword ptr [EDI + 0x4]
00853427 : CALL 0x00a0d390
0085342c : MOV ECX,dword ptr [ESP + 0x178]
00853433 : MOV dword ptr FS:[0x0],ECX
0085343a : POP ECX
0085343b : POP EDI
0085343c : POP ESI
0085343d : POP EBX
0085343e : MOV ESP,EBP
00853440 : POP EBP
00853441 : RET
00853442 : CMP AL,0x2
00853444 : JNZ 0x0085348f
00853446 : MOV EAX,EDI
00853448 : CALL 0x008896a0
0085344d : TEST AL,AL
0085344f : JNZ 0x0085348f
00853451 : CALL dword ptr [0x00b85598]
00853457 : FLD1
00853459 : MOV EDX,dword ptr [EBX]
0085345b : PUSH ECX
0085345c : FSTP float ptr [ESP]
0085345f : PUSH 0x0
00853461 : PUSH 0x0
00853463 : PUSH 0x0
00853465 : PUSH 0x1
00853467 : MOV dword ptr [EBX + 0x47c],EAX
0085346d : MOV EAX,dword ptr [EDX + 0x188]
00853473 : PUSH 0x14
00853475 : MOV ECX,EBX
00853477 : CALL EAX
00853479 : MOV ECX,dword ptr [ESP + 0x178]
00853480 : MOV dword ptr FS:[0x0],ECX
00853487 : POP ECX
00853488 : POP EDI
00853489 : POP ESI
0085348a : POP EBX
0085348b : MOV ESP,EBP
0085348d : POP EBP
0085348e : RET
0085348f : CMP byte ptr [EBX + 0x638],0x1
00853496 : JNZ 0x0085352f
0085349c : MOVSS XMM3,dword ptr [EBX + 0x1ac]
008534a4 : MOVSS XMM1,dword ptr [EDI + 0x1ac]
008534ac : MOVSS XMM2,dword ptr [EBX + 0x1a4]
008534b4 : MOVSS XMM0,dword ptr [EDI + 0x1a4]
008534bc : MOV EDX,dword ptr [EBX]
008534be : MOV EAX,dword ptr [EDX + 0x2b0]
008534c4 : SUBSS XMM1,XMM3
008534c8 : PUSH 0x0
008534ca : MOVSS dword ptr [ESP + 0x2c],XMM1
008534d0 : FLD float ptr [ESP + 0x2c]
008534d4 : SUB ESP,0x8
008534d7 : FSTP float ptr [ESP + 0x4]
008534db : SUBSS XMM0,XMM2
008534df : MOVSS dword ptr [ESP + 0x2c],XMM0
008534e5 : FLD float ptr [ESP + 0x2c]
008534e9 : MOV ECX,EBX
008534eb : FSTP float ptr [ESP]
008534ee : CALL EAX
008534f0 : MOV ECX,dword ptr [EBX + 0x138]
008534f6 : MOV EDX,dword ptr [ECX + 0x4]
008534f9 : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
00853500 : PUSH 0x0
00853502 : LEA ECX,[EDX + EBX*0x1 + 0x138]
00853509 : MOV EDX,dword ptr [EAX + 0x10]
0085350c : PUSH 0x1
0085350e : PUSH 0x1
00853510 : ADD EBX,0x6d8
00853516 : PUSH EBX
00853517 : CALL EDX
00853519 : MOV ECX,dword ptr [ESP + 0x178]
00853520 : MOV dword ptr FS:[0x0],ECX
00853527 : POP ECX
00853528 : POP EDI
00853529 : POP ESI
0085352a : POP EBX
0085352b : MOV ESP,EBP
0085352d : POP EBP
0085352e : RET
0085352f : CALL dword ptr [0x00b85598]
00853535 : MOV dword ptr [EBX + 0x47c],EAX
0085353b : MOV ECX,dword ptr [ESP + 0x178]
00853542 : MOV dword ptr FS:[0x0],ECX
00853549 : POP ECX
0085354a : POP EDI
0085354b : POP ESI
0085354c : POP EBX
0085354d : MOV ESP,EBP
0085354f : POP EBP
00853550 : RET
00853551 : MOV EAX,dword ptr [EBX + 0x138]
00853557 : MOV ECX,dword ptr [EAX + 0x4]
0085355a : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x138]
00853561 : MOV EAX,dword ptr [EDX + 0x10]
00853564 : PUSH 0x0
00853566 : LEA ECX,[ECX + EBX*0x1 + 0x138]
0085356d : PUSH 0x1
0085356f : PUSH 0x1
00853571 : ADD EBX,0x6d8
00853577 : PUSH EBX
00853578 : CALL EAX
0085357a : MOV ECX,dword ptr [ESP + 0x178]
00853581 : MOV dword ptr FS:[0x0],ECX
00853588 : POP ECX
00853589 : POP EDI
0085358a : POP ESI
0085358b : POP EBX
0085358c : MOV ESP,EBP
0085358e : POP EBP
0085358f : RET
