PROGRAM  : Maestia.exe
FUNCTION : FUN_009aa9d0
ENTRY    : 009aa9d0
BODY     : [[009aa9d0, 009aac36]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009aa9d0(int param_1,char param_2)

{
  uint uVar1;
  DWORD DVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  int iVar5;
  undefined1 auStack_5c [4];
  int aiStack_58 [2];
  undefined2 uStack_50;
  undefined4 uStack_40;
  uint uStack_3c;
  undefined1 local_38 [4];
  undefined4 local_34;
  uint local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b2d6e8;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_5c;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xffffff98;
  ExceptionList = &local_14;
  if (*(char *)(param_1 + 0x32) == '\0') goto LAB_009aac17;
  FUN_00406460(&DAT_00c8aa2c);
  local_c = 0;
  if (param_2 == '\0') {
    DVar2 = timeGetTime();
    if (1999 < DVar2 - *(int *)(param_1 + 0x48)) {
      if ((*(char *)(DAT_00da93ec + 0x788) == '\0') && (*(char *)(DAT_00da93ec + 0x789) == '\0')) {
        FUN_009aa410();
        *(undefined1 *)(param_1 + 0x4c) = 0;
        *(undefined4 *)(param_1 + 0x48) = 0;
      }
      else if ((*(int *)(param_1 + 0x40) != 0) &&
              ((*(char *)(param_1 + 0x4c) != '\0' && (*(int *)(param_1 + 0x44) != 0))))
      goto LAB_009aaa8c;
    }
    local_c = 0xffffffff;
    FUN_00406560();
  }
  else {
LAB_009aaa8c:
    if ((local_24 < 0x1001) && (local_20 != 0x1000)) {
      if (local_20 < 0x1000) {
        FUN_00406170(0x1000,local_24,uVar1);
      }
      puVar3 = local_34;
      if (local_20 < 8) {
        puVar3 = &local_34;
      }
      *(undefined2 *)((int)puVar3 + local_24 * 2) = 0;
    }
    FUN_009aa910(local_38);
    aiStack_58[0] = **(int **)(param_1 + 0x3c);
    if ((int *)aiStack_58[0] == *(int **)(param_1 + 0x3c)) {
      FUN_00405c00(local_38);
    }
    else {
      do {
        uVar4 = FUN_009aa4f0(*(undefined4 *)(aiStack_58[0] + 0x10));
        local_c._0_1_ = 1;
        FUN_00405c30(uVar4,0,0xffffffff);
        local_c = (uint)local_c._1_3_ << 8;
        if (7 < uStack_3c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        uStack_40 = 0;
        uStack_3c = 7;
        uStack_50 = 0;
        FUN_00404870(&DAT_00c8aa30,1);
        FUN_00416210();
      } while (aiStack_58[0] != *(int *)(param_1 + 0x3c));
      if (local_24 != 0) {
        aiStack_58[0] = 0x7c;
        iVar5 = FUN_00407cc0(aiStack_58,1);
        if (iVar5 != -1) {
          FUN_00405e10(iVar5,1);
        }
      }
    }
    iVar5 = *DAT_00da9894;
    if ((iVar5 != 0) && (*(int *)(iVar5 + 0x114) != 0)) {
      puVar3 = local_34;
      if (local_20 < 8) {
        puVar3 = &local_34;
      }
      (**(code **)(**(int **)(iVar5 + 0x114) + 4))
                (*(int **)(iVar5 + 0x114),"mc_DamageMeter.UpdatePlayerList",&DAT_00c8aa38,puVar3);
    }
    *(undefined1 *)(param_1 + 0x4c) = 0;
    DVar2 = timeGetTime();
    *(DWORD *)(param_1 + 0x48) = DVar2;
    local_c = 0xffffffff;
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_20 = 7;
    local_24 = 0;
    local_34 = (undefined4 *)((uint)local_34._2_2_ << 0x10);
  }
LAB_009aac17:
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_5c);
  return;
}



============================================================
DISASSEMBLY
============================================================
009aa9d0 : PUSH EBP
009aa9d1 : MOV EBP,ESP
009aa9d3 : AND ESP,0xfffffff8
009aa9d6 : PUSH -0x1
009aa9d8 : PUSH 0xb2d6e8
009aa9dd : MOV EAX,FS:[0x0]
009aa9e3 : PUSH EAX
009aa9e4 : SUB ESP,0x48
009aa9e7 : MOV EAX,[0x00d66fa0]
009aa9ec : XOR EAX,ESP
009aa9ee : MOV dword ptr [ESP + 0x40],EAX
009aa9f2 : PUSH EBX
009aa9f3 : PUSH ESI
009aa9f4 : PUSH EDI
009aa9f5 : MOV EAX,[0x00d66fa0]
009aa9fa : XOR EAX,ESP
009aa9fc : PUSH EAX
009aa9fd : LEA EAX,[ESP + 0x58]
009aaa01 : MOV FS:[0x0],EAX
009aaa07 : MOV EBX,dword ptr [EBP + 0x8]
009aaa0a : MOV AL,byte ptr [EBX + 0x32]
009aaa0d : TEST AL,AL
009aaa0f : JZ 0x009aac17
009aaa15 : PUSH 0xc8aa2c
009aaa1a : LEA ECX,[ESP + 0x38]
009aaa1e : CALL 0x00406460
009aaa23 : XOR ESI,ESI
009aaa25 : MOV dword ptr [ESP + 0x60],ESI
009aaa29 : CMP byte ptr [EBP + 0xc],0x0
009aaa2d : JNZ 0x009aaa8c
009aaa2f : CALL dword ptr [0x00b85598]
009aaa35 : SUB EAX,dword ptr [EBX + 0x48]
009aaa38 : CMP EAX,0x7d0
009aaa3d : JC 0x009aaa66
009aaa3f : MOV EAX,[0x00da93ec]
009aaa44 : CMP byte ptr [EAX + 0x788],0x0
009aaa4b : JNZ 0x009aaa7c
009aaa4d : CMP byte ptr [EAX + 0x789],0x0
009aaa54 : JNZ 0x009aaa7c
009aaa56 : LEA ECX,[ESP + 0x34]
009aaa5a : CALL 0x009aa410
009aaa5f : MOV byte ptr [EBX + 0x4c],0x0
009aaa63 : MOV dword ptr [EBX + 0x48],ESI
009aaa66 : MOV dword ptr [ESP + 0x60],0xffffffff
009aaa6e : LEA ECX,[ESP + 0x34]
009aaa72 : CALL 0x00406560
009aaa77 : JMP 0x009aac17
009aaa7c : CMP dword ptr [EBX + 0x40],ESI
009aaa7f : JZ 0x009aaa66
009aaa81 : CMP byte ptr [EBX + 0x4c],0x0
009aaa85 : JZ 0x009aaa66
009aaa87 : CMP dword ptr [EBX + 0x44],ESI
009aaa8a : JBE 0x009aaa66
009aaa8c : MOV ECX,dword ptr [ESP + 0x48]
009aaa90 : CMP ECX,0x1000
009aaa96 : JA 0x009aaad1
009aaa98 : MOV EAX,dword ptr [ESP + 0x4c]
009aaa9c : CMP EAX,0x1000
009aaaa1 : JZ 0x009aaad1
009aaaa3 : MOV EDI,ECX
009aaaa5 : JNC 0x009aaaba
009aaaa7 : PUSH ECX
009aaaa8 : PUSH 0x1000
009aaaad : LEA ECX,[ESP + 0x3c]
009aaab1 : CALL 0x00406170
009aaab6 : MOV EAX,dword ptr [ESP + 0x4c]
009aaaba : CMP EAX,0x8
009aaabd : MOV EAX,dword ptr [ESP + 0x38]
009aaac1 : MOV dword ptr [ESP + 0x48],EDI
009aaac5 : JNC 0x009aaacb
009aaac7 : LEA EAX,[ESP + 0x38]
009aaacb : XOR ECX,ECX
009aaacd : MOV word ptr [EAX + EDI*0x2],CX
009aaad1 : LEA EDX,[ESP + 0x34]
009aaad5 : PUSH EDX
009aaad6 : MOV ECX,EBX
009aaad8 : CALL 0x009aa910
009aaadd : MOV ECX,dword ptr [EBX + 0x3c]
009aaae0 : MOV EAX,dword ptr [ECX]
009aaae2 : MOV dword ptr [ESP + 0x14],EAX
009aaae6 : CMP EAX,ECX
009aaae8 : JZ 0x009aab91
009aaaee : MOV EDI,EDI
009aaaf0 : MOV EAX,dword ptr [EAX + 0x10]
009aaaf3 : PUSH EAX
009aaaf4 : LEA ECX,[ESP + 0x1c]
009aaaf8 : MOV EDX,EBX
009aaafa : CALL 0x009aa4f0
009aaaff : MOV byte ptr [ESP + 0x60],0x1
009aab04 : PUSH -0x1
009aab06 : PUSH ESI
009aab07 : PUSH EAX
009aab08 : LEA ECX,[ESP + 0x40]
009aab0c : CALL 0x00405c30
009aab11 : MOV byte ptr [ESP + 0x60],0x0
009aab16 : CMP dword ptr [ESP + 0x30],0x8
009aab1b : JC 0x009aab26
009aab1d : MOV ECX,dword ptr [ESP + 0x1c]
009aab21 : CALL 0x006f04e0
009aab26 : PUSH 0x1
009aab28 : XOR ECX,ECX
009aab2a : MOV dword ptr [ESP + 0x30],ESI
009aab2e : PUSH 0xc8aa30
009aab33 : LEA ESI,[ESP + 0x3c]
009aab37 : MOV dword ptr [ESP + 0x38],0x7
009aab3f : MOV word ptr [ESP + 0x24],CX
009aab44 : CALL 0x00404870
009aab49 : LEA EDX,[ESP + 0x14]
009aab4d : CALL 0x00416210
009aab52 : MOV ECX,dword ptr [EBX + 0x3c]
009aab55 : MOV EAX,dword ptr [ESP + 0x14]
009aab59 : XOR ESI,ESI
009aab5b : CMP EAX,ECX
009aab5d : JNZ 0x009aaaf0
009aab5f : CMP dword ptr [ESP + 0x48],ESI
009aab63 : JZ 0x009aaba0
009aab65 : PUSH 0x1
009aab67 : LEA EDX,[ESP + 0x18]
009aab6b : PUSH EDX
009aab6c : OR ECX,0xffffffff
009aab6f : LEA EDI,[ESP + 0x3c]
009aab73 : MOV dword ptr [ESP + 0x1c],0x7c
009aab7b : CALL 0x00407cc0
009aab80 : CMP EAX,-0x1
009aab83 : JZ 0x009aaba0
009aab85 : PUSH 0x1
009aab87 : PUSH EAX
009aab88 : MOV ECX,EDI
009aab8a : CALL 0x00405e10
009aab8f : JMP 0x009aaba0
009aab91 : LEA EAX,[ESP + 0x34]
009aab95 : PUSH EAX
009aab96 : MOV EDX,0xc8aa34
009aab9b : CALL 0x00405c00
009aaba0 : MOV ECX,dword ptr [0x00da9894]
009aaba6 : MOV EAX,dword ptr [ECX]
009aaba8 : CMP EAX,ESI
009aabaa : JZ 0x009aabdf
009aabac : CMP dword ptr [EAX + 0x114],ESI
009aabb2 : JZ 0x009aabdf
009aabb4 : CMP dword ptr [ESP + 0x4c],0x8
009aabb9 : MOV EAX,dword ptr [EAX + 0x114]
009aabbf : MOV ECX,dword ptr [ESP + 0x38]
009aabc3 : JNC 0x009aabc9
009aabc5 : LEA ECX,[ESP + 0x38]
009aabc9 : MOV EDX,dword ptr [EAX]
009aabcb : PUSH ECX
009aabcc : PUSH 0xc8aa38
009aabd1 : PUSH 0xc8aa3c
009aabd6 : PUSH EAX
009aabd7 : MOV EAX,dword ptr [EDX + 0x4]
009aabda : CALL EAX
009aabdc : ADD ESP,0x10
009aabdf : MOV byte ptr [EBX + 0x4c],0x0
009aabe3 : CALL dword ptr [0x00b85598]
009aabe9 : MOV dword ptr [EBX + 0x48],EAX
009aabec : MOV dword ptr [ESP + 0x60],0xffffffff
009aabf4 : CMP dword ptr [ESP + 0x4c],0x8
009aabf9 : JC 0x009aac04
009aabfb : MOV ECX,dword ptr [ESP + 0x38]
009aabff : CALL 0x006f04e0
009aac04 : XOR ECX,ECX
009aac06 : MOV dword ptr [ESP + 0x4c],0x7
009aac0e : MOV dword ptr [ESP + 0x48],ESI
009aac12 : MOV word ptr [ESP + 0x38],CX
009aac17 : MOV ECX,dword ptr [ESP + 0x58]
009aac1b : MOV dword ptr FS:[0x0],ECX
009aac22 : POP ECX
009aac23 : POP EDI
009aac24 : POP ESI
009aac25 : POP EBX
009aac26 : MOV ECX,dword ptr [ESP + 0x40]
009aac2a : XOR ECX,ESP
009aac2c : CALL 0x00633e6b
009aac31 : MOV ESP,EBP
009aac33 : POP EBP
009aac34 : RET 0x8
