PROGRAM  : Maestia.exe
FUNCTION : FUN_008f33d0
ENTRY    : 008f33d0
BODY     : [[008f33d0, 008f369e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f33d0(undefined4 param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined1 local_470 [4];
  undefined2 local_46c;
  undefined4 local_45c;
  uint local_458;
  undefined1 local_454 [4];
  undefined2 local_450;
  undefined4 local_440;
  uint local_43c;
  undefined4 local_438;
  undefined1 local_434 [4];
  undefined4 local_430;
  int local_420;
  uint local_41c;
  undefined4 local_418 [256];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b669e4;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_450 = 0;
  local_438 = param_1;
  local_43c = 7;
  local_440 = 0;
  local_18 = uVar2;
  FUN_00406360(L"IDS_INPUT_AFK_MSG",0x11);
  local_8 = 0;
  FUN_0081d120(local_454);
  local_8._0_1_ = 2;
  if (7 < local_43c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_450 = 0;
  local_43c = 7;
  local_440 = 0;
  iVar3 = FUN_008edae0(local_434,0x14,1,0);
  uVar1 = local_41c;
  puVar5 = local_430;
  if (iVar3 == 0) {
    if (local_420 != 0) {
      puVar4 = local_430;
      if (local_41c < 8) {
        puVar4 = &local_430;
      }
      FUN_00405b70(puVar4,uVar2);
      puVar4 = local_418;
      for (iVar3 = 0x100; iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar4 = 0;
        puVar4 = puVar4 + 1;
      }
      if (uVar1 < 8) {
        puVar5 = &local_430;
      }
      FUN_0040e4a0(L"Failed Get Input Dlg %s",puVar5);
      FUN_00406460(local_418);
      local_8._0_1_ = 3;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaGuiWindowMgr::ShowAFKModal",0x110e,local_470);
      }
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
    }
    local_8 = 0xffffffff;
    if (7 < local_41c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uVar2 = (uint)local_430 >> 0x10;
  }
  else {
    FUN_00406460(L"IDS_CHAT_AFK");
    local_8._0_1_ = 4;
    FUN_0081d120(local_454);
    local_8._0_1_ = 5;
    FUN_009a6a20();
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_458) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_458 = 7;
    local_45c = 0;
    local_46c = 0;
    local_8 = CONCAT31(local_8._1_3_,2);
    if (7 < local_43c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_450 = 0;
    local_43c = 7;
    local_440 = 0;
    FUN_009a6990();
    if ((*(int *)(iVar3 + 100) != 0) && (*(code **)(iVar3 + 0x60) != (code *)0x0)) {
      (**(code **)(iVar3 + 0x60))(1,iVar3);
    }
    *(code **)(iVar3 + 100) = FUN_008f2470;
    local_8 = 0xffffffff;
    if (7 < local_41c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uVar2 = (uint)local_430._2_2_;
  }
  local_430 = (undefined4 *)(uVar2 << 0x10);
  local_8 = 0xffffffff;
  local_420 = 0;
  local_41c = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008f33d0 : PUSH EBP
008f33d1 : MOV EBP,ESP
008f33d3 : PUSH -0x1
008f33d5 : PUSH 0xb669e4
008f33da : MOV EAX,FS:[0x0]
008f33e0 : PUSH EAX
008f33e1 : SUB ESP,0x460
008f33e7 : MOV EAX,[0x00d66fa0]
008f33ec : XOR EAX,EBP
008f33ee : MOV dword ptr [EBP + -0x14],EAX
008f33f1 : PUSH EBX
008f33f2 : PUSH ESI
008f33f3 : PUSH EDI
008f33f4 : PUSH EAX
008f33f5 : LEA EAX,[EBP + -0xc]
008f33f8 : MOV FS:[0x0],EAX
008f33fe : MOV EAX,dword ptr [EBP + 0x8]
008f3401 : XOR ECX,ECX
008f3403 : PUSH 0x11
008f3405 : MOV word ptr [EBP + 0xfffffbb4],CX
008f340c : MOV ESI,0x7
008f3411 : XOR EBX,EBX
008f3413 : PUSH 0xc5f82c
008f3418 : LEA ECX,[EBP + 0xfffffbb0]
008f341e : MOV dword ptr [EBP + 0xfffffbcc],EAX
008f3424 : MOV dword ptr [EBP + 0xfffffbc8],ESI
008f342a : MOV dword ptr [EBP + 0xfffffbc4],EBX
008f3430 : CALL 0x00406360
008f3435 : MOV dword ptr [EBP + -0x4],EBX
008f3438 : MOV ECX,dword ptr [0x0172491c]
008f343e : LEA EDX,[EBP + 0xfffffbb0]
008f3444 : PUSH EDX
008f3445 : LEA EDI,[EBP + 0xfffffbd0]
008f344b : CALL 0x0081d120
008f3450 : MOV byte ptr [EBP + -0x4],0x2
008f3454 : CMP dword ptr [EBP + 0xfffffbc8],0x8
008f345b : JC 0x008f3468
008f345d : MOV ECX,dword ptr [EBP + 0xfffffbb4]
008f3463 : CALL 0x006f04e0
008f3468 : MOV ECX,dword ptr [0x00da9894]
008f346e : PUSH EBX
008f346f : PUSH 0x1
008f3471 : XOR EAX,EAX
008f3473 : PUSH 0x14
008f3475 : LEA EDX,[EBP + 0xfffffbd0]
008f347b : MOV word ptr [EBP + 0xfffffbb4],AX
008f3482 : MOV dword ptr [EBP + 0xfffffbc8],ESI
008f3488 : MOV dword ptr [EBP + 0xfffffbc4],EBX
008f348e : MOV ECX,dword ptr [ECX]
008f3490 : PUSH EDX
008f3491 : CALL 0x008edae0
008f3496 : MOV ESI,EAX
008f3498 : CMP ESI,EBX
008f349a : JNZ 0x008f3589
008f34a0 : CMP dword ptr [EBP + 0xfffffbe4],EBX
008f34a6 : JZ 0x008f355a
008f34ac : MOV ESI,dword ptr [EBP + 0xfffffbe8]
008f34b2 : MOV EBX,dword ptr [EBP + 0xfffffbd4]
008f34b8 : MOV EAX,EBX
008f34ba : CMP ESI,0x8
008f34bd : JNC 0x008f34c5
008f34bf : LEA EAX,[EBP + 0xfffffbd4]
008f34c5 : PUSH EAX
008f34c6 : XOR EDX,EDX
008f34c8 : MOV ECX,0xc5f850
008f34cd : CALL 0x00405b70
008f34d2 : XOR EAX,EAX
008f34d4 : MOVZX EDX,AX
008f34d7 : MOV EAX,EDX
008f34d9 : SHL EDX,0x10
008f34dc : OR EAX,EDX
008f34de : MOV ECX,0x100
008f34e3 : LEA EDI,[EBP + 0xfffffbec]
008f34e9 : ADD ESP,0x4
008f34ec : STOSD.REP ES:EDI
008f34ee : MOV EAX,EBX
008f34f0 : CMP ESI,0x8
008f34f3 : JNC 0x008f34fb
008f34f5 : LEA EAX,[EBP + 0xfffffbd4]
008f34fb : PUSH EAX
008f34fc : PUSH 0xc5f854
008f3501 : LEA EDX,[EBP + 0xfffffbec]
008f3507 : CALL 0x0040e4a0
008f350c : ADD ESP,0x8
008f350f : LEA EAX,[EBP + 0xfffffbec]
008f3515 : PUSH EAX
008f3516 : LEA ECX,[EBP + 0xfffffb94]
008f351c : CALL 0x00406460
008f3521 : MOV byte ptr [EBP + -0x4],0x3
008f3525 : MOV ECX,dword ptr [0x00da98e8]
008f352b : MOV ECX,dword ptr [ECX]
008f352d : TEST ECX,ECX
008f352f : JZ 0x008f3549
008f3531 : MOV EDX,dword ptr [ECX]
008f3533 : MOV EDX,dword ptr [EDX + 0x14]
008f3536 : LEA EAX,[EBP + 0xfffffb94]
008f353c : PUSH EAX
008f353d : PUSH 0x110e
008f3542 : PUSH 0xc5f884
008f3547 : CALL EDX
008f3549 : MOV byte ptr [EBP + -0x4],0x2
008f354d : LEA ECX,[EBP + 0xfffffb94]
008f3553 : CALL 0x00406560
008f3558 : XOR EBX,EBX
008f355a : MOV dword ptr [EBP + -0x4],0xffffffff
008f3561 : CMP dword ptr [EBP + 0xfffffbe8],0x8
008f3568 : JC 0x008f3575
008f356a : MOV ECX,dword ptr [EBP + 0xfffffbd4]
008f3570 : CALL 0x006f04e0
008f3575 : XOR EAX,EAX
008f3577 : MOV dword ptr [EBP + 0xfffffbe4],EBX
008f357d : MOV word ptr [EBP + 0xfffffbd4],AX
008f3584 : JMP 0x008f3677
008f3589 : PUSH 0xc5f8c0
008f358e : LEA ECX,[EBP + 0xfffffbb0]
008f3594 : CALL 0x00406460
008f3599 : MOV BL,0x4
008f359b : MOV byte ptr [EBP + -0x4],BL
008f359e : LEA ECX,[EBP + 0xfffffbb0]
008f35a4 : PUSH ECX
008f35a5 : MOV ECX,dword ptr [0x0172491c]
008f35ab : LEA EDI,[EBP + 0xfffffb94]
008f35b1 : CALL 0x0081d120
008f35b6 : MOV byte ptr [EBP + -0x4],0x5
008f35ba : MOV ECX,EAX
008f35bc : MOV EAX,ESI
008f35be : CALL 0x009a6a20
008f35c3 : MOV byte ptr [EBP + -0x4],BL
008f35c6 : MOV EBX,0x8
008f35cb : CMP dword ptr [EBP + 0xfffffbac],EBX
008f35d1 : JC 0x008f35de
008f35d3 : MOV ECX,dword ptr [EBP + 0xfffffb98]
008f35d9 : CALL 0x006f04e0
008f35de : XOR EDI,EDI
008f35e0 : XOR EDX,EDX
008f35e2 : MOV dword ptr [EBP + 0xfffffbac],0x7
008f35ec : MOV dword ptr [EBP + 0xfffffba8],EDI
008f35f2 : MOV word ptr [EBP + 0xfffffb98],DX
008f35f9 : MOV byte ptr [EBP + -0x4],0x2
008f35fd : CMP dword ptr [EBP + 0xfffffbc8],EBX
008f3603 : JC 0x008f3610
008f3605 : MOV ECX,dword ptr [EBP + 0xfffffbb4]
008f360b : CALL 0x006f04e0
008f3610 : MOV ECX,dword ptr [EBP + 0xfffffbcc]
008f3616 : XOR EAX,EAX
008f3618 : MOV word ptr [EBP + 0xfffffbb4],AX
008f361f : MOV EAX,ESI
008f3621 : MOV dword ptr [EBP + 0xfffffbc8],0x7
008f362b : MOV dword ptr [EBP + 0xfffffbc4],EDI
008f3631 : CALL 0x009a6990
008f3636 : CMP dword ptr [ESI + 0x64],EDI
008f3639 : JZ 0x008f3647
008f363b : MOV EAX,dword ptr [ESI + 0x60]
008f363e : CMP EAX,EDI
008f3640 : JZ 0x008f3647
008f3642 : PUSH ESI
008f3643 : PUSH 0x1
008f3645 : CALL EAX
008f3647 : MOV dword ptr [ESI + 0x64],0x8f2470
008f364e : MOV dword ptr [EBP + -0x4],0xffffffff
008f3655 : CMP dword ptr [EBP + 0xfffffbe8],EBX
008f365b : JC 0x008f3668
008f365d : MOV ECX,dword ptr [EBP + 0xfffffbd4]
008f3663 : CALL 0x006f04e0
008f3668 : XOR ECX,ECX
008f366a : MOV dword ptr [EBP + 0xfffffbe4],EDI
008f3670 : MOV word ptr [EBP + 0xfffffbd4],CX
008f3677 : MOV dword ptr [EBP + 0xfffffbe8],0x7
008f3681 : MOV ECX,dword ptr [EBP + -0xc]
008f3684 : MOV dword ptr FS:[0x0],ECX
008f368b : POP ECX
008f368c : POP EDI
008f368d : POP ESI
008f368e : POP EBX
008f368f : MOV ECX,dword ptr [EBP + -0x14]
008f3692 : XOR ECX,EBP
008f3694 : CALL 0x00633e6b
008f3699 : MOV ESP,EBP
008f369b : POP EBP
008f369c : RET 0x4
