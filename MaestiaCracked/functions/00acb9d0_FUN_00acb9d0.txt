PROGRAM  : Maestia.exe
FUNCTION : FUN_00acb9d0
ENTRY    : 00acb9d0
BODY     : [[00acb9d0, 00acbb2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00acb9d0(uint param_1,short *param_2)

{
  short sVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  short *psVar5;
  undefined1 local_40 [4];
  undefined2 local_3c;
  undefined4 local_2c;
  uint local_28;
  undefined1 local_24 [4];
  int local_20;
  int local_1c;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b408e2;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar3 = 0;
  local_14 = 0;
  local_28 = 7;
  local_2c = 0;
  local_3c = 0;
  FUN_00406360(&DAT_00c811b4,1);
  local_8 = 0;
  FUN_0070cd60(local_24,param_2,local_40,0,uVar2);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (7 < local_28) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_3c = 0;
  local_28 = 7;
  iVar4 = local_1c - local_20 >> 0x1f;
  psVar5 = (short *)(param_1 + 0x56);
  psVar5[0] = 0;
  psVar5[1] = 0;
  psVar5[2] = 0;
  psVar5[3] = 0;
  local_2c = 0;
  *(undefined2 *)(param_1 + 0x5e) = 0;
  param_1 = 0;
  if ((local_1c - local_20) / 0x1c + iVar4 != iVar4) {
    do {
      param_2 = psVar5;
      if (4 < local_14) break;
      if (*(uint *)(iVar3 + 0x18 + local_20) < 8) {
        iVar4 = iVar3 + 4 + local_20;
      }
      else {
        iVar4 = *(int *)(iVar3 + 4 + local_20);
      }
      sVar1 = FUN_00634f4d(iVar4);
      if (sVar1 != 0) {
        local_14 = local_14 + 1;
        *param_2 = sVar1;
        param_2 = param_2 + 1;
      }
      param_1 = param_1 + 1;
      iVar3 = iVar3 + 0x1c;
      psVar5 = param_2;
    } while (param_1 < (uint)((local_1c - local_20) / 0x1c));
  }
  local_8 = 0xffffffff;
  if (local_20 == 0) {
    ExceptionList = local_10;
    return;
  }
  FUN_00405450(param_2);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00acb9d0 : PUSH EBP
00acb9d1 : MOV EBP,ESP
00acb9d3 : PUSH -0x1
00acb9d5 : PUSH 0xb408e2
00acb9da : MOV EAX,FS:[0x0]
00acb9e0 : PUSH EAX
00acb9e1 : SUB ESP,0x34
00acb9e4 : PUSH EBX
00acb9e5 : PUSH ESI
00acb9e6 : PUSH EDI
00acb9e7 : MOV EAX,[0x00d66fa0]
00acb9ec : XOR EAX,EBP
00acb9ee : PUSH EAX
00acb9ef : LEA EAX,[EBP + -0xc]
00acb9f2 : MOV FS:[0x0],EAX
00acb9f8 : PUSH 0x1
00acb9fa : XOR EBX,EBX
00acb9fc : XOR EAX,EAX
00acb9fe : MOV ESI,0x7
00acba03 : PUSH 0xc811b4
00acba08 : LEA ECX,[EBP + -0x3c]
00acba0b : MOV dword ptr [EBP + -0x10],EBX
00acba0e : MOV dword ptr [EBP + -0x24],ESI
00acba11 : MOV dword ptr [EBP + -0x28],EBX
00acba14 : MOV word ptr [EBP + -0x38],AX
00acba18 : CALL 0x00406360
00acba1d : MOV dword ptr [EBP + -0x4],EBX
00acba20 : MOV EDX,dword ptr [EBP + 0xc]
00acba23 : PUSH EBX
00acba24 : LEA ECX,[EBP + -0x3c]
00acba27 : PUSH ECX
00acba28 : PUSH EDX
00acba29 : LEA EAX,[EBP + -0x20]
00acba2c : PUSH EAX
00acba2d : CALL 0x0070cd60
00acba32 : ADD ESP,0x10
00acba35 : MOV byte ptr [EBP + -0x4],0x2
00acba39 : CMP dword ptr [EBP + -0x24],0x8
00acba3d : JC 0x00acba47
00acba3f : MOV ECX,dword ptr [EBP + -0x38]
00acba42 : CALL 0x006f04e0
00acba47 : MOV EDI,dword ptr [EBP + 0x8]
00acba4a : XOR ECX,ECX
00acba4c : MOV word ptr [EBP + -0x38],CX
00acba50 : MOV ECX,dword ptr [EBP + -0x18]
00acba53 : MOV dword ptr [EBP + -0x24],ESI
00acba56 : MOV ESI,dword ptr [EBP + -0x1c]
00acba59 : SUB ECX,ESI
00acba5b : MOV EAX,0x92492493
00acba60 : IMUL ECX
00acba62 : ADD EDX,ECX
00acba64 : SAR EDX,0x4
00acba67 : ADD EDI,0x56
00acba6a : MOV EAX,EDX
00acba6c : SHR EAX,0x1f
00acba6f : ADD EAX,EDX
00acba71 : PXOR XMM0,XMM0
00acba75 : MOVQ qword ptr [EDI],XMM0
00acba79 : MOV dword ptr [EBP + -0x28],EBX
00acba7c : MOV word ptr [EDI + 0x8],BX
00acba80 : MOV dword ptr [EBP + 0x8],EBX
00acba83 : JZ 0x00acbaea
00acba85 : MOV dword ptr [EBP + 0xc],EDI
00acba88 : CMP dword ptr [EBP + -0x10],0x5
00acba8c : JGE 0x00acbae8
00acba8e : CMP dword ptr [EBX + ESI*0x1 + 0x18],0x8
00acba93 : JC 0x00acba9b
00acba95 : MOV ESI,dword ptr [EBX + ESI*0x1 + 0x4]
00acba99 : JMP 0x00acba9f
00acba9b : LEA ESI,[EBX + ESI*0x1 + 0x4]
00acba9f : PUSH ESI
00acbaa0 : CALL 0x00634f4d
00acbaa5 : MOVZX EAX,AX
00acbaa8 : ADD ESP,0x4
00acbaab : TEST AX,AX
00acbaae : JZ 0x00acbabf
00acbab0 : MOV ECX,dword ptr [EBP + 0xc]
00acbab3 : INC dword ptr [EBP + -0x10]
00acbab6 : MOV word ptr [ECX],AX
00acbab9 : ADD ECX,0x2
00acbabc : MOV dword ptr [EBP + 0xc],ECX
00acbabf : MOV ECX,dword ptr [EBP + -0x18]
00acbac2 : MOV ESI,dword ptr [EBP + -0x1c]
00acbac5 : MOV EDI,dword ptr [EBP + 0x8]
00acbac8 : SUB ECX,ESI
00acbaca : MOV EAX,0x92492493
00acbacf : IMUL ECX
00acbad1 : ADD EDX,ECX
00acbad3 : SAR EDX,0x4
00acbad6 : MOV ECX,EDX
00acbad8 : SHR ECX,0x1f
00acbadb : INC EDI
00acbadc : ADD ECX,EDX
00acbade : ADD EBX,0x1c
00acbae1 : MOV dword ptr [EBP + 0x8],EDI
00acbae4 : CMP EDI,ECX
00acbae6 : JC 0x00acba88
00acbae8 : XOR EBX,EBX
00acbaea : MOV dword ptr [EBP + -0x4],0xffffffff
00acbaf1 : MOV EAX,dword ptr [EBP + -0x1c]
00acbaf4 : CMP EAX,EBX
00acbaf6 : JZ 0x00acbb0f
00acbaf8 : MOV EDX,dword ptr [EBP + 0xc]
00acbafb : MOV EDI,dword ptr [EBP + -0x18]
00acbafe : PUSH EDX
00acbaff : CALL 0x00405450
00acbb04 : MOV ECX,dword ptr [EBP + -0x1c]
00acbb07 : ADD ESP,0x4
00acbb0a : CALL 0x006f04e0
00acbb0f : MOV dword ptr [EBP + -0x1c],EBX
00acbb12 : MOV dword ptr [EBP + -0x18],EBX
00acbb15 : MOV dword ptr [EBP + -0x14],EBX
00acbb18 : MOV ECX,dword ptr [EBP + -0xc]
00acbb1b : MOV dword ptr FS:[0x0],ECX
00acbb22 : POP ECX
00acbb23 : POP EDI
00acbb24 : POP ESI
00acbb25 : POP EBX
00acbb26 : MOV ESP,EBP
00acbb28 : POP EBP
00acbb29 : RET 0x8
