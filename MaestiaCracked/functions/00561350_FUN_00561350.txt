PROGRAM  : Maestia.exe
FUNCTION : FUN_00561350
ENTRY    : 00561350
BODY     : [[00561350, 00561452]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00561350(undefined4 param_1,uint *param_2,char param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  LONG LVar3;
  int iVar4;
  uint *puVar5;
  uint *puVar6;
  undefined *puVar7;
  uint local_24;
  uint local_20 [5];
  undefined4 local_c;
  undefined4 local_8;
  
  puVar7 = &DAT_00b8ba98;
  uVar1 = FUN_005e9ce0(param_1,&DAT_00b8ba98);
  FUN_0051c4c0("MovieView \"",uVar1,puVar7);
  puVar5 = param_2;
  puVar6 = local_20;
  for (iVar4 = 8; uVar1 = local_c, iVar4 != 0; iVar4 = iVar4 + -1) {
    *puVar6 = *puVar5;
    puVar5 = puVar5 + 1;
    puVar6 = puVar6 + 1;
  }
  local_20[0] = local_20[0] | -(uint)(param_3 != '\0') & 0x1000 | 3;
  local_8 = 3;
  local_c = 0x20000;
  uVar2 = FUN_00516140((local_24 & 0xfffffffc) + 8,local_20);
  iVar4 = FUN_00515840(0xb60,0);
  if (iVar4 == 0) {
    iVar4 = 0;
  }
  else {
    iVar4 = FUN_005774b0(uVar2);
  }
  FUN_0067df70(iVar4);
  *(int *)(iVar4 + 0xb30) = iVar4;
  *(undefined4 *)(iVar4 + 0xb34) = uVar1;
  *(uint *)(iVar4 + 0xb40) = param_2[8];
  FUN_005157c0(iVar4 + 0xb2c);
  FUN_00529a10(param_2[10],param_2[9]);
  LVar3 = InterlockedExchangeAdd((LONG *)((local_24 & 0xfffffffc) + 4),-1);
  if (LVar3 == 1) {
    FUN_00515cf0(local_24 & 0xfffffffc);
  }
  return iVar4;
}



============================================================
DISASSEMBLY
============================================================
00561350 : SUB ESP,0x24
00561353 : MOV EAX,dword ptr [ESP + 0x28]
00561357 : PUSH EBX
00561358 : PUSH EBP
00561359 : PUSH ESI
0056135a : PUSH EDI
0056135b : PUSH 0xb8ba98
00561360 : PUSH EAX
00561361 : CALL 0x005e9ce0
00561366 : ADD ESP,0x4
00561369 : PUSH EAX
0056136a : PUSH 0xb8ca44
0056136f : LEA ECX,[ESP + 0x1c]
00561373 : CALL 0x0051c4c0
00561378 : MOV EBX,dword ptr [ESP + 0x3c]
0056137c : MOV EAX,dword ptr [ESP + 0x10]
00561380 : MOV ECX,0x8
00561385 : MOV ESI,EBX
00561387 : LEA EDI,[ESP + 0x14]
0056138b : MOVSD.REP ES:EDI,ESI
0056138d : MOVZX ECX,byte ptr [ESP + 0x40]
00561392 : MOV EBP,dword ptr [ESP + 0x28]
00561396 : NEG ECX
00561398 : SBB ECX,ECX
0056139a : AND ECX,0x1000
005613a0 : OR ECX,0x3
005613a3 : OR dword ptr [ESP + 0x14],ECX
005613a7 : MOV ECX,dword ptr [0x00d73250]
005613ad : AND EAX,0xfffffffc
005613b0 : LEA EDX,[ESP + 0x14]
005613b4 : PUSH EDX
005613b5 : ADD EAX,0x8
005613b8 : PUSH EAX
005613b9 : MOV dword ptr [ESP + 0x34],0x3
005613c1 : MOV dword ptr [ESP + 0x30],0x20000
005613c9 : CALL 0x00516140
005613ce : MOV EDI,EAX
005613d0 : PUSH 0x0
005613d2 : PUSH 0xb60
005613d7 : MOV ECX,EDI
005613d9 : CALL 0x00515840
005613de : TEST EAX,EAX
005613e0 : JZ 0x005613ee
005613e2 : PUSH EDI
005613e3 : MOV ECX,EAX
005613e5 : CALL 0x005774b0
005613ea : MOV ESI,EAX
005613ec : JMP 0x005613f0
005613ee : XOR ESI,ESI
005613f0 : PUSH ESI
005613f1 : MOV ECX,EDI
005613f3 : CALL 0x0067df70
005613f8 : MOV dword ptr [ESI + 0xb30],ESI
005613fe : MOV dword ptr [ESI + 0xb34],EBP
00561404 : FLD float ptr [EBX + 0x20]
00561407 : LEA EAX,[ESI + 0xb2c]
0056140d : FSTP float ptr [ESI + 0xb40]
00561413 : PUSH EAX
00561414 : MOV ECX,EDI
00561416 : CALL 0x005157c0
0056141b : MOV ECX,dword ptr [EBX + 0x24]
0056141e : MOV EDX,dword ptr [EBX + 0x28]
00561421 : PUSH ECX
00561422 : PUSH EDX
00561423 : LEA ECX,[ESI + 0x18]
00561426 : CALL 0x00529a10
0056142b : MOV EDI,dword ptr [ESP + 0x10]
0056142f : AND EDI,0xfffffffc
00561432 : PUSH -0x1
00561434 : LEA EAX,[EDI + 0x4]
00561437 : PUSH EAX
00561438 : CALL dword ptr [0x00b851cc]
0056143e : SUB EAX,0x1
00561441 : JNZ 0x00561449
00561443 : PUSH EDI
00561444 : CALL 0x00515cf0
00561449 : POP EDI
0056144a : MOV EAX,ESI
0056144c : POP ESI
0056144d : POP EBP
0056144e : POP EBX
0056144f : ADD ESP,0x24
00561452 : RET
