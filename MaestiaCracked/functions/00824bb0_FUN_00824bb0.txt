PROGRAM  : Maestia.exe
FUNCTION : FUN_00824bb0
ENTRY    : 00824bb0
BODY     : [[00824bb0, 00824e48]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00824bb0(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  tagRECT tStack_28;
  tagRECT tStack_18;
  
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d28);
  iVar3 = DAT_017251ac;
  if (*(char *)(in_ECX + 0x33f) != '\0') {
    (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d2c);
    return;
  }
  if (*(char *)(DAT_017251ac + 0x4a8) != '\0') {
    if (*(char *)(DAT_017251ac + 0x4a9) == '\0') {
      iVar1 = *(int *)(DAT_017251ac + 0x178);
      if (*(char *)(DAT_017251ac + 0x16c) == '\0') {
        *(undefined2 *)(DAT_017251ac + 0x4aa) = *(undefined2 *)(iVar1 + 0x48);
        *(undefined2 *)(iVar3 + 0x4ac) = *(undefined2 *)(iVar1 + 0x4c);
      }
      else {
        tStack_28.left = 0;
        tStack_28.top = 0;
        tStack_28.right = *(int *)(iVar1 + 0x48);
        tStack_28.bottom = *(int *)(iVar1 + 0x4c);
        *(short *)(DAT_017251ac + 0x4aa) = (short)tStack_28.right;
        *(short *)(iVar3 + 0x4ac) = (short)tStack_28.bottom;
        uVar2 = GetWindowLongW(*(HWND *)(iVar3 + 0x170),-0x14);
        if ((uVar2 & 8) != 0) {
          SetWindowPos(*(HWND *)(DAT_017251ac + 0x170),(HWND)0xfffffffe,0,0,0,0,0);
        }
        SetWindowLongW(*(HWND *)(DAT_017251ac + 0x170),-0x10,0x10cf0000);
        AdjustWindowRect(&tStack_28,0x10cf0000,1);
        iVar3 = GetSystemMetrics(0xf);
        tStack_28.bottom = tStack_28.bottom - iVar3;
        MoveWindow(*(HWND *)(DAT_017251ac + 0x170),0,0,tStack_28.right - tStack_28.left,
                   tStack_28.bottom - tStack_28.top,1);
        GetClientRect(*(HWND *)(DAT_017251ac + 0x170),&tStack_18);
        iVar3 = DAT_017251ac;
        *(undefined2 *)(DAT_017251ac + 0x4aa) = (undefined2)tStack_18.right;
        *(undefined2 *)(iVar3 + 0x4ac) = (undefined2)tStack_18.bottom;
      }
    }
    else {
      SetWindowLongW(*(HWND *)(DAT_017251ac + 0x170),-0x10,-0x70000000);
    }
    FUN_00800b40();
  }
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d30);
  if (*(int *)(in_ECX + 0xc4) != 0) {
    (**(code **)(**(int **)(in_ECX + 0xc4) + 0x14))();
  }
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d34);
  FUN_008011d0();
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d38);
  FUN_00800e90();
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d3c);
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d40);
  if ((*(int *)(in_ECX + 0xcc) != 0) && (iVar3 = *(int *)(*(int *)(in_ECX + 0xcc) + 4), iVar3 != 0))
  {
    if (iVar3 == 1) {
      FUN_00a0a0b0();
    }
    else if (iVar3 == 2) {
      FUN_00a0a000();
    }
  }
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d44);
  if (DAT_00da98f8 != (HANDLE)0x0) {
    if (*(char *)(DAT_017251ac + 5) == '\x01') {
      WaitForSingleObject(DAT_00da98f8,0xffffffff);
    }
    ResetEvent(DAT_00da98f8);
  }
  (*(code *)PTR_FUN_00d6d240)(5,1,&DAT_00c33d48);
  return;
}



============================================================
DISASSEMBLY
============================================================
00824bb0 : PUSH EBP
00824bb1 : MOV EBP,ESP
00824bb3 : AND ESP,0xfffffff8
00824bb6 : SUB ESP,0x20
00824bb9 : PUSH ESI
00824bba : PUSH EDI
00824bbb : PUSH 0xc33d28
00824bc0 : PUSH 0x1
00824bc2 : PUSH 0x5
00824bc4 : MOV EDI,ECX
00824bc6 : CALL dword ptr [0x00d6d240]
00824bcc : ADD ESP,0xc
00824bcf : CMP byte ptr [EDI + 0x33f],0x0
00824bd6 : JZ 0x00824bf0
00824bd8 : PUSH 0xc33d2c
00824bdd : PUSH 0x1
00824bdf : PUSH 0x5
00824be1 : CALL dword ptr [0x00d6d240]
00824be7 : ADD ESP,0xc
00824bea : POP EDI
00824beb : POP ESI
00824bec : MOV ESP,EBP
00824bee : POP EBP
00824bef : RET
00824bf0 : MOV ESI,dword ptr [0x017251ac]
00824bf6 : CMP byte ptr [ESI + 0x4a8],0x0
00824bfd : JZ 0x00824d50
00824c03 : CMP byte ptr [ESI + 0x4a9],0x0
00824c0a : JZ 0x00824c2b
00824c0c : MOV EAX,dword ptr [ESI + 0x170]
00824c12 : PUSH 0x90000000
00824c17 : PUSH -0x10
00824c19 : PUSH EAX
00824c1a : CALL dword ptr [0x00b854a4]
00824c20 : MOV ESI,dword ptr [0x017251ac]
00824c26 : JMP 0x00824d4b
00824c2b : CMP byte ptr [ESI + 0x16c],0x0
00824c32 : MOV EAX,dword ptr [ESI + 0x178]
00824c38 : JNZ 0x00824c55
00824c3a : MOV CX,word ptr [EAX + 0x48]
00824c3e : MOV word ptr [ESI + 0x4aa],CX
00824c45 : MOV DX,word ptr [EAX + 0x4c]
00824c49 : MOV word ptr [ESI + 0x4ac],DX
00824c50 : JMP 0x00824d4b
00824c55 : MOV dword ptr [ESP + 0x8],0x0
00824c5d : MOV dword ptr [ESP + 0xc],0x0
00824c65 : MOV ECX,dword ptr [EAX + 0x48]
00824c68 : MOV dword ptr [ESP + 0x10],ECX
00824c6c : MOV EAX,dword ptr [EAX + 0x4c]
00824c6f : MOV word ptr [ESI + 0x4aa],CX
00824c76 : MOV word ptr [ESI + 0x4ac],AX
00824c7d : MOV ESI,dword ptr [ESI + 0x170]
00824c83 : PUSH -0x14
00824c85 : PUSH ESI
00824c86 : MOV dword ptr [ESP + 0x1c],EAX
00824c8a : CALL dword ptr [0x00b854a8]
00824c90 : TEST AL,0x8
00824c92 : JZ 0x00824cb2
00824c94 : MOV EAX,[0x017251ac]
00824c99 : MOV ECX,dword ptr [EAX + 0x170]
00824c9f : PUSH 0x0
00824ca1 : PUSH 0x0
00824ca3 : PUSH 0x0
00824ca5 : PUSH 0x0
00824ca7 : PUSH 0x0
00824ca9 : PUSH -0x2
00824cab : PUSH ECX
00824cac : CALL dword ptr [0x00b854ac]
00824cb2 : MOV EDX,dword ptr [0x017251ac]
00824cb8 : MOV EAX,dword ptr [EDX + 0x170]
00824cbe : PUSH 0x10cf0000
00824cc3 : PUSH -0x10
00824cc5 : PUSH EAX
00824cc6 : CALL dword ptr [0x00b854a4]
00824ccc : PUSH 0x1
00824cce : PUSH 0x10cf0000
00824cd3 : LEA ECX,[ESP + 0x10]
00824cd7 : PUSH ECX
00824cd8 : CALL dword ptr [0x00b854d8]
00824cde : PUSH 0xf
00824ce0 : CALL dword ptr [0x00b8547c]
00824ce6 : MOV ECX,dword ptr [ESP + 0x14]
00824cea : MOV EDX,dword ptr [ESP + 0x10]
00824cee : SUB EDX,dword ptr [ESP + 0x8]
00824cf2 : SUB ECX,EAX
00824cf4 : MOV EAX,[0x017251ac]
00824cf9 : PUSH 0x1
00824cfb : MOV dword ptr [ESP + 0x18],ECX
00824cff : SUB ECX,dword ptr [ESP + 0x10]
00824d03 : PUSH ECX
00824d04 : MOV ECX,dword ptr [EAX + 0x170]
00824d0a : PUSH EDX
00824d0b : PUSH 0x0
00824d0d : PUSH 0x0
00824d0f : PUSH ECX
00824d10 : CALL dword ptr [0x00b85484]
00824d16 : MOV EAX,[0x017251ac]
00824d1b : MOV ECX,dword ptr [EAX + 0x170]
00824d21 : LEA EDX,[ESP + 0x18]
00824d25 : PUSH EDX
00824d26 : PUSH ECX
00824d27 : CALL dword ptr [0x00b85454]
00824d2d : MOV ESI,dword ptr [0x017251ac]
00824d33 : MOV DX,word ptr [ESP + 0x20]
00824d38 : MOV word ptr [ESI + 0x4aa],DX
00824d3f : MOV AX,word ptr [ESP + 0x24]
00824d44 : MOV word ptr [ESI + 0x4ac],AX
00824d4b : CALL 0x00800b40
00824d50 : PUSH 0xc33d30
00824d55 : PUSH 0x1
00824d57 : PUSH 0x5
00824d59 : CALL dword ptr [0x00d6d240]
00824d5f : ADD ESP,0xc
00824d62 : CMP dword ptr [EDI + 0xc4],0x0
00824d69 : JZ 0x00824d78
00824d6b : MOV ECX,dword ptr [EDI + 0xc4]
00824d71 : MOV EDX,dword ptr [ECX]
00824d73 : MOV EAX,dword ptr [EDX + 0x14]
00824d76 : CALL EAX
00824d78 : PUSH 0xc33d34
00824d7d : PUSH 0x1
00824d7f : PUSH 0x5
00824d81 : CALL dword ptr [0x00d6d240]
00824d87 : ADD ESP,0xc
00824d8a : MOV ECX,EDI
00824d8c : CALL 0x008011d0
00824d91 : PUSH 0xc33d38
00824d96 : PUSH 0x1
00824d98 : PUSH 0x5
00824d9a : CALL dword ptr [0x00d6d240]
00824da0 : ADD ESP,0xc
00824da3 : MOV ECX,EDI
00824da5 : CALL 0x00800e90
00824daa : PUSH 0xc33d3c
00824daf : PUSH 0x1
00824db1 : PUSH 0x5
00824db3 : CALL dword ptr [0x00d6d240]
00824db9 : ADD ESP,0xc
00824dbc : PUSH 0xc33d40
00824dc1 : PUSH 0x1
00824dc3 : PUSH 0x5
00824dc5 : CALL dword ptr [0x00d6d240]
00824dcb : MOV ESI,dword ptr [EDI + 0xcc]
00824dd1 : ADD ESP,0xc
00824dd4 : TEST ESI,ESI
00824dd6 : JZ 0x00824df5
00824dd8 : MOV EAX,dword ptr [ESI + 0x4]
00824ddb : TEST EAX,EAX
00824ddd : JZ 0x00824df5
00824ddf : SUB EAX,0x1
00824de2 : JZ 0x00824df0
00824de4 : SUB EAX,0x1
00824de7 : JNZ 0x00824df5
00824de9 : CALL 0x00a0a000
00824dee : JMP 0x00824df5
00824df0 : CALL 0x00a0a0b0
00824df5 : PUSH 0xc33d44
00824dfa : PUSH 0x1
00824dfc : PUSH 0x5
00824dfe : CALL dword ptr [0x00d6d240]
00824e04 : MOV EAX,[0x00da98f8]
00824e09 : ADD ESP,0xc
00824e0c : TEST EAX,EAX
00824e0e : JZ 0x00824e31
00824e10 : MOV ECX,dword ptr [0x017251ac]
00824e16 : CMP byte ptr [ECX + 0x5],0x1
00824e1a : JNZ 0x00824e2a
00824e1c : PUSH -0x1
00824e1e : PUSH EAX
00824e1f : CALL dword ptr [0x00b85100]
00824e25 : MOV EAX,[0x00da98f8]
00824e2a : PUSH EAX
00824e2b : CALL dword ptr [0x00b851dc]
00824e31 : PUSH 0xc33d48
00824e36 : PUSH 0x1
00824e38 : PUSH 0x5
00824e3a : CALL dword ptr [0x00d6d240]
00824e40 : ADD ESP,0xc
00824e43 : POP EDI
00824e44 : POP ESI
00824e45 : MOV ESP,EBP
00824e47 : POP EBP
00824e48 : RET
