PROGRAM  : Maestia.exe
FUNCTION : FUN_00735690
ENTRY    : 00735690
BODY     : [[00735690, 0073590d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00735690(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  int iVar8;
  int in_ECX;
  undefined4 *puVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint local_28;
  
  iVar7 = FUN_0070a3a0();
  fVar4 = DAT_00d72c24;
  uVar6 = 0;
  if (*(short *)(in_ECX + 0x10) != 0) {
    do {
      uVar11 = (uint)uVar6;
      puVar9 = (undefined4 *)(uVar11 * 0x4c + iVar7);
      iVar8 = uVar11 * 0xc;
      *puVar9 = *(undefined4 *)(iVar8 + param_1);
      puVar9[1] = *(undefined4 *)(iVar8 + 4 + param_1);
      puVar9[2] = *(undefined4 *)(iVar8 + 8 + param_1);
      puVar9[3] = *(undefined4 *)(iVar8 + param_2);
      puVar9[4] = *(undefined4 *)(iVar8 + 4 + param_2);
      puVar9[5] = *(undefined4 *)(iVar8 + 8 + param_2);
      puVar9[7] = *(undefined4 *)(param_3 + uVar11 * 8);
      puVar9[8] = *(undefined4 *)(param_3 + 4 + uVar11 * 8);
      if (param_4 == 0) {
        puVar9[6] = 0xffffffff;
      }
      else {
        fVar1 = *(float *)(iVar8 + param_4);
        fVar2 = *(float *)(iVar8 + 4 + param_4);
        fVar3 = *(float *)(iVar8 + 8 + param_4);
        if (fVar1 < 1.0) {
          if (0.0 < fVar1) {
            local_28 = (uint)(longlong)ROUND(fVar1 * 255.0 + fVar4);
            uVar10 = local_28;
          }
          else {
            uVar10 = 0;
          }
        }
        else {
          uVar10 = 0xff;
        }
        if (fVar2 < 1.0) {
          if (0.0 < fVar2) {
            local_28 = (uint)(longlong)ROUND(fVar2 * 255.0 + fVar4);
            uVar12 = local_28;
          }
          else {
            uVar12 = 0;
          }
        }
        else {
          uVar12 = 0xff;
        }
        if (fVar3 < 1.0) {
          if (0.0 < fVar3) {
            local_28 = (uint)(longlong)ROUND(fVar3 * 255.0 + fVar4);
          }
          else {
            local_28 = 0;
          }
        }
        else {
          local_28 = 0xff;
        }
        puVar9[6] = ((uVar10 | 0xffffff00) << 8 | uVar12) << 8 | local_28;
      }
      iVar8 = uVar11 * 0x10 + param_5;
      puVar9[9] = *(undefined4 *)(uVar11 * 0x10 + param_5);
      puVar9[10] = *(undefined4 *)(iVar8 + 4);
      puVar9[0xb] = *(undefined4 *)(iVar8 + 8);
      uVar5 = 0;
      puVar9[0xc] = *(undefined4 *)(iVar8 + 0xc);
      if (*(short *)(param_6 + uVar11 * 8) == 0) {
LAB_007358aa:
        puVar9 = (undefined4 *)(iVar7 + 0x34 + (uVar11 * 0x13 + (uint)uVar5) * 4);
        uVar11 = (uint)(ushort)(3 - uVar5);
        do {
          puVar9[3] = 0;
          *puVar9 = 0;
          puVar9 = puVar9 + 1;
          uVar11 = uVar11 - 1;
        } while (uVar11 != 0);
      }
      else {
        do {
          uVar10 = (uint)uVar5;
          iVar8 = uVar11 * 0x13 + uVar10;
          *(float *)(iVar7 + 0x40 + iVar8 * 4) =
               (float)*(ushort *)(*(int *)(param_6 + 4 + uVar11 * 8) + 4 + uVar10 * 8);
          *(undefined4 *)(iVar7 + 0x34 + iVar8 * 4) =
               *(undefined4 *)(*(int *)(param_6 + 4 + uVar11 * 8) + uVar10 * 8);
          uVar5 = uVar5 + 1;
        } while (uVar5 < *(ushort *)(param_6 + uVar11 * 8));
        if (uVar5 < 3) goto LAB_007358aa;
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ushort *)(in_ECX + 0x10));
  }
  FUN_007377f0(iVar7);
  FUN_0070a260(iVar7);
  return;
}



============================================================
DISASSEMBLY
============================================================
00735690 : PUSH EBP
00735691 : MOV EBP,ESP
00735693 : AND ESP,0xfffffff8
00735696 : SUB ESP,0x2c
00735699 : PUSH EBX
0073569a : PUSH ESI
0073569b : PUSH EDI
0073569c : MOV EDI,ECX
0073569e : MOVZX ECX,word ptr [EDI + 0x10]
007356a2 : IMUL ECX,ECX,0x4c
007356a5 : MOV dword ptr [ESP + 0x24],EDI
007356a9 : CALL 0x0070a3a0
007356ae : MOV ESI,EAX
007356b0 : XOR EAX,EAX
007356b2 : XOR ECX,ECX
007356b4 : MOV dword ptr [ESP + 0x10],ESI
007356b8 : MOV dword ptr [ESP + 0x14],EAX
007356bc : CMP CX,word ptr [EDI + 0x10]
007356c0 : JNC 0x007358f4
007356c6 : FLD float ptr [0x00cdf130]
007356cc : MOV EBX,dword ptr [EBP + 0xc]
007356cf : MOVSS XMM4,dword ptr [0x00c10fc4]
007356d7 : FLD float ptr [0x00d72c24]
007356dd : XORPS XMM2,XMM2
007356e0 : MOVZX EDX,AX
007356e3 : MOV ECX,EDX
007356e5 : IMUL ECX,ECX,0x4c
007356e8 : ADD ECX,ESI
007356ea : MOV ESI,dword ptr [EBP + 0x8]
007356ed : LEA EAX,[EDX + EDX*0x2]
007356f0 : ADD EAX,EAX
007356f2 : ADD EAX,EAX
007356f4 : FLD float ptr [EAX + ESI*0x1]
007356f7 : FSTP float ptr [ECX]
007356f9 : FLD float ptr [EAX + ESI*0x1 + 0x4]
007356fd : FSTP float ptr [ECX + 0x4]
00735700 : FLD float ptr [EAX + ESI*0x1 + 0x8]
00735704 : MOV ESI,dword ptr [EBP + 0x10]
00735707 : FSTP float ptr [ECX + 0x8]
0073570a : FLD float ptr [EAX + EBX*0x1]
0073570d : FSTP float ptr [ECX + 0xc]
00735710 : FLD float ptr [EAX + EBX*0x1 + 0x4]
00735714 : FSTP float ptr [ECX + 0x10]
00735717 : FLD float ptr [EAX + EBX*0x1 + 0x8]
0073571b : FSTP float ptr [ECX + 0x14]
0073571e : FLD float ptr [ESI + EDX*0x8]
00735721 : FSTP float ptr [ECX + 0x1c]
00735724 : FLD float ptr [ESI + EDX*0x8 + 0x4]
00735728 : MOV ESI,dword ptr [EBP + 0x14]
0073572b : FSTP float ptr [ECX + 0x20]
0073572e : TEST ESI,ESI
00735730 : JNZ 0x0073573e
00735732 : MOV dword ptr [ECX + 0x18],0xffffffff
00735739 : JMP 0x00735831
0073573e : MOVSS XMM0,dword ptr [EAX + ESI*0x1]
00735743 : COMISS XMM0,XMM4
00735746 : MOVSS XMM1,dword ptr [EAX + ESI*0x1 + 0x4]
0073574c : MOVSS XMM3,dword ptr [EAX + ESI*0x1 + 0x8]
00735752 : MOVSS dword ptr [ESP + 0x28],XMM0
00735758 : MOVSS dword ptr [ESP + 0x2c],XMM1
0073575e : MOVSS dword ptr [ESP + 0x30],XMM3
00735764 : JC 0x0073576d
00735766 : MOV ESI,0xff
0073576b : JMP 0x007357a0
0073576d : COMISS XMM2,XMM0
00735770 : JC 0x00735776
00735772 : XOR ESI,ESI
00735774 : JMP 0x007357a0
00735776 : FLD float ptr [ESP + 0x28]
0073577a : FNSTCW word ptr [ESP + 0xe]
0073577e : MOVZX EAX,word ptr [ESP + 0xe]
00735783 : FMUL ST2
00735785 : OR EAX,0xc00
0073578a : MOV dword ptr [ESP + 0x18],EAX
0073578e : FADD ST0,ST1
00735790 : FLDCW word ptr [ESP + 0x18]
00735794 : FISTP qword ptr [ESP + 0x18]
00735798 : MOV ESI,dword ptr [ESP + 0x18]
0073579c : FLDCW word ptr [ESP + 0xe]
007357a0 : COMISS XMM1,XMM4
007357a3 : JC 0x007357ac
007357a5 : MOV EDI,0xff
007357aa : JMP 0x007357df
007357ac : COMISS XMM2,XMM1
007357af : JC 0x007357b5
007357b1 : XOR EDI,EDI
007357b3 : JMP 0x007357df
007357b5 : FLD float ptr [ESP + 0x2c]
007357b9 : FNSTCW word ptr [ESP + 0xe]
007357bd : MOVZX EAX,word ptr [ESP + 0xe]
007357c2 : FMUL ST2
007357c4 : OR EAX,0xc00
007357c9 : MOV dword ptr [ESP + 0x18],EAX
007357cd : FADD ST0,ST1
007357cf : FLDCW word ptr [ESP + 0x18]
007357d3 : FISTP qword ptr [ESP + 0x18]
007357d7 : MOV EDI,dword ptr [ESP + 0x18]
007357db : FLDCW word ptr [ESP + 0xe]
007357df : COMISS XMM3,XMM4
007357e2 : JC 0x007357eb
007357e4 : MOV EAX,0xff
007357e9 : JMP 0x0073581e
007357eb : COMISS XMM2,XMM3
007357ee : JC 0x007357f4
007357f0 : XOR EAX,EAX
007357f2 : JMP 0x0073581e
007357f4 : FLD float ptr [ESP + 0x30]
007357f8 : FNSTCW word ptr [ESP + 0xe]
007357fc : MOVZX EAX,word ptr [ESP + 0xe]
00735801 : FMUL ST2
00735803 : OR EAX,0xc00
00735808 : MOV dword ptr [ESP + 0x18],EAX
0073580c : FADD ST0,ST1
0073580e : FLDCW word ptr [ESP + 0x18]
00735812 : FISTP qword ptr [ESP + 0x18]
00735816 : MOV EAX,dword ptr [ESP + 0x18]
0073581a : FLDCW word ptr [ESP + 0xe]
0073581e : OR ESI,0xffffff00
00735824 : SHL ESI,0x8
00735827 : OR ESI,EDI
00735829 : SHL ESI,0x8
0073582c : OR ESI,EAX
0073582e : MOV dword ptr [ECX + 0x18],ESI
00735831 : MOV ESI,dword ptr [EBP + 0x18]
00735834 : MOV EAX,EDX
00735836 : SHL EAX,0x4
00735839 : FLD float ptr [EAX + ESI*0x1]
0073583c : ADD EAX,ESI
0073583e : MOV ESI,dword ptr [EBP + 0x1c]
00735841 : FSTP float ptr [ECX + 0x24]
00735844 : FLD float ptr [EAX + 0x4]
00735847 : FSTP float ptr [ECX + 0x28]
0073584a : FLD float ptr [EAX + 0x8]
0073584d : FSTP float ptr [ECX + 0x2c]
00735850 : FLD float ptr [EAX + 0xc]
00735853 : XOR EAX,EAX
00735855 : FSTP float ptr [ECX + 0x30]
00735858 : XOR ECX,ECX
0073585a : CMP CX,word ptr [ESI + EDX*0x8]
0073585e : JNC 0x007358aa
00735860 : MOV EDI,EDX
00735862 : IMUL EDI,EDI,0x13
00735865 : MOV EBX,dword ptr [EBP + 0x1c]
00735868 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
0073586c : MOVZX ECX,AX
0073586f : MOVZX EBX,word ptr [EBX + ECX*0x8 + 0x4]
00735874 : CVTSI2SS XMM0,EBX
00735878 : MOV EBX,dword ptr [ESP + 0x10]
0073587c : LEA ESI,[EDI + ECX*0x1]
0073587f : MOVSS dword ptr [EBX + ESI*0x4 + 0x40],XMM0
00735885 : MOV EBX,dword ptr [EBP + 0x1c]
00735888 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
0073588c : FLD float ptr [EBX + ECX*0x8]
0073588f : MOV ECX,dword ptr [ESP + 0x10]
00735893 : FSTP float ptr [ECX + ESI*0x4 + 0x34]
00735897 : MOV ECX,dword ptr [EBP + 0x1c]
0073589a : INC EAX
0073589b : CMP AX,word ptr [ECX + EDX*0x8]
0073589f : JC 0x00735865
007358a1 : MOV EBX,dword ptr [EBP + 0xc]
007358a4 : CMP AX,0x3
007358a8 : JNC 0x007358d5
007358aa : IMUL EDX,EDX,0x13
007358ad : MOVZX ECX,AX
007358b0 : ADD EDX,ECX
007358b2 : MOV ECX,dword ptr [ESP + 0x10]
007358b6 : LEA ECX,[ECX + EDX*0x4 + 0x34]
007358ba : MOV EDX,0x3
007358bf : SUB EDX,EAX
007358c1 : MOVZX EAX,DX
007358c4 : MOVSS dword ptr [ECX + 0xc],XMM2
007358c9 : MOVSS dword ptr [ECX],XMM2
007358cd : ADD ECX,0x4
007358d0 : SUB EAX,0x1
007358d3 : JNZ 0x007358c4
007358d5 : MOV EAX,dword ptr [ESP + 0x14]
007358d9 : MOV EDI,dword ptr [ESP + 0x24]
007358dd : MOV ESI,dword ptr [ESP + 0x10]
007358e1 : INC EAX
007358e2 : MOV dword ptr [ESP + 0x14],EAX
007358e6 : CMP AX,word ptr [EDI + 0x10]
007358ea : JC 0x007356e0
007358f0 : FSTP ST1
007358f2 : FSTP ST0
007358f4 : PUSH ESI
007358f5 : MOV ECX,EDI
007358f7 : CALL 0x007377f0
007358fc : PUSH ESI
007358fd : CALL 0x0070a260
00735902 : ADD ESP,0x4
00735905 : POP EDI
00735906 : POP ESI
00735907 : POP EBX
00735908 : MOV ESP,EBP
0073590a : POP EBP
0073590b : RET 0x18
