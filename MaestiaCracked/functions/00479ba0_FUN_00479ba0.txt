PROGRAM  : Maestia.exe
FUNCTION : FUN_00479ba0
ENTRY    : 00479ba0
BODY     : [[00479ba0, 00479cf5] [00479cfc, 00479d27] [00479d69, 00479e0e] [00479e2c, 00479e9b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00479ba0(int param_1,int param_2,uint param_3)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  uint extraout_ECX;
  int iVar4;
  uint local_1c;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a5e0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar1 = *(int *)(param_1 + 4);
  if (iVar1 == 0) {
    local_1c = 0;
  }
  else {
    local_1c = (*(int *)(param_1 + 0xc) - iVar1) / 0x18;
  }
  iVar4 = *(int *)(param_1 + 8);
  iVar1 = (iVar4 - iVar1) / 0x18;
  if (iVar1 == 0xaaaaaaa) {
    iVar1 = FUN_00429be0();
    local_1c = extraout_ECX;
  }
  uVar2 = iVar1 + 1;
  if (local_1c < uVar2) {
    if (0xaaaaaaa - (local_1c >> 1) < local_1c) {
      local_1c = 0;
    }
    else {
      local_1c = local_1c + (local_1c >> 1);
    }
    if (local_1c < uVar2) {
      local_1c = uVar2;
    }
    iVar1 = FUN_00444a00();
    local_8 = 0;
    FUN_00479b70();
    FUN_00479ea0(*(undefined4 *)(param_1 + 4),param_2);
    FUN_00479ea0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_00479b00();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = iVar1 + local_1c * 0x18;
    *(int *)(param_1 + 8) =
         iVar1 + ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x18 + 1) * 0x18;
    *(int *)(param_1 + 4) = iVar1;
    ExceptionList = local_10;
    return;
  }
  iVar4 = iVar4 - param_2;
  iVar1 = iVar4 >> 0x1f;
  if (iVar4 / 0x18 + iVar1 == iVar1) {
    local_8 = 2;
    FUN_00479ea0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = CONCAT31(local_8._1_3_,3);
    FUN_00479b70();
    local_8 = 2;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x18;
    FUN_00479fb0(param_2);
  }
  else {
    local_8 = 5;
    uVar3 = FUN_00479ea0(*(int *)(param_1 + 8) + -0x18,*(int *)(param_1 + 8));
    *(undefined4 *)(param_1 + 8) = uVar3;
    param_3 = param_3 & 0xffffff00;
    FUN_0047a020(param_2,param_2,param_2,param_3);
    FUN_00479fb0(param_2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00479ba0 : PUSH EBP
00479ba1 : MOV EBP,ESP
00479ba3 : PUSH -0x1
00479ba5 : PUSH 0xb7a5e0
00479baa : MOV EAX,FS:[0x0]
00479bb0 : PUSH EAX
00479bb1 : SUB ESP,0x30
00479bb4 : PUSH EBX
00479bb5 : PUSH ESI
00479bb6 : PUSH EDI
00479bb7 : MOV EAX,[0x00d66fa0]
00479bbc : XOR EAX,EBP
00479bbe : PUSH EAX
00479bbf : LEA EAX,[EBP + -0xc]
00479bc2 : MOV FS:[0x0],EAX
00479bc8 : MOV dword ptr [EBP + -0x10],ESP
00479bcb : MOV EBX,dword ptr [EBP + 0x8]
00479bce : MOV ESI,dword ptr [EBX + 0x4]
00479bd1 : TEST ESI,ESI
00479bd3 : JNZ 0x00479bd9
00479bd5 : XOR ECX,ECX
00479bd7 : JMP 0x00479bf1
00479bd9 : MOV ECX,dword ptr [EBX + 0xc]
00479bdc : SUB ECX,ESI
00479bde : MOV EAX,0x2aaaaaab
00479be3 : IMUL ECX
00479be5 : SAR EDX,0x2
00479be8 : MOV EAX,EDX
00479bea : SHR EAX,0x1f
00479bed : ADD EAX,EDX
00479bef : MOV ECX,EAX
00479bf1 : MOV EDI,dword ptr [EBX + 0x8]
00479bf4 : MOV EDX,EDI
00479bf6 : SUB EDX,ESI
00479bf8 : MOV EAX,0x2aaaaaab
00479bfd : IMUL EDX
00479bff : SAR EDX,0x2
00479c02 : MOV EAX,EDX
00479c04 : SHR EAX,0x1f
00479c07 : ADD EAX,EDX
00479c09 : MOV EDX,0xaaaaaaa
00479c0e : SUB EDX,EAX
00479c10 : CMP EDX,0x1
00479c13 : JNC 0x00479c1a
00479c15 : CALL 0x00429be0
00479c1a : INC EAX
00479c1b : CMP ECX,EAX
00479c1d : JNC 0x00479d69
00479c23 : MOV EDX,ECX
00479c25 : SHR EDX,0x1
00479c27 : MOV ESI,0xaaaaaaa
00479c2c : SUB ESI,EDX
00479c2e : CMP ESI,ECX
00479c30 : JNC 0x00479c3b
00479c32 : XOR EDI,EDI
00479c34 : MOV dword ptr [EBP + -0x18],EDI
00479c37 : MOV ECX,EDI
00479c39 : JMP 0x00479c42
00479c3b : ADD ECX,EDX
00479c3d : MOV dword ptr [EBP + -0x18],ECX
00479c40 : XOR EDI,EDI
00479c42 : CMP ECX,EAX
00479c44 : JNC 0x00479c4b
00479c46 : MOV dword ptr [EBP + -0x18],EAX
00479c49 : MOV ECX,EAX
00479c4b : CALL 0x00444a00
00479c50 : MOV ESI,EAX
00479c52 : MOV dword ptr [EBP + 0x8],ESI
00479c55 : MOV ECX,dword ptr [EBP + 0xc]
00479c58 : SUB ECX,dword ptr [EBX + 0x4]
00479c5b : MOV EAX,0x2aaaaaab
00479c60 : IMUL ECX
00479c62 : SAR EDX,0x2
00479c65 : MOV EAX,EDX
00479c67 : SHR EAX,0x1f
00479c6a : ADD EAX,EDX
00479c6c : MOV dword ptr [EBP + -0x20],EAX
00479c6f : MOV dword ptr [EBP + -0x1c],EDI
00479c72 : MOV dword ptr [EBP + -0x4],EDI
00479c75 : LEA EAX,[EAX + EAX*0x2]
00479c78 : LEA EDI,[ESI + EAX*0x8]
00479c7b : MOV EDX,dword ptr [EBP + 0x10]
00479c7e : MOV ESI,0x1
00479c83 : CALL 0x00479b70
00479c88 : MOV dword ptr [EBP + -0x1c],ESI
00479c8b : MOV ECX,dword ptr [EBP + 0xc]
00479c8e : PUSH ECX
00479c8f : MOV EDX,dword ptr [EBX + 0x4]
00479c92 : PUSH EDX
00479c93 : MOV EDI,dword ptr [EBP + 0x8]
00479c96 : MOV EDX,EDI
00479c98 : CALL 0x00479ea0
00479c9d : MOV dword ptr [EBP + -0x1c],0x2
00479ca4 : MOV EAX,dword ptr [EBP + -0x20]
00479ca7 : LEA EAX,[EAX + EAX*0x2 + 0x3]
00479cab : LEA EDX,[EDI + EAX*0x8]
00479cae : MOV ECX,dword ptr [EBX + 0x8]
00479cb1 : PUSH ECX
00479cb2 : MOV EAX,dword ptr [EBP + 0xc]
00479cb5 : PUSH EAX
00479cb6 : CALL 0x00479ea0
00479cbb : MOV dword ptr [EBP + -0x4],0xffffffff
00479cc2 : MOV ECX,dword ptr [EBX + 0x8]
00479cc5 : MOV ESI,dword ptr [EBX + 0x4]
00479cc8 : SUB ECX,ESI
00479cca : MOV EAX,0x2aaaaaab
00479ccf : IMUL ECX
00479cd1 : SAR EDX,0x2
00479cd4 : MOV ECX,EDX
00479cd6 : SHR ECX,0x1f
00479cd9 : LEA EDX,[EDX + ECX*0x1 + 0x1]
00479cdd : MOV dword ptr [EBP + 0x10],EDX
00479ce0 : TEST ESI,ESI
00479ce2 : JZ 0x00479cfc
00479ce4 : MOV EDI,dword ptr [EBX + 0x8]
00479ce7 : MOV EAX,ESI
00479ce9 : CALL 0x00479b00
00479cee : MOV ECX,dword ptr [EBX + 0x4]
00479cf1 : CALL 0x006f04e0
00479cfc : MOV EAX,dword ptr [EBP + -0x18]
00479cff : LEA EAX,[EAX + EAX*0x2]
00479d02 : LEA ECX,[EDI + EAX*0x8]
00479d05 : MOV dword ptr [EBX + 0xc],ECX
00479d08 : LEA EDX,[EDX + EDX*0x2]
00479d0b : LEA EAX,[EDI + EDX*0x8]
00479d0e : MOV dword ptr [EBX + 0x8],EAX
00479d11 : MOV dword ptr [EBX + 0x4],EDI
00479d14 : MOV ECX,dword ptr [EBP + -0xc]
00479d17 : MOV dword ptr FS:[0x0],ECX
00479d1e : POP ECX
00479d1f : POP EDI
00479d20 : POP ESI
00479d21 : POP EBX
00479d22 : MOV ESP,EBP
00479d24 : POP EBP
00479d25 : RET 0xc
00479d69 : SUB EDI,dword ptr [EBP + 0xc]
00479d6c : MOV EAX,0x2aaaaaab
00479d71 : IMUL EDI
00479d73 : SAR EDX,0x2
00479d76 : MOV ECX,EDX
00479d78 : SHR ECX,0x1f
00479d7b : ADD ECX,EDX
00479d7d : MOV dword ptr [EBP + -0x38],0xcd083c
00479d84 : MOV EAX,dword ptr [EBP + 0x10]
00479d87 : MOVQ XMM0,qword ptr [EAX + 0x4]
00479d8c : MOVQ qword ptr [EBP + -0x34],XMM0
00479d91 : MOVQ XMM0,qword ptr [EAX + 0xc]
00479d96 : MOVQ qword ptr [EBP + -0x2c],XMM0
00479d9b : CMP ECX,0x1
00479d9e : JNC 0x00479e2c
00479da4 : MOV EDX,dword ptr [EAX + 0x14]
00479da7 : MOV dword ptr [EBP + -0x24],EDX
00479daa : MOV dword ptr [EBP + -0x4],0x2
00479db1 : MOV EAX,dword ptr [EBP + 0xc]
00479db4 : LEA EDX,[EAX + 0x18]
00479db7 : MOV ECX,dword ptr [EBX + 0x8]
00479dba : PUSH ECX
00479dbb : PUSH EAX
00479dbc : CALL 0x00479ea0
00479dc1 : MOV byte ptr [EBP + -0x4],0x3
00479dc5 : MOV EDI,dword ptr [EBX + 0x8]
00479dc8 : MOV ECX,EDI
00479dca : SUB ECX,dword ptr [EBP + 0xc]
00479dcd : MOV EAX,0x2aaaaaab
00479dd2 : IMUL ECX
00479dd4 : SAR EDX,0x2
00479dd7 : MOV EAX,EDX
00479dd9 : SHR EAX,0x1f
00479ddc : ADD EAX,EDX
00479dde : MOV ESI,0x1
00479de3 : SUB ESI,EAX
00479de5 : LEA EDX,[EBP + -0x38]
00479de8 : CALL 0x00479b70
00479ded : MOV dword ptr [EBP + -0x4],0x2
00479df4 : ADD dword ptr [EBX + 0x8],0x18
00479df8 : MOV EBX,dword ptr [EBX + 0x8]
00479dfb : LEA EDX,[EBX + -0x18]
00479dfe : MOV ECX,dword ptr [EBP + 0xc]
00479e01 : PUSH ECX
00479e02 : LEA ECX,[EBP + -0x38]
00479e05 : CALL 0x00479fb0
00479e0a : ADD ESP,0x4
00479e0d : JMP 0x00479e7a
00479e2c : MOV EAX,dword ptr [EAX + 0x14]
00479e2f : MOV dword ptr [EBP + -0x24],EAX
00479e32 : MOV dword ptr [EBP + -0x4],0x5
00479e39 : MOV ESI,dword ptr [EBX + 0x8]
00479e3c : LEA EDI,[ESI + -0x18]
00479e3f : PUSH ESI
00479e40 : PUSH EDI
00479e41 : MOV EDX,ESI
00479e43 : CALL 0x00479ea0
00479e48 : MOV dword ptr [EBX + 0x8],EAX
00479e4b : MOV byte ptr [EBP + 0x10],0x0
00479e4f : MOV ECX,dword ptr [EBP + 0x10]
00479e52 : PUSH ECX
00479e53 : MOV EDX,dword ptr [EBP + 0xc]
00479e56 : PUSH EDX
00479e57 : MOV EAX,dword ptr [EBP + 0xc]
00479e5a : PUSH EAX
00479e5b : MOV ECX,dword ptr [EBP + 0xc]
00479e5e : PUSH ECX
00479e5f : MOV EAX,ESI
00479e61 : MOV ECX,EDI
00479e63 : CALL 0x0047a020
00479e68 : MOV EAX,dword ptr [EBP + 0xc]
00479e6b : LEA EDX,[EAX + 0x18]
00479e6e : PUSH EAX
00479e6f : LEA ECX,[EBP + -0x38]
00479e72 : CALL 0x00479fb0
00479e77 : ADD ESP,0x14
00479e7a : MOV dword ptr [EBP + -0x4],0xffffffff
00479e81 : MOV dword ptr [EBP + -0x38],0xcd083c
00479e88 : MOV ECX,dword ptr [EBP + -0xc]
00479e8b : MOV dword ptr FS:[0x0],ECX
00479e92 : POP ECX
00479e93 : POP EDI
00479e94 : POP ESI
00479e95 : POP EBX
00479e96 : MOV ESP,EBP
00479e98 : POP EBP
00479e99 : RET 0xc
