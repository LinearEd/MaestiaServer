PROGRAM  : Maestia.exe
FUNCTION : FUN_00611360
ENTRY    : 00611360
BODY     : [[00611360, 00611449]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00611360(int param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  int *in_ECX;
  
  if (param_2 == 0) {
    iVar1 = 1;
  }
  else {
    iVar1 = *in_ECX / param_2;
  }
  in_ECX[0x19] = iVar1;
  if (param_1 == 0) {
    iVar1 = 1;
  }
  else {
    iVar1 = *in_ECX / param_1;
  }
  in_ECX[0x1a] = iVar1;
  in_ECX[0x1b] = (*in_ECX / iVar1) * iVar1;
  if ((param_1 != 0) || (param_2 != 0)) {
    FUN_00610920();
    FUN_006109a0();
    if ((param_1 != 0) && (*(short *)((int)in_ECX + 0x5a) < *(short *)((int)in_ECX + 0x5e))) {
      FUN_00610c70(2);
      FUN_00610fb0(2,in_ECX[0x1a],
                   ((int)*(short *)((int)in_ECX + 0x5e) - (int)*(short *)((int)in_ECX + 0x5a)) / 3 +
                   (int)*(short *)((int)in_ECX + 0x5a),param_3,param_4);
    }
    if ((param_2 != 0) && (*(short *)((int)in_ECX + 0x5a) < *(short *)((int)in_ECX + 0x5e))) {
      FUN_00610c70(1);
      FUN_00610fb0(1,in_ECX[0x19],
                   ((int)(short)in_ECX[0x17] - (int)(short)in_ECX[0x16]) / 3 +
                   (int)(short)in_ECX[0x16],0,0);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00611360 : PUSH EBX
00611361 : MOV EBX,dword ptr [ESP + 0xc]
00611365 : PUSH ESI
00611366 : PUSH EDI
00611367 : MOV ESI,ECX
00611369 : TEST EBX,EBX
0061136b : JZ 0x00611374
0061136d : MOV EAX,dword ptr [ESI]
0061136f : CDQ
00611370 : IDIV EBX
00611372 : JMP 0x00611379
00611374 : MOV EAX,0x1
00611379 : MOV EDI,dword ptr [ESP + 0x10]
0061137d : MOV dword ptr [ESI + 0x64],EAX
00611380 : TEST EDI,EDI
00611382 : JZ 0x0061138d
00611384 : MOV EAX,dword ptr [ESI]
00611386 : CDQ
00611387 : IDIV EDI
00611389 : MOV ECX,EAX
0061138b : JMP 0x00611392
0061138d : MOV ECX,0x1
00611392 : MOV EAX,dword ptr [ESI]
00611394 : CDQ
00611395 : IDIV ECX
00611397 : MOV dword ptr [ESI + 0x68],ECX
0061139a : IMUL EAX,ECX
0061139d : MOV dword ptr [ESI + 0x6c],EAX
006113a0 : TEST EDI,EDI
006113a2 : JNZ 0x006113ac
006113a4 : TEST EBX,EBX
006113a6 : JZ 0x00611444
006113ac : MOV ECX,ESI
006113ae : CALL 0x00610920
006113b3 : MOV ECX,ESI
006113b5 : CALL 0x006109a0
006113ba : TEST EDI,EDI
006113bc : JZ 0x00611401
006113be : MOV AX,word ptr [ESI + 0x5e]
006113c2 : CMP AX,word ptr [ESI + 0x5a]
006113c6 : JLE 0x00611401
006113c8 : PUSH 0x2
006113ca : CALL 0x00610c70
006113cf : MOV ECX,dword ptr [ESP + 0x1c]
006113d3 : MOVSX EDI,word ptr [ESI + 0x5a]
006113d7 : MOV EDX,dword ptr [ESP + 0x18]
006113db : PUSH ECX
006113dc : MOVSX ECX,word ptr [ESI + 0x5e]
006113e0 : PUSH EDX
006113e1 : SUB ECX,EDI
006113e3 : MOV EAX,0x55555556
006113e8 : IMUL ECX
006113ea : MOV ECX,dword ptr [ESI + 0x68]
006113ed : MOV EAX,EDX
006113ef : SHR EAX,0x1f
006113f2 : ADD EAX,EDX
006113f4 : ADD EAX,EDI
006113f6 : PUSH EAX
006113f7 : PUSH ECX
006113f8 : PUSH 0x2
006113fa : MOV ECX,ESI
006113fc : CALL 0x00610fb0
00611401 : TEST EBX,EBX
00611403 : JZ 0x00611444
00611405 : MOV DX,word ptr [ESI + 0x5e]
00611409 : CMP DX,word ptr [ESI + 0x5a]
0061140d : JLE 0x00611444
0061140f : PUSH 0x1
00611411 : MOV ECX,ESI
00611413 : CALL 0x00610c70
00611418 : MOVSX EDI,word ptr [ESI + 0x58]
0061141c : MOVSX ECX,word ptr [ESI + 0x5c]
00611420 : SUB ECX,EDI
00611422 : MOV EAX,0x55555556
00611427 : IMUL ECX
00611429 : MOV ECX,dword ptr [ESI + 0x64]
0061142c : MOV EAX,EDX
0061142e : PUSH 0x0
00611430 : SHR EAX,0x1f
00611433 : PUSH 0x0
00611435 : ADD EAX,EDX
00611437 : ADD EAX,EDI
00611439 : PUSH EAX
0061143a : PUSH ECX
0061143b : PUSH 0x1
0061143d : MOV ECX,ESI
0061143f : CALL 0x00610fb0
00611444 : POP EDI
00611445 : POP ESI
00611446 : POP EBX
00611447 : RET 0x10
