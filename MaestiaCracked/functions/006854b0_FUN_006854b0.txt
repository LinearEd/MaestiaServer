PROGRAM  : Maestia.exe
FUNCTION : FUN_006854b0
ENTRY    : 006854b0
BODY     : [[006854b0, 006855bc]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006854b0(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint *puVar5;
  
  iVar3 = param_2;
  iVar2 = param_1;
  iVar4 = *(int *)(*(int *)(param_1 + 4) + 0x5c);
  if ((iVar4 != 0x1000000) && (iVar4 != 0x2000000)) {
    piVar1 = (int *)(*(int *)(param_1 + 4) + 0x70);
    *piVar1 = *piVar1 + -1;
    if (param_2 == *(int *)(param_1 + 0x2c)) {
      if (*(int *)(*(int *)(param_1 + 4) + 4) != 0) {
        iVar4 = FUN_0051b1a0();
        if (iVar4 != 0) {
          puVar5 = (uint *)FUN_0051c6e0(&param_1,".RemoveList");
          FUN_00678eb0(*(undefined4 *)(*(int *)(iVar2 + 4) + 4),(*puVar5 & 0xfffffffc) + 8,0);
          FUN_0045b730();
        }
      }
      FUN_00684a80();
      *(undefined1 *)(iVar2 + 0x3a) = 0;
    }
    if (iVar3 == *(int *)(iVar2 + 0x30)) {
      if (*(int *)(*(int *)(iVar2 + 4) + 4) != 0) {
        iVar4 = FUN_0051b1a0();
        if (iVar4 != 0) {
          puVar5 = (uint *)FUN_0051c6e0(&param_1,".RemoveInputWindow");
          FUN_00678eb0(*(undefined4 *)(*(int *)(iVar2 + 4) + 4),(*puVar5 & 0xfffffffc) + 8,0);
          FUN_0045b730();
        }
      }
      FUN_0051bb20(&DAT_00cca874);
    }
    piVar1 = *(int **)(iVar2 + 4);
    if ((piVar1[0x1c] == 0) && ((char)piVar1[0x1d] != '\0')) {
      (**(code **)(*piVar1 + 100))(0);
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006854b0 : PUSH ESI
006854b1 : MOV ESI,dword ptr [ESP + 0x8]
006854b5 : MOV EAX,dword ptr [ESI + 0x4]
006854b8 : MOV ECX,dword ptr [EAX + 0x5c]
006854bb : CMP ECX,0x1000000
006854c1 : JZ 0x006855b7
006854c7 : CMP ECX,0x2000000
006854cd : JZ 0x006855b7
006854d3 : DEC dword ptr [EAX + 0x70]
006854d6 : PUSH EDI
006854d7 : MOV EDI,dword ptr [ESP + 0x10]
006854db : CMP EDI,dword ptr [ESI + 0x2c]
006854de : JNZ 0x0068553c
006854e0 : MOV EAX,dword ptr [ESI + 0x4]
006854e3 : CMP dword ptr [EAX + 0x4],0x0
006854e7 : JZ 0x0068552d
006854e9 : LEA ECX,[EAX + 0x8]
006854ec : CALL 0x0051b1a0
006854f1 : TEST EAX,EAX
006854f3 : JBE 0x0068552d
006854f5 : MOV ECX,dword ptr [ESI + 0x4]
006854f8 : PUSH 0xbd7f7c
006854fd : LEA EAX,[ESP + 0x10]
00685501 : PUSH EAX
00685502 : ADD ECX,0x8
00685505 : CALL 0x0051c6e0
0068550a : MOV ECX,dword ptr [EAX]
0068550c : MOV EDX,dword ptr [ESI + 0x4]
0068550f : MOV EAX,dword ptr [EDX + 0x4]
00685512 : AND ECX,0xfffffffc
00685515 : PUSH 0x0
00685517 : ADD ECX,0x8
0068551a : PUSH ECX
0068551b : PUSH EAX
0068551c : CALL 0x00678eb0
00685521 : ADD ESP,0xc
00685524 : LEA ECX,[ESP + 0xc]
00685528 : CALL 0x0045b730
0068552d : MOV ECX,dword ptr [ESI + 0x4]
00685530 : MOV ECX,dword ptr [ECX + 0x18]
00685533 : CALL 0x00684a80
00685538 : MOV byte ptr [ESI + 0x3a],0x0
0068553c : CMP EDI,dword ptr [ESI + 0x30]
0068553f : POP EDI
00685540 : JNZ 0x0068559f
00685542 : MOV EAX,dword ptr [ESI + 0x4]
00685545 : CMP dword ptr [EAX + 0x4],0x0
00685549 : JZ 0x0068558f
0068554b : LEA ECX,[EAX + 0x8]
0068554e : CALL 0x0051b1a0
00685553 : TEST EAX,EAX
00685555 : JBE 0x0068558f
00685557 : MOV ECX,dword ptr [ESI + 0x4]
0068555a : PUSH 0xbd7f88
0068555f : LEA EDX,[ESP + 0xc]
00685563 : PUSH EDX
00685564 : ADD ECX,0x8
00685567 : CALL 0x0051c6e0
0068556c : MOV EAX,dword ptr [EAX]
0068556e : MOV ECX,dword ptr [ESI + 0x4]
00685571 : MOV EDX,dword ptr [ECX + 0x4]
00685574 : AND EAX,0xfffffffc
00685577 : PUSH 0x0
00685579 : ADD EAX,0x8
0068557c : PUSH EAX
0068557d : PUSH EDX
0068557e : CALL 0x00678eb0
00685583 : ADD ESP,0xc
00685586 : LEA ECX,[ESP + 0x8]
0068558a : CALL 0x0045b730
0068558f : MOV ECX,dword ptr [ESI + 0x4]
00685592 : PUSH 0xcca874
00685597 : ADD ECX,0x68
0068559a : CALL 0x0051bb20
0068559f : MOV ECX,dword ptr [ESI + 0x4]
006855a2 : CMP dword ptr [ECX + 0x70],0x0
006855a6 : JNZ 0x006855b7
006855a8 : CMP byte ptr [ECX + 0x74],0x0
006855ac : JZ 0x006855b7
006855ae : MOV EAX,dword ptr [ECX]
006855b0 : MOV EDX,dword ptr [EAX + 0x64]
006855b3 : PUSH 0x0
006855b5 : CALL EDX
006855b7 : XOR EAX,EAX
006855b9 : POP ESI
006855ba : RET 0x8
