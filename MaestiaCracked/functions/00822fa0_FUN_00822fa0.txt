PROGRAM  : Maestia.exe
FUNCTION : FUN_00822fa0
ENTRY    : 00822fa0
BODY     : [[00822fa0, 008230f5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00822fa0(void)

{
  int *piVar1;
  DWORD DVar2;
  int iVar3;
  int unaff_EDI;
  float fVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  piVar1 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b43c73;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)(unaff_EDI + 0x340) != '\0') {
    if (1.0 <= *(float *)(unaff_EDI + 0x33c)) {
      fVar4 = *(float *)(unaff_EDI + 0x33c) - *(float *)(unaff_EDI + 0xb0);
      *(float *)(unaff_EDI + 0x33c) = fVar4;
      if (*(int *)(*piVar1 + 0x148) != 0) {
        FUN_00acffc0(*(int *)(*piVar1 + 0x148),fVar4);
      }
    }
    else if (*(char *)(unaff_EDI + 0x341) == '\0') {
      if (*(int *)(*DAT_00da9894 + 0x148) != 0) {
        (**(code **)(**(int **)(*DAT_00da9894 + 0x148) + 0x20))
                  (DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
      }
      FUN_008018d0(L"RequestExitGame: exitCode %d\n",0);
      FUN_00a0ce50();
      FUN_008018d0(L"RequestExitGame: done\n");
      DVar2 = timeGetTime();
      *(DWORD *)(unaff_EDI + 0x374) = DVar2;
      iVar3 = FUN_00404750(L"[Request to exit] : %u",DVar2);
      local_8 = 0;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      FUN_008018d0(iVar3);
      local_8 = 0xffffffff;
      FUN_00406560();
      *(undefined1 *)(unaff_EDI + 0x340) = 0;
      ExceptionList = local_10;
      return;
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00822fa0 : PUSH EBP
00822fa1 : MOV EBP,ESP
00822fa3 : PUSH -0x1
00822fa5 : PUSH 0xb43c73
00822faa : MOV EAX,FS:[0x0]
00822fb0 : PUSH EAX
00822fb1 : SUB ESP,0x20
00822fb4 : PUSH ESI
00822fb5 : MOV EAX,[0x00d66fa0]
00822fba : XOR EAX,EBP
00822fbc : PUSH EAX
00822fbd : LEA EAX,[EBP + -0xc]
00822fc0 : MOV FS:[0x0],EAX
00822fc6 : CMP byte ptr [EDI + 0x340],0x0
00822fcd : JZ 0x008230e6
00822fd3 : MOVSS XMM0,dword ptr [EDI + 0x33c]
00822fdb : MOVSS XMM1,dword ptr [0x00c10fc4]
00822fe3 : COMISS XMM1,XMM0
00822fe6 : JBE 0x008230b2
00822fec : CMP byte ptr [EDI + 0x341],0x0
00822ff3 : JNZ 0x008230e6
00822ff9 : MOV EAX,[0x00da9894]
00822ffe : MOV EAX,dword ptr [EAX]
00823000 : CMP dword ptr [EAX + 0x148],0x0
00823007 : JZ 0x00823018
00823009 : MOV EAX,dword ptr [EAX + 0x148]
0082300f : MOV EDX,dword ptr [EAX]
00823011 : MOV ECX,EAX
00823013 : MOV EAX,dword ptr [EDX + 0x20]
00823016 : CALL EAX
00823018 : MOV ESI,dword ptr [0x00da98e8]
0082301e : PUSH 0x0
00823020 : PUSH 0xc33580
00823025 : CALL 0x008018d0
0082302a : MOV ECX,dword ptr [0x017247d4]
00823030 : ADD ESP,0x8
00823033 : CALL 0x00a0ce50
00823038 : MOV ESI,dword ptr [0x00da98e8]
0082303e : PUSH 0xc335bc
00823043 : CALL 0x008018d0
00823048 : ADD ESP,0x4
0082304b : CALL dword ptr [0x00b85598]
00823051 : PUSH EAX
00823052 : PUSH 0xc33bb0
00823057 : LEA ESI,[EBP + -0x2c]
0082305a : MOV dword ptr [EDI + 0x374],EAX
00823060 : CALL 0x00404750
00823065 : ADD ESP,0x8
00823068 : MOV dword ptr [EBP + -0x4],0x0
0082306f : CMP dword ptr [EAX + 0x18],0x8
00823073 : JC 0x0082307a
00823075 : MOV EAX,dword ptr [EAX + 0x4]
00823078 : JMP 0x0082307d
0082307a : ADD EAX,0x4
0082307d : MOV ESI,dword ptr [0x00da98e8]
00823083 : PUSH EAX
00823084 : CALL 0x008018d0
00823089 : ADD ESP,0x4
0082308c : MOV dword ptr [EBP + -0x4],0xffffffff
00823093 : LEA ECX,[EBP + -0x2c]
00823096 : CALL 0x00406560
0082309b : MOV byte ptr [EDI + 0x340],0x0
008230a2 : MOV ECX,dword ptr [EBP + -0xc]
008230a5 : MOV dword ptr FS:[0x0],ECX
008230ac : POP ECX
008230ad : POP ESI
008230ae : MOV ESP,EBP
008230b0 : POP EBP
008230b1 : RET
008230b2 : SUBSS XMM0,dword ptr [EDI + 0xb0]
008230ba : MOV ECX,dword ptr [0x00da9894]
008230c0 : MOVSS dword ptr [EDI + 0x33c],XMM0
008230c8 : MOV EDX,dword ptr [ECX]
008230ca : MOV EAX,dword ptr [EDX + 0x148]
008230d0 : MOVSS dword ptr [EBP + -0x10],XMM0
008230d5 : TEST EAX,EAX
008230d7 : JZ 0x008230e6
008230d9 : FLD float ptr [EBP + -0x10]
008230dc : PUSH ECX
008230dd : FSTP float ptr [ESP]
008230e0 : PUSH EAX
008230e1 : CALL 0x00acffc0
008230e6 : MOV ECX,dword ptr [EBP + -0xc]
008230e9 : MOV dword ptr FS:[0x0],ECX
008230f0 : POP ECX
008230f1 : POP ESI
008230f2 : MOV ESP,EBP
008230f4 : POP EBP
008230f5 : RET
