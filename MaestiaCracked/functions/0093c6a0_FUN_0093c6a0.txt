PROGRAM  : Maestia.exe
FUNCTION : FUN_0093c6a0
ENTRY    : 0093c6a0
BODY     : [[0093c6a0, 0093c82b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0093c6a0(int *param_1,uint param_2,uint param_3,undefined1 param_4)

{
  undefined2 uVar1;
  int *piVar2;
  int iVar3;
  undefined4 ****ppppuVar4;
  uint local_50;
  uint local_34;
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1f94f;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar2 = (int *)(**(code **)(*param_1 + 0x74))(param_2,param_3,local_14);
  if (piVar2 != (int *)0x0) {
    (**(code **)(*piVar2 + 0x3c))(param_4);
    FUN_00406460(L"amount");
    local_8 = 0;
    iVar3 = FUN_0081cce0(DAT_0172491c);
    local_8._0_1_ = 1;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      iVar3 = iVar3 + 4;
    }
    else {
      iVar3 = *(int *)(iVar3 + 4);
    }
    uVar1 = (**(code **)(*piVar2 + 0x40))();
    FUN_00404750(L"%s: %d",iVar3,uVar1);
    local_8 = CONCAT31(local_8._1_3_,3);
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (((*(char *)((int)param_1 + 0x32) != '\0') && (iVar3 = *DAT_00da9894, iVar3 != 0)) &&
       (*(int *)(iVar3 + 0x114) != 0)) {
      ppppuVar4 = (undefined4 ****)local_2c[0];
      if (local_18 < 8) {
        ppppuVar4 = local_2c;
      }
      (**(code **)(**(int **)(iVar3 + 0x114) + 4))
                (*(int **)(iVar3 + 0x114),"mc_privateshopcustomer.ShopSetItemAmount","%d,%d,%ls",
                 (param_2 & 0xffff) + (param_3 & 0xffff) * 2,param_4,ppppuVar4);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0093c6a0 : PUSH EBP
0093c6a1 : MOV EBP,ESP
0093c6a3 : PUSH -0x1
0093c6a5 : PUSH 0xb1f94f
0093c6aa : MOV EAX,FS:[0x0]
0093c6b0 : PUSH EAX
0093c6b1 : SUB ESP,0x58
0093c6b4 : MOV EAX,[0x00d66fa0]
0093c6b9 : XOR EAX,EBP
0093c6bb : MOV dword ptr [EBP + -0x10],EAX
0093c6be : PUSH EBX
0093c6bf : PUSH ESI
0093c6c0 : PUSH EDI
0093c6c1 : PUSH EAX
0093c6c2 : LEA EAX,[EBP + -0xc]
0093c6c5 : MOV FS:[0x0],EAX
0093c6cb : MOV EBX,dword ptr [EBP + 0x8]
0093c6ce : MOV ECX,dword ptr [EBP + 0x10]
0093c6d1 : MOV EAX,dword ptr [EBX]
0093c6d3 : MOV EDX,dword ptr [EBP + 0xc]
0093c6d6 : MOV EAX,dword ptr [EAX + 0x74]
0093c6d9 : PUSH ECX
0093c6da : PUSH EDX
0093c6db : MOV ECX,EBX
0093c6dd : CALL EAX
0093c6df : MOV EDI,EAX
0093c6e1 : TEST EDI,EDI
0093c6e3 : JZ 0x0093c80e
0093c6e9 : MOVZX AX,byte ptr [EBP + 0x14]
0093c6ee : MOV EDX,dword ptr [EDI]
0093c6f0 : MOV EDX,dword ptr [EDX + 0x3c]
0093c6f3 : MOVZX ECX,AX
0093c6f6 : PUSH ECX
0093c6f7 : MOV ECX,EDI
0093c6f9 : CALL EDX
0093c6fb : PUSH 0xc70664
0093c700 : LEA ECX,[EBP + -0x48]
0093c703 : CALL 0x00406460
0093c708 : MOV dword ptr [EBP + -0x4],0x0
0093c70f : MOV EAX,[0x0172491c]
0093c714 : PUSH EAX
0093c715 : LEA ECX,[EBP + -0x48]
0093c718 : LEA ESI,[EBP + -0x64]
0093c71b : CALL 0x0081cce0
0093c720 : MOV byte ptr [EBP + -0x4],0x1
0093c724 : CMP dword ptr [EAX + 0x18],0x8
0093c728 : JC 0x0093c72f
0093c72a : MOV ESI,dword ptr [EAX + 0x4]
0093c72d : JMP 0x0093c732
0093c72f : LEA ESI,[EAX + 0x4]
0093c732 : MOV EDX,dword ptr [EDI]
0093c734 : MOV EAX,dword ptr [EDX + 0x40]
0093c737 : MOV ECX,EDI
0093c739 : CALL EAX
0093c73b : MOVZX ECX,AX
0093c73e : PUSH ECX
0093c73f : PUSH ESI
0093c740 : PUSH 0xc70674
0093c745 : LEA ESI,[EBP + -0x2c]
0093c748 : CALL 0x00404750
0093c74d : ADD ESP,0xc
0093c750 : MOV byte ptr [EBP + -0x4],0x3
0093c754 : MOV EDI,0x8
0093c759 : CMP dword ptr [EBP + -0x4c],EDI
0093c75c : JC 0x0093c766
0093c75e : MOV ECX,dword ptr [EBP + -0x60]
0093c761 : CALL 0x006f04e0
0093c766 : XOR ESI,ESI
0093c768 : XOR EDX,EDX
0093c76a : MOV dword ptr [EBP + -0x4c],0x7
0093c771 : MOV dword ptr [EBP + -0x50],ESI
0093c774 : MOV word ptr [EBP + -0x60],DX
0093c778 : MOV byte ptr [EBP + -0x4],0x4
0093c77c : CMP dword ptr [EBP + -0x30],EDI
0093c77f : JC 0x0093c789
0093c781 : MOV ECX,dword ptr [EBP + -0x44]
0093c784 : CALL 0x006f04e0
0093c789 : XOR EAX,EAX
0093c78b : MOV dword ptr [EBP + -0x30],0x7
0093c792 : MOV dword ptr [EBP + -0x34],ESI
0093c795 : MOV word ptr [EBP + -0x44],AX
0093c799 : CMP byte ptr [EBX + 0x32],AL
0093c79c : JZ 0x0093c7ea
0093c79e : MOV ECX,dword ptr [0x00da9894]
0093c7a4 : MOV EAX,dword ptr [ECX]
0093c7a6 : CMP EAX,ESI
0093c7a8 : JZ 0x0093c7ea
0093c7aa : CMP dword ptr [EAX + 0x114],ESI
0093c7b0 : JZ 0x0093c7ea
0093c7b2 : MOV EAX,dword ptr [EAX + 0x114]
0093c7b8 : MOV ECX,dword ptr [EBP + -0x28]
0093c7bb : CMP dword ptr [EBP + -0x14],EDI
0093c7be : JNC 0x0093c7c3
0093c7c0 : LEA ECX,[EBP + -0x28]
0093c7c3 : MOVZX EBX,word ptr [EBP + 0xc]
0093c7c7 : MOV EDX,dword ptr [EAX]
0093c7c9 : MOV EDX,dword ptr [EDX + 0x4]
0093c7cc : PUSH ECX
0093c7cd : MOVZX ECX,byte ptr [EBP + 0x14]
0093c7d1 : PUSH ECX
0093c7d2 : MOVZX ECX,word ptr [EBP + 0x10]
0093c7d6 : LEA ECX,[EBX + ECX*0x2]
0093c7d9 : PUSH ECX
0093c7da : PUSH 0xc70684
0093c7df : PUSH 0xc70690
0093c7e4 : PUSH EAX
0093c7e5 : CALL EDX
0093c7e7 : ADD ESP,0x18
0093c7ea : MOV dword ptr [EBP + -0x4],0xffffffff
0093c7f1 : CMP dword ptr [EBP + -0x14],EDI
0093c7f4 : JC 0x0093c7fe
0093c7f6 : MOV ECX,dword ptr [EBP + -0x28]
0093c7f9 : CALL 0x006f04e0
0093c7fe : XOR EAX,EAX
0093c800 : MOV dword ptr [EBP + -0x14],0x7
0093c807 : MOV dword ptr [EBP + -0x18],ESI
0093c80a : MOV word ptr [EBP + -0x28],AX
0093c80e : MOV ECX,dword ptr [EBP + -0xc]
0093c811 : MOV dword ptr FS:[0x0],ECX
0093c818 : POP ECX
0093c819 : POP EDI
0093c81a : POP ESI
0093c81b : POP EBX
0093c81c : MOV ECX,dword ptr [EBP + -0x10]
0093c81f : XOR ECX,EBP
0093c821 : CALL 0x00633e6b
0093c826 : MOV ESP,EBP
0093c828 : POP EBP
0093c829 : RET 0x10
