PROGRAM  : Maestia.exe
FUNCTION : FUN_007987a0
ENTRY    : 007987a0
BODY     : [[007987a0, 007989f8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007987a0(void)

{
  float *pfVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  int *piVar8;
  int iVar9;
  int in_ECX;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  int iStack_18;
  int iStack_14;
  int iStack_10;
  int iStack_c;
  
  if (*(int *)(in_ECX + 0x428) != 0) {
    local_28 = *(undefined4 *)(in_ECX + 0x74);
    local_24 = *(undefined4 *)(in_ECX + 0x78);
    local_20 = *(undefined4 *)(in_ECX + 0x7c);
    local_1c = *(undefined4 *)(in_ECX + 0x80);
    if (*(char *)(in_ECX + 0x148) != '\0') {
      D3DXQuaternionMultiply(&local_28,&local_28,in_ECX + 0x14c);
    }
    piVar8 = *(int **)(in_ECX + 0x428);
    if ((*(char *)((int)piVar8 + 0x5d) != '\0') || (*(char *)((int)piVar8 + 0x13d) != '\0')) {
      (**(code **)(*piVar8 + 0x14))();
    }
    iStack_14 = piVar8[0x32];
    iStack_10 = piVar8[0x33];
    iStack_c = piVar8[0x34];
    iStack_18 = piVar8[0x31];
    piVar8 = *(int **)(in_ECX + 0x428);
    if (*(char *)((int)piVar8 + 0x5d) != '\0') {
      (**(code **)(*piVar8 + 0x14))();
    }
    fVar2 = (float)piVar8[0x2e];
    iVar9 = *(int *)(in_ECX + 0x428);
    fVar3 = (float)piVar8[0x2f];
    fVar4 = (float)piVar8[0x30];
    fVar5 = *(float *)(iVar9 + 0xd4);
    fVar6 = *(float *)(iVar9 + 0xd8);
    fVar7 = *(float *)(iVar9 + 0xdc);
    if (*(char *)(in_ECX + 0x65) == '\0') {
      *(ulonglong *)(in_ECX + 0xc4) = CONCAT44(local_24,local_28);
      *(ulonglong *)(in_ECX + 0xcc) = CONCAT44(local_1c,local_20);
    }
    else {
      D3DXQuaternionMultiply(in_ECX + 0xc4,&local_28,&iStack_18);
    }
    pfVar1 = (float *)(in_ECX + 0xb8);
    FUN_0043d620(pfVar1);
    *pfVar1 = fVar5 * *pfVar1;
    *(float *)(in_ECX + 0xbc) = fVar6 * *(float *)(in_ECX + 0xbc);
    *(float *)(in_ECX + 0xc0) = fVar7 * *(float *)(in_ECX + 0xc0);
    *pfVar1 = *pfVar1 + fVar2;
    *(float *)(in_ECX + 0xbc) = *(float *)(in_ECX + 0xbc) + fVar3;
    *(float *)(in_ECX + 0xc0) = *(float *)(in_ECX + 0xc0) + fVar4;
    *(undefined4 *)(in_ECX + 0xd4) = *(undefined4 *)(in_ECX + 0x84);
    *(undefined4 *)(in_ECX + 0xd8) = *(undefined4 *)(in_ECX + 0x88);
    *(undefined4 *)(in_ECX + 0xdc) = *(undefined4 *)(in_ECX + 0x8c);
    if (*(char *)(in_ECX + 100) != '\0') {
      *(float *)(in_ECX + 0xd4) = fVar5 * *(float *)(in_ECX + 0xd4);
      *(float *)(in_ECX + 0xd8) = *(float *)(in_ECX + 0xd8) * fVar6;
      *(float *)(in_ECX + 0xdc) = *(float *)(in_ECX + 0xdc) * fVar7;
    }
    *(undefined1 *)(in_ECX + 0x5d) = 0;
    *(undefined1 *)(in_ECX + 0x134) = 1;
    return;
  }
  FUN_007ccb00();
  return;
}



============================================================
DISASSEMBLY
============================================================
007987a0 : PUSH EBP
007987a1 : MOV EBP,ESP
007987a3 : AND ESP,0xfffffff8
007987a6 : SUB ESP,0x38
007987a9 : PUSH ESI
007987aa : MOV ESI,ECX
007987ac : CMP dword ptr [ESI + 0x428],0x0
007987b3 : PUSH EDI
007987b4 : JZ 0x007989ee
007987ba : CMP byte ptr [ESI + 0x148],0x0
007987c1 : MOVSS XMM0,dword ptr [ESI + 0x74]
007987c6 : MOVSS dword ptr [ESP + 0x20],XMM0
007987cc : MOVSS XMM0,dword ptr [ESI + 0x78]
007987d1 : MOVSS dword ptr [ESP + 0x24],XMM0
007987d7 : MOVSS XMM0,dword ptr [ESI + 0x7c]
007987dc : MOVSS dword ptr [ESP + 0x28],XMM0
007987e2 : MOVSS XMM0,dword ptr [ESI + 0x80]
007987ea : MOVSS dword ptr [ESP + 0x2c],XMM0
007987f0 : JZ 0x00798806
007987f2 : LEA EAX,[ESI + 0x14c]
007987f8 : PUSH EAX
007987f9 : LEA ECX,[ESP + 0x24]
007987fd : PUSH ECX
007987fe : MOV EDX,ECX
00798800 : PUSH EDX
00798801 : CALL 0x004ff716
00798806 : MOV EDI,dword ptr [ESI + 0x428]
0079880c : CMP byte ptr [EDI + 0x5d],0x0
00798810 : JNZ 0x0079881b
00798812 : CMP byte ptr [EDI + 0x13d],0x0
00798819 : JZ 0x00798824
0079881b : MOV EAX,dword ptr [EDI]
0079881d : MOV EDX,dword ptr [EAX + 0x14]
00798820 : MOV ECX,EDI
00798822 : CALL EDX
00798824 : MOVSS XMM0,dword ptr [EDI + 0xc8]
0079882c : MOVSS XMM1,dword ptr [EDI + 0xcc]
00798834 : MOVSS XMM2,dword ptr [EDI + 0xd0]
0079883c : MOVSS XMM3,dword ptr [EDI + 0xc4]
00798844 : MOV EDI,dword ptr [ESI + 0x428]
0079884a : MOVSS dword ptr [ESP + 0x30],XMM3
00798850 : MOVSS dword ptr [ESP + 0x34],XMM0
00798856 : MOVSS dword ptr [ESP + 0x38],XMM1
0079885c : MOVSS dword ptr [ESP + 0x3c],XMM2
00798862 : CMP byte ptr [EDI + 0x5d],0x0
00798866 : JZ 0x00798871
00798868 : MOV EAX,dword ptr [EDI]
0079886a : MOV EDX,dword ptr [EAX + 0x14]
0079886d : MOV ECX,EDI
0079886f : CALL EDX
00798871 : MOVSS XMM0,dword ptr [EDI + 0xb8]
00798879 : MOV EAX,dword ptr [ESI + 0x428]
0079887f : MOVSS dword ptr [ESP + 0x14],XMM0
00798885 : MOVSS XMM0,dword ptr [EDI + 0xbc]
0079888d : MOVSS dword ptr [ESP + 0x18],XMM0
00798893 : MOVSS XMM0,dword ptr [EDI + 0xc0]
0079889b : ADD EAX,0xd4
007988a0 : CMP byte ptr [ESI + 0x65],0x0
007988a4 : MOVSS dword ptr [ESP + 0x1c],XMM0
007988aa : MOVSS XMM0,dword ptr [EAX]
007988ae : MOVSS dword ptr [ESP + 0x8],XMM0
007988b4 : MOVSS XMM0,dword ptr [EAX + 0x4]
007988b9 : MOVSS dword ptr [ESP + 0xc],XMM0
007988bf : MOVSS XMM0,dword ptr [EAX + 0x8]
007988c4 : MOVSS dword ptr [ESP + 0x10],XMM0
007988ca : LEA ECX,[ESP + 0x20]
007988ce : JZ 0x007988e8
007988d0 : LEA EAX,[ESP + 0x30]
007988d4 : PUSH EAX
007988d5 : PUSH ECX
007988d6 : LEA EDX,[ESI + 0xc4]
007988dc : PUSH EDX
007988dd : CALL 0x004ff716
007988e2 : LEA ECX,[ESP + 0x30]
007988e6 : JMP 0x00798904
007988e8 : MOVQ XMM0,qword ptr [ESP + 0x20]
007988ee : MOVQ qword ptr [ESI + 0xc4],XMM0
007988f6 : MOVQ XMM0,qword ptr [ESP + 0x28]
007988fc : MOVQ qword ptr [ESI + 0xcc],XMM0
00798904 : LEA EDI,[ESI + 0xb8]
0079890a : PUSH EDI
0079890b : LEA EAX,[ESI + 0x68]
0079890e : CALL 0x0043d620
00798913 : MOVSS XMM0,dword ptr [ESP + 0xc]
00798919 : MOVAPS XMM1,XMM0
0079891c : MULSS XMM1,dword ptr [EDI]
00798920 : MOVSS dword ptr [EDI],XMM1
00798924 : MOVSS XMM1,dword ptr [ESP + 0x10]
0079892a : MOVAPS XMM2,XMM1
0079892d : MULSS XMM2,dword ptr [EDI + 0x4]
00798932 : MOVSS dword ptr [EDI + 0x4],XMM2
00798937 : MOVSS XMM2,dword ptr [ESP + 0x14]
0079893d : MOVAPS XMM3,XMM2
00798940 : MULSS XMM3,dword ptr [EDI + 0x8]
00798945 : MOVSS dword ptr [EDI + 0x8],XMM3
0079894a : MOVSS XMM3,dword ptr [EDI]
0079894e : ADDSS XMM3,dword ptr [ESP + 0x18]
00798954 : MOVSS dword ptr [EDI],XMM3
00798958 : MOVSS XMM3,dword ptr [EDI + 0x4]
0079895d : ADDSS XMM3,dword ptr [ESP + 0x1c]
00798963 : MOVSS dword ptr [EDI + 0x4],XMM3
00798968 : MOVSS XMM3,dword ptr [EDI + 0x8]
0079896d : ADDSS XMM3,dword ptr [ESP + 0x20]
00798973 : MOVSS dword ptr [EDI + 0x8],XMM3
00798978 : FLD float ptr [ESI + 0x84]
0079897e : FSTP float ptr [ESI + 0xd4]
00798984 : ADD ESP,0x4
00798987 : FLD float ptr [ESI + 0x88]
0079898d : FSTP float ptr [ESI + 0xd8]
00798993 : FLD float ptr [ESI + 0x8c]
00798999 : FSTP float ptr [ESI + 0xdc]
0079899f : CMP byte ptr [ESI + 0x64],0x0
007989a3 : JZ 0x007989dd
007989a5 : MULSS XMM0,dword ptr [ESI + 0xd4]
007989ad : MOVSS dword ptr [ESI + 0xd4],XMM0
007989b5 : MOVSS XMM0,dword ptr [ESI + 0xd8]
007989bd : MULSS XMM0,XMM1
007989c1 : MOVSS dword ptr [ESI + 0xd8],XMM0
007989c9 : MOVSS XMM0,dword ptr [ESI + 0xdc]
007989d1 : MULSS XMM0,XMM2
007989d5 : MOVSS dword ptr [ESI + 0xdc],XMM0
007989dd : MOV byte ptr [ESI + 0x5d],0x0
007989e1 : MOV byte ptr [ESI + 0x134],0x1
007989e8 : POP EDI
007989e9 : POP ESI
007989ea : MOV ESP,EBP
007989ec : POP EBP
007989ed : RET
007989ee : CALL 0x007ccb00
007989f3 : POP EDI
007989f4 : POP ESI
007989f5 : MOV ESP,EBP
007989f7 : POP EBP
007989f8 : RET
