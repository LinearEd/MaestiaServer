PROGRAM  : Maestia.exe
FUNCTION : FUN_0056b400
ENTRY    : 0056b400
BODY     : [[0056b400, 0056b528]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056b400(uint param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  int iVar2;
  LONG LVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int in_ECX;
  uint unaff_ESI;
  uint uVar6;
  uint uVar7;
  uint unaff_EDI;
  uint local_c [3];
  
  uVar7 = param_1;
  iVar1 = param_1 + 0xc;
  iVar2 = FUN_0051b1a0();
  if (iVar2 != 0) {
    local_c[0] = 5;
    FUN_0051c600(iVar1);
    FUN_0051c600(param_3);
    FUN_0051b6e0();
    iVar1 = param_2;
    FUN_005a03c0(&param_1,local_c);
    FUN_0051c480((param_1 & 0xfffffffc) + 8);
    (**(code **)(**(int **)(uVar7 + 0x4c) + 4))(&param_3,*(undefined4 *)(*(int *)(iVar1 + 8) + 8));
    uVar6 = param_1 & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar6 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar6);
    }
    uVar4 = (**(code **)(**(int **)(in_ECX + 0x68) + 0x5c))();
    iVar1 = **(int **)(uVar7 + 0x4c);
    uVar5 = FUN_00526fa0(uVar4);
    (**(code **)(iVar1 + 8))(uVar4,uVar5);
    uVar7 = local_c[0] & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar7 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar7);
    }
    LVar3 = InterlockedExchangeAdd((LONG *)((unaff_ESI & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(unaff_ESI & 0xfffffffc);
    }
    LVar3 = InterlockedExchangeAdd((LONG *)((unaff_EDI & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(unaff_EDI & 0xfffffffc);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0056b400 : SUB ESP,0xc
0056b403 : PUSH EBX
0056b404 : PUSH ESI
0056b405 : PUSH EDI
0056b406 : MOV EDI,dword ptr [ESP + 0x1c]
0056b40a : MOV EBX,ECX
0056b40c : LEA ESI,[EDI + 0xc]
0056b40f : MOV ECX,ESI
0056b411 : CALL 0x0051b1a0
0056b416 : TEST EAX,EAX
0056b418 : JZ 0x0056b520
0056b41e : PUSH ESI
0056b41f : LEA ECX,[ESP + 0x14]
0056b423 : MOV dword ptr [ESP + 0x10],0x5
0056b42b : CALL 0x0051c600
0056b430 : MOV EAX,dword ptr [ESP + 0x24]
0056b434 : PUSH EAX
0056b435 : LEA ECX,[ESP + 0x18]
0056b439 : CALL 0x0051c600
0056b43e : LEA ECX,[ESP + 0x1c]
0056b442 : CALL 0x0051b6e0
0056b447 : MOV ESI,dword ptr [ESP + 0x20]
0056b44b : LEA ECX,[ESP + 0xc]
0056b44f : PUSH ECX
0056b450 : LEA EDX,[ESP + 0x20]
0056b454 : PUSH EDX
0056b455 : MOV ECX,ESI
0056b457 : CALL 0x005a03c0
0056b45c : MOV EAX,dword ptr [ESP + 0x1c]
0056b460 : AND EAX,0xfffffffc
0056b463 : ADD EAX,0x8
0056b466 : PUSH EAX
0056b467 : LEA ECX,[ESP + 0x28]
0056b46b : CALL 0x0051c480
0056b470 : MOV EAX,dword ptr [ESI + 0x8]
0056b473 : MOV EAX,dword ptr [EAX + 0x8]
0056b476 : MOV ECX,dword ptr [EDI + 0x4c]
0056b479 : MOV EDX,dword ptr [ECX]
0056b47b : MOV EDX,dword ptr [EDX + 0x4]
0056b47e : PUSH EAX
0056b47f : LEA EAX,[ESP + 0x28]
0056b483 : PUSH EAX
0056b484 : CALL EDX
0056b486 : MOV ESI,dword ptr [ESP + 0x24]
0056b48a : AND ESI,0xfffffffc
0056b48d : PUSH -0x1
0056b48f : LEA EAX,[ESI + 0x4]
0056b492 : PUSH EAX
0056b493 : CALL dword ptr [0x00b851cc]
0056b499 : SUB EAX,0x1
0056b49c : JNZ 0x0056b4a4
0056b49e : PUSH ESI
0056b49f : CALL 0x00515cf0
0056b4a4 : MOV ECX,dword ptr [EBX + 0x68]
0056b4a7 : MOV EDX,dword ptr [ECX]
0056b4a9 : MOV EAX,dword ptr [EDX + 0x5c]
0056b4ac : PUSH EBP
0056b4ad : CALL EAX
0056b4af : MOV EBP,dword ptr [EDI + 0x4c]
0056b4b2 : MOV ESI,dword ptr [EBP]
0056b4b5 : MOV EBX,EAX
0056b4b7 : PUSH EBX
0056b4b8 : LEA ECX,[EDI + 0x3c]
0056b4bb : ADD ESI,0x8
0056b4be : CALL 0x00526fa0
0056b4c3 : MOV EDX,dword ptr [ESI]
0056b4c5 : PUSH EAX
0056b4c6 : PUSH EBX
0056b4c7 : MOV ECX,EBP
0056b4c9 : CALL EDX
0056b4cb : MOV ESI,dword ptr [ESP + 0x20]
0056b4cf : MOV EDI,dword ptr [0x00b851cc]
0056b4d5 : AND ESI,0xfffffffc
0056b4d8 : PUSH -0x1
0056b4da : LEA EAX,[ESI + 0x4]
0056b4dd : PUSH EAX
0056b4de : CALL EDI
0056b4e0 : SUB EAX,0x1
0056b4e3 : POP EBP
0056b4e4 : JNZ 0x0056b4ec
0056b4e6 : PUSH ESI
0056b4e7 : CALL 0x00515cf0
0056b4ec : MOV ESI,dword ptr [ESP + 0x14]
0056b4f0 : AND ESI,0xfffffffc
0056b4f3 : PUSH -0x1
0056b4f5 : LEA ECX,[ESI + 0x4]
0056b4f8 : PUSH ECX
0056b4f9 : CALL EDI
0056b4fb : SUB EAX,0x1
0056b4fe : JNZ 0x0056b506
0056b500 : PUSH ESI
0056b501 : CALL 0x00515cf0
0056b506 : MOV ESI,dword ptr [ESP + 0x10]
0056b50a : AND ESI,0xfffffffc
0056b50d : PUSH -0x1
0056b50f : LEA EDX,[ESI + 0x4]
0056b512 : PUSH EDX
0056b513 : CALL EDI
0056b515 : SUB EAX,0x1
0056b518 : JNZ 0x0056b520
0056b51a : PUSH ESI
0056b51b : CALL 0x00515cf0
0056b520 : POP EDI
0056b521 : POP ESI
0056b522 : POP EBX
0056b523 : ADD ESP,0xc
0056b526 : RET 0xc
