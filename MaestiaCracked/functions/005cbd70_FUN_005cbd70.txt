PROGRAM  : Maestia.exe
FUNCTION : FUN_005cbd70
ENTRY    : 005cbd70
BODY     : [[005cbd70, 005cbe98]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005cbd70(undefined4 *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005cb6c0);
    *puVar3 = &PTR_LAB_00b925b0;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x70,0);
  if (iVar4 == 0) {
    uVar6 = 0;
  }
  else {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005cb8e0(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (undefined4 *)0x10;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *(int *)(*(int *)(iVar2 + 0x28c) + 0x10);
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x48,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005cbd70 : SUB ESP,0x18
005cbd73 : PUSH EBP
005cbd74 : PUSH ESI
005cbd75 : MOV ESI,dword ptr [ESP + 0x28]
005cbd79 : MOV ECX,dword ptr [ESI + 0x288]
005cbd7f : PUSH EDI
005cbd80 : PUSH 0x0
005cbd82 : PUSH 0x34
005cbd84 : MOV dword ptr [ESP + 0x14],ESI
005cbd88 : MOV byte ptr [ESP + 0x18],0x8
005cbd8d : CALL 0x00515840
005cbd92 : MOV EDI,EAX
005cbd94 : TEST EDI,EDI
005cbd96 : JZ 0x005cbdba
005cbd98 : PUSH 0x5cb6c0
005cbd9d : LEA EAX,[ESP + 0x10]
005cbda1 : PUSH EAX
005cbda2 : MOV ECX,EDI
005cbda4 : CALL 0x00568960
005cbda9 : MOV dword ptr [EDI],0xb925b0
005cbdaf : MOV dword ptr [EDI + 0x10],0xb90510
005cbdb6 : MOV EAX,EDI
005cbdb8 : JMP 0x005cbdbc
005cbdba : XOR EAX,EAX
005cbdbc : MOV EDI,dword ptr [ESP + 0x28]
005cbdc0 : PUSH 0x0
005cbdc2 : MOV byte ptr [EDI + 0x8],0x0
005cbdc6 : MOV dword ptr [EDI],EAX
005cbdc8 : MOV dword ptr [EDI + 0x4],0x0
005cbdcf : MOV ECX,dword ptr [ESI + 0x288]
005cbdd5 : PUSH 0x70
005cbdd7 : CALL 0x00515840
005cbddc : MOV EBP,EAX
005cbdde : TEST EBP,EBP
005cbde0 : JZ 0x005cbe92
005cbde6 : PUSH EDI
005cbde7 : PUSH 0x1
005cbde9 : MOV ECX,ESI
005cbdeb : CALL 0x00530910
005cbdf0 : PUSH EAX
005cbdf1 : LEA ECX,[ESP + 0x14]
005cbdf5 : PUSH ECX
005cbdf6 : MOV ECX,EBP
005cbdf8 : CALL 0x005cb8e0
005cbdfd : MOV EBP,EAX
005cbdff : TEST EBP,EBP
005cbe01 : JZ 0x005cbe10
005cbe03 : MOV EDX,dword ptr [EBP + 0x8]
005cbe06 : INC EDX
005cbe07 : AND EDX,0x8fffffff
005cbe0d : MOV dword ptr [EBP + 0x8],EDX
005cbe10 : LEA EAX,[ESP + 0x2c]
005cbe14 : PUSH EAX
005cbe15 : LEA ECX,[ESP + 0x2c]
005cbe19 : PUSH ECX
005cbe1a : LEA ECX,[ESI + 0x278]
005cbe20 : MOV dword ptr [ESP + 0x34],EBP
005cbe24 : MOV dword ptr [ESP + 0x30],0x10
005cbe2c : CALL 0x0050ff10
005cbe31 : MOV ECX,dword ptr [ESP + 0x2c]
005cbe35 : TEST ECX,ECX
005cbe37 : JZ 0x005cbe3e
005cbe39 : CALL 0x00503db0
005cbe3e : MOV EDX,dword ptr [ESI + 0x28c]
005cbe44 : PUSH EBX
005cbe45 : LEA EAX,[ESP + 0x30]
005cbe49 : PUSH EAX
005cbe4a : MOV byte ptr [ESP + 0x34],0x0
005cbe4f : MOV EBX,dword ptr [EDX + 0x10]
005cbe52 : PUSH EDI
005cbe53 : LEA ECX,[ESP + 0x20]
005cbe57 : CALL 0x00526210
005cbe5c : PUSH EAX
005cbe5d : MOV EAX,dword ptr [EBX + 0x28]
005cbe60 : LEA ECX,[ESI + 0x48]
005cbe63 : PUSH ECX
005cbe64 : MOV ECX,dword ptr [ESI + 0x28c]
005cbe6a : LEA EDX,[ESP + 0x1c]
005cbe6e : PUSH EDX
005cbe6f : ADD ECX,0x10
005cbe72 : CALL EAX
005cbe74 : LEA ECX,[ESP + 0x18]
005cbe78 : CALL 0x00526bc0
005cbe7d : POP EBX
005cbe7e : TEST EBP,EBP
005cbe80 : JZ 0x005cbe89
005cbe82 : MOV ECX,EBP
005cbe84 : CALL 0x00503db0
005cbe89 : MOV EAX,EDI
005cbe8b : POP EDI
005cbe8c : POP ESI
005cbe8d : POP EBP
005cbe8e : ADD ESP,0x18
005cbe91 : RET
005cbe92 : XOR EBP,EBP
005cbe94 : JMP 0x005cbe10
