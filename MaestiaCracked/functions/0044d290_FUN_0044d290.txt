PROGRAM  : Maestia.exe
FUNCTION : FUN_0044d290
ENTRY    : 0044d290
BODY     : [[0044d290, 0044d3d8] [0044d3dc, 0044d3ea]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0044d290(void)

{
  void *pvVar1;
  rsize_t _DstSize;
  uint uVar2;
  undefined4 *_Dst;
  int iVar3;
  int iVar4;
  uint uVar5;
  int unaff_ESI;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint local_8;
  
  uVar2 = *(uint *)(unaff_ESI + 0x14);
  local_8 = 1;
  if (uVar2 == 0x4ec4ec4) {
    uVar2 = FUN_00476830();
  }
  uVar5 = uVar2 >> 1;
  if (uVar5 < 8) {
    uVar5 = 8;
  }
  else if (uVar5 < 2) goto LAB_0044d2d8;
  if (uVar2 <= 0x4ec4ec4 - uVar5) {
    local_8 = uVar5;
  }
LAB_0044d2d8:
  uVar2 = *(uint *)(unaff_ESI + 0x18);
  _Dst = (undefined4 *)FUN_004c1790();
  iVar4 = uVar2 * 4;
  pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + iVar4);
  iVar3 = (*(int *)(unaff_ESI + 0x14) * 4 - (int)pvVar1) + *(int *)(unaff_ESI + 0x10) >> 2;
  puVar7 = _Dst + uVar2 + iVar3;
  if (iVar3 != 0) {
    _memmove_s(_Dst + uVar2,iVar3 * 4,pvVar1,iVar3 * 4);
  }
  if (local_8 < uVar2) {
    iVar3 = (int)(local_8 * 4) >> 2;
    if (iVar3 != 0) {
      _DstSize = iVar3 * 4;
      _memmove_s(puVar7,_DstSize,*(void **)(unaff_ESI + 0x10),_DstSize);
    }
    pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + local_8 * 4);
    iVar4 = (*(int *)(unaff_ESI + 0x10) - (int)pvVar1) + iVar4 >> 2;
    puVar7 = _Dst + iVar4;
    uVar2 = local_8;
    if (iVar4 != 0) {
      _memmove_s(_Dst,iVar4 * 4,pvVar1,iVar4 * 4);
    }
  }
  else {
    iVar4 = iVar4 >> 2;
    puVar6 = puVar7 + iVar4;
    if (iVar4 != 0) {
      _memmove_s(puVar7,iVar4 * 4,*(void **)(unaff_ESI + 0x10),iVar4 * 4);
    }
    iVar4 = local_8 - uVar2;
    puVar7 = _Dst;
    if (iVar4 != 0) {
      for (; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = 0;
        puVar6 = puVar6 + 1;
      }
    }
  }
  if (uVar2 != 0) {
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar7 = 0;
      puVar7 = puVar7 + 1;
    }
  }
  if (*(int *)(unaff_ESI + 0x10) == 0) {
    *(int *)(unaff_ESI + 0x14) = *(int *)(unaff_ESI + 0x14) + local_8;
    *(undefined4 **)(unaff_ESI + 0x10) = _Dst;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0044d290 : PUSH EBP
0044d291 : MOV EBP,ESP
0044d293 : SUB ESP,0x10
0044d296 : MOV EAX,dword ptr [ESI + 0x14]
0044d299 : MOV ECX,0x4ec4ec4
0044d29e : MOV EDX,0x1
0044d2a3 : SUB ECX,EAX
0044d2a5 : PUSH EBX
0044d2a6 : PUSH EDI
0044d2a7 : MOV dword ptr [EBP + -0x4],EDX
0044d2aa : CMP ECX,EDX
0044d2ac : JNC 0x0044d2b3
0044d2ae : CALL 0x00476830
0044d2b3 : MOV ECX,EAX
0044d2b5 : SHR ECX,0x1
0044d2b7 : CMP ECX,0x8
0044d2ba : JNC 0x0044d2c3
0044d2bc : MOV ECX,0x8
0044d2c1 : JMP 0x0044d2c8
0044d2c3 : CMP ECX,0x1
0044d2c6 : JBE 0x0044d2d8
0044d2c8 : MOV EDI,0x4ec4ec4
0044d2cd : SUB EDI,ECX
0044d2cf : CMP EAX,EDI
0044d2d1 : JA 0x0044d2d8
0044d2d3 : MOV EDX,ECX
0044d2d5 : MOV dword ptr [EBP + -0x4],ECX
0044d2d8 : MOV EDI,dword ptr [ESI + 0x18]
0044d2db : LEA ECX,[EAX + EDX*0x1]
0044d2de : MOV dword ptr [EBP + -0xc],EDI
0044d2e1 : CALL 0x004c1790
0044d2e6 : MOV ECX,dword ptr [ESI + 0x10]
0044d2e9 : MOV dword ptr [EBP + -0x8],EAX
0044d2ec : ADD EDI,EDI
0044d2ee : ADD EDI,EDI
0044d2f0 : LEA EDX,[EDI + EAX*0x1]
0044d2f3 : MOV EAX,dword ptr [ESI + 0x14]
0044d2f6 : ADD EAX,EAX
0044d2f8 : LEA EBX,[ECX + EDI*0x1]
0044d2fb : ADD EAX,EAX
0044d2fd : SUB EAX,EBX
0044d2ff : ADD EAX,ECX
0044d301 : SAR EAX,0x2
0044d304 : LEA ECX,[EAX*0x4 + 0x0]
0044d30b : MOV dword ptr [EBP + -0x10],EBX
0044d30e : LEA EBX,[ECX + EDX*0x1]
0044d311 : TEST EAX,EAX
0044d313 : JBE 0x0044d324
0044d315 : MOV EAX,dword ptr [EBP + -0x10]
0044d318 : PUSH ECX
0044d319 : PUSH EAX
0044d31a : PUSH ECX
0044d31b : PUSH EDX
0044d31c : CALL 0x00634101
0044d321 : ADD ESP,0x10
0044d324 : MOV EDX,dword ptr [EBP + -0x4]
0044d327 : MOV ECX,dword ptr [ESI + 0x10]
0044d32a : CMP dword ptr [EBP + -0xc],EDX
0044d32d : JA 0x0044d373
0044d32f : MOV EAX,ECX
0044d331 : SUB EAX,ECX
0044d333 : ADD EAX,EDI
0044d335 : SAR EAX,0x2
0044d338 : LEA EDI,[EAX*0x4 + 0x0]
0044d33f : LEA EDX,[EDI + EBX*0x1]
0044d342 : MOV dword ptr [EBP + -0x10],EDX
0044d345 : TEST EAX,EAX
0044d347 : JBE 0x0044d355
0044d349 : PUSH EDI
0044d34a : PUSH ECX
0044d34b : PUSH EDI
0044d34c : PUSH EBX
0044d34d : CALL 0x00634101
0044d352 : ADD ESP,0x10
0044d355 : MOV EDX,dword ptr [EBP + -0x4]
0044d358 : MOV EBX,dword ptr [EBP + -0xc]
0044d35b : MOV ECX,EDX
0044d35d : SUB ECX,EBX
0044d35f : JZ 0x0044d368
0044d361 : MOV EDI,dword ptr [EBP + -0x10]
0044d364 : XOR EAX,EAX
0044d366 : STOSD.REP ES:EDI
0044d368 : TEST EBX,EBX
0044d36a : JBE 0x0044d3cd
0044d36c : MOV EDI,dword ptr [EBP + -0x8]
0044d36f : MOV ECX,EBX
0044d371 : JMP 0x0044d3c9
0044d373 : LEA EAX,[EDX*0x4 + 0x0]
0044d37a : SAR EAX,0x2
0044d37d : TEST EAX,EAX
0044d37f : JBE 0x0044d394
0044d381 : ADD EAX,EAX
0044d383 : ADD EAX,EAX
0044d385 : PUSH EAX
0044d386 : PUSH ECX
0044d387 : PUSH EAX
0044d388 : PUSH EBX
0044d389 : CALL 0x00634101
0044d38e : MOV EDX,dword ptr [EBP + -0x4]
0044d391 : ADD ESP,0x10
0044d394 : MOV EAX,dword ptr [ESI + 0x10]
0044d397 : LEA EBX,[EAX + EDX*0x4]
0044d39a : SUB EAX,EBX
0044d39c : ADD EAX,EDI
0044d39e : MOV EDI,dword ptr [EBP + -0x8]
0044d3a1 : SAR EAX,0x2
0044d3a4 : LEA ECX,[EAX*0x4 + 0x0]
0044d3ab : ADD EDI,ECX
0044d3ad : TEST EAX,EAX
0044d3af : JBE 0x0044d3c3
0044d3b1 : MOV EAX,dword ptr [EBP + -0x8]
0044d3b4 : PUSH ECX
0044d3b5 : PUSH EBX
0044d3b6 : PUSH ECX
0044d3b7 : PUSH EAX
0044d3b8 : CALL 0x00634101
0044d3bd : MOV EDX,dword ptr [EBP + -0x4]
0044d3c0 : ADD ESP,0x10
0044d3c3 : TEST EDX,EDX
0044d3c5 : JBE 0x0044d3cd
0044d3c7 : MOV ECX,EDX
0044d3c9 : XOR EAX,EAX
0044d3cb : STOSD.REP ES:EDI
0044d3cd : MOV ECX,dword ptr [ESI + 0x10]
0044d3d0 : TEST ECX,ECX
0044d3d2 : JZ 0x0044d3dc
0044d3d4 : CALL 0x006f04e0
0044d3dc : MOV ECX,dword ptr [EBP + -0x8]
0044d3df : ADD dword ptr [ESI + 0x14],EDX
0044d3e2 : POP EDI
0044d3e3 : MOV dword ptr [ESI + 0x10],ECX
0044d3e6 : POP EBX
0044d3e7 : MOV ESP,EBP
0044d3e9 : POP EBP
0044d3ea : RET
