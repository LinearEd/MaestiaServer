PROGRAM  : Maestia.exe
FUNCTION : FUN_00696d40
ENTRY    : 00696d40
BODY     : [[00696d40, 00696e52]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00696d40(int *param_1,int param_2,int param_3,undefined2 param_4,int param_5)

{
  byte *in_EAX;
  uint uVar1;
  int unaff_EBX;
  uint uVar2;
  int iVar3;
  
  if ((((param_2 < 0) || (uVar1 = (uint)in_EAX[1], param_1[1] < (int)(uVar1 + param_2))) ||
      (param_3 < 0)) || (uVar2 = (uint)*in_EAX, *param_1 < (int)(uVar2 + param_3))) {
    iVar3 = 6;
  }
  else {
    param_2 = 0;
    switch(param_4) {
    case 1:
    case 6:
      if (unaff_EBX == 1) {
        iVar3 = ((int)(uVar1 + 7) >> 3) * uVar2;
        param_2 = 1;
      }
      else if (unaff_EBX == 2) {
        iVar3 = ((int)(uVar1 + 3) >> 2) * uVar2;
        param_2 = 1;
      }
      else if (unaff_EBX == 4) {
        iVar3 = ((int)(uVar1 + 1) >> 1) * uVar2;
        param_2 = 1;
      }
      else {
        iVar3 = uVar1 * uVar2;
        param_2 = 1;
      }
      break;
    case 2:
    case 5:
    case 7:
      iVar3 = (int)(uVar1 * unaff_EBX * uVar2 + 7) >> 3;
      break;
    default:
      return 3;
    }
    iVar3 = FUN_00688900(param_5,iVar3);
    if (iVar3 == 0) {
      FUN_006960e0(*(undefined4 *)(param_5 + 0x20),uVar1 * unaff_EBX,param_2,param_3);
      FUN_006889b0(param_5);
      return 0;
    }
  }
  return iVar3;
}



============================================================
DISASSEMBLY
============================================================
00696d40 : PUSH EBP
00696d41 : MOV EBP,dword ptr [ESP + 0xc]
00696d45 : PUSH ESI
00696d46 : PUSH EDI
00696d47 : TEST EBP,EBP
00696d49 : JL 0x00696e48
00696d4f : MOVZX ECX,byte ptr [EAX + 0x1]
00696d53 : MOV EDX,dword ptr [ESP + 0x10]
00696d57 : LEA ESI,[ECX + EBP*0x1]
00696d5a : CMP ESI,dword ptr [EDX + 0x4]
00696d5d : JG 0x00696e48
00696d63 : MOV ESI,dword ptr [ESP + 0x18]
00696d67 : TEST ESI,ESI
00696d69 : JL 0x00696e48
00696d6f : MOVZX EDI,byte ptr [EAX]
00696d72 : LEA EAX,[EDI + ESI*0x1]
00696d75 : CMP EAX,dword ptr [EDX]
00696d77 : JG 0x00696e48
00696d7d : MOVZX EDX,word ptr [ESP + 0x1c]
00696d82 : MOV EAX,ECX
00696d84 : IMUL EAX,EBX
00696d87 : DEC EDX
00696d88 : MOV ESI,EAX
00696d8a : MOV byte ptr [ESP + 0x14],0x0
00696d8f : CMP EDX,0x6
00696d92 : JA 0x00696e3f
00696d98 : MOVZX EDX,byte ptr [EDX + 0x696e60]
00696d9f : JMP dword ptr [EDX*0x4 + 0x696e54]
00696da6 : MOV EAX,EBX
00696da8 : SUB EAX,0x1
00696dab : JZ 0x00696de2
00696dad : SUB EAX,0x1
00696db0 : JZ 0x00696dd2
00696db2 : SUB EAX,0x2
00696db5 : JZ 0x00696dc3
00696db7 : MOV EAX,ECX
00696db9 : IMUL EAX,EDI
00696dbc : MOV byte ptr [ESP + 0x14],0x1
00696dc1 : JMP 0x00696dfb
00696dc3 : LEA EAX,[ECX + 0x1]
00696dc6 : SAR EAX,0x1
00696dc8 : IMUL EAX,EDI
00696dcb : MOV byte ptr [ESP + 0x14],0x1
00696dd0 : JMP 0x00696dfb
00696dd2 : LEA EAX,[ECX + 0x3]
00696dd5 : SAR EAX,0x2
00696dd8 : IMUL EAX,EDI
00696ddb : MOV byte ptr [ESP + 0x14],0x1
00696de0 : JMP 0x00696dfb
00696de2 : LEA EAX,[ECX + 0x7]
00696de5 : SAR EAX,0x3
00696de8 : IMUL EAX,EDI
00696deb : MOV byte ptr [ESP + 0x14],0x1
00696df0 : JMP 0x00696dfb
00696df2 : IMUL EAX,EDI
00696df5 : ADD EAX,0x7
00696df8 : SAR EAX,0x3
00696dfb : PUSH EAX
00696dfc : MOV EAX,dword ptr [ESP + 0x24]
00696e00 : PUSH EAX
00696e01 : CALL 0x00688900
00696e06 : MOV EDI,EAX
00696e08 : ADD ESP,0x8
00696e0b : TEST EDI,EDI
00696e0d : JNZ 0x00696e4d
00696e0f : MOV ECX,dword ptr [ESP + 0x18]
00696e13 : MOV EDX,dword ptr [ESP + 0x14]
00696e17 : PUSH ECX
00696e18 : MOV ECX,EBP
00696e1a : PUSH EDX
00696e1b : IMUL ECX,EBX
00696e1e : PUSH ESI
00696e1f : MOV ESI,dword ptr [ESP + 0x2c]
00696e23 : MOV EAX,dword ptr [ESI + 0x20]
00696e26 : PUSH EAX
00696e27 : MOV EAX,dword ptr [ESP + 0x20]
00696e2b : CALL 0x006960e0
00696e30 : PUSH ESI
00696e31 : CALL 0x006889b0
00696e36 : ADD ESP,0x14
00696e39 : MOV EAX,EDI
00696e3b : POP EDI
00696e3c : POP ESI
00696e3d : POP EBP
00696e3e : RET
00696e3f : POP EDI
00696e40 : POP ESI
00696e41 : MOV EAX,0x3
00696e46 : POP EBP
00696e47 : RET
00696e48 : MOV EDI,0x6
00696e4d : MOV EAX,EDI
00696e4f : POP EDI
00696e50 : POP ESI
00696e51 : POP EBP
00696e52 : RET
