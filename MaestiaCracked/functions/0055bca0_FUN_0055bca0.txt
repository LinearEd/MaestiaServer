PROGRAM  : Maestia.exe
FUNCTION : FUN_0055bca0
ENTRY    : 0055bca0
BODY     : [[0055bca0, 0055be9a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055bca0(int param_1)

{
  int iVar1;
  int *in_ECX;
  int iVar2;
  undefined4 unaff_retaddr;
  int iStack_78;
  int iStack_64;
  int local_60;
  int iStack_5c;
  int iStack_58;
  GMatrix2D aGStack_54 [20];
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 uStack_14;
  undefined4 uStack_10;
  undefined1 uStack_c;
  undefined1 uStack_b;
  
  (**(code **)(**(int **)(param_1 + 0xc) + 0x14))(&local_60);
  iVar1 = (iStack_5c - iStack_64) * 0x14;
  iStack_78 = in_ECX[0x15];
  FUN_00558170(in_ECX + 0x14,1);
  if (iStack_78 == 0) {
    iVar2 = in_ECX[0x14];
    iStack_78 = 1;
    do {
      if (iVar2 != 0) {
        FUN_005d5200();
      }
      iVar2 = iVar2 + 0x28;
      iStack_78 = iStack_78 + -1;
    } while (iStack_78 != 0);
  }
  GMatrix2D::SetIdentity(aGStack_54);
  FUN_005d52d0(((char)param_1 == '\0') * '\x02' + 'A',unaff_retaddr,aGStack_54);
  *(byte *)(in_ECX + 9) = *(byte *)(in_ECX + 9) | 1;
  in_ECX[1] = 0;
  in_ECX[2] = 0;
  in_ECX[3] = (int)(float)iVar1;
  in_ECX[4] = (int)(float)((iStack_58 - local_60) * 0x14);
  (**(code **)(*in_ECX + 8))(in_ECX + 1);
  *(byte *)(in_ECX + 9) = *(byte *)(in_ECX + 9) | 0x10;
  in_ECX[0x1a] = 0;
  if (in_ECX[0x11] == 0) {
    *(undefined2 *)((int)in_ECX + 0x4e) = 0x20;
  }
  *(byte *)(in_ECX + 9) = *(byte *)(in_ECX + 9) | 4;
  uStack_24 = 0;
  uStack_20 = 0;
  uStack_1c = 0;
  uStack_28 = 0;
  uStack_2c = 0;
  uStack_30 = 0;
  uStack_34 = 0;
  uStack_18 = 0;
  uStack_14 = 0;
  uStack_10 = 0;
  uStack_c = 0;
  uStack_b = 0;
  uStack_40 = 0;
  uStack_3c = 1;
  uStack_38 = 0;
  FUN_00555690(0,0,0);
  FUN_00559850(iStack_78,0,0);
  FUN_00559850(0,iVar1,0);
  FUN_00559850((iStack_5c - iStack_64) * -0x14,0,0);
  FUN_00559850(0,(iStack_58 - local_60) * -0x14,0);
  FUN_005551b0(in_ECX + 0x11,in_ECX + 0xd);
  FUN_00515cf0(uStack_24);
  return;
}



============================================================
DISASSEMBLY
============================================================
0055bca0 : SUB ESP,0x78
0055bca3 : MOV EAX,dword ptr [ESP + 0x7c]
0055bca7 : PUSH EBX
0055bca8 : PUSH EBP
0055bca9 : PUSH ESI
0055bcaa : MOV ESI,ECX
0055bcac : MOV ECX,dword ptr [EAX + 0xc]
0055bcaf : MOV EDX,dword ptr [ECX]
0055bcb1 : MOV EDX,dword ptr [EDX + 0x14]
0055bcb4 : PUSH EDI
0055bcb5 : LEA EAX,[ESP + 0x28]
0055bcb9 : PUSH EAX
0055bcba : CALL EDX
0055bcbc : MOV EDI,dword ptr [ESP + 0x30]
0055bcc0 : SUB EDI,dword ptr [ESP + 0x28]
0055bcc4 : MOV EBP,dword ptr [ESP + 0x34]
0055bcc8 : SUB EBP,dword ptr [ESP + 0x2c]
0055bccc : LEA EAX,[EDI + EDI*0x4]
0055bccf : ADD EAX,EAX
0055bcd1 : ADD EAX,EAX
0055bcd3 : MOV dword ptr [ESP + 0x18],EAX
0055bcd7 : FILD dword ptr [ESP + 0x18]
0055bcdb : LEA EAX,[EBP + EBP*0x4]
0055bcdf : ADD EAX,EAX
0055bce1 : ADD EAX,EAX
0055bce3 : MOV dword ptr [ESP + 0x1c],EAX
0055bce7 : FSTP float ptr [ESP + 0x20]
0055bceb : FILD dword ptr [ESP + 0x1c]
0055bcef : MOV EAX,dword ptr [ESI + 0x54]
0055bcf2 : LEA EBX,[ESI + 0x50]
0055bcf5 : PUSH 0x1
0055bcf7 : PUSH EBX
0055bcf8 : FSTP float ptr [ESP + 0x2c]
0055bcfc : MOV ECX,EBX
0055bcfe : MOV dword ptr [ESP + 0x1c],EAX
0055bd02 : CALL 0x00558170
0055bd07 : MOV EAX,dword ptr [ESP + 0x14]
0055bd0b : CMP EAX,0x1
0055bd0e : JNC 0x0055bd4b
0055bd10 : MOV EDX,dword ptr [EBX]
0055bd12 : LEA ECX,[EAX + EAX*0x4]
0055bd15 : LEA ECX,[EDX + ECX*0x8]
0055bd18 : MOV EDX,0x1
0055bd1d : SUB EDX,EAX
0055bd1f : MOV dword ptr [ESP + 0x10],ECX
0055bd23 : JZ 0x0055bd4b
0055bd25 : MOV dword ptr [ESP + 0x14],EDX
0055bd29 : LEA ESP,[ESP]
0055bd30 : TEST ECX,ECX
0055bd32 : JZ 0x0055bd3d
0055bd34 : CALL 0x005d5200
0055bd39 : MOV ECX,dword ptr [ESP + 0x10]
0055bd3d : ADD ECX,0x28
0055bd40 : SUB dword ptr [ESP + 0x14],0x1
0055bd45 : MOV dword ptr [ESP + 0x10],ECX
0055bd49 : JNZ 0x0055bd30
0055bd4b : LEA ECX,[ESP + 0x38]
0055bd4f : CALL 0x00522b80
0055bd54 : MOV ECX,dword ptr [ESP + 0x8c]
0055bd5b : XOR EDX,EDX
0055bd5d : CMP byte ptr [ESP + 0x90],DL
0055bd64 : LEA EAX,[ESP + 0x38]
0055bd68 : SETZ DL
0055bd6b : PUSH EAX
0055bd6c : PUSH ECX
0055bd6d : MOV ECX,dword ptr [EBX]
0055bd6f : LEA EDX,[EDX + EDX*0x1 + 0x41]
0055bd73 : PUSH EDX
0055bd74 : CALL 0x005d52d0
0055bd79 : FLDZ
0055bd7b : OR byte ptr [ESI + 0x24],0x1
0055bd7f : FST float ptr [ESI + 0x4]
0055bd82 : LEA EAX,[ESI + 0x4]
0055bd85 : FSTP float ptr [EAX + 0x4]
0055bd88 : FLD float ptr [ESP + 0x20]
0055bd8c : PUSH EAX
0055bd8d : FSTP float ptr [EAX + 0x8]
0055bd90 : MOV ECX,ESI
0055bd92 : FLD float ptr [ESP + 0x28]
0055bd96 : FSTP float ptr [EAX + 0xc]
0055bd99 : MOV EDX,dword ptr [ESI]
0055bd9b : MOV EAX,dword ptr [EDX + 0x8]
0055bd9e : CALL EAX
0055bda0 : FLDZ
0055bda2 : OR byte ptr [ESI + 0x24],0x10
0055bda6 : FSTP float ptr [ESI + 0x68]
0055bda9 : LEA EAX,[ESI + 0x44]
0055bdac : XOR EBX,EBX
0055bdae : MOV dword ptr [ESP + 0x24],EAX
0055bdb2 : CMP dword ptr [EAX],EBX
0055bdb4 : JNZ 0x0055bdbf
0055bdb6 : MOV ECX,0x20
0055bdbb : MOV word ptr [EAX + 0xa],CX
0055bdbf : OR byte ptr [ESI + 0x24],0x4
0055bdc3 : PUSH EBX
0055bdc4 : PUSH EBX
0055bdc5 : PUSH EBX
0055bdc6 : LEA ECX,[ESP + 0x5c]
0055bdca : MOV dword ptr [ESP + 0x78],EBX
0055bdce : MOV dword ptr [ESP + 0x7c],EBX
0055bdd2 : MOV dword ptr [ESP + 0x80],EBX
0055bdd9 : MOV dword ptr [ESP + 0x74],EBX
0055bddd : MOV dword ptr [ESP + 0x70],EBX
0055bde1 : MOV dword ptr [ESP + 0x6c],EBX
0055bde5 : MOV dword ptr [ESP + 0x68],EBX
0055bde9 : MOV dword ptr [ESP + 0x84],EBX
0055bdf0 : MOV dword ptr [ESP + 0x88],EBX
0055bdf7 : MOV dword ptr [ESP + 0x8c],EBX
0055bdfe : MOV byte ptr [ESP + 0x90],BL
0055be05 : MOV byte ptr [ESP + 0x91],BL
0055be0c : MOV dword ptr [ESP + 0x5c],EBX
0055be10 : MOV dword ptr [ESP + 0x60],0x1
0055be18 : MOV dword ptr [ESP + 0x64],EBX
0055be1c : CALL 0x00555690
0055be21 : MOV EDX,dword ptr [ESP + 0x18]
0055be25 : PUSH EBX
0055be26 : PUSH EBX
0055be27 : PUSH EDX
0055be28 : LEA ECX,[ESP + 0x5c]
0055be2c : CALL 0x00559850
0055be31 : MOV EAX,dword ptr [ESP + 0x1c]
0055be35 : PUSH EBX
0055be36 : PUSH EAX
0055be37 : PUSH EBX
0055be38 : LEA ECX,[ESP + 0x5c]
0055be3c : CALL 0x00559850
0055be41 : MOV ECX,EDI
0055be43 : NEG ECX
0055be45 : ADD ECX,ECX
0055be47 : ADD ECX,ECX
0055be49 : SUB ECX,EDI
0055be4b : PUSH EBX
0055be4c : ADD ECX,ECX
0055be4e : ADD ECX,ECX
0055be50 : PUSH EBX
0055be51 : PUSH ECX
0055be52 : LEA ECX,[ESP + 0x5c]
0055be56 : CALL 0x00559850
0055be5b : MOV EDX,EBP
0055be5d : NEG EDX
0055be5f : ADD EDX,EDX
0055be61 : ADD EDX,EDX
0055be63 : SUB EDX,EBP
0055be65 : ADD EDX,EDX
0055be67 : PUSH EBX
0055be68 : ADD EDX,EDX
0055be6a : PUSH EDX
0055be6b : PUSH EBX
0055be6c : LEA ECX,[ESP + 0x5c]
0055be70 : CALL 0x00559850
0055be75 : MOV EAX,dword ptr [ESP + 0x24]
0055be79 : ADD ESI,0x34
0055be7c : PUSH ESI
0055be7d : PUSH EAX
0055be7e : LEA ECX,[ESP + 0x58]
0055be82 : CALL 0x005551b0
0055be87 : MOV ECX,dword ptr [ESP + 0x6c]
0055be8b : PUSH ECX
0055be8c : CALL 0x00515cf0
0055be91 : POP EDI
0055be92 : POP ESI
0055be93 : POP EBP
0055be94 : POP EBX
0055be95 : ADD ESP,0x78
0055be98 : RET 0x8
