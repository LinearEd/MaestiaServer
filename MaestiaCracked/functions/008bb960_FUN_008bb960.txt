PROGRAM  : Maestia.exe
FUNCTION : FUN_008bb960
ENTRY    : 008bb960
BODY     : [[008bb960, 008bb9e3] [008bb9e7, 008bba67] [008bba6b, 008bbb2f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008bb960(int param_1)

{
  char cVar1;
  int *piVar2;
  int iVar3;
  int *piVar4;
  void **ppvVar5;
  uint uVar6;
  int *piVar7;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b14e93;
  uVar6 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  piVar2 = *(int **)(param_1 + 0x3c);
  piVar7 = (int *)*piVar2;
  ppvVar5 = &local_10;
  local_10 = ExceptionList;
  while (ExceptionList = ppvVar5, piVar7 != piVar2) {
    iVar3 = piVar7[10];
    if (iVar3 != 0) {
      FUN_004427d0(iVar3);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    FUN_00430160(uVar6);
    ppvVar5 = ExceptionList;
    piVar2 = *(int **)(param_1 + 0x3c);
  }
  piVar7 = (int *)**(int **)(param_1 + 0x48);
  if (piVar7 != *(int **)(param_1 + 0x48)) {
    do {
      if (piVar7[10] != 0) {
        FUN_004427d0(piVar7[10]);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (*(char *)((int)piVar7 + 0x2d) == '\0') {
        piVar2 = (int *)piVar7[2];
        if (*(char *)((int)piVar2 + 0x2d) == '\0') {
          cVar1 = *(char *)(*piVar2 + 0x2d);
          piVar7 = piVar2;
          piVar2 = (int *)*piVar2;
          while (cVar1 == '\0') {
            cVar1 = *(char *)(*piVar2 + 0x2d);
            piVar7 = piVar2;
            piVar2 = (int *)*piVar2;
          }
        }
        else {
          cVar1 = *(char *)(piVar7[1] + 0x2d);
          piVar4 = (int *)piVar7[1];
          piVar2 = piVar7;
          while ((piVar7 = piVar4, cVar1 == '\0' && (piVar2 == (int *)piVar7[2]))) {
            cVar1 = *(char *)(piVar7[1] + 0x2d);
            piVar4 = (int *)piVar7[1];
            piVar2 = piVar7;
          }
        }
      }
    } while (piVar7 != *(int **)(param_1 + 0x48));
  }
  piVar7 = (int *)**(int **)(param_1 + 0x54);
  if (piVar7 != *(int **)(param_1 + 0x54)) {
    do {
      iVar3 = piVar7[10];
      if (iVar3 != 0) {
        local_8 = 0xffffffff;
        if (*(uint *)(iVar3 + 0x1c) < 8) {
          *(undefined4 *)(iVar3 + 0x1c) = 7;
          *(undefined4 *)(iVar3 + 0x18) = 0;
          *(undefined2 *)(iVar3 + 8) = 0;
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (*(char *)((int)piVar7 + 0x2d) == '\0') {
        piVar2 = (int *)piVar7[2];
        if (*(char *)((int)piVar2 + 0x2d) == '\0') {
          cVar1 = *(char *)(*piVar2 + 0x2d);
          piVar7 = piVar2;
          piVar2 = (int *)*piVar2;
          while (cVar1 == '\0') {
            cVar1 = *(char *)(*piVar2 + 0x2d);
            piVar7 = piVar2;
            piVar2 = (int *)*piVar2;
          }
        }
        else {
          cVar1 = *(char *)(piVar7[1] + 0x2d);
          piVar4 = (int *)piVar7[1];
          piVar2 = piVar7;
          while ((piVar7 = piVar4, cVar1 == '\0' && (piVar2 == (int *)piVar7[2]))) {
            cVar1 = *(char *)(piVar7[1] + 0x2d);
            piVar4 = (int *)piVar7[1];
            piVar2 = piVar7;
          }
        }
      }
    } while (piVar7 != *(int **)(param_1 + 0x54));
  }
  FUN_0044c480(*(undefined4 *)(*(int *)(param_1 + 0x3c) + 4));
  *(int *)(*(int *)(param_1 + 0x3c) + 4) = *(int *)(param_1 + 0x3c);
  *(undefined4 *)(param_1 + 0x40) = 0;
  *(undefined4 *)*(undefined4 *)(param_1 + 0x3c) = *(undefined4 *)(param_1 + 0x3c);
  *(int *)(*(int *)(param_1 + 0x3c) + 8) = *(int *)(param_1 + 0x3c);
  FUN_0044c480(*(undefined4 *)(*(int *)(param_1 + 0x48) + 4));
  *(int *)(*(int *)(param_1 + 0x48) + 4) = *(int *)(param_1 + 0x48);
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined4 *)*(undefined4 *)(param_1 + 0x48) = *(undefined4 *)(param_1 + 0x48);
  *(int *)(*(int *)(param_1 + 0x48) + 8) = *(int *)(param_1 + 0x48);
  FUN_0044c480(*(undefined4 *)(*(int *)(param_1 + 0x54) + 4));
  *(int *)(*(int *)(param_1 + 0x54) + 4) = *(int *)(param_1 + 0x54);
  *(undefined4 *)(param_1 + 0x58) = 0;
  *(undefined4 *)*(undefined4 *)(param_1 + 0x54) = *(undefined4 *)(param_1 + 0x54);
  *(int *)(*(int *)(param_1 + 0x54) + 8) = *(int *)(param_1 + 0x54);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008bb960 : PUSH EBP
008bb961 : MOV EBP,ESP
008bb963 : PUSH -0x1
008bb965 : PUSH 0xb14e93
008bb96a : MOV EAX,FS:[0x0]
008bb970 : PUSH EAX
008bb971 : PUSH ECX
008bb972 : PUSH EBX
008bb973 : PUSH ESI
008bb974 : PUSH EDI
008bb975 : MOV EAX,[0x00d66fa0]
008bb97a : XOR EAX,EBP
008bb97c : PUSH EAX
008bb97d : LEA EAX,[EBP + -0xc]
008bb980 : MOV FS:[0x0],EAX
008bb986 : MOV EDX,dword ptr [EBP + 0x8]
008bb989 : MOV ECX,dword ptr [EDX + 0x3c]
008bb98c : MOV EAX,dword ptr [ECX]
008bb98e : XOR EBX,EBX
008bb990 : MOV dword ptr [EBP + -0x10],EAX
008bb993 : CMP EAX,ECX
008bb995 : JZ 0x008bb9c3
008bb997 : MOV ESI,dword ptr [EAX + 0x28]
008bb99a : CMP ESI,EBX
008bb99c : JZ 0x008bb9ab
008bb99e : PUSH ESI
008bb99f : CALL 0x004427d0
008bb9a4 : MOV ECX,ESI
008bb9a6 : CALL 0x006f04e0
008bb9ab : LEA EDX,[EBP + -0x10]
008bb9ae : CALL 0x00430160
008bb9b3 : MOV EAX,dword ptr [EBP + 0x8]
008bb9b6 : MOV ECX,dword ptr [EAX + 0x3c]
008bb9b9 : MOV EAX,dword ptr [EBP + -0x10]
008bb9bc : CMP EAX,ECX
008bb9be : JNZ 0x008bb997
008bb9c0 : MOV EDX,dword ptr [EBP + 0x8]
008bb9c3 : MOV EAX,dword ptr [EDX + 0x48]
008bb9c6 : MOV ESI,dword ptr [EAX]
008bb9c8 : CMP ESI,EAX
008bb9ca : JZ 0x008bba29
008bb9cc : LEA ESP,[ESP]
008bb9d0 : MOV EDI,dword ptr [ESI + 0x28]
008bb9d3 : CMP EDI,EBX
008bb9d5 : JZ 0x008bb9e7
008bb9d7 : PUSH EDI
008bb9d8 : CALL 0x004427d0
008bb9dd : MOV ECX,EDI
008bb9df : CALL 0x006f04e0
008bb9e7 : CMP byte ptr [ESI + 0x2d],BL
008bb9ea : JNZ 0x008bba24
008bb9ec : MOV EAX,dword ptr [ESI + 0x8]
008bb9ef : CMP byte ptr [EAX + 0x2d],BL
008bb9f2 : JNZ 0x008bba0b
008bb9f4 : MOV ESI,EAX
008bb9f6 : MOV EAX,dword ptr [ESI]
008bb9f8 : CMP byte ptr [EAX + 0x2d],BL
008bb9fb : JNZ 0x008bba24
008bb9fd : LEA ECX,[ECX]
008bba00 : MOV ESI,EAX
008bba02 : MOV EAX,dword ptr [ESI]
008bba04 : CMP byte ptr [EAX + 0x2d],BL
008bba07 : JZ 0x008bba00
008bba09 : JMP 0x008bba24
008bba0b : MOV EAX,dword ptr [ESI + 0x4]
008bba0e : CMP byte ptr [EAX + 0x2d],BL
008bba11 : JNZ 0x008bba22
008bba13 : CMP ESI,dword ptr [EAX + 0x8]
008bba16 : JNZ 0x008bba22
008bba18 : MOV ESI,EAX
008bba1a : MOV EAX,dword ptr [EAX + 0x4]
008bba1d : CMP byte ptr [EAX + 0x2d],BL
008bba20 : JZ 0x008bba13
008bba22 : MOV ESI,EAX
008bba24 : CMP ESI,dword ptr [EDX + 0x48]
008bba27 : JNZ 0x008bb9d0
008bba29 : MOV EAX,dword ptr [EDX + 0x54]
008bba2c : MOV ESI,dword ptr [EAX]
008bba2e : CMP ESI,EAX
008bba30 : JZ 0x008bbaaa
008bba32 : MOV EDI,dword ptr [ESI + 0x28]
008bba35 : MOV dword ptr [EBP + -0x10],EDI
008bba38 : CMP EDI,EBX
008bba3a : JZ 0x008bba6b
008bba3c : MOV dword ptr [EBP + -0x4],0xffffffff
008bba43 : CMP dword ptr [EDI + 0x1c],0x8
008bba47 : JC 0x008bba51
008bba49 : MOV ECX,dword ptr [EDI + 0x8]
008bba4c : CALL 0x006f04e0
008bba51 : XOR ECX,ECX
008bba53 : MOV dword ptr [EDI + 0x1c],0x7
008bba5a : MOV dword ptr [EDI + 0x18],EBX
008bba5d : MOV word ptr [EDI + 0x8],CX
008bba61 : MOV ECX,EDI
008bba63 : CALL 0x006f04e0
008bba6b : CMP byte ptr [ESI + 0x2d],BL
008bba6e : JNZ 0x008bbaa5
008bba70 : MOV EAX,dword ptr [ESI + 0x8]
008bba73 : CMP byte ptr [EAX + 0x2d],BL
008bba76 : JNZ 0x008bba8c
008bba78 : MOV ESI,EAX
008bba7a : MOV EAX,dword ptr [ESI]
008bba7c : CMP byte ptr [EAX + 0x2d],BL
008bba7f : JNZ 0x008bbaa5
008bba81 : MOV ESI,EAX
008bba83 : MOV EAX,dword ptr [ESI]
008bba85 : CMP byte ptr [EAX + 0x2d],BL
008bba88 : JZ 0x008bba81
008bba8a : JMP 0x008bbaa5
008bba8c : MOV EAX,dword ptr [ESI + 0x4]
008bba8f : CMP byte ptr [EAX + 0x2d],BL
008bba92 : JNZ 0x008bbaa3
008bba94 : CMP ESI,dword ptr [EAX + 0x8]
008bba97 : JNZ 0x008bbaa3
008bba99 : MOV ESI,EAX
008bba9b : MOV EAX,dword ptr [EAX + 0x4]
008bba9e : CMP byte ptr [EAX + 0x2d],BL
008bbaa1 : JZ 0x008bba94
008bbaa3 : MOV ESI,EAX
008bbaa5 : CMP ESI,dword ptr [EDX + 0x54]
008bbaa8 : JNZ 0x008bba32
008bbaaa : LEA ESI,[EDX + 0x38]
008bbaad : MOV EDX,dword ptr [ESI + 0x4]
008bbab0 : MOV EAX,dword ptr [EDX + 0x4]
008bbab3 : PUSH EAX
008bbab4 : MOV ECX,ESI
008bbab6 : CALL 0x0044c480
008bbabb : MOV EAX,dword ptr [ESI + 0x4]
008bbabe : MOV EDI,dword ptr [EBP + 0x8]
008bbac1 : MOV dword ptr [EAX + 0x4],EAX
008bbac4 : MOV EAX,dword ptr [ESI + 0x4]
008bbac7 : MOV dword ptr [ESI + 0x8],EBX
008bbaca : MOV dword ptr [EAX],EAX
008bbacc : MOV ESI,dword ptr [ESI + 0x4]
008bbacf : MOV dword ptr [ESI + 0x8],ESI
008bbad2 : MOV ECX,dword ptr [EDI + 0x48]
008bbad5 : MOV EDX,dword ptr [ECX + 0x4]
008bbad8 : LEA ESI,[EDI + 0x44]
008bbadb : PUSH EDX
008bbadc : MOV ECX,ESI
008bbade : CALL 0x0044c480
008bbae3 : MOV EAX,dword ptr [ESI + 0x4]
008bbae6 : MOV dword ptr [EAX + 0x4],EAX
008bbae9 : MOV EAX,dword ptr [ESI + 0x4]
008bbaec : MOV dword ptr [ESI + 0x8],EBX
008bbaef : MOV dword ptr [EAX],EAX
008bbaf1 : MOV ESI,dword ptr [ESI + 0x4]
008bbaf4 : MOV dword ptr [ESI + 0x8],ESI
008bbaf7 : MOV EAX,dword ptr [EDI + 0x54]
008bbafa : MOV ECX,dword ptr [EAX + 0x4]
008bbafd : LEA ESI,[EDI + 0x50]
008bbb00 : PUSH ECX
008bbb01 : MOV ECX,ESI
008bbb03 : CALL 0x0044c480
008bbb08 : MOV EAX,dword ptr [ESI + 0x4]
008bbb0b : MOV dword ptr [EAX + 0x4],EAX
008bbb0e : MOV EAX,dword ptr [ESI + 0x4]
008bbb11 : MOV dword ptr [ESI + 0x8],EBX
008bbb14 : MOV dword ptr [EAX],EAX
008bbb16 : MOV ESI,dword ptr [ESI + 0x4]
008bbb19 : MOV dword ptr [ESI + 0x8],ESI
008bbb1c : MOV ECX,dword ptr [EBP + -0xc]
008bbb1f : MOV dword ptr FS:[0x0],ECX
008bbb26 : POP ECX
008bbb27 : POP EDI
008bbb28 : POP ESI
008bbb29 : POP EBX
008bbb2a : MOV ESP,EBP
008bbb2c : POP EBP
008bbb2d : RET 0x4
