PROGRAM  : Maestia.exe
FUNCTION : FUN_00527730
ENTRY    : 00527730
BODY     : [[00527730, 00527987]]

============================================================
DECOMPILED C CODE
============================================================

float10 FUN_00527730(int param_1)

{
  ushort uVar1;
  char cVar2;
  int *piVar3;
  char *_String;
  char *in_ECX;
  float10 fVar4;
  double dVar5;
  double local_58;
  int *piStack_50;
  int iStack_4c;
  byte bStack_48;
  byte local_44 [16];
  byte abStack_34 [16];
  undefined1 auStack_24 [36];
  
  cVar2 = *in_ECX;
  if (cVar2 == '\x03') {
    return (float10)*(double *)(in_ECX + 4);
  }
  if (cVar2 == '\x04') {
    return (float10)*(int *)(in_ECX + 4);
  }
  if (cVar2 == '\x05') {
    cVar2 = FUN_00525e80(&local_58);
    if (cVar2 != '\0') {
      return (float10)local_58;
    }
  }
  else if (cVar2 == '\x01') {
    if (*(byte *)(param_1 + 0x7c) < 7) goto LAB_00527799;
  }
  else {
    if (cVar2 == '\x02') {
      if (in_ECX[4] != '\0') {
        return (float10)1;
      }
LAB_00527799:
      return (float10)0;
    }
    if (cVar2 != '\a') {
      if (((cVar2 == '\x06') && (*(int *)(in_ECX + 4) != 0)) || (cVar2 == '\b')) {
        local_44[0] = 0;
        piVar3 = (int *)FUN_005270f0(param_1);
        if ((param_1 == 0) ||
           (cVar2 = (**(code **)(*piVar3 + 0x2c))
                              (param_1 + 0x78,*(int *)(param_1 + 0x78) + 0x158,local_44),
           cVar2 == '\0')) {
          if (*in_ECX == '\a') {
            fVar4 = (float10)FUN_005b0b90();
          }
          else {
            _String = (char *)(**(code **)(*piVar3 + 4))(param_1);
            if (_String == (char *)0x0) {
              if (4 < local_44[0]) {
                FUN_00526400();
              }
              return (float10)0;
            }
            dVar5 = _atof(_String);
            fVar4 = (float10)dVar5;
          }
          local_58 = (double)fVar4;
        }
        else {
          uVar1 = *(ushort *)(param_1 + 0xc4);
          *(ushort *)(param_1 + 0xc4) = uVar1 + 1;
          if (uVar1 < 0xff) {
            abStack_34[0] = 0;
            FUN_00527140(&piStack_50,param_1);
            if (piStack_50 != (int *)0x0) {
              FUN_0051fae0(abStack_34,piVar3,param_1,0,0);
              (**(code **)(*piStack_50 + 0x28))(auStack_24,iStack_4c,0);
              FUN_0051fbd0();
            }
            cVar2 = FUN_00525e60();
            if (cVar2 == '\0') {
              fVar4 = (float10)FUN_005b0b90();
            }
            else {
              fVar4 = (float10)FUN_00527730(param_1);
            }
            local_58 = (double)fVar4;
            if (((bStack_48 & 2) == 0) && (piStack_50 != (int *)0x0)) {
              FUN_00503db0();
            }
            piStack_50 = (int *)0x0;
            if (((bStack_48 & 1) == 0) && (iStack_4c != 0)) {
              FUN_00503db0();
            }
            iStack_4c = 0;
            if (4 < abStack_34[0]) {
              FUN_00526400();
            }
          }
          else {
            fVar4 = (float10)FUN_005b0b90();
            local_58 = (double)fVar4;
          }
          *(short *)(param_1 + 0xc4) = *(short *)(param_1 + 0xc4) + -1;
        }
        if (4 < local_44[0]) {
          FUN_00526400();
        }
        return (float10)local_58;
      }
      if ((cVar2 != '\0') || (*(byte *)(param_1 + 0x7c) - 1 < 6)) goto LAB_00527799;
    }
  }
  fVar4 = (float10)FUN_005b0b90();
  return fVar4;
}



============================================================
DISASSEMBLY
============================================================
00527730 : SUB ESP,0x58
00527733 : PUSH EBP
00527734 : MOV EBP,ECX
00527736 : MOV AL,byte ptr [EBP]
00527739 : CMP AL,0x3
0052773b : JNZ 0x00527747
0052773d : FLD double ptr [EBP + 0x4]
00527740 : POP EBP
00527741 : ADD ESP,0x58
00527744 : RET 0x4
00527747 : CMP AL,0x4
00527749 : JNZ 0x00527755
0052774b : FILD dword ptr [EBP + 0x4]
0052774e : POP EBP
0052774f : ADD ESP,0x58
00527752 : RET 0x4
00527755 : PUSH EBX
00527756 : MOV EBX,0x5
0052775b : PUSH ESI
0052775c : CMP AL,BL
0052775e : JNZ 0x00527787
00527760 : MOV EAX,dword ptr [EBP + 0x4]
00527763 : MOV ESI,dword ptr [EAX]
00527765 : LEA ECX,[ESP + 0xc]
00527769 : PUSH ECX
0052776a : CALL 0x00525e80
0052776f : ADD ESP,0x4
00527772 : TEST AL,AL
00527774 : JZ 0x0052797a
0052777a : FLD double ptr [ESP + 0xc]
0052777e : POP ESI
0052777f : POP EBX
00527780 : POP EBP
00527781 : ADD ESP,0x58
00527784 : RET 0x4
00527787 : CMP AL,0x1
00527789 : JNZ 0x005277a4
0052778b : MOV EDX,dword ptr [ESP + 0x68]
0052778f : CMP byte ptr [EDX + 0x7c],0x6
00527793 : JA 0x0052797a
00527799 : FLDZ
0052779b : POP ESI
0052779c : POP EBX
0052779d : POP EBP
0052779e : ADD ESP,0x58
005277a1 : RET 0x4
005277a4 : CMP AL,0x2
005277a6 : JNZ 0x005277b9
005277a8 : CMP byte ptr [EBP + 0x4],0x0
005277ac : JZ 0x00527799
005277ae : FLD1
005277b0 : POP ESI
005277b1 : POP EBX
005277b2 : POP EBP
005277b3 : ADD ESP,0x58
005277b6 : RET 0x4
005277b9 : CMP AL,0x7
005277bb : JZ 0x0052797a
005277c1 : CMP AL,0x6
005277c3 : JNZ 0x005277cb
005277c5 : CMP dword ptr [EBP + 0x4],0x0
005277c9 : JNZ 0x005277d3
005277cb : CMP AL,0x8
005277cd : JNZ 0x00527961
005277d3 : MOV ESI,dword ptr [ESP + 0x68]
005277d7 : PUSH EDI
005277d8 : PUSH ESI
005277d9 : MOV byte ptr [ESP + 0x28],0x0
005277de : CALL 0x005270f0
005277e3 : MOV EDI,EAX
005277e5 : TEST ESI,ESI
005277e7 : JZ 0x00527901
005277ed : MOV ECX,dword ptr [ESI + 0x78]
005277f0 : MOV EDX,dword ptr [EDI]
005277f2 : LEA EAX,[ESI + 0x78]
005277f5 : LEA EBX,[ESP + 0x24]
005277f9 : PUSH EBX
005277fa : ADD ECX,0x158
00527800 : PUSH ECX
00527801 : PUSH EAX
00527802 : MOV EAX,dword ptr [EDX + 0x2c]
00527805 : MOV ECX,EDI
00527807 : CALL EAX
00527809 : TEST AL,AL
0052780b : JZ 0x005278fc
00527811 : MOVZX EAX,word ptr [ESI + 0xc4]
00527818 : MOV ECX,0xff
0052781d : LEA EDX,[EAX + 0x1]
00527820 : MOV word ptr [ESI + 0xc4],DX
00527827 : CMP AX,CX
0052782a : JNC 0x005278e0
00527830 : PUSH ESI
00527831 : LEA EAX,[ESP + 0x1c]
00527835 : XOR EBX,EBX
00527837 : PUSH EAX
00527838 : LEA ECX,[ESP + 0x2c]
0052783c : MOV byte ptr [ESP + 0x3c],BL
00527840 : CALL 0x00527140
00527845 : CMP dword ptr [ESP + 0x18],EBX
00527849 : JZ 0x0052787c
0052784b : PUSH EBX
0052784c : PUSH EBX
0052784d : PUSH ESI
0052784e : PUSH EDI
0052784f : LEA ECX,[ESP + 0x44]
00527853 : PUSH ECX
00527854 : LEA ECX,[ESP + 0x58]
00527858 : CALL 0x0051fae0
0052785d : MOV EAX,dword ptr [ESP + 0x1c]
00527861 : MOV ECX,dword ptr [ESP + 0x18]
00527865 : MOV EDX,dword ptr [ECX]
00527867 : MOV EDX,dword ptr [EDX + 0x28]
0052786a : PUSH EBX
0052786b : PUSH EAX
0052786c : LEA EAX,[ESP + 0x4c]
00527870 : PUSH EAX
00527871 : CALL EDX
00527873 : LEA ECX,[ESP + 0x44]
00527877 : CALL 0x0051fbd0
0052787c : LEA ECX,[ESP + 0x34]
00527880 : CALL 0x00525e60
00527885 : TEST AL,AL
00527887 : JZ 0x00527895
00527889 : PUSH ESI
0052788a : LEA ECX,[ESP + 0x38]
0052788e : CALL 0x00527730
00527893 : JMP 0x0052789a
00527895 : CALL 0x005b0b90
0052789a : TEST byte ptr [ESP + 0x20],0x2
0052789f : FSTP double ptr [ESP + 0x10]
005278a3 : JNZ 0x005278b2
005278a5 : MOV ECX,dword ptr [ESP + 0x18]
005278a9 : CMP ECX,EBX
005278ab : JZ 0x005278b2
005278ad : CALL 0x00503db0
005278b2 : TEST byte ptr [ESP + 0x20],0x1
005278b7 : MOV dword ptr [ESP + 0x18],EBX
005278bb : JNZ 0x005278ca
005278bd : MOV ECX,dword ptr [ESP + 0x1c]
005278c1 : CMP ECX,EBX
005278c3 : JZ 0x005278ca
005278c5 : CALL 0x00503db0
005278ca : CMP byte ptr [ESP + 0x34],0x5
005278cf : MOV dword ptr [ESP + 0x1c],EBX
005278d3 : JC 0x005278e9
005278d5 : LEA ECX,[ESP + 0x34]
005278d9 : CALL 0x00526400
005278de : JMP 0x005278e9
005278e0 : CALL 0x005b0b90
005278e5 : FSTP double ptr [ESP + 0x10]
005278e9 : MOV EAX,0xffff
005278ee : ADD word ptr [ESI + 0xc4],AX
005278f5 : CMP byte ptr [ESP + 0x24],0x5
005278fa : JMP 0x00527914
005278fc : MOV EBX,0x5
00527901 : CMP byte ptr [EBP],0x7
00527905 : JNZ 0x0052792d
00527907 : CALL 0x005b0b90
0052790c : CMP byte ptr [ESP + 0x24],BL
00527910 : FSTP double ptr [ESP + 0x10]
00527914 : JC 0x0052791f
00527916 : LEA ECX,[ESP + 0x24]
0052791a : CALL 0x00526400
0052791f : FLD double ptr [ESP + 0x10]
00527923 : POP EDI
00527924 : POP ESI
00527925 : POP EBX
00527926 : POP EBP
00527927 : ADD ESP,0x58
0052792a : RET 0x4
0052792d : MOV EDX,dword ptr [EDI]
0052792f : MOV EAX,dword ptr [EDX + 0x4]
00527932 : PUSH ESI
00527933 : MOV ECX,EDI
00527935 : CALL EAX
00527937 : TEST EAX,EAX
00527939 : JZ 0x00527946
0052793b : PUSH EAX
0052793c : CALL 0x00638ec9
00527941 : ADD ESP,0x4
00527944 : JMP 0x0052790c
00527946 : CMP byte ptr [ESP + 0x24],BL
0052794a : JC 0x00527955
0052794c : LEA ECX,[ESP + 0x24]
00527950 : CALL 0x00526400
00527955 : FLDZ
00527957 : POP EDI
00527958 : POP ESI
00527959 : POP EBX
0052795a : POP EBP
0052795b : ADD ESP,0x58
0052795e : RET 0x4
00527961 : TEST AL,AL
00527963 : JNZ 0x00527799
00527969 : MOV ECX,dword ptr [ESP + 0x68]
0052796d : MOVZX EAX,byte ptr [ECX + 0x7c]
00527971 : DEC EAX
00527972 : CMP EAX,EBX
00527974 : JBE 0x00527799
0052797a : CALL 0x005b0b90
0052797f : POP ESI
00527980 : POP EBX
00527981 : POP EBP
00527982 : ADD ESP,0x58
00527985 : RET 0x4
