PROGRAM  : Maestia.exe
FUNCTION : SetHSV
ENTRY    : 005f7ee0
BODY     : [[005f7ee0, 005f808a]]

============================================================
DECOMPILED C CODE
============================================================

/* public: void __thiscall GColor::SetHSV(float,float,float) */

void __thiscall GColor::SetHSV(GColor *this,float param_1,float param_2,float param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float10 fVar4;
  int iVar5;
  float10 extraout_ST0;
  float10 fVar6;
  float10 extraout_ST1;
  GColor local_4;
  
                    /* 0x1f7ee0  145  ?SetHSV@GColor@@QAEXMMM@Z */
  if (param_2 == 0.0) {
    param_2 = param_3;
    param_1 = param_3;
  }
  else {
    iVar5 = FUN_0063b380();
    fVar4 = (float10)1;
    fVar6 = (float10)param_3;
    fVar1 = (float)(fVar6 * (fVar4 - extraout_ST1));
    fVar2 = (float)((fVar4 - (float10)(float)(extraout_ST0 - (float10)iVar5) * extraout_ST1) * fVar6
                   );
    fVar3 = (float)(fVar6 * (fVar4 - (fVar4 - (float10)(float)(extraout_ST0 - (float10)iVar5)) *
                                     extraout_ST1));
    param_1 = fVar1;
    switch(iVar5) {
    case 0:
      param_1 = param_3;
      fVar6 = (float10)fVar1;
      param_3 = fVar3;
      break;
    case 1:
      fVar6 = (float10)fVar1;
      param_1 = fVar2;
      break;
    case 2:
      fVar6 = (float10)fVar3;
      break;
    case 3:
      param_3 = fVar2;
      break;
    case 4:
      param_1 = fVar3;
      param_3 = fVar1;
      break;
    default:
      param_1 = param_3;
      fVar6 = (float10)fVar2;
      param_3 = fVar1;
    }
    param_2 = (float)fVar6;
  }
  local_4 = SUB41((int)ROUND(param_1 * 255.0),0);
  this[2] = local_4;
  param_3._0_1_ = SUB41((int)ROUND(param_3 * 255.0),0);
  this[1] = param_3._0_1_;
  param_3._0_1_ = SUB41((int)ROUND(param_2 * 255.0),0);
  *this = param_3._0_1_;
  return;
}



============================================================
DISASSEMBLY
============================================================
005f7ee0 : FLDZ
005f7ee2 : SUB ESP,0x8
005f7ee5 : FLD ST0
005f7ee7 : PUSH ESI
005f7ee8 : FLD float ptr [ESP + 0x14]
005f7eec : MOV ESI,ECX
005f7eee : FUCOM
005f7ef0 : FNSTSW AX
005f7ef2 : FSTP ST1
005f7ef4 : TEST AH,0x44
005f7ef7 : JP 0x005f7f12
005f7ef9 : FSTP ST1
005f7efb : FSTP ST0
005f7efd : FLD float ptr [ESP + 0x18]
005f7f01 : FST float ptr [ESP + 0x14]
005f7f05 : FST float ptr [ESP + 0x18]
005f7f09 : FSTP float ptr [ESP + 0x10]
005f7f0d : JMP 0x005f7ffe
005f7f12 : FLD1
005f7f14 : FLD float ptr [ESP + 0x10]
005f7f18 : FUCOM
005f7f1a : FNSTSW AX
005f7f1c : FSTP ST1
005f7f1e : TEST AH,0x44
005f7f21 : JP 0x005f7f29
005f7f23 : FSTP ST0
005f7f25 : FXCH
005f7f27 : JMP 0x005f7f33
005f7f29 : FSTP ST2
005f7f2b : FXCH
005f7f2d : FMUL double ptr [0x00b95628]
005f7f33 : FSTP float ptr [ESP + 0x10]
005f7f37 : FLD float ptr [ESP + 0x10]
005f7f3b : FLD ST0
005f7f3d : CALL 0x0063b380
005f7f42 : MOV dword ptr [ESP + 0x10],EAX
005f7f46 : FISUB dword ptr [ESP + 0x10]
005f7f4a : FSTP float ptr [ESP + 0x10]
005f7f4e : FLD ST0
005f7f50 : FLD1
005f7f52 : FLD ST0
005f7f54 : FSUBRP ST2,ST0
005f7f56 : FLD float ptr [ESP + 0x18]
005f7f5a : FLD ST0
005f7f5c : FMULP ST3
005f7f5e : FXCH ST2
005f7f60 : FSTP float ptr [ESP + 0x14]
005f7f64 : FLD float ptr [ESP + 0x10]
005f7f68 : FLD ST0
005f7f6a : FMUL ST4
005f7f6c : FSUBR ST0,ST2
005f7f6e : FMUL ST3
005f7f70 : FSTP float ptr [ESP + 0x8]
005f7f74 : FSUBR ST0,ST1
005f7f76 : FMULP ST3
005f7f78 : FSUBRP ST2,ST0
005f7f7a : FLD ST0
005f7f7c : FMULP ST2
005f7f7e : FXCH
005f7f80 : FSTP float ptr [ESP + 0x4]
005f7f84 : CMP EAX,0x4
005f7f87 : JA 0x005f7fea
005f7f89 : JMP dword ptr [EAX*0x4 + 0x5f808c]
005f7f90 : FSTP float ptr [ESP + 0x10]
005f7f94 : FLD float ptr [ESP + 0x4]
005f7f98 : FSTP float ptr [ESP + 0x18]
005f7f9c : FLD float ptr [ESP + 0x14]
005f7fa0 : JMP 0x005f7ffa
005f7fa2 : FLD float ptr [ESP + 0x8]
005f7fa6 : FSTP float ptr [ESP + 0x10]
005f7faa : FSTP float ptr [ESP + 0x18]
005f7fae : FLD float ptr [ESP + 0x14]
005f7fb2 : JMP 0x005f7ffa
005f7fb4 : FLD float ptr [ESP + 0x14]
005f7fb8 : FSTP float ptr [ESP + 0x10]
005f7fbc : FSTP float ptr [ESP + 0x18]
005f7fc0 : FLD float ptr [ESP + 0x4]
005f7fc4 : JMP 0x005f7ffa
005f7fc6 : FLD float ptr [ESP + 0x14]
005f7fca : FSTP float ptr [ESP + 0x10]
005f7fce : FLD float ptr [ESP + 0x8]
005f7fd2 : FSTP float ptr [ESP + 0x18]
005f7fd6 : JMP 0x005f7ffa
005f7fd8 : FLD float ptr [ESP + 0x4]
005f7fdc : FSTP float ptr [ESP + 0x10]
005f7fe0 : FLD float ptr [ESP + 0x14]
005f7fe4 : FSTP float ptr [ESP + 0x18]
005f7fe8 : JMP 0x005f7ffa
005f7fea : FSTP float ptr [ESP + 0x10]
005f7fee : FLD float ptr [ESP + 0x14]
005f7ff2 : FSTP float ptr [ESP + 0x18]
005f7ff6 : FLD float ptr [ESP + 0x8]
005f7ffa : FSTP float ptr [ESP + 0x14]
005f7ffe : FLD float ptr [ESP + 0x10]
005f8002 : FLD double ptr [0x00b86b48]
005f8008 : FNSTCW word ptr [ESP + 0x10]
005f800c : MOVZX EAX,word ptr [ESP + 0x10]
005f8011 : FMUL ST1
005f8013 : OR EAX,0xc00
005f8018 : FXCH
005f801a : MOV dword ptr [ESP + 0x8],EAX
005f801e : FLDCW word ptr [ESP + 0x8]
005f8022 : FISTP dword ptr [ESP + 0x8]
005f8026 : MOV AL,byte ptr [ESP + 0x8]
005f802a : MOV byte ptr [ESI + 0x2],AL
005f802d : FLDCW word ptr [ESP + 0x10]
005f8031 : FLD float ptr [ESP + 0x18]
005f8035 : FNSTCW word ptr [ESP + 0x10]
005f8039 : FMUL ST1
005f803b : MOVZX EAX,word ptr [ESP + 0x10]
005f8040 : OR EAX,0xc00
005f8045 : MOV dword ptr [ESP + 0x18],EAX
005f8049 : FLDCW word ptr [ESP + 0x18]
005f804d : FISTP dword ptr [ESP + 0x18]
005f8051 : MOV CL,byte ptr [ESP + 0x18]
005f8055 : MOV byte ptr [ESI + 0x1],CL
005f8058 : FLDCW word ptr [ESP + 0x10]
005f805c : FMUL float ptr [ESP + 0x14]
005f8060 : FNSTCW word ptr [ESP + 0x10]
005f8064 : MOVZX EAX,word ptr [ESP + 0x10]
005f8069 : OR EAX,0xc00
005f806e : MOV dword ptr [ESP + 0x18],EAX
005f8072 : FLDCW word ptr [ESP + 0x18]
005f8076 : FISTP dword ptr [ESP + 0x18]
005f807a : MOV DL,byte ptr [ESP + 0x18]
005f807e : MOV byte ptr [ESI],DL
005f8080 : POP ESI
005f8081 : FLDCW word ptr [ESP + 0xc]
005f8085 : ADD ESP,0x8
005f8088 : RET 0xc
