PROGRAM  : Maestia.exe
FUNCTION : FUN_00a39850
ENTRY    : 00a39850
BODY     : [[00a39850, 00a39a6c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a39850(int param_1)

{
  undefined2 uVar1;
  undefined4 uVar2;
  float fVar3;
  float fVar4;
  char cVar5;
  int iVar6;
  int *piVar7;
  int in_ECX;
  undefined8 *puVar8;
  float fVar9;
  float fVar10;
  int *local_4c;
  int local_44;
  float local_40;
  float local_38;
  undefined4 local_20;
  undefined3 uStack_13;
  undefined1 local_10;
  undefined2 uStack_e;
  
  uVar2 = *(undefined4 *)(param_1 + 4);
  local_4c = (int *)FUN_00a1a840(uVar2);
  if (((local_4c != (int *)0x0) || (local_4c = (int *)FUN_00a1a6d0(uVar2), local_4c != (int *)0x0))
     || (local_4c = (int *)FUN_00a1a780(uVar2), local_4c != (int *)0x0)) {
    uVar2 = *(undefined4 *)(in_ECX + 0x46c);
    iVar6 = FUN_00a1a840(uVar2);
    if ((iVar6 == 0) && (iVar6 = FUN_00a1a6d0(uVar2), iVar6 == 0)) {
      iVar6 = FUN_00a1a780(uVar2);
    }
    if (((*(int **)(in_ECX + 0xac) != (int *)0x0) && (*(int **)(in_ECX + 0xac) == local_4c)) &&
       ((iVar6 == 0 || (cVar5 = FUN_0040e200(), cVar5 != '\0')))) {
      FUN_0040e4c0();
      puVar8 = (undefined8 *)(param_1 + 0x11);
      local_38 = 0.0;
      local_40 = 0.0;
      local_44 = 0;
      if (*(char *)(param_1 + 0x10) != '\0') {
        do {
          uVar1 = *(undefined2 *)((int)puVar8 + 0x14);
          local_20 = (undefined4)*puVar8;
          fVar3 = *(float *)(puVar8 + 1);
          uVar2 = *(undefined4 *)((int)puVar8 + 0xc);
          local_10 = (undefined1)*(undefined4 *)(puVar8 + 2);
          uStack_e = (undefined2)((uint)*(undefined4 *)(puVar8 + 2) >> 0x10);
          puVar8 = (undefined8 *)((int)puVar8 + 0x16);
          fVar10 = fVar3;
          piVar7 = (int *)FUN_00a1a840(local_20);
          if (((piVar7 != (int *)0x0) ||
              (piVar7 = (int *)FUN_00a1a6d0(local_20), piVar7 != (int *)0x0)) ||
             (piVar7 = (int *)FUN_00a1a780(local_20), fVar4 = local_38, piVar7 != (int *)0x0)) {
            (**(code **)(*piVar7 + 0x330))(CONCAT22(uVar1,uStack_e) != 0);
            FUN_00a1c790();
            uStack_13 = (undefined3)((uint)uVar2 >> 8);
            fVar9 = (float)(piVar7[0x29] - CONCAT13(local_10,uStack_13));
            if (((fVar10 <= local_38) ||
                ((fVar4 = fVar10, *(byte *)(param_1 + 0x10) != 1 &&
                 ((*(byte *)(param_1 + 0x10) < 2 || (fVar9 == fVar3 || (int)fVar9 - (int)fVar3 < 0))
                 )))) && (fVar4 = local_38, local_40 < fVar10)) {
              local_40 = fVar10;
            }
          }
          local_38 = fVar4;
          local_44 = local_44 + 1;
        } while (local_44 < (int)(uint)*(byte *)(param_1 + 0x10));
      }
      FUN_00a38280();
    }
    (**(code **)(*local_4c + 0x374))
              (*(undefined4 *)(param_1 + 0xc),*(undefined1 *)(param_1 + 0x10),param_1 + 0x11);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a39850 : PUSH EBP
00a39851 : MOV EBP,ESP
00a39853 : AND ESP,0xfffffff8
00a39856 : SUB ESP,0x44
00a39859 : MOV EAX,dword ptr [EBP + 0x8]
00a3985c : PUSH EBX
00a3985d : PUSH ESI
00a3985e : PUSH EDI
00a3985f : MOV EDI,dword ptr [EAX + 0x4]
00a39862 : MOV ESI,ECX
00a39864 : PUSH EDI
00a39865 : MOV dword ptr [ESP + 0x14],ESI
00a39869 : CALL 0x00a1a840
00a3986e : MOV EBX,EAX
00a39870 : MOV dword ptr [ESP + 0xc],EBX
00a39874 : TEST EBX,EBX
00a39876 : JNZ 0x00a398a0
00a39878 : PUSH EDI
00a39879 : MOV ECX,ESI
00a3987b : CALL 0x00a1a6d0
00a39880 : MOV dword ptr [ESP + 0xc],EAX
00a39884 : TEST EAX,EAX
00a39886 : JNZ 0x00a3989c
00a39888 : PUSH EDI
00a39889 : MOV ECX,ESI
00a3988b : CALL 0x00a1a780
00a39890 : MOV dword ptr [ESP + 0xc],EAX
00a39894 : TEST EAX,EAX
00a39896 : JZ 0x00a39a64
00a3989c : MOV EBX,dword ptr [ESP + 0xc]
00a398a0 : MOV EDI,dword ptr [ESI + 0x46c]
00a398a6 : PUSH EDI
00a398a7 : MOV ECX,ESI
00a398a9 : CALL 0x00a1a840
00a398ae : TEST EAX,EAX
00a398b0 : JNZ 0x00a398c6
00a398b2 : PUSH EDI
00a398b3 : MOV ECX,ESI
00a398b5 : CALL 0x00a1a6d0
00a398ba : TEST EAX,EAX
00a398bc : JNZ 0x00a398c6
00a398be : PUSH EDI
00a398bf : MOV ECX,ESI
00a398c1 : CALL 0x00a1a780
00a398c6 : MOV ECX,dword ptr [ESI + 0xac]
00a398cc : TEST ECX,ECX
00a398ce : JZ 0x00a39a48
00a398d4 : CMP ECX,EBX
00a398d6 : JNZ 0x00a39a48
00a398dc : TEST EAX,EAX
00a398de : JZ 0x00a398ed
00a398e0 : CALL 0x0040e200
00a398e5 : TEST AL,AL
00a398e7 : JZ 0x00a39a48
00a398ed : MOV EDI,ESI
00a398ef : CALL 0x0040e4c0
00a398f4 : MOV EAX,dword ptr [EBP + 0x8]
00a398f7 : XORPS XMM0,XMM0
00a398fa : XOR ECX,ECX
00a398fc : LEA EBX,[EAX + 0x11]
00a398ff : MOVSS dword ptr [ESP + 0x20],XMM0
00a39905 : MOV dword ptr [ESP + 0x24],ECX
00a39909 : MOVSS dword ptr [ESP + 0x18],XMM0
00a3990f : MOV dword ptr [ESP + 0x1c],ECX
00a39913 : MOV dword ptr [ESP + 0x14],ECX
00a39917 : CMP byte ptr [EAX + 0x10],CL
00a3991a : JBE 0x00a39a31
00a39920 : MOVQ XMM0,qword ptr [EBX]
00a39924 : MOV ECX,dword ptr [EBX + 0x10]
00a39927 : MOV DX,word ptr [EBX + 0x14]
00a3992b : MOVQ qword ptr [ESP + 0x38],XMM0
00a39931 : MOV EAX,dword ptr [ESP + 0x38]
00a39935 : MOVQ XMM0,qword ptr [EBX + 0x8]
00a3993a : MOV dword ptr [ESP + 0x48],ECX
00a3993e : MOV ECX,dword ptr [0x00da93ec]
00a39944 : PUSH EAX
00a39945 : MOVQ qword ptr [ESP + 0x44],XMM0
00a3994b : MOV word ptr [ESP + 0x50],DX
00a39950 : ADD EBX,0x16
00a39953 : MOV EDI,ECX
00a39955 : CALL 0x00a1a840
00a3995a : MOV ESI,EAX
00a3995c : TEST ESI,ESI
00a3995e : JNZ 0x00a39984
00a39960 : MOV ECX,dword ptr [ESP + 0x38]
00a39964 : PUSH ECX
00a39965 : MOV ECX,EDI
00a39967 : CALL 0x00a1a6d0
00a3996c : MOV ESI,EAX
00a3996e : TEST ESI,ESI
00a39970 : JNZ 0x00a39984
00a39972 : MOV EDX,dword ptr [ESP + 0x38]
00a39976 : PUSH EDX
00a39977 : MOV ECX,EDI
00a39979 : CALL 0x00a1a780
00a3997e : MOV ESI,EAX
00a39980 : TEST ESI,ESI
00a39982 : JZ 0x00a399ff
00a39984 : CMP dword ptr [ESP + 0x4a],0x0
00a39989 : MOV EAX,dword ptr [ESI]
00a3998b : MOV EAX,dword ptr [EAX + 0x330]
00a39991 : SETNZ CL
00a39994 : MOVZX EDX,CL
00a39997 : PUSH EDX
00a39998 : MOV ECX,ESI
00a3999a : CALL EAX
00a3999c : MOV EDI,dword ptr [ESP + 0x10]
00a399a0 : CALL 0x00a1c790
00a399a5 : MOV ESI,dword ptr [ESI + 0xa4]
00a399ab : SUB ESI,dword ptr [ESP + 0x45]
00a399af : SUB ESI,dword ptr [ESP + 0x40]
00a399b3 : COMISS XMM0,dword ptr [ESP + 0x20]
00a399b8 : JBE 0x00a399e2
00a399ba : MOV ECX,dword ptr [EBP + 0x8]
00a399bd : MOV AL,byte ptr [ECX + 0x10]
00a399c0 : CMP AL,0x1
00a399c2 : JZ 0x00a399ca
00a399c4 : JBE 0x00a399e2
00a399c6 : TEST ESI,ESI
00a399c8 : JLE 0x00a399e2
00a399ca : MOV EAX,dword ptr [ESP + 0x38]
00a399ce : MOVSS dword ptr [ESP + 0x28],XMM0
00a399d4 : MOV EDX,dword ptr [ESP + 0x28]
00a399d8 : MOV dword ptr [ESP + 0x20],EDX
00a399dc : MOV dword ptr [ESP + 0x24],EAX
00a399e0 : JMP 0x00a399ff
00a399e2 : COMISS XMM0,dword ptr [ESP + 0x18]
00a399e7 : JBE 0x00a399ff
00a399e9 : MOV EDX,dword ptr [ESP + 0x38]
00a399ed : MOVSS dword ptr [ESP + 0x30],XMM0
00a399f3 : MOV ECX,dword ptr [ESP + 0x30]
00a399f7 : MOV dword ptr [ESP + 0x18],ECX
00a399fb : MOV dword ptr [ESP + 0x1c],EDX
00a399ff : MOV ECX,dword ptr [EBP + 0x8]
00a39a02 : MOV EAX,dword ptr [ESP + 0x14]
00a39a06 : MOVZX EDX,byte ptr [ECX + 0x10]
00a39a0a : INC EAX
00a39a0b : CMP EAX,EDX
00a39a0d : MOV dword ptr [ESP + 0x14],EAX
00a39a11 : JL 0x00a39920
00a39a17 : MOVSS XMM0,dword ptr [ESP + 0x20]
00a39a1d : COMISS XMM0,dword ptr [0x00b9b0b4]
00a39a24 : JA 0x00a39a37
00a39a26 : COMISS XMM0,dword ptr [ESP + 0x18]
00a39a2b : JA 0x00a39a37
00a39a2d : MOV ESI,dword ptr [ESP + 0x10]
00a39a31 : LEA EAX,[ESP + 0x18]
00a39a35 : JMP 0x00a39a3f
00a39a37 : MOV ESI,dword ptr [ESP + 0x10]
00a39a3b : LEA EAX,[ESP + 0x20]
00a39a3f : CALL 0x00a38280
00a39a44 : MOV EBX,dword ptr [ESP + 0xc]
00a39a48 : MOV EAX,dword ptr [EBP + 0x8]
00a39a4b : MOV EDX,dword ptr [EBX]
00a39a4d : MOV EDX,dword ptr [EDX + 0x374]
00a39a53 : LEA ECX,[EAX + 0x11]
00a39a56 : PUSH ECX
00a39a57 : MOVZX ECX,byte ptr [EAX + 0x10]
00a39a5b : MOV EAX,dword ptr [EAX + 0xc]
00a39a5e : PUSH ECX
00a39a5f : PUSH EAX
00a39a60 : MOV ECX,EBX
00a39a62 : CALL EDX
00a39a64 : POP EDI
00a39a65 : POP ESI
00a39a66 : POP EBX
00a39a67 : MOV ESP,EBP
00a39a69 : POP EBP
00a39a6a : RET 0x4
