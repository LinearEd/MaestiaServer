PROGRAM  : Maestia.exe
FUNCTION : FUN_00415f10
ENTRY    : 00415f10
BODY     : [[00415f10, 00416079] [0041607d, 00416099] [004160db, 00416172] [00416190, 0041620d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00415f10(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  uint uStack_68;
  uint local_4c;
  uint local_48;
  undefined1 local_44 [40];
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7c384;
  local_10 = ExceptionList;
  uStack_68 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_68;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_4c = 0;
  }
  else {
    local_4c = (*(int *)(param_1 + 0xc) - iVar2) / 0x28;
  }
  iVar6 = *(int *)(param_1 + 8);
  iVar2 = (iVar6 - iVar2) / 0x28;
  local_1c = uStack_68;
  puVar1 = &uStack_68;
  if (iVar2 == 0x6666666) {
    iVar2 = FUN_00429be0();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_4c < uVar3) {
    if (0x6666666 - (local_4c >> 1) < local_4c) {
      local_4c = 0;
    }
    else {
      local_4c = local_4c + (local_4c >> 1);
    }
    if (local_4c < uVar3) {
      local_4c = uVar3;
    }
    iVar4 = FUN_00444990();
    local_8 = 0;
    FUN_00415480();
    FUN_00417100(*(undefined4 *)(param_1 + 4),param_2);
    FUN_00417100(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    iVar6 = *(int *)(param_1 + 4);
    iVar2 = (*(int *)(param_1 + 8) - iVar6) / 0x28 + 1;
    if (iVar6 != 0) {
      FUN_00417890(iVar6,iVar2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = iVar4 + local_4c * 0x28;
    *(int *)(param_1 + 8) = iVar4 + iVar2 * 0x28;
    *(int *)(param_1 + 4) = iVar4;
  }
  else {
    iVar6 = iVar6 - param_2;
    iVar2 = iVar6 >> 0x1f;
    if (iVar6 / 0x28 + iVar2 == iVar2) {
      FUN_00416650(local_44);
      local_8 = 2;
      FUN_00417100(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00415480();
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x28;
      FUN_004178f0(*(int *)(param_1 + 8) + -0x28);
    }
    else {
      FUN_00416650(local_44);
      local_8 = 5;
      uVar5 = FUN_00417100(*(int *)(param_1 + 8) + -0x28,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar5;
      local_48 = param_3 & 0xffffff00;
      FUN_00417e50(param_2,local_48,local_48,local_48);
      FUN_004178f0(param_2 + 0x28);
    }
    local_8 = 0xffffffff;
    FUN_00414770(local_44);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_1c ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00415f10 : PUSH EBP
00415f11 : MOV EBP,ESP
00415f13 : PUSH -0x1
00415f15 : PUSH 0xb7c384
00415f1a : MOV EAX,FS:[0x0]
00415f20 : PUSH EAX
00415f21 : SUB ESP,0x48
00415f24 : MOV EAX,[0x00d66fa0]
00415f29 : XOR EAX,EBP
00415f2b : MOV dword ptr [EBP + -0x18],EAX
00415f2e : PUSH EBX
00415f2f : PUSH ESI
00415f30 : PUSH EDI
00415f31 : PUSH EAX
00415f32 : LEA EAX,[EBP + -0xc]
00415f35 : MOV FS:[0x0],EAX
00415f3b : MOV dword ptr [EBP + -0x10],ESP
00415f3e : MOV EBX,dword ptr [EBP + 0x8]
00415f41 : MOV dword ptr [EBP + -0x4c],EBX
00415f44 : MOV EAX,dword ptr [EBP + 0x10]
00415f47 : MOV dword ptr [EBP + -0x44],EAX
00415f4a : MOV ECX,dword ptr [EBX + 0x4]
00415f4d : TEST ECX,ECX
00415f4f : JNZ 0x00415f55
00415f51 : XOR ESI,ESI
00415f53 : JMP 0x00415f6d
00415f55 : MOV EDX,dword ptr [EBX + 0xc]
00415f58 : SUB EDX,ECX
00415f5a : MOV EAX,0x66666667
00415f5f : IMUL EDX
00415f61 : SAR EDX,0x4
00415f64 : MOV EAX,EDX
00415f66 : SHR EAX,0x1f
00415f69 : ADD EAX,EDX
00415f6b : MOV ESI,EAX
00415f6d : MOV EDI,dword ptr [EBX + 0x8]
00415f70 : MOV EDX,EDI
00415f72 : SUB EDX,ECX
00415f74 : MOV EAX,0x66666667
00415f79 : IMUL EDX
00415f7b : SAR EDX,0x4
00415f7e : MOV EAX,EDX
00415f80 : SHR EAX,0x1f
00415f83 : ADD EAX,EDX
00415f85 : MOV ECX,0x6666666
00415f8a : SUB ECX,EAX
00415f8c : CMP ECX,0x1
00415f8f : JNC 0x00415f96
00415f91 : CALL 0x00429be0
00415f96 : INC EAX
00415f97 : CMP ESI,EAX
00415f99 : JNC 0x004160db
00415f9f : MOV ECX,ESI
00415fa1 : SHR ECX,0x1
00415fa3 : MOV EDX,0x6666666
00415fa8 : SUB EDX,ECX
00415faa : CMP EDX,ESI
00415fac : JNC 0x00415fb7
00415fae : XOR EDI,EDI
00415fb0 : MOV dword ptr [EBP + -0x48],EDI
00415fb3 : MOV ESI,EDI
00415fb5 : JMP 0x00415fbe
00415fb7 : ADD ESI,ECX
00415fb9 : MOV dword ptr [EBP + -0x48],ESI
00415fbc : XOR EDI,EDI
00415fbe : CMP ESI,EAX
00415fc0 : JNC 0x00415fc7
00415fc2 : MOV dword ptr [EBP + -0x48],EAX
00415fc5 : MOV ESI,EAX
00415fc7 : MOV ECX,ESI
00415fc9 : CALL 0x00444990
00415fce : MOV ESI,EAX
00415fd0 : MOV dword ptr [EBP + -0x54],ESI
00415fd3 : MOV ECX,dword ptr [EBP + 0xc]
00415fd6 : SUB ECX,dword ptr [EBX + 0x4]
00415fd9 : MOV EAX,0x66666667
00415fde : IMUL ECX
00415fe0 : SAR EDX,0x4
00415fe3 : MOV EAX,EDX
00415fe5 : SHR EAX,0x1f
00415fe8 : ADD EAX,EDX
00415fea : MOV dword ptr [EBP + -0x4c],EAX
00415fed : MOV dword ptr [EBP + -0x50],EDI
00415ff0 : MOV dword ptr [EBP + -0x4],EDI
00415ff3 : LEA EAX,[EAX + EAX*0x4]
00415ff6 : LEA EDI,[ESI + EAX*0x8]
00415ff9 : MOV EDX,dword ptr [EBP + -0x44]
00415ffc : MOV ESI,0x1
00416001 : CALL 0x00415480
00416006 : MOV dword ptr [EBP + -0x50],ESI
00416009 : MOV ECX,dword ptr [EBP + 0xc]
0041600c : PUSH ECX
0041600d : MOV EDX,dword ptr [EBX + 0x4]
00416010 : PUSH EDX
00416011 : MOV ESI,dword ptr [EBP + -0x54]
00416014 : MOV EDX,ESI
00416016 : CALL 0x00417100
0041601b : MOV dword ptr [EBP + -0x50],0x2
00416022 : MOV EAX,dword ptr [EBP + -0x4c]
00416025 : LEA EAX,[EAX + EAX*0x4 + 0x5]
00416029 : LEA EDX,[ESI + EAX*0x8]
0041602c : MOV ECX,dword ptr [EBX + 0x8]
0041602f : PUSH ECX
00416030 : MOV EAX,dword ptr [EBP + 0xc]
00416033 : PUSH EAX
00416034 : CALL 0x00417100
00416039 : MOV dword ptr [EBP + -0x4],0xffffffff
00416040 : MOV ECX,dword ptr [EBX + 0x8]
00416043 : MOV EDI,dword ptr [EBX + 0x4]
00416046 : SUB ECX,EDI
00416048 : MOV EAX,0x66666667
0041604d : IMUL ECX
0041604f : SAR EDX,0x4
00416052 : MOV ECX,EDX
00416054 : SHR ECX,0x1f
00416057 : LEA EDX,[EDX + ECX*0x1 + 0x1]
0041605b : MOV dword ptr [EBP + -0x44],EDX
0041605e : TEST EDI,EDI
00416060 : JZ 0x0041607d
00416062 : MOV EDX,dword ptr [EBP + -0x44]
00416065 : PUSH EDX
00416066 : PUSH EDI
00416067 : MOV EDI,dword ptr [EBX + 0x8]
0041606a : CALL 0x00417890
0041606f : ADD ESP,0x8
00416072 : MOV ECX,dword ptr [EBX + 0x4]
00416075 : CALL 0x006f04e0
0041607d : MOV EAX,dword ptr [EBP + -0x48]
00416080 : LEA EAX,[EAX + EAX*0x4]
00416083 : LEA ECX,[ESI + EAX*0x8]
00416086 : MOV dword ptr [EBX + 0xc],ECX
00416089 : LEA EDX,[EDX + EDX*0x4]
0041608c : LEA EAX,[ESI + EDX*0x8]
0041608f : MOV dword ptr [EBX + 0x8],EAX
00416092 : MOV dword ptr [EBX + 0x4],ESI
00416095 : JMP 0x004161f0
004160db : SUB EDI,dword ptr [EBP + 0xc]
004160de : MOV EAX,0x66666667
004160e3 : IMUL EDI
004160e5 : SAR EDX,0x4
004160e8 : MOV ECX,EDX
004160ea : SHR ECX,0x1f
004160ed : ADD ECX,EDX
004160ef : CMP ECX,0x1
004160f2 : MOV ECX,dword ptr [EBP + -0x44]
004160f5 : JNC 0x00416190
004160fb : LEA EDX,[EBP + -0x40]
004160fe : PUSH EDX
004160ff : CALL 0x00416650
00416104 : MOV dword ptr [EBP + -0x4],0x2
0041610b : MOV EAX,dword ptr [EBP + 0xc]
0041610e : LEA EDX,[EAX + 0x28]
00416111 : MOV ECX,dword ptr [EBX + 0x8]
00416114 : PUSH ECX
00416115 : PUSH EAX
00416116 : CALL 0x00417100
0041611b : MOV byte ptr [EBP + -0x4],0x3
0041611f : MOV EDI,dword ptr [EBX + 0x8]
00416122 : MOV ECX,EDI
00416124 : SUB ECX,dword ptr [EBP + 0xc]
00416127 : MOV EAX,0x66666667
0041612c : IMUL ECX
0041612e : SAR EDX,0x4
00416131 : MOV EAX,EDX
00416133 : SHR EAX,0x1f
00416136 : ADD EAX,EDX
00416138 : MOV ESI,0x1
0041613d : SUB ESI,EAX
0041613f : LEA EDX,[EBP + -0x40]
00416142 : CALL 0x00415480
00416147 : MOV dword ptr [EBP + -0x4],0x2
0041614e : ADD dword ptr [EBX + 0x8],0x28
00416152 : MOV EBX,dword ptr [EBX + 0x8]
00416155 : LEA EAX,[EBX + -0x28]
00416158 : PUSH EAX
00416159 : LEA EDI,[EBP + -0x40]
0041615c : MOV EAX,dword ptr [EBP + 0xc]
0041615f : CALL 0x004178f0
00416164 : ADD ESP,0x4
00416167 : MOV dword ptr [EBP + -0x4],0xffffffff
0041616e : MOV ECX,EDI
00416170 : PUSH ECX
00416171 : JMP 0x004161eb
00416190 : LEA EAX,[EBP + -0x40]
00416193 : PUSH EAX
00416194 : CALL 0x00416650
00416199 : MOV dword ptr [EBP + -0x4],0x5
004161a0 : MOV ESI,dword ptr [EBX + 0x8]
004161a3 : LEA EDI,[ESI + -0x28]
004161a6 : PUSH ESI
004161a7 : PUSH EDI
004161a8 : MOV EDX,ESI
004161aa : CALL 0x00417100
004161af : MOV dword ptr [EBX + 0x8],EAX
004161b2 : MOV byte ptr [EBP + -0x44],0x0
004161b6 : MOV ECX,dword ptr [EBP + -0x44]
004161b9 : PUSH ECX
004161ba : MOV EDX,dword ptr [EBP + -0x44]
004161bd : PUSH EDX
004161be : MOV EAX,dword ptr [EBP + -0x44]
004161c1 : PUSH EAX
004161c2 : MOV ECX,dword ptr [EBP + 0xc]
004161c5 : PUSH ECX
004161c6 : MOV EAX,ESI
004161c8 : MOV ECX,EDI
004161ca : CALL 0x00417e50
004161cf : MOV EAX,dword ptr [EBP + 0xc]
004161d2 : LEA EDX,[EAX + 0x28]
004161d5 : PUSH EDX
004161d6 : LEA EDI,[EBP + -0x40]
004161d9 : CALL 0x004178f0
004161de : ADD ESP,0x14
004161e1 : MOV dword ptr [EBP + -0x4],0xffffffff
004161e8 : MOV EAX,EDI
004161ea : PUSH EAX
004161eb : CALL 0x00414770
004161f0 : MOV ECX,dword ptr [EBP + -0xc]
004161f3 : MOV dword ptr FS:[0x0],ECX
004161fa : POP ECX
004161fb : POP EDI
004161fc : POP ESI
004161fd : POP EBX
004161fe : MOV ECX,dword ptr [EBP + -0x18]
00416201 : XOR ECX,EBP
00416203 : CALL 0x00633e6b
00416208 : MOV ESP,EBP
0041620a : POP EBP
0041620b : RET 0xc
