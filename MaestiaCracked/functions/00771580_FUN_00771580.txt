PROGRAM  : Maestia.exe
FUNCTION : FUN_00771580
ENTRY    : 00771580
BODY     : [[00771580, 00771a6a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00771580(float *param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float *in_EAX;
  float *in_ECX;
  float unaff_ESI;
  float *unaff_EDI;
  float10 fVar4;
  double dVar5;
  float in_XMM2_Da;
  float in_XMM4_Da;
  float fVar6;
  undefined8 *puStack_98;
  undefined8 *local_94;
  float local_84;
  float local_80;
  float local_7c;
  float local_78;
  float local_74;
  float local_70;
  float local_6c;
  float fStack_68;
  float local_64 [2];
  undefined8 local_5c;
  float local_54;
  undefined4 local_50;
  
  local_70 = DAT_00d72c24;
  in_ECX[0x4421] = in_XMM2_Da;
  in_ECX[0x4422] = in_XMM4_Da;
  *in_ECX = *unaff_EDI;
  local_84 = in_XMM2_Da * local_70;
  in_ECX[1] = unaff_EDI[1];
  local_70 = in_XMM4_Da * local_70;
  in_ECX[2] = unaff_EDI[2];
  in_ECX[0x4427] = *in_EAX;
  local_80 = 0.0;
  in_ECX[0x4428] = in_EAX[1];
  local_7c = 0.0;
  local_78 = 0.0;
  in_ECX[0x4429] = in_EAX[2];
  fVar6 = in_EAX[1];
  fVar1 = param_1[1];
  fVar2 = *in_EAX;
  fVar3 = *param_1;
  *(ulonglong *)(in_ECX + 0x4424) =
       CONCAT44(param_1[2] * fVar2 - fVar3 * in_EAX[2],fVar1 * in_EAX[2] - param_1[2] * fVar6);
  in_ECX[0x4426] = fVar3 * fVar6 - fVar1 * fVar2;
  local_74 = 0.0;
  local_50 = 0;
  local_6c = param_1[2] - param_1[1] * 0.0;
  fVar6 = *param_1 * 0.0;
  fStack_68 = fVar6 - param_1[2] * 0.0;
  local_64[0] = param_1[1] * 0.0 - *param_1;
  local_5c = CONCAT44(fStack_68,local_6c);
  local_94 = (undefined8 *)(local_64[0] * local_64[0] + fStack_68 * fStack_68 + local_6c * local_6c)
  ;
  puStack_98 = (undefined8 *)0x771703;
  local_54 = local_64[0];
  fVar4 = (float10)FUN_0040f460();
  if (((float10)0.0001 < fVar4) && (ABS(param_1[2] * 0.0 + fVar6 + param_1[1]) <= 1.0)) {
    puStack_98 = &local_5c;
    local_94 = puStack_98;
    D3DXVec3Normalize();
    dVar5 = (double)unaff_ESI;
    FUN_00b0abbf();
    D3DXMatrixRotationAxis((int)&local_5c + 4,local_64,(float)dVar5);
    local_80 = 0.0;
    local_7c = 0.0;
    local_78 = 0.0;
    local_74 = 0.0;
    D3DXVec3Transform(&local_80,&puStack_98,local_64);
    local_84 = 0.0;
    local_80 = 0.0;
    D3DXVec3Transform(&stack0xffffff74,&puStack_98,&local_70);
    local_78 = local_6c;
    local_74 = fStack_68;
    local_70 = local_64[0];
  }
  in_ECX[0x1f] = 2.8026e-45;
  in_ECX[0x1e] = 5.60519e-45;
  *(undefined2 *)((int)in_ECX + 0x9082) = 2;
  *(undefined2 *)(in_ECX + 0x2421) = 1;
  *(undefined2 *)(in_ECX + 0x2420) = 0;
  *(undefined2 *)((int)in_ECX + 0x9086) = 0;
  *(undefined2 *)(in_ECX + 0x2422) = 3;
  *(undefined2 *)((int)in_ECX + 0x908a) = 2;
  in_ECX[0x20] = *unaff_EDI - local_84;
  in_ECX[0x21] = unaff_EDI[1] - local_80;
  in_ECX[0x22] = unaff_EDI[2] - local_7c;
  in_ECX[0x20] = in_ECX[0x20] + local_78;
  in_ECX[0x21] = in_ECX[0x21] + local_74;
  in_ECX[0x22] = in_ECX[0x22] + local_70;
  in_ECX[0x23] = *unaff_EDI - local_84;
  in_ECX[0x24] = unaff_EDI[1] - local_80;
  in_ECX[0x25] = unaff_EDI[2] - local_7c;
  in_ECX[0x23] = in_ECX[0x23] - local_78;
  in_ECX[0x24] = in_ECX[0x24] - local_74;
  in_ECX[0x25] = in_ECX[0x25] - local_70;
  in_ECX[0x26] = *unaff_EDI + local_84;
  in_ECX[0x27] = local_80 + unaff_EDI[1];
  in_ECX[0x28] = local_7c + unaff_EDI[2];
  in_ECX[0x26] = in_ECX[0x26] - local_78;
  in_ECX[0x27] = in_ECX[0x27] - local_74;
  in_ECX[0x28] = in_ECX[0x28] - local_70;
  fVar6 = *unaff_EDI;
  in_ECX[0x29] = fVar6 + local_84;
  in_ECX[0x2a] = local_80 + unaff_EDI[1];
  in_ECX[0x2b] = local_7c + unaff_EDI[2];
  in_ECX[0x29] = fVar6 + local_84 + local_78;
  local_94 = (undefined8 *)0x3f800000;
  puStack_98 = (undefined8 *)0x3f800000;
  in_ECX[0x2a] = in_ECX[0x2a] + local_74;
  in_ECX[0x2b] = in_ECX[0x2b] + local_70;
  FUN_00770210(0,0);
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00771580 : PUSH EBP
00771581 : MOV EBP,ESP
00771583 : AND ESP,0xfffffff0
00771586 : SUB ESP,0x78
00771589 : MOVSS XMM3,dword ptr [0x00d72c24]
00771591 : PUSH EBX
00771592 : MOV EBX,dword ptr [EBP + 0x8]
00771595 : PUSH ESI
00771596 : MOV ESI,ECX
00771598 : MOVSS dword ptr [ESI + 0x11084],XMM2
007715a0 : MOVSS dword ptr [ESI + 0x11088],XMM4
007715a8 : FLD float ptr [EDI]
007715aa : FSTP float ptr [ESI]
007715ac : MOVAPS XMM0,XMM2
007715af : FLD float ptr [EDI + 0x4]
007715b2 : MULSS XMM0,XMM3
007715b6 : FSTP float ptr [ESI + 0x4]
007715b9 : MOVAPS XMM1,XMM4
007715bc : FLD float ptr [EDI + 0x8]
007715bf : MULSS XMM1,XMM3
007715c3 : FSTP float ptr [ESI + 0x8]
007715c6 : MOVSS dword ptr [ESP + 0x20],XMM1
007715cc : FLD float ptr [EAX]
007715ce : MOVSS dword ptr [ESP + 0xc],XMM0
007715d4 : XORPS XMM0,XMM0
007715d7 : FSTP float ptr [ESI + 0x1109c]
007715dd : FLD float ptr [EAX + 0x4]
007715e0 : MOVSS dword ptr [ESP + 0x10],XMM0
007715e6 : FSTP float ptr [ESI + 0x110a0]
007715ec : MOVSS dword ptr [ESP + 0x14],XMM0
007715f2 : FLD float ptr [EAX + 0x8]
007715f5 : MOVSS dword ptr [ESP + 0x18],XMM0
007715fb : FSTP float ptr [ESI + 0x110a4]
00771601 : MOVSS XMM4,dword ptr [EAX + 0x8]
00771606 : MOVSS XMM1,dword ptr [EBX + 0x8]
0077160b : MOVSS XMM5,dword ptr [EAX + 0x4]
00771610 : MOVSS XMM3,dword ptr [EBX + 0x4]
00771615 : MOVAPS XMM6,XMM1
00771618 : MOVAPS XMM2,XMM3
0077161b : MULSS XMM2,XMM4
0077161f : MULSS XMM6,XMM5
00771623 : SUBSS XMM2,XMM6
00771627 : MOVSS XMM6,dword ptr [EAX]
0077162b : MOVSS dword ptr [ESP + 0x24],XMM2
00771631 : MOVSS XMM2,dword ptr [EBX]
00771635 : MOVAPS XMM7,XMM2
00771638 : MULSS XMM2,XMM5
0077163c : MULSS XMM1,XMM6
00771640 : MULSS XMM7,XMM4
00771644 : SUBSS XMM1,XMM7
00771648 : MOVSS dword ptr [ESP + 0x28],XMM1
0077164e : MOVQ XMM1,qword ptr [ESP + 0x24]
00771654 : MOVQ qword ptr [ESI + 0x11090],XMM1
0077165c : MULSS XMM3,XMM6
00771660 : SUBSS XMM2,XMM3
00771664 : MOVSS dword ptr [ESP + 0x2c],XMM2
0077166a : MOV EAX,dword ptr [ESP + 0x2c]
0077166e : MOV dword ptr [ESI + 0x11098],EAX
00771674 : MOVSS XMM2,dword ptr [EBX + 0x8]
00771679 : MOVSS XMM5,dword ptr [EBX]
0077167d : MOVSS XMM1,dword ptr [EBX + 0x4]
00771682 : MOVAPS XMM3,XMM2
00771685 : MULSS XMM1,XMM0
00771689 : MULSS XMM2,XMM0
0077168d : MOVSS dword ptr [ESP + 0x1c],XMM0
00771693 : MOVSS dword ptr [ESP + 0x40],XMM0
00771699 : SUBSS XMM3,XMM1
0077169d : MOVAPS XMM4,XMM5
007716a0 : MULSS XMM4,XMM0
007716a4 : MOVAPS XMM0,XMM4
007716a7 : SUBSS XMM0,XMM2
007716ab : SUBSS XMM1,XMM5
007716af : MOVSS dword ptr [ESP + 0x24],XMM3
007716b5 : MOVSS dword ptr [ESP + 0x28],XMM0
007716bb : MOVQ XMM2,qword ptr [ESP + 0x24]
007716c1 : MOVQ qword ptr [ESP + 0x34],XMM2
007716c7 : MOVAPS XMM2,XMM1
007716ca : MOVSS dword ptr [ESP + 0x2c],XMM1
007716d0 : MOV ECX,dword ptr [ESP + 0x2c]
007716d4 : MULSS XMM2,XMM1
007716d8 : MOVAPS XMM1,XMM0
007716db : MULSS XMM1,XMM0
007716df : MOVSS dword ptr [ESP + 0x8],XMM4
007716e5 : MOV dword ptr [ESP + 0x3c],ECX
007716e9 : ADDSS XMM2,XMM1
007716ed : MOVAPS XMM0,XMM3
007716f0 : MULSS XMM0,XMM3
007716f4 : PUSH ECX
007716f5 : ADDSS XMM2,XMM0
007716f9 : MOVSS dword ptr [ESP],XMM2
007716fe : CALL 0x0040f460
00771703 : FLD float ptr [0x00cdf398]
00771709 : FXCH
0077170b : ADD ESP,0x4
0077170e : FCOMIP ST0,ST1
00771710 : FSTP ST0
00771712 : JBE 0x0077182b
00771718 : MOVSS XMM0,dword ptr [EBX + 0x8]
0077171d : MULSS XMM0,dword ptr [0x00b9b0b4]
00771725 : ADDSS XMM0,dword ptr [ESP + 0x8]
0077172b : ADDSS XMM0,dword ptr [EBX + 0x4]
00771730 : MOVSS XMM1,dword ptr [0x00cdf350]
00771738 : MOVSS dword ptr [ESP + 0x8],XMM0
0077173e : ANDPS XMM0,XMM1
00771741 : MOVSS XMM1,dword ptr [0x00c10fc4]
00771749 : COMISS XMM1,XMM0
0077174c : JC 0x0077182b
00771752 : LEA EDX,[ESP + 0x34]
00771756 : PUSH EDX
00771757 : MOV EAX,EDX
00771759 : PUSH EAX
0077175a : CALL 0x004ff722
0077175f : CVTSS2SD XMM0,dword ptr [ESP + 0x8]
00771765 : CALL 0x00b0abbf
0077176a : PUSH ECX
0077176b : CVTSD2SS XMM0,XMM0
0077176f : MOVSS dword ptr [ESP],XMM0
00771774 : LEA ECX,[ESP + 0x38]
00771778 : PUSH ECX
00771779 : LEA EDX,[ESP + 0x48]
0077177d : PUSH EDX
0077177e : CALL 0x004ff746
00771783 : XORPS XMM0,XMM0
00771786 : LEA EAX,[ESP + 0x40]
0077178a : PUSH EAX
0077178b : LEA ECX,[ESP + 0x10]
0077178f : PUSH ECX
00771790 : LEA EDX,[ESP + 0x2c]
00771794 : PUSH EDX
00771795 : MOVSS dword ptr [ESP + 0x30],XMM0
0077179b : MOVSS dword ptr [ESP + 0x34],XMM0
007717a1 : MOVSS dword ptr [ESP + 0x38],XMM0
007717a7 : MOVSS dword ptr [ESP + 0x3c],XMM0
007717ad : CALL 0x004ff75e
007717b2 : MOVSS XMM0,dword ptr [ESP + 0x24]
007717b8 : MOVSS dword ptr [ESP + 0xc],XMM0
007717be : MOVSS XMM0,dword ptr [ESP + 0x28]
007717c4 : LEA EAX,[ESP + 0x40]
007717c8 : PUSH EAX
007717c9 : MOVSS dword ptr [ESP + 0x14],XMM0
007717cf : MOVSS XMM0,dword ptr [ESP + 0x30]
007717d5 : LEA ECX,[ESP + 0x1c]
007717d9 : PUSH ECX
007717da : LEA EDX,[ESP + 0x2c]
007717de : MOVSS dword ptr [ESP + 0x1c],XMM0
007717e4 : XORPS XMM0,XMM0
007717e7 : PUSH EDX
007717e8 : MOVSS dword ptr [ESP + 0x30],XMM0
007717ee : MOVSS dword ptr [ESP + 0x34],XMM0
007717f4 : MOVSS dword ptr [ESP + 0x38],XMM0
007717fa : MOVSS dword ptr [ESP + 0x3c],XMM0
00771800 : CALL 0x004ff75e
00771805 : MOVSS XMM2,dword ptr [ESP + 0x24]
0077180b : MOVSS XMM3,dword ptr [ESP + 0x28]
00771811 : MOVSS XMM4,dword ptr [ESP + 0x2c]
00771817 : MOVSS dword ptr [ESP + 0x18],XMM2
0077181d : MOVSS dword ptr [ESP + 0x1c],XMM3
00771823 : MOVSS dword ptr [ESP + 0x20],XMM4
00771829 : JMP 0x0077183d
0077182b : MOVSS XMM4,dword ptr [ESP + 0x20]
00771831 : MOVSS XMM3,dword ptr [ESP + 0x1c]
00771837 : MOVSS XMM2,dword ptr [ESP + 0x18]
0077183d : MOV dword ptr [ESI + 0x7c],0x2
00771844 : MOV dword ptr [ESI + 0x78],0x4
0077184b : MOVSS XMM5,dword ptr [ESP + 0xc]
00771851 : MOVSS XMM1,dword ptr [ESP + 0x10]
00771857 : MOVSS XMM0,dword ptr [ESP + 0x14]
0077185d : MOV ECX,0x2
00771862 : MOV word ptr [ESI + 0x9082],CX
00771869 : MOV EDX,0x1
0077186e : MOV word ptr [ESI + 0x9084],DX
00771875 : XOR EAX,EAX
00771877 : MOV word ptr [ESI + 0x9080],AX
0077187e : MOV word ptr [ESI + 0x9086],AX
00771885 : MOV ECX,0x3
0077188a : MOV word ptr [ESI + 0x9088],CX
00771891 : MOV EDX,0x2
00771896 : MOV word ptr [ESI + 0x908a],DX
0077189d : MOVSS XMM6,dword ptr [EDI]
007718a1 : SUBSS XMM6,XMM5
007718a5 : MOVSS dword ptr [ESI + 0x80],XMM6
007718ad : MOVSS XMM6,dword ptr [EDI + 0x4]
007718b2 : SUBSS XMM6,XMM1
007718b6 : MOVSS dword ptr [ESI + 0x84],XMM6
007718be : MOVSS XMM6,dword ptr [EDI + 0x8]
007718c3 : SUBSS XMM6,XMM0
007718c7 : MOVSS dword ptr [ESI + 0x88],XMM6
007718cf : MOVSS XMM6,dword ptr [ESI + 0x80]
007718d7 : ADDSS XMM6,XMM2
007718db : MOVSS dword ptr [ESI + 0x80],XMM6
007718e3 : MOVSS XMM6,dword ptr [ESI + 0x84]
007718eb : ADDSS XMM6,XMM3
007718ef : MOVSS dword ptr [ESI + 0x84],XMM6
007718f7 : MOVSS XMM6,dword ptr [ESI + 0x88]
007718ff : ADDSS XMM6,XMM4
00771903 : MOVSS dword ptr [ESI + 0x88],XMM6
0077190b : MOVSS XMM6,dword ptr [EDI]
0077190f : SUBSS XMM6,XMM5
00771913 : MOVSS dword ptr [ESI + 0x8c],XMM6
0077191b : MOVSS XMM6,dword ptr [EDI + 0x4]
00771920 : SUBSS XMM6,XMM1
00771924 : MOVSS dword ptr [ESI + 0x90],XMM6
0077192c : MOVSS XMM6,dword ptr [EDI + 0x8]
00771931 : SUBSS XMM6,XMM0
00771935 : MOVSS dword ptr [ESI + 0x94],XMM6
0077193d : MOVSS XMM6,dword ptr [ESI + 0x8c]
00771945 : SUBSS XMM6,XMM2
00771949 : MOVSS dword ptr [ESI + 0x8c],XMM6
00771951 : MOVSS XMM6,dword ptr [ESI + 0x90]
00771959 : SUBSS XMM6,XMM3
0077195d : MOVSS dword ptr [ESI + 0x90],XMM6
00771965 : MOVSS XMM6,dword ptr [ESI + 0x94]
0077196d : SUBSS XMM6,XMM4
00771971 : MOVSS dword ptr [ESI + 0x94],XMM6
00771979 : MOVSS XMM6,dword ptr [EDI]
0077197d : ADDSS XMM6,XMM5
00771981 : MOVSS dword ptr [ESI + 0x98],XMM6
00771989 : MOVAPS XMM6,XMM1
0077198c : ADDSS XMM6,dword ptr [EDI + 0x4]
00771991 : MOVSS dword ptr [ESI + 0x9c],XMM6
00771999 : MOVAPS XMM6,XMM0
0077199c : ADDSS XMM6,dword ptr [EDI + 0x8]
007719a1 : MOVSS dword ptr [ESI + 0xa0],XMM6
007719a9 : MOVSS XMM6,dword ptr [ESI + 0x98]
007719b1 : SUBSS XMM6,XMM2
007719b5 : MOVSS dword ptr [ESI + 0x98],XMM6
007719bd : MOVSS XMM6,dword ptr [ESI + 0x9c]
007719c5 : SUBSS XMM6,XMM3
007719c9 : MOVSS dword ptr [ESI + 0x9c],XMM6
007719d1 : MOVSS XMM6,dword ptr [ESI + 0xa0]
007719d9 : SUBSS XMM6,XMM4
007719dd : MOVSS dword ptr [ESI + 0xa0],XMM6
007719e5 : MOVSS XMM6,dword ptr [EDI]
007719e9 : ADDSS XMM6,XMM5
007719ed : MOVSS dword ptr [ESI + 0xa4],XMM6
007719f5 : ADDSS XMM1,dword ptr [EDI + 0x4]
007719fa : MOVSS dword ptr [ESI + 0xa8],XMM1
00771a02 : ADDSS XMM0,dword ptr [EDI + 0x8]
00771a07 : MOVSS dword ptr [ESI + 0xac],XMM0
00771a0f : MOVAPS XMM0,XMM6
00771a12 : ADDSS XMM0,XMM2
00771a16 : MOVSS dword ptr [ESI + 0xa4],XMM0
00771a1e : MOVSS XMM0,dword ptr [ESI + 0xa8]
00771a26 : FLD1
00771a28 : SUB ESP,0x10
00771a2b : FST float ptr [ESP + 0xc]
00771a2f : ADDSS XMM0,XMM3
00771a33 : FSTP float ptr [ESP + 0x8]
00771a37 : MOVSS dword ptr [ESI + 0xa8],XMM0
00771a3f : FLDZ
00771a41 : MOVSS XMM0,dword ptr [ESI + 0xac]
00771a49 : FST float ptr [ESP + 0x4]
00771a4d : ADDSS XMM0,XMM4
00771a51 : FSTP float ptr [ESP]
00771a54 : MOVSS dword ptr [ESI + 0xac],XMM0
00771a5c : CALL 0x00770210
00771a61 : POP ESI
00771a62 : MOV AL,0x1
00771a64 : POP EBX
00771a65 : MOV ESP,EBP
00771a67 : POP EBP
00771a68 : RET 0x4
