PROGRAM  : Maestia.exe
FUNCTION : FUN_00804330
ENTRY    : 00804330
BODY     : [[00804330, 0080459c] [008045a0, 008045c9] [008045d0, 00804958]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00804330(int *param_1,int *param_2,int *param_3,int *param_4)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  float *pfVar4;
  int iVar5;
  int *piVar6;
  uint *puVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int unaff_ESI;
  undefined4 *puVar11;
  int *piVar12;
  int local_8;
  int local_4;
  
  iVar2 = *param_1 + *param_2 + *param_3;
  if (0 < iVar2) {
    uVar3 = FUN_00457a20(iVar2);
    *(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0xa8) = uVar3;
    *(int *)(*(int *)(unaff_ESI + 0xc) + 8) = *param_1;
    if (*param_1 < 1) {
      uVar3 = 0;
    }
    else {
      uVar3 = *(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0xa8);
    }
    *(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0xc) = uVar3;
    *(int *)(*(int *)(unaff_ESI + 0xc) + 0x10) = *param_2;
    if (*param_2 < 1) {
      iVar2 = 0;
    }
    else {
      iVar2 = *param_1 * 0x40 + *(int *)(*(int *)(unaff_ESI + 0xc) + 0xa8);
    }
    *(int *)(*(int *)(unaff_ESI + 0xc) + 0x14) = iVar2;
    *(int *)(*(int *)(unaff_ESI + 0xc) + 0x18) = *param_3;
    if (*param_3 < 1) {
      iVar2 = 0;
    }
    else {
      iVar2 = (*param_1 + *param_2) * 0x40 + *(int *)(*(int *)(unaff_ESI + 0xc) + 0xa8);
    }
    *(int *)(*(int *)(unaff_ESI + 0xc) + 0x1c) = iVar2;
    local_8 = 0;
    do {
      iVar2 = *(int *)(unaff_ESI + 0xc);
      iVar8 = *(int *)(iVar2 + 0xc);
      if (local_8 == 1) {
        iVar8 = *(int *)(iVar2 + 0x14);
        piVar12 = param_2;
      }
      else {
        piVar12 = param_1;
        if (local_8 == 2) {
          iVar8 = *(int *)(iVar2 + 0x1c);
          piVar12 = param_3;
        }
      }
      if ((iVar8 != 0) && (local_4 = 0, 0 < *piVar12)) {
        puVar11 = (undefined4 *)(iVar8 + 0x14);
        piVar6 = piVar12 + 1;
        do {
          puVar11[-1] = *piVar6;
          *puVar11 = *(undefined4 *)(unaff_ESI + 0x18);
          *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + *piVar6 * 0xc;
          puVar11[1] = *(undefined4 *)(unaff_ESI + 0x18);
          *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + *piVar6 * 0xc;
          puVar11[2] = *(undefined4 *)(unaff_ESI + 0x30);
          iVar2 = *(int *)(unaff_ESI + 0x30) + *piVar6 * 3;
          *(int *)(unaff_ESI + 0x30) = iVar2;
          if (*(char *)(unaff_ESI + 0x60) != '\0') {
            puVar11[3] = iVar2;
            *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + *piVar6 * 3;
            puVar11[4] = *(undefined4 *)(unaff_ESI + 0x30);
            *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + *piVar6 * 3;
          }
          puVar11[5] = *(undefined4 *)(unaff_ESI + 0x18);
          iVar2 = *(int *)(unaff_ESI + 0x18) + *piVar6 * 8;
          *(int *)(unaff_ESI + 0x18) = iVar2;
          if ((char)piVar6[2] == '\0') {
            puVar11[6] = 0;
          }
          else {
            puVar11[6] = iVar2;
            *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + *piVar6 * 8;
          }
          if (DAT_00da98bf != *(char *)(unaff_ESI + 0x5e)) {
            iVar2 = 0;
            pfVar4 = (float *)(puVar11[5] + 4);
            if (0 < *piVar6) {
              do {
                *pfVar4 = 1.0 - *pfVar4;
                iVar2 = iVar2 + 1;
                pfVar4 = pfVar4 + 2;
              } while (iVar2 < *piVar6);
            }
            if (puVar11[6] != 0) {
              iVar2 = 0;
              pfVar4 = (float *)(puVar11[6] + 4);
              if (0 < *piVar6) {
                do {
                  *pfVar4 = 1.0 - *pfVar4;
                  iVar2 = iVar2 + 1;
                  pfVar4 = pfVar4 + 2;
                } while (iVar2 < *piVar6);
              }
            }
          }
          puVar11[7] = *(undefined4 *)(unaff_ESI + 0x30);
          *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + *piVar6;
          if (*(char *)(unaff_ESI + 0x5f) != '\0') {
            puVar11[8] = piVar6[3];
            puVar11[9] = *(undefined4 *)(unaff_ESI + 0x30);
            *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + *piVar6 * 6;
            if (local_8 == 1) {
              puVar11[10] = *(undefined4 *)(unaff_ESI + 0x18);
              *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + *piVar6 * 8;
            }
          }
          puVar11[-5] = piVar6[1];
          if ((int)puVar11[-1] < 1) {
            puVar11[-4] = &DAT_01722328;
          }
          else {
            puVar11[-4] = *(undefined4 *)(unaff_ESI + 0x24);
            *(int *)(unaff_ESI + 0x24) = *(int *)(unaff_ESI + 0x24) + piVar6[1] * 0x14;
          }
          if ((int)puVar11[-1] < 0x10000) {
            puVar11[-3] = *(undefined4 *)(unaff_ESI + 0x3c);
            iVar2 = 0;
            if (0 < (int)puVar11[-5]) {
              iVar8 = 0;
              do {
                *(int *)(unaff_ESI + 0x3c) =
                     *(int *)(unaff_ESI + 0x3c) + *(int *)(iVar8 + 8 + puVar11[-4]) * 2;
                iVar2 = iVar2 + 1;
                iVar8 = iVar8 + 0x14;
              } while (iVar2 < (int)puVar11[-5]);
            }
          }
          else {
            iVar2 = 0;
            puVar11[-2] = *(undefined4 *)(unaff_ESI + 0x48);
            if (0 < (int)puVar11[-5]) {
              iVar8 = 0;
              do {
                *(int *)(unaff_ESI + 0x48) =
                     *(int *)(unaff_ESI + 0x48) + *(int *)(iVar8 + 8 + puVar11[-4]) * 4;
                iVar2 = iVar2 + 1;
                iVar8 = iVar8 + 0x14;
              } while (iVar2 < (int)puVar11[-5]);
            }
          }
          if (*(int *)(unaff_ESI + 0x58) != 0) {
            FUN_008042d0(unaff_ESI,*piVar6);
            FUN_008042d0(unaff_ESI,*piVar6);
            FUN_008041c0(unaff_ESI,*piVar6,0);
            if (*(char *)(unaff_ESI + 0x60) != '\0') {
              FUN_008041c0(unaff_ESI,*piVar6,0);
              FUN_008041c0(unaff_ESI,*piVar6,0);
            }
            if (*(char *)(unaff_ESI + 0x5f) != '\0') {
              FUN_008041c0(unaff_ESI,*piVar6,3);
            }
          }
          local_4 = local_4 + 1;
          piVar6 = piVar6 + 0x2c;
          puVar11 = puVar11 + 0x10;
        } while (local_4 < *piVar12);
      }
      local_8 = local_8 + 1;
    } while (local_8 < 3);
  }
  *(int *)(*(int *)(unaff_ESI + 0xc) + 0x20) = *param_4;
  if (0 < *param_4) {
    uVar3 = FUN_00457b20(*(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0x20));
    *(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0x24) = uVar3;
    param_3 = (int *)0x0;
    if (0 < *(int *)(*(int *)(unaff_ESI + 0xc) + 0x20)) {
      param_1 = param_4 + 1;
      param_2 = (int *)0x0;
      do {
        piVar12 = (int *)(*(int *)(*(int *)(unaff_ESI + 0xc) + 0x24) + (int)param_2);
        iVar2 = *param_1;
        *piVar12 = iVar2;
        if (iVar2 < 1) {
          piVar12[1] = (int)&DAT_01722328;
        }
        else {
          piVar12[1] = *(int *)(unaff_ESI + 0x24);
          *(int *)(unaff_ESI + 0x24) = *(int *)(unaff_ESI + 0x24) + iVar2 * 0x14;
        }
        iVar2 = 0;
        iVar10 = 0;
        iVar8 = 0;
        iVar5 = 0;
        if (1 < *param_1) {
          piVar6 = (int *)(piVar12[1] + 0x1c);
          iVar9 = (*param_1 - 2U >> 1) + 1;
          iVar5 = iVar9 * 2;
          iVar2 = 0;
          do {
            iVar10 = iVar10 + piVar6[-5];
            iVar2 = iVar2 + *piVar6;
            piVar6 = piVar6 + 10;
            iVar9 = iVar9 + -1;
          } while (iVar9 != 0);
        }
        if (iVar5 < *param_1) {
          iVar8 = *(int *)(piVar12[1] + 8 + iVar5 * 0x14);
        }
        iVar8 = iVar8 + iVar2 + iVar10;
        piVar12[2] = iVar8;
        piVar12[3] = *(int *)(unaff_ESI + 0x18);
        iVar5 = iVar8 * 0xc;
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar5;
        piVar12[4] = *(int *)(unaff_ESI + 0x18);
        iVar2 = iVar8 * 8;
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar2;
        piVar12[5] = *(int *)(unaff_ESI + 0x18);
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar2;
        piVar12[6] = *(int *)(unaff_ESI + 0x18);
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar2;
        piVar12[7] = *(int *)(unaff_ESI + 0x30);
        *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + iVar5;
        if (*(char *)(unaff_ESI + 0x60) != '\0') {
          piVar12[8] = *(int *)(unaff_ESI + 0x30);
          *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + iVar5;
          piVar12[9] = *(int *)(unaff_ESI + 0x30);
          *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + iVar5;
        }
        cVar1 = DAT_00da98bf;
        piVar12[10] = *(int *)(unaff_ESI + 0x18);
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar8 * 0x20;
        if (cVar1 != *(char *)(unaff_ESI + 0x5e)) {
          iVar2 = iVar8 * 4;
          pfVar4 = (float *)(piVar12[10] + 4);
          iVar5 = 0;
          if (3 < iVar2) {
            iVar10 = (iVar2 - 4U >> 2) + 1;
            iVar5 = iVar10 * 4;
            do {
              *pfVar4 = 1.0 - *pfVar4;
              pfVar4[2] = 1.0 - pfVar4[2];
              pfVar4[4] = 1.0 - pfVar4[4];
              pfVar4[6] = 1.0 - pfVar4[6];
              pfVar4 = pfVar4 + 8;
              iVar10 = iVar10 + -1;
            } while (iVar10 != 0);
          }
          if (iVar5 < iVar2) {
            iVar2 = iVar2 - iVar5;
            do {
              *pfVar4 = 1.0 - *pfVar4;
              pfVar4 = pfVar4 + 2;
              iVar2 = iVar2 + -1;
            } while (iVar2 != 0);
          }
        }
        piVar12[0xb] = *(int *)(unaff_ESI + 0x30);
        *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + iVar8;
        if (*(char *)(unaff_ESI + 0x5f) != '\0') {
          piVar12[0xc] = param_1[1];
          piVar12[0xd] = *(int *)(unaff_ESI + 0x30);
          *(int *)(unaff_ESI + 0x30) = *(int *)(unaff_ESI + 0x30) + iVar8 * 5;
        }
        piVar12[0xe] = *(int *)(unaff_ESI + 0x18);
        *(int *)(unaff_ESI + 0x18) = *(int *)(unaff_ESI + 0x18) + iVar8 * 0x10;
        if (*(int *)(unaff_ESI + 0x58) != 0) {
          FUN_008042d0(unaff_ESI,iVar8);
          iVar2 = iVar8 * 4;
          FUN_008041c0(unaff_ESI,iVar2,0);
          if (*(char *)(unaff_ESI + 0x60) != '\0') {
            FUN_008041c0(unaff_ESI,iVar2,0);
            FUN_008041c0(unaff_ESI,iVar2,0);
          }
          if (*(char *)(unaff_ESI + 0x5f) != '\0') {
            FUN_008041c0(unaff_ESI,iVar8,2);
          }
        }
        param_1 = param_1 + 0x2a;
        param_2 = (int *)((int)param_2 + 0x3c);
        param_3 = (int *)((int)param_3 + 1);
      } while ((int)param_3 < *(int *)(*(int *)(unaff_ESI + 0xc) + 0x20));
    }
  }
  cVar1 = DAT_00da98bf;
  *(undefined4 *)(*(int *)(unaff_ESI + 0xc) + 0x3c) = *(undefined4 *)(unaff_ESI + 0x18);
  if (cVar1 != *(char *)(unaff_ESI + 0x5e)) {
    iVar2 = 0;
    if (0 < *(int *)(*(int *)(unaff_ESI + 0xc) + 0x2c)) {
      puVar7 = (uint *)(*(int *)(*(int *)(unaff_ESI + 0xc) + 0x3c) + 0xc);
      do {
        puVar7[-2] = (uint)(1.0 - (float)puVar7[-2]);
        *puVar7 = *puVar7 ^ 0x80000000;
        iVar2 = iVar2 + 1;
        puVar7 = puVar7 + 4;
      } while (iVar2 < *(int *)(*(int *)(unaff_ESI + 0xc) + 0x2c));
    }
  }
  *(int *)(unaff_ESI + 0x18) =
       *(int *)(unaff_ESI + 0x18) + *(int *)(*(int *)(unaff_ESI + 0xc) + 0x2c) * 0x10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00804330 : MOVSS XMM0,dword ptr [0x00c10fc4]
00804338 : SUB ESP,0x8
0080433b : PUSH EBX
0080433c : MOV EBX,dword ptr [ESP + 0x14]
00804340 : PUSH EBP
00804341 : MOV EBP,dword ptr [ESP + 0x1c]
00804345 : PUSH EDI
00804346 : MOV EDI,dword ptr [ESP + 0x18]
0080434a : MOV EAX,dword ptr [EDI]
0080434c : ADD EAX,dword ptr [EBX]
0080434e : ADD EAX,dword ptr [EBP]
00804351 : TEST EAX,EAX
00804353 : JLE 0x00804680
00804359 : PUSH EAX
0080435a : CALL 0x00457a20
0080435f : MOV ECX,dword ptr [ESI + 0xc]
00804362 : MOV dword ptr [ECX + 0xa8],EAX
00804368 : MOV EDX,dword ptr [ESI + 0xc]
0080436b : MOV EAX,dword ptr [EDI]
0080436d : ADD ESP,0x4
00804370 : MOV dword ptr [EDX + 0x8],EAX
00804373 : CMP dword ptr [EDI],0x0
00804376 : JLE 0x00804383
00804378 : MOV ECX,dword ptr [ESI + 0xc]
0080437b : MOV EAX,dword ptr [ECX + 0xa8]
00804381 : JMP 0x00804385
00804383 : XOR EAX,EAX
00804385 : MOV EDX,dword ptr [ESI + 0xc]
00804388 : MOV dword ptr [EDX + 0xc],EAX
0080438b : MOV EAX,dword ptr [ESI + 0xc]
0080438e : MOV ECX,dword ptr [EBX]
00804390 : MOV dword ptr [EAX + 0x10],ECX
00804393 : CMP dword ptr [EBX],0x0
00804396 : JLE 0x008043a8
00804398 : MOV EAX,dword ptr [EDI]
0080439a : MOV EDX,dword ptr [ESI + 0xc]
0080439d : SHL EAX,0x6
008043a0 : ADD EAX,dword ptr [EDX + 0xa8]
008043a6 : JMP 0x008043aa
008043a8 : XOR EAX,EAX
008043aa : MOV ECX,dword ptr [ESI + 0xc]
008043ad : MOV dword ptr [ECX + 0x14],EAX
008043b0 : MOV EDX,dword ptr [ESI + 0xc]
008043b3 : MOV EAX,dword ptr [EBP]
008043b6 : MOV dword ptr [EDX + 0x18],EAX
008043b9 : CMP dword ptr [EBP],0x0
008043bd : JLE 0x008043d1
008043bf : MOV EAX,dword ptr [EDI]
008043c1 : ADD EAX,dword ptr [EBX]
008043c3 : MOV ECX,dword ptr [ESI + 0xc]
008043c6 : SHL EAX,0x6
008043c9 : ADD EAX,dword ptr [ECX + 0xa8]
008043cf : JMP 0x008043d3
008043d1 : XOR EAX,EAX
008043d3 : MOV EDX,dword ptr [ESI + 0xc]
008043d6 : MOVSS XMM0,dword ptr [0x00c10fc4]
008043de : MOV dword ptr [EDX + 0x1c],EAX
008043e1 : MOV dword ptr [ESP + 0xc],0x0
008043e9 : LEA ESP,[ESP]
008043f0 : MOV ECX,dword ptr [ESP + 0xc]
008043f4 : MOV EAX,dword ptr [ESI + 0xc]
008043f7 : MOV EBX,dword ptr [ESP + 0x18]
008043fb : MOV EDI,dword ptr [EAX + 0xc]
008043fe : CMP ECX,0x1
00804401 : JNZ 0x0080440c
00804403 : MOV EBX,dword ptr [ESP + 0x1c]
00804407 : MOV EDI,dword ptr [EAX + 0x14]
0080440a : JMP 0x00804418
0080440c : CMP ECX,0x2
0080440f : JNZ 0x00804418
00804411 : MOV EBX,dword ptr [ESP + 0x20]
00804415 : MOV EDI,dword ptr [EAX + 0x1c]
00804418 : TEST EDI,EDI
0080441a : JZ 0x0080466e
00804420 : CMP dword ptr [EBX],0x0
00804423 : MOV dword ptr [ESP + 0x10],0x0
0080442b : JLE 0x0080466e
00804431 : ADD EDI,0x14
00804434 : LEA EBP,[EBX + 0x4]
00804437 : MOV EAX,dword ptr [EBP]
0080443a : MOV dword ptr [EDI + -0x4],EAX
0080443d : MOV ECX,dword ptr [ESI + 0x18]
00804440 : MOV dword ptr [EDI],ECX
00804442 : MOV EAX,dword ptr [EBP]
00804445 : LEA EDX,[EAX + EAX*0x2]
00804448 : ADD EDX,EDX
0080444a : ADD EDX,EDX
0080444c : ADD dword ptr [ESI + 0x18],EDX
0080444f : MOV EAX,dword ptr [ESI + 0x18]
00804452 : MOV dword ptr [EDI + 0x4],EAX
00804455 : MOV EAX,dword ptr [EBP]
00804458 : MOV ECX,dword ptr [ESI + 0x30]
0080445b : LEA EAX,[EAX + EAX*0x2]
0080445e : ADD EAX,EAX
00804460 : ADD EAX,EAX
00804462 : ADD dword ptr [ESI + 0x18],EAX
00804465 : MOV dword ptr [EDI + 0x8],ECX
00804468 : MOV EAX,dword ptr [EBP]
0080446b : LEA EDX,[EAX + EAX*0x2]
0080446e : MOV EAX,dword ptr [ESI + 0x30]
00804471 : ADD EAX,EDX
00804473 : CMP byte ptr [ESI + 0x60],0x0
00804477 : MOV dword ptr [ESI + 0x30],EAX
0080447a : JZ 0x00804497
0080447c : MOV dword ptr [EDI + 0xc],EAX
0080447f : MOV EAX,dword ptr [EBP]
00804482 : LEA ECX,[EAX + EAX*0x2]
00804485 : ADD dword ptr [ESI + 0x30],ECX
00804488 : MOV EAX,dword ptr [ESI + 0x30]
0080448b : MOV dword ptr [EDI + 0x10],EAX
0080448e : MOV EAX,dword ptr [EBP]
00804491 : LEA EDX,[EAX + EAX*0x2]
00804494 : ADD dword ptr [ESI + 0x30],EDX
00804497 : MOV EAX,dword ptr [ESI + 0x18]
0080449a : MOV dword ptr [EDI + 0x14],EAX
0080449d : MOV ECX,dword ptr [EBP]
008044a0 : MOV EDX,dword ptr [ESI + 0x18]
008044a3 : LEA EAX,[EDX + ECX*0x8]
008044a6 : MOV dword ptr [ESI + 0x18],EAX
008044a9 : CMP byte ptr [EBP + 0x8],0x0
008044ad : JZ 0x008044c0
008044af : MOV dword ptr [EDI + 0x18],EAX
008044b2 : MOV EAX,dword ptr [EBP]
008044b5 : ADD EAX,EAX
008044b7 : ADD EAX,EAX
008044b9 : ADD EAX,EAX
008044bb : ADD dword ptr [ESI + 0x18],EAX
008044be : JMP 0x008044c7
008044c0 : MOV dword ptr [EDI + 0x18],0x0
008044c7 : MOV CL,byte ptr [0x00da98bf]
008044cd : CMP CL,byte ptr [ESI + 0x5e]
008044d0 : JZ 0x00804519
008044d2 : MOV EAX,dword ptr [EDI + 0x14]
008044d5 : XOR ECX,ECX
008044d7 : ADD EAX,0x4
008044da : CMP dword ptr [EBP],ECX
008044dd : JLE 0x008044f4
008044df : NOP
008044e0 : MOVAPS XMM1,XMM0
008044e3 : SUBSS XMM1,dword ptr [EAX]
008044e7 : MOVSS dword ptr [EAX],XMM1
008044eb : INC ECX
008044ec : ADD EAX,0x8
008044ef : CMP ECX,dword ptr [EBP]
008044f2 : JL 0x008044e0
008044f4 : MOV EAX,dword ptr [EDI + 0x18]
008044f7 : TEST EAX,EAX
008044f9 : JZ 0x00804519
008044fb : XOR ECX,ECX
008044fd : ADD EAX,0x4
00804500 : CMP dword ptr [EBP],ECX
00804503 : JLE 0x00804519
00804505 : MOVAPS XMM1,XMM0
00804508 : SUBSS XMM1,dword ptr [EAX]
0080450c : MOVSS dword ptr [EAX],XMM1
00804510 : INC ECX
00804511 : ADD EAX,0x8
00804514 : CMP ECX,dword ptr [EBP]
00804517 : JL 0x00804505
00804519 : MOV EDX,dword ptr [ESI + 0x30]
0080451c : MOV dword ptr [EDI + 0x1c],EDX
0080451f : MOV EAX,dword ptr [EBP]
00804522 : ADD dword ptr [ESI + 0x30],EAX
00804525 : CMP byte ptr [ESI + 0x5f],0x0
00804529 : JZ 0x0080455b
0080452b : FLD float ptr [EBP + 0xc]
0080452e : FSTP float ptr [EDI + 0x20]
00804531 : MOV ECX,dword ptr [ESI + 0x30]
00804534 : MOV dword ptr [EDI + 0x24],ECX
00804537 : MOV EAX,dword ptr [EBP]
0080453a : LEA EDX,[EAX + EAX*0x2]
0080453d : ADD EDX,EDX
0080453f : ADD dword ptr [ESI + 0x30],EDX
00804542 : CMP dword ptr [ESP + 0xc],0x1
00804547 : JNZ 0x0080455b
00804549 : MOV EAX,dword ptr [ESI + 0x18]
0080454c : MOV dword ptr [EDI + 0x28],EAX
0080454f : MOV ECX,dword ptr [EBP]
00804552 : ADD ECX,ECX
00804554 : ADD ECX,ECX
00804556 : ADD ECX,ECX
00804558 : ADD dword ptr [ESI + 0x18],ECX
0080455b : CMP dword ptr [EDI + -0x4],0x0
0080455f : MOV EDX,dword ptr [EBP + 0x4]
00804562 : MOV dword ptr [EDI + -0x14],EDX
00804565 : JLE 0x0080457c
00804567 : MOV EAX,dword ptr [ESI + 0x24]
0080456a : MOV dword ptr [EDI + -0x10],EAX
0080456d : MOV EAX,dword ptr [EBP + 0x4]
00804570 : LEA ECX,[EAX + EAX*0x4]
00804573 : ADD ECX,ECX
00804575 : ADD ECX,ECX
00804577 : ADD dword ptr [ESI + 0x24],ECX
0080457a : JMP 0x00804583
0080457c : MOV dword ptr [EDI + -0x10],0x1722328
00804583 : CMP dword ptr [EDI + -0x4],0xffff
0080458a : JLE 0x008045b9
0080458c : MOV EDX,dword ptr [ESI + 0x48]
0080458f : XOR EAX,EAX
00804591 : CMP dword ptr [EDI + -0x14],EAX
00804594 : MOV dword ptr [EDI + -0x8],EDX
00804597 : JLE 0x008045e5
00804599 : XOR ECX,ECX
0080459b : JMP 0x008045a0
008045a0 : MOV EDX,dword ptr [EDI + -0x10]
008045a3 : MOV EDX,dword ptr [ECX + EDX*0x1 + 0x8]
008045a7 : ADD EDX,EDX
008045a9 : ADD EDX,EDX
008045ab : ADD dword ptr [ESI + 0x48],EDX
008045ae : INC EAX
008045af : ADD ECX,0x14
008045b2 : CMP EAX,dword ptr [EDI + -0x14]
008045b5 : JL 0x008045a0
008045b7 : JMP 0x008045e5
008045b9 : MOV EAX,dword ptr [ESI + 0x3c]
008045bc : MOV dword ptr [EDI + -0xc],EAX
008045bf : XOR EAX,EAX
008045c1 : CMP dword ptr [EDI + -0x14],EAX
008045c4 : JLE 0x008045e5
008045c6 : XOR ECX,ECX
008045c8 : JMP 0x008045d0
008045d0 : MOV EDX,dword ptr [EDI + -0x10]
008045d3 : MOV EDX,dword ptr [ECX + EDX*0x1 + 0x8]
008045d7 : ADD EDX,EDX
008045d9 : ADD dword ptr [ESI + 0x3c],EDX
008045dc : INC EAX
008045dd : ADD ECX,0x14
008045e0 : CMP EAX,dword ptr [EDI + -0x14]
008045e3 : JL 0x008045d0
008045e5 : CMP dword ptr [ESI + 0x58],0x0
008045e9 : JZ 0x00804654
008045eb : MOV EAX,dword ptr [EBP]
008045ee : PUSH EAX
008045ef : MOV EAX,dword ptr [EDI]
008045f1 : PUSH ESI
008045f2 : CALL 0x008042d0
008045f7 : MOV ECX,dword ptr [EBP]
008045fa : MOV EAX,dword ptr [EDI + 0x4]
008045fd : PUSH ECX
008045fe : PUSH ESI
008045ff : CALL 0x008042d0
00804604 : MOV EDX,dword ptr [EBP]
00804607 : MOV EAX,dword ptr [EDI + 0x8]
0080460a : PUSH 0x0
0080460c : PUSH EDX
0080460d : PUSH ESI
0080460e : CALL 0x008041c0
00804613 : CMP byte ptr [ESI + 0x60],0x0
00804617 : JZ 0x00804637
00804619 : MOV EAX,dword ptr [EBP]
0080461c : PUSH 0x0
0080461e : PUSH EAX
0080461f : MOV EAX,dword ptr [EDI + 0xc]
00804622 : PUSH ESI
00804623 : CALL 0x008041c0
00804628 : MOV ECX,dword ptr [EBP]
0080462b : MOV EAX,dword ptr [EDI + 0x10]
0080462e : PUSH 0x0
00804630 : PUSH ECX
00804631 : PUSH ESI
00804632 : CALL 0x008041c0
00804637 : CMP byte ptr [ESI + 0x5f],0x0
0080463b : JZ 0x0080464c
0080463d : MOV EDX,dword ptr [EBP]
00804640 : MOV EAX,dword ptr [EDI + 0x24]
00804643 : PUSH 0x3
00804645 : PUSH EDX
00804646 : PUSH ESI
00804647 : CALL 0x008041c0
0080464c : MOVSS XMM0,dword ptr [0x00c10fc4]
00804654 : MOV EAX,dword ptr [ESP + 0x10]
00804658 : INC EAX
00804659 : ADD EBP,0xb0
0080465f : ADD EDI,0x40
00804662 : CMP EAX,dword ptr [EBX]
00804664 : MOV dword ptr [ESP + 0x10],EAX
00804668 : JL 0x00804437
0080466e : MOV EAX,dword ptr [ESP + 0xc]
00804672 : INC EAX
00804673 : CMP EAX,0x3
00804676 : MOV dword ptr [ESP + 0xc],EAX
0080467a : JL 0x008043f0
00804680 : MOV EDI,dword ptr [ESP + 0x24]
00804684 : MOV EAX,dword ptr [ESI + 0xc]
00804687 : MOV ECX,dword ptr [EDI]
00804689 : MOV dword ptr [EAX + 0x20],ECX
0080468c : CMP dword ptr [EDI],0x0
0080468f : JLE 0x008048f4
00804695 : MOV EDX,dword ptr [ESI + 0xc]
00804698 : MOV EAX,dword ptr [EDX + 0x20]
0080469b : PUSH EAX
0080469c : CALL 0x00457b20
008046a1 : MOV ECX,dword ptr [ESI + 0xc]
008046a4 : MOVSS XMM0,dword ptr [0x00c10fc4]
008046ac : MOV dword ptr [ECX + 0x24],EAX
008046af : MOV EDX,dword ptr [ESI + 0xc]
008046b2 : XOR EAX,EAX
008046b4 : ADD ESP,0x4
008046b7 : CMP dword ptr [EDX + 0x20],EAX
008046ba : MOV dword ptr [ESP + 0x20],EAX
008046be : JLE 0x008048f4
008046c4 : ADD EDI,0x4
008046c7 : MOV dword ptr [ESP + 0x1c],EAX
008046cb : MOV dword ptr [ESP + 0x18],EDI
008046cf : NOP
008046d0 : MOV EAX,dword ptr [ESI + 0xc]
008046d3 : MOV EDI,dword ptr [EAX + 0x24]
008046d6 : MOV ECX,dword ptr [ESP + 0x18]
008046da : ADD EDI,dword ptr [ESP + 0x1c]
008046de : MOV EAX,dword ptr [ECX]
008046e0 : MOV dword ptr [EDI],EAX
008046e2 : TEST EAX,EAX
008046e4 : JLE 0x008046f8
008046e6 : MOV EDX,dword ptr [ESI + 0x24]
008046e9 : LEA EAX,[EAX + EAX*0x4]
008046ec : ADD EAX,EAX
008046ee : ADD EAX,EAX
008046f0 : MOV dword ptr [EDI + 0x4],EDX
008046f3 : ADD dword ptr [ESI + 0x24],EAX
008046f6 : JMP 0x008046ff
008046f8 : MOV dword ptr [EDI + 0x4],0x1722328
008046ff : MOV ECX,dword ptr [ESP + 0x18]
00804703 : MOV ECX,dword ptr [ECX]
00804705 : XOR EBX,EBX
00804707 : XOR EDX,EDX
00804709 : XOR EBP,EBP
0080470b : XOR EAX,EAX
0080470d : CMP ECX,0x2
00804710 : MOV dword ptr [ESP + 0x24],EBX
00804714 : JL 0x00804741
00804716 : MOV EAX,dword ptr [EDI + 0x4]
00804719 : ADD ECX,-0x2
0080471c : SHR ECX,0x1
0080471e : ADD EAX,0x1c
00804721 : INC ECX
00804722 : LEA EBX,[ECX + ECX*0x1]
00804725 : MOV dword ptr [ESP + 0x10],EBX
00804729 : MOV EBX,dword ptr [ESP + 0x24]
0080472d : LEA ECX,[ECX]
00804730 : ADD EDX,dword ptr [EAX + -0x14]
00804733 : ADD EBX,dword ptr [EAX]
00804735 : ADD EAX,0x28
00804738 : SUB ECX,0x1
0080473b : JNZ 0x00804730
0080473d : MOV EAX,dword ptr [ESP + 0x10]
00804741 : MOV ECX,dword ptr [ESP + 0x18]
00804745 : CMP EAX,dword ptr [ECX]
00804747 : JGE 0x00804753
00804749 : MOV ECX,dword ptr [EDI + 0x4]
0080474c : LEA EAX,[EAX + EAX*0x4]
0080474f : MOV EBP,dword ptr [ECX + EAX*0x4 + 0x8]
00804753 : ADD EBX,EDX
00804755 : ADD EBP,EBX
00804757 : MOV dword ptr [EDI + 0x8],EBP
0080475a : MOV EDX,dword ptr [ESI + 0x18]
0080475d : MOV dword ptr [EDI + 0xc],EDX
00804760 : LEA EAX,[EBP + EBP*0x2]
00804764 : ADD EAX,EAX
00804766 : ADD EAX,EAX
00804768 : ADD dword ptr [ESI + 0x18],EAX
0080476b : MOV ECX,dword ptr [ESI + 0x18]
0080476e : MOV dword ptr [EDI + 0x10],ECX
00804771 : LEA ECX,[EBP*0x8 + 0x0]
00804778 : ADD dword ptr [ESI + 0x18],ECX
0080477b : MOV EDX,dword ptr [ESI + 0x18]
0080477e : MOV dword ptr [EDI + 0x14],EDX
00804781 : ADD dword ptr [ESI + 0x18],ECX
00804784 : MOV EDX,dword ptr [ESI + 0x18]
00804787 : MOV dword ptr [EDI + 0x18],EDX
0080478a : ADD dword ptr [ESI + 0x18],ECX
0080478d : MOV ECX,dword ptr [ESI + 0x30]
00804790 : MOV dword ptr [EDI + 0x1c],ECX
00804793 : ADD dword ptr [ESI + 0x30],EAX
00804796 : CMP byte ptr [ESI + 0x60],0x0
0080479a : MOV ECX,dword ptr [ESI + 0x30]
0080479d : JZ 0x008047ae
0080479f : MOV dword ptr [EDI + 0x20],ECX
008047a2 : ADD dword ptr [ESI + 0x30],EAX
008047a5 : MOV ECX,dword ptr [ESI + 0x30]
008047a8 : MOV dword ptr [EDI + 0x24],ECX
008047ab : ADD dword ptr [ESI + 0x30],EAX
008047ae : MOV EDX,dword ptr [ESI + 0x18]
008047b1 : MOV CL,byte ptr [0x00da98bf]
008047b7 : MOV EAX,EBP
008047b9 : SHL EAX,0x5
008047bc : MOV dword ptr [EDI + 0x28],EDX
008047bf : ADD dword ptr [ESI + 0x18],EAX
008047c2 : CMP CL,byte ptr [ESI + 0x5e]
008047c5 : JZ 0x00804843
008047c7 : MOV EAX,dword ptr [EDI + 0x28]
008047ca : LEA EDX,[EBP*0x4 + 0x0]
008047d1 : ADD EAX,0x4
008047d4 : XOR EBX,EBX
008047d6 : CMP EDX,0x4
008047d9 : JL 0x0080482a
008047db : LEA ECX,[EDX + -0x4]
008047de : SHR ECX,0x2
008047e1 : INC ECX
008047e2 : LEA EBX,[ECX*0x4 + 0x0]
008047e9 : LEA ESP,[ESP]
008047f0 : MOVAPS XMM1,XMM0
008047f3 : SUBSS XMM1,dword ptr [EAX]
008047f7 : MOVSS dword ptr [EAX],XMM1
008047fb : MOVAPS XMM1,XMM0
008047fe : SUBSS XMM1,dword ptr [EAX + 0x8]
00804803 : MOVSS dword ptr [EAX + 0x8],XMM1
00804808 : MOVAPS XMM1,XMM0
0080480b : SUBSS XMM1,dword ptr [EAX + 0x10]
00804810 : MOVSS dword ptr [EAX + 0x10],XMM1
00804815 : MOVAPS XMM1,XMM0
00804818 : SUBSS XMM1,dword ptr [EAX + 0x18]
0080481d : MOVSS dword ptr [EAX + 0x18],XMM1
00804822 : ADD EAX,0x20
00804825 : SUB ECX,0x1
00804828 : JNZ 0x008047f0
0080482a : CMP EBX,EDX
0080482c : JGE 0x00804843
0080482e : SUB EDX,EBX
00804830 : MOVAPS XMM1,XMM0
00804833 : SUBSS XMM1,dword ptr [EAX]
00804837 : MOVSS dword ptr [EAX],XMM1
0080483b : ADD EAX,0x8
0080483e : SUB EDX,0x1
00804841 : JNZ 0x00804830
00804843 : MOV EDX,dword ptr [ESI + 0x30]
00804846 : MOV dword ptr [EDI + 0x2c],EDX
00804849 : ADD dword ptr [ESI + 0x30],EBP
0080484c : CMP byte ptr [ESI + 0x5f],0x0
00804850 : JZ 0x00804869
00804852 : MOV EAX,dword ptr [ESP + 0x18]
00804856 : FLD float ptr [EAX + 0x4]
00804859 : LEA EDX,[EBP + EBP*0x4]
0080485d : FSTP float ptr [EDI + 0x30]
00804860 : MOV ECX,dword ptr [ESI + 0x30]
00804863 : MOV dword ptr [EDI + 0x34],ECX
00804866 : ADD dword ptr [ESI + 0x30],EDX
00804869 : MOV EAX,dword ptr [ESI + 0x18]
0080486c : MOV ECX,EBP
0080486e : SHL ECX,0x4
00804871 : MOV dword ptr [EDI + 0x38],EAX
00804874 : ADD dword ptr [ESI + 0x18],ECX
00804877 : CMP dword ptr [ESI + 0x58],0x0
0080487b : JZ 0x008048d2
0080487d : MOV EAX,dword ptr [EDI + 0xc]
00804880 : PUSH EBP
00804881 : PUSH ESI
00804882 : CALL 0x008042d0
00804887 : MOV EAX,dword ptr [EDI + 0x1c]
0080488a : PUSH 0x0
0080488c : LEA EBX,[EBP*0x4 + 0x0]
00804893 : PUSH EBX
00804894 : PUSH ESI
00804895 : CALL 0x008041c0
0080489a : CMP byte ptr [ESI + 0x60],0x0
0080489e : JZ 0x008048b8
008048a0 : MOV EAX,dword ptr [EDI + 0x20]
008048a3 : PUSH 0x0
008048a5 : PUSH EBX
008048a6 : PUSH ESI
008048a7 : CALL 0x008041c0
008048ac : MOV EAX,dword ptr [EDI + 0x24]
008048af : PUSH 0x0
008048b1 : PUSH EBX
008048b2 : PUSH ESI
008048b3 : CALL 0x008041c0
008048b8 : CMP byte ptr [ESI + 0x5f],0x0
008048bc : JZ 0x008048ca
008048be : MOV EAX,dword ptr [EDI + 0x34]
008048c1 : PUSH 0x2
008048c3 : PUSH EBP
008048c4 : PUSH ESI
008048c5 : CALL 0x008041c0
008048ca : MOVSS XMM0,dword ptr [0x00c10fc4]
008048d2 : MOV EAX,dword ptr [ESP + 0x20]
008048d6 : MOV EDX,dword ptr [ESI + 0xc]
008048d9 : ADD dword ptr [ESP + 0x18],0xa8
008048e1 : ADD dword ptr [ESP + 0x1c],0x3c
008048e6 : INC EAX
008048e7 : CMP EAX,dword ptr [EDX + 0x20]
008048ea : MOV dword ptr [ESP + 0x20],EAX
008048ee : JL 0x008046d0
008048f4 : MOV EAX,dword ptr [ESI + 0xc]
008048f7 : MOV ECX,dword ptr [ESI + 0x18]
008048fa : MOV DL,byte ptr [0x00da98bf]
00804900 : POP EDI
00804901 : MOV dword ptr [EAX + 0x3c],ECX
00804904 : POP EBP
00804905 : POP EBX
00804906 : CMP DL,byte ptr [ESI + 0x5e]
00804909 : JZ 0x00804947
0080490b : MOV EAX,dword ptr [ESI + 0xc]
0080490e : MOV EDX,dword ptr [EAX + 0x3c]
00804911 : XOR ECX,ECX
00804913 : CMP dword ptr [EAX + 0x2c],ECX
00804916 : JLE 0x00804947
00804918 : MOVSS XMM1,dword ptr [0x00cdf0c0]
00804920 : LEA EAX,[EDX + 0xc]
00804923 : MOVAPS XMM2,XMM0
00804926 : SUBSS XMM2,dword ptr [EAX + -0x8]
0080492b : MOVSS dword ptr [EAX + -0x8],XMM2
00804930 : MOVSS XMM2,dword ptr [EAX]
00804934 : XORPS XMM2,XMM1
00804937 : MOVSS dword ptr [EAX],XMM2
0080493b : MOV EDX,dword ptr [ESI + 0xc]
0080493e : INC ECX
0080493f : ADD EAX,0x10
00804942 : CMP ECX,dword ptr [EDX + 0x2c]
00804945 : JL 0x00804923
00804947 : MOV EAX,dword ptr [ESI + 0xc]
0080494a : MOV ECX,dword ptr [EAX + 0x2c]
0080494d : SHL ECX,0x4
00804950 : ADD dword ptr [ESI + 0x18],ECX
00804953 : ADD ESP,0x8
00804956 : RET 0x10
