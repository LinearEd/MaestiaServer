PROGRAM  : Maestia.exe
FUNCTION : FUN_008747e0
ENTRY    : 008747e0
BODY     : [[008747e0, 00874ba8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008747e0(int param_1)

{
  byte bVar1;
  int iVar2;
  bool bVar3;
  int iVar4;
  int iVar5;
  int in_ECX;
  int *piVar6;
  wchar_t *pwVar7;
  undefined4 uVar8;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  piVar6 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b663a5;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined1 *)(param_1 + 0x1fdd) = 1;
  iVar4 = *piVar6;
  if (iVar4 == 0) {
    FUN_00406460(L"window mgr is null");
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaMyCharacter::ReceiveSwapWeaponSet",0xc94,local_30);
    }
    piVar6 = DAT_00da9894;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    *(undefined1 *)(param_1 + 0x1fdd) = 0;
    *(undefined1 *)(param_1 + 0x1fdc) = 0;
    if ((*piVar6 != 0) && (piVar6 = *(int **)(*piVar6 + 0x114), piVar6 != (int *)0x0)) {
      (**(code **)(*piVar6 + 4))(piVar6,"SetShowDisableBtn",&DAT_00c42ee0,0);
    }
    goto LAB_00874b8b;
  }
  iVar2 = *(int *)(iVar4 + 0x130);
  if (((iVar2 == 0) || (*(int *)(iVar2 + 0x3c) == 0)) || (*(int *)(iVar4 + 0x200) == 0)) {
    FUN_00406460(L"gui Equip or Haildom pointer is null");
    local_8 = 1;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaMyCharacter::ReceiveSwapWeaponSet",0xc9a,local_30);
    }
    piVar6 = DAT_00da9894;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
    *(undefined1 *)(param_1 + 0x1fdd) = 0;
    *(undefined1 *)(param_1 + 0x1fdc) = 0;
    if ((*piVar6 != 0) && (piVar6 = *(int **)(*piVar6 + 0x114), piVar6 != (int *)0x0)) {
      (**(code **)(*piVar6 + 4))(piVar6,"SetShowDisableBtn",&DAT_00c42ee0,0);
    }
    goto LAB_00874b8b;
  }
  if (iVar2 == 0) {
    piVar6 = (int *)0x0;
  }
  else {
    piVar6 = *(int **)(iVar2 + 0x3c);
  }
  iVar4 = (**(code **)(*piVar6 + 0x74))(0,0,local_14);
  if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
    piVar6 = (int *)0x0;
  }
  else {
    piVar6 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
  }
  iVar5 = (**(code **)(*piVar6 + 0x74))(1,0);
  piVar6 = DAT_00da9894;
  iVar2 = *(int *)(in_ECX + 0xc);
  if (((iVar2 == -1) || (iVar4 == 0)) || (iVar2 != *(int *)(iVar4 + 0xc))) {
    iVar4 = *(int *)(in_ECX + 0x16);
    if (((iVar4 == -1) || (iVar5 == 0)) || (iVar4 != *(int *)(iVar5 + 0xc))) {
      bVar1 = *(byte *)(in_ECX + 0x20);
      *(ushort *)(param_1 + 0x1fde) = (ushort)bVar1;
      iVar4 = *piVar6;
      bVar3 = false;
      if ((((*(int *)(iVar4 + 0x140) != 0) &&
           (iVar2 = *(int *)(*(int *)(iVar4 + 0x140) + 0x38), iVar2 != 0)) &&
          (*(char *)(iVar2 + 0x32) != '\0')) && (*(short *)(iVar2 + 0x80) == 1)) {
        bVar3 = true;
      }
      if (((iVar4 != 0) && (*(int *)(iVar4 + 0x130) != 0)) &&
         ((*(int *)(*(int *)(iVar4 + 0x130) + 0x3c) != 0 &&
          ((bVar3 && (piVar6 = *(int **)(iVar4 + 0x114), piVar6 != (int *)0x0)))))) {
        (**(code **)(*piVar6 + 4))(piVar6,"onWeaponsSlotChange",&DAT_00c42ba4,(ushort)bVar1);
      }
      if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
        piVar6 = (int *)0x0;
      }
      else {
        piVar6 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
      }
      (**(code **)(*piVar6 + 0x6c))(0,0,0,0,0xc,0,0);
      if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
        piVar6 = (int *)0x0;
      }
      else {
        piVar6 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
      }
      (**(code **)(*piVar6 + 0x6c))(0,1,0,0,0xd,0,0);
      FUN_00a3ae90(*(undefined4 *)(in_ECX + 0x10),0,*(undefined2 *)(in_ECX + 0x14),0);
      FUN_00a3ae90(*(undefined4 *)(in_ECX + 0x1a),1,*(undefined2 *)(in_ECX + 0x1e),0);
      *(undefined1 *)(param_1 + 0x1fdd) = 0;
      if (!bVar3) {
        FUN_0086d7c0();
      }
      goto LAB_00874b8b;
    }
    FUN_00404750(L"Can\'t find Item Key!!!!, weapon[%u], shield[%u]",iVar2,iVar4);
    local_8 = 3;
    piVar6 = (int *)*DAT_00da98e8;
    if (piVar6 != (int *)0x0) {
      uVar8 = 0xcab;
      pwVar7 = L"AvaMyCharacter::ReceiveSwapWeaponSet";
      goto LAB_00874964;
    }
  }
  else {
    FUN_00404750(L"Can\'t find Item Key!!!!, weapon[%u], shield[%u]",iVar2,
                 *(undefined4 *)(in_ECX + 0x16));
    local_8 = 2;
    piVar6 = (int *)*DAT_00da98e8;
    if (piVar6 != (int *)0x0) {
      uVar8 = 0xca4;
      pwVar7 = L"AvaMyCharacter::ReceiveSwapWeaponSet";
LAB_00874964:
      (**(code **)(*piVar6 + 0x14))(pwVar7,uVar8,local_30);
    }
  }
  *(undefined1 *)(param_1 + 0x1fdd) = 0;
  FUN_0086d7c0();
  local_8 = 0xffffffff;
  FUN_00406560();
LAB_00874b8b:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008747e0 : PUSH EBP
008747e1 : MOV EBP,ESP
008747e3 : PUSH -0x1
008747e5 : PUSH 0xb663a5
008747ea : MOV EAX,FS:[0x0]
008747f0 : PUSH EAX
008747f1 : SUB ESP,0x28
008747f4 : MOV EAX,[0x00d66fa0]
008747f9 : XOR EAX,EBP
008747fb : MOV dword ptr [EBP + -0x10],EAX
008747fe : PUSH EBX
008747ff : PUSH ESI
00874800 : PUSH EDI
00874801 : PUSH EAX
00874802 : LEA EAX,[EBP + -0xc]
00874805 : MOV FS:[0x0],EAX
0087480b : MOV EBX,dword ptr [EBP + 0x8]
0087480e : MOV EAX,[0x00da9894]
00874813 : MOV byte ptr [EBX + 0x1fdd],0x1
0087481a : MOV EAX,dword ptr [EAX]
0087481c : XOR EDI,EDI
0087481e : MOV ESI,ECX
00874820 : CMP EAX,EDI
00874822 : JNZ 0x008748c0
00874828 : PUSH 0xc42930
0087482d : LEA ECX,[EBP + -0x2c]
00874830 : CALL 0x00406460
00874835 : MOV dword ptr [EBP + -0x4],EDI
00874838 : MOV ECX,dword ptr [0x00da98e8]
0087483e : MOV ECX,dword ptr [ECX]
00874840 : CMP ECX,EDI
00874842 : JZ 0x00874859
00874844 : MOV EDX,dword ptr [ECX]
00874846 : MOV EDX,dword ptr [EDX + 0x14]
00874849 : LEA EAX,[EBP + -0x2c]
0087484c : PUSH EAX
0087484d : PUSH 0xc94
00874852 : PUSH 0xc42958
00874857 : CALL EDX
00874859 : MOV dword ptr [EBP + -0x4],0xffffffff
00874860 : CMP dword ptr [EBP + -0x14],0x8
00874864 : JC 0x0087486e
00874866 : MOV ECX,dword ptr [EBP + -0x28]
00874869 : CALL 0x006f04e0
0087486e : MOV ECX,dword ptr [0x00da9894]
00874874 : XOR EAX,EAX
00874876 : MOV dword ptr [EBP + -0x14],0x7
0087487d : MOV dword ptr [EBP + -0x18],EDI
00874880 : MOV word ptr [EBP + -0x28],AX
00874884 : MOV byte ptr [EBX + 0x1fdd],AL
0087488a : MOV byte ptr [EBX + 0x1fdc],AL
00874890 : MOV EAX,dword ptr [ECX]
00874892 : CMP EAX,EDI
00874894 : JZ 0x00874b8b
0087489a : MOV EAX,dword ptr [EAX + 0x114]
008748a0 : CMP EAX,EDI
008748a2 : JZ 0x00874b8b
008748a8 : MOV EDX,dword ptr [EAX]
008748aa : PUSH EDI
008748ab : PUSH 0xc42ee0
008748b0 : PUSH 0xc42ee4
008748b5 : PUSH EAX
008748b6 : MOV EAX,dword ptr [EDX + 0x4]
008748b9 : CALL EAX
008748bb : JMP 0x00874b88
008748c0 : MOV ECX,dword ptr [EAX + 0x130]
008748c6 : CMP ECX,EDI
008748c8 : JZ 0x00874af9
008748ce : CMP dword ptr [ECX + 0x3c],EDI
008748d1 : JZ 0x00874af9
008748d7 : CMP dword ptr [EAX + 0x200],EDI
008748dd : JZ 0x00874af9
008748e3 : MOV EAX,ECX
008748e5 : CMP EAX,EDI
008748e7 : JNZ 0x008748ed
008748e9 : XOR ECX,ECX
008748eb : JMP 0x008748f0
008748ed : MOV ECX,dword ptr [EAX + 0x3c]
008748f0 : MOV EDX,dword ptr [ECX]
008748f2 : MOV EAX,dword ptr [EDX + 0x74]
008748f5 : PUSH EDI
008748f6 : PUSH EDI
008748f7 : CALL EAX
008748f9 : MOV ECX,dword ptr [0x00da9894]
008748ff : MOV EDI,EAX
00874901 : MOV EAX,dword ptr [ECX]
00874903 : MOV EAX,dword ptr [EAX + 0x130]
00874909 : TEST EAX,EAX
0087490b : JNZ 0x00874911
0087490d : XOR ECX,ECX
0087490f : JMP 0x00874914
00874911 : MOV ECX,dword ptr [EAX + 0x3c]
00874914 : MOV EDX,dword ptr [ECX]
00874916 : MOV EAX,dword ptr [EDX + 0x74]
00874919 : PUSH 0x0
0087491b : PUSH 0x1
0087491d : CALL EAX
0087491f : MOV ECX,dword ptr [ESI + 0xc]
00874922 : CMP ECX,-0x1
00874925 : JZ 0x0087498d
00874927 : TEST EDI,EDI
00874929 : JZ 0x0087498d
0087492b : CMP ECX,dword ptr [EDI + 0xc]
0087492e : JNZ 0x0087498d
00874930 : MOV EDX,dword ptr [ESI + 0x16]
00874933 : PUSH EDX
00874934 : PUSH ECX
00874935 : PUSH 0xc42a48
0087493a : LEA ESI,[EBP + -0x2c]
0087493d : CALL 0x00404750
00874942 : ADD ESP,0xc
00874945 : MOV dword ptr [EBP + -0x4],0x2
0087494c : MOV EAX,[0x00da98e8]
00874951 : MOV ECX,dword ptr [EAX]
00874953 : TEST ECX,ECX
00874955 : JZ 0x0087496b
00874957 : MOV EAX,ESI
00874959 : PUSH EAX
0087495a : PUSH 0xca4
0087495f : PUSH 0xc42aa8
00874964 : MOV EDX,dword ptr [ECX]
00874966 : MOV EDX,dword ptr [EDX + 0x14]
00874969 : CALL EDX
0087496b : MOV EAX,EBX
0087496d : MOV byte ptr [EBX + 0x1fdd],0x0
00874974 : CALL 0x0086d7c0
00874979 : MOV dword ptr [EBP + -0x4],0xffffffff
00874980 : LEA ECX,[EBP + -0x2c]
00874983 : CALL 0x00406560
00874988 : JMP 0x00874b8b
0087498d : MOV EDX,dword ptr [ESI + 0x16]
00874990 : CMP EDX,-0x1
00874993 : JZ 0x008749d1
00874995 : TEST EAX,EAX
00874997 : JZ 0x008749d1
00874999 : CMP EDX,dword ptr [EAX + 0xc]
0087499c : JNZ 0x008749d1
0087499e : PUSH EDX
0087499f : PUSH ECX
008749a0 : PUSH 0xc42af8
008749a5 : LEA ESI,[EBP + -0x2c]
008749a8 : CALL 0x00404750
008749ad : ADD ESP,0xc
008749b0 : MOV dword ptr [EBP + -0x4],0x3
008749b7 : MOV EAX,[0x00da98e8]
008749bc : MOV ECX,dword ptr [EAX]
008749be : TEST ECX,ECX
008749c0 : JZ 0x0087496b
008749c2 : MOV EAX,ESI
008749c4 : PUSH EAX
008749c5 : PUSH 0xcab
008749ca : PUSH 0xc42b58
008749cf : JMP 0x00874964
008749d1 : MOVZX DX,byte ptr [ESI + 0x20]
008749d6 : MOV EAX,[0x00da9894]
008749db : MOV word ptr [EBX + 0x1fde],DX
008749e2 : MOV ECX,dword ptr [EAX]
008749e4 : MOV EAX,dword ptr [ECX + 0x140]
008749ea : MOV byte ptr [EBP + -0x2d],0x0
008749ee : TEST EAX,EAX
008749f0 : JZ 0x00874a0d
008749f2 : MOV EAX,dword ptr [EAX + 0x38]
008749f5 : TEST EAX,EAX
008749f7 : JZ 0x00874a0d
008749f9 : CMP byte ptr [EAX + 0x32],0x0
008749fd : JZ 0x00874a0d
008749ff : CMP word ptr [EAX + 0x80],0x1
00874a07 : JNZ 0x00874a0d
00874a09 : MOV byte ptr [EBP + -0x2d],0x1
00874a0d : TEST ECX,ECX
00874a0f : JZ 0x00874a4a
00874a11 : MOV EAX,dword ptr [ECX + 0x130]
00874a17 : TEST EAX,EAX
00874a19 : JZ 0x00874a4a
00874a1b : CMP dword ptr [EAX + 0x3c],0x0
00874a1f : JZ 0x00874a4a
00874a21 : CMP byte ptr [EBP + -0x2d],0x1
00874a25 : JNZ 0x00874a4a
00874a27 : MOV ECX,dword ptr [ECX + 0x114]
00874a2d : TEST ECX,ECX
00874a2f : JZ 0x00874a4a
00874a31 : MOV EAX,dword ptr [ECX]
00874a33 : MOV EAX,dword ptr [EAX + 0x4]
00874a36 : MOVZX EDX,DX
00874a39 : PUSH EDX
00874a3a : PUSH 0xc42ba4
00874a3f : PUSH 0xc42ba8
00874a44 : PUSH ECX
00874a45 : CALL EAX
00874a47 : ADD ESP,0x10
00874a4a : MOV ECX,dword ptr [0x00da9894]
00874a50 : MOV EAX,dword ptr [ECX]
00874a52 : MOV EAX,dword ptr [EAX + 0x130]
00874a58 : TEST EAX,EAX
00874a5a : JNZ 0x00874a60
00874a5c : XOR ECX,ECX
00874a5e : JMP 0x00874a63
00874a60 : MOV ECX,dword ptr [EAX + 0x3c]
00874a63 : MOV EDX,dword ptr [ECX]
00874a65 : MOV EAX,dword ptr [EDX + 0x6c]
00874a68 : PUSH 0x0
00874a6a : PUSH 0x0
00874a6c : PUSH 0xc
00874a6e : PUSH 0x0
00874a70 : PUSH 0x0
00874a72 : PUSH 0x0
00874a74 : PUSH 0x0
00874a76 : CALL EAX
00874a78 : MOV ECX,dword ptr [0x00da9894]
00874a7e : MOV EAX,dword ptr [ECX]
00874a80 : MOV EAX,dword ptr [EAX + 0x130]
00874a86 : TEST EAX,EAX
00874a88 : JNZ 0x00874a8e
00874a8a : XOR ECX,ECX
00874a8c : JMP 0x00874a91
00874a8e : MOV ECX,dword ptr [EAX + 0x3c]
00874a91 : MOV EDX,dword ptr [ECX]
00874a93 : MOV EAX,dword ptr [EDX + 0x6c]
00874a96 : PUSH 0x0
00874a98 : PUSH 0x0
00874a9a : PUSH 0xd
00874a9c : PUSH 0x0
00874a9e : PUSH 0x0
00874aa0 : PUSH 0x1
00874aa2 : PUSH 0x0
00874aa4 : CALL EAX
00874aa6 : MOVZX ECX,word ptr [ESI + 0x14]
00874aaa : MOV EDX,dword ptr [ESI + 0x10]
00874aad : MOV EAX,dword ptr [ESI + 0x4]
00874ab0 : MOV EDI,dword ptr [0x00da93ec]
00874ab6 : PUSH 0x0
00874ab8 : PUSH ECX
00874ab9 : PUSH 0x0
00874abb : PUSH EDX
00874abc : CALL 0x00a3ae90
00874ac1 : MOVZX EAX,word ptr [ESI + 0x1e]
00874ac5 : MOV ECX,dword ptr [ESI + 0x1a]
00874ac8 : MOV EDI,dword ptr [0x00da93ec]
00874ace : PUSH 0x0
00874ad0 : PUSH EAX
00874ad1 : MOV EAX,dword ptr [ESI + 0x4]
00874ad4 : PUSH 0x1
00874ad6 : PUSH ECX
00874ad7 : CALL 0x00a3ae90
00874adc : CMP byte ptr [EBP + -0x2d],0x0
00874ae0 : MOV byte ptr [EBX + 0x1fdd],0x0
00874ae7 : JNZ 0x00874b8b
00874aed : MOV EAX,EBX
00874aef : CALL 0x0086d7c0
00874af4 : JMP 0x00874b8b
00874af9 : PUSH 0xc429a8
00874afe : LEA ECX,[EBP + -0x2c]
00874b01 : CALL 0x00406460
00874b06 : MOV dword ptr [EBP + -0x4],0x1
00874b0d : MOV EDX,dword ptr [0x00da98e8]
00874b13 : MOV ECX,dword ptr [EDX]
00874b15 : CMP ECX,EDI
00874b17 : JZ 0x00874b2e
00874b19 : MOV EAX,dword ptr [ECX]
00874b1b : MOV EAX,dword ptr [EAX + 0x14]
00874b1e : LEA EDX,[EBP + -0x2c]
00874b21 : PUSH EDX
00874b22 : PUSH 0xc9a
00874b27 : PUSH 0xc429f8
00874b2c : CALL EAX
00874b2e : MOV dword ptr [EBP + -0x4],0xffffffff
00874b35 : CMP dword ptr [EBP + -0x14],0x8
00874b39 : JC 0x00874b43
00874b3b : MOV ECX,dword ptr [EBP + -0x28]
00874b3e : CALL 0x006f04e0
00874b43 : MOV EDX,dword ptr [0x00da9894]
00874b49 : XOR ECX,ECX
00874b4b : MOV dword ptr [EBP + -0x14],0x7
00874b52 : MOV dword ptr [EBP + -0x18],EDI
00874b55 : MOV word ptr [EBP + -0x28],CX
00874b59 : MOV byte ptr [EBX + 0x1fdd],CL
00874b5f : MOV byte ptr [EBX + 0x1fdc],CL
00874b65 : MOV EAX,dword ptr [EDX]
00874b67 : CMP EAX,EDI
00874b69 : JZ 0x00874b8b
00874b6b : MOV EAX,dword ptr [EAX + 0x114]
00874b71 : CMP EAX,EDI
00874b73 : JZ 0x00874b8b
00874b75 : MOV ECX,dword ptr [EAX]
00874b77 : MOV EDX,dword ptr [ECX + 0x4]
00874b7a : PUSH EDI
00874b7b : PUSH 0xc42ee0
00874b80 : PUSH 0xc42ee4
00874b85 : PUSH EAX
00874b86 : CALL EDX
00874b88 : ADD ESP,0x10
00874b8b : MOV ECX,dword ptr [EBP + -0xc]
00874b8e : MOV dword ptr FS:[0x0],ECX
00874b95 : POP ECX
00874b96 : POP EDI
00874b97 : POP ESI
00874b98 : POP EBX
00874b99 : MOV ECX,dword ptr [EBP + -0x10]
00874b9c : XOR ECX,EBP
00874b9e : CALL 0x00633e6b
00874ba3 : MOV ESP,EBP
00874ba5 : POP EBP
00874ba6 : RET 0x4
