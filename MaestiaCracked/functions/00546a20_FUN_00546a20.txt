PROGRAM  : Maestia.exe
FUNCTION : FUN_00546a20
ENTRY    : 00546a20
BODY     : [[00546a20, 00546a39] [00546a40, 00546a8c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00546a20(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int *in_ECX;
  int iVar3;
  int local_4;
  
  if (*in_ECX != 0) {
    iVar3 = 0;
    local_4 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar1 = (undefined4 *)(iVar3 + 8 + *in_ECX);
      if (*(int *)(iVar3 + 8 + *in_ECX) != -2) {
        piVar2 = (int *)puVar1[2];
        if ((piVar2 != (int *)0x0) && (*piVar2 = *piVar2 + -1, *piVar2 == 0)) {
          FUN_00500860();
          FUN_00515cf0(piVar2);
        }
        *puVar1 = 0xfffffffe;
      }
      iVar3 = iVar3 + 0xc;
      local_4 = local_4 + -1;
    } while (local_4 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00546a20 : PUSH ECX
00546a21 : PUSH EBP
00546a22 : MOV EBP,ECX
00546a24 : MOV EAX,dword ptr [EBP]
00546a27 : TEST EAX,EAX
00546a29 : JZ 0x00546a8a
00546a2b : MOV EAX,dword ptr [EAX + 0x4]
00546a2e : PUSH EBX
00546a2f : XOR EBX,EBX
00546a31 : PUSH ESI
00546a32 : INC EAX
00546a33 : PUSH EDI
00546a34 : MOV dword ptr [ESP + 0x10],EAX
00546a38 : JMP 0x00546a40
00546a40 : MOV EAX,dword ptr [EBP]
00546a43 : CMP dword ptr [EBX + EAX*0x1 + 0x8],-0x2
00546a48 : LEA EDI,[EBX + EAX*0x1 + 0x8]
00546a4c : JZ 0x00546a6d
00546a4e : MOV ESI,dword ptr [EDI + 0x8]
00546a51 : TEST ESI,ESI
00546a53 : JZ 0x00546a67
00546a55 : ADD dword ptr [ESI],-0x1
00546a58 : JNZ 0x00546a67
00546a5a : MOV ECX,ESI
00546a5c : CALL 0x00500860
00546a61 : PUSH ESI
00546a62 : CALL 0x00515cf0
00546a67 : MOV dword ptr [EDI],0xfffffffe
00546a6d : ADD EBX,0xc
00546a70 : SUB dword ptr [ESP + 0x10],0x1
00546a75 : JNZ 0x00546a40
00546a77 : MOV ECX,dword ptr [EBP]
00546a7a : PUSH ECX
00546a7b : CALL 0x00515cf0
00546a80 : POP EDI
00546a81 : POP ESI
00546a82 : MOV dword ptr [EBP],0x0
00546a89 : POP EBX
00546a8a : POP EBP
00546a8b : POP ECX
00546a8c : RET
