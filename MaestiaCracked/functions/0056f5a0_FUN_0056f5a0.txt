PROGRAM  : Maestia.exe
FUNCTION : FUN_0056f5a0
ENTRY    : 0056f5a0
BODY     : [[0056f5a0, 0056f619]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056f5a0(int param_1)

{
  int *piVar1;
  int *piVar2;
  int in_ECX;
  
  if (param_1 == 0) {
    piVar2 = *(int **)(in_ECX + 0xadc);
    if ((piVar2 != (int *)0x0) && (*piVar2 = *piVar2 + -1, *piVar2 < 1)) {
      FUN_0051d070();
      FUN_00515cf0(piVar2);
    }
    *(undefined4 *)(in_ECX + 0xadc) = 0;
    return;
  }
  piVar2 = *(int **)(param_1 + 0x80);
  if (piVar2 == (int *)0x0) {
    piVar2 = (int *)FUN_00520df0();
  }
  if (piVar2 != (int *)0x0) {
    *piVar2 = *piVar2 + 1;
  }
  piVar1 = *(int **)(in_ECX + 0xadc);
  if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 < 1)) {
    FUN_0051d070();
    FUN_00515cf0(piVar1);
  }
  *(int **)(in_ECX + 0xadc) = piVar2;
  return;
}



============================================================
DISASSEMBLY
============================================================
0056f5a0 : PUSH EBX
0056f5a1 : MOV EBX,ECX
0056f5a3 : MOV ECX,dword ptr [ESP + 0x8]
0056f5a7 : PUSH ESI
0056f5a8 : TEST ECX,ECX
0056f5aa : JNZ 0x0056f5d8
0056f5ac : MOV ESI,dword ptr [EBX + 0xadc]
0056f5b2 : TEST ESI,ESI
0056f5b4 : JZ 0x0056f5c9
0056f5b6 : DEC dword ptr [ESI]
0056f5b8 : CMP dword ptr [ESI],ECX
0056f5ba : JG 0x0056f5c9
0056f5bc : MOV ECX,ESI
0056f5be : CALL 0x0051d070
0056f5c3 : PUSH ESI
0056f5c4 : CALL 0x00515cf0
0056f5c9 : POP ESI
0056f5ca : MOV dword ptr [EBX + 0xadc],0x0
0056f5d4 : POP EBX
0056f5d5 : RET 0x4
0056f5d8 : MOV EAX,dword ptr [ECX + 0x80]
0056f5de : PUSH EDI
0056f5df : TEST EAX,EAX
0056f5e1 : JNZ 0x0056f5e8
0056f5e3 : CALL 0x00520df0
0056f5e8 : MOV EDI,EAX
0056f5ea : TEST EDI,EDI
0056f5ec : JZ 0x0056f5f0
0056f5ee : INC dword ptr [EDI]
0056f5f0 : MOV ESI,dword ptr [EBX + 0xadc]
0056f5f6 : TEST ESI,ESI
0056f5f8 : JZ 0x0056f60e
0056f5fa : DEC dword ptr [ESI]
0056f5fc : CMP dword ptr [ESI],0x0
0056f5ff : JG 0x0056f60e
0056f601 : MOV ECX,ESI
0056f603 : CALL 0x0051d070
0056f608 : PUSH ESI
0056f609 : CALL 0x00515cf0
0056f60e : MOV dword ptr [EBX + 0xadc],EDI
0056f614 : POP EDI
0056f615 : POP ESI
0056f616 : POP EBX
0056f617 : RET 0x4
