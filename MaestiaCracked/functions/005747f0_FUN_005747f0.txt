PROGRAM  : Maestia.exe
FUNCTION : FUN_005747f0
ENTRY    : 005747f0
BODY     : [[005747f0, 0057493a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005747f0(undefined4 param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_0057482a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_005702f0(param_1,iVar7);
LAB_0057482a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0xc);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *(uint *)*param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    puVar1[2] = *(uint *)param_2[1];
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0xc) != -2);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0xc);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  if (uVar5 != param_3) {
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc)) {
      uVar5 = *puVar3;
      puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    }
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      puVar2[2] = puVar1[2];
    }
    *puVar3 = uVar6;
    uVar6 = *(uint *)*param_2;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    piVar4 = (int *)(puVar1[1] + 8);
    *piVar4 = *piVar4 + -1;
    if (*piVar4 == 0) {
      FUN_00525340();
    }
    puVar1[1] = uVar6;
    puVar1[2] = *(uint *)param_2[1];
    *puVar1 = 0xffffffff;
    return;
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    puVar2[2] = puVar1[2];
  }
  uVar5 = *(uint *)*param_2;
  piVar4 = (int *)(uVar5 + 8);
  *piVar4 = *piVar4 + 1;
  piVar4 = (int *)(puVar1[1] + 8);
  *piVar4 = *piVar4 + -1;
  if (*piVar4 == 0) {
    FUN_00525340();
  }
  puVar1[1] = uVar5;
  puVar1[2] = *(uint *)param_2[1];
  *puVar1 = uVar6;
  return;
}



============================================================
DISASSEMBLY
============================================================
005747f0 : PUSH EBX
005747f1 : PUSH ESI
005747f2 : MOV ESI,ECX
005747f4 : MOV EAX,dword ptr [ESI]
005747f6 : TEST EAX,EAX
005747f8 : JNZ 0x00574803
005747fa : MOV EAX,dword ptr [ESP + 0xc]
005747fe : PUSH 0x8
00574800 : PUSH EAX
00574801 : JMP 0x00574825
00574803 : MOV ECX,dword ptr [EAX + 0x4]
00574806 : LEA EDX,[ECX*0x4 + 0x4]
0057480d : MOV ECX,dword ptr [EAX]
0057480f : LEA ECX,[ECX + ECX*0x4]
00574812 : CMP ECX,EDX
00574814 : JBE 0x0057482a
00574816 : MOV EDX,dword ptr [EAX + 0x4]
00574819 : MOV ECX,dword ptr [ESP + 0xc]
0057481d : LEA EAX,[EDX + EDX*0x1 + 0x2]
00574821 : PUSH EAX
00574822 : PUSH ECX
00574823 : MOV ECX,ESI
00574825 : CALL 0x005702f0
0057482a : MOV ECX,dword ptr [ESI]
0057482c : MOV EAX,dword ptr [ESP + 0x14]
00574830 : AND EAX,dword ptr [ECX + 0x4]
00574833 : INC dword ptr [ECX]
00574835 : MOV ECX,dword ptr [ESI]
00574837 : LEA EDX,[EAX + EAX*0x2]
0057483a : LEA ESI,[ECX + EDX*0x4 + 0x8]
0057483e : MOV EDX,dword ptr [ESI]
00574840 : MOV EBX,0xfffffffe
00574845 : CMP EDX,EBX
00574847 : JNZ 0x0057486a
00574849 : MOV ECX,dword ptr [ESP + 0x10]
0057484d : MOV dword ptr [ESI],0xffffffff
00574853 : MOV EAX,dword ptr [ECX]
00574855 : MOV EAX,dword ptr [EAX]
00574857 : MOV dword ptr [ESI + 0x4],EAX
0057485a : INC dword ptr [EAX + 0x8]
0057485d : MOV ECX,dword ptr [ECX + 0x4]
00574860 : MOV EDX,dword ptr [ECX]
00574862 : MOV dword ptr [ESI + 0x8],EDX
00574865 : POP ESI
00574866 : POP EBX
00574867 : RET 0xc
0057486a : PUSH EBP
0057486b : MOV EBP,dword ptr [ECX + 0x4]
0057486e : PUSH EDI
0057486f : MOV EDI,EAX
00574871 : INC EDI
00574872 : AND EDI,EBP
00574874 : LEA EDX,[EDI + EDI*0x2]
00574877 : CMP dword ptr [ECX + EDX*0x4 + 0x8],EBX
0057487b : JNZ 0x00574871
0057487d : LEA EDX,[EDI + EDI*0x2]
00574880 : LEA EBX,[ECX + EDX*0x4 + 0x8]
00574884 : MOV EDX,dword ptr [ESI + 0x4]
00574887 : MOV EDX,dword ptr [EDX + 0xc]
0057488a : AND EDX,EBP
0057488c : CMP EDX,EAX
0057488e : JNZ 0x005748d5
00574890 : TEST EBX,EBX
00574892 : JZ 0x005748a7
00574894 : MOV EAX,dword ptr [ESI]
00574896 : MOV dword ptr [EBX],EAX
00574898 : MOV EAX,dword ptr [ESI + 0x4]
0057489b : MOV dword ptr [EBX + 0x4],EAX
0057489e : INC dword ptr [EAX + 0x8]
005748a1 : MOV EAX,dword ptr [ESI + 0x8]
005748a4 : MOV dword ptr [EBX + 0x8],EAX
005748a7 : MOV EBP,dword ptr [ESP + 0x18]
005748ab : MOV ECX,dword ptr [EBP]
005748ae : MOV EBX,dword ptr [ECX]
005748b0 : INC dword ptr [EBX + 0x8]
005748b3 : MOV ECX,dword ptr [ESI + 0x4]
005748b6 : ADD dword ptr [ECX + 0x8],-0x1
005748ba : JNZ 0x005748c1
005748bc : CALL 0x00525340
005748c1 : MOV dword ptr [ESI + 0x4],EBX
005748c4 : MOV EDX,dword ptr [EBP + 0x4]
005748c7 : MOV EAX,dword ptr [EDX]
005748c9 : MOV dword ptr [ESI + 0x8],EAX
005748cc : MOV dword ptr [ESI],EDI
005748ce : POP EDI
005748cf : POP EBP
005748d0 : POP ESI
005748d1 : POP EBX
005748d2 : RET 0xc
005748d5 : LEA EDX,[EDX + EDX*0x2]
005748d8 : CMP dword ptr [ECX + EDX*0x4 + 0x8],EAX
005748dc : LEA EDX,[ECX + EDX*0x4 + 0x8]
005748e0 : JZ 0x005748f1
005748e2 : MOV EDX,dword ptr [EDX]
005748e4 : LEA EDX,[EDX + EDX*0x2]
005748e7 : CMP dword ptr [ECX + EDX*0x4 + 0x8],EAX
005748eb : LEA EDX,[ECX + EDX*0x4 + 0x8]
005748ef : JNZ 0x005748e2
005748f1 : TEST EBX,EBX
005748f3 : JZ 0x00574908
005748f5 : MOV EAX,dword ptr [ESI]
005748f7 : MOV dword ptr [EBX],EAX
005748f9 : MOV EAX,dword ptr [ESI + 0x4]
005748fc : MOV dword ptr [EBX + 0x4],EAX
005748ff : INC dword ptr [EAX + 0x8]
00574902 : MOV EAX,dword ptr [ESI + 0x8]
00574905 : MOV dword ptr [EBX + 0x8],EAX
00574908 : MOV EBX,dword ptr [ESP + 0x18]
0057490c : MOV dword ptr [EDX],EDI
0057490e : MOV ECX,dword ptr [EBX]
00574910 : MOV EDI,dword ptr [ECX]
00574912 : INC dword ptr [EDI + 0x8]
00574915 : MOV ECX,dword ptr [ESI + 0x4]
00574918 : ADD dword ptr [ECX + 0x8],-0x1
0057491c : JNZ 0x00574923
0057491e : CALL 0x00525340
00574923 : MOV dword ptr [ESI + 0x4],EDI
00574926 : MOV EDX,dword ptr [EBX + 0x4]
00574929 : MOV EAX,dword ptr [EDX]
0057492b : POP EDI
0057492c : MOV dword ptr [ESI + 0x8],EAX
0057492f : POP EBP
00574930 : MOV dword ptr [ESI],0xffffffff
00574936 : POP ESI
00574937 : POP EBX
00574938 : RET 0xc
