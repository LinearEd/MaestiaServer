PROGRAM  : Maestia.exe
FUNCTION : FUN_006dbc80
ENTRY    : 006dbc80
BODY     : [[006dbc80, 006dbd5f]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_006dbc80(int param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  ushort *puVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  ushort local_18;
  undefined4 local_14;
  undefined4 local_10;
  int local_c;
  int local_8;
  int local_4;
  
  uVar1 = *(undefined4 *)(param_1 + 0x178);
  iVar2 = *(int *)(param_1 + 0x198);
  if (((*(int *)(param_1 + 0xfc) != 0) && (*(int *)(iVar2 + 0x28) == 0)) &&
     (uVar4 = FUN_006db780(), (char)uVar4 == '\0')) {
    return uVar4;
  }
  local_4 = param_1;
  local_14 = **(undefined4 **)(param_1 + 0x18);
  local_10 = (*(undefined4 **)(param_1 + 0x18))[1];
  iVar6 = 0;
  iVar5 = *(int *)(iVar2 + 0x10);
  iVar7 = *(int *)(iVar2 + 0xc);
  if (0 < *(int *)(param_1 + 0x140)) {
    do {
      puVar3 = *(ushort **)(param_2 + iVar6 * 4);
      if ((iVar5 < 1) &&
         (uVar4 = FUN_006daf40(&local_14,iVar7,iVar5,1), iVar5 = local_8, iVar7 = local_c,
         (char)uVar4 == '\0')) {
        return uVar4 & 0xffffff00;
      }
      iVar5 = iVar5 + -1;
      if ((iVar7 >> ((byte)iVar5 & 0x1f) & 1U) != 0) {
        local_18 = (ushort)(1 << ((byte)uVar1 & 0x1f));
        *puVar3 = *puVar3 | local_18;
      }
      iVar6 = iVar6 + 1;
    } while (iVar6 < *(int *)(param_1 + 0x140));
  }
  **(undefined4 **)(param_1 + 0x18) = local_14;
  iVar6 = *(int *)(param_1 + 0x18);
  *(undefined4 *)(iVar6 + 4) = local_10;
  *(int *)(iVar2 + 0x28) = *(int *)(iVar2 + 0x28) + -1;
  *(int *)(iVar2 + 0xc) = iVar7;
  *(int *)(iVar2 + 0x10) = iVar5;
  return CONCAT31((int3)((uint)iVar6 >> 8),1);
}



============================================================
DISASSEMBLY
============================================================
006dbc80 : SUB ESP,0x18
006dbc83 : PUSH ESI
006dbc84 : MOV ESI,dword ptr [ESP + 0x20]
006dbc88 : MOV ECX,dword ptr [ESI + 0x178]
006dbc8e : MOV EAX,0x1
006dbc93 : SHL EAX,CL
006dbc95 : CMP dword ptr [ESI + 0xfc],0x0
006dbc9c : PUSH EDI
006dbc9d : MOV EDI,dword ptr [ESI + 0x198]
006dbca3 : MOV dword ptr [ESP + 0x8],EAX
006dbca7 : JZ 0x006dbcbe
006dbca9 : CMP dword ptr [EDI + 0x28],0x0
006dbcad : JNZ 0x006dbcbe
006dbcaf : CALL 0x006db780
006dbcb4 : TEST AL,AL
006dbcb6 : JNZ 0x006dbcbe
006dbcb8 : POP EDI
006dbcb9 : POP ESI
006dbcba : ADD ESP,0x18
006dbcbd : RET
006dbcbe : MOV EAX,dword ptr [ESI + 0x18]
006dbcc1 : MOV dword ptr [ESP + 0x1c],ESI
006dbcc5 : MOV ECX,dword ptr [EAX]
006dbcc7 : MOV dword ptr [ESP + 0xc],ECX
006dbccb : MOV EDX,dword ptr [EAX + 0x4]
006dbcce : PUSH EBX
006dbccf : XOR EBX,EBX
006dbcd1 : CMP dword ptr [ESI + 0x140],EBX
006dbcd7 : MOV dword ptr [ESP + 0x14],EDX
006dbcdb : MOV ECX,dword ptr [EDI + 0x10]
006dbcde : PUSH EBP
006dbcdf : MOV EBP,dword ptr [EDI + 0xc]
006dbce2 : JLE 0x006dbd30
006dbce4 : CMP ECX,0x1
006dbce7 : MOV EAX,dword ptr [ESP + 0x30]
006dbceb : MOV EAX,dword ptr [EAX + EBX*0x4]
006dbcee : MOV dword ptr [ESP + 0x2c],EAX
006dbcf2 : JGE 0x006dbd15
006dbcf4 : PUSH 0x1
006dbcf6 : PUSH ECX
006dbcf7 : LEA ECX,[ESP + 0x1c]
006dbcfb : PUSH EBP
006dbcfc : PUSH ECX
006dbcfd : CALL 0x006daf40
006dbd02 : ADD ESP,0x10
006dbd05 : TEST AL,AL
006dbd07 : JZ 0x006dbd56
006dbd09 : MOV EBP,dword ptr [ESP + 0x1c]
006dbd0d : MOV ECX,dword ptr [ESP + 0x20]
006dbd11 : MOV EAX,dword ptr [ESP + 0x2c]
006dbd15 : DEC ECX
006dbd16 : MOV EDX,EBP
006dbd18 : SAR EDX,CL
006dbd1a : TEST DL,0x1
006dbd1d : JZ 0x006dbd27
006dbd1f : MOV DX,word ptr [ESP + 0x10]
006dbd24 : OR word ptr [EAX],DX
006dbd27 : INC EBX
006dbd28 : CMP EBX,dword ptr [ESI + 0x140]
006dbd2e : JL 0x006dbce4
006dbd30 : MOV EAX,dword ptr [ESI + 0x18]
006dbd33 : MOV EDX,dword ptr [ESP + 0x14]
006dbd37 : MOV dword ptr [EAX],EDX
006dbd39 : MOV EAX,dword ptr [ESI + 0x18]
006dbd3c : MOV EDX,dword ptr [ESP + 0x18]
006dbd40 : MOV dword ptr [EAX + 0x4],EDX
006dbd43 : DEC dword ptr [EDI + 0x28]
006dbd46 : MOV dword ptr [EDI + 0xc],EBP
006dbd49 : POP EBP
006dbd4a : POP EBX
006dbd4b : MOV dword ptr [EDI + 0x10],ECX
006dbd4e : POP EDI
006dbd4f : MOV AL,0x1
006dbd51 : POP ESI
006dbd52 : ADD ESP,0x18
006dbd55 : RET
006dbd56 : POP EBP
006dbd57 : POP EBX
006dbd58 : POP EDI
006dbd59 : XOR AL,AL
006dbd5b : POP ESI
006dbd5c : ADD ESP,0x18
006dbd5f : RET
