PROGRAM  : Maestia.exe
FUNCTION : FUN_006b83a0
ENTRY    : 006b83a0
BODY     : [[006b83a0, 006b8545]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b83a0(void)

{
  int iVar1;
  int iVar2;
  ushort uVar3;
  short sVar4;
  int in_EAX;
  int iVar5;
  ushort *puVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  int local_14;
  int iStack_10;
  int iStack_c;
  undefined4 local_8;
  undefined4 local_4;
  
  iVar1 = *(int *)(in_EAX + 0x68);
  iVar2 = *(int *)(in_EAX + 0x2cc);
  uVar8 = *(undefined4 *)(iVar1 + 0x1c);
  local_14 = 0;
  *(undefined1 *)(iVar2 + 0x10) = 1;
  local_4 = uVar8;
  local_14 = (**(code **)(in_EAX + 0x1fc))();
  if ((local_14 == 0) && (local_14 = FUN_00688900(iVar1,local_8), local_14 == 0)) {
    iVar5 = FUN_006879a0(iVar1);
    iStack_c = FUN_006879a0(iVar1);
    if ((iVar5 == 0x10000) && (iStack_c == **(int **)(iVar2 + 8))) {
      puVar6 = (ushort *)FUN_0068a220(uVar8,8,0,iStack_c,0,&local_14);
      *(ushort **)(iVar2 + 0x14) = puVar6;
      if ((local_14 == 0) && (iStack_10 = 0, 0 < iStack_c)) {
        while( true ) {
          uVar3 = FUN_00687940(iVar1);
          *puVar6 = uVar3;
          uVar7 = FUN_0068a220(uVar8,8,0,uVar3,0,&local_14);
          *(undefined4 *)(puVar6 + 2) = uVar7;
          if (local_14 != 0) break;
          if (*puVar6 != 0) {
            iVar5 = 0;
            do {
              sVar4 = FUN_00687940(iVar1);
              *(int *)(*(int *)(puVar6 + 2) + iVar5 * 8) = sVar4 * 4;
              sVar4 = FUN_00687940(iVar1);
              *(int *)(*(int *)(puVar6 + 2) + 4 + iVar5 * 8) = sVar4 * 4;
              iVar5 = iVar5 + 1;
            } while (iVar5 < (int)(uint)*puVar6);
          }
          iStack_10 = iStack_10 + 1;
          puVar6 = puVar6 + 4;
          uVar8 = local_4;
          if (iStack_c <= iStack_10) {
            FUN_006889b0(iVar1);
            return;
          }
        }
        iVar5 = iStack_10 + -1;
        while (-1 < iVar5) {
          FUN_00687f30(uVar8,*(undefined4 *)(*(int *)(iVar2 + 0x14) + 4 + iVar5 * 8));
          iVar5 = iVar5 + -1;
          *(undefined4 *)(*(int *)(iVar2 + 0x14) + 0xc + iVar5 * 8) = 0;
        }
        FUN_00687f30(uVar8,*(undefined4 *)(iVar2 + 0x14));
        *(undefined4 *)(iVar2 + 0x14) = 0;
      }
    }
    FUN_006889b0(iVar1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b83a0 : SUB ESP,0x14
006b83a3 : PUSH EBX
006b83a4 : MOV EBX,dword ptr [EAX + 0x68]
006b83a7 : PUSH EBP
006b83a8 : MOV EBP,dword ptr [EAX + 0x2cc]
006b83ae : PUSH EDI
006b83af : MOV EDI,dword ptr [EBX + 0x1c]
006b83b2 : LEA ECX,[ESP + 0x18]
006b83b6 : PUSH ECX
006b83b7 : PUSH EBX
006b83b8 : MOV dword ptr [ESP + 0x14],0x0
006b83c0 : MOV byte ptr [EBP + 0x10],0x1
006b83c4 : MOV EDX,dword ptr [EAX + 0x1fc]
006b83ca : PUSH 0x61766172
006b83cf : PUSH EAX
006b83d0 : MOV dword ptr [ESP + 0x2c],EDI
006b83d4 : CALL EDX
006b83d6 : ADD ESP,0x10
006b83d9 : MOV dword ptr [ESP + 0xc],EAX
006b83dd : TEST EAX,EAX
006b83df : JNZ 0x006b853f
006b83e5 : MOV EAX,dword ptr [ESP + 0x18]
006b83e9 : PUSH EAX
006b83ea : PUSH EBX
006b83eb : CALL 0x00688900
006b83f0 : ADD ESP,0x8
006b83f3 : MOV dword ptr [ESP + 0xc],EAX
006b83f7 : TEST EAX,EAX
006b83f9 : JNZ 0x006b853f
006b83ff : PUSH ESI
006b8400 : PUSH EBX
006b8401 : CALL 0x006879a0
006b8406 : PUSH EBX
006b8407 : MOV ESI,EAX
006b8409 : CALL 0x006879a0
006b840e : ADD ESP,0x8
006b8411 : MOV dword ptr [ESP + 0x18],EAX
006b8415 : CMP ESI,0x10000
006b841b : JNZ 0x006b8535
006b8421 : MOV ECX,dword ptr [EBP + 0x8]
006b8424 : CMP EAX,dword ptr [ECX]
006b8426 : JNZ 0x006b8535
006b842c : LEA EDX,[ESP + 0x10]
006b8430 : PUSH EDX
006b8431 : PUSH 0x0
006b8433 : PUSH EAX
006b8434 : PUSH 0x0
006b8436 : PUSH 0x8
006b8438 : PUSH EDI
006b8439 : CALL 0x0068a220
006b843e : ADD ESP,0x18
006b8441 : MOV dword ptr [EBP + 0x14],EAX
006b8444 : CMP dword ptr [ESP + 0x10],0x0
006b8449 : JNZ 0x006b8535
006b844f : CMP dword ptr [ESP + 0x18],0x0
006b8454 : MOV ESI,EAX
006b8456 : MOV dword ptr [ESP + 0x14],0x0
006b845e : JLE 0x006b8535
006b8464 : JMP 0x006b846a
006b8466 : MOV EDI,dword ptr [ESP + 0x20]
006b846a : PUSH EBX
006b846b : CALL 0x00687940
006b8470 : LEA ECX,[ESP + 0x14]
006b8474 : PUSH ECX
006b8475 : PUSH 0x0
006b8477 : MOVZX EDX,AX
006b847a : PUSH EDX
006b847b : PUSH 0x0
006b847d : PUSH 0x8
006b847f : PUSH EDI
006b8480 : MOV word ptr [ESI],AX
006b8483 : CALL 0x0068a220
006b8488 : ADD ESP,0x1c
006b848b : MOV dword ptr [ESI + 0x4],EAX
006b848e : CMP dword ptr [ESP + 0x10],0x0
006b8493 : JNZ 0x006b84f3
006b8495 : XOR EAX,EAX
006b8497 : XOR EDI,EDI
006b8499 : CMP AX,word ptr [ESI]
006b849c : JNC 0x006b84d0
006b849e : MOV EDI,EDI
006b84a0 : PUSH EBX
006b84a1 : CALL 0x00687940
006b84a6 : MOV EDX,dword ptr [ESI + 0x4]
006b84a9 : MOVSX ECX,AX
006b84ac : ADD ECX,ECX
006b84ae : ADD ECX,ECX
006b84b0 : PUSH EBX
006b84b1 : MOV dword ptr [EDX + EDI*0x8],ECX
006b84b4 : CALL 0x00687940
006b84b9 : MOV ECX,dword ptr [ESI + 0x4]
006b84bc : CWDE
006b84bd : ADD EAX,EAX
006b84bf : ADD EAX,EAX
006b84c1 : MOV dword ptr [ECX + EDI*0x8 + 0x4],EAX
006b84c5 : MOVZX EDX,word ptr [ESI]
006b84c8 : INC EDI
006b84c9 : ADD ESP,0x8
006b84cc : CMP EDI,EDX
006b84ce : JL 0x006b84a0
006b84d0 : MOV EAX,dword ptr [ESP + 0x14]
006b84d4 : INC EAX
006b84d5 : ADD ESI,0x8
006b84d8 : CMP EAX,dword ptr [ESP + 0x18]
006b84dc : MOV dword ptr [ESP + 0x14],EAX
006b84e0 : JL 0x006b8466
006b84e2 : PUSH EBX
006b84e3 : CALL 0x006889b0
006b84e8 : ADD ESP,0x4
006b84eb : POP ESI
006b84ec : POP EDI
006b84ed : POP EBP
006b84ee : POP EBX
006b84ef : ADD ESP,0x14
006b84f2 : RET
006b84f3 : MOV ESI,dword ptr [ESP + 0x14]
006b84f7 : ADD ESI,-0x1
006b84fa : JS 0x006b8521
006b84fc : LEA ESP,[ESP]
006b8500 : MOV EAX,dword ptr [EBP + 0x14]
006b8503 : MOV ECX,dword ptr [EAX + ESI*0x8 + 0x4]
006b8507 : PUSH ECX
006b8508 : PUSH EDI
006b8509 : CALL 0x00687f30
006b850e : MOV EDX,dword ptr [EBP + 0x14]
006b8511 : ADD ESP,0x8
006b8514 : SUB ESI,0x1
006b8517 : MOV dword ptr [EDX + ESI*0x8 + 0xc],0x0
006b851f : JNS 0x006b8500
006b8521 : MOV EAX,dword ptr [EBP + 0x14]
006b8524 : PUSH EAX
006b8525 : PUSH EDI
006b8526 : CALL 0x00687f30
006b852b : ADD ESP,0x8
006b852e : MOV dword ptr [EBP + 0x14],0x0
006b8535 : PUSH EBX
006b8536 : CALL 0x006889b0
006b853b : ADD ESP,0x4
006b853e : POP ESI
006b853f : POP EDI
006b8540 : POP EBP
006b8541 : POP EBX
006b8542 : ADD ESP,0x14
006b8545 : RET
