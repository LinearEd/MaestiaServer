PROGRAM  : Maestia.exe
FUNCTION : FUN_00545670
ENTRY    : 00545670
BODY     : [[00545670, 00545786]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 FUN_00545670(uint param_1)

{
  int *piVar1;
  int in_ECX;
  int *piVar2;
  undefined1 uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  
  if (*(uint *)(in_ECX + 0x2c) <= param_1) {
    param_1 = *(uint *)(in_ECX + 0x2c) - 1;
  }
  if ((((int *)(in_ECX + 0x28) == (int *)0x0) || (*(uint *)(in_ECX + 0x2c) <= param_1)) ||
     ((int)param_1 < 0)) {
    return 0;
  }
  iVar4 = *(int *)(in_ECX + 0x28);
  piVar1 = *(int **)(iVar4 + param_1 * 4);
  piVar2 = (int *)(iVar4 + param_1 * 4);
  if (*piVar1 < 0) {
    uVar5 = (uint)*(ushort *)((int)piVar1 + 0x16);
    if ('\0' < *(char *)((int)piVar1 + 0x1d)) {
      iVar4 = (int)*(char *)((int)piVar1 + 0x1d);
      goto LAB_005456eb;
    }
  }
  else {
    uVar5 = piVar1[6];
    if (0 < (short)piVar1[10]) {
      iVar4 = (int)(short)piVar1[10];
      goto LAB_005456eb;
    }
  }
  iVar4 = 0;
LAB_005456eb:
  uVar6 = param_1;
  uVar7 = param_1;
  do {
    if (((*(uint *)(in_ECX + 0x2c) <= param_1) || ((int)param_1 < 0)) ||
       ((float)*(int *)(*piVar2 + 0x10) <
        ((float)(int)(piVar1[4] + iVar4 + uVar5) - *(float *)(in_ECX + 0x4c)) +
        *(float *)(in_ECX + 0x44))) break;
    uVar8 = uVar7 - 1;
    param_1 = param_1 - 1;
    piVar2 = piVar2 + -1;
    uVar6 = uVar7;
    uVar7 = uVar8;
  } while (-1 < (int)uVar8);
  uVar3 = 0;
  uVar5 = FUN_005452d0();
  if (uVar5 < uVar6) {
    uVar6 = uVar5;
  }
  if (*(uint *)(in_ECX + 0x3c) != uVar6) {
    FUN_005992e0(uVar6);
    if (*(int **)(in_ECX + 0x14) != (int *)0x0) {
      (**(code **)(**(int **)(in_ECX + 0x14) + 0xc))();
    }
    uVar3 = 1;
  }
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
00545670 : SUB ESP,0x1c
00545673 : MOV EAX,dword ptr [ECX + 0x2c]
00545676 : PUSH ESI
00545677 : MOV ESI,dword ptr [ESP + 0x24]
0054567b : PUSH EDI
0054567c : MOV dword ptr [ESP + 0x8],ECX
00545680 : CMP ESI,EAX
00545682 : JC 0x00545687
00545684 : LEA ESI,[EAX + -0x1]
00545687 : LEA EAX,[ECX + 0x28]
0054568a : MOV EDI,ESI
0054568c : MOV dword ptr [ESP + 0x18],ESI
00545690 : TEST EAX,EAX
00545692 : JZ 0x0054577d
00545698 : MOV ECX,dword ptr [EAX + 0x4]
0054569b : MOV dword ptr [ESP + 0xc],ECX
0054569f : CMP ESI,ECX
005456a1 : JNC 0x0054577d
005456a7 : TEST ESI,ESI
005456a9 : JL 0x0054577d
005456af : MOV EAX,dword ptr [EAX]
005456b1 : MOV EDX,dword ptr [EAX + ESI*0x4]
005456b4 : LEA ECX,[EAX + ESI*0x4]
005456b7 : MOV EAX,dword ptr [EDX]
005456b9 : SHR EAX,0x1f
005456bc : AND AL,0x1
005456be : PUSH EBX
005456bf : PUSH EBP
005456c0 : JZ 0x005456c8
005456c2 : MOVZX EBP,word ptr [EDX + 0x16]
005456c6 : JMP 0x005456cb
005456c8 : MOV EBP,dword ptr [EDX + 0x18]
005456cb : TEST AL,AL
005456cd : JZ 0x005456db
005456cf : MOV BL,byte ptr [EDX + 0x1d]
005456d2 : TEST BL,BL
005456d4 : JLE 0x005456e9
005456d6 : MOVSX EBX,BL
005456d9 : JMP 0x005456eb
005456db : MOVZX EBX,word ptr [EDX + 0x28]
005456df : TEST BX,BX
005456e2 : JLE 0x005456e9
005456e4 : MOVSX EBX,BX
005456e7 : JMP 0x005456eb
005456e9 : XOR EBX,EBX
005456eb : MOV EDX,dword ptr [EDX + 0x10]
005456ee : ADD EBX,EBP
005456f0 : MOV EBP,dword ptr [ESP + 0x10]
005456f4 : ADD EDX,EBX
005456f6 : MOV dword ptr [ESP + 0x30],EDX
005456fa : FILD dword ptr [ESP + 0x30]
005456fe : MOV EDX,dword ptr [ESP + 0x20]
00545702 : FSUB float ptr [EBP + 0x4c]
00545705 : FADD float ptr [EBP + 0x44]
00545708 : FSTP float ptr [ESP + 0x30]
0054570c : FLD float ptr [ESP + 0x30]
00545710 : CMP EDX,dword ptr [ESP + 0x14]
00545714 : JNC 0x00545740
00545716 : TEST EDX,EDX
00545718 : JL 0x00545740
0054571a : MOV EAX,dword ptr [ECX]
0054571c : MOV EBX,dword ptr [EAX]
0054571e : MOV EAX,dword ptr [EAX + 0x10]
00545721 : MOV dword ptr [ESP + 0x30],EAX
00545725 : FILD dword ptr [ESP + 0x30]
00545729 : SHR EBX,0x1f
0054572c : FCOMP
0054572e : FNSTSW AX
00545730 : TEST AH,0x5
00545733 : JNP 0x00545740
00545735 : MOV ESI,EDI
00545737 : DEC EDI
00545738 : DEC EDX
00545739 : SUB ECX,0x4
0054573c : TEST EDI,EDI
0054573e : JGE 0x00545710
00545740 : MOV ECX,EBP
00545742 : FSTP ST0
00545744 : XOR BL,BL
00545746 : CALL 0x005452d0
0054574b : CMP ESI,EAX
0054574d : JBE 0x00545751
0054574f : MOV ESI,EAX
00545751 : CMP dword ptr [EBP + 0x3c],ESI
00545754 : JZ 0x00545771
00545756 : PUSH ESI
00545757 : LEA ECX,[EBP + 0x28]
0054575a : CALL 0x005992e0
0054575f : MOV ECX,dword ptr [EBP + 0x14]
00545762 : TEST ECX,ECX
00545764 : JZ 0x0054576f
00545766 : MOV EDX,dword ptr [ECX]
00545768 : MOV EAX,dword ptr [EDX + 0xc]
0054576b : PUSH ESI
0054576c : PUSH EBP
0054576d : CALL EAX
0054576f : MOV BL,0x1
00545771 : POP EBP
00545772 : MOV AL,BL
00545774 : POP EBX
00545775 : POP EDI
00545776 : POP ESI
00545777 : ADD ESP,0x1c
0054577a : RET 0x4
0054577d : POP EDI
0054577e : XOR AL,AL
00545780 : POP ESI
00545781 : ADD ESP,0x1c
00545784 : RET 0x4
