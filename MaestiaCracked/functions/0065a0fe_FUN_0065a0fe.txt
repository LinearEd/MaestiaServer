PROGRAM  : Maestia.exe
FUNCTION : FUN_0065a0fe
ENTRY    : 0065a0fe
BODY     : [[0065a0fe, 0065a297] [0065a2b8, 0065a39c]]

============================================================
DECOMPILED C CODE
============================================================

float10 FUN_0065a0fe(int param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  double in_XMM0_Qa;
  double dVar4;
  double dVar5;
  double dVar6;
  undefined2 uStack_c;
  undefined6 uStack_a;
  undefined2 uStack_4;
  
  uVar1 = (ushort)((ulonglong)in_XMM0_Qa >> 0x30) & 0x7fff;
  if ((0x408f - uVar1 | uVar1 - 0x3c90) < 0x80000000) {
    dVar5 = in_XMM0_Qa * 92.33248261689366 + 6755399441055744.0;
    dVar6 = (in_XMM0_Qa * 92.33248261689366 + 6755399441055744.0) - 6755399441055744.0;
    uVar1 = SUB84(dVar5,0);
    iVar2 = (uVar1 & 0x3f) * 0x10;
    dVar4 = (in_XMM0_Qa - (dVar5 - 6755399441055744.0) * 0.010830424696223417) -
            (dVar5 - 6755399441055744.0) * 2.572804622327669e-14;
    dVar6 = (in_XMM0_Qa - dVar6 * 0.010830424696223417) - dVar6 * 2.572804622327669e-14;
    dVar5 = (double)(*(ulonglong *)(&UNK_00ba2df8 + iVar2) |
                    ((ulonglong)dVar5 & 0xffffffc0) + 0xffc0 << 0x2e);
    dVar4 = dVar6 * dVar6 * (dVar6 * 0.16666666669815094 + 0.4999999999995663) +
            dVar4 + *(double *)(&DAT_00ba2df0 + iVar2) +
            dVar4 * dVar4 * dVar4 * dVar4 * (dVar4 * 0.008332168270616733 + 0.04166672086872847);
    if (((int)uVar1 >> 6) + 0x37eU < 0x77d) {
      return (float10)(dVar4 * dVar5 + dVar5);
    }
    dVar6 = (double)(*(ulonglong *)(&UNK_00ba2df8 + iVar2) & 0xfffffffffffff |
                    (ulonglong)(((int)uVar1 >> 7) + 0x3ff) << 0x34);
    uStack_4 = (undefined2)((ulonglong)dVar6 >> 0x30);
    in_XMM0_Qa = (double)((ulonglong)((((int)uVar1 >> 6) - ((int)uVar1 >> 7)) + 0x3ff) << 0x34) *
                 (dVar6 + dVar4 * dVar6);
    if (((ushort)((ulonglong)in_XMM0_Qa >> 0x30) & 0x7ff0) < 0x7ff0) {
      if (((ulonglong)in_XMM0_Qa & 0x7ff0000000000000) != 0) goto LAB_0065a2f2;
      uVar3 = 0xf;
    }
    else {
      uVar3 = 0xe;
    }
  }
  else {
    uVar1 = param_2 & 0x7fffffff;
    if (uVar1 < 0x40900000) {
      return (float10)((double)CONCAT44(param_2,param_1) + 1.0);
    }
    if (uVar1 < 0x7ff00000) {
      if (param_2 < 0x80000000) {
        in_XMM0_Qa = INFINITY;
        uVar3 = 0xe;
      }
      else {
        in_XMM0_Qa = 0.0;
        uVar3 = 0xf;
      }
    }
    else {
      if ((uVar1 < 0x7ff00001) && (param_1 == 0)) {
        if (param_2 != 0x7ff00000) {
          return (float10)0.0;
        }
        return (float10)INFINITY;
      }
      uVar3 = 0x3ea;
    }
  }
  uStack_c = SUB82(in_XMM0_Qa,0);
  uStack_a = (undefined6)((ulonglong)in_XMM0_Qa >> 0x10);
  ___libm_error_support(&param_1,&param_1,(short)&uStack_c,uVar3);
  in_XMM0_Qa = (double)CONCAT62(uStack_a,uStack_c);
LAB_0065a2f2:
  return (float10)in_XMM0_Qa;
}



============================================================
DISASSEMBLY
============================================================
0065a0fe : UNPCKLPD XMM0,XMM0
0065a102 : MOVAPD XMM1,xmmword ptr [0x00ba2da0]
0065a10a : MOVAPD XMM6,xmmword ptr [0x00ba2d80]
0065a112 : MOVAPD XMM2,xmmword ptr [0x00ba2db0]
0065a11a : MOVAPD XMM3,xmmword ptr [0x00ba2dc0]
0065a122 : PEXTRW EAX,XMM0,0x3
0065a127 : AND EAX,0x7fff
0065a12c : MOV EDX,0x408f
0065a131 : SUB EDX,EAX
0065a133 : SUB EAX,0x3c90
0065a138 : OR EDX,EAX
0065a13a : CMP EDX,0x80000000
0065a140 : JNC 0x0065a36e
0065a146 : MULPD XMM1,XMM0
0065a14a : ADDPD XMM1,XMM6
0065a14e : MOVAPD XMM7,XMM1
0065a152 : SUBPD XMM1,XMM6
0065a156 : MULPD XMM2,XMM1
0065a15a : MOVAPD XMM4,xmmword ptr [0x00ba2dd0]
0065a162 : MULPD XMM3,XMM1
0065a166 : MOVAPD XMM5,xmmword ptr [0x00ba2de0]
0065a16e : SUBPD XMM0,XMM2
0065a172 : MOVD EAX,XMM7
0065a176 : MOV ECX,EAX
0065a178 : AND ECX,0x3f
0065a17b : SHL ECX,0x4
0065a17e : SAR EAX,0x6
0065a181 : MOV EDX,EAX
0065a183 : SUBPD XMM0,XMM3
0065a187 : MOVAPD XMM2,xmmword ptr [ECX + 0xba2df0]
0065a18f : MULPD XMM4,XMM0
0065a193 : MOVAPD XMM1,XMM0
0065a197 : MULPD XMM0,XMM0
0065a19b : ADDPD XMM5,XMM4
0065a19f : MULSD XMM0,XMM0
0065a1a3 : ADDSD XMM1,XMM2
0065a1a7 : UNPCKHPD XMM2,XMM2
0065a1ab : MOVDQA XMM6,xmmword ptr [0x00ba2d60]
0065a1b3 : PAND XMM7,XMM6
0065a1b7 : MOVDQA XMM6,xmmword ptr [0x00ba2d70]
0065a1bf : PADDQ XMM7,XMM6
0065a1c3 : PSLLQ XMM7,0x2e
0065a1c8 : MULPD XMM0,XMM5
0065a1cc : ADDSD XMM1,XMM0
0065a1d0 : ORPD XMM2,XMM7
0065a1d4 : UNPCKHPD XMM0,XMM0
0065a1d8 : ADDSD XMM0,XMM1
0065a1dc : ADD EDX,0x37e
0065a1e2 : CMP EDX,0x77c
0065a1e8 : JA 0x0065a203
0065a1ea : MULSD XMM0,XMM2
0065a1ee : SUB ESP,0x10
0065a1f1 : ADDSD XMM0,XMM2
0065a1f5 : MOVLPD qword ptr [ESP + 0x4],XMM0
0065a1fb : FLD double ptr [ESP + 0x4]
0065a1ff : ADD ESP,0x10
0065a202 : RET
0065a203 : SUB ESP,0x12
0065a206 : FSTCW word ptr [ESP + 0x10]
0065a20b : MOV DX,word ptr [ESP + 0x10]
0065a210 : OR DX,0x300
0065a215 : MOV word ptr [ESP],DX
0065a219 : FLDCW word ptr [ESP]
0065a21c : MOV EDX,EAX
0065a21e : SAR EAX,0x1
0065a220 : SUB EDX,EAX
0065a222 : MOVDQA XMM6,xmmword ptr [0x00ba2d50]
0065a22a : PANDN XMM6,XMM2
0065a22e : ADD EAX,0x3ff
0065a233 : MOVD XMM3,EAX
0065a237 : PSLLQ XMM3,0x34
0065a23c : ORPD XMM6,XMM3
0065a240 : ADD EDX,0x3ff
0065a246 : MOVD XMM4,EDX
0065a24a : PSLLQ XMM4,0x34
0065a24f : MOVLPD qword ptr [ESP],XMM0
0065a254 : FLD double ptr [ESP]
0065a257 : MOVLPD qword ptr [ESP + 0x8],XMM6
0065a25d : FLD double ptr [ESP + 0x8]
0065a261 : FMUL ST1
0065a263 : FADDP
0065a265 : MOVLPD qword ptr [ESP],XMM4
0065a26a : FLD double ptr [ESP]
0065a26d : FMULP
0065a26f : FSTP double ptr [ESP]
0065a272 : MOVLPD XMM0,qword ptr [ESP]
0065a277 : FLDCW word ptr [ESP + 0x10]
0065a27b : ADD ESP,0x12
0065a27e : PEXTRW ECX,XMM0,0x3
0065a283 : AND ECX,0x7ff0
0065a289 : CMP ECX,0x7ff0
0065a28f : JNC 0x0065a2b8
0065a291 : CMP ECX,0x0
0065a294 : JZ 0x0065a2bf
0065a296 : JMP 0x0065a2f2
0065a2b8 : MOV EDX,0xe
0065a2bd : JMP 0x0065a2c4
0065a2bf : MOV EDX,0xf
0065a2c4 : SUB ESP,0x1c
0065a2c7 : MOVLPD qword ptr [ESP + 0x10],XMM0
0065a2cd : MOV dword ptr [ESP + 0xc],EDX
0065a2d1 : MOV EDX,ESP
0065a2d3 : ADD EDX,0x10
0065a2d6 : MOV dword ptr [ESP + 0x8],EDX
0065a2da : ADD EDX,0x10
0065a2dd : MOV dword ptr [ESP + 0x4],EDX
0065a2e1 : MOV dword ptr [ESP],EDX
0065a2e4 : CALL 0x00652a86
0065a2e9 : MOVLPD XMM0,qword ptr [ESP + 0x10]
0065a2ef : ADD ESP,0x1c
0065a2f2 : SUB ESP,0x10
0065a2f5 : MOVLPD qword ptr [ESP + 0x4],XMM0
0065a2fb : FLD double ptr [ESP + 0x4]
0065a2ff : ADD ESP,0x10
0065a302 : RET
0065a303 : CMP EAX,0x7ff00000
0065a308 : JNC 0x0065a33b
0065a30a : MOV EAX,dword ptr [ESP + 0x8]
0065a30e : CMP EAX,0x80000000
0065a313 : JNC 0x0065a328
0065a315 : MOVLPD XMM0,qword ptr [0x00ba3220]
0065a31d : MULSD XMM0,XMM0
0065a321 : MOV EDX,0xe
0065a326 : JMP 0x0065a2c4
0065a328 : MOVLPD XMM0,qword ptr [0x00ba3228]
0065a330 : MULSD XMM0,XMM0
0065a334 : MOV EDX,0xf
0065a339 : JMP 0x0065a2c4
0065a33b : MOV EDX,dword ptr [ESP + 0x4]
0065a33f : CMP EAX,0x7ff00000
0065a344 : JA 0x0065a364
0065a346 : CMP EDX,0x0
0065a349 : JNZ 0x0065a364
0065a34b : MOV EAX,dword ptr [ESP + 0x8]
0065a34f : CMP EAX,0x7ff00000
0065a354 : JNZ 0x0065a35d
0065a356 : FLD double ptr [0x00ba3210]
0065a35c : RET
0065a35d : FLD double ptr [0x00ba3218]
0065a363 : RET
0065a364 : MOV EDX,0x3ea
0065a369 : JMP 0x0065a2c4
0065a36e : MOV EAX,dword ptr [ESP + 0x8]
0065a372 : AND EAX,0x7fffffff
0065a377 : CMP EAX,0x40900000
0065a37c : JNC 0x0065a303
0065a37e : MOVLPD XMM0,qword ptr [ESP + 0x4]
0065a384 : ADDSD XMM0,qword ptr [0x00ba31f0]
0065a38c : SUB ESP,0x10
0065a38f : MOVLPD qword ptr [ESP + 0x4],XMM0
0065a395 : FLD double ptr [ESP + 0x4]
0065a399 : ADD ESP,0x10
0065a39c : RET
