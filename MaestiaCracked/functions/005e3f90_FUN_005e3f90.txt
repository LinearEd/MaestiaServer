PROGRAM  : Maestia.exe
FUNCTION : FUN_005e3f90
ENTRY    : 005e3f90
BODY     : [[005e3f90, 005e40b7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e3f90(undefined4 param_1,uint *param_2,uint param_3)

{
  uint *puVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  uint *puVar5;
  int *in_ECX;
  int iVar6;
  uint uVar7;
  int iVar8;
  
  piVar2 = (int *)*in_ECX;
  if (piVar2 == (int *)0x0) {
    iVar8 = 8;
  }
  else {
    if ((uint)(*piVar2 * 5) <= piVar2[1] * 4 + 4U) goto LAB_005e3fca;
    iVar8 = piVar2[1] * 2 + 2;
  }
  FUN_005e2300(param_1,iVar8);
LAB_005e3fca:
  piVar2 = (int *)*in_ECX;
  *piVar2 = *piVar2 + 1;
  param_3 = param_3 & piVar2[1];
  iVar8 = *in_ECX;
  iVar3 = *(int *)(param_3 * 0x10 + 8 + iVar8);
  puVar1 = (uint *)(param_3 * 0x10 + 8 + iVar8);
  if (iVar3 == -2) {
    *puVar1 = 0xffffffff;
    puVar1[2] = *param_2;
    puVar1[3] = param_2[1];
    puVar1[1] = param_3;
    return;
  }
  uVar7 = param_3;
  do {
    uVar7 = uVar7 + 1 & *(uint *)(iVar8 + 4);
  } while (*(int *)(uVar7 * 0x10 + 8 + iVar8) != -2);
  piVar2 = (int *)(uVar7 * 0x10 + 8 + iVar8);
  if (puVar1[1] != param_3) {
    iVar6 = puVar1[1] * 0x10;
    uVar4 = *(uint *)(iVar6 + 8 + iVar8);
    while (puVar5 = (uint *)(iVar6 + 8 + iVar8), uVar4 != param_3) {
      iVar6 = *puVar5 * 0x10;
      uVar4 = *(uint *)(iVar6 + 8 + iVar8);
    }
    if (piVar2 != (int *)0x0) {
      *piVar2 = iVar3;
      piVar2[1] = puVar1[1];
      piVar2[2] = puVar1[2];
      piVar2[3] = puVar1[3];
    }
    *puVar5 = uVar7;
    puVar1[2] = *param_2;
    uVar7 = param_2[1];
    *puVar1 = 0xffffffff;
    puVar1[3] = uVar7;
    puVar1[1] = param_3;
    return;
  }
  if (piVar2 != (int *)0x0) {
    *piVar2 = iVar3;
    piVar2[1] = puVar1[1];
    piVar2[2] = puVar1[2];
    piVar2[3] = puVar1[3];
  }
  puVar1[2] = *param_2;
  uVar4 = param_2[1];
  *puVar1 = uVar7;
  puVar1[3] = uVar4;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
005e3f90 : PUSH EBP
005e3f91 : PUSH ESI
005e3f92 : MOV ESI,ECX
005e3f94 : MOV EAX,dword ptr [ESI]
005e3f96 : TEST EAX,EAX
005e3f98 : JNZ 0x005e3fa3
005e3f9a : MOV EAX,dword ptr [ESP + 0xc]
005e3f9e : PUSH 0x8
005e3fa0 : PUSH EAX
005e3fa1 : JMP 0x005e3fc5
005e3fa3 : MOV ECX,dword ptr [EAX + 0x4]
005e3fa6 : LEA EDX,[ECX*0x4 + 0x4]
005e3fad : MOV ECX,dword ptr [EAX]
005e3faf : LEA ECX,[ECX + ECX*0x4]
005e3fb2 : CMP ECX,EDX
005e3fb4 : JBE 0x005e3fca
005e3fb6 : MOV EDX,dword ptr [EAX + 0x4]
005e3fb9 : MOV ECX,dword ptr [ESP + 0xc]
005e3fbd : LEA EAX,[EDX + EDX*0x1 + 0x2]
005e3fc1 : PUSH EAX
005e3fc2 : PUSH ECX
005e3fc3 : MOV ECX,ESI
005e3fc5 : CALL 0x005e2300
005e3fca : MOV EAX,dword ptr [ESI]
005e3fcc : INC dword ptr [EAX]
005e3fce : MOV ECX,dword ptr [ESP + 0x14]
005e3fd2 : AND ECX,dword ptr [EAX + 0x4]
005e3fd5 : MOV EDX,dword ptr [ESI]
005e3fd7 : MOV EAX,ECX
005e3fd9 : SHL EAX,0x4
005e3fdc : MOV EBP,dword ptr [EAX + EDX*0x1 + 0x8]
005e3fe0 : LEA EAX,[EAX + EDX*0x1 + 0x8]
005e3fe4 : CMP EBP,-0x2
005e3fe7 : JNZ 0x005e4006
005e3fe9 : MOV EDX,dword ptr [ESP + 0x10]
005e3fed : MOV dword ptr [EAX],0xffffffff
005e3ff3 : MOV ESI,dword ptr [EDX]
005e3ff5 : MOV dword ptr [EAX + 0x8],ESI
005e3ff8 : FLD float ptr [EDX + 0x4]
005e3ffb : POP ESI
005e3ffc : FSTP float ptr [EAX + 0xc]
005e3fff : MOV dword ptr [EAX + 0x4],ECX
005e4002 : POP EBP
005e4003 : RET 0xc
005e4006 : PUSH EDI
005e4007 : MOV EDI,dword ptr [EDX + 0x4]
005e400a : MOV ESI,ECX
005e400c : PUSH EBX
005e400d : LEA ECX,[ECX]
005e4010 : INC ESI
005e4011 : AND ESI,EDI
005e4013 : MOV EBX,ESI
005e4015 : SHL EBX,0x4
005e4018 : CMP dword ptr [EBX + EDX*0x1 + 0x8],-0x2
005e401d : JNZ 0x005e4010
005e401f : MOV EBX,dword ptr [EAX + 0x4]
005e4022 : MOV EDI,ESI
005e4024 : SHL EDI,0x4
005e4027 : LEA EDI,[EDI + EDX*0x1 + 0x8]
005e402b : CMP EBX,ECX
005e402d : JNZ 0x005e4062
005e402f : TEST EDI,EDI
005e4031 : JZ 0x005e4047
005e4033 : MOV dword ptr [EDI],EBP
005e4035 : MOV EDX,dword ptr [EAX + 0x4]
005e4038 : MOV dword ptr [EDI + 0x4],EDX
005e403b : MOV EDX,dword ptr [EAX + 0x8]
005e403e : MOV dword ptr [EDI + 0x8],EDX
005e4041 : FLD float ptr [EAX + 0xc]
005e4044 : FSTP float ptr [EDI + 0xc]
005e4047 : MOV EDX,dword ptr [ESP + 0x18]
005e404b : MOV EDI,dword ptr [EDX]
005e404d : POP EBX
005e404e : MOV dword ptr [EAX + 0x8],EDI
005e4051 : MOV EDX,dword ptr [EDX + 0x4]
005e4054 : POP EDI
005e4055 : MOV dword ptr [EAX],ESI
005e4057 : POP ESI
005e4058 : MOV dword ptr [EAX + 0xc],EDX
005e405b : MOV dword ptr [EAX + 0x4],ECX
005e405e : POP EBP
005e405f : RET 0xc
005e4062 : SHL EBX,0x4
005e4065 : CMP dword ptr [EBX + EDX*0x1 + 0x8],ECX
005e4069 : LEA EBX,[EBX + EDX*0x1 + 0x8]
005e406d : JZ 0x005e407f
005e406f : NOP
005e4070 : MOV EBX,dword ptr [EBX]
005e4072 : SHL EBX,0x4
005e4075 : CMP dword ptr [EBX + EDX*0x1 + 0x8],ECX
005e4079 : LEA EBX,[EBX + EDX*0x1 + 0x8]
005e407d : JNZ 0x005e4070
005e407f : TEST EDI,EDI
005e4081 : JZ 0x005e4097
005e4083 : MOV dword ptr [EDI],EBP
005e4085 : MOV EDX,dword ptr [EAX + 0x4]
005e4088 : MOV dword ptr [EDI + 0x4],EDX
005e408b : MOV EDX,dword ptr [EAX + 0x8]
005e408e : MOV dword ptr [EDI + 0x8],EDX
005e4091 : FLD float ptr [EAX + 0xc]
005e4094 : FSTP float ptr [EDI + 0xc]
005e4097 : MOV EDX,dword ptr [ESP + 0x18]
005e409b : MOV dword ptr [EBX],ESI
005e409d : MOV ESI,dword ptr [EDX]
005e409f : POP EBX
005e40a0 : POP EDI
005e40a1 : MOV dword ptr [EAX + 0x8],ESI
005e40a4 : MOV EDX,dword ptr [EDX + 0x4]
005e40a7 : POP ESI
005e40a8 : MOV dword ptr [EAX],0xffffffff
005e40ae : MOV dword ptr [EAX + 0xc],EDX
005e40b1 : MOV dword ptr [EAX + 0x4],ECX
005e40b4 : POP EBP
005e40b5 : RET 0xc
