PROGRAM  : Maestia.exe
FUNCTION : FUN_0085d9f0
ENTRY    : 0085d9f0
BODY     : [[0085d9f0, 0085dc82]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0085d9f0(int param_1)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  int in_ECX;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined1 local_54 [4];
  undefined2 uStack_50;
  undefined4 uStack_40;
  uint uStack_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 uStack_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b37ffb;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)&local_74;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff80;
  ExceptionList = &local_14;
  if (param_1 == 0) {
    FUN_00406460(L"SceneNode NULL! AvaPlayerCharacter::InitCharacter");
    local_c = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaPlayerCharacter::InitCharacter",0x6be,&local_38);
    }
    local_c = 0xffffffff;
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_20 = 7;
    uStack_24 = 0;
    local_34 = (uint)local_34._2_2_ << 0x10;
  }
  else {
    *(undefined1 *)(in_ECX + 0x3b0) = 0;
    if (*(int *)(in_ECX + 1000) != 0) {
      FUN_008018d0(L"AvaPlayerCharacter::InitCharacter m_pCharNode Non NULL!!",uVar2);
    }
    *(int *)(in_ECX + 1000) = param_1;
    FUN_00443720(param_1);
    iVar1 = DAT_00d7c54c;
    *(undefined1 *)(*(int *)(in_ECX + 1000) + 0x2bf) = 1;
    local_70 = *(undefined4 *)(in_ECX + 8);
    FUN_004437f0(&local_70);
    if ((local_74 != *(uint *)(iVar1 + 0x44)) && (iVar1 = *(int *)(local_74 + 0x10), iVar1 != 0)) {
      puVar4 = *(undefined4 **)(iVar1 + 0xb8);
      if (puVar4 == (undefined4 *)0x0) {
        puVar4 = &local_38;
      }
      puVar5 = *(undefined4 **)(iVar1 + 0xb8);
      if (puVar5 == (undefined4 *)0x0) {
        puVar5 = &local_38;
      }
      *(float *)(in_ECX + 0x46c) =
           (float)*(ushort *)((int)puVar4 + (uint)*(byte *)(iVar1 + 0x54) * 2 + 0x74) /
           (float)*(ushort *)((int)puVar5 + (uint)*(byte *)(iVar1 + 0x54) * 2 + 0x2c);
      *(uint *)(in_ECX + 0xc4) = (uint)*(ushort *)(iVar1 + 0x5c);
    }
    FUN_007d8b50();
    *(undefined4 *)(in_ECX + 0x410) = *(undefined4 *)(*(int *)(in_ECX + 1000) + 0x28c);
    FUN_00406460(L"SoundNode");
    local_c = 1;
    local_6c = 0x3f800000;
    local_68 = 0x3f800000;
    local_64 = 0x3f800000;
    local_38 = 0;
    local_34 = 0;
    local_30 = 0;
    local_2c = 0x3f800000;
    local_60 = 0;
    local_5c = 0;
    local_58 = 0;
    uVar3 = (**(code **)(**(int **)(in_ECX + 1000) + 0x20))(local_54,&local_60,&local_38,&local_6c);
    *(undefined4 *)(in_ECX + 0x3f0) = uVar3;
    local_c = 0xffffffff;
    if (7 < uStack_3c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(undefined1 *)(*(int *)(in_ECX + 0x3f0) + 0x25a) = 0;
    uStack_3c = 7;
    uStack_40 = 0;
    uStack_50 = 0;
    if (*(int *)(in_ECX + 0x19a8) != *(int *)(in_ECX + 0x19ac)) {
      local_74 = local_74 & 0xffffff00;
      uVar3 = FUN_00443090(*(int *)(in_ECX + 0x19ac),local_74,local_74,local_74);
      *(undefined4 *)(in_ECX + 0x19ac) = uVar3;
    }
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)&local_74);
  return;
}



============================================================
DISASSEMBLY
============================================================
0085d9f0 : PUSH EBP
0085d9f1 : MOV EBP,ESP
0085d9f3 : AND ESP,0xfffffff8
0085d9f6 : PUSH -0x1
0085d9f8 : PUSH 0xb37ffb
0085d9fd : MOV EAX,FS:[0x0]
0085da03 : PUSH EAX
0085da04 : SUB ESP,0x60
0085da07 : MOV EAX,[0x00d66fa0]
0085da0c : XOR EAX,ESP
0085da0e : MOV dword ptr [ESP + 0x58],EAX
0085da12 : PUSH EBX
0085da13 : PUSH ESI
0085da14 : PUSH EDI
0085da15 : MOV EAX,[0x00d66fa0]
0085da1a : XOR EAX,ESP
0085da1c : PUSH EAX
0085da1d : LEA EAX,[ESP + 0x70]
0085da21 : MOV FS:[0x0],EAX
0085da27 : MOV EBX,dword ptr [EBP + 0x8]
0085da2a : XOR ESI,ESI
0085da2c : MOV EDI,ECX
0085da2e : CMP EBX,ESI
0085da30 : JNZ 0x0085da95
0085da32 : PUSH 0xc3e6f8
0085da37 : LEA ECX,[ESP + 0x50]
0085da3b : CALL 0x00406460
0085da40 : MOV dword ptr [ESP + 0x78],ESI
0085da44 : MOV EAX,[0x00da98e8]
0085da49 : MOV ECX,dword ptr [EAX]
0085da4b : CMP ECX,ESI
0085da4d : JZ 0x0085da65
0085da4f : MOV EDX,dword ptr [ECX]
0085da51 : MOV EDX,dword ptr [EDX + 0x14]
0085da54 : LEA EAX,[ESP + 0x4c]
0085da58 : PUSH EAX
0085da59 : PUSH 0x6be
0085da5e : PUSH 0xc3e770
0085da63 : CALL EDX
0085da65 : MOV dword ptr [ESP + 0x78],0xffffffff
0085da6d : CMP dword ptr [ESP + 0x64],0x8
0085da72 : JC 0x0085da7d
0085da74 : MOV ECX,dword ptr [ESP + 0x50]
0085da78 : CALL 0x006f04e0
0085da7d : XOR EAX,EAX
0085da7f : MOV dword ptr [ESP + 0x64],0x7
0085da87 : MOV dword ptr [ESP + 0x60],ESI
0085da8b : MOV word ptr [ESP + 0x50],AX
0085da90 : JMP 0x0085dc63
0085da95 : MOV byte ptr [EDI + 0x3b0],0x0
0085da9c : CMP dword ptr [EDI + 0x3e8],ESI
0085daa2 : JZ 0x0085dab7
0085daa4 : MOV ESI,dword ptr [0x00da98e8]
0085daaa : PUSH 0xc3e7e0
0085daaf : CALL 0x008018d0
0085dab4 : ADD ESP,0x4
0085dab7 : PUSH EBX
0085dab8 : MOV dword ptr [EDI + 0x3e8],EBX
0085dabe : CALL 0x00443720
0085dac3 : MOV EAX,dword ptr [EDI + 0x3e8]
0085dac9 : MOV ESI,dword ptr [0x00d7c54c]
0085dacf : MOV EBX,0x1
0085dad4 : MOV byte ptr [EAX + 0x2bf],BL
0085dada : MOV ECX,dword ptr [EDI + 0x8]
0085dadd : LEA EDX,[ESP + 0x14]
0085dae1 : MOV dword ptr [ESP + 0x14],ECX
0085dae5 : PUSH EDX
0085dae6 : LEA ECX,[ESI + 0x40]
0085dae9 : LEA EAX,[ESP + 0x14]
0085daed : CALL 0x004437f0
0085daf2 : MOV ESI,dword ptr [ESI + 0x44]
0085daf5 : MOV EAX,dword ptr [ESP + 0x10]
0085daf9 : CMP EAX,ESI
0085dafb : JZ 0x0085db59
0085dafd : MOV EAX,dword ptr [EAX + 0x10]
0085db00 : TEST EAX,EAX
0085db02 : JZ 0x0085db59
0085db04 : MOVZX CX,byte ptr [EAX + 0x54]
0085db09 : MOV EDX,dword ptr [EAX + 0xb8]
0085db0f : MOVZX ECX,CX
0085db12 : TEST EDX,EDX
0085db14 : JNZ 0x0085db1a
0085db16 : LEA EDX,[ESP + 0x4c]
0085db1a : MOVZX ECX,CX
0085db1d : MOVZX ESI,word ptr [EDX + ECX*0x2 + 0x74]
0085db22 : MOV EDX,dword ptr [EAX + 0xb8]
0085db28 : TEST EDX,EDX
0085db2a : JNZ 0x0085db30
0085db2c : LEA EDX,[ESP + 0x4c]
0085db30 : MOVZX ECX,word ptr [EDX + ECX*0x2 + 0x2c]
0085db35 : MOVZX EDX,SI
0085db38 : MOVZX ECX,CX
0085db3b : CVTSI2SS XMM0,EDX
0085db3f : CVTSI2SS XMM1,ECX
0085db43 : DIVSS XMM0,XMM1
0085db47 : MOVSS dword ptr [EDI + 0x46c],XMM0
0085db4f : MOVZX EAX,word ptr [EAX + 0x5c]
0085db53 : MOV dword ptr [EDI + 0xc4],EAX
0085db59 : MOV ESI,dword ptr [EDI + 0x3e8]
0085db5f : CALL 0x007d8b50
0085db64 : MOV EDX,dword ptr [EDI + 0x3e8]
0085db6a : MOV EAX,dword ptr [EDX + 0x28c]
0085db70 : PUSH 0xc3e75c
0085db75 : LEA ECX,[ESP + 0x34]
0085db79 : MOV dword ptr [EDI + 0x410],EAX
0085db7f : CALL 0x00406460
0085db84 : MOV dword ptr [ESP + 0x78],EBX
0085db88 : XORPS XMM0,XMM0
0085db8b : MOVSS XMM1,dword ptr [0x00c10fc4]
0085db93 : MOV ECX,dword ptr [EDI + 0x3e8]
0085db99 : LEA EDX,[ESP + 0x18]
0085db9d : PUSH EDX
0085db9e : LEA EDX,[ESP + 0x50]
0085dba2 : PUSH EDX
0085dba3 : LEA EDX,[ESP + 0x2c]
0085dba7 : PUSH EDX
0085dba8 : MOVSS dword ptr [ESP + 0x24],XMM1
0085dbae : MOVSS dword ptr [ESP + 0x28],XMM1
0085dbb4 : MOVSS dword ptr [ESP + 0x2c],XMM1
0085dbba : MOVSS dword ptr [ESP + 0x58],XMM0
0085dbc0 : MOVSS dword ptr [ESP + 0x5c],XMM0
0085dbc6 : MOVSS dword ptr [ESP + 0x60],XMM0
0085dbcc : MOVSS dword ptr [ESP + 0x64],XMM1
0085dbd2 : MOVSS dword ptr [ESP + 0x30],XMM0
0085dbd8 : MOVSS dword ptr [ESP + 0x34],XMM0
0085dbde : MOVSS dword ptr [ESP + 0x38],XMM0
0085dbe4 : MOV EAX,dword ptr [ECX]
0085dbe6 : MOV EAX,dword ptr [EAX + 0x20]
0085dbe9 : LEA EDX,[ESP + 0x3c]
0085dbed : PUSH EDX
0085dbee : CALL EAX
0085dbf0 : MOV dword ptr [EDI + 0x3f0],EAX
0085dbf6 : MOV dword ptr [ESP + 0x78],0xffffffff
0085dbfe : CMP dword ptr [ESP + 0x48],0x8
0085dc03 : JC 0x0085dc0e
0085dc05 : MOV ECX,dword ptr [ESP + 0x34]
0085dc09 : CALL 0x006f04e0
0085dc0e : MOV EDX,dword ptr [EDI + 0x3f0]
0085dc14 : XOR ECX,ECX
0085dc16 : MOV byte ptr [EDX + 0x25a],CL
0085dc1c : MOV EDX,dword ptr [EDI + 0x19ac]
0085dc22 : MOV EAX,dword ptr [EDI + 0x19a8]
0085dc28 : MOV dword ptr [ESP + 0x48],0x7
0085dc30 : MOV dword ptr [ESP + 0x44],0x0
0085dc38 : MOV word ptr [ESP + 0x34],CX
0085dc3d : CMP EAX,EDX
0085dc3f : JZ 0x0085dc63
0085dc41 : MOV byte ptr [ESP + 0x10],CL
0085dc45 : MOV ECX,dword ptr [ESP + 0x10]
0085dc49 : PUSH ECX
0085dc4a : MOV ECX,dword ptr [ESP + 0x14]
0085dc4e : PUSH ECX
0085dc4f : MOV ECX,dword ptr [ESP + 0x18]
0085dc53 : PUSH ECX
0085dc54 : PUSH EDX
0085dc55 : CALL 0x00443090
0085dc5a : ADD ESP,0x10
0085dc5d : MOV dword ptr [EDI + 0x19ac],EAX
0085dc63 : MOV ECX,dword ptr [ESP + 0x70]
0085dc67 : MOV dword ptr FS:[0x0],ECX
0085dc6e : POP ECX
0085dc6f : POP EDI
0085dc70 : POP ESI
0085dc71 : POP EBX
0085dc72 : MOV ECX,dword ptr [ESP + 0x58]
0085dc76 : XOR ECX,ESP
0085dc78 : CALL 0x00633e6b
0085dc7d : MOV ESP,EBP
0085dc7f : POP EBP
0085dc80 : RET 0x4
