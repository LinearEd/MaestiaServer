PROGRAM  : Maestia.exe
FUNCTION : FUN_005ef820
ENTRY    : 005ef820
BODY     : [[005ef820, 005ef8a4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ef820(void)

{
  uint uVar1;
  undefined4 *puVar2;
  int *in_ECX;
  uint uVar3;
  
  uVar1 = in_ECX[1];
  uVar3 = 0;
  if (uVar1 != 0) {
    do {
      if ((*(int *)(*in_ECX + uVar3 * 4) != 0) &&
         (puVar2 = *(undefined4 **)(*in_ECX + uVar3 * 4), puVar2 != (undefined4 *)0x0)) {
        if ((puVar2[3] == 0) && (puVar2[4] != 0)) {
          FUN_00524240();
        }
        FUN_00515cf0(*puVar2);
        FUN_00515cf0(puVar2);
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar1);
  }
  if (in_ECX[1] == 0) {
    if (in_ECX[2] == 0) {
      FUN_005edac0(in_ECX,0);
    }
  }
  else if ((in_ECX[2] & 0xfffffffeU) != 0) {
    if (*in_ECX != 0) {
      FUN_00515cf0(*in_ECX);
      *in_ECX = 0;
    }
    in_ECX[2] = 0;
    in_ECX[1] = 0;
    return;
  }
  in_ECX[1] = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005ef820 : PUSH EBX
005ef821 : PUSH EBP
005ef822 : PUSH ESI
005ef823 : MOV ESI,ECX
005ef825 : MOV EBP,dword ptr [ESI + 0x4]
005ef828 : PUSH EDI
005ef829 : XOR EDI,EDI
005ef82b : XOR EBX,EBX
005ef82d : CMP EBP,EDI
005ef82f : JBE 0x005ef868
005ef831 : MOV EAX,dword ptr [ESI]
005ef833 : CMP dword ptr [EAX + EBX*0x4],EDI
005ef836 : LEA EAX,[EAX + EBX*0x4]
005ef839 : JZ 0x005ef861
005ef83b : MOV EDI,dword ptr [EAX]
005ef83d : TEST EDI,EDI
005ef83f : JZ 0x005ef861
005ef841 : CMP dword ptr [EDI + 0xc],0x0
005ef845 : JNZ 0x005ef853
005ef847 : MOV ECX,dword ptr [EDI + 0x10]
005ef84a : TEST ECX,ECX
005ef84c : JZ 0x005ef853
005ef84e : CALL 0x00524240
005ef853 : MOV ECX,dword ptr [EDI]
005ef855 : PUSH ECX
005ef856 : CALL 0x00515cf0
005ef85b : PUSH EDI
005ef85c : CALL 0x00515cf0
005ef861 : INC EBX
005ef862 : XOR EDI,EDI
005ef864 : CMP EBX,EBP
005ef866 : JC 0x005ef831
005ef868 : CMP dword ptr [ESI + 0x4],EDI
005ef86b : JBE 0x005ef88f
005ef86d : TEST dword ptr [ESI + 0x8],0xfffffffe
005ef874 : JBE 0x005ef89d
005ef876 : MOV EAX,dword ptr [ESI]
005ef878 : CMP EAX,EDI
005ef87a : JZ 0x005ef884
005ef87c : PUSH EAX
005ef87d : CALL 0x00515cf0
005ef882 : MOV dword ptr [ESI],EDI
005ef884 : MOV dword ptr [ESI + 0x8],EDI
005ef887 : MOV dword ptr [ESI + 0x4],EDI
005ef88a : POP EDI
005ef88b : POP ESI
005ef88c : POP EBP
005ef88d : POP EBX
005ef88e : RET
005ef88f : CMP dword ptr [ESI + 0x8],EDI
005ef892 : JA 0x005ef89d
005ef894 : PUSH EDI
005ef895 : PUSH ESI
005ef896 : MOV ECX,ESI
005ef898 : CALL 0x005edac0
005ef89d : MOV dword ptr [ESI + 0x4],EDI
005ef8a0 : POP EDI
005ef8a1 : POP ESI
005ef8a2 : POP EBP
005ef8a3 : POP EBX
005ef8a4 : RET
