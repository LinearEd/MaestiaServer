PROGRAM  : Maestia.exe
FUNCTION : FUN_00478000
ENTRY    : 00478000
BODY     : [[00478000, 004781b7] [004781c0, 00478333]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0047812f) */
/* WARNING: Removing unreachable block (ram,0x0047813f) */
/* WARNING: Removing unreachable block (ram,0x0047814b) */
/* WARNING: Removing unreachable block (ram,0x0047814e) */
/* WARNING: Removing unreachable block (ram,0x0047813b) */
/* WARNING: Removing unreachable block (ram,0x0047815b) */
/* WARNING: Removing unreachable block (ram,0x0047816b) */
/* WARNING: Removing unreachable block (ram,0x00478176) */
/* WARNING: Removing unreachable block (ram,0x00478172) */
/* WARNING: Removing unreachable block (ram,0x00478166) */
/* WARNING: Removing unreachable block (ram,0x00478179) */
/* WARNING: Removing unreachable block (ram,0x0047818e) */
/* WARNING: Removing unreachable block (ram,0x00478196) */

void FUN_00478000(int param_1,undefined4 param_2,int *param_3)

{
  int *piVar1;
  undefined4 uVar2;
  int *piVar3;
  int *piVar4;
  undefined1 local_60 [40];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 *local_1c;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7e9c5;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_3 + 0x185) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_38);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_60,&DAT_00ced890);
  }
  local_18 = param_3;
  FUN_00478380(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar4 = (int *)*param_3;
  if (*(char *)((int)piVar4 + 0x185) == '\0') {
    if (*(char *)(param_3[2] + 0x185) == '\0') {
      piVar4 = (int *)param_3[2];
    }
  }
  else {
    piVar4 = (int *)param_3[2];
  }
  piVar3 = (int *)param_3[1];
  if (*(char *)((int)piVar4 + 0x185) == '\0') {
    piVar4[1] = (int)piVar3;
  }
  if (*(int **)(*(int *)(param_1 + 4) + 4) == param_3) {
    *(int **)(*(int *)(param_1 + 4) + 4) = piVar4;
  }
  else if ((int *)*piVar3 == param_3) {
    *piVar3 = (int)piVar4;
  }
  else {
    piVar3[2] = (int)piVar4;
  }
  local_1c = *(undefined4 **)(param_1 + 4);
  if ((int *)*local_1c == param_3) {
    piVar1 = piVar3;
    if (*(char *)((int)piVar4 + 0x185) == '\0') {
      piVar1 = (int *)FUN_00478360();
    }
    *local_1c = piVar1;
  }
  local_1c = *(undefined4 **)(param_1 + 4);
  if (*(int **)((int)local_1c + 8) == param_3) {
    if (*(char *)((int)piVar4 + 0x185) == '\0') {
      uVar2 = FUN_00477d80();
      *(undefined4 *)((int)local_1c + 8) = uVar2;
    }
    else {
      *(int **)((int)local_1c + 8) = piVar3;
    }
  }
  if ((char)local_18[0x61] == '\x01') {
    if (piVar4 != *(int **)(*(int *)(param_1 + 4) + 4)) {
      do {
        piVar1 = piVar3;
        if ((char)piVar4[0x61] != '\x01') break;
        piVar3 = (int *)*piVar1;
        if (piVar4 == piVar3) {
          piVar3 = (int *)piVar1[2];
          if ((char)piVar3[0x61] == '\0') {
            *(undefined1 *)(piVar3 + 0x61) = 1;
            *(undefined1 *)(piVar1 + 0x61) = 0;
            FUN_00477da0(param_1);
            piVar3 = (int *)piVar1[2];
          }
          if (*(char *)((int)piVar3 + 0x185) == '\0') {
            if ((*(char *)(*piVar3 + 0x184) != '\x01') || (*(char *)(piVar3[2] + 0x184) != '\x01'))
            {
              if (*(char *)(piVar3[2] + 0x184) == '\x01') {
                *(undefined1 *)(*piVar3 + 0x184) = 1;
                *(undefined1 *)(piVar3 + 0x61) = 0;
                FUN_00477e00(param_1);
                piVar3 = (int *)piVar1[2];
              }
              *(char *)(piVar3 + 0x61) = (char)piVar1[0x61];
              *(undefined1 *)(piVar1 + 0x61) = 1;
              *(undefined1 *)(piVar3[2] + 0x184) = 1;
              FUN_00477da0(param_1);
              break;
            }
LAB_004782b2:
            *(undefined1 *)(piVar3 + 0x61) = 0;
          }
        }
        else {
          if ((char)piVar3[0x61] == '\0') {
            *(undefined1 *)(piVar3 + 0x61) = 1;
            *(undefined1 *)(piVar1 + 0x61) = 0;
            FUN_00477e00(param_1);
            piVar3 = (int *)*piVar1;
          }
          if (*(char *)((int)piVar3 + 0x185) == '\0') {
            if ((*(char *)(piVar3[2] + 0x184) == '\x01') && (*(char *)(*piVar3 + 0x184) == '\x01'))
            goto LAB_004782b2;
            if (*(char *)(*piVar3 + 0x184) == '\x01') {
              *(undefined1 *)(piVar3[2] + 0x184) = 1;
              *(undefined1 *)(piVar3 + 0x61) = 0;
              FUN_00477da0(param_1);
              piVar3 = (int *)*piVar1;
            }
            *(char *)(piVar3 + 0x61) = (char)piVar1[0x61];
            *(undefined1 *)(piVar1 + 0x61) = 1;
            *(undefined1 *)(*piVar3 + 0x184) = 1;
            FUN_00477e00(param_1);
            break;
          }
        }
        piVar3 = (int *)piVar1[1];
        piVar4 = piVar1;
      } while (piVar1 != *(int **)(*(int *)(param_1 + 4) + 4));
    }
    *(undefined1 *)(piVar4 + 0x61) = 1;
  }
  local_8 = 0xffffffff;
  FUN_00477e60(local_18 + 3);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00478000 : PUSH EBP
00478001 : MOV EBP,ESP
00478003 : PUSH -0x1
00478005 : PUSH 0xb7e9c5
0047800a : MOV EAX,FS:[0x0]
00478010 : PUSH EAX
00478011 : SUB ESP,0x50
00478014 : PUSH EBX
00478015 : PUSH ESI
00478016 : PUSH EDI
00478017 : MOV EAX,[0x00d66fa0]
0047801c : XOR EAX,EBP
0047801e : PUSH EAX
0047801f : LEA EAX,[EBP + -0xc]
00478022 : MOV FS:[0x0],EAX
00478028 : MOV EAX,dword ptr [EBP + 0x10]
0047802b : CMP byte ptr [EAX + 0x185],0x0
00478032 : JZ 0x00478070
00478034 : PUSH 0x1b
00478036 : XOR ESI,ESI
00478038 : PUSH 0xcca4a8
0047803d : LEA ECX,[EBP + -0x34]
00478040 : MOV dword ptr [EBP + -0x1c],0xf
00478047 : MOV dword ptr [EBP + -0x20],ESI
0047804a : MOV byte ptr [EBP + -0x30],0x0
0047804e : CALL 0x00404b50
00478053 : MOV dword ptr [EBP + -0x4],ESI
00478056 : LEA EAX,[EBP + -0x34]
00478059 : PUSH EAX
0047805a : LEA ECX,[EBP + -0x5c]
0047805d : CALL 0x00403c10
00478062 : PUSH 0xced890
00478067 : LEA ECX,[EBP + -0x5c]
0047806a : PUSH ECX
0047806b : CALL 0x006409eb
00478070 : MOV EBX,EAX
00478072 : LEA EDX,[EBP + 0x10]
00478075 : MOV dword ptr [EBP + -0x14],EBX
00478078 : CALL 0x00478380
0047807d : MOV ECX,dword ptr [EBX]
0047807f : CMP byte ptr [ECX + 0x185],0x0
00478086 : JZ 0x0047808d
00478088 : MOV EDI,dword ptr [EBX + 0x8]
0047808b : JMP 0x004780ae
0047808d : MOV EDX,dword ptr [EBX + 0x8]
00478090 : CMP byte ptr [EDX + 0x185],0x0
00478097 : JZ 0x0047809d
00478099 : MOV EDI,ECX
0047809b : JMP 0x004780ae
0047809d : MOV EAX,dword ptr [EBP + 0x10]
004780a0 : MOV EDI,dword ptr [EAX + 0x8]
004780a3 : LEA EDX,[EAX + 0x8]
004780a6 : CMP EAX,EBX
004780a8 : JNZ 0x0047812f
004780ae : CMP byte ptr [EDI + 0x185],0x0
004780b5 : MOV ESI,dword ptr [EBX + 0x4]
004780b8 : JNZ 0x004780bd
004780ba : MOV dword ptr [EDI + 0x4],ESI
004780bd : MOV EDX,dword ptr [EBP + 0x8]
004780c0 : MOV EAX,dword ptr [EDX + 0x4]
004780c3 : CMP dword ptr [EAX + 0x4],EBX
004780c6 : JNZ 0x004780cd
004780c8 : MOV dword ptr [EAX + 0x4],EDI
004780cb : JMP 0x004780d8
004780cd : CMP dword ptr [ESI],EBX
004780cf : JNZ 0x004780d5
004780d1 : MOV dword ptr [ESI],EDI
004780d3 : JMP 0x004780d8
004780d5 : MOV dword ptr [ESI + 0x8],EDI
004780d8 : MOV ECX,dword ptr [EDX + 0x4]
004780db : MOV dword ptr [EBP + -0x18],ECX
004780de : CMP dword ptr [ECX],EBX
004780e0 : JNZ 0x004780fe
004780e2 : CMP byte ptr [EDI + 0x185],0x0
004780e9 : JZ 0x004780ef
004780eb : MOV EAX,ESI
004780ed : JMP 0x004780fc
004780ef : MOV EAX,EDI
004780f1 : CALL 0x00478360
004780f6 : MOV EDX,dword ptr [EBP + 0x8]
004780f9 : MOV ECX,dword ptr [EBP + -0x18]
004780fc : MOV dword ptr [ECX],EAX
004780fe : MOV ECX,dword ptr [EDX + 0x4]
00478101 : MOV dword ptr [EBP + -0x18],ECX
00478104 : CMP dword ptr [ECX + 0x8],EBX
00478107 : JNZ 0x00478199
0047810d : CMP byte ptr [EDI + 0x185],0x0
00478114 : JZ 0x0047811d
00478116 : MOV EAX,ESI
00478118 : MOV dword ptr [ECX + 0x8],EAX
0047811b : JMP 0x00478199
0047811d : MOV EAX,EDI
0047811f : CALL 0x00477d80
00478124 : MOV ECX,dword ptr [EBP + -0x18]
00478127 : MOV EDX,dword ptr [EBP + 0x8]
0047812a : MOV dword ptr [ECX + 0x8],EAX
0047812d : JMP 0x00478199
0047812f : MOV dword ptr [ECX + 0x4],EAX
00478132 : MOV ECX,dword ptr [EBX]
00478134 : MOV dword ptr [EAX],ECX
00478136 : CMP EAX,dword ptr [EBX + 0x8]
00478139 : JNZ 0x0047813f
0047813b : MOV ESI,EAX
0047813d : JMP 0x0047815b
0047813f : CMP byte ptr [EDI + 0x185],0x0
00478146 : MOV ESI,dword ptr [EAX + 0x4]
00478149 : JNZ 0x0047814e
0047814b : MOV dword ptr [EDI + 0x4],ESI
0047814e : MOV dword ptr [ESI],EDI
00478150 : MOV ECX,dword ptr [EBX + 0x8]
00478153 : MOV dword ptr [EDX],ECX
00478155 : MOV EDX,dword ptr [EBX + 0x8]
00478158 : MOV dword ptr [EDX + 0x4],EAX
0047815b : MOV ECX,dword ptr [EBP + 0x8]
0047815e : MOV ECX,dword ptr [ECX + 0x4]
00478161 : CMP dword ptr [ECX + 0x4],EBX
00478164 : JNZ 0x0047816b
00478166 : MOV dword ptr [ECX + 0x4],EAX
00478169 : JMP 0x00478179
0047816b : MOV ECX,dword ptr [EBX + 0x4]
0047816e : CMP dword ptr [ECX],EBX
00478170 : JNZ 0x00478176
00478172 : MOV dword ptr [ECX],EAX
00478174 : JMP 0x00478179
00478176 : MOV dword ptr [ECX + 0x8],EAX
00478179 : MOV EDX,dword ptr [EBX + 0x4]
0047817c : MOV dword ptr [EAX + 0x4],EDX
0047817f : LEA ECX,[EBX + 0x184]
00478185 : ADD EAX,0x184
0047818a : CMP EAX,ECX
0047818c : JZ 0x00478196
0047818e : MOV BL,byte ptr [ECX]
00478190 : MOV DL,byte ptr [EAX]
00478192 : MOV byte ptr [EAX],BL
00478194 : MOV byte ptr [ECX],DL
00478196 : MOV EDX,dword ptr [EBP + 0x8]
00478199 : MOV EAX,dword ptr [EBP + -0x14]
0047819c : MOV BL,0x1
0047819e : CMP byte ptr [EAX + 0x184],BL
004781a4 : JNZ 0x00478319
004781aa : MOV ECX,dword ptr [EDX + 0x4]
004781ad : CMP EDI,dword ptr [ECX + 0x4]
004781b0 : JZ 0x00478313
004781b6 : JMP 0x004781c0
004781c0 : CMP byte ptr [EDI + 0x184],BL
004781c6 : JNZ 0x00478313
004781cc : MOV ECX,dword ptr [ESI]
004781ce : CMP EDI,ECX
004781d0 : JNZ 0x00478271
004781d6 : MOV ECX,dword ptr [ESI + 0x8]
004781d9 : CMP byte ptr [ECX + 0x184],0x0
004781e0 : JNZ 0x004781fd
004781e2 : MOV byte ptr [ECX + 0x184],BL
004781e8 : PUSH EDX
004781e9 : MOV ECX,ESI
004781eb : MOV byte ptr [ESI + 0x184],0x0
004781f2 : CALL 0x00477da0
004781f7 : MOV ECX,dword ptr [ESI + 0x8]
004781fa : MOV EDX,dword ptr [EBP + 0x8]
004781fd : CMP byte ptr [ECX + 0x185],0x0
00478204 : JNZ 0x004782b9
0047820a : MOV EAX,dword ptr [ECX]
0047820c : CMP byte ptr [EAX + 0x184],BL
00478212 : JNZ 0x00478223
00478214 : MOV EAX,dword ptr [ECX + 0x8]
00478217 : CMP byte ptr [EAX + 0x184],BL
0047821d : JZ 0x004782b2
00478223 : MOV EAX,dword ptr [ECX + 0x8]
00478226 : CMP byte ptr [EAX + 0x184],BL
0047822c : JNZ 0x00478249
0047822e : MOV EAX,dword ptr [ECX]
00478230 : MOV byte ptr [EAX + 0x184],BL
00478236 : PUSH EDX
00478237 : MOV byte ptr [ECX + 0x184],0x0
0047823e : CALL 0x00477e00
00478243 : MOV ECX,dword ptr [ESI + 0x8]
00478246 : MOV EDX,dword ptr [EBP + 0x8]
00478249 : MOV AL,byte ptr [ESI + 0x184]
0047824f : MOV byte ptr [ECX + 0x184],AL
00478255 : MOV byte ptr [ESI + 0x184],BL
0047825b : MOV ECX,dword ptr [ECX + 0x8]
0047825e : MOV byte ptr [ECX + 0x184],BL
00478264 : PUSH EDX
00478265 : MOV ECX,ESI
00478267 : CALL 0x00477da0
0047826c : JMP 0x00478313
00478271 : CMP byte ptr [ECX + 0x184],0x0
00478278 : JNZ 0x00478294
0047827a : MOV byte ptr [ECX + 0x184],BL
00478280 : PUSH EDX
00478281 : MOV ECX,ESI
00478283 : MOV byte ptr [ESI + 0x184],0x0
0047828a : CALL 0x00477e00
0047828f : MOV ECX,dword ptr [ESI]
00478291 : MOV EDX,dword ptr [EBP + 0x8]
00478294 : CMP byte ptr [ECX + 0x185],0x0
0047829b : JNZ 0x004782b9
0047829d : MOV EAX,dword ptr [ECX + 0x8]
004782a0 : CMP byte ptr [EAX + 0x184],BL
004782a6 : JNZ 0x004782cc
004782a8 : MOV EAX,dword ptr [ECX]
004782aa : CMP byte ptr [EAX + 0x184],BL
004782b0 : JNZ 0x004782cc
004782b2 : MOV byte ptr [ECX + 0x184],0x0
004782b9 : MOV ECX,dword ptr [EDX + 0x4]
004782bc : MOV EDI,ESI
004782be : MOV ESI,dword ptr [ESI + 0x4]
004782c1 : CMP EDI,dword ptr [ECX + 0x4]
004782c4 : JNZ 0x004781c0
004782ca : JMP 0x00478313
004782cc : MOV EAX,dword ptr [ECX]
004782ce : CMP byte ptr [EAX + 0x184],BL
004782d4 : JNZ 0x004782f1
004782d6 : MOV EAX,dword ptr [ECX + 0x8]
004782d9 : MOV byte ptr [EAX + 0x184],BL
004782df : PUSH EDX
004782e0 : MOV byte ptr [ECX + 0x184],0x0
004782e7 : CALL 0x00477da0
004782ec : MOV ECX,dword ptr [ESI]
004782ee : MOV EDX,dword ptr [EBP + 0x8]
004782f1 : MOV AL,byte ptr [ESI + 0x184]
004782f7 : MOV byte ptr [ECX + 0x184],AL
004782fd : MOV byte ptr [ESI + 0x184],BL
00478303 : MOV ECX,dword ptr [ECX]
00478305 : MOV byte ptr [ECX + 0x184],BL
0047830b : PUSH EDX
0047830c : MOV ECX,ESI
0047830e : CALL 0x00477e00
00478313 : MOV byte ptr [EDI + 0x184],BL
00478319 : MOV dword ptr [EBP + -0x4],0xffffffff
00478320 : MOV EDX,dword ptr [EBP + -0x14]
00478323 : ADD EDX,0xc
00478326 : PUSH EDX
00478327 : CALL 0x00477e60
0047832c : MOV ECX,dword ptr [EBP + -0x14]
0047832f : CALL 0x006f04e0
