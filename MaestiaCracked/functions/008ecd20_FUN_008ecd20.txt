PROGRAM  : Maestia.exe
FUNCTION : FUN_008ecd20
ENTRY    : 008ecd20
BODY     : [[008ecd20, 008ecdf3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008ecd20(undefined4 param_1,undefined4 *param_2)

{
  uint uVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  uint uVar4;
  int unaff_ESI;
  uint uVar5;
  uint in_stack_00000018;
  uint in_stack_0000001c;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b1e44e;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar5 = 0;
  local_8 = 1;
  *(undefined4 *)(unaff_ESI + 0x18) = 7;
  *(undefined4 *)(unaff_ESI + 0x14) = 0;
  *(undefined2 *)(unaff_ESI + 4) = 0;
  FUN_00406360(&DAT_00c5f8dc,0);
  puVar2 = param_2;
  uVar4 = in_stack_0000001c;
  if (in_stack_00000018 != 0) {
    do {
      puVar3 = puVar2;
      if (uVar4 < 8) {
        puVar3 = &param_2;
      }
      if (*(short *)((int)puVar3 + uVar5 * 2) != 0x20) {
        if (uVar4 < 8) {
          puVar2 = &param_2;
        }
        FUN_0041f950(1,*(undefined2 *)((int)puVar2 + uVar5 * 2));
        puVar2 = param_2;
        uVar4 = in_stack_0000001c;
      }
      uVar5 = uVar5 + 1;
    } while (uVar5 < in_stack_00000018);
  }
  local_8 = local_8 & 0xffffff00;
  if (in_stack_0000001c < 8) {
    ExceptionList = local_10;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0(uVar1);
}



============================================================
DISASSEMBLY
============================================================
008ecd20 : PUSH EBP
008ecd21 : MOV EBP,ESP
008ecd23 : PUSH -0x1
008ecd25 : PUSH 0xb1e44e
008ecd2a : MOV EAX,FS:[0x0]
008ecd30 : PUSH EAX
008ecd31 : SUB ESP,0x8
008ecd34 : PUSH EDI
008ecd35 : MOV EAX,[0x00d66fa0]
008ecd3a : XOR EAX,EBP
008ecd3c : PUSH EAX
008ecd3d : LEA EAX,[EBP + -0xc]
008ecd40 : MOV FS:[0x0],EAX
008ecd46 : XOR EDI,EDI
008ecd48 : MOV dword ptr [EBP + -0x4],EDI
008ecd4b : MOV dword ptr [EBP + -0x14],ESI
008ecd4e : MOV dword ptr [EBP + -0x10],EDI
008ecd51 : MOV dword ptr [EBP + -0x4],0x1
008ecd58 : PUSH EDI
008ecd59 : XOR EAX,EAX
008ecd5b : MOV dword ptr [ESI + 0x18],0x7
008ecd62 : MOV dword ptr [ESI + 0x14],EDI
008ecd65 : PUSH 0xc5f8dc
008ecd6a : MOV ECX,ESI
008ecd6c : MOV word ptr [ESI + 0x4],AX
008ecd70 : CALL 0x00406360
008ecd75 : MOV dword ptr [EBP + -0x10],0x1
008ecd7c : CMP dword ptr [EBP + 0x1c],EDI
008ecd7f : JBE 0x008ecdba
008ecd81 : MOV EDX,dword ptr [EBP + 0x20]
008ecd84 : MOV EAX,dword ptr [EBP + 0xc]
008ecd87 : MOV ECX,EAX
008ecd89 : CMP EDX,0x8
008ecd8c : JNC 0x008ecd91
008ecd8e : LEA ECX,[EBP + 0xc]
008ecd91 : CMP word ptr [ECX + EDI*0x2],0x20
008ecd96 : JZ 0x008ecdb4
008ecd98 : CMP EDX,0x8
008ecd9b : JNC 0x008ecda0
008ecd9d : LEA EAX,[EBP + 0xc]
008ecda0 : MOVZX EAX,word ptr [EAX + EDI*0x2]
008ecda4 : PUSH EAX
008ecda5 : PUSH 0x1
008ecda7 : MOV ECX,ESI
008ecda9 : CALL 0x0041f950
008ecdae : MOV EDX,dword ptr [EBP + 0x20]
008ecdb1 : MOV EAX,dword ptr [EBP + 0xc]
008ecdb4 : INC EDI
008ecdb5 : CMP EDI,dword ptr [EBP + 0x1c]
008ecdb8 : JC 0x008ecd87
008ecdba : MOV byte ptr [EBP + -0x4],0x0
008ecdbe : CMP dword ptr [EBP + 0x20],0x8
008ecdc2 : JC 0x008ecdcc
008ecdc4 : MOV ECX,dword ptr [EBP + 0xc]
008ecdc7 : CALL 0x006f04e0
008ecdcc : XOR ECX,ECX
008ecdce : MOV dword ptr [EBP + 0x20],0x7
008ecdd5 : MOV dword ptr [EBP + 0x1c],0x0
008ecddc : MOV word ptr [EBP + 0xc],CX
008ecde0 : MOV EAX,ESI
008ecde2 : MOV ECX,dword ptr [EBP + -0xc]
008ecde5 : MOV dword ptr FS:[0x0],ECX
008ecdec : POP ECX
008ecded : POP EDI
008ecdee : MOV ESP,EBP
008ecdf0 : POP EBP
008ecdf1 : RET 0x1c
