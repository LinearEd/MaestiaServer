PROGRAM  : Maestia.exe
FUNCTION : FUN_0069a990
ENTRY    : 0069a990
BODY     : [[0069a990, 0069aacd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0069a990(undefined4 param_1,undefined4 param_2,int param_3,int param_4)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint *puVar4;
  uint *in_EDX;
  uint uVar5;
  int iVar6;
  uint *puVar7;
  int local_8;
  
  if (param_4 == 0) {
    puVar7 = in_EDX + 0x81;
  }
  else {
    puVar7 = in_EDX + 0x183;
    in_EDX = in_EDX + 0x102;
  }
  *in_EDX = 0;
  *puVar7 = 0;
  FUN_0069a850(0);
  FUN_0069a850(1,param_2,in_EDX,puVar7);
  uVar3 = *in_EDX;
  uVar1 = *puVar7;
  if (0 < (int)uVar3) {
    puVar4 = in_EDX + 1;
    for (uVar5 = uVar3; uVar5 != 0; uVar5 = uVar5 - 1) {
      if ((1 < uVar5) && ((int)(puVar4[8] - *puVar4) < (int)puVar4[1])) {
        puVar4[1] = puVar4[8] - *puVar4;
      }
      puVar4[3] = *puVar4;
      puVar4[2] = puVar4[1] + *puVar4;
      puVar4 = puVar4 + 8;
    }
  }
  if (0 < (int)uVar1) {
    puVar4 = puVar7 + 1;
    for (uVar5 = uVar1; uVar5 != 0; uVar5 = uVar5 - 1) {
      if ((1 < uVar5) && ((int)puVar4[1] < (int)(*puVar4 - puVar4[8]))) {
        puVar4[1] = *puVar4 - puVar4[8];
      }
      puVar4[2] = *puVar4;
      puVar4[3] = puVar4[1] + *puVar4;
      puVar4 = puVar4 + 8;
    }
  }
  local_8 = 1;
  do {
    puVar4 = in_EDX + 1;
    if (uVar3 != 0) {
      in_EDX[4] = in_EDX[4] - param_3;
      iVar6 = uVar3 - 1;
      uVar3 = in_EDX[3];
      if (iVar6 != 0) {
        do {
          iVar2 = puVar4[0xb] - uVar3;
          if (iVar2 < param_3 * 2) {
            uVar3 = iVar2 / 2 + uVar3;
            puVar4[0xb] = uVar3;
            puVar4[2] = uVar3;
          }
          else {
            puVar4[2] = uVar3 + param_3;
            puVar4[0xb] = puVar4[0xb] - param_3;
          }
          uVar3 = puVar4[10];
          puVar4 = puVar4 + 8;
          iVar6 = iVar6 + -1;
        } while (iVar6 != 0);
      }
      puVar4[2] = uVar3 + param_3;
    }
    local_8 = local_8 + -1;
    uVar3 = uVar1;
    in_EDX = puVar7;
  } while (-1 < local_8);
  return;
}



============================================================
DISASSEMBLY
============================================================
0069a990 : SUB ESP,0x8
0069a993 : CMP dword ptr [ESP + 0x18],0x0
0069a998 : PUSH EBX
0069a999 : PUSH EBP
0069a99a : MOV EBP,dword ptr [ESP + 0x1c]
0069a99e : PUSH ESI
0069a99f : PUSH EDI
0069a9a0 : MOV EDI,EDX
0069a9a2 : JZ 0x0069a9b2
0069a9a4 : LEA ESI,[EDI + 0x408]
0069a9aa : ADD EDI,0x60c
0069a9b0 : JMP 0x0069a9ba
0069a9b2 : MOV ESI,EDI
0069a9b4 : ADD EDI,0x204
0069a9ba : PUSH EDI
0069a9bb : PUSH ESI
0069a9bc : PUSH EAX
0069a9bd : MOV dword ptr [ESI],0x0
0069a9c3 : PUSH 0x0
0069a9c5 : MOV dword ptr [EDI],0x0
0069a9cb : CALL 0x0069a850
0069a9d0 : MOV ECX,dword ptr [ESP + 0x30]
0069a9d4 : PUSH EDI
0069a9d5 : PUSH ESI
0069a9d6 : PUSH ECX
0069a9d7 : MOV ECX,dword ptr [ESP + 0x38]
0069a9db : PUSH 0x1
0069a9dd : CALL 0x0069a850
0069a9e2 : MOV EBX,dword ptr [ESI]
0069a9e4 : MOV ECX,dword ptr [EDI]
0069a9e6 : ADD ESP,0x20
0069a9e9 : MOV dword ptr [ESP + 0x28],ECX
0069a9ed : TEST EBX,EBX
0069a9ef : JLE 0x0069aa27
0069a9f1 : LEA EAX,[ESI + 0x4]
0069a9f4 : MOV EDX,EBX
0069a9f6 : JBE 0x0069aa27
0069a9f8 : CMP EDX,0x1
0069a9fb : JBE 0x0069aa0a
0069a9fd : MOV ECX,dword ptr [EAX + 0x20]
0069aa00 : SUB ECX,dword ptr [EAX]
0069aa02 : CMP dword ptr [EAX + 0x4],ECX
0069aa05 : JLE 0x0069aa0a
0069aa07 : MOV dword ptr [EAX + 0x4],ECX
0069aa0a : MOV ECX,dword ptr [EAX]
0069aa0c : MOV EBP,dword ptr [EAX + 0x4]
0069aa0f : ADD EBP,ECX
0069aa11 : MOV dword ptr [EAX + 0xc],ECX
0069aa14 : MOV dword ptr [EAX + 0x8],EBP
0069aa17 : DEC EDX
0069aa18 : ADD EAX,0x20
0069aa1b : TEST EDX,EDX
0069aa1d : JA 0x0069a9f8
0069aa1f : MOV EBP,dword ptr [ESP + 0x24]
0069aa23 : MOV ECX,dword ptr [ESP + 0x28]
0069aa27 : TEST ECX,ECX
0069aa29 : JLE 0x0069aa5d
0069aa2b : LEA EAX,[EDI + 0x4]
0069aa2e : MOV EDX,ECX
0069aa30 : JBE 0x0069aa5d
0069aa32 : CMP EDX,0x1
0069aa35 : JBE 0x0069aa44
0069aa37 : MOV ECX,dword ptr [EAX]
0069aa39 : SUB ECX,dword ptr [EAX + 0x20]
0069aa3c : CMP dword ptr [EAX + 0x4],ECX
0069aa3f : JGE 0x0069aa44
0069aa41 : MOV dword ptr [EAX + 0x4],ECX
0069aa44 : MOV ECX,dword ptr [EAX]
0069aa46 : MOV EBP,dword ptr [EAX + 0x4]
0069aa49 : ADD EBP,ECX
0069aa4b : MOV dword ptr [EAX + 0x8],ECX
0069aa4e : MOV dword ptr [EAX + 0xc],EBP
0069aa51 : DEC EDX
0069aa52 : ADD EAX,0x20
0069aa55 : TEST EDX,EDX
0069aa57 : JA 0x0069aa32
0069aa59 : MOV EBP,dword ptr [ESP + 0x24]
0069aa5d : ADD EDI,0x4
0069aa60 : LEA ECX,[ESI + 0x4]
0069aa63 : MOV dword ptr [ESP + 0x10],0x1
0069aa6b : MOV dword ptr [ESP + 0x14],EDI
0069aa6f : NOP
0069aa70 : TEST EBX,EBX
0069aa72 : JBE 0x0069aab7
0069aa74 : SUB dword ptr [ECX + 0xc],EBP
0069aa77 : SUB EBX,0x1
0069aa7a : MOV ESI,dword ptr [ECX + 0x8]
0069aa7d : JZ 0x0069aab2
0069aa7f : LEA EDI,[EBP + EBP*0x1]
0069aa83 : MOV EDX,dword ptr [ECX + 0x2c]
0069aa86 : MOV EAX,EDX
0069aa88 : SUB EAX,ESI
0069aa8a : CMP EAX,EDI
0069aa8c : JGE 0x0069aa9d
0069aa8e : CDQ
0069aa8f : SUB EAX,EDX
0069aa91 : SAR EAX,0x1
0069aa93 : ADD EAX,ESI
0069aa95 : MOV dword ptr [ECX + 0x2c],EAX
0069aa98 : MOV dword ptr [ECX + 0x8],EAX
0069aa9b : JMP 0x0069aaa7
0069aa9d : ADD ESI,EBP
0069aa9f : SUB EDX,EBP
0069aaa1 : MOV dword ptr [ECX + 0x8],ESI
0069aaa4 : MOV dword ptr [ECX + 0x2c],EDX
0069aaa7 : MOV ESI,dword ptr [ECX + 0x28]
0069aaaa : ADD ECX,0x20
0069aaad : SUB EBX,0x1
0069aab0 : JNZ 0x0069aa83
0069aab2 : ADD ESI,EBP
0069aab4 : MOV dword ptr [ECX + 0x8],ESI
0069aab7 : SUB dword ptr [ESP + 0x10],0x1
0069aabc : MOV ECX,dword ptr [ESP + 0x14]
0069aac0 : MOV EBX,dword ptr [ESP + 0x28]
0069aac4 : JNS 0x0069aa70
0069aac6 : POP EDI
0069aac7 : POP ESI
0069aac8 : POP EBP
0069aac9 : POP EBX
0069aaca : ADD ESP,0x8
0069aacd : RET
