PROGRAM  : Maestia.exe
FUNCTION : FUN_00560c60
ENTRY    : 00560c60
BODY     : [[00560c60, 00560cf6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00560c60(undefined4 param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  GRefCountNTSImpl *pGVar2;
  GRefCountNTSImpl *this;
  uint uVar3;
  int iVar4;
  int *in_ECX;
  
  pGVar2 = (GRefCountNTSImpl *)*param_2;
  if (pGVar2 != (GRefCountNTSImpl *)0x0) {
    *(int *)(pGVar2 + 4) = *(int *)(pGVar2 + 4) + 1;
  }
  uVar3 = FUN_0055ee60(pGVar2);
  if (pGVar2 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(pGVar2);
  }
  if ((*in_ECX != 0) && (iVar4 = FUN_0055f2d0(param_2,*(uint *)(*in_ECX + 4) & uVar3), -1 < iVar4))
  {
    pGVar2 = (GRefCountNTSImpl *)*param_2;
    if (pGVar2 != (GRefCountNTSImpl *)0x0) {
      *(int *)(pGVar2 + 4) = *(int *)(pGVar2 + 4) + 1;
    }
    puVar1 = (undefined4 *)(*in_ECX + 0x10 + iVar4 * 0xc);
    if (pGVar2 != (GRefCountNTSImpl *)0x0) {
      *(int *)(pGVar2 + 4) = *(int *)(pGVar2 + 4) + 1;
    }
    this = (GRefCountNTSImpl *)*puVar1;
    if (this != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(this);
    }
    *puVar1 = pGVar2;
    if (pGVar2 == (GRefCountNTSImpl *)0x0) {
      return;
    }
    GRefCountNTSImpl::Release(pGVar2);
    return;
  }
  FUN_00560a30(param_1,param_2,uVar3);
  return;
}



============================================================
DISASSEMBLY
============================================================
00560c60 : PUSH ECX
00560c61 : PUSH EBX
00560c62 : MOV EBX,dword ptr [ESP + 0x10]
00560c66 : PUSH EBP
00560c67 : PUSH ESI
00560c68 : MOV ESI,dword ptr [EBX]
00560c6a : PUSH EDI
00560c6b : MOV EDI,ECX
00560c6d : TEST ESI,ESI
00560c6f : JZ 0x00560c74
00560c71 : INC dword ptr [ESI + 0x4]
00560c74 : PUSH ESI
00560c75 : LEA ECX,[ESP + 0x17]
00560c79 : MOV byte ptr [ESP + 0x20],0x0
00560c7e : CALL 0x0055ee60
00560c83 : MOV EBP,EAX
00560c85 : TEST ESI,ESI
00560c87 : JZ 0x00560c90
00560c89 : MOV ECX,ESI
00560c8b : CALL 0x004ff7c0
00560c90 : MOV EAX,dword ptr [EDI]
00560c92 : TEST EAX,EAX
00560c94 : JZ 0x00560ce1
00560c96 : MOV EAX,dword ptr [EAX + 0x4]
00560c99 : AND EAX,EBP
00560c9b : PUSH EAX
00560c9c : PUSH EBX
00560c9d : MOV ECX,EDI
00560c9f : CALL 0x0055f2d0
00560ca4 : TEST EAX,EAX
00560ca6 : JL 0x00560ce1
00560ca8 : MOV ESI,dword ptr [EBX]
00560caa : TEST ESI,ESI
00560cac : JZ 0x00560cb1
00560cae : INC dword ptr [ESI + 0x4]
00560cb1 : MOV EDX,dword ptr [EDI]
00560cb3 : LEA ECX,[EAX + EAX*0x2]
00560cb6 : LEA EDI,[EDX + ECX*0x4 + 0x10]
00560cba : TEST ESI,ESI
00560cbc : JZ 0x00560cc1
00560cbe : INC dword ptr [ESI + 0x4]
00560cc1 : MOV ECX,dword ptr [EDI]
00560cc3 : TEST ECX,ECX
00560cc5 : JZ 0x00560ccc
00560cc7 : CALL 0x004ff7c0
00560ccc : MOV dword ptr [EDI],ESI
00560cce : TEST ESI,ESI
00560cd0 : JZ 0x00560cef
00560cd2 : MOV ECX,ESI
00560cd4 : CALL 0x004ff7c0
00560cd9 : POP EDI
00560cda : POP ESI
00560cdb : POP EBP
00560cdc : POP EBX
00560cdd : POP ECX
00560cde : RET 0x8
00560ce1 : MOV EAX,dword ptr [ESP + 0x18]
00560ce5 : PUSH EBP
00560ce6 : PUSH EBX
00560ce7 : PUSH EAX
00560ce8 : MOV ECX,EDI
00560cea : CALL 0x00560a30
00560cef : POP EDI
00560cf0 : POP ESI
00560cf1 : POP EBP
00560cf2 : POP EBX
00560cf3 : POP ECX
00560cf4 : RET 0x8
