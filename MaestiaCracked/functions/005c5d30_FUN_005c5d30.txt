PROGRAM  : Maestia.exe
FUNCTION : FUN_005c5d30
ENTRY    : 005c5d30
BODY     : [[005c5d30, 005c5e2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c5d30(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  int *piVar3;
  uint *puVar4;
  int *in_ECX;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  
  piVar3 = (int *)*in_ECX;
  if (piVar3 == (int *)0x0) {
    iVar8 = 8;
  }
  else {
    if ((uint)(*piVar3 * 5) <= piVar3[1] * 4 + 4U) goto LAB_005c5d6b;
    iVar8 = piVar3[1] * 2 + 2;
  }
  FUN_005c5bb0(param_1,iVar8);
LAB_005c5d6b:
  piVar3 = (int *)*in_ECX;
  param_3 = param_3 & piVar3[1];
  *piVar3 = *piVar3 + 1;
  iVar8 = *in_ECX;
  puVar1 = (uint *)(param_3 * 0x10 + 8 + iVar8);
  if (*puVar1 == 0xfffffffe) {
    FUN_005c52d0(param_2,0xffffffff);
    return;
  }
  uVar7 = param_3;
  do {
    uVar7 = uVar7 + 1 & *(uint *)(iVar8 + 4);
  } while (*(int *)(uVar7 * 0x10 + 8 + iVar8) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar8 + 4);
  iVar2 = uVar7 * 0x10 + 8 + iVar8;
  if (uVar5 != param_3) {
    iVar6 = uVar5 * 0x10;
    uVar5 = *(uint *)(iVar6 + 8 + iVar8);
    while (puVar4 = (uint *)(iVar6 + 8 + iVar8), uVar5 != param_3) {
      iVar6 = *puVar4 * 0x10;
      uVar5 = *(uint *)(iVar6 + 8 + iVar8);
    }
    if (iVar2 != 0) {
      FUN_005c5410(puVar1);
    }
    *puVar4 = uVar7;
    FUN_005c4900(param_2);
    *puVar1 = 0xffffffff;
    return;
  }
  if (iVar2 != 0) {
    FUN_005c5410(puVar1);
  }
  FUN_005c4900(param_2);
  *puVar1 = uVar7;
  return;
}



============================================================
DISASSEMBLY
============================================================
005c5d30 : PUSH EBP
005c5d31 : PUSH ESI
005c5d32 : PUSH EDI
005c5d33 : MOV EDI,ECX
005c5d35 : MOV EAX,dword ptr [EDI]
005c5d37 : TEST EAX,EAX
005c5d39 : JNZ 0x005c5d44
005c5d3b : MOV EAX,dword ptr [ESP + 0x10]
005c5d3f : PUSH 0x8
005c5d41 : PUSH EAX
005c5d42 : JMP 0x005c5d66
005c5d44 : MOV ECX,dword ptr [EAX + 0x4]
005c5d47 : LEA EDX,[ECX*0x4 + 0x4]
005c5d4e : MOV ECX,dword ptr [EAX]
005c5d50 : LEA ECX,[ECX + ECX*0x4]
005c5d53 : CMP ECX,EDX
005c5d55 : JBE 0x005c5d6b
005c5d57 : MOV EDX,dword ptr [EAX + 0x4]
005c5d5a : MOV ECX,dword ptr [ESP + 0x10]
005c5d5e : LEA EAX,[EDX + EDX*0x1 + 0x2]
005c5d62 : PUSH EAX
005c5d63 : PUSH ECX
005c5d64 : MOV ECX,EDI
005c5d66 : CALL 0x005c5bb0
005c5d6b : MOV EAX,dword ptr [EDI]
005c5d6d : MOV ESI,dword ptr [ESP + 0x18]
005c5d71 : AND ESI,dword ptr [EAX + 0x4]
005c5d74 : INC dword ptr [EAX]
005c5d76 : MOV EAX,dword ptr [EDI]
005c5d78 : MOV EDX,ESI
005c5d7a : SHL EDX,0x4
005c5d7d : LEA EBP,[EDX + EAX*0x1 + 0x8]
005c5d81 : MOV ECX,0xfffffffe
005c5d86 : CMP dword ptr [EBP],ECX
005c5d89 : JNZ 0x005c5d9f
005c5d8b : MOV EAX,dword ptr [ESP + 0x14]
005c5d8f : PUSH -0x1
005c5d91 : PUSH EAX
005c5d92 : MOV ECX,EBP
005c5d94 : CALL 0x005c52d0
005c5d99 : POP EDI
005c5d9a : POP ESI
005c5d9b : POP EBP
005c5d9c : RET 0xc
005c5d9f : PUSH EBX
005c5da0 : MOV EBX,dword ptr [EAX + 0x4]
005c5da3 : MOV EDI,ESI
005c5da5 : INC EDI
005c5da6 : AND EDI,EBX
005c5da8 : MOV EDX,EDI
005c5daa : SHL EDX,0x4
005c5dad : CMP dword ptr [EDX + EAX*0x1 + 0x8],ECX
005c5db1 : JNZ 0x005c5da5
005c5db3 : MOV EDX,dword ptr [EBP + 0x4]
005c5db6 : MOV EDX,dword ptr [EDX + 0xc]
005c5db9 : MOV ECX,EDI
005c5dbb : SHL ECX,0x4
005c5dbe : AND EDX,EBX
005c5dc0 : LEA ECX,[ECX + EAX*0x1 + 0x8]
005c5dc4 : CMP EDX,ESI
005c5dc6 : JNZ 0x005c5de9
005c5dc8 : TEST ECX,ECX
005c5dca : JZ 0x005c5dd2
005c5dcc : PUSH EBP
005c5dcd : CALL 0x005c5410
005c5dd2 : MOV EAX,dword ptr [ESP + 0x18]
005c5dd6 : PUSH EAX
005c5dd7 : LEA ECX,[EBP + 0x4]
005c5dda : CALL 0x005c4900
005c5ddf : POP EBX
005c5de0 : MOV dword ptr [EBP],EDI
005c5de3 : POP EDI
005c5de4 : POP ESI
005c5de5 : POP EBP
005c5de6 : RET 0xc
005c5de9 : SHL EDX,0x4
005c5dec : CMP dword ptr [EDX + EAX*0x1 + 0x8],ESI
005c5df0 : LEA EBX,[EDX + EAX*0x1 + 0x8]
005c5df4 : JZ 0x005c5e05
005c5df6 : MOV EDX,dword ptr [EBX]
005c5df8 : SHL EDX,0x4
005c5dfb : CMP dword ptr [EDX + EAX*0x1 + 0x8],ESI
005c5dff : LEA EBX,[EDX + EAX*0x1 + 0x8]
005c5e03 : JNZ 0x005c5df6
005c5e05 : TEST ECX,ECX
005c5e07 : JZ 0x005c5e0f
005c5e09 : PUSH EBP
005c5e0a : CALL 0x005c5410
005c5e0f : MOV EAX,dword ptr [ESP + 0x18]
005c5e13 : PUSH EAX
005c5e14 : LEA ECX,[EBP + 0x4]
005c5e17 : MOV dword ptr [EBX],EDI
005c5e19 : CALL 0x005c4900
005c5e1e : POP EBX
005c5e1f : POP EDI
005c5e20 : POP ESI
005c5e21 : MOV dword ptr [EBP],0xffffffff
005c5e28 : POP EBP
005c5e29 : RET 0xc
