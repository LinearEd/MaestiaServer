PROGRAM  : Maestia.exe
FUNCTION : FUN_0051af70
ENTRY    : 0051af70
BODY     : [[0051af70, 0051b02a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051af70(undefined1 *param_1,short *param_2,int param_3)

{
  short sVar1;
  int iVar2;
  int local_4;
  
  iVar2 = 0;
  local_4 = 0;
  if (param_3 == -1) {
    sVar1 = *param_2;
    if (sVar1 == 0) {
      *param_1 = 0;
      return;
    }
    do {
      FUN_0051ad90(param_1,&local_4,sVar1);
      sVar1 = param_2[iVar2 + 1];
      iVar2 = iVar2 + 1;
    } while (sVar1 != 0);
    param_1[local_4] = 0;
    return;
  }
  if (param_3 < 1) {
    *param_1 = 0;
    return;
  }
  do {
    if (param_2[iVar2] == 0) {
      param_1[local_4] = 0;
      return;
    }
    FUN_0051ad90(param_1,&local_4,param_2[iVar2]);
    iVar2 = iVar2 + 1;
  } while (iVar2 < param_3);
  param_1[local_4] = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0051af70 : PUSH ECX
0051af71 : PUSH EBX
0051af72 : PUSH ESI
0051af73 : PUSH EDI
0051af74 : MOV EDI,dword ptr [ESP + 0x1c]
0051af78 : XOR ECX,ECX
0051af7a : XOR ESI,ESI
0051af7c : MOV dword ptr [ESP + 0xc],ECX
0051af80 : CMP EDI,-0x1
0051af83 : JZ 0x0051afc4
0051af85 : TEST EDI,EDI
0051af87 : JLE 0x0051b01d
0051af8d : MOV EBX,dword ptr [ESP + 0x14]
0051af91 : PUSH EBP
0051af92 : MOV EBP,dword ptr [ESP + 0x1c]
0051af96 : MOVZX EAX,word ptr [EBP + ESI*0x2]
0051af9b : TEST AX,AX
0051af9e : JZ 0x0051b00d
0051afa0 : MOVZX EAX,AX
0051afa3 : PUSH EAX
0051afa4 : LEA ECX,[ESP + 0x14]
0051afa8 : PUSH ECX
0051afa9 : PUSH EBX
0051afaa : CALL 0x0051ad90
0051afaf : INC ESI
0051afb0 : CMP ESI,EDI
0051afb2 : JL 0x0051af96
0051afb4 : MOV EDX,dword ptr [ESP + 0x10]
0051afb8 : POP EBP
0051afb9 : POP EDI
0051afba : POP ESI
0051afbb : MOV byte ptr [EDX + EBX*0x1],0x0
0051afbf : POP EBX
0051afc0 : POP ECX
0051afc1 : RET 0xc
0051afc4 : MOV EBX,dword ptr [ESP + 0x18]
0051afc8 : MOVZX EAX,word ptr [EBX]
0051afcb : TEST AX,AX
0051afce : JZ 0x0051afff
0051afd0 : MOV EDI,dword ptr [ESP + 0x14]
0051afd4 : MOVZX EAX,AX
0051afd7 : MOVZX EAX,AX
0051afda : PUSH EAX
0051afdb : LEA ECX,[ESP + 0x10]
0051afdf : PUSH ECX
0051afe0 : PUSH EDI
0051afe1 : CALL 0x0051ad90
0051afe6 : MOVZX EAX,word ptr [EBX + ESI*0x2 + 0x2]
0051afeb : INC ESI
0051afec : TEST AX,AX
0051afef : JNZ 0x0051afd7
0051aff1 : MOV EDX,dword ptr [ESP + 0xc]
0051aff5 : MOV byte ptr [EDX + EDI*0x1],AL
0051aff8 : POP EDI
0051aff9 : POP ESI
0051affa : POP EBX
0051affb : POP ECX
0051affc : RET 0xc
0051afff : MOV EAX,dword ptr [ESP + 0x14]
0051b003 : POP EDI
0051b004 : POP ESI
0051b005 : MOV byte ptr [ECX + EAX*0x1],CL
0051b008 : POP EBX
0051b009 : POP ECX
0051b00a : RET 0xc
0051b00d : MOV ECX,dword ptr [ESP + 0x10]
0051b011 : POP EBP
0051b012 : POP EDI
0051b013 : POP ESI
0051b014 : MOV byte ptr [ECX + EBX*0x1],0x0
0051b018 : POP EBX
0051b019 : POP ECX
0051b01a : RET 0xc
0051b01d : MOV EDX,dword ptr [ESP + 0x14]
0051b021 : POP EDI
0051b022 : POP ESI
0051b023 : MOV byte ptr [ECX + EDX*0x1],CL
0051b026 : POP EBX
0051b027 : POP ECX
0051b028 : RET 0xc
