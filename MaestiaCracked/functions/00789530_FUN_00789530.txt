PROGRAM  : Maestia.exe
FUNCTION : FUN_00789530
ENTRY    : 00789530
BODY     : [[00789530, 007895aa]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00789530(void)

{
  char cVar1;
  int *in_EAX;
  LONG LVar2;
  
  in_EAX[9] = 0;
  cVar1 = FUN_00484090();
  if (cVar1 == '\0') {
    if (in_EAX[3] != 0) {
      *(int *)(in_EAX[2] + 4) = in_EAX[3];
      *(int *)in_EAX[3] = in_EAX[2];
      in_EAX[2] = 0;
      in_EAX[3] = 0;
    }
  }
  else {
    (**(code **)(*in_EAX + 0x3c))();
    FUN_00740690(2);
    if (in_EAX[3] != 0) {
      *(int *)(in_EAX[2] + 4) = in_EAX[3];
      *(int *)in_EAX[3] = in_EAX[2];
      in_EAX[2] = 0;
      in_EAX[3] = 0;
    }
    LVar2 = InterlockedExchangeAdd(in_EAX + 1,-1);
    if (LVar2 == 1) {
      (**(code **)*in_EAX)(1);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00789530 : PUSH ESI
00789531 : PUSH EDI
00789532 : MOV EDI,EAX
00789534 : XOR ESI,ESI
00789536 : MOV dword ptr [EDI + 0x24],ESI
00789539 : CALL 0x00484090
0078953e : TEST AL,AL
00789540 : JZ 0x0078958c
00789542 : MOV EAX,dword ptr [EDI]
00789544 : MOV EDX,dword ptr [EAX + 0x3c]
00789547 : MOV ECX,EDI
00789549 : CALL EDX
0078954b : PUSH 0x2
0078954d : CALL 0x00740690
00789552 : CMP dword ptr [EDI + 0xc],ESI
00789555 : JZ 0x0078956e
00789557 : MOV EAX,dword ptr [EDI + 0x8]
0078955a : MOV ECX,dword ptr [EDI + 0xc]
0078955d : MOV dword ptr [EAX + 0x4],ECX
00789560 : MOV EDX,dword ptr [EDI + 0xc]
00789563 : MOV EAX,dword ptr [EDI + 0x8]
00789566 : MOV dword ptr [EDX],EAX
00789568 : MOV dword ptr [EDI + 0x8],ESI
0078956b : MOV dword ptr [EDI + 0xc],ESI
0078956e : PUSH -0x1
00789570 : LEA ECX,[EDI + 0x4]
00789573 : PUSH ECX
00789574 : CALL dword ptr [0x00b851cc]
0078957a : SUB EAX,0x1
0078957d : JNZ 0x007895a8
0078957f : MOV EDX,dword ptr [EDI]
00789581 : MOV EAX,dword ptr [EDX]
00789583 : PUSH 0x1
00789585 : MOV ECX,EDI
00789587 : CALL EAX
00789589 : POP EDI
0078958a : POP ESI
0078958b : RET
0078958c : CMP dword ptr [EDI + 0xc],ESI
0078958f : JZ 0x007895a8
00789591 : MOV ECX,dword ptr [EDI + 0x8]
00789594 : MOV EDX,dword ptr [EDI + 0xc]
00789597 : MOV dword ptr [ECX + 0x4],EDX
0078959a : MOV EAX,dword ptr [EDI + 0xc]
0078959d : MOV ECX,dword ptr [EDI + 0x8]
007895a0 : MOV dword ptr [EAX],ECX
007895a2 : MOV dword ptr [EDI + 0x8],ESI
007895a5 : MOV dword ptr [EDI + 0xc],ESI
007895a8 : POP EDI
007895a9 : POP ESI
007895aa : RET
