PROGRAM  : Maestia.exe
FUNCTION : FUN_00441fd0
ENTRY    : 00441fd0
BODY     : [[00441fd0, 0044211a] [0044211e, 0044212a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00441fd0(void)

{
  void *pvVar1;
  rsize_t _DstSize;
  uint uVar2;
  undefined4 *_Dst;
  int iVar3;
  int iVar4;
  uint uVar5;
  int unaff_ESI;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint local_8;
  
  uVar2 = *(uint *)(unaff_ESI + 0x14);
  local_8 = 1;
  if (uVar2 == 0xfffffff) {
    uVar2 = FUN_00476830();
  }
  uVar5 = uVar2 >> 1;
  if (uVar5 < 8) {
    uVar5 = 8;
  }
  else if (uVar5 < 2) goto LAB_00442018;
  if (uVar2 <= 0xfffffff - uVar5) {
    local_8 = uVar5;
  }
LAB_00442018:
  uVar2 = *(uint *)(unaff_ESI + 0x18);
  _Dst = (undefined4 *)FUN_004c1790();
  iVar4 = uVar2 * 4;
  pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + iVar4);
  iVar3 = (*(int *)(unaff_ESI + 0x14) * 4 - (int)pvVar1) + *(int *)(unaff_ESI + 0x10) >> 2;
  puVar7 = _Dst + uVar2 + iVar3;
  if (iVar3 != 0) {
    _memmove_s(_Dst + uVar2,iVar3 * 4,pvVar1,iVar3 * 4);
  }
  if (local_8 < uVar2) {
    iVar3 = (int)(local_8 * 4) >> 2;
    if (iVar3 != 0) {
      _DstSize = iVar3 * 4;
      _memmove_s(puVar7,_DstSize,*(void **)(unaff_ESI + 0x10),_DstSize);
    }
    pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + local_8 * 4);
    iVar4 = (*(int *)(unaff_ESI + 0x10) - (int)pvVar1) + iVar4 >> 2;
    puVar7 = _Dst + iVar4;
    uVar2 = local_8;
    if (iVar4 != 0) {
      _memmove_s(_Dst,iVar4 * 4,pvVar1,iVar4 * 4);
    }
  }
  else {
    iVar4 = iVar4 >> 2;
    puVar6 = puVar7 + iVar4;
    if (iVar4 != 0) {
      _memmove_s(puVar7,iVar4 * 4,*(void **)(unaff_ESI + 0x10),iVar4 * 4);
    }
    iVar4 = local_8 - uVar2;
    puVar7 = _Dst;
    if (iVar4 != 0) {
      for (; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = 0;
        puVar6 = puVar6 + 1;
      }
    }
  }
  if (uVar2 != 0) {
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar7 = 0;
      puVar7 = puVar7 + 1;
    }
  }
  if (*(int *)(unaff_ESI + 0x10) == 0) {
    *(int *)(unaff_ESI + 0x14) = *(int *)(unaff_ESI + 0x14) + local_8;
    *(undefined4 **)(unaff_ESI + 0x10) = _Dst;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00441fd0 : PUSH EBP
00441fd1 : MOV EBP,ESP
00441fd3 : SUB ESP,0x10
00441fd6 : MOV EAX,dword ptr [ESI + 0x14]
00441fd9 : MOV ECX,0xfffffff
00441fde : MOV EDX,0x1
00441fe3 : SUB ECX,EAX
00441fe5 : MOV dword ptr [EBP + -0x4],EDX
00441fe8 : CMP ECX,EDX
00441fea : JNC 0x00441ff1
00441fec : CALL 0x00476830
00441ff1 : MOV ECX,EAX
00441ff3 : SHR ECX,0x1
00441ff5 : PUSH EBX
00441ff6 : PUSH EDI
00441ff7 : CMP ECX,0x8
00441ffa : JNC 0x00442003
00441ffc : MOV ECX,0x8
00442001 : JMP 0x00442008
00442003 : CMP ECX,0x1
00442006 : JBE 0x00442018
00442008 : MOV EDI,0xfffffff
0044200d : SUB EDI,ECX
0044200f : CMP EAX,EDI
00442011 : JA 0x00442018
00442013 : MOV EDX,ECX
00442015 : MOV dword ptr [EBP + -0x4],ECX
00442018 : MOV EDI,dword ptr [ESI + 0x18]
0044201b : LEA ECX,[EAX + EDX*0x1]
0044201e : MOV dword ptr [EBP + -0xc],EDI
00442021 : CALL 0x004c1790
00442026 : MOV ECX,dword ptr [ESI + 0x10]
00442029 : MOV dword ptr [EBP + -0x8],EAX
0044202c : ADD EDI,EDI
0044202e : ADD EDI,EDI
00442030 : LEA EDX,[EDI + EAX*0x1]
00442033 : MOV EAX,dword ptr [ESI + 0x14]
00442036 : ADD EAX,EAX
00442038 : LEA EBX,[ECX + EDI*0x1]
0044203b : ADD EAX,EAX
0044203d : SUB EAX,EBX
0044203f : ADD EAX,ECX
00442041 : SAR EAX,0x2
00442044 : LEA ECX,[EAX*0x4 + 0x0]
0044204b : MOV dword ptr [EBP + -0x10],EBX
0044204e : LEA EBX,[ECX + EDX*0x1]
00442051 : TEST EAX,EAX
00442053 : JBE 0x00442064
00442055 : MOV EAX,dword ptr [EBP + -0x10]
00442058 : PUSH ECX
00442059 : PUSH EAX
0044205a : PUSH ECX
0044205b : PUSH EDX
0044205c : CALL 0x00634101
00442061 : ADD ESP,0x10
00442064 : MOV EDX,dword ptr [EBP + -0x4]
00442067 : MOV ECX,dword ptr [ESI + 0x10]
0044206a : CMP dword ptr [EBP + -0xc],EDX
0044206d : JA 0x004420b3
0044206f : MOV EAX,ECX
00442071 : SUB EAX,ECX
00442073 : ADD EAX,EDI
00442075 : SAR EAX,0x2
00442078 : LEA EDI,[EAX*0x4 + 0x0]
0044207f : LEA EDX,[EDI + EBX*0x1]
00442082 : MOV dword ptr [EBP + -0x10],EDX
00442085 : TEST EAX,EAX
00442087 : JBE 0x00442095
00442089 : PUSH EDI
0044208a : PUSH ECX
0044208b : PUSH EDI
0044208c : PUSH EBX
0044208d : CALL 0x00634101
00442092 : ADD ESP,0x10
00442095 : MOV EDX,dword ptr [EBP + -0x4]
00442098 : MOV EBX,dword ptr [EBP + -0xc]
0044209b : MOV ECX,EDX
0044209d : SUB ECX,EBX
0044209f : JZ 0x004420a8
004420a1 : MOV EDI,dword ptr [EBP + -0x10]
004420a4 : XOR EAX,EAX
004420a6 : STOSD.REP ES:EDI
004420a8 : TEST EBX,EBX
004420aa : JBE 0x0044210d
004420ac : MOV EDI,dword ptr [EBP + -0x8]
004420af : MOV ECX,EBX
004420b1 : JMP 0x00442109
004420b3 : LEA EAX,[EDX*0x4 + 0x0]
004420ba : SAR EAX,0x2
004420bd : TEST EAX,EAX
004420bf : JBE 0x004420d4
004420c1 : ADD EAX,EAX
004420c3 : ADD EAX,EAX
004420c5 : PUSH EAX
004420c6 : PUSH ECX
004420c7 : PUSH EAX
004420c8 : PUSH EBX
004420c9 : CALL 0x00634101
004420ce : MOV EDX,dword ptr [EBP + -0x4]
004420d1 : ADD ESP,0x10
004420d4 : MOV EAX,dword ptr [ESI + 0x10]
004420d7 : LEA EBX,[EAX + EDX*0x4]
004420da : SUB EAX,EBX
004420dc : ADD EAX,EDI
004420de : MOV EDI,dword ptr [EBP + -0x8]
004420e1 : SAR EAX,0x2
004420e4 : LEA ECX,[EAX*0x4 + 0x0]
004420eb : ADD EDI,ECX
004420ed : TEST EAX,EAX
004420ef : JBE 0x00442103
004420f1 : MOV EAX,dword ptr [EBP + -0x8]
004420f4 : PUSH ECX
004420f5 : PUSH EBX
004420f6 : PUSH ECX
004420f7 : PUSH EAX
004420f8 : CALL 0x00634101
004420fd : MOV EDX,dword ptr [EBP + -0x4]
00442100 : ADD ESP,0x10
00442103 : TEST EDX,EDX
00442105 : JBE 0x0044210d
00442107 : MOV ECX,EDX
00442109 : XOR EAX,EAX
0044210b : STOSD.REP ES:EDI
0044210d : MOV ECX,dword ptr [ESI + 0x10]
00442110 : POP EDI
00442111 : POP EBX
00442112 : TEST ECX,ECX
00442114 : JZ 0x0044211e
00442116 : CALL 0x006f04e0
0044211e : MOV ECX,dword ptr [EBP + -0x8]
00442121 : ADD dword ptr [ESI + 0x14],EDX
00442124 : MOV dword ptr [ESI + 0x10],ECX
00442127 : MOV ESP,EBP
00442129 : POP EBP
0044212a : RET
