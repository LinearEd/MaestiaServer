PROGRAM  : Maestia.exe
FUNCTION : __VEC_memcpy
ENTRY    : 0065032b
BODY     : [[0065032b, 0065040d]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __VEC_memcpy
   
   Libraries: Visual Studio 2005 Debug, Visual Studio 2005 Release, Visual Studio 2008 Debug, Visual
   Studio 2008 Release */

undefined4 * __VEC_memcpy(undefined4 *param_1,undefined4 *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined1 *puVar4;
  undefined4 *puVar5;
  uint uVar6;
  undefined1 *puVar7;
  undefined4 *puVar8;
  
  uVar3 = (int)param_2 >> 0x1f;
  iVar1 = (((uint)param_2 ^ uVar3) - uVar3 & 0xf ^ uVar3) - uVar3;
  uVar3 = (int)param_1 >> 0x1f;
  uVar6 = ((uint)param_1 ^ uVar3) - uVar3 & 0xf ^ uVar3;
  if (iVar1 == 0 && uVar6 == uVar3) {
    uVar3 = param_3 & 0x7f;
    if (param_3 != uVar3) {
      FUN_006502a4(param_1,param_2,param_3 - uVar3);
    }
    if (uVar3 != 0) {
      puVar4 = (undefined1 *)((int)param_2 + (param_3 - uVar3));
      puVar7 = (undefined1 *)((int)param_1 + (param_3 - uVar3));
      for (; uVar3 != 0; uVar3 = uVar3 - 1) {
        *puVar7 = *puVar4;
        puVar4 = puVar4 + 1;
        puVar7 = puVar7 + 1;
      }
    }
  }
  else if (iVar1 == uVar6 - uVar3) {
    iVar1 = 0x10 - iVar1;
    puVar5 = param_2;
    puVar8 = param_1;
    for (iVar2 = iVar1; iVar2 != 0; iVar2 = iVar2 + -1) {
      *(undefined1 *)puVar8 = *(undefined1 *)puVar5;
      puVar5 = (undefined4 *)((int)puVar5 + 1);
      puVar8 = (undefined4 *)((int)puVar8 + 1);
    }
    __VEC_memcpy((undefined1 *)((int)param_1 + iVar1),(undefined1 *)((int)param_2 + iVar1),
                 param_3 - iVar1);
  }
  else {
    puVar5 = param_1;
    for (uVar3 = param_3 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
      *puVar5 = *param_2;
      param_2 = param_2 + 1;
      puVar5 = puVar5 + 1;
    }
    for (param_3 = param_3 & 3; param_3 != 0; param_3 = param_3 - 1) {
      *(undefined1 *)puVar5 = *(undefined1 *)param_2;
      param_2 = (undefined4 *)((int)param_2 + 1);
      puVar5 = (undefined4 *)((int)puVar5 + 1);
    }
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
0065032b : PUSH EBP
0065032c : MOV EBP,ESP
0065032e : SUB ESP,0x1c
00650331 : MOV dword ptr [EBP + -0xc],EDI
00650334 : MOV dword ptr [EBP + -0x8],ESI
00650337 : MOV dword ptr [EBP + -0x4],EBX
0065033a : MOV EBX,dword ptr [EBP + 0xc]
0065033d : MOV EAX,EBX
0065033f : CDQ
00650340 : MOV ECX,EAX
00650342 : MOV EAX,dword ptr [EBP + 0x8]
00650345 : XOR ECX,EDX
00650347 : SUB ECX,EDX
00650349 : AND ECX,0xf
0065034c : XOR ECX,EDX
0065034e : SUB ECX,EDX
00650350 : CDQ
00650351 : MOV EDI,EAX
00650353 : XOR EDI,EDX
00650355 : SUB EDI,EDX
00650357 : AND EDI,0xf
0065035a : XOR EDI,EDX
0065035c : SUB EDI,EDX
0065035e : MOV EDX,ECX
00650360 : OR EDX,EDI
00650362 : JNZ 0x006503ae
00650364 : MOV ESI,dword ptr [EBP + 0x10]
00650367 : MOV ECX,ESI
00650369 : AND ECX,0x7f
0065036c : MOV dword ptr [EBP + -0x18],ECX
0065036f : CMP ESI,ECX
00650371 : JZ 0x00650386
00650373 : SUB ESI,ECX
00650375 : PUSH ESI
00650376 : PUSH EBX
00650377 : PUSH EAX
00650378 : CALL 0x006502a4
0065037d : ADD ESP,0xc
00650380 : MOV EAX,dword ptr [EBP + 0x8]
00650383 : MOV ECX,dword ptr [EBP + -0x18]
00650386 : TEST ECX,ECX
00650388 : JZ 0x00650401
0065038a : MOV EBX,dword ptr [EBP + 0x10]
0065038d : MOV EDX,dword ptr [EBP + 0xc]
00650390 : ADD EDX,EBX
00650392 : SUB EDX,ECX
00650394 : MOV dword ptr [EBP + -0x14],EDX
00650397 : ADD EBX,EAX
00650399 : SUB EBX,ECX
0065039b : MOV dword ptr [EBP + -0x10],EBX
0065039e : MOV ESI,dword ptr [EBP + -0x14]
006503a1 : MOV EDI,dword ptr [EBP + -0x10]
006503a4 : MOV ECX,dword ptr [EBP + -0x18]
006503a7 : MOVSB.REP ES:EDI,ESI
006503a9 : MOV EAX,dword ptr [EBP + 0x8]
006503ac : JMP 0x00650401
006503ae : CMP ECX,EDI
006503b0 : JNZ 0x006503e7
006503b2 : NEG ECX
006503b4 : ADD ECX,0x10
006503b7 : MOV dword ptr [EBP + -0x1c],ECX
006503ba : MOV ESI,dword ptr [EBP + 0xc]
006503bd : MOV EDI,dword ptr [EBP + 0x8]
006503c0 : MOV ECX,dword ptr [EBP + -0x1c]
006503c3 : MOVSB.REP ES:EDI,ESI
006503c5 : MOV ECX,dword ptr [EBP + 0x8]
006503c8 : ADD ECX,dword ptr [EBP + -0x1c]
006503cb : MOV EDX,dword ptr [EBP + 0xc]
006503ce : ADD EDX,dword ptr [EBP + -0x1c]
006503d1 : MOV EAX,dword ptr [EBP + 0x10]
006503d4 : SUB EAX,dword ptr [EBP + -0x1c]
006503d7 : PUSH EAX
006503d8 : PUSH EDX
006503d9 : PUSH ECX
006503da : CALL 0x0065032b
006503df : ADD ESP,0xc
006503e2 : MOV EAX,dword ptr [EBP + 0x8]
006503e5 : JMP 0x00650401
006503e7 : MOV ESI,dword ptr [EBP + 0xc]
006503ea : MOV EDI,dword ptr [EBP + 0x8]
006503ed : MOV ECX,dword ptr [EBP + 0x10]
006503f0 : MOV EDX,ECX
006503f2 : SHR ECX,0x2
006503f5 : MOVSD.REP ES:EDI,ESI
006503f7 : MOV ECX,EDX
006503f9 : AND ECX,0x3
006503fc : MOVSB.REP ES:EDI,ESI
006503fe : MOV EAX,dword ptr [EBP + 0x8]
00650401 : MOV EBX,dword ptr [EBP + -0x4]
00650404 : MOV ESI,dword ptr [EBP + -0x8]
00650407 : MOV EDI,dword ptr [EBP + -0xc]
0065040a : MOV ESP,EBP
0065040c : POP EBP
0065040d : RET
