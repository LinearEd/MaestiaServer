PROGRAM  : Maestia.exe
FUNCTION : FUN_00511d90
ENTRY    : 00511d90
BODY     : [[00511d90, 00511ee1]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00511d90(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18);
    *puVar3 = &PTR_LAB_00b86098;
    puVar3[4] = &PTR_LAB_00b90510;
    FUN_00530a70(puVar3 + 4,&local_18,&PTR_s_getFontList_00b85fd0);
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x58);
  if (iVar4 == 0) {
    uVar6 = 0;
  }
  else {
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_00507b60(&local_18,uVar5);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0xa;
  param_2 = uVar6;
  FUN_0050ff10(&param_1);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  puVar3 = &param_2;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x30,uVar5,puVar3);
  FUN_00526bc0();
  FUN_00511cc0(&stack0xffffffd8,*puVar1);
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
00511d90 : SUB ESP,0x18
00511d93 : PUSH EBX
00511d94 : PUSH ESI
00511d95 : MOV ESI,dword ptr [ESP + 0x28]
00511d99 : MOV ECX,dword ptr [ESI + 0x288]
00511d9f : PUSH EDI
00511da0 : PUSH 0x0
00511da2 : PUSH 0x34
00511da4 : MOV dword ptr [ESP + 0x14],ESI
00511da8 : MOV byte ptr [ESP + 0x18],0x8
00511dad : CALL 0x00515840
00511db2 : MOV EDI,EAX
00511db4 : TEST EDI,EDI
00511db6 : JZ 0x00511df1
00511db8 : PUSH 0x51d420
00511dbd : LEA EAX,[ESP + 0x10]
00511dc1 : PUSH EAX
00511dc2 : MOV ECX,EDI
00511dc4 : CALL 0x00568960
00511dc9 : PUSH 0x7
00511dcb : PUSH 0xb85fd0
00511dd0 : LEA ECX,[ESP + 0x14]
00511dd4 : LEA EAX,[EDI + 0x10]
00511dd7 : PUSH ECX
00511dd8 : PUSH EAX
00511dd9 : MOV dword ptr [EDI],0xb86098
00511ddf : MOV dword ptr [EAX],0xb90510
00511de5 : CALL 0x00530a70
00511dea : ADD ESP,0x10
00511ded : MOV EAX,EDI
00511def : JMP 0x00511df3
00511df1 : XOR EAX,EAX
00511df3 : MOV EDI,dword ptr [ESP + 0x28]
00511df7 : PUSH 0x0
00511df9 : MOV byte ptr [EDI + 0x8],0x0
00511dfd : MOV dword ptr [EDI],EAX
00511dff : MOV dword ptr [EDI + 0x4],0x0
00511e06 : MOV ECX,dword ptr [ESI + 0x288]
00511e0c : PUSH 0x58
00511e0e : CALL 0x00515840
00511e13 : MOV EBX,EAX
00511e15 : TEST EBX,EBX
00511e17 : JZ 0x00511edb
00511e1d : PUSH EDI
00511e1e : PUSH 0x1
00511e20 : MOV ECX,ESI
00511e22 : CALL 0x00530910
00511e27 : PUSH EAX
00511e28 : LEA EDX,[ESP + 0x14]
00511e2c : PUSH EDX
00511e2d : MOV ECX,EBX
00511e2f : CALL 0x00507b60
00511e34 : MOV EBX,EAX
00511e36 : TEST EBX,EBX
00511e38 : JZ 0x00511e46
00511e3a : MOV EAX,dword ptr [EBX + 0x8]
00511e3d : INC EAX
00511e3e : AND EAX,0x8fffffff
00511e43 : MOV dword ptr [EBX + 0x8],EAX
00511e46 : LEA ECX,[ESP + 0x2c]
00511e4a : PUSH ECX
00511e4b : LEA EDX,[ESP + 0x2c]
00511e4f : PUSH EDX
00511e50 : LEA ECX,[ESI + 0x278]
00511e56 : MOV dword ptr [ESP + 0x34],EBX
00511e5a : MOV dword ptr [ESP + 0x30],0xa
00511e62 : CALL 0x0050ff10
00511e67 : MOV ECX,dword ptr [ESP + 0x2c]
00511e6b : TEST ECX,ECX
00511e6d : JZ 0x00511e74
00511e6f : CALL 0x00503db0
00511e74 : MOV EAX,dword ptr [ESI + 0x2a0]
00511e7a : PUSH EBP
00511e7b : ADD EAX,0x10
00511e7e : MOV byte ptr [ESP + 0x30],0x0
00511e83 : MOV EBP,dword ptr [EAX]
00511e85 : MOV dword ptr [ESP + 0x2c],EAX
00511e89 : LEA EAX,[ESP + 0x30]
00511e8d : PUSH EAX
00511e8e : PUSH EDI
00511e8f : LEA ECX,[ESP + 0x20]
00511e93 : ADD EBP,0x28
00511e96 : CALL 0x00526210
00511e9b : PUSH EAX
00511e9c : MOV EAX,dword ptr [EBP]
00511e9f : LEA ECX,[ESI + 0x30]
00511ea2 : PUSH ECX
00511ea3 : MOV ECX,dword ptr [ESP + 0x38]
00511ea7 : LEA EDX,[ESP + 0x1c]
00511eab : PUSH EDX
00511eac : CALL EAX
00511eae : LEA ECX,[ESP + 0x18]
00511eb2 : CALL 0x00526bc0
00511eb7 : MOV EAX,dword ptr [EDI]
00511eb9 : PUSH EAX
00511eba : LEA ECX,[ESP + 0x14]
00511ebe : PUSH ECX
00511ebf : MOV ECX,ESI
00511ec1 : CALL 0x00511cc0
00511ec6 : POP EBP
00511ec7 : TEST EBX,EBX
00511ec9 : JZ 0x00511ed2
00511ecb : MOV ECX,EBX
00511ecd : CALL 0x00503db0
00511ed2 : MOV EAX,EDI
00511ed4 : POP EDI
00511ed5 : POP ESI
00511ed6 : POP EBX
00511ed7 : ADD ESP,0x18
00511eda : RET
00511edb : XOR EBX,EBX
00511edd : JMP 0x00511e46
