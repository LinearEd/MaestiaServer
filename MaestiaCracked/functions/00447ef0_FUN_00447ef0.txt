PROGRAM  : Maestia.exe
FUNCTION : FUN_00447ef0
ENTRY    : 00447ef0
BODY     : [[00447ef0, 00448025] [00448037, 004480f7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00447ef0(uint param_1,undefined8 *param_2)

{
  undefined8 *puVar1;
  int iVar2;
  undefined8 *puVar3;
  undefined4 uVar4;
  uint uVar5;
  uint extraout_ECX;
  int iVar6;
  uint uVar7;
  undefined8 uVar8;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7af40;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar6 = *(int *)(param_1 + 4);
  if (iVar6 == 0) {
    uVar5 = 0;
  }
  else {
    uVar5 = *(int *)(param_1 + 0xc) - iVar6 >> 4;
  }
  iVar6 = *(int *)(param_1 + 8) - iVar6 >> 4;
  uVar8 = CONCAT44(iVar6,*(int *)(param_1 + 8));
  if (iVar6 == 0xfffffff) {
    uVar8 = FUN_00452880();
    uVar5 = extraout_ECX;
  }
  puVar3 = (undefined8 *)uVar8;
  uVar7 = (int)((ulonglong)uVar8 >> 0x20) + 1;
  if (uVar5 < uVar7) {
    if (0xfffffff - (uVar5 >> 1) < uVar5) {
      param_1 = 0;
    }
    else {
      param_1 = uVar5 + (uVar5 >> 1);
    }
    if (param_1 < uVar7) {
      param_1 = uVar7;
    }
    iVar6 = FUN_00424e80();
    local_8 = 0;
    FUN_0043f480();
    FUN_0043fa30(*(undefined4 *)(iVar2 + 4),param_2);
    FUN_0043fa30(param_2,*(undefined4 *)(iVar2 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar2 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar2 + 0xc) = param_1 * 0x10 + iVar6;
    *(int *)(iVar2 + 8) = ((*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) >> 4) + 1) * 0x10 + iVar6;
    *(int *)(iVar2 + 4) = iVar6;
    ExceptionList = local_10;
    return;
  }
  if ((int)puVar3 - (int)param_2 >> 4 == 0) {
    FUN_0043fa30(param_2,puVar3);
    local_8 = 2;
    FUN_0043f480();
    local_8 = 0xffffffff;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
  }
  else {
    uVar4 = FUN_0043fa30(puVar3 + -2,puVar3);
    *(undefined4 *)(param_1 + 8) = uVar4;
    puVar1 = puVar3 + -2;
    while (param_2 != puVar1) {
      puVar3[-2] = puVar1[-2];
      puVar3[-1] = puVar1[-1];
      puVar1 = puVar1 + -2;
      puVar3 = puVar3 + -2;
    }
  }
  FUN_004cb8f0(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00447ef0 : PUSH EBP
00447ef1 : MOV EBP,ESP
00447ef3 : PUSH -0x1
00447ef5 : PUSH 0xb7af40
00447efa : MOV EAX,FS:[0x0]
00447f00 : PUSH EAX
00447f01 : SUB ESP,0x24
00447f04 : PUSH EBX
00447f05 : PUSH ESI
00447f06 : PUSH EDI
00447f07 : MOV EAX,[0x00d66fa0]
00447f0c : XOR EAX,EBP
00447f0e : PUSH EAX
00447f0f : LEA EAX,[EBP + -0xc]
00447f12 : MOV FS:[0x0],EAX
00447f18 : MOV dword ptr [EBP + -0x10],ESP
00447f1b : MOV ESI,ECX
00447f1d : MOV EBX,dword ptr [EBP + 0x8]
00447f20 : MOV EDI,dword ptr [EBX + 0x4]
00447f23 : TEST EDI,EDI
00447f25 : JNZ 0x00447f2b
00447f27 : XOR ECX,ECX
00447f29 : JMP 0x00447f35
00447f2b : MOV EAX,dword ptr [EBX + 0xc]
00447f2e : SUB EAX,EDI
00447f30 : SAR EAX,0x4
00447f33 : MOV ECX,EAX
00447f35 : MOV EAX,dword ptr [EBX + 0x8]
00447f38 : MOV EDX,EAX
00447f3a : SUB EDX,EDI
00447f3c : SAR EDX,0x4
00447f3f : MOV EDI,0xfffffff
00447f44 : SUB EDI,EDX
00447f46 : CMP EDI,0x1
00447f49 : JNC 0x00447f50
00447f4b : CALL 0x00452880
00447f50 : INC EDX
00447f51 : CMP ECX,EDX
00447f53 : JNC 0x00448037
00447f59 : MOV EAX,ECX
00447f5b : SHR EAX,0x1
00447f5d : MOV EDI,0xfffffff
00447f62 : SUB EDI,EAX
00447f64 : CMP EDI,ECX
00447f66 : JNC 0x00447f74
00447f68 : MOV dword ptr [EBP + 0x8],0x0
00447f6f : MOV ECX,dword ptr [EBP + 0x8]
00447f72 : JMP 0x00447f79
00447f74 : ADD ECX,EAX
00447f76 : MOV dword ptr [EBP + 0x8],ECX
00447f79 : CMP ECX,EDX
00447f7b : JNC 0x00447f82
00447f7d : MOV dword ptr [EBP + 0x8],EDX
00447f80 : MOV ECX,EDX
00447f82 : CALL 0x00424e80
00447f87 : MOV dword ptr [EBP + -0x14],EAX
00447f8a : MOV EDI,dword ptr [EBP + 0xc]
00447f8d : SUB EDI,dword ptr [EBX + 0x4]
00447f90 : SAR EDI,0x4
00447f93 : MOV dword ptr [EBP + -0x1c],EDI
00447f96 : MOV dword ptr [EBP + -0x4],0x0
00447f9d : SHL EDI,0x4
00447fa0 : ADD EDI,EAX
00447fa2 : MOV EDX,ESI
00447fa4 : MOV ESI,0x1
00447fa9 : CALL 0x0043f480
00447fae : MOV dword ptr [EBP + -0x18],ESI
00447fb1 : MOV EAX,dword ptr [EBP + 0xc]
00447fb4 : PUSH EAX
00447fb5 : MOV ECX,dword ptr [EBX + 0x4]
00447fb8 : PUSH ECX
00447fb9 : MOV EDI,dword ptr [EBP + -0x14]
00447fbc : MOV EDX,EDI
00447fbe : CALL 0x0043fa30
00447fc3 : MOV dword ptr [EBP + -0x18],0x2
00447fca : MOV EDX,dword ptr [EBP + -0x1c]
00447fcd : INC EDX
00447fce : SHL EDX,0x4
00447fd1 : ADD EDX,EDI
00447fd3 : MOV EAX,dword ptr [EBX + 0x8]
00447fd6 : PUSH EAX
00447fd7 : MOV ECX,dword ptr [EBP + 0xc]
00447fda : PUSH ECX
00447fdb : CALL 0x0043fa30
00447fe0 : MOV dword ptr [EBP + -0x4],0xffffffff
00447fe7 : MOV ECX,dword ptr [EBX + 0x4]
00447fea : MOV ESI,dword ptr [EBX + 0x8]
00447fed : SUB ESI,ECX
00447fef : SAR ESI,0x4
00447ff2 : INC ESI
00447ff3 : TEST ECX,ECX
00447ff5 : JZ 0x00447ffc
00447ff7 : CALL 0x006f04e0
00447ffc : MOV EAX,dword ptr [EBP + 0x8]
00447fff : SHL EAX,0x4
00448002 : ADD EAX,EDI
00448004 : MOV dword ptr [EBX + 0xc],EAX
00448007 : SHL ESI,0x4
0044800a : ADD ESI,EDI
0044800c : MOV dword ptr [EBX + 0x8],ESI
0044800f : MOV dword ptr [EBX + 0x4],EDI
00448012 : MOV ECX,dword ptr [EBP + -0xc]
00448015 : MOV dword ptr FS:[0x0],ECX
0044801c : POP ECX
0044801d : POP EDI
0044801e : POP ESI
0044801f : POP EBX
00448020 : MOV ESP,EBP
00448022 : POP EBP
00448023 : RET 0x8
00448037 : MOV EDX,EAX
00448039 : MOV ECX,dword ptr [EBP + 0xc]
0044803c : SUB EDX,ECX
0044803e : SAR EDX,0x4
00448041 : MOVQ XMM0,qword ptr [ESI]
00448045 : PUSH EAX
00448046 : MOVQ qword ptr [EBP + -0x2c],XMM0
0044804b : MOVQ XMM0,qword ptr [ESI + 0x8]
00448050 : MOVQ qword ptr [EBP + -0x24],XMM0
00448055 : CMP EDX,0x1
00448058 : JNC 0x0044809a
0044805a : LEA EDX,[ECX + 0x10]
0044805d : PUSH ECX
0044805e : CALL 0x0043fa30
00448063 : MOV dword ptr [EBP + -0x4],0x2
0044806a : MOV EDI,dword ptr [EBX + 0x8]
0044806d : MOV EAX,EDI
0044806f : SUB EAX,dword ptr [EBP + 0xc]
00448072 : SAR EAX,0x4
00448075 : MOV ESI,0x1
0044807a : SUB ESI,EAX
0044807c : LEA EDX,[EBP + -0x2c]
0044807f : CALL 0x0043f480
00448084 : MOV dword ptr [EBP + -0x4],0xffffffff
0044808b : ADD dword ptr [EBX + 0x8],0x10
0044808f : MOV EBX,dword ptr [EBX + 0x8]
00448092 : LEA EDX,[EBX + -0x10]
00448095 : MOV ECX,dword ptr [EBP + 0xc]
00448098 : JMP 0x004480d8
0044809a : LEA ESI,[EAX + -0x10]
0044809d : PUSH ESI
0044809e : MOV EDX,EAX
004480a0 : CALL 0x0043fa30
004480a5 : MOV dword ptr [EBX + 0x8],EAX
004480a8 : MOV EAX,ESI
004480aa : MOV ECX,dword ptr [EBP + 0xc]
004480ad : MOV EDX,ECX
004480af : CMP ECX,EAX
004480b1 : JZ 0x004480d5
004480b3 : LEA ECX,[EAX + 0x10]
004480b6 : SUB EAX,0x10
004480b9 : SUB ECX,0x10
004480bc : MOVQ XMM0,qword ptr [EAX]
004480c0 : MOVQ qword ptr [ECX],XMM0
004480c4 : MOVQ XMM0,qword ptr [EAX + 0x8]
004480c9 : MOVQ qword ptr [ECX + 0x8],XMM0
004480ce : CMP EAX,EDX
004480d0 : JNZ 0x004480b6
004480d2 : MOV ECX,dword ptr [EBP + 0xc]
004480d5 : LEA EDX,[ECX + 0x10]
004480d8 : PUSH ECX
004480d9 : LEA ECX,[EBP + -0x2c]
004480dc : CALL 0x004cb8f0
004480e1 : ADD ESP,0x4
004480e4 : MOV ECX,dword ptr [EBP + -0xc]
004480e7 : MOV dword ptr FS:[0x0],ECX
004480ee : POP ECX
004480ef : POP EDI
004480f0 : POP ESI
004480f1 : POP EBX
004480f2 : MOV ESP,EBP
004480f4 : POP EBP
004480f5 : RET 0x8
