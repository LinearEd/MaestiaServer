PROGRAM  : Maestia.exe
FUNCTION : FUN_005ce320
ENTRY    : 005ce320
BODY     : [[005ce320, 005ce4d0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ce320(int param_1)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  char cVar5;
  int iVar6;
  uint *puVar7;
  int unaff_EDI;
  int local_38 [6];
  undefined1 local_20 [4];
  undefined1 auStack_1c [12];
  undefined1 local_10;
  int iStack_8;
  int *piStack_4;
  
  piVar1 = (int *)(param_1 + 0x78);
  local_10 = 0;
  local_20[0] = 0;
  local_38[0] = FUN_00525380("System",6,0);
  *(int *)(local_38[0] + 8) = *(int *)(local_38[0] + 8) + 1;
  cVar5 = (**(code **)(*(int *)(*(int *)(*piVar1 + 0x2a0) + 0x10) + 0x2c))(piVar1,local_38,local_20)
  ;
  if (cVar5 != '\0') {
    iVar6 = FUN_00526fa0(param_1);
    cVar5 = (**(code **)(*(int *)(iVar6 + 0x10) + 0x2c))(piVar1,*piVar1 + 0x60,auStack_1c);
    if (((cVar5 != '\0') && (iVar6 = FUN_00526fa0(param_1), iVar6 != 0)) && (iVar6 + 0x10 != 0)) {
      iVar2 = *piStack_4;
      if (*(int *)(iVar2 + 0x10) == 0) {
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(undefined1 **)(param_1 + 8) != (undefined1 *)0x0) {
          **(undefined1 **)(param_1 + 8) = 1;
        }
      }
      else {
        *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        local_38[0] = iVar2;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(int *)(param_1 + 8) != 0) {
          FUN_005266c0(&stack0xffffffc4);
        }
        FUN_00526bc0();
      }
      puVar7 = (uint *)(param_1 + 8);
      uVar3 = *puVar7;
      iVar2 = *(int *)(param_1 + 0xc);
      iVar4 = *(int *)(param_1 + 0x1c);
      iStack_8 = FUN_00525380("onSetSupportedIMEs",0x12,0);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + 1;
      FUN_0057bb40(param_1,iVar6 + 0x10,&iStack_8,1,
                   ((int)(uVar3 - iVar2) >> 4) + -0x20 + iVar4 * 0x20);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + -1;
      if (*(int *)(iStack_8 + 8) == 0) {
        FUN_00525340();
      }
      FUN_00526bc0();
      *puVar7 = *puVar7 - 0x10;
      if (*puVar7 < *(uint *)(param_1 + 0xc)) {
        FUN_00504f30();
      }
    }
  }
  *(int *)(unaff_EDI + 8) = *(int *)(unaff_EDI + 8) + -1;
  if (*(int *)(unaff_EDI + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005ce320 : SUB ESP,0x38
005ce323 : PUSH EBP
005ce324 : MOV EBP,dword ptr [ESP + 0x40]
005ce328 : MOV EAX,dword ptr [EBP + 0x78]
005ce32b : PUSH ESI
005ce32c : PUSH EDI
005ce32d : PUSH 0x0
005ce32f : LEA EDI,[EBP + 0x78]
005ce332 : PUSH 0x6
005ce334 : PUSH 0xb86464
005ce339 : LEA ECX,[EAX + 0x254]
005ce33f : MOV byte ptr [ESP + 0x40],0x0
005ce344 : MOV byte ptr [ESP + 0x30],0x0
005ce349 : CALL 0x00525380
005ce34e : MOV dword ptr [ESP + 0xc],EAX
005ce352 : MOV ESI,0x1
005ce357 : ADD dword ptr [EAX + 0x8],ESI
005ce35a : MOV EAX,dword ptr [EDI]
005ce35c : MOV ECX,dword ptr [EAX + 0x2a0]
005ce362 : MOV EDX,dword ptr [ECX + 0x10]
005ce365 : MOV EDX,dword ptr [EDX + 0x2c]
005ce368 : LEA EAX,[ESP + 0x24]
005ce36c : PUSH EAX
005ce36d : ADD ECX,0x10
005ce370 : LEA EAX,[ESP + 0x10]
005ce374 : PUSH EAX
005ce375 : PUSH EDI
005ce376 : CALL EDX
005ce378 : TEST AL,AL
005ce37a : JZ 0x005ce4a2
005ce380 : PUSH EBX
005ce381 : PUSH EBP
005ce382 : LEA ECX,[ESP + 0x2c]
005ce386 : CALL 0x00526fa0
005ce38b : MOV EDX,dword ptr [EDI]
005ce38d : LEA ECX,[EAX + 0x10]
005ce390 : MOV EAX,dword ptr [ECX]
005ce392 : LEA EBX,[ESP + 0x38]
005ce396 : PUSH EBX
005ce397 : ADD EDX,0x60
005ce39a : PUSH EDX
005ce39b : MOV EDX,dword ptr [EAX + 0x2c]
005ce39e : PUSH EDI
005ce39f : CALL EDX
005ce3a1 : TEST AL,AL
005ce3a3 : JZ 0x005ce4a1
005ce3a9 : PUSH EBP
005ce3aa : MOV ECX,EBX
005ce3ac : CALL 0x00526fa0
005ce3b1 : TEST EAX,EAX
005ce3b3 : JZ 0x005ce4a1
005ce3b9 : ADD EAX,0x10
005ce3bc : MOV dword ptr [ESP + 0x14],EAX
005ce3c0 : JZ 0x005ce4a1
005ce3c6 : MOV EAX,dword ptr [ESP + 0x50]
005ce3ca : MOV EAX,dword ptr [EAX]
005ce3cc : CMP dword ptr [EAX + 0x10],0x0
005ce3d0 : JZ 0x005ce40f
005ce3d2 : MOV dword ptr [ESP + 0x1c],EAX
005ce3d6 : MOV byte ptr [ESP + 0x18],0x5
005ce3db : ADD dword ptr [EAX + 0x8],ESI
005ce3de : ADD dword ptr [EBP + 0x8],0x10
005ce3e2 : MOV EAX,dword ptr [EBP + 0x8]
005ce3e5 : CMP EAX,dword ptr [EBP + 0x10]
005ce3e8 : LEA ESI,[EBP + 0x8]
005ce3eb : JC 0x005ce3f4
005ce3ed : MOV ECX,ESI
005ce3ef : CALL 0x00504050
005ce3f4 : MOV ECX,dword ptr [ESI]
005ce3f6 : TEST ECX,ECX
005ce3f8 : JZ 0x005ce404
005ce3fa : LEA EDX,[ESP + 0x18]
005ce3fe : PUSH EDX
005ce3ff : CALL 0x005266c0
005ce404 : LEA ECX,[ESP + 0x18]
005ce408 : CALL 0x00526bc0
005ce40d : JMP 0x005ce42e
005ce40f : ADD dword ptr [EBP + 0x8],0x10
005ce413 : MOV EAX,dword ptr [EBP + 0x8]
005ce416 : CMP EAX,dword ptr [EBP + 0x10]
005ce419 : LEA ESI,[EBP + 0x8]
005ce41c : JC 0x005ce425
005ce41e : MOV ECX,ESI
005ce420 : CALL 0x00504050
005ce425 : MOV EAX,dword ptr [ESI]
005ce427 : TEST EAX,EAX
005ce429 : JZ 0x005ce42e
005ce42b : MOV byte ptr [EAX],0x1
005ce42e : MOV EAX,dword ptr [ESI]
005ce430 : SUB EAX,dword ptr [ESI + 0x4]
005ce433 : MOV ECX,dword ptr [ESI + 0x14]
005ce436 : MOV EDI,dword ptr [EDI]
005ce438 : PUSH 0x0
005ce43a : SHL ECX,0x5
005ce43d : SAR EAX,0x4
005ce440 : PUSH 0x12
005ce442 : LEA EBX,[EAX + ECX*0x1 + -0x20]
005ce446 : PUSH 0xb92c0c
005ce44b : LEA ECX,[EDI + 0x254]
005ce451 : CALL 0x00525380
005ce456 : PUSH EBX
005ce457 : MOV dword ptr [ESP + 0x50],EAX
005ce45b : INC dword ptr [EAX + 0x8]
005ce45e : MOV EAX,dword ptr [ESP + 0x18]
005ce462 : PUSH 0x1
005ce464 : LEA EDX,[ESP + 0x54]
005ce468 : PUSH EDX
005ce469 : PUSH EAX
005ce46a : PUSH EBP
005ce46b : CALL 0x0057bb40
005ce470 : MOV EAX,dword ptr [ESP + 0x60]
005ce474 : DEC dword ptr [EAX + 0x8]
005ce477 : MOV ECX,EAX
005ce479 : ADD EAX,0x8
005ce47c : ADD ESP,0x14
005ce47f : CMP dword ptr [EAX],0x0
005ce482 : JNZ 0x005ce489
005ce484 : CALL 0x00525340
005ce489 : MOV ECX,dword ptr [ESI]
005ce48b : CALL 0x00526bc0
005ce490 : ADD dword ptr [ESI],-0x10
005ce493 : MOV EAX,dword ptr [ESI]
005ce495 : CMP EAX,dword ptr [ESI + 0x4]
005ce498 : JNC 0x005ce4a1
005ce49a : MOV ECX,ESI
005ce49c : CALL 0x00504f30
005ce4a1 : POP EBX
005ce4a2 : MOV EAX,dword ptr [ESP + 0xc]
005ce4a6 : DEC dword ptr [EAX + 0x8]
005ce4a9 : MOV ECX,EAX
005ce4ab : ADD EAX,0x8
005ce4ae : CMP dword ptr [EAX],0x0
005ce4b1 : POP EDI
005ce4b2 : POP ESI
005ce4b3 : POP EBP
005ce4b4 : JNZ 0x005ce4bb
005ce4b6 : CALL 0x00525340
005ce4bb : LEA ECX,[ESP + 0x18]
005ce4bf : CALL 0x00526bc0
005ce4c4 : LEA ECX,[ESP + 0x28]
005ce4c8 : CALL 0x00526bc0
005ce4cd : ADD ESP,0x38
005ce4d0 : RET
