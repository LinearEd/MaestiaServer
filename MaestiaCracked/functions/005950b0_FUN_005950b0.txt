PROGRAM  : Maestia.exe
FUNCTION : FUN_005950b0
ENTRY    : 005950b0
BODY     : [[005950b0, 005951f9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005950b0(int param_1)

{
  undefined1 *puVar1;
  int iVar2;
  int iVar3;
  GRefCountNTSImpl *this;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined *puVar6;
  undefined4 uVar7;
  undefined *puVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  GRefCountNTSImpl *local_4c [16];
  uint local_c;
  
  iVar2 = param_1;
  puVar1 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar1 = 0;
  if (*(int **)(iVar2 + 8) == (int *)0x0) {
    iVar3 = *(int *)(*(int *)(iVar2 + 0x18) + 0x74);
  }
  else {
    iVar3 = (**(code **)(**(int **)(iVar2 + 8) + 8))();
    if (iVar3 != 2) {
      return;
    }
    if (*(int *)(iVar2 + 8) == 0) {
      return;
    }
    iVar3 = *(int *)(iVar2 + 8) + -0x68;
  }
  if ((iVar3 != 0) && (1 < *(int *)(iVar2 + 0x1c))) {
    uVar12 = 0;
    uVar11 = 0;
    uVar10 = 0;
    uVar4 = *(undefined4 *)(iVar2 + 0x18);
    uVar9 = 0;
    puVar8 = &DAT_00d65698;
    uVar7 = 1;
    puVar6 = &DAT_00d65858;
    uVar5 = 1;
    FUN_00526260(1);
    FUN_00527730(uVar4);
    iVar3 = FUN_0063b380(uVar5,puVar6,uVar7,puVar8,uVar9,uVar10,uVar11,uVar12);
    FUN_0051d350(0x10001,iVar3 + 0x4000,uVar5,puVar6,uVar7,puVar8,uVar9,uVar10,uVar11,uVar12);
    if (local_c < 0x7efffffe) {
      uVar4 = *(undefined4 *)(iVar2 + 0x18);
      FUN_00526260(0);
      FUN_005272e0(&param_1,uVar4,0xffffffff,0);
      this = (GRefCountNTSImpl *)FUN_00594270(local_4c,&param_1,0,0,0xffffffff,1,0,0);
      if (this != (GRefCountNTSImpl *)0x0) {
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
      }
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
      if (*(int *)(param_1 + 8) == 0) {
        FUN_00525340();
      }
      if (this != (GRefCountNTSImpl *)0x0) {
        (**(code **)(*(int *)this + 0x14))(0);
        FUN_00526c80(-(uint)(((byte)this[0x66] & 0x80) != 0) & (uint)this);
        GRefCountNTSImpl::Release(this);
      }
    }
    if (local_4c[0] != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(local_4c[0]);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005950b0 : SUB ESP,0x4c
005950b3 : PUSH EBX
005950b4 : PUSH ESI
005950b5 : MOV ESI,dword ptr [ESP + 0x58]
005950b9 : PUSH EDI
005950ba : MOV EDI,dword ptr [ESI + 0x4]
005950bd : MOV ECX,EDI
005950bf : CALL 0x00526400
005950c4 : MOV byte ptr [EDI],0x0
005950c7 : MOV ECX,dword ptr [ESI + 0x8]
005950ca : TEST ECX,ECX
005950cc : JNZ 0x005950d6
005950ce : MOV EAX,dword ptr [ESI + 0x18]
005950d1 : MOV EBX,dword ptr [EAX + 0x74]
005950d4 : JMP 0x005950f4
005950d6 : MOV EDX,dword ptr [ECX]
005950d8 : MOV EAX,dword ptr [EDX + 0x8]
005950db : CALL EAX
005950dd : CMP EAX,0x2
005950e0 : JNZ 0x005951f3
005950e6 : MOV EBX,dword ptr [ESI + 0x8]
005950e9 : TEST EBX,EBX
005950eb : JZ 0x005951f3
005950f1 : ADD EBX,-0x68
005950f4 : TEST EBX,EBX
005950f6 : JZ 0x005951f3
005950fc : CMP dword ptr [ESI + 0x1c],0x2
00595100 : JL 0x005951f3
00595106 : FLDZ
00595108 : PUSH 0x0
0059510a : PUSH 0x0
0059510c : PUSH 0x0
0059510e : PUSH ECX
0059510f : MOV ECX,dword ptr [ESI + 0x18]
00595112 : FSTP float ptr [ESP]
00595115 : PUSH 0xd65698
0059511a : PUSH 0x1
0059511c : PUSH 0xd65858
00595121 : PUSH 0x1
00595123 : PUSH ECX
00595124 : PUSH 0x1
00595126 : MOV ECX,ESI
00595128 : CALL 0x00526260
0059512d : MOV ECX,EAX
0059512f : CALL 0x00527730
00595134 : CALL 0x0063b380
00595139 : ADD EAX,0x4000
0059513e : PUSH EAX
0059513f : PUSH ECX
00595140 : MOV EAX,ESP
00595142 : LEA ECX,[ESP + 0x34]
00595146 : MOV dword ptr [EAX],0x10001
0059514c : CALL 0x0051d350
00595151 : CMP dword ptr [ESP + 0x4c],0x7efffffd
00595159 : JA 0x005951e6
0059515f : MOV EDI,dword ptr [ESI + 0x18]
00595162 : PUSH 0x0
00595164 : MOV ECX,ESI
00595166 : CALL 0x00526260
0059516b : PUSH 0x0
0059516d : PUSH -0x1
0059516f : PUSH EDI
00595170 : LEA EDX,[ESP + 0x68]
00595174 : PUSH EDX
00595175 : MOV ECX,EAX
00595177 : CALL 0x005272e0
0059517c : PUSH 0x0
0059517e : PUSH 0x0
00595180 : PUSH 0x1
00595182 : PUSH -0x1
00595184 : PUSH 0x0
00595186 : PUSH 0x0
00595188 : LEA EAX,[ESP + 0x74]
0059518c : PUSH EAX
0059518d : LEA ECX,[ESP + 0x28]
00595191 : PUSH ECX
00595192 : MOV ECX,EBX
00595194 : CALL 0x00594270
00595199 : MOV EDI,EAX
0059519b : TEST EDI,EDI
0059519d : JZ 0x005951a2
0059519f : INC dword ptr [EDI + 0x4]
005951a2 : MOV EAX,dword ptr [ESP + 0x5c]
005951a6 : DEC dword ptr [EAX + 0x8]
005951a9 : MOV ECX,EAX
005951ab : ADD EAX,0x8
005951ae : CMP dword ptr [EAX],0x0
005951b1 : JNZ 0x005951b8
005951b3 : CALL 0x00525340
005951b8 : TEST EDI,EDI
005951ba : JZ 0x005951e6
005951bc : MOV EDX,dword ptr [EDI]
005951be : MOV EAX,dword ptr [EDX + 0x14]
005951c1 : PUSH 0x0
005951c3 : MOV ECX,EDI
005951c5 : CALL EAX
005951c7 : MOV CL,byte ptr [EDI + 0x66]
005951ca : AND CL,0x80
005951cd : MOVZX EDX,CL
005951d0 : MOV ECX,dword ptr [ESI + 0x4]
005951d3 : NEG EDX
005951d5 : SBB EDX,EDX
005951d7 : AND EDX,EDI
005951d9 : PUSH EDX
005951da : CALL 0x00526c80
005951df : MOV ECX,EDI
005951e1 : CALL 0x004ff7c0
005951e6 : MOV ECX,dword ptr [ESP + 0xc]
005951ea : TEST ECX,ECX
005951ec : JZ 0x005951f3
005951ee : CALL 0x004ff7c0
005951f3 : POP EDI
005951f4 : POP ESI
005951f5 : POP EBX
005951f6 : ADD ESP,0x4c
005951f9 : RET
