PROGRAM  : Maestia.exe
FUNCTION : FUN_008f7470
ENTRY    : 008f7470
BODY     : [[008f7470, 008f75e9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f7470(undefined4 param_1,undefined2 param_2)

{
  uint uVar1;
  undefined4 uVar2;
  int unaff_EDI;
  undefined4 in_stack_00000018;
  uint in_stack_0000001c;
  undefined2 in_stack_00000024;
  int in_stack_00000034;
  uint in_stack_00000038;
  uint local_38;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b1e58e;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_8._0_1_ = 2;
  local_8._1_3_ = 0;
  *(undefined4 *)(unaff_EDI + 0x18) = 7;
  *(undefined4 *)(unaff_EDI + 0x14) = 0;
  *(undefined2 *)(unaff_EDI + 4) = 0;
  if (in_stack_00000034 == 0) {
    uVar2 = FUN_00406460(L"img://icon\\");
    local_8._0_1_ = 3;
    FUN_00405eb0(uVar2,0,0xffffffff);
    local_8._0_1_ = 2;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_14 = 7;
    local_18 = 0;
    local_28 = 0;
  }
  else {
    FUN_00405eb0(&stack0x00000020,0,0xffffffff);
  }
  uVar2 = FUN_0070c800(&param_1,uVar1);
  local_8._0_1_ = 4;
  FUN_00405c30(uVar2,0,0xffffffff);
  local_8._0_1_ = 2;
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  FUN_00406360(L".png",4);
  local_8._0_1_ = 5;
  FUN_00405c30(local_2c,0,0xffffffff);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  local_8 = CONCAT31(local_8._1_3_,1);
  if (7 < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_stack_0000001c = 7;
  in_stack_00000018 = 0;
  param_2 = 0;
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < in_stack_00000038) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008f7470 : PUSH EBP
008f7471 : MOV EBP,ESP
008f7473 : PUSH -0x1
008f7475 : PUSH 0xb1e58e
008f747a : MOV EAX,FS:[0x0]
008f7480 : PUSH EAX
008f7481 : SUB ESP,0x40
008f7484 : PUSH EBX
008f7485 : PUSH ESI
008f7486 : MOV EAX,[0x00d66fa0]
008f748b : XOR EAX,EBP
008f748d : PUSH EAX
008f748e : LEA EAX,[EBP + -0xc]
008f7491 : MOV FS:[0x0],EAX
008f7497 : XOR EBX,EBX
008f7499 : MOV dword ptr [EBP + -0x4],EBX
008f749c : MOV dword ptr [EBP + -0x30],EDI
008f749f : MOV dword ptr [EBP + -0x2c],EBX
008f74a2 : MOV dword ptr [EBP + -0x4],0x2
008f74a9 : MOV ESI,0x7
008f74ae : XOR EAX,EAX
008f74b0 : MOV dword ptr [EDI + 0x18],ESI
008f74b3 : MOV dword ptr [EDI + 0x14],EBX
008f74b6 : MOV word ptr [EDI + 0x4],AX
008f74ba : MOV dword ptr [EBP + -0x2c],0x1
008f74c1 : CMP dword ptr [EBP + 0x38],EBX
008f74c4 : JNZ 0x008f7502
008f74c6 : PUSH 0xc60ed0
008f74cb : LEA ECX,[EBP + -0x28]
008f74ce : CALL 0x00406460
008f74d3 : MOV byte ptr [EBP + -0x4],0x3
008f74d7 : PUSH -0x1
008f74d9 : PUSH EBX
008f74da : PUSH EAX
008f74db : MOV ECX,EDI
008f74dd : CALL 0x00405eb0
008f74e2 : MOV byte ptr [EBP + -0x4],0x2
008f74e6 : CMP dword ptr [EBP + -0x10],0x8
008f74ea : JC 0x008f74f4
008f74ec : MOV ECX,dword ptr [EBP + -0x24]
008f74ef : CALL 0x006f04e0
008f74f4 : XOR ECX,ECX
008f74f6 : MOV dword ptr [EBP + -0x10],ESI
008f74f9 : MOV dword ptr [EBP + -0x14],EBX
008f74fc : MOV word ptr [EBP + -0x24],CX
008f7500 : JMP 0x008f7510
008f7502 : PUSH -0x1
008f7504 : PUSH EBX
008f7505 : LEA EDX,[EBP + 0x24]
008f7508 : PUSH EDX
008f7509 : MOV ECX,EDI
008f750b : CALL 0x00405eb0
008f7510 : LEA EAX,[EBP + 0x8]
008f7513 : PUSH EAX
008f7514 : LEA ESI,[EBP + -0x4c]
008f7517 : CALL 0x0070c800
008f751c : ADD ESP,0x4
008f751f : MOV byte ptr [EBP + -0x4],0x4
008f7523 : PUSH -0x1
008f7525 : PUSH EBX
008f7526 : PUSH EAX
008f7527 : MOV ECX,EDI
008f7529 : CALL 0x00405c30
008f752e : MOV byte ptr [EBP + -0x4],0x2
008f7532 : CMP dword ptr [EBP + -0x34],0x8
008f7536 : JC 0x008f7540
008f7538 : MOV ECX,dword ptr [EBP + -0x48]
008f753b : CALL 0x006f04e0
008f7540 : XOR ECX,ECX
008f7542 : PUSH 0x4
008f7544 : MOV ESI,0x7
008f7549 : MOV word ptr [EBP + -0x48],CX
008f754d : XOR EDX,EDX
008f754f : PUSH 0xc60ee8
008f7554 : LEA ECX,[EBP + -0x28]
008f7557 : MOV dword ptr [EBP + -0x34],ESI
008f755a : MOV dword ptr [EBP + -0x38],EBX
008f755d : MOV dword ptr [EBP + -0x10],ESI
008f7560 : MOV dword ptr [EBP + -0x14],EBX
008f7563 : MOV word ptr [EBP + -0x24],DX
008f7567 : CALL 0x00406360
008f756c : MOV byte ptr [EBP + -0x4],0x5
008f7570 : PUSH -0x1
008f7572 : PUSH EBX
008f7573 : LEA EAX,[EBP + -0x28]
008f7576 : PUSH EAX
008f7577 : MOV ECX,EDI
008f7579 : CALL 0x00405c30
008f757e : MOV byte ptr [EBP + -0x4],0x2
008f7582 : CMP dword ptr [EBP + -0x10],0x8
008f7586 : JC 0x008f7590
008f7588 : MOV ECX,dword ptr [EBP + -0x24]
008f758b : CALL 0x006f04e0
008f7590 : XOR ECX,ECX
008f7592 : MOV dword ptr [EBP + -0x10],ESI
008f7595 : MOV dword ptr [EBP + -0x14],EBX
008f7598 : MOV word ptr [EBP + -0x24],CX
008f759c : MOV byte ptr [EBP + -0x4],0x1
008f75a0 : CMP dword ptr [EBP + 0x20],0x8
008f75a4 : JC 0x008f75ae
008f75a6 : MOV ECX,dword ptr [EBP + 0xc]
008f75a9 : CALL 0x006f04e0
008f75ae : XOR EDX,EDX
008f75b0 : MOV dword ptr [EBP + 0x20],ESI
008f75b3 : MOV dword ptr [EBP + 0x1c],EBX
008f75b6 : MOV word ptr [EBP + 0xc],DX
008f75ba : MOV byte ptr [EBP + -0x4],BL
008f75bd : CMP dword ptr [EBP + 0x3c],0x8
008f75c1 : JC 0x008f75cb
008f75c3 : MOV ECX,dword ptr [EBP + 0x28]
008f75c6 : CALL 0x006f04e0
008f75cb : XOR EAX,EAX
008f75cd : MOV dword ptr [EBP + 0x3c],ESI
008f75d0 : MOV dword ptr [EBP + 0x38],EBX
008f75d3 : MOV word ptr [EBP + 0x28],AX
008f75d7 : MOV EAX,EDI
008f75d9 : MOV ECX,dword ptr [EBP + -0xc]
008f75dc : MOV dword ptr FS:[0x0],ECX
008f75e3 : POP ECX
008f75e4 : POP ESI
008f75e5 : POP EBX
008f75e6 : MOV ESP,EBP
008f75e8 : POP EBP
008f75e9 : RET
