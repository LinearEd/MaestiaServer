PROGRAM  : Maestia.exe
FUNCTION : FUN_0071b880
ENTRY    : 0071b880
BODY     : [[0071b880, 0071baba]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0071b880(int param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int in_ECX;
  uint uVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  undefined4 local_14;
  undefined4 local_c;
  
  (**(code **)(**(int **)(in_ECX + 4) + 0x164))
            (*(int **)(in_ECX + 4),
             *(undefined4 *)(*(int *)(*(int *)(*(int *)(param_1 + 4) + 0x1e8) + 0xd0) + 0x18));
  piVar1 = *(int **)(in_ECX + 4);
  if (*(char *)(*(int *)(param_1 + 8) + 0x19) == '\0') {
    (**(code **)(*piVar1 + 0xe4))(piVar1,0x16,3);
  }
  else {
    (**(code **)(*piVar1 + 0xe4))(piVar1,0x16,1);
  }
  uVar4 = (uint)*(ushort *)(*(int *)(param_1 + 4) + 0x228) * 0x1000000 + 0xffffff;
  fVar6 = (float)(uVar4 >> 0x10 & 0xff) * 0.003921569;
  fVar7 = (float)(uVar4 >> 8 & 0xff) * 0.003921569;
  fVar8 = (float)(uVar4 & 0xff) * 0.003921569;
  fVar9 = (float)(uVar4 >> 0x18) * 0.003921569;
  if (fVar6 < 1.0) {
    if (0.0 < fVar6) {
      local_14 = (uint)(longlong)ROUND(fVar6 * 255.0 + DAT_00d72c24);
      uVar4 = local_14;
    }
    else {
      uVar4 = 0;
    }
  }
  else {
    uVar4 = 0xff;
  }
  if (fVar7 < 1.0) {
    if (0.0 < fVar7) {
      local_14 = (uint)(longlong)ROUND(fVar7 * 255.0 + DAT_00d72c24);
      local_c = local_14;
    }
    else {
      local_c = 0;
    }
  }
  else {
    local_c = 0xff;
  }
  if (fVar8 < 1.0) {
    if (0.0 < fVar8) {
      local_14 = (uint)(longlong)ROUND(fVar8 * 255.0 + DAT_00d72c24);
      uVar5 = local_14;
    }
    else {
      uVar5 = 0;
    }
  }
  else {
    uVar5 = 0xff;
  }
  if (fVar9 < 1.0) {
    if (0.0 < fVar9) {
      local_14 = (uint)(longlong)ROUND(DAT_00d72c24 + fVar9 * 255.0);
    }
    else {
      local_14 = 0;
    }
  }
  else {
    local_14 = 0xff;
  }
  (**(code **)(**(int **)(in_ECX + 4) + 0xe4))
            (*(int **)(in_ECX + 4),0x3c,((local_14 << 8 | uVar4) << 8 | local_c) << 8 | uVar5);
  if (*(char *)(*(int *)(param_1 + 8) + 0x1c) != '\0') {
    iVar2 = *(int *)(*(int *)(param_1 + 4) + 0x234);
    iVar3 = *(int *)(*(int *)(param_1 + 4) + 0x230);
    if ((*(int *)(in_ECX + 0x28) != iVar2) || (*(int *)(in_ECX + 0x24) != iVar3)) {
      (**(code **)(**(int **)(in_ECX + 4) + 0xe4))(*(int **)(in_ECX + 4),0x13,iVar3);
      (**(code **)(**(int **)(in_ECX + 4) + 0xe4))(*(int **)(in_ECX + 4),0x14,iVar2);
      *(int *)(in_ECX + 0x24) = iVar3;
      *(int *)(in_ECX + 0x28) = iVar2;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0071b880 : PUSH EBP
0071b881 : MOV EBP,ESP
0071b883 : SUB ESP,0x20
0071b886 : PUSH EBX
0071b887 : PUSH ESI
0071b888 : PUSH EDI
0071b889 : MOV EDI,dword ptr [EBP + 0x8]
0071b88c : MOV EDX,dword ptr [EDI + 0x4]
0071b88f : MOV EDX,dword ptr [EDX + 0x1e8]
0071b895 : MOV EDX,dword ptr [EDX + 0xd0]
0071b89b : MOV EDX,dword ptr [EDX + 0x18]
0071b89e : MOV ESI,ECX
0071b8a0 : MOV EAX,dword ptr [ESI + 0x4]
0071b8a3 : MOV ECX,dword ptr [EAX]
0071b8a5 : PUSH EDX
0071b8a6 : PUSH EAX
0071b8a7 : MOV EAX,dword ptr [ECX + 0x164]
0071b8ad : CALL EAX
0071b8af : MOV ECX,dword ptr [EDI + 0x8]
0071b8b2 : CMP byte ptr [ECX + 0x19],0x0
0071b8b6 : MOV EAX,dword ptr [ESI + 0x4]
0071b8b9 : JZ 0x0071b8cc
0071b8bb : MOV EDX,dword ptr [EAX]
0071b8bd : PUSH 0x1
0071b8bf : PUSH 0x16
0071b8c1 : PUSH EAX
0071b8c2 : MOV EAX,dword ptr [EDX + 0xe4]
0071b8c8 : CALL EAX
0071b8ca : JMP 0x0071b8db
0071b8cc : MOV ECX,dword ptr [EAX]
0071b8ce : MOV EDX,dword ptr [ECX + 0xe4]
0071b8d4 : PUSH 0x3
0071b8d6 : PUSH 0x16
0071b8d8 : PUSH EAX
0071b8d9 : CALL EDX
0071b8db : MOV EAX,dword ptr [EDI + 0x4]
0071b8de : FLD float ptr [0x00cdf130]
0071b8e4 : MOVZX EAX,word ptr [EAX + 0x228]
0071b8eb : FLD float ptr [0x00d72c24]
0071b8f1 : MOVSS XMM1,dword ptr [0x00cdf178]
0071b8f9 : XORPS XMM5,XMM5
0071b8fc : SHL EAX,0x18
0071b8ff : ADD EAX,0xffffff
0071b904 : MOV ECX,EAX
0071b906 : SHR ECX,0x10
0071b909 : MOVZX EDX,CL
0071b90c : MOV ECX,EAX
0071b90e : SHR ECX,0x8
0071b911 : CVTSI2SS XMM0,EDX
0071b915 : MOVZX EDX,CL
0071b918 : MOVZX ECX,AL
0071b91b : SHR EAX,0x18
0071b91e : MULSS XMM0,XMM1
0071b922 : CVTSI2SS XMM2,EDX
0071b926 : MULSS XMM2,XMM1
0071b92a : CVTSI2SS XMM3,ECX
0071b92e : MULSS XMM3,XMM1
0071b932 : CVTSI2SS XMM4,EAX
0071b936 : MULSS XMM4,XMM1
0071b93a : MOVSS XMM1,dword ptr [0x00c10fc4]
0071b942 : COMISS XMM0,XMM1
0071b945 : MOVSS dword ptr [EBP + -0x20],XMM0
0071b94a : MOVSS dword ptr [EBP + -0x1c],XMM2
0071b94f : MOVSS dword ptr [EBP + -0x18],XMM3
0071b954 : MOVSS dword ptr [EBP + -0x14],XMM4
0071b959 : JC 0x0071b962
0071b95b : MOV EDI,0xff
0071b960 : JMP 0x0071b98d
0071b962 : COMISS XMM5,XMM0
0071b965 : JC 0x0071b96b
0071b967 : XOR EDI,EDI
0071b969 : JMP 0x0071b98d
0071b96b : FLD float ptr [EBP + -0x20]
0071b96e : FNSTCW word ptr [EBP + -0x2]
0071b971 : MOVZX EAX,word ptr [EBP + -0x2]
0071b975 : FMUL ST2
0071b977 : OR EAX,0xc00
0071b97c : MOV dword ptr [EBP + -0x8],EAX
0071b97f : FADD ST0,ST1
0071b981 : FLDCW word ptr [EBP + -0x8]
0071b984 : FISTP qword ptr [EBP + -0x10]
0071b987 : MOV EDI,dword ptr [EBP + -0x10]
0071b98a : FLDCW word ptr [EBP + -0x2]
0071b98d : COMISS XMM2,XMM1
0071b990 : JC 0x0071b99b
0071b992 : MOV dword ptr [EBP + -0x8],0xff
0071b999 : JMP 0x0071b9ce
0071b99b : COMISS XMM5,XMM2
0071b99e : JC 0x0071b9a9
0071b9a0 : MOV dword ptr [EBP + -0x8],0x0
0071b9a7 : JMP 0x0071b9ce
0071b9a9 : FLD float ptr [EBP + -0x1c]
0071b9ac : FNSTCW word ptr [EBP + -0x2]
0071b9af : MOVZX EAX,word ptr [EBP + -0x2]
0071b9b3 : FMUL ST2
0071b9b5 : OR EAX,0xc00
0071b9ba : MOV dword ptr [EBP + -0x8],EAX
0071b9bd : FADD ST0,ST1
0071b9bf : FLDCW word ptr [EBP + -0x8]
0071b9c2 : FISTP qword ptr [EBP + -0x10]
0071b9c5 : MOV EDX,dword ptr [EBP + -0x10]
0071b9c8 : MOV dword ptr [EBP + -0x8],EDX
0071b9cb : FLDCW word ptr [EBP + -0x2]
0071b9ce : COMISS XMM3,XMM1
0071b9d1 : JC 0x0071b9da
0071b9d3 : MOV EDX,0xff
0071b9d8 : JMP 0x0071ba05
0071b9da : COMISS XMM5,XMM3
0071b9dd : JC 0x0071b9e3
0071b9df : XOR EDX,EDX
0071b9e1 : JMP 0x0071ba05
0071b9e3 : FLD float ptr [EBP + -0x18]
0071b9e6 : FNSTCW word ptr [EBP + -0x2]
0071b9e9 : MOVZX EAX,word ptr [EBP + -0x2]
0071b9ed : FMUL ST2
0071b9ef : OR EAX,0xc00
0071b9f4 : MOV dword ptr [EBP + -0xc],EAX
0071b9f7 : FADD ST0,ST1
0071b9f9 : FLDCW word ptr [EBP + -0xc]
0071b9fc : FISTP qword ptr [EBP + -0x10]
0071b9ff : MOV EDX,dword ptr [EBP + -0x10]
0071ba02 : FLDCW word ptr [EBP + -0x2]
0071ba05 : COMISS XMM4,XMM1
0071ba08 : JC 0x0071ba15
0071ba0a : FSTP ST1
0071ba0c : MOV EAX,0xff
0071ba11 : FSTP ST0
0071ba13 : JMP 0x0071ba44
0071ba15 : COMISS XMM5,XMM4
0071ba18 : JC 0x0071ba22
0071ba1a : FSTP ST1
0071ba1c : XOR EAX,EAX
0071ba1e : FSTP ST0
0071ba20 : JMP 0x0071ba44
0071ba22 : FLD float ptr [EBP + -0x14]
0071ba25 : FNSTCW word ptr [EBP + -0x2]
0071ba28 : MOVZX EAX,word ptr [EBP + -0x2]
0071ba2c : FMULP ST2
0071ba2e : OR EAX,0xc00
0071ba33 : MOV dword ptr [EBP + -0xc],EAX
0071ba36 : FADDP
0071ba38 : FLDCW word ptr [EBP + -0xc]
0071ba3b : FISTP qword ptr [EBP + -0x10]
0071ba3e : MOV EAX,dword ptr [EBP + -0x10]
0071ba41 : FLDCW word ptr [EBP + -0x2]
0071ba44 : MOV ECX,dword ptr [ESI + 0x4]
0071ba47 : MOV EBX,dword ptr [ECX]
0071ba49 : SHL EAX,0x8
0071ba4c : OR EAX,EDI
0071ba4e : SHL EAX,0x8
0071ba51 : OR EAX,dword ptr [EBP + -0x8]
0071ba54 : SHL EAX,0x8
0071ba57 : OR EAX,EDX
0071ba59 : PUSH EAX
0071ba5a : MOV EAX,dword ptr [EBX + 0xe4]
0071ba60 : PUSH 0x3c
0071ba62 : PUSH ECX
0071ba63 : CALL EAX
0071ba65 : MOV EAX,dword ptr [EBP + 0x8]
0071ba68 : MOV ECX,dword ptr [EAX + 0x8]
0071ba6b : CMP byte ptr [ECX + 0x1c],0x0
0071ba6f : JZ 0x0071bab2
0071ba71 : MOV EAX,dword ptr [EAX + 0x4]
0071ba74 : MOV EDI,dword ptr [EAX + 0x234]
0071ba7a : MOV EBX,dword ptr [EAX + 0x230]
0071ba80 : CMP dword ptr [ESI + 0x28],EDI
0071ba83 : JNZ 0x0071ba8a
0071ba85 : CMP dword ptr [ESI + 0x24],EBX
0071ba88 : JZ 0x0071bab2
0071ba8a : MOV EAX,dword ptr [ESI + 0x4]
0071ba8d : MOV EDX,dword ptr [EAX]
0071ba8f : PUSH EBX
0071ba90 : PUSH 0x13
0071ba92 : PUSH EAX
0071ba93 : MOV EAX,dword ptr [EDX + 0xe4]
0071ba99 : CALL EAX
0071ba9b : MOV EAX,dword ptr [ESI + 0x4]
0071ba9e : MOV ECX,dword ptr [EAX]
0071baa0 : MOV EDX,dword ptr [ECX + 0xe4]
0071baa6 : PUSH EDI
0071baa7 : PUSH 0x14
0071baa9 : PUSH EAX
0071baaa : CALL EDX
0071baac : MOV dword ptr [ESI + 0x24],EBX
0071baaf : MOV dword ptr [ESI + 0x28],EDI
0071bab2 : POP EDI
0071bab3 : POP ESI
0071bab4 : POP EBX
0071bab5 : MOV ESP,EBP
0071bab7 : POP EBP
0071bab8 : RET 0x4
