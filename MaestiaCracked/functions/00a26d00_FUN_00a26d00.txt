PROGRAM  : Maestia.exe
FUNCTION : FUN_00a26d00
ENTRY    : 00a26d00
BODY     : [[00a26d00, 00a26eb1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a26d00(int param_1)

{
  ushort uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined1 *puVar5;
  wchar_t *pwVar6;
  undefined1 local_88 [4];
  undefined2 local_84;
  undefined2 local_82;
  undefined1 local_80;
  undefined2 local_7e;
  undefined2 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  int local_58;
  int local_54;
  int local_50;
  int local_4c;
  undefined1 local_48 [24];
  undefined1 local_30 [24];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b391b4;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = *(ushort *)(param_1 + 0x450);
  local_18 = uVar2;
  FUN_004080a0(param_1 + 0x388,&local_4c,*(undefined4 *)(param_1 + 0x38c),
               *(undefined4 *)(param_1 + 0x390));
  iVar3 = FUN_00703c00(0x301,uVar2);
  if (iVar3 == 0) {
    uVar2 = (uint)uVar1;
    pwVar6 = L"[ERROR][AvaGuiRvREvent::BuildTowers] fail to find zonedata %d\n";
  }
  else {
    local_58 = iVar3 + 0x29c;
    local_50 = (**(code **)(*(int *)(iVar3 + 0x29c) + 4))();
    while (local_50 != 0) {
      iVar3 = FUN_004f5680();
      local_4c = iVar3;
      local_54 = (**(code **)(*(int *)(iVar3 + 0x78) + 4))();
      while (local_54 != 0) {
        iVar4 = FUN_004f5680();
        puVar5 = *(undefined1 **)(iVar4 + 0xf0);
        if (puVar5 == (undefined1 *)0x0) {
          puVar5 = local_48;
        }
        if (*(short *)(puVar5 + 6) == DAT_00d71a88) {
          puVar5 = *(undefined1 **)(iVar3 + 0x74);
          if (puVar5 == (undefined1 *)0x0) {
            puVar5 = local_30;
          }
          local_7c = *(undefined2 *)(iVar4 + 0x84);
          local_7e = *(undefined2 *)(iVar4 + 0x82);
          local_82 = *(undefined2 *)(puVar5 + 6);
          local_84 = *(undefined2 *)(iVar4 + 6);
          local_64 = 0;
          local_60 = 0;
          local_5c = 0;
          local_78 = 0;
          local_74 = 0;
          local_70 = 0;
          local_80 = 0;
          local_6c = 0xffffffff;
          local_8 = 1;
          FUN_004070c0(local_88);
          local_8 = 0xffffffff;
          local_64 = 0;
          local_60 = 0;
          local_5c = 0;
          iVar3 = local_4c;
        }
      }
      local_54 = 0;
    }
    uVar2 = (*(int *)(param_1 + 0x390) - *(int *)(param_1 + 0x38c)) / 0x30;
    pwVar6 = L"[AvaGuiRvREvent::BuildTowers] tower count %d\n";
    local_50 = 0;
  }
  FUN_008018d0(pwVar6,uVar2);
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a26d00 : PUSH EBP
00a26d01 : MOV EBP,ESP
00a26d03 : PUSH -0x1
00a26d05 : PUSH 0xb391b4
00a26d0a : MOV EAX,FS:[0x0]
00a26d10 : PUSH EAX
00a26d11 : SUB ESP,0x78
00a26d14 : MOV EAX,[0x00d66fa0]
00a26d19 : XOR EAX,EBP
00a26d1b : MOV dword ptr [EBP + -0x14],EAX
00a26d1e : PUSH EBX
00a26d1f : PUSH ESI
00a26d20 : PUSH EDI
00a26d21 : PUSH EAX
00a26d22 : LEA EAX,[EBP + -0xc]
00a26d25 : MOV FS:[0x0],EAX
00a26d2b : MOV EAX,dword ptr [EBP + 0x8]
00a26d2e : MOVZX EDI,word ptr [EAX + 0x450]
00a26d35 : MOV ECX,dword ptr [EAX + 0x38c]
00a26d3b : LEA ESI,[EAX + 0x388]
00a26d41 : MOV EAX,dword ptr [ESI + 0x8]
00a26d44 : PUSH EAX
00a26d45 : PUSH ECX
00a26d46 : LEA EAX,[EBP + -0x48]
00a26d49 : PUSH EAX
00a26d4a : PUSH ESI
00a26d4b : CALL 0x004080a0
00a26d50 : PUSH 0x301
00a26d55 : CALL 0x00703c00
00a26d5a : XOR EBX,EBX
00a26d5c : ADD ESP,0x4
00a26d5f : CMP EAX,EBX
00a26d61 : JNZ 0x00a26d71
00a26d63 : MOVZX ECX,DI
00a26d66 : PUSH ECX
00a26d67 : PUSH 0xcc4970
00a26d6c : JMP 0x00a26e86
00a26d71 : MOV EDX,dword ptr [EAX + 0x29c]
00a26d77 : LEA EDI,[EAX + 0x29c]
00a26d7d : MOV EAX,dword ptr [EDX + 0x4]
00a26d80 : MOV ECX,EDI
00a26d82 : MOV dword ptr [EBP + -0x54],EDI
00a26d85 : CALL EAX
00a26d87 : MOV dword ptr [EBP + -0x4c],EAX
00a26d8a : CMP EAX,EBX
00a26d8c : JZ 0x00a26e69
00a26d92 : JMP 0x00a26d97
00a26d94 : MOV EDI,dword ptr [EBP + -0x54]
00a26d97 : LEA EDX,[EBP + -0x4c]
00a26d9a : MOV EAX,EDI
00a26d9c : CALL 0x004f5680
00a26da1 : MOV EDI,EAX
00a26da3 : MOV EDX,dword ptr [EDI + 0x78]
00a26da6 : MOV EAX,dword ptr [EDX + 0x4]
00a26da9 : LEA ECX,[EDI + 0x78]
00a26dac : MOV dword ptr [EBP + -0x48],EDI
00a26daf : CALL EAX
00a26db1 : MOV dword ptr [EBP + -0x50],EAX
00a26db4 : CMP EAX,EBX
00a26db6 : JZ 0x00a26e60
00a26dbc : LEA ESP,[ESP]
00a26dc0 : LEA EDX,[EBP + -0x50]
00a26dc3 : LEA EAX,[EDI + 0x78]
00a26dc6 : CALL 0x004f5680
00a26dcb : MOV ECX,dword ptr [EAX + 0xf0]
00a26dd1 : CMP ECX,EBX
00a26dd3 : JNZ 0x00a26dd8
00a26dd5 : LEA ECX,[EBP + -0x44]
00a26dd8 : MOV CX,word ptr [ECX + 0x6]
00a26ddc : CMP CX,word ptr [0x00d71a88]
00a26de3 : JNZ 0x00a26e57
00a26de5 : MOV ECX,dword ptr [EDI + 0x74]
00a26de8 : CMP ECX,EBX
00a26dea : JNZ 0x00a26def
00a26dec : LEA ECX,[EBP + -0x2c]
00a26def : MOVZX EDX,word ptr [EAX + 0x84]
00a26df6 : MOVZX EDI,word ptr [EAX + 0x82]
00a26dfd : MOVZX ECX,word ptr [ECX + 0x6]
00a26e01 : MOVZX EAX,word ptr [EAX + 0x6]
00a26e05 : MOV dword ptr [EBP + -0x60],EBX
00a26e08 : MOV dword ptr [EBP + -0x5c],EBX
00a26e0b : MOV dword ptr [EBP + -0x58],EBX
00a26e0e : MOV dword ptr [EBP + -0x4],EBX
00a26e11 : MOV word ptr [EBP + -0x7a],DI
00a26e15 : OR EDI,0xffffffff
00a26e18 : MOV word ptr [EBP + -0x80],AX
00a26e1c : MOV word ptr [EBP + -0x7e],CX
00a26e20 : MOV word ptr [EBP + -0x78],DX
00a26e24 : MOV dword ptr [EBP + -0x74],EBX
00a26e27 : MOV dword ptr [EBP + -0x70],EBX
00a26e2a : MOV dword ptr [EBP + -0x6c],EBX
00a26e2d : MOV byte ptr [EBP + -0x7c],BL
00a26e30 : MOV dword ptr [EBP + -0x68],EDI
00a26e33 : MOV dword ptr [EBP + -0x4],0x1
00a26e3a : LEA EDX,[EBP + 0xffffff7c]
00a26e40 : PUSH EDX
00a26e41 : MOV EAX,ESI
00a26e43 : CALL 0x004070c0
00a26e48 : MOV dword ptr [EBP + -0x4],EDI
00a26e4b : MOV EDI,dword ptr [EBP + -0x48]
00a26e4e : MOV dword ptr [EBP + -0x60],EBX
00a26e51 : MOV dword ptr [EBP + -0x5c],EBX
00a26e54 : MOV dword ptr [EBP + -0x58],EBX
00a26e57 : CMP dword ptr [EBP + -0x50],EBX
00a26e5a : JNZ 0x00a26dc0
00a26e60 : CMP dword ptr [EBP + -0x4c],EBX
00a26e63 : JNZ 0x00a26d94
00a26e69 : MOV ECX,dword ptr [ESI + 0x8]
00a26e6c : SUB ECX,dword ptr [ESI + 0x4]
00a26e6f : MOV EAX,0x2aaaaaab
00a26e74 : IMUL ECX
00a26e76 : SAR EDX,0x3
00a26e79 : MOV EAX,EDX
00a26e7b : SHR EAX,0x1f
00a26e7e : ADD EAX,EDX
00a26e80 : PUSH EAX
00a26e81 : PUSH 0xcc49f0
00a26e86 : MOV ESI,dword ptr [0x00da98e8]
00a26e8c : CALL 0x008018d0
00a26e91 : ADD ESP,0x8
00a26e94 : MOV ECX,dword ptr [EBP + -0xc]
00a26e97 : MOV dword ptr FS:[0x0],ECX
00a26e9e : POP ECX
00a26e9f : POP EDI
00a26ea0 : POP ESI
00a26ea1 : POP EBX
00a26ea2 : MOV ECX,dword ptr [EBP + -0x14]
00a26ea5 : XOR ECX,EBP
00a26ea7 : CALL 0x00633e6b
00a26eac : MOV ESP,EBP
00a26eae : POP EBP
00a26eaf : RET 0x4
