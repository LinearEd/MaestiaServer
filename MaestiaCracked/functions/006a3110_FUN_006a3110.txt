PROGRAM  : Maestia.exe
FUNCTION : FUN_006a3110
ENTRY    : 006a3110
BODY     : [[006a3110, 006a3240]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a3110(undefined4 param_1)

{
  int iVar1;
  int in_EAX;
  uint uVar2;
  int iVar3;
  char *pcVar4;
  int *piVar5;
  int *unaff_ESI;
  int *unaff_EDI;
  int local_4;
  
  local_4 = 0;
  (*(code *)**(undefined4 **)(in_EAX + 4))();
  unaff_ESI[0x12] = (int)unaff_EDI;
  unaff_ESI[0x14] = 0;
  unaff_ESI[0x13] = 0;
  *(undefined1 *)(unaff_ESI + 0x15) = 0;
  local_4 = FUN_006877c0();
  if (local_4 == 0) {
    local_4 = FUN_00688900();
    if (local_4 == 0) {
      piVar5 = (int *)unaff_EDI[8];
      uVar2 = 0x11;
      pcVar4 = "%!PS-TrueTypeFont";
      do {
        if (*piVar5 != *(int *)pcVar4) goto LAB_006a3182;
        uVar2 = uVar2 - 4;
        pcVar4 = (char *)((int)pcVar4 + 4);
        piVar5 = piVar5 + 1;
      } while (3 < uVar2);
      if ((char)*(int *)pcVar4 != (char)*piVar5) {
LAB_006a3182:
        local_4 = 2;
      }
      FUN_006889b0();
      if (local_4 == 0) {
        local_4 = FUN_006877c0();
        if (local_4 == 0) {
          iVar1 = unaff_EDI[1];
          if (unaff_EDI[5] == 0) {
            unaff_ESI[0x13] = unaff_EDI[2] + *unaff_EDI;
            unaff_ESI[0x14] = iVar1;
            *(undefined1 *)(unaff_ESI + 0x15) = 1;
            local_4 = FUN_00687800();
            if (local_4 == 0) {
LAB_006a322d:
              iVar1 = unaff_ESI[0x13];
              unaff_ESI[1] = iVar1;
              *unaff_ESI = iVar1;
              unaff_ESI[2] = unaff_ESI[0x14] + iVar1;
              return 0;
            }
          }
          else {
            iVar3 = FUN_00688c00(param_1,iVar1,&local_4);
            unaff_ESI[0x13] = iVar3;
            if (local_4 == 0) {
              local_4 = FUN_006888a0();
              if (local_4 == 0) {
                unaff_ESI[0x14] = iVar1;
                goto LAB_006a322d;
              }
            }
          }
        }
      }
    }
  }
  if ((char)unaff_ESI[0x15] == '\0') {
    FUN_00687f30(param_1,unaff_ESI[0x13]);
    unaff_ESI[0x13] = 0;
  }
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
006a3110 : PUSH ECX
006a3111 : MOV EDX,dword ptr [ESP + 0x8]
006a3115 : MOV ECX,dword ptr [EAX + 0x4]
006a3118 : PUSH EBX
006a3119 : PUSH EBP
006a311a : PUSH EDX
006a311b : XOR EBX,EBX
006a311d : PUSH EBX
006a311e : MOV dword ptr [ESP + 0x10],EBX
006a3122 : MOV EAX,dword ptr [ECX]
006a3124 : PUSH EBX
006a3125 : PUSH ESI
006a3126 : CALL EAX
006a3128 : PUSH EBX
006a3129 : PUSH EDI
006a312a : MOV dword ptr [ESI + 0x48],EDI
006a312d : MOV dword ptr [ESI + 0x50],EBX
006a3130 : MOV dword ptr [ESI + 0x4c],EBX
006a3133 : MOV byte ptr [ESI + 0x54],BL
006a3136 : CALL 0x006877c0
006a313b : ADD ESP,0x18
006a313e : MOV dword ptr [ESP + 0x8],EAX
006a3142 : CMP EAX,EBX
006a3144 : JNZ 0x006a31d6
006a314a : PUSH 0x11
006a314c : PUSH EDI
006a314d : CALL 0x00688900
006a3152 : ADD ESP,0x8
006a3155 : MOV dword ptr [ESP + 0x8],EAX
006a3159 : CMP EAX,EBX
006a315b : JNZ 0x006a31d6
006a315d : MOV EDX,dword ptr [EDI + 0x20]
006a3160 : LEA EAX,[EBX + 0x11]
006a3163 : MOV ECX,0xbe9668
006a3168 : MOV EBP,dword ptr [EDX]
006a316a : CMP EBP,dword ptr [ECX]
006a316c : JNZ 0x006a3182
006a316e : SUB EAX,0x4
006a3171 : ADD ECX,0x4
006a3174 : ADD EDX,0x4
006a3177 : CMP EAX,0x4
006a317a : JNC 0x006a3168
006a317c : MOV CL,byte ptr [ECX]
006a317e : CMP CL,byte ptr [EDX]
006a3180 : JZ 0x006a318a
006a3182 : MOV dword ptr [ESP + 0x8],0x2
006a318a : PUSH EDI
006a318b : CALL 0x006889b0
006a3190 : MOV EAX,dword ptr [ESP + 0xc]
006a3194 : ADD ESP,0x4
006a3197 : CMP EAX,EBX
006a3199 : JNZ 0x006a31d6
006a319b : PUSH EBX
006a319c : PUSH EDI
006a319d : CALL 0x006877c0
006a31a2 : ADD ESP,0x8
006a31a5 : MOV dword ptr [ESP + 0x8],EAX
006a31a9 : CMP EAX,EBX
006a31ab : JNZ 0x006a31d6
006a31ad : MOV EBP,dword ptr [EDI + 0x4]
006a31b0 : CMP dword ptr [EDI + 0x14],EBX
006a31b3 : JNZ 0x006a31f7
006a31b5 : MOV EDX,dword ptr [EDI + 0x8]
006a31b8 : ADD EDX,dword ptr [EDI]
006a31ba : PUSH EBP
006a31bb : PUSH EDI
006a31bc : MOV dword ptr [ESI + 0x4c],EDX
006a31bf : MOV dword ptr [ESI + 0x50],EBP
006a31c2 : MOV byte ptr [ESI + 0x54],0x1
006a31c6 : CALL 0x00687800
006a31cb : ADD ESP,0x8
006a31ce : MOV dword ptr [ESP + 0x8],EAX
006a31d2 : CMP EAX,EBX
006a31d4 : JZ 0x006a322d
006a31d6 : CMP byte ptr [ESI + 0x54],BL
006a31d9 : JNZ 0x006a31f3
006a31db : MOV EAX,dword ptr [ESI + 0x4c]
006a31de : MOV ECX,dword ptr [ESP + 0x10]
006a31e2 : PUSH EAX
006a31e3 : PUSH ECX
006a31e4 : CALL 0x00687f30
006a31e9 : MOV EAX,dword ptr [ESP + 0x10]
006a31ed : ADD ESP,0x8
006a31f0 : MOV dword ptr [ESI + 0x4c],EBX
006a31f3 : POP EBP
006a31f4 : POP EBX
006a31f5 : POP ECX
006a31f6 : RET
006a31f7 : MOV ECX,dword ptr [ESP + 0x10]
006a31fb : LEA EAX,[ESP + 0x8]
006a31ff : PUSH EAX
006a3200 : PUSH EBP
006a3201 : PUSH ECX
006a3202 : CALL 0x00688c00
006a3207 : MOV ECX,EAX
006a3209 : MOV EAX,dword ptr [ESP + 0x14]
006a320d : ADD ESP,0xc
006a3210 : MOV dword ptr [ESI + 0x4c],ECX
006a3213 : CMP EAX,EBX
006a3215 : JNZ 0x006a31d6
006a3217 : PUSH EBP
006a3218 : PUSH ECX
006a3219 : PUSH EDI
006a321a : CALL 0x006888a0
006a321f : ADD ESP,0xc
006a3222 : MOV dword ptr [ESP + 0x8],EAX
006a3226 : CMP EAX,EBX
006a3228 : JNZ 0x006a31d6
006a322a : MOV dword ptr [ESI + 0x50],EBP
006a322d : MOV ECX,dword ptr [ESI + 0x4c]
006a3230 : MOV EDX,dword ptr [ESI + 0x50]
006a3233 : ADD EDX,ECX
006a3235 : POP EBP
006a3236 : MOV dword ptr [ESI + 0x4],ECX
006a3239 : MOV dword ptr [ESI],ECX
006a323b : MOV dword ptr [ESI + 0x8],EDX
006a323e : POP EBX
006a323f : POP ECX
006a3240 : RET
