PROGRAM  : Maestia.exe
FUNCTION : FUN_00853860
ENTRY    : 00853860
BODY     : [[00853860, 00853bf8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00853860(void)

{
  char cVar1;
  ushort uVar2;
  int *piVar3;
  int iVar4;
  int *in_ECX;
  uint unaff_EBX;
  int *piStack_60;
  int *piStack_5c;
  undefined4 uStack_58;
  float fStack_54;
  void **local_50;
  uint uStack_4c;
  undefined1 auStack_3c [4];
  void *local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined2 local_2c;
  undefined1 local_2a;
  undefined4 local_28;
  undefined1 local_24;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b62c77;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_3c;
  uStack_4c = DAT_00d66fa0 ^ (uint)&stack0xffffffb8;
  ExceptionList = &local_14;
  if (*(char *)((int)in_ECX + 0x65d) == '\0') {
    local_50 = &local_38;
    local_34 = 0;
    local_30 = 0;
    local_2c = 0;
    local_24 = 0;
    local_2a = 1;
    local_28 = 1;
    local_38 = (void *)CONCAT22(local_38._2_2_,0x2800);
    fStack_54 = 1.2234517e-38;
    FUN_0041dea0();
  }
  else if (*(char *)(in_ECX[0x62a] + 0x20) != '\0') {
    local_50 = (void **)0x1;
    fStack_54 = 1.4013e-45;
    uStack_58 = 1;
    piStack_5c = in_ECX + 0x74e;
    piStack_60 = (int *)0x853919;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))();
    piStack_60 = *(int **)(in_ECX[0x62a] + 0x28);
    piVar3 = (int *)FUN_004049b0();
    if (piVar3 != (int *)0x0) {
      piStack_60 = (int *)0x85393c;
      iVar4 = (**(code **)(*piVar3 + 0x38))();
      if (iVar4 != 0) {
        piStack_60 = piVar3 + 0x31;
        FUN_00404350();
        local_1c = 0;
        piStack_60 = (int *)0x853965;
        cVar1 = FUN_004049e0();
        if (cVar1 != '\0') {
          piStack_60 = (int *)0x1;
          FUN_008980b0(&stack0xffffffb8);
        }
        piStack_60 = (int *)0x12;
        FUN_0088e570();
        local_1c = 0xffffffff;
        piStack_60 = (int *)0x853991;
        FUN_00406560();
      }
    }
    piStack_60 = (int *)0x1;
    FUN_0085bfe0(in_ECX);
    piStack_60 = (int *)0x8539a0;
    FUN_0085c1c0();
    piStack_60 = (int *)0x0;
    FUN_0083bb00();
    piStack_60 = (int *)0x8539b9;
    FUN_0083ba10();
    piStack_60 = (int *)0x1;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,1,0);
    local_50 = (void **)&DAT_00d720f0;
    in_ECX[0x67b] = 0;
    in_ECX[0x69a] = 0;
    fStack_54 = 1.2234925e-38;
    FUN_00856310();
    if ((char)in_ECX[0x135] != '\0') {
      local_50 = (void **)0x1;
      fStack_54 = 1.2234961e-38;
      FUN_0084c320();
      iVar4 = in_ECX[0x5fc];
      *(undefined1 *)(iVar4 + 0x1a8) = 0;
      if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
        local_50 = (void **)0x0;
        fStack_54 = 1.2235006e-38;
        (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))();
      }
      if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
        local_50 = (void **)0x0;
        fStack_54 = 1.2235033e-38;
        (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))();
      }
      local_50 = (void **)0x1;
      fStack_54 = 1.2235051e-38;
      FUN_0084c320();
      iVar4 = in_ECX[0x61c];
      *(undefined1 *)(iVar4 + 0x1a8) = 0;
      if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
        local_50 = (void **)0x0;
        fStack_54 = 1.2235096e-38;
        (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))();
      }
      if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
        local_50 = (void **)0x0;
        fStack_54 = 1.2235125e-38;
        (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))();
      }
      local_50 = (void **)0x1;
      fStack_54 = 1.2235143e-38;
      FUN_0084c320();
      *(undefined1 *)(in_ECX + 0x663) = 1;
      *(undefined1 *)(in_ECX + 0x135) = 0;
    }
  }
  local_50 = (void **)0x3f800000;
  fStack_54 = 0.0;
  uStack_58 = 0;
  piStack_5c = (int *)0x1;
  piStack_60 = (int *)0x0;
  (**(code **)(*in_ECX + 0x188))(0x19);
  fStack_54 = (float)in_ECX[0xea];
  if (in_ECX[0xea] < 0) {
    fStack_54 = fStack_54 + 4.2949673e+09;
  }
  iVar4 = in_ECX[0x104];
  fStack_54 = fStack_54 * 0.001;
  if (fStack_54 < *(float *)((uint)(*(char *)(iVar4 + 300) == '\0') * 0x30 + 0x94 + iVar4)) {
    iVar4 = *(int *)((uint)(*(char *)(iVar4 + 300) == '\0') * 0x30 + 0xac + iVar4);
    uVar2 = 0;
    if (iVar4 != 0) {
      uVar2 = *(ushort *)(iVar4 + 0x3c);
    }
    fStack_54 = fStack_54 / (float)uVar2;
    FUN_0079c400(fStack_54);
  }
  *(undefined2 *)((int)in_ECX + 0x46a) = 0;
  (**(code **)(*in_ECX + 0x254))(1,in_ECX + 1,1);
  iVar4 = in_ECX[0x5fc];
  *(undefined1 *)(iVar4 + 0x1a8) = 0;
  if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
    (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))(0);
  }
  if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
    (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))(0);
  }
  iVar4 = in_ECX[0x61c];
  *(undefined1 *)(iVar4 + 0x1a8) = 0;
  if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
    (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))(0);
  }
  if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
    (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))(0);
  }
  ExceptionList = local_38;
  __security_check_cookie(unaff_EBX ^ (uint)&piStack_60);
  return;
}



============================================================
DISASSEMBLY
============================================================
00853860 : PUSH EBP
00853861 : MOV EBP,ESP
00853863 : AND ESP,0xfffffff8
00853866 : PUSH -0x1
00853868 : PUSH 0xb62c77
0085386d : MOV EAX,FS:[0x0]
00853873 : PUSH EAX
00853874 : SUB ESP,0x28
00853877 : MOV EAX,[0x00d66fa0]
0085387c : XOR EAX,ESP
0085387e : MOV dword ptr [ESP + 0x20],EAX
00853882 : PUSH EBX
00853883 : PUSH ESI
00853884 : PUSH EDI
00853885 : MOV EAX,[0x00d66fa0]
0085388a : XOR EAX,ESP
0085388c : PUSH EAX
0085388d : LEA EAX,[ESP + 0x38]
00853891 : MOV FS:[0x0],EAX
00853897 : MOV EBX,ECX
00853899 : CMP byte ptr [EBX + 0x65d],0x0
008538a0 : JNZ 0x008538e0
008538a2 : XOR EAX,EAX
008538a4 : LEA ECX,[ESP + 0x14]
008538a8 : MOV dword ptr [ESP + 0x18],EAX
008538ac : MOV dword ptr [ESP + 0x1c],EAX
008538b0 : MOV word ptr [ESP + 0x20],AX
008538b5 : MOV byte ptr [ESP + 0x28],AL
008538b9 : MOV byte ptr [ESP + 0x14],AL
008538bd : PUSH ECX
008538be : LEA EAX,[EBX + 0x19a4]
008538c4 : MOV byte ptr [ESP + 0x26],0x1
008538c9 : MOV dword ptr [ESP + 0x28],0x1
008538d1 : MOV byte ptr [ESP + 0x19],0x28
008538d6 : CALL 0x0041dea0
008538db : JMP 0x00853aa8
008538e0 : MOV EDX,dword ptr [EBX + 0x18a8]
008538e6 : CMP byte ptr [EDX + 0x20],0x0
008538ea : JZ 0x00853aa8
008538f0 : MOV EAX,dword ptr [EBX + 0x138]
008538f6 : MOV ECX,dword ptr [EAX + 0x4]
008538f9 : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x138]
00853900 : MOV EDX,dword ptr [EDX + 0x10]
00853903 : PUSH 0x1
00853905 : PUSH 0x1
00853907 : LEA ECX,[ECX + EBX*0x1 + 0x138]
0085390e : PUSH 0x1
00853910 : LEA EAX,[EBX + 0x1d38]
00853916 : PUSH EAX
00853917 : CALL EDX
00853919 : MOV EAX,dword ptr [EBX + 0x18a8]
0085391f : MOV EAX,dword ptr [EAX + 0x28]
00853922 : PUSH EAX
00853923 : CALL 0x004049b0
00853928 : MOV ESI,EAX
0085392a : XOR EDI,EDI
0085392c : ADD ESP,0x4
0085392f : CMP ESI,EDI
00853931 : JZ 0x00853991
00853933 : MOV EDX,dword ptr [ESI]
00853935 : MOV EAX,dword ptr [EDX + 0x38]
00853938 : MOV ECX,ESI
0085393a : CALL EAX
0085393c : TEST EAX,EAX
0085393e : JZ 0x00853991
00853940 : ADD ESI,0xc4
00853946 : PUSH ESI
00853947 : LEA ESI,[ESP + 0x18]
0085394b : CALL 0x00404350
00853950 : ADD ESP,0x4
00853953 : MOV dword ptr [ESP + 0x40],EDI
00853957 : MOV ESI,0xc3f4c8
0085395c : LEA ECX,[ESP + 0x14]
00853960 : CALL 0x004049e0
00853965 : TEST AL,AL
00853967 : JZ 0x00853977
00853969 : PUSH 0x1
0085396b : LEA ECX,[ESP + 0x18]
0085396f : PUSH ECX
00853970 : MOV ESI,EBX
00853972 : CALL 0x008980b0
00853977 : PUSH 0x12
00853979 : MOV ECX,EBX
0085397b : CALL 0x0088e570
00853980 : MOV dword ptr [ESP + 0x40],0xffffffff
00853988 : LEA ECX,[ESP + 0x14]
0085398c : CALL 0x00406560
00853991 : PUSH 0x1
00853993 : PUSH EBX
00853994 : CALL 0x0085bfe0
00853999 : MOV ECX,EBX
0085399b : CALL 0x0085c1c0
008539a0 : MOV ECX,dword ptr [EBX + 0x18a8]
008539a6 : PUSH EDI
008539a7 : XOR AL,AL
008539a9 : CALL 0x0083bb00
008539ae : MOV ESI,dword ptr [EBX + 0x18a8]
008539b4 : CALL 0x0083ba10
008539b9 : MOV EDX,dword ptr [EBX + 0x138]
008539bf : MOV EAX,dword ptr [EDX + 0x4]
008539c2 : MOV EDX,dword ptr [EAX + EBX*0x1 + 0x138]
008539c9 : MOV EDX,dword ptr [EDX + 0x10]
008539cc : PUSH 0x1
008539ce : LEA ECX,[EAX + EBX*0x1 + 0x138]
008539d5 : PUSH EDI
008539d6 : PUSH 0x1
008539d8 : LEA EAX,[EBX + 0x6d8]
008539de : PUSH EAX
008539df : CALL EDX
008539e1 : XORPS XMM0,XMM0
008539e4 : PUSH 0xd720f0
008539e9 : MOV ESI,EBX
008539eb : MOV dword ptr [EBX + 0x19ec],EDI
008539f1 : MOVSS dword ptr [EBX + 0x1a68],XMM0
008539f9 : CALL 0x00856310
008539fe : CMP byte ptr [EBX + 0x4d4],0x0
00853a05 : JZ 0x00853aa8
00853a0b : MOV EDI,dword ptr [EBX + 0x17f0]
00853a11 : PUSH 0x1
00853a13 : CALL 0x0084c320
00853a18 : MOV ESI,dword ptr [EBX + 0x17f0]
00853a1e : MOV ECX,dword ptr [ESI + 0x168]
00853a24 : MOV byte ptr [ESI + 0x1a8],0x0
00853a2b : TEST ECX,ECX
00853a2d : JZ 0x00853a38
00853a2f : MOV EAX,dword ptr [ECX]
00853a31 : MOV EDX,dword ptr [EAX + 0x10]
00853a34 : PUSH 0x0
00853a36 : CALL EDX
00853a38 : MOV ECX,dword ptr [ESI + 0x16c]
00853a3e : TEST ECX,ECX
00853a40 : JZ 0x00853a4b
00853a42 : MOV EAX,dword ptr [ECX]
00853a44 : MOV EDX,dword ptr [EAX + 0x10]
00853a47 : PUSH 0x0
00853a49 : CALL EDX
00853a4b : MOV EDI,dword ptr [EBX + 0x1870]
00853a51 : PUSH 0x1
00853a53 : CALL 0x0084c320
00853a58 : MOV ESI,dword ptr [EBX + 0x1870]
00853a5e : MOV ECX,dword ptr [ESI + 0x168]
00853a64 : MOV byte ptr [ESI + 0x1a8],0x0
00853a6b : TEST ECX,ECX
00853a6d : JZ 0x00853a78
00853a6f : MOV EAX,dword ptr [ECX]
00853a71 : MOV EDX,dword ptr [EAX + 0x10]
00853a74 : PUSH 0x0
00853a76 : CALL EDX
00853a78 : MOV ESI,dword ptr [ESI + 0x16c]
00853a7e : TEST ESI,ESI
00853a80 : JZ 0x00853a8d
00853a82 : MOV EAX,dword ptr [ESI]
00853a84 : MOV EDX,dword ptr [EAX + 0x10]
00853a87 : PUSH 0x0
00853a89 : MOV ECX,ESI
00853a8b : CALL EDX
00853a8d : MOV EDI,dword ptr [EBX + 0x17f4]
00853a93 : PUSH 0x1
00853a95 : CALL 0x0084c320
00853a9a : MOV byte ptr [EBX + 0x198c],0x1
00853aa1 : MOV byte ptr [EBX + 0x4d4],0x0
00853aa8 : FLD1
00853aaa : MOV EAX,dword ptr [EBX]
00853aac : MOV EDX,dword ptr [EAX + 0x188]
00853ab2 : PUSH ECX
00853ab3 : FSTP float ptr [ESP]
00853ab6 : PUSH 0x0
00853ab8 : PUSH 0x0
00853aba : PUSH 0x1
00853abc : PUSH 0x0
00853abe : MOV ECX,EBX
00853ac0 : PUSH 0x19
00853ac2 : CALL EDX
00853ac4 : FILD dword ptr [EBX + 0x3a8]
00853aca : MOV EAX,dword ptr [EBX + 0x3a8]
00853ad0 : TEST EAX,EAX
00853ad2 : JGE 0x00853ada
00853ad4 : FADD float ptr [0x00cdf0e0]
00853ada : MOV EDX,dword ptr [EBX + 0x410]
00853ae0 : FMUL float ptr [0x00cdf128]
00853ae6 : XOR EAX,EAX
00853ae8 : CMP byte ptr [EDX + 0x12c],AL
00853aee : FSTP float ptr [ESP + 0x10]
00853af2 : MOVSS XMM0,dword ptr [ESP + 0x10]
00853af8 : SETZ AL
00853afb : LEA ECX,[EAX + EAX*0x2]
00853afe : SHL ECX,0x4
00853b01 : MOVSS XMM1,dword ptr [ECX + EDX*0x1 + 0x94]
00853b0a : COMISS XMM1,XMM0
00853b0d : JBE 0x00853b58
00853b0f : XOR EAX,EAX
00853b11 : CMP byte ptr [EDX + 0x12c],AL
00853b17 : SETZ AL
00853b1a : LEA EAX,[EAX + EAX*0x2]
00853b1d : SHL EAX,0x4
00853b20 : MOV EAX,dword ptr [EAX + EDX*0x1 + 0xac]
00853b27 : TEST EAX,EAX
00853b29 : JZ 0x00853b2f
00853b2b : MOVZX EAX,word ptr [EAX + 0x3c]
00853b2f : MOVZX ECX,AX
00853b32 : XOR EAX,EAX
00853b34 : CMP byte ptr [EDX + 0x12c],AL
00853b3a : CVTSI2SS XMM1,ECX
00853b3e : DIVSS XMM0,XMM1
00853b42 : MOVSS dword ptr [ESP + 0x10],XMM0
00853b48 : FLD float ptr [ESP + 0x10]
00853b4c : SETZ AL
00853b4f : PUSH ECX
00853b50 : FSTP float ptr [ESP]
00853b53 : CALL 0x0079c400
00853b58 : MOV EAX,dword ptr [EBX]
00853b5a : PUSH 0x1
00853b5c : XOR EDX,EDX
00853b5e : LEA ECX,[EBX + 0x4]
00853b61 : PUSH ECX
00853b62 : MOV word ptr [EBX + 0x46a],DX
00853b69 : MOV EDX,dword ptr [EAX + 0x254]
00853b6f : PUSH 0x1
00853b71 : MOV ECX,EBX
00853b73 : CALL EDX
00853b75 : MOV ESI,dword ptr [EBX + 0x17f0]
00853b7b : MOV ECX,dword ptr [ESI + 0x168]
00853b81 : MOV byte ptr [ESI + 0x1a8],0x0
00853b88 : TEST ECX,ECX
00853b8a : JZ 0x00853b95
00853b8c : MOV EAX,dword ptr [ECX]
00853b8e : MOV EDX,dword ptr [EAX + 0x10]
00853b91 : PUSH 0x0
00853b93 : CALL EDX
00853b95 : MOV ECX,dword ptr [ESI + 0x16c]
00853b9b : TEST ECX,ECX
00853b9d : JZ 0x00853ba8
00853b9f : MOV EAX,dword ptr [ECX]
00853ba1 : MOV EDX,dword ptr [EAX + 0x10]
00853ba4 : PUSH 0x0
00853ba6 : CALL EDX
00853ba8 : MOV EBX,dword ptr [EBX + 0x1870]
00853bae : MOV ECX,dword ptr [EBX + 0x168]
00853bb4 : MOV byte ptr [EBX + 0x1a8],0x0
00853bbb : TEST ECX,ECX
00853bbd : JZ 0x00853bc8
00853bbf : MOV EAX,dword ptr [ECX]
00853bc1 : MOV EDX,dword ptr [EAX + 0x10]
00853bc4 : PUSH 0x0
00853bc6 : CALL EDX
00853bc8 : MOV ECX,dword ptr [EBX + 0x16c]
00853bce : TEST ECX,ECX
00853bd0 : JZ 0x00853bdb
00853bd2 : MOV EAX,dword ptr [ECX]
00853bd4 : MOV EDX,dword ptr [EAX + 0x10]
00853bd7 : PUSH 0x0
00853bd9 : CALL EDX
00853bdb : MOV ECX,dword ptr [ESP + 0x38]
00853bdf : MOV dword ptr FS:[0x0],ECX
00853be6 : POP ECX
00853be7 : POP EDI
00853be8 : POP ESI
00853be9 : POP EBX
00853bea : MOV ECX,dword ptr [ESP + 0x20]
00853bee : XOR ECX,ESP
00853bf0 : CALL 0x00633e6b
00853bf5 : MOV ESP,EBP
00853bf7 : POP EBP
00853bf8 : RET
