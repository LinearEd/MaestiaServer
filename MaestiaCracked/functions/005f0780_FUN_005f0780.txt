PROGRAM  : Maestia.exe
FUNCTION : FUN_005f0780
ENTRY    : 005f0780
BODY     : [[005f0780, 005f08df]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f0780(void)

{
  char cVar1;
  int iVar2;
  int *piVar3;
  int in_ECX;
  int *unaff_EBX;
  int unaff_EDI;
  int iStack_58;
  uint auStack_54 [4];
  undefined1 auStack_44 [4];
  undefined1 auStack_40 [16];
  undefined **ppuStack_30;
  undefined1 *puStack_2c;
  int iStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined1 uStack_1c;
  int iStack_18;
  undefined4 uStack_14;
  int iStack_10;
  
  if ((*(int *)(in_ECX + 0x38) != 0) && (*(int *)(in_ECX + 0x3c) != 0)) {
    iVar2 = FUN_0051d0a0(*(int *)(in_ECX + 0x3c));
    if (iVar2 != 0) {
      piVar3 = (int *)FUN_0054ed10();
      if (piVar3 != (int *)0x0) {
        iVar2 = (**(code **)(*piVar3 + 0x5c))();
        auStack_44[0] = 0;
        auStack_54[0] = FUN_00525380("onSoundComplete",0xf,0);
        *(int *)(auStack_54[0] + 8) = *(int *)(auStack_54[0] + 8) + 1;
        cVar1 = (**(code **)(*(int *)(in_ECX + 0x10) + 0x2c))(iVar2 + 0x78,auStack_54,auStack_44);
        *(int *)(unaff_EDI + 8) = *(int *)(unaff_EDI + 8) + -1;
        if (*(int *)(unaff_EDI + 8) == 0) {
          FUN_00525340();
        }
        if (cVar1 != '\0') {
          FUN_00527140(&stack0xffffffa4,iVar2);
          iStack_10 = (*(int *)(iVar2 + 8) - *(int *)(iVar2 + 0xc) >> 4) + -0x20 +
                      *(int *)(iVar2 + 0x1c) * 0x20;
          puStack_2c = auStack_40;
          auStack_40[0] = 0;
          ppuStack_30 = &PTR_FUN_00b8ab5c;
          uStack_1c = 0;
          uStack_24 = 0;
          uStack_20 = 0;
          uStack_14 = 0;
          iStack_28 = in_ECX + 0x10;
          iStack_18 = iVar2;
          (**(code **)(*unaff_EBX + 0x28))(&ppuStack_30,iStack_58,0);
          FUN_0051fbd0();
          FUN_00526bc0();
          if (((auStack_54[0] & 2) == 0) && (unaff_EBX != (int *)0x0)) {
            FUN_00503db0();
          }
          if (((auStack_54[0] & 1) == 0) && (iStack_58 != 0)) {
            FUN_00503db0();
          }
        }
        FUN_00526bc0();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005f0780 : SUB ESP,0x58
005f0783 : PUSH EBX
005f0784 : PUSH EDI
005f0785 : MOV EDI,ECX
005f0787 : MOV ECX,dword ptr [EDI + 0x38]
005f078a : XOR EBX,EBX
005f078c : CMP ECX,EBX
005f078e : JZ 0x005f08da
005f0794 : MOV EAX,dword ptr [EDI + 0x3c]
005f0797 : CMP EAX,EBX
005f0799 : JZ 0x005f08da
005f079f : PUSH EAX
005f07a0 : CALL 0x0051d0a0
005f07a5 : CMP EAX,EBX
005f07a7 : JZ 0x005f08da
005f07ad : LEA ECX,[EAX + 0x68]
005f07b0 : CALL 0x0054ed10
005f07b5 : CMP EAX,EBX
005f07b7 : JZ 0x005f08da
005f07bd : MOV EDX,dword ptr [EAX]
005f07bf : PUSH EBP
005f07c0 : MOV ECX,EAX
005f07c2 : MOV EAX,dword ptr [EDX + 0x5c]
005f07c5 : PUSH ESI
005f07c6 : CALL EAX
005f07c8 : MOV ESI,EAX
005f07ca : PUSH EBX
005f07cb : MOV byte ptr [ESP + 0x28],BL
005f07cf : MOV EAX,dword ptr [ESI + 0x78]
005f07d2 : LEA EBP,[ESI + 0x78]
005f07d5 : PUSH 0xf
005f07d7 : PUSH 0xb94bfc
005f07dc : LEA ECX,[EAX + 0x254]
005f07e2 : CALL 0x00525380
005f07e7 : MOV dword ptr [ESP + 0x14],EAX
005f07eb : INC dword ptr [EAX + 0x8]
005f07ee : MOV EDX,dword ptr [EDI + 0x10]
005f07f1 : MOV EDX,dword ptr [EDX + 0x2c]
005f07f4 : LEA EAX,[ESP + 0x24]
005f07f8 : PUSH EAX
005f07f9 : ADD EDI,0x10
005f07fc : LEA ECX,[ESP + 0x18]
005f0800 : PUSH ECX
005f0801 : PUSH EBP
005f0802 : MOV ECX,EDI
005f0804 : CALL EDX
005f0806 : MOV byte ptr [ESP + 0x13],AL
005f080a : MOV EAX,dword ptr [ESP + 0x14]
005f080e : DEC dword ptr [EAX + 0x8]
005f0811 : MOV ECX,EAX
005f0813 : ADD EAX,0x8
005f0816 : CMP dword ptr [EAX],EBX
005f0818 : JNZ 0x005f081f
005f081a : CALL 0x00525340
005f081f : CMP byte ptr [ESP + 0x13],BL
005f0823 : JZ 0x005f08cf
005f0829 : PUSH ESI
005f082a : LEA EAX,[ESP + 0x1c]
005f082e : PUSH EAX
005f082f : LEA ECX,[ESP + 0x2c]
005f0833 : CALL 0x00527140
005f0838 : MOV ECX,dword ptr [ESI + 0x8]
005f083b : SUB ECX,dword ptr [ESI + 0xc]
005f083e : MOV EDX,dword ptr [ESI + 0x1c]
005f0841 : SAR ECX,0x4
005f0844 : SHL EDX,0x5
005f0847 : LEA EAX,[ECX + EDX*0x1 + -0x20]
005f084b : MOV dword ptr [ESP + 0x64],EAX
005f084f : MOV EAX,dword ptr [ESP + 0x1c]
005f0853 : LEA ECX,[ESP + 0x34]
005f0857 : MOV dword ptr [ESP + 0x48],ECX
005f085b : MOV ECX,dword ptr [ESP + 0x18]
005f085f : PUSH EBX
005f0860 : PUSH EAX
005f0861 : MOV byte ptr [ESP + 0x3c],BL
005f0865 : MOV dword ptr [ESP + 0x4c],0xb8ab5c
005f086d : MOV dword ptr [ESP + 0x54],EDI
005f0871 : MOV byte ptr [ESP + 0x60],BL
005f0875 : MOV dword ptr [ESP + 0x58],EBX
005f0879 : MOV dword ptr [ESP + 0x5c],EBX
005f087d : MOV dword ptr [ESP + 0x64],ESI
005f0881 : MOV dword ptr [ESP + 0x68],EBX
005f0885 : MOV EDX,dword ptr [ECX]
005f0887 : MOV EDX,dword ptr [EDX + 0x28]
005f088a : LEA EAX,[ESP + 0x4c]
005f088e : PUSH EAX
005f088f : CALL EDX
005f0891 : LEA ECX,[ESP + 0x44]
005f0895 : CALL 0x0051fbd0
005f089a : LEA ECX,[ESP + 0x34]
005f089e : CALL 0x00526bc0
005f08a3 : TEST byte ptr [ESP + 0x20],0x2
005f08a8 : JNZ 0x005f08b7
005f08aa : MOV ECX,dword ptr [ESP + 0x18]
005f08ae : CMP ECX,EBX
005f08b0 : JZ 0x005f08b7
005f08b2 : CALL 0x00503db0
005f08b7 : TEST byte ptr [ESP + 0x20],0x1
005f08bc : MOV dword ptr [ESP + 0x18],EBX
005f08c0 : JNZ 0x005f08cf
005f08c2 : MOV ECX,dword ptr [ESP + 0x1c]
005f08c6 : CMP ECX,EBX
005f08c8 : JZ 0x005f08cf
005f08ca : CALL 0x00503db0
005f08cf : LEA ECX,[ESP + 0x24]
005f08d3 : CALL 0x00526bc0
005f08d8 : POP ESI
005f08d9 : POP EBP
005f08da : POP EDI
005f08db : POP EBX
005f08dc : ADD ESP,0x58
005f08df : RET
