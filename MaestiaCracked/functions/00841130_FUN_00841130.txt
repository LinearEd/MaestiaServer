PROGRAM  : Maestia.exe
FUNCTION : FUN_00841130
ENTRY    : 00841130
BODY     : [[00841130, 0084118c] [00841190, 008412aa]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Type propagation algorithm not settling */

void FUN_00841130(int param_1)

{
  short sVar1;
  uint uVar2;
  short *psVar3;
  int *piVar4;
  int iVar5;
  uint in_EDX;
  undefined1 local_430 [4];
  undefined2 local_42c;
  undefined4 local_41c;
  uint local_418;
  short local_414;
  undefined1 local_412 [1022];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1b5dd;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  if (in_EDX < 2) {
    piVar4 = *(int **)(param_1 + 8 + in_EDX * 0x10);
    param_1 = param_1 + in_EDX * 0x10;
    if (piVar4 != *(int **)(param_1 + 0xc)) {
      do {
        iVar5 = *piVar4;
        piVar4 = piVar4 + 1;
        *(undefined1 *)(iVar5 + 0x34) = 0;
      } while (piVar4 != *(int **)(param_1 + 0xc));
    }
    piVar4 = *(int **)(param_1 + 0x28);
    if (piVar4 != *(int **)(param_1 + 0x2c)) {
      do {
        iVar5 = *piVar4;
        piVar4 = piVar4 + 1;
        *(undefined1 *)(iVar5 + 0x34) = 0;
      } while (piVar4 != *(int **)(param_1 + 0x2c));
    }
    piVar4 = *(int **)(param_1 + 0x28);
    if (piVar4 != *(int **)(param_1 + 0x2c)) {
      do {
        iVar5 = *piVar4;
        piVar4 = piVar4 + 1;
        *(undefined1 *)(iVar5 + 0x34) = 0;
      } while (piVar4 != *(int **)(param_1 + 0x2c));
    }
  }
  else {
    psVar3 = &local_414;
    for (iVar5 = 0x100; iVar5 != 0; iVar5 = iVar5 + -1) {
      psVar3[0] = 0;
      psVar3[1] = 0;
      psVar3 = psVar3 + 2;
    }
    FUN_0040e4a0(L"AvaSkillDataManager::ClearNewSkillFlags nWhich %d Over");
    local_42c = 0;
    psVar3 = &local_414;
    local_418 = 7;
    local_41c = 0;
    do {
      sVar1 = *psVar3;
      psVar3 = psVar3 + 1;
    } while (sVar1 != 0);
    FUN_00406360(&local_414,(int)psVar3 - (int)local_412 >> 1);
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaSkillDataManager::ClearNewSkillFlags",0x613,local_430,uVar2);
    }
    local_8 = 0xffffffff;
    if (7 < local_418) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_418 = 7;
    local_41c = 0;
    local_42c = 0;
  }
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00841130 : PUSH EBP
00841131 : MOV EBP,ESP
00841133 : PUSH -0x1
00841135 : PUSH 0xb1b5dd
0084113a : MOV EAX,FS:[0x0]
00841140 : PUSH EAX
00841141 : SUB ESP,0x420
00841147 : MOV EAX,[0x00d66fa0]
0084114c : XOR EAX,EBP
0084114e : MOV dword ptr [EBP + -0x10],EAX
00841151 : PUSH EBX
00841152 : PUSH ESI
00841153 : PUSH EDI
00841154 : PUSH EAX
00841155 : LEA EAX,[EBP + -0xc]
00841158 : MOV FS:[0x0],EAX
0084115e : MOV EAX,dword ptr [EBP + 0x8]
00841161 : CMP EDX,0x2
00841164 : JNC 0x008411c2
00841166 : SHL EDX,0x4
00841169 : MOV ECX,dword ptr [EAX + EDX*0x1 + 0x8]
0084116d : ADD EAX,EDX
0084116f : XOR EBX,EBX
00841171 : CMP ECX,dword ptr [EAX + 0xc]
00841174 : JZ 0x00841183
00841176 : MOV EDX,dword ptr [ECX]
00841178 : ADD ECX,0x4
0084117b : MOV byte ptr [EDX + 0x34],BL
0084117e : CMP ECX,dword ptr [EAX + 0xc]
00841181 : JNZ 0x00841176
00841183 : MOV ECX,dword ptr [EAX + 0x28]
00841186 : CMP ECX,dword ptr [EAX + 0x2c]
00841189 : JZ 0x0084119d
0084118b : JMP 0x00841190
00841190 : MOV EDX,dword ptr [ECX]
00841192 : ADD ECX,0x4
00841195 : MOV byte ptr [EDX + 0x34],BL
00841198 : CMP ECX,dword ptr [EAX + 0x2c]
0084119b : JNZ 0x00841190
0084119d : MOV ECX,dword ptr [EAX + 0x28]
008411a0 : CMP ECX,dword ptr [EAX + 0x2c]
008411a3 : JZ 0x0084128d
008411a9 : LEA ESP,[ESP]
008411b0 : MOV EDX,dword ptr [ECX]
008411b2 : ADD ECX,0x4
008411b5 : MOV byte ptr [EDX + 0x34],BL
008411b8 : CMP ECX,dword ptr [EAX + 0x2c]
008411bb : JNZ 0x008411b0
008411bd : JMP 0x0084128d
008411c2 : XOR EAX,EAX
008411c4 : MOVZX ESI,AX
008411c7 : MOV EAX,ESI
008411c9 : PUSH EDX
008411ca : SHL ESI,0x10
008411cd : OR EAX,ESI
008411cf : MOV ECX,0x100
008411d4 : LEA EDI,[EBP + 0xfffffbf0]
008411da : PUSH 0xc3b5e0
008411df : LEA EDX,[EBP + 0xfffffbf0]
008411e5 : STOSD.REP ES:EDI
008411e7 : CALL 0x0040e4a0
008411ec : XOR EBX,EBX
008411ee : ADD ESP,0x8
008411f1 : XOR EAX,EAX
008411f3 : MOV word ptr [EBP + 0xfffffbd8],AX
008411fa : MOV ESI,0x7
008411ff : LEA EAX,[EBP + 0xfffffbf0]
00841205 : MOV dword ptr [EBP + 0xfffffbec],ESI
0084120b : MOV dword ptr [EBP + 0xfffffbe8],EBX
00841211 : LEA EDX,[EAX + 0x2]
00841214 : MOV CX,word ptr [EAX]
00841217 : ADD EAX,0x2
0084121a : CMP CX,BX
0084121d : JNZ 0x00841214
0084121f : SUB EAX,EDX
00841221 : SAR EAX,0x1
00841223 : PUSH EAX
00841224 : LEA ECX,[EBP + 0xfffffbf0]
0084122a : PUSH ECX
0084122b : LEA ECX,[EBP + 0xfffffbd4]
00841231 : CALL 0x00406360
00841236 : MOV dword ptr [EBP + -0x4],EBX
00841239 : MOV EDX,dword ptr [0x00da98e8]
0084123f : MOV ECX,dword ptr [EDX]
00841241 : CMP ECX,EBX
00841243 : JZ 0x0084125d
00841245 : MOV EAX,dword ptr [ECX]
00841247 : MOV EAX,dword ptr [EAX + 0x14]
0084124a : LEA EDX,[EBP + 0xfffffbd4]
00841250 : PUSH EDX
00841251 : PUSH 0x613
00841256 : PUSH 0xc3b650
0084125b : CALL EAX
0084125d : MOV dword ptr [EBP + -0x4],0xffffffff
00841264 : CMP dword ptr [EBP + 0xfffffbec],0x8
0084126b : JC 0x00841278
0084126d : MOV ECX,dword ptr [EBP + 0xfffffbd8]
00841273 : CALL 0x006f04e0
00841278 : XOR ECX,ECX
0084127a : MOV dword ptr [EBP + 0xfffffbec],ESI
00841280 : MOV dword ptr [EBP + 0xfffffbe8],EBX
00841286 : MOV word ptr [EBP + 0xfffffbd8],CX
0084128d : MOV ECX,dword ptr [EBP + -0xc]
00841290 : MOV dword ptr FS:[0x0],ECX
00841297 : POP ECX
00841298 : POP EDI
00841299 : POP ESI
0084129a : POP EBX
0084129b : MOV ECX,dword ptr [EBP + -0x10]
0084129e : XOR ECX,EBP
008412a0 : CALL 0x00633e6b
008412a5 : MOV ESP,EBP
008412a7 : POP EBP
008412a8 : RET 0x4
