PROGRAM  : Maestia.exe
FUNCTION : FUN_008fc740
ENTRY    : 008fc740
BODY     : [[008fc740, 008fcac6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008fc740(void)

{
  uint uVar1;
  int iVar2;
  undefined4 ***pppuVar3;
  undefined4 uVar4;
  int iVar5;
  int *piVar6;
  undefined4 local_74;
  int local_70;
  int local_6c;
  undefined1 local_68 [4];
  undefined4 **local_64 [4];
  undefined4 local_54;
  uint local_50;
  undefined4 **local_48 [4];
  undefined4 local_38;
  uint local_34;
  undefined4 **local_2c [4];
  int local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5241f;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
  local_14 = uVar1;
  FUN_00406360(&DAT_00c62284,0);
  local_8 = 0;
  if (DAT_01724898 != 0) {
    local_6c = 0;
    FUN_00404400(&local_6c);
    iVar2 = local_6c;
    if (local_6c != 0) {
      iVar5 = *(int *)(local_6c + 0x18);
      if (iVar5 == 1) {
        piVar6 = (int *)(local_6c + 0x1c);
        local_70 = 0x1e;
        do {
          if (*piVar6 != 0) {
            iVar2 = FUN_00703c00(0x6600);
            if (iVar2 != 0) {
              FUN_00824a20(DAT_0172491c,0);
              local_8._0_1_ = 1;
              pppuVar3 = (undefined4 ***)local_64[0];
              if (local_50 < 8) {
                pppuVar3 = local_64;
              }
              uVar4 = FUN_00404750(L"%d&%d&%s&%d|",*(undefined4 *)(local_6c + 0x18),*piVar6,pppuVar3
                                   ,piVar6[0x1e]);
              local_8._0_1_ = 2;
              FUN_00405c30(uVar4,0,0xffffffff);
              local_8._0_1_ = 1;
              if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              local_34 = 7;
              local_38 = 0;
              local_48[0] = (undefined4 **)((uint)local_48[0] & 0xffff0000);
              if (local_1c != 0) {
                local_74 = 0x7c;
                iVar2 = FUN_00407cc0(&local_74,1);
                if (iVar2 != -1) {
                  FUN_00405e10(iVar2,1);
                }
              }
              local_8 = (uint)local_8._1_3_ << 8;
              if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              local_50 = 7;
              local_54 = 0;
              local_64[0] = (undefined4 **)((uint)local_64[0] & 0xffff0000);
            }
          }
          piVar6 = piVar6 + 1;
          local_70 = local_70 + -1;
        } while (local_70 != 0);
        local_70 = 0;
      }
      else {
        if (iVar5 == 2) {
          iVar5 = FUN_00703c00(0x6600);
          if (iVar5 == 0) {
            local_8 = 0xffffffff;
            FUN_00406560(uVar1);
            goto LAB_008fcaa9;
          }
          FUN_00406460(L"IDS_TIMETOWER_KILL");
          local_8._0_1_ = 3;
          iVar5 = FUN_0081d120(local_68);
          local_8._0_1_ = 4;
          if (*(uint *)(iVar5 + 0x18) < 8) {
            iVar5 = iVar5 + 4;
          }
          else {
            iVar5 = *(int *)(iVar5 + 4);
          }
          FUN_00404750(iVar5,*(undefined4 *)(iVar2 + 0x1c));
          local_8._0_1_ = 6;
          FUN_00406560();
          local_8._0_1_ = 7;
          FUN_00406560();
          pppuVar3 = (undefined4 ***)local_48[0];
          if (local_34 < 8) {
            pppuVar3 = local_48;
          }
          uVar4 = FUN_00404750(L"%d&%d&%s&%d",*(undefined4 *)(local_6c + 0x18),
                               *(undefined4 *)(local_6c + 0x1c),pppuVar3,
                               *(undefined4 *)(local_6c + 0x94));
          local_8._0_1_ = 8;
          FUN_00405c30(uVar4,0,0xffffffff);
          local_8._0_1_ = 7;
        }
        else {
          if (iVar5 != 5) goto LAB_008fca41;
          FUN_00406460(L"IDS_TIMETOWER_ALLKILL");
          local_8._0_1_ = 9;
          FUN_0081d120(local_68);
          local_8._0_1_ = 0xb;
          FUN_00406560(uVar1);
          pppuVar3 = (undefined4 ***)local_48[0];
          if (local_34 < 8) {
            pppuVar3 = local_48;
          }
          uVar4 = FUN_00404750(L"%d&%d&%s&%d",*(undefined4 *)(iVar2 + 0x18),
                               *(undefined4 *)(iVar2 + 0x1c),pppuVar3,*(undefined4 *)(iVar2 + 0x94))
          ;
          local_8._0_1_ = 0xc;
          FUN_00405c30(uVar4,0,0xffffffff);
          local_8._0_1_ = 0xb;
        }
        FUN_00406560();
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_00406560();
      }
LAB_008fca41:
      if (((local_1c != 0) && (iVar2 = *DAT_00da9894, iVar2 != 0)) && (*(int *)(iVar2 + 0x114) != 0)
         ) {
        pppuVar3 = (undefined4 ***)local_2c[0];
        if (local_18 < 8) {
          pppuVar3 = local_2c;
        }
        (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                  (*(int **)(iVar2 + 0x114),"mc_timetowerinf.SetKillCountBox",&DAT_00c62328,pppuVar3
                  );
      }
    }
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
LAB_008fcaa9:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008fc740 : PUSH EBP
008fc741 : MOV EBP,ESP
008fc743 : PUSH -0x1
008fc745 : PUSH 0xb5241f
008fc74a : MOV EAX,FS:[0x0]
008fc750 : PUSH EAX
008fc751 : SUB ESP,0x80
008fc757 : MOV EAX,[0x00d66fa0]
008fc75c : XOR EAX,EBP
008fc75e : MOV dword ptr [EBP + -0x10],EAX
008fc761 : PUSH EBX
008fc762 : PUSH ESI
008fc763 : PUSH EDI
008fc764 : PUSH EAX
008fc765 : LEA EAX,[EBP + -0xc]
008fc768 : MOV FS:[0x0],EAX
008fc76e : XOR EDI,EDI
008fc770 : PUSH EDI
008fc771 : XOR EAX,EAX
008fc773 : PUSH 0xc62284
008fc778 : LEA ECX,[EBP + -0x2c]
008fc77b : MOV dword ptr [EBP + -0x14],0x7
008fc782 : MOV dword ptr [EBP + -0x18],EDI
008fc785 : MOV word ptr [EBP + -0x28],AX
008fc789 : CALL 0x00406360
008fc78e : MOV dword ptr [EBP + -0x4],EDI
008fc791 : MOV ECX,dword ptr [0x01724898]
008fc797 : CMP ECX,EDI
008fc799 : JZ 0x008fca84
008fc79f : MOV ESI,dword ptr [EBP + 0x8]
008fc7a2 : LEA EDX,[EBP + -0x68]
008fc7a5 : PUSH EDX
008fc7a6 : MOV dword ptr [EBP + -0x68],EDI
008fc7a9 : CALL 0x00404400
008fc7ae : MOV ESI,dword ptr [EBP + -0x68]
008fc7b1 : CMP ESI,EDI
008fc7b3 : JZ 0x008fca84
008fc7b9 : MOV EAX,dword ptr [ESI + 0x18]
008fc7bc : CMP EAX,0x1
008fc7bf : JNZ 0x008fc8cd
008fc7c5 : LEA EBX,[ESI + 0x1c]
008fc7c8 : MOV dword ptr [EBP + -0x6c],0x1e
008fc7cf : CMP dword ptr [EBX],0x0
008fc7d2 : JZ 0x008fc8bb
008fc7d8 : MOV DI,word ptr [EBX]
008fc7db : PUSH 0x6600
008fc7e0 : CALL 0x00703c00
008fc7e5 : ADD ESP,0x4
008fc7e8 : TEST EAX,EAX
008fc7ea : JZ 0x008fc8bb
008fc7f0 : LEA EDX,[EAX + 0x18]
008fc7f3 : MOV EAX,[0x0172491c]
008fc7f8 : PUSH 0x0
008fc7fa : PUSH EAX
008fc7fb : LEA ESI,[EBP + -0x64]
008fc7fe : CALL 0x00824a20
008fc803 : MOV byte ptr [EBP + -0x4],0x1
008fc807 : MOV EAX,dword ptr [EBP + -0x60]
008fc80a : MOV EDI,0x8
008fc80f : CMP dword ptr [EBP + -0x4c],EDI
008fc812 : JNC 0x008fc817
008fc814 : LEA EAX,[EBP + -0x60]
008fc817 : MOV ECX,dword ptr [EBX + 0x78]
008fc81a : MOV EDX,dword ptr [EBX]
008fc81c : PUSH ECX
008fc81d : PUSH EAX
008fc81e : MOV EAX,dword ptr [EBP + -0x68]
008fc821 : MOV ECX,dword ptr [EAX + 0x18]
008fc824 : PUSH EDX
008fc825 : PUSH ECX
008fc826 : PUSH 0xc62288
008fc82b : LEA ESI,[EBP + -0x48]
008fc82e : CALL 0x00404750
008fc833 : ADD ESP,0x14
008fc836 : MOV byte ptr [EBP + -0x4],0x2
008fc83a : PUSH -0x1
008fc83c : PUSH 0x0
008fc83e : PUSH EAX
008fc83f : LEA ECX,[EBP + -0x2c]
008fc842 : CALL 0x00405c30
008fc847 : MOV byte ptr [EBP + -0x4],0x1
008fc84b : CMP dword ptr [EBP + -0x30],EDI
008fc84e : JC 0x008fc858
008fc850 : MOV ECX,dword ptr [EBP + -0x44]
008fc853 : CALL 0x006f04e0
008fc858 : XOR EDX,EDX
008fc85a : MOV ESI,0x7
008fc85f : MOV dword ptr [EBP + -0x30],ESI
008fc862 : MOV dword ptr [EBP + -0x34],0x0
008fc869 : MOV word ptr [EBP + -0x44],DX
008fc86d : CMP dword ptr [EBP + -0x18],EDX
008fc870 : JZ 0x008fc899
008fc872 : PUSH 0x1
008fc874 : LEA EAX,[EBP + -0x70]
008fc877 : PUSH EAX
008fc878 : OR ECX,0xffffffff
008fc87b : LEA EDI,[EBP + -0x2c]
008fc87e : MOV dword ptr [EBP + -0x70],0x7c
008fc885 : CALL 0x00407cc0
008fc88a : CMP EAX,-0x1
008fc88d : JZ 0x008fc899
008fc88f : PUSH 0x1
008fc891 : PUSH EAX
008fc892 : MOV ECX,EDI
008fc894 : CALL 0x00405e10
008fc899 : MOV byte ptr [EBP + -0x4],0x0
008fc89d : CMP dword ptr [EBP + -0x4c],0x8
008fc8a1 : JC 0x008fc8ab
008fc8a3 : MOV ECX,dword ptr [EBP + -0x60]
008fc8a6 : CALL 0x006f04e0
008fc8ab : XOR ECX,ECX
008fc8ad : MOV dword ptr [EBP + -0x4c],ESI
008fc8b0 : MOV dword ptr [EBP + -0x50],0x0
008fc8b7 : MOV word ptr [EBP + -0x60],CX
008fc8bb : ADD EBX,0x4
008fc8be : SUB dword ptr [EBP + -0x6c],0x1
008fc8c2 : JNZ 0x008fc7cf
008fc8c8 : JMP 0x008fca41
008fc8cd : CMP EAX,0x2
008fc8d0 : JNZ 0x008fc9ae
008fc8d6 : MOV DI,word ptr [ESI + 0x1c]
008fc8da : PUSH 0x6600
008fc8df : CALL 0x00703c00
008fc8e4 : ADD ESP,0x4
008fc8e7 : TEST EAX,EAX
008fc8e9 : JNZ 0x008fc8ff
008fc8eb : MOV dword ptr [EBP + -0x4],0xffffffff
008fc8f2 : LEA ECX,[EBP + -0x2c]
008fc8f5 : CALL 0x00406560
008fc8fa : JMP 0x008fcaa9
008fc8ff : PUSH 0xc622a4
008fc904 : LEA ECX,[EBP + -0x64]
008fc907 : CALL 0x00406460
008fc90c : MOV byte ptr [EBP + -0x4],0x3
008fc910 : MOV ECX,dword ptr [0x0172491c]
008fc916 : LEA EDX,[EBP + -0x64]
008fc919 : PUSH EDX
008fc91a : LEA EDI,[EBP + 0xffffff74]
008fc920 : CALL 0x0081d120
008fc925 : MOV byte ptr [EBP + -0x4],0x4
008fc929 : MOV EDI,0x8
008fc92e : CMP dword ptr [EAX + 0x18],EDI
008fc931 : JC 0x008fc938
008fc933 : MOV EAX,dword ptr [EAX + 0x4]
008fc936 : JMP 0x008fc93b
008fc938 : ADD EAX,0x4
008fc93b : MOV ECX,dword ptr [ESI + 0x1c]
008fc93e : PUSH ECX
008fc93f : PUSH EAX
008fc940 : LEA ESI,[EBP + -0x48]
008fc943 : CALL 0x00404750
008fc948 : ADD ESP,0x8
008fc94b : MOV byte ptr [EBP + -0x4],0x6
008fc94f : LEA ECX,[EBP + 0xffffff74]
008fc955 : CALL 0x00406560
008fc95a : MOV byte ptr [EBP + -0x4],0x7
008fc95e : LEA ECX,[EBP + -0x64]
008fc961 : CALL 0x00406560
008fc966 : MOV ECX,dword ptr [EBP + -0x44]
008fc969 : CMP dword ptr [EBP + -0x30],EDI
008fc96c : JNC 0x008fc971
008fc96e : LEA ECX,[EBP + -0x44]
008fc971 : MOV EAX,dword ptr [EBP + -0x68]
008fc974 : MOV EDX,dword ptr [EAX + 0x94]
008fc97a : PUSH EDX
008fc97b : MOV EDX,dword ptr [EAX + 0x18]
008fc97e : PUSH ECX
008fc97f : MOV ECX,dword ptr [EAX + 0x1c]
008fc982 : PUSH ECX
008fc983 : PUSH EDX
008fc984 : PUSH 0xc622cc
008fc989 : LEA ESI,[EBP + 0xffffff74]
008fc98f : CALL 0x00404750
008fc994 : ADD ESP,0x14
008fc997 : MOV byte ptr [EBP + -0x4],0x8
008fc99b : PUSH -0x1
008fc99d : PUSH 0x0
008fc99f : PUSH EAX
008fc9a0 : LEA ECX,[EBP + -0x2c]
008fc9a3 : CALL 0x00405c30
008fc9a8 : MOV byte ptr [EBP + -0x4],0x7
008fc9ac : JMP 0x008fca2a
008fc9ae : CMP EAX,0x5
008fc9b1 : JNZ 0x008fca41
008fc9b7 : PUSH 0xc622e4
008fc9bc : LEA ECX,[EBP + -0x64]
008fc9bf : CALL 0x00406460
008fc9c4 : MOV byte ptr [EBP + -0x4],0x9
008fc9c8 : MOV ECX,dword ptr [0x0172491c]
008fc9ce : LEA EAX,[EBP + -0x64]
008fc9d1 : PUSH EAX
008fc9d2 : LEA EDI,[EBP + -0x48]
008fc9d5 : CALL 0x0081d120
008fc9da : MOV BL,0xb
008fc9dc : MOV byte ptr [EBP + -0x4],BL
008fc9df : LEA ECX,[EBP + -0x64]
008fc9e2 : CALL 0x00406560
008fc9e7 : CMP dword ptr [EBP + -0x30],0x8
008fc9eb : MOV EAX,dword ptr [EBP + -0x44]
008fc9ee : JNC 0x008fc9f3
008fc9f0 : LEA EAX,[EBP + -0x44]
008fc9f3 : MOV ECX,dword ptr [ESI + 0x94]
008fc9f9 : MOV EDX,dword ptr [ESI + 0x1c]
008fc9fc : PUSH ECX
008fc9fd : PUSH EAX
008fc9fe : MOV EAX,dword ptr [ESI + 0x18]
008fca01 : PUSH EDX
008fca02 : PUSH EAX
008fca03 : PUSH 0xc62310
008fca08 : LEA ESI,[EBP + 0xffffff74]
008fca0e : CALL 0x00404750
008fca13 : ADD ESP,0x14
008fca16 : MOV byte ptr [EBP + -0x4],0xc
008fca1a : PUSH -0x1
008fca1c : PUSH 0x0
008fca1e : PUSH EAX
008fca1f : LEA ECX,[EBP + -0x2c]
008fca22 : CALL 0x00405c30
008fca27 : MOV byte ptr [EBP + -0x4],BL
008fca2a : LEA ECX,[EBP + 0xffffff74]
008fca30 : CALL 0x00406560
008fca35 : MOV byte ptr [EBP + -0x4],0x0
008fca39 : LEA ECX,[EBP + -0x48]
008fca3c : CALL 0x00406560
008fca41 : XOR EDI,EDI
008fca43 : CMP dword ptr [EBP + -0x18],EDI
008fca46 : JZ 0x008fca84
008fca48 : MOV ECX,dword ptr [0x00da9894]
008fca4e : MOV EAX,dword ptr [ECX]
008fca50 : CMP EAX,EDI
008fca52 : JZ 0x008fca84
008fca54 : CMP dword ptr [EAX + 0x114],EDI
008fca5a : JZ 0x008fca84
008fca5c : CMP dword ptr [EBP + -0x14],0x8
008fca60 : MOV EAX,dword ptr [EAX + 0x114]
008fca66 : MOV ECX,dword ptr [EBP + -0x28]
008fca69 : JNC 0x008fca6e
008fca6b : LEA ECX,[EBP + -0x28]
008fca6e : MOV EDX,dword ptr [EAX]
008fca70 : PUSH ECX
008fca71 : PUSH 0xc62328
008fca76 : PUSH 0xc6232c
008fca7b : PUSH EAX
008fca7c : MOV EAX,dword ptr [EDX + 0x4]
008fca7f : CALL EAX
008fca81 : ADD ESP,0x10
008fca84 : MOV dword ptr [EBP + -0x4],0xffffffff
008fca8b : CMP dword ptr [EBP + -0x14],0x8
008fca8f : JC 0x008fca99
008fca91 : MOV ECX,dword ptr [EBP + -0x28]
008fca94 : CALL 0x006f04e0
008fca99 : XOR ECX,ECX
008fca9b : MOV dword ptr [EBP + -0x14],0x7
008fcaa2 : MOV dword ptr [EBP + -0x18],EDI
008fcaa5 : MOV word ptr [EBP + -0x28],CX
008fcaa9 : MOV ECX,dword ptr [EBP + -0xc]
008fcaac : MOV dword ptr FS:[0x0],ECX
008fcab3 : POP ECX
008fcab4 : POP EDI
008fcab5 : POP ESI
008fcab6 : POP EBX
008fcab7 : MOV ECX,dword ptr [EBP + -0x10]
008fcaba : XOR ECX,EBP
008fcabc : CALL 0x00633e6b
008fcac1 : MOV ESP,EBP
008fcac3 : POP EBP
008fcac4 : RET 0x4
