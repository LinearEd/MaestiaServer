PROGRAM  : Maestia.exe
FUNCTION : FUN_00b0a2d0
ENTRY    : 00b0a2d0
BODY     : [[00b0a2d0, 00b0a4d2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00b0a2d0(int param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  undefined1 uVar4;
  int *piVar5;
  undefined1 local_34 [28];
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar1 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b641d8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = *(undefined4 *)(in_ECX + 0x10);
  FUN_004437f0(&local_14);
  if (local_18 != *(int *)(iVar1 + 0x44)) {
    iVar1 = *(int *)(local_18 + 0x10);
    uVar4 = 0;
    if (iVar1 == 0) goto LAB_00b0a4b4;
    if (param_1 == 0) {
      iVar2 = *(int *)(DAT_00da93ec + 0xac);
    }
    else {
      iVar2 = FUN_00a1a840(param_1);
    }
    if (0 < *(int *)(iVar1 + 0x184)) {
      if (0 < *(int *)(iVar1 + 0x188)) {
        if ((*(int *)(iVar2 + 0xa4) != *(int *)(iVar2 + 0xb0)) ||
           (*(int *)(iVar2 + 0xa8) != *(int *)(iVar2 + 0xb4))) goto LAB_00b0a4b4;
        FUN_00406460(L"IDS_ITEM_POTION_HP_MP_ALREADY_MAX");
        local_8 = 0;
        piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar3 = FUN_0081d120(local_34);
        local_8._0_1_ = 1;
        goto LAB_00b0a3c2;
      }
      if (0 < *(int *)(iVar1 + 0x184)) {
        if (*(int *)(iVar2 + 0xa4) != *(int *)(iVar2 + 0xb0)) goto LAB_00b0a4b4;
        FUN_00406460(L"IDS_POTION_HP_FULL");
        uVar4 = 2;
        local_8 = 2;
        piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar3 = FUN_0081d120(local_34);
        local_8._0_1_ = 3;
        goto LAB_00b0a3c2;
      }
    }
    if ((0 < *(int *)(iVar1 + 0x188)) && (*(int *)(iVar2 + 0xa8) == *(int *)(iVar2 + 0xb4))) {
      FUN_00406460(L"IDS_POTION_DP_FULL");
      uVar4 = 4;
      local_8 = 4;
      piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_34);
      local_8._0_1_ = 5;
LAB_00b0a3c2:
      (**(code **)(*piVar5 + 0x44))(uVar3,3);
      local_8 = CONCAT31(local_8._1_3_,uVar4);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      FUN_008a1050(0xca);
      ExceptionList = local_10;
      return;
    }
  }
LAB_00b0a4b4:
  FUN_00a09420(param_1);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00b0a2d0 : PUSH EBP
00b0a2d1 : MOV EBP,ESP
00b0a2d3 : PUSH -0x1
00b0a2d5 : PUSH 0xb641d8
00b0a2da : MOV EAX,FS:[0x0]
00b0a2e0 : PUSH EAX
00b0a2e1 : SUB ESP,0x40
00b0a2e4 : PUSH EBX
00b0a2e5 : PUSH ESI
00b0a2e6 : PUSH EDI
00b0a2e7 : MOV EAX,[0x00d66fa0]
00b0a2ec : XOR EAX,EBP
00b0a2ee : PUSH EAX
00b0a2ef : LEA EAX,[EBP + -0xc]
00b0a2f2 : MOV FS:[0x0],EAX
00b0a2f8 : MOV EDI,ECX
00b0a2fa : MOV EAX,dword ptr [EDI + 0x10]
00b0a2fd : MOV ESI,dword ptr [0x00d7c54c]
00b0a303 : LEA ECX,[EBP + -0x10]
00b0a306 : MOV dword ptr [EBP + -0x10],EAX
00b0a309 : PUSH ECX
00b0a30a : LEA ECX,[ESI + 0x40]
00b0a30d : LEA EAX,[EBP + -0x14]
00b0a310 : CALL 0x004437f0
00b0a315 : MOV ESI,dword ptr [ESI + 0x44]
00b0a318 : MOV EAX,dword ptr [EBP + -0x14]
00b0a31b : CMP EAX,ESI
00b0a31d : JZ 0x00b0a4b4
00b0a323 : MOV ESI,dword ptr [EAX + 0x10]
00b0a326 : XOR EBX,EBX
00b0a328 : CMP ESI,EBX
00b0a32a : JZ 0x00b0a4b4
00b0a330 : MOV EAX,dword ptr [EBP + 0x8]
00b0a333 : CMP EAX,EBX
00b0a335 : JZ 0x00b0a345
00b0a337 : MOV ECX,dword ptr [0x00da93ec]
00b0a33d : PUSH EAX
00b0a33e : CALL 0x00a1a840
00b0a343 : JMP 0x00b0a351
00b0a345 : MOV EDX,dword ptr [0x00da93ec]
00b0a34b : MOV EAX,dword ptr [EDX + 0xac]
00b0a351 : MOV ECX,dword ptr [ESI + 0x184]
00b0a357 : CMP ECX,EBX
00b0a359 : JLE 0x00b0a460
00b0a35f : CMP dword ptr [ESI + 0x188],EBX
00b0a365 : JLE 0x00b0a40c
00b0a36b : MOV ECX,dword ptr [EAX + 0xa4]
00b0a371 : CMP ECX,dword ptr [EAX + 0xb0]
00b0a377 : JNZ 0x00b0a4b4
00b0a37d : MOV ECX,dword ptr [EAX + 0xa8]
00b0a383 : CMP ECX,dword ptr [EAX + 0xb4]
00b0a389 : JNZ 0x00b0a4b4
00b0a38f : PUSH 0xca4808
00b0a394 : LEA ECX,[EBP + -0x30]
00b0a397 : CALL 0x00406460
00b0a39c : MOV dword ptr [EBP + -0x4],EBX
00b0a39f : MOV EAX,[0x00da9894]
00b0a3a4 : MOV EAX,dword ptr [EAX]
00b0a3a6 : MOV ESI,dword ptr [EAX + 0x1a8]
00b0a3ac : LEA ECX,[EBP + -0x30]
00b0a3af : PUSH ECX
00b0a3b0 : MOV ECX,dword ptr [0x0172491c]
00b0a3b6 : LEA EDI,[EBP + -0x4c]
00b0a3b9 : CALL 0x0081d120
00b0a3be : MOV byte ptr [EBP + -0x4],0x1
00b0a3c2 : MOV EDX,dword ptr [ESI]
00b0a3c4 : PUSH 0x3
00b0a3c6 : PUSH EAX
00b0a3c7 : MOV EAX,dword ptr [EDX + 0x44]
00b0a3ca : MOV ECX,ESI
00b0a3cc : CALL EAX
00b0a3ce : MOV byte ptr [EBP + -0x4],BL
00b0a3d1 : LEA ECX,[EBP + -0x4c]
00b0a3d4 : CALL 0x00406560
00b0a3d9 : MOV dword ptr [EBP + -0x4],0xffffffff
00b0a3e0 : LEA ECX,[EBP + -0x30]
00b0a3e3 : CALL 0x00406560
00b0a3e8 : MOV ECX,dword ptr [0x017248dc]
00b0a3ee : PUSH 0xca
00b0a3f3 : CALL 0x008a1050
00b0a3f8 : MOV ECX,dword ptr [EBP + -0xc]
00b0a3fb : MOV dword ptr FS:[0x0],ECX
00b0a402 : POP ECX
00b0a403 : POP EDI
00b0a404 : POP ESI
00b0a405 : POP EBX
00b0a406 : MOV ESP,EBP
00b0a408 : POP EBP
00b0a409 : RET 0x4
00b0a40c : CMP ECX,EBX
00b0a40e : JLE 0x00b0a460
00b0a410 : MOV ECX,dword ptr [EAX + 0xa4]
00b0a416 : CMP ECX,dword ptr [EAX + 0xb0]
00b0a41c : JNZ 0x00b0a4b4
00b0a422 : PUSH 0xca484c
00b0a427 : LEA ECX,[EBP + -0x30]
00b0a42a : CALL 0x00406460
00b0a42f : MOV EBX,0x2
00b0a434 : MOV dword ptr [EBP + -0x4],EBX
00b0a437 : MOV ECX,dword ptr [0x00da9894]
00b0a43d : MOV EAX,dword ptr [ECX]
00b0a43f : MOV ECX,dword ptr [0x0172491c]
00b0a445 : MOV ESI,dword ptr [EAX + 0x1a8]
00b0a44b : LEA EDX,[EBP + -0x30]
00b0a44e : PUSH EDX
00b0a44f : LEA EDI,[EBP + -0x4c]
00b0a452 : CALL 0x0081d120
00b0a457 : MOV byte ptr [EBP + -0x4],0x3
00b0a45b : JMP 0x00b0a3c2
00b0a460 : CMP dword ptr [ESI + 0x188],EBX
00b0a466 : JLE 0x00b0a4b4
00b0a468 : MOV ECX,dword ptr [EAX + 0xa8]
00b0a46e : CMP ECX,dword ptr [EAX + 0xb4]
00b0a474 : JNZ 0x00b0a4b4
00b0a476 : PUSH 0xca4874
00b0a47b : LEA ECX,[EBP + -0x30]
00b0a47e : CALL 0x00406460
00b0a483 : MOV EBX,0x4
00b0a488 : MOV dword ptr [EBP + -0x4],EBX
00b0a48b : MOV ECX,dword ptr [0x00da9894]
00b0a491 : MOV EAX,dword ptr [ECX]
00b0a493 : MOV ECX,dword ptr [0x0172491c]
00b0a499 : MOV ESI,dword ptr [EAX + 0x1a8]
00b0a49f : LEA EDX,[EBP + -0x30]
00b0a4a2 : PUSH EDX
00b0a4a3 : LEA EDI,[EBP + -0x4c]
00b0a4a6 : CALL 0x0081d120
00b0a4ab : MOV byte ptr [EBP + -0x4],0x5
00b0a4af : JMP 0x00b0a3c2
00b0a4b4 : MOV ECX,dword ptr [EBP + 0x8]
00b0a4b7 : PUSH ECX
00b0a4b8 : MOV ECX,EDI
00b0a4ba : CALL 0x00a09420
00b0a4bf : MOV ECX,dword ptr [EBP + -0xc]
00b0a4c2 : MOV dword ptr FS:[0x0],ECX
00b0a4c9 : POP ECX
00b0a4ca : POP EDI
00b0a4cb : POP ESI
00b0a4cc : POP EBX
00b0a4cd : MOV ESP,EBP
00b0a4cf : POP EBP
00b0a4d0 : RET 0x4
