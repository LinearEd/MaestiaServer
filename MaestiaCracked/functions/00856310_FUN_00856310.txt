PROGRAM  : Maestia.exe
FUNCTION : FUN_00856310
ENTRY    : 00856310
BODY     : [[00856310, 0085650b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00856310(float *param_1)

{
  float *pfVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *puVar4;
  DWORD DVar5;
  int unaff_ESI;
  float fVar6;
  float fVar7;
  
  if ((*(int *)(unaff_ESI + 0x18a8) != 0) && (*(int *)(*(int *)(unaff_ESI + 0x18a8) + 0x30) != 0)) {
    if ((*param_1 == DAT_00d720f0) && ((param_1[1] == DAT_00d720f4 && (param_1[2] == DAT_00d720f8)))
       ) {
      *(float *)(unaff_ESI + 0x1a88) = *param_1;
      *(float *)(unaff_ESI + 0x1a8c) = param_1[1];
      *(float *)(unaff_ESI + 0x1a90) = param_1[2];
      *(float *)(unaff_ESI + 0x1a7c) = *param_1;
      *(float *)(unaff_ESI + 0x1a80) = param_1[1];
      *(float *)(unaff_ESI + 0x1a84) = param_1[2];
      *(float *)(unaff_ESI + 0x1a94) = *param_1;
      *(float *)(unaff_ESI + 0x1a98) = param_1[1];
      *(float *)(unaff_ESI + 0x1a9c) = param_1[2];
      *(undefined1 *)(unaff_ESI + 0x1a78) = 0;
      iVar3 = *(int *)(*(int *)(unaff_ESI + 0x18a8) + 0x30);
      *(undefined8 *)(iVar3 + 0xe0) = DAT_00d72118;
      *(undefined8 *)(iVar3 + 0xe8) = DAT_00d72120;
      iVar3 = *(int *)(*(int *)(unaff_ESI + 0x18a8) + 0x30);
      *(undefined1 *)(iVar3 + 0x5d) = 1;
      *(undefined1 *)(iVar3 + 0x134) = 1;
      *(undefined1 *)(iVar3 + 0x5c) = 1;
      if (*(int **)(iVar3 + 0x2c) != (int *)0x0) {
        (**(code **)(**(int **)(iVar3 + 0x2c) + 0x60))(iVar3);
        return;
      }
    }
    else {
      if (*(char *)(unaff_ESI + 0x1a78) == '\0') {
        *(undefined4 *)(unaff_ESI + 0x1a88) = *(undefined4 *)(unaff_ESI + 0x1a94);
        *(undefined4 *)(unaff_ESI + 0x1a8c) = *(undefined4 *)(unaff_ESI + 0x1a98);
        uVar2 = *(undefined4 *)(unaff_ESI + 0x1a9c);
      }
      else {
        pfVar1 = (float *)(unaff_ESI + 0x1a88);
        fVar6 = (*(float *)(unaff_ESI + 0x1a80) + *(float *)(unaff_ESI + 0x1a98)) * DAT_00d72c24;
        fVar7 = (*(float *)(unaff_ESI + 0x1a84) + *(float *)(unaff_ESI + 0x1a9c)) * DAT_00d72c24;
        *pfVar1 = (*(float *)(unaff_ESI + 0x1a7c) + *(float *)(unaff_ESI + 0x1a94)) * DAT_00d72c24;
        *(float *)(unaff_ESI + 0x1a8c) = fVar6;
        *(float *)(unaff_ESI + 0x1a90) = fVar7;
        D3DXVec3Normalize(pfVar1,pfVar1);
        puVar4 = (undefined4 *)FUN_00855280(pfVar1);
        *(undefined4 *)(unaff_ESI + 0x1a88) = *puVar4;
        *(undefined4 *)(unaff_ESI + 0x1a8c) = puVar4[1];
        uVar2 = puVar4[2];
      }
      *(undefined4 *)(unaff_ESI + 0x1a90) = uVar2;
      *(float *)(unaff_ESI + 0x1a7c) = *param_1;
      *(float *)(unaff_ESI + 0x1a80) = param_1[1];
      *(float *)(unaff_ESI + 0x1a84) = param_1[2];
      DVar5 = timeGetTime();
      *(DWORD *)(unaff_ESI + 0x1aa0) = DVar5;
      *(undefined1 *)(unaff_ESI + 0x1a78) = 1;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00856310 : PUSH EBP
00856311 : MOV EBP,ESP
00856313 : MOV EAX,dword ptr [ESI + 0x18a8]
00856319 : SUB ESP,0xc
0085631c : PUSH EBX
0085631d : MOV EBX,dword ptr [EBP + 0x8]
00856320 : PUSH EDI
00856321 : TEST EAX,EAX
00856323 : JZ 0x00856504
00856329 : CMP dword ptr [EAX + 0x30],0x0
0085632d : JZ 0x00856504
00856333 : MOVSS XMM0,dword ptr [EBX]
00856337 : UCOMISS XMM0,dword ptr [0x00d720f0]
0085633e : LAHF
0085633f : TEST AH,0x44
00856342 : JP 0x00856426
00856348 : MOVSS XMM1,dword ptr [EBX + 0x4]
0085634d : UCOMISS XMM1,dword ptr [0x00d720f4]
00856354 : LAHF
00856355 : TEST AH,0x44
00856358 : JP 0x00856426
0085635e : MOVSS XMM1,dword ptr [EBX + 0x8]
00856363 : UCOMISS XMM1,dword ptr [0x00d720f8]
0085636a : LAHF
0085636b : TEST AH,0x44
0085636e : JP 0x00856426
00856374 : MOVSS dword ptr [ESI + 0x1a88],XMM0
0085637c : FLD float ptr [EBX + 0x4]
0085637f : FSTP float ptr [ESI + 0x1a8c]
00856385 : FLD float ptr [EBX + 0x8]
00856388 : FSTP float ptr [ESI + 0x1a90]
0085638e : FLD float ptr [EBX]
00856390 : FSTP float ptr [ESI + 0x1a7c]
00856396 : FLD float ptr [EBX + 0x4]
00856399 : FSTP float ptr [ESI + 0x1a80]
0085639f : FLD float ptr [EBX + 0x8]
008563a2 : FSTP float ptr [ESI + 0x1a84]
008563a8 : FLD float ptr [EBX]
008563aa : FSTP float ptr [ESI + 0x1a94]
008563b0 : FLD float ptr [EBX + 0x4]
008563b3 : FSTP float ptr [ESI + 0x1a98]
008563b9 : FLD float ptr [EBX + 0x8]
008563bc : FSTP float ptr [ESI + 0x1a9c]
008563c2 : MOV EAX,dword ptr [ESI + 0x18a8]
008563c8 : MOV byte ptr [ESI + 0x1a78],0x0
008563cf : MOV EAX,dword ptr [EAX + 0x30]
008563d2 : MOVQ XMM0,qword ptr [0x00d72118]
008563da : MOVQ qword ptr [EAX + 0xe0],XMM0
008563e2 : MOVQ XMM0,qword ptr [0x00d72120]
008563ea : ADD EAX,0xe0
008563ef : MOVQ qword ptr [EAX + 0x8],XMM0
008563f4 : MOV ECX,dword ptr [ESI + 0x18a8]
008563fa : MOV EAX,dword ptr [ECX + 0x30]
008563fd : MOV CL,0x1
008563ff : MOV byte ptr [EAX + 0x5d],CL
00856402 : MOV byte ptr [EAX + 0x134],CL
00856408 : MOV byte ptr [EAX + 0x5c],CL
0085640b : MOV ECX,dword ptr [EAX + 0x2c]
0085640e : TEST ECX,ECX
00856410 : JZ 0x00856504
00856416 : MOV EDX,dword ptr [ECX]
00856418 : PUSH EAX
00856419 : MOV EAX,dword ptr [EDX + 0x60]
0085641c : CALL EAX
0085641e : POP EDI
0085641f : POP EBX
00856420 : MOV ESP,EBP
00856422 : POP EBP
00856423 : RET 0x4
00856426 : CMP byte ptr [ESI + 0x1a78],0x0
0085642d : JZ 0x008564b3
00856433 : MOVSS XMM0,dword ptr [ESI + 0x1a7c]
0085643b : MOVSS XMM1,dword ptr [ESI + 0x1a80]
00856443 : MOVSS XMM2,dword ptr [ESI + 0x1a84]
0085644b : ADDSS XMM0,dword ptr [ESI + 0x1a94]
00856453 : ADDSS XMM1,dword ptr [ESI + 0x1a98]
0085645b : ADDSS XMM2,dword ptr [ESI + 0x1a9c]
00856463 : MOVSS XMM3,dword ptr [0x00d72c24]
0085646b : LEA EDI,[ESI + 0x1a88]
00856471 : PUSH EDI
00856472 : MULSS XMM0,XMM3
00856476 : MULSS XMM1,XMM3
0085647a : MULSS XMM2,XMM3
0085647e : PUSH EDI
0085647f : MOVSS dword ptr [EDI],XMM0
00856483 : MOVSS dword ptr [EDI + 0x4],XMM1
00856488 : MOVSS dword ptr [EDI + 0x8],XMM2
0085648d : CALL 0x004ff722
00856492 : PUSH EDI
00856493 : LEA EDI,[EBP + -0xc]
00856496 : MOV EAX,ESI
00856498 : CALL 0x00855280
0085649d : FLD float ptr [EAX]
0085649f : FSTP float ptr [ESI + 0x1a88]
008564a5 : FLD float ptr [EAX + 0x4]
008564a8 : FSTP float ptr [ESI + 0x1a8c]
008564ae : FLD float ptr [EAX + 0x8]
008564b1 : JMP 0x008564d1
008564b3 : FLD float ptr [ESI + 0x1a94]
008564b9 : FSTP float ptr [ESI + 0x1a88]
008564bf : FLD float ptr [ESI + 0x1a98]
008564c5 : FSTP float ptr [ESI + 0x1a8c]
008564cb : FLD float ptr [ESI + 0x1a9c]
008564d1 : FSTP float ptr [ESI + 0x1a90]
008564d7 : FLD float ptr [EBX]
008564d9 : FSTP float ptr [ESI + 0x1a7c]
008564df : FLD float ptr [EBX + 0x4]
008564e2 : FSTP float ptr [ESI + 0x1a80]
008564e8 : FLD float ptr [EBX + 0x8]
008564eb : FSTP float ptr [ESI + 0x1a84]
008564f1 : CALL dword ptr [0x00b85598]
008564f7 : MOV dword ptr [ESI + 0x1aa0],EAX
008564fd : MOV byte ptr [ESI + 0x1a78],0x1
00856504 : POP EDI
00856505 : POP EBX
00856506 : MOV ESP,EBP
00856508 : POP EBP
00856509 : RET 0x4
