PROGRAM  : Maestia.exe
FUNCTION : FUN_005f47a0
ENTRY    : 005f47a0
BODY     : [[005f47a0, 005f4921]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005f47a0(uint param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  int in_ECX;
  uint uVar6;
  uint uVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  
  puVar8 = *(undefined4 **)(in_ECX + 0x34);
  uVar6 = *(uint *)(in_ECX + 0x38);
  uVar7 = 0;
  puVar1 = (undefined4 *)(in_ECX + 0x30);
  do {
    if (puVar8 == puVar1) break;
    if ((*(ushort *)(puVar8 + 8) & 0x8000) == 0) {
      if (param_1 <= *(ushort *)(puVar8 + 9)) {
        FUN_005f3670(puVar8);
        uVar5 = FUN_005f4550(param_1,param_2,puVar8);
        return uVar5;
      }
      iVar4 = FUN_005f3880(puVar8);
      if (iVar4 != 0) {
        if (param_1 <= *(ushort *)(*(int *)(iVar4 + 8) + 0x1c)) {
          uVar5 = FUN_005f4550(param_1,param_2,iVar4);
          return uVar5;
        }
        break;
      }
    }
    puVar8 = (undefined4 *)puVar8[1];
    uVar7 = uVar7 + 1;
  } while (uVar7 <= uVar6 >> 1);
  puVar8 = *(undefined4 **)(in_ECX + 0x34);
  do {
    if (puVar8 == puVar1) {
      return 0;
    }
    if ((*(ushort *)(puVar8 + 8) & 0x8000) == 0) {
      iVar4 = puVar8[7];
      uVar6 = 0;
      puVar9 = puVar8;
      if (puVar8 != (undefined4 *)(iVar4 + 8)) {
        while ((*(ushort *)(puVar9 + 8) & 0x8000) == 0) {
          puVar2 = puVar9;
          puVar3 = puVar9;
          if (puVar9 != puVar8) {
            for (; puVar2 != puVar1; puVar2 = (undefined4 *)*puVar2) {
              if (puVar3 == puVar1) goto LAB_005f48bf;
              puVar3 = (undefined4 *)puVar3[1];
            }
          }
          if (param_1 <= *(ushort *)(puVar9 + 9)) {
            FUN_005f3670(puVar9);
            uVar5 = FUN_005f4550(param_1,param_2,puVar9);
            return uVar5;
          }
          uVar6 = uVar6 + *(ushort *)(puVar9 + 9);
          if (((*(ushort *)(iVar4 + 6) != 0) && (puVar9 == *(undefined4 **)(iVar4 + 0x14))) &&
             (uVar7 = *(ushort *)(iVar4 + 6) + uVar6, param_1 <= uVar7)) {
            *(undefined2 *)(iVar4 + 6) = 0;
            uVar6 = uVar7;
          }
          if (param_1 <= uVar6) {
            FUN_005f37c0(puVar8,puVar9,uVar6);
            uVar5 = FUN_005f4550(param_1,param_2,puVar8);
            return uVar5;
          }
          puVar2 = puVar9 + 4;
          puVar9 = (undefined4 *)*puVar2;
          if ((undefined4 *)*puVar2 == (undefined4 *)(iVar4 + 8)) break;
        }
      }
    }
LAB_005f48bf:
    puVar8 = (undefined4 *)puVar8[1];
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005f47a0 : PUSH ECX
005f47a1 : PUSH EBX
005f47a2 : PUSH EBP
005f47a3 : PUSH ESI
005f47a4 : MOV ESI,dword ptr [ECX + 0x34]
005f47a7 : PUSH EDI
005f47a8 : MOV EDI,dword ptr [ECX + 0x38]
005f47ab : SHR EDI,0x1
005f47ad : MOV dword ptr [ESP + 0x10],ECX
005f47b1 : XOR EBX,EBX
005f47b3 : LEA EBP,[ECX + 0x30]
005f47b6 : CMP ESI,EBP
005f47b8 : JZ 0x005f4833
005f47ba : MOV EAX,0x8000
005f47bf : TEST word ptr [ESI + 0x20],AX
005f47c3 : JNZ 0x005f47dd
005f47c5 : MOVZX EDX,word ptr [ESI + 0x24]
005f47c9 : PUSH ESI
005f47ca : CMP EDX,dword ptr [ESP + 0x1c]
005f47ce : JNC 0x005f47e7
005f47d0 : CALL 0x005f3880
005f47d5 : TEST EAX,EAX
005f47d7 : JNZ 0x005f4808
005f47d9 : MOV ECX,dword ptr [ESP + 0x10]
005f47dd : MOV ESI,dword ptr [ESI + 0x4]
005f47e0 : INC EBX
005f47e1 : CMP EBX,EDI
005f47e3 : JBE 0x005f47b6
005f47e5 : JMP 0x005f4833
005f47e7 : CALL 0x005f3670
005f47ec : MOV EAX,dword ptr [ESP + 0x1c]
005f47f0 : MOV ECX,dword ptr [ESP + 0x18]
005f47f4 : PUSH ESI
005f47f5 : PUSH EAX
005f47f6 : PUSH ECX
005f47f7 : MOV ECX,dword ptr [ESP + 0x1c]
005f47fb : CALL 0x005f4550
005f4800 : POP EDI
005f4801 : POP ESI
005f4802 : POP EBP
005f4803 : POP EBX
005f4804 : POP ECX
005f4805 : RET 0x8
005f4808 : MOV EDX,dword ptr [EAX + 0x8]
005f480b : MOVZX EDX,word ptr [EDX + 0x1c]
005f480f : MOV ECX,dword ptr [ESP + 0x18]
005f4813 : CMP EDX,ECX
005f4815 : JC 0x005f482f
005f4817 : PUSH EAX
005f4818 : MOV EAX,dword ptr [ESP + 0x20]
005f481c : PUSH EAX
005f481d : PUSH ECX
005f481e : MOV ECX,dword ptr [ESP + 0x1c]
005f4822 : CALL 0x005f4550
005f4827 : POP EDI
005f4828 : POP ESI
005f4829 : POP EBP
005f482a : POP EBX
005f482b : POP ECX
005f482c : RET 0x8
005f482f : MOV ECX,dword ptr [ESP + 0x10]
005f4833 : MOV EBX,dword ptr [ECX + 0x34]
005f4836 : CMP EBX,EBP
005f4838 : JZ 0x005f48ca
005f483e : MOV EDI,EDI
005f4840 : MOV ECX,0x8000
005f4845 : TEST word ptr [EBX + 0x20],CX
005f4849 : JNZ 0x005f48bf
005f484b : MOV EDI,dword ptr [EBX + 0x1c]
005f484e : LEA EAX,[EDI + 0x8]
005f4851 : XOR EDX,EDX
005f4853 : MOV ESI,EBX
005f4855 : CMP EBX,EAX
005f4857 : JZ 0x005f48bf
005f4859 : LEA ESP,[ESP]
005f4860 : MOV EAX,0x8000
005f4865 : TEST word ptr [ESI + 0x20],AX
005f4869 : JNZ 0x005f48bf
005f486b : CMP ESI,EBX
005f486d : JZ 0x005f4884
005f486f : MOV EAX,ESI
005f4871 : MOV ECX,ESI
005f4873 : CMP ESI,EBP
005f4875 : JZ 0x005f4884
005f4877 : CMP ECX,EBP
005f4879 : JZ 0x005f48bf
005f487b : MOV EAX,dword ptr [EAX]
005f487d : MOV ECX,dword ptr [ECX + 0x4]
005f4880 : CMP EAX,EBP
005f4882 : JNZ 0x005f4877
005f4884 : MOVZX EAX,word ptr [ESI + 0x24]
005f4888 : MOV ECX,dword ptr [ESP + 0x18]
005f488c : CMP EAX,ECX
005f488e : JNC 0x005f48d4
005f4890 : ADD EDX,EAX
005f4892 : MOVZX EAX,word ptr [EDI + 0x6]
005f4896 : TEST AX,AX
005f4899 : JZ 0x005f48b1
005f489b : CMP ESI,dword ptr [EDI + 0x14]
005f489e : JNZ 0x005f48b1
005f48a0 : MOVZX EAX,AX
005f48a3 : ADD EAX,EDX
005f48a5 : CMP EAX,ECX
005f48a7 : JC 0x005f48b1
005f48a9 : MOV EDX,EAX
005f48ab : XOR EAX,EAX
005f48ad : MOV word ptr [EDI + 0x6],AX
005f48b1 : CMP EDX,ECX
005f48b3 : JNC 0x005f48fa
005f48b5 : MOV ESI,dword ptr [ESI + 0x10]
005f48b8 : LEA EAX,[EDI + 0x8]
005f48bb : CMP ESI,EAX
005f48bd : JNZ 0x005f4860
005f48bf : MOV EBX,dword ptr [EBX + 0x4]
005f48c2 : CMP EBX,EBP
005f48c4 : JNZ 0x005f4840
005f48ca : POP EDI
005f48cb : POP ESI
005f48cc : POP EBP
005f48cd : XOR EAX,EAX
005f48cf : POP EBX
005f48d0 : POP ECX
005f48d1 : RET 0x8
005f48d4 : MOV EDI,dword ptr [ESP + 0x10]
005f48d8 : PUSH ESI
005f48d9 : MOV ECX,EDI
005f48db : CALL 0x005f3670
005f48e0 : MOV ECX,dword ptr [ESP + 0x1c]
005f48e4 : MOV EDX,dword ptr [ESP + 0x18]
005f48e8 : PUSH ESI
005f48e9 : PUSH ECX
005f48ea : PUSH EDX
005f48eb : MOV ECX,EDI
005f48ed : CALL 0x005f4550
005f48f2 : POP EDI
005f48f3 : POP ESI
005f48f4 : POP EBP
005f48f5 : POP EBX
005f48f6 : POP ECX
005f48f7 : RET 0x8
005f48fa : PUSH EDX
005f48fb : PUSH ESI
005f48fc : MOV ESI,dword ptr [ESP + 0x18]
005f4900 : PUSH EBX
005f4901 : MOV ECX,ESI
005f4903 : CALL 0x005f37c0
005f4908 : MOV EAX,dword ptr [ESP + 0x1c]
005f490c : MOV ECX,dword ptr [ESP + 0x18]
005f4910 : PUSH EBX
005f4911 : PUSH EAX
005f4912 : PUSH ECX
005f4913 : MOV ECX,ESI
005f4915 : CALL 0x005f4550
005f491a : POP EDI
005f491b : POP ESI
005f491c : POP EBP
005f491d : POP EBX
005f491e : POP ECX
005f491f : RET 0x8
