PROGRAM  : Maestia.exe
FUNCTION : FUN_004bed20
ENTRY    : 004bed20
BODY     : [[004bed20, 004beed6] [004beee8, 004bf06b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004bed20(uint param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  uint *puVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 *in_ECX;
  int extraout_ECX;
  int iVar6;
  uint in_EDX;
  uint uStack_4c;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  uint local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar1 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a300;
  local_10 = ExceptionList;
  uStack_4c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_4c;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 4) == 0) {
    param_1 = 0;
  }
  else {
    param_1 = (*(int *)(param_1 + 0xc) - *(int *)(param_1 + 4)) / 0x1c;
  }
  if (in_EDX != 0) {
    iVar6 = *(int *)(iVar1 + 8);
    local_18 = iVar6 - *(int *)(iVar1 + 4);
    iVar4 = (int)local_18 / 0x1c;
    local_20 = iVar6;
    puVar3 = &uStack_4c;
    if (0x9249249U - iVar4 < in_EDX) {
      iVar4 = FUN_00452880();
      iVar6 = extraout_ECX;
      puVar3 = (uint *)local_14;
    }
    local_14 = (undefined1 *)puVar3;
    local_18 = iVar4 + in_EDX;
    if (param_1 < local_18) {
      if (0x9249249 - (param_1 >> 1) < param_1) {
        param_1 = 0;
      }
      else {
        param_1 = param_1 + (param_1 >> 1);
      }
      if (param_1 < local_18) {
        param_1 = local_18;
      }
      local_18 = FUN_0043c030();
      local_20 = (param_2 - *(int *)(iVar1 + 4)) / 0x1c;
      local_8 = 0;
      FUN_004becf0(in_ECX);
      uVar2 = local_18;
      local_1c = 1;
      FUN_004bf070(*(undefined4 *)(iVar1 + 4),param_2);
      local_1c = 2;
      FUN_004bf070(param_2,*(undefined4 *)(iVar1 + 8));
      local_8 = 0xffffffff;
      if (*(int *)(iVar1 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      *(uint *)(iVar1 + 0xc) = uVar2 + param_1 * 0x1c;
      *(uint *)(iVar1 + 8) =
           uVar2 + (in_EDX + (*(int *)(iVar1 + 8) - *(int *)(iVar1 + 4)) / 0x1c) * 0x1c;
      *(uint *)(iVar1 + 4) = uVar2;
      ExceptionList = local_10;
      return;
    }
    local_3c = *in_ECX;
    if ((uint)((iVar6 - param_2) / 0x1c) < in_EDX) {
      local_38 = in_ECX[1];
      local_34 = in_ECX[2];
      local_30 = in_ECX[3];
      local_2c = in_ECX[4];
      local_28 = in_ECX[5];
      local_24 = in_ECX[6];
      FUN_004bf070(param_2,iVar6);
      local_8 = 2;
      FUN_004becf0(&local_3c);
      local_8 = 0xffffffff;
      *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + in_EDX * 0x1c;
      FUN_004bf210(param_2);
      ExceptionList = local_10;
      return;
    }
    local_38 = in_ECX[1];
    local_34 = in_ECX[2];
    local_30 = in_ECX[3];
    local_2c = in_ECX[4];
    local_28 = in_ECX[5];
    local_24 = in_ECX[6];
    uVar5 = FUN_004bf070(iVar6 + in_EDX * -0x1c,iVar6);
    *(undefined4 *)(iVar1 + 8) = uVar5;
    param_1 = iVar6 - param_2 & 0xffffff00;
    FUN_004bf260(param_2,param_2,param_2,param_1);
    FUN_004bf210(param_2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
004bed20 : PUSH EBP
004bed21 : MOV EBP,ESP
004bed23 : PUSH -0x1
004bed25 : PUSH 0xb7a300
004bed2a : MOV EAX,FS:[0x0]
004bed30 : PUSH EAX
004bed31 : SUB ESP,0x2c
004bed34 : PUSH EBX
004bed35 : PUSH ESI
004bed36 : PUSH EDI
004bed37 : MOV EAX,[0x00d66fa0]
004bed3c : XOR EAX,EBP
004bed3e : PUSH EAX
004bed3f : LEA EAX,[EBP + -0xc]
004bed42 : MOV FS:[0x0],EAX
004bed48 : MOV dword ptr [EBP + -0x10],ESP
004bed4b : MOV EDI,ECX
004bed4d : MOV ESI,EDX
004bed4f : MOV EBX,dword ptr [EBP + 0x8]
004bed52 : MOV EAX,dword ptr [EBX + 0x4]
004bed55 : TEST EAX,EAX
004bed57 : JNZ 0x004bed5e
004bed59 : MOV dword ptr [EBP + 0x8],EAX
004bed5c : JMP 0x004bed79
004bed5e : MOV ECX,dword ptr [EBX + 0xc]
004bed61 : SUB ECX,EAX
004bed63 : MOV EAX,0x92492493
004bed68 : IMUL ECX
004bed6a : ADD EDX,ECX
004bed6c : SAR EDX,0x4
004bed6f : MOV EAX,EDX
004bed71 : SHR EAX,0x1f
004bed74 : ADD EAX,EDX
004bed76 : MOV dword ptr [EBP + 0x8],EAX
004bed79 : TEST ESI,ESI
004bed7b : JZ 0x004bf058
004bed81 : MOV ECX,dword ptr [EBX + 0x8]
004bed84 : MOV dword ptr [EBP + -0x1c],ECX
004bed87 : MOV EDX,ECX
004bed89 : SUB EDX,dword ptr [EBX + 0x4]
004bed8c : MOV dword ptr [EBP + -0x14],EDX
004bed8f : MOV EAX,0x92492493
004bed94 : IMUL EDX
004bed96 : ADD EDX,dword ptr [EBP + -0x14]
004bed99 : SAR EDX,0x4
004bed9c : MOV EAX,EDX
004bed9e : SHR EAX,0x1f
004beda1 : ADD EAX,EDX
004beda3 : MOV EDX,0x9249249
004beda8 : SUB EDX,EAX
004bedaa : CMP EDX,ESI
004bedac : JNC 0x004bedb3
004bedae : CALL 0x00452880
004bedb3 : ADD EAX,ESI
004bedb5 : MOV dword ptr [EBP + -0x14],EAX
004bedb8 : MOV EDX,dword ptr [EBP + 0x8]
004bedbb : CMP EDX,EAX
004bedbd : JNC 0x004beee8
004bedc3 : MOV EAX,EDX
004bedc5 : SHR EAX,0x1
004bedc7 : MOV ECX,0x9249249
004bedcc : SUB ECX,EAX
004bedce : CMP ECX,EDX
004bedd0 : JNC 0x004bedde
004bedd2 : MOV dword ptr [EBP + 0x8],0x0
004bedd9 : MOV EDX,dword ptr [EBP + 0x8]
004beddc : JMP 0x004bede3
004bedde : ADD EDX,EAX
004bede0 : MOV dword ptr [EBP + 0x8],EDX
004bede3 : MOV EAX,dword ptr [EBP + -0x14]
004bede6 : CMP EDX,EAX
004bede8 : JNC 0x004bedef
004bedea : MOV dword ptr [EBP + 0x8],EAX
004beded : MOV EDX,EAX
004bedef : MOV ECX,EDX
004bedf1 : CALL 0x0043c030
004bedf6 : MOV dword ptr [EBP + -0x14],EAX
004bedf9 : MOV ECX,dword ptr [EBP + 0xc]
004bedfc : SUB ECX,dword ptr [EBX + 0x4]
004bedff : MOV EAX,0x92492493
004bee04 : IMUL ECX
004bee06 : ADD EDX,ECX
004bee08 : SAR EDX,0x4
004bee0b : MOV EAX,EDX
004bee0d : SHR EAX,0x1f
004bee10 : ADD EAX,EDX
004bee12 : MOV dword ptr [EBP + -0x1c],EAX
004bee15 : MOV dword ptr [EBP + -0x4],0x0
004bee1c : PUSH EDI
004bee1d : LEA EDX,[EAX*0x8 + 0x0]
004bee24 : SUB EDX,EAX
004bee26 : MOV EAX,dword ptr [EBP + -0x14]
004bee29 : LEA EDI,[EAX + EDX*0x4]
004bee2c : CALL 0x004becf0
004bee31 : MOV dword ptr [EBP + -0x18],0x1
004bee38 : MOV ECX,dword ptr [EBP + 0xc]
004bee3b : PUSH ECX
004bee3c : MOV EDX,dword ptr [EBX + 0x4]
004bee3f : PUSH EDX
004bee40 : MOV EDI,dword ptr [EBP + -0x14]
004bee43 : MOV EDX,EDI
004bee45 : CALL 0x004bf070
004bee4a : MOV dword ptr [EBP + -0x18],0x2
004bee51 : MOV EAX,dword ptr [EBP + -0x1c]
004bee54 : ADD EAX,ESI
004bee56 : LEA ECX,[EAX*0x8 + 0x0]
004bee5d : SUB ECX,EAX
004bee5f : LEA EDX,[EDI + ECX*0x4]
004bee62 : MOV EAX,dword ptr [EBX + 0x8]
004bee65 : PUSH EAX
004bee66 : MOV ECX,dword ptr [EBP + 0xc]
004bee69 : PUSH ECX
004bee6a : CALL 0x004bf070
004bee6f : MOV dword ptr [EBP + -0x4],0xffffffff
004bee76 : MOV EAX,dword ptr [EBX + 0x4]
004bee79 : MOV ECX,dword ptr [EBX + 0x8]
004bee7c : SUB ECX,EAX
004bee7e : MOV EAX,0x92492493
004bee83 : IMUL ECX
004bee85 : ADD EDX,ECX
004bee87 : SAR EDX,0x4
004bee8a : MOV EAX,EDX
004bee8c : SHR EAX,0x1f
004bee8f : ADD EAX,EDX
004bee91 : ADD ESI,EAX
004bee93 : MOV ECX,dword ptr [EBX + 0x4]
004bee96 : TEST ECX,ECX
004bee98 : JZ 0x004bee9f
004bee9a : CALL 0x006f04e0
004bee9f : MOV EAX,dword ptr [EBP + 0x8]
004beea2 : LEA ECX,[EAX*0x8 + 0x0]
004beea9 : SUB ECX,EAX
004beeab : LEA EDX,[EDI + ECX*0x4]
004beeae : MOV dword ptr [EBX + 0xc],EDX
004beeb1 : LEA EAX,[ESI*0x8 + 0x0]
004beeb8 : SUB EAX,ESI
004beeba : LEA ECX,[EDI + EAX*0x4]
004beebd : MOV dword ptr [EBX + 0x8],ECX
004beec0 : MOV dword ptr [EBX + 0x4],EDI
004beec3 : MOV ECX,dword ptr [EBP + -0xc]
004beec6 : MOV dword ptr FS:[0x0],ECX
004beecd : POP ECX
004beece : POP EDI
004beecf : POP ESI
004beed0 : POP EBX
004beed1 : MOV ESP,EBP
004beed3 : POP EBP
004beed4 : RET 0x8
004beee8 : MOV EDX,ECX
004beeea : SUB EDX,dword ptr [EBP + 0xc]
004beeed : MOV dword ptr [EBP + 0x8],EDX
004beef0 : MOV EAX,0x92492493
004beef5 : IMUL EDX
004beef7 : ADD EDX,dword ptr [EBP + 0x8]
004beefa : SAR EDX,0x4
004beefd : MOV EAX,EDX
004beeff : SHR EAX,0x1f
004bef02 : ADD EAX,EDX
004bef04 : MOVSS XMM0,dword ptr [EDI]
004bef08 : PUSH ECX
004bef09 : MOVSS dword ptr [EBP + -0x38],XMM0
004bef0e : CMP EAX,ESI
004bef10 : JNC 0x004befd0
004bef16 : MOVSS XMM1,dword ptr [EDI + 0x4]
004bef1b : MOVSS XMM2,dword ptr [EDI + 0x8]
004bef20 : MOVSS dword ptr [EBP + -0x34],XMM1
004bef25 : MOVSS dword ptr [EBP + -0x30],XMM2
004bef2a : MOVSS XMM0,dword ptr [EDI + 0xc]
004bef2f : MOVSS XMM1,dword ptr [EDI + 0x10]
004bef34 : MOVSS dword ptr [EBP + -0x2c],XMM0
004bef39 : MOVSS dword ptr [EBP + -0x28],XMM1
004bef3e : MOVSS XMM0,dword ptr [EDI + 0x14]
004bef43 : MOVSS XMM1,dword ptr [EDI + 0x18]
004bef48 : MOVSS dword ptr [EBP + -0x24],XMM0
004bef4d : MOVSS dword ptr [EBP + -0x20],XMM1
004bef52 : LEA EAX,[ESI*0x8 + 0x0]
004bef59 : SUB EAX,ESI
004bef5b : ADD EAX,EAX
004bef5d : ADD EAX,EAX
004bef5f : MOV dword ptr [EBP + 0x8],EAX
004bef62 : MOV EDI,dword ptr [EBP + 0xc]
004bef65 : LEA EDX,[EAX + EDI*0x1]
004bef68 : PUSH EDI
004bef69 : CALL 0x004bf070
004bef6e : MOV dword ptr [EBP + -0x4],0x2
004bef75 : MOV EDI,dword ptr [EBX + 0x8]
004bef78 : LEA ECX,[EBP + -0x38]
004bef7b : PUSH ECX
004bef7c : MOV ECX,EDI
004bef7e : SUB ECX,dword ptr [EBP + 0xc]
004bef81 : MOV EAX,0x92492493
004bef86 : IMUL ECX
004bef88 : ADD EDX,ECX
004bef8a : SAR EDX,0x4
004bef8d : MOV EAX,EDX
004bef8f : SHR EAX,0x1f
004bef92 : ADD EAX,EDX
004bef94 : SUB ESI,EAX
004bef96 : CALL 0x004becf0
004bef9b : MOV dword ptr [EBP + -0x4],0xffffffff
004befa2 : MOV EAX,dword ptr [EBP + 0x8]
004befa5 : ADD dword ptr [EBX + 0x8],EAX
004befa8 : MOV EDX,dword ptr [EBX + 0x8]
004befab : SUB EDX,EAX
004befad : MOV ECX,dword ptr [EBP + 0xc]
004befb0 : PUSH ECX
004befb1 : LEA ECX,[EBP + -0x38]
004befb4 : CALL 0x004bf210
004befb9 : ADD ESP,0x4
004befbc : MOV ECX,dword ptr [EBP + -0xc]
004befbf : MOV dword ptr FS:[0x0],ECX
004befc6 : POP ECX
004befc7 : POP EDI
004befc8 : POP ESI
004befc9 : POP EBX
004befca : MOV ESP,EBP
004befcc : POP EBP
004befcd : RET 0x8
004befd0 : MOVSS XMM0,dword ptr [EDI + 0x4]
004befd5 : MOVSS dword ptr [EBP + -0x34],XMM0
004befda : MOVSS XMM0,dword ptr [EDI + 0x8]
004befdf : MOVSS dword ptr [EBP + -0x30],XMM0
004befe4 : MOVSS XMM0,dword ptr [EDI + 0xc]
004befe9 : MOVSS dword ptr [EBP + -0x2c],XMM0
004befee : MOVSS XMM0,dword ptr [EDI + 0x10]
004beff3 : MOVSS dword ptr [EBP + -0x28],XMM0
004beff8 : MOVSS XMM0,dword ptr [EDI + 0x14]
004beffd : MOVSS dword ptr [EBP + -0x24],XMM0
004bf002 : MOVSS XMM0,dword ptr [EDI + 0x18]
004bf007 : MOVSS dword ptr [EBP + -0x20],XMM0
004bf00c : LEA EDI,[ESI*0x8 + 0x0]
004bf013 : SUB EDI,ESI
004bf015 : ADD EDI,EDI
004bf017 : ADD EDI,EDI
004bf019 : MOV ESI,ECX
004bf01b : SUB ESI,EDI
004bf01d : PUSH ESI
004bf01e : MOV EDX,ECX
004bf020 : CALL 0x004bf070
004bf025 : MOV dword ptr [EBX + 0x8],EAX
004bf028 : MOV byte ptr [EBP + 0x8],0x0
004bf02c : MOV EDX,dword ptr [EBP + 0x8]
004bf02f : PUSH EDX
004bf030 : MOV EAX,dword ptr [EBP + 0xc]
004bf033 : PUSH EAX
004bf034 : MOV ECX,dword ptr [EBP + 0xc]
004bf037 : PUSH ECX
004bf038 : MOV EDX,dword ptr [EBP + 0xc]
004bf03b : PUSH EDX
004bf03c : MOV EAX,dword ptr [EBP + -0x1c]
004bf03f : MOV ECX,ESI
004bf041 : CALL 0x004bf260
004bf046 : MOV EAX,dword ptr [EBP + 0xc]
004bf049 : LEA EDX,[EDI + EAX*0x1]
004bf04c : PUSH EAX
004bf04d : LEA ECX,[EBP + -0x38]
004bf050 : CALL 0x004bf210
004bf055 : ADD ESP,0x14
004bf058 : MOV ECX,dword ptr [EBP + -0xc]
004bf05b : MOV dword ptr FS:[0x0],ECX
004bf062 : POP ECX
004bf063 : POP EDI
004bf064 : POP ESI
004bf065 : POP EBX
004bf066 : MOV ESP,EBP
004bf068 : POP EBP
004bf069 : RET 0x8
