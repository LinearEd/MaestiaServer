PROGRAM  : Maestia.exe
FUNCTION : FUN_0070d410
ENTRY    : 0070d410
BODY     : [[0070d410, 0070d4b0]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0070d410(undefined4 param_1)

{
  short sVar1;
  uint uVar2;
  short *psVar3;
  int in_ECX;
  short *psVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b178ac;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar2 = *(uint *)(in_ECX + 0x20);
  if (*(uint *)(in_ECX + 0x24) < uVar2) {
    psVar4 = (short *)(*(int *)(in_ECX + 0x1c) + *(uint *)(in_ECX + 0x24));
    psVar3 = psVar4;
    do {
      sVar1 = *psVar3;
      psVar3 = psVar3 + 1;
    } while (sVar1 != 0);
    *(int *)(in_ECX + 0x24) =
         *(int *)(in_ECX + 0x24) + ((int)psVar3 - (int)(psVar4 + 1) >> 1) * 2 + 2;
    if (uVar2 <= *(uint *)(in_ECX + 0x24)) {
      *(uint *)(in_ECX + 0x24) = uVar2 - 1;
    }
    FUN_00406460(psVar4);
  }
  else {
    FUN_00406460(&DAT_00bfd898);
  }
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
0070d410 : PUSH EBP
0070d411 : MOV EBP,ESP
0070d413 : PUSH -0x1
0070d415 : PUSH 0xb178ac
0070d41a : MOV EAX,FS:[0x0]
0070d420 : PUSH EAX
0070d421 : PUSH ECX
0070d422 : PUSH EBX
0070d423 : PUSH ESI
0070d424 : PUSH EDI
0070d425 : MOV EAX,[0x00d66fa0]
0070d42a : XOR EAX,EBP
0070d42c : PUSH EAX
0070d42d : LEA EAX,[EBP + -0xc]
0070d430 : MOV FS:[0x0],EAX
0070d436 : XOR EBX,EBX
0070d438 : MOV dword ptr [EBP + -0x10],EBX
0070d43b : MOV EAX,dword ptr [ECX + 0x24]
0070d43e : MOV EDI,dword ptr [ECX + 0x20]
0070d441 : CMP EAX,EDI
0070d443 : JC 0x0070d459
0070d445 : MOV ESI,dword ptr [EBP + 0x8]
0070d448 : PUSH 0xbfd898
0070d44d : MOV ECX,ESI
0070d44f : CALL 0x00406460
0070d454 : MOV dword ptr [EBP + -0x4],EBX
0070d457 : JMP 0x0070d494
0070d459 : MOV ESI,dword ptr [ECX + 0x1c]
0070d45c : ADD ESI,EAX
0070d45e : MOV EAX,ESI
0070d460 : LEA EBX,[EAX + 0x2]
0070d463 : MOV DX,word ptr [EAX]
0070d466 : ADD EAX,0x2
0070d469 : TEST DX,DX
0070d46c : JNZ 0x0070d463
0070d46e : SUB EAX,EBX
0070d470 : SAR EAX,0x1
0070d472 : LEA EAX,[EAX + EAX*0x1 + 0x2]
0070d476 : ADD dword ptr [ECX + 0x24],EAX
0070d479 : CMP dword ptr [ECX + 0x24],EDI
0070d47c : JC 0x0070d482
0070d47e : DEC EDI
0070d47f : MOV dword ptr [ECX + 0x24],EDI
0070d482 : PUSH ESI
0070d483 : MOV ESI,dword ptr [EBP + 0x8]
0070d486 : MOV ECX,ESI
0070d488 : CALL 0x00406460
0070d48d : MOV dword ptr [EBP + -0x4],0x0
0070d494 : MOV dword ptr [EBP + -0x10],0x1
0070d49b : MOV EAX,ESI
0070d49d : MOV ECX,dword ptr [EBP + -0xc]
0070d4a0 : MOV dword ptr FS:[0x0],ECX
0070d4a7 : POP ECX
0070d4a8 : POP EDI
0070d4a9 : POP ESI
0070d4aa : POP EBX
0070d4ab : MOV ESP,EBP
0070d4ad : POP EBP
0070d4ae : RET 0x4
