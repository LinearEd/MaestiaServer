PROGRAM  : Maestia.exe
FUNCTION : FUN_007059a0
ENTRY    : 007059a0
BODY     : [[007059a0, 00705a6e]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007059a0(void)

{
  int iVar1;
  int in_EAX;
  undefined1 *puVar2;
  int in_ECX;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  if ((*(byte *)(in_ECX + 0x20) & 1) == 0) {
    *(undefined1 *)(in_ECX + 0x20) = 0;
    if (*(int *)(in_ECX + 0x18) != *(int *)(in_ECX + 0x14)) {
      uVar3 = *(int *)(in_ECX + 0x18) - *(int *)(in_ECX + 0x14);
      uVar4 = 0;
      uVar5 = uVar3;
      do {
        *(char *)(uVar4 + in_EAX) = (char)uVar5;
        uVar4 = uVar4 + 1;
        uVar5 = uVar5 >> 8;
      } while (uVar4 < 2);
      *(undefined1 *)(in_EAX + 2) = *(undefined1 *)(in_ECX + 0x20);
      iVar1 = *(int *)(in_ECX + 0x14);
      uVar5 = 0;
      if (uVar3 != 0) {
        puVar2 = (undefined1 *)(in_EAX + 3);
        do {
          *puVar2 = *(undefined1 *)(uVar5 + iVar1);
          uVar5 = uVar5 + 1;
          puVar2 = puVar2 + 1;
        } while (uVar5 < uVar3);
      }
      return uVar3 + 3;
    }
    uVar5 = 0;
    do {
      *(undefined1 *)(uVar5 + in_EAX) = 0;
      uVar5 = uVar5 + 1;
    } while (uVar5 < 2);
    *(undefined1 *)(in_EAX + 2) = *(undefined1 *)(in_ECX + 0x20);
    return 3;
  }
  *(undefined1 *)(in_ECX + 0x20) = 1;
  uVar5 = *(int *)(in_ECX + 8) - *(int *)(in_ECX + 4) >> 1;
  if (uVar5 != 0) {
    uVar3 = 0;
    uVar4 = uVar5;
    do {
      *(char *)(uVar3 + in_EAX) = (char)uVar4;
      uVar3 = uVar3 + 1;
      uVar4 = uVar4 >> 8;
    } while (uVar3 < 2);
    *(undefined1 *)(in_EAX + 2) = *(undefined1 *)(in_ECX + 0x20);
    FUN_004d0c10();
    return uVar5 * 2 + 3;
  }
  uVar5 = 0;
  do {
    *(undefined1 *)(uVar5 + in_EAX) = 0;
    uVar5 = uVar5 + 1;
  } while (uVar5 < 2);
  *(undefined1 *)(in_EAX + 2) = *(undefined1 *)(in_ECX + 0x20);
  return 3;
}



============================================================
DISASSEMBLY
============================================================
007059a0 : PUSH ESI
007059a1 : MOV ESI,ECX
007059a3 : TEST byte ptr [ESI + 0x20],0x1
007059a7 : PUSH EDI
007059a8 : JZ 0x00705a0a
007059aa : MOV EDI,dword ptr [ESI + 0x8]
007059ad : SUB EDI,dword ptr [ESI + 0x4]
007059b0 : MOV byte ptr [ESI + 0x20],0x1
007059b4 : SAR EDI,0x1
007059b6 : JZ 0x007059ea
007059b8 : MOV EDX,EDI
007059ba : XOR ECX,ECX
007059bc : LEA ESP,[ESP]
007059c0 : MOV byte ptr [ECX + EAX*0x1],DL
007059c3 : INC ECX
007059c4 : SHR EDX,0x8
007059c7 : CMP ECX,0x2
007059ca : JC 0x007059c0
007059cc : MOV CL,byte ptr [ESI + 0x20]
007059cf : MOV byte ptr [EAX + 0x2],CL
007059d2 : MOV EDX,dword ptr [ESI + 0x4]
007059d5 : PUSH EAX
007059d6 : MOV EAX,0x3
007059db : CALL 0x004d0c10
007059e0 : ADD ESP,0x4
007059e3 : LEA EAX,[EDI + EDI*0x1 + 0x3]
007059e7 : POP EDI
007059e8 : POP ESI
007059e9 : RET
007059ea : XOR EDX,EDX
007059ec : XOR ECX,ECX
007059ee : MOV EDI,EDI
007059f0 : MOV byte ptr [ECX + EAX*0x1],DL
007059f3 : INC ECX
007059f4 : SHR EDX,0x8
007059f7 : CMP ECX,0x2
007059fa : JC 0x007059f0
007059fc : MOV CL,byte ptr [ESI + 0x20]
007059ff : POP EDI
00705a00 : MOV byte ptr [EAX + 0x2],CL
00705a03 : MOV EAX,0x3
00705a08 : POP ESI
00705a09 : RET
00705a0a : MOV byte ptr [ESI + 0x20],0x0
00705a0e : MOV ECX,dword ptr [ESI + 0x18]
00705a11 : SUB ECX,dword ptr [ESI + 0x14]
00705a14 : JZ 0x00705a51
00705a16 : MOV EDI,dword ptr [ESI + 0x18]
00705a19 : SUB EDI,dword ptr [ESI + 0x14]
00705a1c : XOR ECX,ECX
00705a1e : MOV EDX,EDI
00705a20 : MOV byte ptr [ECX + EAX*0x1],DL
00705a23 : INC ECX
00705a24 : SHR EDX,0x8
00705a27 : CMP ECX,0x2
00705a2a : JC 0x00705a20
00705a2c : MOV CL,byte ptr [ESI + 0x20]
00705a2f : MOV byte ptr [EAX + 0x2],CL
00705a32 : MOV ESI,dword ptr [ESI + 0x14]
00705a35 : XOR ECX,ECX
00705a37 : TEST EDI,EDI
00705a39 : JBE 0x00705a4b
00705a3b : ADD EAX,0x3
00705a3e : MOV EDI,EDI
00705a40 : MOV DL,byte ptr [ECX + ESI*0x1]
00705a43 : MOV byte ptr [EAX],DL
00705a45 : INC ECX
00705a46 : INC EAX
00705a47 : CMP ECX,EDI
00705a49 : JC 0x00705a40
00705a4b : LEA EAX,[EDI + 0x3]
00705a4e : POP EDI
00705a4f : POP ESI
00705a50 : RET
00705a51 : XOR EDX,EDX
00705a53 : XOR ECX,ECX
00705a55 : MOV byte ptr [ECX + EAX*0x1],DL
00705a58 : INC ECX
00705a59 : SHR EDX,0x8
00705a5c : CMP ECX,0x2
00705a5f : JC 0x00705a55
00705a61 : MOV CL,byte ptr [ESI + 0x20]
00705a64 : POP EDI
00705a65 : MOV byte ptr [EAX + 0x2],CL
00705a68 : MOV EAX,0x3
00705a6d : POP ESI
00705a6e : RET
