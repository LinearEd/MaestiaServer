PROGRAM  : Maestia.exe
FUNCTION : FUN_0069bca0
ENTRY    : 0069bca0
BODY     : [[0069bca0, 0069be75]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0069bca0(int param_1,int param_2,int param_3)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int in_EAX;
  uint *puVar4;
  int iVar5;
  uint uVar6;
  int *piVar7;
  uint uVar8;
  uint uVar9;
  int unaff_EDI;
  
  iVar1 = *(int *)(in_EAX + 0xc);
  uVar2 = *(uint *)(in_EAX + 4);
  if (param_2 != 0) {
    puVar4 = (uint *)(param_1 + 0x10);
    do {
      uVar9 = *puVar4;
      uVar3 = puVar4[5];
      if ((uVar9 & 0x10) == 0) {
        iVar5 = (int)(char)puVar4[1];
        if (((((iVar5 == param_3) || (iVar5 == -param_3)) ||
             (iVar5 = (int)*(char *)((int)puVar4 + 5), iVar5 == param_3)) || (iVar5 == -param_3)) &&
           (iVar5 != 0)) {
          if (iVar5 == param_3) {
            uVar8 = 0;
            if (uVar2 != 0) {
              do {
                piVar7 = *(int **)(iVar1 + uVar8 * 4);
                iVar5 = uVar3 - *piVar7;
                if ((iVar5 < unaff_EDI) && (-iVar5 < unaff_EDI)) {
                  *puVar4 = uVar9 | 0x210;
                  puVar4[4] = (uint)piVar7;
                  break;
                }
                uVar8 = uVar8 + 1;
              } while (uVar8 < uVar2);
            }
          }
          else if ((iVar5 == -param_3) && (uVar8 = 0, uVar2 != 0)) {
            do {
              piVar7 = *(int **)(iVar1 + uVar8 * 4);
              iVar5 = (uVar3 - piVar7[1]) - *piVar7;
              if ((iVar5 < unaff_EDI) && (-iVar5 < unaff_EDI)) {
                *puVar4 = uVar9 | 0x410;
                puVar4[4] = (uint)piVar7;
                break;
              }
              uVar8 = uVar8 + 1;
            } while (uVar8 < uVar2);
          }
        }
        else if ((uVar9 & 0x40) != 0) {
          if (param_3 == 2) {
            uVar8 = 0x80;
            uVar6 = 0x100;
          }
          else {
            uVar8 = 0x100;
            uVar6 = 0x80;
          }
          if ((uVar8 & uVar9) == 0) {
            if (((uVar6 & uVar9) != 0) && (uVar8 = 0, uVar2 != 0)) {
              do {
                piVar7 = *(int **)(iVar1 + uVar8 * 4);
                iVar5 = (uVar3 - piVar7[1]) - *piVar7;
                if ((iVar5 < unaff_EDI) && (-iVar5 < unaff_EDI)) {
                  uVar9 = uVar9 | 0x410;
                  goto LAB_0069be14;
                }
                uVar8 = uVar8 + 1;
              } while (uVar8 < uVar2);
            }
          }
          else {
            uVar8 = 0;
            if (uVar2 != 0) {
LAB_0069bdc1:
              piVar7 = *(int **)(iVar1 + uVar8 * 4);
              if ((unaff_EDI <= (int)(uVar3 - *piVar7)) || (unaff_EDI <= (int)-(uVar3 - *piVar7)))
              goto LAB_0069bdd3;
              uVar9 = uVar9 | 0x210;
LAB_0069be14:
              *puVar4 = uVar9;
              puVar4[4] = (uint)piVar7;
            }
          }
LAB_0069be1d:
          if ((puVar4[4] == 0) && (uVar9 = 0, uVar2 != 0)) {
            do {
              piVar7 = *(int **)(iVar1 + uVar9 * 4);
              if ((*piVar7 <= (int)uVar3) && ((int)uVar3 <= piVar7[1] + *piVar7)) {
                puVar4[4] = (uint)piVar7;
                break;
              }
              uVar9 = uVar9 + 1;
            } while (uVar9 < uVar2);
          }
        }
      }
      param_2 = param_2 + -1;
      puVar4 = puVar4 + 0xc;
    } while (param_2 != 0);
  }
  return;
LAB_0069bdd3:
  uVar8 = uVar8 + 1;
  if (uVar2 <= uVar8) goto LAB_0069be1d;
  goto LAB_0069bdc1;
}



============================================================
DISASSEMBLY
============================================================
0069bca0 : SUB ESP,0x8
0069bca3 : CMP dword ptr [ESP + 0x10],0x0
0069bca8 : PUSH EBP
0069bca9 : MOV EBP,dword ptr [EAX + 0xc]
0069bcac : MOV EAX,dword ptr [EAX + 0x4]
0069bcaf : MOV dword ptr [ESP + 0x4],EAX
0069bcb3 : JBE 0x0069be71
0069bcb9 : MOV EAX,dword ptr [ESP + 0x10]
0069bcbd : ADD EAX,0x10
0069bcc0 : PUSH EBX
0069bcc1 : MOV dword ptr [ESP + 0xc],EAX
0069bcc5 : PUSH ESI
0069bcc6 : MOV EBX,dword ptr [EAX]
0069bcc8 : MOV ESI,dword ptr [EAX + 0x14]
0069bccb : TEST BL,0x10
0069bcce : JNZ 0x0069be53
0069bcd4 : MOVSX EAX,byte ptr [EAX + 0x4]
0069bcd8 : MOV EDX,dword ptr [ESP + 0x20]
0069bcdc : CMP EAX,EDX
0069bcde : JZ 0x0069bcfc
0069bce0 : MOV ECX,EDX
0069bce2 : NEG ECX
0069bce4 : CMP EAX,ECX
0069bce6 : JZ 0x0069bcfc
0069bce8 : MOV EAX,dword ptr [ESP + 0x10]
0069bcec : MOVSX EAX,byte ptr [EAX + 0x5]
0069bcf0 : CMP EAX,EDX
0069bcf2 : JZ 0x0069bcfc
0069bcf4 : CMP EAX,ECX
0069bcf6 : JNZ 0x0069bd95
0069bcfc : TEST EAX,EAX
0069bcfe : JZ 0x0069bd95
0069bd04 : CMP EAX,EDX
0069bd06 : JNZ 0x0069bd46
0069bd08 : XOR EDX,EDX
0069bd0a : CMP dword ptr [ESP + 0xc],EDX
0069bd0e : JBE 0x0069be53
0069bd14 : MOV ECX,dword ptr [EBP + EDX*0x4]
0069bd18 : MOV EAX,ESI
0069bd1a : SUB EAX,dword ptr [ECX]
0069bd1c : CMP EAX,EDI
0069bd1e : JGE 0x0069bd26
0069bd20 : NEG EAX
0069bd22 : CMP EAX,EDI
0069bd24 : JL 0x0069bd32
0069bd26 : INC EDX
0069bd27 : CMP EDX,dword ptr [ESP + 0xc]
0069bd2b : JC 0x0069bd14
0069bd2d : JMP 0x0069be53
0069bd32 : MOV EAX,dword ptr [ESP + 0x10]
0069bd36 : OR EBX,0x210
0069bd3c : MOV dword ptr [EAX],EBX
0069bd3e : MOV dword ptr [EAX + 0x10],ECX
0069bd41 : JMP 0x0069be53
0069bd46 : NEG EDX
0069bd48 : CMP EAX,EDX
0069bd4a : JNZ 0x0069be53
0069bd50 : XOR EDX,EDX
0069bd52 : CMP dword ptr [ESP + 0xc],EDX
0069bd56 : JBE 0x0069be53
0069bd5c : LEA ESP,[ESP]
0069bd60 : MOV ECX,dword ptr [EBP + EDX*0x4]
0069bd64 : MOV EAX,ESI
0069bd66 : SUB EAX,dword ptr [ECX + 0x4]
0069bd69 : SUB EAX,dword ptr [ECX]
0069bd6b : CMP EAX,EDI
0069bd6d : JGE 0x0069bd75
0069bd6f : NEG EAX
0069bd71 : CMP EAX,EDI
0069bd73 : JL 0x0069bd81
0069bd75 : INC EDX
0069bd76 : CMP EDX,dword ptr [ESP + 0xc]
0069bd7a : JC 0x0069bd60
0069bd7c : JMP 0x0069be53
0069bd81 : MOV EAX,dword ptr [ESP + 0x10]
0069bd85 : OR EBX,0x410
0069bd8b : MOV dword ptr [EAX],EBX
0069bd8d : MOV dword ptr [EAX + 0x10],ECX
0069bd90 : JMP 0x0069be53
0069bd95 : TEST BL,0x40
0069bd98 : JZ 0x0069be53
0069bd9e : CMP EDX,0x2
0069bda1 : JNZ 0x0069bdad
0069bda3 : LEA EAX,[EDX + 0x7e]
0069bda6 : MOV ECX,0x100
0069bdab : JMP 0x0069bdb5
0069bdad : MOV EAX,0x100
0069bdb2 : LEA ECX,[EAX + -0x80]
0069bdb5 : TEST EAX,EBX
0069bdb7 : JZ 0x0069bde4
0069bdb9 : XOR EDX,EDX
0069bdbb : CMP dword ptr [ESP + 0xc],EDX
0069bdbf : JBE 0x0069be1d
0069bdc1 : MOV ECX,dword ptr [EBP + EDX*0x4]
0069bdc5 : MOV EAX,ESI
0069bdc7 : SUB EAX,dword ptr [ECX]
0069bdc9 : CMP EAX,EDI
0069bdcb : JGE 0x0069bdd3
0069bdcd : NEG EAX
0069bdcf : CMP EAX,EDI
0069bdd1 : JL 0x0069bddc
0069bdd3 : INC EDX
0069bdd4 : CMP EDX,dword ptr [ESP + 0xc]
0069bdd8 : JC 0x0069bdc1
0069bdda : JMP 0x0069be1d
0069bddc : OR EBX,0x210
0069bde2 : JMP 0x0069be14
0069bde4 : TEST ECX,EBX
0069bde6 : JZ 0x0069be1d
0069bde8 : XOR EDX,EDX
0069bdea : CMP dword ptr [ESP + 0xc],EDX
0069bdee : JBE 0x0069be1d
0069bdf0 : MOV ECX,dword ptr [EBP + EDX*0x4]
0069bdf4 : MOV EAX,ESI
0069bdf6 : SUB EAX,dword ptr [ECX + 0x4]
0069bdf9 : SUB EAX,dword ptr [ECX]
0069bdfb : CMP EAX,EDI
0069bdfd : JGE 0x0069be05
0069bdff : NEG EAX
0069be01 : CMP EAX,EDI
0069be03 : JL 0x0069be0e
0069be05 : INC EDX
0069be06 : CMP EDX,dword ptr [ESP + 0xc]
0069be0a : JC 0x0069bdf0
0069be0c : JMP 0x0069be1d
0069be0e : OR EBX,0x410
0069be14 : MOV EAX,dword ptr [ESP + 0x10]
0069be18 : MOV dword ptr [EAX],EBX
0069be1a : MOV dword ptr [EAX + 0x10],ECX
0069be1d : MOV ECX,dword ptr [ESP + 0x10]
0069be21 : CMP dword ptr [ECX + 0x10],0x0
0069be25 : JNZ 0x0069be53
0069be27 : XOR EDX,EDX
0069be29 : CMP dword ptr [ESP + 0xc],EDX
0069be2d : JBE 0x0069be53
0069be2f : NOP
0069be30 : MOV EAX,dword ptr [EBP + EDX*0x4]
0069be34 : MOV ECX,dword ptr [EAX]
0069be36 : CMP ESI,ECX
0069be38 : JL 0x0069be43
0069be3a : MOV EBX,dword ptr [EAX + 0x4]
0069be3d : ADD EBX,ECX
0069be3f : CMP ESI,EBX
0069be41 : JLE 0x0069be4c
0069be43 : INC EDX
0069be44 : CMP EDX,dword ptr [ESP + 0xc]
0069be48 : JC 0x0069be30
0069be4a : JMP 0x0069be53
0069be4c : MOV EDX,dword ptr [ESP + 0x10]
0069be50 : MOV dword ptr [EDX + 0x10],EAX
0069be53 : MOV ECX,dword ptr [ESP + 0x1c]
0069be57 : MOV EAX,dword ptr [ESP + 0x10]
0069be5b : DEC ECX
0069be5c : ADD EAX,0x30
0069be5f : MOV dword ptr [ESP + 0x1c],ECX
0069be63 : MOV dword ptr [ESP + 0x10],EAX
0069be67 : TEST ECX,ECX
0069be69 : JA 0x0069bcc6
0069be6f : POP ESI
0069be70 : POP EBX
0069be71 : POP EBP
0069be72 : ADD ESP,0x8
0069be75 : RET
