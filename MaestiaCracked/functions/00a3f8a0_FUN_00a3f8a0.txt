PROGRAM  : Maestia.exe
FUNCTION : FUN_00a3f8a0
ENTRY    : 00a3f8a0
BODY     : [[00a3f8a0, 00a3f9e4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a3f8a0(void)

{
  int iVar1;
  uint uVar2;
  int in_ECX;
  undefined1 local_34 [24];
  uint local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b681f6;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (DAT_00d6f0f4 == -1) {
    if (DAT_017247f0 == 0) {
      FUN_00406460(L"g_pItemMgr NULL");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaGameZone::UpdateItemTooltips",0x450a,local_34);
      }
      local_8 = 0xffffffff;
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      ExceptionList = local_10;
      return;
    }
    FUN_009f3180(0,*(undefined4 *)(*(int *)(in_ECX + 0xac) + 0xa8),1);
    FUN_009f3180(1,*(undefined4 *)(*(int *)(in_ECX + 0xac) + 0xa8),1);
  }
  else {
    iVar1 = *DAT_00da9894;
    local_14 = DAT_00d6f0f4;
    FUN_004437f0(&local_14);
    if ((local_18 != *(int *)(iVar1 + 0x48)) && (*(int *)(local_18 + 0x10) != 0)) {
      FUN_009668e0(*(int *)(local_18 + 0x10));
      if (DAT_017247f0 != 0) {
        FUN_009f3700(uVar2);
        ExceptionList = local_10;
        return;
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a3f8a0 : PUSH EBP
00a3f8a1 : MOV EBP,ESP
00a3f8a3 : PUSH -0x1
00a3f8a5 : PUSH 0xb681f6
00a3f8aa : MOV EAX,FS:[0x0]
00a3f8b0 : PUSH EAX
00a3f8b1 : SUB ESP,0x24
00a3f8b4 : PUSH ESI
00a3f8b5 : MOV EAX,[0x00d66fa0]
00a3f8ba : XOR EAX,EBP
00a3f8bc : PUSH EAX
00a3f8bd : LEA EAX,[EBP + -0xc]
00a3f8c0 : MOV FS:[0x0],EAX
00a3f8c6 : MOV ESI,ECX
00a3f8c8 : MOV EAX,[0x00d6f0f4]
00a3f8cd : CMP EAX,-0x1
00a3f8d0 : JZ 0x00a3f92c
00a3f8d2 : MOV ECX,dword ptr [0x00da9894]
00a3f8d8 : MOV ESI,dword ptr [ECX]
00a3f8da : LEA EDX,[EBP + -0x10]
00a3f8dd : MOV dword ptr [EBP + -0x10],EAX
00a3f8e0 : PUSH EDX
00a3f8e1 : LEA ECX,[ESI + 0x44]
00a3f8e4 : LEA EAX,[EBP + -0x14]
00a3f8e7 : CALL 0x004437f0
00a3f8ec : MOV EAX,dword ptr [EBP + -0x14]
00a3f8ef : CMP EAX,dword ptr [ESI + 0x48]
00a3f8f2 : JZ 0x00a3f9d5
00a3f8f8 : MOV EAX,dword ptr [EAX + 0x10]
00a3f8fb : TEST EAX,EAX
00a3f8fd : JZ 0x00a3f9d5
00a3f903 : PUSH EAX
00a3f904 : CALL 0x009668e0
00a3f909 : MOV ECX,dword ptr [0x017247f0]
00a3f90f : TEST ECX,ECX
00a3f911 : JZ 0x00a3f9d5
00a3f917 : CALL 0x009f3700
00a3f91c : MOV ECX,dword ptr [EBP + -0xc]
00a3f91f : MOV dword ptr FS:[0x0],ECX
00a3f926 : POP ECX
00a3f927 : POP ESI
00a3f928 : MOV ESP,EBP
00a3f92a : POP EBP
00a3f92b : RET
00a3f92c : MOV ECX,dword ptr [0x017247f0]
00a3f932 : TEST ECX,ECX
00a3f934 : JNZ 0x00a3f9a3
00a3f936 : PUSH 0xcc4380
00a3f93b : LEA ECX,[EBP + -0x30]
00a3f93e : CALL 0x00406460
00a3f943 : MOV dword ptr [EBP + -0x4],0x0
00a3f94a : MOV EAX,[0x00da98e8]
00a3f94f : MOV ECX,dword ptr [EAX]
00a3f951 : TEST ECX,ECX
00a3f953 : JZ 0x00a3f96a
00a3f955 : MOV EDX,dword ptr [ECX]
00a3f957 : MOV EDX,dword ptr [EDX + 0x14]
00a3f95a : LEA EAX,[EBP + -0x30]
00a3f95d : PUSH EAX
00a3f95e : PUSH 0x450a
00a3f963 : PUSH 0xcc43a0
00a3f968 : CALL EDX
00a3f96a : MOV dword ptr [EBP + -0x4],0xffffffff
00a3f971 : CMP dword ptr [EBP + -0x18],0x8
00a3f975 : JC 0x00a3f97f
00a3f977 : MOV ECX,dword ptr [EBP + -0x2c]
00a3f97a : CALL 0x006f04e0
00a3f97f : XOR EAX,EAX
00a3f981 : MOV dword ptr [EBP + -0x18],0x7
00a3f988 : MOV dword ptr [EBP + -0x1c],0x0
00a3f98f : MOV word ptr [EBP + -0x2c],AX
00a3f993 : MOV ECX,dword ptr [EBP + -0xc]
00a3f996 : MOV dword ptr FS:[0x0],ECX
00a3f99d : POP ECX
00a3f99e : POP ESI
00a3f99f : MOV ESP,EBP
00a3f9a1 : POP EBP
00a3f9a2 : RET
00a3f9a3 : MOV EDX,dword ptr [ESI + 0xac]
00a3f9a9 : MOV EAX,dword ptr [EDX + 0xa8]
00a3f9af : PUSH 0x1
00a3f9b1 : PUSH EAX
00a3f9b2 : PUSH 0x0
00a3f9b4 : CALL 0x009f3180
00a3f9b9 : MOV ECX,dword ptr [ESI + 0xac]
00a3f9bf : MOV EDX,dword ptr [ECX + 0xa8]
00a3f9c5 : MOV ECX,dword ptr [0x017247f0]
00a3f9cb : PUSH 0x1
00a3f9cd : PUSH EDX
00a3f9ce : PUSH 0x1
00a3f9d0 : CALL 0x009f3180
00a3f9d5 : MOV ECX,dword ptr [EBP + -0xc]
00a3f9d8 : MOV dword ptr FS:[0x0],ECX
00a3f9df : POP ECX
00a3f9e0 : POP ESI
00a3f9e1 : MOV ESP,EBP
00a3f9e3 : POP EBP
00a3f9e4 : RET
