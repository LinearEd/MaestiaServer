PROGRAM  : Maestia.exe
FUNCTION : FUN_006996e0
ENTRY    : 006996e0
BODY     : [[006996e0, 00699807]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006996e0(void)

{
  uint uVar1;
  int in_EAX;
  int iVar2;
  
  FUN_00697ec0(*(uint *)(in_EAX + 0x94) & 0x100);
  uVar1 = *(uint *)(in_EAX + 0x94);
  *(undefined4 *)(in_EAX + 0x1c) = *(undefined4 *)(in_EAX + 0x10);
  if ((uVar1 & 8) == 0) {
    if ((uVar1 & 0x10) == 0) {
      *(undefined1 *)(in_EAX + 0xb8) = 0;
    }
    else {
      *(undefined1 *)(in_EAX + 0xb8) = 4;
    }
    if ((uVar1 & 0x20) == 0) {
      *(char *)(in_EAX + 0xb8) = *(char *)(in_EAX + 0xb8) + '\x01';
    }
  }
  else {
    *(undefined1 *)(in_EAX + 0xb8) = 2;
  }
  *(byte *)(in_EAX + 0xb9) = ~(byte)(uVar1 >> 9) & 1;
  *(undefined2 *)(in_EAX + 0x3c4) = 0;
  *(short *)(in_EAX + 0x3c6) = *(short *)(in_EAX + 0x6c) + -1;
  *(undefined1 **)(in_EAX + 0xa8) = &LAB_00698e10;
  *(code **)(in_EAX + 0xac) = FUN_00698e60;
  *(undefined **)(in_EAX + 0xb0) = &DAT_00698f50;
  *(undefined1 **)(in_EAX + 0xb4) = &LAB_006990a0;
  *(undefined4 *)(in_EAX + 0x404) = 0;
  *(undefined2 *)(in_EAX + 0x3c) = *(undefined2 *)(in_EAX + 0x70);
  *(undefined4 *)(in_EAX + 0x40) = *(undefined4 *)(in_EAX + 0x78);
  iVar2 = FUN_006995c0(0);
  if (iVar2 == 0) {
    if ((*(char *)(in_EAX + 0xb9) != '\0') && (*(char *)(in_EAX + 0xb8) != '\x02')) {
      *(undefined4 *)(in_EAX + 0x404) = 0;
      *(undefined2 *)(in_EAX + 0x3c4) = 0;
      *(code **)(in_EAX + 0xa8) = GThread::OnExit;
      *(undefined1 **)(in_EAX + 0xac) = &LAB_006990c0;
      *(undefined **)(in_EAX + 0xb0) = &DAT_00699130;
      *(code **)(in_EAX + 0xb4) = GThread::OnExit;
      *(short *)(in_EAX + 0x3c6) = *(short *)(in_EAX + 0x70) + -1;
      iVar2 = FUN_006995c0(1);
      if (iVar2 != 0) {
        return iVar2;
      }
    }
    iVar2 = 0;
  }
  return iVar2;
}



============================================================
DISASSEMBLY
============================================================
006996e0 : PUSH EDI
006996e1 : MOV EDI,EAX
006996e3 : MOV EAX,dword ptr [EDI + 0x94]
006996e9 : AND EAX,0x100
006996ee : PUSH EAX
006996ef : CALL 0x00697ec0
006996f4 : MOV EAX,dword ptr [EDI + 0x94]
006996fa : MOV ECX,dword ptr [EDI + 0x10]
006996fd : ADD ESP,0x4
00699700 : MOV dword ptr [EDI + 0x1c],ECX
00699703 : TEST AL,0x8
00699705 : JZ 0x00699710
00699707 : MOV byte ptr [EDI + 0xb8],0x2
0069970e : JMP 0x0069972e
00699710 : TEST AL,0x10
00699712 : JZ 0x0069971d
00699714 : MOV byte ptr [EDI + 0xb8],0x4
0069971b : JMP 0x00699724
0069971d : MOV byte ptr [EDI + 0xb8],0x0
00699724 : TEST AL,0x20
00699726 : JNZ 0x0069972e
00699728 : INC byte ptr [EDI + 0xb8]
0069972e : MOV CX,word ptr [EDI + 0x70]
00699732 : SHR EAX,0x9
00699735 : NOT AL
00699737 : AND AL,0x1
00699739 : MOV byte ptr [EDI + 0xb9],AL
0069973f : MOV AX,word ptr [EDI + 0x6c]
00699743 : XOR EDX,EDX
00699745 : DEC AX
00699747 : MOV word ptr [EDI + 0x3c4],DX
0069974e : MOV EDX,dword ptr [EDI + 0x78]
00699751 : MOV word ptr [EDI + 0x3c6],AX
00699758 : PUSH 0x0
0069975a : MOV EAX,EDI
0069975c : MOV dword ptr [EDI + 0xa8],0x698e10
00699766 : MOV dword ptr [EDI + 0xac],0x698e60
00699770 : MOV dword ptr [EDI + 0xb0],0x698f50
0069977a : MOV dword ptr [EDI + 0xb4],0x6990a0
00699784 : MOV dword ptr [EDI + 0x404],0x0
0069978e : MOV word ptr [EDI + 0x3c],CX
00699792 : MOV dword ptr [EDI + 0x40],EDX
00699795 : CALL 0x006995c0
0069979a : ADD ESP,0x4
0069979d : TEST EAX,EAX
0069979f : JNZ 0x00699806
006997a1 : CMP byte ptr [EDI + 0xb9],AL
006997a7 : JZ 0x00699804
006997a9 : CMP byte ptr [EDI + 0xb8],0x2
006997b0 : JZ 0x00699804
006997b2 : MOV CX,word ptr [EDI + 0x70]
006997b6 : MOV dword ptr [EDI + 0x404],EAX
006997bc : MOV word ptr [EDI + 0x3c4],AX
006997c3 : DEC CX
006997c5 : PUSH 0x1
006997c7 : MOV EAX,EDI
006997c9 : MOV dword ptr [EDI + 0xa8],0x51d420
006997d3 : MOV dword ptr [EDI + 0xac],0x6990c0
006997dd : MOV dword ptr [EDI + 0xb0],0x699130
006997e7 : MOV dword ptr [EDI + 0xb4],0x51d420
006997f1 : MOV word ptr [EDI + 0x3c6],CX
006997f8 : CALL 0x006995c0
006997fd : ADD ESP,0x4
00699800 : TEST EAX,EAX
00699802 : JNZ 0x00699806
00699804 : XOR EAX,EAX
00699806 : POP EDI
00699807 : RET
