PROGRAM  : Maestia.exe
FUNCTION : FUN_006e0590
ENTRY    : 006e0590
BODY     : [[006e0590, 006e077b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006e0590(int *param_1)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  undefined4 *puVar4;
  int iVar5;
  int iVar6;
  undefined4 uVar7;
  int *piVar8;
  undefined4 *puVar9;
  int iStack_10;
  undefined1 uStack_c;
  
  puVar4 = (undefined4 *)(**(code **)param_1[1])(param_1,1,0xa0);
  param_1[0x68] = (int)puVar4;
  *puVar4 = &LAB_006e00e0;
  puVar4[1] = FUN_006e0100;
  *(undefined1 *)(puVar4 + 2) = 0;
  if (*(char *)((int)param_1 + 0x10a) != '\0') {
    *(undefined4 *)(*param_1 + 0x14) = 0x19;
    (**(code **)*param_1)(param_1);
  }
  if (((char)param_1[0x12] == '\0') || (bVar3 = true, param_1[0x46] < 2)) {
    bVar3 = false;
  }
  iStack_10 = 0;
  if (0 < param_1[9]) {
    piVar8 = (int *)(param_1[0x31] + 0x24);
    puVar9 = puVar4 + 0xd;
    do {
      iVar5 = (piVar8[-7] * *piVar8) / param_1[0x46];
      iVar6 = (piVar8[-6] * *piVar8) / param_1[0x46];
      iVar1 = param_1[0x45];
      iVar2 = param_1[0x44];
      puVar9[0xc] = iVar6;
      if ((char)piVar8[3] == '\0') {
        *puVar9 = &LAB_006e01e0;
      }
      else if ((iVar5 == iVar2) && (iVar6 == iVar1)) {
        *puVar9 = &LAB_006e01d0;
      }
      else {
        if (iVar5 * 2 == iVar2) {
          if (iVar6 == iVar1) {
            if ((bVar3) && (2 < (uint)piVar8[1])) {
              *puVar9 = &LAB_006e03a0;
            }
            else {
              *puVar9 = &LAB_006e02d0;
            }
          }
          else {
            if ((iVar5 * 2 != iVar2) || (iVar6 * 2 != iVar1)) goto LAB_006e06e0;
            if ((bVar3) && (2 < (uint)piVar8[1])) {
              *puVar9 = FUN_006e0460;
              *(undefined1 *)(puVar4 + 2) = 1;
            }
            else {
              *puVar9 = &LAB_006e0330;
            }
          }
        }
        else {
LAB_006e06e0:
          if ((iVar2 % iVar5 == 0) && (iVar1 % iVar6 == 0)) {
            uStack_c = (undefined1)(iVar2 / iVar5);
            *puVar9 = FUN_006e01f0;
            *(undefined1 *)(iStack_10 + 0x8c + (int)puVar4) = uStack_c;
            *(char *)(iStack_10 + 0x96 + (int)puVar4) = (char)(iVar1 / iVar6);
          }
          else {
            *(undefined4 *)(*param_1 + 0x14) = 0x26;
            (**(code **)*param_1)(param_1);
          }
        }
        iVar1 = param_1[1];
        uVar7 = FUN_006d9590(param_1[0x17],param_1[0x44],param_1[0x45]);
        uVar7 = (**(code **)(iVar1 + 8))(param_1,1,uVar7);
        puVar9[-10] = uVar7;
      }
      iStack_10 = iStack_10 + 1;
      puVar9 = puVar9 + 1;
      piVar8 = piVar8 + 0x15;
    } while (iStack_10 < param_1[9]);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006e0590 : SUB ESP,0x10
006e0593 : PUSH EBX
006e0594 : PUSH EBP
006e0595 : PUSH ESI
006e0596 : MOV ESI,dword ptr [ESP + 0x20]
006e059a : MOV EAX,dword ptr [ESI + 0x4]
006e059d : MOV ECX,dword ptr [EAX]
006e059f : PUSH 0xa0
006e05a4 : PUSH 0x1
006e05a6 : PUSH ESI
006e05a7 : CALL ECX
006e05a9 : MOV EBP,EAX
006e05ab : MOV dword ptr [ESI + 0x1a0],EBP
006e05b1 : ADD ESP,0xc
006e05b4 : MOV dword ptr [EBP],0x6e00e0
006e05bb : MOV dword ptr [EBP + 0x4],0x6e0100
006e05c2 : MOV byte ptr [EBP + 0x8],0x0
006e05c6 : CMP byte ptr [ESI + 0x10a],0x0
006e05cd : MOV dword ptr [ESP + 0x18],EBP
006e05d1 : JZ 0x006e05e6
006e05d3 : MOV EDX,dword ptr [ESI]
006e05d5 : MOV dword ptr [EDX + 0x14],0x19
006e05dc : MOV EAX,dword ptr [ESI]
006e05de : MOV ECX,dword ptr [EAX]
006e05e0 : PUSH ESI
006e05e1 : CALL ECX
006e05e3 : ADD ESP,0x4
006e05e6 : CMP byte ptr [ESI + 0x48],0x0
006e05ea : JZ 0x006e05fa
006e05ec : CMP dword ptr [ESI + 0x118],0x1
006e05f3 : MOV byte ptr [ESP + 0x20],0x1
006e05f8 : JG 0x006e05ff
006e05fa : MOV byte ptr [ESP + 0x20],0x0
006e05ff : CMP dword ptr [ESI + 0x24],0x0
006e0603 : MOV EBX,dword ptr [ESI + 0xc4]
006e0609 : MOV dword ptr [ESP + 0xc],0x0
006e0611 : JLE 0x006e0775
006e0617 : ADD EBX,0x24
006e061a : ADD EBP,0x34
006e061d : PUSH EDI
006e061e : MOV EDI,EDI
006e0620 : MOV ECX,dword ptr [EBX]
006e0622 : MOV EAX,dword ptr [EBX + -0x1c]
006e0625 : MOV EDI,dword ptr [ESI + 0x118]
006e062b : IMUL EAX,ECX
006e062e : CDQ
006e062f : IDIV EDI
006e0631 : MOV dword ptr [ESP + 0x14],EAX
006e0635 : MOV EAX,dword ptr [EBX + -0x18]
006e0638 : IMUL EAX,ECX
006e063b : CDQ
006e063c : IDIV EDI
006e063e : MOV EDX,dword ptr [ESI + 0x114]
006e0644 : MOV dword ptr [ESP + 0x18],EDX
006e0648 : MOV ECX,EAX
006e064a : MOV EAX,dword ptr [ESI + 0x110]
006e0650 : MOV dword ptr [EBP + 0x30],ECX
006e0653 : CMP byte ptr [EBX + 0xc],0x0
006e0657 : JNZ 0x006e0665
006e0659 : MOV dword ptr [EBP],0x6e01e0
006e0660 : JMP 0x006e075c
006e0665 : MOV EDI,dword ptr [ESP + 0x14]
006e0669 : CMP EDI,EAX
006e066b : JNZ 0x006e067d
006e066d : CMP ECX,EDX
006e066f : JNZ 0x006e067d
006e0671 : MOV dword ptr [EBP],0x6e01d0
006e0678 : JMP 0x006e075c
006e067d : ADD EDI,EDI
006e067f : CMP EDI,EAX
006e0681 : JNZ 0x006e06e0
006e0683 : CMP ECX,EDX
006e0685 : JNZ 0x006e06ac
006e0687 : CMP byte ptr [ESP + 0x24],0x0
006e068c : JZ 0x006e06a0
006e068e : CMP dword ptr [EBX + 0x4],0x2
006e0692 : JBE 0x006e06a0
006e0694 : MOV dword ptr [EBP],0x6e03a0
006e069b : JMP 0x006e072e
006e06a0 : MOV dword ptr [EBP],0x6e02d0
006e06a7 : JMP 0x006e072e
006e06ac : CMP EDI,EAX
006e06ae : JNZ 0x006e06e0
006e06b0 : LEA EDX,[ECX + ECX*0x1]
006e06b3 : CMP EDX,dword ptr [ESP + 0x18]
006e06b7 : JNZ 0x006e06e0
006e06b9 : CMP byte ptr [ESP + 0x24],0x0
006e06be : JZ 0x006e06d7
006e06c0 : CMP dword ptr [EBX + 0x4],0x2
006e06c4 : JBE 0x006e06d7
006e06c6 : MOV EAX,dword ptr [ESP + 0x1c]
006e06ca : MOV dword ptr [EBP],0x6e0460
006e06d1 : MOV byte ptr [EAX + 0x8],0x1
006e06d5 : JMP 0x006e072e
006e06d7 : MOV dword ptr [EBP],0x6e0330
006e06de : JMP 0x006e072e
006e06e0 : CDQ
006e06e1 : IDIV dword ptr [ESP + 0x14]
006e06e5 : MOV dword ptr [ESP + 0x14],EAX
006e06e9 : TEST EDX,EDX
006e06eb : JNZ 0x006e071b
006e06ed : MOV EAX,dword ptr [ESP + 0x18]
006e06f1 : CDQ
006e06f2 : IDIV ECX
006e06f4 : TEST EDX,EDX
006e06f6 : JNZ 0x006e071b
006e06f8 : MOV ECX,dword ptr [ESP + 0x1c]
006e06fc : MOV EDI,dword ptr [ESP + 0x10]
006e0700 : MOV DL,byte ptr [ESP + 0x14]
006e0704 : MOV dword ptr [EBP],0x6e01f0
006e070b : MOV byte ptr [EDI + ECX*0x1 + 0x8c],DL
006e0712 : MOV byte ptr [EDI + ECX*0x1 + 0x96],AL
006e0719 : JMP 0x006e072e
006e071b : MOV EAX,dword ptr [ESI]
006e071d : MOV dword ptr [EAX + 0x14],0x26
006e0724 : MOV ECX,dword ptr [ESI]
006e0726 : MOV EDX,dword ptr [ECX]
006e0728 : PUSH ESI
006e0729 : CALL EDX
006e072b : ADD ESP,0x4
006e072e : MOV EAX,dword ptr [ESI + 0x114]
006e0734 : MOV ECX,dword ptr [ESI + 0x110]
006e073a : MOV EDX,dword ptr [ESI + 0x5c]
006e073d : MOV EDI,dword ptr [ESI + 0x4]
006e0740 : PUSH EAX
006e0741 : PUSH ECX
006e0742 : PUSH EDX
006e0743 : ADD EDI,0x8
006e0746 : CALL 0x006d9590
006e074b : ADD ESP,0x8
006e074e : PUSH EAX
006e074f : MOV EAX,dword ptr [EDI]
006e0751 : PUSH 0x1
006e0753 : PUSH ESI
006e0754 : CALL EAX
006e0756 : ADD ESP,0x10
006e0759 : MOV dword ptr [EBP + -0x28],EAX
006e075c : MOV EAX,dword ptr [ESP + 0x10]
006e0760 : INC EAX
006e0761 : ADD EBP,0x4
006e0764 : ADD EBX,0x54
006e0767 : CMP EAX,dword ptr [ESI + 0x24]
006e076a : MOV dword ptr [ESP + 0x10],EAX
006e076e : JL 0x006e0620
006e0774 : POP EDI
006e0775 : POP ESI
006e0776 : POP EBP
006e0777 : POP EBX
006e0778 : ADD ESP,0x10
006e077b : RET
