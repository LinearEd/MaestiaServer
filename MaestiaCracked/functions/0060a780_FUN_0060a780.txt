PROGRAM  : Maestia.exe
FUNCTION : FUN_0060a780
ENTRY    : 0060a780
BODY     : [[0060a780, 0060a82b]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0060a780(int param_1)

{
  uint *puVar1;
  undefined4 *in_ECX;
  uint uVar2;
  
  puVar1 = (uint *)*in_ECX;
  uVar2 = *puVar1 >> 0xc;
  if (param_1 + 0x40U < 0x80) {
    if (puVar1[1] <= uVar2) {
      FUN_00609600(uVar2);
    }
    *(char *)((*puVar1 & 0xfff) + *(int *)(puVar1[3] + uVar2 * 4)) = (char)param_1 * '\x02';
    *puVar1 = *puVar1 + 1;
    return 1;
  }
  if (puVar1[1] <= uVar2) {
    FUN_00609600(uVar2);
  }
  *(byte *)((*puVar1 & 0xfff) + *(int *)(puVar1[3] + uVar2 * 4)) = (char)param_1 * '\x02' | 1;
  *puVar1 = *puVar1 + 1;
  puVar1 = (uint *)*in_ECX;
  uVar2 = *puVar1 >> 0xc;
  if (puVar1[1] <= uVar2) {
    FUN_00609600(uVar2);
  }
  *(char *)((*puVar1 & 0xfff) + *(int *)(puVar1[3] + uVar2 * 4)) = (char)(param_1 >> 7);
  *puVar1 = *puVar1 + 1;
  return 2;
}



============================================================
DISASSEMBLY
============================================================
0060a780 : PUSH EBX
0060a781 : MOV EBX,dword ptr [ESP + 0x8]
0060a785 : PUSH EBP
0060a786 : PUSH ESI
0060a787 : MOV EBP,ECX
0060a789 : MOV ESI,dword ptr [EBP]
0060a78c : PUSH EDI
0060a78d : MOV EDI,dword ptr [ESI]
0060a78f : LEA EAX,[EBX + 0x40]
0060a792 : SHR EDI,0xc
0060a795 : CMP EAX,0x7f
0060a798 : JA 0x0060a7c8
0060a79a : ADD BL,BL
0060a79c : CMP EDI,dword ptr [ESI + 0x4]
0060a79f : JC 0x0060a7a9
0060a7a1 : PUSH EDI
0060a7a2 : MOV ECX,ESI
0060a7a4 : CALL 0x00609600
0060a7a9 : MOV ECX,dword ptr [ESI + 0xc]
0060a7ac : MOV EDX,dword ptr [ESI]
0060a7ae : MOV EAX,dword ptr [ECX + EDI*0x4]
0060a7b1 : AND EDX,0xfff
0060a7b7 : MOV byte ptr [EDX + EAX*0x1],BL
0060a7ba : INC dword ptr [ESI]
0060a7bc : POP EDI
0060a7bd : POP ESI
0060a7be : POP EBP
0060a7bf : MOV EAX,0x1
0060a7c4 : POP EBX
0060a7c5 : RET 0x4
0060a7c8 : MOV AL,BL
0060a7ca : ADD AL,AL
0060a7cc : OR AL,0x1
0060a7ce : MOV byte ptr [ESP + 0x14],AL
0060a7d2 : CMP EDI,dword ptr [ESI + 0x4]
0060a7d5 : JC 0x0060a7e3
0060a7d7 : PUSH EDI
0060a7d8 : MOV ECX,ESI
0060a7da : CALL 0x00609600
0060a7df : MOV AL,byte ptr [ESP + 0x14]
0060a7e3 : MOV EDX,dword ptr [ESI]
0060a7e5 : MOV ECX,dword ptr [ESI + 0xc]
0060a7e8 : MOV ECX,dword ptr [ECX + EDI*0x4]
0060a7eb : AND EDX,0xfff
0060a7f1 : MOV byte ptr [EDX + ECX*0x1],AL
0060a7f4 : INC dword ptr [ESI]
0060a7f6 : MOV ESI,dword ptr [EBP]
0060a7f9 : MOV EDI,dword ptr [ESI]
0060a7fb : SHR EDI,0xc
0060a7fe : SAR EBX,0x7
0060a801 : CMP EDI,dword ptr [ESI + 0x4]
0060a804 : JC 0x0060a80e
0060a806 : PUSH EDI
0060a807 : MOV ECX,ESI
0060a809 : CALL 0x00609600
0060a80e : MOV EDX,dword ptr [ESI + 0xc]
0060a811 : MOV EAX,dword ptr [ESI]
0060a813 : MOV ECX,dword ptr [EDX + EDI*0x4]
0060a816 : AND EAX,0xfff
0060a81b : MOV byte ptr [EAX + ECX*0x1],BL
0060a81e : INC dword ptr [ESI]
0060a820 : POP EDI
0060a821 : POP ESI
0060a822 : POP EBP
0060a823 : MOV EAX,0x2
0060a828 : POP EBX
0060a829 : RET 0x4
