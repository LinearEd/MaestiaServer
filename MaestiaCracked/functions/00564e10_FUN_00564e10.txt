PROGRAM  : Maestia.exe
FUNCTION : FUN_00564e10
ENTRY    : 00564e10
BODY     : [[00564e10, 00564f29]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00564e10(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  uint uVar5;
  uint uVar6;
  int *in_ECX;
  uint uVar7;
  int iVar8;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar8 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_00564e4a;
    iVar8 = piVar4[1] * 2 + 2;
  }
  FUN_005634d0(param_1,iVar8);
LAB_00564e4a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar8 = *in_ECX;
  puVar1 = (uint *)(iVar8 + 8 + param_3 * 0xc);
  uVar5 = *puVar1;
  if (uVar5 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    FUN_0051c600(param_2);
    puVar1[1] = param_3;
    return;
  }
  uVar7 = param_3;
  do {
    uVar7 = uVar7 + 1 & *(uint *)(iVar8 + 4);
  } while (*(int *)(iVar8 + 8 + uVar7 * 0xc) != -2);
  uVar6 = puVar1[1];
  puVar2 = (uint *)(iVar8 + 8 + uVar7 * 0xc);
  if (uVar6 != param_3) {
    puVar3 = (uint *)(iVar8 + 8 + uVar6 * 0xc);
    for (uVar6 = *(uint *)(iVar8 + 8 + uVar6 * 0xc); uVar6 != param_3;
        uVar6 = *(uint *)(iVar8 + 8 + uVar6 * 0xc)) {
      uVar6 = *puVar3;
      puVar3 = (uint *)(iVar8 + 8 + uVar6 * 0xc);
    }
    if (puVar2 != (uint *)0x0) {
      *puVar2 = uVar5;
      puVar2[1] = puVar1[1];
      FUN_0051c600(puVar1 + 2);
    }
    *puVar3 = uVar7;
    FUN_0051bc20(param_2);
    puVar1[1] = param_3;
    *puVar1 = 0xffffffff;
    return;
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = uVar5;
    puVar2[1] = puVar1[1];
    FUN_0051c600(puVar1 + 2);
  }
  FUN_0051bc20(param_2);
  *puVar1 = uVar7;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
00564e10 : PUSH ESI
00564e11 : PUSH EDI
00564e12 : MOV EDI,ECX
00564e14 : MOV EAX,dword ptr [EDI]
00564e16 : TEST EAX,EAX
00564e18 : JNZ 0x00564e23
00564e1a : MOV EAX,dword ptr [ESP + 0xc]
00564e1e : PUSH 0x8
00564e20 : PUSH EAX
00564e21 : JMP 0x00564e45
00564e23 : MOV ECX,dword ptr [EAX + 0x4]
00564e26 : LEA EDX,[ECX*0x4 + 0x4]
00564e2d : MOV ECX,dword ptr [EAX]
00564e2f : LEA ECX,[ECX + ECX*0x4]
00564e32 : CMP ECX,EDX
00564e34 : JBE 0x00564e4a
00564e36 : MOV EDX,dword ptr [EAX + 0x4]
00564e39 : MOV ECX,dword ptr [ESP + 0xc]
00564e3d : LEA EAX,[EDX + EDX*0x1 + 0x2]
00564e41 : PUSH EAX
00564e42 : PUSH ECX
00564e43 : MOV ECX,EDI
00564e45 : CALL 0x005634d0
00564e4a : MOV EAX,dword ptr [EDI]
00564e4c : MOV ESI,dword ptr [ESP + 0x14]
00564e50 : AND ESI,dword ptr [EAX + 0x4]
00564e53 : INC dword ptr [EAX]
00564e55 : MOV EAX,dword ptr [EDI]
00564e57 : LEA EDX,[ESI + ESI*0x2]
00564e5a : LEA EDI,[EAX + EDX*0x4 + 0x8]
00564e5e : MOV EDX,dword ptr [EDI]
00564e60 : CMP EDX,-0x2
00564e63 : JNZ 0x00564e80
00564e65 : MOV EAX,dword ptr [ESP + 0x10]
00564e69 : PUSH EAX
00564e6a : LEA ECX,[EDI + 0x8]
00564e6d : MOV dword ptr [EDI],0xffffffff
00564e73 : CALL 0x0051c600
00564e78 : MOV dword ptr [EDI + 0x4],ESI
00564e7b : POP EDI
00564e7c : POP ESI
00564e7d : RET 0xc
00564e80 : MOV ECX,dword ptr [EAX + 0x4]
00564e83 : PUSH EBX
00564e84 : MOV EBX,ESI
00564e86 : PUSH EBP
00564e87 : INC EBX
00564e88 : AND EBX,ECX
00564e8a : LEA EBP,[EBX + EBX*0x2]
00564e8d : CMP dword ptr [EAX + EBP*0x4 + 0x8],-0x2
00564e92 : JNZ 0x00564e87
00564e94 : MOV EBP,dword ptr [EDI + 0x4]
00564e97 : LEA ECX,[EBX + EBX*0x2]
00564e9a : LEA ECX,[EAX + ECX*0x4 + 0x8]
00564e9e : CMP EBP,ESI
00564ea0 : JNZ 0x00564ed3
00564ea2 : TEST ECX,ECX
00564ea4 : JZ 0x00564eba
00564ea6 : MOV dword ptr [ECX],EDX
00564ea8 : MOV EDX,dword ptr [EDI + 0x4]
00564eab : LEA EAX,[EDI + 0x8]
00564eae : MOV dword ptr [ECX + 0x4],EDX
00564eb1 : PUSH EAX
00564eb2 : ADD ECX,0x8
00564eb5 : CALL 0x0051c600
00564eba : MOV ECX,dword ptr [ESP + 0x18]
00564ebe : PUSH ECX
00564ebf : LEA ECX,[EDI + 0x8]
00564ec2 : CALL 0x0051bc20
00564ec7 : POP EBP
00564ec8 : MOV dword ptr [EDI],EBX
00564eca : POP EBX
00564ecb : MOV dword ptr [EDI + 0x4],ESI
00564ece : POP EDI
00564ecf : POP ESI
00564ed0 : RET 0xc
00564ed3 : LEA EBP,[EBP + EBP*0x2]
00564ed7 : CMP dword ptr [EAX + EBP*0x4 + 0x8],ESI
00564edb : LEA EBP,[EAX + EBP*0x4 + 0x8]
00564edf : JZ 0x00564ef2
00564ee1 : MOV EBP,dword ptr [EBP]
00564ee4 : LEA EBP,[EBP + EBP*0x2]
00564ee8 : CMP dword ptr [EAX + EBP*0x4 + 0x8],ESI
00564eec : LEA EBP,[EAX + EBP*0x4 + 0x8]
00564ef0 : JNZ 0x00564ee1
00564ef2 : TEST ECX,ECX
00564ef4 : JZ 0x00564f0a
00564ef6 : MOV dword ptr [ECX],EDX
00564ef8 : MOV EDX,dword ptr [EDI + 0x4]
00564efb : LEA EAX,[EDI + 0x8]
00564efe : MOV dword ptr [ECX + 0x4],EDX
00564f01 : PUSH EAX
00564f02 : ADD ECX,0x8
00564f05 : CALL 0x0051c600
00564f0a : MOV ECX,dword ptr [ESP + 0x18]
00564f0e : PUSH ECX
00564f0f : LEA ECX,[EDI + 0x8]
00564f12 : MOV dword ptr [EBP],EBX
00564f15 : CALL 0x0051bc20
00564f1a : POP EBP
00564f1b : POP EBX
00564f1c : MOV dword ptr [EDI + 0x4],ESI
00564f1f : MOV dword ptr [EDI],0xffffffff
00564f25 : POP EDI
00564f26 : POP ESI
00564f27 : RET 0xc
