PROGRAM  : Maestia.exe
FUNCTION : FUN_007da040
ENTRY    : 007da040
BODY     : [[007da040, 007da3a8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007da040(int *param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  int *piVar2;
  float *pfVar3;
  float *pfVar4;
  int *unaff_EDI;
  float10 fVar5;
  float fVar6;
  float fVar7;
  double dVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fStack_6c;
  float fStack_68;
  float fStack_64;
  undefined1 auStack_48 [8];
  float fStack_40;
  undefined1 auStack_3c [4];
  undefined2 uStack_38;
  undefined4 uStack_28;
  uint uStack_24;
  undefined4 uStack_20;
  void *local_1c;
  undefined1 *puStack_18;
  undefined4 uStack_14;
  
  uStack_14 = 0xffffffff;
  puStack_18 = &LAB_00b3a4b7;
  local_1c = ExceptionList;
  ExceptionList = &local_1c;
  if (*(char *)((int)unaff_EDI + 0x259) != '\0') {
    if (*(char *)((int)unaff_EDI + 0x25a) != '\0') {
      if (param_3 == 2) {
        param_3 = FUN_007f2d40(DAT_00d66fa0 ^ (uint)&stack0xffffff80);
      }
      if (param_3 == 0) {
        ExceptionList = local_1c;
        return;
      }
    }
    iVar1 = (**(code **)(*unaff_EDI + 0x44))();
    if (iVar1 != 0) {
      FUN_00406460(L"NamePad");
      uStack_14 = 0;
      piVar2 = (int *)(**(code **)(*unaff_EDI + 0x3c))(auStack_3c);
      uStack_14 = 0xffffffff;
      if (7 < uStack_24) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uStack_24 = 7;
      uStack_28 = 0;
      uStack_38 = 0;
      if ((piVar2 != (int *)0x0) && (iVar1 = (**(code **)(*piVar2 + 0x1c))(), iVar1 - 2U < 8)) {
        (**(code **)(*piVar2 + 0x84))(param_1,param_2,param_3);
        pfVar3 = (float *)FUN_007cc270();
        pfVar4 = (float *)(**(code **)(*param_1 + 0x14))();
        fVar6 = *pfVar4;
        fVar7 = *pfVar3;
        fVar9 = pfVar4[1];
        fVar11 = pfVar3[1];
        fVar10 = pfVar4[2] - pfVar3[2];
        FUN_00406460(L"DUMMY_MODEL");
        uStack_20 = 1;
        piVar2 = (int *)(**(code **)(*unaff_EDI + 0x3c))(auStack_48);
        uStack_14 = 0xffffffff;
        FUN_00406560();
        if (piVar2 != (int *)0x0) {
          fVar5 = (float10)FUN_0040f460(fVar10 + (fVar9 - fVar11) * (fVar9 - fVar11) +
                                                 fVar10 * fVar10 + (fVar6 - fVar7) * (fVar6 - fVar7)
                                       );
          if ((float10)0 < fVar5) {
            fVar6 = 1.0 / (float)fVar5;
            fStack_40 = fVar6 * fStack_68;
            fVar10 = fStack_40 * 0.0 - fVar6 * 0.0 * -1.0;
            fVar9 = fVar6 * fStack_6c * 0.0;
            fVar7 = fVar6 * fStack_6c * -1.0 - fStack_40 * 0.0;
            fVar6 = fVar6 * 0.0 * 0.0;
            fVar11 = fVar6 - fVar9;
            fVar5 = (float10)FUN_0040f460(fVar7 * fVar7 + fVar10 * fVar10 + fVar11 * fVar11);
            if (((float10)0 < fVar5) &&
               (fVar6 = (fVar9 - fStack_40 * 1.0) + fVar6, ABS(fVar6) <= 1.0)) {
              dVar8 = (double)fVar6;
              FUN_00b0abbf();
              FUN_0040eb30((float)dVar8);
            }
          }
          (**(code **)(*piVar2 + 0x84))(param_1,param_2,param_3);
        }
        if ((fStack_64 < 40000.0) && (unaff_EDI[0x5f] != 0)) {
          FUN_00784a00(unaff_EDI);
        }
      }
    }
  }
  ExceptionList = local_1c;
  return;
}



============================================================
DISASSEMBLY
============================================================
007da040 : PUSH EBP
007da041 : MOV EBP,ESP
007da043 : AND ESP,0xfffffff0
007da046 : PUSH -0x1
007da048 : PUSH 0xb3a4b7
007da04d : MOV EAX,FS:[0x0]
007da053 : PUSH EAX
007da054 : SUB ESP,0x5c
007da057 : PUSH EBX
007da058 : PUSH ESI
007da059 : MOV EAX,[0x00d66fa0]
007da05e : XOR EAX,ESP
007da060 : PUSH EAX
007da061 : LEA EAX,[ESP + 0x68]
007da065 : MOV FS:[0x0],EAX
007da06b : MOV EBX,dword ptr [EBP + 0x8]
007da06e : MOV AL,byte ptr [EDI + 0x259]
007da074 : TEST AL,AL
007da076 : JZ 0x007da395
007da07c : CMP byte ptr [EDI + 0x25a],0x0
007da083 : JZ 0x007da0a5
007da085 : CMP dword ptr [EBP + 0x10],0x2
007da089 : JNZ 0x007da09b
007da08b : LEA EAX,[EDI + 0x1ac]
007da091 : MOV EDX,EBX
007da093 : CALL 0x007f2d40
007da098 : MOV dword ptr [EBP + 0x10],EAX
007da09b : CMP dword ptr [EBP + 0x10],0x0
007da09f : JZ 0x007da395
007da0a5 : MOV EAX,dword ptr [EDI]
007da0a7 : MOV EDX,dword ptr [EAX + 0x44]
007da0aa : MOV ECX,EDI
007da0ac : CALL EDX
007da0ae : TEST EAX,EAX
007da0b0 : JZ 0x007da395
007da0b6 : PUSH 0xc20394
007da0bb : LEA ECX,[ESP + 0x4c]
007da0bf : CALL 0x00406460
007da0c4 : MOV dword ptr [ESP + 0x70],0x0
007da0cc : MOV EAX,dword ptr [EDI]
007da0ce : MOV EDX,dword ptr [EAX + 0x3c]
007da0d1 : LEA ECX,[ESP + 0x48]
007da0d5 : PUSH ECX
007da0d6 : MOV ECX,EDI
007da0d8 : CALL EDX
007da0da : MOV ESI,EAX
007da0dc : MOV dword ptr [ESP + 0x70],0xffffffff
007da0e4 : CMP dword ptr [ESP + 0x60],0x8
007da0e9 : JC 0x007da0f4
007da0eb : MOV ECX,dword ptr [ESP + 0x4c]
007da0ef : CALL 0x006f04e0
007da0f4 : XOR EAX,EAX
007da0f6 : MOV dword ptr [ESP + 0x60],0x7
007da0fe : MOV dword ptr [ESP + 0x5c],0x0
007da106 : MOV word ptr [ESP + 0x4c],AX
007da10b : TEST ESI,ESI
007da10d : JZ 0x007da395
007da113 : MOV EDX,dword ptr [ESI]
007da115 : MOV EAX,dword ptr [EDX + 0x1c]
007da118 : MOV ECX,ESI
007da11a : CALL EAX
007da11c : ADD EAX,-0x2
007da11f : CMP EAX,0x7
007da122 : JA 0x007da395
007da128 : MOV EAX,dword ptr [EBP + 0x10]
007da12b : MOV ECX,dword ptr [EBP + 0xc]
007da12e : MOV EDX,dword ptr [ESI]
007da130 : MOV EDX,dword ptr [EDX + 0x84]
007da136 : PUSH EAX
007da137 : PUSH ECX
007da138 : PUSH EBX
007da139 : MOV ECX,ESI
007da13b : CALL EDX
007da13d : MOV ESI,EDI
007da13f : CALL 0x007cc270
007da144 : MOV ESI,EAX
007da146 : MOV EAX,dword ptr [EBX]
007da148 : MOV EDX,dword ptr [EAX + 0x14]
007da14b : MOV ECX,EBX
007da14d : CALL EDX
007da14f : MOVSS XMM0,dword ptr [EAX]
007da153 : SUBSS XMM0,dword ptr [ESI]
007da157 : MOVSS XMM1,dword ptr [EAX + 0x4]
007da15c : SUBSS XMM1,dword ptr [ESI + 0x4]
007da161 : MOVSS XMM2,dword ptr [EAX + 0x8]
007da166 : SUBSS XMM2,dword ptr [ESI + 0x8]
007da16b : MOVAPS XMM3,XMM0
007da16e : MULSS XMM3,XMM0
007da172 : MOVSS dword ptr [ESP + 0x18],XMM0
007da178 : MOVSS dword ptr [ESP + 0x1c],XMM2
007da17e : MULSS XMM2,XMM2
007da182 : MOVAPS XMM0,XMM1
007da185 : MULSS XMM0,XMM1
007da189 : ADDSS XMM0,XMM2
007da18d : ADDSS XMM0,XMM3
007da191 : PUSH 0xc203a4
007da196 : LEA ECX,[ESP + 0x4c]
007da19a : MOVSS dword ptr [ESP + 0x18],XMM3
007da1a0 : MOVSS dword ptr [ESP + 0x14],XMM2
007da1a6 : MOVSS dword ptr [ESP + 0x24],XMM0
007da1ac : CALL 0x00406460
007da1b1 : MOV dword ptr [ESP + 0x70],0x1
007da1b9 : MOV EAX,dword ptr [EDI]
007da1bb : MOV EDX,dword ptr [EAX + 0x3c]
007da1be : LEA ECX,[ESP + 0x48]
007da1c2 : PUSH ECX
007da1c3 : MOV ECX,EDI
007da1c5 : CALL EDX
007da1c7 : MOV ESI,EAX
007da1c9 : MOV dword ptr [ESP + 0x70],0xffffffff
007da1d1 : LEA ECX,[ESP + 0x48]
007da1d5 : CALL 0x00406560
007da1da : TEST ESI,ESI
007da1dc : JZ 0x007da376
007da1e2 : MOVSS XMM0,dword ptr [ESP + 0x10]
007da1e8 : ADDSS XMM0,dword ptr [ESP + 0x14]
007da1ee : PUSH ECX
007da1ef : MOVSS dword ptr [ESP],XMM0
007da1f4 : CALL 0x0040f460
007da1f9 : FST float ptr [ESP + 0x18]
007da1fd : FLDZ
007da1ff : ADD ESP,0x4
007da202 : FXCH
007da204 : FCOMIP ST0,ST1
007da206 : FSTP ST0
007da208 : JBE 0x007da361
007da20e : MOVSS XMM0,dword ptr [0x00c10fc4]
007da216 : DIVSS XMM0,dword ptr [ESP + 0x14]
007da21c : XORPS XMM5,XMM5
007da21f : MOVSS XMM6,dword ptr [0x00cdf0d0]
007da227 : MOVAPS XMM1,XMM0
007da22a : MULSS XMM1,dword ptr [ESP + 0x18]
007da230 : MOVAPS XMM2,XMM0
007da233 : MULSS XMM0,dword ptr [ESP + 0x1c]
007da239 : MOVAPS XMM3,XMM0
007da23c : MOVSS dword ptr [ESP + 0x44],XMM0
007da242 : MULSS XMM2,XMM5
007da246 : MOVAPS XMM0,XMM2
007da249 : MULSS XMM0,XMM6
007da24d : MULSS XMM3,XMM5
007da251 : MOVAPS XMM4,XMM3
007da254 : SUBSS XMM4,XMM0
007da258 : MOVAPS XMM0,XMM1
007da25b : MULSS XMM1,XMM5
007da25f : MULSS XMM0,XMM6
007da263 : SUBSS XMM0,XMM3
007da267 : MOVSS dword ptr [ESP + 0x28],XMM0
007da26d : MOVSS dword ptr [ESP + 0x18],XMM1
007da273 : MULSS XMM2,XMM5
007da277 : MOVSS dword ptr [ESP + 0x14],XMM2
007da27d : SUBSS XMM2,XMM1
007da281 : MOVSS dword ptr [ESP + 0x24],XMM4
007da287 : MOVQ XMM1,qword ptr [ESP + 0x24]
007da28d : MOVQ qword ptr [ESP + 0x30],XMM1
007da293 : MOVAPS XMM1,XMM0
007da296 : MULSS XMM1,XMM0
007da29a : MOVAPS XMM0,XMM4
007da29d : MULSS XMM0,XMM4
007da2a1 : ADDSS XMM1,XMM0
007da2a5 : MOVSS dword ptr [ESP + 0x2c],XMM2
007da2ab : MOV EAX,dword ptr [ESP + 0x2c]
007da2af : MOVAPS XMM0,XMM2
007da2b2 : MULSS XMM0,XMM2
007da2b6 : PUSH ECX
007da2b7 : ADDSS XMM1,XMM0
007da2bb : MOV dword ptr [ESP + 0x3c],EAX
007da2bf : MOVSS dword ptr [ESP],XMM1
007da2c4 : CALL 0x0040f460
007da2c9 : FST float ptr [ESP + 0x20]
007da2cd : FLDZ
007da2cf : ADD ESP,0x4
007da2d2 : FXCH
007da2d4 : FCOMIP ST0,ST1
007da2d6 : FSTP ST0
007da2d8 : JBE 0x007da361
007da2de : MOVSS XMM3,dword ptr [0x00c10fc4]
007da2e6 : MOVAPS XMM0,XMM3
007da2e9 : DIVSS XMM0,dword ptr [ESP + 0x1c]
007da2ef : MOVAPS XMM1,XMM0
007da2f2 : MULSS XMM1,dword ptr [ESP + 0x24]
007da2f8 : MOVAPS XMM2,XMM0
007da2fb : MULSS XMM0,dword ptr [ESP + 0x2c]
007da301 : MULSS XMM2,dword ptr [ESP + 0x28]
007da307 : MOVSS dword ptr [ESP + 0x30],XMM1
007da30d : MOVSS XMM1,dword ptr [ESP + 0x44]
007da313 : MOVSS dword ptr [ESP + 0x38],XMM0
007da319 : MOVSS XMM0,dword ptr [ESP + 0x18]
007da31f : MULSS XMM1,XMM3
007da323 : SUBSS XMM0,XMM1
007da327 : ADDSS XMM0,dword ptr [ESP + 0x14]
007da32d : MOVSS dword ptr [ESP + 0x34],XMM2
007da333 : MOVSS XMM2,dword ptr [0x00cdf350]
007da33b : MOVAPS XMM1,XMM0
007da33e : ANDPS XMM1,XMM2
007da341 : COMISS XMM3,XMM1
007da344 : JC 0x007da361
007da346 : CVTPS2PD XMM0,XMM0
007da349 : CALL 0x00b0abbf
007da34e : PUSH ECX
007da34f : CVTSD2SS XMM0,XMM0
007da353 : LEA EAX,[ESP + 0x34]
007da357 : MOVSS dword ptr [ESP],XMM0
007da35c : CALL 0x0040eb30
007da361 : MOV EAX,dword ptr [EBP + 0x10]
007da364 : MOV ECX,dword ptr [EBP + 0xc]
007da367 : MOV EDX,dword ptr [ESI]
007da369 : MOV EDX,dword ptr [EDX + 0x84]
007da36f : PUSH EAX
007da370 : PUSH ECX
007da371 : PUSH EBX
007da372 : MOV ECX,ESI
007da374 : CALL EDX
007da376 : MOVSS XMM0,dword ptr [0x00cdf4a0]
007da37e : COMISS XMM0,dword ptr [ESP + 0x20]
007da383 : JBE 0x007da395
007da385 : MOV ECX,dword ptr [EDI + 0x17c]
007da38b : TEST ECX,ECX
007da38d : JZ 0x007da395
007da38f : PUSH EDI
007da390 : CALL 0x00784a00
007da395 : MOV ECX,dword ptr [ESP + 0x68]
007da399 : MOV dword ptr FS:[0x0],ECX
007da3a0 : POP ECX
007da3a1 : POP ESI
007da3a2 : POP EBX
007da3a3 : MOV ESP,EBP
007da3a5 : POP EBP
007da3a6 : RET 0xc
