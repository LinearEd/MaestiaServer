PROGRAM  : Maestia.exe
FUNCTION : FUN_008ed630
ENTRY    : 008ed630
BODY     : [[008ed630, 008ed67c] [008ed680, 008ed709] [008ed710, 008ed7fb]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x008ed78d) */

void FUN_008ed630(int param_1)

{
  int *piVar1;
  int iVar2;
  void **ppvVar3;
  uint uVar4;
  int *piVar5;
  uint uVar6;
  int *piVar7;
  int *piVar8;
  int local_2c;
  undefined1 local_28 [4];
  int *local_24;
  int *local_20;
  int local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  puStack_10 = &LAB_00b1e532;
  local_14 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xffffffc8;
  piVar8 = (int *)0x0;
  local_20 = (int *)0x0;
  local_24 = (int *)0x0;
  local_1c = 0;
  local_c = 0;
  piVar7 = *(int **)(param_1 + 8);
  ppvVar3 = &local_14;
  piVar1 = local_24;
  if (piVar7 != *(int **)(param_1 + 0xc)) {
    do {
      ExceptionList = ppvVar3;
      piVar1 = *(int **)(param_1 + 0x1c);
      piVar5 = *(int **)(param_1 + 0x18);
      local_2c = *piVar7;
      if (piVar5 == piVar1) {
LAB_008ed69f:
        if (local_24 == (int *)0x0) {
          uVar6 = 0;
        }
        else {
          uVar6 = local_1c - (int)local_24 >> 2;
        }
        if ((uint)((int)piVar8 - (int)local_24 >> 2) < uVar6) {
          *piVar8 = local_2c;
          local_20 = piVar8 + 1;
          piVar8 = local_20;
        }
        else {
          FUN_0042fe80(local_28,piVar8,&local_2c);
          piVar8 = local_20;
        }
      }
      else {
        do {
          if (*piVar5 == local_2c) break;
          piVar5 = piVar5 + 1;
        } while (piVar5 != piVar1);
        if (piVar5 == piVar1) goto LAB_008ed69f;
      }
      piVar7 = piVar7 + 1;
      ppvVar3 = ExceptionList;
      piVar1 = local_24;
    } while (piVar7 != *(int **)(param_1 + 0xc));
  }
  for (; ExceptionList = ppvVar3, piVar1 != piVar8; piVar1 = piVar1 + 1) {
    (**(code **)(*(int *)*piVar1 + 0x2c))(uVar4);
    ppvVar3 = ExceptionList;
  }
  piVar7 = *(int **)(param_1 + 0x18);
  if (piVar7 != *(int **)(param_1 + 0x1c)) {
    do {
      iVar2 = ((int *)*piVar7)[0xb];
      if (((((iVar2 != 0xd0) && (iVar2 != 0x44)) && (iVar2 != 0x18)) &&
          ((iVar2 != 0x98 && (iVar2 != 0x30)))) && (iVar2 != 0x17)) {
        (**(code **)(*(int *)*piVar7 + 0x30))();
      }
      piVar7 = piVar7 + 1;
    } while (piVar7 != *(int **)(param_1 + 0x1c));
  }
  iVar2 = *DAT_00da9894;
  if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
    (**(code **)**(undefined4 **)(iVar2 + 0x114))("MoveToUserPos");
  }
  if (*(int *)(param_1 + 0x18) != *(int *)(param_1 + 0x1c)) {
    *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x18);
  }
  iVar2 = *DAT_00da9894;
  if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
    (**(code **)**(undefined4 **)(iVar2 + 0x114))("CastingClose");
  }
  local_c = 0xffffffff;
  if (local_24 == (int *)0x0) {
    ExceptionList = local_14;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008ed630 : PUSH EBP
008ed631 : MOV EBP,ESP
008ed633 : AND ESP,0xfffffff8
008ed636 : PUSH -0x1
008ed638 : PUSH 0xb1e532
008ed63d : MOV EAX,FS:[0x0]
008ed643 : PUSH EAX
008ed644 : SUB ESP,0x18
008ed647 : PUSH EBX
008ed648 : PUSH ESI
008ed649 : PUSH EDI
008ed64a : MOV EAX,[0x00d66fa0]
008ed64f : XOR EAX,ESP
008ed651 : PUSH EAX
008ed652 : LEA EAX,[ESP + 0x28]
008ed656 : MOV FS:[0x0],EAX
008ed65c : MOV EBX,dword ptr [EBP + 0x8]
008ed65f : XOR EDI,EDI
008ed661 : MOV dword ptr [ESP + 0x1c],EDI
008ed665 : MOV dword ptr [ESP + 0x18],EDI
008ed669 : MOV dword ptr [ESP + 0x20],EDI
008ed66d : MOV dword ptr [ESP + 0x30],EDI
008ed671 : MOV ESI,dword ptr [EBX + 0x8]
008ed674 : MOV EAX,dword ptr [EBX + 0xc]
008ed677 : CMP ESI,EAX
008ed679 : JZ 0x008ed6e8
008ed67b : JMP 0x008ed680
008ed680 : MOV ECX,dword ptr [EBX + 0x1c]
008ed683 : MOV EAX,dword ptr [EBX + 0x18]
008ed686 : MOV EDX,dword ptr [ESI]
008ed688 : MOV dword ptr [ESP + 0x10],EDX
008ed68c : CMP EAX,ECX
008ed68e : JZ 0x008ed69f
008ed690 : CMP dword ptr [EAX],EDX
008ed692 : JZ 0x008ed69b
008ed694 : ADD EAX,0x4
008ed697 : CMP EAX,ECX
008ed699 : JNZ 0x008ed690
008ed69b : CMP EAX,ECX
008ed69d : JNZ 0x008ed6e0
008ed69f : MOV ECX,dword ptr [ESP + 0x18]
008ed6a3 : TEST ECX,ECX
008ed6a5 : JNZ 0x008ed6ab
008ed6a7 : XOR EAX,EAX
008ed6a9 : JMP 0x008ed6b4
008ed6ab : MOV EAX,dword ptr [ESP + 0x20]
008ed6af : SUB EAX,ECX
008ed6b1 : SAR EAX,0x2
008ed6b4 : MOV ECX,EDI
008ed6b6 : SUB ECX,dword ptr [ESP + 0x18]
008ed6ba : SAR ECX,0x2
008ed6bd : CMP ECX,EAX
008ed6bf : JNC 0x008ed6cc
008ed6c1 : MOV dword ptr [EDI],EDX
008ed6c3 : ADD EDI,0x4
008ed6c6 : MOV dword ptr [ESP + 0x1c],EDI
008ed6ca : JMP 0x008ed6e0
008ed6cc : LEA EDX,[ESP + 0x10]
008ed6d0 : PUSH EDX
008ed6d1 : PUSH EDI
008ed6d2 : LEA EAX,[ESP + 0x1c]
008ed6d6 : PUSH EAX
008ed6d7 : CALL 0x0042fe80
008ed6dc : MOV EDI,dword ptr [ESP + 0x1c]
008ed6e0 : ADD ESI,0x4
008ed6e3 : CMP ESI,dword ptr [EBX + 0xc]
008ed6e6 : JNZ 0x008ed680
008ed6e8 : MOV ESI,dword ptr [ESP + 0x18]
008ed6ec : CMP ESI,EDI
008ed6ee : JZ 0x008ed700
008ed6f0 : MOV ECX,dword ptr [ESI]
008ed6f2 : MOV EDX,dword ptr [ECX]
008ed6f4 : MOV EAX,dword ptr [EDX + 0x2c]
008ed6f7 : CALL EAX
008ed6f9 : ADD ESI,0x4
008ed6fc : CMP ESI,EDI
008ed6fe : JNZ 0x008ed6f0
008ed700 : MOV ESI,dword ptr [EBX + 0x18]
008ed703 : CMP ESI,dword ptr [EBX + 0x1c]
008ed706 : JZ 0x008ed746
008ed708 : JMP 0x008ed710
008ed710 : MOV ECX,dword ptr [ESI]
008ed712 : MOV EAX,dword ptr [ECX + 0x2c]
008ed715 : CMP EAX,0xd0
008ed71a : JZ 0x008ed73e
008ed71c : CMP EAX,0x44
008ed71f : JZ 0x008ed73e
008ed721 : CMP EAX,0x18
008ed724 : JZ 0x008ed73e
008ed726 : CMP EAX,0x98
008ed72b : JZ 0x008ed73e
008ed72d : CMP EAX,0x30
008ed730 : JZ 0x008ed73e
008ed732 : CMP EAX,0x17
008ed735 : JZ 0x008ed73e
008ed737 : MOV EDX,dword ptr [ECX]
008ed739 : MOV EAX,dword ptr [EDX + 0x30]
008ed73c : CALL EAX
008ed73e : ADD ESI,0x4
008ed741 : CMP ESI,dword ptr [EBX + 0x1c]
008ed744 : JNZ 0x008ed710
008ed746 : MOV ECX,dword ptr [0x00da9894]
008ed74c : MOV EAX,dword ptr [ECX]
008ed74e : TEST EAX,EAX
008ed750 : JZ 0x008ed76e
008ed752 : CMP dword ptr [EAX + 0x114],0x0
008ed759 : JZ 0x008ed76e
008ed75b : MOV EAX,dword ptr [EAX + 0x114]
008ed761 : MOV EDX,dword ptr [EAX]
008ed763 : MOV ECX,EAX
008ed765 : MOV EAX,dword ptr [EDX]
008ed767 : PUSH 0xc5b810
008ed76c : CALL EAX
008ed76e : MOV ECX,dword ptr [EBX + 0x1c]
008ed771 : MOV ESI,dword ptr [EBX + 0x18]
008ed774 : CMP ESI,ECX
008ed776 : JZ 0x008ed79c
008ed778 : MOV EAX,ECX
008ed77a : SUB EAX,ECX
008ed77c : SAR EAX,0x2
008ed77f : LEA EDX,[EAX*0x4 + 0x0]
008ed786 : LEA EDI,[EDX + ESI*0x1]
008ed789 : TEST EAX,EAX
008ed78b : JLE 0x008ed799
008ed78d : PUSH EDX
008ed78e : PUSH ECX
008ed78f : PUSH EDX
008ed790 : PUSH ESI
008ed791 : CALL 0x00634101
008ed796 : ADD ESP,0x10
008ed799 : MOV dword ptr [EBX + 0x1c],EDI
008ed79c : MOV ECX,dword ptr [0x00da9894]
008ed7a2 : MOV EAX,dword ptr [ECX]
008ed7a4 : TEST EAX,EAX
008ed7a6 : JZ 0x008ed7c4
008ed7a8 : CMP dword ptr [EAX + 0x114],0x0
008ed7af : JZ 0x008ed7c4
008ed7b1 : MOV EAX,dword ptr [EAX + 0x114]
008ed7b7 : MOV EDX,dword ptr [EAX]
008ed7b9 : MOV ECX,EAX
008ed7bb : MOV EAX,dword ptr [EDX]
008ed7bd : PUSH 0xc5b820
008ed7c2 : CALL EAX
008ed7c4 : MOV dword ptr [ESP + 0x30],0xffffffff
008ed7cc : MOV ECX,dword ptr [ESP + 0x18]
008ed7d0 : TEST ECX,ECX
008ed7d2 : JZ 0x008ed7d9
008ed7d4 : CALL 0x006f04e0
008ed7d9 : XOR EAX,EAX
008ed7db : MOV dword ptr [ESP + 0x18],EAX
008ed7df : MOV dword ptr [ESP + 0x1c],EAX
008ed7e3 : MOV dword ptr [ESP + 0x20],EAX
008ed7e7 : MOV ECX,dword ptr [ESP + 0x28]
008ed7eb : MOV dword ptr FS:[0x0],ECX
008ed7f2 : POP ECX
008ed7f3 : POP EDI
008ed7f4 : POP ESI
008ed7f5 : POP EBX
008ed7f6 : MOV ESP,EBP
008ed7f8 : POP EBP
008ed7f9 : RET 0x4
