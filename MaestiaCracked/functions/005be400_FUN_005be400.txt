PROGRAM  : Maestia.exe
FUNCTION : FUN_005be400
ENTRY    : 005be400
BODY     : [[005be400, 005be53c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005be400(float param_1,uint param_2,undefined4 param_3,int param_4)

{
  float fVar1;
  float fVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int in_ECX;
  float10 extraout_ST0;
  undefined8 uVar6;
  undefined4 local_c;
  
  uVar3 = param_2;
  fVar2 = param_1;
  local_c = 0;
  if (*(char *)(*(int *)((int)param_1 + 0x78) + 0x2a4) == '\x01') {
    uVar6 = FUN_005aa2b0();
    param_2 = __aulldiv(uVar6,1000,0);
    iVar4 = FUN_005296a0();
    if (uVar3 < 4) {
      iVar4 = iVar4 + 0x944 + uVar3 * 0x24;
    }
    else {
      iVar4 = 0;
    }
    fVar1 = *(float *)(iVar4 + 0x18);
    param_1 = *(float *)(iVar4 + 0x14) / 20.0;
    iVar4 = FUN_0063b380();
    param_1 = (float)((float10)fVar1 / extraout_ST0);
    iVar5 = FUN_0063b380();
    if (((param_2 <= *(int *)(in_ECX + 0x10) + 300U) && (*(int *)(in_ECX + 8) == iVar4)) &&
       (*(int *)(in_ECX + 0xc) == iVar5)) {
      local_c = 1;
    }
    *(int *)(in_ECX + 8) = iVar4;
    *(int *)(in_ECX + 0xc) = iVar5;
    *(uint *)(in_ECX + 0x10) = param_2;
  }
  if (param_4 == 0) {
    FUN_005be330(fVar2,uVar3,100,0,param_3,0,local_c);
  }
  else {
    iVar4 = *(int *)(param_4 + 0x80);
    if (iVar4 == 0) {
      iVar4 = FUN_00520df0();
    }
    param_1 = *(float *)(iVar4 + 0xc);
    *(int *)((int)param_1 + 8) = *(int *)((int)param_1 + 8) + 1;
    FUN_005be330(fVar2,uVar3,100,&param_1,param_3,0,local_c);
    *(int *)((int)param_1 + 8) = *(int *)((int)param_1 + 8) + -1;
    if (*(int *)((int)param_1 + 8) == 0) {
      FUN_00525340();
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005be400 : SUB ESP,0xc
005be403 : PUSH EBP
005be404 : MOV EBP,dword ptr [ESP + 0x14]
005be408 : MOV EAX,dword ptr [EBP + 0x78]
005be40b : CMP byte ptr [EAX + 0x2a4],0x1
005be412 : PUSH ESI
005be413 : PUSH EDI
005be414 : MOV EDI,dword ptr [ESP + 0x20]
005be418 : MOV ESI,ECX
005be41a : MOV byte ptr [ESP + 0xc],0x0
005be41f : JNZ 0x005be4bd
005be425 : CALL 0x005aa2b0
005be42a : PUSH 0x0
005be42c : PUSH 0x3e8
005be431 : PUSH EDX
005be432 : PUSH EAX
005be433 : CALL 0x0063c250
005be438 : MOV ECX,EBP
005be43a : MOV dword ptr [ESP + 0x20],EAX
005be43e : CALL 0x005296a0
005be443 : CMP EDI,0x4
005be446 : JC 0x005be44c
005be448 : XOR EAX,EAX
005be44a : JMP 0x005be456
005be44c : LEA ECX,[EDI + EDI*0x8]
005be44f : LEA EAX,[EAX + ECX*0x4 + 0x944]
005be456 : FLD float ptr [EAX + 0x14]
005be459 : PUSH EBX
005be45a : FSTP float ptr [ESP + 0x14]
005be45e : FLD float ptr [EAX + 0x18]
005be461 : FSTP float ptr [ESP + 0x18]
005be465 : FLD float ptr [ESP + 0x14]
005be469 : FLD double ptr [0x00b86058]
005be46f : FDIV ST1,ST0
005be471 : FXCH
005be473 : FSTP float ptr [ESP + 0x20]
005be477 : FLD float ptr [ESP + 0x20]
005be47b : CALL 0x0063b380
005be480 : FDIVR float ptr [ESP + 0x18]
005be484 : MOV EBX,EAX
005be486 : FSTP float ptr [ESP + 0x20]
005be48a : FLD float ptr [ESP + 0x20]
005be48e : CALL 0x0063b380
005be493 : MOV EDX,dword ptr [ESI + 0x10]
005be496 : MOV ECX,dword ptr [ESP + 0x24]
005be49a : ADD EDX,0x12c
005be4a0 : CMP ECX,EDX
005be4a2 : JA 0x005be4b3
005be4a4 : CMP dword ptr [ESI + 0x8],EBX
005be4a7 : JNZ 0x005be4b3
005be4a9 : CMP dword ptr [ESI + 0xc],EAX
005be4ac : JNZ 0x005be4b3
005be4ae : MOV byte ptr [ESP + 0x10],0x1
005be4b3 : MOV dword ptr [ESI + 0x8],EBX
005be4b6 : MOV dword ptr [ESI + 0xc],EAX
005be4b9 : MOV dword ptr [ESI + 0x10],ECX
005be4bc : POP EBX
005be4bd : MOV ECX,dword ptr [ESP + 0x28]
005be4c1 : TEST ECX,ECX
005be4c3 : JZ 0x005be51a
005be4c5 : MOV EAX,dword ptr [ECX + 0x80]
005be4cb : TEST EAX,EAX
005be4cd : JNZ 0x005be4d4
005be4cf : CALL 0x00520df0
005be4d4 : MOV EAX,dword ptr [EAX + 0xc]
005be4d7 : MOV ECX,dword ptr [ESP + 0x24]
005be4db : MOV dword ptr [ESP + 0x1c],EAX
005be4df : INC dword ptr [EAX + 0x8]
005be4e2 : MOV EAX,dword ptr [ESP + 0xc]
005be4e6 : PUSH EAX
005be4e7 : PUSH 0x0
005be4e9 : PUSH ECX
005be4ea : LEA EDX,[ESP + 0x28]
005be4ee : PUSH EDX
005be4ef : PUSH 0x64
005be4f1 : PUSH EDI
005be4f2 : PUSH EBP
005be4f3 : LEA ECX,[ESI + -0x34]
005be4f6 : CALL 0x005be330
005be4fb : MOV EAX,dword ptr [ESP + 0x1c]
005be4ff : DEC dword ptr [EAX + 0x8]
005be502 : MOV ECX,EAX
005be504 : ADD EAX,0x8
005be507 : CMP dword ptr [EAX],0x0
005be50a : JNZ 0x005be534
005be50c : CALL 0x00525340
005be511 : POP EDI
005be512 : POP ESI
005be513 : POP EBP
005be514 : ADD ESP,0xc
005be517 : RET 0x10
005be51a : MOV EAX,dword ptr [ESP + 0xc]
005be51e : MOV ECX,dword ptr [ESP + 0x24]
005be522 : PUSH EAX
005be523 : PUSH 0x0
005be525 : PUSH ECX
005be526 : PUSH 0x0
005be528 : PUSH 0x64
005be52a : PUSH EDI
005be52b : PUSH EBP
005be52c : LEA ECX,[ESI + -0x34]
005be52f : CALL 0x005be330
005be534 : POP EDI
005be535 : POP ESI
005be536 : POP EBP
005be537 : ADD ESP,0xc
005be53a : RET 0x10
