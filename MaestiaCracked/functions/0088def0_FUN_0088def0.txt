PROGRAM  : Maestia.exe
FUNCTION : FUN_0088def0
ENTRY    : 0088def0
BODY     : [[0088def0, 0088e098]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0088def0(int param_1,char param_2,int param_3,undefined1 param_4)

{
  int *piVar1;
  char cVar2;
  short sVar3;
  int iVar4;
  DWORD DVar5;
  int *in_ECX;
  bool bVar6;
  
  if (DAT_00da93ec != 0) {
    if (*(int *)(DAT_00da93ec + 0xac) == 0) {
      if (*(char *)(DAT_00da93ec + 0x377) == '\0') {
        return;
      }
    }
    else {
      if (*(char *)(DAT_00da93ec + 0x377) == '\0') {
        return;
      }
      cVar2 = FUN_0086ea90(*(int *)(DAT_00da93ec + 0xac));
      if (cVar2 != '\0') {
        return;
      }
    }
  }
  *(undefined1 *)(in_ECX + 0x18c) = param_4;
  *(undefined1 *)((int)in_ECX + 0x631) = 1;
  in_ECX[0x18d] = param_1;
  *(char *)(in_ECX + 0x18e) = param_2;
  in_ECX[399] = param_3;
  if ((param_2 == '\x02') &&
     (((iVar4 = FUN_00a1a840(param_1), iVar4 != 0 || (iVar4 = FUN_00a1a6d0(param_1), iVar4 != 0)) ||
      (iVar4 = FUN_00a1a780(param_1), iVar4 != 0)))) {
    iVar4 = *(int *)(iVar4 + 1000);
    in_ECX[0x193] = *(int *)(iVar4 + 0x68);
    in_ECX[0x194] = *(int *)(iVar4 + 0x6c);
    in_ECX[0x195] = *(int *)(iVar4 + 0x70);
    DVar5 = timeGetTime();
    in_ECX[0x196] = DVar5;
  }
  if ((char)in_ECX[0x109] == '\0') {
    iVar4 = *(int *)(in_ECX[0x4e] + 4);
    piVar1 = in_ECX + 0x296;
    sVar3 = FUN_0043d970();
    if (sVar3 == 1000) {
      bVar6 = *(int **)((int)in_ECX + iVar4 + 0x13c) == piVar1;
    }
    else if (sVar3 == 2000) {
      bVar6 = *(int **)((int)in_ECX + iVar4 + 0x140) == piVar1;
    }
    else {
      bVar6 = *(int **)((int)in_ECX + iVar4 + 0x144) == piVar1;
    }
    if (bVar6) {
      (**(code **)(*in_ECX + 0x5c))();
      return;
    }
    sVar3 = (**(code **)(*in_ECX + 0x1e4))();
    if (((sVar3 != 7) || (cVar2 = FUN_00876040(), cVar2 == '\0')) &&
       (cVar2 = FUN_00876040(), cVar2 == '\0')) {
      (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))(piVar1,1,1,0)
      ;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0088def0 : PUSH EBP
0088def1 : MOV EBP,ESP
0088def3 : PUSH EBX
0088def4 : MOV EBX,ECX
0088def6 : MOV ECX,dword ptr [0x00da93ec]
0088defc : TEST ECX,ECX
0088defe : JZ 0x0088df2f
0088df00 : MOV EAX,dword ptr [ECX + 0xac]
0088df06 : TEST EAX,EAX
0088df08 : JZ 0x0088dff5
0088df0e : CMP byte ptr [ECX + 0x377],0x0
0088df15 : JZ 0x0088e094
0088df1b : PUSH EAX
0088df1c : CALL 0x0086ea90
0088df21 : TEST AL,AL
0088df23 : JNZ 0x0088e094
0088df29 : MOV ECX,dword ptr [0x00da93ec]
0088df2f : MOV AL,byte ptr [EBP + 0x14]
0088df32 : MOV EDX,dword ptr [EBP + 0x10]
0088df35 : PUSH ESI
0088df36 : MOV ESI,dword ptr [EBP + 0x8]
0088df39 : MOV byte ptr [EBX + 0x630],AL
0088df3f : MOV AL,byte ptr [EBP + 0xc]
0088df42 : PUSH EDI
0088df43 : MOV byte ptr [EBX + 0x631],0x1
0088df4a : MOV dword ptr [EBX + 0x634],ESI
0088df50 : MOV byte ptr [EBX + 0x638],AL
0088df56 : MOV dword ptr [EBX + 0x63c],EDX
0088df5c : CMP AL,0x2
0088df5e : JNZ 0x0088dfb4
0088df60 : PUSH ESI
0088df61 : MOV EDI,ECX
0088df63 : CALL 0x00a1a840
0088df68 : TEST EAX,EAX
0088df6a : JNZ 0x0088df84
0088df6c : PUSH ESI
0088df6d : MOV ECX,EDI
0088df6f : CALL 0x00a1a6d0
0088df74 : TEST EAX,EAX
0088df76 : JNZ 0x0088df84
0088df78 : PUSH ESI
0088df79 : MOV ECX,EDI
0088df7b : CALL 0x00a1a780
0088df80 : TEST EAX,EAX
0088df82 : JZ 0x0088dfb4
0088df84 : MOV EAX,dword ptr [EAX + 0x3e8]
0088df8a : FLD float ptr [EAX + 0x68]
0088df8d : ADD EAX,0x68
0088df90 : FSTP float ptr [EBX + 0x64c]
0088df96 : FLD float ptr [EAX + 0x4]
0088df99 : FSTP float ptr [EBX + 0x650]
0088df9f : FLD float ptr [EAX + 0x8]
0088dfa2 : FSTP float ptr [EBX + 0x654]
0088dfa8 : CALL dword ptr [0x00b85598]
0088dfae : MOV dword ptr [EBX + 0x658],EAX
0088dfb4 : CMP byte ptr [EBX + 0x424],0x0
0088dfbb : JNZ 0x0088e092
0088dfc1 : MOV EAX,dword ptr [EBX + 0x138]
0088dfc7 : MOV ECX,dword ptr [EAX + 0x4]
0088dfca : MOV AX,word ptr [EBX + 0xa82]
0088dfd1 : LEA ESI,[EBX + 0xa58]
0088dfd7 : MOV dword ptr [EBP + 0x14],ESI
0088dfda : LEA EDI,[ECX + EBX*0x1 + 0x138]
0088dfe1 : CALL 0x0043d970
0088dfe6 : MOV EDX,0x3e8
0088dfeb : CMP AX,DX
0088dfee : JNZ 0x0088e007
0088dff0 : CMP dword ptr [EDI + 0x4],ESI
0088dff3 : JMP 0x0088e019
0088dff5 : CMP byte ptr [ECX + 0x377],0x0
0088dffc : JZ 0x0088e094
0088e002 : JMP 0x0088df2f
0088e007 : MOV ECX,0x7d0
0088e00c : CMP AX,CX
0088e00f : JNZ 0x0088e016
0088e011 : CMP dword ptr [EDI + 0x8],ESI
0088e014 : JMP 0x0088e019
0088e016 : CMP dword ptr [EDI + 0xc],ESI
0088e019 : MOV EDX,dword ptr [EBX]
0088e01b : SETZ AL
0088e01e : MOV ECX,EBX
0088e020 : TEST AL,AL
0088e022 : JZ 0x0088e030
0088e024 : MOV EAX,dword ptr [EDX + 0x5c]
0088e027 : CALL EAX
0088e029 : POP EDI
0088e02a : POP ESI
0088e02b : POP EBX
0088e02c : POP EBP
0088e02d : RET 0x10
0088e030 : MOV EAX,dword ptr [EDX + 0x1e4]
0088e036 : CALL EAX
0088e038 : CMP AX,0x7
0088e03c : MOV EAX,dword ptr [EBX + 0x138]
0088e042 : MOV ECX,dword ptr [EAX + 0x4]
0088e045 : LEA ESI,[EBX + 0x1158]
0088e04b : LEA EDI,[ECX + EBX*0x1 + 0x138]
0088e052 : JNZ 0x0088e063
0088e054 : CALL 0x00876040
0088e059 : TEST AL,AL
0088e05b : JNZ 0x0088e092
0088e05d : LEA ESI,[EBX + 0x1318]
0088e063 : CALL 0x00876040
0088e068 : TEST AL,AL
0088e06a : JNZ 0x0088e092
0088e06c : MOV EAX,dword ptr [EBX + 0x138]
0088e072 : MOV EDX,dword ptr [EAX + 0x4]
0088e075 : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0088e07c : MOV EAX,dword ptr [EAX + 0x10]
0088e07f : PUSH 0x0
0088e081 : PUSH 0x1
0088e083 : LEA ECX,[EDX + EBX*0x1 + 0x138]
0088e08a : MOV EDX,dword ptr [EBP + 0x14]
0088e08d : PUSH 0x1
0088e08f : PUSH EDX
0088e090 : CALL EAX
0088e092 : POP EDI
0088e093 : POP ESI
0088e094 : POP EBX
0088e095 : POP EBP
0088e096 : RET 0x10
