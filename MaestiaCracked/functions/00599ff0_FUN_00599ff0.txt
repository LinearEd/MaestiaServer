PROGRAM  : Maestia.exe
FUNCTION : FUN_00599ff0
ENTRY    : 00599ff0
BODY     : [[00599ff0, 0059a0bc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00599ff0(undefined4 *param_1,float param_2)

{
  byte bVar1;
  int *piVar2;
  float fVar3;
  int iVar4;
  int iVar5;
  int *in_ECX;
  uint uVar6;
  
  if (in_ECX[1] != 0) {
    iVar4 = FUN_00599350();
    if (iVar4 == in_ECX[1]) {
      iVar4 = iVar4 + -1;
    }
    piVar2 = *(int **)(*in_ECX + iVar4 * 4);
    fVar3 = (float)piVar2[4];
    if (fVar3 < param_2 != (fVar3 == param_2)) {
      if (*piVar2 < 0) {
        uVar6 = (uint)*(ushort *)((int)piVar2 + 0x16);
        iVar5 = (int)*(char *)((int)piVar2 + 0x1d);
      }
      else {
        uVar6 = piVar2[6];
        iVar5 = (int)(short)piVar2[10];
      }
      if (param_2 < (float)(int)(iVar5 + uVar6 + piVar2[4])) {
        bVar1 = *(byte *)(in_ECX + 0x1d);
        param_1[3] = 0;
        param_1[2] = iVar4;
        *param_1 = in_ECX;
        param_1[1] = 0;
        *(byte *)(param_1 + 4) = bVar1 >> 2 & 1;
        return;
      }
    }
  }
  param_1[3] = 0;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  *(undefined1 *)(param_1 + 4) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00599ff0 : PUSH ECX
00599ff1 : PUSH EBP
00599ff2 : PUSH ESI
00599ff3 : MOV ESI,ECX
00599ff5 : MOV EAX,dword ptr [ESI + 0x4]
00599ff8 : PUSH EDI
00599ff9 : TEST EAX,EAX
00599ffb : JBE 0x0059a0a0
0059a001 : PUSH 0x599190
0059a006 : LEA ECX,[ESP + 0x1c]
0059a00a : PUSH ECX
0059a00b : PUSH EAX
0059a00c : PUSH 0x0
0059a00e : PUSH ESI
0059a00f : CALL 0x00599350
0059a014 : MOV EDI,EAX
0059a016 : ADD ESP,0x14
0059a019 : CMP EDI,dword ptr [ESI + 0x4]
0059a01c : JNZ 0x0059a01f
0059a01e : DEC EDI
0059a01f : MOV EDX,dword ptr [ESI]
0059a021 : FLD float ptr [ESP + 0x18]
0059a025 : MOV ECX,dword ptr [EDX + EDI*0x4]
0059a028 : MOV EBP,dword ptr [ECX + 0x10]
0059a02b : MOV EDX,dword ptr [ECX]
0059a02d : MOV dword ptr [ESP + 0xc],EBP
0059a031 : FILD dword ptr [ESP + 0xc]
0059a035 : SHR EDX,0x1f
0059a038 : AND DL,0x1
0059a03b : FCOMP
0059a03d : FNSTSW AX
0059a03f : TEST AH,0x41
0059a042 : JP 0x0059a09e
0059a044 : PUSH EBX
0059a045 : TEST DL,DL
0059a047 : JZ 0x0059a04f
0059a049 : MOVZX EBX,word ptr [ECX + 0x16]
0059a04d : JMP 0x0059a052
0059a04f : MOV EBX,dword ptr [ECX + 0x18]
0059a052 : TEST DL,DL
0059a054 : JZ 0x0059a05c
0059a056 : MOVSX EAX,byte ptr [ECX + 0x1d]
0059a05a : JMP 0x0059a060
0059a05c : MOVSX EAX,word ptr [ECX + 0x28]
0059a060 : ADD EAX,EBX
0059a062 : ADD EAX,EBP
0059a064 : MOV dword ptr [ESP + 0x1c],EAX
0059a068 : FILD dword ptr [ESP + 0x1c]
0059a06c : POP EBX
0059a06d : FCOMPP
0059a06f : FNSTSW AX
0059a071 : TEST AH,0x41
0059a074 : JNZ 0x0059a0a0
0059a076 : MOV EAX,dword ptr [ESP + 0x14]
0059a07a : FLDZ
0059a07c : MOV CL,byte ptr [ESI + 0x74]
0059a07f : FSTP float ptr [EAX + 0xc]
0059a082 : MOV dword ptr [EAX + 0x8],EDI
0059a085 : POP EDI
0059a086 : SHR CL,0x2
0059a089 : MOV dword ptr [EAX],ESI
0059a08b : AND CL,0x1
0059a08e : POP ESI
0059a08f : MOV dword ptr [EAX + 0x4],0x0
0059a096 : MOV byte ptr [EAX + 0x10],CL
0059a099 : POP EBP
0059a09a : POP ECX
0059a09b : RET 0x8
0059a09e : FSTP ST0
0059a0a0 : MOV EAX,dword ptr [ESP + 0x14]
0059a0a4 : FLDZ
0059a0a6 : XOR ECX,ECX
0059a0a8 : FSTP float ptr [EAX + 0xc]
0059a0ab : POP EDI
0059a0ac : POP ESI
0059a0ad : MOV dword ptr [EAX],ECX
0059a0af : MOV dword ptr [EAX + 0x4],ECX
0059a0b2 : MOV dword ptr [EAX + 0x8],ECX
0059a0b5 : MOV byte ptr [EAX + 0x10],CL
0059a0b8 : POP EBP
0059a0b9 : POP ECX
0059a0ba : RET 0x8
