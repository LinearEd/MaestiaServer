PROGRAM  : Maestia.exe
FUNCTION : FUN_00481c90
ENTRY    : 00481c90
BODY     : [[00481c90, 00482016]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00481c90(undefined4 param_1)

{
  int iVar1;
  int iVar2;
  char cVar3;
  uint uVar4;
  int in_ECX;
  int in_stack_00000014;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7f6a8;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*(char *)(in_ECX + 8) == '\0') {
    return;
  }
  if (*(int *)(in_ECX + 0x1a4) == 0) {
    return;
  }
  if (*(int *)(in_ECX + 0x1a8) == 0) {
    return;
  }
  if (*(int *)(in_ECX + 0x1b4) == 0) {
    return;
  }
  ExceptionList = &local_10;
  FUN_006ef280(0xd2e);
  local_8 = 0;
  iVar1 = *(int *)(in_ECX + 0x300);
  iVar2 = *(int *)(in_ECX + 0x1ac);
  if ((*(int *)(in_ECX + 0x210) < 3) && (*(char *)(in_ECX + 0xf9) == '\0')) {
    if ((iVar2 == 1) || (iVar2 == 2)) {
      if (iVar1 == 2) {
        if ((*(int *)(in_ECX + 0x330) == 0) ||
           (*(float *)(in_ECX + 0x328) + *(float *)(in_ECX + 0x324) < 0.02)) goto LAB_00481ff4;
      }
      else if ((iVar1 == 1) && (*(byte *)(in_ECX + 0x30b) < 5)) goto LAB_00481ff4;
    }
    else if (iVar2 == 3) {
      if (*(int *)(in_ECX + 0x1a4) != 0) {
        uVar7 = 0;
LAB_00481d64:
        uVar6 = *(undefined4 *)(in_ECX + 0x328);
        uVar5 = *(undefined4 *)(in_ECX + 0x324);
LAB_00481d7f:
        cVar3 = FUN_00788160(param_1,in_stack_00000014,uVar5,uVar6,uVar7);
        if (cVar3 != '\0') goto LAB_00481ff4;
      }
    }
    else if ((iVar2 == 4) && (*(int *)(in_ECX + 0x304) < 3)) {
      if (*(int *)(in_ECX + 0x330) == 0) {
        if (*(int *)(in_ECX + 0x1a4) != 0) {
          uVar6 = *(undefined4 *)(in_ECX + 0x328);
          uVar7 = 0;
          uVar5 = *(undefined4 *)(in_ECX + 0x324);
          goto LAB_00481d7f;
        }
      }
      else if (*(int *)(in_ECX + 0x1a4) != 0) {
        uVar7 = 1;
        goto LAB_00481d64;
      }
    }
  }
  if (iVar1 == 3) {
    if (iVar2 == 3) {
      if (*(int *)(in_ECX + 0x18) != 3) {
        *(undefined4 *)(in_ECX + 0x18) = 3;
        (**(code **)(**(int **)(in_ECX + 0xf0) + 0x15c))
                  (*(int **)(in_ECX + 0xf0),*(undefined4 *)(in_ECX + 0x38));
      }
      if (*(int *)(in_ECX + 0x1c) != 3) {
        *(undefined4 *)(in_ECX + 0x1c) = 3;
        uVar7 = *(undefined4 *)(in_ECX + 0x4c);
        goto LAB_00481f11;
      }
    }
    else if (iVar2 == 4) {
      if (*(int *)(in_ECX + 0x18) != 4) {
        *(undefined4 *)(in_ECX + 0x18) = 4;
        (**(code **)(**(int **)(in_ECX + 0xf0) + 0x15c))
                  (*(int **)(in_ECX + 0xf0),*(undefined4 *)(in_ECX + 0x3c));
      }
      if (*(int *)(in_ECX + 0x304) == 3) {
        if (*(int *)(in_ECX + 0x1c) != 5) {
          *(undefined4 *)(in_ECX + 0x1c) = 5;
          uVar7 = *(undefined4 *)(in_ECX + 0x54);
          goto LAB_00481f11;
        }
      }
      else if (*(int *)(in_ECX + 0x1c) != 4) {
        *(undefined4 *)(in_ECX + 0x1c) = 4;
        uVar7 = *(undefined4 *)(in_ECX + 0x50);
LAB_00481f11:
        (**(code **)(**(int **)(in_ECX + 0xf0) + 0x170))(*(int **)(in_ECX + 0xf0),uVar7);
      }
    }
  }
  else {
    if (*(int *)(in_ECX + 0x18) != 1) {
      *(undefined4 *)(in_ECX + 0x18) = 1;
      (**(code **)(**(int **)(in_ECX + 0xf0) + 0x15c))
                (*(int **)(in_ECX + 0xf0),*(undefined4 *)(in_ECX + 0x30),uVar4);
    }
    if (*(int *)(in_ECX + 0x1c) != 1) {
      *(undefined4 *)(in_ECX + 0x1c) = 1;
      uVar7 = *(undefined4 *)(in_ECX + 0x44);
      goto LAB_00481f11;
    }
  }
  FUN_00480480(in_ECX + 0x300);
  FUN_00481930();
  cVar3 = FUN_00788030();
  if (cVar3 != '\0') {
    FUN_00789150();
    *(int *)(in_ECX + 700) = *(int *)(in_ECX + 700) + in_stack_00000014;
    *(int *)(in_ECX + 0x2c4) = *(int *)(in_ECX + 0x2c4) + 1;
    *(int *)(in_ECX + 0x2f0) = *(int *)(in_ECX + 0x2f0) + 1;
    *(int *)(in_ECX + 0x2f8) = *(int *)(in_ECX + 0x2f8) + in_stack_00000014;
    if (((*(char *)(in_ECX + 0x10) == '\0') &&
        (((*(int *)(in_ECX + 0x300) == 2 || (*(int *)(in_ECX + 0x300) == 3)) &&
         ((&PTR_s_vs_1_1_dcl_position_v0_dcl_color_00d72824)[*(int *)(in_ECX + 0x20) * 3] !=
          (undefined *)0x0)))) && (*(char *)(in_ECX + 0x32c) != '\0')) {
      FUN_00480610();
      FUN_00789150();
      *(int *)(in_ECX + 700) = *(int *)(in_ECX + 700) + in_stack_00000014;
      *(int *)(in_ECX + 0x2c4) = *(int *)(in_ECX + 0x2c4) + 1;
      *(int *)(in_ECX + 0x2f0) = *(int *)(in_ECX + 0x2f0) + 1;
      *(int *)(in_ECX + 0x2f8) = *(int *)(in_ECX + 0x2f8) + in_stack_00000014;
    }
  }
LAB_00481ff4:
  local_8 = 0xffffffff;
  FUN_006ef180();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00481c90 : PUSH EBP
00481c91 : MOV EBP,ESP
00481c93 : PUSH -0x1
00481c95 : PUSH 0xb7f6a8
00481c9a : MOV EAX,FS:[0x0]
00481ca0 : PUSH EAX
00481ca1 : SUB ESP,0x2c
00481ca4 : PUSH EBX
00481ca5 : PUSH ESI
00481ca6 : PUSH EDI
00481ca7 : MOV EAX,[0x00d66fa0]
00481cac : XOR EAX,EBP
00481cae : PUSH EAX
00481caf : LEA EAX,[EBP + -0xc]
00481cb2 : MOV FS:[0x0],EAX
00481cb8 : MOV EDI,ECX
00481cba : CMP byte ptr [EDI + 0x8],0x0
00481cbe : JZ 0x00482003
00481cc4 : CMP dword ptr [EDI + 0x1a4],0x0
00481ccb : JZ 0x00482003
00481cd1 : CMP dword ptr [EDI + 0x1a8],0x0
00481cd8 : JZ 0x00482003
00481cde : CMP dword ptr [EDI + 0x1b4],0x0
00481ce5 : JZ 0x00482003
00481ceb : MOV EAX,[0x017251ac]
00481cf0 : PUSH 0xd2e
00481cf5 : ADD EAX,0x420
00481cfa : MOV ECX,0xcd758c
00481cff : LEA ESI,[EBP + -0x24]
00481d02 : CALL 0x006ef280
00481d07 : MOV dword ptr [EBP + -0x4],0x0
00481d0e : MOV EAX,dword ptr [EDI + 0x300]
00481d14 : MOV ESI,dword ptr [EDI + 0x1ac]
00481d1a : MOV EBX,dword ptr [EBP + 0x18]
00481d1d : MOV ECX,0x3
00481d22 : CMP EAX,ECX
00481d24 : SETZ byte ptr [EBP + -0xd]
00481d28 : CMP dword ptr [EDI + 0x210],ECX
00481d2e : JGE 0x00481d94
00481d30 : CMP byte ptr [EDI + 0xf9],0x0
00481d37 : JNZ 0x00481d94
00481d39 : CMP ESI,0x1
00481d3c : JZ 0x00481e31
00481d42 : CMP ESI,0x2
00481d45 : JZ 0x00481e31
00481d4b : CMP ESI,ECX
00481d4d : JNZ 0x00481ddc
00481d53 : CMP dword ptr [EDI + 0x1a4],0x0
00481d5a : LEA EAX,[EDI + 0x19c]
00481d60 : JZ 0x00481d94
00481d62 : PUSH 0x0
00481d64 : FLD float ptr [EDI + 0x328]
00481d6a : MOV ECX,dword ptr [EBP + 0x8]
00481d6d : SUB ESP,0x8
00481d70 : FSTP float ptr [ESP + 0x4]
00481d74 : FLD float ptr [EDI + 0x324]
00481d7a : FSTP float ptr [ESP]
00481d7d : PUSH EBX
00481d7e : PUSH ECX
00481d7f : MOV EDX,dword ptr [EBP + 0x14]
00481d82 : CALL 0x00788160
00481d87 : TEST AL,AL
00481d89 : JNZ 0x00481ff4
00481d8f : MOV ECX,0x3
00481d94 : CMP byte ptr [EBP + -0xd],0x0
00481d98 : JZ 0x00481edf
00481d9e : CMP ESI,ECX
00481da0 : JNZ 0x00481e84
00481da6 : CMP dword ptr [EDI + 0x18],ECX
00481da9 : JZ 0x00481dc8
00481dab : MOV EAX,dword ptr [EDI + 0xf0]
00481db1 : MOV dword ptr [EDI + 0x18],ECX
00481db4 : MOV ECX,dword ptr [EDI + 0x38]
00481db7 : MOV EDX,dword ptr [EAX]
00481db9 : PUSH ECX
00481dba : PUSH EAX
00481dbb : MOV EAX,dword ptr [EDX + 0x15c]
00481dc1 : CALL EAX
00481dc3 : MOV ECX,0x3
00481dc8 : CMP dword ptr [EDI + 0x1c],ECX
00481dcb : JZ 0x00481f23
00481dd1 : MOV dword ptr [EDI + 0x1c],ECX
00481dd4 : MOV ECX,dword ptr [EDI + 0x4c]
00481dd7 : JMP 0x00481f11
00481ddc : CMP ESI,0x4
00481ddf : JNZ 0x00481d94
00481de1 : CMP dword ptr [EDI + 0x304],ECX
00481de7 : JGE 0x00481d94
00481de9 : CMP dword ptr [EDI + 0x330],0x0
00481df0 : LEA EAX,[EDI + 0x19c]
00481df6 : JNZ 0x00481e20
00481df8 : CMP dword ptr [EAX + 0x8],0x0
00481dfc : JZ 0x00481d94
00481dfe : FLD float ptr [EDI + 0x328]
00481e04 : MOV EDX,dword ptr [EBP + 0x8]
00481e07 : PUSH 0x0
00481e09 : SUB ESP,0x8
00481e0c : FSTP float ptr [ESP + 0x4]
00481e10 : FLD float ptr [EDI + 0x324]
00481e16 : FSTP float ptr [ESP]
00481e19 : PUSH EBX
00481e1a : PUSH EDX
00481e1b : JMP 0x00481d7f
00481e20 : CMP dword ptr [EAX + 0x8],0x0
00481e24 : JZ 0x00481d94
00481e2a : PUSH 0x1
00481e2c : JMP 0x00481d64
00481e31 : CMP EAX,0x2
00481e34 : JNZ 0x00481e69
00481e36 : CMP dword ptr [EDI + 0x330],0x0
00481e3d : JZ 0x00481ff4
00481e43 : MOVSS XMM0,dword ptr [EDI + 0x328]
00481e4b : ADDSS XMM0,dword ptr [EDI + 0x324]
00481e53 : MOVSS XMM1,dword ptr [0x00cdf17c]
00481e5b : COMISS XMM1,XMM0
00481e5e : JBE 0x00481d94
00481e64 : JMP 0x00481ff4
00481e69 : CMP EAX,0x1
00481e6c : JNZ 0x00481d94
00481e72 : CMP byte ptr [EDI + 0x30b],0x5
00481e79 : JNC 0x00481d94
00481e7f : JMP 0x00481ff4
00481e84 : MOV EAX,0x4
00481e89 : CMP ESI,EAX
00481e8b : JNZ 0x00481f23
00481e91 : CMP dword ptr [EDI + 0x18],EAX
00481e94 : JZ 0x00481eb3
00481e96 : MOV dword ptr [EDI + 0x18],EAX
00481e99 : MOV EAX,dword ptr [EDI + 0xf0]
00481e9f : MOV ECX,dword ptr [EDI + 0x3c]
00481ea2 : MOV EDX,dword ptr [EAX]
00481ea4 : PUSH ECX
00481ea5 : PUSH EAX
00481ea6 : MOV EAX,dword ptr [EDX + 0x15c]
00481eac : CALL EAX
00481eae : MOV ECX,0x3
00481eb3 : CMP dword ptr [EDI + 0x304],ECX
00481eb9 : JZ 0x00481ecd
00481ebb : MOV EAX,0x4
00481ec0 : CMP dword ptr [EDI + 0x1c],EAX
00481ec3 : JZ 0x00481f23
00481ec5 : MOV dword ptr [EDI + 0x1c],EAX
00481ec8 : MOV ECX,dword ptr [EDI + 0x50]
00481ecb : JMP 0x00481f11
00481ecd : MOV EAX,0x5
00481ed2 : CMP dword ptr [EDI + 0x1c],EAX
00481ed5 : JZ 0x00481f23
00481ed7 : MOV dword ptr [EDI + 0x1c],EAX
00481eda : MOV ECX,dword ptr [EDI + 0x54]
00481edd : JMP 0x00481f11
00481edf : MOV EAX,0x1
00481ee4 : CMP dword ptr [EDI + 0x18],EAX
00481ee7 : JZ 0x00481f01
00481ee9 : MOV dword ptr [EDI + 0x18],EAX
00481eec : MOV EAX,dword ptr [EDI + 0xf0]
00481ef2 : MOV ECX,dword ptr [EDI + 0x30]
00481ef5 : MOV EDX,dword ptr [EAX]
00481ef7 : PUSH ECX
00481ef8 : PUSH EAX
00481ef9 : MOV EAX,dword ptr [EDX + 0x15c]
00481eff : CALL EAX
00481f01 : MOV EAX,0x1
00481f06 : CMP dword ptr [EDI + 0x1c],EAX
00481f09 : JZ 0x00481f23
00481f0b : MOV dword ptr [EDI + 0x1c],EAX
00481f0e : MOV ECX,dword ptr [EDI + 0x44]
00481f11 : MOV EAX,dword ptr [EDI + 0xf0]
00481f17 : MOV EDX,dword ptr [EAX]
00481f19 : PUSH ECX
00481f1a : PUSH EAX
00481f1b : MOV EAX,dword ptr [EDX + 0x170]
00481f21 : CALL EAX
00481f23 : LEA EAX,[EDI + 0x300]
00481f29 : PUSH EAX
00481f2a : MOV EAX,EDI
00481f2c : CALL 0x00480480
00481f31 : LEA EAX,[EDI + 0x144]
00481f37 : MOV ECX,EDI
00481f39 : CALL 0x00481930
00481f3e : MOV ECX,dword ptr [EBP + 0x8]
00481f41 : MOV EAX,dword ptr [EBP + 0x10]
00481f44 : MOV EDX,dword ptr [EBP + 0xc]
00481f47 : MOV dword ptr [EBP + -0x38],ECX
00481f4a : MOV ECX,dword ptr [EBP + 0x14]
00481f4d : MOV dword ptr [EBP + -0x30],EAX
00481f50 : MOV dword ptr [EBP + -0x2c],ECX
00481f53 : LEA ESI,[EDI + 0x19c]
00481f59 : LEA EAX,[EBP + -0x38]
00481f5c : MOV ECX,ESI
00481f5e : MOV dword ptr [EBP + -0x34],EDX
00481f61 : MOV dword ptr [EBP + -0x28],EBX
00481f64 : CALL 0x00788030
00481f69 : TEST AL,AL
00481f6b : JZ 0x00481ff4
00481f71 : MOV EAX,ESI
00481f73 : CALL 0x00789150
00481f78 : ADD dword ptr [EDI + 0x2bc],EBX
00481f7e : MOV EAX,0x1
00481f83 : ADD dword ptr [EDI + 0x2c4],EAX
00481f89 : ADD dword ptr [EDI + 0x2f0],EAX
00481f8f : ADD dword ptr [EDI + 0x2f8],EBX
00481f95 : CMP byte ptr [EDI + 0x10],0x0
00481f99 : JNZ 0x00481ff4
00481f9b : MOV EAX,dword ptr [EDI + 0x300]
00481fa1 : LEA EDX,[EDI + 0x300]
00481fa7 : CMP EAX,0x2
00481faa : JZ 0x00481fb1
00481fac : CMP EAX,0x3
00481faf : JNZ 0x00481ff4
00481fb1 : MOV EAX,dword ptr [EDI + 0x20]
00481fb4 : LEA EAX,[EAX + EAX*0x2]
00481fb7 : CMP dword ptr [EAX*0x4 + 0xd72824],0x0
00481fbf : JZ 0x00481ff4
00481fc1 : CMP byte ptr [EDX + 0x2c],0x0
00481fc5 : JZ 0x00481ff4
00481fc7 : MOV ECX,EDI
00481fc9 : MOV EAX,EDX
00481fcb : CALL 0x00480610
00481fd0 : MOV EAX,ESI
00481fd2 : CALL 0x00789150
00481fd7 : ADD dword ptr [EDI + 0x2bc],EBX
00481fdd : MOV EAX,0x1
00481fe2 : ADD dword ptr [EDI + 0x2c4],EAX
00481fe8 : ADD dword ptr [EDI + 0x2f0],EAX
00481fee : ADD dword ptr [EDI + 0x2f8],EBX
00481ff4 : MOV dword ptr [EBP + -0x4],0xffffffff
00481ffb : LEA ESI,[EBP + -0x24]
00481ffe : CALL 0x006ef180
00482003 : MOV ECX,dword ptr [EBP + -0xc]
00482006 : MOV dword ptr FS:[0x0],ECX
0048200d : POP ECX
0048200e : POP EDI
0048200f : POP ESI
00482010 : POP EBX
00482011 : MOV ESP,EBP
00482013 : POP EBP
00482014 : RET 0x14
