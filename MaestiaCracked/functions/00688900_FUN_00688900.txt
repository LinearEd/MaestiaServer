PROGRAM  : Maestia.exe
FUNCTION : FUN_00688900
ENTRY    : 00688900
BODY     : [[00688900, 006889ab]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00688900(int *param_1,uint param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int local_4;
  
  local_4 = 0;
  if (param_1[5] != 0) {
    iVar1 = param_1[7];
    iVar2 = FUN_00687ee0(iVar1,param_2,&local_4);
    iVar4 = local_4;
    *param_1 = iVar2;
    if (local_4 == 0) {
      uVar3 = (*(code *)param_1[5])(param_1,param_1[2],iVar2,param_2);
      if (uVar3 < param_2) {
        FUN_00687f30(iVar1,*param_1);
        *param_1 = 0;
        iVar4 = 0x55;
      }
      param_1[8] = *param_1;
      param_1[2] = param_1[2] + uVar3;
      param_1[9] = *param_1 + param_2;
    }
    return iVar4;
  }
  uVar3 = param_1[2];
  if (uVar3 < (uint)param_1[1]) {
    if (uVar3 + param_2 <= (uint)param_1[1]) {
      param_1[8] = uVar3 + *param_1;
      param_1[9] = uVar3 + *param_1 + param_2;
      param_1[2] = uVar3 + param_2;
      return 0;
    }
  }
  return 0x55;
}



============================================================
DISASSEMBLY
============================================================
00688900 : PUSH ECX
00688901 : PUSH EBX
00688902 : PUSH ESI
00688903 : MOV ESI,dword ptr [ESP + 0x10]
00688907 : XOR EAX,EAX
00688909 : PUSH EDI
0068890a : MOV dword ptr [ESP + 0xc],EAX
0068890e : CMP dword ptr [ESI + 0x14],EAX
00688911 : JZ 0x00688979
00688913 : MOV EDI,dword ptr [ESP + 0x18]
00688917 : PUSH EBP
00688918 : MOV EBP,dword ptr [ESI + 0x1c]
0068891b : LEA EAX,[ESP + 0x10]
0068891f : PUSH EAX
00688920 : PUSH EDI
00688921 : PUSH EBP
00688922 : CALL 0x00687ee0
00688927 : MOV EBX,dword ptr [ESP + 0x1c]
0068892b : ADD ESP,0xc
0068892e : MOV dword ptr [ESI],EAX
00688930 : TEST EBX,EBX
00688932 : JNZ 0x00688971
00688934 : MOV ECX,dword ptr [ESI + 0x8]
00688937 : MOV EDX,dword ptr [ESI + 0x14]
0068893a : PUSH EDI
0068893b : PUSH EAX
0068893c : PUSH ECX
0068893d : PUSH ESI
0068893e : CALL EDX
00688940 : MOV ECX,EAX
00688942 : ADD ESP,0x10
00688945 : MOV dword ptr [ESP + 0x18],ECX
00688949 : CMP ECX,EDI
0068894b : JNC 0x00688964
0068894d : MOV EAX,dword ptr [ESI]
0068894f : PUSH EAX
00688950 : PUSH EBP
00688951 : CALL 0x00687f30
00688956 : MOV ECX,dword ptr [ESP + 0x20]
0068895a : MOV dword ptr [ESI],EBX
0068895c : ADD ESP,0x8
0068895f : MOV EBX,0x55
00688964 : MOV EAX,dword ptr [ESI]
00688966 : MOV dword ptr [ESI + 0x20],EAX
00688969 : ADD EAX,EDI
0068896b : ADD dword ptr [ESI + 0x8],ECX
0068896e : MOV dword ptr [ESI + 0x24],EAX
00688971 : POP EBP
00688972 : POP EDI
00688973 : POP ESI
00688974 : MOV EAX,EBX
00688976 : POP EBX
00688977 : POP ECX
00688978 : RET
00688979 : MOV ECX,dword ptr [ESI + 0x8]
0068897c : MOV EBX,dword ptr [ESI + 0x4]
0068897f : CMP ECX,EBX
00688981 : JNC 0x006889a2
00688983 : MOV EDI,dword ptr [ESP + 0x18]
00688987 : LEA EDX,[ECX + EDI*0x1]
0068898a : CMP EDX,EBX
0068898c : JA 0x006889a2
0068898e : MOV EBX,dword ptr [ESI]
00688990 : ADD ECX,EBX
00688992 : MOV dword ptr [ESI + 0x20],ECX
00688995 : ADD ECX,EDI
00688997 : POP EDI
00688998 : MOV dword ptr [ESI + 0x24],ECX
0068899b : MOV dword ptr [ESI + 0x8],EDX
0068899e : POP ESI
0068899f : POP EBX
006889a0 : POP ECX
006889a1 : RET
006889a2 : POP EDI
006889a3 : POP ESI
006889a4 : MOV EAX,0x55
006889a9 : POP EBX
006889aa : POP ECX
006889ab : RET
