PROGRAM  : Maestia.exe
FUNCTION : FUN_0078d6b0
ENTRY    : 0078d6b0
BODY     : [[0078d6b0, 0078d93a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0078d6b0(void)

{
  float *pfVar1;
  int *piVar2;
  int iVar3;
  int unaff_ESI;
  float fVar4;
  int local_38;
  int local_34;
  int local_30;
  int local_2c;
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  piVar2 = *(int **)(unaff_ESI + 0x2c);
  if (piVar2 == (int *)0x0) {
    *(undefined4 *)(unaff_ESI + 0xb8) = *(undefined4 *)(unaff_ESI + 0x68);
    *(undefined4 *)(unaff_ESI + 0xbc) = *(undefined4 *)(unaff_ESI + 0x6c);
    *(undefined4 *)(unaff_ESI + 0xc0) = *(undefined4 *)(unaff_ESI + 0x70);
    *(undefined8 *)(unaff_ESI + 0xc4) = *(undefined8 *)(unaff_ESI + 0x74);
    *(undefined8 *)(unaff_ESI + 0xcc) = *(undefined8 *)(unaff_ESI + 0x7c);
    *(undefined4 *)(unaff_ESI + 0xd4) = *(undefined4 *)(unaff_ESI + 0x84);
    *(undefined4 *)(unaff_ESI + 0xd8) = *(undefined4 *)(unaff_ESI + 0x88);
    *(undefined4 *)(unaff_ESI + 0xdc) = *(undefined4 *)(unaff_ESI + 0x8c);
  }
  else {
    if ((*(char *)((int)piVar2 + 0x5d) != '\0') || (*(char *)((int)piVar2 + 0x13d) != '\0')) {
      (**(code **)(*piVar2 + 0x14))();
    }
    local_34 = piVar2[0x32];
    local_30 = piVar2[0x33];
    local_2c = piVar2[0x34];
    local_38 = piVar2[0x31];
    piVar2 = *(int **)(unaff_ESI + 0x2c);
    if (*(char *)((int)piVar2 + 0x5d) != '\0') {
      (**(code **)(*piVar2 + 0x14))();
    }
    local_1c = (float)piVar2[0x2e];
    iVar3 = *(int *)(unaff_ESI + 0x2c);
    local_24 = *(float *)(unaff_ESI + 0x94) + *(float *)(unaff_ESI + 0x6c);
    local_20 = *(float *)(unaff_ESI + 0x98) + *(float *)(unaff_ESI + 0x70);
    local_18 = (float)piVar2[0x2f];
    local_14 = (float)piVar2[0x30];
    local_10 = *(float *)(iVar3 + 0xd4);
    local_c = *(float *)(iVar3 + 0xd8);
    local_8 = *(float *)(iVar3 + 0xdc);
    local_28 = *(float *)(unaff_ESI + 0x90) + *(float *)(unaff_ESI + 0x68);
    if (*(char *)(unaff_ESI + 0x65) == '\0') {
      *(undefined8 *)(unaff_ESI + 0xc4) = *(undefined8 *)(unaff_ESI + 0x74);
      *(undefined8 *)(unaff_ESI + 0xcc) = *(undefined8 *)(unaff_ESI + 0x7c);
    }
    else {
      D3DXQuaternionMultiply(unaff_ESI + 0xc4,(undefined8 *)(unaff_ESI + 0x74),&local_38);
    }
    pfVar1 = (float *)(unaff_ESI + 0xb8);
    FUN_0043d620(pfVar1);
    *pfVar1 = *pfVar1 * local_10;
    *(float *)(unaff_ESI + 0xbc) = *(float *)(unaff_ESI + 0xbc) * local_c;
    *(float *)(unaff_ESI + 0xc0) = *(float *)(unaff_ESI + 0xc0) * local_8;
    *pfVar1 = *pfVar1 + local_1c;
    *(float *)(unaff_ESI + 0xbc) = local_18 + *(float *)(unaff_ESI + 0xbc);
    *(float *)(unaff_ESI + 0xc0) = local_14 + *(float *)(unaff_ESI + 0xc0);
    fVar4 = *(float *)(unaff_ESI + 0x9c) * *(float *)(unaff_ESI + 0x84);
    *(float *)(unaff_ESI + 0xd4) = fVar4;
    *(float *)(unaff_ESI + 0xd8) = *(float *)(unaff_ESI + 0xa0) * *(float *)(unaff_ESI + 0x88);
    *(float *)(unaff_ESI + 0xdc) = *(float *)(unaff_ESI + 0xa4) * *(float *)(unaff_ESI + 0x8c);
    if (*(char *)(unaff_ESI + 100) != '\0') {
      *(float *)(unaff_ESI + 0xd4) = fVar4 * local_10;
      *(float *)(unaff_ESI + 0xd8) = *(float *)(unaff_ESI + 0xd8) * local_c;
      *(float *)(unaff_ESI + 0xdc) = *(float *)(unaff_ESI + 0xdc) * local_8;
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0078d6b0 : PUSH EBP
0078d6b1 : MOV EBP,ESP
0078d6b3 : SUB ESP,0x34
0078d6b6 : PUSH EDI
0078d6b7 : MOV EDI,dword ptr [ESI + 0x2c]
0078d6ba : TEST EDI,EDI
0078d6bc : JZ 0x0078d8dd
0078d6c2 : CMP byte ptr [EDI + 0x5d],0x0
0078d6c6 : JNZ 0x0078d6d1
0078d6c8 : CMP byte ptr [EDI + 0x13d],0x0
0078d6cf : JZ 0x0078d6da
0078d6d1 : MOV EAX,dword ptr [EDI]
0078d6d3 : MOV EDX,dword ptr [EAX + 0x14]
0078d6d6 : MOV ECX,EDI
0078d6d8 : CALL EDX
0078d6da : MOVSS XMM0,dword ptr [EDI + 0xc8]
0078d6e2 : MOVSS XMM1,dword ptr [EDI + 0xcc]
0078d6ea : MOVSS XMM2,dword ptr [EDI + 0xd0]
0078d6f2 : MOVSS XMM3,dword ptr [EDI + 0xc4]
0078d6fa : MOV EDI,dword ptr [ESI + 0x2c]
0078d6fd : MOVSS dword ptr [EBP + -0x34],XMM3
0078d702 : MOVSS dword ptr [EBP + -0x30],XMM0
0078d707 : MOVSS dword ptr [EBP + -0x2c],XMM1
0078d70c : MOVSS dword ptr [EBP + -0x28],XMM2
0078d711 : CMP byte ptr [EDI + 0x5d],0x0
0078d715 : JZ 0x0078d720
0078d717 : MOV EAX,dword ptr [EDI]
0078d719 : MOV EDX,dword ptr [EAX + 0x14]
0078d71c : MOV ECX,EDI
0078d71e : CALL EDX
0078d720 : MOVSS XMM0,dword ptr [EDI + 0xb8]
0078d728 : MOV EAX,dword ptr [ESI + 0x2c]
0078d72b : MOVSS XMM1,dword ptr [ESI + 0x94]
0078d733 : MOVSS XMM2,dword ptr [ESI + 0x98]
0078d73b : ADDSS XMM1,dword ptr [ESI + 0x6c]
0078d740 : ADDSS XMM2,dword ptr [ESI + 0x70]
0078d745 : MOVSS dword ptr [EBP + -0x18],XMM0
0078d74a : MOVSS XMM0,dword ptr [EDI + 0xbc]
0078d752 : MOVSS dword ptr [EBP + -0x14],XMM0
0078d757 : MOVSS XMM0,dword ptr [EDI + 0xc0]
0078d75f : MOVSS dword ptr [EBP + -0x10],XMM0
0078d764 : MOVSS XMM0,dword ptr [EAX + 0xd4]
0078d76c : ADD EAX,0xd4
0078d771 : CMP byte ptr [ESI + 0x65],0x0
0078d775 : MOVSS dword ptr [EBP + -0xc],XMM0
0078d77a : MOVSS XMM0,dword ptr [EAX + 0x4]
0078d77f : MOVSS dword ptr [EBP + -0x8],XMM0
0078d784 : MOVSS XMM0,dword ptr [EAX + 0x8]
0078d789 : MOVSS dword ptr [EBP + -0x4],XMM0
0078d78e : MOVSS XMM0,dword ptr [ESI + 0x90]
0078d796 : ADDSS XMM0,dword ptr [ESI + 0x68]
0078d79b : MOVSS dword ptr [EBP + -0x24],XMM0
0078d7a0 : MOVSS dword ptr [EBP + -0x20],XMM1
0078d7a5 : MOVSS dword ptr [EBP + -0x1c],XMM2
0078d7aa : LEA ECX,[ESI + 0x74]
0078d7ad : JZ 0x0078d7c5
0078d7af : LEA EAX,[EBP + -0x34]
0078d7b2 : PUSH EAX
0078d7b3 : PUSH ECX
0078d7b4 : LEA EDX,[ESI + 0xc4]
0078d7ba : PUSH EDX
0078d7bb : CALL 0x004ff716
0078d7c0 : LEA ECX,[EBP + -0x34]
0078d7c3 : JMP 0x0078d7de
0078d7c5 : MOVQ XMM0,qword ptr [ECX]
0078d7c9 : MOVQ qword ptr [ESI + 0xc4],XMM0
0078d7d1 : MOVQ XMM0,qword ptr [ECX + 0x8]
0078d7d6 : MOVQ qword ptr [ESI + 0xcc],XMM0
0078d7de : LEA EDI,[ESI + 0xb8]
0078d7e4 : PUSH EDI
0078d7e5 : LEA EAX,[EBP + -0x24]
0078d7e8 : CALL 0x0043d620
0078d7ed : MOVSS XMM0,dword ptr [EDI]
0078d7f1 : MOVSS XMM3,dword ptr [EBP + -0xc]
0078d7f6 : MOVSS XMM4,dword ptr [EBP + -0x8]
0078d7fb : MOVSS XMM5,dword ptr [EBP + -0x4]
0078d800 : MULSS XMM0,XMM3
0078d804 : MOVSS dword ptr [EDI],XMM0
0078d808 : MOVSS XMM0,dword ptr [EDI + 0x4]
0078d80d : MULSS XMM0,XMM4
0078d811 : MOVSS dword ptr [EDI + 0x4],XMM0
0078d816 : MOVSS XMM0,dword ptr [EDI + 0x8]
0078d81b : MULSS XMM0,XMM5
0078d81f : MOVSS dword ptr [EDI + 0x8],XMM0
0078d824 : MOVSS XMM0,dword ptr [EDI]
0078d828 : ADDSS XMM0,dword ptr [EBP + -0x18]
0078d82d : MOVSS dword ptr [EDI],XMM0
0078d831 : MOVSS XMM0,dword ptr [EBP + -0x14]
0078d836 : ADDSS XMM0,dword ptr [EDI + 0x4]
0078d83b : MOVSS dword ptr [EDI + 0x4],XMM0
0078d840 : MOVSS XMM0,dword ptr [EBP + -0x10]
0078d845 : ADDSS XMM0,dword ptr [EDI + 0x8]
0078d84a : MOVSS dword ptr [EDI + 0x8],XMM0
0078d84f : MOVSS XMM0,dword ptr [ESI + 0x9c]
0078d857 : MOVSS XMM1,dword ptr [ESI + 0xa0]
0078d85f : MOVSS XMM2,dword ptr [ESI + 0xa4]
0078d867 : MULSS XMM0,dword ptr [ESI + 0x84]
0078d86f : MULSS XMM1,dword ptr [ESI + 0x88]
0078d877 : MULSS XMM2,dword ptr [ESI + 0x8c]
0078d87f : ADD ESP,0x4
0078d882 : MOVSS dword ptr [ESI + 0xd4],XMM0
0078d88a : MOVSS dword ptr [ESI + 0xd8],XMM1
0078d892 : MOVSS dword ptr [ESI + 0xdc],XMM2
0078d89a : CMP byte ptr [ESI + 0x64],0x0
0078d89e : JZ 0x0078d936
0078d8a4 : MULSS XMM0,XMM3
0078d8a8 : MOVSS dword ptr [ESI + 0xd4],XMM0
0078d8b0 : MOVSS XMM0,dword ptr [ESI + 0xd8]
0078d8b8 : MULSS XMM0,XMM4
0078d8bc : MOVSS dword ptr [ESI + 0xd8],XMM0
0078d8c4 : MOVSS XMM0,dword ptr [ESI + 0xdc]
0078d8cc : MULSS XMM0,XMM5
0078d8d0 : MOVSS dword ptr [ESI + 0xdc],XMM0
0078d8d8 : POP EDI
0078d8d9 : MOV ESP,EBP
0078d8db : POP EBP
0078d8dc : RET
0078d8dd : FLD float ptr [ESI + 0x68]
0078d8e0 : FSTP float ptr [ESI + 0xb8]
0078d8e6 : FLD float ptr [ESI + 0x6c]
0078d8e9 : FSTP float ptr [ESI + 0xbc]
0078d8ef : FLD float ptr [ESI + 0x70]
0078d8f2 : FSTP float ptr [ESI + 0xc0]
0078d8f8 : MOVQ XMM0,qword ptr [ESI + 0x74]
0078d8fd : MOVQ qword ptr [ESI + 0xc4],XMM0
0078d905 : MOVQ XMM0,qword ptr [ESI + 0x7c]
0078d90a : MOVQ qword ptr [ESI + 0xcc],XMM0
0078d912 : FLD float ptr [ESI + 0x84]
0078d918 : FSTP float ptr [ESI + 0xd4]
0078d91e : FLD float ptr [ESI + 0x88]
0078d924 : FSTP float ptr [ESI + 0xd8]
0078d92a : FLD float ptr [ESI + 0x8c]
0078d930 : FSTP float ptr [ESI + 0xdc]
0078d936 : POP EDI
0078d937 : MOV ESP,EBP
0078d939 : POP EBP
0078d93a : RET
