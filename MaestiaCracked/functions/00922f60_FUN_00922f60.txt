PROGRAM  : Maestia.exe
FUNCTION : FUN_00922f60
ENTRY    : 00922f60
BODY     : [[00922f60, 00923351]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00922f60(int *param_1)

{
  ushort uVar1;
  short sVar2;
  ushort uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int *piVar7;
  int iVar8;
  uint uVar9;
  undefined4 uVar10;
  uint uVar11;
  uint local_78;
  undefined1 local_74 [24];
  uint local_5c;
  undefined4 local_58;
  int local_54;
  int local_50;
  int local_4c;
  uint local_48;
  uint local_44;
  int *local_40;
  int local_3c;
  uint local_38;
  uint local_34;
  int local_30;
  uint local_2c;
  int local_28;
  uint local_24;
  uint local_20;
  uint local_1c;
  uint local_18;
  char local_12;
  char local_11;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3f895;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar4 = (**(code **)(*param_1 + 0x74))(0,0,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  iVar8 = DAT_00d7c54c;
  if (iVar4 != 0) {
    local_2c = *(uint *)(iVar4 + 0x10);
    local_34 = 0;
    local_18 = 0;
    local_11 = '\0';
    FUN_004437f0(&local_2c);
    if ((local_28 != *(int *)(iVar8 + 0x44)) && (iVar8 = *(int *)(local_28 + 0x10), iVar8 != 0)) {
      local_24 = 0;
      local_28 = iVar8;
      do {
        uVar11 = local_24 & 0xffff;
        local_4c = FUN_00703c00(0x600);
        if (local_4c == 0) break;
        local_2c = *(uint *)(*DAT_00da9894 + 0x40);
        local_34 = local_34 + *(int *)(iVar8 + 0x17c + uVar11 * 8);
        local_38 = 0;
        if (local_2c != 0) {
          do {
            uVar11 = local_38;
            local_3c = FUN_008eb810();
            if (((local_3c != 0) && (*(char *)(local_3c + 100) != '\0')) &&
               (iVar4 = *(int *)(local_3c + 0x3c), local_30 = iVar4, iVar4 != 0)) {
              uVar6 = *(uint *)(iVar4 + 8);
              uVar9 = *(uint *)(iVar4 + 0xc);
              local_12 = '\0';
              local_20 = 0;
              local_48 = uVar9;
              local_44 = uVar6;
              if ((short)uVar6 != 0) {
                do {
                  uVar11 = 0;
                  if ((short)uVar9 != 0) {
                    do {
                      iVar8 = DAT_00d7c54c;
                      iVar5 = (local_20 & 0xffff) * *(int *)(iVar4 + 0xc) + (uVar11 & 0xffff);
                      if (((iVar5 < *(int *)(iVar4 + 8) * *(int *)(iVar4 + 0xc)) && (-1 < iVar5)) &&
                         ((iVar5 = *(int *)(*(int *)(iVar4 + 0x10) + iVar5 * 4), iVar5 != 0 &&
                          (local_40 = *(int **)(iVar5 + 8), local_40 != (int *)0x0)))) {
                        local_1c = local_40[4];
                        FUN_004437f0(&local_1c);
                        iVar8 = *(int *)(iVar8 + 0x44);
                        if (local_54 == iVar8) {
                          local_1c = 0;
                        }
                        else {
                          local_1c = *(uint *)(local_54 + 0x10);
                        }
                        local_58 = CONCAT22(*(undefined2 *)(local_4c + 4),
                                            *(undefined2 *)(local_4c + 6));
                        FUN_004437f0(&local_58);
                        if (local_50 == iVar8) {
                          uVar6 = 0;
                        }
                        else {
                          uVar6 = *(uint *)(local_50 + 0x10);
                        }
                        iVar4 = local_30;
                        if (local_1c == uVar6) {
                          local_1c = (uint)*(ushort *)(local_28 + 0x17c + (local_24 & 0xffff) * 8);
                          uVar6 = (local_24 & 0xffff) + 1;
                          piVar7 = (int *)(**(code **)(*param_1 + 0x74))(uVar6 % 6,uVar6 / 6);
                          if (piVar7 == (int *)0x0) {
                            uVar1 = (ushort)local_1c;
                          }
                          else {
                            local_11 = '\x01';
                            uVar6 = (**(code **)(*piVar7 + 0x40))();
                            local_18 = local_18 + (uVar6 & 0xffff);
                            sVar2 = (**(code **)(*piVar7 + 0x40))();
                            uVar1 = (ushort)local_1c - sVar2;
                          }
                          if (uVar1 != 0) {
                            uVar3 = (**(code **)(*local_40 + 0x40))();
                            if (uVar1 <= uVar3) {
                              local_12 = '\x01';
                              uVar3 = uVar1;
                            }
                            iVar8 = (**(code **)(*local_40 + 0x20))();
                            if (iVar8 == 1) {
                              local_18 = local_18 + uVar3;
                              FUN_008ef980(*(undefined4 *)(local_3c + 0x2c),uVar11,local_20,0x44,
                                           local_24 + 1,0,(uint)uVar3);
                            }
                            else {
                              local_18 = local_18 + 1;
                              FUN_008efa90(*(undefined4 *)(local_3c + 0x2c),uVar11,local_20,0x44,
                                           local_24 + 1,0);
                            }
                          }
                          iVar4 = local_30;
                          if (local_12 != '\0') {
                            local_20 = local_44 & 0xffff;
                            uVar11 = local_48 & 0xffff;
                            local_38 = local_2c;
                          }
                        }
                      }
                      uVar11 = uVar11 + 1;
                      uVar9 = local_48;
                      uVar6 = local_44;
                    } while ((ushort)uVar11 < (ushort)local_48);
                  }
                  local_20 = local_20 + 1;
                  iVar8 = local_28;
                  uVar11 = local_38;
                } while ((ushort)local_20 < (ushort)uVar6);
              }
            }
            local_38 = uVar11 + 1;
          } while (local_38 < local_2c);
        }
        local_24 = local_24 + 1;
      } while ((ushort)local_24 < 0xc);
      if (local_11 == '\0') {
        uVar11 = FUN_00922520();
        local_18 = local_18 + (uVar11 & 0xffff);
      }
      if ((local_18 < local_34) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
        FUN_00406460(L"IDS_RECIPE_NOT_ENOUGH_INGREDIENTS");
        local_8 = 0;
        piVar7 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar10 = FUN_0081d120(local_74);
        local_8._0_1_ = 1;
        (**(code **)(*piVar7 + 0x44))(uVar10,3);
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_78) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = 0xffffffff;
        if (7 < local_5c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00922f60 : PUSH EBP
00922f61 : MOV EBP,ESP
00922f63 : PUSH -0x1
00922f65 : PUSH 0xb3f895
00922f6a : MOV EAX,FS:[0x0]
00922f70 : PUSH EAX
00922f71 : SUB ESP,0x80
00922f77 : PUSH EBX
00922f78 : PUSH ESI
00922f79 : PUSH EDI
00922f7a : MOV EAX,[0x00d66fa0]
00922f7f : XOR EAX,EBP
00922f81 : PUSH EAX
00922f82 : LEA EAX,[EBP + -0xc]
00922f85 : MOV FS:[0x0],EAX
00922f8b : MOV ECX,dword ptr [EBP + 0x8]
00922f8e : MOV EAX,dword ptr [ECX]
00922f90 : MOV EDX,dword ptr [EAX + 0x74]
00922f93 : XOR EDI,EDI
00922f95 : PUSH EDI
00922f96 : PUSH EDI
00922f97 : CALL EDX
00922f99 : CMP EAX,EDI
00922f9b : JZ 0x0092333e
00922fa1 : MOV EAX,dword ptr [EAX + 0x10]
00922fa4 : MOV ESI,dword ptr [0x00d7c54c]
00922faa : LEA ECX,[EBP + -0x28]
00922fad : MOV dword ptr [EBP + -0x28],EAX
00922fb0 : PUSH ECX
00922fb1 : LEA ECX,[ESI + 0x40]
00922fb4 : LEA EAX,[EBP + -0x24]
00922fb7 : MOV dword ptr [EBP + -0x30],EDI
00922fba : MOV dword ptr [EBP + -0x14],EDI
00922fbd : MOV byte ptr [EBP + -0xd],0x0
00922fc1 : CALL 0x004437f0
00922fc6 : MOV ESI,dword ptr [ESI + 0x44]
00922fc9 : MOV EAX,dword ptr [EBP + -0x24]
00922fcc : CMP EAX,ESI
00922fce : JZ 0x0092333e
00922fd4 : MOV EBX,dword ptr [EAX + 0x10]
00922fd7 : MOV dword ptr [EBP + -0x24],EBX
00922fda : CMP EBX,EDI
00922fdc : JZ 0x0092333e
00922fe2 : MOV dword ptr [EBP + -0x20],EDI
00922fe5 : MOVZX ESI,word ptr [EBP + -0x20]
00922fe9 : MOV DI,word ptr [EBX + ESI*0x8 + 0x178]
00922ff1 : PUSH 0x600
00922ff6 : CALL 0x00703c00
00922ffb : ADD ESP,0x4
00922ffe : MOV dword ptr [EBP + -0x48],EAX
00923001 : TEST EAX,EAX
00923003 : JZ 0x00923273
00923009 : MOV EAX,[0x00da9894]
0092300e : MOV EDX,dword ptr [EBX + ESI*0x8 + 0x17c]
00923015 : MOV EAX,dword ptr [EAX]
00923017 : MOV EAX,dword ptr [EAX + 0x40]
0092301a : ADD dword ptr [EBP + -0x30],EDX
0092301d : XOR ESI,ESI
0092301f : MOV dword ptr [EBP + -0x28],EAX
00923022 : MOV dword ptr [EBP + -0x34],ESI
00923025 : TEST EAX,EAX
00923027 : JBE 0x00923262
0092302d : MOV ECX,dword ptr [0x00da9894]
00923033 : MOV EAX,dword ptr [ECX]
00923035 : MOV ECX,ESI
00923037 : CALL 0x008eb810
0092303c : MOV dword ptr [EBP + -0x38],EAX
0092303f : TEST EAX,EAX
00923041 : JZ 0x00923255
00923047 : CMP byte ptr [EAX + 0x64],0x0
0092304b : JZ 0x00923255
00923051 : MOV EDX,dword ptr [EAX + 0x3c]
00923054 : MOV dword ptr [EBP + -0x2c],EDX
00923057 : TEST EDX,EDX
00923059 : JZ 0x00923255
0092305f : MOV ECX,dword ptr [EDX + 0x8]
00923062 : MOV EAX,dword ptr [EDX + 0xc]
00923065 : XOR EDI,EDI
00923067 : MOV dword ptr [EBP + -0x40],ECX
0092306a : MOV dword ptr [EBP + -0x44],EAX
0092306d : MOV byte ptr [EBP + -0xe],0x0
00923071 : MOV dword ptr [EBP + -0x1c],0x0
00923078 : CMP DI,CX
0092307b : JNC 0x00923255
00923081 : XOR ESI,ESI
00923083 : XOR EBX,EBX
00923085 : CMP SI,AX
00923088 : JNC 0x0092323f
0092308e : MOVZX EAX,word ptr [EBP + -0x1c]
00923092 : MOV ECX,dword ptr [EDX + 0xc]
00923095 : IMUL EAX,ECX
00923098 : MOVZX ESI,BX
0092309b : ADD EAX,ESI
0092309d : MOV ESI,dword ptr [EDX + 0x8]
009230a0 : IMUL ESI,ECX
009230a3 : CMP EAX,ESI
009230a5 : JGE 0x0092322f
009230ab : TEST EAX,EAX
009230ad : JL 0x0092322f
009230b3 : MOV ECX,dword ptr [EDX + 0x10]
009230b6 : MOV EAX,dword ptr [ECX + EAX*0x4]
009230b9 : TEST EAX,EAX
009230bb : JZ 0x0092322f
009230c1 : MOV EAX,dword ptr [EAX + 0x8]
009230c4 : MOV dword ptr [EBP + -0x3c],EAX
009230c7 : TEST EAX,EAX
009230c9 : JZ 0x0092322f
009230cf : MOV EDX,dword ptr [EAX + 0x10]
009230d2 : MOV EDI,dword ptr [0x00d7c54c]
009230d8 : LEA EAX,[EBP + -0x18]
009230db : LEA ESI,[EDI + 0x40]
009230de : PUSH EAX
009230df : LEA EAX,[EBP + -0x50]
009230e2 : MOV ECX,ESI
009230e4 : MOV dword ptr [EBP + -0x18],EDX
009230e7 : CALL 0x004437f0
009230ec : MOV EDI,dword ptr [EDI + 0x44]
009230ef : MOV EAX,dword ptr [EBP + -0x50]
009230f2 : CMP EAX,EDI
009230f4 : JZ 0x009230fe
009230f6 : MOV ECX,dword ptr [EAX + 0x10]
009230f9 : MOV dword ptr [EBP + -0x18],ECX
009230fc : JMP 0x00923105
009230fe : MOV dword ptr [EBP + -0x18],0x0
00923105 : MOV EAX,dword ptr [EBP + -0x48]
00923108 : MOVZX EDX,word ptr [EAX + 0x4]
0092310c : MOVZX EAX,word ptr [EAX + 0x6]
00923110 : SHL EDX,0x10
00923113 : LEA ECX,[EBP + -0x54]
00923116 : OR EDX,EAX
00923118 : PUSH ECX
00923119 : LEA EAX,[EBP + -0x4c]
0092311c : MOV ECX,ESI
0092311e : MOV dword ptr [EBP + -0x54],EDX
00923121 : CALL 0x004437f0
00923126 : MOV EAX,dword ptr [EBP + -0x4c]
00923129 : CMP EAX,EDI
0092312b : JZ 0x00923132
0092312d : MOV EAX,dword ptr [EAX + 0x10]
00923130 : JMP 0x00923134
00923132 : XOR EAX,EAX
00923134 : CMP dword ptr [EBP + -0x18],EAX
00923137 : JNZ 0x0092322c
0092313d : MOVZX EAX,word ptr [EBP + -0x20]
00923141 : MOV EDX,dword ptr [EBP + -0x24]
00923144 : MOVZX ECX,word ptr [EDX + EAX*0x8 + 0x17c]
0092314c : INC EAX
0092314d : MOV dword ptr [EBP + -0x18],ECX
00923150 : CDQ
00923151 : MOV ECX,0x6
00923156 : IDIV ECX
00923158 : MOVZX ECX,DX
0092315b : MOV EDX,dword ptr [EBP + 0x8]
0092315e : MOV ESI,dword ptr [EDX]
00923160 : MOVZX EAX,AX
00923163 : PUSH EAX
00923164 : PUSH ECX
00923165 : MOV ECX,EDX
00923167 : MOV EDX,dword ptr [ESI + 0x74]
0092316a : CALL EDX
0092316c : MOV ESI,EAX
0092316e : TEST ESI,ESI
00923170 : JZ 0x00923197
00923172 : MOV EAX,dword ptr [ESI]
00923174 : MOV EDX,dword ptr [EAX + 0x40]
00923177 : MOV ECX,ESI
00923179 : MOV byte ptr [EBP + -0xd],0x1
0092317d : CALL EDX
0092317f : MOV EDX,dword ptr [ESI]
00923181 : MOVZX EAX,AX
00923184 : ADD dword ptr [EBP + -0x14],EAX
00923187 : MOV EAX,dword ptr [EDX + 0x40]
0092318a : MOV ECX,ESI
0092318c : CALL EAX
0092318e : MOV DI,word ptr [EBP + -0x18]
00923192 : SUB DI,AX
00923195 : JMP 0x0092319b
00923197 : MOV DI,word ptr [EBP + -0x18]
0092319b : XOR ECX,ECX
0092319d : CMP CX,DI
009231a0 : JNC 0x00923210
009231a2 : MOV ECX,dword ptr [EBP + -0x3c]
009231a5 : MOV EDX,dword ptr [ECX]
009231a7 : MOV EAX,dword ptr [EDX + 0x40]
009231aa : CALL EAX
009231ac : MOVZX ESI,AX
009231af : CMP SI,DI
009231b2 : JC 0x009231bb
009231b4 : MOV byte ptr [EBP + -0xe],0x1
009231b8 : MOVZX ESI,DI
009231bb : MOV ECX,dword ptr [EBP + -0x3c]
009231be : MOV EDX,dword ptr [ECX]
009231c0 : MOV EAX,dword ptr [EDX + 0x20]
009231c3 : CALL EAX
009231c5 : CMP EAX,0x1
009231c8 : JNZ 0x009231f0
009231ca : MOV EDX,dword ptr [EBP + -0x38]
009231cd : MOV EAX,dword ptr [EDX + 0x2c]
009231d0 : MOV EDX,dword ptr [EBP + -0x1c]
009231d3 : MOVZX ECX,SI
009231d6 : ADD dword ptr [EBP + -0x14],ECX
009231d9 : MOV ECX,dword ptr [EBP + -0x20]
009231dc : PUSH ESI
009231dd : PUSH 0x0
009231df : INC ECX
009231e0 : PUSH ECX
009231e1 : PUSH 0x44
009231e3 : PUSH EDX
009231e4 : PUSH EBX
009231e5 : PUSH EAX
009231e6 : CALL 0x008ef980
009231eb : ADD ESP,0x1c
009231ee : JMP 0x00923210
009231f0 : MOV ECX,dword ptr [EBP + -0x20]
009231f3 : MOV EDX,dword ptr [EBP + -0x1c]
009231f6 : MOV EAX,dword ptr [EBP + -0x38]
009231f9 : MOV EAX,dword ptr [EAX + 0x2c]
009231fc : INC dword ptr [EBP + -0x14]
009231ff : PUSH 0x0
00923201 : INC ECX
00923202 : PUSH ECX
00923203 : PUSH 0x44
00923205 : PUSH EDX
00923206 : PUSH EBX
00923207 : PUSH EAX
00923208 : CALL 0x008efa90
0092320d : ADD ESP,0x18
00923210 : CMP byte ptr [EBP + -0xe],0x0
00923214 : MOV EDX,dword ptr [EBP + -0x2c]
00923217 : JZ 0x0092322f
00923219 : MOVZX EAX,word ptr [EBP + -0x40]
0092321d : MOV ECX,dword ptr [EBP + -0x28]
00923220 : MOVZX EBX,word ptr [EBP + -0x44]
00923224 : MOV dword ptr [EBP + -0x1c],EAX
00923227 : MOV dword ptr [EBP + -0x34],ECX
0092322a : JMP 0x0092322f
0092322c : MOV EDX,dword ptr [EBP + -0x2c]
0092322f : MOV EAX,dword ptr [EBP + -0x44]
00923232 : INC EBX
00923233 : CMP BX,AX
00923236 : JC 0x0092308e
0092323c : MOV ECX,dword ptr [EBP + -0x40]
0092323f : MOV ESI,dword ptr [EBP + -0x1c]
00923242 : INC ESI
00923243 : MOV dword ptr [EBP + -0x1c],ESI
00923246 : CMP SI,CX
00923249 : JC 0x00923081
0092324f : MOV EBX,dword ptr [EBP + -0x24]
00923252 : MOV ESI,dword ptr [EBP + -0x34]
00923255 : INC ESI
00923256 : MOV dword ptr [EBP + -0x34],ESI
00923259 : CMP ESI,dword ptr [EBP + -0x28]
0092325c : JC 0x0092302d
00923262 : MOV EAX,dword ptr [EBP + -0x20]
00923265 : INC EAX
00923266 : MOV dword ptr [EBP + -0x20],EAX
00923269 : CMP AX,0xc
0092326d : JC 0x00922fe5
00923273 : CMP byte ptr [EBP + -0xd],0x0
00923277 : JNZ 0x00923287
00923279 : MOV EDI,dword ptr [EBP + 0x8]
0092327c : CALL 0x00922520
00923281 : MOVZX EDX,AX
00923284 : ADD dword ptr [EBP + -0x14],EDX
00923287 : MOV EAX,dword ptr [EBP + -0x14]
0092328a : CMP dword ptr [EBP + -0x30],EAX
0092328d : JBE 0x0092333e
00923293 : MOV ECX,dword ptr [0x00da9894]
00923299 : MOV EAX,dword ptr [ECX]
0092329b : CMP dword ptr [EAX + 0x1a8],0x0
009232a2 : JZ 0x0092333e
009232a8 : PUSH 0xc6ada8
009232ad : LEA ECX,[EBP + -0x70]
009232b0 : CALL 0x00406460
009232b5 : MOV dword ptr [EBP + -0x4],0x0
009232bc : MOV EDX,dword ptr [0x00da9894]
009232c2 : MOV EAX,dword ptr [EDX]
009232c4 : MOV ESI,dword ptr [EAX + 0x1a8]
009232ca : MOV ECX,dword ptr [0x0172491c]
009232d0 : LEA EAX,[EBP + -0x70]
009232d3 : PUSH EAX
009232d4 : LEA EDI,[EBP + 0xffffff74]
009232da : CALL 0x0081d120
009232df : MOV byte ptr [EBP + -0x4],0x1
009232e3 : MOV EDX,dword ptr [ESI]
009232e5 : PUSH 0x3
009232e7 : PUSH EAX
009232e8 : MOV EAX,dword ptr [EDX + 0x44]
009232eb : MOV ECX,ESI
009232ed : CALL EAX
009232ef : MOV byte ptr [EBP + -0x4],0x0
009232f3 : MOV ESI,0x8
009232f8 : CMP dword ptr [EBP + -0x74],ESI
009232fb : JC 0x00923308
009232fd : MOV ECX,dword ptr [EBP + 0xffffff78]
00923303 : CALL 0x006f04e0
00923308 : MOV EDI,0x7
0092330d : XOR EBX,EBX
0092330f : XOR ECX,ECX
00923311 : MOV dword ptr [EBP + -0x74],EDI
00923314 : MOV dword ptr [EBP + -0x78],EBX
00923317 : MOV word ptr [EBP + 0xffffff78],CX
0092331e : MOV dword ptr [EBP + -0x4],0xffffffff
00923325 : CMP dword ptr [EBP + -0x58],ESI
00923328 : JC 0x00923332
0092332a : MOV ECX,dword ptr [EBP + -0x6c]
0092332d : CALL 0x006f04e0
00923332 : XOR EDX,EDX
00923334 : MOV dword ptr [EBP + -0x58],EDI
00923337 : MOV dword ptr [EBP + -0x5c],EBX
0092333a : MOV word ptr [EBP + -0x6c],DX
0092333e : MOV ECX,dword ptr [EBP + -0xc]
00923341 : MOV dword ptr FS:[0x0],ECX
00923348 : POP ECX
00923349 : POP EDI
0092334a : POP ESI
0092334b : POP EBX
0092334c : MOV ESP,EBP
0092334e : POP EBP
0092334f : RET 0x4
