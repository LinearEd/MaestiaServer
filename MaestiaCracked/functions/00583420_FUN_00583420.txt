PROGRAM  : Maestia.exe
FUNCTION : FUN_00583420
ENTRY    : 00583420
BODY     : [[00583420, 00583548]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00583420(undefined4 *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_00582e90);
    *puVar3 = &PTR_LAB_00b8dbc0;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x50,0);
  if (iVar4 == 0) {
    uVar6 = 0;
  }
  else {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_00583080(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (undefined4 *)0xf;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *(int *)(*(int *)(iVar2 + 0x28c) + 0x10);
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x44,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
00583420 : SUB ESP,0x18
00583423 : PUSH EBP
00583424 : PUSH ESI
00583425 : MOV ESI,dword ptr [ESP + 0x28]
00583429 : MOV ECX,dword ptr [ESI + 0x288]
0058342f : PUSH EDI
00583430 : PUSH 0x0
00583432 : PUSH 0x34
00583434 : MOV dword ptr [ESP + 0x14],ESI
00583438 : MOV byte ptr [ESP + 0x18],0x8
0058343d : CALL 0x00515840
00583442 : MOV EDI,EAX
00583444 : TEST EDI,EDI
00583446 : JZ 0x0058346a
00583448 : PUSH 0x582e90
0058344d : LEA EAX,[ESP + 0x10]
00583451 : PUSH EAX
00583452 : MOV ECX,EDI
00583454 : CALL 0x00568960
00583459 : MOV dword ptr [EDI],0xb8dbc0
0058345f : MOV dword ptr [EDI + 0x10],0xb90510
00583466 : MOV EAX,EDI
00583468 : JMP 0x0058346c
0058346a : XOR EAX,EAX
0058346c : MOV EDI,dword ptr [ESP + 0x28]
00583470 : PUSH 0x0
00583472 : MOV byte ptr [EDI + 0x8],0x0
00583476 : MOV dword ptr [EDI],EAX
00583478 : MOV dword ptr [EDI + 0x4],0x0
0058347f : MOV ECX,dword ptr [ESI + 0x288]
00583485 : PUSH 0x50
00583487 : CALL 0x00515840
0058348c : MOV EBP,EAX
0058348e : TEST EBP,EBP
00583490 : JZ 0x00583542
00583496 : PUSH EDI
00583497 : PUSH 0x1
00583499 : MOV ECX,ESI
0058349b : CALL 0x00530910
005834a0 : PUSH EAX
005834a1 : LEA ECX,[ESP + 0x14]
005834a5 : PUSH ECX
005834a6 : MOV ECX,EBP
005834a8 : CALL 0x00583080
005834ad : MOV EBP,EAX
005834af : TEST EBP,EBP
005834b1 : JZ 0x005834c0
005834b3 : MOV EDX,dword ptr [EBP + 0x8]
005834b6 : INC EDX
005834b7 : AND EDX,0x8fffffff
005834bd : MOV dword ptr [EBP + 0x8],EDX
005834c0 : LEA EAX,[ESP + 0x2c]
005834c4 : PUSH EAX
005834c5 : LEA ECX,[ESP + 0x2c]
005834c9 : PUSH ECX
005834ca : LEA ECX,[ESI + 0x278]
005834d0 : MOV dword ptr [ESP + 0x34],EBP
005834d4 : MOV dword ptr [ESP + 0x30],0xf
005834dc : CALL 0x0050ff10
005834e1 : MOV ECX,dword ptr [ESP + 0x2c]
005834e5 : TEST ECX,ECX
005834e7 : JZ 0x005834ee
005834e9 : CALL 0x00503db0
005834ee : MOV EDX,dword ptr [ESI + 0x28c]
005834f4 : PUSH EBX
005834f5 : LEA EAX,[ESP + 0x30]
005834f9 : PUSH EAX
005834fa : MOV byte ptr [ESP + 0x34],0x0
005834ff : MOV EBX,dword ptr [EDX + 0x10]
00583502 : PUSH EDI
00583503 : LEA ECX,[ESP + 0x20]
00583507 : CALL 0x00526210
0058350c : PUSH EAX
0058350d : MOV EAX,dword ptr [EBX + 0x28]
00583510 : LEA ECX,[ESI + 0x44]
00583513 : PUSH ECX
00583514 : MOV ECX,dword ptr [ESI + 0x28c]
0058351a : LEA EDX,[ESP + 0x1c]
0058351e : PUSH EDX
0058351f : ADD ECX,0x10
00583522 : CALL EAX
00583524 : LEA ECX,[ESP + 0x18]
00583528 : CALL 0x00526bc0
0058352d : POP EBX
0058352e : TEST EBP,EBP
00583530 : JZ 0x00583539
00583532 : MOV ECX,EBP
00583534 : CALL 0x00503db0
00583539 : MOV EAX,EDI
0058353b : POP EDI
0058353c : POP ESI
0058353d : POP EBP
0058353e : ADD ESP,0x18
00583541 : RET
00583542 : XOR EBP,EBP
00583544 : JMP 0x005834c0
