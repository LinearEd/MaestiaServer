PROGRAM  : Maestia.exe
FUNCTION : FUN_006b6d20
ENTRY    : 006b6d20
BODY     : [[006b6d20, 006b6da7] [006b6db0, 006b6eb5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b6d20(int param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  short sVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  byte local_1d;
  
  if (*(short *)(param_1 + 0x9a) != 0) {
    if ((*(byte *)(param_1 + 0x170) & 1) == 0) {
      local_1d = 0x10;
    }
    else {
      local_1d = 8;
    }
    sVar4 = 0;
    uVar6 = 0;
    do {
      uVar5 = (uint)*(ushort *)(*(int *)(param_1 + 0xac) + sVar4 * 2) -
              (uint)*(ushort *)(param_1 + 0xb0);
      if (*(ushort *)(param_1 + 0x98) <= uVar5) {
        uVar5 = (uint)*(ushort *)(param_1 + 0x98);
      }
      uVar8 = uVar6;
      if (uVar6 <= uVar5) {
        uVar7 = uVar6;
        do {
          if ((*(byte *)(*(int *)(param_1 + 0xa8) + uVar7) & local_1d) != 0) {
            uVar8 = uVar7;
            uVar3 = uVar7;
            if (uVar7 <= uVar5) {
              while (uVar2 = uVar8, uVar1 = uVar3, uVar8 = uVar2 + 1, uVar8 <= uVar5) {
                uVar3 = uVar1;
                if (((*(byte *)(*(int *)(param_1 + 0xa8) + uVar8) & local_1d) != 0) &&
                   (uVar3 = uVar8, uVar8 != 0)) {
                  FUN_006b6be0(uVar1 + 1,uVar2);
                }
              }
              if (uVar1 == uVar7) {
                FUN_006b6ba0();
              }
              else {
                FUN_006b6be0(uVar1 + 1 & 0xffff,uVar5);
                if (uVar7 != 0) {
                  FUN_006b6be0(uVar6,uVar7 - 1);
                }
              }
            }
            break;
          }
          uVar8 = uVar7 + 1;
          uVar7 = uVar8;
        } while (uVar8 <= uVar5);
      }
      sVar4 = sVar4 + 1;
      uVar6 = uVar8;
    } while (sVar4 < *(short *)(param_1 + 0x9a));
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b6d20 : MOV EAX,dword ptr [ESP + 0x4]
006b6d24 : SUB ESP,0x20
006b6d27 : CMP word ptr [EAX + 0x9a],0x0
006b6d2f : JZ 0x006b6eb2
006b6d35 : TEST byte ptr [EAX + 0x170],0x1
006b6d3c : JZ 0x006b6d63
006b6d3e : MOV ECX,dword ptr [EAX + 0x9c]
006b6d44 : MOV EDX,dword ptr [EAX + 0xa0]
006b6d4a : MOV dword ptr [ESP + 0x10],ECX
006b6d4e : MOV ECX,dword ptr [EAX + 0xa4]
006b6d54 : MOV byte ptr [ESP + 0x3],0x8
006b6d59 : MOV dword ptr [ESP + 0x14],EDX
006b6d5d : MOV dword ptr [ESP + 0x18],ECX
006b6d61 : JMP 0x006b6d8f
006b6d63 : MOV EDX,dword ptr [EAX + 0x9c]
006b6d69 : MOV ECX,dword ptr [EAX + 0xa0]
006b6d6f : ADD EDX,0x4
006b6d72 : MOV dword ptr [ESP + 0x10],EDX
006b6d76 : MOV EDX,dword ptr [EAX + 0xa4]
006b6d7c : ADD ECX,0x4
006b6d7f : ADD EDX,0x4
006b6d82 : MOV byte ptr [ESP + 0x3],0x10
006b6d87 : MOV dword ptr [ESP + 0x14],ECX
006b6d8b : MOV dword ptr [ESP + 0x18],EDX
006b6d8f : MOVZX ECX,word ptr [EAX + 0x98]
006b6d96 : PUSH EBX
006b6d97 : PUSH EBP
006b6d98 : MOV dword ptr [ESP + 0x24],ECX
006b6d9c : XOR ECX,ECX
006b6d9e : PUSH ESI
006b6d9f : PUSH EDI
006b6da0 : MOV dword ptr [ESP + 0x1c],ECX
006b6da4 : XOR EBP,EBP
006b6da6 : JMP 0x006b6db0
006b6db0 : MOVSX EDX,CX
006b6db3 : MOV ECX,dword ptr [EAX + 0xac]
006b6db9 : MOVZX EBX,word ptr [ECX + EDX*0x2]
006b6dbd : MOVZX EDX,word ptr [EAX + 0xb0]
006b6dc4 : MOVZX ECX,word ptr [EAX + 0x98]
006b6dcb : SUB EBX,EDX
006b6dcd : MOV dword ptr [ESP + 0x18],EBP
006b6dd1 : CMP ECX,EBX
006b6dd3 : JA 0x006b6dd7
006b6dd5 : MOV EBX,ECX
006b6dd7 : CMP EBP,EBX
006b6dd9 : JA 0x006b6e98
006b6ddf : MOV ESI,dword ptr [EAX + 0xa8]
006b6de5 : MOV CL,byte ptr [ESP + 0x13]
006b6de9 : LEA ESP,[ESP]
006b6df0 : TEST byte ptr [ESI + EBP*0x1],CL
006b6df3 : JNZ 0x006b6dff
006b6df5 : INC EBP
006b6df6 : CMP EBP,EBX
006b6df8 : JBE 0x006b6df0
006b6dfa : JMP 0x006b6e98
006b6dff : CMP EBP,EBX
006b6e01 : JA 0x006b6e98
006b6e07 : MOV EDX,EBP
006b6e09 : MOV EDI,EBP
006b6e0b : INC EBP
006b6e0c : MOV dword ptr [ESP + 0x14],EDX
006b6e10 : CMP EBP,EBX
006b6e12 : JA 0x006b6e4e
006b6e14 : MOV EDX,dword ptr [EAX + 0xa8]
006b6e1a : TEST byte ptr [EDX + EBP*0x1],CL
006b6e1d : JZ 0x006b6e45
006b6e1f : TEST EBP,EBP
006b6e21 : JBE 0x006b6e3f
006b6e23 : LEA EAX,[EBP + -0x1]
006b6e26 : PUSH EAX
006b6e27 : LEA ECX,[EDI + 0x1]
006b6e2a : PUSH ECX
006b6e2b : MOV ECX,EBP
006b6e2d : MOV EAX,EDI
006b6e2f : LEA ESI,[ESP + 0x28]
006b6e33 : CALL 0x006b6be0
006b6e38 : MOV EAX,dword ptr [ESP + 0x3c]
006b6e3c : ADD ESP,0x8
006b6e3f : MOV CL,byte ptr [ESP + 0x13]
006b6e43 : MOV EDI,EBP
006b6e45 : INC EBP
006b6e46 : CMP EBP,EBX
006b6e48 : JBE 0x006b6e14
006b6e4a : MOV EDX,dword ptr [ESP + 0x14]
006b6e4e : LEA ESI,[ESP + 0x20]
006b6e52 : CMP EDI,EDX
006b6e54 : JNZ 0x006b6e61
006b6e56 : MOV EAX,dword ptr [ESP + 0x18]
006b6e5a : CALL 0x006b6ba0
006b6e5f : JMP 0x006b6e94
006b6e61 : LEA EAX,[EDI + 0x1]
006b6e64 : MOVZX ECX,AX
006b6e67 : PUSH EBX
006b6e68 : PUSH ECX
006b6e69 : MOV ECX,EDX
006b6e6b : MOV EAX,EDI
006b6e6d : CALL 0x006b6be0
006b6e72 : MOV ECX,dword ptr [ESP + 0x1c]
006b6e76 : ADD ESP,0x8
006b6e79 : TEST ECX,ECX
006b6e7b : JBE 0x006b6e94
006b6e7d : MOV EAX,dword ptr [ESP + 0x18]
006b6e81 : LEA EDX,[ECX + -0x1]
006b6e84 : PUSH EDX
006b6e85 : PUSH EAX
006b6e86 : MOV EAX,EDI
006b6e88 : LEA ESI,[ESP + 0x28]
006b6e8c : CALL 0x006b6be0
006b6e91 : ADD ESP,0x8
006b6e94 : MOV EAX,dword ptr [ESP + 0x34]
006b6e98 : MOV ECX,dword ptr [ESP + 0x1c]
006b6e9c : INC ECX
006b6e9d : CMP CX,word ptr [EAX + 0x9a]
006b6ea4 : MOV dword ptr [ESP + 0x1c],ECX
006b6ea8 : JL 0x006b6db0
006b6eae : POP EDI
006b6eaf : POP ESI
006b6eb0 : POP EBP
006b6eb1 : POP EBX
006b6eb2 : ADD ESP,0x20
006b6eb5 : RET
