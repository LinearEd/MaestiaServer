PROGRAM  : Maestia.exe
FUNCTION : FUN_00411940
ENTRY    : 00411940
BODY     : [[00411940, 00411a82] [00411a94, 00411b61]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00411940(undefined8 *param_1)

{
  uint uVar1;
  undefined8 *puVar2;
  int iVar3;
  undefined8 *extraout_ECX;
  undefined8 *puVar4;
  uint uVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7c560;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (DAT_017245d4 == 0) {
    uVar5 = 0;
  }
  else {
    uVar5 = DAT_017245dc - DAT_017245d4 >> 4;
  }
  iVar3 = (int)DAT_017245d8 - DAT_017245d4 >> 4;
  puVar4 = DAT_017245d8;
  if (iVar3 == 0xfffffff) {
    iVar3 = FUN_00429be0();
    puVar4 = extraout_ECX;
  }
  uVar1 = iVar3 + 1;
  if (uVar5 < uVar1) {
    if (0xfffffff - (uVar5 >> 1) < uVar5) {
      uVar5 = 0;
    }
    else {
      uVar5 = uVar5 + (uVar5 >> 1);
    }
    if (uVar5 < uVar1) {
      uVar5 = uVar1;
    }
    iVar3 = FUN_00424e80();
    local_8 = 0;
    FUN_00411870();
    FUN_00411b90(DAT_017245d4,param_1);
    FUN_00411b90(param_1,DAT_017245d8);
    local_8 = 0xffffffff;
    if (DAT_017245d4 != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    DAT_017245dc = uVar5 * 0x10 + iVar3;
    DAT_017245d8 = (undefined8 *)((((int)DAT_017245d8 - DAT_017245d4 >> 4) + 1) * 0x10 + iVar3);
    DAT_017245d4 = iVar3;
    ExceptionList = local_10;
    return;
  }
  if ((int)puVar4 - (int)param_1 >> 4 == 0) {
    FUN_00411b90(param_1,puVar4);
    local_8 = 2;
    FUN_00411870();
    local_8 = 0xffffffff;
    DAT_017245d8 = DAT_017245d8 + 2;
  }
  else {
    DAT_017245d8 = (undefined8 *)FUN_00411b90(puVar4 + -2,puVar4);
    puVar2 = puVar4 + -2;
    while (param_1 != puVar2) {
      puVar4[-2] = puVar2[-2];
      puVar4[-1] = puVar2[-1];
      puVar2 = puVar2 + -2;
      puVar4 = puVar4 + -2;
    }
  }
  FUN_004cb8f0(param_1);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00411940 : PUSH EBP
00411941 : MOV EBP,ESP
00411943 : PUSH -0x1
00411945 : PUSH 0xb7c560
0041194a : MOV EAX,FS:[0x0]
00411950 : PUSH EAX
00411951 : SUB ESP,0x28
00411954 : PUSH EBX
00411955 : PUSH ESI
00411956 : PUSH EDI
00411957 : MOV EAX,[0x00d66fa0]
0041195c : XOR EAX,EBP
0041195e : PUSH EAX
0041195f : LEA EAX,[EBP + -0xc]
00411962 : MOV FS:[0x0],EAX
00411968 : MOV dword ptr [EBP + -0x10],ESP
0041196b : MOV ESI,ECX
0041196d : MOV EDX,dword ptr [0x017245d4]
00411973 : TEST EDX,EDX
00411975 : JNZ 0x0041197b
00411977 : XOR EBX,EBX
00411979 : JMP 0x00411986
0041197b : MOV EBX,dword ptr [0x017245dc]
00411981 : SUB EBX,EDX
00411983 : SAR EBX,0x4
00411986 : MOV ECX,dword ptr [0x017245d8]
0041198c : MOV EAX,ECX
0041198e : SUB EAX,EDX
00411990 : SAR EAX,0x4
00411993 : MOV EDX,0xfffffff
00411998 : SUB EDX,EAX
0041199a : CMP EDX,0x1
0041199d : JNC 0x004119a4
0041199f : CALL 0x00429be0
004119a4 : LEA EDX,[EAX + 0x1]
004119a7 : CMP EBX,EDX
004119a9 : JNC 0x00411a94
004119af : MOV EAX,EBX
004119b1 : SHR EAX,0x1
004119b3 : MOV ECX,0xfffffff
004119b8 : SUB ECX,EAX
004119ba : CMP ECX,EBX
004119bc : JNC 0x004119c2
004119be : XOR EBX,EBX
004119c0 : JMP 0x004119c4
004119c2 : ADD EBX,EAX
004119c4 : CMP EBX,EDX
004119c6 : CMOVC EBX,EDX
004119c9 : MOV ECX,EBX
004119cb : CALL 0x00424e80
004119d0 : MOV dword ptr [EBP + -0x18],EAX
004119d3 : MOV EDI,dword ptr [EBP + 0x8]
004119d6 : SUB EDI,dword ptr [0x017245d4]
004119dc : SAR EDI,0x4
004119df : MOV dword ptr [EBP + -0x20],EDI
004119e2 : MOV dword ptr [EBP + -0x4],0x0
004119e9 : SHL EDI,0x4
004119ec : ADD EDI,EAX
004119ee : MOV EDX,ESI
004119f0 : MOV ESI,0x1
004119f5 : CALL 0x00411870
004119fa : MOV dword ptr [EBP + -0x1c],ESI
004119fd : MOV EDX,dword ptr [EBP + 0x8]
00411a00 : PUSH EDX
00411a01 : MOV EAX,[0x017245d4]
00411a06 : PUSH EAX
00411a07 : MOV EDI,dword ptr [EBP + -0x18]
00411a0a : MOV EDX,EDI
00411a0c : CALL 0x00411b90
00411a11 : MOV dword ptr [EBP + -0x1c],0x2
00411a18 : MOV EDX,dword ptr [EBP + -0x20]
00411a1b : INC EDX
00411a1c : SHL EDX,0x4
00411a1f : ADD EDX,EDI
00411a21 : MOV ECX,dword ptr [0x017245d8]
00411a27 : PUSH ECX
00411a28 : MOV EAX,dword ptr [EBP + 0x8]
00411a2b : PUSH EAX
00411a2c : CALL 0x00411b90
00411a31 : MOV dword ptr [EBP + -0x4],0xffffffff
00411a38 : MOV ESI,dword ptr [0x017245d8]
00411a3e : MOV ECX,dword ptr [0x017245d4]
00411a44 : SUB ESI,ECX
00411a46 : SAR ESI,0x4
00411a49 : INC ESI
00411a4a : TEST ECX,ECX
00411a4c : JZ 0x00411a53
00411a4e : CALL 0x006f04e0
00411a53 : SHL EBX,0x4
00411a56 : ADD EBX,EDI
00411a58 : MOV dword ptr [0x017245dc],EBX
00411a5e : SHL ESI,0x4
00411a61 : ADD ESI,EDI
00411a63 : MOV dword ptr [0x017245d8],ESI
00411a69 : MOV dword ptr [0x017245d4],EDI
00411a6f : MOV ECX,dword ptr [EBP + -0xc]
00411a72 : MOV dword ptr FS:[0x0],ECX
00411a79 : POP ECX
00411a7a : POP EDI
00411a7b : POP ESI
00411a7c : POP EBX
00411a7d : MOV ESP,EBP
00411a7f : POP EBP
00411a80 : RET 0x4
00411a94 : MOV EDX,ECX
00411a96 : MOV EAX,dword ptr [EBP + 0x8]
00411a99 : SUB EDX,EAX
00411a9b : SAR EDX,0x4
00411a9e : MOVQ XMM0,qword ptr [ESI]
00411aa2 : PUSH ECX
00411aa3 : MOVQ qword ptr [EBP + -0x30],XMM0
00411aa8 : MOVQ XMM0,qword ptr [ESI + 0x8]
00411aad : MOVQ qword ptr [EBP + -0x28],XMM0
00411ab2 : CMP EDX,0x1
00411ab5 : JNC 0x00411b00
00411ab7 : LEA EDX,[EAX + 0x10]
00411aba : PUSH EAX
00411abb : CALL 0x00411b90
00411ac0 : MOV dword ptr [EBP + -0x4],0x2
00411ac7 : MOV EDI,dword ptr [0x017245d8]
00411acd : MOV EAX,EDI
00411acf : SUB EAX,dword ptr [EBP + 0x8]
00411ad2 : SAR EAX,0x4
00411ad5 : MOV ESI,0x1
00411ada : SUB ESI,EAX
00411adc : LEA EDX,[EBP + -0x30]
00411adf : CALL 0x00411870
00411ae4 : MOV dword ptr [EBP + -0x4],0xffffffff
00411aeb : MOV EAX,[0x017245d8]
00411af0 : ADD EAX,0x10
00411af3 : MOV [0x017245d8],EAX
00411af8 : LEA EDX,[EAX + -0x10]
00411afb : MOV ECX,dword ptr [EBP + 0x8]
00411afe : JMP 0x00411b42
00411b00 : LEA ESI,[ECX + -0x10]
00411b03 : PUSH ESI
00411b04 : MOV EDX,ECX
00411b06 : CALL 0x00411b90
00411b0b : MOV [0x017245d8],EAX
00411b10 : MOV EAX,ESI
00411b12 : MOV ECX,dword ptr [EBP + 0x8]
00411b15 : MOV EDX,ECX
00411b17 : CMP ECX,EAX
00411b19 : JZ 0x00411b3f
00411b1b : LEA ECX,[EAX + 0x10]
00411b1e : MOV EDI,EDI
00411b20 : SUB EAX,0x10
00411b23 : SUB ECX,0x10
00411b26 : MOVQ XMM0,qword ptr [EAX]
00411b2a : MOVQ qword ptr [ECX],XMM0
00411b2e : MOVQ XMM0,qword ptr [EAX + 0x8]
00411b33 : MOVQ qword ptr [ECX + 0x8],XMM0
00411b38 : CMP EAX,EDX
00411b3a : JNZ 0x00411b20
00411b3c : MOV ECX,dword ptr [EBP + 0x8]
00411b3f : LEA EDX,[ECX + 0x10]
00411b42 : PUSH ECX
00411b43 : LEA ECX,[EBP + -0x30]
00411b46 : CALL 0x004cb8f0
00411b4b : ADD ESP,0x4
00411b4e : MOV ECX,dword ptr [EBP + -0xc]
00411b51 : MOV dword ptr FS:[0x0],ECX
00411b58 : POP ECX
00411b59 : POP EDI
00411b5a : POP ESI
00411b5b : POP EBX
00411b5c : MOV ESP,EBP
00411b5e : POP EBP
00411b5f : RET 0x4
