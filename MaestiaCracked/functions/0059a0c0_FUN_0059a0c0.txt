PROGRAM  : Maestia.exe
FUNCTION : FUN_0059a0c0
ENTRY    : 0059a0c0
BODY     : [[0059a0c0, 0059a21c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0059a0c0(undefined4 *param_1,float *param_2)

{
  int *piVar1;
  float fVar2;
  byte bVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  int *in_ECX;
  undefined4 *puVar7;
  int iVar8;
  uint uVar9;
  undefined4 *local_14;
  
  if (in_ECX[1] != 0) {
    iVar5 = FUN_00599350();
    if (iVar5 == in_ECX[1]) {
      iVar5 = iVar5 + -1;
    }
    puVar7 = *(undefined4 **)(*in_ECX + iVar5 * 4);
    piVar1 = puVar7 + 4;
    local_14 = (undefined4 *)(*in_ECX + iVar5 * 4);
    cVar4 = (char)((uint)*puVar7 >> 0x18);
    iVar8 = *piVar1;
    do {
      fVar2 = param_2[1];
      if ((float)iVar8 < fVar2 == ((float)iVar8 == fVar2)) break;
      if (cVar4 < '\0') {
        uVar9 = (uint)*(ushort *)((int)puVar7 + 0x16);
        iVar6 = (int)*(char *)((int)puVar7 + 0x1d);
      }
      else {
        uVar9 = puVar7[6];
        iVar6 = (int)*(short *)(puVar7 + 10);
      }
      if ((float)(int)(iVar6 + uVar9 + iVar8) <= param_2[1]) break;
      fVar2 = (float)(int)puVar7[3];
      if (fVar2 < *param_2 != (fVar2 == *param_2)) {
        if (cVar4 < '\0') {
          uVar9 = (uint)*(ushort *)(puVar7 + 5);
        }
        else {
          uVar9 = puVar7[5];
        }
        if (*param_2 < (float)(int)(uVar9 + puVar7[3])) {
          param_1[3] = 0;
          bVar3 = *(byte *)(in_ECX + 0x1d);
          param_1[2] = iVar5;
          param_1[1] = 0;
          *(byte *)(param_1 + 4) = bVar3 >> 2 & 1;
          *param_1 = in_ECX;
          return;
        }
      }
      local_14 = local_14 + 1;
      iVar5 = iVar5 + 1;
      if (iVar5 == in_ECX[1]) break;
      puVar7 = (undefined4 *)*local_14;
      iVar8 = puVar7[4];
      cVar4 = (char)((uint)*puVar7 >> 0x18);
    } while (iVar8 == *piVar1);
  }
  param_1[3] = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  *(undefined1 *)(param_1 + 4) = 0;
  *param_1 = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0059a0c0 : SUB ESP,0x14
0059a0c3 : PUSH EBX
0059a0c4 : PUSH EBP
0059a0c5 : PUSH ESI
0059a0c6 : MOV ESI,ECX
0059a0c8 : MOV EAX,dword ptr [ESI + 0x4]
0059a0cb : PUSH EDI
0059a0cc : MOV dword ptr [ESP + 0x20],ESI
0059a0d0 : TEST EAX,EAX
0059a0d2 : JBE 0x0059a1ce
0059a0d8 : MOV EBX,dword ptr [ESP + 0x2c]
0059a0dc : PUSH 0x599190
0059a0e1 : ADD EBX,0x4
0059a0e4 : PUSH EBX
0059a0e5 : PUSH EAX
0059a0e6 : PUSH 0x0
0059a0e8 : PUSH ESI
0059a0e9 : CALL 0x00599350
0059a0ee : MOV EBP,EAX
0059a0f0 : MOV EAX,dword ptr [ESI + 0x4]
0059a0f3 : ADD ESP,0x14
0059a0f6 : MOV dword ptr [ESP + 0x1c],EAX
0059a0fa : CMP EBP,EAX
0059a0fc : JNZ 0x0059a0ff
0059a0fe : DEC EBP
0059a0ff : MOV EAX,dword ptr [ESI]
0059a101 : MOV ECX,dword ptr [EAX + EBP*0x4]
0059a104 : MOV EDX,dword ptr [ECX]
0059a106 : MOV ESI,dword ptr [ECX + 0x10]
0059a109 : LEA EAX,[EAX + EBP*0x4]
0059a10c : SHR EDX,0x1f
0059a10f : MOV dword ptr [ESP + 0x18],ESI
0059a113 : AND DL,0x1
0059a116 : MOV dword ptr [ESP + 0x10],EAX
0059a11a : LEA EBX,[EBX]
0059a120 : FLD float ptr [EBX]
0059a122 : MOV dword ptr [ESP + 0x14],ESI
0059a126 : FILD dword ptr [ESP + 0x14]
0059a12a : FCOMPP
0059a12c : FNSTSW AX
0059a12e : TEST AH,0x41
0059a131 : JP 0x0059a1ce
0059a137 : TEST DL,DL
0059a139 : JZ 0x0059a141
0059a13b : MOVZX EDI,word ptr [ECX + 0x16]
0059a13f : JMP 0x0059a144
0059a141 : MOV EDI,dword ptr [ECX + 0x18]
0059a144 : TEST DL,DL
0059a146 : JZ 0x0059a14e
0059a148 : MOVSX EAX,byte ptr [ECX + 0x1d]
0059a14c : JMP 0x0059a152
0059a14e : MOVSX EAX,word ptr [ECX + 0x28]
0059a152 : FLD float ptr [EBX]
0059a154 : ADD EAX,EDI
0059a156 : ADD EAX,ESI
0059a158 : MOV dword ptr [ESP + 0x14],EAX
0059a15c : FILD dword ptr [ESP + 0x14]
0059a160 : FCOMPP
0059a162 : FNSTSW AX
0059a164 : TEST AH,0x41
0059a167 : JNZ 0x0059a1ce
0059a169 : MOV ESI,dword ptr [ECX + 0xc]
0059a16c : MOV EDI,dword ptr [ESP + 0x2c]
0059a170 : FLD float ptr [EDI]
0059a172 : MOV dword ptr [ESP + 0x14],ESI
0059a176 : FILD dword ptr [ESP + 0x14]
0059a17a : FCOMPP
0059a17c : FNSTSW AX
0059a17e : TEST AH,0x41
0059a181 : JP 0x0059a1a5
0059a183 : TEST DL,DL
0059a185 : JZ 0x0059a18d
0059a187 : MOVZX ECX,word ptr [ECX + 0x14]
0059a18b : JMP 0x0059a190
0059a18d : MOV ECX,dword ptr [ECX + 0x14]
0059a190 : FLD float ptr [EDI]
0059a192 : ADD ECX,ESI
0059a194 : MOV dword ptr [ESP + 0x14],ECX
0059a198 : FILD dword ptr [ESP + 0x14]
0059a19c : FCOMPP
0059a19e : FNSTSW AX
0059a1a0 : TEST AH,0x41
0059a1a3 : JZ 0x0059a1ee
0059a1a5 : ADD dword ptr [ESP + 0x10],0x4
0059a1aa : INC EBP
0059a1ab : CMP EBP,dword ptr [ESP + 0x1c]
0059a1af : JZ 0x0059a1ce
0059a1b1 : MOV ECX,dword ptr [ESP + 0x10]
0059a1b5 : MOV ECX,dword ptr [ECX]
0059a1b7 : MOV EDX,dword ptr [ECX]
0059a1b9 : MOV ESI,dword ptr [ECX + 0x10]
0059a1bc : SHR EDX,0x1f
0059a1bf : MOV EAX,ESI
0059a1c1 : AND DL,0x1
0059a1c4 : CMP EAX,dword ptr [ESP + 0x18]
0059a1c8 : JZ 0x0059a120
0059a1ce : MOV EAX,dword ptr [ESP + 0x28]
0059a1d2 : FLDZ
0059a1d4 : POP EDI
0059a1d5 : FSTP float ptr [EAX + 0xc]
0059a1d8 : XOR ECX,ECX
0059a1da : POP ESI
0059a1db : POP EBP
0059a1dc : MOV dword ptr [EAX + 0x4],ECX
0059a1df : MOV dword ptr [EAX + 0x8],ECX
0059a1e2 : MOV byte ptr [EAX + 0x10],CL
0059a1e5 : MOV dword ptr [EAX],ECX
0059a1e7 : POP EBX
0059a1e8 : ADD ESP,0x14
0059a1eb : RET 0x8
0059a1ee : MOV EAX,dword ptr [ESP + 0x28]
0059a1f2 : FLDZ
0059a1f4 : MOV ECX,dword ptr [ESP + 0x20]
0059a1f8 : FSTP float ptr [EAX + 0xc]
0059a1fb : MOV DL,byte ptr [ECX + 0x74]
0059a1fe : POP EDI
0059a1ff : POP ESI
0059a200 : SHR DL,0x2
0059a203 : MOV dword ptr [EAX + 0x8],EBP
0059a206 : AND DL,0x1
0059a209 : POP EBP
0059a20a : MOV dword ptr [EAX + 0x4],0x0
0059a211 : MOV byte ptr [EAX + 0x10],DL
0059a214 : MOV dword ptr [EAX],ECX
0059a216 : POP EBX
0059a217 : ADD ESP,0x14
0059a21a : RET 0x8
