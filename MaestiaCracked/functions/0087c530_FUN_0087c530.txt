PROGRAM  : Maestia.exe
FUNCTION : FUN_0087c530
ENTRY    : 0087c530
BODY     : [[0087c530, 0087c628]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0087c530(void)

{
  int *piVar1;
  int in_EAX;
  DWORD DVar2;
  
  if (*(char *)(in_EAX + 0x61) != '\0') {
    DVar2 = timeGetTime();
    if (2000 < DVar2 - *(int *)(in_EAX + 100)) {
      *(undefined1 *)(in_EAX + 0x61) = 0;
      *(undefined4 *)(in_EAX + 100) = 0;
      FUN_008787b0();
    }
  }
  if (DAT_017247e4 != 0) {
    if ((*(char *)(in_EAX + 0x69) != '\0') && (*(int *)(DAT_017247e4 + 4) == 0)) {
      FUN_0087bd20(in_EAX,1,*(undefined4 *)(in_EAX + 0x5c));
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        (**(code **)(*piVar1 + 4))(piVar1,"SetTalkNpcMode",&DAT_00c439d4,0);
      }
    }
    if ((*(char *)(in_EAX + 0x68) != '\0') && (*(int *)(DAT_017247e4 + 4) == 0)) {
      FUN_0087c380(in_EAX,1);
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        (**(code **)(*piVar1 + 4))(piVar1,"SetTalkNpcMode",&DAT_00c439e8,1);
      }
      FUN_00a1adc0(1);
    }
    if (((*(int *)(in_EAX + 0x78) != 0) && (*(int *)(DAT_017247e4 + 4) == 0)) &&
       (*(int *)(*DAT_00da9894 + 0x288) != 0)) {
      FUN_0080fda0();
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0087c530 : PUSH EDI
0087c531 : MOV EDI,EAX
0087c533 : CMP byte ptr [EDI + 0x61],0x0
0087c537 : JZ 0x0087c559
0087c539 : CALL dword ptr [0x00b85598]
0087c53f : SUB EAX,dword ptr [EDI + 0x64]
0087c542 : CMP EAX,0x7d0
0087c547 : JBE 0x0087c559
0087c549 : MOV byte ptr [EDI + 0x61],0x0
0087c54d : MOV dword ptr [EDI + 0x64],0x0
0087c554 : CALL 0x008787b0
0087c559 : MOV EAX,[0x017247e4]
0087c55e : TEST EAX,EAX
0087c560 : JZ 0x0087c627
0087c566 : CMP byte ptr [EDI + 0x69],0x0
0087c56a : JZ 0x0087c5ab
0087c56c : CMP dword ptr [EAX + 0x4],0x0
0087c570 : JNZ 0x0087c5ab
0087c572 : MOV EAX,dword ptr [EDI + 0x5c]
0087c575 : PUSH EAX
0087c576 : PUSH 0x1
0087c578 : PUSH EDI
0087c579 : CALL 0x0087bd20
0087c57e : MOV ECX,dword ptr [0x00da9894]
0087c584 : MOV EAX,dword ptr [ECX]
0087c586 : TEST EAX,EAX
0087c588 : JZ 0x0087c5ab
0087c58a : MOV EAX,dword ptr [EAX + 0x114]
0087c590 : TEST EAX,EAX
0087c592 : JZ 0x0087c5ab
0087c594 : MOV EDX,dword ptr [EAX]
0087c596 : PUSH 0x0
0087c598 : PUSH 0xc439d4
0087c59d : PUSH 0xc439d8
0087c5a2 : PUSH EAX
0087c5a3 : MOV EAX,dword ptr [EDX + 0x4]
0087c5a6 : CALL EAX
0087c5a8 : ADD ESP,0x10
0087c5ab : CMP byte ptr [EDI + 0x68],0x0
0087c5af : JZ 0x0087c5fe
0087c5b1 : MOV ECX,dword ptr [0x017247e4]
0087c5b7 : CMP dword ptr [ECX + 0x4],0x0
0087c5bb : JNZ 0x0087c5fe
0087c5bd : PUSH 0x1
0087c5bf : PUSH EDI
0087c5c0 : CALL 0x0087c380
0087c5c5 : MOV EDX,dword ptr [0x00da9894]
0087c5cb : MOV EAX,dword ptr [EDX]
0087c5cd : TEST EAX,EAX
0087c5cf : JZ 0x0087c5f2
0087c5d1 : MOV EAX,dword ptr [EAX + 0x114]
0087c5d7 : TEST EAX,EAX
0087c5d9 : JZ 0x0087c5f2
0087c5db : MOV ECX,dword ptr [EAX]
0087c5dd : MOV EDX,dword ptr [ECX + 0x4]
0087c5e0 : PUSH 0x1
0087c5e2 : PUSH 0xc439e8
0087c5e7 : PUSH 0xc439ec
0087c5ec : PUSH EAX
0087c5ed : CALL EDX
0087c5ef : ADD ESP,0x10
0087c5f2 : MOV EAX,[0x00da93ec]
0087c5f7 : PUSH 0x1
0087c5f9 : CALL 0x00a1adc0
0087c5fe : CMP dword ptr [EDI + 0x78],0x0
0087c602 : JZ 0x0087c627
0087c604 : MOV EAX,[0x017247e4]
0087c609 : CMP dword ptr [EAX + 0x4],0x0
0087c60d : JNZ 0x0087c627
0087c60f : MOV ECX,dword ptr [0x00da9894]
0087c615 : MOV EDX,dword ptr [ECX]
0087c617 : MOV EDX,dword ptr [EDX + 0x288]
0087c61d : TEST EDX,EDX
0087c61f : JZ 0x0087c627
0087c621 : POP EDI
0087c622 : JMP 0x0080fda0
0087c627 : POP EDI
0087c628 : RET
