PROGRAM  : Maestia.exe
FUNCTION : FUN_0086e3e0
ENTRY    : 0086e3e0
BODY     : [[0086e3e0, 0086e56f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0086e3e0(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  int in_EDX;
  int iVar4;
  uint local_54;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  int local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1bdc2;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar4 = *(int *)(in_EDX + 0x1fec);
  local_14 = uVar2;
  if (iVar4 != *(int *)(in_EDX + 0x1ff0)) {
    iVar3 = *(int *)(in_ECX + 8);
    iVar1 = *(int *)(in_ECX + 0xc);
    do {
      if ((*(int *)(iVar4 + 0x20) == iVar3) && (*(int *)(iVar4 + 0x24) == iVar1)) {
        if (((iVar3 == 8) && (iVar1 == 0)) || ((iVar3 == 0x800 && (iVar1 == 0)))) {
          local_38 = 7;
          local_3c = 0;
          local_4c = 0;
          local_34 = in_EDX;
          FUN_00406360(L"IDS_ZONE_ENABLE_CHATTING",0x18);
          local_8 = 0;
          iVar3 = FUN_0081d120(local_50);
          local_8._0_1_ = 1;
          if (*(uint *)(iVar3 + 0x18) < 8) {
            iVar3 = iVar3 + 4;
          }
          else {
            iVar3 = *(int *)(iVar3 + 4);
          }
          FUN_00404750(iVar3);
          local_8 = CONCAT31(local_8._1_3_,3);
          if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0(uVar2);
          }
          local_8 = CONCAT31(local_8._1_3_,4);
          if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0(uVar2);
          }
          local_4c = 0;
          local_38 = 7;
          local_3c = 0;
          (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_30,3);
          local_8 = 0xffffffff;
          if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0(uVar2);
          }
          local_18 = 7;
          local_1c = 0;
          local_2c = 0;
          in_EDX = local_34;
        }
        local_8 = 0xffffffff;
        FUN_00442980(in_EDX + 0x1fe8,&local_34,iVar4);
        break;
      }
      iVar4 = iVar4 + 0x40;
    } while (iVar4 != *(int *)(in_EDX + 0x1ff0));
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0086e3e0 : PUSH EBP
0086e3e1 : MOV EBP,ESP
0086e3e3 : PUSH -0x1
0086e3e5 : PUSH 0xb1bdc2
0086e3ea : MOV EAX,FS:[0x0]
0086e3f0 : PUSH EAX
0086e3f1 : SUB ESP,0x5c
0086e3f4 : MOV EAX,[0x00d66fa0]
0086e3f9 : XOR EAX,EBP
0086e3fb : MOV dword ptr [EBP + -0x10],EAX
0086e3fe : PUSH EBX
0086e3ff : PUSH ESI
0086e400 : PUSH EDI
0086e401 : PUSH EAX
0086e402 : LEA EAX,[EBP + -0xc]
0086e405 : MOV FS:[0x0],EAX
0086e40b : MOV ESI,EDX
0086e40d : MOV EBX,dword ptr [ESI + 0x1fec]
0086e413 : MOV EAX,dword ptr [ESI + 0x1ff0]
0086e419 : MOV dword ptr [EBP + -0x30],ESI
0086e41c : CMP EBX,EAX
0086e41e : JZ 0x0086e554
0086e424 : MOV EDX,dword ptr [ECX + 0x8]
0086e427 : MOV ECX,dword ptr [ECX + 0xc]
0086e42a : LEA EBX,[EBX]
0086e430 : MOV EDI,dword ptr [EBX + 0x20]
0086e433 : CMP EDI,EDX
0086e435 : JNZ 0x0086e43e
0086e437 : MOV EDI,dword ptr [EBX + 0x24]
0086e43a : CMP EDI,ECX
0086e43c : JZ 0x0086e44a
0086e43e : ADD EBX,0x40
0086e441 : CMP EBX,EAX
0086e443 : JNZ 0x0086e430
0086e445 : JMP 0x0086e554
0086e44a : CMP EDX,0x8
0086e44d : JNZ 0x0086e453
0086e44f : TEST ECX,ECX
0086e451 : JZ 0x0086e467
0086e453 : CMP EDX,0x800
0086e459 : JNZ 0x0086e543
0086e45f : TEST ECX,ECX
0086e461 : JNZ 0x0086e543
0086e467 : PUSH 0x18
0086e469 : XOR EAX,EAX
0086e46b : PUSH 0xc42f78
0086e470 : LEA ECX,[EBP + -0x4c]
0086e473 : MOV dword ptr [EBP + -0x34],0x7
0086e47a : MOV dword ptr [EBP + -0x38],0x0
0086e481 : MOV word ptr [EBP + -0x48],AX
0086e485 : CALL 0x00406360
0086e48a : MOV dword ptr [EBP + -0x4],0x0
0086e491 : LEA ECX,[EBP + -0x4c]
0086e494 : PUSH ECX
0086e495 : MOV ECX,dword ptr [0x0172491c]
0086e49b : LEA EDI,[EBP + -0x68]
0086e49e : CALL 0x0081d120
0086e4a3 : MOV byte ptr [EBP + -0x4],0x1
0086e4a7 : CMP dword ptr [EAX + 0x18],0x8
0086e4ab : JC 0x0086e4b2
0086e4ad : MOV EAX,dword ptr [EAX + 0x4]
0086e4b0 : JMP 0x0086e4b5
0086e4b2 : ADD EAX,0x4
0086e4b5 : PUSH EAX
0086e4b6 : LEA ESI,[EBP + -0x2c]
0086e4b9 : CALL 0x00404750
0086e4be : ADD ESP,0x4
0086e4c1 : MOV byte ptr [EBP + -0x4],0x3
0086e4c5 : CMP dword ptr [EBP + -0x50],0x8
0086e4c9 : JC 0x0086e4d3
0086e4cb : MOV ECX,dword ptr [EBP + -0x64]
0086e4ce : CALL 0x006f04e0
0086e4d3 : MOV ESI,0x7
0086e4d8 : XOR EDI,EDI
0086e4da : XOR EDX,EDX
0086e4dc : MOV dword ptr [EBP + -0x50],ESI
0086e4df : MOV dword ptr [EBP + -0x54],EDI
0086e4e2 : MOV word ptr [EBP + -0x64],DX
0086e4e6 : MOV byte ptr [EBP + -0x4],0x4
0086e4ea : CMP dword ptr [EBP + -0x34],0x8
0086e4ee : JC 0x0086e4f8
0086e4f0 : MOV ECX,dword ptr [EBP + -0x48]
0086e4f3 : CALL 0x006f04e0
0086e4f8 : MOV ECX,dword ptr [0x00da9894]
0086e4fe : XOR EAX,EAX
0086e500 : MOV word ptr [EBP + -0x48],AX
0086e504 : MOV dword ptr [EBP + -0x34],ESI
0086e507 : MOV dword ptr [EBP + -0x38],EDI
0086e50a : MOV EAX,dword ptr [ECX]
0086e50c : MOV ECX,dword ptr [EAX + 0x1a8]
0086e512 : MOV EDX,dword ptr [ECX]
0086e514 : MOV EDX,dword ptr [EDX + 0x44]
0086e517 : PUSH 0x3
0086e519 : LEA EAX,[EBP + -0x2c]
0086e51c : PUSH EAX
0086e51d : CALL EDX
0086e51f : MOV dword ptr [EBP + -0x4],0xffffffff
0086e526 : CMP dword ptr [EBP + -0x14],0x8
0086e52a : JC 0x0086e534
0086e52c : MOV ECX,dword ptr [EBP + -0x28]
0086e52f : CALL 0x006f04e0
0086e534 : XOR EAX,EAX
0086e536 : MOV dword ptr [EBP + -0x14],ESI
0086e539 : MOV ESI,dword ptr [EBP + -0x30]
0086e53c : MOV dword ptr [EBP + -0x18],EDI
0086e53f : MOV word ptr [EBP + -0x28],AX
0086e543 : PUSH EBX
0086e544 : LEA ECX,[EBP + -0x30]
0086e547 : PUSH ECX
0086e548 : ADD ESI,0x1fe8
0086e54e : PUSH ESI
0086e54f : CALL 0x00442980
0086e554 : MOV ECX,dword ptr [EBP + -0xc]
0086e557 : MOV dword ptr FS:[0x0],ECX
0086e55e : POP ECX
0086e55f : POP EDI
0086e560 : POP ESI
0086e561 : POP EBX
0086e562 : MOV ECX,dword ptr [EBP + -0x10]
0086e565 : XOR ECX,EBP
0086e567 : CALL 0x00633e6b
0086e56c : MOV ESP,EBP
0086e56e : POP EBP
0086e56f : RET
