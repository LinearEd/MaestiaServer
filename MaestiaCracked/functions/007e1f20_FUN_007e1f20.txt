PROGRAM  : Maestia.exe
FUNCTION : FUN_007e1f20
ENTRY    : 007e1f20
BODY     : [[007e1f20, 007e211e] [007e2120, 007e22a1]]

============================================================
DECOMPILED C CODE
============================================================

undefined1
FUN_007e1f20(int param_1,int *param_2,undefined4 param_3,undefined4 param_4,float *param_5)

{
  char cVar1;
  uint uVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 in_ECX;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  float10 fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  undefined4 local_8c;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  float local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  int local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  int local_44;
  int local_40;
  undefined4 local_3c;
  int local_38;
  float local_34;
  float local_30;
  float local_2c;
  float local_28;
  uint local_24;
  uint local_20;
  float local_1c;
  undefined1 local_15;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b2910c;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34 = 0.0;
  local_30 = 0.0;
  local_2c = 0.0;
  local_15 = 0;
  local_44 = 0;
  local_40 = 0;
  local_3c = 0;
  local_8 = 0;
  FUN_007d71d0(local_48);
  uVar7 = local_40 - local_44 >> 2;
  local_4c = uVar7;
  if (uVar7 != 0) {
    puVar3 = (undefined4 *)FUN_0045f110(in_ECX);
    local_7c = puVar3[7];
    local_98 = *puVar3;
    local_94 = puVar3[1];
    local_90 = puVar3[2];
    local_8c = puVar3[3];
    local_88 = puVar3[4];
    local_84 = puVar3[5];
    local_80 = puVar3[6];
    local_78 = (float)puVar3[8];
    local_74 = puVar3[9];
    local_70 = puVar3[10];
    local_6c = puVar3[0xb];
    local_68 = puVar3[0xc];
    local_64 = puVar3[0xd];
    local_60 = puVar3[0xe];
    local_5c = puVar3[0xf];
    local_1c = 200.0;
    local_20 = 0;
    local_58 = local_64;
    local_54 = local_68;
    local_50 = local_6c;
    local_38 = local_60;
    local_28 = local_78;
    local_24 = local_7c;
    if (uVar7 != 0) {
      do {
        if ((uint)(local_40 - local_44 >> 2) <= local_20) {
                    /* WARNING: Subroutine does not return */
          FUN_0045cd70(uVar2);
        }
        iVar6 = *(int *)(local_44 + local_20 * 4);
        local_38 = iVar6;
        if (iVar6 != 0) {
          if (*(char *)(iVar6 + 0x18) == '\0') {
            uVar5 = (uint)*(ushort *)(iVar6 + 4);
            if (uVar5 != 0) {
              iVar8 = 0;
              do {
                iVar4 = *(int *)(iVar6 + 0xc) + iVar8;
                D3DXVec3TransformCoord(iVar4,iVar4,&local_98);
                iVar8 = iVar8 + 0xc;
                uVar5 = uVar5 - 1;
                uVar7 = local_4c;
              } while (uVar5 != 0);
            }
            *(undefined1 *)(iVar6 + 0x18) = 1;
          }
          iVar8 = 0;
          uVar5 = *(uint *)(iVar6 + 8) / 3;
          if (uVar5 != 0) {
            do {
              local_24 = uVar5;
              cVar1 = FUN_0045ec80(&local_34,
                                   *(int *)(iVar6 + 0xc) +
                                   (uint)*(ushort *)(*(int *)(iVar6 + 0x14) + 2 + iVar8) * 0xc,
                                   param_5,0);
              if (cVar1 != '\0') {
                fVar10 = local_34 - *(float *)(param_1 + 0x200);
                fVar12 = local_2c - *(float *)(param_1 + 0x208);
                fVar11 = local_30 - *(float *)(param_1 + 0x204);
                *param_2 = *param_2 + 1;
                iVar6 = *param_2;
                fVar9 = (float10)FUN_0040f460(fVar10 * fVar10 + fVar12 * fVar12 + fVar11 * fVar11);
                local_28 = (float)fVar9;
                if (iVar6 == 1) {
                  *(float *)(param_1 + 0x23c) = local_34;
                  *(float *)(param_1 + 0x240) = local_30;
                  *(float *)(param_1 + 0x244) = local_2c;
                  *param_5 = local_28;
                }
                else {
                  if (local_1c <= local_28) goto LAB_007e2249;
                  *(float *)(param_1 + 0x23c) = local_34;
                  *(float *)(param_1 + 0x240) = local_30;
                  *(float *)(param_1 + 0x244) = local_2c;
                  *param_5 = local_28;
                }
                local_15 = 1;
                local_1c = local_28;
              }
LAB_007e2249:
              iVar8 = iVar8 + 6;
              iVar6 = local_38;
              uVar5 = local_24 - 1;
            } while (local_24 - 1 != 0);
            local_24 = 0;
            uVar7 = local_4c;
          }
        }
        local_20 = local_20 + 1;
      } while (local_20 < uVar7);
    }
  }
  local_8 = 0xffffffff;
  if (local_44 == 0) {
    ExceptionList = local_10;
    return local_15;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
007e1f20 : PUSH EBP
007e1f21 : MOV EBP,ESP
007e1f23 : PUSH -0x1
007e1f25 : PUSH 0xb2910c
007e1f2a : MOV EAX,FS:[0x0]
007e1f30 : PUSH EAX
007e1f31 : SUB ESP,0x88
007e1f37 : PUSH EBX
007e1f38 : PUSH ESI
007e1f39 : PUSH EDI
007e1f3a : MOV EAX,[0x00d66fa0]
007e1f3f : XOR EAX,EBP
007e1f41 : PUSH EAX
007e1f42 : LEA EAX,[EBP + -0xc]
007e1f45 : MOV FS:[0x0],EAX
007e1f4b : MOV ESI,ECX
007e1f4d : XORPS XMM0,XMM0
007e1f50 : XOR EBX,EBX
007e1f52 : MOVSS dword ptr [EBP + -0x30],XMM0
007e1f57 : MOVSS dword ptr [EBP + -0x2c],XMM0
007e1f5c : MOVSS dword ptr [EBP + -0x28],XMM0
007e1f61 : MOV byte ptr [EBP + -0x11],0x0
007e1f65 : MOV dword ptr [EBP + -0x40],EBX
007e1f68 : MOV dword ptr [EBP + -0x3c],EBX
007e1f6b : MOV dword ptr [EBP + -0x38],EBX
007e1f6e : MOV dword ptr [EBP + -0x4],EBX
007e1f71 : LEA EAX,[EBP + -0x44]
007e1f74 : PUSH EAX
007e1f75 : CALL 0x007d71d0
007e1f7a : MOV EDI,dword ptr [EBP + -0x3c]
007e1f7d : SUB EDI,dword ptr [EBP + -0x40]
007e1f80 : SAR EDI,0x2
007e1f83 : MOV dword ptr [EBP + -0x48],EDI
007e1f86 : CMP EDI,EBX
007e1f88 : JZ 0x007e226a
007e1f8e : PUSH ESI
007e1f8f : CALL 0x0045f110
007e1f94 : MOVSS XMM7,dword ptr [EAX + 0x1c]
007e1f99 : MOVSS XMM0,dword ptr [EAX]
007e1f9d : MOVSS XMM1,dword ptr [EAX + 0x4]
007e1fa2 : MOVSS XMM2,dword ptr [EAX + 0x8]
007e1fa7 : MOVSS XMM3,dword ptr [EAX + 0xc]
007e1fac : MOVSS XMM4,dword ptr [EAX + 0x10]
007e1fb1 : MOVSS XMM5,dword ptr [EAX + 0x14]
007e1fb6 : MOVSS XMM6,dword ptr [EAX + 0x18]
007e1fbb : MOVSS dword ptr [EBP + -0x20],XMM7
007e1fc0 : MOVSS XMM7,dword ptr [EAX + 0x20]
007e1fc5 : MOVSS dword ptr [EBP + -0x24],XMM7
007e1fca : MOVSS XMM7,dword ptr [EAX + 0x24]
007e1fcf : MOVSS dword ptr [EBP + -0x1c],XMM7
007e1fd4 : MOVSS XMM7,dword ptr [EAX + 0x28]
007e1fd9 : MOVSS dword ptr [EBP + -0x18],XMM7
007e1fde : MOVSS XMM7,dword ptr [EAX + 0x2c]
007e1fe3 : MOVSS dword ptr [EBP + -0x4c],XMM7
007e1fe8 : MOVSS XMM7,dword ptr [EAX + 0x30]
007e1fed : MOVSS dword ptr [EBP + -0x50],XMM7
007e1ff2 : MOVSS XMM7,dword ptr [EAX + 0x34]
007e1ff7 : MOVSS dword ptr [EBP + -0x54],XMM7
007e1ffc : MOVSS XMM7,dword ptr [EAX + 0x38]
007e2001 : MOVSS dword ptr [EBP + -0x34],XMM7
007e2006 : MOVSS XMM7,dword ptr [EAX + 0x3c]
007e200b : MOVSS dword ptr [EBP + 0xffffff6c],XMM0
007e2013 : MOVSS XMM0,dword ptr [EBP + -0x20]
007e2018 : MOVSS dword ptr [EBP + -0x78],XMM0
007e201d : MOVSS XMM0,dword ptr [EBP + -0x24]
007e2022 : MOVSS dword ptr [EBP + -0x74],XMM0
007e2027 : MOVSS XMM0,dword ptr [EBP + -0x1c]
007e202c : MOVSS dword ptr [EBP + -0x70],XMM0
007e2031 : MOVSS XMM0,dword ptr [EBP + -0x18]
007e2036 : MOVSS dword ptr [EBP + -0x6c],XMM0
007e203b : MOVSS XMM0,dword ptr [EBP + -0x4c]
007e2040 : MOVSS dword ptr [EBP + -0x68],XMM0
007e2045 : MOVSS XMM0,dword ptr [EBP + -0x50]
007e204a : MOVSS dword ptr [EBP + -0x64],XMM0
007e204f : MOVSS XMM0,dword ptr [EBP + -0x54]
007e2054 : MOVSS dword ptr [EBP + -0x60],XMM0
007e2059 : MOVSS XMM0,dword ptr [EBP + -0x34]
007e205e : XOR ECX,ECX
007e2060 : MOVSS dword ptr [EBP + -0x5c],XMM0
007e2065 : MOVSS XMM0,dword ptr [0x00c10f24]
007e206d : MOVSS dword ptr [EBP + 0xffffff70],XMM1
007e2075 : MOVSS dword ptr [EBP + 0xffffff74],XMM2
007e207d : MOVSS dword ptr [EBP + 0xffffff78],XMM3
007e2085 : MOVSS dword ptr [EBP + 0xffffff7c],XMM4
007e208d : MOVSS dword ptr [EBP + -0x80],XMM5
007e2092 : MOVSS dword ptr [EBP + -0x7c],XMM6
007e2097 : MOVSS dword ptr [EBP + -0x58],XMM7
007e209c : MOVSS dword ptr [EBP + -0x18],XMM0
007e20a1 : MOV dword ptr [EBP + -0x1c],ECX
007e20a4 : CMP EDI,EBX
007e20a6 : JBE 0x007e226a
007e20ac : LEA ESP,[ESP]
007e20b0 : MOV EDX,dword ptr [EBP + -0x3c]
007e20b3 : MOV EAX,dword ptr [EBP + -0x40]
007e20b6 : SUB EDX,EAX
007e20b8 : SAR EDX,0x2
007e20bb : CMP EDX,ECX
007e20bd : JBE 0x007e229d
007e20c3 : MOV ESI,dword ptr [EAX + ECX*0x4]
007e20c6 : MOV dword ptr [EBP + -0x34],ESI
007e20c9 : CMP ESI,EBX
007e20cb : JZ 0x007e225e
007e20d1 : CMP byte ptr [ESI + 0x18],0x0
007e20d5 : JNZ 0x007e2108
007e20d7 : MOVZX EBX,word ptr [ESI + 0x4]
007e20db : TEST EBX,EBX
007e20dd : JLE 0x007e2102
007e20df : XOR EDI,EDI
007e20e1 : MOV EAX,dword ptr [ESI + 0xc]
007e20e4 : LEA ECX,[EBP + 0xffffff6c]
007e20ea : ADD EAX,EDI
007e20ec : PUSH ECX
007e20ed : PUSH EAX
007e20ee : PUSH EAX
007e20ef : CALL 0x004ff734
007e20f4 : ADD EDI,0xc
007e20f7 : SUB EBX,0x1
007e20fa : JNZ 0x007e20e1
007e20fc : MOV ECX,dword ptr [EBP + -0x1c]
007e20ff : MOV EDI,dword ptr [EBP + -0x48]
007e2102 : MOV byte ptr [ESI + 0x18],0x1
007e2106 : XOR EBX,EBX
007e2108 : MOV EAX,0xaaaaaaab
007e210d : MUL dword ptr [ESI + 0x8]
007e2110 : SHR EDX,0x1
007e2112 : CMP EDX,EBX
007e2114 : JLE 0x007e225e
007e211a : MOV dword ptr [EBP + -0x20],EDX
007e211d : JMP 0x007e2123
007e2120 : MOV ESI,dword ptr [EBP + -0x34]
007e2123 : MOV EAX,dword ptr [ESI + 0x14]
007e2126 : MOV EDX,dword ptr [EBP + 0x18]
007e2129 : MOV ECX,dword ptr [ESI + 0xc]
007e212c : PUSH 0x0
007e212e : PUSH EDX
007e212f : MOVZX EDX,word ptr [EAX + EBX*0x1 + 0x4]
007e2134 : LEA EDX,[EDX + EDX*0x2]
007e2137 : LEA EDI,[ECX + EDX*0x4]
007e213a : MOVZX EDX,word ptr [EAX + EBX*0x1 + 0x2]
007e213f : MOVZX EAX,word ptr [EAX + EBX*0x1]
007e2143 : LEA EDX,[EDX + EDX*0x2]
007e2146 : LEA EDX,[ECX + EDX*0x4]
007e2149 : LEA EAX,[EAX + EAX*0x2]
007e214c : LEA ESI,[ECX + EAX*0x4]
007e214f : PUSH EDX
007e2150 : MOV EDX,dword ptr [EBP + 0x14]
007e2153 : LEA ECX,[EBP + -0x30]
007e2156 : PUSH ECX
007e2157 : MOV ECX,dword ptr [EBP + 0x10]
007e215a : CALL 0x0045ec80
007e215f : ADD ESP,0x10
007e2162 : TEST AL,AL
007e2164 : JZ 0x007e2249
007e216a : MOV ESI,dword ptr [EBP + 0x8]
007e216d : MOVSS XMM0,dword ptr [EBP + -0x30]
007e2172 : SUBSS XMM0,dword ptr [ESI + 0x200]
007e217a : MOVSS XMM2,dword ptr [EBP + -0x28]
007e217f : SUBSS XMM2,dword ptr [ESI + 0x208]
007e2187 : MOVSS XMM1,dword ptr [EBP + -0x2c]
007e218c : SUBSS XMM1,dword ptr [ESI + 0x204]
007e2194 : MOV EAX,dword ptr [EBP + 0xc]
007e2197 : INC dword ptr [EAX]
007e2199 : MOV EDI,dword ptr [EAX]
007e219b : MOVAPS XMM3,XMM0
007e219e : MULSS XMM3,XMM0
007e21a2 : MOVAPS XMM0,XMM2
007e21a5 : MULSS XMM0,XMM2
007e21a9 : ADDSS XMM3,XMM0
007e21ad : MOVAPS XMM0,XMM1
007e21b0 : MULSS XMM0,XMM1
007e21b4 : PUSH ECX
007e21b5 : ADDSS XMM3,XMM0
007e21b9 : MOVSS dword ptr [ESP],XMM3
007e21be : CALL 0x0040f460
007e21c3 : FSTP float ptr [EBP + -0x24]
007e21c6 : ADD ESP,0x4
007e21c9 : CMP EDI,0x1
007e21cc : JNZ 0x007e2203
007e21ce : MOVSS XMM0,dword ptr [EBP + -0x30]
007e21d3 : MOV EDX,dword ptr [EBP + 0x18]
007e21d6 : MOVSS dword ptr [ESI + 0x23c],XMM0
007e21de : MOVSS XMM0,dword ptr [EBP + -0x2c]
007e21e3 : MOVSS dword ptr [ESI + 0x240],XMM0
007e21eb : MOVSS XMM0,dword ptr [EBP + -0x28]
007e21f0 : MOVSS dword ptr [ESI + 0x244],XMM0
007e21f8 : MOVSS XMM0,dword ptr [EBP + -0x24]
007e21fd : MOVSS dword ptr [EDX],XMM0
007e2201 : JMP 0x007e2240
007e2203 : MOVSS XMM0,dword ptr [EBP + -0x24]
007e2208 : MOVSS XMM1,dword ptr [EBP + -0x18]
007e220d : COMISS XMM1,XMM0
007e2210 : JBE 0x007e2249
007e2212 : MOVSS XMM1,dword ptr [EBP + -0x30]
007e2217 : MOV EAX,dword ptr [EBP + 0x18]
007e221a : MOVSS dword ptr [ESI + 0x23c],XMM1
007e2222 : MOVSS XMM1,dword ptr [EBP + -0x2c]
007e2227 : MOVSS dword ptr [ESI + 0x240],XMM1
007e222f : MOVSS XMM1,dword ptr [EBP + -0x28]
007e2234 : MOVSS dword ptr [ESI + 0x244],XMM1
007e223c : MOVSS dword ptr [EAX],XMM0
007e2240 : MOV byte ptr [EBP + -0x11],0x1
007e2244 : MOVSS dword ptr [EBP + -0x18],XMM0
007e2249 : ADD EBX,0x6
007e224c : SUB dword ptr [EBP + -0x20],0x1
007e2250 : JNZ 0x007e2120
007e2256 : MOV ECX,dword ptr [EBP + -0x1c]
007e2259 : MOV EDI,dword ptr [EBP + -0x48]
007e225c : XOR EBX,EBX
007e225e : INC ECX
007e225f : MOV dword ptr [EBP + -0x1c],ECX
007e2262 : CMP ECX,EDI
007e2264 : JC 0x007e20b0
007e226a : MOV dword ptr [EBP + -0x4],0xffffffff
007e2271 : MOV ECX,dword ptr [EBP + -0x40]
007e2274 : CMP ECX,EBX
007e2276 : JZ 0x007e227d
007e2278 : CALL 0x006f04e0
007e227d : MOV AL,byte ptr [EBP + -0x11]
007e2280 : MOV dword ptr [EBP + -0x40],EBX
007e2283 : MOV dword ptr [EBP + -0x3c],EBX
007e2286 : MOV dword ptr [EBP + -0x38],EBX
007e2289 : MOV ECX,dword ptr [EBP + -0xc]
007e228c : MOV dword ptr FS:[0x0],ECX
007e2293 : POP ECX
007e2294 : POP EDI
007e2295 : POP ESI
007e2296 : POP EBX
007e2297 : MOV ESP,EBP
007e2299 : POP EBP
007e229a : RET 0x14
007e229d : CALL 0x0045cd70
