PROGRAM  : Maestia.exe
FUNCTION : FUN_0060a200
ENTRY    : 0060a200
BODY     : [[0060a200, 0060a35d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0060a200(undefined4 param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  int *in_ECX;
  int iVar6;
  int iVar7;
  int iVar8;
  float10 fVar9;
  longlong local_c;
  int *local_4;
  
  iVar8 = 0;
  if (param_2 == 0) {
    FUN_005a2e40();
    return;
  }
  local_4 = in_ECX;
  if (param_2 < 8) {
    iVar7 = 8;
  }
  else {
    fVar9 = (float10)FUN_0063b270();
    local_c = (longlong)ROUND((float)fVar9 / 0.6931472 + 1.0);
    iVar7 = 1 << ((byte)local_c & 0x1f);
  }
  local_c = CONCAT44(local_c._4_4_,2);
  puVar4 = (undefined4 *)FUN_00515840(iVar7 * 0xc + 8,&local_c);
  *puVar4 = 0;
  puVar4[1] = iVar7 + -1;
  if (iVar7 != 0) {
    iVar5 = 0;
    do {
      *(undefined4 *)(iVar5 + 8 + (int)puVar4) = 0xfffffffe;
      iVar5 = iVar5 + 0xc;
      iVar7 = iVar7 + -1;
    } while (iVar7 != 0);
  }
  if (*in_ECX != 0) {
    iVar7 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar3 = (undefined4 *)(iVar8 + 8 + *in_ECX);
      if (*(int *)(iVar8 + 8 + *in_ECX) != -2) {
        puVar1 = puVar3 + 2;
        iVar5 = 2;
        iVar6 = 0x1505;
        do {
          iVar2 = iVar5 + -1;
          iVar5 = iVar5 + -1;
          iVar6 = iVar6 * 0x1003f + (uint)*(byte *)(iVar2 + (int)puVar1);
        } while (iVar5 != 0);
        FUN_00609d10(param_1,puVar1,iVar6);
        *puVar3 = 0xfffffffe;
        in_ECX = local_4;
      }
      iVar8 = iVar8 + 0xc;
      iVar7 = iVar7 + -1;
    } while (iVar7 != 0);
    FUN_00515cf0(*in_ECX);
  }
  *in_ECX = (int)puVar4;
  return;
}



============================================================
DISASSEMBLY
============================================================
0060a200 : SUB ESP,0xc
0060a203 : MOV EAX,dword ptr [ESP + 0x14]
0060a207 : PUSH EBP
0060a208 : PUSH EDI
0060a209 : XOR EDI,EDI
0060a20b : MOV EBP,ECX
0060a20d : MOV dword ptr [ESP + 0x10],EBP
0060a211 : CMP EAX,EDI
0060a213 : JNZ 0x0060a222
0060a215 : CALL 0x005a2e40
0060a21a : POP EDI
0060a21b : POP EBP
0060a21c : ADD ESP,0xc
0060a21f : RET 0x8
0060a222 : PUSH ESI
0060a223 : CMP EAX,0x8
0060a226 : JNC 0x0060a22f
0060a228 : MOV ESI,0x8
0060a22d : JMP 0x0060a294
0060a22f : DEC EAX
0060a230 : MOV dword ptr [ESP + 0x20],EAX
0060a234 : FILD dword ptr [ESP + 0x20]
0060a238 : TEST EAX,EAX
0060a23a : JGE 0x0060a242
0060a23c : FADD float ptr [0x00cdf0e0]
0060a242 : CALL 0x0063b270
0060a247 : FSTP float ptr [ESP + 0x20]
0060a24b : FLD float ptr [ESP + 0x20]
0060a24f : MOV ESI,0x1
0060a254 : FDIV double ptr [0x00b85fe0]
0060a25a : FSTP float ptr [ESP + 0x20]
0060a25e : FLD float ptr [ESP + 0x20]
0060a262 : FADD double ptr [0x00cdf108]
0060a268 : FSTP float ptr [ESP + 0x20]
0060a26c : FLD float ptr [ESP + 0x20]
0060a270 : FNSTCW word ptr [ESP + 0x20]
0060a274 : MOVZX EAX,word ptr [ESP + 0x20]
0060a279 : OR EAX,0xc00
0060a27e : MOV dword ptr [ESP + 0xc],EAX
0060a282 : FLDCW word ptr [ESP + 0xc]
0060a286 : FISTP qword ptr [ESP + 0xc]
0060a28a : MOV CL,byte ptr [ESP + 0xc]
0060a28e : SHL ESI,CL
0060a290 : FLDCW word ptr [ESP + 0x20]
0060a294 : LEA EAX,[ESP + 0xc]
0060a298 : LEA ECX,[ESI + ESI*0x2]
0060a29b : LEA EDX,[ECX*0x4 + 0x8]
0060a2a2 : MOV ECX,dword ptr [0x00d73250]
0060a2a8 : PUSH EAX
0060a2a9 : PUSH EDX
0060a2aa : MOV dword ptr [ESP + 0x28],EDI
0060a2ae : MOV dword ptr [ESP + 0x14],0x2
0060a2b6 : CALL 0x00515840
0060a2bb : MOV dword ptr [ESP + 0x20],EAX
0060a2bf : MOV dword ptr [EAX],EDI
0060a2c1 : MOV ECX,dword ptr [ESP + 0x20]
0060a2c5 : LEA EAX,[ESI + -0x1]
0060a2c8 : MOV dword ptr [ECX + 0x4],EAX
0060a2cb : CMP ESI,EDI
0060a2cd : JBE 0x0060a2e5
0060a2cf : XOR EAX,EAX
0060a2d1 : MOV EDX,dword ptr [ESP + 0x20]
0060a2d5 : MOV dword ptr [EAX + EDX*0x1 + 0x8],0xfffffffe
0060a2dd : ADD EAX,0xc
0060a2e0 : SUB ESI,0x1
0060a2e3 : JNZ 0x0060a2d1
0060a2e5 : MOV EAX,dword ptr [EBP]
0060a2e8 : CMP EAX,EDI
0060a2ea : JZ 0x0060a34e
0060a2ec : MOV EAX,dword ptr [EAX + 0x4]
0060a2ef : PUSH EBX
0060a2f0 : LEA EBX,[EAX + 0x1]
0060a2f3 : MOV EAX,dword ptr [EBP]
0060a2f6 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
0060a2fb : LEA ESI,[EDI + EAX*0x1 + 0x8]
0060a2ff : JZ 0x0060a33c
0060a301 : LEA EDX,[ESI + 0x8]
0060a304 : MOV EAX,0x2
0060a309 : MOV ECX,0x1505
0060a30e : MOV EDI,EDI
0060a310 : MOVZX EBP,byte ptr [EAX + EDX*0x1 + -0x1]
0060a315 : IMUL ECX,ECX,0x1003f
0060a31b : DEC EAX
0060a31c : ADD ECX,EBP
0060a31e : TEST EAX,EAX
0060a320 : JA 0x0060a310
0060a322 : PUSH ECX
0060a323 : MOV ECX,dword ptr [ESP + 0x24]
0060a327 : PUSH EDX
0060a328 : PUSH ECX
0060a329 : LEA ECX,[ESP + 0x30]
0060a32d : CALL 0x00609d10
0060a332 : MOV EBP,dword ptr [ESP + 0x18]
0060a336 : MOV dword ptr [ESI],0xfffffffe
0060a33c : ADD EDI,0xc
0060a33f : SUB EBX,0x1
0060a342 : JNZ 0x0060a2f3
0060a344 : MOV EDX,dword ptr [EBP]
0060a347 : PUSH EDX
0060a348 : CALL 0x00515cf0
0060a34d : POP EBX
0060a34e : MOV EAX,dword ptr [ESP + 0x20]
0060a352 : POP ESI
0060a353 : POP EDI
0060a354 : MOV dword ptr [EBP],EAX
0060a357 : POP EBP
0060a358 : ADD ESP,0xc
0060a35b : RET 0x8
