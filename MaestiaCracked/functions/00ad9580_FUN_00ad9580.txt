PROGRAM  : Maestia.exe
FUNCTION : FUN_00ad9580
ENTRY    : 00ad9580
BODY     : [[00ad9580, 00ad983c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ad9580(void)

{
  int iVar1;
  int in_ECX;
  undefined1 local_84 [28];
  undefined1 local_68 [28];
  undefined1 local_4c [32];
  undefined4 ***local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5e74f;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  switch(*(undefined1 *)(in_ECX + 3)) {
  case 2:
    FUN_00406460(in_ECX + 5);
    local_8 = 0;
    if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
      iVar1 = FUN_00404750(L" %s Dice : %d",in_ECX + 5,*(undefined1 *)(in_ECX + 4));
      local_8._0_1_ = 1;
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      FUN_00406460(iVar1);
      local_8._0_1_ = 2;
      (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_84,1);
      local_8._0_1_ = 1;
      FUN_00406560();
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
    }
    local_8 = 0xffffffff;
    FUN_00406560();
    break;
  case 3:
    if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
      FUN_009b2580(*(undefined4 *)(in_ECX + 8));
      local_8 = 3;
      FUN_00406460(L"IDS_START_DICE");
      local_8._0_1_ = 4;
      iVar1 = FUN_0081d120(local_4c);
      local_8._0_1_ = 5;
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      iVar1 = FUN_00404750(iVar1,local_2c[0]);
      local_8._0_1_ = 6;
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      FUN_00406460(iVar1);
      local_8._0_1_ = 7;
      (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_68,1);
      local_8._0_1_ = 6;
      FUN_00406560();
      local_8._0_1_ = 5;
      FUN_00406560();
      local_8._0_1_ = 4;
      FUN_00406560();
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    break;
  case 4:
    if ((*DAT_00da9894 != 0) && (iVar1 = *(int *)(*DAT_00da9894 + 0x15c), iVar1 != 0)) {
      FUN_0098ac80(iVar1);
    }
    break;
  case 6:
    if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x15c) != 0)) {
      FUN_00989490(*(undefined4 *)(in_ECX + 9));
    }
    break;
  case 7:
    if ((*DAT_00da9894 != 0) && (iVar1 = *(int *)(*DAT_00da9894 + 0x158), iVar1 != 0)) {
      FUN_00989ed0(iVar1);
    }
    break;
  case 9:
    if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x15c) != 0)) {
      FUN_00989490(*(undefined4 *)(in_ECX + 8));
    }
    break;
  case 10:
    if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x158) != 0)) {
      FUN_0098b0a0(local_14);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ad9580 : PUSH EBP
00ad9581 : MOV EBP,ESP
00ad9583 : PUSH -0x1
00ad9585 : PUSH 0xb5e74f
00ad958a : MOV EAX,FS:[0x0]
00ad9590 : PUSH EAX
00ad9591 : SUB ESP,0xcc
00ad9597 : MOV EAX,[0x00d66fa0]
00ad959c : XOR EAX,EBP
00ad959e : MOV dword ptr [EBP + -0x10],EAX
00ad95a1 : PUSH EBX
00ad95a2 : PUSH ESI
00ad95a3 : PUSH EDI
00ad95a4 : PUSH EAX
00ad95a5 : LEA EAX,[EBP + -0xc]
00ad95a8 : MOV FS:[0x0],EAX
00ad95ae : MOV ESI,ECX
00ad95b0 : MOVZX EAX,byte ptr [ESI + 0x3]
00ad95b4 : ADD EAX,-0x2
00ad95b7 : MOV EBX,0x8
00ad95bc : CMP EAX,EBX
00ad95be : JA 0x00ad981c
00ad95c4 : JMP dword ptr [EAX*0x4 + 0xad9840]
00ad95cb : LEA EDI,[ESI + 0x5]
00ad95ce : PUSH EDI
00ad95cf : LEA ECX,[EBP + -0x2c]
00ad95d2 : CALL 0x00406460
00ad95d7 : MOV dword ptr [EBP + -0x4],0x0
00ad95de : MOV EAX,[0x00da9894]
00ad95e3 : MOV EAX,dword ptr [EAX]
00ad95e5 : TEST EAX,EAX
00ad95e7 : JZ 0x00ad965f
00ad95e9 : CMP dword ptr [EAX + 0x1a8],0x0
00ad95f0 : JZ 0x00ad965f
00ad95f2 : MOVZX ECX,byte ptr [ESI + 0x4]
00ad95f6 : PUSH ECX
00ad95f7 : PUSH EDI
00ad95f8 : PUSH 0xcbc980
00ad95fd : LEA ESI,[EBP + 0xffffff64]
00ad9603 : CALL 0x00404750
00ad9608 : ADD ESP,0xc
00ad960b : MOV byte ptr [EBP + -0x4],0x1
00ad960f : CMP dword ptr [EAX + 0x18],EBX
00ad9612 : JC 0x00ad9619
00ad9614 : MOV EAX,dword ptr [EAX + 0x4]
00ad9617 : JMP 0x00ad961c
00ad9619 : ADD EAX,0x4
00ad961c : PUSH EAX
00ad961d : LEA ECX,[EBP + -0x80]
00ad9620 : CALL 0x00406460
00ad9625 : MOV byte ptr [EBP + -0x4],0x2
00ad9629 : MOV EDX,dword ptr [0x00da9894]
00ad962f : MOV EAX,dword ptr [EDX]
00ad9631 : MOV ECX,dword ptr [EAX + 0x1a8]
00ad9637 : MOV EAX,dword ptr [ECX]
00ad9639 : MOV EAX,dword ptr [EAX + 0x44]
00ad963c : PUSH 0x1
00ad963e : LEA EDX,[EBP + -0x80]
00ad9641 : PUSH EDX
00ad9642 : CALL EAX
00ad9644 : MOV byte ptr [EBP + -0x4],0x1
00ad9648 : LEA ECX,[EBP + -0x80]
00ad964b : CALL 0x00406560
00ad9650 : MOV byte ptr [EBP + -0x4],0x0
00ad9654 : LEA ECX,[EBP + 0xffffff64]
00ad965a : CALL 0x00406560
00ad965f : MOV dword ptr [EBP + -0x4],0xffffffff
00ad9666 : LEA ECX,[EBP + -0x2c]
00ad9669 : CALL 0x00406560
00ad966e : JMP 0x00ad981c
00ad9673 : MOV ECX,dword ptr [0x00da9894]
00ad9679 : MOV EAX,dword ptr [ECX]
00ad967b : TEST EAX,EAX
00ad967d : JZ 0x00ad981c
00ad9683 : CMP dword ptr [EAX + 0x1a8],0x0
00ad968a : JZ 0x00ad981c
00ad9690 : MOV EDX,dword ptr [ESI + 0x8]
00ad9693 : MOV ECX,dword ptr [ESI + 0x4]
00ad9696 : PUSH EDX
00ad9697 : LEA ESI,[EBP + -0x2c]
00ad969a : CALL 0x009b2580
00ad969f : MOV dword ptr [EBP + -0x4],0x3
00ad96a6 : PUSH 0xcbc99c
00ad96ab : LEA ECX,[EBP + -0x48]
00ad96ae : CALL 0x00406460
00ad96b3 : MOV byte ptr [EBP + -0x4],0x4
00ad96b7 : MOV ECX,dword ptr [0x0172491c]
00ad96bd : LEA EAX,[EBP + -0x48]
00ad96c0 : PUSH EAX
00ad96c1 : LEA EDI,[EBP + 0xffffff2c]
00ad96c7 : CALL 0x0081d120
00ad96cc : MOV byte ptr [EBP + -0x4],0x5
00ad96d0 : MOV ECX,dword ptr [EBP + -0x28]
00ad96d3 : CMP dword ptr [EBP + -0x14],EBX
00ad96d6 : JNC 0x00ad96db
00ad96d8 : LEA ECX,[EBP + -0x28]
00ad96db : CMP dword ptr [EAX + 0x18],EBX
00ad96de : JC 0x00ad96e5
00ad96e0 : MOV EAX,dword ptr [EAX + 0x4]
00ad96e3 : JMP 0x00ad96e8
00ad96e5 : ADD EAX,0x4
00ad96e8 : PUSH ECX
00ad96e9 : PUSH EAX
00ad96ea : LEA ESI,[EBP + 0xffffff48]
00ad96f0 : CALL 0x00404750
00ad96f5 : ADD ESP,0x8
00ad96f8 : MOV BL,0x6
00ad96fa : MOV byte ptr [EBP + -0x4],BL
00ad96fd : CMP dword ptr [EAX + 0x18],0x8
00ad9701 : JC 0x00ad9708
00ad9703 : MOV EAX,dword ptr [EAX + 0x4]
00ad9706 : JMP 0x00ad970b
00ad9708 : ADD EAX,0x4
00ad970b : PUSH EAX
00ad970c : LEA ECX,[EBP + -0x64]
00ad970f : CALL 0x00406460
00ad9714 : MOV byte ptr [EBP + -0x4],0x7
00ad9718 : MOV ECX,dword ptr [0x00da9894]
00ad971e : MOV EAX,dword ptr [ECX]
00ad9720 : MOV ECX,dword ptr [EAX + 0x1a8]
00ad9726 : MOV EDX,dword ptr [ECX]
00ad9728 : MOV EDX,dword ptr [EDX + 0x44]
00ad972b : PUSH 0x1
00ad972d : LEA EAX,[EBP + -0x64]
00ad9730 : PUSH EAX
00ad9731 : CALL EDX
00ad9733 : MOV byte ptr [EBP + -0x4],BL
00ad9736 : LEA ECX,[EBP + -0x64]
00ad9739 : CALL 0x00406560
00ad973e : MOV byte ptr [EBP + -0x4],0x5
00ad9742 : LEA ECX,[EBP + 0xffffff48]
00ad9748 : CALL 0x00406560
00ad974d : MOV byte ptr [EBP + -0x4],0x4
00ad9751 : LEA ECX,[EBP + 0xffffff2c]
00ad9757 : CALL 0x00406560
00ad975c : MOV byte ptr [EBP + -0x4],0x3
00ad9760 : LEA ECX,[EBP + -0x48]
00ad9763 : CALL 0x00406560
00ad9768 : MOV dword ptr [EBP + -0x4],0xffffffff
00ad976f : LEA ECX,[EBP + -0x2c]
00ad9772 : CALL 0x00406560
00ad9777 : JMP 0x00ad981c
00ad977c : MOV EAX,[0x00da9894]
00ad9781 : MOV EAX,dword ptr [EAX]
00ad9783 : TEST EAX,EAX
00ad9785 : JZ 0x00ad981c
00ad978b : MOV EAX,dword ptr [EAX + 0x15c]
00ad9791 : TEST EAX,EAX
00ad9793 : JZ 0x00ad981c
00ad9799 : PUSH EAX
00ad979a : CALL 0x0098ac80
00ad979f : JMP 0x00ad981c
00ad97a1 : MOV ECX,dword ptr [0x00da9894]
00ad97a7 : MOV EAX,dword ptr [ECX]
00ad97a9 : TEST EAX,EAX
00ad97ab : JZ 0x00ad981c
00ad97ad : MOV EAX,dword ptr [EAX + 0x158]
00ad97b3 : TEST EAX,EAX
00ad97b5 : JZ 0x00ad981c
00ad97b7 : PUSH EAX
00ad97b8 : MOV ECX,ESI
00ad97ba : CALL 0x00989ed0
00ad97bf : JMP 0x00ad981c
00ad97c1 : MOV EDX,dword ptr [0x00da9894]
00ad97c7 : MOV EAX,dword ptr [EDX]
00ad97c9 : TEST EAX,EAX
00ad97cb : JZ 0x00ad981c
00ad97cd : MOV EDI,dword ptr [EAX + 0x15c]
00ad97d3 : TEST EDI,EDI
00ad97d5 : JZ 0x00ad981c
00ad97d7 : MOV EAX,dword ptr [ESI + 0x9]
00ad97da : PUSH EAX
00ad97db : CALL 0x00989490
00ad97e0 : JMP 0x00ad981c
00ad97e2 : MOV ECX,dword ptr [0x00da9894]
00ad97e8 : MOV EAX,dword ptr [ECX]
00ad97ea : TEST EAX,EAX
00ad97ec : JZ 0x00ad981c
00ad97ee : MOV EDI,dword ptr [EAX + 0x15c]
00ad97f4 : TEST EDI,EDI
00ad97f6 : JZ 0x00ad981c
00ad97f8 : MOV EDX,dword ptr [ESI + 0x8]
00ad97fb : PUSH EDX
00ad97fc : CALL 0x00989490
00ad9801 : JMP 0x00ad981c
00ad9803 : MOV EAX,[0x00da9894]
00ad9808 : MOV EAX,dword ptr [EAX]
00ad980a : TEST EAX,EAX
00ad980c : JZ 0x00ad981c
00ad980e : CMP dword ptr [EAX + 0x158],0x0
00ad9815 : JZ 0x00ad981c
00ad9817 : CALL 0x0098b0a0
00ad981c : MOV EAX,0x1
00ad9821 : MOV ECX,dword ptr [EBP + -0xc]
00ad9824 : MOV dword ptr FS:[0x0],ECX
00ad982b : POP ECX
00ad982c : POP EDI
00ad982d : POP ESI
00ad982e : POP EBX
00ad982f : MOV ECX,dword ptr [EBP + -0x10]
00ad9832 : XOR ECX,EBP
00ad9834 : CALL 0x00633e6b
00ad9839 : MOV ESP,EBP
00ad983b : POP EBP
00ad983c : RET
