PROGRAM  : Maestia.exe
FUNCTION : FUN_007bb3e0
ENTRY    : 007bb3e0
BODY     : [[007bb3e0, 007bb498]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bb3e0(char param_1)

{
  int unaff_ESI;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0d7e8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(unaff_ESI + 4);
  local_18 = 0;
  local_20 = ".\\mss\\AvaMssMgr.cpp";
  local_1c = 0x518;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  if ((*(int *)(unaff_ESI + 0x20) != 0) && (*(char *)(unaff_ESI + 0xd9) != param_1)) {
    *(char *)(unaff_ESI + 0xd9) = param_1;
  }
  if (local_18 != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_24);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bb3e0 : PUSH EBP
007bb3e1 : MOV EBP,ESP
007bb3e3 : PUSH -0x1
007bb3e5 : PUSH 0xb0d7e8
007bb3ea : MOV EAX,FS:[0x0]
007bb3f0 : PUSH EAX
007bb3f1 : SUB ESP,0x14
007bb3f4 : PUSH EBX
007bb3f5 : PUSH EDI
007bb3f6 : MOV EAX,[0x00d66fa0]
007bb3fb : XOR EAX,EBP
007bb3fd : PUSH EAX
007bb3fe : LEA EAX,[EBP + -0xc]
007bb401 : MOV FS:[0x0],EAX
007bb407 : MOV BL,byte ptr [EBP + 0x8]
007bb40a : LEA ECX,[EBP + -0x20]
007bb40d : LEA EAX,[ESI + 0x4]
007bb410 : XOR EDI,EDI
007bb412 : PUSH ECX
007bb413 : MOV dword ptr [EBP + -0x14],EDI
007bb416 : MOV dword ptr [EBP + -0x20],EAX
007bb419 : MOV dword ptr [EBP + -0x1c],0xc18fc0
007bb420 : MOV dword ptr [EBP + -0x18],0x518
007bb427 : MOV dword ptr [EBP + -0x10],0x1
007bb42e : CALL 0x006ef1a0
007bb433 : MOV dword ptr [EBP + -0x4],EDI
007bb436 : CMP dword ptr [ESI + 0x20],EDI
007bb439 : JNZ 0x007bb44d
007bb43b : MOV dword ptr [EBP + -0x4],0xffffffff
007bb442 : CMP dword ptr [EBP + -0x14],EDI
007bb445 : JZ 0x007bb486
007bb447 : MOV EDX,dword ptr [EBP + -0x20]
007bb44a : PUSH EDX
007bb44b : JMP 0x007bb47d
007bb44d : CMP byte ptr [ESI + 0xd9],BL
007bb453 : JNZ 0x007bb467
007bb455 : MOV dword ptr [EBP + -0x4],0xffffffff
007bb45c : CMP dword ptr [EBP + -0x14],EDI
007bb45f : JZ 0x007bb486
007bb461 : MOV EAX,dword ptr [EBP + -0x20]
007bb464 : PUSH EAX
007bb465 : JMP 0x007bb47d
007bb467 : MOV byte ptr [ESI + 0xd9],BL
007bb46d : MOV dword ptr [EBP + -0x4],0xffffffff
007bb474 : CMP dword ptr [EBP + -0x14],EDI
007bb477 : JZ 0x007bb486
007bb479 : MOV ECX,dword ptr [EBP + -0x20]
007bb47c : PUSH ECX
007bb47d : CALL dword ptr [0x00b8511c]
007bb483 : MOV dword ptr [EBP + -0x14],EDI
007bb486 : MOV ECX,dword ptr [EBP + -0xc]
007bb489 : MOV dword ptr FS:[0x0],ECX
007bb490 : POP ECX
007bb491 : POP EDI
007bb492 : POP EBX
007bb493 : MOV ESP,EBP
007bb495 : POP EBP
007bb496 : RET 0x4
