PROGRAM  : Maestia.exe
FUNCTION : FUN_005288f0
ENTRY    : 005288f0
BODY     : [[005288f0, 00528bd0]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 * FUN_005288f0(undefined1 *param_1,int param_2,undefined4 param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  undefined1 uVar3;
  char cVar4;
  float10 fVar5;
  double local_70;
  double local_68;
  byte local_60 [16];
  byte local_50 [76];
  
  if (param_4 == 0) {
    uVar3 = FUN_00528400(param_2,param_3);
    *param_1 = 2;
    param_1[4] = uVar3;
    return param_1;
  }
  FUN_00527d10(local_60,param_2,0);
  FUN_00527d10(local_50,param_2,0);
  if ((local_60[0] == 5) && (local_50[0] == 5)) {
    if (param_4 < 0) {
      FUN_005272e0(&local_68,param_2,0xffffffff,0);
      FUN_005272e0(&local_70,param_2,0xffffffff,0);
      uVar3 = FUN_00525da0();
      piVar1 = (int *)(local_70._0_4_ + 8);
      *piVar1 = *piVar1 + -1;
      iVar2 = *piVar1;
      *param_1 = 2;
      param_1[4] = uVar3;
      if (iVar2 == 0) {
        FUN_00525340();
      }
      piVar1 = (int *)(local_68._0_4_ + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
    }
    else {
      FUN_005272e0(&local_70,param_2,0xffffffff,0);
      FUN_005272e0(&local_68,param_2,0xffffffff,0);
      uVar3 = FUN_00525df0();
      piVar1 = (int *)(local_68._0_4_ + 8);
      *piVar1 = *piVar1 + -1;
      iVar2 = *piVar1;
      *param_1 = 2;
      param_1[4] = uVar3;
      if (iVar2 == 0) {
        FUN_00525340();
      }
      piVar1 = (int *)(local_70._0_4_ + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
    }
  }
  else {
    if ((6 < *(byte *)(param_2 + 0x7c)) && ((local_60[0] == 0 || (local_50[0] == 0)))) {
      *param_1 = 0;
      if (4 < local_50[0]) {
        FUN_00526400();
      }
      goto LAB_00528bbb;
    }
    fVar5 = (float10)FUN_00527730();
    if (param_4 < 0) {
      local_70 = (double)fVar5;
      fVar5 = (float10)FUN_00527730();
      local_68 = (double)fVar5;
    }
    else {
      local_68 = (double)fVar5;
      fVar5 = (float10)FUN_00527730();
      local_70 = (double)fVar5;
    }
    cVar4 = FUN_0050a220(local_70);
    if ((cVar4 == '\0') && (cVar4 = FUN_0050a220(local_68), cVar4 == '\0')) {
      if ((((local_70 == local_68) ||
           ((cVar4 = FUN_005b0c60(local_70), cVar4 != '\0' &&
            (cVar4 = FUN_005b0be0(local_68), cVar4 != '\0')))) ||
          ((cVar4 = FUN_005b0c60(local_68), cVar4 != '\0' &&
           (cVar4 = FUN_005b0be0(local_70), cVar4 != '\0')))) ||
         (cVar4 = FUN_0051cc20(local_70), cVar4 != '\0')) {
LAB_00528ac0:
        *param_1 = 2;
        param_1[4] = 0;
      }
      else {
        cVar4 = FUN_0051cc20(local_68);
        if (cVar4 == '\0') {
          cVar4 = FUN_0051cc50(local_68);
          if (cVar4 != '\0') goto LAB_00528ac0;
          cVar4 = FUN_0051cc50(local_70);
          if (cVar4 == '\0') {
            if (local_68 <= local_70) goto LAB_00528ac0;
            *param_1 = 2;
            param_1[4] = 1;
          }
          else {
            *param_1 = 2;
            param_1[4] = 1;
          }
        }
        else {
          *param_1 = 2;
          param_1[4] = 1;
        }
      }
    }
    else {
      *param_1 = 0;
    }
  }
  if (4 < local_50[0]) {
    FUN_00526400();
  }
LAB_00528bbb:
  if (4 < local_60[0]) {
    FUN_00526400();
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
005288f0 : PUSH EBP
005288f1 : MOV EBP,ESP
005288f3 : AND ESP,0xffffffc0
005288f6 : SUB ESP,0x34
005288f9 : PUSH EBX
005288fa : PUSH ESI
005288fb : PUSH EDI
005288fc : MOV EDI,dword ptr [EBP + 0x14]
005288ff : TEST EDI,EDI
00528901 : JNZ 0x00528924
00528903 : MOV EAX,dword ptr [EBP + 0x10]
00528906 : MOV EDX,dword ptr [EBP + 0xc]
00528909 : PUSH EAX
0052890a : PUSH EDX
0052890b : CALL 0x00528400
00528910 : MOV CL,AL
00528912 : MOV EAX,dword ptr [EBP + 0x8]
00528915 : MOV byte ptr [EAX],0x2
00528918 : MOV byte ptr [EAX + 0x4],CL
0052891b : POP EDI
0052891c : POP ESI
0052891d : POP EBX
0052891e : MOV ESP,EBP
00528920 : POP EBP
00528921 : RET 0x10
00528924 : MOV ESI,dword ptr [EBP + 0xc]
00528927 : PUSH 0x0
00528929 : PUSH ESI
0052892a : LEA EAX,[ESP + 0x28]
0052892e : PUSH EAX
0052892f : CALL 0x00527d10
00528934 : PUSH 0x0
00528936 : PUSH ESI
00528937 : LEA ECX,[ESP + 0x38]
0052893b : PUSH ECX
0052893c : MOV ECX,dword ptr [EBP + 0x10]
0052893f : CALL 0x00527d10
00528944 : MOV CL,byte ptr [ESP + 0x20]
00528948 : MOV AL,byte ptr [ESP + 0x30]
0052894c : MOV BL,0x5
0052894e : CMP CL,BL
00528950 : JNZ 0x00528a22
00528956 : CMP AL,BL
00528958 : JNZ 0x00528a22
0052895e : PUSH 0x0
00528960 : LEA ECX,[ESP + 0x34]
00528964 : TEST EDI,EDI
00528966 : JGE 0x005289c5
00528968 : OR EDI,0xffffffff
0052896b : PUSH EDI
0052896c : PUSH ESI
0052896d : LEA EDX,[ESP + 0x24]
00528971 : PUSH EDX
00528972 : CALL 0x005272e0
00528977 : PUSH 0x0
00528979 : PUSH EDI
0052897a : PUSH ESI
0052897b : LEA EAX,[ESP + 0x1c]
0052897f : PUSH EAX
00528980 : LEA ECX,[ESP + 0x30]
00528984 : CALL 0x005272e0
00528989 : LEA ECX,[ESP + 0x18]
0052898d : PUSH ECX
0052898e : LEA ECX,[ESP + 0x14]
00528992 : CALL 0x00525da0
00528997 : MOV ESI,dword ptr [EBP + 0x8]
0052899a : MOV ECX,dword ptr [ESP + 0x10]
0052899e : ADD dword ptr [ECX + 0x8],EDI
005289a1 : MOV byte ptr [ESI],0x2
005289a4 : MOV byte ptr [ESI + 0x4],AL
005289a7 : JNZ 0x005289ae
005289a9 : CALL 0x00525340
005289ae : MOV ECX,dword ptr [ESP + 0x18]
005289b2 : ADD dword ptr [ECX + 0x8],EDI
005289b5 : JNZ 0x00528ba8
005289bb : CALL 0x00525340
005289c0 : JMP 0x00528ba8
005289c5 : OR EDI,0xffffffff
005289c8 : PUSH EDI
005289c9 : PUSH ESI
005289ca : LEA EDX,[ESP + 0x1c]
005289ce : PUSH EDX
005289cf : CALL 0x005272e0
005289d4 : PUSH 0x0
005289d6 : PUSH EDI
005289d7 : PUSH ESI
005289d8 : LEA EAX,[ESP + 0x24]
005289dc : PUSH EAX
005289dd : LEA ECX,[ESP + 0x30]
005289e1 : CALL 0x005272e0
005289e6 : LEA ECX,[ESP + 0x10]
005289ea : PUSH ECX
005289eb : LEA ECX,[ESP + 0x1c]
005289ef : CALL 0x00525df0
005289f4 : MOV ESI,dword ptr [EBP + 0x8]
005289f7 : MOV ECX,dword ptr [ESP + 0x18]
005289fb : ADD dword ptr [ECX + 0x8],EDI
005289fe : MOV byte ptr [ESI],0x2
00528a01 : MOV byte ptr [ESI + 0x4],AL
00528a04 : JNZ 0x00528a0b
00528a06 : CALL 0x00525340
00528a0b : MOV ECX,dword ptr [ESP + 0x10]
00528a0f : ADD dword ptr [ECX + 0x8],EDI
00528a12 : JNZ 0x00528ba8
00528a18 : CALL 0x00525340
00528a1d : JMP 0x00528ba8
00528a22 : CMP byte ptr [ESI + 0x7c],0x6
00528a26 : JBE 0x00528a4e
00528a28 : TEST CL,CL
00528a2a : JZ 0x00528a30
00528a2c : TEST AL,AL
00528a2e : JNZ 0x00528a4e
00528a30 : MOV ESI,dword ptr [EBP + 0x8]
00528a33 : MOV byte ptr [ESI],0x0
00528a36 : CMP AL,BL
00528a38 : JC 0x00528a47
00528a3a : LEA ECX,[ESP + 0x30]
00528a3e : CALL 0x00526400
00528a43 : MOV CL,byte ptr [ESP + 0x20]
00528a47 : CMP CL,BL
00528a49 : JMP 0x00528bbb
00528a4e : PUSH ESI
00528a4f : LEA ECX,[ESP + 0x24]
00528a53 : CALL 0x00527730
00528a58 : PUSH ESI
00528a59 : LEA ECX,[ESP + 0x34]
00528a5d : TEST EDI,EDI
00528a5f : JGE 0x00528a70
00528a61 : FSTP double ptr [ESP + 0x14]
00528a65 : CALL 0x00527730
00528a6a : FSTP double ptr [ESP + 0x18]
00528a6e : JMP 0x00528a7d
00528a70 : FSTP double ptr [ESP + 0x1c]
00528a74 : CALL 0x00527730
00528a79 : FSTP double ptr [ESP + 0x10]
00528a7d : FLD double ptr [ESP + 0x10]
00528a81 : SUB ESP,0x8
00528a84 : FSTP double ptr [ESP]
00528a87 : CALL 0x0050a220
00528a8c : TEST AL,AL
00528a8e : JNZ 0x00528ba2
00528a94 : FLD double ptr [ESP + 0x18]
00528a98 : SUB ESP,0x8
00528a9b : FSTP double ptr [ESP]
00528a9e : CALL 0x0050a220
00528aa3 : TEST AL,AL
00528aa5 : JNZ 0x00528ba2
00528aab : FLD double ptr [ESP + 0x18]
00528aaf : FLD double ptr [ESP + 0x10]
00528ab3 : FUCOM
00528ab5 : FNSTSW AX
00528ab7 : FSTP ST1
00528ab9 : TEST AH,0x44
00528abc : JP 0x00528ad0
00528abe : FSTP ST0
00528ac0 : MOV ESI,dword ptr [EBP + 0x8]
00528ac3 : XOR AL,AL
00528ac5 : MOV byte ptr [ESI],0x2
00528ac8 : MOV byte ptr [ESI + 0x4],AL
00528acb : JMP 0x00528ba8
00528ad0 : SUB ESP,0x8
00528ad3 : FSTP double ptr [ESP]
00528ad6 : CALL 0x005b0c60
00528adb : TEST AL,AL
00528add : JZ 0x00528af2
00528adf : FLD double ptr [ESP + 0x18]
00528ae3 : SUB ESP,0x8
00528ae6 : FSTP double ptr [ESP]
00528ae9 : CALL 0x005b0be0
00528aee : TEST AL,AL
00528af0 : JNZ 0x00528ac0
00528af2 : FLD double ptr [ESP + 0x18]
00528af6 : SUB ESP,0x8
00528af9 : FSTP double ptr [ESP]
00528afc : CALL 0x005b0c60
00528b01 : TEST AL,AL
00528b03 : JZ 0x00528b18
00528b05 : FLD double ptr [ESP + 0x10]
00528b09 : SUB ESP,0x8
00528b0c : FSTP double ptr [ESP]
00528b0f : CALL 0x005b0be0
00528b14 : TEST AL,AL
00528b16 : JNZ 0x00528ac0
00528b18 : FLD double ptr [ESP + 0x10]
00528b1c : SUB ESP,0x8
00528b1f : FSTP double ptr [ESP]
00528b22 : CALL 0x0051cc20
00528b27 : TEST AL,AL
00528b29 : JNZ 0x00528ac0
00528b2b : FLD double ptr [ESP + 0x18]
00528b2f : SUB ESP,0x8
00528b32 : FSTP double ptr [ESP]
00528b35 : CALL 0x0051cc20
00528b3a : TEST AL,AL
00528b3c : JZ 0x00528b4b
00528b3e : MOV ESI,dword ptr [EBP + 0x8]
00528b41 : MOV AL,0x1
00528b43 : MOV byte ptr [ESI],0x2
00528b46 : MOV byte ptr [ESI + 0x4],AL
00528b49 : JMP 0x00528ba8
00528b4b : FLD double ptr [ESP + 0x18]
00528b4f : SUB ESP,0x8
00528b52 : FSTP double ptr [ESP]
00528b55 : CALL 0x0051cc50
00528b5a : TEST AL,AL
00528b5c : JNZ 0x00528ac0
00528b62 : FLD double ptr [ESP + 0x10]
00528b66 : SUB ESP,0x8
00528b69 : FSTP double ptr [ESP]
00528b6c : CALL 0x0051cc50
00528b71 : TEST AL,AL
00528b73 : JZ 0x00528b82
00528b75 : MOV ESI,dword ptr [EBP + 0x8]
00528b78 : MOV AL,0x1
00528b7a : MOV byte ptr [ESI],0x2
00528b7d : MOV byte ptr [ESI + 0x4],AL
00528b80 : JMP 0x00528ba8
00528b82 : FLD double ptr [ESP + 0x18]
00528b86 : FCOMP double ptr [ESP + 0x10]
00528b8a : FNSTSW AX
00528b8c : TEST AH,0x41
00528b8f : JNZ 0x00528ac0
00528b95 : MOV ESI,dword ptr [EBP + 0x8]
00528b98 : MOV AL,0x1
00528b9a : MOV byte ptr [ESI],0x2
00528b9d : MOV byte ptr [ESI + 0x4],AL
00528ba0 : JMP 0x00528ba8
00528ba2 : MOV ESI,dword ptr [EBP + 0x8]
00528ba5 : MOV byte ptr [ESI],0x0
00528ba8 : CMP byte ptr [ESP + 0x30],BL
00528bac : JC 0x00528bb7
00528bae : LEA ECX,[ESP + 0x30]
00528bb2 : CALL 0x00526400
00528bb7 : CMP byte ptr [ESP + 0x20],BL
00528bbb : JC 0x00528bc6
00528bbd : LEA ECX,[ESP + 0x20]
00528bc1 : CALL 0x00526400
00528bc6 : POP EDI
00528bc7 : MOV EAX,ESI
00528bc9 : POP ESI
00528bca : POP EBX
00528bcb : MOV ESP,EBP
00528bcd : POP EBP
00528bce : RET 0x10
