PROGRAM  : Maestia.exe
FUNCTION : FUN_007e1920
ENTRY    : 007e1920
BODY     : [[007e1920, 007e1cbc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007e1920(int param_1)

{
  int iVar1;
  short sVar2;
  int iVar3;
  int *piVar4;
  short *psVar5;
  int in_ECX;
  undefined4 local_90 [2];
  undefined4 ***local_88 [4];
  int local_78;
  uint local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined1 local_48;
  int *local_44;
  LONG local_40;
  undefined1 local_3c;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b290dc;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_ECX != 0) {
    if (DAT_01725208 == 0) {
      FUN_00406460(L"Sound Mgr is Null !!");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaLib::AvaTerrainSceneMgr::AddSound",0x1d53,local_34);
      }
      local_8 = 0xffffffff;
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_1c = 7;
      local_20 = 0;
      local_30 = 0;
    }
    else {
      iVar3 = FUN_006f0760(0x2c4,"",0,(DAT_01725270 >> 3 & 1) == 0,local_18);
      local_8 = 1;
      if (iVar3 == 0) {
        piVar4 = (int *)0x0;
      }
      else {
        FUN_00406460(in_ECX);
        local_8 = CONCAT31(local_8._1_3_,2);
        piVar4 = (int *)FUN_007d88c0(iVar3,0);
      }
      local_8 = 0xffffffff;
      if (iVar3 != 0) {
        FUN_00406560();
      }
      iVar3 = *(int *)(in_ECX + 0xa0c);
      iVar1 = *(int *)(in_ECX + 0xa10);
      piVar4[0x1a] = *(int *)(in_ECX + 0xa08);
      piVar4[0x1b] = iVar3;
      piVar4[0x1c] = iVar1;
      *(undefined1 *)((int)piVar4 + 0x5d) = 1;
      *(undefined1 *)(piVar4 + 0x4d) = 1;
      *(undefined1 *)(piVar4 + 0x17) = 1;
      if ((int *)piVar4[0xb] != (int *)0x0) {
        (**(code **)(*(int *)piVar4[0xb] + 0x60))(piVar4);
      }
      FUN_00438c30(local_90);
      local_8 = 4;
      local_64 = *(undefined4 *)(in_ECX + 0xa1c);
      local_60 = *(undefined4 *)(in_ECX + 0xa20);
      local_70 = *(undefined4 *)(in_ECX + 0xa08);
      local_6c = *(undefined4 *)(in_ECX + 0xa0c);
      local_68 = *(undefined4 *)(in_ECX + 0xa10);
      local_3c = 1;
      local_48 = 1;
      local_44 = piVar4;
      InterlockedIncrement((LONG *)(param_1 + 0x1f8));
      local_40 = *(LONG *)(param_1 + 0x1f8);
      local_90[0] = 2;
      psVar5 = (short *)(in_ECX + 0x600);
      do {
        sVar2 = *psVar5;
        psVar5 = psVar5 + 1;
      } while (sVar2 != 0);
      FUN_00406360((short *)(in_ECX + 0x600),(int)psVar5 - (in_ECX + 0x602) >> 1);
      if (local_74 < 8) {
        local_88[0] = local_88;
      }
      iVar3 = FUN_00405b70(local_88[0]);
      if ((iVar3 == 0) && (local_78 == 0)) {
        FUN_00404750(L"Failed - Add sound node~! -> name[%s(%s)] / id[%d]");
        local_8._0_1_ = 5;
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                    (L"AvaLib::AvaTerrainSceneMgr::AddSound",0x1d71,local_34);
        }
        (**(code **)(*piVar4 + 0x18))(1);
        local_8 = CONCAT31(local_8._1_3_,4);
        FUN_00406560();
      }
      else {
        iVar3 = FUN_007bdd50();
        if (iVar3 == 0) {
          FUN_00404750(L"Failed - Add Env Sound -> name[%s(%s)] / id[%d]");
          local_8._0_1_ = 6;
          if ((int *)*DAT_00da98e8 != (int *)0x0) {
            (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                      (L"AvaLib::AvaTerrainSceneMgr::AddSound",0x1d79,local_34);
          }
          (**(code **)(*piVar4 + 0x18))(1);
          local_8 = CONCAT31(local_8._1_3_,4);
          FUN_00406560();
        }
        else {
          FUN_0045c8c0(param_1 + 0x1ec);
          if (*(char *)(param_1 + 0x2ab4) != '\0') {
            *(int **)(in_ECX + 0xa48) = piVar4;
          }
        }
      }
      local_8 = 0xffffffff;
      FUN_004427d0(local_90);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007e1920 : PUSH EBP
007e1921 : MOV EBP,ESP
007e1923 : PUSH -0x1
007e1925 : PUSH 0xb290dc
007e192a : MOV EAX,FS:[0x0]
007e1930 : PUSH EAX
007e1931 : SUB ESP,0x90
007e1937 : MOV EAX,[0x00d66fa0]
007e193c : XOR EAX,EBP
007e193e : MOV dword ptr [EBP + -0x14],EAX
007e1941 : PUSH EBX
007e1942 : PUSH ESI
007e1943 : PUSH EDI
007e1944 : PUSH EAX
007e1945 : LEA EAX,[EBP + -0xc]
007e1948 : MOV FS:[0x0],EAX
007e194e : MOV EAX,dword ptr [EBP + 0x8]
007e1951 : XOR EBX,EBX
007e1953 : MOV ESI,ECX
007e1955 : MOV dword ptr [EBP + 0xffffff68],EAX
007e195b : MOV dword ptr [EBP + 0xffffff70],EBX
007e1961 : CMP ESI,EBX
007e1963 : JZ 0x007e1c9f
007e1969 : CMP dword ptr [0x01725208],EBX
007e196f : JNZ 0x007e19cc
007e1971 : PUSH 0xc23d58
007e1976 : LEA ECX,[EBP + -0x30]
007e1979 : CALL 0x00406460
007e197e : MOV dword ptr [EBP + -0x4],EBX
007e1981 : MOV ECX,dword ptr [0x00da98e8]
007e1987 : MOV ECX,dword ptr [ECX]
007e1989 : CMP ECX,EBX
007e198b : JZ 0x007e19a2
007e198d : MOV EDX,dword ptr [ECX]
007e198f : MOV EDX,dword ptr [EDX + 0x14]
007e1992 : LEA EAX,[EBP + -0x30]
007e1995 : PUSH EAX
007e1996 : PUSH 0x1d53
007e199b : PUSH 0xc23d88
007e19a0 : CALL EDX
007e19a2 : MOV dword ptr [EBP + -0x4],0xffffffff
007e19a9 : CMP dword ptr [EBP + -0x18],0x8
007e19ad : JC 0x007e19b7
007e19af : MOV ECX,dword ptr [EBP + -0x2c]
007e19b2 : CALL 0x006f04e0
007e19b7 : XOR EAX,EAX
007e19b9 : MOV dword ptr [EBP + -0x18],0x7
007e19c0 : MOV dword ptr [EBP + -0x1c],EBX
007e19c3 : MOV word ptr [EBP + -0x2c],AX
007e19c7 : JMP 0x007e1c9f
007e19cc : MOV ECX,dword ptr [0x01725270]
007e19d2 : SHR ECX,0x3
007e19d5 : MOV EDI,0x1
007e19da : MOV EDX,EBX
007e19dc : AND ECX,EDI
007e19de : SETZ DL
007e19e1 : PUSH EDX
007e19e2 : PUSH EBX
007e19e3 : PUSH 0xbf1a4a
007e19e8 : PUSH 0x2c4
007e19ed : CALL 0x006f0760
007e19f2 : MOV EBX,EAX
007e19f4 : ADD ESP,0x10
007e19f7 : MOV dword ptr [EBP + 0xffffff6c],EBX
007e19fd : MOV dword ptr [EBP + -0x4],EDI
007e1a00 : TEST EBX,EBX
007e1a02 : JZ 0x007e1a26
007e1a04 : PUSH ESI
007e1a05 : LEA ECX,[EBP + -0x30]
007e1a08 : CALL 0x00406460
007e1a0d : MOV byte ptr [EBP + -0x4],0x2
007e1a11 : PUSH 0x0
007e1a13 : PUSH EBX
007e1a14 : LEA EDX,[EBP + -0x30]
007e1a17 : MOV dword ptr [EBP + 0xffffff70],EDI
007e1a1d : CALL 0x007d88c0
007e1a22 : MOV EBX,EAX
007e1a24 : JMP 0x007e1a28
007e1a26 : XOR EBX,EBX
007e1a28 : MOV dword ptr [EBP + -0x4],0x3
007e1a2f : MOV dword ptr [EBP + 0xffffff6c],EBX
007e1a35 : MOV dword ptr [EBP + -0x4],0xffffffff
007e1a3c : TEST byte ptr [EBP + 0xffffff70],0x1
007e1a43 : JZ 0x007e1a54
007e1a45 : AND dword ptr [EBP + 0xffffff70],0xfffffffe
007e1a4c : LEA ECX,[EBP + -0x30]
007e1a4f : CALL 0x00406560
007e1a54 : MOVSS XMM0,dword ptr [ESI + 0xa08]
007e1a5c : MOVSS XMM1,dword ptr [ESI + 0xa0c]
007e1a64 : MOVSS XMM2,dword ptr [ESI + 0xa10]
007e1a6c : MOV ECX,dword ptr [EBX + 0x2c]
007e1a6f : MOVSS dword ptr [EBX + 0x68],XMM0
007e1a74 : MOVSS dword ptr [EBX + 0x6c],XMM1
007e1a79 : MOVSS dword ptr [EBX + 0x70],XMM2
007e1a7e : MOV byte ptr [EBX + 0x5d],0x1
007e1a82 : MOV byte ptr [EBX + 0x134],0x1
007e1a89 : MOV byte ptr [EBX + 0x5c],0x1
007e1a8d : TEST ECX,ECX
007e1a8f : JZ 0x007e1a99
007e1a91 : MOV EAX,dword ptr [ECX]
007e1a93 : MOV EDX,dword ptr [EAX + 0x60]
007e1a96 : PUSH EBX
007e1a97 : CALL EDX
007e1a99 : LEA EAX,[EBP + 0xffffff74]
007e1a9f : PUSH EAX
007e1aa0 : CALL 0x00438c30
007e1aa5 : MOV dword ptr [EBP + -0x4],0x4
007e1aac : MOVSS XMM0,dword ptr [ESI + 0xa1c]
007e1ab4 : MOV EDI,dword ptr [EBP + 0xffffff68]
007e1aba : MOVSS dword ptr [EBP + -0x60],XMM0
007e1abf : MOVSS XMM0,dword ptr [ESI + 0xa20]
007e1ac7 : MOVSS dword ptr [EBP + -0x5c],XMM0
007e1acc : MOVSS XMM0,dword ptr [ESI + 0xa08]
007e1ad4 : MOVSS dword ptr [EBP + -0x6c],XMM0
007e1ad9 : MOVSS XMM0,dword ptr [ESI + 0xa0c]
007e1ae1 : ADD EDI,0x1f8
007e1ae7 : MOVSS dword ptr [EBP + -0x68],XMM0
007e1aec : MOVSS XMM0,dword ptr [ESI + 0xa10]
007e1af4 : PUSH EDI
007e1af5 : MOV byte ptr [EBP + -0x38],0x1
007e1af9 : MOV byte ptr [EBP + -0x44],0x1
007e1afd : MOV dword ptr [EBP + -0x40],EBX
007e1b00 : MOVSS dword ptr [EBP + -0x64],XMM0
007e1b05 : CALL dword ptr [0x00b850dc]
007e1b0b : MOV ECX,dword ptr [EDI]
007e1b0d : MOV dword ptr [EBP + -0x3c],ECX
007e1b10 : LEA ECX,[ESI + 0x600]
007e1b16 : MOV EAX,ECX
007e1b18 : MOV dword ptr [EBP + 0xffffff74],0x2
007e1b22 : LEA EDI,[EAX + 0x2]
007e1b25 : MOV DX,word ptr [EAX]
007e1b28 : ADD EAX,0x2
007e1b2b : TEST DX,DX
007e1b2e : JNZ 0x007e1b25
007e1b30 : SUB EAX,EDI
007e1b32 : SAR EAX,0x1
007e1b34 : PUSH EAX
007e1b35 : PUSH ECX
007e1b36 : LEA ECX,[EBP + 0xffffff78]
007e1b3c : CALL 0x00406360
007e1b41 : MOV EDI,dword ptr [EBP + -0x70]
007e1b44 : MOV EAX,dword ptr [EBP + 0xffffff7c]
007e1b4a : CMP EDI,0x8
007e1b4d : JNC 0x007e1b55
007e1b4f : LEA EAX,[EBP + 0xffffff7c]
007e1b55 : PUSH EAX
007e1b56 : XOR EDX,EDX
007e1b58 : MOV ECX,0xc23dd4
007e1b5d : CALL 0x00405b70
007e1b62 : ADD ESP,0x4
007e1b65 : TEST EAX,EAX
007e1b67 : JNZ 0x007e1be7
007e1b69 : CMP dword ptr [EBP + -0x74],EAX
007e1b6c : SETNZ AL
007e1b6f : TEST EAX,EAX
007e1b71 : JNZ 0x007e1be7
007e1b73 : MOV EAX,dword ptr [EBP + 0xffffff7c]
007e1b79 : CMP EDI,0x8
007e1b7c : JNC 0x007e1b84
007e1b7e : LEA EAX,[EBP + 0xffffff7c]
007e1b84 : MOV EDX,dword ptr [EBP + -0x3c]
007e1b87 : PUSH EDX
007e1b88 : PUSH EAX
007e1b89 : PUSH ESI
007e1b8a : PUSH 0xc23dd8
007e1b8f : LEA ESI,[EBP + -0x30]
007e1b92 : CALL 0x00404750
007e1b97 : ADD ESP,0x10
007e1b9a : MOV byte ptr [EBP + -0x4],0x5
007e1b9e : MOV EAX,[0x00da98e8]
007e1ba3 : MOV ECX,dword ptr [EAX]
007e1ba5 : TEST ECX,ECX
007e1ba7 : JZ 0x007e1bbd
007e1ba9 : MOV EDX,dword ptr [ECX]
007e1bab : MOV EDX,dword ptr [EDX + 0x14]
007e1bae : MOV EAX,ESI
007e1bb0 : PUSH EAX
007e1bb1 : PUSH 0x1d71
007e1bb6 : PUSH 0xc23e40
007e1bbb : CALL EDX
007e1bbd : MOV EAX,dword ptr [EBX]
007e1bbf : MOV EDX,dword ptr [EAX + 0x18]
007e1bc2 : PUSH 0x1
007e1bc4 : MOV ECX,EBX
007e1bc6 : CALL EDX
007e1bc8 : MOV byte ptr [EBP + -0x4],0x4
007e1bcc : LEA ECX,[EBP + -0x30]
007e1bcf : CALL 0x00406560
007e1bd4 : MOV dword ptr [EBP + -0x4],0xffffffff
007e1bdb : LEA EAX,[EBP + 0xffffff74]
007e1be1 : PUSH EAX
007e1be2 : JMP 0x007e1c9a
007e1be7 : MOV EDI,dword ptr [0x01725208]
007e1bed : LEA ECX,[EBP + 0xffffff74]
007e1bf3 : CALL 0x007bdd50
007e1bf8 : TEST EAX,EAX
007e1bfa : JNZ 0x007e1c61
007e1bfc : CMP dword ptr [EBP + -0x70],0x8
007e1c00 : MOV EAX,dword ptr [EBP + 0xffffff7c]
007e1c06 : JNC 0x007e1c0e
007e1c08 : LEA EAX,[EBP + 0xffffff7c]
007e1c0e : MOV ECX,dword ptr [EBP + -0x3c]
007e1c11 : PUSH ECX
007e1c12 : PUSH EAX
007e1c13 : PUSH ESI
007e1c14 : PUSH 0xc23e90
007e1c19 : LEA ESI,[EBP + -0x30]
007e1c1c : CALL 0x00404750
007e1c21 : ADD ESP,0x10
007e1c24 : MOV byte ptr [EBP + -0x4],0x6
007e1c28 : MOV EDX,dword ptr [0x00da98e8]
007e1c2e : MOV ECX,dword ptr [EDX]
007e1c30 : TEST ECX,ECX
007e1c32 : JZ 0x007e1c48
007e1c34 : MOV EAX,dword ptr [ECX]
007e1c36 : MOV EAX,dword ptr [EAX + 0x14]
007e1c39 : MOV EDX,ESI
007e1c3b : PUSH EDX
007e1c3c : PUSH 0x1d79
007e1c41 : PUSH 0xc23ef0
007e1c46 : CALL EAX
007e1c48 : MOV EDX,dword ptr [EBX]
007e1c4a : MOV EAX,dword ptr [EDX + 0x18]
007e1c4d : PUSH 0x1
007e1c4f : MOV ECX,EBX
007e1c51 : CALL EAX
007e1c53 : MOV byte ptr [EBP + -0x4],0x4
007e1c57 : LEA ECX,[EBP + -0x30]
007e1c5a : CALL 0x00406560
007e1c5f : JMP 0x007e1c8c
007e1c61 : MOV EDI,dword ptr [EBP + 0xffffff68]
007e1c67 : LEA EDX,[EDI + 0x1ec]
007e1c6d : PUSH EDX
007e1c6e : LEA EAX,[EBP + 0xffffff6c]
007e1c74 : CALL 0x0045c8c0
007e1c79 : CMP byte ptr [EDI + 0x2ab4],0x0
007e1c80 : JZ 0x007e1bd4
007e1c86 : MOV dword ptr [ESI + 0xa48],EBX
007e1c8c : MOV dword ptr [EBP + -0x4],0xffffffff
007e1c93 : LEA ECX,[EBP + 0xffffff74]
007e1c99 : PUSH ECX
007e1c9a : CALL 0x004427d0
007e1c9f : MOV ECX,dword ptr [EBP + -0xc]
007e1ca2 : MOV dword ptr FS:[0x0],ECX
007e1ca9 : POP ECX
007e1caa : POP EDI
007e1cab : POP ESI
007e1cac : POP EBX
007e1cad : MOV ECX,dword ptr [EBP + -0x14]
007e1cb0 : XOR ECX,EBP
007e1cb2 : CALL 0x00633e6b
007e1cb7 : MOV ESP,EBP
007e1cb9 : POP EBP
007e1cba : RET 0x4
