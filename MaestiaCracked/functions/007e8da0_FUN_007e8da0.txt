PROGRAM  : Maestia.exe
FUNCTION : FUN_007e8da0
ENTRY    : 007e8da0
BODY     : [[007e8da0, 007e90ef]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007e8da0(int param_1,float *param_2)

{
  int *piVar1;
  float *pfVar2;
  char cVar3;
  int iVar4;
  float *unaff_EDI;
  bool bVar5;
  bool bVar6;
  float10 fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  undefined **local_168 [33];
  undefined **local_e4 [33];
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  float local_54;
  float local_50;
  float local_4c;
  float local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  int local_30;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  int local_18;
  float local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  pfVar2 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3caeb;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_24 = *unaff_EDI - *param_2;
  local_20 = unaff_EDI[1] - param_2[1];
  local_1c = unaff_EDI[2] - param_2[2];
  D3DXVec3Normalize(&local_24,&local_24,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  local_30 = FUN_007e8090(&local_24,pfVar2);
  if ((0 < local_30) && (local_18 = 0, 0 < local_30)) {
    do {
      piVar1 = *(int **)(*(int *)(*(int *)(param_1 + 0xfc) + local_18 * 4) + 8);
      if (piVar1 != (int *)0x0) {
        local_14 = (float)piVar1[0xc2];
        cVar3 = FUN_007d5cf0(piVar1);
        if (((cVar3 == '\0') && ((~(uint)local_14 & 1) != 0)) &&
           ((iVar4 = piVar1[0xc1], iVar4 == 1 || ((iVar4 == 2 || (iVar4 == 0xe)))))) {
          if (*(char *)((int)piVar1 + 0x5d) != '\0') {
            (**(code **)(*piVar1 + 0x14))();
          }
          fVar8 = (float)piVar1[0x2f] - unaff_EDI[1];
          fVar9 = *pfVar2 - *unaff_EDI;
          fVar10 = pfVar2[2] - unaff_EDI[2];
          local_48 = fVar9 * fVar9 + fVar8 * fVar8 + fVar10 * fVar10;
          fVar9 = (float)piVar1[0x2e] - *unaff_EDI;
          fVar10 = (float)piVar1[0x30] - unaff_EDI[2];
          local_2c = fVar9 * fVar9 + fVar8 * fVar8 + fVar10 * fVar10;
          iVar4 = FUN_0043d910(local_e4);
          local_3c = *(float *)(iVar4 + 4);
          local_44 = *(float *)(iVar4 + 8);
          local_40 = *(float *)(iVar4 + 0xc);
          local_8 = 0xffffffff;
          local_e4[0] = &PTR_FUN_00cd083c;
          iVar4 = FUN_0043d910(local_168);
          local_38 = *(float *)(iVar4 + 0x10);
          local_34 = *(float *)(iVar4 + 0x14);
          local_28 = *(float *)(iVar4 + 0x18);
          local_8 = 0xffffffff;
          local_168[0] = &PTR_FUN_00cd083c;
          cVar3 = FUN_007d5cf0(piVar1);
          if ((cVar3 == '\0') && (cVar3 = FUN_007d5bf0(piVar1), cVar3 == '\0')) {
            if (((piVar1[0xc1] == 0xe) ||
                (((fVar9 = *pfVar2, fVar9 <= local_3c || (local_38 <= fVar9)) ||
                 (fVar8 = pfVar2[1], fVar8 <= local_44)))) ||
               (((local_34 <= fVar8 || (fVar10 = pfVar2[2], fVar10 <= local_40)) ||
                (local_28 <= fVar10)))) {
              bVar6 = local_48 == local_2c;
              bVar5 = local_48 < local_2c;
            }
            else {
              local_54 = fVar9 - *unaff_EDI;
              local_4c = fVar10 - unaff_EDI[2];
              local_50 = fVar8 - unaff_EDI[1];
              fVar7 = (float10)FUN_0040f460(local_54 * local_54 + local_4c * local_4c +
                                            local_50 * local_50);
              local_14 = (float)fVar7;
              param_2 = (float *)0x0;
              local_60 = 0;
              local_5c = 0;
              local_58 = 0;
              D3DXVec3Normalize(&local_60,&local_54);
              cVar3 = (**(code **)(*piVar1 + 0x108))(pfVar2,&local_24,&param_2);
              if (cVar3 == '\0') goto LAB_007e90b6;
              bVar6 = local_14 == (float)param_2;
              bVar5 = local_14 < (float)param_2;
            }
            if (!bVar5 && !bVar6) {
              ExceptionList = local_10;
              return 1;
            }
          }
        }
      }
LAB_007e90b6:
      local_18 = local_18 + 1;
    } while (local_18 < local_30);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007e8da0 : PUSH EBP
007e8da1 : MOV EBP,ESP
007e8da3 : PUSH -0x1
007e8da5 : PUSH 0xb3caeb
007e8daa : MOV EAX,FS:[0x0]
007e8db0 : PUSH EAX
007e8db1 : SUB ESP,0x158
007e8db7 : PUSH EBX
007e8db8 : PUSH ESI
007e8db9 : MOV EAX,[0x00d66fa0]
007e8dbe : XOR EAX,EBP
007e8dc0 : PUSH EAX
007e8dc1 : LEA EAX,[EBP + -0xc]
007e8dc4 : MOV FS:[0x0],EAX
007e8dca : MOV EBX,dword ptr [EBP + 0xc]
007e8dcd : MOVSS XMM0,dword ptr [EDI]
007e8dd1 : MOVSS XMM1,dword ptr [EDI + 0x4]
007e8dd6 : MOVSS XMM2,dword ptr [EDI + 0x8]
007e8ddb : SUBSS XMM0,dword ptr [EBX]
007e8ddf : SUBSS XMM1,dword ptr [EBX + 0x4]
007e8de4 : SUBSS XMM2,dword ptr [EBX + 0x8]
007e8de9 : LEA EAX,[EBP + -0x20]
007e8dec : PUSH EAX
007e8ded : MOV ECX,EAX
007e8def : PUSH ECX
007e8df0 : MOVSS dword ptr [EBP + -0x20],XMM0
007e8df5 : MOVSS dword ptr [EBP + -0x1c],XMM1
007e8dfa : MOVSS dword ptr [EBP + -0x18],XMM2
007e8dff : CALL 0x004ff722
007e8e04 : MOV ECX,dword ptr [EBP + 0x8]
007e8e07 : PUSH EBX
007e8e08 : LEA EDX,[EBP + -0x20]
007e8e0b : PUSH EDX
007e8e0c : CALL 0x007e8090
007e8e11 : MOV dword ptr [EBP + -0x2c],EAX
007e8e14 : TEST EAX,EAX
007e8e16 : JLE 0x007e90c6
007e8e1c : XOR ECX,ECX
007e8e1e : MOV dword ptr [EBP + -0x14],ECX
007e8e21 : TEST EAX,EAX
007e8e23 : JLE 0x007e90c6
007e8e29 : LEA ESP,[ESP]
007e8e30 : MOV EAX,dword ptr [EBP + 0x8]
007e8e33 : MOV EDX,dword ptr [EAX + 0xfc]
007e8e39 : MOV EAX,dword ptr [EDX + ECX*0x4]
007e8e3c : MOV ESI,dword ptr [EAX + 0x8]
007e8e3f : TEST ESI,ESI
007e8e41 : JZ 0x007e90b6
007e8e47 : MOV ECX,dword ptr [ESI + 0x308]
007e8e4d : PUSH ESI
007e8e4e : MOV dword ptr [EBP + -0x10],ECX
007e8e51 : CALL 0x007d5cf0
007e8e56 : TEST AL,AL
007e8e58 : JNZ 0x007e90b6
007e8e5e : MOV EDX,dword ptr [EBP + -0x10]
007e8e61 : NOT EDX
007e8e63 : TEST DL,0x1
007e8e66 : JZ 0x007e90b6
007e8e6c : MOV EAX,dword ptr [ESI + 0x304]
007e8e72 : CMP EAX,0x1
007e8e75 : JZ 0x007e8e85
007e8e77 : CMP EAX,0x2
007e8e7a : JZ 0x007e8e85
007e8e7c : CMP EAX,0xe
007e8e7f : JNZ 0x007e90b6
007e8e85 : CMP byte ptr [ESI + 0x5d],0x0
007e8e89 : JZ 0x007e8e94
007e8e8b : MOV EAX,dword ptr [ESI]
007e8e8d : MOV EDX,dword ptr [EAX + 0x14]
007e8e90 : MOV ECX,ESI
007e8e92 : CALL EDX
007e8e94 : MOVSS XMM1,dword ptr [ESI + 0xbc]
007e8e9c : SUBSS XMM1,dword ptr [EDI + 0x4]
007e8ea1 : MOVSS XMM5,dword ptr [EDI]
007e8ea5 : MOVSS XMM3,dword ptr [EBX]
007e8ea9 : MOVSS XMM6,dword ptr [EDI + 0x8]
007e8eae : MOVSS XMM4,dword ptr [EBX + 0x8]
007e8eb3 : MOVSS XMM0,dword ptr [ESI + 0xb8]
007e8ebb : MOVSS XMM2,dword ptr [ESI + 0xc0]
007e8ec3 : SUBSS XMM3,XMM5
007e8ec7 : MULSS XMM3,XMM3
007e8ecb : MOVAPS XMM7,XMM1
007e8ece : MULSS XMM7,XMM1
007e8ed2 : ADDSS XMM3,XMM7
007e8ed6 : SUBSS XMM4,XMM6
007e8eda : MOVAPS XMM7,XMM4
007e8edd : MULSS XMM7,XMM4
007e8ee1 : ADDSS XMM3,XMM7
007e8ee5 : MOVSS dword ptr [EBP + -0x44],XMM3
007e8eea : MOVAPS XMM3,XMM1
007e8eed : SUBSS XMM0,XMM5
007e8ef1 : MULSS XMM3,XMM1
007e8ef5 : SUBSS XMM2,XMM6
007e8ef9 : MULSS XMM0,XMM0
007e8efd : MOVAPS XMM1,XMM2
007e8f00 : LEA EAX,[EBP + 0xffffff20]
007e8f06 : ADDSS XMM0,XMM3
007e8f0a : MULSS XMM1,XMM2
007e8f0e : ADDSS XMM0,XMM1
007e8f12 : PUSH EAX
007e8f13 : MOV ECX,ESI
007e8f15 : MOVSS dword ptr [EBP + -0x28],XMM0
007e8f1a : CALL 0x0043d910
007e8f1f : MOV dword ptr [EBP + -0x4],0x0
007e8f26 : MOVSS XMM0,dword ptr [EAX + 0x4]
007e8f2b : MOVSS dword ptr [EBP + -0x38],XMM0
007e8f30 : MOVSS XMM0,dword ptr [EAX + 0x8]
007e8f35 : MOVSS dword ptr [EBP + -0x40],XMM0
007e8f3a : MOVSS XMM0,dword ptr [EAX + 0xc]
007e8f3f : MOVSS dword ptr [EBP + -0x3c],XMM0
007e8f44 : MOV dword ptr [EBP + -0x4],0xffffffff
007e8f4b : LEA ECX,[EBP + 0xfffffe9c]
007e8f51 : PUSH ECX
007e8f52 : MOV ECX,ESI
007e8f54 : MOV dword ptr [EBP + 0xffffff20],0xcd083c
007e8f5e : CALL 0x0043d910
007e8f63 : MOV dword ptr [EBP + -0x4],0x1
007e8f6a : MOVSS XMM0,dword ptr [EAX + 0x10]
007e8f6f : MOVSS dword ptr [EBP + -0x34],XMM0
007e8f74 : MOVSS XMM0,dword ptr [EAX + 0x14]
007e8f79 : MOVSS dword ptr [EBP + -0x30],XMM0
007e8f7e : MOVSS XMM0,dword ptr [EAX + 0x18]
007e8f83 : MOVSS dword ptr [EBP + -0x24],XMM0
007e8f88 : MOV dword ptr [EBP + -0x4],0xffffffff
007e8f8f : PUSH ESI
007e8f90 : MOV dword ptr [EBP + 0xfffffe9c],0xcd083c
007e8f9a : CALL 0x007d5cf0
007e8f9f : TEST AL,AL
007e8fa1 : JNZ 0x007e90b6
007e8fa7 : PUSH ESI
007e8fa8 : CALL 0x007d5bf0
007e8fad : TEST AL,AL
007e8faf : JNZ 0x007e90b6
007e8fb5 : CMP dword ptr [ESI + 0x304],0xe
007e8fbc : JZ 0x007e90ab
007e8fc2 : MOVSS XMM0,dword ptr [EBX]
007e8fc6 : COMISS XMM0,dword ptr [EBP + -0x38]
007e8fca : JBE 0x007e90ab
007e8fd0 : MOVSS XMM1,dword ptr [EBP + -0x34]
007e8fd5 : COMISS XMM1,XMM0
007e8fd8 : JBE 0x007e90ab
007e8fde : MOVSS XMM1,dword ptr [EBX + 0x4]
007e8fe3 : COMISS XMM1,dword ptr [EBP + -0x40]
007e8fe7 : JBE 0x007e90ab
007e8fed : MOVSS XMM2,dword ptr [EBP + -0x30]
007e8ff2 : COMISS XMM2,XMM1
007e8ff5 : JBE 0x007e90ab
007e8ffb : MOVSS XMM2,dword ptr [EBX + 0x8]
007e9000 : COMISS XMM2,dword ptr [EBP + -0x3c]
007e9004 : JBE 0x007e90ab
007e900a : MOVSS XMM3,dword ptr [EBP + -0x24]
007e900f : COMISS XMM3,XMM2
007e9012 : JBE 0x007e90ab
007e9018 : SUBSS XMM0,dword ptr [EDI]
007e901c : SUBSS XMM2,dword ptr [EDI + 0x8]
007e9021 : SUBSS XMM1,dword ptr [EDI + 0x4]
007e9026 : MOVAPS XMM3,XMM0
007e9029 : MULSS XMM3,XMM0
007e902d : MOVSS dword ptr [EBP + -0x50],XMM0
007e9032 : MOVAPS XMM0,XMM2
007e9035 : MULSS XMM0,XMM2
007e9039 : ADDSS XMM3,XMM0
007e903d : MOVAPS XMM0,XMM1
007e9040 : MULSS XMM0,XMM1
007e9044 : PUSH ECX
007e9045 : ADDSS XMM3,XMM0
007e9049 : MOVSS dword ptr [EBP + -0x4c],XMM1
007e904e : MOVSS dword ptr [EBP + -0x48],XMM2
007e9053 : MOVSS dword ptr [ESP],XMM3
007e9058 : CALL 0x0040f460
007e905d : FSTP float ptr [EBP + -0x10]
007e9060 : XORPS XMM0,XMM0
007e9063 : ADD ESP,0x4
007e9066 : LEA EDX,[EBP + -0x50]
007e9069 : PUSH EDX
007e906a : LEA EAX,[EBP + -0x5c]
007e906d : PUSH EAX
007e906e : MOVSS dword ptr [EBP + 0xc],XMM0
007e9073 : MOVSS dword ptr [EBP + -0x5c],XMM0
007e9078 : MOVSS dword ptr [EBP + -0x58],XMM0
007e907d : MOVSS dword ptr [EBP + -0x54],XMM0
007e9082 : CALL 0x004ff722
007e9087 : MOV EDX,dword ptr [ESI]
007e9089 : MOV EDX,dword ptr [EDX + 0x108]
007e908f : LEA EAX,[EBP + 0xc]
007e9092 : PUSH EAX
007e9093 : LEA ECX,[EBP + -0x20]
007e9096 : PUSH ECX
007e9097 : PUSH EBX
007e9098 : MOV ECX,ESI
007e909a : CALL EDX
007e909c : TEST AL,AL
007e909e : JZ 0x007e90b6
007e90a0 : MOVSS XMM0,dword ptr [EBP + -0x10]
007e90a5 : COMISS XMM0,dword ptr [EBP + 0xc]
007e90a9 : JMP 0x007e90b4
007e90ab : MOVSS XMM0,dword ptr [EBP + -0x44]
007e90b0 : COMISS XMM0,dword ptr [EBP + -0x28]
007e90b4 : JA 0x007e90db
007e90b6 : MOV ECX,dword ptr [EBP + -0x14]
007e90b9 : INC ECX
007e90ba : CMP ECX,dword ptr [EBP + -0x2c]
007e90bd : MOV dword ptr [EBP + -0x14],ECX
007e90c0 : JL 0x007e8e30
007e90c6 : XOR AL,AL
007e90c8 : MOV ECX,dword ptr [EBP + -0xc]
007e90cb : MOV dword ptr FS:[0x0],ECX
007e90d2 : POP ECX
007e90d3 : POP ESI
007e90d4 : POP EBX
007e90d5 : MOV ESP,EBP
007e90d7 : POP EBP
007e90d8 : RET 0x8
007e90db : MOV AL,0x1
007e90dd : MOV ECX,dword ptr [EBP + -0xc]
007e90e0 : MOV dword ptr FS:[0x0],ECX
007e90e7 : POP ECX
007e90e8 : POP ESI
007e90e9 : POP EBX
007e90ea : MOV ESP,EBP
007e90ec : POP EBP
007e90ed : RET 0x8
