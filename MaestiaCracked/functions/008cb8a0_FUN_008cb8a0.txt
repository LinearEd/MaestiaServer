PROGRAM  : Maestia.exe
FUNCTION : FUN_008cb8a0
ENTRY    : 008cb8a0
BODY     : [[008cb8a0, 008cbc25]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008cb8a0(void)

{
  short sVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  int in_ECX;
  undefined4 ***pppuVar6;
  short sVar7;
  short sVar8;
  undefined *puVar9;
  uint local_5c;
  uint local_40;
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1d4ab;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  sVar8 = 0;
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
  local_14 = uVar4;
  FUN_00406360(&DAT_00c533b4,0);
  local_8 = 0;
  piVar2 = (int *)**(int **)(in_ECX + 0x3c);
  sVar7 = 0;
  sVar1 = 0;
  if (piVar2 != *(int **)(in_ECX + 0x3c)) {
    do {
      iVar3 = piVar2[4];
      if (sVar8 == *(short *)(iVar3 + 0x22)) {
        if ((sVar7 == 0) && (*(short *)(iVar3 + 0x24) != 0)) {
          FUN_00404870(&DAT_00c533b8,1);
          puVar9 = &DAT_00c533bc;
LAB_008cb95e:
          FUN_00404870(puVar9,1);
        }
        else if ((*(short *)(iVar3 + 0x26) == 0) && (sVar1 != 0)) {
          FUN_00404870(&DAT_00c533c0,1);
          puVar9 = &DAT_00c533c4;
          goto LAB_008cb95e;
        }
        if ((sVar7 == *(short *)(piVar2[4] + 0x24)) && (sVar1 == 0)) {
          FUN_00404870(&DAT_00c533c8,1);
          FUN_00404870(&DAT_00c533cc,1);
        }
        FUN_00405c30(piVar2[4] + 4,0,0xffffffff);
        FUN_00404870(&DAT_00c533d0,1);
        uVar5 = FUN_00404750(&DAT_00c533d4,*(undefined4 *)piVar2[4]);
        local_8._0_1_ = 1;
        FUN_00405c30(uVar5,0,0xffffffff);
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_40 = 7;
        puVar9 = &DAT_00c533dc;
      }
      else {
        if (sVar7 != 0) {
          FUN_00404870(&DAT_00c533e0,1);
          FUN_00404870(&DAT_00c533e4,1);
        }
        if (sVar1 != 0) {
          FUN_00404870(&DAT_00c533e8,1);
          FUN_00404870(&DAT_00c533ec,1);
        }
        FUN_00405c30(piVar2[4] + 4,0,0xffffffff);
        FUN_00404870(&DAT_00c533f0,1);
        uVar5 = FUN_00404750(&DAT_00c533f4,*(undefined4 *)piVar2[4]);
        local_8._0_1_ = 2;
        FUN_00405c30(uVar5,0,0xffffffff);
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_5c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_5c = 7;
        puVar9 = &DAT_00c533fc;
      }
      FUN_00404870(puVar9,1);
      iVar3 = piVar2[4];
      sVar1 = *(short *)(iVar3 + 0x26);
      sVar8 = *(short *)(iVar3 + 0x22);
      sVar7 = *(short *)(iVar3 + 0x24);
      FUN_00416210();
    } while (piVar2 != (int *)*(int *)(in_ECX + 0x3c));
    if (sVar7 != 0) {
      FUN_00404870(&DAT_00c53400,1);
      FUN_00404870(&DAT_00c53404,1);
    }
    if (sVar1 != 0) {
      FUN_00404870(&DAT_00c53408,1);
      FUN_00404870(&DAT_00c5340c,1);
    }
  }
  iVar3 = *DAT_00da9894;
  if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
    pppuVar6 = (undefined4 ***)local_2c[0];
    if (local_18 < 8) {
      pppuVar6 = local_2c;
    }
    (**(code **)(**(int **)(iVar3 + 0x114) + 4))
              (*(int **)(iVar3 + 0x114),"SetCraftCategoryData",&DAT_00c53410,pppuVar6,uVar4);
  }
  iVar3 = *DAT_00da9894;
  if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
    (**(code **)(**(int **)(iVar3 + 0x114) + 4))
              (*(int **)(iVar3 + 0x114),"SetCraftTitle",&DAT_00c53430,&DAT_00c5342c);
  }
  iVar3 = *DAT_00da9894;
  if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
    (**(code **)(**(int **)(iVar3 + 0x114) + 4))
              (*(int **)(iVar3 + 0x114),"SetCraftProgress","%d, %d, %d",0,0,0);
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008cb8a0 : PUSH EBP
008cb8a1 : MOV EBP,ESP
008cb8a3 : PUSH -0x1
008cb8a5 : PUSH 0xb1d4ab
008cb8aa : MOV EAX,FS:[0x0]
008cb8b0 : PUSH EAX
008cb8b1 : SUB ESP,0x64
008cb8b4 : MOV EAX,[0x00d66fa0]
008cb8b9 : XOR EAX,EBP
008cb8bb : MOV dword ptr [EBP + -0x10],EAX
008cb8be : PUSH EBX
008cb8bf : PUSH ESI
008cb8c0 : PUSH EDI
008cb8c1 : PUSH EAX
008cb8c2 : LEA EAX,[EBP + -0xc]
008cb8c5 : MOV FS:[0x0],EAX
008cb8cb : XOR ESI,ESI
008cb8cd : MOV EDI,ECX
008cb8cf : PUSH ESI
008cb8d0 : XOR EAX,EAX
008cb8d2 : PUSH 0xc533b4
008cb8d7 : LEA ECX,[EBP + -0x2c]
008cb8da : MOV dword ptr [EBP + -0x38],EDI
008cb8dd : MOV dword ptr [EBP + -0x14],0x7
008cb8e4 : MOV dword ptr [EBP + -0x18],ESI
008cb8e7 : MOV word ptr [EBP + -0x28],AX
008cb8eb : CALL 0x00406360
008cb8f0 : MOV dword ptr [EBP + -0x4],ESI
008cb8f3 : MOV EAX,dword ptr [EDI + 0x3c]
008cb8f6 : MOV EDI,dword ptr [EAX]
008cb8f8 : XOR EBX,EBX
008cb8fa : MOV dword ptr [EBP + -0x30],ESI
008cb8fd : MOV dword ptr [EBP + -0x34],EDI
008cb900 : CMP EDI,EAX
008cb902 : JZ 0x008cbb39
008cb908 : MOV EAX,dword ptr [EDI + 0x10]
008cb90b : CMP SI,word ptr [EAX + 0x22]
008cb90f : JNZ 0x008cba0c
008cb915 : TEST BX,BX
008cb918 : JNZ 0x008cb93a
008cb91a : XOR ECX,ECX
008cb91c : CMP CX,word ptr [EAX + 0x24]
008cb920 : JZ 0x008cb93a
008cb922 : PUSH 0x1
008cb924 : PUSH 0xc533b8
008cb929 : LEA ESI,[EBP + -0x2c]
008cb92c : CALL 0x00404870
008cb931 : PUSH 0x1
008cb933 : PUSH 0xc533bc
008cb938 : JMP 0x008cb95e
008cb93a : CMP word ptr [EAX + 0x26],0x0
008cb93f : JNZ 0x008cb966
008cb941 : CMP word ptr [EBP + -0x30],0x0
008cb946 : JZ 0x008cb966
008cb948 : PUSH 0x1
008cb94a : PUSH 0xc533c0
008cb94f : LEA ESI,[EBP + -0x2c]
008cb952 : CALL 0x00404870
008cb957 : PUSH 0x1
008cb959 : PUSH 0xc533c4
008cb95e : LEA ESI,[EBP + -0x2c]
008cb961 : CALL 0x00404870
008cb966 : MOV EDX,dword ptr [EDI + 0x10]
008cb969 : CMP BX,word ptr [EDX + 0x24]
008cb96d : JNZ 0x008cb991
008cb96f : CMP word ptr [EBP + -0x30],0x0
008cb974 : JNZ 0x008cb991
008cb976 : PUSH 0x1
008cb978 : PUSH 0xc533c8
008cb97d : LEA ESI,[EBP + -0x2c]
008cb980 : CALL 0x00404870
008cb985 : PUSH 0x1
008cb987 : PUSH 0xc533cc
008cb98c : CALL 0x00404870
008cb991 : MOV EAX,dword ptr [EDI + 0x10]
008cb994 : PUSH -0x1
008cb996 : ADD EAX,0x4
008cb999 : PUSH 0x0
008cb99b : PUSH EAX
008cb99c : LEA ECX,[EBP + -0x2c]
008cb99f : CALL 0x00405c30
008cb9a4 : PUSH 0x1
008cb9a6 : PUSH 0xc533d0
008cb9ab : LEA ESI,[EBP + -0x2c]
008cb9ae : CALL 0x00404870
008cb9b3 : MOV EAX,dword ptr [EDI + 0x10]
008cb9b6 : MOV ECX,dword ptr [EAX]
008cb9b8 : PUSH ECX
008cb9b9 : PUSH 0xc533d4
008cb9be : LEA ESI,[EBP + -0x54]
008cb9c1 : CALL 0x00404750
008cb9c6 : ADD ESP,0x8
008cb9c9 : MOV byte ptr [EBP + -0x4],0x1
008cb9cd : PUSH -0x1
008cb9cf : PUSH 0x0
008cb9d1 : PUSH EAX
008cb9d2 : LEA ECX,[EBP + -0x2c]
008cb9d5 : CALL 0x00405c30
008cb9da : MOV byte ptr [EBP + -0x4],0x0
008cb9de : CMP dword ptr [EBP + -0x3c],0x8
008cb9e2 : JC 0x008cb9ec
008cb9e4 : MOV ECX,dword ptr [EBP + -0x50]
008cb9e7 : CALL 0x006f04e0
008cb9ec : XOR EDX,EDX
008cb9ee : PUSH 0x1
008cb9f0 : MOV dword ptr [EBP + -0x3c],0x7
008cb9f7 : MOV dword ptr [EBP + -0x40],0x0
008cb9fe : MOV word ptr [EBP + -0x50],DX
008cba02 : PUSH 0xc533dc
008cba07 : JMP 0x008cbac4
008cba0c : TEST BX,BX
008cba0f : JZ 0x008cba2c
008cba11 : PUSH 0x1
008cba13 : PUSH 0xc533e0
008cba18 : LEA ESI,[EBP + -0x2c]
008cba1b : CALL 0x00404870
008cba20 : PUSH 0x1
008cba22 : PUSH 0xc533e4
008cba27 : CALL 0x00404870
008cba2c : CMP word ptr [EBP + -0x30],0x0
008cba31 : JZ 0x008cba4e
008cba33 : PUSH 0x1
008cba35 : PUSH 0xc533e8
008cba3a : LEA ESI,[EBP + -0x2c]
008cba3d : CALL 0x00404870
008cba42 : PUSH 0x1
008cba44 : PUSH 0xc533ec
008cba49 : CALL 0x00404870
008cba4e : MOV EAX,dword ptr [EDI + 0x10]
008cba51 : PUSH -0x1
008cba53 : ADD EAX,0x4
008cba56 : PUSH 0x0
008cba58 : PUSH EAX
008cba59 : LEA ECX,[EBP + -0x2c]
008cba5c : CALL 0x00405c30
008cba61 : PUSH 0x1
008cba63 : PUSH 0xc533f0
008cba68 : LEA ESI,[EBP + -0x2c]
008cba6b : CALL 0x00404870
008cba70 : MOV EAX,dword ptr [EDI + 0x10]
008cba73 : MOV ECX,dword ptr [EAX]
008cba75 : PUSH ECX
008cba76 : PUSH 0xc533f4
008cba7b : LEA ESI,[EBP + -0x70]
008cba7e : CALL 0x00404750
008cba83 : ADD ESP,0x8
008cba86 : MOV byte ptr [EBP + -0x4],0x2
008cba8a : PUSH -0x1
008cba8c : PUSH 0x0
008cba8e : PUSH EAX
008cba8f : LEA ECX,[EBP + -0x2c]
008cba92 : CALL 0x00405c30
008cba97 : MOV byte ptr [EBP + -0x4],0x0
008cba9b : CMP dword ptr [EBP + -0x58],0x8
008cba9f : JC 0x008cbaa9
008cbaa1 : MOV ECX,dword ptr [EBP + -0x6c]
008cbaa4 : CALL 0x006f04e0
008cbaa9 : XOR EDX,EDX
008cbaab : PUSH 0x1
008cbaad : MOV dword ptr [EBP + -0x58],0x7
008cbab4 : MOV dword ptr [EBP + -0x5c],0x0
008cbabb : MOV word ptr [EBP + -0x6c],DX
008cbabf : PUSH 0xc533fc
008cbac4 : LEA ESI,[EBP + -0x2c]
008cbac7 : CALL 0x00404870
008cbacc : MOV EDI,dword ptr [EDI + 0x10]
008cbacf : MOVZX EAX,word ptr [EDI + 0x26]
008cbad3 : MOVZX ESI,word ptr [EDI + 0x22]
008cbad7 : MOVZX EBX,word ptr [EDI + 0x24]
008cbadb : LEA EDX,[EBP + -0x34]
008cbade : MOV dword ptr [EBP + -0x30],EAX
008cbae1 : CALL 0x00416210
008cbae6 : MOV ECX,dword ptr [EBP + -0x38]
008cbae9 : MOV EAX,dword ptr [ECX + 0x3c]
008cbaec : MOV EDI,dword ptr [EBP + -0x34]
008cbaef : CMP EDI,EAX
008cbaf1 : JNZ 0x008cb908
008cbaf7 : TEST BX,BX
008cbafa : JZ 0x008cbb17
008cbafc : PUSH 0x1
008cbafe : PUSH 0xc53400
008cbb03 : LEA ESI,[EBP + -0x2c]
008cbb06 : CALL 0x00404870
008cbb0b : PUSH 0x1
008cbb0d : PUSH 0xc53404
008cbb12 : CALL 0x00404870
008cbb17 : CMP word ptr [EBP + -0x30],0x0
008cbb1c : JZ 0x008cbb39
008cbb1e : PUSH 0x1
008cbb20 : PUSH 0xc53408
008cbb25 : LEA ESI,[EBP + -0x2c]
008cbb28 : CALL 0x00404870
008cbb2d : PUSH 0x1
008cbb2f : PUSH 0xc5340c
008cbb34 : CALL 0x00404870
008cbb39 : MOV EDX,dword ptr [0x00da9894]
008cbb3f : MOV EAX,dword ptr [EDX]
008cbb41 : TEST EAX,EAX
008cbb43 : JZ 0x008cbb76
008cbb45 : CMP dword ptr [EAX + 0x114],0x0
008cbb4c : JZ 0x008cbb76
008cbb4e : CMP dword ptr [EBP + -0x14],0x8
008cbb52 : MOV EAX,dword ptr [EAX + 0x114]
008cbb58 : MOV ECX,dword ptr [EBP + -0x28]
008cbb5b : JNC 0x008cbb60
008cbb5d : LEA ECX,[EBP + -0x28]
008cbb60 : MOV EDX,dword ptr [EAX]
008cbb62 : PUSH ECX
008cbb63 : PUSH 0xc53410
008cbb68 : PUSH 0xc53414
008cbb6d : PUSH EAX
008cbb6e : MOV EAX,dword ptr [EDX + 0x4]
008cbb71 : CALL EAX
008cbb73 : ADD ESP,0x10
008cbb76 : MOV ECX,dword ptr [0x00da9894]
008cbb7c : MOV EAX,dword ptr [ECX]
008cbb7e : TEST EAX,EAX
008cbb80 : JZ 0x008cbbab
008cbb82 : CMP dword ptr [EAX + 0x114],0x0
008cbb89 : JZ 0x008cbbab
008cbb8b : MOV EAX,dword ptr [EAX + 0x114]
008cbb91 : MOV EDX,dword ptr [EAX]
008cbb93 : PUSH 0xc5342c
008cbb98 : PUSH 0xc53430
008cbb9d : PUSH 0xc53434
008cbba2 : PUSH EAX
008cbba3 : MOV EAX,dword ptr [EDX + 0x4]
008cbba6 : CALL EAX
008cbba8 : ADD ESP,0x10
008cbbab : MOV ECX,dword ptr [0x00da9894]
008cbbb1 : MOV EAX,dword ptr [ECX]
008cbbb3 : TEST EAX,EAX
008cbbb5 : JZ 0x008cbbe1
008cbbb7 : CMP dword ptr [EAX + 0x114],0x0
008cbbbe : JZ 0x008cbbe1
008cbbc0 : MOV EAX,dword ptr [EAX + 0x114]
008cbbc6 : MOV EDX,dword ptr [EAX]
008cbbc8 : PUSH 0x0
008cbbca : PUSH 0x0
008cbbcc : PUSH 0x0
008cbbce : PUSH 0xc53444
008cbbd3 : PUSH 0xc53450
008cbbd8 : PUSH EAX
008cbbd9 : MOV EAX,dword ptr [EDX + 0x4]
008cbbdc : CALL EAX
008cbbde : ADD ESP,0x18
008cbbe1 : MOV dword ptr [EBP + -0x4],0xffffffff
008cbbe8 : CMP dword ptr [EBP + -0x14],0x8
008cbbec : JC 0x008cbbf6
008cbbee : MOV ECX,dword ptr [EBP + -0x28]
008cbbf1 : CALL 0x006f04e0
008cbbf6 : XOR ECX,ECX
008cbbf8 : MOV dword ptr [EBP + -0x14],0x7
008cbbff : MOV dword ptr [EBP + -0x18],0x0
008cbc06 : MOV word ptr [EBP + -0x28],CX
008cbc0a : MOV ECX,dword ptr [EBP + -0xc]
008cbc0d : MOV dword ptr FS:[0x0],ECX
008cbc14 : POP ECX
008cbc15 : POP EDI
008cbc16 : POP ESI
008cbc17 : POP EBX
008cbc18 : MOV ECX,dword ptr [EBP + -0x10]
008cbc1b : XOR ECX,EBP
008cbc1d : CALL 0x00633e6b
008cbc22 : MOV ESP,EBP
008cbc24 : POP EBP
008cbc25 : RET
