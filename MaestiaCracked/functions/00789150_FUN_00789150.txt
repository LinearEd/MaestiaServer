PROGRAM  : Maestia.exe
FUNCTION : FUN_00789150
ENTRY    : 00789150
BODY     : [[00789150, 007892cd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00789150(void)

{
  undefined4 *in_EAX;
  int iVar1;
  void *_Dst;
  int iVar2;
  int iVar3;
  
  iVar1 = in_EAX[0x19];
  if (iVar1 == 1) {
    (**(code **)(*(int *)*in_EAX + 0x148))
              ((int *)*in_EAX,4,in_EAX[0x14],in_EAX[0x15],in_EAX[0x16],
               ((uint)in_EAX[0x12] >> 1) + in_EAX[0x17],in_EAX[0x18]);
    return;
  }
  if (iVar1 == 3) {
    iVar1 = in_EAX[0x18];
    iVar3 = 0;
    if (0 < iVar1) {
      while( true ) {
        iVar2 = iVar1 - iVar3;
        if ((int)in_EAX[0x1a] <= iVar1 - iVar3) {
          iVar2 = in_EAX[0x1a];
        }
        iVar1 = FUN_00787fa0(in_EAX[5]);
        if (iVar1 == 0) break;
        FUN_00787d00(in_EAX,in_EAX[0x14],in_EAX[5],iVar3 * 3 + in_EAX[0x17]);
        (**(code **)(*(int *)in_EAX[9] + 0x30))((int *)in_EAX[9]);
        (**(code **)(*(int *)*in_EAX + 400))((int *)*in_EAX,0,in_EAX[9],in_EAX[0x10],in_EAX[0x13]);
        (**(code **)(*(int *)*in_EAX + 0x144))((int *)*in_EAX,4,in_EAX[0x11],iVar2);
        iVar1 = in_EAX[0x18];
        iVar3 = iVar3 + iVar2;
        if (iVar1 <= iVar3) {
          return;
        }
      }
    }
  }
  else if (iVar1 == 2) {
    iVar1 = in_EAX[0x18];
    iVar3 = 0;
    if (0 < iVar1) {
      do {
        iVar2 = iVar1 - iVar3;
        if ((int)in_EAX[0x1a] <= iVar1 - iVar3) {
          iVar2 = in_EAX[0x1a];
        }
        iVar1 = (uint)(in_EAX[6] != 0x65) * 2 + 2;
        _Dst = (void *)FUN_00787ef0(iVar1);
        if (_Dst == (void *)0x0) {
          return;
        }
        _memcpy(_Dst,(void *)((in_EAX[0x17] + iVar3 * 3) * iVar1 + in_EAX[3]),iVar1 * iVar2 * 3);
        (**(code **)(*(int *)in_EAX[10] + 0x30))((int *)in_EAX[10]);
        (**(code **)(*(int *)*in_EAX + 0x148))
                  ((int *)*in_EAX,4,in_EAX[0x14],in_EAX[0x15],in_EAX[0x16],(uint)in_EAX[0x12] >> 1,
                   iVar2);
        iVar1 = in_EAX[0x18];
        iVar3 = iVar3 + iVar2;
      } while (iVar3 < iVar1);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00789150 : PUSH EBP
00789151 : MOV EBP,ESP
00789153 : PUSH ECX
00789154 : PUSH ESI
00789155 : MOV ESI,EAX
00789157 : MOV EAX,dword ptr [ESI + 0x64]
0078915a : CMP EAX,0x1
0078915d : JNZ 0x0078918c
0078915f : MOV EDX,dword ptr [ESI + 0x60]
00789162 : MOV EAX,dword ptr [ESI]
00789164 : MOV ECX,dword ptr [EAX]
00789166 : PUSH EDX
00789167 : MOV EDX,dword ptr [ESI + 0x48]
0078916a : SHR EDX,0x1
0078916c : ADD EDX,dword ptr [ESI + 0x5c]
0078916f : PUSH EDX
00789170 : MOV EDX,dword ptr [ESI + 0x58]
00789173 : PUSH EDX
00789174 : MOV EDX,dword ptr [ESI + 0x54]
00789177 : PUSH EDX
00789178 : MOV EDX,dword ptr [ESI + 0x50]
0078917b : PUSH EDX
0078917c : PUSH 0x4
0078917e : PUSH EAX
0078917f : MOV EAX,dword ptr [ECX + 0x148]
00789185 : CALL EAX
00789187 : POP ESI
00789188 : MOV ESP,EBP
0078918a : POP EBP
0078918b : RET
0078918c : PUSH EBX
0078918d : PUSH EDI
0078918e : CMP EAX,0x3
00789191 : JNZ 0x00789226
00789197 : MOV EAX,dword ptr [ESI + 0x60]
0078919a : XOR EDI,EDI
0078919c : TEST EAX,EAX
0078919e : JLE 0x007892c7
007891a4 : MOV ECX,dword ptr [ESI + 0x68]
007891a7 : SUB EAX,EDI
007891a9 : CMP EAX,ECX
007891ab : MOV EBX,EAX
007891ad : JL 0x007891b1
007891af : MOV EBX,ECX
007891b1 : MOV ECX,dword ptr [ESI + 0x14]
007891b4 : PUSH ECX
007891b5 : LEA EAX,[EBX + EBX*0x2]
007891b8 : CALL 0x00787fa0
007891bd : TEST EAX,EAX
007891bf : JZ 0x007892c7
007891c5 : MOV ECX,dword ptr [ESI + 0x14]
007891c8 : LEA EDX,[EDI + EDI*0x2]
007891cb : ADD EDX,dword ptr [ESI + 0x5c]
007891ce : PUSH EDX
007891cf : MOV EDX,dword ptr [ESI + 0x50]
007891d2 : PUSH ECX
007891d3 : PUSH EDX
007891d4 : PUSH ESI
007891d5 : MOV EDX,EBX
007891d7 : CALL 0x00787d00
007891dc : MOV EAX,dword ptr [ESI + 0x24]
007891df : MOV ECX,dword ptr [EAX]
007891e1 : MOV EDX,dword ptr [ECX + 0x30]
007891e4 : PUSH EAX
007891e5 : CALL EDX
007891e7 : MOV EDX,dword ptr [ESI + 0x4c]
007891ea : MOV EAX,dword ptr [ESI]
007891ec : MOV ECX,dword ptr [EAX]
007891ee : PUSH EDX
007891ef : MOV EDX,dword ptr [ESI + 0x40]
007891f2 : PUSH EDX
007891f3 : MOV EDX,dword ptr [ESI + 0x24]
007891f6 : PUSH EDX
007891f7 : PUSH 0x0
007891f9 : PUSH EAX
007891fa : MOV EAX,dword ptr [ECX + 0x190]
00789200 : CALL EAX
00789202 : MOV EDX,dword ptr [ESI + 0x44]
00789205 : MOV EAX,dword ptr [ESI]
00789207 : MOV ECX,dword ptr [EAX]
00789209 : PUSH EBX
0078920a : PUSH EDX
0078920b : PUSH 0x4
0078920d : PUSH EAX
0078920e : MOV EAX,dword ptr [ECX + 0x144]
00789214 : CALL EAX
00789216 : MOV EAX,dword ptr [ESI + 0x60]
00789219 : ADD EDI,EBX
0078921b : CMP EDI,EAX
0078921d : JL 0x007891a4
0078921f : POP EDI
00789220 : POP EBX
00789221 : POP ESI
00789222 : MOV ESP,EBP
00789224 : POP EBP
00789225 : RET
00789226 : CMP EAX,0x2
00789229 : JNZ 0x007892c7
0078922f : MOV EAX,dword ptr [ESI + 0x60]
00789232 : XOR EBX,EBX
00789234 : TEST EAX,EAX
00789236 : JLE 0x007892c7
0078923c : LEA ESP,[ESP]
00789240 : MOV ECX,dword ptr [ESI + 0x68]
00789243 : SUB EAX,EBX
00789245 : CMP EAX,ECX
00789247 : MOV EDI,EAX
00789249 : JL 0x0078924d
0078924b : MOV EDI,ECX
0078924d : XOR EAX,EAX
0078924f : CMP dword ptr [ESI + 0x18],0x65
00789253 : SETNZ AL
00789256 : LEA EAX,[EAX + EAX*0x1 + 0x2]
0078925a : MOV dword ptr [EBP + -0x4],EAX
0078925d : PUSH EAX
0078925e : LEA EAX,[EDI + EDI*0x2]
00789261 : CALL 0x00787ef0
00789266 : TEST EAX,EAX
00789268 : JZ 0x007892c7
0078926a : MOV ECX,dword ptr [EBP + -0x4]
0078926d : IMUL ECX,EDI
00789270 : LEA ECX,[ECX + ECX*0x2]
00789273 : PUSH ECX
00789274 : MOV ECX,dword ptr [ESI + 0x5c]
00789277 : LEA EDX,[EBX + EBX*0x2]
0078927a : ADD ECX,EDX
0078927c : IMUL ECX,dword ptr [EBP + -0x4]
00789280 : ADD ECX,dword ptr [ESI + 0xc]
00789283 : PUSH ECX
00789284 : PUSH EAX
00789285 : CALL 0x0063ae40
0078928a : MOV EAX,dword ptr [ESI + 0x28]
0078928d : MOV EDX,dword ptr [EAX]
0078928f : ADD ESP,0xc
00789292 : PUSH EAX
00789293 : MOV EAX,dword ptr [EDX + 0x30]
00789296 : CALL EAX
00789298 : MOV EDX,dword ptr [ESI + 0x48]
0078929b : MOV EAX,dword ptr [ESI]
0078929d : MOV ECX,dword ptr [EAX]
0078929f : PUSH EDI
007892a0 : SHR EDX,0x1
007892a2 : PUSH EDX
007892a3 : MOV EDX,dword ptr [ESI + 0x58]
007892a6 : PUSH EDX
007892a7 : MOV EDX,dword ptr [ESI + 0x54]
007892aa : PUSH EDX
007892ab : MOV EDX,dword ptr [ESI + 0x50]
007892ae : PUSH EDX
007892af : PUSH 0x4
007892b1 : PUSH EAX
007892b2 : MOV EAX,dword ptr [ECX + 0x148]
007892b8 : CALL EAX
007892ba : MOV EAX,dword ptr [ESI + 0x60]
007892bd : ADD EBX,EDI
007892bf : CMP EBX,EAX
007892c1 : JL 0x00789240
007892c7 : POP EDI
007892c8 : POP EBX
007892c9 : POP ESI
007892ca : MOV ESP,EBP
007892cc : POP EBP
007892cd : RET
