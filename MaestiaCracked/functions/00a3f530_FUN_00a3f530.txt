PROGRAM  : Maestia.exe
FUNCTION : FUN_00a3f530
ENTRY    : 00a3f530
BODY     : [[00a3f530, 00a3f899]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a3f530(int param_1)

{
  undefined2 uVar1;
  short sVar2;
  char cVar3;
  int iVar4;
  float *pfVar5;
  undefined4 uVar6;
  undefined1 local_90 [4];
  int local_8c;
  undefined4 local_88;
  undefined4 local_84;
  float local_80;
  float local_7c;
  float local_78;
  float local_74;
  float local_70;
  float local_6c;
  float local_68;
  float local_64;
  float local_60;
  int local_5c;
  float local_58;
  float local_54;
  undefined1 local_50 [56];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b681c6;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (((*(int *)(param_1 + 0xac) == 0) || (iVar4 = FUN_00703c00(0x6600,local_18), iVar4 == 0)) ||
     (iVar4 = *(int *)(iVar4 + 0xf0), iVar4 == 0)) goto LAB_00a3f87c;
  uVar1 = *(undefined2 *)(iVar4 + 4);
  sVar2 = *(short *)(iVar4 + 6);
  local_58 = 0.0;
  local_54 = 0.0;
  if (*(int *)(param_1 + 0xac) != 0) {
    FUN_00889560();
  }
  pfVar5 = &local_58;
  D3DXVec2Normalize();
  local_68 = 0.0;
  local_64 = 0.0;
  local_60 = 0.0;
  if (*(int *)(param_1 + 0xac) != 0) {
    iVar4 = *(int *)(*(int *)(param_1 + 0xac) + 1000);
    local_68 = *(float *)(iVar4 + 0x68);
    local_64 = *(float *)(iVar4 + 0x6c);
    local_60 = *(float *)(iVar4 + 0x70);
  }
  local_5c = 0;
  local_8c = 0;
  local_88 = 0;
  local_84 = 0;
  local_8 = 0;
  FUN_004084e0(0,(uint)pfVar5 & 0xffffff00);
  if (sVar2 == 0x2712) {
    local_7c = local_64 + 3.0;
    local_80 = local_58 * 20.0 + local_68;
    local_78 = local_54 * 20.0 + local_60;
    local_70 = local_7c;
    local_6c = local_80;
    if (((*(int *)(param_1 + 0xc) != 0) &&
        (cVar3 = FUN_007e7c00(local_80,local_78,&local_5c,local_90), cVar3 != '\0')) &&
       (local_7c = *(float *)(local_5c * 9 + -4 + local_8c), local_7c < local_70)) {
      local_7c = local_70;
    }
    iVar4 = *(int *)(param_1 + 0x41c);
    if (iVar4 != 0) {
      uVar6 = 3;
LAB_00a3f7c2:
      FUN_0087bd20(iVar4,0,uVar6);
    }
  }
  else {
    local_80 = local_58 * 50.0 + local_68;
    local_78 = local_54 * 50.0 + local_60;
    local_7c = local_64;
    local_70 = local_78;
    local_6c = local_80;
    if ((*(int *)(param_1 + 0xc) != 0) &&
       (cVar3 = FUN_007e7c00(local_80,local_78,&local_5c,local_90), cVar3 != '\0')) {
      local_7c = *(float *)(local_5c * 9 + -4 + local_8c) + 30.0;
    }
    if ((sVar2 == 0x27a2) && (*(int *)(param_1 + 0x41c) != 0)) {
      *(undefined4 *)(*(int *)(param_1 + 0x41c) + 0x54) = 1;
      iVar4 = *(int *)(param_1 + 0x41c);
      uVar6 = 1;
      goto LAB_00a3f7c2;
    }
  }
  FUN_00404750();
  local_8._0_1_ = 1;
  local_74 = -local_58;
  local_70 = -local_54;
  FUN_00824a20();
  local_8._0_1_ = 2;
  FUN_00876f20(CONCAT22(uVar1,sVar2),*(undefined4 *)(param_1 + 0x160),&local_80,&local_74,local_50);
  local_8._0_1_ = 1;
  FUN_00406560();
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_00406560();
  local_8 = 0xffffffff;
  if (local_8c != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8c = 0;
  local_88 = 0;
  local_84 = 0;
LAB_00a3f87c:
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a3f530 : PUSH EBP
00a3f531 : MOV EBP,ESP
00a3f533 : PUSH -0x1
00a3f535 : PUSH 0xb681c6
00a3f53a : MOV EAX,FS:[0x0]
00a3f540 : PUSH EAX
00a3f541 : SUB ESP,0x88
00a3f547 : MOV EAX,[0x00d66fa0]
00a3f54c : XOR EAX,EBP
00a3f54e : MOV dword ptr [EBP + -0x14],EAX
00a3f551 : PUSH EBX
00a3f552 : PUSH ESI
00a3f553 : PUSH EDI
00a3f554 : PUSH EAX
00a3f555 : LEA EAX,[EBP + -0xc]
00a3f558 : MOV FS:[0x0],EAX
00a3f55e : MOV EBX,dword ptr [EBP + 0x8]
00a3f561 : XOR ESI,ESI
00a3f563 : CMP dword ptr [EBX + 0xac],ESI
00a3f569 : JZ 0x00a3f87c
00a3f56f : PUSH 0x6600
00a3f574 : MOV EDI,ECX
00a3f576 : CALL 0x00703c00
00a3f57b : ADD ESP,0x4
00a3f57e : MOV dword ptr [EBP + 0xffffff6c],EAX
00a3f584 : CMP EAX,ESI
00a3f586 : JZ 0x00a3f87c
00a3f58c : MOV EAX,dword ptr [EAX + 0xf0]
00a3f592 : CMP EAX,ESI
00a3f594 : JZ 0x00a3f87c
00a3f59a : MOVZX EDI,word ptr [EAX + 0x4]
00a3f59e : MOVZX EAX,word ptr [EAX + 0x6]
00a3f5a2 : XORPS XMM0,XMM0
00a3f5a5 : SHL EDI,0x10
00a3f5a8 : OR EDI,EAX
00a3f5aa : MOV EAX,dword ptr [EBX + 0xac]
00a3f5b0 : MOVSS dword ptr [EBP + -0x54],XMM0
00a3f5b5 : MOVSS dword ptr [EBP + -0x50],XMM0
00a3f5ba : CMP EAX,ESI
00a3f5bc : JZ 0x00a3f5c8
00a3f5be : LEA ESI,[EBP + -0x54]
00a3f5c1 : CALL 0x00889560
00a3f5c6 : XOR ESI,ESI
00a3f5c8 : LEA ECX,[EBP + -0x54]
00a3f5cb : PUSH ECX
00a3f5cc : MOV EDX,ECX
00a3f5ce : PUSH EDX
00a3f5cf : CALL 0x004ff71c
00a3f5d4 : XORPS XMM0,XMM0
00a3f5d7 : MOV EAX,dword ptr [EBX + 0xac]
00a3f5dd : MOVSS dword ptr [EBP + -0x64],XMM0
00a3f5e2 : MOVSS dword ptr [EBP + -0x60],XMM0
00a3f5e7 : MOVSS dword ptr [EBP + -0x5c],XMM0
00a3f5ec : CMP EAX,ESI
00a3f5ee : JZ 0x00a3f617
00a3f5f0 : MOV EAX,dword ptr [EAX + 0x3e8]
00a3f5f6 : MOVSS XMM0,dword ptr [EAX + 0x68]
00a3f5fb : ADD EAX,0x68
00a3f5fe : MOVSS dword ptr [EBP + -0x64],XMM0
00a3f603 : MOVSS XMM0,dword ptr [EAX + 0x4]
00a3f608 : MOVSS dword ptr [EBP + -0x60],XMM0
00a3f60d : MOVSS XMM0,dword ptr [EAX + 0x8]
00a3f612 : MOVSS dword ptr [EBP + -0x5c],XMM0
00a3f617 : MOV dword ptr [EBP + -0x58],ESI
00a3f61a : MOV dword ptr [EBP + 0xffffff78],ESI
00a3f620 : MOV dword ptr [EBP + 0xffffff7c],ESI
00a3f626 : MOV dword ptr [EBP + -0x80],ESI
00a3f629 : MOV dword ptr [EBP + -0x4],ESI
00a3f62c : SUB ESP,0xc
00a3f62f : MOV EAX,ESP
00a3f631 : PXOR XMM0,XMM0
00a3f635 : XOR CL,CL
00a3f637 : MOVQ qword ptr [EAX],XMM0
00a3f63b : MOV byte ptr [EAX + 0x8],CL
00a3f63e : LEA EAX,[EBP + 0xffffff74]
00a3f644 : CALL 0x004084e0
00a3f649 : MOVSS XMM0,dword ptr [EBP + -0x54]
00a3f64e : MOV EAX,0x2712
00a3f653 : CMP DI,AX
00a3f656 : MOV EAX,dword ptr [EBX + 0xc]
00a3f659 : JNZ 0x00a3f717
00a3f65f : MOVSS XMM1,dword ptr [EBP + -0x60]
00a3f664 : ADDSS XMM1,dword ptr [0x00cdf19c]
00a3f66c : MOVSS XMM2,dword ptr [0x00cdf140]
00a3f674 : MOVAPS XMM3,XMM1
00a3f677 : MOVSS dword ptr [EBP + -0x6c],XMM1
00a3f67c : MOVSS XMM1,dword ptr [EBP + -0x50]
00a3f681 : MULSS XMM0,XMM2
00a3f685 : ADDSS XMM0,dword ptr [EBP + -0x64]
00a3f68a : MULSS XMM1,XMM2
00a3f68e : ADDSS XMM1,dword ptr [EBP + -0x5c]
00a3f693 : MOVSS dword ptr [EBP + -0x68],XMM0
00a3f698 : MOVSS dword ptr [EBP + 0xffffff70],XMM1
00a3f6a0 : MOVSS dword ptr [EBP + -0x7c],XMM0
00a3f6a5 : MOVSS dword ptr [EBP + -0x78],XMM3
00a3f6aa : MOVSS dword ptr [EBP + -0x74],XMM1
00a3f6af : CMP EAX,ESI
00a3f6b1 : JZ 0x00a3f702
00a3f6b3 : FLD float ptr [EBP + 0xffffff70]
00a3f6b9 : LEA ECX,[EBP + 0xffffff74]
00a3f6bf : PUSH ECX
00a3f6c0 : LEA EDX,[EBP + -0x58]
00a3f6c3 : PUSH EDX
00a3f6c4 : SUB ESP,0x8
00a3f6c7 : FSTP float ptr [ESP + 0x4]
00a3f6cb : FLD float ptr [EBP + -0x68]
00a3f6ce : FSTP float ptr [ESP]
00a3f6d1 : CALL 0x007e7c00
00a3f6d6 : TEST AL,AL
00a3f6d8 : JZ 0x00a3f702
00a3f6da : MOV EAX,dword ptr [EBP + -0x58]
00a3f6dd : MOV ECX,dword ptr [EBP + 0xffffff78]
00a3f6e3 : MOVSS XMM1,dword ptr [EBP + -0x6c]
00a3f6e8 : LEA EDX,[ECX + EAX*0x8]
00a3f6eb : MOVSS XMM0,dword ptr [EAX + EDX*0x1 + -0x4]
00a3f6f1 : COMISS XMM1,XMM0
00a3f6f4 : JBE 0x00a3f6fd
00a3f6f6 : MOVSS dword ptr [EBP + -0x78],XMM1
00a3f6fb : JMP 0x00a3f702
00a3f6fd : MOVSS dword ptr [EBP + -0x78],XMM0
00a3f702 : MOV EAX,dword ptr [EBX + 0x41c]
00a3f708 : CMP EAX,ESI
00a3f70a : JZ 0x00a3f7c9
00a3f710 : PUSH 0x3
00a3f712 : JMP 0x00a3f7c2
00a3f717 : MOVSS XMM2,dword ptr [0x00cdf214]
00a3f71f : MOVSS XMM1,dword ptr [EBP + -0x50]
00a3f724 : MULSS XMM0,XMM2
00a3f728 : ADDSS XMM0,dword ptr [EBP + -0x64]
00a3f72d : MOVSS dword ptr [EBP + -0x68],XMM0
00a3f732 : MULSS XMM1,XMM2
00a3f736 : ADDSS XMM1,dword ptr [EBP + -0x5c]
00a3f73b : MOVSS dword ptr [EBP + -0x7c],XMM0
00a3f740 : MOVSS XMM0,dword ptr [EBP + -0x60]
00a3f745 : MOVSS dword ptr [EBP + -0x6c],XMM1
00a3f74a : MOVSS dword ptr [EBP + -0x78],XMM0
00a3f74f : MOVSS dword ptr [EBP + -0x74],XMM1
00a3f754 : CMP EAX,ESI
00a3f756 : JZ 0x00a3f79b
00a3f758 : FLD float ptr [EBP + -0x6c]
00a3f75b : LEA ECX,[EBP + 0xffffff74]
00a3f761 : PUSH ECX
00a3f762 : LEA EDX,[EBP + -0x58]
00a3f765 : PUSH EDX
00a3f766 : SUB ESP,0x8
00a3f769 : FSTP float ptr [ESP + 0x4]
00a3f76d : FLD float ptr [EBP + -0x68]
00a3f770 : FSTP float ptr [ESP]
00a3f773 : CALL 0x007e7c00
00a3f778 : TEST AL,AL
00a3f77a : JZ 0x00a3f79b
00a3f77c : MOV EAX,dword ptr [EBP + -0x58]
00a3f77f : MOV ECX,dword ptr [EBP + 0xffffff78]
00a3f785 : LEA EDX,[ECX + EAX*0x8]
00a3f788 : MOVSS XMM0,dword ptr [EAX + EDX*0x1 + -0x4]
00a3f78e : ADDSS XMM0,dword ptr [0x00cdf12c]
00a3f796 : MOVSS dword ptr [EBP + -0x78],XMM0
00a3f79b : MOV EAX,0x27a2
00a3f7a0 : CMP DI,AX
00a3f7a3 : JNZ 0x00a3f7c9
00a3f7a5 : CMP dword ptr [EBX + 0x41c],ESI
00a3f7ab : JZ 0x00a3f7c9
00a3f7ad : MOV EAX,dword ptr [EBX + 0x41c]
00a3f7b3 : MOV dword ptr [EAX + 0x54],0x1
00a3f7ba : MOV EAX,dword ptr [EBX + 0x41c]
00a3f7c0 : PUSH 0x1
00a3f7c2 : PUSH ESI
00a3f7c3 : PUSH EAX
00a3f7c4 : CALL 0x0087bd20
00a3f7c9 : PUSH EDI
00a3f7ca : PUSH 0xcc4b1c
00a3f7cf : LEA ESI,[EBP + -0x30]
00a3f7d2 : CALL 0x00404750
00a3f7d7 : ADD ESP,0x8
00a3f7da : MOV byte ptr [EBP + -0x4],0x1
00a3f7de : MOVSS XMM2,dword ptr [0x00cdf0c0]
00a3f7e6 : MOV ECX,dword ptr [0x0172491c]
00a3f7ec : MOVSS XMM0,dword ptr [EBP + -0x54]
00a3f7f1 : MOVSS XMM1,dword ptr [EBP + -0x50]
00a3f7f6 : MOV EDX,dword ptr [EBP + 0xffffff6c]
00a3f7fc : PUSH 0x0
00a3f7fe : XORPS XMM0,XMM2
00a3f801 : XORPS XMM1,XMM2
00a3f804 : ADD EDX,0x18
00a3f807 : PUSH ECX
00a3f808 : LEA ESI,[EBP + -0x4c]
00a3f80b : MOVSS dword ptr [EBP + -0x70],XMM0
00a3f810 : MOVSS dword ptr [EBP + -0x6c],XMM1
00a3f815 : CALL 0x00824a20
00a3f81a : MOV byte ptr [EBP + -0x4],0x2
00a3f81e : MOV EDX,ESI
00a3f820 : PUSH EDX
00a3f821 : MOV EDX,dword ptr [EBX + 0x160]
00a3f827 : LEA EAX,[EBP + -0x70]
00a3f82a : PUSH EAX
00a3f82b : LEA ECX,[EBP + -0x7c]
00a3f82e : PUSH ECX
00a3f82f : PUSH EDX
00a3f830 : PUSH EDI
00a3f831 : LEA ECX,[EBX + 0x6a8]
00a3f837 : LEA EDI,[EBP + -0x30]
00a3f83a : CALL 0x00876f20
00a3f83f : MOV byte ptr [EBP + -0x4],0x1
00a3f843 : MOV ECX,ESI
00a3f845 : CALL 0x00406560
00a3f84a : MOV byte ptr [EBP + -0x4],0x0
00a3f84e : MOV ECX,EDI
00a3f850 : CALL 0x00406560
00a3f855 : MOV dword ptr [EBP + -0x4],0xffffffff
00a3f85c : MOV ECX,dword ptr [EBP + 0xffffff78]
00a3f862 : XOR ESI,ESI
00a3f864 : CMP ECX,ESI
00a3f866 : JZ 0x00a3f86d
00a3f868 : CALL 0x006f04e0
00a3f86d : MOV dword ptr [EBP + 0xffffff78],ESI
00a3f873 : MOV dword ptr [EBP + 0xffffff7c],ESI
00a3f879 : MOV dword ptr [EBP + -0x80],ESI
00a3f87c : MOV ECX,dword ptr [EBP + -0xc]
00a3f87f : MOV dword ptr FS:[0x0],ECX
00a3f886 : POP ECX
00a3f887 : POP EDI
00a3f888 : POP ESI
00a3f889 : POP EBX
00a3f88a : MOV ECX,dword ptr [EBP + -0x14]
00a3f88d : XOR ECX,EBP
00a3f88f : CALL 0x00633e6b
00a3f894 : MOV ESP,EBP
00a3f896 : POP EBP
00a3f897 : RET 0x4
