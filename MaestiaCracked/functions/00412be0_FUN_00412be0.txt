PROGRAM  : Maestia.exe
FUNCTION : FUN_00412be0
ENTRY    : 00412be0
BODY     : [[00412be0, 00412c71]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00412bf5) */

int FUN_00412be0(short *param_1,int param_2)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  short *psVar4;
  int iVar5;
  short *psVar6;
  int unaff_EDI;
  
  if (*(int *)(unaff_EDI + 0x14) == 0) {
    return -1;
  }
  uVar2 = *(uint *)(unaff_EDI + 0x18);
  piVar1 = (int *)(unaff_EDI + 4);
  piVar3 = piVar1;
  if (7 < uVar2) {
    piVar3 = (int *)*piVar1;
  }
  psVar6 = (short *)((int)piVar3 + (*(int *)(unaff_EDI + 0x14) + -1) * 2);
  while (param_2 != 0) {
    psVar4 = param_1;
    iVar5 = param_2;
    while (*psVar4 != *psVar6) {
      psVar4 = psVar4 + 1;
      iVar5 = iVar5 + -1;
      if (iVar5 == 0) goto LAB_00412c2d;
    }
    psVar4 = (short *)FUN_00404a10();
    if (psVar6 == psVar4) {
      return -1;
    }
    psVar6 = psVar6 + -1;
  }
LAB_00412c2d:
  if (7 < uVar2) {
    return (int)psVar6 - *piVar1 >> 1;
  }
  return (int)psVar6 - (int)piVar1 >> 1;
}



============================================================
DISASSEMBLY
============================================================
00412be0 : PUSH EBP
00412be1 : MOV EBP,ESP
00412be3 : PUSH ECX
00412be4 : MOV EAX,dword ptr [EDI + 0x14]
00412be7 : PUSH EBX
00412be8 : MOV EBX,dword ptr [EBP + 0xc]
00412beb : PUSH ESI
00412bec : TEST EAX,EAX
00412bee : JBE 0x00412c67
00412bf0 : CMP EAX,-0x1
00412bf3 : JBE 0x00412bfa
00412bf5 : OR ECX,0xffffffff
00412bf8 : JMP 0x00412bfd
00412bfa : LEA ECX,[EAX + -0x1]
00412bfd : MOV EAX,dword ptr [EDI + 0x18]
00412c00 : MOV dword ptr [EBP + -0x4],EAX
00412c03 : CMP EAX,0x8
00412c06 : LEA EAX,[EDI + 0x4]
00412c09 : MOV dword ptr [EBP + 0xc],EAX
00412c0c : JC 0x00412c10
00412c0e : MOV EAX,dword ptr [EAX]
00412c10 : LEA ESI,[EAX + ECX*0x2]
00412c13 : MOV EAX,dword ptr [EBP + 0x8]
00412c16 : MOV ECX,EBX
00412c18 : TEST EBX,EBX
00412c1a : JBE 0x00412c2d
00412c1c : MOVZX EDX,word ptr [ESI]
00412c1f : NOP
00412c20 : CMP word ptr [EAX],DX
00412c23 : JZ 0x00412c46
00412c25 : ADD EAX,0x2
00412c28 : SUB ECX,0x1
00412c2b : JNZ 0x00412c20
00412c2d : CMP dword ptr [EBP + -0x4],0x8
00412c31 : JC 0x00412c56
00412c33 : MOV EAX,dword ptr [EBP + 0xc]
00412c36 : MOV ECX,dword ptr [EAX]
00412c38 : MOV EAX,ESI
00412c3a : SUB EAX,ECX
00412c3c : POP ESI
00412c3d : SAR EAX,0x1
00412c3f : POP EBX
00412c40 : MOV ESP,EBP
00412c42 : POP EBP
00412c43 : RET 0x8
00412c46 : MOV ECX,EDI
00412c48 : CALL 0x00404a10
00412c4d : CMP ESI,EAX
00412c4f : JZ 0x00412c67
00412c51 : SUB ESI,0x2
00412c54 : JMP 0x00412c13
00412c56 : MOV ECX,dword ptr [EBP + 0xc]
00412c59 : MOV EAX,ESI
00412c5b : SUB EAX,ECX
00412c5d : POP ESI
00412c5e : SAR EAX,0x1
00412c60 : POP EBX
00412c61 : MOV ESP,EBP
00412c63 : POP EBP
00412c64 : RET 0x8
00412c67 : POP ESI
00412c68 : OR EAX,0xffffffff
00412c6b : POP EBX
00412c6c : MOV ESP,EBP
00412c6e : POP EBP
00412c6f : RET 0x8
