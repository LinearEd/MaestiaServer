PROGRAM  : Maestia.exe
FUNCTION : FUN_0081bda0
ENTRY    : 0081bda0
BODY     : [[0081bda0, 0081bebf]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0081bda0(undefined2 param_1,char param_2)

{
  wchar_t wVar1;
  int *piVar2;
  int iVar3;
  wchar_t *pwVar4;
  int in_ECX;
  ushort *puVar5;
  wchar_t local_808;
  undefined1 local_806 [2046];
  uint local_8;
  
  local_8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  puVar5 = *(ushort **)(in_ECX + 0x3b4);
  local_808 = L'\0';
  if (puVar5 != *(ushort **)(in_ECX + 0x3b8)) {
    do {
      pwVar4 = &local_808;
      do {
        wVar1 = *pwVar4;
        pwVar4 = pwVar4 + 1;
      } while (wVar1 != L'\0');
      iVar3 = (int)pwVar4 - (int)local_806 >> 1;
      __snwprintf((wchar_t *)(local_806 + iVar3 * 2 + -2),0x400 - iVar3,L"%d&%d&%d&",(uint)*puVar5,
                  (uint)puVar5[1],(uint)(byte)puVar5[2]);
      puVar5 = puVar5 + 3;
    } while (puVar5 != *(ushort **)(in_ECX + 0x3b8));
  }
  pwVar4 = &local_808;
  do {
    wVar1 = *pwVar4;
    pwVar4 = pwVar4 + 1;
  } while (wVar1 != L'\0');
  iVar3 = (int)pwVar4 - (int)local_806 >> 1;
  if (0 < iVar3) {
    *(undefined2 *)(local_806 + iVar3 * 2 + -4) = 0;
  }
  if (param_2 == '\0') {
    if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
      (**(code **)(*piVar2 + 4))(piVar2,"SetWorldMapMyPosActive","%d,%ls",param_1,&local_808);
    }
  }
  else {
    (**(code **)(**(int **)(in_ECX + 0x368) + 4))
              (*(int **)(in_ECX + 0x368),"SetMoveZone","%d,%ls",param_1,&local_808);
  }
  __security_check_cookie(local_8 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0081bda0 : PUSH EBP
0081bda1 : MOV EBP,ESP
0081bda3 : SUB ESP,0x804
0081bda9 : MOV EAX,[0x00d66fa0]
0081bdae : XOR EAX,EBP
0081bdb0 : MOV dword ptr [EBP + -0x4],EAX
0081bdb3 : PUSH EBX
0081bdb4 : MOV BX,word ptr [EBP + 0x8]
0081bdb8 : PUSH ESI
0081bdb9 : PUSH EDI
0081bdba : MOV EDI,ECX
0081bdbc : MOV ESI,dword ptr [EDI + 0x3b4]
0081bdc2 : XOR EAX,EAX
0081bdc4 : MOV word ptr [EBP + 0xfffff7fc],AX
0081bdcb : CMP ESI,dword ptr [EDI + 0x3b8]
0081bdd1 : JZ 0x0081be25
0081bdd3 : LEA EAX,[EBP + 0xfffff7fc]
0081bdd9 : LEA EDX,[EAX + 0x2]
0081bddc : LEA ESP,[ESP]
0081bde0 : MOV CX,word ptr [EAX]
0081bde3 : ADD EAX,0x2
0081bde6 : TEST CX,CX
0081bde9 : JNZ 0x0081bde0
0081bdeb : MOVZX ECX,byte ptr [ESI + 0x4]
0081bdef : SUB EAX,EDX
0081bdf1 : MOVZX EDX,word ptr [ESI + 0x2]
0081bdf5 : PUSH ECX
0081bdf6 : MOVZX ECX,word ptr [ESI]
0081bdf9 : PUSH EDX
0081bdfa : PUSH ECX
0081bdfb : SAR EAX,0x1
0081bdfd : MOV EDX,0x400
0081be02 : SUB EDX,EAX
0081be04 : PUSH 0xc344f4
0081be09 : PUSH EDX
0081be0a : LEA EAX,[EBP + EAX*0x2 + 0xfffff7fc]
0081be11 : PUSH EAX
0081be12 : CALL 0x006343c8
0081be17 : ADD ESI,0x6
0081be1a : ADD ESP,0x18
0081be1d : CMP ESI,dword ptr [EDI + 0x3b8]
0081be23 : JNZ 0x0081bdd3
0081be25 : LEA EAX,[EBP + 0xfffff7fc]
0081be2b : LEA EDX,[EAX + 0x2]
0081be2e : MOV EDI,EDI
0081be30 : MOV CX,word ptr [EAX]
0081be33 : ADD EAX,0x2
0081be36 : TEST CX,CX
0081be39 : JNZ 0x0081be30
0081be3b : SUB EAX,EDX
0081be3d : SAR EAX,0x1
0081be3f : TEST EAX,EAX
0081be41 : JLE 0x0081be4d
0081be43 : XOR ECX,ECX
0081be45 : MOV word ptr [EBP + EAX*0x2 + 0xfffff7fa],CX
0081be4d : CMP byte ptr [EBP + 0xc],0x0
0081be51 : JZ 0x0081be78
0081be53 : MOV EDI,dword ptr [EDI + 0x368]
0081be59 : MOV EDX,dword ptr [EDI]
0081be5b : MOV EDX,dword ptr [EDX + 0x4]
0081be5e : LEA EAX,[EBP + 0xfffff7fc]
0081be64 : PUSH EAX
0081be65 : MOVZX ECX,BX
0081be68 : PUSH ECX
0081be69 : PUSH 0xc34508
0081be6e : PUSH 0xc34510
0081be73 : PUSH EDI
0081be74 : CALL EDX
0081be76 : JMP 0x0081beaa
0081be78 : MOV EAX,[0x00da9894]
0081be7d : MOV EAX,dword ptr [EAX]
0081be7f : TEST EAX,EAX
0081be81 : JZ 0x0081bead
0081be83 : MOV EAX,dword ptr [EAX + 0x114]
0081be89 : TEST EAX,EAX
0081be8b : JZ 0x0081bead
0081be8d : MOV ECX,dword ptr [EAX]
0081be8f : LEA EDX,[EBP + 0xfffff7fc]
0081be95 : PUSH EDX
0081be96 : MOVZX EDX,BX
0081be99 : PUSH EDX
0081be9a : PUSH 0xc3451c
0081be9f : PUSH 0xc34524
0081bea4 : PUSH EAX
0081bea5 : MOV EAX,dword ptr [ECX + 0x4]
0081bea8 : CALL EAX
0081beaa : ADD ESP,0x14
0081bead : MOV ECX,dword ptr [EBP + -0x4]
0081beb0 : POP EDI
0081beb1 : POP ESI
0081beb2 : XOR ECX,EBP
0081beb4 : POP EBX
0081beb5 : CALL 0x00633e6b
0081beba : MOV ESP,EBP
0081bebc : POP EBP
0081bebd : RET 0x8
