PROGRAM  : Maestia.exe
FUNCTION : FUN_00517390
ENTRY    : 00517390
BODY     : [[00517390, 00517409]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00517390(uint param_1)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  DWORD DVar5;
  uint local_4;
  
  if (DAT_00d73264 == 0) {
    iVar4 = FUN_00515840(0x20,0);
    if (iVar4 == 0) {
      DAT_00d73264 = 0;
    }
    else {
      DAT_00d73264 = FUN_00516ed0();
    }
  }
  iVar3 = DAT_00d73264;
  puVar2 = *(undefined4 **)(DAT_00d73264 + 0x14);
  iVar4 = DAT_00d73264 + 4;
  local_4 = param_1;
  DVar5 = WaitForSingleObject((HANDLE)*puVar2,0xffffffff);
  if (DVar5 == 0) {
    piVar1 = puVar2 + 2;
    *piVar1 = *piVar1 + 1;
  }
  FUN_00516990(iVar3,&local_4,param_1 >> 6 ^ param_1);
  FUN_00517030(iVar4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00517390 : PUSH ECX
00517391 : MOV EAX,[0x00d73264]
00517396 : TEST EAX,EAX
00517398 : JNZ 0x005173bc
0051739a : MOV ECX,dword ptr [0x00d73250]
005173a0 : PUSH EAX
005173a1 : PUSH 0x20
005173a3 : CALL 0x00515840
005173a8 : TEST EAX,EAX
005173aa : JZ 0x005173b5
005173ac : MOV ECX,EAX
005173ae : CALL 0x00516ed0
005173b3 : JMP 0x005173b7
005173b5 : XOR EAX,EAX
005173b7 : MOV [0x00d73264],EAX
005173bc : PUSH EBX
005173bd : PUSH EBP
005173be : MOV EBP,dword ptr [ESP + 0x10]
005173c2 : PUSH ESI
005173c3 : MOV ESI,dword ptr [0x00d73264]
005173c9 : MOV EBX,dword ptr [ESI + 0x14]
005173cc : MOV ECX,dword ptr [EBX]
005173ce : PUSH EDI
005173cf : LEA EDI,[ESI + 0x4]
005173d2 : PUSH -0x1
005173d4 : PUSH ECX
005173d5 : MOV dword ptr [ESP + 0x18],EBP
005173d9 : CALL dword ptr [0x00b85100]
005173df : TEST EAX,EAX
005173e1 : JNZ 0x005173e6
005173e3 : INC dword ptr [EBX + 0x8]
005173e6 : MOV EDX,EBP
005173e8 : SHR EDX,0x6
005173eb : XOR EDX,EBP
005173ed : PUSH EDX
005173ee : LEA EAX,[ESP + 0x14]
005173f2 : PUSH EAX
005173f3 : PUSH ESI
005173f4 : MOV ECX,ESI
005173f6 : CALL 0x00516990
005173fb : MOV ECX,dword ptr [EDI + 0x10]
005173fe : PUSH EDI
005173ff : CALL 0x00517030
00517404 : POP EDI
00517405 : POP ESI
00517406 : POP EBP
00517407 : POP EBX
00517408 : POP ECX
00517409 : RET
