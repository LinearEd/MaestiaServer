PROGRAM  : Maestia.exe
FUNCTION : FUN_00608dc0
ENTRY    : 00608dc0
BODY     : [[00608dc0, 006091f8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00608dc0(int *param_1,int *param_2,int *param_3,int *param_4)

{
  uint uVar1;
  ushort *puVar2;
  short *psVar3;
  undefined4 uVar4;
  float fVar5;
  float fVar6;
  int iVar7;
  int iVar8;
  int in_ECX;
  uint uVar9;
  uint *puVar10;
  float10 fVar11;
  undefined4 local_6c;
  float local_68;
  undefined1 local_64 [4];
  int local_60;
  float local_5c;
  uint local_58;
  float local_54;
  int local_50;
  uint local_4c;
  float local_48;
  uint *local_44;
  
  *param_1 = 0x3fff;
  *param_2 = 0x3fff;
  *param_3 = -0x3fff;
  *param_4 = -0x3fff;
  local_4c = 0;
  local_50 = in_ECX;
  if (*(int *)(in_ECX + 0x28) != 0) {
    do {
      puVar10 = (uint *)(*(int *)(*(int *)(in_ECX + 0x34) + (local_4c >> 6) * 4) +
                        (local_4c & 0x3f) * 8);
      uVar4 = *(undefined4 *)
               (*(int *)(*(int *)(in_ECX + 0x24) + (*puVar10 >> 6) * 4) + (*puVar10 & 0x3f) * 4);
      local_6c._2_2_ = (short)((uint)uVar4 >> 0x10);
      local_60 = (int)local_6c._2_2_;
      local_54 = (float)(int)(short)((short)uVar4 >> 1);
      if ((int)local_54 < *param_1) {
        *param_1 = (int)local_54;
      }
      if (local_60 < *param_2) {
        *param_2 = local_60;
      }
      if (*param_3 < (int)local_54) {
        *param_3 = (int)local_54;
      }
      if (*param_4 < local_60) {
        *param_4 = local_60;
      }
      uVar9 = 1;
      local_44 = puVar10;
      if (1 < puVar10[1]) {
        do {
          uVar1 = *puVar10 + uVar9;
          puVar2 = (ushort *)
                   (*(int *)(*(int *)(in_ECX + 0x24) + (uVar1 >> 6) * 4) + (uVar1 & 0x3f) * 4);
          if ((*puVar2 & 1) == 0) {
            local_6c = *(undefined4 *)puVar2;
          }
          else {
            local_54 = (float)(int)local_54;
            local_58 = uVar9 + 1;
            uVar9 = *puVar10 + local_58;
            fVar5 = (float)(int)((short)*puVar2 >> 1);
            iVar7 = *(int *)(*(int *)(in_ECX + 0x24) + (uVar9 >> 6) * 4);
            uVar9 = uVar9 & 0x3f;
            psVar3 = (short *)(iVar7 + uVar9 * 4);
            local_5c = (float)((int)*(short *)(iVar7 + uVar9 * 4) >> 1);
            fVar6 = ((fVar5 + fVar5) - local_54) - (float)(int)local_5c;
            if (fVar6 == 0.0) {
              fVar6 = -1.0;
            }
            else {
              fVar6 = (fVar5 - local_54) / fVar6;
            }
            uVar9 = local_58;
            if ((0.0 < fVar6) && (fVar6 < 1.0)) {
              local_48 = (float)(int)(short)puVar2[1];
              FUN_00553170(local_54,(float)local_60,fVar5,(float)(int)local_48,(float)(int)local_5c,
                           (float)(int)psVar3[1],fVar6,local_64,&local_68);
              fVar11 = (float10)FUN_0063bc90((double)local_68);
              local_48 = (float)fVar11;
              iVar7 = FUN_0063b380();
              fVar11 = (float10)FUN_0063bc90();
              local_48 = (float)fVar11;
              iVar8 = FUN_0063b380();
              if (iVar8 < *param_1) {
                *param_1 = iVar8;
              }
              if (iVar7 < *param_2) {
                *param_2 = iVar7;
              }
              if (*param_3 < iVar8) {
                *param_3 = iVar8;
              }
              uVar9 = local_58;
              if (*param_4 < iVar7) {
                *param_4 = iVar7;
              }
            }
            local_5c = (float)local_60;
            local_58 = (uint)psVar3[1];
            fVar5 = (float)(int)(short)puVar2[1];
            fVar6 = ((fVar5 + fVar5) - local_5c) - (float)(int)local_58;
            if (fVar6 == 0.0) {
              fVar6 = -1.0;
            }
            else {
              fVar6 = (fVar5 - local_5c) / fVar6;
            }
            if ((0.0 < fVar6) && (fVar6 < 1.0)) {
              local_48 = (float)(int)((short)*puVar2 >> 1);
              FUN_00553170(local_54,local_5c,(float)(int)local_48,fVar5,(float)(int)(*psVar3 >> 1),
                           (float)(int)local_58,fVar6,local_64,&local_68);
              fVar11 = (float10)FUN_0063bc90((double)local_68);
              local_48 = (float)fVar11;
              iVar7 = FUN_0063b380();
              fVar11 = (float10)FUN_0063bc90();
              local_48 = (float)fVar11;
              iVar8 = FUN_0063b380();
              if (iVar8 < *param_1) {
                *param_1 = iVar8;
              }
              if (iVar7 < *param_2) {
                *param_2 = iVar7;
              }
              if (*param_3 < iVar8) {
                *param_3 = iVar8;
              }
              if (*param_4 < iVar7) {
                *param_4 = iVar7;
                local_6c = *(undefined4 *)psVar3;
                puVar10 = local_44;
                goto LAB_00609194;
              }
            }
            local_6c = *(undefined4 *)psVar3;
            puVar10 = local_44;
          }
LAB_00609194:
          local_60 = (int)local_6c._2_2_;
          local_54 = (float)(int)((short)local_6c >> 1);
          if ((int)local_54 < *param_1) {
            *param_1 = (int)local_54;
          }
          if (local_60 < *param_2) {
            *param_2 = local_60;
          }
          if (*param_3 < (int)local_54) {
            *param_3 = (int)local_54;
          }
          if (*param_4 < local_60) {
            *param_4 = local_60;
          }
          uVar9 = uVar9 + 1;
          in_ECX = local_50;
        } while (uVar9 < puVar10[1]);
      }
      local_4c = local_4c + 1;
    } while (local_4c < *(uint *)(in_ECX + 0x28));
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00608dc0 : PUSH EBP
00608dc1 : MOV EBP,ESP
00608dc3 : AND ESP,0xffffffc0
00608dc6 : SUB ESP,0x34
00608dc9 : MOV EAX,dword ptr [EBP + 0x8]
00608dcc : MOV EDX,ECX
00608dce : MOV ECX,dword ptr [EBP + 0xc]
00608dd1 : MOV dword ptr [EAX],0x3fff
00608dd7 : MOV EAX,dword ptr [EBP + 0x10]
00608dda : MOV dword ptr [ECX],0x3fff
00608de0 : MOV ECX,dword ptr [EBP + 0x14]
00608de3 : MOV dword ptr [EAX],0xffffc001
00608de9 : PUSH EBX
00608dea : MOV dword ptr [ECX],0xffffc001
00608df0 : XOR ECX,ECX
00608df2 : PUSH ESI
00608df3 : PUSH EDI
00608df4 : MOV dword ptr [ESP + 0x30],EDX
00608df8 : MOV dword ptr [ESP + 0x34],ECX
00608dfc : CMP dword ptr [EDX + 0x28],ECX
00608dff : JBE 0x006091f0
00608e05 : FLDZ
00608e07 : MOV ESI,dword ptr [EDX + 0x34]
00608e0a : MOV EBX,dword ptr [EDX + 0x24]
00608e0d : MOV EAX,ECX
00608e0f : SHR EAX,0x6
00608e12 : MOV EAX,dword ptr [ESI + EAX*0x4]
00608e15 : MOV EDI,ECX
00608e17 : AND EDI,0x3f
00608e1a : LEA EDI,[EAX + EDI*0x8]
00608e1d : MOV EAX,dword ptr [EDI]
00608e1f : MOV ESI,EAX
00608e21 : SHR ESI,0x6
00608e24 : MOV ESI,dword ptr [EBX + ESI*0x4]
00608e27 : MOV EBX,dword ptr [EBP + 0x8]
00608e2a : AND EAX,0x3f
00608e2d : MOV EAX,dword ptr [ESI + EAX*0x4]
00608e30 : MOV dword ptr [ESP + 0x14],EAX
00608e34 : MOVSX ESI,word ptr [ESP + 0x16]
00608e39 : SAR AX,0x1
00608e3c : CWDE
00608e3d : CMP EAX,dword ptr [EBX]
00608e3f : MOV dword ptr [ESP + 0x3c],EDI
00608e43 : MOV dword ptr [ESP + 0x20],ESI
00608e47 : MOV dword ptr [ESP + 0x2c],EAX
00608e4b : JGE 0x00608e4f
00608e4d : MOV dword ptr [EBX],EAX
00608e4f : MOV EBX,dword ptr [EBP + 0xc]
00608e52 : CMP ESI,dword ptr [EBX]
00608e54 : JGE 0x00608e58
00608e56 : MOV dword ptr [EBX],ESI
00608e58 : MOV EBX,dword ptr [EBP + 0x10]
00608e5b : CMP EAX,dword ptr [EBX]
00608e5d : JLE 0x00608e61
00608e5f : MOV dword ptr [EBX],EAX
00608e61 : MOV EAX,dword ptr [EBP + 0x14]
00608e64 : CMP ESI,dword ptr [EAX]
00608e66 : JLE 0x00608e6a
00608e68 : MOV dword ptr [EAX],ESI
00608e6a : MOV EBX,0x1
00608e6f : CMP dword ptr [EDI + 0x4],EBX
00608e72 : JBE 0x006091e0
00608e78 : MOV ECX,dword ptr [EDI]
00608e7a : MOV EDX,dword ptr [EDX + 0x24]
00608e7d : LEA EAX,[ECX + EBX*0x1]
00608e80 : MOV ESI,EAX
00608e82 : SHR ESI,0x6
00608e85 : MOV ESI,dword ptr [EDX + ESI*0x4]
00608e88 : AND EAX,0x3f
00608e8b : LEA ESI,[ESI + EAX*0x4]
00608e8e : MOVZX EAX,word ptr [ESI]
00608e91 : TEST AL,0x1
00608e93 : JZ 0x0060918e
00608e99 : FILD dword ptr [ESP + 0x2c]
00608e9d : SAR AX,0x1
00608ea0 : CWDE
00608ea1 : MOV dword ptr [ESP + 0x24],EAX
00608ea5 : FSTP float ptr [ESP + 0x2c]
00608ea9 : INC EBX
00608eaa : FLD float ptr [ESP + 0x2c]
00608eae : ADD ECX,EBX
00608eb0 : FST float ptr [ESP + 0x38]
00608eb4 : MOV EDI,ECX
00608eb6 : FILD dword ptr [ESP + 0x24]
00608eba : SHR EDI,0x6
00608ebd : MOV EDX,dword ptr [EDX + EDI*0x4]
00608ec0 : AND ECX,0x3f
00608ec3 : MOVSX EAX,word ptr [EDX + ECX*0x4]
00608ec7 : FSTP float ptr [ESP + 0x24]
00608ecb : FLD float ptr [ESP + 0x24]
00608ecf : FST float ptr [ESP + 0x14]
00608ed3 : FLD float ptr [ESP + 0x14]
00608ed7 : LEA EDI,[EDX + ECX*0x4]
00608eda : FLD ST0
00608edc : SAR EAX,0x1
00608ede : FADD ST0,ST1
00608ee0 : MOV dword ptr [ESP + 0x24],EAX
00608ee4 : FLD float ptr [ESP + 0x38]
00608ee8 : MOV dword ptr [ESP + 0x28],EBX
00608eec : FLD ST0
00608eee : FSUBP ST2,ST0
00608ef0 : FILD dword ptr [ESP + 0x24]
00608ef4 : FSUBP ST2,ST0
00608ef6 : FXCH
00608ef8 : FSTP float ptr [ESP + 0x38]
00608efc : FLD ST4
00608efe : FLD float ptr [ESP + 0x38]
00608f02 : FUCOM
00608f04 : FNSTSW AX
00608f06 : FSTP ST1
00608f08 : TEST AH,0x44
00608f0b : JP 0x00608f1b
00608f0d : FSTP ST2
00608f0f : FSTP ST0
00608f11 : FSTP ST0
00608f13 : FLD double ptr [0x00b86090]
00608f19 : JMP 0x00608f21
00608f1b : FXCH ST2
00608f1d : FSUBRP
00608f1f : FDIVRP
00608f21 : FSTP float ptr [ESP + 0x14]
00608f25 : FLD float ptr [ESP + 0x14]
00608f29 : FCOM ST3
00608f2b : FNSTSW AX
00608f2d : FSTP ST3
00608f2f : TEST AH,0x41
00608f32 : JNZ 0x00609008
00608f38 : FLD1
00608f3a : FCOMP ST3
00608f3c : FNSTSW AX
00608f3e : TEST AH,0x41
00608f41 : JNZ 0x00609008
00608f47 : MOVSX EAX,word ptr [EDI + 0x2]
00608f4b : FXCH ST2
00608f4d : LEA ECX,[ESP + 0x18]
00608f51 : PUSH ECX
00608f52 : MOVSX ECX,word ptr [ESI + 0x2]
00608f56 : LEA EDX,[ESP + 0x20]
00608f5a : PUSH EDX
00608f5b : SUB ESP,0x1c
00608f5e : MOV dword ptr [ESP + 0x5c],EAX
00608f62 : FSTP float ptr [ESP + 0x18]
00608f66 : FILD dword ptr [ESP + 0x5c]
00608f6a : MOV dword ptr [ESP + 0x5c],ECX
00608f6e : FSTP float ptr [ESP + 0x14]
00608f72 : FILD dword ptr [ESP + 0x48]
00608f76 : FSTP float ptr [ESP + 0x10]
00608f7a : FILD dword ptr [ESP + 0x5c]
00608f7e : FSTP float ptr [ESP + 0xc]
00608f82 : FXCH
00608f84 : FSTP float ptr [ESP + 0x8]
00608f88 : FILD dword ptr [ESP + 0x44]
00608f8c : FSTP float ptr [ESP + 0x4]
00608f90 : FSTP float ptr [ESP]
00608f93 : CALL 0x00553170
00608f98 : FLD float ptr [ESP + 0x3c]
00608f9c : ADD ESP,0x1c
00608f9f : FSTP double ptr [ESP]
00608fa2 : CALL 0x0063bc90
00608fa7 : FSTP float ptr [ESP + 0x40]
00608fab : FLD float ptr [ESP + 0x40]
00608faf : FADD double ptr [0x00cdf120]
00608fb5 : CALL 0x0063b380
00608fba : FLD float ptr [ESP + 0x24]
00608fbe : FSTP double ptr [ESP]
00608fc1 : MOV EBX,EAX
00608fc3 : CALL 0x0063bc90
00608fc8 : FSTP float ptr [ESP + 0x40]
00608fcc : FLD float ptr [ESP + 0x40]
00608fd0 : ADD ESP,0x8
00608fd3 : FADD double ptr [0x00cdf120]
00608fd9 : CALL 0x0063b380
00608fde : MOV ECX,dword ptr [EBP + 0x8]
00608fe1 : CMP EAX,dword ptr [ECX]
00608fe3 : JGE 0x00608fe7
00608fe5 : MOV dword ptr [ECX],EAX
00608fe7 : MOV ECX,dword ptr [EBP + 0xc]
00608fea : CMP EBX,dword ptr [ECX]
00608fec : JGE 0x00608ff0
00608fee : MOV dword ptr [ECX],EBX
00608ff0 : MOV ECX,dword ptr [EBP + 0x10]
00608ff3 : CMP EAX,dword ptr [ECX]
00608ff5 : JLE 0x00608ff9
00608ff7 : MOV dword ptr [ECX],EAX
00608ff9 : MOV EAX,dword ptr [EBP + 0x14]
00608ffc : CMP EBX,dword ptr [EAX]
00608ffe : JLE 0x00609002
00609000 : MOV dword ptr [EAX],EBX
00609002 : MOV EBX,dword ptr [ESP + 0x28]
00609006 : JMP 0x0060900e
00609008 : FSTP ST2
0060900a : FSTP ST1
0060900c : FSTP ST0
0060900e : FILD dword ptr [ESP + 0x20]
00609012 : MOVSX EDX,word ptr [ESI + 0x2]
00609016 : MOVSX EAX,word ptr [EDI + 0x2]
0060901a : FSTP float ptr [ESP + 0x38]
0060901e : FLD float ptr [ESP + 0x38]
00609022 : MOV dword ptr [ESP + 0x38],EDX
00609026 : FST float ptr [ESP + 0x24]
0060902a : MOV dword ptr [ESP + 0x28],EAX
0060902e : FILD dword ptr [ESP + 0x38]
00609032 : FSTP float ptr [ESP + 0x38]
00609036 : FLD float ptr [ESP + 0x38]
0060903a : FST float ptr [ESP + 0x38]
0060903e : FLD float ptr [ESP + 0x38]
00609042 : FLD ST0
00609044 : FADD ST0,ST1
00609046 : FLD float ptr [ESP + 0x24]
0060904a : FLD ST0
0060904c : FSUBP ST2,ST0
0060904e : FILD dword ptr [ESP + 0x28]
00609052 : FSUBP ST2,ST0
00609054 : FXCH
00609056 : FSTP float ptr [ESP + 0x38]
0060905a : FLDZ
0060905c : FLD ST0
0060905e : FLD float ptr [ESP + 0x38]
00609062 : FUCOM
00609064 : FNSTSW AX
00609066 : FSTP ST1
00609068 : TEST AH,0x44
0060906b : JP 0x0060907b
0060906d : FSTP ST3
0060906f : FSTP ST1
00609071 : FSTP ST1
00609073 : FLD double ptr [0x00b86090]
00609079 : JMP 0x00609085
0060907b : FXCH ST3
0060907d : FSUBRP ST2,ST0
0060907f : FXCH
00609081 : FDIVRP ST2,ST0
00609083 : FXCH
00609085 : FSTP float ptr [ESP + 0x14]
00609089 : FLD float ptr [ESP + 0x14]
0060908d : FCOM
0060908f : FNSTSW AX
00609091 : FSTP ST1
00609093 : TEST AH,0x41
00609096 : JNZ 0x0060917a
0060909c : FLD1
0060909e : FCOMP
006090a0 : FNSTSW AX
006090a2 : TEST AH,0x41
006090a5 : JNZ 0x0060917a
006090ab : MOV AX,word ptr [EDI]
006090ae : LEA ECX,[ESP + 0x18]
006090b2 : PUSH ECX
006090b3 : LEA EDX,[ESP + 0x20]
006090b7 : PUSH EDX
006090b8 : MOV DX,word ptr [ESI]
006090bb : SUB ESP,0x1c
006090be : FSTP float ptr [ESP + 0x18]
006090c2 : SAR AX,0x1
006090c5 : FILD dword ptr [ESP + 0x4c]
006090c9 : MOVSX ECX,AX
006090cc : MOV dword ptr [ESP + 0x5c],ECX
006090d0 : SAR DX,0x1
006090d3 : FSTP float ptr [ESP + 0x14]
006090d7 : MOVSX EAX,DX
006090da : FILD dword ptr [ESP + 0x5c]
006090de : MOV dword ptr [ESP + 0x5c],EAX
006090e2 : FSTP float ptr [ESP + 0x10]
006090e6 : FSTP float ptr [ESP + 0xc]
006090ea : FILD dword ptr [ESP + 0x5c]
006090ee : FSTP float ptr [ESP + 0x8]
006090f2 : FSTP float ptr [ESP + 0x4]
006090f6 : FLD float ptr [ESP + 0x50]
006090fa : FSTP float ptr [ESP]
006090fd : CALL 0x00553170
00609102 : FLD float ptr [ESP + 0x3c]
00609106 : ADD ESP,0x1c
00609109 : FSTP double ptr [ESP]
0060910c : CALL 0x0063bc90
00609111 : FSTP float ptr [ESP + 0x40]
00609115 : FLD float ptr [ESP + 0x40]
00609119 : FADD double ptr [0x00cdf120]
0060911f : CALL 0x0063b380
00609124 : FLD float ptr [ESP + 0x24]
00609128 : FSTP double ptr [ESP]
0060912b : MOV ESI,EAX
0060912d : CALL 0x0063bc90
00609132 : FSTP float ptr [ESP + 0x40]
00609136 : FLD float ptr [ESP + 0x40]
0060913a : ADD ESP,0x8
0060913d : FADD double ptr [0x00cdf120]
00609143 : CALL 0x0063b380
00609148 : MOV ECX,dword ptr [EBP + 0x8]
0060914b : CMP EAX,dword ptr [ECX]
0060914d : JGE 0x00609151
0060914f : MOV dword ptr [ECX],EAX
00609151 : MOV ECX,dword ptr [EBP + 0xc]
00609154 : CMP ESI,dword ptr [ECX]
00609156 : JGE 0x0060915a
00609158 : MOV dword ptr [ECX],ESI
0060915a : MOV ECX,dword ptr [EBP + 0x10]
0060915d : CMP EAX,dword ptr [ECX]
0060915f : JLE 0x00609163
00609161 : MOV dword ptr [ECX],EAX
00609163 : MOV EAX,dword ptr [EBP + 0x14]
00609166 : CMP ESI,dword ptr [EAX]
00609168 : JLE 0x00609180
0060916a : FLDZ
0060916c : MOV dword ptr [EAX],ESI
0060916e : MOV ECX,dword ptr [EDI]
00609170 : MOV EDI,dword ptr [ESP + 0x3c]
00609174 : MOV dword ptr [ESP + 0x14],ECX
00609178 : JMP 0x00609194
0060917a : FSTP ST0
0060917c : FSTP ST1
0060917e : FSTP ST0
00609180 : MOV ECX,dword ptr [EDI]
00609182 : FLDZ
00609184 : MOV EDI,dword ptr [ESP + 0x3c]
00609188 : MOV dword ptr [ESP + 0x14],ECX
0060918c : JMP 0x00609194
0060918e : MOV EDX,dword ptr [ESI]
00609190 : MOV dword ptr [ESP + 0x14],EDX
00609194 : MOV AX,word ptr [ESP + 0x14]
00609199 : MOVSX ECX,word ptr [ESP + 0x16]
0060919e : MOV EDX,dword ptr [EBP + 0x8]
006091a1 : SAR AX,0x1
006091a4 : CWDE
006091a5 : CMP EAX,dword ptr [EDX]
006091a7 : MOV dword ptr [ESP + 0x20],ECX
006091ab : MOV dword ptr [ESP + 0x2c],EAX
006091af : JGE 0x006091b3
006091b1 : MOV dword ptr [EDX],EAX
006091b3 : MOV EDX,dword ptr [EBP + 0xc]
006091b6 : CMP ECX,dword ptr [EDX]
006091b8 : JGE 0x006091bc
006091ba : MOV dword ptr [EDX],ECX
006091bc : MOV EDX,dword ptr [EBP + 0x10]
006091bf : CMP EAX,dword ptr [EDX]
006091c1 : JLE 0x006091c5
006091c3 : MOV dword ptr [EDX],EAX
006091c5 : MOV EAX,dword ptr [EBP + 0x14]
006091c8 : CMP ECX,dword ptr [EAX]
006091ca : JLE 0x006091ce
006091cc : MOV dword ptr [EAX],ECX
006091ce : MOV EDX,dword ptr [ESP + 0x30]
006091d2 : INC EBX
006091d3 : CMP EBX,dword ptr [EDI + 0x4]
006091d6 : JC 0x00608e78
006091dc : MOV ECX,dword ptr [ESP + 0x34]
006091e0 : INC ECX
006091e1 : MOV dword ptr [ESP + 0x34],ECX
006091e5 : CMP ECX,dword ptr [EDX + 0x28]
006091e8 : JC 0x00608e07
006091ee : FSTP ST0
006091f0 : POP EDI
006091f1 : POP ESI
006091f2 : POP EBX
006091f3 : MOV ESP,EBP
006091f5 : POP EBP
006091f6 : RET 0x10
