PROGRAM  : Maestia.exe
FUNCTION : FUN_0043a880
ENTRY    : 0043a880
BODY     : [[0043a880, 0043a9ea]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0043a8e3) */

void FUN_0043a880(int param_1,undefined4 *param_2,int param_3)

{
  uint uVar1;
  ushort *puVar2;
  undefined4 *puVar3;
  int iVar4;
  ushort *puVar5;
  uint uVar6;
  undefined4 *puVar7;
  bool bVar8;
  uint local_c [2];
  
  puVar3 = *(undefined4 **)(param_1 + 4);
  bVar8 = true;
  if (*(char *)((int)puVar3[1] + 0x2d) == '\0') {
    uVar1 = *(uint *)(param_3 + 0x14);
    local_c[0] = *(uint *)(param_3 + 0x18);
    puVar7 = (undefined4 *)puVar3[1];
    do {
      puVar3 = puVar7;
      if ((uint)puVar3[9] < 8) {
        puVar2 = (ushort *)(puVar3 + 4);
      }
      else {
        puVar2 = (ushort *)puVar3[4];
      }
      uVar6 = puVar3[8];
      if (uVar1 < (uint)puVar3[8]) {
        uVar6 = uVar1;
      }
      if (local_c[0] < 8) {
        puVar5 = (ushort *)(param_3 + 4);
      }
      else {
        puVar5 = *(ushort **)(param_3 + 4);
      }
      for (; uVar6 != 0; uVar6 = uVar6 - 1) {
        if (*puVar5 != *puVar2) {
          uVar6 = (-(uint)(*puVar5 < *puVar2) & 0xfffffffe) + 1;
          if (uVar6 != 0) goto LAB_0043a940;
          break;
        }
        puVar5 = puVar5 + 1;
        puVar2 = puVar2 + 1;
      }
      if (uVar1 < (uint)puVar3[8]) {
        uVar6 = 0xffffffff;
      }
      else {
        uVar6 = (uint)(uVar1 != puVar3[8]);
      }
LAB_0043a940:
      bVar8 = (int)uVar6 < 0;
      if (bVar8) {
        puVar7 = (undefined4 *)*puVar3;
      }
      else {
        puVar7 = (undefined4 *)puVar3[2];
      }
    } while (*(char *)((int)puVar7 + 0x2d) == '\0');
  }
  if (bVar8) {
    if (puVar3 == (undefined4 *)**(int **)(param_1 + 4)) {
      bVar8 = true;
      goto LAB_0043a97e;
    }
    FUN_004d6300();
  }
  if (*(uint *)(param_3 + 0x18) < 8) {
    iVar4 = param_3 + 4;
  }
  else {
    iVar4 = *(int *)(param_3 + 4);
  }
  iVar4 = FUN_00405bb0(iVar4);
  if (-1 < iVar4) {
    *param_2 = puVar3;
    *(undefined1 *)(param_2 + 1) = 0;
    return;
  }
LAB_0043a97e:
  puVar3 = (undefined4 *)FUN_0042faf0(local_c,bVar8,param_3);
  *param_2 = *puVar3;
  *(undefined1 *)(param_2 + 1) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
0043a880 : PUSH EBP
0043a881 : MOV EBP,ESP
0043a883 : AND ESP,0xfffffff8
0043a886 : SUB ESP,0x14
0043a889 : PUSH EBX
0043a88a : MOV EBX,dword ptr [EBP + 0x10]
0043a88d : PUSH ESI
0043a88e : PUSH EDI
0043a88f : MOV EDI,dword ptr [EBP + 0x8]
0043a892 : MOV EAX,dword ptr [EDI + 0x4]
0043a895 : MOV ESI,dword ptr [EAX + 0x4]
0043a898 : CMP byte ptr [ESI + 0x2d],0x0
0043a89c : MOV ECX,EAX
0043a89e : MOV AL,0x1
0043a8a0 : MOV dword ptr [ESP + 0xc],ECX
0043a8a4 : MOV byte ptr [ESP + 0x14],AL
0043a8a8 : JNZ 0x0043a965
0043a8ae : MOV EAX,dword ptr [EBX + 0x14]
0043a8b1 : MOV EDX,dword ptr [EBX + 0x18]
0043a8b4 : MOV ECX,EAX
0043a8b6 : MOV dword ptr [ESP + 0x18],EAX
0043a8ba : MOV dword ptr [ESP + 0x10],ECX
0043a8be : MOV dword ptr [ESP + 0x1c],EDX
0043a8c2 : JMP 0x0043a8c8
0043a8c4 : MOV ECX,dword ptr [ESP + 0x10]
0043a8c8 : CMP dword ptr [ESI + 0x24],0x8
0043a8cc : MOV EDX,dword ptr [ESI + 0x20]
0043a8cf : MOV dword ptr [ESP + 0xc],ESI
0043a8d3 : JC 0x0043a8da
0043a8d5 : MOV EAX,dword ptr [ESI + 0x10]
0043a8d8 : JMP 0x0043a8dd
0043a8da : LEA EAX,[ESI + 0x10]
0043a8dd : MOV EDI,dword ptr [ESP + 0x18]
0043a8e1 : CMP ECX,EDI
0043a8e3 : CMOVC EDI,ECX
0043a8e6 : CMP EDI,EDX
0043a8e8 : JNC 0x0043a8ec
0043a8ea : MOV EDX,EDI
0043a8ec : CMP dword ptr [ESP + 0x1c],0x8
0043a8f1 : JC 0x0043a8f8
0043a8f3 : MOV ECX,dword ptr [EBX + 0x4]
0043a8f6 : JMP 0x0043a8fb
0043a8f8 : LEA ECX,[EBX + 0x4]
0043a8fb : TEST EDX,EDX
0043a8fd : JBE 0x0043a916
0043a8ff : NOP
0043a900 : MOV BX,word ptr [ECX]
0043a903 : CMP BX,word ptr [EAX]
0043a906 : JNZ 0x0043a922
0043a908 : ADD ECX,0x2
0043a90b : ADD EAX,0x2
0043a90e : SUB EDX,0x1
0043a911 : JNZ 0x0043a900
0043a913 : MOV EBX,dword ptr [EBP + 0x10]
0043a916 : MOV EAX,dword ptr [ESI + 0x20]
0043a919 : CMP EDI,EAX
0043a91b : JNC 0x0043a937
0043a91d : OR EAX,0xffffffff
0043a920 : JMP 0x0043a940
0043a922 : MOV CX,BX
0043a925 : CMP CX,word ptr [EAX]
0043a928 : SBB EAX,EAX
0043a92a : AND EAX,0xfffffffe
0043a92d : ADD EAX,0x1
0043a930 : JZ 0x0043a913
0043a932 : MOV EBX,dword ptr [EBP + 0x10]
0043a935 : JMP 0x0043a940
0043a937 : XOR EDX,EDX
0043a939 : CMP EDI,EAX
0043a93b : SETNZ DL
0043a93e : MOV EAX,EDX
0043a940 : TEST EAX,EAX
0043a942 : SETL AL
0043a945 : MOV byte ptr [ESP + 0x14],AL
0043a949 : TEST AL,AL
0043a94b : JZ 0x0043a951
0043a94d : MOV ESI,dword ptr [ESI]
0043a94f : JMP 0x0043a954
0043a951 : MOV ESI,dword ptr [ESI + 0x8]
0043a954 : CMP byte ptr [ESI + 0x2d],0x0
0043a958 : JZ 0x0043a8c4
0043a95e : MOV EDI,dword ptr [EBP + 0x8]
0043a961 : MOV ECX,dword ptr [ESP + 0xc]
0043a965 : MOV ESI,ECX
0043a967 : MOV dword ptr [ESP + 0x10],ESI
0043a96b : TEST AL,AL
0043a96d : JZ 0x0043a9a4
0043a96f : MOV EAX,dword ptr [EDI + 0x4]
0043a972 : CMP ECX,dword ptr [EAX]
0043a974 : JNZ 0x0043a997
0043a976 : PUSH EBX
0043a977 : PUSH 0x1
0043a979 : LEA EDX,[ESP + 0x24]
0043a97d : PUSH EDX
0043a97e : CALL 0x0042faf0
0043a983 : MOV ECX,dword ptr [EAX]
0043a985 : MOV EAX,dword ptr [EBP + 0xc]
0043a988 : MOV dword ptr [EAX],ECX
0043a98a : MOV byte ptr [EAX + 0x4],0x1
0043a98e : POP EDI
0043a98f : POP ESI
0043a990 : POP EBX
0043a991 : MOV ESP,EBP
0043a993 : POP EBP
0043a994 : RET 0xc
0043a997 : LEA EDX,[ESP + 0x10]
0043a99b : CALL 0x004d6300
0043a9a0 : MOV ESI,dword ptr [ESP + 0x10]
0043a9a4 : CMP dword ptr [EBX + 0x18],0x8
0043a9a8 : MOV EDI,dword ptr [EBX + 0x14]
0043a9ab : LEA ECX,[ESI + 0xc]
0043a9ae : JC 0x0043a9b5
0043a9b0 : MOV EAX,dword ptr [EBX + 0x4]
0043a9b3 : JMP 0x0043a9b8
0043a9b5 : LEA EAX,[EBX + 0x4]
0043a9b8 : PUSH EAX
0043a9b9 : MOV EAX,dword ptr [ECX + 0x14]
0043a9bc : CALL 0x00405bb0
0043a9c1 : TEST EAX,EAX
0043a9c3 : JGE 0x0043a9d9
0043a9c5 : MOV EDX,dword ptr [ESP + 0x14]
0043a9c9 : MOV ECX,dword ptr [ESP + 0xc]
0043a9cd : MOV EDI,dword ptr [EBP + 0x8]
0043a9d0 : PUSH EBX
0043a9d1 : PUSH EDX
0043a9d2 : LEA EAX,[ESP + 0x24]
0043a9d6 : PUSH EAX
0043a9d7 : JMP 0x0043a97e
0043a9d9 : MOV EAX,dword ptr [EBP + 0xc]
0043a9dc : POP EDI
0043a9dd : MOV dword ptr [EAX],ESI
0043a9df : POP ESI
0043a9e0 : MOV byte ptr [EAX + 0x4],0x0
0043a9e4 : POP EBX
0043a9e5 : MOV ESP,EBP
0043a9e7 : POP EBP
0043a9e8 : RET 0xc
