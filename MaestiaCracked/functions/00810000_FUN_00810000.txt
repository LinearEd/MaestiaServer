PROGRAM  : Maestia.exe
FUNCTION : FUN_00810000
ENTRY    : 00810000
BODY     : [[00810000, 008104b6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00810000(void)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  undefined4 uVar5;
  int in_ECX;
  undefined1 auStack_94 [4];
  float local_90;
  float local_8c;
  float local_88;
  float local_84;
  float local_7c;
  float local_78;
  float local_74;
  float local_70;
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_58;
  undefined1 auStack_38 [28];
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int iStack_c;
  
  iStack_c = 0xffffffff;
  puStack_10 = &LAB_00b6843d;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_94;
  ExceptionList = &local_14;
  piVar1 = *(int **)(in_ECX + 0x38);
  if ((piVar1 == (int *)0x0) || (piVar1[0x62d] == 0)) {
    FUN_008018d0(L"m_pBeautyShopCharacter Is NULL ",DAT_00d66fa0 ^ (uint)&stack0xffffff60);
  }
  else {
    *(undefined1 *)(in_ECX + 0xe0) = 1;
    if (*(int *)(in_ECX + 0xac) == 0) {
      if ((*(int *)(in_ECX + 0xb4) == 0) && (*(int *)(in_ECX + 0xc0) == 0)) {
        (**(code **)(*piVar1 + 0x244))();
        FUN_004044c0();
        FUN_00404490();
        FUN_00404470();
        iVar2 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
        if (iVar2 != 0) {
          *(undefined4 *)(iVar2 + 0x30) = *(undefined4 *)(in_ECX + 0x8c);
        }
        FUN_0080d360(in_ECX);
        FUN_0080d160(in_ECX);
        FUN_00406460(L"BeautyShopChar");
        iStack_c = 0;
        uStack_60 = 0x3f800000;
        uStack_5c = 0x3f800000;
        uStack_58 = 0x3f800000;
        local_7c = 0.0;
        local_78 = 0.0;
        local_74 = 0.0;
        local_70 = 1.0;
        local_90 = 0.0;
        local_8c = 0.0;
        local_88 = 0.0;
        uVar5 = (**(code **)(**(int **)(*(int *)(DAT_00da93ec + 8) + 0x24) + 0x20))
                          (auStack_38,&local_90,&local_7c,&uStack_60);
        (**(code **)(**(int **)(in_ECX + 0x38) + 0x1ec))(uVar5);
        (**(code **)(**(int **)(in_ECX + 0x38) + 0x1e8))(0);
        (**(code **)(**(int **)(in_ECX + 0x38) + 600))
                  (*(undefined1 *)((int)*(int **)(in_ECX + 0x38) + 0x3ad));
        (**(code **)(**(int **)(in_ECX + 0x38) + 0x2a0))(in_ECX + 0x60,1);
        FUN_0085f980(*(undefined4 *)(in_ECX + 0x6c),*(undefined4 *)(in_ECX + 0x70));
        *(undefined1 *)(*(int *)(in_ECX + 0x38) + 0x198d) = 0;
        FUN_00854ed0(*(undefined4 *)(in_ECX + 0x38),0);
        if (*(int *)(DAT_00da93ec + 0x41c) != 0) {
          FUN_00878950();
        }
        iVar2 = *DAT_00da9894;
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
          (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                    (*(int **)(iVar2 + 0x114),"mc_beautyshop.SetStature",&DAT_00c2dd20,
                     *(undefined4 *)(in_ECX + 0x90));
        }
        iVar2 = *DAT_00da9894;
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
          (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                    (*(int **)(iVar2 + 0x114),"mc_beautyshop.SetForm",&DAT_00c2dd40,
                     *(undefined4 *)(in_ECX + 0x94));
        }
        piVar1 = *(int **)(*(int *)(in_ECX + 0x38) + 1000);
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 0x9c))(8);
          iVar2 = *(int *)(in_ECX + 0x38);
          *(undefined1 *)(iVar2 + 0x1528) = 1;
          if (*(int *)(iVar2 + 1000) != 0) {
            FUN_00887900();
          }
        }
        iVar2 = *(int *)(*(int *)(in_ECX + 0x38) + 1000);
        local_90 = *(float *)(iVar2 + 0x68);
        local_88 = *(float *)(iVar2 + 0x70);
        local_8c = 0.0;
        FUN_00406460(L"ID_EF_SELECT_FX");
        iStack_c._0_1_ = 1;
        uVar5 = FUN_0081cfe0(DAT_0172491c,&local_7c);
        iStack_c._0_1_ = 2;
        FUN_00898150(uVar5,&local_90);
        iStack_c._0_1_ = 1;
        FUN_00406560();
        iStack_c = (uint)iStack_c._1_3_ << 8;
        FUN_00406560();
        iStack_c = 0xffffffff;
        FUN_00406560();
        *(undefined1 *)(in_ECX + 0xe0) = 0;
      }
      else {
        FUN_00404470();
        iVar2 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
        if (iVar2 != 0) {
          *(undefined4 *)(iVar2 + 0x30) = *(undefined4 *)(in_ECX + 0x8c);
        }
        iVar2 = *(int *)(*(int *)(in_ECX + 0x38) + 0x18b4);
        if (*(int *)(iVar2 + 4) != 0) {
          if ((10 < *(uint *)(iVar2 + 0x24)) || (10 < *(uint *)(iVar2 + 0x28))) {
            FUN_008018d0(L"[AvaCustomize::ApplyCustomize] Invalid Player Customize Index");
          }
          FUN_0087eeb0();
        }
        piVar1 = *(int **)(*(int *)(in_ECX + 0x38) + 0x18b4);
        if (*piVar1 != 0) {
          uVar3 = piVar1[0xc];
          local_7c = (float)(uVar3 >> 0x10 & 0xff) * 0.003921569;
          local_78 = (float)(uVar3 >> 8 & 0xff) * 0.003921569;
          local_74 = (float)(uVar3 & 0xff) * 0.003921569;
          uVar4 = piVar1[0xb];
          local_70 = (float)(uVar3 >> 0x18) * 0.003921569;
          local_90 = (float)(uVar4 >> 0x10 & 0xff) * 0.003921569;
          local_8c = (float)(uVar4 >> 8 & 0xff) * 0.003921569;
          local_88 = (float)(uVar4 & 0xff) * 0.003921569;
          local_84 = (float)(uVar4 >> 0x18) * 0.003921569;
          FUN_007d3190();
        }
        *(undefined4 *)(in_ECX + 0xb4) = 0;
        *(undefined4 *)(in_ECX + 0xc0) = 0;
        *(undefined1 *)(in_ECX + 0xe0) = 0;
      }
    }
    else {
      FUN_0080ee70();
      *(undefined4 *)(in_ECX + 0xac) = 0;
      *(undefined1 *)(in_ECX + 0xe0) = 0;
    }
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_94);
  return;
}



============================================================
DISASSEMBLY
============================================================
00810000 : PUSH EBP
00810001 : MOV EBP,ESP
00810003 : AND ESP,0xfffffff8
00810006 : PUSH -0x1
00810008 : PUSH 0xb6843d
0081000d : MOV EAX,FS:[0x0]
00810013 : PUSH EAX
00810014 : SUB ESP,0x80
0081001a : MOV EAX,[0x00d66fa0]
0081001f : XOR EAX,ESP
00810021 : MOV dword ptr [ESP + 0x78],EAX
00810025 : PUSH EBX
00810026 : PUSH ESI
00810027 : PUSH EDI
00810028 : MOV EAX,[0x00d66fa0]
0081002d : XOR EAX,ESP
0081002f : PUSH EAX
00810030 : LEA EAX,[ESP + 0x90]
00810037 : MOV FS:[0x0],EAX
0081003d : MOV EDI,ECX
0081003f : MOV EAX,dword ptr [EDI + 0x38]
00810042 : XOR ESI,ESI
00810044 : CMP EAX,ESI
00810046 : JZ 0x00810483
0081004c : CMP dword ptr [EAX + 0x18b4],ESI
00810052 : JZ 0x00810483
00810058 : MOV EBX,0x1
0081005d : MOV byte ptr [EDI + 0xe0],BL
00810063 : CMP dword ptr [EDI + 0xac],ESI
00810069 : JZ 0x00810082
0081006b : CALL 0x0080ee70
00810070 : MOV dword ptr [EDI + 0xac],ESI
00810076 : MOV byte ptr [EDI + 0xe0],0x0
0081007d : JMP 0x00810496
00810082 : CMP dword ptr [EDI + 0xb4],ESI
00810088 : JNZ 0x00810346
0081008e : CMP dword ptr [EDI + 0xc0],ESI
00810094 : JNZ 0x00810346
0081009a : MOV EDX,dword ptr [EAX]
0081009c : MOV ECX,EAX
0081009e : MOV EAX,dword ptr [EDX + 0x244]
008100a4 : CALL EAX
008100a6 : MOV EAX,dword ptr [EDI + 0x90]
008100ac : MOV ECX,dword ptr [EDI + 0x38]
008100af : CALL 0x004044c0
008100b4 : MOV EAX,dword ptr [EDI + 0x94]
008100ba : MOV ECX,dword ptr [EDI + 0x38]
008100bd : CALL 0x00404490
008100c2 : MOV EDX,dword ptr [EDI + 0x88]
008100c8 : MOV EAX,dword ptr [EDI + 0x38]
008100cb : CALL 0x00404470
008100d0 : MOV EAX,dword ptr [EDI + 0x38]
008100d3 : MOV EAX,dword ptr [EAX + 0x18b4]
008100d9 : MOV ECX,dword ptr [EDI + 0x8c]
008100df : CMP EAX,ESI
008100e1 : JZ 0x008100e6
008100e3 : MOV dword ptr [EAX + 0x30],ECX
008100e6 : PUSH EDI
008100e7 : CALL 0x0080d360
008100ec : PUSH EDI
008100ed : CALL 0x0080d160
008100f2 : PUSH 0xc2dd00
008100f7 : LEA ECX,[ESP + 0x70]
008100fb : CALL 0x00406460
00810100 : MOV dword ptr [ESP + 0x98],ESI
00810107 : XORPS XMM0,XMM0
0081010a : MOVSS XMM1,dword ptr [0x00c10fc4]
00810112 : MOV ECX,dword ptr [0x00da93ec]
00810118 : MOV EAX,dword ptr [ECX + 0x8]
0081011b : MOVSS dword ptr [ESP + 0x44],XMM1
00810121 : MOVSS dword ptr [ESP + 0x48],XMM1
00810127 : MOVSS dword ptr [ESP + 0x4c],XMM1
0081012d : MOVSS dword ptr [ESP + 0x28],XMM0
00810133 : MOVSS dword ptr [ESP + 0x2c],XMM0
00810139 : MOVSS dword ptr [ESP + 0x30],XMM0
0081013f : MOVSS dword ptr [ESP + 0x34],XMM1
00810145 : MOVSS dword ptr [ESP + 0x14],XMM0
0081014b : MOVSS dword ptr [ESP + 0x18],XMM0
00810151 : MOVSS dword ptr [ESP + 0x1c],XMM0
00810157 : MOV ECX,dword ptr [EAX + 0x24]
0081015a : MOV EDX,dword ptr [ECX]
0081015c : MOV EDX,dword ptr [EDX + 0x20]
0081015f : LEA EAX,[ESP + 0x44]
00810163 : PUSH EAX
00810164 : LEA EAX,[ESP + 0x2c]
00810168 : PUSH EAX
00810169 : LEA EAX,[ESP + 0x1c]
0081016d : PUSH EAX
0081016e : LEA EAX,[ESP + 0x78]
00810172 : PUSH EAX
00810173 : CALL EDX
00810175 : MOV ECX,dword ptr [EDI + 0x38]
00810178 : MOV EDX,dword ptr [ECX]
0081017a : PUSH EAX
0081017b : MOV EAX,dword ptr [EDX + 0x1ec]
00810181 : CALL EAX
00810183 : MOV ECX,dword ptr [EDI + 0x38]
00810186 : MOV EDX,dword ptr [ECX]
00810188 : MOV EAX,dword ptr [EDX + 0x1e8]
0081018e : PUSH ESI
0081018f : CALL EAX
00810191 : MOV ECX,dword ptr [EDI + 0x38]
00810194 : MOV DL,byte ptr [ECX + 0x3ad]
0081019a : MOV EAX,dword ptr [ECX]
0081019c : MOV EAX,dword ptr [EAX + 0x258]
008101a2 : MOV byte ptr [ESP + 0x24],DL
008101a6 : MOV EDX,dword ptr [ESP + 0x24]
008101aa : PUSH EDX
008101ab : CALL EAX
008101ad : MOV ECX,dword ptr [EDI + 0x38]
008101b0 : MOV EDX,dword ptr [ECX]
008101b2 : MOV EDX,dword ptr [EDX + 0x2a0]
008101b8 : PUSH EBX
008101b9 : LEA EAX,[EDI + 0x60]
008101bc : PUSH EAX
008101bd : CALL EDX
008101bf : FLD float ptr [EDI + 0x6c]
008101c2 : FLD float ptr [EDI + 0x70]
008101c5 : MOV ECX,dword ptr [EDI + 0x38]
008101c8 : SUB ESP,0x8
008101cb : FSTP float ptr [ESP + 0x4]
008101cf : FSTP float ptr [ESP]
008101d2 : CALL 0x0085f980
008101d7 : MOV EAX,dword ptr [EDI + 0x38]
008101da : MOV byte ptr [EAX + 0x198d],0x0
008101e1 : MOV EAX,dword ptr [EDI + 0x38]
008101e4 : PUSH ESI
008101e5 : PUSH EAX
008101e6 : CALL 0x00854ed0
008101eb : MOV ECX,dword ptr [0x00da93ec]
008101f1 : MOV EDX,dword ptr [ECX + 0x41c]
008101f7 : CMP EDX,ESI
008101f9 : JZ 0x00810200
008101fb : CALL 0x00878950
00810200 : MOV EDX,dword ptr [0x00da9894]
00810206 : MOV EAX,dword ptr [EDX]
00810208 : CMP EAX,ESI
0081020a : JZ 0x00810236
0081020c : CMP dword ptr [EAX + 0x114],ESI
00810212 : JZ 0x00810236
00810214 : MOV EDX,dword ptr [EDI + 0x90]
0081021a : MOV EAX,dword ptr [EAX + 0x114]
00810220 : MOV ECX,dword ptr [EAX]
00810222 : PUSH EDX
00810223 : PUSH 0xc2dd20
00810228 : PUSH 0xc2dd24
0081022d : PUSH EAX
0081022e : MOV EAX,dword ptr [ECX + 0x4]
00810231 : CALL EAX
00810233 : ADD ESP,0x10
00810236 : MOV ECX,dword ptr [0x00da9894]
0081023c : MOV EAX,dword ptr [ECX]
0081023e : CMP EAX,ESI
00810240 : JZ 0x0081026c
00810242 : CMP dword ptr [EAX + 0x114],ESI
00810248 : JZ 0x0081026c
0081024a : MOV ECX,dword ptr [EDI + 0x94]
00810250 : MOV EAX,dword ptr [EAX + 0x114]
00810256 : MOV EDX,dword ptr [EAX]
00810258 : MOV EDX,dword ptr [EDX + 0x4]
0081025b : PUSH ECX
0081025c : PUSH 0xc2dd40
00810261 : PUSH 0xc2dd44
00810266 : PUSH EAX
00810267 : CALL EDX
00810269 : ADD ESP,0x10
0081026c : MOV EAX,dword ptr [EDI + 0x38]
0081026f : MOV ECX,dword ptr [EAX + 0x3e8]
00810275 : CMP ECX,ESI
00810277 : JZ 0x0081029b
00810279 : MOV EDX,dword ptr [ECX]
0081027b : MOV EAX,dword ptr [EDX + 0x9c]
00810281 : PUSH 0x8
00810283 : CALL EAX
00810285 : MOV EAX,dword ptr [EDI + 0x38]
00810288 : MOV byte ptr [EAX + 0x1528],BL
0081028e : CMP dword ptr [EAX + 0x3e8],ESI
00810294 : JZ 0x0081029b
00810296 : CALL 0x00887900
0081029b : MOV ECX,dword ptr [EDI + 0x38]
0081029e : MOV EAX,dword ptr [ECX + 0x3e8]
008102a4 : MOVSS XMM0,dword ptr [EAX + 0x68]
008102a9 : MOVSS XMM1,dword ptr [EAX + 0x70]
008102ae : ADD EAX,0x68
008102b1 : MOVSS dword ptr [ESP + 0x14],XMM0
008102b7 : XORPS XMM0,XMM0
008102ba : PUSH 0xc2dd5c
008102bf : LEA ECX,[ESP + 0x2c]
008102c3 : MOVSS dword ptr [ESP + 0x20],XMM1
008102c9 : MOVSS dword ptr [ESP + 0x1c],XMM0
008102cf : CALL 0x00406460
008102d4 : MOV byte ptr [ESP + 0x98],BL
008102db : MOV EAX,[0x0172491c]
008102e0 : LEA EDX,[ESP + 0x28]
008102e4 : PUSH EDX
008102e5 : PUSH EAX
008102e6 : LEA ESI,[ESP + 0x58]
008102ea : CALL 0x0081cfe0
008102ef : MOV byte ptr [ESP + 0x98],0x2
008102f7 : MOV ESI,dword ptr [EDI + 0x38]
008102fa : LEA ECX,[ESP + 0x14]
008102fe : PUSH ECX
008102ff : PUSH EAX
00810300 : CALL 0x00898150
00810305 : MOV byte ptr [ESP + 0x98],BL
0081030c : LEA ECX,[ESP + 0x50]
00810310 : CALL 0x00406560
00810315 : MOV byte ptr [ESP + 0x98],0x0
0081031d : LEA ECX,[ESP + 0x28]
00810321 : CALL 0x00406560
00810326 : MOV dword ptr [ESP + 0x98],0xffffffff
00810331 : LEA ECX,[ESP + 0x6c]
00810335 : CALL 0x00406560
0081033a : MOV byte ptr [EDI + 0xe0],0x0
00810341 : JMP 0x00810496
00810346 : MOV EDX,dword ptr [EDI + 0x88]
0081034c : CALL 0x00404470
00810351 : MOV EAX,dword ptr [EDI + 0x38]
00810354 : MOV EAX,dword ptr [EAX + 0x18b4]
0081035a : CMP EAX,ESI
0081035c : JZ 0x00810367
0081035e : MOV EDX,dword ptr [EDI + 0x8c]
00810364 : MOV dword ptr [EAX + 0x30],EDX
00810367 : MOV EAX,dword ptr [EDI + 0x38]
0081036a : MOV EBX,dword ptr [EAX + 0x18b4]
00810370 : CMP dword ptr [EBX + 0x4],ESI
00810373 : JZ 0x008103a0
00810375 : MOV EAX,0xb
0081037a : CMP dword ptr [EBX + 0x24],EAX
0081037d : JNC 0x00810384
0081037f : CMP dword ptr [EBX + 0x28],EAX
00810382 : JC 0x00810397
00810384 : MOV ESI,dword ptr [0x00da98e8]
0081038a : PUSH 0xc44508
0081038f : CALL 0x008018d0
00810394 : ADD ESP,0x4
00810397 : MOV ESI,EBX
00810399 : CALL 0x0087eeb0
0081039e : XOR ESI,ESI
008103a0 : MOV EAX,dword ptr [EDI + 0x38]
008103a3 : MOV ECX,dword ptr [EAX + 0x18b4]
008103a9 : CMP dword ptr [ECX],ESI
008103ab : JZ 0x0081046e
008103b1 : MOVSS XMM0,dword ptr [0x00cdf178]
008103b9 : MOV ESI,ECX
008103bb : MOV EAX,dword ptr [ESI + 0x30]
008103be : MOV EDX,EAX
008103c0 : SHR EDX,0x10
008103c3 : MOVZX ECX,DL
008103c6 : CVTSI2SS XMM1,ECX
008103ca : MULSS XMM1,XMM0
008103ce : MOVSS dword ptr [ESP + 0x28],XMM1
008103d4 : MOV EDX,EAX
008103d6 : SHR EDX,0x8
008103d9 : MOVZX ECX,DL
008103dc : CVTSI2SS XMM1,ECX
008103e0 : MULSS XMM1,XMM0
008103e4 : MOVSS dword ptr [ESP + 0x2c],XMM1
008103ea : MOVZX EDX,AL
008103ed : CVTSI2SS XMM1,EDX
008103f1 : MULSS XMM1,XMM0
008103f5 : MOVSS dword ptr [ESP + 0x30],XMM1
008103fb : SHR EAX,0x18
008103fe : CVTSI2SS XMM1,EAX
00810402 : MOV EAX,dword ptr [ESI + 0x2c]
00810405 : MOV ESI,dword ptr [ESI]
00810407 : MULSS XMM1,XMM0
0081040b : MOV ECX,EAX
0081040d : SHR ECX,0x10
00810410 : MOVSS dword ptr [ESP + 0x34],XMM1
00810416 : MOVZX EDX,CL
00810419 : MOV ECX,EAX
0081041b : CVTSI2SS XMM1,EDX
0081041f : MULSS XMM1,XMM0
00810423 : SHR ECX,0x8
00810426 : MOVSS dword ptr [ESP + 0x14],XMM1
0081042c : MOVZX EDX,CL
0081042f : MOVZX ECX,AL
00810432 : CVTSI2SS XMM1,EDX
00810436 : MULSS XMM1,XMM0
0081043a : MOVSS dword ptr [ESP + 0x18],XMM1
00810440 : CVTSI2SS XMM1,ECX
00810444 : MULSS XMM1,XMM0
00810448 : MOVSS dword ptr [ESP + 0x1c],XMM1
0081044e : SHR EAX,0x18
00810451 : CVTSI2SS XMM1,EAX
00810455 : MULSS XMM1,XMM0
00810459 : LEA ECX,[ESP + 0x28]
0081045d : LEA EDX,[ESP + 0x14]
00810461 : MOVSS dword ptr [ESP + 0x20],XMM1
00810467 : CALL 0x007d3190
0081046c : XOR ESI,ESI
0081046e : MOV dword ptr [EDI + 0xb4],ESI
00810474 : MOV dword ptr [EDI + 0xc0],ESI
0081047a : MOV byte ptr [EDI + 0xe0],0x0
00810481 : JMP 0x00810496
00810483 : MOV ESI,dword ptr [0x00da98e8]
00810489 : PUSH 0xc2dcc0
0081048e : CALL 0x008018d0
00810493 : ADD ESP,0x4
00810496 : MOV ECX,dword ptr [ESP + 0x90]
0081049d : MOV dword ptr FS:[0x0],ECX
008104a4 : POP ECX
008104a5 : POP EDI
008104a6 : POP ESI
008104a7 : POP EBX
008104a8 : MOV ECX,dword ptr [ESP + 0x78]
008104ac : XOR ECX,ESP
008104ae : CALL 0x00633e6b
008104b3 : MOV ESP,EBP
008104b5 : POP EBP
008104b6 : RET
