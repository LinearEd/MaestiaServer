PROGRAM  : Maestia.exe
FUNCTION : FUN_00878950
ENTRY    : 00878950
BODY     : [[00878950, 00878b90]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00878950(void)

{
  int iVar1;
  int iVar2;
  float *pfVar3;
  int *piVar4;
  int in_EDX;
  int iVar5;
  undefined1 auStack_88 [8];
  undefined4 uStack_80;
  float *pfStack_7c;
  undefined4 uStack_78;
  float *pfStack_74;
  float *pfStack_70;
  uint uStack_6c;
  float local_58;
  float local_54;
  float local_50;
  float local_4c;
  float local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30;
  float local_2c;
  float local_28 [3];
  float local_1c;
  float local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1bf69;
  local_10 = ExceptionList;
  uStack_6c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  iVar1 = *DAT_00da9894;
  iVar5 = 0;
  if (*(int *)(iVar1 + 0x288) != 0) {
    iVar5 = *(int *)(*(int *)(iVar1 + 0x288) + 0x38);
  }
  if (*(int *)(DAT_00da93ec + 0x74) == 0) {
    return;
  }
  if (iVar5 == 0) {
    return;
  }
  iVar2 = *(int *)(iVar5 + 1000);
  local_40 = *(float *)(iVar2 + 0x68);
  local_38 = *(float *)(iVar2 + 0x70);
  local_44 = *(float *)(in_EDX + 0x84);
  local_48 = *(float *)(iVar2 + 0x6c) + *(float *)(*(int *)(iVar1 + 0x288) + 0xd4);
  local_4c = *(float *)(in_EDX + 0x7c);
  pfStack_70 = &local_58;
  pfStack_74 = (float *)0x878a1e;
  ExceptionList = &local_10;
  local_3c = local_48;
  local_1c = local_44;
  local_18 = local_4c;
  pfVar3 = (float *)FUN_0087dca0();
  local_34 = *pfVar3;
  local_30 = pfVar3[1];
  local_2c = pfVar3[2];
  if (*(int *)(iVar5 + 1000) != 0) {
    local_14 = auStack_88;
    FUN_00406460(L"Bip01 Head");
    local_8 = 0xffffffff;
    piVar4 = (int *)FUN_00a664c0();
    if (piVar4 != (int *)0x0) {
      if (*(char *)((int)piVar4 + 0x5d) != '\0') {
        pfStack_70 = (float *)0x878a85;
        (**(code **)(*piVar4 + 0x14))();
      }
      local_14 = (undefined1 *)
                 ((*(float *)(*(int *)(iVar5 + 0x18b4) + 0x18) * 0.7 + (float)piVar4[0x2f]) -
                 *(float *)(*(int *)(iVar5 + 1000) + 0x6c));
      if ((float)local_14 != 0.0) goto LAB_00878ad2;
    }
  }
  local_14 = (undefined1 *)(*(float *)(*(int *)(iVar5 + 0x18b4) + 0x18) + local_30);
LAB_00878ad2:
  local_28[2] = local_38 - local_1c;
  pfStack_74 = local_28;
  local_28[0] = local_40 - local_18;
  local_28[1] = 0.0;
  uStack_78 = 0x878b09;
  pfStack_70 = pfStack_74;
  local_30 = (float)local_14;
  D3DXVec3Normalize();
  local_28[1] = 0.0;
  local_58 = local_34 - local_28[0] * DAT_00d72c20;
  uStack_78 = 0;
  pfStack_7c = &local_4c;
  local_50 = local_2c - local_28[2] * DAT_00d72c20;
  local_54 = (float)local_14;
  uStack_80 = 0x878b65;
  FUN_007f1b30();
  uStack_78 = 0x878b7f;
  FUN_007f2070();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00878950 : PUSH EBP
00878951 : MOV EBP,ESP
00878953 : PUSH -0x1
00878955 : PUSH 0xb1bf69
0087895a : MOV EAX,FS:[0x0]
00878960 : PUSH EAX
00878961 : SUB ESP,0x4c
00878964 : PUSH EBX
00878965 : PUSH ESI
00878966 : PUSH EDI
00878967 : MOV EAX,[0x00d66fa0]
0087896c : XOR EAX,EBP
0087896e : PUSH EAX
0087896f : LEA EAX,[EBP + -0xc]
00878972 : MOV FS:[0x0],EAX
00878978 : MOV ECX,dword ptr [0x00da9894]
0087897e : MOV ECX,dword ptr [ECX]
00878980 : MOV EAX,[0x00da93ec]
00878985 : MOV ESI,dword ptr [EAX + 0x74]
00878988 : XOR EBX,EBX
0087898a : CMP dword ptr [ECX + 0x288],EBX
00878990 : JZ 0x0087899b
00878992 : MOV EAX,dword ptr [ECX + 0x288]
00878998 : MOV EBX,dword ptr [EAX + 0x38]
0087899b : TEST ESI,ESI
0087899d : JZ 0x00878b7f
008789a3 : TEST EBX,EBX
008789a5 : JZ 0x00878b7f
008789ab : MOV EAX,dword ptr [EBX + 0x3e8]
008789b1 : MOVSS XMM0,dword ptr [EAX + 0x68]
008789b6 : MOVSS XMM1,dword ptr [EAX + 0x70]
008789bb : MOV ECX,dword ptr [ECX + 0x288]
008789c1 : MOVSS XMM2,dword ptr [EDX + 0x84]
008789c9 : ADD EAX,0x68
008789cc : MOVSS dword ptr [EBP + -0x3c],XMM0
008789d1 : MOVSS XMM0,dword ptr [EAX + 0x4]
008789d6 : MOV EAX,dword ptr [EBX + 0x18b4]
008789dc : MOVSS dword ptr [EBP + -0x34],XMM1
008789e1 : MOVSS XMM1,dword ptr [ECX + 0xd4]
008789e9 : ADDSS XMM0,XMM1
008789ed : MOVSS XMM1,dword ptr [EDX + 0x7c]
008789f2 : LEA EDX,[EBP + -0x54]
008789f5 : PUSH EDX
008789f6 : MOV ECX,0x7
008789fb : MOVSS dword ptr [EBP + -0x38],XMM0
00878a00 : MOVSS dword ptr [EBP + -0x14],XMM1
00878a05 : MOVSS dword ptr [EBP + -0x18],XMM2
00878a0a : MOVSS dword ptr [EBP + -0x48],XMM1
00878a0f : MOVSS dword ptr [EBP + -0x44],XMM0
00878a14 : MOVSS dword ptr [EBP + -0x40],XMM2
00878a19 : CALL 0x0087dca0
00878a1e : MOVSS XMM0,dword ptr [EAX]
00878a22 : MOV EDI,dword ptr [EBX + 0x3e8]
00878a28 : MOVSS dword ptr [EBP + -0x30],XMM0
00878a2d : MOVSS XMM0,dword ptr [EAX + 0x4]
00878a32 : MOVSS dword ptr [EBP + -0x2c],XMM0
00878a37 : MOVSS XMM0,dword ptr [EAX + 0x8]
00878a3c : MOVSS dword ptr [EBP + -0x28],XMM0
00878a41 : TEST EDI,EDI
00878a43 : JZ 0x00878abd
00878a45 : SUB ESP,0x1c
00878a48 : MOV ECX,ESP
00878a4a : MOV dword ptr [EBP + -0x10],ESP
00878a4d : PUSH 0xc43afc
00878a52 : CALL 0x00406460
00878a57 : MOV dword ptr [EBP + -0x4],0x0
00878a5e : MOV EDI,dword ptr [EDI + 0x288]
00878a64 : MOV dword ptr [EBP + -0x4],0xffffffff
00878a6b : CALL 0x00a664c0
00878a70 : MOV EDI,EAX
00878a72 : TEST EDI,EDI
00878a74 : JZ 0x00878abd
00878a76 : CMP byte ptr [EDI + 0x5d],0x0
00878a7a : JZ 0x00878a85
00878a7c : MOV EAX,dword ptr [EDI]
00878a7e : MOV EDX,dword ptr [EAX + 0x14]
00878a81 : MOV ECX,EDI
00878a83 : CALL EDX
00878a85 : MOV EAX,dword ptr [EBX + 0x18b4]
00878a8b : MOVSS XMM0,dword ptr [EAX + 0x18]
00878a90 : MULSS XMM0,dword ptr [0x00cdf190]
00878a98 : MOV ECX,dword ptr [EBX + 0x3e8]
00878a9e : ADDSS XMM0,dword ptr [EDI + 0xbc]
00878aa6 : SUBSS XMM0,dword ptr [ECX + 0x6c]
00878aab : UCOMISS XMM0,dword ptr [0x00b9b0b4]
00878ab2 : LAHF
00878ab3 : MOVSS dword ptr [EBP + -0x10],XMM0
00878ab8 : TEST AH,0x44
00878abb : JP 0x00878ad2
00878abd : MOV EDX,dword ptr [EBX + 0x18b4]
00878ac3 : MOVSS XMM0,dword ptr [EDX + 0x18]
00878ac8 : ADDSS XMM0,dword ptr [EBP + -0x2c]
00878acd : MOVSS dword ptr [EBP + -0x10],XMM0
00878ad2 : MOVSS XMM1,dword ptr [EBP + -0x34]
00878ad7 : XORPS XMM2,XMM2
00878ada : SUBSS XMM1,dword ptr [EBP + -0x18]
00878adf : LEA EAX,[EBP + -0x24]
00878ae2 : MOVSS dword ptr [EBP + -0x2c],XMM0
00878ae7 : MOVSS XMM0,dword ptr [EBP + -0x3c]
00878aec : SUBSS XMM0,dword ptr [EBP + -0x14]
00878af1 : PUSH EAX
00878af2 : MOV ECX,EAX
00878af4 : PUSH ECX
00878af5 : MOVSS dword ptr [EBP + -0x24],XMM0
00878afa : MOVSS dword ptr [EBP + -0x20],XMM2
00878aff : MOVSS dword ptr [EBP + -0x1c],XMM1
00878b04 : CALL 0x004ff722
00878b09 : XORPS XMM0,XMM0
00878b0c : MOVSS XMM2,dword ptr [0x00d72c20]
00878b14 : MOVSS XMM1,dword ptr [EBP + -0x1c]
00878b19 : MOVSS XMM3,dword ptr [EBP + -0x10]
00878b1e : MOVSS dword ptr [EBP + -0x20],XMM0
00878b23 : MOVSS XMM0,dword ptr [EBP + -0x24]
00878b28 : MULSS XMM0,XMM2
00878b2c : MULSS XMM1,XMM2
00878b30 : MOVSS XMM2,dword ptr [EBP + -0x30]
00878b35 : SUBSS XMM2,XMM0
00878b39 : MOVSS XMM0,dword ptr [EBP + -0x28]
00878b3e : PUSH 0x0
00878b40 : LEA EDX,[EBP + -0x48]
00878b43 : SUBSS XMM0,XMM1
00878b47 : PUSH EDX
00878b48 : LEA EAX,[EBP + -0x30]
00878b4b : LEA ECX,[EBP + -0x54]
00878b4e : LEA EDI,[EBP + -0x3c]
00878b51 : MOVSS dword ptr [EBP + -0x54],XMM2
00878b56 : MOVSS dword ptr [EBP + -0x50],XMM3
00878b5b : MOVSS dword ptr [EBP + -0x4c],XMM0
00878b60 : CALL 0x007f1b30
00878b65 : MOV EAX,[0x00da9894]
00878b6a : MOV ECX,dword ptr [EAX]
00878b6c : MOV EDX,dword ptr [ECX + 0x288]
00878b72 : MOVSS XMM0,dword ptr [EDX + 0xd0]
00878b7a : CALL 0x007f2070
00878b7f : MOV ECX,dword ptr [EBP + -0xc]
00878b82 : MOV dword ptr FS:[0x0],ECX
00878b89 : POP ECX
00878b8a : POP EDI
00878b8b : POP ESI
00878b8c : POP EBX
00878b8d : MOV ESP,EBP
00878b8f : POP EBP
00878b90 : RET
