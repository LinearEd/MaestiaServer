PROGRAM  : Maestia.exe
FUNCTION : FUN_00992590
ENTRY    : 00992590
BODY     : [[00992590, 00992974]]

============================================================
DECOMPILED C CODE
============================================================

char * FUN_00992590(undefined4 param_1,uint param_2,char *param_3)

{
  char cVar1;
  undefined4 *puVar2;
  undefined4 **ppuVar3;
  int iVar4;
  char *pcVar5;
  undefined4 *puVar6;
  undefined4 *local_44;
  undefined4 *local_40;
  char *local_3c;
  undefined1 local_38 [36];
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  puStack_10 = &LAB_00b20f7b;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if ((DAT_01726808 & 1) == 0) {
    DAT_01726808 = DAT_01726808 | 1;
    local_c = 0;
    FUN_00421730(DAT_00d66fa0 ^ (uint)&stack0xffffffb0);
    _atexit((_func_4879 *)&LAB_00b84030);
  }
  local_c = 0xffffffff;
  if (DAT_017256e0 == 0) {
    local_40 = (undefined4 *)0x0;
    local_3c = "equip";
    FUN_004220f0(local_38,&local_40);
    local_c = 1;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x11;
    local_3c = "Offering";
    FUN_004220f0(local_38,&local_40);
    local_c = 2;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x40;
    local_3c = "storage_small";
    FUN_004220f0(local_38,&local_40);
    local_c = 3;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x41;
    local_3c = "storage_medium";
    FUN_004220f0(local_38,&local_40);
    local_c = 4;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x42;
    local_3c = "storage_large";
    FUN_004220f0(local_38,&local_40);
    local_c = 5;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x94;
    local_3c = "storage_Premium";
    FUN_004220f0(local_38,&local_40);
    local_c = 6;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x30;
    local_3c = "trade";
    FUN_004220f0(local_38,&local_40);
    local_c = 7;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x43;
    local_3c = "container";
    FUN_004220f0(local_38,&local_40);
    local_c = 8;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0xffffffff;
    local_3c = "none";
    FUN_004220f0(local_38,&local_40);
    local_c = 9;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
    local_40 = (undefined4 *)0x17;
    local_3c = "unidentified";
    FUN_004220f0(local_38,&local_40);
    local_c = 10;
    FUN_004217e0(local_38);
    local_c = 0xffffffff;
    FUN_004216d0(local_38);
  }
  cVar1 = *(char *)((int)DAT_017256dc[1] + 0x2d);
  puVar2 = (undefined4 *)DAT_017256dc[1];
  local_44 = DAT_017256dc;
  while (puVar6 = puVar2, cVar1 == '\0') {
    if ((uint)puVar6[3] < param_2) {
      puVar2 = (undefined4 *)puVar6[2];
      puVar6 = local_44;
    }
    else {
      puVar2 = (undefined4 *)*puVar6;
    }
    cVar1 = *(char *)((int)puVar2 + 0x2d);
    local_44 = puVar6;
  }
  if ((local_44 == DAT_017256dc) || (param_2 < (uint)local_44[3])) {
    local_40 = DAT_017256dc;
    ppuVar3 = &local_40;
  }
  else {
    ppuVar3 = &local_44;
  }
  puVar2 = *ppuVar3;
  if (puVar2 != DAT_017256dc) {
    if ((uint)puVar2[10] < 0x10) {
      pcVar5 = (char *)(puVar2 + 5);
    }
    else {
      pcVar5 = (char *)puVar2[5];
    }
    iVar4 = (int)param_3 - (int)pcVar5;
    do {
      cVar1 = *pcVar5;
      pcVar5[iVar4] = cVar1;
      pcVar5 = pcVar5 + 1;
    } while (cVar1 != '\0');
    ExceptionList = local_14;
    return param_3;
  }
  iVar4 = FUN_008eb580();
  if (iVar4 == 0) {
    pcVar5 = param_3;
    do {
      cVar1 = pcVar5[(int)"unknown" - (int)param_3];
      *pcVar5 = cVar1;
      pcVar5 = pcVar5 + 1;
    } while (cVar1 != '\0');
    ExceptionList = local_14;
    return param_3;
  }
  FUN_00422170("Pocket%d",*(undefined2 *)(iVar4 + 0x70));
  ExceptionList = local_14;
  return param_3;
}



============================================================
DISASSEMBLY
============================================================
00992590 : PUSH EBP
00992591 : MOV EBP,ESP
00992593 : AND ESP,0xfffffff8
00992596 : PUSH -0x1
00992598 : PUSH 0xb20f7b
0099259d : MOV EAX,FS:[0x0]
009925a3 : PUSH EAX
009925a4 : SUB ESP,0x30
009925a7 : PUSH EBX
009925a8 : PUSH ESI
009925a9 : PUSH EDI
009925aa : MOV EAX,[0x00d66fa0]
009925af : XOR EAX,ESP
009925b1 : PUSH EAX
009925b2 : LEA EAX,[ESP + 0x40]
009925b6 : MOV FS:[0x0],EAX
009925bc : MOV EBX,dword ptr [EBP + 0xc]
009925bf : OR ESI,0xffffffff
009925c2 : TEST byte ptr [0x01726808],0x1
009925c9 : JNZ 0x009925f0
009925cb : OR dword ptr [0x01726808],0x1
009925d2 : MOV dword ptr [ESP + 0x48],0x0
009925da : CALL 0x00421730
009925df : PUSH 0xb84030
009925e4 : CALL 0x006356bc
009925e9 : ADD ESP,0x4
009925ec : MOV dword ptr [ESP + 0x48],ESI
009925f0 : CMP dword ptr [0x017256e0],0x0
009925f7 : JNZ 0x00992897
009925fd : LEA EAX,[ESP + 0x14]
00992601 : PUSH EAX
00992602 : LEA ECX,[ESP + 0x20]
00992606 : PUSH ECX
00992607 : MOV dword ptr [ESP + 0x1c],0x0
0099260f : MOV dword ptr [ESP + 0x20],0xc85354
00992617 : CALL 0x004220f0
0099261c : MOV dword ptr [ESP + 0x48],0x1
00992624 : LEA EDX,[ESP + 0x1c]
00992628 : PUSH EDX
00992629 : LEA EDI,[ESP + 0x18]
0099262d : CALL 0x004217e0
00992632 : MOV dword ptr [ESP + 0x48],ESI
00992636 : LEA EAX,[ESP + 0x1c]
0099263a : PUSH EAX
0099263b : CALL 0x004216d0
00992640 : LEA ECX,[ESP + 0x14]
00992644 : PUSH ECX
00992645 : LEA EDX,[ESP + 0x20]
00992649 : PUSH EDX
0099264a : MOV dword ptr [ESP + 0x1c],0x11
00992652 : MOV dword ptr [ESP + 0x20],0xc8535c
0099265a : CALL 0x004220f0
0099265f : MOV dword ptr [ESP + 0x48],0x2
00992667 : LEA EAX,[ESP + 0x1c]
0099266b : PUSH EAX
0099266c : LEA EDI,[ESP + 0x18]
00992670 : CALL 0x004217e0
00992675 : MOV dword ptr [ESP + 0x48],ESI
00992679 : LEA ECX,[ESP + 0x1c]
0099267d : PUSH ECX
0099267e : CALL 0x004216d0
00992683 : LEA EDX,[ESP + 0x14]
00992687 : PUSH EDX
00992688 : LEA EAX,[ESP + 0x20]
0099268c : PUSH EAX
0099268d : MOV dword ptr [ESP + 0x1c],0x40
00992695 : MOV dword ptr [ESP + 0x20],0xc85368
0099269d : CALL 0x004220f0
009926a2 : MOV dword ptr [ESP + 0x48],0x3
009926aa : LEA ECX,[ESP + 0x1c]
009926ae : PUSH ECX
009926af : LEA EDI,[ESP + 0x18]
009926b3 : CALL 0x004217e0
009926b8 : MOV dword ptr [ESP + 0x48],ESI
009926bc : LEA EDX,[ESP + 0x1c]
009926c0 : PUSH EDX
009926c1 : CALL 0x004216d0
009926c6 : LEA EAX,[ESP + 0x14]
009926ca : PUSH EAX
009926cb : LEA ECX,[ESP + 0x20]
009926cf : PUSH ECX
009926d0 : MOV dword ptr [ESP + 0x1c],0x41
009926d8 : MOV dword ptr [ESP + 0x20],0xc85378
009926e0 : CALL 0x004220f0
009926e5 : MOV dword ptr [ESP + 0x48],0x4
009926ed : LEA EDX,[ESP + 0x1c]
009926f1 : PUSH EDX
009926f2 : LEA EDI,[ESP + 0x18]
009926f6 : CALL 0x004217e0
009926fb : MOV dword ptr [ESP + 0x48],ESI
009926ff : LEA EAX,[ESP + 0x1c]
00992703 : PUSH EAX
00992704 : CALL 0x004216d0
00992709 : LEA ECX,[ESP + 0x14]
0099270d : PUSH ECX
0099270e : LEA EDX,[ESP + 0x20]
00992712 : PUSH EDX
00992713 : MOV dword ptr [ESP + 0x1c],0x42
0099271b : MOV dword ptr [ESP + 0x20],0xc85388
00992723 : CALL 0x004220f0
00992728 : MOV dword ptr [ESP + 0x48],0x5
00992730 : LEA EAX,[ESP + 0x1c]
00992734 : PUSH EAX
00992735 : LEA EDI,[ESP + 0x18]
00992739 : CALL 0x004217e0
0099273e : MOV dword ptr [ESP + 0x48],ESI
00992742 : LEA ECX,[ESP + 0x1c]
00992746 : PUSH ECX
00992747 : CALL 0x004216d0
0099274c : LEA EDX,[ESP + 0x14]
00992750 : PUSH EDX
00992751 : LEA EAX,[ESP + 0x20]
00992755 : PUSH EAX
00992756 : MOV dword ptr [ESP + 0x1c],0x94
0099275e : MOV dword ptr [ESP + 0x20],0xc85398
00992766 : CALL 0x004220f0
0099276b : MOV dword ptr [ESP + 0x48],0x6
00992773 : LEA ECX,[ESP + 0x1c]
00992777 : PUSH ECX
00992778 : LEA EDI,[ESP + 0x18]
0099277c : CALL 0x004217e0
00992781 : MOV dword ptr [ESP + 0x48],ESI
00992785 : LEA EDX,[ESP + 0x1c]
00992789 : PUSH EDX
0099278a : CALL 0x004216d0
0099278f : LEA EAX,[ESP + 0x14]
00992793 : PUSH EAX
00992794 : LEA ECX,[ESP + 0x20]
00992798 : PUSH ECX
00992799 : MOV dword ptr [ESP + 0x1c],0x30
009927a1 : MOV dword ptr [ESP + 0x20],0xc853a8
009927a9 : CALL 0x004220f0
009927ae : MOV dword ptr [ESP + 0x48],0x7
009927b6 : LEA EDX,[ESP + 0x1c]
009927ba : PUSH EDX
009927bb : LEA EDI,[ESP + 0x18]
009927bf : CALL 0x004217e0
009927c4 : MOV dword ptr [ESP + 0x48],ESI
009927c8 : LEA EAX,[ESP + 0x1c]
009927cc : PUSH EAX
009927cd : CALL 0x004216d0
009927d2 : LEA ECX,[ESP + 0x14]
009927d6 : PUSH ECX
009927d7 : LEA EDX,[ESP + 0x20]
009927db : PUSH EDX
009927dc : MOV dword ptr [ESP + 0x1c],0x43
009927e4 : MOV dword ptr [ESP + 0x20],0xc853b0
009927ec : CALL 0x004220f0
009927f1 : MOV dword ptr [ESP + 0x48],0x8
009927f9 : LEA EAX,[ESP + 0x1c]
009927fd : PUSH EAX
009927fe : LEA EDI,[ESP + 0x18]
00992802 : CALL 0x004217e0
00992807 : MOV dword ptr [ESP + 0x48],ESI
0099280b : LEA ECX,[ESP + 0x1c]
0099280f : PUSH ECX
00992810 : CALL 0x004216d0
00992815 : LEA EDX,[ESP + 0x14]
00992819 : PUSH EDX
0099281a : LEA EAX,[ESP + 0x20]
0099281e : PUSH EAX
0099281f : MOV dword ptr [ESP + 0x1c],ESI
00992823 : MOV dword ptr [ESP + 0x20],0xc853bc
0099282b : CALL 0x004220f0
00992830 : MOV dword ptr [ESP + 0x48],0x9
00992838 : LEA ECX,[ESP + 0x1c]
0099283c : PUSH ECX
0099283d : LEA EDI,[ESP + 0x18]
00992841 : CALL 0x004217e0
00992846 : MOV dword ptr [ESP + 0x48],ESI
0099284a : LEA EDX,[ESP + 0x1c]
0099284e : PUSH EDX
0099284f : CALL 0x004216d0
00992854 : LEA EAX,[ESP + 0x14]
00992858 : PUSH EAX
00992859 : LEA ECX,[ESP + 0x20]
0099285d : PUSH ECX
0099285e : MOV dword ptr [ESP + 0x1c],0x17
00992866 : MOV dword ptr [ESP + 0x20],0xc853c4
0099286e : CALL 0x004220f0
00992873 : MOV dword ptr [ESP + 0x48],0xa
0099287b : LEA EDX,[ESP + 0x1c]
0099287f : PUSH EDX
00992880 : LEA EDI,[ESP + 0x18]
00992884 : CALL 0x004217e0
00992889 : MOV dword ptr [ESP + 0x48],ESI
0099288d : LEA EAX,[ESP + 0x1c]
00992891 : PUSH EAX
00992892 : CALL 0x004216d0
00992897 : MOV EDX,dword ptr [0x017256dc]
0099289d : MOV EAX,dword ptr [EDX + 0x4]
009928a0 : CMP byte ptr [EAX + 0x2d],0x0
009928a4 : MOV ECX,EDX
009928a6 : JNZ 0x009928bc
009928a8 : CMP dword ptr [EAX + 0xc],EBX
009928ab : JNC 0x009928b2
009928ad : MOV EAX,dword ptr [EAX + 0x8]
009928b0 : JMP 0x009928b6
009928b2 : MOV ECX,EAX
009928b4 : MOV EAX,dword ptr [EAX]
009928b6 : CMP byte ptr [EAX + 0x2d],0x0
009928ba : JZ 0x009928a8
009928bc : MOV dword ptr [ESP + 0x10],ECX
009928c0 : CMP ECX,EDX
009928c2 : JZ 0x009928cf
009928c4 : CMP EBX,dword ptr [ECX + 0xc]
009928c7 : JC 0x009928cf
009928c9 : LEA EAX,[ESP + 0x10]
009928cd : JMP 0x009928d7
009928cf : MOV dword ptr [ESP + 0x14],EDX
009928d3 : LEA EAX,[ESP + 0x14]
009928d7 : MOV EAX,dword ptr [EAX]
009928d9 : CMP EAX,EDX
009928db : JNZ 0x00992941
009928dd : MOV EAX,dword ptr [EBP + 0x8]
009928e0 : MOV EDI,EBX
009928e2 : CALL 0x008eb580
009928e7 : TEST EAX,EAX
009928e9 : JZ 0x00992916
009928eb : MOVZX ECX,word ptr [EAX + 0x70]
009928ef : PUSH ECX
009928f0 : PUSH 0xc853d4
009928f5 : LEA EAX,[EBP + 0x10]
009928f8 : CALL 0x00422170
009928fd : MOV EAX,dword ptr [EBP + 0x10]
00992900 : ADD ESP,0x8
00992903 : MOV ECX,dword ptr [ESP + 0x40]
00992907 : MOV dword ptr FS:[0x0],ECX
0099290e : POP ECX
0099290f : POP EDI
00992910 : POP ESI
00992911 : POP EBX
00992912 : MOV ESP,EBP
00992914 : POP EBP
00992915 : RET
00992916 : MOV ESI,dword ptr [EBP + 0x10]
00992919 : MOV EDX,0xc853e0
0099291e : MOV EAX,ESI
00992920 : SUB EDX,ESI
00992922 : MOV CL,byte ptr [EDX + EAX*0x1]
00992925 : MOV byte ptr [EAX],CL
00992927 : INC EAX
00992928 : TEST CL,CL
0099292a : JNZ 0x00992922
0099292c : MOV EAX,ESI
0099292e : MOV ECX,dword ptr [ESP + 0x40]
00992932 : MOV dword ptr FS:[0x0],ECX
00992939 : POP ECX
0099293a : POP EDI
0099293b : POP ESI
0099293c : POP EBX
0099293d : MOV ESP,EBP
0099293f : POP EBP
00992940 : RET
00992941 : CMP dword ptr [EAX + 0x28],0x10
00992945 : JC 0x0099294c
00992947 : MOV EAX,dword ptr [EAX + 0x14]
0099294a : JMP 0x0099294f
0099294c : ADD EAX,0x14
0099294f : MOV ESI,dword ptr [EBP + 0x10]
00992952 : MOV EDX,ESI
00992954 : SUB EDX,EAX
00992956 : MOV CL,byte ptr [EAX]
00992958 : MOV byte ptr [EDX + EAX*0x1],CL
0099295b : INC EAX
0099295c : TEST CL,CL
0099295e : JNZ 0x00992956
00992960 : MOV EAX,ESI
00992962 : MOV ECX,dword ptr [ESP + 0x40]
00992966 : MOV dword ptr FS:[0x0],ECX
0099296d : POP ECX
0099296e : POP EDI
0099296f : POP ESI
00992970 : POP EBX
00992971 : MOV ESP,EBP
00992973 : POP EBP
00992974 : RET
