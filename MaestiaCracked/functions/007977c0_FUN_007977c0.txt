PROGRAM  : Maestia.exe
FUNCTION : FUN_007977c0
ENTRY    : 007977c0
BODY     : [[007977c0, 007979b7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007977c0(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined1 param_6,undefined2 param_7,undefined4 param_8)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  uint uVar4;
  undefined1 local_38 [24];
  uint local_20;
  undefined **local_1c;
  int *local_18;
  undefined4 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b19901;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = (undefined4 *)
             FUN_006f0760(0x2c,"",0,(DAT_01725270 >> 3 & 1) == 0,
                          DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  local_8 = 0;
  if (local_14 == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = (undefined4 *)FUN_0047cfa0(local_14);
  }
  local_8 = 0xffffffff;
  local_14 = puVar2;
  if (puVar2 != (undefined4 *)0x0) {
    *puVar2 = param_2;
    puVar2[1] = param_3;
    puVar2[4] = param_5;
    *(undefined1 *)(puVar2 + 5) = param_6;
    piVar1 = DAT_017251f4;
    *(undefined2 *)((int)puVar2 + 0x16) = param_7;
    puVar2[6] = param_8;
    *(undefined1 *)(puVar2 + 7) = 1;
    iVar3 = (**(code **)(*piVar1 + 4))(&local_1c,param_4);
    local_8 = 2;
    piVar1 = (int *)puVar2[9];
    if (piVar1 != *(int **)(iVar3 + 4)) {
      if (piVar1 != (int *)0x0) {
        (**(code **)(*piVar1 + 0x30))();
      }
      if (*(int *)(iVar3 + 4) != 0) {
        InterlockedIncrement((LONG *)(*(int *)(iVar3 + 4) + 0x2c));
      }
      puVar2[9] = *(undefined4 *)(iVar3 + 4);
    }
    local_8 = 0xffffffff;
    local_1c = &PTR_FUN_00cd4964;
    if (local_18 != (int *)0x0) {
      (**(code **)(*local_18 + 0x30))();
      local_18 = (int *)0x0;
    }
    iVar3 = *(int *)(param_1 + 0x2c8);
    if (iVar3 == 0) {
      uVar4 = 0;
    }
    else {
      uVar4 = *(int *)(param_1 + 0x2d0) - iVar3 >> 2;
    }
    piVar1 = *(int **)(param_1 + 0x2cc);
    if ((uint)((int)piVar1 - iVar3 >> 2) < uVar4) {
      *piVar1 = (int)puVar2;
      *(int **)(param_1 + 0x2cc) = piVar1 + 1;
    }
    else {
      FUN_0042fe80(param_1 + 0x2c4,piVar1,&local_14);
    }
    FUN_0045fe50(&local_1c,&param_2);
    FUN_0045fe50(&local_1c,&param_3);
    ExceptionList = local_10;
    return;
  }
  FUN_00406460(L"pFxRayEntityInfo fail");
  local_8 = 1;
  if ((int *)*DAT_00da98e8 != (int *)0x0) {
    (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
              (L"AvaLib::AvaFxRayNode::AddFxRayEntityInfo",0x3a,local_38);
  }
  local_8 = 0xffffffff;
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007977c0 : PUSH EBP
007977c1 : MOV EBP,ESP
007977c3 : PUSH -0x1
007977c5 : PUSH 0xb19901
007977ca : MOV EAX,FS:[0x0]
007977d0 : PUSH EAX
007977d1 : SUB ESP,0x2c
007977d4 : PUSH EBX
007977d5 : PUSH ESI
007977d6 : PUSH EDI
007977d7 : MOV EAX,[0x00d66fa0]
007977dc : XOR EAX,EBP
007977de : PUSH EAX
007977df : LEA EAX,[EBP + -0xc]
007977e2 : MOV FS:[0x0],EAX
007977e8 : MOV EAX,[0x01725270]
007977ed : SHR EAX,0x3
007977f0 : MOV EBX,0x1
007977f5 : MOV ECX,0x0
007977fa : AND EAX,EBX
007977fc : SETZ CL
007977ff : XOR EDI,EDI
00797801 : PUSH ECX
00797802 : PUSH EDI
00797803 : PUSH 0xbf1a4a
00797808 : PUSH 0x2c
0079780a : CALL 0x006f0760
0079780f : ADD ESP,0x10
00797812 : MOV dword ptr [EBP + -0x10],EAX
00797815 : MOV dword ptr [EBP + -0x4],EDI
00797818 : CMP EAX,EDI
0079781a : JZ 0x00797826
0079781c : PUSH EAX
0079781d : CALL 0x0047cfa0
00797822 : MOV ESI,EAX
00797824 : JMP 0x00797828
00797826 : XOR ESI,ESI
00797828 : MOV dword ptr [EBP + -0x4],0xffffffff
0079782f : MOV dword ptr [EBP + -0x10],ESI
00797832 : CMP ESI,EDI
00797834 : JNZ 0x0079789d
00797836 : PUSH 0xc156c8
0079783b : LEA ECX,[EBP + -0x34]
0079783e : CALL 0x00406460
00797843 : MOV dword ptr [EBP + -0x4],EBX
00797846 : MOV EDX,dword ptr [0x00da98e8]
0079784c : MOV ECX,dword ptr [EDX]
0079784e : CMP ECX,EDI
00797850 : JZ 0x00797864
00797852 : MOV EAX,dword ptr [ECX]
00797854 : MOV EAX,dword ptr [EAX + 0x14]
00797857 : LEA EDX,[EBP + -0x34]
0079785a : PUSH EDX
0079785b : PUSH 0x3a
0079785d : PUSH 0xc156f8
00797862 : CALL EAX
00797864 : MOV dword ptr [EBP + -0x4],0xffffffff
0079786b : CMP dword ptr [EBP + -0x1c],0x8
0079786f : JC 0x00797879
00797871 : MOV ECX,dword ptr [EBP + -0x30]
00797874 : CALL 0x006f04e0
00797879 : XOR ECX,ECX
0079787b : MOV dword ptr [EBP + -0x1c],0x7
00797882 : MOV dword ptr [EBP + -0x20],EDI
00797885 : MOV word ptr [EBP + -0x30],CX
00797889 : MOV ECX,dword ptr [EBP + -0xc]
0079788c : MOV dword ptr FS:[0x0],ECX
00797893 : POP ECX
00797894 : POP EDI
00797895 : POP ESI
00797896 : POP EBX
00797897 : MOV ESP,EBP
00797899 : POP EBP
0079789a : RET 0x20
0079789d : MOV EDX,dword ptr [EBP + 0xc]
007978a0 : MOV EAX,dword ptr [EBP + 0x10]
007978a3 : MOVSS XMM0,dword ptr [EBP + 0x18]
007978a8 : MOV CL,byte ptr [EBP + 0x1c]
007978ab : MOV dword ptr [ESI],EDX
007978ad : MOV DX,word ptr [EBP + 0x20]
007978b1 : MOV dword ptr [ESI + 0x4],EAX
007978b4 : MOVSS dword ptr [ESI + 0x10],XMM0
007978b9 : MOVSS XMM0,dword ptr [EBP + 0x24]
007978be : MOV byte ptr [ESI + 0x14],CL
007978c1 : MOV ECX,dword ptr [0x017251f4]
007978c7 : MOV word ptr [ESI + 0x16],DX
007978cb : MOV EDX,dword ptr [EBP + 0x14]
007978ce : MOVSS dword ptr [ESI + 0x18],XMM0
007978d3 : PUSH EDX
007978d4 : MOV byte ptr [ESI + 0x1c],BL
007978d7 : MOV EAX,dword ptr [ECX]
007978d9 : MOV EAX,dword ptr [EAX + 0x4]
007978dc : LEA EDX,[EBP + -0x18]
007978df : PUSH EDX
007978e0 : CALL EAX
007978e2 : MOV EDI,EAX
007978e4 : MOV dword ptr [EBP + -0x4],0x2
007978eb : MOV EAX,dword ptr [EDI + 0x4]
007978ee : MOV ECX,dword ptr [ESI + 0x24]
007978f1 : CMP ECX,EAX
007978f3 : JZ 0x00797917
007978f5 : TEST ECX,ECX
007978f7 : JZ 0x00797900
007978f9 : MOV EDX,dword ptr [ECX]
007978fb : MOV EAX,dword ptr [EDX + 0x30]
007978fe : CALL EAX
00797900 : MOV EAX,dword ptr [EDI + 0x4]
00797903 : TEST EAX,EAX
00797905 : JZ 0x00797911
00797907 : ADD EAX,0x2c
0079790a : PUSH EAX
0079790b : CALL dword ptr [0x00b850dc]
00797911 : MOV ECX,dword ptr [EDI + 0x4]
00797914 : MOV dword ptr [ESI + 0x24],ECX
00797917 : MOV dword ptr [EBP + -0x4],0xffffffff
0079791e : MOV ECX,dword ptr [EBP + -0x14]
00797921 : MOV dword ptr [EBP + -0x18],0xcd4964
00797928 : TEST ECX,ECX
0079792a : JZ 0x0079793a
0079792c : MOV EDX,dword ptr [ECX]
0079792e : MOV EAX,dword ptr [EDX + 0x30]
00797931 : CALL EAX
00797933 : MOV dword ptr [EBP + -0x14],0x0
0079793a : MOV EAX,dword ptr [EBP + 0x8]
0079793d : MOV EDI,dword ptr [EAX + 0x2c8]
00797943 : ADD EAX,0x2c4
00797948 : TEST EDI,EDI
0079794a : JNZ 0x00797950
0079794c : XOR ECX,ECX
0079794e : JMP 0x00797958
00797950 : MOV ECX,dword ptr [EAX + 0xc]
00797953 : SUB ECX,EDI
00797955 : SAR ECX,0x2
00797958 : MOV EDX,dword ptr [EAX + 0x8]
0079795b : MOV EBX,EDX
0079795d : SUB EBX,EDI
0079795f : SAR EBX,0x2
00797962 : CMP EBX,ECX
00797964 : JNC 0x00797970
00797966 : MOV dword ptr [EDX],ESI
00797968 : ADD EDX,0x4
0079796b : MOV dword ptr [EAX + 0x8],EDX
0079796e : JMP 0x0079797b
00797970 : LEA ECX,[EBP + -0x10]
00797973 : PUSH ECX
00797974 : PUSH EDX
00797975 : PUSH EAX
00797976 : CALL 0x0042fe80
0079797b : MOV ESI,dword ptr [EBP + 0x8]
0079797e : LEA EDX,[EBP + 0xc]
00797981 : PUSH EDX
00797982 : LEA EAX,[EBP + -0x18]
00797985 : PUSH EAX
00797986 : LEA EAX,[ESI + 0x2e0]
0079798c : CALL 0x0045fe50
00797991 : LEA ECX,[EBP + 0x10]
00797994 : PUSH ECX
00797995 : LEA EDX,[EBP + -0x18]
00797998 : PUSH EDX
00797999 : LEA EAX,[ESI + 0x2ec]
0079799f : CALL 0x0045fe50
007979a4 : MOV ECX,dword ptr [EBP + -0xc]
007979a7 : MOV dword ptr FS:[0x0],ECX
007979ae : POP ECX
007979af : POP EDI
007979b0 : POP ESI
007979b1 : POP EBX
007979b2 : MOV ESP,EBP
007979b4 : POP EBP
007979b5 : RET 0x20
