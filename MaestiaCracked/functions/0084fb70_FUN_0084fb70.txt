PROGRAM  : Maestia.exe
FUNCTION : FUN_0084fb70
ENTRY    : 0084fb70
BODY     : [[0084fb70, 0084fcd6]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0084fbcf) */

void FUN_0084fb70(void)

{
  int iVar1;
  uint uVar2;
  int unaff_ESI;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b48d8b;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  FUN_00406360(&DAT_00c3cf68,0);
  FUN_0084c3a0(unaff_ESI);
  if (*(int *)(unaff_ESI + 0x48) != *(int *)(unaff_ESI + 0x4c)) {
    *(int *)(unaff_ESI + 0x4c) = *(int *)(unaff_ESI + 0x48);
  }
  if (*(int *)(unaff_ESI + 0x160) == 5) {
    FUN_00406460(&DAT_00c3cf6c);
    local_8 = 0;
    FUN_0084f430(unaff_ESI,local_2c);
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
  }
  else {
    FUN_00406460(&DAT_00c3cf70);
    local_8 = 1;
    FUN_0084f730(unaff_ESI,local_2c);
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
  }
  local_8 = 0xffffffff;
  iVar1 = *(int *)(unaff_ESI + 0x160);
  if (((iVar1 == 0xf) || (iVar1 == 7)) || (iVar1 == 0)) {
    local_28 = 0;
    local_14 = 7;
    local_18 = 0;
    FUN_00406360(&DAT_00c3cf74,0);
    local_8 = 2;
    FUN_0084f430(unaff_ESI,local_2c);
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  *(undefined4 *)(unaff_ESI + 0x160) = 0;
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0084fb70 : PUSH EBP
0084fb71 : MOV EBP,ESP
0084fb73 : PUSH -0x1
0084fb75 : PUSH 0xb48d8b
0084fb7a : MOV EAX,FS:[0x0]
0084fb80 : PUSH EAX
0084fb81 : SUB ESP,0x20
0084fb84 : PUSH EBX
0084fb85 : PUSH EDI
0084fb86 : MOV EAX,[0x00d66fa0]
0084fb8b : XOR EAX,EBP
0084fb8d : PUSH EAX
0084fb8e : LEA EAX,[EBP + -0xc]
0084fb91 : MOV FS:[0x0],EAX
0084fb97 : XOR EBX,EBX
0084fb99 : PUSH EBX
0084fb9a : PUSH 0xc3cf68
0084fb9f : LEA ECX,[ESI + 0x170]
0084fba5 : CALL 0x00406360
0084fbaa : PUSH ESI
0084fbab : CALL 0x0084c3a0
0084fbb0 : MOV ECX,dword ptr [ESI + 0x4c]
0084fbb3 : MOV EDI,dword ptr [ESI + 0x48]
0084fbb6 : CMP EDI,ECX
0084fbb8 : JZ 0x0084fbe0
0084fbba : MOV EAX,ECX
0084fbbc : SUB EAX,ECX
0084fbbe : SAR EAX,0x2
0084fbc1 : LEA EDX,[EAX*0x4 + 0x0]
0084fbc8 : LEA EBX,[EDX + EDI*0x1]
0084fbcb : TEST EAX,EAX
0084fbcd : JLE 0x0084fbdb
0084fbcf : PUSH EDX
0084fbd0 : PUSH ECX
0084fbd1 : PUSH EDX
0084fbd2 : PUSH EDI
0084fbd3 : CALL 0x00634101
0084fbd8 : ADD ESP,0x10
0084fbdb : MOV dword ptr [ESI + 0x4c],EBX
0084fbde : XOR EBX,EBX
0084fbe0 : CMP dword ptr [ESI + 0x160],0x5
0084fbe7 : LEA ECX,[EBP + -0x28]
0084fbea : JNZ 0x0084fc20
0084fbec : PUSH 0xc3cf6c
0084fbf1 : CALL 0x00406460
0084fbf6 : MOV dword ptr [EBP + -0x4],EBX
0084fbf9 : LEA EAX,[EBP + -0x28]
0084fbfc : PUSH EAX
0084fbfd : PUSH ESI
0084fbfe : CALL 0x0084f430
0084fc03 : MOV dword ptr [EBP + -0x4],0xffffffff
0084fc0a : CMP dword ptr [EBP + -0x10],0x8
0084fc0e : JC 0x0084fc18
0084fc10 : MOV ECX,dword ptr [EBP + -0x24]
0084fc13 : CALL 0x006f04e0
0084fc18 : XOR ECX,ECX
0084fc1a : MOV word ptr [EBP + -0x24],CX
0084fc1e : JMP 0x0084fc56
0084fc20 : PUSH 0xc3cf70
0084fc25 : CALL 0x00406460
0084fc2a : MOV dword ptr [EBP + -0x4],0x1
0084fc31 : LEA EDX,[EBP + -0x28]
0084fc34 : PUSH EDX
0084fc35 : PUSH ESI
0084fc36 : CALL 0x0084f730
0084fc3b : MOV dword ptr [EBP + -0x4],0xffffffff
0084fc42 : CMP dword ptr [EBP + -0x10],0x8
0084fc46 : JC 0x0084fc50
0084fc48 : MOV ECX,dword ptr [EBP + -0x24]
0084fc4b : CALL 0x006f04e0
0084fc50 : XOR EAX,EAX
0084fc52 : MOV word ptr [EBP + -0x24],AX
0084fc56 : MOV EAX,dword ptr [ESI + 0x160]
0084fc5c : MOV EDI,0x7
0084fc61 : MOV dword ptr [EBP + -0x14],EBX
0084fc64 : MOV dword ptr [EBP + -0x10],EDI
0084fc67 : CMP EAX,0xf
0084fc6a : JZ 0x0084fc74
0084fc6c : CMP EAX,EDI
0084fc6e : JZ 0x0084fc74
0084fc70 : CMP EAX,EBX
0084fc72 : JNZ 0x0084fcc0
0084fc74 : XOR ECX,ECX
0084fc76 : PUSH EBX
0084fc77 : MOV word ptr [EBP + -0x24],CX
0084fc7b : PUSH 0xc3cf74
0084fc80 : LEA ECX,[EBP + -0x28]
0084fc83 : MOV dword ptr [EBP + -0x10],EDI
0084fc86 : MOV dword ptr [EBP + -0x14],EBX
0084fc89 : CALL 0x00406360
0084fc8e : MOV dword ptr [EBP + -0x4],0x2
0084fc95 : LEA EDX,[EBP + -0x28]
0084fc98 : PUSH EDX
0084fc99 : PUSH ESI
0084fc9a : CALL 0x0084f430
0084fc9f : MOV dword ptr [EBP + -0x4],0xffffffff
0084fca6 : CMP dword ptr [EBP + -0x10],0x8
0084fcaa : JC 0x0084fcb4
0084fcac : MOV ECX,dword ptr [EBP + -0x24]
0084fcaf : CALL 0x006f04e0
0084fcb4 : XOR EAX,EAX
0084fcb6 : MOV dword ptr [EBP + -0x10],EDI
0084fcb9 : MOV dword ptr [EBP + -0x14],EBX
0084fcbc : MOV word ptr [EBP + -0x24],AX
0084fcc0 : MOV dword ptr [ESI + 0x160],EBX
0084fcc6 : MOV ECX,dword ptr [EBP + -0xc]
0084fcc9 : MOV dword ptr FS:[0x0],ECX
0084fcd0 : POP ECX
0084fcd1 : POP EDI
0084fcd2 : POP EBX
0084fcd3 : MOV ESP,EBP
0084fcd5 : POP EBP
0084fcd6 : RET
