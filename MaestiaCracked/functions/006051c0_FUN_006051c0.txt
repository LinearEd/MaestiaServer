PROGRAM  : Maestia.exe
FUNCTION : FUN_006051c0
ENTRY    : 006051c0
BODY     : [[006051c0, 00605540]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006051c0(float *param_1,float *param_2,float param_3,float *param_4)

{
  uint *puVar1;
  undefined4 *puVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  uint uVar11;
  int iVar12;
  float fVar13;
  undefined4 uVar14;
  int in_ECX;
  uint uVar15;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined4 local_f0;
  
  fVar13 = (param_2[1] - param_1[1]) / param_3;
  param_3 = (*param_1 - *param_2) / param_3;
  fVar3 = param_4[1];
  fVar4 = param_4[1];
  fVar5 = param_4[3];
  fVar6 = param_4[3];
  fVar7 = param_4[4];
  fVar8 = param_4[4];
  uVar14 = FUN_00603020(*param_2 - fVar13 * *param_4,param_2[1] - param_3 * *param_4,
                        *(undefined4 *)(in_ECX + 0x10));
  local_f4 = uVar14;
  if (*(char *)((int)param_4 + 0x36) != '\0') {
    local_f4 = FUN_00603020(*param_2 - fVar13 * fVar5,param_2[1] - param_3 * fVar6,0xffffffff);
  }
  local_f0 = uVar14;
  if (*(char *)(param_4 + 0xe) != '\0') {
    local_f0 = FUN_00603020(*param_2 + fVar13 * fVar3,param_3 * fVar4 + param_2[1],
                            *(undefined4 *)(in_ECX + 0x14));
  }
  if (*(char *)((int)param_4 + 0x37) == '\0') {
    local_f8 = local_f0;
  }
  else {
    local_f8 = FUN_00603020(*param_2 + fVar7 * fVar13,param_3 * fVar8 + param_2[1],0xffffffff);
  }
  if ((*(char *)(param_4 + 0xd) != '\0') || (*(char *)((int)param_4 + 0x35) != '\0')) {
    uVar9 = *(undefined4 *)(in_ECX + 0x60);
    puVar1 = (uint *)(in_ECX + 0x50);
    uVar15 = *(uint *)(in_ECX + 0x50) >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    puVar2 = (undefined4 *)(*(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4) + (*puVar1 & 0xff) * 0xc)
    ;
    *puVar2 = uVar9;
    puVar2[1] = local_f0;
    puVar2[2] = uVar14;
    *puVar1 = *puVar1 + 1;
    uVar9 = *(undefined4 *)(in_ECX + 0x60);
    uVar10 = *(undefined4 *)(in_ECX + 100);
    uVar15 = *puVar1 >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    puVar2 = (undefined4 *)(*(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4) + (*puVar1 & 0xff) * 0xc)
    ;
    *puVar2 = uVar9;
    puVar2[1] = uVar10;
    puVar2[2] = local_f0;
    *puVar1 = *puVar1 + 1;
  }
  if (*(char *)((int)param_4 + 0x36) != '\0') {
    uVar9 = *(undefined4 *)(in_ECX + 0x68);
    uVar10 = *(undefined4 *)(in_ECX + 0x60);
    puVar1 = (uint *)(in_ECX + 0x50);
    uVar15 = *(uint *)(in_ECX + 0x50) >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    puVar2 = (undefined4 *)(*(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4) + (*puVar1 & 0xff) * 0xc)
    ;
    *puVar2 = uVar9;
    puVar2[1] = uVar10;
    puVar2[2] = uVar14;
    *puVar1 = *puVar1 + 1;
    uVar9 = *(undefined4 *)(in_ECX + 0x68);
    uVar15 = *puVar1 >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    puVar2 = (undefined4 *)(*(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4) + (*puVar1 & 0xff) * 0xc)
    ;
    *puVar2 = uVar9;
    puVar2[1] = uVar14;
    puVar2[2] = local_f4;
    *puVar1 = *puVar1 + 1;
  }
  if (*(char *)((int)param_4 + 0x37) != '\0') {
    uVar9 = *(undefined4 *)(in_ECX + 100);
    puVar1 = (uint *)(in_ECX + 0x50);
    uVar15 = *(uint *)(in_ECX + 0x50) >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    uVar11 = *puVar1;
    iVar12 = *(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4);
    *(undefined4 *)(iVar12 + (uVar11 & 0xff) * 0xc) = uVar9;
    iVar12 = iVar12 + (uVar11 & 0xff) * 0xc;
    *(undefined4 *)(iVar12 + 4) = local_f8;
    *(undefined4 *)(iVar12 + 8) = local_f0;
    *puVar1 = *puVar1 + 1;
    uVar9 = *(undefined4 *)(in_ECX + 0x6c);
    uVar10 = *(undefined4 *)(in_ECX + 100);
    uVar15 = *puVar1 >> 8;
    if (*(uint *)(in_ECX + 0x54) <= uVar15) {
      FUN_00602fb0(uVar15);
    }
    puVar2 = (undefined4 *)(*(int *)(*(int *)(in_ECX + 0x5c) + uVar15 * 4) + (*puVar1 & 0xff) * 0xc)
    ;
    *puVar2 = uVar10;
    puVar2[1] = uVar9;
    puVar2[2] = local_f8;
    *puVar1 = *puVar1 + 1;
  }
  *(undefined4 *)(in_ECX + 0x60) = uVar14;
  *(undefined4 *)(in_ECX + 0x68) = local_f4;
  *(undefined4 *)(in_ECX + 100) = local_f0;
  *(undefined4 *)(in_ECX + 0x6c) = local_f8;
  return;
}



============================================================
DISASSEMBLY
============================================================
006051c0 : SUB ESP,0xf8
006051c6 : MOV EAX,dword ptr [ESP + 0xfc]
006051cd : PUSH EBX
006051ce : PUSH EBP
006051cf : PUSH ESI
006051d0 : MOV ESI,dword ptr [ESP + 0x10c]
006051d7 : FLD float ptr [ESI + 0x4]
006051da : MOV EBP,dword ptr [ESP + 0x114]
006051e1 : FSUB float ptr [EAX + 0x4]
006051e4 : PUSH EDI
006051e5 : FLD float ptr [ESP + 0x114]
006051ec : MOV EDI,ECX
006051ee : FLD ST0
006051f0 : FDIVP ST2,ST0
006051f2 : FXCH
006051f4 : FSTP float ptr [ESP + 0x14]
006051f8 : FLD float ptr [EAX]
006051fa : FSUB float ptr [ESI]
006051fc : MOV EAX,dword ptr [EDI + 0x10]
006051ff : PUSH EAX
00605200 : SUB ESP,0x8
00605203 : FDIVRP
00605205 : FSTP float ptr [ESP + 0x1c]
00605209 : FLD float ptr [EBP]
0060520c : FLD float ptr [ESP + 0x20]
00605210 : FLD ST0
00605212 : FMULP ST2
00605214 : FXCH
00605216 : FSTP float ptr [ESP + 0x38]
0060521a : FLD float ptr [EBP]
0060521d : FLD float ptr [ESP + 0x1c]
00605221 : FLD ST0
00605223 : FMULP ST2
00605225 : FXCH
00605227 : FSTP float ptr [ESP + 0x3c]
0060522b : FLD ST1
0060522d : FMUL float ptr [EBP + 0x4]
00605230 : FSTP float ptr [ESP + 0x68]
00605234 : FLD ST0
00605236 : FMUL float ptr [EBP + 0x4]
00605239 : FSTP float ptr [ESP + 0x6c]
0060523d : FLD ST1
0060523f : FMUL float ptr [EBP + 0xc]
00605242 : FSTP float ptr [ESP + 0x40]
00605246 : FLD ST0
00605248 : FMUL float ptr [EBP + 0xc]
0060524b : FSTP float ptr [ESP + 0x44]
0060524f : FLD float ptr [EBP + 0x10]
00605252 : FMULP ST2
00605254 : FXCH
00605256 : FSTP float ptr [ESP + 0x70]
0060525a : FMUL float ptr [EBP + 0x10]
0060525d : FSTP float ptr [ESP + 0x74]
00605261 : FLD float ptr [ESI + 0x4]
00605264 : FSUB float ptr [ESP + 0x3c]
00605268 : FSTP float ptr [ESP + 0x20]
0060526c : FLD float ptr [ESP + 0x20]
00605270 : FSTP float ptr [ESP + 0x4]
00605274 : FLD float ptr [ESI]
00605276 : FSUB float ptr [ESP + 0x38]
0060527a : FSTP float ptr [ESP + 0x20]
0060527e : FLD float ptr [ESP + 0x20]
00605282 : FSTP float ptr [ESP]
00605285 : CALL 0x00603020
0060528a : CMP byte ptr [EBP + 0x36],0x0
0060528e : MOV EBX,EAX
00605290 : MOV dword ptr [ESP + 0x1c],EBX
00605294 : JZ 0x006052cc
00605296 : FLD float ptr [ESI + 0x4]
00605299 : PUSH -0x1
0060529b : FSUB float ptr [ESP + 0x3c]
0060529f : SUB ESP,0x8
006052a2 : MOV ECX,EDI
006052a4 : FSTP float ptr [ESP + 0x20]
006052a8 : FLD float ptr [ESP + 0x20]
006052ac : FSTP float ptr [ESP + 0x4]
006052b0 : FLD float ptr [ESI]
006052b2 : FSUB float ptr [ESP + 0x40]
006052b6 : FSTP float ptr [ESP + 0x20]
006052ba : FLD float ptr [ESP + 0x20]
006052be : FSTP float ptr [ESP]
006052c1 : CALL 0x00603020
006052c6 : MOV dword ptr [ESP + 0x14],EAX
006052ca : JMP 0x006052d0
006052cc : MOV dword ptr [ESP + 0x14],EBX
006052d0 : CMP byte ptr [EBP + 0x38],0x0
006052d4 : JZ 0x0060530e
006052d6 : FLD float ptr [ESP + 0x60]
006052da : MOV ECX,dword ptr [EDI + 0x14]
006052dd : FADD float ptr [ESI + 0x4]
006052e0 : PUSH ECX
006052e1 : SUB ESP,0x8
006052e4 : MOV ECX,EDI
006052e6 : FSTP float ptr [ESP + 0x1c]
006052ea : FLD float ptr [ESP + 0x1c]
006052ee : FSTP float ptr [ESP + 0x4]
006052f2 : FLD float ptr [ESI]
006052f4 : FADD float ptr [ESP + 0x68]
006052f8 : FSTP float ptr [ESP + 0x1c]
006052fc : FLD float ptr [ESP + 0x1c]
00605300 : FSTP float ptr [ESP]
00605303 : CALL 0x00603020
00605308 : MOV dword ptr [ESP + 0x18],EAX
0060530c : JMP 0x00605312
0060530e : MOV dword ptr [ESP + 0x18],EBX
00605312 : CMP byte ptr [EBP + 0x37],0x0
00605316 : JZ 0x0060534e
00605318 : FLD float ptr [ESP + 0x68]
0060531c : PUSH -0x1
0060531e : FADD float ptr [ESI + 0x4]
00605321 : SUB ESP,0x8
00605324 : MOV ECX,EDI
00605326 : FSTP float ptr [ESP + 0x1c]
0060532a : FLD float ptr [ESP + 0x1c]
0060532e : FSTP float ptr [ESP + 0x4]
00605332 : FLD float ptr [ESI]
00605334 : FADD float ptr [ESP + 0x70]
00605338 : FSTP float ptr [ESP + 0x1c]
0060533c : FLD float ptr [ESP + 0x1c]
00605340 : FSTP float ptr [ESP]
00605343 : CALL 0x00603020
00605348 : MOV dword ptr [ESP + 0x10],EAX
0060534c : JMP 0x00605356
0060534e : MOV EDX,dword ptr [ESP + 0x18]
00605352 : MOV dword ptr [ESP + 0x10],EDX
00605356 : CMP byte ptr [EBP + 0x34],0x0
0060535a : JNZ 0x00605366
0060535c : CMP byte ptr [EBP + 0x35],0x0
00605360 : JZ 0x006053f5
00605366 : MOV EBX,dword ptr [EDI + 0x50]
00605369 : MOV EAX,dword ptr [EDI + 0x60]
0060536c : LEA ESI,[EDI + 0x50]
0060536f : SHR EBX,0x8
00605372 : MOV dword ptr [ESP + 0x20],EAX
00605376 : CMP EBX,dword ptr [ESI + 0x4]
00605379 : JC 0x00605383
0060537b : PUSH EBX
0060537c : MOV ECX,ESI
0060537e : CALL 0x00602fb0
00605383 : MOV EAX,dword ptr [ESI]
00605385 : MOV ECX,dword ptr [ESI + 0xc]
00605388 : AND EAX,0xff
0060538d : LEA EDX,[EAX + EAX*0x2]
00605390 : MOV EAX,dword ptr [ECX + EBX*0x4]
00605393 : MOV ECX,dword ptr [ESP + 0x20]
00605397 : LEA EAX,[EAX + EDX*0x4]
0060539a : MOV EDX,dword ptr [ESP + 0x18]
0060539e : MOV dword ptr [EAX],ECX
006053a0 : MOV ECX,dword ptr [ESP + 0x1c]
006053a4 : MOV dword ptr [EAX + 0x4],EDX
006053a7 : MOV dword ptr [EAX + 0x8],ECX
006053aa : INC dword ptr [ESI]
006053ac : MOV EBX,dword ptr [ESI]
006053ae : MOV EDX,dword ptr [EDI + 0x60]
006053b1 : MOV EAX,dword ptr [EDI + 0x64]
006053b4 : SHR EBX,0x8
006053b7 : MOV dword ptr [ESP + 0x20],EDX
006053bb : MOV dword ptr [ESP + 0x24],EAX
006053bf : CMP EBX,dword ptr [ESI + 0x4]
006053c2 : JC 0x006053cc
006053c4 : PUSH EBX
006053c5 : MOV ECX,ESI
006053c7 : CALL 0x00602fb0
006053cc : MOV EAX,dword ptr [ESI]
006053ce : MOV ECX,dword ptr [ESI + 0xc]
006053d1 : AND EAX,0xff
006053d6 : LEA EDX,[EAX + EAX*0x2]
006053d9 : MOV EAX,dword ptr [ECX + EBX*0x4]
006053dc : MOV ECX,dword ptr [ESP + 0x20]
006053e0 : LEA EAX,[EAX + EDX*0x4]
006053e3 : MOV EDX,dword ptr [ESP + 0x24]
006053e7 : MOV dword ptr [EAX],ECX
006053e9 : MOV ECX,dword ptr [ESP + 0x18]
006053ed : MOV dword ptr [EAX + 0x4],EDX
006053f0 : MOV dword ptr [EAX + 0x8],ECX
006053f3 : INC dword ptr [ESI]
006053f5 : CMP byte ptr [EBP + 0x36],0x0
006053f9 : JZ 0x0060548e
006053ff : MOV EBX,dword ptr [EDI + 0x50]
00605402 : MOV EDX,dword ptr [EDI + 0x68]
00605405 : MOV EAX,dword ptr [EDI + 0x60]
00605408 : LEA ESI,[EDI + 0x50]
0060540b : SHR EBX,0x8
0060540e : MOV dword ptr [ESP + 0x20],EDX
00605412 : MOV dword ptr [ESP + 0x24],EAX
00605416 : CMP EBX,dword ptr [ESI + 0x4]
00605419 : JC 0x00605423
0060541b : PUSH EBX
0060541c : MOV ECX,ESI
0060541e : CALL 0x00602fb0
00605423 : MOV EAX,dword ptr [ESI]
00605425 : MOV ECX,dword ptr [ESI + 0xc]
00605428 : AND EAX,0xff
0060542d : LEA EDX,[EAX + EAX*0x2]
00605430 : MOV EAX,dword ptr [ECX + EBX*0x4]
00605433 : MOV ECX,dword ptr [ESP + 0x20]
00605437 : LEA EAX,[EAX + EDX*0x4]
0060543a : MOV EDX,dword ptr [ESP + 0x24]
0060543e : MOV dword ptr [EAX],ECX
00605440 : MOV ECX,dword ptr [ESP + 0x1c]
00605444 : MOV dword ptr [EAX + 0x4],EDX
00605447 : MOV dword ptr [EAX + 0x8],ECX
0060544a : INC dword ptr [ESI]
0060544c : MOV EBX,dword ptr [ESI]
0060544e : MOV EDX,dword ptr [EDI + 0x68]
00605451 : SHR EBX,0x8
00605454 : MOV dword ptr [ESP + 0x20],EDX
00605458 : CMP EBX,dword ptr [ESI + 0x4]
0060545b : JC 0x00605465
0060545d : PUSH EBX
0060545e : MOV ECX,ESI
00605460 : CALL 0x00602fb0
00605465 : MOV EAX,dword ptr [ESI]
00605467 : MOV ECX,dword ptr [ESI + 0xc]
0060546a : AND EAX,0xff
0060546f : LEA EDX,[EAX + EAX*0x2]
00605472 : MOV EAX,dword ptr [ECX + EBX*0x4]
00605475 : MOV ECX,dword ptr [ESP + 0x20]
00605479 : LEA EAX,[EAX + EDX*0x4]
0060547c : MOV EDX,dword ptr [ESP + 0x1c]
00605480 : MOV dword ptr [EAX],ECX
00605482 : MOV ECX,dword ptr [ESP + 0x14]
00605486 : MOV dword ptr [EAX + 0x4],EDX
00605489 : MOV dword ptr [EAX + 0x8],ECX
0060548c : INC dword ptr [ESI]
0060548e : CMP byte ptr [EBP + 0x37],0x0
00605492 : JZ 0x00605518
00605498 : MOV EBX,dword ptr [EDI + 0x50]
0060549b : MOV EBP,dword ptr [EDI + 0x64]
0060549e : LEA ESI,[EDI + 0x50]
006054a1 : SHR EBX,0x8
006054a4 : CMP EBX,dword ptr [ESI + 0x4]
006054a7 : JC 0x006054b1
006054a9 : PUSH EBX
006054aa : MOV ECX,ESI
006054ac : CALL 0x00602fb0
006054b1 : MOV EAX,dword ptr [ESI]
006054b3 : MOV EDX,dword ptr [ESI + 0xc]
006054b6 : MOV ECX,dword ptr [EDX + EBX*0x4]
006054b9 : MOV EDX,dword ptr [ESP + 0x10]
006054bd : AND EAX,0xff
006054c2 : LEA EAX,[EAX + EAX*0x2]
006054c5 : MOV dword ptr [ECX + EAX*0x4],EBP
006054c8 : LEA EAX,[ECX + EAX*0x4]
006054cb : MOV ECX,dword ptr [ESP + 0x18]
006054cf : MOV dword ptr [EAX + 0x4],EDX
006054d2 : MOV dword ptr [EAX + 0x8],ECX
006054d5 : INC dword ptr [ESI]
006054d7 : MOV EBX,dword ptr [ESI]
006054d9 : MOV EDX,dword ptr [EDI + 0x6c]
006054dc : MOV EBP,dword ptr [EDI + 0x64]
006054df : SHR EBX,0x8
006054e2 : MOV dword ptr [ESP + 0x24],EDX
006054e6 : CMP EBX,dword ptr [ESI + 0x4]
006054e9 : JC 0x006054f3
006054eb : PUSH EBX
006054ec : MOV ECX,ESI
006054ee : CALL 0x00602fb0
006054f3 : MOV EAX,dword ptr [ESI]
006054f5 : MOV ECX,dword ptr [ESI + 0xc]
006054f8 : AND EAX,0xff
006054fd : LEA EDX,[EAX + EAX*0x2]
00605500 : MOV EAX,dword ptr [ECX + EBX*0x4]
00605503 : MOV ECX,dword ptr [ESP + 0x24]
00605507 : LEA EAX,[EAX + EDX*0x4]
0060550a : MOV EDX,dword ptr [ESP + 0x10]
0060550e : MOV dword ptr [EAX],EBP
00605510 : MOV dword ptr [EAX + 0x4],ECX
00605513 : MOV dword ptr [EAX + 0x8],EDX
00605516 : INC dword ptr [ESI]
00605518 : MOV EAX,dword ptr [ESP + 0x1c]
0060551c : MOV ECX,dword ptr [ESP + 0x14]
00605520 : MOV EDX,dword ptr [ESP + 0x18]
00605524 : MOV dword ptr [EDI + 0x60],EAX
00605527 : MOV EAX,dword ptr [ESP + 0x10]
0060552b : MOV dword ptr [EDI + 0x68],ECX
0060552e : MOV dword ptr [EDI + 0x64],EDX
00605531 : MOV dword ptr [EDI + 0x6c],EAX
00605534 : POP EDI
00605535 : POP ESI
00605536 : POP EBP
00605537 : POP EBX
00605538 : ADD ESP,0xf8
0060553e : RET 0x10
