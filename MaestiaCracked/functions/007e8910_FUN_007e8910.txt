PROGRAM  : Maestia.exe
FUNCTION : FUN_007e8910
ENTRY    : 007e8910
BODY     : [[007e8910, 007e8a83] [007e8ac4, 007e8b08] [007e8b10, 007e8d9c]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x007e8a30) */
/* WARNING: Removing unreachable block (ram,0x007e89fb) */

void FUN_007e8910(uint param_1)

{
  short sVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  short *psVar5;
  uint uVar6;
  undefined4 *puVar7;
  int unaff_EDI;
  undefined1 auStack_190 [4];
  int iStack_18c;
  uint uStack_188;
  uint uStack_184;
  undefined1 auStack_180 [4];
  undefined2 uStack_17c;
  undefined4 uStack_16c;
  uint uStack_168;
  undefined1 auStack_164 [4];
  undefined2 uStack_160;
  undefined4 uStack_150;
  uint uStack_14c;
  undefined4 uStack_148;
  undefined4 uStack_144;
  undefined4 uStack_140;
  undefined4 uStack_13c;
  undefined4 uStack_138;
  undefined4 uStack_134;
  undefined4 uStack_130;
  undefined4 uStack_12c;
  undefined4 uStack_128;
  undefined4 uStack_124;
  short sStack_120;
  undefined1 auStack_11e [258];
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b3caa7;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_190;
  ExceptionList = &local_14;
  FUN_008018d0(L"[AvaTerrainSceneMgr::SetViewPatchCnt]",DAT_00d66fa0 ^ (uint)&stack0xfffffe68);
  if (((*(char *)(unaff_EDI + 0x2ab4) == '\0') && (*(char *)(unaff_EDI + 0x2a94) != '\0')) &&
     (param_1 < 9)) {
    param_1 = 9;
  }
  if ((param_1 & 1) == 0) {
    param_1 = param_1 + 1;
  }
  if ((*(int *)(unaff_EDI + 0x18c) != 0) || (*(uint *)(unaff_EDI + 0x184) != param_1)) {
    puVar7 = *(undefined4 **)(unaff_EDI + 0x158);
    *(uint *)(unaff_EDI + 0x184) = param_1;
    *(undefined4 *)(unaff_EDI + 0x18c) = 0;
    if (puVar7 != *(undefined4 **)(unaff_EDI + 0x15c)) {
      do {
        (**(code **)(*(int *)*puVar7 + 0xfc))();
        puVar7 = puVar7 + 1;
      } while (puVar7 != *(undefined4 **)(unaff_EDI + 0x15c));
    }
    if (*(int *)(unaff_EDI + 0x158) != *(int *)(unaff_EDI + 0x15c)) {
      *(int *)(unaff_EDI + 0x15c) = *(int *)(unaff_EDI + 0x158);
    }
    if (*(int *)(unaff_EDI + 0x148) != *(int *)(unaff_EDI + 0x14c)) {
      *(int *)(unaff_EDI + 0x14c) = *(int *)(unaff_EDI + 0x148);
    }
    FUN_0045c8f0(*(int *)(unaff_EDI + 0x184) * *(int *)(unaff_EDI + 0x184));
    FUN_004644b0(*(int *)(unaff_EDI + 0x184) * *(int *)(unaff_EDI + 0x184));
    if (*(int *)(unaff_EDI + 0xf8) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (*(int *)(unaff_EDI + 0xe4) != 0) {
      FUN_007796a0();
    }
    if (*(undefined4 **)(unaff_EDI + 0xe4) != (undefined4 *)0x0) {
      (**(code **)**(undefined4 **)(unaff_EDI + 0xe4))(1);
      *(undefined4 *)(unaff_EDI + 0xe4) = 0;
    }
    if (*(int *)(unaff_EDI + 0x24) != 0) {
      FUN_007d7890();
    }
    uStack_184 = 0;
    if (*(int *)(unaff_EDI + 0x184) != 0) {
      do {
        uStack_188 = 0;
        if (*(int *)(unaff_EDI + 0x184) != 0) {
          do {
            FUN_0040e4a0(L"PatchNode_%d_%d_s",uStack_184,uStack_188);
            psVar5 = &sStack_120;
            uStack_14c = 7;
            uStack_150 = 0;
            uStack_160 = 0;
            do {
              sVar1 = *psVar5;
              psVar5 = psVar5 + 1;
            } while (sVar1 != 0);
            FUN_00406360(&sStack_120,(int)psVar5 - (int)auStack_11e >> 1);
            uStack_c = 0;
            iVar4 = (**(code **)(**(int **)(unaff_EDI + 0x24) + 0x3c))(auStack_164);
            uStack_c = 0xffffffff;
            if (7 < uStack_14c) {
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            uStack_14c = 7;
            uStack_150 = 0;
            uStack_160 = 0;
            if (iVar4 == 0) {
              uStack_168 = 7;
              psVar5 = &sStack_120;
              uStack_17c = 0;
              uStack_16c = 0;
              do {
                sVar1 = *psVar5;
                psVar5 = psVar5 + 1;
              } while (sVar1 != 0);
              FUN_00406360(&sStack_120,(int)psVar5 - (int)auStack_11e >> 1);
              uStack_c = 1;
              uStack_13c = 0x3f800000;
              uStack_138 = 0x3f800000;
              uStack_134 = 0x3f800000;
              uStack_130 = 0;
              uStack_12c = 0;
              uStack_128 = 0;
              uStack_124 = 0x3f800000;
              uStack_148 = 0;
              uStack_144 = 0;
              uStack_140 = 0;
              iStack_18c = (**(code **)(**(int **)(unaff_EDI + 0x24) + 0x20))
                                     (auStack_180,&uStack_148,&uStack_130,&uStack_13c);
              iVar4 = *(int *)(unaff_EDI + 0x158);
              if (iVar4 == 0) {
                uVar6 = 0;
              }
              else {
                uVar6 = *(int *)(unaff_EDI + 0x160) - iVar4 >> 2;
              }
              piVar2 = *(int **)(unaff_EDI + 0x15c);
              if ((uint)((int)piVar2 - iVar4 >> 2) < uVar6) {
                *piVar2 = iStack_18c;
                *(int **)(unaff_EDI + 0x15c) = piVar2 + 1;
              }
              else {
                FUN_0042fe80(unaff_EDI + 0x154,piVar2,&iStack_18c);
              }
              uStack_c = 0xffffffff;
              if (7 < uStack_168) {
                    /* WARNING: Subroutine does not return */
                FUN_006f04e0();
              }
              uStack_168 = 7;
              uStack_16c = 0;
              uStack_17c = 0;
            }
            else {
              iVar3 = *(int *)(unaff_EDI + 0x158);
              if (iVar3 == 0) {
                uVar6 = 0;
              }
              else {
                uVar6 = *(int *)(unaff_EDI + 0x160) - iVar3 >> 2;
              }
              piVar2 = *(int **)(unaff_EDI + 0x15c);
              iStack_18c = iVar4;
              if ((uint)((int)piVar2 - iVar3 >> 2) < uVar6) {
                *piVar2 = iVar4;
                *(int **)(unaff_EDI + 0x15c) = piVar2 + 1;
              }
              else {
                FUN_0042fe80(unaff_EDI + 0x154,piVar2,&iStack_18c);
              }
            }
            uStack_188 = uStack_188 + 1;
          } while (uStack_188 < *(uint *)(unaff_EDI + 0x184));
        }
        uStack_184 = uStack_184 + 1;
      } while (uStack_184 < *(uint *)(unaff_EDI + 0x184));
    }
    FUN_007df780();
    FUN_007e6170();
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_190);
  return;
}



============================================================
DISASSEMBLY
============================================================
007e8910 : PUSH EBP
007e8911 : MOV EBP,ESP
007e8913 : AND ESP,0xfffffff8
007e8916 : PUSH -0x1
007e8918 : PUSH 0xb3caa7
007e891d : MOV EAX,FS:[0x0]
007e8923 : PUSH EAX
007e8924 : SUB ESP,0x17c
007e892a : MOV EAX,[0x00d66fa0]
007e892f : XOR EAX,ESP
007e8931 : MOV dword ptr [ESP + 0x174],EAX
007e8938 : PUSH EBX
007e8939 : PUSH ESI
007e893a : MOV EAX,[0x00d66fa0]
007e893f : XOR EAX,ESP
007e8941 : PUSH EAX
007e8942 : LEA EAX,[ESP + 0x188]
007e8949 : MOV FS:[0x0],EAX
007e894f : MOV ESI,dword ptr [0x00da98e8]
007e8955 : PUSH 0xc22df0
007e895a : CALL 0x008018d0
007e895f : MOV AL,byte ptr [EDI + 0x2ab4]
007e8965 : XOR EBX,EBX
007e8967 : ADD ESP,0x4
007e896a : CMP AL,BL
007e896c : JNZ 0x007e8985
007e896e : CMP byte ptr [EDI + 0x2a94],BL
007e8974 : JZ 0x007e8985
007e8976 : MOV EAX,dword ptr [EBP + 0x8]
007e8979 : CMP EAX,0x9
007e897c : JNC 0x007e8988
007e897e : MOV dword ptr [EBP + 0x8],0x9
007e8985 : MOV EAX,dword ptr [EBP + 0x8]
007e8988 : TEST AL,0x1
007e898a : JNZ 0x007e898d
007e898c : INC EAX
007e898d : CMP dword ptr [EDI + 0x18c],EBX
007e8993 : JNZ 0x007e89a1
007e8995 : CMP dword ptr [EDI + 0x184],EAX
007e899b : JZ 0x007e8d78
007e89a1 : MOV ESI,dword ptr [EDI + 0x158]
007e89a7 : MOV dword ptr [EDI + 0x184],EAX
007e89ad : MOV EAX,dword ptr [EDI + 0x15c]
007e89b3 : MOV dword ptr [EDI + 0x18c],EBX
007e89b9 : CMP ESI,EAX
007e89bb : JZ 0x007e89d7
007e89bd : LEA ECX,[ECX]
007e89c0 : MOV ECX,dword ptr [ESI]
007e89c2 : MOV EAX,dword ptr [ECX]
007e89c4 : MOV EDX,dword ptr [EAX + 0xfc]
007e89ca : CALL EDX
007e89cc : ADD ESI,0x4
007e89cf : CMP ESI,dword ptr [EDI + 0x15c]
007e89d5 : JNZ 0x007e89c0
007e89d7 : MOV ECX,dword ptr [EDI + 0x15c]
007e89dd : MOV ESI,dword ptr [EDI + 0x158]
007e89e3 : CMP ESI,ECX
007e89e5 : JZ 0x007e8a13
007e89e7 : MOV EAX,ECX
007e89e9 : SUB EAX,ECX
007e89eb : SAR EAX,0x2
007e89ee : LEA EDX,[EAX*0x4 + 0x0]
007e89f5 : ADD ESI,EDX
007e89f7 : CMP EAX,EBX
007e89f9 : JLE 0x007e8a0d
007e89fb : MOV EAX,dword ptr [EDI + 0x158]
007e8a01 : PUSH EDX
007e8a02 : PUSH ECX
007e8a03 : PUSH EDX
007e8a04 : PUSH EAX
007e8a05 : CALL 0x00634101
007e8a0a : ADD ESP,0x10
007e8a0d : MOV dword ptr [EDI + 0x15c],ESI
007e8a13 : MOV ESI,dword ptr [EDI + 0x14c]
007e8a19 : MOV EDX,dword ptr [EDI + 0x148]
007e8a1f : LEA ECX,[EDI + 0x144]
007e8a25 : CMP EDX,ESI
007e8a27 : JZ 0x007e8a4d
007e8a29 : MOV EAX,ESI
007e8a2b : CMP ESI,ESI
007e8a2d : JZ 0x007e8a44
007e8a2f : NOP
007e8a30 : MOV ECX,dword ptr [EAX]
007e8a32 : MOV dword ptr [EDX],ECX
007e8a34 : MOV ECX,dword ptr [EAX + 0x4]
007e8a37 : MOV dword ptr [EDX + 0x4],ECX
007e8a3a : ADD EAX,0x8
007e8a3d : ADD EDX,0x8
007e8a40 : CMP EAX,ESI
007e8a42 : JNZ 0x007e8a30
007e8a44 : LEA ECX,[EDI + 0x144]
007e8a4a : MOV dword ptr [ECX + 0x8],EDX
007e8a4d : MOV EAX,dword ptr [EDI + 0x184]
007e8a53 : MOV EDX,EAX
007e8a55 : IMUL EDX,EAX
007e8a58 : PUSH EDX
007e8a59 : CALL 0x0045c8f0
007e8a5e : MOV EAX,dword ptr [EDI + 0x184]
007e8a64 : MOV ECX,EAX
007e8a66 : IMUL ECX,EAX
007e8a69 : PUSH ECX
007e8a6a : LEA ECX,[EDI + 0x154]
007e8a70 : CALL 0x004644b0
007e8a75 : MOV ECX,dword ptr [EDI + 0xf8]
007e8a7b : CMP ECX,EBX
007e8a7d : JZ 0x007e8ac4
007e8a7f : CALL 0x006f04e0
007e8ac4 : MOV ESI,dword ptr [EDI + 0xe4]
007e8aca : CMP ESI,EBX
007e8acc : JZ 0x007e8ad3
007e8ace : CALL 0x007796a0
007e8ad3 : MOV ECX,dword ptr [EDI + 0xe4]
007e8ad9 : CMP ECX,EBX
007e8adb : JZ 0x007e8aeb
007e8add : MOV EAX,dword ptr [ECX]
007e8adf : MOV EDX,dword ptr [EAX]
007e8ae1 : PUSH 0x1
007e8ae3 : CALL EDX
007e8ae5 : MOV dword ptr [EDI + 0xe4],EBX
007e8aeb : MOV ECX,dword ptr [EDI + 0x24]
007e8aee : CMP ECX,EBX
007e8af0 : JZ 0x007e8af7
007e8af2 : CALL 0x007d7890
007e8af7 : MOV dword ptr [ESP + 0x18],EBX
007e8afb : CMP dword ptr [EDI + 0x184],EBX
007e8b01 : JBE 0x007e8d6a
007e8b07 : JMP 0x007e8b10
007e8b10 : XOR EAX,EAX
007e8b12 : MOV dword ptr [ESP + 0x14],EAX
007e8b16 : CMP dword ptr [EDI + 0x184],EBX
007e8b1c : JBE 0x007e8d55
007e8b22 : PUSH EAX
007e8b23 : MOV EAX,dword ptr [ESP + 0x1c]
007e8b27 : PUSH EAX
007e8b28 : PUSH 0xc22e3c
007e8b2d : LEA EDX,[ESP + 0x88]
007e8b34 : CALL 0x0040e4a0
007e8b39 : ADD ESP,0xc
007e8b3c : XOR ECX,ECX
007e8b3e : LEA EAX,[ESP + 0x7c]
007e8b42 : MOV dword ptr [ESP + 0x50],0x7
007e8b4a : MOV dword ptr [ESP + 0x4c],EBX
007e8b4e : MOV word ptr [ESP + 0x3c],CX
007e8b53 : LEA EDX,[EAX + 0x2]
007e8b56 : MOV CX,word ptr [EAX]
007e8b59 : ADD EAX,0x2
007e8b5c : CMP CX,BX
007e8b5f : JNZ 0x007e8b56
007e8b61 : SUB EAX,EDX
007e8b63 : SAR EAX,0x1
007e8b65 : PUSH EAX
007e8b66 : LEA EDX,[ESP + 0x80]
007e8b6d : PUSH EDX
007e8b6e : LEA ECX,[ESP + 0x40]
007e8b72 : CALL 0x00406360
007e8b77 : MOV dword ptr [ESP + 0x190],EBX
007e8b7e : MOV ECX,dword ptr [EDI + 0x24]
007e8b81 : MOV EAX,dword ptr [ECX]
007e8b83 : MOV EAX,dword ptr [EAX + 0x3c]
007e8b86 : LEA EDX,[ESP + 0x38]
007e8b8a : PUSH EDX
007e8b8b : CALL EAX
007e8b8d : MOV ESI,EAX
007e8b8f : MOV dword ptr [ESP + 0x190],0xffffffff
007e8b9a : CMP dword ptr [ESP + 0x50],0x8
007e8b9f : JC 0x007e8baa
007e8ba1 : MOV ECX,dword ptr [ESP + 0x3c]
007e8ba5 : CALL 0x006f04e0
007e8baa : XOR ECX,ECX
007e8bac : MOV EAX,0x7
007e8bb1 : MOV dword ptr [ESP + 0x50],EAX
007e8bb5 : MOV dword ptr [ESP + 0x4c],EBX
007e8bb9 : MOV word ptr [ESP + 0x3c],CX
007e8bbe : CMP ESI,EBX
007e8bc0 : JNZ 0x007e8cf1
007e8bc6 : XOR EDX,EDX
007e8bc8 : MOV dword ptr [ESP + 0x34],EAX
007e8bcc : LEA EAX,[ESP + 0x7c]
007e8bd0 : MOV word ptr [ESP + 0x20],DX
007e8bd5 : MOV dword ptr [ESP + 0x30],EBX
007e8bd9 : LEA EDX,[EAX + 0x2]
007e8bdc : LEA ESP,[ESP]
007e8be0 : MOV CX,word ptr [EAX]
007e8be3 : ADD EAX,0x2
007e8be6 : CMP CX,BX
007e8be9 : JNZ 0x007e8be0
007e8beb : SUB EAX,EDX
007e8bed : SAR EAX,0x1
007e8bef : PUSH EAX
007e8bf0 : LEA EAX,[ESP + 0x80]
007e8bf7 : PUSH EAX
007e8bf8 : LEA ECX,[ESP + 0x24]
007e8bfc : CALL 0x00406360
007e8c01 : MOV dword ptr [ESP + 0x190],0x1
007e8c0c : XORPS XMM0,XMM0
007e8c0f : MOVSS XMM1,dword ptr [0x00c10fc4]
007e8c17 : MOV ECX,dword ptr [EDI + 0x24]
007e8c1a : LEA EAX,[ESP + 0x60]
007e8c1e : PUSH EAX
007e8c1f : LEA EAX,[ESP + 0x70]
007e8c23 : PUSH EAX
007e8c24 : LEA EAX,[ESP + 0x5c]
007e8c28 : PUSH EAX
007e8c29 : MOVSS dword ptr [ESP + 0x6c],XMM1
007e8c2f : MOVSS dword ptr [ESP + 0x70],XMM1
007e8c35 : MOVSS dword ptr [ESP + 0x74],XMM1
007e8c3b : MOVSS dword ptr [ESP + 0x78],XMM0
007e8c41 : MOVSS dword ptr [ESP + 0x7c],XMM0
007e8c47 : MOVSS dword ptr [ESP + 0x80],XMM0
007e8c50 : MOVSS dword ptr [ESP + 0x84],XMM1
007e8c59 : MOVSS dword ptr [ESP + 0x60],XMM0
007e8c5f : MOVSS dword ptr [ESP + 0x64],XMM0
007e8c65 : MOVSS dword ptr [ESP + 0x68],XMM0
007e8c6b : MOV EDX,dword ptr [ECX]
007e8c6d : MOV EDX,dword ptr [EDX + 0x20]
007e8c70 : LEA EAX,[ESP + 0x28]
007e8c74 : PUSH EAX
007e8c75 : CALL EDX
007e8c77 : MOV ECX,dword ptr [EDI + 0x158]
007e8c7d : MOV dword ptr [ESP + 0x10],EAX
007e8c81 : LEA EAX,[EDI + 0x154]
007e8c87 : CMP ECX,EBX
007e8c89 : JNZ 0x007e8c8f
007e8c8b : XOR EDX,EDX
007e8c8d : JMP 0x007e8c97
007e8c8f : MOV EDX,dword ptr [EAX + 0xc]
007e8c92 : SUB EDX,ECX
007e8c94 : SAR EDX,0x2
007e8c97 : MOV ESI,dword ptr [EAX + 0x8]
007e8c9a : MOV EBX,ESI
007e8c9c : SUB EBX,ECX
007e8c9e : SAR EBX,0x2
007e8ca1 : CMP EBX,EDX
007e8ca3 : JNC 0x007e8cb3
007e8ca5 : MOV ECX,dword ptr [ESP + 0x10]
007e8ca9 : MOV dword ptr [ESI],ECX
007e8cab : ADD ESI,0x4
007e8cae : MOV dword ptr [EAX + 0x8],ESI
007e8cb1 : JMP 0x007e8cbf
007e8cb3 : LEA EDX,[ESP + 0x10]
007e8cb7 : PUSH EDX
007e8cb8 : PUSH ESI
007e8cb9 : PUSH EAX
007e8cba : CALL 0x0042fe80
007e8cbf : MOV dword ptr [ESP + 0x190],0xffffffff
007e8cca : CMP dword ptr [ESP + 0x34],0x8
007e8ccf : JC 0x007e8cda
007e8cd1 : MOV ECX,dword ptr [ESP + 0x20]
007e8cd5 : CALL 0x006f04e0
007e8cda : XOR EBX,EBX
007e8cdc : XOR EAX,EAX
007e8cde : MOV dword ptr [ESP + 0x34],0x7
007e8ce6 : MOV dword ptr [ESP + 0x30],EBX
007e8cea : MOV word ptr [ESP + 0x20],AX
007e8cef : JMP 0x007e8d40
007e8cf1 : MOV EDX,dword ptr [EDI + 0x158]
007e8cf7 : MOV dword ptr [ESP + 0x10],ESI
007e8cfb : CMP EDX,EBX
007e8cfd : JNZ 0x007e8d03
007e8cff : XOR EAX,EAX
007e8d01 : JMP 0x007e8d0e
007e8d03 : MOV EAX,dword ptr [EDI + 0x160]
007e8d09 : SUB EAX,EDX
007e8d0b : SAR EAX,0x2
007e8d0e : MOV ECX,dword ptr [EDI + 0x15c]
007e8d14 : MOV EBX,ECX
007e8d16 : SUB EBX,EDX
007e8d18 : SAR EBX,0x2
007e8d1b : CMP EBX,EAX
007e8d1d : JNC 0x007e8d2c
007e8d1f : MOV dword ptr [ECX],ESI
007e8d21 : ADD ECX,0x4
007e8d24 : MOV dword ptr [EDI + 0x15c],ECX
007e8d2a : JMP 0x007e8d3e
007e8d2c : LEA EDX,[ESP + 0x10]
007e8d30 : PUSH EDX
007e8d31 : PUSH ECX
007e8d32 : LEA EAX,[EDI + 0x154]
007e8d38 : PUSH EAX
007e8d39 : CALL 0x0042fe80
007e8d3e : XOR EBX,EBX
007e8d40 : MOV EAX,dword ptr [ESP + 0x14]
007e8d44 : INC EAX
007e8d45 : MOV dword ptr [ESP + 0x14],EAX
007e8d49 : CMP EAX,dword ptr [EDI + 0x184]
007e8d4f : JC 0x007e8b22
007e8d55 : MOV EAX,dword ptr [ESP + 0x18]
007e8d59 : INC EAX
007e8d5a : MOV dword ptr [ESP + 0x18],EAX
007e8d5e : CMP EAX,dword ptr [EDI + 0x184]
007e8d64 : JC 0x007e8b10
007e8d6a : MOV ESI,EDI
007e8d6c : CALL 0x007df780
007e8d71 : MOV ECX,EDI
007e8d73 : CALL 0x007e6170
007e8d78 : MOV ECX,dword ptr [ESP + 0x188]
007e8d7f : MOV dword ptr FS:[0x0],ECX
007e8d86 : POP ECX
007e8d87 : POP ESI
007e8d88 : POP EBX
007e8d89 : MOV ECX,dword ptr [ESP + 0x174]
007e8d90 : XOR ECX,ESP
007e8d92 : CALL 0x00633e6b
007e8d97 : MOV ESP,EBP
007e8d99 : POP EBP
007e8d9a : RET 0x4
