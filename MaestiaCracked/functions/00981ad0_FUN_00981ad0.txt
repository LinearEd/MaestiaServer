PROGRAM  : Maestia.exe
FUNCTION : FUN_00981ad0
ENTRY    : 00981ad0
BODY     : [[00981ad0, 00981d4e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00981ad0(undefined4 param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  undefined4 *puVar5;
  int iVar6;
  int iVar7;
  undefined4 uVar8;
  int *piVar9;
  int unaff_ESI;
  char *pcVar10;
  char *pcVar11;
  uint local_c;
  
  if (*(char *)(unaff_ESI + 0xd4) != '\x01') {
    return;
  }
  *(undefined1 *)(unaff_ESI + 0xd4) = 0;
  FUN_009802e0(unaff_ESI);
  fVar1 = *(float *)(unaff_ESI + 200);
  fVar2 = *(float *)(unaff_ESI + 0x40);
  fVar3 = *(float *)(unaff_ESI + 0x44);
  fVar4 = *(float *)(unaff_ESI + 0xd0);
  if ((char)param_1 == '\0') {
    if ((*DAT_00da9894 != 0) &&
       (puVar5 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar5 != (undefined4 *)0x0)) {
      (**(code **)*puVar5)("MinimapcheckPoint");
    }
    if ((*DAT_00da9894 != 0) &&
       (puVar5 = *(undefined4 **)(*DAT_00da9894 + 0x114), puVar5 != (undefined4 *)0x0)) {
      (**(code **)*puVar5)("ZoneMapcheckPoint");
    }
    if (*(int *)(unaff_ESI + 0x138) != *(int *)(unaff_ESI + 0x13c)) {
      local_c = local_c & 0xffffff00;
      uVar8 = FUN_00424ee0(param_1,param_1,local_c);
      *(undefined4 *)(unaff_ESI + 0x13c) = uVar8;
    }
    *(undefined4 *)(unaff_ESI + 0x144) = 0;
  }
  iVar6 = *(int *)(unaff_ESI + 0x144);
  *(int *)(unaff_ESI + 0x144) = iVar6 + 1;
  iVar7 = *DAT_00da9894;
  if ((char)param_1 == '\0') {
    if ((iVar7 != 0) && (piVar9 = *(int **)(iVar7 + 0x114), piVar9 != (int *)0x0)) {
      (**(code **)(*piVar9 + 4))(piVar9,"MinimapSetMovePoint",&DAT_00c80180,0,0,0,0);
    }
    if (((*(short *)(unaff_ESI + 0x6e) != *(short *)(unaff_ESI + 0x6c)) || (*DAT_00da9894 == 0)) ||
       (piVar9 = *(int **)(*DAT_00da9894 + 0x114), piVar9 == (int *)0x0)) goto LAB_00981d39;
    pcVar11 = "%f%f%d";
    pcVar10 = "zonemap.SetLargeMapMovePoint";
  }
  else {
    if ((iVar7 != 0) && (piVar9 = *(int **)(iVar7 + 0x114), piVar9 != (int *)0x0)) {
      (**(code **)(*piVar9 + 4))(piVar9,"MinimapSetMovePoint",&DAT_00c8013c,0,0,0,0);
    }
    if (((*(short *)(unaff_ESI + 0x6e) != *(short *)(unaff_ESI + 0x6c)) || (*DAT_00da9894 == 0)) ||
       (piVar9 = *(int **)(*DAT_00da9894 + 0x114), piVar9 == (int *)0x0)) goto LAB_00981d39;
    pcVar11 = "%f%f%d";
    pcVar10 = "zonemap.SetLargeMapMoveAddPoint";
  }
  (**(code **)(*piVar9 + 4))
            (piVar9,pcVar10,pcVar11,(double)(int)((fVar1 / fVar2) * 462.0),
             (double)(int)(((fVar3 - fVar4) / fVar3) * 462.0),iVar6);
LAB_00981d39:
  FUN_00423770();
  return;
}



============================================================
DISASSEMBLY
============================================================
00981ad0 : PUSH EBP
00981ad1 : MOV EBP,ESP
00981ad3 : SUB ESP,0x2c
00981ad6 : CMP byte ptr [ESI + 0xd4],0x1
00981add : PUSH EBX
00981ade : PUSH EDI
00981adf : JNZ 0x00981d47
00981ae5 : XOR EDI,EDI
00981ae7 : LEA EBX,[ESI + 0xc8]
00981aed : PUSH ESI
00981aee : LEA ECX,[EBP + -0x10]
00981af1 : MOV EDX,EBX
00981af3 : MOV byte ptr [ESI + 0xd4],0x0
00981afa : MOV dword ptr [EBP + -0xc],EDI
00981afd : MOV dword ptr [EBP + -0x10],EDI
00981b00 : CALL 0x009802e0
00981b05 : CMP byte ptr [EBP + 0x8],0x0
00981b09 : MOVSS XMM0,dword ptr [EBX]
00981b0d : DIVSS XMM0,dword ptr [ESI + 0x40]
00981b12 : MOVSS XMM1,dword ptr [0x00cdf34c]
00981b1a : MULSS XMM0,XMM1
00981b1e : CVTTSS2SI EAX,XMM0
00981b22 : MOVSS XMM0,dword ptr [ESI + 0x44]
00981b27 : MOVAPS XMM2,XMM0
00981b2a : SUBSS XMM2,dword ptr [ESI + 0xd0]
00981b32 : DIVSS XMM2,XMM0
00981b36 : MULSS XMM2,XMM1
00981b3a : CVTTSS2SI ECX,XMM2
00981b3e : MOV dword ptr [EBP + -0x18],EAX
00981b41 : MOV dword ptr [EBP + -0x14],ECX
00981b44 : JNZ 0x00981bbf
00981b46 : MOV EDX,dword ptr [0x00da9894]
00981b4c : MOV EAX,dword ptr [EDX]
00981b4e : CMP EAX,EDI
00981b50 : JZ 0x00981b67
00981b52 : MOV ECX,dword ptr [EAX + 0x114]
00981b58 : CMP ECX,EDI
00981b5a : JZ 0x00981b67
00981b5c : MOV EAX,dword ptr [ECX]
00981b5e : MOV EDX,dword ptr [EAX]
00981b60 : PUSH 0xc80224
00981b65 : CALL EDX
00981b67 : MOV EAX,[0x00da9894]
00981b6c : MOV EAX,dword ptr [EAX]
00981b6e : CMP EAX,EDI
00981b70 : JZ 0x00981b87
00981b72 : MOV ECX,dword ptr [EAX + 0x114]
00981b78 : CMP ECX,EDI
00981b7a : JZ 0x00981b87
00981b7c : MOV EDX,dword ptr [ECX]
00981b7e : MOV EAX,dword ptr [EDX]
00981b80 : PUSH 0xc80238
00981b85 : CALL EAX
00981b87 : MOV ECX,dword ptr [ESI + 0x13c]
00981b8d : MOV EAX,dword ptr [ESI + 0x138]
00981b93 : CMP EAX,ECX
00981b95 : JZ 0x00981bb9
00981b97 : MOV byte ptr [EBP + -0x8],0x0
00981b9b : MOV EDX,dword ptr [EBP + -0x8]
00981b9e : PUSH EDX
00981b9f : MOV EDX,dword ptr [EBP + 0x8]
00981ba2 : PUSH EDX
00981ba3 : MOV EDX,dword ptr [EBP + 0x8]
00981ba6 : PUSH EDX
00981ba7 : MOV EDI,ECX
00981ba9 : CALL 0x00424ee0
00981bae : ADD ESP,0xc
00981bb1 : MOV dword ptr [ESI + 0x13c],EAX
00981bb7 : XOR EDI,EDI
00981bb9 : MOV dword ptr [ESI + 0x144],EDI
00981bbf : MOVSS XMM0,dword ptr [EBX]
00981bc3 : MOV EAX,dword ptr [ESI + 0x144]
00981bc9 : MOVSS dword ptr [EBP + -0x24],XMM0
00981bce : MOVSS XMM0,dword ptr [EBX + 0x4]
00981bd3 : MOV dword ptr [EBP + -0x28],EAX
00981bd6 : INC EAX
00981bd7 : CMP byte ptr [EBP + 0x8],0x0
00981bdb : MOVSS dword ptr [EBP + -0x20],XMM0
00981be0 : MOVSS XMM0,dword ptr [EBX + 0x8]
00981be5 : MOV dword ptr [ESI + 0x144],EAX
00981beb : MOV EAX,[0x00da9894]
00981bf0 : MOVSS dword ptr [EBP + -0x1c],XMM0
00981bf5 : MOV EAX,dword ptr [EAX]
00981bf7 : JZ 0x00981c9e
00981bfd : CMP EAX,EDI
00981bff : JZ 0x00981c3f
00981c01 : MOV EAX,dword ptr [EAX + 0x114]
00981c07 : CMP EAX,EDI
00981c09 : JZ 0x00981c3f
00981c0b : CVTSI2SS XMM0,dword ptr [EBP + -0xc]
00981c10 : MOV ECX,dword ptr [EAX]
00981c12 : MOV EDX,dword ptr [ECX + 0x4]
00981c15 : SUB ESP,0x10
00981c18 : CVTPS2PD XMM0,XMM0
00981c1b : MOVSD qword ptr [ESP + 0x8],XMM0
00981c21 : CVTSI2SS XMM0,dword ptr [EBP + -0x10]
00981c26 : CVTSS2SD XMM0,XMM0
00981c2a : MOVSD qword ptr [ESP],XMM0
00981c2f : PUSH 0xc8013c
00981c34 : PUSH 0xc80144
00981c39 : PUSH EAX
00981c3a : CALL EDX
00981c3c : ADD ESP,0x1c
00981c3f : MOV AX,word ptr [ESI + 0x6e]
00981c43 : CMP AX,word ptr [ESI + 0x6c]
00981c47 : JNZ 0x00981d39
00981c4d : MOV ECX,dword ptr [0x00da9894]
00981c53 : MOV EAX,dword ptr [ECX]
00981c55 : CMP EAX,EDI
00981c57 : JZ 0x00981d39
00981c5d : MOV EAX,dword ptr [EAX + 0x114]
00981c63 : CMP EAX,EDI
00981c65 : JZ 0x00981d39
00981c6b : MOV ECX,dword ptr [EBP + -0x28]
00981c6e : CVTSI2SS XMM0,dword ptr [EBP + -0x14]
00981c73 : PUSH ECX
00981c74 : SUB ESP,0x10
00981c77 : CVTSS2SD XMM0,XMM0
00981c7b : MOVSD qword ptr [ESP + 0x8],XMM0
00981c81 : CVTSI2SS XMM0,dword ptr [EBP + -0x18]
00981c86 : CVTSS2SD XMM0,XMM0
00981c8a : MOVSD qword ptr [ESP],XMM0
00981c8f : PUSH 0xc80158
00981c94 : PUSH 0xc80160
00981c99 : JMP 0x00981d2e
00981c9e : CMP EAX,EDI
00981ca0 : JZ 0x00981ce0
00981ca2 : MOV EAX,dword ptr [EAX + 0x114]
00981ca8 : CMP EAX,EDI
00981caa : JZ 0x00981ce0
00981cac : CVTSI2SS XMM0,dword ptr [EBP + -0xc]
00981cb1 : MOV ECX,dword ptr [EAX]
00981cb3 : MOV EDX,dword ptr [ECX + 0x4]
00981cb6 : SUB ESP,0x10
00981cb9 : CVTPS2PD XMM0,XMM0
00981cbc : MOVSD qword ptr [ESP + 0x8],XMM0
00981cc2 : CVTSI2SS XMM0,dword ptr [EBP + -0x10]
00981cc7 : CVTSS2SD XMM0,XMM0
00981ccb : MOVSD qword ptr [ESP],XMM0
00981cd0 : PUSH 0xc80180
00981cd5 : PUSH 0xc80188
00981cda : PUSH EAX
00981cdb : CALL EDX
00981cdd : ADD ESP,0x1c
00981ce0 : MOV AX,word ptr [ESI + 0x6e]
00981ce4 : CMP AX,word ptr [ESI + 0x6c]
00981ce8 : JNZ 0x00981d39
00981cea : MOV ECX,dword ptr [0x00da9894]
00981cf0 : MOV EAX,dword ptr [ECX]
00981cf2 : CMP EAX,EDI
00981cf4 : JZ 0x00981d39
00981cf6 : MOV EAX,dword ptr [EAX + 0x114]
00981cfc : CMP EAX,EDI
00981cfe : JZ 0x00981d39
00981d00 : MOV ECX,dword ptr [EBP + -0x28]
00981d03 : CVTSI2SS XMM0,dword ptr [EBP + -0x14]
00981d08 : PUSH ECX
00981d09 : SUB ESP,0x10
00981d0c : CVTSS2SD XMM0,XMM0
00981d10 : MOVSD qword ptr [ESP + 0x8],XMM0
00981d16 : CVTSI2SS XMM0,dword ptr [EBP + -0x18]
00981d1b : CVTSS2SD XMM0,XMM0
00981d1f : MOVSD qword ptr [ESP],XMM0
00981d24 : PUSH 0xc8019c
00981d29 : PUSH 0xc801a4
00981d2e : MOV EDX,dword ptr [EAX]
00981d30 : MOV EDX,dword ptr [EDX + 0x4]
00981d33 : PUSH EAX
00981d34 : CALL EDX
00981d36 : ADD ESP,0x20
00981d39 : LEA EDI,[ESI + 0x134]
00981d3f : LEA ECX,[EBP + -0x28]
00981d42 : CALL 0x00423770
00981d47 : POP EDI
00981d48 : POP EBX
00981d49 : MOV ESP,EBP
00981d4b : POP EBP
00981d4c : RET 0x4
