PROGRAM  : Maestia.exe
FUNCTION : FUN_00a8cfb0
ENTRY    : 00a8cfb0
BODY     : [[00a8cfb0, 00a8d2a4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a8cfb0(int param_1)

{
  undefined1 uVar1;
  wchar_t wVar2;
  uint uVar3;
  int iVar4;
  DWORD DVar5;
  int *piVar6;
  wchar_t *pwVar7;
  undefined1 uVar8;
  int in_ECX;
  wchar_t *pwVar9;
  wchar_t *pwVar10;
  bool bVar11;
  char *pcVar12;
  undefined *puVar13;
  undefined4 uVar14;
  
  uVar3 = *(uint *)(param_1 + 0x18);
  pwVar7 = (wchar_t *)(param_1 + 4);
  pwVar10 = pwVar7;
  if (7 < uVar3) {
    pwVar10 = *(wchar_t **)pwVar7;
  }
  pwVar9 = L"OnInit";
  do {
    wVar2 = *pwVar10;
    bVar11 = (ushort)wVar2 < (ushort)*pwVar9;
    if (wVar2 != *pwVar9) {
LAB_00a8cff8:
      iVar4 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
      goto LAB_00a8cffd;
    }
    if (wVar2 == L'\0') break;
    wVar2 = pwVar10[1];
    bVar11 = (ushort)wVar2 < (ushort)pwVar9[1];
    if (wVar2 != pwVar9[1]) goto LAB_00a8cff8;
    pwVar10 = pwVar10 + 2;
    pwVar9 = pwVar9 + 2;
  } while (wVar2 != L'\0');
  iVar4 = 0;
LAB_00a8cffd:
  if (iVar4 != 0) {
    pwVar10 = pwVar7;
    if (7 < uVar3) {
      pwVar10 = *(wchar_t **)pwVar7;
    }
    pwVar9 = L"RegenTown";
    do {
      wVar2 = *pwVar10;
      bVar11 = (ushort)wVar2 < (ushort)*pwVar9;
      if (wVar2 != *pwVar9) {
LAB_00a8d198:
        iVar4 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
        goto LAB_00a8d19d;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar10[1];
      bVar11 = (ushort)wVar2 < (ushort)pwVar9[1];
      if (wVar2 != pwVar9[1]) goto LAB_00a8d198;
      pwVar10 = pwVar10 + 2;
      pwVar9 = pwVar9 + 2;
    } while (wVar2 != L'\0');
    iVar4 = 0;
LAB_00a8d19d:
    if (iVar4 == 0) {
      FUN_00a8cdc0(0);
      return;
    }
    pwVar10 = pwVar7;
    if (7 < uVar3) {
      pwVar10 = *(wchar_t **)pwVar7;
    }
    pwVar9 = L"RegenItem";
    do {
      wVar2 = *pwVar10;
      bVar11 = (ushort)wVar2 < (ushort)*pwVar9;
      if (wVar2 != *pwVar9) {
LAB_00a8d1e8:
        iVar4 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
        goto LAB_00a8d1ed;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar10[1];
      bVar11 = (ushort)wVar2 < (ushort)pwVar9[1];
      if (wVar2 != pwVar9[1]) goto LAB_00a8d1e8;
      pwVar10 = pwVar10 + 2;
      pwVar9 = pwVar9 + 2;
    } while (wVar2 != L'\0');
    iVar4 = 0;
LAB_00a8d1ed:
    if (iVar4 == 0) {
      FUN_00a8cdc0(1);
      return;
    }
    pwVar10 = pwVar7;
    if (7 < uVar3) {
      pwVar10 = *(wchar_t **)pwVar7;
    }
    pwVar9 = L"RegenPremium";
    do {
      wVar2 = *pwVar10;
      bVar11 = (ushort)wVar2 < (ushort)*pwVar9;
      if (wVar2 != *pwVar9) {
LAB_00a8d239:
        iVar4 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
        goto LAB_00a8d23e;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar10[1];
      bVar11 = (ushort)wVar2 < (ushort)pwVar9[1];
      if (wVar2 != pwVar9[1]) goto LAB_00a8d239;
      pwVar10 = pwVar10 + 2;
      pwVar9 = pwVar9 + 2;
    } while (wVar2 != L'\0');
    iVar4 = 0;
LAB_00a8d23e:
    if (iVar4 == 0) {
      FUN_00a8cdc0(2);
      return;
    }
    if (7 < uVar3) {
      pwVar7 = *(wchar_t **)pwVar7;
    }
    pwVar10 = L"RegenHighPremium";
    do {
      wVar2 = *pwVar7;
      bVar11 = (ushort)wVar2 < (ushort)*pwVar10;
      if (wVar2 != *pwVar10) {
LAB_00a8d28a:
        iVar4 = (1 - (uint)bVar11) - (uint)(bVar11 != 0);
        goto LAB_00a8d28f;
      }
      if (wVar2 == L'\0') break;
      wVar2 = pwVar7[1];
      bVar11 = (ushort)wVar2 < (ushort)pwVar10[1];
      if (wVar2 != pwVar10[1]) goto LAB_00a8d28a;
      pwVar7 = pwVar7 + 2;
      pwVar10 = pwVar10 + 2;
    } while (wVar2 != L'\0');
    iVar4 = 0;
LAB_00a8d28f:
    if (iVar4 != 0) {
      return;
    }
    FUN_00a8cdc0(3);
    return;
  }
  DVar5 = timeGetTime();
  if (DVar5 < *(uint *)(in_ECX + 0x58)) {
    DVar5 = timeGetTime();
    iVar4 = *(int *)(in_ECX + 0x58) - DVar5;
    if (iVar4 == 0) goto LAB_00a8d01b;
  }
  else {
LAB_00a8d01b:
    iVar4 = FUN_00a8beb0();
    if (iVar4 != 0) {
      DVar5 = timeGetTime();
      *(DWORD *)(in_ECX + 0x5c) = DVar5 + iVar4;
    }
  }
  if ((*DAT_00da9894 != 0) && (piVar6 = *(int **)(*DAT_00da9894 + 0x114), piVar6 != (int *)0x0)) {
    (**(code **)(*piVar6 + 4))(piVar6,"mc_regendlg.EnableRebirthButton",&DAT_00c6a15c,iVar4);
  }
  iVar4 = FUN_00405bb0(&DAT_00c6a180);
  if ((iVar4 == 0) && (*(char *)(in_ECX + 100) == '\0')) {
    if ((*DAT_00da9894 == 0) || (piVar6 = *(int **)(*DAT_00da9894 + 0x114), piVar6 == (int *)0x0))
    goto LAB_00a8d0c1;
    uVar14 = 0;
    puVar13 = &DAT_00c6a184;
    pcVar12 = "RegenWaitingTime";
  }
  else {
    if ((*DAT_00da9894 == 0) || (piVar6 = *(int **)(*DAT_00da9894 + 0x114), piVar6 == (int *)0x0))
    goto LAB_00a8d0c1;
    uVar14 = 1;
    puVar13 = &DAT_00c6a19c;
    pcVar12 = "RegenWaitingTime";
  }
  (**(code **)(*piVar6 + 4))(piVar6,pcVar12,puVar13,uVar14);
LAB_00a8d0c1:
  uVar1 = 0;
  if (*(int *)(*DAT_00da9894 + 0x1cc) != 0) {
    uVar1 = *(undefined1 *)(*(int *)(*DAT_00da9894 + 0x1cc) + 0x38);
  }
  uVar14 = 0;
  if (((DAT_00da93ec != 0) &&
      (iVar4 = FUN_004049b0(*(undefined4 *)(DAT_00da93ec + 0x450)), iVar4 != 0)) &&
     ((*(byte *)(iVar4 + 0x40) & 0x20) == 0)) {
    uVar14 = 1;
  }
  uVar8 = 0;
  if (*(int *)(DAT_0172491c + 0x17c) != 0) {
    uVar8 = *(undefined1 *)(*(int *)(DAT_0172491c + 0x17c) + 0x1fe0);
  }
  if ((*DAT_00da9894 != 0) && (piVar6 = *(int **)(*DAT_00da9894 + 0x114), piVar6 != (int *)0x0)) {
    (**(code **)(*piVar6 + 4))(piVar6,"RegenTypeSet","%b,%b,%b",uVar1,uVar14,uVar8);
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a8cfb0 : PUSH EBP
00a8cfb1 : MOV EBP,ESP
00a8cfb3 : PUSH ECX
00a8cfb4 : MOV EAX,dword ptr [EBP + 0x8]
00a8cfb7 : PUSH EBX
00a8cfb8 : PUSH ESI
00a8cfb9 : PUSH EDI
00a8cfba : MOV EDI,dword ptr [EAX + 0x18]
00a8cfbd : MOV EBX,ECX
00a8cfbf : LEA ESI,[EAX + 0x4]
00a8cfc2 : CMP EDI,0x8
00a8cfc5 : JC 0x00a8cfcb
00a8cfc7 : MOV EAX,dword ptr [ESI]
00a8cfc9 : JMP 0x00a8cfcd
00a8cfcb : MOV EAX,ESI
00a8cfcd : MOV ECX,0xc6a14c
00a8cfd2 : MOV DX,word ptr [EAX]
00a8cfd5 : CMP DX,word ptr [ECX]
00a8cfd8 : JNZ 0x00a8cff8
00a8cfda : TEST DX,DX
00a8cfdd : JZ 0x00a8cff4
00a8cfdf : MOV DX,word ptr [EAX + 0x2]
00a8cfe3 : CMP DX,word ptr [ECX + 0x2]
00a8cfe7 : JNZ 0x00a8cff8
00a8cfe9 : ADD EAX,0x4
00a8cfec : ADD ECX,0x4
00a8cfef : TEST DX,DX
00a8cff2 : JNZ 0x00a8cfd2
00a8cff4 : XOR EAX,EAX
00a8cff6 : JMP 0x00a8cffd
00a8cff8 : SBB EAX,EAX
00a8cffa : SBB EAX,-0x1
00a8cffd : TEST EAX,EAX
00a8cfff : JNZ 0x00a8d162
00a8d005 : MOV EDI,dword ptr [0x00b85598]
00a8d00b : CALL EDI
00a8d00d : CMP dword ptr [EBX + 0x58],EAX
00a8d010 : JBE 0x00a8d01b
00a8d012 : CALL EDI
00a8d014 : MOV ESI,dword ptr [EBX + 0x58]
00a8d017 : SUB ESI,EAX
00a8d019 : JNZ 0x00a8d02d
00a8d01b : CALL 0x00a8beb0
00a8d020 : MOV ESI,EAX
00a8d022 : TEST ESI,ESI
00a8d024 : JBE 0x00a8d02d
00a8d026 : CALL EDI
00a8d028 : ADD EAX,ESI
00a8d02a : MOV dword ptr [EBX + 0x5c],EAX
00a8d02d : MOV EAX,[0x00da9894]
00a8d032 : MOV EAX,dword ptr [EAX]
00a8d034 : TEST EAX,EAX
00a8d036 : JZ 0x00a8d058
00a8d038 : MOV EAX,dword ptr [EAX + 0x114]
00a8d03e : TEST EAX,EAX
00a8d040 : JZ 0x00a8d058
00a8d042 : MOV ECX,dword ptr [EAX]
00a8d044 : MOV EDX,dword ptr [ECX + 0x4]
00a8d047 : PUSH ESI
00a8d048 : PUSH 0xc6a15c
00a8d04d : PUSH 0xc6a160
00a8d052 : PUSH EAX
00a8d053 : CALL EDX
00a8d055 : ADD ESP,0x10
00a8d058 : MOV EAX,dword ptr [EBX + 0x7c]
00a8d05b : LEA ECX,[EBX + 0x68]
00a8d05e : PUSH 0xc6a180
00a8d063 : XOR EDI,EDI
00a8d065 : CALL 0x00405bb0
00a8d06a : TEST EAX,EAX
00a8d06c : JNZ 0x00a8d095
00a8d06e : CMP byte ptr [EBX + 0x64],AL
00a8d071 : JNZ 0x00a8d095
00a8d073 : MOV EAX,[0x00da9894]
00a8d078 : MOV EAX,dword ptr [EAX]
00a8d07a : TEST EAX,EAX
00a8d07c : JZ 0x00a8d0c1
00a8d07e : MOV EAX,dword ptr [EAX + 0x114]
00a8d084 : TEST EAX,EAX
00a8d086 : JZ 0x00a8d0c1
00a8d088 : PUSH EDI
00a8d089 : PUSH 0xc6a184
00a8d08e : PUSH 0xc6a188
00a8d093 : JMP 0x00a8d0b6
00a8d095 : MOV EAX,[0x00da9894]
00a8d09a : MOV EAX,dword ptr [EAX]
00a8d09c : TEST EAX,EAX
00a8d09e : JZ 0x00a8d0c1
00a8d0a0 : MOV EAX,dword ptr [EAX + 0x114]
00a8d0a6 : TEST EAX,EAX
00a8d0a8 : JZ 0x00a8d0c1
00a8d0aa : PUSH 0x1
00a8d0ac : PUSH 0xc6a19c
00a8d0b1 : PUSH 0xc6a1a0
00a8d0b6 : MOV ECX,dword ptr [EAX]
00a8d0b8 : MOV EDX,dword ptr [ECX + 0x4]
00a8d0bb : PUSH EAX
00a8d0bc : CALL EDX
00a8d0be : ADD ESP,0x10
00a8d0c1 : MOV EAX,[0x00da9894]
00a8d0c6 : MOV ECX,dword ptr [EAX]
00a8d0c8 : MOV EAX,dword ptr [ECX + 0x1cc]
00a8d0ce : MOV byte ptr [EBP + -0x1],0x0
00a8d0d2 : TEST EAX,EAX
00a8d0d4 : JZ 0x00a8d0dc
00a8d0d6 : MOV DL,byte ptr [EAX + 0x38]
00a8d0d9 : MOV byte ptr [EBP + -0x1],DL
00a8d0dc : MOV EAX,[0x00da93ec]
00a8d0e1 : XOR BL,BL
00a8d0e3 : TEST EAX,EAX
00a8d0e5 : JZ 0x00a8d102
00a8d0e7 : MOV EAX,dword ptr [EAX + 0x450]
00a8d0ed : PUSH EAX
00a8d0ee : CALL 0x004049b0
00a8d0f3 : ADD ESP,0x4
00a8d0f6 : TEST EAX,EAX
00a8d0f8 : JZ 0x00a8d102
00a8d0fa : TEST byte ptr [EAX + 0x40],0x20
00a8d0fe : JNZ 0x00a8d102
00a8d100 : MOV BL,0x1
00a8d102 : MOV EDX,dword ptr [0x0172491c]
00a8d108 : MOV EAX,dword ptr [EDX + 0x17c]
00a8d10e : XOR CL,CL
00a8d110 : TEST EAX,EAX
00a8d112 : JZ 0x00a8d11a
00a8d114 : MOV CL,byte ptr [EAX + 0x1fe0]
00a8d11a : MOV EAX,[0x00da9894]
00a8d11f : MOV EAX,dword ptr [EAX]
00a8d121 : TEST EAX,EAX
00a8d123 : JZ 0x00a8d29c
00a8d129 : MOV EAX,dword ptr [EAX + 0x114]
00a8d12f : TEST EAX,EAX
00a8d131 : JZ 0x00a8d29c
00a8d137 : MOV EDX,dword ptr [EAX]
00a8d139 : MOV EDX,dword ptr [EDX + 0x4]
00a8d13c : MOVZX ECX,CL
00a8d13f : PUSH ECX
00a8d140 : MOVZX ECX,BL
00a8d143 : PUSH ECX
00a8d144 : MOVZX ECX,byte ptr [EBP + -0x1]
00a8d148 : PUSH ECX
00a8d149 : PUSH 0xc6a1b4
00a8d14e : PUSH 0xc6a1c0
00a8d153 : PUSH EAX
00a8d154 : CALL EDX
00a8d156 : ADD ESP,0x18
00a8d159 : POP EDI
00a8d15a : POP ESI
00a8d15b : POP EBX
00a8d15c : MOV ESP,EBP
00a8d15e : POP EBP
00a8d15f : RET 0x8
00a8d162 : CMP EDI,0x8
00a8d165 : JC 0x00a8d16b
00a8d167 : MOV EAX,dword ptr [ESI]
00a8d169 : JMP 0x00a8d16d
00a8d16b : MOV EAX,ESI
00a8d16d : MOV ECX,0xc6a1d0
00a8d172 : MOV DX,word ptr [EAX]
00a8d175 : CMP DX,word ptr [ECX]
00a8d178 : JNZ 0x00a8d198
00a8d17a : TEST DX,DX
00a8d17d : JZ 0x00a8d194
00a8d17f : MOV DX,word ptr [EAX + 0x2]
00a8d183 : CMP DX,word ptr [ECX + 0x2]
00a8d187 : JNZ 0x00a8d198
00a8d189 : ADD EAX,0x4
00a8d18c : ADD ECX,0x4
00a8d18f : TEST DX,DX
00a8d192 : JNZ 0x00a8d172
00a8d194 : XOR EAX,EAX
00a8d196 : JMP 0x00a8d19d
00a8d198 : SBB EAX,EAX
00a8d19a : SBB EAX,-0x1
00a8d19d : TEST EAX,EAX
00a8d19f : JNZ 0x00a8d1b2
00a8d1a1 : PUSH EAX
00a8d1a2 : MOV ECX,EBX
00a8d1a4 : CALL 0x00a8cdc0
00a8d1a9 : POP EDI
00a8d1aa : POP ESI
00a8d1ab : POP EBX
00a8d1ac : MOV ESP,EBP
00a8d1ae : POP EBP
00a8d1af : RET 0x8
00a8d1b2 : CMP EDI,0x8
00a8d1b5 : JC 0x00a8d1bb
00a8d1b7 : MOV EAX,dword ptr [ESI]
00a8d1b9 : JMP 0x00a8d1bd
00a8d1bb : MOV EAX,ESI
00a8d1bd : MOV ECX,0xc6a1e4
00a8d1c2 : MOV DX,word ptr [EAX]
00a8d1c5 : CMP DX,word ptr [ECX]
00a8d1c8 : JNZ 0x00a8d1e8
00a8d1ca : TEST DX,DX
00a8d1cd : JZ 0x00a8d1e4
00a8d1cf : MOV DX,word ptr [EAX + 0x2]
00a8d1d3 : CMP DX,word ptr [ECX + 0x2]
00a8d1d7 : JNZ 0x00a8d1e8
00a8d1d9 : ADD EAX,0x4
00a8d1dc : ADD ECX,0x4
00a8d1df : TEST DX,DX
00a8d1e2 : JNZ 0x00a8d1c2
00a8d1e4 : XOR EAX,EAX
00a8d1e6 : JMP 0x00a8d1ed
00a8d1e8 : SBB EAX,EAX
00a8d1ea : SBB EAX,-0x1
00a8d1ed : TEST EAX,EAX
00a8d1ef : JNZ 0x00a8d203
00a8d1f1 : PUSH 0x1
00a8d1f3 : MOV ECX,EBX
00a8d1f5 : CALL 0x00a8cdc0
00a8d1fa : POP EDI
00a8d1fb : POP ESI
00a8d1fc : POP EBX
00a8d1fd : MOV ESP,EBP
00a8d1ff : POP EBP
00a8d200 : RET 0x8
00a8d203 : CMP EDI,0x8
00a8d206 : JC 0x00a8d20c
00a8d208 : MOV EAX,dword ptr [ESI]
00a8d20a : JMP 0x00a8d20e
00a8d20c : MOV EAX,ESI
00a8d20e : MOV ECX,0xc6a1f8
00a8d213 : MOV DX,word ptr [EAX]
00a8d216 : CMP DX,word ptr [ECX]
00a8d219 : JNZ 0x00a8d239
00a8d21b : TEST DX,DX
00a8d21e : JZ 0x00a8d235
00a8d220 : MOV DX,word ptr [EAX + 0x2]
00a8d224 : CMP DX,word ptr [ECX + 0x2]
00a8d228 : JNZ 0x00a8d239
00a8d22a : ADD EAX,0x4
00a8d22d : ADD ECX,0x4
00a8d230 : TEST DX,DX
00a8d233 : JNZ 0x00a8d213
00a8d235 : XOR EAX,EAX
00a8d237 : JMP 0x00a8d23e
00a8d239 : SBB EAX,EAX
00a8d23b : SBB EAX,-0x1
00a8d23e : TEST EAX,EAX
00a8d240 : JNZ 0x00a8d254
00a8d242 : PUSH 0x2
00a8d244 : MOV ECX,EBX
00a8d246 : CALL 0x00a8cdc0
00a8d24b : POP EDI
00a8d24c : POP ESI
00a8d24d : POP EBX
00a8d24e : MOV ESP,EBP
00a8d250 : POP EBP
00a8d251 : RET 0x8
00a8d254 : CMP EDI,0x8
00a8d257 : JC 0x00a8d25d
00a8d259 : MOV EAX,dword ptr [ESI]
00a8d25b : JMP 0x00a8d25f
00a8d25d : MOV EAX,ESI
00a8d25f : MOV ECX,0xc6a214
00a8d264 : MOV DX,word ptr [EAX]
00a8d267 : CMP DX,word ptr [ECX]
00a8d26a : JNZ 0x00a8d28a
00a8d26c : TEST DX,DX
00a8d26f : JZ 0x00a8d286
00a8d271 : MOV DX,word ptr [EAX + 0x2]
00a8d275 : CMP DX,word ptr [ECX + 0x2]
00a8d279 : JNZ 0x00a8d28a
00a8d27b : ADD EAX,0x4
00a8d27e : ADD ECX,0x4
00a8d281 : TEST DX,DX
00a8d284 : JNZ 0x00a8d264
00a8d286 : XOR EAX,EAX
00a8d288 : JMP 0x00a8d28f
00a8d28a : SBB EAX,EAX
00a8d28c : SBB EAX,-0x1
00a8d28f : TEST EAX,EAX
00a8d291 : JNZ 0x00a8d29c
00a8d293 : PUSH 0x3
00a8d295 : MOV ECX,EBX
00a8d297 : CALL 0x00a8cdc0
00a8d29c : POP EDI
00a8d29d : POP ESI
00a8d29e : POP EBX
00a8d29f : MOV ESP,EBP
00a8d2a1 : POP EBP
00a8d2a2 : RET 0x8
