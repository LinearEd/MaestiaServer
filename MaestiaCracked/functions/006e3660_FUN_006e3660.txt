PROGRAM  : Maestia.exe
FUNCTION : FUN_006e3660
ENTRY    : 006e3660
BODY     : [[006e3660, 006e3805]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006e3660(int param_1)

{
  int iVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int *piVar11;
  int *local_2c;
  int *local_28;
  int iStack_24;
  int local_20;
  int aiStack_10 [4];
  
  iVar1 = *(int *)(param_1 + 0x148);
  iVar10 = 0;
  if (0 < *(int *)(param_1 + 0xe4)) {
    local_2c = (int *)(param_1 + 0xe8);
    do {
      iVar4 = *(int *)(*local_2c + 0xc);
      iVar4 = (**(code **)(*(int *)(param_1 + 4) + 0x20))
                        (param_1,*(undefined4 *)(iVar1 + 0x40 + *(int *)(*local_2c + 4) * 4),
                         *(int *)(iVar1 + 8) * iVar4,iVar4,0);
      local_2c = local_2c + 1;
      aiStack_10[iVar10] = iVar4;
      iVar10 = iVar10 + 1;
    } while (iVar10 < *(int *)(param_1 + 0xe4));
  }
  iVar10 = *(int *)(iVar1 + 0x10);
  if (iVar10 < *(int *)(iVar1 + 0x14)) {
    do {
      local_2c = *(int **)(iVar1 + 0xc);
      if (local_2c < *(uint *)(param_1 + 0xf8)) {
        do {
          iVar4 = 0;
          local_20 = 0;
          if (0 < *(int *)(param_1 + 0xe4)) {
            local_28 = (int *)(param_1 + 0xe8);
            do {
              iVar2 = *local_28;
              iVar7 = *(int *)(iVar2 + 0x34);
              iVar5 = iVar7 * (int)local_2c;
              iStack_24 = 0;
              if (0 < *(int *)(iVar2 + 0x38)) {
                piVar9 = (int *)(aiStack_10[local_20] + iVar10 * 4);
                do {
                  iVar6 = *piVar9 + iVar5 * 0x80;
                  iVar8 = 0;
                  if (0 < iVar7) {
                    piVar11 = (int *)(iVar1 + 0x18 + iVar4 * 4);
                    do {
                      *piVar11 = iVar6;
                      iVar7 = *(int *)(iVar2 + 0x34);
                      iVar8 = iVar8 + 1;
                      iVar4 = iVar4 + 1;
                      piVar11 = piVar11 + 1;
                      iVar6 = iVar6 + 0x80;
                    } while (iVar8 < iVar7);
                  }
                  iStack_24 = iStack_24 + 1;
                  piVar9 = piVar9 + 1;
                } while (iStack_24 < *(int *)(iVar2 + 0x38));
              }
              local_28 = local_28 + 1;
              local_20 = local_20 + 1;
            } while (local_20 < *(int *)(param_1 + 0xe4));
          }
          cVar3 = (**(code **)(*(int *)(param_1 + 0x15c) + 4))(param_1,iVar1 + 0x18);
          if (cVar3 == '\0') {
            *(int *)(iVar1 + 0x10) = iVar10;
            *(int **)(iVar1 + 0xc) = local_2c;
            return 0;
          }
          local_2c = (int *)((int)local_2c + 1);
        } while (local_2c < *(uint *)(param_1 + 0xf8));
      }
      iVar10 = iVar10 + 1;
      *(undefined4 *)(iVar1 + 0xc) = 0;
    } while (iVar10 < *(int *)(iVar1 + 0x14));
  }
  *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
  FUN_006d7e70();
  return 1;
}



============================================================
DISASSEMBLY
============================================================
006e3660 : SUB ESP,0x2c
006e3663 : PUSH EBX
006e3664 : PUSH EBP
006e3665 : MOV EBP,dword ptr [ESP + 0x38]
006e3669 : PUSH ESI
006e366a : PUSH EDI
006e366b : MOV EDI,dword ptr [EBP + 0x148]
006e3671 : XOR ESI,ESI
006e3673 : CMP dword ptr [EBP + 0xe4],ESI
006e3679 : MOV dword ptr [ESP + 0x20],EDI
006e367d : JLE 0x006e36c9
006e367f : LEA EAX,[EBP + 0xe8]
006e3685 : MOV dword ptr [ESP + 0x10],EAX
006e3689 : LEA ESP,[ESP]
006e3690 : MOV ECX,dword ptr [ESP + 0x10]
006e3694 : MOV EAX,dword ptr [ECX]
006e3696 : MOV ECX,dword ptr [EAX + 0xc]
006e3699 : MOV EBX,dword ptr [EDI + 0x8]
006e369c : MOV EAX,dword ptr [EAX + 0x4]
006e369f : IMUL EBX,ECX
006e36a2 : MOV EDX,dword ptr [EBP + 0x4]
006e36a5 : MOV EDX,dword ptr [EDX + 0x20]
006e36a8 : PUSH 0x0
006e36aa : PUSH ECX
006e36ab : MOV ECX,dword ptr [EDI + EAX*0x4 + 0x40]
006e36af : PUSH EBX
006e36b0 : PUSH ECX
006e36b1 : PUSH EBP
006e36b2 : CALL EDX
006e36b4 : ADD dword ptr [ESP + 0x24],0x4
006e36b9 : MOV dword ptr [ESP + ESI*0x4 + 0x40],EAX
006e36bd : INC ESI
006e36be : ADD ESP,0x14
006e36c1 : CMP ESI,dword ptr [EBP + 0xe4]
006e36c7 : JL 0x006e3690
006e36c9 : MOV ESI,dword ptr [EDI + 0x10]
006e36cc : CMP ESI,dword ptr [EDI + 0x14]
006e36cf : MOV dword ptr [ESP + 0x24],ESI
006e36d3 : JGE 0x006e37de
006e36d9 : LEA ESP,[ESP]
006e36e0 : MOV EAX,dword ptr [EDI + 0xc]
006e36e3 : MOV dword ptr [ESP + 0x10],EAX
006e36e7 : CMP EAX,dword ptr [EBP + 0xf8]
006e36ed : JNC 0x006e37c9
006e36f3 : XOR EDX,EDX
006e36f5 : XOR EBX,EBX
006e36f7 : CMP dword ptr [EBP + 0xe4],EDX
006e36fd : MOV dword ptr [ESP + 0x1c],EDX
006e3701 : JLE 0x006e379d
006e3707 : LEA EAX,[EBP + 0xe8]
006e370d : MOV dword ptr [ESP + 0x14],EAX
006e3711 : MOV ECX,dword ptr [ESP + 0x14]
006e3715 : MOV EDI,dword ptr [ECX]
006e3717 : MOV ECX,dword ptr [EDI + 0x34]
006e371a : MOV EAX,ECX
006e371c : IMUL EAX,dword ptr [ESP + 0x10]
006e3721 : CMP dword ptr [EDI + 0x38],0x0
006e3725 : MOV dword ptr [ESP + 0x18],0x0
006e372d : JLE 0x006e3783
006e372f : MOV EDX,dword ptr [ESP + EDX*0x4 + 0x2c]
006e3733 : SHL EAX,0x7
006e3736 : MOV dword ptr [ESP + 0x28],EAX
006e373a : LEA EBP,[EDX + ESI*0x4]
006e373d : LEA ECX,[ECX]
006e3740 : MOV EAX,dword ptr [EBP]
006e3743 : ADD EAX,dword ptr [ESP + 0x28]
006e3747 : XOR EDX,EDX
006e3749 : TEST ECX,ECX
006e374b : JLE 0x006e3766
006e374d : MOV ECX,dword ptr [ESP + 0x20]
006e3751 : LEA ESI,[ECX + EBX*0x4 + 0x18]
006e3755 : MOV dword ptr [ESI],EAX
006e3757 : MOV ECX,dword ptr [EDI + 0x34]
006e375a : INC EDX
006e375b : INC EBX
006e375c : ADD ESI,0x4
006e375f : SUB EAX,-0x80
006e3762 : CMP EDX,ECX
006e3764 : JL 0x006e3755
006e3766 : MOV EAX,dword ptr [ESP + 0x18]
006e376a : INC EAX
006e376b : ADD EBP,0x4
006e376e : CMP EAX,dword ptr [EDI + 0x38]
006e3771 : MOV dword ptr [ESP + 0x18],EAX
006e3775 : JL 0x006e3740
006e3777 : MOV EBP,dword ptr [ESP + 0x40]
006e377b : MOV EDX,dword ptr [ESP + 0x1c]
006e377f : MOV ESI,dword ptr [ESP + 0x24]
006e3783 : ADD dword ptr [ESP + 0x14],0x4
006e3788 : INC EDX
006e3789 : CMP EDX,dword ptr [EBP + 0xe4]
006e378f : MOV dword ptr [ESP + 0x1c],EDX
006e3793 : JL 0x006e3711
006e3799 : MOV EDI,dword ptr [ESP + 0x20]
006e379d : MOV EDX,dword ptr [EBP + 0x15c]
006e37a3 : LEA EAX,[EDI + 0x18]
006e37a6 : PUSH EAX
006e37a7 : MOV EAX,dword ptr [EDX + 0x4]
006e37aa : PUSH EBP
006e37ab : CALL EAX
006e37ad : ADD ESP,0x8
006e37b0 : TEST AL,AL
006e37b2 : JZ 0x006e37f2
006e37b4 : MOV EAX,dword ptr [ESP + 0x10]
006e37b8 : INC EAX
006e37b9 : MOV dword ptr [ESP + 0x10],EAX
006e37bd : CMP EAX,dword ptr [EBP + 0xf8]
006e37c3 : JC 0x006e36f3
006e37c9 : INC ESI
006e37ca : MOV dword ptr [EDI + 0xc],0x0
006e37d1 : CMP ESI,dword ptr [EDI + 0x14]
006e37d4 : MOV dword ptr [ESP + 0x24],ESI
006e37d8 : JL 0x006e36e0
006e37de : INC dword ptr [EDI + 0x8]
006e37e1 : MOV ECX,EBP
006e37e3 : CALL 0x006d7e70
006e37e8 : POP EDI
006e37e9 : POP ESI
006e37ea : POP EBP
006e37eb : MOV AL,0x1
006e37ed : POP EBX
006e37ee : ADD ESP,0x2c
006e37f1 : RET
006e37f2 : MOV ECX,dword ptr [ESP + 0x10]
006e37f6 : MOV dword ptr [EDI + 0x10],ESI
006e37f9 : MOV dword ptr [EDI + 0xc],ECX
006e37fc : POP EDI
006e37fd : POP ESI
006e37fe : POP EBP
006e37ff : XOR AL,AL
006e3801 : POP EBX
006e3802 : ADD ESP,0x2c
006e3805 : RET
