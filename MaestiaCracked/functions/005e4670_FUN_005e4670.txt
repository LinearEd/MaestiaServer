PROGRAM  : Maestia.exe
FUNCTION : FUN_005e4670
ENTRY    : 005e4670
BODY     : [[005e4670, 005e47a9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e4670(int param_1)

{
  int iVar1;
  GThread *in_ECX;
  uint uVar2;
  uint local_1c;
  uint local_18;
  uint local_14;
  uint *local_10;
  uint *local_c;
  
  GThread::OnExit(in_ECX);
  local_1c = *(uint *)(in_ECX + 0x24);
  uVar2 = 0;
  if ((*(uint *)(in_ECX + 0x14) >> 0xe & 1) == 0) {
    if (local_1c != 0) {
      local_10 = &local_18;
      local_c = &local_14;
      do {
        local_14 = uVar2 & 0xffff;
        *(undefined1 *)(param_1 + 0x15) = 0;
        if (*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x2c) < 1) {
          FUN_0053a0a0();
        }
        local_18 = (uint)*(byte *)(*(int *)(param_1 + 0x2c) + *(int *)(param_1 + 0x3c));
        *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x2c) + 1;
        FUN_005e2040(in_ECX + 0x2c,&local_10,local_18);
        uVar2 = uVar2 + 1;
      } while (uVar2 < local_1c);
    }
  }
  else if (local_1c != 0) {
    local_10 = &local_18;
    local_c = &local_1c;
    local_14 = local_1c;
    do {
      local_1c = uVar2 & 0xffff;
      *(undefined1 *)(param_1 + 0x15) = 0;
      if (*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x2c) < 2) {
        FUN_00539fb0(2);
      }
      iVar1 = *(int *)(param_1 + 0x2c);
      local_18 = (uint)CONCAT11(*(undefined1 *)(*(int *)(param_1 + 0x3c) + 1 + iVar1),
                                *(undefined1 *)(*(int *)(param_1 + 0x3c) + iVar1));
      *(int *)(param_1 + 0x2c) = iVar1 + 2;
      FUN_005e2040(in_ECX + 0x2c,&local_10,local_18);
      uVar2 = uVar2 + 1;
    } while (uVar2 < local_14);
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005e4670 : PUSH EBP
005e4671 : MOV EBP,ESP
005e4673 : AND ESP,0xfffffff8
005e4676 : SUB ESP,0x14
005e4679 : PUSH EBX
005e467a : PUSH ESI
005e467b : MOV ESI,dword ptr [EBP + 0x8]
005e467e : MOV EAX,dword ptr [ESI + 0x34]
005e4681 : SUB EAX,dword ptr [ESI + 0x30]
005e4684 : PUSH EDI
005e4685 : ADD EAX,dword ptr [ESI + 0x2c]
005e4688 : MOV EBX,ECX
005e468a : PUSH EAX
005e468b : PUSH 0xb93bc8
005e4690 : PUSH ESI
005e4691 : CALL 0x0051d420
005e4696 : MOV ECX,dword ptr [EBX + 0x14]
005e4699 : MOV EAX,dword ptr [EBX + 0x24]
005e469c : SHR ECX,0xe
005e469f : ADD ESP,0xc
005e46a2 : XOR EDI,EDI
005e46a4 : TEST CL,0x1
005e46a7 : JZ 0x005e4739
005e46ad : MOV dword ptr [ESP + 0x14],EAX
005e46b1 : TEST EAX,EAX
005e46b3 : JBE 0x005e47a1
005e46b9 : LEA EDX,[ESP + 0x10]
005e46bd : LEA EAX,[ESP + 0xc]
005e46c1 : ADD EBX,0x2c
005e46c4 : MOV dword ptr [ESP + 0x18],EDX
005e46c8 : MOV dword ptr [ESP + 0x1c],EAX
005e46cc : LEA ESP,[ESP]
005e46d0 : MOV EDX,dword ptr [ESI + 0x30]
005e46d3 : SUB EDX,dword ptr [ESI + 0x2c]
005e46d6 : MOVZX ECX,DI
005e46d9 : CMP EDX,0x2
005e46dc : MOV dword ptr [ESP + 0xc],ECX
005e46e0 : MOV byte ptr [ESI + 0x15],0x0
005e46e4 : JGE 0x005e46ef
005e46e6 : PUSH 0x2
005e46e8 : MOV ECX,ESI
005e46ea : CALL 0x00539fb0
005e46ef : MOV EAX,dword ptr [ESI + 0x2c]
005e46f2 : MOV ECX,dword ptr [ESI + 0x3c]
005e46f5 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e46fb : ADD ECX,EAX
005e46fd : MOVZX CX,byte ptr [ECX]
005e4701 : SHL DX,0x8
005e4705 : OR DX,CX
005e4708 : MOVZX ECX,DX
005e470b : ADD EAX,0x2
005e470e : MOV dword ptr [ESI + 0x2c],EAX
005e4711 : MOVZX EAX,CX
005e4714 : MOVZX EDX,CX
005e4717 : PUSH EAX
005e4718 : LEA ECX,[ESP + 0x1c]
005e471c : PUSH ECX
005e471d : PUSH EBX
005e471e : MOV ECX,EBX
005e4720 : MOV dword ptr [ESP + 0x1c],EDX
005e4724 : CALL 0x005e2040
005e4729 : INC EDI
005e472a : CMP EDI,dword ptr [ESP + 0x14]
005e472e : JC 0x005e46d0
005e4730 : POP EDI
005e4731 : POP ESI
005e4732 : POP EBX
005e4733 : MOV ESP,EBP
005e4735 : POP EBP
005e4736 : RET 0x4
005e4739 : MOV dword ptr [ESP + 0xc],EAX
005e473d : TEST EAX,EAX
005e473f : JBE 0x005e47a1
005e4741 : LEA EDX,[ESP + 0x10]
005e4745 : LEA EAX,[ESP + 0x14]
005e4749 : ADD EBX,0x2c
005e474c : MOV dword ptr [ESP + 0x18],EDX
005e4750 : MOV dword ptr [ESP + 0x1c],EAX
005e4754 : MOV EDX,dword ptr [ESI + 0x30]
005e4757 : SUB EDX,dword ptr [ESI + 0x2c]
005e475a : MOVZX ECX,DI
005e475d : CMP EDX,0x1
005e4760 : MOV dword ptr [ESP + 0x14],ECX
005e4764 : MOV byte ptr [ESI + 0x15],0x0
005e4768 : JGE 0x005e4771
005e476a : MOV ECX,ESI
005e476c : CALL 0x0053a0a0
005e4771 : MOV EAX,dword ptr [ESI + 0x2c]
005e4774 : MOV ECX,dword ptr [ESI + 0x3c]
005e4777 : MOV CL,byte ptr [EAX + ECX*0x1]
005e477a : MOVZX DX,CL
005e477e : INC EAX
005e477f : MOV dword ptr [ESI + 0x2c],EAX
005e4782 : MOVZX EAX,DX
005e4785 : MOV dword ptr [ESP + 0x10],EAX
005e4789 : MOVZX EAX,AX
005e478c : PUSH EAX
005e478d : LEA ECX,[ESP + 0x1c]
005e4791 : PUSH ECX
005e4792 : PUSH EBX
005e4793 : MOV ECX,EBX
005e4795 : CALL 0x005e2040
005e479a : INC EDI
005e479b : CMP EDI,dword ptr [ESP + 0xc]
005e479f : JC 0x005e4754
005e47a1 : POP EDI
005e47a2 : POP ESI
005e47a3 : POP EBX
005e47a4 : MOV ESP,EBP
005e47a6 : POP EBP
005e47a7 : RET 0x4
