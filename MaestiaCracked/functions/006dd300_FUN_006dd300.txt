PROGRAM  : Maestia.exe
FUNCTION : FUN_006dd300
ENTRY    : 006dd300
BODY     : [[006dd300, 006dd45c]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 FUN_006dd300(int *param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  char cVar6;
  int iVar7;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  int local_14 [4];
  int local_4;
  
  iVar5 = (int)param_1;
  iVar3 = *(int *)((int)param_1 + 0x15c);
  local_24 = **(undefined4 **)((int)param_1 + 0x18);
  local_20 = (*(undefined4 **)((int)param_1 + 0x18))[1];
  local_1c = *(undefined4 *)(iVar3 + 0xc);
  local_18 = *(undefined4 *)(iVar3 + 0x10);
  local_14[0] = *(int *)(iVar3 + 0x14);
  local_14[1] = *(undefined4 *)(iVar3 + 0x18);
  local_14[2] = *(undefined4 *)(iVar3 + 0x1c);
  local_14[3] = *(undefined4 *)(iVar3 + 0x20);
  local_4 = (int)param_1;
  if ((*(int *)((int)param_1 + 0xbc) != 0) && (*(int *)(iVar3 + 0x24) == 0)) {
    cVar6 = FUN_006dd280(*(undefined4 *)(iVar3 + 0x28));
    if (cVar6 == '\0') {
      return 0;
    }
  }
  iVar7 = 0;
  if (0 < *(int *)((int)param_1 + 0x100)) {
    param_1 = (int *)((int)param_1 + 0x104);
    do {
      iVar4 = *param_1;
      cVar6 = FUN_006dd0e0(&local_24,*(undefined4 *)(param_2 + iVar7 * 4),local_14[iVar4],
                           *(undefined4 *)
                            (iVar3 + 0x3c + *(int *)(*(int *)(iVar5 + 0xe8 + iVar4 * 4) + 0x18) * 4)
                          );
      if (cVar6 == '\0') {
        return 0;
      }
      iVar1 = iVar7 * 4;
      param_1 = param_1 + 1;
      iVar7 = iVar7 + 1;
      iVar2 = *(int *)(iVar5 + 0x100);
      local_14[iVar4] = (int)**(short **)(param_2 + iVar1);
    } while (iVar7 < iVar2);
  }
  **(undefined4 **)(iVar5 + 0x18) = local_24;
  *(undefined4 *)(*(int *)(iVar5 + 0x18) + 4) = local_20;
  *(undefined4 *)(iVar3 + 0xc) = local_1c;
  *(undefined4 *)(iVar3 + 0x10) = local_18;
  *(int *)(iVar3 + 0x14) = local_14[0];
  *(int *)(iVar3 + 0x18) = local_14[1];
  *(int *)(iVar3 + 0x1c) = local_14[2];
  *(int *)(iVar3 + 0x20) = local_14[3];
  if (*(int *)(iVar5 + 0xbc) != 0) {
    if (*(int *)(iVar3 + 0x24) == 0) {
      *(int *)(iVar3 + 0x24) = *(int *)(iVar5 + 0xbc);
      *(uint *)(iVar3 + 0x28) = *(int *)(iVar3 + 0x28) + 1U & 7;
    }
    *(int *)(iVar3 + 0x24) = *(int *)(iVar3 + 0x24) + -1;
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
006dd300 : SUB ESP,0x24
006dd303 : PUSH ESI
006dd304 : PUSH EDI
006dd305 : MOV EDI,dword ptr [ESP + 0x30]
006dd309 : CMP dword ptr [EDI + 0xbc],0x0
006dd310 : MOV ESI,dword ptr [EDI + 0x15c]
006dd316 : MOV EAX,dword ptr [EDI + 0x18]
006dd319 : MOV ECX,dword ptr [EAX]
006dd31b : MOV EDX,dword ptr [EAX + 0x4]
006dd31e : MOV EAX,dword ptr [ESI + 0xc]
006dd321 : MOV dword ptr [ESP + 0x8],ECX
006dd325 : MOV ECX,dword ptr [ESI + 0x10]
006dd328 : MOV dword ptr [ESP + 0xc],EDX
006dd32c : MOV EDX,dword ptr [ESI + 0x14]
006dd32f : MOV dword ptr [ESP + 0x10],EAX
006dd333 : MOV EAX,dword ptr [ESI + 0x18]
006dd336 : MOV dword ptr [ESP + 0x14],ECX
006dd33a : MOV ECX,dword ptr [ESI + 0x1c]
006dd33d : MOV dword ptr [ESP + 0x18],EDX
006dd341 : MOV EDX,dword ptr [ESI + 0x20]
006dd344 : MOV dword ptr [ESP + 0x1c],EAX
006dd348 : MOV dword ptr [ESP + 0x20],ECX
006dd34c : MOV dword ptr [ESP + 0x24],EDX
006dd350 : MOV dword ptr [ESP + 0x28],EDI
006dd354 : JZ 0x006dd376
006dd356 : CMP dword ptr [ESI + 0x24],0x0
006dd35a : JNZ 0x006dd376
006dd35c : MOV EAX,dword ptr [ESI + 0x28]
006dd35f : PUSH EAX
006dd360 : LEA EAX,[ESP + 0xc]
006dd364 : CALL 0x006dd280
006dd369 : ADD ESP,0x4
006dd36c : TEST AL,AL
006dd36e : JNZ 0x006dd376
006dd370 : POP EDI
006dd371 : POP ESI
006dd372 : ADD ESP,0x24
006dd375 : RET
006dd376 : PUSH EBX
006dd377 : XOR EBX,EBX
006dd379 : CMP dword ptr [EDI + 0x100],EBX
006dd37f : PUSH EBP
006dd380 : JLE 0x006dd3ec
006dd382 : LEA ECX,[EDI + 0x104]
006dd388 : MOV dword ptr [ESP + 0x38],ECX
006dd38c : LEA ESP,[ESP]
006dd390 : MOV EDX,dword ptr [ESP + 0x38]
006dd394 : MOV EAX,dword ptr [EDX]
006dd396 : MOV ECX,dword ptr [EDI + EAX*0x4 + 0xe8]
006dd39d : LEA EBP,[ESP + EAX*0x4 + 0x20]
006dd3a1 : MOV EAX,dword ptr [ECX + 0x18]
006dd3a4 : MOV EDX,dword ptr [ESI + EAX*0x4 + 0x3c]
006dd3a8 : MOV EAX,dword ptr [ECX + 0x14]
006dd3ab : MOV ECX,dword ptr [EBP]
006dd3ae : MOV EAX,dword ptr [ESI + EAX*0x4 + 0x2c]
006dd3b2 : PUSH EDX
006dd3b3 : MOV EDX,dword ptr [ESP + 0x40]
006dd3b7 : PUSH ECX
006dd3b8 : MOV ECX,dword ptr [EDX + EBX*0x4]
006dd3bb : PUSH ECX
006dd3bc : LEA EDX,[ESP + 0x1c]
006dd3c0 : PUSH EDX
006dd3c1 : CALL 0x006dd0e0
006dd3c6 : ADD ESP,0x10
006dd3c9 : TEST AL,AL
006dd3cb : JZ 0x006dd453
006dd3d1 : MOV EAX,dword ptr [ESP + 0x3c]
006dd3d5 : MOV ECX,dword ptr [EAX + EBX*0x4]
006dd3d8 : MOVSX EDX,word ptr [ECX]
006dd3db : ADD dword ptr [ESP + 0x38],0x4
006dd3e0 : INC EBX
006dd3e1 : CMP EBX,dword ptr [EDI + 0x100]
006dd3e7 : MOV dword ptr [EBP],EDX
006dd3ea : JL 0x006dd390
006dd3ec : MOV EAX,dword ptr [EDI + 0x18]
006dd3ef : MOV ECX,dword ptr [ESP + 0x10]
006dd3f3 : MOV dword ptr [EAX],ECX
006dd3f5 : MOV EDX,dword ptr [EDI + 0x18]
006dd3f8 : MOV EAX,dword ptr [ESP + 0x14]
006dd3fc : MOV ECX,dword ptr [ESP + 0x18]
006dd400 : MOV dword ptr [EDX + 0x4],EAX
006dd403 : MOV EDX,dword ptr [ESP + 0x1c]
006dd407 : MOV EAX,dword ptr [ESP + 0x20]
006dd40b : MOV dword ptr [ESI + 0xc],ECX
006dd40e : MOV ECX,dword ptr [ESP + 0x24]
006dd412 : MOV dword ptr [ESI + 0x10],EDX
006dd415 : MOV EDX,dword ptr [ESP + 0x28]
006dd419 : MOV dword ptr [ESI + 0x14],EAX
006dd41c : MOV EAX,dword ptr [ESP + 0x2c]
006dd420 : MOV dword ptr [ESI + 0x18],ECX
006dd423 : MOV dword ptr [ESI + 0x1c],EDX
006dd426 : MOV dword ptr [ESI + 0x20],EAX
006dd429 : MOV EDI,dword ptr [EDI + 0xbc]
006dd42f : TEST EDI,EDI
006dd431 : JZ 0x006dd449
006dd433 : CMP dword ptr [ESI + 0x24],0x0
006dd437 : JNZ 0x006dd446
006dd439 : MOV ECX,dword ptr [ESI + 0x28]
006dd43c : INC ECX
006dd43d : AND ECX,0x7
006dd440 : MOV dword ptr [ESI + 0x24],EDI
006dd443 : MOV dword ptr [ESI + 0x28],ECX
006dd446 : DEC dword ptr [ESI + 0x24]
006dd449 : POP EBP
006dd44a : POP EBX
006dd44b : POP EDI
006dd44c : MOV AL,0x1
006dd44e : POP ESI
006dd44f : ADD ESP,0x24
006dd452 : RET
006dd453 : POP EBP
006dd454 : POP EBX
006dd455 : POP EDI
006dd456 : XOR AL,AL
006dd458 : POP ESI
006dd459 : ADD ESP,0x24
006dd45c : RET
