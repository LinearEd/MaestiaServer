PROGRAM  : Maestia.exe
FUNCTION : FUN_004d20d0
ENTRY    : 004d20d0
BODY     : [[004d20d0, 004d22a2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004d20d0(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4,
                 undefined4 param_5,double param_6)

{
  double dVar1;
  int iVar2;
  char *pcVar3;
  int iVar4;
  char cVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  undefined1 auStack_f4 [40];
  undefined4 local_cc;
  int local_c8;
  undefined4 local_c4;
  char local_c0 [8];
  char local_b8 [116];
  uint local_44;
  
  dVar1 = param_6;
  local_44 = DAT_00d66fa0 ^ (uint)auStack_f4;
  local_c4 = param_1;
  iVar2 = *(int *)(param_4 + 0x14);
  local_c8 = param_4;
  if ((iVar2 < 1) && ((*(uint *)(param_4 + 0x10) & 0x2000) == 0)) {
    iVar2 = 6;
  }
  iVar4 = 0x24;
  if (iVar2 < 0x25) {
    iVar4 = iVar2;
  }
  uVar6 = *(uint *)(param_4 + 0x10);
  iVar2 = iVar2 - iVar4;
  uVar7 = 0;
  uVar8 = 0;
  if ((uVar6 & 0x3000) == 0x2000) {
    if (param_6 < 0.0) {
      param_6 = -param_6;
    }
    for (; (1e+35 <= param_6 && (uVar7 < 5000)); uVar7 = uVar7 + 10) {
      param_6 = param_6 * 1e-10;
    }
    if (0.0 < param_6) {
      for (; ((9 < iVar2 && (param_6 <= 1e-35)) && (uVar8 < 5000)); uVar8 = uVar8 + 10) {
        iVar2 = iVar2 + -10;
        param_6 = param_6 * 10000000000.0;
      }
    }
    if (dVar1 < 0.0) {
      param_6 = -param_6;
    }
  }
  local_c0[0] = '%';
  pcVar3 = local_c0 + 1;
  if ((uVar6 & 0x20) != 0) {
    local_c0[1] = 0x2b;
    pcVar3 = local_c0 + 2;
  }
  if ((uVar6 & 0x10) != 0) {
    *pcVar3 = '#';
    pcVar3 = pcVar3 + 1;
  }
  *pcVar3 = '.';
  pcVar3[1] = '*';
  pcVar3[2] = 'L';
  uVar6 = uVar6 & 0x3000;
  if (uVar6 == 0x2000) {
    cVar5 = 'f';
  }
  else if (uVar6 == 0x3000) {
    cVar5 = 'a';
  }
  else {
    cVar5 = (uVar6 != 0x1000) * '\x02' + 'e';
  }
  pcVar3[3] = cVar5;
  pcVar3[4] = '\0';
  iVar4 = _sprintf_s(local_b8,0x6c,local_c0,iVar4,param_6);
  FUN_004d2e50(local_cc,local_c4,param_2,param_3,local_c8,param_5,local_b8,uVar7,uVar8,iVar2,iVar4);
  __security_check_cookie(local_44 ^ (uint)auStack_f4);
  return;
}



============================================================
DISASSEMBLY
============================================================
004d20d0 : PUSH EBP
004d20d1 : MOV EBP,ESP
004d20d3 : AND ESP,0xffffffc0
004d20d6 : SUB ESP,0xb4
004d20dc : MOV EAX,[0x00d66fa0]
004d20e1 : XOR EAX,ESP
004d20e3 : MOV dword ptr [ESP + 0xb0],EAX
004d20ea : MOV EAX,dword ptr [EBP + 0x8]
004d20ed : MOV dword ptr [ESP + 0x28],ECX
004d20f1 : MOV ECX,dword ptr [EBP + 0x14]
004d20f4 : PUSH EBX
004d20f5 : MOV dword ptr [ESP + 0x34],EAX
004d20f9 : MOV EAX,dword ptr [ECX + 0x14]
004d20fc : PUSH ESI
004d20fd : PUSH EDI
004d20fe : MOV dword ptr [ESP + 0x38],ECX
004d2102 : TEST EAX,EAX
004d2104 : JG 0x004d2114
004d2106 : TEST dword ptr [ECX + 0x10],0x2000
004d210d : JNZ 0x004d2114
004d210f : MOV EAX,0x6
004d2114 : MOV ESI,EAX
004d2116 : CMP ESI,0x24
004d2119 : MOV EDX,0x24
004d211e : JG 0x004d2122
004d2120 : MOV EDX,ESI
004d2122 : MOV ECX,dword ptr [ECX + 0x10]
004d2125 : MOV EAX,ECX
004d2127 : AND EAX,0x3000
004d212c : SUB ESI,EDX
004d212e : XOR EBX,EBX
004d2130 : XOR EDI,EDI
004d2132 : CMP EAX,0x2000
004d2137 : JNZ 0x004d21df
004d213d : XORPS XMM3,XMM3
004d2140 : MOVSD XMM0,qword ptr [EBP + 0x1c]
004d2145 : COMISD XMM3,XMM0
004d2149 : MOVSD XMM4,qword ptr [0x00cdf790]
004d2151 : JBE 0x004d221d
004d2157 : XORPD XMM0,XMM4
004d215b : MOV AL,0x1
004d215d : MOVSD qword ptr [EBP + 0x1c],XMM0
004d2162 : MOVSD XMM1,qword ptr [0x00cdf788]
004d216a : COMISD XMM0,XMM1
004d216e : JC 0x004d2192
004d2170 : MOVSD XMM2,qword ptr [0x00cdf780]
004d2178 : CMP EBX,0x1388
004d217e : JNC 0x004d218d
004d2180 : MULSD XMM0,XMM2
004d2184 : ADD EBX,0xa
004d2187 : COMISD XMM0,XMM1
004d218b : JNC 0x004d2178
004d218d : MOVSD qword ptr [EBP + 0x1c],XMM0
004d2192 : COMISD XMM0,XMM3
004d2196 : JBE 0x004d21d2
004d2198 : CMP ESI,0xa
004d219b : JL 0x004d21d2
004d219d : MOVSD XMM1,qword ptr [0x00cdf778]
004d21a5 : MOVSD XMM2,qword ptr [0x00cdf770]
004d21ad : LEA ECX,[ECX]
004d21b0 : COMISD XMM1,XMM0
004d21b4 : JC 0x004d21cd
004d21b6 : CMP EDI,0x1388
004d21bc : JNC 0x004d21cd
004d21be : SUB ESI,0xa
004d21c1 : ADD EDI,0xa
004d21c4 : CMP ESI,0xa
004d21c7 : MULSD XMM0,XMM2
004d21cb : JGE 0x004d21b0
004d21cd : MOVSD qword ptr [EBP + 0x1c],XMM0
004d21d2 : TEST AL,AL
004d21d4 : JZ 0x004d21df
004d21d6 : XORPD XMM0,XMM4
004d21da : MOVSD qword ptr [EBP + 0x1c],XMM0
004d21df : MOV byte ptr [ESP + 0x40],0x25
004d21e4 : LEA EAX,[ESP + 0x41]
004d21e8 : TEST CL,0x20
004d21eb : JZ 0x004d21f6
004d21ed : MOV byte ptr [ESP + 0x41],0x2b
004d21f2 : LEA EAX,[ESP + 0x42]
004d21f6 : TEST CL,0x10
004d21f9 : JZ 0x004d21ff
004d21fb : MOV byte ptr [EAX],0x23
004d21fe : INC EAX
004d21ff : MOV byte ptr [EAX],0x2e
004d2202 : INC EAX
004d2203 : MOV byte ptr [EAX],0x2a
004d2206 : INC EAX
004d2207 : MOV byte ptr [EAX],0x4c
004d220a : AND ECX,0x3000
004d2210 : INC EAX
004d2211 : CMP ECX,0x2000
004d2217 : JNZ 0x004d2224
004d2219 : MOV CL,0x66
004d221b : JMP 0x004d223d
004d221d : XOR AL,AL
004d221f : JMP 0x004d2162
004d2224 : CMP ECX,0x3000
004d222a : JNZ 0x004d2230
004d222c : MOV CL,0x61
004d222e : JMP 0x004d223d
004d2230 : CMP ECX,0x1000
004d2236 : SETNZ CL
004d2239 : LEA ECX,[ECX + ECX*0x1 + 0x65]
004d223d : FLD double ptr [EBP + 0x1c]
004d2240 : SUB ESP,0x8
004d2243 : FSTP double ptr [ESP]
004d2246 : PUSH EDX
004d2247 : MOV byte ptr [EAX],CL
004d2249 : LEA ECX,[ESP + 0x4c]
004d224d : PUSH ECX
004d224e : LEA EDX,[ESP + 0x58]
004d2252 : PUSH 0x6c
004d2254 : PUSH EDX
004d2255 : MOV byte ptr [EAX + 0x1],0x0
004d2259 : CALL 0x00637e58
004d225e : MOV ECX,dword ptr [EBP + 0x18]
004d2261 : MOV EDX,dword ptr [ESP + 0x50]
004d2265 : PUSH EAX
004d2266 : PUSH ESI
004d2267 : MOV ESI,dword ptr [ESP + 0x5c]
004d226b : PUSH EDI
004d226c : PUSH EBX
004d226d : LEA EAX,[ESP + 0x70]
004d2271 : PUSH EAX
004d2272 : MOV EAX,dword ptr [EBP + 0x10]
004d2275 : PUSH ECX
004d2276 : MOV ECX,dword ptr [EBP + 0xc]
004d2279 : PUSH EDX
004d227a : MOV EDX,dword ptr [ESP + 0x68]
004d227e : PUSH EAX
004d227f : PUSH ECX
004d2280 : PUSH ESI
004d2281 : PUSH EDX
004d2282 : CALL 0x004d2e50
004d2287 : MOV ECX,dword ptr [ESP + 0x100]
004d228e : ADD ESP,0x44
004d2291 : POP EDI
004d2292 : MOV EAX,ESI
004d2294 : POP ESI
004d2295 : POP EBX
004d2296 : XOR ECX,ESP
004d2298 : CALL 0x00633e6b
004d229d : MOV ESP,EBP
004d229f : POP EBP
004d22a0 : RET 0x1c
