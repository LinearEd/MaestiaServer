PROGRAM  : Maestia.exe
FUNCTION : FUN_0068a810
ENTRY    : 0068a810
BODY     : [[0068a810, 0068aa3c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 *
FUN_0068a810(undefined4 *param_1,undefined4 param_2,int param_3,int param_4,int param_5,int *param_6
            ,size_t *param_7)

{
  undefined4 uVar1;
  undefined4 uVar2;
  size_t *psVar3;
  undefined2 uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  void *_Base;
  int iVar9;
  int *piVar10;
  int local_8;
  
  uVar2 = param_2;
  uVar1 = *param_1;
  param_1 = (undefined4 *)FUN_006877c0(param_2,param_3);
  if (param_1 == (undefined4 *)0x0) {
    uVar5 = FUN_00687a80(uVar2,&param_1);
    if (param_1 == (undefined4 *)0x0) {
      local_8 = (int)param_1;
      if ((uVar5 & 0xffff) != 0xffffffff) {
        do {
          iVar6 = FUN_00687bd0(uVar2,&param_1);
          if (param_1 != (undefined4 *)0x0) {
            return (undefined4 *)(int)param_1;
          }
          uVar7 = FUN_00687a80(uVar2,&param_1);
          if (param_1 != (undefined4 *)0x0) {
            return (undefined4 *)(int)param_1;
          }
          uVar8 = FUN_00687a80(uVar2,&param_1);
          psVar3 = param_7;
          if (param_1 != (undefined4 *)0x0) {
            return (undefined4 *)(int)param_1;
          }
          if (iVar6 == param_5) {
            *param_7 = (uVar7 & 0xffff) + 1;
            param_1 = (undefined4 *)FUN_006877c0(uVar2,(uVar8 & 0xffff) + param_3);
            if (param_1 != (undefined4 *)0x0) {
              return (undefined4 *)(int)param_1;
            }
            _Base = (void *)FUN_0068a220(uVar1,8,0,*psVar3,0,&param_1);
            if (param_1 != (undefined4 *)0x0) {
              return (undefined4 *)(int)param_1;
            }
            local_8 = (int)param_1;
            if (0 < (int)*psVar3) goto LAB_0068a920;
            goto LAB_0068a9b2;
          }
          local_8 = local_8 + 1;
        } while (local_8 < (int)((uVar5 & 0xffff) + 1));
      }
      param_1 = (undefined4 *)0x1;
    }
  }
  return param_1;
  while( true ) {
    *(uint *)((int)_Base + local_8 * 8 + 4) = uVar5 & 0xffffff;
    local_8 = local_8 + 1;
    if ((int)*psVar3 <= local_8) break;
LAB_0068a920:
    uVar4 = FUN_00687a80(uVar2,&param_1);
    *(undefined2 *)((int)_Base + local_8 * 8) = uVar4;
    if ((((param_1 != (undefined4 *)0x0) ||
         (param_1 = (undefined4 *)FUN_00687800(uVar2,2), param_1 != (undefined4 *)0x0)) ||
        (uVar5 = FUN_00687bd0(uVar2,&param_1), param_1 != (undefined4 *)0x0)) ||
       (param_1 = (undefined4 *)FUN_00687800(uVar2,4), param_1 != (undefined4 *)0x0))
    goto LAB_0068aa25;
  }
LAB_0068a9b2:
  _qsort(_Base,*psVar3,8,(_PtFuncCompare *)&LAB_00687760);
  iVar6 = FUN_0068a220(uVar1,4,0,*psVar3,0,&param_1);
  if (param_1 == (undefined4 *)0x0) {
    iVar9 = 0;
    if (0 < (int)*psVar3) {
      piVar10 = (int *)((int)_Base + 4);
      do {
        *(int *)(iVar6 + iVar9 * 4) = *piVar10 + param_4;
        iVar9 = iVar9 + 1;
        piVar10 = piVar10 + 2;
      } while (iVar9 < (int)*psVar3);
    }
    *param_6 = iVar6;
    FUN_00687f30(uVar1,_Base);
    return (undefined4 *)0;
  }
LAB_0068aa25:
  iVar6 = (int)param_1;
  FUN_00687f30(uVar1,_Base);
  return (undefined4 *)iVar6;
}



============================================================
DISASSEMBLY
============================================================
0068a810 : SUB ESP,0xc
0068a813 : MOV EDX,dword ptr [ESP + 0x18]
0068a817 : MOV EAX,dword ptr [ESP + 0x10]
0068a81b : MOV ECX,dword ptr [EAX]
0068a81d : PUSH EDI
0068a81e : MOV EDI,dword ptr [ESP + 0x18]
0068a822 : PUSH EDX
0068a823 : PUSH EDI
0068a824 : MOV dword ptr [ESP + 0x14],ECX
0068a828 : CALL 0x006877c0
0068a82d : ADD ESP,0x8
0068a830 : MOV dword ptr [ESP + 0x14],EAX
0068a834 : TEST EAX,EAX
0068a836 : JNZ 0x0068a8c6
0068a83c : PUSH ESI
0068a83d : LEA EAX,[ESP + 0x18]
0068a841 : PUSH EAX
0068a842 : PUSH EDI
0068a843 : CALL 0x00687a80
0068a848 : MOVZX ESI,AX
0068a84b : MOV EAX,dword ptr [ESP + 0x20]
0068a84f : ADD ESP,0x8
0068a852 : TEST EAX,EAX
0068a854 : JNZ 0x0068a8c5
0068a856 : INC ESI
0068a857 : PUSH EBX
0068a858 : PUSH EBP
0068a859 : MOV dword ptr [ESP + 0x14],EAX
0068a85d : TEST ESI,ESI
0068a85f : JLE 0x0068a8be
0068a861 : LEA ECX,[ESP + 0x20]
0068a865 : PUSH ECX
0068a866 : PUSH EDI
0068a867 : CALL 0x00687bd0
0068a86c : MOV EBP,EAX
0068a86e : MOV EAX,dword ptr [ESP + 0x28]
0068a872 : ADD ESP,0x8
0068a875 : TEST EAX,EAX
0068a877 : JNZ 0x0068a8c3
0068a879 : LEA EDX,[ESP + 0x20]
0068a87d : PUSH EDX
0068a87e : PUSH EDI
0068a87f : CALL 0x00687a80
0068a884 : MOVZX EBX,AX
0068a887 : MOV EAX,dword ptr [ESP + 0x28]
0068a88b : ADD ESP,0x8
0068a88e : TEST EAX,EAX
0068a890 : JNZ 0x0068a8c3
0068a892 : LEA EAX,[ESP + 0x20]
0068a896 : PUSH EAX
0068a897 : PUSH EDI
0068a898 : CALL 0x00687a80
0068a89d : MOVZX ECX,AX
0068a8a0 : MOV EAX,dword ptr [ESP + 0x28]
0068a8a4 : ADD ESP,0x8
0068a8a7 : TEST EAX,EAX
0068a8a9 : JNZ 0x0068a8c3
0068a8ab : CMP EBP,dword ptr [ESP + 0x30]
0068a8af : JZ 0x0068a8cb
0068a8b1 : MOV EAX,dword ptr [ESP + 0x14]
0068a8b5 : INC EAX
0068a8b6 : CMP EAX,ESI
0068a8b8 : MOV dword ptr [ESP + 0x14],EAX
0068a8bc : JL 0x0068a861
0068a8be : MOV EAX,0x1
0068a8c3 : POP EBP
0068a8c4 : POP EBX
0068a8c5 : POP ESI
0068a8c6 : POP EDI
0068a8c7 : ADD ESP,0xc
0068a8ca : RET
0068a8cb : MOV EAX,dword ptr [ESP + 0x28]
0068a8cf : ADD ECX,EAX
0068a8d1 : LEA EDX,[EBX + 0x1]
0068a8d4 : MOV EBX,dword ptr [ESP + 0x38]
0068a8d8 : PUSH ECX
0068a8d9 : PUSH EDI
0068a8da : MOV dword ptr [EBX],EDX
0068a8dc : CALL 0x006877c0
0068a8e1 : ADD ESP,0x8
0068a8e4 : MOV dword ptr [ESP + 0x20],EAX
0068a8e8 : TEST EAX,EAX
0068a8ea : JNZ 0x0068a8c3
0068a8ec : MOV EDX,dword ptr [EBX]
0068a8ee : LEA ECX,[ESP + 0x20]
0068a8f2 : PUSH ECX
0068a8f3 : PUSH EAX
0068a8f4 : PUSH EDX
0068a8f5 : PUSH EAX
0068a8f6 : MOV EAX,dword ptr [ESP + 0x28]
0068a8fa : PUSH 0x8
0068a8fc : PUSH EAX
0068a8fd : CALL 0x0068a220
0068a902 : MOV EBP,EAX
0068a904 : MOV EAX,dword ptr [ESP + 0x38]
0068a908 : ADD ESP,0x18
0068a90b : MOV dword ptr [ESP + 0x10],EBP
0068a90f : TEST EAX,EAX
0068a911 : JNZ 0x0068a8c3
0068a913 : CMP dword ptr [EBX],EAX
0068a915 : MOV dword ptr [ESP + 0x14],EAX
0068a919 : JLE 0x0068a9b2
0068a91f : NOP
0068a920 : LEA ECX,[ESP + 0x20]
0068a924 : PUSH ECX
0068a925 : PUSH EDI
0068a926 : CALL 0x00687a80
0068a92b : MOV ESI,dword ptr [ESP + 0x28]
0068a92f : MOV EDX,dword ptr [ESP + 0x1c]
0068a933 : ADD ESP,0x8
0068a936 : MOV word ptr [EBP + EDX*0x8],AX
0068a93b : TEST ESI,ESI
0068a93d : JNZ 0x0068aa25
0068a943 : PUSH 0x2
0068a945 : PUSH EDI
0068a946 : CALL 0x00687800
0068a94b : MOV ESI,EAX
0068a94d : ADD ESP,0x8
0068a950 : MOV dword ptr [ESP + 0x20],ESI
0068a954 : TEST ESI,ESI
0068a956 : JNZ 0x0068aa25
0068a95c : LEA EAX,[ESP + 0x20]
0068a960 : PUSH EAX
0068a961 : PUSH EDI
0068a962 : CALL 0x00687bd0
0068a967 : MOV ESI,dword ptr [ESP + 0x28]
0068a96b : ADD ESP,0x8
0068a96e : MOV EBP,EAX
0068a970 : TEST ESI,ESI
0068a972 : JNZ 0x0068aa21
0068a978 : PUSH 0x4
0068a97a : PUSH EDI
0068a97b : CALL 0x00687800
0068a980 : MOV ESI,EAX
0068a982 : ADD ESP,0x8
0068a985 : MOV dword ptr [ESP + 0x20],ESI
0068a989 : TEST ESI,ESI
0068a98b : JNZ 0x0068aa21
0068a991 : MOV EAX,dword ptr [ESP + 0x14]
0068a995 : MOV ECX,dword ptr [ESP + 0x10]
0068a999 : AND EBP,0xffffff
0068a99f : MOV dword ptr [ECX + EAX*0x8 + 0x4],EBP
0068a9a3 : INC EAX
0068a9a4 : CMP EAX,dword ptr [EBX]
0068a9a6 : MOV dword ptr [ESP + 0x14],EAX
0068a9aa : MOV EBP,ECX
0068a9ac : JL 0x0068a920
0068a9b2 : MOV EDX,dword ptr [EBX]
0068a9b4 : PUSH 0x687760
0068a9b9 : PUSH 0x8
0068a9bb : PUSH EDX
0068a9bc : PUSH EBP
0068a9bd : CALL 0x00635ad0
0068a9c2 : MOV ECX,dword ptr [EBX]
0068a9c4 : MOV EDX,dword ptr [ESP + 0x28]
0068a9c8 : LEA EAX,[ESP + 0x30]
0068a9cc : PUSH EAX
0068a9cd : PUSH 0x0
0068a9cf : PUSH ECX
0068a9d0 : PUSH 0x0
0068a9d2 : PUSH 0x4
0068a9d4 : PUSH EDX
0068a9d5 : CALL 0x0068a220
0068a9da : MOV ESI,dword ptr [ESP + 0x48]
0068a9de : ADD ESP,0x28
0068a9e1 : TEST ESI,ESI
0068a9e3 : JNZ 0x0068aa25
0068a9e5 : XOR ECX,ECX
0068a9e7 : CMP dword ptr [EBX],ECX
0068a9e9 : JLE 0x0068aa01
0068a9eb : MOV ESI,dword ptr [ESP + 0x2c]
0068a9ef : LEA EDX,[EBP + 0x4]
0068a9f2 : MOV EDI,dword ptr [EDX]
0068a9f4 : ADD EDI,ESI
0068a9f6 : MOV dword ptr [EAX + ECX*0x4],EDI
0068a9f9 : INC ECX
0068a9fa : ADD EDX,0x8
0068a9fd : CMP ECX,dword ptr [EBX]
0068a9ff : JL 0x0068a9f2
0068aa01 : MOV EDX,dword ptr [ESP + 0x18]
0068aa05 : MOV ECX,dword ptr [ESP + 0x34]
0068aa09 : PUSH EBP
0068aa0a : PUSH EDX
0068aa0b : MOV dword ptr [ECX],EAX
0068aa0d : XOR ESI,ESI
0068aa0f : CALL 0x00687f30
0068aa14 : ADD ESP,0x8
0068aa17 : POP EBP
0068aa18 : POP EBX
0068aa19 : MOV EAX,ESI
0068aa1b : POP ESI
0068aa1c : POP EDI
0068aa1d : ADD ESP,0xc
0068aa20 : RET
0068aa21 : MOV EBP,dword ptr [ESP + 0x10]
0068aa25 : MOV EDX,dword ptr [ESP + 0x18]
0068aa29 : PUSH EBP
0068aa2a : PUSH EDX
0068aa2b : CALL 0x00687f30
0068aa30 : ADD ESP,0x8
0068aa33 : POP EBP
0068aa34 : POP EBX
0068aa35 : MOV EAX,ESI
0068aa37 : POP ESI
0068aa38 : POP EDI
0068aa39 : ADD ESP,0xc
0068aa3c : RET
