PROGRAM  : Maestia.exe
FUNCTION : FUN_00515110
ENTRY    : 00515110
BODY     : [[00515110, 0051517b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00515110(undefined4 param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  GRefCountImpl *pGVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int *in_ECX;
  
  pGVar2 = (GRefCountImpl *)*param_2;
  uVar3 = *(uint *)(pGVar2 + 8);
  iVar4 = *in_ECX;
  if ((iVar4 != 0) && (iVar5 = FUN_00514fa0(param_2,*(uint *)(iVar4 + 4) & uVar3), -1 < iVar5)) {
    puVar1 = (undefined4 *)(iVar4 + 0x10 + iVar5 * 0xc);
    if (pGVar2 != (GRefCountImpl *)0x0) {
      GRefCountImpl::AddRef(pGVar2);
    }
    pGVar2 = (GRefCountImpl *)*puVar1;
    if (pGVar2 != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(pGVar2);
    }
    *puVar1 = *param_2;
    return;
  }
  FUN_00513fc0(param_1,param_2,uVar3);
  return;
}



============================================================
DISASSEMBLY
============================================================
00515110 : MOV EAX,dword ptr [ESP + 0x8]
00515114 : PUSH EBX
00515115 : MOV EBX,dword ptr [EAX]
00515117 : PUSH EBP
00515118 : MOV EBP,dword ptr [EBX + 0x8]
0051511b : PUSH ESI
0051511c : PUSH EDI
0051511d : MOV EDI,ECX
0051511f : MOV ESI,dword ptr [EDI]
00515121 : TEST ESI,ESI
00515123 : JZ 0x00515167
00515125 : MOV ECX,dword ptr [ESI + 0x4]
00515128 : AND ECX,EBP
0051512a : PUSH ECX
0051512b : PUSH EAX
0051512c : MOV ECX,EDI
0051512e : CALL 0x00514fa0
00515133 : TEST EAX,EAX
00515135 : JL 0x00515163
00515137 : LEA EDX,[EAX + EAX*0x2]
0051513a : LEA ESI,[ESI + EDX*0x4 + 0x10]
0051513e : TEST EBX,EBX
00515140 : JZ 0x00515149
00515142 : MOV ECX,EBX
00515144 : CALL 0x00523dd0
00515149 : MOV ECX,dword ptr [ESI]
0051514b : TEST ECX,ECX
0051514d : JZ 0x00515154
0051514f : CALL 0x004ff7e0
00515154 : MOV EAX,dword ptr [ESP + 0x18]
00515158 : MOV ECX,dword ptr [EAX]
0051515a : POP EDI
0051515b : MOV dword ptr [ESI],ECX
0051515d : POP ESI
0051515e : POP EBP
0051515f : POP EBX
00515160 : RET 0x8
00515163 : MOV EAX,dword ptr [ESP + 0x18]
00515167 : MOV EDX,dword ptr [ESP + 0x14]
0051516b : PUSH EBP
0051516c : PUSH EAX
0051516d : PUSH EDX
0051516e : MOV ECX,EDI
00515170 : CALL 0x00513fc0
00515175 : POP EDI
00515176 : POP ESI
00515177 : POP EBP
00515178 : POP EBX
00515179 : RET 0x8
