PROGRAM  : Maestia.exe
FUNCTION : FUN_005974e0
ENTRY    : 005974e0
BODY     : [[005974e0, 0059753b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005974e0(int param_1)

{
  int iVar1;
  GRefCountNTSImpl *this;
  undefined4 *puVar2;
  int *in_ECX;
  
  if (param_1 != *(int *)in_ECX[3]) {
    if (*(int *)in_ECX[3] != 0) {
      (**(code **)(*in_ECX + 0x68))();
      iVar1 = in_ECX[3];
      this = *(GRefCountNTSImpl **)(iVar1 + 4);
      if (this != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(this);
      }
      *(undefined4 *)(iVar1 + 4) = 0;
    }
    puVar2 = (undefined4 *)in_ECX[3];
    if ((GRefCountNTSImpl *)puVar2[1] != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release((GRefCountNTSImpl *)puVar2[1]);
    }
    puVar2[1] = 0;
    *puVar2 = 0;
    *(int *)in_ECX[3] = param_1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005974e0 : PUSH EBX
005974e1 : MOV EBX,dword ptr [ESP + 0x8]
005974e5 : PUSH ESI
005974e6 : MOV ESI,ECX
005974e8 : MOV EAX,dword ptr [ESI + 0xc]
005974eb : MOV EAX,dword ptr [EAX]
005974ed : CMP EBX,EAX
005974ef : JZ 0x00597537
005974f1 : PUSH EDI
005974f2 : TEST EAX,EAX
005974f4 : JZ 0x00597515
005974f6 : MOV EDX,dword ptr [ESI]
005974f8 : MOV EAX,dword ptr [EDX + 0x68]
005974fb : CALL EAX
005974fd : MOV EDI,dword ptr [ESI + 0xc]
00597500 : MOV ECX,dword ptr [EDI + 0x4]
00597503 : ADD EDI,0x4
00597506 : TEST ECX,ECX
00597508 : JZ 0x0059750f
0059750a : CALL 0x004ff7c0
0059750f : MOV dword ptr [EDI],0x0
00597515 : MOV EDI,dword ptr [ESI + 0xc]
00597518 : MOV ECX,dword ptr [EDI + 0x4]
0059751b : TEST ECX,ECX
0059751d : JZ 0x00597524
0059751f : CALL 0x004ff7c0
00597524 : MOV dword ptr [EDI + 0x4],0x0
0059752b : MOV dword ptr [EDI],0x0
00597531 : MOV ECX,dword ptr [ESI + 0xc]
00597534 : MOV dword ptr [ECX],EBX
00597536 : POP EDI
00597537 : POP ESI
00597538 : POP EBX
00597539 : RET 0x4
