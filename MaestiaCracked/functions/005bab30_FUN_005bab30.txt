PROGRAM  : Maestia.exe
FUNCTION : FUN_005bab30
ENTRY    : 005bab30
BODY     : [[005bab30, 005bac4a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005bab30(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005b97f0);
    *puVar3 = &PTR_LAB_00b909d8;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x54,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005ba8e0(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x1d;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x7c,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005bab30 : SUB ESP,0x18
005bab33 : PUSH EBX
005bab34 : PUSH EBP
005bab35 : PUSH ESI
005bab36 : MOV ESI,dword ptr [ESP + 0x2c]
005bab3a : MOV ECX,dword ptr [ESI + 0x288]
005bab40 : PUSH EDI
005bab41 : XOR EBX,EBX
005bab43 : PUSH EBX
005bab44 : PUSH 0x34
005bab46 : MOV dword ptr [ESP + 0x18],ESI
005bab4a : MOV byte ptr [ESP + 0x1c],0x8
005bab4f : CALL 0x00515840
005bab54 : MOV EDI,EAX
005bab56 : CMP EDI,EBX
005bab58 : JZ 0x005bab7a
005bab5a : PUSH 0x5b97f0
005bab5f : LEA EAX,[ESP + 0x14]
005bab63 : PUSH EAX
005bab64 : MOV ECX,EDI
005bab66 : CALL 0x00568960
005bab6b : MOV dword ptr [EDI],0xb909d8
005bab71 : MOV dword ptr [EDI + 0x10],0xb90510
005bab78 : JMP 0x005bab7c
005bab7a : XOR EDI,EDI
005bab7c : MOV EBP,dword ptr [ESP + 0x2c]
005bab80 : PUSH EBX
005bab81 : MOV byte ptr [EBP + 0x8],BL
005bab84 : MOV dword ptr [EBP],EDI
005bab87 : MOV dword ptr [EBP + 0x4],EBX
005bab8a : MOV ECX,dword ptr [ESI + 0x288]
005bab90 : PUSH 0x54
005bab92 : CALL 0x00515840
005bab97 : MOV EDI,EAX
005bab99 : CMP EDI,EBX
005bab9b : JZ 0x005babc7
005bab9d : PUSH EBP
005bab9e : PUSH 0x1
005baba0 : MOV ECX,ESI
005baba2 : CALL 0x00530910
005baba7 : PUSH EAX
005baba8 : LEA ECX,[ESP + 0x18]
005babac : PUSH ECX
005babad : MOV ECX,EDI
005babaf : CALL 0x005ba8e0
005babb4 : MOV EBX,EAX
005babb6 : TEST EBX,EBX
005babb8 : JZ 0x005babc7
005babba : MOV EDX,dword ptr [EBX + 0x8]
005babbd : INC EDX
005babbe : AND EDX,0x8fffffff
005babc4 : MOV dword ptr [EBX + 0x8],EDX
005babc7 : LEA EAX,[ESP + 0x30]
005babcb : PUSH EAX
005babcc : LEA ECX,[ESP + 0x30]
005babd0 : PUSH ECX
005babd1 : LEA ECX,[ESI + 0x278]
005babd7 : MOV dword ptr [ESP + 0x38],EBX
005babdb : MOV dword ptr [ESP + 0x34],0x1d
005babe3 : CALL 0x0050ff10
005babe8 : MOV ECX,dword ptr [ESP + 0x30]
005babec : TEST ECX,ECX
005babee : JZ 0x005babf5
005babf0 : CALL 0x00503db0
005babf5 : MOV EAX,dword ptr [ESI + 0x2a0]
005babfb : ADD EAX,0x10
005babfe : LEA EDX,[ESP + 0x30]
005bac02 : MOV byte ptr [ESP + 0x30],0x0
005bac07 : MOV EDI,dword ptr [EAX]
005bac09 : PUSH EDX
005bac0a : PUSH EBP
005bac0b : LEA ECX,[ESP + 0x20]
005bac0f : MOV dword ptr [ESP + 0x34],EAX
005bac13 : ADD EDI,0x28
005bac16 : CALL 0x00526210
005bac1b : MOV ECX,dword ptr [ESP + 0x30]
005bac1f : MOV EDX,dword ptr [EDI]
005bac21 : PUSH EAX
005bac22 : ADD ESI,0x7c
005bac25 : PUSH ESI
005bac26 : LEA EAX,[ESP + 0x1c]
005bac2a : PUSH EAX
005bac2b : CALL EDX
005bac2d : LEA ECX,[ESP + 0x18]
005bac31 : CALL 0x00526bc0
005bac36 : TEST EBX,EBX
005bac38 : JZ 0x005bac41
005bac3a : MOV ECX,EBX
005bac3c : CALL 0x00503db0
005bac41 : POP EDI
005bac42 : POP ESI
005bac43 : MOV EAX,EBP
005bac45 : POP EBP
005bac46 : POP EBX
005bac47 : ADD ESP,0x18
005bac4a : RET
