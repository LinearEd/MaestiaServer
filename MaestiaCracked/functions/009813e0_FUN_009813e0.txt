PROGRAM  : Maestia.exe
FUNCTION : FUN_009813e0
ENTRY    : 009813e0
BODY     : [[009813e0, 009815cb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009813e0(undefined4 param_1,undefined4 param_2,wchar_t *param_3)

{
  wchar_t wVar1;
  uint uVar2;
  wchar_t *pwVar3;
  int iVar4;
  wchar_t *pwVar5;
  uint uVar6;
  uint extraout_EDX;
  bool bVar7;
  undefined4 in_stack_0000001c;
  uint in_stack_00000020;
  wchar_t local_114;
  undefined1 local_112 [254];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b1326d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_8 = 0;
  local_14 = uVar2;
  if (*(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54) == 0) {
    local_8 = 0xffffffff;
    if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
    uVar6 = 0;
  }
  else {
    local_114 = L'\0';
    _memset(local_112,0,0xfe);
    pwVar3 = param_3;
    if (in_stack_00000020 < 8) {
      pwVar3 = (wchar_t *)&param_3;
    }
    _wcscpy_s(&local_114,0x80,pwVar3);
    pwVar3 = _wcsstr(&local_114,L"GM_");
    if (pwVar3 == (wchar_t *)0x0) {
      pwVar3 = &local_114;
    }
    else {
      pwVar3 = pwVar3 + 3;
    }
    iVar4 = *(int *)(DAT_00da93ec + 0xac);
    if (*(uint *)(iVar4 + 0x24) < 8) {
      pwVar5 = (wchar_t *)(iVar4 + 0x10);
    }
    else {
      pwVar5 = *(wchar_t **)(iVar4 + 0x10);
    }
    do {
      wVar1 = *pwVar3;
      uVar6 = (uint)(ushort)wVar1;
      bVar7 = (ushort)wVar1 < (ushort)*pwVar5;
      if (wVar1 != *pwVar5) {
LAB_009814f6:
        iVar4 = (1 - (uint)bVar7) - (uint)(bVar7 != 0);
        goto LAB_009814fb;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar3[1];
      uVar6 = (uint)(ushort)wVar1;
      bVar7 = (ushort)wVar1 < (ushort)pwVar5[1];
      if (wVar1 != pwVar5[1]) goto LAB_009814f6;
      pwVar3 = pwVar3 + 2;
      pwVar5 = pwVar5 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_009814fb:
    if (iVar4 != 0) {
      iVar4 = *DAT_00da9894;
      if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
        (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                  (*(int **)(iVar4 + 0x114),"MinimapSetPC","%d%ls");
      }
      iVar4 = *DAT_00da9894;
      if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
        (**(code **)(**(int **)(iVar4 + 0x114) + 4))
                  (*(int **)(iVar4 + 0x114),"ZoneMapSetPC","%d%ls");
      }
      FUN_00980ac0();
      uVar6 = extraout_EDX;
    }
    local_8 = 0xffffffff;
    if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
  }
  local_8 = 0xffffffff;
  param_3 = (wchar_t *)((uint)param_3 & 0xffff0000);
  in_stack_0000001c = 0;
  in_stack_00000020 = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc,uVar6,param_1);
  return;
}



============================================================
DISASSEMBLY
============================================================
009813e0 : PUSH EBP
009813e1 : MOV EBP,ESP
009813e3 : PUSH -0x1
009813e5 : PUSH 0xb1326d
009813ea : MOV EAX,FS:[0x0]
009813f0 : PUSH EAX
009813f1 : SUB ESP,0x108
009813f7 : MOV EAX,[0x00d66fa0]
009813fc : XOR EAX,EBP
009813fe : MOV dword ptr [EBP + -0x10],EAX
00981401 : PUSH EBX
00981402 : PUSH EAX
00981403 : LEA EAX,[EBP + -0xc]
00981406 : MOV FS:[0x0],EAX
0098140c : MOV EAX,dword ptr [EBP + 0x8]
0098140f : MOV dword ptr [EBP + 0xfffffeec],EAX
00981415 : MOV dword ptr [EBP + -0x4],0x0
0098141c : MOV ECX,dword ptr [0x0172491c]
00981422 : MOV EAX,dword ptr [ECX + 0x17c]
00981428 : CMP dword ptr [EAX + 0x1f54],0x0
0098142f : JNZ 0x00981451
00981431 : MOV dword ptr [EBP + -0x4],0xffffffff
00981438 : CMP dword ptr [EBP + 0x24],0x8
0098143c : JC 0x00981446
0098143e : MOV ECX,dword ptr [EBP + 0x10]
00981441 : CALL 0x006f04e0
00981446 : XOR EDX,EDX
00981448 : MOV word ptr [EBP + 0x10],DX
0098144c : JMP 0x009815a2
00981451 : XOR EAX,EAX
00981453 : PUSH 0xfe
00981458 : PUSH EAX
00981459 : LEA ECX,[EBP + 0xfffffef2]
0098145f : PUSH ECX
00981460 : MOV word ptr [EBP + 0xfffffef0],AX
00981467 : CALL 0x0063b700
0098146c : MOV EAX,dword ptr [EBP + 0x10]
0098146f : MOV EBX,0x8
00981474 : ADD ESP,0xc
00981477 : CMP dword ptr [EBP + 0x24],EBX
0098147a : JNC 0x0098147f
0098147c : LEA EAX,[EBP + 0x10]
0098147f : PUSH EAX
00981480 : LEA EDX,[EBP + 0xfffffef0]
00981486 : PUSH 0x80
0098148b : PUSH EDX
0098148c : CALL 0x0063481b
00981491 : LEA EAX,[EBP + 0xfffffef0]
00981497 : PUSH 0xc7fe40
0098149c : PUSH EAX
0098149d : CALL 0x006347ba
009814a2 : ADD ESP,0x14
009814a5 : TEST EAX,EAX
009814a7 : JZ 0x009814ae
009814a9 : ADD EAX,0x6
009814ac : JMP 0x009814b4
009814ae : LEA EAX,[EBP + 0xfffffef0]
009814b4 : MOV ECX,dword ptr [0x00da93ec]
009814ba : MOV ECX,dword ptr [ECX + 0xac]
009814c0 : ADD ECX,0xc
009814c3 : CMP dword ptr [ECX + 0x18],EBX
009814c6 : JC 0x009814cd
009814c8 : MOV ECX,dword ptr [ECX + 0x4]
009814cb : JMP 0x009814d0
009814cd : ADD ECX,0x4
009814d0 : MOV DX,word ptr [EAX]
009814d3 : CMP DX,word ptr [ECX]
009814d6 : JNZ 0x009814f6
009814d8 : TEST DX,DX
009814db : JZ 0x009814f2
009814dd : MOV DX,word ptr [EAX + 0x2]
009814e1 : CMP DX,word ptr [ECX + 0x2]
009814e5 : JNZ 0x009814f6
009814e7 : ADD EAX,0x4
009814ea : ADD ECX,0x4
009814ed : TEST DX,DX
009814f0 : JNZ 0x009814d0
009814f2 : XOR EAX,EAX
009814f4 : JMP 0x009814fb
009814f6 : SBB EAX,EAX
009814f8 : SBB EAX,-0x1
009814fb : TEST EAX,EAX
009814fd : JZ 0x00981588
00981503 : MOV EDX,dword ptr [0x00da9894]
00981509 : MOV EAX,dword ptr [EDX]
0098150b : TEST EAX,EAX
0098150d : JZ 0x00981540
0098150f : CMP dword ptr [EAX + 0x114],0x0
00981516 : JZ 0x00981540
00981518 : MOV EAX,dword ptr [EAX + 0x114]
0098151e : MOV ECX,dword ptr [EBP + 0x10]
00981521 : CMP dword ptr [EBP + 0x24],EBX
00981524 : JNC 0x00981529
00981526 : LEA ECX,[EBP + 0x10]
00981529 : MOV EDX,dword ptr [EAX]
0098152b : PUSH ECX
0098152c : PUSH EDI
0098152d : PUSH 0xc7fe48
00981532 : PUSH 0xc7fe50
00981537 : PUSH EAX
00981538 : MOV EAX,dword ptr [EDX + 0x4]
0098153b : CALL EAX
0098153d : ADD ESP,0x14
00981540 : MOV ECX,dword ptr [0x00da9894]
00981546 : MOV EAX,dword ptr [ECX]
00981548 : TEST EAX,EAX
0098154a : JZ 0x0098157d
0098154c : CMP dword ptr [EAX + 0x114],0x0
00981553 : JZ 0x0098157d
00981555 : MOV EAX,dword ptr [EAX + 0x114]
0098155b : MOV ECX,dword ptr [EBP + 0x10]
0098155e : CMP dword ptr [EBP + 0x24],EBX
00981561 : JNC 0x00981566
00981563 : LEA ECX,[EBP + 0x10]
00981566 : MOV EDX,dword ptr [EAX]
00981568 : PUSH ECX
00981569 : PUSH EDI
0098156a : PUSH 0xc7fe60
0098156f : PUSH 0xc7fe68
00981574 : PUSH EAX
00981575 : MOV EAX,dword ptr [EDX + 0x4]
00981578 : CALL EAX
0098157a : ADD ESP,0x14
0098157d : MOV EAX,dword ptr [EBP + 0xfffffeec]
00981583 : CALL 0x00980ac0
00981588 : MOV dword ptr [EBP + -0x4],0xffffffff
0098158f : CMP dword ptr [EBP + 0x24],EBX
00981592 : JC 0x0098159c
00981594 : MOV ECX,dword ptr [EBP + 0x10]
00981597 : CALL 0x006f04e0
0098159c : XOR ECX,ECX
0098159e : MOV word ptr [EBP + 0x10],CX
009815a2 : MOV dword ptr [EBP + 0x20],0x0
009815a9 : MOV dword ptr [EBP + 0x24],0x7
009815b0 : MOV ECX,dword ptr [EBP + -0xc]
009815b3 : MOV dword ptr FS:[0x0],ECX
009815ba : POP ECX
009815bb : POP EBX
009815bc : MOV ECX,dword ptr [EBP + -0x10]
009815bf : XOR ECX,EBP
009815c1 : CALL 0x00633e6b
009815c6 : MOV ESP,EBP
009815c8 : POP EBP
009815c9 : RET 0x20
