PROGRAM  : Maestia.exe
FUNCTION : FUN_0070a260
ENTRY    : 0070a260
BODY     : [[0070a260, 0070a2a5] [0070a2b9, 0070a39a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070a260(int param_1)

{
  int local_50 [2];
  undefined8 local_48;
  undefined4 local_40;
  undefined4 uStack_3c;
  undefined8 uStack_38;
  DWORD DStack_30;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b17516;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (param_1 != 0) {
    if (DAT_00da9b31 == '\0') {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(DAT_00d66fa0 ^ (uint)&stack0xffffffa0);
    }
    local_20 = 0;
    local_2c = (LPCRITICAL_SECTION)&DAT_00d722e4;
    local_28 = ".\\MoStreamUtil.cpp";
    local_24 = 0x3f;
    local_1c = 1;
    FUN_006ef1a0(&local_2c);
    local_c = 0;
    FUN_004cfb90();
    if (local_50[0] == DAT_017244dc) {
      FUN_0070a170();
    }
    else {
      local_48 = *(undefined8 *)(local_50[0] + 0x10);
      local_40 = *(undefined4 *)(local_50[0] + 0x18);
      FUN_004cf8c0(local_50,local_50[0]);
      DStack_30 = GetTickCount();
      uStack_3c = local_48._4_4_;
      uStack_38 = local_48;
      FUN_004cfbd0(&uStack_3c);
      FUN_0070a170();
    }
    if (local_20 != 0) {
      local_c = 0xffffffff;
      LeaveCriticalSection(local_2c);
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
0070a260 : PUSH EBP
0070a261 : MOV EBP,ESP
0070a263 : AND ESP,0xfffffff8
0070a266 : PUSH -0x1
0070a268 : PUSH 0xb17516
0070a26d : MOV EAX,FS:[0x0]
0070a273 : PUSH EAX
0070a274 : SUB ESP,0x40
0070a277 : PUSH EBX
0070a278 : PUSH ESI
0070a279 : PUSH EDI
0070a27a : MOV EAX,[0x00d66fa0]
0070a27f : XOR EAX,ESP
0070a281 : PUSH EAX
0070a282 : LEA EAX,[ESP + 0x50]
0070a286 : MOV FS:[0x0],EAX
0070a28c : MOV ECX,dword ptr [EBP + 0x8]
0070a28f : XOR EBX,EBX
0070a291 : CMP ECX,EBX
0070a293 : JZ 0x0070a388
0070a299 : CMP byte ptr [0x00da9b31],BL
0070a29f : JNZ 0x0070a2b9
0070a2a1 : CALL 0x006f04e0
0070a2b9 : LEA EAX,[ESP + 0x38]
0070a2bd : PUSH EAX
0070a2be : MOV dword ptr [ESP + 0x48],EBX
0070a2c2 : MOV dword ptr [ESP + 0x3c],0xd722e4
0070a2ca : MOV dword ptr [ESP + 0x40],0xbfcf18
0070a2d2 : MOV dword ptr [ESP + 0x44],0x3f
0070a2da : MOV dword ptr [ESP + 0x4c],0x1
0070a2e2 : CALL 0x006ef1a0
0070a2e7 : MOV dword ptr [ESP + 0x58],EBX
0070a2eb : LEA ESI,[EBP + 0x8]
0070a2ee : LEA EDI,[ESP + 0x14]
0070a2f2 : CALL 0x004cfb90
0070a2f7 : MOV EAX,dword ptr [ESP + 0x14]
0070a2fb : CMP EAX,dword ptr [0x017244dc]
0070a301 : JNZ 0x0070a31d
0070a303 : CALL 0x0070a170
0070a308 : MOV dword ptr [ESP + 0x58],0xffffffff
0070a310 : CMP dword ptr [ESP + 0x44],EBX
0070a314 : JZ 0x0070a388
0070a316 : MOV ECX,dword ptr [ESP + 0x38]
0070a31a : PUSH ECX
0070a31b : JMP 0x0070a37e
0070a31d : MOVQ XMM0,qword ptr [EAX + 0x10]
0070a322 : MOV EDX,dword ptr [EAX + 0x18]
0070a325 : PUSH EAX
0070a326 : LEA EAX,[ESP + 0x18]
0070a32a : PUSH EAX
0070a32b : MOVQ qword ptr [ESP + 0x24],XMM0
0070a331 : MOV dword ptr [ESP + 0x2c],EDX
0070a335 : CALL 0x004cf8c0
0070a33a : CALL dword ptr [0x00b850d8]
0070a340 : MOV ECX,dword ptr [ESP + 0x20]
0070a344 : MOVQ XMM0,qword ptr [ESP + 0x1c]
0070a34a : LEA EDX,[ESP + 0x28]
0070a34e : PUSH EDX
0070a34f : LEA EDI,[ESP + 0x18]
0070a353 : MOV dword ptr [ESP + 0x2c],ECX
0070a357 : MOVQ qword ptr [ESP + 0x30],XMM0
0070a35d : MOV dword ptr [ESP + 0x38],EAX
0070a361 : CALL 0x004cfbd0
0070a366 : CALL 0x0070a170
0070a36b : MOV dword ptr [ESP + 0x58],0xffffffff
0070a373 : CMP dword ptr [ESP + 0x44],EBX
0070a377 : JZ 0x0070a388
0070a379 : MOV EAX,dword ptr [ESP + 0x38]
0070a37d : PUSH EAX
0070a37e : CALL dword ptr [0x00b8511c]
0070a384 : MOV dword ptr [ESP + 0x44],EBX
0070a388 : MOV ECX,dword ptr [ESP + 0x50]
0070a38c : MOV dword ptr FS:[0x0],ECX
0070a393 : POP ECX
0070a394 : POP EDI
0070a395 : POP ESI
0070a396 : POP EBX
0070a397 : MOV ESP,EBP
0070a399 : POP EBP
0070a39a : RET
