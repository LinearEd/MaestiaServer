PROGRAM  : Maestia.exe
FUNCTION : FUN_009060a0
ENTRY    : 009060a0
BODY     : [[009060a0, 00906236]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009060a0(void)

{
  code *pcVar1;
  uint uVar2;
  int *piVar3;
  int in_ECX;
  int *piVar4;
  undefined4 auStack_44 [2];
  int local_3c;
  int *piStack_38;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b4a7d0;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffffb0;
  ExceptionList = &local_14;
  piVar4 = (int *)0x0;
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  FUN_00406360(L"Storage_list",0xc);
  local_c = 0;
  FUN_00405eb0(local_34,0,0xffffffff);
  local_c = 0xffffffff;
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_3c = FUN_006f0760(0x50,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar2);
  local_c = 1;
  if (local_3c == 0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar3 = (int *)FUN_00903c10(local_3c);
  }
  local_c = 0xffffffff;
  *(int **)(in_ECX + 0x38) = piVar3;
  (**(code **)(*piVar3 + 0xc))();
  FUN_00905f80(0x40);
  FUN_00905f80(0x41);
  auStack_44[0] = 0x42;
  FUN_004437f0(auStack_44);
  if ((local_3c == *(int *)(in_ECX + 0x40)) || (*(int *)(local_3c + 0x10) == 0)) {
    local_3c = FUN_006f0300(100);
    local_c = 4;
    if (local_3c != 0) {
      piVar4 = (int *)FUN_00a8a6d0(local_3c);
    }
    local_c = 0xffffffff;
    if (piVar4 != (int *)0x0) {
      pcVar1 = *(code **)(*piVar4 + 0xc);
      piVar4[0x18] = in_ECX;
      (*pcVar1)();
      local_3c = 0x42;
      piStack_38 = piVar4;
      FUN_00451e00(auStack_44,&local_3c);
    }
  }
  FUN_00905eb0();
  *(undefined4 *)(in_ECX + 0x50) = 4;
  *(undefined1 *)(in_ECX + 8) = 1;
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
009060a0 : PUSH EBP
009060a1 : MOV EBP,ESP
009060a3 : AND ESP,0xfffffff8
009060a6 : PUSH -0x1
009060a8 : PUSH 0xb4a7d0
009060ad : MOV EAX,FS:[0x0]
009060b3 : PUSH EAX
009060b4 : SUB ESP,0x30
009060b7 : PUSH EBX
009060b8 : PUSH ESI
009060b9 : PUSH EDI
009060ba : MOV EAX,[0x00d66fa0]
009060bf : XOR EAX,ESP
009060c1 : PUSH EAX
009060c2 : LEA EAX,[ESP + 0x40]
009060c6 : MOV FS:[0x0],EAX
009060cc : MOV EDI,ECX
009060ce : PUSH 0xc
009060d0 : XOR EAX,EAX
009060d2 : MOV EBX,0x7
009060d7 : XOR ESI,ESI
009060d9 : PUSH 0xc643b0
009060de : LEA ECX,[ESP + 0x28]
009060e2 : MOV dword ptr [ESP + 0x40],EBX
009060e6 : MOV dword ptr [ESP + 0x3c],ESI
009060ea : MOV word ptr [ESP + 0x2c],AX
009060ef : CALL 0x00406360
009060f4 : MOV dword ptr [ESP + 0x48],ESI
009060f8 : PUSH -0x1
009060fa : PUSH ESI
009060fb : LEA ECX,[ESP + 0x28]
009060ff : PUSH ECX
00906100 : LEA ECX,[EDI + 0xc]
00906103 : CALL 0x00405eb0
00906108 : MOV dword ptr [ESP + 0x48],0xffffffff
00906110 : CMP dword ptr [ESP + 0x38],0x8
00906115 : JC 0x00906120
00906117 : MOV ECX,dword ptr [ESP + 0x24]
0090611b : CALL 0x006f04e0
00906120 : MOV EAX,[0x01725270]
00906125 : XOR EDX,EDX
00906127 : SHR EAX,0x3
0090612a : MOV ECX,EDX
0090612c : AND EAX,0x1
0090612f : SETZ CL
00906132 : MOV dword ptr [ESP + 0x38],EBX
00906136 : MOV dword ptr [ESP + 0x34],ESI
0090613a : MOV word ptr [ESP + 0x24],DX
0090613f : PUSH ECX
00906140 : PUSH ESI
00906141 : PUSH 0xbf1a4a
00906146 : PUSH 0x50
00906148 : CALL 0x006f0760
0090614d : ADD ESP,0x10
00906150 : MOV dword ptr [ESP + 0x18],EAX
00906154 : MOV dword ptr [ESP + 0x48],0x1
0090615c : CMP EAX,ESI
0090615e : JZ 0x0090616b
00906160 : MOV ECX,dword ptr [EDI + 0x4]
00906163 : PUSH EAX
00906164 : CALL 0x00903c10
00906169 : JMP 0x0090616d
0090616b : XOR EAX,EAX
0090616d : MOV dword ptr [ESP + 0x48],0xffffffff
00906175 : MOV dword ptr [EDI + 0x38],EAX
00906178 : MOV EDX,dword ptr [EAX]
0090617a : MOV ECX,EAX
0090617c : MOV EAX,dword ptr [EDX + 0xc]
0090617f : CALL EAX
00906181 : PUSH 0x40
00906183 : CALL 0x00905f80
00906188 : PUSH 0x41
0090618a : CALL 0x00905f80
0090618f : LEA ECX,[ESP + 0x10]
00906193 : LEA EBX,[EDI + 0x3c]
00906196 : PUSH ECX
00906197 : LEA EAX,[ESP + 0x1c]
0090619b : MOV ECX,EBX
0090619d : MOV dword ptr [ESP + 0x14],0x42
009061a5 : CALL 0x004437f0
009061aa : MOV EAX,dword ptr [EDI + 0x40]
009061ad : MOV ECX,dword ptr [ESP + 0x18]
009061b1 : CMP ECX,EAX
009061b3 : JZ 0x009061ba
009061b5 : CMP dword ptr [ECX + 0x10],ESI
009061b8 : JNZ 0x00906214
009061ba : PUSH 0x64
009061bc : CALL 0x006f0300
009061c1 : ADD ESP,0x4
009061c4 : MOV dword ptr [ESP + 0x18],EAX
009061c8 : MOV dword ptr [ESP + 0x48],0x4
009061d0 : CMP EAX,ESI
009061d2 : JZ 0x009061df
009061d4 : MOV ECX,dword ptr [EDI + 0x4]
009061d7 : PUSH EAX
009061d8 : CALL 0x00a8a6d0
009061dd : MOV ESI,EAX
009061df : MOV dword ptr [ESP + 0x48],0xffffffff
009061e7 : TEST ESI,ESI
009061e9 : JZ 0x00906214
009061eb : MOV EDX,dword ptr [ESI]
009061ed : MOV EAX,dword ptr [EDX + 0xc]
009061f0 : MOV ECX,ESI
009061f2 : MOV dword ptr [ESI + 0x60],EDI
009061f5 : CALL EAX
009061f7 : LEA ECX,[ESP + 0x18]
009061fb : PUSH ECX
009061fc : LEA EDX,[ESP + 0x14]
00906200 : PUSH EDX
00906201 : MOV EAX,EBX
00906203 : MOV dword ptr [ESP + 0x20],0x42
0090620b : MOV dword ptr [ESP + 0x24],ESI
0090620f : CALL 0x00451e00
00906214 : CALL 0x00905eb0
00906219 : MOV dword ptr [EDI + 0x50],0x4
00906220 : MOV byte ptr [EDI + 0x8],0x1
00906224 : MOV ECX,dword ptr [ESP + 0x40]
00906228 : MOV dword ptr FS:[0x0],ECX
0090622f : POP ECX
00906230 : POP EDI
00906231 : POP ESI
00906232 : POP EBX
00906233 : MOV ESP,EBP
00906235 : POP EBP
00906236 : RET
