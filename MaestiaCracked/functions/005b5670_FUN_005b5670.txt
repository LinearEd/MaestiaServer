PROGRAM  : Maestia.exe
FUNCTION : FUN_005b5670
ENTRY    : 005b5670
BODY     : [[005b5670, 005b578a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005b5670(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,&LAB_005b5420);
    *puVar3 = &PTR_LAB_00b90440;
    puVar3[4] = &PTR_LAB_00b90510;
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x54,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005b55c0(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0xb;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  puVar3 = &param_2;
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x34,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005b5670 : SUB ESP,0x18
005b5673 : PUSH EBX
005b5674 : PUSH EBP
005b5675 : PUSH ESI
005b5676 : MOV ESI,dword ptr [ESP + 0x2c]
005b567a : MOV ECX,dword ptr [ESI + 0x288]
005b5680 : PUSH EDI
005b5681 : XOR EBX,EBX
005b5683 : PUSH EBX
005b5684 : PUSH 0x34
005b5686 : MOV dword ptr [ESP + 0x18],ESI
005b568a : MOV byte ptr [ESP + 0x1c],0x8
005b568f : CALL 0x00515840
005b5694 : MOV EDI,EAX
005b5696 : CMP EDI,EBX
005b5698 : JZ 0x005b56ba
005b569a : PUSH 0x5b5420
005b569f : LEA EAX,[ESP + 0x14]
005b56a3 : PUSH EAX
005b56a4 : MOV ECX,EDI
005b56a6 : CALL 0x00568960
005b56ab : MOV dword ptr [EDI],0xb90440
005b56b1 : MOV dword ptr [EDI + 0x10],0xb90510
005b56b8 : JMP 0x005b56bc
005b56ba : XOR EDI,EDI
005b56bc : MOV EBP,dword ptr [ESP + 0x2c]
005b56c0 : PUSH EBX
005b56c1 : MOV byte ptr [EBP + 0x8],BL
005b56c4 : MOV dword ptr [EBP],EDI
005b56c7 : MOV dword ptr [EBP + 0x4],EBX
005b56ca : MOV ECX,dword ptr [ESI + 0x288]
005b56d0 : PUSH 0x54
005b56d2 : CALL 0x00515840
005b56d7 : MOV EDI,EAX
005b56d9 : CMP EDI,EBX
005b56db : JZ 0x005b5707
005b56dd : PUSH EBP
005b56de : PUSH 0x1
005b56e0 : MOV ECX,ESI
005b56e2 : CALL 0x00530910
005b56e7 : PUSH EAX
005b56e8 : LEA ECX,[ESP + 0x18]
005b56ec : PUSH ECX
005b56ed : MOV ECX,EDI
005b56ef : CALL 0x005b55c0
005b56f4 : MOV EBX,EAX
005b56f6 : TEST EBX,EBX
005b56f8 : JZ 0x005b5707
005b56fa : MOV EDX,dword ptr [EBX + 0x8]
005b56fd : INC EDX
005b56fe : AND EDX,0x8fffffff
005b5704 : MOV dword ptr [EBX + 0x8],EDX
005b5707 : LEA EAX,[ESP + 0x30]
005b570b : PUSH EAX
005b570c : LEA ECX,[ESP + 0x30]
005b5710 : PUSH ECX
005b5711 : LEA ECX,[ESI + 0x278]
005b5717 : MOV dword ptr [ESP + 0x38],EBX
005b571b : MOV dword ptr [ESP + 0x34],0xb
005b5723 : CALL 0x0050ff10
005b5728 : MOV ECX,dword ptr [ESP + 0x30]
005b572c : TEST ECX,ECX
005b572e : JZ 0x005b5735
005b5730 : CALL 0x00503db0
005b5735 : MOV EAX,dword ptr [ESI + 0x2a0]
005b573b : ADD EAX,0x10
005b573e : LEA EDX,[ESP + 0x30]
005b5742 : MOV byte ptr [ESP + 0x30],0x0
005b5747 : MOV EDI,dword ptr [EAX]
005b5749 : PUSH EDX
005b574a : PUSH EBP
005b574b : LEA ECX,[ESP + 0x20]
005b574f : MOV dword ptr [ESP + 0x34],EAX
005b5753 : ADD EDI,0x28
005b5756 : CALL 0x00526210
005b575b : MOV ECX,dword ptr [ESP + 0x30]
005b575f : MOV EDX,dword ptr [EDI]
005b5761 : PUSH EAX
005b5762 : ADD ESI,0x34
005b5765 : PUSH ESI
005b5766 : LEA EAX,[ESP + 0x1c]
005b576a : PUSH EAX
005b576b : CALL EDX
005b576d : LEA ECX,[ESP + 0x18]
005b5771 : CALL 0x00526bc0
005b5776 : TEST EBX,EBX
005b5778 : JZ 0x005b5781
005b577a : MOV ECX,EBX
005b577c : CALL 0x00503db0
005b5781 : POP EDI
005b5782 : POP ESI
005b5783 : MOV EAX,EBP
005b5785 : POP EBP
005b5786 : POP EBX
005b5787 : ADD ESP,0x18
005b578a : RET
