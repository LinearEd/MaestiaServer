PROGRAM  : Maestia.exe
FUNCTION : FUN_0055f890
ENTRY    : 0055f890
BODY     : [[0055f890, 0055f946]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055f890(uint *param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int in_ECX;
  
  if ((*(ushort *)(in_ECX + 0x2a) >> 0xb & 1) != 0) {
    iVar2 = FUN_0051b1a0();
    iVar3 = FUN_0051b1a0();
    if (iVar2 == iVar3) {
      iVar2 = FUN_0051b280((*(uint *)(in_ECX + 8) & 0xfffffffc) + 8,(*param_1 & 0xfffffffc) + 8);
      if (iVar2 == 0) goto LAB_0055f902;
    }
    piVar1 = *(int **)(in_ECX + 0x1c);
    if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
      FUN_00500860();
      FUN_00515cf0(piVar1);
    }
    *(undefined4 *)(in_ECX + 0x1c) = 0;
    *(ushort *)(in_ECX + 0x2a) = *(ushort *)(in_ECX + 0x2a) & 0xf7ff;
  }
LAB_0055f902:
  FUN_0051bc20(param_1);
  *(ushort *)(in_ECX + 0x2a) = *(ushort *)(in_ECX + 0x2a) | 4;
  iVar2 = FUN_00638800((*(uint *)(in_ECX + 8) & 0xfffffffc) + 8,0x2c);
  if (iVar2 == 0) {
    *(ushort *)(in_ECX + 0x2a) = *(ushort *)(in_ECX + 0x2a) | 0x1000;
    return;
  }
  *(ushort *)(in_ECX + 0x2a) = *(ushort *)(in_ECX + 0x2a) & 0xefff;
  return;
}



============================================================
DISASSEMBLY
============================================================
0055f890 : PUSH EBX
0055f891 : MOV EBX,dword ptr [ESP + 0x8]
0055f895 : PUSH ESI
0055f896 : MOV ESI,ECX
0055f898 : MOV AX,word ptr [ESI + 0x2a]
0055f89c : SHR AX,0xb
0055f8a0 : PUSH EDI
0055f8a1 : TEST AL,0x1
0055f8a3 : JZ 0x0055f902
0055f8a5 : LEA EDI,[ESI + 0x8]
0055f8a8 : PUSH EBP
0055f8a9 : MOV ECX,EDI
0055f8ab : CALL 0x0051b1a0
0055f8b0 : MOV ECX,EBX
0055f8b2 : MOV EBP,EAX
0055f8b4 : CALL 0x0051b1a0
0055f8b9 : CMP EBP,EAX
0055f8bb : POP EBP
0055f8bc : JNZ 0x0055f8d9
0055f8be : MOV EAX,dword ptr [EBX]
0055f8c0 : MOV ECX,dword ptr [EDI]
0055f8c2 : AND EAX,0xfffffffc
0055f8c5 : AND ECX,0xfffffffc
0055f8c8 : ADD EAX,0x8
0055f8cb : PUSH EAX
0055f8cc : ADD ECX,0x8
0055f8cf : PUSH ECX
0055f8d0 : CALL 0x0051b280
0055f8d5 : TEST EAX,EAX
0055f8d7 : JZ 0x0055f902
0055f8d9 : MOV EDI,dword ptr [ESI + 0x1c]
0055f8dc : TEST EDI,EDI
0055f8de : JZ 0x0055f8f2
0055f8e0 : ADD dword ptr [EDI],-0x1
0055f8e3 : JNZ 0x0055f8f2
0055f8e5 : MOV ECX,EDI
0055f8e7 : CALL 0x00500860
0055f8ec : PUSH EDI
0055f8ed : CALL 0x00515cf0
0055f8f2 : MOV ECX,0xf7ff
0055f8f7 : MOV dword ptr [ESI + 0x1c],0x0
0055f8fe : AND word ptr [ESI + 0x2a],CX
0055f902 : LEA EDI,[ESI + 0x8]
0055f905 : PUSH EBX
0055f906 : MOV ECX,EDI
0055f908 : CALL 0x0051bc20
0055f90d : MOV EAX,dword ptr [EDI]
0055f90f : OR word ptr [ESI + 0x2a],0x4
0055f914 : AND EAX,0xfffffffc
0055f917 : ADD EAX,0x8
0055f91a : PUSH 0x2c
0055f91c : PUSH EAX
0055f91d : CALL 0x00638800
0055f922 : ADD ESP,0x8
0055f925 : TEST EAX,EAX
0055f927 : JNZ 0x0055f938
0055f929 : MOV EDX,0x1000
0055f92e : OR word ptr [ESI + 0x2a],DX
0055f932 : POP EDI
0055f933 : POP ESI
0055f934 : POP EBX
0055f935 : RET 0x4
0055f938 : MOV EAX,0xefff
0055f93d : AND word ptr [ESI + 0x2a],AX
0055f941 : POP EDI
0055f942 : POP ESI
0055f943 : POP EBX
0055f944 : RET 0x4
