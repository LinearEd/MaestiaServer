PROGRAM  : Maestia.exe
FUNCTION : FUN_005ab7c0
ENTRY    : 005ab7c0
BODY     : [[005ab7c0, 005ab849]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_005ab7c0(uint param_1)

{
  uint uVar1;
  uint *in_ECX;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint local_4;
  
  uVar1 = *in_ECX;
  uVar4 = 0;
  uVar3 = 0xffffffff;
  if (uVar1 != 0) {
    local_4 = 0;
    uVar5 = param_1;
    while( true ) {
      uVar2 = param_1 - uVar1;
      if (((uVar1 <= param_1) && (uVar2 < uVar3)) && (uVar3 = uVar2, uVar4 = uVar1, uVar2 == 0)) {
        return uVar1;
      }
      uVar2 = *(uint *)(uVar1 + 0x18);
      uVar1 = *(uint *)(uVar1 + 0x18 + ((int)uVar5 >> 0x1f) * -4);
      if ((uVar2 != 0) && (uVar2 != uVar1)) {
        local_4 = uVar2;
      }
      if (uVar1 == 0) break;
      uVar5 = uVar5 * 2;
    }
    for (; local_4 != 0;
        local_4 = *(uint *)(local_4 + 0x18 + (uint)(*(int *)(local_4 + 0x1c) != 0) * 4)) {
      if ((local_4 <= param_1) && (param_1 - local_4 < uVar3)) {
        uVar3 = param_1 - local_4;
        uVar4 = local_4;
      }
    }
  }
  return uVar4;
}



============================================================
DISASSEMBLY
============================================================
005ab7c0 : PUSH ECX
005ab7c1 : MOV EAX,dword ptr [ECX]
005ab7c3 : PUSH EBX
005ab7c4 : PUSH EBP
005ab7c5 : PUSH ESI
005ab7c6 : XOR EBP,EBP
005ab7c8 : OR EDX,0xffffffff
005ab7cb : PUSH EDI
005ab7cc : TEST EAX,EAX
005ab7ce : JZ 0x005ab840
005ab7d0 : MOV ESI,dword ptr [ESP + 0x18]
005ab7d4 : MOV dword ptr [ESP + 0x10],EBP
005ab7d8 : MOV EDI,ESI
005ab7da : LEA EBX,[EBX]
005ab7e0 : MOV ECX,ESI
005ab7e2 : SUB ECX,EAX
005ab7e4 : CMP EAX,ESI
005ab7e6 : JA 0x005ab7f4
005ab7e8 : CMP ECX,EDX
005ab7ea : JNC 0x005ab7f4
005ab7ec : MOV EBP,EAX
005ab7ee : MOV EDX,ECX
005ab7f0 : TEST ECX,ECX
005ab7f2 : JZ 0x005ab842
005ab7f4 : MOV ECX,dword ptr [EAX + 0x18]
005ab7f7 : MOV EBX,EDI
005ab7f9 : SHR EBX,0x1f
005ab7fc : MOV EAX,dword ptr [EAX + EBX*0x4 + 0x18]
005ab800 : TEST ECX,ECX
005ab802 : JZ 0x005ab80c
005ab804 : CMP ECX,EAX
005ab806 : JZ 0x005ab80c
005ab808 : MOV dword ptr [ESP + 0x10],ECX
005ab80c : TEST EAX,EAX
005ab80e : JZ 0x005ab814
005ab810 : ADD EDI,EDI
005ab812 : JMP 0x005ab7e0
005ab814 : MOV EAX,dword ptr [ESP + 0x10]
005ab818 : TEST EAX,EAX
005ab81a : JZ 0x005ab840
005ab81c : LEA ESP,[ESP]
005ab820 : MOV ECX,ESI
005ab822 : SUB ECX,EAX
005ab824 : CMP EAX,ESI
005ab826 : JA 0x005ab830
005ab828 : CMP ECX,EDX
005ab82a : JNC 0x005ab830
005ab82c : MOV EDX,ECX
005ab82e : MOV EBP,EAX
005ab830 : XOR ECX,ECX
005ab832 : CMP dword ptr [EAX + 0x1c],ECX
005ab835 : SETNZ CL
005ab838 : MOV EAX,dword ptr [EAX + ECX*0x4 + 0x18]
005ab83c : TEST EAX,EAX
005ab83e : JNZ 0x005ab820
005ab840 : MOV EAX,EBP
005ab842 : POP EDI
005ab843 : POP ESI
005ab844 : POP EBP
005ab845 : POP EBX
005ab846 : POP ECX
005ab847 : RET 0x4
