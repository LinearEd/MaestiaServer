PROGRAM  : Maestia.exe
FUNCTION : FUN_00547360
ENTRY    : 00547360
BODY     : [[00547360, 005479dc]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00547360(void)

{
  undefined2 *puVar1;
  float fVar2;
  char cVar3;
  uint uVar4;
  int iVar5;
  undefined1 *puVar6;
  undefined4 uVar7;
  undefined4 *puVar8;
  int iVar9;
  int *in_ECX;
  uint uVar10;
  float *pfVar11;
  uint uVar12;
  ushort *puVar13;
  float unaff_EDI;
  float10 fVar14;
  int *piVar15;
  int iVar16;
  float local_5b8;
  int iStack_5ac;
  int iStack_5a4;
  undefined1 auStack_59c [4];
  int local_598;
  undefined1 *local_594;
  int local_58c;
  float local_588;
  float local_584;
  float local_580;
  float local_57c;
  int local_574;
  float fStack_570;
  undefined4 uStack_56c;
  undefined4 uStack_568;
  undefined4 uStack_564;
  int *piStack_554;
  GRefCountNTSImpl *pGStack_53c;
  GRefCountImpl *pGStack_50c;
  GRefCountImpl *pGStack_4ec;
  undefined1 auStack_404 [4];
  undefined1 auStack_400 [1024];
  
  if (in_ECX[5] == 0) {
    return 0;
  }
  if ((in_ECX[0xba] == 1) && ((char)in_ECX[0xbd] != '\0')) {
    if ((in_ECX[0xa4] == 0) || (*(uint *)(in_ECX[0xa4] + 4) <= (uint)in_ECX[0xa5])) {
      iVar5 = in_ECX[0x11];
      iVar9 = *(int *)(in_ECX[5] + 0x14);
      iVar16 = in_ECX[0x2e];
    }
    else {
      iVar5 = in_ECX[0x98];
      iVar9 = *(int *)(in_ECX[0x8c] + 0x14);
      iVar16 = in_ECX[0xb5];
    }
    local_57c = (float)iVar5;
    local_598 = in_ECX[0x13e];
    local_594 = (undefined1 *)in_ECX[0x13f];
    uVar4 = ((int *)in_ECX[3])[2];
    if ((*(int *)in_ECX[3] < 0) && (uVar4 = uVar4 & 0xffffff, uVar4 == 0xffffff)) {
      uVar4 = 0xffffffff;
    }
    local_58c = uVar4 - *(int *)(in_ECX[1] + 0x1c);
    local_588 = (float)in_ECX[0x2e];
    switch(*(ushort *)(in_ECX[2] + 0x16) >> 9 & 3) {
    case 0:
      local_574 = (uint)local_574._1_3_ << 8;
      break;
    case 1:
      local_574 = CONCAT31(local_574._1_3_,1);
      break;
    case 2:
      local_574 = CONCAT31(local_574._1_3_,3);
      break;
    case 3:
      local_574 = CONCAT31(local_574._1_3_,2);
    }
    local_584 = (float)in_ECX[0xb6];
    local_580 = (float)in_ECX[0x11];
    iVar5 = (**(code **)(**(int **)(iVar9 + 0xc) + 0xc))(0x2d);
    if (0 < iVar5) {
      fVar14 = (float10)(**(code **)(**(int **)(iVar9 + 0xc) + 0x28))(iVar5);
      local_57c = (float)fVar14;
    }
    puVar6 = auStack_404;
    local_574 = iVar16;
    if (0x100 < local_58c + 1U) {
      iVar5 = local_58c * 4;
      FUN_00546d20();
      puVar6 = (undefined1 *)FUN_00515840(iVar5 + 4,0);
    }
    uVar4 = in_ECX[0x27];
    local_5b8 = 0.0;
    uVar10 = 0;
    if (uVar4 != 0) {
      puVar13 = (ushort *)(in_ECX[0x25] + 2);
      do {
        if ((puVar13[1] & 0xf000) != 0) break;
        uVar12 = (uint)*puVar13;
        if (((byte)puVar13[2] >> 6 & 1) != 0) {
          uVar12 = -uVar12;
        }
        uVar10 = uVar10 + 1;
        puVar13 = puVar13 + 4;
        local_5b8 = (float)(int)uVar12 + local_5b8;
      } while (uVar10 < uVar4);
    }
    iStack_5a4 = 0;
    local_588 = local_588 - local_5b8;
    local_584 = local_584 - local_5b8;
    local_580 = local_580 - local_5b8;
    local_5b8 = 0.0;
    if (uVar10 < uVar4) {
      puVar13 = (ushort *)(in_ECX[0x25] + 2 + uVar10 * 8);
      iStack_5ac = uVar4 - uVar10;
      do {
        pfVar11 = (float *)(puVar6 + iStack_5a4 * 4);
        *pfVar11 = local_5b8;
        uVar4 = (uint)*puVar13;
        if (((byte)puVar13[2] >> 6 & 1) != 0) {
          uVar4 = -uVar4;
        }
        uVar10 = (uint)(puVar13[1] >> 0xc);
        local_5b8 = local_5b8 + (float)(int)uVar4;
        if ((1 < uVar10) && (uVar10 != 0)) {
          iVar5 = iStack_5a4 * 2;
          uVar4 = uVar10;
          do {
            *(undefined2 *)(iVar5 + in_ECX[0x13e]) = 0xa0;
            *pfVar11 = 0.0;
            iVar5 = iVar5 + 2;
            pfVar11 = pfVar11 + 1;
            uVar4 = uVar4 - 1;
          } while (uVar4 != 0);
        }
        iStack_5a4 = iStack_5a4 + uVar10;
        puVar13 = puVar13 + 4;
        iStack_5ac = iStack_5ac + -1;
      } while (iStack_5ac != 0);
    }
    *(float *)(puVar6 + iStack_5a4 * 4) = local_5b8;
    fStack_570 = (float)((uint)fStack_570 & 0xffffff00);
    local_594 = puVar6;
    cVar3 = (**(code **)(**(int **)(*in_ECX + 0x14) + 4))(*in_ECX,auStack_59c);
    if ((cVar3 != '\0') &&
       (*(undefined1 *)(in_ECX + 0xbb) = (undefined1)uStack_56c, fStack_570 != local_5b8)) {
      if ((in_ECX[0xa4] == 0) ||
         ((*(uint *)(in_ECX[0xa4] + 4) <= (uint)in_ECX[0xa5] ||
          ((uint)fStack_570 <= (uint)in_ECX[0xb5])))) {
        if ((in_ECX[0x79] == 0) ||
           ((*(uint *)(in_ECX[0x79] + 4) <= (uint)in_ECX[0x7a] ||
            ((uint)fStack_570 <= (uint)in_ECX[0x8a])))) {
          FUN_0059a3e0(in_ECX + 0x56);
          piVar15 = in_ECX + 0x35;
        }
        else {
          FUN_0059a3e0(in_ECX + 0x81);
          piVar15 = in_ECX + 0x60;
        }
      }
      else {
        FUN_0059a3e0(in_ECX + 0xac);
        piVar15 = in_ECX + 0x8b;
      }
      FUN_00545fe0(piVar15);
      in_ECX[0xba] = 2;
      in_ECX[0xbc] = (int)fStack_570;
      in_ECX[0xb9] = 0;
    }
    if (puVar6 != auStack_400) {
      iVar5 = *(int *)(*in_ECX + 0xc);
      if (*(int *)(iVar5 + 8) == 0) {
        uVar7 = FUN_00515dd0(iVar5);
        puVar8 = (undefined4 *)FUN_00515840(0x50,0);
        if (puVar8 == (undefined4 *)0x0) {
          puVar8 = (undefined4 *)0x0;
        }
        else {
          *puVar8 = &PTR_FUN_00cd3f2c;
          puVar8[1] = 1;
          *puVar8 = &PTR_FUN_00b8670c;
          puVar8[2] = 0;
          puVar8[3] = 0;
          puVar8[4] = 100;
          puVar8[5] = 100;
          puVar8[6] = 1;
          puVar8[7] = uVar7;
          FUN_00504200(uVar7);
          *(undefined1 *)(puVar8 + 0x13) = 0;
        }
        if (*(GRefCountNTSImpl **)(iVar5 + 8) != (GRefCountNTSImpl *)0x0) {
          GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar5 + 8));
        }
        *(undefined4 **)(iVar5 + 8) = puVar8;
      }
      FUN_00515cf0(iStack_5a4);
    }
    uVar7 = FUN_00545cb0();
    uVar7 = FUN_00545fe0(uVar7);
    FUN_00545fe0(uVar7);
    if (pGStack_4ec != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(pGStack_4ec);
    }
    if (pGStack_50c != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(pGStack_50c);
    }
    if (pGStack_53c != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(pGStack_53c);
    }
    if ((piStack_554 != (int *)0x0) && (*piStack_554 = *piStack_554 + -1, *piStack_554 == 0)) {
      FUN_00500860();
      FUN_00515cf0(piStack_554);
    }
    if ((cVar3 != '\0') && (in_ECX[0xba] == 2)) {
      return 1;
    }
  }
  else if (in_ECX[0xba] == 2) {
    uVar7 = FUN_00545cb0();
    FUN_00545fe0(uVar7);
    FUN_00545f90();
    in_ECX[0xba] = 1;
  }
  if ((char)in_ECX[0xbb] != '\0') {
    puVar1 = (undefined2 *)(in_ECX[0x25] + in_ECX[0x27] * 8);
    puVar1[2] = 0;
    puVar1[3] = 0;
    iVar9 = FUN_0063b380();
    iVar5 = in_ECX[4];
    if (iVar5 != 0) {
      if (iVar9 < 0) {
        *(ushort *)(iVar5 + 6) = *(ushort *)(iVar5 + 6) | 0x40;
        *(short *)(iVar5 + 2) = -(short)iVar9;
      }
      else {
        *(short *)(iVar5 + 2) = (short)iVar9;
        *(ushort *)(iVar5 + 6) = *(ushort *)(iVar5 + 6) & 0xffbf;
      }
    }
    iVar16 = 0x2d;
    iVar5 = (**(code **)(**(int **)(*(int *)(in_ECX[5] + 0x14) + 0xc) + 0xc))();
    puVar1[2] = puVar1[2] & 0xfff;
    *puVar1 = (short)iVar5;
    FUN_005442d0(in_ECX[0x149]);
    in_ECX[0x11] = in_ECX[0x148];
    (**(code **)(**(int **)(*(int *)(in_ECX[5] + 0x14) + 0xc) + 0x20))(iVar5);
    fStack_570 = 0.0;
    uStack_56c = 0;
    uStack_568 = 0;
    uStack_564 = 0;
    iVar9 = (**(code **)(**(int **)(in_ECX[0x140] + 0xc) + 0x30))(iVar5,&fStack_570);
    fVar2 = *(float *)(iVar9 + 8) * (float)in_ECX[0x142] + 20.0;
    if (unaff_EDI < fVar2) {
      unaff_EDI = fVar2;
    }
    if (unaff_EDI <= 0.0) {
      iVar9 = FUN_0063b380();
    }
    else {
      iVar9 = FUN_0063b380();
    }
    (**(code **)(**(int **)(*(int *)(in_ECX[5] + 0x14) + 0xc) + 0x28))(iVar5);
    in_ECX[9] = iVar9;
    in_ECX[8] = (int)(float)iVar16;
    in_ECX[7] = iVar5;
    in_ECX[0x2b] = 0;
    in_ECX[0x12] = in_ECX[0x148] + iVar9;
    *(undefined1 *)(in_ECX + 0xbb) = 0;
    in_ECX[4] = (int)puVar1;
    if ((in_ECX[0x25] != 0) && ((uint)in_ECX[0x27] < (uint)in_ECX[0x28])) {
      in_ECX[0x27] = in_ECX[0x27] + 1;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00547360 : SUB ESP,0x5b8
00547366 : PUSH ESI
00547367 : MOV ESI,ECX
00547369 : MOV ECX,dword ptr [ESI + 0x14]
0054736c : TEST ECX,ECX
0054736e : JNZ 0x0054737a
00547370 : XOR AL,AL
00547372 : POP ESI
00547373 : ADD ESP,0x5b8
00547379 : RET
0054737a : MOV EAX,dword ptr [ESI + 0x2e8]
00547380 : PUSH EBX
00547381 : PUSH EBP
00547382 : PUSH EDI
00547383 : CMP EAX,0x1
00547386 : JNZ 0x005477df
0054738c : CMP byte ptr [ESI + 0x2f4],0x0
00547393 : JZ 0x005477df
00547399 : MOV EAX,dword ptr [ESI + 0x290]
0054739f : TEST EAX,EAX
005473a1 : JZ 0x005473ae
005473a3 : MOV EDX,dword ptr [ESI + 0x294]
005473a9 : CMP EDX,dword ptr [EAX + 0x4]
005473ac : JC 0x005473bc
005473ae : FILD dword ptr [ESI + 0x44]
005473b1 : MOV EDI,dword ptr [ECX + 0x14]
005473b4 : MOV EBX,dword ptr [ESI + 0xb8]
005473ba : JMP 0x005473d1
005473bc : MOV EAX,dword ptr [ESI + 0x230]
005473c2 : FILD dword ptr [ESI + 0x260]
005473c8 : MOV EDI,dword ptr [EAX + 0x14]
005473cb : MOV EBX,dword ptr [ESI + 0x2d4]
005473d1 : MOV ECX,dword ptr [ESI + 0x4f8]
005473d7 : FSTP float ptr [ESP + 0x14]
005473db : MOV EDX,dword ptr [ESI + 0x4fc]
005473e1 : MOV EAX,dword ptr [ESI + 0xc]
005473e4 : MOV dword ptr [ESP + 0x30],ECX
005473e8 : MOV dword ptr [ESP + 0x34],EDX
005473ec : MOV ECX,dword ptr [EAX]
005473ee : MOV EAX,dword ptr [EAX + 0x8]
005473f1 : SHR ECX,0x1f
005473f4 : MOV dword ptr [ESP + 0x10],EBX
005473f8 : TEST CL,0x1
005473fb : JZ 0x0054740c
005473fd : AND EAX,0xffffff
00547402 : CMP EAX,0xffffff
00547407 : JNZ 0x0054740c
00547409 : OR EAX,0xffffffff
0054740c : MOV EDX,dword ptr [ESI + 0x4]
0054740f : SUB EAX,dword ptr [EDX + 0x1c]
00547412 : MOV ECX,dword ptr [ESI + 0x8]
00547415 : MOV dword ptr [ESP + 0x3c],EAX
00547419 : MOV EAX,dword ptr [ESI + 0xb8]
0054741f : MOV dword ptr [ESP + 0x40],EAX
00547423 : MOVZX EAX,word ptr [ECX + 0x16]
00547427 : SHR EAX,0x9
0054742a : AND EAX,0x3
0054742d : CMP EAX,0x3
00547430 : JA 0x00547453
00547432 : JMP dword ptr [EAX*0x4 + 0x5479e0]
00547439 : MOV byte ptr [ESP + 0x54],0x0
0054743e : JMP 0x00547453
00547440 : MOV byte ptr [ESP + 0x54],0x1
00547445 : JMP 0x00547453
00547447 : MOV byte ptr [ESP + 0x54],0x2
0054744c : JMP 0x00547453
0054744e : MOV byte ptr [ESP + 0x54],0x3
00547453 : FLD float ptr [ESI + 0x2d8]
00547459 : PUSH 0x2d
0054745b : FSTP float ptr [ESP + 0x48]
0054745f : FILD dword ptr [ESI + 0x44]
00547462 : FSTP float ptr [ESP + 0x4c]
00547466 : FLD float ptr [ESP + 0x18]
0054746a : FSTP float ptr [ESP + 0x50]
0054746e : MOV ECX,dword ptr [EDI + 0xc]
00547471 : MOV EDX,dword ptr [ECX]
00547473 : MOV EAX,dword ptr [EDX + 0xc]
00547476 : CALL EAX
00547478 : TEST EAX,EAX
0054747a : JLE 0x0054748b
0054747c : MOV ECX,dword ptr [EDI + 0xc]
0054747f : MOV EDX,dword ptr [ECX]
00547481 : PUSH EAX
00547482 : MOV EAX,dword ptr [EDX + 0x28]
00547485 : CALL EAX
00547487 : FSTP float ptr [ESP + 0x50]
0054748b : MOV EAX,dword ptr [ESP + 0x40]
0054748f : LEA ECX,[EAX + 0x1]
00547492 : LEA EBP,[ESP + 0x1c8]
00547499 : MOV dword ptr [ESP + 0x58],EBX
0054749d : MOV dword ptr [ESP + 0x24],EBP
005474a1 : CMP ECX,0x100
005474a7 : JBE 0x005474ca
005474a9 : MOV ECX,dword ptr [ESI]
005474ab : LEA EDI,[EAX*0x4 + 0x4]
005474b2 : CALL 0x00546d20
005474b7 : MOV EAX,dword ptr [EAX + 0x1c]
005474ba : PUSH 0x0
005474bc : PUSH EDI
005474bd : MOV ECX,EAX
005474bf : CALL 0x00515840
005474c4 : MOV EBP,EAX
005474c6 : MOV dword ptr [ESP + 0x24],EAX
005474ca : MOV EAX,dword ptr [ESI + 0x9c]
005474d0 : FLDZ
005474d2 : MOV EBX,dword ptr [ESI + 0x94]
005474d8 : FST float ptr [ESP + 0x14]
005474dc : XOR ECX,ECX
005474de : TEST EAX,EAX
005474e0 : JBE 0x00547518
005474e2 : LEA EDI,[EBX + 0x2]
005474e5 : MOV EDX,0xf000
005474ea : TEST word ptr [EDI + 0x2],DX
005474ee : JNZ 0x00547518
005474f0 : MOV DL,byte ptr [EDI + 0x4]
005474f3 : SHR DL,0x6
005474f6 : TEST DL,0x1
005474f9 : MOVZX EDX,word ptr [EDI]
005474fc : JZ 0x00547500
005474fe : NEG EDX
00547500 : MOV dword ptr [ESP + 0x1c],EDX
00547504 : FILD dword ptr [ESP + 0x1c]
00547508 : INC ECX
00547509 : ADD EDI,0x8
0054750c : FADD float ptr [ESP + 0x14]
00547510 : FSTP float ptr [ESP + 0x14]
00547514 : CMP ECX,EAX
00547516 : JC 0x005474e5
00547518 : FLD float ptr [ESP + 0x44]
0054751c : XOR EDX,EDX
0054751e : FLD float ptr [ESP + 0x14]
00547522 : MOV dword ptr [ESP + 0x38],EBP
00547526 : FLD ST0
00547528 : MOV dword ptr [ESP + 0x28],EDX
0054752c : FSUBP ST2,ST0
0054752e : FXCH
00547530 : FSTP float ptr [ESP + 0x44]
00547534 : FLD float ptr [ESP + 0x48]
00547538 : FSUB ST0,ST1
0054753a : FSTP float ptr [ESP + 0x48]
0054753e : FSUBR float ptr [ESP + 0x4c]
00547542 : FSTP float ptr [ESP + 0x4c]
00547546 : FST float ptr [ESP + 0x14]
0054754a : CMP ECX,EAX
0054754c : JNC 0x005475d6
00547552 : LEA EBP,[EBX + ECX*0x8 + 0x2]
00547556 : SUB EAX,ECX
00547558 : MOV dword ptr [ESP + 0x2c],EBP
0054755c : MOV dword ptr [ESP + 0x20],EAX
00547560 : MOV EAX,dword ptr [ESP + 0x24]
00547564 : FLD float ptr [ESP + 0x14]
00547568 : LEA ECX,[EAX + EDX*0x4]
0054756b : FST float ptr [ECX]
0054756d : MOV AL,byte ptr [EBP + 0x4]
00547570 : SHR AL,0x6
00547573 : TEST AL,0x1
00547575 : MOVZX EAX,word ptr [EBP]
00547579 : JZ 0x0054757d
0054757b : NEG EAX
0054757d : MOVZX EDI,word ptr [EBP + 0x2]
00547581 : MOV dword ptr [ESP + 0x1c],EAX
00547585 : SHR EDI,0xc
00547588 : FIADD dword ptr [ESP + 0x1c]
0054758c : FSTP float ptr [ESP + 0x14]
00547590 : CMP EDI,0x1
00547593 : JBE 0x005475c2
00547595 : TEST EDI,EDI
00547597 : JBE 0x005475c2
00547599 : LEA EAX,[EDX + EDX*0x1]
0054759c : MOV EDX,EDI
0054759e : MOV EBX,dword ptr [ESI + 0x4f8]
005475a4 : MOV EBP,0xa0
005475a9 : MOV word ptr [EAX + EBX*0x1],BP
005475ad : FST float ptr [ECX]
005475af : ADD EAX,0x2
005475b2 : ADD ECX,0x4
005475b5 : SUB EDX,0x1
005475b8 : JNZ 0x0054759e
005475ba : MOV EBP,dword ptr [ESP + 0x2c]
005475be : MOV EDX,dword ptr [ESP + 0x28]
005475c2 : ADD EDX,EDI
005475c4 : ADD EBP,0x8
005475c7 : SUB dword ptr [ESP + 0x20],0x1
005475cc : MOV dword ptr [ESP + 0x28],EDX
005475d0 : MOV dword ptr [ESP + 0x2c],EBP
005475d4 : JNZ 0x00547560
005475d6 : MOV EDI,dword ptr [ESP + 0x24]
005475da : FSTP ST0
005475dc : FLD float ptr [ESP + 0x14]
005475e0 : LEA EBX,[ESP + 0x30]
005475e4 : FSTP float ptr [EDI + EDX*0x4]
005475e7 : MOV EAX,dword ptr [ESI]
005475e9 : MOV byte ptr [ESP + 0x5c],0x0
005475ee : MOV ECX,dword ptr [EAX + 0x14]
005475f1 : MOV EDX,dword ptr [ECX]
005475f3 : PUSH EBX
005475f4 : PUSH EAX
005475f5 : MOV EAX,dword ptr [EDX + 0x4]
005475f8 : CALL EAX
005475fa : MOV byte ptr [ESP + 0x1b],AL
005475fe : TEST AL,AL
00547600 : JZ 0x005476cd
00547606 : MOV CL,byte ptr [ESP + 0x5c]
0054760a : MOV byte ptr [ESI + 0x2ec],CL
00547610 : MOV ECX,dword ptr [ESP + 0x58]
00547614 : CMP ECX,dword ptr [ESP + 0x10]
00547618 : JZ 0x005476cd
0054761e : MOV EAX,dword ptr [ESI + 0x290]
00547624 : TEST EAX,EAX
00547626 : JZ 0x00547656
00547628 : MOV EDX,dword ptr [ESI + 0x294]
0054762e : CMP EDX,dword ptr [EAX + 0x4]
00547631 : JNC 0x00547656
00547633 : CMP ECX,dword ptr [ESI + 0x2d4]
00547639 : JBE 0x00547656
0054763b : LEA EAX,[ESI + 0x2b0]
00547641 : PUSH EAX
00547642 : LEA ECX,[ESI + 0x94]
00547648 : CALL 0x0059a3e0
0054764d : LEA ECX,[ESI + 0x22c]
00547653 : PUSH ECX
00547654 : JMP 0x005476a7
00547656 : MOV EAX,dword ptr [ESI + 0x1e4]
0054765c : TEST EAX,EAX
0054765e : JZ 0x0054768e
00547660 : MOV EDX,dword ptr [ESI + 0x1e8]
00547666 : CMP EDX,dword ptr [EAX + 0x4]
00547669 : JNC 0x0054768e
0054766b : CMP ECX,dword ptr [ESI + 0x228]
00547671 : JBE 0x0054768e
00547673 : LEA EAX,[ESI + 0x204]
00547679 : PUSH EAX
0054767a : LEA ECX,[ESI + 0x94]
00547680 : CALL 0x0059a3e0
00547685 : LEA ECX,[ESI + 0x180]
0054768b : PUSH ECX
0054768c : JMP 0x005476a7
0054768e : LEA EDX,[ESI + 0x158]
00547694 : PUSH EDX
00547695 : LEA ECX,[ESI + 0x94]
0054769b : CALL 0x0059a3e0
005476a0 : LEA EAX,[ESI + 0xd4]
005476a6 : PUSH EAX
005476a7 : LEA ECX,[ESI + 0x10]
005476aa : CALL 0x00545fe0
005476af : MOV ECX,dword ptr [ESP + 0x58]
005476b3 : MOV dword ptr [ESI + 0x2e8],0x2
005476bd : MOV dword ptr [ESI + 0x2f0],ECX
005476c3 : MOV dword ptr [ESI + 0x2e4],0x0
005476cd : LEA EDX,[ESP + 0x1c8]
005476d4 : CMP EDI,EDX
005476d6 : JZ 0x00547753
005476d8 : MOV EAX,dword ptr [ESI]
005476da : MOV EBX,dword ptr [EAX + 0xc]
005476dd : CMP dword ptr [EBX + 0x8],0x0
005476e1 : JNZ 0x00547749
005476e3 : PUSH EBX
005476e4 : CALL 0x00515dd0
005476e9 : MOV EBP,EAX
005476eb : PUSH 0x0
005476ed : PUSH 0x50
005476ef : MOV ECX,EBP
005476f1 : CALL 0x00515840
005476f6 : MOV EDI,EAX
005476f8 : TEST EDI,EDI
005476fa : JZ 0x00547738
005476fc : MOV dword ptr [EDI],0xcd3f2c
00547702 : XOR ECX,ECX
00547704 : MOV EAX,0x1
00547709 : MOV dword ptr [EDI + 0x4],EAX
0054770c : MOV dword ptr [EDI],0xb8670c
00547712 : MOV dword ptr [EDI + 0x8],ECX
00547715 : MOV dword ptr [EDI + 0xc],ECX
00547718 : MOV ECX,0x64
0054771d : MOV dword ptr [EDI + 0x10],ECX
00547720 : MOV dword ptr [EDI + 0x14],ECX
00547723 : PUSH EBP
00547724 : LEA ECX,[EDI + 0x20]
00547727 : MOV dword ptr [EDI + 0x18],EAX
0054772a : MOV dword ptr [EDI + 0x1c],EBP
0054772d : CALL 0x00504200
00547732 : MOV byte ptr [EDI + 0x4c],0x0
00547736 : JMP 0x0054773a
00547738 : XOR EDI,EDI
0054773a : MOV ECX,dword ptr [EBX + 0x8]
0054773d : TEST ECX,ECX
0054773f : JZ 0x00547746
00547741 : CALL 0x004ff7c0
00547746 : MOV dword ptr [EBX + 0x8],EDI
00547749 : MOV ECX,dword ptr [ESP + 0x24]
0054774d : PUSH ECX
0054774e : CALL 0x00515cf0
00547753 : LEA ECX,[ESP + 0x70]
00547757 : CALL 0x00545cb0
0054775c : PUSH EAX
0054775d : LEA ECX,[ESI + 0x180]
00547763 : CALL 0x00545fe0
00547768 : PUSH EAX
00547769 : LEA ECX,[ESI + 0xd4]
0054776f : CALL 0x00545fe0
00547774 : MOV ECX,dword ptr [ESP + 0xdc]
0054777b : TEST ECX,ECX
0054777d : JZ 0x00547784
0054777f : CALL 0x004ff7e0
00547784 : MOV ECX,dword ptr [ESP + 0xbc]
0054778b : TEST ECX,ECX
0054778d : JZ 0x00547794
0054778f : CALL 0x004ff7e0
00547794 : MOV ECX,dword ptr [ESP + 0x8c]
0054779b : TEST ECX,ECX
0054779d : JZ 0x005477a4
0054779f : CALL 0x004ff7c0
005477a4 : MOV EAX,dword ptr [ESP + 0x74]
005477a8 : TEST EAX,EAX
005477aa : JZ 0x005477c2
005477ac : DEC dword ptr [EAX]
005477ae : MOV EDI,EAX
005477b0 : CMP dword ptr [EDI],0x0
005477b3 : JNZ 0x005477c2
005477b5 : MOV ECX,EDI
005477b7 : CALL 0x00500860
005477bc : PUSH EDI
005477bd : CALL 0x00515cf0
005477c2 : CMP byte ptr [ESP + 0x1b],0x0
005477c7 : JZ 0x00547812
005477c9 : CMP dword ptr [ESI + 0x2e8],0x2
005477d0 : JNZ 0x00547812
005477d2 : POP EDI
005477d3 : POP EBP
005477d4 : POP EBX
005477d5 : MOV AL,0x1
005477d7 : POP ESI
005477d8 : ADD ESP,0x5b8
005477de : RET
005477df : CMP EAX,0x2
005477e2 : JNZ 0x00547812
005477e4 : LEA ECX,[ESP + 0x11c]
005477eb : CALL 0x00545cb0
005477f0 : PUSH EAX
005477f1 : LEA ECX,[ESI + 0x22c]
005477f7 : CALL 0x00545fe0
005477fc : LEA ECX,[ESP + 0x11c]
00547803 : CALL 0x00545f90
00547808 : MOV dword ptr [ESI + 0x2e8],0x1
00547812 : CMP byte ptr [ESI + 0x2ec],0x0
00547819 : JZ 0x005479d0
0054781f : MOV EDX,dword ptr [ESI + 0x9c]
00547825 : MOV EAX,dword ptr [ESI + 0x94]
0054782b : LEA EBP,[EAX + EDX*0x8]
0054782e : XOR ECX,ECX
00547830 : XOR EDX,EDX
00547832 : MOV word ptr [EBP + 0x4],CX
00547836 : MOV word ptr [EBP + 0x6],DX
0054783a : FLD float ptr [ESI + 0x20]
0054783d : FSTP float ptr [ESP + 0x10]
00547841 : FLDZ
00547843 : FLD float ptr [ESP + 0x10]
00547847 : FCOM
00547849 : FNSTSW AX
0054784b : FSTP ST1
0054784d : TEST AH,0x41
00547850 : JNZ 0x0054785a
00547852 : FADD double ptr [0x00cdf120]
00547858 : JMP 0x00547860
0054785a : FSUB double ptr [0x00cdf120]
00547860 : CALL 0x0063b380
00547865 : MOV ECX,dword ptr [ESI + 0x10]
00547868 : TEST ECX,ECX
0054786a : JZ 0x0054788a
0054786c : TEST EAX,EAX
0054786e : JL 0x0054787f
00547870 : MOV word ptr [ECX + 0x2],AX
00547874 : MOV EAX,0xffbf
00547879 : AND word ptr [ECX + 0x6],AX
0054787d : JMP 0x0054788a
0054787f : NEG EAX
00547881 : OR word ptr [ECX + 0x6],0x40
00547886 : MOV word ptr [ECX + 0x2],AX
0054788a : MOV ECX,dword ptr [ESI + 0x14]
0054788d : MOV EDX,dword ptr [ECX + 0x14]
00547890 : MOV ECX,dword ptr [EDX + 0xc]
00547893 : MOV EAX,dword ptr [ECX]
00547895 : MOV EDX,dword ptr [EAX + 0xc]
00547898 : PUSH 0x2d
0054789a : CALL EDX
0054789c : MOV EDI,EAX
0054789e : MOV EAX,0xfff
005478a3 : AND word ptr [EBP + 0x4],AX
005478a7 : MOV word ptr [EBP],DI
005478ab : FLD float ptr [ESI + 0x524]
005478b1 : PUSH ECX
005478b2 : MOV ECX,EBP
005478b4 : FSTP float ptr [ESP]
005478b7 : CALL 0x005442d0
005478bc : MOV ECX,dword ptr [ESI + 0x520]
005478c2 : MOV EDX,dword ptr [ESI + 0x14]
005478c5 : MOV dword ptr [ESI + 0x44],ECX
005478c8 : MOV EAX,dword ptr [EDX + 0x14]
005478cb : MOV ECX,dword ptr [EAX + 0xc]
005478ce : MOV EDX,dword ptr [ECX]
005478d0 : MOV EAX,dword ptr [EDX + 0x20]
005478d3 : PUSH EDI
005478d4 : CALL EAX
005478d6 : FSTP float ptr [ESP + 0x10]
005478da : FLD float ptr [ESP + 0x10]
005478de : MOV ECX,dword ptr [ESI + 0x500]
005478e4 : FMUL float ptr [ESI + 0x508]
005478ea : LEA EAX,[ESP + 0x60]
005478ee : PUSH EAX
005478ef : PUSH EDI
005478f0 : FSTP float ptr [ESP + 0x18]
005478f4 : FLDZ
005478f6 : FST float ptr [ESP + 0x68]
005478fa : FST float ptr [ESP + 0x6c]
005478fe : FST float ptr [ESP + 0x70]
00547902 : FSTP float ptr [ESP + 0x74]
00547906 : MOV ECX,dword ptr [ECX + 0xc]
00547909 : MOV EDX,dword ptr [ECX]
0054790b : MOV EDX,dword ptr [EDX + 0x30]
0054790e : CALL EDX
00547910 : FLD float ptr [EAX + 0x8]
00547913 : FMUL float ptr [ESI + 0x508]
00547919 : FADD double ptr [0x00b86058]
0054791f : FSTP float ptr [ESP + 0x20]
00547923 : FLD float ptr [ESP + 0x10]
00547927 : FLD float ptr [ESP + 0x20]
0054792b : FCOM
0054792d : FNSTSW AX
0054792f : TEST AH,0x41
00547932 : JNZ 0x00547938
00547934 : FSTP ST1
00547936 : JMP 0x0054793a
00547938 : FSTP ST0
0054793a : FSTP float ptr [ESP + 0x10]
0054793e : FLDZ
00547940 : FLD float ptr [ESP + 0x10]
00547944 : FCOM
00547946 : FNSTSW AX
00547948 : FSTP ST1
0054794a : TEST AH,0x41
0054794d : JNZ 0x00547962
0054794f : FADD double ptr [0x00cdf120]
00547955 : CALL 0x0063b380
0054795a : MOV EBX,EAX
0054795c : MOV dword ptr [ESP + 0x10],EBX
00547960 : JMP 0x00547973
00547962 : FSUB double ptr [0x00cdf120]
00547968 : CALL 0x0063b380
0054796d : MOV EBX,EAX
0054796f : MOV dword ptr [ESP + 0x10],EAX
00547973 : MOV EAX,dword ptr [ESI + 0x14]
00547976 : MOV ECX,dword ptr [EAX + 0x14]
00547979 : MOV ECX,dword ptr [ECX + 0xc]
0054797c : MOV EDX,dword ptr [ECX]
0054797e : MOV EAX,dword ptr [EDX + 0x28]
00547981 : PUSH EDI
00547982 : CALL EAX
00547984 : FSTP ST0
00547986 : FILD dword ptr [ESP + 0x10]
0054798a : MOV ECX,dword ptr [ESI + 0x520]
00547990 : ADD ECX,EBX
00547992 : MOV dword ptr [ESI + 0x24],EBX
00547995 : FSTP float ptr [ESI + 0x20]
00547998 : MOV dword ptr [ESI + 0x1c],EDI
0054799b : MOV dword ptr [ESI + 0xac],0x0
005479a5 : MOV dword ptr [ESI + 0x48],ECX
005479a8 : MOV byte ptr [ESI + 0x2ec],0x0
005479af : MOV dword ptr [ESI + 0x10],EBP
005479b2 : CMP dword ptr [ESI + 0x94],0x0
005479b9 : JZ 0x005479d0
005479bb : MOV EAX,dword ptr [ESI + 0x9c]
005479c1 : CMP EAX,dword ptr [ESI + 0xa0]
005479c7 : JNC 0x005479d0
005479c9 : INC EAX
005479ca : MOV dword ptr [ESI + 0x9c],EAX
005479d0 : POP EDI
005479d1 : POP EBP
005479d2 : POP EBX
005479d3 : XOR AL,AL
005479d5 : POP ESI
005479d6 : ADD ESP,0x5b8
005479dc : RET
