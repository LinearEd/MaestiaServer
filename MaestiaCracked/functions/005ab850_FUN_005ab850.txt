PROGRAM  : Maestia.exe
FUNCTION : FUN_005ab850
ENTRY    : 005ab850
BODY     : [[005ab850, 005ab8dc]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_005ab850(uint param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int *in_ECX;
  uint uVar4;
  int iVar5;
  uint uVar6;
  int local_4;
  
  iVar2 = *in_ECX;
  iVar5 = 0;
  uVar6 = 0xffffffff;
  if (iVar2 != 0) {
    local_4 = 0;
    uVar3 = param_1;
    while( true ) {
      uVar4 = *(uint *)(iVar2 + 0x24) - param_1;
      if (((param_1 <= *(uint *)(iVar2 + 0x24)) && (uVar4 < uVar6)) &&
         (iVar5 = iVar2, uVar6 = uVar4, uVar4 == 0)) {
        return iVar2;
      }
      iVar1 = *(int *)(iVar2 + 0x10);
      iVar2 = *(int *)(iVar2 + 0xc + ((int)uVar3 >> 0x1f) * -4);
      if ((iVar1 != 0) && (iVar1 != iVar2)) {
        local_4 = iVar1;
      }
      if (iVar2 == 0) break;
      uVar3 = uVar3 * 2;
    }
    for (; local_4 != 0;
        local_4 = *(int *)(local_4 + 0xc + (uint)(*(int *)(local_4 + 0xc) == 0) * 4)) {
      uVar3 = *(uint *)(local_4 + 0x24) - param_1;
      if ((param_1 <= *(uint *)(local_4 + 0x24)) && (uVar3 < uVar6)) {
        iVar5 = local_4;
        uVar6 = uVar3;
      }
    }
  }
  return iVar5;
}



============================================================
DISASSEMBLY
============================================================
005ab850 : PUSH ECX
005ab851 : MOV EAX,dword ptr [ECX]
005ab853 : PUSH EBX
005ab854 : PUSH EBP
005ab855 : PUSH ESI
005ab856 : PUSH EDI
005ab857 : XOR EBP,EBP
005ab859 : OR EDI,0xffffffff
005ab85c : CMP EAX,EBP
005ab85e : JZ 0x005ab8d3
005ab860 : MOV ESI,dword ptr [ESP + 0x18]
005ab864 : MOV dword ptr [ESP + 0x10],EBP
005ab868 : MOV EBX,ESI
005ab86a : LEA EBX,[EBX]
005ab870 : MOV EDX,dword ptr [EAX + 0x24]
005ab873 : MOV ECX,EDX
005ab875 : SUB ECX,ESI
005ab877 : CMP EDX,ESI
005ab879 : JC 0x005ab887
005ab87b : CMP ECX,EDI
005ab87d : JNC 0x005ab887
005ab87f : MOV EBP,EAX
005ab881 : MOV EDI,ECX
005ab883 : TEST ECX,ECX
005ab885 : JZ 0x005ab8d5
005ab887 : MOV ECX,dword ptr [EAX + 0x10]
005ab88a : MOV EDX,EBX
005ab88c : SHR EDX,0x1f
005ab88f : MOV EAX,dword ptr [EAX + EDX*0x4 + 0xc]
005ab893 : TEST ECX,ECX
005ab895 : JZ 0x005ab89f
005ab897 : CMP ECX,EAX
005ab899 : JZ 0x005ab89f
005ab89b : MOV dword ptr [ESP + 0x10],ECX
005ab89f : TEST EAX,EAX
005ab8a1 : JZ 0x005ab8a7
005ab8a3 : ADD EBX,EBX
005ab8a5 : JMP 0x005ab870
005ab8a7 : MOV ECX,dword ptr [ESP + 0x10]
005ab8ab : TEST ECX,ECX
005ab8ad : JZ 0x005ab8d3
005ab8af : NOP
005ab8b0 : MOV EDX,dword ptr [ECX + 0x24]
005ab8b3 : MOV EAX,EDX
005ab8b5 : SUB EAX,ESI
005ab8b7 : CMP EDX,ESI
005ab8b9 : JC 0x005ab8c3
005ab8bb : CMP EAX,EDI
005ab8bd : JNC 0x005ab8c3
005ab8bf : MOV EDI,EAX
005ab8c1 : MOV EBP,ECX
005ab8c3 : XOR EAX,EAX
005ab8c5 : CMP dword ptr [ECX + 0xc],EAX
005ab8c8 : SETZ AL
005ab8cb : MOV ECX,dword ptr [ECX + EAX*0x4 + 0xc]
005ab8cf : TEST ECX,ECX
005ab8d1 : JNZ 0x005ab8b0
005ab8d3 : MOV EAX,EBP
005ab8d5 : POP EDI
005ab8d6 : POP ESI
005ab8d7 : POP EBP
005ab8d8 : POP EBX
005ab8d9 : POP ECX
005ab8da : RET 0x4
