PROGRAM  : Maestia.exe
FUNCTION : FUN_005082b0
ENTRY    : 005082b0
BODY     : [[005082b0, 005083be]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005082b0(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  int *piVar4;
  undefined4 uStack_10;
  int iStack_c;
  undefined4 uStack_8;
  undefined4 uStack_4;
  
  puVar2 = param_1;
  if ((param_1[2] != 0) && (iVar3 = (**(code **)(*(int *)param_1[2] + 8))(), iVar3 == 4)) {
    if (puVar2[2] == 0) {
      piVar4 = (int *)0x0;
    }
    else {
      piVar4 = (int *)(puVar2[2] + -0x68);
    }
    if ((((int *)piVar4[0x34] == (int *)0x0) || (*(int *)piVar4[0x34] == 0)) && (0 < (int)puVar2[7])
       ) {
      uVar1 = puVar2[6];
      FUN_00526260(0);
      FUN_005272e0(&param_1,uVar1,0xffffffff,0);
      uStack_4 = FUN_00515dd0(piVar4);
      uStack_10 = 0;
      iStack_c = 0;
      uStack_8 = 0;
      FUN_00544be0(*param_1,0xffffffff,0,&uStack_10);
      if (iStack_c != 0) {
        FUN_00505d80(&uStack_10);
      }
      iVar3 = (**(code **)(*piVar4 + 0x40))();
      if (iVar3 != 0) {
        *(uint *)(iVar3 + 0xb00) = *(uint *)(iVar3 + 0xb00) | 0x400;
      }
      FUN_00503a20(uStack_10,iStack_c);
      FUN_00515cf0(uStack_10);
      param_1[2] = param_1[2] + -1;
      if (param_1[2] == 0) {
        FUN_00525340();
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005082b0 : SUB ESP,0x10
005082b3 : PUSH EDI
005082b4 : MOV EDI,dword ptr [ESP + 0x18]
005082b8 : CMP dword ptr [EDI + 0x8],0x0
005082bc : JZ 0x005083ba
005082c2 : MOV ECX,dword ptr [EDI + 0x8]
005082c5 : MOV EAX,dword ptr [ECX]
005082c7 : MOV EDX,dword ptr [EAX + 0x8]
005082ca : CALL EDX
005082cc : CMP EAX,0x4
005082cf : JNZ 0x005083ba
005082d5 : MOV EAX,dword ptr [EDI + 0x8]
005082d8 : PUSH ESI
005082d9 : TEST EAX,EAX
005082db : JZ 0x005082e2
005082dd : LEA ESI,[EAX + -0x68]
005082e0 : JMP 0x005082e4
005082e2 : XOR ESI,ESI
005082e4 : MOV EAX,dword ptr [ESI + 0xd0]
005082ea : TEST EAX,EAX
005082ec : JZ 0x005082f7
005082ee : CMP dword ptr [EAX],0x0
005082f1 : JNZ 0x005083b9
005082f7 : CMP dword ptr [EDI + 0x1c],0x1
005082fb : JL 0x005083b9
00508301 : PUSH EBX
00508302 : MOV EBX,dword ptr [EDI + 0x18]
00508305 : PUSH 0x0
00508307 : MOV ECX,EDI
00508309 : CALL 0x00526260
0050830e : PUSH 0x0
00508310 : PUSH -0x1
00508312 : PUSH EBX
00508313 : LEA ECX,[ESP + 0x2c]
00508317 : PUSH ECX
00508318 : MOV ECX,EAX
0050831a : CALL 0x005272e0
0050831f : PUSH ESI
00508320 : CALL 0x00515dd0
00508325 : LEA EDX,[ESP + 0xc]
00508329 : PUSH EDX
0050832a : MOV dword ptr [ESP + 0x1c],EAX
0050832e : MOV EAX,dword ptr [ESP + 0x24]
00508332 : PUSH 0x0
00508334 : MOV dword ptr [ESP + 0x14],0x0
0050833c : MOV dword ptr [ESP + 0x18],0x0
00508344 : MOV dword ptr [ESP + 0x1c],0x0
0050834c : MOV ECX,dword ptr [EAX]
0050834e : PUSH -0x1
00508350 : PUSH ECX
00508351 : MOV ECX,dword ptr [ESI + 0xa0]
00508357 : CALL 0x00544be0
0050835c : CMP dword ptr [ESP + 0x10],0x0
00508361 : POP EBX
00508362 : JBE 0x00508370
00508364 : LEA EDX,[ESP + 0x8]
00508368 : PUSH EDX
00508369 : MOV ECX,ESI
0050836b : CALL 0x00505d80
00508370 : MOV EAX,dword ptr [ESI]
00508372 : MOV EDX,dword ptr [EAX + 0x40]
00508375 : MOV ECX,ESI
00508377 : CALL EDX
00508379 : TEST EAX,EAX
0050837b : JZ 0x00508387
0050837d : OR dword ptr [EAX + 0xb00],0x400
00508387 : MOV EAX,dword ptr [ESP + 0xc]
0050838b : MOV ECX,dword ptr [ESP + 0x8]
0050838f : PUSH EAX
00508390 : PUSH ECX
00508391 : CALL 0x00503a20
00508396 : MOV EDX,dword ptr [ESP + 0x10]
0050839a : ADD ESP,0x8
0050839d : PUSH EDX
0050839e : CALL 0x00515cf0
005083a3 : MOV EAX,dword ptr [ESP + 0x1c]
005083a7 : DEC dword ptr [EAX + 0x8]
005083aa : MOV ECX,EAX
005083ac : ADD EAX,0x8
005083af : CMP dword ptr [EAX],0x0
005083b2 : JNZ 0x005083b9
005083b4 : CALL 0x00525340
005083b9 : POP ESI
005083ba : POP EDI
005083bb : ADD ESP,0x10
005083be : RET
