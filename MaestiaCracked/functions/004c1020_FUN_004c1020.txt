PROGRAM  : Maestia.exe
FUNCTION : FUN_004c1020
ENTRY    : 004c1020
BODY     : [[004c1020, 004c10f0] [004c10f4, 004c110b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004c1020(int *param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  int unaff_EDI;
  undefined8 uVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7717d;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar4 = FUN_0042c360(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  uVar5 = FUN_0063871f(uVar4 & 0x7fffffff,0x1f31d);
  uVar4 = (int)((ulonglong)uVar5 >> 0x20) * 0x41a7 + (int)uVar5 * -0xb14;
  if ((int)uVar4 < 0) {
    uVar4 = uVar4 + 0x7fffffff;
  }
  uVar4 = *(uint *)(unaff_EDI + 0x20) & uVar4;
  if (*(uint *)(unaff_EDI + 0x24) <= uVar4) {
    uVar4 = uVar4 + (-1 - (*(uint *)(unaff_EDI + 0x20) >> 1));
  }
  iVar2 = *(int *)(unaff_EDI + 0x14);
  iVar1 = uVar4 * 4;
  piVar3 = *(int **)(iVar1 + iVar2);
  while ((piVar3 == param_2 &&
         (*(undefined4 *)(iVar2 + iVar1) = **(undefined4 **)(iVar2 + iVar1), uVar4 != 0))) {
    iVar2 = *(int *)(unaff_EDI + 0x14);
    uVar4 = uVar4 - 1;
    piVar3 = *(int **)(iVar2 + uVar4 * 4);
    iVar1 = uVar4 * 4;
  }
  if (param_2 == *(int **)(unaff_EDI + 8)) {
    *param_1 = *param_2;
    ExceptionList = local_10;
    return;
  }
  *(int *)param_2[1] = *param_2;
  *(int *)(*param_2 + 4) = param_2[1];
  local_8 = 0xffffffff;
  FUN_0044cb00(param_2 + 2);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
004c1020 : PUSH EBP
004c1021 : MOV EBP,ESP
004c1023 : PUSH -0x1
004c1025 : PUSH 0xb7717d
004c102a : MOV EAX,FS:[0x0]
004c1030 : PUSH EAX
004c1031 : PUSH ECX
004c1032 : PUSH EBX
004c1033 : PUSH ESI
004c1034 : MOV EAX,[0x00d66fa0]
004c1039 : XOR EAX,EBP
004c103b : PUSH EAX
004c103c : LEA EAX,[EBP + -0xc]
004c103f : MOV FS:[0x0],EAX
004c1045 : MOV EAX,dword ptr [EBP + 0xc]
004c1048 : ADD EAX,0x8
004c104b : CALL 0x0042c360
004c1050 : AND EAX,0x7fffffff
004c1055 : PUSH 0x1f31d
004c105a : PUSH EAX
004c105b : CALL 0x0063871f
004c1060 : IMUL EDX,EDX,0x41a7
004c1066 : IMUL EAX,EAX,0xb14
004c106c : ADD ESP,0x8
004c106f : SUB EDX,EAX
004c1071 : JNS 0x004c1079
004c1073 : ADD EDX,0x7fffffff
004c1079 : MOV EAX,dword ptr [EDI + 0x20]
004c107c : MOV ESI,EAX
004c107e : AND ESI,EDX
004c1080 : CMP dword ptr [EDI + 0x24],ESI
004c1083 : JA 0x004c108e
004c1085 : SHR EAX,0x1
004c1087 : OR ECX,0xffffffff
004c108a : SUB ECX,EAX
004c108c : ADD ESI,ECX
004c108e : MOV EAX,dword ptr [EDI + 0x14]
004c1091 : MOV EDX,dword ptr [EBP + 0xc]
004c1094 : LEA ECX,[ESI*0x4 + 0x0]
004c109b : CMP dword ptr [ECX + EAX*0x1],EDX
004c109e : JNZ 0x004c10bf
004c10a0 : MOV EDX,dword ptr [EAX + ECX*0x1]
004c10a3 : MOV EDX,dword ptr [EDX]
004c10a5 : MOV dword ptr [EAX + ECX*0x1],EDX
004c10a8 : MOV EDX,dword ptr [EBP + 0xc]
004c10ab : TEST ESI,ESI
004c10ad : JZ 0x004c10bf
004c10af : MOV EAX,dword ptr [EDI + 0x14]
004c10b2 : DEC ESI
004c10b3 : CMP dword ptr [EAX + ESI*0x4],EDX
004c10b6 : LEA ECX,[ESI*0x4 + 0x0]
004c10bd : JZ 0x004c10a0
004c10bf : MOV EBX,dword ptr [EDX]
004c10c1 : MOV ESI,EDX
004c10c3 : MOV dword ptr [EBP + -0x10],ESI
004c10c6 : CMP EDX,dword ptr [EDI + 0x8]
004c10c9 : JZ 0x004c10f4
004c10cb : MOV ECX,dword ptr [EDX + 0x4]
004c10ce : LEA EAX,[EDX + 0x4]
004c10d1 : MOV dword ptr [ECX],EBX
004c10d3 : MOV ECX,dword ptr [ESI]
004c10d5 : MOV EDX,dword ptr [EAX]
004c10d7 : MOV dword ptr [ECX + 0x4],EDX
004c10da : MOV dword ptr [EBP + -0x4],0xffffffff
004c10e1 : LEA EAX,[ESI + 0x8]
004c10e4 : PUSH EAX
004c10e5 : CALL 0x0044cb00
004c10ea : MOV ECX,ESI
004c10ec : CALL 0x006f04e0
004c10f4 : MOV EAX,dword ptr [EBP + 0x8]
004c10f7 : MOV dword ptr [EAX],EBX
004c10f9 : MOV ECX,dword ptr [EBP + -0xc]
004c10fc : MOV dword ptr FS:[0x0],ECX
004c1103 : POP ECX
004c1104 : POP ESI
004c1105 : POP EBX
004c1106 : MOV ESP,EBP
004c1108 : POP EBP
004c1109 : RET 0x8
