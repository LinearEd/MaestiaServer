PROGRAM  : Maestia.exe
FUNCTION : FUN_0058b4b0
ENTRY    : 0058b4b0
BODY     : [[0058b4b0, 0058b5d2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058b4b0(int *param_1)

{
  int *piVar1;
  char cVar2;
  int *in_ECX;
  
  if (in_ECX[0x6d] != 0) {
    cVar2 = (**(code **)(*in_ECX + 0xa0))();
    if ((cVar2 == '\0') && (piVar1 = (int *)in_ECX[0x6d], piVar1 != (int *)0x0)) {
      if (piVar1[0x6d] != 0) {
        cVar2 = (**(code **)(*piVar1 + 0xa0))();
        if ((cVar2 == '\0') && (piVar1[0x6d] != 0)) {
          FUN_0058b4b0(0);
        }
      }
      piVar1[0x23] = piVar1[0x23] & 0xffff7fff;
      piVar1[0x6d] = 0;
    }
    if (in_ECX[0x6d] != 0) {
      cVar2 = (**(code **)(*in_ECX + 0xa0))();
      if ((cVar2 != '\0') && (in_ECX[0x6d] != 0)) {
        FUN_0058b4b0(0);
      }
      if (in_ECX[0x6d] != 0) {
        cVar2 = (**(code **)(*in_ECX + 0xa0))();
        if (cVar2 == '\0') {
          GRefCountNTSImpl::Release((GRefCountNTSImpl *)in_ECX[0x6d]);
        }
      }
    }
  }
  in_ECX[0x23] = in_ECX[0x23] & 0xffff7fff;
  in_ECX[0x6d] = (int)param_1;
  if (param_1 != (int *)0x0) {
    param_1[1] = param_1[1] + 1;
    *(undefined2 *)(in_ECX + 0x19) = 0;
    if (param_1[0x6d] != 0) {
      cVar2 = (**(code **)(*param_1 + 0xa0))();
      if ((cVar2 != '\0') && (param_1[0x6d] != 0)) {
        FUN_0058b4b0(0);
      }
    }
    FUN_0058a0f0(in_ECX);
  }
  *(uint *)(in_ECX[0x28] + 0xb00) = *(uint *)(in_ECX[0x28] + 0xb00) | 0x400;
  return;
}



============================================================
DISASSEMBLY
============================================================
0058b4b0 : PUSH ESI
0058b4b1 : MOV ESI,ECX
0058b4b3 : CMP dword ptr [ESI + 0x1b4],0x0
0058b4ba : PUSH EDI
0058b4bb : JZ 0x0058b566
0058b4c1 : MOV EAX,dword ptr [ESI]
0058b4c3 : MOV EDX,dword ptr [EAX + 0xa0]
0058b4c9 : CALL EDX
0058b4cb : TEST AL,AL
0058b4cd : JNZ 0x0058b518
0058b4cf : MOV EDI,dword ptr [ESI + 0x1b4]
0058b4d5 : TEST EDI,EDI
0058b4d7 : JZ 0x0058b518
0058b4d9 : CMP dword ptr [EDI + 0x1b4],0x0
0058b4e0 : JZ 0x0058b504
0058b4e2 : MOV EAX,dword ptr [EDI]
0058b4e4 : MOV EDX,dword ptr [EAX + 0xa0]
0058b4ea : MOV ECX,EDI
0058b4ec : CALL EDX
0058b4ee : TEST AL,AL
0058b4f0 : JNZ 0x0058b504
0058b4f2 : CMP dword ptr [EDI + 0x1b4],0x0
0058b4f9 : JZ 0x0058b504
0058b4fb : PUSH 0x0
0058b4fd : MOV ECX,EDI
0058b4ff : CALL 0x0058b4b0
0058b504 : AND dword ptr [EDI + 0x8c],0xffff7fff
0058b50e : MOV dword ptr [EDI + 0x1b4],0x0
0058b518 : CMP dword ptr [ESI + 0x1b4],0x0
0058b51f : JZ 0x0058b566
0058b521 : MOV EAX,dword ptr [ESI]
0058b523 : MOV EDX,dword ptr [EAX + 0xa0]
0058b529 : MOV ECX,ESI
0058b52b : CALL EDX
0058b52d : TEST AL,AL
0058b52f : JZ 0x0058b542
0058b531 : MOV ECX,dword ptr [ESI + 0x1b4]
0058b537 : TEST ECX,ECX
0058b539 : JZ 0x0058b542
0058b53b : PUSH 0x0
0058b53d : CALL 0x0058b4b0
0058b542 : CMP dword ptr [ESI + 0x1b4],0x0
0058b549 : JZ 0x0058b566
0058b54b : MOV EAX,dword ptr [ESI]
0058b54d : MOV EDX,dword ptr [EAX + 0xa0]
0058b553 : MOV ECX,ESI
0058b555 : CALL EDX
0058b557 : TEST AL,AL
0058b559 : JNZ 0x0058b566
0058b55b : MOV ECX,dword ptr [ESI + 0x1b4]
0058b561 : CALL 0x004ff7c0
0058b566 : MOV EDI,dword ptr [ESP + 0xc]
0058b56a : AND dword ptr [ESI + 0x8c],0xffff7fff
0058b574 : MOV dword ptr [ESI + 0x1b4],EDI
0058b57a : TEST EDI,EDI
0058b57c : JZ 0x0058b5b8
0058b57e : INC dword ptr [EDI + 0x4]
0058b581 : XOR EAX,EAX
0058b583 : MOV word ptr [ESI + 0x64],AX
0058b587 : CMP dword ptr [EDI + 0x1b4],EAX
0058b58d : JZ 0x0058b5b0
0058b58f : MOV EDX,dword ptr [EDI]
0058b591 : MOV EAX,dword ptr [EDX + 0xa0]
0058b597 : MOV ECX,EDI
0058b599 : CALL EAX
0058b59b : TEST AL,AL
0058b59d : JZ 0x0058b5b0
0058b59f : MOV ECX,dword ptr [EDI + 0x1b4]
0058b5a5 : TEST ECX,ECX
0058b5a7 : JZ 0x0058b5b0
0058b5a9 : PUSH 0x0
0058b5ab : CALL 0x0058b4b0
0058b5b0 : PUSH ESI
0058b5b1 : MOV ECX,EDI
0058b5b3 : CALL 0x0058a0f0
0058b5b8 : MOV ESI,dword ptr [ESI + 0xa0]
0058b5be : OR dword ptr [ESI + 0xb00],0x400
0058b5c8 : ADD ESI,0xb00
0058b5ce : POP EDI
0058b5cf : POP ESI
0058b5d0 : RET 0x4
