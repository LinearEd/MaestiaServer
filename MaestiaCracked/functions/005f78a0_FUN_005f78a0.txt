PROGRAM  : Maestia.exe
FUNCTION : FUN_005f78a0
ENTRY    : 005f78a0
BODY     : [[005f78a0, 005f792f]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_005f78a0(void)

{
  int *piVar1;
  int *in_ECX;
  longlong lVar2;
  longlong lVar3;
  
  lVar2 = (**(code **)(*in_ECX + 0x14))();
  lVar3 = (**(code **)(*in_ECX + 0x1c))();
  if ((lVar2 != -1) && (lVar3 != -1)) {
    in_ECX[6] = 0;
    return (int)lVar3 - (int)lVar2;
  }
  piVar1 = __errno();
  if (*piVar1 == 2) {
    in_ECX[6] = 0x1001;
    return 0;
  }
  piVar1 = __errno();
  if (*piVar1 != 0xd) {
    piVar1 = __errno();
    if (*piVar1 != 1) {
      piVar1 = __errno();
      in_ECX[6] = (*piVar1 == 0x1c) + 0x1003;
      return 0;
    }
  }
  in_ECX[6] = 0x1002;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
005f78a0 : PUSH EBX
005f78a1 : PUSH ESI
005f78a2 : MOV ESI,ECX
005f78a4 : MOV EAX,dword ptr [ESI]
005f78a6 : MOV EDX,dword ptr [EAX + 0x14]
005f78a9 : PUSH EDI
005f78aa : CALL EDX
005f78ac : MOV EDI,EAX
005f78ae : MOV EAX,dword ptr [ESI]
005f78b0 : MOV EBX,EDX
005f78b2 : MOV EDX,dword ptr [EAX + 0x1c]
005f78b5 : MOV ECX,ESI
005f78b7 : CALL EDX
005f78b9 : MOV ECX,EDI
005f78bb : AND ECX,EBX
005f78bd : CMP ECX,-0x1
005f78c0 : JZ 0x005f78d8
005f78c2 : MOV ECX,EAX
005f78c4 : AND ECX,EDX
005f78c6 : CMP ECX,-0x1
005f78c9 : JZ 0x005f78d8
005f78cb : SUB EAX,EDI
005f78cd : POP EDI
005f78ce : MOV dword ptr [ESI + 0x18],0x0
005f78d5 : POP ESI
005f78d6 : POP EBX
005f78d7 : RET
005f78d8 : CALL 0x0063ab82
005f78dd : CMP dword ptr [EAX],0x2
005f78e0 : JNZ 0x005f78f0
005f78e2 : MOV EAX,0x1001
005f78e7 : POP EDI
005f78e8 : MOV dword ptr [ESI + 0x18],EAX
005f78eb : POP ESI
005f78ec : XOR EAX,EAX
005f78ee : POP EBX
005f78ef : RET
005f78f0 : CALL 0x0063ab82
005f78f5 : CMP dword ptr [EAX],0xd
005f78f8 : JZ 0x005f7922
005f78fa : CALL 0x0063ab82
005f78ff : CMP dword ptr [EAX],0x1
005f7902 : JZ 0x005f7922
005f7904 : CALL 0x0063ab82
005f7909 : XOR EDX,EDX
005f790b : CMP dword ptr [EAX],0x1c
005f790e : POP EDI
005f790f : SETZ DL
005f7912 : ADD EDX,0x1003
005f7918 : MOV EAX,EDX
005f791a : MOV dword ptr [ESI + 0x18],EAX
005f791d : POP ESI
005f791e : XOR EAX,EAX
005f7920 : POP EBX
005f7921 : RET
005f7922 : MOV EAX,0x1002
005f7927 : POP EDI
005f7928 : MOV dword ptr [ESI + 0x18],EAX
005f792b : POP ESI
005f792c : XOR EAX,EAX
005f792e : POP EBX
005f792f : RET
