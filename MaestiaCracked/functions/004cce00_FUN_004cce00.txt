PROGRAM  : Maestia.exe
FUNCTION : FUN_004cce00
ENTRY    : 004cce00
BODY     : [[004cce00, 004ccf79] [004ccf8b, 004cd11c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004cce00(uint param_1,undefined4 *param_2)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int iVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  undefined4 uVar11;
  undefined4 *puVar12;
  undefined4 *in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar8 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b79fe0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar9 = *(int *)(param_1 + 4);
  if (iVar9 == 0) {
    param_1 = 0;
  }
  else {
    param_1 = (*(int *)(param_1 + 0xc) - iVar9) / 0x14;
  }
  iVar6 = *(int *)(iVar8 + 8);
  iVar9 = (iVar6 - iVar9) / 0x14;
  if (iVar9 == 0xccccccc) {
    iVar9 = FUN_00429be0();
  }
  uVar10 = iVar9 + 1;
  if (uVar10 <= param_1) {
    iVar9 = iVar6 - (int)param_2 >> 0x1f;
    uVar2 = *in_ECX;
    uVar3 = in_ECX[2];
    if ((iVar6 - (int)param_2) / 0x14 + iVar9 == iVar9) {
      uVar7 = in_ECX[1];
      uVar4 = in_ECX[3];
      uVar5 = in_ECX[4];
      FUN_004cd120(param_2,iVar6);
      local_8 = 2;
      FUN_004ccdd0();
      *(int *)(iVar8 + 8) = *(int *)(iVar8 + 8) + 0x14;
      puVar12 = (undefined4 *)(*(int *)(iVar8 + 8) + -0x14);
      if (param_2 != puVar12) {
        do {
          *param_2 = uVar2;
          param_2[1] = uVar7;
          param_2[2] = uVar3;
          param_2[3] = uVar4;
          param_2[4] = uVar5;
          param_2 = param_2 + 5;
        } while (param_2 != puVar12);
        ExceptionList = local_10;
        return;
      }
    }
    else {
      uVar7 = in_ECX[1];
      uVar4 = in_ECX[3];
      uVar5 = in_ECX[4];
      uVar11 = FUN_004cd120(iVar6 + -0x14,iVar6);
      *(undefined4 *)(iVar8 + 8) = uVar11;
      param_1 = param_1 & 0xffffff00;
      FUN_004cd210(param_2,param_2,param_1);
      if (param_2 != param_2 + 5) {
        puVar12 = param_2 + 4;
        do {
          puVar12[-4] = uVar2;
          puVar12[-3] = uVar7;
          puVar12[-2] = uVar3;
          puVar12[-1] = uVar4;
          *puVar12 = uVar5;
          puVar1 = puVar12 + 1;
          puVar12 = puVar12 + 5;
        } while (puVar1 != param_2 + 5);
      }
    }
    ExceptionList = local_10;
    return;
  }
  if (0xccccccc - (param_1 >> 1) < param_1) {
    param_1 = 0;
  }
  else {
    param_1 = param_1 + (param_1 >> 1);
  }
  if (param_1 < uVar10) {
    param_1 = uVar10;
  }
  iVar9 = FUN_00488520();
  local_8 = 0;
  FUN_004ccdd0();
  FUN_004cd120(*(undefined4 *)(iVar8 + 4),param_2);
  FUN_004cd120(param_2,*(undefined4 *)(iVar8 + 8));
  local_8 = 0xffffffff;
  if (*(int *)(iVar8 + 4) == 0) {
    *(uint *)(iVar8 + 0xc) = iVar9 + param_1 * 0x14;
    *(int *)(iVar8 + 8) = iVar9 + ((*(int *)(iVar8 + 8) - *(int *)(iVar8 + 4)) / 0x14 + 1) * 0x14;
    *(int *)(iVar8 + 4) = iVar9;
    ExceptionList = local_10;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
004cce00 : PUSH EBP
004cce01 : MOV EBP,ESP
004cce03 : PUSH -0x1
004cce05 : PUSH 0xb79fe0
004cce0a : MOV EAX,FS:[0x0]
004cce10 : PUSH EAX
004cce11 : SUB ESP,0x24
004cce14 : PUSH EBX
004cce15 : PUSH ESI
004cce16 : PUSH EDI
004cce17 : MOV EAX,[0x00d66fa0]
004cce1c : XOR EAX,EBP
004cce1e : PUSH EAX
004cce1f : LEA EAX,[EBP + -0xc]
004cce22 : MOV FS:[0x0],EAX
004cce28 : MOV dword ptr [EBP + -0x10],ESP
004cce2b : MOV ESI,ECX
004cce2d : MOV EBX,dword ptr [EBP + 0x8]
004cce30 : MOV ECX,dword ptr [EBX + 0x4]
004cce33 : TEST ECX,ECX
004cce35 : JNZ 0x004cce3c
004cce37 : MOV dword ptr [EBP + 0x8],ECX
004cce3a : JMP 0x004cce55
004cce3c : MOV EDX,dword ptr [EBX + 0xc]
004cce3f : SUB EDX,ECX
004cce41 : MOV EAX,0x66666667
004cce46 : IMUL EDX
004cce48 : SAR EDX,0x3
004cce4b : MOV EAX,EDX
004cce4d : SHR EAX,0x1f
004cce50 : ADD EAX,EDX
004cce52 : MOV dword ptr [EBP + 0x8],EAX
004cce55 : MOV EDI,dword ptr [EBX + 0x8]
004cce58 : MOV EDX,EDI
004cce5a : SUB EDX,ECX
004cce5c : MOV EAX,0x66666667
004cce61 : IMUL EDX
004cce63 : SAR EDX,0x3
004cce66 : MOV EAX,EDX
004cce68 : SHR EAX,0x1f
004cce6b : ADD EAX,EDX
004cce6d : MOV ECX,0xccccccc
004cce72 : SUB ECX,EAX
004cce74 : CMP ECX,0x1
004cce77 : JNC 0x004cce7e
004cce79 : CALL 0x00429be0
004cce7e : INC EAX
004cce7f : MOV ECX,dword ptr [EBP + 0x8]
004cce82 : CMP ECX,EAX
004cce84 : JNC 0x004ccf8b
004cce8a : MOV EDX,ECX
004cce8c : SHR EDX,0x1
004cce8e : MOV EDI,0xccccccc
004cce93 : SUB EDI,EDX
004cce95 : CMP EDI,ECX
004cce97 : JNC 0x004ccea5
004cce99 : MOV dword ptr [EBP + 0x8],0x0
004ccea0 : MOV ECX,dword ptr [EBP + 0x8]
004ccea3 : JMP 0x004cceaa
004ccea5 : ADD ECX,EDX
004ccea7 : MOV dword ptr [EBP + 0x8],ECX
004cceaa : CMP ECX,EAX
004cceac : JNC 0x004cceb3
004cceae : MOV dword ptr [EBP + 0x8],EAX
004cceb1 : MOV ECX,EAX
004cceb3 : CALL 0x00488520
004cceb8 : MOV EDI,EAX
004cceba : MOV dword ptr [EBP + -0x14],EDI
004ccebd : MOV ECX,dword ptr [EBP + 0xc]
004ccec0 : SUB ECX,dword ptr [EBX + 0x4]
004ccec3 : MOV EAX,0x66666667
004ccec8 : IMUL ECX
004cceca : SAR EDX,0x3
004ccecd : MOV EAX,EDX
004ccecf : SHR EAX,0x1f
004cced2 : ADD EAX,EDX
004cced4 : MOV dword ptr [EBP + -0x1c],EAX
004cced7 : MOV dword ptr [EBP + -0x4],0x0
004ccede : LEA EDX,[EAX + EAX*0x4]
004ccee1 : LEA EDI,[EDI + EDX*0x4]
004ccee4 : MOV EDX,ESI
004ccee6 : MOV ESI,0x1
004cceeb : CALL 0x004ccdd0
004ccef0 : MOV dword ptr [EBP + -0x18],ESI
004ccef3 : MOV EAX,dword ptr [EBP + 0xc]
004ccef6 : PUSH EAX
004ccef7 : MOV ECX,dword ptr [EBX + 0x4]
004ccefa : PUSH ECX
004ccefb : MOV ESI,dword ptr [EBP + -0x14]
004ccefe : MOV EDX,ESI
004ccf00 : CALL 0x004cd120
004ccf05 : MOV dword ptr [EBP + -0x18],0x2
004ccf0c : MOV EAX,dword ptr [EBP + -0x1c]
004ccf0f : LEA EDX,[EAX + EAX*0x4 + 0x5]
004ccf13 : LEA EDX,[ESI + EDX*0x4]
004ccf16 : MOV EAX,dword ptr [EBX + 0x8]
004ccf19 : PUSH EAX
004ccf1a : MOV ECX,dword ptr [EBP + 0xc]
004ccf1d : PUSH ECX
004ccf1e : CALL 0x004cd120
004ccf23 : MOV dword ptr [EBP + -0x4],0xffffffff
004ccf2a : MOV ECX,dword ptr [EBX + 0x4]
004ccf2d : MOV EDX,dword ptr [EBX + 0x8]
004ccf30 : SUB EDX,ECX
004ccf32 : MOV EAX,0x66666667
004ccf37 : IMUL EDX
004ccf39 : SAR EDX,0x3
004ccf3c : MOV EAX,EDX
004ccf3e : SHR EAX,0x1f
004ccf41 : LEA EDI,[EDX + EAX*0x1 + 0x1]
004ccf45 : TEST ECX,ECX
004ccf47 : JZ 0x004ccf4e
004ccf49 : CALL 0x006f04e0
004ccf4e : MOV EAX,dword ptr [EBP + 0x8]
004ccf51 : LEA ECX,[EAX + EAX*0x4]
004ccf54 : LEA EDX,[ESI + ECX*0x4]
004ccf57 : MOV dword ptr [EBX + 0xc],EDX
004ccf5a : LEA EAX,[EDI + EDI*0x4]
004ccf5d : LEA ECX,[ESI + EAX*0x4]
004ccf60 : MOV dword ptr [EBX + 0x8],ECX
004ccf63 : MOV dword ptr [EBX + 0x4],ESI
004ccf66 : MOV ECX,dword ptr [EBP + -0xc]
004ccf69 : MOV dword ptr FS:[0x0],ECX
004ccf70 : POP ECX
004ccf71 : POP EDI
004ccf72 : POP ESI
004ccf73 : POP EBX
004ccf74 : MOV ESP,EBP
004ccf76 : POP EBP
004ccf77 : RET 0x8
004ccf8b : MOV EDX,EDI
004ccf8d : MOV ECX,dword ptr [EBP + 0xc]
004ccf90 : SUB EDX,ECX
004ccf92 : MOV EAX,0x66666667
004ccf97 : IMUL EDX
004ccf99 : SAR EDX,0x3
004ccf9c : MOV EAX,EDX
004ccf9e : SHR EAX,0x1f
004ccfa1 : ADD EAX,EDX
004ccfa3 : MOVSS XMM0,dword ptr [ESI]
004ccfa7 : PUSH EDI
004ccfa8 : MOVSS dword ptr [EBP + -0x30],XMM0
004ccfad : MOVSS XMM0,dword ptr [ESI + 0x8]
004ccfb2 : MOVSS dword ptr [EBP + -0x28],XMM0
004ccfb7 : CMP EAX,0x1
004ccfba : JNC 0x004cd078
004ccfc0 : MOV EDX,dword ptr [ESI + 0x4]
004ccfc3 : MOV dword ptr [EBP + -0x2c],EDX
004ccfc6 : MOVSS XMM1,dword ptr [ESI + 0xc]
004ccfcb : MOVSS XMM2,dword ptr [ESI + 0x10]
004ccfd0 : MOVSS dword ptr [EBP + -0x24],XMM1
004ccfd5 : MOVSS dword ptr [EBP + -0x20],XMM2
004ccfda : LEA EDX,[ECX + 0x14]
004ccfdd : PUSH ECX
004ccfde : CALL 0x004cd120
004ccfe3 : MOV dword ptr [EBP + -0x4],0x2
004ccfea : MOV EDI,dword ptr [EBX + 0x8]
004ccfed : MOV ECX,EDI
004ccfef : SUB ECX,dword ptr [EBP + 0xc]
004ccff2 : MOV EAX,0x66666667
004ccff7 : IMUL ECX
004ccff9 : SAR EDX,0x3
004ccffc : MOV EAX,EDX
004ccffe : SHR EAX,0x1f
004cd001 : ADD EAX,EDX
004cd003 : MOV ESI,0x1
004cd008 : SUB ESI,EAX
004cd00a : LEA EDX,[EBP + -0x30]
004cd00d : CALL 0x004ccdd0
004cd012 : MOV dword ptr [EBP + -0x4],0xffffffff
004cd019 : ADD dword ptr [EBX + 0x8],0x14
004cd01d : MOV EBX,dword ptr [EBX + 0x8]
004cd020 : LEA ECX,[EBX + -0x14]
004cd023 : MOV EAX,dword ptr [EBP + 0xc]
004cd026 : CMP EAX,ECX
004cd028 : JZ 0x004cd109
004cd02e : MOV EDI,EDI
004cd030 : MOVSS XMM0,dword ptr [EBP + -0x30]
004cd035 : MOVSS dword ptr [EAX],XMM0
004cd039 : MOV EDX,dword ptr [EBP + -0x2c]
004cd03c : MOV dword ptr [EAX + 0x4],EDX
004cd03f : MOVSS XMM0,dword ptr [EBP + -0x28]
004cd044 : MOVSS dword ptr [EAX + 0x8],XMM0
004cd049 : MOVSS XMM0,dword ptr [EBP + -0x24]
004cd04e : MOVSS dword ptr [EAX + 0xc],XMM0
004cd053 : MOVSS XMM0,dword ptr [EBP + -0x20]
004cd058 : MOVSS dword ptr [EAX + 0x10],XMM0
004cd05d : ADD EAX,0x14
004cd060 : CMP EAX,ECX
004cd062 : JNZ 0x004cd030
004cd064 : MOV ECX,dword ptr [EBP + -0xc]
004cd067 : MOV dword ptr FS:[0x0],ECX
004cd06e : POP ECX
004cd06f : POP EDI
004cd070 : POP ESI
004cd071 : POP EBX
004cd072 : MOV ESP,EBP
004cd074 : POP EBP
004cd075 : RET 0x8
004cd078 : MOV EAX,dword ptr [ESI + 0x4]
004cd07b : MOV dword ptr [EBP + -0x2c],EAX
004cd07e : MOVSS XMM0,dword ptr [ESI + 0xc]
004cd083 : MOVSS dword ptr [EBP + -0x24],XMM0
004cd088 : MOVSS XMM0,dword ptr [ESI + 0x10]
004cd08d : MOVSS dword ptr [EBP + -0x20],XMM0
004cd092 : LEA ESI,[EDI + -0x14]
004cd095 : PUSH ESI
004cd096 : MOV EDX,EDI
004cd098 : CALL 0x004cd120
004cd09d : MOV dword ptr [EBX + 0x8],EAX
004cd0a0 : MOV byte ptr [EBP + 0x8],0x0
004cd0a4 : MOV ECX,dword ptr [EBP + 0x8]
004cd0a7 : PUSH ECX
004cd0a8 : MOV EDX,dword ptr [EBP + 0xc]
004cd0ab : PUSH EDX
004cd0ac : MOV EAX,dword ptr [EBP + 0xc]
004cd0af : PUSH EAX
004cd0b0 : MOV EAX,EDI
004cd0b2 : MOV ECX,ESI
004cd0b4 : MOV EDI,dword ptr [EBP + 0xc]
004cd0b7 : CALL 0x004cd210
004cd0bc : ADD ESP,0xc
004cd0bf : MOV EAX,dword ptr [EBP + 0xc]
004cd0c2 : LEA ECX,[EAX + 0x14]
004cd0c5 : CMP EAX,ECX
004cd0c7 : JZ 0x004cd109
004cd0c9 : ADD EAX,0x10
004cd0cc : MOVSS XMM3,dword ptr [EBP + -0x20]
004cd0d1 : MOVSS XMM2,dword ptr [EBP + -0x24]
004cd0d6 : MOVSS XMM1,dword ptr [EBP + -0x28]
004cd0db : MOVSS XMM0,dword ptr [EBP + -0x30]
004cd0e0 : MOVSS dword ptr [EAX + -0x10],XMM0
004cd0e5 : MOV EDX,dword ptr [EBP + -0x2c]
004cd0e8 : MOV dword ptr [EAX + -0xc],EDX
004cd0eb : MOVSS dword ptr [EAX + -0x8],XMM1
004cd0f0 : MOVSS dword ptr [EAX + -0x4],XMM2
004cd0f5 : MOVSS dword ptr [EAX],XMM3
004cd0f9 : ADD EAX,0x14
004cd0fc : LEA ECX,[EAX + -0x10]
004cd0ff : MOV EDX,dword ptr [EBP + 0xc]
004cd102 : ADD EDX,0x14
004cd105 : CMP ECX,EDX
004cd107 : JNZ 0x004cd0e0
004cd109 : MOV ECX,dword ptr [EBP + -0xc]
004cd10c : MOV dword ptr FS:[0x0],ECX
004cd113 : POP ECX
004cd114 : POP EDI
004cd115 : POP ESI
004cd116 : POP EBX
004cd117 : MOV ESP,EBP
004cd119 : POP EBP
004cd11a : RET 0x8
