PROGRAM  : Maestia.exe
FUNCTION : FUN_005e2300
ENTRY    : 005e2300
BODY     : [[005e2300, 005e245d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e2300(undefined4 param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  int iVar6;
  int *in_ECX;
  int iVar7;
  int iVar8;
  float10 fVar9;
  longlong local_c;
  int *local_4;
  
  if (param_2 == 0) {
    FUN_005de660();
    return;
  }
  local_4 = in_ECX;
  if (param_2 < 8) {
    iVar8 = 8;
  }
  else {
    fVar9 = (float10)FUN_0063b270();
    local_c = (longlong)ROUND((float)fVar9 / 0.6931472 + 1.0);
    iVar8 = 1 << ((byte)local_c & 0x1f);
  }
  local_c = CONCAT44(local_c._4_4_,2);
  puVar4 = (undefined4 *)FUN_00515d60(param_1,iVar8 * 0x10 + 8,&local_c);
  *puVar4 = 0;
  puVar4[1] = iVar8 + -1;
  if (iVar8 != 0) {
    iVar5 = 0;
    do {
      *(undefined4 *)(iVar5 + 8 + (int)puVar4) = 0xfffffffe;
      iVar5 = iVar5 + 0x10;
      iVar8 = iVar8 + -1;
    } while (iVar8 != 0);
  }
  iVar8 = 0;
  if (*in_ECX != 0) {
    iVar5 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar3 = (undefined4 *)(iVar8 + 8 + *in_ECX);
      if (*(int *)(iVar8 + 8 + *in_ECX) != -2) {
        puVar1 = puVar3 + 2;
        iVar6 = 4;
        iVar7 = 0x1505;
        do {
          iVar2 = iVar6 + -1;
          iVar6 = iVar6 + -1;
          iVar7 = iVar7 * 0x1003f + (uint)*(byte *)(iVar2 + (int)puVar1);
        } while (iVar6 != 0);
        FUN_005e3f90(param_1,puVar1,iVar7);
        *puVar3 = 0xfffffffe;
        in_ECX = local_4;
      }
      iVar8 = iVar8 + 0x10;
      iVar5 = iVar5 + -1;
    } while (iVar5 != 0);
    FUN_00515cf0(*in_ECX);
  }
  *in_ECX = (int)puVar4;
  return;
}



============================================================
DISASSEMBLY
============================================================
005e2300 : SUB ESP,0xc
005e2303 : MOV EAX,dword ptr [ESP + 0x14]
005e2307 : PUSH EBP
005e2308 : PUSH EDI
005e2309 : XOR EDI,EDI
005e230b : MOV EBP,ECX
005e230d : MOV dword ptr [ESP + 0x10],EBP
005e2311 : CMP EAX,EDI
005e2313 : JNZ 0x005e2322
005e2315 : CALL 0x005de660
005e231a : POP EDI
005e231b : POP EBP
005e231c : ADD ESP,0xc
005e231f : RET 0x8
005e2322 : PUSH ESI
005e2323 : CMP EAX,0x8
005e2326 : JNC 0x005e232f
005e2328 : MOV ESI,0x8
005e232d : JMP 0x005e2394
005e232f : DEC EAX
005e2330 : MOV dword ptr [ESP + 0x20],EAX
005e2334 : FILD dword ptr [ESP + 0x20]
005e2338 : TEST EAX,EAX
005e233a : JGE 0x005e2342
005e233c : FADD float ptr [0x00cdf0e0]
005e2342 : CALL 0x0063b270
005e2347 : FSTP float ptr [ESP + 0x20]
005e234b : FLD float ptr [ESP + 0x20]
005e234f : MOV ESI,0x1
005e2354 : FDIV double ptr [0x00b85fe0]
005e235a : FSTP float ptr [ESP + 0x20]
005e235e : FLD float ptr [ESP + 0x20]
005e2362 : FADD double ptr [0x00cdf108]
005e2368 : FSTP float ptr [ESP + 0x20]
005e236c : FLD float ptr [ESP + 0x20]
005e2370 : FNSTCW word ptr [ESP + 0x20]
005e2374 : MOVZX EAX,word ptr [ESP + 0x20]
005e2379 : OR EAX,0xc00
005e237e : MOV dword ptr [ESP + 0xc],EAX
005e2382 : FLDCW word ptr [ESP + 0xc]
005e2386 : FISTP qword ptr [ESP + 0xc]
005e238a : MOV CL,byte ptr [ESP + 0xc]
005e238e : SHL ESI,CL
005e2390 : FLDCW word ptr [ESP + 0x20]
005e2394 : MOV EDX,dword ptr [ESP + 0x1c]
005e2398 : MOV ECX,ESI
005e239a : LEA EAX,[ESP + 0xc]
005e239e : SHL ECX,0x4
005e23a1 : PUSH EAX
005e23a2 : ADD ECX,0x8
005e23a5 : PUSH ECX
005e23a6 : PUSH EDX
005e23a7 : MOV dword ptr [ESP + 0x2c],EDI
005e23ab : MOV dword ptr [ESP + 0x18],0x2
005e23b3 : CALL 0x00515d60
005e23b8 : MOV dword ptr [ESP + 0x20],EAX
005e23bc : MOV dword ptr [EAX],EDI
005e23be : MOV ECX,dword ptr [ESP + 0x20]
005e23c2 : LEA EAX,[ESI + -0x1]
005e23c5 : MOV dword ptr [ECX + 0x4],EAX
005e23c8 : CMP ESI,EDI
005e23ca : JBE 0x005e23e4
005e23cc : XOR EAX,EAX
005e23ce : MOV EDI,EDI
005e23d0 : MOV EDX,dword ptr [ESP + 0x20]
005e23d4 : MOV dword ptr [EAX + EDX*0x1 + 0x8],0xfffffffe
005e23dc : ADD EAX,0x10
005e23df : SUB ESI,0x1
005e23e2 : JNZ 0x005e23d0
005e23e4 : MOV EAX,dword ptr [EBP]
005e23e7 : CMP EAX,EDI
005e23e9 : JZ 0x005e244e
005e23eb : MOV EAX,dword ptr [EAX + 0x4]
005e23ee : PUSH EBX
005e23ef : LEA EBX,[EAX + 0x1]
005e23f2 : MOV EAX,dword ptr [EBP]
005e23f5 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
005e23fa : LEA ESI,[EDI + EAX*0x1 + 0x8]
005e23fe : JZ 0x005e243c
005e2400 : LEA EDX,[ESI + 0x8]
005e2403 : MOV EAX,0x4
005e2408 : MOV ECX,0x1505
005e240d : LEA ECX,[ECX]
005e2410 : MOVZX EBP,byte ptr [EAX + EDX*0x1 + -0x1]
005e2415 : IMUL ECX,ECX,0x1003f
005e241b : DEC EAX
005e241c : ADD ECX,EBP
005e241e : TEST EAX,EAX
005e2420 : JA 0x005e2410
005e2422 : PUSH ECX
005e2423 : MOV ECX,dword ptr [ESP + 0x24]
005e2427 : PUSH EDX
005e2428 : PUSH ECX
005e2429 : LEA ECX,[ESP + 0x30]
005e242d : CALL 0x005e3f90
005e2432 : MOV EBP,dword ptr [ESP + 0x18]
005e2436 : MOV dword ptr [ESI],0xfffffffe
005e243c : ADD EDI,0x10
005e243f : SUB EBX,0x1
005e2442 : JNZ 0x005e23f2
005e2444 : MOV EDX,dword ptr [EBP]
005e2447 : PUSH EDX
005e2448 : CALL 0x00515cf0
005e244d : POP EBX
005e244e : MOV EAX,dword ptr [ESP + 0x20]
005e2452 : POP ESI
005e2453 : POP EDI
005e2454 : MOV dword ptr [EBP],EAX
005e2457 : POP EBP
005e2458 : ADD ESP,0xc
005e245b : RET 0x8
