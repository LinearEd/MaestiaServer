PROGRAM  : Maestia.exe
FUNCTION : FUN_005efdd0
ENTRY    : 005efdd0
BODY     : [[005efdd0, 005efe8b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005efdd0(int param_1,undefined4 *param_2)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  int iVar4;
  GThread *extraout_ECX;
  GThread *extraout_ECX_00;
  GThread *this;
  
  iVar4 = *(int *)(param_1 + 0x314);
  if (iVar4 == 0) {
    iVar4 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar4 + 0x15) = 0;
  if (*(int *)(iVar4 + 0x30) - *(int *)(iVar4 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar3 = *(int *)(iVar4 + 0x2c);
  uVar1 = *(undefined1 *)(*(int *)(iVar4 + 0x3c) + 1 + iVar3);
  uVar2 = *(undefined1 *)(*(int *)(iVar4 + 0x3c) + iVar3);
  *(int *)(iVar4 + 0x2c) = iVar3 + 2;
  iVar4 = FUN_00515840(0x48,0);
  if (iVar4 == 0) {
    iVar4 = 0;
    this = extraout_ECX;
  }
  else {
    iVar4 = FUN_005efd50();
    this = extraout_ECX_00;
  }
  GThread::OnExit(this);
  FUN_005eeaa0(param_1,*param_2);
  if (*(int *)(param_1 + 0x2e8) == 0) {
    FUN_00566b90(CONCAT11(uVar1,uVar2),iVar4);
  }
  if (iVar4 != 0) {
    FUN_00524240();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005efdd0 : PUSH EBX
005efdd1 : PUSH ESI
005efdd2 : PUSH EDI
005efdd3 : MOV EDI,dword ptr [ESP + 0x10]
005efdd7 : MOV ESI,dword ptr [EDI + 0x314]
005efddd : TEST ESI,ESI
005efddf : JNZ 0x005efde4
005efde1 : LEA ESI,[EDI + 0x28]
005efde4 : MOV EAX,dword ptr [ESI + 0x30]
005efde7 : SUB EAX,dword ptr [ESI + 0x2c]
005efdea : MOV byte ptr [ESI + 0x15],0x0
005efdee : CMP EAX,0x2
005efdf1 : JGE 0x005efdfc
005efdf3 : PUSH 0x2
005efdf5 : MOV ECX,ESI
005efdf7 : CALL 0x00539fb0
005efdfc : MOV EAX,dword ptr [ESI + 0x2c]
005efdff : MOV ECX,dword ptr [ESI + 0x3c]
005efe02 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005efe08 : ADD ECX,EAX
005efe0a : MOVZX CX,byte ptr [ECX]
005efe0e : ADD EAX,0x2
005efe11 : MOV dword ptr [ESI + 0x2c],EAX
005efe14 : MOV EAX,dword ptr [EDI + 0x20]
005efe17 : MOV EAX,dword ptr [EAX + 0x1c]
005efe1a : SHL DX,0x8
005efe1e : OR DX,CX
005efe21 : PUSH 0x0
005efe23 : PUSH 0x48
005efe25 : MOV ECX,EAX
005efe27 : MOVZX EBX,DX
005efe2a : CALL 0x00515840
005efe2f : TEST EAX,EAX
005efe31 : JZ 0x005efe3e
005efe33 : MOV ECX,EAX
005efe35 : CALL 0x005efd50
005efe3a : MOV ESI,EAX
005efe3c : JMP 0x005efe40
005efe3e : XOR ESI,ESI
005efe40 : MOVZX EBX,BX
005efe43 : PUSH EBX
005efe44 : LEA EDX,[EDI + 0x14]
005efe47 : PUSH 0xb94a9c
005efe4c : PUSH EDX
005efe4d : CALL 0x0051d420
005efe52 : MOV EAX,dword ptr [ESP + 0x20]
005efe56 : MOV ECX,dword ptr [EAX]
005efe58 : ADD ESP,0xc
005efe5b : PUSH ECX
005efe5c : PUSH EDI
005efe5d : MOV ECX,ESI
005efe5f : CALL 0x005eeaa0
005efe64 : CMP dword ptr [EDI + 0x2e8],0x0
005efe6b : JNZ 0x005efe7b
005efe6d : PUSH ESI
005efe6e : PUSH ECX
005efe6f : MOV EAX,ESP
005efe71 : MOV dword ptr [EAX],EBX
005efe73 : MOV ECX,dword ptr [EDI + 0x20]
005efe76 : CALL 0x00566b90
005efe7b : TEST ESI,ESI
005efe7d : JZ 0x005efe86
005efe7f : MOV ECX,ESI
005efe81 : CALL 0x00524240
005efe86 : POP EDI
005efe87 : POP ESI
005efe88 : POP EBX
005efe89 : RET 0x8
