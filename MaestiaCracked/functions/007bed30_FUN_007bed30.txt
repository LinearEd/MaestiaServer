PROGRAM  : Maestia.exe
FUNCTION : FUN_007bed30
ENTRY    : 007bed30
BODY     : [[007bed30, 007bef3c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bed30(uint param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  char cVar3;
  int *piVar4;
  uint uVar5;
  int *piVar6;
  uint uVar7;
  int *piVar8;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  uVar5 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b28516;
  local_10 = ExceptionList;
  uVar7 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(param_1 + 4);
  local_18 = 0;
  local_20 = ".\\mss\\AvaMssMgr.cpp";
  local_1c = 200;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  if (*(int *)(param_1 + 0x20) == 0) {
    local_8 = 0xffffffff;
    if (local_18 != 0) {
      LeaveCriticalSection(local_24);
      ExceptionList = local_10;
      return;
    }
  }
  else {
    FUN_007bda30(uVar7);
    if ((*(int *)(param_1 + 0x54) - *(int *)(param_1 + 0x50) & 0xfffffffcU) != 0) {
      puVar1 = (undefined4 *)(param_1 + 0x54);
      puVar2 = (undefined4 *)(param_1 + 0x50);
      param_1 = param_1 & 0xffffff00;
      FUN_00464780(*puVar2,*puVar1,param_1);
    }
    if ((*(int *)(uVar5 + 0x44) - *(int *)(uVar5 + 0x40) & 0xfffffffcU) != 0) {
      param_1 = param_1 & 0xffffff00;
      FUN_00464780(*(undefined4 *)(uVar5 + 0x40),*(undefined4 *)(uVar5 + 0x44),param_1);
    }
    if ((*(int *)(uVar5 + 0x74) - *(int *)(uVar5 + 0x70) & 0xfffffffcU) != 0) {
      param_1 = param_1 & 0xffffff00;
      FUN_00464780(*(undefined4 *)(uVar5 + 0x70),*(undefined4 *)(uVar5 + 0x74),param_1);
    }
    if ((*(int *)(uVar5 + 100) - *(int *)(uVar5 + 0x60) & 0xfffffffcU) != 0) {
      param_1 = param_1 & 0xffffff00;
      FUN_00464780(*(undefined4 *)(uVar5 + 0x60),*(undefined4 *)(uVar5 + 100),param_1);
    }
    piVar4 = *(int **)(uVar5 + 0x88);
    piVar8 = (int *)*piVar4;
    while (piVar8 != piVar4) {
      FUN_00464380();
      FUN_00430160();
      piVar4 = *(int **)(uVar5 + 0x88);
    }
    piVar8 = (int *)**(int **)(uVar5 + 0x94);
    if (piVar8 != *(int **)(uVar5 + 0x94)) {
      do {
        FUN_00464380();
        if (*(char *)((int)piVar8 + 0x2d) == '\0') {
          piVar4 = (int *)piVar8[2];
          if (*(char *)((int)piVar4 + 0x2d) == '\0') {
            cVar3 = *(char *)(*piVar4 + 0x2d);
            piVar8 = piVar4;
            piVar4 = (int *)*piVar4;
            while (cVar3 == '\0') {
              cVar3 = *(char *)(*piVar4 + 0x2d);
              piVar8 = piVar4;
              piVar4 = (int *)*piVar4;
            }
          }
          else {
            cVar3 = *(char *)(piVar8[1] + 0x2d);
            piVar6 = (int *)piVar8[1];
            piVar4 = piVar8;
            while ((piVar8 = piVar6, cVar3 == '\0' && (piVar4 == (int *)piVar8[2]))) {
              cVar3 = *(char *)(piVar8[1] + 0x2d);
              piVar6 = (int *)piVar8[1];
              piVar4 = piVar8;
            }
          }
        }
      } while (piVar8 != *(int **)(uVar5 + 0x94));
    }
    if (*(int *)(uVar5 + 0x7c) != 0) {
      FUN_00464380();
    }
    if (*(int *)(uVar5 + 0x80) != 0) {
      FUN_00464380();
    }
    (*(code *)PTR_FUN_00d6d23c)("[SOUND ] File Cache is deleted\n");
    local_8 = 0xffffffff;
    if (local_18 != 0) {
      LeaveCriticalSection(local_24);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bed30 : PUSH EBP
007bed31 : MOV EBP,ESP
007bed33 : PUSH -0x1
007bed35 : PUSH 0xb28516
007bed3a : MOV EAX,FS:[0x0]
007bed40 : PUSH EAX
007bed41 : SUB ESP,0x18
007bed44 : PUSH EBX
007bed45 : PUSH ESI
007bed46 : PUSH EDI
007bed47 : MOV EAX,[0x00d66fa0]
007bed4c : XOR EAX,EBP
007bed4e : PUSH EAX
007bed4f : LEA EAX,[EBP + -0xc]
007bed52 : MOV FS:[0x0],EAX
007bed58 : MOV EBX,dword ptr [EBP + 0x8]
007bed5b : LEA ECX,[EBP + -0x20]
007bed5e : LEA EAX,[EBX + 0x4]
007bed61 : XOR ESI,ESI
007bed63 : PUSH ECX
007bed64 : MOV dword ptr [EBP + -0x14],ESI
007bed67 : MOV dword ptr [EBP + -0x20],EAX
007bed6a : MOV dword ptr [EBP + -0x1c],0xc18c80
007bed71 : MOV dword ptr [EBP + -0x18],0xc8
007bed78 : MOV dword ptr [EBP + -0x10],0x1
007bed7f : CALL 0x006ef1a0
007bed84 : MOV dword ptr [EBP + -0x4],ESI
007bed87 : CMP dword ptr [EBX + 0x20],ESI
007bed8a : JNZ 0x007bedbd
007bed8c : MOV dword ptr [EBP + -0x4],0xffffffff
007bed93 : CMP dword ptr [EBP + -0x14],ESI
007bed96 : JZ 0x007bef29
007bed9c : MOV EDX,dword ptr [EBP + -0x20]
007bed9f : PUSH EDX
007beda0 : CALL dword ptr [0x00b8511c]
007beda6 : MOV dword ptr [EBP + -0x14],ESI
007beda9 : MOV ECX,dword ptr [EBP + -0xc]
007bedac : MOV dword ptr FS:[0x0],ECX
007bedb3 : POP ECX
007bedb4 : POP EDI
007bedb5 : POP ESI
007bedb6 : POP EBX
007bedb7 : MOV ESP,EBP
007bedb9 : POP EBP
007bedba : RET 0x4
007bedbd : MOV EDI,EBX
007bedbf : CALL 0x007bda30
007bedc4 : MOV EAX,dword ptr [EBX + 0x54]
007bedc7 : SUB EAX,dword ptr [EBX + 0x50]
007bedca : TEST EAX,0xfffffffc
007bedcf : JZ 0x007bede9
007bedd1 : MOV EAX,dword ptr [EBX + 0x54]
007bedd4 : MOV ECX,dword ptr [EBX + 0x50]
007bedd7 : MOV byte ptr [EBP + 0x8],0x0
007beddb : MOV EDX,dword ptr [EBP + 0x8]
007bedde : PUSH EDX
007beddf : PUSH EAX
007bede0 : PUSH ECX
007bede1 : CALL 0x00464780
007bede6 : ADD ESP,0xc
007bede9 : MOV EAX,dword ptr [EBX + 0x44]
007bedec : SUB EAX,dword ptr [EBX + 0x40]
007bedef : TEST EAX,0xfffffffc
007bedf4 : JZ 0x007bee0e
007bedf6 : MOV EAX,dword ptr [EBX + 0x44]
007bedf9 : MOV ECX,dword ptr [EBX + 0x40]
007bedfc : MOV byte ptr [EBP + 0x8],0x0
007bee00 : MOV EDX,dword ptr [EBP + 0x8]
007bee03 : PUSH EDX
007bee04 : PUSH EAX
007bee05 : PUSH ECX
007bee06 : CALL 0x00464780
007bee0b : ADD ESP,0xc
007bee0e : MOV EAX,dword ptr [EBX + 0x74]
007bee11 : SUB EAX,dword ptr [EBX + 0x70]
007bee14 : TEST EAX,0xfffffffc
007bee19 : JZ 0x007bee33
007bee1b : MOV EAX,dword ptr [EBX + 0x74]
007bee1e : MOV ECX,dword ptr [EBX + 0x70]
007bee21 : MOV byte ptr [EBP + 0x8],0x0
007bee25 : MOV EDX,dword ptr [EBP + 0x8]
007bee28 : PUSH EDX
007bee29 : PUSH EAX
007bee2a : PUSH ECX
007bee2b : CALL 0x00464780
007bee30 : ADD ESP,0xc
007bee33 : MOV EAX,dword ptr [EBX + 0x64]
007bee36 : SUB EAX,dword ptr [EBX + 0x60]
007bee39 : TEST EAX,0xfffffffc
007bee3e : JZ 0x007bee58
007bee40 : MOV EAX,dword ptr [EBX + 0x64]
007bee43 : MOV ECX,dword ptr [EBX + 0x60]
007bee46 : MOV byte ptr [EBP + 0x8],0x0
007bee4a : MOV EDX,dword ptr [EBP + 0x8]
007bee4d : PUSH EDX
007bee4e : PUSH EAX
007bee4f : PUSH ECX
007bee50 : CALL 0x00464780
007bee55 : ADD ESP,0xc
007bee58 : MOV ECX,dword ptr [EBX + 0x88]
007bee5e : MOV EAX,dword ptr [ECX]
007bee60 : MOV dword ptr [EBP + 0x8],EAX
007bee63 : CMP EAX,ECX
007bee65 : JZ 0x007bee84
007bee67 : MOV ESI,dword ptr [EAX + 0x28]
007bee6a : CALL 0x00464380
007bee6f : LEA EDX,[EBP + 0x8]
007bee72 : CALL 0x00430160
007bee77 : MOV ECX,dword ptr [EBX + 0x88]
007bee7d : MOV EAX,dword ptr [EBP + 0x8]
007bee80 : CMP EAX,ECX
007bee82 : JNZ 0x007bee67
007bee84 : MOV EAX,dword ptr [EBX + 0x94]
007bee8a : MOV EDI,dword ptr [EAX]
007bee8c : CMP EDI,EAX
007bee8e : JZ 0x007beee0
007bee90 : MOV ESI,dword ptr [EDI + 0x28]
007bee93 : CALL 0x00464380
007bee98 : CMP byte ptr [EDI + 0x2d],0x0
007bee9c : JNZ 0x007beed8
007bee9e : MOV EAX,dword ptr [EDI + 0x8]
007beea1 : CMP byte ptr [EAX + 0x2d],0x0
007beea5 : JNZ 0x007beebd
007beea7 : MOV EDI,EAX
007beea9 : MOV EAX,dword ptr [EDI]
007beeab : CMP byte ptr [EAX + 0x2d],0x0
007beeaf : JNZ 0x007beed8
007beeb1 : MOV EDI,EAX
007beeb3 : MOV EAX,dword ptr [EDI]
007beeb5 : CMP byte ptr [EAX + 0x2d],0x0
007beeb9 : JZ 0x007beeb1
007beebb : JMP 0x007beed8
007beebd : MOV EAX,dword ptr [EDI + 0x4]
007beec0 : CMP byte ptr [EAX + 0x2d],0x0
007beec4 : JNZ 0x007beed6
007beec6 : CMP EDI,dword ptr [EAX + 0x8]
007beec9 : JNZ 0x007beed6
007beecb : MOV EDI,EAX
007beecd : MOV EAX,dword ptr [EAX + 0x4]
007beed0 : CMP byte ptr [EAX + 0x2d],0x0
007beed4 : JZ 0x007beec6
007beed6 : MOV EDI,EAX
007beed8 : CMP EDI,dword ptr [EBX + 0x94]
007beede : JNZ 0x007bee90
007beee0 : MOV ESI,dword ptr [EBX + 0x7c]
007beee3 : TEST ESI,ESI
007beee5 : JZ 0x007beeec
007beee7 : CALL 0x00464380
007beeec : MOV EBX,dword ptr [EBX + 0x80]
007beef2 : TEST EBX,EBX
007beef4 : JZ 0x007beefd
007beef6 : MOV ESI,EBX
007beef8 : CALL 0x00464380
007beefd : PUSH 0xc18c94
007bef02 : CALL dword ptr [0x00d6d23c]
007bef08 : ADD ESP,0x4
007bef0b : MOV dword ptr [EBP + -0x4],0xffffffff
007bef12 : CMP dword ptr [EBP + -0x14],0x0
007bef16 : JZ 0x007bef29
007bef18 : MOV EAX,dword ptr [EBP + -0x20]
007bef1b : PUSH EAX
007bef1c : CALL dword ptr [0x00b8511c]
007bef22 : MOV dword ptr [EBP + -0x14],0x0
007bef29 : MOV ECX,dword ptr [EBP + -0xc]
007bef2c : MOV dword ptr FS:[0x0],ECX
007bef33 : POP ECX
007bef34 : POP EDI
007bef35 : POP ESI
007bef36 : POP EBX
007bef37 : MOV ESP,EBP
007bef39 : POP EBP
007bef3a : RET 0x4
