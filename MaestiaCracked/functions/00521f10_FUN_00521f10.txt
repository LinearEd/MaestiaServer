PROGRAM  : Maestia.exe
FUNCTION : FUN_00521f10
ENTRY    : 00521f10
BODY     : [[00521f10, 00521f2c] [00521f30, 00521f97]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00521f10(void)

{
  undefined4 *puVar1;
  int *in_ECX;
  int iVar2;
  int iVar3;
  int local_8;
  
  if (*in_ECX != 0) {
    iVar3 = 0;
    local_8 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar1 = (undefined4 *)(*in_ECX + 8 + iVar3);
      if (*(int *)(*in_ECX + 8 + iVar3) != -2) {
        for (iVar2 = puVar1[7]; iVar2 != 0; iVar2 = iVar2 + -1) {
          FUN_00526bc0();
        }
        FUN_00515cf0(puVar1[6]);
        *puVar1 = 0xfffffffe;
      }
      iVar3 = iVar3 + 0x24;
      local_8 = local_8 + -1;
    } while (local_8 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00521f10 : SUB ESP,0x8
00521f13 : MOV EAX,dword ptr [ECX]
00521f15 : MOV dword ptr [ESP + 0x4],ECX
00521f19 : TEST EAX,EAX
00521f1b : JZ 0x00521f94
00521f1d : MOV EAX,dword ptr [EAX + 0x4]
00521f20 : PUSH EBX
00521f21 : PUSH EBP
00521f22 : XOR EBP,EBP
00521f24 : PUSH ESI
00521f25 : INC EAX
00521f26 : PUSH EDI
00521f27 : MOV dword ptr [ESP + 0x10],EAX
00521f2b : JMP 0x00521f30
00521f30 : MOV EAX,dword ptr [ECX]
00521f32 : CMP dword ptr [EAX + EBP*0x1 + 0x8],-0x2
00521f37 : LEA EDI,[EAX + EBP*0x1 + 0x8]
00521f3b : JZ 0x00521f74
00521f3d : MOV EAX,dword ptr [EDI + 0x1c]
00521f40 : MOV EDX,dword ptr [EDI + 0x18]
00521f43 : MOV ECX,EAX
00521f45 : SHL ECX,0x4
00521f48 : LEA ESI,[ECX + EDX*0x1 + -0x10]
00521f4c : TEST EAX,EAX
00521f4e : JBE 0x00521f61
00521f50 : MOV EBX,EAX
00521f52 : MOV ECX,ESI
00521f54 : CALL 0x00526bc0
00521f59 : SUB ESI,0x10
00521f5c : SUB EBX,0x1
00521f5f : JNZ 0x00521f52
00521f61 : MOV EAX,dword ptr [EDI + 0x18]
00521f64 : PUSH EAX
00521f65 : CALL 0x00515cf0
00521f6a : MOV ECX,dword ptr [ESP + 0x14]
00521f6e : MOV dword ptr [EDI],0xfffffffe
00521f74 : ADD EBP,0x24
00521f77 : SUB dword ptr [ESP + 0x10],0x1
00521f7c : JNZ 0x00521f30
00521f7e : MOV ECX,dword ptr [ECX]
00521f80 : PUSH ECX
00521f81 : CALL 0x00515cf0
00521f86 : MOV EDX,dword ptr [ESP + 0x14]
00521f8a : POP EDI
00521f8b : POP ESI
00521f8c : POP EBP
00521f8d : MOV dword ptr [EDX],0x0
00521f93 : POP EBX
00521f94 : ADD ESP,0x8
00521f97 : RET
