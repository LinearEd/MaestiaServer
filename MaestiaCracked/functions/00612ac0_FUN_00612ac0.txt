PROGRAM  : Maestia.exe
FUNCTION : FUN_00612ac0
ENTRY    : 00612ac0
BODY     : [[00612ac0, 00612aec] [00612af0, 00612bb9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00612ac0(int param_1,code *param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  int iVar5;
  
  iVar3 = *(int *)(*(int *)(param_1 + 0x2c0) + 0x90);
  *(undefined4 *)(iVar3 + 0x28) = 0;
  iVar5 = *(int *)(*(int *)(param_1 + 0x104) + 0x124);
  while (iVar5 != 0) {
    puVar4 = *(undefined4 **)(*(int *)(param_1 + 0x104) + 0x124);
    *(undefined4 *)(*(int *)(param_1 + 0x104) + 0x124) = *puVar4;
    *(undefined4 **)(*(int *)(iVar3 + 0x2c) + *(int *)(iVar3 + 0x28) * 4) = puVar4;
    *(int *)(iVar3 + 0x28) = *(int *)(iVar3 + 0x28) + 1;
    if (*(int *)(iVar3 + 0x28) == 0x2000) {
      if (param_2 != (code *)0x0) {
        (*param_2)(param_1);
      }
      if (*(code **)(param_1 + 0x298) != (code *)0x0) {
        (**(code **)(param_1 + 0x298))(param_1);
      }
      iVar5 = 0;
      if (0 < *(int *)(iVar3 + 0x28)) {
        do {
          iVar2 = iVar5 * 4;
          iVar5 = iVar5 + 1;
          *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x2c) + iVar2) + 0x7c) = 0;
        } while (iVar5 < *(int *)(iVar3 + 0x28));
      }
      *(undefined4 *)(iVar3 + 0x28) = 0;
    }
    FUN_00622460(puVar4);
    piVar1 = (int *)(*(int *)(param_1 + 0x104) + 0x120);
    *piVar1 = *piVar1 + -1;
    iVar5 = *(int *)(*(int *)(param_1 + 0x104) + 0x124);
  }
  if (*(int *)(iVar3 + 0x28) != 0) {
    if (param_2 != (code *)0x0) {
      (*param_2)(param_1);
    }
    if (*(code **)(param_1 + 0x298) != (code *)0x0) {
      (**(code **)(param_1 + 0x298))(param_1);
    }
  }
  iVar5 = 0;
  if (0 < *(int *)(iVar3 + 0x28)) {
    do {
      iVar2 = iVar5 * 4;
      iVar5 = iVar5 + 1;
      *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x2c) + iVar2) + 0x7c) = 0;
    } while (iVar5 < *(int *)(iVar3 + 0x28));
  }
  *(undefined4 *)(iVar3 + 0x28) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00612ac0 : PUSH EBP
00612ac1 : PUSH ESI
00612ac2 : PUSH EDI
00612ac3 : MOV EDI,dword ptr [ESP + 0x10]
00612ac7 : MOV EAX,dword ptr [EDI + 0x2c0]
00612acd : MOV ESI,dword ptr [EAX + 0x90]
00612ad3 : XOR EBP,EBP
00612ad5 : MOV dword ptr [ESI + 0x28],EBP
00612ad8 : MOV ECX,dword ptr [EDI + 0x104]
00612ade : CMP dword ptr [ECX + 0x124],EBP
00612ae4 : JZ 0x00612b7a
00612aea : PUSH EBX
00612aeb : JMP 0x00612af0
00612af0 : MOV EAX,dword ptr [EDI + 0x104]
00612af6 : MOV EBX,dword ptr [EAX + 0x124]
00612afc : MOV EDX,dword ptr [EBX]
00612afe : MOV dword ptr [EAX + 0x124],EDX
00612b04 : MOV EAX,dword ptr [ESI + 0x28]
00612b07 : MOV ECX,dword ptr [ESI + 0x2c]
00612b0a : MOV dword ptr [ECX + EAX*0x4],EBX
00612b0d : INC dword ptr [ESI + 0x28]
00612b10 : CMP dword ptr [ESI + 0x28],0x2000
00612b17 : JNZ 0x00612b52
00612b19 : MOV EAX,dword ptr [ESP + 0x18]
00612b1d : CMP EAX,EBP
00612b1f : JZ 0x00612b27
00612b21 : PUSH EDI
00612b22 : CALL EAX
00612b24 : ADD ESP,0x4
00612b27 : MOV EAX,dword ptr [EDI + 0x298]
00612b2d : CMP EAX,EBP
00612b2f : JZ 0x00612b37
00612b31 : PUSH EDI
00612b32 : CALL EAX
00612b34 : ADD ESP,0x4
00612b37 : XOR EAX,EAX
00612b39 : CMP dword ptr [ESI + 0x28],EBP
00612b3c : JLE 0x00612b4f
00612b3e : MOV EDI,EDI
00612b40 : MOV EDX,dword ptr [ESI + 0x2c]
00612b43 : MOV ECX,dword ptr [EDX + EAX*0x4]
00612b46 : INC EAX
00612b47 : MOV dword ptr [ECX + 0x7c],EBP
00612b4a : CMP EAX,dword ptr [ESI + 0x28]
00612b4d : JL 0x00612b40
00612b4f : MOV dword ptr [ESI + 0x28],EBP
00612b52 : PUSH EBX
00612b53 : CALL 0x00622460
00612b58 : MOV EAX,dword ptr [EDI + 0x104]
00612b5e : DEC dword ptr [EAX + 0x120]
00612b64 : MOV EDX,dword ptr [EDI + 0x104]
00612b6a : ADD ESP,0x4
00612b6d : CMP dword ptr [EDX + 0x124],EBP
00612b73 : JNZ 0x00612af0
00612b79 : POP EBX
00612b7a : CMP dword ptr [ESI + 0x28],EBP
00612b7d : JZ 0x00612b9d
00612b7f : MOV EAX,dword ptr [ESP + 0x14]
00612b83 : CMP EAX,EBP
00612b85 : JZ 0x00612b8d
00612b87 : PUSH EDI
00612b88 : CALL EAX
00612b8a : ADD ESP,0x4
00612b8d : MOV EAX,dword ptr [EDI + 0x298]
00612b93 : CMP EAX,EBP
00612b95 : JZ 0x00612b9d
00612b97 : PUSH EDI
00612b98 : CALL EAX
00612b9a : ADD ESP,0x4
00612b9d : XOR EAX,EAX
00612b9f : CMP dword ptr [ESI + 0x28],EBP
00612ba2 : JLE 0x00612bb3
00612ba4 : MOV ECX,dword ptr [ESI + 0x2c]
00612ba7 : MOV EDX,dword ptr [ECX + EAX*0x4]
00612baa : INC EAX
00612bab : MOV dword ptr [EDX + 0x7c],EBP
00612bae : CMP EAX,dword ptr [ESI + 0x28]
00612bb1 : JL 0x00612ba4
00612bb3 : POP EDI
00612bb4 : MOV dword ptr [ESI + 0x28],EBP
00612bb7 : POP ESI
00612bb8 : POP EBP
00612bb9 : RET
