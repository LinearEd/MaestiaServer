PROGRAM  : Maestia.exe
FUNCTION : FUN_00480480
ENTRY    : 00480480
BODY     : [[00480480, 0048060c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00480480(int *param_1)

{
  int *piVar1;
  int iVar2;
  int in_EAX;
  undefined4 uVar3;
  
  piVar1 = *(int **)(in_EAX + 0xf0);
  if (piVar1 != (int *)0x0) {
    FUN_00481620();
  }
  if (((*(char *)((int)param_1 + 0xb) == -1) && (*(int *)(in_EAX + 0x210) < 2)) && (*param_1 != 3))
  {
    uVar3 = 0;
  }
  else {
    uVar3 = 1;
  }
  (**(code **)(*piVar1 + 0xe4))(piVar1,0x1b,uVar3);
  iVar2 = *param_1;
  if (iVar2 == 1) {
    FUN_00480060(0);
    FUN_00481a30(param_1[2]);
    return;
  }
  if (iVar2 != 2) {
    if (iVar2 == 3) {
      if (param_1[0xc] == 0) {
        (**(code **)(*piVar1 + 0xe4))();
      }
      else {
        (**(code **)(*piVar1 + 0xe4))(piVar1,0x1b,1);
        FUN_00480280(in_EAX,0,4);
        if ((param_1[1] != 2) && (param_1[1] != 1)) {
          FUN_00480280(in_EAX,1,6);
        }
      }
      FUN_00480060(0);
      FUN_00480370();
    }
    return;
  }
  FUN_00481a30(param_1[2]);
  if (param_1[0xc] != 0) {
    (**(code **)(*piVar1 + 0xe4))(piVar1,0x1b,1);
    FUN_00480060(0);
    FUN_00480370();
    FUN_00480280(in_EAX,0,4);
    return;
  }
  FUN_00480060(0);
  return;
}



============================================================
DISASSEMBLY
============================================================
00480480 : PUSH EBP
00480481 : MOV EBP,ESP
00480483 : PUSH EBX
00480484 : MOV EBX,dword ptr [EBP + 0x8]
00480487 : PUSH ESI
00480488 : PUSH EDI
00480489 : MOV EDI,EAX
0048048b : MOV ESI,dword ptr [EDI + 0xf0]
00480491 : TEST ESI,ESI
00480493 : JZ 0x004804a2
00480495 : MOV EAX,dword ptr [EDI + 0x210]
0048049b : MOV ECX,EDI
0048049d : CALL 0x00481620
004804a2 : CMP byte ptr [EBX + 0xb],0xff
004804a6 : JNZ 0x004804ba
004804a8 : CMP dword ptr [EDI + 0x210],0x1
004804af : JG 0x004804ba
004804b1 : CMP dword ptr [EBX],0x3
004804b4 : JZ 0x004804ba
004804b6 : XOR EAX,EAX
004804b8 : JMP 0x004804bf
004804ba : MOV EAX,0x1
004804bf : MOV ECX,dword ptr [ESI]
004804c1 : MOV EDX,dword ptr [ECX + 0xe4]
004804c7 : PUSH EAX
004804c8 : PUSH 0x1b
004804ca : PUSH ESI
004804cb : CALL EDX
004804cd : MOV EAX,dword ptr [EBX]
004804cf : CMP EAX,0x1
004804d2 : JNZ 0x004804f1
004804d4 : PUSH 0x0
004804d6 : CALL 0x00480060
004804db : PUSH ECX
004804dc : MOV ECX,dword ptr [EBX + 0x8]
004804df : MOV EAX,ESP
004804e1 : MOV dword ptr [EAX],ECX
004804e3 : MOV ECX,EDI
004804e5 : CALL 0x00481a30
004804ea : POP EDI
004804eb : POP ESI
004804ec : POP EBX
004804ed : POP EBP
004804ee : RET 0x4
004804f1 : CMP EAX,0x2
004804f4 : JNZ 0x0048056f
004804f6 : MOV EDX,dword ptr [EBX + 0x8]
004804f9 : PUSH ECX
004804fa : MOV EAX,ESP
004804fc : MOV ECX,EDI
004804fe : MOV dword ptr [EAX],EDX
00480500 : CALL 0x00481a30
00480505 : CMP dword ptr [EBX + 0x30],0x0
00480509 : LEA EAX,[EBX + 0x30]
0048050c : MOV dword ptr [EBP + 0x8],EAX
0048050f : JNZ 0x00480521
00480511 : PUSH 0x0
00480513 : XOR EAX,EAX
00480515 : CALL 0x00480060
0048051a : POP EDI
0048051b : POP ESI
0048051c : POP EBX
0048051d : POP EBP
0048051e : RET 0x4
00480521 : MOV EAX,dword ptr [ESI]
00480523 : MOV ECX,dword ptr [EAX + 0xe4]
00480529 : PUSH 0x1
0048052b : PUSH 0x1b
0048052d : PUSH ESI
0048052e : CALL ECX
00480530 : MOV EAX,dword ptr [EDI + 0x210]
00480536 : CMP EAX,0x3
00480539 : JZ 0x00480545
0048053b : CMP EAX,0x6
0048053e : MOV EAX,0x2
00480543 : JNZ 0x0048054a
00480545 : MOV EAX,0x3
0048054a : PUSH 0x0
0048054c : CALL 0x00480060
00480551 : LEA EAX,[EBX + 0xc]
00480554 : MOV ECX,EDI
00480556 : CALL 0x00480370
0048055b : MOV ESI,dword ptr [EBP + 0x8]
0048055e : PUSH 0x4
00480560 : PUSH 0x0
00480562 : PUSH EDI
00480563 : CALL 0x00480280
00480568 : POP EDI
00480569 : POP ESI
0048056a : POP EBX
0048056b : POP EBP
0048056c : RET 0x4
0048056f : CMP EAX,0x3
00480572 : JNZ 0x00480606
00480578 : CMP dword ptr [EBX + 0x30],0x0
0048057c : PUSH 0x1
0048057e : PUSH 0x1b
00480580 : PUSH ESI
00480581 : JNZ 0x0048059e
00480583 : MOV EDX,dword ptr [ESI]
00480585 : MOV EAX,dword ptr [EDX + 0xe4]
0048058b : CALL EAX
0048058d : XOR EAX,EAX
0048058f : CMP dword ptr [EDI + 0x1ac],0x3
00480596 : SETZ AL
00480599 : ADD EAX,0xb
0048059c : JMP 0x004805e2
0048059e : MOV ECX,dword ptr [ESI]
004805a0 : MOV EDX,dword ptr [ECX + 0xe4]
004805a6 : CALL EDX
004805a8 : PUSH 0x4
004805aa : PUSH 0x0
004805ac : PUSH EDI
004805ad : LEA ESI,[EBX + 0x30]
004805b0 : CALL 0x00480280
004805b5 : MOV EAX,dword ptr [EBX + 0x4]
004805b8 : CMP EAX,0x2
004805bb : JZ 0x004805d8
004805bd : CMP EAX,0x1
004805c0 : JZ 0x004805d8
004805c2 : PUSH 0x6
004805c4 : PUSH 0x1
004805c6 : LEA ESI,[EBX + 0x54]
004805c9 : PUSH EDI
004805ca : MOV dword ptr [EBP + 0x8],0xe
004805d1 : CALL 0x00480280
004805d6 : JMP 0x004805df
004805d8 : MOV dword ptr [EBP + 0x8],0xd
004805df : MOV EAX,dword ptr [EBP + 0x8]
004805e2 : MOV ECX,dword ptr [EDI + 0x210]
004805e8 : CMP ECX,0x3
004805eb : JZ 0x004805f2
004805ed : CMP ECX,0x6
004805f0 : JNZ 0x004805f5
004805f2 : ADD EAX,0x4
004805f5 : PUSH 0x0
004805f7 : CALL 0x00480060
004805fc : LEA EAX,[EBX + 0xc]
004805ff : MOV ECX,EDI
00480601 : CALL 0x00480370
00480606 : POP EDI
00480607 : POP ESI
00480608 : POP EBX
00480609 : POP EBP
0048060a : RET 0x4
