PROGRAM  : Maestia.exe
FUNCTION : FUN_0047fc60
ENTRY    : 0047fc60
BODY     : [[0047fc60, 0047fdbd] [0047fdc0, 0047fef4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0047fc60(int param_1)

{
  int *piVar1;
  char cVar2;
  uint uVar3;
  int iVar4;
  int in_ECX;
  uint uVar5;
  undefined **ppuVar6;
  int *piVar7;
  LPCRITICAL_SECTION local_338;
  char *local_334;
  undefined4 local_330;
  int local_32c;
  undefined4 local_328;
  uint local_324;
  uint local_320;
  int local_31c;
  char local_315;
  char local_314 [768];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b70feb;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_338 = (LPCRITICAL_SECTION)(DAT_017251ac + 0x424);
  uVar5 = 1;
  local_315 = '\x01';
  local_32c = 0;
  local_334 = ".\\Scaleform\\GRendererD3DxImpl.cpp";
  local_330 = 0x789;
  local_328 = 1;
  local_31c = in_ECX;
  local_14 = uVar3;
  FUN_006ef1a0(&local_338);
  local_8 = 0;
  local_320 = (uint)((*(byte *)(param_1 + 0xec) & 2) == 0);
  piVar7 = (int *)(in_ECX + 0x30);
  ppuVar6 = &PTR_DAT_00d6d1bc + local_320 * 4;
  do {
    if ((*piVar7 == 0) &&
       (iVar4 = (**(code **)(**(int **)(local_31c + 0xf0) + 0x158))
                          (*(int **)(local_31c + 0xf0),*ppuVar6,piVar7,uVar3), iVar4 != 0)) {
      local_315 = '\0';
      break;
    }
    uVar5 = uVar5 + 1;
    ppuVar6 = ppuVar6 + 1;
    piVar7 = piVar7 + 1;
  } while (uVar5 < 5);
  uVar3 = 1;
  do {
    cVar2 = FUN_0047f9e0(local_31c);
    if (cVar2 == '\0') {
      local_315 = '\0';
      break;
    }
    uVar3 = uVar3 + 1;
  } while (uVar3 < 6);
  if (*(char *)(local_31c + 0x10) != '\0') {
    local_320 = 1;
    ppuVar6 = &PTR_s_ps_1_1_mov_r0__c0_00d72828;
    piVar7 = (int *)(local_31c + 0x5c);
    local_324 = 0xc;
    do {
      if ((*(char *)(local_31c + 0x11) == '\0') && (local_320 - 7 < 4)) {
        piVar1 = (int *)*piVar7;
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 8))(piVar1);
        }
        *piVar7 = 0;
      }
      else if (*ppuVar6 != (undefined *)0x0) {
        cVar2 = FUN_0047fb00(local_31c);
        if (cVar2 == '\0') goto LAB_0047fe77;
        _strcpy_s(local_314,0x300,*ppuVar6);
        _strcat_s(local_314,0x300,"mul  r0.rgb, r0, r0.a\n");
        cVar2 = FUN_0047fb00(local_31c);
        if (cVar2 == '\0') goto LAB_0047fe77;
      }
      local_320 = local_320 + 1;
      local_324 = local_324 + 0xc;
      piVar7 = piVar7 + 1;
      ppuVar6 = ppuVar6 + 3;
    } while (local_324 < 0xe4);
  }
  if (local_315 == '\0') {
LAB_0047fe77:
    FUN_0047ff00(local_31c);
    local_8 = 0xffffffff;
    if (local_32c != 0) {
      LeaveCriticalSection(local_338);
      local_32c = 0;
    }
  }
  else {
    local_8 = 0xffffffff;
    if (local_32c != 0) {
      LeaveCriticalSection(local_338);
      local_32c = 0;
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0047fc60 : PUSH EBP
0047fc61 : MOV EBP,ESP
0047fc63 : PUSH -0x1
0047fc65 : PUSH 0xb70feb
0047fc6a : MOV EAX,FS:[0x0]
0047fc70 : PUSH EAX
0047fc71 : SUB ESP,0x328
0047fc77 : MOV EAX,[0x00d66fa0]
0047fc7c : XOR EAX,EBP
0047fc7e : MOV dword ptr [EBP + -0x10],EAX
0047fc81 : PUSH EBX
0047fc82 : PUSH ESI
0047fc83 : PUSH EDI
0047fc84 : PUSH EAX
0047fc85 : LEA EAX,[EBP + -0xc]
0047fc88 : MOV FS:[0x0],EAX
0047fc8e : MOV EAX,[0x017251ac]
0047fc93 : MOV EDI,ECX
0047fc95 : LEA ECX,[EBP + 0xfffffccc]
0047fc9b : ADD EAX,0x424
0047fca0 : XOR ESI,ESI
0047fca2 : MOV EBX,0x1
0047fca7 : PUSH ECX
0047fca8 : MOV dword ptr [EBP + 0xfffffce8],EDI
0047fcae : MOV byte ptr [EBP + 0xfffffcef],0x1
0047fcb5 : MOV dword ptr [EBP + 0xfffffcd8],ESI
0047fcbb : MOV dword ptr [EBP + 0xfffffccc],EAX
0047fcc1 : MOV dword ptr [EBP + 0xfffffcd0],0xcd758c
0047fccb : MOV dword ptr [EBP + 0xfffffcd4],0x789
0047fcd5 : MOV dword ptr [EBP + 0xfffffcdc],EBX
0047fcdb : CALL 0x006ef1a0
0047fce0 : MOV dword ptr [EBP + -0x4],ESI
0047fce3 : MOV EDX,dword ptr [EBP + 0x8]
0047fce6 : TEST byte ptr [EDX + 0xec],0x2
0047fced : MOV dword ptr [EBP + 0xfffffce4],ESI
0047fcf3 : JNZ 0x0047fcfb
0047fcf5 : MOV dword ptr [EBP + 0xfffffce4],EBX
0047fcfb : MOV ESI,dword ptr [EBP + 0xfffffce4]
0047fd01 : SHL ESI,0x4
0047fd04 : ADD EDI,0x30
0047fd07 : ADD ESI,0xd6d1bc
0047fd0d : LEA ECX,[ECX]
0047fd10 : CMP dword ptr [EDI],0x0
0047fd13 : MOV ECX,dword ptr [ESI]
0047fd15 : JNZ 0x0047fd34
0047fd17 : MOV EAX,dword ptr [EBP + 0xfffffce8]
0047fd1d : MOV EAX,dword ptr [EAX + 0xf0]
0047fd23 : MOV EDX,dword ptr [EAX]
0047fd25 : PUSH EDI
0047fd26 : PUSH ECX
0047fd27 : PUSH EAX
0047fd28 : MOV EAX,dword ptr [EDX + 0x158]
0047fd2e : CALL EAX
0047fd30 : TEST EAX,EAX
0047fd32 : JNZ 0x0047fd42
0047fd34 : INC EBX
0047fd35 : ADD ESI,0x4
0047fd38 : ADD EDI,0x4
0047fd3b : CMP EBX,0x5
0047fd3e : JC 0x0047fd10
0047fd40 : JMP 0x0047fd49
0047fd42 : MOV byte ptr [EBP + 0xfffffcef],0x0
0047fd49 : MOV EAX,dword ptr [EBP + 0xfffffce4]
0047fd4f : MOV EDI,dword ptr [EBP + 0xfffffce8]
0047fd55 : LEA EBX,[EAX + EAX*0x4]
0047fd58 : MOV ESI,0x1
0047fd5d : ADD EDI,0x44
0047fd60 : LEA EBX,[EBX*0x4 + 0xd72800]
0047fd67 : MOV ECX,dword ptr [EBP + 0xfffffce8]
0047fd6d : PUSH ECX
0047fd6e : MOV ECX,dword ptr [EBX]
0047fd70 : CALL 0x0047f9e0
0047fd75 : TEST AL,AL
0047fd77 : JZ 0x0047fd87
0047fd79 : INC ESI
0047fd7a : ADD EBX,0x4
0047fd7d : ADD EDI,0x4
0047fd80 : CMP ESI,0x6
0047fd83 : JC 0x0047fd67
0047fd85 : JMP 0x0047fd8e
0047fd87 : MOV byte ptr [EBP + 0xfffffcef],0x0
0047fd8e : MOV EDX,dword ptr [EBP + 0xfffffce8]
0047fd94 : CMP byte ptr [EDX + 0x10],0x0
0047fd98 : JZ 0x0047fe6e
0047fd9e : MOV EAX,EDX
0047fda0 : MOV dword ptr [EBP + 0xfffffce4],0x1
0047fdaa : MOV EBX,0xd72828
0047fdaf : LEA ESI,[EAX + 0x5c]
0047fdb2 : MOV dword ptr [EBP + 0xfffffce0],0xc
0047fdbc : JMP 0x0047fdc6
0047fdc0 : MOV EAX,dword ptr [EBP + 0xfffffce8]
0047fdc6 : CMP byte ptr [EAX + 0x11],0x0
0047fdca : JNZ 0x0047fdf0
0047fdcc : MOV ECX,dword ptr [EBP + 0xfffffce4]
0047fdd2 : ADD ECX,-0x7
0047fdd5 : CMP ECX,0x3
0047fdd8 : JA 0x0047fdf0
0047fdda : MOV EAX,dword ptr [ESI]
0047fddc : TEST EAX,EAX
0047fdde : JZ 0x0047fde8
0047fde0 : MOV EDX,dword ptr [EAX]
0047fde2 : PUSH EAX
0047fde3 : MOV EAX,dword ptr [EDX + 0x8]
0047fde6 : CALL EAX
0047fde8 : MOV dword ptr [ESI],0x0
0047fdee : JMP 0x0047fe48
0047fdf0 : MOV ECX,dword ptr [EBX]
0047fdf2 : TEST ECX,ECX
0047fdf4 : JZ 0x0047fe48
0047fdf6 : PUSH EAX
0047fdf7 : MOV EDI,ESI
0047fdf9 : CALL 0x0047fb00
0047fdfe : TEST AL,AL
0047fe00 : JZ 0x0047fe77
0047fe02 : MOV EAX,dword ptr [EBX]
0047fe04 : PUSH EAX
0047fe05 : LEA ECX,[EBP + 0xfffffcf0]
0047fe0b : PUSH 0x300
0047fe10 : PUSH ECX
0047fe11 : CALL 0x00638300
0047fe16 : PUSH 0xcd75b0
0047fe1b : LEA EDX,[EBP + 0xfffffcf0]
0047fe21 : PUSH 0x300
0047fe26 : PUSH EDX
0047fe27 : CALL 0x0063db33
0047fe2c : MOV EAX,dword ptr [EBP + 0xfffffce8]
0047fe32 : ADD ESP,0x18
0047fe35 : LEA EDI,[ESI + 0x4c]
0047fe38 : PUSH EAX
0047fe39 : LEA ECX,[EBP + 0xfffffcf0]
0047fe3f : CALL 0x0047fb00
0047fe44 : TEST AL,AL
0047fe46 : JZ 0x0047fe77
0047fe48 : MOV EAX,dword ptr [EBP + 0xfffffce0]
0047fe4e : INC dword ptr [EBP + 0xfffffce4]
0047fe54 : ADD EAX,0xc
0047fe57 : ADD ESI,0x4
0047fe5a : ADD EBX,0xc
0047fe5d : MOV dword ptr [EBP + 0xfffffce0],EAX
0047fe63 : CMP EAX,0xe4
0047fe68 : JC 0x0047fdc0
0047fe6e : CMP byte ptr [EBP + 0xfffffcef],0x0
0047fe75 : JNZ 0x0047feae
0047fe77 : MOV ECX,dword ptr [EBP + 0xfffffce8]
0047fe7d : PUSH ECX
0047fe7e : CALL 0x0047ff00
0047fe83 : MOV dword ptr [EBP + -0x4],0xffffffff
0047fe8a : CMP dword ptr [EBP + 0xfffffcd8],0x0
0047fe91 : JZ 0x0047feaa
0047fe93 : MOV EDX,dword ptr [EBP + 0xfffffccc]
0047fe99 : PUSH EDX
0047fe9a : CALL dword ptr [0x00b8511c]
0047fea0 : MOV dword ptr [EBP + 0xfffffcd8],0x0
0047feaa : XOR AL,AL
0047feac : JMP 0x0047fed7
0047feae : MOV dword ptr [EBP + -0x4],0xffffffff
0047feb5 : CMP dword ptr [EBP + 0xfffffcd8],0x0
0047febc : JZ 0x0047fed5
0047febe : MOV EAX,dword ptr [EBP + 0xfffffccc]
0047fec4 : PUSH EAX
0047fec5 : CALL dword ptr [0x00b8511c]
0047fecb : MOV dword ptr [EBP + 0xfffffcd8],0x0
0047fed5 : MOV AL,0x1
0047fed7 : MOV ECX,dword ptr [EBP + -0xc]
0047feda : MOV dword ptr FS:[0x0],ECX
0047fee1 : POP ECX
0047fee2 : POP EDI
0047fee3 : POP ESI
0047fee4 : POP EBX
0047fee5 : MOV ECX,dword ptr [EBP + -0x10]
0047fee8 : XOR ECX,EBP
0047feea : CALL 0x00633e6b
0047feef : MOV ESP,EBP
0047fef1 : POP EBP
0047fef2 : RET 0x4
