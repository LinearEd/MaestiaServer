PROGRAM  : Maestia.exe
FUNCTION : FUN_007a3a00
ENTRY    : 007a3a00
BODY     : [[007a3a00, 007a3b44]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007a3a00(void)

{
  int iVar1;
  float fVar2;
  float fVar3;
  DWORD DVar4;
  int *unaff_ESI;
  int local_14;
  float local_c;
  
  if (*(char *)((int)unaff_ESI + 0x1125) != '\0') {
    *(undefined1 *)((int)unaff_ESI + 0x1125) = 0;
  }
  if ((unaff_ESI[0x445] != 0) && (unaff_ESI[0x443] != 0)) {
    iVar1 = unaff_ESI[0x444];
    DVar4 = GetTickCount();
    unaff_ESI[0x444] = DVar4;
    unaff_ESI[0x446] = unaff_ESI[0x446] + (DVar4 - iVar1);
    local_c = (float)unaff_ESI[0x446];
    if (unaff_ESI[0x446] < 0) {
      local_c = local_c + 4.2949673e+09;
    }
    fVar2 = (float)unaff_ESI[0x445];
    if (unaff_ESI[0x445] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    local_c = local_c / fVar2;
    if (1.0 <= local_c) {
      local_c = 1.0;
    }
    fVar2 = (float)unaff_ESI[0x447];
    if (unaff_ESI[0x447] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar3 = (float)unaff_ESI[0x448];
    if (unaff_ESI[0x448] < 0) {
      fVar3 = fVar3 + 4.2949673e+09;
    }
    local_14 = (int)(longlong)ROUND(fVar2 + (fVar3 - fVar2) * local_c);
    unaff_ESI[0x447] = local_14;
    if (local_c == 1.0) {
      unaff_ESI[0x445] = 0;
      unaff_ESI[0x446] = 0;
      if (unaff_ESI[0x443] == 1) {
        unaff_ESI[0x447] = 0xff;
      }
      else if (unaff_ESI[0x443] == 2) {
        (**(code **)(*unaff_ESI + 0x18))();
        unaff_ESI[0x443] = 0;
        *(undefined1 *)((int)unaff_ESI + 0x1125) = 1;
        return;
      }
      unaff_ESI[0x443] = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007a3a00 : PUSH EBP
007a3a01 : MOV EBP,ESP
007a3a03 : SUB ESP,0x10
007a3a06 : PUSH EBX
007a3a07 : XOR EBX,EBX
007a3a09 : CMP byte ptr [ESI + 0x1125],BL
007a3a0f : JZ 0x007a3a17
007a3a11 : MOV byte ptr [ESI + 0x1125],BL
007a3a17 : CMP dword ptr [ESI + 0x1114],EBX
007a3a1d : JZ 0x007a3b40
007a3a23 : CMP dword ptr [ESI + 0x110c],EBX
007a3a29 : JZ 0x007a3b40
007a3a2f : PUSH EDI
007a3a30 : MOV EDI,dword ptr [ESI + 0x1110]
007a3a36 : CALL dword ptr [0x00b850d8]
007a3a3c : MOV dword ptr [ESI + 0x1110],EAX
007a3a42 : SUB EAX,EDI
007a3a44 : ADD dword ptr [ESI + 0x1118],EAX
007a3a4a : FILD dword ptr [ESI + 0x1118]
007a3a50 : MOV EAX,dword ptr [ESI + 0x1118]
007a3a56 : TEST EAX,EAX
007a3a58 : JGE 0x007a3a60
007a3a5a : FADD float ptr [0x00cdf0e0]
007a3a60 : MOV ECX,dword ptr [ESI + 0x1114]
007a3a66 : FILD dword ptr [ESI + 0x1114]
007a3a6c : TEST ECX,ECX
007a3a6e : JGE 0x007a3a76
007a3a70 : FADD float ptr [0x00cdf0e0]
007a3a76 : FDIVP
007a3a78 : MOVSS XMM0,dword ptr [0x00c10fc4]
007a3a80 : POP EDI
007a3a81 : FST float ptr [EBP + -0x8]
007a3a84 : FLD1
007a3a86 : FXCH
007a3a88 : FCOMI ST0,ST1
007a3a8a : FSTP ST1
007a3a8c : JC 0x007a3a98
007a3a8e : MOVSS dword ptr [EBP + -0x8],XMM0
007a3a93 : FSTP ST0
007a3a95 : FLD float ptr [EBP + -0x8]
007a3a98 : MOV EDX,dword ptr [ESI + 0x111c]
007a3a9e : FILD dword ptr [ESI + 0x111c]
007a3aa4 : TEST EDX,EDX
007a3aa6 : JGE 0x007a3aae
007a3aa8 : FADD float ptr [0x00cdf0e0]
007a3aae : MOV EAX,dword ptr [ESI + 0x1120]
007a3ab4 : FILD dword ptr [ESI + 0x1120]
007a3aba : TEST EAX,EAX
007a3abc : JGE 0x007a3ac4
007a3abe : FADD float ptr [0x00cdf0e0]
007a3ac4 : MOVSS XMM1,dword ptr [EBP + -0x8]
007a3ac9 : FSUB ST0,ST1
007a3acb : FNSTCW word ptr [EBP + -0x2]
007a3ace : MOVZX EAX,word ptr [EBP + -0x2]
007a3ad2 : FMULP ST2
007a3ad4 : OR EAX,0xc00
007a3ad9 : MOV dword ptr [EBP + -0xc],EAX
007a3adc : UCOMISS XMM1,XMM0
007a3adf : FADDP
007a3ae1 : LAHF
007a3ae2 : FLDCW word ptr [EBP + -0xc]
007a3ae5 : FISTP qword ptr [EBP + -0x10]
007a3ae8 : MOV ECX,dword ptr [EBP + -0x10]
007a3aeb : MOV dword ptr [ESI + 0x111c],ECX
007a3af1 : FLDCW word ptr [EBP + -0x2]
007a3af4 : TEST AH,0x44
007a3af7 : JP 0x007a3b40
007a3af9 : MOV EAX,dword ptr [ESI + 0x110c]
007a3aff : SUB EAX,0x1
007a3b02 : MOV dword ptr [ESI + 0x1114],EBX
007a3b08 : MOV dword ptr [ESI + 0x1118],EBX
007a3b0e : JZ 0x007a3b30
007a3b10 : SUB EAX,0x1
007a3b13 : JNZ 0x007a3b3a
007a3b15 : MOV EDX,dword ptr [ESI]
007a3b17 : MOV EAX,dword ptr [EDX + 0x18]
007a3b1a : MOV ECX,ESI
007a3b1c : CALL EAX
007a3b1e : MOV dword ptr [ESI + 0x110c],EBX
007a3b24 : MOV byte ptr [ESI + 0x1125],0x1
007a3b2b : POP EBX
007a3b2c : MOV ESP,EBP
007a3b2e : POP EBP
007a3b2f : RET
007a3b30 : MOV dword ptr [ESI + 0x111c],0xff
007a3b3a : MOV dword ptr [ESI + 0x110c],EBX
007a3b40 : POP EBX
007a3b41 : MOV ESP,EBP
007a3b43 : POP EBP
007a3b44 : RET
