PROGRAM  : Maestia.exe
FUNCTION : FUN_006baac0
ENTRY    : 006baac0
BODY     : [[006baac0, 006bac37]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006baac0(int param_1,uint param_2,int *param_3)

{
  undefined4 uVar1;
  uint *puVar2;
  byte bVar3;
  uint uVar4;
  int *piVar5;
  int local_4;
  
  uVar1 = *(undefined4 *)(param_1 + 100);
  local_4 = 0;
  *(undefined1 *)(param_1 + 0x2c8) = 0;
  if ((*(int *)(param_1 + 0x2cc) != 0) || (local_4 = FUN_006b8890(param_1,0), local_4 == 0)) {
    puVar2 = *(uint **)(param_1 + 0x2cc);
    if (param_2 != *(uint *)puVar2[2]) {
      return 6;
    }
    uVar4 = 0;
    if (param_2 != 0) {
      do {
        if ((param_3[uVar4] < -0x10000) || (0x10000 < param_3[uVar4])) {
          return 6;
        }
        uVar4 = uVar4 + 1;
      } while (uVar4 < param_2);
    }
    if ((puVar2[9] != 0) || (local_4 = FUN_006b8550(), local_4 == 0)) {
      if (puVar2[1] == 0) {
        uVar4 = FUN_0068a220(uVar1,4,0,param_2,0,&local_4);
        puVar2[1] = uVar4;
        if (local_4 != 0) {
          return local_4;
        }
        bVar3 = 1;
      }
      else {
        uVar4 = 0;
        if (param_2 != 0) {
          piVar5 = param_3;
          do {
            if (*(int *)((puVar2[1] - (int)param_3) + (int)piVar5) != *piVar5) break;
            uVar4 = uVar4 + 1;
            piVar5 = piVar5 + 1;
          } while (uVar4 < param_2);
        }
        bVar3 = -(uVar4 != param_2) & 2;
      }
      *puVar2 = param_2;
      _memcpy((void *)puVar2[1],param_3,param_2 * 4);
      *(undefined1 *)(param_1 + 0x2c8) = 1;
      if (*(int *)(param_1 + 0x2a0) != 0) {
        if (bVar3 == 1) {
          FUN_006b8c90(param_1);
        }
        else if (bVar3 == 2) {
          FUN_00687f30(uVar1,*(int *)(param_1 + 0x2a0));
          *(undefined4 *)(param_1 + 0x2a0) = 0;
          FUN_006b96a0(*(undefined4 *)(param_1 + 0x68));
          return local_4;
        }
      }
    }
  }
  return local_4;
}



============================================================
DISASSEMBLY
============================================================
006baac0 : PUSH ECX
006baac1 : PUSH ESI
006baac2 : MOV ESI,dword ptr [ESP + 0xc]
006baac6 : CMP dword ptr [ESI + 0x2cc],0x0
006baacd : MOV EAX,dword ptr [ESI + 0x64]
006baad0 : MOV dword ptr [ESP + 0x4],0x0
006baad8 : MOV dword ptr [ESP + 0xc],EAX
006baadc : MOV byte ptr [ESI + 0x2c8],0x0
006baae3 : JNZ 0x006baafc
006baae5 : PUSH 0x0
006baae7 : PUSH ESI
006baae8 : CALL 0x006b8890
006baaed : ADD ESP,0x8
006baaf0 : MOV dword ptr [ESP + 0x4],EAX
006baaf4 : TEST EAX,EAX
006baaf6 : JNZ 0x006bac35
006baafc : PUSH EBX
006baafd : MOV EBX,dword ptr [ESI + 0x2cc]
006bab03 : MOV ECX,dword ptr [EBX + 0x8]
006bab06 : PUSH EDI
006bab07 : MOV EDI,dword ptr [ESP + 0x18]
006bab0b : CMP EDI,dword ptr [ECX]
006bab0d : JZ 0x006bab19
006bab0f : POP EDI
006bab10 : POP EBX
006bab11 : MOV EAX,0x6
006bab16 : POP ESI
006bab17 : POP ECX
006bab18 : RET
006bab19 : XOR EAX,EAX
006bab1b : PUSH EBP
006bab1c : TEST EDI,EDI
006bab1e : JBE 0x006bab4a
006bab20 : MOV EBP,dword ptr [ESP + 0x20]
006bab24 : MOV ECX,dword ptr [EBP + EAX*0x4]
006bab28 : CMP ECX,0xffff0000
006bab2e : JL 0x006bab3f
006bab30 : CMP ECX,0x10000
006bab36 : JG 0x006bab3f
006bab38 : INC EAX
006bab39 : CMP EAX,EDI
006bab3b : JC 0x006bab20
006bab3d : JMP 0x006bab4e
006bab3f : POP EBP
006bab40 : POP EDI
006bab41 : POP EBX
006bab42 : MOV EAX,0x6
006bab47 : POP ESI
006bab48 : POP ECX
006bab49 : RET
006bab4a : MOV EBP,dword ptr [ESP + 0x20]
006bab4e : CMP dword ptr [EBX + 0x24],0x0
006bab52 : JNZ 0x006bab67
006bab54 : MOV EAX,ESI
006bab56 : CALL 0x006b8550
006bab5b : MOV dword ptr [ESP + 0x10],EAX
006bab5f : TEST EAX,EAX
006bab61 : JNZ 0x006bac32
006bab67 : MOV EDX,dword ptr [EBX + 0x4]
006bab6a : TEST EDX,EDX
006bab6c : JNZ 0x006bab9b
006bab6e : MOV EAX,dword ptr [ESP + 0x18]
006bab72 : LEA EDX,[ESP + 0x10]
006bab76 : PUSH EDX
006bab77 : PUSH 0x0
006bab79 : PUSH EDI
006bab7a : PUSH 0x0
006bab7c : PUSH 0x4
006bab7e : PUSH EAX
006bab7f : CALL 0x0068a220
006bab84 : MOV dword ptr [EBX + 0x4],EAX
006bab87 : MOV EAX,dword ptr [ESP + 0x28]
006bab8b : ADD ESP,0x18
006bab8e : TEST EAX,EAX
006bab90 : JNZ 0x006bac32
006bab96 : LEA EBP,[EAX + 0x1]
006bab99 : JMP 0x006babbf
006bab9b : XOR EAX,EAX
006bab9d : TEST EDI,EDI
006bab9f : JBE 0x006babb4
006baba1 : MOV ECX,EBP
006baba3 : SUB EDX,EBP
006baba5 : MOV EBP,dword ptr [EDX + ECX*0x1]
006baba8 : CMP EBP,dword ptr [ECX]
006babaa : JNZ 0x006babb4
006babac : INC EAX
006babad : ADD ECX,0x4
006babb0 : CMP EAX,EDI
006babb2 : JC 0x006baba5
006babb4 : SUB EAX,EDI
006babb6 : NEG EAX
006babb8 : SBB EAX,EAX
006babba : AND EAX,0x2
006babbd : MOV EBP,EAX
006babbf : MOV EDX,dword ptr [ESP + 0x20]
006babc3 : MOV EAX,dword ptr [EBX + 0x4]
006babc6 : LEA ECX,[EDI*0x4 + 0x0]
006babcd : PUSH ECX
006babce : PUSH EDX
006babcf : PUSH EAX
006babd0 : MOV dword ptr [EBX],EDI
006babd2 : CALL 0x0063ae40
006babd7 : MOV EAX,dword ptr [ESI + 0x2a0]
006babdd : ADD ESP,0xc
006babe0 : MOV byte ptr [ESI + 0x2c8],0x1
006babe7 : TEST EAX,EAX
006babe9 : JZ 0x006bac2e
006babeb : MOV ECX,EBP
006babed : SUB ECX,0x1
006babf0 : JZ 0x006bac22
006babf2 : SUB ECX,0x1
006babf5 : JNZ 0x006bac2e
006babf7 : MOV ECX,dword ptr [ESP + 0x18]
006babfb : PUSH EAX
006babfc : PUSH ECX
006babfd : CALL 0x00687f30
006bac02 : MOV EDX,dword ptr [ESI + 0x68]
006bac05 : PUSH EDX
006bac06 : MOV dword ptr [ESI + 0x2a0],0x0
006bac10 : CALL 0x006b96a0
006bac15 : MOV EAX,dword ptr [ESP + 0x1c]
006bac19 : ADD ESP,0xc
006bac1c : POP EBP
006bac1d : POP EDI
006bac1e : POP EBX
006bac1f : POP ESI
006bac20 : POP ECX
006bac21 : RET
006bac22 : MOV EAX,dword ptr [ESI + 0x68]
006bac25 : PUSH ESI
006bac26 : CALL 0x006b8c90
006bac2b : ADD ESP,0x4
006bac2e : MOV EAX,dword ptr [ESP + 0x10]
006bac32 : POP EBP
006bac33 : POP EDI
006bac34 : POP EBX
006bac35 : POP ESI
006bac36 : POP ECX
006bac37 : RET
