PROGRAM  : Maestia.exe
FUNCTION : FUN_007492e0
ENTRY    : 007492e0
BODY     : [[007492e0, 00749483] [00749490, 0074963c] [00749640, 007497a7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007492e0(int *param_1,int *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  ushort uVar7;
  int *piVar8;
  int iVar9;
  int iVar10;
  float *pfVar11;
  int in_ECX;
  uint uStack_64;
  uint uStack_60;
  float afStack_48 [2];
  LPCRITICAL_SECTION p_Stack_40;
  char *pcStack_3c;
  undefined4 uStack_38;
  int iStack_34;
  undefined4 uStack_30;
  LPCRITICAL_SECTION p_Stack_2c;
  char *pcStack_28;
  undefined4 uStack_24;
  int iStack_20;
  undefined4 uStack_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  piVar8 = param_1;
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b27351;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (*(char *)(DAT_017251ac + 4) != '\0') {
    iVar10 = (**(code **)(*param_1 + 4))(DAT_00d66fa0 ^ (uint)&stack0xffffff90);
    if (iVar10 == 1) {
      uVar7 = *(ushort *)(piVar8 + 0x79);
      if (uVar7 != 0) {
        piVar8 = (int *)piVar8[9];
        if (*(char *)((int)piVar8 + 0x5d) != '\0') {
          (**(code **)(*piVar8 + 0x14))();
        }
        fVar1 = (float)piVar8[0x2e];
        fVar2 = (float)piVar8[0x2f];
        fVar3 = (float)piVar8[0x30];
        pfVar11 = (float *)(**(code **)(*param_2 + 0x14))();
        fVar4 = *pfVar11;
        fVar5 = pfVar11[1];
        afStack_48[0] = pfVar11[2];
        if (uVar7 != 0) {
          uStack_60 = (uint)uVar7;
          uStack_64 = 0;
          do {
            iVar10 = *(int *)(uStack_64 + param_1[0x76]);
            if ((*(char *)(in_ECX + 0x20) == '\0') ||
               ((*(char *)((int)param_1 + 0x226) == '\0' &&
                (*(char *)(*(int *)(iVar10 + 8) + 0x1c) == '\0')))) {
              iStack_20 = 0;
              pcStack_28 = ".\\World\\AvaRenderQueue.cpp";
              uStack_24 = 0x6bf;
              uStack_1c = 1;
              p_Stack_2c = (LPCRITICAL_SECTION)(in_ECX + 0x7c);
              FUN_006ef1a0(&p_Stack_2c);
              uStack_c = 1;
              (**(code **)(*(int *)(in_ECX + 0x98) + 0x20))(iVar10);
              uStack_c = 0xffffffff;
              if (iStack_20 != 0) {
                LeaveCriticalSection(p_Stack_2c);
                iStack_20 = 0;
              }
            }
            else {
              iStack_34 = 0;
              *(float *)(iVar10 + 0xc) =
                   (fVar1 - fVar4) * (fVar1 - fVar4) + (fVar2 - fVar5) * (fVar2 - fVar5) +
                   (fVar3 - afStack_48[0]) * (fVar3 - afStack_48[0]);
              pcStack_3c = ".\\World\\AvaRenderQueue.cpp";
              uStack_38 = 0x6b9;
              uStack_30 = 1;
              p_Stack_40 = (LPCRITICAL_SECTION)(in_ECX + 0x7c);
              FUN_006ef1a0(&p_Stack_40);
              uStack_c = 0;
              (**(code **)(*(int *)(in_ECX + 0xc0) + 0x20))(iVar10);
              uStack_c = 0xffffffff;
              if (iStack_34 != 0) {
                LeaveCriticalSection(p_Stack_40);
                iStack_34 = 0;
              }
            }
            uStack_64 = uStack_64 + 4;
            uStack_60 = uStack_60 - 1;
          } while (uStack_60 != 0);
        }
      }
    }
    else if (iVar10 == 0xf) {
      p_Stack_40 = (LPCRITICAL_SECTION)(in_ECX + 0x60);
      iStack_34 = 0;
      pcStack_3c = ".\\World\\AvaRenderQueue.cpp";
      uStack_38 = 0x6e3;
      uStack_30 = 1;
      FUN_006ef1a0(&p_Stack_40);
      uStack_c = 3;
      FUN_00449730();
      uStack_c = 0xffffffff;
      if (iStack_34 != 0) {
        LeaveCriticalSection(p_Stack_40);
        ExceptionList = local_14;
        return;
      }
    }
    else if (iVar10 == 0x11) {
      uVar7 = *(ushort *)(piVar8 + 0x79);
      if (uVar7 != 0) {
        piVar8 = (int *)piVar8[9];
        if (*(char *)((int)piVar8 + 0x5d) != '\0') {
          (**(code **)(*piVar8 + 0x14))();
        }
        fVar1 = (float)piVar8[0x2e];
        fVar2 = (float)piVar8[0x2f];
        fVar3 = (float)piVar8[0x30];
        pfVar11 = (float *)(**(code **)(*param_2 + 0x14))();
        fVar4 = *pfVar11;
        fVar5 = pfVar11[1];
        fVar6 = pfVar11[2];
        if (uVar7 != 0) {
          uStack_64 = (uint)uVar7;
          iVar10 = 0;
          do {
            iVar9 = *(int *)(iVar10 + param_1[0x76]);
            *(float *)(iVar9 + 0xc) =
                 (fVar1 - fVar4) * (fVar1 - fVar4) + (fVar2 - fVar5) * (fVar2 - fVar5) +
                 (fVar3 - fVar6) * (fVar3 - fVar6);
            iStack_34 = 0;
            pcStack_3c = ".\\World\\AvaRenderQueue.cpp";
            uStack_38 = 0x6db;
            uStack_30 = 1;
            p_Stack_40 = (LPCRITICAL_SECTION)(in_ECX + 0x7c);
            FUN_006ef1a0(&p_Stack_40);
            uStack_c = 2;
            (**(code **)(*(int *)(in_ECX + 0xe8) + 0x20))(iVar9);
            uStack_c = 0xffffffff;
            if (iStack_34 != 0) {
              LeaveCriticalSection(p_Stack_40);
            }
            iVar10 = iVar10 + 4;
            uStack_64 = uStack_64 - 1;
          } while (uStack_64 != 0);
          ExceptionList = local_14;
          return;
        }
      }
    }
    else {
      p_Stack_40 = (LPCRITICAL_SECTION)(in_ECX + 0x7c);
      iStack_34 = 0;
      pcStack_3c = ".\\World\\AvaRenderQueue.cpp";
      uStack_38 = 0x6ea;
      uStack_30 = 1;
      FUN_006ef1a0(&p_Stack_40);
      uStack_c = 4;
      FUN_0045fe50(afStack_48,&param_1);
      uStack_c = 0xffffffff;
      if (iStack_34 != 0) {
        LeaveCriticalSection(p_Stack_40);
        ExceptionList = local_14;
        return;
      }
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
007492e0 : PUSH EBP
007492e1 : MOV EBP,ESP
007492e3 : AND ESP,0xfffffff8
007492e6 : PUSH -0x1
007492e8 : PUSH 0xb27351
007492ed : MOV EAX,FS:[0x0]
007492f3 : PUSH EAX
007492f4 : SUB ESP,0x50
007492f7 : PUSH EBX
007492f8 : PUSH ESI
007492f9 : PUSH EDI
007492fa : MOV EAX,[0x00d66fa0]
007492ff : XOR EAX,ESP
00749301 : PUSH EAX
00749302 : LEA EAX,[ESP + 0x60]
00749306 : MOV FS:[0x0],EAX
0074930c : MOV EDI,ECX
0074930e : MOV EAX,[0x017251ac]
00749313 : MOV AL,byte ptr [EAX + 0x4]
00749316 : TEST AL,AL
00749318 : JZ 0x00749793
0074931e : MOV EBX,dword ptr [EBP + 0x8]
00749321 : MOV EDX,dword ptr [EBX]
00749323 : MOV EAX,dword ptr [EDX + 0x4]
00749326 : MOV ECX,EBX
00749328 : CALL EAX
0074932a : MOV ECX,0x1
0074932f : SUB EAX,ECX
00749331 : JZ 0x007495a4
00749337 : SUB EAX,0xe
0074933a : JZ 0x00749530
00749340 : SUB EAX,0x2
00749343 : JZ 0x007493bf
00749345 : LEA EAX,[ESP + 0x34]
00749349 : LEA EDX,[EDI + 0x7c]
0074934c : XOR ESI,ESI
0074934e : PUSH EAX
0074934f : MOV dword ptr [ESP + 0x44],ESI
00749353 : MOV dword ptr [ESP + 0x38],EDX
00749357 : MOV dword ptr [ESP + 0x3c],0xc08b0c
0074935f : MOV dword ptr [ESP + 0x40],0x6ea
00749367 : MOV dword ptr [ESP + 0x48],ECX
0074936b : CALL 0x006ef1a0
00749370 : MOV dword ptr [ESP + 0x68],0x4
00749378 : LEA ECX,[EBP + 0x8]
0074937b : PUSH ECX
0074937c : LEA EDX,[ESP + 0x30]
00749380 : PUSH EDX
00749381 : LEA EAX,[EDI + 0x40]
00749384 : CALL 0x0045fe50
00749389 : MOV dword ptr [ESP + 0x68],0xffffffff
00749391 : CMP dword ptr [ESP + 0x40],ESI
00749395 : JZ 0x00749793
0074939b : MOV EAX,dword ptr [ESP + 0x34]
0074939f : PUSH EAX
007493a0 : CALL dword ptr [0x00b8511c]
007493a6 : MOV dword ptr [ESP + 0x40],ESI
007493aa : MOV ECX,dword ptr [ESP + 0x60]
007493ae : MOV dword ptr FS:[0x0],ECX
007493b5 : POP ECX
007493b6 : POP EDI
007493b7 : POP ESI
007493b8 : POP EBX
007493b9 : MOV ESP,EBP
007493bb : POP EBP
007493bc : RET 0xc
007493bf : MOVZX ESI,word ptr [EBX + 0x1e4]
007493c6 : TEST SI,SI
007493c9 : JBE 0x00749793
007493cf : MOV EBX,dword ptr [EBX + 0x24]
007493d2 : CMP byte ptr [EBX + 0x5d],0x0
007493d6 : JZ 0x007493e1
007493d8 : MOV EDX,dword ptr [EBX]
007493da : MOV EAX,dword ptr [EDX + 0x14]
007493dd : MOV ECX,EBX
007493df : CALL EAX
007493e1 : MOVSS XMM0,dword ptr [EBX + 0xb8]
007493e9 : MOV ECX,dword ptr [EBP + 0xc]
007493ec : MOV EDX,dword ptr [ECX]
007493ee : MOV EAX,dword ptr [EDX + 0x14]
007493f1 : MOVSS dword ptr [ESP + 0x14],XMM0
007493f7 : MOVSS XMM0,dword ptr [EBX + 0xbc]
007493ff : MOVSS dword ptr [ESP + 0x10],XMM0
00749405 : MOVSS XMM0,dword ptr [EBX + 0xc0]
0074940d : MOVSS dword ptr [ESP + 0x18],XMM0
00749413 : CALL EAX
00749415 : MOVSS XMM1,dword ptr [EAX]
00749419 : MOVSS XMM2,dword ptr [EAX + 0x4]
0074941e : MOVSS XMM3,dword ptr [EAX + 0x8]
00749423 : XOR ECX,ECX
00749425 : CMP CX,SI
00749428 : JNC 0x00749793
0074942e : MOVSS XMM0,dword ptr [ESP + 0x14]
00749434 : SUBSS XMM0,XMM1
00749438 : MOVSS XMM1,dword ptr [ESP + 0x10]
0074943e : SUBSS XMM1,XMM2
00749442 : MOVSS XMM2,dword ptr [ESP + 0x18]
00749448 : SUBSS XMM2,XMM3
0074944c : MOVAPS XMM3,XMM1
0074944f : MULSS XMM3,XMM1
00749453 : MULSS XMM0,XMM0
00749457 : MOVZX EAX,SI
0074945a : MOVAPS XMM1,XMM2
0074945d : LEA EDX,[EDI + 0x7c]
00749460 : ADDSS XMM0,XMM3
00749464 : MULSS XMM1,XMM2
00749468 : ADDSS XMM0,XMM1
0074946c : ADD EDI,0xe8
00749472 : MOVSS dword ptr [ESP + 0x18],XMM0
00749478 : MOV dword ptr [ESP + 0x14],EDX
0074947c : XOR EBX,EBX
0074947e : MOV dword ptr [ESP + 0x10],EAX
00749482 : JMP 0x00749496
00749490 : MOVSS XMM0,dword ptr [ESP + 0x18]
00749496 : MOV ECX,dword ptr [EBP + 0x8]
00749499 : MOV EDX,dword ptr [ECX + 0x1d8]
0074949f : MOV ESI,dword ptr [EBX + EDX*0x1]
007494a2 : MOV EAX,dword ptr [ESP + 0x14]
007494a6 : LEA ECX,[ESP + 0x34]
007494aa : PUSH ECX
007494ab : MOVSS dword ptr [ESI + 0xc],XMM0
007494b0 : MOV dword ptr [ESP + 0x44],0x0
007494b8 : MOV dword ptr [ESP + 0x38],EAX
007494bc : MOV dword ptr [ESP + 0x3c],0xc08ad4
007494c4 : MOV dword ptr [ESP + 0x40],0x6db
007494cc : MOV dword ptr [ESP + 0x48],0x1
007494d4 : CALL 0x006ef1a0
007494d9 : MOV dword ptr [ESP + 0x68],0x2
007494e1 : MOV EDX,dword ptr [EDI]
007494e3 : MOV EAX,dword ptr [EDX + 0x20]
007494e6 : PUSH ESI
007494e7 : MOV ECX,EDI
007494e9 : CALL EAX
007494eb : MOV dword ptr [ESP + 0x68],0xffffffff
007494f3 : CMP dword ptr [ESP + 0x40],0x0
007494f8 : JZ 0x0074950d
007494fa : MOV ECX,dword ptr [ESP + 0x34]
007494fe : PUSH ECX
007494ff : CALL dword ptr [0x00b8511c]
00749505 : MOV dword ptr [ESP + 0x40],0x0
0074950d : ADD EBX,0x4
00749510 : SUB dword ptr [ESP + 0x10],0x1
00749515 : JNZ 0x00749490
0074951b : MOV ECX,dword ptr [ESP + 0x60]
0074951f : MOV dword ptr FS:[0x0],ECX
00749526 : POP ECX
00749527 : POP EDI
00749528 : POP ESI
00749529 : POP EBX
0074952a : MOV ESP,EBP
0074952c : POP EBP
0074952d : RET 0xc
00749530 : LEA EAX,[ESP + 0x34]
00749534 : LEA EDX,[EDI + 0x60]
00749537 : XOR ESI,ESI
00749539 : PUSH EAX
0074953a : MOV dword ptr [ESP + 0x44],ESI
0074953e : MOV dword ptr [ESP + 0x38],EDX
00749542 : MOV dword ptr [ESP + 0x3c],0xc08af0
0074954a : MOV dword ptr [ESP + 0x40],0x6e3
00749552 : MOV dword ptr [ESP + 0x48],ECX
00749556 : CALL 0x006ef1a0
0074955b : MOV dword ptr [ESP + 0x68],0x3
00749563 : LEA EDX,[EDI + 0x4c]
00749566 : LEA EDI,[EBP + 0x8]
00749569 : CALL 0x00449730
0074956e : MOV dword ptr [ESP + 0x68],0xffffffff
00749576 : CMP dword ptr [ESP + 0x40],ESI
0074957a : JZ 0x00749793
00749580 : MOV ECX,dword ptr [ESP + 0x34]
00749584 : PUSH ECX
00749585 : CALL dword ptr [0x00b8511c]
0074958b : MOV dword ptr [ESP + 0x40],ESI
0074958f : MOV ECX,dword ptr [ESP + 0x60]
00749593 : MOV dword ptr FS:[0x0],ECX
0074959a : POP ECX
0074959b : POP EDI
0074959c : POP ESI
0074959d : POP EBX
0074959e : MOV ESP,EBP
007495a0 : POP EBP
007495a1 : RET 0xc
007495a4 : MOVZX EAX,word ptr [EBX + 0x1e4]
007495ab : MOV dword ptr [ESP + 0x14],EAX
007495af : TEST AX,AX
007495b2 : JBE 0x00749793
007495b8 : MOV ESI,dword ptr [EBX + 0x24]
007495bb : CMP byte ptr [ESI + 0x5d],0x0
007495bf : JZ 0x007495ca
007495c1 : MOV EDX,dword ptr [ESI]
007495c3 : MOV EAX,dword ptr [EDX + 0x14]
007495c6 : MOV ECX,ESI
007495c8 : CALL EAX
007495ca : MOVSS XMM0,dword ptr [ESI + 0xb8]
007495d2 : MOV ECX,dword ptr [EBP + 0xc]
007495d5 : MOV EDX,dword ptr [ECX]
007495d7 : MOV EAX,dword ptr [EDX + 0x14]
007495da : MOVSS dword ptr [ESP + 0x18],XMM0
007495e0 : MOVSS XMM0,dword ptr [ESI + 0xbc]
007495e8 : MOVSS dword ptr [ESP + 0x20],XMM0
007495ee : MOVSS XMM0,dword ptr [ESI + 0xc0]
007495f6 : MOVSS dword ptr [ESP + 0x28],XMM0
007495fc : CALL EAX
007495fe : MOVSS XMM0,dword ptr [EAX]
00749602 : MOVSS dword ptr [ESP + 0x1c],XMM0
00749608 : MOVSS XMM0,dword ptr [EAX + 0x4]
0074960d : XOR ECX,ECX
0074960f : MOVSS dword ptr [ESP + 0x24],XMM0
00749615 : MOVSS XMM0,dword ptr [EAX + 0x8]
0074961a : MOVSS dword ptr [ESP + 0x2c],XMM0
00749620 : CMP CX,word ptr [ESP + 0x14]
00749625 : JNC 0x00749793
0074962b : MOVZX EDX,word ptr [ESP + 0x14]
00749630 : LEA EBX,[EDI + 0x7c]
00749633 : MOV dword ptr [ESP + 0x10],ECX
00749637 : MOV dword ptr [ESP + 0x14],EDX
0074963b : JMP 0x00749642
00749640 : XOR ECX,ECX
00749642 : CMP byte ptr [EDI + 0x20],0x0
00749646 : MOV EAX,dword ptr [EBP + 0x8]
00749649 : MOV EDX,dword ptr [EAX + 0x1d8]
0074964f : MOV ESI,dword ptr [ESP + 0x10]
00749653 : MOV ESI,dword ptr [ESI + EDX*0x1]
00749656 : JZ 0x0074971d
0074965c : CMP byte ptr [EAX + 0x226],0x0
00749663 : JNZ 0x00749672
00749665 : MOV EAX,dword ptr [ESI + 0x8]
00749668 : CMP byte ptr [EAX + 0x1c],0x0
0074966c : JZ 0x0074971d
00749672 : MOVSS XMM1,dword ptr [ESP + 0x20]
00749678 : SUBSS XMM1,dword ptr [ESP + 0x24]
0074967e : MOVSS XMM0,dword ptr [ESP + 0x18]
00749684 : SUBSS XMM0,dword ptr [ESP + 0x1c]
0074968a : MOVSS XMM2,dword ptr [ESP + 0x28]
00749690 : SUBSS XMM2,dword ptr [ESP + 0x2c]
00749696 : MOVAPS XMM3,XMM1
00749699 : MULSS XMM3,XMM1
0074969d : MULSS XMM0,XMM0
007496a1 : MOV dword ptr [ESP + 0x40],ECX
007496a5 : MOVAPS XMM1,XMM2
007496a8 : LEA ECX,[ESP + 0x34]
007496ac : ADDSS XMM0,XMM3
007496b0 : MULSS XMM1,XMM2
007496b4 : ADDSS XMM0,XMM1
007496b8 : PUSH ECX
007496b9 : MOVSS dword ptr [ESI + 0xc],XMM0
007496be : MOV dword ptr [ESP + 0x38],EBX
007496c2 : MOV dword ptr [ESP + 0x3c],0xc08a9c
007496ca : MOV dword ptr [ESP + 0x40],0x6b9
007496d2 : MOV dword ptr [ESP + 0x48],0x1
007496da : CALL 0x006ef1a0
007496df : MOV dword ptr [ESP + 0x68],0x0
007496e7 : MOV EDX,dword ptr [EDI + 0xc0]
007496ed : MOV EAX,dword ptr [EDX + 0x20]
007496f0 : LEA ECX,[EDI + 0xc0]
007496f6 : PUSH ESI
007496f7 : CALL EAX
007496f9 : MOV dword ptr [ESP + 0x68],0xffffffff
00749701 : CMP dword ptr [ESP + 0x40],0x0
00749706 : JZ 0x00749783
00749708 : MOV ECX,dword ptr [ESP + 0x34]
0074970c : PUSH ECX
0074970d : CALL dword ptr [0x00b8511c]
00749713 : MOV dword ptr [ESP + 0x40],0x0
0074971b : JMP 0x00749783
0074971d : LEA EDX,[ESP + 0x48]
00749721 : PUSH EDX
00749722 : MOV dword ptr [ESP + 0x58],ECX
00749726 : MOV dword ptr [ESP + 0x4c],EBX
0074972a : MOV dword ptr [ESP + 0x50],0xc08ab8
00749732 : MOV dword ptr [ESP + 0x54],0x6bf
0074973a : MOV dword ptr [ESP + 0x5c],0x1
00749742 : CALL 0x006ef1a0
00749747 : MOV dword ptr [ESP + 0x68],0x1
0074974f : MOV EAX,dword ptr [EDI + 0x98]
00749755 : MOV EDX,dword ptr [EAX + 0x20]
00749758 : LEA ECX,[EDI + 0x98]
0074975e : PUSH ESI
0074975f : CALL EDX
00749761 : MOV dword ptr [ESP + 0x68],0xffffffff
00749769 : CMP dword ptr [ESP + 0x54],0x0
0074976e : JZ 0x00749783
00749770 : MOV EAX,dword ptr [ESP + 0x48]
00749774 : PUSH EAX
00749775 : CALL dword ptr [0x00b8511c]
0074977b : MOV dword ptr [ESP + 0x54],0x0
00749783 : ADD dword ptr [ESP + 0x10],0x4
00749788 : SUB dword ptr [ESP + 0x14],0x1
0074978d : JNZ 0x00749640
00749793 : MOV ECX,dword ptr [ESP + 0x60]
00749797 : MOV dword ptr FS:[0x0],ECX
0074979e : POP ECX
0074979f : POP EDI
007497a0 : POP ESI
007497a1 : POP EBX
007497a2 : MOV ESP,EBP
007497a4 : POP EBP
007497a5 : RET 0xc
