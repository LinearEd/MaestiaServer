PROGRAM  : Maestia.exe
FUNCTION : FUN_0058f270
ENTRY    : 0058f270
BODY     : [[0058f270, 0058f41d]]

============================================================
DECOMPILED C CODE
============================================================

float * FUN_0058f270(float *param_1,undefined4 *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  uint uVar5;
  int *piVar6;
  float *pfVar7;
  int in_ECX;
  uint uVar8;
  undefined1 local_28 [16];
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  *param_1 = 0.0;
  param_1[1] = 0.0;
  uVar5 = *(uint *)(in_ECX + 0xac);
  param_1[2] = 0.0;
  param_1[3] = 0.0;
  GMatrix2D::SetIdentity((GMatrix2D *)&local_18);
  uVar8 = 0;
  if (uVar5 != 0) {
    do {
      piVar6 = *(int **)(*(int *)(in_ECX + 0xa8) + uVar8 * 4);
      if (piVar6 != (int *)0x0) {
        local_18 = *param_2;
        local_14 = param_2[1];
        local_10 = param_2[2];
        local_c = param_2[3];
        local_8 = param_2[4];
        local_4 = param_2[5];
        GMatrix2D::Prepend((GMatrix2D *)&local_18,(GMatrix2D *)(piVar6 + 0x11));
        pfVar7 = (float *)(**(code **)(*piVar6 + 0x2c))(local_28,&local_18);
        fVar1 = *pfVar7;
        fVar2 = pfVar7[1];
        fVar3 = pfVar7[2];
        fVar4 = pfVar7[3];
        if ((fVar3 < fVar1 == (fVar3 == fVar1)) && (fVar4 < fVar2 == (fVar4 == fVar2))) {
          if ((param_1[2] < *param_1 == (param_1[2] == *param_1)) &&
             (param_1[3] < param_1[1] == (param_1[3] == param_1[1]))) {
            if (*param_1 <= fVar1) {
              fVar1 = *param_1;
            }
            if (fVar3 < param_1[2]) {
              fVar3 = param_1[2];
            }
            if (param_1[1] <= fVar2) {
              fVar2 = param_1[1];
            }
            if (fVar4 < param_1[3]) {
              fVar4 = param_1[3];
            }
            *param_1 = fVar1;
            param_1[1] = fVar2;
            param_1[2] = fVar3;
            param_1[3] = fVar4;
          }
          else {
            *param_1 = fVar1;
            param_1[1] = fVar2;
            param_1[2] = fVar3;
            param_1[3] = fVar4;
          }
        }
      }
      uVar8 = uVar8 + 1;
    } while (uVar8 < uVar5);
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
0058f270 : SUB ESP,0x50
0058f273 : FLDZ
0058f275 : PUSH EBX
0058f276 : PUSH EBP
0058f277 : PUSH ESI
0058f278 : MOV ESI,dword ptr [ESP + 0x60]
0058f27c : PUSH EDI
0058f27d : FST float ptr [ESI]
0058f27f : MOV EDI,ECX
0058f281 : FST float ptr [ESI + 0x4]
0058f284 : MOV EBX,dword ptr [EDI + 0xac]
0058f28a : FST float ptr [ESI + 0x8]
0058f28d : LEA ECX,[ESP + 0x48]
0058f291 : FSTP float ptr [ESI + 0xc]
0058f294 : MOV dword ptr [ESP + 0x10],EDI
0058f298 : MOV dword ptr [ESP + 0x14],EBX
0058f29c : CALL 0x00522b80
0058f2a1 : XOR EBP,EBP
0058f2a3 : TEST EBX,EBX
0058f2a5 : JBE 0x0058f412
0058f2ab : MOV EBX,dword ptr [ESP + 0x68]
0058f2af : JMP 0x0058f2b5
0058f2b1 : MOV EDI,dword ptr [ESP + 0x10]
0058f2b5 : MOV EAX,dword ptr [EDI + 0xa8]
0058f2bb : MOV EDI,dword ptr [EAX + EBP*0x4]
0058f2be : TEST EDI,EDI
0058f2c0 : JZ 0x0058f407
0058f2c6 : FLD float ptr [EBX]
0058f2c8 : LEA ECX,[EDI + 0x44]
0058f2cb : FSTP float ptr [ESP + 0x48]
0058f2cf : PUSH ECX
0058f2d0 : FLD float ptr [EBX + 0x4]
0058f2d3 : LEA ECX,[ESP + 0x4c]
0058f2d7 : FSTP float ptr [ESP + 0x50]
0058f2db : FLD float ptr [EBX + 0x8]
0058f2de : FSTP float ptr [ESP + 0x54]
0058f2e2 : FLD float ptr [EBX + 0xc]
0058f2e5 : FSTP float ptr [ESP + 0x58]
0058f2e9 : FLD float ptr [EBX + 0x10]
0058f2ec : FSTP float ptr [ESP + 0x5c]
0058f2f0 : FLD float ptr [EBX + 0x14]
0058f2f3 : FSTP float ptr [ESP + 0x60]
0058f2f7 : CALL 0x00522e20
0058f2fc : MOV EDX,dword ptr [EDI]
0058f2fe : MOV EDX,dword ptr [EDX + 0x2c]
0058f301 : LEA EAX,[ESP + 0x48]
0058f305 : PUSH EAX
0058f306 : LEA ECX,[ESP + 0x3c]
0058f30a : PUSH ECX
0058f30b : MOV ECX,EDI
0058f30d : CALL EDX
0058f30f : FLD float ptr [EAX]
0058f311 : FSTP float ptr [ESP + 0x28]
0058f315 : FLD float ptr [EAX + 0x4]
0058f318 : FSTP float ptr [ESP + 0x2c]
0058f31c : FLD float ptr [EAX + 0x8]
0058f31f : FSTP float ptr [ESP + 0x30]
0058f323 : FLD float ptr [EAX + 0xc]
0058f326 : FSTP float ptr [ESP + 0x34]
0058f32a : FLD float ptr [ESP + 0x28]
0058f32e : FLD float ptr [ESP + 0x30]
0058f332 : FCOM
0058f334 : FNSTSW AX
0058f336 : TEST AH,0x41
0058f339 : JNP 0x0058f3fb
0058f33f : FLD float ptr [ESP + 0x2c]
0058f343 : FLD float ptr [ESP + 0x34]
0058f347 : FCOM
0058f349 : FNSTSW AX
0058f34b : TEST AH,0x41
0058f34e : JNP 0x0058f3ff
0058f354 : FLD float ptr [ESI]
0058f356 : FLD float ptr [ESI + 0x8]
0058f359 : FCOMPP
0058f35b : FNSTSW AX
0058f35d : TEST AH,0x41
0058f360 : JNP 0x0058f3ec
0058f366 : FLD float ptr [ESI + 0x4]
0058f369 : FLD float ptr [ESI + 0xc]
0058f36c : FCOMPP
0058f36e : FNSTSW AX
0058f370 : TEST AH,0x41
0058f373 : JNP 0x0058f3ec
0058f375 : FLD float ptr [ESI]
0058f377 : FCOMP ST4
0058f379 : FNSTSW AX
0058f37b : TEST AH,0x41
0058f37e : JNZ 0x0058f384
0058f380 : FXCH ST3
0058f382 : JMP 0x0058f388
0058f384 : FSTP ST3
0058f386 : FLD float ptr [ESI]
0058f388 : FSTP float ptr [ESP + 0x18]
0058f38c : FLD float ptr [ESI + 0x8]
0058f38f : FCOMP ST2
0058f391 : FNSTSW AX
0058f393 : TEST AH,0x41
0058f396 : JNZ 0x0058f39f
0058f398 : FSTP ST1
0058f39a : FLD float ptr [ESI + 0x8]
0058f39d : JMP 0x0058f3a1
0058f39f : FXCH
0058f3a1 : FSTP float ptr [ESP + 0x20]
0058f3a5 : FLD float ptr [ESI + 0x4]
0058f3a8 : FCOMP
0058f3aa : FNSTSW AX
0058f3ac : TEST AH,0x41
0058f3af : JZ 0x0058f3b6
0058f3b1 : FSTP ST0
0058f3b3 : FLD float ptr [ESI + 0x4]
0058f3b6 : FSTP float ptr [ESP + 0x1c]
0058f3ba : FLD float ptr [ESI + 0xc]
0058f3bd : FCOMP
0058f3bf : FNSTSW AX
0058f3c1 : TEST AH,0x41
0058f3c4 : JNZ 0x0058f3cb
0058f3c6 : FSTP ST0
0058f3c8 : FLD float ptr [ESI + 0xc]
0058f3cb : FSTP float ptr [ESP + 0x24]
0058f3cf : FLD float ptr [ESP + 0x18]
0058f3d3 : FSTP float ptr [ESI]
0058f3d5 : FLD float ptr [ESP + 0x1c]
0058f3d9 : FSTP float ptr [ESI + 0x4]
0058f3dc : FLD float ptr [ESP + 0x20]
0058f3e0 : FSTP float ptr [ESI + 0x8]
0058f3e3 : FLD float ptr [ESP + 0x24]
0058f3e7 : FSTP float ptr [ESI + 0xc]
0058f3ea : JMP 0x0058f407
0058f3ec : FXCH ST3
0058f3ee : FSTP float ptr [ESI]
0058f3f0 : FSTP float ptr [ESI + 0x4]
0058f3f3 : FSTP float ptr [ESI + 0x8]
0058f3f6 : FSTP float ptr [ESI + 0xc]
0058f3f9 : JMP 0x0058f407
0058f3fb : FSTP ST1
0058f3fd : JMP 0x0058f405
0058f3ff : FSTP ST3
0058f401 : FSTP ST0
0058f403 : FSTP ST0
0058f405 : FSTP ST0
0058f407 : INC EBP
0058f408 : CMP EBP,dword ptr [ESP + 0x14]
0058f40c : JC 0x0058f2b1
0058f412 : POP EDI
0058f413 : MOV EAX,ESI
0058f415 : POP ESI
0058f416 : POP EBP
0058f417 : POP EBX
0058f418 : ADD ESP,0x50
0058f41b : RET 0x8
