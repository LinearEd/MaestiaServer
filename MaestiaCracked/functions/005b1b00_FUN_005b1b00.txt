PROGRAM  : Maestia.exe
FUNCTION : FUN_005b1b00
ENTRY    : 005b1b00
BODY     : [[005b1b00, 005b1b5c] [005b1b60, 005b1c07]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b1b00(int param_1)

{
  int *piVar1;
  undefined4 uVar2;
  byte *pbVar3;
  char cVar4;
  int iVar5;
  undefined4 *local_1c;
  undefined1 *local_18;
  undefined4 local_14;
  
  cVar4 = FUN_00526030(8);
  if (cVar4 != '\0') {
    if (*(int *)(param_1 + 8) == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = *(int *)(param_1 + 8) + -0x10;
    }
    FUN_0051c410(**(undefined4 **)(iVar5 + 0x30),(*(undefined4 **)(iVar5 + 0x30))[4],DAT_00d73250);
    iVar5 = 0;
    if (0 < *(int *)(param_1 + 0x1c)) {
      do {
        uVar2 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(iVar5);
        FUN_005272e0(&local_1c,uVar2,0xffffffff,0);
        FUN_0051b5d0(*local_1c,0xffffffff);
        local_1c[2] = local_1c[2] + -1;
        if (local_1c[2] == 0) {
          FUN_00525340();
        }
        iVar5 = iVar5 + 1;
      } while (iVar5 < *(int *)(param_1 + 0x1c));
    }
    if (local_18 == (undefined1 *)0x0) {
      local_18 = &DAT_00cca874;
    }
    iVar5 = FUN_00525450(local_18,local_14);
    *(int *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1;
    pbVar3 = *(byte **)(param_1 + 4);
    if (4 < *pbVar3) {
      FUN_00526400();
    }
    *pbVar3 = 5;
    *(int *)(pbVar3 + 4) = iVar5;
    *(int *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1;
    piVar1 = (int *)(iVar5 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    FUN_0051b3d0();
    return;
  }
  FUN_00526050("String",0,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005b1b00 : SUB ESP,0x1c
005b1b03 : PUSH ESI
005b1b04 : MOV ESI,dword ptr [ESP + 0x24]
005b1b08 : PUSH 0x8
005b1b0a : MOV ECX,ESI
005b1b0c : CALL 0x00526030
005b1b11 : TEST AL,AL
005b1b13 : JNZ 0x005b1b2a
005b1b15 : PUSH 0x0
005b1b17 : PUSH 0x0
005b1b19 : PUSH 0xb8f800
005b1b1e : MOV ECX,ESI
005b1b20 : CALL 0x00526050
005b1b25 : POP ESI
005b1b26 : ADD ESP,0x1c
005b1b29 : RET
005b1b2a : MOV EAX,dword ptr [ESI + 0x8]
005b1b2d : TEST EAX,EAX
005b1b2f : JZ 0x005b1b36
005b1b31 : ADD EAX,-0x10
005b1b34 : JMP 0x005b1b38
005b1b36 : XOR EAX,EAX
005b1b38 : MOV EAX,dword ptr [EAX + 0x30]
005b1b3b : MOV ECX,dword ptr [0x00d73250]
005b1b41 : MOV EDX,dword ptr [EAX + 0x10]
005b1b44 : MOV EAX,dword ptr [EAX]
005b1b46 : PUSH EDI
005b1b47 : PUSH ECX
005b1b48 : PUSH EDX
005b1b49 : PUSH EAX
005b1b4a : LEA ECX,[ESP + 0x18]
005b1b4e : CALL 0x0051c410
005b1b53 : XOR EDI,EDI
005b1b55 : CMP dword ptr [ESI + 0x1c],EDI
005b1b58 : JLE 0x005b1bab
005b1b5a : PUSH EBX
005b1b5b : JMP 0x005b1b60
005b1b60 : MOV EBX,dword ptr [ESI + 0x18]
005b1b63 : PUSH EDI
005b1b64 : MOV ECX,ESI
005b1b66 : CALL 0x00526260
005b1b6b : PUSH 0x0
005b1b6d : PUSH -0x1
005b1b6f : PUSH EBX
005b1b70 : LEA ECX,[ESP + 0x18]
005b1b74 : PUSH ECX
005b1b75 : MOV ECX,EAX
005b1b77 : CALL 0x005272e0
005b1b7c : MOV EDX,dword ptr [ESP + 0xc]
005b1b80 : MOV EAX,dword ptr [EDX]
005b1b82 : PUSH -0x1
005b1b84 : PUSH EAX
005b1b85 : LEA ECX,[ESP + 0x18]
005b1b89 : CALL 0x0051b5d0
005b1b8e : MOV EAX,dword ptr [ESP + 0xc]
005b1b92 : DEC dword ptr [EAX + 0x8]
005b1b95 : MOV ECX,EAX
005b1b97 : ADD EAX,0x8
005b1b9a : CMP dword ptr [EAX],0x0
005b1b9d : JNZ 0x005b1ba4
005b1b9f : CALL 0x00525340
005b1ba4 : INC EDI
005b1ba5 : CMP EDI,dword ptr [ESI + 0x1c]
005b1ba8 : JL 0x005b1b60
005b1baa : POP EBX
005b1bab : MOV ECX,dword ptr [ESP + 0xc]
005b1baf : TEST ECX,ECX
005b1bb1 : JNZ 0x005b1bb8
005b1bb3 : MOV ECX,0xcca874
005b1bb8 : MOV EDX,dword ptr [ESI + 0x18]
005b1bbb : MOV EAX,dword ptr [EDX + 0x78]
005b1bbe : MOV EDX,dword ptr [ESP + 0x10]
005b1bc2 : PUSH EDX
005b1bc3 : PUSH ECX
005b1bc4 : LEA ECX,[EAX + 0x254]
005b1bca : CALL 0x00525450
005b1bcf : MOV EDI,EAX
005b1bd1 : INC dword ptr [EDI + 0x8]
005b1bd4 : MOV ESI,dword ptr [ESI + 0x4]
005b1bd7 : CMP byte ptr [ESI],0x5
005b1bda : JC 0x005b1be3
005b1bdc : MOV ECX,ESI
005b1bde : CALL 0x00526400
005b1be3 : MOV byte ptr [ESI],0x5
005b1be6 : MOV dword ptr [ESI + 0x4],EDI
005b1be9 : INC dword ptr [EDI + 0x8]
005b1bec : ADD dword ptr [EDI + 0x8],-0x1
005b1bf0 : JNZ 0x005b1bf9
005b1bf2 : MOV ECX,EDI
005b1bf4 : CALL 0x00525340
005b1bf9 : LEA ECX,[ESP + 0xc]
005b1bfd : CALL 0x0051b3d0
005b1c02 : POP EDI
005b1c03 : POP ESI
005b1c04 : ADD ESP,0x1c
005b1c07 : RET
