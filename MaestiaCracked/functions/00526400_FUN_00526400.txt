PROGRAM  : Maestia.exe
FUNCTION : FUN_00526400
ENTRY    : 00526400
BODY     : [[00526400, 0052649c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00526400(void)

{
  int *piVar1;
  undefined1 *in_ECX;
  
  switch(*in_ECX) {
  case 5:
  case 0xb:
    piVar1 = (int *)(*(int *)(in_ECX + 4) + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
      return;
    }
    break;
  case 6:
  case 9:
    if (*(int *)(in_ECX + 4) != 0) {
      FUN_00503db0();
      *(undefined4 *)(in_ECX + 4) = 0;
      return;
    }
    break;
  case 7:
    piVar1 = *(int **)(in_ECX + 4);
    if (piVar1 != (int *)0x0) {
      *piVar1 = *piVar1 + -1;
      if (*piVar1 < 1) {
        FUN_0051d070();
        FUN_00515cf0(piVar1);
      }
      *(undefined4 *)(in_ECX + 4) = 0;
    }
    break;
  case 8:
  case 0xc:
    if (*(int *)(in_ECX + 4) != 0) {
      if (((in_ECX[0xc] & 2) == 0) && (*(int *)(in_ECX + 4) != 0)) {
        FUN_00503db0();
      }
      *(undefined4 *)(in_ECX + 4) = 0;
      if (((in_ECX[0xc] & 1) == 0) && (*(int *)(in_ECX + 8) != 0)) {
        FUN_00503db0();
      }
      *(undefined4 *)(in_ECX + 8) = 0;
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00526400 : PUSH ESI
00526401 : MOV ESI,ECX
00526403 : MOVZX EAX,byte ptr [ESI]
00526406 : ADD EAX,-0x5
00526409 : CMP EAX,0x7
0052640c : JA 0x0052649b
00526412 : JMP dword ptr [EAX*0x4 + 0x5264a0]
00526419 : MOV ECX,dword ptr [ESI + 0x4]
0052641c : ADD dword ptr [ECX + 0x8],-0x1
00526420 : JNZ 0x0052649b
00526422 : POP ESI
00526423 : JMP 0x00525340
00526428 : CMP dword ptr [ESI + 0x4],0x0
0052642c : JZ 0x0052649b
0052642e : TEST byte ptr [ESI + 0xc],0x2
00526432 : JNZ 0x00526440
00526434 : MOV ECX,dword ptr [ESI + 0x4]
00526437 : TEST ECX,ECX
00526439 : JZ 0x00526440
0052643b : CALL 0x00503db0
00526440 : TEST byte ptr [ESI + 0xc],0x1
00526444 : MOV dword ptr [ESI + 0x4],0x0
0052644b : JNZ 0x00526459
0052644d : MOV ECX,dword ptr [ESI + 0x8]
00526450 : TEST ECX,ECX
00526452 : JZ 0x00526459
00526454 : CALL 0x00503db0
00526459 : MOV dword ptr [ESI + 0x8],0x0
00526460 : POP ESI
00526461 : RET
00526462 : MOV ECX,dword ptr [ESI + 0x4]
00526465 : TEST ECX,ECX
00526467 : JZ 0x0052649b
00526469 : CALL 0x00503db0
0052646e : MOV dword ptr [ESI + 0x4],0x0
00526475 : POP ESI
00526476 : RET
00526477 : PUSH EDI
00526478 : MOV EDI,dword ptr [ESI + 0x4]
0052647b : TEST EDI,EDI
0052647d : JZ 0x0052649a
0052647f : DEC dword ptr [EDI]
00526481 : CMP dword ptr [EDI],0x0
00526484 : JG 0x00526493
00526486 : MOV ECX,EDI
00526488 : CALL 0x0051d070
0052648d : PUSH EDI
0052648e : CALL 0x00515cf0
00526493 : MOV dword ptr [ESI + 0x4],0x0
0052649a : POP EDI
0052649b : POP ESI
0052649c : RET
