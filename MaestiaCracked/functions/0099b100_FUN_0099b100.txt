PROGRAM  : Maestia.exe
FUNCTION : FUN_0099b100
ENTRY    : 0099b100
BODY     : [[0099b100, 0099b241]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099b100(int param_1,int param_2)

{
  short sVar1;
  int iVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  short *psVar5;
  undefined4 *puVar6;
  undefined1 local_20 [8];
  undefined4 local_18;
  undefined4 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60b24;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  param_2 = FUN_006f0760(0x68,"",0,(DAT_01725270 >> 3 & 1) == 0,
                         DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  local_8 = 0;
  if (param_2 == 0) {
    puVar4 = (undefined4 *)0x0;
  }
  else {
    puVar4 = (undefined4 *)FUN_00412470(param_2);
  }
  local_8 = 0xffffffff;
  puVar4[4] = 0;
  psVar5 = (short *)(iVar2 + 8);
  do {
    sVar1 = *psVar5;
    psVar5 = psVar5 + 1;
  } while (sVar1 != 0);
  FUN_00406360((short *)(iVar2 + 8),(int)psVar5 - (iVar2 + 10) >> 1);
  *puVar4 = *(undefined4 *)(iVar2 + 4);
  puVar4[3] = 0;
  *(undefined1 *)((int)puVar4 + 10) = 1;
  puVar4[1] = 1;
  *(undefined2 *)(puVar4 + 2) = 1;
  *(undefined2 *)(puVar4 + 6) = 1;
  if ((uint)puVar4[0x10] < 8) {
    puVar6 = puVar4 + 0xb;
  }
  else {
    puVar6 = (undefined4 *)puVar4[0xb];
  }
  FUN_009adfc0(*(undefined4 *)(*DAT_00da9894 + 0x1a8),5,puVar6);
  iVar2 = *(int *)(param_1 + 4);
  uVar3 = *puVar4;
  param_2 = uVar3;
  FUN_004437f0(&param_2);
  if (local_14 == *(undefined4 **)(iVar2 + 4)) {
    local_18 = uVar3;
    local_14 = puVar4;
    FUN_00451e00(local_20,&local_18);
  }
  FUN_0099aee0();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0099b100 : PUSH EBP
0099b101 : MOV EBP,ESP
0099b103 : PUSH -0x1
0099b105 : PUSH 0xb60b24
0099b10a : MOV EAX,FS:[0x0]
0099b110 : PUSH EAX
0099b111 : SUB ESP,0x14
0099b114 : PUSH EBX
0099b115 : PUSH ESI
0099b116 : PUSH EDI
0099b117 : MOV EAX,[0x00d66fa0]
0099b11c : XOR EAX,EBP
0099b11e : PUSH EAX
0099b11f : LEA EAX,[EBP + -0xc]
0099b122 : MOV FS:[0x0],EAX
0099b128 : MOV EBX,dword ptr [EBP + 0xc]
0099b12b : MOV EAX,[0x01725270]
0099b130 : SHR EAX,0x3
0099b133 : MOV ECX,0x0
0099b138 : AND EAX,0x1
0099b13b : SETZ CL
0099b13e : XOR EDI,EDI
0099b140 : PUSH ECX
0099b141 : PUSH EDI
0099b142 : PUSH 0xbf1a4a
0099b147 : PUSH 0x68
0099b149 : CALL 0x006f0760
0099b14e : ADD ESP,0x10
0099b151 : MOV dword ptr [EBP + 0xc],EAX
0099b154 : MOV dword ptr [EBP + -0x4],EDI
0099b157 : CMP EAX,EDI
0099b159 : JZ 0x0099b165
0099b15b : PUSH EAX
0099b15c : CALL 0x00412470
0099b161 : MOV ESI,EAX
0099b163 : JMP 0x0099b167
0099b165 : XOR ESI,ESI
0099b167 : MOV dword ptr [EBP + -0x4],0xffffffff
0099b16e : LEA ECX,[EBX + 0x8]
0099b171 : MOV EAX,ECX
0099b173 : MOV dword ptr [ESI + 0x10],EDI
0099b176 : LEA EDI,[EAX + 0x2]
0099b179 : LEA ESP,[ESP]
0099b180 : MOV DX,word ptr [EAX]
0099b183 : ADD EAX,0x2
0099b186 : TEST DX,DX
0099b189 : JNZ 0x0099b180
0099b18b : SUB EAX,EDI
0099b18d : SAR EAX,0x1
0099b18f : PUSH EAX
0099b190 : LEA EDI,[ESI + 0x28]
0099b193 : PUSH ECX
0099b194 : MOV ECX,EDI
0099b196 : CALL 0x00406360
0099b19b : MOV EDX,dword ptr [EBX + 0x4]
0099b19e : MOV EAX,0x1
0099b1a3 : MOV ECX,EAX
0099b1a5 : MOV dword ptr [ESI],EDX
0099b1a7 : MOV dword ptr [ESI + 0xc],0x0
0099b1ae : MOV byte ptr [ESI + 0xa],0x1
0099b1b2 : MOV dword ptr [ESI + 0x4],0x1
0099b1b9 : MOV word ptr [ESI + 0x8],AX
0099b1bd : MOV word ptr [ESI + 0x18],CX
0099b1c1 : CMP dword ptr [EDI + 0x18],0x8
0099b1c5 : JC 0x0099b1cc
0099b1c7 : MOV EDI,dword ptr [EDI + 0x4]
0099b1ca : JMP 0x0099b1cf
0099b1cc : ADD EDI,0x4
0099b1cf : MOV EDX,dword ptr [0x00da9894]
0099b1d5 : MOV EAX,dword ptr [EDX]
0099b1d7 : MOV ECX,dword ptr [EAX + 0x1a8]
0099b1dd : PUSH EDI
0099b1de : PUSH 0x5
0099b1e0 : PUSH ECX
0099b1e1 : MOV ECX,0xc87c90
0099b1e6 : CALL 0x009adfc0
0099b1eb : MOV EDX,dword ptr [EBP + 0x8]
0099b1ee : MOV EDI,dword ptr [EDX + 0x4]
0099b1f1 : MOV EBX,dword ptr [ESI]
0099b1f3 : ADD ESP,0xc
0099b1f6 : LEA EAX,[EBP + 0xc]
0099b1f9 : PUSH EAX
0099b1fa : LEA EAX,[EBP + -0x10]
0099b1fd : MOV ECX,EDI
0099b1ff : MOV dword ptr [EBP + 0xc],EBX
0099b202 : CALL 0x004437f0
0099b207 : MOV ECX,dword ptr [EBP + -0x10]
0099b20a : CMP ECX,dword ptr [EDI + 0x4]
0099b20d : JNZ 0x0099b224
0099b20f : LEA EDX,[EBP + -0x14]
0099b212 : PUSH EDX
0099b213 : LEA EAX,[EBP + -0x1c]
0099b216 : PUSH EAX
0099b217 : MOV EAX,EDI
0099b219 : MOV dword ptr [EBP + -0x14],EBX
0099b21c : MOV dword ptr [EBP + -0x10],ESI
0099b21f : CALL 0x00451e00
0099b224 : MOV EDI,dword ptr [EBP + 0x8]
0099b227 : XOR ECX,ECX
0099b229 : CALL 0x0099aee0
0099b22e : MOV ECX,dword ptr [EBP + -0xc]
0099b231 : MOV dword ptr FS:[0x0],ECX
0099b238 : POP ECX
0099b239 : POP EDI
0099b23a : POP ESI
0099b23b : POP EBX
0099b23c : MOV ESP,EBP
0099b23e : POP EBP
0099b23f : RET 0x8
