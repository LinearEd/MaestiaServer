PROGRAM  : Maestia.exe
FUNCTION : FUN_00901620
ENTRY    : 00901620
BODY     : [[00901620, 009017ec]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00901620(int param_1)

{
  uint uVar1;
  int iVar2;
  DWORD DVar3;
  int iVar4;
  float10 fVar5;
  float10 fVar6;
  float fVar7;
  undefined4 ***local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1ea48;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  iVar2 = FUN_00a1a840();
  if ((((iVar2 != 0) || (iVar2 = FUN_00a1a6d0(), iVar2 != 0)) ||
      (iVar2 = FUN_00a1a780(), iVar2 != 0)) &&
     (DVar3 = timeGetTime(), 100 < DVar3 - *(int *)(param_1 + 0xd4))) {
    iVar4 = *(int *)(*(int *)(DAT_0172491c + 0x17c) + 0xc4);
    iVar2 = *(int *)(iVar2 + 0xc4);
    fVar5 = (float10)FUN_0040f460();
    iVar4 = iVar4 + iVar2;
    fVar6 = (float10)iVar4;
    if (iVar4 < 0) {
      fVar6 = fVar6 + (float10)4.2949673e+09;
    }
    fVar7 = (float)(fVar5 - fVar6);
    if (fVar5 - fVar6 < (float10)0) {
      fVar7 = 0.0;
    }
    if (*(float *)(param_1 + 0xd8) != fVar7) {
      *(float *)(param_1 + 0xd8) = fVar7;
      FUN_00404750(L"%.1fm",(double)(fVar7 * 0.1),uVar1);
      local_8 = 0;
      iVar2 = *DAT_00da9894;
      if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
        if (local_18 < 8) {
          local_2c[0] = local_2c;
        }
        (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                  (*(int **)(iVar2 + 0x114),"SetTargetDist",&DAT_00c6309c,local_2c[0]);
      }
      DVar3 = timeGetTime();
      *(DWORD *)(param_1 + 0xd4) = DVar3;
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00901620 : PUSH EBP
00901621 : MOV EBP,ESP
00901623 : PUSH -0x1
00901625 : PUSH 0xb1ea48
0090162a : MOV EAX,FS:[0x0]
00901630 : PUSH EAX
00901631 : SUB ESP,0x28
00901634 : MOV EAX,[0x00d66fa0]
00901639 : XOR EAX,EBP
0090163b : MOV dword ptr [EBP + -0x10],EAX
0090163e : PUSH EBX
0090163f : PUSH ESI
00901640 : PUSH EDI
00901641 : PUSH EAX
00901642 : LEA EAX,[EBP + -0xc]
00901645 : MOV FS:[0x0],EAX
0090164b : MOV ECX,dword ptr [0x00da93ec]
00901651 : MOV EDI,dword ptr [ECX + 0x24c]
00901657 : MOV EAX,dword ptr [EBP + 0x8]
0090165a : PUSH EDI
0090165b : MOV dword ptr [EBP + -0x30],EAX
0090165e : MOV EBX,ECX
00901660 : CALL 0x00a1a840
00901665 : MOV ESI,EAX
00901667 : TEST ESI,ESI
00901669 : JNZ 0x0090168b
0090166b : PUSH EDI
0090166c : MOV ECX,EBX
0090166e : CALL 0x00a1a6d0
00901673 : MOV ESI,EAX
00901675 : TEST ESI,ESI
00901677 : JNZ 0x0090168b
00901679 : PUSH EDI
0090167a : MOV ECX,EBX
0090167c : CALL 0x00a1a780
00901681 : MOV ESI,EAX
00901683 : TEST ESI,ESI
00901685 : JZ 0x009017cf
0090168b : CALL dword ptr [0x00b85598]
00901691 : MOV EBX,dword ptr [EBP + -0x30]
00901694 : SUB EAX,dword ptr [EBX + 0xd4]
0090169a : CMP EAX,0x64
0090169d : JBE 0x009017cf
009016a3 : MOV EDX,dword ptr [0x0172491c]
009016a9 : MOV ECX,dword ptr [EDX + 0x17c]
009016af : MOV ECX,dword ptr [ECX + 0x3e8]
009016b5 : MOV EAX,dword ptr [ESI + 0x3e8]
009016bb : MOVSS XMM0,dword ptr [ECX + 0x68]
009016c0 : SUBSS XMM0,dword ptr [EAX + 0x68]
009016c5 : MOVSS XMM1,dword ptr [ECX + 0x70]
009016ca : SUBSS XMM1,dword ptr [EAX + 0x70]
009016cf : MOV EDX,dword ptr [EDX + 0x17c]
009016d5 : MOV EDI,dword ptr [EDX + 0xc4]
009016db : MOV ESI,dword ptr [ESI + 0xc4]
009016e1 : ADD ECX,0x68
009016e4 : ADD EAX,0x68
009016e7 : MOVAPS XMM2,XMM0
009016ea : MULSS XMM2,XMM0
009016ee : MOVAPS XMM0,XMM1
009016f1 : MULSS XMM0,XMM1
009016f5 : PUSH ECX
009016f6 : ADDSS XMM2,XMM0
009016fa : MOVSS dword ptr [ESP],XMM2
009016ff : CALL 0x0040f460
00901704 : ADD EDI,ESI
00901706 : ADD ESP,0x4
00901709 : MOV dword ptr [EBP + -0x30],EDI
0090170c : FILD dword ptr [EBP + -0x30]
0090170f : TEST EDI,EDI
00901711 : JGE 0x00901719
00901713 : FADD float ptr [0x00cdf0e0]
00901719 : FSUBP
0090171b : FST float ptr [EBP + -0x30]
0090171e : FLDZ
00901720 : FCOMIP ST0,ST1
00901722 : FSTP ST0
00901724 : JBE 0x0090172b
00901726 : XORPS XMM0,XMM0
00901729 : JMP 0x00901730
0090172b : MOVSS XMM0,dword ptr [EBP + -0x30]
00901730 : MOVSS XMM1,dword ptr [EBX + 0xd8]
00901738 : UCOMISS XMM1,XMM0
0090173b : LAHF
0090173c : TEST AH,0x44
0090173f : JNP 0x009017cf
00901745 : MOVSS dword ptr [EBX + 0xd8],XMM0
0090174d : MULSS XMM0,dword ptr [0x00cdf0f0]
00901755 : SUB ESP,0x8
00901758 : CVTPS2PD XMM0,XMM0
0090175b : MOVSD qword ptr [ESP],XMM0
00901760 : PUSH 0xc63090
00901765 : LEA ESI,[EBP + -0x2c]
00901768 : CALL 0x00404750
0090176d : ADD ESP,0xc
00901770 : MOV dword ptr [EBP + -0x4],0x0
00901777 : MOV ECX,dword ptr [0x00da9894]
0090177d : MOV EAX,dword ptr [ECX]
0090177f : TEST EAX,EAX
00901781 : JZ 0x009017b4
00901783 : CMP dword ptr [EAX + 0x114],0x0
0090178a : JZ 0x009017b4
0090178c : CMP dword ptr [EBP + -0x14],0x8
00901790 : MOV EAX,dword ptr [EAX + 0x114]
00901796 : MOV ECX,dword ptr [EBP + -0x28]
00901799 : JNC 0x0090179e
0090179b : LEA ECX,[EBP + -0x28]
0090179e : MOV EDX,dword ptr [EAX]
009017a0 : PUSH ECX
009017a1 : PUSH 0xc6309c
009017a6 : PUSH 0xc630a0
009017ab : PUSH EAX
009017ac : MOV EAX,dword ptr [EDX + 0x4]
009017af : CALL EAX
009017b1 : ADD ESP,0x10
009017b4 : CALL dword ptr [0x00b85598]
009017ba : MOV dword ptr [EBX + 0xd4],EAX
009017c0 : MOV dword ptr [EBP + -0x4],0xffffffff
009017c7 : LEA ECX,[EBP + -0x2c]
009017ca : CALL 0x00406560
009017cf : MOV ECX,dword ptr [EBP + -0xc]
009017d2 : MOV dword ptr FS:[0x0],ECX
009017d9 : POP ECX
009017da : POP EDI
009017db : POP ESI
009017dc : POP EBX
009017dd : MOV ECX,dword ptr [EBP + -0x10]
009017e0 : XOR ECX,EBP
009017e2 : CALL 0x00633e6b
009017e7 : MOV ESP,EBP
009017e9 : POP EBP
009017ea : RET 0x4
