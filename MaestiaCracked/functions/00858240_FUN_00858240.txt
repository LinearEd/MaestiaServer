PROGRAM  : Maestia.exe
FUNCTION : FUN_00858240
ENTRY    : 00858240
BODY     : [[00858240, 0085838f]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00858240(int param_1,undefined4 param_2)

{
  short sVar1;
  uint uVar2;
  undefined1 local_30 [24];
  uint local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1bc5d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 0;
  sVar1 = *(short *)(param_1 + 0x136);
  if (sVar1 < -4) {
    FUN_00406460(L"ID_EF_ICON_PK_TOKEN_LOW");
    local_8 = 1;
    FUN_0081cfe0(DAT_0172491c,local_30);
    local_14 = 1;
    local_8 = local_8 & 0xffffff00;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
  }
  else {
    if (sVar1 < 5) {
      if (sVar1 < 10) {
        FUN_00406460(&DAT_00c3f0b4);
        ExceptionList = local_10;
        return param_2;
      }
    }
    else if (sVar1 < 10) {
      FUN_00406460(L"ID_EF_ICON_PK_TOKEN_HIGH");
      local_8 = 2;
      FUN_0081cfe0(DAT_0172491c,local_30);
      local_14 = 1;
      local_8 = local_8 & 0xffffff00;
      FUN_00406560();
      ExceptionList = local_10;
      return param_2;
    }
    FUN_00406460(L"ID_EF_ICON_PK_TOKEN_HIGHEST");
    local_8 = 3;
    FUN_0081cfe0(DAT_0172491c,local_30);
    local_14 = 1;
    local_8 = local_8 & 0xffffff00;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
00858240 : PUSH EBP
00858241 : MOV EBP,ESP
00858243 : PUSH -0x1
00858245 : PUSH 0xb1bc5d
0085824a : MOV EAX,FS:[0x0]
00858250 : PUSH EAX
00858251 : SUB ESP,0x20
00858254 : PUSH EBX
00858255 : PUSH ESI
00858256 : MOV EAX,[0x00d66fa0]
0085825b : XOR EAX,EBP
0085825d : PUSH EAX
0085825e : LEA EAX,[EBP + -0xc]
00858261 : MOV FS:[0x0],EAX
00858267 : MOV ESI,dword ptr [EBP + 0xc]
0085826a : MOV EAX,dword ptr [EBP + 0x8]
0085826d : XOR EBX,EBX
0085826f : MOV dword ptr [EBP + -0x10],EBX
00858272 : MOVZX EAX,word ptr [EAX + 0x136]
00858279 : CWDE
0085827a : CMP EAX,-0x5
0085827d : JG 0x008582d0
0085827f : PUSH 0xc3f018
00858284 : LEA ECX,[EBP + -0x2c]
00858287 : CALL 0x00406460
0085828c : MOV dword ptr [EBP + -0x4],0x1
00858293 : MOV EDX,dword ptr [0x0172491c]
00858299 : LEA ECX,[EBP + -0x2c]
0085829c : PUSH ECX
0085829d : PUSH EDX
0085829e : CALL 0x0081cfe0
008582a3 : MOV dword ptr [EBP + -0x10],0x1
008582aa : MOV byte ptr [EBP + -0x4],BL
008582ad : CMP dword ptr [EBP + -0x14],0x8
008582b1 : JC 0x008582bb
008582b3 : MOV ECX,dword ptr [EBP + -0x28]
008582b6 : CALL 0x006f04e0
008582bb : XOR EAX,EAX
008582bd : MOV dword ptr [EBP + -0x14],0x7
008582c4 : MOV dword ptr [EBP + -0x18],EBX
008582c7 : MOV word ptr [EBP + -0x28],AX
008582cb : JMP 0x0085837b
008582d0 : CMP EAX,0x5
008582d3 : JL 0x00858312
008582d5 : CMP EAX,0xa
008582d8 : JGE 0x00858317
008582da : PUSH 0xc3f048
008582df : LEA ECX,[EBP + -0x2c]
008582e2 : CALL 0x00406460
008582e7 : MOV dword ptr [EBP + -0x4],0x2
008582ee : MOV EDX,dword ptr [0x0172491c]
008582f4 : LEA ECX,[EBP + -0x2c]
008582f7 : PUSH ECX
008582f8 : PUSH EDX
008582f9 : CALL 0x0081cfe0
008582fe : MOV dword ptr [EBP + -0x10],0x1
00858305 : MOV byte ptr [EBP + -0x4],BL
00858308 : LEA ECX,[EBP + -0x2c]
0085830b : CALL 0x00406560
00858310 : JMP 0x0085837b
00858312 : CMP EAX,0xa
00858315 : JL 0x00858365
00858317 : PUSH 0xc3f07c
0085831c : LEA ECX,[EBP + -0x2c]
0085831f : CALL 0x00406460
00858324 : MOV dword ptr [EBP + -0x4],0x3
0085832b : MOV ECX,dword ptr [0x0172491c]
00858331 : LEA EAX,[EBP + -0x2c]
00858334 : PUSH EAX
00858335 : PUSH ECX
00858336 : CALL 0x0081cfe0
0085833b : MOV dword ptr [EBP + -0x10],0x1
00858342 : MOV byte ptr [EBP + -0x4],BL
00858345 : CMP dword ptr [EBP + -0x14],0x8
00858349 : JC 0x00858353
0085834b : MOV ECX,dword ptr [EBP + -0x28]
0085834e : CALL 0x006f04e0
00858353 : XOR EDX,EDX
00858355 : MOV dword ptr [EBP + -0x14],0x7
0085835c : MOV dword ptr [EBP + -0x18],EBX
0085835f : MOV word ptr [EBP + -0x28],DX
00858363 : JMP 0x0085837b
00858365 : PUSH 0xc3f0b4
0085836a : MOV ECX,ESI
0085836c : CALL 0x00406460
00858371 : MOV dword ptr [EBP + -0x4],EBX
00858374 : MOV dword ptr [EBP + -0x10],0x1
0085837b : MOV EAX,ESI
0085837d : MOV ECX,dword ptr [EBP + -0xc]
00858380 : MOV dword ptr FS:[0x0],ECX
00858387 : POP ECX
00858388 : POP ESI
00858389 : POP EBX
0085838a : MOV ESP,EBP
0085838c : POP EBP
0085838d : RET 0x8
