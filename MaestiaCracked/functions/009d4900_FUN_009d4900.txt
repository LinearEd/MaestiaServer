PROGRAM  : Maestia.exe
FUNCTION : FUN_009d4900
ENTRY    : 009d4900
BODY     : [[009d4900, 009d4b68]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x009d4b1a) */
/* WARNING: Removing unreachable block (ram,0x009d4ae8) */

undefined4
FUN_009d4900(int *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined1 *param_5,uint *param_6,undefined4 param_7,undefined4 *param_8)

{
  int *piVar1;
  short sVar2;
  int iVar3;
  short *psVar4;
  undefined4 uVar5;
  __time64_t _Var6;
  uint local_34;
  uint local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5bf49;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_004437f0();
  if ((local_14 == *(int *)(iVar3 + 0x44)) ||
     (piVar1 = *(int **)(local_14 + 0x10), piVar1 == (int *)0x0)) {
    ExceptionList = local_10;
    return 0;
  }
  *param_5 = (char)piVar1[0x10];
  iVar3 = (**(code **)(*piVar1 + 0x3c))();
  if ((iVar3 != 0) || (iVar3 = (**(code **)(*piVar1 + 0x40))(), iVar3 != 0)) {
    sVar2 = (**(code **)(**(int **)(DAT_0172491c + 0x17c) + 0x1e4))();
    for (psVar4 = (short *)piVar1[0x54]; psVar4 != (short *)piVar1[0x55]; psVar4 = psVar4 + 4) {
      if (*psVar4 == sVar2) {
        iVar3 = *(int *)(psVar4 + 2);
        goto LAB_009d49c4;
      }
    }
    iVar3 = 0;
LAB_009d49c4:
    *param_6 = (uint)(iVar3 == 0);
  }
  (**(code **)(*param_1 + 0x58))();
  FUN_00405eb0(param_7,0,0xffffffff);
  local_8 = 0xffffffff;
  FUN_008f75f0();
  local_8 = 1;
  FUN_00405eb0();
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  FUN_00824a20();
  local_8 = 2;
  FUN_00405eb0();
  local_8 = 0xffffffff;
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  iVar3 = FUN_00407c10();
  if (iVar3 != -1) {
    FUN_0040e420();
    local_8 = 3;
    FUN_00405eb0();
    local_8 = 0xffffffff;
  }
  _Var6 = __time64((__time64_t *)0x0);
  if (_Var6 < CONCAT44(param_4,param_3)) {
    uVar5 = __alldiv();
    *param_8 = uVar5;
  }
  else {
    *param_8 = 0;
  }
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
009d4900 : PUSH EBP
009d4901 : MOV EBP,ESP
009d4903 : PUSH -0x1
009d4905 : PUSH 0xb5bf49
009d490a : MOV EAX,FS:[0x0]
009d4910 : PUSH EAX
009d4911 : SUB ESP,0x40
009d4914 : PUSH EBX
009d4915 : PUSH ESI
009d4916 : MOV EAX,[0x00d66fa0]
009d491b : XOR EAX,EBP
009d491d : PUSH EAX
009d491e : LEA EAX,[EBP + -0xc]
009d4921 : MOV FS:[0x0],EAX
009d4927 : MOV EBX,dword ptr [EBP + 0xc]
009d492a : MOV ESI,dword ptr [0x00d7c54c]
009d4930 : LEA EAX,[EBP + 0xc]
009d4933 : PUSH EAX
009d4934 : LEA ECX,[ESI + 0x40]
009d4937 : LEA EAX,[EBP + -0x10]
009d493a : MOV dword ptr [EBP + 0xc],EBX
009d493d : CALL 0x004437f0
009d4942 : MOV ESI,dword ptr [ESI + 0x44]
009d4945 : MOV EAX,dword ptr [EBP + -0x10]
009d4948 : CMP EAX,ESI
009d494a : JZ 0x009d4953
009d494c : MOV ESI,dword ptr [EAX + 0x10]
009d494f : TEST ESI,ESI
009d4951 : JNZ 0x009d4968
009d4953 : XOR EAX,EAX
009d4955 : MOV ECX,dword ptr [EBP + -0xc]
009d4958 : MOV dword ptr FS:[0x0],ECX
009d495f : POP ECX
009d4960 : POP ESI
009d4961 : POP EBX
009d4962 : MOV ESP,EBP
009d4964 : POP EBP
009d4965 : RET 0x20
009d4968 : MOV CL,byte ptr [ESI + 0x40]
009d496b : MOV EDX,dword ptr [EBP + 0x18]
009d496e : MOV byte ptr [EDX],CL
009d4970 : MOV EAX,dword ptr [ESI]
009d4972 : MOV EDX,dword ptr [EAX + 0x3c]
009d4975 : MOV ECX,ESI
009d4977 : CALL EDX
009d4979 : TEST EAX,EAX
009d497b : JNZ 0x009d498a
009d497d : MOV EAX,dword ptr [ESI]
009d497f : MOV EDX,dword ptr [EAX + 0x40]
009d4982 : MOV ECX,ESI
009d4984 : CALL EDX
009d4986 : TEST EAX,EAX
009d4988 : JZ 0x009d49d0
009d498a : MOV EAX,[0x0172491c]
009d498f : MOV ECX,dword ptr [EAX + 0x17c]
009d4995 : MOV EDX,dword ptr [ECX]
009d4997 : MOV EAX,dword ptr [EDX + 0x1e4]
009d499d : CALL EAX
009d499f : MOV ECX,dword ptr [ESI + 0x154]
009d49a5 : MOVZX EDX,AX
009d49a8 : MOV EAX,dword ptr [ESI + 0x150]
009d49ae : CMP EAX,ECX
009d49b0 : JZ 0x009d49c2
009d49b2 : CMP word ptr [EAX],DX
009d49b5 : JZ 0x009d4b40
009d49bb : ADD EAX,0x8
009d49be : CMP EAX,ECX
009d49c0 : JNZ 0x009d49b2
009d49c2 : XOR EAX,EAX
009d49c4 : MOV EDX,dword ptr [EBP + 0x1c]
009d49c7 : XOR ECX,ECX
009d49c9 : TEST EAX,EAX
009d49cb : SETZ CL
009d49ce : MOV dword ptr [EDX],ECX
009d49d0 : MOV ECX,dword ptr [EBP + 0x8]
009d49d3 : MOV EDX,dword ptr [EBP + 0x20]
009d49d6 : MOV EAX,dword ptr [ECX]
009d49d8 : MOV EAX,dword ptr [EAX + 0x58]
009d49db : PUSH EDX
009d49dc : PUSH EBX
009d49dd : CALL EAX
009d49df : MOV EAX,dword ptr [EBP + 0x20]
009d49e2 : SUB ESP,0x1c
009d49e5 : MOV ECX,ESP
009d49e7 : MOV dword ptr [EBP + 0xc],ESP
009d49ea : XOR EDX,EDX
009d49ec : OR EBX,0xffffffff
009d49ef : PUSH EBX
009d49f0 : PUSH EDX
009d49f1 : MOV dword ptr [ECX + 0x18],0x7
009d49f8 : MOV dword ptr [ECX + 0x14],0x0
009d49ff : PUSH EAX
009d4a00 : MOV word ptr [ECX + 0x4],DX
009d4a04 : CALL 0x00405eb0
009d4a09 : MOV dword ptr [EBP + -0x4],0x0
009d4a10 : MOV dword ptr [EBP + -0x4],EBX
009d4a13 : LEA ECX,[EBP + -0x2c]
009d4a16 : CALL 0x008f75f0
009d4a1b : ADD ESP,0x1c
009d4a1e : MOV dword ptr [EBP + -0x4],0x1
009d4a25 : MOV ECX,dword ptr [EBP + 0x20]
009d4a28 : PUSH EBX
009d4a29 : PUSH 0x0
009d4a2b : PUSH EAX
009d4a2c : CALL 0x00405eb0
009d4a31 : MOV dword ptr [EBP + -0x4],EBX
009d4a34 : CMP dword ptr [EBP + -0x14],0x8
009d4a38 : JC 0x009d4a42
009d4a3a : MOV ECX,dword ptr [EBP + -0x28]
009d4a3d : CALL 0x006f04e0
009d4a42 : MOV EAX,[0x0172491c]
009d4a47 : XOR ECX,ECX
009d4a49 : PUSH ECX
009d4a4a : LEA EDX,[ESI + 0x18]
009d4a4d : PUSH EAX
009d4a4e : LEA ESI,[EBP + -0x48]
009d4a51 : MOV dword ptr [EBP + -0x14],0x7
009d4a58 : MOV dword ptr [EBP + -0x18],0x0
009d4a5f : MOV word ptr [EBP + -0x28],CX
009d4a63 : CALL 0x00824a20
009d4a68 : MOV dword ptr [EBP + -0x4],0x2
009d4a6f : PUSH EBX
009d4a70 : PUSH 0x0
009d4a72 : PUSH EAX
009d4a73 : MOV ECX,EDI
009d4a75 : CALL 0x00405eb0
009d4a7a : MOV dword ptr [EBP + -0x4],EBX
009d4a7d : CMP dword ptr [EBP + -0x30],0x8
009d4a81 : JC 0x009d4a8b
009d4a83 : MOV ECX,dword ptr [EBP + -0x44]
009d4a86 : CALL 0x006f04e0
009d4a8b : MOV ESI,dword ptr [EDI + 0x14]
009d4a8e : PUSH 0x1
009d4a90 : LEA EDX,[EBP + 0x20]
009d4a93 : XOR ECX,ECX
009d4a95 : PUSH EDX
009d4a96 : XOR EAX,EAX
009d4a98 : MOV EDX,EDI
009d4a9a : MOV dword ptr [EBP + -0x30],0x7
009d4aa1 : MOV dword ptr [EBP + -0x34],0x0
009d4aa8 : MOV word ptr [EBP + -0x44],CX
009d4aac : MOV dword ptr [EBP + 0x20],0x40
009d4ab3 : CALL 0x00407c10
009d4ab8 : CMP EAX,EBX
009d4aba : JZ 0x009d4b04
009d4abc : LEA EDX,[EBP + -0x48]
009d4abf : INC EAX
009d4ac0 : PUSH EDX
009d4ac1 : MOV ECX,ESI
009d4ac3 : SUB ECX,EAX
009d4ac5 : PUSH EDI
009d4ac6 : MOV EDX,EAX
009d4ac8 : CALL 0x0040e420
009d4acd : MOV dword ptr [EBP + -0x4],0x3
009d4ad4 : PUSH EBX
009d4ad5 : PUSH 0x0
009d4ad7 : PUSH EAX
009d4ad8 : MOV ECX,EDI
009d4ada : CALL 0x00405eb0
009d4adf : MOV dword ptr [EBP + -0x4],EBX
009d4ae2 : CMP dword ptr [EBP + -0x30],0x8
009d4ae6 : JC 0x009d4af0
009d4ae8 : MOV ECX,dword ptr [EBP + -0x44]
009d4aeb : CALL 0x006f04e0
009d4af0 : XOR EAX,EAX
009d4af2 : MOV dword ptr [EBP + -0x30],0x7
009d4af9 : MOV dword ptr [EBP + -0x34],0x0
009d4b00 : MOV word ptr [EBP + -0x44],AX
009d4b04 : PUSH 0x0
009d4b06 : CALL 0x006381ab
009d4b0b : MOV ECX,dword ptr [EBP + 0x14]
009d4b0e : ADD ESP,0x4
009d4b11 : CMP ECX,EDX
009d4b13 : JL 0x009d4b48
009d4b15 : MOV ESI,dword ptr [EBP + 0x10]
009d4b18 : JG 0x009d4b1e
009d4b1a : CMP ESI,EAX
009d4b1c : JBE 0x009d4b48
009d4b1e : SUB ESI,EAX
009d4b20 : SBB ECX,EDX
009d4b22 : PUSH 0x0
009d4b24 : ADD ESI,0xe0f
009d4b2a : PUSH 0xe10
009d4b2f : ADC ECX,0x0
009d4b32 : PUSH ECX
009d4b33 : PUSH ESI
009d4b34 : CALL 0x0063c760
009d4b39 : MOV ECX,dword ptr [EBP + 0x24]
009d4b3c : MOV dword ptr [ECX],EAX
009d4b3e : JMP 0x009d4b51
009d4b40 : MOV EAX,dword ptr [EAX + 0x4]
009d4b43 : JMP 0x009d49c4
009d4b48 : MOV EDX,dword ptr [EBP + 0x24]
009d4b4b : MOV dword ptr [EDX],0x0
009d4b51 : MOV EAX,0x1
009d4b56 : MOV ECX,dword ptr [EBP + -0xc]
009d4b59 : MOV dword ptr FS:[0x0],ECX
009d4b60 : POP ECX
009d4b61 : POP ESI
009d4b62 : POP EBX
009d4b63 : MOV ESP,EBP
009d4b65 : POP EBP
009d4b66 : RET 0x20
