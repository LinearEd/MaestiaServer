PROGRAM  : Maestia.exe
FUNCTION : FUN_0055d6b0
ENTRY    : 0055d6b0
BODY     : [[0055d6b0, 0055d798]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055d6b0(void)

{
  int *piVar1;
  int iVar2;
  GRefCountImpl *this;
  undefined4 *puVar3;
  int in_ECX;
  GRefCountImpl *local_8;
  undefined4 local_4;
  
  local_8 = (GRefCountImpl *)0x105;
  iVar2 = FUN_00515d60(in_ECX,0x40,&local_8);
  if (iVar2 == 0) {
    local_8 = (GRefCountImpl *)0x0;
  }
  else {
    local_8 = (GRefCountImpl *)FUN_005e4470();
  }
  local_4 = 2;
  iVar2 = FUN_00515d60(in_ECX,0x2c,&local_4);
  if (iVar2 == 0) {
    this = (GRefCountImpl *)0x0;
  }
  else {
    this = (GRefCountImpl *)FUN_005e03a0(local_8,0);
  }
  local_4 = 0x146;
  puVar3 = (undefined4 *)FUN_00515d60(in_ECX,0x1c,&local_4);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    *puVar3 = 1;
    puVar3[1] = 0;
    puVar3[2] = 0;
    FUN_0051c250();
    puVar3[4] = 0x3f800000;
    if (this != (GRefCountImpl *)0x0) {
      GRefCountImpl::AddRef(this);
    }
    puVar3[5] = this;
    puVar3[6] = 0;
  }
  piVar1 = *(int **)(in_ECX + 0x18);
  if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
    FUN_00500860();
    FUN_00515cf0(piVar1);
  }
  *(undefined4 **)(in_ECX + 0x18) = puVar3;
  if (this != (GRefCountImpl *)0x0) {
    FUN_00524240();
  }
  if (local_8 != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(local_8);
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0055d6b0 : SUB ESP,0x8
0055d6b3 : PUSH EBX
0055d6b4 : PUSH EBP
0055d6b5 : PUSH ESI
0055d6b6 : PUSH EDI
0055d6b7 : LEA EAX,[ESP + 0x10]
0055d6bb : PUSH EAX
0055d6bc : MOV EBP,ECX
0055d6be : PUSH 0x40
0055d6c0 : PUSH EBP
0055d6c1 : MOV dword ptr [ESP + 0x1c],0x105
0055d6c9 : CALL 0x00515d60
0055d6ce : XOR EBX,EBX
0055d6d0 : CMP EAX,EBX
0055d6d2 : JZ 0x0055d6e1
0055d6d4 : MOV ECX,EAX
0055d6d6 : CALL 0x005e4470
0055d6db : MOV dword ptr [ESP + 0x10],EAX
0055d6df : JMP 0x0055d6e5
0055d6e1 : MOV dword ptr [ESP + 0x10],EBX
0055d6e5 : LEA ECX,[ESP + 0x14]
0055d6e9 : PUSH ECX
0055d6ea : PUSH 0x2c
0055d6ec : PUSH EBP
0055d6ed : MOV dword ptr [ESP + 0x20],0x2
0055d6f5 : CALL 0x00515d60
0055d6fa : CMP EAX,EBX
0055d6fc : JZ 0x0055d70f
0055d6fe : MOV EDX,dword ptr [ESP + 0x10]
0055d702 : PUSH EBX
0055d703 : PUSH EDX
0055d704 : MOV ECX,EAX
0055d706 : CALL 0x005e03a0
0055d70b : MOV EDI,EAX
0055d70d : JMP 0x0055d711
0055d70f : XOR EDI,EDI
0055d711 : LEA EAX,[ESP + 0x14]
0055d715 : PUSH EAX
0055d716 : PUSH 0x1c
0055d718 : PUSH EBP
0055d719 : MOV dword ptr [ESP + 0x20],0x146
0055d721 : CALL 0x00515d60
0055d726 : MOV ESI,EAX
0055d728 : CMP ESI,EBX
0055d72a : JZ 0x0055d758
0055d72c : LEA ECX,[ESI + 0xc]
0055d72f : MOV dword ptr [ESI],0x1
0055d735 : MOV dword ptr [ESI + 0x4],EBX
0055d738 : MOV dword ptr [ESI + 0x8],EBX
0055d73b : CALL 0x0051c250
0055d740 : FLD1
0055d742 : FSTP float ptr [ESI + 0x10]
0055d745 : CMP EDI,EBX
0055d747 : JZ 0x0055d750
0055d749 : MOV ECX,EDI
0055d74b : CALL 0x00523dd0
0055d750 : MOV dword ptr [ESI + 0x14],EDI
0055d753 : MOV dword ptr [ESI + 0x18],EBX
0055d756 : JMP 0x0055d75a
0055d758 : XOR ESI,ESI
0055d75a : MOV EBX,dword ptr [EBP + 0x18]
0055d75d : TEST EBX,EBX
0055d75f : JZ 0x0055d773
0055d761 : ADD dword ptr [EBX],-0x1
0055d764 : JNZ 0x0055d773
0055d766 : MOV ECX,EBX
0055d768 : CALL 0x00500860
0055d76d : PUSH EBX
0055d76e : CALL 0x00515cf0
0055d773 : MOV dword ptr [EBP + 0x18],ESI
0055d776 : TEST EDI,EDI
0055d778 : JZ 0x0055d781
0055d77a : MOV ECX,EDI
0055d77c : CALL 0x00524240
0055d781 : MOV ECX,dword ptr [ESP + 0x10]
0055d785 : POP EDI
0055d786 : POP ESI
0055d787 : POP EBP
0055d788 : POP EBX
0055d789 : TEST ECX,ECX
0055d78b : JZ 0x0055d795
0055d78d : ADD ESP,0x8
0055d790 : JMP 0x004ff7e0
0055d795 : ADD ESP,0x8
0055d798 : RET
