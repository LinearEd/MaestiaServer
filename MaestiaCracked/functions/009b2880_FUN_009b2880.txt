PROGRAM  : Maestia.exe
FUNCTION : FUN_009b2880
ENTRY    : 009b2880
BODY     : [[009b2880, 009b2a05]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_009b2880(void)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int *in_ECX;
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60c44;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = (**(code **)(*in_ECX + 0x20))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (iVar3 == 0) {
    cVar2 = (char)((uint)in_ECX[4] >> 0x10);
    if (((cVar2 != '2') && (cVar2 != -0x74)) && (cVar2 != '3')) {
      iVar3 = FUN_004049b0(in_ECX[4]);
      if (iVar3 != 0) {
        iVar4 = FUN_00406f20();
        if (iVar4 != 0) {
          if ((uint)*(byte *)(iVar3 + 0x40) <= *(uint *)(iVar4 + 0x1c0)) {
            if (*(char *)((int)*(int **)(*DAT_00da9894 + 0x1c4) + 0x32) == '\0') {
              (**(code **)(**(int **)(*DAT_00da9894 + 0x1c4) + 0x18))(0,300);
              if (DAT_0172491c != 0) {
                FUN_00ac00f0();
              }
            }
            FUN_008f7eb0();
            FUN_00ac0130(*(undefined4 *)(*DAT_00da9894 + 0x1c4),in_ECX[4]);
            ExceptionList = local_10;
            return 1;
          }
          if ((*DAT_00da9894 != 0) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
            FUN_00406460(L"IDS_ERROR_OVER_LEVEL_ITEM_PREVIEW");
            local_8 = 0;
            piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
            uVar5 = FUN_0081d120(local_2c);
            local_8._0_1_ = 1;
            (**(code **)(*piVar1 + 0x44))(uVar5,3);
            local_8 = (uint)local_8._1_3_ << 8;
            FUN_00406560();
            local_8 = 0xffffffff;
            FUN_00406560();
          }
        }
      }
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
009b2880 : PUSH EBP
009b2881 : MOV EBP,ESP
009b2883 : PUSH -0x1
009b2885 : PUSH 0xb60c44
009b288a : MOV EAX,FS:[0x0]
009b2890 : PUSH EAX
009b2891 : SUB ESP,0x38
009b2894 : PUSH ESI
009b2895 : PUSH EDI
009b2896 : MOV EAX,[0x00d66fa0]
009b289b : XOR EAX,EBP
009b289d : PUSH EAX
009b289e : LEA EAX,[EBP + -0xc]
009b28a1 : MOV FS:[0x0],EAX
009b28a7 : MOV EDI,ECX
009b28a9 : MOV EAX,dword ptr [EDI]
009b28ab : MOV EDX,dword ptr [EAX + 0x20]
009b28ae : CALL EDX
009b28b0 : TEST EAX,EAX
009b28b2 : JNZ 0x009b2993
009b28b8 : MOV ECX,dword ptr [EDI + 0x10]
009b28bb : MOV EAX,ECX
009b28bd : SHR EAX,0x10
009b28c0 : CMP AL,0x32
009b28c2 : JZ 0x009b2993
009b28c8 : CMP AL,0x8c
009b28ca : JZ 0x009b2993
009b28d0 : CMP AL,0x33
009b28d2 : JZ 0x009b2993
009b28d8 : PUSH ECX
009b28d9 : CALL 0x004049b0
009b28de : MOV ESI,EAX
009b28e0 : ADD ESP,0x4
009b28e3 : TEST ESI,ESI
009b28e5 : JZ 0x009b2993
009b28eb : MOV EAX,[0x0172491c]
009b28f0 : MOV EAX,dword ptr [EAX + 0x17c]
009b28f6 : MOV EAX,dword ptr [EAX + 0x16d8]
009b28fc : LEA ECX,[ESI + 0x128]
009b2902 : MOV EDX,EAX
009b2904 : CALL 0x00406f20
009b2909 : TEST EAX,EAX
009b290b : JZ 0x009b2993
009b2911 : MOVZX ECX,byte ptr [ESI + 0x40]
009b2915 : CMP ECX,dword ptr [EAX + 0x1c0]
009b291b : JBE 0x009b29a6
009b2921 : MOV EDX,dword ptr [0x00da9894]
009b2927 : MOV EAX,dword ptr [EDX]
009b2929 : TEST EAX,EAX
009b292b : JZ 0x009b2993
009b292d : CMP dword ptr [EAX + 0x1a8],0x0
009b2934 : JZ 0x009b2993
009b2936 : PUSH 0xc8de28
009b293b : LEA ECX,[EBP + -0x28]
009b293e : CALL 0x00406460
009b2943 : MOV dword ptr [EBP + -0x4],0x0
009b294a : MOV EAX,[0x00da9894]
009b294f : MOV EAX,dword ptr [EAX]
009b2951 : MOV ESI,dword ptr [EAX + 0x1a8]
009b2957 : LEA ECX,[EBP + -0x28]
009b295a : PUSH ECX
009b295b : MOV ECX,dword ptr [0x0172491c]
009b2961 : LEA EDI,[EBP + -0x44]
009b2964 : CALL 0x0081d120
009b2969 : MOV byte ptr [EBP + -0x4],0x1
009b296d : MOV EDX,dword ptr [ESI]
009b296f : PUSH 0x3
009b2971 : PUSH EAX
009b2972 : MOV EAX,dword ptr [EDX + 0x44]
009b2975 : MOV ECX,ESI
009b2977 : CALL EAX
009b2979 : MOV byte ptr [EBP + -0x4],0x0
009b297d : MOV ECX,EDI
009b297f : CALL 0x00406560
009b2984 : MOV dword ptr [EBP + -0x4],0xffffffff
009b298b : LEA ECX,[EBP + -0x28]
009b298e : CALL 0x00406560
009b2993 : XOR AL,AL
009b2995 : MOV ECX,dword ptr [EBP + -0xc]
009b2998 : MOV dword ptr FS:[0x0],ECX
009b299f : POP ECX
009b29a0 : POP EDI
009b29a1 : POP ESI
009b29a2 : MOV ESP,EBP
009b29a4 : POP EBP
009b29a5 : RET
009b29a6 : MOV ECX,dword ptr [0x00da9894]
009b29ac : MOV EDX,dword ptr [ECX]
009b29ae : MOV ECX,dword ptr [EDX + 0x1c4]
009b29b4 : CMP byte ptr [ECX + 0x32],0x0
009b29b8 : JNZ 0x009b29d6
009b29ba : MOV EAX,dword ptr [ECX]
009b29bc : MOV EDX,dword ptr [EAX + 0x18]
009b29bf : PUSH 0x12c
009b29c4 : PUSH 0x0
009b29c6 : CALL EDX
009b29c8 : CMP dword ptr [0x0172491c],0x0
009b29cf : JZ 0x009b29d6
009b29d1 : CALL 0x00ac00f0
009b29d6 : CALL 0x008f7eb0
009b29db : MOV EAX,dword ptr [EDI + 0x10]
009b29de : MOV ECX,dword ptr [0x00da9894]
009b29e4 : MOV EDX,dword ptr [ECX]
009b29e6 : PUSH EAX
009b29e7 : MOV EAX,dword ptr [EDX + 0x1c4]
009b29ed : PUSH EAX
009b29ee : CALL 0x00ac0130
009b29f3 : MOV AL,0x1
009b29f5 : MOV ECX,dword ptr [EBP + -0xc]
009b29f8 : MOV dword ptr FS:[0x0],ECX
009b29ff : POP ECX
009b2a00 : POP EDI
009b2a01 : POP ESI
009b2a02 : MOV ESP,EBP
009b2a04 : POP EBP
009b2a05 : RET
