PROGRAM  : Maestia.exe
FUNCTION : FUN_0041f950
ENTRY    : 0041f950
BODY     : [[0041f950, 0041fa05]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0041f950(uint param_1,undefined4 param_2)

{
  int in_ECX;
  uint uVar1;
  
  if (-*(int *)(in_ECX + 0x14) - 1U <= param_1) {
    FUN_00622ecf();
  }
  if (param_1 != 0) {
    uVar1 = *(int *)(in_ECX + 0x14) + param_1;
    if (0x7ffffffe < uVar1) {
      FUN_00622ecf();
    }
    if (*(uint *)(in_ECX + 0x18) < uVar1) {
      FUN_00406170(uVar1,*(undefined4 *)(in_ECX + 0x14));
    }
    else if (uVar1 == 0) {
      *(undefined4 *)(in_ECX + 0x14) = 0;
      if (*(uint *)(in_ECX + 0x18) < 8) {
        *(undefined2 *)(in_ECX + 4) = 0;
        return;
      }
      **(undefined2 **)(in_ECX + 4) = 0;
      return;
    }
    if (uVar1 != 0) {
      FUN_004132e0(*(undefined4 *)(in_ECX + 0x14),param_1,param_2);
      *(uint *)(in_ECX + 0x14) = uVar1;
      if (7 < *(uint *)(in_ECX + 0x18)) {
        *(undefined2 *)(*(int *)(in_ECX + 4) + uVar1 * 2) = 0;
        return;
      }
      *(undefined2 *)(in_ECX + 4 + uVar1 * 2) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0041f950 : PUSH EBP
0041f951 : MOV EBP,ESP
0041f953 : PUSH EBX
0041f954 : MOV EBX,dword ptr [EBP + 0x8]
0041f957 : PUSH ESI
0041f958 : OR EAX,0xffffffff
0041f95b : MOV ESI,ECX
0041f95d : SUB EAX,dword ptr [ESI + 0x14]
0041f960 : CMP EAX,EBX
0041f962 : JA 0x0041f969
0041f964 : CALL 0x00622ecf
0041f969 : TEST EBX,EBX
0041f96b : JBE 0x0041f9fe
0041f971 : PUSH EDI
0041f972 : MOV EDI,dword ptr [ESI + 0x14]
0041f975 : ADD EDI,EBX
0041f977 : CMP EDI,0x7ffffffe
0041f97d : JBE 0x0041f984
0041f97f : CALL 0x00622ecf
0041f984 : MOV EAX,dword ptr [ESI + 0x18]
0041f987 : CMP EAX,EDI
0041f989 : JNC 0x0041f9c6
0041f98b : MOV ECX,dword ptr [ESI + 0x14]
0041f98e : PUSH ECX
0041f98f : PUSH EDI
0041f990 : MOV ECX,ESI
0041f992 : CALL 0x00406170
0041f997 : TEST EDI,EDI
0041f999 : JBE 0x0041f9fd
0041f99b : MOV EAX,dword ptr [EBP + 0xc]
0041f99e : MOV ECX,dword ptr [ESI + 0x14]
0041f9a1 : PUSH EAX
0041f9a2 : PUSH EBX
0041f9a3 : PUSH ECX
0041f9a4 : MOV ECX,ESI
0041f9a6 : CALL 0x004132e0
0041f9ab : CMP dword ptr [ESI + 0x18],0x8
0041f9af : MOV dword ptr [ESI + 0x14],EDI
0041f9b2 : JC 0x0041f9f4
0041f9b4 : MOV EAX,dword ptr [ESI + 0x4]
0041f9b7 : XOR EDX,EDX
0041f9b9 : MOV word ptr [EAX + EDI*0x2],DX
0041f9bd : POP EDI
0041f9be : MOV EAX,ESI
0041f9c0 : POP ESI
0041f9c1 : POP EBX
0041f9c2 : POP EBP
0041f9c3 : RET 0x8
0041f9c6 : TEST EDI,EDI
0041f9c8 : JNZ 0x0041f999
0041f9ca : MOV dword ptr [ESI + 0x14],EDI
0041f9cd : CMP EAX,0x8
0041f9d0 : JC 0x0041f9e3
0041f9d2 : MOV EAX,dword ptr [ESI + 0x4]
0041f9d5 : XOR EDX,EDX
0041f9d7 : POP EDI
0041f9d8 : MOV word ptr [EAX],DX
0041f9db : MOV EAX,ESI
0041f9dd : POP ESI
0041f9de : POP EBX
0041f9df : POP EBP
0041f9e0 : RET 0x8
0041f9e3 : LEA EAX,[ESI + 0x4]
0041f9e6 : XOR EDX,EDX
0041f9e8 : POP EDI
0041f9e9 : MOV word ptr [EAX],DX
0041f9ec : MOV EAX,ESI
0041f9ee : POP ESI
0041f9ef : POP EBX
0041f9f0 : POP EBP
0041f9f1 : RET 0x8
0041f9f4 : LEA EAX,[ESI + 0x4]
0041f9f7 : XOR EDX,EDX
0041f9f9 : MOV word ptr [EAX + EDI*0x2],DX
0041f9fd : POP EDI
0041f9fe : MOV EAX,ESI
0041fa00 : POP ESI
0041fa01 : POP EBX
0041fa02 : POP EBP
0041fa03 : RET 0x8
