PROGRAM  : Maestia.exe
FUNCTION : FUN_008768b0
ENTRY    : 008768b0
BODY     : [[008768b0, 00876973]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_008768b0(int param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1bf46;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar1 = *(int *)(param_1 + 0x40);
  if (iVar1 == 0) {
    iVar3 = FUN_00406460(&DAT_00c435e8);
    local_8 = 1;
  }
  else {
    iVar3 = iVar1 + 0xc;
  }
  *(undefined4 *)(param_2 + 0x18) = 7;
  *(undefined4 *)(param_2 + 0x14) = 0;
  *(undefined2 *)(param_2 + 4) = 0;
  FUN_00405eb0(iVar3,0,0xffffffff);
  local_8 = 0;
  if ((iVar1 == 0) && (7 < local_18)) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0(uVar2);
  }
  ExceptionList = local_10;
  return param_2;
}



============================================================
DISASSEMBLY
============================================================
008768b0 : PUSH EBP
008768b1 : MOV EBP,ESP
008768b3 : PUSH -0x1
008768b5 : PUSH 0xb1bf46
008768ba : MOV EAX,FS:[0x0]
008768c0 : PUSH EAX
008768c1 : SUB ESP,0x20
008768c4 : PUSH EBX
008768c5 : PUSH ESI
008768c6 : MOV EAX,[0x00d66fa0]
008768cb : XOR EAX,EBP
008768cd : PUSH EAX
008768ce : LEA EAX,[EBP + -0xc]
008768d1 : MOV FS:[0x0],EAX
008768d7 : MOV ESI,dword ptr [EBP + 0xc]
008768da : MOV EAX,dword ptr [EBP + 0x8]
008768dd : XOR EBX,EBX
008768df : MOV dword ptr [EBP + -0x10],EBX
008768e2 : MOV EAX,dword ptr [EAX + 0x40]
008768e5 : TEST EAX,EAX
008768e7 : JZ 0x008768ee
008768e9 : ADD EAX,0xc
008768ec : JMP 0x00876906
008768ee : PUSH 0xc435e8
008768f3 : LEA ECX,[EBP + -0x2c]
008768f6 : CALL 0x00406460
008768fb : MOV EBX,0x1
00876900 : MOV dword ptr [EBP + -0x4],EBX
00876903 : MOV dword ptr [EBP + -0x10],EBX
00876906 : XOR ECX,ECX
00876908 : PUSH -0x1
0087690a : PUSH ECX
0087690b : MOV dword ptr [ESI + 0x18],0x7
00876912 : MOV dword ptr [ESI + 0x14],0x0
00876919 : MOV word ptr [ESI + 0x4],CX
0087691d : PUSH EAX
0087691e : MOV ECX,ESI
00876920 : CALL 0x00405eb0
00876925 : OR EBX,0x2
00876928 : MOV dword ptr [EBP + -0x10],EBX
0087692b : MOV dword ptr [EBP + -0x4],0x0
00876932 : TEST BL,0x1
00876935 : JZ 0x0087695f
00876937 : AND EBX,0xfffffffe
0087693a : MOV dword ptr [EBP + -0x10],EBX
0087693d : CMP dword ptr [EBP + -0x14],0x8
00876941 : JC 0x0087694b
00876943 : MOV ECX,dword ptr [EBP + -0x28]
00876946 : CALL 0x006f04e0
0087694b : XOR EDX,EDX
0087694d : MOV dword ptr [EBP + -0x14],0x7
00876954 : MOV dword ptr [EBP + -0x18],0x0
0087695b : MOV word ptr [EBP + -0x28],DX
0087695f : MOV EAX,ESI
00876961 : MOV ECX,dword ptr [EBP + -0xc]
00876964 : MOV dword ptr FS:[0x0],ECX
0087696b : POP ECX
0087696c : POP ESI
0087696d : POP EBX
0087696e : MOV ESP,EBP
00876970 : POP EBP
00876971 : RET 0x8
