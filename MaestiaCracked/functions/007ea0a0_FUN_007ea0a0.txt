PROGRAM  : Maestia.exe
FUNCTION : FUN_007ea0a0
ENTRY    : 007ea0a0
BODY     : [[007ea0a0, 007ea307]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007ea0a0(int param_1,int param_2,int param_3,float *param_4,undefined4 param_5,int param_6,
                 int param_7,undefined4 param_8,undefined4 param_9)

{
  int iVar1;
  float *pfVar2;
  float *pfVar3;
  float local_c8 [16];
  undefined1 local_88 [24];
  float local_70 [4];
  float local_60;
  float local_5c;
  float local_58;
  float local_50;
  float local_4c;
  float local_48;
  float local_40;
  undefined4 local_3c;
  undefined4 local_38;
  float local_2c;
  undefined4 local_28;
  undefined4 local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  
  local_20 = 0.0;
  local_1c = 0.0;
  local_18 = 0.0;
  local_2c = 0.0;
  local_28 = 0;
  local_24 = 0;
  local_14 = 0.0;
  local_10 = 0.0;
  local_c = 0.0;
  if (*(char *)(param_1 + 0xb1) == '\0') {
    local_14 = (((float)param_2 * 2.0) / (float)param_6 - 1.0) / *param_4;
    pfVar2 = (float *)&DAT_00d72178;
    pfVar3 = local_70;
    for (iVar1 = 0x10; iVar1 != 0; iVar1 = iVar1 + -1) {
      *pfVar3 = *pfVar2;
      pfVar2 = pfVar2 + 1;
      pfVar3 = pfVar3 + 1;
    }
    local_10 = -((((float)param_3 * 2.0) / (float)param_7 - 1.0) / param_4[5]);
    local_c = 1.0;
    D3DXMatrixMultiply(local_c8,local_70,param_5);
    pfVar2 = local_c8;
    pfVar3 = local_70;
    for (iVar1 = 0x10; iVar1 != 0; iVar1 = iVar1 + -1) {
      *pfVar3 = *pfVar2;
      pfVar2 = pfVar2 + 1;
      pfVar3 = pfVar3 + 1;
    }
    D3DXMatrixInverse(local_70,0,local_70);
    local_20 = local_50 * local_c + local_60 * local_10 + local_70[0] * local_14;
    local_1c = local_4c * local_c + local_5c * local_10 + local_70[1] * local_14;
    local_18 = local_48 * local_c + local_58 * local_10 + local_70[2] * local_14;
    local_2c = local_40;
    local_28 = local_3c;
    local_24 = local_38;
  }
  else {
    (**(code **)(**(int **)(DAT_017251ac + 0x18) + 0xc0))(*(int **)(DAT_017251ac + 0x18),local_88);
    D3DXMatrixInverse(local_70,0,param_5);
    pfVar2 = (float *)&DAT_00d72178;
    pfVar3 = local_c8;
    for (iVar1 = 0x10; iVar1 != 0; iVar1 = iVar1 + -1) {
      *pfVar3 = *pfVar2;
      pfVar2 = pfVar2 + 1;
      pfVar3 = pfVar3 + 1;
    }
    local_14 = local_40;
    local_10 = (float)local_3c;
    local_c = (float)local_38;
    D3DXVec3Unproject(&local_20,&local_14,local_88,param_4,param_5,local_c8);
    local_14 = (float)param_2;
    local_10 = (float)param_3;
    local_c = 0.0;
    D3DXVec3Unproject(&local_2c,&local_14,local_88,param_4,param_5,local_c8);
  }
  FUN_007e8450(&local_20,&local_2c,param_9);
  return;
}



============================================================
DISASSEMBLY
============================================================
007ea0a0 : PUSH EBP
007ea0a1 : MOV EBP,ESP
007ea0a3 : SUB ESP,0xc8
007ea0a9 : XORPS XMM0,XMM0
007ea0ac : MOV EAX,dword ptr [EBP + 0x8]
007ea0af : CMP byte ptr [EAX + 0xb1],0x0
007ea0b6 : PUSH EBX
007ea0b7 : MOV EBX,dword ptr [EBP + 0x14]
007ea0ba : PUSH ESI
007ea0bb : PUSH EDI
007ea0bc : MOVSS dword ptr [EBP + -0x1c],XMM0
007ea0c1 : MOVSS dword ptr [EBP + -0x18],XMM0
007ea0c6 : MOVSS dword ptr [EBP + -0x14],XMM0
007ea0cb : MOVSS dword ptr [EBP + -0x28],XMM0
007ea0d0 : MOVSS dword ptr [EBP + -0x24],XMM0
007ea0d5 : MOVSS dword ptr [EBP + -0x20],XMM0
007ea0da : MOVSS dword ptr [EBP + -0x10],XMM0
007ea0df : MOVSS dword ptr [EBP + -0xc],XMM0
007ea0e4 : MOVSS dword ptr [EBP + -0x8],XMM0
007ea0e9 : JZ 0x007ea1a7
007ea0ef : MOV ECX,dword ptr [0x017251ac]
007ea0f5 : MOV EAX,dword ptr [ECX + 0x18]
007ea0f8 : MOV EDX,dword ptr [EAX]
007ea0fa : MOV EDX,dword ptr [EDX + 0xc0]
007ea100 : LEA ECX,[EBP + 0xffffff7c]
007ea106 : PUSH ECX
007ea107 : PUSH EAX
007ea108 : CALL EDX
007ea10a : MOV EAX,dword ptr [EBP + 0x18]
007ea10d : PUSH EAX
007ea10e : PUSH 0x0
007ea110 : LEA ECX,[EBP + -0x6c]
007ea113 : PUSH ECX
007ea114 : CALL 0x004ff73a
007ea119 : MOVSS XMM0,dword ptr [EBP + -0x3c]
007ea11e : MOV ECX,0x10
007ea123 : MOV ESI,0xd72178
007ea128 : LEA EDI,[EBP + 0xffffff3c]
007ea12e : MOVSD.REP ES:EDI,ESI
007ea130 : MOV ESI,dword ptr [EBP + 0x18]
007ea133 : LEA EDX,[EBP + 0xffffff3c]
007ea139 : PUSH EDX
007ea13a : PUSH ESI
007ea13b : PUSH EBX
007ea13c : LEA EAX,[EBP + 0xffffff7c]
007ea142 : PUSH EAX
007ea143 : MOVSS dword ptr [EBP + -0x10],XMM0
007ea148 : MOVSS XMM0,dword ptr [EBP + -0x38]
007ea14d : LEA ECX,[EBP + -0x10]
007ea150 : PUSH ECX
007ea151 : LEA EDX,[EBP + -0x1c]
007ea154 : MOVSS dword ptr [EBP + -0xc],XMM0
007ea159 : MOVSS XMM0,dword ptr [EBP + -0x34]
007ea15e : PUSH EDX
007ea15f : MOVSS dword ptr [EBP + -0x8],XMM0
007ea164 : CALL 0x00664c84
007ea169 : CVTSI2SS XMM0,dword ptr [EBP + 0xc]
007ea16e : LEA EAX,[EBP + 0xffffff3c]
007ea174 : PUSH EAX
007ea175 : PUSH ESI
007ea176 : PUSH EBX
007ea177 : LEA ECX,[EBP + 0xffffff7c]
007ea17d : PUSH ECX
007ea17e : MOVSS dword ptr [EBP + -0x10],XMM0
007ea183 : CVTSI2SS XMM0,dword ptr [EBP + 0x10]
007ea188 : LEA EDX,[EBP + -0x10]
007ea18b : PUSH EDX
007ea18c : LEA EAX,[EBP + -0x28]
007ea18f : MOVSS dword ptr [EBP + -0xc],XMM0
007ea194 : XORPS XMM0,XMM0
007ea197 : PUSH EAX
007ea198 : MOVSS dword ptr [EBP + -0x8],XMM0
007ea19d : CALL 0x00664c84
007ea1a2 : JMP 0x007ea2e8
007ea1a7 : MOVSS XMM1,dword ptr [0x00cdf144]
007ea1af : CVTSI2SS XMM2,dword ptr [EBP + 0xc]
007ea1b4 : CVTSI2SS XMM0,dword ptr [EBP + 0x1c]
007ea1b9 : MULSS XMM2,XMM1
007ea1bd : DIVSS XMM2,XMM0
007ea1c1 : MOVSS XMM0,dword ptr [0x00c10fc4]
007ea1c9 : SUBSS XMM2,XMM0
007ea1cd : DIVSS XMM2,dword ptr [EBX]
007ea1d1 : MOVSS dword ptr [EBP + -0x10],XMM2
007ea1d6 : CVTSI2SS XMM2,dword ptr [EBP + 0x10]
007ea1db : MULSS XMM2,XMM1
007ea1df : CVTSI2SS XMM1,dword ptr [EBP + 0x20]
007ea1e4 : MOV ECX,0x10
007ea1e9 : MOV ESI,0xd72178
007ea1ee : LEA EDI,[EBP + -0x6c]
007ea1f1 : MOVSD.REP ES:EDI,ESI
007ea1f3 : MOV ECX,dword ptr [EBP + 0x18]
007ea1f6 : DIVSS XMM2,XMM1
007ea1fa : PUSH ECX
007ea1fb : LEA EDX,[EBP + -0x6c]
007ea1fe : SUBSS XMM2,XMM0
007ea202 : DIVSS XMM2,dword ptr [EBX + 0x14]
007ea207 : XORPS XMM2,xmmword ptr [0x00cdf0c0]
007ea20e : PUSH EDX
007ea20f : LEA EAX,[EBP + 0xffffff3c]
007ea215 : PUSH EAX
007ea216 : MOVSS dword ptr [EBP + -0xc],XMM2
007ea21b : MOVSS dword ptr [EBP + -0x8],XMM0
007ea220 : CALL 0x004ff752
007ea225 : MOV ECX,0x10
007ea22a : LEA ESI,[EBP + 0xffffff3c]
007ea230 : LEA EDI,[EBP + -0x6c]
007ea233 : MOVSD.REP ES:EDI,ESI
007ea235 : LEA ECX,[EBP + -0x6c]
007ea238 : PUSH ECX
007ea239 : PUSH 0x0
007ea23b : MOV EDX,ECX
007ea23d : PUSH EDX
007ea23e : CALL 0x004ff73a
007ea243 : MOVSS XMM0,dword ptr [EBP + -0x8]
007ea248 : MOVSS XMM1,dword ptr [EBP + -0xc]
007ea24d : MOVSS XMM3,dword ptr [EBP + -0x4c]
007ea252 : MOVSS XMM2,dword ptr [EBP + -0x5c]
007ea257 : MOVSS XMM4,dword ptr [EBP + -0x6c]
007ea25c : MULSS XMM3,XMM0
007ea260 : MULSS XMM2,XMM1
007ea264 : ADDSS XMM3,XMM2
007ea268 : MOVSS XMM2,dword ptr [EBP + -0x10]
007ea26d : MULSS XMM4,XMM2
007ea271 : ADDSS XMM3,XMM4
007ea275 : MOVSS XMM4,dword ptr [EBP + -0x58]
007ea27a : MOVSS dword ptr [EBP + -0x1c],XMM3
007ea27f : MOVSS XMM3,dword ptr [EBP + -0x48]
007ea284 : MULSS XMM3,XMM0
007ea288 : MULSS XMM4,XMM1
007ea28c : ADDSS XMM3,XMM4
007ea290 : MOVSS XMM4,dword ptr [EBP + -0x68]
007ea295 : MULSS XMM4,XMM2
007ea299 : ADDSS XMM3,XMM4
007ea29d : MOVSS dword ptr [EBP + -0x18],XMM3
007ea2a2 : MOVSS XMM3,dword ptr [EBP + -0x44]
007ea2a7 : MULSS XMM3,XMM0
007ea2ab : MOVSS XMM0,dword ptr [EBP + -0x54]
007ea2b0 : MULSS XMM0,XMM1
007ea2b4 : ADDSS XMM3,XMM0
007ea2b8 : MOVSS XMM0,dword ptr [EBP + -0x64]
007ea2bd : MULSS XMM0,XMM2
007ea2c1 : ADDSS XMM3,XMM0
007ea2c5 : MOVSS XMM0,dword ptr [EBP + -0x3c]
007ea2ca : MOVSS dword ptr [EBP + -0x28],XMM0
007ea2cf : MOVSS XMM0,dword ptr [EBP + -0x38]
007ea2d4 : MOVSS dword ptr [EBP + -0x24],XMM0
007ea2d9 : MOVSS XMM0,dword ptr [EBP + -0x34]
007ea2de : MOVSS dword ptr [EBP + -0x14],XMM3
007ea2e3 : MOVSS dword ptr [EBP + -0x20],XMM0
007ea2e8 : MOV EAX,dword ptr [EBP + 0x28]
007ea2eb : PUSH EAX
007ea2ec : LEA ECX,[EBP + -0x28]
007ea2ef : PUSH ECX
007ea2f0 : MOV ECX,dword ptr [EBP + 0x24]
007ea2f3 : LEA EDX,[EBP + -0x1c]
007ea2f6 : PUSH EDX
007ea2f7 : MOV EDX,dword ptr [EBP + 0x8]
007ea2fa : CALL 0x007e8450
007ea2ff : POP EDI
007ea300 : POP ESI
007ea301 : POP EBX
007ea302 : MOV ESP,EBP
007ea304 : POP EBP
007ea305 : RET 0x24
