PROGRAM  : Maestia.exe
FUNCTION : FUN_006a1170
ENTRY    : 006a1170
BODY     : [[006a1170, 006a1348]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a1170(int param_1)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  undefined1 *_Dst;
  int iVar5;
  char *pcVar6;
  int local_24;
  char *local_20 [8];
  
  local_24 = 0;
  local_20[0] = (char *)0x0;
  local_20[1] = (undefined1 *)0x0;
  local_20[2] = (char *)0x0;
  local_20[3] = (char *)0x0;
  *(undefined4 *)(param_1 + 0xc) = 0;
  iVar3 = FUN_006a0700("SLANT");
  if (((iVar3 != 0) && (*(char *)(iVar3 + 4) != '\0')) &&
     ((cVar2 = **(char **)(iVar3 + 8), cVar2 == 'O' ||
      (((cVar2 == 'o' || (cVar2 == 'I')) || (cVar2 == 'i')))))) {
    *(undefined4 *)(param_1 + 0xc) = 1;
    if ((**(char **)(iVar3 + 8) == 'O') || (local_20[2] = "Italic", **(char **)(iVar3 + 8) == 'o'))
    {
      local_20[2] = "Oblique";
    }
  }
  iVar3 = FUN_006a0700("WEIGHT_NAME");
  if (((iVar3 != 0) && (*(char *)(iVar3 + 4) != '\0')) &&
     ((**(char **)(iVar3 + 8) == 'B' || (**(char **)(iVar3 + 8) == 'b')))) {
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 2;
    local_20[1] = "Bold";
  }
  iVar3 = FUN_006a0700("SETWIDTH_NAME");
  if ((iVar3 != 0) && (*(char *)(iVar3 + 4) != '\0')) {
    cVar2 = **(char **)(iVar3 + 8);
    if ((cVar2 != '\0') && ((cVar2 != 'N' && (cVar2 != 'n')))) {
      local_20[3] = *(char **)(iVar3 + 8);
    }
  }
  iVar3 = FUN_006a0700("ADD_STYLE_NAME");
  if ((iVar3 != 0) && (*(char *)(iVar3 + 4) != '\0')) {
    cVar2 = **(char **)(iVar3 + 8);
    if ((cVar2 != '\0') && ((cVar2 != 'N' && (cVar2 != 'n')))) {
      local_20[0] = *(char **)(iVar3 + 8);
    }
  }
  pcVar6 = (char *)0x0;
  iVar3 = 0;
  do {
    pcVar4 = *(char **)((int)local_20 + iVar3);
    *(undefined4 *)((int)local_20 + iVar3 + 0x10) = 0;
    if (pcVar4 != (char *)0x0) {
      pcVar1 = pcVar4 + 1;
      do {
        cVar2 = *pcVar4;
        pcVar4 = pcVar4 + 1;
      } while (cVar2 != '\0');
      *(int *)((int)local_20 + iVar3 + 0x10) = (int)pcVar4 - (int)pcVar1;
      pcVar6 = pcVar6 + ((int)pcVar4 - (int)pcVar1) + 1;
    }
    iVar3 = iVar3 + 4;
  } while (iVar3 < 0x10);
  if (pcVar6 == (char *)0x0) {
    local_20[0] = "Regular";
    pcVar4 = "Regular";
    do {
      pcVar6 = pcVar4;
      pcVar4 = pcVar6 + 1;
    } while (*pcVar6 != '\0');
    local_20[4] = pcVar6 + -0xbd91c4;
    pcVar6 = pcVar6 + -0xbd91c3;
  }
  _Dst = (undefined1 *)FUN_00688c00(*(undefined4 *)(param_1 + 100),pcVar6,&local_24);
  *(undefined1 **)(param_1 + 0x18) = _Dst;
  if (local_24 == 0) {
    iVar3 = 0;
    do {
      pcVar6 = local_20[iVar3];
      pcVar4 = local_20[iVar3 + 4];
      if (pcVar6 != (char *)0x0) {
        if (_Dst != *(undefined1 **)(param_1 + 0x18)) {
          *_Dst = 0x20;
          _Dst = _Dst + 1;
        }
        _memcpy(_Dst,pcVar6,(size_t)pcVar4);
        if (((iVar3 == 0) || (iVar3 == 3)) && (iVar5 = 0, 0 < (int)pcVar4)) {
          do {
            if (_Dst[iVar5] == ' ') {
              _Dst[iVar5] = 0x2d;
            }
            iVar5 = iVar5 + 1;
          } while (iVar5 < (int)pcVar4);
        }
        _Dst = _Dst + (int)pcVar4;
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < 4);
    *_Dst = 0;
  }
  return local_24;
}



============================================================
DISASSEMBLY
============================================================
006a1170 : SUB ESP,0x24
006a1173 : PUSH EBX
006a1174 : PUSH EBP
006a1175 : MOV EBP,dword ptr [ESP + 0x30]
006a1179 : XOR EBX,EBX
006a117b : PUSH ESI
006a117c : PUSH EDI
006a117d : PUSH 0xbd86a8
006a1182 : MOV EAX,EBP
006a1184 : MOV dword ptr [ESP + 0x14],EBX
006a1188 : MOV dword ptr [ESP + 0x18],EBX
006a118c : MOV dword ptr [ESP + 0x1c],EBX
006a1190 : MOV dword ptr [ESP + 0x20],EBX
006a1194 : MOV dword ptr [ESP + 0x24],EBX
006a1198 : MOV dword ptr [EBP + 0xc],EBX
006a119b : CALL 0x006a0700
006a11a0 : ADD ESP,0x4
006a11a3 : CMP EAX,EBX
006a11a5 : JZ 0x006a11e9
006a11a7 : CMP byte ptr [EAX + 0x4],BL
006a11aa : JZ 0x006a11e9
006a11ac : MOV ECX,dword ptr [EAX + 0x8]
006a11af : MOV CL,byte ptr [ECX]
006a11b1 : CMP CL,0x4f
006a11b4 : JZ 0x006a11c5
006a11b6 : CMP CL,0x6f
006a11b9 : JZ 0x006a11c5
006a11bb : CMP CL,0x49
006a11be : JZ 0x006a11c5
006a11c0 : CMP CL,0x69
006a11c3 : JNZ 0x006a11e9
006a11c5 : MOV dword ptr [EBP + 0xc],0x1
006a11cc : MOV EDX,dword ptr [EAX + 0x8]
006a11cf : MOV AL,byte ptr [EDX]
006a11d1 : CMP AL,0x4f
006a11d3 : JZ 0x006a11e1
006a11d5 : MOV dword ptr [ESP + 0x1c],0xbd91dc
006a11dd : CMP AL,0x6f
006a11df : JNZ 0x006a11e9
006a11e1 : MOV dword ptr [ESP + 0x1c],0xbd91d4
006a11e9 : PUSH 0xbd85d0
006a11ee : MOV EAX,EBP
006a11f0 : CALL 0x006a0700
006a11f5 : ADD ESP,0x4
006a11f8 : CMP EAX,EBX
006a11fa : JZ 0x006a121a
006a11fc : CMP byte ptr [EAX + 0x4],BL
006a11ff : JZ 0x006a121a
006a1201 : MOV EAX,dword ptr [EAX + 0x8]
006a1204 : MOV AL,byte ptr [EAX]
006a1206 : CMP AL,0x42
006a1208 : JZ 0x006a120e
006a120a : CMP AL,0x62
006a120c : JNZ 0x006a121a
006a120e : OR dword ptr [EBP + 0xc],0x2
006a1212 : MOV dword ptr [ESP + 0x18],0xbd91cc
006a121a : PUSH 0xbd86b0
006a121f : MOV EAX,EBP
006a1221 : CALL 0x006a0700
006a1226 : ADD ESP,0x4
006a1229 : CMP EAX,EBX
006a122b : JZ 0x006a1249
006a122d : CMP byte ptr [EAX + 0x4],BL
006a1230 : JZ 0x006a1249
006a1232 : MOV EAX,dword ptr [EAX + 0x8]
006a1235 : MOV CL,byte ptr [EAX]
006a1237 : CMP CL,BL
006a1239 : JZ 0x006a1249
006a123b : CMP CL,0x4e
006a123e : JZ 0x006a1249
006a1240 : CMP CL,0x6e
006a1243 : JZ 0x006a1249
006a1245 : MOV dword ptr [ESP + 0x20],EAX
006a1249 : PUSH 0xbd8ab4
006a124e : MOV EAX,EBP
006a1250 : CALL 0x006a0700
006a1255 : ADD ESP,0x4
006a1258 : CMP EAX,EBX
006a125a : JZ 0x006a1276
006a125c : CMP byte ptr [EAX + 0x4],BL
006a125f : JZ 0x006a1276
006a1261 : MOV ECX,dword ptr [EAX + 0x8]
006a1264 : MOV AL,byte ptr [ECX]
006a1266 : CMP AL,BL
006a1268 : JZ 0x006a1276
006a126a : CMP AL,0x4e
006a126c : JZ 0x006a1276
006a126e : CMP AL,0x6e
006a1270 : JZ 0x006a1276
006a1272 : MOV dword ptr [ESP + 0x14],ECX
006a1276 : XOR EDX,EDX
006a1278 : XOR ESI,ESI
006a127a : LEA EBX,[EBX]
006a1280 : MOV EAX,dword ptr [ESP + ESI*0x1 + 0x14]
006a1284 : MOV dword ptr [ESP + ESI*0x1 + 0x24],EBX
006a1288 : CMP EAX,EBX
006a128a : JZ 0x006a12a1
006a128c : LEA EDI,[EAX + 0x1]
006a128f : NOP
006a1290 : MOV CL,byte ptr [EAX]
006a1292 : INC EAX
006a1293 : CMP CL,BL
006a1295 : JNZ 0x006a1290
006a1297 : SUB EAX,EDI
006a1299 : MOV dword ptr [ESP + ESI*0x1 + 0x24],EAX
006a129d : LEA EDX,[EDX + EAX*0x1 + 0x1]
006a12a1 : ADD ESI,0x4
006a12a4 : CMP ESI,0x10
006a12a7 : JL 0x006a1280
006a12a9 : CMP EDX,EBX
006a12ab : JNZ 0x006a12d0
006a12ad : MOV EAX,0xbd91c4
006a12b2 : MOV dword ptr [ESP + 0x14],EAX
006a12b6 : LEA EDX,[EAX + 0x1]
006a12b9 : LEA ESP,[ESP]
006a12c0 : MOV CL,byte ptr [EAX]
006a12c2 : INC EAX
006a12c3 : CMP CL,BL
006a12c5 : JNZ 0x006a12c0
006a12c7 : SUB EAX,EDX
006a12c9 : MOV dword ptr [ESP + 0x24],EAX
006a12cd : LEA EDX,[EAX + 0x1]
006a12d0 : MOV EAX,dword ptr [EBP + 0x64]
006a12d3 : LEA ECX,[ESP + 0x10]
006a12d7 : PUSH ECX
006a12d8 : PUSH EDX
006a12d9 : PUSH EAX
006a12da : CALL 0x00688c00
006a12df : MOV ESI,EAX
006a12e1 : MOV EAX,dword ptr [ESP + 0x1c]
006a12e5 : ADD ESP,0xc
006a12e8 : MOV dword ptr [EBP + 0x18],ESI
006a12eb : CMP EAX,EBX
006a12ed : JNZ 0x006a1341
006a12ef : XOR EBP,EBP
006a12f1 : MOV EAX,dword ptr [ESP + EBP*0x4 + 0x14]
006a12f5 : MOV EDI,dword ptr [ESP + EBP*0x4 + 0x24]
006a12f9 : CMP EAX,EBX
006a12fb : JZ 0x006a1335
006a12fd : MOV EDX,dword ptr [ESP + 0x38]
006a1301 : CMP ESI,dword ptr [EDX + 0x18]
006a1304 : JZ 0x006a130a
006a1306 : MOV byte ptr [ESI],0x20
006a1309 : INC ESI
006a130a : PUSH EDI
006a130b : PUSH EAX
006a130c : PUSH ESI
006a130d : CALL 0x0063ae40
006a1312 : ADD ESP,0xc
006a1315 : CMP EBP,EBX
006a1317 : JZ 0x006a131e
006a1319 : CMP EBP,0x3
006a131c : JNZ 0x006a1333
006a131e : XOR EAX,EAX
006a1320 : CMP EDI,EBX
006a1322 : JLE 0x006a1333
006a1324 : CMP byte ptr [EAX + ESI*0x1],0x20
006a1328 : JNZ 0x006a132e
006a132a : MOV byte ptr [EAX + ESI*0x1],0x2d
006a132e : INC EAX
006a132f : CMP EAX,EDI
006a1331 : JL 0x006a1324
006a1333 : ADD ESI,EDI
006a1335 : INC EBP
006a1336 : CMP EBP,0x4
006a1339 : JL 0x006a12f1
006a133b : MOV byte ptr [ESI],BL
006a133d : MOV EAX,dword ptr [ESP + 0x10]
006a1341 : POP EDI
006a1342 : POP ESI
006a1343 : POP EBP
006a1344 : POP EBX
006a1345 : ADD ESP,0x24
006a1348 : RET
