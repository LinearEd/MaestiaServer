PROGRAM  : Maestia.exe
FUNCTION : FUN_004f73c0
ENTRY    : 004f73c0
BODY     : [[004f73c0, 004f74f3] [004f7505, 004f75c1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004f73c0(void *param_1)

{
  int iVar1;
  int iVar2;
  int extraout_ECX;
  uint uVar3;
  uint uVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7cc30;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (DAT_017289e4 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = DAT_017289ec - DAT_017289e4 >> 2;
  }
  iVar2 = DAT_017289e8 - DAT_017289e4 >> 2;
  iVar1 = DAT_017289e8;
  if (iVar2 == 0x3fffffff) {
    iVar1 = FUN_00429be0();
    iVar2 = extraout_ECX;
  }
  uVar3 = iVar2 + 1;
  if (uVar3 <= uVar4) {
    if (iVar1 - (int)param_1 >> 2 == 0) {
      FUN_00461070();
      local_8 = 2;
      FUN_004154b0();
      local_8 = 0xffffffff;
      DAT_017289e8 = DAT_017289e8 + 4;
    }
    else {
      DAT_017289e8 = FUN_00461070();
      iVar2 = (iVar1 + -4) - (int)param_1 >> 2;
      if (0 < iVar2) {
        _memmove_s((void *)(iVar1 + iVar2 * -4),iVar2 * 4,param_1,iVar2 * 4);
      }
    }
    FUN_00422490(param_1);
    ExceptionList = local_10;
    return;
  }
  if (0x3fffffff - (uVar4 >> 1) < uVar4) {
    uVar4 = 0;
  }
  else {
    uVar4 = uVar4 + (uVar4 >> 1);
  }
  if (uVar4 < uVar3) {
    uVar4 = uVar3;
  }
  iVar1 = FUN_004c1790();
  local_8 = 0;
  FUN_004154b0();
  FUN_00461070();
  FUN_00461070();
  local_8 = 0xffffffff;
  if (DAT_017289e4 == 0) {
    DAT_017289ec = iVar1 + uVar4 * 4;
    DAT_017289e8 = iVar1 + ((DAT_017289e8 - DAT_017289e4 >> 2) + 1) * 4;
    DAT_017289e4 = iVar1;
    ExceptionList = local_10;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
004f73c0 : PUSH EBP
004f73c1 : MOV EBP,ESP
004f73c3 : PUSH -0x1
004f73c5 : PUSH 0xb7cc30
004f73ca : MOV EAX,FS:[0x0]
004f73d0 : PUSH EAX
004f73d1 : SUB ESP,0x10
004f73d4 : PUSH EBX
004f73d5 : PUSH ESI
004f73d6 : PUSH EDI
004f73d7 : MOV EAX,[0x00d66fa0]
004f73dc : XOR EAX,EBP
004f73de : PUSH EAX
004f73df : LEA EAX,[EBP + -0xc]
004f73e2 : MOV FS:[0x0],EAX
004f73e8 : MOV dword ptr [EBP + -0x10],ESP
004f73eb : MOV ESI,ECX
004f73ed : MOV EDX,dword ptr [0x017289e4]
004f73f3 : TEST EDX,EDX
004f73f5 : JNZ 0x004f73fb
004f73f7 : XOR EBX,EBX
004f73f9 : JMP 0x004f7406
004f73fb : MOV EBX,dword ptr [0x017289ec]
004f7401 : SUB EBX,EDX
004f7403 : SAR EBX,0x2
004f7406 : MOV EAX,[0x017289e8]
004f740b : MOV ECX,EAX
004f740d : SUB ECX,EDX
004f740f : SAR ECX,0x2
004f7412 : MOV EDX,0x3fffffff
004f7417 : SUB EDX,ECX
004f7419 : CMP EDX,0x1
004f741c : JNC 0x004f7423
004f741e : CALL 0x00429be0
004f7423 : INC ECX
004f7424 : CMP EBX,ECX
004f7426 : JNC 0x004f7505
004f742c : MOV EAX,EBX
004f742e : SHR EAX,0x1
004f7430 : MOV EDX,0x3fffffff
004f7435 : SUB EDX,EAX
004f7437 : CMP EDX,EBX
004f7439 : JNC 0x004f743f
004f743b : XOR EBX,EBX
004f743d : JMP 0x004f7441
004f743f : ADD EBX,EAX
004f7441 : CMP EBX,ECX
004f7443 : CMOVC EBX,ECX
004f7446 : MOV ECX,EBX
004f7448 : CALL 0x004c1790
004f744d : MOV dword ptr [EBP + -0x14],EAX
004f7450 : MOV ECX,dword ptr [EBP + 0x8]
004f7453 : SUB ECX,dword ptr [0x017289e4]
004f7459 : SAR ECX,0x2
004f745c : MOV dword ptr [EBP + -0x1c],ECX
004f745f : MOV dword ptr [EBP + -0x4],0x0
004f7466 : LEA EDI,[EAX + ECX*0x4]
004f7469 : MOV EDX,ESI
004f746b : MOV ESI,0x1
004f7470 : CALL 0x004154b0
004f7475 : MOV dword ptr [EBP + -0x18],ESI
004f7478 : MOV ESI,dword ptr [EBP + -0x14]
004f747b : MOV EDX,ESI
004f747d : MOV EAX,dword ptr [EBP + 0x8]
004f7480 : MOV EDI,dword ptr [0x017289e4]
004f7486 : CALL 0x00461070
004f748b : MOV dword ptr [EBP + -0x18],0x2
004f7492 : MOV EAX,dword ptr [EBP + -0x1c]
004f7495 : LEA EDX,[ESI + EAX*0x4 + 0x4]
004f7499 : MOV EAX,[0x017289e8]
004f749e : MOV EDI,dword ptr [EBP + 0x8]
004f74a1 : CALL 0x00461070
004f74a6 : MOV dword ptr [EBP + -0x4],0xffffffff
004f74ad : MOV EDI,dword ptr [0x017289e8]
004f74b3 : MOV ECX,dword ptr [0x017289e4]
004f74b9 : SUB EDI,ECX
004f74bb : SAR EDI,0x2
004f74be : INC EDI
004f74bf : TEST ECX,ECX
004f74c1 : JZ 0x004f74c8
004f74c3 : CALL 0x006f04e0
004f74c8 : LEA ECX,[ESI + EBX*0x4]
004f74cb : MOV dword ptr [0x017289ec],ECX
004f74d1 : LEA EDX,[ESI + EDI*0x4]
004f74d4 : MOV dword ptr [0x017289e8],EDX
004f74da : MOV dword ptr [0x017289e4],ESI
004f74e0 : MOV ECX,dword ptr [EBP + -0xc]
004f74e3 : MOV dword ptr FS:[0x0],ECX
004f74ea : POP ECX
004f74eb : POP EDI
004f74ec : POP ESI
004f74ed : POP EBX
004f74ee : MOV ESP,EBP
004f74f0 : POP EBP
004f74f1 : RET 0x4
004f7505 : MOV ECX,EAX
004f7507 : MOV EDI,dword ptr [EBP + 0x8]
004f750a : SUB ECX,EDI
004f750c : SAR ECX,0x2
004f750f : CMP ECX,0x1
004f7512 : JNC 0x004f7565
004f7514 : MOV EDX,dword ptr [ESI]
004f7516 : MOV dword ptr [EBP + -0x14],EDX
004f7519 : LEA EDX,[EDI + 0x4]
004f751c : CALL 0x00461070
004f7521 : MOV dword ptr [EBP + -0x4],0x2
004f7528 : MOV EDI,dword ptr [0x017289e8]
004f752e : MOV EAX,EDI
004f7530 : SUB EAX,dword ptr [EBP + 0x8]
004f7533 : SAR EAX,0x2
004f7536 : MOV ESI,0x1
004f753b : SUB ESI,EAX
004f753d : LEA EDX,[EBP + -0x14]
004f7540 : CALL 0x004154b0
004f7545 : MOV dword ptr [EBP + -0x4],0xffffffff
004f754c : MOV EAX,[0x017289e8]
004f7551 : ADD EAX,0x4
004f7554 : MOV [0x017289e8],EAX
004f7559 : LEA ECX,[EAX + -0x4]
004f755c : MOV EDX,dword ptr [EBP + 0x8]
004f755f : PUSH EDX
004f7560 : LEA EDX,[EBP + -0x14]
004f7563 : JMP 0x004f75a6
004f7565 : MOV ECX,dword ptr [ESI]
004f7567 : MOV dword ptr [EBP + -0x1c],ECX
004f756a : MOV ESI,EAX
004f756c : LEA EDI,[ESI + -0x4]
004f756f : MOV EDX,EAX
004f7571 : CALL 0x00461070
004f7576 : MOV [0x017289e8],EAX
004f757b : MOV EDX,dword ptr [EBP + 0x8]
004f757e : SUB EDI,EDX
004f7580 : SAR EDI,0x2
004f7583 : TEST EDI,EDI
004f7585 : JLE 0x004f759f
004f7587 : LEA EAX,[EDI*0x4 + 0x0]
004f758e : PUSH EAX
004f758f : PUSH EDX
004f7590 : PUSH EAX
004f7591 : SUB ESI,EAX
004f7593 : PUSH ESI
004f7594 : CALL 0x00634101
004f7599 : ADD ESP,0x10
004f759c : MOV EDX,dword ptr [EBP + 0x8]
004f759f : LEA ECX,[EDX + 0x4]
004f75a2 : PUSH EDX
004f75a3 : LEA EDX,[EBP + -0x1c]
004f75a6 : CALL 0x00422490
004f75ab : ADD ESP,0x4
004f75ae : MOV ECX,dword ptr [EBP + -0xc]
004f75b1 : MOV dword ptr FS:[0x0],ECX
004f75b8 : POP ECX
004f75b9 : POP EDI
004f75ba : POP ESI
004f75bb : POP EBX
004f75bc : MOV ESP,EBP
004f75be : POP EBP
004f75bf : RET 0x4
