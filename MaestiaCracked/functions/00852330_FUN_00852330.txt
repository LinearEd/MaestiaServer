PROGRAM  : Maestia.exe
FUNCTION : FUN_00852330
ENTRY    : 00852330
BODY     : [[00852330, 0085266e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00852330(void)

{
  undefined1 uVar1;
  uint uVar2;
  int *piVar3;
  int *in_ECX;
  int iVar4;
  LPCRITICAL_SECTION local_38;
  char *local_34;
  undefined4 local_30;
  int local_2c;
  undefined4 local_28;
  int local_24;
  uint local_20;
  int local_1c;
  int *local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b48e03;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_20 = (uint)*(ushort *)(in_ECX + 0x61e);
  local_14 = uVar2;
  FUN_00484470(&local_20);
  if (local_1c != in_ECX[0x176]) {
    FUN_007bc960(DAT_01725208,*(undefined4 *)(local_1c + 0x10));
  }
  *(undefined2 *)(in_ECX + 0x61e) = 0;
  if ((((DAT_00da93ec != 0) && (*(char *)(*(int *)(DAT_00da93ec + 0x41c) + 0x6a) == '\0')) &&
      (*(char *)(DAT_00da93ec + 0x533) == '\0')) || ((char)in_ECX[0x693] != '\0')) {
    FUN_0084c320(1);
    FUN_0084c320(1);
    FUN_0084c320(1);
    *(undefined1 *)(in_ECX + 0x663) = 1;
  }
  iVar4 = in_ECX[0x5fc];
  *(undefined1 *)((int)in_ECX + 0x198d) = 0;
  *(undefined1 *)((int)in_ECX + 0x187a) = 0;
  if (iVar4 != 0) {
    *(undefined1 *)(iVar4 + 0x1a8) = 0;
    if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
      (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))(0,uVar2);
    }
    if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
      (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))(0);
    }
  }
  iVar4 = in_ECX[0x61c];
  if (iVar4 != 0) {
    *(undefined1 *)(iVar4 + 0x1a8) = 0;
    if (*(int **)(iVar4 + 0x168) != (int *)0x0) {
      (**(code **)(**(int **)(iVar4 + 0x168) + 0x10))(0);
    }
    if (*(int **)(iVar4 + 0x16c) != (int *)0x0) {
      (**(code **)(**(int **)(iVar4 + 0x16c) + 0x10))(0);
    }
  }
  if (in_ECX[0xe3] == 0) goto LAB_00852653;
  local_24 = 0xc9;
  local_20 = 4;
  do {
    (**(code **)(*in_ECX + 0x200))();
    iVar4 = in_ECX[0xe3];
    local_38 = (LPCRITICAL_SECTION)(iVar4 + 0x70);
    local_2c = 0;
    local_34 = ".\\Objects\\AvaEffectMgr.cpp";
    local_30 = 0x22b;
    local_28 = 1;
    local_1c = iVar4;
    FUN_006ef1a0(&local_38);
    local_8 = 0xffffffff;
    if (local_2c != 0) {
      LeaveCriticalSection(local_38);
      local_2c = 0;
    }
    piVar3 = (int *)FUN_00a6bba0(local_24);
    if (piVar3 == (int *)0x0) {
      piVar3 = (int *)FUN_00a6bad0(local_24);
      if (piVar3 != (int *)0x0) {
        local_18 = (int *)FUN_00a6b6b0();
        if (local_18 == (int *)0x0) {
          FUN_00a6c940();
          local_18 = piVar3;
          iVar4 = local_1c;
        }
        if (*(char *)(iVar4 + 0x5c) != '\0') {
          (**(code **)(*local_18 + 0xd4))();
          FUN_00a6b5d0();
        }
      }
    }
    else {
      local_18 = (int *)FUN_00a6b780();
      if (local_18 == (int *)0x0) {
        FUN_00a6d020(iVar4,0);
        local_18 = piVar3;
      }
      if (*(char *)(iVar4 + 0x5c) != '\0') {
        (**(code **)(*local_18 + 0x24))();
        FUN_00a6c0d0();
      }
    }
    local_24 = local_24 + 1;
    local_20 = local_20 - 1;
  } while (local_20 != 0);
  if (*(short *)((int)in_ECX + 0x19a2) == 1) {
    uVar1 = (**(code **)(*in_ECX + 0x200))();
    FUN_00a6d180(in_ECX[0xe3],1,0,uVar1);
    uVar1 = (**(code **)(*in_ECX + 0x200))();
    iVar4 = in_ECX[0xe3];
LAB_00852625:
    FUN_00a6d180(iVar4,1,0,uVar1);
  }
  else if (*(short *)((int)in_ECX + 0x19a2) == 3) {
    uVar1 = (**(code **)(*in_ECX + 0x200))();
    FUN_00a6d180(in_ECX[0xe3],1,0,uVar1);
    uVar1 = (**(code **)(*in_ECX + 0x200))();
    iVar4 = in_ECX[0xe3];
    goto LAB_00852625;
  }
  (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
            (in_ECX + 0x74e,0,1,0);
LAB_00852653:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00852330 : PUSH EBP
00852331 : MOV EBP,ESP
00852333 : PUSH -0x1
00852335 : PUSH 0xb48e03
0085233a : MOV EAX,FS:[0x0]
00852340 : PUSH EAX
00852341 : SUB ESP,0x28
00852344 : MOV EAX,[0x00d66fa0]
00852349 : XOR EAX,EBP
0085234b : MOV dword ptr [EBP + -0x10],EAX
0085234e : PUSH EBX
0085234f : PUSH ESI
00852350 : PUSH EDI
00852351 : PUSH EAX
00852352 : LEA EAX,[EBP + -0xc]
00852355 : MOV FS:[0x0],EAX
0085235b : MOV EBX,ECX
0085235d : MOVZX EAX,word ptr [EBX + 0x1878]
00852364 : LEA ECX,[EBP + -0x1c]
00852367 : MOV dword ptr [EBP + -0x1c],EAX
0085236a : PUSH ECX
0085236b : LEA ECX,[EBX + 0x5d4]
00852371 : LEA EAX,[EBP + -0x18]
00852374 : CALL 0x00484470
00852379 : MOV EAX,dword ptr [EBX + 0x5d8]
0085237f : MOV ECX,dword ptr [EBP + -0x18]
00852382 : CMP ECX,EAX
00852384 : JZ 0x00852396
00852386 : MOV ECX,dword ptr [ECX + 0x10]
00852389 : MOV EDX,dword ptr [0x01725208]
0085238f : PUSH ECX
00852390 : PUSH EDX
00852391 : CALL 0x007bc960
00852396 : XOR EAX,EAX
00852398 : MOV word ptr [EBX + 0x1878],AX
0085239f : MOV EAX,[0x00da93ec]
008523a4 : TEST EAX,EAX
008523a6 : JZ 0x008523bd
008523a8 : MOV ECX,dword ptr [EAX + 0x41c]
008523ae : CMP byte ptr [ECX + 0x6a],0x0
008523b2 : JNZ 0x008523bd
008523b4 : CMP byte ptr [EAX + 0x533],0x0
008523bb : JZ 0x008523c6
008523bd : CMP byte ptr [EBX + 0x1a4c],0x0
008523c4 : JZ 0x008523f4
008523c6 : MOV EDI,dword ptr [EBX + 0x17f0]
008523cc : PUSH 0x1
008523ce : CALL 0x0084c320
008523d3 : MOV EDI,dword ptr [EBX + 0x1870]
008523d9 : PUSH 0x1
008523db : CALL 0x0084c320
008523e0 : MOV EDI,dword ptr [EBX + 0x17f4]
008523e6 : PUSH 0x1
008523e8 : CALL 0x0084c320
008523ed : MOV byte ptr [EBX + 0x198c],0x1
008523f4 : MOV ESI,dword ptr [EBX + 0x17f0]
008523fa : MOV byte ptr [EBX + 0x198d],0x0
00852401 : MOV byte ptr [EBX + 0x187a],0x0
00852408 : TEST ESI,ESI
0085240a : JZ 0x0085243b
0085240c : MOV ECX,dword ptr [ESI + 0x168]
00852412 : MOV byte ptr [ESI + 0x1a8],0x0
00852419 : TEST ECX,ECX
0085241b : JZ 0x00852426
0085241d : MOV EDX,dword ptr [ECX]
0085241f : MOV EAX,dword ptr [EDX + 0x10]
00852422 : PUSH 0x0
00852424 : CALL EAX
00852426 : MOV ESI,dword ptr [ESI + 0x16c]
0085242c : TEST ESI,ESI
0085242e : JZ 0x0085243b
00852430 : MOV EDX,dword ptr [ESI]
00852432 : MOV EAX,dword ptr [EDX + 0x10]
00852435 : PUSH 0x0
00852437 : MOV ECX,ESI
00852439 : CALL EAX
0085243b : MOV ESI,dword ptr [EBX + 0x1870]
00852441 : TEST ESI,ESI
00852443 : JZ 0x00852474
00852445 : MOV ECX,dword ptr [ESI + 0x168]
0085244b : MOV byte ptr [ESI + 0x1a8],0x0
00852452 : TEST ECX,ECX
00852454 : JZ 0x0085245f
00852456 : MOV EDX,dword ptr [ECX]
00852458 : MOV EAX,dword ptr [EDX + 0x10]
0085245b : PUSH 0x0
0085245d : CALL EAX
0085245f : MOV ESI,dword ptr [ESI + 0x16c]
00852465 : TEST ESI,ESI
00852467 : JZ 0x00852474
00852469 : MOV EDX,dword ptr [ESI]
0085246b : MOV EAX,dword ptr [EDX + 0x10]
0085246e : PUSH 0x0
00852470 : MOV ECX,ESI
00852472 : CALL EAX
00852474 : CMP dword ptr [EBX + 0x38c],0x0
0085247b : JZ 0x00852653
00852481 : MOV dword ptr [EBP + -0x20],0xc9
00852488 : MOV dword ptr [EBP + -0x1c],0x4
0085248f : MOV EDX,dword ptr [EBX]
00852491 : MOV EAX,dword ptr [EDX + 0x200]
00852497 : MOV ECX,EBX
00852499 : CALL EAX
0085249b : MOV ESI,dword ptr [EBX + 0x38c]
008524a1 : LEA EDX,[EBP + -0x34]
008524a4 : LEA ECX,[ESI + 0x70]
008524a7 : XOR EDI,EDI
008524a9 : PUSH EDX
008524aa : MOV dword ptr [EBP + -0x18],ESI
008524ad : MOV dword ptr [EBP + -0x28],EDI
008524b0 : MOV dword ptr [EBP + -0x34],ECX
008524b3 : MOV dword ptr [EBP + -0x30],0xc43e84
008524ba : MOV dword ptr [EBP + -0x2c],0x22b
008524c1 : MOV dword ptr [EBP + -0x24],0x1
008524c8 : CALL 0x006ef1a0
008524cd : MOV dword ptr [EBP + -0x4],0xffffffff
008524d4 : CMP dword ptr [EBP + -0x28],EDI
008524d7 : JZ 0x008524e6
008524d9 : MOV EAX,dword ptr [EBP + -0x34]
008524dc : PUSH EAX
008524dd : CALL dword ptr [0x00b8511c]
008524e3 : MOV dword ptr [EBP + -0x28],EDI
008524e6 : MOV ECX,dword ptr [EBP + -0x20]
008524e9 : PUSH ECX
008524ea : MOV ECX,ESI
008524ec : CALL 0x00a6bba0
008524f1 : MOV EDI,EAX
008524f3 : TEST EDI,EDI
008524f5 : JZ 0x0085252c
008524f7 : MOV ECX,ESI
008524f9 : CALL 0x00a6b780
008524fe : MOV dword ptr [EBP + -0x14],EAX
00852501 : TEST EAX,EAX
00852503 : JNZ 0x00852511
00852505 : PUSH EAX
00852506 : PUSH ESI
00852507 : CALL 0x00a6d020
0085250c : MOV dword ptr [EBP + -0x14],EDI
0085250f : MOV EAX,EDI
00852511 : CMP byte ptr [ESI + 0x5c],0x0
00852515 : JZ 0x00852575
00852517 : MOV EDX,dword ptr [EAX]
00852519 : MOV ECX,EAX
0085251b : MOV EAX,dword ptr [EDX + 0x24]
0085251e : CALL EAX
00852520 : MOV ECX,dword ptr [EBP + -0x14]
00852523 : MOV EDX,ESI
00852525 : CALL 0x00a6c0d0
0085252a : JMP 0x00852575
0085252c : MOV ECX,dword ptr [EBP + -0x20]
0085252f : PUSH ECX
00852530 : MOV ECX,ESI
00852532 : CALL 0x00a6bad0
00852537 : MOV EDI,EAX
00852539 : TEST EDI,EDI
0085253b : JZ 0x00852575
0085253d : MOV ECX,ESI
0085253f : CALL 0x00a6b6b0
00852544 : MOV dword ptr [EBP + -0x14],EAX
00852547 : TEST EAX,EAX
00852549 : JNZ 0x00852558
0085254b : CALL 0x00a6c940
00852550 : MOV ESI,dword ptr [EBP + -0x18]
00852553 : MOV dword ptr [EBP + -0x14],EDI
00852556 : MOV EAX,EDI
00852558 : CMP byte ptr [ESI + 0x5c],0x0
0085255c : JZ 0x00852575
0085255e : MOV EDX,dword ptr [EAX]
00852560 : MOV ECX,EAX
00852562 : MOV EAX,dword ptr [EDX + 0xd4]
00852568 : CALL EAX
0085256a : MOV ESI,dword ptr [EBP + -0x14]
0085256d : MOV ECX,dword ptr [EBP + -0x18]
00852570 : CALL 0x00a6b5d0
00852575 : MOV EAX,0x1
0085257a : ADD dword ptr [EBP + -0x20],EAX
0085257d : SUB dword ptr [EBP + -0x1c],EAX
00852580 : JNZ 0x0085248f
00852586 : MOVZX EAX,word ptr [EBX + 0x19a2]
0085258d : CMP AX,0x1
00852591 : JNZ 0x008525da
00852593 : MOV EDX,dword ptr [EBX]
00852595 : MOV EAX,dword ptr [EDX + 0x200]
0085259b : MOV ECX,EBX
0085259d : CALL EAX
0085259f : MOV EDX,dword ptr [EBX + 0x38c]
008525a5 : MOVZX ECX,AL
008525a8 : PUSH ECX
008525a9 : PUSH 0x0
008525ab : PUSH 0x1
008525ad : PUSH EDX
008525ae : MOV ECX,0xc9
008525b3 : CALL 0x00a6d180
008525b8 : MOV EAX,dword ptr [EBX]
008525ba : MOV EDX,dword ptr [EAX + 0x200]
008525c0 : MOV ECX,EBX
008525c2 : CALL EDX
008525c4 : MOV ECX,dword ptr [EBX + 0x38c]
008525ca : MOVZX EAX,AL
008525cd : PUSH EAX
008525ce : PUSH 0x0
008525d0 : PUSH 0x1
008525d2 : PUSH ECX
008525d3 : MOV ECX,0xca
008525d8 : JMP 0x00852625
008525da : CMP AX,0x3
008525de : JNZ 0x0085262a
008525e0 : MOV EDX,dword ptr [EBX]
008525e2 : MOV EAX,dword ptr [EDX + 0x200]
008525e8 : MOV ECX,EBX
008525ea : CALL EAX
008525ec : MOV EDX,dword ptr [EBX + 0x38c]
008525f2 : MOVZX ECX,AL
008525f5 : PUSH ECX
008525f6 : PUSH 0x0
008525f8 : PUSH 0x1
008525fa : PUSH EDX
008525fb : MOV ECX,0xcb
00852600 : CALL 0x00a6d180
00852605 : MOV EAX,dword ptr [EBX]
00852607 : MOV EDX,dword ptr [EAX + 0x200]
0085260d : MOV ECX,EBX
0085260f : CALL EDX
00852611 : MOV ECX,dword ptr [EBX + 0x38c]
00852617 : MOVZX EAX,AL
0085261a : PUSH EAX
0085261b : PUSH 0x0
0085261d : PUSH 0x1
0085261f : PUSH ECX
00852620 : MOV ECX,0xcc
00852625 : CALL 0x00a6d180
0085262a : MOV EDX,dword ptr [EBX + 0x138]
00852630 : MOV EAX,dword ptr [EDX + 0x4]
00852633 : MOV EDX,dword ptr [EAX + EBX*0x1 + 0x138]
0085263a : PUSH 0x0
0085263c : LEA ECX,[EAX + EBX*0x1 + 0x138]
00852643 : MOV EAX,dword ptr [EDX + 0x10]
00852646 : PUSH 0x1
00852648 : PUSH 0x0
0085264a : ADD EBX,0x1d38
00852650 : PUSH EBX
00852651 : CALL EAX
00852653 : MOV ECX,dword ptr [EBP + -0xc]
00852656 : MOV dword ptr FS:[0x0],ECX
0085265d : POP ECX
0085265e : POP EDI
0085265f : POP ESI
00852660 : POP EBX
00852661 : MOV ECX,dword ptr [EBP + -0x10]
00852664 : XOR ECX,EBP
00852666 : CALL 0x00633e6b
0085266b : MOV ESP,EBP
0085266d : POP EBP
0085266e : RET
