PROGRAM  : Maestia.exe
FUNCTION : FUN_0047e650
ENTRY    : 0047e650
BODY     : [[0047e650, 0047e76d] [0047e770, 0047e7b8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0047e650(uint param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  char cVar8;
  uint uVar9;
  undefined4 uVar10;
  int iVar11;
  int unaff_ESI;
  
  iVar7 = param_1;
  if (unaff_ESI != param_1) {
    uVar5 = (*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x208;
    if (uVar5 == 0) {
      param_1 = uVar5;
      FUN_0047e7c0(unaff_ESI,&param_1,*(undefined4 *)(unaff_ESI + 4),*(undefined4 *)(unaff_ESI + 8))
      ;
      return;
    }
    iVar4 = *(int *)(unaff_ESI + 4);
    uVar6 = (*(int *)(unaff_ESI + 8) - iVar4) / 0x208;
    if (uVar5 <= uVar6) {
      puVar1 = (undefined4 *)(param_1 + 8);
      puVar2 = (undefined4 *)(param_1 + 4);
      param_1 = uVar5;
      FUN_0047e8e0(*puVar2,*puVar1,iVar4);
      FUN_0047ed40();
      *(int *)(unaff_ESI + 8) =
           ((*(int *)(iVar7 + 8) - *(int *)(iVar7 + 4)) / 0x208) * 0x208 + *(int *)(unaff_ESI + 4);
      return;
    }
    if (iVar4 == 0) {
      uVar9 = 0;
    }
    else {
      uVar9 = (*(int *)(unaff_ESI + 0xc) - iVar4) / 0x208;
    }
    if (uVar5 <= uVar9) {
      piVar3 = (int *)(param_1 + 4);
      param_1 = uVar6 * 0x208 + *piVar3;
      FUN_0047e8e0(*piVar3,param_1,iVar4);
      uVar10 = FUN_004be060(param_1,*(undefined4 *)(iVar7 + 8));
      *(undefined4 *)(unaff_ESI + 8) = uVar10;
      return;
    }
    if (iVar4 != 0) {
      param_1 = uVar5;
      FUN_0047ed40();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar11 = *(int *)(param_1 + 8) - *(int *)(param_1 + 4);
    iVar4 = iVar11 >> 0x1f;
    *(undefined4 *)(unaff_ESI + 4) = 0;
    *(undefined4 *)(unaff_ESI + 8) = 0;
    *(undefined4 *)(unaff_ESI + 0xc) = 0;
    if (iVar11 / 0x208 + iVar4 != iVar4) {
      param_1 = uVar5;
      cVar8 = FUN_0047ed10();
      if (cVar8 != '\0') {
        uVar10 = FUN_004be060(*(undefined4 *)(iVar7 + 4),*(undefined4 *)(iVar7 + 8));
        *(undefined4 *)(unaff_ESI + 8) = uVar10;
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0047e650 : PUSH EBP
0047e651 : MOV EBP,ESP
0047e653 : PUSH ECX
0047e654 : PUSH EBX
0047e655 : MOV EBX,dword ptr [EBP + 0x8]
0047e658 : PUSH EDI
0047e659 : CMP ESI,EBX
0047e65b : JZ 0x0047e7b0
0047e661 : MOV EAX,dword ptr [EBX + 0x4]
0047e664 : MOV ECX,dword ptr [EBX + 0x8]
0047e667 : SUB ECX,EAX
0047e669 : MOV EAX,0x7e07e07f
0047e66e : IMUL ECX
0047e670 : SAR EDX,0x8
0047e673 : MOV EAX,EDX
0047e675 : SHR EAX,0x1f
0047e678 : ADD EAX,EDX
0047e67a : MOV dword ptr [EBP + 0x8],EAX
0047e67d : JNZ 0x0047e69a
0047e67f : MOV EAX,dword ptr [ESI + 0x8]
0047e682 : MOV ECX,dword ptr [ESI + 0x4]
0047e685 : PUSH EAX
0047e686 : PUSH ECX
0047e687 : LEA EAX,[EBP + 0x8]
0047e68a : PUSH EAX
0047e68b : PUSH ESI
0047e68c : CALL 0x0047e7c0
0047e691 : MOV EAX,ESI
0047e693 : POP EDI
0047e694 : POP EBX
0047e695 : POP ECX
0047e696 : POP EBP
0047e697 : RET 0x4
0047e69a : MOV ECX,dword ptr [ESI + 0x8]
0047e69d : MOV EDI,dword ptr [ESI + 0x4]
0047e6a0 : SUB ECX,EDI
0047e6a2 : MOV EAX,0x7e07e07f
0047e6a7 : IMUL ECX
0047e6a9 : SAR EDX,0x8
0047e6ac : MOV ECX,EDX
0047e6ae : SHR ECX,0x1f
0047e6b1 : ADD ECX,EDX
0047e6b3 : CMP dword ptr [EBP + 0x8],ECX
0047e6b6 : JA 0x0047e6fd
0047e6b8 : MOV EAX,dword ptr [EBX + 0x8]
0047e6bb : PUSH EDI
0047e6bc : PUSH EAX
0047e6bd : MOV EAX,dword ptr [EBX + 0x4]
0047e6c0 : PUSH EAX
0047e6c1 : CALL 0x0047e8e0
0047e6c6 : MOV EDI,dword ptr [ESI + 0x8]
0047e6c9 : ADD ESP,0xc
0047e6cc : CALL 0x0047ed40
0047e6d1 : MOV ECX,dword ptr [EBX + 0x8]
0047e6d4 : SUB ECX,dword ptr [EBX + 0x4]
0047e6d7 : MOV EAX,0x7e07e07f
0047e6dc : IMUL ECX
0047e6de : SAR EDX,0x8
0047e6e1 : MOV ECX,EDX
0047e6e3 : SHR ECX,0x1f
0047e6e6 : ADD ECX,EDX
0047e6e8 : IMUL ECX,ECX,0x208
0047e6ee : ADD ECX,dword ptr [ESI + 0x4]
0047e6f1 : MOV EAX,ESI
0047e6f3 : MOV dword ptr [ESI + 0x8],ECX
0047e6f6 : POP EDI
0047e6f7 : POP EBX
0047e6f8 : POP ECX
0047e6f9 : POP EBP
0047e6fa : RET 0x4
0047e6fd : TEST EDI,EDI
0047e6ff : JNZ 0x0047e705
0047e701 : XOR EAX,EAX
0047e703 : JMP 0x0047e71b
0047e705 : MOV EDX,dword ptr [ESI + 0xc]
0047e708 : SUB EDX,EDI
0047e70a : MOV EAX,0x7e07e07f
0047e70f : IMUL EDX
0047e711 : SAR EDX,0x8
0047e714 : MOV EAX,EDX
0047e716 : SHR EAX,0x1f
0047e719 : ADD EAX,EDX
0047e71b : CMP dword ptr [EBP + 0x8],EAX
0047e71e : JA 0x0047e755
0047e720 : MOV EAX,dword ptr [EBX + 0x4]
0047e723 : IMUL ECX,ECX,0x208
0047e729 : ADD ECX,EAX
0047e72b : PUSH EDI
0047e72c : PUSH ECX
0047e72d : PUSH EAX
0047e72e : MOV dword ptr [EBP + 0x8],ECX
0047e731 : CALL 0x0047e8e0
0047e736 : MOV EDX,dword ptr [EBX + 0x8]
0047e739 : MOV EAX,dword ptr [EBP + 0x8]
0047e73c : ADD ESP,0xc
0047e73f : PUSH EDX
0047e740 : MOV EDX,dword ptr [ESI + 0x8]
0047e743 : PUSH EAX
0047e744 : CALL 0x004be060
0047e749 : MOV dword ptr [ESI + 0x8],EAX
0047e74c : MOV EAX,ESI
0047e74e : POP EDI
0047e74f : POP EBX
0047e750 : POP ECX
0047e751 : POP EBP
0047e752 : RET 0x4
0047e755 : XOR ECX,ECX
0047e757 : CMP EDI,ECX
0047e759 : JZ 0x0047e770
0047e75b : MOV EDI,dword ptr [ESI + 0x8]
0047e75e : MOV EAX,dword ptr [ESI + 0x4]
0047e761 : CALL 0x0047ed40
0047e766 : MOV ECX,dword ptr [ESI + 0x4]
0047e769 : CALL 0x006f04e0
0047e770 : MOV EDX,dword ptr [EBX + 0x8]
0047e773 : SUB EDX,dword ptr [EBX + 0x4]
0047e776 : MOV EAX,0x7e07e07f
0047e77b : IMUL EDX
0047e77d : SAR EDX,0x8
0047e780 : MOV EAX,EDX
0047e782 : SHR EAX,0x1f
0047e785 : ADD EAX,EDX
0047e787 : MOV dword ptr [ESI + 0x4],ECX
0047e78a : MOV dword ptr [ESI + 0x8],ECX
0047e78d : MOV dword ptr [ESI + 0xc],ECX
0047e790 : JZ 0x0047e7b0
0047e792 : MOV EDI,ESI
0047e794 : CALL 0x0047ed10
0047e799 : TEST AL,AL
0047e79b : JZ 0x0047e7b0
0047e79d : MOV ECX,dword ptr [EBX + 0x8]
0047e7a0 : MOV EDX,dword ptr [EBX + 0x4]
0047e7a3 : PUSH ECX
0047e7a4 : PUSH EDX
0047e7a5 : MOV EDX,dword ptr [ESI + 0x4]
0047e7a8 : CALL 0x004be060
0047e7ad : MOV dword ptr [ESI + 0x8],EAX
0047e7b0 : POP EDI
0047e7b1 : MOV EAX,ESI
0047e7b3 : POP EBX
0047e7b4 : POP ECX
0047e7b5 : POP EBP
0047e7b6 : RET 0x4
