PROGRAM  : Maestia.exe
FUNCTION : FUN_00530390
ENTRY    : 00530390
BODY     : [[00530390, 00530475]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00530390(undefined4 *param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  uint uVar4;
  uint *puVar5;
  uint uVar6;
  uint uVar7;
  
  iVar3 = *in_ECX;
  if (iVar3 != 0) {
    uVar6 = *(uint *)(*(int *)*param_1 + 0xc) & *(uint *)(iVar3 + 4);
    puVar5 = (uint *)(iVar3 + 8 + uVar6 * 0x14);
    if ((*(int *)(iVar3 + 8 + uVar6 * 0x14) != -2) &&
       ((*(uint *)(puVar5[1] + 0xc) & *(uint *)(iVar3 + 4)) == uVar6)) {
      uVar4 = 0xffffffff;
      uVar7 = uVar6;
      do {
        if ((*(uint *)(iVar3 + 4) & *(uint *)(puVar5[1] + 0xc)) == uVar6) {
          piVar1 = (int *)*param_1;
          if (*(int *)(puVar5[1] + 4) == 0) {
            FUN_00525a80();
          }
          if (*(int *)(*piVar1 + 4) == *(int *)(puVar5[1] + 4)) {
            if (uVar6 == uVar7) {
              uVar6 = *puVar5;
              if (uVar6 != 0xffffffff) {
                iVar3 = *in_ECX;
                FUN_00530280();
                FUN_0052f6e0(iVar3 + 8 + uVar6 * 0x14);
              }
            }
            else {
              *(uint *)(*in_ECX + 8 + uVar4 * 0x14) = *puVar5;
            }
            FUN_00530280();
            *(int *)*in_ECX = *(int *)*in_ECX + -1;
            return;
          }
        }
        uVar2 = *puVar5;
        if (uVar2 == 0xffffffff) {
          return;
        }
        iVar3 = *in_ECX;
        puVar5 = (uint *)(iVar3 + 8 + uVar2 * 0x14);
        uVar4 = uVar7;
        uVar7 = uVar2;
      } while( true );
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00530390 : SUB ESP,0x8
00530393 : MOV EDX,ECX
00530395 : MOV EAX,dword ptr [EDX]
00530397 : MOV dword ptr [ESP + 0x4],EDX
0053039b : TEST EAX,EAX
0053039d : JZ 0x00530470
005303a3 : MOV ECX,dword ptr [EAX + 0x4]
005303a6 : PUSH ESI
005303a7 : MOV ESI,dword ptr [ESP + 0x10]
005303ab : MOV ESI,dword ptr [ESI]
005303ad : MOV ESI,dword ptr [ESI]
005303af : PUSH EDI
005303b0 : MOV EDI,dword ptr [ESI + 0xc]
005303b3 : AND EDI,ECX
005303b5 : LEA ESI,[EDI + EDI*0x4]
005303b8 : CMP dword ptr [EAX + ESI*0x4 + 0x8],-0x2
005303bd : LEA ESI,[EAX + ESI*0x4 + 0x8]
005303c1 : JZ 0x0053046e
005303c7 : PUSH EBX
005303c8 : MOV EBX,dword ptr [ESI + 0x4]
005303cb : MOV EBX,dword ptr [EBX + 0xc]
005303ce : AND EBX,ECX
005303d0 : CMP EBX,EDI
005303d2 : JNZ 0x0053046d
005303d8 : PUSH EBP
005303d9 : MOV dword ptr [ESP + 0x10],EDI
005303dd : OR EBP,0xffffffff
005303e0 : MOV ECX,dword ptr [ESI + 0x4]
005303e3 : MOV EAX,dword ptr [EAX + 0x4]
005303e6 : AND EAX,dword ptr [ECX + 0xc]
005303e9 : CMP EAX,dword ptr [ESP + 0x10]
005303ed : JNZ 0x00530414
005303ef : MOV ECX,dword ptr [ESP + 0x1c]
005303f3 : MOV EBX,dword ptr [ECX]
005303f5 : MOV ECX,dword ptr [ESI + 0x4]
005303f8 : CMP dword ptr [ECX + 0x4],0x0
005303fc : JNZ 0x00530407
005303fe : CALL 0x00525a80
00530403 : MOV EDX,dword ptr [ESP + 0x14]
00530407 : MOV ECX,dword ptr [EBX]
00530409 : MOV EAX,dword ptr [ESI + 0x4]
0053040c : MOV ECX,dword ptr [ECX + 0x4]
0053040f : CMP ECX,dword ptr [EAX + 0x4]
00530412 : JZ 0x00530428
00530414 : MOV EBP,EDI
00530416 : MOV EDI,dword ptr [ESI]
00530418 : CMP EDI,-0x1
0053041b : JZ 0x0053046c
0053041d : MOV EAX,dword ptr [EDX]
0053041f : LEA ECX,[EDI + EDI*0x4]
00530422 : LEA ESI,[EAX + ECX*0x4 + 0x8]
00530426 : JMP 0x005303e0
00530428 : CMP dword ptr [ESP + 0x10],EDI
0053042c : JNZ 0x00530451
0053042e : MOV EAX,dword ptr [ESI]
00530430 : CMP EAX,-0x1
00530433 : JZ 0x0053045d
00530435 : MOV ECX,dword ptr [EDX]
00530437 : LEA EAX,[EAX + EAX*0x4]
0053043a : LEA EDI,[ECX + EAX*0x4 + 0x8]
0053043e : MOV ECX,ESI
00530440 : CALL 0x00530280
00530445 : PUSH EDI
00530446 : MOV ECX,ESI
00530448 : CALL 0x0052f6e0
0053044d : MOV ESI,EDI
0053044f : JMP 0x0053045d
00530451 : MOV ECX,dword ptr [EDX]
00530453 : MOV EDX,dword ptr [ESI]
00530455 : LEA EAX,[EBP + EBP*0x4]
00530459 : MOV dword ptr [ECX + EAX*0x4 + 0x8],EDX
0053045d : MOV ECX,ESI
0053045f : CALL 0x00530280
00530464 : MOV EAX,dword ptr [ESP + 0x14]
00530468 : MOV EAX,dword ptr [EAX]
0053046a : DEC dword ptr [EAX]
0053046c : POP EBP
0053046d : POP EBX
0053046e : POP EDI
0053046f : POP ESI
00530470 : ADD ESP,0x8
00530473 : RET 0x4
