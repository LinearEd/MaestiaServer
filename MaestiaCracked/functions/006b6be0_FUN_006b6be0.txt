PROGRAM  : Maestia.exe
FUNCTION : FUN_006b6be0
ENTRY    : 006b6be0
BODY     : [[006b6be0, 006b6c89] [006b6c90, 006b6d11]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b6be0(uint param_1,uint param_2)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  uint in_EAX;
  uint uVar4;
  int iVar5;
  uint in_ECX;
  int iVar6;
  int iVar7;
  int *unaff_ESI;
  int iVar8;
  int local_10;
  undefined4 local_8;
  
  if (((param_1 <= param_2) && (in_EAX < (uint)unaff_ESI[3])) && (in_ECX < (uint)unaff_ESI[3])) {
    iVar1 = *(int *)(unaff_ESI[2] + in_EAX * 8);
    local_10 = *(int *)(unaff_ESI[2] + in_ECX * 8);
    uVar4 = in_EAX;
    iVar8 = iVar1;
    if (local_10 < iVar1) {
      uVar4 = in_ECX;
      in_ECX = in_EAX;
      iVar8 = local_10;
      local_10 = iVar1;
    }
    iVar1 = *(int *)(*unaff_ESI + in_ECX * 8);
    iVar6 = *(int *)(unaff_ESI[1] + in_ECX * 8) - iVar1;
    iVar2 = *(int *)(*unaff_ESI + uVar4 * 8);
    iVar7 = *(int *)(unaff_ESI[1] + uVar4 * 8) - iVar2;
    if (iVar8 == local_10) {
      do {
        iVar1 = *(int *)(*unaff_ESI + param_1 * 8);
        iVar8 = iVar6;
        if (iVar1 <= iVar2) {
          iVar8 = iVar7;
        }
        *(int *)(unaff_ESI[1] + param_1 * 8) = iVar1 + iVar8;
        param_1 = param_1 + 1;
      } while (param_1 <= param_2);
      return;
    }
    local_8 = 0;
    bVar3 = false;
    do {
      iVar5 = *(int *)(*unaff_ESI + param_1 * 8);
      if (iVar2 < iVar5) {
        if (iVar5 < iVar1) {
          if (!bVar3) {
            bVar3 = true;
            local_8 = FUN_00685d60(((iVar6 - iVar7) - iVar2) + iVar1,0x10000,local_10 - iVar8);
          }
          iVar5 = FUN_00685ea0(*(int *)(unaff_ESI[2] + param_1 * 8) - iVar8,local_8);
          iVar5 = iVar5 + iVar7 + iVar2;
        }
        else {
          iVar5 = iVar5 + iVar6;
        }
      }
      else {
        iVar5 = iVar5 + iVar7;
      }
      *(int *)(unaff_ESI[1] + param_1 * 8) = iVar5;
      param_1 = param_1 + 1;
    } while (param_1 <= param_2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006b6be0 : MOV EDX,dword ptr [ESP + 0x4]
006b6be4 : SUB ESP,0x14
006b6be7 : CMP EDX,dword ptr [ESP + 0x1c]
006b6beb : JA 0x006b6d0e
006b6bf1 : MOV EDX,dword ptr [ESI + 0xc]
006b6bf4 : CMP EAX,EDX
006b6bf6 : JNC 0x006b6d0e
006b6bfc : CMP ECX,EDX
006b6bfe : JNC 0x006b6d0e
006b6c04 : MOV EDX,dword ptr [ESI + 0x8]
006b6c07 : PUSH EBX
006b6c08 : PUSH EDI
006b6c09 : MOV EDI,dword ptr [EDX + EAX*0x8]
006b6c0c : MOV EDX,dword ptr [EDX + ECX*0x8]
006b6c0f : CMP EDI,EDX
006b6c11 : MOV dword ptr [ESP + 0xc],EDX
006b6c15 : JLE 0x006b6c25
006b6c17 : MOV EBX,EDI
006b6c19 : MOV EDI,EDX
006b6c1b : MOV EDX,EAX
006b6c1d : MOV EAX,ECX
006b6c1f : MOV dword ptr [ESP + 0xc],EBX
006b6c23 : MOV ECX,EDX
006b6c25 : MOV EBX,dword ptr [ESI]
006b6c27 : MOV EDX,dword ptr [EBX + ECX*0x8]
006b6c2a : MOV dword ptr [ESP + 0x10],EDX
006b6c2e : MOV EDX,dword ptr [ESI + 0x4]
006b6c31 : MOV ECX,dword ptr [EDX + ECX*0x8]
006b6c34 : SUB ECX,dword ptr [ESP + 0x10]
006b6c38 : PUSH EBP
006b6c39 : MOV EBP,dword ptr [EBX + EAX*0x8]
006b6c3c : MOV EBX,dword ptr [EDX + EAX*0x8]
006b6c3f : SUB EBX,EBP
006b6c41 : MOV dword ptr [ESP + 0x1c],ECX
006b6c45 : CMP EDI,dword ptr [ESP + 0x10]
006b6c49 : JNZ 0x006b6c73
006b6c4b : MOV EAX,dword ptr [ESP + 0x24]
006b6c4f : NOP
006b6c50 : MOV EDX,dword ptr [ESI]
006b6c52 : MOV EDX,dword ptr [EDX + EAX*0x8]
006b6c55 : CMP EDX,EBP
006b6c57 : JG 0x006b6c5d
006b6c59 : ADD EDX,EBX
006b6c5b : JMP 0x006b6c5f
006b6c5d : ADD EDX,ECX
006b6c5f : MOV EDI,dword ptr [ESI + 0x4]
006b6c62 : MOV dword ptr [EDI + EAX*0x8],EDX
006b6c65 : INC EAX
006b6c66 : CMP EAX,dword ptr [ESP + 0x28]
006b6c6a : JBE 0x006b6c50
006b6c6c : POP EBP
006b6c6d : POP EDI
006b6c6e : POP EBX
006b6c6f : ADD ESP,0x14
006b6c72 : RET
006b6c73 : MOV EDX,dword ptr [ESP + 0x24]
006b6c77 : MOV dword ptr [ESP + 0x18],0x0
006b6c7f : MOV byte ptr [ESP + 0xf],0x0
006b6c84 : MOV dword ptr [ESP + 0x24],EDX
006b6c88 : JMP 0x006b6c94
006b6c90 : MOV ECX,dword ptr [ESP + 0x1c]
006b6c94 : MOV EAX,dword ptr [ESI]
006b6c96 : MOV EAX,dword ptr [EAX + EDX*0x8]
006b6c99 : CMP EAX,EBP
006b6c9b : JG 0x006b6ca1
006b6c9d : ADD EAX,EBX
006b6c9f : JMP 0x006b6cfa
006b6ca1 : MOV EDX,dword ptr [ESP + 0x14]
006b6ca5 : CMP EAX,EDX
006b6ca7 : JL 0x006b6cad
006b6ca9 : ADD EAX,ECX
006b6cab : JMP 0x006b6cf6
006b6cad : CMP byte ptr [ESP + 0xf],0x0
006b6cb2 : JNZ 0x006b6cd8
006b6cb4 : MOV EAX,dword ptr [ESP + 0x10]
006b6cb8 : SUB ECX,EBX
006b6cba : SUB EAX,EDI
006b6cbc : PUSH EAX
006b6cbd : SUB ECX,EBP
006b6cbf : ADD ECX,EDX
006b6cc1 : PUSH 0x10000
006b6cc6 : PUSH ECX
006b6cc7 : MOV byte ptr [ESP + 0x1b],0x1
006b6ccc : CALL 0x00685d60
006b6cd1 : ADD ESP,0xc
006b6cd4 : MOV dword ptr [ESP + 0x18],EAX
006b6cd8 : MOV ECX,dword ptr [ESP + 0x18]
006b6cdc : MOV EDX,dword ptr [ESI + 0x8]
006b6cdf : MOV EAX,dword ptr [ESP + 0x24]
006b6ce3 : PUSH ECX
006b6ce4 : MOV ECX,dword ptr [EDX + EAX*0x8]
006b6ce7 : SUB ECX,EDI
006b6ce9 : PUSH ECX
006b6cea : CALL 0x00685ea0
006b6cef : ADD EAX,EBX
006b6cf1 : ADD ESP,0x8
006b6cf4 : ADD EAX,EBP
006b6cf6 : MOV EDX,dword ptr [ESP + 0x24]
006b6cfa : MOV ECX,dword ptr [ESI + 0x4]
006b6cfd : MOV dword ptr [ECX + EDX*0x8],EAX
006b6d00 : INC EDX
006b6d01 : MOV dword ptr [ESP + 0x24],EDX
006b6d05 : CMP EDX,dword ptr [ESP + 0x28]
006b6d09 : JBE 0x006b6c90
006b6d0b : POP EBP
006b6d0c : POP EDI
006b6d0d : POP EBX
006b6d0e : ADD ESP,0x14
006b6d11 : RET
