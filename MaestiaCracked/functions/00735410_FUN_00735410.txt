PROGRAM  : Maestia.exe
FUNCTION : FUN_00735410
ENTRY    : 00735410
BODY     : [[00735410, 0073568d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00735410(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  int iVar8;
  int in_ECX;
  undefined4 *puVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint local_28;
  
  iVar7 = FUN_0070a3a0();
  fVar4 = DAT_00d72c24;
  uVar6 = 0;
  if (*(short *)(in_ECX + 0x10) != 0) {
    do {
      uVar11 = (uint)uVar6;
      puVar9 = (undefined4 *)(uVar11 * 0x54 + iVar7);
      iVar8 = uVar11 * 0xc;
      *puVar9 = *(undefined4 *)(iVar8 + param_1);
      puVar9[1] = *(undefined4 *)(iVar8 + 4 + param_1);
      puVar9[2] = *(undefined4 *)(iVar8 + 8 + param_1);
      puVar9[3] = *(undefined4 *)(iVar8 + param_2);
      puVar9[4] = *(undefined4 *)(iVar8 + 4 + param_2);
      puVar9[5] = *(undefined4 *)(iVar8 + 8 + param_2);
      puVar9[7] = *(undefined4 *)(param_3 + uVar11 * 8);
      puVar9[8] = *(undefined4 *)(param_3 + 4 + uVar11 * 8);
      if (param_4 == 0) {
        puVar9[6] = 0xffffffff;
      }
      else {
        fVar1 = *(float *)(iVar8 + param_4);
        fVar2 = *(float *)(iVar8 + 4 + param_4);
        fVar3 = *(float *)(iVar8 + 8 + param_4);
        if (fVar1 < 1.0) {
          if (0.0 < fVar1) {
            local_28 = (uint)(longlong)ROUND(fVar1 * 255.0 + fVar4);
            uVar10 = local_28;
          }
          else {
            uVar10 = 0;
          }
        }
        else {
          uVar10 = 0xff;
        }
        if (fVar2 < 1.0) {
          if (0.0 < fVar2) {
            local_28 = (uint)(longlong)ROUND(fVar2 * 255.0 + fVar4);
            uVar12 = local_28;
          }
          else {
            uVar12 = 0;
          }
        }
        else {
          uVar12 = 0xff;
        }
        if (fVar3 < 1.0) {
          if (0.0 < fVar3) {
            local_28 = (uint)(longlong)ROUND(fVar3 * 255.0 + fVar4);
          }
          else {
            local_28 = 0;
          }
        }
        else {
          local_28 = 0xff;
        }
        puVar9[6] = ((uVar10 | 0xffffff00) << 8 | uVar12) << 8 | local_28;
      }
      iVar8 = uVar11 * 0x10 + param_5;
      puVar9[7] = *(undefined4 *)(uVar11 * 0x10 + param_5);
      puVar9[8] = *(undefined4 *)(iVar8 + 4);
      puVar9[0xb] = *(undefined4 *)(iVar8 + 8);
      uVar5 = 0;
      puVar9[0xc] = *(undefined4 *)(iVar8 + 0xc);
      if (*(short *)(param_6 + uVar11 * 8) == 0) {
LAB_0073562a:
        puVar9 = (undefined4 *)(iVar7 + 0x34 + (uVar11 * 0x15 + (uint)uVar5) * 4);
        uVar11 = (uint)(ushort)(4 - uVar5);
        do {
          puVar9[4] = 0;
          *puVar9 = 0;
          puVar9 = puVar9 + 1;
          uVar11 = uVar11 - 1;
        } while (uVar11 != 0);
      }
      else {
        do {
          uVar10 = (uint)uVar5;
          iVar8 = uVar11 * 0x15 + uVar10;
          *(float *)(iVar7 + 0x44 + iVar8 * 4) =
               (float)*(ushort *)(*(int *)(param_6 + 4 + uVar11 * 8) + 4 + uVar10 * 8);
          *(undefined4 *)(iVar7 + 0x34 + iVar8 * 4) =
               *(undefined4 *)(*(int *)(param_6 + 4 + uVar11 * 8) + uVar10 * 8);
          uVar5 = uVar5 + 1;
        } while (uVar5 < *(ushort *)(param_6 + uVar11 * 8));
        if (uVar5 < 4) goto LAB_0073562a;
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ushort *)(in_ECX + 0x10));
  }
  FUN_007377f0(iVar7);
  FUN_0070a260(iVar7);
  return;
}



============================================================
DISASSEMBLY
============================================================
00735410 : PUSH EBP
00735411 : MOV EBP,ESP
00735413 : AND ESP,0xfffffff8
00735416 : SUB ESP,0x2c
00735419 : PUSH EBX
0073541a : PUSH ESI
0073541b : PUSH EDI
0073541c : MOV EDI,ECX
0073541e : MOVZX ECX,word ptr [EDI + 0x10]
00735422 : IMUL ECX,ECX,0x54
00735425 : MOV dword ptr [ESP + 0x24],EDI
00735429 : CALL 0x0070a3a0
0073542e : MOV ESI,EAX
00735430 : XOR EAX,EAX
00735432 : XOR ECX,ECX
00735434 : MOV dword ptr [ESP + 0x10],ESI
00735438 : MOV dword ptr [ESP + 0x14],EAX
0073543c : CMP CX,word ptr [EDI + 0x10]
00735440 : JNC 0x00735674
00735446 : FLD float ptr [0x00cdf130]
0073544c : MOV EBX,dword ptr [EBP + 0xc]
0073544f : MOVSS XMM4,dword ptr [0x00c10fc4]
00735457 : FLD float ptr [0x00d72c24]
0073545d : XORPS XMM2,XMM2
00735460 : MOVZX EDX,AX
00735463 : MOV ECX,EDX
00735465 : IMUL ECX,ECX,0x54
00735468 : ADD ECX,ESI
0073546a : MOV ESI,dword ptr [EBP + 0x8]
0073546d : LEA EAX,[EDX + EDX*0x2]
00735470 : ADD EAX,EAX
00735472 : ADD EAX,EAX
00735474 : FLD float ptr [EAX + ESI*0x1]
00735477 : FSTP float ptr [ECX]
00735479 : FLD float ptr [EAX + ESI*0x1 + 0x4]
0073547d : FSTP float ptr [ECX + 0x4]
00735480 : FLD float ptr [EAX + ESI*0x1 + 0x8]
00735484 : MOV ESI,dword ptr [EBP + 0x10]
00735487 : FSTP float ptr [ECX + 0x8]
0073548a : FLD float ptr [EAX + EBX*0x1]
0073548d : FSTP float ptr [ECX + 0xc]
00735490 : FLD float ptr [EAX + EBX*0x1 + 0x4]
00735494 : FSTP float ptr [ECX + 0x10]
00735497 : FLD float ptr [EAX + EBX*0x1 + 0x8]
0073549b : FSTP float ptr [ECX + 0x14]
0073549e : FLD float ptr [ESI + EDX*0x8]
007354a1 : FSTP float ptr [ECX + 0x1c]
007354a4 : FLD float ptr [ESI + EDX*0x8 + 0x4]
007354a8 : MOV ESI,dword ptr [EBP + 0x14]
007354ab : FSTP float ptr [ECX + 0x20]
007354ae : TEST ESI,ESI
007354b0 : JNZ 0x007354be
007354b2 : MOV dword ptr [ECX + 0x18],0xffffffff
007354b9 : JMP 0x007355b1
007354be : MOVSS XMM0,dword ptr [EAX + ESI*0x1]
007354c3 : COMISS XMM0,XMM4
007354c6 : MOVSS XMM1,dword ptr [EAX + ESI*0x1 + 0x4]
007354cc : MOVSS XMM3,dword ptr [EAX + ESI*0x1 + 0x8]
007354d2 : MOVSS dword ptr [ESP + 0x28],XMM0
007354d8 : MOVSS dword ptr [ESP + 0x2c],XMM1
007354de : MOVSS dword ptr [ESP + 0x30],XMM3
007354e4 : JC 0x007354ed
007354e6 : MOV ESI,0xff
007354eb : JMP 0x00735520
007354ed : COMISS XMM2,XMM0
007354f0 : JC 0x007354f6
007354f2 : XOR ESI,ESI
007354f4 : JMP 0x00735520
007354f6 : FLD float ptr [ESP + 0x28]
007354fa : FNSTCW word ptr [ESP + 0xe]
007354fe : MOVZX EAX,word ptr [ESP + 0xe]
00735503 : FMUL ST2
00735505 : OR EAX,0xc00
0073550a : MOV dword ptr [ESP + 0x18],EAX
0073550e : FADD ST0,ST1
00735510 : FLDCW word ptr [ESP + 0x18]
00735514 : FISTP qword ptr [ESP + 0x18]
00735518 : MOV ESI,dword ptr [ESP + 0x18]
0073551c : FLDCW word ptr [ESP + 0xe]
00735520 : COMISS XMM1,XMM4
00735523 : JC 0x0073552c
00735525 : MOV EDI,0xff
0073552a : JMP 0x0073555f
0073552c : COMISS XMM2,XMM1
0073552f : JC 0x00735535
00735531 : XOR EDI,EDI
00735533 : JMP 0x0073555f
00735535 : FLD float ptr [ESP + 0x2c]
00735539 : FNSTCW word ptr [ESP + 0xe]
0073553d : MOVZX EAX,word ptr [ESP + 0xe]
00735542 : FMUL ST2
00735544 : OR EAX,0xc00
00735549 : MOV dword ptr [ESP + 0x18],EAX
0073554d : FADD ST0,ST1
0073554f : FLDCW word ptr [ESP + 0x18]
00735553 : FISTP qword ptr [ESP + 0x18]
00735557 : MOV EDI,dword ptr [ESP + 0x18]
0073555b : FLDCW word ptr [ESP + 0xe]
0073555f : COMISS XMM3,XMM4
00735562 : JC 0x0073556b
00735564 : MOV EAX,0xff
00735569 : JMP 0x0073559e
0073556b : COMISS XMM2,XMM3
0073556e : JC 0x00735574
00735570 : XOR EAX,EAX
00735572 : JMP 0x0073559e
00735574 : FLD float ptr [ESP + 0x30]
00735578 : FNSTCW word ptr [ESP + 0xe]
0073557c : MOVZX EAX,word ptr [ESP + 0xe]
00735581 : FMUL ST2
00735583 : OR EAX,0xc00
00735588 : MOV dword ptr [ESP + 0x18],EAX
0073558c : FADD ST0,ST1
0073558e : FLDCW word ptr [ESP + 0x18]
00735592 : FISTP qword ptr [ESP + 0x18]
00735596 : MOV EAX,dword ptr [ESP + 0x18]
0073559a : FLDCW word ptr [ESP + 0xe]
0073559e : OR ESI,0xffffff00
007355a4 : SHL ESI,0x8
007355a7 : OR ESI,EDI
007355a9 : SHL ESI,0x8
007355ac : OR ESI,EAX
007355ae : MOV dword ptr [ECX + 0x18],ESI
007355b1 : MOV ESI,dword ptr [EBP + 0x18]
007355b4 : MOV EAX,EDX
007355b6 : SHL EAX,0x4
007355b9 : FLD float ptr [EAX + ESI*0x1]
007355bc : ADD EAX,ESI
007355be : MOV ESI,dword ptr [EBP + 0x1c]
007355c1 : FSTP float ptr [ECX + 0x1c]
007355c4 : FLD float ptr [EAX + 0x4]
007355c7 : FSTP float ptr [ECX + 0x20]
007355ca : FLD float ptr [EAX + 0x8]
007355cd : FSTP float ptr [ECX + 0x2c]
007355d0 : FLD float ptr [EAX + 0xc]
007355d3 : XOR EAX,EAX
007355d5 : FSTP float ptr [ECX + 0x30]
007355d8 : XOR ECX,ECX
007355da : CMP CX,word ptr [ESI + EDX*0x8]
007355de : JNC 0x0073562a
007355e0 : MOV EDI,EDX
007355e2 : IMUL EDI,EDI,0x15
007355e5 : MOV EBX,dword ptr [EBP + 0x1c]
007355e8 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
007355ec : MOVZX ECX,AX
007355ef : MOVZX EBX,word ptr [EBX + ECX*0x8 + 0x4]
007355f4 : CVTSI2SS XMM0,EBX
007355f8 : MOV EBX,dword ptr [ESP + 0x10]
007355fc : LEA ESI,[EDI + ECX*0x1]
007355ff : MOVSS dword ptr [EBX + ESI*0x4 + 0x44],XMM0
00735605 : MOV EBX,dword ptr [EBP + 0x1c]
00735608 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
0073560c : FLD float ptr [EBX + ECX*0x8]
0073560f : MOV ECX,dword ptr [ESP + 0x10]
00735613 : FSTP float ptr [ECX + ESI*0x4 + 0x34]
00735617 : MOV ECX,dword ptr [EBP + 0x1c]
0073561a : INC EAX
0073561b : CMP AX,word ptr [ECX + EDX*0x8]
0073561f : JC 0x007355e5
00735621 : MOV EBX,dword ptr [EBP + 0xc]
00735624 : CMP AX,0x4
00735628 : JNC 0x00735655
0073562a : IMUL EDX,EDX,0x15
0073562d : MOVZX ECX,AX
00735630 : ADD EDX,ECX
00735632 : MOV ECX,dword ptr [ESP + 0x10]
00735636 : LEA ECX,[ECX + EDX*0x4 + 0x34]
0073563a : MOV EDX,0x4
0073563f : SUB EDX,EAX
00735641 : MOVZX EAX,DX
00735644 : MOVSS dword ptr [ECX + 0x10],XMM2
00735649 : MOVSS dword ptr [ECX],XMM2
0073564d : ADD ECX,0x4
00735650 : SUB EAX,0x1
00735653 : JNZ 0x00735644
00735655 : MOV EAX,dword ptr [ESP + 0x14]
00735659 : MOV EDI,dword ptr [ESP + 0x24]
0073565d : MOV ESI,dword ptr [ESP + 0x10]
00735661 : INC EAX
00735662 : MOV dword ptr [ESP + 0x14],EAX
00735666 : CMP AX,word ptr [EDI + 0x10]
0073566a : JC 0x00735460
00735670 : FSTP ST1
00735672 : FSTP ST0
00735674 : PUSH ESI
00735675 : MOV ECX,EDI
00735677 : CALL 0x007377f0
0073567c : PUSH ESI
0073567d : CALL 0x0070a260
00735682 : ADD ESP,0x4
00735685 : POP EDI
00735686 : POP ESI
00735687 : POP EBX
00735688 : MOV ESP,EBP
0073568a : POP EBP
0073568b : RET 0x18
