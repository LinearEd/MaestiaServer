PROGRAM  : Maestia.exe
FUNCTION : FUN_00677270
ENTRY    : 00677270
BODY     : [[00677270, 006772ed]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00677270(undefined4 param_1,int param_2)

{
  int iVar1;
  int *in_ECX;
  uint uVar2;
  
  if (param_2 == 0) {
    if (*in_ECX != 0) {
      FUN_00515cf0(*in_ECX);
      *in_ECX = 0;
    }
    in_ECX[2] = 0;
    return;
  }
  uVar2 = param_2 + 3U >> 2;
  if (*in_ECX != 0) {
    iVar1 = FUN_00515c80(*in_ECX,uVar2 * 0x60);
    in_ECX[2] = uVar2 * 4;
    *in_ECX = iVar1;
    return;
  }
  param_2 = 2;
  iVar1 = FUN_00515d60(param_1,uVar2 * 0x60,&param_2);
  in_ECX[2] = uVar2 * 4;
  *in_ECX = iVar1;
  return;
}



============================================================
DISASSEMBLY
============================================================
00677270 : MOV EAX,dword ptr [ESP + 0x8]
00677274 : PUSH EDI
00677275 : MOV EDI,ECX
00677277 : TEST EAX,EAX
00677279 : JNZ 0x00677298
0067727b : MOV EAX,dword ptr [EDI]
0067727d : TEST EAX,EAX
0067727f : JZ 0x0067728d
00677281 : PUSH EAX
00677282 : CALL 0x00515cf0
00677287 : MOV dword ptr [EDI],0x0
0067728d : MOV dword ptr [EDI + 0x8],0x0
00677294 : POP EDI
00677295 : RET 0x8
00677298 : PUSH ESI
00677299 : LEA ESI,[EAX + 0x3]
0067729c : MOV EAX,dword ptr [EDI]
0067729e : SHR ESI,0x2
006772a1 : ADD ESI,ESI
006772a3 : ADD ESI,ESI
006772a5 : TEST EAX,EAX
006772a7 : JZ 0x006772c3
006772a9 : LEA ECX,[ESI + ESI*0x2]
006772ac : ADD ECX,ECX
006772ae : ADD ECX,ECX
006772b0 : ADD ECX,ECX
006772b2 : PUSH ECX
006772b3 : PUSH EAX
006772b4 : CALL 0x00515c80
006772b9 : MOV dword ptr [EDI + 0x8],ESI
006772bc : POP ESI
006772bd : MOV dword ptr [EDI],EAX
006772bf : POP EDI
006772c0 : RET 0x8
006772c3 : MOV ECX,dword ptr [ESP + 0xc]
006772c7 : LEA EAX,[ESI + ESI*0x2]
006772ca : ADD EAX,EAX
006772cc : LEA EDX,[ESP + 0x10]
006772d0 : ADD EAX,EAX
006772d2 : PUSH EDX
006772d3 : ADD EAX,EAX
006772d5 : PUSH EAX
006772d6 : PUSH ECX
006772d7 : MOV dword ptr [ESP + 0x1c],0x2
006772df : CALL 0x00515d60
006772e4 : MOV dword ptr [EDI + 0x8],ESI
006772e7 : POP ESI
006772e8 : MOV dword ptr [EDI],EAX
006772ea : POP EDI
006772eb : RET 0x8
