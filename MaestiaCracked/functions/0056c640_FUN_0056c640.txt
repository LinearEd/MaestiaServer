PROGRAM  : Maestia.exe
FUNCTION : FUN_0056c640
ENTRY    : 0056c640
BODY     : [[0056c640, 0056c713]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056c640(char param_1)

{
  float fVar1;
  int *piVar2;
  int iVar3;
  int *in_ECX;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  float fStack_38;
  float fStack_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  *(char *)(in_ECX + 1) = param_1;
  if (param_1 == '\0') {
    GMatrix2D::SetIdentity((GMatrix2D *)&local_18);
    piVar2 = (int *)*in_ECX;
    if (piVar2[8] != 0) {
      GMatrix2D::SetIdentity((GMatrix2D *)&local_30);
      FUN_0051cdf0(&local_30);
      local_18 = local_30;
      local_14 = local_2c;
      local_10 = local_28;
      local_c = local_24;
      local_8 = local_20;
      local_4 = local_1c;
    }
    iVar3 = (**(code **)(*piVar2 + 0x40))();
    uStack_3c = *(undefined4 *)(iVar3 + 0x95c);
    uStack_40 = *(undefined4 *)(iVar3 + 0x958);
    GMatrix2D::TransformByInverse
              ((GMatrix2D *)&local_18,(GPoint<float> *)&fStack_38,(GPoint<float> *)&uStack_40);
    fVar1 = (float)piVar2[0x16];
    in_ECX[6] = (int)((float)piVar2[0x13] - fStack_38);
    in_ECX[7] = (int)(fVar1 - fStack_34);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0056c640 : MOV AL,byte ptr [ESP + 0x4]
0056c644 : SUB ESP,0x40
0056c647 : PUSH EDI
0056c648 : MOV EDI,ECX
0056c64a : MOV byte ptr [EDI + 0x4],AL
0056c64d : TEST AL,AL
0056c64f : JNZ 0x0056c70d
0056c655 : PUSH EBX
0056c656 : PUSH ESI
0056c657 : LEA ECX,[ESP + 0x34]
0056c65b : CALL 0x00522b80
0056c660 : MOV ESI,dword ptr [EDI]
0056c662 : MOV EBX,dword ptr [ESI + 0x20]
0056c665 : TEST EBX,EBX
0056c667 : JZ 0x0056c6ae
0056c669 : LEA ECX,[ESP + 0x1c]
0056c66d : CALL 0x00522b80
0056c672 : LEA EAX,[ESP + 0x1c]
0056c676 : PUSH EAX
0056c677 : MOV ECX,EBX
0056c679 : CALL 0x0051cdf0
0056c67e : FLD float ptr [ESP + 0x1c]
0056c682 : FSTP float ptr [ESP + 0x34]
0056c686 : FLD float ptr [ESP + 0x20]
0056c68a : FSTP float ptr [ESP + 0x38]
0056c68e : FLD float ptr [ESP + 0x24]
0056c692 : FSTP float ptr [ESP + 0x3c]
0056c696 : FLD float ptr [ESP + 0x28]
0056c69a : FSTP float ptr [ESP + 0x40]
0056c69e : FLD float ptr [ESP + 0x2c]
0056c6a2 : FSTP float ptr [ESP + 0x44]
0056c6a6 : FLD float ptr [ESP + 0x30]
0056c6aa : FSTP float ptr [ESP + 0x48]
0056c6ae : MOV EDX,dword ptr [ESI]
0056c6b0 : MOV EAX,dword ptr [EDX + 0x40]
0056c6b3 : MOV ECX,ESI
0056c6b5 : CALL EAX
0056c6b7 : FLD float ptr [EAX + 0x95c]
0056c6bd : ADD EAX,0x958
0056c6c2 : FSTP float ptr [ESP + 0x50]
0056c6c6 : FLD float ptr [EAX]
0056c6c8 : LEA ECX,[ESP + 0xc]
0056c6cc : FSTP float ptr [ESP + 0xc]
0056c6d0 : PUSH ECX
0056c6d1 : FLD float ptr [ESP + 0x54]
0056c6d5 : LEA EDX,[ESP + 0x18]
0056c6d9 : PUSH EDX
0056c6da : FSTP float ptr [ESP + 0x18]
0056c6de : LEA ECX,[ESP + 0x3c]
0056c6e2 : CALL 0x00522fa0
0056c6e7 : FLD float ptr [ESI + 0x4c]
0056c6ea : FSTP float ptr [ESP + 0x24]
0056c6ee : FLD float ptr [ESI + 0x58]
0056c6f1 : POP ESI
0056c6f2 : FSTP float ptr [ESP + 0x2c]
0056c6f6 : POP EBX
0056c6f7 : FLD float ptr [ESP + 0x1c]
0056c6fb : FSUB float ptr [ESP + 0xc]
0056c6ff : FSTP float ptr [EDI + 0x18]
0056c702 : FLD float ptr [ESP + 0x28]
0056c706 : FSUB float ptr [ESP + 0x10]
0056c70a : FSTP float ptr [EDI + 0x1c]
0056c70d : POP EDI
0056c70e : ADD ESP,0x40
0056c711 : RET 0x4
