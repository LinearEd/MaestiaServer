PROGRAM  : Maestia.exe
FUNCTION : FUN_0077cb20
ENTRY    : 0077cb20
BODY     : [[0077cb20, 0077ccc3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0077cb20(short *param_1)

{
  short sVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  short *psVar5;
  int in_ECX;
  wchar_t *pwVar6;
  int *local_438;
  undefined1 local_434 [28];
  wchar_t local_418 [512];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b27b11;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar3 = *(int *)(DAT_017251ac + 0x18);
  if (iVar3 != 0) {
    piVar2 = *(int **)(in_ECX + 0x1c);
    if (piVar2 != (int *)0x0) {
      (**(code **)(*piVar2 + 8))(piVar2,local_18);
      *(undefined4 *)(in_ECX + 0x1c) = 0;
    }
    local_438 = (int *)0x0;
    iVar3 = D3DXCreateEffectFromFileW
                      (iVar3,param_1,0,0,0,0,(undefined4 *)(in_ECX + 0x1c),&local_438);
    if (iVar3 < 0) {
      if (local_438 != (int *)0x0) {
        uVar4 = (**(code **)(*local_438 + 0xc))(local_438);
        pwVar6 = local_418;
        for (iVar3 = 0x100; iVar3 != 0; iVar3 = iVar3 + -1) {
          pwVar6[0] = L'\0';
          pwVar6[1] = L'\0';
          pwVar6 = pwVar6 + 2;
        }
        _swprintf_s(local_418,0x200,L"%S",uVar4);
        FUN_00406460(local_418);
        local_8 = 0;
        (*(code *)PTR_FUN_00d6d23c)("ShaderData Load Error(");
        FUN_00464320(local_434);
        (*(code *)PTR_FUN_00d6d23c)(&DAT_00c10884);
        if (local_438 != (int *)0x0) {
          (**(code **)(*local_438 + 8))(local_438);
          local_438 = (int *)0x0;
        }
        local_8 = 0xffffffff;
        FUN_00406560();
      }
    }
    else {
      if (local_438 != (int *)0x0) {
        (**(code **)(*local_438 + 8))(local_438);
        local_438 = (int *)0x0;
      }
      psVar5 = param_1;
      do {
        sVar1 = *psVar5;
        psVar5 = psVar5 + 1;
      } while (sVar1 != 0);
      FUN_00406360(param_1,(int)psVar5 - (int)(param_1 + 1) >> 1);
      FUN_0077ca40(in_ECX);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0077cb20 : PUSH EBP
0077cb21 : MOV EBP,ESP
0077cb23 : PUSH -0x1
0077cb25 : PUSH 0xb27b11
0077cb2a : MOV EAX,FS:[0x0]
0077cb30 : PUSH EAX
0077cb31 : SUB ESP,0x430
0077cb37 : MOV EAX,[0x00d66fa0]
0077cb3c : XOR EAX,EBP
0077cb3e : MOV dword ptr [EBP + -0x14],EAX
0077cb41 : PUSH EBX
0077cb42 : PUSH ESI
0077cb43 : PUSH EDI
0077cb44 : PUSH EAX
0077cb45 : LEA EAX,[EBP + -0xc]
0077cb48 : MOV FS:[0x0],EAX
0077cb4e : MOV EAX,[0x017251ac]
0077cb53 : MOV EDI,dword ptr [EAX + 0x18]
0077cb56 : MOV EBX,dword ptr [EBP + 0x8]
0077cb59 : MOV ESI,ECX
0077cb5b : MOV dword ptr [EBP + 0xfffffbc8],ESI
0077cb61 : TEST EDI,EDI
0077cb63 : JZ 0x0077cc61
0077cb69 : MOV EAX,dword ptr [ESI + 0x1c]
0077cb6c : ADD ESI,0x1c
0077cb6f : TEST EAX,EAX
0077cb71 : JZ 0x0077cb81
0077cb73 : MOV ECX,dword ptr [EAX]
0077cb75 : MOV EDX,dword ptr [ECX + 0x8]
0077cb78 : PUSH EAX
0077cb79 : CALL EDX
0077cb7b : MOV dword ptr [ESI],0x0
0077cb81 : LEA EAX,[EBP + 0xfffffbcc]
0077cb87 : PUSH EAX
0077cb88 : PUSH ESI
0077cb89 : PUSH 0x0
0077cb8b : PUSH 0x0
0077cb8d : PUSH 0x0
0077cb8f : PUSH 0x0
0077cb91 : PUSH EBX
0077cb92 : PUSH EDI
0077cb93 : MOV dword ptr [EBP + 0xfffffbcc],0x0
0077cb9d : CALL 0x00664d0e
0077cba2 : XOR ESI,ESI
0077cba4 : CMP EAX,ESI
0077cba6 : MOV EAX,dword ptr [EBP + 0xfffffbcc]
0077cbac : JGE 0x0077cc65
0077cbb2 : CMP EAX,ESI
0077cbb4 : JZ 0x0077cc61
0077cbba : MOV ECX,dword ptr [EAX]
0077cbbc : MOV EDX,dword ptr [ECX + 0xc]
0077cbbf : PUSH EAX
0077cbc0 : CALL EDX
0077cbc2 : MOV EDX,EAX
0077cbc4 : XOR EAX,EAX
0077cbc6 : MOVZX EBX,AX
0077cbc9 : MOV EAX,EBX
0077cbcb : PUSH EDX
0077cbcc : SHL EBX,0x10
0077cbcf : OR EAX,EBX
0077cbd1 : MOV ECX,0x100
0077cbd6 : LEA EDI,[EBP + 0xfffffbec]
0077cbdc : PUSH 0xc10864
0077cbe1 : STOSD.REP ES:EDI
0077cbe3 : LEA EAX,[EBP + 0xfffffbec]
0077cbe9 : PUSH 0x200
0077cbee : PUSH EAX
0077cbef : CALL 0x00635d51
0077cbf4 : ADD ESP,0x10
0077cbf7 : LEA ECX,[EBP + 0xfffffbec]
0077cbfd : PUSH ECX
0077cbfe : LEA ECX,[EBP + 0xfffffbd0]
0077cc04 : CALL 0x00406460
0077cc09 : MOV dword ptr [EBP + -0x4],ESI
0077cc0c : PUSH 0xc1086c
0077cc11 : CALL dword ptr [0x00d6d23c]
0077cc17 : LEA EDX,[EBP + 0xfffffbd0]
0077cc1d : ADD ESP,0x4
0077cc20 : PUSH EDX
0077cc21 : CALL 0x00464320
0077cc26 : ADD ESP,0x4
0077cc29 : PUSH 0xc10884
0077cc2e : CALL dword ptr [0x00d6d23c]
0077cc34 : MOV EAX,dword ptr [EBP + 0xfffffbcc]
0077cc3a : ADD ESP,0x4
0077cc3d : CMP EAX,ESI
0077cc3f : JZ 0x0077cc4f
0077cc41 : MOV ECX,dword ptr [EAX]
0077cc43 : MOV EDX,dword ptr [ECX + 0x8]
0077cc46 : PUSH EAX
0077cc47 : CALL EDX
0077cc49 : MOV dword ptr [EBP + 0xfffffbcc],ESI
0077cc4f : MOV dword ptr [EBP + -0x4],0xffffffff
0077cc56 : LEA ECX,[EBP + 0xfffffbd0]
0077cc5c : CALL 0x00406560
0077cc61 : XOR AL,AL
0077cc63 : JMP 0x0077cca6
0077cc65 : CMP EAX,ESI
0077cc67 : JZ 0x0077cc77
0077cc69 : MOV ECX,dword ptr [EAX]
0077cc6b : MOV EDX,dword ptr [ECX + 0x8]
0077cc6e : PUSH EAX
0077cc6f : CALL EDX
0077cc71 : MOV dword ptr [EBP + 0xfffffbcc],ESI
0077cc77 : MOV EAX,EBX
0077cc79 : LEA EDX,[EAX + 0x2]
0077cc7c : LEA ESP,[ESP]
0077cc80 : MOV CX,word ptr [EAX]
0077cc83 : ADD EAX,0x2
0077cc86 : CMP CX,SI
0077cc89 : JNZ 0x0077cc80
0077cc8b : MOV ESI,dword ptr [EBP + 0xfffffbc8]
0077cc91 : SUB EAX,EDX
0077cc93 : SAR EAX,0x1
0077cc95 : PUSH EAX
0077cc96 : PUSH EBX
0077cc97 : MOV ECX,ESI
0077cc99 : CALL 0x00406360
0077cc9e : PUSH ESI
0077cc9f : CALL 0x0077ca40
0077cca4 : MOV AL,0x1
0077cca6 : MOV ECX,dword ptr [EBP + -0xc]
0077cca9 : MOV dword ptr FS:[0x0],ECX
0077ccb0 : POP ECX
0077ccb1 : POP EDI
0077ccb2 : POP ESI
0077ccb3 : POP EBX
0077ccb4 : MOV ECX,dword ptr [EBP + -0x14]
0077ccb7 : XOR ECX,EBP
0077ccb9 : CALL 0x00633e6b
0077ccbe : MOV ESP,EBP
0077ccc0 : POP EBP
0077ccc1 : RET 0x4
