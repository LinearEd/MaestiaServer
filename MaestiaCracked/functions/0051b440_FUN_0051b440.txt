PROGRAM  : Maestia.exe
FUNCTION : FUN_0051b440
ENTRY    : 0051b440
BODY     : [[0051b440, 0051b48c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051b440(uint param_1)

{
  uint uVar1;
  int iVar2;
  int *in_ECX;
  
  if ((uint)in_ECX[2] <= param_1) {
    uVar1 = in_ECX[3] + param_1 & ~(in_ECX[3] - 1U);
    in_ECX[2] = uVar1;
    if (*in_ECX == 0) {
      iVar2 = FUN_00515840(uVar1,0);
    }
    else {
      iVar2 = FUN_00515c80(*in_ECX,uVar1);
    }
    *in_ECX = iVar2;
  }
  *(undefined1 *)(in_ECX + 4) = 0;
  in_ECX[1] = param_1;
  if (*in_ECX != 0) {
    *(undefined1 *)(*in_ECX + param_1) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0051b440 : PUSH ESI
0051b441 : PUSH EDI
0051b442 : MOV EDI,dword ptr [ESP + 0xc]
0051b446 : MOV ESI,ECX
0051b448 : CMP EDI,dword ptr [ESI + 0x8]
0051b44b : JC 0x0051b477
0051b44d : MOV ECX,dword ptr [ESI + 0xc]
0051b450 : LEA EAX,[ECX + EDI*0x1]
0051b453 : DEC ECX
0051b454 : NOT ECX
0051b456 : AND EAX,ECX
0051b458 : MOV ECX,dword ptr [ESI]
0051b45a : MOV dword ptr [ESI + 0x8],EAX
0051b45d : TEST ECX,ECX
0051b45f : JNZ 0x0051b46e
0051b461 : MOV ECX,dword ptr [ESI + 0x14]
0051b464 : PUSH 0x0
0051b466 : PUSH EAX
0051b467 : CALL 0x00515840
0051b46c : JMP 0x0051b475
0051b46e : PUSH EAX
0051b46f : PUSH ECX
0051b470 : CALL 0x00515c80
0051b475 : MOV dword ptr [ESI],EAX
0051b477 : MOV byte ptr [ESI + 0x10],0x0
0051b47b : MOV dword ptr [ESI + 0x4],EDI
0051b47e : MOV ESI,dword ptr [ESI]
0051b480 : TEST ESI,ESI
0051b482 : JZ 0x0051b488
0051b484 : MOV byte ptr [ESI + EDI*0x1],0x0
0051b488 : POP EDI
0051b489 : POP ESI
0051b48a : RET 0x4
