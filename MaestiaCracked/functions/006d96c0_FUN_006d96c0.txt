PROGRAM  : Maestia.exe
FUNCTION : FUN_006d96c0
ENTRY    : 006d96c0
BODY     : [[006d96c0, 006d98ce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006d96c0(int *param_1)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  char cVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  
  piVar3 = param_1;
  if (param_1[5] != 0xca) {
    *(undefined4 *)(*param_1 + 0x14) = 0x14;
    *(int *)(*param_1 + 0x18) = param_1[5];
    (**(code **)*param_1)(param_1);
  }
  iVar5 = param_1[0xc];
  uVar2 = param_1[0xd];
  if ((uint)(iVar5 * 8) < uVar2 || iVar5 * 8 - uVar2 == 0) {
    iVar5 = FUN_006d9580(param_1[7],8);
    param_1[0x17] = iVar5;
    iVar5 = FUN_006d9580(param_1[8],8);
    param_1[0x46] = 1;
  }
  else if ((uint)(iVar5 * 4) < uVar2 || iVar5 * 4 - uVar2 == 0) {
    iVar5 = FUN_006d9580(param_1[7],4);
    param_1[0x17] = iVar5;
    iVar5 = FUN_006d9580(param_1[8],4);
    param_1[0x46] = 2;
  }
  else if (uVar2 < (uint)(iVar5 * 2)) {
    iVar5 = param_1[8];
    param_1[0x17] = param_1[7];
    param_1[0x46] = 8;
  }
  else {
    iVar5 = FUN_006d9580(param_1[7],2);
    param_1[0x17] = iVar5;
    iVar5 = FUN_006d9580(param_1[8],2);
    param_1[0x46] = 4;
  }
  piVar7 = param_1 + 9;
  piVar1 = param_1 + 0x31;
  param_1[0x18] = iVar5;
  param_1 = (int *)0x0;
  if (0 < *piVar7) {
    piVar7 = (int *)(*piVar1 + 0xc);
    do {
      iVar5 = piVar3[0x46];
      iVar6 = iVar5;
      if (iVar5 < 8) {
        do {
          if ((piVar3[0x44] * iVar5 < piVar7[-1] * iVar6 * 2) ||
             (piVar3[0x45] * iVar5 < *piVar7 * iVar6 * 2)) break;
          iVar6 = iVar6 * 2;
        } while (iVar6 < 8);
      }
      piVar7[6] = iVar6;
      param_1 = (int *)((int)param_1 + 1);
      piVar7 = piVar7 + 0x15;
    } while ((int)param_1 < piVar3[9]);
  }
  iVar5 = 0;
  if (0 < piVar3[9]) {
    piVar7 = (int *)(piVar3[0x31] + 0x24);
    do {
      iVar6 = FUN_006d9580(piVar7[-7] * *piVar7 * piVar3[7],piVar3[0x44] * 8);
      piVar7[1] = iVar6;
      iVar6 = FUN_006d9580(piVar7[-6] * piVar3[8] * *piVar7,piVar3[0x45] * 8);
      piVar7[2] = iVar6;
      iVar5 = iVar5 + 1;
      piVar7 = piVar7 + 0x15;
    } while (iVar5 < piVar3[9]);
  }
  switch(piVar3[0xb]) {
  case 1:
    piVar3[0x19] = 1;
    break;
  case 2:
  case 3:
    piVar3[0x19] = 3;
    break;
  case 4:
  case 5:
    piVar3[0x19] = 4;
    break;
  default:
    piVar3[0x19] = piVar3[9];
  }
  iVar5 = 1;
  if (*(char *)((int)piVar3 + 0x4a) == '\0') {
    iVar5 = piVar3[0x19];
  }
  piVar3[0x1a] = iVar5;
  cVar4 = FUN_006d9640();
  if (cVar4 == '\0') {
    piVar3[0x1b] = 1;
    return;
  }
  piVar3[0x1b] = piVar3[0x45];
  return;
}



============================================================
DISASSEMBLY
============================================================
006d96c0 : PUSH ESI
006d96c1 : MOV ESI,dword ptr [ESP + 0x8]
006d96c5 : CMP dword ptr [ESI + 0x14],0xca
006d96cc : JZ 0x006d96e9
006d96ce : MOV EAX,dword ptr [ESI]
006d96d0 : MOV dword ptr [EAX + 0x14],0x14
006d96d7 : MOV ECX,dword ptr [ESI]
006d96d9 : MOV EDX,dword ptr [ESI + 0x14]
006d96dc : MOV dword ptr [ECX + 0x18],EDX
006d96df : MOV EAX,dword ptr [ESI]
006d96e1 : MOV ECX,dword ptr [EAX]
006d96e3 : PUSH ESI
006d96e4 : CALL ECX
006d96e6 : ADD ESP,0x4
006d96e9 : MOV EAX,dword ptr [ESI + 0x30]
006d96ec : MOV ECX,dword ptr [ESI + 0x34]
006d96ef : LEA EDX,[EAX*0x8 + 0x0]
006d96f6 : CMP EDX,ECX
006d96f8 : JA 0x006d9722
006d96fa : MOV EAX,dword ptr [ESI + 0x1c]
006d96fd : PUSH 0x8
006d96ff : PUSH EAX
006d9700 : CALL 0x006d9580
006d9705 : MOV ECX,dword ptr [ESI + 0x20]
006d9708 : PUSH 0x8
006d970a : PUSH ECX
006d970b : MOV dword ptr [ESI + 0x5c],EAX
006d970e : CALL 0x006d9580
006d9713 : ADD ESP,0x10
006d9716 : MOV dword ptr [ESI + 0x118],0x1
006d9720 : JMP 0x006d9797
006d9722 : LEA EDX,[EAX*0x4 + 0x0]
006d9729 : CMP EDX,ECX
006d972b : JA 0x006d9755
006d972d : MOV EAX,dword ptr [ESI + 0x1c]
006d9730 : PUSH 0x4
006d9732 : PUSH EAX
006d9733 : CALL 0x006d9580
006d9738 : MOV ECX,dword ptr [ESI + 0x20]
006d973b : PUSH 0x4
006d973d : PUSH ECX
006d973e : MOV dword ptr [ESI + 0x5c],EAX
006d9741 : CALL 0x006d9580
006d9746 : ADD ESP,0x10
006d9749 : MOV dword ptr [ESI + 0x118],0x2
006d9753 : JMP 0x006d9797
006d9755 : LEA EDX,[EAX + EAX*0x1]
006d9758 : CMP EDX,ECX
006d975a : JA 0x006d9784
006d975c : MOV EAX,dword ptr [ESI + 0x1c]
006d975f : PUSH 0x2
006d9761 : PUSH EAX
006d9762 : CALL 0x006d9580
006d9767 : MOV ECX,dword ptr [ESI + 0x20]
006d976a : PUSH 0x2
006d976c : PUSH ECX
006d976d : MOV dword ptr [ESI + 0x5c],EAX
006d9770 : CALL 0x006d9580
006d9775 : ADD ESP,0x10
006d9778 : MOV dword ptr [ESI + 0x118],0x4
006d9782 : JMP 0x006d9797
006d9784 : MOV EDX,dword ptr [ESI + 0x1c]
006d9787 : MOV EAX,dword ptr [ESI + 0x20]
006d978a : MOV dword ptr [ESI + 0x5c],EDX
006d978d : MOV dword ptr [ESI + 0x118],0x8
006d9797 : CMP dword ptr [ESI + 0x24],0x0
006d979b : MOV ECX,dword ptr [ESI + 0xc4]
006d97a1 : PUSH EBX
006d97a2 : MOV dword ptr [ESI + 0x60],EAX
006d97a5 : PUSH EDI
006d97a6 : MOV dword ptr [ESP + 0x10],0x0
006d97ae : JLE 0x006d980c
006d97b0 : ADD ECX,0xc
006d97b3 : PUSH EBP
006d97b4 : MOV EDX,dword ptr [ESI + 0x118]
006d97ba : MOV EAX,EDX
006d97bc : CMP EAX,0x8
006d97bf : JGE 0x006d97f7
006d97c1 : MOV EDI,dword ptr [ESI + 0x110]
006d97c7 : IMUL EDI,EDX
006d97ca : LEA EBX,[EBX]
006d97d0 : MOV EBX,dword ptr [ECX + -0x4]
006d97d3 : IMUL EBX,EAX
006d97d6 : ADD EBX,EBX
006d97d8 : CMP EBX,EDI
006d97da : JG 0x006d97f7
006d97dc : MOV EBP,dword ptr [ECX]
006d97de : MOV EBX,dword ptr [ESI + 0x114]
006d97e4 : IMUL EBP,EAX
006d97e7 : IMUL EBX,EDX
006d97ea : ADD EBP,EBP
006d97ec : CMP EBP,EBX
006d97ee : JG 0x006d97f7
006d97f0 : ADD EAX,EAX
006d97f2 : CMP EAX,0x8
006d97f5 : JL 0x006d97d0
006d97f7 : MOV dword ptr [ECX + 0x18],EAX
006d97fa : MOV EAX,dword ptr [ESP + 0x14]
006d97fe : INC EAX
006d97ff : ADD ECX,0x54
006d9802 : CMP EAX,dword ptr [ESI + 0x24]
006d9805 : MOV dword ptr [ESP + 0x14],EAX
006d9809 : JL 0x006d97b4
006d980b : POP EBP
006d980c : MOV EDI,dword ptr [ESI + 0xc4]
006d9812 : XOR EBX,EBX
006d9814 : CMP dword ptr [ESI + 0x24],EBX
006d9817 : JLE 0x006d986c
006d9819 : ADD EDI,0x24
006d981c : LEA ESP,[ESP]
006d9820 : MOV EDX,dword ptr [EDI + -0x1c]
006d9823 : IMUL EDX,dword ptr [EDI]
006d9826 : IMUL EDX,dword ptr [ESI + 0x1c]
006d982a : MOV ECX,dword ptr [ESI + 0x110]
006d9830 : ADD ECX,ECX
006d9832 : ADD ECX,ECX
006d9834 : ADD ECX,ECX
006d9836 : PUSH ECX
006d9837 : PUSH EDX
006d9838 : CALL 0x006d9580
006d983d : MOV ECX,dword ptr [EDI + -0x18]
006d9840 : MOV dword ptr [EDI + 0x4],EAX
006d9843 : IMUL ECX,dword ptr [ESI + 0x20]
006d9847 : IMUL ECX,dword ptr [EDI]
006d984a : MOV EAX,dword ptr [ESI + 0x114]
006d9850 : ADD EAX,EAX
006d9852 : ADD EAX,EAX
006d9854 : ADD EAX,EAX
006d9856 : PUSH EAX
006d9857 : PUSH ECX
006d9858 : CALL 0x006d9580
006d985d : MOV dword ptr [EDI + 0x8],EAX
006d9860 : INC EBX
006d9861 : ADD ESP,0x10
006d9864 : ADD EDI,0x54
006d9867 : CMP EBX,dword ptr [ESI + 0x24]
006d986a : JL 0x006d9820
006d986c : MOV EAX,dword ptr [ESI + 0x2c]
006d986f : DEC EAX
006d9870 : POP EDI
006d9871 : POP EBX
006d9872 : CMP EAX,0x4
006d9875 : JA 0x006d9899
006d9877 : JMP dword ptr [EAX*0x4 + 0x6d98d0]
006d987e : MOV dword ptr [ESI + 0x64],0x1
006d9885 : JMP 0x006d989f
006d9887 : MOV dword ptr [ESI + 0x64],0x3
006d988e : JMP 0x006d989f
006d9890 : MOV dword ptr [ESI + 0x64],0x4
006d9897 : JMP 0x006d989f
006d9899 : MOV EDX,dword ptr [ESI + 0x24]
006d989c : MOV dword ptr [ESI + 0x64],EDX
006d989f : CMP byte ptr [ESI + 0x4a],0x0
006d98a3 : MOV EAX,0x1
006d98a8 : JNZ 0x006d98ad
006d98aa : MOV EAX,dword ptr [ESI + 0x64]
006d98ad : MOV EDX,ESI
006d98af : MOV dword ptr [ESI + 0x68],EAX
006d98b2 : CALL 0x006d9640
006d98b7 : TEST AL,AL
006d98b9 : JZ 0x006d98c6
006d98bb : MOV EAX,dword ptr [ESI + 0x114]
006d98c1 : MOV dword ptr [ESI + 0x6c],EAX
006d98c4 : POP ESI
006d98c5 : RET
006d98c6 : MOV dword ptr [ESI + 0x6c],0x1
006d98cd : POP ESI
006d98ce : RET
