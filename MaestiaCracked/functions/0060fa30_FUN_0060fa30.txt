PROGRAM  : Maestia.exe
FUNCTION : FUN_0060fa30
ENTRY    : 0060fa30
BODY     : [[0060fa30, 0060fb91]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0060fa30(void)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  int in_ECX;
  int iVar5;
  int local_8;
  int local_4;
  
  if (*(int *)(in_ECX + 0x44) != 0 || *(int *)(in_ECX + 0x48) != 0) {
    FUN_0060f3e0(in_ECX + 0x3c);
  }
  iVar5 = *(int *)(in_ECX + 0x14);
  *(undefined4 *)(in_ECX + 0x3c) = 0x7fffffff;
  *(undefined4 *)(in_ECX + 0x40) = 0x7fffffff;
  *(undefined4 *)(in_ECX + 0x44) = 0;
  *(undefined4 *)(in_ECX + 0x48) = 0;
  if (iVar5 != 0) {
    if (*(int *)(in_ECX + 0x34) == 0) {
      FUN_0060f1a0(iVar5,0x100);
      *(int *)(in_ECX + 0x28) = iVar5;
      iVar5 = (*(int *)(in_ECX + 0x58) - *(int *)(in_ECX + 0x50)) + 1;
      piVar1 = (int *)(in_ECX + 0x30);
      FUN_0060f200(iVar5,0x10);
      *(int *)(in_ECX + 0x34) = iVar5;
      _memset((void *)*piVar1,0,iVar5 * 8);
      uVar4 = 0;
      if (*(int *)(in_ECX + 0x14) != 0) {
        do {
          piVar2 = (int *)(*piVar1 +
                          (*(int *)(*(int *)(*(int *)(in_ECX + 0x20) + (uVar4 >> 8) * 4) + 4 +
                                   (uVar4 & 0xff) * 0x10) - *(int *)(in_ECX + 0x50)) * 8);
          *piVar2 = *piVar2 + 1;
          uVar4 = uVar4 + 1;
        } while (uVar4 < *(uint *)(in_ECX + 0x14));
      }
      iVar5 = 0;
      uVar4 = 0;
      if (*(int *)(in_ECX + 0x34) != 0) {
        do {
          iVar3 = *(int *)(*piVar1 + uVar4 * 8);
          *(int *)(*piVar1 + uVar4 * 8) = iVar5;
          uVar4 = uVar4 + 1;
          iVar5 = iVar5 + iVar3;
        } while (uVar4 < *(uint *)(in_ECX + 0x34));
      }
      uVar4 = 0;
      if (*(int *)(in_ECX + 0x14) != 0) {
        do {
          iVar5 = (uVar4 & 0xff) * 0x10 + *(int *)(*(int *)(in_ECX + 0x20) + (uVar4 >> 8) * 4);
          uVar4 = uVar4 + 1;
          piVar2 = (int *)(*piVar1 + (*(int *)(iVar5 + 4) - *(int *)(in_ECX + 0x50)) * 8);
          *(int *)(*(int *)(in_ECX + 0x24) + (*piVar2 + piVar2[1]) * 4) = iVar5;
          piVar2[1] = piVar2[1] + 1;
        } while (uVar4 < *(uint *)(in_ECX + 0x14));
      }
      uVar4 = 0;
      if (*(int *)(in_ECX + 0x34) != 0) {
        do {
          local_4 = *(int *)(*piVar1 + 4 + uVar4 * 8);
          if (local_4 != 0) {
            local_8 = *(int *)(in_ECX + 0x24) + *(int *)(*piVar1 + uVar4 * 8) * 4;
            FUN_005f92b0(&local_8,0,local_4,&LAB_0060efe0);
          }
          uVar4 = uVar4 + 1;
        } while (uVar4 < *(uint *)(in_ECX + 0x34));
      }
    }
    return 1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0060fa30 : SUB ESP,0x8
0060fa33 : PUSH EBX
0060fa34 : PUSH EBP
0060fa35 : PUSH ESI
0060fa36 : MOV ESI,ECX
0060fa38 : MOV EAX,dword ptr [ESI + 0x44]
0060fa3b : OR EAX,dword ptr [ESI + 0x48]
0060fa3e : JZ 0x0060fa4c
0060fa40 : LEA ECX,[ESI + 0x3c]
0060fa43 : PUSH ECX
0060fa44 : LEA ECX,[ESI + 0x14]
0060fa47 : CALL 0x0060f3e0
0060fa4c : MOV EBX,dword ptr [ESI + 0x14]
0060fa4f : XOR EBP,EBP
0060fa51 : MOV EAX,0x7fffffff
0060fa56 : MOV dword ptr [ESI + 0x3c],EAX
0060fa59 : MOV dword ptr [ESI + 0x40],EAX
0060fa5c : MOV dword ptr [ESI + 0x44],EBP
0060fa5f : MOV dword ptr [ESI + 0x48],EBP
0060fa62 : CMP EBX,EBP
0060fa64 : JNZ 0x0060fa6f
0060fa66 : POP ESI
0060fa67 : POP EBP
0060fa68 : XOR AL,AL
0060fa6a : POP EBX
0060fa6b : ADD ESP,0x8
0060fa6e : RET
0060fa6f : CMP dword ptr [ESI + 0x34],EBP
0060fa72 : JNZ 0x0060fb89
0060fa78 : PUSH EDI
0060fa79 : PUSH 0x100
0060fa7e : LEA EDI,[ESI + 0x24]
0060fa81 : PUSH EBX
0060fa82 : MOV ECX,EDI
0060fa84 : CALL 0x0060f1a0
0060fa89 : MOV dword ptr [EDI + 0x4],EBX
0060fa8c : MOV EBX,dword ptr [ESI + 0x58]
0060fa8f : SUB EBX,dword ptr [ESI + 0x50]
0060fa92 : PUSH 0x10
0060fa94 : INC EBX
0060fa95 : LEA EDI,[ESI + 0x30]
0060fa98 : PUSH EBX
0060fa99 : MOV ECX,EDI
0060fa9b : CALL 0x0060f200
0060faa0 : MOV EDX,EBX
0060faa2 : ADD EDX,EDX
0060faa4 : ADD EDX,EDX
0060faa6 : ADD EDX,EDX
0060faa8 : PUSH EDX
0060faa9 : MOV dword ptr [EDI + 0x4],EBX
0060faac : MOV EAX,dword ptr [EDI]
0060faae : PUSH EBP
0060faaf : PUSH EAX
0060fab0 : CALL 0x0063b700
0060fab5 : ADD ESP,0xc
0060fab8 : XOR EAX,EAX
0060faba : CMP dword ptr [ESI + 0x14],EBP
0060fabd : JBE 0x0060faeb
0060fabf : NOP
0060fac0 : MOV EDX,dword ptr [ESI + 0x20]
0060fac3 : MOV ECX,EAX
0060fac5 : SHR ECX,0x8
0060fac8 : MOV ECX,dword ptr [EDX + ECX*0x4]
0060facb : MOV EBX,EAX
0060facd : AND EBX,0xff
0060fad3 : SHL EBX,0x4
0060fad6 : MOV EDX,dword ptr [ECX + EBX*0x1 + 0x4]
0060fada : SUB EDX,dword ptr [ESI + 0x50]
0060fadd : MOV ECX,dword ptr [EDI]
0060fadf : INC dword ptr [ECX + EDX*0x8]
0060fae2 : LEA ECX,[ECX + EDX*0x8]
0060fae5 : INC EAX
0060fae6 : CMP EAX,dword ptr [ESI + 0x14]
0060fae9 : JC 0x0060fac0
0060faeb : XOR EDX,EDX
0060faed : XOR EAX,EAX
0060faef : CMP dword ptr [ESI + 0x34],EBP
0060faf2 : JBE 0x0060fb06
0060faf4 : MOV ECX,dword ptr [EDI]
0060faf6 : MOV EBX,dword ptr [ECX + EAX*0x8]
0060faf9 : LEA ECX,[ECX + EAX*0x8]
0060fafc : MOV dword ptr [ECX],EDX
0060fafe : INC EAX
0060faff : ADD EDX,EBX
0060fb01 : CMP EAX,dword ptr [ESI + 0x34]
0060fb04 : JC 0x0060faf4
0060fb06 : XOR EDX,EDX
0060fb08 : CMP dword ptr [ESI + 0x14],EBP
0060fb0b : JBE 0x0060fb45
0060fb0d : LEA ECX,[ECX]
0060fb10 : MOV EBX,dword ptr [ESI + 0x20]
0060fb13 : MOV EBP,dword ptr [ESI + 0x24]
0060fb16 : MOV EAX,EDX
0060fb18 : AND EAX,0xff
0060fb1d : MOV ECX,EDX
0060fb1f : SHR ECX,0x8
0060fb22 : SHL EAX,0x4
0060fb25 : ADD EAX,dword ptr [EBX + ECX*0x4]
0060fb28 : MOV EBX,dword ptr [EDI]
0060fb2a : MOV ECX,dword ptr [EAX + 0x4]
0060fb2d : SUB ECX,dword ptr [ESI + 0x50]
0060fb30 : INC EDX
0060fb31 : LEA ECX,[EBX + ECX*0x8]
0060fb34 : MOV EBX,dword ptr [ECX]
0060fb36 : ADD EBX,dword ptr [ECX + 0x4]
0060fb39 : MOV dword ptr [EBP + EBX*0x4],EAX
0060fb3d : INC dword ptr [ECX + 0x4]
0060fb40 : CMP EDX,dword ptr [ESI + 0x14]
0060fb43 : JC 0x0060fb10
0060fb45 : XOR EBX,EBX
0060fb47 : CMP dword ptr [ESI + 0x34],EBX
0060fb4a : JBE 0x0060fb88
0060fb4c : LEA ESP,[ESP]
0060fb50 : MOV EDX,dword ptr [EDI]
0060fb52 : MOV ECX,dword ptr [EDX + EBX*0x8 + 0x4]
0060fb56 : LEA EAX,[EDX + EBX*0x8]
0060fb59 : TEST ECX,ECX
0060fb5b : JZ 0x0060fb82
0060fb5d : MOV EAX,dword ptr [EAX]
0060fb5f : MOV EDX,dword ptr [ESI + 0x24]
0060fb62 : PUSH 0x60efe0
0060fb67 : PUSH ECX
0060fb68 : MOV dword ptr [ESP + 0x1c],ECX
0060fb6c : LEA ECX,[ESP + 0x18]
0060fb70 : LEA EAX,[EDX + EAX*0x4]
0060fb73 : PUSH 0x0
0060fb75 : PUSH ECX
0060fb76 : MOV dword ptr [ESP + 0x20],EAX
0060fb7a : CALL 0x005f92b0
0060fb7f : ADD ESP,0x10
0060fb82 : INC EBX
0060fb83 : CMP EBX,dword ptr [ESI + 0x34]
0060fb86 : JC 0x0060fb50
0060fb88 : POP EDI
0060fb89 : POP ESI
0060fb8a : POP EBP
0060fb8b : MOV AL,0x1
0060fb8d : POP EBX
0060fb8e : ADD ESP,0x8
0060fb91 : RET
