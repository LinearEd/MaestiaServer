PROGRAM  : Maestia.exe
FUNCTION : FUN_0052f2a0
ENTRY    : 0052f2a0
BODY     : [[0052f2a0, 0052f3ba]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0052f2a0(int param_1,int param_2)

{
  uint uVar1;
  char cVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  uint *puVar7;
  uint uVar8;
  uint local_8;
  int local_4;
  
  local_8 = 0;
  if ((*(byte *)(*in_ECX + 0xc6) & 2) == 0) {
    local_4 = FUN_0054ed10();
  }
  else {
    local_4 = 0;
  }
  if (param_2 == 0x8a) {
    iVar3 = in_ECX[6] + in_ECX[2];
    local_8 = (uint)CONCAT11(*(undefined1 *)(in_ECX[6] + 4 + in_ECX[2]),*(undefined1 *)(iVar3 + 3));
    uVar6 = (uint)*(byte *)(iVar3 + 5);
    cVar2 = '\x01';
  }
  else {
    cVar2 = FUN_0052b270(*in_ECX,*(undefined4 *)(*in_ECX + 8),0,&local_8);
    iVar3 = *in_ECX;
    uVar6 = (uint)*(byte *)(in_ECX[6] + 3 + in_ECX[2]);
    puVar7 = (uint *)(iVar3 + 8);
    FUN_00526bc0();
    *puVar7 = *puVar7 - 0x10;
    if (*puVar7 < *(uint *)(iVar3 + 0xc)) {
      FUN_00504f30();
    }
  }
  if ((local_4 != 0) && (cVar2 != '\0')) {
    uVar4 = (**(code **)(**(int **)(local_4 + 0x9c) + 0x28))();
    if ((uVar4 != 0) && (uVar4 <= local_8)) {
      local_8 = uVar4 - 1;
    }
    uVar4 = FUN_0058a900();
    if (uVar4 <= local_8) {
      uVar1 = *(uint *)(*(int *)(param_1 + 8) + 0xc);
      uVar4 = in_ECX[5];
      uVar8 = 0;
      uVar5 = uVar4;
      if (uVar6 != 0) {
        do {
          if (uVar1 <= uVar5) {
            return;
          }
          iVar3 = in_ECX[2];
          uVar4 = uVar5 + 1;
          if (*(char *)(iVar3 + uVar5) < '\0') {
            uVar4 = uVar5 + 3 +
                    (uint)CONCAT11(*(undefined1 *)(iVar3 + 1 + uVar4),*(undefined1 *)(iVar3 + uVar4)
                                  );
          }
          uVar8 = uVar8 + 1;
          uVar5 = uVar4;
        } while (uVar8 < uVar6);
      }
      if (uVar4 < uVar1) {
        in_ECX[5] = uVar4;
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0052f2a0 : SUB ESP,0x8
0052f2a3 : PUSH EBX
0052f2a4 : PUSH EBP
0052f2a5 : PUSH ESI
0052f2a6 : PUSH EDI
0052f2a7 : MOV EDI,ECX
0052f2a9 : MOV EAX,dword ptr [EDI]
0052f2ab : XOR ESI,ESI
0052f2ad : MOV dword ptr [ESP + 0x10],ESI
0052f2b1 : TEST byte ptr [EAX + 0xc6],0x2
0052f2b8 : JNZ 0x0052f2cb
0052f2ba : MOV EAX,dword ptr [EAX + 0x74]
0052f2bd : LEA ECX,[EAX + 0x68]
0052f2c0 : CALL 0x0054ed10
0052f2c5 : MOV dword ptr [ESP + 0x14],EAX
0052f2c9 : JMP 0x0052f2cf
0052f2cb : MOV dword ptr [ESP + 0x14],ESI
0052f2cf : CMP dword ptr [ESP + 0x20],0x8a
0052f2d7 : JNZ 0x0052f2fb
0052f2d9 : MOV ECX,dword ptr [EDI + 0x8]
0052f2dc : MOV EAX,dword ptr [EDI + 0x18]
0052f2df : MOVZX EDX,byte ptr [EAX + ECX*0x1 + 0x4]
0052f2e4 : ADD EAX,ECX
0052f2e6 : MOVZX ECX,byte ptr [EAX + 0x3]
0052f2ea : SHL EDX,0x8
0052f2ed : OR EDX,ECX
0052f2ef : MOV dword ptr [ESP + 0x10],EDX
0052f2f3 : MOVZX EBP,byte ptr [EAX + 0x5]
0052f2f7 : MOV BL,0x1
0052f2f9 : JMP 0x0052f33c
0052f2fb : MOV EAX,dword ptr [EDI]
0052f2fd : MOV ECX,dword ptr [EAX + 0x8]
0052f300 : LEA EDX,[ESP + 0x10]
0052f304 : PUSH EDX
0052f305 : PUSH ESI
0052f306 : PUSH ECX
0052f307 : MOV ECX,dword ptr [ESP + 0x28]
0052f30b : PUSH EAX
0052f30c : CALL 0x0052b270
0052f311 : MOV ECX,dword ptr [EDI + 0x8]
0052f314 : MOV ESI,dword ptr [EDI]
0052f316 : MOV BL,AL
0052f318 : MOV EAX,dword ptr [EDI + 0x18]
0052f31b : MOVZX EBP,byte ptr [EAX + ECX*0x1 + 0x3]
0052f320 : MOV ECX,dword ptr [ESI + 0x8]
0052f323 : ADD ESI,0x8
0052f326 : CALL 0x00526bc0
0052f32b : ADD dword ptr [ESI],-0x10
0052f32e : MOV EAX,dword ptr [ESI]
0052f330 : CMP EAX,dword ptr [ESI + 0x4]
0052f333 : JNC 0x0052f33c
0052f335 : MOV ECX,ESI
0052f337 : CALL 0x00504f30
0052f33c : MOV ESI,dword ptr [ESP + 0x14]
0052f340 : TEST ESI,ESI
0052f342 : JZ 0x0052f3b1
0052f344 : TEST BL,BL
0052f346 : JZ 0x0052f3b1
0052f348 : MOV ECX,dword ptr [ESI + 0x9c]
0052f34e : MOV EDX,dword ptr [ECX]
0052f350 : MOV EAX,dword ptr [EDX + 0x28]
0052f353 : CALL EAX
0052f355 : TEST EAX,EAX
0052f357 : JBE 0x0052f364
0052f359 : CMP dword ptr [ESP + 0x10],EAX
0052f35d : JC 0x0052f364
0052f35f : DEC EAX
0052f360 : MOV dword ptr [ESP + 0x10],EAX
0052f364 : MOV ECX,ESI
0052f366 : CALL 0x0058a900
0052f36b : CMP dword ptr [ESP + 0x10],EAX
0052f36f : JC 0x0052f3b1
0052f371 : MOV ECX,dword ptr [ESP + 0x1c]
0052f375 : MOV EDX,dword ptr [ECX + 0x8]
0052f378 : MOV EBX,dword ptr [EDX + 0xc]
0052f37b : MOV EAX,dword ptr [EDI + 0x14]
0052f37e : XOR ESI,ESI
0052f380 : TEST EBP,EBP
0052f382 : JBE 0x0052f3aa
0052f384 : CMP EAX,EBX
0052f386 : JNC 0x0052f3b1
0052f388 : MOV ECX,dword ptr [EDI + 0x8]
0052f38b : MOV DL,byte ptr [ECX + EAX*0x1]
0052f38e : INC EAX
0052f38f : TEST DL,DL
0052f391 : JNS 0x0052f3a5
0052f393 : MOVZX EDX,byte ptr [ECX + EAX*0x1 + 0x1]
0052f398 : MOVZX ECX,byte ptr [ECX + EAX*0x1]
0052f39c : SHL EDX,0x8
0052f39f : OR EDX,ECX
0052f3a1 : LEA EAX,[EAX + EDX*0x1 + 0x2]
0052f3a5 : INC ESI
0052f3a6 : CMP ESI,EBP
0052f3a8 : JC 0x0052f384
0052f3aa : CMP EAX,EBX
0052f3ac : JNC 0x0052f3b1
0052f3ae : MOV dword ptr [EDI + 0x14],EAX
0052f3b1 : POP EDI
0052f3b2 : POP ESI
0052f3b3 : POP EBP
0052f3b4 : POP EBX
0052f3b5 : ADD ESP,0x8
0052f3b8 : RET 0x8
