PROGRAM  : Maestia.exe
FUNCTION : FUN_005c5e30
ENTRY    : 005c5e30
BODY     : [[005c5e30, 005c5f2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c5e30(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  int *piVar3;
  uint *puVar4;
  int *in_ECX;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  
  piVar3 = (int *)*in_ECX;
  if (piVar3 == (int *)0x0) {
    iVar8 = 8;
  }
  else {
    if ((uint)(*piVar3 * 5) <= piVar3[1] * 4 + 4U) goto LAB_005c5e6b;
    iVar8 = piVar3[1] * 2 + 2;
  }
  FUN_005c5bb0(param_1,iVar8);
LAB_005c5e6b:
  piVar3 = (int *)*in_ECX;
  param_3 = param_3 & piVar3[1];
  *piVar3 = *piVar3 + 1;
  iVar8 = *in_ECX;
  puVar1 = (uint *)(param_3 * 0x10 + 8 + iVar8);
  if (*puVar1 == 0xfffffffe) {
    FUN_005c5460(param_2,0xffffffff);
    return;
  }
  uVar7 = param_3;
  do {
    uVar7 = uVar7 + 1 & *(uint *)(iVar8 + 4);
  } while (*(int *)(uVar7 * 0x10 + 8 + iVar8) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar8 + 4);
  iVar2 = uVar7 * 0x10 + 8 + iVar8;
  if (uVar5 != param_3) {
    iVar6 = uVar5 * 0x10;
    uVar5 = *(uint *)(iVar6 + 8 + iVar8);
    while (puVar4 = (uint *)(iVar6 + 8 + iVar8), uVar5 != param_3) {
      iVar6 = *puVar4 * 0x10;
      uVar5 = *(uint *)(iVar6 + 8 + iVar8);
    }
    if (iVar2 != 0) {
      FUN_005c5410(puVar1);
    }
    *puVar4 = uVar7;
    FUN_005c5260(param_2);
    *puVar1 = 0xffffffff;
    return;
  }
  if (iVar2 != 0) {
    FUN_005c5410(puVar1);
  }
  FUN_005c5260(param_2);
  *puVar1 = uVar7;
  return;
}



============================================================
DISASSEMBLY
============================================================
005c5e30 : PUSH EBP
005c5e31 : PUSH ESI
005c5e32 : PUSH EDI
005c5e33 : MOV EDI,ECX
005c5e35 : MOV EAX,dword ptr [EDI]
005c5e37 : TEST EAX,EAX
005c5e39 : JNZ 0x005c5e44
005c5e3b : MOV EAX,dword ptr [ESP + 0x10]
005c5e3f : PUSH 0x8
005c5e41 : PUSH EAX
005c5e42 : JMP 0x005c5e66
005c5e44 : MOV ECX,dword ptr [EAX + 0x4]
005c5e47 : LEA EDX,[ECX*0x4 + 0x4]
005c5e4e : MOV ECX,dword ptr [EAX]
005c5e50 : LEA ECX,[ECX + ECX*0x4]
005c5e53 : CMP ECX,EDX
005c5e55 : JBE 0x005c5e6b
005c5e57 : MOV EDX,dword ptr [EAX + 0x4]
005c5e5a : MOV ECX,dword ptr [ESP + 0x10]
005c5e5e : LEA EAX,[EDX + EDX*0x1 + 0x2]
005c5e62 : PUSH EAX
005c5e63 : PUSH ECX
005c5e64 : MOV ECX,EDI
005c5e66 : CALL 0x005c5bb0
005c5e6b : MOV EAX,dword ptr [EDI]
005c5e6d : MOV ESI,dword ptr [ESP + 0x18]
005c5e71 : AND ESI,dword ptr [EAX + 0x4]
005c5e74 : INC dword ptr [EAX]
005c5e76 : MOV EAX,dword ptr [EDI]
005c5e78 : MOV EDX,ESI
005c5e7a : SHL EDX,0x4
005c5e7d : LEA EBP,[EDX + EAX*0x1 + 0x8]
005c5e81 : MOV ECX,0xfffffffe
005c5e86 : CMP dword ptr [EBP],ECX
005c5e89 : JNZ 0x005c5e9f
005c5e8b : MOV EAX,dword ptr [ESP + 0x14]
005c5e8f : PUSH -0x1
005c5e91 : PUSH EAX
005c5e92 : MOV ECX,EBP
005c5e94 : CALL 0x005c5460
005c5e99 : POP EDI
005c5e9a : POP ESI
005c5e9b : POP EBP
005c5e9c : RET 0xc
005c5e9f : PUSH EBX
005c5ea0 : MOV EBX,dword ptr [EAX + 0x4]
005c5ea3 : MOV EDI,ESI
005c5ea5 : INC EDI
005c5ea6 : AND EDI,EBX
005c5ea8 : MOV EDX,EDI
005c5eaa : SHL EDX,0x4
005c5ead : CMP dword ptr [EDX + EAX*0x1 + 0x8],ECX
005c5eb1 : JNZ 0x005c5ea5
005c5eb3 : MOV EDX,dword ptr [EBP + 0x4]
005c5eb6 : MOV EDX,dword ptr [EDX + 0xc]
005c5eb9 : MOV ECX,EDI
005c5ebb : SHL ECX,0x4
005c5ebe : AND EDX,EBX
005c5ec0 : LEA ECX,[ECX + EAX*0x1 + 0x8]
005c5ec4 : CMP EDX,ESI
005c5ec6 : JNZ 0x005c5ee9
005c5ec8 : TEST ECX,ECX
005c5eca : JZ 0x005c5ed2
005c5ecc : PUSH EBP
005c5ecd : CALL 0x005c5410
005c5ed2 : MOV EAX,dword ptr [ESP + 0x18]
005c5ed6 : PUSH EAX
005c5ed7 : LEA ECX,[EBP + 0x4]
005c5eda : CALL 0x005c5260
005c5edf : POP EBX
005c5ee0 : MOV dword ptr [EBP],EDI
005c5ee3 : POP EDI
005c5ee4 : POP ESI
005c5ee5 : POP EBP
005c5ee6 : RET 0xc
005c5ee9 : SHL EDX,0x4
005c5eec : CMP dword ptr [EDX + EAX*0x1 + 0x8],ESI
005c5ef0 : LEA EBX,[EDX + EAX*0x1 + 0x8]
005c5ef4 : JZ 0x005c5f05
005c5ef6 : MOV EDX,dword ptr [EBX]
005c5ef8 : SHL EDX,0x4
005c5efb : CMP dword ptr [EDX + EAX*0x1 + 0x8],ESI
005c5eff : LEA EBX,[EDX + EAX*0x1 + 0x8]
005c5f03 : JNZ 0x005c5ef6
005c5f05 : TEST ECX,ECX
005c5f07 : JZ 0x005c5f0f
005c5f09 : PUSH EBP
005c5f0a : CALL 0x005c5410
005c5f0f : MOV EAX,dword ptr [ESP + 0x18]
005c5f13 : PUSH EAX
005c5f14 : LEA ECX,[EBP + 0x4]
005c5f17 : MOV dword ptr [EBX],EDI
005c5f19 : CALL 0x005c5260
005c5f1e : POP EBX
005c5f1f : POP EDI
005c5f20 : POP ESI
005c5f21 : MOV dword ptr [EBP],0xffffffff
005c5f28 : POP EBP
005c5f29 : RET 0xc
