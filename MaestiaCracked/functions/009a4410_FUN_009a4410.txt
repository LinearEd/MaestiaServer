PROGRAM  : Maestia.exe
FUNCTION : FUN_009a4410
ENTRY    : 009a4410
BODY     : [[009a4410, 009a45a9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a4410(int param_1,int param_2)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  undefined1 local_2c [24];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  piVar1 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b35f3d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (param_2 != 0) {
    if (*(char *)(param_1 + 0x32) == '\0') {
      if (*(uint *)(param_2 + 0x10) >> 0x10 == 0x68c) {
        *(int *)(param_1 + 0x54) = param_2;
        if ((*(int *)(*piVar1 + 0x128) != 0) && (*(int *)(*(int *)(*piVar1 + 0x128) + 0x4c) != 0)) {
          FUN_0097fa60(uVar2);
        }
        if (*(char *)(param_1 + 0x50) != '\0') {
          FUN_009a43e0(*(undefined4 *)(*DAT_00da9894 + 0x1a4));
        }
        *(undefined1 *)(param_1 + 0x50) = 0;
      }
      else {
        FUN_00406460(L"IDS_BUILDUP_NOT_ITEM");
        local_8 = 2;
        piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
        uVar3 = FUN_0081d120(local_48);
        local_8._0_1_ = 3;
        (**(code **)(*piVar1 + 0x44))(uVar3,3);
        local_8 = CONCAT31(local_8._1_3_,2);
        FUN_00406560();
        local_8 = 0xffffffff;
        FUN_00406560();
        *(undefined1 *)(param_1 + 0x50) = 0;
      }
    }
    else {
      FUN_00406460(L"IDS_BUILDUP_SELECTED_MATERIAL");
      local_8 = 0;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 1;
      (**(code **)(*piVar1 + 0x44))(uVar3,3);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_30 = 7;
      local_34 = 0;
      local_44 = 0;
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      *(undefined1 *)(param_1 + 0x50) = 0;
    }
    DAT_00da9853 = 0;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
009a4410 : PUSH EBP
009a4411 : MOV EBP,ESP
009a4413 : PUSH -0x1
009a4415 : PUSH 0xb35f3d
009a441a : MOV EAX,FS:[0x0]
009a4420 : PUSH EAX
009a4421 : SUB ESP,0x3c
009a4424 : PUSH EBX
009a4425 : PUSH ESI
009a4426 : PUSH EDI
009a4427 : MOV EAX,[0x00d66fa0]
009a442c : XOR EAX,EBP
009a442e : PUSH EAX
009a442f : LEA EAX,[EBP + -0xc]
009a4432 : MOV FS:[0x0],EAX
009a4438 : MOV EAX,dword ptr [EBP + 0xc]
009a443b : XOR EBX,EBX
009a443d : CMP EAX,EBX
009a443f : JZ 0x009a4596
009a4445 : MOV ESI,dword ptr [EBP + 0x8]
009a4448 : CMP byte ptr [ESI + 0x32],BL
009a444b : JZ 0x009a44e1
009a4451 : PUSH 0xc898d4
009a4456 : LEA ECX,[EBP + -0x28]
009a4459 : CALL 0x00406460
009a445e : MOV dword ptr [EBP + -0x4],EBX
009a4461 : MOV EAX,[0x00da9894]
009a4466 : MOV EAX,dword ptr [EAX]
009a4468 : MOV ESI,dword ptr [EAX + 0x1a8]
009a446e : LEA ECX,[EBP + -0x28]
009a4471 : PUSH ECX
009a4472 : MOV ECX,dword ptr [0x0172491c]
009a4478 : LEA EDI,[EBP + -0x44]
009a447b : CALL 0x0081d120
009a4480 : MOV byte ptr [EBP + -0x4],0x1
009a4484 : MOV EDX,dword ptr [ESI]
009a4486 : PUSH 0x3
009a4488 : PUSH EAX
009a4489 : MOV EAX,dword ptr [EDX + 0x44]
009a448c : MOV ECX,ESI
009a448e : CALL EAX
009a4490 : MOV byte ptr [EBP + -0x4],BL
009a4493 : MOV ESI,0x8
009a4498 : CMP dword ptr [EBP + -0x2c],ESI
009a449b : JC 0x009a44a5
009a449d : MOV ECX,dword ptr [EBP + -0x40]
009a44a0 : CALL 0x006f04e0
009a44a5 : MOV EDI,0x7
009a44aa : XOR ECX,ECX
009a44ac : MOV dword ptr [EBP + -0x2c],EDI
009a44af : MOV dword ptr [EBP + -0x30],EBX
009a44b2 : MOV word ptr [EBP + -0x40],CX
009a44b6 : MOV dword ptr [EBP + -0x4],0xffffffff
009a44bd : CMP dword ptr [EBP + -0x10],ESI
009a44c0 : JC 0x009a44ca
009a44c2 : MOV ECX,dword ptr [EBP + -0x24]
009a44c5 : CALL 0x006f04e0
009a44ca : MOV EAX,dword ptr [EBP + 0x8]
009a44cd : XOR EDX,EDX
009a44cf : MOV dword ptr [EBP + -0x10],EDI
009a44d2 : MOV dword ptr [EBP + -0x14],EBX
009a44d5 : MOV word ptr [EBP + -0x24],DX
009a44d9 : MOV byte ptr [EAX + 0x50],BL
009a44dc : JMP 0x009a4590
009a44e1 : MOV ECX,dword ptr [EAX + 0x10]
009a44e4 : SHR ECX,0x10
009a44e7 : CMP ECX,0x68c
009a44ed : JZ 0x009a4555
009a44ef : PUSH 0xc89910
009a44f4 : LEA ECX,[EBP + -0x44]
009a44f7 : CALL 0x00406460
009a44fc : MOV dword ptr [EBP + -0x4],0x2
009a4503 : MOV ECX,dword ptr [0x00da9894]
009a4509 : MOV EAX,dword ptr [ECX]
009a450b : MOV ECX,dword ptr [0x0172491c]
009a4511 : MOV ESI,dword ptr [EAX + 0x1a8]
009a4517 : LEA EDX,[EBP + -0x44]
009a451a : PUSH EDX
009a451b : LEA EDI,[EBP + -0x28]
009a451e : CALL 0x0081d120
009a4523 : MOV byte ptr [EBP + -0x4],0x3
009a4527 : MOV EDX,dword ptr [ESI]
009a4529 : PUSH 0x3
009a452b : PUSH EAX
009a452c : MOV EAX,dword ptr [EDX + 0x44]
009a452f : MOV ECX,ESI
009a4531 : CALL EAX
009a4533 : MOV byte ptr [EBP + -0x4],0x2
009a4537 : MOV ECX,EDI
009a4539 : CALL 0x00406560
009a453e : MOV dword ptr [EBP + -0x4],0xffffffff
009a4545 : LEA ECX,[EBP + -0x44]
009a4548 : CALL 0x00406560
009a454d : MOV ECX,dword ptr [EBP + 0x8]
009a4550 : MOV byte ptr [ECX + 0x50],BL
009a4553 : JMP 0x009a4590
009a4555 : MOV EDX,dword ptr [0x00da9894]
009a455b : MOV dword ptr [ESI + 0x54],EAX
009a455e : MOV EAX,dword ptr [EDX]
009a4560 : MOV ECX,dword ptr [EAX + 0x128]
009a4566 : CMP ECX,EBX
009a4568 : JZ 0x009a4574
009a456a : CMP dword ptr [ECX + 0x4c],EBX
009a456d : JZ 0x009a4574
009a456f : CALL 0x0097fa60
009a4574 : CMP byte ptr [ESI + 0x50],BL
009a4577 : JZ 0x009a458d
009a4579 : MOV ECX,dword ptr [0x00da9894]
009a457f : MOV EDX,dword ptr [ECX]
009a4581 : MOV EAX,dword ptr [EDX + 0x1a4]
009a4587 : PUSH EAX
009a4588 : CALL 0x009a43e0
009a458d : MOV byte ptr [ESI + 0x50],BL
009a4590 : MOV byte ptr [0x00da9853],BL
009a4596 : MOV ECX,dword ptr [EBP + -0xc]
009a4599 : MOV dword ptr FS:[0x0],ECX
009a45a0 : POP ECX
009a45a1 : POP EDI
009a45a2 : POP ESI
009a45a3 : POP EBX
009a45a4 : MOV ESP,EBP
009a45a6 : POP EBP
009a45a7 : RET 0x8
