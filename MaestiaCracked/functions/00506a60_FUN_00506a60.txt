PROGRAM  : Maestia.exe
FUNCTION : FUN_00506a60
ENTRY    : 00506a60
BODY     : [[00506a60, 00506b64]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00506a60(int param_1)

{
  undefined1 *puVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar3 = param_1;
  puVar1 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar1 = 0;
  if (*(int *)(iVar3 + 8) != 0) {
    iVar4 = (**(code **)(**(int **)(iVar3 + 8) + 8))();
    if (iVar4 == 4) {
      if (*(int *)(iVar3 + 8) == 0) {
        iVar4 = 0;
      }
      else {
        iVar4 = *(int *)(iVar3 + 8) + -0x68;
      }
      iVar5 = *(int *)(iVar4 + 0xe8);
      if (iVar5 != 0) {
        *(uint *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 1U & 0x8fffffff;
      }
      iVar5 = *(int *)(iVar4 + 0xe8);
    }
    else {
      iVar4 = (**(code **)(**(int **)(iVar3 + 8) + 8))();
      if (iVar4 != 0xd) {
        return;
      }
      iVar4 = *(int *)(iVar3 + 8);
      if (iVar4 == 0) {
        iVar5 = 0;
      }
      else {
        iVar5 = iVar4 + -0x10;
        if (iVar5 != 0) {
          *(uint *)(iVar4 + -8) = *(int *)(iVar4 + -8) + 1U & 0x8fffffff;
        }
      }
    }
    if (iVar5 != 0) {
      iVar4 = FUN_00502030();
      if (iVar4 != 0) {
        uVar2 = *(undefined4 *)(iVar3 + 0x18);
        FUN_00526260(0);
        FUN_005272e0(&param_1,uVar2,0xffffffff,0);
        iVar5 = FUN_005002b0();
        if (iVar5 < 5) {
          FUN_00506700(iVar3,iVar5 * 0x10 + iVar4);
        }
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
        if (*(int *)(param_1 + 8) == 0) {
          FUN_00525340();
        }
      }
      FUN_00503db0();
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00506a60 : PUSH ESI
00506a61 : MOV ESI,dword ptr [ESP + 0x8]
00506a65 : PUSH EDI
00506a66 : MOV EDI,dword ptr [ESI + 0x4]
00506a69 : MOV ECX,EDI
00506a6b : CALL 0x00526400
00506a70 : MOV byte ptr [EDI],0x0
00506a73 : CMP dword ptr [ESI + 0x8],0x0
00506a77 : JZ 0x00506b62
00506a7d : MOV ECX,dword ptr [ESI + 0x8]
00506a80 : MOV EAX,dword ptr [ECX]
00506a82 : MOV EDX,dword ptr [EAX + 0x8]
00506a85 : PUSH EBP
00506a86 : CALL EDX
00506a88 : CMP EAX,0x4
00506a8b : JNZ 0x00506aba
00506a8d : MOV EAX,dword ptr [ESI + 0x8]
00506a90 : TEST EAX,EAX
00506a92 : JZ 0x00506a99
00506a94 : ADD EAX,-0x68
00506a97 : JMP 0x00506a9b
00506a99 : XOR EAX,EAX
00506a9b : MOV ECX,dword ptr [EAX + 0xe8]
00506aa1 : TEST ECX,ECX
00506aa3 : JZ 0x00506ab2
00506aa5 : MOV EDX,dword ptr [ECX + 0x8]
00506aa8 : INC EDX
00506aa9 : AND EDX,0x8fffffff
00506aaf : MOV dword ptr [ECX + 0x8],EDX
00506ab2 : MOV EBP,dword ptr [EAX + 0xe8]
00506ab8 : JMP 0x00506aea
00506aba : MOV ECX,dword ptr [ESI + 0x8]
00506abd : MOV EAX,dword ptr [ECX]
00506abf : MOV EDX,dword ptr [EAX + 0x8]
00506ac2 : CALL EDX
00506ac4 : CMP EAX,0xd
00506ac7 : JNZ 0x00506b61
00506acd : MOV EAX,dword ptr [ESI + 0x8]
00506ad0 : TEST EAX,EAX
00506ad2 : JZ 0x00506b48
00506ad4 : ADD EAX,-0x10
00506ad7 : TEST EAX,EAX
00506ad9 : JZ 0x00506ae8
00506adb : MOV ECX,dword ptr [EAX + 0x8]
00506ade : INC ECX
00506adf : AND ECX,0x8fffffff
00506ae5 : MOV dword ptr [EAX + 0x8],ECX
00506ae8 : MOV EBP,EAX
00506aea : TEST EBP,EBP
00506aec : JZ 0x00506b61
00506aee : PUSH EBX
00506aef : MOV ECX,EBP
00506af1 : CALL 0x00502030
00506af6 : MOV EBX,EAX
00506af8 : TEST EBX,EBX
00506afa : JZ 0x00506b3d
00506afc : MOV EDI,dword ptr [ESI + 0x18]
00506aff : PUSH 0x0
00506b01 : MOV ECX,ESI
00506b03 : CALL 0x00526260
00506b08 : PUSH 0x0
00506b0a : PUSH -0x1
00506b0c : PUSH EDI
00506b0d : LEA EDX,[ESP + 0x20]
00506b11 : PUSH EDX
00506b12 : MOV ECX,EAX
00506b14 : CALL 0x005272e0
00506b19 : LEA EDI,[ESP + 0x14]
00506b1d : CALL 0x005002b0
00506b22 : CMP EAX,0x5
00506b25 : JL 0x00506b4c
00506b27 : MOV EAX,dword ptr [ESP + 0x14]
00506b2b : DEC dword ptr [EAX + 0x8]
00506b2e : MOV ECX,EAX
00506b30 : ADD EAX,0x8
00506b33 : CMP dword ptr [EAX],0x0
00506b36 : JNZ 0x00506b3d
00506b38 : CALL 0x00525340
00506b3d : POP EBX
00506b3e : MOV ECX,EBP
00506b40 : POP EBP
00506b41 : POP EDI
00506b42 : POP ESI
00506b43 : JMP 0x00503db0
00506b48 : XOR EAX,EAX
00506b4a : JMP 0x00506ae8
00506b4c : SHL EAX,0x4
00506b4f : ADD EAX,EBX
00506b51 : PUSH EAX
00506b52 : PUSH ESI
00506b53 : CALL 0x00506700
00506b58 : MOV EAX,dword ptr [ESP + 0x1c]
00506b5c : ADD ESP,0x8
00506b5f : JMP 0x00506b2b
00506b61 : POP EBP
00506b62 : POP EDI
00506b63 : POP ESI
00506b64 : RET
