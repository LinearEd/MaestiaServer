PROGRAM  : Maestia.exe
FUNCTION : FUN_00abe540
ENTRY    : 00abe540
BODY     : [[00abe540, 00abe7ee]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00abe540(int param_1,ushort param_2,ushort param_3)

{
  undefined4 uVar1;
  undefined4 in_ECX;
  int iVar2;
  undefined1 local_7c [32];
  undefined1 local_5c [4];
  uint local_58;
  undefined1 local_54 [4];
  int local_50;
  int local_4c;
  LPCRITICAL_SECTION local_48;
  char *local_44;
  undefined4 local_40;
  int local_3c;
  undefined4 local_38;
  undefined1 local_34 [4];
  undefined2 local_30;
  int local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2ac12;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_48 = (LPCRITICAL_SECTION)(param_1 + 0x4c);
  local_3c = 0;
  local_44 = ".\\Objects\\AvaAnimationList.cpp";
  local_40 = 0x21;
  local_38 = 1;
  FUN_006ef1a0(&local_48);
  local_8 = 0;
  local_58 = (uint)param_2 << 0x10;
  iVar2 = CONCAT22(param_2,param_3);
  local_50 = iVar2;
  local_4c = iVar2;
  uVar1 = FUN_00410510(local_7c,&local_50,in_ECX);
  local_8._0_1_ = 1;
  FUN_004103f0(local_54,uVar1);
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_004427d0(local_7c);
  local_8 = 0xffffffff;
  if (local_3c != 0) {
    LeaveCriticalSection(local_48);
    local_3c = 0;
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  FUN_00405eb0(in_ECX,0,0xffffffff);
  local_8 = 2;
  if (param_3 < 1000) {
    local_50 = 0x2e;
    iVar2 = FUN_00407cc0(&local_50,1);
    if (iVar2 == -1) {
      if (7 < local_1c) {
        local_8 = iVar2;
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_00abe7ca;
    }
    FUN_00405e10(iVar2,local_20 - iVar2);
    FUN_00404870(L"_upper.maf",10);
    iVar2 = local_4c;
  }
  local_3c = 0;
  local_44 = ".\\Objects\\AvaAnimationList.cpp";
  local_40 = 0x3c;
  local_38 = 1;
  local_4c = iVar2;
  local_48 = (LPCRITICAL_SECTION)(param_1 + 0x4c);
  FUN_006ef1a0(&local_48);
  local_8._0_1_ = 3;
  FUN_00410490(&local_4c);
  if (local_50 == *(int *)(param_1 + 4)) {
    local_8._0_1_ = 2;
    if (local_3c != 0) {
      LeaveCriticalSection(local_48);
    }
    local_3c = 0;
    local_44 = ".\\Objects\\AvaAnimationList.cpp";
    local_40 = 0x43;
    local_38 = 1;
    local_48 = (LPCRITICAL_SECTION)(param_1 + 0x4c);
    FUN_006ef1a0(&local_48);
    local_8._0_1_ = 4;
    local_58 = (ushort)(param_3 + 1000) | local_58;
    uVar1 = FUN_00410510(local_7c,&local_58,local_34);
    local_8._0_1_ = 5;
    FUN_004103f0(local_5c,uVar1);
    local_8._0_1_ = 4;
    FUN_004427d0(local_7c);
    local_8 = CONCAT31(local_8._1_3_,2);
    if (local_3c != 0) {
      LeaveCriticalSection(local_48);
      local_3c = 0;
    }
    local_8 = 0xffffffff;
    if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    local_8 = CONCAT31(local_8._1_3_,2);
    if (local_3c != 0) {
      LeaveCriticalSection(local_48);
      local_3c = 0;
    }
    local_8 = 0xffffffff;
    if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
LAB_00abe7ca:
  local_8 = 0xffffffff;
  local_20 = 0;
  local_30 = 0;
  local_1c = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00abe540 : PUSH EBP
00abe541 : MOV EBP,ESP
00abe543 : PUSH -0x1
00abe545 : PUSH 0xb2ac12
00abe54a : MOV EAX,FS:[0x0]
00abe550 : PUSH EAX
00abe551 : SUB ESP,0x70
00abe554 : MOV EAX,[0x00d66fa0]
00abe559 : XOR EAX,EBP
00abe55b : MOV dword ptr [EBP + -0x14],EAX
00abe55e : PUSH EBX
00abe55f : PUSH ESI
00abe560 : PUSH EDI
00abe561 : PUSH EAX
00abe562 : LEA EAX,[EBP + -0xc]
00abe565 : MOV FS:[0x0],EAX
00abe56b : MOV EBX,dword ptr [EBP + 0x8]
00abe56e : LEA EAX,[EBX + 0x4c]
00abe571 : MOV dword ptr [EBP + -0x44],EAX
00abe574 : LEA EAX,[EBP + -0x44]
00abe577 : XOR ESI,ESI
00abe579 : PUSH EAX
00abe57a : MOV EDI,ECX
00abe57c : MOV dword ptr [EBP + -0x38],ESI
00abe57f : MOV dword ptr [EBP + -0x40],0xc47f5c
00abe586 : MOV dword ptr [EBP + -0x3c],0x21
00abe58d : MOV dword ptr [EBP + -0x34],0x1
00abe594 : CALL 0x006ef1a0
00abe599 : MOV dword ptr [EBP + -0x4],ESI
00abe59c : MOVZX EAX,word ptr [EBP + 0xc]
00abe5a0 : MOVZX ESI,word ptr [EBP + 0x10]
00abe5a4 : PUSH EDI
00abe5a5 : SHL EAX,0x10
00abe5a8 : LEA ECX,[EBP + -0x4c]
00abe5ab : OR ESI,EAX
00abe5ad : PUSH ECX
00abe5ae : LEA EDX,[EBP + -0x78]
00abe5b1 : PUSH EDX
00abe5b2 : MOV dword ptr [EBP + -0x54],EAX
00abe5b5 : MOV dword ptr [EBP + -0x48],ESI
00abe5b8 : MOV dword ptr [EBP + -0x4c],ESI
00abe5bb : CALL 0x00410510
00abe5c0 : MOV byte ptr [EBP + -0x4],0x1
00abe5c4 : PUSH EAX
00abe5c5 : LEA EAX,[EBP + -0x50]
00abe5c8 : PUSH EAX
00abe5c9 : MOV EAX,EBX
00abe5cb : CALL 0x004103f0
00abe5d0 : MOV byte ptr [EBP + -0x4],0x0
00abe5d4 : LEA ECX,[EBP + -0x78]
00abe5d7 : PUSH ECX
00abe5d8 : CALL 0x004427d0
00abe5dd : MOV dword ptr [EBP + -0x4],0xffffffff
00abe5e4 : CMP dword ptr [EBP + -0x38],0x0
00abe5e8 : JZ 0x00abe5fb
00abe5ea : MOV EDX,dword ptr [EBP + -0x44]
00abe5ed : PUSH EDX
00abe5ee : CALL dword ptr [0x00b8511c]
00abe5f4 : MOV dword ptr [EBP + -0x38],0x0
00abe5fb : XOR EAX,EAX
00abe5fd : PUSH -0x1
00abe5ff : PUSH EAX
00abe600 : PUSH EDI
00abe601 : LEA ECX,[EBP + -0x30]
00abe604 : MOV dword ptr [EBP + -0x18],0x7
00abe60b : MOV dword ptr [EBP + -0x1c],0x0
00abe612 : MOV word ptr [EBP + -0x2c],AX
00abe616 : CALL 0x00405eb0
00abe61b : MOV dword ptr [EBP + -0x4],0x2
00abe622 : MOV EDI,dword ptr [EBP + 0x10]
00abe625 : MOV ECX,0x3e8
00abe62a : CMP DI,CX
00abe62d : JNC 0x00abe68d
00abe62f : PUSH 0x1
00abe631 : LEA EDX,[EBP + -0x4c]
00abe634 : PUSH EDX
00abe635 : OR ECX,0xffffffff
00abe638 : LEA EDI,[EBP + -0x30]
00abe63b : MOV dword ptr [EBP + -0x4c],0x2e
00abe642 : CALL 0x00407cc0
00abe647 : CMP EAX,-0x1
00abe64a : JNZ 0x00abe669
00abe64c : MOV dword ptr [EBP + -0x4],EAX
00abe64f : CMP dword ptr [EBP + -0x18],0x8
00abe653 : JC 0x00abe65d
00abe655 : MOV ECX,dword ptr [EBP + -0x2c]
00abe658 : CALL 0x006f04e0
00abe65d : MOV dword ptr [EBP + -0x1c],0x0
00abe664 : JMP 0x00abe7c4
00abe669 : MOV ECX,dword ptr [EBP + -0x1c]
00abe66c : SUB ECX,EAX
00abe66e : PUSH ECX
00abe66f : PUSH EAX
00abe670 : LEA ECX,[EBP + -0x30]
00abe673 : CALL 0x00405e10
00abe678 : PUSH 0xa
00abe67a : PUSH 0xc47f7c
00abe67f : LEA ESI,[EBP + -0x30]
00abe682 : CALL 0x00404870
00abe687 : MOV ESI,dword ptr [EBP + -0x48]
00abe68a : MOV EDI,dword ptr [EBP + 0x10]
00abe68d : LEA EDX,[EBP + -0x44]
00abe690 : MOV dword ptr [EBP + -0x48],ESI
00abe693 : LEA ESI,[EBX + 0x4c]
00abe696 : PUSH EDX
00abe697 : MOV dword ptr [EBP + -0x38],0x0
00abe69e : MOV dword ptr [EBP + -0x44],ESI
00abe6a1 : MOV dword ptr [EBP + -0x40],0xc47f94
00abe6a8 : MOV dword ptr [EBP + -0x3c],0x3c
00abe6af : MOV dword ptr [EBP + -0x34],0x1
00abe6b6 : CALL 0x006ef1a0
00abe6bb : MOV byte ptr [EBP + -0x4],0x3
00abe6bf : LEA EAX,[EBP + -0x48]
00abe6c2 : PUSH EAX
00abe6c3 : LEA EAX,[EBP + -0x4c]
00abe6c6 : MOV ECX,EBX
00abe6c8 : CALL 0x00410490
00abe6cd : MOV EAX,dword ptr [EBX + 0x4]
00abe6d0 : CMP dword ptr [EBP + -0x4c],EAX
00abe6d3 : JZ 0x00abe710
00abe6d5 : MOV byte ptr [EBP + -0x4],0x2
00abe6d9 : XOR ESI,ESI
00abe6db : CMP dword ptr [EBP + -0x38],ESI
00abe6de : JZ 0x00abe6ed
00abe6e0 : MOV ECX,dword ptr [EBP + -0x44]
00abe6e3 : PUSH ECX
00abe6e4 : CALL dword ptr [0x00b8511c]
00abe6ea : MOV dword ptr [EBP + -0x38],ESI
00abe6ed : MOV dword ptr [EBP + -0x4],0xffffffff
00abe6f4 : CMP dword ptr [EBP + -0x18],0x8
00abe6f8 : JC 0x00abe702
00abe6fa : MOV ECX,dword ptr [EBP + -0x2c]
00abe6fd : CALL 0x006f04e0
00abe702 : XOR EDX,EDX
00abe704 : MOV dword ptr [EBP + -0x1c],ESI
00abe707 : MOV word ptr [EBP + -0x2c],DX
00abe70b : JMP 0x00abe7ca
00abe710 : MOV byte ptr [EBP + -0x4],0x2
00abe714 : CMP dword ptr [EBP + -0x38],0x0
00abe718 : JZ 0x00abe72b
00abe71a : MOV EAX,dword ptr [EBP + -0x44]
00abe71d : PUSH EAX
00abe71e : CALL dword ptr [0x00b8511c]
00abe724 : MOV dword ptr [EBP + -0x38],0x0
00abe72b : LEA ECX,[EBP + -0x44]
00abe72e : PUSH ECX
00abe72f : MOV dword ptr [EBP + -0x38],0x0
00abe736 : MOV dword ptr [EBP + -0x44],ESI
00abe739 : MOV dword ptr [EBP + -0x40],0xc47fb4
00abe740 : MOV dword ptr [EBP + -0x3c],0x43
00abe747 : MOV dword ptr [EBP + -0x34],0x1
00abe74e : CALL 0x006ef1a0
00abe753 : MOV byte ptr [EBP + -0x4],0x4
00abe757 : ADD EDI,0x3e8
00abe75d : MOVZX EDX,DI
00abe760 : OR EDX,dword ptr [EBP + -0x54]
00abe763 : LEA EAX,[EBP + -0x30]
00abe766 : PUSH EAX
00abe767 : LEA ECX,[EBP + -0x54]
00abe76a : MOV dword ptr [EBP + -0x54],EDX
00abe76d : PUSH ECX
00abe76e : LEA EDX,[EBP + -0x78]
00abe771 : PUSH EDX
00abe772 : CALL 0x00410510
00abe777 : MOV byte ptr [EBP + -0x4],0x5
00abe77b : PUSH EAX
00abe77c : LEA EAX,[EBP + -0x58]
00abe77f : PUSH EAX
00abe780 : MOV EAX,EBX
00abe782 : CALL 0x004103f0
00abe787 : MOV byte ptr [EBP + -0x4],0x4
00abe78b : LEA ECX,[EBP + -0x78]
00abe78e : PUSH ECX
00abe78f : CALL 0x004427d0
00abe794 : MOV byte ptr [EBP + -0x4],0x2
00abe798 : XOR ESI,ESI
00abe79a : CMP dword ptr [EBP + -0x38],ESI
00abe79d : JZ 0x00abe7ac
00abe79f : MOV EDX,dword ptr [EBP + -0x44]
00abe7a2 : PUSH EDX
00abe7a3 : CALL dword ptr [0x00b8511c]
00abe7a9 : MOV dword ptr [EBP + -0x38],ESI
00abe7ac : MOV dword ptr [EBP + -0x4],0xffffffff
00abe7b3 : CMP dword ptr [EBP + -0x18],0x8
00abe7b7 : JC 0x00abe7c1
00abe7b9 : MOV ECX,dword ptr [EBP + -0x2c]
00abe7bc : CALL 0x006f04e0
00abe7c1 : MOV dword ptr [EBP + -0x1c],ESI
00abe7c4 : XOR EAX,EAX
00abe7c6 : MOV word ptr [EBP + -0x2c],AX
00abe7ca : MOV dword ptr [EBP + -0x18],0x7
00abe7d1 : MOV ECX,dword ptr [EBP + -0xc]
00abe7d4 : MOV dword ptr FS:[0x0],ECX
00abe7db : POP ECX
00abe7dc : POP EDI
00abe7dd : POP ESI
00abe7de : POP EBX
00abe7df : MOV ECX,dword ptr [EBP + -0x14]
00abe7e2 : XOR ECX,EBP
00abe7e4 : CALL 0x00633e6b
00abe7e9 : MOV ESP,EBP
00abe7eb : POP EBP
00abe7ec : RET 0xc
