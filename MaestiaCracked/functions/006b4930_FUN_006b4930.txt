PROGRAM  : Maestia.exe
FUNCTION : FUN_006b4930
ENTRY    : 006b4930
BODY     : [[006b4930, 006b4b72]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b4930(void)

{
  short sVar1;
  int *in_EAX;
  char cVar2;
  int iVar3;
  
  if (*(char *)(*in_EAX + 0x2b4) != '\0') {
    if ((*(short *)((int)in_EAX + 0x126) == 0x4000) && (*(short *)((int)in_EAX + 0x12a) == 0x4000))
    {
      cVar2 = '\x01';
    }
    else {
      cVar2 = '\0';
    }
    *(undefined2 *)((int)in_EAX + 0x126) = 0;
    *(undefined2 *)(in_EAX + 0x4a) = 0;
    *(undefined2 *)((int)in_EAX + 0x12a) = 0;
    *(undefined2 *)(in_EAX + 0x4b) = 0;
    *(char *)((int)in_EAX + 0x12e) = cVar2;
    if (cVar2 == '\0') {
      in_EAX[0x8f] = (int)FUN_006b4920;
      in_EAX[0x92] = (int)&LAB_006b43b0;
      in_EAX[0x93] = (int)&LAB_006b4400;
    }
    else {
      in_EAX[0x8f] = (int)&LAB_006b4910;
      in_EAX[0x92] = (int)&LAB_006b4380;
      in_EAX[0x93] = (int)&LAB_006b43e0;
    }
    if (*(short *)((int)in_EAX + 0x122) == 0x4000) {
      in_EAX[0x90] = (int)&LAB_006b4910;
      in_EAX[0x40] = 0;
      return;
    }
    if ((short)in_EAX[0x49] == 0x4000) {
      in_EAX[0x90] = (int)FUN_006b4920;
      in_EAX[0x40] = 0;
      return;
    }
    in_EAX[0x90] = (int)&LAB_006b48e0;
    in_EAX[0x40] = 0;
    return;
  }
  sVar1 = *(short *)((int)in_EAX + 0x12a);
  if (sVar1 == 0x4000) {
    iVar3 = (int)*(short *)((int)in_EAX + 0x126) << 0x10;
  }
  else {
    if ((short)in_EAX[0x4b] == 0x4000) {
      in_EAX[0x8d] = (int)(short)in_EAX[0x4a] << 0x10;
      goto LAB_006b4a81;
    }
    iVar3 = ((int)(short)in_EAX[0x4a] * (int)(short)in_EAX[0x4b] +
            (int)*(short *)((int)in_EAX + 0x126) * (int)sVar1) * 4;
  }
  in_EAX[0x8d] = iVar3;
LAB_006b4a81:
  if (*(short *)((int)in_EAX + 0x126) == 0x4000) {
    in_EAX[0x8f] = (int)&LAB_006b4910;
  }
  else if ((short)in_EAX[0x4a] == 0x4000) {
    in_EAX[0x8f] = (int)FUN_006b4920;
  }
  else {
    in_EAX[0x8f] = (int)&LAB_006b48b0;
  }
  if (*(short *)((int)in_EAX + 0x122) == 0x4000) {
    in_EAX[0x90] = (int)&LAB_006b4910;
  }
  else if ((short)in_EAX[0x49] == 0x4000) {
    in_EAX[0x90] = (int)FUN_006b4920;
  }
  else {
    in_EAX[0x90] = (int)&LAB_006b48e0;
  }
  iVar3 = in_EAX[0x8d];
  in_EAX[0x92] = (int)FUN_006b4270;
  in_EAX[0x93] = (int)FUN_006b4300;
  if (iVar3 == 0x40000000) {
    if (sVar1 == 0x4000) {
      in_EAX[0x92] = (int)&LAB_006b4380;
      in_EAX[0x93] = (int)&LAB_006b43e0;
    }
    else if ((short)in_EAX[0x4b] == 0x4000) {
      in_EAX[0x92] = (int)&LAB_006b43b0;
      in_EAX[0x93] = (int)&LAB_006b4400;
    }
  }
  if (iVar3 < 0) {
    iVar3 = -iVar3;
  }
  if (iVar3 < 0x4000000) {
    in_EAX[0x8d] = 0x40000000;
  }
  in_EAX[0x40] = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
006b4930 : MOV ECX,dword ptr [EAX]
006b4932 : CMP byte ptr [ECX + 0x2b4],0x0
006b4939 : PUSH EDI
006b493a : JZ 0x006b4a1a
006b4940 : MOV EDX,0x4000
006b4945 : CMP word ptr [EAX + 0x126],DX
006b494c : JNZ 0x006b495d
006b494e : MOV ECX,EDX
006b4950 : CMP word ptr [EAX + 0x12a],CX
006b4957 : JNZ 0x006b495d
006b4959 : MOV CL,0x1
006b495b : JMP 0x006b495f
006b495d : XOR CL,CL
006b495f : XOR EDX,EDX
006b4961 : MOV word ptr [EAX + 0x126],DX
006b4968 : MOV word ptr [EAX + 0x128],DX
006b496f : MOV word ptr [EAX + 0x12a],DX
006b4976 : MOV word ptr [EAX + 0x12c],DX
006b497d : MOV byte ptr [EAX + 0x12e],CL
006b4983 : MOV EDI,0x6b4920
006b4988 : MOV EDX,0x6b4910
006b498d : TEST CL,CL
006b498f : JZ 0x006b49ad
006b4991 : MOV dword ptr [EAX + 0x23c],EDX
006b4997 : MOV dword ptr [EAX + 0x248],0x6b4380
006b49a1 : MOV dword ptr [EAX + 0x24c],0x6b43e0
006b49ab : JMP 0x006b49c7
006b49ad : MOV dword ptr [EAX + 0x23c],EDI
006b49b3 : MOV dword ptr [EAX + 0x248],0x6b43b0
006b49bd : MOV dword ptr [EAX + 0x24c],0x6b4400
006b49c7 : MOV ECX,0x4000
006b49cc : CMP word ptr [EAX + 0x122],CX
006b49d3 : JNZ 0x006b49e7
006b49d5 : MOV dword ptr [EAX + 0x240],EDX
006b49db : MOV dword ptr [EAX + 0x100],0x0
006b49e5 : POP EDI
006b49e6 : RET
006b49e7 : MOV EDX,ECX
006b49e9 : CMP word ptr [EAX + 0x124],DX
006b49f0 : JNZ 0x006b4a04
006b49f2 : MOV dword ptr [EAX + 0x240],EDI
006b49f8 : MOV dword ptr [EAX + 0x100],0x0
006b4a02 : POP EDI
006b4a03 : RET
006b4a04 : MOV dword ptr [EAX + 0x240],0x6b48e0
006b4a0e : MOV dword ptr [EAX + 0x100],0x0
006b4a18 : POP EDI
006b4a19 : RET
006b4a1a : PUSH ESI
006b4a1b : MOVZX ESI,word ptr [EAX + 0x12a]
006b4a22 : MOV ECX,0x4000
006b4a27 : CMP SI,CX
006b4a2a : JNZ 0x006b4a38
006b4a2c : MOVSX EDX,word ptr [EAX + 0x126]
006b4a33 : SHL EDX,0x10
006b4a36 : JMP 0x006b4a7b
006b4a38 : MOVZX ECX,word ptr [EAX + 0x12c]
006b4a3f : MOV EDX,0x4000
006b4a44 : CMP CX,DX
006b4a47 : JNZ 0x006b4a5b
006b4a49 : MOVSX ECX,word ptr [EAX + 0x128]
006b4a50 : SHL ECX,0x10
006b4a53 : MOV dword ptr [EAX + 0x234],ECX
006b4a59 : JMP 0x006b4a81
006b4a5b : MOVSX EDX,word ptr [EAX + 0x128]
006b4a62 : MOVSX ECX,CX
006b4a65 : IMUL EDX,ECX
006b4a68 : MOVSX ECX,word ptr [EAX + 0x126]
006b4a6f : MOVSX EDI,SI
006b4a72 : IMUL ECX,EDI
006b4a75 : ADD EDX,ECX
006b4a77 : ADD EDX,EDX
006b4a79 : ADD EDX,EDX
006b4a7b : MOV dword ptr [EAX + 0x234],EDX
006b4a81 : MOV ECX,0x4000
006b4a86 : MOV EDX,0x6b4910
006b4a8b : MOV EDI,0x6b4920
006b4a90 : CMP word ptr [EAX + 0x126],CX
006b4a97 : JNZ 0x006b4aa1
006b4a99 : MOV dword ptr [EAX + 0x23c],EDX
006b4a9f : JMP 0x006b4abc
006b4aa1 : CMP word ptr [EAX + 0x128],CX
006b4aa8 : JNZ 0x006b4ab2
006b4aaa : MOV dword ptr [EAX + 0x23c],EDI
006b4ab0 : JMP 0x006b4abc
006b4ab2 : MOV dword ptr [EAX + 0x23c],0x6b48b0
006b4abc : MOV ECX,0x4000
006b4ac1 : CMP word ptr [EAX + 0x122],CX
006b4ac8 : JNZ 0x006b4ad2
006b4aca : MOV dword ptr [EAX + 0x240],EDX
006b4ad0 : JMP 0x006b4aef
006b4ad2 : MOV EDX,ECX
006b4ad4 : CMP word ptr [EAX + 0x124],DX
006b4adb : JNZ 0x006b4ae5
006b4add : MOV dword ptr [EAX + 0x240],EDI
006b4ae3 : JMP 0x006b4aef
006b4ae5 : MOV dword ptr [EAX + 0x240],0x6b48e0
006b4aef : MOV ECX,dword ptr [EAX + 0x234]
006b4af5 : MOV dword ptr [EAX + 0x248],0x6b4270
006b4aff : MOV dword ptr [EAX + 0x24c],0x6b4300
006b4b09 : CMP ECX,0x40000000
006b4b0f : JNZ 0x006b4b4e
006b4b11 : MOV EDX,0x4000
006b4b16 : CMP SI,DX
006b4b19 : JNZ 0x006b4b31
006b4b1b : MOV dword ptr [EAX + 0x248],0x6b4380
006b4b25 : MOV dword ptr [EAX + 0x24c],0x6b43e0
006b4b2f : JMP 0x006b4b4e
006b4b31 : CMP word ptr [EAX + 0x12c],DX
006b4b38 : JNZ 0x006b4b4e
006b4b3a : MOV dword ptr [EAX + 0x248],0x6b43b0
006b4b44 : MOV dword ptr [EAX + 0x24c],0x6b4400
006b4b4e : POP ESI
006b4b4f : TEST ECX,ECX
006b4b51 : JGE 0x006b4b55
006b4b53 : NEG ECX
006b4b55 : CMP ECX,0x4000000
006b4b5b : JGE 0x006b4b67
006b4b5d : MOV dword ptr [EAX + 0x234],0x40000000
006b4b67 : MOV dword ptr [EAX + 0x100],0x0
006b4b71 : POP EDI
006b4b72 : RET
