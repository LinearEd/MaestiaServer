PROGRAM  : Maestia.exe
FUNCTION : FUN_0053d390
ENTRY    : 0053d390
BODY     : [[0053d390, 0053d441]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053d390(undefined1 *param_1)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  int iVar4;
  uint uVar5;
  
  cVar1 = FUN_005ae910();
  if (cVar1 != '\0') {
    do {
      if (*(uint *)(in_ECX + 0x2fc) < 0x18) {
        iVar2 = FUN_00515890(0x18,4,0);
      }
      else {
        iVar2 = *(int *)(in_ECX + 0x2f8);
        iVar4 = (iVar2 + 0x17U & 0xfffffffc) + 4;
        *(int *)(in_ECX + 0x2f8) = iVar4;
        uVar5 = (iVar4 - (in_ECX + 0xf4)) - 4;
        if (uVar5 < 0x200) {
          *(uint *)(in_ECX + 0x2fc) = 0x200 - uVar5;
        }
        else {
          *(undefined4 *)(in_ECX + 0x2fc) = 0;
        }
      }
      if (iVar2 == 0) {
        uVar3 = 0;
      }
      else {
        uVar3 = FUN_005ae020(in_ECX,*param_1);
      }
      FUN_005ae9a0(uVar3,1);
      cVar1 = FUN_005ae910();
    } while (cVar1 != '\0');
  }
  *(char *)(in_ECX + 5) = *(char *)(in_ECX + 5) + '\x01';
  return;
}



============================================================
DISASSEMBLY
============================================================
0053d390 : PUSH EDI
0053d391 : MOV EDI,ECX
0053d393 : CALL 0x005ae910
0053d398 : TEST AL,AL
0053d39a : JZ 0x0053d43b
0053d3a0 : PUSH EBP
0053d3a1 : MOV EBP,dword ptr [ESP + 0xc]
0053d3a5 : PUSH ESI
0053d3a6 : LEA ESI,[EDI + 0xf4]
0053d3ac : LEA ESP,[ESP]
0053d3b0 : CMP dword ptr [ESI + 0x208],0x18
0053d3b7 : JC 0x0053d3f4
0053d3b9 : MOV EAX,dword ptr [ESI + 0x204]
0053d3bf : LEA EDX,[EAX + 0x17]
0053d3c2 : AND EDX,0xfffffffc
0053d3c5 : ADD EDX,0x4
0053d3c8 : MOV dword ptr [ESI + 0x204],EDX
0053d3ce : SUB EDX,ESI
0053d3d0 : SUB EDX,0x4
0053d3d3 : CMP EDX,0x200
0053d3d9 : JNC 0x0053d3ea
0053d3db : MOV ECX,0x200
0053d3e0 : SUB ECX,EDX
0053d3e2 : MOV dword ptr [ESI + 0x208],ECX
0053d3e8 : JMP 0x0053d40b
0053d3ea : XOR ECX,ECX
0053d3ec : MOV dword ptr [ESI + 0x208],ECX
0053d3f2 : JMP 0x0053d40b
0053d3f4 : MOV ECX,dword ptr [ESI]
0053d3f6 : PUSH 0x0
0053d3f8 : PUSH 0x4
0053d3fa : PUSH 0x18
0053d3fc : TEST ECX,ECX
0053d3fe : JNZ 0x0053d406
0053d400 : MOV ECX,dword ptr [0x00d73250]
0053d406 : CALL 0x00515890
0053d40b : TEST EAX,EAX
0053d40d : JZ 0x0053d41e
0053d40f : MOVZX ECX,byte ptr [EBP]
0053d413 : PUSH ECX
0053d414 : PUSH EDI
0053d415 : MOV ECX,EAX
0053d417 : CALL 0x005ae020
0053d41c : JMP 0x0053d420
0053d41e : XOR EAX,EAX
0053d420 : PUSH 0x1
0053d422 : PUSH EAX
0053d423 : MOV ECX,EDI
0053d425 : CALL 0x005ae9a0
0053d42a : MOV ECX,EDI
0053d42c : CALL 0x005ae910
0053d431 : TEST AL,AL
0053d433 : JNZ 0x0053d3b0
0053d439 : POP ESI
0053d43a : POP EBP
0053d43b : INC byte ptr [EDI + 0x5]
0053d43e : POP EDI
0053d43f : RET 0x4
