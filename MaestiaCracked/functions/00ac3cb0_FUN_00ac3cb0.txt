PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac3cb0
ENTRY    : 00ac3cb0
BODY     : [[00ac3cb0, 00ac3d55] [00ac3d5d, 00ac3e70]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ac3cb0(undefined4 param_1,undefined4 param_2)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  int unaff_EDI;
  undefined1 local_70 [8];
  undefined2 local_68;
  undefined4 local_58;
  uint local_54;
  LPCRITICAL_SECTION local_50;
  char *local_4c;
  undefined4 local_48;
  int local_44;
  undefined4 local_40;
  undefined1 local_3c [4];
  int local_38;
  int local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4453a;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  iVar3 = FUN_00ac2040(param_1,param_2);
  if (iVar3 == 0) {
    local_38 = FUN_006f0760(0x40,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar2);
    local_8 = 0;
    if (local_38 == 0) {
      local_34 = 0;
    }
    else {
      local_34 = FUN_00ac25a0(local_38);
    }
    iVar3 = local_34;
    local_8 = 0xffffffff;
    local_38 = local_34;
    cVar1 = FUN_00ac2fc0(param_2);
    if (cVar1 == '\0') {
      if (iVar3 != 0) {
        FUN_00ac2470(iVar3);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else if (iVar3 != 0) {
      uVar4 = FUN_00404750(L"_key_%d",param_1);
      local_8 = 1;
      FUN_00403450(local_30,uVar4);
      local_8._0_1_ = 3;
      if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_54 = 7;
      local_58 = 0;
      local_68 = 0;
      FUN_0070c1f0();
      local_50 = (LPCRITICAL_SECTION)(unaff_EDI + 0x30);
      local_44 = 0;
      local_4c = ".\\Objects\\AvaCharacterOptionList.cpp";
      local_48 = 0x62;
      local_40 = 1;
      FUN_006ef1a0(&local_50);
      local_8._0_1_ = 4;
      uVar4 = FUN_0043c130(local_70,&local_38);
      local_8._0_1_ = 5;
      FUN_0042bc30(unaff_EDI,local_3c,uVar4,*(undefined4 *)(unaff_EDI + 8));
      local_8._0_1_ = 4;
      FUN_0044cb00(local_70);
      local_8 = CONCAT31(local_8._1_3_,3);
      if (local_44 != 0) {
        LeaveCriticalSection(local_50);
        local_44 = 0;
      }
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = 0;
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ac3cb0 : PUSH EBP
00ac3cb1 : MOV EBP,ESP
00ac3cb3 : PUSH -0x1
00ac3cb5 : PUSH 0xb4453a
00ac3cba : MOV EAX,FS:[0x0]
00ac3cc0 : PUSH EAX
00ac3cc1 : SUB ESP,0x60
00ac3cc4 : MOV EAX,[0x00d66fa0]
00ac3cc9 : XOR EAX,EBP
00ac3ccb : MOV dword ptr [EBP + -0x10],EAX
00ac3cce : PUSH EBX
00ac3ccf : PUSH ESI
00ac3cd0 : PUSH EAX
00ac3cd1 : LEA EAX,[EBP + -0xc]
00ac3cd4 : MOV FS:[0x0],EAX
00ac3cda : MOV EBX,dword ptr [EBP + 0xc]
00ac3cdd : MOV EAX,dword ptr [EBP + 0x8]
00ac3ce0 : PUSH EBX
00ac3ce1 : PUSH EAX
00ac3ce2 : MOV ECX,EDI
00ac3ce4 : CALL 0x00ac2040
00ac3ce9 : XOR ESI,ESI
00ac3ceb : CMP EAX,ESI
00ac3ced : JNZ 0x00ac3e54
00ac3cf3 : MOV ECX,dword ptr [0x01725270]
00ac3cf9 : SHR ECX,0x3
00ac3cfc : MOV EDX,ESI
00ac3cfe : AND ECX,0x1
00ac3d01 : SETZ DL
00ac3d04 : PUSH EDX
00ac3d05 : PUSH ESI
00ac3d06 : PUSH 0xbf1a4a
00ac3d0b : PUSH 0x40
00ac3d0d : CALL 0x006f0760
00ac3d12 : ADD ESP,0x10
00ac3d15 : MOV dword ptr [EBP + -0x34],EAX
00ac3d18 : MOV dword ptr [EBP + -0x4],ESI
00ac3d1b : CMP EAX,ESI
00ac3d1d : JZ 0x00ac3d2c
00ac3d1f : PUSH EAX
00ac3d20 : CALL 0x00ac25a0
00ac3d25 : MOV ESI,EAX
00ac3d27 : MOV dword ptr [EBP + -0x30],ESI
00ac3d2a : JMP 0x00ac3d2f
00ac3d2c : MOV dword ptr [EBP + -0x30],ESI
00ac3d2f : MOV dword ptr [EBP + -0x4],0xffffffff
00ac3d36 : PUSH EBX
00ac3d37 : MOV ECX,ESI
00ac3d39 : MOV dword ptr [EBP + -0x34],ESI
00ac3d3c : CALL 0x00ac2fc0
00ac3d41 : TEST AL,AL
00ac3d43 : JNZ 0x00ac3d5d
00ac3d45 : TEST ESI,ESI
00ac3d47 : JZ 0x00ac3d61
00ac3d49 : PUSH ESI
00ac3d4a : CALL 0x00ac2470
00ac3d4f : MOV ECX,ESI
00ac3d51 : CALL 0x006f04e0
00ac3d5d : TEST ESI,ESI
00ac3d5f : JNZ 0x00ac3d68
00ac3d61 : XOR EAX,EAX
00ac3d63 : JMP 0x00ac3e54
00ac3d68 : MOV EAX,dword ptr [EBP + 0x8]
00ac3d6b : PUSH EAX
00ac3d6c : PUSH 0xc44ae0
00ac3d71 : LEA ESI,[EBP + -0x68]
00ac3d74 : CALL 0x00404750
00ac3d79 : MOV dword ptr [EBP + -0x4],0x1
00ac3d80 : PUSH EAX
00ac3d81 : LEA ECX,[EBP + -0x2c]
00ac3d84 : PUSH ECX
00ac3d85 : MOV ECX,EBX
00ac3d87 : CALL 0x00403450
00ac3d8c : ADD ESP,0x10
00ac3d8f : MOV byte ptr [EBP + -0x4],0x3
00ac3d93 : CMP dword ptr [EBP + -0x50],0x8
00ac3d97 : JC 0x00ac3da1
00ac3d99 : MOV ECX,dword ptr [EBP + -0x64]
00ac3d9c : CALL 0x006f04e0
00ac3da1 : XOR EDX,EDX
00ac3da3 : XOR ESI,ESI
00ac3da5 : LEA ECX,[EBP + -0x2c]
00ac3da8 : MOV dword ptr [EBP + -0x50],0x7
00ac3daf : MOV dword ptr [EBP + -0x54],ESI
00ac3db2 : MOV word ptr [EBP + -0x64],DX
00ac3db6 : CALL 0x0070c1f0
00ac3dbb : LEA ECX,[EBP + -0x4c]
00ac3dbe : LEA EAX,[EDI + 0x30]
00ac3dc1 : PUSH ECX
00ac3dc2 : MOV dword ptr [EBP + -0x40],ESI
00ac3dc5 : MOV dword ptr [EBP + -0x4c],EAX
00ac3dc8 : MOV dword ptr [EBP + -0x48],0xc44af0
00ac3dcf : MOV dword ptr [EBP + -0x44],0x62
00ac3dd6 : MOV dword ptr [EBP + -0x3c],0x1
00ac3ddd : CALL 0x006ef1a0
00ac3de2 : MOV BL,0x4
00ac3de4 : MOV byte ptr [EBP + -0x4],BL
00ac3de7 : LEA EDX,[EBP + -0x34]
00ac3dea : PUSH EDX
00ac3deb : LEA EAX,[EBP + -0x6c]
00ac3dee : PUSH EAX
00ac3def : LEA ECX,[EBP + -0x2c]
00ac3df2 : CALL 0x0043c130
00ac3df7 : MOV byte ptr [EBP + -0x4],0x5
00ac3dfb : MOV ECX,dword ptr [EDI + 0x8]
00ac3dfe : PUSH ECX
00ac3dff : PUSH EAX
00ac3e00 : LEA ECX,[EBP + -0x38]
00ac3e03 : PUSH ECX
00ac3e04 : PUSH EDI
00ac3e05 : CALL 0x0042bc30
00ac3e0a : MOV byte ptr [EBP + -0x4],BL
00ac3e0d : LEA EDX,[EBP + -0x6c]
00ac3e10 : PUSH EDX
00ac3e11 : CALL 0x0044cb00
00ac3e16 : MOV byte ptr [EBP + -0x4],0x3
00ac3e1a : CMP dword ptr [EBP + -0x40],ESI
00ac3e1d : JZ 0x00ac3e2c
00ac3e1f : MOV EAX,dword ptr [EBP + -0x4c]
00ac3e22 : PUSH EAX
00ac3e23 : CALL dword ptr [0x00b8511c]
00ac3e29 : MOV dword ptr [EBP + -0x40],ESI
00ac3e2c : MOV dword ptr [EBP + -0x4],0xffffffff
00ac3e33 : CMP dword ptr [EBP + -0x14],0x8
00ac3e37 : JC 0x00ac3e41
00ac3e39 : MOV ECX,dword ptr [EBP + -0x28]
00ac3e3c : CALL 0x006f04e0
00ac3e41 : MOV EAX,dword ptr [EBP + -0x30]
00ac3e44 : XOR ECX,ECX
00ac3e46 : MOV dword ptr [EBP + -0x14],0x7
00ac3e4d : MOV dword ptr [EBP + -0x18],ESI
00ac3e50 : MOV word ptr [EBP + -0x28],CX
00ac3e54 : MOV ECX,dword ptr [EBP + -0xc]
00ac3e57 : MOV dword ptr FS:[0x0],ECX
00ac3e5e : POP ECX
00ac3e5f : POP ESI
00ac3e60 : POP EBX
00ac3e61 : MOV ECX,dword ptr [EBP + -0x10]
00ac3e64 : XOR ECX,EBP
00ac3e66 : CALL 0x00633e6b
00ac3e6b : MOV ESP,EBP
00ac3e6d : POP EBP
00ac3e6e : RET 0x8
