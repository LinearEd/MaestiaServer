PROGRAM  : Maestia.exe
FUNCTION : FUN_005c9b70
ENTRY    : 005c9b70
BODY     : [[005c9b70, 005c9cfd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c9b70(int param_1)

{
  int *piVar1;
  byte *pbVar2;
  char cVar3;
  int iVar4;
  LONG LVar5;
  uint local_2c;
  undefined4 *local_28;
  undefined4 *local_24;
  undefined1 local_20 [32];
  
  cVar3 = FUN_00526030(0x10);
  if (cVar3 != '\0') {
    if ((*(int *)(param_1 + 8) != 0) && (*(int *)(param_1 + 8) != 0x10)) {
      FUN_0040efe0(local_20,0x10,2,&LAB_004ffd10);
      FUN_005c9550(*(int *)(param_1 + 0x18) + 0x78,local_20);
      FUN_005272e0(&local_28,*(undefined4 *)(param_1 + 0x18),6,0);
      FUN_005272e0(&local_24,*(undefined4 *)(param_1 + 0x18),6,0);
      FUN_0051b6e0();
      FUN_0051b950(&DAT_00b8db4c,0xffffffff);
      FUN_0051b950(*local_28,0xffffffff);
      FUN_0051b950(&DAT_00b8db44,0xffffffff);
      FUN_0051b950(*local_24,0xffffffff);
      FUN_0051b950(&DAT_00b8db28,0xffffffff);
      iVar4 = FUN_00525450((local_2c & 0xfffffffc) + 8,*(uint *)(local_2c & 0xfffffffc) & 0x7fffffff
                          );
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
      pbVar2 = *(byte **)(param_1 + 4);
      if (4 < *pbVar2) {
        FUN_00526400();
      }
      *pbVar2 = 5;
      *(int *)(pbVar2 + 4) = iVar4;
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
      piVar1 = (int *)(iVar4 + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
      LVar5 = InterlockedExchangeAdd((LONG *)((local_2c & 0xfffffffc) + 4),-1);
      if (LVar5 == 1) {
        FUN_00515cf0(local_2c & 0xfffffffc);
      }
      FUN_004ff770(&local_28,4,2,FUN_004ffc80);
      FUN_004ff770(local_20,0x10,2,FUN_00526bc0);
    }
    return;
  }
  FUN_00526050("Point",0,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005c9b70 : SUB ESP,0x2c
005c9b73 : PUSH ESI
005c9b74 : MOV ESI,dword ptr [ESP + 0x34]
005c9b78 : PUSH 0x10
005c9b7a : MOV ECX,ESI
005c9b7c : CALL 0x00526030
005c9b81 : TEST AL,AL
005c9b83 : JNZ 0x005c9b9a
005c9b85 : PUSH 0x0
005c9b87 : PUSH 0x0
005c9b89 : PUSH 0xb8fe2c
005c9b8e : MOV ECX,ESI
005c9b90 : CALL 0x00526050
005c9b95 : POP ESI
005c9b96 : ADD ESP,0x2c
005c9b99 : RET
005c9b9a : MOV EAX,dword ptr [ESI + 0x8]
005c9b9d : TEST EAX,EAX
005c9b9f : JZ 0x005c9cf9
005c9ba5 : PUSH EDI
005c9ba6 : LEA EDI,[EAX + -0x10]
005c9ba9 : TEST EDI,EDI
005c9bab : JZ 0x005c9cf8
005c9bb1 : PUSH 0x4ffd10
005c9bb6 : PUSH 0x2
005c9bb8 : PUSH 0x10
005c9bba : LEA EAX,[ESP + 0x20]
005c9bbe : PUSH EAX
005c9bbf : CALL 0x0040efe0
005c9bc4 : MOV EDX,dword ptr [ESI + 0x18]
005c9bc7 : LEA ECX,[ESP + 0x14]
005c9bcb : PUSH ECX
005c9bcc : ADD EDX,0x78
005c9bcf : PUSH EDX
005c9bd0 : MOV ECX,EDI
005c9bd2 : CALL 0x005c9550
005c9bd7 : MOV EAX,dword ptr [ESI + 0x18]
005c9bda : PUSH 0x0
005c9bdc : PUSH 0x6
005c9bde : PUSH EAX
005c9bdf : LEA ECX,[ESP + 0x18]
005c9be3 : PUSH ECX
005c9be4 : LEA ECX,[ESP + 0x24]
005c9be8 : CALL 0x005272e0
005c9bed : MOV EDX,dword ptr [ESI + 0x18]
005c9bf0 : PUSH 0x0
005c9bf2 : PUSH 0x6
005c9bf4 : PUSH EDX
005c9bf5 : LEA EAX,[ESP + 0x1c]
005c9bf9 : PUSH EAX
005c9bfa : LEA ECX,[ESP + 0x34]
005c9bfe : CALL 0x005272e0
005c9c03 : LEA ECX,[ESP + 0x8]
005c9c07 : CALL 0x0051b6e0
005c9c0c : PUSH -0x1
005c9c0e : PUSH 0xb8db4c
005c9c13 : LEA ECX,[ESP + 0x10]
005c9c17 : CALL 0x0051b950
005c9c1c : MOV ECX,dword ptr [ESP + 0xc]
005c9c20 : MOV EDX,dword ptr [ECX]
005c9c22 : PUSH -0x1
005c9c24 : PUSH EDX
005c9c25 : LEA ECX,[ESP + 0x10]
005c9c29 : CALL 0x0051b950
005c9c2e : PUSH -0x1
005c9c30 : PUSH 0xb8db44
005c9c35 : LEA ECX,[ESP + 0x10]
005c9c39 : CALL 0x0051b950
005c9c3e : MOV EAX,dword ptr [ESP + 0x10]
005c9c42 : MOV ECX,dword ptr [EAX]
005c9c44 : PUSH -0x1
005c9c46 : PUSH ECX
005c9c47 : LEA ECX,[ESP + 0x10]
005c9c4b : CALL 0x0051b950
005c9c50 : PUSH -0x1
005c9c52 : PUSH 0xb8db28
005c9c57 : LEA ECX,[ESP + 0x10]
005c9c5b : CALL 0x0051b950
005c9c60 : MOV EAX,dword ptr [ESP + 0x8]
005c9c64 : MOV EDX,dword ptr [ESI + 0x18]
005c9c67 : MOV EDX,dword ptr [EDX + 0x78]
005c9c6a : MOV ECX,EAX
005c9c6c : AND ECX,0xfffffffc
005c9c6f : MOV ECX,dword ptr [ECX]
005c9c71 : AND ECX,0x7fffffff
005c9c77 : AND EAX,0xfffffffc
005c9c7a : PUSH ECX
005c9c7b : ADD EAX,0x8
005c9c7e : PUSH EAX
005c9c7f : LEA ECX,[EDX + 0x254]
005c9c85 : CALL 0x00525450
005c9c8a : MOV EDI,EAX
005c9c8c : INC dword ptr [EDI + 0x8]
005c9c8f : MOV ESI,dword ptr [ESI + 0x4]
005c9c92 : CMP byte ptr [ESI],0x5
005c9c95 : JC 0x005c9c9e
005c9c97 : MOV ECX,ESI
005c9c99 : CALL 0x00526400
005c9c9e : MOV byte ptr [ESI],0x5
005c9ca1 : MOV dword ptr [ESI + 0x4],EDI
005c9ca4 : INC dword ptr [EDI + 0x8]
005c9ca7 : ADD dword ptr [EDI + 0x8],-0x1
005c9cab : JNZ 0x005c9cb4
005c9cad : MOV ECX,EDI
005c9caf : CALL 0x00525340
005c9cb4 : MOV ESI,dword ptr [ESP + 0x8]
005c9cb8 : AND ESI,0xfffffffc
005c9cbb : PUSH -0x1
005c9cbd : LEA EDX,[ESI + 0x4]
005c9cc0 : PUSH EDX
005c9cc1 : CALL dword ptr [0x00b851cc]
005c9cc7 : SUB EAX,0x1
005c9cca : JNZ 0x005c9cd2
005c9ccc : PUSH ESI
005c9ccd : CALL 0x00515cf0
005c9cd2 : PUSH 0x4ffc80
005c9cd7 : PUSH 0x2
005c9cd9 : PUSH 0x4
005c9cdb : LEA EAX,[ESP + 0x18]
005c9cdf : PUSH EAX
005c9ce0 : CALL 0x004ff770
005c9ce5 : PUSH 0x526bc0
005c9cea : PUSH 0x2
005c9cec : PUSH 0x10
005c9cee : LEA ECX,[ESP + 0x20]
005c9cf2 : PUSH ECX
005c9cf3 : CALL 0x004ff770
005c9cf8 : POP EDI
005c9cf9 : POP ESI
005c9cfa : ADD ESP,0x2c
005c9cfd : RET
