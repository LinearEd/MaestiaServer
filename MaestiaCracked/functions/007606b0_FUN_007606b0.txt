PROGRAM  : Maestia.exe
FUNCTION : FUN_007606b0
ENTRY    : 007606b0
BODY     : [[007606b0, 00760739] [00760740, 00760839] [00760840, 00760978] [00760980, 007609bc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007606b0(uint param_1,int param_2)

{
  ushort *puVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  int *in_ECX;
  undefined4 *puVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  ushort uVar9;
  LPCRITICAL_SECTION local_30;
  char *local_2c;
  undefined4 local_28;
  int local_24;
  undefined4 local_20;
  int local_1c;
  uint local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3bff2;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_30 = (LPCRITICAL_SECTION)(param_1 + 0x80);
  local_24 = 0;
  local_2c = ".\\Resource\\AvaAniData.cpp";
  local_28 = 0x1a4;
  local_20 = 1;
  FUN_006ef1a0(&local_30);
  local_8 = 0;
  param_1 = 0;
  (**(code **)(*in_ECX + 0xc))(&param_1,2,1,uVar3);
  *(undefined2 *)(param_2 + 0xd8) = (undefined2)param_1;
  if (*(int *)(param_2 + 0xdc) != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  uVar3 = param_1 & 0xffff;
  local_14 = FUN_006f0760(uVar3 * 0x14,"",0,(DAT_01725270 >> 3 & 1) == 0);
  if (local_14 == 0) {
    local_14 = 0;
  }
  else {
    iVar7 = uVar3 - 1;
    if (-1 < iVar7) {
      puVar5 = (undefined4 *)(local_14 + 0xc);
      do {
        *(undefined2 *)(puVar5 + -3) = 0;
        puVar5[-2] = 0;
        puVar5[-1] = 0;
        *puVar5 = 0;
        puVar5[1] = 0x3f800000;
        puVar5 = puVar5 + 5;
        iVar7 = iVar7 + -1;
      } while (-1 < iVar7);
    }
  }
  uVar9 = 0;
  local_8 = local_8 & 0xffffff00;
  local_18 = 0;
  uVar2 = 0;
  if ((short)param_1 != 0) {
    do {
      puVar1 = (ushort *)(local_14 + (uint)uVar9 * 0x14);
      (**(code **)(*in_ECX + 0xc))(puVar1,2,1);
      (**(code **)(*in_ECX + 0xc))(puVar1 + 2,4,4);
      local_18 = (uint)*puVar1;
      uVar2 = (ushort)param_1;
      uVar9 = uVar9 + 1;
    } while (uVar9 < uVar2);
  }
  iVar7 = 0;
  if (uVar2 != 1) {
    uVar3 = 1;
    if (1 < (int)(uVar2 - 1)) {
      uVar4 = 1;
      do {
        iVar6 = local_14 + 4 + uVar4 * 0x14;
        if ((((*(float *)(local_14 + 4) != *(float *)(local_14 + 4 + uVar4 * 0x14)) ||
             (*(float *)(local_14 + 8) != *(float *)(iVar6 + 4))) ||
            (*(float *)(local_14 + 0xc) != *(float *)(iVar6 + 8))) ||
           (*(float *)(local_14 + 0x10) != *(float *)(iVar6 + 0xc))) {
          local_18 = local_18 + 1;
          uVar3 = local_18 & 0xffff;
          local_1c = FUN_006f0760(uVar3 * 0x14,"",0,(DAT_01725270 >> 3 & 1) == 0);
          if (local_1c == 0) {
            iVar6 = 0;
          }
          else {
            iVar8 = uVar3 - 1;
            iVar6 = local_1c;
            if (-1 < iVar8) {
              puVar5 = (undefined4 *)(local_1c + 0xc);
              do {
                *(undefined2 *)(puVar5 + -3) = 0;
                puVar5[-2] = 0;
                puVar5[-1] = 0;
                *puVar5 = 0;
                puVar5[1] = 0x3f800000;
                puVar5 = puVar5 + 5;
                iVar8 = iVar8 + -1;
              } while (-1 < iVar8);
            }
          }
          local_8 = local_8 & 0xffffff00;
          *(int *)(param_2 + 0xdc) = iVar6;
          uVar2 = 0;
          *(short *)(param_2 + 0xd8) = (short)local_18;
          if ((short)local_18 != 0) {
            do {
              *(ushort *)(iVar7 + *(int *)(param_2 + 0xdc)) = uVar2;
              FUN_004bd820(iVar7 + 4 + *(int *)(param_2 + 0xdc));
              uVar2 = uVar2 + 1;
              iVar7 = iVar7 + 0x14;
            } while (uVar2 < (ushort)local_18);
          }
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        uVar3 = uVar3 + 1;
        uVar4 = uVar3 & 0xffff;
      } while ((int)uVar4 < (int)(uVar2 - 1));
    }
    *(undefined2 *)(param_2 + 0xd8) = 1;
  }
  *(int *)(param_2 + 0xdc) = local_14;
  local_8 = 0xffffffff;
  if (local_24 != 0) {
    LeaveCriticalSection(local_30);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007606b0 : PUSH EBP
007606b1 : MOV EBP,ESP
007606b3 : PUSH -0x1
007606b5 : PUSH 0xb3bff2
007606ba : MOV EAX,FS:[0x0]
007606c0 : PUSH EAX
007606c1 : SUB ESP,0x20
007606c4 : PUSH EBX
007606c5 : PUSH ESI
007606c6 : PUSH EDI
007606c7 : MOV EAX,[0x00d66fa0]
007606cc : XOR EAX,EBP
007606ce : PUSH EAX
007606cf : LEA EAX,[EBP + -0xc]
007606d2 : MOV FS:[0x0],EAX
007606d8 : MOV EDI,ECX
007606da : MOV EAX,dword ptr [EBP + 0x8]
007606dd : LEA ECX,[EBP + -0x2c]
007606e0 : SUB EAX,-0x80
007606e3 : XOR EBX,EBX
007606e5 : PUSH ECX
007606e6 : MOV dword ptr [EBP + -0x20],EBX
007606e9 : MOV dword ptr [EBP + -0x2c],EAX
007606ec : MOV dword ptr [EBP + -0x28],0xc0c338
007606f3 : MOV dword ptr [EBP + -0x24],0x1a4
007606fa : MOV dword ptr [EBP + -0x1c],0x1
00760701 : CALL 0x006ef1a0
00760706 : MOV dword ptr [EBP + -0x4],EBX
00760709 : MOV EDX,dword ptr [EDI]
0076070b : MOV EDX,dword ptr [EDX + 0xc]
0076070e : PUSH 0x1
00760710 : PUSH 0x2
00760712 : LEA EAX,[EBP + 0x8]
00760715 : PUSH EAX
00760716 : MOV ECX,EDI
00760718 : MOV dword ptr [EBP + 0x8],EBX
0076071b : CALL EDX
0076071d : MOV ESI,dword ptr [EBP + 0xc]
00760720 : MOV ECX,dword ptr [ESI + 0xdc]
00760726 : MOV AX,word ptr [EBP + 0x8]
0076072a : MOV word ptr [ESI + 0xd8],AX
00760731 : CMP ECX,EBX
00760733 : JZ 0x00760740
00760735 : CALL 0x006f04e0
00760740 : MOVZX ESI,word ptr [EBP + 0x8]
00760744 : XOR ECX,ECX
00760746 : MOV EAX,ESI
00760748 : MOV EDX,0x14
0076074d : MUL EDX
0076074f : SETO CL
00760752 : MOV EDX,0x0
00760757 : NEG ECX
00760759 : OR EAX,ECX
0076075b : MOV ECX,dword ptr [0x01725270]
00760761 : SHR ECX,0x3
00760764 : AND ECX,0x1
00760767 : SETZ DL
0076076a : PUSH EDX
0076076b : PUSH EBX
0076076c : PUSH 0xbf1a4b
00760771 : PUSH EAX
00760772 : CALL 0x006f0760
00760777 : ADD ESP,0x10
0076077a : MOV dword ptr [EBP + -0x14],EAX
0076077d : MOV byte ptr [EBP + -0x4],0x1
00760781 : XORPS XMM0,XMM0
00760784 : MOVSS XMM1,dword ptr [0x00c10fc4]
0076078c : CMP EAX,EBX
0076078e : JZ 0x007607c8
00760790 : LEA EDX,[ESI + -0x1]
00760793 : CMP EDX,EBX
00760795 : JL 0x007607c1
00760797 : LEA ECX,[EAX + 0xc]
0076079a : LEA EBX,[EBX]
007607a0 : XOR ESI,ESI
007607a2 : MOV word ptr [ECX + -0xc],SI
007607a6 : MOVSS dword ptr [ECX + -0x8],XMM0
007607ab : MOVSS dword ptr [ECX + -0x4],XMM0
007607b0 : MOVSS dword ptr [ECX],XMM0
007607b4 : MOVSS dword ptr [ECX + 0x4],XMM1
007607b9 : ADD ECX,0x14
007607bc : SUB EDX,0x1
007607bf : JNS 0x007607a0
007607c1 : MOV ESI,EAX
007607c3 : MOV dword ptr [EBP + -0x10],ESI
007607c6 : JMP 0x007607cd
007607c8 : MOV dword ptr [EBP + -0x10],EBX
007607cb : MOV ESI,EBX
007607cd : MOV byte ptr [EBP + -0x4],0x0
007607d1 : MOV EAX,dword ptr [EBP + 0x8]
007607d4 : XOR ECX,ECX
007607d6 : MOV dword ptr [EBP + -0x14],EBX
007607d9 : CMP CX,AX
007607dc : JNC 0x0076081c
007607de : MOV EDI,EDI
007607e0 : MOVZX EAX,BX
007607e3 : LEA EDX,[EAX + EAX*0x4]
007607e6 : MOV EAX,dword ptr [EDI]
007607e8 : PUSH 0x1
007607ea : LEA ESI,[ESI + EDX*0x4]
007607ed : MOV EDX,dword ptr [EAX + 0xc]
007607f0 : PUSH 0x2
007607f2 : PUSH ESI
007607f3 : MOV ECX,EDI
007607f5 : CALL EDX
007607f7 : MOV EAX,dword ptr [EDI]
007607f9 : MOV EDX,dword ptr [EAX + 0xc]
007607fc : PUSH 0x4
007607fe : PUSH 0x4
00760800 : LEA ECX,[ESI + 0x4]
00760803 : PUSH ECX
00760804 : MOV ECX,EDI
00760806 : CALL EDX
00760808 : MOVZX EAX,word ptr [ESI]
0076080b : MOV ESI,dword ptr [EBP + -0x10]
0076080e : MOV dword ptr [EBP + -0x14],EAX
00760811 : MOV EAX,dword ptr [EBP + 0x8]
00760814 : INC EBX
00760815 : CMP BX,AX
00760818 : JC 0x007607e0
0076081a : XOR EBX,EBX
0076081c : CMP AX,0x1
00760820 : JZ 0x00760896
00760822 : MOVZX EAX,AX
00760825 : MOV EDI,0x1
0076082a : LEA EDX,[EAX + -0x1]
0076082d : CMP EDX,EDI
0076082f : JLE 0x00760887
00760831 : MOVSS XMM0,dword ptr [ESI + 0x4]
00760836 : MOV EAX,EDI
00760838 : JMP 0x00760840
00760840 : LEA ECX,[EAX + EAX*0x4]
00760843 : UCOMISS XMM0,dword ptr [ESI + ECX*0x4 + 0x4]
00760848 : LEA ECX,[ESI + ECX*0x4 + 0x4]
0076084c : LAHF
0076084d : TEST AH,0x44
00760850 : JP 0x007608cc
00760852 : MOVSS XMM1,dword ptr [ESI + 0x8]
00760857 : UCOMISS XMM1,dword ptr [ECX + 0x4]
0076085b : LAHF
0076085c : TEST AH,0x44
0076085f : JP 0x007608cc
00760861 : MOVSS XMM1,dword ptr [ESI + 0xc]
00760866 : UCOMISS XMM1,dword ptr [ECX + 0x8]
0076086a : LAHF
0076086b : TEST AH,0x44
0076086e : JP 0x007608cc
00760870 : MOVSS XMM1,dword ptr [ESI + 0x10]
00760875 : UCOMISS XMM1,dword ptr [ECX + 0xc]
00760879 : LAHF
0076087a : TEST AH,0x44
0076087d : JP 0x007608cc
0076087f : INC EDI
00760880 : MOVZX EAX,DI
00760883 : CMP EAX,EDX
00760885 : JL 0x00760840
00760887 : MOV EAX,dword ptr [EBP + 0xc]
0076088a : MOV EDX,0x1
0076088f : MOV word ptr [EAX + 0xd8],DX
00760896 : MOV ECX,dword ptr [EBP + 0xc]
00760899 : MOV dword ptr [ECX + 0xdc],ESI
0076089f : MOV dword ptr [EBP + -0x4],0xffffffff
007608a6 : CMP dword ptr [EBP + -0x20],EBX
007608a9 : JZ 0x007608b8
007608ab : MOV EDX,dword ptr [EBP + -0x2c]
007608ae : PUSH EDX
007608af : CALL dword ptr [0x00b8511c]
007608b5 : MOV dword ptr [EBP + -0x20],EBX
007608b8 : MOV ECX,dword ptr [EBP + -0xc]
007608bb : MOV dword ptr FS:[0x0],ECX
007608c2 : POP ECX
007608c3 : POP EDI
007608c4 : POP ESI
007608c5 : POP EBX
007608c6 : MOV ESP,EBP
007608c8 : POP EBP
007608c9 : RET 0x8
007608cc : MOV EAX,dword ptr [EBP + -0x14]
007608cf : INC EAX
007608d0 : MOVZX EDI,AX
007608d3 : XOR ECX,ECX
007608d5 : MOV dword ptr [EBP + -0x14],EAX
007608d8 : MOV EAX,EDI
007608da : MOV EDX,0x14
007608df : MUL EDX
007608e1 : SETO CL
007608e4 : MOV EDX,0x0
007608e9 : NEG ECX
007608eb : OR EAX,ECX
007608ed : MOV ECX,dword ptr [0x01725270]
007608f3 : SHR ECX,0x3
007608f6 : AND ECX,0x1
007608f9 : SETZ DL
007608fc : PUSH EDX
007608fd : PUSH EBX
007608fe : PUSH 0xbf1a4b
00760903 : PUSH EAX
00760904 : CALL 0x006f0760
00760909 : ADD ESP,0x10
0076090c : MOV dword ptr [EBP + -0x18],EAX
0076090f : MOV byte ptr [EBP + -0x4],0x2
00760913 : CMP EAX,EBX
00760915 : JZ 0x00760955
00760917 : LEA EDX,[EDI + -0x1]
0076091a : CMP EDX,EBX
0076091c : JL 0x00760951
0076091e : MOVSS XMM1,dword ptr [0x00c10fc4]
00760926 : XORPS XMM0,XMM0
00760929 : LEA ECX,[EAX + 0xc]
0076092c : LEA ESP,[ESP]
00760930 : XOR EDI,EDI
00760932 : MOV word ptr [ECX + -0xc],DI
00760936 : MOVSS dword ptr [ECX + -0x8],XMM0
0076093b : MOVSS dword ptr [ECX + -0x4],XMM0
00760940 : MOVSS dword ptr [ECX],XMM0
00760944 : MOVSS dword ptr [ECX + 0x4],XMM1
00760949 : ADD ECX,0x14
0076094c : SUB EDX,0x1
0076094f : JNS 0x00760930
00760951 : MOV ECX,EAX
00760953 : JMP 0x00760957
00760955 : XOR ECX,ECX
00760957 : MOV byte ptr [EBP + -0x4],0x0
0076095b : MOV EAX,dword ptr [EBP + 0xc]
0076095e : MOV dword ptr [EAX + 0xdc],ECX
00760964 : MOV ECX,dword ptr [EBP + -0x14]
00760967 : XOR EDX,EDX
00760969 : XOR EDI,EDI
0076096b : MOV word ptr [EAX + 0xd8],CX
00760972 : CMP DX,CX
00760975 : JNC 0x007609b6
00760977 : JMP 0x00760983
00760980 : MOV EAX,dword ptr [EBP + 0xc]
00760983 : MOV ECX,dword ptr [EAX + 0xdc]
00760989 : MOV word ptr [EBX + ECX*0x1],DI
0076098d : MOV EDX,dword ptr [EAX + 0xdc]
00760993 : LEA EAX,[EBX + EDX*0x1 + 0x4]
00760997 : PUSH EAX
00760998 : MOV EAX,dword ptr [EBP + 0x8]
0076099b : MOV EDX,ESI
0076099d : MOV ESI,EDI
0076099f : CALL 0x004bd820
007609a4 : MOV ESI,dword ptr [EBP + -0x10]
007609a7 : INC EDI
007609a8 : ADD ESP,0x4
007609ab : ADD EBX,0x14
007609ae : CMP DI,word ptr [EBP + -0x14]
007609b2 : JC 0x00760980
007609b4 : XOR EBX,EBX
007609b6 : MOV ECX,ESI
007609b8 : CALL 0x006f04e0
