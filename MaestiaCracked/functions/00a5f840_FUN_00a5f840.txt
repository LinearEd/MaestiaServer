PROGRAM  : Maestia.exe
FUNCTION : FUN_00a5f840
ENTRY    : 00a5f840
BODY     : [[00a5f840, 00a5fb08]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00a5f840(uint param_1,undefined4 param_2,undefined2 param_3)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  undefined4 in_stack_0000001c;
  uint in_stack_00000020;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  int local_2c [2];
  int local_24;
  int local_20;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b3b9e6;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_18 = param_1;
  local_8 = 0;
  FUN_0070c1f0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  FUN_0070c100();
  local_24 = 0;
  local_20 = 0;
  local_1c = 0;
  local_8._0_1_ = 1;
  FUN_00413630();
  iVar4 = 0;
  do {
    iVar2 = FUN_00403c70(&DAT_00c00e6c,1);
    if (iVar2 != iVar4) {
      if (iVar2 == -1) {
        uVar3 = FUN_0040e420(&param_2,local_48);
        local_8._0_1_ = 2;
        FUN_00405ae0(uVar3);
        local_8._0_1_ = 1;
        if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_30 = 7;
        local_34 = 0;
        local_44 = 0;
        break;
      }
      uVar3 = FUN_0040e420(&param_2,local_48);
      local_8._0_1_ = 3;
      FUN_00405ae0(uVar3);
      local_8._0_1_ = 1;
      if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_30 = 7;
      local_34 = 0;
      local_44 = 0;
    }
    iVar4 = FUN_00412db0(&DAT_00c00e70,1);
  } while (iVar2 != -1);
  iVar4 = local_24;
  uVar1 = (local_20 - local_24) / 0x1c;
  if (uVar1 == 0) {
    local_8 = (uint)local_8._1_3_ << 8;
    if (local_24 != 0) {
      FUN_00405450(local_14);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_24 = 0;
    local_20 = 0;
    local_1c = 0;
    local_8 = 0xffffffff;
    if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 0;
  }
  else {
    iVar5 = *(int *)(local_18 + 4);
    iVar2 = local_24;
    if (1 < uVar1) {
      local_14 = uVar1 - 1;
      iVar2 = local_24 + 0x1c;
      local_18 = 1;
      if (1 < local_14) {
        do {
          FUN_0044f270(iVar5 + 4,local_2c,iVar2);
          if ((local_2c[0] == *(int *)(iVar5 + 0xc)) ||
             (iVar5 = *(int *)(local_2c[0] + 0x24), iVar5 == 0)) {
            local_8 = (uint)local_8._1_3_ << 8;
            if (iVar4 != 0) {
              FUN_00405450(local_14);
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            local_24 = 0;
            local_20 = 0;
            local_1c = 0;
            local_8 = 0xffffffff;
            if (in_stack_00000020 < 8) {
              ExceptionList = local_10;
              return 0;
            }
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_18 = local_18 + 1;
          iVar2 = iVar2 + 0x1c;
        } while (local_18 < local_14);
      }
    }
    FUN_0044f270(iVar5 + 0x30,&local_14,iVar2);
    if (local_14 == *(uint *)(iVar5 + 0x38)) {
      local_18 = 0;
    }
    else {
      local_18 = *(undefined4 *)(local_14 + 0x24);
    }
    if (iVar4 != local_20) {
      iVar2 = FUN_00404250(local_20);
      FUN_00405450(local_14);
      local_20 = iVar2;
    }
    local_8 = (uint)local_8._1_3_ << 8;
    if (iVar4 != 0) {
      FUN_00405450(local_14);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_24 = 0;
    local_20 = 0;
    local_1c = 0;
    local_8 = 0xffffffff;
    if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return local_18;
}



============================================================
DISASSEMBLY
============================================================
00a5f840 : PUSH EBP
00a5f841 : MOV EBP,ESP
00a5f843 : PUSH -0x1
00a5f845 : PUSH 0xb3b9e6
00a5f84a : MOV EAX,FS:[0x0]
00a5f850 : PUSH EAX
00a5f851 : SUB ESP,0x3c
00a5f854 : PUSH EBX
00a5f855 : PUSH ESI
00a5f856 : PUSH EDI
00a5f857 : MOV EAX,[0x00d66fa0]
00a5f85c : XOR EAX,EBP
00a5f85e : PUSH EAX
00a5f85f : LEA EAX,[EBP + -0xc]
00a5f862 : MOV FS:[0x0],EAX
00a5f868 : MOV EAX,dword ptr [EBP + 0x8]
00a5f86b : MOV dword ptr [EBP + -0x14],EAX
00a5f86e : XOR EBX,EBX
00a5f870 : MOV dword ptr [EBP + -0x4],EBX
00a5f873 : LEA ECX,[EBP + 0xc]
00a5f876 : CALL 0x0070c1f0
00a5f87b : LEA ECX,[EBP + 0xc]
00a5f87e : CALL 0x0070c100
00a5f883 : MOV dword ptr [EBP + -0x20],EBX
00a5f886 : MOV dword ptr [EBP + -0x1c],EBX
00a5f889 : MOV dword ptr [EBP + -0x18],EBX
00a5f88c : MOV byte ptr [EBP + -0x4],0x1
00a5f890 : LEA ECX,[EBP + -0x24]
00a5f893 : CALL 0x00413630
00a5f898 : XOR ESI,ESI
00a5f89a : LEA EBX,[EBX]
00a5f8a0 : PUSH 0x1
00a5f8a2 : PUSH 0xc00e6c
00a5f8a7 : MOV EDX,ESI
00a5f8a9 : LEA EAX,[EBP + 0xc]
00a5f8ac : CALL 0x00403c70
00a5f8b1 : MOV EDI,EAX
00a5f8b3 : CMP EDI,ESI
00a5f8b5 : JZ 0x00a5f8fe
00a5f8b7 : LEA EDX,[EBP + -0x44]
00a5f8ba : PUSH EDX
00a5f8bb : LEA EAX,[EBP + 0xc]
00a5f8be : PUSH EAX
00a5f8bf : MOV EDX,ESI
00a5f8c1 : CMP EDI,-0x1
00a5f8c4 : JZ 0x00a5f919
00a5f8c6 : MOV ECX,EDI
00a5f8c8 : SUB ECX,ESI
00a5f8ca : CALL 0x0040e420
00a5f8cf : MOV byte ptr [EBP + -0x4],0x3
00a5f8d3 : PUSH EAX
00a5f8d4 : LEA EAX,[EBP + -0x24]
00a5f8d7 : CALL 0x00405ae0
00a5f8dc : MOV byte ptr [EBP + -0x4],0x1
00a5f8e0 : CMP dword ptr [EBP + -0x2c],0x8
00a5f8e4 : JC 0x00a5f8ee
00a5f8e6 : MOV ECX,dword ptr [EBP + -0x40]
00a5f8e9 : CALL 0x006f04e0
00a5f8ee : XOR ECX,ECX
00a5f8f0 : MOV dword ptr [EBP + -0x2c],0x7
00a5f8f7 : MOV dword ptr [EBP + -0x30],EBX
00a5f8fa : MOV word ptr [EBP + -0x40],CX
00a5f8fe : PUSH 0x1
00a5f900 : LEA EDX,[EDI + 0x1]
00a5f903 : PUSH 0xc00e70
00a5f908 : LEA EAX,[EBP + 0xc]
00a5f90b : CALL 0x00412db0
00a5f910 : MOV ESI,EAX
00a5f912 : CMP EDI,-0x1
00a5f915 : JNZ 0x00a5f8a0
00a5f917 : JMP 0x00a5f950
00a5f919 : OR ECX,0xffffffff
00a5f91c : CALL 0x0040e420
00a5f921 : MOV byte ptr [EBP + -0x4],0x2
00a5f925 : PUSH EAX
00a5f926 : LEA EAX,[EBP + -0x24]
00a5f929 : CALL 0x00405ae0
00a5f92e : MOV byte ptr [EBP + -0x4],0x1
00a5f932 : CMP dword ptr [EBP + -0x2c],0x8
00a5f936 : JC 0x00a5f940
00a5f938 : MOV ECX,dword ptr [EBP + -0x40]
00a5f93b : CALL 0x006f04e0
00a5f940 : XOR ECX,ECX
00a5f942 : MOV dword ptr [EBP + -0x2c],0x7
00a5f949 : MOV dword ptr [EBP + -0x30],EBX
00a5f94c : MOV word ptr [EBP + -0x40],CX
00a5f950 : MOV EDI,dword ptr [EBP + -0x1c]
00a5f953 : MOV EBX,dword ptr [EBP + -0x20]
00a5f956 : MOV ECX,EDI
00a5f958 : SUB ECX,EBX
00a5f95a : MOV EAX,0x92492493
00a5f95f : IMUL ECX
00a5f961 : ADD EDX,ECX
00a5f963 : SAR EDX,0x4
00a5f966 : MOV EAX,EDX
00a5f968 : SHR EAX,0x1f
00a5f96b : ADD EAX,EDX
00a5f96d : JNZ 0x00a5f9b6
00a5f96f : MOV byte ptr [EBP + -0x4],AL
00a5f972 : XOR ESI,ESI
00a5f974 : CMP EBX,ESI
00a5f976 : JZ 0x00a5f98d
00a5f978 : MOV EDX,dword ptr [EBP + -0x10]
00a5f97b : PUSH EDX
00a5f97c : MOV EAX,EBX
00a5f97e : CALL 0x00405450
00a5f983 : ADD ESP,0x4
00a5f986 : MOV ECX,EBX
00a5f988 : CALL 0x006f04e0
00a5f98d : MOV dword ptr [EBP + -0x20],ESI
00a5f990 : MOV dword ptr [EBP + -0x1c],ESI
00a5f993 : MOV dword ptr [EBP + -0x18],ESI
00a5f996 : MOV dword ptr [EBP + -0x4],0xffffffff
00a5f99d : CMP dword ptr [EBP + 0x24],0x8
00a5f9a1 : JC 0x00a5f9ab
00a5f9a3 : MOV ECX,dword ptr [EBP + 0x10]
00a5f9a6 : CALL 0x006f04e0
00a5f9ab : XOR EAX,EAX
00a5f9ad : MOV word ptr [EBP + 0x10],AX
00a5f9b1 : JMP 0x00a5faeb
00a5f9b6 : MOV ECX,dword ptr [EBP + -0x14]
00a5f9b9 : MOV ESI,dword ptr [ECX + 0x4]
00a5f9bc : MOV EDI,EBX
00a5f9be : CMP EAX,0x1
00a5f9c1 : JBE 0x00a5fa04
00a5f9c3 : DEC EAX
00a5f9c4 : LEA EDI,[EBX + 0x1c]
00a5f9c7 : MOV dword ptr [EBP + -0x14],0x1
00a5f9ce : MOV dword ptr [EBP + -0x10],EAX
00a5f9d1 : CMP EAX,0x1
00a5f9d4 : JBE 0x00a5fa04
00a5f9d6 : PUSH EDI
00a5f9d7 : LEA EDX,[EBP + -0x28]
00a5f9da : PUSH EDX
00a5f9db : LEA EAX,[ESI + 0x4]
00a5f9de : PUSH EAX
00a5f9df : CALL 0x0044f270
00a5f9e4 : MOV ESI,dword ptr [ESI + 0xc]
00a5f9e7 : MOV EAX,dword ptr [EBP + -0x28]
00a5f9ea : CMP EAX,ESI
00a5f9ec : JZ 0x00a5fa23
00a5f9ee : MOV ESI,dword ptr [EAX + 0x24]
00a5f9f1 : TEST ESI,ESI
00a5f9f3 : JZ 0x00a5fa23
00a5f9f5 : MOV EAX,dword ptr [EBP + -0x14]
00a5f9f8 : INC EAX
00a5f9f9 : ADD EDI,0x1c
00a5f9fc : MOV dword ptr [EBP + -0x14],EAX
00a5f9ff : CMP EAX,dword ptr [EBP + -0x10]
00a5fa02 : JC 0x00a5f9d6
00a5fa04 : PUSH EDI
00a5fa05 : LEA EAX,[EBP + -0x10]
00a5fa08 : PUSH EAX
00a5fa09 : LEA ECX,[ESI + 0x30]
00a5fa0c : PUSH ECX
00a5fa0d : CALL 0x0044f270
00a5fa12 : MOV ESI,dword ptr [ESI + 0x38]
00a5fa15 : MOV EAX,dword ptr [EBP + -0x10]
00a5fa18 : CMP EAX,ESI
00a5fa1a : JNZ 0x00a5fa74
00a5fa1c : XOR ESI,ESI
00a5fa1e : MOV dword ptr [EBP + -0x14],ESI
00a5fa21 : JMP 0x00a5fa7c
00a5fa23 : MOV byte ptr [EBP + -0x4],0x0
00a5fa27 : TEST EBX,EBX
00a5fa29 : JZ 0x00a5fa43
00a5fa2b : MOV ECX,dword ptr [EBP + -0x10]
00a5fa2e : MOV EDI,dword ptr [EBP + -0x1c]
00a5fa31 : PUSH ECX
00a5fa32 : MOV EAX,EBX
00a5fa34 : CALL 0x00405450
00a5fa39 : ADD ESP,0x4
00a5fa3c : MOV ECX,EBX
00a5fa3e : CALL 0x006f04e0
00a5fa43 : XOR EAX,EAX
00a5fa45 : MOV dword ptr [EBP + -0x20],EAX
00a5fa48 : MOV dword ptr [EBP + -0x1c],EAX
00a5fa4b : MOV dword ptr [EBP + -0x18],EAX
00a5fa4e : MOV dword ptr [EBP + -0x4],0xffffffff
00a5fa55 : CMP dword ptr [EBP + 0x24],0x8
00a5fa59 : JC 0x00a5fa63
00a5fa5b : MOV ECX,dword ptr [EBP + 0x10]
00a5fa5e : CALL 0x006f04e0
00a5fa63 : XOR EDX,EDX
00a5fa65 : MOV dword ptr [EBP + 0x20],0x0
00a5fa6c : MOV word ptr [EBP + 0x10],DX
00a5fa70 : XOR EAX,EAX
00a5fa72 : JMP 0x00a5faee
00a5fa74 : MOV EDX,dword ptr [EAX + 0x24]
00a5fa77 : MOV dword ptr [EBP + -0x14],EDX
00a5fa7a : XOR ESI,ESI
00a5fa7c : MOV EDI,dword ptr [EBP + -0x1c]
00a5fa7f : CMP EBX,EDI
00a5fa81 : JZ 0x00a5faa7
00a5fa83 : PUSH EDI
00a5fa84 : MOV ECX,EBX
00a5fa86 : MOV EAX,EDI
00a5fa88 : CALL 0x00404250
00a5fa8d : MOV ESI,EAX
00a5fa8f : MOV EAX,dword ptr [EBP + -0x10]
00a5fa92 : ADD ESP,0x4
00a5fa95 : PUSH EAX
00a5fa96 : MOV EAX,ESI
00a5fa98 : CALL 0x00405450
00a5fa9d : ADD ESP,0x4
00a5faa0 : MOV dword ptr [EBP + -0x1c],ESI
00a5faa3 : MOV EDI,ESI
00a5faa5 : XOR ESI,ESI
00a5faa7 : MOV byte ptr [EBP + -0x4],0x0
00a5faab : CMP EBX,ESI
00a5faad : JZ 0x00a5fac4
00a5faaf : MOV ECX,dword ptr [EBP + -0x10]
00a5fab2 : PUSH ECX
00a5fab3 : MOV EAX,EBX
00a5fab5 : CALL 0x00405450
00a5faba : ADD ESP,0x4
00a5fabd : MOV ECX,EBX
00a5fabf : CALL 0x006f04e0
00a5fac4 : MOV dword ptr [EBP + -0x20],ESI
00a5fac7 : MOV dword ptr [EBP + -0x1c],ESI
00a5faca : MOV dword ptr [EBP + -0x18],ESI
00a5facd : MOV dword ptr [EBP + -0x4],0xffffffff
00a5fad4 : CMP dword ptr [EBP + 0x24],0x8
00a5fad8 : JC 0x00a5fae2
00a5fada : MOV ECX,dword ptr [EBP + 0x10]
00a5fadd : CALL 0x006f04e0
00a5fae2 : MOV EAX,dword ptr [EBP + -0x14]
00a5fae5 : XOR EDX,EDX
00a5fae7 : MOV word ptr [EBP + 0x10],DX
00a5faeb : MOV dword ptr [EBP + 0x20],ESI
00a5faee : MOV dword ptr [EBP + 0x24],0x7
00a5faf5 : MOV ECX,dword ptr [EBP + -0xc]
00a5faf8 : MOV dword ptr FS:[0x0],ECX
00a5faff : POP ECX
00a5fb00 : POP EDI
00a5fb01 : POP ESI
00a5fb02 : POP EBX
00a5fb03 : MOV ESP,EBP
00a5fb05 : POP EBP
00a5fb06 : RET 0x20
