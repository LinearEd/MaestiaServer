PROGRAM  : Maestia.exe
FUNCTION : FUN_005922c0
ENTRY    : 005922c0
BODY     : [[005922c0, 00592372]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005922c0(void)

{
  int *piVar1;
  undefined4 *puVar2;
  undefined1 *puVar3;
  int iVar4;
  undefined4 *in_ECX;
  uint uVar5;
  uint uVar6;
  undefined4 *local_4;
  
  piVar1 = in_ECX + 4;
  *piVar1 = 0;
  in_ECX[5] = 0;
  in_ECX[6] = 0;
  in_ECX[7] = 0;
  local_4 = in_ECX;
  puVar3 = (undefined1 *)FUN_00515d60(in_ECX,0x204,0);
  if ((uint)in_ECX[6] < 0xf) {
    if (*piVar1 == 0) {
      local_4 = (undefined4 *)0x2;
      iVar4 = FUN_00515d60(piVar1,0x40,&local_4);
    }
    else {
      iVar4 = FUN_00515c80(*piVar1,0x40);
    }
    *piVar1 = iVar4;
    in_ECX[6] = 0x10;
  }
  uVar5 = in_ECX[5] + 1;
  if (uVar5 < (uint)in_ECX[5]) {
    uVar6 = uVar5;
    if ((uint)in_ECX[6] >> 1 <= uVar5) goto LAB_00592343;
  }
  else {
    if (uVar5 < (uint)in_ECX[6]) goto LAB_00592343;
    uVar6 = (uVar5 >> 2) + uVar5;
  }
  FUN_005b5ef0(piVar1,uVar6);
LAB_00592343:
  in_ECX[5] = uVar5;
  puVar2 = (undefined4 *)(*piVar1 + -4 + uVar5 * 4);
  if (puVar2 != (undefined4 *)0x0) {
    *puVar2 = puVar3;
  }
  in_ECX[1] = puVar3;
  in_ECX[2] = puVar3 + 0x200;
  *in_ECX = puVar3;
  in_ECX[3] = puVar3;
  if (puVar3 != (undefined1 *)0x0) {
    *puVar3 = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005922c0 : PUSH ECX
005922c1 : PUSH EBX
005922c2 : PUSH EBP
005922c3 : PUSH ESI
005922c4 : PUSH EDI
005922c5 : XOR EDI,EDI
005922c7 : MOV EBP,ECX
005922c9 : PUSH EDI
005922ca : LEA ESI,[EBP + 0x10]
005922cd : MOV dword ptr [ESI],EDI
005922cf : MOV dword ptr [ESI + 0x4],EDI
005922d2 : PUSH 0x204
005922d7 : MOV dword ptr [ESI + 0x8],EDI
005922da : PUSH EBP
005922db : MOV dword ptr [EBP + 0x1c],EDI
005922de : CALL 0x00515d60
005922e3 : CMP dword ptr [ESI + 0x8],0xf
005922e7 : MOV EBX,EAX
005922e9 : JNC 0x00592319
005922eb : MOV EAX,dword ptr [ESI]
005922ed : CMP EAX,EDI
005922ef : JZ 0x005922fb
005922f1 : PUSH 0x40
005922f3 : PUSH EAX
005922f4 : CALL 0x00515c80
005922f9 : JMP 0x00592310
005922fb : LEA EAX,[ESP + 0x10]
005922ff : PUSH EAX
00592300 : PUSH 0x40
00592302 : PUSH ESI
00592303 : MOV dword ptr [ESP + 0x1c],0x2
0059230b : CALL 0x00515d60
00592310 : MOV dword ptr [ESI],EAX
00592312 : MOV dword ptr [ESI + 0x8],0x10
00592319 : MOV EDI,dword ptr [ESI + 0x4]
0059231c : INC EDI
0059231d : CMP EDI,dword ptr [ESI + 0x4]
00592320 : JNC 0x0059232e
00592322 : MOV ECX,dword ptr [ESI + 0x8]
00592325 : SHR ECX,0x1
00592327 : CMP EDI,ECX
00592329 : JNC 0x00592343
0059232b : PUSH EDI
0059232c : JMP 0x0059233b
0059232e : CMP EDI,dword ptr [ESI + 0x8]
00592331 : JC 0x00592343
00592333 : MOV EDX,EDI
00592335 : SHR EDX,0x2
00592338 : ADD EDX,EDI
0059233a : PUSH EDX
0059233b : PUSH ESI
0059233c : MOV ECX,ESI
0059233e : CALL 0x005b5ef0
00592343 : MOV EAX,dword ptr [ESI]
00592345 : MOV dword ptr [ESI + 0x4],EDI
00592348 : LEA EDI,[EAX + EDI*0x4 + -0x4]
0059234c : TEST EDI,EDI
0059234e : JZ 0x00592352
00592350 : MOV dword ptr [EDI],EBX
00592352 : LEA ECX,[EBX + 0x200]
00592358 : MOV dword ptr [EBP + 0x4],EBX
0059235b : MOV dword ptr [EBP + 0x8],ECX
0059235e : MOV dword ptr [EBP],EBX
00592361 : MOV dword ptr [EBP + 0xc],EBX
00592364 : MOV EAX,EBP
00592366 : TEST EBX,EBX
00592368 : JZ 0x0059236d
0059236a : MOV byte ptr [EBX],0x0
0059236d : POP EDI
0059236e : POP ESI
0059236f : POP EBP
00592370 : POP EBX
00592371 : POP ECX
00592372 : RET
