PROGRAM  : Maestia.exe
FUNCTION : FUN_00801370
ENTRY    : 00801370
BODY     : [[00801370, 0080149f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00801370(void)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b376ef;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  FUN_00406360(L"AvaDefRenderWindow",0x12);
  local_8 = 0;
  uVar2 = FUN_007fea30(*(undefined4 *)(in_ECX + 0xc),local_2c,*(undefined4 *)(in_ECX + 0x14),
                       *(undefined4 *)(in_ECX + 0x18),*(undefined4 *)(in_ECX + 0x1c),
                       *(undefined4 *)(in_ECX + 0x20),*(undefined1 *)(in_ECX + 0x24),
                       *(undefined1 *)(in_ECX + 0x25),*(undefined1 *)(in_ECX + 0x2c),
                       *(undefined1 *)(in_ECX + 0x2d));
  *(undefined4 *)(in_ECX + 0x10) = uVar2;
  local_8 = 0xffffffff;
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_14 = 7;
  local_18 = 0;
  local_28 = 0;
  if (*(int *)(in_ECX + 0x10) == 0) {
    FUN_008018d0(L"[AvaApp::Initialize] Render Window Create Error",uVar1);
    MessageBoxW((HWND)0x0,
                L"Failed to execute Maestia.\nPlease install the Graphic card or Graphic card driver."
                ,L"Maestia",0x10);
                    /* WARNING: Subroutine does not return */
    ExitProcess(0);
  }
  if (*(char *)(*(int *)(in_ECX + 0xc) + 0x154) == '\0') {
    FUN_008018d0(L"[AvaApp::Initialize] Shader version 2.0, an error less than",uVar1);
    MessageBoxW((HWND)0x0,
                L"Failed to execute Maestia.\nMaestia require at least shader version 2 or later.",
                L"Maestia",0x10);
                    /* WARNING: Subroutine does not return */
    ExitProcess(0);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00801370 : PUSH EBP
00801371 : MOV EBP,ESP
00801373 : PUSH -0x1
00801375 : PUSH 0xb376ef
0080137a : MOV EAX,FS:[0x0]
00801380 : PUSH EAX
00801381 : SUB ESP,0x1c
00801384 : PUSH ESI
00801385 : MOV EAX,[0x00d66fa0]
0080138a : XOR EAX,EBP
0080138c : PUSH EAX
0080138d : LEA EAX,[EBP + -0xc]
00801390 : MOV FS:[0x0],EAX
00801396 : MOV ESI,ECX
00801398 : PUSH 0x12
0080139a : XOR EAX,EAX
0080139c : PUSH 0xc287c0
008013a1 : LEA ECX,[EBP + -0x28]
008013a4 : MOV dword ptr [EBP + -0x10],0x7
008013ab : MOV dword ptr [EBP + -0x14],0x0
008013b2 : MOV word ptr [EBP + -0x24],AX
008013b6 : CALL 0x00406360
008013bb : MOV dword ptr [EBP + -0x4],0x0
008013c2 : MOVZX ECX,byte ptr [ESI + 0x2d]
008013c6 : MOVZX EDX,byte ptr [ESI + 0x2c]
008013ca : MOVZX EAX,byte ptr [ESI + 0x25]
008013ce : PUSH ECX
008013cf : MOVZX ECX,byte ptr [ESI + 0x24]
008013d3 : PUSH EDX
008013d4 : MOV EDX,dword ptr [ESI + 0x20]
008013d7 : PUSH EAX
008013d8 : MOV EAX,dword ptr [ESI + 0x1c]
008013db : PUSH ECX
008013dc : MOV ECX,dword ptr [ESI + 0x18]
008013df : PUSH EDX
008013e0 : MOV EDX,dword ptr [ESI + 0x14]
008013e3 : PUSH EAX
008013e4 : PUSH ECX
008013e5 : MOV ECX,dword ptr [ESI + 0xc]
008013e8 : PUSH EDX
008013e9 : LEA EAX,[EBP + -0x28]
008013ec : PUSH EAX
008013ed : PUSH ECX
008013ee : MOV ECX,dword ptr [ESI + 0x4]
008013f1 : CALL 0x007fea30
008013f6 : MOV dword ptr [ESI + 0x10],EAX
008013f9 : MOV dword ptr [EBP + -0x4],0xffffffff
00801400 : CMP dword ptr [EBP + -0x10],0x8
00801404 : JC 0x0080140e
00801406 : MOV ECX,dword ptr [EBP + -0x24]
00801409 : CALL 0x006f04e0
0080140e : XOR EDX,EDX
00801410 : MOV dword ptr [EBP + -0x10],0x7
00801417 : MOV dword ptr [EBP + -0x14],0x0
0080141e : MOV word ptr [EBP + -0x24],DX
00801422 : CMP dword ptr [ESI + 0x10],EDX
00801425 : JNZ 0x00801456
00801427 : MOV ESI,dword ptr [0x00da98e8]
0080142d : PUSH 0xc287e8
00801432 : CALL 0x008018d0
00801437 : ADD ESP,0x4
0080143a : PUSH 0x10
0080143c : PUSH 0xc28848
00801441 : PUSH 0xc28858
00801446 : PUSH 0x0
00801448 : CALL dword ptr [0x00b85514]
0080144e : PUSH 0x0
00801450 : CALL dword ptr [0x00b851f4]
00801456 : MOV EAX,dword ptr [ESI + 0xc]
00801459 : CMP byte ptr [EAX + 0x154],DL
0080145f : JNZ 0x00801490
00801461 : MOV ESI,dword ptr [0x00da98e8]
00801467 : PUSH 0xc28900
0080146c : CALL 0x008018d0
00801471 : ADD ESP,0x4
00801474 : PUSH 0x10
00801476 : PUSH 0xc28978
0080147b : PUSH 0xc28988
00801480 : PUSH 0x0
00801482 : CALL dword ptr [0x00b85514]
00801488 : PUSH 0x0
0080148a : CALL dword ptr [0x00b851f4]
00801490 : MOV ECX,dword ptr [EBP + -0xc]
00801493 : MOV dword ptr FS:[0x0],ECX
0080149a : POP ECX
0080149b : POP ESI
0080149c : MOV ESP,EBP
0080149e : POP EBP
0080149f : RET
