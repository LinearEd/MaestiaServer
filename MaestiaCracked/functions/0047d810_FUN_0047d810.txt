PROGRAM  : Maestia.exe
FUNCTION : FUN_0047d810
ENTRY    : 0047d810
BODY     : [[0047d810, 0047d9a8] [0047d9b5, 0047d9d8] [0047da32, 0047dac9] [0047daef, 0047db8f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0047d810(int param_1,int param_2,undefined4 param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uStack_468;
  uint local_448;
  undefined1 local_444 [1068];
  uint local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7f71a;
  local_10 = ExceptionList;
  uStack_468 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_468;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_448 = 0;
  }
  else {
    local_448 = (*(int *)(param_1 + 0xc) - iVar2) / 0x424;
  }
  iVar5 = *(int *)(param_1 + 8);
  iVar2 = (iVar5 - iVar2) / 0x424;
  local_18 = uStack_468;
  puVar1 = &uStack_468;
  if (iVar2 == 0x3dd38f) {
    iVar2 = FUN_00429be0();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_448 < uVar3) {
    if (0x3dd38f - (local_448 >> 1) < local_448) {
      local_448 = 0;
    }
    else {
      local_448 = local_448 + (local_448 >> 1);
    }
    if (local_448 < uVar3) {
      local_448 = uVar3;
    }
    iVar2 = FUN_0047e210();
    local_8 = 0;
    FUN_0047d730();
    FUN_0047e1b0(*(undefined4 *)(param_1 + 4),param_2);
    FUN_0047e1b0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_0047d7f0();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_448 * 0x424 + iVar2;
    *(int *)(param_1 + 8) =
         ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x424 + 1) * 0x424 + iVar2;
    *(int *)(param_1 + 4) = iVar2;
  }
  else {
    iVar5 = iVar5 - param_2;
    iVar2 = iVar5 >> 0x1f;
    if (iVar5 / 0x424 + iVar2 == iVar2) {
      FUN_0047df20(local_444,param_3);
      local_8 = 2;
      FUN_0047e1b0(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_0047d730();
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x424;
    }
    else {
      FUN_0047df20(local_444,param_3);
      local_8 = 5;
      iVar2 = *(int *)(param_1 + 8) + -0x424;
      uVar4 = FUN_0047e1b0(iVar2,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar4;
      while (param_2 != iVar2) {
        iVar2 = iVar2 + -0x424;
        FUN_0047e550(iVar2);
      }
    }
    FUN_0047e1e0(local_444);
    local_8 = 0xffffffff;
    FUN_0047d3f0(local_444);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0047d810 : PUSH EBP
0047d811 : MOV EBP,ESP
0047d813 : PUSH -0x1
0047d815 : PUSH 0xb7f71a
0047d81a : MOV EAX,FS:[0x0]
0047d820 : PUSH EAX
0047d821 : SUB ESP,0x448
0047d827 : MOV EAX,[0x00d66fa0]
0047d82c : XOR EAX,EBP
0047d82e : MOV dword ptr [EBP + -0x14],EAX
0047d831 : PUSH EBX
0047d832 : PUSH ESI
0047d833 : PUSH EDI
0047d834 : PUSH EAX
0047d835 : LEA EAX,[EBP + -0xc]
0047d838 : MOV FS:[0x0],EAX
0047d83e : MOV dword ptr [EBP + -0x10],ESP
0047d841 : MOV EBX,dword ptr [EBP + 0x8]
0047d844 : MOV dword ptr [EBP + 0xfffffbb4],EBX
0047d84a : MOV EAX,dword ptr [EBP + 0x10]
0047d84d : MOV dword ptr [EBP + 0xfffffbb8],EAX
0047d853 : MOV ECX,dword ptr [EBX + 0x4]
0047d856 : TEST ECX,ECX
0047d858 : JNZ 0x0047d85e
0047d85a : XOR ESI,ESI
0047d85c : JMP 0x0047d876
0047d85e : MOV EDX,dword ptr [EBX + 0xc]
0047d861 : SUB EDX,ECX
0047d863 : MOV EAX,0x3dd38ff1
0047d868 : IMUL EDX
0047d86a : SAR EDX,0x8
0047d86d : MOV EAX,EDX
0047d86f : SHR EAX,0x1f
0047d872 : ADD EAX,EDX
0047d874 : MOV ESI,EAX
0047d876 : MOV EDI,dword ptr [EBX + 0x8]
0047d879 : MOV EDX,EDI
0047d87b : SUB EDX,ECX
0047d87d : MOV EAX,0x3dd38ff1
0047d882 : IMUL EDX
0047d884 : SAR EDX,0x8
0047d887 : MOV EAX,EDX
0047d889 : SHR EAX,0x1f
0047d88c : ADD EAX,EDX
0047d88e : MOV ECX,0x3dd38f
0047d893 : SUB ECX,EAX
0047d895 : CMP ECX,0x1
0047d898 : JNC 0x0047d89f
0047d89a : CALL 0x00429be0
0047d89f : INC EAX
0047d8a0 : CMP ESI,EAX
0047d8a2 : JNC 0x0047da32
0047d8a8 : MOV ECX,ESI
0047d8aa : SHR ECX,0x1
0047d8ac : MOV EDX,0x3dd38f
0047d8b1 : SUB EDX,ECX
0047d8b3 : CMP EDX,ESI
0047d8b5 : JNC 0x0047d8c9
0047d8b7 : MOV dword ptr [EBP + 0xfffffbbc],0x0
0047d8c1 : MOV ESI,dword ptr [EBP + 0xfffffbbc]
0047d8c7 : JMP 0x0047d8d1
0047d8c9 : ADD ESI,ECX
0047d8cb : MOV dword ptr [EBP + 0xfffffbbc],ESI
0047d8d1 : CMP ESI,EAX
0047d8d3 : JNC 0x0047d8dd
0047d8d5 : MOV dword ptr [EBP + 0xfffffbbc],EAX
0047d8db : MOV ESI,EAX
0047d8dd : MOV ECX,ESI
0047d8df : CALL 0x0047e210
0047d8e4 : MOV ESI,EAX
0047d8e6 : MOV dword ptr [EBP + 0xfffffbac],ESI
0047d8ec : MOV ECX,dword ptr [EBP + 0xc]
0047d8ef : SUB ECX,dword ptr [EBX + 0x4]
0047d8f2 : MOV EAX,0x3dd38ff1
0047d8f7 : IMUL ECX
0047d8f9 : SAR EDX,0x8
0047d8fc : MOV EDI,EDX
0047d8fe : SHR EDI,0x1f
0047d901 : ADD EDI,EDX
0047d903 : MOV dword ptr [EBP + 0xfffffbb4],EDI
0047d909 : XOR EAX,EAX
0047d90b : MOV dword ptr [EBP + 0xfffffbb0],EAX
0047d911 : MOV dword ptr [EBP + -0x4],EAX
0047d914 : IMUL EDI,EDI,0x424
0047d91a : ADD EDI,ESI
0047d91c : MOV EDX,dword ptr [EBP + 0xfffffbb8]
0047d922 : LEA ESI,[EAX + 0x1]
0047d925 : CALL 0x0047d730
0047d92a : MOV dword ptr [EBP + 0xfffffbb0],ESI
0047d930 : MOV EAX,dword ptr [EBP + 0xc]
0047d933 : PUSH EAX
0047d934 : MOV ECX,dword ptr [EBX + 0x4]
0047d937 : PUSH ECX
0047d938 : MOV EDI,dword ptr [EBP + 0xfffffbac]
0047d93e : MOV EDX,EDI
0047d940 : CALL 0x0047e1b0
0047d945 : MOV dword ptr [EBP + 0xfffffbb0],0x2
0047d94f : MOV EDX,dword ptr [EBP + 0xfffffbb4]
0047d955 : INC EDX
0047d956 : IMUL EDX,EDX,0x424
0047d95c : ADD EDX,EDI
0047d95e : MOV EAX,dword ptr [EBX + 0x8]
0047d961 : PUSH EAX
0047d962 : MOV ECX,dword ptr [EBP + 0xc]
0047d965 : PUSH ECX
0047d966 : CALL 0x0047e1b0
0047d96b : MOV dword ptr [EBP + -0x4],0xffffffff
0047d972 : MOV ECX,dword ptr [EBX + 0x8]
0047d975 : MOV ESI,dword ptr [EBX + 0x4]
0047d978 : SUB ECX,ESI
0047d97a : MOV EAX,0x3dd38ff1
0047d97f : IMUL ECX
0047d981 : SAR EDX,0x8
0047d984 : MOV EAX,EDX
0047d986 : SHR EAX,0x1f
0047d989 : LEA EDX,[EDX + EAX*0x1 + 0x1]
0047d98d : MOV dword ptr [EBP + 0xfffffbb8],EDX
0047d993 : TEST ESI,ESI
0047d995 : JZ 0x0047d9b5
0047d997 : MOV EDI,dword ptr [EBX + 0x8]
0047d99a : MOV EAX,ESI
0047d99c : CALL 0x0047d7f0
0047d9a1 : MOV ECX,dword ptr [EBX + 0x4]
0047d9a4 : CALL 0x006f04e0
0047d9b5 : MOV EAX,dword ptr [EBP + 0xfffffbbc]
0047d9bb : IMUL EAX,EAX,0x424
0047d9c1 : ADD EAX,EDI
0047d9c3 : MOV dword ptr [EBX + 0xc],EAX
0047d9c6 : IMUL EDX,EDX,0x424
0047d9cc : ADD EDX,EDI
0047d9ce : MOV dword ptr [EBX + 0x8],EDX
0047d9d1 : MOV dword ptr [EBX + 0x4],EDI
0047d9d4 : JMP 0x0047db72
0047da32 : SUB EDI,dword ptr [EBP + 0xc]
0047da35 : MOV EAX,0x3dd38ff1
0047da3a : IMUL EDI
0047da3c : SAR EDX,0x8
0047da3f : MOV ECX,EDX
0047da41 : SHR ECX,0x1f
0047da44 : ADD ECX,EDX
0047da46 : CMP ECX,0x1
0047da49 : JNC 0x0047daef
0047da4f : MOV EDX,dword ptr [EBP + 0xfffffbb8]
0047da55 : PUSH EDX
0047da56 : LEA EAX,[EBP + 0xfffffbc0]
0047da5c : PUSH EAX
0047da5d : CALL 0x0047df20
0047da62 : MOV dword ptr [EBP + -0x4],0x2
0047da69 : MOV EAX,dword ptr [EBP + 0xc]
0047da6c : LEA EDX,[EAX + 0x424]
0047da72 : MOV ECX,dword ptr [EBX + 0x8]
0047da75 : PUSH ECX
0047da76 : PUSH EAX
0047da77 : CALL 0x0047e1b0
0047da7c : MOV byte ptr [EBP + -0x4],0x3
0047da80 : MOV EDI,dword ptr [EBX + 0x8]
0047da83 : MOV ECX,EDI
0047da85 : SUB ECX,dword ptr [EBP + 0xc]
0047da88 : MOV EAX,0x3dd38ff1
0047da8d : IMUL ECX
0047da8f : SAR EDX,0x8
0047da92 : MOV EAX,EDX
0047da94 : SHR EAX,0x1f
0047da97 : ADD EAX,EDX
0047da99 : MOV ESI,0x1
0047da9e : SUB ESI,EAX
0047daa0 : LEA EDX,[EBP + 0xfffffbc0]
0047daa6 : CALL 0x0047d730
0047daab : MOV dword ptr [EBP + -0x4],0x2
0047dab2 : ADD dword ptr [EBX + 0x8],0x424
0047dab9 : MOV EBX,dword ptr [EBX + 0x8]
0047dabc : LEA ESI,[EBX + 0xfffffbdc]
0047dac2 : MOV EAX,dword ptr [EBP + 0xc]
0047dac5 : JMP 0x0047db50
0047daef : MOV ECX,dword ptr [EBP + 0xfffffbb8]
0047daf5 : PUSH ECX
0047daf6 : LEA EDX,[EBP + 0xfffffbc0]
0047dafc : PUSH EDX
0047dafd : CALL 0x0047df20
0047db02 : MOV dword ptr [EBP + -0x4],0x5
0047db09 : MOV EDI,dword ptr [EBX + 0x8]
0047db0c : LEA ESI,[EDI + 0xfffffbdc]
0047db12 : PUSH EDI
0047db13 : PUSH ESI
0047db14 : MOV EDX,EDI
0047db16 : CALL 0x0047e1b0
0047db1b : MOV dword ptr [EBX + 0x8],EAX
0047db1e : MOV EAX,dword ptr [EBP + 0xc]
0047db21 : MOV dword ptr [EBP + 0xfffffbb8],EAX
0047db27 : CMP EAX,ESI
0047db29 : JZ 0x0047db4a
0047db2b : MOV EBX,EDI
0047db2d : SUB EBX,ESI
0047db2f : NOP
0047db30 : SUB ESI,0x424
0047db36 : PUSH ESI
0047db37 : LEA EDI,[EBX + ESI*0x1]
0047db3a : CALL 0x0047e550
0047db3f : CMP ESI,dword ptr [EBP + 0xfffffbb8]
0047db45 : JNZ 0x0047db30
0047db47 : MOV EAX,dword ptr [EBP + 0xc]
0047db4a : LEA ESI,[EAX + 0x424]
0047db50 : LEA ECX,[EBP + 0xfffffbc0]
0047db56 : PUSH ECX
0047db57 : CALL 0x0047e1e0
0047db5c : ADD ESP,0x4
0047db5f : MOV dword ptr [EBP + -0x4],0xffffffff
0047db66 : LEA EDX,[EBP + 0xfffffbc0]
0047db6c : PUSH EDX
0047db6d : CALL 0x0047d3f0
0047db72 : MOV ECX,dword ptr [EBP + -0xc]
0047db75 : MOV dword ptr FS:[0x0],ECX
0047db7c : POP ECX
0047db7d : POP EDI
0047db7e : POP ESI
0047db7f : POP EBX
0047db80 : MOV ECX,dword ptr [EBP + -0x14]
0047db83 : XOR ECX,EBP
0047db85 : CALL 0x00633e6b
0047db8a : MOV ESP,EBP
0047db8c : POP EBP
0047db8d : RET 0xc
