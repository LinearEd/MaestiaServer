PROGRAM  : Maestia.exe
FUNCTION : FUN_004d2510
ENTRY    : 004d2510
BODY     : [[004d2510, 004d2679] [004d267d, 004d26a8] [004d26ee, 004d2786] [004d27ae, 004d282f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004d2510(int param_1,int param_2,uint param_3,undefined4 param_4)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int extraout_ECX;
  int iVar5;
  uint uStack_5c;
  undefined1 local_48 [40];
  int local_20;
  undefined4 local_1c;
  uint local_18;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7f4c4;
  local_10 = ExceptionList;
  uStack_5c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_5c;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_18 = 0;
  }
  else {
    local_18 = (*(int *)(param_1 + 0xc) - iVar2) / 0x28;
  }
  if (param_3 != 0) {
    iVar5 = *(int *)(param_1 + 8);
    iVar2 = (iVar5 - iVar2) / 0x28;
    puVar1 = &uStack_5c;
    if (0x6666666U - iVar2 < param_3) {
      iVar2 = FUN_00452880();
      iVar5 = extraout_ECX;
      puVar1 = (uint *)local_14;
    }
    local_14 = (undefined1 *)puVar1;
    uVar3 = iVar2 + param_3;
    if (local_18 < uVar3) {
      if (0x6666666 - (local_18 >> 1) < local_18) {
        local_18 = 0;
      }
      else {
        local_18 = local_18 + (local_18 >> 1);
      }
      if (local_18 < uVar3) {
        local_18 = uVar3;
      }
      iVar2 = FUN_00444990();
      local_20 = (param_2 - *(int *)(param_1 + 4)) / 0x28;
      local_1c = 0;
      local_8 = 0;
      FUN_004d1910(param_4);
      local_1c = 1;
      FUN_004d4190(*(undefined4 *)(param_1 + 4),param_2);
      local_1c = 2;
      FUN_004d4190(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = 0xffffffff;
      if (*(int *)(param_1 + 4) != 0) {
        FUN_004d18f0();
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      *(uint *)(param_1 + 0xc) = iVar2 + local_18 * 0x28;
      *(uint *)(param_1 + 8) =
           iVar2 + (param_3 + (*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x28) * 0x28;
      *(int *)(param_1 + 4) = iVar2;
      ExceptionList = local_10;
      return;
    }
    if ((uint)((iVar5 - param_2) / 0x28) < param_3) {
      FUN_00707920(local_48);
      local_8 = 2;
      FUN_004d4190(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_004d1910(local_48);
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + param_3 * 0x28;
      FUN_004d4a50(*(int *)(param_1 + 8) + param_3 * -0x28);
    }
    else {
      FUN_00707920(local_48);
      local_8 = 5;
      iVar2 = param_3 * 0x28;
      uVar4 = FUN_004d4190(*(int *)(param_1 + 8) + param_3 * -0x28,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar4;
      param_3 = param_3 & 0xffffff00;
      FUN_004d4cd0(param_2,param_2,param_2,param_3);
      FUN_004d4a50(iVar2 + param_2);
    }
    local_8 = 0xffffffff;
    FUN_00705ce0(local_48);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
004d2510 : PUSH EBP
004d2511 : MOV EBP,ESP
004d2513 : PUSH -0x1
004d2515 : PUSH 0xb7f4c4
004d251a : MOV EAX,FS:[0x0]
004d2520 : PUSH EAX
004d2521 : SUB ESP,0x3c
004d2524 : PUSH EBX
004d2525 : PUSH ESI
004d2526 : PUSH EDI
004d2527 : MOV EAX,[0x00d66fa0]
004d252c : XOR EAX,EBP
004d252e : PUSH EAX
004d252f : LEA EAX,[EBP + -0xc]
004d2532 : MOV FS:[0x0],EAX
004d2538 : MOV dword ptr [EBP + -0x10],ESP
004d253b : MOV ESI,dword ptr [EBP + 0x10]
004d253e : MOV EBX,dword ptr [EBP + 0x8]
004d2541 : MOV EDI,dword ptr [EBX + 0x4]
004d2544 : TEST EDI,EDI
004d2546 : JNZ 0x004d254d
004d2548 : MOV dword ptr [EBP + -0x14],EDI
004d254b : JMP 0x004d2566
004d254d : MOV ECX,dword ptr [EBX + 0xc]
004d2550 : SUB ECX,EDI
004d2552 : MOV EAX,0x66666667
004d2557 : IMUL ECX
004d2559 : SAR EDX,0x4
004d255c : MOV EAX,EDX
004d255e : SHR EAX,0x1f
004d2561 : ADD EAX,EDX
004d2563 : MOV dword ptr [EBP + -0x14],EAX
004d2566 : TEST ESI,ESI
004d2568 : JZ 0x004d281c
004d256e : MOV ECX,dword ptr [EBX + 0x8]
004d2571 : MOV EDX,ECX
004d2573 : SUB EDX,EDI
004d2575 : MOV EAX,0x66666667
004d257a : IMUL EDX
004d257c : SAR EDX,0x4
004d257f : MOV EAX,EDX
004d2581 : SHR EAX,0x1f
004d2584 : ADD EAX,EDX
004d2586 : MOV EDX,0x6666666
004d258b : SUB EDX,EAX
004d258d : CMP EDX,ESI
004d258f : JNC 0x004d2596
004d2591 : CALL 0x00452880
004d2596 : ADD EAX,ESI
004d2598 : MOV EDX,dword ptr [EBP + -0x14]
004d259b : CMP EDX,EAX
004d259d : JNC 0x004d26ee
004d25a3 : MOV ECX,EDX
004d25a5 : SHR ECX,0x1
004d25a7 : MOV EDI,0x6666666
004d25ac : SUB EDI,ECX
004d25ae : CMP EDI,EDX
004d25b0 : JNC 0x004d25be
004d25b2 : MOV dword ptr [EBP + -0x14],0x0
004d25b9 : MOV EDX,dword ptr [EBP + -0x14]
004d25bc : JMP 0x004d25c3
004d25be : ADD EDX,ECX
004d25c0 : MOV dword ptr [EBP + -0x14],EDX
004d25c3 : CMP EDX,EAX
004d25c5 : JNC 0x004d25cc
004d25c7 : MOV dword ptr [EBP + -0x14],EAX
004d25ca : MOV EDX,EAX
004d25cc : MOV ECX,EDX
004d25ce : CALL 0x00444990
004d25d3 : MOV EDI,EAX
004d25d5 : MOV dword ptr [EBP + 0x8],EDI
004d25d8 : MOV ECX,dword ptr [EBP + 0xc]
004d25db : SUB ECX,dword ptr [EBX + 0x4]
004d25de : MOV EAX,0x66666667
004d25e3 : IMUL ECX
004d25e5 : SAR EDX,0x4
004d25e8 : MOV EAX,EDX
004d25ea : SHR EAX,0x1f
004d25ed : ADD EAX,EDX
004d25ef : MOV dword ptr [EBP + -0x1c],EAX
004d25f2 : XOR ECX,ECX
004d25f4 : MOV dword ptr [EBP + -0x18],ECX
004d25f7 : MOV dword ptr [EBP + -0x4],ECX
004d25fa : MOV ECX,dword ptr [EBP + 0x14]
004d25fd : PUSH ECX
004d25fe : LEA EDX,[EAX + EAX*0x4]
004d2601 : LEA EDI,[EDI + EDX*0x8]
004d2604 : CALL 0x004d1910
004d2609 : MOV dword ptr [EBP + -0x18],0x1
004d2610 : MOV EAX,dword ptr [EBP + 0xc]
004d2613 : PUSH EAX
004d2614 : MOV ECX,dword ptr [EBX + 0x4]
004d2617 : PUSH ECX
004d2618 : MOV EDI,dword ptr [EBP + 0x8]
004d261b : MOV EDX,EDI
004d261d : CALL 0x004d4190
004d2622 : MOV dword ptr [EBP + -0x18],0x2
004d2629 : MOV EDX,dword ptr [EBP + -0x1c]
004d262c : LEA EAX,[EDX + ESI*0x1]
004d262f : LEA EAX,[EAX + EAX*0x4]
004d2632 : LEA EDX,[EDI + EAX*0x8]
004d2635 : MOV ECX,dword ptr [EBX + 0x8]
004d2638 : PUSH ECX
004d2639 : MOV EAX,dword ptr [EBP + 0xc]
004d263c : PUSH EAX
004d263d : CALL 0x004d4190
004d2642 : MOV dword ptr [EBP + -0x4],0xffffffff
004d2649 : MOV ECX,dword ptr [EBX + 0x4]
004d264c : MOV EDX,dword ptr [EBX + 0x8]
004d264f : SUB EDX,ECX
004d2651 : MOV EAX,0x66666667
004d2656 : IMUL EDX
004d2658 : SAR EDX,0x4
004d265b : MOV EAX,EDX
004d265d : SHR EAX,0x1f
004d2660 : ADD EAX,EDX
004d2662 : ADD ESI,EAX
004d2664 : TEST ECX,ECX
004d2666 : JZ 0x004d267d
004d2668 : MOV EDI,dword ptr [EBX + 0x8]
004d266b : MOV EAX,ECX
004d266d : CALL 0x004d18f0
004d2672 : MOV ECX,dword ptr [EBX + 0x4]
004d2675 : CALL 0x006f04e0
004d267d : MOV EAX,dword ptr [EBP + -0x14]
004d2680 : LEA ECX,[EAX + EAX*0x4]
004d2683 : LEA EDX,[EDI + ECX*0x8]
004d2686 : MOV dword ptr [EBX + 0xc],EDX
004d2689 : LEA EAX,[ESI + ESI*0x4]
004d268c : LEA ECX,[EDI + EAX*0x8]
004d268f : MOV dword ptr [EBX + 0x8],ECX
004d2692 : MOV dword ptr [EBX + 0x4],EDI
004d2695 : MOV ECX,dword ptr [EBP + -0xc]
004d2698 : MOV dword ptr FS:[0x0],ECX
004d269f : POP ECX
004d26a0 : POP EDI
004d26a1 : POP ESI
004d26a2 : POP EBX
004d26a3 : MOV ESP,EBP
004d26a5 : POP EBP
004d26a6 : RET 0x10
004d26ee : SUB ECX,dword ptr [EBP + 0xc]
004d26f1 : MOV EAX,0x66666667
004d26f6 : IMUL ECX
004d26f8 : SAR EDX,0x4
004d26fb : MOV EAX,EDX
004d26fd : SHR EAX,0x1f
004d2700 : ADD EAX,EDX
004d2702 : MOV EDI,dword ptr [EBP + 0x14]
004d2705 : CMP EAX,ESI
004d2707 : JNC 0x004d27ae
004d270d : LEA ECX,[EBP + -0x44]
004d2710 : PUSH ECX
004d2711 : CALL 0x00707920
004d2716 : MOV dword ptr [EBP + -0x4],0x2
004d271d : LEA EAX,[ESI + ESI*0x4]
004d2720 : ADD EAX,EAX
004d2722 : ADD EAX,EAX
004d2724 : ADD EAX,EAX
004d2726 : MOV dword ptr [EBP + 0x14],EAX
004d2729 : MOV ECX,dword ptr [EBP + 0xc]
004d272c : LEA EDX,[EAX + ECX*0x1]
004d272f : MOV EAX,dword ptr [EBX + 0x8]
004d2732 : PUSH EAX
004d2733 : PUSH ECX
004d2734 : CALL 0x004d4190
004d2739 : MOV byte ptr [EBP + -0x4],0x3
004d273d : MOV EDI,dword ptr [EBX + 0x8]
004d2740 : LEA ECX,[EBP + -0x44]
004d2743 : PUSH ECX
004d2744 : MOV ECX,EDI
004d2746 : SUB ECX,dword ptr [EBP + 0xc]
004d2749 : MOV EAX,0x66666667
004d274e : IMUL ECX
004d2750 : SAR EDX,0x4
004d2753 : MOV EAX,EDX
004d2755 : SHR EAX,0x1f
004d2758 : ADD EAX,EDX
004d275a : SUB ESI,EAX
004d275c : CALL 0x004d1910
004d2761 : MOV dword ptr [EBP + -0x4],0x2
004d2768 : MOV EAX,dword ptr [EBP + 0x14]
004d276b : ADD dword ptr [EBX + 0x8],EAX
004d276e : MOV EBX,dword ptr [EBX + 0x8]
004d2771 : SUB EBX,EAX
004d2773 : PUSH EBX
004d2774 : LEA EDI,[EBP + -0x44]
004d2777 : MOV EAX,dword ptr [EBP + 0xc]
004d277a : CALL 0x004d4a50
004d277f : ADD ESP,0x4
004d2782 : JMP 0x004d280c
004d27ae : LEA EDX,[EBP + -0x44]
004d27b1 : PUSH EDX
004d27b2 : CALL 0x00707920
004d27b7 : MOV dword ptr [EBP + -0x4],0x5
004d27be : MOV EDI,dword ptr [EBX + 0x8]
004d27c1 : LEA ESI,[ESI + ESI*0x4]
004d27c4 : ADD ESI,ESI
004d27c6 : ADD ESI,ESI
004d27c8 : ADD ESI,ESI
004d27ca : MOV EAX,EDI
004d27cc : SUB EAX,ESI
004d27ce : MOV dword ptr [EBP + 0x14],EAX
004d27d1 : PUSH EDI
004d27d2 : PUSH EAX
004d27d3 : MOV EDX,EDI
004d27d5 : CALL 0x004d4190
004d27da : MOV dword ptr [EBX + 0x8],EAX
004d27dd : MOV byte ptr [EBP + 0x10],0x0
004d27e1 : MOV EAX,dword ptr [EBP + 0x10]
004d27e4 : PUSH EAX
004d27e5 : MOV ECX,dword ptr [EBP + 0xc]
004d27e8 : PUSH ECX
004d27e9 : MOV EDX,dword ptr [EBP + 0xc]
004d27ec : PUSH EDX
004d27ed : MOV EAX,dword ptr [EBP + 0xc]
004d27f0 : PUSH EAX
004d27f1 : MOV EAX,EDI
004d27f3 : MOV ECX,dword ptr [EBP + 0x14]
004d27f6 : CALL 0x004d4cd0
004d27fb : MOV EAX,dword ptr [EBP + 0xc]
004d27fe : ADD ESI,EAX
004d2800 : PUSH ESI
004d2801 : LEA EDI,[EBP + -0x44]
004d2804 : CALL 0x004d4a50
004d2809 : ADD ESP,0x14
004d280c : MOV dword ptr [EBP + -0x4],0xffffffff
004d2813 : LEA ECX,[EBP + -0x44]
004d2816 : PUSH ECX
004d2817 : CALL 0x00705ce0
004d281c : MOV ECX,dword ptr [EBP + -0xc]
004d281f : MOV dword ptr FS:[0x0],ECX
004d2826 : POP ECX
004d2827 : POP EDI
004d2828 : POP ESI
004d2829 : POP EBX
004d282a : MOV ESP,EBP
004d282c : POP EBP
004d282d : RET 0x10
