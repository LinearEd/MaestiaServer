PROGRAM  : Maestia.exe
FUNCTION : FUN_00478790
ENTRY    : 00478790
BODY     : [[00478790, 00478882]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00478790(undefined4 *param_1)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  undefined4 *puVar5;
  int unaff_EDI;
  bool bVar6;
  undefined4 local_c;
  int *local_8;
  
  cVar1 = *(char *)(DAT_01722344[1] + 0x45);
  bVar6 = true;
  local_c = CONCAT31(local_c._1_3_,1);
  piVar3 = (int *)DAT_01722344[1];
  local_8 = DAT_01722344;
  while (piVar2 = piVar3, cVar1 == '\0') {
    if ((uint)piVar2[9] < 0x10) {
      piVar3 = piVar2 + 4;
    }
    else {
      piVar3 = (int *)piVar2[4];
    }
    iVar4 = FUN_00438a40(0,*(undefined4 *)(unaff_EDI + 0x14),piVar3,piVar2[8]);
    bVar6 = iVar4 < 0;
    local_c = CONCAT31(local_c._1_3_,bVar6);
    if (bVar6) {
      piVar3 = (int *)*piVar2;
    }
    else {
      piVar3 = (int *)piVar2[2];
    }
    cVar1 = *(char *)((int)piVar3 + 0x45);
    local_8 = piVar2;
  }
  if (bVar6) {
    if (local_8 == (int *)*DAT_01722344) {
      puVar5 = (undefined4 *)FUN_004789a0(&local_c,1,unaff_EDI);
      *param_1 = *puVar5;
      *(undefined1 *)(param_1 + 1) = 1;
      return;
    }
    FUN_00462360();
  }
  piVar3 = local_8;
  if (*(uint *)(unaff_EDI + 0x18) < 0x10) {
    iVar4 = unaff_EDI + 4;
  }
  else {
    iVar4 = *(int *)(unaff_EDI + 4);
  }
  iVar4 = FUN_00438a40(0,local_8[8],iVar4,*(undefined4 *)(unaff_EDI + 0x14));
  if (iVar4 < 0) {
    puVar5 = (undefined4 *)FUN_004789a0(&local_c,local_c,unaff_EDI);
    *param_1 = *puVar5;
    *(undefined1 *)(param_1 + 1) = 1;
    return;
  }
  *param_1 = piVar3;
  *(undefined1 *)(param_1 + 1) = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00478790 : PUSH EBP
00478791 : MOV EBP,ESP
00478793 : SUB ESP,0xc
00478796 : MOV ECX,dword ptr [0x01722344]
0047879c : PUSH EBX
0047879d : PUSH ESI
0047879e : MOV ESI,dword ptr [ECX + 0x4]
004787a1 : CMP byte ptr [ESI + 0x45],0x0
004787a5 : MOV AL,0x1
004787a7 : MOV EBX,ECX
004787a9 : MOV byte ptr [EBP + -0x8],AL
004787ac : JNZ 0x004787f1
004787ae : MOV EDI,EDI
004787b0 : CMP dword ptr [ESI + 0x24],0x10
004787b4 : MOV ECX,dword ptr [ESI + 0x20]
004787b7 : MOV EBX,ESI
004787b9 : JC 0x004787c0
004787bb : MOV EAX,dword ptr [ESI + 0x10]
004787be : JMP 0x004787c3
004787c0 : LEA EAX,[ESI + 0x10]
004787c3 : PUSH ECX
004787c4 : PUSH EAX
004787c5 : MOV EAX,dword ptr [EDI + 0x14]
004787c8 : PUSH EAX
004787c9 : PUSH 0x0
004787cb : MOV ECX,EDI
004787cd : CALL 0x00438a40
004787d2 : TEST EAX,EAX
004787d4 : SETL AL
004787d7 : MOV byte ptr [EBP + -0x8],AL
004787da : TEST AL,AL
004787dc : JZ 0x004787e2
004787de : MOV ESI,dword ptr [ESI]
004787e0 : JMP 0x004787e5
004787e2 : MOV ESI,dword ptr [ESI + 0x8]
004787e5 : CMP byte ptr [ESI + 0x45],0x0
004787e9 : JZ 0x004787b0
004787eb : MOV ECX,dword ptr [0x01722344]
004787f1 : MOV ESI,EBX
004787f3 : MOV dword ptr [EBP + -0x4],ESI
004787f6 : TEST AL,AL
004787f8 : JZ 0x0047882a
004787fa : CMP EBX,dword ptr [ECX]
004787fc : JNZ 0x0047881f
004787fe : PUSH EDI
004787ff : PUSH 0x1
00478801 : LEA ECX,[EBP + -0x8]
00478804 : PUSH ECX
00478805 : MOV ECX,EBX
00478807 : CALL 0x004789a0
0047880c : MOV EDX,dword ptr [EAX]
0047880e : MOV EAX,dword ptr [EBP + 0x8]
00478811 : MOV dword ptr [EAX],EDX
00478813 : MOV byte ptr [EAX + 0x4],0x1
00478817 : POP ESI
00478818 : POP EBX
00478819 : MOV ESP,EBP
0047881b : POP EBP
0047881c : RET 0x4
0047881f : LEA EDX,[EBP + -0x4]
00478822 : CALL 0x00462360
00478827 : MOV ESI,dword ptr [EBP + -0x4]
0047882a : CMP dword ptr [EDI + 0x18],0x10
0047882e : MOV EDX,dword ptr [EDI + 0x14]
00478831 : LEA ECX,[ESI + 0xc]
00478834 : JC 0x0047883b
00478836 : MOV EAX,dword ptr [EDI + 0x4]
00478839 : JMP 0x0047883e
0047883b : LEA EAX,[EDI + 0x4]
0047883e : PUSH EDX
0047883f : PUSH EAX
00478840 : MOV EAX,dword ptr [ECX + 0x14]
00478843 : PUSH EAX
00478844 : PUSH 0x0
00478846 : CALL 0x00438a40
0047884b : TEST EAX,EAX
0047884d : JGE 0x00478872
0047884f : MOV ECX,dword ptr [EBP + -0x8]
00478852 : PUSH EDI
00478853 : PUSH ECX
00478854 : LEA EDX,[EBP + -0x8]
00478857 : PUSH EDX
00478858 : MOV ECX,EBX
0047885a : CALL 0x004789a0
0047885f : MOV ECX,dword ptr [EAX]
00478861 : MOV EAX,dword ptr [EBP + 0x8]
00478864 : MOV dword ptr [EAX],ECX
00478866 : MOV byte ptr [EAX + 0x4],0x1
0047886a : POP ESI
0047886b : POP EBX
0047886c : MOV ESP,EBP
0047886e : POP EBP
0047886f : RET 0x4
00478872 : MOV EAX,dword ptr [EBP + 0x8]
00478875 : MOV dword ptr [EAX],ESI
00478877 : POP ESI
00478878 : MOV byte ptr [EAX + 0x4],0x0
0047887c : POP EBX
0047887d : MOV ESP,EBP
0047887f : POP EBP
00478880 : RET 0x4
