PROGRAM  : Maestia.exe
FUNCTION : FUN_0086aaa0
ENTRY    : 0086aaa0
BODY     : [[0086aaa0, 0086aafe] [0086ab05, 0086ab1b] [0086ab22, 0086ab38] [0086ab3f, 0086ab55] [0086ab60, 0086adff]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0086abbd) */

void FUN_0086aaa0(char param_1)

{
  int *piVar1;
  short sVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  int *in_ECX;
  int iVar5;
  int iVar6;
  uint local_20;
  int local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b346a6;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_ECX[0xfa] != 0) {
    if ((char)in_ECX[0xec] != '\0') {
      if (in_ECX[0x112] != 0) {
        FUN_00a684f0(in_ECX[0x112]);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (in_ECX[0x113] != 0) {
        FUN_00a684f0(in_ECX[0x113]);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (in_ECX[0x114] != 0) {
        FUN_00a684f0(in_ECX[0x114]);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      iVar5 = 0;
      iVar6 = in_ECX[0x117] - in_ECX[0x116] >> 2;
      if (0 < iVar6) {
        do {
          if (*(int *)(in_ECX[0x116] + iVar5 * 4) != 0) {
            local_18 = *(int *)(in_ECX[0x116] + iVar5 * 4);
            if (local_18 != 0) {
              FUN_00a684f0(local_18);
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            *(undefined4 *)(in_ECX[0x116] + iVar5 * 4) = 0;
            local_18 = 0;
          }
          iVar5 = iVar5 + 1;
        } while (iVar5 < iVar6);
      }
      if (in_ECX[0x116] != in_ECX[0x117]) {
        in_ECX[0x117] = in_ECX[0x116];
      }
      *(undefined1 *)(in_ECX + 0xec) = 0;
    }
    iVar5 = FUN_006f0760(0xec,".\\Loading\\AvaBaseBackgroundLoader.cpp",0xed,0,local_14);
    local_8 = 7;
    if (iVar5 == 0) {
      puVar3 = (undefined4 *)0x0;
    }
    else {
      puVar3 = (undefined4 *)FUN_00793df0(iVar5);
    }
    iVar6 = DAT_017251b8;
    local_8 = 0xffffffff;
    local_18 = 0;
    FUN_00484470(&local_18);
    if (iVar5 == *(int *)(iVar6 + 0x50)) {
      local_18 = 0;
    }
    else {
      local_18 = *(int *)(iVar5 + 0x10);
    }
    if (param_1 == '\0') {
      (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 8) + 0x138 + (int)in_ECX) + 0x10))(0);
      if (puVar3 != (undefined4 *)0x0) {
        (**(code **)*puVar3)(1);
      }
    }
    else if (local_18 == 0) {
      (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 8) + 0x138 + (int)in_ECX) + 0x10))(puVar3);
    }
    else {
      sVar2 = (**(code **)(*in_ECX + 0x1e4))();
      if ((sVar2 == 1) || (*(char *)((int)in_ECX + 0x5d2) != '\0')) {
        puVar3[0xb] = (-(uint)(*(char *)((int)in_ECX + 0x5d2) != '\0') & 0x5a) + 10;
      }
      else {
        puVar3[0xb] = 5;
      }
      iVar5 = DAT_017248e8;
      DAT_017248e8 = DAT_017248e8 + 1;
      uVar4 = FUN_00404750(L"%d_%d",in_ECX[1],iVar5);
      local_8 = 0xb;
      FUN_00405eb0(uVar4,0,0xffffffff);
      iVar5 = DAT_00da93ec;
      local_8 = 0xffffffff;
      if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      puVar3[0x39] = in_ECX[1];
      puVar3[0x23] = *(int *)(in_ECX[0x4e] + 8) + 0x138 + (int)in_ECX;
      if (iVar5 == 0) {
        iVar6 = 0;
      }
      else {
        iVar6 = iVar5 + 0x10;
      }
      puVar3[0x3a] = iVar6;
      FUN_00793060();
      FUN_00793130();
      if (*(char *)(iVar5 + 0x178) != '\0') {
        (**(code **)(*in_ECX + 0x40c))(1);
      }
      piVar1 = *(int **)(in_ECX[0xfa] + 0x2c);
      in_ECX[0xe8] = (int)piVar1;
      if (piVar1 != (int *)0x0) {
        (**(code **)(*piVar1 + 0x28))(in_ECX[0xfa] + 0xc);
      }
      (**(code **)(*in_ECX + 0x1fc))(1);
      FUN_00792980();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0086aaa0 : PUSH EBP
0086aaa1 : MOV EBP,ESP
0086aaa3 : PUSH -0x1
0086aaa5 : PUSH 0xb346a6
0086aaaa : MOV EAX,FS:[0x0]
0086aab0 : PUSH EAX
0086aab1 : SUB ESP,0x28
0086aab4 : MOV EAX,[0x00d66fa0]
0086aab9 : XOR EAX,EBP
0086aabb : MOV dword ptr [EBP + -0x10],EAX
0086aabe : PUSH EBX
0086aabf : PUSH ESI
0086aac0 : PUSH EDI
0086aac1 : PUSH EAX
0086aac2 : LEA EAX,[EBP + -0xc]
0086aac5 : MOV FS:[0x0],EAX
0086aacb : MOV EDI,ECX
0086aacd : XOR ESI,ESI
0086aacf : CMP dword ptr [EDI + 0x3e8],ESI
0086aad5 : JZ 0x0086ade2
0086aadb : CMP byte ptr [EDI + 0x3b0],0x0
0086aae2 : JZ 0x0086abd8
0086aae8 : MOV EBX,dword ptr [EDI + 0x448]
0086aaee : CMP EBX,ESI
0086aaf0 : JZ 0x0086ab05
0086aaf2 : PUSH EBX
0086aaf3 : CALL 0x00a684f0
0086aaf8 : MOV ECX,EBX
0086aafa : CALL 0x006f04e0
0086ab05 : MOV EBX,dword ptr [EDI + 0x44c]
0086ab0b : CMP EBX,ESI
0086ab0d : JZ 0x0086ab22
0086ab0f : PUSH EBX
0086ab10 : CALL 0x00a684f0
0086ab15 : MOV ECX,EBX
0086ab17 : CALL 0x006f04e0
0086ab22 : MOV EBX,dword ptr [EDI + 0x450]
0086ab28 : CMP EBX,ESI
0086ab2a : JZ 0x0086ab3f
0086ab2c : PUSH EBX
0086ab2d : CALL 0x00a684f0
0086ab32 : MOV ECX,EBX
0086ab34 : CALL 0x006f04e0
0086ab3f : MOV ESI,dword ptr [EDI + 0x45c]
0086ab45 : SUB ESI,dword ptr [EDI + 0x458]
0086ab4b : XOR EBX,EBX
0086ab4d : SAR ESI,0x2
0086ab50 : TEST ESI,ESI
0086ab52 : JLE 0x0086ab98
0086ab54 : JMP 0x0086ab60
0086ab60 : MOV EAX,dword ptr [EDI + 0x458]
0086ab66 : CMP dword ptr [EAX + EBX*0x4],0x0
0086ab6a : LEA EAX,[EAX + EBX*0x4]
0086ab6d : JZ 0x0086ab93
0086ab6f : MOV EAX,dword ptr [EAX]
0086ab71 : MOV dword ptr [EBP + -0x14],EAX
0086ab74 : TEST EAX,EAX
0086ab76 : JZ 0x0086ab86
0086ab78 : PUSH EAX
0086ab79 : CALL 0x00a684f0
0086ab7e : MOV ECX,dword ptr [EBP + -0x14]
0086ab81 : CALL 0x006f04e0
0086ab86 : MOV ECX,dword ptr [EDI + 0x458]
0086ab8c : MOV dword ptr [ECX + EBX*0x4],0x0
0086ab93 : INC EBX
0086ab94 : CMP EBX,ESI
0086ab96 : JL 0x0086ab60
0086ab98 : MOV ECX,dword ptr [EDI + 0x45c]
0086ab9e : MOV ESI,dword ptr [EDI + 0x458]
0086aba4 : CMP ESI,ECX
0086aba6 : JZ 0x0086abcf
0086aba8 : MOV EAX,ECX
0086abaa : SUB EAX,ECX
0086abac : SAR EAX,0x2
0086abaf : LEA EDX,[EAX*0x4 + 0x0]
0086abb6 : LEA EBX,[EDX + ESI*0x1]
0086abb9 : TEST EAX,EAX
0086abbb : JLE 0x0086abc9
0086abbd : PUSH EDX
0086abbe : PUSH ECX
0086abbf : PUSH EDX
0086abc0 : PUSH ESI
0086abc1 : CALL 0x00634101
0086abc6 : ADD ESP,0x10
0086abc9 : MOV dword ptr [EDI + 0x45c],EBX
0086abcf : MOV byte ptr [EDI + 0x3b0],0x0
0086abd6 : XOR ESI,ESI
0086abd8 : PUSH ESI
0086abd9 : PUSH 0xed
0086abde : PUSH 0xc153f4
0086abe3 : PUSH 0xec
0086abe8 : CALL 0x006f0760
0086abed : ADD ESP,0x10
0086abf0 : MOV dword ptr [EBP + -0x18],EAX
0086abf3 : MOV dword ptr [EBP + -0x4],0x7
0086abfa : CMP EAX,ESI
0086abfc : JZ 0x0086ac08
0086abfe : PUSH EAX
0086abff : CALL 0x00793df0
0086ac04 : MOV EBX,EAX
0086ac06 : JMP 0x0086ac0a
0086ac08 : XOR EBX,EBX
0086ac0a : MOV dword ptr [EBP + -0x4],0xffffffff
0086ac11 : MOV dword ptr [EBP + -0x14],ESI
0086ac14 : MOV ESI,dword ptr [0x017251b8]
0086ac1a : LEA EDX,[EBP + -0x14]
0086ac1d : PUSH EDX
0086ac1e : LEA ECX,[ESI + 0x4c]
0086ac21 : LEA EAX,[EBP + -0x18]
0086ac24 : CALL 0x00484470
0086ac29 : MOV ESI,dword ptr [ESI + 0x50]
0086ac2c : MOV EAX,dword ptr [EBP + -0x18]
0086ac2f : CMP EAX,ESI
0086ac31 : JNZ 0x0086ac3c
0086ac33 : MOV dword ptr [EBP + -0x14],0x0
0086ac3a : JMP 0x0086ac42
0086ac3c : MOV EAX,dword ptr [EAX + 0x10]
0086ac3f : MOV dword ptr [EBP + -0x14],EAX
0086ac42 : CMP byte ptr [EBP + 0x8],0x0
0086ac46 : JZ 0x0086adb4
0086ac4c : CMP dword ptr [EBP + -0x14],0x0
0086ac50 : JZ 0x0086ad95
0086ac56 : MOV EDX,dword ptr [EDI]
0086ac58 : MOV EAX,dword ptr [EDX + 0x1e4]
0086ac5e : MOV ECX,EDI
0086ac60 : CALL EAX
0086ac62 : CMP AX,0x1
0086ac66 : JZ 0x0086ac7a
0086ac68 : CMP byte ptr [EDI + 0x5d2],0x0
0086ac6f : JNZ 0x0086ac7a
0086ac71 : MOV dword ptr [EBX + 0x2c],0x5
0086ac78 : JMP 0x0086ac8e
0086ac7a : MOVZX ECX,byte ptr [EDI + 0x5d2]
0086ac81 : NEG ECX
0086ac83 : SBB ECX,ECX
0086ac85 : AND ECX,0x5a
0086ac88 : ADD ECX,0xa
0086ac8b : MOV dword ptr [EBX + 0x2c],ECX
0086ac8e : MOV EAX,[0x017248e8]
0086ac93 : MOV ECX,EAX
0086ac95 : INC EAX
0086ac96 : MOV [0x017248e8],EAX
0086ac9b : MOV EAX,dword ptr [EDI + 0x4]
0086ac9e : PUSH ECX
0086ac9f : PUSH EAX
0086aca0 : PUSH 0xc411a0
0086aca5 : LEA ESI,[EBP + -0x34]
0086aca8 : CALL 0x00404750
0086acad : ADD ESP,0xc
0086acb0 : MOV dword ptr [EBP + -0x4],0xb
0086acb7 : PUSH -0x1
0086acb9 : PUSH 0x0
0086acbb : PUSH EAX
0086acbc : LEA ECX,[EBX + 0xc]
0086acbf : CALL 0x00405eb0
0086acc4 : MOV dword ptr [EBP + -0x4],0xffffffff
0086accb : CMP dword ptr [EBP + -0x1c],0x8
0086accf : JC 0x0086acd9
0086acd1 : MOV ECX,dword ptr [EBP + -0x30]
0086acd4 : CALL 0x006f04e0
0086acd9 : MOV EAX,dword ptr [EDI + 0x4]
0086acdc : MOV ESI,dword ptr [0x00da93ec]
0086ace2 : XOR EDX,EDX
0086ace4 : MOV dword ptr [EBX + 0xe4],EAX
0086acea : MOV ECX,dword ptr [EDI + 0x138]
0086acf0 : MOV word ptr [EBP + -0x30],DX
0086acf4 : MOV EDX,dword ptr [ECX + 0x8]
0086acf7 : LEA EAX,[EDX + EDI*0x1 + 0x138]
0086acfe : MOV dword ptr [EBP + -0x1c],0x7
0086ad05 : MOV dword ptr [EBP + -0x20],0x0
0086ad0c : MOV dword ptr [EBX + 0x8c],EAX
0086ad12 : TEST ESI,ESI
0086ad14 : JZ 0x0086ad1b
0086ad16 : LEA EAX,[ESI + 0x10]
0086ad19 : JMP 0x0086ad1d
0086ad1b : XOR EAX,EAX
0086ad1d : MOV dword ptr [EBX + 0xe8],EAX
0086ad23 : MOV EAX,[0x0172491c]
0086ad28 : MOV EDX,dword ptr [EAX + 0x17c]
0086ad2e : ADD EDX,0x1a4
0086ad34 : MOV ECX,EBX
0086ad36 : CALL 0x00793060
0086ad3b : LEA EDX,[EDI + 0x1a4]
0086ad41 : CALL 0x00793130
0086ad46 : CMP byte ptr [ESI + 0x178],0x0
0086ad4d : JZ 0x0086ad5d
0086ad4f : MOV EDX,dword ptr [EDI]
0086ad51 : MOV EAX,dword ptr [EDX + 0x40c]
0086ad57 : PUSH 0x1
0086ad59 : MOV ECX,EDI
0086ad5b : CALL EAX
0086ad5d : MOV EAX,dword ptr [EDI + 0x3e8]
0086ad63 : MOV ECX,dword ptr [EAX + 0x2c]
0086ad66 : MOV dword ptr [EDI + 0x3a0],ECX
0086ad6c : TEST ECX,ECX
0086ad6e : JZ 0x0086ad7b
0086ad70 : MOV EDX,dword ptr [ECX]
0086ad72 : ADD EAX,0xc
0086ad75 : PUSH EAX
0086ad76 : MOV EAX,dword ptr [EDX + 0x28]
0086ad79 : CALL EAX
0086ad7b : MOV EDX,dword ptr [EDI]
0086ad7d : MOV EAX,dword ptr [EDX + 0x1fc]
0086ad83 : PUSH 0x1
0086ad85 : MOV ECX,EDI
0086ad87 : CALL EAX
0086ad89 : MOV ESI,dword ptr [EBP + -0x14]
0086ad8c : MOV EDI,EBX
0086ad8e : CALL 0x00792980
0086ad93 : JMP 0x0086ade2
0086ad95 : MOV ECX,dword ptr [EDI + 0x138]
0086ad9b : MOV EDX,dword ptr [ECX + 0x8]
0086ad9e : MOV EAX,dword ptr [EDX + EDI*0x1 + 0x138]
0086ada5 : LEA ECX,[EDX + EDI*0x1 + 0x138]
0086adac : MOV EDX,dword ptr [EAX + 0x10]
0086adaf : PUSH EBX
0086adb0 : CALL EDX
0086adb2 : JMP 0x0086ade2
0086adb4 : MOV EAX,dword ptr [EDI + 0x138]
0086adba : MOV ECX,dword ptr [EAX + 0x8]
0086adbd : MOV EDX,dword ptr [ECX + EDI*0x1 + 0x138]
0086adc4 : MOV EAX,dword ptr [EDX + 0x10]
0086adc7 : LEA EDI,[ECX + EDI*0x1 + 0x138]
0086adce : PUSH 0x0
0086add0 : MOV ECX,EDI
0086add2 : CALL EAX
0086add4 : TEST EBX,EBX
0086add6 : JZ 0x0086ade2
0086add8 : MOV EDX,dword ptr [EBX]
0086adda : MOV EAX,dword ptr [EDX]
0086addc : PUSH 0x1
0086adde : MOV ECX,EBX
0086ade0 : CALL EAX
0086ade2 : MOV ECX,dword ptr [EBP + -0xc]
0086ade5 : MOV dword ptr FS:[0x0],ECX
0086adec : POP ECX
0086aded : POP EDI
0086adee : POP ESI
0086adef : POP EBX
0086adf0 : MOV ECX,dword ptr [EBP + -0x10]
0086adf3 : XOR ECX,EBP
0086adf5 : CALL 0x00633e6b
0086adfa : MOV ESP,EBP
0086adfc : POP EBP
0086adfd : RET 0x4
