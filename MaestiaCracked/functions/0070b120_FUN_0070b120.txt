PROGRAM  : Maestia.exe
FUNCTION : FUN_0070b120
ENTRY    : 0070b120
BODY     : [[0070b120, 0070b206]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070b120(int param_1)

{
  LPCWSTR **pppWVar1;
  int unaff_ESI;
  undefined1 local_2c [4];
  LPCWSTR *local_28 [4];
  size_t local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b17622;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (0 < param_1) {
    do {
      local_8 = 0xffffffff;
      local_14 = 7;
      local_18 = 0;
      local_28[0] = (LPCWSTR *)((uint)local_28[0] & 0xffff0000);
      FUN_00406360(&DAT_00bfd07c,1);
      local_8 = 0;
      if (*(FILE **)(unaff_ESI + 0x20) != (FILE *)0x0) {
        pppWVar1 = (LPCWSTR **)local_28[0];
        if (local_14 < 8) {
          pppWVar1 = local_28;
        }
        _fwrite(pppWVar1,2,local_18,*(FILE **)(unaff_ESI + 0x20));
      }
      if (*(char *)(unaff_ESI + 0x5c) != '\0') {
        pppWVar1 = (LPCWSTR **)local_28[0];
        if (local_14 < 8) {
          pppWVar1 = local_28;
        }
        OutputDebugStringW((LPCWSTR)pppWVar1);
      }
      if (*(char *)(unaff_ESI + 0x5d) != '\0') {
        FUN_00704fe0(local_2c);
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      param_1 = param_1 + -1;
      local_28[0] = (LPCWSTR *)((uint)local_28[0] & 0xffff0000);
    } while (param_1 != 0);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0070b120 : PUSH EBP
0070b121 : MOV EBP,ESP
0070b123 : PUSH -0x1
0070b125 : PUSH 0xb17622
0070b12a : MOV EAX,FS:[0x0]
0070b130 : PUSH EAX
0070b131 : SUB ESP,0x1c
0070b134 : PUSH EBX
0070b135 : PUSH EDI
0070b136 : MOV EAX,[0x00d66fa0]
0070b13b : XOR EAX,EBP
0070b13d : PUSH EAX
0070b13e : LEA EAX,[EBP + -0xc]
0070b141 : MOV FS:[0x0],EAX
0070b147 : MOV EAX,dword ptr [EBP + 0x8]
0070b14a : XOR EBX,EBX
0070b14c : CMP EAX,EBX
0070b14e : JLE 0x0070b1f4
0070b154 : MOV dword ptr [EBP + 0x8],EAX
0070b157 : PUSH 0x1
0070b159 : XOR EAX,EAX
0070b15b : PUSH 0xbfd07c
0070b160 : LEA ECX,[EBP + -0x28]
0070b163 : MOV dword ptr [EBP + -0x10],0x7
0070b16a : MOV dword ptr [EBP + -0x14],EBX
0070b16d : MOV word ptr [EBP + -0x24],AX
0070b171 : CALL 0x00406360
0070b176 : MOV dword ptr [EBP + -0x4],EBX
0070b179 : MOV EAX,dword ptr [ESI + 0x20]
0070b17c : CMP EAX,EBX
0070b17e : JZ 0x0070b19c
0070b180 : CMP dword ptr [EBP + -0x10],0x8
0070b184 : MOV ECX,dword ptr [EBP + -0x24]
0070b187 : JNC 0x0070b18c
0070b189 : LEA ECX,[EBP + -0x24]
0070b18c : MOV EDX,dword ptr [EBP + -0x14]
0070b18f : PUSH EAX
0070b190 : PUSH EDX
0070b191 : PUSH 0x2
0070b193 : PUSH ECX
0070b194 : CALL 0x006376ef
0070b199 : ADD ESP,0x10
0070b19c : CMP byte ptr [ESI + 0x5c],BL
0070b19f : JZ 0x0070b1b4
0070b1a1 : CMP dword ptr [EBP + -0x10],0x8
0070b1a5 : MOV EAX,dword ptr [EBP + -0x24]
0070b1a8 : JNC 0x0070b1ad
0070b1aa : LEA EAX,[EBP + -0x24]
0070b1ad : PUSH EAX
0070b1ae : CALL dword ptr [0x00b8512c]
0070b1b4 : CMP byte ptr [ESI + 0x5d],BL
0070b1b7 : JZ 0x0070b1c5
0070b1b9 : LEA EAX,[EBP + -0x28]
0070b1bc : PUSH EAX
0070b1bd : LEA EDI,[ESI + 0x60]
0070b1c0 : CALL 0x00704fe0
0070b1c5 : MOV dword ptr [EBP + -0x4],0xffffffff
0070b1cc : CMP dword ptr [EBP + -0x10],0x8
0070b1d0 : JC 0x0070b1da
0070b1d2 : MOV ECX,dword ptr [EBP + -0x24]
0070b1d5 : CALL 0x006f04e0
0070b1da : XOR ECX,ECX
0070b1dc : SUB dword ptr [EBP + 0x8],0x1
0070b1e0 : MOV dword ptr [EBP + -0x10],0x7
0070b1e7 : MOV dword ptr [EBP + -0x14],EBX
0070b1ea : MOV word ptr [EBP + -0x24],CX
0070b1ee : JNZ 0x0070b157
0070b1f4 : MOV ECX,dword ptr [EBP + -0xc]
0070b1f7 : MOV dword ptr FS:[0x0],ECX
0070b1fe : POP ECX
0070b1ff : POP EDI
0070b200 : POP EBX
0070b201 : MOV ESP,EBP
0070b203 : POP EBP
0070b204 : RET 0x4
