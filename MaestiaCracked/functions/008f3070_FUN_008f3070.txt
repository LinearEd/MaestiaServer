PROGRAM  : Maestia.exe
FUNCTION : FUN_008f3070
ENTRY    : 008f3070
BODY     : [[008f3070, 008f3299]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f3070(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int *piVar1;
  int iVar2;
  undefined4 in_ECX;
  int in_EDX;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b63a36;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  switch(in_ECX) {
  case 0x11:
    piVar1 = *(int **)(in_EDX + 0x178);
    goto LAB_008f311f;
  default:
    iVar2 = FUN_008eb580();
    if (iVar2 == 0) {
      FUN_00406460(L"[AvaGuiWindowMgr::OnMsgIncItem] Invalid Packet");
      local_8 = 0;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiWindowMgr::OnMsgIncItem",0xa38,local_2c)
        ;
      }
      local_8 = 0xffffffff;
      if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_14 = 7;
      local_18 = 0;
      local_28 = 0;
    }
    else {
      FUN_00943840(iVar2,param_1,param_2,param_3,param_4);
    }
    break;
  case 0x13:
    if (*(int *)(in_EDX + 0x1b4) == 0) break;
    piVar1 = *(int **)(*(int *)(in_EDX + 0x1b4) + 8);
    goto LAB_008f3127;
  case 0x21:
    piVar1 = *(int **)(in_EDX + 0x1b8);
LAB_008f311f:
    if (piVar1 != (int *)0x0) {
LAB_008f3127:
      (**(code **)(*piVar1 + 0xac))(param_1,param_2,param_3);
    }
    break;
  case 0x30:
    if (*(int *)(in_EDX + 0x13c) != 0) {
      FUN_00955070(*(int *)(in_EDX + 0x13c),in_ECX);
    }
    break;
  case 0x40:
  case 0x41:
  case 0x42:
  case 0x94:
    if ((*(int *)(in_EDX + 0x138) != 0) && (iVar2 = FUN_00904ba0(in_ECX), iVar2 != 0)) {
      piVar1 = (int *)FUN_00904ba0(in_ECX);
      (**(code **)(*piVar1 + 0xac))(param_1,param_2,param_3);
    }
    break;
  case 0x43:
    if ((*(int *)(in_EDX + 0x130) != 0) &&
       (iVar2 = *(int *)(*(int *)(in_EDX + 0x130) + 0x40), iVar2 != 0)) {
      FUN_00943840(iVar2,param_1,param_2,param_3,0);
    }
    break;
  case 0x44:
    if (*(int **)(in_EDX + 0x1f8) != (int *)0x0) {
      (**(code **)(**(int **)(in_EDX + 0x1f8) + 0xac))(param_1,param_2,param_3);
    }
  case 0x95:
    if (*(int **)(in_EDX + 0x200) != (int *)0x0) {
      (**(code **)(**(int **)(in_EDX + 0x200) + 0xac))(param_1,param_2,param_3);
    }
    break;
  case 0x97:
    if (*(int **)(in_EDX + 0x1e8) != (int *)0x0) {
      (**(code **)(**(int **)(in_EDX + 0x1e8) + 0xac))
                (param_1,param_2,param_3,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    }
  }
  if (*(int *)(*DAT_00da9894 + 0x1e0) != 0) {
    FUN_008c55d0();
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008f3070 : PUSH EBP
008f3071 : MOV EBP,ESP
008f3073 : PUSH -0x1
008f3075 : PUSH 0xb63a36
008f307a : MOV EAX,FS:[0x0]
008f3080 : PUSH EAX
008f3081 : SUB ESP,0x1c
008f3084 : PUSH EBX
008f3085 : PUSH ESI
008f3086 : PUSH EDI
008f3087 : MOV EAX,[0x00d66fa0]
008f308c : XOR EAX,EBP
008f308e : PUSH EAX
008f308f : LEA EAX,[EBP + -0xc]
008f3092 : MOV FS:[0x0],EAX
008f3098 : MOV EBX,dword ptr [EBP + 0x10]
008f309b : MOV EDI,ECX
008f309d : MOV ESI,EDX
008f309f : LEA EAX,[EDI + -0x11]
008f30a2 : CMP EAX,0x86
008f30a7 : JA 0x008f31f7
008f30ad : MOVZX EAX,byte ptr [EAX + 0x8f32c4]
008f30b4 : JMP dword ptr [EAX*0x4 + 0x8f329c]
008f30bb : MOV ESI,dword ptr [ESI + 0x13c]
008f30c1 : TEST ESI,ESI
008f30c3 : JZ 0x008f326f
008f30c9 : MOV EDX,dword ptr [EBP + 0xc]
008f30cc : PUSH EDI
008f30cd : PUSH ESI
008f30ce : MOV ESI,dword ptr [EBP + 0x8]
008f30d1 : MOV EAX,EBX
008f30d3 : CALL 0x00955070
008f30d8 : JMP 0x008f326f
008f30dd : MOV ESI,dword ptr [ESI + 0x138]
008f30e3 : TEST ESI,ESI
008f30e5 : JZ 0x008f326f
008f30eb : PUSH EDI
008f30ec : CALL 0x00904ba0
008f30f1 : TEST EAX,EAX
008f30f3 : JZ 0x008f326f
008f30f9 : PUSH EDI
008f30fa : CALL 0x00904ba0
008f30ff : MOV ECX,dword ptr [EBP + 0xc]
008f3102 : MOV EDX,dword ptr [EAX]
008f3104 : MOV EDX,dword ptr [EDX + 0xac]
008f310a : PUSH EBX
008f310b : PUSH ECX
008f310c : MOV ECX,dword ptr [EBP + 0x8]
008f310f : PUSH ECX
008f3110 : MOV ECX,EAX
008f3112 : CALL EDX
008f3114 : JMP 0x008f326f
008f3119 : MOV ECX,dword ptr [ESI + 0x178]
008f311f : TEST ECX,ECX
008f3121 : JZ 0x008f326f
008f3127 : MOV EDX,dword ptr [EBP + 0xc]
008f312a : MOV EAX,dword ptr [ECX]
008f312c : MOV EAX,dword ptr [EAX + 0xac]
008f3132 : PUSH EBX
008f3133 : PUSH EDX
008f3134 : MOV EDX,dword ptr [EBP + 0x8]
008f3137 : PUSH EDX
008f3138 : CALL EAX
008f313a : JMP 0x008f326f
008f313f : MOV ESI,dword ptr [ESI + 0x130]
008f3145 : TEST ESI,ESI
008f3147 : JZ 0x008f326f
008f314d : MOV EAX,dword ptr [ESI + 0x40]
008f3150 : TEST EAX,EAX
008f3152 : JZ 0x008f326f
008f3158 : MOV ECX,dword ptr [EBP + 0xc]
008f315b : MOV EDX,dword ptr [EBP + 0x8]
008f315e : PUSH 0x0
008f3160 : PUSH EBX
008f3161 : PUSH ECX
008f3162 : PUSH EDX
008f3163 : PUSH EAX
008f3164 : CALL 0x00943840
008f3169 : JMP 0x008f326f
008f316e : MOV ESI,dword ptr [ESI + 0x1b4]
008f3174 : TEST ESI,ESI
008f3176 : JZ 0x008f326f
008f317c : MOV ECX,dword ptr [ESI + 0x8]
008f317f : JMP 0x008f3127
008f3181 : MOV ECX,dword ptr [ESI + 0x1f8]
008f3187 : TEST ECX,ECX
008f3189 : JZ 0x008f319e
008f318b : MOV EAX,dword ptr [EBP + 0xc]
008f318e : MOV EDX,dword ptr [ECX]
008f3190 : MOV EDX,dword ptr [EDX + 0xac]
008f3196 : PUSH EBX
008f3197 : PUSH EAX
008f3198 : MOV EAX,dword ptr [EBP + 0x8]
008f319b : PUSH EAX
008f319c : CALL EDX
008f319e : MOV ESI,dword ptr [ESI + 0x200]
008f31a4 : TEST ESI,ESI
008f31a6 : JZ 0x008f326f
008f31ac : MOV ECX,dword ptr [EBP + 0xc]
008f31af : MOV EAX,dword ptr [ESI]
008f31b1 : MOV EDX,dword ptr [EBP + 0x8]
008f31b4 : MOV EAX,dword ptr [EAX + 0xac]
008f31ba : PUSH EBX
008f31bb : PUSH ECX
008f31bc : MOV ECX,ESI
008f31be : PUSH EDX
008f31bf : CALL EAX
008f31c1 : JMP 0x008f326f
008f31c6 : MOV ECX,dword ptr [ESI + 0x1e8]
008f31cc : TEST ECX,ECX
008f31ce : JZ 0x008f326f
008f31d4 : MOV EAX,dword ptr [EBP + 0xc]
008f31d7 : MOV EDX,dword ptr [ECX]
008f31d9 : MOV EDX,dword ptr [EDX + 0xac]
008f31df : PUSH EBX
008f31e0 : PUSH EAX
008f31e1 : MOV EAX,dword ptr [EBP + 0x8]
008f31e4 : PUSH EAX
008f31e5 : CALL EDX
008f31e7 : JMP 0x008f326f
008f31ec : MOV ECX,dword ptr [ESI + 0x1b8]
008f31f2 : JMP 0x008f311f
008f31f7 : MOV EAX,ESI
008f31f9 : CALL 0x008eb580
008f31fe : XOR ESI,ESI
008f3200 : CMP EAX,ESI
008f3202 : JZ 0x008f3219
008f3204 : MOV ECX,dword ptr [EBP + 0x14]
008f3207 : MOV EDX,dword ptr [EBP + 0xc]
008f320a : PUSH ECX
008f320b : MOV ECX,dword ptr [EBP + 0x8]
008f320e : PUSH EBX
008f320f : PUSH EDX
008f3210 : PUSH ECX
008f3211 : PUSH EAX
008f3212 : CALL 0x00943840
008f3217 : JMP 0x008f326f
008f3219 : PUSH 0xc5df20
008f321e : LEA ECX,[EBP + -0x28]
008f3221 : CALL 0x00406460
008f3226 : MOV dword ptr [EBP + -0x4],ESI
008f3229 : MOV EDX,dword ptr [0x00da98e8]
008f322f : MOV ECX,dword ptr [EDX]
008f3231 : CMP ECX,ESI
008f3233 : JZ 0x008f324a
008f3235 : MOV EAX,dword ptr [ECX]
008f3237 : MOV EAX,dword ptr [EAX + 0x14]
008f323a : LEA EDX,[EBP + -0x28]
008f323d : PUSH EDX
008f323e : PUSH 0xa38
008f3243 : PUSH 0xc5de9c
008f3248 : CALL EAX
008f324a : MOV dword ptr [EBP + -0x4],0xffffffff
008f3251 : CMP dword ptr [EBP + -0x10],0x8
008f3255 : JC 0x008f325f
008f3257 : MOV ECX,dword ptr [EBP + -0x24]
008f325a : CALL 0x006f04e0
008f325f : XOR ECX,ECX
008f3261 : MOV dword ptr [EBP + -0x10],0x7
008f3268 : MOV dword ptr [EBP + -0x14],ESI
008f326b : MOV word ptr [EBP + -0x24],CX
008f326f : MOV EDX,dword ptr [0x00da9894]
008f3275 : MOV EAX,dword ptr [EDX]
008f3277 : MOV EAX,dword ptr [EAX + 0x1e0]
008f327d : TEST EAX,EAX
008f327f : JZ 0x008f3286
008f3281 : CALL 0x008c55d0
008f3286 : MOV ECX,dword ptr [EBP + -0xc]
008f3289 : MOV dword ptr FS:[0x0],ECX
008f3290 : POP ECX
008f3291 : POP EDI
008f3292 : POP ESI
008f3293 : POP EBX
008f3294 : MOV ESP,EBP
008f3296 : POP EBP
008f3297 : RET 0x10
