PROGRAM  : Maestia.exe
FUNCTION : FUN_00a8d990
ENTRY    : 00a8d990
BODY     : [[00a8d990, 00a8db1d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a8d990(uint param_1,uint param_2,undefined4 param_3)

{
  int *piVar1;
  undefined2 uVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  undefined4 ****ppppuVar6;
  int *in_ECX;
  uint local_50;
  uint local_34;
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b38a4d;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar3;
  FUN_00992f20(param_1,param_2,param_3);
  piVar4 = (int *)(**(code **)(*in_ECX + 0x74))(param_1,param_2,uVar3);
  if (piVar4 != (int *)0x0) {
    FUN_00406460(L"amount");
    local_8 = 0;
    iVar5 = FUN_0081cce0(DAT_0172491c);
    local_8._0_1_ = 1;
    if (*(uint *)(iVar5 + 0x18) < 8) {
      iVar5 = iVar5 + 4;
    }
    else {
      iVar5 = *(int *)(iVar5 + 4);
    }
    uVar2 = (**(code **)(*piVar4 + 0x40))();
    FUN_00404750(L"%s: %d",iVar5,uVar2);
    local_8 = CONCAT31(local_8._1_3_,3);
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (((*(char *)((int)in_ECX + 0x32) != '\0') && (iVar5 = *DAT_00da9894, iVar5 != 0)) &&
       (*(int *)(iVar5 + 0x114) != 0)) {
      piVar1 = *(int **)(iVar5 + 0x114);
      ppppuVar6 = (undefined4 ****)local_2c[0];
      if (local_18 < 8) {
        ppppuVar6 = local_2c;
      }
      iVar5 = *piVar1;
      uVar2 = (**(code **)(*piVar4 + 0x40))(ppppuVar6);
      (**(code **)(iVar5 + 4))
                (piVar1,"mc_privateshopseller.ShopSetItemAmount","%d,%d,%ls",
                 (param_1 & 0xffff) + (param_2 & 0xffff) * 2,uVar2);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a8d990 : PUSH EBP
00a8d991 : MOV EBP,ESP
00a8d993 : PUSH -0x1
00a8d995 : PUSH 0xb38a4d
00a8d99a : MOV EAX,FS:[0x0]
00a8d9a0 : PUSH EAX
00a8d9a1 : SUB ESP,0x58
00a8d9a4 : MOV EAX,[0x00d66fa0]
00a8d9a9 : XOR EAX,EBP
00a8d9ab : MOV dword ptr [EBP + -0x10],EAX
00a8d9ae : PUSH EBX
00a8d9af : PUSH ESI
00a8d9b0 : PUSH EDI
00a8d9b1 : PUSH EAX
00a8d9b2 : LEA EAX,[EBP + -0xc]
00a8d9b5 : MOV FS:[0x0],EAX
00a8d9bb : MOV EAX,dword ptr [EBP + 0x10]
00a8d9be : MOV ESI,dword ptr [EBP + 0xc]
00a8d9c1 : MOV EBX,dword ptr [EBP + 0x8]
00a8d9c4 : PUSH EAX
00a8d9c5 : PUSH ESI
00a8d9c6 : PUSH EBX
00a8d9c7 : MOV EDI,ECX
00a8d9c9 : CALL 0x00992f20
00a8d9ce : MOV EDX,dword ptr [EDI]
00a8d9d0 : MOV EAX,dword ptr [EDX + 0x74]
00a8d9d3 : PUSH ESI
00a8d9d4 : PUSH EBX
00a8d9d5 : MOV ECX,EDI
00a8d9d7 : CALL EAX
00a8d9d9 : MOV EBX,EAX
00a8d9db : TEST EBX,EBX
00a8d9dd : JZ 0x00a8db00
00a8d9e3 : PUSH 0xc70a08
00a8d9e8 : LEA ECX,[EBP + -0x48]
00a8d9eb : CALL 0x00406460
00a8d9f0 : MOV dword ptr [EBP + -0x4],0x0
00a8d9f7 : MOV ECX,dword ptr [0x0172491c]
00a8d9fd : PUSH ECX
00a8d9fe : LEA ECX,[EBP + -0x48]
00a8da01 : LEA ESI,[EBP + -0x64]
00a8da04 : CALL 0x0081cce0
00a8da09 : MOV byte ptr [EBP + -0x4],0x1
00a8da0d : CMP dword ptr [EAX + 0x18],0x8
00a8da11 : JC 0x00a8da18
00a8da13 : MOV ESI,dword ptr [EAX + 0x4]
00a8da16 : JMP 0x00a8da1b
00a8da18 : LEA ESI,[EAX + 0x4]
00a8da1b : MOV EDX,dword ptr [EBX]
00a8da1d : MOV EAX,dword ptr [EDX + 0x40]
00a8da20 : MOV ECX,EBX
00a8da22 : CALL EAX
00a8da24 : MOVZX ECX,AX
00a8da27 : PUSH ECX
00a8da28 : PUSH ESI
00a8da29 : PUSH 0xc70a18
00a8da2e : LEA ESI,[EBP + -0x2c]
00a8da31 : CALL 0x00404750
00a8da36 : ADD ESP,0xc
00a8da39 : MOV byte ptr [EBP + -0x4],0x3
00a8da3d : CMP dword ptr [EBP + -0x4c],0x8
00a8da41 : JC 0x00a8da4b
00a8da43 : MOV ECX,dword ptr [EBP + -0x60]
00a8da46 : CALL 0x006f04e0
00a8da4b : XOR ESI,ESI
00a8da4d : XOR EDX,EDX
00a8da4f : MOV dword ptr [EBP + -0x4c],0x7
00a8da56 : MOV dword ptr [EBP + -0x50],ESI
00a8da59 : MOV word ptr [EBP + -0x60],DX
00a8da5d : MOV byte ptr [EBP + -0x4],0x4
00a8da61 : CMP dword ptr [EBP + -0x30],0x8
00a8da65 : JC 0x00a8da6f
00a8da67 : MOV ECX,dword ptr [EBP + -0x44]
00a8da6a : CALL 0x006f04e0
00a8da6f : XOR EAX,EAX
00a8da71 : MOV dword ptr [EBP + -0x30],0x7
00a8da78 : MOV dword ptr [EBP + -0x34],ESI
00a8da7b : MOV word ptr [EBP + -0x44],AX
00a8da7f : CMP byte ptr [EDI + 0x32],AL
00a8da82 : JZ 0x00a8dadb
00a8da84 : MOV ECX,dword ptr [0x00da9894]
00a8da8a : MOV EAX,dword ptr [ECX]
00a8da8c : CMP EAX,ESI
00a8da8e : JZ 0x00a8dadb
00a8da90 : CMP dword ptr [EAX + 0x114],ESI
00a8da96 : JZ 0x00a8dadb
00a8da98 : CMP dword ptr [EBP + -0x14],0x8
00a8da9c : MOV EDI,dword ptr [EAX + 0x114]
00a8daa2 : MOV EAX,dword ptr [EBP + -0x28]
00a8daa5 : JNC 0x00a8daaa
00a8daa7 : LEA EAX,[EBP + -0x28]
00a8daaa : MOV EDX,dword ptr [EBX]
00a8daac : MOV ESI,dword ptr [EDI]
00a8daae : PUSH EAX
00a8daaf : MOV EAX,dword ptr [EDX + 0x40]
00a8dab2 : MOV ECX,EBX
00a8dab4 : CALL EAX
00a8dab6 : MOVZX EDX,word ptr [EBP + 0xc]
00a8daba : MOVZX ECX,AX
00a8dabd : MOVZX EAX,word ptr [EBP + 0x8]
00a8dac1 : PUSH ECX
00a8dac2 : LEA ECX,[EAX + EDX*0x2]
00a8dac5 : MOV EDX,dword ptr [ESI + 0x4]
00a8dac8 : PUSH ECX
00a8dac9 : PUSH 0xc70a28
00a8dace : PUSH 0xc70a34
00a8dad3 : PUSH EDI
00a8dad4 : CALL EDX
00a8dad6 : ADD ESP,0x18
00a8dad9 : XOR ESI,ESI
00a8dadb : MOV dword ptr [EBP + -0x4],0xffffffff
00a8dae2 : CMP dword ptr [EBP + -0x14],0x8
00a8dae6 : JC 0x00a8daf0
00a8dae8 : MOV ECX,dword ptr [EBP + -0x28]
00a8daeb : CALL 0x006f04e0
00a8daf0 : XOR EAX,EAX
00a8daf2 : MOV dword ptr [EBP + -0x14],0x7
00a8daf9 : MOV dword ptr [EBP + -0x18],ESI
00a8dafc : MOV word ptr [EBP + -0x28],AX
00a8db00 : MOV ECX,dword ptr [EBP + -0xc]
00a8db03 : MOV dword ptr FS:[0x0],ECX
00a8db0a : POP ECX
00a8db0b : POP EDI
00a8db0c : POP ESI
00a8db0d : POP EBX
00a8db0e : MOV ECX,dword ptr [EBP + -0x10]
00a8db11 : XOR ECX,EBP
00a8db13 : CALL 0x00633e6b
00a8db18 : MOV ESP,EBP
00a8db1a : POP EBP
00a8db1b : RET 0xc
