PROGRAM  : Maestia.exe
FUNCTION : FUN_005f6bb0
ENTRY    : 005f6bb0
BODY     : [[005f6bb0, 005f6c33]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f6bb0(int param_1)

{
  uint *puVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  undefined4 *in_ECX;
  int iVar5;
  
  uVar2 = *in_ECX;
  *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffffffc;
  uVar4 = (*(uint *)(param_1 + 0x18) >> ((byte)uVar2 & 0x1f)) - 1;
  puVar1 = (uint *)(param_1 + 0x20 + (uVar4 >> 4) * 4);
  *puVar1 = *puVar1 & ~(3 << ((char)uVar4 * '\x02' & 0x1eU));
  iVar3 = *(int *)(param_1 + 0x1c);
  uVar4 = *(uint *)(param_1 + 0x18) >> ((byte)*in_ECX & 0x1f);
  iVar5 = uVar4 << ((byte)*in_ECX & 0x1f);
  if (uVar4 < 0x21) {
    *(short *)(iVar5 + -2 + iVar3) = (short)uVar4;
    *(short *)(iVar3 + 0xc) = (short)uVar4;
    *(int *)(iVar3 + 8) = param_1;
    FUN_005a7f80(iVar3);
    return;
  }
  *(undefined2 *)(iVar5 + -2 + iVar3) = 0x21;
  *(undefined2 *)(iVar3 + 0xc) = 0x21;
  *(uint *)(iVar5 + -8 + iVar3) = uVar4;
  *(uint *)(iVar3 + 0x10) = uVar4;
  *(int *)(iVar3 + 8) = param_1;
  FUN_005a7f80(iVar3);
  return;
}



============================================================
DISASSEMBLY
============================================================
005f6bb0 : MOV EDX,dword ptr [ESP + 0x4]
005f6bb4 : MOV EAX,dword ptr [EDX + 0x18]
005f6bb7 : PUSH EBX
005f6bb8 : MOV EBX,ECX
005f6bba : MOV ECX,dword ptr [EBX]
005f6bbc : AND dword ptr [EDX + 0x20],0xfffffffc
005f6bc0 : SHR EAX,CL
005f6bc2 : PUSH ESI
005f6bc3 : PUSH EDI
005f6bc4 : DEC EAX
005f6bc5 : MOV ECX,EAX
005f6bc7 : SHR ECX,0x4
005f6bca : LEA ESI,[EDX + ECX*0x4 + 0x20]
005f6bce : LEA ECX,[EAX + EAX*0x1]
005f6bd1 : AND ECX,0x1e
005f6bd4 : MOV EAX,0x3
005f6bd9 : SHL EAX,CL
005f6bdb : NOT EAX
005f6bdd : AND dword ptr [ESI],EAX
005f6bdf : MOV ECX,dword ptr [EBX]
005f6be1 : MOV EAX,dword ptr [EDX + 0x18]
005f6be4 : MOV EDI,dword ptr [EDX + 0x1c]
005f6be7 : SHR EAX,CL
005f6be9 : MOV ESI,EAX
005f6beb : SHL ESI,CL
005f6bed : CMP EAX,0x21
005f6bf0 : JNC 0x005f6c0d
005f6bf2 : MOV word ptr [ESI + EDI*0x1 + -0x2],AX
005f6bf7 : PUSH EDI
005f6bf8 : LEA ECX,[EBX + 0x8]
005f6bfb : MOV word ptr [EDI + 0xc],AX
005f6bff : MOV dword ptr [EDI + 0x8],EDX
005f6c02 : CALL 0x005a7f80
005f6c07 : POP EDI
005f6c08 : POP ESI
005f6c09 : POP EBX
005f6c0a : RET 0x4
005f6c0d : MOV ECX,0x21
005f6c12 : MOV word ptr [ESI + EDI*0x1 + -0x2],CX
005f6c17 : MOV word ptr [EDI + 0xc],CX
005f6c1b : MOV dword ptr [ESI + EDI*0x1 + -0x8],EAX
005f6c1f : PUSH EDI
005f6c20 : LEA ECX,[EBX + 0x8]
005f6c23 : MOV dword ptr [EDI + 0x10],EAX
005f6c26 : MOV dword ptr [EDI + 0x8],EDX
005f6c29 : CALL 0x005a7f80
005f6c2e : POP EDI
005f6c2f : POP ESI
005f6c30 : POP EBX
005f6c31 : RET 0x4
