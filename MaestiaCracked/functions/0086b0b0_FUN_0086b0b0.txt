PROGRAM  : Maestia.exe
FUNCTION : FUN_0086b0b0
ENTRY    : 0086b0b0
BODY     : [[0086b0b0, 0086b178] [0086b17f, 0086b195] [0086b19c, 0086b1b2] [0086b1b9, 0086b426]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0086b22f) */

void FUN_0086b0b0(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  int in_ECX;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  int iVar6;
  undefined1 auStack_74 [4];
  int local_70;
  undefined1 local_6c [4];
  undefined2 local_68;
  undefined4 local_58;
  uint local_54;
  int local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b38084;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_74;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xffffff80;
  ExceptionList = &local_14;
  if (param_1 == 0) {
    FUN_00406460(L"SceneNode NULL ! AvaNonPlayerCharacter::InitCharacter");
    local_c = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaNonPlayerCharacter::InitCharacter",0x39e,local_6c);
    }
    local_c = 0xffffffff;
    if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    if (*(char *)(in_ECX + 0x3b0) != '\0') {
      if (*(int *)(in_ECX + 0x448) != 0) {
        FUN_00a684f0(*(int *)(in_ECX + 0x448));
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (*(int *)(in_ECX + 0x44c) != 0) {
        FUN_00a684f0(*(int *)(in_ECX + 0x44c));
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (*(int *)(in_ECX + 0x450) != 0) {
        FUN_00a684f0(*(int *)(in_ECX + 0x450));
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      iVar6 = 0;
      iVar5 = *(int *)(in_ECX + 0x45c) - *(int *)(in_ECX + 0x458) >> 2;
      if (0 < iVar5) {
        do {
          if (*(int *)(*(int *)(in_ECX + 0x458) + iVar6 * 4) != 0) {
            local_70 = *(int *)(*(int *)(in_ECX + 0x458) + iVar6 * 4);
            if (local_70 != 0) {
              FUN_00a684f0(local_70);
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            *(undefined4 *)(*(int *)(in_ECX + 0x458) + iVar6 * 4) = 0;
            local_70 = 0;
          }
          iVar6 = iVar6 + 1;
        } while (iVar6 < iVar5);
      }
      if (*(int *)(in_ECX + 0x458) != *(int *)(in_ECX + 0x45c)) {
        *(int *)(in_ECX + 0x45c) = *(int *)(in_ECX + 0x458);
      }
      *(undefined1 *)(in_ECX + 0x3b0) = 0;
    }
    if (*(int *)(in_ECX + 1000) != 0) {
      FUN_008018d0(L"AvaNonPlayerCharacter::InitCharacter m_pCharNode Non NULL!!",uVar1);
    }
    *(int *)(in_ECX + 1000) = param_1;
    *(undefined1 *)(param_1 + 0x2bf) = 1;
    iVar5 = DAT_00d7c54c;
    local_70 = *(int *)(in_ECX + 8);
    FUN_004437f0(&local_70);
    if ((local_50 != *(int *)(iVar5 + 0x44)) && (iVar5 = *(int *)(local_50 + 0x10), iVar5 != 0)) {
      puVar3 = *(undefined4 **)(iVar5 + 0xb8);
      if (puVar3 == (undefined4 *)0x0) {
        puVar3 = &local_34;
      }
      puVar4 = *(undefined4 **)(iVar5 + 0xb8);
      if (puVar4 == (undefined4 *)0x0) {
        puVar4 = &local_34;
      }
      *(float *)(in_ECX + 0x46c) =
           (float)*(ushort *)((int)puVar3 + (uint)*(byte *)(iVar5 + 0x54) * 2 + 0x74) /
           (float)*(ushort *)((int)puVar4 + (uint)*(byte *)(iVar5 + 0x54) * 2 + 0x2c);
      uVar2 = *(undefined4 *)(iVar5 + 100);
      *(undefined4 *)(in_ECX + 0x3a4) = uVar2;
      *(undefined4 *)(in_ECX + 0x3a8) = uVar2;
      *(byte *)(in_ECX + 0x438) = (byte)((uint)*(undefined4 *)(iVar5 + 0x4c) >> 0x18) & 1;
    }
    FUN_007d8b50();
    local_68 = 0;
    *(undefined4 *)(in_ECX + 0x410) = *(undefined4 *)(*(int *)(in_ECX + 1000) + 0x28c);
    local_54 = 7;
    local_58 = 0;
    FUN_00406360(L"SoundNode",9);
    local_c = 1;
    local_4c = 0x3f800000;
    local_48 = 0x3f800000;
    local_44 = 0x3f800000;
    local_34 = 0;
    local_30 = 0;
    local_2c = 0;
    local_28 = 0x3f800000;
    local_40 = 0;
    local_3c = 0;
    local_38 = 0;
    uVar2 = (**(code **)(**(int **)(in_ECX + 1000) + 0x20))(local_6c,&local_40,&local_34,&local_4c);
    *(undefined4 *)(in_ECX + 0x3f0) = uVar2;
    local_c = 0xffffffff;
    if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(undefined1 *)(*(int *)(in_ECX + 0x3f0) + 0x25a) = 0;
    if (*(short *)(in_ECX + 10) == 0x509) {
      *(undefined1 *)(in_ECX + 0x3b1) = 1;
    }
  }
  local_c = 0xffffffff;
  local_54 = 7;
  local_58 = 0;
  local_68 = 0;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_74);
  return;
}



============================================================
DISASSEMBLY
============================================================
0086b0b0 : PUSH EBP
0086b0b1 : MOV EBP,ESP
0086b0b3 : AND ESP,0xfffffff8
0086b0b6 : PUSH -0x1
0086b0b8 : PUSH 0xb38084
0086b0bd : MOV EAX,FS:[0x0]
0086b0c3 : PUSH EAX
0086b0c4 : SUB ESP,0x60
0086b0c7 : MOV EAX,[0x00d66fa0]
0086b0cc : XOR EAX,ESP
0086b0ce : MOV dword ptr [ESP + 0x58],EAX
0086b0d2 : PUSH EBX
0086b0d3 : PUSH ESI
0086b0d4 : PUSH EDI
0086b0d5 : MOV EAX,[0x00d66fa0]
0086b0da : XOR EAX,ESP
0086b0dc : PUSH EAX
0086b0dd : LEA EAX,[ESP + 0x70]
0086b0e1 : MOV FS:[0x0],EAX
0086b0e7 : MOV EBX,dword ptr [EBP + 0x8]
0086b0ea : XOR ESI,ESI
0086b0ec : MOV EDI,ECX
0086b0ee : CMP EBX,ESI
0086b0f0 : JNZ 0x0086b155
0086b0f2 : PUSH 0xc41610
0086b0f7 : LEA ECX,[ESP + 0x1c]
0086b0fb : CALL 0x00406460
0086b100 : MOV dword ptr [ESP + 0x78],ESI
0086b104 : MOV EAX,[0x00da98e8]
0086b109 : MOV ECX,dword ptr [EAX]
0086b10b : CMP ECX,ESI
0086b10d : JZ 0x0086b125
0086b10f : MOV EDX,dword ptr [ECX]
0086b111 : MOV EDX,dword ptr [EDX + 0x14]
0086b114 : LEA EAX,[ESP + 0x18]
0086b118 : PUSH EAX
0086b119 : PUSH 0x39e
0086b11e : PUSH 0xc41690
0086b123 : CALL EDX
0086b125 : MOV dword ptr [ESP + 0x78],0xffffffff
0086b12d : CMP dword ptr [ESP + 0x30],0x8
0086b132 : JC 0x0086b13d
0086b134 : MOV ECX,dword ptr [ESP + 0x1c]
0086b138 : CALL 0x006f04e0
0086b13d : XOR EAX,EAX
0086b13f : MOV dword ptr [ESP + 0x30],0x7
0086b147 : MOV dword ptr [ESP + 0x2c],ESI
0086b14b : MOV word ptr [ESP + 0x1c],AX
0086b150 : JMP 0x0086b407
0086b155 : CMP byte ptr [EDI + 0x3b0],0x0
0086b15c : JZ 0x0086b24d
0086b162 : MOV EBX,dword ptr [EDI + 0x448]
0086b168 : CMP EBX,ESI
0086b16a : JZ 0x0086b17f
0086b16c : PUSH EBX
0086b16d : CALL 0x00a684f0
0086b172 : MOV ECX,EBX
0086b174 : CALL 0x006f04e0
0086b17f : MOV EBX,dword ptr [EDI + 0x44c]
0086b185 : CMP EBX,ESI
0086b187 : JZ 0x0086b19c
0086b189 : PUSH EBX
0086b18a : CALL 0x00a684f0
0086b18f : MOV ECX,EBX
0086b191 : CALL 0x006f04e0
0086b19c : MOV EBX,dword ptr [EDI + 0x450]
0086b1a2 : CMP EBX,ESI
0086b1a4 : JZ 0x0086b1b9
0086b1a6 : PUSH EBX
0086b1a7 : CALL 0x00a684f0
0086b1ac : MOV ECX,EBX
0086b1ae : CALL 0x006f04e0
0086b1b9 : MOV EBX,dword ptr [EDI + 0x45c]
0086b1bf : SUB EBX,dword ptr [EDI + 0x458]
0086b1c5 : XOR ESI,ESI
0086b1c7 : SAR EBX,0x2
0086b1ca : TEST EBX,EBX
0086b1cc : JLE 0x0086b20a
0086b1ce : MOV EDI,EDI
0086b1d0 : MOV ECX,dword ptr [EDI + 0x458]
0086b1d6 : CMP dword ptr [ECX + ESI*0x4],0x0
0086b1da : LEA EAX,[ECX + ESI*0x4]
0086b1dd : JZ 0x0086b205
0086b1df : MOV EAX,dword ptr [EAX]
0086b1e1 : MOV dword ptr [ESP + 0x14],EAX
0086b1e5 : TEST EAX,EAX
0086b1e7 : JZ 0x0086b1f8
0086b1e9 : PUSH EAX
0086b1ea : CALL 0x00a684f0
0086b1ef : MOV ECX,dword ptr [ESP + 0x14]
0086b1f3 : CALL 0x006f04e0
0086b1f8 : MOV EDX,dword ptr [EDI + 0x458]
0086b1fe : MOV dword ptr [EDX + ESI*0x4],0x0
0086b205 : INC ESI
0086b206 : CMP ESI,EBX
0086b208 : JL 0x0086b1d0
0086b20a : MOV ECX,dword ptr [EDI + 0x45c]
0086b210 : MOV ESI,dword ptr [EDI + 0x458]
0086b216 : CMP ESI,ECX
0086b218 : JZ 0x0086b241
0086b21a : MOV EAX,ECX
0086b21c : SUB EAX,ECX
0086b21e : SAR EAX,0x2
0086b221 : LEA EDX,[EAX*0x4 + 0x0]
0086b228 : LEA EBX,[EDX + ESI*0x1]
0086b22b : TEST EAX,EAX
0086b22d : JLE 0x0086b23b
0086b22f : PUSH EDX
0086b230 : PUSH ECX
0086b231 : PUSH EDX
0086b232 : PUSH ESI
0086b233 : CALL 0x00634101
0086b238 : ADD ESP,0x10
0086b23b : MOV dword ptr [EDI + 0x45c],EBX
0086b241 : MOV EBX,dword ptr [EBP + 0x8]
0086b244 : MOV byte ptr [EDI + 0x3b0],0x0
0086b24b : XOR ESI,ESI
0086b24d : CMP dword ptr [EDI + 0x3e8],ESI
0086b253 : JZ 0x0086b26a
0086b255 : MOV ESI,dword ptr [0x00da98e8]
0086b25b : PUSH 0xc416e0
0086b260 : CALL 0x008018d0
0086b265 : ADD ESP,0x4
0086b268 : XOR ESI,ESI
0086b26a : MOV dword ptr [EDI + 0x3e8],EBX
0086b270 : MOV byte ptr [EBX + 0x2bf],0x1
0086b277 : MOV EAX,dword ptr [EDI + 0x8]
0086b27a : MOV EBX,dword ptr [0x00d7c54c]
0086b280 : LEA ECX,[ESP + 0x14]
0086b284 : MOV dword ptr [ESP + 0x14],EAX
0086b288 : PUSH ECX
0086b289 : LEA ECX,[EBX + 0x40]
0086b28c : LEA EAX,[ESP + 0x38]
0086b290 : CALL 0x004437f0
0086b295 : MOV EBX,dword ptr [EBX + 0x44]
0086b298 : MOV EAX,dword ptr [ESP + 0x34]
0086b29c : CMP EAX,EBX
0086b29e : JZ 0x0086b309
0086b2a0 : MOV EAX,dword ptr [EAX + 0x10]
0086b2a3 : CMP EAX,ESI
0086b2a5 : JZ 0x0086b309
0086b2a7 : MOV EDX,dword ptr [EAX + 0xb8]
0086b2ad : CMP EDX,ESI
0086b2af : JNZ 0x0086b2b5
0086b2b1 : LEA EDX,[ESP + 0x50]
0086b2b5 : MOVZX ECX,byte ptr [EAX + 0x54]
0086b2b9 : MOVZX ESI,word ptr [EDX + ECX*0x2 + 0x74]
0086b2be : MOV EDX,dword ptr [EAX + 0xb8]
0086b2c4 : TEST EDX,EDX
0086b2c6 : JNZ 0x0086b2cc
0086b2c8 : LEA EDX,[ESP + 0x50]
0086b2cc : MOVZX ECX,word ptr [EDX + ECX*0x2 + 0x2c]
0086b2d1 : MOVZX EDX,SI
0086b2d4 : MOVZX ECX,CX
0086b2d7 : CVTSI2SS XMM0,EDX
0086b2db : CVTSI2SS XMM1,ECX
0086b2df : DIVSS XMM0,XMM1
0086b2e3 : MOVSS dword ptr [EDI + 0x46c],XMM0
0086b2eb : MOV ECX,dword ptr [EAX + 0x64]
0086b2ee : MOV dword ptr [EDI + 0x3a4],ECX
0086b2f4 : MOV dword ptr [EDI + 0x3a8],ECX
0086b2fa : MOV EDX,dword ptr [EAX + 0x4c]
0086b2fd : SHR EDX,0x18
0086b300 : AND DL,0x1
0086b303 : MOV byte ptr [EDI + 0x438],DL
0086b309 : MOV ESI,dword ptr [EDI + 0x3e8]
0086b30f : CALL 0x007d8b50
0086b314 : MOV EAX,dword ptr [EDI + 0x3e8]
0086b31a : MOV EAX,dword ptr [EAX + 0x28c]
0086b320 : XOR ECX,ECX
0086b322 : PUSH 0x9
0086b324 : MOV word ptr [ESP + 0x20],CX
0086b329 : MOV ESI,0x7
0086b32e : XOR EBX,EBX
0086b330 : PUSH 0xc4167c
0086b335 : LEA ECX,[ESP + 0x20]
0086b339 : MOV dword ptr [EDI + 0x410],EAX
0086b33f : MOV dword ptr [ESP + 0x38],ESI
0086b343 : MOV dword ptr [ESP + 0x34],EBX
0086b347 : CALL 0x00406360
0086b34c : MOV dword ptr [ESP + 0x78],0x1
0086b354 : XORPS XMM0,XMM0
0086b357 : MOVSS XMM1,dword ptr [0x00c10fc4]
0086b35f : MOV ECX,dword ptr [EDI + 0x3e8]
0086b365 : LEA EAX,[ESP + 0x38]
0086b369 : PUSH EAX
0086b36a : LEA EAX,[ESP + 0x54]
0086b36e : PUSH EAX
0086b36f : LEA EAX,[ESP + 0x4c]
0086b373 : PUSH EAX
0086b374 : MOVSS dword ptr [ESP + 0x44],XMM1
0086b37a : MOVSS dword ptr [ESP + 0x48],XMM1
0086b380 : MOVSS dword ptr [ESP + 0x4c],XMM1
0086b386 : MOVSS dword ptr [ESP + 0x5c],XMM0
0086b38c : MOVSS dword ptr [ESP + 0x60],XMM0
0086b392 : MOVSS dword ptr [ESP + 0x64],XMM0
0086b398 : MOVSS dword ptr [ESP + 0x68],XMM1
0086b39e : MOVSS dword ptr [ESP + 0x50],XMM0
0086b3a4 : MOVSS dword ptr [ESP + 0x54],XMM0
0086b3aa : MOVSS dword ptr [ESP + 0x58],XMM0
0086b3b0 : MOV EDX,dword ptr [ECX]
0086b3b2 : MOV EDX,dword ptr [EDX + 0x20]
0086b3b5 : LEA EAX,[ESP + 0x24]
0086b3b9 : PUSH EAX
0086b3ba : CALL EDX
0086b3bc : MOV dword ptr [EDI + 0x3f0],EAX
0086b3c2 : MOV dword ptr [ESP + 0x78],0xffffffff
0086b3ca : CMP dword ptr [ESP + 0x30],0x8
0086b3cf : JC 0x0086b3da
0086b3d1 : MOV ECX,dword ptr [ESP + 0x1c]
0086b3d5 : CALL 0x006f04e0
0086b3da : MOV ECX,dword ptr [EDI + 0x3f0]
0086b3e0 : XOR EAX,EAX
0086b3e2 : MOV EDX,0x509
0086b3e7 : MOV byte ptr [ECX + 0x25a],AL
0086b3ed : MOV dword ptr [ESP + 0x30],ESI
0086b3f1 : MOV dword ptr [ESP + 0x2c],EBX
0086b3f5 : MOV word ptr [ESP + 0x1c],AX
0086b3fa : CMP word ptr [EDI + 0xa],DX
0086b3fe : JNZ 0x0086b407
0086b400 : MOV byte ptr [EDI + 0x3b1],0x1
0086b407 : MOV ECX,dword ptr [ESP + 0x70]
0086b40b : MOV dword ptr FS:[0x0],ECX
0086b412 : POP ECX
0086b413 : POP EDI
0086b414 : POP ESI
0086b415 : POP EBX
0086b416 : MOV ECX,dword ptr [ESP + 0x58]
0086b41a : XOR ECX,ESP
0086b41c : CALL 0x00633e6b
0086b421 : MOV ESP,EBP
0086b423 : POP EBP
0086b424 : RET 0x4
