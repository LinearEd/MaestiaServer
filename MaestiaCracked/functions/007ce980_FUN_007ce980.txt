PROGRAM  : Maestia.exe
FUNCTION : FUN_007ce980
ENTRY    : 007ce980
BODY     : [[007ce980, 007ceadc]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007ce980(undefined4 param_1)

{
  undefined1 uVar1;
  uint uVar2;
  int iVar3;
  undefined4 in_ECX;
  int *in_EDX;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b31e8b;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (in_EDX[2] != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(in_EDX[2] + 4));
  }
  local_8 = 0;
  FUN_0044f270(in_EDX + 0xc,&local_14,in_ECX);
  if (local_14 == in_EDX[0xe]) {
    local_14 = FUN_006f0760(0x324,".\\World\\AvaNode.cpp",0x53c,0,uVar2);
    local_8._0_1_ = 1;
    if (local_14 == 0) {
      iVar3 = 0;
    }
    else {
      iVar3 = FUN_00797d20(local_14,param_1);
    }
    local_8._0_1_ = 0;
    uVar1 = (undefined1)local_8;
    local_8._0_1_ = 0;
    if (iVar3 == 0) {
      FUN_00406460(L"CreateChildFxRayNode AvaFxRayNode Create Fail");
      local_8._0_1_ = 2;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaLib::AvaNode::CreateChildFxRayNode",0x540,local_34);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_1c = 7;
      local_20 = 0;
      local_30 = 0;
      local_8 = 0xffffffff;
      if (in_EDX[2] != 0) {
        LeaveCriticalSection((LPCRITICAL_SECTION)(in_EDX[2] + 4));
      }
      ExceptionList = local_10;
      return 0;
    }
    local_8._0_1_ = uVar1;
    (**(code **)(*in_EDX + 0x24))(iVar3);
  }
  else {
    iVar3 = *(int *)(local_14 + 0x24);
  }
  local_8 = 0xffffffff;
  if (in_EDX[2] != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(in_EDX[2] + 4));
  }
  ExceptionList = local_10;
  return iVar3;
}



============================================================
DISASSEMBLY
============================================================
007ce980 : PUSH EBP
007ce981 : MOV EBP,ESP
007ce983 : PUSH -0x1
007ce985 : PUSH 0xb31e8b
007ce98a : MOV EAX,FS:[0x0]
007ce990 : PUSH EAX
007ce991 : SUB ESP,0x28
007ce994 : PUSH EBX
007ce995 : PUSH ESI
007ce996 : PUSH EDI
007ce997 : MOV EAX,[0x00d66fa0]
007ce99c : XOR EAX,EBP
007ce99e : PUSH EAX
007ce99f : LEA EAX,[EBP + -0xc]
007ce9a2 : MOV FS:[0x0],EAX
007ce9a8 : MOV EDI,ECX
007ce9aa : MOV ESI,EDX
007ce9ac : MOV EAX,dword ptr [ESI + 0x8]
007ce9af : XOR EBX,EBX
007ce9b1 : MOV dword ptr [EBP + -0x14],ESI
007ce9b4 : CMP EAX,EBX
007ce9b6 : JZ 0x007ce9c2
007ce9b8 : ADD EAX,0x4
007ce9bb : PUSH EAX
007ce9bc : CALL dword ptr [0x00b85118]
007ce9c2 : MOV dword ptr [EBP + -0x4],EBX
007ce9c5 : PUSH EDI
007ce9c6 : LEA EAX,[EBP + -0x10]
007ce9c9 : PUSH EAX
007ce9ca : LEA ECX,[ESI + 0x30]
007ce9cd : PUSH ECX
007ce9ce : CALL 0x0044f270
007ce9d3 : MOV EAX,dword ptr [ESI + 0x38]
007ce9d6 : MOV ECX,dword ptr [EBP + -0x10]
007ce9d9 : CMP ECX,EAX
007ce9db : JZ 0x007ce9e5
007ce9dd : MOV EDI,dword ptr [ECX + 0x24]
007ce9e0 : JMP 0x007ceaaf
007ce9e5 : PUSH EBX
007ce9e6 : PUSH 0x53c
007ce9eb : PUSH 0xc1ef2c
007ce9f0 : PUSH 0x324
007ce9f5 : CALL 0x006f0760
007ce9fa : ADD ESP,0x10
007ce9fd : MOV dword ptr [EBP + -0x10],EAX
007cea00 : MOV byte ptr [EBP + -0x4],0x1
007cea04 : CMP EAX,EBX
007cea06 : JZ 0x007cea18
007cea08 : MOV EDX,dword ptr [EBP + 0x8]
007cea0b : PUSH EDX
007cea0c : PUSH EAX
007cea0d : MOV EDX,EDI
007cea0f : CALL 0x00797d20
007cea14 : MOV EDI,EAX
007cea16 : JMP 0x007cea1a
007cea18 : XOR EDI,EDI
007cea1a : MOV byte ptr [EBP + -0x4],BL
007cea1d : CMP EDI,EBX
007cea1f : JNZ 0x007ceaa5
007cea25 : PUSH 0xc1f488
007cea2a : LEA ECX,[EBP + -0x30]
007cea2d : CALL 0x00406460
007cea32 : MOV byte ptr [EBP + -0x4],0x2
007cea36 : MOV EAX,[0x00da98e8]
007cea3b : MOV ECX,dword ptr [EAX]
007cea3d : CMP ECX,EBX
007cea3f : JZ 0x007cea56
007cea41 : MOV EDX,dword ptr [ECX]
007cea43 : MOV EDX,dword ptr [EDX + 0x14]
007cea46 : LEA EAX,[EBP + -0x30]
007cea49 : PUSH EAX
007cea4a : PUSH 0x540
007cea4f : PUSH 0xc1f4f8
007cea54 : CALL EDX
007cea56 : MOV byte ptr [EBP + -0x4],BL
007cea59 : CMP dword ptr [EBP + -0x18],0x8
007cea5d : JC 0x007cea67
007cea5f : MOV ECX,dword ptr [EBP + -0x2c]
007cea62 : CALL 0x006f04e0
007cea67 : XOR EAX,EAX
007cea69 : MOV dword ptr [EBP + -0x18],0x7
007cea70 : MOV dword ptr [EBP + -0x1c],EBX
007cea73 : MOV word ptr [EBP + -0x2c],AX
007cea77 : MOV dword ptr [EBP + -0x4],0xffffffff
007cea7e : MOV ESI,dword ptr [ESI + 0x8]
007cea81 : CMP ESI,EBX
007cea83 : JZ 0x007cea8f
007cea85 : ADD ESI,0x4
007cea88 : PUSH ESI
007cea89 : CALL dword ptr [0x00b8511c]
007cea8f : XOR EAX,EAX
007cea91 : MOV ECX,dword ptr [EBP + -0xc]
007cea94 : MOV dword ptr FS:[0x0],ECX
007cea9b : POP ECX
007cea9c : POP EDI
007cea9d : POP ESI
007cea9e : POP EBX
007cea9f : MOV ESP,EBP
007ceaa1 : POP EBP
007ceaa2 : RET 0x4
007ceaa5 : MOV EDX,dword ptr [ESI]
007ceaa7 : MOV EAX,dword ptr [EDX + 0x24]
007ceaaa : PUSH EDI
007ceaab : MOV ECX,ESI
007ceaad : CALL EAX
007ceaaf : MOV dword ptr [EBP + -0x4],0xffffffff
007ceab6 : MOV ESI,dword ptr [ESI + 0x8]
007ceab9 : CMP ESI,EBX
007ceabb : JZ 0x007ceac7
007ceabd : ADD ESI,0x4
007ceac0 : PUSH ESI
007ceac1 : CALL dword ptr [0x00b8511c]
007ceac7 : MOV EAX,EDI
007ceac9 : MOV ECX,dword ptr [EBP + -0xc]
007ceacc : MOV dword ptr FS:[0x0],ECX
007cead3 : POP ECX
007cead4 : POP EDI
007cead5 : POP ESI
007cead6 : POP EBX
007cead7 : MOV ESP,EBP
007cead9 : POP EBP
007ceada : RET 0x4
