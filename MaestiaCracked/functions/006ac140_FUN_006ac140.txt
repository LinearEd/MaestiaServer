PROGRAM  : Maestia.exe
FUNCTION : FUN_006ac140
ENTRY    : 006ac140
BODY     : [[006ac140, 006ac2f7]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006ac140(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int unaff_ESI;
  
  iVar8 = FUN_006ac0d0();
  iVar9 = FUN_006ac0d0();
  if ((-1 < iVar8) && (-1 < iVar9)) {
    if (*(char *)(unaff_ESI + 0x4a) != '\0') {
      iVar1 = *(int *)(unaff_ESI + 8);
      iVar2 = **(int **)(iVar1 + 0x9c);
      iVar10 = FUN_0068a450(iVar2,2);
      if (iVar10 != 0) {
        return iVar10;
      }
      piVar3 = *(int **)(iVar2 + 0x58);
      *piVar3 = iVar8;
      piVar3[2] = 0;
      piVar3[3] = 0;
      *(undefined2 *)(piVar3 + 1) = 0x202;
      piVar3[8] = iVar9;
      *(undefined2 *)(piVar3 + 9) = 2;
      piVar3[10] = param_1 >> 0x10;
      piVar3[0xb] = param_2 >> 0x10;
      *(undefined4 *)(iVar1 + 0x80) = 2;
      *(undefined4 *)(iVar1 + 0x84) = *(undefined4 *)(iVar2 + 0x34);
      *(undefined4 *)(iVar1 + 0x48) = 0x636f6d70;
      *(undefined4 *)(iVar2 + 0x54) = 2;
    }
    FUN_006863a0(*(undefined4 *)(unaff_ESI + 0xc));
    iVar8 = FUN_006ac110(iVar8);
    if (iVar8 == 0) {
      iVar8 = FUN_006ac300();
      if (iVar8 != 0) {
        return iVar8;
      }
      FUN_006ac130();
    }
    uVar4 = *(undefined4 *)(unaff_ESI + 0x34);
    uVar5 = *(undefined4 *)(unaff_ESI + 0x2c);
    uVar6 = *(undefined4 *)(unaff_ESI + 0x30);
    uVar7 = *(undefined4 *)(unaff_ESI + 0x28);
    *(undefined4 *)(unaff_ESI + 0x28) = 0;
    *(undefined4 *)(unaff_ESI + 0x2c) = 0;
    *(int *)(unaff_ESI + 0x20) = param_1;
    *(int *)(unaff_ESI + 0x24) = param_2;
    iVar8 = FUN_006ac110(iVar9);
    if (iVar8 == 0) {
      iVar8 = FUN_006ac300();
      if (iVar8 != 0) {
        return iVar8;
      }
      FUN_006ac130();
      iVar8 = 0;
    }
    *(undefined4 *)(unaff_ESI + 0x2c) = uVar5;
    *(undefined4 *)(unaff_ESI + 0x28) = uVar7;
    *(undefined4 *)(unaff_ESI + 0x30) = uVar6;
    *(undefined4 *)(unaff_ESI + 0x34) = uVar4;
    *(undefined4 *)(unaff_ESI + 0x20) = 0;
    *(undefined4 *)(unaff_ESI + 0x24) = 0;
    return iVar8;
  }
  return 0xa0;
}



============================================================
DISASSEMBLY
============================================================
006ac140 : SUB ESP,0x1c
006ac143 : PUSH EBX
006ac144 : MOV EBX,dword ptr [ESI + 0x4]
006ac147 : PUSH EBP
006ac148 : PUSH EDI
006ac149 : MOV EDI,dword ptr [EBX + 0x2b8]
006ac14f : MOV ECX,EDI
006ac151 : MOV dword ptr [ESP + 0x18],EBX
006ac155 : CALL 0x006ac0d0
006ac15a : MOV EBP,EAX
006ac15c : MOV EAX,dword ptr [ESP + 0x34]
006ac160 : MOV ECX,EDI
006ac162 : MOV dword ptr [ESP + 0x10],EBP
006ac166 : CALL 0x006ac0d0
006ac16b : MOV dword ptr [ESP + 0x14],EAX
006ac16f : TEST EBP,EBP
006ac171 : JL 0x006ac2ec
006ac177 : TEST EAX,EAX
006ac179 : JL 0x006ac2ec
006ac17f : CMP byte ptr [ESI + 0x4a],0x0
006ac183 : JZ 0x006ac20c
006ac189 : MOV EBP,dword ptr [ESI + 0x8]
006ac18c : MOV EAX,dword ptr [EBP + 0x9c]
006ac192 : MOV EBX,dword ptr [EAX]
006ac194 : PUSH 0x2
006ac196 : PUSH EBX
006ac197 : CALL 0x0068a450
006ac19c : MOV EDI,EAX
006ac19e : XOR ECX,ECX
006ac1a0 : ADD ESP,0x8
006ac1a3 : CMP EDI,ECX
006ac1a5 : JNZ 0x006ac2e3
006ac1ab : MOV EAX,dword ptr [EBX + 0x58]
006ac1ae : MOV EDX,dword ptr [ESP + 0x10]
006ac1b2 : MOV dword ptr [EAX],EDX
006ac1b4 : MOV dword ptr [EAX + 0x8],ECX
006ac1b7 : MOV dword ptr [EAX + 0xc],ECX
006ac1ba : MOV ECX,dword ptr [ESP + 0x14]
006ac1be : ADD EAX,0x20
006ac1c1 : MOV EDX,0x202
006ac1c6 : MOV word ptr [EAX + -0x1c],DX
006ac1ca : MOV dword ptr [EAX],ECX
006ac1cc : MOV ECX,0x2
006ac1d1 : MOV EDX,ECX
006ac1d3 : MOV word ptr [EAX + 0x4],DX
006ac1d7 : MOV EDX,dword ptr [ESP + 0x2c]
006ac1db : SAR EDX,0x10
006ac1de : MOV dword ptr [EAX + 0x8],EDX
006ac1e1 : MOV EDX,dword ptr [ESP + 0x30]
006ac1e5 : SAR EDX,0x10
006ac1e8 : MOV dword ptr [EAX + 0xc],EDX
006ac1eb : MOV dword ptr [EBP + 0x80],ECX
006ac1f1 : MOV EAX,dword ptr [EBX + 0x34]
006ac1f4 : MOV dword ptr [EBP + 0x84],EAX
006ac1fa : MOV dword ptr [EBP + 0x48],0x636f6d70
006ac201 : MOV EBP,dword ptr [ESP + 0x10]
006ac205 : MOV dword ptr [EBX + 0x54],ECX
006ac208 : MOV EBX,dword ptr [ESP + 0x18]
006ac20c : MOV ECX,dword ptr [ESI + 0xc]
006ac20f : PUSH ECX
006ac210 : CALL 0x006863a0
006ac215 : PUSH EBP
006ac216 : LEA ECX,[ESP + 0x18]
006ac21a : LEA EDX,[ESP + 0x14]
006ac21e : MOV EAX,EBX
006ac220 : CALL 0x006ac110
006ac225 : ADD ESP,0x8
006ac228 : TEST EAX,EAX
006ac22a : JNZ 0x006ac254
006ac22c : MOV EDX,dword ptr [ESP + 0x10]
006ac230 : MOV EAX,dword ptr [ESP + 0xc]
006ac234 : PUSH EDX
006ac235 : PUSH EAX
006ac236 : PUSH ESI
006ac237 : CALL 0x006ac300
006ac23c : MOV EDI,EAX
006ac23e : ADD ESP,0xc
006ac241 : TEST EDI,EDI
006ac243 : JNZ 0x006ac2e3
006ac249 : LEA ECX,[ESP + 0xc]
006ac24d : MOV EAX,EBX
006ac24f : CALL 0x006ac130
006ac254 : MOV EAX,dword ptr [ESI + 0x34]
006ac257 : MOV ECX,dword ptr [ESI + 0x2c]
006ac25a : MOV EDX,dword ptr [ESI + 0x30]
006ac25d : MOV EBP,dword ptr [ESI + 0x28]
006ac260 : MOV dword ptr [ESP + 0x1c],EAX
006ac264 : XOR EAX,EAX
006ac266 : MOV dword ptr [ESP + 0x24],ECX
006ac26a : MOV ECX,dword ptr [ESP + 0x2c]
006ac26e : MOV dword ptr [ESP + 0x18],EDX
006ac272 : MOV EDX,dword ptr [ESP + 0x30]
006ac276 : MOV dword ptr [ESI + 0x28],EAX
006ac279 : MOV dword ptr [ESI + 0x2c],EAX
006ac27c : MOV EAX,dword ptr [ESP + 0x14]
006ac280 : MOV dword ptr [ESI + 0x20],ECX
006ac283 : MOV dword ptr [ESI + 0x24],EDX
006ac286 : PUSH EAX
006ac287 : LEA ECX,[ESP + 0x14]
006ac28b : LEA EDX,[ESP + 0x10]
006ac28f : MOV EAX,EBX
006ac291 : CALL 0x006ac110
006ac296 : MOV EDI,EAX
006ac298 : ADD ESP,0x4
006ac29b : TEST EDI,EDI
006ac29d : JNZ 0x006ac2c3
006ac29f : MOV ECX,dword ptr [ESP + 0x10]
006ac2a3 : MOV EDX,dword ptr [ESP + 0xc]
006ac2a7 : PUSH ECX
006ac2a8 : PUSH EDX
006ac2a9 : PUSH ESI
006ac2aa : CALL 0x006ac300
006ac2af : MOV EDI,EAX
006ac2b1 : ADD ESP,0xc
006ac2b4 : TEST EDI,EDI
006ac2b6 : JNZ 0x006ac2e3
006ac2b8 : LEA ECX,[ESP + 0xc]
006ac2bc : MOV EAX,EBX
006ac2be : CALL 0x006ac130
006ac2c3 : MOV EAX,dword ptr [ESP + 0x24]
006ac2c7 : MOV ECX,dword ptr [ESP + 0x18]
006ac2cb : MOV EDX,dword ptr [ESP + 0x1c]
006ac2cf : MOV dword ptr [ESI + 0x2c],EAX
006ac2d2 : XOR EAX,EAX
006ac2d4 : MOV dword ptr [ESI + 0x28],EBP
006ac2d7 : MOV dword ptr [ESI + 0x30],ECX
006ac2da : MOV dword ptr [ESI + 0x34],EDX
006ac2dd : MOV dword ptr [ESI + 0x20],EAX
006ac2e0 : MOV dword ptr [ESI + 0x24],EAX
006ac2e3 : MOV EAX,EDI
006ac2e5 : POP EDI
006ac2e6 : POP EBP
006ac2e7 : POP EBX
006ac2e8 : ADD ESP,0x1c
006ac2eb : RET
006ac2ec : POP EDI
006ac2ed : POP EBP
006ac2ee : MOV EAX,0xa0
006ac2f3 : POP EBX
006ac2f4 : ADD ESP,0x1c
006ac2f7 : RET
