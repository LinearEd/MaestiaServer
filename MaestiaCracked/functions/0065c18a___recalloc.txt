PROGRAM  : Maestia.exe
FUNCTION : __recalloc
ENTRY    : 0065c18a
BODY     : [[0065c18a, 0065c204]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __recalloc
   
   Library: Visual Studio 2008 Release */

void * __cdecl __recalloc(void *_Memory,size_t _Count,size_t _Size)

{
  int *piVar1;
  void *pvVar2;
  uint _NewSize;
  size_t sVar3;
  
  sVar3 = 0;
  if ((_Count == 0) || (_Size <= 0xffffffe0 / _Count)) {
    _NewSize = _Count * _Size;
    if (_Memory != (void *)0x0) {
      sVar3 = __msize(_Memory);
    }
    pvVar2 = _realloc(_Memory,_NewSize);
    if ((pvVar2 != (void *)0x0) && (sVar3 < _NewSize)) {
      _memset((void *)(sVar3 + (int)pvVar2),0,_NewSize - sVar3);
    }
  }
  else {
    piVar1 = __errno();
    *piVar1 = 0xc;
    __invalid_parameter(0,0,0,0,0);
    pvVar2 = (void *)0x0;
  }
  return pvVar2;
}



============================================================
DISASSEMBLY
============================================================
0065c18a : MOV EDI,EDI
0065c18c : PUSH EBP
0065c18d : MOV EBP,ESP
0065c18f : MOV ECX,dword ptr [EBP + 0xc]
0065c192 : PUSH EBX
0065c193 : XOR EBX,EBX
0065c195 : CMP ECX,EBX
0065c197 : JBE 0x0065c1c1
0065c199 : PUSH -0x20
0065c19b : XOR EDX,EDX
0065c19d : POP EAX
0065c19e : DIV ECX
0065c1a0 : CMP EAX,dword ptr [EBP + 0x10]
0065c1a3 : JNC 0x0065c1c1
0065c1a5 : CALL 0x0063ab82
0065c1aa : PUSH EBX
0065c1ab : PUSH EBX
0065c1ac : PUSH EBX
0065c1ad : PUSH EBX
0065c1ae : PUSH EBX
0065c1af : MOV dword ptr [EAX],0xc
0065c1b5 : CALL 0x006372b8
0065c1ba : ADD ESP,0x14
0065c1bd : XOR EAX,EAX
0065c1bf : JMP 0x0065c202
0065c1c1 : IMUL ECX,dword ptr [EBP + 0x10]
0065c1c5 : PUSH ESI
0065c1c6 : PUSH EDI
0065c1c7 : MOV ESI,ECX
0065c1c9 : CMP dword ptr [EBP + 0x8],EBX
0065c1cc : JZ 0x0065c1d9
0065c1ce : PUSH dword ptr [EBP + 0x8]
0065c1d1 : CALL 0x0064c183
0065c1d6 : POP ECX
0065c1d7 : MOV EBX,EAX
0065c1d9 : PUSH ESI
0065c1da : PUSH dword ptr [EBP + 0x8]
0065c1dd : CALL 0x0063dfca
0065c1e2 : MOV EDI,EAX
0065c1e4 : POP ECX
0065c1e5 : POP ECX
0065c1e6 : TEST EDI,EDI
0065c1e8 : JZ 0x0065c1fe
0065c1ea : CMP EBX,ESI
0065c1ec : JNC 0x0065c1fe
0065c1ee : SUB ESI,EBX
0065c1f0 : PUSH ESI
0065c1f1 : PUSH 0x0
0065c1f3 : ADD EBX,EDI
0065c1f5 : PUSH EBX
0065c1f6 : CALL 0x0063b700
0065c1fb : ADD ESP,0xc
0065c1fe : MOV EAX,EDI
0065c200 : POP EDI
0065c201 : POP ESI
0065c202 : POP EBX
0065c203 : POP EBP
0065c204 : RET
