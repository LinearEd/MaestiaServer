PROGRAM  : Maestia.exe
FUNCTION : FUN_00434950
ENTRY    : 00434950
BODY     : [[00434950, 004349f4]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00434950(int param_1)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  bool bVar4;
  uint uVar5;
  int in_EDX;
  bool bVar6;
  
  bVar4 = false;
  uVar5 = 0;
  if (*(uint *)(in_EDX + 0x24) < *(uint *)(in_EDX + 0x20)) {
    do {
      if (bVar4) break;
      if (0x7ff < uVar5) goto LAB_004349df;
      iVar3 = *(int *)(in_EDX + 0x24);
      pcVar1 = (char *)(*(int *)(in_EDX + 0x1c) + iVar3);
      cVar2 = *pcVar1;
      if ((((cVar2 == -1) || (cVar2 == '\0')) || (cVar2 == '\n')) || (cVar2 == '\r')) {
        bVar4 = true;
        if (cVar2 == '\n') {
          if (iVar3 + 1U < *(uint *)(in_EDX + 0x20)) {
            bVar6 = pcVar1[1] == '\r';
LAB_004349ba:
            if (bVar6) {
              *(int *)(in_EDX + 0x24) = iVar3 + 1;
            }
          }
        }
        else if ((cVar2 == '\r') && (iVar3 + 1U < *(uint *)(in_EDX + 0x20))) {
          bVar6 = pcVar1[1] == '\n';
          goto LAB_004349ba;
        }
      }
      else {
        *(char *)(uVar5 + param_1) = cVar2;
        uVar5 = uVar5 + 1;
      }
      *(int *)(in_EDX + 0x24) = *(int *)(in_EDX + 0x24) + 1;
    } while (*(uint *)(in_EDX + 0x24) < *(uint *)(in_EDX + 0x20));
    if (0x7ff < uVar5) {
LAB_004349df:
      *(undefined1 *)(param_1 + 0x7ff) = 0;
      return 0x7ff;
    }
  }
  *(undefined1 *)(uVar5 + param_1) = 0;
  return uVar5;
}



============================================================
DISASSEMBLY
============================================================
00434950 : PUSH EBP
00434951 : MOV EBP,ESP
00434953 : MOV ECX,dword ptr [EDX + 0x24]
00434956 : PUSH EBX
00434957 : PUSH ESI
00434958 : XOR BL,BL
0043495a : XOR EAX,EAX
0043495c : PUSH EDI
0043495d : CMP ECX,dword ptr [EDX + 0x20]
00434960 : JNC 0x004349d1
00434962 : TEST BL,BL
00434964 : JNZ 0x004349ca
00434966 : CMP EAX,0x800
0043496b : JNC 0x004349df
0043496d : MOV ECX,dword ptr [EDX + 0x1c]
00434970 : MOV ESI,dword ptr [EDX + 0x24]
00434973 : LEA EDI,[ECX + ESI*0x1]
00434976 : MOV CL,byte ptr [EDI]
00434978 : CMP CL,0xff
0043497b : JZ 0x00434994
0043497d : TEST CL,CL
0043497f : JZ 0x00434994
00434981 : CMP CL,0xa
00434984 : JZ 0x00434994
00434986 : CMP CL,0xd
00434989 : JZ 0x00434994
0043498b : MOV ESI,dword ptr [EBP + 0x8]
0043498e : MOV byte ptr [EAX + ESI*0x1],CL
00434991 : INC EAX
00434992 : JMP 0x004349bf
00434994 : MOV BL,0x1
00434996 : CMP CL,0xa
00434999 : JNZ 0x004349a9
0043499b : LEA ECX,[ESI + 0x1]
0043499e : CMP ECX,dword ptr [EDX + 0x20]
004349a1 : JNC 0x004349bf
004349a3 : CMP byte ptr [EDI + 0x1],0xd
004349a7 : JMP 0x004349ba
004349a9 : CMP CL,0xd
004349ac : JNZ 0x004349bf
004349ae : LEA ECX,[ESI + 0x1]
004349b1 : CMP ECX,dword ptr [EDX + 0x20]
004349b4 : JNC 0x004349bf
004349b6 : CMP byte ptr [EDI + 0x1],0xa
004349ba : JNZ 0x004349bf
004349bc : MOV dword ptr [EDX + 0x24],ECX
004349bf : INC dword ptr [EDX + 0x24]
004349c2 : MOV ECX,dword ptr [EDX + 0x24]
004349c5 : CMP ECX,dword ptr [EDX + 0x20]
004349c8 : JC 0x00434962
004349ca : CMP EAX,0x800
004349cf : JNC 0x004349df
004349d1 : MOV EDX,dword ptr [EBP + 0x8]
004349d4 : POP EDI
004349d5 : POP ESI
004349d6 : MOV byte ptr [EAX + EDX*0x1],0x0
004349da : POP EBX
004349db : POP EBP
004349dc : RET 0x4
004349df : MOV ECX,dword ptr [EBP + 0x8]
004349e2 : POP EDI
004349e3 : POP ESI
004349e4 : MOV EAX,0x7ff
004349e9 : MOV byte ptr [ECX + 0x7ff],0x0
004349f0 : POP EBX
004349f1 : POP EBP
004349f2 : RET 0x4
