PROGRAM  : Maestia.exe
FUNCTION : FUN_00769d20
ENTRY    : 00769d20
BODY     : [[00769d20, 00769f07] [00769f10, 00769ff1]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00769d20(int param_1,ushort param_2)

{
  char cVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 uVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  ushort *puVar12;
  uint local_40;
  undefined1 local_3c [4];
  undefined4 *local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined1 local_2c [4];
  undefined4 *local_28;
  undefined4 local_24;
  undefined4 local_20;
  int local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b36d20;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 0x1ec) == 0) {
    uVar6 = FUN_00404750(L"[AvaMergeMeshEntity::_MergeBone] m_pSkeletonInst == NULL",
                         DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x10))(uVar6);
    }
    local_8 = 0xffffffff;
    if (7 < local_40) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    ExceptionList = local_10;
    return 0;
  }
  FUN_00445580(local_3c,*(int *)(param_1 + 0x1ec) + 8);
  local_8 = 1;
  *(undefined2 *)(param_1 + 0x224) = (undefined2)local_34;
  local_14 = 0;
  iVar11 = *(int *)(param_1 + 0x31c) - *(int *)(param_1 + 0x318) >> 2;
  if (param_2 == 1) {
    local_14 = *(int *)(param_1 + 0x32c) - *(int *)(param_1 + 0x328) >> 2;
    iVar11 = iVar11 + local_14;
  }
  local_1c = iVar11;
  FUN_004bd300();
  if (local_14 < iVar11) {
    local_20 = 0;
    local_24 = 0;
    local_18 = 0;
    do {
      iVar11 = 0;
      param_2 = 0;
      local_28 = (undefined4 *)FUN_006f0760(0x24,"",0,(DAT_01725270 >> 3 & 1) == 0);
      local_8._0_1_ = 2;
      if (local_28 != (undefined4 *)0x0) {
        iVar11 = FUN_004896c0(local_28);
      }
      local_8 = CONCAT31(local_8._1_3_,1);
      *(int *)(*(int *)(param_1 + 0x328) + local_14 * 4) = iVar11;
      iVar2 = *(int *)(iVar11 + 8);
      uVar7 = *(ushort *)(*(int *)(param_1 + 0x1ec) + 0x48) + 1;
      uVar9 = iVar2 - *(int *)(iVar11 + 4) >> 2;
      if (uVar9 < uVar7) {
        FUN_004452d0(iVar11,iVar2,uVar7 - uVar9,&local_20);
      }
      else if (uVar7 < uVar9) {
        FUN_00459700(iVar11,local_2c,*(int *)(iVar11 + 4) + uVar7 * 4,iVar2);
      }
      iVar2 = *(int *)(iVar11 + 0x18);
      uVar7 = iVar2 - *(int *)(iVar11 + 0x14) >> 2;
      if (uVar7 < local_34) {
        FUN_0047bf80(iVar11 + 0x10,iVar2,local_34 - uVar7,&local_24);
      }
      else if (local_34 < uVar7) {
        FUN_00459700(iVar11 + 0x10,local_30,*(int *)(iVar11 + 0x14) + local_34 * 4,iVar2);
      }
      puVar3 = (undefined4 *)*local_38;
      local_28 = local_38;
      while (puVar3 != local_38) {
        iVar2 = *(int *)(local_18 + *(int *)(param_1 + 0x318));
        iVar10 = 0;
        iVar8 = *(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) >> 1;
        if (0 < iVar8) {
          puVar12 = *(ushort **)(iVar2 + 4);
          do {
            if (*puVar12 == *(ushort *)(puVar3 + 3)) {
              uVar7 = (uint)param_2;
              *(float *)(*(int *)(iVar11 + 4) + (uint)*(ushort *)(puVar3 + 3) * 4) = (float)uVar7;
              param_2 = param_2 + 1;
              *(undefined4 *)(*(int *)(iVar11 + 0x14) + uVar7 * 4) = puVar3[4];
              break;
            }
            iVar10 = iVar10 + 1;
            puVar12 = puVar12 + 1;
          } while (iVar10 < iVar8);
        }
        if (*(char *)((int)puVar3 + 0x15) == '\0') {
          puVar4 = (undefined4 *)puVar3[2];
          if (*(char *)((int)puVar4 + 0x15) == '\0') {
            cVar1 = *(char *)((int)*puVar4 + 0x15);
            puVar3 = puVar4;
            puVar4 = (undefined4 *)*puVar4;
            while (cVar1 == '\0') {
              cVar1 = *(char *)((int)*puVar4 + 0x15);
              puVar3 = puVar4;
              puVar4 = (undefined4 *)*puVar4;
            }
          }
          else {
            cVar1 = *(char *)((int)puVar3[1] + 0x15);
            puVar5 = (undefined4 *)puVar3[1];
            puVar4 = puVar3;
            while ((puVar3 = puVar5, cVar1 == '\0' && (puVar4 == (undefined4 *)puVar3[2]))) {
              cVar1 = *(char *)((int)puVar3[1] + 0x15);
              puVar5 = (undefined4 *)puVar3[1];
              puVar4 = puVar3;
            }
          }
        }
      }
      local_18 = local_18 + 4;
      local_14 = local_14 + 1;
      *(ushort *)(iVar11 + 0x20) = param_2;
    } while (local_14 < local_1c);
  }
  local_8 = 0xffffffff;
  FUN_0040f3f0(local_3c);
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00769d20 : PUSH EBP
00769d21 : MOV EBP,ESP
00769d23 : PUSH -0x1
00769d25 : PUSH 0xb36d20
00769d2a : MOV EAX,FS:[0x0]
00769d30 : PUSH EAX
00769d31 : SUB ESP,0x4c
00769d34 : PUSH EBX
00769d35 : PUSH ESI
00769d36 : PUSH EDI
00769d37 : MOV EAX,[0x00d66fa0]
00769d3c : XOR EAX,EBP
00769d3e : PUSH EAX
00769d3f : LEA EAX,[EBP + -0xc]
00769d42 : MOV FS:[0x0],EAX
00769d48 : MOV EDI,dword ptr [EBP + 0x8]
00769d4b : MOV EAX,dword ptr [EDI + 0x1ec]
00769d51 : XOR EBX,EBX
00769d53 : CMP EAX,EBX
00769d55 : JNZ 0x00769db9
00769d57 : PUSH 0xc0ea48
00769d5c : LEA ESI,[EBP + -0x54]
00769d5f : CALL 0x00404750
00769d64 : ADD ESP,0x4
00769d67 : MOV dword ptr [EBP + -0x4],EBX
00769d6a : MOV ECX,dword ptr [0x00da98e8]
00769d70 : MOV ECX,dword ptr [ECX]
00769d72 : CMP ECX,EBX
00769d74 : JZ 0x00769d7e
00769d76 : MOV EDX,dword ptr [ECX]
00769d78 : PUSH EAX
00769d79 : MOV EAX,dword ptr [EDX + 0x10]
00769d7c : CALL EAX
00769d7e : MOV dword ptr [EBP + -0x4],0xffffffff
00769d85 : CMP dword ptr [EBP + -0x3c],0x8
00769d89 : JC 0x00769d93
00769d8b : MOV ECX,dword ptr [EBP + -0x50]
00769d8e : CALL 0x006f04e0
00769d93 : XOR ECX,ECX
00769d95 : MOV dword ptr [EBP + -0x3c],0x7
00769d9c : MOV dword ptr [EBP + -0x40],EBX
00769d9f : MOV word ptr [EBP + -0x50],CX
00769da3 : XOR AL,AL
00769da5 : MOV ECX,dword ptr [EBP + -0xc]
00769da8 : MOV dword ptr FS:[0x0],ECX
00769daf : POP ECX
00769db0 : POP EDI
00769db1 : POP ESI
00769db2 : POP EBX
00769db3 : MOV ESP,EBP
00769db5 : POP EBP
00769db6 : RET 0x8
00769db9 : ADD EAX,0x8
00769dbc : PUSH EAX
00769dbd : LEA EDX,[EBP + -0x38]
00769dc0 : PUSH EDX
00769dc1 : CALL 0x00445580
00769dc6 : MOV EAX,0x1
00769dcb : MOV dword ptr [EBP + -0x4],EAX
00769dce : MOV CX,word ptr [EBP + -0x30]
00769dd2 : MOV word ptr [EDI + 0x224],CX
00769dd9 : MOV EBX,dword ptr [EDI + 0x31c]
00769ddf : SUB EBX,dword ptr [EDI + 0x318]
00769de5 : XOR ESI,ESI
00769de7 : SAR EBX,0x2
00769dea : MOV dword ptr [EBP + -0x18],EBX
00769ded : CMP word ptr [EBP + 0xc],AX
00769df1 : JNZ 0x00769e07
00769df3 : MOV ESI,dword ptr [EDI + 0x32c]
00769df9 : SUB ESI,dword ptr [EDI + 0x328]
00769dff : SAR ESI,0x2
00769e02 : ADD EBX,ESI
00769e04 : MOV dword ptr [EBP + -0x18],EBX
00769e07 : LEA EDX,[EDI + 0x324]
00769e0d : MOV ECX,EBX
00769e0f : CALL 0x004bd300
00769e14 : CMP ESI,EBX
00769e16 : MOV dword ptr [EBP + -0x10],ESI
00769e19 : JGE 0x00769fcc
00769e1f : XORPS XMM0,XMM0
00769e22 : XOR EBX,EBX
00769e24 : MOVSS dword ptr [EBP + -0x1c],XMM0
00769e29 : MOV dword ptr [EBP + -0x20],EBX
00769e2c : MOV dword ptr [EBP + -0x14],EBX
00769e2f : JMP 0x00769e36
00769e31 : MOV EDI,dword ptr [EBP + 0x8]
00769e34 : XOR EBX,EBX
00769e36 : MOV EDX,dword ptr [0x01725270]
00769e3c : SHR EDX,0x3
00769e3f : MOV EAX,0x0
00769e44 : AND EDX,0x1
00769e47 : SETZ AL
00769e4a : MOV dword ptr [EBP + 0xc],EBX
00769e4d : PUSH EAX
00769e4e : PUSH EBX
00769e4f : PUSH 0xbf1a4a
00769e54 : PUSH 0x24
00769e56 : CALL 0x006f0760
00769e5b : ADD ESP,0x10
00769e5e : MOV dword ptr [EBP + -0x24],EAX
00769e61 : MOV byte ptr [EBP + -0x4],0x2
00769e65 : CMP EAX,EBX
00769e67 : JZ 0x00769e71
00769e69 : PUSH EAX
00769e6a : CALL 0x004896c0
00769e6f : MOV EBX,EAX
00769e71 : MOV byte ptr [EBP + -0x4],0x1
00769e75 : MOV ECX,dword ptr [EDI + 0x328]
00769e7b : MOV EDX,dword ptr [EBP + -0x10]
00769e7e : MOV dword ptr [ECX + EDX*0x4],EBX
00769e81 : MOV EAX,dword ptr [EDI + 0x1ec]
00769e87 : MOV EDX,dword ptr [EBX + 0x8]
00769e8a : MOVZX EAX,word ptr [EAX + 0x48]
00769e8e : MOV ESI,dword ptr [EBX + 0x4]
00769e91 : MOV ECX,EDX
00769e93 : SUB ECX,ESI
00769e95 : INC EAX
00769e96 : SAR ECX,0x2
00769e99 : CMP EAX,ECX
00769e9b : JBE 0x00769ead
00769e9d : LEA ESI,[EBP + -0x1c]
00769ea0 : PUSH ESI
00769ea1 : SUB EAX,ECX
00769ea3 : PUSH EAX
00769ea4 : PUSH EDX
00769ea5 : PUSH EBX
00769ea6 : CALL 0x004452d0
00769eab : JMP 0x00769ebe
00769ead : JNC 0x00769ebe
00769eaf : PUSH EDX
00769eb0 : LEA EAX,[ESI + EAX*0x4]
00769eb3 : PUSH EAX
00769eb4 : LEA ECX,[EBP + -0x28]
00769eb7 : PUSH ECX
00769eb8 : PUSH EBX
00769eb9 : CALL 0x00459700
00769ebe : MOV ESI,dword ptr [EBX + 0x18]
00769ec1 : MOV EDI,dword ptr [EBX + 0x14]
00769ec4 : MOV EDX,dword ptr [EBP + -0x30]
00769ec7 : LEA ECX,[EBX + 0x10]
00769eca : MOV EAX,ESI
00769ecc : SUB EAX,EDI
00769ece : SAR EAX,0x2
00769ed1 : CMP EDX,EAX
00769ed3 : JBE 0x00769ee5
00769ed5 : LEA EDI,[EBP + -0x20]
00769ed8 : PUSH EDI
00769ed9 : SUB EDX,EAX
00769edb : PUSH EDX
00769edc : PUSH ESI
00769edd : PUSH ECX
00769ede : CALL 0x0047bf80
00769ee3 : JMP 0x00769ef6
00769ee5 : JNC 0x00769ef6
00769ee7 : PUSH ESI
00769ee8 : LEA EAX,[EDI + EDX*0x4]
00769eeb : PUSH EAX
00769eec : LEA EDX,[EBP + -0x2c]
00769eef : PUSH EDX
00769ef0 : PUSH ECX
00769ef1 : CALL 0x00459700
00769ef6 : MOV EAX,dword ptr [EBP + -0x34]
00769ef9 : MOV ECX,dword ptr [EAX]
00769efb : MOV dword ptr [EBP + -0x24],EAX
00769efe : CMP ECX,EAX
00769f00 : JZ 0x00769fb0
00769f06 : JMP 0x00769f10
00769f10 : MOV EAX,dword ptr [EBP + 0x8]
00769f13 : MOV EDX,dword ptr [EAX + 0x318]
00769f19 : MOV EAX,dword ptr [EBP + -0x14]
00769f1c : MOV ESI,dword ptr [EAX + EDX*0x1]
00769f1f : MOV EAX,dword ptr [ESI + 0x8]
00769f22 : SUB EAX,dword ptr [ESI + 0x4]
00769f25 : XOR EDX,EDX
00769f27 : SAR EAX,0x1
00769f29 : TEST EAX,EAX
00769f2b : JLE 0x00769f65
00769f2d : MOVZX EDI,word ptr [ECX + 0xc]
00769f31 : MOV ESI,dword ptr [ESI + 0x4]
00769f34 : CMP word ptr [ESI],DI
00769f37 : JZ 0x00769f43
00769f39 : INC EDX
00769f3a : ADD ESI,0x2
00769f3d : CMP EDX,EAX
00769f3f : JL 0x00769f34
00769f41 : JMP 0x00769f65
00769f43 : MOV EDX,dword ptr [EBP + 0xc]
00769f46 : MOVZX EAX,DX
00769f49 : MOVZX ESI,DI
00769f4c : MOV EDI,dword ptr [EBX + 0x4]
00769f4f : CVTSI2SS XMM0,EAX
00769f53 : MOVSS dword ptr [EDI + ESI*0x4],XMM0
00769f58 : MOV ESI,dword ptr [EBX + 0x14]
00769f5b : MOV EDI,dword ptr [ECX + 0x10]
00769f5e : INC EDX
00769f5f : MOV dword ptr [ESI + EAX*0x4],EDI
00769f62 : MOV dword ptr [EBP + 0xc],EDX
00769f65 : CMP byte ptr [ECX + 0x15],0x0
00769f69 : JNZ 0x00769fa7
00769f6b : MOV EAX,dword ptr [ECX + 0x8]
00769f6e : CMP byte ptr [EAX + 0x15],0x0
00769f72 : JNZ 0x00769f8c
00769f74 : MOV ECX,EAX
00769f76 : MOV EAX,dword ptr [ECX]
00769f78 : CMP byte ptr [EAX + 0x15],0x0
00769f7c : JNZ 0x00769fa7
00769f7e : MOV EDI,EDI
00769f80 : MOV ECX,EAX
00769f82 : MOV EAX,dword ptr [ECX]
00769f84 : CMP byte ptr [EAX + 0x15],0x0
00769f88 : JZ 0x00769f80
00769f8a : JMP 0x00769fa7
00769f8c : MOV EAX,dword ptr [ECX + 0x4]
00769f8f : CMP byte ptr [EAX + 0x15],0x0
00769f93 : JNZ 0x00769fa5
00769f95 : CMP ECX,dword ptr [EAX + 0x8]
00769f98 : JNZ 0x00769fa5
00769f9a : MOV ECX,EAX
00769f9c : MOV EAX,dword ptr [EAX + 0x4]
00769f9f : CMP byte ptr [EAX + 0x15],0x0
00769fa3 : JZ 0x00769f95
00769fa5 : MOV ECX,EAX
00769fa7 : CMP ECX,dword ptr [EBP + -0x24]
00769faa : JNZ 0x00769f10
00769fb0 : MOV EAX,dword ptr [EBP + -0x10]
00769fb3 : MOV CX,word ptr [EBP + 0xc]
00769fb7 : ADD dword ptr [EBP + -0x14],0x4
00769fbb : INC EAX
00769fbc : CMP EAX,dword ptr [EBP + -0x18]
00769fbf : MOV word ptr [EBX + 0x20],CX
00769fc3 : MOV dword ptr [EBP + -0x10],EAX
00769fc6 : JL 0x00769e31
00769fcc : MOV dword ptr [EBP + -0x4],0xffffffff
00769fd3 : LEA EDX,[EBP + -0x38]
00769fd6 : PUSH EDX
00769fd7 : CALL 0x0040f3f0
00769fdc : MOV AL,0x1
00769fde : MOV ECX,dword ptr [EBP + -0xc]
00769fe1 : MOV dword ptr FS:[0x0],ECX
00769fe8 : POP ECX
00769fe9 : POP EDI
00769fea : POP ESI
00769feb : POP EBX
00769fec : MOV ESP,EBP
00769fee : POP EBP
00769fef : RET 0x8
