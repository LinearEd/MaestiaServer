PROGRAM  : Maestia.exe
FUNCTION : FUN_00539ea0
ENTRY    : 00539ea0
BODY     : [[00539ea0, 00539edb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00539ea0(void)

{
  uint uVar1;
  LONG LVar2;
  undefined4 *in_ECX;
  
  uVar1 = in_ECX[6];
  *in_ECX = &PTR_FUN_00b8b878;
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  if ((GRefCountImpl *)in_ECX[4] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[4]);
  }
  *in_ECX = &PTR_LAB_00b8b11c;
  return;
}



============================================================
DISASSEMBLY
============================================================
00539ea0 : PUSH ESI
00539ea1 : PUSH EDI
00539ea2 : MOV ESI,ECX
00539ea4 : MOV EDI,dword ptr [ESI + 0x18]
00539ea7 : AND EDI,0xfffffffc
00539eaa : PUSH -0x1
00539eac : LEA EAX,[EDI + 0x4]
00539eaf : PUSH EAX
00539eb0 : MOV dword ptr [ESI],0xb8b878
00539eb6 : CALL dword ptr [0x00b851cc]
00539ebc : SUB EAX,0x1
00539ebf : JNZ 0x00539ec7
00539ec1 : PUSH EDI
00539ec2 : CALL 0x00515cf0
00539ec7 : MOV ECX,dword ptr [ESI + 0x10]
00539eca : TEST ECX,ECX
00539ecc : JZ 0x00539ed3
00539ece : CALL 0x004ff7e0
00539ed3 : POP EDI
00539ed4 : MOV dword ptr [ESI],0xb8b11c
00539eda : POP ESI
00539edb : RET
