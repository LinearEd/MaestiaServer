PROGRAM  : Maestia.exe
FUNCTION : FUN_007fd6b0
ENTRY    : 007fd6b0
BODY     : [[007fd6b0, 007fdac9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007fd6b0(void)

{
  uint uVar1;
  int in_ECX;
  undefined1 *puVar2;
  wchar_t *pwVar3;
  undefined1 local_224 [28];
  undefined1 local_208 [28];
  undefined1 local_1ec [4];
  undefined2 local_1e8;
  undefined4 local_1d8;
  uint local_1d4;
  undefined1 local_1d0 [4];
  undefined2 local_1cc;
  undefined4 local_1bc;
  uint local_1b8;
  undefined1 local_1b4 [4];
  undefined2 local_1b0;
  undefined4 local_1a0;
  uint local_19c;
  uint local_198;
  undefined1 local_194 [128];
  undefined1 local_114 [128];
  undefined1 local_94 [128];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b29589;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = (uint)*(byte *)(in_ECX + 0xe9);
  local_198 = (uint)(*(ushort *)(in_ECX + 0xe8) & 0xff);
  *(undefined4 *)(*(int *)(in_ECX + 0x17c) + 8) = *(undefined4 *)(in_ECX + 0xe8);
  *(uint *)(in_ECX + 0x158) = uVar1;
  *(uint *)(in_ECX + 0x15c) = local_198;
  FUN_008018d0(&DAT_00c26d68,local_14);
  FUN_008018d0(L"================================================");
  FUN_008018d0(L"Checking Vertex Shader");
  FUN_008018d0(L"================================================");
  if (uVar1 == 1) {
    FUN_00406460(L"VS_1_1");
    local_8 = 0;
    FUN_00405eb0(local_1b4,0,0xffffffff);
    local_8 = 0xffffffff;
    if (7 < local_19c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_1b0 = 0;
    local_19c = 7;
    local_1a0 = 0;
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x46) = 0;
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x48) = 0;
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x44) = *(undefined2 *)(in_ECX + 0xec);
    FUN_0040e4a0(L"Usable Constant Float Count : %d",*(undefined2 *)(in_ECX + 0xec));
    puVar2 = local_94;
  }
  else {
    if (uVar1 != 2) {
      if (uVar1 == 3) {
        FUN_00406460(L"VS_3_0");
        local_8 = 3;
        FUN_00405eb0(local_1ec,0,0xffffffff);
        local_8 = 0xffffffff;
        if (7 < local_1d4) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_1e8 = 0;
        local_1d4 = 7;
        local_1d8 = 0;
        *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x46) = 0x10;
        *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x48) = 0x10;
        *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x44) = *(undefined2 *)(in_ECX + 0xec);
        FUN_008018d0(L"Vertex Shader Version : VS_3_0");
        FUN_008018d0(L"Usable Constant Boolean Count : 16");
        FUN_008018d0(L"Usable Constant Int Count : 16");
        FUN_0040e4a0(L"Usable Constant Float Count : %d",*(undefined2 *)(in_ECX + 0xec));
        FUN_008018d0(local_114);
      }
      else {
        FUN_00406460(&DAT_00c270cc);
        local_8 = 4;
        FUN_00405eb0(local_1d0,0,0xffffffff);
        local_8 = 0xffffffff;
        if (7 < local_1b8) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_1b8 = 7;
        local_1bc = 0;
        local_1cc = 0;
        FUN_008018d0(L"Can\'t use Vertex Shader");
      }
      goto LAB_007fdaae;
    }
    if ((short)local_198 == 0) {
      FUN_00406460(L"VS_2_0");
      local_8 = 2;
      FUN_00405eb0(local_224,0,0xffffffff);
      local_8 = 0xffffffff;
      FUN_00406560();
      pwVar3 = L"Vertex Shader Version : VS_2_0";
    }
    else {
      FUN_00406460(L"VS_2_x");
      local_8 = 1;
      FUN_00405eb0(local_208,0,0xffffffff);
      local_8 = 0xffffffff;
      FUN_00406560();
      pwVar3 = L"Vertex Shader Version : VS_2_x";
    }
    FUN_008018d0(pwVar3);
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x46) = 0x10;
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x48) = 0x10;
    *(undefined2 *)(*(int *)(in_ECX + 0x17c) + 0x44) = *(undefined2 *)(in_ECX + 0xec);
    FUN_0040e4a0(L"Usable Constant Float Count : %d",*(undefined2 *)(in_ECX + 0xec));
    puVar2 = local_194;
  }
  FUN_008018d0(puVar2);
LAB_007fdaae:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007fd6b0 : PUSH EBP
007fd6b1 : MOV EBP,ESP
007fd6b3 : PUSH -0x1
007fd6b5 : PUSH 0xb29589
007fd6ba : MOV EAX,FS:[0x0]
007fd6c0 : PUSH EAX
007fd6c1 : SUB ESP,0x214
007fd6c7 : MOV EAX,[0x00d66fa0]
007fd6cc : XOR EAX,EBP
007fd6ce : MOV dword ptr [EBP + -0x10],EAX
007fd6d1 : PUSH EBX
007fd6d2 : PUSH ESI
007fd6d3 : PUSH EDI
007fd6d4 : PUSH EAX
007fd6d5 : LEA EAX,[EBP + -0xc]
007fd6d8 : MOV FS:[0x0],EAX
007fd6de : MOV EDI,ECX
007fd6e0 : MOVZX AX,byte ptr [EDI + 0xe9]
007fd6e8 : MOV CX,word ptr [EDI + 0xe8]
007fd6ef : MOV EDX,0xff
007fd6f4 : AND CX,DX
007fd6f7 : MOV EDX,dword ptr [EDI + 0x17c]
007fd6fd : MOVZX ESI,CX
007fd700 : MOV ECX,dword ptr [EDI + 0xe8]
007fd706 : MOVZX EAX,AX
007fd709 : MOVZX EBX,AX
007fd70c : MOVZX EAX,SI
007fd70f : MOV dword ptr [EDX + 0x8],ECX
007fd712 : MOV dword ptr [EBP + 0xfffffe6c],ESI
007fd718 : MOV ESI,dword ptr [0x00da98e8]
007fd71e : PUSH 0xc26d68
007fd723 : MOV dword ptr [EDI + 0x158],EBX
007fd729 : MOV dword ptr [EDI + 0x15c],EAX
007fd72f : CALL 0x008018d0
007fd734 : MOV ESI,dword ptr [0x00da98e8]
007fd73a : PUSH 0xc26d70
007fd73f : CALL 0x008018d0
007fd744 : MOV ESI,dword ptr [0x00da98e8]
007fd74a : PUSH 0xc26dd4
007fd74f : CALL 0x008018d0
007fd754 : MOV ESI,dword ptr [0x00da98e8]
007fd75a : PUSH 0xc26e08
007fd75f : CALL 0x008018d0
007fd764 : ADD ESP,0x10
007fd767 : SUB EBX,0x1
007fd76a : JZ 0x007fd9f0
007fd770 : SUB EBX,0x1
007fd773 : JZ 0x007fd8f8
007fd779 : SUB EBX,0x1
007fd77c : JZ 0x007fd802
007fd782 : PUSH 0xc270cc
007fd787 : LEA ECX,[EBP + 0xfffffe34]
007fd78d : CALL 0x00406460
007fd792 : MOV dword ptr [EBP + -0x4],0x4
007fd799 : MOV EDI,dword ptr [EDI + 0x17c]
007fd79f : PUSH -0x1
007fd7a1 : PUSH 0x0
007fd7a3 : LEA ECX,[EBP + 0xfffffe34]
007fd7a9 : PUSH ECX
007fd7aa : LEA ECX,[EDI + 0xc]
007fd7ad : CALL 0x00405eb0
007fd7b2 : MOV dword ptr [EBP + -0x4],0xffffffff
007fd7b9 : CMP dword ptr [EBP + 0xfffffe4c],0x8
007fd7c0 : JC 0x007fd7cd
007fd7c2 : MOV ECX,dword ptr [EBP + 0xfffffe38]
007fd7c8 : CALL 0x006f04e0
007fd7cd : MOV ESI,dword ptr [0x00da98e8]
007fd7d3 : XOR EDX,EDX
007fd7d5 : PUSH 0xc270d0
007fd7da : MOV dword ptr [EBP + 0xfffffe4c],0x7
007fd7e4 : MOV dword ptr [EBP + 0xfffffe48],0x0
007fd7ee : MOV word ptr [EBP + 0xfffffe38],DX
007fd7f5 : CALL 0x008018d0
007fd7fa : ADD ESP,0x4
007fd7fd : JMP 0x007fdaae
007fd802 : PUSH 0xc26fac
007fd807 : LEA ECX,[EBP + 0xfffffe18]
007fd80d : CALL 0x00406460
007fd812 : MOV dword ptr [EBP + -0x4],0x3
007fd819 : MOV EAX,dword ptr [EDI + 0x17c]
007fd81f : PUSH -0x1
007fd821 : PUSH 0x0
007fd823 : LEA ECX,[EBP + 0xfffffe18]
007fd829 : PUSH ECX
007fd82a : LEA ECX,[EAX + 0xc]
007fd82d : CALL 0x00405eb0
007fd832 : MOV dword ptr [EBP + -0x4],0xffffffff
007fd839 : CMP dword ptr [EBP + 0xfffffe30],0x8
007fd840 : JC 0x007fd84d
007fd842 : MOV ECX,dword ptr [EBP + 0xfffffe1c]
007fd848 : CALL 0x006f04e0
007fd84d : MOV EAX,dword ptr [EDI + 0x17c]
007fd853 : MOV ESI,dword ptr [0x00da98e8]
007fd859 : XOR EDX,EDX
007fd85b : MOV word ptr [EBP + 0xfffffe1c],DX
007fd862 : MOV dword ptr [EBP + 0xfffffe30],0x7
007fd86c : MOV dword ptr [EBP + 0xfffffe2c],0x0
007fd876 : MOV ECX,0x10
007fd87b : MOV word ptr [EAX + 0x46],CX
007fd87f : MOV EDX,dword ptr [EDI + 0x17c]
007fd885 : MOV EAX,ECX
007fd887 : MOV word ptr [EDX + 0x48],AX
007fd88b : MOV ECX,dword ptr [EDI + 0x17c]
007fd891 : MOV DX,word ptr [EDI + 0xec]
007fd898 : PUSH 0xc26fbc
007fd89d : MOV word ptr [ECX + 0x44],DX
007fd8a1 : CALL 0x008018d0
007fd8a6 : MOV ESI,dword ptr [0x00da98e8]
007fd8ac : PUSH 0xc27000
007fd8b1 : CALL 0x008018d0
007fd8b6 : MOV ESI,dword ptr [0x00da98e8]
007fd8bc : PUSH 0xc27048
007fd8c1 : CALL 0x008018d0
007fd8c6 : MOVZX EAX,word ptr [EDI + 0xec]
007fd8cd : PUSH EAX
007fd8ce : PUSH 0xc27088
007fd8d3 : LEA EDX,[EBP + 0xfffffef0]
007fd8d9 : CALL 0x0040e4a0
007fd8de : MOV ESI,dword ptr [0x00da98e8]
007fd8e4 : LEA ECX,[EBP + 0xfffffef0]
007fd8ea : PUSH ECX
007fd8eb : CALL 0x008018d0
007fd8f0 : ADD ESP,0x18
007fd8f3 : JMP 0x007fdaae
007fd8f8 : CMP word ptr [EBP + 0xfffffe6c],0x0
007fd900 : JBE 0x007fd94b
007fd902 : PUSH 0xc26ec4
007fd907 : LEA ECX,[EBP + 0xfffffdfc]
007fd90d : CALL 0x00406460
007fd912 : MOV dword ptr [EBP + -0x4],0x1
007fd919 : MOV EAX,dword ptr [EDI + 0x17c]
007fd91f : PUSH -0x1
007fd921 : PUSH 0x0
007fd923 : LEA EDX,[EBP + 0xfffffdfc]
007fd929 : PUSH EDX
007fd92a : LEA ECX,[EAX + 0xc]
007fd92d : CALL 0x00405eb0
007fd932 : MOV dword ptr [EBP + -0x4],0xffffffff
007fd939 : LEA ECX,[EBP + 0xfffffdfc]
007fd93f : CALL 0x00406560
007fd944 : PUSH 0xc26ed4
007fd949 : JMP 0x007fd992
007fd94b : PUSH 0xc26f14
007fd950 : LEA ECX,[EBP + 0xfffffde0]
007fd956 : CALL 0x00406460
007fd95b : MOV dword ptr [EBP + -0x4],0x2
007fd962 : MOV EAX,dword ptr [EDI + 0x17c]
007fd968 : PUSH -0x1
007fd96a : PUSH 0x0
007fd96c : LEA ECX,[EBP + 0xfffffde0]
007fd972 : PUSH ECX
007fd973 : LEA ECX,[EAX + 0xc]
007fd976 : CALL 0x00405eb0
007fd97b : MOV dword ptr [EBP + -0x4],0xffffffff
007fd982 : LEA ECX,[EBP + 0xfffffde0]
007fd988 : CALL 0x00406560
007fd98d : PUSH 0xc26f24
007fd992 : MOV ESI,dword ptr [0x00da98e8]
007fd998 : CALL 0x008018d0
007fd99d : MOV EDX,dword ptr [EDI + 0x17c]
007fd9a3 : MOV EAX,0x10
007fd9a8 : MOV word ptr [EDX + 0x46],AX
007fd9ac : MOV ECX,dword ptr [EDI + 0x17c]
007fd9b2 : MOV EDX,EAX
007fd9b4 : MOV word ptr [ECX + 0x48],DX
007fd9b8 : MOV EAX,dword ptr [EDI + 0x17c]
007fd9be : MOV CX,word ptr [EDI + 0xec]
007fd9c5 : MOV word ptr [EAX + 0x44],CX
007fd9c9 : MOVZX EDX,word ptr [EDI + 0xec]
007fd9d0 : ADD ESP,0x4
007fd9d3 : PUSH EDX
007fd9d4 : PUSH 0xc26f68
007fd9d9 : LEA EDX,[EBP + 0xfffffe70]
007fd9df : CALL 0x0040e4a0
007fd9e4 : LEA EAX,[EBP + 0xfffffe70]
007fd9ea : PUSH EAX
007fd9eb : JMP 0x007fdaa0
007fd9f0 : PUSH 0xc26e6c
007fd9f5 : LEA ECX,[EBP + 0xfffffe50]
007fd9fb : CALL 0x00406460
007fda00 : MOV dword ptr [EBP + -0x4],0x0
007fda07 : MOV EAX,dword ptr [EDI + 0x17c]
007fda0d : PUSH -0x1
007fda0f : PUSH 0x0
007fda11 : LEA ECX,[EBP + 0xfffffe50]
007fda17 : PUSH ECX
007fda18 : LEA ECX,[EAX + 0xc]
007fda1b : CALL 0x00405eb0
007fda20 : MOV dword ptr [EBP + -0x4],0xffffffff
007fda27 : CMP dword ptr [EBP + 0xfffffe68],0x8
007fda2e : JC 0x007fda3b
007fda30 : MOV ECX,dword ptr [EBP + 0xfffffe54]
007fda36 : CALL 0x006f04e0
007fda3b : MOV EAX,dword ptr [EDI + 0x17c]
007fda41 : XOR EDX,EDX
007fda43 : MOV word ptr [EBP + 0xfffffe54],DX
007fda4a : MOV dword ptr [EBP + 0xfffffe68],0x7
007fda54 : MOV dword ptr [EBP + 0xfffffe64],0x0
007fda5e : XOR ECX,ECX
007fda60 : MOV word ptr [EAX + 0x46],CX
007fda64 : MOV EDX,dword ptr [EDI + 0x17c]
007fda6a : XOR EAX,EAX
007fda6c : MOV word ptr [EDX + 0x48],AX
007fda70 : MOV DX,word ptr [EDI + 0xec]
007fda77 : MOV ECX,dword ptr [EDI + 0x17c]
007fda7d : MOV word ptr [ECX + 0x44],DX
007fda81 : MOVZX EAX,word ptr [EDI + 0xec]
007fda88 : PUSH EAX
007fda89 : PUSH 0xc26e80
007fda8e : LEA EDX,[EBP + 0xffffff70]
007fda94 : CALL 0x0040e4a0
007fda99 : LEA ECX,[EBP + 0xffffff70]
007fda9f : PUSH ECX
007fdaa0 : MOV ESI,dword ptr [0x00da98e8]
007fdaa6 : CALL 0x008018d0
007fdaab : ADD ESP,0xc
007fdaae : MOV ECX,dword ptr [EBP + -0xc]
007fdab1 : MOV dword ptr FS:[0x0],ECX
007fdab8 : POP ECX
007fdab9 : POP EDI
007fdaba : POP ESI
007fdabb : POP EBX
007fdabc : MOV ECX,dword ptr [EBP + -0x10]
007fdabf : XOR ECX,EBP
007fdac1 : CALL 0x00633e6b
007fdac6 : MOV ESP,EBP
007fdac8 : POP EBP
007fdac9 : RET
