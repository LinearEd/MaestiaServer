PROGRAM  : Maestia.exe
FUNCTION : FUN_00a84da0
ENTRY    : 00a84da0
BODY     : [[00a84da0, 00a850e1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a84da0(void)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  uint local_fc;
  uint local_e0;
  uint local_c4;
  uint local_a8;
  uint local_8c;
  undefined1 local_88 [4];
  undefined2 local_84;
  undefined4 local_74;
  uint local_70;
  undefined1 local_6c [4];
  undefined2 local_68;
  undefined4 local_58;
  uint local_54;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  int local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4537e;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  local_34 = in_ECX;
  local_14 = uVar1;
  FUN_00406360(L"IDS_PREMIUM_BUY_CHECK_MSG",0x19);
  local_8 = 0;
  iVar2 = FUN_0081d120(local_50);
  local_8._0_1_ = 1;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar2 = iVar2 + 4;
  }
  else {
    iVar2 = *(int *)(iVar2 + 4);
  }
  FUN_00404750(iVar2,*(undefined4 *)(in_ECX + 0x4c),uVar1);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < local_e0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8._0_1_ = 4;
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_4c = 0;
  local_38 = 7;
  local_3c = 0;
  if (*(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 0x1bc) == 1) {
    FUN_00406460(L"IDS_PREMIUM_MILEAGEITEM_BUY_MSG");
    local_8._0_1_ = 5;
    iVar2 = FUN_0081d120(local_88);
    local_8._0_1_ = 6;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,*(undefined4 *)(local_34 + 0x4c));
    local_8._0_1_ = 7;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,6);
    if (7 < local_8c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,5);
    if (7 < local_a8) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 4;
    if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_70 = 7;
    local_74 = 0;
    local_84 = 0;
  }
  local_8._0_1_ = 4;
  if (*(int *)(*(int *)(*DAT_00da9894 + 0x1d4) + 0x1bc) == 2) {
    FUN_00406460(L"IDS_PREMIUM_GOLDITEM_BUY_MSG");
    local_8._0_1_ = 8;
    iVar2 = FUN_0081d120(local_6c);
    local_8._0_1_ = 9;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,*(undefined4 *)(local_34 + 0x4c));
    local_8._0_1_ = 10;
    FUN_00405eb0(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,9);
    if (7 < local_c4) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,8);
    if (7 < local_fc) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 4;
    if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_54 = 7;
    local_58 = 0;
    local_68 = 0;
  }
  local_8._0_1_ = 4;
  iVar2 = FUN_008ede80(local_30,2);
  if (iVar2 != 0) {
    if (*(code **)(iVar2 + 0x60) != (code *)0x0) {
      (**(code **)(iVar2 + 0x60))(1,iVar2);
    }
    *(code **)(iVar2 + 0x60) = FUN_00a84900;
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a84da0 : PUSH EBP
00a84da1 : MOV EBP,ESP
00a84da3 : PUSH -0x1
00a84da5 : PUSH 0xb4537e
00a84daa : MOV EAX,FS:[0x0]
00a84db0 : PUSH EAX
00a84db1 : SUB ESP,0x104
00a84db7 : MOV EAX,[0x00d66fa0]
00a84dbc : XOR EAX,EBP
00a84dbe : MOV dword ptr [EBP + -0x10],EAX
00a84dc1 : PUSH EBX
00a84dc2 : PUSH ESI
00a84dc3 : PUSH EDI
00a84dc4 : PUSH EAX
00a84dc5 : LEA EAX,[EBP + -0xc]
00a84dc8 : MOV FS:[0x0],EAX
00a84dce : MOV ESI,ECX
00a84dd0 : PUSH 0x19
00a84dd2 : XOR EAX,EAX
00a84dd4 : XOR EDI,EDI
00a84dd6 : PUSH 0xc56024
00a84ddb : LEA ECX,[EBP + -0x4c]
00a84dde : MOV dword ptr [EBP + -0x30],ESI
00a84de1 : MOV dword ptr [EBP + -0x34],0x7
00a84de8 : MOV dword ptr [EBP + -0x38],EDI
00a84deb : MOV word ptr [EBP + -0x48],AX
00a84def : CALL 0x00406360
00a84df4 : MOV dword ptr [EBP + -0x4],EDI
00a84df7 : LEA ECX,[EBP + -0x4c]
00a84dfa : PUSH ECX
00a84dfb : MOV ECX,dword ptr [0x0172491c]
00a84e01 : LEA EDI,[EBP + 0xffffff0c]
00a84e07 : CALL 0x0081d120
00a84e0c : MOV byte ptr [EBP + -0x4],0x1
00a84e10 : MOV ESI,dword ptr [ESI + 0x4c]
00a84e13 : MOV EBX,0x8
00a84e18 : CMP dword ptr [EAX + 0x18],EBX
00a84e1b : JC 0x00a84e22
00a84e1d : MOV EAX,dword ptr [EAX + 0x4]
00a84e20 : JMP 0x00a84e25
00a84e22 : ADD EAX,0x4
00a84e25 : PUSH ESI
00a84e26 : PUSH EAX
00a84e27 : LEA ESI,[EBP + -0x2c]
00a84e2a : CALL 0x00404750
00a84e2f : ADD ESP,0x8
00a84e32 : MOV byte ptr [EBP + -0x4],0x3
00a84e36 : CMP dword ptr [EBP + 0xffffff24],EBX
00a84e3c : JC 0x00a84e49
00a84e3e : MOV ECX,dword ptr [EBP + 0xffffff10]
00a84e44 : CALL 0x006f04e0
00a84e49 : MOV EDI,0x7
00a84e4e : XOR ESI,ESI
00a84e50 : XOR EDX,EDX
00a84e52 : MOV dword ptr [EBP + 0xffffff24],EDI
00a84e58 : MOV dword ptr [EBP + 0xffffff20],ESI
00a84e5e : MOV word ptr [EBP + 0xffffff10],DX
00a84e65 : MOV byte ptr [EBP + -0x4],0x4
00a84e69 : CMP dword ptr [EBP + -0x34],EBX
00a84e6c : JC 0x00a84e76
00a84e6e : MOV ECX,dword ptr [EBP + -0x48]
00a84e71 : CALL 0x006f04e0
00a84e76 : MOV ECX,dword ptr [0x00da9894]
00a84e7c : XOR EAX,EAX
00a84e7e : MOV word ptr [EBP + -0x48],AX
00a84e82 : MOV dword ptr [EBP + -0x34],EDI
00a84e85 : MOV dword ptr [EBP + -0x38],ESI
00a84e88 : MOV EAX,dword ptr [ECX]
00a84e8a : MOV EAX,dword ptr [EAX + 0x1d4]
00a84e90 : MOV EAX,dword ptr [EAX + 0x1bc]
00a84e96 : CMP EAX,0x1
00a84e99 : JNZ 0x00a84f7e
00a84e9f : PUSH 0xc56158
00a84ea4 : LEA ECX,[EBP + 0xffffff7c]
00a84eaa : CALL 0x00406460
00a84eaf : MOV byte ptr [EBP + -0x4],0x5
00a84eb3 : MOV ECX,dword ptr [0x0172491c]
00a84eb9 : LEA EDX,[EBP + 0xffffff7c]
00a84ebf : PUSH EDX
00a84ec0 : LEA EDI,[EBP + 0xffffff44]
00a84ec6 : CALL 0x0081d120
00a84ecb : MOV byte ptr [EBP + -0x4],0x6
00a84ecf : MOV ECX,dword ptr [EBP + -0x30]
00a84ed2 : MOV ECX,dword ptr [ECX + 0x4c]
00a84ed5 : CMP dword ptr [EAX + 0x18],EBX
00a84ed8 : JC 0x00a84edf
00a84eda : MOV EAX,dword ptr [EAX + 0x4]
00a84edd : JMP 0x00a84ee2
00a84edf : ADD EAX,0x4
00a84ee2 : PUSH ECX
00a84ee3 : PUSH EAX
00a84ee4 : LEA ESI,[EBP + 0xffffff60]
00a84eea : CALL 0x00404750
00a84eef : ADD ESP,0x8
00a84ef2 : MOV byte ptr [EBP + -0x4],0x7
00a84ef6 : PUSH -0x1
00a84ef8 : XOR ESI,ESI
00a84efa : PUSH ESI
00a84efb : PUSH EAX
00a84efc : LEA ECX,[EBP + -0x2c]
00a84eff : CALL 0x00405eb0
00a84f04 : MOV byte ptr [EBP + -0x4],0x6
00a84f08 : CMP dword ptr [EBP + 0xffffff78],EBX
00a84f0e : JC 0x00a84f1b
00a84f10 : MOV ECX,dword ptr [EBP + 0xffffff64]
00a84f16 : CALL 0x006f04e0
00a84f1b : MOV EDI,0x7
00a84f20 : XOR EDX,EDX
00a84f22 : MOV dword ptr [EBP + 0xffffff78],EDI
00a84f28 : MOV dword ptr [EBP + 0xffffff74],ESI
00a84f2e : MOV word ptr [EBP + 0xffffff64],DX
00a84f35 : MOV byte ptr [EBP + -0x4],0x5
00a84f39 : CMP dword ptr [EBP + 0xffffff5c],EBX
00a84f3f : JC 0x00a84f4c
00a84f41 : MOV ECX,dword ptr [EBP + 0xffffff48]
00a84f47 : CALL 0x006f04e0
00a84f4c : XOR EAX,EAX
00a84f4e : MOV dword ptr [EBP + 0xffffff5c],EDI
00a84f54 : MOV dword ptr [EBP + 0xffffff58],ESI
00a84f5a : MOV word ptr [EBP + 0xffffff48],AX
00a84f61 : MOV byte ptr [EBP + -0x4],0x4
00a84f65 : CMP dword ptr [EBP + -0x6c],EBX
00a84f68 : JC 0x00a84f72
00a84f6a : MOV ECX,dword ptr [EBP + -0x80]
00a84f6d : CALL 0x006f04e0
00a84f72 : XOR ECX,ECX
00a84f74 : MOV dword ptr [EBP + -0x6c],EDI
00a84f77 : MOV dword ptr [EBP + -0x70],ESI
00a84f7a : MOV word ptr [EBP + -0x80],CX
00a84f7e : MOV EDX,dword ptr [0x00da9894]
00a84f84 : MOV EAX,dword ptr [EDX]
00a84f86 : MOV EAX,dword ptr [EAX + 0x1d4]
00a84f8c : MOV EAX,dword ptr [EAX + 0x1bc]
00a84f92 : CMP EAX,0x2
00a84f95 : JNZ 0x00a85072
00a84f9b : PUSH 0xc56198
00a84fa0 : LEA ECX,[EBP + -0x68]
00a84fa3 : CALL 0x00406460
00a84fa8 : MOV byte ptr [EBP + -0x4],BL
00a84fab : MOV ECX,dword ptr [0x0172491c]
00a84fb1 : LEA EAX,[EBP + -0x68]
00a84fb4 : PUSH EAX
00a84fb5 : LEA EDI,[EBP + 0xfffffef0]
00a84fbb : CALL 0x0081d120
00a84fc0 : MOV byte ptr [EBP + -0x4],0x9
00a84fc4 : MOV ECX,dword ptr [EBP + -0x30]
00a84fc7 : MOV ECX,dword ptr [ECX + 0x4c]
00a84fca : CMP dword ptr [EAX + 0x18],EBX
00a84fcd : JC 0x00a84fd4
00a84fcf : MOV EAX,dword ptr [EAX + 0x4]
00a84fd2 : JMP 0x00a84fd7
00a84fd4 : ADD EAX,0x4
00a84fd7 : PUSH ECX
00a84fd8 : PUSH EAX
00a84fd9 : LEA ESI,[EBP + 0xffffff28]
00a84fdf : CALL 0x00404750
00a84fe4 : ADD ESP,0x8
00a84fe7 : MOV byte ptr [EBP + -0x4],0xa
00a84feb : PUSH -0x1
00a84fed : XOR ESI,ESI
00a84fef : PUSH ESI
00a84ff0 : PUSH EAX
00a84ff1 : LEA ECX,[EBP + -0x2c]
00a84ff4 : CALL 0x00405eb0
00a84ff9 : MOV byte ptr [EBP + -0x4],0x9
00a84ffd : CMP dword ptr [EBP + 0xffffff40],EBX
00a85003 : JC 0x00a85010
00a85005 : MOV ECX,dword ptr [EBP + 0xffffff2c]
00a8500b : CALL 0x006f04e0
00a85010 : MOV EDI,0x7
00a85015 : XOR EDX,EDX
00a85017 : MOV dword ptr [EBP + 0xffffff40],EDI
00a8501d : MOV dword ptr [EBP + 0xffffff3c],ESI
00a85023 : MOV word ptr [EBP + 0xffffff2c],DX
00a8502a : MOV byte ptr [EBP + -0x4],BL
00a8502d : CMP dword ptr [EBP + 0xffffff08],EBX
00a85033 : JC 0x00a85040
00a85035 : MOV ECX,dword ptr [EBP + 0xfffffef4]
00a8503b : CALL 0x006f04e0
00a85040 : XOR EAX,EAX
00a85042 : MOV dword ptr [EBP + 0xffffff08],EDI
00a85048 : MOV dword ptr [EBP + 0xffffff04],ESI
00a8504e : MOV word ptr [EBP + 0xfffffef4],AX
00a85055 : MOV byte ptr [EBP + -0x4],0x4
00a85059 : CMP dword ptr [EBP + -0x50],EBX
00a8505c : JC 0x00a85066
00a8505e : MOV ECX,dword ptr [EBP + -0x64]
00a85061 : CALL 0x006f04e0
00a85066 : XOR ECX,ECX
00a85068 : MOV dword ptr [EBP + -0x50],EDI
00a8506b : MOV dword ptr [EBP + -0x54],ESI
00a8506e : MOV word ptr [EBP + -0x64],CX
00a85072 : MOV EDX,dword ptr [0x00da9894]
00a85078 : MOV ECX,dword ptr [EDX]
00a8507a : PUSH 0x2
00a8507c : LEA EAX,[EBP + -0x2c]
00a8507f : PUSH EAX
00a85080 : CALL 0x008ede80
00a85085 : MOV ESI,EAX
00a85087 : TEST ESI,ESI
00a85089 : JZ 0x00a8509e
00a8508b : MOV EAX,dword ptr [ESI + 0x60]
00a8508e : TEST EAX,EAX
00a85090 : JZ 0x00a85097
00a85092 : PUSH ESI
00a85093 : PUSH 0x1
00a85095 : CALL EAX
00a85097 : MOV dword ptr [ESI + 0x60],0xa84900
00a8509e : MOV dword ptr [EBP + -0x4],0xffffffff
00a850a5 : CMP dword ptr [EBP + -0x14],EBX
00a850a8 : JC 0x00a850b2
00a850aa : MOV ECX,dword ptr [EBP + -0x28]
00a850ad : CALL 0x006f04e0
00a850b2 : XOR ECX,ECX
00a850b4 : MOV dword ptr [EBP + -0x14],0x7
00a850bb : MOV dword ptr [EBP + -0x18],0x0
00a850c2 : MOV word ptr [EBP + -0x28],CX
00a850c6 : MOV ECX,dword ptr [EBP + -0xc]
00a850c9 : MOV dword ptr FS:[0x0],ECX
00a850d0 : POP ECX
00a850d1 : POP EDI
00a850d2 : POP ESI
00a850d3 : POP EBX
00a850d4 : MOV ECX,dword ptr [EBP + -0x10]
00a850d7 : XOR ECX,EBP
00a850d9 : CALL 0x00633e6b
00a850de : MOV ESP,EBP
00a850e0 : POP EBP
00a850e1 : RET
