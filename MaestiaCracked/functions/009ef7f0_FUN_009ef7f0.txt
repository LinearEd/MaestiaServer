PROGRAM  : Maestia.exe
FUNCTION : FUN_009ef7f0
ENTRY    : 009ef7f0
BODY     : [[009ef7f0, 009ef995]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_009ef7f0(undefined4 param_1,uint param_2,int param_3)

{
  void *pvVar1;
  short sVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  int local_18;
  uint local_14;
  int local_10;
  uint local_c;
  int local_8;
  
  pvVar1 = ThreadLocalStoragePointer;
  if (param_3 != 0) {
    iVar6 = *(int *)ThreadLocalStoragePointer;
    *(undefined4 *)(iVar6 + 0xc) = 0;
    *(undefined4 *)(iVar6 + 0x14) = 0;
    *(undefined4 *)(iVar6 + 0x10) = 0;
  }
  iVar6 = *(int *)pvVar1;
  uVar8 = *(uint *)(iVar6 + 0xc);
  local_10 = iVar6;
  if (uVar8 < *(uint *)(*DAT_00da9894 + 0x40)) {
    do {
      local_c = uVar8;
      piVar3 = (int *)FUN_008eb810();
      if ((piVar3 != (int *)0x0) && ((char)piVar3[0x19] != '\0')) {
        iVar5 = *(int *)(iVar6 + 0x14);
        iVar4 = piVar3[0xf];
        if (iVar5 < *(int *)(iVar4 + 8)) {
          do {
            iVar7 = *(int *)(iVar6 + 0x10);
            local_8 = iVar7;
            if (iVar7 < *(int *)(iVar4 + 0xc)) {
              do {
                local_8 = iVar7;
                iVar4 = (**(code **)(*piVar3 + 0x74))(iVar7,iVar5);
                iVar6 = DAT_00d7c54c;
                if (iVar4 == 0) goto switchD_009ef892_default;
                switch(param_1) {
                case 1:
                  uVar8 = (uint)*(ushort *)(iVar4 + 0x10);
                  break;
                case 2:
                  uVar8 = (uint)*(ushort *)(iVar4 + 0x12);
                  break;
                case 3:
                  uVar8 = (uint)*(byte *)(iVar4 + 0x12);
                  break;
                case 4:
                  if ((((*(uint *)(iVar4 + 0x10) >> 0x10 == 0x674) &&
                       (local_14 = *(uint *)(iVar4 + 0x10), FUN_004437f0(&local_14), iVar7 = local_8
                       , local_18 != *(int *)(iVar6 + 0x44))) &&
                      (iVar6 = *(int *)(local_18 + 0x10), iVar6 != 0)) &&
                     ((*(short *)(iVar6 + 0x180) == (short)param_2 &&
                      ((sVar2 = (short)(param_2 >> 0x10), sVar2 == 0 ||
                       (sVar2 == *(short *)(iVar6 + 0x182))))))) goto LAB_009ef97a;
                default:
                  goto switchD_009ef892_default;
                }
                local_8 = iVar7;
                if (uVar8 == param_2) {
LAB_009ef97a:
                  *(int *)(local_10 + 0x10) = local_8 + 1;
                  *(uint *)(local_10 + 0xc) = local_c;
                  *(int *)(local_10 + 0x14) = iVar5;
                  return iVar4;
                }
switchD_009ef892_default:
                iVar7 = iVar7 + 1;
                iVar6 = local_10;
                local_8 = iVar7;
              } while (iVar7 < *(int *)(piVar3[0xf] + 0xc));
            }
            iVar4 = piVar3[0xf];
            iVar5 = iVar5 + 1;
            iVar7 = *(int *)(iVar4 + 8);
            *(undefined4 *)(iVar6 + 0x10) = 0;
            uVar8 = local_c;
          } while (iVar5 < iVar7);
        }
        *(undefined4 *)(iVar6 + 0x14) = 0;
      }
      uVar8 = uVar8 + 1;
    } while (uVar8 < *(uint *)(*DAT_00da9894 + 0x40));
  }
  *(uint *)(iVar6 + 0xc) = uVar8;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
009ef7f0 : PUSH EBP
009ef7f1 : MOV EBP,ESP
009ef7f3 : MOV ECX,dword ptr FS:[0x2c]
009ef7fa : XOR EDX,EDX
009ef7fc : SUB ESP,0x14
009ef7ff : CMP dword ptr [EBP + 0x10],EDX
009ef802 : JZ 0x009ef80f
009ef804 : MOV EAX,dword ptr [ECX]
009ef806 : MOV dword ptr [EAX + 0xc],EDX
009ef809 : MOV dword ptr [EAX + 0x14],EDX
009ef80c : MOV dword ptr [EAX + 0x10],EDX
009ef80f : MOV EAX,[0x00da9894]
009ef814 : MOV EAX,dword ptr [EAX]
009ef816 : PUSH EBX
009ef817 : PUSH ESI
009ef818 : MOV ESI,dword ptr [ECX]
009ef81a : PUSH EDI
009ef81b : MOV EDI,dword ptr [ESI + 0xc]
009ef81e : MOV dword ptr [EBP + -0xc],ESI
009ef821 : MOV dword ptr [EBP + -0x8],EDI
009ef824 : CMP EDI,dword ptr [EAX + 0x40]
009ef827 : JNC 0x009ef96b
009ef82d : LEA ECX,[ECX]
009ef830 : MOV ECX,EDI
009ef832 : CALL 0x008eb810
009ef837 : MOV EBX,EAX
009ef839 : TEST EBX,EBX
009ef83b : JZ 0x009ef956
009ef841 : CMP byte ptr [EBX + 0x64],0x0
009ef845 : JZ 0x009ef956
009ef84b : MOV ECX,dword ptr [ESI + 0x14]
009ef84e : MOV EAX,dword ptr [EBX + 0x3c]
009ef851 : CMP ECX,dword ptr [EAX + 0x8]
009ef854 : MOV dword ptr [EBP + 0x10],ECX
009ef857 : JGE 0x009ef94f
009ef85d : LEA ECX,[ECX]
009ef860 : MOV EDI,dword ptr [ESI + 0x10]
009ef863 : CMP EDI,dword ptr [EAX + 0xc]
009ef866 : MOV dword ptr [EBP + -0x4],EDI
009ef869 : JGE 0x009ef935
009ef86f : NOP
009ef870 : MOV EDX,dword ptr [EBX]
009ef872 : MOV EAX,dword ptr [EDX + 0x74]
009ef875 : PUSH ECX
009ef876 : PUSH EDI
009ef877 : MOV ECX,EBX
009ef879 : CALL EAX
009ef87b : MOV ESI,EAX
009ef87d : TEST ESI,ESI
009ef87f : JZ 0x009ef91f
009ef885 : MOV EAX,dword ptr [EBP + 0x8]
009ef888 : DEC EAX
009ef889 : CMP EAX,0x3
009ef88c : JA 0x009ef91f
009ef892 : JMP dword ptr [EAX*0x4 + 0x9ef998]
009ef899 : MOVZX ECX,word ptr [ESI + 0x12]
009ef89d : CMP ECX,dword ptr [EBP + 0xc]
009ef8a0 : JZ 0x009ef97a
009ef8a6 : JMP 0x009ef91f
009ef8a8 : MOVZX EDX,word ptr [ESI + 0x10]
009ef8ac : CMP EDX,dword ptr [EBP + 0xc]
009ef8af : JZ 0x009ef97a
009ef8b5 : JMP 0x009ef91f
009ef8b7 : MOVZX EAX,byte ptr [ESI + 0x12]
009ef8bb : CMP EAX,dword ptr [EBP + 0xc]
009ef8be : JZ 0x009ef97a
009ef8c4 : JMP 0x009ef91f
009ef8c6 : MOV EAX,dword ptr [ESI + 0x10]
009ef8c9 : MOV ECX,EAX
009ef8cb : SHR ECX,0x10
009ef8ce : CMP ECX,0x674
009ef8d4 : JNZ 0x009ef91f
009ef8d6 : MOV EDI,dword ptr [0x00d7c54c]
009ef8dc : LEA EDX,[EBP + -0x10]
009ef8df : MOV dword ptr [EBP + -0x10],EAX
009ef8e2 : PUSH EDX
009ef8e3 : LEA ECX,[EDI + 0x40]
009ef8e6 : LEA EAX,[EBP + -0x14]
009ef8e9 : CALL 0x004437f0
009ef8ee : MOV EAX,dword ptr [EBP + -0x14]
009ef8f1 : CMP EAX,dword ptr [EDI + 0x44]
009ef8f4 : JZ 0x009ef91c
009ef8f6 : MOV ECX,dword ptr [EAX + 0x10]
009ef8f9 : TEST ECX,ECX
009ef8fb : JZ 0x009ef91c
009ef8fd : MOV EDX,dword ptr [EBP + 0xc]
009ef900 : MOV EAX,EDX
009ef902 : SHR EAX,0x10
009ef905 : CMP word ptr [ECX + 0x180],DX
009ef90c : JNZ 0x009ef91c
009ef90e : TEST AX,AX
009ef911 : JZ 0x009ef977
009ef913 : CMP AX,word ptr [ECX + 0x182]
009ef91a : JZ 0x009ef977
009ef91c : MOV EDI,dword ptr [EBP + -0x4]
009ef91f : MOV EAX,dword ptr [EBX + 0x3c]
009ef922 : MOV ECX,dword ptr [EBP + 0x10]
009ef925 : INC EDI
009ef926 : CMP EDI,dword ptr [EAX + 0xc]
009ef929 : MOV dword ptr [EBP + -0x4],EDI
009ef92c : JL 0x009ef870
009ef932 : MOV ESI,dword ptr [EBP + -0xc]
009ef935 : MOV EAX,dword ptr [EBX + 0x3c]
009ef938 : INC ECX
009ef939 : CMP ECX,dword ptr [EAX + 0x8]
009ef93c : MOV dword ptr [ESI + 0x10],0x0
009ef943 : MOV dword ptr [EBP + 0x10],ECX
009ef946 : JL 0x009ef860
009ef94c : MOV EDI,dword ptr [EBP + -0x8]
009ef94f : MOV dword ptr [ESI + 0x14],0x0
009ef956 : MOV ECX,dword ptr [0x00da9894]
009ef95c : MOV EAX,dword ptr [ECX]
009ef95e : INC EDI
009ef95f : MOV dword ptr [EBP + -0x8],EDI
009ef962 : CMP EDI,dword ptr [EAX + 0x40]
009ef965 : JC 0x009ef830
009ef96b : MOV dword ptr [ESI + 0xc],EDI
009ef96e : POP EDI
009ef96f : POP ESI
009ef970 : XOR EAX,EAX
009ef972 : POP EBX
009ef973 : MOV ESP,EBP
009ef975 : POP EBP
009ef976 : RET
009ef977 : MOV EDI,dword ptr [EBP + -0x4]
009ef97a : MOV EAX,dword ptr [EBP + -0xc]
009ef97d : MOV EDX,dword ptr [EBP + -0x8]
009ef980 : MOV ECX,dword ptr [EBP + 0x10]
009ef983 : INC EDI
009ef984 : MOV dword ptr [EAX + 0x10],EDI
009ef987 : POP EDI
009ef988 : MOV dword ptr [EAX + 0xc],EDX
009ef98b : MOV dword ptr [EAX + 0x14],ECX
009ef98e : MOV EAX,ESI
009ef990 : POP ESI
009ef991 : POP EBX
009ef992 : MOV ESP,EBP
009ef994 : POP EBP
009ef995 : RET
