PROGRAM  : Maestia.exe
FUNCTION : FUN_0087c950
ENTRY    : 0087c950
BODY     : [[0087c950, 0087ca95]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0087c950(int param_1,char param_2,char param_3,uint param_4)

{
  int iVar1;
  char cVar2;
  short sVar3;
  int *piVar4;
  int in_ECX;
  
  if (*(char *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x1534 + in_ECX) == '\0') {
    return 0;
  }
  *(undefined1 *)(param_1 + 0x29) = (undefined1)param_4;
  if (param_2 == '\0') {
    if (param_3 != '\0') {
      param_4 = (uint)*(ushort *)(param_1 + 0x2a);
      iVar1 = *(int *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x15a8 + in_ECX);
      piVar4 = (int *)FUN_00440100(&param_4);
      if (*piVar4 != *(int *)(iVar1 + 0x30)) {
        return 0;
      }
      cVar2 = FUN_00440170(*(undefined2 *)(param_1 + 0x2a));
      if (cVar2 == '\0') {
        return 0;
      }
    }
    *(int *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x159c + in_ECX) = param_1;
  }
  else {
    *(int *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x159c + in_ECX) = param_1;
    sVar3 = FUN_0043d970();
    if (sVar3 == 1000) {
      *(undefined1 *)(*(int *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x15a8 + in_ECX) + 5) = 1
      ;
      iVar1 = *(int *)(*(int *)(in_ECX + -0x15ac) + 4);
      *(undefined4 *)(iVar1 + in_ECX + -0x15a4) = *(undefined4 *)(iVar1 + -0x1544 + in_ECX);
      return 1;
    }
    if (sVar3 == 2000) {
      *(undefined1 *)(*(int *)(*(int *)(*(int *)(in_ECX + -0x15ac) + 4) + -0x15a4 + in_ECX) + 5) = 1
      ;
      iVar1 = *(int *)(*(int *)(in_ECX + -0x15ac) + 4);
      *(undefined4 *)(iVar1 + in_ECX + -0x15a8) = *(undefined4 *)(iVar1 + -0x1544 + in_ECX);
      return 1;
    }
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
0087c950 : PUSH EBP
0087c951 : MOV EBP,ESP
0087c953 : PUSH EDI
0087c954 : MOV EDI,ECX
0087c956 : MOV EAX,dword ptr [EDI + 0xffffea54]
0087c95c : MOV ECX,dword ptr [EAX + 0x4]
0087c95f : CMP byte ptr [ECX + EDI*0x1 + 0xffffeacc],0x0
0087c967 : JNZ 0x0087c970
0087c969 : XOR AL,AL
0087c96b : POP EDI
0087c96c : POP EBP
0087c96d : RET 0x10
0087c970 : CMP byte ptr [EBP + 0xc],0x0
0087c974 : MOV DL,byte ptr [EBP + 0x14]
0087c977 : PUSH EBX
0087c978 : MOV EBX,dword ptr [EBP + 0x8]
0087c97b : PUSH ESI
0087c97c : MOV byte ptr [EBX + 0x29],DL
0087c97f : JZ 0x0087ca21
0087c985 : MOV EAX,dword ptr [EDI + 0xffffea54]
0087c98b : MOV ECX,dword ptr [EAX + 0x4]
0087c98e : MOV dword ptr [ECX + EDI*0x1 + 0xffffea64],EBX
0087c995 : MOV AX,word ptr [EBX + 0x2a]
0087c999 : CALL 0x0043d970
0087c99e : MOV EDX,0x3e8
0087c9a3 : CMP AX,DX
0087c9a6 : JNZ 0x0087c9de
0087c9a8 : MOV EAX,dword ptr [EDI + 0xffffea54]
0087c9ae : MOV ECX,dword ptr [EAX + 0x4]
0087c9b1 : MOV EDX,dword ptr [ECX + EDI*0x1 + 0xffffea58]
0087c9b8 : MOV byte ptr [EDX + 0x5],0x1
0087c9bc : MOV EAX,dword ptr [EDI + 0xffffea54]
0087c9c2 : MOV ECX,dword ptr [EAX + 0x4]
0087c9c5 : MOV EDX,dword ptr [ECX + EDI*0x1 + 0xffffeabc]
0087c9cc : LEA EAX,[ECX + EDI*0x1]
0087c9cf : POP ESI
0087c9d0 : POP EBX
0087c9d1 : MOV dword ptr [EAX + 0xffffea5c],EDX
0087c9d7 : MOV AL,0x1
0087c9d9 : POP EDI
0087c9da : POP EBP
0087c9db : RET 0x10
0087c9de : MOV ECX,0x7d0
0087c9e3 : CMP AX,CX
0087c9e6 : JNZ 0x0087ca8d
0087c9ec : MOV EDX,dword ptr [EDI + 0xffffea54]
0087c9f2 : MOV EAX,dword ptr [EDX + 0x4]
0087c9f5 : MOV ECX,dword ptr [EAX + EDI*0x1 + 0xffffea5c]
0087c9fc : MOV byte ptr [ECX + 0x5],0x1
0087ca00 : MOV EDX,dword ptr [EDI + 0xffffea54]
0087ca06 : MOV EAX,dword ptr [EDX + 0x4]
0087ca09 : MOV ECX,dword ptr [EAX + EDI*0x1 + 0xffffeabc]
0087ca10 : ADD EAX,EDI
0087ca12 : POP ESI
0087ca13 : POP EBX
0087ca14 : MOV dword ptr [EAX + 0xffffea58],ECX
0087ca1a : MOV AL,0x1
0087ca1c : POP EDI
0087ca1d : POP EBP
0087ca1e : RET 0x10
0087ca21 : CMP byte ptr [EBP + 0x10],0x0
0087ca25 : JZ 0x0087ca7d
0087ca27 : MOVZX EAX,word ptr [EBX + 0x2a]
0087ca2b : MOVZX EDX,AX
0087ca2e : MOV EAX,dword ptr [EDI + 0xffffea54]
0087ca34 : MOV ECX,dword ptr [EAX + 0x4]
0087ca37 : MOV ESI,dword ptr [ECX + EDI*0x1 + 0xffffea58]
0087ca3e : LEA EAX,[ECX + EDI*0x1]
0087ca41 : MOV dword ptr [EBP + 0x14],EDX
0087ca44 : LEA EDX,[EBP + 0x14]
0087ca47 : MOV dword ptr [EBP + 0xc],EAX
0087ca4a : PUSH EDX
0087ca4b : LEA ECX,[ESI + 0x2c]
0087ca4e : LEA EAX,[EBP + 0x10]
0087ca51 : CALL 0x00440100
0087ca56 : MOV EAX,dword ptr [EAX]
0087ca58 : CMP EAX,dword ptr [ESI + 0x30]
0087ca5b : JNZ 0x0087ca74
0087ca5d : MOVZX EAX,word ptr [EBX + 0x2a]
0087ca61 : MOV ECX,dword ptr [EBP + 0xc]
0087ca64 : MOV ESI,dword ptr [ECX + 0xffffea5c]
0087ca6a : PUSH EAX
0087ca6b : CALL 0x00440170
0087ca70 : TEST AL,AL
0087ca72 : JNZ 0x0087ca7d
0087ca74 : POP ESI
0087ca75 : POP EBX
0087ca76 : XOR AL,AL
0087ca78 : POP EDI
0087ca79 : POP EBP
0087ca7a : RET 0x10
0087ca7d : MOV EDX,dword ptr [EDI + 0xffffea54]
0087ca83 : MOV EAX,dword ptr [EDX + 0x4]
0087ca86 : MOV dword ptr [EAX + EDI*0x1 + 0xffffea64],EBX
0087ca8d : POP ESI
0087ca8e : POP EBX
0087ca8f : MOV AL,0x1
0087ca91 : POP EDI
0087ca92 : POP EBP
0087ca93 : RET 0x10
