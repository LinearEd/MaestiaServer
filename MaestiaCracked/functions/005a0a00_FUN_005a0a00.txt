PROGRAM  : Maestia.exe
FUNCTION : FUN_005a0a00
ENTRY    : 005a0a00
BODY     : [[005a0a00, 005a0aef]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005a0a00(int *param_1,undefined4 param_2,int param_3,undefined4 param_4)

{
  int *piVar1;
  GRefCountNTSImpl *this;
  int iVar2;
  GRefCountImpl *this_00;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  int *local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined1 local_4;
  
  local_20 = param_1;
  local_18 = *(undefined4 *)(param_3 + 0x20);
  local_14 = *(undefined4 *)(param_3 + 0xc);
  local_10 = *(undefined4 *)(param_3 + 0x24);
  local_c = *(undefined4 *)(param_3 + 0x2c);
  local_30 = 1;
  local_28 = 0;
  local_2c = 0;
  local_24 = 1;
  local_1c = 0;
  if ((*(char *)(param_3 + 0x44) != '\0') || (local_4 = 0, *(int *)(param_3 + 0x18) != 0)) {
    local_4 = 1;
  }
  local_8 = param_4;
  piVar1 = *(int **)(*(int *)(param_3 + 8) + 0x10);
  if (piVar1 == (int *)0x0) {
    return 0;
  }
  this = (GRefCountNTSImpl *)(**(code **)(*piVar1 + 4))(&local_30);
  if (this != (GRefCountNTSImpl *)0x0) {
    iVar2 = FUN_00515840(0x1c,0);
    if (iVar2 != 0) {
      this_00 = (GRefCountImpl *)FUN_00513610(this,1);
      if (this_00 != (GRefCountImpl *)0x0) {
        GRefCountImpl::AddRef(this_00);
        if (*param_1 != 0) {
          FUN_00524240();
        }
        *param_1 = (int)this_00;
        FUN_00524240();
        GRefCountNTSImpl::Release(this);
        return 1;
      }
    }
    GRefCountNTSImpl::Release(this);
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
005a0a00 : SUB ESP,0x30
005a0a03 : MOV EAX,dword ptr [ESP + 0x34]
005a0a07 : MOV dword ptr [ESP + 0x10],EAX
005a0a0b : MOV EAX,dword ptr [ESP + 0x3c]
005a0a0f : MOV ECX,dword ptr [EAX + 0x20]
005a0a12 : MOV EDX,dword ptr [EAX + 0xc]
005a0a15 : PUSH EBX
005a0a16 : XOR EBX,EBX
005a0a18 : PUSH EBP
005a0a19 : MOV EBP,0x1
005a0a1e : MOV dword ptr [ESP + 0x20],ECX
005a0a22 : MOV ECX,dword ptr [EAX + 0x24]
005a0a25 : MOV dword ptr [ESP + 0x24],EDX
005a0a29 : MOV EDX,dword ptr [EAX + 0x2c]
005a0a2c : PUSH ESI
005a0a2d : MOV dword ptr [ESP + 0xc],EBP
005a0a31 : MOV dword ptr [ESP + 0x14],EBX
005a0a35 : MOV dword ptr [ESP + 0x10],EBX
005a0a39 : MOV dword ptr [ESP + 0x18],EBP
005a0a3d : MOV dword ptr [ESP + 0x20],EBX
005a0a41 : MOV dword ptr [ESP + 0x2c],ECX
005a0a45 : MOV dword ptr [ESP + 0x30],EDX
005a0a49 : CMP byte ptr [EAX + 0x44],BL
005a0a4c : JNZ 0x005a0a57
005a0a4e : MOV byte ptr [ESP + 0x38],BL
005a0a52 : CMP dword ptr [EAX + 0x18],EBX
005a0a55 : JZ 0x005a0a5c
005a0a57 : MOV byte ptr [ESP + 0x38],0x1
005a0a5c : MOV ESI,dword ptr [ESP + 0x4c]
005a0a60 : MOV EAX,dword ptr [EAX + 0x8]
005a0a63 : MOV dword ptr [ESP + 0x34],ESI
005a0a67 : MOV ECX,dword ptr [EAX + 0x10]
005a0a6a : CMP ECX,EBX
005a0a6c : JNZ 0x005a0a79
005a0a6e : POP ESI
005a0a6f : POP EBP
005a0a70 : XOR AL,AL
005a0a72 : POP EBX
005a0a73 : ADD ESP,0x30
005a0a76 : RET 0x10
005a0a79 : MOV EDX,dword ptr [ECX]
005a0a7b : MOV EDX,dword ptr [EDX + 0x4]
005a0a7e : PUSH EDI
005a0a7f : LEA EAX,[ESP + 0x10]
005a0a83 : PUSH EAX
005a0a84 : CALL EDX
005a0a86 : MOV EDI,EAX
005a0a88 : CMP EDI,EBX
005a0a8a : JZ 0x005a0ab0
005a0a8c : PUSH EBX
005a0a8d : PUSH 0x1c
005a0a8f : MOV ECX,ESI
005a0a91 : CALL 0x00515840
005a0a96 : CMP EAX,EBX
005a0a98 : JZ 0x005a0aa9
005a0a9a : PUSH EBP
005a0a9b : PUSH EDI
005a0a9c : MOV ECX,EAX
005a0a9e : CALL 0x00513610
005a0aa3 : MOV ESI,EAX
005a0aa5 : CMP ESI,EBX
005a0aa7 : JNZ 0x005a0abc
005a0aa9 : MOV ECX,EDI
005a0aab : CALL 0x004ff7c0
005a0ab0 : POP EDI
005a0ab1 : POP ESI
005a0ab2 : POP EBP
005a0ab3 : XOR AL,AL
005a0ab5 : POP EBX
005a0ab6 : ADD ESP,0x30
005a0ab9 : RET 0x10
005a0abc : MOV ECX,ESI
005a0abe : CALL 0x00523dd0
005a0ac3 : MOV EBP,dword ptr [ESP + 0x48]
005a0ac7 : MOV ECX,dword ptr [EBP]
005a0aca : CMP ECX,EBX
005a0acc : JZ 0x005a0ad3
005a0ace : CALL 0x00524240
005a0ad3 : MOV ECX,ESI
005a0ad5 : MOV dword ptr [EBP],ESI
005a0ad8 : CALL 0x00524240
005a0add : MOV ECX,EDI
005a0adf : CALL 0x004ff7c0
005a0ae4 : POP EDI
005a0ae5 : POP ESI
005a0ae6 : POP EBP
005a0ae7 : MOV AL,0x1
005a0ae9 : POP EBX
005a0aea : ADD ESP,0x30
005a0aed : RET 0x10
