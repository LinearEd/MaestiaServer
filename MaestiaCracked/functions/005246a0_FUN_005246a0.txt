PROGRAM  : Maestia.exe
FUNCTION : FUN_005246a0
ENTRY    : 005246a0
BODY     : [[005246a0, 00524760]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005246a0(int *param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  int in_ECX;
  int *unaff_EBX;
  int *piVar5;
  undefined4 local_8 [2];
  
  EnterCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0xc));
  piVar1 = (int *)(**(code **)(*param_1 + 4))(local_8);
  piVar5 = (int *)(in_ECX + 0x24);
  if (*piVar5 != 0) {
    if ((int *)*piVar1 == (int *)0x0) {
      uVar2 = 0;
    }
    else {
      uVar2 = (**(code **)(*(int *)*piVar1 + 0x10))(piVar1[1]);
    }
    iVar3 = FUN_00523880(piVar1,*(uint *)(*piVar5 + 4) & uVar2);
    if (-1 < iVar3) {
      piVar1 = (int *)((iVar3 + 1) * 0x10 + *piVar5);
      goto LAB_00524704;
    }
  }
  piVar1 = (int *)0x0;
LAB_00524704:
  if (unaff_EBX != (int *)0x0) {
    (**(code **)(*unaff_EBX + 8))(local_8[0]);
  }
  if (((piVar1 != (int *)0x0) && (*piVar1 == 0)) && ((int *)piVar1[1] == param_1)) {
    uVar4 = (**(code **)(*param_1 + 4))(&stack0xfffffff4);
    FUN_005239e0(uVar4);
    if (unaff_EBX != (int *)0x0) {
      (**(code **)(*unaff_EBX + 8))(local_8[0]);
    }
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0xc));
  return;
}



============================================================
DISASSEMBLY
============================================================
005246a0 : SUB ESP,0x8
005246a3 : PUSH EBX
005246a4 : PUSH EBP
005246a5 : PUSH ESI
005246a6 : MOV ESI,ECX
005246a8 : PUSH EDI
005246a9 : LEA EBP,[ESI + 0xc]
005246ac : PUSH EBP
005246ad : CALL dword ptr [0x00b85118]
005246b3 : MOV EBX,dword ptr [ESP + 0x1c]
005246b7 : MOV EAX,dword ptr [EBX]
005246b9 : MOV EDX,dword ptr [EAX + 0x4]
005246bc : LEA ECX,[ESP + 0x10]
005246c0 : PUSH ECX
005246c1 : MOV ECX,EBX
005246c3 : CALL EDX
005246c5 : ADD ESI,0x24
005246c8 : CMP dword ptr [ESI],0x0
005246cb : MOV EDI,EAX
005246cd : JZ 0x00524702
005246cf : MOV ECX,dword ptr [EDI]
005246d1 : TEST ECX,ECX
005246d3 : JZ 0x005246e2
005246d5 : MOV EAX,dword ptr [ECX]
005246d7 : MOV EDX,dword ptr [EDI + 0x4]
005246da : MOV EAX,dword ptr [EAX + 0x10]
005246dd : PUSH EDX
005246de : CALL EAX
005246e0 : JMP 0x005246e4
005246e2 : XOR EAX,EAX
005246e4 : MOV ECX,dword ptr [ESI]
005246e6 : MOV ECX,dword ptr [ECX + 0x4]
005246e9 : AND ECX,EAX
005246eb : PUSH ECX
005246ec : PUSH EDI
005246ed : MOV ECX,ESI
005246ef : CALL 0x00523880
005246f4 : TEST EAX,EAX
005246f6 : JL 0x00524702
005246f8 : LEA EDI,[EAX + 0x1]
005246fb : SHL EDI,0x4
005246fe : ADD EDI,dword ptr [ESI]
00524700 : JMP 0x00524704
00524702 : XOR EDI,EDI
00524704 : MOV ECX,dword ptr [ESP + 0x10]
00524708 : TEST ECX,ECX
0052470a : JZ 0x00524718
0052470c : MOV EDX,dword ptr [ECX]
0052470e : MOV EAX,dword ptr [ESP + 0x14]
00524712 : MOV EDX,dword ptr [EDX + 0x8]
00524715 : PUSH EAX
00524716 : CALL EDX
00524718 : TEST EDI,EDI
0052471a : JZ 0x00524750
0052471c : CMP dword ptr [EDI],0x0
0052471f : JNZ 0x00524750
00524721 : CMP dword ptr [EDI + 0x4],EBX
00524724 : JNZ 0x00524750
00524726 : MOV EAX,dword ptr [EBX]
00524728 : MOV EDX,dword ptr [EAX + 0x4]
0052472b : LEA ECX,[ESP + 0x10]
0052472f : PUSH ECX
00524730 : MOV ECX,EBX
00524732 : CALL EDX
00524734 : PUSH EAX
00524735 : MOV ECX,ESI
00524737 : CALL 0x005239e0
0052473c : MOV ECX,dword ptr [ESP + 0x10]
00524740 : TEST ECX,ECX
00524742 : JZ 0x00524750
00524744 : MOV EAX,dword ptr [ECX]
00524746 : MOV EDX,dword ptr [ESP + 0x14]
0052474a : MOV EAX,dword ptr [EAX + 0x8]
0052474d : PUSH EDX
0052474e : CALL EAX
00524750 : PUSH EBP
00524751 : CALL dword ptr [0x00b8511c]
00524757 : POP EDI
00524758 : POP ESI
00524759 : POP EBP
0052475a : POP EBX
0052475b : ADD ESP,0x8
0052475e : RET 0x4
