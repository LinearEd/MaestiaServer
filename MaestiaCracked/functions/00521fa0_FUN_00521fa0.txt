PROGRAM  : Maestia.exe
FUNCTION : FUN_00521fa0
ENTRY    : 00521fa0
BODY     : [[00521fa0, 0052206f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00521fa0(int param_1)

{
  char cVar1;
  char *pcVar2;
  char *pcVar3;
  undefined **ppuVar4;
  int iVar5;
  int local_c;
  int *local_8;
  undefined4 *local_4;
  
  iVar5 = param_1 + 0x2a8;
  if ((*(uint **)(param_1 + 0x2a8) == (uint *)0x0) || (**(uint **)(param_1 + 0x2a8) < 0x87)) {
    FUN_0051f6f0(iVar5,0x87);
  }
  ppuVar4 = &PTR_DAT_00d65140;
  if (PTR_DAT_00d65140 != (undefined *)0x0) {
    local_8 = &local_c;
    local_4 = &param_1;
    do {
      pcVar2 = *ppuVar4;
      pcVar3 = pcVar2;
      do {
        cVar1 = *pcVar3;
        pcVar3 = pcVar3 + 1;
      } while (cVar1 != '\0');
      local_c = FUN_00525380(pcVar2,(int)pcVar3 - (int)(pcVar2 + 1),
                             -(uint)(*(char *)(ppuVar4 + 2) != '\0') & 0x10000000 | 0x20000000);
      *(int *)(local_c + 8) = *(int *)(local_c + 8) + 1;
      param_1 = CONCAT31(param_1._1_3_,*(undefined1 *)(ppuVar4 + 1));
      FUN_0051f990(iVar5,&local_8,*(undefined4 *)(local_c + 0xc));
      *(int *)(local_c + 8) = *(int *)(local_c + 8) + -1;
      if (*(int *)(local_c + 8) == 0) {
        FUN_00525340();
      }
      ppuVar4 = ppuVar4 + 3;
    } while (*ppuVar4 != (undefined *)0x0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00521fa0 : SUB ESP,0xc
00521fa3 : PUSH EBX
00521fa4 : PUSH ESI
00521fa5 : PUSH EDI
00521fa6 : MOV EDI,dword ptr [ESP + 0x1c]
00521faa : MOV EAX,dword ptr [EDI + 0x2a8]
00521fb0 : LEA EBX,[EDI + 0x254]
00521fb6 : ADD EDI,0x2a8
00521fbc : TEST EAX,EAX
00521fbe : JZ 0x00521fc8
00521fc0 : CMP dword ptr [EAX],0x87
00521fc6 : JNC 0x00521fd5
00521fc8 : PUSH 0x87
00521fcd : PUSH EDI
00521fce : MOV ECX,EDI
00521fd0 : CALL 0x0051f6f0
00521fd5 : CMP dword ptr [0x00d65140],0x0
00521fdc : MOV ESI,0xd65140
00521fe1 : JZ 0x00522069
00521fe7 : LEA EAX,[ESP + 0xc]
00521feb : LEA ECX,[ESP + 0x1c]
00521fef : MOV dword ptr [ESP + 0x10],EAX
00521ff3 : MOV dword ptr [ESP + 0x14],ECX
00521ff7 : PUSH EBP
00521ff8 : MOV EDX,dword ptr [ESI]
00521ffa : MOV EAX,EDX
00521ffc : LEA EBP,[EAX + 0x1]
00521fff : NOP
00522000 : MOV CL,byte ptr [EAX]
00522002 : INC EAX
00522003 : TEST CL,CL
00522005 : JNZ 0x00522000
00522007 : SUB EAX,EBP
00522009 : MOV ECX,EAX
0052200b : MOVZX EAX,byte ptr [ESI + 0x8]
0052200f : NEG EAX
00522011 : SBB EAX,EAX
00522013 : AND EAX,0x10000000
00522018 : OR EAX,0x20000000
0052201d : PUSH EAX
0052201e : PUSH ECX
0052201f : PUSH EDX
00522020 : MOV ECX,EBX
00522022 : CALL 0x00525380
00522027 : MOV dword ptr [ESP + 0x10],EAX
0052202b : INC dword ptr [EAX + 0x8]
0052202e : MOV DL,byte ptr [ESI + 0x4]
00522031 : MOV EAX,dword ptr [ESP + 0x10]
00522035 : MOV byte ptr [ESP + 0x20],DL
00522039 : MOV ECX,dword ptr [EAX + 0xc]
0052203c : PUSH ECX
0052203d : LEA EDX,[ESP + 0x18]
00522041 : PUSH EDX
00522042 : PUSH EDI
00522043 : MOV ECX,EDI
00522045 : CALL 0x0051f990
0052204a : MOV EAX,dword ptr [ESP + 0x10]
0052204e : DEC dword ptr [EAX + 0x8]
00522051 : MOV ECX,EAX
00522053 : ADD EAX,0x8
00522056 : CMP dword ptr [EAX],0x0
00522059 : JNZ 0x00522060
0052205b : CALL 0x00525340
00522060 : ADD ESI,0xc
00522063 : CMP dword ptr [ESI],0x0
00522066 : JNZ 0x00521ff8
00522068 : POP EBP
00522069 : POP EDI
0052206a : POP ESI
0052206b : POP EBX
0052206c : ADD ESP,0xc
0052206f : RET
