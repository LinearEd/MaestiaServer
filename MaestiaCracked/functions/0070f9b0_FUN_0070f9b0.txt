PROGRAM  : Maestia.exe
FUNCTION : FUN_0070f9b0
ENTRY    : 0070f9b0
BODY     : [[0070f9b0, 0070faa8] [0070fab0, 0070fba8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070f9b0(int *param_1)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int unaff_ESI;
  int local_c;
  int local_8;
  
  iVar3 = *param_1;
  local_c = ((int *)param_1[2])[3];
  iVar7 = *(int *)param_1[2];
  iVar6 = -1;
  iVar5 = 0;
  local_8 = -1;
  *(undefined4 *)(unaff_ESI + 0x1448) = 0;
  *(undefined4 *)(unaff_ESI + 0x144c) = 0x23d;
  if (0 < local_c) {
    do {
      if (*(short *)(iVar3 + iVar5 * 4) == 0) {
        *(undefined2 *)(iVar3 + 2 + iVar5 * 4) = 0;
      }
      else {
        *(int *)(unaff_ESI + 0x1448) = *(int *)(unaff_ESI + 0x1448) + 1;
        *(int *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x1448) * 4) = iVar5;
        *(undefined1 *)(iVar5 + 0x1450 + unaff_ESI) = 0;
        iVar6 = iVar5;
        local_8 = iVar5;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < local_c);
  }
  iVar5 = *(int *)(unaff_ESI + 0x1448);
  while (iVar5 < 2) {
    if (iVar6 < 2) {
      iVar5 = iVar6 + 1;
      iVar6 = iVar5;
    }
    else {
      iVar5 = 0;
    }
    *(int *)(unaff_ESI + 0x1448) = *(int *)(unaff_ESI + 0x1448) + 1;
    *(int *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x1448) * 4) = iVar5;
    *(undefined2 *)(iVar3 + iVar5 * 4) = 1;
    *(undefined1 *)(unaff_ESI + 0x1450 + iVar5) = 0;
    *(int *)(unaff_ESI + 0x16a0) = *(int *)(unaff_ESI + 0x16a0) + -1;
    if (iVar7 != 0) {
      *(int *)(unaff_ESI + 0x16a4) =
           *(int *)(unaff_ESI + 0x16a4) - (uint)*(ushort *)(iVar7 + 2 + iVar5 * 4);
    }
    local_8 = iVar6;
    iVar5 = *(int *)(unaff_ESI + 0x1448);
  }
  param_1[1] = iVar6;
  for (iVar7 = *(int *)(unaff_ESI + 0x1448) / 2; 0 < iVar7; iVar7 = iVar7 + -1) {
    FUN_0070f4d0(iVar7);
  }
  do {
    uVar4 = *(undefined4 *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x1448) * 4);
    iVar7 = *(int *)(unaff_ESI + 0xb58);
    *(int *)(unaff_ESI + 0x1448) = *(int *)(unaff_ESI + 0x1448) + -1;
    *(undefined4 *)(unaff_ESI + 0xb58) = uVar4;
    FUN_0070f4d0(1);
    iVar6 = *(int *)(unaff_ESI + 0xb58);
    *(int *)(unaff_ESI + 0x144c) = *(int *)(unaff_ESI + 0x144c) + -1;
    *(int *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x144c) * 4) = iVar7;
    *(int *)(unaff_ESI + 0x144c) = *(int *)(unaff_ESI + 0x144c) + -1;
    *(int *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x144c) * 4) = iVar6;
    *(short *)(iVar3 + local_c * 4) = *(short *)(iVar3 + iVar6 * 4) + *(short *)(iVar3 + iVar7 * 4);
    bVar1 = *(byte *)(unaff_ESI + 0x1450 + iVar7);
    bVar2 = *(byte *)(unaff_ESI + 0x1450 + iVar6);
    if (bVar1 < bVar2) {
      bVar1 = bVar2;
    }
    *(byte *)(unaff_ESI + 0x1450 + local_c) = bVar1 + 1;
    *(short *)(iVar3 + 2 + iVar6 * 4) = (short)local_c;
    *(short *)(iVar3 + 2 + iVar7 * 4) = (short)local_c;
    *(int *)(unaff_ESI + 0xb58) = local_c;
    local_c = local_c + 1;
    FUN_0070f4d0(1);
  } while (1 < *(int *)(unaff_ESI + 0x1448));
  *(int *)(unaff_ESI + 0x144c) = *(int *)(unaff_ESI + 0x144c) + -1;
  *(undefined4 *)(unaff_ESI + 0xb54 + *(int *)(unaff_ESI + 0x144c) * 4) =
       *(undefined4 *)(unaff_ESI + 0xb58);
  FUN_0070f2d0();
  FUN_0070f240(local_8);
  return;
}



============================================================
DISASSEMBLY
============================================================
0070f9b0 : PUSH EBP
0070f9b1 : MOV EBP,ESP
0070f9b3 : SUB ESP,0x8
0070f9b6 : MOV EAX,dword ptr [EBP + 0x8]
0070f9b9 : PUSH EBX
0070f9ba : PUSH EDI
0070f9bb : MOV EDI,dword ptr [EAX]
0070f9bd : MOV EAX,dword ptr [EAX + 0x8]
0070f9c0 : MOV EDX,dword ptr [EAX + 0xc]
0070f9c3 : MOV EBX,dword ptr [EAX]
0070f9c5 : OR ECX,0xffffffff
0070f9c8 : XOR EAX,EAX
0070f9ca : MOV dword ptr [EBP + -0x8],EDX
0070f9cd : MOV dword ptr [EBP + -0x4],ECX
0070f9d0 : MOV dword ptr [ESI + 0x1448],0x0
0070f9da : MOV dword ptr [ESI + 0x144c],0x23d
0070f9e4 : TEST EDX,EDX
0070f9e6 : JLE 0x0070fa1e
0070f9e8 : CMP word ptr [EDI + EAX*0x4],0x0
0070f9ed : JZ 0x0070fa11
0070f9ef : INC dword ptr [ESI + 0x1448]
0070f9f5 : MOV EDX,dword ptr [ESI + 0x1448]
0070f9fb : MOV dword ptr [ESI + EDX*0x4 + 0xb54],EAX
0070fa02 : MOV dword ptr [EBP + -0x4],EAX
0070fa05 : MOV byte ptr [EAX + ESI*0x1 + 0x1450],0x0
0070fa0d : MOV ECX,EAX
0070fa0f : JMP 0x0070fa18
0070fa11 : XOR EDX,EDX
0070fa13 : MOV word ptr [EDI + EAX*0x4 + 0x2],DX
0070fa18 : INC EAX
0070fa19 : CMP EAX,dword ptr [EBP + -0x8]
0070fa1c : JL 0x0070f9e8
0070fa1e : CMP dword ptr [ESI + 0x1448],0x2
0070fa25 : JGE 0x0070fa78
0070fa27 : CMP ECX,0x2
0070fa2a : JGE 0x0070fa31
0070fa2c : INC ECX
0070fa2d : MOV EAX,ECX
0070fa2f : JMP 0x0070fa33
0070fa31 : XOR EAX,EAX
0070fa33 : INC dword ptr [ESI + 0x1448]
0070fa39 : MOV EDX,dword ptr [ESI + 0x1448]
0070fa3f : MOV dword ptr [ESI + EDX*0x4 + 0xb54],EAX
0070fa46 : MOV EDX,0x1
0070fa4b : MOV word ptr [EDI + EAX*0x4],DX
0070fa4f : MOV byte ptr [ESI + EAX*0x1 + 0x1450],0x0
0070fa57 : DEC dword ptr [ESI + 0x16a0]
0070fa5d : TEST EBX,EBX
0070fa5f : JZ 0x0070fa6c
0070fa61 : MOVZX EAX,word ptr [EBX + EAX*0x4 + 0x2]
0070fa66 : SUB dword ptr [ESI + 0x16a4],EAX
0070fa6c : CMP dword ptr [ESI + 0x1448],0x2
0070fa73 : JL 0x0070fa27
0070fa75 : MOV dword ptr [EBP + -0x4],ECX
0070fa78 : MOV EDX,dword ptr [EBP + 0x8]
0070fa7b : MOV dword ptr [EDX + 0x4],ECX
0070fa7e : MOV EAX,dword ptr [ESI + 0x1448]
0070fa84 : CDQ
0070fa85 : SUB EAX,EDX
0070fa87 : MOV EBX,EAX
0070fa89 : SAR EBX,0x1
0070fa8b : CMP EBX,0x1
0070fa8e : JL 0x0070faa1
0070fa90 : PUSH EBX
0070fa91 : MOV EAX,ESI
0070fa93 : CALL 0x0070f4d0
0070fa98 : DEC EBX
0070fa99 : ADD ESP,0x4
0070fa9c : CMP EBX,0x1
0070fa9f : JGE 0x0070fa90
0070faa1 : MOV EAX,dword ptr [EBP + -0x8]
0070faa4 : MOV dword ptr [EBP + -0x8],EAX
0070faa7 : JMP 0x0070fab0
0070fab0 : MOV EAX,dword ptr [ESI + 0x1448]
0070fab6 : MOV ECX,dword ptr [ESI + EAX*0x4 + 0xb54]
0070fabd : MOV EBX,dword ptr [ESI + 0xb58]
0070fac3 : DEC EAX
0070fac4 : MOV dword ptr [ESI + 0x1448],EAX
0070faca : PUSH 0x1
0070facc : MOV EAX,ESI
0070face : MOV dword ptr [ESI + 0xb58],ECX
0070fad4 : CALL 0x0070f4d0
0070fad9 : MOV EAX,dword ptr [ESI + 0xb58]
0070fadf : OR EDX,0xffffffff
0070fae2 : ADD dword ptr [ESI + 0x144c],EDX
0070fae8 : MOV ECX,dword ptr [ESI + 0x144c]
0070faee : MOV dword ptr [ESI + ECX*0x4 + 0xb54],EBX
0070faf5 : ADD dword ptr [ESI + 0x144c],EDX
0070fafb : MOV ECX,dword ptr [ESI + 0x144c]
0070fb01 : MOV dword ptr [ESI + ECX*0x4 + 0xb54],EAX
0070fb08 : MOV DX,word ptr [EDI + EAX*0x4]
0070fb0c : ADD DX,word ptr [EDI + EBX*0x4]
0070fb10 : MOV ECX,dword ptr [EBP + -0x8]
0070fb13 : MOV word ptr [EDI + ECX*0x4],DX
0070fb17 : MOV DL,byte ptr [ESI + EBX*0x1 + 0x1450]
0070fb1e : MOV CL,byte ptr [ESI + EAX*0x1 + 0x1450]
0070fb25 : ADD ESP,0x4
0070fb28 : CMP DL,CL
0070fb2a : MOVZX EDX,DL
0070fb2d : JNC 0x0070fb32
0070fb2f : MOVZX EDX,CL
0070fb32 : MOV ECX,dword ptr [EBP + -0x8]
0070fb35 : INC DL
0070fb37 : MOV byte ptr [ESI + ECX*0x1 + 0x1450],DL
0070fb3e : MOVZX EDX,CX
0070fb41 : MOV word ptr [EDI + EAX*0x4 + 0x2],DX
0070fb46 : MOV word ptr [EDI + EBX*0x4 + 0x2],DX
0070fb4b : MOV dword ptr [ESI + 0xb58],ECX
0070fb51 : INC ECX
0070fb52 : PUSH 0x1
0070fb54 : MOV EAX,ESI
0070fb56 : MOV dword ptr [EBP + -0x8],ECX
0070fb59 : CALL 0x0070f4d0
0070fb5e : ADD ESP,0x4
0070fb61 : CMP dword ptr [ESI + 0x1448],0x2
0070fb68 : JGE 0x0070fab0
0070fb6e : DEC dword ptr [ESI + 0x144c]
0070fb74 : MOV EAX,dword ptr [ESI + 0x144c]
0070fb7a : MOV EDX,dword ptr [ESI + 0xb58]
0070fb80 : MOV ECX,dword ptr [EBP + 0x8]
0070fb83 : MOV dword ptr [ESI + EAX*0x4 + 0xb54],EDX
0070fb8a : MOV EAX,ESI
0070fb8c : CALL 0x0070f2d0
0070fb91 : MOV EAX,dword ptr [EBP + -0x4]
0070fb94 : LEA EDX,[ESI + 0xb34]
0070fb9a : PUSH EAX
0070fb9b : CALL 0x0070f240
0070fba0 : ADD ESP,0x4
0070fba3 : POP EDI
0070fba4 : POP EBX
0070fba5 : MOV ESP,EBP
0070fba7 : POP EBP
0070fba8 : RET
