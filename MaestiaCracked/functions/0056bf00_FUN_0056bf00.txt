PROGRAM  : Maestia.exe
FUNCTION : FUN_0056bf00
ENTRY    : 0056bf00
BODY     : [[0056bf00, 0056c095]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056bf00(void)

{
  int iVar1;
  int *in_ECX;
  int *piVar2;
  int *unaff_retaddr;
  GRefCountNTSImpl *local_5c;
  undefined4 local_58 [9];
  GMatrix2D local_34 [24];
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  int iStack_c;
  int iStack_8;
  
  local_5c = (GRefCountNTSImpl *)0x0;
  local_58[0] = 0;
  FUN_0059d080();
  GMatrix2D::SetIdentity(local_34);
  local_1c = 0;
  local_14 = 0x40000;
  local_10 = 0;
  local_18 = 0;
  (**(code **)(*in_ECX + 0x20))(local_58);
  if (iStack_8 == 0) {
    iVar1 = (**(code **)(*unaff_retaddr + 0x5c))();
    if (iStack_c != 0) {
      unaff_retaddr = (int *)FUN_00525530(iStack_c);
      unaff_retaddr[2] = unaff_retaddr[2] + 1;
      piVar2 = (int *)register0x00000010;
    }
    else {
      piVar2 = (int *)(*(int *)(iVar1 + 0x78) + 8);
    }
    iVar1 = *piVar2;
    *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
    if (iStack_c != 0) {
      piVar2 = unaff_retaddr + 2;
      *piVar2 = *piVar2 + -1;
      if (*piVar2 == 0) {
        FUN_00525340();
      }
    }
    FUN_00594270(&local_5c,&stack0xffffffa0,local_10,0,0xffffffff,4,0,0);
  }
  else {
    if (iStack_8 == 1) {
      FUN_0058b050(&local_5c);
      goto LAB_0056c081;
    }
    if (iStack_8 != 2) goto LAB_0056c081;
    iVar1 = (**(code **)(*unaff_retaddr + 0x5c))();
    if (iStack_c != 0) {
      unaff_retaddr = (int *)FUN_00525530(iStack_c);
      unaff_retaddr[2] = unaff_retaddr[2] + 1;
      piVar2 = (int *)register0x00000010;
    }
    else {
      piVar2 = (int *)(*(int *)(iVar1 + 0x78) + 8);
    }
    iVar1 = *piVar2;
    *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
    if (iStack_c != 0) {
      piVar2 = unaff_retaddr + 2;
      *piVar2 = *piVar2 + -1;
      if (*piVar2 == 0) {
        FUN_00525340();
      }
    }
    FUN_0058cb00(&local_5c,&stack0xffffffa0);
  }
  *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + -1;
  if (*(int *)(iVar1 + 8) == 0) {
    FUN_00525340();
  }
LAB_0056c081:
  if (local_5c != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(local_5c);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0056bf00 : SUB ESP,0x5c
0056bf03 : PUSH EBX
0056bf04 : PUSH ESI
0056bf05 : XOR EBX,EBX
0056bf07 : MOV ESI,ECX
0056bf09 : MOV dword ptr [ESP + 0x8],EBX
0056bf0d : LEA ECX,[ESP + 0x10]
0056bf11 : MOV dword ptr [ESP + 0xc],EBX
0056bf15 : CALL 0x0059d080
0056bf1a : LEA ECX,[ESP + 0x30]
0056bf1e : CALL 0x00522b80
0056bf23 : FLDZ
0056bf25 : MOV EDX,dword ptr [ESI]
0056bf27 : FSTP float ptr [ESP + 0x48]
0056bf2b : MOV EDX,dword ptr [EDX + 0x20]
0056bf2e : XOR EAX,EAX
0056bf30 : MOV word ptr [ESP + 0x54],AX
0056bf35 : MOV byte ptr [ESP + 0x56],AL
0056bf39 : LEA EAX,[ESP + 0xc]
0056bf3d : PUSH EAX
0056bf3e : MOV ECX,ESI
0056bf40 : MOV dword ptr [ESP + 0x54],0x40000
0056bf48 : MOV byte ptr [ESP + 0x5b],BL
0056bf4c : MOV dword ptr [ESP + 0x50],EBX
0056bf50 : CALL EDX
0056bf52 : MOV EAX,dword ptr [ESP + 0x60]
0056bf56 : SUB EAX,EBX
0056bf58 : JZ 0x0056bff0
0056bf5e : SUB EAX,0x1
0056bf61 : JZ 0x0056bfdd
0056bf63 : SUB EAX,0x1
0056bf66 : JNZ 0x0056c081
0056bf6c : MOV ESI,dword ptr [ESP + 0x68]
0056bf70 : MOV EAX,dword ptr [ESI]
0056bf72 : MOV EDX,dword ptr [EAX + 0x5c]
0056bf75 : MOV ECX,ESI
0056bf77 : CALL EDX
0056bf79 : MOV ECX,dword ptr [ESP + 0x5c]
0056bf7d : TEST ECX,ECX
0056bf7f : JNZ 0x0056bf8d
0056bf81 : MOV ECX,dword ptr [EAX + 0x78]
0056bf84 : MOV EAX,dword ptr [ESP + 0x68]
0056bf88 : ADD ECX,0x8
0056bf8b : JMP 0x0056bfac
0056bf8d : MOV EAX,dword ptr [EAX + 0x78]
0056bf90 : PUSH ECX
0056bf91 : LEA ECX,[EAX + 0x254]
0056bf97 : MOV EBX,0x2
0056bf9c : CALL 0x00525530
0056bfa1 : INC dword ptr [EAX + 0x8]
0056bfa4 : MOV dword ptr [ESP + 0x68],EAX
0056bfa8 : LEA ECX,[ESP + 0x68]
0056bfac : MOV ECX,dword ptr [ECX]
0056bfae : MOV dword ptr [ESP + 0x8],ECX
0056bfb2 : INC dword ptr [ECX + 0x8]
0056bfb5 : TEST BL,0x2
0056bfb8 : JZ 0x0056bfc7
0056bfba : ADD dword ptr [EAX + 0x8],-0x1
0056bfbe : JNZ 0x0056bfc7
0056bfc0 : MOV ECX,EAX
0056bfc2 : CALL 0x00525340
0056bfc7 : LEA EAX,[ESP + 0x8]
0056bfcb : PUSH EAX
0056bfcc : LEA ECX,[ESP + 0x10]
0056bfd0 : PUSH ECX
0056bfd1 : MOV ECX,ESI
0056bfd3 : CALL 0x0058cb00
0056bfd8 : JMP 0x0056c06b
0056bfdd : MOV ECX,dword ptr [ESP + 0x68]
0056bfe1 : LEA EDX,[ESP + 0xc]
0056bfe5 : PUSH EDX
0056bfe6 : CALL 0x0058b050
0056bfeb : JMP 0x0056c081
0056bff0 : MOV ESI,dword ptr [ESP + 0x68]
0056bff4 : MOV EAX,dword ptr [ESI]
0056bff6 : MOV EDX,dword ptr [EAX + 0x5c]
0056bff9 : MOV ECX,ESI
0056bffb : CALL EDX
0056bffd : MOV ECX,dword ptr [ESP + 0x5c]
0056c001 : TEST ECX,ECX
0056c003 : JNZ 0x0056c011
0056c005 : MOV ECX,dword ptr [EAX + 0x78]
0056c008 : MOV EAX,dword ptr [ESP + 0x68]
0056c00c : ADD ECX,0x8
0056c00f : JMP 0x0056c030
0056c011 : MOV EAX,dword ptr [EAX + 0x78]
0056c014 : PUSH ECX
0056c015 : LEA ECX,[EAX + 0x254]
0056c01b : MOV EBX,0x1
0056c020 : CALL 0x00525530
0056c025 : ADD dword ptr [EAX + 0x8],EBX
0056c028 : MOV dword ptr [ESP + 0x68],EAX
0056c02c : LEA ECX,[ESP + 0x68]
0056c030 : MOV ECX,dword ptr [ECX]
0056c032 : MOV dword ptr [ESP + 0x8],ECX
0056c036 : INC dword ptr [ECX + 0x8]
0056c039 : TEST BL,0x1
0056c03c : JZ 0x0056c04b
0056c03e : ADD dword ptr [EAX + 0x8],-0x1
0056c042 : JNZ 0x0056c04b
0056c044 : MOV ECX,EAX
0056c046 : CALL 0x00525340
0056c04b : MOV EAX,dword ptr [ESP + 0x58]
0056c04f : PUSH 0x0
0056c051 : PUSH 0x0
0056c053 : PUSH 0x4
0056c055 : PUSH -0x1
0056c057 : PUSH 0x0
0056c059 : PUSH EAX
0056c05a : LEA ECX,[ESP + 0x20]
0056c05e : PUSH ECX
0056c05f : LEA EDX,[ESP + 0x28]
0056c063 : PUSH EDX
0056c064 : MOV ECX,ESI
0056c066 : CALL 0x00594270
0056c06b : MOV EAX,dword ptr [ESP + 0x8]
0056c06f : DEC dword ptr [EAX + 0x8]
0056c072 : MOV ECX,EAX
0056c074 : ADD EAX,0x8
0056c077 : CMP dword ptr [EAX],0x0
0056c07a : JNZ 0x0056c081
0056c07c : CALL 0x00525340
0056c081 : MOV ECX,dword ptr [ESP + 0xc]
0056c085 : POP ESI
0056c086 : POP EBX
0056c087 : TEST ECX,ECX
0056c089 : JZ 0x0056c090
0056c08b : CALL 0x004ff7c0
0056c090 : ADD ESP,0x5c
0056c093 : RET 0x4
