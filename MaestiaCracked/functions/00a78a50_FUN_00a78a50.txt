PROGRAM  : Maestia.exe
FUNCTION : FUN_00a78a50
ENTRY    : 00a78a50
BODY     : [[00a78a50, 00a78d5a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a78a50(undefined4 param_1)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  uint uVar7;
  int *unaff_EDI;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int *local_8;
  
  local_8 = (int *)0xffffffff;
  puStack_c = &LAB_00b5ff43;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  FUN_009c32f0(param_1);
  if ((DAT_00da93ec != 0) && (iVar4 = FUN_00a1a840(unaff_EDI[0x14]), iVar4 != 0)) {
    uVar7 = 0;
    do {
      if (((int)uVar7 < 0xe) || (0x13 < (int)uVar7)) {
        (**(code **)(*unaff_EDI + 0x78))(uVar7 & 0xffff,0,uVar3);
        iVar5 = (**(code **)(*unaff_EDI + 0x98))(uVar7 & 0xffff);
        if (iVar5 != 0) {
          FUN_00405eb0(iVar5 + 0x58,0,0xffffffff);
          FUN_00908bc0(iVar5);
        }
        if (*(int *)(iVar4 + 0x17f0 + uVar7 * 4) != 0) {
          piVar6 = (int *)FUN_00b04230(0xffffffff);
          if (piVar6 == (int *)0x0) {
            FUN_00406460(L"alloc failed");
            if ((int *)*DAT_00da98e8 != (int *)0x0) {
              local_8 = piVar6;
              (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                        (L"AvaGuiPlayerPreview::SetCharacterData",0x1dd,local_2c);
            }
            local_8 = (int *)0xffffffff;
            if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            local_14 = 7;
            local_28 = 0;
            local_18 = 0;
          }
          else {
            piVar6[3] = *(int *)(*(int *)(iVar4 + 0x17f0 + uVar7 * 4) + 0x14c);
            iVar5 = *(int *)(iVar4 + 0x17f0 + uVar7 * 4);
            iVar1 = *(int *)(iVar5 + 0x150);
            piVar6[7] = *(int *)(iVar5 + 0x154);
            uVar2 = DAT_017247f0;
            piVar6[6] = iVar1;
            FUN_009f3690(uVar2);
            FUN_00a07be0(1);
            (**(code **)(*piVar6 + 0x58))(1);
            (**(code **)(*unaff_EDI + 0x70))(piVar6,uVar7 & 0xffff,0);
            (**(code **)(*piVar6 + 0x70))();
          }
        }
      }
      uVar7 = uVar7 + 1;
    } while ((int)uVar7 < 0x1e);
    if ((*(int *)(iVar4 + 0x1870) != 0) && (*(int *)(*(int *)(iVar4 + 0x1870) + 0x28) != 0)) {
      (**(code **)(*unaff_EDI + 0x78))(1,0);
      iVar5 = (**(code **)(*unaff_EDI + 0x98))(1);
      if (iVar5 != 0) {
        FUN_00405eb0(iVar5 + 0x58,0,0xffffffff);
        FUN_00908bc0(iVar5);
      }
      piVar6 = (int *)FUN_00b04230(0xffffffff);
      if (piVar6 == (int *)0x0) {
        FUN_00406460(L"Alloc failed");
        local_8 = (int *)0x1;
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                    (L"AvaGuiPlayerPreview::SetCharacterData",0x1fb,local_2c);
        }
        local_8 = (int *)0xffffffff;
        if (local_14 < 8) {
          ExceptionList = local_10;
          return;
        }
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      piVar6[3] = *(int *)(*(int *)(iVar4 + 0x1870) + 0x14c);
      iVar4 = *(int *)(iVar4 + 0x1870);
      piVar6[6] = *(int *)(iVar4 + 0x150);
      uVar2 = DAT_017247f0;
      piVar6[7] = *(int *)(iVar4 + 0x154);
      FUN_009f3690(uVar2);
      FUN_00a07be0(1);
      (**(code **)(*piVar6 + 0x58))(1);
      (**(code **)(*unaff_EDI + 0x70))(piVar6,1,0);
      (**(code **)(*piVar6 + 0x70))();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a78a50 : PUSH EBP
00a78a51 : MOV EBP,ESP
00a78a53 : PUSH -0x1
00a78a55 : PUSH 0xb5ff43
00a78a5a : MOV EAX,FS:[0x0]
00a78a60 : PUSH EAX
00a78a61 : SUB ESP,0x1c
00a78a64 : PUSH EBX
00a78a65 : PUSH ESI
00a78a66 : MOV EAX,[0x00d66fa0]
00a78a6b : XOR EAX,EBP
00a78a6d : PUSH EAX
00a78a6e : LEA EAX,[EBP + -0xc]
00a78a71 : MOV FS:[0x0],EAX
00a78a77 : MOV EAX,dword ptr [EBP + 0x8]
00a78a7a : PUSH EAX
00a78a7b : LEA ECX,[EDI + 0x4c]
00a78a7e : CALL 0x009c32f0
00a78a83 : MOV ECX,dword ptr [0x00da93ec]
00a78a89 : TEST ECX,ECX
00a78a8b : JZ 0x00a78d48
00a78a91 : MOV EDX,dword ptr [EDI + 0x50]
00a78a94 : PUSH EDX
00a78a95 : CALL 0x00a1a840
00a78a9a : MOV dword ptr [EBP + 0x8],EAX
00a78a9d : TEST EAX,EAX
00a78a9f : JZ 0x00a78d48
00a78aa5 : XOR EBX,EBX
00a78aa7 : CMP EBX,0xe
00a78aaa : JL 0x00a78ab5
00a78aac : CMP EBX,0x13
00a78aaf : JLE 0x00a78bf4
00a78ab5 : MOV EAX,dword ptr [EDI]
00a78ab7 : MOV EDX,dword ptr [EAX + 0x78]
00a78aba : MOVZX ESI,BX
00a78abd : PUSH 0x0
00a78abf : PUSH ESI
00a78ac0 : MOV ECX,EDI
00a78ac2 : CALL EDX
00a78ac4 : MOV EAX,dword ptr [EDI]
00a78ac6 : MOV EDX,dword ptr [EAX + 0x98]
00a78acc : PUSH ESI
00a78acd : MOV ECX,EDI
00a78acf : CALL EDX
00a78ad1 : MOV ESI,EAX
00a78ad3 : TEST ESI,ESI
00a78ad5 : JZ 0x00a78aed
00a78ad7 : PUSH -0x1
00a78ad9 : PUSH 0x0
00a78adb : LEA EAX,[ESI + 0x58]
00a78ade : PUSH EAX
00a78adf : LEA ECX,[ESI + 0x3c]
00a78ae2 : CALL 0x00405eb0
00a78ae7 : PUSH ESI
00a78ae8 : CALL 0x00908bc0
00a78aed : MOV ECX,dword ptr [EBP + 0x8]
00a78af0 : CMP dword ptr [ECX + EBX*0x4 + 0x17f0],0x0
00a78af8 : JZ 0x00a78bf4
00a78afe : CMP BL,0x21
00a78b01 : JNC 0x00a78b19
00a78b03 : MOVZX EAX,BL
00a78b06 : CMP dword ptr [ECX + EAX*0x4 + 0x17f0],0x0
00a78b0e : JZ 0x00a78b19
00a78b10 : MOV EAX,dword ptr [ECX + EAX*0x4 + 0x16e8]
00a78b17 : JMP 0x00a78b1b
00a78b19 : XOR EAX,EAX
00a78b1b : PUSH -0x1
00a78b1d : MOV ECX,EAX
00a78b1f : CALL 0x00b04230
00a78b24 : MOV ESI,EAX
00a78b26 : ADD ESP,0x4
00a78b29 : TEST ESI,ESI
00a78b2b : JNZ 0x00a78b85
00a78b2d : PUSH 0xc506ac
00a78b32 : LEA ECX,[EBP + -0x28]
00a78b35 : CALL 0x00406460
00a78b3a : MOV dword ptr [EBP + -0x4],ESI
00a78b3d : MOV EDX,dword ptr [0x00da98e8]
00a78b43 : MOV ECX,dword ptr [EDX]
00a78b45 : CMP ECX,ESI
00a78b47 : JZ 0x00a78b5e
00a78b49 : MOV EAX,dword ptr [ECX]
00a78b4b : MOV EAX,dword ptr [EAX + 0x14]
00a78b4e : LEA EDX,[EBP + -0x28]
00a78b51 : PUSH EDX
00a78b52 : PUSH 0x1dd
00a78b57 : PUSH 0xc506c8
00a78b5c : CALL EAX
00a78b5e : MOV dword ptr [EBP + -0x4],0xffffffff
00a78b65 : CMP dword ptr [EBP + -0x10],0x8
00a78b69 : JC 0x00a78b73
00a78b6b : MOV ECX,dword ptr [EBP + -0x24]
00a78b6e : CALL 0x006f04e0
00a78b73 : XOR ECX,ECX
00a78b75 : MOV dword ptr [EBP + -0x10],0x7
00a78b7c : MOV dword ptr [EBP + -0x14],ESI
00a78b7f : MOV word ptr [EBP + -0x24],CX
00a78b83 : JMP 0x00a78bf4
00a78b85 : MOV ECX,dword ptr [EBP + 0x8]
00a78b88 : MOV EDX,dword ptr [ECX + EBX*0x4 + 0x17f0]
00a78b8f : MOV EAX,dword ptr [EDX + 0x14c]
00a78b95 : MOV dword ptr [ESI + 0xc],EAX
00a78b98 : MOV EAX,dword ptr [ECX + EBX*0x4 + 0x17f0]
00a78b9f : MOV ECX,dword ptr [EAX + 0x150]
00a78ba5 : MOV EAX,dword ptr [EAX + 0x154]
00a78bab : MOV dword ptr [ESI + 0x1c],EAX
00a78bae : MOV EAX,[0x017247f0]
00a78bb3 : MOV dword ptr [ESI + 0x18],ECX
00a78bb6 : MOV ECX,dword ptr [ESI + 0x10]
00a78bb9 : PUSH EAX
00a78bba : MOV EAX,ESI
00a78bbc : CALL 0x009f3690
00a78bc1 : MOV EAX,dword ptr [ESI + 0xb8]
00a78bc7 : PUSH 0x1
00a78bc9 : MOV ECX,ESI
00a78bcb : CALL 0x00a07be0
00a78bd0 : MOV EDX,dword ptr [ESI]
00a78bd2 : MOV EAX,dword ptr [EDX + 0x58]
00a78bd5 : PUSH 0x1
00a78bd7 : MOV ECX,ESI
00a78bd9 : CALL EAX
00a78bdb : MOV EDX,dword ptr [EDI]
00a78bdd : MOVZX EAX,BX
00a78be0 : PUSH 0x0
00a78be2 : PUSH EAX
00a78be3 : MOV EAX,dword ptr [EDX + 0x70]
00a78be6 : PUSH ESI
00a78be7 : MOV ECX,EDI
00a78be9 : CALL EAX
00a78beb : MOV EDX,dword ptr [ESI]
00a78bed : MOV EAX,dword ptr [EDX + 0x70]
00a78bf0 : MOV ECX,ESI
00a78bf2 : CALL EAX
00a78bf4 : INC EBX
00a78bf5 : CMP EBX,0x1d
00a78bf8 : JLE 0x00a78aa7
00a78bfe : MOV ECX,dword ptr [EBP + 0x8]
00a78c01 : MOV EAX,dword ptr [ECX + 0x1870]
00a78c07 : TEST EAX,EAX
00a78c09 : JZ 0x00a78d48
00a78c0f : CMP dword ptr [EAX + 0x28],0x0
00a78c13 : JBE 0x00a78d48
00a78c19 : MOV EDX,dword ptr [EDI]
00a78c1b : MOV EAX,dword ptr [EDX + 0x78]
00a78c1e : PUSH 0x0
00a78c20 : PUSH 0x1
00a78c22 : MOV ECX,EDI
00a78c24 : CALL EAX
00a78c26 : MOV EDX,dword ptr [EDI]
00a78c28 : MOV EAX,dword ptr [EDX + 0x98]
00a78c2e : PUSH 0x1
00a78c30 : MOV ECX,EDI
00a78c32 : CALL EAX
00a78c34 : MOV ESI,EAX
00a78c36 : TEST ESI,ESI
00a78c38 : JZ 0x00a78c50
00a78c3a : PUSH -0x1
00a78c3c : PUSH 0x0
00a78c3e : LEA ECX,[ESI + 0x58]
00a78c41 : PUSH ECX
00a78c42 : LEA ECX,[ESI + 0x3c]
00a78c45 : CALL 0x00405eb0
00a78c4a : PUSH ESI
00a78c4b : CALL 0x00908bc0
00a78c50 : MOV EDX,dword ptr [EBP + 0x8]
00a78c53 : MOV EAX,dword ptr [EDX + 0x1870]
00a78c59 : MOV ECX,dword ptr [EAX + 0x28]
00a78c5c : PUSH -0x1
00a78c5e : CALL 0x00b04230
00a78c63 : MOV ESI,EAX
00a78c65 : ADD ESP,0x4
00a78c68 : TEST ESI,ESI
00a78c6a : JNZ 0x00a78cdd
00a78c6c : PUSH 0xc50714
00a78c71 : LEA ECX,[EBP + -0x28]
00a78c74 : CALL 0x00406460
00a78c79 : MOV dword ptr [EBP + -0x4],0x1
00a78c80 : MOV ECX,dword ptr [0x00da98e8]
00a78c86 : MOV ECX,dword ptr [ECX]
00a78c88 : TEST ECX,ECX
00a78c8a : JZ 0x00a78ca1
00a78c8c : MOV EDX,dword ptr [ECX]
00a78c8e : MOV EDX,dword ptr [EDX + 0x14]
00a78c91 : LEA EAX,[EBP + -0x28]
00a78c94 : PUSH EAX
00a78c95 : PUSH 0x1fb
00a78c9a : PUSH 0xc50730
00a78c9f : CALL EDX
00a78ca1 : MOV dword ptr [EBP + -0x4],0xffffffff
00a78ca8 : CMP dword ptr [EBP + -0x10],0x8
00a78cac : JC 0x00a78cb6
00a78cae : MOV ECX,dword ptr [EBP + -0x24]
00a78cb1 : CALL 0x006f04e0
00a78cb6 : XOR EAX,EAX
00a78cb8 : MOV dword ptr [EBP + -0x10],0x7
00a78cbf : MOV dword ptr [EBP + -0x14],0x0
00a78cc6 : MOV word ptr [EBP + -0x24],AX
00a78cca : MOV ECX,dword ptr [EBP + -0xc]
00a78ccd : MOV dword ptr FS:[0x0],ECX
00a78cd4 : POP ECX
00a78cd5 : POP ESI
00a78cd6 : POP EBX
00a78cd7 : MOV ESP,EBP
00a78cd9 : POP EBP
00a78cda : RET 0x4
00a78cdd : MOV EAX,dword ptr [EBP + 0x8]
00a78ce0 : MOV ECX,dword ptr [EAX + 0x1870]
00a78ce6 : MOV EDX,dword ptr [ECX + 0x14c]
00a78cec : MOV dword ptr [ESI + 0xc],EDX
00a78cef : MOV EAX,dword ptr [EAX + 0x1870]
00a78cf5 : MOV ECX,dword ptr [EAX + 0x150]
00a78cfb : MOV dword ptr [ESI + 0x18],ECX
00a78cfe : MOV EDX,dword ptr [EAX + 0x154]
00a78d04 : MOV EAX,[0x017247f0]
00a78d09 : MOV ECX,dword ptr [ESI + 0x10]
00a78d0c : PUSH EAX
00a78d0d : MOV EAX,ESI
00a78d0f : MOV dword ptr [ESI + 0x1c],EDX
00a78d12 : CALL 0x009f3690
00a78d17 : MOV EAX,dword ptr [ESI + 0xb8]
00a78d1d : PUSH 0x1
00a78d1f : MOV ECX,ESI
00a78d21 : CALL 0x00a07be0
00a78d26 : MOV EDX,dword ptr [ESI]
00a78d28 : MOV EAX,dword ptr [EDX + 0x58]
00a78d2b : PUSH 0x1
00a78d2d : MOV ECX,ESI
00a78d2f : CALL EAX
00a78d31 : MOV EDX,dword ptr [EDI]
00a78d33 : MOV EAX,dword ptr [EDX + 0x70]
00a78d36 : PUSH 0x0
00a78d38 : PUSH 0x1
00a78d3a : PUSH ESI
00a78d3b : MOV ECX,EDI
00a78d3d : CALL EAX
00a78d3f : MOV EDX,dword ptr [ESI]
00a78d41 : MOV EAX,dword ptr [EDX + 0x70]
00a78d44 : MOV ECX,ESI
00a78d46 : CALL EAX
00a78d48 : MOV ECX,dword ptr [EBP + -0xc]
00a78d4b : MOV dword ptr FS:[0x0],ECX
00a78d52 : POP ECX
00a78d53 : POP ESI
00a78d54 : POP EBX
00a78d55 : MOV ESP,EBP
00a78d57 : POP EBP
00a78d58 : RET 0x4
