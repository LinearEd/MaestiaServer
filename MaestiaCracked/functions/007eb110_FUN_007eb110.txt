PROGRAM  : Maestia.exe
FUNCTION : FUN_007eb110
ENTRY    : 007eb110
BODY     : [[007eb110, 007eb2da]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_007eb110(int param_1)

{
  int iVar1;
  char cVar2;
  undefined4 *in_ECX;
  uint uVar3;
  int iVar4;
  uint *puVar5;
  uint uVar6;
  uint uVar7;
  int local_1c;
  tagRECT local_18;
  
  if ((in_ECX[0x5c] != -1) && (in_ECX[0x5b] != -1)) {
    puVar5 = (uint *)in_ECX[0x52];
    iVar4 = 0;
    local_1c = 0;
    if (puVar5 != (uint *)in_ECX[0x53]) {
      do {
        iVar1 = in_ECX[0x27];
        if (((iVar1 != 0) && (*puVar5 < *(uint *)(iVar1 + 0x60))) &&
           (puVar5[1] < *(uint *)(iVar1 + 0x5c))) {
          FUN_007ae700((in_ECX[0x5c] * *puVar5 + puVar5[1]) * 0x2df8 + in_ECX[0x22]);
          iVar4 = iVar4 + 1;
        }
        puVar5 = puVar5 + 2;
        local_1c = iVar4;
      } while (puVar5 != (uint *)in_ECX[0x53]);
    }
    SetRect(&local_18,0,0,in_ECX[0x5c],in_ECX[0x5b]);
    uVar3 = local_18.right;
    uVar6 = local_18.left;
    if ((uint)local_18.top < (uint)local_18.bottom) {
      do {
        uVar7 = uVar6;
        if (uVar6 < uVar3) {
          do {
            if (((in_ECX[0x27] != 0) && ((uint)local_18.top < (uint)in_ECX[0x5b])) &&
               ((uVar6 < (uint)in_ECX[0x5c] &&
                ((iVar4 = (in_ECX[0x5c] * local_18.top + uVar6) * 0x2df8 + in_ECX[0x22], iVar4 != 0
                 && (*(char *)(iVar4 + 0x25c0) != '\0')))))) {
              FUN_007ae700(iVar4);
              uVar3 = local_18.right;
            }
            uVar6 = uVar6 + 1;
            uVar7 = local_18.left;
          } while (uVar6 < uVar3);
        }
        local_18.top = local_18.top + 1;
        uVar6 = uVar7;
      } while ((uint)local_18.top < (uint)local_18.bottom);
    }
    FUN_007e59a0();
    (*(code *)PTR_FUN_00d6d240)(0,0xd,"PatchLoaded%3d",local_1c);
    if (*(char *)(in_ECX + 0xaad) == '\0') {
      FUN_007eb060();
    }
    cVar2 = FUN_007ea750(in_ECX,param_1);
    if (cVar2 == '\0') {
      FUN_007eace0(in_ECX,param_1);
    }
    else {
      *(undefined1 *)(param_1 + 5) = 1;
    }
    FUN_007e12b0(in_ECX,param_1);
    (**(code **)*in_ECX)(param_1);
    FUN_007e0620(in_ECX);
    FUN_007e05a0(in_ECX);
    DAT_017251c0 = DAT_017251c0 + 1;
    if (DAT_017251c0 == 100) {
      DAT_017251c0 = 0;
      _DAT_00da9a6c = 0;
      _DAT_00da9a70 = 0;
      _DAT_00da9a74 = 0;
      _DAT_00da9a78 = 0;
      _DAT_00da9a7c = 0;
      _DAT_00da9a80 = 0;
      _DAT_00da9a84 = 0;
      _DAT_00da9a88 = 0;
      _DAT_00da9a8c = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007eb110 : PUSH EBP
007eb111 : MOV EBP,ESP
007eb113 : AND ESP,0xfffffff8
007eb116 : SUB ESP,0x14
007eb119 : PUSH EBX
007eb11a : PUSH ESI
007eb11b : PUSH EDI
007eb11c : MOV EDI,ECX
007eb11e : OR EAX,0xffffffff
007eb121 : CMP dword ptr [EDI + 0x170],EAX
007eb127 : JZ 0x007eb2d2
007eb12d : CMP dword ptr [EDI + 0x16c],EAX
007eb133 : JZ 0x007eb2d2
007eb139 : MOV ESI,dword ptr [EDI + 0x148]
007eb13f : XOR EBX,EBX
007eb141 : MOV dword ptr [ESP + 0xc],EBX
007eb145 : CMP ESI,dword ptr [EDI + 0x14c]
007eb14b : JZ 0x007eb196
007eb14d : LEA ECX,[ECX]
007eb150 : MOV EAX,dword ptr [EDI + 0x9c]
007eb156 : MOV ECX,dword ptr [ESI]
007eb158 : MOV EDX,dword ptr [ESI + 0x4]
007eb15b : TEST EAX,EAX
007eb15d : JZ 0x007eb187
007eb15f : CMP ECX,dword ptr [EAX + 0x60]
007eb162 : JNC 0x007eb187
007eb164 : CMP EDX,dword ptr [EAX + 0x5c]
007eb167 : JNC 0x007eb187
007eb169 : MOV EAX,dword ptr [EDI + 0x170]
007eb16f : IMUL EAX,ECX
007eb172 : ADD EAX,EDX
007eb174 : IMUL EAX,EAX,0x2df8
007eb17a : ADD EAX,dword ptr [EDI + 0x88]
007eb180 : PUSH EAX
007eb181 : CALL 0x007ae700
007eb186 : INC EBX
007eb187 : ADD ESI,0x8
007eb18a : CMP ESI,dword ptr [EDI + 0x14c]
007eb190 : JNZ 0x007eb150
007eb192 : MOV dword ptr [ESP + 0xc],EBX
007eb196 : MOV ECX,dword ptr [EDI + 0x16c]
007eb19c : MOV EDX,dword ptr [EDI + 0x170]
007eb1a2 : PUSH ECX
007eb1a3 : PUSH EDX
007eb1a4 : PUSH 0x0
007eb1a6 : PUSH 0x0
007eb1a8 : LEA EAX,[ESP + 0x20]
007eb1ac : PUSH EAX
007eb1ad : CALL dword ptr [0x00b85430]
007eb1b3 : MOV EBX,dword ptr [ESP + 0x14]
007eb1b7 : CMP EBX,dword ptr [ESP + 0x1c]
007eb1bb : JNC 0x007eb223
007eb1bd : MOV ECX,dword ptr [ESP + 0x18]
007eb1c1 : MOV ESI,dword ptr [ESP + 0x10]
007eb1c5 : CMP ESI,ECX
007eb1c7 : JNC 0x007eb21c
007eb1c9 : LEA ESP,[ESP]
007eb1d0 : CMP dword ptr [EDI + 0x9c],0x0
007eb1d7 : JZ 0x007eb213
007eb1d9 : CMP EBX,dword ptr [EDI + 0x16c]
007eb1df : JNC 0x007eb213
007eb1e1 : MOV EAX,dword ptr [EDI + 0x170]
007eb1e7 : CMP ESI,EAX
007eb1e9 : JNC 0x007eb213
007eb1eb : IMUL EAX,EBX
007eb1ee : ADD EAX,ESI
007eb1f0 : IMUL EAX,EAX,0x2df8
007eb1f6 : ADD EAX,dword ptr [EDI + 0x88]
007eb1fc : TEST EAX,EAX
007eb1fe : JZ 0x007eb213
007eb200 : CMP byte ptr [EAX + 0x25c0],0x0
007eb207 : JZ 0x007eb213
007eb209 : PUSH EAX
007eb20a : CALL 0x007ae700
007eb20f : MOV ECX,dword ptr [ESP + 0x18]
007eb213 : INC ESI
007eb214 : CMP ESI,ECX
007eb216 : JC 0x007eb1d0
007eb218 : MOV ESI,dword ptr [ESP + 0x10]
007eb21c : INC EBX
007eb21d : CMP EBX,dword ptr [ESP + 0x1c]
007eb221 : JC 0x007eb1c5
007eb223 : CALL 0x007e59a0
007eb228 : MOV ECX,dword ptr [ESP + 0xc]
007eb22c : PUSH ECX
007eb22d : PUSH 0xc22d44
007eb232 : PUSH 0xd
007eb234 : XOR EBX,EBX
007eb236 : PUSH EBX
007eb237 : CALL dword ptr [0x00d6d240]
007eb23d : ADD ESP,0x10
007eb240 : CMP byte ptr [EDI + 0x2ab4],BL
007eb246 : JNZ 0x007eb24f
007eb248 : MOV EAX,EDI
007eb24a : CALL 0x007eb060
007eb24f : MOV ESI,dword ptr [EBP + 0x8]
007eb252 : PUSH ESI
007eb253 : PUSH EDI
007eb254 : CALL 0x007ea750
007eb259 : TEST AL,AL
007eb25b : JNZ 0x007eb266
007eb25d : PUSH ESI
007eb25e : PUSH EDI
007eb25f : CALL 0x007eace0
007eb264 : JMP 0x007eb26a
007eb266 : MOV byte ptr [ESI + 0x5],0x1
007eb26a : PUSH ESI
007eb26b : PUSH EDI
007eb26c : CALL 0x007e12b0
007eb271 : MOV EDX,dword ptr [EDI]
007eb273 : MOV EAX,dword ptr [EDX]
007eb275 : PUSH ESI
007eb276 : MOV ECX,EDI
007eb278 : CALL EAX
007eb27a : PUSH EDI
007eb27b : CALL 0x007e0620
007eb280 : PUSH EDI
007eb281 : CALL 0x007e05a0
007eb286 : MOV EAX,[0x017251c0]
007eb28b : INC EAX
007eb28c : MOV [0x017251c0],EAX
007eb291 : CMP EAX,0x64
007eb294 : JNZ 0x007eb2d2
007eb296 : MOV dword ptr [0x017251c0],EBX
007eb29c : MOV dword ptr [0x00da9a6c],EBX
007eb2a2 : MOV dword ptr [0x00da9a70],EBX
007eb2a8 : MOV dword ptr [0x00da9a74],EBX
007eb2ae : MOV dword ptr [0x00da9a78],EBX
007eb2b4 : MOV dword ptr [0x00da9a7c],EBX
007eb2ba : MOV dword ptr [0x00da9a80],EBX
007eb2c0 : MOV dword ptr [0x00da9a84],EBX
007eb2c6 : MOV dword ptr [0x00da9a88],EBX
007eb2cc : MOV dword ptr [0x00da9a8c],EBX
007eb2d2 : POP EDI
007eb2d3 : POP ESI
007eb2d4 : POP EBX
007eb2d5 : MOV ESP,EBP
007eb2d7 : POP EBP
007eb2d8 : RET 0x4
