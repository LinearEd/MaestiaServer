PROGRAM  : Maestia.exe
FUNCTION : FUN_009a7280
ENTRY    : 009a7280
BODY     : [[009a7280, 009a74c8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a7280(undefined4 param_1,undefined4 param_2)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2d63c;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(in_ECX + 0x7c) == 0) {
    if (*(int *)(DAT_0172491c + 0xc4) == 4) {
      if (((*(short *)(in_ECX + 0x84) == 1) && (iVar3 = *DAT_00da9894, iVar3 != 0)) &&
         (*(int *)(iVar3 + 0x114) != 0)) {
        piVar1 = *(int **)(iVar3 + 0x114);
        iVar3 = FUN_0081cbe0(DAT_0172491c);
        local_8 = 1;
        if (*(uint *)(iVar3 + 0x18) < 8) {
          iVar3 = iVar3 + 4;
        }
        else {
          iVar3 = *(int *)(iVar3 + 4);
        }
        (**(code **)(*piVar1 + 4))(piVar1,"SetRemainText",&DAT_00c8a1b4,iVar3);
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        if (*(uint *)(in_ECX + 0x58) < 8) {
          iVar3 = in_ECX + 0x44;
        }
        else {
          iVar3 = *(int *)(in_ECX + 0x44);
        }
        (**(code **)(*piVar1 + 4))(piVar1,"SetInputDlgSetMsg",&DAT_00c8a1c8,iVar3,uVar2);
      }
      if ((*DAT_00da9894 != 0) && (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0))
      {
        if (*(uint *)(in_ECX + 0x58) < 8) {
          iVar3 = in_ECX + 0x44;
        }
        else {
          iVar3 = *(int *)(in_ECX + 0x44);
        }
        (**(code **)(*piVar1 + 4))
                  (piVar1,"InputDlgOpen","%ls,%d,%d,%b",iVar3,*(undefined4 *)(in_ECX + 0x80),
                   *(undefined2 *)(in_ECX + 0x84),0);
      }
    }
  }
  else {
    if (*(uint *)(in_ECX + 0x58) < 8) {
      iVar3 = in_ECX + 0x44;
    }
    else {
      iVar3 = *(int *)(in_ECX + 0x44);
    }
    (**(code **)(**(int **)(in_ECX + 0x7c) + 4))
              (*(int **)(in_ECX + 0x7c),"SetInputDlgSetMsg",&DAT_00c8a150,iVar3);
    if (*(uint *)(in_ECX + 0x58) < 8) {
      iVar3 = in_ECX + 0x44;
    }
    else {
      iVar3 = *(int *)(in_ECX + 0x44);
    }
    (**(code **)(**(int **)(in_ECX + 0x7c) + 4))
              (*(int **)(in_ECX + 0x7c),"InputDlgOpen","%ls,%d,%d,%b",iVar3,
               *(undefined4 *)(in_ECX + 0x80),*(undefined2 *)(in_ECX + 0x84),0);
    if ((*(short *)(in_ECX + 0x84) == 1) && (DAT_0172491c != 0)) {
      iVar3 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 0;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      (**(code **)(**(int **)(in_ECX + 0x7c) + 4))
                (*(int **)(in_ECX + 0x7c),"SetRemainText",&DAT_00c8a194,iVar3);
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    (**(code **)(**(int **)(in_ECX + 0x7c) + 0x18))(1);
    (**(code **)(**(int **)(in_ECX + 0x7c) + 0x10))();
  }
  FUN_008f7770(param_1,param_2);
  DAT_00da9852 = 1;
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
009a7280 : PUSH EBP
009a7281 : MOV EBP,ESP
009a7283 : PUSH -0x1
009a7285 : PUSH 0xb2d63c
009a728a : MOV EAX,FS:[0x0]
009a7290 : PUSH EAX
009a7291 : SUB ESP,0x1c
009a7294 : PUSH EBX
009a7295 : PUSH ESI
009a7296 : PUSH EDI
009a7297 : MOV EAX,[0x00d66fa0]
009a729c : XOR EAX,EBP
009a729e : PUSH EAX
009a729f : LEA EAX,[EBP + -0xc]
009a72a2 : MOV FS:[0x0],EAX
009a72a8 : MOV EDI,ECX
009a72aa : CMP dword ptr [EDI + 0x7c],0x0
009a72ae : JZ 0x009a7395
009a72b4 : MOV EBX,0x8
009a72b9 : CMP dword ptr [EDI + 0x58],EBX
009a72bc : JC 0x009a72c3
009a72be : MOV ECX,dword ptr [EDI + 0x44]
009a72c1 : JMP 0x009a72c6
009a72c3 : LEA ECX,[EDI + 0x44]
009a72c6 : MOV EAX,dword ptr [EDI + 0x7c]
009a72c9 : MOV EDX,dword ptr [EAX]
009a72cb : PUSH ECX
009a72cc : PUSH 0xc8a150
009a72d1 : PUSH 0xc8a154
009a72d6 : PUSH EAX
009a72d7 : MOV EAX,dword ptr [EDX + 0x4]
009a72da : CALL EAX
009a72dc : MOVZX EDX,word ptr [EDI + 0x84]
009a72e3 : MOV ESI,dword ptr [EDI + 0x80]
009a72e9 : ADD ESP,0x10
009a72ec : CMP dword ptr [EDI + 0x58],EBX
009a72ef : JC 0x009a72f6
009a72f1 : MOV ECX,dword ptr [EDI + 0x44]
009a72f4 : JMP 0x009a72f9
009a72f6 : LEA ECX,[EDI + 0x44]
009a72f9 : MOV EAX,dword ptr [EDI + 0x7c]
009a72fc : MOV EBX,dword ptr [EAX]
009a72fe : PUSH 0x0
009a7300 : MOVZX EDX,DX
009a7303 : PUSH EDX
009a7304 : PUSH ESI
009a7305 : PUSH ECX
009a7306 : PUSH 0xc8a168
009a730b : PUSH 0xc8a178
009a7310 : PUSH EAX
009a7311 : MOV EAX,dword ptr [EBX + 0x4]
009a7314 : CALL EAX
009a7316 : MOVZX EAX,word ptr [EDI + 0x84]
009a731d : ADD ESP,0x1c
009a7320 : CMP AX,0x1
009a7324 : JNZ 0x009a737a
009a7326 : MOV EAX,[0x0172491c]
009a732b : TEST EAX,EAX
009a732d : JZ 0x009a737a
009a732f : PUSH EAX
009a7330 : MOV ECX,0xc8a188
009a7335 : LEA ESI,[EBP + -0x28]
009a7338 : CALL 0x0081cbe0
009a733d : MOV dword ptr [EBP + -0x4],0x0
009a7344 : CMP dword ptr [EAX + 0x18],0x8
009a7348 : JC 0x009a734f
009a734a : MOV EAX,dword ptr [EAX + 0x4]
009a734d : JMP 0x009a7352
009a734f : ADD EAX,0x4
009a7352 : MOV ECX,dword ptr [EDI + 0x7c]
009a7355 : MOV EDX,dword ptr [ECX]
009a7357 : PUSH EAX
009a7358 : MOV EAX,dword ptr [EDX + 0x4]
009a735b : PUSH 0xc8a194
009a7360 : PUSH 0xc8a198
009a7365 : PUSH ECX
009a7366 : CALL EAX
009a7368 : ADD ESP,0x10
009a736b : MOV dword ptr [EBP + -0x4],0xffffffff
009a7372 : LEA ECX,[EBP + -0x28]
009a7375 : CALL 0x00406560
009a737a : MOV ECX,dword ptr [EDI + 0x7c]
009a737d : MOV EDX,dword ptr [ECX]
009a737f : MOV EAX,dword ptr [EDX + 0x18]
009a7382 : PUSH 0x1
009a7384 : CALL EAX
009a7386 : MOV ECX,dword ptr [EDI + 0x7c]
009a7389 : MOV EDX,dword ptr [ECX]
009a738b : MOV EAX,dword ptr [EDX + 0x10]
009a738e : CALL EAX
009a7390 : JMP 0x009a749f
009a7395 : MOV ECX,dword ptr [0x0172491c]
009a739b : CMP dword ptr [ECX + 0xc4],0x4
009a73a2 : JNZ 0x009a749f
009a73a8 : MOVZX EAX,word ptr [EDI + 0x84]
009a73af : CMP AX,0x1
009a73b3 : JNZ 0x009a7418
009a73b5 : MOV EDX,dword ptr [0x00da9894]
009a73bb : MOV EAX,dword ptr [EDX]
009a73bd : TEST EAX,EAX
009a73bf : JZ 0x009a7418
009a73c1 : CMP dword ptr [EAX + 0x114],0x0
009a73c8 : JZ 0x009a7418
009a73ca : MOV EBX,dword ptr [EAX + 0x114]
009a73d0 : PUSH ECX
009a73d1 : MOV ECX,0xc8a1a8
009a73d6 : LEA ESI,[EBP + -0x28]
009a73d9 : CALL 0x0081cbe0
009a73de : MOV dword ptr [EBP + -0x4],0x1
009a73e5 : CMP dword ptr [EAX + 0x18],0x8
009a73e9 : JC 0x009a73f0
009a73eb : MOV EAX,dword ptr [EAX + 0x4]
009a73ee : JMP 0x009a73f3
009a73f0 : ADD EAX,0x4
009a73f3 : MOV ECX,dword ptr [EBX]
009a73f5 : MOV EDX,dword ptr [ECX + 0x4]
009a73f8 : PUSH EAX
009a73f9 : PUSH 0xc8a1b4
009a73fe : PUSH 0xc8a1b8
009a7403 : PUSH EBX
009a7404 : CALL EDX
009a7406 : ADD ESP,0x10
009a7409 : MOV dword ptr [EBP + -0x4],0xffffffff
009a7410 : LEA ECX,[EBP + -0x28]
009a7413 : CALL 0x00406560
009a7418 : MOV EAX,[0x00da9894]
009a741d : MOV EAX,dword ptr [EAX]
009a741f : TEST EAX,EAX
009a7421 : JZ 0x009a7451
009a7423 : MOV EAX,dword ptr [EAX + 0x114]
009a7429 : TEST EAX,EAX
009a742b : JZ 0x009a7451
009a742d : CMP dword ptr [EDI + 0x58],0x8
009a7431 : JC 0x009a7438
009a7433 : MOV ECX,dword ptr [EDI + 0x44]
009a7436 : JMP 0x009a743b
009a7438 : LEA ECX,[EDI + 0x44]
009a743b : MOV EDX,dword ptr [EAX]
009a743d : PUSH ECX
009a743e : PUSH 0xc8a1c8
009a7443 : PUSH 0xc8a1cc
009a7448 : PUSH EAX
009a7449 : MOV EAX,dword ptr [EDX + 0x4]
009a744c : CALL EAX
009a744e : ADD ESP,0x10
009a7451 : MOV ECX,dword ptr [0x00da9894]
009a7457 : MOV EAX,dword ptr [ECX]
009a7459 : TEST EAX,EAX
009a745b : JZ 0x009a749f
009a745d : MOV EAX,dword ptr [EAX + 0x114]
009a7463 : TEST EAX,EAX
009a7465 : JZ 0x009a749f
009a7467 : CMP dword ptr [EDI + 0x58],0x8
009a746b : MOVZX EDX,word ptr [EDI + 0x84]
009a7472 : MOV ESI,dword ptr [EDI + 0x80]
009a7478 : JC 0x009a747f
009a747a : MOV ECX,dword ptr [EDI + 0x44]
009a747d : JMP 0x009a7482
009a747f : LEA ECX,[EDI + 0x44]
009a7482 : MOV EBX,dword ptr [EAX]
009a7484 : PUSH 0x0
009a7486 : MOVZX EDX,DX
009a7489 : PUSH EDX
009a748a : PUSH ESI
009a748b : PUSH ECX
009a748c : PUSH 0xc8a1e0
009a7491 : PUSH 0xc8a1f0
009a7496 : PUSH EAX
009a7497 : MOV EAX,dword ptr [EBX + 0x4]
009a749a : CALL EAX
009a749c : ADD ESP,0x1c
009a749f : MOV ECX,dword ptr [EBP + 0xc]
009a74a2 : MOV EDX,dword ptr [EBP + 0x8]
009a74a5 : PUSH ECX
009a74a6 : PUSH EDX
009a74a7 : MOV ECX,EDI
009a74a9 : CALL 0x008f7770
009a74ae : MOV byte ptr [0x00da9852],0x1
009a74b5 : MOV ECX,dword ptr [EBP + -0xc]
009a74b8 : MOV dword ptr FS:[0x0],ECX
009a74bf : POP ECX
009a74c0 : POP EDI
009a74c1 : POP ESI
009a74c2 : POP EBX
009a74c3 : MOV ESP,EBP
009a74c5 : POP EBP
009a74c6 : RET 0x8
