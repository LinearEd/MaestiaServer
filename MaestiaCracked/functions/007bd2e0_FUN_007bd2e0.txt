PROGRAM  : Maestia.exe
FUNCTION : FUN_007bd2e0
ENTRY    : 007bd2e0
BODY     : [[007bd2e0, 007bd434]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007bd2e0(int *param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  undefined1 local_4c [32];
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  undefined1 local_18 [8];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  piVar1 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b19d03;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 4);
  local_20 = 0;
  local_28 = ".\\mss\\AvaMssMgr.cpp";
  local_24 = 0x35a;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  if ((piVar1 != (int *)0x0) && (*(int *)(in_ECX + 0x20) != 0)) {
    if ((*piVar1 != 0) && (iVar2 = _AIL_sample_status_4(*piVar1), iVar2 == 4)) {
      _AIL_end_sample_4(*piVar1);
    }
    if ((piVar1[10] != 0) && ((param_2 == 1 || (param_2 == 2)))) {
      uVar3 = FUN_0043c130(local_4c,&param_1);
      local_8._0_1_ = 1;
      FUN_004645b0(in_ECX + 0x90,local_18,uVar3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0044cb00(local_4c);
      local_8 = 0xffffffff;
      if (local_20 != 0) {
        LeaveCriticalSection(local_2c);
      }
      ExceptionList = local_10;
      return 1;
    }
  }
  if (local_20 != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007bd2e0 : PUSH EBP
007bd2e1 : MOV EBP,ESP
007bd2e3 : PUSH -0x1
007bd2e5 : PUSH 0xb19d03
007bd2ea : MOV EAX,FS:[0x0]
007bd2f0 : PUSH EAX
007bd2f1 : SUB ESP,0x3c
007bd2f4 : PUSH EBX
007bd2f5 : PUSH ESI
007bd2f6 : PUSH EDI
007bd2f7 : MOV EAX,[0x00d66fa0]
007bd2fc : XOR EAX,EBP
007bd2fe : PUSH EAX
007bd2ff : LEA EAX,[EBP + -0xc]
007bd302 : MOV FS:[0x0],EAX
007bd308 : MOV ESI,dword ptr [EBP + 0x8]
007bd30b : MOV EDI,ECX
007bd30d : LEA ECX,[EBP + -0x28]
007bd310 : LEA EAX,[EDI + 0x4]
007bd313 : XOR EBX,EBX
007bd315 : PUSH ECX
007bd316 : MOV dword ptr [EBP + -0x1c],EBX
007bd319 : MOV dword ptr [EBP + -0x28],EAX
007bd31c : MOV dword ptr [EBP + -0x24],0xc18f0c
007bd323 : MOV dword ptr [EBP + -0x20],0x35a
007bd32a : MOV dword ptr [EBP + -0x18],0x1
007bd331 : CALL 0x006ef1a0
007bd336 : MOV dword ptr [EBP + -0x4],EBX
007bd339 : CMP ESI,EBX
007bd33b : JNZ 0x007bd356
007bd33d : MOV dword ptr [EBP + -0x4],0xffffffff
007bd344 : CMP dword ptr [EBP + -0x1c],EBX
007bd347 : JZ 0x007bd41f
007bd34d : MOV EDX,dword ptr [EBP + -0x28]
007bd350 : PUSH EDX
007bd351 : JMP 0x007bd416
007bd356 : CMP dword ptr [EDI + 0x20],EBX
007bd359 : JNZ 0x007bd374
007bd35b : MOV dword ptr [EBP + -0x4],0xffffffff
007bd362 : CMP dword ptr [EBP + -0x1c],EBX
007bd365 : JZ 0x007bd41f
007bd36b : MOV EAX,dword ptr [EBP + -0x28]
007bd36e : PUSH EAX
007bd36f : JMP 0x007bd416
007bd374 : MOV EAX,dword ptr [ESI]
007bd376 : CMP EAX,EBX
007bd378 : JZ 0x007bd394
007bd37a : PUSH EAX
007bd37b : CALL dword ptr [0x00b85708]
007bd381 : CMP EAX,0x4
007bd384 : SETZ AL
007bd387 : CMP AL,BL
007bd389 : JZ 0x007bd394
007bd38b : MOV ECX,dword ptr [ESI]
007bd38d : PUSH ECX
007bd38e : CALL dword ptr [0x00b856f4]
007bd394 : CMP dword ptr [ESI + 0x28],EBX
007bd397 : JZ 0x007bd406
007bd399 : MOV EAX,dword ptr [EBP + 0xc]
007bd39c : CMP EAX,0x1
007bd39f : JZ 0x007bd3a6
007bd3a1 : CMP EAX,0x2
007bd3a4 : JNZ 0x007bd406
007bd3a6 : LEA EDX,[EBP + 0x8]
007bd3a9 : PUSH EDX
007bd3aa : LEA EAX,[EBP + -0x48]
007bd3ad : LEA ECX,[ESI + 0x14]
007bd3b0 : PUSH EAX
007bd3b1 : CALL 0x0043c130
007bd3b6 : MOV byte ptr [EBP + -0x4],0x1
007bd3ba : PUSH EAX
007bd3bb : LEA ECX,[EBP + -0x14]
007bd3be : PUSH ECX
007bd3bf : ADD EDI,0x90
007bd3c5 : PUSH EDI
007bd3c6 : CALL 0x004645b0
007bd3cb : MOV byte ptr [EBP + -0x4],BL
007bd3ce : LEA EDX,[EBP + -0x48]
007bd3d1 : PUSH EDX
007bd3d2 : CALL 0x0044cb00
007bd3d7 : MOV dword ptr [EBP + -0x4],0xffffffff
007bd3de : CMP dword ptr [EBP + -0x1c],EBX
007bd3e1 : JZ 0x007bd3f0
007bd3e3 : MOV EAX,dword ptr [EBP + -0x28]
007bd3e6 : PUSH EAX
007bd3e7 : CALL dword ptr [0x00b8511c]
007bd3ed : MOV dword ptr [EBP + -0x1c],EBX
007bd3f0 : MOV AL,0x1
007bd3f2 : MOV ECX,dword ptr [EBP + -0xc]
007bd3f5 : MOV dword ptr FS:[0x0],ECX
007bd3fc : POP ECX
007bd3fd : POP EDI
007bd3fe : POP ESI
007bd3ff : POP EBX
007bd400 : MOV ESP,EBP
007bd402 : POP EBP
007bd403 : RET 0x8
007bd406 : MOV dword ptr [EBP + -0x4],0xffffffff
007bd40d : CMP dword ptr [EBP + -0x1c],EBX
007bd410 : JZ 0x007bd41f
007bd412 : MOV ECX,dword ptr [EBP + -0x28]
007bd415 : PUSH ECX
007bd416 : CALL dword ptr [0x00b8511c]
007bd41c : MOV dword ptr [EBP + -0x1c],EBX
007bd41f : XOR AL,AL
007bd421 : MOV ECX,dword ptr [EBP + -0xc]
007bd424 : MOV dword ptr FS:[0x0],ECX
007bd42b : POP ECX
007bd42c : POP EDI
007bd42d : POP ESI
007bd42e : POP EBX
007bd42f : MOV ESP,EBP
007bd431 : POP EBP
007bd432 : RET 0x8
