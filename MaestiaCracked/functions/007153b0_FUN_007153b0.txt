PROGRAM  : Maestia.exe
FUNCTION : FUN_007153b0
ENTRY    : 007153b0
BODY     : [[007153b0, 00715526]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007153b0(void)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  undefined4 *puVar4;
  code *pcVar5;
  int iVar6;
  int in_ECX;
  
  iVar3 = FUN_004c5420();
  if (*(char *)(iVar3 + 0x14) != '\0') {
    puVar4 = (undefined4 *)FUN_004c5420();
    if (*(char *)(puVar4 + 5) != '\0') {
      (**(code **)(*(int *)*puVar4 + 0x30))((int *)*puVar4);
    }
    *(undefined1 *)(puVar4 + 5) = 0;
  }
  if ((*(int *)(in_ECX + 0xc) != 0) && (*(int *)(in_ECX + 8) != -1)) {
    puVar4 = (undefined4 *)FUN_004c5420();
    iVar3 = (**(code **)(**(int **)(DAT_017251ac + 0x18) + 400))
                      (*(int **)(DAT_017251ac + 0x18),0,*puVar4,0,0x18);
    if (-1 < iVar3) {
      piVar1 = *(int **)(DAT_017251ac + 0x18);
      piVar2 = *(int **)(DAT_017251f8 + 0xe8);
      if (*(char *)((int)piVar2 + 0x157) == '\0') {
        pcVar5 = *(code **)(*piVar2 + 0x30);
      }
      else {
        pcVar5 = *(code **)(*piVar2 + 0x20);
      }
      (*pcVar5)();
      (**(code **)(*piVar1 + 0xb0))(piVar1,3,piVar2 + 0x1d);
      piVar2 = *(int **)(DAT_017251f8 + 0xe8);
      (**(code **)(*piVar2 + 0x1c))();
      (**(code **)(*piVar1 + 0xb0))(piVar1,2,piVar2 + 0x2d);
      (**(code **)(*piVar1 + 0xb0))(piVar1,0x100,*(int *)(in_ECX + 4) + 0x20);
      (**(code **)(*piVar1 + 0x1ac))(piVar1,0);
      (**(code **)(*piVar1 + 0x170))(piVar1,0);
      (**(code **)(*piVar1 + 0x164))(piVar1,0x42);
      (**(code **)(*piVar1 + 0xe4))(piVar1,0x89,0);
      (**(code **)(*piVar1 + 0xe4))(piVar1,0xe,0);
      iVar3 = *piVar1;
      iVar6 = FUN_004c5420();
      (**(code **)(iVar3 + 0x1a0))(piVar1,*(undefined4 *)(iVar6 + 8));
      (**(code **)(*piVar1 + 0x148))
                (piVar1,1,*(undefined4 *)(in_ECX + 8),0,*(undefined4 *)(in_ECX + 0xc),0,
                 *(undefined4 *)(in_ECX + 0x10));
      (**(code **)(*piVar1 + 0xe4))(piVar1,0xe,1);
      *(undefined4 *)(in_ECX + 8) = 0xffffffff;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007153b0 : PUSH ESI
007153b1 : PUSH EDI
007153b2 : MOV EDI,ECX
007153b4 : CALL 0x004c5420
007153b9 : CMP byte ptr [EAX + 0x14],0x0
007153bd : JZ 0x007153da
007153bf : CALL 0x004c5420
007153c4 : MOV ESI,EAX
007153c6 : CMP byte ptr [ESI + 0x14],0x0
007153ca : JZ 0x007153d6
007153cc : MOV EAX,dword ptr [ESI]
007153ce : MOV ECX,dword ptr [EAX]
007153d0 : MOV EDX,dword ptr [ECX + 0x30]
007153d3 : PUSH EAX
007153d4 : CALL EDX
007153d6 : MOV byte ptr [ESI + 0x14],0x0
007153da : CMP dword ptr [EDI + 0xc],0x0
007153de : JZ 0x00715524
007153e4 : CMP dword ptr [EDI + 0x8],-0x1
007153e8 : JZ 0x00715524
007153ee : CALL 0x004c5420
007153f3 : MOV EAX,dword ptr [EAX]
007153f5 : MOV ECX,dword ptr [0x017251ac]
007153fb : MOV ECX,dword ptr [ECX + 0x18]
007153fe : MOV EDX,dword ptr [ECX]
00715400 : PUSH 0x18
00715402 : PUSH 0x0
00715404 : PUSH EAX
00715405 : PUSH 0x0
00715407 : PUSH ECX
00715408 : MOV ECX,dword ptr [EDX + 0x190]
0071540e : CALL ECX
00715410 : TEST EAX,EAX
00715412 : JL 0x00715524
00715418 : MOV EAX,[0x017251f8]
0071541d : MOV EDX,dword ptr [0x017251ac]
00715423 : MOV ESI,dword ptr [EDX + 0x18]
00715426 : PUSH EBX
00715427 : MOV EBX,dword ptr [EAX + 0xe8]
0071542d : CMP byte ptr [EBX + 0x157],0x0
00715434 : MOV EDX,dword ptr [EBX]
00715436 : MOV ECX,EBX
00715438 : JZ 0x0071543f
0071543a : MOV EAX,dword ptr [EDX + 0x20]
0071543d : JMP 0x00715442
0071543f : MOV EAX,dword ptr [EDX + 0x30]
00715442 : CALL EAX
00715444 : MOV ECX,dword ptr [ESI]
00715446 : MOV EDX,dword ptr [ECX + 0xb0]
0071544c : ADD EBX,0x74
0071544f : PUSH EBX
00715450 : PUSH 0x3
00715452 : PUSH ESI
00715453 : CALL EDX
00715455 : MOV EAX,[0x017251f8]
0071545a : MOV EBX,dword ptr [EAX + 0xe8]
00715460 : MOV EDX,dword ptr [EBX]
00715462 : MOV EAX,dword ptr [EDX + 0x1c]
00715465 : MOV ECX,EBX
00715467 : CALL EAX
00715469 : MOV ECX,dword ptr [ESI]
0071546b : MOV EDX,dword ptr [ECX + 0xb0]
00715471 : ADD EBX,0xb4
00715477 : PUSH EBX
00715478 : PUSH 0x2
0071547a : PUSH ESI
0071547b : CALL EDX
0071547d : MOV ECX,dword ptr [EDI + 0x4]
00715480 : MOV EAX,dword ptr [ESI]
00715482 : MOV EDX,dword ptr [EAX + 0xb0]
00715488 : ADD ECX,0x20
0071548b : PUSH ECX
0071548c : PUSH 0x100
00715491 : PUSH ESI
00715492 : CALL EDX
00715494 : MOV EAX,dword ptr [ESI]
00715496 : MOV ECX,dword ptr [EAX + 0x1ac]
0071549c : PUSH 0x0
0071549e : PUSH ESI
0071549f : CALL ECX
007154a1 : MOV EDX,dword ptr [ESI]
007154a3 : MOV EAX,dword ptr [EDX + 0x170]
007154a9 : PUSH 0x0
007154ab : PUSH ESI
007154ac : CALL EAX
007154ae : MOV ECX,dword ptr [ESI]
007154b0 : MOV EDX,dword ptr [ECX + 0x164]
007154b6 : PUSH 0x42
007154b8 : PUSH ESI
007154b9 : CALL EDX
007154bb : MOV EAX,dword ptr [ESI]
007154bd : MOV ECX,dword ptr [EAX + 0xe4]
007154c3 : PUSH 0x0
007154c5 : PUSH 0x89
007154ca : PUSH ESI
007154cb : CALL ECX
007154cd : MOV EDX,dword ptr [ESI]
007154cf : MOV EAX,dword ptr [EDX + 0xe4]
007154d5 : PUSH 0x0
007154d7 : PUSH 0xe
007154d9 : PUSH ESI
007154da : CALL EAX
007154dc : MOV EBX,dword ptr [ESI]
007154de : CALL 0x004c5420
007154e3 : MOV ECX,dword ptr [EAX + 0x8]
007154e6 : MOV EDX,dword ptr [EBX + 0x1a0]
007154ec : PUSH ECX
007154ed : PUSH ESI
007154ee : CALL EDX
007154f0 : MOV ECX,dword ptr [EDI + 0x10]
007154f3 : MOV EDX,dword ptr [EDI + 0xc]
007154f6 : MOV EAX,dword ptr [ESI]
007154f8 : PUSH ECX
007154f9 : MOV ECX,dword ptr [EDI + 0x8]
007154fc : PUSH 0x0
007154fe : PUSH EDX
007154ff : MOV EDX,dword ptr [EAX + 0x148]
00715505 : PUSH 0x0
00715507 : PUSH ECX
00715508 : PUSH 0x1
0071550a : PUSH ESI
0071550b : CALL EDX
0071550d : MOV EAX,dword ptr [ESI]
0071550f : MOV ECX,dword ptr [EAX + 0xe4]
00715515 : PUSH 0x1
00715517 : PUSH 0xe
00715519 : PUSH ESI
0071551a : CALL ECX
0071551c : MOV dword ptr [EDI + 0x8],0xffffffff
00715523 : POP EBX
00715524 : POP EDI
00715525 : POP ESI
00715526 : RET
