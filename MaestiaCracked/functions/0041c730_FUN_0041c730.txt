PROGRAM  : Maestia.exe
FUNCTION : FUN_0041c730
ENTRY    : 0041c730
BODY     : [[0041c730, 0041c868] [0041c87a, 0041c935]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0041c730(uint param_1,void *param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  uint in_ECX;
  uint uVar6;
  uint extraout_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7c0f0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar4 = *(int *)(param_1 + 4);
  if (iVar4 == 0) {
    uVar6 = 0;
  }
  else {
    uVar6 = *(int *)(param_1 + 0xc) - iVar4 >> 1;
  }
  if (in_ECX != 0) {
    iVar2 = *(int *)(param_1 + 8);
    iVar4 = iVar2 - iVar4 >> 1;
    if (0x7fffffffU - iVar4 < in_ECX) {
      iVar4 = FUN_00429be0();
      uVar6 = extraout_ECX;
    }
    uVar1 = iVar4 + in_ECX;
    if (uVar6 < uVar1) {
      if (0x7fffffff - (uVar6 >> 1) < uVar6) {
        param_1 = 0;
      }
      else {
        param_1 = uVar6 + (uVar6 >> 1);
      }
      if (param_1 < uVar1) {
        param_1 = uVar1;
      }
      iVar4 = FUN_004060f0(param_1,0);
      local_8 = 0;
      FUN_004d19e0();
      FUN_0041d020(*(undefined4 *)(iVar3 + 4));
      FUN_0041d020(param_2);
      local_8 = 0xffffffff;
      if (*(int *)(iVar3 + 4) == 0) {
        *(uint *)(iVar3 + 0xc) = iVar4 + param_1 * 2;
        *(uint *)(iVar3 + 8) =
             iVar4 + (in_ECX + (*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4) >> 1)) * 2;
        *(int *)(iVar3 + 4) = iVar4;
        ExceptionList = local_10;
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if ((uint)(iVar2 - (int)param_2 >> 1) < in_ECX) {
      FUN_0041d020(param_2);
      local_8 = 2;
      FUN_004d19e0();
      local_8 = 0xffffffff;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + in_ECX * 2;
    }
    else {
      iVar4 = iVar2 + in_ECX * -2;
      uVar5 = FUN_0041d020(iVar4);
      *(undefined4 *)(param_1 + 8) = uVar5;
      iVar4 = iVar4 - (int)param_2 >> 1;
      if (0 < iVar4) {
        _memmove_s((void *)(iVar2 + iVar4 * -2),iVar4 * 2,param_2,iVar4 * 2);
      }
    }
    FUN_004d4070(param_2);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0041c730 : PUSH EBP
0041c731 : MOV EBP,ESP
0041c733 : PUSH -0x1
0041c735 : PUSH 0xb7c0f0
0041c73a : MOV EAX,FS:[0x0]
0041c740 : PUSH EAX
0041c741 : SUB ESP,0x10
0041c744 : PUSH EBX
0041c745 : PUSH ESI
0041c746 : PUSH EDI
0041c747 : MOV EAX,[0x00d66fa0]
0041c74c : XOR EAX,EBP
0041c74e : PUSH EAX
0041c74f : LEA EAX,[EBP + -0xc]
0041c752 : MOV FS:[0x0],EAX
0041c758 : MOV dword ptr [EBP + -0x10],ESP
0041c75b : MOV ESI,ECX
0041c75d : MOV EBX,dword ptr [EBP + 0x8]
0041c760 : MOV EDX,dword ptr [EBX + 0x4]
0041c763 : TEST EDX,EDX
0041c765 : JNZ 0x0041c76b
0041c767 : XOR ECX,ECX
0041c769 : JMP 0x0041c774
0041c76b : MOV EAX,dword ptr [EBX + 0xc]
0041c76e : SUB EAX,EDX
0041c770 : SAR EAX,0x1
0041c772 : MOV ECX,EAX
0041c774 : TEST ESI,ESI
0041c776 : JZ 0x0041c922
0041c77c : MOV EDI,dword ptr [EBX + 0x8]
0041c77f : MOV EAX,EDI
0041c781 : SUB EAX,EDX
0041c783 : SAR EAX,0x1
0041c785 : MOV EDX,0x7fffffff
0041c78a : SUB EDX,EAX
0041c78c : CMP EDX,ESI
0041c78e : JNC 0x0041c795
0041c790 : CALL 0x00429be0
0041c795 : LEA EDX,[EAX + ESI*0x1]
0041c798 : CMP ECX,EDX
0041c79a : JNC 0x0041c87a
0041c7a0 : MOV EAX,ECX
0041c7a2 : SHR EAX,0x1
0041c7a4 : MOV EDI,0x7fffffff
0041c7a9 : SUB EDI,EAX
0041c7ab : CMP EDI,ECX
0041c7ad : JNC 0x0041c7bb
0041c7af : MOV dword ptr [EBP + 0x8],0x0
0041c7b6 : MOV ECX,dword ptr [EBP + 0x8]
0041c7b9 : JMP 0x0041c7c0
0041c7bb : ADD ECX,EAX
0041c7bd : MOV dword ptr [EBP + 0x8],ECX
0041c7c0 : CMP ECX,EDX
0041c7c2 : JNC 0x0041c7c9
0041c7c4 : MOV dword ptr [EBP + 0x8],EDX
0041c7c7 : MOV ECX,EDX
0041c7c9 : PUSH 0x0
0041c7cb : PUSH ECX
0041c7cc : CALL 0x004060f0
0041c7d1 : ADD ESP,0x8
0041c7d4 : MOV dword ptr [EBP + -0x14],EAX
0041c7d7 : MOV ECX,dword ptr [EBP + 0xc]
0041c7da : SUB ECX,dword ptr [EBX + 0x4]
0041c7dd : SAR ECX,0x1
0041c7df : MOV dword ptr [EBP + -0x1c],ECX
0041c7e2 : MOV dword ptr [EBP + -0x4],0x0
0041c7e9 : LEA EDI,[EAX + ECX*0x2]
0041c7ec : MOV EDX,dword ptr [EBP + 0x10]
0041c7ef : CALL 0x004d19e0
0041c7f4 : MOV dword ptr [EBP + -0x18],0x1
0041c7fb : MOV EAX,dword ptr [EBX + 0x4]
0041c7fe : PUSH EAX
0041c7ff : MOV EDI,dword ptr [EBP + -0x14]
0041c802 : MOV ECX,EDI
0041c804 : MOV EAX,dword ptr [EBP + 0xc]
0041c807 : CALL 0x0041d020
0041c80c : MOV dword ptr [EBP + -0x18],0x2
0041c813 : MOV ECX,dword ptr [EBP + -0x1c]
0041c816 : ADD ECX,ESI
0041c818 : LEA ECX,[EDI + ECX*0x2]
0041c81b : MOV EDX,dword ptr [EBP + 0xc]
0041c81e : PUSH EDX
0041c81f : MOV EAX,dword ptr [EBX + 0x8]
0041c822 : CALL 0x0041d020
0041c827 : MOV dword ptr [EBP + -0x4],0xffffffff
0041c82e : MOV ECX,dword ptr [EBX + 0x4]
0041c831 : MOV EAX,dword ptr [EBX + 0x8]
0041c834 : SUB EAX,ECX
0041c836 : SAR EAX,0x1
0041c838 : ADD ESI,EAX
0041c83a : TEST ECX,ECX
0041c83c : JZ 0x0041c843
0041c83e : CALL 0x006f04e0
0041c843 : MOV ECX,dword ptr [EBP + 0x8]
0041c846 : LEA EDX,[EDI + ECX*0x2]
0041c849 : MOV dword ptr [EBX + 0xc],EDX
0041c84c : LEA EAX,[EDI + ESI*0x2]
0041c84f : MOV dword ptr [EBX + 0x8],EAX
0041c852 : MOV dword ptr [EBX + 0x4],EDI
0041c855 : MOV ECX,dword ptr [EBP + -0xc]
0041c858 : MOV dword ptr FS:[0x0],ECX
0041c85f : POP ECX
0041c860 : POP EDI
0041c861 : POP ESI
0041c862 : POP EBX
0041c863 : MOV ESP,EBP
0041c865 : POP EBP
0041c866 : RET 0xc
0041c87a : MOV ECX,EDI
0041c87c : MOV EAX,dword ptr [EBP + 0xc]
0041c87f : SUB ECX,EAX
0041c881 : SAR ECX,0x1
0041c883 : CMP ECX,ESI
0041c885 : JNC 0x0041c8d2
0041c887 : MOV EDX,dword ptr [EBP + 0x10]
0041c88a : MOVZX ECX,word ptr [EDX]
0041c88d : MOV dword ptr [EBP + 0x8],ECX
0041c890 : LEA ECX,[ESI + ESI*0x1]
0041c893 : MOV dword ptr [EBP + 0x10],ECX
0041c896 : ADD ECX,EAX
0041c898 : PUSH EAX
0041c899 : MOV EAX,EDI
0041c89b : CALL 0x0041d020
0041c8a0 : MOV dword ptr [EBP + -0x4],0x2
0041c8a7 : MOV EDI,dword ptr [EBX + 0x8]
0041c8aa : MOV EDX,EDI
0041c8ac : SUB EDX,dword ptr [EBP + 0xc]
0041c8af : SAR EDX,0x1
0041c8b1 : SUB ESI,EDX
0041c8b3 : LEA EDX,[EBP + 0x8]
0041c8b6 : CALL 0x004d19e0
0041c8bb : MOV dword ptr [EBP + -0x4],0xffffffff
0041c8c2 : MOV EAX,dword ptr [EBP + 0x10]
0041c8c5 : ADD dword ptr [EBX + 0x8],EAX
0041c8c8 : MOV ECX,dword ptr [EBX + 0x8]
0041c8cb : SUB ECX,EAX
0041c8cd : MOV EAX,dword ptr [EBP + 0xc]
0041c8d0 : JMP 0x0041c916
0041c8d2 : MOV ECX,dword ptr [EBP + 0x10]
0041c8d5 : MOVZX EDX,word ptr [ECX]
0041c8d8 : MOV dword ptr [EBP + 0x8],EDX
0041c8db : LEA EAX,[ESI + ESI*0x1]
0041c8de : MOV dword ptr [EBP + 0x10],EAX
0041c8e1 : MOV ESI,EDI
0041c8e3 : SUB ESI,EAX
0041c8e5 : PUSH ESI
0041c8e6 : MOV ECX,EDI
0041c8e8 : MOV EAX,EDI
0041c8ea : CALL 0x0041d020
0041c8ef : MOV dword ptr [EBX + 0x8],EAX
0041c8f2 : MOV EAX,dword ptr [EBP + 0xc]
0041c8f5 : SUB ESI,EAX
0041c8f7 : SAR ESI,0x1
0041c8f9 : TEST ESI,ESI
0041c8fb : JLE 0x0041c911
0041c8fd : LEA ECX,[ESI + ESI*0x1]
0041c900 : PUSH ECX
0041c901 : PUSH EAX
0041c902 : PUSH ECX
0041c903 : SUB EDI,ECX
0041c905 : PUSH EDI
0041c906 : CALL 0x00634101
0041c90b : ADD ESP,0x10
0041c90e : MOV EAX,dword ptr [EBP + 0xc]
0041c911 : MOV ECX,dword ptr [EBP + 0x10]
0041c914 : ADD ECX,EAX
0041c916 : PUSH EAX
0041c917 : LEA EDX,[EBP + 0x8]
0041c91a : CALL 0x004d4070
0041c91f : ADD ESP,0x4
0041c922 : MOV ECX,dword ptr [EBP + -0xc]
0041c925 : MOV dword ptr FS:[0x0],ECX
0041c92c : POP ECX
0041c92d : POP EDI
0041c92e : POP ESI
0041c92f : POP EBX
0041c930 : MOV ESP,EBP
0041c932 : POP EBP
0041c933 : RET 0xc
