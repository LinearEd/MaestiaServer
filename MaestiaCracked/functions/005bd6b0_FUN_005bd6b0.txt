PROGRAM  : Maestia.exe
FUNCTION : FUN_005bd6b0
ENTRY    : 005bd6b0
BODY     : [[005bd6b0, 005bd948]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bd6b0(uint param_1)

{
  byte bVar1;
  undefined1 *puVar2;
  undefined4 *puVar3;
  uint uVar4;
  undefined1 uVar5;
  char cVar6;
  char *pcVar7;
  int *piVar8;
  byte *pbVar9;
  int iVar10;
  byte *pbVar11;
  byte *pbVar12;
  undefined4 uVar13;
  bool bVar14;
  undefined4 *puStack_34;
  GRefCountNTSImpl *pGStack_30;
  uint uStack_2c;
  GRefCountNTSImpl *pGStack_28;
  undefined4 uStack_24;
  GRefCountNTSImpl *pGStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 uStack_14;
  undefined4 uStack_10;
  undefined4 uStack_c;
  undefined2 uStack_8;
  undefined1 uStack_6;
  undefined1 uStack_5;
  undefined1 uStack_4;
  
  uVar4 = param_1;
  puVar2 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar2 = 0;
  if (*(int *)(uVar4 + 0x1c) == 0) {
    return;
  }
  uStack_24 = FUN_005296a0();
  if (((*(int *)(uVar4 + 0x1c) < 2) || (pcVar7 = (char *)FUN_00526260(1), *pcVar7 == '\0')) ||
     (pcVar7 = (char *)FUN_00526260(1), *pcVar7 == '\x01')) {
    piVar8 = (int *)FUN_00597b80(&pGStack_28);
    pGStack_30 = (GRefCountNTSImpl *)*piVar8;
    if (pGStack_30 != (GRefCountNTSImpl *)0x0) {
      *(int *)(pGStack_30 + 4) = *(int *)(pGStack_30 + 4) + 1;
    }
    if (pGStack_28 != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(pGStack_28);
    }
  }
  else {
    uVar13 = *(undefined4 *)(uVar4 + 0x18);
    FUN_00526260(1);
    pGStack_30 = (GRefCountNTSImpl *)FUN_00525fa0(uVar13);
    if (pGStack_30 != (GRefCountNTSImpl *)0x0) {
      *(int *)(pGStack_30 + 4) = *(int *)(pGStack_30 + 4) + 1;
    }
  }
  if (*(int *)(uVar4 + 0x1c) < 3) {
    uStack_2c = uStack_2c & 0xffffff00;
  }
  else {
    uVar13 = *(undefined4 *)(uVar4 + 0x18);
    FUN_00526260(2);
    uVar5 = FUN_00526120(uVar13);
    uStack_2c = CONCAT31(uStack_2c._1_3_,uVar5);
  }
  uVar13 = *(undefined4 *)(uVar4 + 0x18);
  FUN_00526260(0);
  FUN_005272e0(&puStack_34,uVar13,0xffffffff,0);
  puVar3 = puStack_34;
  param_1 = param_1 & 0xffffff00;
  pbVar11 = (byte *)*puStack_34;
  pbVar12 = &DAT_00b911bc;
  pbVar9 = pbVar11;
  do {
    bVar1 = *pbVar9;
    bVar14 = bVar1 < *pbVar12;
    if (bVar1 != *pbVar12) {
LAB_005bd7c0:
      iVar10 = (1 - (uint)bVar14) - (uint)(bVar14 != 0);
      goto LAB_005bd7c5;
    }
    if (bVar1 == 0) break;
    bVar1 = pbVar9[1];
    bVar14 = bVar1 < pbVar12[1];
    if (bVar1 != pbVar12[1]) goto LAB_005bd7c0;
    pbVar9 = pbVar9 + 2;
    pbVar12 = pbVar12 + 2;
  } while (bVar1 != 0);
  iVar10 = 0;
LAB_005bd7c5:
  if (iVar10 == 0) {
    uVar13 = 0x26;
  }
  else {
    pbVar9 = &DAT_00b911b4;
    do {
      bVar1 = *pbVar11;
      bVar14 = bVar1 < *pbVar9;
      if (bVar1 != *pbVar9) {
LAB_005bd800:
        iVar10 = (1 - (uint)bVar14) - (uint)(bVar14 != 0);
        goto LAB_005bd805;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar11[1];
      bVar14 = bVar1 < pbVar9[1];
      if (bVar1 != pbVar9[1]) goto LAB_005bd800;
      pbVar11 = pbVar11 + 2;
      pbVar9 = pbVar9 + 2;
    } while (bVar1 != 0);
    iVar10 = 0;
LAB_005bd805:
    if (iVar10 == 0) {
      uVar13 = 0x28;
    }
    else {
      cVar6 = FUN_004ffc90(&DAT_00b86c34);
      if (cVar6 == '\0') {
        cVar6 = FUN_004ffc90("right");
        if (cVar6 == '\0') {
          cVar6 = FUN_004ffc90(&DAT_00b911b0);
          if (cVar6 == '\0') {
            cVar6 = FUN_004ffc90("shifttab");
            if (cVar6 == '\0') goto LAB_005bd929;
            param_1 = CONCAT31(param_1._1_3_,1);
          }
          uVar13 = 9;
        }
        else {
          uVar13 = 0x27;
        }
      }
      else {
        uVar13 = 0x25;
      }
    }
  }
  uStack_18 = 0;
  uStack_14 = 0;
  uStack_10 = 0;
  uStack_c = 0;
  pGStack_20 = (GRefCountNTSImpl *)0x0;
  uStack_1c = 0xffffffff;
  uStack_8 = 0;
  uStack_6 = 0;
  uStack_5 = 0;
  uStack_4 = 0;
  FUN_00572770(&pGStack_20,uStack_2c);
  if (pGStack_30 != (GRefCountNTSImpl *)0x0) {
    *(int *)(pGStack_30 + 4) = *(int *)(pGStack_30 + 4) + 1;
  }
  if (pGStack_20 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(pGStack_20);
  }
  pGStack_20 = pGStack_30;
  uStack_6 = 1;
  FUN_00572880(uVar13,5,&param_1,&pGStack_20);
  FUN_00570800(&pGStack_20);
  FUN_00526c80(pGStack_20);
  puVar3 = puStack_34;
  if (pGStack_20 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(pGStack_20);
    puVar3 = puStack_34;
  }
LAB_005bd929:
  piVar8 = puVar3 + 2;
  *piVar8 = *piVar8 + -1;
  if (*piVar8 == 0) {
    FUN_00525340();
  }
  if (pGStack_30 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(pGStack_30);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bd6b0 : SUB ESP,0x34
005bd6b3 : PUSH EBX
005bd6b4 : PUSH ESI
005bd6b5 : PUSH EDI
005bd6b6 : MOV EDI,dword ptr [ESP + 0x44]
005bd6ba : MOV ESI,dword ptr [EDI + 0x4]
005bd6bd : MOV ECX,ESI
005bd6bf : CALL 0x00526400
005bd6c4 : XOR EBX,EBX
005bd6c6 : MOV byte ptr [ESI],BL
005bd6c8 : CMP dword ptr [EDI + 0x1c],EBX
005bd6cb : JZ 0x005bd942
005bd6d1 : MOV ECX,dword ptr [EDI + 0x18]
005bd6d4 : CALL 0x005296a0
005bd6d9 : CMP dword ptr [EDI + 0x1c],0x2
005bd6dd : MOV ESI,EAX
005bd6df : MOV dword ptr [ESP + 0x1c],ESI
005bd6e3 : JL 0x005bd721
005bd6e5 : PUSH 0x1
005bd6e7 : MOV ECX,EDI
005bd6e9 : CALL 0x00526260
005bd6ee : CMP byte ptr [EAX],BL
005bd6f0 : JZ 0x005bd721
005bd6f2 : PUSH 0x1
005bd6f4 : MOV ECX,EDI
005bd6f6 : CALL 0x00526260
005bd6fb : CMP byte ptr [EAX],0x1
005bd6fe : JZ 0x005bd721
005bd700 : MOV EAX,dword ptr [EDI + 0x18]
005bd703 : PUSH EAX
005bd704 : PUSH 0x1
005bd706 : MOV ECX,EDI
005bd708 : CALL 0x00526260
005bd70d : MOV ECX,EAX
005bd70f : CALL 0x00525fa0
005bd714 : CMP EAX,EBX
005bd716 : JZ 0x005bd71b
005bd718 : INC dword ptr [EAX + 0x4]
005bd71b : MOV dword ptr [ESP + 0x10],EAX
005bd71f : JMP 0x005bd747
005bd721 : LEA ECX,[ESP + 0x18]
005bd725 : PUSH ECX
005bd726 : MOV ECX,ESI
005bd728 : CALL 0x00597b80
005bd72d : MOV EAX,dword ptr [EAX]
005bd72f : CMP EAX,EBX
005bd731 : JZ 0x005bd736
005bd733 : INC dword ptr [EAX + 0x4]
005bd736 : MOV ECX,dword ptr [ESP + 0x18]
005bd73a : MOV dword ptr [ESP + 0x10],EAX
005bd73e : CMP ECX,EBX
005bd740 : JZ 0x005bd747
005bd742 : CALL 0x004ff7c0
005bd747 : CMP dword ptr [EDI + 0x1c],0x3
005bd74b : JL 0x005bd767
005bd74d : MOV EDX,dword ptr [EDI + 0x18]
005bd750 : PUSH EDX
005bd751 : PUSH 0x2
005bd753 : MOV ECX,EDI
005bd755 : CALL 0x00526260
005bd75a : MOV ECX,EAX
005bd75c : CALL 0x00526120
005bd761 : MOV byte ptr [ESP + 0x14],AL
005bd765 : JMP 0x005bd76b
005bd767 : MOV byte ptr [ESP + 0x14],BL
005bd76b : MOV ESI,dword ptr [EDI + 0x18]
005bd76e : PUSH EBP
005bd76f : PUSH EBX
005bd770 : MOV ECX,EDI
005bd772 : CALL 0x00526260
005bd777 : PUSH EBX
005bd778 : PUSH -0x1
005bd77a : PUSH ESI
005bd77b : LEA ECX,[ESP + 0x1c]
005bd77f : PUSH ECX
005bd780 : MOV ECX,EAX
005bd782 : CALL 0x005272e0
005bd787 : MOV EBP,dword ptr [ESP + 0x10]
005bd78b : MOV byte ptr [ESP + 0x48],BL
005bd78f : MOV ESI,dword ptr [EBP]
005bd792 : MOV ECX,0xb911bc
005bd797 : MOV EAX,ESI
005bd799 : LEA ESP,[ESP]
005bd7a0 : MOV DL,byte ptr [EAX]
005bd7a2 : CMP DL,byte ptr [ECX]
005bd7a4 : JNZ 0x005bd7c0
005bd7a6 : CMP DL,BL
005bd7a8 : JZ 0x005bd7bc
005bd7aa : MOV DL,byte ptr [EAX + 0x1]
005bd7ad : CMP DL,byte ptr [ECX + 0x1]
005bd7b0 : JNZ 0x005bd7c0
005bd7b2 : ADD EAX,0x2
005bd7b5 : ADD ECX,0x2
005bd7b8 : CMP DL,BL
005bd7ba : JNZ 0x005bd7a0
005bd7bc : XOR EAX,EAX
005bd7be : JMP 0x005bd7c5
005bd7c0 : SBB EAX,EAX
005bd7c2 : SBB EAX,-0x1
005bd7c5 : CMP EAX,EBX
005bd7c7 : JNZ 0x005bd7d3
005bd7c9 : MOV ESI,0x26
005bd7ce : JMP 0x005bd874
005bd7d3 : MOV ECX,0xb911b4
005bd7d8 : MOV EAX,ESI
005bd7da : LEA EBX,[EBX]
005bd7e0 : MOV DL,byte ptr [EAX]
005bd7e2 : CMP DL,byte ptr [ECX]
005bd7e4 : JNZ 0x005bd800
005bd7e6 : CMP DL,BL
005bd7e8 : JZ 0x005bd7fc
005bd7ea : MOV DL,byte ptr [EAX + 0x1]
005bd7ed : CMP DL,byte ptr [ECX + 0x1]
005bd7f0 : JNZ 0x005bd800
005bd7f2 : ADD EAX,0x2
005bd7f5 : ADD ECX,0x2
005bd7f8 : CMP DL,BL
005bd7fa : JNZ 0x005bd7e0
005bd7fc : XOR EAX,EAX
005bd7fe : JMP 0x005bd805
005bd800 : SBB EAX,EAX
005bd802 : SBB EAX,-0x1
005bd805 : CMP EAX,EBX
005bd807 : JNZ 0x005bd810
005bd809 : MOV ESI,0x28
005bd80e : JMP 0x005bd874
005bd810 : PUSH 0xb86c34
005bd815 : LEA ECX,[ESP + 0x14]
005bd819 : CALL 0x004ffc90
005bd81e : TEST AL,AL
005bd820 : JZ 0x005bd829
005bd822 : MOV ESI,0x25
005bd827 : JMP 0x005bd874
005bd829 : PUSH 0xb86c3c
005bd82e : LEA ECX,[ESP + 0x14]
005bd832 : CALL 0x004ffc90
005bd837 : TEST AL,AL
005bd839 : JZ 0x005bd842
005bd83b : MOV ESI,0x27
005bd840 : JMP 0x005bd874
005bd842 : PUSH 0xb911b0
005bd847 : LEA ECX,[ESP + 0x14]
005bd84b : CALL 0x004ffc90
005bd850 : TEST AL,AL
005bd852 : JNZ 0x005bd86f
005bd854 : PUSH 0xb911a4
005bd859 : LEA ECX,[ESP + 0x14]
005bd85d : CALL 0x004ffc90
005bd862 : TEST AL,AL
005bd864 : JZ 0x005bd924
005bd86a : MOV byte ptr [ESP + 0x48],0x1
005bd86f : MOV ESI,0x9
005bd874 : FLDZ
005bd876 : MOV EAX,dword ptr [ESP + 0x18]
005bd87a : MOV EBP,dword ptr [ESP + 0x20]
005bd87e : FST float ptr [ESP + 0x2c]
005bd882 : PUSH EAX
005bd883 : FST float ptr [ESP + 0x34]
005bd887 : LEA ECX,[ESP + 0x28]
005bd88b : FST float ptr [ESP + 0x38]
005bd88f : XOR EDX,EDX
005bd891 : FSTP float ptr [ESP + 0x3c]
005bd895 : PUSH ECX
005bd896 : MOV ECX,EBP
005bd898 : MOV dword ptr [ESP + 0x2c],EBX
005bd89c : MOV dword ptr [ESP + 0x30],0xffffffff
005bd8a4 : MOV word ptr [ESP + 0x44],DX
005bd8a9 : MOV byte ptr [ESP + 0x46],BL
005bd8ad : MOV byte ptr [ESP + 0x47],BL
005bd8b1 : MOV byte ptr [ESP + 0x48],BL
005bd8b5 : CALL 0x00572770
005bd8ba : MOV EAX,dword ptr [ESP + 0x14]
005bd8be : CMP EAX,EBX
005bd8c0 : JZ 0x005bd8c5
005bd8c2 : INC dword ptr [EAX + 0x4]
005bd8c5 : MOV ECX,dword ptr [ESP + 0x24]
005bd8c9 : CMP ECX,EBX
005bd8cb : JZ 0x005bd8d6
005bd8cd : CALL 0x004ff7c0
005bd8d2 : MOV EAX,dword ptr [ESP + 0x14]
005bd8d6 : LEA EDX,[ESP + 0x24]
005bd8da : PUSH EDX
005bd8db : MOV dword ptr [ESP + 0x28],EAX
005bd8df : LEA EAX,[ESP + 0x4c]
005bd8e3 : PUSH EAX
005bd8e4 : PUSH 0x5
005bd8e6 : PUSH ESI
005bd8e7 : MOV ECX,EBP
005bd8e9 : MOV byte ptr [ESP + 0x4e],0x1
005bd8ee : CALL 0x00572880
005bd8f3 : LEA ECX,[ESP + 0x24]
005bd8f7 : PUSH ECX
005bd8f8 : MOV ECX,EBP
005bd8fa : CALL 0x00570800
005bd8ff : MOV EDX,dword ptr [ESP + 0x24]
005bd903 : MOV ECX,dword ptr [EDI + 0x4]
005bd906 : PUSH EDX
005bd907 : CALL 0x00526c80
005bd90c : MOV ECX,dword ptr [ESP + 0x24]
005bd910 : CMP ECX,EBX
005bd912 : JZ 0x005bd919
005bd914 : CALL 0x004ff7c0
005bd919 : MOV EAX,dword ptr [ESP + 0x10]
005bd91d : MOV ECX,EAX
005bd91f : ADD EAX,0x8
005bd922 : JMP 0x005bd929
005bd924 : MOV ECX,EBP
005bd926 : LEA EAX,[EBP + 0x8]
005bd929 : DEC dword ptr [EAX]
005bd92b : CMP dword ptr [EAX],EBX
005bd92d : JNZ 0x005bd934
005bd92f : CALL 0x00525340
005bd934 : MOV ECX,dword ptr [ESP + 0x14]
005bd938 : CMP ECX,EBX
005bd93a : JZ 0x005bd941
005bd93c : CALL 0x004ff7c0
005bd941 : POP EBP
005bd942 : POP EDI
005bd943 : POP ESI
005bd944 : POP EBX
005bd945 : ADD ESP,0x34
005bd948 : RET
