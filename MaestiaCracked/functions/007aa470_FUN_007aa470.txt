PROGRAM  : Maestia.exe
FUNCTION : FUN_007aa470
ENTRY    : 007aa470
BODY     : [[007aa470, 007aa6b5]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x007aa559) */
/* WARNING: Removing unreachable block (ram,0x007aa4e7) */
/* WARNING: Removing unreachable block (ram,0x007aa520) */
/* WARNING: Removing unreachable block (ram,0x007aa592) */

void FUN_007aa470(void)

{
  int *piVar1;
  uint uVar2;
  undefined4 *in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b47e6d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_FUN_00cd6540;
  local_8 = 7;
  piVar1 = (int *)in_ECX[0x44a];
  if (piVar1 != (int *)0x0) {
    (**(code **)(*piVar1 + 8))(piVar1,uVar2);
    in_ECX[0x44a] = 0;
  }
  if (in_ECX[0x46b] != in_ECX[0x46c]) {
    in_ECX[0x46c] = in_ECX[0x46b];
  }
  if (in_ECX[0x46f] != in_ECX[0x470]) {
    in_ECX[0x470] = in_ECX[0x46f];
  }
  if (in_ECX[0x473] != in_ECX[0x474]) {
    in_ECX[0x474] = in_ECX[0x473];
  }
  if (in_ECX[0x477] != in_ECX[0x478]) {
    in_ECX[0x478] = in_ECX[0x477];
  }
  local_8._0_1_ = 6;
  in_ECX[0x4d1] = &PTR_FUN_00cdec94;
  DeleteCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x4d2));
  local_8 = CONCAT31(local_8._1_3_,5);
  if (7 < (uint)in_ECX[0x4c6]) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x4c6] = 7;
  in_ECX[0x4c5] = 0;
  *(undefined2 *)(in_ECX + 0x4c1) = 0;
  local_8._0_1_ = 4;
  FUN_00478500(in_ECX + 0x47a);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (in_ECX[0x477] != 0) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x477] = 0;
  in_ECX[0x478] = 0;
  in_ECX[0x479] = 0;
  local_8 = CONCAT31(local_8._1_3_,2);
  if (in_ECX[0x473] == 0) {
    in_ECX[0x473] = 0;
    in_ECX[0x474] = 0;
    in_ECX[0x475] = 0;
    local_8 = CONCAT31(local_8._1_3_,1);
    if (in_ECX[0x46f] != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    in_ECX[0x46f] = 0;
    in_ECX[0x470] = 0;
    in_ECX[0x471] = 0;
    local_8 = (uint)local_8._1_3_ << 8;
    if (in_ECX[0x46b] == 0) {
      in_ECX[0x46b] = 0;
      in_ECX[0x46c] = 0;
      in_ECX[0x46d] = 0;
      local_8 = 0xffffffff;
      FUN_007a5340();
      ExceptionList = local_10;
      return;
    }
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
007aa470 : PUSH EBP
007aa471 : MOV EBP,ESP
007aa473 : PUSH -0x1
007aa475 : PUSH 0xb47e6d
007aa47a : MOV EAX,FS:[0x0]
007aa480 : PUSH EAX
007aa481 : PUSH ECX
007aa482 : PUSH EBX
007aa483 : PUSH ESI
007aa484 : PUSH EDI
007aa485 : MOV EAX,[0x00d66fa0]
007aa48a : XOR EAX,EBP
007aa48c : PUSH EAX
007aa48d : LEA EAX,[EBP + -0xc]
007aa490 : MOV FS:[0x0],EAX
007aa496 : MOV ESI,ECX
007aa498 : MOV dword ptr [EBP + -0x10],ESI
007aa49b : MOV dword ptr [ESI],0xcd6540
007aa4a1 : MOV dword ptr [EBP + -0x4],0x7
007aa4a8 : MOV EAX,dword ptr [ESI + 0x1128]
007aa4ae : XOR EBX,EBX
007aa4b0 : CMP EAX,EBX
007aa4b2 : JZ 0x007aa4c2
007aa4b4 : MOV ECX,dword ptr [EAX]
007aa4b6 : MOV EDX,dword ptr [ECX + 0x8]
007aa4b9 : PUSH EAX
007aa4ba : CALL EDX
007aa4bc : MOV dword ptr [ESI + 0x1128],EBX
007aa4c2 : MOV ECX,dword ptr [ESI + 0x11b0]
007aa4c8 : MOV EDI,dword ptr [ESI + 0x11ac]
007aa4ce : CMP EDI,ECX
007aa4d0 : JZ 0x007aa4fb
007aa4d2 : MOV EAX,ECX
007aa4d4 : SUB EAX,ECX
007aa4d6 : SAR EAX,0x2
007aa4d9 : LEA EDX,[EAX*0x4 + 0x0]
007aa4e0 : LEA EBX,[EDX + EDI*0x1]
007aa4e3 : TEST EAX,EAX
007aa4e5 : JLE 0x007aa4f3
007aa4e7 : PUSH EDX
007aa4e8 : PUSH ECX
007aa4e9 : PUSH EDX
007aa4ea : PUSH EDI
007aa4eb : CALL 0x00634101
007aa4f0 : ADD ESP,0x10
007aa4f3 : MOV dword ptr [ESI + 0x11b0],EBX
007aa4f9 : XOR EBX,EBX
007aa4fb : MOV ECX,dword ptr [ESI + 0x11c0]
007aa501 : MOV EDI,dword ptr [ESI + 0x11bc]
007aa507 : CMP EDI,ECX
007aa509 : JZ 0x007aa534
007aa50b : MOV EAX,ECX
007aa50d : SUB EAX,ECX
007aa50f : SAR EAX,0x2
007aa512 : LEA EDX,[EAX*0x4 + 0x0]
007aa519 : LEA EBX,[EDX + EDI*0x1]
007aa51c : TEST EAX,EAX
007aa51e : JLE 0x007aa52c
007aa520 : PUSH EDX
007aa521 : PUSH ECX
007aa522 : PUSH EDX
007aa523 : PUSH EDI
007aa524 : CALL 0x00634101
007aa529 : ADD ESP,0x10
007aa52c : MOV dword ptr [ESI + 0x11c0],EBX
007aa532 : XOR EBX,EBX
007aa534 : MOV ECX,dword ptr [ESI + 0x11d0]
007aa53a : MOV EDI,dword ptr [ESI + 0x11cc]
007aa540 : CMP EDI,ECX
007aa542 : JZ 0x007aa56d
007aa544 : MOV EAX,ECX
007aa546 : SUB EAX,ECX
007aa548 : SAR EAX,0x2
007aa54b : LEA EDX,[EAX*0x4 + 0x0]
007aa552 : LEA EBX,[EDX + EDI*0x1]
007aa555 : TEST EAX,EAX
007aa557 : JLE 0x007aa565
007aa559 : PUSH EDX
007aa55a : PUSH ECX
007aa55b : PUSH EDX
007aa55c : PUSH EDI
007aa55d : CALL 0x00634101
007aa562 : ADD ESP,0x10
007aa565 : MOV dword ptr [ESI + 0x11d0],EBX
007aa56b : XOR EBX,EBX
007aa56d : MOV ECX,dword ptr [ESI + 0x11e0]
007aa573 : MOV EDI,dword ptr [ESI + 0x11dc]
007aa579 : CMP EDI,ECX
007aa57b : JZ 0x007aa5a6
007aa57d : MOV EAX,ECX
007aa57f : SUB EAX,ECX
007aa581 : SAR EAX,0x2
007aa584 : LEA EDX,[EAX*0x4 + 0x0]
007aa58b : LEA EBX,[EDX + EDI*0x1]
007aa58e : TEST EAX,EAX
007aa590 : JLE 0x007aa59e
007aa592 : PUSH EDX
007aa593 : PUSH ECX
007aa594 : PUSH EDX
007aa595 : PUSH EDI
007aa596 : CALL 0x00634101
007aa59b : ADD ESP,0x10
007aa59e : MOV dword ptr [ESI + 0x11e0],EBX
007aa5a4 : XOR EBX,EBX
007aa5a6 : MOV byte ptr [EBP + -0x4],0x6
007aa5aa : LEA EAX,[ESI + 0x1348]
007aa5b0 : PUSH EAX
007aa5b1 : MOV dword ptr [ESI + 0x1344],0xcdec94
007aa5bb : CALL dword ptr [0x00b850fc]
007aa5c1 : MOV byte ptr [EBP + -0x4],0x5
007aa5c5 : CMP dword ptr [ESI + 0x1318],0x8
007aa5cc : JC 0x007aa5d9
007aa5ce : MOV ECX,dword ptr [ESI + 0x1304]
007aa5d4 : CALL 0x006f04e0
007aa5d9 : MOV dword ptr [ESI + 0x1318],0x7
007aa5e3 : MOV dword ptr [ESI + 0x1314],EBX
007aa5e9 : XOR ECX,ECX
007aa5eb : MOV word ptr [ESI + 0x1304],CX
007aa5f2 : MOV byte ptr [EBP + -0x4],0x4
007aa5f6 : LEA EDX,[ESI + 0x11e8]
007aa5fc : PUSH EDX
007aa5fd : CALL 0x00478500
007aa602 : MOV byte ptr [EBP + -0x4],0x3
007aa606 : MOV ECX,dword ptr [ESI + 0x11dc]
007aa60c : CMP ECX,EBX
007aa60e : JZ 0x007aa615
007aa610 : CALL 0x006f04e0
007aa615 : MOV dword ptr [ESI + 0x11dc],EBX
007aa61b : MOV dword ptr [ESI + 0x11e0],EBX
007aa621 : MOV dword ptr [ESI + 0x11e4],EBX
007aa627 : MOV byte ptr [EBP + -0x4],0x2
007aa62b : MOV ECX,dword ptr [ESI + 0x11cc]
007aa631 : CMP ECX,EBX
007aa633 : JZ 0x007aa63a
007aa635 : CALL 0x006f04e0
007aa63a : MOV dword ptr [ESI + 0x11cc],EBX
007aa640 : MOV dword ptr [ESI + 0x11d0],EBX
007aa646 : MOV dword ptr [ESI + 0x11d4],EBX
007aa64c : MOV byte ptr [EBP + -0x4],0x1
007aa650 : MOV ECX,dword ptr [ESI + 0x11bc]
007aa656 : CMP ECX,EBX
007aa658 : JZ 0x007aa65f
007aa65a : CALL 0x006f04e0
007aa65f : MOV dword ptr [ESI + 0x11bc],EBX
007aa665 : MOV dword ptr [ESI + 0x11c0],EBX
007aa66b : MOV dword ptr [ESI + 0x11c4],EBX
007aa671 : MOV byte ptr [EBP + -0x4],0x0
007aa675 : MOV ECX,dword ptr [ESI + 0x11ac]
007aa67b : CMP ECX,EBX
007aa67d : JZ 0x007aa684
007aa67f : CALL 0x006f04e0
007aa684 : MOV dword ptr [ESI + 0x11ac],EBX
007aa68a : MOV dword ptr [ESI + 0x11b0],EBX
007aa690 : MOV dword ptr [ESI + 0x11b4],EBX
007aa696 : MOV dword ptr [EBP + -0x4],0xffffffff
007aa69d : MOV ECX,ESI
007aa69f : CALL 0x007a5340
007aa6a4 : MOV ECX,dword ptr [EBP + -0xc]
007aa6a7 : MOV dword ptr FS:[0x0],ECX
007aa6ae : POP ECX
007aa6af : POP EDI
007aa6b0 : POP ESI
007aa6b1 : POP EBX
007aa6b2 : MOV ESP,EBP
007aa6b4 : POP EBP
007aa6b5 : RET
