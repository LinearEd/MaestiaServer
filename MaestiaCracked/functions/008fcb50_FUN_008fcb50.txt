PROGRAM  : Maestia.exe
FUNCTION : FUN_008fcb50
ENTRY    : 008fcb50
BODY     : [[008fcb50, 008fcd9f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008fcb50(int param_1,undefined4 param_2)

{
  wchar_t wVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  wchar_t *pwVar5;
  int *in_ECX;
  wchar_t *pwVar6;
  wchar_t *pwVar7;
  bool bVar8;
  undefined1 local_60 [4];
  int local_5c;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b600d6;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff90;
  ExceptionList = &local_14;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  FUN_00406360(&DAT_00c6234c,1);
  local_c = 0;
  uVar3 = FUN_00403dd0(param_2,uVar2);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_60,uVar3,local_50,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_c = CONCAT31(local_c._1_3_,4);
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  if (*DAT_00da9894 == 0) {
    local_c = 0xffffffff;
    if (local_5c == 0) {
      ExceptionList = local_14;
      return;
    }
    FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if (*(int *)(*DAT_00da9894 + 0x114) != 0) {
    pwVar5 = (wchar_t *)(param_1 + 4);
    pwVar7 = pwVar5;
    if (7 < *(uint *)(param_1 + 0x18)) {
      pwVar7 = *(wchar_t **)pwVar5;
    }
    pwVar6 = L"onOpen";
    do {
      wVar1 = *pwVar7;
      bVar8 = (ushort)wVar1 < (ushort)*pwVar6;
      if (wVar1 != *pwVar6) {
LAB_008fccbd:
        iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_008fccc2;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar7[1];
      bVar8 = (ushort)wVar1 < (ushort)pwVar6[1];
      if (wVar1 != pwVar6[1]) goto LAB_008fccbd;
      pwVar7 = pwVar7 + 2;
      pwVar6 = pwVar6 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_008fccc2:
    if (iVar4 == 0) {
      (**(code **)(*in_ECX + 0x18))(0,300);
    }
    pwVar7 = pwVar5;
    if (7 < *(uint *)(param_1 + 0x18)) {
      pwVar7 = *(wchar_t **)pwVar5;
    }
    pwVar6 = L"onInit";
    do {
      wVar1 = *pwVar7;
      bVar8 = (ushort)wVar1 < (ushort)*pwVar6;
      if (wVar1 != *pwVar6) {
LAB_008fcd16:
        iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_008fcd1b;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar7[1];
      bVar8 = (ushort)wVar1 < (ushort)pwVar6[1];
      if (wVar1 != pwVar6[1]) goto LAB_008fcd16;
      pwVar7 = pwVar7 + 2;
      pwVar6 = pwVar6 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_008fcd1b:
    if (iVar4 == 0) {
      FUN_008fcad0();
    }
    else {
      if (7 < *(uint *)(param_1 + 0x18)) {
        pwVar5 = *(wchar_t **)pwVar5;
      }
      pwVar7 = L"onClose";
      do {
        wVar1 = *pwVar5;
        bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
        if (wVar1 != *pwVar7) {
LAB_008fcd66:
          iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
          goto LAB_008fcd6b;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar5[1];
        bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
        if (wVar1 != pwVar7[1]) goto LAB_008fcd66;
        pwVar5 = pwVar5 + 2;
        pwVar7 = pwVar7 + 2;
      } while (wVar1 != L'\0');
      iVar4 = 0;
LAB_008fcd6b:
      if (iVar4 == 0) {
        (**(code **)(*in_ECX + 0x20))();
      }
    }
  }
  local_c = 0xffffffff;
  FUN_004042c0();
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
008fcb50 : PUSH EBP
008fcb51 : MOV EBP,ESP
008fcb53 : AND ESP,0xfffffff8
008fcb56 : PUSH -0x1
008fcb58 : PUSH 0xb600d6
008fcb5d : MOV EAX,FS:[0x0]
008fcb63 : PUSH EAX
008fcb64 : SUB ESP,0x50
008fcb67 : PUSH EBX
008fcb68 : PUSH ESI
008fcb69 : PUSH EDI
008fcb6a : MOV EAX,[0x00d66fa0]
008fcb6f : XOR EAX,ESP
008fcb71 : PUSH EAX
008fcb72 : LEA EAX,[ESP + 0x60]
008fcb76 : MOV FS:[0x0],EAX
008fcb7c : MOV dword ptr [ESP + 0x10],ECX
008fcb80 : PUSH 0x1
008fcb82 : XOR EAX,EAX
008fcb84 : MOV EDI,0x7
008fcb89 : XOR EBX,EBX
008fcb8b : PUSH 0xc6234c
008fcb90 : LEA ECX,[ESP + 0x2c]
008fcb94 : MOV dword ptr [ESP + 0x44],EDI
008fcb98 : MOV dword ptr [ESP + 0x40],EBX
008fcb9c : MOV word ptr [ESP + 0x30],AX
008fcba1 : CALL 0x00406360
008fcba6 : MOV dword ptr [ESP + 0x68],EBX
008fcbaa : MOV ECX,dword ptr [EBP + 0xc]
008fcbad : PUSH ECX
008fcbae : LEA ESI,[ESP + 0x44]
008fcbb2 : CALL 0x00403dd0
008fcbb7 : ADD ESP,0x4
008fcbba : MOV byte ptr [ESP + 0x68],0x1
008fcbbf : PUSH EBX
008fcbc0 : LEA EDX,[ESP + 0x28]
008fcbc4 : PUSH EDX
008fcbc5 : PUSH EAX
008fcbc6 : LEA EAX,[ESP + 0x20]
008fcbca : PUSH EAX
008fcbcb : CALL 0x0070cd60
008fcbd0 : ADD ESP,0x10
008fcbd3 : MOV byte ptr [ESP + 0x68],0x3
008fcbd8 : MOV ESI,0x8
008fcbdd : CMP dword ptr [ESP + 0x58],ESI
008fcbe1 : JC 0x008fcbec
008fcbe3 : MOV ECX,dword ptr [ESP + 0x44]
008fcbe7 : CALL 0x006f04e0
008fcbec : XOR ECX,ECX
008fcbee : MOV dword ptr [ESP + 0x58],EDI
008fcbf2 : MOV dword ptr [ESP + 0x54],EBX
008fcbf6 : MOV word ptr [ESP + 0x44],CX
008fcbfb : MOV byte ptr [ESP + 0x68],0x4
008fcc00 : CMP dword ptr [ESP + 0x3c],ESI
008fcc04 : JC 0x008fcc0f
008fcc06 : MOV ECX,dword ptr [ESP + 0x28]
008fcc0a : CALL 0x006f04e0
008fcc0f : MOV EAX,[0x00da9894]
008fcc14 : XOR EDX,EDX
008fcc16 : MOV dword ptr [ESP + 0x3c],EDI
008fcc1a : MOV dword ptr [ESP + 0x38],EBX
008fcc1e : MOV word ptr [ESP + 0x28],DX
008fcc23 : MOV EAX,dword ptr [EAX]
008fcc25 : CMP EAX,EBX
008fcc27 : JNZ 0x008fcc74
008fcc29 : MOV dword ptr [ESP + 0x68],0xffffffff
008fcc31 : MOV EAX,dword ptr [ESP + 0x18]
008fcc35 : CMP EAX,EBX
008fcc37 : JZ 0x008fcc53
008fcc39 : MOV ECX,dword ptr [ESP + 0x10]
008fcc3d : MOV EDI,dword ptr [ESP + 0x1c]
008fcc41 : PUSH ECX
008fcc42 : CALL 0x00405450
008fcc47 : MOV ECX,dword ptr [ESP + 0x1c]
008fcc4b : ADD ESP,0x4
008fcc4e : CALL 0x006f04e0
008fcc53 : MOV dword ptr [ESP + 0x18],EBX
008fcc57 : MOV dword ptr [ESP + 0x1c],EBX
008fcc5b : MOV dword ptr [ESP + 0x20],EBX
008fcc5f : MOV ECX,dword ptr [ESP + 0x60]
008fcc63 : MOV dword ptr FS:[0x0],ECX
008fcc6a : POP ECX
008fcc6b : POP EDI
008fcc6c : POP ESI
008fcc6d : POP EBX
008fcc6e : MOV ESP,EBP
008fcc70 : POP EBP
008fcc71 : RET 0x8
008fcc74 : CMP dword ptr [EAX + 0x114],EBX
008fcc7a : JZ 0x008fcd7a
008fcc80 : MOV ESI,dword ptr [EBP + 0x8]
008fcc83 : CMP dword ptr [ESI + 0x18],0x8
008fcc87 : LEA EDI,[ESI + 0x4]
008fcc8a : JC 0x008fcc90
008fcc8c : MOV EAX,dword ptr [EDI]
008fcc8e : JMP 0x008fcc92
008fcc90 : MOV EAX,EDI
008fcc92 : MOV ECX,0xc6239c
008fcc97 : MOV DX,word ptr [EAX]
008fcc9a : CMP DX,word ptr [ECX]
008fcc9d : JNZ 0x008fccbd
008fcc9f : CMP DX,BX
008fcca2 : JZ 0x008fccb9
008fcca4 : MOV DX,word ptr [EAX + 0x2]
008fcca8 : CMP DX,word ptr [ECX + 0x2]
008fccac : JNZ 0x008fccbd
008fccae : ADD EAX,0x4
008fccb1 : ADD ECX,0x4
008fccb4 : CMP DX,BX
008fccb7 : JNZ 0x008fcc97
008fccb9 : XOR EAX,EAX
008fccbb : JMP 0x008fccc2
008fccbd : SBB EAX,EAX
008fccbf : SBB EAX,-0x1
008fccc2 : CMP EAX,EBX
008fccc4 : JNZ 0x008fccd7
008fccc6 : MOV ECX,dword ptr [ESP + 0x10]
008fccca : MOV EDX,dword ptr [ECX]
008fcccc : MOV EAX,dword ptr [EDX + 0x18]
008fcccf : PUSH 0x12c
008fccd4 : PUSH EBX
008fccd5 : CALL EAX
008fccd7 : MOV ESI,dword ptr [ESI + 0x18]
008fccda : CMP ESI,0x8
008fccdd : JC 0x008fcce3
008fccdf : MOV EAX,dword ptr [EDI]
008fcce1 : JMP 0x008fcce5
008fcce3 : MOV EAX,EDI
008fcce5 : MOV ECX,0xc623ac
008fccea : LEA EBX,[EBX]
008fccf0 : MOV DX,word ptr [EAX]
008fccf3 : CMP DX,word ptr [ECX]
008fccf6 : JNZ 0x008fcd16
008fccf8 : CMP DX,BX
008fccfb : JZ 0x008fcd12
008fccfd : MOV DX,word ptr [EAX + 0x2]
008fcd01 : CMP DX,word ptr [ECX + 0x2]
008fcd05 : JNZ 0x008fcd16
008fcd07 : ADD EAX,0x4
008fcd0a : ADD ECX,0x4
008fcd0d : CMP DX,BX
008fcd10 : JNZ 0x008fccf0
008fcd12 : XOR EAX,EAX
008fcd14 : JMP 0x008fcd1b
008fcd16 : SBB EAX,EAX
008fcd18 : SBB EAX,-0x1
008fcd1b : CMP EAX,EBX
008fcd1d : JNZ 0x008fcd2a
008fcd1f : MOV EDX,dword ptr [ESP + 0x10]
008fcd23 : CALL 0x008fcad0
008fcd28 : JMP 0x008fcd7a
008fcd2a : CMP ESI,0x8
008fcd2d : JC 0x008fcd33
008fcd2f : MOV EAX,dword ptr [EDI]
008fcd31 : JMP 0x008fcd35
008fcd33 : MOV EAX,EDI
008fcd35 : MOV ECX,0xc623bc
008fcd3a : LEA EBX,[EBX]
008fcd40 : MOV DX,word ptr [EAX]
008fcd43 : CMP DX,word ptr [ECX]
008fcd46 : JNZ 0x008fcd66
008fcd48 : CMP DX,BX
008fcd4b : JZ 0x008fcd62
008fcd4d : MOV DX,word ptr [EAX + 0x2]
008fcd51 : CMP DX,word ptr [ECX + 0x2]
008fcd55 : JNZ 0x008fcd66
008fcd57 : ADD EAX,0x4
008fcd5a : ADD ECX,0x4
008fcd5d : CMP DX,BX
008fcd60 : JNZ 0x008fcd40
008fcd62 : XOR EAX,EAX
008fcd64 : JMP 0x008fcd6b
008fcd66 : SBB EAX,EAX
008fcd68 : SBB EAX,-0x1
008fcd6b : CMP EAX,EBX
008fcd6d : JNZ 0x008fcd7a
008fcd6f : MOV ECX,dword ptr [ESP + 0x10]
008fcd73 : MOV EDX,dword ptr [ECX]
008fcd75 : MOV EAX,dword ptr [EDX + 0x20]
008fcd78 : CALL EAX
008fcd7a : MOV dword ptr [ESP + 0x68],0xffffffff
008fcd82 : LEA ESI,[ESP + 0x14]
008fcd86 : CALL 0x004042c0
008fcd8b : MOV ECX,dword ptr [ESP + 0x60]
008fcd8f : MOV dword ptr FS:[0x0],ECX
008fcd96 : POP ECX
008fcd97 : POP EDI
008fcd98 : POP ESI
008fcd99 : POP EBX
008fcd9a : MOV ESP,EBP
008fcd9c : POP EBP
008fcd9d : RET 0x8
