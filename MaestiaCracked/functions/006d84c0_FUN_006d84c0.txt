PROGRAM  : Maestia.exe
FUNCTION : FUN_006d84c0
ENTRY    : 006d84c0
BODY     : [[006d84c0, 006d865c]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_006d84c0(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int *unaff_ESI;
  uint uStack_8;
  int *piStack_4;
  
  iVar2 = unaff_ESI[0x49];
  if (iVar2 != 1) {
    if ((iVar2 < 1) || (4 < iVar2)) {
      *(undefined4 *)(*unaff_ESI + 0x14) = 0x1a;
      *(int *)(*unaff_ESI + 0x18) = unaff_ESI[0x49];
      *(undefined4 *)(*unaff_ESI + 0x1c) = 4;
      (**(code **)*unaff_ESI)();
    }
    iVar2 = FUN_006d9580(unaff_ESI[7],unaff_ESI[0x44] * 8);
    unaff_ESI[0x4e] = iVar2;
    uVar3 = FUN_006d9580(unaff_ESI[8],unaff_ESI[0x45] * 8);
    unaff_ESI[0x4f] = uVar3;
    unaff_ESI[0x50] = 0;
    uStack_8 = 0;
    if (0 < unaff_ESI[0x49]) {
      piStack_4 = unaff_ESI + 0x4a;
      do {
        iVar2 = *piStack_4;
        uVar3 = *(uint *)(iVar2 + 8);
        uVar1 = *(uint *)(iVar2 + 0xc);
        *(uint *)(iVar2 + 0x40) = *(int *)(iVar2 + 0x24) * uVar3;
        uVar4 = *(uint *)(iVar2 + 0x1c) % uVar3;
        iVar5 = uVar1 * uVar3;
        *(uint *)(iVar2 + 0x34) = uVar3;
        *(uint *)(iVar2 + 0x38) = uVar1;
        *(int *)(iVar2 + 0x3c) = iVar5;
        if (uVar4 == 0) {
          uVar4 = uVar3;
        }
        *(uint *)(iVar2 + 0x44) = uVar4;
        uVar3 = *(uint *)(iVar2 + 0x20) % uVar1;
        if (uVar3 == 0) {
          uVar3 = uVar1;
        }
        *(uint *)(iVar2 + 0x48) = uVar3;
        if (10 < unaff_ESI[0x50] + iVar5) {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0xd;
          (**(code **)*unaff_ESI)();
        }
        for (; 0 < iVar5; iVar5 = iVar5 + -1) {
          unaff_ESI[unaff_ESI[0x50] + 0x51] = uStack_8;
          unaff_ESI[0x50] = unaff_ESI[0x50] + 1;
        }
        piStack_4 = piStack_4 + 1;
        uVar3 = uStack_8 + 1;
        uStack_8 = uVar3;
      } while ((int)uVar3 < unaff_ESI[0x49]);
    }
    return uVar3;
  }
  iVar2 = unaff_ESI[0x4a];
  unaff_ESI[0x4e] = *(int *)(iVar2 + 0x1c);
  unaff_ESI[0x4f] = *(int *)(iVar2 + 0x20);
  uVar3 = *(uint *)(iVar2 + 0xc);
  *(undefined4 *)(iVar2 + 0x40) = *(undefined4 *)(iVar2 + 0x24);
  uVar1 = *(uint *)(iVar2 + 0x20);
  uVar4 = uVar1 % uVar3;
  *(undefined4 *)(iVar2 + 0x34) = 1;
  *(undefined4 *)(iVar2 + 0x38) = 1;
  *(undefined4 *)(iVar2 + 0x3c) = 1;
  *(undefined4 *)(iVar2 + 0x44) = 1;
  if (uVar4 == 0) {
    uVar4 = uVar3;
  }
  *(uint *)(iVar2 + 0x48) = uVar4;
  unaff_ESI[0x50] = 1;
  unaff_ESI[0x51] = 0;
  return uVar1 / uVar3;
}



============================================================
DISASSEMBLY
============================================================
006d84c0 : MOV EAX,dword ptr [ESI + 0x124]
006d84c6 : SUB ESP,0x8
006d84c9 : PUSH EBX
006d84ca : MOV EBX,0x1
006d84cf : PUSH EDI
006d84d0 : CMP EAX,EBX
006d84d2 : JNZ 0x006d8527
006d84d4 : MOV ECX,dword ptr [ESI + 0x128]
006d84da : MOV EAX,dword ptr [ECX + 0x1c]
006d84dd : MOV dword ptr [ESI + 0x138],EAX
006d84e3 : MOV EDX,dword ptr [ECX + 0x20]
006d84e6 : MOV dword ptr [ESI + 0x13c],EDX
006d84ec : MOV EAX,dword ptr [ECX + 0x24]
006d84ef : MOV EDI,dword ptr [ECX + 0xc]
006d84f2 : MOV dword ptr [ECX + 0x40],EAX
006d84f5 : MOV EAX,dword ptr [ECX + 0x20]
006d84f8 : XOR EDX,EDX
006d84fa : DIV EDI
006d84fc : MOV dword ptr [ECX + 0x34],EBX
006d84ff : MOV dword ptr [ECX + 0x38],EBX
006d8502 : MOV dword ptr [ECX + 0x3c],EBX
006d8505 : MOV dword ptr [ECX + 0x44],EBX
006d8508 : TEST EDX,EDX
006d850a : JNZ 0x006d850e
006d850c : MOV EDX,EDI
006d850e : MOV dword ptr [ECX + 0x48],EDX
006d8511 : POP EDI
006d8512 : MOV dword ptr [ESI + 0x140],EBX
006d8518 : MOV dword ptr [ESI + 0x144],0x0
006d8522 : POP EBX
006d8523 : ADD ESP,0x8
006d8526 : RET
006d8527 : XOR EDI,EDI
006d8529 : CMP EAX,EDI
006d852b : JLE 0x006d8532
006d852d : CMP EAX,0x4
006d8530 : JLE 0x006d8559
006d8532 : MOV ECX,dword ptr [ESI]
006d8534 : MOV dword ptr [ECX + 0x14],0x1a
006d853b : MOV EDX,dword ptr [ESI]
006d853d : MOV EAX,dword ptr [ESI + 0x124]
006d8543 : MOV dword ptr [EDX + 0x18],EAX
006d8546 : MOV ECX,dword ptr [ESI]
006d8548 : MOV dword ptr [ECX + 0x1c],0x4
006d854f : MOV EDX,dword ptr [ESI]
006d8551 : MOV EAX,dword ptr [EDX]
006d8553 : PUSH ESI
006d8554 : CALL EAX
006d8556 : ADD ESP,0x4
006d8559 : MOV ECX,dword ptr [ESI + 0x110]
006d855f : MOV EDX,dword ptr [ESI + 0x1c]
006d8562 : ADD ECX,ECX
006d8564 : ADD ECX,ECX
006d8566 : ADD ECX,ECX
006d8568 : PUSH ECX
006d8569 : PUSH EDX
006d856a : CALL 0x006d9580
006d856f : MOV ECX,dword ptr [ESI + 0x20]
006d8572 : MOV dword ptr [ESI + 0x138],EAX
006d8578 : MOV EAX,dword ptr [ESI + 0x114]
006d857e : ADD EAX,EAX
006d8580 : ADD EAX,EAX
006d8582 : ADD EAX,EAX
006d8584 : PUSH EAX
006d8585 : PUSH ECX
006d8586 : CALL 0x006d9580
006d858b : ADD ESP,0x10
006d858e : CMP dword ptr [ESI + 0x124],EDI
006d8594 : MOV dword ptr [ESI + 0x13c],EAX
006d859a : MOV dword ptr [ESI + 0x140],EDI
006d85a0 : MOV dword ptr [ESP + 0x8],EDI
006d85a4 : JLE 0x006d8657
006d85aa : LEA EDX,[ESI + 0x128]
006d85b0 : MOV dword ptr [ESP + 0xc],EDX
006d85b4 : PUSH EBP
006d85b5 : MOV EAX,dword ptr [ESP + 0x10]
006d85b9 : MOV ECX,dword ptr [EAX]
006d85bb : MOV EDI,dword ptr [ECX + 0x8]
006d85be : MOV EDX,dword ptr [ECX + 0x24]
006d85c1 : MOV EAX,dword ptr [ECX + 0x1c]
006d85c4 : IMUL EDX,EDI
006d85c7 : MOV EBP,dword ptr [ECX + 0xc]
006d85ca : MOV dword ptr [ECX + 0x40],EDX
006d85cd : XOR EDX,EDX
006d85cf : DIV EDI
006d85d1 : MOV EBX,EBP
006d85d3 : IMUL EBX,EDI
006d85d6 : MOV dword ptr [ECX + 0x34],EDI
006d85d9 : MOV dword ptr [ECX + 0x38],EBP
006d85dc : MOV dword ptr [ECX + 0x3c],EBX
006d85df : TEST EDX,EDX
006d85e1 : JNZ 0x006d85e5
006d85e3 : MOV EDX,EDI
006d85e5 : MOV EAX,dword ptr [ECX + 0x20]
006d85e8 : MOV dword ptr [ECX + 0x44],EDX
006d85eb : XOR EDX,EDX
006d85ed : DIV EBP
006d85ef : TEST EDX,EDX
006d85f1 : JNZ 0x006d85f5
006d85f3 : MOV EDX,EBP
006d85f5 : MOV dword ptr [ECX + 0x48],EDX
006d85f8 : MOV EAX,dword ptr [ESI + 0x140]
006d85fe : MOV EDI,EBX
006d8600 : ADD EAX,EDI
006d8602 : CMP EAX,0xa
006d8605 : JLE 0x006d861a
006d8607 : MOV ECX,dword ptr [ESI]
006d8609 : MOV dword ptr [ECX + 0x14],0xd
006d8610 : MOV EDX,dword ptr [ESI]
006d8612 : MOV EAX,dword ptr [EDX]
006d8614 : PUSH ESI
006d8615 : CALL EAX
006d8617 : ADD ESP,0x4
006d861a : TEST EDI,EDI
006d861c : JLE 0x006d863c
006d861e : MOV EDI,EDI
006d8620 : MOV ECX,dword ptr [ESI + 0x140]
006d8626 : MOV EDX,dword ptr [ESP + 0xc]
006d862a : DEC EDI
006d862b : MOV dword ptr [ESI + ECX*0x4 + 0x144],EDX
006d8632 : INC dword ptr [ESI + 0x140]
006d8638 : TEST EDI,EDI
006d863a : JG 0x006d8620
006d863c : MOV EAX,dword ptr [ESP + 0xc]
006d8640 : ADD dword ptr [ESP + 0x10],0x4
006d8645 : INC EAX
006d8646 : CMP EAX,dword ptr [ESI + 0x124]
006d864c : MOV dword ptr [ESP + 0xc],EAX
006d8650 : JL 0x006d85b5
006d8656 : POP EBP
006d8657 : POP EDI
006d8658 : POP EBX
006d8659 : ADD ESP,0x8
006d865c : RET
