PROGRAM  : Maestia.exe
FUNCTION : FUN_0060ba80
ENTRY    : 0060ba80
BODY     : [[0060ba80, 0060bb2b]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_0060ba80(short param_1,short param_2)

{
  uint *puVar1;
  int *piVar2;
  int iVar3;
  short sVar4;
  uint uVar5;
  int in_ECX;
  
  sVar4 = param_2;
  uVar5 = *(int *)(in_ECX + 0x28) - 1;
  if (*(int *)(*(int *)(*(int *)(in_ECX + 0x34) + (uVar5 >> 6) * 4) + 4 + (uVar5 & 0x3f) * 8) != 0)
  {
    uVar5 = *(int *)(in_ECX + 0x18) - 1;
    uVar5 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x24) + (uVar5 >> 6) * 4) + (uVar5 & 0x3f) * 4);
    param_2 = (short)uVar5;
    if ((param_1 == param_2 >> 1) && (sVar4 == (short)(uVar5 >> 0x10))) {
      return uVar5 >> 0x10;
    }
  }
  puVar1 = (uint *)(in_ECX + 0x18);
  uVar5 = *(uint *)(in_ECX + 0x18) >> 6;
  _param_2 = CONCAT22(sVar4,param_1 * 2);
  if (*(uint *)(in_ECX + 0x1c) <= uVar5) {
    FUN_00609500(uVar5);
  }
  *(undefined4 *)(*(int *)(*(int *)(in_ECX + 0x24) + uVar5 * 4) + (*puVar1 & 0x3f) * 4) = _param_2;
  *puVar1 = *puVar1 + 1;
  uVar5 = *(int *)(in_ECX + 0x28) - 1;
  iVar3 = *(int *)(*(int *)(in_ECX + 0x34) + (uVar5 >> 6) * 4);
  uVar5 = uVar5 & 0x3f;
  piVar2 = (int *)(iVar3 + 4 + uVar5 * 8);
  *piVar2 = *piVar2 + 1;
  return iVar3 + 4 + uVar5 * 8;
}



============================================================
DISASSEMBLY
============================================================
0060ba80 : PUSH EBX
0060ba81 : PUSH ESI
0060ba82 : MOV ESI,ECX
0060ba84 : MOV EAX,dword ptr [ESI + 0x28]
0060ba87 : MOV EDX,dword ptr [ESI + 0x34]
0060ba8a : DEC EAX
0060ba8b : MOV ECX,EAX
0060ba8d : SHR ECX,0x6
0060ba90 : MOV ECX,dword ptr [EDX + ECX*0x4]
0060ba93 : MOV DX,word ptr [ESP + 0x10]
0060ba98 : AND EAX,0x3f
0060ba9b : CMP dword ptr [ECX + EAX*0x8 + 0x4],0x0
0060baa0 : MOV ECX,dword ptr [ESP + 0xc]
0060baa4 : PUSH EDI
0060baa5 : JZ 0x0060bad5
0060baa7 : MOV EAX,dword ptr [ESI + 0x18]
0060baaa : MOV EBX,dword ptr [ESI + 0x24]
0060baad : DEC EAX
0060baae : MOV EDI,EAX
0060bab0 : SHR EDI,0x6
0060bab3 : MOV EDI,dword ptr [EBX + EDI*0x4]
0060bab6 : AND EAX,0x3f
0060bab9 : MOV EAX,dword ptr [EDI + EAX*0x4]
0060babc : MOV dword ptr [ESP + 0x14],EAX
0060bac0 : MOV DI,word ptr [ESP + 0x14]
0060bac5 : SAR DI,0x1
0060bac8 : CMP CX,DI
0060bacb : JNZ 0x0060bad5
0060bacd : SHR EAX,0x10
0060bad0 : CMP DX,AX
0060bad3 : JZ 0x0060bb26
0060bad5 : MOV EBX,dword ptr [ESI + 0x18]
0060bad8 : LEA EDI,[ESI + 0x18]
0060badb : SHR EBX,0x6
0060bade : LEA EAX,[ECX + ECX*0x1]
0060bae1 : MOV word ptr [ESP + 0x14],AX
0060bae6 : MOV word ptr [ESP + 0x16],DX
0060baeb : CMP EBX,dword ptr [EDI + 0x4]
0060baee : JC 0x0060baf8
0060baf0 : PUSH EBX
0060baf1 : MOV ECX,EDI
0060baf3 : CALL 0x00609500
0060baf8 : MOV ECX,dword ptr [EDI + 0xc]
0060bafb : MOV EAX,dword ptr [ECX + EBX*0x4]
0060bafe : MOV EDX,dword ptr [EDI]
0060bb00 : MOV ECX,dword ptr [ESP + 0x14]
0060bb04 : AND EDX,0x3f
0060bb07 : MOV dword ptr [EAX + EDX*0x4],ECX
0060bb0a : INC dword ptr [EDI]
0060bb0c : MOV EAX,dword ptr [ESI + 0x28]
0060bb0f : MOV ECX,dword ptr [ESI + 0x34]
0060bb12 : DEC EAX
0060bb13 : MOV EDX,EAX
0060bb15 : SHR EDX,0x6
0060bb18 : MOV EDX,dword ptr [ECX + EDX*0x4]
0060bb1b : AND EAX,0x3f
0060bb1e : INC dword ptr [EDX + EAX*0x8 + 0x4]
0060bb22 : LEA EAX,[EDX + EAX*0x8 + 0x4]
0060bb26 : POP EDI
0060bb27 : POP ESI
0060bb28 : POP EBX
0060bb29 : RET 0x8
