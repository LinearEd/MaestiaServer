PROGRAM  : Maestia.exe
FUNCTION : FUN_00a96790
ENTRY    : 00a96790
BODY     : [[00a96790, 00a96963]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a96790(undefined4 param_1,char param_2)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  undefined4 *puVar4;
  char cVar5;
  int iVar6;
  undefined4 local_38;
  int local_34;
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b20d2b;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  FUN_00404750(&DAT_00c83b9c,param_1,local_14);
  iVar6 = 0;
  local_8 = 0;
  iVar1 = *DAT_00da9894;
  cVar5 = '\0';
  local_38 = DAT_00d6f0f4;
  FUN_004437f0(&local_38);
  if ((((local_34 != *(int *)(iVar1 + 0x48)) && (iVar6 = *(int *)(local_34 + 0x10), iVar6 != 0)) &&
      (*(char *)(iVar6 + 0x32) != '\0')) && (*(char *)(iVar6 + 0x8c) != '\0')) {
    cVar5 = '\x01';
  }
  piVar2 = *(int **)(iVar1 + 0x114);
  if (param_2 == '\0') {
    puVar4 = local_2c;
    if (local_18 < 8) {
      puVar4 = &local_2c;
    }
    (**(code **)(*piVar2 + 4))(piVar2,"SetMyMoney","%ls,%b",puVar4,cVar5);
    if (cVar5 == '\0') goto LAB_00a9684c;
  }
  else {
    puVar4 = local_2c;
    if (local_18 < 8) {
      puVar4 = &local_2c;
    }
    (**(code **)(*piVar2 + 4))(piVar2,"SetMyDP",&DAT_00c83bb8,puVar4);
LAB_00a9684c:
    if ((iVar6 != 0) || (param_2 == '\0')) {
      puVar4 = local_2c;
      if (local_18 < 8) {
        puVar4 = &local_2c;
      }
      (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
                (*(int **)(*DAT_00da9894 + 0x114),"SetGold","%ls,%d",puVar4,cVar5);
      if ((*(int *)(*DAT_00da9894 + 0x1bc) != 0) &&
         (*(char *)(*(int *)(*DAT_00da9894 + 0x1bc) + 0x32) != '\0')) {
        FUN_00a8d320(param_1);
      }
      if ((*(int *)(*DAT_00da9894 + 0x1c0) != 0) &&
         (*(char *)(*(int *)(*DAT_00da9894 + 0x1c0) + 0x32) != '\0')) {
        FUN_0093c4c0(param_1);
      }
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uVar3 = (uint)local_2c._2_2_;
      goto LAB_00a96938;
    }
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  uVar3 = (uint)local_2c >> 0x10;
LAB_00a96938:
  local_2c = (undefined4 *)(uVar3 << 0x10);
  local_8 = 0xffffffff;
  local_1c = 0;
  local_18 = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a96790 : PUSH EBP
00a96791 : MOV EBP,ESP
00a96793 : PUSH -0x1
00a96795 : PUSH 0xb20d2b
00a9679a : MOV EAX,FS:[0x0]
00a967a0 : PUSH EAX
00a967a1 : SUB ESP,0x28
00a967a4 : MOV EAX,[0x00d66fa0]
00a967a9 : XOR EAX,EBP
00a967ab : MOV dword ptr [EBP + -0x10],EAX
00a967ae : PUSH EBX
00a967af : PUSH ESI
00a967b0 : PUSH EDI
00a967b1 : PUSH EAX
00a967b2 : LEA EAX,[EBP + -0xc]
00a967b5 : MOV FS:[0x0],EAX
00a967bb : MOV EAX,dword ptr [EBP + 0x8]
00a967be : PUSH EAX
00a967bf : PUSH 0xc83b9c
00a967c4 : LEA ESI,[EBP + -0x2c]
00a967c7 : CALL 0x00404750
00a967cc : ADD ESP,0x8
00a967cf : XOR EDI,EDI
00a967d1 : MOV dword ptr [EBP + -0x4],EDI
00a967d4 : MOV ECX,dword ptr [0x00da9894]
00a967da : MOV ESI,dword ptr [ECX]
00a967dc : MOV EDX,dword ptr [0x00d6f0f4]
00a967e2 : LEA EAX,[EBP + -0x34]
00a967e5 : PUSH EAX
00a967e6 : LEA ECX,[ESI + 0x44]
00a967e9 : LEA EAX,[EBP + -0x30]
00a967ec : XOR BL,BL
00a967ee : MOV dword ptr [EBP + -0x34],EDX
00a967f1 : CALL 0x004437f0
00a967f6 : MOV EAX,dword ptr [ESI + 0x48]
00a967f9 : MOV ECX,dword ptr [EBP + -0x30]
00a967fc : CMP ECX,EAX
00a967fe : JZ 0x00a96816
00a96800 : MOV EDI,dword ptr [ECX + 0x10]
00a96803 : TEST EDI,EDI
00a96805 : JZ 0x00a96816
00a96807 : CMP byte ptr [EDI + 0x32],BL
00a9680a : JZ 0x00a96816
00a9680c : CMP byte ptr [EDI + 0x8c],BL
00a96812 : JZ 0x00a96816
00a96814 : MOV BL,0x1
00a96816 : CMP byte ptr [EBP + 0xc],0x0
00a9681a : MOV ESI,dword ptr [ESI + 0x114]
00a96820 : MOV EAX,dword ptr [EBP + -0x28]
00a96823 : JNZ 0x00a96876
00a96825 : CMP dword ptr [EBP + -0x14],0x8
00a96829 : JNC 0x00a9682e
00a9682b : LEA EAX,[EBP + -0x28]
00a9682e : MOV ECX,dword ptr [ESI]
00a96830 : MOVZX EDX,BL
00a96833 : PUSH EDX
00a96834 : PUSH EAX
00a96835 : MOV EAX,dword ptr [ECX + 0x4]
00a96838 : PUSH 0xc83ba4
00a9683d : PUSH 0xc83bac
00a96842 : PUSH ESI
00a96843 : CALL EAX
00a96845 : ADD ESP,0x14
00a96848 : TEST BL,BL
00a9684a : JNZ 0x00a96856
00a9684c : TEST EDI,EDI
00a9684e : JNZ 0x00a96897
00a96850 : CMP byte ptr [EBP + 0xc],0x0
00a96854 : JZ 0x00a96897
00a96856 : MOV dword ptr [EBP + -0x4],0xffffffff
00a9685d : CMP dword ptr [EBP + -0x14],0x8
00a96861 : JC 0x00a9686b
00a96863 : MOV ECX,dword ptr [EBP + -0x28]
00a96866 : CALL 0x006f04e0
00a9686b : XOR EAX,EAX
00a9686d : MOV word ptr [EBP + -0x28],AX
00a96871 : JMP 0x00a96938
00a96876 : CMP dword ptr [EBP + -0x14],0x8
00a9687a : JNC 0x00a9687f
00a9687c : LEA EAX,[EBP + -0x28]
00a9687f : MOV ECX,dword ptr [ESI]
00a96881 : MOV EDX,dword ptr [ECX + 0x4]
00a96884 : PUSH EAX
00a96885 : PUSH 0xc83bb8
00a9688a : PUSH 0xc83bbc
00a9688f : PUSH ESI
00a96890 : CALL EDX
00a96892 : ADD ESP,0x10
00a96895 : JMP 0x00a9684c
00a96897 : MOV ECX,dword ptr [0x00da9894]
00a9689d : MOV EAX,dword ptr [ECX]
00a9689f : MOV EAX,dword ptr [EAX + 0x114]
00a968a5 : MOV ECX,dword ptr [EBP + -0x28]
00a968a8 : MOV ESI,0x8
00a968ad : CMP dword ptr [EBP + -0x14],ESI
00a968b0 : JNC 0x00a968b5
00a968b2 : LEA ECX,[EBP + -0x28]
00a968b5 : MOV EDX,dword ptr [EAX]
00a968b7 : MOVZX EDI,BL
00a968ba : PUSH EDI
00a968bb : PUSH ECX
00a968bc : PUSH 0xc83bc4
00a968c1 : PUSH 0xc83bcc
00a968c6 : PUSH EAX
00a968c7 : MOV EAX,dword ptr [EDX + 0x4]
00a968ca : CALL EAX
00a968cc : MOV ECX,dword ptr [0x00da9894]
00a968d2 : MOV EAX,dword ptr [ECX]
00a968d4 : ADD ESP,0x14
00a968d7 : CMP dword ptr [EAX + 0x1bc],0x0
00a968de : JZ 0x00a968f7
00a968e0 : MOV ECX,dword ptr [EAX + 0x1bc]
00a968e6 : CMP byte ptr [ECX + 0x32],0x0
00a968ea : JZ 0x00a968f7
00a968ec : MOV EDX,dword ptr [EBP + 0x8]
00a968ef : MOV EAX,ECX
00a968f1 : PUSH EDX
00a968f2 : CALL 0x00a8d320
00a968f7 : MOV EAX,[0x00da9894]
00a968fc : MOV EAX,dword ptr [EAX]
00a968fe : CMP dword ptr [EAX + 0x1c0],0x0
00a96905 : JZ 0x00a9691e
00a96907 : MOV ECX,dword ptr [EAX + 0x1c0]
00a9690d : CMP byte ptr [ECX + 0x32],0x0
00a96911 : JZ 0x00a9691e
00a96913 : MOV EAX,ECX
00a96915 : MOV ECX,dword ptr [EBP + 0x8]
00a96918 : PUSH ECX
00a96919 : CALL 0x0093c4c0
00a9691e : MOV dword ptr [EBP + -0x4],0xffffffff
00a96925 : CMP dword ptr [EBP + -0x14],ESI
00a96928 : JC 0x00a96932
00a9692a : MOV ECX,dword ptr [EBP + -0x28]
00a9692d : CALL 0x006f04e0
00a96932 : XOR EDX,EDX
00a96934 : MOV word ptr [EBP + -0x28],DX
00a96938 : MOV dword ptr [EBP + -0x18],0x0
00a9693f : MOV dword ptr [EBP + -0x14],0x7
00a96946 : MOV ECX,dword ptr [EBP + -0xc]
00a96949 : MOV dword ptr FS:[0x0],ECX
00a96950 : POP ECX
00a96951 : POP EDI
00a96952 : POP ESI
00a96953 : POP EBX
00a96954 : MOV ECX,dword ptr [EBP + -0x10]
00a96957 : XOR ECX,EBP
00a96959 : CALL 0x00633e6b
00a9695e : MOV ESP,EBP
00a96960 : POP EBP
00a96961 : RET 0x8
