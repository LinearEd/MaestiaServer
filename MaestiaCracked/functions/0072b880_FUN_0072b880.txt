PROGRAM  : Maestia.exe
FUNCTION : FUN_0072b880
ENTRY    : 0072b880
BODY     : [[0072b880, 0072b90c] [0072b910, 0072bd12]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0072b880(int param_1)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  int *piVar7;
  int *piVar8;
  int local_160 [2];
  float local_158;
  undefined4 local_150;
  float local_148;
  undefined4 local_140;
  float local_138;
  undefined4 local_120;
  undefined4 local_11c;
  undefined4 local_118;
  undefined4 local_110;
  undefined4 local_10c;
  undefined4 local_108;
  undefined4 local_100;
  undefined4 local_fc;
  undefined4 local_f8;
  undefined1 local_dc [8];
  undefined4 local_d4;
  undefined1 local_d0 [8];
  undefined4 local_c8;
  float local_c4;
  float fStack_c0;
  float local_bc;
  int local_b8;
  undefined4 uStack_b4;
  undefined4 local_b0;
  undefined4 local_ac;
  undefined4 uStack_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 uStack_90;
  float local_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 local_80;
  float local_7c;
  float fStack_78;
  float local_74;
  undefined4 local_70;
  undefined4 uStack_6c;
  undefined4 local_68;
  LPCRITICAL_SECTION local_64;
  char *local_60;
  undefined4 local_5c;
  int local_58;
  undefined4 local_54;
  float local_50;
  float fStack_4c;
  float local_48;
  undefined8 local_44;
  undefined4 local_3c;
  undefined8 local_38;
  float local_30;
  undefined8 local_2c;
  float local_24;
  int *local_20;
  int local_1c;
  int local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b26fb4;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = *(int *)(param_1 + 0x31c);
  iVar1 = *(int *)(param_1 + 0x164);
  local_64 = (LPCRITICAL_SECTION)(local_18 + 0x6c);
  local_58 = 0;
  local_60 = ".\\Frk\\FrkParticleEmitter.cpp";
  local_5c = 0xcf;
  local_54 = 1;
  FUN_006ef1a0(&local_64);
  local_8 = 0;
  FUN_00612a60(param_1,uVar2);
  iVar3 = FUN_00612aa0(param_1);
  local_1c = iVar3;
  if (iVar3 != 0) {
    do {
      local_1c = iVar3;
      FUN_00612a80(param_1);
      iVar6 = *(int *)(iVar3 + 0x5c) * 0x120 + *(int *)(iVar1 + 300);
      iVar4 = FUN_006143a0(iVar6);
      local_20 = *(int **)(DAT_017251ac + 0x18);
      if (((iVar4 == 1) && (*(int *)(iVar1 + 0x124) != 0)) && ((*(byte *)(iVar1 + 0x68) & 3) != 0))
      {
        (**(code **)(**(int **)(local_18 + 0x10) + 8))(param_1,iVar3);
        if (iVar6 != DAT_0172524c) {
          iVar3 = *local_20;
          uVar5 = FUN_00614400(iVar6);
          (**(code **)(iVar3 + 0x104))(local_20,0,uVar5);
          FUN_0072b3b0(param_1);
          FUN_0072ae80();
          (**(code **)(**(int **)(local_18 + 0x10) + 0x10))();
          iVar3 = FUN_004c5420();
          *(undefined4 *)(iVar3 + 0x10) = 0;
          DAT_0172524c = iVar6;
        }
      }
      else {
        if ((*(uint *)(iVar1 + 0x68) & 0x80000) != 0) {
          local_88 = 0x3f800000;
          local_80 = 0;
          local_3c = 0;
          uStack_84 = 0;
          local_44 = 0x3f800000;
          D3DXMatrixLookAtRH(&local_120,iVar3 + 0x20,param_1 + 0x140,&local_44);
          local_a0 = local_118;
          uStack_9c = local_108;
          local_98 = local_f8;
          local_70 = local_120;
          uStack_6c = local_110;
          local_68 = local_100;
          local_ac = local_11c;
          uStack_a8 = local_10c;
          local_a4 = local_fc;
          local_3c = local_fc;
          local_c8 = local_f8;
          local_d4 = local_100;
          (**(code **)(**(int **)(local_18 + 0x10) + 0xc))(&local_44,local_dc,local_d0);
        }
        if ((*(uint *)(iVar1 + 0x68) & 0x4000000) != 0) {
          piVar7 = *(int **)(DAT_017251f8 + 0xe8);
          local_160[0] = 0;
          if (piVar7 != (int *)0x0) {
            (**(code **)(*piVar7 + 0x1c))();
            piVar7 = piVar7 + 0x2d;
            piVar8 = local_160;
            for (iVar4 = 0x10; iVar3 = local_1c, iVar4 != 0; iVar4 = iVar4 + -1) {
              *piVar8 = *piVar7;
              piVar7 = piVar7 + 1;
              piVar8 = piVar8 + 1;
            }
          }
          local_8c = *(float *)(iVar3 + 0x38);
          uStack_90 = *(undefined4 *)(iVar3 + 0x34);
          local_c4 = local_158;
          fStack_c0 = local_148;
          local_bc = local_138;
          local_50 = local_158;
          fStack_4c = local_148;
          local_b8 = local_160[0];
          uStack_b4 = local_150;
          local_b0 = local_140;
          local_38 = CONCAT44(local_150,local_160[0]);
          local_48 = local_138;
          local_94 = *(undefined4 *)(iVar3 + 0x30);
          local_2c = *(undefined8 *)(iVar3 + 0x30);
          local_30 = (float)local_140;
          local_24 = local_8c;
          D3DXVec3Normalize(&local_2c,&local_2c);
          local_7c = local_48 * local_2c._4_4_ - fStack_4c * local_24;
          local_74 = fStack_4c * (float)local_2c - local_2c._4_4_ * local_50;
          fStack_78 = local_24 * local_50 - local_48 * (float)local_2c;
          local_38 = CONCAT44(fStack_78,local_7c);
          local_30 = local_74;
          D3DXVec3Normalize(&local_38,&local_38);
          (**(code **)(**(int **)(local_18 + 0x10) + 0xc))(&local_2c,&local_38,&local_50);
        }
        (**(code **)(**(int **)(local_18 + 0x10) + 8))(param_1,iVar3);
      }
      iVar3 = FUN_00612aa0(param_1);
    } while (iVar3 != 0);
    local_1c = 0;
  }
  local_8 = 0xffffffff;
  if (local_58 != 0) {
    LeaveCriticalSection(local_64);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0072b880 : PUSH EBP
0072b881 : MOV EBP,ESP
0072b883 : PUSH -0x1
0072b885 : PUSH 0xb26fb4
0072b88a : MOV EAX,FS:[0x0]
0072b890 : PUSH EAX
0072b891 : SUB ESP,0x150
0072b897 : PUSH EBX
0072b898 : PUSH ESI
0072b899 : PUSH EDI
0072b89a : MOV EAX,[0x00d66fa0]
0072b89f : XOR EAX,EBP
0072b8a1 : PUSH EAX
0072b8a2 : LEA EAX,[EBP + -0xc]
0072b8a5 : MOV FS:[0x0],EAX
0072b8ab : MOV EBX,dword ptr [EBP + 0x8]
0072b8ae : MOV EAX,dword ptr [EBX + 0x31c]
0072b8b4 : MOV ECX,dword ptr [EBX + 0x164]
0072b8ba : MOV dword ptr [EBP + -0x14],EAX
0072b8bd : LEA EDX,[EBP + -0x60]
0072b8c0 : ADD EAX,0x6c
0072b8c3 : XOR ESI,ESI
0072b8c5 : PUSH EDX
0072b8c6 : MOV dword ptr [EBP + 0x8],ECX
0072b8c9 : MOV dword ptr [EBP + -0x54],ESI
0072b8cc : MOV dword ptr [EBP + -0x60],EAX
0072b8cf : MOV dword ptr [EBP + -0x5c],0xc0299c
0072b8d6 : MOV dword ptr [EBP + -0x58],0xcf
0072b8dd : MOV dword ptr [EBP + -0x50],0x1
0072b8e4 : CALL 0x006ef1a0
0072b8e9 : MOV dword ptr [EBP + -0x4],ESI
0072b8ec : PUSH EBX
0072b8ed : CALL 0x00612a60
0072b8f2 : ADD ESP,0x4
0072b8f5 : PUSH EBX
0072b8f6 : CALL 0x00612aa0
0072b8fb : MOV EDI,EAX
0072b8fd : ADD ESP,0x4
0072b900 : MOV dword ptr [EBP + -0x18],EDI
0072b903 : CMP EDI,ESI
0072b905 : JZ 0x0072bce8
0072b90b : JMP 0x0072b913
0072b910 : MOV EDI,dword ptr [EBP + -0x18]
0072b913 : PUSH EBX
0072b914 : CALL 0x00612a80
0072b919 : MOV ESI,dword ptr [EDI + 0x5c]
0072b91c : MOV EAX,dword ptr [EBP + 0x8]
0072b91f : LEA ESI,[ESI + ESI*0x8]
0072b922 : SHL ESI,0x5
0072b925 : ADD ESI,dword ptr [EAX + 0x12c]
0072b92b : ADD ESP,0x4
0072b92e : PUSH ESI
0072b92f : CALL 0x006143a0
0072b934 : MOV ECX,dword ptr [0x017251ac]
0072b93a : MOV EDX,dword ptr [ECX + 0x18]
0072b93d : ADD ESP,0x4
0072b940 : CMP EAX,0x1
0072b943 : MOV EAX,dword ptr [EBP + 0x8]
0072b946 : MOV dword ptr [EBP + -0x1c],EDX
0072b949 : JNZ 0x0072b9d3
0072b94f : CMP dword ptr [EAX + 0x124],0x0
0072b956 : JZ 0x0072b9d3
0072b958 : TEST byte ptr [EAX + 0x68],0x3
0072b95c : JZ 0x0072b9d3
0072b95e : MOV EAX,dword ptr [EBP + -0x14]
0072b961 : MOV ECX,dword ptr [EAX + 0x10]
0072b964 : MOV EDX,dword ptr [ECX]
0072b966 : MOV EAX,dword ptr [EDX + 0x8]
0072b969 : PUSH EDI
0072b96a : PUSH EBX
0072b96b : CALL EAX
0072b96d : CMP ESI,dword ptr [0x0172524c]
0072b973 : JZ 0x0072bcd2
0072b979 : MOV ECX,dword ptr [EBP + -0x1c]
0072b97c : MOV EDI,dword ptr [ECX]
0072b97e : PUSH ESI
0072b97f : ADD EDI,0x104
0072b985 : CALL 0x00614400
0072b98a : MOV EDX,dword ptr [EBP + -0x1c]
0072b98d : ADD ESP,0x4
0072b990 : PUSH EAX
0072b991 : MOV EAX,dword ptr [EDI]
0072b993 : PUSH 0x0
0072b995 : PUSH EDX
0072b996 : CALL EAX
0072b998 : PUSH EBX
0072b999 : CALL 0x0072b3b0
0072b99e : MOV ECX,dword ptr [EBP + 0x8]
0072b9a1 : MOV EAX,dword ptr [ECX + 0x10c]
0072b9a7 : ADD ESP,0x4
0072b9aa : CALL 0x0072ae80
0072b9af : MOV EDX,dword ptr [EBP + -0x14]
0072b9b2 : MOV ECX,dword ptr [EDX + 0x10]
0072b9b5 : MOV EAX,dword ptr [ECX]
0072b9b7 : MOV EDX,dword ptr [EAX + 0x10]
0072b9ba : CALL EDX
0072b9bc : CALL 0x004c5420
0072b9c1 : MOV dword ptr [EAX + 0x10],0x0
0072b9c8 : MOV dword ptr [0x0172524c],ESI
0072b9ce : JMP 0x0072bcd2
0072b9d3 : TEST dword ptr [EAX + 0x68],0x80000
0072b9da : JZ 0x0072bb1c
0072b9e0 : MOVSS XMM0,dword ptr [0x00c10fc4]
0072b9e8 : MOVSS dword ptr [EBP + 0xffffff7c],XMM0
0072b9f0 : XORPS XMM0,XMM0
0072b9f3 : MOVSS dword ptr [EBP + -0x7c],XMM0
0072b9f8 : MOV EDX,dword ptr [EBP + -0x7c]
0072b9fb : MOV dword ptr [EBP + -0x38],EDX
0072b9fe : LEA EDX,[EBP + -0x40]
0072ba01 : PUSH EDX
0072ba02 : LEA ECX,[EBX + 0x140]
0072ba08 : PUSH ECX
0072ba09 : LEA EAX,[EDI + 0x20]
0072ba0c : PUSH EAX
0072ba0d : LEA EAX,[EBP + 0xfffffee4]
0072ba13 : MOVSS dword ptr [EBP + -0x80],XMM0
0072ba18 : MOVQ XMM0,qword ptr [EBP + 0xffffff7c]
0072ba20 : PUSH EAX
0072ba21 : MOVQ qword ptr [EBP + -0x40],XMM0
0072ba26 : CALL 0x00664d2c
0072ba2b : MOVSS XMM0,dword ptr [EBP + 0xfffffeec]
0072ba33 : MOVSS dword ptr [EBP + 0xffffff64],XMM0
0072ba3b : MOVSS XMM0,dword ptr [EBP + 0xfffffefc]
0072ba43 : MOVSS dword ptr [EBP + 0xffffff68],XMM0
0072ba4b : MOVSS XMM0,dword ptr [EBP + 0xffffff0c]
0072ba53 : MOVSS dword ptr [EBP + 0xffffff6c],XMM0
0072ba5b : MOVQ XMM0,qword ptr [EBP + 0xffffff64]
0072ba63 : MOV ECX,dword ptr [EBP + 0xffffff6c]
0072ba69 : MOVQ qword ptr [EBP + 0xffffff34],XMM0
0072ba71 : MOVSS XMM0,dword ptr [EBP + 0xfffffee4]
0072ba79 : MOVSS dword ptr [EBP + -0x6c],XMM0
0072ba7e : MOVSS XMM0,dword ptr [EBP + 0xfffffef4]
0072ba86 : MOVSS dword ptr [EBP + -0x68],XMM0
0072ba8b : MOVSS XMM0,dword ptr [EBP + 0xffffff04]
0072ba93 : MOVSS dword ptr [EBP + -0x64],XMM0
0072ba98 : MOVQ XMM0,qword ptr [EBP + -0x6c]
0072ba9d : MOV EDX,dword ptr [EBP + -0x64]
0072baa0 : MOVQ qword ptr [EBP + 0xffffff28],XMM0
0072baa8 : MOVSS XMM0,dword ptr [EBP + 0xfffffee8]
0072bab0 : MOVSS dword ptr [EBP + 0xffffff58],XMM0
0072bab8 : MOVSS XMM0,dword ptr [EBP + 0xfffffef8]
0072bac0 : MOVSS dword ptr [EBP + 0xffffff5c],XMM0
0072bac8 : MOVSS XMM0,dword ptr [EBP + 0xffffff08]
0072bad0 : MOVSS dword ptr [EBP + 0xffffff60],XMM0
0072bad8 : MOV EAX,dword ptr [EBP + 0xffffff60]
0072bade : MOVQ XMM0,qword ptr [EBP + 0xffffff58]
0072bae6 : MOV dword ptr [EBP + -0x38],EAX
0072bae9 : MOV dword ptr [EBP + 0xffffff3c],ECX
0072baef : MOV ECX,dword ptr [EBP + -0x14]
0072baf2 : MOV ECX,dword ptr [ECX + 0x10]
0072baf5 : LEA EAX,[EBP + 0xffffff34]
0072bafb : PUSH EAX
0072bafc : LEA EAX,[EBP + 0xffffff28]
0072bb02 : MOV dword ptr [EBP + 0xffffff30],EDX
0072bb08 : PUSH EAX
0072bb09 : MOVQ qword ptr [EBP + -0x40],XMM0
0072bb0e : MOV EDX,dword ptr [ECX]
0072bb10 : MOV EDX,dword ptr [EDX + 0xc]
0072bb13 : LEA EAX,[EBP + -0x40]
0072bb16 : PUSH EAX
0072bb17 : CALL EDX
0072bb19 : MOV EAX,dword ptr [EBP + 0x8]
0072bb1c : TEST dword ptr [EAX + 0x68],0x4000000
0072bb23 : JZ 0x0072bcc3
0072bb29 : MOV EAX,[0x017251f8]
0072bb2e : MOV ESI,dword ptr [EAX + 0xe8]
0072bb34 : XORPS XMM0,XMM0
0072bb37 : MOVSS dword ptr [EBP + 0xfffffea4],XMM0
0072bb3f : TEST ESI,ESI
0072bb41 : JZ 0x0072bb62
0072bb43 : MOV EDX,dword ptr [ESI]
0072bb45 : MOV EAX,dword ptr [EDX + 0x1c]
0072bb48 : MOV ECX,ESI
0072bb4a : CALL EAX
0072bb4c : ADD ESI,0xb4
0072bb52 : MOV ECX,0x10
0072bb57 : LEA EDI,[EBP + 0xfffffea4]
0072bb5d : MOVSD.REP ES:EDI,ESI
0072bb5f : MOV EDI,dword ptr [EBP + -0x18]
0072bb62 : MOVSS XMM0,dword ptr [EBP + 0xfffffeac]
0072bb6a : MOVSS XMM2,dword ptr [EDI + 0x38]
0072bb6f : MOVSS XMM1,dword ptr [EDI + 0x34]
0072bb74 : MOVSS dword ptr [EBP + 0xffffff40],XMM0
0072bb7c : MOVSS XMM0,dword ptr [EBP + 0xfffffebc]
0072bb84 : MOVSS dword ptr [EBP + 0xffffff44],XMM0
0072bb8c : MOVSS XMM0,dword ptr [EBP + 0xfffffecc]
0072bb94 : MOVSS dword ptr [EBP + 0xffffff48],XMM0
0072bb9c : MOVQ XMM0,qword ptr [EBP + 0xffffff40]
0072bba4 : MOV ECX,dword ptr [EBP + 0xffffff48]
0072bbaa : MOVQ qword ptr [EBP + -0x4c],XMM0
0072bbaf : MOVSS XMM0,dword ptr [EBP + 0xfffffea4]
0072bbb7 : MOVSS dword ptr [EBP + 0xffffff4c],XMM0
0072bbbf : MOVSS XMM0,dword ptr [EBP + 0xfffffeb4]
0072bbc7 : MOVSS dword ptr [EBP + 0xffffff50],XMM0
0072bbcf : MOVSS XMM0,dword ptr [EBP + 0xfffffec4]
0072bbd7 : MOVSS dword ptr [EBP + 0xffffff54],XMM0
0072bbdf : MOVQ XMM0,qword ptr [EBP + 0xffffff4c]
0072bbe7 : MOV EDX,dword ptr [EBP + 0xffffff54]
0072bbed : MOV dword ptr [EBP + -0x44],ECX
0072bbf0 : LEA ECX,[EBP + -0x28]
0072bbf3 : MOVQ qword ptr [EBP + -0x34],XMM0
0072bbf8 : MOVSS XMM0,dword ptr [EDI + 0x30]
0072bbfd : MOV dword ptr [EBP + -0x2c],EDX
0072bc00 : MOVSS dword ptr [EBP + 0xffffff78],XMM2
0072bc08 : MOV EAX,dword ptr [EBP + 0xffffff78]
0072bc0e : PUSH ECX
0072bc0f : MOV EDX,ECX
0072bc11 : MOVSS dword ptr [EBP + 0xffffff70],XMM0
0072bc19 : MOVSS dword ptr [EBP + 0xffffff74],XMM1
0072bc21 : MOVQ XMM0,qword ptr [EBP + 0xffffff70]
0072bc29 : PUSH EDX
0072bc2a : MOVQ qword ptr [EBP + -0x28],XMM0
0072bc2f : MOV dword ptr [EBP + -0x20],EAX
0072bc32 : CALL 0x004ff722
0072bc37 : MOVSS XMM0,dword ptr [EBP + -0x48]
0072bc3c : MOVSS XMM2,dword ptr [EBP + -0x44]
0072bc41 : MOVSS XMM3,dword ptr [EBP + -0x24]
0072bc46 : MOVSS XMM1,dword ptr [EBP + -0x20]
0072bc4b : MOVAPS XMM5,XMM0
0072bc4e : MULSS XMM5,XMM1
0072bc52 : MOVAPS XMM4,XMM2
0072bc55 : MULSS XMM4,XMM3
0072bc59 : SUBSS XMM4,XMM5
0072bc5d : MOVSS XMM5,dword ptr [EBP + -0x28]
0072bc62 : MOVSS dword ptr [EBP + -0x78],XMM4
0072bc67 : MOVSS XMM4,dword ptr [EBP + -0x4c]
0072bc6c : MULSS XMM0,XMM5
0072bc70 : LEA ECX,[EBP + -0x34]
0072bc73 : MULSS XMM3,XMM4
0072bc77 : SUBSS XMM0,XMM3
0072bc7b : MULSS XMM1,XMM4
0072bc7f : MULSS XMM2,XMM5
0072bc83 : MOVSS dword ptr [EBP + -0x70],XMM0
0072bc88 : MOV EAX,dword ptr [EBP + -0x70]
0072bc8b : SUBSS XMM1,XMM2
0072bc8f : PUSH ECX
0072bc90 : MOV EDX,ECX
0072bc92 : MOVSS dword ptr [EBP + -0x74],XMM1
0072bc97 : MOVQ XMM0,qword ptr [EBP + -0x78]
0072bc9c : PUSH EDX
0072bc9d : MOVQ qword ptr [EBP + -0x34],XMM0
0072bca2 : MOV dword ptr [EBP + -0x2c],EAX
0072bca5 : CALL 0x004ff722
0072bcaa : MOV EAX,dword ptr [EBP + -0x14]
0072bcad : MOV ECX,dword ptr [EAX + 0x10]
0072bcb0 : MOV EDX,dword ptr [ECX]
0072bcb2 : MOV EDX,dword ptr [EDX + 0xc]
0072bcb5 : LEA EAX,[EBP + -0x4c]
0072bcb8 : PUSH EAX
0072bcb9 : LEA EAX,[EBP + -0x34]
0072bcbc : PUSH EAX
0072bcbd : LEA EAX,[EBP + -0x28]
0072bcc0 : PUSH EAX
0072bcc1 : CALL EDX
0072bcc3 : MOV EAX,dword ptr [EBP + -0x14]
0072bcc6 : MOV ECX,dword ptr [EAX + 0x10]
0072bcc9 : MOV EDX,dword ptr [ECX]
0072bccb : MOV EAX,dword ptr [EDX + 0x8]
0072bcce : PUSH EDI
0072bccf : PUSH EBX
0072bcd0 : CALL EAX
0072bcd2 : PUSH EBX
0072bcd3 : CALL 0x00612aa0
0072bcd8 : ADD ESP,0x4
0072bcdb : MOV dword ptr [EBP + -0x18],EAX
0072bcde : TEST EAX,EAX
0072bce0 : JNZ 0x0072b910
0072bce6 : XOR ESI,ESI
0072bce8 : MOV dword ptr [EBP + -0x4],0xffffffff
0072bcef : CMP dword ptr [EBP + -0x54],ESI
0072bcf2 : JZ 0x0072bd01
0072bcf4 : MOV ECX,dword ptr [EBP + -0x60]
0072bcf7 : PUSH ECX
0072bcf8 : CALL dword ptr [0x00b8511c]
0072bcfe : MOV dword ptr [EBP + -0x54],ESI
0072bd01 : MOV ECX,dword ptr [EBP + -0xc]
0072bd04 : MOV dword ptr FS:[0x0],ECX
0072bd0b : POP ECX
0072bd0c : POP EDI
0072bd0d : POP ESI
0072bd0e : POP EBX
0072bd0f : MOV ESP,EBP
0072bd11 : POP EBP
0072bd12 : RET
