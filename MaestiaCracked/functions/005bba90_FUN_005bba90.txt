PROGRAM  : Maestia.exe
FUNCTION : FUN_005bba90
ENTRY    : 005bba90
BODY     : [[005bba90, 005bbbbc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bba90(int param_1)

{
  undefined4 uVar1;
  char cVar2;
  undefined1 uVar3;
  int iVar4;
  LONG LVar5;
  undefined4 *local_c;
  undefined4 *local_8;
  uint local_4;
  
  cVar2 = FUN_00526030(0x1b);
  if (cVar2 == '\0') {
    FUN_00526050("LoadVars",0,0);
    return;
  }
  if (*(int *)(param_1 + 8) == 0) {
    iVar4 = 0;
  }
  else {
    iVar4 = *(int *)(param_1 + 8) + -0x10;
  }
  uVar1 = *(undefined4 *)(param_1 + 0x18);
  FUN_00526260(0);
  FUN_005272e0(&local_c,uVar1,0xffffffff,0);
  FUN_0051c480(*local_c);
  local_c[2] = local_c[2] + -1;
  if (local_c[2] == 0) {
    FUN_00525340();
  }
  uVar1 = *(undefined4 *)(param_1 + 0x18);
  FUN_00526260(0);
  FUN_005272e0(&local_8,uVar1,0xffffffff,0);
  FUN_0051c480(*local_8);
  if (iVar4 == 0) {
    iVar4 = 0;
  }
  else {
    iVar4 = iVar4 + 0x10;
  }
  uVar3 = FUN_005bae50(*(undefined4 *)(param_1 + 0x18),iVar4,&local_c);
  FUN_005bb9d0(*(undefined4 *)(param_1 + 0x18),uVar3);
  LVar5 = InterlockedExchangeAdd((LONG *)(((uint)local_c & 0xfffffffc) + 4),-1);
  if (LVar5 == 1) {
    FUN_00515cf0((uint)local_c & 0xfffffffc);
  }
  local_8[2] = local_8[2] + -1;
  if (local_8[2] == 0) {
    FUN_00525340();
  }
  LVar5 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
  if (LVar5 == 1) {
    FUN_00515cf0(local_4 & 0xfffffffc);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bba90 : SUB ESP,0xc
005bba93 : PUSH ESI
005bba94 : MOV ESI,dword ptr [ESP + 0x14]
005bba98 : PUSH 0x1b
005bba9a : MOV ECX,ESI
005bba9c : CALL 0x00526030
005bbaa1 : TEST AL,AL
005bbaa3 : JNZ 0x005bbaba
005bbaa5 : PUSH 0x0
005bbaa7 : PUSH 0x0
005bbaa9 : PUSH 0xb8fd80
005bbaae : MOV ECX,ESI
005bbab0 : CALL 0x00526050
005bbab5 : POP ESI
005bbab6 : ADD ESP,0xc
005bbab9 : RET
005bbaba : MOV EAX,dword ptr [ESI + 0x8]
005bbabd : PUSH EBX
005bbabe : PUSH EDI
005bbabf : TEST EAX,EAX
005bbac1 : JZ 0x005bbac8
005bbac3 : LEA EBX,[EAX + -0x10]
005bbac6 : JMP 0x005bbaca
005bbac8 : XOR EBX,EBX
005bbaca : MOV EDI,dword ptr [ESI + 0x18]
005bbacd : PUSH 0x0
005bbacf : MOV ECX,ESI
005bbad1 : CALL 0x00526260
005bbad6 : PUSH 0x0
005bbad8 : PUSH -0x1
005bbada : PUSH EDI
005bbadb : LEA ECX,[ESP + 0x18]
005bbadf : PUSH ECX
005bbae0 : MOV ECX,EAX
005bbae2 : CALL 0x005272e0
005bbae7 : MOV EDX,dword ptr [ESP + 0xc]
005bbaeb : MOV EAX,dword ptr [EDX]
005bbaed : PUSH EAX
005bbaee : LEA ECX,[ESP + 0x18]
005bbaf2 : CALL 0x0051c480
005bbaf7 : MOV EAX,dword ptr [ESP + 0xc]
005bbafb : DEC dword ptr [EAX + 0x8]
005bbafe : MOV ECX,EAX
005bbb00 : ADD EAX,0x8
005bbb03 : CMP dword ptr [EAX],0x0
005bbb06 : JNZ 0x005bbb0d
005bbb08 : CALL 0x00525340
005bbb0d : MOV EDI,dword ptr [ESI + 0x18]
005bbb10 : PUSH 0x0
005bbb12 : MOV ECX,ESI
005bbb14 : CALL 0x00526260
005bbb19 : PUSH 0x0
005bbb1b : PUSH -0x1
005bbb1d : PUSH EDI
005bbb1e : LEA ECX,[ESP + 0x1c]
005bbb22 : PUSH ECX
005bbb23 : MOV ECX,EAX
005bbb25 : CALL 0x005272e0
005bbb2a : MOV EDX,dword ptr [ESP + 0x10]
005bbb2e : MOV EAX,dword ptr [EDX]
005bbb30 : PUSH EAX
005bbb31 : LEA ECX,[ESP + 0x10]
005bbb35 : CALL 0x0051c480
005bbb3a : TEST EBX,EBX
005bbb3c : JZ 0x005bbb43
005bbb3e : LEA EAX,[EBX + 0x10]
005bbb41 : JMP 0x005bbb45
005bbb43 : XOR EAX,EAX
005bbb45 : MOV EDX,dword ptr [ESI + 0x18]
005bbb48 : LEA ECX,[ESP + 0xc]
005bbb4c : PUSH ECX
005bbb4d : PUSH EAX
005bbb4e : PUSH EDX
005bbb4f : CALL 0x005bae50
005bbb54 : MOV ECX,dword ptr [ESI + 0x18]
005bbb57 : MOVZX EAX,AL
005bbb5a : ADD ESP,0xc
005bbb5d : PUSH EAX
005bbb5e : PUSH ECX
005bbb5f : MOV ECX,EBX
005bbb61 : CALL 0x005bb9d0
005bbb66 : MOV ESI,dword ptr [ESP + 0xc]
005bbb6a : MOV EDI,dword ptr [0x00b851cc]
005bbb70 : AND ESI,0xfffffffc
005bbb73 : PUSH -0x1
005bbb75 : LEA EDX,[ESI + 0x4]
005bbb78 : PUSH EDX
005bbb79 : CALL EDI
005bbb7b : SUB EAX,0x1
005bbb7e : JNZ 0x005bbb86
005bbb80 : PUSH ESI
005bbb81 : CALL 0x00515cf0
005bbb86 : MOV EAX,dword ptr [ESP + 0x10]
005bbb8a : DEC dword ptr [EAX + 0x8]
005bbb8d : MOV ECX,EAX
005bbb8f : ADD EAX,0x8
005bbb92 : CMP dword ptr [EAX],0x0
005bbb95 : JNZ 0x005bbb9c
005bbb97 : CALL 0x00525340
005bbb9c : MOV ESI,dword ptr [ESP + 0x14]
005bbba0 : AND ESI,0xfffffffc
005bbba3 : PUSH -0x1
005bbba5 : LEA EAX,[ESI + 0x4]
005bbba8 : PUSH EAX
005bbba9 : CALL EDI
005bbbab : SUB EAX,0x1
005bbbae : POP EDI
005bbbaf : POP EBX
005bbbb0 : JNZ 0x005bbbb8
005bbbb2 : PUSH ESI
005bbbb3 : CALL 0x00515cf0
005bbbb8 : POP ESI
005bbbb9 : ADD ESP,0xc
005bbbbc : RET
