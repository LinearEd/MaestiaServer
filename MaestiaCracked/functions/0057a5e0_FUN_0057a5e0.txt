PROGRAM  : Maestia.exe
FUNCTION : FUN_0057a5e0
ENTRY    : 0057a5e0
BODY     : [[0057a5e0, 0057a66c] [0057a670, 0057a768]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0057a5e0(undefined4 param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_0057a61a;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_00576cb0(param_1,iVar7);
LAB_0057a61a:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x1c);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *(uint *)*param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00574940(param_2[1]);
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x1c) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0x1c);
  if (uVar5 == param_3) {
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      FUN_00574940(puVar1 + 2);
    }
    uVar5 = *(uint *)*param_2;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    piVar4 = (int *)(puVar1[1] + 8);
    *piVar4 = *piVar4 + -1;
    if (*piVar4 == 0) {
      FUN_00525340();
    }
    puVar1[1] = uVar5;
    FUN_00570b90(param_2[1]);
    *puVar1 = uVar6;
    return;
  }
  puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x1c);
  for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x1c); uVar5 != param_3;
      uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x1c)) {
    uVar5 = *puVar3;
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x1c);
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00574940(puVar1 + 2);
  }
  *puVar3 = uVar6;
  uVar6 = *(uint *)*param_2;
  piVar4 = (int *)(uVar6 + 8);
  *piVar4 = *piVar4 + 1;
  piVar4 = (int *)(puVar1[1] + 8);
  *piVar4 = *piVar4 + -1;
  if (*piVar4 == 0) {
    FUN_00525340();
  }
  puVar1[1] = uVar6;
  FUN_00570b90(param_2[1]);
  *puVar1 = 0xffffffff;
  return;
}



============================================================
DISASSEMBLY
============================================================
0057a5e0 : PUSH EBX
0057a5e1 : PUSH ESI
0057a5e2 : MOV ESI,ECX
0057a5e4 : MOV EAX,dword ptr [ESI]
0057a5e6 : TEST EAX,EAX
0057a5e8 : JNZ 0x0057a5f3
0057a5ea : MOV EAX,dword ptr [ESP + 0xc]
0057a5ee : PUSH 0x8
0057a5f0 : PUSH EAX
0057a5f1 : JMP 0x0057a615
0057a5f3 : MOV ECX,dword ptr [EAX + 0x4]
0057a5f6 : LEA EDX,[ECX*0x4 + 0x4]
0057a5fd : MOV ECX,dword ptr [EAX]
0057a5ff : LEA ECX,[ECX + ECX*0x4]
0057a602 : CMP ECX,EDX
0057a604 : JBE 0x0057a61a
0057a606 : MOV EDX,dword ptr [EAX + 0x4]
0057a609 : MOV ECX,dword ptr [ESP + 0xc]
0057a60d : LEA EAX,[EDX + EDX*0x1 + 0x2]
0057a611 : PUSH EAX
0057a612 : PUSH ECX
0057a613 : MOV ECX,ESI
0057a615 : CALL 0x00576cb0
0057a61a : MOV ECX,dword ptr [ESI]
0057a61c : MOV EAX,dword ptr [ESP + 0x14]
0057a620 : AND EAX,dword ptr [ECX + 0x4]
0057a623 : INC dword ptr [ECX]
0057a625 : MOV ECX,dword ptr [ESI]
0057a627 : LEA EDX,[EAX*0x8 + 0x0]
0057a62e : SUB EDX,EAX
0057a630 : LEA ESI,[ECX + EDX*0x4 + 0x8]
0057a634 : MOV EDX,dword ptr [ESI]
0057a636 : MOV EBX,0xfffffffe
0057a63b : CMP EDX,EBX
0057a63d : JNZ 0x0057a664
0057a63f : MOV ECX,dword ptr [ESP + 0x10]
0057a643 : MOV dword ptr [ESI],0xffffffff
0057a649 : MOV EAX,dword ptr [ECX]
0057a64b : MOV EAX,dword ptr [EAX]
0057a64d : MOV dword ptr [ESI + 0x4],EAX
0057a650 : INC dword ptr [EAX + 0x8]
0057a653 : MOV ECX,dword ptr [ECX + 0x4]
0057a656 : PUSH ECX
0057a657 : LEA ECX,[ESI + 0x8]
0057a65a : CALL 0x00574940
0057a65f : POP ESI
0057a660 : POP EBX
0057a661 : RET 0xc
0057a664 : PUSH EBP
0057a665 : MOV EBP,dword ptr [ECX + 0x4]
0057a668 : PUSH EDI
0057a669 : MOV EDI,EAX
0057a66b : JMP 0x0057a670
0057a670 : INC EDI
0057a671 : AND EDI,EBP
0057a673 : LEA EDX,[EDI*0x8 + 0x0]
0057a67a : SUB EDX,EDI
0057a67c : CMP dword ptr [ECX + EDX*0x4 + 0x8],EBX
0057a680 : JNZ 0x0057a670
0057a682 : MOV EBX,dword ptr [ESI + 0x4]
0057a685 : MOV EBX,dword ptr [EBX + 0xc]
0057a688 : LEA EDX,[EDI*0x8 + 0x0]
0057a68f : SUB EDX,EDI
0057a691 : AND EBX,EBP
0057a693 : LEA EDX,[ECX + EDX*0x4 + 0x8]
0057a697 : CMP EBX,EAX
0057a699 : JNZ 0x0057a6ea
0057a69b : TEST EDX,EDX
0057a69d : JZ 0x0057a6b8
0057a69f : MOV EAX,dword ptr [ESI]
0057a6a1 : MOV dword ptr [EDX],EAX
0057a6a3 : MOV EAX,dword ptr [ESI + 0x4]
0057a6a6 : MOV dword ptr [EDX + 0x4],EAX
0057a6a9 : INC dword ptr [EAX + 0x8]
0057a6ac : LEA EAX,[ESI + 0x8]
0057a6af : PUSH EAX
0057a6b0 : LEA ECX,[EDX + 0x8]
0057a6b3 : CALL 0x00574940
0057a6b8 : MOV EBP,dword ptr [ESP + 0x18]
0057a6bc : MOV ECX,dword ptr [EBP]
0057a6bf : MOV EBX,dword ptr [ECX]
0057a6c1 : INC dword ptr [EBX + 0x8]
0057a6c4 : MOV ECX,dword ptr [ESI + 0x4]
0057a6c7 : ADD dword ptr [ECX + 0x8],-0x1
0057a6cb : JNZ 0x0057a6d2
0057a6cd : CALL 0x00525340
0057a6d2 : MOV dword ptr [ESI + 0x4],EBX
0057a6d5 : MOV EDX,dword ptr [EBP + 0x4]
0057a6d8 : PUSH EDX
0057a6d9 : LEA ECX,[ESI + 0x8]
0057a6dc : CALL 0x00570b90
0057a6e1 : MOV dword ptr [ESI],EDI
0057a6e3 : POP EDI
0057a6e4 : POP EBP
0057a6e5 : POP ESI
0057a6e6 : POP EBX
0057a6e7 : RET 0xc
0057a6ea : LEA EBP,[EBX*0x8 + 0x0]
0057a6f1 : SUB EBP,EBX
0057a6f3 : CMP dword ptr [ECX + EBP*0x4 + 0x8],EAX
0057a6f7 : LEA EBX,[ECX + EBP*0x4 + 0x8]
0057a6fb : JZ 0x0057a715
0057a6fd : LEA ECX,[ECX]
0057a700 : MOV EBX,dword ptr [EBX]
0057a702 : LEA EBP,[EBX*0x8 + 0x0]
0057a709 : SUB EBP,EBX
0057a70b : CMP dword ptr [ECX + EBP*0x4 + 0x8],EAX
0057a70f : LEA EBX,[ECX + EBP*0x4 + 0x8]
0057a713 : JNZ 0x0057a700
0057a715 : TEST EDX,EDX
0057a717 : JZ 0x0057a732
0057a719 : MOV EAX,dword ptr [ESI]
0057a71b : MOV dword ptr [EDX],EAX
0057a71d : MOV EAX,dword ptr [ESI + 0x4]
0057a720 : MOV dword ptr [EDX + 0x4],EAX
0057a723 : INC dword ptr [EAX + 0x8]
0057a726 : LEA EAX,[ESI + 0x8]
0057a729 : PUSH EAX
0057a72a : LEA ECX,[EDX + 0x8]
0057a72d : CALL 0x00574940
0057a732 : MOV dword ptr [EBX],EDI
0057a734 : MOV EBX,dword ptr [ESP + 0x18]
0057a738 : MOV ECX,dword ptr [EBX]
0057a73a : MOV EDI,dword ptr [ECX]
0057a73c : INC dword ptr [EDI + 0x8]
0057a73f : MOV ECX,dword ptr [ESI + 0x4]
0057a742 : ADD dword ptr [ECX + 0x8],-0x1
0057a746 : JNZ 0x0057a74d
0057a748 : CALL 0x00525340
0057a74d : MOV dword ptr [ESI + 0x4],EDI
0057a750 : MOV EDX,dword ptr [EBX + 0x4]
0057a753 : PUSH EDX
0057a754 : LEA ECX,[ESI + 0x8]
0057a757 : CALL 0x00570b90
0057a75c : POP EDI
0057a75d : POP EBP
0057a75e : MOV dword ptr [ESI],0xffffffff
0057a764 : POP ESI
0057a765 : POP EBX
0057a766 : RET 0xc
