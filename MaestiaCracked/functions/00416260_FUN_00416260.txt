PROGRAM  : Maestia.exe
FUNCTION : FUN_00416260
ENTRY    : 00416260
BODY     : [[00416260, 004163c9] [004163cd, 004163e9] [0041642b, 004164c2] [004164e0, 0041655d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00416260(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  uint uStack_68;
  uint local_4c;
  uint local_48;
  undefined1 local_44 [40];
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7c344;
  local_10 = ExceptionList;
  uStack_68 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_68;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_4c = 0;
  }
  else {
    local_4c = (*(int *)(param_1 + 0xc) - iVar2) / 0x28;
  }
  iVar6 = *(int *)(param_1 + 8);
  iVar2 = (iVar6 - iVar2) / 0x28;
  local_1c = uStack_68;
  puVar1 = &uStack_68;
  if (iVar2 == 0x6666666) {
    iVar2 = FUN_00452880();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_4c < uVar3) {
    if (0x6666666 - (local_4c >> 1) < local_4c) {
      local_4c = 0;
    }
    else {
      local_4c = local_4c + (local_4c >> 1);
    }
    if (local_4c < uVar3) {
      local_4c = uVar3;
    }
    iVar4 = FUN_00444990();
    local_8 = 0;
    FUN_00415540();
    FUN_00417130(*(undefined4 *)(param_1 + 4),param_2);
    FUN_00417130(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    iVar6 = *(int *)(param_1 + 4);
    iVar2 = (*(int *)(param_1 + 8) - iVar6) / 0x28 + 1;
    if (iVar6 != 0) {
      FUN_00417890(iVar6,iVar2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = iVar4 + local_4c * 0x28;
    *(int *)(param_1 + 8) = iVar4 + iVar2 * 0x28;
    *(int *)(param_1 + 4) = iVar4;
  }
  else {
    iVar6 = iVar6 - param_2;
    iVar2 = iVar6 >> 0x1f;
    if (iVar6 / 0x28 + iVar2 == iVar2) {
      FUN_004166c0(local_44);
      local_8 = 2;
      FUN_00417130(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00415540();
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x28;
      FUN_00417940(*(int *)(param_1 + 8) + -0x28);
    }
    else {
      FUN_004166c0(local_44);
      local_8 = 5;
      uVar5 = FUN_00417130(*(int *)(param_1 + 8) + -0x28,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar5;
      local_48 = param_3 & 0xffffff00;
      FUN_00417eb0(param_2,local_48,local_48,local_48);
      FUN_00417940(param_2 + 0x28);
    }
    local_8 = 0xffffffff;
    FUN_00414770(local_44);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_1c ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00416260 : PUSH EBP
00416261 : MOV EBP,ESP
00416263 : PUSH -0x1
00416265 : PUSH 0xb7c344
0041626a : MOV EAX,FS:[0x0]
00416270 : PUSH EAX
00416271 : SUB ESP,0x48
00416274 : MOV EAX,[0x00d66fa0]
00416279 : XOR EAX,EBP
0041627b : MOV dword ptr [EBP + -0x18],EAX
0041627e : PUSH EBX
0041627f : PUSH ESI
00416280 : PUSH EDI
00416281 : PUSH EAX
00416282 : LEA EAX,[EBP + -0xc]
00416285 : MOV FS:[0x0],EAX
0041628b : MOV dword ptr [EBP + -0x10],ESP
0041628e : MOV EBX,dword ptr [EBP + 0x8]
00416291 : MOV dword ptr [EBP + -0x4c],EBX
00416294 : MOV EAX,dword ptr [EBP + 0x10]
00416297 : MOV dword ptr [EBP + -0x44],EAX
0041629a : MOV ECX,dword ptr [EBX + 0x4]
0041629d : TEST ECX,ECX
0041629f : JNZ 0x004162a5
004162a1 : XOR ESI,ESI
004162a3 : JMP 0x004162bd
004162a5 : MOV EDX,dword ptr [EBX + 0xc]
004162a8 : SUB EDX,ECX
004162aa : MOV EAX,0x66666667
004162af : IMUL EDX
004162b1 : SAR EDX,0x4
004162b4 : MOV EAX,EDX
004162b6 : SHR EAX,0x1f
004162b9 : ADD EAX,EDX
004162bb : MOV ESI,EAX
004162bd : MOV EDI,dword ptr [EBX + 0x8]
004162c0 : MOV EDX,EDI
004162c2 : SUB EDX,ECX
004162c4 : MOV EAX,0x66666667
004162c9 : IMUL EDX
004162cb : SAR EDX,0x4
004162ce : MOV EAX,EDX
004162d0 : SHR EAX,0x1f
004162d3 : ADD EAX,EDX
004162d5 : MOV ECX,0x6666666
004162da : SUB ECX,EAX
004162dc : CMP ECX,0x1
004162df : JNC 0x004162e6
004162e1 : CALL 0x00452880
004162e6 : INC EAX
004162e7 : CMP ESI,EAX
004162e9 : JNC 0x0041642b
004162ef : MOV ECX,ESI
004162f1 : SHR ECX,0x1
004162f3 : MOV EDX,0x6666666
004162f8 : SUB EDX,ECX
004162fa : CMP EDX,ESI
004162fc : JNC 0x00416307
004162fe : XOR EDI,EDI
00416300 : MOV dword ptr [EBP + -0x48],EDI
00416303 : MOV ESI,EDI
00416305 : JMP 0x0041630e
00416307 : ADD ESI,ECX
00416309 : MOV dword ptr [EBP + -0x48],ESI
0041630c : XOR EDI,EDI
0041630e : CMP ESI,EAX
00416310 : JNC 0x00416317
00416312 : MOV dword ptr [EBP + -0x48],EAX
00416315 : MOV ESI,EAX
00416317 : MOV ECX,ESI
00416319 : CALL 0x00444990
0041631e : MOV ESI,EAX
00416320 : MOV dword ptr [EBP + -0x54],ESI
00416323 : MOV ECX,dword ptr [EBP + 0xc]
00416326 : SUB ECX,dword ptr [EBX + 0x4]
00416329 : MOV EAX,0x66666667
0041632e : IMUL ECX
00416330 : SAR EDX,0x4
00416333 : MOV EAX,EDX
00416335 : SHR EAX,0x1f
00416338 : ADD EAX,EDX
0041633a : MOV dword ptr [EBP + -0x4c],EAX
0041633d : MOV dword ptr [EBP + -0x50],EDI
00416340 : MOV dword ptr [EBP + -0x4],EDI
00416343 : LEA EAX,[EAX + EAX*0x4]
00416346 : LEA EDI,[ESI + EAX*0x8]
00416349 : MOV EDX,dword ptr [EBP + -0x44]
0041634c : MOV ESI,0x1
00416351 : CALL 0x00415540
00416356 : MOV dword ptr [EBP + -0x50],ESI
00416359 : MOV ECX,dword ptr [EBP + 0xc]
0041635c : PUSH ECX
0041635d : MOV EDX,dword ptr [EBX + 0x4]
00416360 : PUSH EDX
00416361 : MOV ESI,dword ptr [EBP + -0x54]
00416364 : MOV EDX,ESI
00416366 : CALL 0x00417130
0041636b : MOV dword ptr [EBP + -0x50],0x2
00416372 : MOV EAX,dword ptr [EBP + -0x4c]
00416375 : LEA EAX,[EAX + EAX*0x4 + 0x5]
00416379 : LEA EDX,[ESI + EAX*0x8]
0041637c : MOV ECX,dword ptr [EBX + 0x8]
0041637f : PUSH ECX
00416380 : MOV EAX,dword ptr [EBP + 0xc]
00416383 : PUSH EAX
00416384 : CALL 0x00417130
00416389 : MOV dword ptr [EBP + -0x4],0xffffffff
00416390 : MOV ECX,dword ptr [EBX + 0x8]
00416393 : MOV EDI,dword ptr [EBX + 0x4]
00416396 : SUB ECX,EDI
00416398 : MOV EAX,0x66666667
0041639d : IMUL ECX
0041639f : SAR EDX,0x4
004163a2 : MOV ECX,EDX
004163a4 : SHR ECX,0x1f
004163a7 : LEA EDX,[EDX + ECX*0x1 + 0x1]
004163ab : MOV dword ptr [EBP + -0x44],EDX
004163ae : TEST EDI,EDI
004163b0 : JZ 0x004163cd
004163b2 : MOV EDX,dword ptr [EBP + -0x44]
004163b5 : PUSH EDX
004163b6 : PUSH EDI
004163b7 : MOV EDI,dword ptr [EBX + 0x8]
004163ba : CALL 0x00417890
004163bf : ADD ESP,0x8
004163c2 : MOV ECX,dword ptr [EBX + 0x4]
004163c5 : CALL 0x006f04e0
004163cd : MOV EAX,dword ptr [EBP + -0x48]
004163d0 : LEA EAX,[EAX + EAX*0x4]
004163d3 : LEA ECX,[ESI + EAX*0x8]
004163d6 : MOV dword ptr [EBX + 0xc],ECX
004163d9 : LEA EDX,[EDX + EDX*0x4]
004163dc : LEA EAX,[ESI + EDX*0x8]
004163df : MOV dword ptr [EBX + 0x8],EAX
004163e2 : MOV dword ptr [EBX + 0x4],ESI
004163e5 : JMP 0x00416540
0041642b : SUB EDI,dword ptr [EBP + 0xc]
0041642e : MOV EAX,0x66666667
00416433 : IMUL EDI
00416435 : SAR EDX,0x4
00416438 : MOV ECX,EDX
0041643a : SHR ECX,0x1f
0041643d : ADD ECX,EDX
0041643f : CMP ECX,0x1
00416442 : MOV ECX,dword ptr [EBP + -0x44]
00416445 : JNC 0x004164e0
0041644b : LEA EDX,[EBP + -0x40]
0041644e : PUSH EDX
0041644f : CALL 0x004166c0
00416454 : MOV dword ptr [EBP + -0x4],0x2
0041645b : MOV EAX,dword ptr [EBP + 0xc]
0041645e : LEA EDX,[EAX + 0x28]
00416461 : MOV ECX,dword ptr [EBX + 0x8]
00416464 : PUSH ECX
00416465 : PUSH EAX
00416466 : CALL 0x00417130
0041646b : MOV byte ptr [EBP + -0x4],0x3
0041646f : MOV EDI,dword ptr [EBX + 0x8]
00416472 : MOV ECX,EDI
00416474 : SUB ECX,dword ptr [EBP + 0xc]
00416477 : MOV EAX,0x66666667
0041647c : IMUL ECX
0041647e : SAR EDX,0x4
00416481 : MOV EAX,EDX
00416483 : SHR EAX,0x1f
00416486 : ADD EAX,EDX
00416488 : MOV ESI,0x1
0041648d : SUB ESI,EAX
0041648f : LEA EDX,[EBP + -0x40]
00416492 : CALL 0x00415540
00416497 : MOV dword ptr [EBP + -0x4],0x2
0041649e : ADD dword ptr [EBX + 0x8],0x28
004164a2 : MOV EBX,dword ptr [EBX + 0x8]
004164a5 : LEA EAX,[EBX + -0x28]
004164a8 : PUSH EAX
004164a9 : LEA EDI,[EBP + -0x40]
004164ac : MOV EAX,dword ptr [EBP + 0xc]
004164af : CALL 0x00417940
004164b4 : ADD ESP,0x4
004164b7 : MOV dword ptr [EBP + -0x4],0xffffffff
004164be : MOV ECX,EDI
004164c0 : PUSH ECX
004164c1 : JMP 0x0041653b
004164e0 : LEA EAX,[EBP + -0x40]
004164e3 : PUSH EAX
004164e4 : CALL 0x004166c0
004164e9 : MOV dword ptr [EBP + -0x4],0x5
004164f0 : MOV ESI,dword ptr [EBX + 0x8]
004164f3 : LEA EDI,[ESI + -0x28]
004164f6 : PUSH ESI
004164f7 : PUSH EDI
004164f8 : MOV EDX,ESI
004164fa : CALL 0x00417130
004164ff : MOV dword ptr [EBX + 0x8],EAX
00416502 : MOV byte ptr [EBP + -0x44],0x0
00416506 : MOV ECX,dword ptr [EBP + -0x44]
00416509 : PUSH ECX
0041650a : MOV EDX,dword ptr [EBP + -0x44]
0041650d : PUSH EDX
0041650e : MOV EAX,dword ptr [EBP + -0x44]
00416511 : PUSH EAX
00416512 : MOV ECX,dword ptr [EBP + 0xc]
00416515 : PUSH ECX
00416516 : MOV EAX,ESI
00416518 : MOV ECX,EDI
0041651a : CALL 0x00417eb0
0041651f : MOV EAX,dword ptr [EBP + 0xc]
00416522 : LEA EDX,[EAX + 0x28]
00416525 : PUSH EDX
00416526 : LEA EDI,[EBP + -0x40]
00416529 : CALL 0x00417940
0041652e : ADD ESP,0x14
00416531 : MOV dword ptr [EBP + -0x4],0xffffffff
00416538 : MOV EAX,EDI
0041653a : PUSH EAX
0041653b : CALL 0x00414770
00416540 : MOV ECX,dword ptr [EBP + -0xc]
00416543 : MOV dword ptr FS:[0x0],ECX
0041654a : POP ECX
0041654b : POP EDI
0041654c : POP ESI
0041654d : POP EBX
0041654e : MOV ECX,dword ptr [EBP + -0x18]
00416551 : XOR ECX,EBP
00416553 : CALL 0x00633e6b
00416558 : MOV ESP,EBP
0041655a : POP EBP
0041655b : RET 0xc
