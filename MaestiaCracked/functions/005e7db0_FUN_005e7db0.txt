PROGRAM  : Maestia.exe
FUNCTION : FUN_005e7db0
ENTRY    : 005e7db0
BODY     : [[005e7db0, 005e8047]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e7db0(int param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined1 uVar3;
  undefined1 uVar4;
  undefined1 uVar5;
  undefined1 uVar6;
  undefined1 uVar7;
  undefined1 uVar8;
  undefined1 uVar9;
  undefined1 uVar10;
  undefined1 uVar11;
  undefined1 uVar12;
  int iVar13;
  GRefCountNTSImpl *pGVar14;
  int iVar15;
  GRefCountNTSImpl *this;
  int *local_10;
  undefined4 local_c;
  int local_8;
  int local_4;
  
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar1 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar2 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar3 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar4 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar5 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar6 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar7 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar8 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar9 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar10 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  iVar15 = *(int *)(param_1 + 0x314);
  if (iVar15 == 0) {
    iVar15 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar15 + 0x15) = 0;
  if (*(int *)(iVar15 + 0x30) - *(int *)(iVar15 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar13 = *(int *)(iVar15 + 0x2c);
  uVar11 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + 1 + iVar13);
  uVar12 = *(undefined1 *)(*(int *)(iVar15 + 0x3c) + iVar13);
  *(int *)(iVar15 + 0x2c) = iVar13 + 2;
  pGVar14 = (GRefCountNTSImpl *)FUN_00515840(0x20,0);
  this = (GRefCountNTSImpl *)0x0;
  if (pGVar14 != (GRefCountNTSImpl *)0x0) {
    *(undefined ***)pGVar14 = &PTR_FUN_00cd3f2c;
    *(undefined4 *)(pGVar14 + 4) = 1;
    *(undefined ***)pGVar14 = &PTR_FUN_00b94234;
    *(undefined4 *)(pGVar14 + 8) = 0x40000;
    *(undefined4 *)(pGVar14 + 0xc) = 0;
    *(undefined4 *)(pGVar14 + 0x10) = 0;
    *(undefined4 *)(pGVar14 + 0x14) = 0;
    *(undefined4 *)(pGVar14 + 0x18) = 0;
    *(undefined4 *)(pGVar14 + 0x1c) = 0;
    this = pGVar14;
  }
  *(uint *)(this + 8) = CONCAT11(uVar3,uVar4) | 0x90000;
  *(uint *)(this + 0x18) = (uint)CONCAT11(uVar9,uVar10);
  *(uint *)(this + 0x10) = (uint)CONCAT11(uVar5,uVar6);
  *(uint *)(this + 0x14) = (uint)CONCAT11(uVar7,uVar8);
  *(uint *)(this + 0x1c) = (uint)CONCAT11(uVar11,uVar12);
  FUN_005a0c90(&local_10,this);
  FUN_005a1610(&local_8,CONCAT11(uVar1,uVar2),&local_10);
  if ((local_8 == 0) && (local_4 != 0)) {
    FUN_00524240();
  }
  if (local_10 != (int *)0x0) {
    (**(code **)(*local_10 + 8))(local_c);
  }
  if (this != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005e7db0 : SUB ESP,0x1c
005e7db3 : PUSH EBX
005e7db4 : PUSH EBP
005e7db5 : PUSH ESI
005e7db6 : PUSH EDI
005e7db7 : MOV EDI,dword ptr [ESP + 0x30]
005e7dbb : MOV ESI,dword ptr [EDI + 0x314]
005e7dc1 : TEST ESI,ESI
005e7dc3 : JNZ 0x005e7dc8
005e7dc5 : LEA ESI,[EDI + 0x28]
005e7dc8 : MOV EAX,dword ptr [ESI + 0x30]
005e7dcb : SUB EAX,dword ptr [ESI + 0x2c]
005e7dce : MOV byte ptr [ESI + 0x15],0x0
005e7dd2 : CMP EAX,0x2
005e7dd5 : JGE 0x005e7de0
005e7dd7 : PUSH 0x2
005e7dd9 : MOV ECX,ESI
005e7ddb : CALL 0x00539fb0
005e7de0 : MOV EAX,dword ptr [ESI + 0x2c]
005e7de3 : MOV ECX,dword ptr [ESI + 0x3c]
005e7de6 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7dec : ADD ECX,EAX
005e7dee : MOVZX CX,byte ptr [ECX]
005e7df2 : SHL DX,0x8
005e7df6 : OR DX,CX
005e7df9 : MOVZX ECX,DX
005e7dfc : ADD EAX,0x2
005e7dff : MOV dword ptr [ESI + 0x2c],EAX
005e7e02 : MOV ESI,dword ptr [EDI + 0x314]
005e7e08 : MOVZX EDX,CX
005e7e0b : MOV dword ptr [ESP + 0x18],EDX
005e7e0f : TEST ESI,ESI
005e7e11 : JNZ 0x005e7e16
005e7e13 : LEA ESI,[EDI + 0x28]
005e7e16 : MOV EAX,dword ptr [ESI + 0x30]
005e7e19 : SUB EAX,dword ptr [ESI + 0x2c]
005e7e1c : MOV byte ptr [ESI + 0x15],0x0
005e7e20 : CMP EAX,0x2
005e7e23 : JGE 0x005e7e2e
005e7e25 : PUSH 0x2
005e7e27 : MOV ECX,ESI
005e7e29 : CALL 0x00539fb0
005e7e2e : MOV EAX,dword ptr [ESI + 0x2c]
005e7e31 : MOV ECX,dword ptr [ESI + 0x3c]
005e7e34 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7e3a : ADD ECX,EAX
005e7e3c : MOVZX CX,byte ptr [ECX]
005e7e40 : SHL DX,0x8
005e7e44 : OR DX,CX
005e7e47 : ADD EAX,0x2
005e7e4a : MOVZX ECX,DX
005e7e4d : MOV dword ptr [ESI + 0x2c],EAX
005e7e50 : MOV ESI,dword ptr [EDI + 0x314]
005e7e56 : MOVZX EBP,CX
005e7e59 : TEST ESI,ESI
005e7e5b : JNZ 0x005e7e60
005e7e5d : LEA ESI,[EDI + 0x28]
005e7e60 : MOV EDX,dword ptr [ESI + 0x30]
005e7e63 : SUB EDX,dword ptr [ESI + 0x2c]
005e7e66 : MOV byte ptr [ESI + 0x15],0x0
005e7e6a : CMP EDX,0x2
005e7e6d : JGE 0x005e7e78
005e7e6f : PUSH 0x2
005e7e71 : MOV ECX,ESI
005e7e73 : CALL 0x00539fb0
005e7e78 : MOV EAX,dword ptr [ESI + 0x2c]
005e7e7b : MOV ECX,dword ptr [ESI + 0x3c]
005e7e7e : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7e84 : ADD ECX,EAX
005e7e86 : MOVZX CX,byte ptr [ECX]
005e7e8a : SHL DX,0x8
005e7e8e : OR DX,CX
005e7e91 : ADD EAX,0x2
005e7e94 : MOVZX EDX,DX
005e7e97 : MOV dword ptr [ESI + 0x2c],EAX
005e7e9a : MOV ESI,dword ptr [EDI + 0x314]
005e7ea0 : MOV dword ptr [ESP + 0x30],EDX
005e7ea4 : TEST ESI,ESI
005e7ea6 : JNZ 0x005e7eab
005e7ea8 : LEA ESI,[EDI + 0x28]
005e7eab : MOV EAX,dword ptr [ESI + 0x30]
005e7eae : SUB EAX,dword ptr [ESI + 0x2c]
005e7eb1 : MOV byte ptr [ESI + 0x15],0x0
005e7eb5 : CMP EAX,0x2
005e7eb8 : JGE 0x005e7ec3
005e7eba : PUSH 0x2
005e7ebc : MOV ECX,ESI
005e7ebe : CALL 0x00539fb0
005e7ec3 : MOV EAX,dword ptr [ESI + 0x2c]
005e7ec6 : MOV ECX,dword ptr [ESI + 0x3c]
005e7ec9 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7ecf : ADD ECX,EAX
005e7ed1 : MOVZX CX,byte ptr [ECX]
005e7ed5 : SHL DX,0x8
005e7ed9 : OR DX,CX
005e7edc : ADD EAX,0x2
005e7edf : MOVZX EDX,DX
005e7ee2 : MOV dword ptr [ESI + 0x2c],EAX
005e7ee5 : MOV ESI,dword ptr [EDI + 0x314]
005e7eeb : MOV dword ptr [ESP + 0x10],EDX
005e7eef : TEST ESI,ESI
005e7ef1 : JNZ 0x005e7ef6
005e7ef3 : LEA ESI,[EDI + 0x28]
005e7ef6 : MOV EAX,dword ptr [ESI + 0x30]
005e7ef9 : SUB EAX,dword ptr [ESI + 0x2c]
005e7efc : MOV byte ptr [ESI + 0x15],0x0
005e7f00 : CMP EAX,0x2
005e7f03 : JGE 0x005e7f0e
005e7f05 : PUSH 0x2
005e7f07 : MOV ECX,ESI
005e7f09 : CALL 0x00539fb0
005e7f0e : MOV EAX,dword ptr [ESI + 0x2c]
005e7f11 : MOV ECX,dword ptr [ESI + 0x3c]
005e7f14 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7f1a : ADD ECX,EAX
005e7f1c : MOVZX CX,byte ptr [ECX]
005e7f20 : SHL DX,0x8
005e7f24 : OR DX,CX
005e7f27 : ADD EAX,0x2
005e7f2a : MOVZX EDX,DX
005e7f2d : MOV dword ptr [ESI + 0x2c],EAX
005e7f30 : MOV ESI,dword ptr [EDI + 0x314]
005e7f36 : MOV dword ptr [ESP + 0x14],EDX
005e7f3a : TEST ESI,ESI
005e7f3c : JNZ 0x005e7f41
005e7f3e : LEA ESI,[EDI + 0x28]
005e7f41 : MOV EAX,dword ptr [ESI + 0x30]
005e7f44 : SUB EAX,dword ptr [ESI + 0x2c]
005e7f47 : MOV byte ptr [ESI + 0x15],0x0
005e7f4b : CMP EAX,0x2
005e7f4e : JGE 0x005e7f59
005e7f50 : PUSH 0x2
005e7f52 : MOV ECX,ESI
005e7f54 : CALL 0x00539fb0
005e7f59 : MOV EAX,dword ptr [ESI + 0x2c]
005e7f5c : MOV ECX,dword ptr [ESI + 0x3c]
005e7f5f : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7f65 : ADD ECX,EAX
005e7f67 : MOVZX CX,byte ptr [ECX]
005e7f6b : ADD EAX,0x2
005e7f6e : MOV dword ptr [ESI + 0x2c],EAX
005e7f71 : SHL DX,0x8
005e7f75 : XOR ESI,ESI
005e7f77 : OR DX,CX
005e7f7a : MOV ECX,dword ptr [0x00d73250]
005e7f80 : PUSH ESI
005e7f81 : PUSH 0x20
005e7f83 : MOVZX EBX,DX
005e7f86 : CALL 0x00515840
005e7f8b : CMP EAX,ESI
005e7f8d : JZ 0x005e7fba
005e7f8f : MOV dword ptr [EAX],0xcd3f2c
005e7f95 : MOV dword ptr [EAX + 0x4],0x1
005e7f9c : MOV dword ptr [EAX],0xb94234
005e7fa2 : MOV dword ptr [EAX + 0x8],0x40000
005e7fa9 : MOV dword ptr [EAX + 0xc],ESI
005e7fac : MOV dword ptr [EAX + 0x10],ESI
005e7faf : MOV dword ptr [EAX + 0x14],ESI
005e7fb2 : MOV dword ptr [EAX + 0x18],ESI
005e7fb5 : MOV dword ptr [EAX + 0x1c],ESI
005e7fb8 : MOV ESI,EAX
005e7fba : MOVZX EDX,word ptr [ESP + 0x14]
005e7fbf : MOVZX ECX,word ptr [ESP + 0x10]
005e7fc4 : OR EBP,0x90000
005e7fca : MOV EAX,EBP
005e7fcc : MOV dword ptr [ESI + 0x8],EAX
005e7fcf : MOVZX EAX,word ptr [ESP + 0x30]
005e7fd4 : MOV dword ptr [ESI + 0x18],EDX
005e7fd7 : MOVZX EBP,BX
005e7fda : LEA EDX,[ESP + 0x1c]
005e7fde : PUSH ESI
005e7fdf : PUSH EDX
005e7fe0 : MOV dword ptr [ESI + 0x10],EAX
005e7fe3 : MOV dword ptr [ESI + 0x14],ECX
005e7fe6 : MOV dword ptr [ESI + 0x1c],EBP
005e7fe9 : CALL 0x005a0c90
005e7fee : ADD ESP,0x8
005e7ff1 : LEA EAX,[ESP + 0x1c]
005e7ff5 : PUSH EAX
005e7ff6 : PUSH ECX
005e7ff7 : MOV ECX,dword ptr [ESP + 0x20]
005e7ffb : MOV EAX,ESP
005e7ffd : LEA EDX,[ESP + 0x2c]
005e8001 : MOV dword ptr [EAX],ECX
005e8003 : PUSH EDX
005e8004 : MOV ECX,EDI
005e8006 : CALL 0x005a1610
005e800b : CMP dword ptr [ESP + 0x24],0x0
005e8010 : JNZ 0x005e801f
005e8012 : MOV ECX,dword ptr [ESP + 0x28]
005e8016 : TEST ECX,ECX
005e8018 : JZ 0x005e801f
005e801a : CALL 0x00524240
005e801f : MOV ECX,dword ptr [ESP + 0x1c]
005e8023 : TEST ECX,ECX
005e8025 : JZ 0x005e8033
005e8027 : MOV EAX,dword ptr [ECX]
005e8029 : MOV EDX,dword ptr [ESP + 0x20]
005e802d : MOV EAX,dword ptr [EAX + 0x8]
005e8030 : PUSH EDX
005e8031 : CALL EAX
005e8033 : TEST ESI,ESI
005e8035 : JZ 0x005e803e
005e8037 : MOV ECX,ESI
005e8039 : CALL 0x004ff7c0
005e803e : POP EDI
005e803f : POP ESI
005e8040 : POP EBP
005e8041 : POP EBX
005e8042 : ADD ESP,0x1c
005e8045 : RET 0x8
