PROGRAM  : Maestia.exe
FUNCTION : FUN_0042f990
ENTRY    : 0042f990
BODY     : [[0042f990, 0042f9cb] [0042f9d0, 0042fae5]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0042f9ec) */

void FUN_0042f990(int param_1,undefined4 *param_2,undefined4 *param_3)

{
  uint uVar1;
  int iVar2;
  ushort *puVar3;
  undefined4 *puVar4;
  int iVar5;
  ushort *puVar6;
  uint uVar7;
  undefined4 *puVar8;
  bool bVar9;
  
  iVar2 = (int)param_3;
  puVar4 = *(undefined4 **)(param_1 + 4);
  bVar9 = true;
  if (*(char *)((int)puVar4[1] + 0x2d) == '\0') {
    uVar1 = *(uint *)((int)param_3 + 0x14);
    puVar8 = (undefined4 *)puVar4[1];
    do {
      puVar4 = puVar8;
      if ((uint)puVar4[9] < 8) {
        puVar3 = (ushort *)(puVar4 + 4);
      }
      else {
        puVar3 = (ushort *)puVar4[4];
      }
      uVar7 = puVar4[8];
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = uVar1;
      }
      if (*(uint *)((int)param_3 + 0x18) < 8) {
        puVar6 = (ushort *)((int)param_3 + 4);
      }
      else {
        puVar6 = *(ushort **)((int)param_3 + 4);
      }
      for (; uVar7 != 0; uVar7 = uVar7 - 1) {
        if (*puVar6 != *puVar3) {
          uVar7 = (-(uint)(*puVar6 < *puVar3) & 0xfffffffe) + 1;
          if (uVar7 != 0) goto LAB_0042fa47;
          break;
        }
        puVar6 = puVar6 + 1;
        puVar3 = puVar3 + 1;
      }
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = 0xffffffff;
      }
      else {
        uVar7 = (uint)(uVar1 != puVar4[8]);
      }
LAB_0042fa47:
      bVar9 = (int)uVar7 < 0;
      if (bVar9) {
        puVar8 = (undefined4 *)*puVar4;
      }
      else {
        puVar8 = (undefined4 *)puVar4[2];
      }
    } while (*(char *)((int)puVar8 + 0x2d) == '\0');
  }
  param_3 = puVar4;
  if (bVar9) {
    if (puVar4 == (undefined4 *)**(int **)(param_1 + 4)) {
      bVar9 = true;
      goto LAB_0042fa81;
    }
    FUN_004d6300();
  }
  puVar4 = param_3;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar5 = iVar2 + 4;
  }
  else {
    iVar5 = *(int *)(iVar2 + 4);
  }
  iVar5 = FUN_00405bb0(iVar5);
  if (-1 < iVar5) {
    *param_2 = puVar4;
    *(undefined1 *)(param_2 + 1) = 0;
    return;
  }
LAB_0042fa81:
  puVar4 = (undefined4 *)FUN_0042faf0(&param_3,bVar9,iVar2);
  *param_2 = *puVar4;
  *(undefined1 *)(param_2 + 1) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
0042f990 : PUSH EBP
0042f991 : MOV EBP,ESP
0042f993 : SUB ESP,0x18
0042f996 : PUSH EBX
0042f997 : MOV EBX,dword ptr [EBP + 0x10]
0042f99a : PUSH ESI
0042f99b : PUSH EDI
0042f99c : MOV EDI,dword ptr [EBP + 0x8]
0042f99f : MOV EAX,dword ptr [EDI + 0x4]
0042f9a2 : MOV ESI,dword ptr [EAX + 0x4]
0042f9a5 : CMP byte ptr [ESI + 0x2d],0x0
0042f9a9 : MOV ECX,EAX
0042f9ab : MOV AL,0x1
0042f9ad : MOV dword ptr [EBP + -0x4],ECX
0042f9b0 : MOV byte ptr [EBP + -0x8],AL
0042f9b3 : JNZ 0x0042fa6a
0042f9b9 : MOV EAX,dword ptr [EBX + 0x14]
0042f9bc : MOV EDX,dword ptr [EBX + 0x18]
0042f9bf : MOV ECX,EAX
0042f9c1 : MOV dword ptr [EBP + -0x10],EAX
0042f9c4 : MOV dword ptr [EBP + -0xc],ECX
0042f9c7 : MOV dword ptr [EBP + -0x14],EDX
0042f9ca : JMP 0x0042f9d3
0042f9d0 : MOV ECX,dword ptr [EBP + -0xc]
0042f9d3 : CMP dword ptr [ESI + 0x24],0x8
0042f9d7 : MOV EDX,dword ptr [ESI + 0x20]
0042f9da : MOV dword ptr [EBP + -0x4],ESI
0042f9dd : JC 0x0042f9e4
0042f9df : MOV EAX,dword ptr [ESI + 0x10]
0042f9e2 : JMP 0x0042f9e7
0042f9e4 : LEA EAX,[ESI + 0x10]
0042f9e7 : MOV EDI,dword ptr [EBP + -0x10]
0042f9ea : CMP ECX,EDI
0042f9ec : CMOVC EDI,ECX
0042f9ef : CMP EDI,EDX
0042f9f1 : JNC 0x0042f9f5
0042f9f3 : MOV EDX,EDI
0042f9f5 : CMP dword ptr [EBP + -0x14],0x8
0042f9f9 : JC 0x0042fa00
0042f9fb : MOV ECX,dword ptr [EBX + 0x4]
0042f9fe : JMP 0x0042fa03
0042fa00 : LEA ECX,[EBX + 0x4]
0042fa03 : TEST EDX,EDX
0042fa05 : JBE 0x0042fa1d
0042fa07 : MOV BX,word ptr [ECX]
0042fa0a : CMP BX,word ptr [EAX]
0042fa0d : JNZ 0x0042fa29
0042fa0f : ADD ECX,0x2
0042fa12 : ADD EAX,0x2
0042fa15 : SUB EDX,0x1
0042fa18 : JNZ 0x0042fa07
0042fa1a : MOV EBX,dword ptr [EBP + 0x10]
0042fa1d : MOV EAX,dword ptr [ESI + 0x20]
0042fa20 : CMP EDI,EAX
0042fa22 : JNC 0x0042fa3e
0042fa24 : OR EAX,0xffffffff
0042fa27 : JMP 0x0042fa47
0042fa29 : MOV CX,BX
0042fa2c : CMP CX,word ptr [EAX]
0042fa2f : SBB EAX,EAX
0042fa31 : AND EAX,0xfffffffe
0042fa34 : ADD EAX,0x1
0042fa37 : JZ 0x0042fa1a
0042fa39 : MOV EBX,dword ptr [EBP + 0x10]
0042fa3c : JMP 0x0042fa47
0042fa3e : XOR EDX,EDX
0042fa40 : CMP EDI,EAX
0042fa42 : SETNZ DL
0042fa45 : MOV EAX,EDX
0042fa47 : TEST EAX,EAX
0042fa49 : SETL AL
0042fa4c : MOV byte ptr [EBP + -0x8],AL
0042fa4f : TEST AL,AL
0042fa51 : JZ 0x0042fa57
0042fa53 : MOV ESI,dword ptr [ESI]
0042fa55 : JMP 0x0042fa5a
0042fa57 : MOV ESI,dword ptr [ESI + 0x8]
0042fa5a : CMP byte ptr [ESI + 0x2d],0x0
0042fa5e : JZ 0x0042f9d0
0042fa64 : MOV EDI,dword ptr [EBP + 0x8]
0042fa67 : MOV ECX,dword ptr [EBP + -0x4]
0042fa6a : MOV ESI,ECX
0042fa6c : MOV dword ptr [EBP + 0x10],ESI
0042fa6f : TEST AL,AL
0042fa71 : JZ 0x0042faa2
0042fa73 : MOV EAX,dword ptr [EDI + 0x4]
0042fa76 : LEA EDX,[EBP + 0x10]
0042fa79 : CMP ECX,dword ptr [EAX]
0042fa7b : JNZ 0x0042fa9a
0042fa7d : PUSH EBX
0042fa7e : PUSH 0x1
0042fa80 : PUSH EDX
0042fa81 : CALL 0x0042faf0
0042fa86 : MOV ECX,dword ptr [EAX]
0042fa88 : MOV EAX,dword ptr [EBP + 0xc]
0042fa8b : MOV dword ptr [EAX],ECX
0042fa8d : MOV byte ptr [EAX + 0x4],0x1
0042fa91 : POP EDI
0042fa92 : POP ESI
0042fa93 : POP EBX
0042fa94 : MOV ESP,EBP
0042fa96 : POP EBP
0042fa97 : RET 0xc
0042fa9a : CALL 0x004d6300
0042fa9f : MOV ESI,dword ptr [EBP + 0x10]
0042faa2 : CMP dword ptr [EBX + 0x18],0x8
0042faa6 : MOV EDI,dword ptr [EBX + 0x14]
0042faa9 : LEA ECX,[ESI + 0xc]
0042faac : JC 0x0042fab3
0042faae : MOV EAX,dword ptr [EBX + 0x4]
0042fab1 : JMP 0x0042fab6
0042fab3 : LEA EAX,[EBX + 0x4]
0042fab6 : PUSH EAX
0042fab7 : MOV EAX,dword ptr [ECX + 0x14]
0042faba : CALL 0x00405bb0
0042fabf : TEST EAX,EAX
0042fac1 : JGE 0x0042fad4
0042fac3 : MOV EDX,dword ptr [EBP + -0x8]
0042fac6 : MOV ECX,dword ptr [EBP + -0x4]
0042fac9 : MOV EDI,dword ptr [EBP + 0x8]
0042facc : PUSH EBX
0042facd : PUSH EDX
0042face : LEA EAX,[EBP + 0x10]
0042fad1 : PUSH EAX
0042fad2 : JMP 0x0042fa81
0042fad4 : MOV EAX,dword ptr [EBP + 0xc]
0042fad7 : POP EDI
0042fad8 : MOV dword ptr [EAX],ESI
0042fada : POP ESI
0042fadb : MOV byte ptr [EAX + 0x4],0x0
0042fadf : POP EBX
0042fae0 : MOV ESP,EBP
0042fae2 : POP EBP
0042fae3 : RET 0xc
