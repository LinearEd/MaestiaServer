PROGRAM  : Maestia.exe
FUNCTION : FUN_007af770
ENTRY    : 007af770
BODY     : [[007af770, 007af95a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x007af7da) */
/* WARNING: Removing unreachable block (ram,0x007af813) */

void FUN_007af770(void)

{
  uint uVar1;
  int *piVar2;
  undefined4 *in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  puStack_c = &LAB_00b3c77b;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_FUN_00cd6450;
  in_ECX[0xe] = &PTR_LAB_00cd64a0;
  local_8 = 0x14;
  if (in_ECX[0x95] != in_ECX[0x96]) {
    in_ECX[0x96] = in_ECX[0x95];
  }
  if (in_ECX[0x9a] != in_ECX[0x9b]) {
    in_ECX[0x9b] = in_ECX[0x9a];
  }
  if ((in_ECX[0x973] - in_ECX[0x972] & 0xfffffffc) != 0) {
    piVar2 = (int *)in_ECX[0x972];
    if (piVar2 != (int *)in_ECX[0x973]) {
      do {
        if ((undefined4 *)*piVar2 != (undefined4 *)0x0) {
          (*(code *)**(undefined4 **)*piVar2)(1,uVar1);
        }
        piVar2 = piVar2 + 1;
      } while (piVar2 != (int *)in_ECX[0x973]);
    }
    FUN_0042d2e0(in_ECX + 0x971);
  }
  FUN_007af3e0();
  DeleteCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x916));
  DeleteCriticalSection((LPCRITICAL_SECTION)(in_ECX + 0x91c));
  local_8 = CONCAT31(local_8._1_3_,0x13);
  if (in_ECX[0x972] == 0) {
    in_ECX[0x972] = 0;
    in_ECX[0x973] = 0;
    in_ECX[0x974] = 0;
    local_8._0_1_ = 0x12;
    _eh_vector_destructor_iterator_(in_ECX + 0x933,8,0x1e,FUN_0045f5a0);
    local_8._0_1_ = 0x11;
    _eh_vector_destructor_iterator_(in_ECX + 0x925,0x1c,2,FUN_00406560);
    in_ECX[0xe8] = &PTR_FUN_00cd083c;
    local_8._0_1_ = 0xf;
    FUN_00443a70(in_ECX + 0xe2);
    local_8._0_1_ = 0xe;
    FUN_0047a120(in_ECX + 0xdb);
    local_8._0_1_ = 0xd;
    FUN_0047a120(in_ECX + 0xd8);
    local_8._0_1_ = 0xc;
    FUN_00401120(in_ECX + 0xd5);
    local_8._0_1_ = 0xb;
    FUN_00401120(in_ECX + 0xd2);
    local_8 = CONCAT31(local_8._1_3_,10);
    FUN_00452670();
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
007af770 : PUSH EBP
007af771 : MOV EBP,ESP
007af773 : PUSH -0x1
007af775 : PUSH 0xb3c77b
007af77a : MOV EAX,FS:[0x0]
007af780 : PUSH EAX
007af781 : SUB ESP,0xc
007af784 : PUSH EBX
007af785 : PUSH ESI
007af786 : PUSH EDI
007af787 : MOV EAX,[0x00d66fa0]
007af78c : XOR EAX,EBP
007af78e : PUSH EAX
007af78f : LEA EAX,[EBP + -0xc]
007af792 : MOV FS:[0x0],EAX
007af798 : MOV ESI,ECX
007af79a : MOV dword ptr [EBP + -0x14],ESI
007af79d : MOV dword ptr [ESI],0xcd6450
007af7a3 : MOV dword ptr [ESI + 0x38],0xcd64a0
007af7aa : MOV dword ptr [EBP + -0x4],0x14
007af7b1 : MOV ECX,dword ptr [ESI + 0x258]
007af7b7 : MOV EDX,dword ptr [ESI + 0x254]
007af7bd : XOR EBX,EBX
007af7bf : CMP EDX,ECX
007af7c1 : JZ 0x007af7ef
007af7c3 : MOV EAX,ECX
007af7c5 : SUB EAX,ECX
007af7c7 : SAR EAX,0x2
007af7ca : LEA EDI,[EAX*0x4 + 0x0]
007af7d1 : MOV dword ptr [EBP + -0x10],EDI
007af7d4 : ADD EDI,EDX
007af7d6 : CMP EAX,EBX
007af7d8 : JLE 0x007af7e9
007af7da : MOV EAX,dword ptr [EBP + -0x10]
007af7dd : PUSH EAX
007af7de : PUSH ECX
007af7df : PUSH EAX
007af7e0 : PUSH EDX
007af7e1 : CALL 0x00634101
007af7e6 : ADD ESP,0x10
007af7e9 : MOV dword ptr [ESI + 0x258],EDI
007af7ef : MOV ECX,dword ptr [ESI + 0x26c]
007af7f5 : MOV EDI,dword ptr [ESI + 0x268]
007af7fb : CMP EDI,ECX
007af7fd : JZ 0x007af82b
007af7ff : MOV EAX,ECX
007af801 : SUB EAX,ECX
007af803 : SAR EAX,0x2
007af806 : LEA EDX,[EAX*0x4 + 0x0]
007af80d : ADD EDI,EDX
007af80f : CMP EAX,EBX
007af811 : JLE 0x007af825
007af813 : MOV EAX,dword ptr [ESI + 0x268]
007af819 : PUSH EDX
007af81a : PUSH ECX
007af81b : PUSH EDX
007af81c : PUSH EAX
007af81d : CALL 0x00634101
007af822 : ADD ESP,0x10
007af825 : MOV dword ptr [ESI + 0x26c],EDI
007af82b : MOV EAX,dword ptr [ESI + 0x25cc]
007af831 : SUB EAX,dword ptr [ESI + 0x25c8]
007af837 : LEA EDI,[ESI + 0x25c4]
007af83d : TEST EAX,0xfffffffc
007af842 : JZ 0x007af87a
007af844 : MOV EAX,dword ptr [ESI + 0x25c8]
007af84a : MOV dword ptr [EBP + -0x10],EAX
007af84d : CMP EAX,dword ptr [ESI + 0x25cc]
007af853 : JZ 0x007af874
007af855 : MOV ECX,dword ptr [EAX]
007af857 : CMP ECX,EBX
007af859 : JZ 0x007af866
007af85b : MOV EDX,dword ptr [ECX]
007af85d : MOV EAX,dword ptr [EDX]
007af85f : PUSH 0x1
007af861 : CALL EAX
007af863 : MOV EAX,dword ptr [EBP + -0x10]
007af866 : ADD EAX,0x4
007af869 : MOV dword ptr [EBP + -0x10],EAX
007af86c : CMP EAX,dword ptr [ESI + 0x25cc]
007af872 : JNZ 0x007af855
007af874 : PUSH EDI
007af875 : CALL 0x0042d2e0
007af87a : MOV ECX,ESI
007af87c : CALL 0x007af3e0
007af881 : LEA ECX,[ESI + 0x2458]
007af887 : PUSH ECX
007af888 : CALL dword ptr [0x00b850fc]
007af88e : LEA EDX,[ESI + 0x2470]
007af894 : PUSH EDX
007af895 : CALL dword ptr [0x00b850fc]
007af89b : MOV byte ptr [EBP + -0x4],0x13
007af89f : MOV ECX,dword ptr [EDI + 0x4]
007af8a2 : CMP ECX,EBX
007af8a4 : JZ 0x007af8ab
007af8a6 : CALL 0x006f04e0
007af8ab : MOV dword ptr [EDI + 0x4],EBX
007af8ae : MOV dword ptr [EDI + 0x8],EBX
007af8b1 : MOV dword ptr [EDI + 0xc],EBX
007af8b4 : MOV byte ptr [EBP + -0x4],0x12
007af8b8 : PUSH 0x45f5a0
007af8bd : PUSH 0x1e
007af8bf : PUSH 0x8
007af8c1 : LEA EAX,[ESI + 0x24cc]
007af8c7 : PUSH EAX
007af8c8 : CALL 0x0063625e
007af8cd : MOV byte ptr [EBP + -0x4],0x11
007af8d1 : PUSH 0x406560
007af8d6 : PUSH 0x2
007af8d8 : PUSH 0x1c
007af8da : LEA ECX,[ESI + 0x2494]
007af8e0 : PUSH ECX
007af8e1 : CALL 0x0063625e
007af8e6 : MOV byte ptr [EBP + -0x4],0x10
007af8ea : MOV dword ptr [ESI + 0x3a0],0xcd083c
007af8f4 : MOV byte ptr [EBP + -0x4],0xf
007af8f8 : LEA EDX,[ESI + 0x388]
007af8fe : PUSH EDX
007af8ff : CALL 0x00443a70
007af904 : MOV byte ptr [EBP + -0x4],0xe
007af908 : LEA EAX,[ESI + 0x36c]
007af90e : PUSH EAX
007af90f : CALL 0x0047a120
007af914 : MOV byte ptr [EBP + -0x4],0xd
007af918 : LEA ECX,[ESI + 0x360]
007af91e : PUSH ECX
007af91f : CALL 0x0047a120
007af924 : MOV byte ptr [EBP + -0x4],0xc
007af928 : LEA EDX,[ESI + 0x354]
007af92e : PUSH EDX
007af92f : CALL 0x00401120
007af934 : MOV byte ptr [EBP + -0x4],0xb
007af938 : LEA EAX,[ESI + 0x348]
007af93e : PUSH EAX
007af93f : CALL 0x00401120
007af944 : MOV byte ptr [EBP + -0x4],0xa
007af948 : LEA EDI,[ESI + 0x33c]
007af94e : CALL 0x00452670
007af953 : MOV ECX,dword ptr [EDI + 0x4]
007af956 : CALL 0x006f04e0
