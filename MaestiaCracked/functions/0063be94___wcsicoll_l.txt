PROGRAM  : Maestia.exe
FUNCTION : __wcsicoll_l
ENTRY    : 0063be94
BODY     : [[0063be94, 0063bf74]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __wcsicoll_l
   
   Library: Visual Studio 2008 Release */

int __cdecl __wcsicoll_l(wchar_t *_Str1,wchar_t *_Str2,_locale_t _Locale)

{
  wchar_t wVar1;
  wchar_t wVar2;
  int *piVar3;
  int iVar4;
  int local_14 [2];
  int local_c;
  char local_8;
  
  _LocaleUpdate::_LocaleUpdate((_LocaleUpdate *)local_14,_Locale);
  if ((_Str1 == (wchar_t *)0x0) || (_Str2 == (wchar_t *)0x0)) {
    piVar3 = __errno();
    *piVar3 = 0x16;
    __invalid_parameter(0,0,0,0,0);
LAB_0063beca:
    if (local_8 != '\0') {
      *(uint *)(local_c + 0x70) = *(uint *)(local_c + 0x70) & 0xfffffffd;
    }
    iVar4 = 0x7fffffff;
  }
  else {
    if (*(DWORD *)(local_14[0] + 0x10) == 0) {
      do {
        wVar1 = *_Str1;
        if ((0x40 < (ushort)wVar1) && ((ushort)wVar1 < 0x5b)) {
          wVar1 = wVar1 + L' ';
        }
        wVar2 = *_Str2;
        if ((0x40 < (ushort)wVar2) && ((ushort)wVar2 < 0x5b)) {
          wVar2 = wVar2 + L' ';
        }
        _Str1 = _Str1 + 1;
        _Str2 = _Str2 + 1;
      } while ((wVar1 != L'\0') && (wVar1 == wVar2));
      iVar4 = (uint)(ushort)wVar1 - (uint)(ushort)wVar2;
    }
    else {
      iVar4 = ___crtCompareStringW
                        ((LPCWSTR)local_14,*(DWORD *)(local_14[0] + 0x10),(LPCWSTR)0x1001,(int)_Str1
                         ,(LPCWSTR)0xffffffff,(int)_Str2);
      if (iVar4 == 0) {
        piVar3 = __errno();
        *piVar3 = 0x16;
        goto LAB_0063beca;
      }
      iVar4 = iVar4 + -2;
    }
    if (local_8 != '\0') {
      *(uint *)(local_c + 0x70) = *(uint *)(local_c + 0x70) & 0xfffffffd;
    }
  }
  return iVar4;
}



============================================================
DISASSEMBLY
============================================================
0063be94 : MOV EDI,EDI
0063be96 : PUSH EBP
0063be97 : MOV EBP,ESP
0063be99 : SUB ESP,0x10
0063be9c : PUSH EBX
0063be9d : PUSH ESI
0063be9e : PUSH dword ptr [EBP + 0x10]
0063bea1 : LEA ECX,[EBP + -0x10]
0063bea4 : CALL 0x00637880
0063bea9 : MOV ESI,dword ptr [EBP + 0x8]
0063beac : XOR EBX,EBX
0063beae : CMP ESI,EBX
0063beb0 : JNZ 0x0063bee0
0063beb2 : CALL 0x0063ab82
0063beb7 : PUSH EBX
0063beb8 : PUSH EBX
0063beb9 : PUSH EBX
0063beba : PUSH EBX
0063bebb : PUSH EBX
0063bebc : MOV dword ptr [EAX],0x16
0063bec2 : CALL 0x006372b8
0063bec7 : ADD ESP,0x14
0063beca : CMP byte ptr [EBP + -0x4],BL
0063becd : JZ 0x0063bed6
0063becf : MOV EAX,dword ptr [EBP + -0x8]
0063bed2 : AND dword ptr [EAX + 0x70],0xfffffffd
0063bed6 : MOV EAX,0x7fffffff
0063bedb : JMP 0x0063bf71
0063bee0 : MOV EDX,dword ptr [EBP + 0xc]
0063bee3 : CMP EDX,EBX
0063bee5 : JZ 0x0063beb2
0063bee7 : MOV EAX,dword ptr [EBP + -0x10]
0063beea : MOV ECX,dword ptr [EAX + 0x10]
0063beed : CMP ECX,EBX
0063beef : JNZ 0x0063bf33
0063bef1 : MOVZX EAX,word ptr [ESI]
0063bef4 : CMP AX,0x41
0063bef8 : JC 0x0063bf03
0063befa : CMP AX,0x5a
0063befe : JA 0x0063bf03
0063bf00 : ADD EAX,0x20
0063bf03 : MOVZX ECX,AX
0063bf06 : MOVZX EAX,word ptr [EDX]
0063bf09 : CMP AX,0x41
0063bf0d : JC 0x0063bf18
0063bf0f : CMP AX,0x5a
0063bf13 : JA 0x0063bf18
0063bf15 : ADD EAX,0x20
0063bf18 : INC ESI
0063bf19 : INC ESI
0063bf1a : INC EDX
0063bf1b : INC EDX
0063bf1c : MOVZX EAX,AX
0063bf1f : CMP CX,BX
0063bf22 : JZ 0x0063bf29
0063bf24 : CMP CX,AX
0063bf27 : JZ 0x0063bef1
0063bf29 : MOVZX EDX,AX
0063bf2c : MOVZX EAX,CX
0063bf2f : SUB EAX,EDX
0063bf31 : JMP 0x0063bf65
0063bf33 : PUSH dword ptr [EAX + 0x4]
0063bf36 : LEA EAX,[EBP + -0x10]
0063bf39 : PUSH -0x1
0063bf3b : PUSH EDX
0063bf3c : PUSH -0x1
0063bf3e : PUSH ESI
0063bf3f : PUSH 0x1001
0063bf44 : PUSH ECX
0063bf45 : PUSH EAX
0063bf46 : CALL 0x0064528c
0063bf4b : ADD ESP,0x20
0063bf4e : CMP EAX,EBX
0063bf50 : JNZ 0x0063bf62
0063bf52 : CALL 0x0063ab82
0063bf57 : MOV dword ptr [EAX],0x16
0063bf5d : JMP 0x0063beca
0063bf62 : ADD EAX,-0x2
0063bf65 : CMP byte ptr [EBP + -0x4],BL
0063bf68 : JZ 0x0063bf71
0063bf6a : MOV ECX,dword ptr [EBP + -0x8]
0063bf6d : AND dword ptr [ECX + 0x70],0xfffffffd
0063bf71 : POP ESI
0063bf72 : POP EBX
0063bf73 : LEAVE
0063bf74 : RET
