PROGRAM  : Maestia.exe
FUNCTION : FUN_0056b530
ENTRY    : 0056b530
BODY     : [[0056b530, 0056b658]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056b530(uint param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  int iVar2;
  LONG LVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int in_ECX;
  uint unaff_ESI;
  uint uVar6;
  uint uVar7;
  uint unaff_EDI;
  uint local_c [3];
  
  uVar7 = param_1;
  iVar1 = param_1 + 0xc;
  iVar2 = FUN_0051b1a0();
  if (iVar2 != 0) {
    local_c[0] = 6;
    FUN_0051c600(iVar1);
    FUN_0051c600(param_3);
    FUN_0051b6e0();
    iVar1 = param_2;
    FUN_005a03c0(&param_1,local_c);
    FUN_0051c480((param_1 & 0xfffffffc) + 8);
    (**(code **)(**(int **)(uVar7 + 0x60) + 4))(&param_3,*(undefined4 *)(*(int *)(iVar1 + 8) + 8));
    uVar6 = param_1 & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar6 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar6);
    }
    uVar4 = (**(code **)(**(int **)(in_ECX + 0x68) + 0x5c))();
    iVar1 = **(int **)(uVar7 + 0x60);
    uVar5 = FUN_00526fa0(uVar4);
    (**(code **)(iVar1 + 8))(uVar4,uVar5);
    uVar7 = local_c[0] & 0xfffffffc;
    LVar3 = InterlockedExchangeAdd((LONG *)(uVar7 + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(uVar7);
    }
    LVar3 = InterlockedExchangeAdd((LONG *)((unaff_ESI & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(unaff_ESI & 0xfffffffc);
    }
    LVar3 = InterlockedExchangeAdd((LONG *)((unaff_EDI & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(unaff_EDI & 0xfffffffc);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0056b530 : SUB ESP,0xc
0056b533 : PUSH EBX
0056b534 : PUSH ESI
0056b535 : PUSH EDI
0056b536 : MOV EDI,dword ptr [ESP + 0x1c]
0056b53a : MOV EBX,ECX
0056b53c : LEA ESI,[EDI + 0xc]
0056b53f : MOV ECX,ESI
0056b541 : CALL 0x0051b1a0
0056b546 : TEST EAX,EAX
0056b548 : JZ 0x0056b650
0056b54e : PUSH ESI
0056b54f : LEA ECX,[ESP + 0x14]
0056b553 : MOV dword ptr [ESP + 0x10],0x6
0056b55b : CALL 0x0051c600
0056b560 : MOV EAX,dword ptr [ESP + 0x24]
0056b564 : PUSH EAX
0056b565 : LEA ECX,[ESP + 0x18]
0056b569 : CALL 0x0051c600
0056b56e : LEA ECX,[ESP + 0x1c]
0056b572 : CALL 0x0051b6e0
0056b577 : MOV ESI,dword ptr [ESP + 0x20]
0056b57b : LEA ECX,[ESP + 0xc]
0056b57f : PUSH ECX
0056b580 : LEA EDX,[ESP + 0x20]
0056b584 : PUSH EDX
0056b585 : MOV ECX,ESI
0056b587 : CALL 0x005a03c0
0056b58c : MOV EAX,dword ptr [ESP + 0x1c]
0056b590 : AND EAX,0xfffffffc
0056b593 : ADD EAX,0x8
0056b596 : PUSH EAX
0056b597 : LEA ECX,[ESP + 0x28]
0056b59b : CALL 0x0051c480
0056b5a0 : MOV EAX,dword ptr [ESI + 0x8]
0056b5a3 : MOV EAX,dword ptr [EAX + 0x8]
0056b5a6 : MOV ECX,dword ptr [EDI + 0x60]
0056b5a9 : MOV EDX,dword ptr [ECX]
0056b5ab : MOV EDX,dword ptr [EDX + 0x4]
0056b5ae : PUSH EAX
0056b5af : LEA EAX,[ESP + 0x28]
0056b5b3 : PUSH EAX
0056b5b4 : CALL EDX
0056b5b6 : MOV ESI,dword ptr [ESP + 0x24]
0056b5ba : AND ESI,0xfffffffc
0056b5bd : PUSH -0x1
0056b5bf : LEA EAX,[ESI + 0x4]
0056b5c2 : PUSH EAX
0056b5c3 : CALL dword ptr [0x00b851cc]
0056b5c9 : SUB EAX,0x1
0056b5cc : JNZ 0x0056b5d4
0056b5ce : PUSH ESI
0056b5cf : CALL 0x00515cf0
0056b5d4 : MOV ECX,dword ptr [EBX + 0x68]
0056b5d7 : MOV EDX,dword ptr [ECX]
0056b5d9 : MOV EAX,dword ptr [EDX + 0x5c]
0056b5dc : PUSH EBP
0056b5dd : CALL EAX
0056b5df : MOV EBP,dword ptr [EDI + 0x60]
0056b5e2 : MOV ESI,dword ptr [EBP]
0056b5e5 : MOV EBX,EAX
0056b5e7 : PUSH EBX
0056b5e8 : LEA ECX,[EDI + 0x50]
0056b5eb : ADD ESI,0x8
0056b5ee : CALL 0x00526fa0
0056b5f3 : MOV EDX,dword ptr [ESI]
0056b5f5 : PUSH EAX
0056b5f6 : PUSH EBX
0056b5f7 : MOV ECX,EBP
0056b5f9 : CALL EDX
0056b5fb : MOV ESI,dword ptr [ESP + 0x20]
0056b5ff : MOV EDI,dword ptr [0x00b851cc]
0056b605 : AND ESI,0xfffffffc
0056b608 : PUSH -0x1
0056b60a : LEA EAX,[ESI + 0x4]
0056b60d : PUSH EAX
0056b60e : CALL EDI
0056b610 : SUB EAX,0x1
0056b613 : POP EBP
0056b614 : JNZ 0x0056b61c
0056b616 : PUSH ESI
0056b617 : CALL 0x00515cf0
0056b61c : MOV ESI,dword ptr [ESP + 0x14]
0056b620 : AND ESI,0xfffffffc
0056b623 : PUSH -0x1
0056b625 : LEA ECX,[ESI + 0x4]
0056b628 : PUSH ECX
0056b629 : CALL EDI
0056b62b : SUB EAX,0x1
0056b62e : JNZ 0x0056b636
0056b630 : PUSH ESI
0056b631 : CALL 0x00515cf0
0056b636 : MOV ESI,dword ptr [ESP + 0x10]
0056b63a : AND ESI,0xfffffffc
0056b63d : PUSH -0x1
0056b63f : LEA EDX,[ESI + 0x4]
0056b642 : PUSH EDX
0056b643 : CALL EDI
0056b645 : SUB EAX,0x1
0056b648 : JNZ 0x0056b650
0056b64a : PUSH ESI
0056b64b : CALL 0x00515cf0
0056b650 : POP EDI
0056b651 : POP ESI
0056b652 : POP EBX
0056b653 : ADD ESP,0xc
0056b656 : RET 0xc
