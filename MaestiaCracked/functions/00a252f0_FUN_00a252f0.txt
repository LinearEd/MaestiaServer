PROGRAM  : Maestia.exe
FUNCTION : FUN_00a252f0
ENTRY    : 00a252f0
BODY     : [[00a252f0, 00a254af] [00a254b5, 00a254d9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a252f0(int param_1)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  int *piVar7;
  LPCRITICAL_SECTION lpCriticalSection;
  int *local_38;
  int *local_34;
  int *local_30;
  int *local_2c;
  int local_28;
  LPCRITICAL_SECTION local_24;
  DWORD local_20;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2ff4a;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (param_1 == 0) {
    local_28 = 0;
  }
  else {
    local_28 = param_1 + 0x18;
  }
  lpCriticalSection = (LPCRITICAL_SECTION)(local_28 + 4);
  local_24 = lpCriticalSection;
  EnterCriticalSection(lpCriticalSection);
  local_8 = 0;
  if (*(int *)(param_1 + 0x134) != 0) {
    piVar7 = *(int **)(param_1 + 0x130);
    piVar6 = *(int **)(param_1 + 0x118);
    local_30 = piVar6;
    local_2c = piVar7;
    local_20 = timeGetTime();
    while ((piVar6 != *(int **)(param_1 + 0x118) ||
           (lpCriticalSection = local_24,
           piVar7 != (int *)(*(int *)(param_1 + 0x134) + *(int *)(param_1 + 0x130))))) {
      uVar3 = (uint)piVar7 >> 2;
      if (piVar6 == (int *)0x0) {
        iVar5 = 0;
      }
      else {
        iVar5 = *piVar6;
      }
      if (*(uint *)(iVar5 + 0x14) <= uVar3) {
        if (piVar6 == (int *)0x0) {
          iVar5 = 0;
        }
        else {
          iVar5 = *piVar6;
        }
        uVar3 = uVar3 - *(int *)(iVar5 + 0x14);
      }
      if (piVar6 == (int *)0x0) {
        iVar5 = 0;
      }
      else {
        iVar5 = *piVar6;
      }
      iVar5 = *(int *)(*(int *)(*(int *)(iVar5 + 0x10) + uVar3 * 4) + ((uint)piVar7 & 3) * 4);
      local_18 = *(int **)(iVar5 + 0x20);
      cVar1 = (**(code **)(*local_18 + 0x38))(uVar2);
      if ((cVar1 == '\0') && (local_20 - *(int *)(iVar5 + 0x24) < 0xbb9)) {
LAB_00a253ec:
        local_2c = (int *)((int)piVar7 + 1);
        piVar7 = local_2c;
      }
      else {
        cVar1 = (**(code **)(*local_18 + 0x38))();
        if (cVar1 == '\0') {
          (**(code **)(*local_18 + 0x24))();
        }
        (**(code **)(**(int **)(iVar5 + 0x20) + 0x18))();
        (**(code **)(**(int **)(*(int *)(param_1 + 8) + 0x24) + 0x28))(iVar5);
        if ((*(int *)(iVar5 + 0x1c) == 0) || (*(int *)(*(int *)(iVar5 + 0x1c) + 0x2c) != 0))
        goto LAB_00a253ec;
        FUN_007d7890();
        local_18 = *(int **)(iVar5 + 0x20);
        if (local_18 != (int *)0x0) {
          (**(code **)(*local_18 + 0x1c))();
          (**(code **)*local_18)(1);
        }
        if (*(int **)(iVar5 + 0x1c) != (int *)0x0) {
          (**(code **)(**(int **)(iVar5 + 0x1c) + 0x18))(1);
          *(undefined4 *)(iVar5 + 0x1c) = 0;
        }
        piVar4 = (int *)FUN_004c1520();
        iVar5 = *piVar4;
        local_18 = piVar7;
        FUN_0043ea30(&local_38,piVar6,piVar7,piVar6,(int)piVar7 + 1);
        local_30 = local_38;
        local_2c = local_34;
        piVar6 = local_38;
        piVar7 = local_34;
        if (iVar5 != 0) {
          FUN_0044cb00(iVar5);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
      }
    }
  }
  local_8 = 0xffffffff;
  LeaveCriticalSection(lpCriticalSection);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a252f0 : PUSH EBP
00a252f1 : MOV EBP,ESP
00a252f3 : PUSH -0x1
00a252f5 : PUSH 0xb2ff4a
00a252fa : MOV EAX,FS:[0x0]
00a25300 : PUSH EAX
00a25301 : SUB ESP,0x28
00a25304 : PUSH EBX
00a25305 : PUSH ESI
00a25306 : PUSH EDI
00a25307 : MOV EAX,[0x00d66fa0]
00a2530c : XOR EAX,EBP
00a2530e : PUSH EAX
00a2530f : LEA EAX,[EBP + -0xc]
00a25312 : MOV FS:[0x0],EAX
00a25318 : MOV ESI,dword ptr [EBP + 0x8]
00a2531b : TEST ESI,ESI
00a2531d : JZ 0x00a25324
00a2531f : LEA EAX,[ESI + 0x18]
00a25322 : JMP 0x00a25326
00a25324 : XOR EAX,EAX
00a25326 : LEA EDI,[EAX + 0x4]
00a25329 : PUSH EDI
00a2532a : MOV dword ptr [EBP + -0x24],EAX
00a2532d : MOV dword ptr [EBP + -0x20],EDI
00a25330 : CALL dword ptr [0x00b85118]
00a25336 : MOV dword ptr [EBP + -0x4],0x0
00a2533d : CMP dword ptr [ESI + 0x134],0x0
00a25344 : JNZ 0x00a25353
00a25346 : MOV dword ptr [EBP + -0x4],0xffffffff
00a2534d : PUSH EDI
00a2534e : JMP 0x00a254c0
00a25353 : MOV EDI,dword ptr [ESI + 0x130]
00a25359 : MOV EBX,dword ptr [ESI + 0x118]
00a2535f : LEA EAX,[ESI + 0x118]
00a25365 : MOV dword ptr [EBP + -0x2c],EBX
00a25368 : MOV dword ptr [EBP + -0x28],EDI
00a2536b : CALL dword ptr [0x00b85598]
00a25371 : MOV dword ptr [EBP + -0x1c],EAX
00a25374 : MOV EAX,dword ptr [EBP + 0x8]
00a25377 : MOV ECX,dword ptr [EAX + 0x134]
00a2537d : ADD ECX,dword ptr [EAX + 0x130]
00a25383 : ADD EAX,0x118
00a25388 : CMP EBX,dword ptr [EAX]
00a2538a : JNZ 0x00a25394
00a2538c : CMP EDI,ECX
00a2538e : JZ 0x00a254b5
00a25394 : MOV EAX,EDI
00a25396 : MOV ECX,EDI
00a25398 : SHR EAX,0x2
00a2539b : AND ECX,0x3
00a2539e : TEST EBX,EBX
00a253a0 : JZ 0x00a253a6
00a253a2 : MOV EDX,dword ptr [EBX]
00a253a4 : JMP 0x00a253a8
00a253a6 : XOR EDX,EDX
00a253a8 : CMP dword ptr [EDX + 0x14],EAX
00a253ab : JA 0x00a253ba
00a253ad : TEST EBX,EBX
00a253af : JZ 0x00a253b5
00a253b1 : MOV EDX,dword ptr [EBX]
00a253b3 : JMP 0x00a253b7
00a253b5 : XOR EDX,EDX
00a253b7 : SUB EAX,dword ptr [EDX + 0x14]
00a253ba : TEST EBX,EBX
00a253bc : JZ 0x00a253c2
00a253be : MOV EDX,dword ptr [EBX]
00a253c0 : JMP 0x00a253c4
00a253c2 : XOR EDX,EDX
00a253c4 : MOV EDX,dword ptr [EDX + 0x10]
00a253c7 : MOV EAX,dword ptr [EDX + EAX*0x4]
00a253ca : MOV ESI,dword ptr [EAX + ECX*0x4]
00a253cd : MOV ECX,dword ptr [ESI + 0x20]
00a253d0 : MOV EDX,dword ptr [ECX]
00a253d2 : MOV EAX,dword ptr [EDX + 0x38]
00a253d5 : MOV dword ptr [EBP + -0x14],ECX
00a253d8 : CALL EAX
00a253da : TEST AL,AL
00a253dc : JNZ 0x00a253f2
00a253de : MOV ECX,dword ptr [EBP + -0x1c]
00a253e1 : SUB ECX,dword ptr [ESI + 0x24]
00a253e4 : CMP ECX,0xbb8
00a253ea : JA 0x00a253f2
00a253ec : INC EDI
00a253ed : MOV dword ptr [EBP + -0x28],EDI
00a253f0 : JMP 0x00a25374
00a253f2 : MOV ECX,dword ptr [EBP + -0x14]
00a253f5 : MOV EDX,dword ptr [ECX]
00a253f7 : MOV EAX,dword ptr [EDX + 0x38]
00a253fa : CALL EAX
00a253fc : TEST AL,AL
00a253fe : JNZ 0x00a2540a
00a25400 : MOV ECX,dword ptr [EBP + -0x14]
00a25403 : MOV EDX,dword ptr [ECX]
00a25405 : MOV EAX,dword ptr [EDX + 0x24]
00a25408 : CALL EAX
00a2540a : MOV ECX,dword ptr [ESI + 0x20]
00a2540d : MOV EDX,dword ptr [ECX]
00a2540f : MOV EAX,dword ptr [EDX + 0x18]
00a25412 : CALL EAX
00a25414 : MOV ECX,dword ptr [EBP + 0x8]
00a25417 : MOV EDX,dword ptr [ECX + 0x8]
00a2541a : MOV ECX,dword ptr [EDX + 0x24]
00a2541d : MOV EAX,dword ptr [ECX]
00a2541f : MOV EDX,dword ptr [EAX + 0x28]
00a25422 : PUSH ESI
00a25423 : CALL EDX
00a25425 : MOV ECX,dword ptr [ESI + 0x1c]
00a25428 : TEST ECX,ECX
00a2542a : JZ 0x00a253ec
00a2542c : CMP dword ptr [ECX + 0x2c],0x0
00a25430 : JNZ 0x00a253ec
00a25432 : CALL 0x007d7890
00a25437 : MOV ECX,dword ptr [ESI + 0x20]
00a2543a : MOV dword ptr [EBP + -0x14],ECX
00a2543d : TEST ECX,ECX
00a2543f : JZ 0x00a25453
00a25441 : MOV EAX,dword ptr [ECX]
00a25443 : MOV EDX,dword ptr [EAX + 0x1c]
00a25446 : CALL EDX
00a25448 : MOV ECX,dword ptr [EBP + -0x14]
00a2544b : MOV EAX,dword ptr [ECX]
00a2544d : MOV EDX,dword ptr [EAX]
00a2544f : PUSH 0x1
00a25451 : CALL EDX
00a25453 : MOV ECX,dword ptr [ESI + 0x1c]
00a25456 : TEST ECX,ECX
00a25458 : JZ 0x00a2546a
00a2545a : MOV EAX,dword ptr [ECX]
00a2545c : MOV EDX,dword ptr [EAX + 0x18]
00a2545f : PUSH 0x1
00a25461 : CALL EDX
00a25463 : MOV dword ptr [ESI + 0x1c],0x0
00a2546a : LEA EDX,[EBP + -0x2c]
00a2546d : CALL 0x004c1520
00a25472 : MOV ESI,dword ptr [EAX]
00a25474 : LEA EAX,[EDI + 0x1]
00a25477 : PUSH EAX
00a25478 : PUSH EBX
00a25479 : PUSH EDI
00a2547a : PUSH EBX
00a2547b : LEA EAX,[EBP + -0x34]
00a2547e : PUSH EAX
00a2547f : MOV EAX,dword ptr [EBP + 0x8]
00a25482 : ADD EAX,0x118
00a25487 : MOV dword ptr [EBP + -0x14],EDI
00a2548a : CALL 0x0043ea30
00a2548f : MOV EBX,dword ptr [EBP + -0x34]
00a25492 : MOV EDI,dword ptr [EBP + -0x30]
00a25495 : MOV dword ptr [EBP + -0x2c],EBX
00a25498 : MOV dword ptr [EBP + -0x28],EDI
00a2549b : TEST ESI,ESI
00a2549d : JZ 0x00a25374
00a254a3 : PUSH ESI
00a254a4 : CALL 0x0044cb00
00a254a9 : MOV ECX,ESI
00a254ab : CALL 0x006f04e0
00a254b5 : MOV dword ptr [EBP + -0x4],0xffffffff
00a254bc : MOV ECX,dword ptr [EBP + -0x20]
00a254bf : PUSH ECX
00a254c0 : CALL dword ptr [0x00b8511c]
00a254c6 : MOV ECX,dword ptr [EBP + -0xc]
00a254c9 : MOV dword ptr FS:[0x0],ECX
00a254d0 : POP ECX
00a254d1 : POP EDI
00a254d2 : POP ESI
00a254d3 : POP EBX
00a254d4 : MOV ESP,EBP
00a254d6 : POP EBP
00a254d7 : RET 0x4
