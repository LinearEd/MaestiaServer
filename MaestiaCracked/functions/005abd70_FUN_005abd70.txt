PROGRAM  : Maestia.exe
FUNCTION : FUN_005abd70
ENTRY    : 005abd70
BODY     : [[005abd70, 005abe73]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005abd70(int param_1,uint param_2)

{
  int *piVar1;
  int *piVar2;
  undefined4 uVar3;
  int *piVar4;
  int iVar5;
  undefined4 *in_ECX;
  uint uVar6;
  int iVar7;
  
  piVar1 = (int *)(*(int *)(param_1 + 0x10) + *(int *)(param_1 + 0x14));
  piVar4 = (int *)FUN_005ab7c0((int)piVar1 + -1);
  if (((piVar4 != (int *)0x0) && (piVar4[8] == param_1)) &&
     ((int *)((piVar4[9] << ((byte)*in_ECX & 0x1f)) + (int)piVar4) == piVar1)) {
    in_ECX[5] = in_ECX[5] - piVar4[9];
    piVar1 = (int *)*piVar4;
    if (piVar1 == piVar4) {
      FUN_005ab630(piVar4);
    }
    else {
      piVar2 = (int *)piVar4[1];
      *piVar2 = (int)piVar1;
      piVar1[1] = (int)piVar2;
      FUN_005ab5d0(piVar4,piVar1);
    }
    FUN_005ab6e0(piVar4);
    uVar3 = *in_ECX;
    piVar4[8] = param_1;
    iVar7 = (param_2 >> ((byte)uVar3 & 0x1f)) + piVar4[9];
    *piVar4 = (int)piVar4;
    piVar4[9] = iVar7;
    piVar4[1] = (int)piVar4;
    iVar5 = FUN_005ab560(piVar4);
    if (iVar5 != 0) {
      piVar4[1] = *(int *)(iVar5 + 4);
      *piVar4 = iVar5;
      *(int **)(iVar5 + 4) = piVar4;
      *(int **)piVar4[1] = piVar4;
    }
    FUN_005ab500(piVar4);
    in_ECX[5] = in_ECX[5] + iVar7;
    *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + param_2;
    return;
  }
  uVar6 = param_2 >> ((byte)*in_ECX & 0x1f);
  piVar1[8] = param_1;
  piVar1[9] = uVar6;
  *piVar1 = (int)piVar1;
  piVar1[1] = (int)piVar1;
  iVar5 = FUN_005ab560(piVar1);
  if (iVar5 != 0) {
    piVar1[1] = *(int *)(iVar5 + 4);
    *piVar1 = iVar5;
    *(int **)(iVar5 + 4) = piVar1;
    *(int **)piVar1[1] = piVar1;
  }
  FUN_005ab500(piVar1);
  in_ECX[5] = in_ECX[5] + uVar6;
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + param_2;
  return;
}



============================================================
DISASSEMBLY
============================================================
005abd70 : PUSH EBX
005abd71 : PUSH EBP
005abd72 : MOV EBP,dword ptr [ESP + 0xc]
005abd76 : MOV EAX,dword ptr [EBP + 0x10]
005abd79 : PUSH ESI
005abd7a : MOV EBX,ECX
005abd7c : MOV ECX,dword ptr [EBP + 0x14]
005abd7f : PUSH EDI
005abd80 : LEA EDI,[EAX + ECX*0x1]
005abd83 : LEA EDX,[EDI + -0x1]
005abd86 : LEA ECX,[EBX + 0x10]
005abd89 : PUSH EDX
005abd8a : CALL 0x005ab7c0
005abd8f : MOV ESI,EAX
005abd91 : TEST ESI,ESI
005abd93 : JZ 0x005abe2a
005abd99 : CMP dword ptr [ESI + 0x20],EBP
005abd9c : JNZ 0x005abe2a
005abda2 : MOV EAX,dword ptr [ESI + 0x24]
005abda5 : MOV ECX,dword ptr [EBX]
005abda7 : MOV EDX,EAX
005abda9 : SHL EDX,CL
005abdab : ADD EDX,ESI
005abdad : CMP EDX,EDI
005abdaf : JNZ 0x005abe2a
005abdb1 : SUB dword ptr [EBX + 0x14],EAX
005abdb4 : MOV EAX,dword ptr [ESI]
005abdb6 : LEA ECX,[EBX + 0xc]
005abdb9 : CMP EAX,ESI
005abdbb : JZ 0x005abdce
005abdbd : MOV EDX,dword ptr [ESI + 0x4]
005abdc0 : PUSH EAX
005abdc1 : MOV dword ptr [EDX],EAX
005abdc3 : PUSH ESI
005abdc4 : MOV dword ptr [EAX + 0x4],EDX
005abdc7 : CALL 0x005ab5d0
005abdcc : JMP 0x005abdd4
005abdce : PUSH ESI
005abdcf : CALL 0x005ab630
005abdd4 : PUSH ESI
005abdd5 : LEA ECX,[EBX + 0x10]
005abdd8 : CALL 0x005ab6e0
005abddd : MOV ECX,dword ptr [EBX]
005abddf : MOV EDI,dword ptr [ESP + 0x18]
005abde3 : SHR EDI,CL
005abde5 : PUSH ESI
005abde6 : LEA ECX,[EBX + 0xc]
005abde9 : MOV dword ptr [ESI + 0x20],EBP
005abdec : ADD EDI,dword ptr [ESI + 0x24]
005abdef : MOV dword ptr [ESI],ESI
005abdf1 : MOV dword ptr [ESI + 0x24],EDI
005abdf4 : MOV dword ptr [ESI + 0x4],ESI
005abdf7 : CALL 0x005ab560
005abdfc : TEST EAX,EAX
005abdfe : JZ 0x005abe10
005abe00 : MOV ECX,dword ptr [EAX + 0x4]
005abe03 : MOV dword ptr [ESI + 0x4],ECX
005abe06 : MOV dword ptr [ESI],EAX
005abe08 : MOV dword ptr [EAX + 0x4],ESI
005abe0b : MOV EDX,dword ptr [ESI + 0x4]
005abe0e : MOV dword ptr [EDX],ESI
005abe10 : PUSH ESI
005abe11 : LEA ECX,[EBX + 0x10]
005abe14 : CALL 0x005ab500
005abe19 : ADD dword ptr [EBX + 0x14],EDI
005abe1c : MOV EAX,dword ptr [ESP + 0x18]
005abe20 : ADD dword ptr [EBP + 0x14],EAX
005abe23 : POP EDI
005abe24 : POP ESI
005abe25 : POP EBP
005abe26 : POP EBX
005abe27 : RET 0x8
005abe2a : MOV ECX,dword ptr [EBX]
005abe2c : MOV ESI,dword ptr [ESP + 0x18]
005abe30 : SHR ESI,CL
005abe32 : PUSH EDI
005abe33 : LEA ECX,[EBX + 0xc]
005abe36 : MOV dword ptr [EDI + 0x20],EBP
005abe39 : MOV dword ptr [EDI + 0x24],ESI
005abe3c : MOV dword ptr [EDI],EDI
005abe3e : MOV dword ptr [EDI + 0x4],EDI
005abe41 : CALL 0x005ab560
005abe46 : TEST EAX,EAX
005abe48 : JZ 0x005abe5a
005abe4a : MOV ECX,dword ptr [EAX + 0x4]
005abe4d : MOV dword ptr [EDI + 0x4],ECX
005abe50 : MOV dword ptr [EDI],EAX
005abe52 : MOV dword ptr [EAX + 0x4],EDI
005abe55 : MOV EDX,dword ptr [EDI + 0x4]
005abe58 : MOV dword ptr [EDX],EDI
005abe5a : PUSH EDI
005abe5b : LEA ECX,[EBX + 0x10]
005abe5e : CALL 0x005ab500
005abe63 : ADD dword ptr [EBX + 0x14],ESI
005abe66 : MOV EAX,dword ptr [ESP + 0x18]
005abe6a : ADD dword ptr [EBP + 0x14],EAX
005abe6d : POP EDI
005abe6e : POP ESI
005abe6f : POP EBP
005abe70 : POP EBX
005abe71 : RET 0x8
