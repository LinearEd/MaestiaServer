PROGRAM  : Maestia.exe
FUNCTION : FUN_004429e0
ENTRY    : 004429e0
BODY     : [[004429e0, 00442b28] [00442b2c, 00442b3a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004429e0(void)

{
  void *pvVar1;
  rsize_t _DstSize;
  uint uVar2;
  undefined4 *_Dst;
  int iVar3;
  int iVar4;
  uint uVar5;
  int unaff_ESI;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint local_8;
  
  uVar2 = *(uint *)(unaff_ESI + 0x14);
  local_8 = 1;
  if (uVar2 == 0x15555555) {
    uVar2 = FUN_00442c50();
  }
  uVar5 = uVar2 >> 1;
  if (uVar5 < 8) {
    uVar5 = 8;
  }
  else if (uVar5 < 2) goto LAB_00442a28;
  if (uVar2 <= 0x15555555 - uVar5) {
    local_8 = uVar5;
  }
LAB_00442a28:
  uVar2 = *(uint *)(unaff_ESI + 0x18);
  _Dst = (undefined4 *)FUN_004c1790();
  iVar4 = uVar2 * 4;
  pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + iVar4);
  iVar3 = (*(int *)(unaff_ESI + 0x14) * 4 - (int)pvVar1) + *(int *)(unaff_ESI + 0x10) >> 2;
  puVar7 = _Dst + uVar2 + iVar3;
  if (iVar3 != 0) {
    _memmove_s(_Dst + uVar2,iVar3 * 4,pvVar1,iVar3 * 4);
  }
  if (local_8 < uVar2) {
    iVar3 = (int)(local_8 * 4) >> 2;
    if (iVar3 != 0) {
      _DstSize = iVar3 * 4;
      _memmove_s(puVar7,_DstSize,*(void **)(unaff_ESI + 0x10),_DstSize);
    }
    pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + local_8 * 4);
    iVar4 = (*(int *)(unaff_ESI + 0x10) - (int)pvVar1) + iVar4 >> 2;
    puVar7 = _Dst + iVar4;
    uVar2 = local_8;
    if (iVar4 != 0) {
      _memmove_s(_Dst,iVar4 * 4,pvVar1,iVar4 * 4);
    }
  }
  else {
    iVar4 = iVar4 >> 2;
    puVar6 = puVar7 + iVar4;
    if (iVar4 != 0) {
      _memmove_s(puVar7,iVar4 * 4,*(void **)(unaff_ESI + 0x10),iVar4 * 4);
    }
    iVar4 = local_8 - uVar2;
    puVar7 = _Dst;
    if (iVar4 != 0) {
      for (; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = 0;
        puVar6 = puVar6 + 1;
      }
    }
  }
  if (uVar2 != 0) {
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar7 = 0;
      puVar7 = puVar7 + 1;
    }
  }
  if (*(int *)(unaff_ESI + 0x10) == 0) {
    *(int *)(unaff_ESI + 0x14) = *(int *)(unaff_ESI + 0x14) + local_8;
    *(undefined4 **)(unaff_ESI + 0x10) = _Dst;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
004429e0 : PUSH EBP
004429e1 : MOV EBP,ESP
004429e3 : SUB ESP,0x10
004429e6 : MOV EAX,dword ptr [ESI + 0x14]
004429e9 : MOV ECX,0x15555555
004429ee : MOV EDX,0x1
004429f3 : SUB ECX,EAX
004429f5 : PUSH EBX
004429f6 : PUSH EDI
004429f7 : MOV dword ptr [EBP + -0x4],EDX
004429fa : CMP ECX,EDX
004429fc : JNC 0x00442a03
004429fe : CALL 0x00442c50
00442a03 : MOV ECX,EAX
00442a05 : SHR ECX,0x1
00442a07 : CMP ECX,0x8
00442a0a : JNC 0x00442a13
00442a0c : MOV ECX,0x8
00442a11 : JMP 0x00442a18
00442a13 : CMP ECX,0x1
00442a16 : JBE 0x00442a28
00442a18 : MOV EDI,0x15555555
00442a1d : SUB EDI,ECX
00442a1f : CMP EAX,EDI
00442a21 : JA 0x00442a28
00442a23 : MOV EDX,ECX
00442a25 : MOV dword ptr [EBP + -0x4],ECX
00442a28 : MOV EDI,dword ptr [ESI + 0x18]
00442a2b : LEA ECX,[EAX + EDX*0x1]
00442a2e : MOV dword ptr [EBP + -0xc],EDI
00442a31 : CALL 0x004c1790
00442a36 : MOV ECX,dword ptr [ESI + 0x10]
00442a39 : MOV dword ptr [EBP + -0x8],EAX
00442a3c : ADD EDI,EDI
00442a3e : ADD EDI,EDI
00442a40 : LEA EDX,[EDI + EAX*0x1]
00442a43 : MOV EAX,dword ptr [ESI + 0x14]
00442a46 : ADD EAX,EAX
00442a48 : LEA EBX,[ECX + EDI*0x1]
00442a4b : ADD EAX,EAX
00442a4d : SUB EAX,EBX
00442a4f : ADD EAX,ECX
00442a51 : SAR EAX,0x2
00442a54 : LEA ECX,[EAX*0x4 + 0x0]
00442a5b : MOV dword ptr [EBP + -0x10],EBX
00442a5e : LEA EBX,[ECX + EDX*0x1]
00442a61 : TEST EAX,EAX
00442a63 : JBE 0x00442a74
00442a65 : MOV EAX,dword ptr [EBP + -0x10]
00442a68 : PUSH ECX
00442a69 : PUSH EAX
00442a6a : PUSH ECX
00442a6b : PUSH EDX
00442a6c : CALL 0x00634101
00442a71 : ADD ESP,0x10
00442a74 : MOV EDX,dword ptr [EBP + -0x4]
00442a77 : MOV ECX,dword ptr [ESI + 0x10]
00442a7a : CMP dword ptr [EBP + -0xc],EDX
00442a7d : JA 0x00442ac3
00442a7f : MOV EAX,ECX
00442a81 : SUB EAX,ECX
00442a83 : ADD EAX,EDI
00442a85 : SAR EAX,0x2
00442a88 : LEA EDI,[EAX*0x4 + 0x0]
00442a8f : LEA EDX,[EDI + EBX*0x1]
00442a92 : MOV dword ptr [EBP + -0x10],EDX
00442a95 : TEST EAX,EAX
00442a97 : JBE 0x00442aa5
00442a99 : PUSH EDI
00442a9a : PUSH ECX
00442a9b : PUSH EDI
00442a9c : PUSH EBX
00442a9d : CALL 0x00634101
00442aa2 : ADD ESP,0x10
00442aa5 : MOV EDX,dword ptr [EBP + -0x4]
00442aa8 : MOV EBX,dword ptr [EBP + -0xc]
00442aab : MOV ECX,EDX
00442aad : SUB ECX,EBX
00442aaf : JZ 0x00442ab8
00442ab1 : MOV EDI,dword ptr [EBP + -0x10]
00442ab4 : XOR EAX,EAX
00442ab6 : STOSD.REP ES:EDI
00442ab8 : TEST EBX,EBX
00442aba : JBE 0x00442b1d
00442abc : MOV EDI,dword ptr [EBP + -0x8]
00442abf : MOV ECX,EBX
00442ac1 : JMP 0x00442b19
00442ac3 : LEA EAX,[EDX*0x4 + 0x0]
00442aca : SAR EAX,0x2
00442acd : TEST EAX,EAX
00442acf : JBE 0x00442ae4
00442ad1 : ADD EAX,EAX
00442ad3 : ADD EAX,EAX
00442ad5 : PUSH EAX
00442ad6 : PUSH ECX
00442ad7 : PUSH EAX
00442ad8 : PUSH EBX
00442ad9 : CALL 0x00634101
00442ade : MOV EDX,dword ptr [EBP + -0x4]
00442ae1 : ADD ESP,0x10
00442ae4 : MOV EAX,dword ptr [ESI + 0x10]
00442ae7 : LEA EBX,[EAX + EDX*0x4]
00442aea : SUB EAX,EBX
00442aec : ADD EAX,EDI
00442aee : MOV EDI,dword ptr [EBP + -0x8]
00442af1 : SAR EAX,0x2
00442af4 : LEA ECX,[EAX*0x4 + 0x0]
00442afb : ADD EDI,ECX
00442afd : TEST EAX,EAX
00442aff : JBE 0x00442b13
00442b01 : MOV EAX,dword ptr [EBP + -0x8]
00442b04 : PUSH ECX
00442b05 : PUSH EBX
00442b06 : PUSH ECX
00442b07 : PUSH EAX
00442b08 : CALL 0x00634101
00442b0d : MOV EDX,dword ptr [EBP + -0x4]
00442b10 : ADD ESP,0x10
00442b13 : TEST EDX,EDX
00442b15 : JBE 0x00442b1d
00442b17 : MOV ECX,EDX
00442b19 : XOR EAX,EAX
00442b1b : STOSD.REP ES:EDI
00442b1d : MOV ECX,dword ptr [ESI + 0x10]
00442b20 : TEST ECX,ECX
00442b22 : JZ 0x00442b2c
00442b24 : CALL 0x006f04e0
00442b2c : MOV ECX,dword ptr [EBP + -0x8]
00442b2f : ADD dword ptr [ESI + 0x14],EDX
00442b32 : POP EDI
00442b33 : MOV dword ptr [ESI + 0x10],ECX
00442b36 : POP EBX
00442b37 : MOV ESP,EBP
00442b39 : POP EBP
00442b3a : RET
