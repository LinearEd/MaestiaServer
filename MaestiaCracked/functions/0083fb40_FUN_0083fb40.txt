PROGRAM  : Maestia.exe
FUNCTION : FUN_0083fb40
ENTRY    : 0083fb40
BODY     : [[0083fb40, 0083fdf6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0083fb40(int *param_1,int param_2)

{
  code *pcVar1;
  int *piVar2;
  char cVar3;
  DWORD DVar4;
  int iVar5;
  int *piVar6;
  int in_ECX;
  int iVar7;
  
  piVar2 = param_1;
  if ((char)param_1[0x5c9] != '\0') {
    DVar4 = GetTickCount();
    param_1[0x5cb] = DVar4;
    return;
  }
  if (param_2 == 0x29) {
    if (in_ECX != param_1[1]) {
      param_1[0x5cd] = 0;
      return;
    }
    param_1[0x5cd] = 1;
    if (*(char *)((int)param_1 + 0x1725) == '\0') {
      DVar4 = GetTickCount();
      param_1[0x5cb] = DVar4;
      FUN_0083f9d0(param_1);
      FUN_00887880();
      if (DAT_00da93ec == 0) {
        return;
      }
      FUN_00a379a0(param_1[0x5b4],0x104,param_1[1]);
      return;
    }
  }
  else {
    if (in_ECX == param_1[1]) {
      return;
    }
    if (param_2 == 0x104) {
      if ((((in_ECX != -1) && (DAT_00da93ec != 0)) &&
          (iVar5 = FUN_00a1b420(param_1[0x5b4],in_ECX), iVar5 != 0)) &&
         (*(char *)(iVar5 + 0x1725) == '\0')) {
        DVar4 = GetTickCount();
        param_1[0x5cb] = DVar4;
        cVar3 = (**(code **)(*param_1 + 0x214))();
        if (cVar3 == '\0') {
          return;
        }
        FUN_0083f9d0(param_1);
        FUN_00887880();
        return;
      }
    }
    else {
      if (param_2 == 0x105) {
        FUN_0088fb60(param_1);
        param_1[0x5cd] = 1;
        *(undefined2 *)(param_1 + 0x5cc) = 0;
        return;
      }
      if ((param_2 == 0xfb) && (DAT_00da93ec != 0)) {
        FUN_00a379a0(param_1[0x5b4],0x105,param_1[1]);
      }
      if (param_1[0x5cd] == 0) {
        return;
      }
    }
  }
  cVar3 = (**(code **)(*param_1 + 0x214))();
  if (cVar3 != '\0') {
    GetTickCount();
    if ((param_2 == 0xfb) || (cVar3 = FUN_00876040(), cVar3 == '\0')) {
      param_1[0x5ca] = param_2;
      (**(code **)(*(int *)(*(int *)(param_1[0x4e] + 4) + 0x138 + (int)param_1) + 0x10))
                (param_1 + 0x4c6,1,1,0);
    }
    else if (param_1[0x5ca] != param_2) {
      iVar5 = param_1[0x5ca];
      iVar7 = 0;
      param_1 = (int *)0x0;
      piVar6 = &DAT_00d6e5bc;
      do {
        if (piVar6[-1] == iVar5) {
          param_1 = (int *)*piVar6;
        }
        if (piVar6[-1] == param_2) {
          iVar7 = *piVar6;
        }
        if (piVar6[1] == iVar5) {
          param_1 = (int *)piVar6[2];
        }
        if (piVar6[1] == param_2) {
          iVar7 = piVar6[2];
        }
        if (piVar6[3] == iVar5) {
          param_1 = (int *)piVar6[4];
        }
        if (piVar6[3] == param_2) {
          iVar7 = piVar6[4];
        }
        if (piVar6[5] == iVar5) {
          param_1 = (int *)piVar6[6];
        }
        if (piVar6[5] == param_2) {
          iVar7 = piVar6[6];
        }
        if (piVar6[7] == iVar5) {
          param_1 = (int *)piVar6[8];
        }
        if (piVar6[7] == param_2) {
          iVar7 = piVar6[8];
        }
        piVar6 = piVar6 + 10;
      } while ((int)piVar6 < 0xd6e65c);
      if ((int)param_1 < iVar7) {
        pcVar1 = *(code **)(*piVar2 + 0x164);
        piVar2[0x5ca] = param_2;
        (*pcVar1)();
        return;
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0083fb40 : PUSH EBP
0083fb41 : MOV EBP,ESP
0083fb43 : PUSH ECX
0083fb44 : PUSH EBX
0083fb45 : MOV EBX,dword ptr [EBP + 0x8]
0083fb48 : CMP byte ptr [EBX + 0x1724],0x0
0083fb4f : PUSH ESI
0083fb50 : PUSH EDI
0083fb51 : JZ 0x0083fb67
0083fb53 : CALL dword ptr [0x00b850d8]
0083fb59 : MOV dword ptr [EBX + 0x172c],EAX
0083fb5f : POP EDI
0083fb60 : POP ESI
0083fb61 : POP EBX
0083fb62 : POP ECX
0083fb63 : POP EBP
0083fb64 : RET 0x8
0083fb67 : MOV ESI,dword ptr [EBP + 0xc]
0083fb6a : CMP ESI,0x29
0083fb6d : JNZ 0x0083fbe1
0083fb6f : CMP ECX,dword ptr [EBX + 0x4]
0083fb72 : JNZ 0x0083fbcf
0083fb74 : CMP byte ptr [EBX + 0x1725],0x0
0083fb7b : MOV dword ptr [EBX + 0x1734],0x1
0083fb85 : JNZ 0x0083fcbb
0083fb8b : CALL dword ptr [0x00b850d8]
0083fb91 : PUSH EBX
0083fb92 : MOV dword ptr [EBX + 0x172c],EAX
0083fb98 : CALL 0x0083f9d0
0083fb9d : MOV EDI,EBX
0083fb9f : CALL 0x00887880
0083fba4 : MOV ECX,dword ptr [0x00da93ec]
0083fbaa : TEST ECX,ECX
0083fbac : JZ 0x0083fdef
0083fbb2 : MOV EAX,dword ptr [EBX + 0x4]
0083fbb5 : MOV EDX,dword ptr [EBX + 0x16d0]
0083fbbb : PUSH EAX
0083fbbc : PUSH 0x104
0083fbc1 : PUSH EDX
0083fbc2 : CALL 0x00a379a0
0083fbc7 : POP EDI
0083fbc8 : POP ESI
0083fbc9 : POP EBX
0083fbca : POP ECX
0083fbcb : POP EBP
0083fbcc : RET 0x8
0083fbcf : MOV dword ptr [EBX + 0x1734],0x0
0083fbd9 : POP EDI
0083fbda : POP ESI
0083fbdb : POP EBX
0083fbdc : POP ECX
0083fbdd : POP EBP
0083fbde : RET 0x8
0083fbe1 : MOV EAX,dword ptr [EBX + 0x4]
0083fbe4 : CMP ECX,EAX
0083fbe6 : JZ 0x0083fdef
0083fbec : CMP ESI,0x104
0083fbf2 : JNZ 0x0083fc61
0083fbf4 : CMP ECX,-0x1
0083fbf7 : JZ 0x0083fcbb
0083fbfd : MOV EAX,[0x00da93ec]
0083fc02 : TEST EAX,EAX
0083fc04 : JZ 0x0083fcbb
0083fc0a : PUSH ECX
0083fc0b : MOV ECX,dword ptr [EBX + 0x16d0]
0083fc11 : PUSH ECX
0083fc12 : CALL 0x00a1b420
0083fc17 : TEST EAX,EAX
0083fc19 : JZ 0x0083fcbb
0083fc1f : CMP byte ptr [EAX + 0x1725],0x0
0083fc26 : JNZ 0x0083fcbb
0083fc2c : CALL dword ptr [0x00b850d8]
0083fc32 : MOV EDX,dword ptr [EBX]
0083fc34 : MOV dword ptr [EBX + 0x172c],EAX
0083fc3a : MOV EAX,dword ptr [EDX + 0x214]
0083fc40 : MOV ECX,EBX
0083fc42 : CALL EAX
0083fc44 : TEST AL,AL
0083fc46 : JZ 0x0083fdef
0083fc4c : PUSH EBX
0083fc4d : CALL 0x0083f9d0
0083fc52 : MOV EDI,EBX
0083fc54 : CALL 0x00887880
0083fc59 : POP EDI
0083fc5a : POP ESI
0083fc5b : POP EBX
0083fc5c : POP ECX
0083fc5d : POP EBP
0083fc5e : RET 0x8
0083fc61 : CMP ESI,0x105
0083fc67 : JNZ 0x0083fc8a
0083fc69 : PUSH EBX
0083fc6a : CALL 0x0088fb60
0083fc6f : XOR ECX,ECX
0083fc71 : MOV dword ptr [EBX + 0x1734],0x1
0083fc7b : MOV word ptr [EBX + 0x1730],CX
0083fc82 : POP EDI
0083fc83 : POP ESI
0083fc84 : POP EBX
0083fc85 : POP ECX
0083fc86 : POP EBP
0083fc87 : RET 0x8
0083fc8a : CMP ESI,0xfb
0083fc90 : JNZ 0x0083fcae
0083fc92 : MOV ECX,dword ptr [0x00da93ec]
0083fc98 : TEST ECX,ECX
0083fc9a : JZ 0x0083fcae
0083fc9c : MOV EDX,dword ptr [EBX + 0x16d0]
0083fca2 : PUSH EAX
0083fca3 : PUSH 0x105
0083fca8 : PUSH EDX
0083fca9 : CALL 0x00a379a0
0083fcae : CMP dword ptr [EBX + 0x1734],0x0
0083fcb5 : JZ 0x0083fdef
0083fcbb : MOV EAX,dword ptr [EBX]
0083fcbd : MOV EDX,dword ptr [EAX + 0x214]
0083fcc3 : MOV ECX,EBX
0083fcc5 : CALL EDX
0083fcc7 : TEST AL,AL
0083fcc9 : JZ 0x0083fdef
0083fccf : CALL dword ptr [0x00b850d8]
0083fcd5 : CMP ESI,0xfb
0083fcdb : JZ 0x0083fdc0
0083fce1 : MOV EAX,dword ptr [EBX + 0x138]
0083fce7 : MOV ECX,dword ptr [EAX + 0x4]
0083fcea : LEA ESI,[EBX + 0x1318]
0083fcf0 : LEA EDI,[ECX + EBX*0x1 + 0x138]
0083fcf7 : CALL 0x00876040
0083fcfc : TEST AL,AL
0083fcfe : JZ 0x0083fdbd
0083fd04 : MOV EDI,dword ptr [EBP + 0xc]
0083fd07 : CMP dword ptr [EBX + 0x1728],EDI
0083fd0d : JZ 0x0083fdef
0083fd13 : MOV EDX,dword ptr [EBX + 0x1728]
0083fd19 : XOR ESI,ESI
0083fd1b : MOV dword ptr [EBP + 0x8],ESI
0083fd1e : MOV EAX,0xd6e5bc
0083fd23 : MOV ECX,dword ptr [EAX + -0x4]
0083fd26 : CMP ECX,EDX
0083fd28 : JNZ 0x0083fd32
0083fd2a : MOV EDI,dword ptr [EAX]
0083fd2c : MOV dword ptr [EBP + 0x8],EDI
0083fd2f : MOV EDI,dword ptr [EBP + 0xc]
0083fd32 : CMP ECX,EDI
0083fd34 : JNZ 0x0083fd38
0083fd36 : MOV ESI,dword ptr [EAX]
0083fd38 : MOV ECX,dword ptr [EAX + 0x4]
0083fd3b : CMP ECX,EDX
0083fd3d : JNZ 0x0083fd48
0083fd3f : MOV EDI,dword ptr [EAX + 0x8]
0083fd42 : MOV dword ptr [EBP + 0x8],EDI
0083fd45 : MOV EDI,dword ptr [EBP + 0xc]
0083fd48 : CMP ECX,EDI
0083fd4a : JNZ 0x0083fd4f
0083fd4c : MOV ESI,dword ptr [EAX + 0x8]
0083fd4f : MOV ECX,dword ptr [EAX + 0xc]
0083fd52 : CMP ECX,EDX
0083fd54 : JNZ 0x0083fd5f
0083fd56 : MOV EDI,dword ptr [EAX + 0x10]
0083fd59 : MOV dword ptr [EBP + 0x8],EDI
0083fd5c : MOV EDI,dword ptr [EBP + 0xc]
0083fd5f : CMP ECX,EDI
0083fd61 : JNZ 0x0083fd66
0083fd63 : MOV ESI,dword ptr [EAX + 0x10]
0083fd66 : MOV ECX,dword ptr [EAX + 0x14]
0083fd69 : CMP ECX,EDX
0083fd6b : JNZ 0x0083fd76
0083fd6d : MOV EDI,dword ptr [EAX + 0x18]
0083fd70 : MOV dword ptr [EBP + 0x8],EDI
0083fd73 : MOV EDI,dword ptr [EBP + 0xc]
0083fd76 : CMP ECX,EDI
0083fd78 : JNZ 0x0083fd7d
0083fd7a : MOV ESI,dword ptr [EAX + 0x18]
0083fd7d : MOV ECX,dword ptr [EAX + 0x1c]
0083fd80 : CMP ECX,EDX
0083fd82 : JNZ 0x0083fd8d
0083fd84 : MOV EDI,dword ptr [EAX + 0x20]
0083fd87 : MOV dword ptr [EBP + 0x8],EDI
0083fd8a : MOV EDI,dword ptr [EBP + 0xc]
0083fd8d : CMP ECX,EDI
0083fd8f : JNZ 0x0083fd94
0083fd91 : MOV ESI,dword ptr [EAX + 0x20]
0083fd94 : ADD EAX,0x28
0083fd97 : CMP EAX,0xd6e65c
0083fd9c : JL 0x0083fd23
0083fd9e : CMP ESI,dword ptr [EBP + 0x8]
0083fda1 : JLE 0x0083fdef
0083fda3 : MOV EDX,dword ptr [EBX]
0083fda5 : MOV EAX,dword ptr [EDX + 0x164]
0083fdab : MOV ECX,EBX
0083fdad : MOV dword ptr [EBX + 0x1728],EDI
0083fdb3 : CALL EAX
0083fdb5 : POP EDI
0083fdb6 : POP ESI
0083fdb7 : POP EBX
0083fdb8 : POP ECX
0083fdb9 : POP EBP
0083fdba : RET 0x8
0083fdbd : MOV ESI,dword ptr [EBP + 0xc]
0083fdc0 : MOV ECX,dword ptr [EBX + 0x138]
0083fdc6 : MOV dword ptr [EBX + 0x1728],ESI
0083fdcc : MOV EDX,dword ptr [ECX + 0x4]
0083fdcf : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0083fdd6 : PUSH 0x0
0083fdd8 : LEA ECX,[EDX + EBX*0x1 + 0x138]
0083fddf : MOV EDX,dword ptr [EAX + 0x10]
0083fde2 : PUSH 0x1
0083fde4 : PUSH 0x1
0083fde6 : ADD EBX,0x1318
0083fdec : PUSH EBX
0083fded : CALL EDX
0083fdef : POP EDI
0083fdf0 : POP ESI
0083fdf1 : POP EBX
0083fdf2 : POP ECX
0083fdf3 : POP EBP
0083fdf4 : RET 0x8
