PROGRAM  : Maestia.exe
FUNCTION : FUN_005ce860
ENTRY    : 005ce860
BODY     : [[005ce860, 005cea10]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005ce860(int param_1)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  char cVar5;
  int iVar6;
  uint *puVar7;
  int unaff_EDI;
  int local_38 [6];
  undefined1 local_20 [4];
  undefined1 auStack_1c [12];
  undefined1 local_10;
  int iStack_8;
  int *piStack_4;
  
  piVar1 = (int *)(param_1 + 0x78);
  local_10 = 0;
  local_20[0] = 0;
  local_38[0] = FUN_00525380("System",6,0);
  *(int *)(local_38[0] + 8) = *(int *)(local_38[0] + 8) + 1;
  cVar5 = (**(code **)(*(int *)(*(int *)(*piVar1 + 0x2a0) + 0x10) + 0x2c))(piVar1,local_38,local_20)
  ;
  if (cVar5 != '\0') {
    iVar6 = FUN_00526fa0(param_1);
    cVar5 = (**(code **)(*(int *)(iVar6 + 0x10) + 0x2c))(piVar1,*piVar1 + 0x60,auStack_1c);
    if (((cVar5 != '\0') && (iVar6 = FUN_00526fa0(param_1), iVar6 != 0)) && (iVar6 + 0x10 != 0)) {
      iVar2 = *piStack_4;
      if (*(int *)(iVar2 + 0x10) == 0) {
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(undefined1 **)(param_1 + 8) != (undefined1 *)0x0) {
          **(undefined1 **)(param_1 + 8) = 1;
        }
      }
      else {
        *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x10;
        local_38[0] = iVar2;
        if (*(uint *)(param_1 + 0x10) <= *(uint *)(param_1 + 8)) {
          FUN_00504050();
        }
        if (*(int *)(param_1 + 8) != 0) {
          FUN_005266c0(&stack0xffffffc4);
        }
        FUN_00526bc0();
      }
      puVar7 = (uint *)(param_1 + 8);
      uVar3 = *puVar7;
      iVar2 = *(int *)(param_1 + 0xc);
      iVar4 = *(int *)(param_1 + 0x1c);
      iStack_8 = FUN_00525380("onSetConversionStatus",0x15,0);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + 1;
      FUN_0057bb40(param_1,iVar6 + 0x10,&iStack_8,1,
                   ((int)(uVar3 - iVar2) >> 4) + -0x20 + iVar4 * 0x20);
      *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + -1;
      if (*(int *)(iStack_8 + 8) == 0) {
        FUN_00525340();
      }
      FUN_00526bc0();
      *puVar7 = *puVar7 - 0x10;
      if (*puVar7 < *(uint *)(param_1 + 0xc)) {
        FUN_00504f30();
      }
    }
  }
  *(int *)(unaff_EDI + 8) = *(int *)(unaff_EDI + 8) + -1;
  if (*(int *)(unaff_EDI + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  FUN_00526bc0();
  return;
}



============================================================
DISASSEMBLY
============================================================
005ce860 : SUB ESP,0x38
005ce863 : PUSH EBP
005ce864 : MOV EBP,dword ptr [ESP + 0x40]
005ce868 : MOV EAX,dword ptr [EBP + 0x78]
005ce86b : PUSH ESI
005ce86c : PUSH EDI
005ce86d : PUSH 0x0
005ce86f : LEA EDI,[EBP + 0x78]
005ce872 : PUSH 0x6
005ce874 : PUSH 0xb86464
005ce879 : LEA ECX,[EAX + 0x254]
005ce87f : MOV byte ptr [ESP + 0x40],0x0
005ce884 : MOV byte ptr [ESP + 0x30],0x0
005ce889 : CALL 0x00525380
005ce88e : MOV dword ptr [ESP + 0xc],EAX
005ce892 : MOV ESI,0x1
005ce897 : ADD dword ptr [EAX + 0x8],ESI
005ce89a : MOV EAX,dword ptr [EDI]
005ce89c : MOV ECX,dword ptr [EAX + 0x2a0]
005ce8a2 : MOV EDX,dword ptr [ECX + 0x10]
005ce8a5 : MOV EDX,dword ptr [EDX + 0x2c]
005ce8a8 : LEA EAX,[ESP + 0x24]
005ce8ac : PUSH EAX
005ce8ad : ADD ECX,0x10
005ce8b0 : LEA EAX,[ESP + 0x10]
005ce8b4 : PUSH EAX
005ce8b5 : PUSH EDI
005ce8b6 : CALL EDX
005ce8b8 : TEST AL,AL
005ce8ba : JZ 0x005ce9e2
005ce8c0 : PUSH EBX
005ce8c1 : PUSH EBP
005ce8c2 : LEA ECX,[ESP + 0x2c]
005ce8c6 : CALL 0x00526fa0
005ce8cb : MOV EDX,dword ptr [EDI]
005ce8cd : LEA ECX,[EAX + 0x10]
005ce8d0 : MOV EAX,dword ptr [ECX]
005ce8d2 : LEA EBX,[ESP + 0x38]
005ce8d6 : PUSH EBX
005ce8d7 : ADD EDX,0x60
005ce8da : PUSH EDX
005ce8db : MOV EDX,dword ptr [EAX + 0x2c]
005ce8de : PUSH EDI
005ce8df : CALL EDX
005ce8e1 : TEST AL,AL
005ce8e3 : JZ 0x005ce9e1
005ce8e9 : PUSH EBP
005ce8ea : MOV ECX,EBX
005ce8ec : CALL 0x00526fa0
005ce8f1 : TEST EAX,EAX
005ce8f3 : JZ 0x005ce9e1
005ce8f9 : ADD EAX,0x10
005ce8fc : MOV dword ptr [ESP + 0x14],EAX
005ce900 : JZ 0x005ce9e1
005ce906 : MOV EAX,dword ptr [ESP + 0x50]
005ce90a : MOV EAX,dword ptr [EAX]
005ce90c : CMP dword ptr [EAX + 0x10],0x0
005ce910 : JZ 0x005ce94f
005ce912 : MOV dword ptr [ESP + 0x1c],EAX
005ce916 : MOV byte ptr [ESP + 0x18],0x5
005ce91b : ADD dword ptr [EAX + 0x8],ESI
005ce91e : ADD dword ptr [EBP + 0x8],0x10
005ce922 : MOV EAX,dword ptr [EBP + 0x8]
005ce925 : CMP EAX,dword ptr [EBP + 0x10]
005ce928 : LEA ESI,[EBP + 0x8]
005ce92b : JC 0x005ce934
005ce92d : MOV ECX,ESI
005ce92f : CALL 0x00504050
005ce934 : MOV ECX,dword ptr [ESI]
005ce936 : TEST ECX,ECX
005ce938 : JZ 0x005ce944
005ce93a : LEA EDX,[ESP + 0x18]
005ce93e : PUSH EDX
005ce93f : CALL 0x005266c0
005ce944 : LEA ECX,[ESP + 0x18]
005ce948 : CALL 0x00526bc0
005ce94d : JMP 0x005ce96e
005ce94f : ADD dword ptr [EBP + 0x8],0x10
005ce953 : MOV EAX,dword ptr [EBP + 0x8]
005ce956 : CMP EAX,dword ptr [EBP + 0x10]
005ce959 : LEA ESI,[EBP + 0x8]
005ce95c : JC 0x005ce965
005ce95e : MOV ECX,ESI
005ce960 : CALL 0x00504050
005ce965 : MOV EAX,dword ptr [ESI]
005ce967 : TEST EAX,EAX
005ce969 : JZ 0x005ce96e
005ce96b : MOV byte ptr [EAX],0x1
005ce96e : MOV EAX,dword ptr [ESI]
005ce970 : SUB EAX,dword ptr [ESI + 0x4]
005ce973 : MOV ECX,dword ptr [ESI + 0x14]
005ce976 : MOV EDI,dword ptr [EDI]
005ce978 : PUSH 0x0
005ce97a : SHL ECX,0x5
005ce97d : SAR EAX,0x4
005ce980 : PUSH 0x15
005ce982 : LEA EBX,[EAX + ECX*0x1 + -0x20]
005ce986 : PUSH 0xb92c4c
005ce98b : LEA ECX,[EDI + 0x254]
005ce991 : CALL 0x00525380
005ce996 : PUSH EBX
005ce997 : MOV dword ptr [ESP + 0x50],EAX
005ce99b : INC dword ptr [EAX + 0x8]
005ce99e : MOV EAX,dword ptr [ESP + 0x18]
005ce9a2 : PUSH 0x1
005ce9a4 : LEA EDX,[ESP + 0x54]
005ce9a8 : PUSH EDX
005ce9a9 : PUSH EAX
005ce9aa : PUSH EBP
005ce9ab : CALL 0x0057bb40
005ce9b0 : MOV EAX,dword ptr [ESP + 0x60]
005ce9b4 : DEC dword ptr [EAX + 0x8]
005ce9b7 : MOV ECX,EAX
005ce9b9 : ADD EAX,0x8
005ce9bc : ADD ESP,0x14
005ce9bf : CMP dword ptr [EAX],0x0
005ce9c2 : JNZ 0x005ce9c9
005ce9c4 : CALL 0x00525340
005ce9c9 : MOV ECX,dword ptr [ESI]
005ce9cb : CALL 0x00526bc0
005ce9d0 : ADD dword ptr [ESI],-0x10
005ce9d3 : MOV EAX,dword ptr [ESI]
005ce9d5 : CMP EAX,dword ptr [ESI + 0x4]
005ce9d8 : JNC 0x005ce9e1
005ce9da : MOV ECX,ESI
005ce9dc : CALL 0x00504f30
005ce9e1 : POP EBX
005ce9e2 : MOV EAX,dword ptr [ESP + 0xc]
005ce9e6 : DEC dword ptr [EAX + 0x8]
005ce9e9 : MOV ECX,EAX
005ce9eb : ADD EAX,0x8
005ce9ee : CMP dword ptr [EAX],0x0
005ce9f1 : POP EDI
005ce9f2 : POP ESI
005ce9f3 : POP EBP
005ce9f4 : JNZ 0x005ce9fb
005ce9f6 : CALL 0x00525340
005ce9fb : LEA ECX,[ESP + 0x18]
005ce9ff : CALL 0x00526bc0
005cea04 : LEA ECX,[ESP + 0x28]
005cea08 : CALL 0x00526bc0
005cea0d : ADD ESP,0x38
005cea10 : RET
