PROGRAM  : Maestia.exe
FUNCTION : FUN_00808040
ENTRY    : 00808040
BODY     : [[00808040, 008080f6]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00808040(undefined4 param_1,int *param_2)

{
  int iVar1;
  uint *puVar2;
  char *pcVar3;
  uint unaff_EDI;
  
  EnterCriticalSection((LPCRITICAL_SECTION)&DAT_01722300);
  iVar1 = 0;
  puVar2 = &DAT_017211c4;
  while (((char)puVar2[0x43] != '\0' || (*puVar2 < unaff_EDI))) {
    puVar2 = puVar2 + 0x45;
    iVar1 = iVar1 + 1;
    if (0x1722303 < (int)puVar2) {
LAB_0080809c:
      iVar1 = 0;
      pcVar3 = &DAT_017212d0;
      while (*pcVar3 != '\0') {
        pcVar3 = pcVar3 + 0x114;
        iVar1 = iVar1 + 1;
        if (0x172240f < (int)pcVar3) {
          LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_01722300);
          return 0;
        }
      }
      *param_2 = iVar1;
      iVar1 = FUN_004558c0(&DAT_017211c0 + iVar1 * 0x114);
LAB_008080e4:
      LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_01722300);
      return iVar1;
    }
  }
  *param_2 = iVar1;
  iVar1 = FUN_004558c0(&DAT_017211c0 + iVar1 * 0x114);
  if (iVar1 != 0) goto LAB_008080e4;
  goto LAB_0080809c;
}



============================================================
DISASSEMBLY
============================================================
00808040 : PUSH EBP
00808041 : MOV EBP,ESP
00808043 : AND ESP,0xfffffff8
00808046 : PUSH EBX
00808047 : MOV EBX,dword ptr [EBP + 0xc]
0080804a : PUSH ESI
0080804b : PUSH 0x1722300
00808050 : XOR ESI,ESI
00808052 : CALL dword ptr [0x00b85118]
00808058 : XOR EAX,EAX
0080805a : MOV ECX,0x17211c4
0080805f : NOP
00808060 : CMP byte ptr [ECX + 0x10c],0x0
00808067 : JNZ 0x0080806d
00808069 : CMP dword ptr [ECX],EDI
0080806b : JNC 0x0080807e
0080806d : ADD ECX,0x114
00808073 : INC EAX
00808074 : CMP ECX,0x1722304
0080807a : JL 0x00808060
0080807c : JMP 0x0080809c
0080807e : MOV EDX,dword ptr [EBP + 0x8]
00808081 : MOV dword ptr [EBX],EAX
00808083 : IMUL EAX,EAX,0x114
00808089 : ADD EAX,0x17211c0
0080808e : PUSH EAX
0080808f : MOV ECX,EDI
00808091 : CALL 0x004558c0
00808096 : MOV ESI,EAX
00808098 : TEST ESI,ESI
0080809a : JNZ 0x008080e4
0080809c : XOR EAX,EAX
0080809e : MOV ECX,0x17212d0
008080a3 : CMP byte ptr [ECX],0x0
008080a6 : JZ 0x008080ca
008080a8 : ADD ECX,0x114
008080ae : INC EAX
008080af : CMP ECX,0x1722410
008080b5 : JL 0x008080a3
008080b7 : PUSH 0x1722300
008080bc : CALL dword ptr [0x00b8511c]
008080c2 : MOV EAX,ESI
008080c4 : POP ESI
008080c5 : POP EBX
008080c6 : MOV ESP,EBP
008080c8 : POP EBP
008080c9 : RET
008080ca : MOV EDX,dword ptr [EBP + 0x8]
008080cd : MOV dword ptr [EBX],EAX
008080cf : IMUL EAX,EAX,0x114
008080d5 : ADD EAX,0x17211c0
008080da : PUSH EAX
008080db : MOV ECX,EDI
008080dd : CALL 0x004558c0
008080e2 : MOV ESI,EAX
008080e4 : PUSH 0x1722300
008080e9 : CALL dword ptr [0x00b8511c]
008080ef : MOV EAX,ESI
008080f1 : POP ESI
008080f2 : POP EBX
008080f3 : MOV ESP,EBP
008080f5 : POP EBP
008080f6 : RET
