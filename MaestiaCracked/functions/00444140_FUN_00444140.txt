PROGRAM  : Maestia.exe
FUNCTION : FUN_00444140
ENTRY    : 00444140
BODY     : [[00444140, 0044429c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00444140(void)

{
  void *pvVar1;
  rsize_t _DstSize;
  uint uVar2;
  undefined4 *_Dst;
  int iVar3;
  int iVar4;
  uint uVar5;
  int unaff_ESI;
  undefined4 *puVar6;
  undefined4 *puVar7;
  uint local_8;
  
  uVar2 = *(uint *)(unaff_ESI + 0x14);
  local_8 = 1;
  if (uVar2 == 0xfffffff) {
    uVar2 = FUN_00442c50();
  }
  uVar5 = uVar2 >> 1;
  if (uVar5 < 8) {
    uVar5 = 8;
  }
  else if (uVar5 < 2) goto LAB_00444186;
  if (uVar2 <= 0xfffffff - uVar5) {
    local_8 = uVar5;
  }
LAB_00444186:
  uVar2 = *(uint *)(unaff_ESI + 0x18) >> 2;
  _Dst = (undefined4 *)FUN_004c1790();
  iVar4 = uVar2 * 4;
  pvVar1 = (void *)(*(int *)(unaff_ESI + 0x10) + iVar4);
  iVar3 = (*(int *)(unaff_ESI + 0x14) * 4 - (int)pvVar1) + *(int *)(unaff_ESI + 0x10) >> 2;
  puVar7 = _Dst + uVar2 + iVar3;
  if (iVar3 != 0) {
    _memmove_s(_Dst + uVar2,iVar3 * 4,pvVar1,iVar3 * 4);
  }
  if (local_8 < uVar2) {
    iVar3 = (int)(local_8 * 4) >> 2;
    if (iVar3 != 0) {
      _DstSize = iVar3 * 4;
      _memmove_s(puVar7,_DstSize,*(void **)(unaff_ESI + 0x10),_DstSize);
    }
    pvVar1 = (void *)(local_8 * 4 + *(int *)(unaff_ESI + 0x10));
    iVar4 = (*(int *)(unaff_ESI + 0x10) - (int)pvVar1) + iVar4 >> 2;
    puVar7 = _Dst + iVar4;
    uVar2 = local_8;
    if (iVar4 != 0) {
      _memmove_s(_Dst,iVar4 * 4,pvVar1,iVar4 * 4);
    }
  }
  else {
    iVar4 = iVar4 >> 2;
    puVar6 = puVar7 + iVar4;
    if (iVar4 != 0) {
      _memmove_s(puVar7,iVar4 * 4,*(void **)(unaff_ESI + 0x10),iVar4 * 4);
    }
    iVar4 = local_8 - uVar2;
    puVar7 = _Dst;
    if (iVar4 != 0) {
      for (; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = 0;
        puVar6 = puVar6 + 1;
      }
    }
  }
  if (uVar2 != 0) {
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar7 = 0;
      puVar7 = puVar7 + 1;
    }
  }
  if (*(int *)(unaff_ESI + 0x10) == 0) {
    *(int *)(unaff_ESI + 0x14) = *(int *)(unaff_ESI + 0x14) + local_8;
    *(undefined4 **)(unaff_ESI + 0x10) = _Dst;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00444140 : PUSH EBP
00444141 : MOV EBP,ESP
00444143 : SUB ESP,0x10
00444146 : MOV EAX,dword ptr [ESI + 0x14]
00444149 : MOV ECX,0xfffffff
0044414e : SUB ECX,EAX
00444150 : PUSH EBX
00444151 : PUSH EDI
00444152 : MOV dword ptr [EBP + -0x4],0x1
00444159 : CMP ECX,0x1
0044415c : JNC 0x00444163
0044415e : CALL 0x00442c50
00444163 : MOV ECX,EAX
00444165 : SHR ECX,0x1
00444167 : CMP ECX,0x8
0044416a : JNC 0x00444173
0044416c : MOV ECX,0x8
00444171 : JMP 0x00444178
00444173 : CMP ECX,0x1
00444176 : JBE 0x00444186
00444178 : MOV EDX,0xfffffff
0044417d : SUB EDX,ECX
0044417f : CMP EAX,EDX
00444181 : JA 0x00444186
00444183 : MOV dword ptr [EBP + -0x4],ECX
00444186 : MOV EBX,dword ptr [ESI + 0x18]
00444189 : MOV ECX,dword ptr [EBP + -0x4]
0044418c : ADD ECX,EAX
0044418e : SHR EBX,0x2
00444191 : CALL 0x004c1790
00444196 : MOV ECX,dword ptr [ESI + 0x10]
00444199 : MOV dword ptr [EBP + -0x8],EAX
0044419c : LEA EDI,[EBX*0x4 + 0x0]
004441a3 : LEA EDX,[EDI + EAX*0x1]
004441a6 : LEA EAX,[ECX + EDI*0x1]
004441a9 : MOV dword ptr [EBP + -0xc],EAX
004441ac : MOV EAX,dword ptr [ESI + 0x14]
004441af : ADD EAX,EAX
004441b1 : ADD EAX,EAX
004441b3 : SUB EAX,dword ptr [EBP + -0xc]
004441b6 : ADD EAX,ECX
004441b8 : SAR EAX,0x2
004441bb : LEA ECX,[EAX*0x4 + 0x0]
004441c2 : ADD EDX,ECX
004441c4 : MOV dword ptr [EBP + -0x10],EDX
004441c7 : TEST EAX,EAX
004441c9 : JBE 0x004441e2
004441cb : MOV EDX,dword ptr [EBP + -0xc]
004441ce : MOV EAX,dword ptr [EBP + -0x8]
004441d1 : PUSH ECX
004441d2 : PUSH EDX
004441d3 : PUSH ECX
004441d4 : ADD EAX,EDI
004441d6 : PUSH EAX
004441d7 : CALL 0x00634101
004441dc : MOV EDX,dword ptr [EBP + -0x10]
004441df : ADD ESP,0x10
004441e2 : MOV EAX,dword ptr [EBP + -0x4]
004441e5 : MOV ECX,dword ptr [ESI + 0x10]
004441e8 : CMP EBX,EAX
004441ea : JA 0x0044422a
004441ec : MOV EAX,ECX
004441ee : SUB EAX,ECX
004441f0 : ADD EAX,EDI
004441f2 : SAR EAX,0x2
004441f5 : LEA EDI,[EAX*0x4 + 0x0]
004441fc : MOV dword ptr [EBP + -0x10],EDI
004441ff : ADD EDI,EDX
00444201 : TEST EAX,EAX
00444203 : JBE 0x00444214
00444205 : MOV EAX,dword ptr [EBP + -0x10]
00444208 : PUSH EAX
00444209 : PUSH ECX
0044420a : PUSH EAX
0044420b : PUSH EDX
0044420c : CALL 0x00634101
00444211 : ADD ESP,0x10
00444214 : MOV ECX,dword ptr [EBP + -0x4]
00444217 : SUB ECX,EBX
00444219 : JZ 0x0044421f
0044421b : XOR EAX,EAX
0044421d : STOSD.REP ES:EDI
0044421f : TEST EBX,EBX
00444221 : JBE 0x0044427f
00444223 : MOV EDI,dword ptr [EBP + -0x8]
00444226 : MOV ECX,EBX
00444228 : JMP 0x0044427b
0044422a : LEA EBX,[EAX*0x4 + 0x0]
00444231 : MOV EAX,EBX
00444233 : SAR EAX,0x2
00444236 : TEST EAX,EAX
00444238 : JBE 0x0044424a
0044423a : ADD EAX,EAX
0044423c : ADD EAX,EAX
0044423e : PUSH EAX
0044423f : PUSH ECX
00444240 : PUSH EAX
00444241 : PUSH EDX
00444242 : CALL 0x00634101
00444247 : ADD ESP,0x10
0044424a : MOV EAX,dword ptr [ESI + 0x10]
0044424d : LEA EDX,[EBX + EAX*0x1]
00444250 : MOV EBX,dword ptr [EBP + -0x8]
00444253 : SUB EAX,EDX
00444255 : ADD EAX,EDI
00444257 : SAR EAX,0x2
0044425a : LEA ECX,[EAX*0x4 + 0x0]
00444261 : LEA EDI,[ECX + EBX*0x1]
00444264 : TEST EAX,EAX
00444266 : JBE 0x00444274
00444268 : PUSH ECX
00444269 : PUSH EDX
0044426a : PUSH ECX
0044426b : PUSH EBX
0044426c : CALL 0x00634101
00444271 : ADD ESP,0x10
00444274 : MOV ECX,dword ptr [EBP + -0x4]
00444277 : TEST ECX,ECX
00444279 : JBE 0x0044427f
0044427b : XOR EAX,EAX
0044427d : STOSD.REP ES:EDI
0044427f : MOV ECX,dword ptr [ESI + 0x10]
00444282 : TEST ECX,ECX
00444284 : JZ 0x0044428b
00444286 : CALL 0x006f04e0
0044428b : MOV ECX,dword ptr [EBP + -0x8]
0044428e : MOV EDX,dword ptr [EBP + -0x4]
00444291 : ADD dword ptr [ESI + 0x14],EDX
00444294 : POP EDI
00444295 : MOV dword ptr [ESI + 0x10],ECX
00444298 : POP EBX
00444299 : MOV ESP,EBP
0044429b : POP EBP
0044429c : RET
