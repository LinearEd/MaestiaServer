PROGRAM  : Maestia.exe
FUNCTION : FUN_009a09a0
ENTRY    : 009a09a0
BODY     : [[009a09a0, 009a0d2b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a09a0(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  bool bVar1;
  undefined2 uVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int *in_ECX;
  undefined4 *puVar6;
  undefined4 uVar7;
  char *pcVar8;
  char *pcVar9;
  uint local_58;
  undefined1 local_4c [4];
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b21385;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar3 = (**(code **)(*in_ECX + 0x74))();
  iVar4 = (**(code **)(*in_ECX + 0x74))();
  local_18 = 7;
  local_1c = 0;
  local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
  FUN_00406360();
  local_8 = 0;
  local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
  local_34 = 7;
  local_38 = 0;
  FUN_00406360();
  local_8._0_1_ = 1;
  bVar1 = false;
  if ((((param_1 == 0) && (param_4 == 0)) && (*(int *)(DAT_0172491c + 0x17c) != 0)) &&
     (*(char *)(*(int *)(DAT_0172491c + 0x17c) + 0x1fdd) != '\0')) {
    bVar1 = true;
  }
  if (iVar3 != 0) {
    (**(code **)(*in_ECX + 0x58))();
    FUN_00405eb0(local_30);
    local_8._0_1_ = 1;
    FUN_008f75f0();
    local_8._0_1_ = 3;
    FUN_00405eb0();
    local_8._0_1_ = 1;
    if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_58 = 7;
  }
  local_8._0_1_ = 1;
  if (iVar4 == 0) {
    (**(code **)(*in_ECX + 0x78))();
    (**(code **)(*in_ECX + 0x70))();
    if (bVar1) goto LAB_009a0cc5;
    if (iVar3 == 0) {
      uVar7 = 0;
    }
    else {
      uVar7 = *(undefined4 *)(iVar3 + 0xb0);
    }
    uVar2 = FUN_009a01c0();
    piVar5 = *(int **)(*DAT_00da9894 + 0x114);
    puVar6 = local_2c;
    if (local_18 < 8) {
      puVar6 = &local_2c;
    }
    pcVar9 = "%d,%ls,%d";
    pcVar8 = "SetCharEquip";
  }
  else {
    (**(code **)(*in_ECX + 0x58))();
    FUN_00405eb0(local_4c,0,0xffffffff);
    local_8._0_1_ = 1;
    FUN_008f75f0();
    local_8._0_1_ = 5;
    FUN_00405eb0();
    local_8._0_1_ = 1;
    if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    (**(code **)(*in_ECX + 0x78))();
    (**(code **)(*in_ECX + 0x78))();
    (**(code **)(*in_ECX + 0x70))();
    (**(code **)(*in_ECX + 0x70))(iVar4,param_2,0);
    if (bVar1) goto LAB_009a0cc5;
    uVar2 = FUN_009a01c0();
    if (iVar3 == 0) {
      uVar7 = 0;
    }
    else {
      uVar7 = *(undefined4 *)(iVar3 + 0xb0);
    }
    puVar6 = local_2c;
    if (local_18 < 8) {
      puVar6 = &local_2c;
    }
    (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
              (*(int **)(*DAT_00da9894 + 0x114),"SetCharEquip","%d,%ls,%d",uVar2,puVar6,uVar7);
    uVar2 = FUN_009a01c0();
    uVar7 = *(undefined4 *)(iVar4 + 0xb0);
    piVar5 = *(int **)(*DAT_00da9894 + 0x114);
    puVar6 = local_48;
    if (local_34 < 8) {
      puVar6 = &local_48;
    }
    pcVar9 = "%d,%ls,%d";
    pcVar8 = "SetCharEquip";
  }
  (**(code **)(*piVar5 + 4))(piVar5,pcVar8,pcVar9,uVar2,puVar6,uVar7);
LAB_009a0cc5:
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_34 = 7;
  local_38 = 0;
  local_48 = (undefined4 *)((uint)local_48 & 0xffff0000);
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = (undefined4 *)((uint)local_2c & 0xffff0000);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009a09a0 : PUSH EBP
009a09a1 : MOV EBP,ESP
009a09a3 : PUSH -0x1
009a09a5 : PUSH 0xb21385
009a09aa : MOV EAX,FS:[0x0]
009a09b0 : PUSH EAX
009a09b1 : SUB ESP,0x60
009a09b4 : MOV EAX,[0x00d66fa0]
009a09b9 : XOR EAX,EBP
009a09bb : MOV dword ptr [EBP + -0x10],EAX
009a09be : PUSH EBX
009a09bf : PUSH ESI
009a09c0 : PUSH EDI
009a09c1 : PUSH EAX
009a09c2 : LEA EAX,[EBP + -0xc]
009a09c5 : MOV FS:[0x0],EAX
009a09cb : MOV EDX,dword ptr [EBP + 0xc]
009a09ce : MOV ESI,ECX
009a09d0 : MOV ECX,dword ptr [EBP + 0x10]
009a09d3 : MOV EAX,dword ptr [ESI]
009a09d5 : MOV EAX,dword ptr [EAX + 0x74]
009a09d8 : PUSH ECX
009a09d9 : PUSH EDX
009a09da : MOV ECX,ESI
009a09dc : CALL EAX
009a09de : MOV EDX,dword ptr [ESI]
009a09e0 : MOV EDX,dword ptr [EDX + 0x74]
009a09e3 : MOV EDI,EAX
009a09e5 : MOV EAX,dword ptr [EBP + 0x18]
009a09e8 : PUSH 0x0
009a09ea : PUSH EAX
009a09eb : MOV ECX,ESI
009a09ed : CALL EDX
009a09ef : MOV EBX,EAX
009a09f1 : XOR EAX,EAX
009a09f3 : PUSH EAX
009a09f4 : PUSH 0xc88da4
009a09f9 : LEA ECX,[EBP + -0x2c]
009a09fc : MOV dword ptr [EBP + -0x14],0x7
009a0a03 : MOV dword ptr [EBP + -0x18],0x0
009a0a0a : MOV word ptr [EBP + -0x28],AX
009a0a0e : CALL 0x00406360
009a0a13 : XOR EAX,EAX
009a0a15 : MOV dword ptr [EBP + -0x4],EAX
009a0a18 : XOR ECX,ECX
009a0a1a : PUSH EAX
009a0a1b : MOV word ptr [EBP + -0x44],CX
009a0a1f : PUSH 0xc88e2c
009a0a24 : LEA ECX,[EBP + -0x48]
009a0a27 : MOV dword ptr [EBP + -0x30],0x7
009a0a2e : MOV dword ptr [EBP + -0x34],EAX
009a0a31 : CALL 0x00406360
009a0a36 : MOV byte ptr [EBP + -0x4],0x1
009a0a3a : CMP dword ptr [EBP + 0x8],0x0
009a0a3e : MOV byte ptr [EBP + -0x49],0x0
009a0a42 : JNZ 0x009a0a67
009a0a44 : CMP dword ptr [EBP + 0x14],0x0
009a0a48 : JNZ 0x009a0a67
009a0a4a : MOV EDX,dword ptr [0x0172491c]
009a0a50 : MOV EAX,dword ptr [EDX + 0x17c]
009a0a56 : TEST EAX,EAX
009a0a58 : JZ 0x009a0a67
009a0a5a : CMP byte ptr [EAX + 0x1fdd],0x0
009a0a61 : JZ 0x009a0a67
009a0a63 : MOV byte ptr [EBP + -0x49],0x1
009a0a67 : TEST EDI,EDI
009a0a69 : JZ 0x009a0af2
009a0a6f : MOV EAX,dword ptr [EDI + 0x10]
009a0a72 : MOV EDX,dword ptr [ESI]
009a0a74 : MOV EDX,dword ptr [EDX + 0x58]
009a0a77 : LEA ECX,[EBP + -0x2c]
009a0a7a : PUSH ECX
009a0a7b : PUSH EAX
009a0a7c : MOV ECX,ESI
009a0a7e : CALL EDX
009a0a80 : SUB ESP,0x1c
009a0a83 : MOV ECX,ESP
009a0a85 : MOV dword ptr [EBP + -0x50],ESP
009a0a88 : XOR EAX,EAX
009a0a8a : PUSH -0x1
009a0a8c : PUSH EAX
009a0a8d : LEA EDX,[EBP + -0x2c]
009a0a90 : MOV dword ptr [ECX + 0x18],0x7
009a0a97 : MOV dword ptr [ECX + 0x14],0x0
009a0a9e : PUSH EDX
009a0a9f : MOV word ptr [ECX + 0x4],AX
009a0aa3 : CALL 0x00405eb0
009a0aa8 : MOV byte ptr [EBP + -0x4],0x2
009a0aac : MOV byte ptr [EBP + -0x4],0x1
009a0ab0 : LEA ECX,[EBP + -0x6c]
009a0ab3 : CALL 0x008f75f0
009a0ab8 : ADD ESP,0x1c
009a0abb : MOV byte ptr [EBP + -0x4],0x3
009a0abf : PUSH -0x1
009a0ac1 : PUSH 0x0
009a0ac3 : PUSH EAX
009a0ac4 : LEA ECX,[EBP + -0x2c]
009a0ac7 : CALL 0x00405eb0
009a0acc : MOV byte ptr [EBP + -0x4],0x1
009a0ad0 : CMP dword ptr [EBP + -0x54],0x8
009a0ad4 : JC 0x009a0ade
009a0ad6 : MOV ECX,dword ptr [EBP + -0x68]
009a0ad9 : CALL 0x006f04e0
009a0ade : XOR EAX,EAX
009a0ae0 : MOV dword ptr [EBP + -0x54],0x7
009a0ae7 : MOV dword ptr [EBP + -0x58],0x0
009a0aee : MOV word ptr [EBP + -0x68],AX
009a0af2 : MOV EDX,dword ptr [ESI]
009a0af4 : TEST EBX,EBX
009a0af6 : JZ 0x009a0bde
009a0afc : MOV EAX,dword ptr [EBX + 0x10]
009a0aff : MOV EDX,dword ptr [EDX + 0x58]
009a0b02 : LEA ECX,[EBP + -0x48]
009a0b05 : PUSH ECX
009a0b06 : PUSH EAX
009a0b07 : MOV ECX,ESI
009a0b09 : CALL EDX
009a0b0b : SUB ESP,0x1c
009a0b0e : MOV ECX,ESP
009a0b10 : MOV dword ptr [EBP + -0x50],ESP
009a0b13 : XOR EAX,EAX
009a0b15 : PUSH -0x1
009a0b17 : PUSH EAX
009a0b18 : LEA EDX,[EBP + -0x48]
009a0b1b : MOV dword ptr [ECX + 0x18],0x7
009a0b22 : MOV dword ptr [ECX + 0x14],0x0
009a0b29 : PUSH EDX
009a0b2a : MOV word ptr [ECX + 0x4],AX
009a0b2e : CALL 0x00405eb0
009a0b33 : MOV byte ptr [EBP + -0x4],0x4
009a0b37 : MOV byte ptr [EBP + -0x4],0x1
009a0b3b : LEA ECX,[EBP + -0x6c]
009a0b3e : CALL 0x008f75f0
009a0b43 : ADD ESP,0x1c
009a0b46 : MOV byte ptr [EBP + -0x4],0x5
009a0b4a : PUSH -0x1
009a0b4c : PUSH 0x0
009a0b4e : PUSH EAX
009a0b4f : LEA ECX,[EBP + -0x48]
009a0b52 : CALL 0x00405eb0
009a0b57 : MOV byte ptr [EBP + -0x4],0x1
009a0b5b : CMP dword ptr [EBP + -0x54],0x8
009a0b5f : JC 0x009a0b69
009a0b61 : MOV ECX,dword ptr [EBP + -0x68]
009a0b64 : CALL 0x006f04e0
009a0b69 : MOV ECX,dword ptr [EBP + 0x10]
009a0b6c : MOV EDX,dword ptr [EBP + 0xc]
009a0b6f : XOR EAX,EAX
009a0b71 : MOV word ptr [EBP + -0x68],AX
009a0b75 : MOV EAX,dword ptr [ESI]
009a0b77 : MOV EAX,dword ptr [EAX + 0x78]
009a0b7a : PUSH ECX
009a0b7b : PUSH EDX
009a0b7c : MOV ECX,ESI
009a0b7e : MOV dword ptr [EBP + -0x54],0x7
009a0b85 : MOV dword ptr [EBP + -0x58],0x0
009a0b8c : CALL EAX
009a0b8e : MOV EDX,dword ptr [ESI]
009a0b90 : MOV EAX,dword ptr [EBP + 0x18]
009a0b93 : MOV EDX,dword ptr [EDX + 0x78]
009a0b96 : PUSH 0x0
009a0b98 : PUSH EAX
009a0b99 : MOV ECX,ESI
009a0b9b : CALL EDX
009a0b9d : MOV ECX,dword ptr [EBP + 0x18]
009a0ba0 : MOV EAX,dword ptr [ESI]
009a0ba2 : MOV EDX,dword ptr [EAX + 0x70]
009a0ba5 : PUSH 0x0
009a0ba7 : PUSH ECX
009a0ba8 : PUSH EDI
009a0ba9 : MOV ECX,ESI
009a0bab : CALL EDX
009a0bad : MOV ECX,dword ptr [EBP + 0xc]
009a0bb0 : MOV EAX,dword ptr [ESI]
009a0bb2 : MOV EDX,dword ptr [EAX + 0x70]
009a0bb5 : PUSH 0x0
009a0bb7 : PUSH ECX
009a0bb8 : PUSH EBX
009a0bb9 : MOV ECX,ESI
009a0bbb : CALL EDX
009a0bbd : CMP byte ptr [EBP + -0x49],0x0
009a0bc1 : JNZ 0x009a0cc5
009a0bc7 : MOV ECX,dword ptr [EBP + 0x18]
009a0bca : CALL 0x009a01c0
009a0bcf : MOVZX EDX,AX
009a0bd2 : TEST EDI,EDI
009a0bd4 : JZ 0x009a0c4a
009a0bd6 : MOV EDI,dword ptr [EDI + 0xb0]
009a0bdc : JMP 0x009a0c4c
009a0bde : MOV EAX,dword ptr [EBP + 0x10]
009a0be1 : MOV ECX,dword ptr [EBP + 0xc]
009a0be4 : MOV EDX,dword ptr [EDX + 0x78]
009a0be7 : PUSH EAX
009a0be8 : PUSH ECX
009a0be9 : MOV ECX,ESI
009a0beb : CALL EDX
009a0bed : MOV EBX,dword ptr [EBP + 0x18]
009a0bf0 : MOV EAX,dword ptr [ESI]
009a0bf2 : MOV EDX,dword ptr [EAX + 0x70]
009a0bf5 : PUSH 0x0
009a0bf7 : PUSH EBX
009a0bf8 : PUSH EDI
009a0bf9 : MOV ECX,ESI
009a0bfb : CALL EDX
009a0bfd : CMP byte ptr [EBP + -0x49],0x0
009a0c01 : JNZ 0x009a0cc5
009a0c07 : TEST EDI,EDI
009a0c09 : JZ 0x009a0c13
009a0c0b : MOV EDI,dword ptr [EDI + 0xb0]
009a0c11 : JMP 0x009a0c15
009a0c13 : XOR EDI,EDI
009a0c15 : MOV ECX,EBX
009a0c17 : CALL 0x009a01c0
009a0c1c : CMP dword ptr [EBP + -0x14],0x8
009a0c20 : MOV EDX,dword ptr [EBP + -0x28]
009a0c23 : MOVZX ECX,AX
009a0c26 : MOV EAX,[0x00da9894]
009a0c2b : MOV EAX,dword ptr [EAX]
009a0c2d : MOV EAX,dword ptr [EAX + 0x114]
009a0c33 : JNC 0x009a0c38
009a0c35 : LEA EDX,[EBP + -0x28]
009a0c38 : PUSH EDI
009a0c39 : PUSH EDX
009a0c3a : MOVZX ECX,CX
009a0c3d : PUSH ECX
009a0c3e : PUSH 0xc88ea4
009a0c43 : PUSH 0xc88eb0
009a0c48 : JMP 0x009a0cba
009a0c4a : XOR EDI,EDI
009a0c4c : CMP dword ptr [EBP + -0x14],0x8
009a0c50 : MOV EAX,[0x00da9894]
009a0c55 : MOV EAX,dword ptr [EAX]
009a0c57 : MOV EAX,dword ptr [EAX + 0x114]
009a0c5d : MOV ECX,dword ptr [EBP + -0x28]
009a0c60 : JNC 0x009a0c65
009a0c62 : LEA ECX,[EBP + -0x28]
009a0c65 : MOV ESI,dword ptr [EAX]
009a0c67 : PUSH EDI
009a0c68 : PUSH ECX
009a0c69 : MOVZX ECX,DX
009a0c6c : MOV EDX,dword ptr [ESI + 0x4]
009a0c6f : PUSH ECX
009a0c70 : PUSH 0xc88ec0
009a0c75 : PUSH 0xc88ecc
009a0c7a : PUSH EAX
009a0c7b : CALL EDX
009a0c7d : MOV ECX,dword ptr [EBP + 0xc]
009a0c80 : ADD ESP,0x18
009a0c83 : CALL 0x009a01c0
009a0c88 : CMP dword ptr [EBP + -0x30],0x8
009a0c8c : MOV EBX,dword ptr [EBX + 0xb0]
009a0c92 : MOV EDX,dword ptr [EBP + -0x44]
009a0c95 : MOVZX ECX,AX
009a0c98 : MOV EAX,[0x00da9894]
009a0c9d : MOV EAX,dword ptr [EAX]
009a0c9f : MOV EAX,dword ptr [EAX + 0x114]
009a0ca5 : JNC 0x009a0caa
009a0ca7 : LEA EDX,[EBP + -0x44]
009a0caa : PUSH EBX
009a0cab : PUSH EDX
009a0cac : MOVZX ECX,CX
009a0caf : PUSH ECX
009a0cb0 : PUSH 0xc88edc
009a0cb5 : PUSH 0xc88ee8
009a0cba : MOV ESI,dword ptr [EAX]
009a0cbc : MOV EDX,dword ptr [ESI + 0x4]
009a0cbf : PUSH EAX
009a0cc0 : CALL EDX
009a0cc2 : ADD ESP,0x18
009a0cc5 : MOV byte ptr [EBP + -0x4],0x0
009a0cc9 : MOV EBX,0x8
009a0cce : CMP dword ptr [EBP + -0x30],EBX
009a0cd1 : JC 0x009a0cdb
009a0cd3 : MOV ECX,dword ptr [EBP + -0x44]
009a0cd6 : CALL 0x006f04e0
009a0cdb : MOV ESI,0x7
009a0ce0 : XOR EDI,EDI
009a0ce2 : XOR EAX,EAX
009a0ce4 : MOV dword ptr [EBP + -0x30],ESI
009a0ce7 : MOV dword ptr [EBP + -0x34],EDI
009a0cea : MOV word ptr [EBP + -0x44],AX
009a0cee : MOV dword ptr [EBP + -0x4],0xffffffff
009a0cf5 : CMP dword ptr [EBP + -0x14],EBX
009a0cf8 : JC 0x009a0d02
009a0cfa : MOV ECX,dword ptr [EBP + -0x28]
009a0cfd : CALL 0x006f04e0
009a0d02 : XOR ECX,ECX
009a0d04 : MOV dword ptr [EBP + -0x14],ESI
009a0d07 : MOV dword ptr [EBP + -0x18],EDI
009a0d0a : MOV word ptr [EBP + -0x28],CX
009a0d0e : MOV ECX,dword ptr [EBP + -0xc]
009a0d11 : MOV dword ptr FS:[0x0],ECX
009a0d18 : POP ECX
009a0d19 : POP EDI
009a0d1a : POP ESI
009a0d1b : POP EBX
009a0d1c : MOV ECX,dword ptr [EBP + -0x10]
009a0d1f : XOR ECX,EBP
009a0d21 : CALL 0x00633e6b
009a0d26 : MOV ESP,EBP
009a0d28 : POP EBP
009a0d29 : RET 0x14
