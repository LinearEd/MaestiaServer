PROGRAM  : Maestia.exe
FUNCTION : FUN_006bac40
ENTRY    : 006bac40
BODY     : [[006bac40, 006bae3c]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006bac40(int param_1,uint param_2,int *param_3)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int *piVar6;
  uint *puVar7;
  uint uVar8;
  int iVar9;
  ushort *puVar10;
  int local_18;
  int local_14;
  uint *local_10;
  uint local_c;
  undefined4 local_8;
  int local_4;
  
  local_8 = *(undefined4 *)(param_1 + 100);
  iVar5 = 0;
  local_18 = 0;
  if ((*(int *)(param_1 + 0x2cc) != 0) || (local_18 = FUN_006b8890(param_1,0), local_18 == 0)) {
    iVar9 = *(int *)(param_1 + 0x2cc);
    puVar7 = *(uint **)(iVar9 + 8);
    local_10 = puVar7;
    local_4 = iVar9;
    if (param_2 == *puVar7) {
      iVar5 = FUN_0068a220(local_8,4,0,*puVar7,0,&local_18);
      local_14 = iVar5;
      if (local_18 == 0) {
        local_c = 0;
        if (*puVar7 != 0) {
          piVar6 = (int *)(puVar7[3] + 8);
          iVar3 = iVar5 - (int)param_3;
          do {
            iVar9 = *param_3;
            iVar1 = piVar6[1];
            iVar5 = local_14;
            if ((iVar1 < iVar9) || (iVar9 < piVar6[-1])) goto LAB_006badae;
            iVar5 = *piVar6;
            if (iVar9 < iVar5) {
              iVar5 = FUN_00685d60(iVar9 - iVar5,0x10000,piVar6[-1] - iVar5);
              iVar5 = -iVar5;
LAB_006bad39:
              *(int *)(iVar3 + (int)param_3) = iVar5;
            }
            else {
              if (iVar1 != iVar5) {
                iVar5 = FUN_00685d60(iVar9 - iVar5,0x10000,iVar1 - iVar5);
                goto LAB_006bad39;
              }
              *(undefined4 *)(iVar3 + (int)param_3) = 0;
            }
            local_c = local_c + 1;
            param_3 = param_3 + 1;
            piVar6 = piVar6 + 6;
            puVar7 = local_10;
            iVar9 = local_4;
          } while (local_c < *local_10);
        }
        iVar5 = local_14;
        if (*(char *)(iVar9 + 0x10) == '\0') {
          FUN_006b83a0();
        }
        puVar10 = *(ushort **)(iVar9 + 0x14);
        if ((puVar10 != (ushort *)0x0) && (uVar4 = 0, *puVar7 != 0)) {
          do {
            uVar8 = 1;
            if (1 < *puVar10) {
              piVar6 = *(int **)(puVar10 + 2);
              iVar9 = *(int *)(iVar5 + uVar4 * 4);
              do {
                piVar6 = piVar6 + 2;
                if (iVar9 < *piVar6) {
                  iVar5 = *(int *)(puVar10 + 2);
                  piVar6 = (int *)(iVar5 + uVar8 * 8);
                  iVar3 = piVar6[-2];
                  uVar2 = FUN_00685d60(iVar9 - iVar3,0x10000,*piVar6 - iVar3,
                                       *(int *)(iVar5 + 4 + uVar8 * 8) -
                                       *(int *)(iVar5 + -4 + uVar8 * 8),0x10000);
                  iVar5 = FUN_00685d60(uVar2);
                  *(int *)(local_14 + uVar4 * 4) =
                       iVar5 + *(int *)(*(int *)(puVar10 + 2) + -4 + uVar8 * 8);
                  iVar5 = local_14;
                  break;
                }
                uVar8 = uVar8 + 1;
              } while (uVar8 < *puVar10);
            }
            uVar4 = uVar4 + 1;
            puVar10 = puVar10 + 4;
          } while (uVar4 < *local_10);
        }
        local_18 = FUN_006baac0(param_1,param_2,iVar5);
      }
    }
    else {
LAB_006badae:
      local_18 = 6;
    }
  }
  FUN_00687f30(local_8,iVar5);
  return local_18;
}



============================================================
DISASSEMBLY
============================================================
006bac40 : SUB ESP,0x18
006bac43 : PUSH EBX
006bac44 : MOV EBX,dword ptr [ESP + 0x20]
006bac48 : MOV EAX,dword ptr [EBX + 0x64]
006bac4b : PUSH EBP
006bac4c : XOR EBP,EBP
006bac4e : MOV dword ptr [ESP + 0x8],EBP
006bac52 : MOV dword ptr [ESP + 0x18],EAX
006bac56 : CMP dword ptr [EBX + 0x2cc],EBP
006bac5c : JNZ 0x006bac74
006bac5e : PUSH EBP
006bac5f : PUSH EBX
006bac60 : CALL 0x006b8890
006bac65 : ADD ESP,0x8
006bac68 : MOV dword ptr [ESP + 0x8],EAX
006bac6c : CMP EAX,EBP
006bac6e : JNZ 0x006bae25
006bac74 : PUSH ESI
006bac75 : PUSH EDI
006bac76 : MOV EDI,dword ptr [EBX + 0x2cc]
006bac7c : MOV ESI,dword ptr [EDI + 0x8]
006bac7f : MOV EAX,dword ptr [ESI]
006bac81 : MOV dword ptr [ESP + 0x24],EDI
006bac85 : MOV dword ptr [ESP + 0x18],ESI
006bac89 : CMP dword ptr [ESP + 0x30],EAX
006bac8d : JNZ 0x006badae
006bac93 : MOV EDX,dword ptr [ESP + 0x20]
006bac97 : LEA ECX,[ESP + 0x10]
006bac9b : PUSH ECX
006bac9c : PUSH 0x0
006bac9e : PUSH EAX
006bac9f : PUSH 0x0
006baca1 : PUSH 0x4
006baca3 : PUSH EDX
006baca4 : CALL 0x0068a220
006baca9 : ADD ESP,0x18
006bacac : CMP dword ptr [ESP + 0x10],0x0
006bacb1 : MOV EBP,EAX
006bacb3 : MOV dword ptr [ESP + 0x14],EBP
006bacb7 : JNZ 0x006bae23
006bacbd : CMP dword ptr [ESI],0x0
006bacc0 : MOV EAX,dword ptr [ESI + 0xc]
006bacc3 : MOV dword ptr [ESP + 0x1c],0x0
006baccb : JBE 0x006bad61
006bacd1 : MOV EDI,dword ptr [ESP + 0x34]
006bacd5 : MOV EBX,EBP
006bacd7 : LEA ESI,[EAX + 0x8]
006bacda : SUB EBX,EDI
006bacdc : LEA ESP,[ESP]
006bace0 : MOV EAX,dword ptr [EDI]
006bace2 : MOV ECX,dword ptr [ESI + 0x4]
006bace5 : CMP EAX,ECX
006bace7 : JG 0x006badae
006baced : MOV EDX,dword ptr [ESI + -0x4]
006bacf0 : CMP EAX,EDX
006bacf2 : JL 0x006badae
006bacf8 : MOV EBP,dword ptr [ESI]
006bacfa : CMP EAX,EBP
006bacfc : JGE 0x006bad17
006bacfe : MOV ECX,EBP
006bad00 : SUB EDX,ECX
006bad02 : PUSH EDX
006bad03 : SUB EAX,ECX
006bad05 : PUSH 0x10000
006bad0a : PUSH EAX
006bad0b : CALL 0x00685d60
006bad10 : ADD ESP,0xc
006bad13 : NEG EAX
006bad15 : JMP 0x006bad39
006bad17 : CMP ECX,EBP
006bad19 : JNZ 0x006bad24
006bad1b : MOV dword ptr [EBX + EDI*0x1],0x0
006bad22 : JMP 0x006bad3c
006bad24 : MOV EDX,EBP
006bad26 : SUB ECX,EDX
006bad28 : PUSH ECX
006bad29 : SUB EAX,EDX
006bad2b : PUSH 0x10000
006bad30 : PUSH EAX
006bad31 : CALL 0x00685d60
006bad36 : ADD ESP,0xc
006bad39 : MOV dword ptr [EBX + EDI*0x1],EAX
006bad3c : MOV EAX,dword ptr [ESP + 0x1c]
006bad40 : MOV ECX,dword ptr [ESP + 0x18]
006bad44 : MOV EBP,dword ptr [ESP + 0x14]
006bad48 : INC EAX
006bad49 : ADD EDI,0x4
006bad4c : ADD ESI,0x18
006bad4f : MOV dword ptr [ESP + 0x1c],EAX
006bad53 : CMP EAX,dword ptr [ECX]
006bad55 : JC 0x006bace0
006bad57 : MOV EDI,dword ptr [ESP + 0x24]
006bad5b : MOV EBX,dword ptr [ESP + 0x2c]
006bad5f : MOV ESI,ECX
006bad61 : CMP byte ptr [EDI + 0x10],0x0
006bad65 : JNZ 0x006bad6e
006bad67 : MOV EAX,EBX
006bad69 : CALL 0x006b83a0
006bad6e : MOV EDI,dword ptr [EDI + 0x14]
006bad71 : TEST EDI,EDI
006bad73 : JZ 0x006bae10
006bad79 : XOR EBX,EBX
006bad7b : CMP dword ptr [ESI],EBX
006bad7d : JBE 0x006bae0c
006bad83 : MOVZX EDX,word ptr [EDI]
006bad86 : MOV ESI,0x1
006bad8b : CMP EDX,ESI
006bad8d : JBE 0x006badfc
006bad8f : MOV EAX,dword ptr [EDI + 0x4]
006bad92 : MOV ECX,dword ptr [EBP + EBX*0x4]
006bad96 : ADD EAX,0x8
006bad99 : LEA ESP,[ESP]
006bada0 : CMP ECX,dword ptr [EAX]
006bada2 : JL 0x006badb8
006bada4 : INC ESI
006bada5 : ADD EAX,0x8
006bada8 : CMP ESI,EDX
006badaa : JC 0x006bada0
006badac : JMP 0x006badfc
006badae : MOV dword ptr [ESP + 0x10],0x6
006badb6 : JMP 0x006bae23
006badb8 : MOV EDX,dword ptr [EDI + 0x4]
006badbb : MOV EBP,dword ptr [EDX + ESI*0x8 + 0x4]
006badbf : SUB EBP,dword ptr [EDX + ESI*0x8 + -0x4]
006badc3 : LEA EAX,[EDX + ESI*0x8]
006badc6 : MOV EDX,dword ptr [EAX + -0x8]
006badc9 : MOV EAX,dword ptr [EAX]
006badcb : PUSH 0x10000
006badd0 : PUSH EBP
006badd1 : SUB EAX,EDX
006badd3 : PUSH EAX
006badd4 : SUB ECX,EDX
006badd6 : PUSH 0x10000
006baddb : PUSH ECX
006baddc : CALL 0x00685d60
006bade1 : ADD ESP,0xc
006bade4 : PUSH EAX
006bade5 : CALL 0x00685d60
006badea : MOV ECX,dword ptr [EDI + 0x4]
006baded : MOV EBP,dword ptr [ESP + 0x20]
006badf1 : ADD ESP,0xc
006badf4 : ADD EAX,dword ptr [ECX + ESI*0x8 + -0x4]
006badf8 : MOV dword ptr [EBP + EBX*0x4],EAX
006badfc : MOV EDX,dword ptr [ESP + 0x18]
006bae00 : INC EBX
006bae01 : ADD EDI,0x8
006bae04 : CMP EBX,dword ptr [EDX]
006bae06 : JC 0x006bad83
006bae0c : MOV EBX,dword ptr [ESP + 0x2c]
006bae10 : MOV EAX,dword ptr [ESP + 0x30]
006bae14 : PUSH EBP
006bae15 : PUSH EAX
006bae16 : PUSH EBX
006bae17 : CALL 0x006baac0
006bae1c : ADD ESP,0xc
006bae1f : MOV dword ptr [ESP + 0x10],EAX
006bae23 : POP EDI
006bae24 : POP ESI
006bae25 : MOV ECX,dword ptr [ESP + 0x18]
006bae29 : PUSH EBP
006bae2a : PUSH ECX
006bae2b : CALL 0x00687f30
006bae30 : MOV EAX,dword ptr [ESP + 0x10]
006bae34 : ADD ESP,0x8
006bae37 : POP EBP
006bae38 : POP EBX
006bae39 : ADD ESP,0x18
006bae3c : RET
