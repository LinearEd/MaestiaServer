PROGRAM  : Maestia.exe
FUNCTION : FUN_006a9c60
ENTRY    : 006a9c60
BODY     : [[006a9c60, 006a9d83]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a9c60(int *param_1,int *param_2)

{
  undefined4 uVar1;
  uint in_EAX;
  int iVar2;
  uint uVar3;
  uint uVar4;
  undefined4 *unaff_ESI;
  
  if ((unaff_ESI == (undefined4 *)0x0) || ((uint)unaff_ESI[2] <= in_EAX)) {
    return 6;
  }
  iVar2 = unaff_ESI[6];
  uVar1 = *unaff_ESI;
  if (iVar2 == 0) {
    iVar2 = FUN_006877c0(uVar1,unaff_ESI[1] + 3 + *(byte *)(unaff_ESI + 3) * in_EAX);
    if (iVar2 != 0) {
      return iVar2;
    }
    uVar3 = FUN_006a9870();
    if (uVar3 != 0) {
      do {
        in_EAX = in_EAX + 1;
        uVar4 = FUN_006a9870();
        if (uVar4 != 0) goto LAB_006a9d25;
      } while (in_EAX < (uint)unaff_ESI[2]);
    }
  }
  else {
    uVar3 = *(uint *)(iVar2 + in_EAX * 4);
    iVar2 = iVar2 + in_EAX * 4;
    if (uVar3 != 0) {
      do {
        uVar4 = *(uint *)(iVar2 + 4);
        iVar2 = iVar2 + 4;
        in_EAX = in_EAX + 1;
        if (uVar4 != 0) break;
      } while (in_EAX < (uint)unaff_ESI[2]);
LAB_006a9d25:
      if (uVar3 < uVar4) {
        *param_2 = uVar4 - uVar3;
        if (unaff_ESI[7] != 0) {
          *param_1 = unaff_ESI[7] + -1 + uVar3;
          return 0;
        }
        iVar2 = FUN_006877c0(uVar1,unaff_ESI[4] + -1 + uVar3);
        if (iVar2 != 0) {
          return iVar2;
        }
        iVar2 = FUN_0068a1f0(uVar1,uVar4 - uVar3,param_1);
        return iVar2;
      }
    }
  }
  *param_1 = 0;
  *param_2 = 0;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006a9c60 : SUB ESP,0x8
006a9c63 : PUSH EDI
006a9c64 : MOV EDI,EAX
006a9c66 : MOV dword ptr [ESP + 0x4],0x0
006a9c6e : TEST ESI,ESI
006a9c70 : JZ 0x006a9d7a
006a9c76 : MOV EAX,dword ptr [ESI + 0x8]
006a9c79 : CMP EAX,EDI
006a9c7b : JBE 0x006a9d7a
006a9c81 : MOV ECX,dword ptr [ESI + 0x18]
006a9c84 : PUSH EBX
006a9c85 : MOV EBX,dword ptr [ESI]
006a9c87 : PUSH EBP
006a9c88 : MOV dword ptr [ESP + 0x10],EBX
006a9c8c : TEST ECX,ECX
006a9c8e : JNZ 0x006a9d06
006a9c90 : MOVZX EAX,byte ptr [ESI + 0xc]
006a9c94 : MOV ECX,dword ptr [ESI + 0x4]
006a9c97 : IMUL EAX,EDI
006a9c9a : LEA EDX,[ECX + EAX*0x1 + 0x3]
006a9c9e : PUSH EDX
006a9c9f : PUSH EBX
006a9ca0 : CALL 0x006877c0
006a9ca5 : ADD ESP,0x8
006a9ca8 : MOV dword ptr [ESP + 0xc],EAX
006a9cac : TEST EAX,EAX
006a9cae : JNZ 0x006a9cff
006a9cb0 : LEA EBX,[ESP + 0xc]
006a9cb4 : MOV EAX,ESI
006a9cb6 : CALL 0x006a9870
006a9cbb : MOV EBP,EAX
006a9cbd : MOV EAX,dword ptr [ESP + 0xc]
006a9cc1 : TEST EAX,EAX
006a9cc3 : JNZ 0x006a9cff
006a9cc5 : TEST EBP,EBP
006a9cc7 : JZ 0x006a9ce7
006a9cc9 : LEA ESP,[ESP]
006a9cd0 : LEA EBX,[ESP + 0xc]
006a9cd4 : MOV EAX,ESI
006a9cd6 : INC EDI
006a9cd7 : CALL 0x006a9870
006a9cdc : MOV ECX,EAX
006a9cde : TEST ECX,ECX
006a9ce0 : JNZ 0x006a9d21
006a9ce2 : CMP EDI,dword ptr [ESI + 0x8]
006a9ce5 : JC 0x006a9cd0
006a9ce7 : MOV EAX,dword ptr [ESP + 0x18]
006a9ceb : MOV ECX,dword ptr [ESP + 0x1c]
006a9cef : MOV dword ptr [EAX],0x0
006a9cf5 : MOV EAX,dword ptr [ESP + 0xc]
006a9cf9 : MOV dword ptr [ECX],0x0
006a9cff : POP EBP
006a9d00 : POP EBX
006a9d01 : POP EDI
006a9d02 : ADD ESP,0x8
006a9d05 : RET
006a9d06 : MOV EBP,dword ptr [ECX + EDI*0x4]
006a9d09 : LEA EDX,[ECX + EDI*0x4]
006a9d0c : TEST EBP,EBP
006a9d0e : JZ 0x006a9ce7
006a9d10 : MOV ECX,dword ptr [EDX + 0x4]
006a9d13 : ADD EDX,0x4
006a9d16 : INC EDI
006a9d17 : TEST ECX,ECX
006a9d19 : JNZ 0x006a9d25
006a9d1b : CMP EDI,EAX
006a9d1d : JC 0x006a9d10
006a9d1f : JMP 0x006a9d25
006a9d21 : MOV EBX,dword ptr [ESP + 0x10]
006a9d25 : CMP ECX,EBP
006a9d27 : JBE 0x006a9ce7
006a9d29 : MOV EAX,dword ptr [ESP + 0x1c]
006a9d2d : MOV EDI,ECX
006a9d2f : SUB EDI,EBP
006a9d31 : MOV dword ptr [EAX],EDI
006a9d33 : MOV ECX,dword ptr [ESI + 0x1c]
006a9d36 : TEST ECX,ECX
006a9d38 : JZ 0x006a9d4f
006a9d3a : MOV EDX,dword ptr [ESP + 0x18]
006a9d3e : MOV EAX,dword ptr [ESP + 0xc]
006a9d42 : LEA ECX,[ECX + EBP*0x1 + -0x1]
006a9d46 : POP EBP
006a9d47 : POP EBX
006a9d48 : MOV dword ptr [EDX],ECX
006a9d4a : POP EDI
006a9d4b : ADD ESP,0x8
006a9d4e : RET
006a9d4f : MOV EAX,dword ptr [ESI + 0x10]
006a9d52 : LEA ECX,[EAX + EBP*0x1 + -0x1]
006a9d56 : PUSH ECX
006a9d57 : PUSH EBX
006a9d58 : CALL 0x006877c0
006a9d5d : ADD ESP,0x8
006a9d60 : TEST EAX,EAX
006a9d62 : JNZ 0x006a9cff
006a9d64 : MOV EDX,dword ptr [ESP + 0x18]
006a9d68 : PUSH EDX
006a9d69 : PUSH EDI
006a9d6a : PUSH EBX
006a9d6b : CALL 0x0068a1f0
006a9d70 : ADD ESP,0xc
006a9d73 : POP EBP
006a9d74 : POP EBX
006a9d75 : POP EDI
006a9d76 : ADD ESP,0x8
006a9d79 : RET
006a9d7a : MOV EAX,0x6
006a9d7f : POP EDI
006a9d80 : ADD ESP,0x8
006a9d83 : RET
