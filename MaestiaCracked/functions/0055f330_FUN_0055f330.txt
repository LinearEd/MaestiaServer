PROGRAM  : Maestia.exe
FUNCTION : FUN_0055f330
ENTRY    : 0055f330
BODY     : [[0055f330, 0055f48c]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0055f330(int param_1,int param_2)

{
  undefined2 uVar1;
  int *piVar2;
  undefined4 in_ECX;
  
  FUN_0053c1c0(in_ECX);
  if ((*(byte *)(param_2 + 0x16) & 1) != 0) {
    *(ushort *)(param_1 + 0x16) =
         ((*(ushort *)(param_2 + 0x16) >> 9 & 3) << 9 ^ *(ushort *)(param_1 + 0x16)) & 0x600 ^
         *(ushort *)(param_1 + 0x16) | 1;
  }
  if ((char)*(ushort *)(param_2 + 0x16) < '\0') {
    if ((*(ushort *)(param_2 + 0x16) & 0x8000) == 0) {
      *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) & 0x7fff;
    }
    else {
      *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 0x8000;
    }
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 0x80;
  }
  if ((*(byte *)(param_2 + 0x16) >> 1 & 1) != 0) {
    uVar1 = *(undefined2 *)(param_2 + 0xc);
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 2;
    *(undefined2 *)(param_1 + 0xc) = uVar1;
  }
  if ((*(byte *)(param_2 + 0x16) >> 2 & 1) != 0) {
    uVar1 = *(undefined2 *)(param_2 + 0xe);
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 4;
    *(undefined2 *)(param_1 + 0xe) = uVar1;
  }
  if ((*(byte *)(param_2 + 0x16) >> 3 & 1) != 0) {
    uVar1 = *(undefined2 *)(param_2 + 0x10);
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 8;
    *(undefined2 *)(param_1 + 0x10) = uVar1;
  }
  if ((*(byte *)(param_2 + 0x16) >> 4 & 1) != 0) {
    uVar1 = *(undefined2 *)(param_2 + 0x12);
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 0x10;
    *(undefined2 *)(param_1 + 0x12) = uVar1;
  }
  if ((*(byte *)(param_2 + 0x16) >> 5 & 1) != 0) {
    uVar1 = *(undefined2 *)(param_2 + 0x14);
    *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 0x20;
    *(undefined2 *)(param_1 + 0x14) = uVar1;
  }
  if ((*(byte *)(param_2 + 0x16) >> 6 & 1) != 0) {
    piVar2 = *(int **)(param_2 + 8);
    if ((piVar2 == (int *)0x0) || (*piVar2 == 0)) {
      FUN_00515cf0(*(undefined4 *)(param_1 + 8));
      *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) & 0xffbf;
      *(undefined4 *)(param_1 + 8) = 0;
    }
    else {
      FUN_0055ed90(piVar2);
      *(ushort *)(param_1 + 0x16) = *(ushort *)(param_1 + 0x16) | 0x40;
    }
  }
  if ((*(ushort *)(param_2 + 0x16) >> 8 & 1) != 0) {
    *(ushort *)(param_1 + 0x16) =
         ((*(ushort *)(param_2 + 0x16) >> 0xb & 3) << 0xb ^ *(ushort *)(param_1 + 0x16)) & 0x1800 ^
         *(ushort *)(param_1 + 0x16) | 0x100;
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
0055f330 : PUSH ESI
0055f331 : MOV ESI,dword ptr [ESP + 0x8]
0055f335 : PUSH EDI
0055f336 : PUSH ECX
0055f337 : MOV ECX,ESI
0055f339 : CALL 0x0053c1c0
0055f33e : MOV EDI,dword ptr [ESP + 0x10]
0055f342 : TEST byte ptr [EDI + 0x16],0x1
0055f346 : JZ 0x0055f36d
0055f348 : MOVZX EAX,word ptr [EDI + 0x16]
0055f34c : SHR EAX,0x9
0055f34f : AND EAX,0x3
0055f352 : SHL EAX,0x9
0055f355 : XOR AX,word ptr [ESI + 0x16]
0055f359 : MOV ECX,0x600
0055f35e : AND AX,CX
0055f361 : XOR AX,word ptr [ESI + 0x16]
0055f365 : OR AX,0x1
0055f369 : MOV word ptr [ESI + 0x16],AX
0055f36d : MOVZX EAX,word ptr [EDI + 0x16]
0055f371 : MOV DL,AL
0055f373 : SHR DL,0x7
0055f376 : TEST DL,0x1
0055f379 : JZ 0x0055f39f
0055f37b : TEST EAX,0x8000
0055f380 : JZ 0x0055f38d
0055f382 : MOV EAX,0x8000
0055f387 : OR word ptr [ESI + 0x16],AX
0055f38b : JMP 0x0055f396
0055f38d : MOV ECX,0x7fff
0055f392 : AND word ptr [ESI + 0x16],CX
0055f396 : MOV EDX,0x80
0055f39b : OR word ptr [ESI + 0x16],DX
0055f39f : MOV AL,byte ptr [EDI + 0x16]
0055f3a2 : SHR AL,0x1
0055f3a4 : TEST AL,0x1
0055f3a6 : JZ 0x0055f3b5
0055f3a8 : MOVZX EAX,word ptr [EDI + 0xc]
0055f3ac : OR word ptr [ESI + 0x16],0x2
0055f3b1 : MOV word ptr [ESI + 0xc],AX
0055f3b5 : MOV CL,byte ptr [EDI + 0x16]
0055f3b8 : SHR CL,0x2
0055f3bb : TEST CL,0x1
0055f3be : JZ 0x0055f3cd
0055f3c0 : MOVSX EAX,word ptr [EDI + 0xe]
0055f3c4 : OR word ptr [ESI + 0x16],0x4
0055f3c9 : MOV word ptr [ESI + 0xe],AX
0055f3cd : MOV DL,byte ptr [EDI + 0x16]
0055f3d0 : SHR DL,0x3
0055f3d3 : TEST DL,0x1
0055f3d6 : JZ 0x0055f3e5
0055f3d8 : MOVSX EAX,word ptr [EDI + 0x10]
0055f3dc : OR word ptr [ESI + 0x16],0x8
0055f3e1 : MOV word ptr [ESI + 0x10],AX
0055f3e5 : MOV AL,byte ptr [EDI + 0x16]
0055f3e8 : SHR AL,0x4
0055f3eb : TEST AL,0x1
0055f3ed : JZ 0x0055f3fc
0055f3ef : MOVZX EAX,word ptr [EDI + 0x12]
0055f3f3 : OR word ptr [ESI + 0x16],0x10
0055f3f8 : MOV word ptr [ESI + 0x12],AX
0055f3fc : MOV CL,byte ptr [EDI + 0x16]
0055f3ff : SHR CL,0x5
0055f402 : TEST CL,0x1
0055f405 : JZ 0x0055f414
0055f407 : MOVZX EAX,word ptr [EDI + 0x14]
0055f40b : OR word ptr [ESI + 0x16],0x20
0055f410 : MOV word ptr [ESI + 0x14],AX
0055f414 : MOV DL,byte ptr [EDI + 0x16]
0055f417 : SHR DL,0x6
0055f41a : TEST DL,0x1
0055f41d : JZ 0x0055f453
0055f41f : MOV EAX,dword ptr [EDI + 0x8]
0055f422 : TEST EAX,EAX
0055f424 : JZ 0x0055f43a
0055f426 : CMP dword ptr [EAX],0x0
0055f429 : JBE 0x0055f43a
0055f42b : PUSH EAX
0055f42c : MOV ECX,ESI
0055f42e : CALL 0x0055ed90
0055f433 : OR word ptr [ESI + 0x16],0x40
0055f438 : JMP 0x0055f453
0055f43a : MOV EAX,dword ptr [ESI + 0x8]
0055f43d : PUSH EAX
0055f43e : CALL 0x00515cf0
0055f443 : MOV EAX,0xffbf
0055f448 : AND word ptr [ESI + 0x16],AX
0055f44c : MOV dword ptr [ESI + 0x8],0x0
0055f453 : MOVZX EAX,word ptr [EDI + 0x16]
0055f457 : MOV ECX,EAX
0055f459 : SHR ECX,0x8
0055f45c : TEST CL,0x1
0055f45f : JZ 0x0055f486
0055f461 : SHR EAX,0xb
0055f464 : AND EAX,0x3
0055f467 : SHL EAX,0xb
0055f46a : XOR AX,word ptr [ESI + 0x16]
0055f46e : MOV EDX,0x1800
0055f473 : AND AX,DX
0055f476 : XOR AX,word ptr [ESI + 0x16]
0055f47a : MOV ECX,0x100
0055f47f : OR AX,CX
0055f482 : MOV word ptr [ESI + 0x16],AX
0055f486 : POP EDI
0055f487 : MOV EAX,ESI
0055f489 : POP ESI
0055f48a : RET 0x8
