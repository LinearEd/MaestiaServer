PROGRAM  : Maestia.exe
FUNCTION : FUN_008bffe0
ENTRY    : 008bffe0
BODY     : [[008bffe0, 008c0018] [008c0020, 008c01f9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008bffe0(void)

{
  int *piVar1;
  int *piVar2;
  uint uVar3;
  int iVar4;
  undefined1 **ppuVar5;
  int *in_ECX;
  undefined1 auStack_90 [4];
  uint uStack_8c;
  int *piStack_88;
  char *pcStack_84;
  int *piStack_80;
  char *pcStack_7c;
  char *pcStack_78;
  char *pcStack_74;
  undefined1 **ppuStack_70;
  uint uStack_6c;
  uint local_44;
  int local_40;
  undefined1 *local_38;
  char *local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4a110;
  local_10 = ExceptionList;
  uStack_6c = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34 = (char *)0x0;
  local_14 = uStack_6c;
  do {
    if (*(char *)((int)in_ECX + (int)(local_34 + 0x60)) != '\0') {
      ppuStack_70 = (undefined1 **)0x8c002e;
      FUN_008bf1c0();
    }
    ppuStack_70 = (undefined1 **)0x0;
    pcStack_78 = (char *)0x8c003f;
    pcStack_74 = local_34;
    piVar2 = (int *)(**(code **)(*in_ECX + 0x74))();
    if (piVar2 != (int *)0x0) {
      local_38 = (undefined1 *)piVar2[4];
      ppuStack_70 = &local_38;
      pcStack_74 = (char *)0x8c0064;
      FUN_004437f0();
      if ((local_40 != *(int *)(DAT_00d7c54c + 0x44)) &&
         (iVar4 = *(int *)(local_40 + 0x10), iVar4 != 0)) {
        local_18 = 7;
        local_1c = 0;
        local_2c = 0;
        local_8 = 0;
        ppuStack_70 = (undefined1 **)local_30;
        pcStack_74 = (char *)CONCAT22(*(undefined2 *)(iVar4 + 4),*(undefined2 *)(iVar4 + 6));
        pcStack_78 = (char *)0x8c00b1;
        (**(code **)(*in_ECX + 0x58))();
        iVar4 = *DAT_00da9894;
        if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
          piVar1 = *(int **)(iVar4 + 0x114);
          ppuStack_70 = (undefined1 **)0x8c00da;
          ppuStack_70 = (undefined1 **)FUN_008bf2b0();
          pcStack_74 = (char *)0x8c00e4;
          uVar3 = (**(code **)(*piVar2 + 0x40))();
          pcStack_74 = (char *)(uVar3 & 0xffff);
          local_38 = auStack_90;
          pcStack_78 = (char *)0x7;
          pcStack_7c = (char *)0x0;
          uStack_8c = uStack_8c & 0xffff0000;
          FUN_00405eb0(local_30,0,0xffffffff);
          local_8 = local_8 & 0xffffff00;
          iVar4 = FUN_008f75f0();
          local_8._0_1_ = 2;
          if (*(uint *)(iVar4 + 0x18) < 8) {
            pcStack_78 = (char *)(iVar4 + 4);
          }
          else {
            pcStack_78 = *(char **)(iVar4 + 4);
          }
          pcStack_7c = local_34;
          piStack_80 = (int *)0xc4ead8;
          pcStack_84 = "InsertSpecialHalidom";
          uStack_8c = 0x8c0147;
          piStack_88 = piVar1;
          (**(code **)(*piVar1 + 4))();
          local_8 = (uint)local_8._1_3_ << 8;
          if (7 < local_44) {
                    /* WARNING: Subroutine does not return */
            ppuStack_70 = (undefined1 **)0x8c015b;
            FUN_006f04e0();
          }
          local_44 = 7;
        }
        ppuStack_70 = (undefined1 **)0x8c0175;
        ppuVar5 = (undefined1 **)FUN_00a08b70();
        iVar4 = *DAT_00da9894;
        if ((iVar4 != 0) && (*(int *)(iVar4 + 0x114) != 0)) {
          piStack_80 = *(int **)(iVar4 + 0x114);
          pcStack_74 = local_34;
          pcStack_78 = "%d,%d";
          pcStack_7c = "SetEquipSpecialHalidomQuality";
          pcStack_84 = (char *)0x8c01a6;
          ppuStack_70 = ppuVar5;
          (**(code **)(*piStack_80 + 4))();
        }
        local_8 = 0xffffffff;
        if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
          ppuStack_70 = (undefined1 **)0x8c01be;
          FUN_006f04e0();
        }
        local_18 = 7;
        local_1c = 0;
        local_2c = 0;
      }
    }
    local_34 = local_34 + 1;
    if (2 < (int)local_34) {
      ExceptionList = local_10;
      __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
      return;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
008bffe0 : PUSH EBP
008bffe1 : MOV EBP,ESP
008bffe3 : PUSH -0x1
008bffe5 : PUSH 0xb4a110
008bffea : MOV EAX,FS:[0x0]
008bfff0 : PUSH EAX
008bfff1 : SUB ESP,0x4c
008bfff4 : MOV EAX,[0x00d66fa0]
008bfff9 : XOR EAX,EBP
008bfffb : MOV dword ptr [EBP + -0x10],EAX
008bfffe : PUSH EBX
008bffff : PUSH ESI
008c0000 : PUSH EDI
008c0001 : PUSH EAX
008c0002 : LEA EAX,[EBP + -0xc]
008c0005 : MOV FS:[0x0],EAX
008c000b : XOR EBX,EBX
008c000d : MOV EDI,ECX
008c000f : XOR ESI,ESI
008c0011 : MOV dword ptr [EBP + -0x38],EDI
008c0014 : MOV dword ptr [EBP + -0x30],ESI
008c0017 : JMP 0x008c0023
008c0020 : MOV ESI,dword ptr [EBP + -0x30]
008c0023 : CMP byte ptr [EDI + ESI*0x1 + 0x60],BL
008c0027 : JZ 0x008c0034
008c0029 : CALL 0x008bf1c0
008c002e : MOV EDI,dword ptr [EBP + -0x38]
008c0031 : MOV ESI,dword ptr [EBP + -0x30]
008c0034 : MOV EAX,dword ptr [EDI]
008c0036 : MOV EDX,dword ptr [EAX + 0x74]
008c0039 : PUSH EBX
008c003a : PUSH ESI
008c003b : MOV ECX,EDI
008c003d : CALL EDX
008c003f : MOV ESI,EAX
008c0041 : CMP ESI,EBX
008c0043 : JZ 0x008c01ce
008c0049 : MOV EAX,dword ptr [ESI + 0x10]
008c004c : LEA ECX,[EBP + -0x34]
008c004f : PUSH ECX
008c0050 : MOV ECX,dword ptr [0x00d7c54c]
008c0056 : MOV dword ptr [EBP + -0x34],EAX
008c0059 : ADD ECX,0x40
008c005c : LEA EAX,[EBP + -0x3c]
008c005f : CALL 0x004437f0
008c0064 : MOV EDX,dword ptr [0x00d7c54c]
008c006a : MOV EAX,dword ptr [EDX + 0x44]
008c006d : MOV ECX,dword ptr [EBP + -0x3c]
008c0070 : CMP ECX,EAX
008c0072 : JZ 0x008c01ce
008c0078 : MOV EAX,dword ptr [ECX + 0x10]
008c007b : CMP EAX,EBX
008c007d : JZ 0x008c01ce
008c0083 : XOR ECX,ECX
008c0085 : MOV dword ptr [EBP + -0x14],0x7
008c008c : MOV dword ptr [EBP + -0x18],EBX
008c008f : MOV word ptr [EBP + -0x28],CX
008c0093 : MOV dword ptr [EBP + -0x4],EBX
008c0096 : MOV EDX,dword ptr [EDI]
008c0098 : MOV EDX,dword ptr [EDX + 0x58]
008c009b : LEA ECX,[EBP + -0x2c]
008c009e : PUSH ECX
008c009f : MOVZX ECX,word ptr [EAX + 0x4]
008c00a3 : MOVZX EAX,word ptr [EAX + 0x6]
008c00a7 : SHL ECX,0x10
008c00aa : OR ECX,EAX
008c00ac : PUSH ECX
008c00ad : MOV ECX,EDI
008c00af : CALL EDX
008c00b1 : MOV EAX,[0x00da9894]
008c00b6 : MOV EAX,dword ptr [EAX]
008c00b8 : CMP EAX,EBX
008c00ba : JZ 0x008c016e
008c00c0 : CMP dword ptr [EAX + 0x114],EBX
008c00c6 : JZ 0x008c016e
008c00cc : MOV EDI,dword ptr [EAX + 0x114]
008c00d2 : MOV EAX,dword ptr [ESI + 0x10]
008c00d5 : CALL 0x008bf2b0
008c00da : MOV EDX,dword ptr [ESI]
008c00dc : PUSH EAX
008c00dd : MOV EAX,dword ptr [EDX + 0x40]
008c00e0 : MOV ECX,ESI
008c00e2 : CALL EAX
008c00e4 : MOVZX ECX,AX
008c00e7 : PUSH ECX
008c00e8 : SUB ESP,0x1c
008c00eb : MOV ECX,ESP
008c00ed : MOV dword ptr [EBP + -0x34],ESP
008c00f0 : PUSH -0x1
008c00f2 : PUSH EBX
008c00f3 : LEA EAX,[EBP + -0x2c]
008c00f6 : XOR EDX,EDX
008c00f8 : MOV dword ptr [ECX + 0x18],0x7
008c00ff : MOV dword ptr [ECX + 0x14],EBX
008c0102 : PUSH EAX
008c0103 : MOV word ptr [ECX + 0x4],DX
008c0107 : CALL 0x00405eb0
008c010c : MOV byte ptr [EBP + -0x4],0x1
008c0110 : MOV byte ptr [EBP + -0x4],BL
008c0113 : LEA ECX,[EBP + -0x58]
008c0116 : CALL 0x008f75f0
008c011b : ADD ESP,0x1c
008c011e : MOV byte ptr [EBP + -0x4],0x2
008c0122 : CMP dword ptr [EAX + 0x18],0x8
008c0126 : JC 0x008c012d
008c0128 : MOV EAX,dword ptr [EAX + 0x4]
008c012b : JMP 0x008c0130
008c012d : ADD EAX,0x4
008c0130 : MOV EDX,dword ptr [EBP + -0x30]
008c0133 : MOV ECX,dword ptr [EDI]
008c0135 : PUSH EAX
008c0136 : MOV EAX,dword ptr [ECX + 0x4]
008c0139 : PUSH EDX
008c013a : PUSH 0xc4ead8
008c013f : PUSH 0xc4eae8
008c0144 : PUSH EDI
008c0145 : CALL EAX
008c0147 : ADD ESP,0x1c
008c014a : MOV byte ptr [EBP + -0x4],BL
008c014d : CMP dword ptr [EBP + -0x40],0x8
008c0151 : JC 0x008c015b
008c0153 : MOV ECX,dword ptr [EBP + -0x54]
008c0156 : CALL 0x006f04e0
008c015b : MOV EDI,dword ptr [EBP + -0x38]
008c015e : XOR ECX,ECX
008c0160 : MOV dword ptr [EBP + -0x40],0x7
008c0167 : MOV dword ptr [EBP + -0x44],EBX
008c016a : MOV word ptr [EBP + -0x54],CX
008c016e : MOV ECX,ESI
008c0170 : CALL 0x00a08b70
008c0175 : MOV EDX,dword ptr [0x00da9894]
008c017b : MOV ECX,dword ptr [EDX]
008c017d : CMP ECX,EBX
008c017f : JZ 0x008c01a9
008c0181 : CMP dword ptr [ECX + 0x114],EBX
008c0187 : JZ 0x008c01a9
008c0189 : MOV ECX,dword ptr [ECX + 0x114]
008c018f : MOV EDX,dword ptr [ECX]
008c0191 : PUSH EAX
008c0192 : MOV EAX,dword ptr [EBP + -0x30]
008c0195 : PUSH EAX
008c0196 : PUSH 0xc4eb00
008c019b : PUSH 0xc4eb08
008c01a0 : PUSH ECX
008c01a1 : MOV ECX,dword ptr [EDX + 0x4]
008c01a4 : CALL ECX
008c01a6 : ADD ESP,0x14
008c01a9 : MOV dword ptr [EBP + -0x4],0xffffffff
008c01b0 : CMP dword ptr [EBP + -0x14],0x8
008c01b4 : JC 0x008c01be
008c01b6 : MOV ECX,dword ptr [EBP + -0x28]
008c01b9 : CALL 0x006f04e0
008c01be : XOR EDX,EDX
008c01c0 : MOV dword ptr [EBP + -0x14],0x7
008c01c7 : MOV dword ptr [EBP + -0x18],EBX
008c01ca : MOV word ptr [EBP + -0x28],DX
008c01ce : MOV EAX,dword ptr [EBP + -0x30]
008c01d1 : INC EAX
008c01d2 : CMP EAX,0x3
008c01d5 : MOV dword ptr [EBP + -0x30],EAX
008c01d8 : JL 0x008c0020
008c01de : MOV ECX,dword ptr [EBP + -0xc]
008c01e1 : MOV dword ptr FS:[0x0],ECX
008c01e8 : POP ECX
008c01e9 : POP EDI
008c01ea : POP ESI
008c01eb : POP EBX
008c01ec : MOV ECX,dword ptr [EBP + -0x10]
008c01ef : XOR ECX,EBP
008c01f1 : CALL 0x00633e6b
008c01f6 : MOV ESP,EBP
008c01f8 : POP EBP
008c01f9 : RET
