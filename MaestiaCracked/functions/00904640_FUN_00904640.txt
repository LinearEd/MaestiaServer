PROGRAM  : Maestia.exe
FUNCTION : FUN_00904640
ENTRY    : 00904640
BODY     : [[00904640, 0090476d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00904640(undefined4 param_1,undefined4 param_2)

{
  uint uVar1;
  int iVar2;
  char cVar3;
  ushort uVar4;
  SHORT SVar5;
  undefined2 uVar6;
  int *piVar7;
  int *piVar8;
  int iVar9;
  int *in_ECX;
  uint uVar10;
  undefined4 local_c;
  undefined4 local_8;
  
  piVar7 = (int *)(**(code **)(*in_ECX + 0x74))(param_1,param_2);
  if (piVar7 != (int *)0x0) {
    uVar1 = *(uint *)(*DAT_00da9894 + 0x40);
    uVar10 = 0;
    if (uVar1 != 0) {
      while ((((piVar8 = (int *)FUN_008eb810(), piVar8 == (int *)0x0 || ((char)piVar8[0x19] == '\0')
               ) || (cVar3 = (**(code **)(*piVar8 + 0x9c))(&local_c,&local_8), cVar3 == '\0')) ||
             (((short)local_c == -1 && ((short)local_8 == -1))))) {
        uVar10 = uVar10 + 1;
        if (uVar1 <= uVar10) {
          return;
        }
      }
      uVar4 = (**(code **)(*piVar7 + 0x40))();
      if (((1 < uVar4) &&
          ((SVar5 = GetKeyState(0x11), -1 < SVar5 &&
           (iVar9 = (**(code **)(*piVar7 + 0x20))(), iVar9 != 0)))) &&
         ((*(byte *)(piVar7 + 0x48) & 1) == 0)) {
        iVar9 = in_ECX[0xb];
        iVar2 = piVar8[0xb];
        uVar6 = (**(code **)(*piVar7 + 0x40))();
        FUN_00904db0(iVar9,param_1,param_2,iVar2,local_c,local_8,uVar6);
        return;
      }
      FUN_008efa90(in_ECX[0xb],param_1,param_2,piVar8[0xb],local_c,local_8);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00904640 : PUSH EBP
00904641 : MOV EBP,ESP
00904643 : SUB ESP,0x10
00904646 : MOV EDX,dword ptr [EBP + 0xc]
00904649 : MOV EAX,dword ptr [ECX]
0090464b : MOV EAX,dword ptr [EAX + 0x74]
0090464e : PUSH EBX
0090464f : PUSH EDX
00904650 : MOV EDX,dword ptr [EBP + 0x8]
00904653 : PUSH EDX
00904654 : MOV dword ptr [EBP + -0xc],ECX
00904657 : CALL EAX
00904659 : MOV EBX,EAX
0090465b : TEST EBX,EBX
0090465d : JZ 0x00904767
00904663 : MOV ECX,dword ptr [0x00da9894]
00904669 : MOV EDX,dword ptr [ECX]
0090466b : MOV EAX,dword ptr [EDX + 0x40]
0090466e : PUSH EDI
0090466f : XOR EDI,EDI
00904671 : MOV dword ptr [EBP + -0x10],EAX
00904674 : TEST EAX,EAX
00904676 : JBE 0x00904766
0090467c : PUSH ESI
0090467d : LEA ECX,[ECX]
00904680 : MOV EAX,[0x00da9894]
00904685 : MOV EAX,dword ptr [EAX]
00904687 : MOV ECX,EDI
00904689 : CALL 0x008eb810
0090468e : MOV ESI,EAX
00904690 : TEST ESI,ESI
00904692 : JZ 0x009046c5
00904694 : CMP byte ptr [ESI + 0x64],0x0
00904698 : JZ 0x009046c5
0090469a : MOV EDX,dword ptr [ESI]
0090469c : MOV EDX,dword ptr [EDX + 0x9c]
009046a2 : LEA EAX,[EBP + -0x4]
009046a5 : PUSH EAX
009046a6 : LEA ECX,[EBP + -0x8]
009046a9 : PUSH ECX
009046aa : MOV ECX,ESI
009046ac : CALL EDX
009046ae : TEST AL,AL
009046b0 : JZ 0x009046c5
009046b2 : MOV EAX,0xffff
009046b7 : CMP word ptr [EBP + -0x8],AX
009046bb : JNZ 0x009046d4
009046bd : MOV ECX,EAX
009046bf : CMP word ptr [EBP + -0x4],CX
009046c3 : JNZ 0x009046d4
009046c5 : INC EDI
009046c6 : CMP EDI,dword ptr [EBP + -0x10]
009046c9 : JC 0x00904680
009046cb : POP ESI
009046cc : POP EDI
009046cd : POP EBX
009046ce : MOV ESP,EBP
009046d0 : POP EBP
009046d1 : RET 0x8
009046d4 : MOV EDX,dword ptr [EBX]
009046d6 : MOV EAX,dword ptr [EDX + 0x40]
009046d9 : MOV ECX,EBX
009046db : CALL EAX
009046dd : CMP AX,0x1
009046e1 : JBE 0x00904742
009046e3 : PUSH 0x11
009046e5 : CALL dword ptr [0x00b85438]
009046eb : TEST AX,AX
009046ee : JL 0x00904742
009046f0 : MOV EDX,dword ptr [EBX]
009046f2 : MOV EAX,dword ptr [EDX + 0x20]
009046f5 : MOV ECX,EBX
009046f7 : CALL EAX
009046f9 : TEST EAX,EAX
009046fb : JZ 0x00904742
009046fd : TEST byte ptr [EBX + 0x120],0x1
00904704 : JNZ 0x00904742
00904706 : MOV ECX,dword ptr [EBP + -0xc]
00904709 : MOV EDX,dword ptr [EBX]
0090470b : MOV EDI,dword ptr [ECX + 0x2c]
0090470e : MOV EAX,dword ptr [EDX + 0x40]
00904711 : MOV ESI,dword ptr [ESI + 0x2c]
00904714 : MOV ECX,EBX
00904716 : CALL EAX
00904718 : MOV EDX,dword ptr [EBP + -0x4]
0090471b : MOVZX ECX,AX
0090471e : MOV EAX,dword ptr [EBP + -0x8]
00904721 : PUSH ECX
00904722 : MOV ECX,dword ptr [EBP + 0xc]
00904725 : PUSH EDX
00904726 : MOV EDX,dword ptr [EBP + 0x8]
00904729 : PUSH EAX
0090472a : MOV EAX,dword ptr [EBP + -0xc]
0090472d : PUSH ESI
0090472e : MOV ESI,dword ptr [EAX + 0x60]
00904731 : PUSH ECX
00904732 : PUSH EDX
00904733 : PUSH EDI
00904734 : CALL 0x00904db0
00904739 : POP ESI
0090473a : POP EDI
0090473b : POP EBX
0090473c : MOV ESP,EBP
0090473e : POP EBP
0090473f : RET 0x8
00904742 : MOV ECX,dword ptr [EBP + -0x4]
00904745 : MOV EDX,dword ptr [EBP + -0x8]
00904748 : MOV EAX,dword ptr [ESI + 0x2c]
0090474b : PUSH ECX
0090474c : MOV ECX,dword ptr [EBP + 0xc]
0090474f : PUSH EDX
00904750 : MOV EDX,dword ptr [EBP + 0x8]
00904753 : PUSH EAX
00904754 : MOV EAX,dword ptr [EBP + -0xc]
00904757 : PUSH ECX
00904758 : MOV ECX,dword ptr [EAX + 0x2c]
0090475b : PUSH EDX
0090475c : PUSH ECX
0090475d : CALL 0x008efa90
00904762 : ADD ESP,0x18
00904765 : POP ESI
00904766 : POP EDI
00904767 : POP EBX
00904768 : MOV ESP,EBP
0090476a : POP EBP
0090476b : RET 0x8
