PROGRAM  : Maestia.exe
FUNCTION : FUN_007eb2e0
ENTRY    : 007eb2e0
BODY     : [[007eb2e0, 007eb4b7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007eb2e0(void)

{
  int yBottom;
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int unaff_ESI;
  tagRECT local_18;
  uint local_8;
  
  local_18.left = (LONG)*(undefined8 *)(unaff_ESI + 0x174);
  local_18.top = (LONG)((ulonglong)*(undefined8 *)(unaff_ESI + 0x174) >> 0x20);
  local_18.top = local_18.top - 1;
  local_18.right = (LONG)*(undefined8 *)(unaff_ESI + 0x17c);
  local_18.right = local_18.right + 1;
  local_18.bottom = (LONG)((ulonglong)*(undefined8 *)(unaff_ESI + 0x17c) >> 0x20);
  local_18.bottom = local_18.bottom + 1;
  local_18.left = local_18.left - 1;
  if (local_18.left < 0) {
    local_18.left = 0;
  }
  if (local_18.top < 0) {
    local_18.top = 0;
  }
  iVar1 = *(int *)(unaff_ESI + 0x170);
  if (iVar1 <= local_18.right) {
    local_18.right = iVar1 - 1;
  }
  yBottom = *(int *)(unaff_ESI + 0x16c);
  if (yBottom <= local_18.bottom) {
    local_18.bottom = yBottom - 1;
  }
  SetRect(&local_18,0,0,iVar1,yBottom);
  uVar2 = local_18.top;
  uVar3 = local_18.left;
  if ((uint)local_18.top < (uint)local_18.bottom) {
    do {
      uVar4 = uVar3;
      local_8 = uVar2;
      if (uVar3 < (uint)local_18.right) {
        do {
          if ((((*(int *)(unaff_ESI + 0x9c) != 0) && (uVar2 < *(uint *)(unaff_ESI + 0x16c))) &&
              (uVar3 < *(uint *)(unaff_ESI + 0x170))) &&
             (iVar1 = (*(uint *)(unaff_ESI + 0x170) * uVar2 + uVar3) * 0x2df8 +
                      *(int *)(unaff_ESI + 0x88), iVar1 != 0)) {
            FUN_007afc40();
            if (*(int *)(iVar1 + 0x2e0) == 0) {
              *(undefined4 *)(iVar1 + 0x243c) = 0;
            }
            else {
              *(uint *)(iVar1 + 0x243c) =
                   (*(int *)(unaff_ESI + 0x170) * local_8 + uVar3) * 0x2df8 + -0x9b4 +
                   *(int *)(unaff_ESI + 0x88);
            }
            if (uVar3 < *(int *)(unaff_ESI + 0x170) - 1U) {
              *(uint *)(iVar1 + 0x2450) =
                   (*(int *)(unaff_ESI + 0x170) * local_8 + uVar3) * 0x2df8 + 0x5228 +
                   *(int *)(unaff_ESI + 0x88);
            }
            else {
              *(undefined4 *)(iVar1 + 0x2450) = 0;
            }
            if (local_8 == 0) {
              *(undefined4 *)(iVar1 + 0x2440) = 0;
            }
            else {
              *(uint *)(iVar1 + 0x2440) =
                   ((local_8 - 1) * *(int *)(unaff_ESI + 0x170) + uVar3) * 0x2df8 + 0x2444 +
                   *(int *)(unaff_ESI + 0x88);
            }
            uVar2 = local_8;
            if (local_8 < *(int *)(unaff_ESI + 0x16c) - 1U) {
              *(uint *)(iVar1 + 0x2454) =
                   ((local_8 + 1) * *(int *)(unaff_ESI + 0x170) + uVar3) * 0x2df8 + 0x2430 +
                   *(int *)(unaff_ESI + 0x88);
            }
            else {
              *(undefined4 *)(iVar1 + 0x2454) = 0;
            }
          }
          uVar3 = uVar3 + 1;
          uVar4 = local_18.left;
        } while (uVar3 < (uint)local_18.right);
      }
      uVar2 = uVar2 + 1;
      uVar3 = uVar4;
    } while (uVar2 < (uint)local_18.bottom);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007eb2e0 : PUSH EBP
007eb2e1 : MOV EBP,ESP
007eb2e3 : SUB ESP,0x18
007eb2e6 : MOVQ XMM0,qword ptr [ESI + 0x174]
007eb2ee : MOVQ qword ptr [EBP + -0x14],XMM0
007eb2f3 : MOV EAX,dword ptr [EBP + -0x14]
007eb2f6 : MOVQ XMM0,qword ptr [ESI + 0x17c]
007eb2fe : DEC dword ptr [EBP + -0x10]
007eb301 : MOVQ qword ptr [EBP + -0xc],XMM0
007eb306 : INC dword ptr [EBP + -0xc]
007eb309 : INC dword ptr [EBP + -0x8]
007eb30c : DEC EAX
007eb30d : XOR EDX,EDX
007eb30f : CMP EAX,EDX
007eb311 : PUSH EBX
007eb312 : PUSH EDI
007eb313 : MOV dword ptr [EBP + -0x14],EAX
007eb316 : JGE 0x007eb31b
007eb318 : MOV dword ptr [EBP + -0x14],EDX
007eb31b : CMP dword ptr [EBP + -0x10],EDX
007eb31e : JGE 0x007eb323
007eb320 : MOV dword ptr [EBP + -0x10],EDX
007eb323 : MOV ECX,dword ptr [ESI + 0x170]
007eb329 : CMP dword ptr [EBP + -0xc],ECX
007eb32c : JL 0x007eb334
007eb32e : LEA EAX,[ECX + -0x1]
007eb331 : MOV dword ptr [EBP + -0xc],EAX
007eb334 : MOV EAX,dword ptr [ESI + 0x16c]
007eb33a : CMP dword ptr [EBP + -0x8],EAX
007eb33d : JL 0x007eb345
007eb33f : LEA EDI,[EAX + -0x1]
007eb342 : MOV dword ptr [EBP + -0x8],EDI
007eb345 : PUSH EAX
007eb346 : PUSH ECX
007eb347 : PUSH EDX
007eb348 : PUSH EDX
007eb349 : LEA ECX,[EBP + -0x14]
007eb34c : PUSH ECX
007eb34d : CALL dword ptr [0x00b85430]
007eb353 : MOV ECX,dword ptr [EBP + -0x10]
007eb356 : MOV dword ptr [EBP + -0x4],ECX
007eb359 : CMP ECX,dword ptr [EBP + -0x8]
007eb35c : JNC 0x007eb4b2
007eb362 : MOV EBX,dword ptr [EBP + -0x14]
007eb365 : CMP EBX,dword ptr [EBP + -0xc]
007eb368 : JNC 0x007eb4a5
007eb36e : CMP dword ptr [ESI + 0x9c],0x0
007eb375 : JZ 0x007eb498
007eb37b : CMP ECX,dword ptr [ESI + 0x16c]
007eb381 : JNC 0x007eb498
007eb387 : MOV EAX,dword ptr [ESI + 0x170]
007eb38d : CMP EBX,EAX
007eb38f : JNC 0x007eb498
007eb395 : IMUL EAX,ECX
007eb398 : ADD EAX,EBX
007eb39a : IMUL EAX,EAX,0x2df8
007eb3a0 : ADD EAX,dword ptr [ESI + 0x88]
007eb3a6 : MOV EDI,EAX
007eb3a8 : JZ 0x007eb498
007eb3ae : CALL 0x007afc40
007eb3b3 : CMP dword ptr [EDI + 0x2e0],0x0
007eb3ba : MOV ECX,dword ptr [EBP + -0x4]
007eb3bd : JBE 0x007eb3e5
007eb3bf : MOV EDX,dword ptr [ESI + 0x170]
007eb3c5 : MOV EAX,dword ptr [ESI + 0x88]
007eb3cb : IMUL EDX,ECX
007eb3ce : ADD EDX,EBX
007eb3d0 : IMUL EDX,EDX,0x2df8
007eb3d6 : LEA EDX,[EDX + EAX*0x1 + 0xfffff64c]
007eb3dd : MOV dword ptr [EDI + 0x243c],EDX
007eb3e3 : JMP 0x007eb3ef
007eb3e5 : MOV dword ptr [EDI + 0x243c],0x0
007eb3ef : MOV EAX,dword ptr [ESI + 0x170]
007eb3f5 : LEA EDX,[EAX + -0x1]
007eb3f8 : CMP EBX,EDX
007eb3fa : JNC 0x007eb41c
007eb3fc : MOV EDX,dword ptr [ESI + 0x88]
007eb402 : IMUL EAX,ECX
007eb405 : ADD EAX,EBX
007eb407 : IMUL EAX,EAX,0x2df8
007eb40d : LEA EAX,[EAX + EDX*0x1 + 0x5228]
007eb414 : MOV dword ptr [EDI + 0x2450],EAX
007eb41a : JMP 0x007eb426
007eb41c : MOV dword ptr [EDI + 0x2450],0x0
007eb426 : TEST ECX,ECX
007eb428 : JBE 0x007eb451
007eb42a : MOV EAX,dword ptr [ESI + 0x88]
007eb430 : LEA EDX,[ECX + -0x1]
007eb433 : IMUL EDX,dword ptr [ESI + 0x170]
007eb43a : ADD EDX,EBX
007eb43c : IMUL EDX,EDX,0x2df8
007eb442 : LEA EDX,[EDX + EAX*0x1 + 0x2444]
007eb449 : MOV dword ptr [EDI + 0x2440],EDX
007eb44f : JMP 0x007eb45b
007eb451 : MOV dword ptr [EDI + 0x2440],0x0
007eb45b : MOV EAX,dword ptr [ESI + 0x16c]
007eb461 : DEC EAX
007eb462 : CMP ECX,EAX
007eb464 : JNC 0x007eb48b
007eb466 : MOV EDX,dword ptr [ESI + 0x88]
007eb46c : INC ECX
007eb46d : IMUL ECX,dword ptr [ESI + 0x170]
007eb474 : ADD ECX,EBX
007eb476 : IMUL ECX,ECX,0x2df8
007eb47c : LEA EAX,[ECX + EDX*0x1 + 0x2430]
007eb483 : MOV dword ptr [EDI + 0x2454],EAX
007eb489 : JMP 0x007eb495
007eb48b : MOV dword ptr [EDI + 0x2454],0x0
007eb495 : MOV ECX,dword ptr [EBP + -0x4]
007eb498 : INC EBX
007eb499 : CMP EBX,dword ptr [EBP + -0xc]
007eb49c : JC 0x007eb36e
007eb4a2 : MOV EBX,dword ptr [EBP + -0x14]
007eb4a5 : INC ECX
007eb4a6 : MOV dword ptr [EBP + -0x4],ECX
007eb4a9 : CMP ECX,dword ptr [EBP + -0x8]
007eb4ac : JC 0x007eb365
007eb4b2 : POP EDI
007eb4b3 : POP EBX
007eb4b4 : MOV ESP,EBP
007eb4b6 : POP EBP
007eb4b7 : RET
