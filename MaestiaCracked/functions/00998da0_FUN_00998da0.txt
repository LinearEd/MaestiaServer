PROGRAM  : Maestia.exe
FUNCTION : FUN_00998da0
ENTRY    : 00998da0
BODY     : [[00998da0, 00999130]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00998da0(int param_1)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  uint local_dc;
  undefined1 local_d8 [4];
  undefined2 local_d4;
  undefined4 local_c4;
  uint local_c0;
  undefined1 local_bc [4];
  undefined2 local_b8;
  undefined4 local_a8;
  uint local_a4;
  undefined1 local_a0 [12];
  int local_94;
  undefined4 ***local_74 [5];
  uint local_60;
  char local_40;
  undefined1 local_34 [4];
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4ae5d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = uVar2;
  FUN_00412470(local_a0);
  local_8 = 0;
  iVar3 = *DAT_00da9894;
  if ((((iVar3 == 0) || (*(int *)(iVar3 + 0x150) == 0)) || (**(int **)(iVar3 + 0x150) == 0)) ||
     (cVar1 = FUN_0099bca0(*(undefined4 *)(param_1 + 5),local_a0), cVar1 != '\0')) {
    if ((local_40 == '\0') || (local_94 != 0xfffd)) {
      local_1c = 7;
      local_20 = 0;
      local_30 = 0;
      FUN_00406360(&DAT_00c877b8,0);
      local_8._0_1_ = 1;
      if ((((local_40 == '\x02') ||
           ((local_40 == '\x01' && (0x13 < *(uint *)(*(int *)(DAT_0172491c + 0x17c) + 0xa0))))) &&
          (local_94 != 0xfffd)) && ((local_94 != 0xffff || (*(char *)(param_1 + 4) == '\x01')))) {
        FUN_00406460(L"IDS_FRIEND_MENTOR_DELETE_PENALTY");
        local_8._0_1_ = 2;
        iVar3 = FUN_0081d120(local_d8);
        local_8._0_1_ = 3;
        if (*(uint *)(iVar3 + 0x18) < 8) {
          iVar3 = iVar3 + 4;
        }
        else {
          iVar3 = *(int *)(iVar3 + 4);
        }
        if (local_60 < 8) {
          local_74[0] = local_74;
        }
        uVar4 = FUN_00404750(L"%s %s",local_74[0],iVar3);
        local_8._0_1_ = 4;
        FUN_00405eb0(uVar4,0,0xffffffff);
        local_8._0_1_ = 3;
        FUN_00406560();
        local_8._0_1_ = 2;
        FUN_00406560();
        local_8._0_1_ = 1;
        FUN_00406560();
      }
      else {
        local_a4 = 7;
        local_a8 = 0;
        local_b8 = 0;
        FUN_00406360(L"IDS_FRIEND_DELETE_MENTOR",0x18);
        local_8._0_1_ = 5;
        iVar3 = FUN_0081d120(local_bc);
        local_8._0_1_ = 6;
        if (*(uint *)(iVar3 + 0x18) < 8) {
          iVar3 = iVar3 + 4;
        }
        else {
          iVar3 = *(int *)(iVar3 + 4);
        }
        if (local_60 < 8) {
          local_74[0] = local_74;
        }
        uVar4 = FUN_00404750(L"%s %s",local_74[0],iVar3);
        local_8._0_1_ = 7;
        FUN_00405eb0(uVar4,0,0xffffffff);
        local_8 = CONCAT31(local_8._1_3_,6);
        if (7 < local_dc) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_8 = CONCAT31(local_8._1_3_,5);
        if (7 < local_c0) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_c0 = 7;
        local_c4 = 0;
        local_d4 = 0;
        local_8._0_1_ = 1;
        if (7 < local_a4) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_a4 = 7;
        local_a8 = 0;
        local_b8 = 0;
      }
      iVar3 = FUN_008ede80(local_34,2);
      if (iVar3 == 0) {
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_1c = 7;
        local_20 = 0;
        local_30 = 0;
      }
      else {
        if (*(code **)(iVar3 + 0x60) != (code *)0x0) {
          (**(code **)(iVar3 + 0x60))(1,iVar3);
        }
        *(code **)(iVar3 + 0x60) = FUN_00998d70;
        local_8 = (uint)local_8._1_3_ << 8;
        if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_1c = 7;
        local_20 = 0;
        local_30 = 0;
      }
    }
    else {
      FUN_0099a9c0(uVar2);
    }
  }
  local_8 = 0xffffffff;
  FUN_00411330(local_a0);
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00998da0 : PUSH EBP
00998da1 : MOV EBP,ESP
00998da3 : PUSH -0x1
00998da5 : PUSH 0xb4ae5d
00998daa : MOV EAX,FS:[0x0]
00998db0 : PUSH EAX
00998db1 : SUB ESP,0xe8
00998db7 : MOV EAX,[0x00d66fa0]
00998dbc : XOR EAX,EBP
00998dbe : MOV dword ptr [EBP + -0x14],EAX
00998dc1 : PUSH EBX
00998dc2 : PUSH ESI
00998dc3 : PUSH EDI
00998dc4 : PUSH EAX
00998dc5 : LEA EAX,[EBP + -0xc]
00998dc8 : MOV FS:[0x0],EAX
00998dce : MOV EBX,dword ptr [EBP + 0x8]
00998dd1 : LEA EAX,[EBP + 0xffffff64]
00998dd7 : PUSH EAX
00998dd8 : CALL 0x00412470
00998ddd : XOR EDI,EDI
00998ddf : MOV dword ptr [EBP + -0x4],EDI
00998de2 : MOV ECX,dword ptr [0x00da9894]
00998de8 : MOV EAX,dword ptr [ECX]
00998dea : CMP EAX,EDI
00998dec : JZ 0x00998e2b
00998dee : CMP dword ptr [EAX + 0x150],EDI
00998df4 : JZ 0x00998e2b
00998df6 : MOV ECX,dword ptr [EAX + 0x150]
00998dfc : CMP dword ptr [ECX],EDI
00998dfe : JZ 0x00998e2b
00998e00 : MOV EAX,ECX
00998e02 : MOV ECX,dword ptr [EBX + 0x5]
00998e05 : MOV EAX,dword ptr [EAX]
00998e07 : LEA EDX,[EBP + 0xffffff64]
00998e0d : PUSH EDX
00998e0e : PUSH ECX
00998e0f : CALL 0x0099bca0
00998e14 : TEST AL,AL
00998e16 : JNZ 0x00998e2b
00998e18 : MOV dword ptr [EBP + -0x4],0xffffffff
00998e1f : LEA EDX,[EBP + 0xffffff64]
00998e25 : PUSH EDX
00998e26 : JMP 0x0099910e
00998e2b : CMP byte ptr [EBP + -0x3c],0x0
00998e2f : JZ 0x00998e62
00998e31 : CMP dword ptr [EBP + 0xffffff70],0xfffd
00998e3b : JNZ 0x00998e62
00998e3d : MOV EAX,[0x00da9894]
00998e42 : MOV EAX,dword ptr [EAX]
00998e44 : MOV ECX,dword ptr [EAX + 0x150]
00998e4a : CALL 0x0099a9c0
00998e4f : MOV dword ptr [EBP + -0x4],0xffffffff
00998e56 : LEA ECX,[EBP + 0xffffff64]
00998e5c : PUSH ECX
00998e5d : JMP 0x0099910e
00998e62 : PUSH EDI
00998e63 : XOR EDX,EDX
00998e65 : MOV ESI,0x7
00998e6a : PUSH 0xc877b8
00998e6f : LEA ECX,[EBP + -0x30]
00998e72 : MOV dword ptr [EBP + -0x18],ESI
00998e75 : MOV dword ptr [EBP + -0x1c],EDI
00998e78 : MOV word ptr [EBP + -0x2c],DX
00998e7c : CALL 0x00406360
00998e81 : MOV byte ptr [EBP + -0x4],0x1
00998e85 : MOV AL,byte ptr [EBP + -0x3c]
00998e88 : CMP AL,0x2
00998e8a : JZ 0x00998f02
00998e8c : CMP AL,0x1
00998e8e : JNZ 0x00998ea4
00998e90 : MOV EAX,[0x0172491c]
00998e95 : MOV EAX,dword ptr [EAX + 0x17c]
00998e9b : CMP dword ptr [EAX + 0xa0],0x14
00998ea2 : JNC 0x00998f06
00998ea4 : PUSH 0x18
00998ea6 : XOR EDX,EDX
00998ea8 : PUSH 0xc87810
00998ead : LEA ECX,[EBP + 0xffffff48]
00998eb3 : MOV dword ptr [EBP + 0xffffff60],ESI
00998eb9 : MOV dword ptr [EBP + 0xffffff5c],EDI
00998ebf : MOV word ptr [EBP + 0xffffff4c],DX
00998ec6 : CALL 0x00406360
00998ecb : MOV byte ptr [EBP + -0x4],0x5
00998ecf : MOV ECX,dword ptr [0x0172491c]
00998ed5 : LEA EAX,[EBP + 0xffffff48]
00998edb : PUSH EAX
00998edc : LEA EDI,[EBP + 0xffffff2c]
00998ee2 : CALL 0x0081d120
00998ee7 : MOV BL,0x6
00998ee9 : MOV byte ptr [EBP + -0x4],BL
00998eec : MOV EDI,0x8
00998ef1 : CMP dword ptr [EAX + 0x18],EDI
00998ef4 : JC 0x00998fc6
00998efa : MOV EAX,dword ptr [EAX + 0x4]
00998efd : JMP 0x00998fc9
00998f02 : TEST AL,AL
00998f04 : JZ 0x00998ea4
00998f06 : MOV EAX,dword ptr [EBP + 0xffffff70]
00998f0c : CMP EAX,0xfffd
00998f11 : JZ 0x00998ea4
00998f13 : CMP EAX,0xffff
00998f18 : JNZ 0x00998f20
00998f1a : CMP byte ptr [EBX + 0x4],0x1
00998f1e : JNZ 0x00998ea4
00998f20 : PUSH 0xc877c0
00998f25 : LEA ECX,[EBP + 0xffffff2c]
00998f2b : CALL 0x00406460
00998f30 : MOV byte ptr [EBP + -0x4],0x2
00998f34 : LEA ECX,[EBP + 0xffffff2c]
00998f3a : PUSH ECX
00998f3b : MOV ECX,dword ptr [0x0172491c]
00998f41 : LEA EDI,[EBP + 0xffffff48]
00998f47 : CALL 0x0081d120
00998f4c : MOV BL,0x3
00998f4e : MOV byte ptr [EBP + -0x4],BL
00998f51 : MOV EDI,0x8
00998f56 : CMP dword ptr [EAX + 0x18],EDI
00998f59 : JC 0x00998f60
00998f5b : MOV EAX,dword ptr [EAX + 0x4]
00998f5e : JMP 0x00998f63
00998f60 : ADD EAX,0x4
00998f63 : MOV ECX,dword ptr [EBP + -0x70]
00998f66 : CMP dword ptr [EBP + -0x5c],EDI
00998f69 : JNC 0x00998f6e
00998f6b : LEA ECX,[EBP + -0x70]
00998f6e : PUSH EAX
00998f6f : PUSH ECX
00998f70 : PUSH 0xc87804
00998f75 : LEA ESI,[EBP + 0xffffff10]
00998f7b : CALL 0x00404750
00998f80 : ADD ESP,0xc
00998f83 : MOV byte ptr [EBP + -0x4],0x4
00998f87 : PUSH -0x1
00998f89 : PUSH 0x0
00998f8b : PUSH EAX
00998f8c : LEA ECX,[EBP + -0x30]
00998f8f : CALL 0x00405eb0
00998f94 : MOV byte ptr [EBP + -0x4],BL
00998f97 : MOV ECX,ESI
00998f99 : CALL 0x00406560
00998f9e : MOV byte ptr [EBP + -0x4],0x2
00998fa2 : LEA ECX,[EBP + 0xffffff48]
00998fa8 : CALL 0x00406560
00998fad : MOV byte ptr [EBP + -0x4],0x1
00998fb1 : LEA ECX,[EBP + 0xffffff2c]
00998fb7 : CALL 0x00406560
00998fbc : MOV EBX,0x7
00998fc1 : JMP 0x00999083
00998fc6 : ADD EAX,0x4
00998fc9 : MOV ECX,dword ptr [EBP + -0x70]
00998fcc : CMP dword ptr [EBP + -0x5c],EDI
00998fcf : JNC 0x00998fd4
00998fd1 : LEA ECX,[EBP + -0x70]
00998fd4 : PUSH EAX
00998fd5 : PUSH ECX
00998fd6 : PUSH 0xc87844
00998fdb : LEA ESI,[EBP + 0xffffff10]
00998fe1 : CALL 0x00404750
00998fe6 : ADD ESP,0xc
00998fe9 : MOV byte ptr [EBP + -0x4],0x7
00998fed : PUSH -0x1
00998fef : XOR ESI,ESI
00998ff1 : PUSH ESI
00998ff2 : PUSH EAX
00998ff3 : LEA ECX,[EBP + -0x30]
00998ff6 : CALL 0x00405eb0
00998ffb : MOV byte ptr [EBP + -0x4],BL
00998ffe : CMP dword ptr [EBP + 0xffffff28],EDI
00999004 : JC 0x00999011
00999006 : MOV ECX,dword ptr [EBP + 0xffffff14]
0099900c : CALL 0x006f04e0
00999011 : MOV EBX,0x7
00999016 : XOR ECX,ECX
00999018 : MOV dword ptr [EBP + 0xffffff28],EBX
0099901e : MOV dword ptr [EBP + 0xffffff24],ESI
00999024 : MOV word ptr [EBP + 0xffffff14],CX
0099902b : MOV byte ptr [EBP + -0x4],0x5
0099902f : CMP dword ptr [EBP + 0xffffff44],EDI
00999035 : JC 0x00999042
00999037 : MOV ECX,dword ptr [EBP + 0xffffff30]
0099903d : CALL 0x006f04e0
00999042 : XOR EDX,EDX
00999044 : MOV dword ptr [EBP + 0xffffff44],EBX
0099904a : MOV dword ptr [EBP + 0xffffff40],ESI
00999050 : MOV word ptr [EBP + 0xffffff30],DX
00999057 : MOV byte ptr [EBP + -0x4],0x1
0099905b : CMP dword ptr [EBP + 0xffffff60],EDI
00999061 : JC 0x0099906e
00999063 : MOV ECX,dword ptr [EBP + 0xffffff4c]
00999069 : CALL 0x006f04e0
0099906e : XOR EAX,EAX
00999070 : MOV dword ptr [EBP + 0xffffff60],EBX
00999076 : MOV dword ptr [EBP + 0xffffff5c],ESI
0099907c : MOV word ptr [EBP + 0xffffff4c],AX
00999083 : MOV ECX,dword ptr [0x00da9894]
00999089 : MOV ECX,dword ptr [ECX]
0099908b : PUSH 0x2
0099908d : LEA EDX,[EBP + -0x30]
00999090 : PUSH EDX
00999091 : CALL 0x008ede80
00999096 : MOV ESI,EAX
00999098 : TEST ESI,ESI
0099909a : JNZ 0x009990cc
0099909c : MOV byte ptr [EBP + -0x4],AL
0099909f : CMP dword ptr [EBP + -0x18],EDI
009990a2 : JC 0x009990ac
009990a4 : MOV ECX,dword ptr [EBP + -0x2c]
009990a7 : CALL 0x006f04e0
009990ac : XOR EAX,EAX
009990ae : MOV dword ptr [EBP + -0x18],EBX
009990b1 : MOV dword ptr [EBP + -0x1c],0x0
009990b8 : MOV word ptr [EBP + -0x2c],AX
009990bc : MOV dword ptr [EBP + -0x4],0xffffffff
009990c3 : LEA ECX,[EBP + 0xffffff64]
009990c9 : PUSH ECX
009990ca : JMP 0x0099910e
009990cc : MOV EAX,dword ptr [ESI + 0x60]
009990cf : TEST EAX,EAX
009990d1 : JZ 0x009990d8
009990d3 : PUSH ESI
009990d4 : PUSH 0x1
009990d6 : CALL EAX
009990d8 : MOV dword ptr [ESI + 0x60],0x998d70
009990df : MOV byte ptr [EBP + -0x4],0x0
009990e3 : CMP dword ptr [EBP + -0x18],EDI
009990e6 : JC 0x009990f0
009990e8 : MOV ECX,dword ptr [EBP + -0x2c]
009990eb : CALL 0x006f04e0
009990f0 : XOR EDX,EDX
009990f2 : MOV dword ptr [EBP + -0x18],EBX
009990f5 : MOV dword ptr [EBP + -0x1c],0x0
009990fc : MOV word ptr [EBP + -0x2c],DX
00999100 : MOV dword ptr [EBP + -0x4],0xffffffff
00999107 : LEA EAX,[EBP + 0xffffff64]
0099910d : PUSH EAX
0099910e : CALL 0x00411330
00999113 : MOV ECX,dword ptr [EBP + -0xc]
00999116 : MOV dword ptr FS:[0x0],ECX
0099911d : POP ECX
0099911e : POP EDI
0099911f : POP ESI
00999120 : POP EBX
00999121 : MOV ECX,dword ptr [EBP + -0x14]
00999124 : XOR ECX,EBP
00999126 : CALL 0x00633e6b
0099912b : MOV ESP,EBP
0099912d : POP EBP
0099912e : RET 0x4
