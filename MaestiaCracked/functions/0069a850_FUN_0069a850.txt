PROGRAM  : Maestia.exe
FUNCTION : FUN_0069a850
ENTRY    : 0069a850
BODY     : [[0069a850, 0069a885] [0069a890, 0069a986]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0069a850(char param_1,short *param_2,int *param_3,int *param_4)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  uint in_ECX;
  int iVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  int *piVar9;
  int *piVar10;
  int local_c;
  int local_8;
  int local_4;
  
  local_8 = *param_4;
  local_c = *param_3;
  bVar1 = true;
  if (in_ECX < 2) {
    *param_3 = local_c;
    *param_4 = local_8;
    return;
  }
  local_4 = (in_ECX - 2 >> 1) + 1;
  do {
    bVar2 = false;
    if ((bVar1) || (param_1 != '\0')) {
      iVar7 = (int)param_2[1];
      iVar6 = *param_2 - iVar7;
      bVar1 = false;
      iVar3 = local_8;
      piVar5 = param_4;
    }
    else {
      iVar7 = (int)*param_2;
      iVar6 = param_2[1] - iVar7;
      bVar2 = true;
      iVar3 = local_c;
      piVar5 = param_3;
    }
    piVar5 = piVar5 + 1;
    if (iVar3 != 0) {
      while (*piVar5 <= iVar7) {
        if (iVar7 == *piVar5) {
          if (iVar6 < 0) {
            if (iVar6 < piVar5[1]) {
              piVar5[1] = iVar6;
            }
          }
          else if (piVar5[1] < iVar6) {
            piVar5[1] = iVar6;
          }
          goto LAB_0069a94f;
        }
        iVar3 = iVar3 + -1;
        piVar5 = piVar5 + 8;
        if (iVar3 == 0) goto LAB_0069a939;
      }
      if (iVar3 != 0) {
        piVar8 = piVar5 + iVar3 * 8;
        do {
          iVar3 = iVar3 + -1;
          piVar9 = piVar8 + -8;
          piVar10 = piVar8;
          for (iVar4 = 8; iVar4 != 0; iVar4 = iVar4 + -1) {
            *piVar10 = *piVar9;
            piVar9 = piVar9 + 1;
            piVar10 = piVar10 + 1;
          }
          piVar8 = piVar8 + -8;
        } while (iVar3 != 0);
      }
    }
LAB_0069a939:
    *piVar5 = iVar7;
    piVar5[1] = iVar6;
    if (bVar2) {
      local_c = local_c + 1;
    }
    else {
      local_8 = local_8 + 1;
    }
LAB_0069a94f:
    param_2 = param_2 + 2;
    local_4 = local_4 + -1;
    if (local_4 == 0) {
      *param_3 = local_c;
      *param_4 = local_8;
      return;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0069a850 : SUB ESP,0x14
0069a853 : PUSH EBP
0069a854 : MOV EBP,dword ptr [ESP + 0x24]
0069a858 : PUSH ESI
0069a859 : MOV ESI,dword ptr [ESP + 0x2c]
0069a85d : MOV EAX,dword ptr [ESI]
0069a85f : PUSH EDI
0069a860 : MOV EDI,dword ptr [EBP]
0069a863 : MOV dword ptr [ESP + 0x14],EDI
0069a867 : MOV dword ptr [ESP + 0x18],EAX
0069a86b : MOV byte ptr [ESP + 0xe],0x1
0069a870 : CMP ECX,0x1
0069a873 : JBE 0x0069a97b
0069a879 : ADD ECX,-0x2
0069a87c : SHR ECX,0x1
0069a87e : INC ECX
0069a87f : PUSH EBX
0069a880 : MOV dword ptr [ESP + 0x20],ECX
0069a884 : JMP 0x0069a8a0
0069a890 : MOV ESI,dword ptr [ESP + 0x34]
0069a894 : MOV EBP,dword ptr [ESP + 0x30]
0069a898 : MOV EDI,dword ptr [ESP + 0x18]
0069a89c : MOV EAX,dword ptr [ESP + 0x1c]
0069a8a0 : CMP byte ptr [ESP + 0x12],0x0
0069a8a5 : MOV byte ptr [ESP + 0x13],0x0
0069a8aa : JNZ 0x0069a8cc
0069a8ac : CMP byte ptr [ESP + 0x28],0x0
0069a8b1 : JNZ 0x0069a8cc
0069a8b3 : MOV ECX,dword ptr [ESP + 0x2c]
0069a8b7 : MOVSX EBX,word ptr [ECX]
0069a8ba : MOVSX EDX,word ptr [ECX + 0x2]
0069a8be : SUB EDX,EBX
0069a8c0 : LEA ESI,[EBP + 0x4]
0069a8c3 : MOV EAX,EDI
0069a8c5 : MOV byte ptr [ESP + 0x13],0x1
0069a8ca : JMP 0x0069a8e1
0069a8cc : MOV ECX,dword ptr [ESP + 0x2c]
0069a8d0 : MOVSX EBX,word ptr [ECX + 0x2]
0069a8d4 : MOVSX EDX,word ptr [ECX]
0069a8d7 : SUB EDX,EBX
0069a8d9 : ADD ESI,0x4
0069a8dc : MOV byte ptr [ESP + 0x12],0x0
0069a8e1 : MOV ECX,ESI
0069a8e3 : TEST EAX,EAX
0069a8e5 : JBE 0x0069a939
0069a8e7 : MOV ESI,dword ptr [ECX]
0069a8e9 : CMP EBX,ESI
0069a8eb : JL 0x0069a912
0069a8ed : JZ 0x0069a8f9
0069a8ef : DEC EAX
0069a8f0 : ADD ECX,0x20
0069a8f3 : TEST EAX,EAX
0069a8f5 : JA 0x0069a8e7
0069a8f7 : JMP 0x0069a939
0069a8f9 : MOV EAX,dword ptr [ECX + 0x4]
0069a8fc : TEST EDX,EDX
0069a8fe : JGE 0x0069a909
0069a900 : CMP EDX,EAX
0069a902 : JGE 0x0069a94f
0069a904 : MOV dword ptr [ECX + 0x4],EDX
0069a907 : JMP 0x0069a94f
0069a909 : CMP EDX,EAX
0069a90b : JLE 0x0069a94f
0069a90d : MOV dword ptr [ECX + 0x4],EDX
0069a910 : JMP 0x0069a94f
0069a912 : MOV dword ptr [ESP + 0x14],ECX
0069a916 : TEST EAX,EAX
0069a918 : JBE 0x0069a939
0069a91a : MOV EBP,EAX
0069a91c : SHL EBP,0x5
0069a91f : ADD EBP,ECX
0069a921 : LEA ESI,[EBP + -0x20]
0069a924 : MOV EDI,EBP
0069a926 : DEC EAX
0069a927 : MOV ECX,0x8
0069a92c : SUB EBP,0x20
0069a92f : MOVSD.REP ES:EDI,ESI
0069a931 : TEST EAX,EAX
0069a933 : JA 0x0069a921
0069a935 : MOV ECX,dword ptr [ESP + 0x14]
0069a939 : CMP byte ptr [ESP + 0x13],0x0
0069a93e : MOV dword ptr [ECX],EBX
0069a940 : MOV dword ptr [ECX + 0x4],EDX
0069a943 : JZ 0x0069a94b
0069a945 : INC dword ptr [ESP + 0x18]
0069a949 : JMP 0x0069a94f
0069a94b : INC dword ptr [ESP + 0x1c]
0069a94f : ADD dword ptr [ESP + 0x2c],0x4
0069a954 : SUB dword ptr [ESP + 0x20],0x1
0069a959 : JNZ 0x0069a890
0069a95f : MOV EAX,dword ptr [ESP + 0x18]
0069a963 : MOV ECX,dword ptr [ESP + 0x30]
0069a967 : MOV EDX,dword ptr [ESP + 0x1c]
0069a96b : POP EBX
0069a96c : POP EDI
0069a96d : MOV dword ptr [ECX],EAX
0069a96f : MOV EAX,dword ptr [ESP + 0x2c]
0069a973 : POP ESI
0069a974 : MOV dword ptr [EAX],EDX
0069a976 : POP EBP
0069a977 : ADD ESP,0x14
0069a97a : RET
0069a97b : MOV dword ptr [EBP],EDI
0069a97e : POP EDI
0069a97f : MOV dword ptr [ESI],EAX
0069a981 : POP ESI
0069a982 : POP EBP
0069a983 : ADD ESP,0x14
0069a986 : RET
