PROGRAM  : Maestia.exe
FUNCTION : FUN_0089a610
ENTRY    : 0089a610
BODY     : [[0089a610, 0089a9de]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0089a610(undefined4 param_1,undefined4 param_2,float param_3,uint param_4,
                 undefined4 param_5)

{
  short sVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  int *piVar5;
  int in_ECX;
  uint local_4c;
  undefined4 *local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 uStack_3c;
  undefined1 local_38 [4];
  undefined2 local_34;
  undefined4 local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b5fa3a;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)&local_4c;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xffffffa8;
  ExceptionList = &local_14;
  local_40 = param_2;
  local_34 = 0;
  local_44 = param_5;
  local_20 = 7;
  local_24 = 0;
  FUN_00405eb0(param_1,0,0xffffffff);
  iVar4 = DAT_00d7c54c;
  local_c = 0;
  local_4c = *(uint *)(in_ECX + 0xec);
  FUN_004437f0(&local_4c);
  if (((((local_48 != *(undefined4 **)(iVar4 + 0x44)) &&
        (piVar5 = (int *)local_48[4], piVar5 != (int *)0x0)) &&
       (iVar4 = (**(code **)(*piVar5 + 0x40))(uVar3), iVar4 != 0)) &&
      (((*(char *)((int)piVar5 + 0xa5e) == '\x02' &&
        (sVar1 = *(short *)(in_ECX + 0x43a), sVar1 != 1)) &&
       ((sVar1 != 2 && ((sVar1 != 0x1c && (sVar1 != 0x1d)))))))) && (sVar1 != 0x19)) {
    FUN_00898150(local_38,in_ECX + 0x4d8);
    FUN_00405c00(local_38);
    param_4 = 10;
  }
  if (*(uint *)(in_ECX + 0x314) < 2) {
    uVar2 = *(undefined4 *)(in_ECX + 0x274);
    iVar4 = FUN_00a1a840(uVar2);
    if (((iVar4 == 0) && (iVar4 = FUN_00a1a6d0(uVar2), iVar4 == 0)) &&
       (iVar4 = FUN_00a1a780(uVar2), iVar4 == 0)) {
      local_c = 0xffffffff;
      if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_0089a9b7;
    }
    uVar2 = local_44;
    local_4c = CONCAT31(local_4c._1_3_,*(undefined1 *)(in_ECX + 0xd9));
    piVar5 = (int *)FUN_00a31f80(local_38,local_40,*(undefined4 *)(in_ECX + 0x274),
                                 *(undefined4 *)(in_ECX + 0xec),*(undefined4 *)(in_ECX + 0x2c4),
                                 local_4c);
    if (piVar5 != (int *)0x0) {
      (**(code **)(*piVar5 + 0xc))();
      FUN_00405eb0(uVar2,0,0xffffffff);
      if (8 < param_4) {
        param_4 = 9;
      }
      piVar5[0xb] = param_4;
      if (*(int *)(in_ECX + 1000) != 0) {
        piVar5[0x30] = (int)(*(float *)(*(int *)(in_ECX + 1000) + 0xac) * param_3);
      }
    }
    *(undefined1 *)(in_ECX + 0x4cf) = 0;
    *(undefined1 *)(in_ECX + 0x4d0) = 0;
    *(undefined1 *)(in_ECX + 0x124) = 0;
    *(undefined1 *)(in_ECX + 0x125) = 1;
    *(undefined4 *)(in_ECX + 0x128) = 0;
    *(undefined4 *)(in_ECX + 0x118) = 0;
    *(undefined4 *)(in_ECX + 300) = 0;
    *(undefined4 *)(in_ECX + 0x130) = 0;
  }
  else {
    local_4c = 0;
    if (*(uint *)(in_ECX + 0x314) != 0) {
      local_48 = (undefined4 *)(in_ECX + 0x274);
      do {
        uVar2 = *local_48;
        iVar4 = FUN_00a1a840(uVar2);
        if (((iVar4 != 0) || (iVar4 = FUN_00a1a6d0(uVar2), iVar4 != 0)) ||
           (iVar4 = FUN_00a1a780(uVar2), iVar4 != 0)) {
          uVar2 = local_44;
          uStack_3c = CONCAT31(uStack_3c._1_3_,*(undefined1 *)(in_ECX + 0xd9));
          piVar5 = (int *)FUN_00a31f80(local_38,local_40,*local_48,*(undefined4 *)(in_ECX + 0xec),
                                       local_48[0x14],uStack_3c);
          if (piVar5 != (int *)0x0) {
            (**(code **)(*piVar5 + 0xc))();
            FUN_00405eb0(uVar2,0,0xffffffff);
            uVar3 = param_4;
            if (8 < param_4) {
              uVar3 = 9;
            }
            piVar5[0xb] = uVar3;
            if (*(int *)(in_ECX + 1000) != 0) {
              piVar5[0x30] = (int)(*(float *)(*(int *)(in_ECX + 1000) + 0xac) * param_3);
            }
          }
          *(undefined1 *)(in_ECX + 0x4cf) = 0;
          *(undefined1 *)(in_ECX + 0x4d0) = 0;
          *(undefined1 *)(in_ECX + 0x124) = 0;
          *(undefined1 *)(in_ECX + 0x125) = 1;
          *(undefined4 *)(in_ECX + 0x128) = 0;
          *(undefined4 *)(in_ECX + 0x118) = 0;
          *(undefined4 *)(in_ECX + 300) = 0;
          *(undefined4 *)(in_ECX + 0x130) = 0;
        }
        local_48 = local_48 + 1;
        local_4c = local_4c + 1;
      } while (local_4c < *(uint *)(in_ECX + 0x314));
    }
  }
  *(undefined4 *)(in_ECX + 0x314) = 0;
  *(undefined4 *)(in_ECX + 0x274) = 0;
  local_c = 0xffffffff;
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
LAB_0089a9b7:
  local_c = 0xffffffff;
  local_24 = 0;
  local_34 = 0;
  local_20 = 7;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)&local_4c);
  return;
}



============================================================
DISASSEMBLY
============================================================
0089a610 : PUSH EBP
0089a611 : MOV EBP,ESP
0089a613 : AND ESP,0xfffffff8
0089a616 : PUSH -0x1
0089a618 : PUSH 0xb5fa3a
0089a61d : MOV EAX,FS:[0x0]
0089a623 : PUSH EAX
0089a624 : SUB ESP,0x38
0089a627 : MOV EAX,[0x00d66fa0]
0089a62c : XOR EAX,ESP
0089a62e : MOV dword ptr [ESP + 0x30],EAX
0089a632 : PUSH EBX
0089a633 : PUSH ESI
0089a634 : PUSH EDI
0089a635 : MOV EAX,[0x00d66fa0]
0089a63a : XOR EAX,ESP
0089a63c : PUSH EAX
0089a63d : LEA EAX,[ESP + 0x48]
0089a641 : MOV FS:[0x0],EAX
0089a647 : MOV EAX,dword ptr [EBP + 0x8]
0089a64a : MOV EDX,dword ptr [EBP + 0x18]
0089a64d : MOV ESI,ECX
0089a64f : MOV ECX,dword ptr [EBP + 0xc]
0089a652 : MOV dword ptr [ESP + 0x1c],ECX
0089a656 : PUSH -0x1
0089a658 : XOR EBX,EBX
0089a65a : XOR ECX,ECX
0089a65c : PUSH EBX
0089a65d : MOV word ptr [ESP + 0x30],CX
0089a662 : PUSH EAX
0089a663 : LEA ECX,[ESP + 0x30]
0089a667 : MOV dword ptr [ESP + 0x24],EDX
0089a66b : MOV dword ptr [ESP + 0x48],0x7
0089a673 : MOV dword ptr [ESP + 0x44],EBX
0089a677 : CALL 0x00405eb0
0089a67c : MOV dword ptr [ESP + 0x50],EBX
0089a680 : MOV EDX,dword ptr [ESI + 0xec]
0089a686 : MOV EDI,dword ptr [0x00d7c54c]
0089a68c : LEA EAX,[ESP + 0x10]
0089a690 : PUSH EAX
0089a691 : LEA ECX,[EDI + 0x40]
0089a694 : LEA EAX,[ESP + 0x18]
0089a698 : MOV dword ptr [ESP + 0x14],EDX
0089a69c : CALL 0x004437f0
0089a6a1 : MOV EDI,dword ptr [EDI + 0x44]
0089a6a4 : MOV EAX,dword ptr [ESP + 0x14]
0089a6a8 : CMP EAX,EDI
0089a6aa : JZ 0x0089a729
0089a6ac : MOV EDI,dword ptr [EAX + 0x10]
0089a6af : CMP EDI,EBX
0089a6b1 : JZ 0x0089a729
0089a6b3 : MOV EDX,dword ptr [EDI]
0089a6b5 : MOV EAX,dword ptr [EDX + 0x40]
0089a6b8 : MOV ECX,EDI
0089a6ba : CALL EAX
0089a6bc : TEST EAX,EAX
0089a6be : JZ 0x0089a729
0089a6c0 : CMP byte ptr [EDI + 0xa5e],0x2
0089a6c7 : JNZ 0x0089a729
0089a6c9 : MOVZX EAX,word ptr [ESI + 0x43a]
0089a6d0 : MOV ECX,0x1
0089a6d5 : CMP CX,AX
0089a6d8 : JZ 0x0089a729
0089a6da : MOV EDX,0x2
0089a6df : CMP DX,AX
0089a6e2 : JZ 0x0089a729
0089a6e4 : MOV ECX,0x1c
0089a6e9 : CMP CX,AX
0089a6ec : JZ 0x0089a729
0089a6ee : MOV EDX,0x1d
0089a6f3 : CMP DX,AX
0089a6f6 : JZ 0x0089a729
0089a6f8 : MOV ECX,0x19
0089a6fd : CMP CX,AX
0089a700 : JZ 0x0089a729
0089a702 : LEA EDX,[ESI + 0x4d8]
0089a708 : PUSH EDX
0089a709 : LEA EAX,[ESP + 0x28]
0089a70d : PUSH EAX
0089a70e : CALL 0x00898150
0089a713 : LEA ECX,[ESP + 0x24]
0089a717 : PUSH ECX
0089a718 : MOV EDX,0xc46c10
0089a71d : CALL 0x00405c00
0089a722 : MOV dword ptr [EBP + 0x14],0xa
0089a729 : MOV EAX,dword ptr [ESI + 0x314]
0089a72f : CMP EAX,0x2
0089a732 : JNC 0x0089a85f
0089a738 : MOV EDI,dword ptr [ESI + 0x274]
0089a73e : MOV ECX,dword ptr [0x00da93ec]
0089a744 : PUSH EDI
0089a745 : MOV EBX,ECX
0089a747 : CALL 0x00a1a840
0089a74c : TEST EAX,EAX
0089a74e : JNZ 0x0089a794
0089a750 : PUSH EDI
0089a751 : MOV ECX,EBX
0089a753 : CALL 0x00a1a6d0
0089a758 : TEST EAX,EAX
0089a75a : JNZ 0x0089a794
0089a75c : PUSH EDI
0089a75d : MOV ECX,EBX
0089a75f : CALL 0x00a1a780
0089a764 : TEST EAX,EAX
0089a766 : JNZ 0x0089a794
0089a768 : MOV dword ptr [ESP + 0x50],0xffffffff
0089a770 : CMP dword ptr [ESP + 0x3c],0x8
0089a775 : JC 0x0089a780
0089a777 : MOV ECX,dword ptr [ESP + 0x28]
0089a77b : CALL 0x006f04e0
0089a780 : XOR EDX,EDX
0089a782 : MOV dword ptr [ESP + 0x38],0x0
0089a78a : MOV word ptr [ESP + 0x28],DX
0089a78f : JMP 0x0089a9b7
0089a794 : MOV AL,byte ptr [ESI + 0xd9]
0089a79a : MOV EDX,dword ptr [ESI + 0x2c4]
0089a7a0 : MOV EBX,dword ptr [ESP + 0x18]
0089a7a4 : MOV byte ptr [ESP + 0x10],AL
0089a7a8 : MOV ECX,dword ptr [ESP + 0x10]
0089a7ac : MOV EAX,dword ptr [ESI + 0xec]
0089a7b2 : PUSH ECX
0089a7b3 : MOV ECX,dword ptr [ESP + 0x20]
0089a7b7 : PUSH EDX
0089a7b8 : PUSH EAX
0089a7b9 : MOV EAX,dword ptr [ESI + 0x274]
0089a7bf : PUSH EAX
0089a7c0 : PUSH ECX
0089a7c1 : LEA EDX,[ESP + 0x38]
0089a7c5 : PUSH EDX
0089a7c6 : MOV EDX,dword ptr [0x00da93ec]
0089a7cc : MOV ECX,EBX
0089a7ce : CALL 0x00a31f80
0089a7d3 : MOV EDI,EAX
0089a7d5 : XOR EAX,EAX
0089a7d7 : CMP EDI,EAX
0089a7d9 : JZ 0x0089a826
0089a7db : MOV EAX,dword ptr [EDI]
0089a7dd : MOV EDX,dword ptr [EAX + 0xc]
0089a7e0 : PUSH ESI
0089a7e1 : MOV ECX,EDI
0089a7e3 : CALL EDX
0089a7e5 : PUSH -0x1
0089a7e7 : PUSH 0x0
0089a7e9 : PUSH EBX
0089a7ea : LEA ECX,[EDI + 0xa4]
0089a7f0 : CALL 0x00405eb0
0089a7f5 : MOV EAX,dword ptr [EBP + 0x14]
0089a7f8 : CMP EAX,0x9
0089a7fb : JC 0x0089a802
0089a7fd : MOV EAX,0x9
0089a802 : MOV dword ptr [EDI + 0x2c],EAX
0089a805 : MOV EAX,dword ptr [ESI + 0x3e8]
0089a80b : TEST EAX,EAX
0089a80d : JZ 0x0089a824
0089a80f : MOVSS XMM0,dword ptr [EAX + 0xac]
0089a817 : MULSS XMM0,dword ptr [EBP + 0x10]
0089a81c : MOVSS dword ptr [EDI + 0xc0],XMM0
0089a824 : XOR EAX,EAX
0089a826 : MOV byte ptr [ESI + 0x4cf],0x0
0089a82d : MOV byte ptr [ESI + 0x4d0],0x0
0089a834 : MOV byte ptr [ESI + 0x124],0x0
0089a83b : MOV byte ptr [ESI + 0x125],0x1
0089a842 : MOV dword ptr [ESI + 0x128],EAX
0089a848 : MOV dword ptr [ESI + 0x118],EAX
0089a84e : MOV dword ptr [ESI + 0x12c],EAX
0089a854 : MOV dword ptr [ESI + 0x130],EAX
0089a85a : JMP 0x0089a986
0089a85f : MOV dword ptr [ESP + 0x10],EBX
0089a863 : CMP EAX,EBX
0089a865 : JBE 0x0089a988
0089a86b : LEA EAX,[ESI + 0x274]
0089a871 : MOV dword ptr [ESP + 0x14],EAX
0089a875 : MOV EDX,dword ptr [ESP + 0x14]
0089a879 : MOV EDI,dword ptr [EDX]
0089a87b : MOV ECX,dword ptr [0x00da93ec]
0089a881 : PUSH EDI
0089a882 : MOV EBX,ECX
0089a884 : CALL 0x00a1a840
0089a889 : TEST EAX,EAX
0089a88b : JNZ 0x0089a8a9
0089a88d : PUSH EDI
0089a88e : MOV ECX,EBX
0089a890 : CALL 0x00a1a6d0
0089a895 : TEST EAX,EAX
0089a897 : JNZ 0x0089a8a9
0089a899 : PUSH EDI
0089a89a : MOV ECX,EBX
0089a89c : CALL 0x00a1a780
0089a8a1 : TEST EAX,EAX
0089a8a3 : JZ 0x0089a96c
0089a8a9 : MOV AL,byte ptr [ESI + 0xd9]
0089a8af : MOV EBX,dword ptr [ESP + 0x18]
0089a8b3 : MOV byte ptr [ESP + 0x20],AL
0089a8b7 : MOV ECX,dword ptr [ESP + 0x20]
0089a8bb : MOV EAX,dword ptr [ESI + 0xec]
0089a8c1 : PUSH ECX
0089a8c2 : MOV ECX,dword ptr [ESP + 0x18]
0089a8c6 : MOV EDX,dword ptr [ECX + 0x50]
0089a8c9 : PUSH EDX
0089a8ca : PUSH EAX
0089a8cb : MOV EAX,dword ptr [ECX]
0089a8cd : MOV ECX,dword ptr [ESP + 0x28]
0089a8d1 : PUSH EAX
0089a8d2 : PUSH ECX
0089a8d3 : LEA EDX,[ESP + 0x38]
0089a8d7 : PUSH EDX
0089a8d8 : MOV EDX,dword ptr [0x00da93ec]
0089a8de : MOV ECX,EBX
0089a8e0 : CALL 0x00a31f80
0089a8e5 : MOV EDI,EAX
0089a8e7 : XOR EAX,EAX
0089a8e9 : CMP EDI,EAX
0089a8eb : JZ 0x0089a938
0089a8ed : MOV EAX,dword ptr [EDI]
0089a8ef : MOV EDX,dword ptr [EAX + 0xc]
0089a8f2 : PUSH ESI
0089a8f3 : MOV ECX,EDI
0089a8f5 : CALL EDX
0089a8f7 : PUSH -0x1
0089a8f9 : PUSH 0x0
0089a8fb : PUSH EBX
0089a8fc : LEA ECX,[EDI + 0xa4]
0089a902 : CALL 0x00405eb0
0089a907 : MOV EAX,dword ptr [EBP + 0x14]
0089a90a : CMP EAX,0x9
0089a90d : JC 0x0089a914
0089a90f : MOV EAX,0x9
0089a914 : MOV dword ptr [EDI + 0x2c],EAX
0089a917 : MOV EAX,dword ptr [ESI + 0x3e8]
0089a91d : TEST EAX,EAX
0089a91f : JZ 0x0089a936
0089a921 : MOVSS XMM0,dword ptr [EAX + 0xac]
0089a929 : MULSS XMM0,dword ptr [EBP + 0x10]
0089a92e : MOVSS dword ptr [EDI + 0xc0],XMM0
0089a936 : XOR EAX,EAX
0089a938 : MOV byte ptr [ESI + 0x4cf],0x0
0089a93f : MOV byte ptr [ESI + 0x4d0],0x0
0089a946 : MOV byte ptr [ESI + 0x124],0x0
0089a94d : MOV byte ptr [ESI + 0x125],0x1
0089a954 : MOV dword ptr [ESI + 0x128],EAX
0089a95a : MOV dword ptr [ESI + 0x118],EAX
0089a960 : MOV dword ptr [ESI + 0x12c],EAX
0089a966 : MOV dword ptr [ESI + 0x130],EAX
0089a96c : MOV EAX,dword ptr [ESP + 0x10]
0089a970 : ADD dword ptr [ESP + 0x14],0x4
0089a975 : INC EAX
0089a976 : MOV dword ptr [ESP + 0x10],EAX
0089a97a : CMP EAX,dword ptr [ESI + 0x314]
0089a980 : JC 0x0089a875
0089a986 : XOR EBX,EBX
0089a988 : MOV dword ptr [ESI + 0x314],EBX
0089a98e : MOV dword ptr [ESI + 0x274],EBX
0089a994 : MOV dword ptr [ESP + 0x50],0xffffffff
0089a99c : CMP dword ptr [ESP + 0x3c],0x8
0089a9a1 : JC 0x0089a9ac
0089a9a3 : MOV ECX,dword ptr [ESP + 0x28]
0089a9a7 : CALL 0x006f04e0
0089a9ac : XOR EAX,EAX
0089a9ae : MOV dword ptr [ESP + 0x38],EBX
0089a9b2 : MOV word ptr [ESP + 0x28],AX
0089a9b7 : MOV dword ptr [ESP + 0x3c],0x7
0089a9bf : MOV ECX,dword ptr [ESP + 0x48]
0089a9c3 : MOV dword ptr FS:[0x0],ECX
0089a9ca : POP ECX
0089a9cb : POP EDI
0089a9cc : POP ESI
0089a9cd : POP EBX
0089a9ce : MOV ECX,dword ptr [ESP + 0x30]
0089a9d2 : XOR ECX,ESP
0089a9d4 : CALL 0x00633e6b
0089a9d9 : MOV ESP,EBP
0089a9db : POP EBP
0089a9dc : RET 0x18
