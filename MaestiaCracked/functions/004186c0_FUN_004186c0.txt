PROGRAM  : Maestia.exe
FUNCTION : FUN_004186c0
ENTRY    : 004186c0
BODY     : [[004186c0, 004187fe]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004186c0(int param_1,int param_2,int param_3)

{
  undefined2 *puVar1;
  undefined2 *puVar2;
  int iVar3;
  void **ppvVar4;
  char cVar5;
  int iVar6;
  undefined4 in_stack_00000034;
  undefined4 in_stack_00000038;
  undefined1 auStack_50 [28];
  undefined4 uStack_34;
  undefined2 *puStack_30;
  undefined4 local_2c;
  undefined4 *puStack_28;
  uint uStack_24;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b79738;
  uStack_24 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_8 = 0;
  ppvVar4 = &local_10;
  local_10 = ExceptionList;
  iVar3 = param_2;
  while( true ) {
    ExceptionList = ppvVar4;
    iVar6 = iVar3 * 2 + 2;
    if (param_3 <= iVar6) break;
    puStack_28 = &stack0x00000038;
    local_2c = 0x418715;
    cVar5 = FUN_00418de0();
    if (cVar5 != '\0') {
      iVar6 = iVar3 * 2 + 1;
    }
    puVar1 = (undefined2 *)(param_1 + iVar6 * 0x28);
    puVar2 = (undefined2 *)(param_1 + iVar3 * 0x28);
    puStack_28 = (undefined4 *)0xffffffff;
    local_2c = 0;
    puStack_30 = puVar1 + 2;
    *puVar2 = *puVar1;
    puVar2[1] = puVar1[1];
    uStack_34 = 0x418747;
    FUN_00405eb0();
    *(undefined4 *)(puVar2 + 0x10) = *(undefined4 *)(puVar1 + 0x10);
    *(undefined4 *)(puVar2 + 0x12) = *(undefined4 *)(puVar1 + 0x12);
    ppvVar4 = ExceptionList;
    iVar3 = iVar6;
  }
  if (iVar6 == param_3) {
    puVar2 = (undefined2 *)(param_1 + -0x28 + param_3 * 0x28);
    puVar1 = (undefined2 *)(param_1 + iVar3 * 0x28);
    puStack_28 = (undefined4 *)0xffffffff;
    *puVar1 = *puVar2;
    local_2c = 0;
    puStack_30 = puVar2 + 2;
    puVar1[1] = puVar2[1];
    uStack_34 = 0x418793;
    FUN_00405eb0();
    *(undefined4 *)(puVar1 + 0x10) = *(undefined4 *)(puVar2 + 0x10);
    *(undefined4 *)(puVar1 + 0x12) = *(undefined4 *)(puVar2 + 0x12);
  }
  puStack_28 = (undefined4 *)in_stack_00000038;
  FUN_00416720(auStack_50);
  local_2c = in_stack_00000034;
  local_8 = local_8 & 0xffffff00;
  FUN_00418b20(param_1,param_2);
  local_8 = 0xffffffff;
  local_2c = 0x4187ed;
  puStack_28 = (undefined4 *)&stack0x00000010;
  FUN_004427d0();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
004186c0 : PUSH EBP
004186c1 : MOV EBP,ESP
004186c3 : PUSH -0x1
004186c5 : PUSH 0xb79738
004186ca : MOV EAX,FS:[0x0]
004186d0 : PUSH EAX
004186d1 : PUSH ECX
004186d2 : PUSH EBX
004186d3 : PUSH ESI
004186d4 : PUSH EDI
004186d5 : MOV EAX,[0x00d66fa0]
004186da : XOR EAX,EBP
004186dc : PUSH EAX
004186dd : LEA EAX,[EBP + -0xc]
004186e0 : MOV FS:[0x0],EAX
004186e6 : MOV EBX,dword ptr [EBP + 0xc]
004186e9 : MOV dword ptr [EBP + -0x4],0x0
004186f0 : MOV EDI,dword ptr [EBP + 0x10]
004186f3 : LEA ESI,[EBX + EBX*0x1 + 0x2]
004186f7 : CMP ESI,EDI
004186f9 : MOV dword ptr [EBP + 0xc],EBX
004186fc : JGE 0x00418763
004186fe : MOV EDI,EDI
00418700 : MOV EDI,dword ptr [EBP + 0x8]
00418703 : LEA EAX,[ESI + ESI*0x4]
00418706 : LEA EDX,[EDI + EAX*0x8]
00418709 : LEA ECX,[EBP + 0x3c]
0041870c : LEA EAX,[EDX + -0x28]
0041870f : PUSH ECX
00418710 : CALL 0x00418de0
00418715 : TEST AL,AL
00418717 : JZ 0x0041871a
00418719 : DEC ESI
0041871a : MOV ECX,dword ptr [EBP + 0x8]
0041871d : LEA EDX,[ESI + ESI*0x4]
00418720 : LEA EDI,[EDI + EDX*0x8]
00418723 : MOV DX,word ptr [EDI]
00418726 : LEA EAX,[EBX + EBX*0x4]
00418729 : LEA EBX,[ECX + EAX*0x8]
0041872c : PUSH -0x1
0041872e : PUSH 0x0
00418730 : LEA ECX,[EDI + 0x4]
00418733 : MOV word ptr [EBX],DX
00418736 : MOV AX,word ptr [EDI + 0x2]
0041873a : PUSH ECX
0041873b : LEA ECX,[EBX + 0x4]
0041873e : MOV word ptr [EBX + 0x2],AX
00418742 : CALL 0x00405eb0
00418747 : MOV EDX,dword ptr [EDI + 0x20]
0041874a : MOV dword ptr [EBX + 0x20],EDX
0041874d : MOV EAX,dword ptr [EDI + 0x24]
00418750 : MOV dword ptr [EBX + 0x24],EAX
00418753 : MOV EBX,ESI
00418755 : LEA ESI,[ESI + ESI*0x1 + 0x2]
00418759 : CMP ESI,dword ptr [EBP + 0x10]
0041875c : JL 0x00418700
0041875e : MOV EDI,dword ptr [EBP + 0x10]
00418761 : CMP ESI,EDI
00418763 : JNZ 0x004187a2
00418765 : MOV EAX,dword ptr [EBP + 0x8]
00418768 : LEA ECX,[EDI + EDI*0x4]
0041876b : LEA ESI,[EAX + ECX*0x8 + -0x28]
0041876f : LEA EDX,[EBX + EBX*0x4]
00418772 : LEA EBX,[EAX + EDX*0x8]
00418775 : MOV AX,word ptr [ESI]
00418778 : PUSH -0x1
0041877a : MOV word ptr [EBX],AX
0041877d : MOV CX,word ptr [ESI + 0x2]
00418781 : PUSH 0x0
00418783 : LEA EDX,[ESI + 0x4]
00418786 : MOV word ptr [EBX + 0x2],CX
0041878a : PUSH EDX
0041878b : LEA ECX,[EBX + 0x4]
0041878e : CALL 0x00405eb0
00418793 : MOV EAX,dword ptr [ESI + 0x20]
00418796 : MOV dword ptr [EBX + 0x20],EAX
00418799 : MOV ECX,dword ptr [ESI + 0x24]
0041879c : MOV dword ptr [EBX + 0x24],ECX
0041879f : LEA EBX,[EDI + -0x1]
004187a2 : MOV EDX,dword ptr [EBP + 0x3c]
004187a5 : PUSH EDX
004187a6 : SUB ESP,0x28
004187a9 : MOV ESI,ESP
004187ab : MOV dword ptr [EBP + 0x10],ESP
004187ae : PUSH ESI
004187af : LEA EDI,[EBP + 0x14]
004187b2 : MOV dword ptr [EBP + -0x10],ESI
004187b5 : CALL 0x00416720
004187ba : MOV byte ptr [EBP + -0x4],0x1
004187be : MOV EAX,dword ptr [EBP + 0x38]
004187c1 : MOV dword ptr [ESI + 0x24],EAX
004187c4 : MOV byte ptr [EBP + -0x4],0x2
004187c8 : MOV ECX,dword ptr [EBP + 0xc]
004187cb : MOV EDX,dword ptr [EBP + 0x8]
004187ce : PUSH ECX
004187cf : PUSH EDX
004187d0 : MOV byte ptr [EBP + -0x4],0x0
004187d4 : MOV ECX,EBX
004187d6 : CALL 0x00418b20
004187db : ADD ESP,0x34
004187de : MOV dword ptr [EBP + -0x4],0xffffffff
004187e5 : MOV EAX,EDI
004187e7 : PUSH EAX
004187e8 : CALL 0x004427d0
004187ed : MOV ECX,dword ptr [EBP + -0xc]
004187f0 : MOV dword ptr FS:[0x0],ECX
004187f7 : POP ECX
004187f8 : POP EDI
004187f9 : POP ESI
004187fa : POP EBX
004187fb : MOV ESP,EBP
004187fd : POP EBP
004187fe : RET
