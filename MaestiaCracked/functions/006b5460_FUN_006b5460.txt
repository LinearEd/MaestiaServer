PROGRAM  : Maestia.exe
FUNCTION : FUN_006b5460
ENTRY    : 006b5460
BODY     : [[006b5460, 006b555b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006b5460(ushort *param_1)

{
  int *piVar1;
  int *piVar2;
  undefined4 uVar3;
  int unaff_ESI;
  
  if ((*(ushort *)(unaff_ESI + 0x2c) <= *param_1) || (*(ushort *)(unaff_ESI + 0x50) <= param_1[2]))
  {
    if (*(char *)(unaff_ESI + 0x231) != '\0') {
      *(undefined4 *)(unaff_ESI + 0xc) = 0x86;
      return;
    }
    param_1[0] = 0;
    param_1[1] = 0;
    return;
  }
  if ((*(byte *)(unaff_ESI + 0x170) & 1) != 0) {
    uVar3 = (**(code **)(unaff_ESI + 0x23c))();
    *(undefined4 *)param_1 = uVar3;
    return;
  }
  piVar1 = (int *)(*(int *)(unaff_ESI + 0x38) + (uint)*param_1 * 8);
  piVar2 = (int *)(*(int *)(unaff_ESI + 0x5c) + (uint)param_1[2] * 8);
  if (*(int *)(unaff_ESI + 0xdc) == *(int *)(unaff_ESI + 0xe0)) {
    uVar3 = (**(code **)(unaff_ESI + 0x240))();
    uVar3 = FUN_00685ea0(uVar3,*(undefined4 *)(unaff_ESI + 0xdc));
    *(undefined4 *)param_1 = uVar3;
    return;
  }
  FUN_00685ea0(*piVar1 - *piVar2,*(int *)(unaff_ESI + 0xdc));
  FUN_00685ea0(piVar1[1] - piVar2[1],*(undefined4 *)(unaff_ESI + 0xe0));
  uVar3 = (**(code **)(unaff_ESI + 0x240))();
  *(undefined4 *)param_1 = uVar3;
  return;
}



============================================================
DISASSEMBLY
============================================================
006b5460 : PUSH EBX
006b5461 : PUSH EBP
006b5462 : MOV EBP,dword ptr [ESP + 0xc]
006b5466 : MOVZX EAX,word ptr [EBP]
006b546a : MOVZX ECX,word ptr [EBP + 0x4]
006b546e : PUSH EDI
006b546f : CMP AX,word ptr [ESI + 0x2c]
006b5473 : JNC 0x006b553f
006b5479 : CMP CX,word ptr [ESI + 0x50]
006b547d : JNC 0x006b553f
006b5483 : TEST byte ptr [ESI + 0x170],0x1
006b548a : MOVZX ECX,CX
006b548d : JZ 0x006b54bd
006b548f : MOV EDX,dword ptr [ESI + 0x58]
006b5492 : LEA ECX,[EDX + ECX*0x8]
006b5495 : MOV EDX,dword ptr [ESI + 0x34]
006b5498 : MOVZX EAX,AX
006b549b : LEA EAX,[EDX + EAX*0x8]
006b549e : MOV EDX,dword ptr [EAX + 0x4]
006b54a1 : SUB EDX,dword ptr [ECX + 0x4]
006b54a4 : MOV EAX,dword ptr [EAX]
006b54a6 : SUB EAX,dword ptr [ECX]
006b54a8 : MOV ECX,dword ptr [ESI + 0x23c]
006b54ae : PUSH EDX
006b54af : PUSH EAX
006b54b0 : PUSH ESI
006b54b1 : CALL ECX
006b54b3 : ADD ESP,0xc
006b54b6 : POP EDI
006b54b7 : MOV dword ptr [EBP],EAX
006b54ba : POP EBP
006b54bb : POP EBX
006b54bc : RET
006b54bd : MOVZX EDX,AX
006b54c0 : MOV EAX,dword ptr [ESI + 0x38]
006b54c3 : LEA EDI,[EAX + EDX*0x8]
006b54c6 : MOV EAX,dword ptr [ESI + 0xdc]
006b54cc : MOV EDX,dword ptr [ESI + 0x5c]
006b54cf : LEA EBX,[EDX + ECX*0x8]
006b54d2 : CMP EAX,dword ptr [ESI + 0xe0]
006b54d8 : JNZ 0x006b5506
006b54da : MOV EAX,dword ptr [EDI + 0x4]
006b54dd : SUB EAX,dword ptr [EBX + 0x4]
006b54e0 : MOV ECX,dword ptr [EDI]
006b54e2 : SUB ECX,dword ptr [EBX]
006b54e4 : MOV EDX,dword ptr [ESI + 0x240]
006b54ea : PUSH EAX
006b54eb : PUSH ECX
006b54ec : PUSH ESI
006b54ed : CALL EDX
006b54ef : MOV ECX,dword ptr [ESI + 0xdc]
006b54f5 : PUSH ECX
006b54f6 : PUSH EAX
006b54f7 : CALL 0x00685ea0
006b54fc : ADD ESP,0x14
006b54ff : POP EDI
006b5500 : MOV dword ptr [EBP],EAX
006b5503 : POP EBP
006b5504 : POP EBX
006b5505 : RET
006b5506 : MOV EDX,dword ptr [EDI]
006b5508 : SUB EDX,dword ptr [EBX]
006b550a : PUSH EAX
006b550b : PUSH EDX
006b550c : CALL 0x00685ea0
006b5511 : MOV ECX,dword ptr [EDI + 0x4]
006b5514 : SUB ECX,dword ptr [EBX + 0x4]
006b5517 : MOV EBP,EAX
006b5519 : MOV EAX,dword ptr [ESI + 0xe0]
006b551f : PUSH EAX
006b5520 : PUSH ECX
006b5521 : CALL 0x00685ea0
006b5526 : MOV EDX,dword ptr [ESI + 0x240]
006b552c : PUSH EAX
006b552d : PUSH EBP
006b552e : PUSH ESI
006b552f : CALL EDX
006b5531 : MOV EBP,dword ptr [ESP + 0x2c]
006b5535 : ADD ESP,0x1c
006b5538 : POP EDI
006b5539 : MOV dword ptr [EBP],EAX
006b553c : POP EBP
006b553d : POP EBX
006b553e : RET
006b553f : CMP byte ptr [ESI + 0x231],0x0
006b5546 : JZ 0x006b5553
006b5548 : POP EDI
006b5549 : POP EBP
006b554a : MOV dword ptr [ESI + 0xc],0x86
006b5551 : POP EBX
006b5552 : RET
006b5553 : XOR EAX,EAX
006b5555 : POP EDI
006b5556 : MOV dword ptr [EBP],EAX
006b5559 : POP EBP
006b555a : POP EBX
006b555b : RET
