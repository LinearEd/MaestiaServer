PROGRAM  : Maestia.exe
FUNCTION : FUN_00786160
ENTRY    : 00786160
BODY     : [[00786160, 007863e9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00786160(float *param_1,float *param_2,undefined4 param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  int *piVar4;
  int iVar5;
  int in_ECX;
  int *piVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  int *local_c;
  undefined4 local_8;
  
  local_24 = *(float *)(in_ECX + 0x40);
  local_20 = *(float *)(in_ECX + 0x44);
  local_1c = *(float *)(in_ECX + 0x48);
  local_18 = *(float *)(in_ECX + 0x4c);
  local_14 = *(float *)(in_ECX + 0x50);
  local_10 = *(float *)(in_ECX + 0x54);
  if (*(char *)(*(int *)(*(int *)(DAT_017251ac + 0x1a4) + 0xf0) + 0x2ab4) == '\0') {
    fVar8 = param_1[1];
    fVar1 = *param_2;
    fVar2 = param_2[1];
    fVar3 = param_2[2];
    fVar10 = fVar1 + *param_1 * 1500.0;
    fVar7 = fVar2 + fVar8 * 1500.0;
    fVar9 = fVar3 + param_1[2] * 1500.0;
    if ((fVar8 == 1.0) || (fVar8 == -1.0)) {
      fVar8 = fVar10;
      if (fVar10 < fVar1) {
        fVar8 = fVar1;
      }
      if (fVar8 < local_24) {
        return;
      }
      fVar8 = fVar9;
      if (fVar9 < fVar3) {
        fVar8 = fVar3;
      }
      if (fVar8 < local_1c) {
        return;
      }
      if (fVar1 < fVar10) {
        fVar10 = fVar1;
      }
      if (local_18 < fVar10) {
        return;
      }
      if (fVar3 < fVar9) {
        fVar9 = fVar3;
      }
      if (local_10 < fVar9) {
        return;
      }
    }
    else {
      fVar8 = fVar10;
      if (fVar10 < fVar1) {
        fVar8 = fVar1;
      }
      if (fVar8 < local_24) {
        return;
      }
      fVar8 = fVar7;
      if (fVar7 < fVar2) {
        fVar8 = fVar2;
      }
      if (fVar8 < local_20) {
        return;
      }
      fVar8 = fVar9;
      if (fVar9 < fVar3) {
        fVar8 = fVar3;
      }
      if (fVar8 < local_1c) {
        return;
      }
      if (fVar1 < fVar10) {
        fVar10 = fVar1;
      }
      if (local_18 < fVar10) {
        return;
      }
      if (fVar2 < fVar7) {
        fVar7 = fVar2;
      }
      if (local_14 < fVar7) {
        return;
      }
      if (fVar3 < fVar9) {
        fVar9 = fVar3;
      }
      if (local_10 < fVar9) {
        return;
      }
    }
  }
  iVar5 = D3DXBoxBoundProbe(&local_24,&local_18,param_2,param_1);
  if (iVar5 != 0) {
    piVar6 = *(int **)(in_ECX + 8);
    piVar4 = (int *)*piVar6;
    while (piVar4 != piVar6) {
      local_c = (int *)piVar4[10];
      if (((local_c != (int *)0x0) && ((char)local_c[0xc4] != '\0')) &&
         (((DAT_017251ac == 0 ||
           (((*(int *)(DAT_017251ac + 0x1a4) == 0 ||
             (iVar5 = *(int *)(*(int *)(DAT_017251ac + 0x1a4) + 0xf0), iVar5 == 0)) ||
            (*(char *)(iVar5 + 0x2ab4) != '\0')))) || (*(char *)((int)local_c + 0x311) == '\0')))) {
        local_8 = 0;
        iVar5 = (**(code **)(*local_c + 0xc4))(param_2,param_1,&local_8);
        if (iVar5 != 0) {
          FUN_00449610();
        }
      }
      FUN_00430160();
      piVar6 = *(int **)(in_ECX + 8);
    }
    piVar6 = (int *)(in_ECX + 0x18);
    iVar5 = 4;
    do {
      if (*piVar6 != 0) {
        FUN_00786160(param_1,param_2,param_3);
      }
      piVar6 = piVar6 + 1;
      iVar5 = iVar5 + -1;
    } while (iVar5 != 0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00786160 : PUSH EBP
00786161 : MOV EBP,ESP
00786163 : SUB ESP,0x20
00786166 : MOV EAX,[0x017251ac]
0078616b : PUSH EBX
0078616c : MOV EBX,dword ptr [EBP + 0x8]
0078616f : PUSH ESI
00786170 : MOV ESI,ECX
00786172 : MOVSS XMM0,dword ptr [ESI + 0x40]
00786177 : MOV ECX,dword ptr [EAX + 0x1a4]
0078617d : MOVSS dword ptr [EBP + -0x20],XMM0
00786182 : MOVSS XMM0,dword ptr [ESI + 0x44]
00786187 : MOVSS dword ptr [EBP + -0x1c],XMM0
0078618c : MOVSS XMM0,dword ptr [ESI + 0x48]
00786191 : MOVSS dword ptr [EBP + -0x18],XMM0
00786196 : MOVSS XMM0,dword ptr [ESI + 0x4c]
0078619b : MOVSS dword ptr [EBP + -0x14],XMM0
007861a0 : MOVSS XMM0,dword ptr [ESI + 0x50]
007861a5 : MOVSS dword ptr [EBP + -0x10],XMM0
007861aa : MOVSS XMM0,dword ptr [ESI + 0x54]
007861af : MOVSS dword ptr [EBP + -0xc],XMM0
007861b4 : MOV EDX,dword ptr [ECX + 0xf0]
007861ba : CMP byte ptr [EDX + 0x2ab4],0x0
007861c1 : PUSH EDI
007861c2 : MOV EDI,dword ptr [EBP + 0xc]
007861c5 : JNZ 0x0078631e
007861cb : MOVSS XMM3,dword ptr [0x00cdf158]
007861d3 : MOVSS XMM4,dword ptr [EBX + 0x4]
007861d8 : MOVSS XMM0,dword ptr [EBX]
007861dc : MOVSS XMM2,dword ptr [EBX + 0x8]
007861e1 : MOVSS XMM5,dword ptr [EDI]
007861e5 : UCOMISS XMM4,dword ptr [0x00c10fc4]
007861ec : MOVSS XMM6,dword ptr [EDI + 0x4]
007861f1 : MOVSS XMM7,dword ptr [EDI + 0x8]
007861f6 : MULSS XMM0,XMM3
007861fa : MULSS XMM2,XMM3
007861fe : MOVAPS XMM1,XMM4
00786201 : MULSS XMM1,XMM3
00786205 : MOVAPS XMM3,XMM5
00786208 : ADDSS XMM3,XMM0
0078620c : LAHF
0078620d : MOVAPS XMM0,XMM6
00786210 : ADDSS XMM0,XMM1
00786214 : MOVAPS XMM1,XMM7
00786217 : ADDSS XMM1,XMM2
0078621b : TEST AH,0x44
0078621e : JNP 0x007862c4
00786224 : MOVAPS XMM2,XMM4
00786227 : UCOMISS XMM2,dword ptr [0x00cdf0d0]
0078622e : LAHF
0078622f : TEST AH,0x44
00786232 : JNP 0x007862c4
00786238 : COMISS XMM5,XMM3
0078623b : JBE 0x00786242
0078623d : MOVAPS XMM2,XMM5
00786240 : JMP 0x00786245
00786242 : MOVAPS XMM2,XMM3
00786245 : MOVSS XMM4,dword ptr [EBP + -0x20]
0078624a : COMISS XMM4,XMM2
0078624d : JA 0x007863e1
00786253 : COMISS XMM6,XMM0
00786256 : JBE 0x0078625d
00786258 : MOVAPS XMM2,XMM6
0078625b : JMP 0x00786260
0078625d : MOVAPS XMM2,XMM0
00786260 : MOVSS XMM4,dword ptr [EBP + -0x1c]
00786265 : COMISS XMM4,XMM2
00786268 : JA 0x007863e1
0078626e : COMISS XMM7,XMM1
00786271 : JBE 0x00786278
00786273 : MOVAPS XMM2,XMM7
00786276 : JMP 0x0078627b
00786278 : MOVAPS XMM2,XMM1
0078627b : MOVSS XMM4,dword ptr [EBP + -0x18]
00786280 : COMISS XMM4,XMM2
00786283 : JA 0x007863e1
00786289 : COMISS XMM3,XMM5
0078628c : JBE 0x00786291
0078628e : MOVAPS XMM3,XMM5
00786291 : COMISS XMM3,dword ptr [EBP + -0x14]
00786295 : JA 0x007863e1
0078629b : COMISS XMM0,XMM6
0078629e : JBE 0x007862a3
007862a0 : MOVAPS XMM0,XMM6
007862a3 : COMISS XMM0,dword ptr [EBP + -0x10]
007862a7 : JA 0x007863e1
007862ad : COMISS XMM1,XMM7
007862b0 : JBE 0x007862b5
007862b2 : MOVAPS XMM1,XMM7
007862b5 : COMISS XMM1,dword ptr [EBP + -0xc]
007862b9 : JBE 0x0078631e
007862bb : POP EDI
007862bc : POP ESI
007862bd : POP EBX
007862be : MOV ESP,EBP
007862c0 : POP EBP
007862c1 : RET 0xc
007862c4 : COMISS XMM5,XMM3
007862c7 : JBE 0x007862ce
007862c9 : MOVAPS XMM0,XMM5
007862cc : JMP 0x007862d1
007862ce : MOVAPS XMM0,XMM3
007862d1 : MOVSS XMM2,dword ptr [EBP + -0x20]
007862d6 : COMISS XMM2,XMM0
007862d9 : JA 0x007863e1
007862df : COMISS XMM7,XMM1
007862e2 : JBE 0x007862e9
007862e4 : MOVAPS XMM0,XMM7
007862e7 : JMP 0x007862ec
007862e9 : MOVAPS XMM0,XMM1
007862ec : MOVSS XMM2,dword ptr [EBP + -0x18]
007862f1 : COMISS XMM2,XMM0
007862f4 : JA 0x007863e1
007862fa : COMISS XMM3,XMM5
007862fd : JBE 0x00786302
007862ff : MOVAPS XMM3,XMM5
00786302 : COMISS XMM3,dword ptr [EBP + -0x14]
00786306 : JA 0x007863e1
0078630c : COMISS XMM1,XMM7
0078630f : JBE 0x00786314
00786311 : MOVAPS XMM1,XMM7
00786314 : COMISS XMM1,dword ptr [EBP + -0xc]
00786318 : JA 0x007863e1
0078631e : PUSH EBX
0078631f : PUSH EDI
00786320 : LEA EAX,[EBP + -0x14]
00786323 : PUSH EAX
00786324 : LEA ECX,[EBP + -0x20]
00786327 : PUSH ECX
00786328 : CALL 0x00664cae
0078632d : TEST EAX,EAX
0078632f : JZ 0x007863e1
00786335 : MOV ECX,dword ptr [ESI + 0x8]
00786338 : MOV EAX,dword ptr [ECX]
0078633a : MOV dword ptr [EBP + 0x8],EAX
0078633d : CMP EAX,ECX
0078633f : JZ 0x007863bd
00786341 : MOV ECX,dword ptr [EAX + 0x28]
00786344 : MOV dword ptr [EBP + -0x8],ECX
00786347 : TEST ECX,ECX
00786349 : JZ 0x007863ad
0078634b : CMP byte ptr [ECX + 0x310],0x0
00786352 : JZ 0x007863ad
00786354 : MOV EAX,[0x017251ac]
00786359 : TEST EAX,EAX
0078635b : JZ 0x00786383
0078635d : MOV EAX,dword ptr [EAX + 0x1a4]
00786363 : TEST EAX,EAX
00786365 : JZ 0x00786383
00786367 : MOV EAX,dword ptr [EAX + 0xf0]
0078636d : TEST EAX,EAX
0078636f : JZ 0x00786383
00786371 : CMP byte ptr [EAX + 0x2ab4],0x0
00786378 : JNZ 0x00786383
0078637a : CMP byte ptr [ECX + 0x311],0x0
00786381 : JNZ 0x007863ad
00786383 : XORPS XMM0,XMM0
00786386 : LEA EAX,[EBP + -0x4]
00786389 : PUSH EAX
0078638a : MOVSS dword ptr [EBP + -0x4],XMM0
0078638f : MOV EDX,dword ptr [ECX]
00786391 : MOV EDX,dword ptr [EDX + 0xc4]
00786397 : PUSH EBX
00786398 : PUSH EDI
00786399 : CALL EDX
0078639b : TEST EAX,EAX
0078639d : JZ 0x007863ad
0078639f : MOV EDX,dword ptr [EBP + 0x10]
007863a2 : LEA EDI,[EBP + -0x8]
007863a5 : CALL 0x00449610
007863aa : MOV EDI,dword ptr [EBP + 0xc]
007863ad : LEA EDX,[EBP + 0x8]
007863b0 : CALL 0x00430160
007863b5 : MOV EAX,dword ptr [EBP + 0x8]
007863b8 : CMP EAX,dword ptr [ESI + 0x8]
007863bb : JNZ 0x00786341
007863bd : ADD ESI,0x18
007863c0 : MOV EDI,0x4
007863c5 : MOV ECX,dword ptr [ESI]
007863c7 : TEST ECX,ECX
007863c9 : JZ 0x007863d9
007863cb : MOV EAX,dword ptr [EBP + 0x10]
007863ce : MOV EDX,dword ptr [EBP + 0xc]
007863d1 : PUSH EAX
007863d2 : PUSH EDX
007863d3 : PUSH EBX
007863d4 : CALL 0x00786160
007863d9 : ADD ESI,0x4
007863dc : SUB EDI,0x1
007863df : JNZ 0x007863c5
007863e1 : POP EDI
007863e2 : POP ESI
007863e3 : POP EBX
007863e4 : MOV ESP,EBP
007863e6 : POP EBP
007863e7 : RET 0xc
