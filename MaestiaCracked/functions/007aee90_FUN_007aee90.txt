PROGRAM  : Maestia.exe
FUNCTION : FUN_007aee90
ENTRY    : 007aee90
BODY     : [[007aee90, 007af082]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_007aee90(float *param_1,undefined4 *param_2,undefined1 *param_3)

{
  int iVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  int *in_ECX;
  int in_EDX;
  undefined4 local_5c;
  undefined1 *local_58;
  int local_54;
  undefined1 *local_50;
  float *local_4c;
  undefined1 **local_48;
  undefined1 *local_2c [2];
  int local_24;
  undefined1 *local_20;
  undefined1 local_1c [4];
  int local_18;
  LPCRITICAL_SECTION local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3c599;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(char *)(in_EDX + 700) != '\0') && (*(char *)(in_EDX + 0x2bd) != '\0')) {
    local_14 = (LPCRITICAL_SECTION)(in_EDX + 0x2470);
    local_48 = (undefined1 **)0x7aeede;
    EnterCriticalSection(local_14);
    local_8 = 0;
    iVar1 = *(int *)(in_EDX + 0x37c);
    local_48 = (undefined1 **)0x0;
    local_4c = param_1;
    *param_3 = 0;
    local_58 = (undefined1 *)0x7aef02;
    cVar3 = FUN_007ac0b0();
    if (cVar3 != '\0') {
      local_54 = in_ECX[1];
      local_58 = (undefined1 *)*in_ECX;
      local_48 = local_2c;
      local_5c = *(undefined4 *)(in_EDX + 0x278);
      local_4c = (float *)&local_18;
      local_50 = local_1c;
      local_24 = local_54;
      local_20 = local_58;
      FUN_007deaf0();
      iVar4 = FUN_0045ea30();
      if (iVar4 == 0) {
        local_48 = (undefined1 **)0x7aef81;
        FUN_008018d0();
      }
      else if (0 < (*(int *)(iVar4 + 0xc) - *(int *)(iVar4 + 8)) / 7) {
        local_50 = local_20;
        local_4c = (float *)0x461c4000;
        local_48 = (undefined1 **)local_24;
        local_2c[0] = (undefined1 *)&local_5c;
        local_18 = 0;
        local_5c = 0;
        local_58 = (undefined1 *)0xbf800000;
        local_54 = 0;
        FUN_007ae8a0(iVar1,&local_18);
        if ((0 < local_18) && (iVar4 = 0, 0 < local_18)) {
          do {
            iVar2 = *(int *)(iVar1 + iVar4 * 4);
            if (*param_1 <= *(float *)(iVar2 + 0x20) && *(float *)(iVar2 + 0x20) != *param_1) {
              if (param_2 != (undefined4 *)0x0) {
                *param_2 = *(undefined4 *)(iVar2 + 0x28);
                param_2[1] = *(undefined4 *)(iVar2 + 0x2c);
                param_2[2] = *(undefined4 *)(iVar2 + 0x30);
              }
              *param_3 = 1;
              *param_1 = *(float *)(*(int *)(iVar1 + iVar4 * 4) + 0x20);
            }
            iVar4 = iVar4 + 1;
          } while (iVar4 < local_18);
        }
      }
      local_8 = 0xffffffff;
      local_48 = (undefined1 **)0x7af06d;
      LeaveCriticalSection(local_14);
      ExceptionList = local_10;
      return 1;
    }
    local_8 = 0xffffffff;
    local_48 = (undefined1 **)0x7aef17;
    LeaveCriticalSection(local_14);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007aee90 : PUSH EBP
007aee91 : MOV EBP,ESP
007aee93 : PUSH -0x1
007aee95 : PUSH 0xb3c599
007aee9a : MOV EAX,FS:[0x0]
007aeea0 : PUSH EAX
007aeea1 : SUB ESP,0x20
007aeea4 : PUSH EBX
007aeea5 : PUSH ESI
007aeea6 : PUSH EDI
007aeea7 : MOV EAX,[0x00d66fa0]
007aeeac : XOR EAX,EBP
007aeeae : PUSH EAX
007aeeaf : LEA EAX,[EBP + -0xc]
007aeeb2 : MOV FS:[0x0],EAX
007aeeb8 : MOV ESI,ECX
007aeeba : MOV EDI,EDX
007aeebc : CMP byte ptr [EDI + 0x2bc],0x0
007aeec3 : JZ 0x007aef17
007aeec5 : CMP byte ptr [EDI + 0x2bd],0x0
007aeecc : JZ 0x007aef17
007aeece : LEA EAX,[EDI + 0x2470]
007aeed4 : PUSH EAX
007aeed5 : MOV dword ptr [EBP + -0x10],EAX
007aeed8 : CALL dword ptr [0x00b85118]
007aeede : MOV dword ptr [EBP + -0x4],0x0
007aeee5 : MOV ECX,dword ptr [EBP + 0xc]
007aeee8 : MOV EDX,dword ptr [EBP + 0x8]
007aeeeb : MOV EAX,dword ptr [EBP + 0x10]
007aeeee : MOV EBX,dword ptr [EDI + 0x37c]
007aeef4 : PUSH ECX
007aeef5 : PUSH 0x0
007aeef7 : PUSH EDX
007aeef8 : PUSH ESI
007aeef9 : PUSH EDI
007aeefa : MOV byte ptr [EAX],0x0
007aeefd : CALL 0x007ac0b0
007aef02 : TEST AL,AL
007aef04 : JNZ 0x007aef2d
007aef06 : MOV dword ptr [EBP + -0x4],0xffffffff
007aef0d : MOV EAX,dword ptr [EBP + -0x10]
007aef10 : PUSH EAX
007aef11 : CALL dword ptr [0x00b8511c]
007aef17 : XOR AL,AL
007aef19 : MOV ECX,dword ptr [EBP + -0xc]
007aef1c : MOV dword ptr FS:[0x0],ECX
007aef23 : POP ECX
007aef24 : POP EDI
007aef25 : POP ESI
007aef26 : POP EBX
007aef27 : MOV ESP,EBP
007aef29 : POP EBP
007aef2a : RET 0xc
007aef2d : FLD float ptr [ESI + 0x4]
007aef30 : LEA ECX,[EBP + -0x24]
007aef33 : PUSH ECX
007aef34 : FST float ptr [EBP + -0x20]
007aef37 : FLD float ptr [ESI]
007aef39 : LEA EDX,[EBP + -0x28]
007aef3c : PUSH EDX
007aef3d : FST float ptr [EBP + -0x1c]
007aef40 : MOV EDX,dword ptr [EDI + 0x278]
007aef46 : FXCH
007aef48 : LEA EAX,[EBP + -0x14]
007aef4b : PUSH EAX
007aef4c : LEA ECX,[EBP + -0x18]
007aef4f : PUSH ECX
007aef50 : SUB ESP,0x8
007aef53 : FSTP float ptr [ESP + 0x4]
007aef57 : FSTP float ptr [ESP]
007aef5a : PUSH EDX
007aef5b : CALL 0x007deaf0
007aef60 : MOV ESI,dword ptr [EBP + -0x14]
007aef63 : MOV EDX,dword ptr [EBP + -0x18]
007aef66 : MOV ECX,EDI
007aef68 : CALL 0x0045ea30
007aef6d : TEST EAX,EAX
007aef6f : JNZ 0x007aef94
007aef71 : MOV ESI,dword ptr [0x00da98e8]
007aef77 : PUSH 0xc181f8
007aef7c : CALL 0x008018d0
007aef81 : ADD ESP,0x4
007aef84 : MOV dword ptr [EBP + -0x4],0xffffffff
007aef8b : MOV EAX,dword ptr [EBP + -0x10]
007aef8e : PUSH EAX
007aef8f : JMP 0x007af067
007aef94 : MOV ECX,dword ptr [EAX + 0xc]
007aef97 : SUB ECX,dword ptr [EAX + 0x8]
007aef9a : MOV EAX,0x92492493
007aef9f : IMUL ECX
007aefa1 : ADD EDX,ECX
007aefa3 : SAR EDX,0x2
007aefa6 : MOV EAX,EDX
007aefa8 : SHR EAX,0x1f
007aefab : ADD EAX,EDX
007aefad : CMP EAX,0x1
007aefb0 : JL 0x007af05c
007aefb6 : MOVSS XMM0,dword ptr [EBP + -0x1c]
007aefbb : MOVSS XMM1,dword ptr [EBP + -0x20]
007aefc0 : PUSH 0x1
007aefc2 : SUB ESP,0xc
007aefc5 : MOV EAX,ESP
007aefc7 : MOVSS dword ptr [EAX],XMM0
007aefcb : MOVSS XMM0,dword ptr [0x00cdf288]
007aefd3 : MOV dword ptr [EBP + -0x28],ESP
007aefd6 : MOVSS dword ptr [EAX + 0x4],XMM0
007aefdb : XORPS XMM0,XMM0
007aefde : MOVSS dword ptr [EAX + 0x8],XMM1
007aefe3 : MOVSS XMM1,dword ptr [0x00cdf0d0]
007aefeb : SUB ESP,0xc
007aefee : MOV EAX,ESP
007aeff0 : MOV dword ptr [EBP + -0x28],ESP
007aeff3 : LEA ECX,[EBP + -0x14]
007aeff6 : PUSH ECX
007aeff7 : PUSH EBX
007aeff8 : MOV ECX,EDI
007aeffa : MOV dword ptr [EBP + -0x14],0x0
007af001 : MOVSS dword ptr [EAX],XMM0
007af005 : MOVSS dword ptr [EAX + 0x4],XMM1
007af00a : MOVSS dword ptr [EAX + 0x8],XMM0
007af00f : CALL 0x007ae8a0
007af014 : MOV EDI,dword ptr [EBP + -0x14]
007af017 : TEST EDI,EDI
007af019 : JLE 0x007af05c
007af01b : XOR EAX,EAX
007af01d : TEST EDI,EDI
007af01f : JLE 0x007af05c
007af021 : MOV ECX,dword ptr [EBX + EAX*0x4]
007af024 : MOV ESI,dword ptr [EBP + 0x8]
007af027 : MOVSS XMM0,dword ptr [ECX + 0x20]
007af02c : COMISS XMM0,dword ptr [ESI]
007af02f : JBE 0x007af057
007af031 : MOV EDX,dword ptr [EBP + 0xc]
007af034 : TEST EDX,EDX
007af036 : JZ 0x007af049
007af038 : FLD float ptr [ECX + 0x28]
007af03b : FSTP float ptr [EDX]
007af03d : FLD float ptr [ECX + 0x2c]
007af040 : FSTP float ptr [EDX + 0x4]
007af043 : FLD float ptr [ECX + 0x30]
007af046 : FSTP float ptr [EDX + 0x8]
007af049 : MOV EDX,dword ptr [EBP + 0x10]
007af04c : MOV byte ptr [EDX],0x1
007af04f : MOV ECX,dword ptr [EBX + EAX*0x4]
007af052 : FLD float ptr [ECX + 0x20]
007af055 : FSTP float ptr [ESI]
007af057 : INC EAX
007af058 : CMP EAX,EDI
007af05a : JL 0x007af021
007af05c : MOV dword ptr [EBP + -0x4],0xffffffff
007af063 : MOV EDX,dword ptr [EBP + -0x10]
007af066 : PUSH EDX
007af067 : CALL dword ptr [0x00b8511c]
007af06d : MOV AL,0x1
007af06f : MOV ECX,dword ptr [EBP + -0xc]
007af072 : MOV dword ptr FS:[0x0],ECX
007af079 : POP ECX
007af07a : POP EDI
007af07b : POP ESI
007af07c : POP EBX
007af07d : MOV ESP,EBP
007af07f : POP EBP
007af080 : RET 0xc
