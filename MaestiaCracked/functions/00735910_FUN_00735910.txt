PROGRAM  : Maestia.exe
FUNCTION : FUN_00735910
ENTRY    : 00735910
BODY     : [[00735910, 00735b9e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00735910(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  int iVar8;
  int in_ECX;
  uint uVar9;
  undefined4 *puVar10;
  uint uVar11;
  uint uVar12;
  uint local_28;
  
  iVar7 = FUN_0070a3a0();
  fVar4 = DAT_00d72c24;
  uVar6 = 0;
  if (*(short *)(in_ECX + 0x10) != 0) {
    do {
      uVar11 = (uint)uVar6;
      puVar10 = (undefined4 *)(iVar7 + uVar11 * 0x44);
      iVar8 = uVar11 * 0xc;
      *puVar10 = *(undefined4 *)(iVar8 + param_1);
      puVar10[1] = *(undefined4 *)(iVar8 + 4 + param_1);
      puVar10[2] = *(undefined4 *)(iVar8 + 8 + param_1);
      puVar10[3] = *(undefined4 *)(iVar8 + param_2);
      puVar10[4] = *(undefined4 *)(iVar8 + 4 + param_2);
      puVar10[5] = *(undefined4 *)(iVar8 + 8 + param_2);
      puVar10[7] = *(undefined4 *)(param_3 + uVar11 * 8);
      puVar10[8] = *(undefined4 *)(param_3 + 4 + uVar11 * 8);
      if (param_4 == 0) {
        puVar10[6] = 0xffffffff;
      }
      else {
        fVar1 = *(float *)(iVar8 + param_4);
        fVar2 = *(float *)(iVar8 + 4 + param_4);
        fVar3 = *(float *)(iVar8 + 8 + param_4);
        if (fVar1 < 1.0) {
          if (0.0 < fVar1) {
            local_28 = (uint)(longlong)ROUND(fVar1 * 255.0 + fVar4);
            uVar9 = local_28;
          }
          else {
            uVar9 = 0;
          }
        }
        else {
          uVar9 = 0xff;
        }
        if (fVar2 < 1.0) {
          if (0.0 < fVar2) {
            local_28 = (uint)(longlong)ROUND(fVar2 * 255.0 + fVar4);
            uVar12 = local_28;
          }
          else {
            uVar12 = 0;
          }
        }
        else {
          uVar12 = 0xff;
        }
        if (fVar3 < 1.0) {
          if (0.0 < fVar3) {
            local_28 = (uint)(longlong)ROUND(fVar3 * 255.0 + fVar4);
          }
          else {
            local_28 = 0;
          }
        }
        else {
          local_28 = 0xff;
        }
        puVar10[6] = ((uVar9 | 0xffffff00) << 8 | uVar12) << 8 | local_28;
      }
      iVar8 = uVar11 * 0x10 + param_5;
      puVar10[9] = *(undefined4 *)(uVar11 * 0x10 + param_5);
      puVar10[10] = *(undefined4 *)(iVar8 + 4);
      puVar10[0xb] = *(undefined4 *)(iVar8 + 8);
      uVar5 = 0;
      puVar10[0xc] = *(undefined4 *)(iVar8 + 0xc);
      if (*(short *)(param_6 + uVar11 * 8) == 0) {
LAB_00735b37:
        puVar10 = (undefined4 *)(iVar7 + 0x34 + (uVar11 * 0x11 + (uint)uVar5) * 4);
        uVar11 = (uint)(ushort)(2 - uVar5);
        do {
          puVar10[2] = 0;
          *puVar10 = 0;
          puVar10 = puVar10 + 1;
          uVar11 = uVar11 - 1;
        } while (uVar11 != 0);
      }
      else {
        do {
          uVar9 = (uint)uVar5;
          iVar8 = uVar11 * 0x11 + uVar9;
          *(float *)(iVar7 + 0x3c + iVar8 * 4) =
               (float)*(ushort *)(*(int *)(param_6 + 4 + uVar11 * 8) + 4 + uVar9 * 8);
          *(undefined4 *)(iVar7 + 0x34 + iVar8 * 4) =
               *(undefined4 *)(*(int *)(param_6 + 4 + uVar11 * 8) + uVar9 * 8);
          uVar5 = uVar5 + 1;
        } while (uVar5 < *(ushort *)(param_6 + uVar11 * 8));
        if (uVar5 < 2) goto LAB_00735b37;
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(ushort *)(in_ECX + 0x10));
  }
  FUN_007377f0(iVar7);
  FUN_0070a260(iVar7);
  return;
}



============================================================
DISASSEMBLY
============================================================
00735910 : PUSH EBP
00735911 : MOV EBP,ESP
00735913 : AND ESP,0xfffffff8
00735916 : SUB ESP,0x2c
00735919 : PUSH EBX
0073591a : PUSH ESI
0073591b : PUSH EDI
0073591c : MOV EDI,ECX
0073591e : MOVZX EAX,word ptr [EDI + 0x10]
00735922 : MOV ECX,EAX
00735924 : SHL ECX,0x4
00735927 : ADD ECX,EAX
00735929 : ADD ECX,ECX
0073592b : ADD ECX,ECX
0073592d : MOV dword ptr [ESP + 0x24],EDI
00735931 : CALL 0x0070a3a0
00735936 : MOV ESI,EAX
00735938 : XOR EAX,EAX
0073593a : XOR ECX,ECX
0073593c : MOV dword ptr [ESP + 0x10],ESI
00735940 : MOV dword ptr [ESP + 0x14],EAX
00735944 : CMP CX,word ptr [EDI + 0x10]
00735948 : JNC 0x00735b85
0073594e : FLD float ptr [0x00cdf130]
00735954 : MOV EBX,dword ptr [EBP + 0xc]
00735957 : MOVSS XMM4,dword ptr [0x00c10fc4]
0073595f : FLD float ptr [0x00d72c24]
00735965 : XORPS XMM2,XMM2
00735968 : MOVZX EDX,AX
0073596b : MOV ECX,EDX
0073596d : SHL ECX,0x4
00735970 : LEA EAX,[EDX + EDX*0x2]
00735973 : ADD ECX,EDX
00735975 : LEA ECX,[ESI + ECX*0x4]
00735978 : MOV ESI,dword ptr [EBP + 0x8]
0073597b : ADD EAX,EAX
0073597d : ADD EAX,EAX
0073597f : FLD float ptr [EAX + ESI*0x1]
00735982 : FSTP float ptr [ECX]
00735984 : FLD float ptr [EAX + ESI*0x1 + 0x4]
00735988 : FSTP float ptr [ECX + 0x4]
0073598b : FLD float ptr [EAX + ESI*0x1 + 0x8]
0073598f : MOV ESI,dword ptr [EBP + 0x10]
00735992 : FSTP float ptr [ECX + 0x8]
00735995 : FLD float ptr [EAX + EBX*0x1]
00735998 : FSTP float ptr [ECX + 0xc]
0073599b : FLD float ptr [EAX + EBX*0x1 + 0x4]
0073599f : FSTP float ptr [ECX + 0x10]
007359a2 : FLD float ptr [EAX + EBX*0x1 + 0x8]
007359a6 : FSTP float ptr [ECX + 0x14]
007359a9 : FLD float ptr [ESI + EDX*0x8]
007359ac : FSTP float ptr [ECX + 0x1c]
007359af : FLD float ptr [ESI + EDX*0x8 + 0x4]
007359b3 : MOV ESI,dword ptr [EBP + 0x14]
007359b6 : FSTP float ptr [ECX + 0x20]
007359b9 : TEST ESI,ESI
007359bb : JNZ 0x007359c9
007359bd : MOV dword ptr [ECX + 0x18],0xffffffff
007359c4 : JMP 0x00735abc
007359c9 : MOVSS XMM0,dword ptr [EAX + ESI*0x1]
007359ce : COMISS XMM0,XMM4
007359d1 : MOVSS XMM1,dword ptr [EAX + ESI*0x1 + 0x4]
007359d7 : MOVSS XMM3,dword ptr [EAX + ESI*0x1 + 0x8]
007359dd : MOVSS dword ptr [ESP + 0x28],XMM0
007359e3 : MOVSS dword ptr [ESP + 0x2c],XMM1
007359e9 : MOVSS dword ptr [ESP + 0x30],XMM3
007359ef : JC 0x007359f8
007359f1 : MOV ESI,0xff
007359f6 : JMP 0x00735a2b
007359f8 : COMISS XMM2,XMM0
007359fb : JC 0x00735a01
007359fd : XOR ESI,ESI
007359ff : JMP 0x00735a2b
00735a01 : FLD float ptr [ESP + 0x28]
00735a05 : FNSTCW word ptr [ESP + 0xe]
00735a09 : MOVZX EAX,word ptr [ESP + 0xe]
00735a0e : FMUL ST2
00735a10 : OR EAX,0xc00
00735a15 : MOV dword ptr [ESP + 0x18],EAX
00735a19 : FADD ST0,ST1
00735a1b : FLDCW word ptr [ESP + 0x18]
00735a1f : FISTP qword ptr [ESP + 0x18]
00735a23 : MOV ESI,dword ptr [ESP + 0x18]
00735a27 : FLDCW word ptr [ESP + 0xe]
00735a2b : COMISS XMM1,XMM4
00735a2e : JC 0x00735a37
00735a30 : MOV EDI,0xff
00735a35 : JMP 0x00735a6a
00735a37 : COMISS XMM2,XMM1
00735a3a : JC 0x00735a40
00735a3c : XOR EDI,EDI
00735a3e : JMP 0x00735a6a
00735a40 : FLD float ptr [ESP + 0x2c]
00735a44 : FNSTCW word ptr [ESP + 0xe]
00735a48 : MOVZX EAX,word ptr [ESP + 0xe]
00735a4d : FMUL ST2
00735a4f : OR EAX,0xc00
00735a54 : MOV dword ptr [ESP + 0x18],EAX
00735a58 : FADD ST0,ST1
00735a5a : FLDCW word ptr [ESP + 0x18]
00735a5e : FISTP qword ptr [ESP + 0x18]
00735a62 : MOV EDI,dword ptr [ESP + 0x18]
00735a66 : FLDCW word ptr [ESP + 0xe]
00735a6a : COMISS XMM3,XMM4
00735a6d : JC 0x00735a76
00735a6f : MOV EAX,0xff
00735a74 : JMP 0x00735aa9
00735a76 : COMISS XMM2,XMM3
00735a79 : JC 0x00735a7f
00735a7b : XOR EAX,EAX
00735a7d : JMP 0x00735aa9
00735a7f : FLD float ptr [ESP + 0x30]
00735a83 : FNSTCW word ptr [ESP + 0xe]
00735a87 : MOVZX EAX,word ptr [ESP + 0xe]
00735a8c : FMUL ST2
00735a8e : OR EAX,0xc00
00735a93 : MOV dword ptr [ESP + 0x18],EAX
00735a97 : FADD ST0,ST1
00735a99 : FLDCW word ptr [ESP + 0x18]
00735a9d : FISTP qword ptr [ESP + 0x18]
00735aa1 : MOV EAX,dword ptr [ESP + 0x18]
00735aa5 : FLDCW word ptr [ESP + 0xe]
00735aa9 : OR ESI,0xffffff00
00735aaf : SHL ESI,0x8
00735ab2 : OR ESI,EDI
00735ab4 : SHL ESI,0x8
00735ab7 : OR ESI,EAX
00735ab9 : MOV dword ptr [ECX + 0x18],ESI
00735abc : MOV ESI,dword ptr [EBP + 0x18]
00735abf : MOV EAX,EDX
00735ac1 : SHL EAX,0x4
00735ac4 : FLD float ptr [EAX + ESI*0x1]
00735ac7 : ADD EAX,ESI
00735ac9 : MOV ESI,dword ptr [EBP + 0x1c]
00735acc : FSTP float ptr [ECX + 0x24]
00735acf : FLD float ptr [EAX + 0x4]
00735ad2 : FSTP float ptr [ECX + 0x28]
00735ad5 : FLD float ptr [EAX + 0x8]
00735ad8 : FSTP float ptr [ECX + 0x2c]
00735adb : FLD float ptr [EAX + 0xc]
00735ade : XOR EAX,EAX
00735ae0 : FSTP float ptr [ECX + 0x30]
00735ae3 : XOR ECX,ECX
00735ae5 : CMP CX,word ptr [ESI + EDX*0x8]
00735ae9 : JNC 0x00735b37
00735aeb : MOV EDI,EDX
00735aed : SHL EDI,0x4
00735af0 : ADD EDI,EDX
00735af2 : MOV EBX,dword ptr [EBP + 0x1c]
00735af5 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
00735af9 : MOVZX ECX,AX
00735afc : MOVZX EBX,word ptr [EBX + ECX*0x8 + 0x4]
00735b01 : CVTSI2SS XMM0,EBX
00735b05 : MOV EBX,dword ptr [ESP + 0x10]
00735b09 : LEA ESI,[EDI + ECX*0x1]
00735b0c : MOVSS dword ptr [EBX + ESI*0x4 + 0x3c],XMM0
00735b12 : MOV EBX,dword ptr [EBP + 0x1c]
00735b15 : MOV EBX,dword ptr [EBX + EDX*0x8 + 0x4]
00735b19 : FLD float ptr [EBX + ECX*0x8]
00735b1c : MOV ECX,dword ptr [ESP + 0x10]
00735b20 : FSTP float ptr [ECX + ESI*0x4 + 0x34]
00735b24 : MOV ECX,dword ptr [EBP + 0x1c]
00735b27 : INC EAX
00735b28 : CMP AX,word ptr [ECX + EDX*0x8]
00735b2c : JC 0x00735af2
00735b2e : MOV EBX,dword ptr [EBP + 0xc]
00735b31 : CMP AX,0x2
00735b35 : JNC 0x00735b66
00735b37 : MOV ECX,EDX
00735b39 : SHL ECX,0x4
00735b3c : ADD ECX,EDX
00735b3e : MOVZX EDX,AX
00735b41 : ADD ECX,EDX
00735b43 : MOV EDX,dword ptr [ESP + 0x10]
00735b47 : LEA ECX,[EDX + ECX*0x4 + 0x34]
00735b4b : MOV EDX,0x2
00735b50 : SUB EDX,EAX
00735b52 : MOVZX EAX,DX
00735b55 : MOVSS dword ptr [ECX + 0x8],XMM2
00735b5a : MOVSS dword ptr [ECX],XMM2
00735b5e : ADD ECX,0x4
00735b61 : SUB EAX,0x1
00735b64 : JNZ 0x00735b55
00735b66 : MOV EAX,dword ptr [ESP + 0x14]
00735b6a : MOV EDI,dword ptr [ESP + 0x24]
00735b6e : MOV ESI,dword ptr [ESP + 0x10]
00735b72 : INC EAX
00735b73 : MOV dword ptr [ESP + 0x14],EAX
00735b77 : CMP AX,word ptr [EDI + 0x10]
00735b7b : JC 0x00735968
00735b81 : FSTP ST1
00735b83 : FSTP ST0
00735b85 : PUSH ESI
00735b86 : MOV ECX,EDI
00735b88 : CALL 0x007377f0
00735b8d : PUSH ESI
00735b8e : CALL 0x0070a260
00735b93 : ADD ESP,0x4
00735b96 : POP EDI
00735b97 : POP ESI
00735b98 : POP EBX
00735b99 : MOV ESP,EBP
00735b9b : POP EBP
00735b9c : RET 0x18
