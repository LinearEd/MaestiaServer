PROGRAM  : Maestia.exe
FUNCTION : FUN_00482020
ENTRY    : 00482020
BODY     : [[00482020, 0048217e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00482020(undefined4 param_1,int param_2)

{
  char cVar1;
  uint uVar2;
  int in_ECX;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7f678;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((*(char *)(in_ECX + 8) != '\0') && (*(int *)(in_ECX + 0x1a4) != 0)) {
    local_24 = (LPCRITICAL_SECTION)(DAT_017251ac + 0x424);
    local_18 = 0;
    local_20 = ".\\Scaleform\\GRendererD3DxImpl.cpp";
    local_1c = 0xda1;
    local_14 = 1;
    FUN_006ef1a0(&local_24);
    local_8 = 0;
    if (*(int *)(in_ECX + 0x18) != 1) {
      *(undefined4 *)(in_ECX + 0x18) = 1;
      (**(code **)(**(int **)(in_ECX + 0xf0) + 0x15c))
                (*(int **)(in_ECX + 0xf0),*(undefined4 *)(in_ECX + 0x30),uVar2);
    }
    if (*(int *)(in_ECX + 0x1c) != 1) {
      *(undefined4 *)(in_ECX + 0x1c) = 1;
      (**(code **)(**(int **)(in_ECX + 0xf0) + 0x170))
                (*(int **)(in_ECX + 0xf0),*(undefined4 *)(in_ECX + 0x44));
    }
    FUN_00480480(in_ECX + 0x378);
    FUN_00481930();
    cVar1 = FUN_007890e0(param_1);
    if (cVar1 != '\0') {
      (**(code **)(**(int **)(in_ECX + 0xf0) + 0x144))
                (*(int **)(in_ECX + 0xf0),3,*(undefined4 *)(in_ECX + 0x1e0),param_2);
      *(int *)(in_ECX + 0x2c0) = *(int *)(in_ECX + 0x2c0) + param_2;
      *(int *)(in_ECX + 0x2c4) = *(int *)(in_ECX + 0x2c4) + 1;
      *(int *)(in_ECX + 0x2ec) = *(int *)(in_ECX + 0x2ec) + 1;
      *(int *)(in_ECX + 0x2f4) = *(int *)(in_ECX + 0x2f4) + param_2;
    }
    if (local_18 != 0) {
      local_8 = 0xffffffff;
      LeaveCriticalSection(local_24);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00482020 : PUSH EBP
00482021 : MOV EBP,ESP
00482023 : PUSH -0x1
00482025 : PUSH 0xb7f678
0048202a : MOV EAX,FS:[0x0]
00482030 : PUSH EAX
00482031 : SUB ESP,0x14
00482034 : PUSH EBX
00482035 : PUSH ESI
00482036 : PUSH EDI
00482037 : MOV EAX,[0x00d66fa0]
0048203c : XOR EAX,EBP
0048203e : PUSH EAX
0048203f : LEA EAX,[EBP + -0xc]
00482042 : MOV FS:[0x0],EAX
00482048 : MOV ESI,ECX
0048204a : CMP byte ptr [ESI + 0x8],0x0
0048204e : JZ 0x0048216b
00482054 : XOR EBX,EBX
00482056 : CMP dword ptr [ESI + 0x1a4],EBX
0048205c : JZ 0x0048216b
00482062 : MOV EAX,[0x017251ac]
00482067 : LEA ECX,[EBP + -0x20]
0048206a : ADD EAX,0x424
0048206f : MOV EDI,0x1
00482074 : PUSH ECX
00482075 : MOV dword ptr [EBP + -0x14],EBX
00482078 : MOV dword ptr [EBP + -0x20],EAX
0048207b : MOV dword ptr [EBP + -0x1c],0xcd758c
00482082 : MOV dword ptr [EBP + -0x18],0xda1
00482089 : MOV dword ptr [EBP + -0x10],EDI
0048208c : CALL 0x006ef1a0
00482091 : MOV dword ptr [EBP + -0x4],EBX
00482094 : CMP dword ptr [ESI + 0x18],EDI
00482097 : JZ 0x004820b1
00482099 : MOV EAX,dword ptr [ESI + 0xf0]
0048209f : MOV dword ptr [ESI + 0x18],EDI
004820a2 : MOV ECX,dword ptr [ESI + 0x30]
004820a5 : MOV EDX,dword ptr [EAX]
004820a7 : PUSH ECX
004820a8 : PUSH EAX
004820a9 : MOV EAX,dword ptr [EDX + 0x15c]
004820af : CALL EAX
004820b1 : CMP dword ptr [ESI + 0x1c],EDI
004820b4 : JZ 0x004820ce
004820b6 : MOV EAX,dword ptr [ESI + 0xf0]
004820bc : MOV dword ptr [ESI + 0x1c],EDI
004820bf : MOV ECX,dword ptr [ESI + 0x44]
004820c2 : MOV EDX,dword ptr [EAX]
004820c4 : PUSH ECX
004820c5 : PUSH EAX
004820c6 : MOV EAX,dword ptr [EDX + 0x170]
004820cc : CALL EAX
004820ce : LEA ECX,[ESI + 0x378]
004820d4 : PUSH ECX
004820d5 : MOV EAX,ESI
004820d7 : CALL 0x00480480
004820dc : LEA EAX,[ESI + 0x144]
004820e2 : MOV ECX,ESI
004820e4 : CALL 0x00481930
004820e9 : MOV EDX,dword ptr [EBP + 0x8]
004820ec : MOV EBX,dword ptr [EBP + 0xc]
004820ef : LEA EDI,[EBX + 0x1]
004820f2 : PUSH EDX
004820f3 : LEA EAX,[ESI + 0x19c]
004820f9 : CALL 0x007890e0
004820fe : TEST AL,AL
00482100 : JNZ 0x00482115
00482102 : MOV dword ptr [EBP + -0x4],0xffffffff
00482109 : CMP dword ptr [EBP + -0x14],0x0
0048210d : JZ 0x0048216b
0048210f : MOV EAX,dword ptr [EBP + -0x20]
00482112 : PUSH EAX
00482113 : JMP 0x0048215e
00482115 : MOV ECX,dword ptr [ESI + 0x1e0]
0048211b : MOV EAX,dword ptr [ESI + 0xf0]
00482121 : MOV EDX,dword ptr [EAX]
00482123 : PUSH EBX
00482124 : PUSH ECX
00482125 : PUSH 0x3
00482127 : PUSH EAX
00482128 : MOV EAX,dword ptr [EDX + 0x144]
0048212e : CALL EAX
00482130 : ADD dword ptr [ESI + 0x2c0],EBX
00482136 : MOV EAX,0x1
0048213b : ADD dword ptr [ESI + 0x2c4],EAX
00482141 : ADD dword ptr [ESI + 0x2ec],EAX
00482147 : ADD dword ptr [ESI + 0x2f4],EBX
0048214d : MOV dword ptr [EBP + -0x4],0xffffffff
00482154 : CMP dword ptr [EBP + -0x14],0x0
00482158 : JZ 0x0048216b
0048215a : MOV ECX,dword ptr [EBP + -0x20]
0048215d : PUSH ECX
0048215e : CALL dword ptr [0x00b8511c]
00482164 : MOV dword ptr [EBP + -0x14],0x0
0048216b : MOV ECX,dword ptr [EBP + -0xc]
0048216e : MOV dword ptr FS:[0x0],ECX
00482175 : POP ECX
00482176 : POP EDI
00482177 : POP ESI
00482178 : POP EBX
00482179 : MOV ESP,EBP
0048217b : POP EBP
0048217c : RET 0x8
