PROGRAM  : Maestia.exe
FUNCTION : FUN_00783520
ENTRY    : 00783520
BODY     : [[00783520, 0078366d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00783520(int param_1,int *param_2,int param_3,int param_4)

{
  int in_EAX;
  int iVar1;
  float10 fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined8 local_1c;
  undefined4 local_14;
  undefined8 local_10;
  undefined4 local_8;
  
  if ((in_EAX == 0) && (param_3 == 0)) {
    return;
  }
  if ((param_2[0x74] != 0) && (param_2[0x74] != 2)) {
    return;
  }
  iVar1 = (**(code **)(*param_2 + 0x2c))();
  if ((in_EAX != 0) &&
     (fVar4 = (*(float *)(iVar1 + 0x14) - *(float *)(iVar1 + 8)) * DAT_00d72c24,
     fVar3 = (*(float *)(iVar1 + 0x10) - *(float *)(iVar1 + 4)) * DAT_00d72c24,
     fVar5 = (*(float *)(iVar1 + 0x18) - *(float *)(iVar1 + 0xc)) * DAT_00d72c24,
     fVar2 = (float10)FUN_0040f460(fVar5 * fVar5 + fVar4 * fVar4 + fVar3 * fVar3),
     (float10)40.0 < fVar2)) {
    return;
  }
  local_14 = *(undefined4 *)(iVar1 + 0xc);
  local_1c = *(undefined8 *)(iVar1 + 4);
  local_8 = *(undefined4 *)(iVar1 + 0x18);
  local_10 = *(undefined8 *)(iVar1 + 0x10);
  FUN_00781ba0(param_1 + 0xf0);
  if ((param_4 == 1) || (param_4 == 2)) {
    if (in_EAX != 0) {
      FUN_004848a0(&local_1c);
    }
    if (param_3 == 0) goto LAB_00783650;
  }
  else {
    if (param_4 != 3) goto LAB_00783650;
    if (in_EAX == 0) {
      return;
    }
  }
  FUN_004848a0(&local_1c);
LAB_00783650:
  if (in_EAX != 0) {
    FUN_00449730();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00783520 : PUSH EBP
00783521 : MOV EBP,ESP
00783523 : MOV ECX,dword ptr [EBP + 0xc]
00783526 : SUB ESP,0x1c
00783529 : PUSH EBX
0078352a : MOV EBX,dword ptr [EBP + 0x14]
0078352d : PUSH ESI
0078352e : PUSH EDI
0078352f : MOV EDI,EAX
00783531 : TEST EDI,EDI
00783533 : JNZ 0x0078353e
00783535 : CMP dword ptr [EBP + 0x10],EAX
00783538 : JZ 0x00783665
0078353e : MOV EAX,dword ptr [ECX + 0x1d0]
00783544 : TEST EAX,EAX
00783546 : JZ 0x00783551
00783548 : CMP EAX,0x2
0078354b : JNZ 0x00783665
00783551 : MOV EAX,dword ptr [ECX]
00783553 : MOV EDX,dword ptr [EAX + 0x2c]
00783556 : CALL EDX
00783558 : MOV ESI,EAX
0078355a : TEST EDI,EDI
0078355c : JZ 0x007835cd
0078355e : MOVSS XMM3,dword ptr [0x00d72c24]
00783566 : MOVSS XMM0,dword ptr [ESI + 0x10]
0078356b : MOVSS XMM1,dword ptr [ESI + 0x14]
00783570 : SUBSS XMM1,dword ptr [ESI + 0x8]
00783575 : MOVSS XMM2,dword ptr [ESI + 0x18]
0078357a : SUBSS XMM2,dword ptr [ESI + 0xc]
0078357f : SUBSS XMM0,dword ptr [ESI + 0x4]
00783584 : MULSS XMM1,XMM3
00783588 : MULSS XMM0,XMM3
0078358c : MULSS XMM2,XMM3
00783590 : MOVAPS XMM3,XMM2
00783593 : MULSS XMM3,XMM2
00783597 : MOVAPS XMM2,XMM1
0078359a : MULSS XMM2,XMM1
0078359e : MOVAPS XMM1,XMM0
007835a1 : ADDSS XMM3,XMM2
007835a5 : MULSS XMM1,XMM0
007835a9 : PUSH ECX
007835aa : ADDSS XMM3,XMM1
007835ae : MOVSS dword ptr [ESP],XMM3
007835b3 : CALL 0x0040f460
007835b8 : FLD float ptr [0x00cdf238]
007835be : FXCH
007835c0 : ADD ESP,0x4
007835c3 : FCOMIP ST0,ST1
007835c5 : FSTP ST0
007835c7 : JA 0x00783665
007835cd : MOV EAX,dword ptr [ESI + 0xc]
007835d0 : MOVQ XMM0,qword ptr [ESI + 0x4]
007835d5 : MOV EDX,dword ptr [EBP + 0x8]
007835d8 : MOV ECX,dword ptr [ESI + 0x18]
007835db : MOV dword ptr [EBP + -0x10],EAX
007835de : MOVQ qword ptr [EBP + -0x18],XMM0
007835e3 : MOVQ XMM0,qword ptr [ESI + 0x10]
007835e8 : ADD EDX,0xf0
007835ee : LEA EAX,[EBP + -0x18]
007835f1 : PUSH EDX
007835f2 : MOV ESI,EAX
007835f4 : MOVQ qword ptr [EBP + -0xc],XMM0
007835f9 : MOV dword ptr [EBP + -0x4],ECX
007835fc : CALL 0x00781ba0
00783601 : ADD ESP,0x4
00783604 : CMP EBX,0x1
00783607 : JZ 0x00783624
00783609 : CMP EBX,0x2
0078360c : JZ 0x00783624
0078360e : CMP EBX,0x3
00783611 : JNZ 0x00783650
00783613 : TEST EDI,EDI
00783615 : JZ 0x00783665
00783617 : MOV EAX,ESI
00783619 : PUSH EAX
0078361a : MOV EAX,dword ptr [EBP + 0x8]
0078361d : ADD EAX,0x21c
00783622 : JMP 0x0078364b
00783624 : TEST EDI,EDI
00783626 : JZ 0x00783639
00783628 : MOV EAX,dword ptr [EBP + 0x8]
0078362b : LEA ECX,[EBP + -0x18]
0078362e : PUSH ECX
0078362f : ADD EAX,0x21c
00783634 : CALL 0x004848a0
00783639 : CMP dword ptr [EBP + 0x10],0x0
0078363d : JZ 0x00783650
0078363f : MOV EAX,dword ptr [EBP + 0x8]
00783642 : LEA EDX,[EBP + -0x18]
00783645 : PUSH EDX
00783646 : ADD EAX,0x22c
0078364b : CALL 0x004848a0
00783650 : TEST EDI,EDI
00783652 : JZ 0x00783665
00783654 : MOV EDX,dword ptr [EBP + 0x8]
00783657 : ADD EDX,0x23c
0078365d : LEA EDI,[EBP + 0xc]
00783660 : CALL 0x00449730
00783665 : POP EDI
00783666 : POP ESI
00783667 : POP EBX
00783668 : MOV ESP,EBP
0078366a : POP EBP
0078366b : RET 0x10
