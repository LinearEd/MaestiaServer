PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac2690
ENTRY    : 00ac2690
BODY     : [[00ac2690, 00ac2706] [00ac2711, 00ac27a3]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00ac2739) */
/* WARNING: Removing unreachable block (ram,0x00ac2740) */

void FUN_00ac2690(undefined4 *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  uint uVar3;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = (int)param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3a91c;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)((int)param_1 + 0x30);
  local_18 = 0;
  local_20 = ".\\Objects\\AvaCharacterOptionList.cpp";
  local_1c = 0x1b7;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  param_1 = *(undefined4 **)(iVar2 + 8);
  puVar1 = (undefined4 *)*param_1;
  while( true ) {
    if (puVar1 == param_1) {
      FUN_00458e80(iVar2 + 4);
      param_1 = *(undefined4 **)(iVar2 + 8);
      if (*(int *)(iVar2 + 0x14) != *(int *)(iVar2 + 0x18)) {
        *(int *)(iVar2 + 0x18) = *(int *)(iVar2 + 0x14);
      }
      FUN_0044f580(iVar2 + 0x10,*(undefined4 *)(iVar2 + 0x14),&param_1);
      *(undefined4 *)(iVar2 + 0x20) = 7;
      *(undefined4 *)(iVar2 + 0x24) = 8;
      local_8 = 0xffffffff;
      if (local_18 != 0) {
        LeaveCriticalSection(local_24);
      }
      ExceptionList = local_10;
      return;
    }
    if (puVar1[9] != 0) break;
    puVar1 = (undefined4 *)*puVar1;
  }
  FUN_00ac2340(puVar1[9]);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0(uVar3);
}



============================================================
DISASSEMBLY
============================================================
00ac2690 : PUSH EBP
00ac2691 : MOV EBP,ESP
00ac2693 : PUSH -0x1
00ac2695 : PUSH 0xb3a91c
00ac269a : MOV EAX,FS:[0x0]
00ac26a0 : PUSH EAX
00ac26a1 : SUB ESP,0x14
00ac26a4 : PUSH EBX
00ac26a5 : PUSH ESI
00ac26a6 : PUSH EDI
00ac26a7 : MOV EAX,[0x00d66fa0]
00ac26ac : XOR EAX,EBP
00ac26ae : PUSH EAX
00ac26af : LEA EAX,[EBP + -0xc]
00ac26b2 : MOV FS:[0x0],EAX
00ac26b8 : MOV EBX,dword ptr [EBP + 0x8]
00ac26bb : LEA ECX,[EBP + -0x20]
00ac26be : LEA EAX,[EBX + 0x30]
00ac26c1 : XOR ESI,ESI
00ac26c3 : PUSH ECX
00ac26c4 : MOV dword ptr [EBP + -0x14],ESI
00ac26c7 : MOV dword ptr [EBP + -0x20],EAX
00ac26ca : MOV dword ptr [EBP + -0x1c],0xc44e5c
00ac26d1 : MOV dword ptr [EBP + -0x18],0x1b7
00ac26d8 : MOV dword ptr [EBP + -0x10],0x1
00ac26df : CALL 0x006ef1a0
00ac26e4 : MOV dword ptr [EBP + -0x4],ESI
00ac26e7 : MOV EAX,dword ptr [EBX + 0x8]
00ac26ea : MOV ESI,dword ptr [EAX]
00ac26ec : MOV dword ptr [EBP + 0x8],EAX
00ac26ef : CMP ESI,EAX
00ac26f1 : JZ 0x00ac2717
00ac26f3 : MOV EDI,dword ptr [ESI + 0x24]
00ac26f6 : TEST EDI,EDI
00ac26f8 : JZ 0x00ac2711
00ac26fa : PUSH EDI
00ac26fb : CALL 0x00ac2340
00ac2700 : MOV ECX,EDI
00ac2702 : CALL 0x006f04e0
00ac2711 : MOV ESI,dword ptr [ESI]
00ac2713 : CMP ESI,EAX
00ac2715 : JNZ 0x00ac26f3
00ac2717 : LEA EDX,[EBX + 0x4]
00ac271a : PUSH EDX
00ac271b : CALL 0x00458e80
00ac2720 : MOV EAX,dword ptr [EBX + 0x8]
00ac2723 : MOV EDX,dword ptr [EBX + 0x14]
00ac2726 : LEA ESI,[EBX + 0x10]
00ac2729 : MOV dword ptr [EBP + 0x8],EAX
00ac272c : MOV EAX,dword ptr [ESI + 0x8]
00ac272f : CMP EDX,EAX
00ac2731 : JZ 0x00ac2751
00ac2733 : MOV ECX,EAX
00ac2735 : CMP EAX,EAX
00ac2737 : JZ 0x00ac274e
00ac2739 : LEA ESP,[ESP]
00ac2740 : MOV EDI,dword ptr [ECX]
00ac2742 : MOV dword ptr [EDX],EDI
00ac2744 : ADD ECX,0x4
00ac2747 : ADD EDX,0x4
00ac274a : CMP ECX,EAX
00ac274c : JNZ 0x00ac2740
00ac274e : MOV dword ptr [ESI + 0x8],EDX
00ac2751 : MOV EAX,dword ptr [ESI + 0x4]
00ac2754 : LEA ECX,[EBP + 0x8]
00ac2757 : PUSH ECX
00ac2758 : PUSH EAX
00ac2759 : PUSH ESI
00ac275a : MOV ECX,0x9
00ac275f : CALL 0x0044f580
00ac2764 : MOV dword ptr [EBX + 0x20],0x7
00ac276b : MOV dword ptr [EBX + 0x24],0x8
00ac2772 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac2779 : CMP dword ptr [EBP + -0x14],0x0
00ac277d : JZ 0x00ac2790
00ac277f : MOV EDX,dword ptr [EBP + -0x20]
00ac2782 : PUSH EDX
00ac2783 : CALL dword ptr [0x00b8511c]
00ac2789 : MOV dword ptr [EBP + -0x14],0x0
00ac2790 : MOV ECX,dword ptr [EBP + -0xc]
00ac2793 : MOV dword ptr FS:[0x0],ECX
00ac279a : POP ECX
00ac279b : POP EDI
00ac279c : POP ESI
00ac279d : POP EBX
00ac279e : MOV ESP,EBP
00ac27a0 : POP EBP
00ac27a1 : RET 0x4
