PROGRAM  : Maestia.exe
FUNCTION : FUN_007f9880
ENTRY    : 007f9880
BODY     : [[007f9880, 007f9937] [007f993e, 007f996c] [007f9973, 007f9a2d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f9880(void)

{
  uint uVar1;
  undefined4 *in_ECX;
  int *piVar2;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b4d7b2;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *in_ECX = &PTR_FUN_00cd4530;
  local_8 = 2;
  DAT_00d6ab03 = 0;
  SetEvent((HANDLE)in_ECX[0x5e]);
  FUN_007f8770(uVar1);
  if ((int *)in_ECX[0x3b] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0x3b] + 4))(1);
    in_ECX[0x3b] = 0;
  }
  if ((int *)in_ECX[0x3d] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0x3d] + 4))(1);
    in_ECX[0x3d] = 0;
  }
  if ((int *)in_ECX[0x3c] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0x3c] + 4))(1);
    in_ECX[0x3c] = 0;
  }
  if (in_ECX[0x44] != 0) {
    FUN_007c8b60(in_ECX[0x44]);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if ((undefined4 *)in_ECX[0x40] != (undefined4 *)0x0) {
    (*(code *)**(undefined4 **)in_ECX[0x40])(1);
    in_ECX[0x40] = 0;
  }
  if (in_ECX[0x41] != 0) {
    FUN_007b7df0(in_ECX[0x41]);
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if (in_ECX[0x43] == 0) {
    ChangeClipboardChain(DAT_00da98f0,(HWND)0x0);
  }
  piVar2 = in_ECX + 3;
  local_14 = 0x20;
  do {
    if ((int *)*piVar2 != (int *)0x0) {
      (**(code **)(*(int *)*piVar2 + 0x34))(1);
      *piVar2 = 0;
    }
    piVar2 = piVar2 + 1;
    local_14 = local_14 + -1;
  } while (local_14 != 0);
  if ((int *)in_ECX[0x23] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0x23] + 4))(1);
    in_ECX[0x23] = 0;
  }
  local_8._0_1_ = 1;
  FUN_0045a060(in_ECX + 0x34);
  local_8 = (uint)local_8._1_3_ << 8;
  if (7 < (uint)in_ECX[0x32]) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  in_ECX[0x32] = 7;
  in_ECX[0x31] = 0;
  *(undefined2 *)(in_ECX + 0x2d) = 0;
  local_8 = 0xffffffff;
  if ((GRefCountImpl *)in_ECX[0x24] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[0x24]);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007f9880 : PUSH EBP
007f9881 : MOV EBP,ESP
007f9883 : PUSH -0x1
007f9885 : PUSH 0xb4d7b2
007f988a : MOV EAX,FS:[0x0]
007f9890 : PUSH EAX
007f9891 : SUB ESP,0x8
007f9894 : PUSH EBX
007f9895 : PUSH ESI
007f9896 : PUSH EDI
007f9897 : MOV EAX,[0x00d66fa0]
007f989c : XOR EAX,EBP
007f989e : PUSH EAX
007f989f : LEA EAX,[EBP + -0xc]
007f98a2 : MOV FS:[0x0],EAX
007f98a8 : MOV ESI,ECX
007f98aa : MOV dword ptr [EBP + -0x14],ESI
007f98ad : MOV dword ptr [ESI],0xcd4530
007f98b3 : MOV dword ptr [EBP + -0x4],0x2
007f98ba : MOV EAX,dword ptr [ESI + 0x178]
007f98c0 : XOR EBX,EBX
007f98c2 : PUSH EAX
007f98c3 : MOV byte ptr [0x00d6ab03],BL
007f98c9 : CALL dword ptr [0x00b851e8]
007f98cf : MOV EAX,ESI
007f98d1 : CALL 0x007f8770
007f98d6 : MOV ECX,dword ptr [ESI + 0xec]
007f98dc : CMP ECX,EBX
007f98de : JZ 0x007f98ef
007f98e0 : MOV EDX,dword ptr [ECX]
007f98e2 : MOV EAX,dword ptr [EDX + 0x4]
007f98e5 : PUSH 0x1
007f98e7 : CALL EAX
007f98e9 : MOV dword ptr [ESI + 0xec],EBX
007f98ef : MOV ECX,dword ptr [ESI + 0xf4]
007f98f5 : CMP ECX,EBX
007f98f7 : JZ 0x007f9908
007f98f9 : MOV EDX,dword ptr [ECX]
007f98fb : MOV EAX,dword ptr [EDX + 0x4]
007f98fe : PUSH 0x1
007f9900 : CALL EAX
007f9902 : MOV dword ptr [ESI + 0xf4],EBX
007f9908 : MOV ECX,dword ptr [ESI + 0xf0]
007f990e : CMP ECX,EBX
007f9910 : JZ 0x007f9921
007f9912 : MOV EDX,dword ptr [ECX]
007f9914 : MOV EAX,dword ptr [EDX + 0x4]
007f9917 : PUSH 0x1
007f9919 : CALL EAX
007f991b : MOV dword ptr [ESI + 0xf0],EBX
007f9921 : MOV EDI,dword ptr [ESI + 0x110]
007f9927 : CMP EDI,EBX
007f9929 : JZ 0x007f993e
007f992b : PUSH EDI
007f992c : CALL 0x007c8b60
007f9931 : MOV ECX,EDI
007f9933 : CALL 0x006f04e0
007f993e : MOV ECX,dword ptr [ESI + 0x100]
007f9944 : CMP ECX,EBX
007f9946 : JZ 0x007f9956
007f9948 : MOV EDX,dword ptr [ECX]
007f994a : MOV EAX,dword ptr [EDX]
007f994c : PUSH 0x1
007f994e : CALL EAX
007f9950 : MOV dword ptr [ESI + 0x100],EBX
007f9956 : MOV EDI,dword ptr [ESI + 0x104]
007f995c : CMP EDI,EBX
007f995e : JZ 0x007f9973
007f9960 : PUSH EDI
007f9961 : CALL 0x007b7df0
007f9966 : MOV ECX,EDI
007f9968 : CALL 0x006f04e0
007f9973 : CMP dword ptr [ESI + 0x10c],EBX
007f9979 : JNZ 0x007f9989
007f997b : MOV ECX,dword ptr [0x00da98f0]
007f9981 : PUSH EBX
007f9982 : PUSH ECX
007f9983 : CALL dword ptr [0x00b85410]
007f9989 : LEA EDI,[ESI + 0xc]
007f998c : MOV dword ptr [EBP + -0x10],0x20
007f9993 : MOV ECX,dword ptr [EDI]
007f9995 : CMP ECX,EBX
007f9997 : JZ 0x007f99a4
007f9999 : MOV EDX,dword ptr [ECX]
007f999b : MOV EAX,dword ptr [EDX + 0x34]
007f999e : PUSH 0x1
007f99a0 : CALL EAX
007f99a2 : MOV dword ptr [EDI],EBX
007f99a4 : ADD EDI,0x4
007f99a7 : SUB dword ptr [EBP + -0x10],0x1
007f99ab : JNZ 0x007f9993
007f99ad : MOV ECX,dword ptr [ESI + 0x8c]
007f99b3 : CMP ECX,EBX
007f99b5 : JZ 0x007f99c6
007f99b7 : MOV EDX,dword ptr [ECX]
007f99b9 : MOV EAX,dword ptr [EDX + 0x4]
007f99bc : PUSH 0x1
007f99be : CALL EAX
007f99c0 : MOV dword ptr [ESI + 0x8c],EBX
007f99c6 : MOV byte ptr [EBP + -0x4],0x1
007f99ca : LEA ECX,[ESI + 0xd0]
007f99d0 : PUSH ECX
007f99d1 : CALL 0x0045a060
007f99d6 : MOV byte ptr [EBP + -0x4],BL
007f99d9 : CMP dword ptr [ESI + 0xc8],0x8
007f99e0 : JC 0x007f99ed
007f99e2 : MOV ECX,dword ptr [ESI + 0xb4]
007f99e8 : CALL 0x006f04e0
007f99ed : MOV dword ptr [ESI + 0xc8],0x7
007f99f7 : MOV dword ptr [ESI + 0xc4],EBX
007f99fd : XOR EDX,EDX
007f99ff : MOV word ptr [ESI + 0xb4],DX
007f9a06 : MOV dword ptr [EBP + -0x4],0xffffffff
007f9a0d : MOV ECX,dword ptr [ESI + 0x90]
007f9a13 : CMP ECX,EBX
007f9a15 : JZ 0x007f9a1c
007f9a17 : CALL 0x004ff7e0
007f9a1c : MOV ECX,dword ptr [EBP + -0xc]
007f9a1f : MOV dword ptr FS:[0x0],ECX
007f9a26 : POP ECX
007f9a27 : POP EDI
007f9a28 : POP ESI
007f9a29 : POP EBX
007f9a2a : MOV ESP,EBP
007f9a2c : POP EBP
007f9a2d : RET
