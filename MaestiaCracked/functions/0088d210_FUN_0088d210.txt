PROGRAM  : Maestia.exe
FUNCTION : FUN_0088d210
ENTRY    : 0088d210
BODY     : [[0088d210, 0088d46a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0088d210(void)

{
  float10 fVar1;
  char cVar2;
  int *in_EAX;
  DWORD DVar3;
  int iVar4;
  float10 fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float local_2c;
  undefined4 local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14 [4];
  
  if (in_EAX[0x5e] == 0) {
    DVar3 = timeGetTime();
    in_EAX[0x5e] = DVar3;
  }
  cVar2 = FUN_008896f0();
  if (cVar2 != '\0') {
    FUN_0088bdf0();
  }
  DVar3 = timeGetTime();
  iVar4 = DVar3 - in_EAX[0x5e];
  if (iVar4 != 0) {
    fVar6 = (float)iVar4;
    in_EAX[0x5e] = DVar3;
    if (iVar4 < 0) {
      fVar6 = fVar6 + 4.2949673e+09;
    }
    local_14[3] = fVar6 * 40.0 * 0.001;
    if (*(char *)((int)in_EAX + 0x17d) == '\0') {
      in_EAX[0x6c] = (int)((float)in_EAX[0x62] * 3.0);
      in_EAX[0x6d] = (int)((float)in_EAX[99] * 3.0);
      in_EAX[0x6e] = (int)((float)in_EAX[100] * 3.0);
      iVar4 = in_EAX[0xfa];
      *(undefined1 *)(in_EAX + 0x68) = 1;
      fVar6 = *(float *)(iVar4 + 0x68) - ((float)in_EAX[0x6c] + *(float *)(iVar4 + 0x68));
      fVar7 = *(float *)(iVar4 + 0x6c) - ((float)in_EAX[0x6d] + *(float *)(iVar4 + 0x6c));
      fVar8 = *(float *)(iVar4 + 0x70) - ((float)in_EAX[0x6e] + *(float *)(iVar4 + 0x70));
      fVar5 = (float10)FUN_0040f460(fVar6 * fVar6 + fVar8 * fVar8 + fVar7 * fVar7);
      in_EAX[0x60] = (int)(float)fVar5;
      fVar1 = (float10)DAT_00d72c24;
      *(undefined1 *)((int)in_EAX + 0x17d) = 1;
      in_EAX[0x61] = (int)(float)(fVar5 * fVar1);
      return;
    }
    iVar4 = in_EAX[0xfa];
    local_20 = *(float *)(iVar4 + 0x68) - ((float)in_EAX[0x6c] + *(float *)(iVar4 + 0x68));
    local_1c = *(float *)(iVar4 + 0x6c) - (*(float *)(iVar4 + 0x6c) + (float)in_EAX[0x6d]);
    local_18 = *(float *)(iVar4 + 0x70) - (*(float *)(iVar4 + 0x70) + (float)in_EAX[0x6e]);
    local_14[0] = 0.0;
    local_14[1] = 0.0;
    local_14[2] = 0.0;
    D3DXVec3Normalize(local_14,&local_20);
    if (0.001 < (float)in_EAX[0x60]) {
      iVar4 = in_EAX[0xfa];
      local_28 = *(undefined4 *)(iVar4 + 0x6c);
      local_2c = local_14[3] * (float)in_EAX[0x61] * local_14[0] + *(float *)(iVar4 + 0x68);
      local_24 = local_14[3] * (float)in_EAX[0x61] * local_14[2] + *(float *)(iVar4 + 0x70);
      (**(code **)(*in_EAX + 0x2a0))(&local_2c,1);
      in_EAX[0x60] = (int)((float)in_EAX[0x60] - (float)in_EAX[0x61]);
      return;
    }
    FUN_0088bdf0();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0088d210 : PUSH EBP
0088d211 : MOV EBP,ESP
0088d213 : SUB ESP,0x28
0088d216 : PUSH ESI
0088d217 : MOV ESI,EAX
0088d219 : CMP dword ptr [ESI + 0x178],0x0
0088d220 : PUSH EDI
0088d221 : MOV EDI,dword ptr [0x00b85598]
0088d227 : JNZ 0x0088d231
0088d229 : CALL EDI
0088d22b : MOV dword ptr [ESI + 0x178],EAX
0088d231 : MOV EAX,ESI
0088d233 : CALL 0x008896f0
0088d238 : TEST AL,AL
0088d23a : JZ 0x0088d241
0088d23c : CALL 0x0088bdf0
0088d241 : CALL EDI
0088d243 : MOV ECX,EAX
0088d245 : SUB ECX,dword ptr [ESI + 0x178]
0088d24b : JZ 0x0088d465
0088d251 : MOV dword ptr [EBP + -0x4],ECX
0088d254 : FILD dword ptr [EBP + -0x4]
0088d257 : MOV dword ptr [ESI + 0x178],EAX
0088d25d : TEST ECX,ECX
0088d25f : JGE 0x0088d267
0088d261 : FADD float ptr [0x00cdf0e0]
0088d267 : CMP byte ptr [ESI + 0x17d],0x0
0088d26e : FMUL float ptr [0x00cdf238]
0088d274 : FMUL float ptr [0x00cdf128]
0088d27a : FSTP float ptr [EBP + -0x4]
0088d27d : JNZ 0x0088d360
0088d283 : MOVSS XMM0,dword ptr [ESI + 0x188]
0088d28b : MOVSS XMM3,dword ptr [0x00cdf19c]
0088d293 : MOVSS XMM1,dword ptr [ESI + 0x18c]
0088d29b : MOVSS XMM2,dword ptr [ESI + 0x190]
0088d2a3 : MULSS XMM0,XMM3
0088d2a7 : MOVSS dword ptr [ESI + 0x1b0],XMM0
0088d2af : MULSS XMM1,XMM3
0088d2b3 : MULSS XMM2,XMM3
0088d2b7 : MOVSS dword ptr [ESI + 0x1b4],XMM1
0088d2bf : MOVSS dword ptr [ESI + 0x1b8],XMM2
0088d2c7 : MOV EAX,dword ptr [ESI + 0x3e8]
0088d2cd : MOV byte ptr [ESI + 0x1a0],0x1
0088d2d4 : MOVSS XMM1,dword ptr [ESI + 0x1b0]
0088d2dc : ADDSS XMM1,dword ptr [EAX + 0x68]
0088d2e1 : MOVSS XMM0,dword ptr [EAX + 0x68]
0088d2e6 : MOVSS XMM2,dword ptr [ESI + 0x1b4]
0088d2ee : ADDSS XMM2,dword ptr [EAX + 0x6c]
0088d2f3 : MOVSS XMM3,dword ptr [ESI + 0x1b8]
0088d2fb : ADDSS XMM3,dword ptr [EAX + 0x70]
0088d300 : SUBSS XMM0,XMM1
0088d304 : MOVSS XMM1,dword ptr [EAX + 0x6c]
0088d309 : SUBSS XMM1,XMM2
0088d30d : MOVSS XMM2,dword ptr [EAX + 0x70]
0088d312 : SUBSS XMM2,XMM3
0088d316 : MOVAPS XMM3,XMM0
0088d319 : MULSS XMM3,XMM0
0088d31d : MOVAPS XMM0,XMM2
0088d320 : MULSS XMM0,XMM2
0088d324 : ADDSS XMM3,XMM0
0088d328 : MOVAPS XMM0,XMM1
0088d32b : MULSS XMM0,XMM1
0088d32f : PUSH ECX
0088d330 : ADDSS XMM3,XMM0
0088d334 : MOVSS dword ptr [ESP],XMM3
0088d339 : CALL 0x0040f460
0088d33e : FST float ptr [ESI + 0x180]
0088d344 : FMUL float ptr [0x00d72c24]
0088d34a : ADD ESP,0x4
0088d34d : POP EDI
0088d34e : MOV byte ptr [ESI + 0x17d],0x1
0088d355 : FSTP float ptr [ESI + 0x184]
0088d35b : POP ESI
0088d35c : MOV ESP,EBP
0088d35e : POP EBP
0088d35f : RET
0088d360 : MOV EAX,dword ptr [ESI + 0x3e8]
0088d366 : MOVSS XMM3,dword ptr [EAX + 0x68]
0088d36b : MOVSS XMM1,dword ptr [EAX + 0x6c]
0088d370 : MOVSS XMM2,dword ptr [EAX + 0x70]
0088d375 : MOVSS XMM0,dword ptr [ESI + 0x1b0]
0088d37d : ADDSS XMM0,dword ptr [EAX + 0x68]
0088d382 : ADDSS XMM1,dword ptr [ESI + 0x1b4]
0088d38a : ADDSS XMM2,dword ptr [ESI + 0x1b8]
0088d392 : SUBSS XMM3,XMM0
0088d396 : MOVSS XMM0,dword ptr [EAX + 0x6c]
0088d39b : SUBSS XMM0,XMM1
0088d39f : MOVSS XMM1,dword ptr [EAX + 0x70]
0088d3a4 : LEA EAX,[EBP + -0x1c]
0088d3a7 : PUSH EAX
0088d3a8 : LEA ECX,[EBP + -0x10]
0088d3ab : MOVSS dword ptr [EBP + -0x18],XMM0
0088d3b0 : XORPS XMM0,XMM0
0088d3b3 : SUBSS XMM1,XMM2
0088d3b7 : PUSH ECX
0088d3b8 : MOVSS dword ptr [EBP + -0x1c],XMM3
0088d3bd : MOVSS dword ptr [EBP + -0x14],XMM1
0088d3c2 : MOVSS dword ptr [EBP + -0x10],XMM0
0088d3c7 : MOVSS dword ptr [EBP + -0xc],XMM0
0088d3cc : MOVSS dword ptr [EBP + -0x8],XMM0
0088d3d1 : CALL 0x004ff722
0088d3d6 : MOVSS XMM0,dword ptr [ESI + 0x180]
0088d3de : COMISS XMM0,dword ptr [0x00cdf128]
0088d3e5 : JBE 0x0088d460
0088d3e7 : MOV EAX,dword ptr [ESI + 0x3e8]
0088d3ed : MOVSS XMM0,dword ptr [EAX + 0x6c]
0088d3f2 : MOVSS XMM1,dword ptr [EAX + 0x70]
0088d3f7 : MOVSS XMM2,dword ptr [EAX + 0x68]
0088d3fc : MOV EDX,dword ptr [ESI]
0088d3fe : MOV EDX,dword ptr [EDX + 0x2a0]
0088d404 : ADD EAX,0x68
0088d407 : MOVSS dword ptr [EBP + -0x24],XMM0
0088d40c : MOVSS XMM0,dword ptr [EBP + -0x4]
0088d411 : MULSS XMM0,dword ptr [ESI + 0x184]
0088d419 : MOVAPS XMM3,XMM0
0088d41c : MULSS XMM3,dword ptr [EBP + -0x10]
0088d421 : MULSS XMM0,dword ptr [EBP + -0x8]
0088d426 : PUSH 0x1
0088d428 : LEA EAX,[EBP + -0x28]
0088d42b : ADDSS XMM3,XMM2
0088d42f : ADDSS XMM0,XMM1
0088d433 : PUSH EAX
0088d434 : MOV ECX,ESI
0088d436 : MOVSS dword ptr [EBP + -0x28],XMM3
0088d43b : MOVSS dword ptr [EBP + -0x20],XMM0
0088d440 : CALL EDX
0088d442 : MOVSS XMM0,dword ptr [ESI + 0x180]
0088d44a : SUBSS XMM0,dword ptr [ESI + 0x184]
0088d452 : POP EDI
0088d453 : MOVSS dword ptr [ESI + 0x180],XMM0
0088d45b : POP ESI
0088d45c : MOV ESP,EBP
0088d45e : POP EBP
0088d45f : RET
0088d460 : CALL 0x0088bdf0
0088d465 : POP EDI
0088d466 : POP ESI
0088d467 : MOV ESP,EBP
0088d469 : POP EBP
0088d46a : RET
