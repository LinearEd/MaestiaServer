PROGRAM  : Maestia.exe
FUNCTION : FUN_0050e740
ENTRY    : 0050e740
BODY     : [[0050e740, 0050e8af]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0050e740(void)

{
  byte *pbVar1;
  int iVar2;
  byte bVar3;
  char cVar4;
  undefined4 uVar5;
  int iVar6;
  int *in_ECX;
  char unaff_retaddr;
  
  bVar3 = (**(code **)(*in_ECX + 0xa8))();
  if (((bVar3 & 3) != 0) && (in_ECX[0x28] != 0)) {
    pbVar1 = (byte *)(in_ECX[0x28] + 0x143);
    *pbVar1 = *pbVar1 | 2;
    FUN_0050aaf0();
    (**(code **)(*in_ECX + 0x1ac))();
  }
  (**(code **)(*in_ECX + 0xa4))(bVar3 & 0xfc);
  if ((*(ushort *)(in_ECX + 0x32) >> 0xe & 1) != 0) {
    *(ushort *)(in_ECX + 0x32) = *(ushort *)(in_ECX + 0x32) & 0xbfff;
    uVar5 = (**(code **)(*in_ECX + 0x40))();
    FUN_0050e560(uVar5);
  }
  if (unaff_retaddr == '\0') {
    *(ushort *)(in_ECX + 0x32) = *(ushort *)(in_ECX + 0x32) & 0xffbf;
  }
  else {
    FUN_0050a7a0();
    *(ushort *)(in_ECX + 0x32) = *(ushort *)(in_ECX + 0x32) | 0x40;
  }
  if (*(int *)(in_ECX[0x28] + 0x118) != 0) {
    iVar6 = (**(code **)(*in_ECX + 0x40))();
    iVar2 = *(int *)(in_ECX[0x28] + 0x118);
    cVar4 = FUN_0050c880();
    if (((cVar4 != '\0') || ((*(byte *)(iVar2 + 0x68) >> 5 & 1) != 0)) &&
       (FUN_0054ddc0((-(double)(longlong)
                               (((ulonglong)*(uint *)(iVar6 + 0x134) & 0x80000000) << 0x20) +
                     (double)(*(ulonglong *)(iVar6 + 0x130) & 0x7fffffffffffffff)) / 1000.0),
       (~*(byte *)(iVar2 + 0x68) & 1) != 0)) {
      *(uint *)(iVar6 + 0xb00) = *(uint *)(iVar6 + 0xb00) | 0x400;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0050e740 : SUB ESP,0x8
0050e743 : PUSH EBX
0050e744 : PUSH ESI
0050e745 : MOV ESI,ECX
0050e747 : MOV EAX,dword ptr [ESI]
0050e749 : MOV EDX,dword ptr [EAX + 0xa8]
0050e74f : CALL EDX
0050e751 : MOV BL,AL
0050e753 : TEST BL,0x3
0050e756 : JZ 0x0050e7a1
0050e758 : MOV EAX,dword ptr [ESI + 0xa0]
0050e75e : TEST EAX,EAX
0050e760 : JZ 0x0050e7a1
0050e762 : OR byte ptr [EAX + 0x143],0x2
0050e769 : LEA ECX,[ESI + 0xd8]
0050e76f : CALL 0x0050aaf0
0050e774 : MOV CX,word ptr [ESI + 0xc8]
0050e77b : MOV EAX,dword ptr [ESI]
0050e77d : SHR CX,0xc
0050e781 : AND CL,0x1
0050e784 : MOVZX EDX,CL
0050e787 : MOV ECX,dword ptr [ESI + 0xcc]
0050e78d : PUSH 0x1
0050e78f : AND ECX,0xfffffffc
0050e792 : PUSH EDX
0050e793 : MOV EDX,dword ptr [EAX + 0x1ac]
0050e799 : ADD ECX,0x8
0050e79c : PUSH ECX
0050e79d : MOV ECX,ESI
0050e79f : CALL EDX
0050e7a1 : MOV EAX,dword ptr [ESI]
0050e7a3 : MOV EDX,dword ptr [EAX + 0xa4]
0050e7a9 : AND BL,0xfc
0050e7ac : MOVZX ECX,BL
0050e7af : PUSH ECX
0050e7b0 : MOV ECX,ESI
0050e7b2 : CALL EDX
0050e7b4 : MOVZX EAX,word ptr [ESI + 0xc8]
0050e7bb : MOV ECX,EAX
0050e7bd : SHR ECX,0xe
0050e7c0 : TEST CL,0x1
0050e7c3 : JZ 0x0050e7e2
0050e7c5 : MOV EDX,dword ptr [ESI]
0050e7c7 : AND EAX,0xbfff
0050e7cc : MOV word ptr [ESI + 0xc8],AX
0050e7d3 : MOV EAX,dword ptr [EDX + 0x40]
0050e7d6 : MOV ECX,ESI
0050e7d8 : CALL EAX
0050e7da : PUSH EAX
0050e7db : MOV ECX,ESI
0050e7dd : CALL 0x0050e560
0050e7e2 : CMP byte ptr [ESP + 0x14],0x0
0050e7e7 : JZ 0x0050e7fa
0050e7e9 : MOV ECX,ESI
0050e7eb : CALL 0x0050a7a0
0050e7f0 : OR word ptr [ESI + 0xc8],0x40
0050e7f8 : JMP 0x0050e806
0050e7fa : MOV ECX,0xffbf
0050e7ff : AND word ptr [ESI + 0xc8],CX
0050e806 : MOV EDX,dword ptr [ESI + 0xa0]
0050e80c : CMP dword ptr [EDX + 0x118],0x0
0050e813 : JZ 0x0050e8a8
0050e819 : MOV EAX,dword ptr [ESI]
0050e81b : MOV EDX,dword ptr [EAX + 0x40]
0050e81e : PUSH EDI
0050e81f : MOV ECX,ESI
0050e821 : CALL EDX
0050e823 : MOV EDI,EAX
0050e825 : MOV EAX,dword ptr [ESI + 0xa0]
0050e82b : MOV EBX,dword ptr [EAX + 0x118]
0050e831 : PUSH ESI
0050e832 : MOV ECX,EDI
0050e834 : CALL 0x0050c880
0050e839 : TEST AL,AL
0050e83b : JNZ 0x0050e848
0050e83d : MOV CL,byte ptr [EBX + 0x68]
0050e840 : SHR CL,0x5
0050e843 : TEST CL,0x1
0050e846 : JZ 0x0050e8a7
0050e848 : MOV EAX,dword ptr [EDI + 0x134]
0050e84e : MOV EDX,dword ptr [EDI + 0x130]
0050e854 : MOV ECX,EAX
0050e856 : MOV dword ptr [ESP + 0xc],EDX
0050e85a : AND EAX,0x7fffffff
0050e85f : MOV dword ptr [ESP + 0x10],EAX
0050e863 : FILD qword ptr [ESP + 0xc]
0050e867 : AND ECX,0x80000000
0050e86d : MOV dword ptr [ESP + 0x10],ECX
0050e871 : MOV dword ptr [ESP + 0xc],0x0
0050e879 : FILD qword ptr [ESP + 0xc]
0050e87d : SUB ESP,0x8
0050e880 : MOV ECX,EBX
0050e882 : FCHS
0050e884 : FADDP
0050e886 : FDIV double ptr [0x00b86b50]
0050e88c : FSTP double ptr [ESP]
0050e88f : CALL 0x0054ddc0
0050e894 : MOV AL,byte ptr [EBX + 0x68]
0050e897 : NOT AL
0050e899 : TEST AL,0x1
0050e89b : JZ 0x0050e8a7
0050e89d : OR dword ptr [EDI + 0xb00],0x400
0050e8a7 : POP EDI
0050e8a8 : POP ESI
0050e8a9 : POP EBX
0050e8aa : ADD ESP,0x8
0050e8ad : RET 0x8
