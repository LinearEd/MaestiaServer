PROGRAM  : Maestia.exe
FUNCTION : FUN_00680e40
ENTRY    : 00680e40
BODY     : [[00680e40, 00680ee1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00680e40(void)

{
  uint uVar1;
  LONG LVar2;
  undefined4 *in_ECX;
  
  *in_ECX = &PTR_FUN_00bd8018;
  FUN_00684a80();
  if ((int *)in_ECX[6] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[6] + 8))(1);
  }
  uVar1 = in_ECX[0x11];
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  FUN_00515cf0(in_ECX[8]);
  FUN_005af2f0();
  uVar1 = in_ECX[4];
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  uVar1 = in_ECX[3];
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  uVar1 = in_ECX[2];
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00680e40 : PUSH ESI
00680e41 : MOV ESI,ECX
00680e43 : MOV ECX,dword ptr [ESI + 0x18]
00680e46 : MOV dword ptr [ESI],0xbd8018
00680e4c : CALL 0x00684a80
00680e51 : MOV ECX,dword ptr [ESI + 0x18]
00680e54 : TEST ECX,ECX
00680e56 : JZ 0x00680e61
00680e58 : MOV EAX,dword ptr [ECX]
00680e5a : MOV EDX,dword ptr [EAX + 0x8]
00680e5d : PUSH 0x1
00680e5f : CALL EDX
00680e61 : PUSH EBX
00680e62 : MOV EBX,dword ptr [0x00b851cc]
00680e68 : PUSH EDI
00680e69 : MOV EDI,dword ptr [ESI + 0x44]
00680e6c : AND EDI,0xfffffffc
00680e6f : PUSH -0x1
00680e71 : LEA EAX,[EDI + 0x4]
00680e74 : PUSH EAX
00680e75 : CALL EBX
00680e77 : SUB EAX,0x1
00680e7a : JNZ 0x00680e82
00680e7c : PUSH EDI
00680e7d : CALL 0x00515cf0
00680e82 : MOV ECX,dword ptr [ESI + 0x20]
00680e85 : PUSH ECX
00680e86 : CALL 0x00515cf0
00680e8b : LEA ECX,[ESI + 0x1c]
00680e8e : CALL 0x005af2f0
00680e93 : MOV EDI,dword ptr [ESI + 0x10]
00680e96 : AND EDI,0xfffffffc
00680e99 : PUSH -0x1
00680e9b : LEA EDX,[EDI + 0x4]
00680e9e : PUSH EDX
00680e9f : CALL EBX
00680ea1 : SUB EAX,0x1
00680ea4 : JNZ 0x00680eac
00680ea6 : PUSH EDI
00680ea7 : CALL 0x00515cf0
00680eac : MOV EDI,dword ptr [ESI + 0xc]
00680eaf : AND EDI,0xfffffffc
00680eb2 : PUSH -0x1
00680eb4 : LEA EAX,[EDI + 0x4]
00680eb7 : PUSH EAX
00680eb8 : CALL EBX
00680eba : SUB EAX,0x1
00680ebd : JNZ 0x00680ec5
00680ebf : PUSH EDI
00680ec0 : CALL 0x00515cf0
00680ec5 : MOV ESI,dword ptr [ESI + 0x8]
00680ec8 : AND ESI,0xfffffffc
00680ecb : PUSH -0x1
00680ecd : LEA ECX,[ESI + 0x4]
00680ed0 : PUSH ECX
00680ed1 : CALL EBX
00680ed3 : SUB EAX,0x1
00680ed6 : POP EDI
00680ed7 : POP EBX
00680ed8 : JNZ 0x00680ee0
00680eda : PUSH ESI
00680edb : CALL 0x00515cf0
00680ee0 : POP ESI
00680ee1 : RET
