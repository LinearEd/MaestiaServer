PROGRAM  : Maestia.exe
FUNCTION : FUN_005b31d0
ENTRY    : 005b31d0
BODY     : [[005b31d0, 005b3300]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_005b31d0(int *param_1,uint param_2)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  int local_18;
  undefined1 local_14;
  
  iVar2 = param_2;
  uVar6 = 0;
  local_18 = param_2;
  local_14 = 8;
  puVar3 = (undefined4 *)FUN_00515840(0x34,0);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    FUN_00568960(&local_18,FUN_005b2390);
    *puVar3 = &PTR_LAB_00b8f8f8;
    puVar3[4] = &PTR_LAB_00b90510;
    FUN_00530a70(puVar3 + 4,&local_18,&PTR_s_fromCharCode_00b8f7f0,7);
  }
  puVar1 = param_1;
  *(undefined1 *)(param_1 + 2) = 0;
  *param_1 = (int)puVar3;
  param_1[1] = 0;
  iVar4 = FUN_00515840(0x54,0);
  if (iVar4 != 0) {
    puVar3 = puVar1;
    uVar5 = FUN_00530910(1);
    uVar6 = FUN_005b3090(&local_18,uVar5,puVar3);
    if (uVar6 != 0) {
      *(uint *)(uVar6 + 8) = *(int *)(uVar6 + 8) + 1U & 0x8fffffff;
    }
  }
  param_1 = (int *)0x3;
  param_2 = uVar6;
  FUN_0050ff10(&param_1,&param_2);
  if (param_2 != 0) {
    FUN_00503db0();
  }
  param_1 = (int *)(*(int *)(iVar2 + 0x2a0) + 0x10);
  param_2 = param_2 & 0xffffff00;
  iVar4 = *param_1;
  puVar3 = &param_2;
  uVar5 = FUN_00526210(puVar1);
  (**(code **)(iVar4 + 0x28))(&local_18,iVar2 + 0x14,uVar5,puVar3);
  FUN_00526bc0();
  if (uVar6 != 0) {
    FUN_00503db0();
  }
  return puVar1;
}



============================================================
DISASSEMBLY
============================================================
005b31d0 : SUB ESP,0x18
005b31d3 : PUSH EBX
005b31d4 : PUSH EBP
005b31d5 : PUSH ESI
005b31d6 : MOV ESI,dword ptr [ESP + 0x2c]
005b31da : MOV ECX,dword ptr [ESI + 0x288]
005b31e0 : PUSH EDI
005b31e1 : XOR EBX,EBX
005b31e3 : PUSH EBX
005b31e4 : PUSH 0x34
005b31e6 : MOV dword ptr [ESP + 0x18],ESI
005b31ea : MOV byte ptr [ESP + 0x1c],0x8
005b31ef : CALL 0x00515840
005b31f4 : MOV EDI,EAX
005b31f6 : CMP EDI,EBX
005b31f8 : JZ 0x005b3231
005b31fa : PUSH 0x5b2390
005b31ff : LEA EAX,[ESP + 0x14]
005b3203 : PUSH EAX
005b3204 : MOV ECX,EDI
005b3206 : CALL 0x00568960
005b320b : PUSH 0x7
005b320d : PUSH 0xb8f7f0
005b3212 : LEA ECX,[ESP + 0x18]
005b3216 : LEA EAX,[EDI + 0x10]
005b3219 : PUSH ECX
005b321a : PUSH EAX
005b321b : MOV dword ptr [EDI],0xb8f8f8
005b3221 : MOV dword ptr [EAX],0xb90510
005b3227 : CALL 0x00530a70
005b322c : ADD ESP,0x10
005b322f : JMP 0x005b3233
005b3231 : XOR EDI,EDI
005b3233 : MOV EBP,dword ptr [ESP + 0x2c]
005b3237 : PUSH EBX
005b3238 : MOV byte ptr [EBP + 0x8],BL
005b323b : MOV dword ptr [EBP],EDI
005b323e : MOV dword ptr [EBP + 0x4],EBX
005b3241 : MOV ECX,dword ptr [ESI + 0x288]
005b3247 : PUSH 0x54
005b3249 : CALL 0x00515840
005b324e : MOV EDI,EAX
005b3250 : CMP EDI,EBX
005b3252 : JZ 0x005b327d
005b3254 : PUSH EBP
005b3255 : PUSH 0x1
005b3257 : MOV ECX,ESI
005b3259 : CALL 0x00530910
005b325e : PUSH EAX
005b325f : LEA EDX,[ESP + 0x18]
005b3263 : PUSH EDX
005b3264 : MOV ECX,EDI
005b3266 : CALL 0x005b3090
005b326b : MOV EBX,EAX
005b326d : TEST EBX,EBX
005b326f : JZ 0x005b327d
005b3271 : MOV EAX,dword ptr [EBX + 0x8]
005b3274 : INC EAX
005b3275 : AND EAX,0x8fffffff
005b327a : MOV dword ptr [EBX + 0x8],EAX
005b327d : LEA ECX,[ESP + 0x30]
005b3281 : PUSH ECX
005b3282 : LEA EDX,[ESP + 0x30]
005b3286 : PUSH EDX
005b3287 : LEA ECX,[ESI + 0x278]
005b328d : MOV dword ptr [ESP + 0x38],EBX
005b3291 : MOV dword ptr [ESP + 0x34],0x3
005b3299 : CALL 0x0050ff10
005b329e : MOV ECX,dword ptr [ESP + 0x30]
005b32a2 : TEST ECX,ECX
005b32a4 : JZ 0x005b32ab
005b32a6 : CALL 0x00503db0
005b32ab : MOV EAX,dword ptr [ESI + 0x2a0]
005b32b1 : ADD EAX,0x10
005b32b4 : MOV byte ptr [ESP + 0x30],0x0
005b32b9 : MOV EDI,dword ptr [EAX]
005b32bb : MOV dword ptr [ESP + 0x2c],EAX
005b32bf : LEA EAX,[ESP + 0x30]
005b32c3 : PUSH EAX
005b32c4 : PUSH EBP
005b32c5 : LEA ECX,[ESP + 0x20]
005b32c9 : ADD EDI,0x28
005b32cc : CALL 0x00526210
005b32d1 : MOV EDX,dword ptr [EDI]
005b32d3 : PUSH EAX
005b32d4 : ADD ESI,0x14
005b32d7 : PUSH ESI
005b32d8 : LEA ECX,[ESP + 0x1c]
005b32dc : PUSH ECX
005b32dd : MOV ECX,dword ptr [ESP + 0x3c]
005b32e1 : CALL EDX
005b32e3 : LEA ECX,[ESP + 0x18]
005b32e7 : CALL 0x00526bc0
005b32ec : TEST EBX,EBX
005b32ee : JZ 0x005b32f7
005b32f0 : MOV ECX,EBX
005b32f2 : CALL 0x00503db0
005b32f7 : POP EDI
005b32f8 : POP ESI
005b32f9 : MOV EAX,EBP
005b32fb : POP EBP
005b32fc : POP EBX
005b32fd : ADD ESP,0x18
005b3300 : RET
