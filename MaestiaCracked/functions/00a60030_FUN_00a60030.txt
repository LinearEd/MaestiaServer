PROGRAM  : Maestia.exe
FUNCTION : FUN_00a60030
ENTRY    : 00a60030
BODY     : [[00a60030, 00a600bc] [00a600c0, 00a60171]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00a60148) */

void FUN_00a60030(void)

{
  char cVar1;
  int *piVar2;
  int iVar3;
  int *piVar4;
  int *piVar5;
  int unaff_EDI;
  
  piVar5 = *(int **)(unaff_EDI + 0x20);
  piVar2 = (int *)*piVar5;
  while( true ) {
    if (piVar2 == piVar5) {
      FUN_00401c00(*(undefined4 *)(*(int *)(unaff_EDI + 0x20) + 4));
      *(int *)(*(int *)(unaff_EDI + 0x20) + 4) = *(int *)(unaff_EDI + 0x20);
      *(undefined4 *)(unaff_EDI + 0x24) = 0;
      *(undefined4 *)*(undefined4 *)(unaff_EDI + 0x20) = *(undefined4 *)(unaff_EDI + 0x20);
      *(int *)(*(int *)(unaff_EDI + 0x20) + 8) = *(int *)(unaff_EDI + 0x20);
      piVar5 = (int *)**(int **)(unaff_EDI + 4);
      if (piVar5 != *(int **)(unaff_EDI + 4)) {
        do {
          if ((undefined4 *)piVar5[10] != (undefined4 *)0x0) {
            (*(code *)**(undefined4 **)piVar5[10])(1);
          }
          if (*(char *)((int)piVar5 + 0x2d) == '\0') {
            piVar2 = (int *)piVar5[2];
            if (*(char *)((int)piVar2 + 0x2d) == '\0') {
              cVar1 = *(char *)(*piVar2 + 0x2d);
              piVar5 = piVar2;
              piVar2 = (int *)*piVar2;
              while (cVar1 == '\0') {
                cVar1 = *(char *)(*piVar2 + 0x2d);
                piVar5 = piVar2;
                piVar2 = (int *)*piVar2;
              }
            }
            else {
              cVar1 = *(char *)(piVar5[1] + 0x2d);
              piVar4 = (int *)piVar5[1];
              piVar2 = piVar5;
              while ((piVar5 = piVar4, cVar1 == '\0' && (piVar2 == (int *)piVar5[2]))) {
                cVar1 = *(char *)(piVar5[1] + 0x2d);
                piVar4 = (int *)piVar5[1];
                piVar2 = piVar5;
              }
            }
          }
        } while (piVar5 != *(int **)(unaff_EDI + 4));
      }
      FUN_0044c480(*(undefined4 *)(*(int *)(unaff_EDI + 4) + 4));
      *(int *)(*(int *)(unaff_EDI + 4) + 4) = *(int *)(unaff_EDI + 4);
      *(undefined4 *)(unaff_EDI + 8) = 0;
      *(undefined4 *)*(undefined4 *)(unaff_EDI + 4) = *(undefined4 *)(unaff_EDI + 4);
      *(int *)(*(int *)(unaff_EDI + 4) + 8) = *(int *)(unaff_EDI + 4);
      piVar5 = *(int **)(unaff_EDI + 0x10);
      if (piVar5 != *(int **)(unaff_EDI + 0x14)) {
        do {
          if ((undefined4 *)*piVar5 != (undefined4 *)0x0) {
            (*(code *)**(undefined4 **)*piVar5)(1);
          }
          piVar5 = piVar5 + 1;
        } while (piVar5 != *(int **)(unaff_EDI + 0x14));
      }
      if (*(int *)(unaff_EDI + 0x10) != *(int *)(unaff_EDI + 0x14)) {
        *(int *)(unaff_EDI + 0x14) = *(int *)(unaff_EDI + 0x10);
      }
      if (*(int **)(unaff_EDI + 0x30) != (int *)0x0) {
        (**(code **)(**(int **)(unaff_EDI + 0x30) + 0x30))();
        *(undefined4 *)(unaff_EDI + 0x30) = 0;
      }
      return;
    }
    iVar3 = piVar2[4];
    if (iVar3 != 0) break;
    FUN_00416210();
    piVar5 = *(int **)(unaff_EDI + 0x20);
  }
  FUN_00a5fe50(iVar3);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00a60030 : PUSH EBP
00a60031 : MOV EBP,ESP
00a60033 : PUSH ECX
00a60034 : MOV ECX,dword ptr [EDI + 0x20]
00a60037 : MOV EAX,dword ptr [ECX]
00a60039 : PUSH EBX
00a6003a : PUSH ESI
00a6003b : MOV dword ptr [EBP + -0x4],EAX
00a6003e : CMP EAX,ECX
00a60040 : JZ 0x00a60066
00a60042 : MOV ESI,dword ptr [EAX + 0x10]
00a60045 : TEST ESI,ESI
00a60047 : JZ 0x00a60056
00a60049 : PUSH ESI
00a6004a : CALL 0x00a5fe50
00a6004f : MOV ECX,ESI
00a60051 : CALL 0x006f04e0
00a60056 : LEA EDX,[EBP + -0x4]
00a60059 : CALL 0x00416210
00a6005e : MOV EAX,dword ptr [EBP + -0x4]
00a60061 : CMP EAX,dword ptr [EDI + 0x20]
00a60064 : JNZ 0x00a60042
00a60066 : MOV EAX,dword ptr [EDI + 0x20]
00a60069 : MOV ECX,dword ptr [EAX + 0x4]
00a6006c : LEA ESI,[EDI + 0x1c]
00a6006f : PUSH ECX
00a60070 : MOV ECX,ESI
00a60072 : CALL 0x00401c00
00a60077 : MOV EAX,dword ptr [ESI + 0x4]
00a6007a : MOV dword ptr [EAX + 0x4],EAX
00a6007d : MOV EAX,dword ptr [ESI + 0x4]
00a60080 : XOR EBX,EBX
00a60082 : MOV dword ptr [ESI + 0x8],EBX
00a60085 : MOV dword ptr [EAX],EAX
00a60087 : MOV ESI,dword ptr [ESI + 0x4]
00a6008a : MOV dword ptr [ESI + 0x8],ESI
00a6008d : MOV EAX,dword ptr [EDI + 0x4]
00a60090 : MOV ESI,dword ptr [EAX]
00a60092 : CMP ESI,EAX
00a60094 : JZ 0x00a600e9
00a60096 : MOV ECX,dword ptr [ESI + 0x28]
00a60099 : CMP ECX,EBX
00a6009b : JZ 0x00a600a5
00a6009d : MOV EDX,dword ptr [ECX]
00a6009f : MOV EAX,dword ptr [EDX]
00a600a1 : PUSH 0x1
00a600a3 : CALL EAX
00a600a5 : CMP byte ptr [ESI + 0x2d],BL
00a600a8 : JNZ 0x00a600e4
00a600aa : MOV EAX,dword ptr [ESI + 0x8]
00a600ad : CMP byte ptr [EAX + 0x2d],BL
00a600b0 : JNZ 0x00a600cb
00a600b2 : MOV ESI,EAX
00a600b4 : MOV EAX,dword ptr [ESI]
00a600b6 : CMP byte ptr [EAX + 0x2d],BL
00a600b9 : JNZ 0x00a600e4
00a600bb : JMP 0x00a600c0
00a600c0 : MOV ESI,EAX
00a600c2 : MOV EAX,dword ptr [ESI]
00a600c4 : CMP byte ptr [EAX + 0x2d],BL
00a600c7 : JZ 0x00a600c0
00a600c9 : JMP 0x00a600e4
00a600cb : MOV EAX,dword ptr [ESI + 0x4]
00a600ce : CMP byte ptr [EAX + 0x2d],BL
00a600d1 : JNZ 0x00a600e2
00a600d3 : CMP ESI,dword ptr [EAX + 0x8]
00a600d6 : JNZ 0x00a600e2
00a600d8 : MOV ESI,EAX
00a600da : MOV EAX,dword ptr [EAX + 0x4]
00a600dd : CMP byte ptr [EAX + 0x2d],BL
00a600e0 : JZ 0x00a600d3
00a600e2 : MOV ESI,EAX
00a600e4 : CMP ESI,dword ptr [EDI + 0x4]
00a600e7 : JNZ 0x00a60096
00a600e9 : MOV ECX,dword ptr [EDI + 0x4]
00a600ec : MOV EDX,dword ptr [ECX + 0x4]
00a600ef : PUSH EDX
00a600f0 : MOV ECX,EDI
00a600f2 : CALL 0x0044c480
00a600f7 : MOV EAX,dword ptr [EDI + 0x4]
00a600fa : MOV dword ptr [EAX + 0x4],EAX
00a600fd : MOV EAX,dword ptr [EDI + 0x4]
00a60100 : MOV dword ptr [EDI + 0x8],EBX
00a60103 : MOV dword ptr [EAX],EAX
00a60105 : MOV EAX,dword ptr [EDI + 0x4]
00a60108 : MOV dword ptr [EAX + 0x8],EAX
00a6010b : MOV ESI,dword ptr [EDI + 0x10]
00a6010e : CMP ESI,dword ptr [EDI + 0x14]
00a60111 : JZ 0x00a60129
00a60113 : MOV ECX,dword ptr [ESI]
00a60115 : CMP ECX,EBX
00a60117 : JZ 0x00a60121
00a60119 : MOV EAX,dword ptr [ECX]
00a6011b : MOV EDX,dword ptr [EAX]
00a6011d : PUSH 0x1
00a6011f : CALL EDX
00a60121 : ADD ESI,0x4
00a60124 : CMP ESI,dword ptr [EDI + 0x14]
00a60127 : JNZ 0x00a60113
00a60129 : MOV ECX,dword ptr [EDI + 0x14]
00a6012c : MOV ESI,dword ptr [EDI + 0x10]
00a6012f : CMP ESI,ECX
00a60131 : JZ 0x00a60157
00a60133 : MOV EAX,ECX
00a60135 : SUB EAX,ECX
00a60137 : SAR EAX,0x2
00a6013a : LEA EDX,[EAX*0x4 + 0x0]
00a60141 : LEA EBX,[EDX + ESI*0x1]
00a60144 : TEST EAX,EAX
00a60146 : JLE 0x00a60154
00a60148 : PUSH EDX
00a60149 : PUSH ECX
00a6014a : PUSH EDX
00a6014b : PUSH ESI
00a6014c : CALL 0x00634101
00a60151 : ADD ESP,0x10
00a60154 : MOV dword ptr [EDI + 0x14],EBX
00a60157 : MOV ECX,dword ptr [EDI + 0x30]
00a6015a : POP ESI
00a6015b : POP EBX
00a6015c : TEST ECX,ECX
00a6015e : JZ 0x00a6016e
00a60160 : MOV EAX,dword ptr [ECX]
00a60162 : MOV EDX,dword ptr [EAX + 0x30]
00a60165 : CALL EDX
00a60167 : MOV dword ptr [EDI + 0x30],0x0
00a6016e : MOV ESP,EBP
00a60170 : POP EBP
00a60171 : RET
