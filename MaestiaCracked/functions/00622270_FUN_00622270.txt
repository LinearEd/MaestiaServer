PROGRAM  : Maestia.exe
FUNCTION : FUN_00622270
ENTRY    : 00622270
BODY     : [[00622270, 006222bc] [006222c0, 00622302]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_00622270(undefined4 *param_1,undefined4 param_2,int param_3,int param_4,uint *param_5)

{
  undefined4 *puVar1;
  uint *puVar2;
  int iVar3;
  uint *puVar4;
  uint *puVar5;
  uint *puVar6;
  uint uVar7;
  
  iVar3 = FUN_0061b930();
  uVar7 = iVar3 + -1 + param_4 & ~(iVar3 - 1U);
  *param_1 = 0;
  *param_5 = uVar7;
  puVar5 = param_5 + 8 + param_3 * 4;
  puVar6 = (uint *)0x0;
  param_5[5] = (uint)puVar5;
  param_5[6] = 0;
  puVar2 = param_5 + 8;
  if (param_3 < 1) {
    *param_1 = param_5;
    return 0;
  }
  do {
    puVar4 = puVar2;
    puVar4[1] = 0;
    *puVar4 = (uint)puVar5;
    if (param_5[3] == 0) {
      param_5[3] = (uint)puVar4;
    }
    else {
      puVar6[1] = (uint)puVar4;
    }
    puVar1 = (undefined4 *)*puVar4;
    *puVar1 = puVar4;
    puVar1[1] = param_5;
    param_5[1] = param_5[1] + 1;
    puVar5 = (uint *)((int)puVar5 + uVar7 + 0x10);
    param_3 = param_3 + -1;
    puVar2 = puVar4 + 4;
    puVar6 = puVar4;
  } while (param_3 != 0);
  *param_1 = param_5;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00622270 : PUSH EBX
00622271 : PUSH EBP
00622272 : PUSH ESI
00622273 : PUSH EDI
00622274 : CALL 0x0061b930
00622279 : MOV ECX,dword ptr [ESP + 0x20]
0062227d : MOV EDI,dword ptr [ESP + 0x1c]
00622281 : MOV EBX,dword ptr [ESP + 0x14]
00622285 : LEA ESI,[EAX + ECX*0x1 + -0x1]
00622289 : MOV ECX,dword ptr [ESP + 0x24]
0062228d : DEC EAX
0062228e : NOT EAX
00622290 : AND ESI,EAX
00622292 : MOV EAX,ECX
00622294 : MOV dword ptr [EBX],0x0
0062229a : MOV EDX,EDI
0062229c : ADD ECX,0x20
0062229f : SHL EDX,0x4
006222a2 : MOV dword ptr [EAX],ESI
006222a4 : ADD EDX,ECX
006222a6 : XOR EBP,EBP
006222a8 : ADD ESI,0x10
006222ab : MOV dword ptr [EAX + 0x14],EDX
006222ae : MOV dword ptr [EAX + 0x18],0x0
006222b5 : TEST EDI,EDI
006222b7 : JLE 0x006222fa
006222b9 : MOV EBX,EDI
006222bb : JMP 0x006222c0
006222c0 : MOV dword ptr [ECX + 0x4],0x0
006222c7 : MOV dword ptr [ECX],EDX
006222c9 : CMP dword ptr [EAX + 0xc],0x0
006222cd : JNZ 0x006222d4
006222cf : MOV dword ptr [EAX + 0xc],ECX
006222d2 : JMP 0x006222d7
006222d4 : MOV dword ptr [EBP + 0x4],ECX
006222d7 : MOV EDI,dword ptr [ECX]
006222d9 : MOV dword ptr [EDI],ECX
006222db : MOV EBP,ECX
006222dd : MOV dword ptr [EDI + 0x4],EAX
006222e0 : INC dword ptr [EAX + 0x4]
006222e3 : ADD ECX,0x10
006222e6 : ADD EDX,ESI
006222e8 : SUB EBX,0x1
006222eb : JNZ 0x006222c0
006222ed : MOV EDX,dword ptr [ESP + 0x14]
006222f1 : POP EDI
006222f2 : POP ESI
006222f3 : POP EBP
006222f4 : MOV dword ptr [EDX],EAX
006222f6 : XOR EAX,EAX
006222f8 : POP EBX
006222f9 : RET
006222fa : POP EDI
006222fb : POP ESI
006222fc : MOV dword ptr [EBX],EAX
006222fe : POP EBP
006222ff : XOR EAX,EAX
00622301 : POP EBX
00622302 : RET
