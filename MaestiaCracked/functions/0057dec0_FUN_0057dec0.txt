PROGRAM  : Maestia.exe
FUNCTION : FUN_0057dec0
ENTRY    : 0057dec0
BODY     : [[0057dec0, 0057df21]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0057dec0(undefined4 param_1,char *param_2,uint param_3)

{
  char cVar1;
  char *pcVar2;
  uint uVar3;
  undefined4 uVar4;
  LONG LVar5;
  
  uVar3 = param_3;
  if (param_3 == 0xffffffff) {
    pcVar2 = param_2;
    do {
      cVar1 = *pcVar2;
      pcVar2 = pcVar2 + 1;
    } while (cVar1 != '\0');
    uVar3 = (int)pcVar2 - (int)(param_2 + 1);
  }
  FUN_0051c570(param_2,uVar3);
  uVar4 = FUN_0057de40(param_1,&param_3);
  uVar3 = param_3 & 0xfffffffc;
  LVar5 = InterlockedExchangeAdd((LONG *)(uVar3 + 4),-1);
  if (LVar5 == 1) {
    FUN_00515cf0(uVar3);
  }
  return uVar4;
}



============================================================
DISASSEMBLY
============================================================
0057dec0 : MOV EAX,dword ptr [ESP + 0xc]
0057dec4 : MOV EDX,dword ptr [ESP + 0x8]
0057dec8 : PUSH ESI
0057dec9 : PUSH EDI
0057deca : MOV ESI,ECX
0057decc : CMP EAX,-0x1
0057decf : JNZ 0x0057dedf
0057ded1 : MOV EAX,EDX
0057ded3 : LEA EDI,[EAX + 0x1]
0057ded6 : MOV CL,byte ptr [EAX]
0057ded8 : INC EAX
0057ded9 : TEST CL,CL
0057dedb : JNZ 0x0057ded6
0057dedd : SUB EAX,EDI
0057dedf : PUSH EAX
0057dee0 : PUSH EDX
0057dee1 : LEA ECX,[ESP + 0x1c]
0057dee5 : CALL 0x0051c570
0057deea : MOV ECX,dword ptr [ESP + 0xc]
0057deee : LEA EAX,[ESP + 0x14]
0057def2 : PUSH EAX
0057def3 : PUSH ECX
0057def4 : MOV ECX,ESI
0057def6 : CALL 0x0057de40
0057defb : MOV ESI,dword ptr [ESP + 0x14]
0057deff : AND ESI,0xfffffffc
0057df02 : PUSH -0x1
0057df04 : LEA EDX,[ESI + 0x4]
0057df07 : PUSH EDX
0057df08 : MOV EDI,EAX
0057df0a : CALL dword ptr [0x00b851cc]
0057df10 : SUB EAX,0x1
0057df13 : JNZ 0x0057df1b
0057df15 : PUSH ESI
0057df16 : CALL 0x00515cf0
0057df1b : MOV EAX,EDI
0057df1d : POP EDI
0057df1e : POP ESI
0057df1f : RET 0xc
