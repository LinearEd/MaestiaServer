PROGRAM  : Maestia.exe
FUNCTION : FUN_00814d70
ENTRY    : 00814d70
BODY     : [[00814d70, 00814f98]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00814d70(int param_1)

{
  ushort uVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  short *psVar5;
  uint *puVar6;
  undefined1 local_44 [4];
  int *local_40;
  undefined1 local_38 [8];
  uint local_30;
  uint *local_2c;
  int *local_28;
  int *local_24;
  int local_20;
  uint *local_1c;
  undefined1 local_18 [8];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b377db;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((*(char *)(param_1 + 0xfe) == '\0') && (*(int *)(DAT_0172491c + 0x17c) != 0)) {
    *(undefined1 *)(param_1 + 0xfe) = 1;
    local_20 = 1000;
    FUN_004437f0(&local_20);
    if (local_24 != (int *)*(int *)(param_1 + 0x90)) {
      FUN_004014f0(local_44);
      local_8 = 0;
      if (DAT_017247b4 != 0) {
        local_20 = -(uint)(*(int *)(DAT_017247b4 + 0x28) != 0);
        iVar2 = DAT_017247b4;
joined_r0x00814e11:
        if (local_20 != 0) {
          if (iVar2 != 0) {
            local_1c = (uint *)0x0;
            FUN_00404160(&local_20,local_18,&local_1c);
            puVar6 = local_1c;
            if (local_1c != (uint *)0x0) {
              for (psVar5 = (short *)local_1c[0x54]; psVar5 != (short *)local_1c[0x55];
                  psVar5 = psVar5 + 4) {
                if (*psVar5 == (short)*(undefined4 *)(*(int *)(DAT_0172491c + 0x17c) + 0x16d8)) {
                  if (((*(int *)(psVar5 + 2) != 0) && (uVar1 = (ushort)local_1c[0x5e], 4 < uVar1))
                     && ((short)local_1c[0x5f] == 1)) {
                    local_1c = (uint *)(uint)uVar1;
                    FUN_004437f0(&local_1c);
                    if (local_28 == local_40) {
                      local_30 = (uint)uVar1;
                      local_2c = puVar6;
                      FUN_00451e00(local_38,&local_30);
                      iVar2 = DAT_017247b4;
                    }
                  }
                  break;
                }
              }
            }
          }
          goto joined_r0x00814e11;
        }
      }
      local_24 = (int *)*local_40;
      if (local_24 != local_40) {
        do {
          piVar3 = local_24;
          local_28 = (int *)FUN_006f0760(0x48,"",0,(DAT_01725270 >> 3 & 1) == 0,uVar4);
          local_8._0_1_ = 1;
          if (local_28 == (int *)0x0) {
            puVar6 = (uint *)0x0;
          }
          else {
            puVar6 = (uint *)FUN_00453390(local_28);
          }
          local_8 = (uint)local_8._1_3_ << 8;
          FUN_00451d70();
          local_30 = *(int *)(param_1 + 0x94) + 1;
          *puVar6 = local_30;
          *(short *)(puVar6 + 1) = (short)piVar3[3];
          local_2c = puVar6;
          FUN_00451e00(local_38,&local_30);
          FUN_00416210();
        } while (local_24 != local_40);
      }
      local_8 = 0xffffffff;
      FUN_0047a120(local_44);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00814d70 : PUSH EBP
00814d71 : MOV EBP,ESP
00814d73 : PUSH -0x1
00814d75 : PUSH 0xb377db
00814d7a : MOV EAX,FS:[0x0]
00814d80 : PUSH EAX
00814d81 : SUB ESP,0x38
00814d84 : PUSH EBX
00814d85 : PUSH ESI
00814d86 : PUSH EDI
00814d87 : MOV EAX,[0x00d66fa0]
00814d8c : XOR EAX,EBP
00814d8e : PUSH EAX
00814d8f : LEA EAX,[EBP + -0xc]
00814d92 : MOV FS:[0x0],EAX
00814d98 : MOV ESI,dword ptr [EBP + 0x8]
00814d9b : CMP byte ptr [ESI + 0xfe],0x0
00814da2 : JNZ 0x00814f85
00814da8 : MOV EAX,[0x0172491c]
00814dad : CMP dword ptr [EAX + 0x17c],0x0
00814db4 : JZ 0x00814f85
00814dba : LEA EDX,[EBP + -0x1c]
00814dbd : LEA ECX,[ESI + 0x8c]
00814dc3 : PUSH EDX
00814dc4 : LEA EAX,[EBP + -0x20]
00814dc7 : MOV byte ptr [ESI + 0xfe],0x1
00814dce : MOV dword ptr [EBP + -0x1c],0x3e8
00814dd5 : CALL 0x004437f0
00814dda : MOV ESI,dword ptr [ESI + 0x90]
00814de0 : CMP dword ptr [EBP + -0x20],ESI
00814de3 : JZ 0x00814f85
00814de9 : LEA EAX,[EBP + -0x40]
00814dec : PUSH EAX
00814ded : CALL 0x004014f0
00814df2 : MOV dword ptr [EBP + -0x4],0x0
00814df9 : MOV EBX,dword ptr [0x017247b4]
00814dff : TEST EBX,EBX
00814e01 : JZ 0x00814ed7
00814e07 : MOV EAX,dword ptr [EBX + 0x28]
00814e0a : NEG EAX
00814e0c : SBB EAX,EAX
00814e0e : MOV dword ptr [EBP + -0x1c],EAX
00814e11 : JZ 0x00814ed7
00814e17 : TEST EBX,EBX
00814e19 : JZ 0x00814ecd
00814e1f : LEA ECX,[EBP + -0x18]
00814e22 : PUSH ECX
00814e23 : LEA EDX,[EBP + -0x14]
00814e26 : PUSH EDX
00814e27 : LEA EAX,[EBP + -0x1c]
00814e2a : PUSH EAX
00814e2b : MOV EAX,EBX
00814e2d : MOV dword ptr [EBP + -0x18],0x0
00814e34 : CALL 0x00404160
00814e39 : MOV ESI,dword ptr [EBP + -0x18]
00814e3c : TEST ESI,ESI
00814e3e : JZ 0x00814ecd
00814e44 : MOV ECX,dword ptr [0x0172491c]
00814e4a : MOV EAX,dword ptr [ECX + 0x17c]
00814e50 : MOV EDX,dword ptr [EAX + 0x16d8]
00814e56 : MOV EAX,dword ptr [ESI + 0x150]
00814e5c : MOV ECX,dword ptr [ESI + 0x154]
00814e62 : CMP EAX,ECX
00814e64 : JZ 0x00814ecd
00814e66 : CMP word ptr [EAX],DX
00814e69 : JZ 0x00814e74
00814e6b : ADD EAX,0x8
00814e6e : CMP EAX,ECX
00814e70 : JNZ 0x00814e66
00814e72 : JMP 0x00814ecd
00814e74 : CMP dword ptr [EAX + 0x4],0x0
00814e78 : JZ 0x00814ecd
00814e7a : MOVZX EDI,word ptr [ESI + 0x178]
00814e81 : CMP DI,0x5
00814e85 : JC 0x00814ecd
00814e87 : CMP word ptr [ESI + 0x17c],0x1
00814e8f : JNZ 0x00814ecd
00814e91 : MOVZX EDX,DI
00814e94 : LEA EAX,[EBP + -0x18]
00814e97 : PUSH EAX
00814e98 : LEA EAX,[EBP + -0x24]
00814e9b : LEA ECX,[EBP + -0x40]
00814e9e : MOV dword ptr [EBP + -0x18],EDX
00814ea1 : CALL 0x004437f0
00814ea6 : MOV ECX,dword ptr [EBP + -0x3c]
00814ea9 : CMP dword ptr [EBP + -0x24],ECX
00814eac : JNZ 0x00814ecd
00814eae : LEA EAX,[EBP + -0x2c]
00814eb1 : MOVZX EDX,DI
00814eb4 : PUSH EAX
00814eb5 : LEA ECX,[EBP + -0x34]
00814eb8 : PUSH ECX
00814eb9 : LEA EAX,[EBP + -0x40]
00814ebc : MOV dword ptr [EBP + -0x2c],EDX
00814ebf : MOV dword ptr [EBP + -0x28],ESI
00814ec2 : CALL 0x00451e00
00814ec7 : MOV EBX,dword ptr [0x017247b4]
00814ecd : CMP dword ptr [EBP + -0x1c],0x0
00814ed1 : JNZ 0x00814e17
00814ed7 : MOV EAX,dword ptr [EBP + -0x3c]
00814eda : MOV EDI,dword ptr [EAX]
00814edc : MOV EDX,dword ptr [EBP + -0x20]
00814edf : MOV EBX,dword ptr [EDX + 0x10]
00814ee2 : MOV dword ptr [EBP + -0x20],EDI
00814ee5 : CMP EDI,EAX
00814ee7 : JZ 0x00814f75
00814eed : MOV EAX,[0x01725270]
00814ef2 : SHR EAX,0x3
00814ef5 : MOV ECX,0x0
00814efa : AND EAX,0x1
00814efd : SETZ CL
00814f00 : PUSH ECX
00814f01 : PUSH 0x0
00814f03 : PUSH 0xbf1a4a
00814f08 : PUSH 0x48
00814f0a : CALL 0x006f0760
00814f0f : ADD ESP,0x10
00814f12 : MOV dword ptr [EBP + -0x24],EAX
00814f15 : MOV byte ptr [EBP + -0x4],0x1
00814f19 : TEST EAX,EAX
00814f1b : JZ 0x00814f27
00814f1d : PUSH EAX
00814f1e : CALL 0x00453390
00814f23 : MOV ESI,EAX
00814f25 : JMP 0x00814f29
00814f27 : XOR ESI,ESI
00814f29 : MOV byte ptr [EBP + -0x4],0x0
00814f2d : MOV EAX,EBX
00814f2f : CALL 0x00451d70
00814f34 : MOV ECX,dword ptr [EBP + 0x8]
00814f37 : MOV EAX,dword ptr [ECX + 0x94]
00814f3d : INC EAX
00814f3e : MOV dword ptr [ESI],EAX
00814f40 : MOV DX,word ptr [EDI + 0xc]
00814f44 : MOV dword ptr [EBP + -0x2c],EAX
00814f47 : LEA EAX,[EBP + -0x2c]
00814f4a : MOV word ptr [ESI + 0x4],DX
00814f4e : PUSH EAX
00814f4f : LEA EDX,[EBP + -0x34]
00814f52 : PUSH EDX
00814f53 : LEA EAX,[ECX + 0x8c]
00814f59 : MOV dword ptr [EBP + -0x28],ESI
00814f5c : CALL 0x00451e00
00814f61 : LEA EDX,[EBP + -0x20]
00814f64 : CALL 0x00416210
00814f69 : MOV EDI,dword ptr [EBP + -0x20]
00814f6c : CMP EDI,dword ptr [EBP + -0x3c]
00814f6f : JNZ 0x00814eed
00814f75 : MOV dword ptr [EBP + -0x4],0xffffffff
00814f7c : LEA EAX,[EBP + -0x40]
00814f7f : PUSH EAX
00814f80 : CALL 0x0047a120
00814f85 : MOV ECX,dword ptr [EBP + -0xc]
00814f88 : MOV dword ptr FS:[0x0],ECX
00814f8f : POP ECX
00814f90 : POP EDI
00814f91 : POP ESI
00814f92 : POP EBX
00814f93 : MOV ESP,EBP
00814f95 : POP EBP
00814f96 : RET 0x4
