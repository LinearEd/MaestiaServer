PROGRAM  : Maestia.exe
FUNCTION : FUN_00a6b5d0
ENTRY    : 00a6b5d0
BODY     : [[00a6b5d0, 00a6b6a0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a6b5d0(void)

{
  int iVar1;
  int in_ECX;
  int unaff_ESI;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0ddcc;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (unaff_ESI != 0) {
    if (*(int **)(unaff_ESI + 0x2c) != (int *)0x0) {
      (**(code **)(**(int **)(unaff_ESI + 0x2c) + 0x28))
                (unaff_ESI + 0xc,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    }
    local_28 = (LPCRITICAL_SECTION)(in_ECX + 0x70);
    *(undefined4 *)(unaff_ESI + 0x2c) = 0;
    local_1c = 0;
    local_24 = ".\\Objects\\AvaEffectMgr.cpp";
    local_20 = 0x215;
    local_18 = 1;
    FUN_006ef1a0(&local_28);
    local_8 = 0;
    for (iVar1 = *(int *)(in_ECX + 0x38); iVar1 != *(int *)(in_ECX + 0x3c); iVar1 = iVar1 + 0xc) {
      if ((*(char *)(iVar1 + 8) != '\0') && (*(int *)(iVar1 + 4) == unaff_ESI)) {
        FUN_004408a0(iVar1);
        break;
      }
    }
    if (local_1c != 0) {
      local_8 = 0xffffffff;
      LeaveCriticalSection(local_28);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a6b5d0 : PUSH EBP
00a6b5d1 : MOV EBP,ESP
00a6b5d3 : PUSH -0x1
00a6b5d5 : PUSH 0xb0ddcc
00a6b5da : MOV EAX,FS:[0x0]
00a6b5e0 : PUSH EAX
00a6b5e1 : SUB ESP,0x18
00a6b5e4 : PUSH EBX
00a6b5e5 : PUSH EDI
00a6b5e6 : MOV EAX,[0x00d66fa0]
00a6b5eb : XOR EAX,EBP
00a6b5ed : PUSH EAX
00a6b5ee : LEA EAX,[EBP + -0xc]
00a6b5f1 : MOV FS:[0x0],EAX
00a6b5f7 : MOV EDI,ECX
00a6b5f9 : XOR EBX,EBX
00a6b5fb : CMP ESI,EBX
00a6b5fd : JZ 0x00a6b672
00a6b5ff : MOV ECX,dword ptr [ESI + 0x2c]
00a6b602 : CMP ECX,EBX
00a6b604 : JZ 0x00a6b611
00a6b606 : MOV EAX,dword ptr [ECX]
00a6b608 : MOV EAX,dword ptr [EAX + 0x28]
00a6b60b : LEA EDX,[ESI + 0xc]
00a6b60e : PUSH EDX
00a6b60f : CALL EAX
00a6b611 : LEA EDX,[EBP + -0x24]
00a6b614 : LEA ECX,[EDI + 0x70]
00a6b617 : PUSH EDX
00a6b618 : MOV dword ptr [ESI + 0x2c],EBX
00a6b61b : MOV dword ptr [EBP + -0x18],EBX
00a6b61e : MOV dword ptr [EBP + -0x24],ECX
00a6b621 : MOV dword ptr [EBP + -0x20],0xc43e68
00a6b628 : MOV dword ptr [EBP + -0x1c],0x215
00a6b62f : MOV dword ptr [EBP + -0x14],0x1
00a6b636 : CALL 0x006ef1a0
00a6b63b : MOV dword ptr [EBP + -0x4],EBX
00a6b63e : MOV EAX,dword ptr [EDI + 0x38]
00a6b641 : MOV ECX,dword ptr [EDI + 0x3c]
00a6b644 : CMP EAX,ECX
00a6b646 : JZ 0x00a6b659
00a6b648 : CMP byte ptr [EAX + 0x8],BL
00a6b64b : JZ 0x00a6b652
00a6b64d : CMP dword ptr [EAX + 0x4],ESI
00a6b650 : JZ 0x00a6b683
00a6b652 : ADD EAX,0xc
00a6b655 : CMP EAX,ECX
00a6b657 : JNZ 0x00a6b648
00a6b659 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6b660 : CMP dword ptr [EBP + -0x18],EBX
00a6b663 : JZ 0x00a6b672
00a6b665 : MOV ECX,dword ptr [EBP + -0x24]
00a6b668 : PUSH ECX
00a6b669 : CALL dword ptr [0x00b8511c]
00a6b66f : MOV dword ptr [EBP + -0x18],EBX
00a6b672 : MOV ECX,dword ptr [EBP + -0xc]
00a6b675 : MOV dword ptr FS:[0x0],ECX
00a6b67c : POP ECX
00a6b67d : POP EDI
00a6b67e : POP EBX
00a6b67f : MOV ESP,EBP
00a6b681 : POP EBP
00a6b682 : RET
00a6b683 : PUSH EAX
00a6b684 : ADD EDI,0x34
00a6b687 : LEA EAX,[EBP + -0x10]
00a6b68a : CALL 0x004408a0
00a6b68f : MOV dword ptr [EBP + -0x4],0xffffffff
00a6b696 : CMP dword ptr [EBP + -0x18],EBX
00a6b699 : JZ 0x00a6b672
00a6b69b : MOV EAX,dword ptr [EBP + -0x24]
00a6b69e : PUSH EAX
00a6b69f : JMP 0x00a6b669
