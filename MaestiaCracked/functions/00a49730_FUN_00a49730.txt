PROGRAM  : Maestia.exe
FUNCTION : FUN_00a49730
ENTRY    : 00a49730
BODY     : [[00a49730, 00a49947]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00a49730(undefined4 param_1)

{
  bool bVar1;
  bool bVar2;
  SHORT SVar3;
  uint uVar4;
  int *piVar5;
  undefined4 uVar6;
  int unaff_ESI;
  GRefCountImpl *local_30;
  GRefCountImpl *local_2c;
  undefined4 local_28;
  int local_24;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b0de9c;
  local_14 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xffffffc0;
  bVar1 = false;
  switch(param_1) {
  case 0x41:
    ExceptionList = &local_14;
    SVar3 = GetKeyState(0x11);
    if ((SVar3 < 0) && (*(int *)(unaff_ESI + 0x38) != 0)) {
      (**(code **)**(undefined4 **)(unaff_ESI + 0x38))("myClipboardHandler.SelectAll");
    }
    ExceptionList = local_14;
    return 1;
  default:
    return 0;
  case 0x43:
    ExceptionList = &local_14;
    SVar3 = GetKeyState(0x11);
    if (-1 < SVar3) {
      ExceptionList = local_14;
      return 1;
    }
    if (*(int *)(unaff_ESI + 0x38) == 0) {
      ExceptionList = local_14;
      return 1;
    }
    (**(code **)**(undefined4 **)(unaff_ESI + 0x38))("myClipboardHandler.CopySelection");
    ExceptionList = local_14;
    return 1;
  case 0x56:
    break;
  case 0x58:
    ExceptionList = &local_14;
    SVar3 = GetKeyState(0x11);
    if ((SVar3 < 0) && (*(int *)(unaff_ESI + 0x38) != 0)) {
      (**(code **)**(undefined4 **)(unaff_ESI + 0x38))("myClipboardHandler.CutSelection",uVar4);
    }
    ExceptionList = local_14;
    return 1;
  }
  ExceptionList = &local_14;
  SVar3 = GetKeyState(0x11);
  if (-1 < SVar3) {
    ExceptionList = local_14;
    return 1;
  }
  if (*(int *)(*(int *)(DAT_0172491c + 0x90) + 0x8c) != 0) {
    piVar5 = (int *)FUN_00403d70(&local_30);
    bVar1 = true;
    bVar2 = false;
    if (*piVar5 != 0) goto LAB_00a49807;
  }
  bVar2 = true;
LAB_00a49807:
  local_c = 0xffffffff;
  if ((bVar1) && (local_30 != (GRefCountImpl *)0x0)) {
    GRefCountImpl::Release(local_30);
  }
  if (bVar2) {
    ExceptionList = local_14;
    return 1;
  }
  FUN_00403d70(&local_2c);
  local_c = 1;
  uVar6 = FUN_005003f0();
  FUN_004ffad0(uVar6);
  local_c = CONCAT31(local_c._1_3_,3);
  if (local_2c != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(local_2c);
  }
  if ((local_24 != 0) && (*(int *)(unaff_ESI + 0x38) != 0)) {
    (**(code **)(**(int **)(unaff_ESI + 0x38) + 4))
              (*(int **)(unaff_ESI + 0x38),"myClipboardHandler.PasteSelection",&DAT_00cc9d5c,
               local_28);
  }
  local_c = 0xffffffff;
  FUN_004ff940();
  ExceptionList = local_14;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00a49730 : PUSH EBP
00a49731 : MOV EBP,ESP
00a49733 : AND ESP,0xfffffff8
00a49736 : PUSH -0x1
00a49738 : PUSH 0xb0de9c
00a4973d : MOV EAX,FS:[0x0]
00a49743 : PUSH EAX
00a49744 : SUB ESP,0x28
00a49747 : PUSH EBX
00a49748 : MOV EAX,[0x00d66fa0]
00a4974d : XOR EAX,ESP
00a4974f : PUSH EAX
00a49750 : LEA EAX,[ESP + 0x30]
00a49754 : MOV FS:[0x0],EAX
00a4975a : MOV EAX,dword ptr [EBP + 0x8]
00a4975d : XOR EBX,EBX
00a4975f : ADD EAX,-0x41
00a49762 : MOV dword ptr [ESP + 0x10],EBX
00a49766 : CMP EAX,0x17
00a49769 : JA 0x00a49933
00a4976f : MOVZX EAX,byte ptr [EAX + 0xa4995c]
00a49776 : JMP dword ptr [EAX*0x4 + 0xa49948]
00a4977d : PUSH 0x11
00a4977f : CALL dword ptr [0x00b85438]
00a49785 : TEST AX,AX
00a49788 : JGE 0x00a4979d
00a4978a : CMP dword ptr [ESI + 0x38],EBX
00a4978d : JZ 0x00a4979d
00a4978f : MOV ECX,dword ptr [ESI + 0x38]
00a49792 : MOV EDX,dword ptr [ECX]
00a49794 : MOV EAX,dword ptr [EDX]
00a49796 : PUSH 0xcc9d38
00a4979b : CALL EAX
00a4979d : MOV AL,0x1
00a4979f : MOV ECX,dword ptr [ESP + 0x30]
00a497a3 : MOV dword ptr FS:[0x0],ECX
00a497aa : POP ECX
00a497ab : POP EBX
00a497ac : MOV ESP,EBP
00a497ae : POP EBP
00a497af : RET 0x4
00a497b2 : PUSH 0x11
00a497b4 : CALL dword ptr [0x00b85438]
00a497ba : TEST AX,AX
00a497bd : JGE 0x00a498b4
00a497c3 : MOV ECX,dword ptr [0x0172491c]
00a497c9 : MOV EAX,dword ptr [ECX + 0x90]
00a497cf : CMP dword ptr [EAX + 0x8c],EBX
00a497d5 : JZ 0x00a49802
00a497d7 : MOV ECX,dword ptr [EAX + 0x8c]
00a497dd : LEA EDX,[ESP + 0x14]
00a497e1 : PUSH EDX
00a497e2 : CALL 0x00403d70
00a497e7 : MOV dword ptr [ESP + 0x38],0x0
00a497ef : MOV EBX,0x1
00a497f4 : MOV dword ptr [ESP + 0x10],EBX
00a497f8 : CMP dword ptr [EAX],0x0
00a497fb : MOV byte ptr [ESP + 0xf],0x0
00a49800 : JNZ 0x00a49807
00a49802 : MOV byte ptr [ESP + 0xf],0x1
00a49807 : MOV dword ptr [ESP + 0x38],0xffffffff
00a4980f : TEST BL,0x1
00a49812 : JZ 0x00a49828
00a49814 : AND EBX,0xfffffffe
00a49817 : MOV dword ptr [ESP + 0x10],EBX
00a4981b : MOV ECX,dword ptr [ESP + 0x14]
00a4981f : TEST ECX,ECX
00a49821 : JZ 0x00a49828
00a49823 : CALL 0x004ff7e0
00a49828 : CMP byte ptr [ESP + 0xf],0x0
00a4982d : JNZ 0x00a4979d
00a49833 : MOV EAX,[0x0172491c]
00a49838 : MOV EAX,dword ptr [EAX + 0x90]
00a4983e : LEA ECX,[ESP + 0x18]
00a49842 : PUSH ECX
00a49843 : MOV ECX,dword ptr [EAX + 0x8c]
00a49849 : CALL 0x00403d70
00a4984e : MOV dword ptr [ESP + 0x38],0x1
00a49856 : MOV ECX,dword ptr [EAX]
00a49858 : CALL 0x005003f0
00a4985d : PUSH EAX
00a4985e : LEA ECX,[ESP + 0x20]
00a49862 : CALL 0x004ffad0
00a49867 : MOV byte ptr [ESP + 0x38],0x3
00a4986c : MOV ECX,dword ptr [ESP + 0x18]
00a49870 : TEST ECX,ECX
00a49872 : JZ 0x00a49879
00a49874 : CALL 0x004ff7e0
00a49879 : CMP dword ptr [ESP + 0x20],0x0
00a4987e : JZ 0x00a498a3
00a49880 : CMP dword ptr [ESI + 0x38],0x0
00a49884 : JZ 0x00a498a3
00a49886 : MOV ECX,dword ptr [ESP + 0x1c]
00a4988a : MOV EAX,dword ptr [ESI + 0x38]
00a4988d : MOV EDX,dword ptr [EAX]
00a4988f : MOV EDX,dword ptr [EDX + 0x4]
00a49892 : PUSH ECX
00a49893 : PUSH 0xcc9d5c
00a49898 : PUSH 0xcc9d60
00a4989d : PUSH EAX
00a4989e : CALL EDX
00a498a0 : ADD ESP,0x10
00a498a3 : MOV dword ptr [ESP + 0x38],0xffffffff
00a498ab : LEA ECX,[ESP + 0x1c]
00a498af : CALL 0x004ff940
00a498b4 : MOV AL,0x1
00a498b6 : MOV ECX,dword ptr [ESP + 0x30]
00a498ba : MOV dword ptr FS:[0x0],ECX
00a498c1 : POP ECX
00a498c2 : POP EBX
00a498c3 : MOV ESP,EBP
00a498c5 : POP EBP
00a498c6 : RET 0x4
00a498c9 : PUSH 0x11
00a498cb : CALL dword ptr [0x00b85438]
00a498d1 : TEST AX,AX
00a498d4 : JGE 0x00a498e9
00a498d6 : CMP dword ptr [ESI + 0x38],EBX
00a498d9 : JZ 0x00a498e9
00a498db : MOV ECX,dword ptr [ESI + 0x38]
00a498de : MOV EAX,dword ptr [ECX]
00a498e0 : MOV EDX,dword ptr [EAX]
00a498e2 : PUSH 0xcc9d84
00a498e7 : CALL EDX
00a498e9 : MOV AL,0x1
00a498eb : MOV ECX,dword ptr [ESP + 0x30]
00a498ef : MOV dword ptr FS:[0x0],ECX
00a498f6 : POP ECX
00a498f7 : POP EBX
00a498f8 : MOV ESP,EBP
00a498fa : POP EBP
00a498fb : RET 0x4
00a498fe : PUSH 0x11
00a49900 : CALL dword ptr [0x00b85438]
00a49906 : TEST AX,AX
00a49909 : JGE 0x00a4991e
00a4990b : CMP dword ptr [ESI + 0x38],EBX
00a4990e : JZ 0x00a4991e
00a49910 : MOV ECX,dword ptr [ESI + 0x38]
00a49913 : MOV EAX,dword ptr [ECX]
00a49915 : MOV EDX,dword ptr [EAX]
00a49917 : PUSH 0xcc9da4
00a4991c : CALL EDX
00a4991e : MOV AL,0x1
00a49920 : MOV ECX,dword ptr [ESP + 0x30]
00a49924 : MOV dword ptr FS:[0x0],ECX
00a4992b : POP ECX
00a4992c : POP EBX
00a4992d : MOV ESP,EBP
00a4992f : POP EBP
00a49930 : RET 0x4
00a49933 : XOR AL,AL
00a49935 : MOV ECX,dword ptr [ESP + 0x30]
00a49939 : MOV dword ptr FS:[0x0],ECX
00a49940 : POP ECX
00a49941 : POP EBX
00a49942 : MOV ESP,EBP
00a49944 : POP EBP
00a49945 : RET 0x4
