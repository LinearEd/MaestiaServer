PROGRAM  : Maestia.exe
FUNCTION : FUN_00a7d220
ENTRY    : 00a7d220
BODY     : [[00a7d220, 00a7d511]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a7d220(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  int in_ECX;
  undefined4 *puVar5;
  undefined1 *puVar6;
  undefined1 *puVar7;
  undefined4 uStack_a0;
  int *piStack_9c;
  char *pcStack_98;
  int *piStack_94;
  char *pcStack_90;
  undefined4 *puStack_8c;
  char *pcStack_88;
  uint uStack_84;
  int local_6c;
  undefined4 local_68;
  int local_64;
  int *local_60;
  int local_5c;
  undefined1 *local_58;
  undefined1 *local_54;
  char *local_50;
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b51682;
  local_10 = ExceptionList;
  uStack_84 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uStack_84;
  if (*(int *)(in_ECX + 0x40) != 0) {
    iVar1 = *DAT_00da9894;
    local_64 = in_ECX;
    if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
      pcStack_88 = "ClearCraftPremiumIngredient";
      puStack_8c = (undefined4 *)0xa7d281;
      (**(code **)**(undefined4 **)(iVar1 + 0x114))();
    }
    piVar3 = DAT_00da9894;
    *(undefined1 *)(in_ECX + 0x39) = 0;
    *(undefined4 *)(in_ECX + 0x90) = 0xffffffff;
    *(undefined4 *)(in_ECX + 0x8c) = 0;
    iVar1 = *piVar3;
    if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
      piStack_94 = *(int **)(iVar1 + 0x114);
      pcStack_88 = (char *)0x0;
      puStack_8c = (undefined4 *)&DAT_00c5236c;
      pcStack_90 = "SetPremiumUse";
      pcStack_98 = (char *)0xa7d2c8;
      (**(code **)(*piStack_94 + 4))();
    }
    piVar3 = DAT_00da9894;
    *(undefined1 *)(in_ECX + 0x38) = 0;
    puVar7 = *(undefined1 **)(*piVar3 + 0x40);
    local_54 = (undefined1 *)0x0;
    local_58 = puVar7;
    if (puVar7 != (undefined1 *)0x0) {
      do {
        puVar6 = local_54;
        pcStack_88 = (char *)0xa7d2f9;
        piVar3 = (int *)FUN_008eb810();
        local_60 = piVar3;
        if (((piVar3 != (int *)0x0) && ((char)piVar3[0x19] != '\0')) && (piVar3[0xf] != 0)) {
          iVar1 = *(int *)(piVar3[0xf] + 8);
          local_5c = *(int *)(piVar3[0xf] + 0xc);
          local_50 = (char *)0x0;
          if (0 < iVar1) {
            do {
              puVar5 = (undefined4 *)0x0;
              if (0 < local_5c) {
                do {
                  pcStack_88 = local_50;
                  pcStack_90 = (char *)0xa7d349;
                  puStack_8c = puVar5;
                  iVar4 = (**(code **)(*piVar3 + 0x74))();
                  if (iVar4 != 0) {
                    local_68 = *(undefined4 *)(iVar4 + 0x10);
                    pcStack_88 = (char *)&local_68;
                    puStack_8c = (undefined4 *)0xa7d36a;
                    FUN_004437f0();
                    if (((local_6c != *(int *)(DAT_00d7c54c + 0x44)) &&
                        (iVar2 = *(int *)(local_6c + 0x10), piVar3 = local_60, iVar2 != 0)) &&
                       (*(short *)(iVar2 + 0x180) == 0x26)) {
                      local_58 = (undefined1 *)&uStack_a0;
                      FUN_00404350(iVar2 + 0x58);
                      local_8 = 0xffffffff;
                      FUN_008f75f0();
                      local_8 = 1;
                      pcStack_88 = (char *)0x0;
                      puStack_8c = DAT_0172491c;
                      pcStack_90 = (char *)0xa7d401;
                      FUN_00824a20();
                      local_8 = CONCAT31(local_8._1_3_,2);
                      iVar1 = *DAT_00da9894;
                      if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
                        piStack_9c = *(int **)(iVar1 + 0x114);
                        puStack_8c = local_48;
                        if (local_34 < 8) {
                          puStack_8c = &local_48;
                        }
                        pcStack_90 = local_2c;
                        if (local_18 < 8) {
                          pcStack_90 = (char *)&local_2c;
                        }
                        pcStack_88 = (char *)0x1;
                        piStack_94 = (int *)0xc52380;
                        pcStack_98 = "SetCraftPremiumIngredient";
                        uStack_a0 = 0xa7d451;
                        (**(code **)(*piStack_9c + 4))();
                      }
                      iVar1 = *DAT_00da9894;
                      if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
                        piStack_94 = *(int **)(iVar1 + 0x114);
                        pcStack_88 = (char *)0x0;
                        puStack_8c = (undefined4 *)&DAT_00c523a8;
                        pcStack_90 = "SetPremiumUse";
                        pcStack_98 = (char *)0xa7d488;
                        (**(code **)(*piStack_94 + 4))();
                      }
                      *(undefined2 *)(local_64 + 0x88) = *(undefined2 *)(iVar2 + 6);
                      *(undefined4 *)(local_64 + 0x90) = *(undefined4 *)(iVar4 + 0xc);
                      *(int *)(local_64 + 0x8c) = iVar4;
                      *(undefined1 *)(local_64 + 0x39) = 1;
                      local_8 = CONCAT31(local_8._1_3_,1);
                      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
                        pcStack_88 = (char *)0xa7d4bd;
                        FUN_006f04e0();
                      }
                      local_34 = 7;
                      local_38 = 0;
                      local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
                      local_8 = 0xffffffff;
                      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
                        pcStack_88 = (char *)0xa7d4e6;
                        FUN_006f04e0();
                      }
                      local_18 = 7;
                      local_1c = 0;
                      local_2c = (char *)((uint)local_2c._2_2_ << 0x10);
                      goto LAB_00a7d4f6;
                    }
                  }
                  puVar5 = (undefined4 *)((int)puVar5 + 1);
                } while ((int)puVar5 < local_5c);
              }
              local_50 = local_50 + 1;
              puVar6 = local_54;
              puVar7 = local_58;
            } while ((int)local_50 < iVar1);
          }
        }
        local_54 = puVar6 + 1;
      } while (local_54 < puVar7);
    }
  }
LAB_00a7d4f6:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a7d220 : PUSH EBP
00a7d221 : MOV EBP,ESP
00a7d223 : PUSH -0x1
00a7d225 : PUSH 0xb51682
00a7d22a : MOV EAX,FS:[0x0]
00a7d230 : PUSH EAX
00a7d231 : SUB ESP,0x64
00a7d234 : MOV EAX,[0x00d66fa0]
00a7d239 : XOR EAX,EBP
00a7d23b : MOV dword ptr [EBP + -0x10],EAX
00a7d23e : PUSH EBX
00a7d23f : PUSH ESI
00a7d240 : PUSH EDI
00a7d241 : PUSH EAX
00a7d242 : LEA EAX,[EBP + -0xc]
00a7d245 : MOV FS:[0x0],EAX
00a7d24b : MOV ESI,ECX
00a7d24d : CMP dword ptr [ESI + 0x40],0x0
00a7d251 : MOV dword ptr [EBP + -0x60],ESI
00a7d254 : JZ 0x00a7d4f6
00a7d25a : MOV EAX,[0x00da9894]
00a7d25f : MOV EAX,dword ptr [EAX]
00a7d261 : TEST EAX,EAX
00a7d263 : JZ 0x00a7d281
00a7d265 : CMP dword ptr [EAX + 0x114],0x0
00a7d26c : JZ 0x00a7d281
00a7d26e : MOV EAX,dword ptr [EAX + 0x114]
00a7d274 : MOV EDX,dword ptr [EAX]
00a7d276 : MOV ECX,EAX
00a7d278 : MOV EAX,dword ptr [EDX]
00a7d27a : PUSH 0xc52350
00a7d27f : CALL EAX
00a7d281 : MOV ECX,dword ptr [0x00da9894]
00a7d287 : MOV byte ptr [ESI + 0x39],0x0
00a7d28b : MOV dword ptr [ESI + 0x90],0xffffffff
00a7d295 : MOV dword ptr [ESI + 0x8c],0x0
00a7d29f : MOV EAX,dword ptr [ECX]
00a7d2a1 : TEST EAX,EAX
00a7d2a3 : JZ 0x00a7d2cb
00a7d2a5 : CMP dword ptr [EAX + 0x114],0x0
00a7d2ac : JZ 0x00a7d2cb
00a7d2ae : MOV EAX,dword ptr [EAX + 0x114]
00a7d2b4 : MOV EDX,dword ptr [EAX]
00a7d2b6 : PUSH 0x0
00a7d2b8 : PUSH 0xc5236c
00a7d2bd : PUSH 0xc52370
00a7d2c2 : PUSH EAX
00a7d2c3 : MOV EAX,dword ptr [EDX + 0x4]
00a7d2c6 : CALL EAX
00a7d2c8 : ADD ESP,0x10
00a7d2cb : MOV ECX,dword ptr [0x00da9894]
00a7d2d1 : MOV byte ptr [ESI + 0x38],0x0
00a7d2d5 : MOV EAX,dword ptr [ECX]
00a7d2d7 : MOV EDI,dword ptr [EAX + 0x40]
00a7d2da : XOR ESI,ESI
00a7d2dc : MOV dword ptr [EBP + -0x54],EDI
00a7d2df : MOV dword ptr [EBP + -0x50],ESI
00a7d2e2 : TEST EDI,EDI
00a7d2e4 : JBE 0x00a7d4f6
00a7d2ea : MOV EDX,dword ptr [0x00da9894]
00a7d2f0 : MOV EAX,dword ptr [EDX]
00a7d2f2 : MOV ECX,ESI
00a7d2f4 : CALL 0x008eb810
00a7d2f9 : MOV EBX,EAX
00a7d2fb : MOV dword ptr [EBP + -0x5c],EBX
00a7d2fe : TEST EBX,EBX
00a7d300 : JZ 0x00a7d3a8
00a7d306 : CMP byte ptr [EBX + 0x64],0x0
00a7d30a : JZ 0x00a7d3a8
00a7d310 : CMP dword ptr [EBX + 0x3c],0x0
00a7d314 : JZ 0x00a7d3a8
00a7d31a : MOV EAX,dword ptr [EBX + 0x3c]
00a7d31d : MOV ECX,dword ptr [EAX + 0x8]
00a7d320 : MOV EAX,dword ptr [EAX + 0xc]
00a7d323 : MOV dword ptr [EBP + -0x6c],ECX
00a7d326 : MOV dword ptr [EBP + -0x58],EAX
00a7d329 : MOV dword ptr [EBP + -0x4c],0x0
00a7d330 : TEST ECX,ECX
00a7d332 : JLE 0x00a7d3a8
00a7d334 : XOR ESI,ESI
00a7d336 : CMP dword ptr [EBP + -0x58],ESI
00a7d339 : JLE 0x00a7d397
00a7d33b : MOV EAX,dword ptr [EBP + -0x4c]
00a7d33e : MOV EDX,dword ptr [EBX]
00a7d340 : MOV EDX,dword ptr [EDX + 0x74]
00a7d343 : PUSH EAX
00a7d344 : PUSH ESI
00a7d345 : MOV ECX,EBX
00a7d347 : CALL EDX
00a7d349 : MOV EDI,EAX
00a7d34b : TEST EDI,EDI
00a7d34d : JZ 0x00a7d38e
00a7d34f : MOV EAX,dword ptr [EDI + 0x10]
00a7d352 : LEA ECX,[EBP + -0x64]
00a7d355 : PUSH ECX
00a7d356 : MOV ECX,dword ptr [0x00d7c54c]
00a7d35c : MOV dword ptr [EBP + -0x64],EAX
00a7d35f : ADD ECX,0x40
00a7d362 : LEA EAX,[EBP + -0x68]
00a7d365 : CALL 0x004437f0
00a7d36a : MOV EDX,dword ptr [0x00d7c54c]
00a7d370 : MOV EAX,dword ptr [EDX + 0x44]
00a7d373 : MOV ECX,dword ptr [EBP + -0x68]
00a7d376 : CMP ECX,EAX
00a7d378 : JZ 0x00a7d38e
00a7d37a : MOV EBX,dword ptr [ECX + 0x10]
00a7d37d : TEST EBX,EBX
00a7d37f : JZ 0x00a7d38b
00a7d381 : CMP word ptr [EBX + 0x180],0x26
00a7d389 : JZ 0x00a7d3b9
00a7d38b : MOV EBX,dword ptr [EBP + -0x5c]
00a7d38e : INC ESI
00a7d38f : CMP ESI,dword ptr [EBP + -0x58]
00a7d392 : JL 0x00a7d33b
00a7d394 : MOV ECX,dword ptr [EBP + -0x6c]
00a7d397 : MOV EAX,dword ptr [EBP + -0x4c]
00a7d39a : INC EAX
00a7d39b : CMP EAX,ECX
00a7d39d : MOV dword ptr [EBP + -0x4c],EAX
00a7d3a0 : JL 0x00a7d334
00a7d3a2 : MOV EDI,dword ptr [EBP + -0x54]
00a7d3a5 : MOV ESI,dword ptr [EBP + -0x50]
00a7d3a8 : INC ESI
00a7d3a9 : MOV dword ptr [EBP + -0x50],ESI
00a7d3ac : CMP ESI,EDI
00a7d3ae : JC 0x00a7d2ea
00a7d3b4 : JMP 0x00a7d4f6
00a7d3b9 : SUB ESP,0x1c
00a7d3bc : LEA EAX,[EBX + 0x58]
00a7d3bf : MOV ESI,ESP
00a7d3c1 : MOV dword ptr [EBP + -0x54],ESP
00a7d3c4 : PUSH EAX
00a7d3c5 : CALL 0x00404350
00a7d3ca : ADD ESP,0x4
00a7d3cd : MOV dword ptr [EBP + -0x4],0x0
00a7d3d4 : MOV dword ptr [EBP + -0x4],0xffffffff
00a7d3db : LEA ECX,[EBP + -0x2c]
00a7d3de : CALL 0x008f75f0
00a7d3e3 : ADD ESP,0x1c
00a7d3e6 : MOV dword ptr [EBP + -0x4],0x1
00a7d3ed : MOV ECX,dword ptr [0x0172491c]
00a7d3f3 : PUSH 0x0
00a7d3f5 : LEA EDX,[EBX + 0x18]
00a7d3f8 : PUSH ECX
00a7d3f9 : LEA ESI,[EBP + -0x48]
00a7d3fc : CALL 0x00824a20
00a7d401 : MOV byte ptr [EBP + -0x4],0x2
00a7d405 : MOV EDX,dword ptr [0x00da9894]
00a7d40b : MOV EAX,dword ptr [EDX]
00a7d40d : MOV ESI,0x8
00a7d412 : TEST EAX,EAX
00a7d414 : JZ 0x00a7d459
00a7d416 : CMP dword ptr [EAX + 0x114],0x0
00a7d41d : JZ 0x00a7d459
00a7d41f : MOV EAX,dword ptr [EAX + 0x114]
00a7d425 : MOV EDX,dword ptr [EBP + -0x44]
00a7d428 : CMP dword ptr [EBP + -0x30],ESI
00a7d42b : JNC 0x00a7d430
00a7d42d : LEA EDX,[EBP + -0x44]
00a7d430 : MOV ECX,dword ptr [EBP + -0x28]
00a7d433 : CMP dword ptr [EBP + -0x14],ESI
00a7d436 : JNC 0x00a7d43b
00a7d438 : LEA ECX,[EBP + -0x28]
00a7d43b : MOV ESI,dword ptr [EAX]
00a7d43d : PUSH 0x1
00a7d43f : PUSH EDX
00a7d440 : PUSH ECX
00a7d441 : PUSH 0xc52380
00a7d446 : PUSH 0xc5238c
00a7d44b : PUSH EAX
00a7d44c : MOV EAX,dword ptr [ESI + 0x4]
00a7d44f : CALL EAX
00a7d451 : ADD ESP,0x18
00a7d454 : MOV ESI,0x8
00a7d459 : MOV ECX,dword ptr [0x00da9894]
00a7d45f : MOV EAX,dword ptr [ECX]
00a7d461 : TEST EAX,EAX
00a7d463 : JZ 0x00a7d48b
00a7d465 : CMP dword ptr [EAX + 0x114],0x0
00a7d46c : JZ 0x00a7d48b
00a7d46e : MOV EAX,dword ptr [EAX + 0x114]
00a7d474 : MOV EDX,dword ptr [EAX]
00a7d476 : PUSH 0x0
00a7d478 : PUSH 0xc523a8
00a7d47d : PUSH 0xc523ac
00a7d482 : PUSH EAX
00a7d483 : MOV EAX,dword ptr [EDX + 0x4]
00a7d486 : CALL EAX
00a7d488 : ADD ESP,0x10
00a7d48b : MOV CX,word ptr [EBX + 0x6]
00a7d48f : MOV EAX,dword ptr [EBP + -0x60]
00a7d492 : MOV word ptr [EAX + 0x88],CX
00a7d499 : MOV EDX,dword ptr [EDI + 0xc]
00a7d49c : MOV dword ptr [EAX + 0x90],EDX
00a7d4a2 : MOV dword ptr [EAX + 0x8c],EDI
00a7d4a8 : MOV byte ptr [EAX + 0x39],0x1
00a7d4ac : MOV byte ptr [EBP + -0x4],0x1
00a7d4b0 : CMP dword ptr [EBP + -0x30],ESI
00a7d4b3 : JC 0x00a7d4bd
00a7d4b5 : MOV ECX,dword ptr [EBP + -0x44]
00a7d4b8 : CALL 0x006f04e0
00a7d4bd : MOV EDI,0x7
00a7d4c2 : XOR EAX,EAX
00a7d4c4 : MOV dword ptr [EBP + -0x30],EDI
00a7d4c7 : MOV dword ptr [EBP + -0x34],0x0
00a7d4ce : MOV word ptr [EBP + -0x44],AX
00a7d4d2 : MOV dword ptr [EBP + -0x4],0xffffffff
00a7d4d9 : CMP dword ptr [EBP + -0x14],ESI
00a7d4dc : JC 0x00a7d4e6
00a7d4de : MOV ECX,dword ptr [EBP + -0x28]
00a7d4e1 : CALL 0x006f04e0
00a7d4e6 : XOR ECX,ECX
00a7d4e8 : MOV dword ptr [EBP + -0x14],EDI
00a7d4eb : MOV dword ptr [EBP + -0x18],0x0
00a7d4f2 : MOV word ptr [EBP + -0x28],CX
00a7d4f6 : MOV ECX,dword ptr [EBP + -0xc]
00a7d4f9 : MOV dword ptr FS:[0x0],ECX
00a7d500 : POP ECX
00a7d501 : POP EDI
00a7d502 : POP ESI
00a7d503 : POP EBX
00a7d504 : MOV ECX,dword ptr [EBP + -0x10]
00a7d507 : XOR ECX,EBP
00a7d509 : CALL 0x00633e6b
00a7d50e : MOV ESP,EBP
00a7d510 : POP EBP
00a7d511 : RET
