PROGRAM  : Maestia.exe
FUNCTION : FUN_004c5b80
ENTRY    : 004c5b80
BODY     : [[004c5b80, 004c5bbb] [004c5bc0, 004c5cd5]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004c5bdc) */

void FUN_004c5b80(int param_1,undefined4 *param_2,undefined4 *param_3)

{
  uint uVar1;
  int iVar2;
  ushort *puVar3;
  undefined4 *puVar4;
  int iVar5;
  ushort *puVar6;
  uint uVar7;
  undefined4 *puVar8;
  bool bVar9;
  
  iVar2 = (int)param_3;
  puVar4 = *(undefined4 **)(param_1 + 4);
  bVar9 = true;
  if (*(char *)((int)puVar4[1] + 0x41) == '\0') {
    uVar1 = *(uint *)((int)param_3 + 0x14);
    puVar8 = (undefined4 *)puVar4[1];
    do {
      puVar4 = puVar8;
      if ((uint)puVar4[9] < 8) {
        puVar3 = (ushort *)(puVar4 + 4);
      }
      else {
        puVar3 = (ushort *)puVar4[4];
      }
      uVar7 = puVar4[8];
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = uVar1;
      }
      if (*(uint *)((int)param_3 + 0x18) < 8) {
        puVar6 = (ushort *)((int)param_3 + 4);
      }
      else {
        puVar6 = *(ushort **)((int)param_3 + 4);
      }
      for (; uVar7 != 0; uVar7 = uVar7 - 1) {
        if (*puVar6 != *puVar3) {
          uVar7 = (-(uint)(*puVar6 < *puVar3) & 0xfffffffe) + 1;
          if (uVar7 != 0) goto LAB_004c5c37;
          break;
        }
        puVar6 = puVar6 + 1;
        puVar3 = puVar3 + 1;
      }
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = 0xffffffff;
      }
      else {
        uVar7 = (uint)(uVar1 != puVar4[8]);
      }
LAB_004c5c37:
      bVar9 = (int)uVar7 < 0;
      if (bVar9) {
        puVar8 = (undefined4 *)*puVar4;
      }
      else {
        puVar8 = (undefined4 *)puVar4[2];
      }
    } while (*(char *)((int)puVar8 + 0x41) == '\0');
  }
  param_3 = puVar4;
  if (bVar9) {
    if (puVar4 == (undefined4 *)**(int **)(param_1 + 4)) {
      bVar9 = true;
      goto LAB_004c5c71;
    }
    FUN_004c6ee0();
  }
  puVar4 = param_3;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar5 = iVar2 + 4;
  }
  else {
    iVar5 = *(int *)(iVar2 + 4);
  }
  iVar5 = FUN_00405bb0(iVar5);
  if (-1 < iVar5) {
    *param_2 = puVar4;
    *(undefined1 *)(param_2 + 1) = 0;
    return;
  }
LAB_004c5c71:
  puVar4 = (undefined4 *)FUN_004c6300(&param_3,bVar9,iVar2);
  *param_2 = *puVar4;
  *(undefined1 *)(param_2 + 1) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
004c5b80 : PUSH EBP
004c5b81 : MOV EBP,ESP
004c5b83 : SUB ESP,0x18
004c5b86 : PUSH EBX
004c5b87 : MOV EBX,dword ptr [EBP + 0x10]
004c5b8a : PUSH ESI
004c5b8b : PUSH EDI
004c5b8c : MOV EDI,dword ptr [EBP + 0x8]
004c5b8f : MOV EAX,dword ptr [EDI + 0x4]
004c5b92 : MOV ESI,dword ptr [EAX + 0x4]
004c5b95 : CMP byte ptr [ESI + 0x41],0x0
004c5b99 : MOV ECX,EAX
004c5b9b : MOV AL,0x1
004c5b9d : MOV dword ptr [EBP + -0x4],ECX
004c5ba0 : MOV byte ptr [EBP + -0x8],AL
004c5ba3 : JNZ 0x004c5c5a
004c5ba9 : MOV EAX,dword ptr [EBX + 0x14]
004c5bac : MOV EDX,dword ptr [EBX + 0x18]
004c5baf : MOV ECX,EAX
004c5bb1 : MOV dword ptr [EBP + -0x10],EAX
004c5bb4 : MOV dword ptr [EBP + -0xc],ECX
004c5bb7 : MOV dword ptr [EBP + -0x14],EDX
004c5bba : JMP 0x004c5bc3
004c5bc0 : MOV ECX,dword ptr [EBP + -0xc]
004c5bc3 : CMP dword ptr [ESI + 0x24],0x8
004c5bc7 : MOV EDX,dword ptr [ESI + 0x20]
004c5bca : MOV dword ptr [EBP + -0x4],ESI
004c5bcd : JC 0x004c5bd4
004c5bcf : MOV EAX,dword ptr [ESI + 0x10]
004c5bd2 : JMP 0x004c5bd7
004c5bd4 : LEA EAX,[ESI + 0x10]
004c5bd7 : MOV EDI,dword ptr [EBP + -0x10]
004c5bda : CMP ECX,EDI
004c5bdc : CMOVC EDI,ECX
004c5bdf : CMP EDI,EDX
004c5be1 : JNC 0x004c5be5
004c5be3 : MOV EDX,EDI
004c5be5 : CMP dword ptr [EBP + -0x14],0x8
004c5be9 : JC 0x004c5bf0
004c5beb : MOV ECX,dword ptr [EBX + 0x4]
004c5bee : JMP 0x004c5bf3
004c5bf0 : LEA ECX,[EBX + 0x4]
004c5bf3 : TEST EDX,EDX
004c5bf5 : JBE 0x004c5c0d
004c5bf7 : MOV BX,word ptr [ECX]
004c5bfa : CMP BX,word ptr [EAX]
004c5bfd : JNZ 0x004c5c19
004c5bff : ADD ECX,0x2
004c5c02 : ADD EAX,0x2
004c5c05 : SUB EDX,0x1
004c5c08 : JNZ 0x004c5bf7
004c5c0a : MOV EBX,dword ptr [EBP + 0x10]
004c5c0d : MOV EAX,dword ptr [ESI + 0x20]
004c5c10 : CMP EDI,EAX
004c5c12 : JNC 0x004c5c2e
004c5c14 : OR EAX,0xffffffff
004c5c17 : JMP 0x004c5c37
004c5c19 : MOV CX,BX
004c5c1c : CMP CX,word ptr [EAX]
004c5c1f : SBB EAX,EAX
004c5c21 : AND EAX,0xfffffffe
004c5c24 : ADD EAX,0x1
004c5c27 : JZ 0x004c5c0a
004c5c29 : MOV EBX,dword ptr [EBP + 0x10]
004c5c2c : JMP 0x004c5c37
004c5c2e : XOR EDX,EDX
004c5c30 : CMP EDI,EAX
004c5c32 : SETNZ DL
004c5c35 : MOV EAX,EDX
004c5c37 : TEST EAX,EAX
004c5c39 : SETL AL
004c5c3c : MOV byte ptr [EBP + -0x8],AL
004c5c3f : TEST AL,AL
004c5c41 : JZ 0x004c5c47
004c5c43 : MOV ESI,dword ptr [ESI]
004c5c45 : JMP 0x004c5c4a
004c5c47 : MOV ESI,dword ptr [ESI + 0x8]
004c5c4a : CMP byte ptr [ESI + 0x41],0x0
004c5c4e : JZ 0x004c5bc0
004c5c54 : MOV EDI,dword ptr [EBP + 0x8]
004c5c57 : MOV ECX,dword ptr [EBP + -0x4]
004c5c5a : MOV ESI,ECX
004c5c5c : MOV dword ptr [EBP + 0x10],ESI
004c5c5f : TEST AL,AL
004c5c61 : JZ 0x004c5c92
004c5c63 : MOV EAX,dword ptr [EDI + 0x4]
004c5c66 : LEA EDX,[EBP + 0x10]
004c5c69 : CMP ECX,dword ptr [EAX]
004c5c6b : JNZ 0x004c5c8a
004c5c6d : PUSH EBX
004c5c6e : PUSH 0x1
004c5c70 : PUSH EDX
004c5c71 : CALL 0x004c6300
004c5c76 : MOV ECX,dword ptr [EAX]
004c5c78 : MOV EAX,dword ptr [EBP + 0xc]
004c5c7b : MOV dword ptr [EAX],ECX
004c5c7d : MOV byte ptr [EAX + 0x4],0x1
004c5c81 : POP EDI
004c5c82 : POP ESI
004c5c83 : POP EBX
004c5c84 : MOV ESP,EBP
004c5c86 : POP EBP
004c5c87 : RET 0xc
004c5c8a : CALL 0x004c6ee0
004c5c8f : MOV ESI,dword ptr [EBP + 0x10]
004c5c92 : CMP dword ptr [EBX + 0x18],0x8
004c5c96 : MOV EDI,dword ptr [EBX + 0x14]
004c5c99 : LEA ECX,[ESI + 0xc]
004c5c9c : JC 0x004c5ca3
004c5c9e : MOV EAX,dword ptr [EBX + 0x4]
004c5ca1 : JMP 0x004c5ca6
004c5ca3 : LEA EAX,[EBX + 0x4]
004c5ca6 : PUSH EAX
004c5ca7 : MOV EAX,dword ptr [ECX + 0x14]
004c5caa : CALL 0x00405bb0
004c5caf : TEST EAX,EAX
004c5cb1 : JGE 0x004c5cc4
004c5cb3 : MOV EDX,dword ptr [EBP + -0x8]
004c5cb6 : MOV ECX,dword ptr [EBP + -0x4]
004c5cb9 : MOV EDI,dword ptr [EBP + 0x8]
004c5cbc : PUSH EBX
004c5cbd : PUSH EDX
004c5cbe : LEA EAX,[EBP + 0x10]
004c5cc1 : PUSH EAX
004c5cc2 : JMP 0x004c5c71
004c5cc4 : MOV EAX,dword ptr [EBP + 0xc]
004c5cc7 : POP EDI
004c5cc8 : MOV dword ptr [EAX],ESI
004c5cca : POP ESI
004c5ccb : MOV byte ptr [EAX + 0x4],0x0
004c5ccf : POP EBX
004c5cd0 : MOV ESP,EBP
004c5cd2 : POP EBP
004c5cd3 : RET 0xc
