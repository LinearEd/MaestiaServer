PROGRAM  : Maestia.exe
FUNCTION : FUN_004c2570
ENTRY    : 004c2570
BODY     : [[004c2570, 004c27ed]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004c2570(code *param_1,int *param_2,uint param_3,int *param_4,uint param_5)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int *local_2c;
  uint local_14;
  uint local_10;
  
  uVar5 = param_3;
  if ((param_2 != param_4) || (param_3 != param_5)) {
    while ((uVar7 = uVar5 + 1, param_2 != param_4 || (uVar7 != param_5))) {
      uVar2 = uVar7 >> 2;
      if (param_2 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *param_2;
      }
      if (*(uint *)(iVar3 + 0x14) <= uVar2) {
        if (param_2 == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *param_2;
        }
        uVar2 = uVar2 - *(int *)(iVar3 + 0x14);
      }
      if (param_2 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *param_2;
      }
      uVar1 = *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x10) + uVar2 * 4) + (uVar7 & 3) * 4);
      uVar2 = param_3 >> 2;
      if (param_2 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *param_2;
      }
      if (*(uint *)(iVar3 + 0x14) <= uVar2) {
        if (param_2 == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *param_2;
        }
        uVar2 = uVar2 - *(int *)(iVar3 + 0x14);
      }
      if (param_2 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *param_2;
      }
      iVar3 = (*param_1)(uVar1,*(undefined4 *)
                                (*(int *)(*(int *)(iVar3 + 0x10) + uVar2 * 4) + (param_3 & 3) * 4));
      uVar2 = uVar7;
      local_2c = param_2;
      if (iVar3 == 0) {
        while( true ) {
          uVar5 = uVar2 - 1;
          local_10 = uVar5 >> 2;
          if (param_2 == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *param_2;
          }
          uVar4 = local_10;
          if (*(uint *)(iVar3 + 0x14) <= local_10) {
            if (param_2 == (int *)0x0) {
              iVar3 = 0;
            }
            else {
              iVar3 = *param_2;
            }
            uVar4 = local_10 - *(int *)(iVar3 + 0x14);
          }
          if (param_2 == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *param_2;
          }
          iVar3 = (*param_1)(uVar1,*(undefined4 *)
                                    (*(int *)(*(int *)(iVar3 + 0x10) + uVar4 * 4) + (uVar5 & 3) * 4)
                            );
          if (iVar3 == 0) break;
          if (param_2 == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *param_2;
          }
          if (*(uint *)(iVar3 + 0x14) <= local_10) {
            if (param_2 == (int *)0x0) {
              iVar3 = 0;
            }
            else {
              iVar3 = *param_2;
            }
            local_10 = local_10 - *(int *)(iVar3 + 0x14);
          }
          if (param_2 == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *param_2;
          }
          uVar4 = uVar2 >> 2;
          if (local_2c == (int *)0x0) {
            iVar6 = 0;
          }
          else {
            iVar6 = *local_2c;
          }
          if (*(uint *)(iVar6 + 0x14) <= uVar4) {
            if (local_2c == (int *)0x0) {
              iVar6 = 0;
            }
            else {
              iVar6 = *local_2c;
            }
            uVar4 = uVar4 - *(int *)(iVar6 + 0x14);
          }
          if (local_2c == (int *)0x0) {
            iVar6 = 0;
          }
          else {
            iVar6 = *local_2c;
          }
          *(undefined4 *)(*(int *)(*(int *)(iVar6 + 0x10) + uVar4 * 4) + (uVar2 & 3) * 4) =
               *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x10) + local_10 * 4) + (uVar5 & 3) * 4);
          local_2c = param_2;
          uVar2 = uVar5;
        }
        uVar5 = uVar2 >> 2;
        if (local_2c == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *local_2c;
        }
        if (*(uint *)(iVar3 + 0x14) <= uVar5) {
          if (local_2c == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *local_2c;
          }
          uVar5 = uVar5 - *(int *)(iVar3 + 0x14);
        }
        if (local_2c == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *local_2c;
        }
        *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x10) + uVar5 * 4) + (uVar2 & 3) * 4) = uVar1;
        uVar5 = uVar7;
      }
      else {
        local_14 = local_14 & 0xffffff00;
        FUN_0043eb30(param_2,param_3,param_2,uVar7,param_2,uVar5 + 2,param_3,param_3,local_14);
        uVar5 = param_3 >> 2;
        if (param_2 == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *param_2;
        }
        if (*(uint *)(iVar3 + 0x14) <= uVar5) {
          if (param_2 == (int *)0x0) {
            iVar3 = 0;
          }
          else {
            iVar3 = *param_2;
          }
          uVar5 = uVar5 - *(int *)(iVar3 + 0x14);
        }
        if (param_2 == (int *)0x0) {
          *(undefined4 *)(*(int *)(iRam00000010 + uVar5 * 4) + (param_3 & 3) * 4) = uVar1;
          uVar5 = uVar7;
        }
        else {
          *(undefined4 *)(*(int *)(*(int *)(*param_2 + 0x10) + uVar5 * 4) + (param_3 & 3) * 4) =
               uVar1;
          uVar5 = uVar7;
        }
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
004c2570 : PUSH EBP
004c2571 : MOV EBP,ESP
004c2573 : MOV ECX,dword ptr [EBP + 0x10]
004c2576 : SUB ESP,0x30
004c2579 : PUSH EBX
004c257a : PUSH ESI
004c257b : MOV ESI,dword ptr [EBP + 0xc]
004c257e : PUSH EDI
004c257f : CMP ESI,dword ptr [EBP + 0x14]
004c2582 : JNZ 0x004c258d
004c2584 : CMP ECX,dword ptr [EBP + 0x18]
004c2587 : JZ 0x004c27e7
004c258d : MOV dword ptr [EBP + -0x20],ESI
004c2590 : MOV EBX,ECX
004c2592 : INC EBX
004c2593 : MOV dword ptr [EBP + -0x1c],EBX
004c2596 : CMP ESI,dword ptr [EBP + 0x14]
004c2599 : JNZ 0x004c25a4
004c259b : CMP EBX,dword ptr [EBP + 0x18]
004c259e : JZ 0x004c27e7
004c25a4 : MOV EAX,EBX
004c25a6 : MOV EDX,EBX
004c25a8 : SHR EAX,0x2
004c25ab : AND EDX,0x3
004c25ae : MOV dword ptr [EBP + -0x28],ESI
004c25b1 : TEST ESI,ESI
004c25b3 : JZ 0x004c25b9
004c25b5 : MOV ESI,dword ptr [ESI]
004c25b7 : JMP 0x004c25bb
004c25b9 : XOR ESI,ESI
004c25bb : CMP dword ptr [ESI + 0x14],EAX
004c25be : JA 0x004c25d0
004c25c0 : MOV ESI,dword ptr [EBP + -0x20]
004c25c3 : TEST ESI,ESI
004c25c5 : JZ 0x004c25cb
004c25c7 : MOV ESI,dword ptr [ESI]
004c25c9 : JMP 0x004c25cd
004c25cb : XOR ESI,ESI
004c25cd : SUB EAX,dword ptr [ESI + 0x14]
004c25d0 : MOV ESI,dword ptr [EBP + -0x20]
004c25d3 : TEST ESI,ESI
004c25d5 : JZ 0x004c25db
004c25d7 : MOV EDI,dword ptr [ESI]
004c25d9 : JMP 0x004c25dd
004c25db : XOR EDI,EDI
004c25dd : MOV ESI,dword ptr [EDI + 0x10]
004c25e0 : MOV EAX,dword ptr [ESI + EAX*0x4]
004c25e3 : MOV EDI,dword ptr [EAX + EDX*0x4]
004c25e6 : MOV EDX,dword ptr [EBP + 0xc]
004c25e9 : MOV EAX,ECX
004c25eb : SHR EAX,0x2
004c25ee : AND ECX,0x3
004c25f1 : MOV dword ptr [EBP + -0x8],EDI
004c25f4 : TEST EDX,EDX
004c25f6 : JZ 0x004c25fc
004c25f8 : MOV ESI,dword ptr [EDX]
004c25fa : JMP 0x004c25fe
004c25fc : XOR ESI,ESI
004c25fe : CMP dword ptr [ESI + 0x14],EAX
004c2601 : JA 0x004c2610
004c2603 : TEST EDX,EDX
004c2605 : JZ 0x004c260b
004c2607 : MOV ESI,dword ptr [EDX]
004c2609 : JMP 0x004c260d
004c260b : XOR ESI,ESI
004c260d : SUB EAX,dword ptr [ESI + 0x14]
004c2610 : TEST EDX,EDX
004c2612 : JZ 0x004c2618
004c2614 : MOV EDX,dword ptr [EDX]
004c2616 : JMP 0x004c261a
004c2618 : XOR EDX,EDX
004c261a : MOV EDX,dword ptr [EDX + 0x10]
004c261d : MOV EAX,dword ptr [EDX + EAX*0x4]
004c2620 : LEA EAX,[EAX + ECX*0x4]
004c2623 : MOV ECX,dword ptr [EAX]
004c2625 : PUSH ECX
004c2626 : PUSH EDI
004c2627 : CALL dword ptr [EBP + 0x8]
004c262a : MOV ESI,dword ptr [EBP + -0x20]
004c262d : ADD ESP,0x8
004c2630 : TEST EAX,EAX
004c2632 : JZ 0x004c26bf
004c2638 : MOV ECX,dword ptr [EBP + 0x10]
004c263b : MOV byte ptr [EBP + -0x10],0x0
004c263f : MOV EDX,dword ptr [EBP + -0x10]
004c2642 : PUSH EDX
004c2643 : MOV EDX,dword ptr [EBP + 0x10]
004c2646 : PUSH ECX
004c2647 : MOV ECX,dword ptr [EBP + 0x10]
004c264a : PUSH EDX
004c264b : MOV EDX,dword ptr [EBP + 0xc]
004c264e : LEA EAX,[EBX + 0x1]
004c2651 : PUSH EAX
004c2652 : MOV EAX,dword ptr [EBP + -0x28]
004c2655 : PUSH EAX
004c2656 : PUSH EBX
004c2657 : PUSH ESI
004c2658 : PUSH ECX
004c2659 : PUSH EDX
004c265a : LEA EAX,[EBP + -0x18]
004c265d : CALL 0x0043eb30
004c2662 : MOV EAX,dword ptr [EBP + 0x10]
004c2665 : MOV EDX,dword ptr [EBP + 0xc]
004c2668 : MOV ECX,EAX
004c266a : ADD ESP,0x24
004c266d : SHR ECX,0x2
004c2670 : AND EAX,0x3
004c2673 : TEST EDX,EDX
004c2675 : JZ 0x004c267b
004c2677 : MOV EDI,dword ptr [EDX]
004c2679 : JMP 0x004c267d
004c267b : XOR EDI,EDI
004c267d : CMP dword ptr [EDI + 0x14],ECX
004c2680 : JA 0x004c268f
004c2682 : TEST EDX,EDX
004c2684 : JZ 0x004c268a
004c2686 : MOV EDI,dword ptr [EDX]
004c2688 : JMP 0x004c268c
004c268a : XOR EDI,EDI
004c268c : SUB ECX,dword ptr [EDI + 0x14]
004c268f : TEST EDX,EDX
004c2691 : JZ 0x004c26a9
004c2693 : MOV EDX,dword ptr [EDX]
004c2695 : MOV EDX,dword ptr [EDX + 0x10]
004c2698 : MOV ECX,dword ptr [EDX + ECX*0x4]
004c269b : MOV EDX,dword ptr [EBP + -0x8]
004c269e : MOV dword ptr [ECX + EAX*0x4],EDX
004c26a1 : MOV ECX,dword ptr [EBP + 0x10]
004c26a4 : JMP 0x004c2592
004c26a9 : XOR EDX,EDX
004c26ab : MOV EDX,dword ptr [EDX + 0x10]
004c26ae : MOV ECX,dword ptr [EDX + ECX*0x4]
004c26b1 : MOV EDX,dword ptr [EBP + -0x8]
004c26b4 : MOV dword ptr [ECX + EAX*0x4],EDX
004c26b7 : MOV ECX,dword ptr [EBP + 0x10]
004c26ba : JMP 0x004c2592
004c26bf : MOV ECX,dword ptr [EBP + -0x1c]
004c26c2 : DEC ECX
004c26c3 : MOV EDI,ECX
004c26c5 : MOV EDX,ECX
004c26c7 : SHR EDI,0x2
004c26ca : AND EDX,0x3
004c26cd : MOV dword ptr [EBP + -0x2c],ECX
004c26d0 : MOV EAX,EDI
004c26d2 : MOV dword ptr [EBP + -0x14],EDX
004c26d5 : TEST ESI,ESI
004c26d7 : JZ 0x004c26dd
004c26d9 : MOV ECX,dword ptr [ESI]
004c26db : JMP 0x004c26df
004c26dd : XOR ECX,ECX
004c26df : CMP dword ptr [ECX + 0x14],EAX
004c26e2 : JA 0x004c26f1
004c26e4 : TEST ESI,ESI
004c26e6 : JZ 0x004c26ec
004c26e8 : MOV ECX,dword ptr [ESI]
004c26ea : JMP 0x004c26ee
004c26ec : XOR ECX,ECX
004c26ee : SUB EAX,dword ptr [ECX + 0x14]
004c26f1 : TEST ESI,ESI
004c26f3 : JZ 0x004c26f9
004c26f5 : MOV ECX,dword ptr [ESI]
004c26f7 : JMP 0x004c26fb
004c26f9 : XOR ECX,ECX
004c26fb : MOV ECX,dword ptr [ECX + 0x10]
004c26fe : MOV EAX,dword ptr [ECX + EAX*0x4]
004c2701 : MOV ECX,dword ptr [EAX + EDX*0x4]
004c2704 : LEA EAX,[EAX + EDX*0x4]
004c2707 : MOV EDX,dword ptr [EBP + -0x8]
004c270a : PUSH ECX
004c270b : PUSH EDX
004c270c : CALL dword ptr [EBP + 0x8]
004c270f : ADD ESP,0x8
004c2712 : TEST EAX,EAX
004c2714 : JZ 0x004c279c
004c271a : MOV dword ptr [EBP + -0xc],EDI
004c271d : TEST ESI,ESI
004c271f : JZ 0x004c2725
004c2721 : MOV EAX,dword ptr [ESI]
004c2723 : JMP 0x004c2727
004c2725 : XOR EAX,EAX
004c2727 : CMP dword ptr [EAX + 0x14],EDI
004c272a : JA 0x004c273c
004c272c : TEST ESI,ESI
004c272e : JZ 0x004c2734
004c2730 : MOV EAX,dword ptr [ESI]
004c2732 : JMP 0x004c2736
004c2734 : XOR EAX,EAX
004c2736 : SUB EDI,dword ptr [EAX + 0x14]
004c2739 : MOV dword ptr [EBP + -0xc],EDI
004c273c : TEST ESI,ESI
004c273e : JZ 0x004c2744
004c2740 : MOV EDI,dword ptr [ESI]
004c2742 : JMP 0x004c2746
004c2744 : XOR EDI,EDI
004c2746 : MOV ECX,dword ptr [EBP + -0x28]
004c2749 : MOV EAX,EBX
004c274b : SHR EAX,0x2
004c274e : AND EBX,0x3
004c2751 : TEST ECX,ECX
004c2753 : JZ 0x004c2759
004c2755 : MOV EDX,dword ptr [ECX]
004c2757 : JMP 0x004c275b
004c2759 : XOR EDX,EDX
004c275b : CMP dword ptr [EDX + 0x14],EAX
004c275e : JA 0x004c276d
004c2760 : TEST ECX,ECX
004c2762 : JZ 0x004c2768
004c2764 : MOV EDX,dword ptr [ECX]
004c2766 : JMP 0x004c276a
004c2768 : XOR EDX,EDX
004c276a : SUB EAX,dword ptr [EDX + 0x14]
004c276d : TEST ECX,ECX
004c276f : JZ 0x004c2775
004c2771 : MOV ECX,dword ptr [ECX]
004c2773 : JMP 0x004c2777
004c2775 : XOR ECX,ECX
004c2777 : MOV ECX,dword ptr [ECX + 0x10]
004c277a : MOV EDX,dword ptr [EDI + 0x10]
004c277d : MOV EAX,dword ptr [ECX + EAX*0x4]
004c2780 : MOV EDI,dword ptr [EBP + -0xc]
004c2783 : MOV EDX,dword ptr [EDX + EDI*0x4]
004c2786 : MOV ECX,dword ptr [EBP + -0x14]
004c2789 : MOV EDX,dword ptr [EDX + ECX*0x4]
004c278c : MOV dword ptr [EAX + EBX*0x4],EDX
004c278f : MOV EBX,dword ptr [EBP + -0x2c]
004c2792 : MOV dword ptr [EBP + -0x28],ESI
004c2795 : MOV ECX,EBX
004c2797 : JMP 0x004c26c2
004c279c : MOV ECX,dword ptr [EBP + -0x28]
004c279f : MOV EAX,EBX
004c27a1 : SHR EAX,0x2
004c27a4 : AND EBX,0x3
004c27a7 : TEST ECX,ECX
004c27a9 : JZ 0x004c27af
004c27ab : MOV EDX,dword ptr [ECX]
004c27ad : JMP 0x004c27b1
004c27af : XOR EDX,EDX
004c27b1 : CMP dword ptr [EDX + 0x14],EAX
004c27b4 : JA 0x004c27c3
004c27b6 : TEST ECX,ECX
004c27b8 : JZ 0x004c27be
004c27ba : MOV EDX,dword ptr [ECX]
004c27bc : JMP 0x004c27c0
004c27be : XOR EDX,EDX
004c27c0 : SUB EAX,dword ptr [EDX + 0x14]
004c27c3 : TEST ECX,ECX
004c27c5 : JZ 0x004c27cb
004c27c7 : MOV ECX,dword ptr [ECX]
004c27c9 : JMP 0x004c27cd
004c27cb : XOR ECX,ECX
004c27cd : MOV ECX,dword ptr [ECX + 0x10]
004c27d0 : MOV EDX,dword ptr [ECX + EAX*0x4]
004c27d3 : MOV EAX,dword ptr [EBP + -0x8]
004c27d6 : MOV ESI,dword ptr [EBP + -0x20]
004c27d9 : MOV dword ptr [EDX + EBX*0x4],EAX
004c27dc : MOV ECX,dword ptr [EBP + 0x10]
004c27df : MOV EBX,dword ptr [EBP + -0x1c]
004c27e2 : JMP 0x004c2592
004c27e7 : POP EDI
004c27e8 : POP ESI
004c27e9 : POP EBX
004c27ea : MOV ESP,EBP
004c27ec : POP EBP
004c27ed : RET
