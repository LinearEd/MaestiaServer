PROGRAM  : Maestia.exe
FUNCTION : FUN_0075e260
ENTRY    : 0075e260
BODY     : [[0075e260, 0075e2b9] [0075e2c0, 0075e3b1]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0075e260(undefined4 *param_1)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int unaff_EDI;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2759e;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(unaff_EDI + 0x1e8);
  local_20 = 0;
  local_28 = ".\\Fx\\AvaFxRsc.cpp";
  local_24 = 0x1b;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  iVar4 = 0;
  while( true ) {
    uVar3 = *(int *)(unaff_EDI + 0x1e0) + 1U & 0x80000003;
    if ((int)uVar3 < 0) {
      uVar3 = (uVar3 - 1 | 0xfffffffc) + 1;
    }
    *(uint *)(unaff_EDI + 0x1e0) = uVar3;
    if (*(char *)(unaff_EDI + 0x1dc + uVar3) == '\0') break;
    iVar4 = iVar4 + 1;
    if (3 < iVar4) {
      *param_1 = 0xffffffff;
      FUN_008018d0(L"[AvaFxRsc::GetStream] error");
      iVar4 = unaff_EDI + 0x38;
joined_r0x0075e3a3:
      if (local_20 != 0) {
        local_8 = 0xffffffff;
        LeaveCriticalSection(local_2c);
      }
      ExceptionList = local_10;
      return iVar4;
    }
  }
  local_14 = *(int *)(unaff_EDI + 0x54);
  local_18 = *(int *)(unaff_EDI + 0x58);
  piVar1 = (int *)(uVar3 * 0x54 + 0x8c + unaff_EDI);
  (**(code **)(*piVar1 + 8))(uVar2);
  piVar1[7] = local_14;
  piVar1[8] = local_18;
  piVar1[9] = 0;
  *(undefined1 *)(piVar1 + 1) = 1;
  *(undefined1 *)(piVar1 + 0x14) = 0;
  piVar1[3] = 0;
  piVar1[2] = 0;
  *param_1 = *(undefined4 *)(unaff_EDI + 0x1e0);
  *(undefined1 *)(*(int *)(unaff_EDI + 0x1e0) + 0x1dc + unaff_EDI) = 1;
  iVar4 = *(int *)(unaff_EDI + 0x1e0) * 0x54 + 0x8c + unaff_EDI;
  goto joined_r0x0075e3a3;
}



============================================================
DISASSEMBLY
============================================================
0075e260 : PUSH EBP
0075e261 : MOV EBP,ESP
0075e263 : PUSH -0x1
0075e265 : PUSH 0xb2759e
0075e26a : MOV EAX,FS:[0x0]
0075e270 : PUSH EAX
0075e271 : SUB ESP,0x1c
0075e274 : PUSH EBX
0075e275 : PUSH ESI
0075e276 : MOV EAX,[0x00d66fa0]
0075e27b : XOR EAX,EBP
0075e27d : PUSH EAX
0075e27e : LEA EAX,[EBP + -0xc]
0075e281 : MOV FS:[0x0],EAX
0075e287 : LEA ECX,[EBP + -0x28]
0075e28a : LEA EAX,[EDI + 0x1e8]
0075e290 : XOR EBX,EBX
0075e292 : PUSH ECX
0075e293 : MOV dword ptr [EBP + -0x1c],EBX
0075e296 : MOV dword ptr [EBP + -0x28],EAX
0075e299 : MOV dword ptr [EBP + -0x24],0xc0bf3c
0075e2a0 : MOV dword ptr [EBP + -0x20],0x1b
0075e2a7 : MOV dword ptr [EBP + -0x18],0x1
0075e2ae : CALL 0x006ef1a0
0075e2b3 : MOV dword ptr [EBP + -0x4],EBX
0075e2b6 : XOR ECX,ECX
0075e2b8 : JMP 0x0075e2c0
0075e2c0 : MOV EAX,dword ptr [EDI + 0x1e0]
0075e2c6 : INC EAX
0075e2c7 : AND EAX,0x80000003
0075e2cc : JNS 0x0075e2d3
0075e2ce : DEC EAX
0075e2cf : OR EAX,0xfffffffc
0075e2d2 : INC EAX
0075e2d3 : MOV dword ptr [EDI + 0x1e0],EAX
0075e2d9 : CMP byte ptr [EDI + EAX*0x1 + 0x1dc],BL
0075e2e0 : JZ 0x0075e335
0075e2e2 : INC ECX
0075e2e3 : CMP ECX,0x4
0075e2e6 : JL 0x0075e2c0
0075e2e8 : MOV EDX,dword ptr [EBP + 0x8]
0075e2eb : MOV ESI,dword ptr [0x00da98e8]
0075e2f1 : PUSH 0xc0bfe0
0075e2f6 : MOV dword ptr [EDX],0xffffffff
0075e2fc : CALL 0x008018d0
0075e301 : ADD ESP,0x4
0075e304 : LEA ESI,[EDI + 0x38]
0075e307 : MOV dword ptr [EBP + -0x4],0xffffffff
0075e30e : CMP dword ptr [EBP + -0x1c],EBX
0075e311 : JZ 0x0075e320
0075e313 : MOV EAX,dword ptr [EBP + -0x28]
0075e316 : PUSH EAX
0075e317 : CALL dword ptr [0x00b8511c]
0075e31d : MOV dword ptr [EBP + -0x1c],EBX
0075e320 : MOV EAX,ESI
0075e322 : MOV ECX,dword ptr [EBP + -0xc]
0075e325 : MOV dword ptr FS:[0x0],ECX
0075e32c : POP ECX
0075e32d : POP ESI
0075e32e : POP EBX
0075e32f : MOV ESP,EBP
0075e331 : POP EBP
0075e332 : RET 0x4
0075e335 : MOV EDX,dword ptr [EDI + 0x54]
0075e338 : IMUL EAX,EAX,0x54
0075e33b : MOV ECX,dword ptr [EDI + 0x58]
0075e33e : LEA ESI,[EAX + EDI*0x1 + 0x8c]
0075e345 : MOV dword ptr [EBP + -0x10],EDX
0075e348 : MOV EDX,dword ptr [ESI]
0075e34a : MOV EAX,dword ptr [EDX + 0x8]
0075e34d : MOV dword ptr [EBP + -0x14],ECX
0075e350 : MOV ECX,ESI
0075e352 : CALL EAX
0075e354 : MOV ECX,dword ptr [EBP + -0x10]
0075e357 : MOV EDX,dword ptr [EBP + -0x14]
0075e35a : MOV dword ptr [ESI + 0x1c],ECX
0075e35d : MOV ECX,dword ptr [EBP + 0x8]
0075e360 : MOV dword ptr [ESI + 0x20],EDX
0075e363 : MOV dword ptr [ESI + 0x24],EBX
0075e366 : MOV byte ptr [ESI + 0x4],0x1
0075e36a : MOV byte ptr [ESI + 0x50],BL
0075e36d : MOV dword ptr [ESI + 0xc],EBX
0075e370 : MOV dword ptr [ESI + 0x8],EBX
0075e373 : MOV EAX,dword ptr [EDI + 0x1e0]
0075e379 : MOV dword ptr [ECX],EAX
0075e37b : MOV EDX,dword ptr [EDI + 0x1e0]
0075e381 : MOV byte ptr [EDX + EDI*0x1 + 0x1dc],0x1
0075e389 : MOV EAX,dword ptr [EDI + 0x1e0]
0075e38f : IMUL EAX,EAX,0x54
0075e392 : LEA ESI,[EAX + EDI*0x1 + 0x8c]
0075e399 : MOV dword ptr [EBP + -0x4],0xffffffff
0075e3a0 : CMP dword ptr [EBP + -0x1c],EBX
0075e3a3 : JZ 0x0075e320
0075e3a9 : MOV ECX,dword ptr [EBP + -0x28]
0075e3ac : PUSH ECX
0075e3ad : JMP 0x0075e317
