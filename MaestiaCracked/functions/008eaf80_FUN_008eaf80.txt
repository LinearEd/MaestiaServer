PROGRAM  : Maestia.exe
FUNCTION : FUN_008eaf80
ENTRY    : 008eaf80
BODY     : [[008eaf80, 008eb147]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008eaf80(int param_1,undefined4 param_2)

{
  wchar_t wVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  wchar_t *pwVar5;
  int *in_ECX;
  wchar_t *pwVar6;
  wchar_t *pwVar7;
  bool bVar8;
  undefined1 local_60 [4];
  int local_5c;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b3f267;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff90;
  ExceptionList = &local_14;
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  FUN_00406360(&DAT_00c5b7d0,1);
  local_c = 0;
  uVar3 = FUN_00404350(param_2,uVar2);
  local_c._0_1_ = 1;
  FUN_0070cd60(local_60,uVar3,local_50,0);
  local_c = CONCAT31(local_c._1_3_,3);
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  local_c = CONCAT31(local_c._1_3_,4);
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_38 = 7;
  local_3c = 0;
  local_4c = 0;
  pwVar5 = (wchar_t *)(param_1 + 4);
  pwVar7 = pwVar5;
  if (7 < *(uint *)(param_1 + 0x18)) {
    pwVar7 = *(wchar_t **)pwVar5;
  }
  pwVar6 = L"Close";
  do {
    wVar1 = *pwVar7;
    bVar8 = (ushort)wVar1 < (ushort)*pwVar6;
    if (wVar1 != *pwVar6) {
LAB_008eb08c:
      iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
      goto LAB_008eb091;
    }
    if (wVar1 == L'\0') break;
    wVar1 = pwVar7[1];
    bVar8 = (ushort)wVar1 < (ushort)pwVar6[1];
    if (wVar1 != pwVar6[1]) goto LAB_008eb08c;
    pwVar7 = pwVar7 + 2;
    pwVar6 = pwVar6 + 2;
  } while (wVar1 != L'\0');
  iVar4 = 0;
LAB_008eb091:
  if (iVar4 == 0) {
    (**(code **)(*in_ECX + 0x20))();
  }
  else {
    if (7 < *(uint *)(param_1 + 0x18)) {
      pwVar5 = *(wchar_t **)pwVar5;
    }
    pwVar7 = L"onInit";
    do {
      wVar1 = *pwVar5;
      bVar8 = (ushort)wVar1 < (ushort)*pwVar7;
      if (wVar1 != *pwVar7) {
LAB_008eb0d8:
        iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_008eb0dd;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar5[1];
      bVar8 = (ushort)wVar1 < (ushort)pwVar7[1];
      if (wVar1 != pwVar7[1]) goto LAB_008eb0d8;
      pwVar5 = pwVar5 + 2;
      pwVar7 = pwVar7 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_008eb0dd:
    if ((iVar4 == 0) && (DAT_0172491c != 0)) {
      FUN_0081bda0(*(undefined4 *)(DAT_00da93ec + 0x450),0);
    }
  }
  local_c = 0xffffffff;
  if (local_5c == 0) {
    ExceptionList = local_14;
    return;
  }
  FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008eaf80 : PUSH EBP
008eaf81 : MOV EBP,ESP
008eaf83 : AND ESP,0xfffffff8
008eaf86 : PUSH -0x1
008eaf88 : PUSH 0xb3f267
008eaf8d : MOV EAX,FS:[0x0]
008eaf93 : PUSH EAX
008eaf94 : SUB ESP,0x50
008eaf97 : PUSH EBX
008eaf98 : PUSH ESI
008eaf99 : PUSH EDI
008eaf9a : MOV EAX,[0x00d66fa0]
008eaf9f : XOR EAX,ESP
008eafa1 : PUSH EAX
008eafa2 : LEA EAX,[ESP + 0x60]
008eafa6 : MOV FS:[0x0],EAX
008eafac : MOV dword ptr [ESP + 0x10],ECX
008eafb0 : PUSH 0x1
008eafb2 : XOR EAX,EAX
008eafb4 : MOV EDI,0x7
008eafb9 : XOR EBX,EBX
008eafbb : PUSH 0xc5b7d0
008eafc0 : LEA ECX,[ESP + 0x2c]
008eafc4 : MOV dword ptr [ESP + 0x44],EDI
008eafc8 : MOV dword ptr [ESP + 0x40],EBX
008eafcc : MOV word ptr [ESP + 0x30],AX
008eafd1 : CALL 0x00406360
008eafd6 : MOV dword ptr [ESP + 0x68],EBX
008eafda : MOV ECX,dword ptr [EBP + 0xc]
008eafdd : PUSH ECX
008eafde : LEA ESI,[ESP + 0x44]
008eafe2 : CALL 0x00404350
008eafe7 : ADD ESP,0x4
008eafea : MOV byte ptr [ESP + 0x68],0x1
008eafef : PUSH EBX
008eaff0 : LEA EDX,[ESP + 0x28]
008eaff4 : PUSH EDX
008eaff5 : PUSH EAX
008eaff6 : LEA EAX,[ESP + 0x20]
008eaffa : PUSH EAX
008eaffb : CALL 0x0070cd60
008eb000 : ADD ESP,0x10
008eb003 : MOV byte ptr [ESP + 0x68],0x3
008eb008 : MOV ESI,0x8
008eb00d : CMP dword ptr [ESP + 0x58],ESI
008eb011 : JC 0x008eb01c
008eb013 : MOV ECX,dword ptr [ESP + 0x44]
008eb017 : CALL 0x006f04e0
008eb01c : XOR ECX,ECX
008eb01e : MOV dword ptr [ESP + 0x58],EDI
008eb022 : MOV dword ptr [ESP + 0x54],EBX
008eb026 : MOV word ptr [ESP + 0x44],CX
008eb02b : MOV byte ptr [ESP + 0x68],0x4
008eb030 : CMP dword ptr [ESP + 0x3c],ESI
008eb034 : JC 0x008eb03f
008eb036 : MOV ECX,dword ptr [ESP + 0x28]
008eb03a : CALL 0x006f04e0
008eb03f : MOV EAX,dword ptr [EBP + 0x8]
008eb042 : MOV dword ptr [ESP + 0x3c],EDI
008eb046 : MOV EDI,dword ptr [EAX + 0x18]
008eb049 : XOR EDX,EDX
008eb04b : CMP EDI,ESI
008eb04d : MOV dword ptr [ESP + 0x38],EBX
008eb051 : MOV word ptr [ESP + 0x28],DX
008eb056 : LEA ESI,[EAX + 0x4]
008eb059 : JC 0x008eb05f
008eb05b : MOV EAX,dword ptr [ESI]
008eb05d : JMP 0x008eb061
008eb05f : MOV EAX,ESI
008eb061 : MOV ECX,0xc5b7d4
008eb066 : MOV DX,word ptr [EAX]
008eb069 : CMP DX,word ptr [ECX]
008eb06c : JNZ 0x008eb08c
008eb06e : CMP DX,BX
008eb071 : JZ 0x008eb088
008eb073 : MOV DX,word ptr [EAX + 0x2]
008eb077 : CMP DX,word ptr [ECX + 0x2]
008eb07b : JNZ 0x008eb08c
008eb07d : ADD EAX,0x4
008eb080 : ADD ECX,0x4
008eb083 : CMP DX,BX
008eb086 : JNZ 0x008eb066
008eb088 : XOR EAX,EAX
008eb08a : JMP 0x008eb091
008eb08c : SBB EAX,EAX
008eb08e : SBB EAX,-0x1
008eb091 : CMP EAX,EBX
008eb093 : JNZ 0x008eb0a2
008eb095 : MOV ECX,dword ptr [ESP + 0x10]
008eb099 : MOV EAX,dword ptr [ECX]
008eb09b : MOV EDX,dword ptr [EAX + 0x20]
008eb09e : CALL EDX
008eb0a0 : JMP 0x008eb0fd
008eb0a2 : CMP EDI,0x8
008eb0a5 : JC 0x008eb0ab
008eb0a7 : MOV EAX,dword ptr [ESI]
008eb0a9 : JMP 0x008eb0ad
008eb0ab : MOV EAX,ESI
008eb0ad : MOV ECX,0xc5b7e0
008eb0b2 : MOV DX,word ptr [EAX]
008eb0b5 : CMP DX,word ptr [ECX]
008eb0b8 : JNZ 0x008eb0d8
008eb0ba : CMP DX,BX
008eb0bd : JZ 0x008eb0d4
008eb0bf : MOV DX,word ptr [EAX + 0x2]
008eb0c3 : CMP DX,word ptr [ECX + 0x2]
008eb0c7 : JNZ 0x008eb0d8
008eb0c9 : ADD EAX,0x4
008eb0cc : ADD ECX,0x4
008eb0cf : CMP DX,BX
008eb0d2 : JNZ 0x008eb0b2
008eb0d4 : XOR EAX,EAX
008eb0d6 : JMP 0x008eb0dd
008eb0d8 : SBB EAX,EAX
008eb0da : SBB EAX,-0x1
008eb0dd : CMP EAX,EBX
008eb0df : JNZ 0x008eb0fd
008eb0e1 : MOV ECX,dword ptr [0x0172491c]
008eb0e7 : MOV EAX,[0x00da93ec]
008eb0ec : MOV EAX,dword ptr [EAX + 0x450]
008eb0f2 : CMP ECX,EBX
008eb0f4 : JZ 0x008eb0fd
008eb0f6 : PUSH EBX
008eb0f7 : PUSH EAX
008eb0f8 : CALL 0x0081bda0
008eb0fd : MOV dword ptr [ESP + 0x68],0xffffffff
008eb105 : MOV EAX,dword ptr [ESP + 0x18]
008eb109 : CMP EAX,EBX
008eb10b : JZ 0x008eb127
008eb10d : MOV ECX,dword ptr [ESP + 0x10]
008eb111 : MOV EDI,dword ptr [ESP + 0x1c]
008eb115 : PUSH ECX
008eb116 : CALL 0x00405450
008eb11b : MOV ECX,dword ptr [ESP + 0x1c]
008eb11f : ADD ESP,0x4
008eb122 : CALL 0x006f04e0
008eb127 : MOV dword ptr [ESP + 0x18],EBX
008eb12b : MOV dword ptr [ESP + 0x1c],EBX
008eb12f : MOV dword ptr [ESP + 0x20],EBX
008eb133 : MOV ECX,dword ptr [ESP + 0x60]
008eb137 : MOV dword ptr FS:[0x0],ECX
008eb13e : POP ECX
008eb13f : POP EDI
008eb140 : POP ESI
008eb141 : POP EBX
008eb142 : MOV ESP,EBP
008eb144 : POP EBP
008eb145 : RET 0x8
