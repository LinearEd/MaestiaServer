PROGRAM  : Maestia.exe
FUNCTION : FUN_00879de0
ENTRY    : 00879de0
BODY     : [[00879de0, 0087a10a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00879de0(int *param_1,char param_2)

{
  undefined4 *puVar1;
  char cVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  DWORD DVar7;
  int in_ECX;
  undefined1 local_34 [8];
  undefined1 local_2c [8];
  undefined1 local_24 [8];
  undefined1 local_1c [8];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3dc3b;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = 0;
  if (((DAT_0172491c != 0) && (DAT_00da93ec != 0)) && (*(int *)(DAT_0172491c + 0x94) != 0)) {
    *param_1 = in_ECX;
    if (param_2 == '\0') {
      cVar2 = FUN_00812260(param_1 + 4,param_1 + 5,param_1 + 6);
      if (cVar2 == '\0') {
        uVar6 = FUN_00404750(L"Camera Effect Invaild Index (%d)");
        local_8 = 0;
LAB_00879f25:
        FUN_00801630(uVar6);
        local_8 = 0xffffffff;
        FUN_00406560();
        ExceptionList = local_10;
        return;
      }
      FUN_00812200(param_1 + 7,param_1 + 8,param_1 + 9);
      FUN_008121a0(param_1 + 10,param_1 + 0xb,param_1 + 0xc);
      FUN_00812140(param_1 + 0xd,param_1 + 0xe,param_1 + 0xf);
      if (in_ECX != 0) {
        iVar4 = FUN_00703c00(0xa500);
        if (iVar4 != 0) {
          param_1[0x10] = *(int *)(iVar4 + 0x18);
        }
        if (param_1[0x10] == 0) {
          uVar6 = FUN_00404750(L"Camera Effect Zero Duration(%d)");
          local_8 = 1;
          goto LAB_00879f25;
        }
      }
    }
    else {
      FUN_00878ba0(uVar3);
    }
    iVar4 = *(int *)(*(int *)(DAT_00da93ec + 0xac) + 1000);
    param_1[0x12] = *(int *)(iVar4 + 0x68);
    param_1[0x13] = *(int *)(iVar4 + 0x6c);
    param_1[0x14] = *(int *)(iVar4 + 0x70);
    FUN_007dee30();
    iVar4 = FUN_0040ede0(*(undefined4 *)(DAT_00da93ec + 0xc),local_34);
    local_8 = 2;
    iVar5 = FUN_0040ede0(*(undefined4 *)(DAT_00da93ec + 0xc),local_2c);
    local_8._0_1_ = 3;
    if (*(uint *)(*(int *)(iVar5 + 4) + 0x5c) < *(uint *)(*(int *)(iVar4 + 4) + 0x60)) {
      iVar4 = FUN_0040ede0(*(undefined4 *)(DAT_00da93ec + 0xc),local_24);
      local_8 = CONCAT31(local_8._1_3_,4);
      iVar4 = *(int *)(*(int *)(iVar4 + 4) + 0x60);
      local_14 = 1;
    }
    else {
      iVar4 = FUN_0040ede0(*(undefined4 *)(DAT_00da93ec + 0xc),local_1c);
      local_8 = 5;
      iVar4 = *(int *)(*(int *)(iVar4 + 4) + 0x5c);
      local_14 = 2;
    }
    FUN_007e8910(iVar4 * 2 + 1);
    local_8 = 4;
    if ((local_14 & 2) != 0) {
      local_14 = local_14 & 0xfffffffd;
      FUN_0040ed80(local_1c);
    }
    local_8 = 3;
    if ((local_14 & 1) != 0) {
      local_14 = local_14 & 0xfffffffe;
      FUN_0040ed80(local_24);
    }
    local_8 = CONCAT31(local_8._1_3_,2);
    FUN_0040ed80(local_2c);
    local_8 = 0xffffffff;
    FUN_0040ed80(local_34);
    iVar4 = DAT_00da93ec;
    *(undefined1 *)(*(int *)(DAT_00da93ec + 0xc) + 0xb0) = 1;
    *(undefined1 *)(*(int *)(iVar4 + 0xc) + 0x2a95) = 1;
    FUN_007f1aa0(*(undefined4 *)(DAT_0172491c + 0x94),param_1[0x10]);
    iVar4 = DAT_017247e4;
    puVar1 = (undefined4 *)(DAT_017247e4 + 4);
    if (*(int *)(DAT_017247e4 + 4) == 0) {
      DVar7 = timeGetTime();
      iVar5 = DAT_017251ac;
      *(DWORD *)(iVar4 + 0xc) = DVar7;
      *(undefined4 *)(iVar4 + 0x14) = 0;
      *(undefined4 *)(iVar4 + 0x10) = 1000;
      *puVar1 = 2;
      *(undefined4 *)(iVar5 + 0x49c) = 0x3f800000;
    }
    *(undefined1 *)(param_1 + 0x11) = 1;
    *(undefined1 *)((int)param_1 + 0x45) = 1;
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00879de0 : PUSH EBP
00879de1 : MOV EBP,ESP
00879de3 : PUSH -0x1
00879de5 : PUSH 0xb3dc3b
00879dea : MOV EAX,FS:[0x0]
00879df0 : PUSH EAX
00879df1 : SUB ESP,0x44
00879df4 : PUSH EBX
00879df5 : PUSH ESI
00879df6 : PUSH EDI
00879df7 : MOV EAX,[0x00d66fa0]
00879dfc : XOR EAX,EBP
00879dfe : PUSH EAX
00879dff : LEA EAX,[EBP + -0xc]
00879e02 : MOV FS:[0x0],EAX
00879e08 : MOV EDI,ECX
00879e0a : MOV EBX,dword ptr [EBP + 0x8]
00879e0d : MOV dword ptr [EBP + -0x10],0x0
00879e14 : MOV EAX,[0x0172491c]
00879e19 : TEST EAX,EAX
00879e1b : JZ 0x0087a0f7
00879e21 : CMP dword ptr [0x00da93ec],0x0
00879e28 : JZ 0x0087a0f7
00879e2e : CMP dword ptr [EAX + 0x94],0x0
00879e35 : JZ 0x0087a0f7
00879e3b : CMP byte ptr [EBP + 0xc],0x0
00879e3f : MOV dword ptr [EBX],EDI
00879e41 : JZ 0x00879ef0
00879e47 : MOV ECX,EBX
00879e49 : CALL 0x00878ba0
00879e4e : MOV ECX,dword ptr [0x00da93ec]
00879e54 : MOV EAX,dword ptr [ECX + 0xac]
00879e5a : MOV EAX,dword ptr [EAX + 0x3e8]
00879e60 : FLD float ptr [EAX + 0x68]
00879e63 : MOV ESI,dword ptr [ECX + 0xc]
00879e66 : ADD EAX,0x68
00879e69 : FSTP float ptr [EBX + 0x48]
00879e6c : FLD float ptr [EAX + 0x4]
00879e6f : LEA EDI,[EBX + 0x10]
00879e72 : FSTP float ptr [EBX + 0x4c]
00879e75 : FLD float ptr [EAX + 0x8]
00879e78 : FSTP float ptr [EBX + 0x50]
00879e7b : CALL 0x007dee30
00879e80 : MOV ECX,dword ptr [0x00da93ec]
00879e86 : MOV EAX,dword ptr [ECX + 0xc]
00879e89 : LEA EDX,[EBP + -0x30]
00879e8c : PUSH EDX
00879e8d : PUSH EAX
00879e8e : CALL 0x0040ede0
00879e93 : MOV ESI,EAX
00879e95 : MOV EDI,0x2
00879e9a : MOV dword ptr [EBP + -0x4],EDI
00879e9d : MOV EAX,[0x00da93ec]
00879ea2 : MOV EAX,dword ptr [EAX + 0xc]
00879ea5 : LEA ECX,[EBP + -0x28]
00879ea8 : PUSH ECX
00879ea9 : PUSH EAX
00879eaa : CALL 0x0040ede0
00879eaf : MOV byte ptr [EBP + -0x4],0x3
00879eb3 : MOV EAX,dword ptr [EAX + 0x4]
00879eb6 : MOV ESI,dword ptr [ESI + 0x4]
00879eb9 : MOV EAX,dword ptr [EAX + 0x5c]
00879ebc : MOV ESI,dword ptr [ESI + 0x60]
00879ebf : MOV EDX,dword ptr [0x00da93ec]
00879ec5 : CMP ESI,EAX
00879ec7 : MOV EAX,dword ptr [EDX + 0xc]
00879eca : JBE 0x00879ff5
00879ed0 : LEA ECX,[EBP + -0x20]
00879ed3 : PUSH ECX
00879ed4 : PUSH EAX
00879ed5 : CALL 0x0040ede0
00879eda : MOV byte ptr [EBP + -0x4],0x4
00879ede : MOV EAX,dword ptr [EAX + 0x4]
00879ee1 : MOV EAX,dword ptr [EAX + 0x60]
00879ee4 : MOV dword ptr [EBP + -0x10],0x1
00879eeb : JMP 0x0087a00f
00879ef0 : MOV ESI,dword ptr [EAX + 0x144]
00879ef6 : LEA EAX,[EBX + 0x18]
00879ef9 : PUSH EAX
00879efa : LEA ECX,[EBX + 0x14]
00879efd : PUSH ECX
00879efe : LEA EDX,[EBX + 0x10]
00879f01 : PUSH EDX
00879f02 : MOV EAX,EDI
00879f04 : CALL 0x00812260
00879f09 : TEST AL,AL
00879f0b : JNZ 0x00879f53
00879f0d : PUSH EDI
00879f0e : PUSH 0xc43600
00879f13 : LEA ESI,[EBP + -0x4c]
00879f16 : CALL 0x00404750
00879f1b : ADD ESP,0x8
00879f1e : MOV dword ptr [EBP + -0x4],0x0
00879f25 : PUSH EAX
00879f26 : MOV EAX,[0x00da98e8]
00879f2b : CALL 0x00801630
00879f30 : MOV dword ptr [EBP + -0x4],0xffffffff
00879f37 : LEA ECX,[EBP + -0x4c]
00879f3a : CALL 0x00406560
00879f3f : MOV ECX,dword ptr [EBP + -0xc]
00879f42 : MOV dword ptr FS:[0x0],ECX
00879f49 : POP ECX
00879f4a : POP EDI
00879f4b : POP ESI
00879f4c : POP EBX
00879f4d : MOV ESP,EBP
00879f4f : POP EBP
00879f50 : RET 0x8
00879f53 : MOV EAX,[0x0172491c]
00879f58 : MOV ESI,dword ptr [EAX + 0x144]
00879f5e : LEA ECX,[EBX + 0x24]
00879f61 : PUSH ECX
00879f62 : LEA EDX,[EBX + 0x20]
00879f65 : PUSH EDX
00879f66 : LEA EAX,[EBX + 0x1c]
00879f69 : PUSH EAX
00879f6a : MOV EAX,EDI
00879f6c : CALL 0x00812200
00879f71 : MOV ECX,dword ptr [0x0172491c]
00879f77 : MOV ESI,dword ptr [ECX + 0x144]
00879f7d : LEA EDX,[EBX + 0x30]
00879f80 : PUSH EDX
00879f81 : LEA EAX,[EBX + 0x2c]
00879f84 : PUSH EAX
00879f85 : LEA ECX,[EBX + 0x28]
00879f88 : PUSH ECX
00879f89 : MOV EAX,EDI
00879f8b : CALL 0x008121a0
00879f90 : MOV EDX,dword ptr [0x0172491c]
00879f96 : MOV ESI,dword ptr [EDX + 0x144]
00879f9c : LEA EAX,[EBX + 0x3c]
00879f9f : PUSH EAX
00879fa0 : LEA ECX,[EBX + 0x38]
00879fa3 : PUSH ECX
00879fa4 : LEA EDX,[EBX + 0x34]
00879fa7 : PUSH EDX
00879fa8 : MOV EAX,EDI
00879faa : CALL 0x00812140
00879faf : TEST EDI,EDI
00879fb1 : JZ 0x00879e4e
00879fb7 : PUSH 0xa500
00879fbc : CALL 0x00703c00
00879fc1 : ADD ESP,0x4
00879fc4 : TEST EAX,EAX
00879fc6 : JZ 0x00879fce
00879fc8 : MOV EAX,dword ptr [EAX + 0x18]
00879fcb : MOV dword ptr [EBX + 0x40],EAX
00879fce : CMP dword ptr [EBX + 0x40],0x0
00879fd2 : JNZ 0x00879e4e
00879fd8 : PUSH EDI
00879fd9 : PUSH 0xc43648
00879fde : LEA ESI,[EBP + -0x4c]
00879fe1 : CALL 0x00404750
00879fe6 : ADD ESP,0x8
00879fe9 : MOV dword ptr [EBP + -0x4],0x1
00879ff0 : JMP 0x00879f25
00879ff5 : LEA ECX,[EBP + -0x18]
00879ff8 : PUSH ECX
00879ff9 : PUSH EAX
00879ffa : CALL 0x0040ede0
00879fff : MOV dword ptr [EBP + -0x4],0x5
0087a006 : MOV EAX,dword ptr [EAX + 0x4]
0087a009 : MOV EAX,dword ptr [EAX + 0x5c]
0087a00c : MOV dword ptr [EBP + -0x10],EDI
0087a00f : MOV EDX,dword ptr [0x00da93ec]
0087a015 : MOV EDI,dword ptr [EDX + 0xc]
0087a018 : LEA EAX,[EAX + EAX*0x1 + 0x1]
0087a01c : PUSH EAX
0087a01d : CALL 0x007e8910
0087a022 : MOV dword ptr [EBP + -0x4],0x4
0087a029 : TEST byte ptr [EBP + -0x10],0x2
0087a02d : JZ 0x0087a03c
0087a02f : AND dword ptr [EBP + -0x10],0xfffffffd
0087a033 : LEA ECX,[EBP + -0x18]
0087a036 : PUSH ECX
0087a037 : CALL 0x0040ed80
0087a03c : MOV dword ptr [EBP + -0x4],0x3
0087a043 : TEST byte ptr [EBP + -0x10],0x1
0087a047 : JZ 0x0087a056
0087a049 : AND dword ptr [EBP + -0x10],0xfffffffe
0087a04d : LEA EDX,[EBP + -0x20]
0087a050 : PUSH EDX
0087a051 : CALL 0x0040ed80
0087a056 : MOV byte ptr [EBP + -0x4],0x2
0087a05a : LEA EAX,[EBP + -0x28]
0087a05d : PUSH EAX
0087a05e : CALL 0x0040ed80
0087a063 : MOV dword ptr [EBP + -0x4],0xffffffff
0087a06a : LEA ECX,[EBP + -0x30]
0087a06d : PUSH ECX
0087a06e : CALL 0x0040ed80
0087a073 : MOV EAX,[0x00da93ec]
0087a078 : MOV EDX,dword ptr [EAX + 0xc]
0087a07b : MOV byte ptr [EDX + 0xb0],0x1
0087a082 : MOV EAX,dword ptr [EAX + 0xc]
0087a085 : MOV byte ptr [EAX + 0x2a95],0x1
0087a08c : MOV ECX,dword ptr [EBX + 0x40]
0087a08f : MOV EAX,[0x0172491c]
0087a094 : MOV EAX,dword ptr [EAX + 0x94]
0087a09a : PUSH ECX
0087a09b : LEA ECX,[EBX + 0x34]
0087a09e : LEA EDX,[EBX + 0x28]
0087a0a1 : LEA ESI,[EBX + 0x1c]
0087a0a4 : PUSH EAX
0087a0a5 : LEA EDI,[EBX + 0x10]
0087a0a8 : CALL 0x007f1aa0
0087a0ad : MOV EDI,dword ptr [0x017247e4]
0087a0b3 : CMP dword ptr [EDI + 0x4],0x0
0087a0b7 : LEA ESI,[EDI + 0x4]
0087a0ba : JNZ 0x0087a0ef
0087a0bc : CALL dword ptr [0x00b85598]
0087a0c2 : MOV ECX,dword ptr [0x017251ac]
0087a0c8 : MOVSS XMM0,dword ptr [0x00c10fc4]
0087a0d0 : MOV dword ptr [EDI + 0xc],EAX
0087a0d3 : MOV dword ptr [EDI + 0x14],0x0
0087a0da : MOV dword ptr [EDI + 0x10],0x3e8
0087a0e1 : MOV dword ptr [ESI],0x2
0087a0e7 : MOVSS dword ptr [ECX + 0x49c],XMM0
0087a0ef : MOV byte ptr [EBX + 0x44],0x1
0087a0f3 : MOV byte ptr [EBX + 0x45],0x1
0087a0f7 : MOV ECX,dword ptr [EBP + -0xc]
0087a0fa : MOV dword ptr FS:[0x0],ECX
0087a101 : POP ECX
0087a102 : POP EDI
0087a103 : POP ESI
0087a104 : POP EBX
0087a105 : MOV ESP,EBP
0087a107 : POP EBP
0087a108 : RET 0x8
