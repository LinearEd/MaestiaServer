PROGRAM  : Maestia.exe
FUNCTION : FUN_00517340
ENTRY    : 00517340
BODY     : [[00517340, 0051738a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00517340(void)

{
  int *piVar1;
  undefined4 *puVar2;
  DWORD DVar3;
  int iVar4;
  int in_ECX;
  
  puVar2 = *(undefined4 **)(in_ECX + 0x14);
  DVar3 = WaitForSingleObject((HANDLE)*puVar2,0xffffffff);
  if (DVar3 == 0) {
    piVar1 = puVar2 + 2;
    *piVar1 = *piVar1 + 1;
  }
  iVar4 = FUN_00516540();
  while (iVar4 != 0) {
    FUN_00516650(in_ECX + 4,0xffffffff);
    iVar4 = FUN_00516540();
  }
  FUN_00517030(in_ECX + 4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00517340 : PUSH EBX
00517341 : PUSH ESI
00517342 : PUSH EDI
00517343 : MOV ESI,ECX
00517345 : MOV EBX,dword ptr [ESI + 0x14]
00517348 : MOV EAX,dword ptr [EBX]
0051734a : LEA EDI,[ESI + 0x4]
0051734d : PUSH -0x1
0051734f : PUSH EAX
00517350 : CALL dword ptr [0x00b85100]
00517356 : TEST EAX,EAX
00517358 : JNZ 0x0051735d
0051735a : INC dword ptr [EBX + 0x8]
0051735d : MOV ECX,ESI
0051735f : CALL 0x00516540
00517364 : TEST EAX,EAX
00517366 : JZ 0x0051737e
00517368 : MOV ECX,dword ptr [ESI + 0x18]
0051736b : PUSH -0x1
0051736d : PUSH EDI
0051736e : CALL 0x00516650
00517373 : MOV ECX,ESI
00517375 : CALL 0x00516540
0051737a : TEST EAX,EAX
0051737c : JNZ 0x00517368
0051737e : MOV ECX,dword ptr [EDI + 0x10]
00517381 : PUSH EDI
00517382 : CALL 0x00517030
00517387 : POP EDI
00517388 : POP ESI
00517389 : POP EBX
0051738a : RET
