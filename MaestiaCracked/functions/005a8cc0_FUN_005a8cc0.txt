PROGRAM  : Maestia.exe
FUNCTION : FUN_005a8cc0
ENTRY    : 005a8cc0
BODY     : [[005a8cc0, 005a8d5c]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_005a8cc0(int param_1,uint param_2,uint param_3,undefined4 param_4)

{
  uint uVar1;
  int iVar2;
  byte bVar3;
  int in_ECX;
  LPCRITICAL_SECTION lpCriticalSection;
  
  lpCriticalSection = (LPCRITICAL_SECTION)(DAT_00d7324c + 0x2c4);
  EnterCriticalSection(lpCriticalSection);
  uVar1 = *(int *)(in_ECX + 0x10) + 1;
  if (uVar1 < param_2) {
    uVar1 = param_2;
  }
  iVar2 = (((((-(uint)(0x1000 < uVar1) & uVar1) + uVar1 + -1 + param_1 & ~(uVar1 - 1)) - 1) +
           param_3) / param_3) * param_3;
  bVar3 = (byte)*(undefined4 *)(in_ECX + 0x14);
  iVar2 = FUN_005a88c0(10,iVar2,0x1000,
                       (((uint)((1 << (bVar3 & 0x1f)) + -1 + iVar2) >> (bVar3 & 0x1f)) + 0xf >> 4) *
                       4,param_4);
  if (iVar2 != 0) {
    FUN_005f6bb0(iVar2);
  }
  LeaveCriticalSection(lpCriticalSection);
  return iVar2;
}



============================================================
DISASSEMBLY
============================================================
005a8cc0 : PUSH EBX
005a8cc1 : MOV EBX,dword ptr [0x00d7324c]
005a8cc7 : PUSH ESI
005a8cc8 : PUSH EDI
005a8cc9 : ADD EBX,0x2c4
005a8ccf : PUSH EBX
005a8cd0 : MOV ESI,ECX
005a8cd2 : CALL dword ptr [0x00b85118]
005a8cd8 : MOV EAX,dword ptr [ESI + 0x10]
005a8cdb : MOV ECX,dword ptr [ESP + 0x14]
005a8cdf : INC EAX
005a8ce0 : CMP ECX,EAX
005a8ce2 : JBE 0x005a8ce6
005a8ce4 : MOV EAX,ECX
005a8ce6 : MOV ECX,0x1000
005a8ceb : CMP ECX,EAX
005a8ced : MOV ECX,dword ptr [ESP + 0x10]
005a8cf1 : SBB EDX,EDX
005a8cf3 : AND EDX,EAX
005a8cf5 : ADD EDX,EAX
005a8cf7 : LEA EDX,[EDX + ECX*0x1 + -0x1]
005a8cfb : MOV ECX,dword ptr [ESP + 0x18]
005a8cff : DEC EAX
005a8d00 : NOT EAX
005a8d02 : AND EDX,EAX
005a8d04 : LEA EAX,[EDX + ECX*0x1 + -0x1]
005a8d08 : XOR EDX,EDX
005a8d0a : DIV ECX
005a8d0c : MOV EDX,dword ptr [ESP + 0x1c]
005a8d10 : PUSH EDX
005a8d11 : LEA EDI,[ESI + 0x14]
005a8d14 : MOV EDX,0x1
005a8d19 : IMUL EAX,ECX
005a8d1c : MOV ECX,dword ptr [EDI]
005a8d1e : SHL EDX,CL
005a8d20 : LEA EDX,[EDX + EAX*0x1 + -0x1]
005a8d24 : SHR EDX,CL
005a8d26 : MOV ECX,ESI
005a8d28 : ADD EDX,0xf
005a8d2b : SHR EDX,0x4
005a8d2e : ADD EDX,EDX
005a8d30 : ADD EDX,EDX
005a8d32 : PUSH EDX
005a8d33 : PUSH 0x1000
005a8d38 : PUSH EAX
005a8d39 : PUSH 0xa
005a8d3b : CALL 0x005a88c0
005a8d40 : MOV ESI,EAX
005a8d42 : TEST ESI,ESI
005a8d44 : JZ 0x005a8d4e
005a8d46 : PUSH ESI
005a8d47 : MOV ECX,EDI
005a8d49 : CALL 0x005f6bb0
005a8d4e : PUSH EBX
005a8d4f : CALL dword ptr [0x00b8511c]
005a8d55 : POP EDI
005a8d56 : MOV EAX,ESI
005a8d58 : POP ESI
005a8d59 : POP EBX
005a8d5a : RET 0x10
