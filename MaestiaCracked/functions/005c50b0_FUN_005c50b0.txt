PROGRAM  : Maestia.exe
FUNCTION : FUN_005c50b0
ENTRY    : 005c50b0
BODY     : [[005c50b0, 005c519b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c50b0(void)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  int in_ECX;
  int *piVar5;
  int *piVar6;
  
  FUN_0054fe30();
  iVar1 = *(int *)(in_ECX + 0x34);
  piVar6 = (int *)(in_ECX + 0x34);
  if (iVar1 == 0) {
    uVar4 = 0;
    piVar6 = (int *)0x0;
  }
  else {
    uVar4 = 0;
    piVar5 = (int *)(iVar1 + 8);
    do {
      if (*piVar5 != -2) break;
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar4 <= *(uint *)(iVar1 + 4));
  }
  do {
    do {
      if (((piVar6 == (int *)0x0) || (iVar1 = *piVar6, iVar1 == 0)) ||
         (*(int *)(iVar1 + 4) < (int)uVar4)) {
        return;
      }
      puVar2 = *(undefined4 **)(uVar4 * 0x10 + 0x14 + iVar1);
      uVar3 = puVar2[2];
      if (((uVar3 & 0x70000000) == 0x20000000) && (-1 < (int)uVar3)) {
        puVar2[2] = uVar3 & 0x8fffffff;
        (**(code **)*puVar2)(3);
        iVar1 = puVar2[1];
        if ((puVar2[2] & 0x70000000) != 0x40000000) {
          puVar2[1] = *(undefined4 *)(iVar1 + 0x14);
          *(undefined4 **)(iVar1 + 0x14) = puVar2;
          puVar2[2] = puVar2[2] & 0xcfffffff | 0x40000000;
        }
      }
      uVar3 = *(uint *)(*piVar6 + 4);
    } while (((int)uVar3 < (int)uVar4) || (uVar4 = uVar4 + 1, uVar3 < uVar4));
    piVar5 = (int *)(uVar4 * 0x10 + 8 + *piVar6);
    do {
      if (*piVar5 != -2) break;
      uVar4 = uVar4 + 1;
      piVar5 = piVar5 + 4;
    } while (uVar4 <= uVar3);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005c50b0 : PUSH EBX
005c50b1 : PUSH ESI
005c50b2 : PUSH EDI
005c50b3 : MOV ESI,ECX
005c50b5 : CALL 0x0054fe30
005c50ba : MOV ECX,dword ptr [ESI + 0x34]
005c50bd : ADD ESI,0x34
005c50c0 : TEST ECX,ECX
005c50c2 : JNZ 0x005c50c8
005c50c4 : XOR EAX,EAX
005c50c6 : JMP 0x005c50df
005c50c8 : MOV EDX,dword ptr [ECX + 0x4]
005c50cb : XOR EAX,EAX
005c50cd : ADD ECX,0x8
005c50d0 : CMP dword ptr [ECX],-0x2
005c50d3 : JNZ 0x005c50dd
005c50d5 : INC EAX
005c50d6 : ADD ECX,0x10
005c50d9 : CMP EAX,EDX
005c50db : JBE 0x005c50d0
005c50dd : MOV ECX,ESI
005c50df : MOV EBX,ECX
005c50e1 : MOV EDI,EAX
005c50e3 : TEST EBX,EBX
005c50e5 : JZ 0x005c5198
005c50eb : MOV EAX,dword ptr [EBX]
005c50ed : TEST EAX,EAX
005c50ef : JZ 0x005c5198
005c50f5 : CMP EDI,dword ptr [EAX + 0x4]
005c50f8 : JG 0x005c5198
005c50fe : MOV ECX,EDI
005c5100 : SHL ECX,0x4
005c5103 : MOV ESI,dword ptr [ECX + EAX*0x1 + 0x14]
005c5107 : MOV EAX,dword ptr [ESI + 0x8]
005c510a : MOV EDX,EAX
005c510c : AND EDX,0x70000000
005c5112 : CMP EDX,0x20000000
005c5118 : JNZ 0x005c5163
005c511a : MOV ECX,EAX
005c511c : SHR ECX,0x1f
005c511f : TEST CL,0x1
005c5122 : JNZ 0x005c5163
005c5124 : MOV EDX,dword ptr [ESI]
005c5126 : AND EAX,0x8fffffff
005c512b : MOV dword ptr [ESI + 0x8],EAX
005c512e : MOV EAX,dword ptr [EDX]
005c5130 : PUSH 0x3
005c5132 : MOV ECX,ESI
005c5134 : CALL EAX
005c5136 : MOV ECX,dword ptr [ESI + 0x8]
005c5139 : MOV EAX,dword ptr [ESI + 0x4]
005c513c : AND ECX,0x70000000
005c5142 : CMP ECX,0x40000000
005c5148 : JZ 0x005c5163
005c514a : MOV EDX,dword ptr [EAX + 0x14]
005c514d : MOV dword ptr [ESI + 0x4],EDX
005c5150 : MOV dword ptr [EAX + 0x14],ESI
005c5153 : MOV EAX,dword ptr [ESI + 0x8]
005c5156 : AND EAX,0xcfffffff
005c515b : OR EAX,0x40000000
005c5160 : MOV dword ptr [ESI + 0x8],EAX
005c5163 : MOV ECX,dword ptr [EBX]
005c5165 : MOV EAX,dword ptr [ECX + 0x4]
005c5168 : CMP EDI,EAX
005c516a : JG 0x005c50e3
005c5170 : INC EDI
005c5171 : CMP EDI,EAX
005c5173 : JA 0x005c50e3
005c5179 : MOV EDX,EDI
005c517b : SHL EDX,0x4
005c517e : LEA ECX,[EDX + ECX*0x1 + 0x8]
005c5182 : CMP dword ptr [ECX],-0x2
005c5185 : JNZ 0x005c50e3
005c518b : INC EDI
005c518c : ADD ECX,0x10
005c518f : CMP EDI,EAX
005c5191 : JBE 0x005c5182
005c5193 : JMP 0x005c50e3
005c5198 : POP EDI
005c5199 : POP ESI
005c519a : POP EBX
005c519b : RET
