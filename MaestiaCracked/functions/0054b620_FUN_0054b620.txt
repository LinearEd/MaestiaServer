PROGRAM  : Maestia.exe
FUNCTION : FUN_0054b620
ENTRY    : 0054b620
BODY     : [[0054b620, 0054b6ff]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0054b620(uint param_1,uint *param_2)

{
  int *piVar1;
  int *piVar2;
  uint *puVar3;
  uint uVar4;
  int in_ECX;
  int *local_8;
  int local_4;
  
  puVar3 = param_2;
  if (param_2 == (uint *)0x0) {
    return 0;
  }
  if ((*(byte *)(in_ECX + 0x143) & 3) != 0) {
    FUN_00549ad0();
    *(byte *)(in_ECX + 0x143) = *(byte *)(in_ECX + 0x143) & 0xfc;
  }
  piVar1 = (int *)(in_ECX + 0x28);
  if (((piVar1 != (int *)0x0) && (param_1 < *(uint *)(in_ECX + 0x2c))) && (-1 < (int)param_1)) {
    piVar2 = *(int **)(*piVar1 + param_1 * 4);
    uVar4 = piVar2[2];
    if ((*piVar2 < 0) && (uVar4 = uVar4 & 0xffffff, uVar4 == 0xffffff)) {
      uVar4 = 0xffffffff;
    }
    param_2 = (uint *)0x0;
    FUN_0053c2d0(&local_8,uVar4,&param_2);
    if (((local_8 != (int *)0x0) && (-1 < local_4)) && (local_4 < local_8[1])) {
      piVar1 = *(int **)(*piVar1 + param_1 * 4);
      if (*piVar1 < 0) {
        uVar4 = (uint)*(byte *)((int)piVar1 + 0xb);
      }
      else {
        uVar4 = piVar1[8];
      }
      *puVar3 = uVar4;
      return **(int **)(*local_8 + local_4 * 4) + (int)param_2 * 2;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0054b620 : SUB ESP,0x8
0054b623 : PUSH EBP
0054b624 : MOV EBP,dword ptr [ESP + 0x14]
0054b628 : PUSH EDI
0054b629 : MOV EDI,ECX
0054b62b : TEST EBP,EBP
0054b62d : JNZ 0x0054b639
0054b62f : POP EDI
0054b630 : XOR EAX,EAX
0054b632 : POP EBP
0054b633 : ADD ESP,0x8
0054b636 : RET 0x8
0054b639 : TEST byte ptr [EDI + 0x143],0x3
0054b640 : JZ 0x0054b64e
0054b642 : CALL 0x00549ad0
0054b647 : AND byte ptr [EDI + 0x143],0xfc
0054b64e : PUSH EBX
0054b64f : PUSH ESI
0054b650 : LEA ESI,[EDI + 0x28]
0054b653 : TEST ESI,ESI
0054b655 : JZ 0x0054b6f4
0054b65b : MOV EBX,dword ptr [ESP + 0x1c]
0054b65f : CMP EBX,dword ptr [ESI + 0x4]
0054b662 : JNC 0x0054b6f4
0054b668 : TEST EBX,EBX
0054b66a : JL 0x0054b6f4
0054b670 : MOV EAX,dword ptr [ESI]
0054b672 : MOV EAX,dword ptr [EAX + EBX*0x4]
0054b675 : MOV ECX,dword ptr [EAX]
0054b677 : MOV EAX,dword ptr [EAX + 0x8]
0054b67a : SHR ECX,0x1f
0054b67d : TEST CL,0x1
0054b680 : JZ 0x0054b691
0054b682 : AND EAX,0xffffff
0054b687 : CMP EAX,0xffffff
0054b68c : JNZ 0x0054b691
0054b68e : OR EAX,0xffffffff
0054b691 : MOV ECX,dword ptr [EDI + 0xc]
0054b694 : LEA EDX,[ESP + 0x20]
0054b698 : PUSH EDX
0054b699 : PUSH EAX
0054b69a : LEA EAX,[ESP + 0x18]
0054b69e : PUSH EAX
0054b69f : MOV dword ptr [ESP + 0x2c],0x0
0054b6a7 : CALL 0x0053c2d0
0054b6ac : MOV ECX,dword ptr [ESP + 0x10]
0054b6b0 : TEST ECX,ECX
0054b6b2 : JZ 0x0054b6f4
0054b6b4 : MOV EDI,dword ptr [ESP + 0x14]
0054b6b8 : TEST EDI,EDI
0054b6ba : JL 0x0054b6f4
0054b6bc : CMP EDI,dword ptr [ECX + 0x4]
0054b6bf : JGE 0x0054b6f4
0054b6c1 : MOV EDX,dword ptr [ESI]
0054b6c3 : MOV EAX,dword ptr [EDX + EBX*0x4]
0054b6c6 : MOV EDX,dword ptr [EAX]
0054b6c8 : SHR EDX,0x1f
0054b6cb : TEST DL,0x1
0054b6ce : JZ 0x0054b6d6
0054b6d0 : MOVZX EAX,byte ptr [EAX + 0xb]
0054b6d4 : JMP 0x0054b6d9
0054b6d6 : MOV EAX,dword ptr [EAX + 0x20]
0054b6d9 : MOV dword ptr [EBP],EAX
0054b6dc : MOV EAX,dword ptr [ECX]
0054b6de : MOV ECX,dword ptr [EAX + EDI*0x4]
0054b6e1 : MOV EDX,dword ptr [ECX]
0054b6e3 : MOV EAX,dword ptr [ESP + 0x20]
0054b6e7 : POP ESI
0054b6e8 : POP EBX
0054b6e9 : POP EDI
0054b6ea : LEA EAX,[EDX + EAX*0x2]
0054b6ed : POP EBP
0054b6ee : ADD ESP,0x8
0054b6f1 : RET 0x8
0054b6f4 : POP ESI
0054b6f5 : POP EBX
0054b6f6 : POP EDI
0054b6f7 : XOR EAX,EAX
0054b6f9 : POP EBP
0054b6fa : ADD ESP,0x8
0054b6fd : RET 0x8
