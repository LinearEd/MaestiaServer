PROGRAM  : Maestia.exe
FUNCTION : FUN_006d8660
ENTRY    : 006d8660
BODY     : [[006d8660, 006d86fe]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006d8660(void)

{
  int iVar1;
  uint uVar2;
  undefined4 *puVar3;
  int iVar4;
  int *unaff_EBX;
  undefined4 *puVar5;
  undefined4 *puVar6;
  int *local_8;
  int local_4;
  
  local_4 = 0;
  if (0 < unaff_EBX[0x49]) {
    local_8 = unaff_EBX + 0x4a;
    do {
      iVar1 = *local_8;
      if (*(int *)(iVar1 + 0x4c) == 0) {
        uVar2 = *(uint *)(iVar1 + 0x10);
        if ((3 < uVar2) || (unaff_EBX[uVar2 + 0x24] == 0)) {
          *(undefined4 *)(*unaff_EBX + 0x14) = 0x34;
          *(uint *)(*unaff_EBX + 0x18) = uVar2;
          (**(code **)*unaff_EBX)();
        }
        puVar3 = (undefined4 *)(**(code **)unaff_EBX[1])();
        puVar5 = (undefined4 *)unaff_EBX[uVar2 + 0x24];
        puVar6 = puVar3;
        for (iVar4 = 0x20; iVar4 != 0; iVar4 = iVar4 + -1) {
          *puVar6 = *puVar5;
          puVar5 = puVar5 + 1;
          puVar6 = puVar6 + 1;
        }
        *(undefined2 *)puVar6 = *(undefined2 *)puVar5;
        *(undefined4 **)(iVar1 + 0x4c) = puVar3;
      }
      local_8 = local_8 + 1;
      local_4 = local_4 + 1;
    } while (local_4 < unaff_EBX[0x49]);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006d8660 : SUB ESP,0x8
006d8663 : CMP dword ptr [EBX + 0x124],0x0
006d866a : MOV dword ptr [ESP + 0x4],0x0
006d8672 : JLE 0x006d86fb
006d8678 : PUSH EBP
006d8679 : LEA EAX,[EBX + 0x128]
006d867f : PUSH ESI
006d8680 : MOV dword ptr [ESP + 0x8],EAX
006d8684 : PUSH EDI
006d8685 : MOV ECX,dword ptr [ESP + 0xc]
006d8689 : MOV EBP,dword ptr [ECX]
006d868b : CMP dword ptr [EBP + 0x4c],0x0
006d868f : JNZ 0x006d86e2
006d8691 : MOV ESI,dword ptr [EBP + 0x10]
006d8694 : CMP ESI,0x3
006d8697 : JA 0x006d86a3
006d8699 : CMP dword ptr [EBX + ESI*0x4 + 0x90],0x0
006d86a1 : JNZ 0x006d86bb
006d86a3 : MOV EDX,dword ptr [EBX]
006d86a5 : MOV dword ptr [EDX + 0x14],0x34
006d86ac : MOV EAX,dword ptr [EBX]
006d86ae : MOV dword ptr [EAX + 0x18],ESI
006d86b1 : MOV ECX,dword ptr [EBX]
006d86b3 : MOV EDX,dword ptr [ECX]
006d86b5 : PUSH EBX
006d86b6 : CALL EDX
006d86b8 : ADD ESP,0x4
006d86bb : MOV EAX,dword ptr [EBX + 0x4]
006d86be : MOV ECX,dword ptr [EAX]
006d86c0 : PUSH 0x82
006d86c5 : PUSH 0x1
006d86c7 : PUSH EBX
006d86c8 : CALL ECX
006d86ca : MOV ESI,dword ptr [EBX + ESI*0x4 + 0x90]
006d86d1 : MOV ECX,0x20
006d86d6 : MOV EDI,EAX
006d86d8 : MOVSD.REP ES:EDI,ESI
006d86da : MOVSW ES:EDI,ESI
006d86dc : ADD ESP,0xc
006d86df : MOV dword ptr [EBP + 0x4c],EAX
006d86e2 : MOV EAX,dword ptr [ESP + 0x10]
006d86e6 : ADD dword ptr [ESP + 0xc],0x4
006d86eb : INC EAX
006d86ec : CMP EAX,dword ptr [EBX + 0x124]
006d86f2 : MOV dword ptr [ESP + 0x10],EAX
006d86f6 : JL 0x006d8685
006d86f8 : POP EDI
006d86f9 : POP ESI
006d86fa : POP EBP
006d86fb : ADD ESP,0x8
006d86fe : RET
