PROGRAM  : Maestia.exe
FUNCTION : FUN_00abe300
ENTRY    : 00abe300
BODY     : [[00abe300, 00abe530]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00abe300(int param_1,ushort param_2,short param_3)

{
  undefined4 uVar1;
  int iVar2;
  ushort in_CX;
  undefined4 in_EDX;
  undefined1 local_7c [32];
  undefined1 local_5c [4];
  undefined4 local_58;
  undefined1 local_54 [4];
  int local_50;
  LPCRITICAL_SECTION local_4c;
  char *local_48;
  undefined4 local_44;
  int local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined2 local_30;
  int local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2abb9;
  local_10 = ExceptionList;
  local_18 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_50 = param_1;
  if (in_CX < 100) {
    in_CX = param_3 * 100 + in_CX;
  }
  local_4c = (LPCRITICAL_SECTION)(param_1 + 0x4c);
  local_40 = 0;
  local_48 = ".\\Objects\\AvaAnimationList.cpp";
  local_44 = 0x5d;
  local_3c = 1;
  local_38 = in_EDX;
  FUN_006ef1a0(&local_4c);
  local_8 = 0;
  local_58 = CONCAT22(in_CX,param_2);
  uVar1 = FUN_00410510(local_7c,&local_58,local_38);
  local_8._0_1_ = 1;
  FUN_004103f0(local_5c,uVar1);
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_004427d0(local_7c);
  local_8 = 0xffffffff;
  if (local_40 != 0) {
    LeaveCriticalSection(local_4c);
    local_40 = 0;
  }
  local_1c = 7;
  local_20 = 0;
  local_30 = 0;
  FUN_00405eb0(local_38,0,0xffffffff);
  local_8 = 2;
  if (param_2 < 1000) {
    local_58 = 0x2e;
    iVar2 = FUN_00407cc0(&local_58,1);
    if (iVar2 == -1) {
      if (7 < local_1c) {
        local_8 = iVar2;
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_00abe50c;
    }
    FUN_00405e10(iVar2,local_20 - iVar2);
    FUN_00404870(L"_upper.maf",10);
    param_1 = local_50;
  }
  local_4c = (LPCRITICAL_SECTION)(param_1 + 0x4c);
  local_40 = 0;
  local_48 = ".\\Objects\\AvaAnimationList.cpp";
  local_44 = 0x77;
  local_3c = 1;
  FUN_006ef1a0(&local_4c);
  local_8._0_1_ = 3;
  local_50 = CONCAT22(in_CX,param_2 + 1000);
  uVar1 = FUN_00410510(local_7c,&local_50,local_38);
  local_8._0_1_ = 4;
  FUN_004103f0(local_54,uVar1);
  local_8._0_1_ = 3;
  FUN_004427d0(local_7c);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (local_40 != 0) {
    LeaveCriticalSection(local_4c);
    local_40 = 0;
  }
  local_8 = 0xffffffff;
  if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
LAB_00abe50c:
  local_8 = 0xffffffff;
  local_20 = 0;
  local_30 = 0;
  local_1c = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00abe300 : PUSH EBP
00abe301 : MOV EBP,ESP
00abe303 : PUSH -0x1
00abe305 : PUSH 0xb2abb9
00abe30a : MOV EAX,FS:[0x0]
00abe310 : PUSH EAX
00abe311 : SUB ESP,0x70
00abe314 : MOV EAX,[0x00d66fa0]
00abe319 : XOR EAX,EBP
00abe31b : MOV dword ptr [EBP + -0x14],EAX
00abe31e : PUSH EBX
00abe31f : PUSH ESI
00abe320 : PUSH EDI
00abe321 : PUSH EAX
00abe322 : LEA EAX,[EBP + -0xc]
00abe325 : MOV FS:[0x0],EAX
00abe32b : MOV EAX,dword ptr [EBP + 0x10]
00abe32e : MOV EDI,dword ptr [EBP + 0x8]
00abe331 : MOV dword ptr [EBP + -0x4c],EDI
00abe334 : MOV dword ptr [EBP + -0x34],EDX
00abe337 : CMP CX,0x64
00abe33b : JC 0x00abe342
00abe33d : MOVZX ESI,CX
00abe340 : JMP 0x00abe34a
00abe342 : IMUL EAX,EAX,0x64
00abe345 : ADD EAX,ECX
00abe347 : MOVZX ESI,AX
00abe34a : LEA EAX,[EDI + 0x4c]
00abe34d : MOV dword ptr [EBP + -0x48],EAX
00abe350 : LEA EAX,[EBP + -0x48]
00abe353 : XOR EBX,EBX
00abe355 : PUSH EAX
00abe356 : MOV dword ptr [EBP + -0x3c],EBX
00abe359 : MOV dword ptr [EBP + -0x44],0xc47fd4
00abe360 : MOV dword ptr [EBP + -0x40],0x5d
00abe367 : MOV dword ptr [EBP + -0x38],0x1
00abe36e : CALL 0x006ef1a0
00abe373 : MOV dword ptr [EBP + -0x4],EBX
00abe376 : MOV EDX,dword ptr [EBP + -0x34]
00abe379 : MOVZX EBX,SI
00abe37c : MOV ESI,dword ptr [EBP + 0xc]
00abe37f : MOVZX ECX,SI
00abe382 : SHL EBX,0x10
00abe385 : OR ECX,EBX
00abe387 : PUSH EDX
00abe388 : LEA EAX,[EBP + -0x54]
00abe38b : MOV dword ptr [EBP + -0x54],ECX
00abe38e : PUSH EAX
00abe38f : LEA ECX,[EBP + -0x78]
00abe392 : PUSH ECX
00abe393 : CALL 0x00410510
00abe398 : MOV byte ptr [EBP + -0x4],0x1
00abe39c : PUSH EAX
00abe39d : LEA EDX,[EBP + -0x58]
00abe3a0 : PUSH EDX
00abe3a1 : MOV EAX,EDI
00abe3a3 : CALL 0x004103f0
00abe3a8 : MOV byte ptr [EBP + -0x4],0x0
00abe3ac : LEA EAX,[EBP + -0x78]
00abe3af : PUSH EAX
00abe3b0 : CALL 0x004427d0
00abe3b5 : MOV dword ptr [EBP + -0x4],0xffffffff
00abe3bc : CMP dword ptr [EBP + -0x3c],0x0
00abe3c0 : JZ 0x00abe3d3
00abe3c2 : MOV ECX,dword ptr [EBP + -0x48]
00abe3c5 : PUSH ECX
00abe3c6 : CALL dword ptr [0x00b8511c]
00abe3cc : MOV dword ptr [EBP + -0x3c],0x0
00abe3d3 : MOV EAX,dword ptr [EBP + -0x34]
00abe3d6 : XOR EDX,EDX
00abe3d8 : PUSH -0x1
00abe3da : PUSH EDX
00abe3db : PUSH EAX
00abe3dc : LEA ECX,[EBP + -0x30]
00abe3df : MOV dword ptr [EBP + -0x18],0x7
00abe3e6 : MOV dword ptr [EBP + -0x1c],0x0
00abe3ed : MOV word ptr [EBP + -0x2c],DX
00abe3f1 : CALL 0x00405eb0
00abe3f6 : MOV dword ptr [EBP + -0x4],0x2
00abe3fd : MOV ECX,0x3e8
00abe402 : CMP SI,CX
00abe405 : JNC 0x00abe46b
00abe407 : PUSH 0x1
00abe409 : LEA EDX,[EBP + -0x54]
00abe40c : PUSH EDX
00abe40d : OR ECX,0xffffffff
00abe410 : LEA EDI,[EBP + -0x30]
00abe413 : MOV dword ptr [EBP + -0x54],0x2e
00abe41a : CALL 0x00407cc0
00abe41f : CMP EAX,-0x1
00abe422 : JNZ 0x00abe447
00abe424 : MOV dword ptr [EBP + -0x4],EAX
00abe427 : CMP dword ptr [EBP + -0x18],0x8
00abe42b : JC 0x00abe435
00abe42d : MOV ECX,dword ptr [EBP + -0x2c]
00abe430 : CALL 0x006f04e0
00abe435 : XOR EAX,EAX
00abe437 : MOV dword ptr [EBP + -0x1c],0x0
00abe43e : MOV word ptr [EBP + -0x2c],AX
00abe442 : JMP 0x00abe50c
00abe447 : MOV ECX,dword ptr [EBP + -0x1c]
00abe44a : SUB ECX,EAX
00abe44c : PUSH ECX
00abe44d : PUSH EAX
00abe44e : LEA ECX,[EBP + -0x30]
00abe451 : CALL 0x00405e10
00abe456 : PUSH 0xa
00abe458 : PUSH 0xc47ff4
00abe45d : LEA ESI,[EBP + -0x30]
00abe460 : CALL 0x00404870
00abe465 : MOV EDI,dword ptr [EBP + -0x4c]
00abe468 : MOV ESI,dword ptr [EBP + 0xc]
00abe46b : LEA EDX,[EBP + -0x48]
00abe46e : LEA EAX,[EDI + 0x4c]
00abe471 : PUSH EDX
00abe472 : MOV dword ptr [EBP + -0x3c],0x0
00abe479 : MOV dword ptr [EBP + -0x48],EAX
00abe47c : MOV dword ptr [EBP + -0x44],0xc4800c
00abe483 : MOV dword ptr [EBP + -0x40],0x77
00abe48a : MOV dword ptr [EBP + -0x38],0x1
00abe491 : CALL 0x006ef1a0
00abe496 : MOV byte ptr [EBP + -0x4],0x3
00abe49a : MOV ECX,dword ptr [EBP + -0x34]
00abe49d : ADD ESI,0x3e8
00abe4a3 : MOVZX EAX,SI
00abe4a6 : OR EAX,EBX
00abe4a8 : PUSH ECX
00abe4a9 : LEA EDX,[EBP + -0x4c]
00abe4ac : MOV dword ptr [EBP + -0x4c],EAX
00abe4af : PUSH EDX
00abe4b0 : LEA EAX,[EBP + -0x78]
00abe4b3 : PUSH EAX
00abe4b4 : CALL 0x00410510
00abe4b9 : MOV byte ptr [EBP + -0x4],0x4
00abe4bd : PUSH EAX
00abe4be : LEA ECX,[EBP + -0x50]
00abe4c1 : PUSH ECX
00abe4c2 : MOV EAX,EDI
00abe4c4 : CALL 0x004103f0
00abe4c9 : MOV byte ptr [EBP + -0x4],0x3
00abe4cd : LEA EDX,[EBP + -0x78]
00abe4d0 : PUSH EDX
00abe4d1 : CALL 0x004427d0
00abe4d6 : MOV byte ptr [EBP + -0x4],0x2
00abe4da : XOR ESI,ESI
00abe4dc : CMP dword ptr [EBP + -0x3c],ESI
00abe4df : JZ 0x00abe4ee
00abe4e1 : MOV EAX,dword ptr [EBP + -0x48]
00abe4e4 : PUSH EAX
00abe4e5 : CALL dword ptr [0x00b8511c]
00abe4eb : MOV dword ptr [EBP + -0x3c],ESI
00abe4ee : MOV dword ptr [EBP + -0x4],0xffffffff
00abe4f5 : CMP dword ptr [EBP + -0x18],0x8
00abe4f9 : JC 0x00abe503
00abe4fb : MOV ECX,dword ptr [EBP + -0x2c]
00abe4fe : CALL 0x006f04e0
00abe503 : XOR ECX,ECX
00abe505 : MOV dword ptr [EBP + -0x1c],ESI
00abe508 : MOV word ptr [EBP + -0x2c],CX
00abe50c : MOV dword ptr [EBP + -0x18],0x7
00abe513 : MOV ECX,dword ptr [EBP + -0xc]
00abe516 : MOV dword ptr FS:[0x0],ECX
00abe51d : POP ECX
00abe51e : POP EDI
00abe51f : POP ESI
00abe520 : POP EBX
00abe521 : MOV ECX,dword ptr [EBP + -0x14]
00abe524 : XOR ECX,EBP
00abe526 : CALL 0x00633e6b
00abe52b : MOV ESP,EBP
00abe52d : POP EBP
00abe52e : RET 0xc
