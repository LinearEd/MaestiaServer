PROGRAM  : Maestia.exe
FUNCTION : FUN_0059d0a0
ENTRY    : 0059d0a0
BODY     : [[0059d0a0, 0059d294]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 * FUN_0059d0a0(undefined1 *param_1,float param_2)

{
  float fVar1;
  undefined1 *puVar2;
  uint uVar3;
  float *in_ECX;
  float local_10;
  float local_c;
  float local_8;
  undefined1 local_4;
  
  uVar3 = (uint)param_2;
  puVar2 = param_1;
  param_2 = (float)((uint)param_2 >> 0x18) * in_ECX[6] + in_ECX[7];
  if (255.0 <= param_2) {
    param_2 = 255.0;
LAB_0059d0f6:
    local_8 = param_2;
  }
  else {
    if (0.0 <= param_2) goto LAB_0059d0f6;
    local_8 = 0.0;
  }
  param_2 = (float)(uVar3 & 0xff) * in_ECX[4] + in_ECX[5];
  if (255.0 <= param_2) {
    param_2 = 255.0;
LAB_0059d141:
    local_c = param_2;
  }
  else {
    if (0.0 <= param_2) goto LAB_0059d141;
    local_c = 0.0;
  }
  param_2 = (float)(uVar3 >> 8 & 0xff) * in_ECX[2] + in_ECX[3];
  if (255.0 <= param_2) {
    param_2 = 255.0;
LAB_0059d18c:
    local_10 = param_2;
  }
  else {
    if (0.0 <= param_2) goto LAB_0059d18c;
    local_10 = 0.0;
  }
  param_2 = 0.0;
  fVar1 = (float)(uVar3 >> 0x10 & 0xff) * *in_ECX + in_ECX[1];
  if (255.0 <= fVar1) {
    param_2 = 255.0;
    fVar1 = param_2;
  }
  else if (fVar1 < 0.0) goto LAB_0059d1d2;
  param_2 = fVar1;
LAB_0059d1d2:
  local_4 = (undefined1)(int)ROUND(param_2);
  param_1[2] = local_4;
  param_1._0_1_ = (undefined1)(int)ROUND(local_10);
  puVar2[1] = param_1._0_1_;
  param_1._0_1_ = (undefined1)(int)ROUND(local_c);
  *puVar2 = param_1._0_1_;
  param_1._0_1_ = (undefined1)(int)ROUND(local_8);
  puVar2[3] = param_1._0_1_;
  return puVar2;
}



============================================================
DISASSEMBLY
============================================================
0059d0a0 : SUB ESP,0x10
0059d0a3 : MOV EDX,dword ptr [ESP + 0x18]
0059d0a7 : MOV EAX,EDX
0059d0a9 : SHR EAX,0x18
0059d0ac : MOV dword ptr [ESP + 0x18],EAX
0059d0b0 : FILD dword ptr [ESP + 0x18]
0059d0b4 : FMUL float ptr [ECX + 0x18]
0059d0b7 : FADD float ptr [ECX + 0x1c]
0059d0ba : FSTP float ptr [ESP + 0x18]
0059d0be : FLD float ptr [ESP + 0x18]
0059d0c2 : FLD double ptr [0x00b86b48]
0059d0c8 : FCOM
0059d0ca : FNSTSW AX
0059d0cc : FLD float ptr [0x00cdf130]
0059d0d2 : FLDZ
0059d0d4 : TEST AH,0x41
0059d0d7 : JNZ 0x0059d0f0
0059d0d9 : FXCH ST3
0059d0db : FST float ptr [ESP + 0x18]
0059d0df : FCOMP ST3
0059d0e1 : FNSTSW AX
0059d0e3 : TEST AH,0x5
0059d0e6 : JP 0x0059d0f6
0059d0e8 : FXCH ST2
0059d0ea : FST float ptr [ESP + 0x8]
0059d0ee : JMP 0x0059d100
0059d0f0 : FSTP ST3
0059d0f2 : FST float ptr [ESP + 0x18]
0059d0f6 : FLD float ptr [ESP + 0x18]
0059d0fa : FSTP float ptr [ESP + 0x8]
0059d0fe : FXCH ST2
0059d100 : FLD float ptr [ECX + 0x10]
0059d103 : MOVZX EAX,DL
0059d106 : MOV dword ptr [ESP + 0x18],EAX
0059d10a : FILD dword ptr [ESP + 0x18]
0059d10e : FMULP
0059d110 : FADD float ptr [ECX + 0x14]
0059d113 : FSTP float ptr [ESP + 0x18]
0059d117 : FLD float ptr [ESP + 0x18]
0059d11b : FCOM ST2
0059d11d : FNSTSW AX
0059d11f : TEST AH,0x5
0059d122 : JP 0x0059d137
0059d124 : FST float ptr [ESP + 0x18]
0059d128 : FCOMP
0059d12a : FNSTSW AX
0059d12c : TEST AH,0x5
0059d12f : JP 0x0059d141
0059d131 : FST float ptr [ESP + 0x4]
0059d135 : JMP 0x0059d149
0059d137 : FSTP ST0
0059d139 : FXCH ST2
0059d13b : FST float ptr [ESP + 0x18]
0059d13f : FXCH ST2
0059d141 : FLD float ptr [ESP + 0x18]
0059d145 : FSTP float ptr [ESP + 0x4]
0059d149 : MOV EAX,EDX
0059d14b : SHR EAX,0x8
0059d14e : MOVZX EAX,AL
0059d151 : MOV dword ptr [ESP + 0x18],EAX
0059d155 : FILD dword ptr [ESP + 0x18]
0059d159 : FMUL float ptr [ECX + 0x8]
0059d15c : FADD float ptr [ECX + 0xc]
0059d15f : FSTP float ptr [ESP + 0x18]
0059d163 : FLD float ptr [ESP + 0x18]
0059d167 : FCOM ST2
0059d169 : FNSTSW AX
0059d16b : TEST AH,0x5
0059d16e : JP 0x0059d182
0059d170 : FST float ptr [ESP + 0x18]
0059d174 : FCOMP
0059d176 : FNSTSW AX
0059d178 : TEST AH,0x5
0059d17b : JP 0x0059d18c
0059d17d : FST float ptr [ESP]
0059d180 : JMP 0x0059d193
0059d182 : FSTP ST0
0059d184 : FXCH ST2
0059d186 : FST float ptr [ESP + 0x18]
0059d18a : FXCH ST2
0059d18c : FLD float ptr [ESP + 0x18]
0059d190 : FSTP float ptr [ESP]
0059d193 : SHR EDX,0x10
0059d196 : MOVZX EDX,DL
0059d199 : MOV dword ptr [ESP + 0x18],EDX
0059d19d : FILD dword ptr [ESP + 0x18]
0059d1a1 : FMUL float ptr [ECX]
0059d1a3 : FADD float ptr [ECX + 0x4]
0059d1a6 : FSTP float ptr [ESP + 0x18]
0059d1aa : FLD float ptr [ESP + 0x18]
0059d1ae : FCOM ST2
0059d1b0 : FNSTSW AX
0059d1b2 : FSTP ST2
0059d1b4 : TEST AH,0x5
0059d1b7 : JP 0x0059d288
0059d1bd : FSTP ST2
0059d1bf : FST float ptr [ESP + 0x18]
0059d1c3 : FCOMP
0059d1c5 : FNSTSW AX
0059d1c7 : TEST AH,0x5
0059d1ca : JNP 0x0059d1d2
0059d1cc : FSTP ST0
0059d1ce : FLD float ptr [ESP + 0x18]
0059d1d2 : MOV ECX,dword ptr [ESP + 0x14]
0059d1d6 : FSTP float ptr [ESP + 0x18]
0059d1da : FLD float ptr [ESP + 0x18]
0059d1de : FNSTCW word ptr [ESP + 0x18]
0059d1e2 : MOVZX EAX,word ptr [ESP + 0x18]
0059d1e7 : OR EAX,0xc00
0059d1ec : MOV dword ptr [ESP + 0xc],EAX
0059d1f0 : FLDCW word ptr [ESP + 0xc]
0059d1f4 : FISTP dword ptr [ESP + 0xc]
0059d1f8 : MOVZX EAX,byte ptr [ESP + 0xc]
0059d1fd : MOV byte ptr [ECX + 0x2],AL
0059d200 : FLDCW word ptr [ESP + 0x18]
0059d204 : FLD float ptr [ESP]
0059d207 : FNSTCW word ptr [ESP + 0x18]
0059d20b : MOVZX EAX,word ptr [ESP + 0x18]
0059d210 : OR EAX,0xc00
0059d215 : MOV dword ptr [ESP + 0x14],EAX
0059d219 : FLDCW word ptr [ESP + 0x14]
0059d21d : FISTP dword ptr [ESP + 0x14]
0059d221 : MOVZX EDX,byte ptr [ESP + 0x14]
0059d226 : MOV byte ptr [ECX + 0x1],DL
0059d229 : FLDCW word ptr [ESP + 0x18]
0059d22d : FLD float ptr [ESP + 0x4]
0059d231 : FNSTCW word ptr [ESP + 0x18]
0059d235 : MOVZX EAX,word ptr [ESP + 0x18]
0059d23a : OR EAX,0xc00
0059d23f : MOV dword ptr [ESP + 0x14],EAX
0059d243 : FLDCW word ptr [ESP + 0x14]
0059d247 : FISTP dword ptr [ESP + 0x14]
0059d24b : MOVZX EAX,byte ptr [ESP + 0x14]
0059d250 : MOV byte ptr [ECX],AL
0059d252 : FLDCW word ptr [ESP + 0x18]
0059d256 : FLD float ptr [ESP + 0x8]
0059d25a : FNSTCW word ptr [ESP + 0x18]
0059d25e : MOVZX EAX,word ptr [ESP + 0x18]
0059d263 : OR EAX,0xc00
0059d268 : MOV dword ptr [ESP + 0x14],EAX
0059d26c : MOV EAX,ECX
0059d26e : FLDCW word ptr [ESP + 0x14]
0059d272 : FISTP dword ptr [ESP + 0x14]
0059d276 : MOVZX EDX,byte ptr [ESP + 0x14]
0059d27b : MOV byte ptr [ECX + 0x3],DL
0059d27e : FLDCW word ptr [ESP + 0x18]
0059d282 : ADD ESP,0x10
0059d285 : RET 0x8
0059d288 : FSTP ST1
0059d28a : FSTP ST0
0059d28c : FSTP float ptr [ESP + 0x18]
0059d290 : JMP 0x0059d1ce
