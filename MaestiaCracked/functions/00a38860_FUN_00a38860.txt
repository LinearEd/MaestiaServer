PROGRAM  : Maestia.exe
FUNCTION : FUN_00a38860
ENTRY    : 00a38860
BODY     : [[00a38860, 00a38b84]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a38860(void)

{
  char cVar1;
  float fVar2;
  int *piVar3;
  int iVar4;
  int in_EAX;
  int iVar5;
  char in_CL;
  undefined4 extraout_ECX;
  int extraout_EDX;
  undefined4 uVar6;
  float fVar7;
  
  iVar4 = DAT_017251ac;
  iVar5 = *(int *)(DAT_017251ac + 0x178);
  fVar2 = (float)*(int *)(iVar5 + 0x48);
  if (*(int *)(iVar5 + 0x48) < 0) {
    fVar2 = fVar2 + 4.2949673e+09;
  }
  fVar7 = (float)*(int *)(iVar5 + 0x4c);
  if (*(int *)(iVar5 + 0x4c) < 0) {
    fVar7 = fVar7 + 4.2949673e+09;
  }
  fVar2 = fVar2 / fVar7;
  *(char *)(in_EAX + 0x5e9) = in_CL;
  uVar6 = DAT_017247a4;
  if (in_CL == '\0') {
    *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x1b8) = DAT_017247a4;
    *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x1c4) = uVar6;
    *(undefined1 *)(*(int *)(in_EAX + 0xc) + 0x1fc) = 1;
    iVar5 = *(int *)(in_EAX + 0x74);
    cVar1 = *(char *)(iVar4 + 0x154);
    *(undefined4 *)(iVar5 + 0x4c) = 0x3f56774d;
    *(float *)(iVar5 + 0x50) = fVar2;
    *(undefined1 *)(iVar5 + 0x155) = 1;
    *(undefined4 *)(iVar5 + 0x54) = 0x3f800000;
    if (cVar1 == '\x01') {
      uVar6 = 0x453b8000;
    }
    else {
      uVar6 = 0x45bb8000;
    }
    *(undefined4 *)(iVar5 + 0x58) = uVar6;
    *(undefined4 *)(iVar5 + 0x5c) = uVar6;
    FUN_007f1490();
    if (*(int *)(in_EAX + 0xc) != 0) {
      *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x2bb4) = *(undefined4 *)(extraout_EDX + 8);
    }
    FUN_007f1400();
    *(undefined4 *)(*(int *)(in_EAX + 0x74) + 0x200) = *(undefined4 *)(in_EAX + 0x224);
    *(undefined4 *)(in_EAX + 0x224) = *(undefined4 *)(*(int *)(in_EAX + 0x74) + 0x208);
    DAT_017247a4 = *(undefined4 *)(*(int *)(in_EAX + 0xc) + 100);
    FUN_008f3350(extraout_ECX,*(undefined2 *)(in_EAX + 0x450));
  }
  else {
    if (*(int *)(in_EAX + 600) != 0) {
      FUN_00a0d390(DAT_017247d4,0);
    }
    uVar6 = DAT_017247a4;
    if (DAT_00da9877 == '\0') {
      fVar7 = 200.0;
      *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x1b8) = DAT_017247a4;
      *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x1c4) = uVar6;
      *(undefined1 *)(*(int *)(in_EAX + 0xc) + 0x1fc) = 0;
      iVar5 = *(int *)(in_EAX + 0x74);
      *(undefined4 *)(iVar5 + 0x4c) = 0x3f490fdb;
      *(float *)(iVar5 + 0x50) = fVar2;
      *(undefined4 *)(iVar5 + 0x54) = 0x3f800000;
      uVar6 = DAT_017247a8;
    }
    else {
      iVar5 = *(int *)(in_EAX + 0xc);
      DAT_017247a4 = *(undefined4 *)(iVar5 + 0x1b8);
      DAT_017247a8 = *(undefined4 *)(iVar5 + 100);
      *(undefined4 *)(iVar5 + 0x1b8) = 0x461c4000;
      *(undefined4 *)(*(int *)(in_EAX + 0xc) + 0x1c4) = 0x461c4000;
      *(undefined1 *)(*(int *)(in_EAX + 0xc) + 0x1fc) = 0;
      iVar5 = *(int *)(in_EAX + 0x74);
      *(undefined4 *)(iVar5 + 0x4c) = 0x3f490fdb;
      *(float *)(iVar5 + 0x50) = fVar2;
      *(undefined4 *)(iVar5 + 0x54) = 0x3f800000;
      fVar7 = 1000.0;
      uVar6 = 0x461c4000;
    }
    *(undefined4 *)(iVar5 + 0x58) = uVar6;
    *(undefined4 *)(iVar5 + 0x5c) = uVar6;
    *(undefined1 *)(iVar5 + 0x155) = 1;
    iVar5 = *(int *)(in_EAX + 0x74);
    if ((*(char *)(iVar5 + 0x1e8) == '\0') && (*(char *)(iVar5 + 0x210) == '\0')) {
      *(float *)(iVar5 + 0x1f8) = fVar7;
      *(undefined4 *)(iVar5 + 500) = 0x41000000;
      if (*(float *)(iVar5 + 0x1fc) <= fVar7) {
        if (*(float *)(iVar5 + 0x1fc) < 8.0) {
          *(undefined4 *)(iVar5 + 0x1fc) = 0x41000000;
        }
      }
      else {
        *(float *)(iVar5 + 0x1fc) = fVar7;
      }
      *(undefined1 *)(iVar5 + 0x154) = 1;
    }
    if (*(int *)(in_EAX + 0xc) != 0) {
      *(float *)(*(int *)(in_EAX + 0xc) + 0x2bb4) = fVar7;
    }
    FUN_007f1400();
    piVar3 = DAT_00da9894;
    *(undefined4 *)(*(int *)(in_EAX + 0x74) + 0x200) = *(undefined4 *)(in_EAX + 0x224);
    *(undefined4 *)(in_EAX + 0x224) = *(undefined4 *)(*(int *)(in_EAX + 0x74) + 0x208);
    iVar5 = *piVar3;
    if (*(int *)(iVar5 + 0x16c) != 0) {
      (**(code **)(**(int **)(iVar5 + 0x16c) + 0x20))();
    }
    if (*(int *)(iVar5 + 300) != 0) {
      FUN_00993bd0();
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a38860 : PUSH EBP
00a38861 : MOV EBP,ESP
00a38863 : MOV EDX,dword ptr [0x017251ac]
00a38869 : SUB ESP,0x8
00a3886c : PUSH ESI
00a3886d : MOV ESI,EAX
00a3886f : MOV EAX,dword ptr [EDX + 0x178]
00a38875 : FILD dword ptr [EAX + 0x48]
00a38878 : PUSH EDI
00a38879 : MOV EDI,dword ptr [EAX + 0x48]
00a3887c : TEST EDI,EDI
00a3887e : JGE 0x00a38886
00a38880 : FADD float ptr [0x00cdf0e0]
00a38886 : MOV EAX,dword ptr [EAX + 0x4c]
00a38889 : MOV dword ptr [EBP + -0x4],EAX
00a3888c : FILD dword ptr [EBP + -0x4]
00a3888f : TEST EAX,EAX
00a38891 : JGE 0x00a38899
00a38893 : FADD float ptr [0x00cdf0e0]
00a38899 : FDIVP
00a3889b : MOV byte ptr [ESI + 0x5e9],CL
00a388a1 : FSTP float ptr [EBP + -0x4]
00a388a4 : TEST CL,CL
00a388a6 : JZ 0x00a38a83
00a388ac : CMP dword ptr [ESI + 0x258],0x0
00a388b3 : JZ 0x00a388c6
00a388b5 : MOV ECX,dword ptr [0x017247d4]
00a388bb : PUSH 0x0
00a388bd : PUSH ECX
00a388be : OR ECX,0xffffffff
00a388c1 : CALL 0x00a0d390
00a388c6 : CMP byte ptr [0x00da9877],0x0
00a388cd : JZ 0x00a38945
00a388cf : MOV EAX,dword ptr [ESI + 0xc]
00a388d2 : MOVSS XMM0,dword ptr [EAX + 0x1b8]
00a388da : MOVSS XMM1,dword ptr [0x00cdf31c]
00a388e2 : MOVSS dword ptr [0x017247a4],XMM0
00a388ea : MOVSS XMM0,dword ptr [EAX + 0x64]
00a388ef : MOVSS dword ptr [0x017247a8],XMM0
00a388f7 : MOVSS XMM0,dword ptr [0x00cdf288]
00a388ff : MOVSS dword ptr [EAX + 0x1b8],XMM0
00a38907 : MOV EDX,dword ptr [ESI + 0xc]
00a3890a : MOVSS dword ptr [EDX + 0x1c4],XMM0
00a38912 : MOV EAX,dword ptr [ESI + 0xc]
00a38915 : MOV byte ptr [EAX + 0x1fc],0x0
00a3891c : MOV EAX,dword ptr [ESI + 0x74]
00a3891f : MOVSS dword ptr [EAX + 0x4c],XMM1
00a38924 : MOVSS XMM1,dword ptr [EBP + -0x4]
00a38929 : MOVSS dword ptr [EAX + 0x50],XMM1
00a3892e : MOVSS XMM1,dword ptr [0x00c10fc4]
00a38936 : MOVSS dword ptr [EAX + 0x54],XMM1
00a3893b : MOVSS XMM1,dword ptr [0x00cdf16c]
00a38943 : JMP 0x00a389a4
00a38945 : MOV ECX,dword ptr [ESI + 0xc]
00a38948 : MOVSS XMM0,dword ptr [0x017247a4]
00a38950 : MOVSS XMM1,dword ptr [0x00c10f24]
00a38958 : MOVSS dword ptr [ECX + 0x1b8],XMM0
00a38960 : MOV EDX,dword ptr [ESI + 0xc]
00a38963 : MOVSS dword ptr [EDX + 0x1c4],XMM0
00a3896b : MOV EAX,dword ptr [ESI + 0xc]
00a3896e : MOVSS XMM0,dword ptr [0x00cdf31c]
00a38976 : MOV byte ptr [EAX + 0x1fc],0x0
00a3897d : MOV EAX,dword ptr [ESI + 0x74]
00a38980 : MOVSS dword ptr [EAX + 0x4c],XMM0
00a38985 : MOVSS XMM0,dword ptr [EBP + -0x4]
00a3898a : MOVSS dword ptr [EAX + 0x50],XMM0
00a3898f : MOVSS XMM0,dword ptr [0x00c10fc4]
00a38997 : MOVSS dword ptr [EAX + 0x54],XMM0
00a3899c : MOVSS XMM0,dword ptr [0x017247a8]
00a389a4 : MOVSS dword ptr [EAX + 0x58],XMM0
00a389a9 : MOVSS dword ptr [EAX + 0x5c],XMM0
00a389ae : MOV ECX,0x1
00a389b3 : MOV byte ptr [EAX + 0x155],CL
00a389b9 : MOV EAX,dword ptr [ESI + 0x74]
00a389bc : CMP byte ptr [EAX + 0x1e8],0x0
00a389c3 : JNZ 0x00a38a10
00a389c5 : CMP byte ptr [EAX + 0x210],0x0
00a389cc : JNZ 0x00a38a10
00a389ce : MOVSS XMM0,dword ptr [EAX + 0x1fc]
00a389d6 : COMISS XMM0,XMM1
00a389d9 : MOVSS XMM2,dword ptr [0x00cdf15c]
00a389e1 : MOVSS dword ptr [EAX + 0x1f8],XMM1
00a389e9 : MOVSS dword ptr [EAX + 0x1f4],XMM2
00a389f1 : JBE 0x00a389fd
00a389f3 : MOVSS dword ptr [EAX + 0x1fc],XMM1
00a389fb : JMP 0x00a38a0a
00a389fd : COMISS XMM2,XMM0
00a38a00 : JBE 0x00a38a0a
00a38a02 : MOVSS dword ptr [EAX + 0x1fc],XMM2
00a38a0a : MOV byte ptr [EAX + 0x154],CL
00a38a10 : MOV EAX,dword ptr [ESI + 0xc]
00a38a13 : TEST EAX,EAX
00a38a15 : JZ 0x00a38a1f
00a38a17 : MOVSS dword ptr [EAX + 0x2bb4],XMM1
00a38a1f : MOV EAX,dword ptr [ESI + 0x74]
00a38a22 : MOVSS XMM1,dword ptr [ESI + 0x224]
00a38a2a : CALL 0x007f1400
00a38a2f : FLD float ptr [ESI + 0x224]
00a38a35 : MOV ECX,dword ptr [ESI + 0x74]
00a38a38 : MOV EAX,[0x00da9894]
00a38a3d : FSTP float ptr [ECX + 0x200]
00a38a43 : MOV EDX,dword ptr [ESI + 0x74]
00a38a46 : FLD float ptr [EDX + 0x208]
00a38a4c : FSTP float ptr [ESI + 0x224]
00a38a52 : MOV ESI,dword ptr [EAX]
00a38a54 : CMP dword ptr [ESI + 0x16c],0x0
00a38a5b : JZ 0x00a38a6a
00a38a5d : MOV ECX,dword ptr [ESI + 0x16c]
00a38a63 : MOV EDX,dword ptr [ECX]
00a38a65 : MOV EAX,dword ptr [EDX + 0x20]
00a38a68 : CALL EAX
00a38a6a : MOV ESI,dword ptr [ESI + 0x12c]
00a38a70 : TEST ESI,ESI
00a38a72 : JZ 0x00a38b7f
00a38a78 : CALL 0x00993bd0
00a38a7d : POP EDI
00a38a7e : POP ESI
00a38a7f : MOV ESP,EBP
00a38a81 : POP EBP
00a38a82 : RET
00a38a83 : MOV ECX,dword ptr [ESI + 0xc]
00a38a86 : MOVSS XMM0,dword ptr [0x017247a4]
00a38a8e : MOVSS XMM2,dword ptr [0x00cdf15c]
00a38a96 : MOVSS dword ptr [ECX + 0x1b8],XMM0
00a38a9e : MOV EAX,dword ptr [ESI + 0xc]
00a38aa1 : MOVSS dword ptr [EAX + 0x1c4],XMM0
00a38aa9 : MOV EAX,dword ptr [ESI + 0xc]
00a38aac : MOVSS XMM0,dword ptr [0x00cdf1f8]
00a38ab4 : MOV ECX,0x1
00a38ab9 : MOV byte ptr [EAX + 0x1fc],CL
00a38abf : MOV EAX,dword ptr [ESI + 0x74]
00a38ac2 : CMP byte ptr [EDX + 0x154],CL
00a38ac8 : MOV EDX,dword ptr [0x017248cc]
00a38ace : MOVSS dword ptr [EAX + 0x4c],XMM0
00a38ad3 : MOVSS XMM0,dword ptr [EBP + -0x4]
00a38ad8 : MOVSS dword ptr [EAX + 0x50],XMM0
00a38add : MOVSS XMM0,dword ptr [0x00c10fc4]
00a38ae5 : MOV byte ptr [EAX + 0x155],CL
00a38aeb : MOVSS dword ptr [EAX + 0x54],XMM0
00a38af0 : JNZ 0x00a38afc
00a38af2 : MOVSS XMM0,dword ptr [0x00cdf1ac]
00a38afa : JMP 0x00a38b04
00a38afc : MOVSS XMM0,dword ptr [0x00cdf88c]
00a38b04 : MOVSS dword ptr [EAX + 0x58],XMM0
00a38b09 : MOVSS dword ptr [EAX + 0x5c],XMM0
00a38b0e : MOV EAX,dword ptr [ESI + 0x74]
00a38b11 : MOVSS XMM1,dword ptr [EDX + 0x8]
00a38b16 : CALL 0x007f1490
00a38b1b : MOV EAX,dword ptr [ESI + 0xc]
00a38b1e : TEST EAX,EAX
00a38b20 : JZ 0x00a38b2b
00a38b22 : FLD float ptr [EDX + 0x8]
00a38b25 : FSTP float ptr [EAX + 0x2bb4]
00a38b2b : MOV EAX,dword ptr [ESI + 0x74]
00a38b2e : MOVSS XMM1,dword ptr [ESI + 0x224]
00a38b36 : CALL 0x007f1400
00a38b3b : FLD float ptr [ESI + 0x224]
00a38b41 : MOV EDX,dword ptr [ESI + 0x74]
00a38b44 : FSTP float ptr [EDX + 0x200]
00a38b4a : MOV EAX,dword ptr [ESI + 0x74]
00a38b4d : FLD float ptr [EAX + 0x208]
00a38b53 : MOVZX EAX,word ptr [ESI + 0x450]
00a38b5a : MOV EDX,dword ptr [ESI + 0xc]
00a38b5d : FSTP float ptr [ESI + 0x224]
00a38b63 : MOVSS XMM0,dword ptr [EDX + 0x64]
00a38b68 : PUSH EAX
00a38b69 : PUSH ECX
00a38b6a : MOV ECX,dword ptr [0x00da9894]
00a38b70 : MOV EDI,dword ptr [ECX]
00a38b72 : MOVSS dword ptr [0x017247a4],XMM0
00a38b7a : CALL 0x008f3350
00a38b7f : POP EDI
00a38b80 : POP ESI
00a38b81 : MOV ESP,EBP
00a38b83 : POP EBP
00a38b84 : RET
