PROGRAM  : Maestia.exe
FUNCTION : FUN_0051f170
ENTRY    : 0051f170
BODY     : [[0051f170, 0051f1cc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051f170(void)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int *in_ECX;
  
  iVar3 = (**(code **)(*in_ECX + 0x40))();
  FUN_0051ddc0(iVar3);
  FUN_0051cf90();
  if (iVar3 != 0) {
    cVar2 = FUN_0050c880(in_ECX);
    if (cVar2 != '\0') {
      piVar1 = *(int **)(iVar3 + 0xad8);
      if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
        FUN_00515cf0(piVar1);
      }
      *(undefined4 *)(iVar3 + 0xad8) = 0;
    }
  }
  if (in_ECX[0x20] != 0) {
    *(undefined4 *)(in_ECX[0x20] + 4) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0051f170 : PUSH ESI
0051f171 : MOV ESI,ECX
0051f173 : MOV EAX,dword ptr [ESI]
0051f175 : MOV EDX,dword ptr [EAX + 0x40]
0051f178 : PUSH EDI
0051f179 : CALL EDX
0051f17b : MOV EDI,EAX
0051f17d : PUSH EDI
0051f17e : MOV ECX,ESI
0051f180 : CALL 0x0051ddc0
0051f185 : CALL 0x0051cf90
0051f18a : TEST EDI,EDI
0051f18c : JZ 0x0051f1b9
0051f18e : PUSH ESI
0051f18f : MOV ECX,EDI
0051f191 : CALL 0x0050c880
0051f196 : TEST AL,AL
0051f198 : JZ 0x0051f1b9
0051f19a : MOV EAX,dword ptr [EDI + 0xad8]
0051f1a0 : TEST EAX,EAX
0051f1a2 : JZ 0x0051f1af
0051f1a4 : ADD dword ptr [EAX],-0x1
0051f1a7 : JNZ 0x0051f1af
0051f1a9 : PUSH EAX
0051f1aa : CALL 0x00515cf0
0051f1af : MOV dword ptr [EDI + 0xad8],0x0
0051f1b9 : MOV ESI,dword ptr [ESI + 0x80]
0051f1bf : TEST ESI,ESI
0051f1c1 : JZ 0x0051f1ca
0051f1c3 : MOV dword ptr [ESI + 0x4],0x0
0051f1ca : POP EDI
0051f1cb : POP ESI
0051f1cc : RET
