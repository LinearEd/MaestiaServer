PROGRAM  : Maestia.exe
FUNCTION : FUN_00a08b70
ENTRY    : 00a08b70
BODY     : [[00a08b70, 00a08c70]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00a08b70(void)

{
  ushort uVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  int *in_ECX;
  undefined1 local_24 [12];
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b47086;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (in_ECX == (int *)0x0) {
    FUN_008018d0(L" AvaItem::GetItemQuality  pItem GetProto ERROR ",
                 DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  }
  else {
    local_14 = in_ECX[4];
    FUN_004437f0(&local_14);
    if ((local_18 != *(int *)(iVar3 + 0x44)) &&
       (piVar2 = *(int **)(local_18 + 0x10), piVar2 != (int *)0x0)) {
      iVar3 = (**(code **)(*piVar2 + 0x40))();
      if (iVar3 != 0) {
        ExceptionList = local_10;
        return piVar2[0x14];
      }
      FUN_0040e750(in_ECX,local_24);
      local_8 = 0;
      uVar4 = (**(code **)(*in_ECX + 0x20))();
      uVar1 = *(ushort *)(piVar2 + 0x14);
      if (uVar1 < 3) {
        uVar5 = FUN_009e7fa0(uVar1,uVar4);
      }
      else {
        uVar5 = (uint)uVar1;
      }
      local_8 = 0xffffffff;
      FUN_0040f3f0(local_24);
      ExceptionList = local_10;
      return uVar5;
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00a08b70 : PUSH EBP
00a08b71 : MOV EBP,ESP
00a08b73 : PUSH -0x1
00a08b75 : PUSH 0xb47086
00a08b7a : MOV EAX,FS:[0x0]
00a08b80 : PUSH EAX
00a08b81 : SUB ESP,0x14
00a08b84 : PUSH EBX
00a08b85 : PUSH ESI
00a08b86 : PUSH EDI
00a08b87 : MOV EAX,[0x00d66fa0]
00a08b8c : XOR EAX,EBP
00a08b8e : PUSH EAX
00a08b8f : LEA EAX,[EBP + -0xc]
00a08b92 : MOV FS:[0x0],EAX
00a08b98 : MOV ESI,ECX
00a08b9a : TEST ESI,ESI
00a08b9c : JNZ 0x00a08bc5
00a08b9e : MOV ESI,dword ptr [0x00da98e8]
00a08ba4 : PUSH 0xcaa988
00a08ba9 : CALL 0x008018d0
00a08bae : ADD ESP,0x4
00a08bb1 : XOR EAX,EAX
00a08bb3 : MOV ECX,dword ptr [EBP + -0xc]
00a08bb6 : MOV dword ptr FS:[0x0],ECX
00a08bbd : POP ECX
00a08bbe : POP EDI
00a08bbf : POP ESI
00a08bc0 : POP EBX
00a08bc1 : MOV ESP,EBP
00a08bc3 : POP EBP
00a08bc4 : RET
00a08bc5 : MOV EAX,dword ptr [ESI + 0x10]
00a08bc8 : MOV EDI,dword ptr [0x00d7c54c]
00a08bce : LEA ECX,[EBP + -0x10]
00a08bd1 : MOV dword ptr [EBP + -0x10],EAX
00a08bd4 : PUSH ECX
00a08bd5 : LEA ECX,[EDI + 0x40]
00a08bd8 : LEA EAX,[EBP + -0x14]
00a08bdb : CALL 0x004437f0
00a08be0 : MOV EDI,dword ptr [EDI + 0x44]
00a08be3 : MOV EAX,dword ptr [EBP + -0x14]
00a08be6 : CMP EAX,EDI
00a08be8 : JZ 0x00a08bb1
00a08bea : MOV EDI,dword ptr [EAX + 0x10]
00a08bed : TEST EDI,EDI
00a08bef : JZ 0x00a08bb1
00a08bf1 : MOV EDX,dword ptr [EDI]
00a08bf3 : MOV EAX,dword ptr [EDX + 0x40]
00a08bf6 : MOV ECX,EDI
00a08bf8 : CALL EAX
00a08bfa : TEST EAX,EAX
00a08bfc : JZ 0x00a08c13
00a08bfe : MOV EAX,dword ptr [EDI + 0x50]
00a08c01 : MOV ECX,dword ptr [EBP + -0xc]
00a08c04 : MOV dword ptr FS:[0x0],ECX
00a08c0b : POP ECX
00a08c0c : POP EDI
00a08c0d : POP ESI
00a08c0e : POP EBX
00a08c0f : MOV ESP,EBP
00a08c11 : POP EBP
00a08c12 : RET
00a08c13 : LEA ECX,[EBP + -0x20]
00a08c16 : PUSH ECX
00a08c17 : PUSH ESI
00a08c18 : CALL 0x0040e750
00a08c1d : MOV dword ptr [EBP + -0x4],0x0
00a08c24 : MOV EDX,dword ptr [ESI]
00a08c26 : MOV EBX,dword ptr [EAX + 0x8]
00a08c29 : MOV EAX,dword ptr [EDX + 0x20]
00a08c2c : MOV ECX,ESI
00a08c2e : CALL EAX
00a08c30 : MOVZX ECX,word ptr [EDI + 0x50]
00a08c34 : CMP CX,0x2
00a08c38 : JA 0x00a08c4a
00a08c3a : PUSH EAX
00a08c3b : PUSH ECX
00a08c3c : MOV EAX,EBX
00a08c3e : CALL 0x009e7fa0
00a08c43 : ADD ESP,0x8
00a08c46 : MOV ESI,EAX
00a08c48 : JMP 0x00a08c4d
00a08c4a : MOVZX ESI,CX
00a08c4d : MOV dword ptr [EBP + -0x4],0xffffffff
00a08c54 : LEA ECX,[EBP + -0x20]
00a08c57 : PUSH ECX
00a08c58 : CALL 0x0040f3f0
00a08c5d : MOV EAX,ESI
00a08c5f : MOV ECX,dword ptr [EBP + -0xc]
00a08c62 : MOV dword ptr FS:[0x0],ECX
00a08c69 : POP ECX
00a08c6a : POP EDI
00a08c6b : POP ESI
00a08c6c : POP EBX
00a08c6d : MOV ESP,EBP
00a08c6f : POP EBP
00a08c70 : RET
