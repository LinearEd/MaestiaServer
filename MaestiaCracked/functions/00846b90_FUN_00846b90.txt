PROGRAM  : Maestia.exe
FUNCTION : FUN_00846b90
ENTRY    : 00846b90
BODY     : [[00846b90, 00846d4f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00846b90(undefined4 param_1,undefined4 param_2)

{
  short sVar1;
  uint uVar2;
  int iVar3;
  short *psVar4;
  undefined4 uVar5;
  short *psVar6;
  undefined1 local_e4 [84];
  undefined1 local_90 [4];
  undefined4 local_8c;
  undefined1 local_88 [4];
  undefined2 local_84;
  undefined4 local_74;
  uint local_70;
  undefined4 local_6c;
  int local_68;
  undefined4 local_64;
  int local_60;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  uVar5 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1b876;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_8c = param_1;
  local_14 = uVar2;
  FUN_004463c0(&local_64);
  local_8 = 0;
  local_64 = uVar5;
  local_6c = uVar5;
  FUN_004437f0(&local_6c);
  if ((local_68 != DAT_017245e4) && (*(int *)(local_68 + 0x10) != 0)) {
    local_60 = *(int *)(local_68 + 0x10);
    iVar3 = FUN_006f0c10(local_88,1);
    local_8._0_1_ = 1;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      psVar6 = (short *)(iVar3 + 4);
    }
    else {
      psVar6 = *(short **)(iVar3 + 4);
    }
    psVar4 = psVar6;
    do {
      sVar1 = *psVar4;
      psVar4 = psVar4 + 1;
    } while (sVar1 != 0);
    FUN_00406360(psVar6,(int)psVar4 - (int)(psVar6 + 1) >> 1);
    local_8._0_1_ = 0;
    if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
    local_84 = 0;
    local_70 = 7;
    local_74 = 0;
    iVar3 = FUN_006f0c10(local_88,1);
    local_8._0_1_ = 2;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      psVar6 = (short *)(iVar3 + 4);
    }
    else {
      psVar6 = *(short **)(iVar3 + 4);
    }
    psVar4 = psVar6;
    do {
      sVar1 = *psVar4;
      psVar4 = psVar4 + 1;
    } while (sVar1 != 0);
    FUN_00406360(psVar6,(int)psVar4 - (int)(psVar6 + 1) >> 1);
    local_8._0_1_ = 0;
    if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_70 = 7;
    local_74 = 0;
    local_84 = 0;
    uVar5 = FUN_00446a70(local_e4,&param_2);
    local_8._0_1_ = 3;
    FUN_004467e0(local_90,uVar5);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_004464b0(local_e4);
  }
  local_8 = 0xffffffff;
  FUN_00446420(&local_64);
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00846b90 : PUSH EBP
00846b91 : MOV EBP,ESP
00846b93 : PUSH -0x1
00846b95 : PUSH 0xb1b876
00846b9a : MOV EAX,FS:[0x0]
00846ba0 : PUSH EAX
00846ba1 : SUB ESP,0xd4
00846ba7 : MOV EAX,[0x00d66fa0]
00846bac : XOR EAX,EBP
00846bae : MOV dword ptr [EBP + -0x10],EAX
00846bb1 : PUSH EBX
00846bb2 : PUSH ESI
00846bb3 : PUSH EDI
00846bb4 : PUSH EAX
00846bb5 : LEA EAX,[EBP + -0xc]
00846bb8 : MOV FS:[0x0],EAX
00846bbe : MOV ESI,dword ptr [EBP + 0xc]
00846bc1 : MOV EAX,dword ptr [EBP + 0x8]
00846bc4 : LEA ECX,[EBP + -0x60]
00846bc7 : PUSH ECX
00846bc8 : MOV dword ptr [EBP + 0xffffff78],EAX
00846bce : CALL 0x004463c0
00846bd3 : XOR EBX,EBX
00846bd5 : MOV dword ptr [EBP + -0x4],EBX
00846bd8 : LEA EDX,[EBP + -0x68]
00846bdb : PUSH EDX
00846bdc : LEA EAX,[EBP + -0x64]
00846bdf : MOV ECX,0x17245e0
00846be4 : MOV dword ptr [EBP + -0x60],ESI
00846be7 : MOV dword ptr [EBP + -0x68],ESI
00846bea : CALL 0x004437f0
00846bef : MOV EAX,dword ptr [EBP + -0x64]
00846bf2 : CMP EAX,dword ptr [0x017245e4]
00846bf8 : JZ 0x00846d22
00846bfe : MOV ESI,dword ptr [EAX + 0x10]
00846c01 : CMP ESI,EBX
00846c03 : JZ 0x00846d22
00846c09 : PUSH 0x1
00846c0b : LEA ECX,[EBP + 0xffffff7c]
00846c11 : MOV dword ptr [EBP + -0x5c],ESI
00846c14 : MOV EDX,dword ptr [ESI + 0x8]
00846c17 : PUSH ECX
00846c18 : MOV ECX,0x1724628
00846c1d : CALL 0x006f0c10
00846c22 : MOV byte ptr [EBP + -0x4],0x1
00846c26 : CMP dword ptr [EAX + 0x18],0x8
00846c2a : JC 0x00846c31
00846c2c : MOV EDX,dword ptr [EAX + 0x4]
00846c2f : JMP 0x00846c34
00846c31 : LEA EDX,[EAX + 0x4]
00846c34 : MOV EAX,EDX
00846c36 : LEA EDI,[EAX + 0x2]
00846c39 : LEA ESP,[ESP]
00846c40 : MOV CX,word ptr [EAX]
00846c43 : ADD EAX,0x2
00846c46 : CMP CX,BX
00846c49 : JNZ 0x00846c40
00846c4b : SUB EAX,EDI
00846c4d : SAR EAX,0x1
00846c4f : PUSH EAX
00846c50 : PUSH EDX
00846c51 : LEA ECX,[EBP + -0x58]
00846c54 : CALL 0x00406360
00846c59 : MOV byte ptr [EBP + -0x4],BL
00846c5c : MOV EDI,0x8
00846c61 : CMP dword ptr [EBP + -0x6c],EDI
00846c64 : JC 0x00846c6e
00846c66 : MOV ECX,dword ptr [EBP + -0x80]
00846c69 : CALL 0x006f04e0
00846c6e : XOR EDX,EDX
00846c70 : PUSH 0x1
00846c72 : LEA EAX,[EBP + 0xffffff7c]
00846c78 : MOV word ptr [EBP + -0x80],DX
00846c7c : MOV EDX,dword ptr [ESI + 0xc]
00846c7f : PUSH EAX
00846c80 : MOV ECX,0x1724628
00846c85 : MOV dword ptr [EBP + -0x6c],0x7
00846c8c : MOV dword ptr [EBP + -0x70],EBX
00846c8f : CALL 0x006f0c10
00846c94 : MOV byte ptr [EBP + -0x4],0x2
00846c98 : CMP dword ptr [EAX + 0x18],EDI
00846c9b : JC 0x00846ca2
00846c9d : MOV EDX,dword ptr [EAX + 0x4]
00846ca0 : JMP 0x00846ca5
00846ca2 : LEA EDX,[EAX + 0x4]
00846ca5 : MOV EAX,EDX
00846ca7 : LEA ESI,[EAX + 0x2]
00846caa : LEA EBX,[EBX]
00846cb0 : MOV CX,word ptr [EAX]
00846cb3 : ADD EAX,0x2
00846cb6 : CMP CX,BX
00846cb9 : JNZ 0x00846cb0
00846cbb : SUB EAX,ESI
00846cbd : SAR EAX,0x1
00846cbf : PUSH EAX
00846cc0 : PUSH EDX
00846cc1 : LEA ECX,[EBP + -0x3c]
00846cc4 : CALL 0x00406360
00846cc9 : MOV byte ptr [EBP + -0x4],BL
00846ccc : CMP dword ptr [EBP + -0x6c],EDI
00846ccf : JC 0x00846cd9
00846cd1 : MOV ECX,dword ptr [EBP + -0x80]
00846cd4 : CALL 0x006f04e0
00846cd9 : LEA EDX,[EBP + 0xc]
00846cdc : PUSH EDX
00846cdd : LEA EAX,[EBP + 0xffffff20]
00846ce3 : XOR ECX,ECX
00846ce5 : PUSH EAX
00846ce6 : LEA EDI,[EBP + -0x60]
00846ce9 : MOV dword ptr [EBP + -0x6c],0x7
00846cf0 : MOV dword ptr [EBP + -0x70],EBX
00846cf3 : MOV word ptr [EBP + -0x80],CX
00846cf7 : CALL 0x00446a70
00846cfc : MOV byte ptr [EBP + -0x4],0x3
00846d00 : PUSH EAX
00846d01 : MOV EAX,dword ptr [EBP + 0xffffff78]
00846d07 : LEA ECX,[EBP + 0xffffff74]
00846d0d : PUSH ECX
00846d0e : CALL 0x004467e0
00846d13 : MOV byte ptr [EBP + -0x4],BL
00846d16 : LEA EDX,[EBP + 0xffffff20]
00846d1c : PUSH EDX
00846d1d : CALL 0x004464b0
00846d22 : MOV dword ptr [EBP + -0x4],0xffffffff
00846d29 : LEA EAX,[EBP + -0x60]
00846d2c : PUSH EAX
00846d2d : CALL 0x00446420
00846d32 : MOV ECX,dword ptr [EBP + -0xc]
00846d35 : MOV dword ptr FS:[0x0],ECX
00846d3c : POP ECX
00846d3d : POP EDI
00846d3e : POP ESI
00846d3f : POP EBX
00846d40 : MOV ECX,dword ptr [EBP + -0x10]
00846d43 : XOR ECX,EBP
00846d45 : CALL 0x00633e6b
00846d4a : MOV ESP,EBP
00846d4c : POP EBP
00846d4d : RET 0x8
