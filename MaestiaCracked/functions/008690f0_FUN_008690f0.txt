PROGRAM  : Maestia.exe
FUNCTION : FUN_008690f0
ENTRY    : 008690f0
BODY     : [[008690f0, 008692a2] [008692a9, 00869315] [0086931c, 00869332] [0086933d, 00869353] [0086935e, 00869374] [0086937f, 00869449]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008690f0(void)

{
  uint uVar1;
  int iVar2;
  int in_ECX;
  uint uVar3;
  int *piVar4;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined1 local_8;
  undefined3 uStack_7;
  
  puStack_c = &LAB_00b62fa0;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  *(undefined ***)(in_ECX + -0x1ec0) = &PTR_FUN_00cd2810;
  *(undefined ***)(*(int *)(*(int *)(in_ECX + -0x1d88) + 4) + -0x1d88 + in_ECX) = &PTR_FUN_00cd2d18;
  *(undefined ***)(*(int *)(*(int *)(in_ECX + -0x1d88) + 8) + -0x1d88 + in_ECX) = &PTR_LAB_00cd2d2c;
  iVar2 = *(int *)(*(int *)(in_ECX + -0x1d88) + 8);
  *(int *)(iVar2 + -0x1d8c + in_ECX) = iVar2 + -0x1e24;
  local_8 = 0x14;
  uStack_7 = 0;
  if (*(char *)(in_ECX + -0x1b2f) != '\0') {
    FUN_00406460(L"!!!! AvaPlayerCharacter::~AvaPlayerCharacter()");
    local_8 = 0x15;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaPlayerCharacter::~AvaPlayerCharacter",0xf9,local_48);
    }
    local_8 = 0x14;
    if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_30 = 7;
    local_34 = 0;
    local_44 = 0;
  }
  local_8 = 0x14;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + -0x1d78);
  local_20 = 0;
  local_28 = ".\\Objects\\AvaPlayerCharacter.cpp";
  local_24 = 0xfd;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  _local_8 = CONCAT31(uStack_7,0x16);
  iVar2 = *(int *)(in_ECX + -0x35c);
  while (iVar2 != 0) {
    piVar4 = *(int **)(in_ECX + -0x378);
    uVar3 = *(uint *)(in_ECX + -0x360) >> 2;
    if (piVar4 == (int *)0x0) {
      iVar2 = 0;
    }
    else {
      iVar2 = *piVar4;
    }
    if (*(uint *)(iVar2 + 0x14) <= uVar3) {
      if (piVar4 == (int *)0x0) {
        iVar2 = 0;
      }
      else {
        iVar2 = *piVar4;
      }
      uVar3 = uVar3 - *(int *)(iVar2 + 0x14);
    }
    if (piVar4 == (int *)0x0) {
      iVar2 = 0;
    }
    else {
      iVar2 = *piVar4;
    }
    piVar4 = *(int **)(*(int *)(*(int *)(iVar2 + 0x10) + uVar3 * 4) +
                      (*(uint *)(in_ECX + -0x360) & 3) * 4);
    if (*(int *)(in_ECX + -0x35c) != 0) {
      *(int *)(in_ECX + -0x360) = *(int *)(in_ECX + -0x360) + 1;
      if ((uint)(*(int *)(in_ECX + -0x364) * 4) <= *(uint *)(in_ECX + -0x360)) {
        *(undefined4 *)(in_ECX + -0x360) = 0;
      }
      iVar2 = *(int *)(in_ECX + -0x35c) + -1;
      *(int *)(in_ECX + -0x35c) = iVar2;
      if (iVar2 == 0) {
        *(undefined4 *)(in_ECX + -0x360) = 0;
      }
    }
    if (piVar4 != (int *)0x0) {
      iVar2 = *piVar4;
      if (iVar2 == 0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      FUN_004451c0(iVar2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar2 = *(int *)(in_ECX + -0x35c);
  }
  _local_8 = CONCAT31(uStack_7,0x14);
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
    local_20 = 0;
  }
  piVar4 = (int *)(in_ECX + -0x6d0);
  iVar2 = 0x21;
  do {
    if ((undefined4 *)*piVar4 != (undefined4 *)0x0) {
      (*(code *)**(undefined4 **)*piVar4)(1,uVar1);
      *piVar4 = 0;
    }
    piVar4 = piVar4 + 1;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  if (*(int *)(in_ECX + -0x618) != 0) {
    FUN_0083bc30(*(int *)(in_ECX + -0x618));
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if (*(int *)(in_ECX + -0x614) != 0) {
    FUN_0089dc00(*(int *)(in_ECX + -0x614));
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  if (*(int *)(in_ECX + -0x60c) == 0) {
    if (*(int *)(in_ECX + -0x608) == 0) {
      uStack_7 = (undefined3)((uint)_local_8 >> 8);
      local_14 = in_ECX + -0xa8;
      local_8 = 0x13;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x118;
      local_8 = 0x12;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x188;
      local_8 = 0x11;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x1f8;
      local_8 = 0x10;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x268;
      local_8 = 0xf;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x2d8;
      local_8 = 0xe;
      FUN_0043e3e0();
      local_14 = in_ECX + -0x348;
      local_8 = 0xd;
      FUN_0043e3e0();
      local_8 = 0xc;
      FUN_00443a70(in_ECX + -0x358);
      local_14 = in_ECX + -0x378;
      local_8 = 0x1e;
      FUN_00476f00();
      _local_8 = CONCAT31(uStack_7,0xb);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    FUN_0083a6e0(*(int *)(in_ECX + -0x608));
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  FUN_0087e410(*(int *)(in_ECX + -0x60c));
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008690f0 : PUSH EBP
008690f1 : MOV EBP,ESP
008690f3 : PUSH -0x1
008690f5 : PUSH 0xb62fa0
008690fa : MOV EAX,FS:[0x0]
00869100 : PUSH EAX
00869101 : SUB ESP,0x3c
00869104 : PUSH EBX
00869105 : PUSH ESI
00869106 : PUSH EDI
00869107 : MOV EAX,[0x00d66fa0]
0086910c : XOR EAX,EBP
0086910e : PUSH EAX
0086910f : LEA EAX,[EBP + -0xc]
00869112 : MOV FS:[0x0],EAX
00869118 : MOV EDI,ECX
0086911a : MOV dword ptr [EBP + -0x14],EDI
0086911d : MOV EAX,dword ptr [EDI + 0xffffe278]
00869123 : MOV dword ptr [EDI + 0xffffe140],0xcd2810
0086912d : MOV ECX,dword ptr [EAX + 0x4]
00869130 : MOV dword ptr [ECX + EDI*0x1 + 0xffffe278],0xcd2d18
0086913b : MOV EDX,dword ptr [EDI + 0xffffe278]
00869141 : MOV EAX,dword ptr [EDX + 0x8]
00869144 : MOV dword ptr [EAX + EDI*0x1 + 0xffffe278],0xcd2d2c
0086914f : MOV ECX,dword ptr [EDI + 0xffffe278]
00869155 : MOV EAX,dword ptr [ECX + 0x8]
00869158 : LEA EDX,[EAX + 0xffffe1dc]
0086915e : MOV dword ptr [EAX + EDI*0x1 + 0xffffe274],EDX
00869165 : MOV dword ptr [EBP + -0x4],0x14
0086916c : MOV AL,byte ptr [EDI + 0xffffe4d1]
00869172 : TEST AL,AL
00869174 : JZ 0x008691cd
00869176 : PUSH 0xc3dae0
0086917b : LEA ECX,[EBP + -0x44]
0086917e : CALL 0x00406460
00869183 : MOV byte ptr [EBP + -0x4],0x15
00869187 : MOV EAX,[0x00da98e8]
0086918c : MOV ECX,dword ptr [EAX]
0086918e : TEST ECX,ECX
00869190 : JZ 0x008691a7
00869192 : MOV EDX,dword ptr [ECX]
00869194 : MOV EDX,dword ptr [EDX + 0x14]
00869197 : LEA EAX,[EBP + -0x44]
0086919a : PUSH EAX
0086919b : PUSH 0xf9
008691a0 : PUSH 0xc3db40
008691a5 : CALL EDX
008691a7 : MOV byte ptr [EBP + -0x4],0x14
008691ab : CMP dword ptr [EBP + -0x2c],0x8
008691af : JC 0x008691b9
008691b1 : MOV ECX,dword ptr [EBP + -0x40]
008691b4 : CALL 0x006f04e0
008691b9 : XOR EAX,EAX
008691bb : MOV dword ptr [EBP + -0x2c],0x7
008691c2 : MOV dword ptr [EBP + -0x30],0x0
008691c9 : MOV word ptr [EBP + -0x40],AX
008691cd : LEA EDX,[EBP + -0x28]
008691d0 : LEA ECX,[EDI + 0xffffe288]
008691d6 : PUSH EDX
008691d7 : MOV dword ptr [EBP + -0x1c],0x0
008691de : MOV dword ptr [EBP + -0x28],ECX
008691e1 : MOV dword ptr [EBP + -0x24],0xc3db90
008691e8 : MOV dword ptr [EBP + -0x20],0xfd
008691ef : MOV dword ptr [EBP + -0x18],0x1
008691f6 : CALL 0x006ef1a0
008691fb : MOV byte ptr [EBP + -0x4],0x16
008691ff : CMP dword ptr [EDI + 0xfffffca4],0x0
00869206 : JZ 0x008692bd
0086920c : MOV EAX,dword ptr [EDI + 0xfffffca0]
00869212 : MOV EDX,dword ptr [EDI + 0xfffffc88]
00869218 : MOV ECX,EAX
0086921a : SHR ECX,0x2
0086921d : AND EAX,0x3
00869220 : TEST EDX,EDX
00869222 : JZ 0x00869228
00869224 : MOV ESI,dword ptr [EDX]
00869226 : JMP 0x0086922a
00869228 : XOR ESI,ESI
0086922a : CMP dword ptr [ESI + 0x14],ECX
0086922d : JA 0x0086923c
0086922f : TEST EDX,EDX
00869231 : JZ 0x00869237
00869233 : MOV ESI,dword ptr [EDX]
00869235 : JMP 0x00869239
00869237 : XOR ESI,ESI
00869239 : SUB ECX,dword ptr [ESI + 0x14]
0086923c : TEST EDX,EDX
0086923e : JZ 0x00869244
00869240 : MOV EDX,dword ptr [EDX]
00869242 : JMP 0x00869246
00869244 : XOR EDX,EDX
00869246 : MOV EDX,dword ptr [EDX + 0x10]
00869249 : MOV ECX,dword ptr [EDX + ECX*0x4]
0086924c : MOV EBX,dword ptr [ECX + EAX*0x4]
0086924f : MOV EAX,dword ptr [EDI + 0xfffffca4]
00869255 : XOR EDX,EDX
00869257 : CMP EAX,EDX
00869259 : JZ 0x0086928c
0086925b : MOV ESI,dword ptr [EDI + 0xfffffc9c]
00869261 : INC dword ptr [EDI + 0xfffffca0]
00869267 : MOV ECX,dword ptr [EDI + 0xfffffca0]
0086926d : ADD ESI,ESI
0086926f : ADD ESI,ESI
00869271 : CMP ESI,ECX
00869273 : JA 0x0086927b
00869275 : MOV dword ptr [EDI + 0xfffffca0],EDX
0086927b : DEC EAX
0086927c : MOV dword ptr [EDI + 0xfffffca4],EAX
00869282 : CMP EAX,EDX
00869284 : JNZ 0x0086928c
00869286 : MOV dword ptr [EDI + 0xfffffca0],EDX
0086928c : CMP EBX,EDX
0086928e : JZ 0x008692b0
00869290 : MOV ESI,dword ptr [EBX]
00869292 : CMP ESI,EDX
00869294 : JZ 0x008692a9
00869296 : PUSH ESI
00869297 : CALL 0x004451c0
0086929c : MOV ECX,ESI
0086929e : CALL 0x006f04e0
008692a9 : MOV ECX,EBX
008692ab : CALL 0x006f04e0
008692b0 : CMP dword ptr [EDI + 0xfffffca4],0x0
008692b7 : JNZ 0x0086920c
008692bd : MOV byte ptr [EBP + -0x4],0x14
008692c1 : CMP dword ptr [EBP + -0x1c],0x0
008692c5 : JZ 0x008692d8
008692c7 : MOV EDX,dword ptr [EBP + -0x28]
008692ca : PUSH EDX
008692cb : CALL dword ptr [0x00b8511c]
008692d1 : MOV dword ptr [EBP + -0x1c],0x0
008692d8 : LEA ESI,[EDI + 0xfffff930]
008692de : MOV EBX,0x21
008692e3 : MOV ECX,dword ptr [ESI]
008692e5 : TEST ECX,ECX
008692e7 : JZ 0x008692f7
008692e9 : MOV EAX,dword ptr [ECX]
008692eb : MOV EDX,dword ptr [EAX]
008692ed : PUSH 0x1
008692ef : CALL EDX
008692f1 : MOV dword ptr [ESI],0x0
008692f7 : ADD ESI,0x4
008692fa : SUB EBX,0x1
008692fd : JNZ 0x008692e3
008692ff : MOV ESI,dword ptr [EDI + 0xfffff9e8]
00869305 : TEST ESI,ESI
00869307 : JZ 0x0086931c
00869309 : PUSH ESI
0086930a : CALL 0x0083bc30
0086930f : MOV ECX,ESI
00869311 : CALL 0x006f04e0
0086931c : MOV ESI,dword ptr [EDI + 0xfffff9ec]
00869322 : TEST ESI,ESI
00869324 : JZ 0x0086933d
00869326 : PUSH ESI
00869327 : CALL 0x0089dc00
0086932c : MOV ECX,ESI
0086932e : CALL 0x006f04e0
0086933d : MOV ESI,dword ptr [EDI + 0xfffff9f4]
00869343 : TEST ESI,ESI
00869345 : JZ 0x0086935e
00869347 : PUSH ESI
00869348 : CALL 0x0087e410
0086934d : MOV ECX,ESI
0086934f : CALL 0x006f04e0
0086935e : MOV ESI,dword ptr [EDI + 0xfffff9f8]
00869364 : TEST ESI,ESI
00869366 : JZ 0x0086937f
00869368 : PUSH ESI
00869369 : CALL 0x0083a6e0
0086936e : MOV ECX,ESI
00869370 : CALL 0x006f04e0
0086937f : MOV AL,0x13
00869381 : MOV byte ptr [EBP + -0x4],AL
00869384 : LEA ECX,[EDI + 0xffffff58]
0086938a : MOV dword ptr [EBP + -0x10],ECX
0086938d : MOV byte ptr [EBP + -0x4],AL
00869390 : CALL 0x0043e3e0
00869395 : MOV AL,0x12
00869397 : MOV byte ptr [EBP + -0x4],AL
0086939a : LEA ECX,[EDI + 0xfffffee8]
008693a0 : MOV dword ptr [EBP + -0x10],ECX
008693a3 : MOV byte ptr [EBP + -0x4],AL
008693a6 : CALL 0x0043e3e0
008693ab : MOV AL,0x11
008693ad : MOV byte ptr [EBP + -0x4],AL
008693b0 : LEA ECX,[EDI + 0xfffffe78]
008693b6 : MOV dword ptr [EBP + -0x10],ECX
008693b9 : MOV byte ptr [EBP + -0x4],AL
008693bc : CALL 0x0043e3e0
008693c1 : MOV AL,0x10
008693c3 : MOV byte ptr [EBP + -0x4],AL
008693c6 : LEA ECX,[EDI + 0xfffffe08]
008693cc : MOV dword ptr [EBP + -0x10],ECX
008693cf : MOV byte ptr [EBP + -0x4],AL
008693d2 : CALL 0x0043e3e0
008693d7 : MOV AL,0xf
008693d9 : MOV byte ptr [EBP + -0x4],AL
008693dc : LEA ECX,[EDI + 0xfffffd98]
008693e2 : MOV dword ptr [EBP + -0x10],ECX
008693e5 : MOV byte ptr [EBP + -0x4],AL
008693e8 : CALL 0x0043e3e0
008693ed : MOV AL,0xe
008693ef : MOV byte ptr [EBP + -0x4],AL
008693f2 : LEA ECX,[EDI + 0xfffffd28]
008693f8 : MOV dword ptr [EBP + -0x10],ECX
008693fb : MOV byte ptr [EBP + -0x4],AL
008693fe : CALL 0x0043e3e0
00869403 : MOV AL,0xd
00869405 : MOV byte ptr [EBP + -0x4],AL
00869408 : LEA ECX,[EDI + 0xfffffcb8]
0086940e : MOV dword ptr [EBP + -0x10],ECX
00869411 : MOV byte ptr [EBP + -0x4],AL
00869414 : CALL 0x0043e3e0
00869419 : MOV byte ptr [EBP + -0x4],0xc
0086941d : LEA EAX,[EDI + 0xfffffca8]
00869423 : PUSH EAX
00869424 : CALL 0x00443a70
00869429 : MOV BL,0xb
0086942b : MOV byte ptr [EBP + -0x4],BL
0086942e : LEA ESI,[EDI + 0xfffffc88]
00869434 : MOV dword ptr [EBP + -0x10],ESI
00869437 : MOV byte ptr [EBP + -0x4],0x1e
0086943b : CALL 0x00476f00
00869440 : MOV byte ptr [EBP + -0x4],BL
00869443 : MOV ECX,dword ptr [ESI]
00869445 : CALL 0x006f04e0
