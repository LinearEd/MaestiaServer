PROGRAM  : Maestia.exe
FUNCTION : FUN_009f2530
ENTRY    : 009f2530
BODY     : [[009f2530, 009f25bc] [009f25c0, 009f264e]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_009f2530(void)

{
  char cVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint uVar6;
  int in_ECX;
  int unaff_EDI;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  undefined4 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0f68a;
  local_10 = ExceptionList;
  uVar6 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_28 = (LPCRITICAL_SECTION)(in_ECX + 0x18);
  local_1c = 0;
  local_24 = ".\\Items\\AvaItemManager.cpp";
  local_20 = 0x1fc;
  local_18 = 1;
  FUN_006ef1a0(&local_28);
  local_8 = 0;
  puVar2 = *(undefined4 **)(in_ECX + 8);
  local_14 = (undefined4 *)*puVar2;
  do {
    if (local_14 == puVar2) {
      local_8 = 0xffffffff;
      if (local_1c != 0) {
        LeaveCriticalSection(local_28);
      }
      ExceptionList = local_10;
      return 0;
    }
    puVar3 = (undefined4 *)**(undefined4 **)(local_14[4] + 0xc);
    while (puVar3 != *(undefined4 **)(local_14[4] + 0xc)) {
      if (unaff_EDI == puVar3[4]) {
        local_8 = 0xffffffff;
        if (local_1c != 0) {
          LeaveCriticalSection(local_28);
        }
        ExceptionList = local_10;
        return 1;
      }
      if (*(char *)((int)puVar3 + 0x15) == '\0') {
        puVar4 = (undefined4 *)puVar3[2];
        if (*(char *)((int)puVar4 + 0x15) == '\0') {
          cVar1 = *(char *)((int)*puVar4 + 0x15);
          puVar3 = puVar4;
          puVar4 = (undefined4 *)*puVar4;
          while (cVar1 == '\0') {
            cVar1 = *(char *)((int)*puVar4 + 0x15);
            puVar3 = puVar4;
            puVar4 = (undefined4 *)*puVar4;
          }
        }
        else {
          cVar1 = *(char *)((int)puVar3[1] + 0x15);
          puVar5 = (undefined4 *)puVar3[1];
          puVar4 = puVar3;
          while ((puVar3 = puVar5, cVar1 == '\0' && (puVar4 == (undefined4 *)puVar3[2]))) {
            cVar1 = *(char *)((int)puVar3[1] + 0x15);
            puVar5 = (undefined4 *)puVar3[1];
            puVar4 = puVar3;
          }
        }
      }
    }
    FUN_00416210(uVar6);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
009f2530 : PUSH EBP
009f2531 : MOV EBP,ESP
009f2533 : PUSH -0x1
009f2535 : PUSH 0xb0f68a
009f253a : MOV EAX,FS:[0x0]
009f2540 : PUSH EAX
009f2541 : SUB ESP,0x18
009f2544 : PUSH EBX
009f2545 : PUSH ESI
009f2546 : MOV EAX,[0x00d66fa0]
009f254b : XOR EAX,EBP
009f254d : PUSH EAX
009f254e : LEA EAX,[EBP + -0xc]
009f2551 : MOV FS:[0x0],EAX
009f2557 : MOV ESI,ECX
009f2559 : LEA ECX,[EBP + -0x24]
009f255c : LEA EAX,[ESI + 0x18]
009f255f : XOR EBX,EBX
009f2561 : PUSH ECX
009f2562 : MOV dword ptr [EBP + -0x18],EBX
009f2565 : MOV dword ptr [EBP + -0x24],EAX
009f2568 : MOV dword ptr [EBP + -0x20],0xca53e4
009f256f : MOV dword ptr [EBP + -0x1c],0x1fc
009f2576 : MOV dword ptr [EBP + -0x14],0x1
009f257d : CALL 0x006ef1a0
009f2582 : MOV dword ptr [EBP + -0x4],EBX
009f2585 : MOV ESI,dword ptr [ESI + 0x8]
009f2588 : MOV EAX,dword ptr [ESI]
009f258a : MOV dword ptr [EBP + -0x10],EAX
009f258d : CMP EAX,ESI
009f258f : JZ 0x009f25f7
009f2591 : MOV EAX,dword ptr [EAX + 0x10]
009f2594 : MOV EDX,dword ptr [EAX + 0xc]
009f2597 : MOV ECX,dword ptr [EDX]
009f2599 : CMP ECX,EDX
009f259b : JZ 0x009f25e8
009f259d : LEA ECX,[ECX]
009f25a0 : CMP EDI,dword ptr [ECX + 0x10]
009f25a3 : JZ 0x009f2623
009f25a5 : CMP byte ptr [ECX + 0x15],BL
009f25a8 : JNZ 0x009f25e4
009f25aa : MOV EAX,dword ptr [ECX + 0x8]
009f25ad : CMP byte ptr [EAX + 0x15],BL
009f25b0 : JNZ 0x009f25cb
009f25b2 : MOV ECX,EAX
009f25b4 : MOV EAX,dword ptr [ECX]
009f25b6 : CMP byte ptr [EAX + 0x15],BL
009f25b9 : JNZ 0x009f25e4
009f25bb : JMP 0x009f25c0
009f25c0 : MOV ECX,EAX
009f25c2 : MOV EAX,dword ptr [ECX]
009f25c4 : CMP byte ptr [EAX + 0x15],BL
009f25c7 : JZ 0x009f25c0
009f25c9 : JMP 0x009f25e4
009f25cb : MOV EAX,dword ptr [ECX + 0x4]
009f25ce : CMP byte ptr [EAX + 0x15],BL
009f25d1 : JNZ 0x009f25e2
009f25d3 : CMP ECX,dword ptr [EAX + 0x8]
009f25d6 : JNZ 0x009f25e2
009f25d8 : MOV ECX,EAX
009f25da : MOV EAX,dword ptr [EAX + 0x4]
009f25dd : CMP byte ptr [EAX + 0x15],BL
009f25e0 : JZ 0x009f25d3
009f25e2 : MOV ECX,EAX
009f25e4 : CMP ECX,EDX
009f25e6 : JNZ 0x009f25a0
009f25e8 : LEA EDX,[EBP + -0x10]
009f25eb : CALL 0x00416210
009f25f0 : MOV EAX,dword ptr [EBP + -0x10]
009f25f3 : CMP EAX,ESI
009f25f5 : JNZ 0x009f2591
009f25f7 : MOV dword ptr [EBP + -0x4],0xffffffff
009f25fe : CMP dword ptr [EBP + -0x18],EBX
009f2601 : JZ 0x009f2610
009f2603 : MOV EAX,dword ptr [EBP + -0x24]
009f2606 : PUSH EAX
009f2607 : CALL dword ptr [0x00b8511c]
009f260d : MOV dword ptr [EBP + -0x18],EBX
009f2610 : XOR AL,AL
009f2612 : MOV ECX,dword ptr [EBP + -0xc]
009f2615 : MOV dword ptr FS:[0x0],ECX
009f261c : POP ECX
009f261d : POP ESI
009f261e : POP EBX
009f261f : MOV ESP,EBP
009f2621 : POP EBP
009f2622 : RET
009f2623 : MOV dword ptr [EBP + -0x4],0xffffffff
009f262a : CMP dword ptr [EBP + -0x18],EBX
009f262d : JZ 0x009f263c
009f262f : MOV EDX,dword ptr [EBP + -0x24]
009f2632 : PUSH EDX
009f2633 : CALL dword ptr [0x00b8511c]
009f2639 : MOV dword ptr [EBP + -0x18],EBX
009f263c : MOV AL,0x1
009f263e : MOV ECX,dword ptr [EBP + -0xc]
009f2641 : MOV dword ptr FS:[0x0],ECX
009f2648 : POP ECX
009f2649 : POP ESI
009f264a : POP EBX
009f264b : MOV ESP,EBP
009f264d : POP EBP
009f264e : RET
