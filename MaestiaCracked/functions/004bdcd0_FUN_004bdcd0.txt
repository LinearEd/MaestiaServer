PROGRAM  : Maestia.exe
FUNCTION : FUN_004bdcd0
ENTRY    : 004bdcd0
BODY     : [[004bdcd0, 004bde68] [004bde75, 004bde98] [004bdef2, 004bdfae] [004bdfd4, 004be05f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004bdcd0(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined4 *puVar6;
  int iVar7;
  undefined4 *puVar8;
  uint uStack_250;
  uint local_230;
  uint local_22c;
  undefined4 local_220 [129];
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7d046;
  local_10 = ExceptionList;
  uStack_250 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_250;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_230 = 0;
  }
  else {
    local_230 = (*(int *)(param_1 + 0xc) - iVar2) / 0x208;
  }
  iVar7 = *(int *)(param_1 + 8);
  iVar2 = (iVar7 - iVar2) / 0x208;
  local_1c = uStack_250;
  puVar1 = &uStack_250;
  if (iVar2 == 0x7e07e0) {
    iVar2 = FUN_00429be0();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_230 < uVar3) {
    if (0x7e07e0 - (local_230 >> 1) < local_230) {
      local_230 = 0;
    }
    else {
      local_230 = local_230 + (local_230 >> 1);
    }
    if (local_230 < uVar3) {
      local_230 = uVar3;
    }
    iVar2 = FUN_0047eca0();
    local_8 = 0;
    FUN_004bdca0();
    FUN_004be060(*(undefined4 *)(param_1 + 4),param_2);
    FUN_004be060(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_0047ed40();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_230 * 0x208 + iVar2;
    *(int *)(param_1 + 8) =
         ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x208 + 1) * 0x208 + iVar2;
    *(int *)(param_1 + 4) = iVar2;
  }
  else {
    iVar7 = iVar7 - param_2;
    iVar2 = iVar7 >> 0x1f;
    puVar6 = (undefined4 *)(param_3 + 8);
    puVar8 = local_220;
    for (iVar5 = 0x80; iVar5 != 0; iVar5 = iVar5 + -1) {
      *puVar8 = *puVar6;
      puVar6 = puVar6 + 1;
      puVar8 = puVar8 + 1;
    }
    if (iVar7 / 0x208 + iVar2 == iVar2) {
      local_8 = 2;
      FUN_004be060(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_004bdca0();
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x208;
      FUN_004be130(*(int *)(param_1 + 8) + -0x208);
    }
    else {
      local_8 = 5;
      uVar4 = FUN_004be060(*(int *)(param_1 + 8) + -0x208,*(int *)(param_1 + 8));
      *(undefined4 *)(param_1 + 8) = uVar4;
      local_22c = param_3 & 0xffffff00;
      FUN_004be180(param_2,local_22c,local_22c,local_22c);
      FUN_004be130(param_2 + 0x208);
    }
  }
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_1c ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
004bdcd0 : PUSH EBP
004bdcd1 : MOV EBP,ESP
004bdcd3 : PUSH -0x1
004bdcd5 : PUSH 0xb7d046
004bdcda : MOV EAX,FS:[0x0]
004bdce0 : PUSH EAX
004bdce1 : SUB ESP,0x230
004bdce7 : MOV EAX,[0x00d66fa0]
004bdcec : XOR EAX,EBP
004bdcee : MOV dword ptr [EBP + -0x18],EAX
004bdcf1 : PUSH EBX
004bdcf2 : PUSH ESI
004bdcf3 : PUSH EDI
004bdcf4 : PUSH EAX
004bdcf5 : LEA EAX,[EBP + -0xc]
004bdcf8 : MOV FS:[0x0],EAX
004bdcfe : MOV dword ptr [EBP + -0x10],ESP
004bdd01 : MOV EBX,dword ptr [EBP + 0x8]
004bdd04 : MOV dword ptr [EBP + 0xfffffdd0],EBX
004bdd0a : MOV EAX,dword ptr [EBP + 0x10]
004bdd0d : MOV dword ptr [EBP + 0xfffffdd8],EAX
004bdd13 : MOV ECX,dword ptr [EBX + 0x4]
004bdd16 : TEST ECX,ECX
004bdd18 : JNZ 0x004bdd1e
004bdd1a : XOR ESI,ESI
004bdd1c : JMP 0x004bdd36
004bdd1e : MOV EDX,dword ptr [EBX + 0xc]
004bdd21 : SUB EDX,ECX
004bdd23 : MOV EAX,0x7e07e07f
004bdd28 : IMUL EDX
004bdd2a : SAR EDX,0x8
004bdd2d : MOV EAX,EDX
004bdd2f : SHR EAX,0x1f
004bdd32 : ADD EAX,EDX
004bdd34 : MOV ESI,EAX
004bdd36 : MOV EDI,dword ptr [EBX + 0x8]
004bdd39 : MOV EDX,EDI
004bdd3b : SUB EDX,ECX
004bdd3d : MOV EAX,0x7e07e07f
004bdd42 : IMUL EDX
004bdd44 : SAR EDX,0x8
004bdd47 : MOV EAX,EDX
004bdd49 : SHR EAX,0x1f
004bdd4c : ADD EAX,EDX
004bdd4e : MOV ECX,0x7e07e0
004bdd53 : SUB ECX,EAX
004bdd55 : CMP ECX,0x1
004bdd58 : JNC 0x004bdd5f
004bdd5a : CALL 0x00429be0
004bdd5f : INC EAX
004bdd60 : CMP ESI,EAX
004bdd62 : JNC 0x004bdef2
004bdd68 : MOV ECX,ESI
004bdd6a : SHR ECX,0x1
004bdd6c : MOV EDX,0x7e07e0
004bdd71 : SUB EDX,ECX
004bdd73 : CMP EDX,ESI
004bdd75 : JNC 0x004bdd89
004bdd77 : MOV dword ptr [EBP + 0xfffffdd4],0x0
004bdd81 : MOV ESI,dword ptr [EBP + 0xfffffdd4]
004bdd87 : JMP 0x004bdd91
004bdd89 : ADD ESI,ECX
004bdd8b : MOV dword ptr [EBP + 0xfffffdd4],ESI
004bdd91 : CMP ESI,EAX
004bdd93 : JNC 0x004bdd9d
004bdd95 : MOV dword ptr [EBP + 0xfffffdd4],EAX
004bdd9b : MOV ESI,EAX
004bdd9d : MOV ECX,ESI
004bdd9f : CALL 0x0047eca0
004bdda4 : MOV ESI,EAX
004bdda6 : MOV dword ptr [EBP + 0xfffffdc8],ESI
004bddac : MOV ECX,dword ptr [EBP + 0xc]
004bddaf : SUB ECX,dword ptr [EBX + 0x4]
004bddb2 : MOV EAX,0x7e07e07f
004bddb7 : IMUL ECX
004bddb9 : SAR EDX,0x8
004bddbc : MOV EDI,EDX
004bddbe : SHR EDI,0x1f
004bddc1 : ADD EDI,EDX
004bddc3 : MOV dword ptr [EBP + 0xfffffdd0],EDI
004bddc9 : XOR EAX,EAX
004bddcb : MOV dword ptr [EBP + 0xfffffdcc],EAX
004bddd1 : MOV dword ptr [EBP + -0x4],EAX
004bddd4 : IMUL EDI,EDI,0x208
004bddda : ADD EDI,ESI
004bdddc : MOV EDX,dword ptr [EBP + 0xfffffdd8]
004bdde2 : LEA ESI,[EAX + 0x1]
004bdde5 : CALL 0x004bdca0
004bddea : MOV dword ptr [EBP + 0xfffffdcc],ESI
004bddf0 : MOV EAX,dword ptr [EBP + 0xc]
004bddf3 : PUSH EAX
004bddf4 : MOV ECX,dword ptr [EBX + 0x4]
004bddf7 : PUSH ECX
004bddf8 : MOV EDI,dword ptr [EBP + 0xfffffdc8]
004bddfe : MOV EDX,EDI
004bde00 : CALL 0x004be060
004bde05 : MOV dword ptr [EBP + 0xfffffdcc],0x2
004bde0f : MOV EDX,dword ptr [EBP + 0xfffffdd0]
004bde15 : INC EDX
004bde16 : IMUL EDX,EDX,0x208
004bde1c : ADD EDX,EDI
004bde1e : MOV EAX,dword ptr [EBX + 0x8]
004bde21 : PUSH EAX
004bde22 : MOV ECX,dword ptr [EBP + 0xc]
004bde25 : PUSH ECX
004bde26 : CALL 0x004be060
004bde2b : MOV dword ptr [EBP + -0x4],0xffffffff
004bde32 : MOV ECX,dword ptr [EBX + 0x8]
004bde35 : MOV ESI,dword ptr [EBX + 0x4]
004bde38 : SUB ECX,ESI
004bde3a : MOV EAX,0x7e07e07f
004bde3f : IMUL ECX
004bde41 : SAR EDX,0x8
004bde44 : MOV EAX,EDX
004bde46 : SHR EAX,0x1f
004bde49 : LEA EDX,[EDX + EAX*0x1 + 0x1]
004bde4d : MOV dword ptr [EBP + 0xfffffdd8],EDX
004bde53 : TEST ESI,ESI
004bde55 : JZ 0x004bde75
004bde57 : MOV EDI,dword ptr [EBX + 0x8]
004bde5a : MOV EAX,ESI
004bde5c : CALL 0x0047ed40
004bde61 : MOV ECX,dword ptr [EBX + 0x4]
004bde64 : CALL 0x006f04e0
004bde75 : MOV EAX,dword ptr [EBP + 0xfffffdd4]
004bde7b : IMUL EAX,EAX,0x208
004bde81 : ADD EAX,EDI
004bde83 : MOV dword ptr [EBX + 0xc],EAX
004bde86 : IMUL EDX,EDX,0x208
004bde8c : ADD EDX,EDI
004bde8e : MOV dword ptr [EBX + 0x8],EDX
004bde91 : MOV dword ptr [EBX + 0x4],EDI
004bde94 : JMP 0x004be042
004bdef2 : SUB EDI,dword ptr [EBP + 0xc]
004bdef5 : MOV EAX,0x7e07e07f
004bdefa : IMUL EDI
004bdefc : SAR EDX,0x8
004bdeff : MOV ECX,EDX
004bdf01 : SHR ECX,0x1f
004bdf04 : ADD ECX,EDX
004bdf06 : MOV dword ptr [EBP + 0xfffffddc],0xcd083c
004bdf10 : MOV EAX,dword ptr [EBP + 0xfffffdd8]
004bdf16 : LEA EDI,[EBP + 0xfffffde4]
004bdf1c : MOV EDX,dword ptr [EAX + 0x4]
004bdf1f : LEA ESI,[EAX + 0x8]
004bdf22 : MOV dword ptr [EBP + 0xfffffde0],EDX
004bdf28 : CMP ECX,0x1
004bdf2b : MOV ECX,0x80
004bdf30 : MOVSD.REP ES:EDI,ESI
004bdf32 : JNC 0x004bdfd4
004bdf38 : MOV dword ptr [EBP + -0x4],0x2
004bdf3f : MOV EAX,dword ptr [EBP + 0xc]
004bdf42 : LEA EDX,[EAX + 0x208]
004bdf48 : MOV ECX,dword ptr [EBX + 0x8]
004bdf4b : PUSH ECX
004bdf4c : PUSH EAX
004bdf4d : CALL 0x004be060
004bdf52 : MOV byte ptr [EBP + -0x4],0x3
004bdf56 : MOV EDI,dword ptr [EBX + 0x8]
004bdf59 : MOV ECX,EDI
004bdf5b : SUB ECX,dword ptr [EBP + 0xc]
004bdf5e : MOV EAX,0x7e07e07f
004bdf63 : IMUL ECX
004bdf65 : SAR EDX,0x8
004bdf68 : MOV EAX,EDX
004bdf6a : SHR EAX,0x1f
004bdf6d : ADD EAX,EDX
004bdf6f : MOV ESI,0x1
004bdf74 : SUB ESI,EAX
004bdf76 : LEA EDX,[EBP + 0xfffffddc]
004bdf7c : CALL 0x004bdca0
004bdf81 : MOV dword ptr [EBP + -0x4],0x2
004bdf88 : ADD dword ptr [EBX + 0x8],0x208
004bdf8f : MOV EBX,dword ptr [EBX + 0x8]
004bdf92 : LEA EAX,[EBX + 0xfffffdf8]
004bdf98 : PUSH EAX
004bdf99 : LEA EDI,[EBP + 0xfffffddc]
004bdf9f : MOV ECX,dword ptr [EBP + 0xc]
004bdfa2 : CALL 0x004be130
004bdfa7 : ADD ESP,0x4
004bdfaa : JMP 0x004be031
004bdfd4 : MOV dword ptr [EBP + -0x4],0x5
004bdfdb : MOV ESI,dword ptr [EBX + 0x8]
004bdfde : LEA EDI,[ESI + 0xfffffdf8]
004bdfe4 : PUSH ESI
004bdfe5 : PUSH EDI
004bdfe6 : MOV EDX,ESI
004bdfe8 : CALL 0x004be060
004bdfed : MOV dword ptr [EBX + 0x8],EAX
004bdff0 : MOV byte ptr [EBP + 0xfffffdd8],0x0
004bdff7 : MOV EAX,dword ptr [EBP + 0xfffffdd8]
004bdffd : PUSH EAX
004bdffe : MOV ECX,dword ptr [EBP + 0xfffffdd8]
004be004 : PUSH ECX
004be005 : MOV EDX,dword ptr [EBP + 0xfffffdd8]
004be00b : PUSH EDX
004be00c : MOV EAX,dword ptr [EBP + 0xc]
004be00f : PUSH EAX
004be010 : MOV EAX,ESI
004be012 : MOV ECX,EDI
004be014 : CALL 0x004be180
004be019 : MOV ECX,dword ptr [EBP + 0xc]
004be01c : LEA EDX,[ECX + 0x208]
004be022 : PUSH EDX
004be023 : LEA EDI,[EBP + 0xfffffddc]
004be029 : CALL 0x004be130
004be02e : ADD ESP,0x14
004be031 : MOV dword ptr [EBP + -0x4],0xffffffff
004be038 : MOV dword ptr [EBP + 0xfffffddc],0xcd083c
004be042 : MOV ECX,dword ptr [EBP + -0xc]
004be045 : MOV dword ptr FS:[0x0],ECX
004be04c : POP ECX
004be04d : POP EDI
004be04e : POP ESI
004be04f : POP EBX
004be050 : MOV ECX,dword ptr [EBP + -0x18]
004be053 : XOR ECX,EBP
004be055 : CALL 0x00633e6b
004be05a : MOV ESP,EBP
004be05c : POP EBP
004be05d : RET 0xc
