PROGRAM  : Maestia.exe
FUNCTION : FUN_006ddca0
ENTRY    : 006ddca0
BODY     : [[006ddca0, 006ddd5c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006ddca0(uint param_1)

{
  int *piVar1;
  int iVar2;
  int in_EAX;
  int in_ECX;
  uint uVar3;
  uint uVar4;
  
  iVar2 = *(int *)(in_ECX + 0x1c);
  if (in_EAX == 0) {
    *(undefined4 *)(**(int **)(in_ECX + 0x20) + 0x14) = 0x28;
    (**(code **)**(undefined4 **)(in_ECX + 0x20))(*(undefined4 **)(in_ECX + 0x20));
  }
  if (*(char *)(in_ECX + 0xc) == '\0') {
    uVar3 = iVar2 + in_EAX;
    uVar4 = ((1 << ((byte)in_EAX & 0x1f)) - 1U & param_1) << (0x18U - (char)uVar3 & 0x1f) |
            *(uint *)(in_ECX + 0x18);
    if (7 < (int)uVar3) {
      param_1 = uVar3 >> 3;
      uVar3 = uVar3 + param_1 * -8;
      do {
        **(undefined1 **)(in_ECX + 0x10) = (char)(uVar4 >> 0x10);
        *(int *)(in_ECX + 0x10) = *(int *)(in_ECX + 0x10) + 1;
        piVar1 = (int *)(in_ECX + 0x14);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 == 0) {
          FUN_006ddc60();
        }
        if (((int)uVar4 >> 0x10 & 0xffU) == 0xff) {
          **(undefined1 **)(in_ECX + 0x10) = 0;
          *(int *)(in_ECX + 0x10) = *(int *)(in_ECX + 0x10) + 1;
          piVar1 = (int *)(in_ECX + 0x14);
          *piVar1 = *piVar1 + -1;
          if (*piVar1 == 0) {
            FUN_006ddc60();
          }
        }
        uVar4 = uVar4 << 8;
        param_1 = param_1 - 1;
      } while (param_1 != 0);
    }
    *(uint *)(in_ECX + 0x18) = uVar4;
    *(uint *)(in_ECX + 0x1c) = uVar3;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006ddca0 : PUSH EBX
006ddca1 : PUSH EBP
006ddca2 : PUSH ESI
006ddca3 : MOV EBX,EAX
006ddca5 : MOV ESI,ECX
006ddca7 : MOV EBP,dword ptr [ESI + 0x1c]
006ddcaa : TEST EBX,EBX
006ddcac : JNZ 0x006ddcc7
006ddcae : MOV EAX,dword ptr [ESI + 0x20]
006ddcb1 : MOV ECX,dword ptr [EAX]
006ddcb3 : MOV dword ptr [ECX + 0x14],0x28
006ddcba : MOV EAX,dword ptr [ESI + 0x20]
006ddcbd : MOV EDX,dword ptr [EAX]
006ddcbf : PUSH EAX
006ddcc0 : MOV EAX,dword ptr [EDX]
006ddcc2 : CALL EAX
006ddcc4 : ADD ESP,0x4
006ddcc7 : CMP byte ptr [ESI + 0xc],0x0
006ddccb : JNZ 0x006ddd59
006ddcd1 : PUSH EDI
006ddcd2 : MOV EDX,0x1
006ddcd7 : MOV ECX,EBX
006ddcd9 : MOV EDI,EDX
006ddcdb : SHL EDI,CL
006ddcdd : ADD EBP,EBX
006ddcdf : MOV ECX,0x18
006ddce4 : SUB ECX,EBP
006ddce6 : SUB EDI,EDX
006ddce8 : AND EDI,dword ptr [ESP + 0x14]
006ddcec : SHL EDI,CL
006ddcee : OR EDI,dword ptr [ESI + 0x18]
006ddcf1 : CMP EBP,0x8
006ddcf4 : JL 0x006ddd52
006ddcf6 : MOV EAX,EBP
006ddcf8 : SHR EAX,0x3
006ddcfb : MOV dword ptr [ESP + 0x14],EAX
006ddcff : NEG EAX
006ddd01 : LEA EBP,[EBP + EAX*0x8]
006ddd05 : MOV ECX,dword ptr [ESI + 0x10]
006ddd08 : MOV EBX,EDI
006ddd0a : SAR EBX,0x10
006ddd0d : AND EBX,0xff
006ddd13 : MOV byte ptr [ECX],BL
006ddd15 : ADD dword ptr [ESI + 0x10],EDX
006ddd18 : ADD dword ptr [ESI + 0x14],-0x1
006ddd1c : JNZ 0x006ddd28
006ddd1e : CALL 0x006ddc60
006ddd23 : MOV EDX,0x1
006ddd28 : CMP EBX,0xff
006ddd2e : JNZ 0x006ddd49
006ddd30 : MOV EAX,dword ptr [ESI + 0x10]
006ddd33 : MOV byte ptr [EAX],0x0
006ddd36 : ADD dword ptr [ESI + 0x10],EDX
006ddd39 : ADD dword ptr [ESI + 0x14],-0x1
006ddd3d : JNZ 0x006ddd49
006ddd3f : CALL 0x006ddc60
006ddd44 : MOV EDX,0x1
006ddd49 : SHL EDI,0x8
006ddd4c : SUB dword ptr [ESP + 0x14],EDX
006ddd50 : JNZ 0x006ddd05
006ddd52 : MOV dword ptr [ESI + 0x18],EDI
006ddd55 : MOV dword ptr [ESI + 0x1c],EBP
006ddd58 : POP EDI
006ddd59 : POP ESI
006ddd5a : POP EBP
006ddd5b : POP EBX
006ddd5c : RET
