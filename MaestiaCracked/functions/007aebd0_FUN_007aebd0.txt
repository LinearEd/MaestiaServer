PROGRAM  : Maestia.exe
FUNCTION : FUN_007aebd0
ENTRY    : 007aebd0
BODY     : [[007aebd0, 007aee8b]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_007aebd0(undefined4 **param_1,undefined1 *param_2,int *param_3,int param_4,int param_5)

{
  int iVar1;
  undefined4 *puVar2;
  LPCRITICAL_SECTION lpCriticalSection;
  undefined4 *puVar3;
  float fVar4;
  undefined4 uVar5;
  undefined2 uVar6;
  undefined2 *puVar7;
  int iVar8;
  int *piVar9;
  char cVar10;
  int iVar11;
  undefined2 *puVar12;
  int in_ECX;
  int iVar13;
  undefined4 **local_50;
  int *local_4c;
  undefined1 **local_48;
  int *local_30;
  undefined1 *local_2c [2];
  int local_24;
  int local_20;
  LPCRITICAL_SECTION local_1c;
  int local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  piVar9 = param_3;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3c576;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(char *)(in_ECX + 700) != '\0') && (*(char *)(in_ECX + 0x2bd) != '\0')) {
    lpCriticalSection = (LPCRITICAL_SECTION)(in_ECX + 0x2470);
    param_3 = (int *)0x0;
    local_48 = (undefined1 **)0x7aec27;
    local_1c = lpCriticalSection;
    EnterCriticalSection(lpCriticalSection);
    local_8 = 0;
    local_18 = *(int *)(in_ECX + 0x378);
    local_48 = (undefined1 **)0x0;
    local_4c = (int *)&param_3;
    local_50 = &local_30;
    local_30 = (int *)param_1;
    local_2c[0] = param_2;
    cVar10 = FUN_007ac0b0();
    if (cVar10 != '\0') {
      local_48 = local_2c;
      local_4c = &local_20;
      local_50 = (undefined4 **)&local_24;
      FUN_007deaf0();
      local_20 = FUN_0045ea30();
      iVar13 = param_5;
      if (local_20 == 0) {
        local_48 = (undefined1 **)0x7aecd7;
        FUN_008018d0();
        local_8 = 0xffffffff;
        local_48 = (undefined1 **)0x7aeceb;
        LeaveCriticalSection(local_1c);
        ExceptionList = local_10;
        return 0;
      }
      local_24 = (*(int *)(local_20 + 0xc) - *(int *)(local_20 + 8)) / 7;
      if (0 < local_24) {
        puVar7 = *(undefined2 **)(local_20 + 8);
        puVar12 = *(undefined2 **)(param_5 + 4);
        **(int **)(param_4 + 4) = (int)param_3;
        *puVar12 = *puVar7;
        *piVar9 = *piVar9 + 1;
        local_2c[0] = (undefined1 *)&local_50;
        local_50 = param_1;
        local_4c = (int *)0x461c4000;
        local_48 = (undefined1 **)param_2;
        param_3 = (int *)0x0;
        FUN_007ae8a0(local_18,&param_3);
        if (0 < (int)param_3) {
          param_1 = (undefined4 **)0x0;
          iVar11 = 0;
          do {
            fVar4 = *(float *)(*(int *)(local_18 + iVar11 * 4) + 0x20);
            iVar1 = iVar11 + 1;
            *(float *)(*(int *)(param_4 + 4) + 4 + iVar11 * 4) = fVar4;
            iVar8 = iVar11 * 2;
            if (iVar1 < local_24) {
              *(undefined2 *)(iVar8 + 2 + *(int *)(iVar13 + 4)) =
                   *(undefined2 *)((int)param_1 + 7 + *(int *)(local_20 + 8));
              iVar13 = param_5;
            }
            else {
              *(short *)(iVar8 + 2 + *(int *)(iVar13 + 4)) = (short)(int)(fVar4 + 32767.0);
            }
            if (fVar4 < *(float *)(*(int *)(param_4 + 4) + iVar11 * 4)) {
              puVar3 = (undefined4 *)(*(int *)(param_4 + 4) + iVar11 * 4);
              puVar2 = puVar3 + 1;
              if (puVar3 != puVar2) {
                uVar5 = *puVar3;
                *puVar3 = *puVar2;
                *puVar2 = uVar5;
              }
              puVar12 = (undefined2 *)(*(int *)(iVar13 + 4) + iVar8);
              puVar7 = puVar12 + 1;
              if (puVar12 != puVar7) {
                uVar6 = *puVar12;
                *puVar12 = *puVar7;
                *puVar7 = uVar6;
              }
            }
            *piVar9 = *piVar9 + 1;
            param_1 = (undefined4 **)((int)param_1 + 7);
            iVar11 = iVar1;
          } while (iVar1 < (int)param_3);
        }
      }
      local_8 = 0xffffffff;
      local_48 = (undefined1 **)0x7aee76;
      LeaveCriticalSection(local_1c);
      ExceptionList = local_10;
      return 1;
    }
    local_8 = 0xffffffff;
    local_48 = (undefined1 **)0x7aec6f;
    LeaveCriticalSection(lpCriticalSection);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
007aebd0 : PUSH EBP
007aebd1 : MOV EBP,ESP
007aebd3 : PUSH -0x1
007aebd5 : PUSH 0xb3c576
007aebda : MOV EAX,FS:[0x0]
007aebe0 : PUSH EAX
007aebe1 : SUB ESP,0x20
007aebe4 : PUSH EBX
007aebe5 : PUSH ESI
007aebe6 : PUSH EDI
007aebe7 : MOV EAX,[0x00d66fa0]
007aebec : XOR EAX,EBP
007aebee : PUSH EAX
007aebef : LEA EAX,[EBP + -0xc]
007aebf2 : MOV FS:[0x0],EAX
007aebf8 : MOV EBX,dword ptr [EBP + 0x10]
007aebfb : MOV EDI,ECX
007aebfd : CMP byte ptr [EDI + 0x2bc],0x0
007aec04 : JZ 0x007aec6f
007aec06 : CMP byte ptr [EDI + 0x2bd],0x0
007aec0d : JZ 0x007aec6f
007aec0f : XORPS XMM0,XMM0
007aec12 : LEA ESI,[EDI + 0x2470]
007aec18 : PUSH ESI
007aec19 : MOVSS dword ptr [EBP + 0x10],XMM0
007aec1e : MOV dword ptr [EBP + -0x18],ESI
007aec21 : CALL dword ptr [0x00b85118]
007aec27 : MOV dword ptr [EBP + -0x4],0x0
007aec2e : MOVSS XMM0,dword ptr [EBP + 0x8]
007aec33 : MOV EAX,dword ptr [EDI + 0x378]
007aec39 : PUSH 0x0
007aec3b : PUSH 0x0
007aec3d : LEA ECX,[EBP + 0x10]
007aec40 : PUSH ECX
007aec41 : LEA EDX,[EBP + -0x2c]
007aec44 : PUSH EDX
007aec45 : MOVSS dword ptr [EBP + -0x2c],XMM0
007aec4a : MOVSS XMM0,dword ptr [EBP + 0xc]
007aec4f : PUSH EDI
007aec50 : MOV dword ptr [EBP + -0x14],EAX
007aec53 : MOVSS dword ptr [EBP + -0x28],XMM0
007aec58 : CALL 0x007ac0b0
007aec5d : TEST AL,AL
007aec5f : JNZ 0x007aec85
007aec61 : MOV dword ptr [EBP + -0x4],0xffffffff
007aec68 : PUSH ESI
007aec69 : CALL dword ptr [0x00b8511c]
007aec6f : XOR AL,AL
007aec71 : MOV ECX,dword ptr [EBP + -0xc]
007aec74 : MOV dword ptr FS:[0x0],ECX
007aec7b : POP ECX
007aec7c : POP EDI
007aec7d : POP ESI
007aec7e : POP EBX
007aec7f : MOV ESP,EBP
007aec81 : POP EBP
007aec82 : RET 0x14
007aec85 : FLD float ptr [EBP + 0xc]
007aec88 : LEA EAX,[EBP + -0x24]
007aec8b : PUSH EAX
007aec8c : LEA ECX,[EBP + -0x28]
007aec8f : PUSH ECX
007aec90 : MOV ECX,dword ptr [EDI + 0x278]
007aec96 : LEA EDX,[EBP + -0x1c]
007aec99 : PUSH EDX
007aec9a : LEA EAX,[EBP + -0x20]
007aec9d : PUSH EAX
007aec9e : SUB ESP,0x8
007aeca1 : FSTP float ptr [ESP + 0x4]
007aeca5 : FLD float ptr [EBP + 0x8]
007aeca8 : FSTP float ptr [ESP]
007aecab : PUSH ECX
007aecac : CALL 0x007deaf0
007aecb1 : MOV ESI,dword ptr [EBP + -0x1c]
007aecb4 : MOV EDX,dword ptr [EBP + -0x20]
007aecb7 : MOV ECX,EDI
007aecb9 : CALL 0x0045ea30
007aecbe : MOV ESI,EAX
007aecc0 : MOV dword ptr [EBP + -0x1c],ESI
007aecc3 : TEST ESI,ESI
007aecc5 : JNZ 0x007aed01
007aecc7 : MOV ESI,dword ptr [0x00da98e8]
007aeccd : PUSH 0xc18270
007aecd2 : CALL 0x008018d0
007aecd7 : ADD ESP,0x4
007aecda : MOV dword ptr [EBP + -0x4],0xffffffff
007aece1 : MOV EDX,dword ptr [EBP + -0x18]
007aece4 : PUSH EDX
007aece5 : CALL dword ptr [0x00b8511c]
007aeceb : XOR AL,AL
007aeced : MOV ECX,dword ptr [EBP + -0xc]
007aecf0 : MOV dword ptr FS:[0x0],ECX
007aecf7 : POP ECX
007aecf8 : POP EDI
007aecf9 : POP ESI
007aecfa : POP EBX
007aecfb : MOV ESP,EBP
007aecfd : POP EBP
007aecfe : RET 0x14
007aed01 : MOV ECX,dword ptr [ESI + 0xc]
007aed04 : SUB ECX,dword ptr [ESI + 0x8]
007aed07 : MOV EAX,0x92492493
007aed0c : IMUL ECX
007aed0e : ADD EDX,ECX
007aed10 : SAR EDX,0x2
007aed13 : MOV EAX,EDX
007aed15 : SHR EAX,0x1f
007aed18 : ADD EAX,EDX
007aed1a : CMP EAX,0x1
007aed1d : MOV dword ptr [EBP + -0x20],EAX
007aed20 : JL 0x007aee65
007aed26 : MOV EDX,dword ptr [ESI + 0x8]
007aed29 : MOV EAX,dword ptr [EBP + 0x14]
007aed2c : MOV ECX,dword ptr [EAX + 0x4]
007aed2f : MOVSS XMM0,dword ptr [EBP + 0x10]
007aed34 : MOV ESI,dword ptr [EBP + 0x18]
007aed37 : MOV EAX,dword ptr [ESI + 0x4]
007aed3a : MOVSS XMM1,dword ptr [0x00cdf0d0]
007aed42 : MOVSS dword ptr [ECX],XMM0
007aed46 : MOV CX,word ptr [EDX]
007aed49 : MOVSS XMM0,dword ptr [EBP + 0x8]
007aed4e : MOV word ptr [EAX],CX
007aed51 : INC dword ptr [EBX]
007aed53 : PUSH 0x0
007aed55 : SUB ESP,0xc
007aed58 : MOV EAX,ESP
007aed5a : MOVSS dword ptr [EAX],XMM0
007aed5e : MOVSS XMM0,dword ptr [0x00cdf288]
007aed66 : MOVSS dword ptr [EAX + 0x4],XMM0
007aed6b : MOVSS XMM0,dword ptr [EBP + 0xc]
007aed70 : MOVSS dword ptr [EAX + 0x8],XMM0
007aed75 : XORPS XMM0,XMM0
007aed78 : MOV dword ptr [EBP + -0x28],ESP
007aed7b : SUB ESP,0xc
007aed7e : MOV EAX,ESP
007aed80 : MOV dword ptr [EBP + 0x8],ESP
007aed83 : LEA EDX,[EBP + 0x10]
007aed86 : MOVSS dword ptr [EAX],XMM0
007aed8a : MOVSS dword ptr [EAX + 0x4],XMM1
007aed8f : MOVSS dword ptr [EAX + 0x8],XMM0
007aed94 : MOV EAX,dword ptr [EBP + -0x14]
007aed97 : PUSH EDX
007aed98 : PUSH EAX
007aed99 : MOV ECX,EDI
007aed9b : MOV dword ptr [EBP + 0x10],0x0
007aeda2 : CALL 0x007ae8a0
007aeda7 : XOR EAX,EAX
007aeda9 : CMP dword ptr [EBP + 0x10],EAX
007aedac : JLE 0x007aee65
007aedb2 : MOVSS XMM1,dword ptr [0x00cdf18c]
007aedba : MOV dword ptr [EBP + 0x8],EAX
007aedbd : LEA ECX,[ECX]
007aedc0 : MOV ECX,dword ptr [EBP + -0x14]
007aedc3 : MOV EDX,dword ptr [ECX + EAX*0x4]
007aedc6 : MOV ECX,dword ptr [EBP + 0x14]
007aedc9 : MOVSS XMM0,dword ptr [EDX + 0x20]
007aedce : MOV EDX,dword ptr [ECX + 0x4]
007aedd1 : LEA ECX,[EAX + 0x1]
007aedd4 : CMP ECX,dword ptr [EBP + -0x20]
007aedd7 : MOV dword ptr [EBP + 0xc],ECX
007aedda : MOVSS dword ptr [EDX + EAX*0x4 + 0x4],XMM0
007aede0 : LEA ECX,[EAX + EAX*0x1]
007aede3 : JGE 0x007aee00
007aede5 : MOV EDX,dword ptr [EBP + -0x1c]
007aede8 : MOV EDX,dword ptr [EDX + 0x8]
007aedeb : MOV EDI,dword ptr [EBP + 0x8]
007aedee : MOV ESI,dword ptr [ESI + 0x4]
007aedf1 : MOV DX,word ptr [EDI + EDX*0x1 + 0x7]
007aedf6 : MOV word ptr [ECX + ESI*0x1 + 0x2],DX
007aedfb : MOV ESI,dword ptr [EBP + 0x18]
007aedfe : JMP 0x007aee13
007aee00 : MOV EDI,dword ptr [ESI + 0x4]
007aee03 : MOVAPS XMM2,XMM0
007aee06 : ADDSS XMM2,XMM1
007aee0a : CVTTSS2SI EDX,XMM2
007aee0e : MOV word ptr [ECX + EDI*0x1 + 0x2],DX
007aee13 : MOV EDX,dword ptr [EBP + 0x14]
007aee16 : MOV EDI,dword ptr [EDX + 0x4]
007aee19 : MOVSS XMM2,dword ptr [EDI + EAX*0x4]
007aee1e : COMISS XMM2,XMM0
007aee21 : JBE 0x007aee53
007aee23 : MOV EDX,EDI
007aee25 : LEA EAX,[EDX + EAX*0x4]
007aee28 : LEA EDX,[EAX + 0x4]
007aee2b : CMP EAX,EDX
007aee2d : JZ 0x007aee3b
007aee2f : FLD float ptr [EDX]
007aee31 : MOVSS XMM0,dword ptr [EAX]
007aee35 : FSTP float ptr [EAX]
007aee37 : MOVSS dword ptr [EDX],XMM0
007aee3b : MOV EAX,dword ptr [ESI + 0x4]
007aee3e : ADD EAX,ECX
007aee40 : LEA ECX,[EAX + 0x2]
007aee43 : CMP EAX,ECX
007aee45 : JZ 0x007aee53
007aee47 : MOVZX EDX,word ptr [EAX]
007aee4a : MOV DI,word ptr [ECX]
007aee4d : MOV word ptr [EAX],DI
007aee50 : MOV word ptr [ECX],DX
007aee53 : MOV EAX,dword ptr [EBP + 0xc]
007aee56 : INC dword ptr [EBX]
007aee58 : ADD dword ptr [EBP + 0x8],0x7
007aee5c : CMP EAX,dword ptr [EBP + 0x10]
007aee5f : JL 0x007aedc0
007aee65 : MOV dword ptr [EBP + -0x4],0xffffffff
007aee6c : MOV ECX,dword ptr [EBP + -0x18]
007aee6f : PUSH ECX
007aee70 : CALL dword ptr [0x00b8511c]
007aee76 : MOV AL,0x1
007aee78 : MOV ECX,dword ptr [EBP + -0xc]
007aee7b : MOV dword ptr FS:[0x0],ECX
007aee82 : POP ECX
007aee83 : POP EDI
007aee84 : POP ESI
007aee85 : POP EBX
007aee86 : MOV ESP,EBP
007aee88 : POP EBP
007aee89 : RET 0x14
