PROGRAM  : Maestia.exe
FUNCTION : FUN_005c2cf0
ENTRY    : 005c2cf0
BODY     : [[005c2cf0, 005c2f70]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c2cf0(undefined4 param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  int in_ECX;
  undefined4 extraout_ECX;
  uint extraout_ECX_00;
  uint uVar4;
  uint uVar5;
  int unaff_EBX;
  bool bVar6;
  undefined8 uVar7;
  uint local_8;
  
  uVar7 = __alldvrm(param_1,param_2,86400000,0);
  *(undefined4 *)(in_ECX + 0x38) = extraout_ECX;
  iVar2 = __alldvrm(uVar7,0x23ab1,0);
  *(int *)(in_ECX + 0x3c) = iVar2 * 400 + 0x7b2;
  local_8 = extraout_ECX_00;
  if (param_2 < 0) {
    while( true ) {
      iVar2 = unaff_EBX;
      uVar5 = local_8;
      if (unaff_EBX < 0) {
        iVar2 = -(unaff_EBX + (uint)(local_8 != 0));
        uVar5 = -local_8;
      }
      uVar4 = *(uint *)(in_ECX + 0x3c);
      uVar3 = uVar4 & 0x80000003;
      if ((int)uVar3 < 0) {
        uVar3 = (uVar3 - 1 | 0xfffffffc) + 1;
      }
      if ((uVar3 == 0) &&
         ((uVar4 != ((int)uVar4 / 100) * 100 || (uVar4 == ((int)uVar4 / 400) * 400)))) {
        bVar1 = 1;
      }
      else {
        bVar1 = 0;
      }
      if ((iVar2 < 0) || ((iVar2 < 1 && (uVar5 < bVar1 + 0x16d)))) break;
      uVar4 = uVar4 - 1;
      uVar5 = uVar4 & 0x80000003;
      bVar6 = uVar5 == 0;
      *(uint *)(in_ECX + 0x3c) = uVar4;
      if ((int)uVar5 < 0) {
        bVar6 = (uVar5 - 1 | 0xfffffffc) == 0xffffffff;
      }
      if ((bVar6) && ((uVar4 != ((int)uVar4 / 100) * 100 || ((int)uVar4 % 400 == 0)))) {
        bVar1 = 1;
      }
      else {
        bVar1 = 0;
      }
      bVar6 = CARRY4(local_8,bVar1 + 0x16d);
      local_8 = local_8 + bVar1 + 0x16d;
      unaff_EBX = unaff_EBX + (uint)bVar6;
    }
  }
  else {
    while( true ) {
      uVar5 = *(uint *)(in_ECX + 0x3c);
      uVar4 = uVar5 & 0x80000003;
      if ((int)uVar4 < 0) {
        uVar4 = (uVar4 - 1 | 0xfffffffc) + 1;
      }
      if ((uVar4 == 0) &&
         ((uVar5 != ((int)uVar5 / 100) * 100 || (uVar5 == ((int)uVar5 / 400) * 400)))) {
        bVar1 = 1;
      }
      else {
        bVar1 = 0;
      }
      if ((unaff_EBX < 0) || ((unaff_EBX < 1 && (local_8 < bVar1 + 0x16d)))) break;
      uVar4 = uVar5 & 0x80000003;
      if ((int)uVar4 < 0) {
        uVar4 = (uVar4 - 1 | 0xfffffffc) + 1;
      }
      if ((uVar4 == 0) &&
         ((uVar5 != ((int)uVar5 / 100) * 100 || (uVar5 == ((int)uVar5 / 400) * 400)))) {
        bVar1 = 1;
      }
      else {
        bVar1 = 0;
      }
      bVar6 = local_8 < bVar1 + 0x16d;
      local_8 = local_8 - (bVar1 + 0x16d);
      unaff_EBX = unaff_EBX - (uint)bVar6;
      *(uint *)(in_ECX + 0x3c) = uVar5 + 1;
    }
  }
  *(uint *)(in_ECX + 0x40) = local_8;
  *(undefined4 *)(in_ECX + 0x30) = param_1;
  *(int *)(in_ECX + 0x34) = param_2;
  FUN_005c1020();
  return;
}



============================================================
DISASSEMBLY
============================================================
005c2cf0 : SUB ESP,0xc
005c2cf3 : MOV EAX,dword ptr [ESP + 0x14]
005c2cf7 : PUSH EBX
005c2cf8 : PUSH EBP
005c2cf9 : PUSH ESI
005c2cfa : PUSH EDI
005c2cfb : PUSH 0x0
005c2cfd : PUSH 0x5265c00
005c2d02 : MOV ESI,ECX
005c2d04 : MOV ECX,dword ptr [ESP + 0x28]
005c2d08 : PUSH EAX
005c2d09 : PUSH ECX
005c2d0a : MOV dword ptr [ESP + 0x20],ESI
005c2d0e : CALL 0x0063d110
005c2d13 : PUSH 0x0
005c2d15 : PUSH 0x23ab1
005c2d1a : PUSH EDX
005c2d1b : PUSH EAX
005c2d1c : MOV dword ptr [ESP + 0x28],EBX
005c2d20 : MOV dword ptr [ESI + 0x38],ECX
005c2d23 : CALL 0x0063d110
005c2d28 : IMUL EAX,EAX,0x190
005c2d2e : ADD EAX,0x7b2
005c2d33 : CMP dword ptr [ESP + 0x24],0x0
005c2d38 : MOV EDI,ECX
005c2d3a : MOV dword ptr [ESP + 0x18],EDX
005c2d3e : MOV dword ptr [ESP + 0x14],EDI
005c2d42 : MOV EBP,EBX
005c2d44 : MOV dword ptr [ESI + 0x3c],EAX
005c2d47 : JL 0x005c2e43
005c2d4d : JG 0x005c2d60
005c2d4f : CMP dword ptr [ESP + 0x20],0x0
005c2d54 : JC 0x005c2e43
005c2d5a : LEA EBX,[EBX]
005c2d60 : MOV ECX,dword ptr [ESI + 0x3c]
005c2d63 : MOV EDX,ECX
005c2d65 : AND EDX,0x80000003
005c2d6b : JNS 0x005c2d72
005c2d6d : DEC EDX
005c2d6e : OR EDX,0xfffffffc
005c2d71 : INC EDX
005c2d72 : JNZ 0x005c2db2
005c2d74 : MOV EAX,0x51eb851f
005c2d79 : IMUL ECX
005c2d7b : SAR EDX,0x5
005c2d7e : MOV EAX,EDX
005c2d80 : SHR EAX,0x1f
005c2d83 : ADD EAX,EDX
005c2d85 : IMUL EAX,EAX,0x64
005c2d88 : MOV EDX,ECX
005c2d8a : SUB EDX,EAX
005c2d8c : JNZ 0x005c2dab
005c2d8e : MOV EAX,0x51eb851f
005c2d93 : IMUL ECX
005c2d95 : SAR EDX,0x7
005c2d98 : MOV EAX,EDX
005c2d9a : SHR EAX,0x1f
005c2d9d : ADD EAX,EDX
005c2d9f : IMUL EAX,EAX,0x190
005c2da5 : MOV EDX,ECX
005c2da7 : SUB EDX,EAX
005c2da9 : JNZ 0x005c2db2
005c2dab : MOV EAX,0x1
005c2db0 : JMP 0x005c2db4
005c2db2 : XOR EAX,EAX
005c2db4 : XOR EDX,EDX
005c2db6 : TEST AL,AL
005c2db8 : SETNZ DL
005c2dbb : ADD EDX,0x16d
005c2dc1 : MOV EAX,EDX
005c2dc3 : CDQ
005c2dc4 : CMP EBP,EDX
005c2dc6 : JL 0x005c2f4f
005c2dcc : JG 0x005c2dd6
005c2dce : CMP EDI,EAX
005c2dd0 : JC 0x005c2f4f
005c2dd6 : MOV EAX,ECX
005c2dd8 : AND EAX,0x80000003
005c2ddd : JNS 0x005c2de4
005c2ddf : DEC EAX
005c2de0 : OR EAX,0xfffffffc
005c2de3 : INC EAX
005c2de4 : JNZ 0x005c2e24
005c2de6 : MOV EAX,0x51eb851f
005c2deb : IMUL ECX
005c2ded : SAR EDX,0x5
005c2df0 : MOV EAX,EDX
005c2df2 : SHR EAX,0x1f
005c2df5 : ADD EAX,EDX
005c2df7 : IMUL EAX,EAX,0x64
005c2dfa : MOV EDX,ECX
005c2dfc : SUB EDX,EAX
005c2dfe : JNZ 0x005c2e1d
005c2e00 : MOV EAX,0x51eb851f
005c2e05 : IMUL ECX
005c2e07 : SAR EDX,0x7
005c2e0a : MOV EAX,EDX
005c2e0c : SHR EAX,0x1f
005c2e0f : ADD EAX,EDX
005c2e11 : IMUL EAX,EAX,0x190
005c2e17 : MOV EDX,ECX
005c2e19 : SUB EDX,EAX
005c2e1b : JNZ 0x005c2e24
005c2e1d : MOV EAX,0x1
005c2e22 : JMP 0x005c2e26
005c2e24 : XOR EAX,EAX
005c2e26 : XOR EDX,EDX
005c2e28 : TEST AL,AL
005c2e2a : SETNZ DL
005c2e2d : ADD EDX,0x16d
005c2e33 : MOV EAX,EDX
005c2e35 : CDQ
005c2e36 : SUB EDI,EAX
005c2e38 : SBB EBP,EDX
005c2e3a : INC ECX
005c2e3b : MOV dword ptr [ESI + 0x3c],ECX
005c2e3e : JMP 0x005c2d60
005c2e43 : TEST EBP,EBP
005c2e45 : JL 0x005c2e51
005c2e47 : JG 0x005c2e4d
005c2e49 : TEST EDI,EDI
005c2e4b : JC 0x005c2e51
005c2e4d : MOV ECX,EBP
005c2e4f : JMP 0x005c2e5a
005c2e51 : NEG EDI
005c2e53 : MOV ECX,EBP
005c2e55 : ADC ECX,0x0
005c2e58 : NEG ECX
005c2e5a : MOV ESI,dword ptr [ESI + 0x3c]
005c2e5d : MOV EAX,ESI
005c2e5f : AND EAX,0x80000003
005c2e64 : JNS 0x005c2e6b
005c2e66 : DEC EAX
005c2e67 : OR EAX,0xfffffffc
005c2e6a : INC EAX
005c2e6b : JNZ 0x005c2eab
005c2e6d : MOV EAX,0x51eb851f
005c2e72 : IMUL ESI
005c2e74 : SAR EDX,0x5
005c2e77 : MOV EAX,EDX
005c2e79 : SHR EAX,0x1f
005c2e7c : ADD EAX,EDX
005c2e7e : IMUL EAX,EAX,0x64
005c2e81 : MOV EDX,ESI
005c2e83 : SUB EDX,EAX
005c2e85 : JNZ 0x005c2ea4
005c2e87 : MOV EAX,0x51eb851f
005c2e8c : IMUL ESI
005c2e8e : SAR EDX,0x7
005c2e91 : MOV EAX,EDX
005c2e93 : SHR EAX,0x1f
005c2e96 : ADD EAX,EDX
005c2e98 : IMUL EAX,EAX,0x190
005c2e9e : MOV EDX,ESI
005c2ea0 : SUB EDX,EAX
005c2ea2 : JNZ 0x005c2eab
005c2ea4 : MOV EAX,0x1
005c2ea9 : JMP 0x005c2ead
005c2eab : XOR EAX,EAX
005c2ead : XOR EDX,EDX
005c2eaf : TEST AL,AL
005c2eb1 : SETNZ DL
005c2eb4 : ADD EDX,0x16d
005c2eba : MOV EAX,EDX
005c2ebc : CDQ
005c2ebd : CMP ECX,EDX
005c2ebf : JL 0x005c2f47
005c2ec5 : JG 0x005c2ecb
005c2ec7 : CMP EDI,EAX
005c2ec9 : JC 0x005c2f47
005c2ecb : MOV EAX,dword ptr [ESP + 0x10]
005c2ecf : LEA ECX,[ESI + -0x1]
005c2ed2 : MOV EDX,ECX
005c2ed4 : AND EDX,0x80000003
005c2eda : MOV dword ptr [EAX + 0x3c],ECX
005c2edd : JNS 0x005c2ee4
005c2edf : DEC EDX
005c2ee0 : OR EDX,0xfffffffc
005c2ee3 : INC EDX
005c2ee4 : JNZ 0x005c2f22
005c2ee6 : MOV EAX,0x51eb851f
005c2eeb : IMUL ECX
005c2eed : SAR EDX,0x5
005c2ef0 : MOV EAX,EDX
005c2ef2 : SHR EAX,0x1f
005c2ef5 : ADD EAX,EDX
005c2ef7 : IMUL EAX,EAX,0x64
005c2efa : MOV EDX,ECX
005c2efc : SUB EDX,EAX
005c2efe : JNZ 0x005c2f1b
005c2f00 : MOV EAX,0x51eb851f
005c2f05 : IMUL ECX
005c2f07 : SAR EDX,0x7
005c2f0a : MOV EAX,EDX
005c2f0c : SHR EAX,0x1f
005c2f0f : ADD EAX,EDX
005c2f11 : IMUL EAX,EAX,0x190
005c2f17 : SUB ECX,EAX
005c2f19 : JNZ 0x005c2f22
005c2f1b : MOV EAX,0x1
005c2f20 : JMP 0x005c2f24
005c2f22 : XOR EAX,EAX
005c2f24 : MOV ESI,dword ptr [ESP + 0x10]
005c2f28 : XOR ECX,ECX
005c2f2a : TEST AL,AL
005c2f2c : SETNZ CL
005c2f2f : ADD ECX,0x16d
005c2f35 : MOV EAX,ECX
005c2f37 : CDQ
005c2f38 : ADD dword ptr [ESP + 0x14],EAX
005c2f3c : MOV EDI,dword ptr [ESP + 0x14]
005c2f40 : ADC EBP,EDX
005c2f42 : JMP 0x005c2e43
005c2f47 : MOV ESI,dword ptr [ESP + 0x10]
005c2f4b : MOV EDI,dword ptr [ESP + 0x14]
005c2f4f : MOV EDX,dword ptr [ESP + 0x20]
005c2f53 : MOV EAX,dword ptr [ESP + 0x24]
005c2f57 : MOV ECX,ESI
005c2f59 : MOV dword ptr [ESI + 0x40],EDI
005c2f5c : MOV dword ptr [ESI + 0x30],EDX
005c2f5f : MOV dword ptr [ESI + 0x34],EAX
005c2f62 : CALL 0x005c1020
005c2f67 : POP EDI
005c2f68 : POP ESI
005c2f69 : POP EBP
005c2f6a : POP EBX
005c2f6b : ADD ESP,0xc
005c2f6e : RET 0x8
