PROGRAM  : Maestia.exe
FUNCTION : FUN_004fc580
ENTRY    : 004fc580
BODY     : [[004fc580, 004fc621]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004fc580(void)

{
  int iVar1;
  int iVar2;
  int *unaff_ESI;
  
  iVar2 = unaff_ESI[1];
  if ((iVar2 == 0) || (*unaff_ESI == 0)) {
    iVar1 = 0;
  }
  else {
    iVar1 = *(int *)(iVar2 + 4) + *unaff_ESI;
  }
  if (*(int *)(iVar1 + 0x94) == 0) {
    iVar1 = 0;
    iVar2 = *unaff_ESI;
    while ((iVar2 != 0 && (iVar2 = FUN_0046b940(), iVar1 == *(int *)(iVar2 + 0x94)))) {
      iVar1 = *unaff_ESI;
      iVar2 = FUN_0046b940();
      iVar2 = *(int *)(iVar2 + 0x98);
      *unaff_ESI = iVar2;
    }
  }
  else {
    if ((iVar2 == 0) || (*unaff_ESI == 0)) {
      iVar2 = 0;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4) + *unaff_ESI;
    }
    *unaff_ESI = *(int *)(iVar2 + 0x94);
    iVar2 = FUN_0046b940();
    if (*(int *)(iVar2 + 0x90) != 0) {
      do {
        iVar2 = FUN_0046b940();
        *unaff_ESI = *(int *)(iVar2 + 0x90);
        iVar2 = FUN_0046b940();
      } while (*(int *)(iVar2 + 0x90) != 0);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
004fc580 : MOV EDX,dword ptr [ESI + 0x4]
004fc583 : TEST EDX,EDX
004fc585 : JZ 0x004fc594
004fc587 : MOV ECX,dword ptr [ESI]
004fc589 : TEST ECX,ECX
004fc58b : JZ 0x004fc594
004fc58d : MOV EAX,dword ptr [EDX + 0x4]
004fc590 : ADD EAX,ECX
004fc592 : JMP 0x004fc596
004fc594 : XOR EAX,EAX
004fc596 : CMP dword ptr [EAX + 0x94],0x0
004fc59d : JNZ 0x004fc5ce
004fc59f : PUSH EDI
004fc5a0 : XOR EDI,EDI
004fc5a2 : CMP dword ptr [ESI],EDI
004fc5a4 : JZ 0x004fc5ca
004fc5a6 : MOV ECX,ESI
004fc5a8 : CALL 0x0046b940
004fc5ad : CMP EDI,dword ptr [EAX + 0x94]
004fc5b3 : JNZ 0x004fc5ca
004fc5b5 : MOV EDI,dword ptr [ESI]
004fc5b7 : MOV ECX,ESI
004fc5b9 : CALL 0x0046b940
004fc5be : MOV EAX,dword ptr [EAX + 0x98]
004fc5c4 : MOV dword ptr [ESI],EAX
004fc5c6 : TEST EAX,EAX
004fc5c8 : JNZ 0x004fc5a6
004fc5ca : POP EDI
004fc5cb : MOV EAX,ESI
004fc5cd : RET
004fc5ce : TEST EDX,EDX
004fc5d0 : JZ 0x004fc5df
004fc5d2 : MOV ECX,dword ptr [ESI]
004fc5d4 : TEST ECX,ECX
004fc5d6 : JZ 0x004fc5df
004fc5d8 : MOV EAX,dword ptr [EDX + 0x4]
004fc5db : ADD EAX,ECX
004fc5dd : JMP 0x004fc5e1
004fc5df : XOR EAX,EAX
004fc5e1 : MOV ECX,dword ptr [EAX + 0x94]
004fc5e7 : MOV dword ptr [ESI],ECX
004fc5e9 : MOV ECX,ESI
004fc5eb : CALL 0x0046b940
004fc5f0 : CMP dword ptr [EAX + 0x90],0x0
004fc5f7 : JZ 0x004fc5cb
004fc5f9 : LEA ESP,[ESP]
004fc600 : MOV ECX,ESI
004fc602 : CALL 0x0046b940
004fc607 : MOV EDX,dword ptr [EAX + 0x90]
004fc60d : MOV ECX,ESI
004fc60f : MOV dword ptr [ESI],EDX
004fc611 : CALL 0x0046b940
004fc616 : CMP dword ptr [EAX + 0x90],0x0
004fc61d : JNZ 0x004fc600
004fc61f : MOV EAX,ESI
004fc621 : RET
