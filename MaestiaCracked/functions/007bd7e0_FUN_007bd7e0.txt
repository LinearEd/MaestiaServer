PROGRAM  : Maestia.exe
FUNCTION : FUN_007bd7e0
ENTRY    : 007bd7e0
BODY     : [[007bd7e0, 007bda25]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 FUN_007bd7e0(int param_1)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  int in_ECX;
  uint uVar4;
  int iVar5;
  int iVar6;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b19da2;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 4);
  local_20 = 0;
  local_28 = ".\\mss\\AvaMssMgr.cpp";
  local_24 = 0x2c8;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  if (*(int *)(in_ECX + 0x20) == 0) {
    local_8 = 0xffffffff;
    if (local_20 != 0) {
      LeaveCriticalSection(local_2c);
    }
    ExceptionList = local_10;
    return 0;
  }
  iVar5 = in_ECX + 0x84;
  local_14 = 0;
  local_18 = iVar5;
  FUN_0043acd0(iVar5,&param_1);
  iVar6 = param_1;
  if ((param_1 == *(int *)(in_ECX + 0x88)) &&
     (*(uint *)(in_ECX + 0xbc) <=
      (uint)(*(int *)(in_ECX + 0x8c) + (*(int *)(in_ECX + 0x44) - *(int *)(in_ECX + 0x40) >> 2)))) {
    iVar6 = **(int **)(in_ECX + 0x88);
    uVar4 = *(uint *)(*(int *)(iVar6 + 0x28) + 8);
    local_14 = 1;
    param_1 = iVar6;
    FUN_00430160(uVar2);
    iVar5 = local_18;
    if (param_1 != *(int *)(in_ECX + 0x88)) {
      do {
        uVar1 = *(uint *)(*(int *)(param_1 + 0x28) + 8);
        if (uVar1 < uVar4) {
          uVar4 = uVar1;
          iVar6 = param_1;
        }
        FUN_00430160(uVar2);
        iVar5 = local_18;
      } while (param_1 != *(int *)(in_ECX + 0x88));
    }
  }
  if (iVar6 != *(int *)(in_ECX + 0x88)) {
    if (local_14 == 0) {
      uVar3 = *(undefined4 *)(iVar6 + 0x28);
      FUN_0043a9f0(iVar5,&param_1,iVar6);
      local_8 = 0xffffffff;
      if (local_20 != 0) {
        LeaveCriticalSection(local_2c);
      }
      ExceptionList = local_10;
      return uVar3;
    }
    if ((iVar6 != *(int *)(in_ECX + 0x88)) && (local_14 == 1)) {
      _DAT_00da9aa4 = _DAT_00da9aa4 + -1;
      param_1 = *(int *)(iVar6 + 0x28);
      if (param_1 != 0) {
        FUN_007542c0(param_1);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      FUN_0043a9f0(iVar5,&param_1,iVar6);
      _DAT_00da9aa4 = _DAT_00da9aa4 + 1;
      param_1 = FUN_006f0300(0x78);
      local_8 = CONCAT31(local_8._1_3_,1);
      goto LAB_007bd9e1;
    }
  }
  (*(code *)PTR_FUN_00d6d240)(0x14,0xb,"Cur 2D Pool Count %d\n",*(undefined4 *)(in_ECX + 0x8c));
  param_1 = FUN_006f0760(0x78,"",0,(DAT_01725270 >> 3 & 1) == 0);
  local_8 = CONCAT31(local_8._1_3_,2);
LAB_007bd9e1:
  if (param_1 == 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = FUN_007543a0(param_1,in_ECX);
  }
  local_8 = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
007bd7e0 : PUSH EBP
007bd7e1 : MOV EBP,ESP
007bd7e3 : PUSH -0x1
007bd7e5 : PUSH 0xb19da2
007bd7ea : MOV EAX,FS:[0x0]
007bd7f0 : PUSH EAX
007bd7f1 : SUB ESP,0x20
007bd7f4 : PUSH EBX
007bd7f5 : PUSH ESI
007bd7f6 : PUSH EDI
007bd7f7 : MOV EAX,[0x00d66fa0]
007bd7fc : XOR EAX,EBP
007bd7fe : PUSH EAX
007bd7ff : LEA EAX,[EBP + -0xc]
007bd802 : MOV FS:[0x0],EAX
007bd808 : MOV EDI,ECX
007bd80a : LEA ECX,[EBP + -0x28]
007bd80d : LEA EAX,[EDI + 0x4]
007bd810 : XOR ESI,ESI
007bd812 : PUSH ECX
007bd813 : MOV dword ptr [EBP + -0x1c],ESI
007bd816 : MOV dword ptr [EBP + -0x28],EAX
007bd819 : MOV dword ptr [EBP + -0x24],0xc18ea0
007bd820 : MOV dword ptr [EBP + -0x20],0x2c8
007bd827 : MOV dword ptr [EBP + -0x18],0x1
007bd82e : CALL 0x006ef1a0
007bd833 : MOV dword ptr [EBP + -0x4],ESI
007bd836 : CMP dword ptr [EDI + 0x20],ESI
007bd839 : JNZ 0x007bd86a
007bd83b : MOV dword ptr [EBP + -0x4],0xffffffff
007bd842 : CMP dword ptr [EBP + -0x1c],ESI
007bd845 : JZ 0x007bd854
007bd847 : MOV EDX,dword ptr [EBP + -0x28]
007bd84a : PUSH EDX
007bd84b : CALL dword ptr [0x00b8511c]
007bd851 : MOV dword ptr [EBP + -0x1c],ESI
007bd854 : XOR EAX,EAX
007bd856 : MOV ECX,dword ptr [EBP + -0xc]
007bd859 : MOV dword ptr FS:[0x0],ECX
007bd860 : POP ECX
007bd861 : POP EDI
007bd862 : POP ESI
007bd863 : POP EBX
007bd864 : MOV ESP,EBP
007bd866 : POP EBP
007bd867 : RET 0x4
007bd86a : LEA EAX,[EBP + 0x8]
007bd86d : LEA EBX,[EDI + 0x84]
007bd873 : PUSH EAX
007bd874 : MOV dword ptr [EBP + -0x10],ESI
007bd877 : MOV ESI,dword ptr [EBP + 0x8]
007bd87a : PUSH EBX
007bd87b : MOV dword ptr [EBP + -0x14],EBX
007bd87e : CALL 0x0043acd0
007bd883 : MOV EAX,dword ptr [EDI + 0x44]
007bd886 : SUB EAX,dword ptr [EDI + 0x40]
007bd889 : MOV ECX,dword ptr [EDI + 0x88]
007bd88f : MOV ESI,dword ptr [EBP + 0x8]
007bd892 : SAR EAX,0x2
007bd895 : CMP ESI,ECX
007bd897 : JNZ 0x007bd8f8
007bd899 : MOV ECX,dword ptr [EDI + 0x8c]
007bd89f : ADD ECX,EAX
007bd8a1 : CMP ECX,dword ptr [EDI + 0xbc]
007bd8a7 : JC 0x007bd8f8
007bd8a9 : MOV EAX,dword ptr [EDI + 0x88]
007bd8af : MOV ESI,dword ptr [EAX]
007bd8b1 : MOV EAX,dword ptr [ESI + 0x28]
007bd8b4 : MOV EBX,dword ptr [EAX + 0x8]
007bd8b7 : LEA EDX,[EBP + 0x8]
007bd8ba : MOV dword ptr [EBP + -0x10],0x1
007bd8c1 : MOV dword ptr [EBP + 0x8],ESI
007bd8c4 : CALL 0x00430160
007bd8c9 : MOV EAX,dword ptr [EBP + 0x8]
007bd8cc : CMP EAX,dword ptr [EDI + 0x88]
007bd8d2 : JZ 0x007bd8f5
007bd8d4 : MOV ECX,dword ptr [EAX + 0x28]
007bd8d7 : MOV ECX,dword ptr [ECX + 0x8]
007bd8da : CMP ECX,EBX
007bd8dc : JNC 0x007bd8e2
007bd8de : MOV EBX,ECX
007bd8e0 : MOV ESI,EAX
007bd8e2 : LEA EDX,[EBP + 0x8]
007bd8e5 : CALL 0x00430160
007bd8ea : MOV EAX,dword ptr [EBP + 0x8]
007bd8ed : CMP EAX,dword ptr [EDI + 0x88]
007bd8f3 : JNZ 0x007bd8d4
007bd8f5 : MOV EBX,dword ptr [EBP + -0x14]
007bd8f8 : MOV EAX,dword ptr [EDI + 0x88]
007bd8fe : CMP ESI,EAX
007bd900 : JZ 0x007bd99e
007bd906 : CMP dword ptr [EBP + -0x10],0x0
007bd90a : JNZ 0x007bd94e
007bd90c : MOV EDI,dword ptr [ESI + 0x28]
007bd90f : PUSH ESI
007bd910 : LEA ECX,[EBP + 0x8]
007bd913 : PUSH ECX
007bd914 : PUSH EBX
007bd915 : CALL 0x0043a9f0
007bd91a : MOV dword ptr [EBP + -0x4],0xffffffff
007bd921 : CMP dword ptr [EBP + -0x1c],0x0
007bd925 : JZ 0x007bd938
007bd927 : MOV EDX,dword ptr [EBP + -0x28]
007bd92a : PUSH EDX
007bd92b : CALL dword ptr [0x00b8511c]
007bd931 : MOV dword ptr [EBP + -0x1c],0x0
007bd938 : MOV EAX,EDI
007bd93a : MOV ECX,dword ptr [EBP + -0xc]
007bd93d : MOV dword ptr FS:[0x0],ECX
007bd944 : POP ECX
007bd945 : POP EDI
007bd946 : POP ESI
007bd947 : POP EBX
007bd948 : MOV ESP,EBP
007bd94a : POP EBP
007bd94b : RET 0x4
007bd94e : CMP ESI,EAX
007bd950 : JZ 0x007bd99e
007bd952 : MOV EAX,0x1
007bd957 : CMP dword ptr [EBP + -0x10],EAX
007bd95a : JNZ 0x007bd99e
007bd95c : SUB dword ptr [0x00da9aa4],EAX
007bd962 : MOV EAX,dword ptr [ESI + 0x28]
007bd965 : MOV dword ptr [EBP + 0x8],EAX
007bd968 : TEST EAX,EAX
007bd96a : JZ 0x007bd97a
007bd96c : PUSH EAX
007bd96d : CALL 0x007542c0
007bd972 : MOV ECX,dword ptr [EBP + 0x8]
007bd975 : CALL 0x006f04e0
007bd97a : PUSH ESI
007bd97b : LEA EAX,[EBP + 0x8]
007bd97e : PUSH EAX
007bd97f : PUSH EBX
007bd980 : CALL 0x0043a9f0
007bd985 : INC dword ptr [0x00da9aa4]
007bd98b : PUSH 0x78
007bd98d : CALL 0x006f0300
007bd992 : ADD ESP,0x4
007bd995 : MOV dword ptr [EBP + 0x8],EAX
007bd998 : MOV byte ptr [EBP + -0x4],0x1
007bd99c : JMP 0x007bd9e1
007bd99e : MOV EAX,dword ptr [EDI + 0x8c]
007bd9a4 : PUSH EAX
007bd9a5 : PUSH 0xc18eb4
007bd9aa : PUSH 0xb
007bd9ac : PUSH 0x14
007bd9ae : CALL dword ptr [0x00d6d240]
007bd9b4 : MOV EDX,dword ptr [0x01725270]
007bd9ba : SHR EDX,0x3
007bd9bd : MOV EAX,0x0
007bd9c2 : AND EDX,0x1
007bd9c5 : SETZ AL
007bd9c8 : PUSH EAX
007bd9c9 : PUSH 0x0
007bd9cb : PUSH 0xbf1a4a
007bd9d0 : PUSH 0x78
007bd9d2 : CALL 0x006f0760
007bd9d7 : ADD ESP,0x20
007bd9da : MOV dword ptr [EBP + 0x8],EAX
007bd9dd : MOV byte ptr [EBP + -0x4],0x2
007bd9e1 : TEST EAX,EAX
007bd9e3 : JZ 0x007bd9f0
007bd9e5 : PUSH EDI
007bd9e6 : PUSH EAX
007bd9e7 : CALL 0x007543a0
007bd9ec : MOV ESI,EAX
007bd9ee : JMP 0x007bd9f2
007bd9f0 : XOR ESI,ESI
007bd9f2 : MOV dword ptr [EBP + -0x4],0xffffffff
007bd9f9 : CMP dword ptr [EBP + -0x1c],0x0
007bd9fd : JZ 0x007bda10
007bd9ff : MOV ECX,dword ptr [EBP + -0x28]
007bda02 : PUSH ECX
007bda03 : CALL dword ptr [0x00b8511c]
007bda09 : MOV dword ptr [EBP + -0x1c],0x0
007bda10 : MOV EAX,ESI
007bda12 : MOV ECX,dword ptr [EBP + -0xc]
007bda15 : MOV dword ptr FS:[0x0],ECX
007bda1c : POP ECX
007bda1d : POP EDI
007bda1e : POP ESI
007bda1f : POP EBX
007bda20 : MOV ESP,EBP
007bda22 : POP EBP
007bda23 : RET 0x4
