PROGRAM  : Maestia.exe
FUNCTION : FUN_0042a960
ENTRY    : 0042a960
BODY     : [[0042a960, 0042aad9] [0042aaeb, 0042abf6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0042a960(uint param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar2 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7bbf0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = *(int *)(param_1 + 4);
  if (iVar3 == 0) {
    param_1 = 0;
  }
  else {
    param_1 = (*(int *)(param_1 + 0xc) - iVar3) / 0x28;
  }
  iVar1 = *(int *)(iVar2 + 8);
  iVar3 = (iVar1 - iVar3) / 0x28;
  if (iVar3 == 0x6666666) {
    iVar3 = FUN_00429be0();
  }
  uVar4 = iVar3 + 1;
  if (param_1 < uVar4) {
    if (0x6666666 - (param_1 >> 1) < param_1) {
      param_1 = 0;
    }
    else {
      param_1 = param_1 + (param_1 >> 1);
    }
    if (param_1 < uVar4) {
      param_1 = uVar4;
    }
    iVar3 = FUN_00444990();
    local_8 = 0;
    FUN_0042a930();
    FUN_0042ac60(*(undefined4 *)(iVar2 + 4),param_2);
    FUN_0042ac60(param_2,*(undefined4 *)(iVar2 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar2 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar2 + 0xc) = iVar3 + param_1 * 0x28;
    *(int *)(iVar2 + 8) = iVar3 + ((*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4)) / 0x28 + 1) * 0x28;
    *(int *)(iVar2 + 4) = iVar3;
    ExceptionList = local_10;
    return;
  }
  iVar3 = iVar1 - param_2 >> 0x1f;
  if ((iVar1 - param_2) / 0x28 + iVar3 == iVar3) {
    FUN_0042ac60(param_2,iVar1);
    local_8 = 2;
    FUN_0042a930();
    local_8 = 0xffffffff;
    *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 0x28;
    FUN_0042ad60(param_2);
    ExceptionList = local_10;
    return;
  }
  uVar5 = FUN_0042ac60(iVar1 + -0x28,iVar1);
  *(undefined4 *)(iVar2 + 8) = uVar5;
  param_1 = param_1 & 0xffffff00;
  FUN_0042adf0(param_2,param_2,param_2,param_1);
  FUN_0042ad60(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0042a960 : PUSH EBP
0042a961 : MOV EBP,ESP
0042a963 : PUSH -0x1
0042a965 : PUSH 0xb7bbf0
0042a96a : MOV EAX,FS:[0x0]
0042a970 : PUSH EAX
0042a971 : SUB ESP,0x3c
0042a974 : PUSH EBX
0042a975 : PUSH ESI
0042a976 : PUSH EDI
0042a977 : MOV EAX,[0x00d66fa0]
0042a97c : XOR EAX,EBP
0042a97e : PUSH EAX
0042a97f : LEA EAX,[EBP + -0xc]
0042a982 : MOV FS:[0x0],EAX
0042a988 : MOV dword ptr [EBP + -0x10],ESP
0042a98b : MOV ESI,ECX
0042a98d : MOV EBX,dword ptr [EBP + 0x8]
0042a990 : MOV ECX,dword ptr [EBX + 0x4]
0042a993 : TEST ECX,ECX
0042a995 : JNZ 0x0042a99c
0042a997 : MOV dword ptr [EBP + 0x8],ECX
0042a99a : JMP 0x0042a9b5
0042a99c : MOV EDX,dword ptr [EBX + 0xc]
0042a99f : SUB EDX,ECX
0042a9a1 : MOV EAX,0x66666667
0042a9a6 : IMUL EDX
0042a9a8 : SAR EDX,0x4
0042a9ab : MOV EAX,EDX
0042a9ad : SHR EAX,0x1f
0042a9b0 : ADD EAX,EDX
0042a9b2 : MOV dword ptr [EBP + 0x8],EAX
0042a9b5 : MOV EDI,dword ptr [EBX + 0x8]
0042a9b8 : MOV EDX,EDI
0042a9ba : SUB EDX,ECX
0042a9bc : MOV EAX,0x66666667
0042a9c1 : IMUL EDX
0042a9c3 : SAR EDX,0x4
0042a9c6 : MOV EAX,EDX
0042a9c8 : SHR EAX,0x1f
0042a9cb : ADD EAX,EDX
0042a9cd : MOV ECX,0x6666666
0042a9d2 : SUB ECX,EAX
0042a9d4 : CMP ECX,0x1
0042a9d7 : JNC 0x0042a9de
0042a9d9 : CALL 0x00429be0
0042a9de : INC EAX
0042a9df : MOV ECX,dword ptr [EBP + 0x8]
0042a9e2 : CMP ECX,EAX
0042a9e4 : JNC 0x0042aaeb
0042a9ea : MOV EDX,ECX
0042a9ec : SHR EDX,0x1
0042a9ee : MOV EDI,0x6666666
0042a9f3 : SUB EDI,EDX
0042a9f5 : CMP EDI,ECX
0042a9f7 : JNC 0x0042aa05
0042a9f9 : MOV dword ptr [EBP + 0x8],0x0
0042aa00 : MOV ECX,dword ptr [EBP + 0x8]
0042aa03 : JMP 0x0042aa0a
0042aa05 : ADD ECX,EDX
0042aa07 : MOV dword ptr [EBP + 0x8],ECX
0042aa0a : CMP ECX,EAX
0042aa0c : JNC 0x0042aa13
0042aa0e : MOV dword ptr [EBP + 0x8],EAX
0042aa11 : MOV ECX,EAX
0042aa13 : CALL 0x00444990
0042aa18 : MOV EDI,EAX
0042aa1a : MOV dword ptr [EBP + -0x14],EDI
0042aa1d : MOV ECX,dword ptr [EBP + 0xc]
0042aa20 : SUB ECX,dword ptr [EBX + 0x4]
0042aa23 : MOV EAX,0x66666667
0042aa28 : IMUL ECX
0042aa2a : SAR EDX,0x4
0042aa2d : MOV EAX,EDX
0042aa2f : SHR EAX,0x1f
0042aa32 : ADD EAX,EDX
0042aa34 : MOV dword ptr [EBP + -0x1c],EAX
0042aa37 : MOV dword ptr [EBP + -0x4],0x0
0042aa3e : LEA EDX,[EAX + EAX*0x4]
0042aa41 : LEA EDI,[EDI + EDX*0x8]
0042aa44 : MOV EDX,ESI
0042aa46 : MOV ESI,0x1
0042aa4b : CALL 0x0042a930
0042aa50 : MOV dword ptr [EBP + -0x18],ESI
0042aa53 : MOV EAX,dword ptr [EBP + 0xc]
0042aa56 : PUSH EAX
0042aa57 : MOV ECX,dword ptr [EBX + 0x4]
0042aa5a : PUSH ECX
0042aa5b : MOV ESI,dword ptr [EBP + -0x14]
0042aa5e : MOV EDX,ESI
0042aa60 : CALL 0x0042ac60
0042aa65 : MOV dword ptr [EBP + -0x18],0x2
0042aa6c : MOV EAX,dword ptr [EBP + -0x1c]
0042aa6f : LEA EDX,[EAX + EAX*0x4 + 0x5]
0042aa73 : LEA EDX,[ESI + EDX*0x8]
0042aa76 : MOV EAX,dword ptr [EBX + 0x8]
0042aa79 : PUSH EAX
0042aa7a : MOV ECX,dword ptr [EBP + 0xc]
0042aa7d : PUSH ECX
0042aa7e : CALL 0x0042ac60
0042aa83 : MOV dword ptr [EBP + -0x4],0xffffffff
0042aa8a : MOV ECX,dword ptr [EBX + 0x4]
0042aa8d : MOV EDX,dword ptr [EBX + 0x8]
0042aa90 : SUB EDX,ECX
0042aa92 : MOV EAX,0x66666667
0042aa97 : IMUL EDX
0042aa99 : SAR EDX,0x4
0042aa9c : MOV EAX,EDX
0042aa9e : SHR EAX,0x1f
0042aaa1 : LEA EDI,[EDX + EAX*0x1 + 0x1]
0042aaa5 : TEST ECX,ECX
0042aaa7 : JZ 0x0042aaae
0042aaa9 : CALL 0x006f04e0
0042aaae : MOV EAX,dword ptr [EBP + 0x8]
0042aab1 : LEA ECX,[EAX + EAX*0x4]
0042aab4 : LEA EDX,[ESI + ECX*0x8]
0042aab7 : MOV dword ptr [EBX + 0xc],EDX
0042aaba : LEA EAX,[EDI + EDI*0x4]
0042aabd : LEA ECX,[ESI + EAX*0x8]
0042aac0 : MOV dword ptr [EBX + 0x8],ECX
0042aac3 : MOV dword ptr [EBX + 0x4],ESI
0042aac6 : MOV ECX,dword ptr [EBP + -0xc]
0042aac9 : MOV dword ptr FS:[0x0],ECX
0042aad0 : POP ECX
0042aad1 : POP EDI
0042aad2 : POP ESI
0042aad3 : POP EBX
0042aad4 : MOV ESP,EBP
0042aad6 : POP EBP
0042aad7 : RET 0x8
0042aaeb : MOV EDX,EDI
0042aaed : MOV ECX,dword ptr [EBP + 0xc]
0042aaf0 : SUB EDX,ECX
0042aaf2 : MOV EAX,0x66666667
0042aaf7 : IMUL EDX
0042aaf9 : SAR EDX,0x4
0042aafc : MOV EAX,EDX
0042aafe : SHR EAX,0x1f
0042ab01 : ADD EAX,EDX
0042ab03 : MOVQ XMM0,qword ptr [ESI]
0042ab07 : PUSH EDI
0042ab08 : MOVQ qword ptr [EBP + -0x44],XMM0
0042ab0d : MOVQ XMM0,qword ptr [ESI + 0x8]
0042ab12 : MOVQ qword ptr [EBP + -0x3c],XMM0
0042ab17 : MOVQ XMM0,qword ptr [ESI + 0x10]
0042ab1c : MOVQ qword ptr [EBP + -0x34],XMM0
0042ab21 : MOVQ XMM0,qword ptr [ESI + 0x18]
0042ab26 : MOVQ qword ptr [EBP + -0x2c],XMM0
0042ab2b : MOVQ XMM0,qword ptr [ESI + 0x20]
0042ab30 : MOVQ qword ptr [EBP + -0x24],XMM0
0042ab35 : CMP EAX,0x1
0042ab38 : JNC 0x0042aba6
0042ab3a : LEA EDX,[ECX + 0x28]
0042ab3d : PUSH ECX
0042ab3e : CALL 0x0042ac60
0042ab43 : MOV dword ptr [EBP + -0x4],0x2
0042ab4a : MOV EDI,dword ptr [EBX + 0x8]
0042ab4d : MOV ECX,EDI
0042ab4f : SUB ECX,dword ptr [EBP + 0xc]
0042ab52 : MOV EAX,0x66666667
0042ab57 : IMUL ECX
0042ab59 : SAR EDX,0x4
0042ab5c : MOV ECX,EDX
0042ab5e : SHR ECX,0x1f
0042ab61 : ADD ECX,EDX
0042ab63 : MOV ESI,0x1
0042ab68 : SUB ESI,ECX
0042ab6a : LEA EDX,[EBP + -0x44]
0042ab6d : CALL 0x0042a930
0042ab72 : MOV dword ptr [EBP + -0x4],0xffffffff
0042ab79 : ADD dword ptr [EBX + 0x8],0x28
0042ab7d : MOV EBX,dword ptr [EBX + 0x8]
0042ab80 : LEA EDX,[EBX + -0x28]
0042ab83 : MOV EAX,dword ptr [EBP + 0xc]
0042ab86 : PUSH EAX
0042ab87 : LEA ECX,[EBP + -0x44]
0042ab8a : CALL 0x0042ad60
0042ab8f : ADD ESP,0x4
0042ab92 : MOV ECX,dword ptr [EBP + -0xc]
0042ab95 : MOV dword ptr FS:[0x0],ECX
0042ab9c : POP ECX
0042ab9d : POP EDI
0042ab9e : POP ESI
0042ab9f : POP EBX
0042aba0 : MOV ESP,EBP
0042aba2 : POP EBP
0042aba3 : RET 0x8
0042aba6 : LEA ESI,[EDI + -0x28]
0042aba9 : PUSH ESI
0042abaa : MOV EDX,EDI
0042abac : CALL 0x0042ac60
0042abb1 : MOV dword ptr [EBX + 0x8],EAX
0042abb4 : MOV byte ptr [EBP + 0x8],0x0
0042abb8 : MOV ECX,dword ptr [EBP + 0x8]
0042abbb : PUSH ECX
0042abbc : MOV EDX,dword ptr [EBP + 0xc]
0042abbf : PUSH EDX
0042abc0 : MOV EAX,dword ptr [EBP + 0xc]
0042abc3 : PUSH EAX
0042abc4 : MOV ECX,dword ptr [EBP + 0xc]
0042abc7 : PUSH ECX
0042abc8 : MOV EAX,EDI
0042abca : MOV ECX,ESI
0042abcc : CALL 0x0042adf0
0042abd1 : MOV EAX,dword ptr [EBP + 0xc]
0042abd4 : LEA EDX,[EAX + 0x28]
0042abd7 : PUSH EAX
0042abd8 : LEA ECX,[EBP + -0x44]
0042abdb : CALL 0x0042ad60
0042abe0 : ADD ESP,0x14
0042abe3 : MOV ECX,dword ptr [EBP + -0xc]
0042abe6 : MOV dword ptr FS:[0x0],ECX
0042abed : POP ECX
0042abee : POP EDI
0042abef : POP ESI
0042abf0 : POP EBX
0042abf1 : MOV ESP,EBP
0042abf3 : POP EBP
0042abf4 : RET 0x8
