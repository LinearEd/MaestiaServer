PROGRAM  : Maestia.exe
FUNCTION : FUN_004729a0
ENTRY    : 004729a0
BODY     : [[004729a0, 00472d2f]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_004729a0(int param_1)

{
  undefined1 uVar1;
  char cVar2;
  byte bVar3;
  uint uVar4;
  int *piVar5;
  int in_ECX;
  int extraout_ECX;
  float *pfVar6;
  int iVar7;
  undefined4 extraout_EDX;
  int iVar8;
  int iVar9;
  int *piVar10;
  undefined1 local_a8 [4];
  int local_a4;
  undefined4 local_8c;
  undefined4 local_88;
  undefined2 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined2 local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined2 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined2 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined2 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined2 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined2 local_3c;
  int local_30;
  int local_2c;
  int local_28;
  int local_24;
  undefined4 local_20;
  int local_1c;
  int local_18;
  byte local_11;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b82c2d;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_1c = *(int *)(in_ECX + 0x18);
  local_24 = *(int *)(in_ECX + 0x1c);
  iVar8 = param_1 + 0x1010;
  bVar3 = 1;
  local_11 = 1;
  if ((0 < local_1c) && (local_24 != 0)) {
    local_88 = 10;
    local_84 = 4;
    local_7c = 10;
    local_78 = 4;
    local_6c = 4;
    local_68 = 10;
    local_60 = 4;
    local_54 = 4;
    local_4c = 10;
    local_40 = 10;
    local_8c = 0;
    local_80 = 8;
    local_74 = 9;
    local_70 = 0;
    local_64 = 0;
    local_5c = 0xb;
    local_58 = 0;
    local_50 = 0xc;
    local_48 = 2;
    local_44 = 0x11;
    local_3c = 0;
    local_2c = iVar8;
    uVar1 = FUN_004714e0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    local_20 = CONCAT31(local_20._1_3_,uVar1);
    cVar2 = FUN_00471510();
    if (cVar2 != '\0') {
      uVar4 = (uint)((char)local_20 == '\0');
      *(uint *)(param_1 + 0x1068) = (uint)(uVar4 != 0) * 2 + 2;
      *(uint *)(param_1 + 0x1024) = uVar4;
      if ((uVar4 == 0) || (uVar4 == 1)) {
        piVar10 = *(int **)(in_ECX + 0x1c);
        iVar7 = 0;
        iVar9 = *(int *)(in_ECX + 0x18);
        if (0 < *(int *)(in_ECX + 0x18)) {
          do {
            local_18 = iVar9;
            iVar9 = *piVar10;
            if (0 < iVar9) {
              piVar5 = (int *)(piVar10[1] + 8);
              do {
                iVar7 = iVar7 + *piVar5;
                piVar5 = piVar5 + 5;
                iVar9 = iVar9 + -1;
              } while (iVar9 != 0);
            }
            piVar10 = piVar10 + 0x10;
            local_18 = local_18 + -1;
            iVar9 = local_18;
          } while (local_18 != 0);
        }
        cVar2 = FUN_00471570(iVar7);
        if (cVar2 != '\0') {
          param_1 = param_1 + 0xe90;
          local_30 = param_1;
          FUN_00471ba0(local_1c);
          local_28 = 0;
          if (0 < local_1c) {
            piVar10 = (int *)(local_24 + 0x14);
            do {
              cVar2 = FUN_00806e10();
              iVar9 = extraout_ECX;
              if (cVar2 != '\0') {
                bVar3 = FUN_00472020(extraout_ECX,extraout_EDX,iVar8,param_1,local_20);
                local_11 = local_11 & bVar3;
                FUN_004725a0(local_a8,piVar10[-1]);
                iVar9 = 0;
                local_8 = 0;
                if (0 < piVar10[-1]) {
                  iVar7 = 0;
                  local_18 = 0;
                  param_1 = 0;
                  pfVar6 = (float *)(local_a4 + 0xc);
                  do {
                    iVar8 = *piVar10;
                    *(undefined8 *)(pfVar6 + -3) = *(undefined8 *)(iVar8 + param_1);
                    pfVar6[-1] = *(float *)((undefined8 *)(iVar8 + param_1) + 1);
                    if (piVar10[9] == 0) {
                      *pfVar6 = 0.0;
                    }
                    else {
                      bVar3 = *(byte *)(local_18 + 4 + piVar10[9]);
                      if (bVar3 == 0x7f) {
                        *pfVar6 = 0.0;
                      }
                      else {
                        *pfVar6 = ((float)bVar3 * 0.007843138 - 1.0) * 10.0;
                      }
                    }
                    iVar8 = piVar10[1];
                    if (iVar8 == 0) {
                      iVar8 = *piVar10;
                    }
                    *(undefined8 *)(pfVar6 + 1) = *(undefined8 *)(iVar8 + param_1);
                    pfVar6[3] = *(float *)((undefined8 *)(iVar8 + param_1) + 1);
                    iVar8 = piVar10[2];
                    *(undefined2 *)(pfVar6 + 5) = *(undefined2 *)(iVar8 + iVar7);
                    *(undefined1 *)((int)pfVar6 + 0x16) = *(undefined1 *)(iVar8 + iVar7 + 2);
                    if (piVar10[7] == 0) {
                      uVar1 = 0xff;
                    }
                    else {
                      uVar1 = *(undefined1 *)(piVar10[7] + iVar9);
                    }
                    *(undefined1 *)((int)pfVar6 + 0x17) = uVar1;
                    iVar8 = piVar10[4];
                    *(undefined2 *)(pfVar6 + 6) = *(undefined2 *)(iVar8 + iVar7);
                    *(undefined1 *)((int)pfVar6 + 0x1a) = *(undefined1 *)(iVar8 + iVar7 + 2);
                    if ((float)*(byte *)(local_18 + 5 + piVar10[9]) == 0.0) {
                      uVar1 = 0;
                    }
                    else {
                      uVar1 = 0xff;
                    }
                    *(undefined1 *)((int)pfVar6 + 0x1b) = uVar1;
                    if (piVar10[9] == 0) {
                      pfVar6[4] = 0.0;
                      *(undefined1 *)((int)pfVar6 + 0x1f) = 0;
                      *(undefined1 *)((int)pfVar6 + 0x1e) = 0;
                      *(undefined1 *)((int)pfVar6 + 0x1d) = 0;
                      *(undefined1 *)(pfVar6 + 7) = 0;
                    }
                    else {
                      pfVar6[4] = (float)piVar10[8];
                      pfVar6[7] = *(float *)(local_18 + piVar10[9]);
                    }
                    param_1 = param_1 + 0xc;
                    local_18 = local_18 + 6;
                    pfVar6[8] = *(float *)(piVar10[5] + iVar9 * 8);
                    iVar8 = iVar9 * 8;
                    iVar9 = iVar9 + 1;
                    pfVar6[9] = *(float *)(piVar10[5] + 4 + iVar8);
                    pfVar6 = pfVar6 + 0xd;
                    iVar7 = iVar7 + 3;
                    iVar8 = local_2c;
                  } while (iVar9 < piVar10[-1]);
                }
                FUN_00472820(local_a4,piVar10[-1]);
                local_8 = 0xffffffff;
                FUN_00472790(local_a8);
                iVar9 = local_28;
                param_1 = local_30;
              }
              local_28 = iVar9 + 1;
              piVar10 = piVar10 + 0x10;
            } while (local_28 < local_1c);
          }
        }
      }
    }
    bVar3 = FUN_004728f0();
    local_11 = local_11 & bVar3;
    bVar3 = FUN_004744b0();
    bVar3 = local_11 & bVar3;
  }
  ExceptionList = local_10;
  return bVar3;
}



============================================================
DISASSEMBLY
============================================================
004729a0 : PUSH EBP
004729a1 : MOV EBP,ESP
004729a3 : PUSH -0x1
004729a5 : PUSH 0xb82c2d
004729aa : MOV EAX,FS:[0x0]
004729b0 : PUSH EAX
004729b1 : SUB ESP,0x98
004729b7 : PUSH EBX
004729b8 : PUSH ESI
004729b9 : PUSH EDI
004729ba : MOV EAX,[0x00d66fa0]
004729bf : XOR EAX,EBP
004729c1 : PUSH EAX
004729c2 : LEA EAX,[EBP + -0xc]
004729c5 : MOV FS:[0x0],EAX
004729cb : MOV ESI,ECX
004729cd : MOV EDI,dword ptr [ESI + 0x18]
004729d0 : MOV EBX,dword ptr [EBP + 0x8]
004729d3 : MOV ECX,dword ptr [ESI + 0x1c]
004729d6 : ADD EBX,0x1010
004729dc : MOV AL,0x1
004729de : MOV byte ptr [EBP + -0xd],AL
004729e1 : MOV dword ptr [EBP + -0x18],EDI
004729e4 : MOV dword ptr [EBP + -0x20],ECX
004729e7 : MOV dword ptr [EBP + -0x28],EBX
004729ea : TEST EDI,EDI
004729ec : JLE 0x00472d1c
004729f2 : TEST ECX,ECX
004729f4 : JZ 0x00472d1c
004729fa : MOV EAX,0xa
004729ff : MOV EDX,0x4
00472a04 : MOV dword ptr [EBP + 0xffffff7c],EAX
00472a0a : MOV word ptr [EBP + -0x80],DX
00472a0e : MOV dword ptr [EBP + -0x78],EAX
00472a11 : MOV word ptr [EBP + -0x74],DX
00472a15 : MOV word ptr [EBP + -0x68],DX
00472a19 : MOV dword ptr [EBP + -0x64],EAX
00472a1c : MOV word ptr [EBP + -0x5c],DX
00472a20 : MOV word ptr [EBP + -0x50],DX
00472a24 : MOV dword ptr [EBP + -0x48],EAX
00472a27 : MOV dword ptr [EBP + -0x3c],EAX
00472a2a : MOV EDX,0x2
00472a2f : XOR EAX,EAX
00472a31 : MOV dword ptr [EBP + 0xffffff78],0x0
00472a3b : MOV dword ptr [EBP + -0x7c],0x8
00472a42 : MOV dword ptr [EBP + -0x70],0x9
00472a49 : MOV dword ptr [EBP + -0x6c],0x0
00472a50 : MOV dword ptr [EBP + -0x60],0x0
00472a57 : MOV dword ptr [EBP + -0x58],0xb
00472a5e : MOV dword ptr [EBP + -0x54],0x0
00472a65 : MOV dword ptr [EBP + -0x4c],0xc
00472a6c : MOV word ptr [EBP + -0x44],DX
00472a70 : MOV dword ptr [EBP + -0x40],0x11
00472a77 : MOV word ptr [EBP + -0x38],AX
00472a7b : CALL 0x004714e0
00472a80 : MOV byte ptr [EBP + -0x1c],AL
00472a83 : LEA ECX,[EBP + 0xffffff78]
00472a89 : MOV EAX,EBX
00472a8b : CALL 0x00471510
00472a90 : TEST AL,AL
00472a92 : JZ 0x00472d06
00472a98 : XOR EAX,EAX
00472a9a : CMP byte ptr [EBP + -0x1c],AL
00472a9d : SETZ AL
00472aa0 : XOR ECX,ECX
00472aa2 : TEST EAX,EAX
00472aa4 : SETNZ CL
00472aa7 : LEA ECX,[ECX + ECX*0x1 + 0x2]
00472aab : MOV dword ptr [EBX + 0x58],ECX
00472aae : MOV dword ptr [EBX + 0x14],EAX
00472ab1 : TEST EAX,EAX
00472ab3 : JZ 0x00472abe
00472ab5 : CMP EAX,0x1
00472ab8 : JNZ 0x00472d06
00472abe : MOV EAX,dword ptr [ESI + 0x18]
00472ac1 : MOV ESI,dword ptr [ESI + 0x1c]
00472ac4 : XOR ECX,ECX
00472ac6 : XOR EDX,EDX
00472ac8 : TEST EAX,EAX
00472aca : JLE 0x00472af3
00472acc : MOV EDI,ESI
00472ace : MOV dword ptr [EBP + -0x14],EAX
00472ad1 : MOV ESI,dword ptr [EDI]
00472ad3 : ADD ECX,dword ptr [EDI + 0x10]
00472ad6 : TEST ESI,ESI
00472ad8 : JLE 0x00472aea
00472ada : MOV EAX,dword ptr [EDI + 0x4]
00472add : ADD EAX,0x8
00472ae0 : ADD EDX,dword ptr [EAX]
00472ae2 : ADD EAX,0x14
00472ae5 : SUB ESI,0x1
00472ae8 : JNZ 0x00472ae0
00472aea : ADD EDI,0x40
00472aed : SUB dword ptr [EBP + -0x14],0x1
00472af1 : JNZ 0x00472ad1
00472af3 : PUSH EDX
00472af4 : MOV ESI,EBX
00472af6 : CALL 0x00471570
00472afb : TEST AL,AL
00472afd : JZ 0x00472d06
00472b03 : MOV EDI,dword ptr [EBP + 0x8]
00472b06 : MOV EDX,dword ptr [EBP + -0x18]
00472b09 : MOV ECX,dword ptr [EBP + -0x20]
00472b0c : ADD EDI,0xe90
00472b12 : PUSH EDX
00472b13 : MOV ESI,EDI
00472b15 : MOV dword ptr [EBP + -0x2c],EDI
00472b18 : CALL 0x00471ba0
00472b1d : XOR ECX,ECX
00472b1f : CMP dword ptr [EBP + -0x18],ECX
00472b22 : MOV dword ptr [EBP + -0x24],ECX
00472b25 : JLE 0x00472d06
00472b2b : MOV ESI,dword ptr [EBP + -0x20]
00472b2e : ADD ESI,0x14
00472b31 : LEA EDX,[ESI + -0x14]
00472b34 : MOV EAX,EDX
00472b36 : CALL 0x00806e10
00472b3b : TEST AL,AL
00472b3d : JZ 0x00472cf6
00472b43 : MOV EAX,dword ptr [EBP + -0x1c]
00472b46 : PUSH EAX
00472b47 : PUSH EDI
00472b48 : PUSH EBX
00472b49 : PUSH EDX
00472b4a : PUSH ECX
00472b4b : CALL 0x00472020
00472b50 : MOV ECX,dword ptr [ESI + -0x4]
00472b53 : AND byte ptr [EBP + -0xd],AL
00472b56 : PUSH ECX
00472b57 : LEA EDX,[EBP + 0xffffff5c]
00472b5d : PUSH EDX
00472b5e : CALL 0x004725a0
00472b63 : XOR EDX,EDX
00472b65 : MOV dword ptr [EBP + -0x4],EDX
00472b68 : CMP dword ptr [ESI + -0x4],EDX
00472b6b : JLE 0x00472ccb
00472b71 : MOV ECX,dword ptr [EBP + 0xffffff60]
00472b77 : MOVSS XMM4,dword ptr [0x00c18874]
00472b7f : MOVSS XMM3,dword ptr [0x00c10fc4]
00472b87 : MOVSS XMM2,dword ptr [0x00cdf198]
00472b8f : XORPS XMM1,XMM1
00472b92 : XOR EBX,EBX
00472b94 : MOV dword ptr [EBP + -0x14],EDX
00472b97 : MOV dword ptr [EBP + 0x8],EDX
00472b9a : ADD ECX,0xc
00472b9d : MOV EAX,dword ptr [ESI]
00472b9f : ADD EAX,dword ptr [EBP + 0x8]
00472ba2 : MOVQ XMM0,qword ptr [EAX]
00472ba6 : MOVQ qword ptr [ECX + -0xc],XMM0
00472bab : MOV EAX,dword ptr [EAX + 0x8]
00472bae : MOV dword ptr [ECX + -0x4],EAX
00472bb1 : MOV EDI,dword ptr [ESI + 0x24]
00472bb4 : TEST EDI,EDI
00472bb6 : JZ 0x00472be9
00472bb8 : MOV EAX,dword ptr [EBP + -0x14]
00472bbb : MOV AL,byte ptr [EAX + EDI*0x1 + 0x4]
00472bbf : CMP AL,0x7f
00472bc1 : JNZ 0x00472bd0
00472bc3 : MOVAPS XMM0,XMM1
00472bc6 : MULSS XMM0,XMM4
00472bca : MOVSS dword ptr [ECX],XMM0
00472bce : JMP 0x00472bed
00472bd0 : MOVZX EAX,AL
00472bd3 : CVTSI2SS XMM0,EAX
00472bd7 : MULSS XMM0,XMM2
00472bdb : SUBSS XMM0,XMM3
00472bdf : MULSS XMM0,XMM4
00472be3 : MOVSS dword ptr [ECX],XMM0
00472be7 : JMP 0x00472bed
00472be9 : MOVSS dword ptr [ECX],XMM1
00472bed : MOV EAX,dword ptr [ESI + 0x4]
00472bf0 : TEST EAX,EAX
00472bf2 : JZ 0x00472bfb
00472bf4 : MOV EDI,dword ptr [EBP + 0x8]
00472bf7 : ADD EAX,EDI
00472bf9 : JMP 0x00472c00
00472bfb : MOV EAX,dword ptr [ESI]
00472bfd : ADD EAX,dword ptr [EBP + 0x8]
00472c00 : MOVQ XMM0,qword ptr [EAX]
00472c04 : MOVQ qword ptr [ECX + 0x4],XMM0
00472c09 : MOV EAX,dword ptr [EAX + 0x8]
00472c0c : MOV dword ptr [ECX + 0xc],EAX
00472c0f : MOV EAX,dword ptr [ESI + 0x8]
00472c12 : MOV DI,word ptr [EAX + EBX*0x1]
00472c16 : ADD EAX,EBX
00472c18 : MOV word ptr [ECX + 0x14],DI
00472c1c : MOV AL,byte ptr [EAX + 0x2]
00472c1f : MOV byte ptr [ECX + 0x16],AL
00472c22 : MOV EDI,dword ptr [ESI + 0x1c]
00472c25 : TEST EDI,EDI
00472c27 : JZ 0x00472c2f
00472c29 : MOVZX EAX,byte ptr [EDI + EDX*0x1]
00472c2d : JMP 0x00472c34
00472c2f : MOV EAX,0xff
00472c34 : MOV byte ptr [ECX + 0x17],AL
00472c37 : MOV EAX,dword ptr [ESI + 0x10]
00472c3a : MOV DI,word ptr [EAX + EBX*0x1]
00472c3e : ADD EAX,EBX
00472c40 : MOV word ptr [ECX + 0x18],DI
00472c44 : MOV AL,byte ptr [EAX + 0x2]
00472c47 : MOV EDI,dword ptr [EBP + -0x14]
00472c4a : MOV byte ptr [ECX + 0x1a],AL
00472c4d : MOV EAX,dword ptr [ESI + 0x24]
00472c50 : MOVZX EAX,byte ptr [EDI + EAX*0x1 + 0x5]
00472c55 : CVTSI2SS XMM0,EAX
00472c59 : UCOMISS XMM0,XMM1
00472c5c : LAHF
00472c5d : TEST AH,0x44
00472c60 : JNP 0x00472c69
00472c62 : MOV EAX,0xff
00472c67 : JMP 0x00472c6b
00472c69 : XOR EAX,EAX
00472c6b : MOV byte ptr [ECX + 0x1b],AL
00472c6e : CMP dword ptr [ESI + 0x24],0x0
00472c72 : JZ 0x00472c88
00472c74 : FLD float ptr [ESI + 0x20]
00472c77 : MOV EDI,dword ptr [EBP + -0x14]
00472c7a : FSTP float ptr [ECX + 0x10]
00472c7d : MOV EAX,dword ptr [ESI + 0x24]
00472c80 : MOV EAX,dword ptr [EDI + EAX*0x1]
00472c83 : MOV dword ptr [ECX + 0x1c],EAX
00472c86 : JMP 0x00472c9d
00472c88 : MOVSS dword ptr [ECX + 0x10],XMM1
00472c8d : MOV byte ptr [ECX + 0x1f],0x0
00472c91 : MOV byte ptr [ECX + 0x1e],0x0
00472c95 : MOV byte ptr [ECX + 0x1d],0x0
00472c99 : MOV byte ptr [ECX + 0x1c],0x0
00472c9d : MOV EAX,dword ptr [ESI + 0x14]
00472ca0 : FLD float ptr [EAX + EDX*0x8]
00472ca3 : ADD dword ptr [EBP + 0x8],0xc
00472ca7 : ADD dword ptr [EBP + -0x14],0x6
00472cab : FSTP float ptr [ECX + 0x20]
00472cae : MOV EAX,dword ptr [ESI + 0x14]
00472cb1 : FLD float ptr [EAX + EDX*0x8 + 0x4]
00472cb5 : INC EDX
00472cb6 : FSTP float ptr [ECX + 0x24]
00472cb9 : ADD ECX,0x34
00472cbc : ADD EBX,0x3
00472cbf : CMP EDX,dword ptr [ESI + -0x4]
00472cc2 : JL 0x00472b9d
00472cc8 : MOV EBX,dword ptr [EBP + -0x28]
00472ccb : MOV ECX,dword ptr [ESI + -0x4]
00472cce : MOV EDX,dword ptr [EBP + 0xffffff60]
00472cd4 : PUSH ECX
00472cd5 : PUSH EDX
00472cd6 : MOV EDI,EBX
00472cd8 : CALL 0x00472820
00472cdd : MOV dword ptr [EBP + -0x4],0xffffffff
00472ce4 : LEA EAX,[EBP + 0xffffff5c]
00472cea : PUSH EAX
00472ceb : CALL 0x00472790
00472cf0 : MOV EDI,dword ptr [EBP + -0x2c]
00472cf3 : MOV ECX,dword ptr [EBP + -0x24]
00472cf6 : INC ECX
00472cf7 : ADD ESI,0x40
00472cfa : CMP ECX,dword ptr [EBP + -0x18]
00472cfd : MOV dword ptr [EBP + -0x24],ECX
00472d00 : JL 0x00472b31
00472d06 : MOV EDI,EBX
00472d08 : CALL 0x004728f0
00472d0d : AND byte ptr [EBP + -0xd],AL
00472d10 : CALL 0x004744b0
00472d15 : MOV CL,byte ptr [EBP + -0xd]
00472d18 : AND CL,AL
00472d1a : MOV AL,CL
00472d1c : MOV ECX,dword ptr [EBP + -0xc]
00472d1f : MOV dword ptr FS:[0x0],ECX
00472d26 : POP ECX
00472d27 : POP EDI
00472d28 : POP ESI
00472d29 : POP EBX
00472d2a : MOV ESP,EBP
00472d2c : POP EBP
00472d2d : RET 0x4
