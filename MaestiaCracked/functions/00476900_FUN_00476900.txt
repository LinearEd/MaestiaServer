PROGRAM  : Maestia.exe
FUNCTION : FUN_00476900
ENTRY    : 00476900
BODY     : [[00476900, 00476b9a]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00476a20) */
/* WARNING: Removing unreachable block (ram,0x00476a30) */
/* WARNING: Removing unreachable block (ram,0x00476a39) */
/* WARNING: Removing unreachable block (ram,0x00476a3c) */
/* WARNING: Removing unreachable block (ram,0x00476a2c) */
/* WARNING: Removing unreachable block (ram,0x00476a49) */
/* WARNING: Removing unreachable block (ram,0x00476a59) */
/* WARNING: Removing unreachable block (ram,0x00476a64) */
/* WARNING: Removing unreachable block (ram,0x00476a60) */
/* WARNING: Removing unreachable block (ram,0x00476a54) */
/* WARNING: Removing unreachable block (ram,0x00476a67) */
/* WARNING: Removing unreachable block (ram,0x00476a77) */
/* WARNING: Removing unreachable block (ram,0x00476a7f) */

void FUN_00476900(int param_1,undefined4 param_2,int *param_3)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  undefined4 uVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  undefined1 local_60 [40];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  int local_1c;
  int *local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7bf38;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_3 + 0x19) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_38);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_60,&DAT_00ced890);
  }
  local_18 = param_3;
  FUN_0042cc60(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar7 = (int *)*param_3;
  if (*(char *)((int)piVar7 + 0x19) == '\0') {
    if (*(char *)(param_3[2] + 0x19) == '\0') {
      piVar7 = (int *)param_3[2];
    }
  }
  else {
    piVar7 = (int *)param_3[2];
  }
  piVar6 = (int *)param_3[1];
  if (*(char *)((int)piVar7 + 0x19) == '\0') {
    piVar7[1] = (int)piVar6;
  }
  if (*(int **)(*(int *)(param_1 + 4) + 4) == param_3) {
    *(int **)(*(int *)(param_1 + 4) + 4) = piVar7;
  }
  else if ((int *)*piVar6 == param_3) {
    *piVar6 = (int)piVar7;
  }
  else {
    piVar6[2] = (int)piVar7;
  }
  if ((int *)**(undefined4 **)(param_1 + 4) == param_3) {
    piVar5 = piVar6;
    if (*(char *)((int)piVar7 + 0x19) == '\0') {
      cVar1 = *(char *)(*piVar7 + 0x19);
      piVar2 = (int *)*piVar7;
      piVar5 = piVar7;
      while (piVar3 = piVar2, cVar1 == '\0') {
        piVar2 = (int *)*piVar3;
        cVar1 = *(char *)((int)piVar2 + 0x19);
        piVar5 = piVar3;
      }
    }
    **(undefined4 **)(param_1 + 4) = piVar5;
  }
  local_1c = *(int *)(param_1 + 4);
  if (*(int **)(local_1c + 8) == param_3) {
    if (*(char *)((int)piVar7 + 0x19) == '\0') {
      uVar4 = FUN_0041a700();
      *(undefined4 *)(local_1c + 8) = uVar4;
    }
    else {
      *(int **)(local_1c + 8) = piVar6;
    }
  }
  if ((char)local_18[6] == '\x01') {
    if (piVar7 != *(int **)(*(int *)(param_1 + 4) + 4)) {
      do {
        piVar5 = piVar6;
        if ((char)piVar7[6] != '\x01') break;
        piVar6 = (int *)*piVar5;
        if (piVar7 == piVar6) {
          piVar6 = (int *)piVar5[2];
          if ((char)piVar6[6] == '\0') {
            *(undefined1 *)(piVar6 + 6) = 1;
            *(undefined1 *)(piVar5 + 6) = 0;
            FUN_004767d0(param_1);
            piVar6 = (int *)piVar5[2];
          }
          if (*(char *)((int)piVar6 + 0x19) == '\0') {
            if ((*(char *)(*piVar6 + 0x18) != '\x01') || (*(char *)(piVar6[2] + 0x18) != '\x01')) {
              if (*(char *)(piVar6[2] + 0x18) == '\x01') {
                *(undefined1 *)(*piVar6 + 0x18) = 1;
                *(undefined1 *)(piVar6 + 6) = 0;
                FUN_0041a240(param_1);
                piVar6 = (int *)piVar5[2];
              }
              *(char *)(piVar6 + 6) = (char)piVar5[6];
              *(undefined1 *)(piVar5 + 6) = 1;
              *(undefined1 *)(piVar6[2] + 0x18) = 1;
              FUN_004767d0(param_1);
              break;
            }
LAB_00476b47:
            *(undefined1 *)(piVar6 + 6) = 0;
          }
        }
        else {
          if ((char)piVar6[6] == '\0') {
            *(undefined1 *)(piVar6 + 6) = 1;
            *(undefined1 *)(piVar5 + 6) = 0;
            FUN_0041a240(param_1);
            piVar6 = (int *)*piVar5;
          }
          if (*(char *)((int)piVar6 + 0x19) == '\0') {
            if ((*(char *)(piVar6[2] + 0x18) == '\x01') && (*(char *)(*piVar6 + 0x18) == '\x01'))
            goto LAB_00476b47;
            if (*(char *)(*piVar6 + 0x18) == '\x01') {
              *(undefined1 *)(piVar6[2] + 0x18) = 1;
              *(undefined1 *)(piVar6 + 6) = 0;
              FUN_004767d0(param_1);
              piVar6 = (int *)*piVar5;
            }
            *(char *)(piVar6 + 6) = (char)piVar5[6];
            *(undefined1 *)(piVar5 + 6) = 1;
            *(undefined1 *)(*piVar6 + 0x18) = 1;
            FUN_0041a240(param_1);
            break;
          }
        }
        piVar6 = (int *)piVar5[1];
        piVar7 = piVar5;
      } while (piVar5 != *(int **)(*(int *)(param_1 + 4) + 4));
    }
    *(undefined1 *)(piVar7 + 6) = 1;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00476900 : PUSH EBP
00476901 : MOV EBP,ESP
00476903 : PUSH -0x1
00476905 : PUSH 0xb7bf38
0047690a : MOV EAX,FS:[0x0]
00476910 : PUSH EAX
00476911 : SUB ESP,0x50
00476914 : PUSH EBX
00476915 : PUSH ESI
00476916 : PUSH EDI
00476917 : MOV EAX,[0x00d66fa0]
0047691c : XOR EAX,EBP
0047691e : PUSH EAX
0047691f : LEA EAX,[EBP + -0xc]
00476922 : MOV FS:[0x0],EAX
00476928 : MOV EAX,dword ptr [EBP + 0x10]
0047692b : CMP byte ptr [EAX + 0x19],0x0
0047692f : JZ 0x0047696d
00476931 : PUSH 0x1b
00476933 : XOR ESI,ESI
00476935 : PUSH 0xcca4a8
0047693a : LEA ECX,[EBP + -0x34]
0047693d : MOV dword ptr [EBP + -0x1c],0xf
00476944 : MOV dword ptr [EBP + -0x20],ESI
00476947 : MOV byte ptr [EBP + -0x30],0x0
0047694b : CALL 0x00404b50
00476950 : MOV dword ptr [EBP + -0x4],ESI
00476953 : LEA EAX,[EBP + -0x34]
00476956 : PUSH EAX
00476957 : LEA ECX,[EBP + -0x5c]
0047695a : CALL 0x00403c10
0047695f : PUSH 0xced890
00476964 : LEA ECX,[EBP + -0x5c]
00476967 : PUSH ECX
00476968 : CALL 0x006409eb
0047696d : MOV EBX,EAX
0047696f : LEA EDX,[EBP + 0x10]
00476972 : MOV dword ptr [EBP + -0x14],EBX
00476975 : CALL 0x0042cc60
0047697a : MOV ECX,dword ptr [EBX]
0047697c : CMP byte ptr [ECX + 0x19],0x0
00476980 : JZ 0x00476987
00476982 : MOV EDI,dword ptr [EBX + 0x8]
00476985 : JMP 0x004769a1
00476987 : MOV EDX,dword ptr [EBX + 0x8]
0047698a : CMP byte ptr [EDX + 0x19],0x0
0047698e : JZ 0x00476994
00476990 : MOV EDI,ECX
00476992 : JMP 0x004769a1
00476994 : MOV EAX,dword ptr [EBP + 0x10]
00476997 : MOV EDI,dword ptr [EAX + 0x8]
0047699a : LEA EDX,[EAX + 0x8]
0047699d : CMP EAX,EBX
0047699f : JNZ 0x00476a20
004769a1 : CMP byte ptr [EDI + 0x19],0x0
004769a5 : MOV ESI,dword ptr [EBX + 0x4]
004769a8 : JNZ 0x004769ad
004769aa : MOV dword ptr [EDI + 0x4],ESI
004769ad : MOV EDX,dword ptr [EBP + 0x8]
004769b0 : MOV EAX,dword ptr [EDX + 0x4]
004769b3 : CMP dword ptr [EAX + 0x4],EBX
004769b6 : JNZ 0x004769bd
004769b8 : MOV dword ptr [EAX + 0x4],EDI
004769bb : JMP 0x004769c8
004769bd : CMP dword ptr [ESI],EBX
004769bf : JNZ 0x004769c5
004769c1 : MOV dword ptr [ESI],EDI
004769c3 : JMP 0x004769c8
004769c5 : MOV dword ptr [ESI + 0x8],EDI
004769c8 : MOV EAX,dword ptr [EDX + 0x4]
004769cb : CMP dword ptr [EAX],EBX
004769cd : JNZ 0x004769f2
004769cf : CMP byte ptr [EDI + 0x19],0x0
004769d3 : JZ 0x004769d9
004769d5 : MOV ECX,ESI
004769d7 : JMP 0x004769ed
004769d9 : MOV EAX,dword ptr [EDI]
004769db : CMP byte ptr [EAX + 0x19],0x0
004769df : MOV ECX,EDI
004769e1 : JNZ 0x004769ed
004769e3 : MOV ECX,EAX
004769e5 : MOV EAX,dword ptr [ECX]
004769e7 : CMP byte ptr [EAX + 0x19],0x0
004769eb : JZ 0x004769e3
004769ed : MOV EAX,dword ptr [EDX + 0x4]
004769f0 : MOV dword ptr [EAX],ECX
004769f2 : MOV ECX,dword ptr [EDX + 0x4]
004769f5 : MOV dword ptr [EBP + -0x18],ECX
004769f8 : CMP dword ptr [ECX + 0x8],EBX
004769fb : JNZ 0x00476a82
00476a01 : CMP byte ptr [EDI + 0x19],0x0
00476a05 : JZ 0x00476a0e
00476a07 : MOV EAX,ESI
00476a09 : MOV dword ptr [ECX + 0x8],EAX
00476a0c : JMP 0x00476a82
00476a0e : MOV EAX,EDI
00476a10 : CALL 0x0041a700
00476a15 : MOV ECX,dword ptr [EBP + -0x18]
00476a18 : MOV EDX,dword ptr [EBP + 0x8]
00476a1b : MOV dword ptr [ECX + 0x8],EAX
00476a1e : JMP 0x00476a82
00476a20 : MOV dword ptr [ECX + 0x4],EAX
00476a23 : MOV ECX,dword ptr [EBX]
00476a25 : MOV dword ptr [EAX],ECX
00476a27 : CMP EAX,dword ptr [EBX + 0x8]
00476a2a : JNZ 0x00476a30
00476a2c : MOV ESI,EAX
00476a2e : JMP 0x00476a49
00476a30 : CMP byte ptr [EDI + 0x19],0x0
00476a34 : MOV ESI,dword ptr [EAX + 0x4]
00476a37 : JNZ 0x00476a3c
00476a39 : MOV dword ptr [EDI + 0x4],ESI
00476a3c : MOV dword ptr [ESI],EDI
00476a3e : MOV ECX,dword ptr [EBX + 0x8]
00476a41 : MOV dword ptr [EDX],ECX
00476a43 : MOV EDX,dword ptr [EBX + 0x8]
00476a46 : MOV dword ptr [EDX + 0x4],EAX
00476a49 : MOV ECX,dword ptr [EBP + 0x8]
00476a4c : MOV ECX,dword ptr [ECX + 0x4]
00476a4f : CMP dword ptr [ECX + 0x4],EBX
00476a52 : JNZ 0x00476a59
00476a54 : MOV dword ptr [ECX + 0x4],EAX
00476a57 : JMP 0x00476a67
00476a59 : MOV ECX,dword ptr [EBX + 0x4]
00476a5c : CMP dword ptr [ECX],EBX
00476a5e : JNZ 0x00476a64
00476a60 : MOV dword ptr [ECX],EAX
00476a62 : JMP 0x00476a67
00476a64 : MOV dword ptr [ECX + 0x8],EAX
00476a67 : MOV EDX,dword ptr [EBX + 0x4]
00476a6a : MOV dword ptr [EAX + 0x4],EDX
00476a6d : LEA ECX,[EBX + 0x18]
00476a70 : ADD EAX,0x18
00476a73 : CMP EAX,ECX
00476a75 : JZ 0x00476a7f
00476a77 : MOV BL,byte ptr [ECX]
00476a79 : MOV DL,byte ptr [EAX]
00476a7b : MOV byte ptr [EAX],BL
00476a7d : MOV byte ptr [ECX],DL
00476a7f : MOV EDX,dword ptr [EBP + 0x8]
00476a82 : MOV EAX,dword ptr [EBP + -0x14]
00476a85 : MOV BL,0x1
00476a87 : CMP byte ptr [EAX + 0x18],BL
00476a8a : JNZ 0x00476b93
00476a90 : MOV ECX,dword ptr [EDX + 0x4]
00476a93 : CMP EDI,dword ptr [ECX + 0x4]
00476a96 : JZ 0x00476b90
00476a9c : LEA ESP,[ESP]
00476aa0 : CMP byte ptr [EDI + 0x18],BL
00476aa3 : JNZ 0x00476b90
00476aa9 : MOV ECX,dword ptr [ESI]
00476aab : CMP EDI,ECX
00476aad : JNZ 0x00476b18
00476aaf : MOV ECX,dword ptr [ESI + 0x8]
00476ab2 : CMP byte ptr [ECX + 0x18],0x0
00476ab6 : JNZ 0x00476acd
00476ab8 : MOV byte ptr [ECX + 0x18],BL
00476abb : PUSH EDX
00476abc : MOV ECX,ESI
00476abe : MOV byte ptr [ESI + 0x18],0x0
00476ac2 : CALL 0x004767d0
00476ac7 : MOV ECX,dword ptr [ESI + 0x8]
00476aca : MOV EDX,dword ptr [EBP + 0x8]
00476acd : CMP byte ptr [ECX + 0x19],0x0
00476ad1 : JNZ 0x00476b4b
00476ad3 : MOV EAX,dword ptr [ECX]
00476ad5 : CMP byte ptr [EAX + 0x18],BL
00476ad8 : JNZ 0x00476ae2
00476ada : MOV EAX,dword ptr [ECX + 0x8]
00476add : CMP byte ptr [EAX + 0x18],BL
00476ae0 : JZ 0x00476b47
00476ae2 : MOV EAX,dword ptr [ECX + 0x8]
00476ae5 : CMP byte ptr [EAX + 0x18],BL
00476ae8 : JNZ 0x00476aff
00476aea : MOV EAX,dword ptr [ECX]
00476aec : MOV byte ptr [EAX + 0x18],BL
00476aef : PUSH EDX
00476af0 : MOV byte ptr [ECX + 0x18],0x0
00476af4 : CALL 0x0041a240
00476af9 : MOV ECX,dword ptr [ESI + 0x8]
00476afc : MOV EDX,dword ptr [EBP + 0x8]
00476aff : MOV AL,byte ptr [ESI + 0x18]
00476b02 : MOV byte ptr [ECX + 0x18],AL
00476b05 : MOV byte ptr [ESI + 0x18],BL
00476b08 : MOV ECX,dword ptr [ECX + 0x8]
00476b0b : MOV byte ptr [ECX + 0x18],BL
00476b0e : PUSH EDX
00476b0f : MOV ECX,ESI
00476b11 : CALL 0x004767d0
00476b16 : JMP 0x00476b90
00476b18 : CMP byte ptr [ECX + 0x18],0x0
00476b1c : JNZ 0x00476b32
00476b1e : MOV byte ptr [ECX + 0x18],BL
00476b21 : PUSH EDX
00476b22 : MOV ECX,ESI
00476b24 : MOV byte ptr [ESI + 0x18],0x0
00476b28 : CALL 0x0041a240
00476b2d : MOV ECX,dword ptr [ESI]
00476b2f : MOV EDX,dword ptr [EBP + 0x8]
00476b32 : CMP byte ptr [ECX + 0x19],0x0
00476b36 : JNZ 0x00476b4b
00476b38 : MOV EAX,dword ptr [ECX + 0x8]
00476b3b : CMP byte ptr [EAX + 0x18],BL
00476b3e : JNZ 0x00476b5e
00476b40 : MOV EAX,dword ptr [ECX]
00476b42 : CMP byte ptr [EAX + 0x18],BL
00476b45 : JNZ 0x00476b5e
00476b47 : MOV byte ptr [ECX + 0x18],0x0
00476b4b : MOV ECX,dword ptr [EDX + 0x4]
00476b4e : MOV EDI,ESI
00476b50 : MOV ESI,dword ptr [ESI + 0x4]
00476b53 : CMP EDI,dword ptr [ECX + 0x4]
00476b56 : JNZ 0x00476aa0
00476b5c : JMP 0x00476b90
00476b5e : MOV EAX,dword ptr [ECX]
00476b60 : CMP byte ptr [EAX + 0x18],BL
00476b63 : JNZ 0x00476b7a
00476b65 : MOV EAX,dword ptr [ECX + 0x8]
00476b68 : MOV byte ptr [EAX + 0x18],BL
00476b6b : PUSH EDX
00476b6c : MOV byte ptr [ECX + 0x18],0x0
00476b70 : CALL 0x004767d0
00476b75 : MOV ECX,dword ptr [ESI]
00476b77 : MOV EDX,dword ptr [EBP + 0x8]
00476b7a : MOV AL,byte ptr [ESI + 0x18]
00476b7d : MOV byte ptr [ECX + 0x18],AL
00476b80 : MOV byte ptr [ESI + 0x18],BL
00476b83 : MOV ECX,dword ptr [ECX]
00476b85 : MOV byte ptr [ECX + 0x18],BL
00476b88 : PUSH EDX
00476b89 : MOV ECX,ESI
00476b8b : CALL 0x0041a240
00476b90 : MOV byte ptr [EDI + 0x18],BL
00476b93 : MOV ECX,dword ptr [EBP + -0x14]
00476b96 : CALL 0x006f04e0
