PROGRAM  : Maestia.exe
FUNCTION : FUN_005033a0
ENTRY    : 005033a0
BODY     : [[005033a0, 005033dd]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005033a0(int *param_1)

{
  int *piVar1;
  int iVar2;
  undefined4 *in_ECX;
  
  piVar1 = (int *)*in_ECX;
  if (piVar1 != (int *)0x0) {
    if (piVar1[1] != 0) {
      iVar2 = piVar1[1];
      *param_1 = iVar2;
      if (iVar2 == 0) {
        return;
      }
      *(int *)(iVar2 + 4) = *(int *)(iVar2 + 4) + 1;
      return;
    }
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00515cf0(piVar1);
    }
    *in_ECX = 0;
  }
  *param_1 = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005033a0 : PUSH ESI
005033a1 : MOV ESI,ECX
005033a3 : MOV EAX,dword ptr [ESI]
005033a5 : PUSH EDI
005033a6 : XOR EDI,EDI
005033a8 : TEST EAX,EAX
005033aa : JZ 0x005033d3
005033ac : CMP dword ptr [EAX + 0x4],EDI
005033af : JZ 0x005033c6
005033b1 : MOV ECX,dword ptr [EAX + 0x4]
005033b4 : MOV EAX,dword ptr [ESP + 0xc]
005033b8 : MOV dword ptr [EAX],ECX
005033ba : TEST ECX,ECX
005033bc : JZ 0x005033d9
005033be : INC dword ptr [ECX + 0x4]
005033c1 : POP EDI
005033c2 : POP ESI
005033c3 : RET 0x4
005033c6 : ADD dword ptr [EAX],-0x1
005033c9 : JNZ 0x005033d1
005033cb : PUSH EAX
005033cc : CALL 0x00515cf0
005033d1 : MOV dword ptr [ESI],EDI
005033d3 : MOV EAX,dword ptr [ESP + 0xc]
005033d7 : MOV dword ptr [EAX],EDI
005033d9 : POP EDI
005033da : POP ESI
005033db : RET 0x4
