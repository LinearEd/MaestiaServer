PROGRAM  : Maestia.exe
FUNCTION : FUN_006e4b60
ENTRY    : 006e4b60
BODY     : [[006e4b60, 006e4c79] [006e4c80, 006e4d22]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006e4b60(int param_1,int param_2,uint *param_3,uint param_4,undefined4 param_5,
                 uint *param_6,uint param_7)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  undefined4 *puStack_8;
  
  iVar4 = param_1;
  iVar1 = *(int *)(param_1 + 0x144);
  uVar2 = *param_6;
  iVar3 = *(int *)(param_1 + 0xdc) * 3;
  do {
    if (param_7 <= uVar2) {
      return;
    }
    uVar2 = *param_3;
    if (uVar2 < param_4) {
      uVar6 = *(int *)(iVar1 + 0x3c) - *(int *)(iVar1 + 0x34);
      if (param_4 - uVar2 <= uVar6) {
        uVar6 = param_4 - uVar2;
      }
      puStack_8 = (undefined4 *)(iVar1 + 8);
      (**(code **)(*(int *)(iVar4 + 0x150) + 4))
                (iVar4,param_2 + uVar2 * 4,puStack_8,*(int *)(iVar1 + 0x34),uVar6);
      if ((*(int *)(iVar1 + 0x30) == *(int *)(iVar4 + 0x20)) &&
         (param_1 = 0, 0 < *(int *)(iVar4 + 0x3c))) {
        iVar5 = *(int *)(iVar4 + 0xdc);
        do {
          iVar8 = 1;
          if (0 < iVar5) {
            iVar7 = -1;
            do {
              FUN_006d95b0(*puStack_8,0,*puStack_8,iVar7,1,*(undefined4 *)(iVar4 + 0x1c));
              iVar5 = *(int *)(iVar4 + 0xdc);
              iVar8 = iVar8 + 1;
              iVar7 = iVar7 + -1;
            } while (iVar8 <= iVar5);
          }
          puStack_8 = puStack_8 + 1;
          param_1 = param_1 + 1;
        } while (param_1 < *(int *)(iVar4 + 0x3c));
      }
      *param_3 = *param_3 + uVar6;
      *(int *)(iVar1 + 0x34) = *(int *)(iVar1 + 0x34) + uVar6;
      *(int *)(iVar1 + 0x30) = *(int *)(iVar1 + 0x30) - uVar6;
    }
    else {
      if (*(int *)(iVar1 + 0x30) != 0) {
        return;
      }
      if (*(int *)(iVar1 + 0x34) < *(int *)(iVar1 + 0x3c)) {
        param_1 = 0;
        if (0 < *(int *)(iVar4 + 0x3c)) {
          do {
            FUN_006e49a0(*(undefined4 *)(iVar4 + 0x1c));
            param_1 = param_1 + 1;
          } while (param_1 < *(int *)(iVar4 + 0x3c));
        }
        *(undefined4 *)(iVar1 + 0x34) = *(undefined4 *)(iVar1 + 0x3c);
      }
    }
    if (*(int *)(iVar1 + 0x34) == *(int *)(iVar1 + 0x3c)) {
      (**(code **)(*(int *)(iVar4 + 0x154) + 4))
                (iVar4,iVar1 + 8,*(undefined4 *)(iVar1 + 0x38),param_5,*param_6);
      *param_6 = *param_6 + 1;
      *(int *)(iVar1 + 0x38) = *(int *)(iVar1 + 0x38) + *(int *)(iVar4 + 0xdc);
      if (iVar3 <= *(int *)(iVar1 + 0x38)) {
        *(undefined4 *)(iVar1 + 0x38) = 0;
      }
      if (iVar3 <= *(int *)(iVar1 + 0x34)) {
        *(undefined4 *)(iVar1 + 0x34) = 0;
      }
      *(int *)(iVar1 + 0x3c) = *(int *)(iVar4 + 0xdc) + *(int *)(iVar1 + 0x34);
    }
    uVar2 = *param_6;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
006e4b60 : SUB ESP,0xc
006e4b63 : PUSH EBP
006e4b64 : PUSH ESI
006e4b65 : MOV ESI,dword ptr [ESP + 0x18]
006e4b69 : MOV EAX,dword ptr [ESI + 0xdc]
006e4b6f : MOV EBP,dword ptr [ESI + 0x144]
006e4b75 : PUSH EDI
006e4b76 : MOV EDI,dword ptr [ESP + 0x30]
006e4b7a : MOV ECX,dword ptr [EDI]
006e4b7c : LEA EAX,[EAX + EAX*0x2]
006e4b7f : MOV dword ptr [ESP + 0x14],EAX
006e4b83 : CMP ECX,dword ptr [ESP + 0x34]
006e4b87 : JNC 0x006e4d1c
006e4b8d : PUSH EBX
006e4b8e : MOV EDI,EDI
006e4b90 : MOV EDX,dword ptr [ESP + 0x28]
006e4b94 : MOV EDX,dword ptr [EDX]
006e4b96 : MOV EAX,dword ptr [ESP + 0x2c]
006e4b9a : CMP EDX,EAX
006e4b9c : JNC 0x006e4c51
006e4ba2 : MOV ECX,dword ptr [EBP + 0x34]
006e4ba5 : MOV EBX,dword ptr [EBP + 0x3c]
006e4ba8 : SUB EBX,ECX
006e4baa : SUB EAX,EDX
006e4bac : MOV dword ptr [ESP + 0x10],EBX
006e4bb0 : CMP EBX,EAX
006e4bb2 : JC 0x006e4bba
006e4bb4 : MOV dword ptr [ESP + 0x10],EAX
006e4bb8 : MOV EBX,EAX
006e4bba : MOV EAX,dword ptr [ESI + 0x150]
006e4bc0 : MOV EAX,dword ptr [EAX + 0x4]
006e4bc3 : PUSH EBX
006e4bc4 : PUSH ECX
006e4bc5 : MOV ECX,dword ptr [ESP + 0x2c]
006e4bc9 : LEA EDI,[EBP + 0x8]
006e4bcc : PUSH EDI
006e4bcd : LEA EDX,[ECX + EDX*0x4]
006e4bd0 : PUSH EDX
006e4bd1 : PUSH ESI
006e4bd2 : CALL EAX
006e4bd4 : MOV ECX,dword ptr [EBP + 0x30]
006e4bd7 : ADD ESP,0x14
006e4bda : CMP ECX,dword ptr [ESI + 0x20]
006e4bdd : JNZ 0x006e4c3f
006e4bdf : CMP dword ptr [ESI + 0x3c],0x0
006e4be3 : MOV dword ptr [ESP + 0x20],0x0
006e4beb : JLE 0x006e4c3f
006e4bed : MOV EAX,dword ptr [ESI + 0xdc]
006e4bf3 : MOV dword ptr [ESP + 0x14],EDI
006e4bf7 : MOV EDI,0x1
006e4bfc : CMP EAX,EDI
006e4bfe : JL 0x006e4c2c
006e4c00 : OR EBX,0xffffffff
006e4c03 : MOV ECX,dword ptr [ESI + 0x1c]
006e4c06 : MOV EDX,dword ptr [ESP + 0x14]
006e4c0a : MOV EAX,dword ptr [EDX]
006e4c0c : PUSH ECX
006e4c0d : PUSH 0x1
006e4c0f : PUSH EBX
006e4c10 : PUSH EAX
006e4c11 : PUSH 0x0
006e4c13 : PUSH EAX
006e4c14 : CALL 0x006d95b0
006e4c19 : MOV EAX,dword ptr [ESI + 0xdc]
006e4c1f : INC EDI
006e4c20 : ADD ESP,0x18
006e4c23 : DEC EBX
006e4c24 : CMP EDI,EAX
006e4c26 : JLE 0x006e4c03
006e4c28 : MOV EBX,dword ptr [ESP + 0x10]
006e4c2c : MOV ECX,dword ptr [ESP + 0x20]
006e4c30 : ADD dword ptr [ESP + 0x14],0x4
006e4c35 : INC ECX
006e4c36 : CMP ECX,dword ptr [ESI + 0x3c]
006e4c39 : MOV dword ptr [ESP + 0x20],ECX
006e4c3d : JL 0x006e4bf7
006e4c3f : MOV EAX,dword ptr [ESP + 0x28]
006e4c43 : ADD dword ptr [EAX],EBX
006e4c45 : ADD dword ptr [EBP + 0x34],EBX
006e4c48 : SUB dword ptr [EBP + 0x30],EBX
006e4c4b : MOV EDI,dword ptr [ESP + 0x34]
006e4c4f : JMP 0x006e4cb5
006e4c51 : CMP dword ptr [EBP + 0x30],0x0
006e4c55 : JNZ 0x006e4d1b
006e4c5b : MOV EDX,dword ptr [EBP + 0x34]
006e4c5e : CMP EDX,dword ptr [EBP + 0x3c]
006e4c61 : JGE 0x006e4cb5
006e4c63 : CMP dword ptr [ESI + 0x3c],0x0
006e4c67 : MOV dword ptr [ESP + 0x20],0x0
006e4c6f : JLE 0x006e4caf
006e4c71 : LEA EAX,[EBP + 0x8]
006e4c74 : MOV dword ptr [ESP + 0x14],EAX
006e4c78 : JMP 0x006e4c80
006e4c80 : MOV ECX,dword ptr [ESI + 0x1c]
006e4c83 : MOV EDX,dword ptr [ESP + 0x14]
006e4c87 : MOV EBX,dword ptr [EBP + 0x3c]
006e4c8a : MOV EAX,dword ptr [EBP + 0x34]
006e4c8d : MOV EDI,dword ptr [EDX]
006e4c8f : PUSH ECX
006e4c90 : CALL 0x006e49a0
006e4c95 : MOV EAX,dword ptr [ESP + 0x24]
006e4c99 : ADD dword ptr [ESP + 0x18],0x4
006e4c9e : INC EAX
006e4c9f : ADD ESP,0x4
006e4ca2 : CMP EAX,dword ptr [ESI + 0x3c]
006e4ca5 : MOV dword ptr [ESP + 0x20],EAX
006e4ca9 : JL 0x006e4c80
006e4cab : MOV EDI,dword ptr [ESP + 0x34]
006e4caf : MOV EAX,dword ptr [EBP + 0x3c]
006e4cb2 : MOV dword ptr [EBP + 0x34],EAX
006e4cb5 : MOV ECX,dword ptr [EBP + 0x34]
006e4cb8 : CMP ECX,dword ptr [EBP + 0x3c]
006e4cbb : JNZ 0x006e4d0f
006e4cbd : MOV EAX,dword ptr [EDI]
006e4cbf : MOV ECX,dword ptr [ESP + 0x30]
006e4cc3 : MOV EDX,dword ptr [ESI + 0x154]
006e4cc9 : MOV EDX,dword ptr [EDX + 0x4]
006e4ccc : PUSH EAX
006e4ccd : MOV EAX,dword ptr [EBP + 0x38]
006e4cd0 : PUSH ECX
006e4cd1 : PUSH EAX
006e4cd2 : LEA ECX,[EBP + 0x8]
006e4cd5 : PUSH ECX
006e4cd6 : PUSH ESI
006e4cd7 : CALL EDX
006e4cd9 : INC dword ptr [EDI]
006e4cdb : MOV EAX,dword ptr [ESI + 0xdc]
006e4ce1 : ADD dword ptr [EBP + 0x38],EAX
006e4ce4 : MOV EAX,dword ptr [ESP + 0x2c]
006e4ce8 : ADD ESP,0x14
006e4ceb : CMP dword ptr [EBP + 0x38],EAX
006e4cee : JL 0x006e4cf7
006e4cf0 : MOV dword ptr [EBP + 0x38],0x0
006e4cf7 : CMP dword ptr [EBP + 0x34],EAX
006e4cfa : JL 0x006e4d03
006e4cfc : MOV dword ptr [EBP + 0x34],0x0
006e4d03 : MOV ECX,dword ptr [ESI + 0xdc]
006e4d09 : ADD ECX,dword ptr [EBP + 0x34]
006e4d0c : MOV dword ptr [EBP + 0x3c],ECX
006e4d0f : MOV EDX,dword ptr [ESP + 0x38]
006e4d13 : CMP dword ptr [EDI],EDX
006e4d15 : JC 0x006e4b90
006e4d1b : POP EBX
006e4d1c : POP EDI
006e4d1d : POP ESI
006e4d1e : POP EBP
006e4d1f : ADD ESP,0xc
006e4d22 : RET
