PROGRAM  : Maestia.exe
FUNCTION : FUN_0073e3b0
ENTRY    : 0073e3b0
BODY     : [[0073e3b0, 0073e53d]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 FUN_0073e3b0(int param_1,undefined4 param_2)

{
  int *piVar1;
  int iVar2;
  int unaff_EDI;
  int local_c;
  int local_8;
  
  if (*(int *)(unaff_EDI + 0x14) != 0) {
    piVar1 = *(int **)(*(int *)(unaff_EDI + 0x14) + 0x1c);
    (**(code **)(*piVar1 + 0xd0))(piVar1,"texSrc",0);
    *(undefined4 *)(unaff_EDI + 0x44) = 0;
    piVar1 = *(int **)(*(int *)(unaff_EDI + 0x14) + 0x1c);
    _DAT_00da9b18 = (**(code **)(*piVar1 + 0x108))(piVar1);
    if (_DAT_00da9b18 < 0) {
      FUN_008018d0(L"AvaFxRenderGroup::SetEffectShader m_pShaderData->GetFX()->EndPass() Failed (%d)"
                   ,_DAT_00da9b18);
    }
    piVar1 = *(int **)(*(int *)(unaff_EDI + 0x14) + 0x1c);
    _DAT_00da9b18 = (**(code **)(*piVar1 + 0x10c))(piVar1);
    if (_DAT_00da9b18 < 0) {
      FUN_008018d0(L"AvaFxRenderGroup::SetEffectShader m_pShaderData->GetFX()->End() Failed (%d)",
                   _DAT_00da9b18);
    }
    *(undefined4 *)(unaff_EDI + 0x14) = 0;
  }
  iVar2 = DAT_01725204;
  local_8 = param_1;
  if (*(uint *)(DAT_017251ac + 0x168) < 3) {
    local_8 = param_1 + 0x17;
  }
  FUN_00484470(&local_8);
  if (local_c == *(int *)(iVar2 + 0xfc)) {
    iVar2 = 0;
  }
  else {
    iVar2 = *(int *)(local_c + 0x10);
  }
  *(int *)(unaff_EDI + 0x14) = iVar2;
  if (iVar2 == 0) {
    return 0;
  }
  _DAT_00da9b18 = (**(code **)(**(int **)(iVar2 + 0x1c) + 0xe8))(*(int **)(iVar2 + 0x1c),"Tech0");
  if (_DAT_00da9b18 < 0) {
    FUN_008018d0(L"AvaFxRenderGroup::SetEffectShader m_pShaderData->GetFX()->SetTechnique() Failed (%d)"
                 ,_DAT_00da9b18);
  }
  piVar1 = *(int **)(*(int *)(unaff_EDI + 0x14) + 0x1c);
  _DAT_00da9b18 = (**(code **)(*piVar1 + 0xfc))(piVar1,0,0);
  if (_DAT_00da9b18 < 0) {
    FUN_008018d0(L"AvaFxRenderGroup::SetEffectShader m_pShaderData->GetFX()->Begin() Failed (%d)",
                 _DAT_00da9b18);
  }
  piVar1 = *(int **)(*(int *)(unaff_EDI + 0x14) + 0x1c);
  _DAT_00da9b18 = (**(code **)(*piVar1 + 0x100))(piVar1,param_2);
  if (_DAT_00da9b18 < 0) {
    FUN_008018d0(L"AvaFxRenderGroup::SetEffectShader m_pShaderData->GetFX()->BeginPass() Failed (%d)"
                 ,_DAT_00da9b18);
  }
  *(int *)(unaff_EDI + 0x50) = param_1;
  *(undefined4 *)(unaff_EDI + 0x54) = param_2;
  *(undefined1 *)(unaff_EDI + 0x58) = 1;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
0073e3b0 : PUSH EBP
0073e3b1 : MOV EBP,ESP
0073e3b3 : MOV EAX,dword ptr [EDI + 0x14]
0073e3b6 : SUB ESP,0x8
0073e3b9 : PUSH ESI
0073e3ba : TEST EAX,EAX
0073e3bc : JZ 0x0073e43d
0073e3be : MOV EAX,dword ptr [EAX + 0x1c]
0073e3c1 : MOV ECX,dword ptr [EAX]
0073e3c3 : MOV EDX,dword ptr [ECX + 0xd0]
0073e3c9 : PUSH 0x0
0073e3cb : PUSH 0xc06a10
0073e3d0 : PUSH EAX
0073e3d1 : CALL EDX
0073e3d3 : MOV EAX,dword ptr [EDI + 0x14]
0073e3d6 : MOV dword ptr [EDI + 0x44],0x0
0073e3dd : MOV EAX,dword ptr [EAX + 0x1c]
0073e3e0 : MOV ECX,dword ptr [EAX]
0073e3e2 : MOV EDX,dword ptr [ECX + 0x108]
0073e3e8 : PUSH EAX
0073e3e9 : CALL EDX
0073e3eb : MOV [0x00da9b18],EAX
0073e3f0 : TEST EAX,EAX
0073e3f2 : JGE 0x0073e408
0073e3f4 : MOV ESI,dword ptr [0x00da98e8]
0073e3fa : PUSH EAX
0073e3fb : PUSH 0xc06a18
0073e400 : CALL 0x008018d0
0073e405 : ADD ESP,0x8
0073e408 : MOV EAX,dword ptr [EDI + 0x14]
0073e40b : MOV EAX,dword ptr [EAX + 0x1c]
0073e40e : MOV ECX,dword ptr [EAX]
0073e410 : MOV EDX,dword ptr [ECX + 0x10c]
0073e416 : PUSH EAX
0073e417 : CALL EDX
0073e419 : MOV [0x00da9b18],EAX
0073e41e : TEST EAX,EAX
0073e420 : JGE 0x0073e436
0073e422 : MOV ESI,dword ptr [0x00da98e8]
0073e428 : PUSH EAX
0073e429 : PUSH 0xc06ab8
0073e42e : CALL 0x008018d0
0073e433 : ADD ESP,0x8
0073e436 : MOV dword ptr [EDI + 0x14],0x0
0073e43d : MOV ECX,dword ptr [0x017251ac]
0073e443 : CMP dword ptr [ECX + 0x168],0x3
0073e44a : MOV EAX,dword ptr [EBP + 0x8]
0073e44d : MOV dword ptr [EBP + -0x4],EAX
0073e450 : JNC 0x0073e458
0073e452 : ADD EAX,0x17
0073e455 : MOV dword ptr [EBP + -0x4],EAX
0073e458 : MOV ESI,dword ptr [0x01725204]
0073e45e : LEA EDX,[EBP + -0x4]
0073e461 : PUSH EDX
0073e462 : LEA ECX,[ESI + 0xf8]
0073e468 : LEA EAX,[EBP + -0x8]
0073e46b : CALL 0x00484470
0073e470 : MOV EAX,dword ptr [EBP + -0x8]
0073e473 : CMP EAX,dword ptr [ESI + 0xfc]
0073e479 : JNZ 0x0073e47f
0073e47b : XOR EAX,EAX
0073e47d : JMP 0x0073e482
0073e47f : MOV EAX,dword ptr [EAX + 0x10]
0073e482 : MOV dword ptr [EDI + 0x14],EAX
0073e485 : TEST EAX,EAX
0073e487 : JNZ 0x0073e492
0073e489 : XOR AL,AL
0073e48b : POP ESI
0073e48c : MOV ESP,EBP
0073e48e : POP EBP
0073e48f : RET 0x8
0073e492 : MOV EAX,dword ptr [EAX + 0x1c]
0073e495 : MOV ECX,dword ptr [EAX]
0073e497 : MOV EDX,dword ptr [ECX + 0xe8]
0073e49d : PUSH 0xc06b50
0073e4a2 : PUSH EAX
0073e4a3 : CALL EDX
0073e4a5 : MOV [0x00da9b18],EAX
0073e4aa : TEST EAX,EAX
0073e4ac : JGE 0x0073e4c2
0073e4ae : MOV ESI,dword ptr [0x00da98e8]
0073e4b4 : PUSH EAX
0073e4b5 : PUSH 0xc06b58
0073e4ba : CALL 0x008018d0
0073e4bf : ADD ESP,0x8
0073e4c2 : MOV EAX,dword ptr [EDI + 0x14]
0073e4c5 : MOV EAX,dword ptr [EAX + 0x1c]
0073e4c8 : MOV ECX,dword ptr [EAX]
0073e4ca : MOV EDX,dword ptr [ECX + 0xfc]
0073e4d0 : PUSH 0x0
0073e4d2 : PUSH 0x0
0073e4d4 : PUSH EAX
0073e4d5 : CALL EDX
0073e4d7 : MOV [0x00da9b18],EAX
0073e4dc : TEST EAX,EAX
0073e4de : JGE 0x0073e4f4
0073e4e0 : MOV ESI,dword ptr [0x00da98e8]
0073e4e6 : PUSH EAX
0073e4e7 : PUSH 0xc06c08
0073e4ec : CALL 0x008018d0
0073e4f1 : ADD ESP,0x8
0073e4f4 : MOV EAX,dword ptr [EDI + 0x14]
0073e4f7 : MOV EAX,dword ptr [EAX + 0x1c]
0073e4fa : MOV EDX,dword ptr [EBP + 0xc]
0073e4fd : MOV ECX,dword ptr [EAX]
0073e4ff : PUSH EDX
0073e500 : PUSH EAX
0073e501 : MOV EAX,dword ptr [ECX + 0x100]
0073e507 : CALL EAX
0073e509 : MOV [0x00da9b18],EAX
0073e50e : TEST EAX,EAX
0073e510 : JGE 0x0073e526
0073e512 : MOV ESI,dword ptr [0x00da98e8]
0073e518 : PUSH EAX
0073e519 : PUSH 0xc06cb0
0073e51e : CALL 0x008018d0
0073e523 : ADD ESP,0x8
0073e526 : MOV ECX,dword ptr [EBP + 0x8]
0073e529 : MOV EDX,dword ptr [EBP + 0xc]
0073e52c : MOV AL,0x1
0073e52e : MOV dword ptr [EDI + 0x50],ECX
0073e531 : MOV dword ptr [EDI + 0x54],EDX
0073e534 : MOV byte ptr [EDI + 0x58],AL
0073e537 : POP ESI
0073e538 : MOV ESP,EBP
0073e53a : POP EBP
0073e53b : RET 0x8
