PROGRAM  : Maestia.exe
FUNCTION : FUN_0055bac0
ENTRY    : 0055bac0
BODY     : [[0055bac0, 0055bc0e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055bac0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  int in_ECX;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  undefined4 *puVar6;
  int local_18;
  int local_14;
  undefined4 local_10;
  int local_c;
  int local_8;
  undefined4 local_4;
  
  uVar5 = 0;
  local_c = 0;
  local_8 = 0;
  local_4 = 0;
  local_18 = 0;
  local_14 = 0;
  local_10 = 0;
  FUN_0055af60(param_1,param_2,param_3,param_4,&local_c,&local_18,0);
  iVar4 = local_8;
  if (local_8 != 0) {
    *(int *)(in_ECX + 0x34) = local_8;
    iVar1 = FUN_00515840(local_8 * 0x28,0);
    *(int *)(in_ECX + 0x2c) = iVar1;
    if (*(int *)(in_ECX + 0x34) != 0) {
      iVar2 = local_c - iVar1;
      do {
        if (iVar1 != 0) {
          FUN_005d59d0(iVar2 + iVar1);
        }
        uVar5 = uVar5 + 1;
        iVar1 = iVar1 + 0x28;
      } while (uVar5 < *(uint *)(in_ECX + 0x34));
    }
  }
  iVar1 = local_14;
  if (local_14 != 0) {
    *(int *)(in_ECX + 0x38) = local_14;
    iVar2 = FUN_00515840(local_14 * 0x18,0);
    uVar5 = 0;
    *(int *)(in_ECX + 0x30) = iVar2;
    if (*(int *)(in_ECX + 0x38) != 0) {
      iVar3 = local_18 - iVar2;
      do {
        if (iVar2 != 0) {
          FUN_005d6590(iVar3 + iVar2);
        }
        uVar5 = uVar5 + 1;
        iVar2 = iVar2 + 0x18;
        iVar4 = local_8;
      } while (uVar5 < *(uint *)(in_ECX + 0x38));
    }
  }
  puVar6 = (undefined4 *)(local_18 + -0x18 + iVar1 * 0x18);
  for (; iVar1 != 0; iVar1 = iVar1 + -1) {
    (**(code **)*puVar6)(0);
    puVar6 = puVar6 + -6;
  }
  FUN_00515cf0(local_18);
  iVar1 = local_c;
  for (; iVar4 != 0; iVar4 = iVar4 + -1) {
    FUN_005d4f60();
  }
  FUN_00515cf0(iVar1);
  return;
}



============================================================
DISASSEMBLY
============================================================
0055bac0 : SUB ESP,0x18
0055bac3 : MOV EDX,dword ptr [ESP + 0x28]
0055bac7 : PUSH EBX
0055bac8 : PUSH EBP
0055bac9 : PUSH ESI
0055baca : PUSH EDI
0055bacb : MOV EDI,dword ptr [ESP + 0x2c]
0055bacf : XOR EBP,EBP
0055bad1 : PUSH EBP
0055bad2 : MOV ESI,ECX
0055bad4 : LEA EAX,[ESP + 0x14]
0055bad8 : PUSH EAX
0055bad9 : MOV EAX,dword ptr [ESP + 0x3c]
0055badd : LEA ECX,[ESP + 0x24]
0055bae1 : PUSH ECX
0055bae2 : MOV ECX,dword ptr [ESP + 0x3c]
0055bae6 : PUSH EDX
0055bae7 : PUSH EAX
0055bae8 : PUSH ECX
0055bae9 : PUSH EDI
0055baea : MOV ECX,ESI
0055baec : MOV dword ptr [ESP + 0x38],EBP
0055baf0 : MOV dword ptr [ESP + 0x3c],EBP
0055baf4 : MOV dword ptr [ESP + 0x40],EBP
0055baf8 : MOV dword ptr [ESP + 0x2c],EBP
0055bafc : MOV dword ptr [ESP + 0x30],EBP
0055bb00 : MOV dword ptr [ESP + 0x34],EBP
0055bb04 : CALL 0x0055af60
0055bb09 : MOV EDX,dword ptr [EDI + 0x20]
0055bb0c : MOV EBX,dword ptr [ESP + 0x20]
0055bb10 : MOV ECX,dword ptr [EDX + 0x1c]
0055bb13 : MOV dword ptr [ESP + 0x34],ECX
0055bb17 : CMP EBX,EBP
0055bb19 : JZ 0x0055bb5d
0055bb1b : LEA EAX,[EBX + EBX*0x4]
0055bb1e : ADD EAX,EAX
0055bb20 : ADD EAX,EAX
0055bb22 : ADD EAX,EAX
0055bb24 : PUSH EBP
0055bb25 : PUSH EAX
0055bb26 : MOV dword ptr [ESI + 0x34],EBX
0055bb29 : CALL 0x00515840
0055bb2e : MOV dword ptr [ESI + 0x2c],EAX
0055bb31 : CMP dword ptr [ESI + 0x34],EBP
0055bb34 : JBE 0x0055bb5d
0055bb36 : MOV ECX,dword ptr [ESP + 0x1c]
0055bb3a : SUB ECX,EAX
0055bb3c : MOV EDI,EAX
0055bb3e : MOV dword ptr [ESP + 0x38],ECX
0055bb42 : TEST EDI,EDI
0055bb44 : JZ 0x0055bb54
0055bb46 : ADD ECX,EDI
0055bb48 : PUSH ECX
0055bb49 : MOV ECX,EDI
0055bb4b : CALL 0x005d59d0
0055bb50 : MOV ECX,dword ptr [ESP + 0x38]
0055bb54 : INC EBP
0055bb55 : ADD EDI,0x28
0055bb58 : CMP EBP,dword ptr [ESI + 0x34]
0055bb5b : JC 0x0055bb42
0055bb5d : MOV EDI,dword ptr [ESP + 0x14]
0055bb61 : TEST EDI,EDI
0055bb63 : JZ 0x0055bbb2
0055bb65 : MOV ECX,dword ptr [ESP + 0x34]
0055bb69 : LEA EAX,[EDI + EDI*0x2]
0055bb6c : ADD EAX,EAX
0055bb6e : ADD EAX,EAX
0055bb70 : ADD EAX,EAX
0055bb72 : PUSH 0x0
0055bb74 : PUSH EAX
0055bb75 : MOV dword ptr [ESI + 0x38],EDI
0055bb78 : CALL 0x00515840
0055bb7d : XOR EBP,EBP
0055bb7f : MOV dword ptr [ESI + 0x30],EAX
0055bb82 : CMP dword ptr [ESI + 0x38],EBP
0055bb85 : JBE 0x0055bbb2
0055bb87 : MOV ECX,dword ptr [ESP + 0x10]
0055bb8b : SUB ECX,EAX
0055bb8d : MOV EBX,EAX
0055bb8f : MOV dword ptr [ESP + 0x38],ECX
0055bb93 : TEST EBX,EBX
0055bb95 : JZ 0x0055bba5
0055bb97 : ADD ECX,EBX
0055bb99 : PUSH ECX
0055bb9a : MOV ECX,EBX
0055bb9c : CALL 0x005d6590
0055bba1 : MOV ECX,dword ptr [ESP + 0x38]
0055bba5 : INC EBP
0055bba6 : ADD EBX,0x18
0055bba9 : CMP EBP,dword ptr [ESI + 0x38]
0055bbac : JC 0x0055bb93
0055bbae : MOV EBX,dword ptr [ESP + 0x20]
0055bbb2 : MOV ECX,dword ptr [ESP + 0x10]
0055bbb6 : LEA EAX,[EDI + EDI*0x2]
0055bbb9 : LEA ESI,[ECX + EAX*0x8 + -0x18]
0055bbbd : TEST EDI,EDI
0055bbbf : JBE 0x0055bbd3
0055bbc1 : MOV EDX,dword ptr [ESI]
0055bbc3 : MOV EAX,dword ptr [EDX]
0055bbc5 : PUSH 0x0
0055bbc7 : MOV ECX,ESI
0055bbc9 : CALL EAX
0055bbcb : SUB ESI,0x18
0055bbce : SUB EDI,0x1
0055bbd1 : JNZ 0x0055bbc1
0055bbd3 : MOV ECX,dword ptr [ESP + 0x10]
0055bbd7 : PUSH ECX
0055bbd8 : CALL 0x00515cf0
0055bbdd : MOV EDI,dword ptr [ESP + 0x1c]
0055bbe1 : LEA EDX,[EBX + EBX*0x4]
0055bbe4 : LEA ESI,[EDI + EDX*0x8 + -0x28]
0055bbe8 : TEST EBX,EBX
0055bbea : JBE 0x0055bbff
0055bbec : LEA ESP,[ESP]
0055bbf0 : MOV ECX,ESI
0055bbf2 : CALL 0x005d4f60
0055bbf7 : SUB ESI,0x28
0055bbfa : SUB EBX,0x1
0055bbfd : JNZ 0x0055bbf0
0055bbff : PUSH EDI
0055bc00 : CALL 0x00515cf0
0055bc05 : POP EDI
0055bc06 : POP ESI
0055bc07 : POP EBP
0055bc08 : POP EBX
0055bc09 : ADD ESP,0x18
0055bc0c : RET 0x10
