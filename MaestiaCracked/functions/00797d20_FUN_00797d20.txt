PROGRAM  : Maestia.exe
FUNCTION : FUN_00797d20
ENTRY    : 00797d20
BODY     : [[00797d20, 00797f10]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00797eab) */
/* WARNING: Removing unreachable block (ram,0x00797e1c) */
/* WARNING: Removing unreachable block (ram,0x00797ee2) */

undefined4 * FUN_00797d20(undefined4 *param_1,undefined4 param_2)

{
  uint uVar1;
  DWORD DVar2;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3163b;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  FUN_007d88c0(param_1,param_2);
  *param_1 = &PTR_FUN_00cd6ef8;
  param_1[0xb2] = 0;
  param_1[0xb3] = 0;
  param_1[0xb4] = 0;
  local_8._0_1_ = 1;
  local_8._1_3_ = 0;
  FUN_004c3ee0(param_1 + 0xb8);
  local_8._0_1_ = 2;
  FUN_004c3ee0(param_1 + 0xbb);
  param_1[0xbf] = 0;
  param_1[0xc0] = 0;
  param_1[0xc1] = 0;
  param_1[0xc3] = 0;
  param_1[0xc4] = 0;
  param_1[0xc5] = 0;
  local_8 = CONCAT31(local_8._1_3_,5);
  param_1[0xc6] = 0;
  param_1[199] = 0;
  param_1[200] = 0;
  *(undefined1 *)(param_1 + 0xb5) = 0;
  DVar2 = GetTickCount();
  param_1[0xb7] = DVar2;
  FUN_007979c0(uVar1);
  if (param_1[0xb2] != param_1[0xb3]) {
    param_1[0xb3] = param_1[0xb2];
  }
  FUN_0045cd30(*(undefined4 *)(param_1[0xb9] + 4));
  *(undefined4 *)(param_1[0xb9] + 4) = param_1[0xb9];
  param_1[0xba] = 0;
  *(undefined4 *)param_1[0xb9] = param_1[0xb9];
  *(undefined4 *)(param_1[0xb9] + 8) = param_1[0xb9];
  FUN_0045cd30(*(undefined4 *)(param_1[0xbc] + 4));
  *(undefined4 *)(param_1[0xbc] + 4) = param_1[0xbc];
  param_1[0xbd] = 0;
  *(undefined4 *)param_1[0xbc] = param_1[0xbc];
  *(undefined4 *)(param_1[0xbc] + 8) = param_1[0xbc];
  if (param_1[0xbf] != param_1[0xc0]) {
    param_1[0xc0] = param_1[0xbf];
  }
  if (param_1[0xc3] != param_1[0xc4]) {
    param_1[0xc4] = param_1[0xc3];
  }
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00797d20 : PUSH EBP
00797d21 : MOV EBP,ESP
00797d23 : PUSH -0x1
00797d25 : PUSH 0xb3163b
00797d2a : MOV EAX,FS:[0x0]
00797d30 : PUSH EAX
00797d31 : PUSH ECX
00797d32 : PUSH EBX
00797d33 : PUSH ESI
00797d34 : PUSH EDI
00797d35 : MOV EAX,[0x00d66fa0]
00797d3a : XOR EAX,EBP
00797d3c : PUSH EAX
00797d3d : LEA EAX,[EBP + -0xc]
00797d40 : MOV FS:[0x0],EAX
00797d46 : MOV EDI,dword ptr [EBP + 0x8]
00797d49 : MOV EAX,dword ptr [EBP + 0xc]
00797d4c : PUSH EAX
00797d4d : PUSH EDI
00797d4e : CALL 0x007d88c0
00797d53 : XOR EAX,EAX
00797d55 : MOV dword ptr [EBP + -0x4],EAX
00797d58 : MOV dword ptr [EDI],0xcd6ef8
00797d5e : MOV dword ptr [EDI + 0x2c8],EAX
00797d64 : MOV dword ptr [EDI + 0x2cc],EAX
00797d6a : MOV dword ptr [EDI + 0x2d0],EAX
00797d70 : MOV byte ptr [EBP + -0x4],0x1
00797d74 : LEA ESI,[EDI + 0x2e0]
00797d7a : PUSH ESI
00797d7b : CALL 0x004c3ee0
00797d80 : MOV byte ptr [EBP + -0x4],0x2
00797d84 : LEA EBX,[EDI + 0x2ec]
00797d8a : PUSH EBX
00797d8b : CALL 0x004c3ee0
00797d90 : MOV byte ptr [EBP + -0x4],0x3
00797d94 : XOR EAX,EAX
00797d96 : MOV dword ptr [EDI + 0x2fc],EAX
00797d9c : MOV dword ptr [EDI + 0x300],EAX
00797da2 : MOV dword ptr [EDI + 0x304],EAX
00797da8 : MOV byte ptr [EBP + -0x4],0x4
00797dac : MOV dword ptr [EDI + 0x30c],EAX
00797db2 : MOV dword ptr [EDI + 0x310],EAX
00797db8 : MOV dword ptr [EDI + 0x314],EAX
00797dbe : MOV byte ptr [EBP + -0x4],0x5
00797dc2 : XORPS XMM0,XMM0
00797dc5 : MOVSS dword ptr [EDI + 0x318],XMM0
00797dcd : MOVSS dword ptr [EDI + 0x31c],XMM0
00797dd5 : MOVSS dword ptr [EDI + 0x320],XMM0
00797ddd : MOV byte ptr [EDI + 0x2d4],AL
00797de3 : CALL dword ptr [0x00b850d8]
00797de9 : MOV dword ptr [EDI + 0x2dc],EAX
00797def : CALL 0x007979c0
00797df4 : MOV EAX,dword ptr [EDI + 0x2cc]
00797dfa : MOV ECX,dword ptr [EDI + 0x2c8]
00797e00 : CMP ECX,EAX
00797e02 : JZ 0x00797e3a
00797e04 : SUB EAX,EAX
00797e06 : SAR EAX,0x2
00797e09 : LEA EDX,[EAX*0x4 + 0x0]
00797e10 : MOV dword ptr [EBP + 0xc],EDX
00797e13 : ADD EDX,ECX
00797e15 : MOV dword ptr [EBP + -0x10],EDX
00797e18 : TEST EAX,EAX
00797e1a : JLE 0x00797e31
00797e1c : MOV EAX,dword ptr [EBP + 0xc]
00797e1f : MOV EDX,dword ptr [EDI + 0x2cc]
00797e25 : PUSH EAX
00797e26 : PUSH EDX
00797e27 : PUSH EAX
00797e28 : PUSH ECX
00797e29 : CALL 0x00634101
00797e2e : ADD ESP,0x10
00797e31 : MOV ECX,dword ptr [EBP + -0x10]
00797e34 : MOV dword ptr [EDI + 0x2cc],ECX
00797e3a : MOV EDX,dword ptr [ESI + 0x4]
00797e3d : MOV EAX,dword ptr [EDX + 0x4]
00797e40 : PUSH EAX
00797e41 : MOV ECX,ESI
00797e43 : CALL 0x0045cd30
00797e48 : MOV EAX,dword ptr [ESI + 0x4]
00797e4b : MOV dword ptr [EAX + 0x4],EAX
00797e4e : MOV EAX,dword ptr [ESI + 0x4]
00797e51 : MOV dword ptr [ESI + 0x8],0x0
00797e58 : MOV dword ptr [EAX],EAX
00797e5a : MOV ESI,dword ptr [ESI + 0x4]
00797e5d : MOV dword ptr [ESI + 0x8],ESI
00797e60 : MOV ECX,dword ptr [EBX + 0x4]
00797e63 : MOV EDX,dword ptr [ECX + 0x4]
00797e66 : PUSH EDX
00797e67 : MOV ECX,EBX
00797e69 : CALL 0x0045cd30
00797e6e : MOV EAX,dword ptr [EBX + 0x4]
00797e71 : MOV dword ptr [EAX + 0x4],EAX
00797e74 : MOV EAX,dword ptr [EBX + 0x4]
00797e77 : MOV dword ptr [EBX + 0x8],0x0
00797e7e : MOV dword ptr [EAX],EAX
00797e80 : MOV EBX,dword ptr [EBX + 0x4]
00797e83 : MOV dword ptr [EBX + 0x8],EBX
00797e86 : MOV EAX,dword ptr [EDI + 0x300]
00797e8c : MOV EDX,dword ptr [EDI + 0x2fc]
00797e92 : CMP EDX,EAX
00797e94 : JZ 0x00797ebd
00797e96 : MOV ECX,EAX
00797e98 : SUB ECX,EAX
00797e9a : SAR ECX,0x2
00797e9d : LEA ESI,[ECX*0x4 + 0x0]
00797ea4 : LEA EBX,[ESI + EDX*0x1]
00797ea7 : TEST ECX,ECX
00797ea9 : JLE 0x00797eb7
00797eab : PUSH ESI
00797eac : PUSH EAX
00797ead : PUSH ESI
00797eae : PUSH EDX
00797eaf : CALL 0x00634101
00797eb4 : ADD ESP,0x10
00797eb7 : MOV dword ptr [EDI + 0x300],EBX
00797ebd : MOV ECX,dword ptr [EDI + 0x310]
00797ec3 : MOV ESI,dword ptr [EDI + 0x30c]
00797ec9 : CMP ESI,ECX
00797ecb : JZ 0x00797ef4
00797ecd : MOV EAX,ECX
00797ecf : SUB EAX,ECX
00797ed1 : SAR EAX,0x2
00797ed4 : LEA EDX,[EAX*0x4 + 0x0]
00797edb : LEA EBX,[EDX + ESI*0x1]
00797ede : TEST EAX,EAX
00797ee0 : JLE 0x00797eee
00797ee2 : PUSH EDX
00797ee3 : PUSH ECX
00797ee4 : PUSH EDX
00797ee5 : PUSH ESI
00797ee6 : CALL 0x00634101
00797eeb : ADD ESP,0x10
00797eee : MOV dword ptr [EDI + 0x310],EBX
00797ef4 : MOV dword ptr [EBP + -0x4],0xffffffff
00797efb : MOV EAX,EDI
00797efd : MOV ECX,dword ptr [EBP + -0xc]
00797f00 : MOV dword ptr FS:[0x0],ECX
00797f07 : POP ECX
00797f08 : POP EDI
00797f09 : POP ESI
00797f0a : POP EBX
00797f0b : MOV ESP,EBP
00797f0d : POP EBP
00797f0e : RET 0x8
