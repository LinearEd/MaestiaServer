PROGRAM  : Maestia.exe
FUNCTION : FUN_00886770
ENTRY    : 00886770
BODY     : [[00886770, 0088692d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00886770(void)

{
  short sVar1;
  int iVar2;
  int *piVar3;
  int *piVar4;
  int *in_ECX;
  float fVar5;
  LPCRITICAL_SECTION local_30;
  char *local_2c;
  undefined4 local_28;
  int local_24;
  undefined4 local_20;
  int *local_1c;
  int *local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4937c;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = in_ECX;
  (**(code **)(*in_ECX + 0x200))(local_14);
  iVar2 = in_ECX[0xe3];
  local_30 = (LPCRITICAL_SECTION)(iVar2 + 0x70);
  local_24 = 0;
  local_2c = ".\\Objects\\AvaEffectMgr.cpp";
  local_28 = 0x22b;
  local_20 = 1;
  FUN_006ef1a0(&local_30);
  local_8 = 0xffffffff;
  if (local_24 != 0) {
    LeaveCriticalSection(local_30);
    local_24 = 0;
  }
  piVar3 = (int *)FUN_00a6bba0(2);
  if (piVar3 == (int *)0x0) {
    local_1c = (int *)FUN_00a6bad0(2);
    if (local_1c != (int *)0x0) {
      piVar4 = (int *)FUN_00a6b6b0();
      piVar3 = local_1c;
      if (piVar4 == (int *)0x0) {
        FUN_00a6c940();
        in_ECX = local_18;
        piVar4 = piVar3;
      }
      if (((piVar4[0x5f] != 0) && (1000.0 <= *(float *)(piVar4[0x5f] + 0x24))) &&
         (*(char *)(iVar2 + 0x5c) != '\0')) {
        (**(code **)(*piVar4 + 0xd4))();
        FUN_00a6b5d0();
        in_ECX = local_18;
      }
    }
  }
  else {
    piVar4 = (int *)FUN_00a6b780();
    if (piVar4 == (int *)0x0) {
      FUN_00a6d020(iVar2,0);
      piVar4 = piVar3;
    }
    in_ECX = local_18;
    if ((*(char *)((int)piVar4 + 5) != '\0') && (*(char *)(iVar2 + 0x5c) != '\0')) {
      (**(code **)(*piVar4 + 0x24))();
      FUN_00a6c0d0();
      in_ECX = local_18;
    }
  }
  FUN_0088f920(in_ECX);
  (**(code **)(*in_ECX + 0x284))();
  iVar2 = in_ECX[0x104];
  sVar1 = *(short *)(iVar2 + 0xb4);
  if (((sVar1 == 0x3c) || (sVar1 == 0x3d)) || ((sVar1 == 0x3e || (sVar1 == 0x3f)))) {
    fVar5 = 0.033333335;
  }
  else {
    fVar5 = 1.0 / (float)in_ECX[0x4ff];
  }
  *(float *)(iVar2 + 0x138) = fVar5;
  if (*(int *)(iVar2 + 0xac) != 0) {
    *(float *)(iVar2 + 0x94) =
         (float)*(ushort *)(*(int *)(iVar2 + 0xac) + 0x3c) * *(float *)(iVar2 + 0x138);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00886770 : PUSH EBP
00886771 : MOV EBP,ESP
00886773 : PUSH -0x1
00886775 : PUSH 0xb4937c
0088677a : MOV EAX,FS:[0x0]
00886780 : PUSH EAX
00886781 : SUB ESP,0x20
00886784 : MOV EAX,[0x00d66fa0]
00886789 : XOR EAX,EBP
0088678b : MOV dword ptr [EBP + -0x10],EAX
0088678e : PUSH EBX
0088678f : PUSH ESI
00886790 : PUSH EDI
00886791 : PUSH EAX
00886792 : LEA EAX,[EBP + -0xc]
00886795 : MOV FS:[0x0],EAX
0088679b : MOV ESI,ECX
0088679d : MOV EAX,dword ptr [ESI]
0088679f : MOV EDX,dword ptr [EAX + 0x200]
008867a5 : MOV dword ptr [EBP + -0x14],ESI
008867a8 : CALL EDX
008867aa : MOV EBX,dword ptr [ESI + 0x38c]
008867b0 : LEA ECX,[EBP + -0x2c]
008867b3 : LEA EAX,[EBX + 0x70]
008867b6 : XOR EDI,EDI
008867b8 : PUSH ECX
008867b9 : MOV dword ptr [EBP + -0x20],EDI
008867bc : MOV dword ptr [EBP + -0x2c],EAX
008867bf : MOV dword ptr [EBP + -0x28],0xc43e84
008867c6 : MOV dword ptr [EBP + -0x24],0x22b
008867cd : MOV dword ptr [EBP + -0x1c],0x1
008867d4 : CALL 0x006ef1a0
008867d9 : MOV dword ptr [EBP + -0x4],0xffffffff
008867e0 : CMP dword ptr [EBP + -0x20],EDI
008867e3 : JZ 0x008867f2
008867e5 : MOV EDX,dword ptr [EBP + -0x2c]
008867e8 : PUSH EDX
008867e9 : CALL dword ptr [0x00b8511c]
008867ef : MOV dword ptr [EBP + -0x20],EDI
008867f2 : PUSH 0x2
008867f4 : MOV ECX,EBX
008867f6 : CALL 0x00a6bba0
008867fb : MOV EDI,EAX
008867fd : MOV ECX,EBX
008867ff : TEST EDI,EDI
00886801 : JZ 0x00886837
00886803 : CALL 0x00a6b780
00886808 : MOV ESI,EAX
0088680a : TEST ESI,ESI
0088680c : JNZ 0x00886817
0088680e : PUSH EAX
0088680f : PUSH EBX
00886810 : CALL 0x00a6d020
00886815 : MOV ESI,EDI
00886817 : CMP byte ptr [ESI + 0x5],0x0
0088681b : JZ 0x00886894
0088681d : CMP byte ptr [EBX + 0x5c],0x0
00886821 : JZ 0x00886894
00886823 : MOV EAX,dword ptr [ESI]
00886825 : MOV EDX,dword ptr [EAX + 0x24]
00886828 : MOV ECX,ESI
0088682a : CALL EDX
0088682c : MOV ECX,ESI
0088682e : MOV EDX,EBX
00886830 : CALL 0x00a6c0d0
00886835 : JMP 0x00886894
00886837 : PUSH 0x2
00886839 : CALL 0x00a6bad0
0088683e : MOV dword ptr [EBP + -0x18],EAX
00886841 : TEST EAX,EAX
00886843 : JZ 0x00886897
00886845 : MOV EDI,EAX
00886847 : MOV ECX,EBX
00886849 : CALL 0x00a6b6b0
0088684e : MOV EDI,EAX
00886850 : TEST EDI,EDI
00886852 : JNZ 0x00886861
00886854 : MOV EDI,dword ptr [EBP + -0x18]
00886857 : MOV ESI,EBX
00886859 : CALL 0x00a6c940
0088685e : MOV ESI,dword ptr [EBP + -0x14]
00886861 : MOV EAX,dword ptr [EDI + 0x17c]
00886867 : TEST EAX,EAX
00886869 : JZ 0x00886897
0088686b : MOVSS XMM0,dword ptr [EAX + 0x24]
00886870 : COMISS XMM0,dword ptr [0x00cdf16c]
00886877 : JC 0x00886897
00886879 : CMP byte ptr [EBX + 0x5c],0x0
0088687d : JZ 0x00886897
0088687f : MOV EAX,dword ptr [EDI]
00886881 : MOV EDX,dword ptr [EAX + 0xd4]
00886887 : MOV ECX,EDI
00886889 : CALL EDX
0088688b : MOV ESI,EDI
0088688d : MOV ECX,EBX
0088688f : CALL 0x00a6b5d0
00886894 : MOV ESI,dword ptr [EBP + -0x14]
00886897 : PUSH ESI
00886898 : CALL 0x0088f920
0088689d : MOV EAX,dword ptr [ESI]
0088689f : MOV EDX,dword ptr [EAX + 0x284]
008868a5 : MOV ECX,ESI
008868a7 : CALL EDX
008868a9 : MOV EAX,dword ptr [ESI + 0x410]
008868af : MOVZX ECX,word ptr [EAX + 0xb4]
008868b6 : CMP CX,0x3c
008868ba : JZ 0x008868e0
008868bc : CMP CX,0x3d
008868c0 : JZ 0x008868e0
008868c2 : CMP CX,0x3e
008868c6 : JZ 0x008868e0
008868c8 : CMP CX,0x3f
008868cc : JZ 0x008868e0
008868ce : MOVSS XMM0,dword ptr [0x00c10fc4]
008868d6 : DIVSS XMM0,dword ptr [ESI + 0x13fc]
008868de : JMP 0x008868e8
008868e0 : MOVSS XMM0,dword ptr [0x00cdf27c]
008868e8 : MOV ECX,dword ptr [EAX + 0xac]
008868ee : MOVSS dword ptr [EAX + 0x138],XMM0
008868f6 : TEST ECX,ECX
008868f8 : JZ 0x00886912
008868fa : MOVZX ECX,word ptr [ECX + 0x3c]
008868fe : CVTSI2SS XMM0,ECX
00886902 : MULSS XMM0,dword ptr [EAX + 0x138]
0088690a : MOVSS dword ptr [EAX + 0x94],XMM0
00886912 : MOV ECX,dword ptr [EBP + -0xc]
00886915 : MOV dword ptr FS:[0x0],ECX
0088691c : POP ECX
0088691d : POP EDI
0088691e : POP ESI
0088691f : POP EBX
00886920 : MOV ECX,dword ptr [EBP + -0x10]
00886923 : XOR ECX,EBP
00886925 : CALL 0x00633e6b
0088692a : MOV ESP,EBP
0088692c : POP EBP
0088692d : RET
