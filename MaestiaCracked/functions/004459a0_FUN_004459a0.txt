PROGRAM  : Maestia.exe
FUNCTION : FUN_004459a0
ENTRY    : 004459a0
BODY     : [[004459a0, 00445b32] [00445b3c, 00445b5f] [00445bb3, 00445c42] [00445c63, 00445cdc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004459a0(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uStack_a8;
  uint local_88;
  uint local_84;
  undefined1 local_80 [100];
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7b0c4;
  local_10 = ExceptionList;
  uStack_a8 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_a8;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_88 = 0;
  }
  else {
    local_88 = (*(int *)(param_1 + 0xc) - iVar2) / 0x60;
  }
  iVar5 = *(int *)(param_1 + 8);
  iVar2 = (iVar5 - iVar2) / 0x60;
  local_1c = uStack_a8;
  puVar1 = &uStack_a8;
  if (iVar2 == 0x2aaaaaa) {
    iVar2 = FUN_00452880();
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_88 < uVar3) {
    if (0x2aaaaaa - (local_88 >> 1) < local_88) {
      local_88 = 0;
    }
    else {
      local_88 = local_88 + (local_88 >> 1);
    }
    if (local_88 < uVar3) {
      local_88 = uVar3;
    }
    iVar2 = FUN_00445d10();
    local_8 = 0;
    FUN_00445950(param_3);
    FUN_00445ce0(*(undefined4 *)(param_1 + 4),param_2);
    FUN_00445ce0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_00445980();
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_88 * 0x60 + iVar2;
    *(int *)(param_1 + 8) =
         ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4)) / 0x60 + 1) * 0x60 + iVar2;
    *(int *)(param_1 + 4) = iVar2;
  }
  else {
    iVar5 = iVar5 - param_2;
    iVar2 = iVar5 >> 0x1f;
    if (iVar5 / 0x60 + iVar2 == iVar2) {
      FUN_004455d0(local_80);
      local_8 = 2;
      FUN_00445ce0(param_2,*(undefined4 *)(param_1 + 8));
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00445950(local_80);
      local_8 = 2;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x60;
      FUN_00445e20(param_2,*(int *)(param_1 + 8) + -0x60);
    }
    else {
      FUN_004455d0(local_80);
      local_8 = 5;
      iVar2 = *(int *)(param_1 + 8);
      uVar4 = FUN_00445ce0(iVar2 + -0x60,iVar2);
      *(undefined4 *)(param_1 + 8) = uVar4;
      local_84 = param_3 & 0xffffff00;
      FUN_00445ea0(param_2,iVar2 + -0x60,iVar2,local_84,local_84,local_84);
      FUN_00445e20(param_2,param_2 + 0x60);
    }
    local_8 = 0xffffffff;
    FUN_0044ca10(local_80);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_1c ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
004459a0 : PUSH EBP
004459a1 : MOV EBP,ESP
004459a3 : PUSH -0x1
004459a5 : PUSH 0xb7b0c4
004459aa : MOV EAX,FS:[0x0]
004459b0 : PUSH EAX
004459b1 : SUB ESP,0x88
004459b7 : MOV EAX,[0x00d66fa0]
004459bc : XOR EAX,EBP
004459be : MOV dword ptr [EBP + -0x18],EAX
004459c1 : PUSH EBX
004459c2 : PUSH ESI
004459c3 : PUSH EDI
004459c4 : PUSH EAX
004459c5 : LEA EAX,[EBP + -0xc]
004459c8 : MOV FS:[0x0],EAX
004459ce : MOV dword ptr [EBP + -0x10],ESP
004459d1 : MOV EBX,dword ptr [EBP + 0x8]
004459d4 : MOV dword ptr [EBP + 0xffffff78],EBX
004459da : MOV EAX,dword ptr [EBP + 0x10]
004459dd : MOV dword ptr [EBP + -0x80],EAX
004459e0 : MOV ECX,dword ptr [EBX + 0x4]
004459e3 : TEST ECX,ECX
004459e5 : JNZ 0x004459eb
004459e7 : XOR EDI,EDI
004459e9 : JMP 0x00445a03
004459eb : MOV EDX,dword ptr [EBX + 0xc]
004459ee : SUB EDX,ECX
004459f0 : MOV EAX,0x2aaaaaab
004459f5 : IMUL EDX
004459f7 : SAR EDX,0x4
004459fa : MOV EAX,EDX
004459fc : SHR EAX,0x1f
004459ff : ADD EAX,EDX
00445a01 : MOV EDI,EAX
00445a03 : MOV ESI,dword ptr [EBX + 0x8]
00445a06 : MOV EDX,ESI
00445a08 : SUB EDX,ECX
00445a0a : MOV EAX,0x2aaaaaab
00445a0f : IMUL EDX
00445a11 : SAR EDX,0x4
00445a14 : MOV EAX,EDX
00445a16 : SHR EAX,0x1f
00445a19 : ADD EAX,EDX
00445a1b : MOV ECX,0x2aaaaaa
00445a20 : SUB ECX,EAX
00445a22 : CMP ECX,0x1
00445a25 : JNC 0x00445a2c
00445a27 : CALL 0x00452880
00445a2c : INC EAX
00445a2d : CMP EDI,EAX
00445a2f : JNC 0x00445bb3
00445a35 : MOV ECX,EDI
00445a37 : SHR ECX,0x1
00445a39 : MOV EDX,0x2aaaaaa
00445a3e : SUB EDX,ECX
00445a40 : CMP EDX,EDI
00445a42 : JNC 0x00445a56
00445a44 : MOV dword ptr [EBP + 0xffffff7c],0x0
00445a4e : MOV EDI,dword ptr [EBP + 0xffffff7c]
00445a54 : JMP 0x00445a5e
00445a56 : ADD EDI,ECX
00445a58 : MOV dword ptr [EBP + 0xffffff7c],EDI
00445a5e : CMP EDI,EAX
00445a60 : JNC 0x00445a6a
00445a62 : MOV dword ptr [EBP + 0xffffff7c],EAX
00445a68 : MOV EDI,EAX
00445a6a : MOV ECX,EDI
00445a6c : CALL 0x00445d10
00445a71 : MOV ESI,EAX
00445a73 : MOV dword ptr [EBP + 0xffffff70],ESI
00445a79 : MOV ECX,dword ptr [EBP + 0xc]
00445a7c : SUB ECX,dword ptr [EBX + 0x4]
00445a7f : MOV EAX,0x2aaaaaab
00445a84 : IMUL ECX
00445a86 : SAR EDX,0x4
00445a89 : MOV EAX,EDX
00445a8b : SHR EAX,0x1f
00445a8e : ADD EAX,EDX
00445a90 : MOV dword ptr [EBP + 0xffffff78],EAX
00445a96 : XOR ECX,ECX
00445a98 : MOV dword ptr [EBP + 0xffffff74],ECX
00445a9e : MOV dword ptr [EBP + -0x4],ECX
00445aa1 : MOV ECX,dword ptr [EBP + -0x80]
00445aa4 : PUSH ECX
00445aa5 : LEA EDI,[EAX + EAX*0x2]
00445aa8 : SHL EDI,0x5
00445aab : ADD EDI,ESI
00445aad : MOV ESI,0x1
00445ab2 : CALL 0x00445950
00445ab7 : MOV dword ptr [EBP + 0xffffff74],ESI
00445abd : MOV EDX,dword ptr [EBP + 0xc]
00445ac0 : PUSH EDX
00445ac1 : MOV EAX,dword ptr [EBX + 0x4]
00445ac4 : PUSH EAX
00445ac5 : MOV EDI,dword ptr [EBP + 0xffffff70]
00445acb : MOV EDX,EDI
00445acd : CALL 0x00445ce0
00445ad2 : MOV dword ptr [EBP + 0xffffff74],0x2
00445adc : MOV EAX,dword ptr [EBP + 0xffffff78]
00445ae2 : LEA EDX,[EAX + EAX*0x2 + 0x3]
00445ae6 : SHL EDX,0x5
00445ae9 : ADD EDX,EDI
00445aeb : MOV ECX,dword ptr [EBX + 0x8]
00445aee : PUSH ECX
00445aef : MOV EAX,dword ptr [EBP + 0xc]
00445af2 : PUSH EAX
00445af3 : CALL 0x00445ce0
00445af8 : MOV dword ptr [EBP + -0x4],0xffffffff
00445aff : MOV ECX,dword ptr [EBX + 0x8]
00445b02 : MOV ESI,dword ptr [EBX + 0x4]
00445b05 : SUB ECX,ESI
00445b07 : MOV EAX,0x2aaaaaab
00445b0c : IMUL ECX
00445b0e : SAR EDX,0x4
00445b11 : MOV ECX,EDX
00445b13 : SHR ECX,0x1f
00445b16 : LEA EDX,[EDX + ECX*0x1 + 0x1]
00445b1a : MOV dword ptr [EBP + -0x80],EDX
00445b1d : TEST ESI,ESI
00445b1f : JZ 0x00445b3c
00445b21 : MOV EDI,dword ptr [EBX + 0x8]
00445b24 : MOV EAX,ESI
00445b26 : CALL 0x00445980
00445b2b : MOV ECX,dword ptr [EBX + 0x4]
00445b2e : CALL 0x006f04e0
00445b3c : MOV EAX,dword ptr [EBP + 0xffffff7c]
00445b42 : LEA EAX,[EAX + EAX*0x2]
00445b45 : SHL EAX,0x5
00445b48 : ADD EAX,EDI
00445b4a : MOV dword ptr [EBX + 0xc],EAX
00445b4d : LEA ECX,[EDX + EDX*0x2]
00445b50 : SHL ECX,0x5
00445b53 : ADD ECX,EDI
00445b55 : MOV dword ptr [EBX + 0x8],ECX
00445b58 : MOV dword ptr [EBX + 0x4],EDI
00445b5b : JMP 0x00445cbf
00445bb3 : SUB ESI,dword ptr [EBP + 0xc]
00445bb6 : MOV EAX,0x2aaaaaab
00445bbb : IMUL ESI
00445bbd : SAR EDX,0x4
00445bc0 : MOV EAX,EDX
00445bc2 : SHR EAX,0x1f
00445bc5 : ADD EAX,EDX
00445bc7 : LEA ECX,[EBP + -0x7c]
00445bca : MOV EDI,dword ptr [EBP + -0x80]
00445bcd : PUSH ECX
00445bce : CMP EAX,0x1
00445bd1 : JNC 0x00445c63
00445bd7 : CALL 0x004455d0
00445bdc : MOV dword ptr [EBP + -0x4],0x2
00445be3 : MOV EAX,dword ptr [EBP + 0xc]
00445be6 : LEA EDX,[EAX + 0x60]
00445be9 : MOV ECX,dword ptr [EBX + 0x8]
00445bec : PUSH ECX
00445bed : PUSH EAX
00445bee : CALL 0x00445ce0
00445bf3 : MOV byte ptr [EBP + -0x4],0x3
00445bf7 : MOV EDI,dword ptr [EBX + 0x8]
00445bfa : LEA EDX,[EBP + -0x7c]
00445bfd : PUSH EDX
00445bfe : MOV ECX,EDI
00445c00 : SUB ECX,dword ptr [EBP + 0xc]
00445c03 : MOV EAX,0x2aaaaaab
00445c08 : IMUL ECX
00445c0a : SAR EDX,0x4
00445c0d : MOV EAX,EDX
00445c0f : SHR EAX,0x1f
00445c12 : ADD EAX,EDX
00445c14 : MOV ESI,0x1
00445c19 : SUB ESI,EAX
00445c1b : CALL 0x00445950
00445c20 : MOV dword ptr [EBP + -0x4],0x2
00445c27 : ADD dword ptr [EBX + 0x8],0x60
00445c2b : MOV EBX,dword ptr [EBX + 0x8]
00445c2e : LEA EAX,[EBX + -0x60]
00445c31 : PUSH EAX
00445c32 : MOV ECX,dword ptr [EBP + 0xc]
00445c35 : PUSH ECX
00445c36 : LEA EDI,[EBP + -0x7c]
00445c39 : CALL 0x00445e20
00445c3e : ADD ESP,0x8
00445c41 : JMP 0x00445caf
00445c63 : CALL 0x004455d0
00445c68 : MOV dword ptr [EBP + -0x4],0x5
00445c6f : MOV ESI,dword ptr [EBX + 0x8]
00445c72 : LEA EDI,[ESI + -0x60]
00445c75 : PUSH ESI
00445c76 : PUSH EDI
00445c77 : MOV EDX,ESI
00445c79 : CALL 0x00445ce0
00445c7e : MOV dword ptr [EBX + 0x8],EAX
00445c81 : MOV byte ptr [EBP + -0x80],0x0
00445c85 : MOV EDX,dword ptr [EBP + -0x80]
00445c88 : PUSH EDX
00445c89 : MOV EAX,dword ptr [EBP + -0x80]
00445c8c : PUSH EAX
00445c8d : MOV ECX,dword ptr [EBP + -0x80]
00445c90 : PUSH ECX
00445c91 : PUSH ESI
00445c92 : PUSH EDI
00445c93 : MOV EDX,dword ptr [EBP + 0xc]
00445c96 : PUSH EDX
00445c97 : CALL 0x00445ea0
00445c9c : MOV EAX,dword ptr [EBP + 0xc]
00445c9f : LEA ECX,[EAX + 0x60]
00445ca2 : PUSH ECX
00445ca3 : PUSH EAX
00445ca4 : LEA EDI,[EBP + -0x7c]
00445ca7 : CALL 0x00445e20
00445cac : ADD ESP,0x20
00445caf : MOV dword ptr [EBP + -0x4],0xffffffff
00445cb6 : LEA EDX,[EBP + -0x7c]
00445cb9 : PUSH EDX
00445cba : CALL 0x0044ca10
00445cbf : MOV ECX,dword ptr [EBP + -0xc]
00445cc2 : MOV dword ptr FS:[0x0],ECX
00445cc9 : POP ECX
00445cca : POP EDI
00445ccb : POP ESI
00445ccc : POP EBX
00445ccd : MOV ECX,dword ptr [EBP + -0x18]
00445cd0 : XOR ECX,EBP
00445cd2 : CALL 0x00633e6b
00445cd7 : MOV ESP,EBP
00445cd9 : POP EBP
00445cda : RET 0xc
