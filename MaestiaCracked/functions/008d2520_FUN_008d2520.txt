PROGRAM  : Maestia.exe
FUNCTION : FUN_008d2520
ENTRY    : 008d2520
BODY     : [[008d2520, 008d256e] [008d2570, 008d26c4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_008d2520(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  float fVar3;
  float fVar4;
  bool bVar5;
  char cVar6;
  int iVar7;
  int iVar8;
  int local_10;
  
  iVar1 = *(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54);
  if (iVar1 == 0) {
    return 0;
  }
  *(undefined4 *)(param_1 + 0xc4) = 0xffffffff;
  bVar5 = false;
  local_10 = 0;
  if (*(short *)(iVar1 + 0x30) != 0) {
    do {
      iVar7 = FUN_00ab67c0(local_10);
      uVar2 = *(undefined4 *)(iVar7 + 0x58);
      iVar8 = FUN_00a1a840(uVar2);
      if ((((iVar8 != 0) || (iVar8 = FUN_00a1a6d0(uVar2), iVar8 != 0)) ||
          (iVar8 = FUN_00a1a780(uVar2), iVar8 != 0)) && (*(char *)(iVar8 + 0x3ad) != '\0')) {
        cVar6 = FUN_008896f0();
        if ((cVar6 != '\0') &&
           (cVar6 = FUN_008d1a60(param_1,*(undefined4 *)(iVar8 + 4),0), cVar6 != '\0')) {
          return 1;
        }
        fVar3 = (float)*(int *)(iVar8 + 0xa4);
        if (*(int *)(iVar8 + 0xa4) < 0) {
          fVar3 = fVar3 + 4.2949673e+09;
        }
        fVar4 = (float)*(int *)(iVar8 + 0xb0);
        if (*(int *)(iVar8 + 0xb0) < 0) {
          fVar4 = fVar4 + 4.2949673e+09;
        }
        fVar3 = (fVar3 / fVar4) * 100.0;
        if (*(int *)(*(int *)(param_1 + 0xb8) + 8) == 3) {
          if ((fVar3 < 75.0) && (!bVar5)) {
            FUN_008d1c90(param_1,*(undefined4 *)(iVar7 + 0x58));
            bVar5 = true;
          }
          if (fVar3 < 50.0) {
            *(undefined4 *)(param_1 + 0xc4) = *(undefined4 *)(iVar7 + 0x58);
            return 1;
          }
        }
        else if (fVar3 < 40.0) {
          FUN_008d1c90(param_1,*(undefined4 *)(iVar7 + 0x58));
          *(undefined4 *)(param_1 + 0xc4) = *(undefined4 *)(iVar7 + 0x58);
          return 1;
        }
      }
      local_10 = local_10 + 1;
    } while ((ushort)local_10 < *(ushort *)(iVar1 + 0x30));
    if (bVar5) {
      return 1;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
008d2520 : PUSH EBP
008d2521 : MOV EBP,ESP
008d2523 : SUB ESP,0x14
008d2526 : MOV EAX,[0x0172491c]
008d252b : MOV ECX,dword ptr [EAX + 0x17c]
008d2531 : MOV ECX,dword ptr [ECX + 0x1f54]
008d2537 : MOV dword ptr [EBP + -0x14],ECX
008d253a : TEST ECX,ECX
008d253c : JNZ 0x008d2546
008d253e : XOR AL,AL
008d2540 : MOV ESP,EBP
008d2542 : POP EBP
008d2543 : RET 0x4
008d2546 : MOV EDX,dword ptr [EBP + 0x8]
008d2549 : PUSH EBX
008d254a : XOR EAX,EAX
008d254c : PUSH ESI
008d254d : MOV dword ptr [EDX + 0xc4],0xffffffff
008d2557 : PUSH EDI
008d2558 : MOV byte ptr [EBP + -0x1],0x0
008d255c : MOV dword ptr [EBP + -0xc],0x0
008d2563 : CMP AX,word ptr [ECX + 0x30]
008d2567 : JNC 0x008d2699
008d256d : JMP 0x008d2572
008d2570 : MOV ECX,EDX
008d2572 : MOV EDX,dword ptr [EBP + -0xc]
008d2575 : PUSH EDX
008d2576 : CALL 0x00ab67c0
008d257b : MOV EDI,dword ptr [EAX + 0x58]
008d257e : MOV ECX,dword ptr [0x00da93ec]
008d2584 : PUSH EDI
008d2585 : MOV dword ptr [EBP + -0x10],EAX
008d2588 : MOV EBX,ECX
008d258a : CALL 0x00a1a840
008d258f : MOV ESI,EAX
008d2591 : TEST ESI,ESI
008d2593 : JNZ 0x008d25b5
008d2595 : PUSH EDI
008d2596 : MOV ECX,EBX
008d2598 : CALL 0x00a1a6d0
008d259d : MOV ESI,EAX
008d259f : TEST ESI,ESI
008d25a1 : JNZ 0x008d25b5
008d25a3 : PUSH EDI
008d25a4 : MOV ECX,EBX
008d25a6 : CALL 0x00a1a780
008d25ab : MOV ESI,EAX
008d25ad : TEST ESI,ESI
008d25af : JZ 0x008d267f
008d25b5 : CMP byte ptr [ESI + 0x3ad],0x0
008d25bc : JZ 0x008d267f
008d25c2 : MOV EAX,ESI
008d25c4 : CALL 0x008896f0
008d25c9 : MOV EDI,dword ptr [EBP + 0x8]
008d25cc : TEST AL,AL
008d25ce : JZ 0x008d25e4
008d25d0 : MOV EAX,dword ptr [ESI + 0x4]
008d25d3 : PUSH 0x0
008d25d5 : PUSH EAX
008d25d6 : PUSH EDI
008d25d7 : CALL 0x008d1a60
008d25dc : TEST AL,AL
008d25de : JNZ 0x008d26ba
008d25e4 : MOV EAX,dword ptr [ESI + 0xa4]
008d25ea : FILD dword ptr [ESI + 0xa4]
008d25f0 : TEST EAX,EAX
008d25f2 : JGE 0x008d25fa
008d25f4 : FADD float ptr [0x00cdf0e0]
008d25fa : MOV ECX,dword ptr [ESI + 0xb0]
008d2600 : FILD dword ptr [ESI + 0xb0]
008d2606 : TEST ECX,ECX
008d2608 : JGE 0x008d2610
008d260a : FADD float ptr [0x00cdf0e0]
008d2610 : FDIVP
008d2612 : MOV EDX,dword ptr [EDI + 0xb8]
008d2618 : CMP dword ptr [EDX + 0x8],0x3
008d261c : FMUL float ptr [0x00cdf230]
008d2622 : FSTP float ptr [EBP + -0x8]
008d2625 : JNZ 0x008d2671
008d2627 : MOVSS XMM0,dword ptr [0x00cdf8bc]
008d262f : COMISS XMM0,dword ptr [EBP + -0x8]
008d2633 : JBE 0x008d264c
008d2635 : CMP byte ptr [EBP + -0x1],0x0
008d2639 : JNZ 0x008d264c
008d263b : MOV EAX,dword ptr [EBP + -0x10]
008d263e : MOV ECX,dword ptr [EAX + 0x58]
008d2641 : PUSH ECX
008d2642 : PUSH EDI
008d2643 : CALL 0x008d1c90
008d2648 : MOV byte ptr [EBP + -0x1],0x1
008d264c : MOVSS XMM0,dword ptr [0x00cdf214]
008d2654 : COMISS XMM0,dword ptr [EBP + -0x8]
008d2658 : JBE 0x008d267f
008d265a : MOV EAX,dword ptr [EBP + -0x10]
008d265d : MOV ECX,dword ptr [EAX + 0x58]
008d2660 : MOV dword ptr [EDI + 0xc4],ECX
008d2666 : POP EDI
008d2667 : POP ESI
008d2668 : MOV AL,0x1
008d266a : POP EBX
008d266b : MOV ESP,EBP
008d266d : POP EBP
008d266e : RET 0x4
008d2671 : MOVSS XMM0,dword ptr [0x00cdf238]
008d2679 : COMISS XMM0,dword ptr [EBP + -0x8]
008d267d : JA 0x008d26a4
008d267f : MOV EAX,dword ptr [EBP + -0xc]
008d2682 : MOV EDX,dword ptr [EBP + -0x14]
008d2685 : INC EAX
008d2686 : MOV dword ptr [EBP + -0xc],EAX
008d2689 : CMP AX,word ptr [EDX + 0x30]
008d268d : JC 0x008d2570
008d2693 : CMP byte ptr [EBP + -0x1],0x0
008d2697 : JNZ 0x008d26ba
008d2699 : POP EDI
008d269a : POP ESI
008d269b : XOR AL,AL
008d269d : POP EBX
008d269e : MOV ESP,EBP
008d26a0 : POP EBP
008d26a1 : RET 0x4
008d26a4 : MOV ESI,dword ptr [EBP + -0x10]
008d26a7 : MOV EDX,dword ptr [ESI + 0x58]
008d26aa : PUSH EDX
008d26ab : PUSH EDI
008d26ac : CALL 0x008d1c90
008d26b1 : MOV EAX,dword ptr [ESI + 0x58]
008d26b4 : MOV dword ptr [EDI + 0xc4],EAX
008d26ba : POP EDI
008d26bb : POP ESI
008d26bc : MOV AL,0x1
008d26be : POP EBX
008d26bf : MOV ESP,EBP
008d26c1 : POP EBP
008d26c2 : RET 0x4
