PROGRAM  : Maestia.exe
FUNCTION : FUN_00a22c40
ENTRY    : 00a22c40
BODY     : [[00a22c40, 00a22d65]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a22c40(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 **ppuVar5;
  int iVar6;
  uint uVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 *local_14;
  int local_10;
  undefined4 *local_c;
  undefined1 local_8 [4];
  
  if (DAT_017247ac == 0) {
    return;
  }
  local_10 = -(uint)(*(int *)(DAT_017247ac + 0x28) != 0);
  iVar3 = DAT_017247ac;
joined_r0x00a22c61:
  do {
    if (local_10 == 0) {
      return;
    }
    puVar9 = (undefined4 *)0x0;
    if (iVar3 != 0) {
      local_c = (undefined4 *)0x0;
      FUN_00404160(&local_10,local_8,&local_c);
      puVar9 = local_c;
    }
    iVar2 = puVar9[0x3c];
  } while (iVar2 == 0);
  uVar7 = CONCAT22(*(undefined2 *)(puVar9 + 1),*(undefined2 *)((int)puVar9 + 6));
  cVar1 = *(char *)((int)DAT_01721078[1] + 0x15);
  puVar4 = (undefined4 *)DAT_01721078[1];
  local_c = DAT_01721078;
  while (puVar8 = puVar4, cVar1 == '\0') {
    if ((uint)puVar8[3] < uVar7) {
      puVar4 = (undefined4 *)puVar8[2];
      puVar8 = local_c;
    }
    else {
      puVar4 = (undefined4 *)*puVar8;
    }
    cVar1 = *(char *)((int)puVar4 + 0x15);
    local_c = puVar8;
  }
  if ((local_c == DAT_01721078) || (uVar7 < (uint)local_c[3])) {
    local_14 = DAT_01721078;
    ppuVar5 = &local_14;
  }
  else {
    ppuVar5 = &local_c;
  }
  if (*ppuVar5 == DAT_01721078) goto code_r0x00a22ce1;
  goto LAB_00a22d18;
code_r0x00a22ce1:
  iVar6 = FUN_00703c00(0x300);
  iVar3 = DAT_017247ac;
  if (iVar6 != 0) {
    local_1c = CONCAT22(*(undefined2 *)(puVar9 + 1),*(undefined2 *)((int)puVar9 + 6));
    local_18 = iVar6;
    FUN_00408230(&local_1c);
LAB_00a22d18:
    iVar6 = FUN_00703c00(0x300);
    iVar3 = DAT_017247ac;
    if (iVar6 != 0) {
      local_24 = CONCAT22(*(undefined2 *)(iVar2 + 4),*(undefined2 *)(iVar2 + 6));
      local_20 = iVar6;
      FUN_00408230(&local_24);
      iVar3 = DAT_017247ac;
    }
  }
  goto joined_r0x00a22c61;
}



============================================================
DISASSEMBLY
============================================================
00a22c40 : PUSH EBP
00a22c41 : MOV EBP,ESP
00a22c43 : SUB ESP,0x34
00a22c46 : PUSH EBX
00a22c47 : PUSH ESI
00a22c48 : PUSH EDI
00a22c49 : MOV EDI,dword ptr [0x017247ac]
00a22c4f : TEST EDI,EDI
00a22c51 : JZ 0x00a22d5f
00a22c57 : MOV EAX,dword ptr [EDI + 0x28]
00a22c5a : NEG EAX
00a22c5c : SBB EAX,EAX
00a22c5e : MOV dword ptr [EBP + -0xc],EAX
00a22c61 : JZ 0x00a22d5f
00a22c67 : XOR ESI,ESI
00a22c69 : CMP EDI,ESI
00a22c6b : JZ 0x00a22c86
00a22c6d : LEA EAX,[EBP + -0x8]
00a22c70 : PUSH EAX
00a22c71 : LEA ECX,[EBP + -0x4]
00a22c74 : PUSH ECX
00a22c75 : LEA EDX,[EBP + -0xc]
00a22c78 : PUSH EDX
00a22c79 : MOV EAX,EDI
00a22c7b : MOV dword ptr [EBP + -0x8],ESI
00a22c7e : CALL 0x00404160
00a22c83 : MOV ESI,dword ptr [EBP + -0x8]
00a22c86 : MOV EBX,dword ptr [ESI + 0xf0]
00a22c8c : TEST EBX,EBX
00a22c8e : JZ 0x00a22d55
00a22c94 : MOVZX ECX,word ptr [ESI + 0x4]
00a22c98 : MOVZX EAX,word ptr [ESI + 0x6]
00a22c9c : MOV EDI,dword ptr [0x01721078]
00a22ca2 : SHL ECX,0x10
00a22ca5 : OR ECX,EAX
00a22ca7 : MOV EAX,dword ptr [EDI + 0x4]
00a22caa : CMP byte ptr [EAX + 0x15],0x0
00a22cae : MOV EDX,EDI
00a22cb0 : JNZ 0x00a22cc6
00a22cb2 : CMP dword ptr [EAX + 0xc],ECX
00a22cb5 : JNC 0x00a22cbc
00a22cb7 : MOV EAX,dword ptr [EAX + 0x8]
00a22cba : JMP 0x00a22cc0
00a22cbc : MOV EDX,EAX
00a22cbe : MOV EAX,dword ptr [EAX]
00a22cc0 : CMP byte ptr [EAX + 0x15],0x0
00a22cc4 : JZ 0x00a22cb2
00a22cc6 : MOV dword ptr [EBP + -0x8],EDX
00a22cc9 : CMP EDX,EDI
00a22ccb : JZ 0x00a22cd7
00a22ccd : CMP ECX,dword ptr [EDX + 0xc]
00a22cd0 : JC 0x00a22cd7
00a22cd2 : LEA EAX,[EBP + -0x8]
00a22cd5 : JMP 0x00a22cdd
00a22cd7 : MOV dword ptr [EBP + -0x10],EDI
00a22cda : LEA EAX,[EBP + -0x10]
00a22cdd : CMP dword ptr [EAX],EDI
00a22cdf : JNZ 0x00a22d18
00a22ce1 : MOV DI,word ptr [ESI + 0x80]
00a22ce8 : PUSH 0x300
00a22ced : CALL 0x00703c00
00a22cf2 : ADD ESP,0x4
00a22cf5 : TEST EAX,EAX
00a22cf7 : JZ 0x00a22d4f
00a22cf9 : MOVZX ECX,word ptr [ESI + 0x4]
00a22cfd : MOVZX EDX,word ptr [ESI + 0x6]
00a22d01 : SHL ECX,0x10
00a22d04 : MOV dword ptr [EBP + -0x14],EAX
00a22d07 : LEA EAX,[EBP + -0x18]
00a22d0a : OR ECX,EDX
00a22d0c : PUSH EAX
00a22d0d : LEA EDI,[EBP + -0x28]
00a22d10 : MOV dword ptr [EBP + -0x18],ECX
00a22d13 : CALL 0x00408230
00a22d18 : MOV DI,word ptr [ESI + 0x80]
00a22d1f : PUSH 0x300
00a22d24 : CALL 0x00703c00
00a22d29 : ADD ESP,0x4
00a22d2c : TEST EAX,EAX
00a22d2e : JZ 0x00a22d4f
00a22d30 : MOVZX ECX,word ptr [EBX + 0x4]
00a22d34 : MOVZX EDX,word ptr [EBX + 0x6]
00a22d38 : SHL ECX,0x10
00a22d3b : MOV dword ptr [EBP + -0x1c],EAX
00a22d3e : LEA EAX,[EBP + -0x20]
00a22d41 : OR ECX,EDX
00a22d43 : PUSH EAX
00a22d44 : LEA EDI,[EBP + -0x30]
00a22d47 : MOV dword ptr [EBP + -0x20],ECX
00a22d4a : CALL 0x00408230
00a22d4f : MOV EDI,dword ptr [0x017247ac]
00a22d55 : CMP dword ptr [EBP + -0xc],0x0
00a22d59 : JNZ 0x00a22c67
00a22d5f : POP EDI
00a22d60 : POP ESI
00a22d61 : POP EBX
00a22d62 : MOV ESP,EBP
00a22d64 : POP EBP
00a22d65 : RET
