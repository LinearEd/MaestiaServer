PROGRAM  : Maestia.exe
FUNCTION : FUN_008c9580
ENTRY    : 008c9580
BODY     : [[008c9580, 008c9703]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008c9580(int param_1,int param_2)

{
  int in_EAX;
  int iVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  int local_8;
  
  if (in_EAX < 0x33) {
    iVar4 = 0;
    if (*(int *)(*DAT_00da9894 + 0x130) == 0) {
      piVar3 = (int *)0x0;
    }
    else {
      piVar3 = *(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x3c);
    }
    iVar1 = (**(code **)(*piVar3 + 0x74))(param_2,0);
    local_8 = in_EAX;
    if ((iVar1 != 0) && (iVar2 = FUN_004049b0(*(undefined4 *)(iVar1 + 0x10)), iVar2 != 0)) {
      fVar5 = (float)*(int *)(iVar2 + 0x54);
      if (*(int *)(iVar2 + 0x54) < 0) {
        fVar5 = fVar5 + 4.2949673e+09;
      }
      fVar5 = fVar5 * 0.01 *
              (float)((*(int *)(iVar1 + 0xb8) * 10) / 1000 - (*(int *)(iVar1 + 0xb0) * 10) / 1000);
      if (fVar5 < 0.0) {
        fVar6 = fVar5 - DAT_00d72c24;
      }
      else {
        fVar6 = fVar5 + DAT_00d72c24;
      }
      if ((int)fVar6 / 10 < 1) {
        iVar4 = 1;
      }
      else {
        if (fVar5 < 0.0) {
          fVar5 = fVar5 - DAT_00d72c24;
        }
        else {
          fVar5 = fVar5 + DAT_00d72c24;
        }
        iVar4 = (int)fVar5 / 10;
      }
      if ((param_2 == 0) && ((*(uint *)(iVar2 + 0x4c) & 0x100000) != 0)) {
        local_8 = 100;
        iVar4 = 0;
      }
    }
    if (((*(char *)(param_1 + 0x32) != '\0') && (*DAT_00da9894 != 0)) &&
       (piVar3 = *(int **)(*DAT_00da9894 + 0x114), piVar3 != (int *)0x0)) {
      (**(code **)(*piVar3 + 4))
                (piVar3,"mc_durability.SetDurabilityValue","%d,%d,%d",param_2,local_8,iVar4);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008c9580 : PUSH EBP
008c9581 : MOV EBP,ESP
008c9583 : SUB ESP,0x8
008c9586 : CMP EAX,0x32
008c9589 : MOV dword ptr [EBP + -0x4],EAX
008c958c : JG 0x008c96fe
008c9592 : MOV EAX,[0x00da9894]
008c9597 : MOV EAX,dword ptr [EAX]
008c9599 : MOV EAX,dword ptr [EAX + 0x130]
008c959f : PUSH EDI
008c95a0 : XOR EDI,EDI
008c95a2 : TEST EAX,EAX
008c95a4 : JNZ 0x008c95aa
008c95a6 : XOR ECX,ECX
008c95a8 : JMP 0x008c95ad
008c95aa : MOV ECX,dword ptr [EAX + 0x3c]
008c95ad : MOV EDX,dword ptr [ECX]
008c95af : MOV EAX,dword ptr [EBP + 0xc]
008c95b2 : MOV EDX,dword ptr [EDX + 0x74]
008c95b5 : PUSH ESI
008c95b6 : PUSH 0x0
008c95b8 : PUSH EAX
008c95b9 : CALL EDX
008c95bb : MOV ESI,EAX
008c95bd : TEST ESI,ESI
008c95bf : JZ 0x008c96bf
008c95c5 : MOV EAX,dword ptr [ESI + 0x10]
008c95c8 : PUSH EBX
008c95c9 : PUSH EAX
008c95ca : CALL 0x004049b0
008c95cf : MOV EBX,EAX
008c95d1 : ADD ESP,0x4
008c95d4 : TEST EBX,EBX
008c95d6 : JZ 0x008c96be
008c95dc : MOV EAX,dword ptr [ESI + 0xb8]
008c95e2 : MOV ESI,dword ptr [ESI + 0xb0]
008c95e8 : LEA ECX,[EAX + EAX*0x4]
008c95eb : ADD ECX,ECX
008c95ed : MOV EAX,0x10624dd3
008c95f2 : IMUL ECX
008c95f4 : SAR EDX,0x6
008c95f7 : MOV ECX,EDX
008c95f9 : SHR ECX,0x1f
008c95fc : ADD ECX,EDX
008c95fe : MOV EDI,ECX
008c9600 : LEA ECX,[ESI + ESI*0x4]
008c9603 : ADD ECX,ECX
008c9605 : MOV EAX,0x10624dd3
008c960a : IMUL ECX
008c960c : MOV ECX,dword ptr [EBX + 0x54]
008c960f : SAR EDX,0x6
008c9612 : MOV EAX,EDX
008c9614 : SHR EAX,0x1f
008c9617 : ADD EAX,EDX
008c9619 : SUB EDI,EAX
008c961b : MOV dword ptr [EBP + -0x8],EDI
008c961e : FILD dword ptr [EBP + -0x8]
008c9621 : FILD dword ptr [EBX + 0x54]
008c9624 : TEST ECX,ECX
008c9626 : JGE 0x008c962e
008c9628 : FADD float ptr [0x00cdf0e0]
008c962e : FMUL float ptr [0x00cdf23c]
008c9634 : XORPS XMM3,XMM3
008c9637 : MOVSS XMM2,dword ptr [0x00d72c24]
008c963f : FMULP
008c9641 : FSTP float ptr [EBP + -0x8]
008c9644 : MOVSS XMM0,dword ptr [EBP + -0x8]
008c9649 : MOVAPS XMM1,XMM0
008c964c : COMISS XMM1,XMM3
008c964f : JC 0x008c9657
008c9651 : ADDSS XMM1,XMM2
008c9655 : JMP 0x008c965b
008c9657 : SUBSS XMM1,XMM2
008c965b : MOV EAX,0x66666667
008c9660 : CVTTSS2SI ECX,XMM1
008c9664 : IMUL ECX
008c9666 : SAR EDX,0x2
008c9669 : MOV EAX,EDX
008c966b : SHR EAX,0x1f
008c966e : ADD EAX,EDX
008c9670 : CMP EAX,0x1
008c9673 : JGE 0x008c967c
008c9675 : MOV EDI,0x1
008c967a : JMP 0x008c96a0
008c967c : COMISS XMM0,XMM3
008c967f : JC 0x008c9687
008c9681 : ADDSS XMM0,XMM2
008c9685 : JMP 0x008c968b
008c9687 : SUBSS XMM0,XMM2
008c968b : MOV EAX,0x66666667
008c9690 : CVTTSS2SI ECX,XMM0
008c9694 : IMUL ECX
008c9696 : SAR EDX,0x2
008c9699 : MOV EDI,EDX
008c969b : SHR EDI,0x1f
008c969e : ADD EDI,EDX
008c96a0 : CMP dword ptr [EBP + 0xc],0x0
008c96a4 : JNZ 0x008c96be
008c96a6 : MOV ECX,dword ptr [EBX + 0x4c]
008c96a9 : AND ECX,0x100000
008c96af : XOR EAX,EAX
008c96b1 : OR EAX,ECX
008c96b3 : JZ 0x008c96be
008c96b5 : MOV dword ptr [EBP + -0x4],0x64
008c96bc : XOR EDI,EDI
008c96be : POP EBX
008c96bf : MOV ECX,dword ptr [EBP + 0x8]
008c96c2 : CMP byte ptr [ECX + 0x32],0x0
008c96c6 : POP ESI
008c96c7 : JZ 0x008c96fd
008c96c9 : MOV EDX,dword ptr [0x00da9894]
008c96cf : MOV EAX,dword ptr [EDX]
008c96d1 : TEST EAX,EAX
008c96d3 : JZ 0x008c96fd
008c96d5 : MOV EAX,dword ptr [EAX + 0x114]
008c96db : TEST EAX,EAX
008c96dd : JZ 0x008c96fd
008c96df : MOV EDX,dword ptr [EBP + -0x4]
008c96e2 : MOV ECX,dword ptr [EAX]
008c96e4 : PUSH EDI
008c96e5 : PUSH EDX
008c96e6 : MOV EDX,dword ptr [EBP + 0xc]
008c96e9 : PUSH EDX
008c96ea : PUSH 0xc51d94
008c96ef : PUSH 0xc51da0
008c96f4 : PUSH EAX
008c96f5 : MOV EAX,dword ptr [ECX + 0x4]
008c96f8 : CALL EAX
008c96fa : ADD ESP,0x18
008c96fd : POP EDI
008c96fe : MOV ESP,EBP
008c9700 : POP EBP
008c9701 : RET 0x8
