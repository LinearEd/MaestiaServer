PROGRAM  : Maestia.exe
FUNCTION : FUN_005cfa30
ENTRY    : 005cfa30
BODY     : [[005cfa30, 005cfdeb]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_005cfa30(undefined4 param_1,undefined4 *param_2,undefined4 param_3,undefined4 param_4)

{
  byte bVar1;
  char cVar2;
  short sVar3;
  byte *pbVar4;
  int iVar5;
  byte *pbVar6;
  undefined4 uVar7;
  int in_ECX;
  char *pcVar8;
  bool bVar9;
  float10 fVar10;
  uint local_8;
  
  pbVar6 = *(byte **)*param_2;
  pcVar8 = "alpha";
  pbVar4 = pbVar6;
  do {
    bVar1 = *pbVar4;
    bVar9 = bVar1 < (byte)*pcVar8;
    if (bVar1 != *pcVar8) {
LAB_005cfa67:
      iVar5 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
      goto LAB_005cfa6c;
    }
    if (bVar1 == 0) break;
    bVar1 = pbVar4[1];
    bVar9 = bVar1 < ((byte *)pcVar8)[1];
    if (bVar1 != ((byte *)pcVar8)[1]) goto LAB_005cfa67;
    pbVar4 = pbVar4 + 2;
    pcVar8 = (char *)((byte *)pcVar8 + 2);
  } while (bVar1 != 0);
  iVar5 = 0;
LAB_005cfa6c:
  if (iVar5 == 0) {
    fVar10 = (float10)FUN_00527730(param_1);
    param_3._0_1_ = (undefined1)(int)ROUND((float)fVar10 * 255.0);
    *(undefined1 *)(in_ECX + 0x2b) = (undefined1)param_3;
    return 1;
  }
  pcVar8 = "angle";
  pbVar4 = pbVar6;
  do {
    bVar1 = *pbVar4;
    bVar9 = bVar1 < (byte)*pcVar8;
    if (bVar1 != *pcVar8) {
LAB_005cfae3:
      iVar5 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
      goto LAB_005cfae8;
    }
    if (bVar1 == 0) break;
    bVar1 = pbVar4[1];
    bVar9 = bVar1 < ((byte *)pcVar8)[1];
    if (bVar1 != ((byte *)pcVar8)[1]) goto LAB_005cfae3;
    pbVar4 = pbVar4 + 2;
    pcVar8 = (char *)((byte *)pcVar8 + 2);
  } while (bVar1 != 0);
  iVar5 = 0;
LAB_005cfae8:
  if (iVar5 == 0) {
    sVar3 = FUN_00527990(param_1);
    *(short *)(in_ECX + 0x24) = sVar3 * 10;
    return 1;
  }
  pbVar4 = &DAT_00b8a574;
  do {
    bVar1 = *pbVar6;
    bVar9 = bVar1 < *pbVar4;
    if (bVar1 != *pbVar4) {
LAB_005cfb35:
      iVar5 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
      goto LAB_005cfb3a;
    }
    if (bVar1 == 0) break;
    bVar1 = pbVar6[1];
    bVar9 = bVar1 < pbVar4[1];
    if (bVar1 != pbVar4[1]) goto LAB_005cfb35;
    pbVar6 = pbVar6 + 2;
    pbVar4 = pbVar4 + 2;
  } while (bVar1 != 0);
  iVar5 = 0;
LAB_005cfb3a:
  if (iVar5 == 0) {
    fVar10 = (float10)FUN_00527730(param_1);
    local_8 = (uint)(longlong)ROUND((float)fVar10 * 16.0 + 0.5);
    if (0xfe < local_8) {
      local_8 = 0xff;
    }
    *(char *)(in_ECX + 0x21) = (char)local_8;
    return 1;
  }
  cVar2 = FUN_004ffc90("blurY");
  if (cVar2 != '\0') {
    fVar10 = (float10)FUN_00527730(param_1);
    local_8 = (uint)(longlong)ROUND((float)fVar10 * 16.0 + 0.5);
    if (0xfe < local_8) {
      local_8 = 0xff;
    }
    *(char *)(in_ECX + 0x22) = (char)local_8;
    return 1;
  }
  cVar2 = FUN_004ffc90("color");
  if (cVar2 != '\0') {
    uVar7 = FUN_00527a80(param_1);
    *(undefined4 *)(in_ECX + 0x28) = uVar7;
    *(undefined1 *)(in_ECX + 0x2b) = *(undefined1 *)(in_ECX + 0x2b);
    return 1;
  }
  cVar2 = FUN_004ffc90("distance");
  if (cVar2 != '\0') {
    sVar3 = FUN_00527990(param_1);
    *(short *)(in_ECX + 0x26) = sVar3 * 0x14;
    return 1;
  }
  cVar2 = FUN_004ffc90("hideObject");
  if (cVar2 != '\0') {
    cVar2 = FUN_00526120(param_1);
    if (cVar2 != '\0') {
      *(byte *)(in_ECX + 0x20) = *(byte *)(in_ECX + 0x20) | 0x40;
      return 1;
    }
    *(byte *)(in_ECX + 0x20) = *(byte *)(in_ECX + 0x20) & 0xbf;
    return 1;
  }
  cVar2 = FUN_004ffc90("inner");
  if (cVar2 == '\0') {
    cVar2 = FUN_004ffc90("knockout");
    if (cVar2 != '\0') {
      cVar2 = FUN_00526120(param_1);
      if (cVar2 != '\0') {
        *(byte *)(in_ECX + 0x20) = *(byte *)(in_ECX + 0x20) | 0x20;
        return 1;
      }
      *(byte *)(in_ECX + 0x20) = *(byte *)(in_ECX + 0x20) & 0xdf;
      return 1;
    }
    cVar2 = FUN_004ffc90("quality");
    if (cVar2 == '\0') {
      cVar2 = FUN_004ffc90("strength");
      if (cVar2 != '\0') {
        fVar10 = (float10)FUN_00527730(param_1);
        local_8 = (uint)(longlong)ROUND((float)fVar10 * 16.0 + 0.5);
        if (0xfe < local_8) {
          local_8 = 0xff;
        }
        *(char *)(in_ECX + 0x23) = (char)local_8;
        return 1;
      }
      uVar7 = FUN_005520e0(param_1,param_2,param_3,param_4);
      return uVar7;
    }
    iVar5 = FUN_00529690();
    if (iVar5 != 0) {
      FUN_0050a9f0(iVar5 + 0xc,"Warning: DropShadowFilter.quality property is not supported!\n");
      return 1;
    }
  }
  else {
    iVar5 = FUN_00529690();
    if (iVar5 != 0) {
      FUN_0050a9f0(iVar5 + 0xc,"Warning: DropShadowFilter.inner property is not supported!\n");
    }
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
005cfa30 : SUB ESP,0x8
005cfa33 : PUSH EBX
005cfa34 : MOV EBX,dword ptr [ESP + 0x14]
005cfa38 : MOV EAX,dword ptr [EBX]
005cfa3a : PUSH ESI
005cfa3b : MOV ESI,dword ptr [EAX]
005cfa3d : PUSH EDI
005cfa3e : MOV EDI,ECX
005cfa40 : MOV ECX,0xb8a444
005cfa45 : MOV EAX,ESI
005cfa47 : MOV DL,byte ptr [EAX]
005cfa49 : CMP DL,byte ptr [ECX]
005cfa4b : JNZ 0x005cfa67
005cfa4d : TEST DL,DL
005cfa4f : JZ 0x005cfa63
005cfa51 : MOV DL,byte ptr [EAX + 0x1]
005cfa54 : CMP DL,byte ptr [ECX + 0x1]
005cfa57 : JNZ 0x005cfa67
005cfa59 : ADD EAX,0x2
005cfa5c : ADD ECX,0x2
005cfa5f : TEST DL,DL
005cfa61 : JNZ 0x005cfa47
005cfa63 : XOR EAX,EAX
005cfa65 : JMP 0x005cfa6c
005cfa67 : SBB EAX,EAX
005cfa69 : SBB EAX,-0x1
005cfa6c : TEST EAX,EAX
005cfa6e : JNZ 0x005cfabc
005cfa70 : MOV ECX,dword ptr [ESP + 0x18]
005cfa74 : PUSH ECX
005cfa75 : MOV ECX,dword ptr [ESP + 0x24]
005cfa79 : CALL 0x00527730
005cfa7e : FSTP float ptr [ESP + 0x18]
005cfa82 : FLD float ptr [ESP + 0x18]
005cfa86 : FMUL double ptr [0x00b86b48]
005cfa8c : FNSTCW word ptr [ESP + 0x18]
005cfa90 : MOVZX EAX,word ptr [ESP + 0x18]
005cfa95 : OR EAX,0xc00
005cfa9a : MOV dword ptr [ESP + 0x20],EAX
005cfa9e : MOV AL,0x1
005cfaa0 : FLDCW word ptr [ESP + 0x20]
005cfaa4 : FISTP dword ptr [ESP + 0x20]
005cfaa8 : MOV DL,byte ptr [ESP + 0x20]
005cfaac : MOV byte ptr [EDI + 0x2b],DL
005cfaaf : POP EDI
005cfab0 : FLDCW word ptr [ESP + 0x14]
005cfab4 : POP ESI
005cfab5 : POP EBX
005cfab6 : ADD ESP,0x8
005cfab9 : RET 0x10
005cfabc : MOV ECX,0xb93004
005cfac1 : MOV EAX,ESI
005cfac3 : MOV DL,byte ptr [EAX]
005cfac5 : CMP DL,byte ptr [ECX]
005cfac7 : JNZ 0x005cfae3
005cfac9 : TEST DL,DL
005cfacb : JZ 0x005cfadf
005cfacd : MOV DL,byte ptr [EAX + 0x1]
005cfad0 : CMP DL,byte ptr [ECX + 0x1]
005cfad3 : JNZ 0x005cfae3
005cfad5 : ADD EAX,0x2
005cfad8 : ADD ECX,0x2
005cfadb : TEST DL,DL
005cfadd : JNZ 0x005cfac3
005cfadf : XOR EAX,EAX
005cfae1 : JMP 0x005cfae8
005cfae3 : SBB EAX,EAX
005cfae5 : SBB EAX,-0x1
005cfae8 : TEST EAX,EAX
005cfaea : JNZ 0x005cfb0e
005cfaec : MOV EAX,dword ptr [ESP + 0x18]
005cfaf0 : MOV ECX,dword ptr [ESP + 0x20]
005cfaf4 : PUSH EAX
005cfaf5 : CALL 0x00527990
005cfafa : LEA ECX,[EAX + EAX*0x4]
005cfafd : ADD ECX,ECX
005cfaff : MOV word ptr [EDI + 0x24],CX
005cfb03 : POP EDI
005cfb04 : POP ESI
005cfb05 : MOV AL,0x1
005cfb07 : POP EBX
005cfb08 : ADD ESP,0x8
005cfb0b : RET 0x10
005cfb0e : MOV ECX,0xb8a574
005cfb13 : MOV EAX,ESI
005cfb15 : MOV DL,byte ptr [EAX]
005cfb17 : CMP DL,byte ptr [ECX]
005cfb19 : JNZ 0x005cfb35
005cfb1b : TEST DL,DL
005cfb1d : JZ 0x005cfb31
005cfb1f : MOV DL,byte ptr [EAX + 0x1]
005cfb22 : CMP DL,byte ptr [ECX + 0x1]
005cfb25 : JNZ 0x005cfb35
005cfb27 : ADD EAX,0x2
005cfb2a : ADD ECX,0x2
005cfb2d : TEST DL,DL
005cfb2f : JNZ 0x005cfb15
005cfb31 : XOR EAX,EAX
005cfb33 : JMP 0x005cfb3a
005cfb35 : SBB EAX,EAX
005cfb37 : SBB EAX,-0x1
005cfb3a : TEST EAX,EAX
005cfb3c : JNZ 0x005cfb9c
005cfb3e : MOV EDX,dword ptr [ESP + 0x18]
005cfb42 : MOV ECX,dword ptr [ESP + 0x20]
005cfb46 : PUSH EDX
005cfb47 : CALL 0x00527730
005cfb4c : FSTP float ptr [ESP + 0x18]
005cfb50 : FLD float ptr [ESP + 0x18]
005cfb54 : FMUL double ptr [0x00b86b68]
005cfb5a : FNSTCW word ptr [ESP + 0x18]
005cfb5e : MOVZX EAX,word ptr [ESP + 0x18]
005cfb63 : FADD double ptr [0x00cdf120]
005cfb69 : OR EAX,0xc00
005cfb6e : MOV dword ptr [ESP + 0x20],EAX
005cfb72 : FLDCW word ptr [ESP + 0x20]
005cfb76 : FISTP qword ptr [ESP + 0xc]
005cfb7a : MOV EAX,dword ptr [ESP + 0xc]
005cfb7e : FLDCW word ptr [ESP + 0x18]
005cfb82 : CMP EAX,0xff
005cfb87 : JC 0x005cfb8e
005cfb89 : MOV EAX,0xff
005cfb8e : MOV byte ptr [EDI + 0x21],AL
005cfb91 : POP EDI
005cfb92 : POP ESI
005cfb93 : MOV AL,0x1
005cfb95 : POP EBX
005cfb96 : ADD ESP,0x8
005cfb99 : RET 0x10
005cfb9c : PUSH 0xb8a56c
005cfba1 : MOV ECX,EBX
005cfba3 : CALL 0x004ffc90
005cfba8 : TEST AL,AL
005cfbaa : JZ 0x005cfc0a
005cfbac : MOV EAX,dword ptr [ESP + 0x18]
005cfbb0 : MOV ECX,dword ptr [ESP + 0x20]
005cfbb4 : PUSH EAX
005cfbb5 : CALL 0x00527730
005cfbba : FSTP float ptr [ESP + 0x18]
005cfbbe : FLD float ptr [ESP + 0x18]
005cfbc2 : FMUL double ptr [0x00b86b68]
005cfbc8 : FNSTCW word ptr [ESP + 0x18]
005cfbcc : MOVZX EAX,word ptr [ESP + 0x18]
005cfbd1 : FADD double ptr [0x00cdf120]
005cfbd7 : OR EAX,0xc00
005cfbdc : MOV dword ptr [ESP + 0x20],EAX
005cfbe0 : FLDCW word ptr [ESP + 0x20]
005cfbe4 : FISTP qword ptr [ESP + 0xc]
005cfbe8 : MOV EAX,dword ptr [ESP + 0xc]
005cfbec : FLDCW word ptr [ESP + 0x18]
005cfbf0 : CMP EAX,0xff
005cfbf5 : JC 0x005cfbfc
005cfbf7 : MOV EAX,0xff
005cfbfc : MOV byte ptr [EDI + 0x22],AL
005cfbff : POP EDI
005cfc00 : POP ESI
005cfc01 : MOV AL,0x1
005cfc03 : POP EBX
005cfc04 : ADD ESP,0x8
005cfc07 : RET 0x10
005cfc0a : PUSH 0xb8d75c
005cfc0f : MOV ECX,EBX
005cfc11 : CALL 0x004ffc90
005cfc16 : TEST AL,AL
005cfc18 : JZ 0x005cfc3c
005cfc1a : MOV ECX,dword ptr [ESP + 0x18]
005cfc1e : PUSH ECX
005cfc1f : MOV ECX,dword ptr [ESP + 0x24]
005cfc23 : CALL 0x00527a80
005cfc28 : MOV CL,byte ptr [EDI + 0x2b]
005cfc2b : MOV dword ptr [EDI + 0x28],EAX
005cfc2e : MOV byte ptr [EDI + 0x2b],CL
005cfc31 : POP EDI
005cfc32 : POP ESI
005cfc33 : MOV AL,0x1
005cfc35 : POP EBX
005cfc36 : ADD ESP,0x8
005cfc39 : RET 0x10
005cfc3c : PUSH 0xb92224
005cfc41 : MOV ECX,EBX
005cfc43 : CALL 0x004ffc90
005cfc48 : TEST AL,AL
005cfc4a : JZ 0x005cfc70
005cfc4c : MOV EDX,dword ptr [ESP + 0x18]
005cfc50 : MOV ECX,dword ptr [ESP + 0x20]
005cfc54 : PUSH EDX
005cfc55 : CALL 0x00527990
005cfc5a : LEA EAX,[EAX + EAX*0x4]
005cfc5d : ADD EAX,EAX
005cfc5f : ADD EAX,EAX
005cfc61 : MOV word ptr [EDI + 0x26],AX
005cfc65 : POP EDI
005cfc66 : POP ESI
005cfc67 : MOV AL,0x1
005cfc69 : POP EBX
005cfc6a : ADD ESP,0x8
005cfc6d : RET 0x10
005cfc70 : PUSH 0xb92ff8
005cfc75 : MOV ECX,EBX
005cfc77 : CALL 0x004ffc90
005cfc7c : TEST AL,AL
005cfc7e : JZ 0x005cfcb0
005cfc80 : MOV ECX,dword ptr [ESP + 0x18]
005cfc84 : PUSH ECX
005cfc85 : MOV ECX,dword ptr [ESP + 0x24]
005cfc89 : CALL 0x00526120
005cfc8e : TEST AL,AL
005cfc90 : JZ 0x005cfca1
005cfc92 : OR byte ptr [EDI + 0x20],0x40
005cfc96 : POP EDI
005cfc97 : POP ESI
005cfc98 : MOV AL,0x1
005cfc9a : POP EBX
005cfc9b : ADD ESP,0x8
005cfc9e : RET 0x10
005cfca1 : AND byte ptr [EDI + 0x20],0xbf
005cfca5 : POP EDI
005cfca6 : POP ESI
005cfca7 : MOV AL,0x1
005cfca9 : POP EBX
005cfcaa : ADD ESP,0x8
005cfcad : RET 0x10
005cfcb0 : PUSH 0xb92ff0
005cfcb5 : MOV ECX,EBX
005cfcb7 : CALL 0x004ffc90
005cfcbc : TEST AL,AL
005cfcbe : JZ 0x005cfce9
005cfcc0 : MOV ECX,dword ptr [ESP + 0x18]
005cfcc4 : CALL 0x00529690
005cfcc9 : TEST EAX,EAX
005cfccb : JZ 0x005cfcde
005cfccd : ADD EAX,0xc
005cfcd0 : PUSH 0xb92fb4
005cfcd5 : PUSH EAX
005cfcd6 : CALL 0x0050a9f0
005cfcdb : ADD ESP,0x8
005cfcde : POP EDI
005cfcdf : POP ESI
005cfce0 : MOV AL,0x1
005cfce2 : POP EBX
005cfce3 : ADD ESP,0x8
005cfce6 : RET 0x10
005cfce9 : PUSH 0xb92fa8
005cfcee : MOV ECX,EBX
005cfcf0 : CALL 0x004ffc90
005cfcf5 : TEST AL,AL
005cfcf7 : JZ 0x005cfd29
005cfcf9 : MOV EDX,dword ptr [ESP + 0x18]
005cfcfd : MOV ECX,dword ptr [ESP + 0x20]
005cfd01 : PUSH EDX
005cfd02 : CALL 0x00526120
005cfd07 : TEST AL,AL
005cfd09 : JZ 0x005cfd1a
005cfd0b : OR byte ptr [EDI + 0x20],0x20
005cfd0f : POP EDI
005cfd10 : POP ESI
005cfd11 : MOV AL,0x1
005cfd13 : POP EBX
005cfd14 : ADD ESP,0x8
005cfd17 : RET 0x10
005cfd1a : AND byte ptr [EDI + 0x20],0xdf
005cfd1e : POP EDI
005cfd1f : POP ESI
005cfd20 : MOV AL,0x1
005cfd22 : POP EBX
005cfd23 : ADD ESP,0x8
005cfd26 : RET 0x10
005cfd29 : PUSH 0xb92fa0
005cfd2e : MOV ECX,EBX
005cfd30 : CALL 0x004ffc90
005cfd35 : TEST AL,AL
005cfd37 : JZ 0x005cfd62
005cfd39 : MOV ECX,dword ptr [ESP + 0x18]
005cfd3d : CALL 0x00529690
005cfd42 : TEST EAX,EAX
005cfd44 : JZ 0x005cfcde
005cfd46 : ADD EAX,0xc
005cfd49 : PUSH 0xb92f60
005cfd4e : PUSH EAX
005cfd4f : CALL 0x0050a9f0
005cfd54 : ADD ESP,0x8
005cfd57 : POP EDI
005cfd58 : POP ESI
005cfd59 : MOV AL,0x1
005cfd5b : POP EBX
005cfd5c : ADD ESP,0x8
005cfd5f : RET 0x10
005cfd62 : PUSH 0xb92f54
005cfd67 : MOV ECX,EBX
005cfd69 : CALL 0x004ffc90
005cfd6e : TEST AL,AL
005cfd70 : MOV EAX,dword ptr [ESP + 0x18]
005cfd74 : JZ 0x005cfdd0
005cfd76 : MOV ECX,dword ptr [ESP + 0x20]
005cfd7a : PUSH EAX
005cfd7b : CALL 0x00527730
005cfd80 : FSTP float ptr [ESP + 0x18]
005cfd84 : FLD float ptr [ESP + 0x18]
005cfd88 : FMUL double ptr [0x00b86b68]
005cfd8e : FNSTCW word ptr [ESP + 0x18]
005cfd92 : MOVZX EAX,word ptr [ESP + 0x18]
005cfd97 : FADD double ptr [0x00cdf120]
005cfd9d : OR EAX,0xc00
005cfda2 : MOV dword ptr [ESP + 0x20],EAX
005cfda6 : FLDCW word ptr [ESP + 0x20]
005cfdaa : FISTP qword ptr [ESP + 0xc]
005cfdae : MOV EAX,dword ptr [ESP + 0xc]
005cfdb2 : FLDCW word ptr [ESP + 0x18]
005cfdb6 : CMP EAX,0xff
005cfdbb : JC 0x005cfdc2
005cfdbd : MOV EAX,0xff
005cfdc2 : MOV byte ptr [EDI + 0x23],AL
005cfdc5 : POP EDI
005cfdc6 : POP ESI
005cfdc7 : MOV AL,0x1
005cfdc9 : POP EBX
005cfdca : ADD ESP,0x8
005cfdcd : RET 0x10
005cfdd0 : MOV ECX,dword ptr [ESP + 0x24]
005cfdd4 : MOV EDX,dword ptr [ESP + 0x20]
005cfdd8 : PUSH ECX
005cfdd9 : PUSH EDX
005cfdda : PUSH EBX
005cfddb : PUSH EAX
005cfddc : MOV ECX,EDI
005cfdde : CALL 0x005520e0
005cfde3 : POP EDI
005cfde4 : POP ESI
005cfde5 : POP EBX
005cfde6 : ADD ESP,0x8
005cfde9 : RET 0x10
