PROGRAM  : Maestia.exe
FUNCTION : FUN_00703890
ENTRY    : 00703890
BODY     : [[00703890, 00703a83]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00703890(uint param_1)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  int *unaff_EDI;
  undefined2 in_FPUControlWord;
  undefined4 local_3c [7];
  undefined4 local_20;
  undefined8 local_1c;
  undefined4 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b302f7;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  FUN_006ed4b0(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  local_14 = local_3c;
  local_3c[0] = 0x12345678;
  local_20 = 0x12345678;
  if (*(uint *)(*(int *)ThreadLocalStoragePointer + 0x1c) < 0x80) {
    FUN_006ed5d0(&local_14);
  }
  iVar2 = DAT_00d7c54c;
  local_8 = 0;
  param_1 = (param_1 & 0xffff) + 1 | 0x9a000000;
  FUN_004437f0(&param_1);
  if ((local_1c._4_4_ != *(int *)(iVar2 + 0x44)) &&
     (iVar2 = *(int *)(local_1c._4_4_ + 0x10), iVar2 != 0)) {
    iVar3 = (**(code **)(*unaff_EDI + 0x68))();
    if (iVar3 == 0) {
      uVar4 = FUN_006fec70();
      uVar4 = uVar4 & 0xff;
      if ((uVar4 != 0xb) && (9 < uVar4 - 0x14)) {
        if (uVar4 == 0) {
          if (DAT_00d72ed4 != 0) {
            uVar5 = FUN_006ee420(".\\ShareValue.cpp",0x4e);
            FUN_006ee470(L"[ERROR] %s %d\n",uVar5);
            DAT_00d72ed4 = 0;
          }
        }
        else {
          if (uVar4 < 10) {
            uVar4 = (byte)(&DAT_00d6ab04)[uVar4] + 6;
            goto LAB_00703a14;
          }
          if (DAT_00d72ed8 != 0) {
            uVar5 = FUN_006ee420(".\\ShareValue.cpp",0x54);
            FUN_006ee470(L"[ERROR] %s %d\n",uVar5);
            DAT_00d72ed8 = 0;
          }
        }
      }
    }
    else {
      if (*(byte *)(unaff_EDI + 0xa2) < 9) {
        uVar4 = (uint)(byte)(&DAT_00d6aaf8)[*(byte *)(unaff_EDI + 0xa2)];
LAB_00703a14:
        uVar1 = *(ushort *)(iVar2 + 0x1e);
        param_1 = CONCAT22(in_FPUControlWord,uVar1);
        local_1c = (longlong)
                   ROUND((float)uVar1 * 0.0001 *
                         (float)*(int *)(&DAT_00d6ab10 +
                                        (uVar4 * 0x7d +
                                        (*(byte *)(unaff_EDI + 0x10) - 1 &
                                        ((int)(*(byte *)(unaff_EDI + 0x10) - 1) < 1) - 1)) * 4) +
                         0.9);
        uVar5 = (undefined4)local_1c;
        local_8 = 0xffffffff;
        FUN_006ed550();
        ExceptionList = local_10;
        return uVar5;
      }
      if (DAT_00d72ed0 != 0) {
        uVar5 = FUN_006ee420(".\\ShareValue.cpp",0x3e);
        FUN_006ee470(L"[ERROR] %s %d\n",uVar5);
        DAT_00d72ed0 = 0;
      }
    }
  }
  local_8 = 0xffffffff;
  FUN_006ed550();
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00703890 : PUSH EBP
00703891 : MOV EBP,ESP
00703893 : PUSH -0x1
00703895 : PUSH 0xb302f7
0070389a : MOV EAX,FS:[0x0]
007038a0 : PUSH EAX
007038a1 : SUB ESP,0x2c
007038a4 : PUSH EBX
007038a5 : PUSH ESI
007038a6 : MOV EAX,[0x00d66fa0]
007038ab : XOR EAX,EBP
007038ad : PUSH EAX
007038ae : LEA EAX,[EBP + -0xc]
007038b1 : MOV FS:[0x0],EAX
007038b7 : CALL 0x006ed4b0
007038bc : MOV EDX,dword ptr FS:[0x2c]
007038c3 : LEA ECX,[EBP + -0x38]
007038c6 : MOV dword ptr [EBP + -0x10],ECX
007038c9 : MOV ECX,0x12345678
007038ce : MOV dword ptr [EBP + -0x38],ECX
007038d1 : MOV dword ptr [EBP + -0x1c],ECX
007038d4 : MOV ECX,dword ptr [EDX]
007038d6 : CMP dword ptr [ECX + 0x1c],0x80
007038dd : JNC 0x007038e8
007038df : LEA EDX,[EBP + -0x10]
007038e2 : PUSH EDX
007038e3 : CALL 0x006ed5d0
007038e8 : XOR EBX,EBX
007038ea : MOV dword ptr [EBP + -0x4],EBX
007038ed : MOVZX EAX,word ptr [EBP + 0x8]
007038f1 : MOV ESI,dword ptr [0x00d7c54c]
007038f7 : INC EAX
007038f8 : OR EAX,0x9a000000
007038fd : LEA ECX,[EBP + 0x8]
00703900 : MOV dword ptr [EBP + 0x8],EAX
00703903 : PUSH ECX
00703904 : LEA ECX,[ESI + 0x40]
00703907 : LEA EAX,[EBP + -0x14]
0070390a : CALL 0x004437f0
0070390f : MOV ESI,dword ptr [ESI + 0x44]
00703912 : MOV EAX,dword ptr [EBP + -0x14]
00703915 : CMP EAX,ESI
00703917 : JZ 0x00703971
00703919 : MOV ESI,dword ptr [EAX + 0x10]
0070391c : CMP ESI,EBX
0070391e : JZ 0x00703971
00703920 : MOV EDX,dword ptr [EDI]
00703922 : MOV EAX,dword ptr [EDX + 0x68]
00703925 : MOV ECX,EDI
00703927 : CALL EAX
00703929 : TEST EAX,EAX
0070392b : JZ 0x00703993
0070392d : MOV AL,byte ptr [EDI + 0x288]
00703933 : CMP AL,0x9
00703935 : JNC 0x00703946
00703937 : MOVZX ECX,AL
0070393a : MOVZX EAX,byte ptr [ECX + 0xd6aaf8]
00703941 : JMP 0x00703a14
00703946 : CMP dword ptr [0x00d72ed0],EBX
0070394c : JZ 0x00703971
0070394e : PUSH 0x3e
00703950 : PUSH 0xbf9e1c
00703955 : CALL 0x006ee420
0070395a : ADD ESP,0x4
0070395d : PUSH EAX
0070395e : PUSH 0xbf9e30
00703963 : CALL 0x006ee470
00703968 : MOV dword ptr [0x00d72ed0],EBX
0070396e : ADD ESP,0xc
00703971 : MOV dword ptr [EBP + -0x4],0xffffffff
00703978 : LEA EAX,[EBP + -0x10]
0070397b : CALL 0x006ed550
00703980 : XOR EAX,EAX
00703982 : MOV ECX,dword ptr [EBP + -0xc]
00703985 : MOV dword ptr FS:[0x0],ECX
0070398c : POP ECX
0070398d : POP ESI
0070398e : POP EBX
0070398f : MOV ESP,EBP
00703991 : POP EBP
00703992 : RET
00703993 : MOV ECX,EDI
00703995 : CALL 0x006fec70
0070399a : MOVZX EAX,AL
0070399d : CMP EAX,0xb
007039a0 : JZ 0x00703971
007039a2 : LEA EDX,[EAX + -0x14]
007039a5 : CMP EDX,0x9
007039a8 : JBE 0x00703971
007039aa : CMP EAX,EBX
007039ac : JNZ 0x007039d8
007039ae : CMP dword ptr [0x00d72ed4],EBX
007039b4 : JZ 0x00703971
007039b6 : PUSH 0x4e
007039b8 : PUSH 0xbf9e50
007039bd : CALL 0x006ee420
007039c2 : ADD ESP,0x4
007039c5 : PUSH EAX
007039c6 : PUSH 0xbf9e64
007039cb : CALL 0x006ee470
007039d0 : MOV dword ptr [0x00d72ed4],EBX
007039d6 : JMP 0x0070396e
007039d8 : CMP EAX,0xa
007039db : JC 0x00703a0a
007039dd : CMP dword ptr [0x00d72ed8],EBX
007039e3 : JZ 0x00703971
007039e5 : PUSH 0x54
007039e7 : PUSH 0xbf9e84
007039ec : CALL 0x006ee420
007039f1 : ADD ESP,0x4
007039f4 : PUSH EAX
007039f5 : PUSH 0xbf9e98
007039fa : CALL 0x006ee470
007039ff : MOV dword ptr [0x00d72ed8],EBX
00703a05 : JMP 0x0070396e
00703a0a : MOVZX EAX,byte ptr [EAX + 0xd6ab04]
00703a11 : ADD EAX,0x6
00703a14 : MOVZX ECX,byte ptr [EDI + 0x40]
00703a18 : DEC ECX
00703a19 : XOR EDX,EDX
00703a1b : CMP ECX,EBX
00703a1d : SETLE DL
00703a20 : IMUL EAX,EAX,0x7d
00703a23 : DEC EDX
00703a24 : AND ECX,EDX
00703a26 : ADD EAX,ECX
00703a28 : FILD dword ptr [EAX*0x4 + 0xd6ab10]
00703a2f : MOVZX EAX,word ptr [ESI + 0x1e]
00703a33 : MOV dword ptr [EBP + 0x8],EAX
00703a36 : FILD dword ptr [EBP + 0x8]
00703a39 : FNSTCW word ptr [EBP + 0xa]
00703a3c : MOVZX EAX,word ptr [EBP + 0xa]
00703a40 : FMUL float ptr [0x00cdf398]
00703a46 : OR EAX,0xc00
00703a4b : MOV dword ptr [EBP + -0x14],EAX
00703a4e : FMULP
00703a50 : FADD float ptr [0x00cdf1c4]
00703a56 : FLDCW word ptr [EBP + -0x14]
00703a59 : FISTP qword ptr [EBP + -0x18]
00703a5c : MOV ESI,dword ptr [EBP + -0x18]
00703a5f : FLDCW word ptr [EBP + 0xa]
00703a62 : MOV dword ptr [EBP + -0x4],0xffffffff
00703a69 : LEA EAX,[EBP + -0x10]
00703a6c : CALL 0x006ed550
00703a71 : MOV EAX,ESI
00703a73 : MOV ECX,dword ptr [EBP + -0xc]
00703a76 : MOV dword ptr FS:[0x0],ECX
00703a7d : POP ECX
00703a7e : POP ESI
00703a7f : POP EBX
00703a80 : MOV ESP,EBP
00703a82 : POP EBP
00703a83 : RET
