PROGRAM  : Maestia.exe
FUNCTION : FUN_009f0a10
ENTRY    : 009f0a10
BODY     : [[009f0a10, 009f0ed6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009f0a10(undefined4 param_1)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  int in_ECX;
  uint uVar5;
  undefined1 auStack_b4 [4];
  int local_b0;
  undefined4 local_ac;
  undefined1 local_a8 [4];
  undefined2 local_a4;
  undefined4 local_94;
  uint local_90;
  undefined2 local_88;
  undefined4 local_78;
  uint local_74;
  undefined1 local_70 [4];
  uint local_6c;
  int local_68;
  undefined4 local_64;
  int local_5c;
  uint local_58;
  undefined1 local_54 [4];
  undefined4 local_50;
  int local_40;
  uint local_3c;
  undefined4 local_34;
  undefined4 local_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  puStack_10 = &LAB_00b424f8;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_b4;
  ExceptionList = &local_14;
  local_ac = param_1;
  if (in_ECX != 0) {
    if ((*(uint *)(in_ECX + 0x48) & 0x40) == 0) {
      local_58 = 7;
      local_5c = 0;
      local_6c = local_6c & 0xffff0000;
      local_c = 5;
      iVar2 = *(int *)(in_ECX + 0xf0);
      if (iVar2 != 0) {
        if (*(uint *)(iVar2 + 0x30) < 0x10) {
          iVar2 = iVar2 + 0x1c;
        }
        else {
          iVar2 = *(int *)(iVar2 + 0x1c);
        }
        FUN_00404350(iVar2,DAT_00d66fa0 ^ (uint)&stack0xffffff40);
        local_c._0_1_ = 6;
        uVar3 = FUN_0081cee0(DAT_0172491c);
        local_c._0_1_ = 7;
        FUN_00405eb0(uVar3,0,0xffffffff);
        local_c = CONCAT31(local_c._1_3_,6);
        FUN_00406560();
        if (local_5c == 0) {
          FUN_00405c00(local_54);
        }
        else {
          FUN_00405eb0(local_70,0,0xffffffff);
        }
        if (local_40 != 0) {
          puVar4 = local_50;
          if (local_3c < 8) {
            puVar4 = &local_50;
          }
          uVar3 = FUN_00404750(L"\n`L@N%s",puVar4);
          local_c._0_1_ = 8;
          FUN_00405c30(uVar3,0,0xffffffff);
          local_c = CONCAT31(local_c._1_3_,6);
          FUN_00406560();
        }
        local_c = CONCAT31(local_c._1_3_,5);
        FUN_00406560();
      }
      if ((*(uint *)(in_ECX + 0x48) & 0x200) != 0) {
        if (local_5c != 0) {
          FUN_00404980(local_ac);
        }
        FUN_00406460(L"IDS_TOOLTIP_DESC_QUEST_STARTITEM");
        local_c._0_1_ = 9;
        iVar2 = FUN_0081d120(local_a8);
        local_c._0_1_ = 10;
        if (*(uint *)(iVar2 + 0x18) < 8) {
          iVar2 = iVar2 + 4;
        }
        else {
          iVar2 = *(int *)(iVar2 + 4);
        }
        uVar3 = FUN_00404750(L"\n`L@N%s",iVar2);
        local_c._0_1_ = 0xb;
        FUN_00405c30(uVar3,0,0xffffffff);
        local_c._0_1_ = 10;
        FUN_00406560();
        local_c._0_1_ = 9;
        FUN_00406560();
        local_c = CONCAT31(local_c._1_3_,5);
        FUN_00406560();
      }
      local_c = 0xffffffff;
      if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_58 = 7;
      local_5c = 0;
      local_6c = local_6c & 0xffff0000;
    }
    else {
      local_6c = 0;
      local_68 = 0;
      local_64 = 0;
      local_c = 0;
      FUN_00406460(&DAT_00ca4a04);
      local_c = CONCAT31(local_c._1_3_,1);
      FUN_00a6a570(DAT_017248f8 + 4,*(undefined2 *)(in_ECX + 6),local_70);
      uVar1 = (int)(local_68 - local_6c) / 0x1c;
      if ((uVar1 != 0) && (uVar5 = 0, uVar1 != 0)) {
        local_b0 = local_6c;
        do {
          FUN_00405c30(local_b0,0,0xffffffff);
          if (uVar5 != uVar1 - 1) {
            FUN_00404870(&DAT_00ca4a08,2);
          }
          local_b0 = local_b0 + 0x1c;
          uVar5 = uVar5 + 1;
        } while (uVar5 < uVar1);
      }
      local_3c = 7;
      local_40 = 0;
      local_50._0_2_ = 0;
      FUN_00406360(L"IDS_TOOLTIP_DESC_QUEST_ITEM",0x1b);
      local_c._0_1_ = 2;
      iVar2 = FUN_0081d120(local_54);
      local_c._0_1_ = 3;
      if (*(uint *)(iVar2 + 0x18) < 8) {
        iVar2 = iVar2 + 4;
      }
      else {
        iVar2 = *(int *)(iVar2 + 4);
      }
      puVar4 = local_34;
      if (local_20 < 8) {
        puVar4 = &local_34;
      }
      uVar3 = FUN_00404750(L"\n`L@N[ %s ] %s",puVar4,iVar2);
      local_c._0_1_ = 4;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_c = CONCAT31(local_c._1_3_,3);
      if (7 < local_74) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_74 = 7;
      local_78 = 0;
      local_88 = 0;
      local_c = CONCAT31(local_c._1_3_,2);
      if (7 < local_90) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_90 = 7;
      local_94 = 0;
      local_a4 = 0;
      local_c = CONCAT31(local_c._1_3_,1);
      if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_3c = 7;
      local_40 = 0;
      local_50 = (undefined4 *)((uint)local_50._2_2_ << 0x10);
      local_c = (uint)local_c._1_3_ << 8;
      if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_20 = 7;
      local_24 = 0;
      local_34 = (undefined4 *)((uint)local_34._2_2_ << 0x10);
      local_c = 0xffffffff;
      if (local_6c != 0) {
        FUN_00405450(local_b0);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_6c = 0;
      local_68 = 0;
      local_64 = 0;
    }
  }
  local_c = 0xffffffff;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_b4);
  return;
}



============================================================
DISASSEMBLY
============================================================
009f0a10 : PUSH EBP
009f0a11 : MOV EBP,ESP
009f0a13 : AND ESP,0xfffffff8
009f0a16 : PUSH -0x1
009f0a18 : PUSH 0xb424f8
009f0a1d : MOV EAX,FS:[0x0]
009f0a23 : PUSH EAX
009f0a24 : SUB ESP,0xa0
009f0a2a : MOV EAX,[0x00d66fa0]
009f0a2f : XOR EAX,ESP
009f0a31 : MOV dword ptr [ESP + 0x98],EAX
009f0a38 : PUSH EBX
009f0a39 : PUSH ESI
009f0a3a : PUSH EDI
009f0a3b : MOV EAX,[0x00d66fa0]
009f0a40 : XOR EAX,ESP
009f0a42 : PUSH EAX
009f0a43 : LEA EAX,[ESP + 0xb0]
009f0a4a : MOV FS:[0x0],EAX
009f0a50 : MOV EAX,dword ptr [EBP + 0x8]
009f0a53 : MOV EDI,ECX
009f0a55 : XOR ESI,ESI
009f0a57 : MOV dword ptr [ESP + 0x18],EAX
009f0a5b : CMP EDI,ESI
009f0a5d : JZ 0x009f0eb3
009f0a63 : MOV EAX,dword ptr [EDI + 0x48]
009f0a66 : AND EAX,0x40
009f0a69 : XOR ECX,ECX
009f0a6b : OR EAX,ECX
009f0a6d : JZ 0x009f0cae
009f0a73 : MOV dword ptr [ESP + 0x58],ESI
009f0a77 : MOV dword ptr [ESP + 0x5c],ESI
009f0a7b : MOV dword ptr [ESP + 0x60],ESI
009f0a7f : MOV dword ptr [ESP + 0xb8],ESI
009f0a86 : PUSH 0xca4a04
009f0a8b : LEA ECX,[ESP + 0x90]
009f0a92 : CALL 0x00406460
009f0a97 : MOV byte ptr [ESP + 0xb8],0x1
009f0a9f : MOVZX EDX,word ptr [EDI + 0x6]
009f0aa3 : MOV EAX,[0x017248f8]
009f0aa8 : LEA ECX,[ESP + 0x54]
009f0aac : PUSH ECX
009f0aad : PUSH EDX
009f0aae : ADD EAX,0x4
009f0ab1 : PUSH EAX
009f0ab2 : CALL 0x00a6a570
009f0ab7 : MOV ECX,dword ptr [ESP + 0x5c]
009f0abb : SUB ECX,dword ptr [ESP + 0x58]
009f0abf : MOV EAX,0x92492493
009f0ac4 : IMUL ECX
009f0ac6 : ADD EDX,ECX
009f0ac8 : SAR EDX,0x4
009f0acb : MOV EDI,EDX
009f0acd : SHR EDI,0x1f
009f0ad0 : ADD EDI,EDX
009f0ad2 : JZ 0x009f0b1c
009f0ad4 : XOR EBX,EBX
009f0ad6 : CMP EDI,ESI
009f0ad8 : JBE 0x009f0b1c
009f0ada : MOV ECX,dword ptr [ESP + 0x58]
009f0ade : MOV dword ptr [ESP + 0x14],ECX
009f0ae2 : MOV EDX,dword ptr [ESP + 0x14]
009f0ae6 : PUSH -0x1
009f0ae8 : PUSH ESI
009f0ae9 : PUSH EDX
009f0aea : LEA ECX,[ESP + 0x98]
009f0af1 : CALL 0x00405c30
009f0af6 : LEA EAX,[EDI + -0x1]
009f0af9 : CMP EBX,EAX
009f0afb : JZ 0x009f0b12
009f0afd : PUSH 0x2
009f0aff : PUSH 0xca4a08
009f0b04 : LEA ESI,[ESP + 0x94]
009f0b0b : CALL 0x00404870
009f0b10 : XOR ESI,ESI
009f0b12 : ADD dword ptr [ESP + 0x14],0x1c
009f0b17 : INC EBX
009f0b18 : CMP EBX,EDI
009f0b1a : JC 0x009f0ae2
009f0b1c : PUSH 0x1b
009f0b1e : XOR EAX,EAX
009f0b20 : PUSH 0xca4a10
009f0b25 : LEA ECX,[ESP + 0x78]
009f0b29 : MOV dword ptr [ESP + 0x90],0x7
009f0b34 : MOV dword ptr [ESP + 0x8c],ESI
009f0b3b : MOV word ptr [ESP + 0x7c],AX
009f0b40 : CALL 0x00406360
009f0b45 : MOV byte ptr [ESP + 0xb8],0x2
009f0b4d : LEA ECX,[ESP + 0x70]
009f0b51 : PUSH ECX
009f0b52 : MOV ECX,dword ptr [0x0172491c]
009f0b58 : LEA EDI,[ESP + 0x20]
009f0b5c : CALL 0x0081d120
009f0b61 : MOV BL,0x3
009f0b63 : MOV byte ptr [ESP + 0xb8],BL
009f0b6a : MOV EDI,0x8
009f0b6f : CMP dword ptr [EAX + 0x18],EDI
009f0b72 : JC 0x009f0b79
009f0b74 : MOV EAX,dword ptr [EAX + 0x4]
009f0b77 : JMP 0x009f0b7c
009f0b79 : ADD EAX,0x4
009f0b7c : MOV ECX,dword ptr [ESP + 0x90]
009f0b83 : CMP dword ptr [ESP + 0xa4],EDI
009f0b8a : JNC 0x009f0b93
009f0b8c : LEA ECX,[ESP + 0x90]
009f0b93 : PUSH EAX
009f0b94 : PUSH ECX
009f0b95 : PUSH 0xca4a48
009f0b9a : LEA ESI,[ESP + 0x44]
009f0b9e : CALL 0x00404750
009f0ba3 : ADD ESP,0xc
009f0ba6 : MOV byte ptr [ESP + 0xb8],0x4
009f0bae : MOV ECX,dword ptr [ESP + 0x18]
009f0bb2 : PUSH -0x1
009f0bb4 : XOR ESI,ESI
009f0bb6 : PUSH ESI
009f0bb7 : PUSH EAX
009f0bb8 : CALL 0x00405c30
009f0bbd : MOV byte ptr [ESP + 0xb8],BL
009f0bc4 : CMP dword ptr [ESP + 0x50],EDI
009f0bc8 : JC 0x009f0bd3
009f0bca : MOV ECX,dword ptr [ESP + 0x3c]
009f0bce : CALL 0x006f04e0
009f0bd3 : MOV EBX,0x7
009f0bd8 : XOR EDX,EDX
009f0bda : MOV dword ptr [ESP + 0x50],EBX
009f0bde : MOV dword ptr [ESP + 0x4c],ESI
009f0be2 : MOV word ptr [ESP + 0x3c],DX
009f0be7 : MOV byte ptr [ESP + 0xb8],0x2
009f0bef : CMP dword ptr [ESP + 0x34],EDI
009f0bf3 : JC 0x009f0bfe
009f0bf5 : MOV ECX,dword ptr [ESP + 0x20]
009f0bf9 : CALL 0x006f04e0
009f0bfe : XOR EAX,EAX
009f0c00 : MOV dword ptr [ESP + 0x34],EBX
009f0c04 : MOV dword ptr [ESP + 0x30],ESI
009f0c08 : MOV word ptr [ESP + 0x20],AX
009f0c0d : MOV byte ptr [ESP + 0xb8],0x1
009f0c15 : CMP dword ptr [ESP + 0x88],EDI
009f0c1c : JC 0x009f0c27
009f0c1e : MOV ECX,dword ptr [ESP + 0x74]
009f0c22 : CALL 0x006f04e0
009f0c27 : XOR ECX,ECX
009f0c29 : MOV dword ptr [ESP + 0x88],EBX
009f0c30 : MOV dword ptr [ESP + 0x84],ESI
009f0c37 : MOV word ptr [ESP + 0x74],CX
009f0c3c : MOV byte ptr [ESP + 0xb8],CL
009f0c43 : CMP dword ptr [ESP + 0xa4],EDI
009f0c4a : JC 0x009f0c58
009f0c4c : MOV ECX,dword ptr [ESP + 0x90]
009f0c53 : CALL 0x006f04e0
009f0c58 : XOR EDX,EDX
009f0c5a : MOV dword ptr [ESP + 0xa4],EBX
009f0c61 : MOV dword ptr [ESP + 0xa0],ESI
009f0c68 : MOV word ptr [ESP + 0x90],DX
009f0c70 : MOV dword ptr [ESP + 0xb8],0xffffffff
009f0c7b : MOV EBX,dword ptr [ESP + 0x58]
009f0c7f : CMP EBX,ESI
009f0c81 : JZ 0x009f0c9d
009f0c83 : MOV EAX,dword ptr [ESP + 0x14]
009f0c87 : MOV EDI,dword ptr [ESP + 0x5c]
009f0c8b : PUSH EAX
009f0c8c : MOV EAX,EBX
009f0c8e : CALL 0x00405450
009f0c93 : ADD ESP,0x4
009f0c96 : MOV ECX,EBX
009f0c98 : CALL 0x006f04e0
009f0c9d : MOV dword ptr [ESP + 0x58],ESI
009f0ca1 : MOV dword ptr [ESP + 0x5c],ESI
009f0ca5 : MOV dword ptr [ESP + 0x60],ESI
009f0ca9 : JMP 0x009f0eb3
009f0cae : XOR ECX,ECX
009f0cb0 : MOV dword ptr [ESP + 0x6c],0x7
009f0cb8 : MOV dword ptr [ESP + 0x68],ESI
009f0cbc : MOV word ptr [ESP + 0x58],CX
009f0cc1 : MOV dword ptr [ESP + 0xb8],0x5
009f0ccc : MOV EAX,dword ptr [EDI + 0xf0]
009f0cd2 : CMP EAX,ESI
009f0cd4 : JZ 0x009f0dc3
009f0cda : CMP dword ptr [EAX + 0x30],0x10
009f0cde : JC 0x009f0ce5
009f0ce0 : MOV EAX,dword ptr [EAX + 0x1c]
009f0ce3 : JMP 0x009f0ce8
009f0ce5 : ADD EAX,0x1c
009f0ce8 : PUSH EAX
009f0ce9 : LEA ESI,[ESP + 0x74]
009f0ced : CALL 0x00404350
009f0cf2 : ADD ESP,0x4
009f0cf5 : MOV BL,0x6
009f0cf7 : MOV byte ptr [ESP + 0xb8],BL
009f0cfe : MOV EDX,dword ptr [0x0172491c]
009f0d04 : MOV ECX,ESI
009f0d06 : PUSH EDX
009f0d07 : LEA ESI,[ESP + 0x20]
009f0d0b : CALL 0x0081cee0
009f0d10 : MOV byte ptr [ESP + 0xb8],0x7
009f0d18 : PUSH -0x1
009f0d1a : PUSH 0x0
009f0d1c : PUSH EAX
009f0d1d : LEA ECX,[ESP + 0x60]
009f0d21 : CALL 0x00405eb0
009f0d26 : MOV byte ptr [ESP + 0xb8],BL
009f0d2d : MOV ECX,ESI
009f0d2f : CALL 0x00406560
009f0d34 : CMP dword ptr [ESP + 0x68],0x0
009f0d39 : JNZ 0x009f0d4c
009f0d3b : LEA EAX,[ESP + 0x70]
009f0d3f : PUSH EAX
009f0d40 : MOV EDX,0xca4a68
009f0d45 : CALL 0x00405c00
009f0d4a : JMP 0x009f0d5e
009f0d4c : PUSH -0x1
009f0d4e : PUSH 0x0
009f0d50 : LEA ECX,[ESP + 0x5c]
009f0d54 : PUSH ECX
009f0d55 : LEA ECX,[ESP + 0x7c]
009f0d59 : CALL 0x00405eb0
009f0d5e : CMP dword ptr [ESP + 0x84],0x0
009f0d66 : JZ 0x009f0db0
009f0d68 : CMP dword ptr [ESP + 0x88],0x8
009f0d70 : MOV EAX,dword ptr [ESP + 0x74]
009f0d74 : JNC 0x009f0d7a
009f0d76 : LEA EAX,[ESP + 0x74]
009f0d7a : PUSH EAX
009f0d7b : PUSH 0xca4a6c
009f0d80 : LEA ESI,[ESP + 0x24]
009f0d84 : CALL 0x00404750
009f0d89 : ADD ESP,0x8
009f0d8c : MOV byte ptr [ESP + 0xb8],0x8
009f0d94 : MOV ECX,dword ptr [ESP + 0x18]
009f0d98 : PUSH -0x1
009f0d9a : PUSH 0x0
009f0d9c : PUSH EAX
009f0d9d : CALL 0x00405c30
009f0da2 : MOV byte ptr [ESP + 0xb8],BL
009f0da9 : MOV ECX,ESI
009f0dab : CALL 0x00406560
009f0db0 : MOV byte ptr [ESP + 0xb8],0x5
009f0db8 : LEA ECX,[ESP + 0x70]
009f0dbc : CALL 0x00406560
009f0dc1 : XOR ESI,ESI
009f0dc3 : MOV EAX,dword ptr [EDI + 0x48]
009f0dc6 : AND EAX,0x200
009f0dcb : XOR ECX,ECX
009f0dcd : OR EAX,ECX
009f0dcf : JZ 0x009f0e85
009f0dd5 : CMP dword ptr [ESP + 0x68],ESI
009f0dd9 : JZ 0x009f0dea
009f0ddb : MOV EDX,dword ptr [ESP + 0x18]
009f0ddf : PUSH EDX
009f0de0 : MOV EDX,0xca4a7c
009f0de5 : CALL 0x00404980
009f0dea : PUSH 0xca4a80
009f0def : LEA ECX,[ESP + 0x20]
009f0df3 : CALL 0x00406460
009f0df8 : MOV byte ptr [ESP + 0xb8],0x9
009f0e00 : MOV ECX,dword ptr [0x0172491c]
009f0e06 : LEA EAX,[ESP + 0x1c]
009f0e0a : PUSH EAX
009f0e0b : LEA EDI,[ESP + 0x74]
009f0e0f : CALL 0x0081d120
009f0e14 : MOV BL,0xa
009f0e16 : MOV byte ptr [ESP + 0xb8],BL
009f0e1d : CMP dword ptr [EAX + 0x18],0x8
009f0e21 : JC 0x009f0e28
009f0e23 : MOV EAX,dword ptr [EAX + 0x4]
009f0e26 : JMP 0x009f0e2b
009f0e28 : ADD EAX,0x4
009f0e2b : PUSH EAX
009f0e2c : PUSH 0xca4ac4
009f0e31 : LEA ESI,[ESP + 0x40]
009f0e35 : CALL 0x00404750
009f0e3a : ADD ESP,0x8
009f0e3d : MOV byte ptr [ESP + 0xb8],0xb
009f0e45 : MOV ECX,dword ptr [ESP + 0x18]
009f0e49 : PUSH -0x1
009f0e4b : PUSH 0x0
009f0e4d : PUSH EAX
009f0e4e : CALL 0x00405c30
009f0e53 : MOV byte ptr [ESP + 0xb8],BL
009f0e5a : MOV ECX,ESI
009f0e5c : CALL 0x00406560
009f0e61 : MOV byte ptr [ESP + 0xb8],0x9
009f0e69 : LEA ECX,[ESP + 0x70]
009f0e6d : CALL 0x00406560
009f0e72 : MOV byte ptr [ESP + 0xb8],0x5
009f0e7a : LEA ECX,[ESP + 0x1c]
009f0e7e : CALL 0x00406560
009f0e83 : XOR ESI,ESI
009f0e85 : MOV dword ptr [ESP + 0xb8],0xffffffff
009f0e90 : CMP dword ptr [ESP + 0x6c],0x8
009f0e95 : JC 0x009f0ea0
009f0e97 : MOV ECX,dword ptr [ESP + 0x58]
009f0e9b : CALL 0x006f04e0
009f0ea0 : XOR ECX,ECX
009f0ea2 : MOV dword ptr [ESP + 0x6c],0x7
009f0eaa : MOV dword ptr [ESP + 0x68],ESI
009f0eae : MOV word ptr [ESP + 0x58],CX
009f0eb3 : MOV ECX,dword ptr [ESP + 0xb0]
009f0eba : MOV dword ptr FS:[0x0],ECX
009f0ec1 : POP ECX
009f0ec2 : POP EDI
009f0ec3 : POP ESI
009f0ec4 : POP EBX
009f0ec5 : MOV ECX,dword ptr [ESP + 0x98]
009f0ecc : XOR ECX,ESP
009f0ece : CALL 0x00633e6b
009f0ed3 : MOV ESP,EBP
009f0ed5 : POP EBP
009f0ed6 : RET
