PROGRAM  : Maestia.exe
FUNCTION : FUN_007870d0
ENTRY    : 007870d0
BODY     : [[007870d0, 00787148] [00787150, 00787153]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007870d0(void)

{
  int *piVar1;
  int *piVar2;
  undefined4 *puVar3;
  int unaff_EDI;
  
  FUN_008018d0(L"[AvaShadowTxtrMgr::DeleteAll]");
  piVar1 = *(int **)(unaff_EDI + 0x18);
  piVar2 = (int *)*piVar1;
  while (piVar2 != piVar1) {
    puVar3 = (undefined4 *)piVar2[4];
    if (puVar3 != (undefined4 *)0x0) {
      (**(code **)*puVar3)(1);
    }
    FUN_00416210();
    piVar1 = *(int **)(unaff_EDI + 0x18);
  }
  FUN_00401c00(*(undefined4 *)(*(int *)(unaff_EDI + 0x18) + 4));
  *(int *)(*(int *)(unaff_EDI + 0x18) + 4) = *(int *)(unaff_EDI + 0x18);
  *(undefined4 *)(unaff_EDI + 0x1c) = 0;
  *(undefined4 *)*(undefined4 *)(unaff_EDI + 0x18) = *(undefined4 *)(unaff_EDI + 0x18);
  *(int *)(*(int *)(unaff_EDI + 0x18) + 8) = *(int *)(unaff_EDI + 0x18);
  if (*(int *)(unaff_EDI + 0xc) == 0) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
007870d0 : PUSH EBP
007870d1 : MOV EBP,ESP
007870d3 : PUSH ECX
007870d4 : PUSH ESI
007870d5 : MOV ESI,dword ptr [0x00da98e8]
007870db : PUSH 0xc113f4
007870e0 : CALL 0x008018d0
007870e5 : MOV ECX,dword ptr [EDI + 0x18]
007870e8 : MOV EAX,dword ptr [ECX]
007870ea : ADD ESP,0x4
007870ed : MOV dword ptr [EBP + -0x4],EAX
007870f0 : CMP EAX,ECX
007870f2 : JZ 0x00787113
007870f4 : MOV ECX,dword ptr [EAX + 0x10]
007870f7 : TEST ECX,ECX
007870f9 : JZ 0x00787103
007870fb : MOV EAX,dword ptr [ECX]
007870fd : MOV EDX,dword ptr [EAX]
007870ff : PUSH 0x1
00787101 : CALL EDX
00787103 : LEA EDX,[EBP + -0x4]
00787106 : CALL 0x00416210
0078710b : MOV EAX,dword ptr [EBP + -0x4]
0078710e : CMP EAX,dword ptr [EDI + 0x18]
00787111 : JNZ 0x007870f4
00787113 : MOV EAX,dword ptr [EDI + 0x18]
00787116 : MOV ECX,dword ptr [EAX + 0x4]
00787119 : LEA ESI,[EDI + 0x14]
0078711c : PUSH ECX
0078711d : MOV ECX,ESI
0078711f : CALL 0x00401c00
00787124 : MOV EAX,dword ptr [ESI + 0x4]
00787127 : MOV dword ptr [EAX + 0x4],EAX
0078712a : MOV EAX,dword ptr [ESI + 0x4]
0078712d : MOV dword ptr [ESI + 0x8],0x0
00787134 : MOV dword ptr [EAX],EAX
00787136 : MOV ESI,dword ptr [ESI + 0x4]
00787139 : MOV dword ptr [ESI + 0x8],ESI
0078713c : MOV ECX,dword ptr [EDI + 0xc]
0078713f : POP ESI
00787140 : TEST ECX,ECX
00787142 : JZ 0x00787150
00787144 : CALL 0x006f04e0
00787150 : MOV ESP,EBP
00787152 : POP EBP
00787153 : RET
