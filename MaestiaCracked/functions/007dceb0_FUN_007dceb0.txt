PROGRAM  : Maestia.exe
FUNCTION : FUN_007dceb0
ENTRY    : 007dceb0
BODY     : [[007dceb0, 007dd107]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007dceb0(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  uint *puVar3;
  ulonglong uVar4;
  int in_EAX;
  int *in_ECX;
  uint uVar5;
  int *piVar6;
  float10 fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  int local_38;
  uint local_28;
  float local_24;
  float local_20;
  float local_1c;
  undefined8 local_18;
  undefined8 local_10;
  
  if (*in_ECX != *(int *)(param_1 + 0x158)) {
    *in_ECX = *(int *)(param_1 + 0x158);
    FUN_0042d2e0(in_EAX);
    if (*(char *)(param_1 + 0x15e) != '\0') {
      piVar1 = *(int **)(param_1 + 0x13c);
      local_20 = (*(float *)(param_2 + 0x14) + *(float *)(param_2 + 8)) * DAT_00d72c24;
      local_1c = (*(float *)(param_2 + 0x18) + *(float *)(param_2 + 0xc)) * DAT_00d72c24;
      local_24 = (*(float *)(param_2 + 0x10) + *(float *)(param_2 + 4)) * DAT_00d72c24;
      fVar9 = (*(float *)(param_2 + 0x14) - *(float *)(param_2 + 8)) * DAT_00d72c24;
      fVar8 = (*(float *)(param_2 + 0x10) - *(float *)(param_2 + 4)) * DAT_00d72c24;
      fVar10 = (*(float *)(param_2 + 0x18) - *(float *)(param_2 + 0xc)) * DAT_00d72c24;
      piVar6 = (int *)*piVar1;
      fVar7 = (float10)FUN_0040f460(fVar10 * fVar10 + fVar9 * fVar9 + fVar8 * fVar8);
      local_38 = 0;
      if (piVar6 != piVar1) {
        do {
          local_28 = piVar6[2];
          fVar11 = *(float *)(local_28 + 0x1c) - local_1c;
          fVar9 = *(float *)(local_28 + 0x18) - local_20;
          fVar8 = *(float *)(local_28 + 0x14) - local_24;
          fVar10 = *(float *)(local_28 + 0xc) + (float)fVar7;
          fVar8 = fVar8 * fVar8 + fVar11 * fVar11 + fVar9 * fVar9;
          if (fVar8 < fVar10 * fVar10) {
            *(float *)(local_28 + 0x38) = fVar8;
            local_18 = *(undefined8 *)(local_28 + 0x44);
            local_10 = *(undefined8 *)(local_28 + 0x4c);
            if (1.0 < (float)local_18) {
              local_18._4_4_ = (float)((ulonglong)local_18 >> 0x20);
              local_18 = CONCAT44(local_18._4_4_,0x3f800000);
            }
            if (1.0 < local_18._4_4_) {
              local_18 = CONCAT44(0x3f800000,(float)local_18);
            }
            if (1.0 < (float)local_10) {
              uVar4 = (ulonglong)local_10 >> 0x20;
              local_10 = CONCAT44((int)uVar4,0x3f800000);
            }
            *(undefined8 *)(local_28 + 0x44) = local_18;
            *(undefined8 *)(local_28 + 0x94) = local_18;
            *(undefined8 *)(local_28 + 0x4c) = local_10;
            *(undefined8 *)(local_28 + 0x9c) = local_10;
            iVar2 = *(int *)(in_EAX + 4);
            if (iVar2 == 0) {
              uVar5 = 0;
            }
            else {
              uVar5 = *(int *)(in_EAX + 0xc) - iVar2 >> 2;
            }
            puVar3 = *(uint **)(in_EAX + 8);
            if ((uint)((int)puVar3 - iVar2 >> 2) < uVar5) {
              *puVar3 = local_28;
              *(uint **)(in_EAX + 8) = puVar3 + 1;
            }
            else {
              FUN_0042fe80(in_EAX,puVar3,&local_28);
            }
            local_38 = local_38 + 1;
          }
          piVar6 = (int *)*piVar6;
        } while (piVar6 != piVar1);
        if (local_38 != 0) {
          local_28 = local_28 & 0xffffff00;
          FUN_0045f7b0(*(int *)(in_EAX + 4),*(int *)(in_EAX + 8),
                       *(int *)(in_EAX + 8) - *(int *)(in_EAX + 4) >> 2,local_28);
        }
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007dceb0 : PUSH EBP
007dceb1 : MOV EBP,ESP
007dceb3 : AND ESP,0xfffffff8
007dceb6 : SUB ESP,0x34
007dceb9 : PUSH EBX
007dceba : MOV EBX,dword ptr [EBP + 0x8]
007dcebd : PUSH ESI
007dcebe : MOV ESI,dword ptr [EBP + 0xc]
007dcec1 : PUSH EDI
007dcec2 : MOV EDI,EAX
007dcec4 : MOV EAX,dword ptr [EBX + 0x158]
007dceca : CMP dword ptr [ECX],EAX
007dcecc : JZ 0x007dd0ff
007dced2 : PUSH EDI
007dced3 : MOV dword ptr [ECX],EAX
007dced5 : CALL 0x0042d2e0
007dceda : CMP byte ptr [EBX + 0x15e],0x0
007dcee1 : JZ 0x007dd0ff
007dcee7 : MOVSS XMM3,dword ptr [0x00d72c24]
007dceef : MOVSS XMM0,dword ptr [ESI + 0x10]
007dcef4 : ADDSS XMM0,dword ptr [ESI + 0x4]
007dcef9 : MOVSS XMM1,dword ptr [ESI + 0x14]
007dcefe : ADDSS XMM1,dword ptr [ESI + 0x8]
007dcf03 : MOVSS XMM2,dword ptr [ESI + 0x18]
007dcf08 : ADDSS XMM2,dword ptr [ESI + 0xc]
007dcf0d : MOV EBX,dword ptr [EBX + 0x13c]
007dcf13 : MULSS XMM1,XMM3
007dcf17 : MULSS XMM2,XMM3
007dcf1b : MULSS XMM0,XMM3
007dcf1f : MOVSS dword ptr [ESP + 0x28],XMM1
007dcf25 : MOVSS XMM1,dword ptr [ESI + 0x14]
007dcf2a : SUBSS XMM1,dword ptr [ESI + 0x8]
007dcf2f : MOVSS dword ptr [ESP + 0x2c],XMM2
007dcf35 : MOVSS XMM2,dword ptr [ESI + 0x18]
007dcf3a : SUBSS XMM2,dword ptr [ESI + 0xc]
007dcf3f : MULSS XMM1,XMM3
007dcf43 : MOVSS dword ptr [ESP + 0x24],XMM0
007dcf49 : MOVSS XMM0,dword ptr [ESI + 0x10]
007dcf4e : SUBSS XMM0,dword ptr [ESI + 0x4]
007dcf53 : MULSS XMM0,XMM3
007dcf57 : MULSS XMM2,XMM3
007dcf5b : MOVAPS XMM3,XMM2
007dcf5e : MULSS XMM3,XMM2
007dcf62 : MOVAPS XMM2,XMM1
007dcf65 : MULSS XMM2,XMM1
007dcf69 : MOVAPS XMM1,XMM0
007dcf6c : MOV dword ptr [ESP + 0x18],EBX
007dcf70 : MOV EBX,dword ptr [EBX]
007dcf72 : ADDSS XMM3,XMM2
007dcf76 : MULSS XMM1,XMM0
007dcf7a : PUSH ECX
007dcf7b : ADDSS XMM3,XMM1
007dcf7f : MOV dword ptr [ESP + 0x18],EBX
007dcf83 : MOVSS dword ptr [ESP],XMM3
007dcf88 : CALL 0x0040f460
007dcf8d : FSTP float ptr [ESP + 0x20]
007dcf91 : ADD ESP,0x4
007dcf94 : MOV dword ptr [ESP + 0x10],0x0
007dcf9c : CMP EBX,dword ptr [ESP + 0x18]
007dcfa0 : JZ 0x007dd0ff
007dcfa6 : MOVSS XMM3,dword ptr [0x00c10fc4]
007dcfae : MOV EAX,dword ptr [EBX + 0x8]
007dcfb1 : MOVSS XMM2,dword ptr [EAX + 0x1c]
007dcfb6 : SUBSS XMM2,dword ptr [ESP + 0x2c]
007dcfbc : MOVSS XMM1,dword ptr [EAX + 0x18]
007dcfc1 : SUBSS XMM1,dword ptr [ESP + 0x28]
007dcfc7 : MOVSS XMM0,dword ptr [EAX + 0x14]
007dcfcc : SUBSS XMM0,dword ptr [ESP + 0x24]
007dcfd2 : MOVAPS XMM4,XMM2
007dcfd5 : MULSS XMM4,XMM2
007dcfd9 : MOVAPS XMM2,XMM1
007dcfdc : MULSS XMM2,XMM1
007dcfe0 : MOVSS XMM1,dword ptr [EAX + 0xc]
007dcfe5 : ADDSS XMM1,dword ptr [ESP + 0x1c]
007dcfeb : MULSS XMM0,XMM0
007dcfef : ADDSS XMM0,XMM4
007dcff3 : ADDSS XMM0,XMM2
007dcff7 : MOVAPS XMM2,XMM1
007dcffa : MULSS XMM2,XMM1
007dcffe : COMISS XMM2,XMM0
007dd001 : MOV dword ptr [ESP + 0x20],EAX
007dd005 : JBE 0x007dd0c6
007dd00b : MOVSS dword ptr [EAX + 0x38],XMM0
007dd010 : MOVQ XMM0,qword ptr [EAX + 0x44]
007dd015 : MOVQ qword ptr [ESP + 0x30],XMM0
007dd01b : MOVSS XMM1,dword ptr [ESP + 0x30]
007dd021 : COMISS XMM1,XMM3
007dd024 : MOVQ XMM0,qword ptr [EAX + 0x4c]
007dd029 : MOVQ qword ptr [ESP + 0x38],XMM0
007dd02f : JBE 0x007dd037
007dd031 : MOVSS dword ptr [ESP + 0x30],XMM3
007dd037 : MOVSS XMM1,dword ptr [ESP + 0x34]
007dd03d : COMISS XMM1,XMM3
007dd040 : JBE 0x007dd048
007dd042 : MOVSS dword ptr [ESP + 0x34],XMM3
007dd048 : MOVSS XMM1,dword ptr [ESP + 0x38]
007dd04e : COMISS XMM1,XMM3
007dd051 : JBE 0x007dd05f
007dd053 : MOVSS dword ptr [ESP + 0x38],XMM3
007dd059 : MOVQ XMM0,qword ptr [ESP + 0x38]
007dd05f : MOVQ XMM1,qword ptr [ESP + 0x30]
007dd065 : MOVQ qword ptr [EAX + 0x44],XMM1
007dd06a : MOVQ qword ptr [EAX + 0x94],XMM1
007dd072 : MOVQ qword ptr [EAX + 0x4c],XMM0
007dd077 : MOVQ qword ptr [EAX + 0x9c],XMM0
007dd07f : MOV ESI,dword ptr [EDI + 0x4]
007dd082 : TEST ESI,ESI
007dd084 : JNZ 0x007dd08a
007dd086 : XOR ECX,ECX
007dd088 : JMP 0x007dd092
007dd08a : MOV ECX,dword ptr [EDI + 0xc]
007dd08d : SUB ECX,ESI
007dd08f : SAR ECX,0x2
007dd092 : MOV EDX,dword ptr [EDI + 0x8]
007dd095 : MOV EBX,EDX
007dd097 : SUB EBX,ESI
007dd099 : SAR EBX,0x2
007dd09c : CMP EBX,ECX
007dd09e : JNC 0x007dd0aa
007dd0a0 : MOV dword ptr [EDX],EAX
007dd0a2 : ADD EDX,0x4
007dd0a5 : MOV dword ptr [EDI + 0x8],EDX
007dd0a8 : JMP 0x007dd0be
007dd0aa : LEA EAX,[ESP + 0x20]
007dd0ae : PUSH EAX
007dd0af : PUSH EDX
007dd0b0 : PUSH EDI
007dd0b1 : CALL 0x0042fe80
007dd0b6 : MOVSS XMM3,dword ptr [0x00c10fc4]
007dd0be : INC dword ptr [ESP + 0x10]
007dd0c2 : MOV EBX,dword ptr [ESP + 0x14]
007dd0c6 : MOV EBX,dword ptr [EBX]
007dd0c8 : MOV dword ptr [ESP + 0x14],EBX
007dd0cc : CMP EBX,dword ptr [ESP + 0x18]
007dd0d0 : JNZ 0x007dcfae
007dd0d6 : CMP dword ptr [ESP + 0x10],0x0
007dd0db : JZ 0x007dd0ff
007dd0dd : MOV EAX,dword ptr [EDI + 0x8]
007dd0e0 : MOV EDI,dword ptr [EDI + 0x4]
007dd0e3 : MOV EDX,EAX
007dd0e5 : MOV byte ptr [ESP + 0x20],0x0
007dd0ea : MOV ECX,dword ptr [ESP + 0x20]
007dd0ee : PUSH ECX
007dd0ef : SUB EDX,EDI
007dd0f1 : SAR EDX,0x2
007dd0f4 : PUSH EDX
007dd0f5 : PUSH EAX
007dd0f6 : PUSH EDI
007dd0f7 : CALL 0x0045f7b0
007dd0fc : ADD ESP,0x10
007dd0ff : POP EDI
007dd100 : POP ESI
007dd101 : POP EBX
007dd102 : MOV ESP,EBP
007dd104 : POP EBP
007dd105 : RET 0x8
