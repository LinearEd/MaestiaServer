PROGRAM  : Maestia.exe
FUNCTION : FUN_008ad920
ENTRY    : 008ad920
BODY     : [[008ad920, 008adacc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008ad920(void)

{
  uint uVar1;
  int iVar2;
  uint local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b44d4f;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar2 = *(int *)(*(int *)(*DAT_00da9894 + 0x188) + 0x10);
  local_14 = uVar1;
  if (iVar2 != 0) {
    if (*(short *)(iVar2 + 0xb8) == 0) {
      FUN_00406460(L"IDS_GUI_GUILD_ESTABLISHMENT_ERROR");
      local_8 = 0;
      iVar2 = FUN_0081d120(local_4c);
      local_8._0_1_ = 1;
      if (*(uint *)(iVar2 + 0x18) < 8) {
        iVar2 = iVar2 + 4;
      }
      else {
        iVar2 = *(int *)(iVar2 + 4);
      }
      FUN_00406460(iVar2);
      local_8._0_1_ = 2;
      (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_68,3,uVar1);
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_50 = 7;
      local_54 = 0;
      local_64 = 0;
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_6c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_8 = 0xffffffff;
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_34 = 7;
      local_38 = 0;
      local_48 = 0;
    }
    else {
      FUN_00406460(L"IDS_GUILD_LEAVE_MSG");
      local_8 = 3;
      FUN_0081d120(local_4c);
      local_8 = CONCAT31(local_8._1_3_,5);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_48 = 0;
      local_34 = 7;
      local_38 = 0;
      iVar2 = FUN_008ede80(local_30,2);
      if (iVar2 != 0) {
        if (*(code **)(iVar2 + 0x60) != (code *)0x0) {
          (**(code **)(iVar2 + 0x60))(1,iVar2);
        }
        *(code **)(iVar2 + 0x60) = FUN_008ad5e0;
      }
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008ad920 : PUSH EBP
008ad921 : MOV EBP,ESP
008ad923 : PUSH -0x1
008ad925 : PUSH 0xb44d4f
008ad92a : MOV EAX,FS:[0x0]
008ad930 : PUSH EAX
008ad931 : SUB ESP,0x74
008ad934 : MOV EAX,[0x00d66fa0]
008ad939 : XOR EAX,EBP
008ad93b : MOV dword ptr [EBP + -0x10],EAX
008ad93e : PUSH EBX
008ad93f : PUSH ESI
008ad940 : PUSH EDI
008ad941 : PUSH EAX
008ad942 : LEA EAX,[EBP + -0xc]
008ad945 : MOV FS:[0x0],EAX
008ad94b : MOV EAX,[0x00da9894]
008ad950 : MOV EAX,dword ptr [EAX]
008ad952 : MOV EAX,dword ptr [EAX + 0x188]
008ad958 : MOV EAX,dword ptr [EAX + 0x10]
008ad95b : XOR EBX,EBX
008ad95d : CMP EAX,EBX
008ad95f : JZ 0x008adab1
008ad965 : LEA ECX,[EBP + -0x48]
008ad968 : CMP word ptr [EAX + 0xb8],BX
008ad96f : JNZ 0x008ada32
008ad975 : PUSH 0xc4b760
008ad97a : CALL 0x00406460
008ad97f : MOV dword ptr [EBP + -0x4],EBX
008ad982 : LEA ECX,[EBP + -0x48]
008ad985 : PUSH ECX
008ad986 : MOV ECX,dword ptr [0x0172491c]
008ad98c : LEA EDI,[EBP + -0x80]
008ad98f : CALL 0x0081d120
008ad994 : MOV byte ptr [EBP + -0x4],0x1
008ad998 : MOV ESI,0x8
008ad99d : CMP dword ptr [EAX + 0x18],ESI
008ad9a0 : JC 0x008ad9a7
008ad9a2 : MOV EAX,dword ptr [EAX + 0x4]
008ad9a5 : JMP 0x008ad9aa
008ad9a7 : ADD EAX,0x4
008ad9aa : PUSH EAX
008ad9ab : LEA ECX,[EBP + -0x64]
008ad9ae : CALL 0x00406460
008ad9b3 : MOV byte ptr [EBP + -0x4],0x2
008ad9b7 : MOV EDX,dword ptr [0x00da9894]
008ad9bd : MOV EAX,dword ptr [EDX]
008ad9bf : MOV ECX,dword ptr [EAX + 0x1a8]
008ad9c5 : MOV EAX,dword ptr [ECX]
008ad9c7 : MOV EAX,dword ptr [EAX + 0x44]
008ad9ca : PUSH 0x3
008ad9cc : LEA EDX,[EBP + -0x64]
008ad9cf : PUSH EDX
008ad9d0 : CALL EAX
008ad9d2 : MOV byte ptr [EBP + -0x4],0x1
008ad9d6 : CMP dword ptr [EBP + -0x4c],ESI
008ad9d9 : JC 0x008ad9e3
008ad9db : MOV ECX,dword ptr [EBP + -0x60]
008ad9de : CALL 0x006f04e0
008ad9e3 : MOV EDI,0x7
008ad9e8 : XOR ECX,ECX
008ad9ea : MOV dword ptr [EBP + -0x4c],EDI
008ad9ed : MOV dword ptr [EBP + -0x50],EBX
008ad9f0 : MOV word ptr [EBP + -0x60],CX
008ad9f4 : MOV byte ptr [EBP + -0x4],BL
008ad9f7 : CMP dword ptr [EBP + -0x68],ESI
008ad9fa : JC 0x008ada04
008ad9fc : MOV ECX,dword ptr [EBP + -0x7c]
008ad9ff : CALL 0x006f04e0
008ada04 : XOR EDX,EDX
008ada06 : MOV dword ptr [EBP + -0x68],EDI
008ada09 : MOV dword ptr [EBP + -0x6c],EBX
008ada0c : MOV word ptr [EBP + -0x7c],DX
008ada10 : MOV dword ptr [EBP + -0x4],0xffffffff
008ada17 : CMP dword ptr [EBP + -0x30],ESI
008ada1a : JC 0x008ada24
008ada1c : MOV ECX,dword ptr [EBP + -0x44]
008ada1f : CALL 0x006f04e0
008ada24 : XOR EAX,EAX
008ada26 : MOV dword ptr [EBP + -0x30],EDI
008ada29 : MOV dword ptr [EBP + -0x34],EBX
008ada2c : MOV word ptr [EBP + -0x44],AX
008ada30 : JMP 0x008adab1
008ada32 : PUSH 0xc4b7a4
008ada37 : CALL 0x00406460
008ada3c : MOV dword ptr [EBP + -0x4],0x3
008ada43 : LEA ECX,[EBP + -0x48]
008ada46 : PUSH ECX
008ada47 : MOV ECX,dword ptr [0x0172491c]
008ada4d : LEA EDI,[EBP + -0x2c]
008ada50 : CALL 0x0081d120
008ada55 : MOV byte ptr [EBP + -0x4],0x5
008ada59 : CMP dword ptr [EBP + -0x30],0x8
008ada5d : JC 0x008ada67
008ada5f : MOV ECX,dword ptr [EBP + -0x44]
008ada62 : CALL 0x006f04e0
008ada67 : MOV EAX,[0x00da9894]
008ada6c : XOR EDX,EDX
008ada6e : MOV word ptr [EBP + -0x44],DX
008ada72 : PUSH 0x2
008ada74 : LEA EDX,[EBP + -0x2c]
008ada77 : MOV dword ptr [EBP + -0x30],0x7
008ada7e : MOV dword ptr [EBP + -0x34],EBX
008ada81 : MOV ECX,dword ptr [EAX]
008ada83 : PUSH EDX
008ada84 : CALL 0x008ede80
008ada89 : MOV ESI,EAX
008ada8b : CMP ESI,EBX
008ada8d : JZ 0x008adaa2
008ada8f : MOV EAX,dword ptr [ESI + 0x60]
008ada92 : CMP EAX,EBX
008ada94 : JZ 0x008ada9b
008ada96 : PUSH ESI
008ada97 : PUSH 0x1
008ada99 : CALL EAX
008ada9b : MOV dword ptr [ESI + 0x60],0x8ad5e0
008adaa2 : MOV dword ptr [EBP + -0x4],0xffffffff
008adaa9 : LEA ECX,[EBP + -0x2c]
008adaac : CALL 0x00406560
008adab1 : MOV ECX,dword ptr [EBP + -0xc]
008adab4 : MOV dword ptr FS:[0x0],ECX
008adabb : POP ECX
008adabc : POP EDI
008adabd : POP ESI
008adabe : POP EBX
008adabf : MOV ECX,dword ptr [EBP + -0x10]
008adac2 : XOR ECX,EBP
008adac4 : CALL 0x00633e6b
008adac9 : MOV ESP,EBP
008adacb : POP EBP
008adacc : RET
