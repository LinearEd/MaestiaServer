PROGRAM  : Maestia.exe
FUNCTION : FUN_009821a0
ENTRY    : 009821a0
BODY     : [[009821a0, 009823a3]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_009821a0(undefined4 param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  undefined1 local_48 [28];
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b40702;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  piVar1 = (int *)FUN_00703c00(0x300,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar2 = (int *)FUN_00703c00(0x300);
  if (piVar2 == (int *)0x0) {
    ExceptionList = local_10;
    return 0;
  }
  if (piVar1 == (int *)0x0) {
    ExceptionList = local_10;
    return 0;
  }
  iVar3 = (**(code **)(*piVar1 + 0x38))();
  if ((iVar3 == 0) && ((piVar1[0x10] & 0x10000U) == 0)) {
    iVar3 = (**(code **)(*piVar2 + 0x38))();
    if ((iVar3 == 0) && ((piVar2[0x10] & 0x10000U) == 0)) {
      ExceptionList = local_10;
      return 1;
    }
    FUN_00406460(L"IDS_ZONEMAP_INSTANCEMAP_ERR1");
    local_8 = 4;
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar4 = FUN_0081d120(local_2c);
    local_8._0_1_ = 5;
    (**(code **)(*piVar1 + 0x44))(uVar4,3);
    local_8 = CONCAT31(local_8._1_3_,4);
    FUN_00406560();
  }
  else {
    if (*(char *)(DAT_00da93ec + 0x3a9) != '\0') {
      FUN_00406460(L"IDS_ZONEMAP_INSTANCEMAP_ERR02");
      local_8 = 0;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar4 = FUN_0081d120(local_2c);
      local_8._0_1_ = 1;
      (**(code **)(*piVar1 + 0x44))(uVar4,3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      FUN_00982070(param_1);
      goto LAB_0098237e;
    }
    FUN_00406460(L"IDS_ZONEMAP_INSTANCEMAP_ERR0");
    local_8 = 2;
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar4 = FUN_0081d120(local_48);
    local_8._0_1_ = 3;
    (**(code **)(*piVar1 + 0x44))(uVar4,3);
    local_8 = CONCAT31(local_8._1_3_,2);
    FUN_00406560();
  }
  local_8 = 0xffffffff;
  FUN_00406560();
LAB_0098237e:
  FUN_008a1050(0xca);
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
009821a0 : PUSH EBP
009821a1 : MOV EBP,ESP
009821a3 : PUSH -0x1
009821a5 : PUSH 0xb40702
009821aa : MOV EAX,FS:[0x0]
009821b0 : PUSH EAX
009821b1 : SUB ESP,0x74
009821b4 : PUSH EBX
009821b5 : PUSH ESI
009821b6 : PUSH EDI
009821b7 : MOV EAX,[0x00d66fa0]
009821bc : XOR EAX,EBP
009821be : PUSH EAX
009821bf : LEA EAX,[EBP + -0xc]
009821c2 : MOV FS:[0x0],EAX
009821c8 : MOV EAX,dword ptr [EBP + 0x8]
009821cb : MOV DI,word ptr [EAX + 0x6c]
009821cf : PUSH 0x300
009821d4 : CALL 0x00703c00
009821d9 : MOV EDI,dword ptr [EBP + 0xc]
009821dc : ADD ESP,0x4
009821df : PUSH 0x300
009821e4 : MOV EBX,EAX
009821e6 : CALL 0x00703c00
009821eb : MOV ESI,EAX
009821ed : ADD ESP,0x4
009821f0 : TEST ESI,ESI
009821f2 : JZ 0x0098238e
009821f8 : TEST EBX,EBX
009821fa : JZ 0x0098238e
00982200 : MOV EDX,dword ptr [EBX]
00982202 : MOV EAX,dword ptr [EDX + 0x38]
00982205 : MOV ECX,EBX
00982207 : CALL EAX
00982209 : TEST EAX,EAX
0098220b : JNZ 0x009822a8
00982211 : MOV EDI,0x10000
00982216 : TEST dword ptr [EBX + 0x40],EDI
00982219 : JNZ 0x009822a8
0098221f : MOV EDX,dword ptr [ESI]
00982221 : MOV EAX,dword ptr [EDX + 0x38]
00982224 : MOV ECX,ESI
00982226 : CALL EAX
00982228 : TEST EAX,EAX
0098222a : JNZ 0x0098224a
0098222c : TEST dword ptr [ESI + 0x40],EDI
0098222f : JNZ 0x0098224a
00982231 : MOV EAX,0x1
00982236 : MOV ECX,dword ptr [EBP + -0xc]
00982239 : MOV dword ptr FS:[0x0],ECX
00982240 : POP ECX
00982241 : POP EDI
00982242 : POP ESI
00982243 : POP EBX
00982244 : MOV ESP,EBP
00982246 : POP EBP
00982247 : RET 0x8
0098224a : PUSH 0xc80704
0098224f : LEA ECX,[EBP + -0x28]
00982252 : CALL 0x00406460
00982257 : MOV EBX,0x4
0098225c : MOV dword ptr [EBP + -0x4],EBX
0098225f : MOV ECX,dword ptr [0x00da9894]
00982265 : MOV EAX,dword ptr [ECX]
00982267 : MOV ECX,dword ptr [0x0172491c]
0098226d : MOV ESI,dword ptr [EAX + 0x1a8]
00982273 : LEA EDX,[EBP + -0x28]
00982276 : PUSH EDX
00982277 : LEA EDI,[EBP + -0x60]
0098227a : CALL 0x0081d120
0098227f : MOV byte ptr [EBP + -0x4],0x5
00982283 : MOV EDX,dword ptr [ESI]
00982285 : PUSH 0x3
00982287 : PUSH EAX
00982288 : MOV EAX,dword ptr [EDX + 0x44]
0098228b : MOV ECX,ESI
0098228d : CALL EAX
0098228f : MOV byte ptr [EBP + -0x4],BL
00982292 : MOV ECX,EDI
00982294 : CALL 0x00406560
00982299 : MOV dword ptr [EBP + -0x4],0xffffffff
009822a0 : LEA ECX,[EBP + -0x28]
009822a3 : JMP 0x00982379
009822a8 : MOV ECX,dword ptr [0x00da93ec]
009822ae : CMP byte ptr [ECX + 0x3a9],0x0
009822b5 : JZ 0x00982320
009822b7 : PUSH 0xc8068c
009822bc : LEA ECX,[EBP + -0x28]
009822bf : CALL 0x00406460
009822c4 : MOV dword ptr [EBP + -0x4],0x0
009822cb : MOV EDX,dword ptr [0x00da9894]
009822d1 : MOV EAX,dword ptr [EDX]
009822d3 : MOV ESI,dword ptr [EAX + 0x1a8]
009822d9 : MOV ECX,dword ptr [0x0172491c]
009822df : LEA EAX,[EBP + -0x28]
009822e2 : PUSH EAX
009822e3 : LEA EDI,[EBP + -0x60]
009822e6 : CALL 0x0081d120
009822eb : MOV byte ptr [EBP + -0x4],0x1
009822ef : MOV EDX,dword ptr [ESI]
009822f1 : PUSH 0x3
009822f3 : PUSH EAX
009822f4 : MOV EAX,dword ptr [EDX + 0x44]
009822f7 : MOV ECX,ESI
009822f9 : CALL EAX
009822fb : MOV byte ptr [EBP + -0x4],0x0
009822ff : MOV ECX,EDI
00982301 : CALL 0x00406560
00982306 : MOV dword ptr [EBP + -0x4],0xffffffff
0098230d : LEA ECX,[EBP + -0x28]
00982310 : CALL 0x00406560
00982315 : MOV ECX,dword ptr [EBP + 0x8]
00982318 : PUSH ECX
00982319 : CALL 0x00982070
0098231e : JMP 0x0098237e
00982320 : PUSH 0xc806c8
00982325 : LEA ECX,[EBP + -0x44]
00982328 : CALL 0x00406460
0098232d : MOV EBX,0x2
00982332 : MOV dword ptr [EBP + -0x4],EBX
00982335 : MOV EDX,dword ptr [0x00da9894]
0098233b : MOV EAX,dword ptr [EDX]
0098233d : MOV ESI,dword ptr [EAX + 0x1a8]
00982343 : MOV ECX,dword ptr [0x0172491c]
00982349 : LEA EAX,[EBP + -0x44]
0098234c : PUSH EAX
0098234d : LEA EDI,[EBP + -0x7c]
00982350 : CALL 0x0081d120
00982355 : MOV byte ptr [EBP + -0x4],0x3
00982359 : MOV EDX,dword ptr [ESI]
0098235b : PUSH 0x3
0098235d : PUSH EAX
0098235e : MOV EAX,dword ptr [EDX + 0x44]
00982361 : MOV ECX,ESI
00982363 : CALL EAX
00982365 : MOV byte ptr [EBP + -0x4],BL
00982368 : MOV ECX,EDI
0098236a : CALL 0x00406560
0098236f : MOV dword ptr [EBP + -0x4],0xffffffff
00982376 : LEA ECX,[EBP + -0x44]
00982379 : CALL 0x00406560
0098237e : MOV ECX,dword ptr [0x017248dc]
00982384 : PUSH 0xca
00982389 : CALL 0x008a1050
0098238e : XOR EAX,EAX
00982390 : MOV ECX,dword ptr [EBP + -0xc]
00982393 : MOV dword ptr FS:[0x0],ECX
0098239a : POP ECX
0098239b : POP EDI
0098239c : POP ESI
0098239d : POP EBX
0098239e : MOV ESP,EBP
009823a0 : POP EBP
009823a1 : RET 0x8
