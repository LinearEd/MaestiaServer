PROGRAM  : Maestia.exe
FUNCTION : FUN_007f2ed0
ENTRY    : 007f2ed0
BODY     : [[007f2ed0, 007f3106] [007f3110, 007f3178]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f2ed0(void)

{
  int *in_ECX;
  float *pfVar1;
  float10 fVar2;
  int iVar3;
  float fStack_54;
  float fStack_50;
  float fStack_4c;
  float local_48;
  float fStack_44;
  float fStack_40;
  float fStack_3c;
  float fStack_38;
  float fStack_34;
  float fStack_30;
  float fStack_2c;
  float fStack_28;
  float fStack_24;
  float fStack_20;
  float fStack_1c;
  float fStack_18;
  
  if (*(char *)((int)in_ECX + 0x156) != '\0') {
    if (*(char *)((int)in_ECX + 0x157) == '\0') {
      (**(code **)(*in_ECX + 0x2c))();
      return;
    }
    local_48 = 0.0;
    D3DXMatrixPerspectiveFovLH(&local_48,in_ECX[0x13],in_ECX[0x14],in_ECX[0x15],in_ECX[0x17]);
    D3DXMatrixMultiply(&local_48,in_ECX + 0x2d,&local_48);
    in_ECX[0x3d] = (int)(fStack_54 + local_48);
    in_ECX[0x3e] = (int)(fStack_44 + fStack_38);
    in_ECX[0x3f] = (int)(fStack_34 + fStack_28);
    in_ECX[0x40] = (int)(fStack_24 + fStack_18);
    in_ECX[0x42] = (int)(fStack_38 - fStack_44);
    in_ECX[0x43] = (int)(fStack_28 - fStack_34);
    in_ECX[0x44] = (int)(fStack_18 - fStack_24);
    in_ECX[0x4d] = (int)(local_48 - fStack_50);
    in_ECX[0x4e] = (int)(fStack_38 - fStack_40);
    in_ECX[0x51] = (int)(fStack_50 + local_48);
    in_ECX[0x41] = (int)(local_48 - fStack_54);
    in_ECX[0x4f] = (int)(fStack_28 - fStack_30);
    in_ECX[0x52] = (int)(fStack_40 + fStack_38);
    in_ECX[0x53] = (int)(fStack_30 + fStack_28);
    in_ECX[0x50] = (int)(fStack_18 - fStack_20);
    in_ECX[0x54] = (int)(fStack_20 + fStack_18);
    in_ECX[0x45] = (int)(fStack_4c + local_48);
    in_ECX[0x46] = (int)(fStack_3c + fStack_38);
    in_ECX[0x47] = (int)(fStack_2c + fStack_28);
    in_ECX[0x48] = (int)(fStack_1c + fStack_18);
    in_ECX[0x49] = (int)(local_48 - fStack_4c);
    in_ECX[0x4a] = (int)(fStack_38 - fStack_3c);
    in_ECX[0x4b] = (int)(fStack_28 - fStack_2c);
    in_ECX[0x4c] = (int)(fStack_18 - fStack_1c);
    iVar3 = 6;
    pfVar1 = (float *)(in_ECX + 0x40);
    do {
      fVar2 = (float10)FUN_0040f460(pfVar1[-1] * pfVar1[-1] + pfVar1[-3] * pfVar1[-3] +
                                    pfVar1[-2] * pfVar1[-2]);
      D3DXVec3Normalize(pfVar1 + -3,pfVar1 + -3);
      iVar3 = iVar3 + -1;
      *pfVar1 = *pfVar1 / (float)fVar2;
      pfVar1 = pfVar1 + 4;
    } while (iVar3 != 0);
    *(undefined1 *)((int)in_ECX + 0x156) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007f2ed0 : PUSH EBP
007f2ed1 : MOV EBP,ESP
007f2ed3 : AND ESP,0xfffffff8
007f2ed6 : SUB ESP,0x4c
007f2ed9 : PUSH EBX
007f2eda : PUSH ESI
007f2edb : MOV ESI,ECX
007f2edd : CMP byte ptr [ESI + 0x156],0x0
007f2ee4 : PUSH EDI
007f2ee5 : JZ 0x007f3172
007f2eeb : CMP byte ptr [ESI + 0x157],0x0
007f2ef2 : JNZ 0x007f2f02
007f2ef4 : MOV EAX,dword ptr [ESI]
007f2ef6 : MOV EDX,dword ptr [EAX + 0x2c]
007f2ef9 : CALL EDX
007f2efb : POP EDI
007f2efc : POP ESI
007f2efd : POP EBX
007f2efe : MOV ESP,EBP
007f2f00 : POP EBP
007f2f01 : RET
007f2f02 : FLD float ptr [ESI + 0x5c]
007f2f05 : XORPS XMM0,XMM0
007f2f08 : SUB ESP,0x10
007f2f0b : FSTP float ptr [ESP + 0xc]
007f2f0f : LEA EAX,[ESP + 0x28]
007f2f13 : FLD float ptr [ESI + 0x54]
007f2f16 : MOVSS dword ptr [ESP + 0x28],XMM0
007f2f1c : FSTP float ptr [ESP + 0x8]
007f2f20 : FLD float ptr [ESI + 0x50]
007f2f23 : FSTP float ptr [ESP + 0x4]
007f2f27 : FLD float ptr [ESI + 0x4c]
007f2f2a : FSTP float ptr [ESP]
007f2f2d : PUSH EAX
007f2f2e : CALL 0x00664c72
007f2f33 : LEA ECX,[ESP + 0x18]
007f2f37 : PUSH ECX
007f2f38 : LEA EDX,[ESI + 0xb4]
007f2f3e : PUSH EDX
007f2f3f : MOV EAX,ECX
007f2f41 : PUSH EAX
007f2f42 : CALL 0x004ff752
007f2f47 : MOVSS XMM0,dword ptr [ESP + 0x24]
007f2f4d : MOVSS XMM4,dword ptr [ESP + 0x18]
007f2f53 : MOVSS XMM5,dword ptr [ESP + 0x28]
007f2f59 : MOVSS XMM6,dword ptr [ESP + 0x38]
007f2f5f : MOVSS XMM7,dword ptr [ESP + 0x48]
007f2f65 : MOVAPS XMM1,XMM4
007f2f68 : MOVAPS XMM2,XMM5
007f2f6b : ADDSS XMM1,XMM0
007f2f6f : MOVAPS XMM3,XMM6
007f2f72 : MOVSS dword ptr [ESI + 0xf4],XMM1
007f2f7a : MOVSS XMM1,dword ptr [ESP + 0x34]
007f2f80 : ADDSS XMM2,XMM1
007f2f84 : MOVSS dword ptr [ESI + 0xf8],XMM2
007f2f8c : MOVSS XMM2,dword ptr [ESP + 0x44]
007f2f92 : ADDSS XMM3,XMM2
007f2f96 : MOVSS dword ptr [ESI + 0xfc],XMM3
007f2f9e : MOVSS XMM3,dword ptr [ESP + 0x54]
007f2fa4 : ADDSS XMM7,XMM3
007f2fa8 : MOVSS dword ptr [ESI + 0x100],XMM7
007f2fb0 : LEA EDI,[ESI + 0x100]
007f2fb6 : MOVAPS XMM7,XMM0
007f2fb9 : SUBSS XMM7,XMM4
007f2fbd : MOVAPS XMM4,XMM1
007f2fc0 : SUBSS XMM4,XMM5
007f2fc4 : MOVSS dword ptr [ESI + 0x108],XMM4
007f2fcc : MOVAPS XMM4,XMM2
007f2fcf : SUBSS XMM4,XMM6
007f2fd3 : MOVSS dword ptr [ESI + 0x10c],XMM4
007f2fdb : MOVAPS XMM4,XMM3
007f2fde : SUBSS XMM4,dword ptr [ESP + 0x48]
007f2fe4 : MOVSS dword ptr [ESI + 0x110],XMM4
007f2fec : MOVSS XMM4,dword ptr [ESP + 0x1c]
007f2ff2 : MOVAPS XMM5,XMM0
007f2ff5 : SUBSS XMM5,XMM4
007f2ff9 : MOVSS dword ptr [ESI + 0x134],XMM5
007f3001 : MOVSS XMM5,dword ptr [ESP + 0x2c]
007f3007 : ADDSS XMM4,XMM0
007f300b : MOVAPS XMM6,XMM1
007f300e : SUBSS XMM6,XMM5
007f3012 : MOVSS dword ptr [ESI + 0x138],XMM6
007f301a : MOVSS dword ptr [ESI + 0x144],XMM4
007f3022 : MOVSS XMM4,dword ptr [ESP + 0x3c]
007f3028 : MOVAPS XMM6,XMM2
007f302b : SUBSS XMM6,dword ptr [ESP + 0x3c]
007f3031 : ADDSS XMM5,XMM1
007f3035 : ADDSS XMM4,XMM2
007f3039 : MOVSS dword ptr [ESI + 0x104],XMM7
007f3041 : MOVSS dword ptr [ESI + 0x13c],XMM6
007f3049 : MOVSS XMM6,dword ptr [ESP + 0x4c]
007f304f : MOVSS dword ptr [ESI + 0x148],XMM5
007f3057 : MOVSS dword ptr [ESI + 0x14c],XMM4
007f305f : MOVSS XMM4,dword ptr [ESP + 0x20]
007f3065 : MOVAPS XMM7,XMM3
007f3068 : SUBSS XMM7,XMM6
007f306c : MOVAPS XMM5,XMM4
007f306f : ADDSS XMM6,XMM3
007f3073 : ADDSS XMM5,XMM0
007f3077 : MOVSS dword ptr [ESI + 0x140],XMM7
007f307f : MOVSS dword ptr [ESI + 0x150],XMM6
007f3087 : MOVSS dword ptr [ESI + 0x114],XMM5
007f308f : MOVSS XMM5,dword ptr [ESP + 0x30]
007f3095 : MOVAPS XMM6,XMM5
007f3098 : ADDSS XMM6,XMM1
007f309c : MOVSS dword ptr [ESI + 0x118],XMM6
007f30a4 : MOVSS XMM6,dword ptr [ESP + 0x40]
007f30aa : MOVAPS XMM7,XMM6
007f30ad : ADDSS XMM7,XMM2
007f30b1 : MOVSS dword ptr [ESI + 0x11c],XMM7
007f30b9 : MOVSS XMM7,dword ptr [ESP + 0x50]
007f30bf : ADDSS XMM7,XMM3
007f30c3 : SUBSS XMM3,dword ptr [ESP + 0x50]
007f30c9 : SUBSS XMM0,XMM4
007f30cd : SUBSS XMM1,XMM5
007f30d1 : SUBSS XMM2,XMM6
007f30d5 : MOVSS dword ptr [ESI + 0x120],XMM7
007f30dd : MOVSS dword ptr [ESI + 0x124],XMM0
007f30e5 : MOVSS dword ptr [ESI + 0x128],XMM1
007f30ed : MOVSS dword ptr [ESI + 0x12c],XMM2
007f30f5 : MOVSS dword ptr [ESI + 0x130],XMM3
007f30fd : MOV dword ptr [ESP + 0x10],0x6
007f3105 : JMP 0x007f3110
007f3110 : MOVSS XMM0,dword ptr [EDI + -0x4]
007f3115 : MOVSS XMM2,dword ptr [EDI + -0xc]
007f311a : MOVSS XMM1,dword ptr [EDI + -0x8]
007f311f : MOVAPS XMM3,XMM0
007f3122 : MULSS XMM3,XMM0
007f3126 : LEA EBX,[EDI + -0xc]
007f3129 : MOVAPS XMM0,XMM2
007f312c : MULSS XMM0,XMM2
007f3130 : ADDSS XMM3,XMM0
007f3134 : MOVAPS XMM0,XMM1
007f3137 : MULSS XMM0,XMM1
007f313b : PUSH ECX
007f313c : ADDSS XMM3,XMM0
007f3140 : MOVSS dword ptr [ESP],XMM3
007f3145 : CALL 0x0040f460
007f314a : FSTP float ptr [ESP + 0x18]
007f314e : ADD ESP,0x4
007f3151 : PUSH EBX
007f3152 : PUSH EBX
007f3153 : CALL 0x004ff722
007f3158 : FLD float ptr [EDI]
007f315a : FDIV float ptr [ESP + 0x14]
007f315e : ADD EDI,0x10
007f3161 : SUB dword ptr [ESP + 0x10],0x1
007f3166 : FSTP float ptr [EDI + -0x10]
007f3169 : JNZ 0x007f3110
007f316b : MOV byte ptr [ESI + 0x156],0x0
007f3172 : POP EDI
007f3173 : POP ESI
007f3174 : POP EBX
007f3175 : MOV ESP,EBP
007f3177 : POP EBP
007f3178 : RET
