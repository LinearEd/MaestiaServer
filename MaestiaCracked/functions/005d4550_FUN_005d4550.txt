PROGRAM  : Maestia.exe
FUNCTION : FUN_005d4550
ENTRY    : 005d4550
BODY     : [[005d4550, 005d4586] [005d4590, 005d468f]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x005d466b) */
/* WARNING: Removing unreachable block (ram,0x005d4670) */

void FUN_005d4550(uint *param_1)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  int *in_ECX;
  uint uVar4;
  uint uVar5;
  int local_3c;
  uint local_38;
  uint local_28;
  int local_24;
  uint local_20;
  uint local_1c;
  int local_18;
  uint local_14;
  uint local_10;
  uint local_c;
  uint local_8;
  undefined1 local_4;
  
  uVar5 = param_1[1] + *param_1;
  local_38 = 0;
  if (in_ECX[1] != 0) {
    local_3c = 0;
    do {
      puVar3 = (uint *)(*in_ECX + local_3c);
      uVar1 = *param_1;
      uVar2 = *puVar3;
      uVar4 = puVar3[1] + uVar2;
      if (uVar2 < uVar1) {
        if (uVar1 < uVar4) {
          if (uVar4 <= uVar5) {
            puVar3[1] = puVar3[1] + (uVar1 - uVar4);
            goto LAB_005d463c;
          }
          puVar3[1] = uVar1 - uVar2;
          puVar3[4] = uVar1 - uVar2;
          local_20 = puVar3[2];
          local_14 = puVar3[5];
          local_10 = puVar3[6];
          local_24 = uVar4 - uVar5;
          local_c = puVar3[7];
          local_8 = puVar3[8];
          local_4 = (undefined1)puVar3[9];
          local_28 = uVar5;
          local_1c = uVar5;
          local_18 = local_24;
          FUN_005d3340(&local_28);
          goto LAB_005d4642;
        }
        if (uVar1 <= uVar2) goto LAB_005d460e;
      }
      else {
LAB_005d460e:
        if (uVar2 < uVar5) {
          if (uVar5 < uVar4) {
            *puVar3 = *puVar3 + (uVar5 - uVar2);
            puVar3[1] = puVar3[1] - (uVar5 - uVar2);
            puVar3[3] = *puVar3;
LAB_005d463c:
            puVar3[4] = puVar3[1];
          }
          else {
            FUN_005d44b0(local_38);
            local_38 = local_38 - 1;
            local_3c = local_3c + -0x28;
          }
LAB_005d4642:
          *(undefined1 *)((int)in_ECX + 0x19) = 0;
          *(undefined1 *)(in_ECX + 6) = 0;
        }
      }
      local_3c = local_3c + 0x28;
      local_38 = local_38 + 1;
    } while (local_38 < (uint)in_ECX[1]);
  }
  FUN_00515cf0(0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005d4550 : SUB ESP,0x3c
005d4553 : MOV EDX,dword ptr [ESP + 0x40]
005d4557 : PUSH EBX
005d4558 : PUSH EBP
005d4559 : PUSH ESI
005d455a : PUSH EDI
005d455b : MOV EDI,dword ptr [EDX + 0x4]
005d455e : ADD EDI,dword ptr [EDX]
005d4560 : XOR EBX,EBX
005d4562 : MOV ESI,ECX
005d4564 : XOR EBP,EBP
005d4566 : XOR EAX,EAX
005d4568 : MOV dword ptr [ESP + 0x18],EBP
005d456c : MOV dword ptr [ESP + 0x1c],EAX
005d4570 : MOV dword ptr [ESP + 0x20],EBX
005d4574 : MOV dword ptr [ESP + 0x14],EBX
005d4578 : CMP dword ptr [ESI + 0x4],EBX
005d457b : JBE 0x005d4667
005d4581 : MOV dword ptr [ESP + 0x10],EBX
005d4585 : JMP 0x005d4594
005d4590 : MOV EDX,dword ptr [ESP + 0x50]
005d4594 : MOV EAX,dword ptr [ESI]
005d4596 : ADD EAX,dword ptr [ESP + 0x10]
005d459a : MOV EDX,dword ptr [EDX]
005d459c : MOV EBP,dword ptr [EAX]
005d459e : MOV ECX,dword ptr [EAX + 0x4]
005d45a1 : ADD ECX,EBP
005d45a3 : CMP EBP,EDX
005d45a5 : JNC 0x005d460e
005d45a7 : CMP EDX,ECX
005d45a9 : JNC 0x005d460a
005d45ab : CMP EDI,ECX
005d45ad : JNC 0x005d4603
005d45af : SUB EDX,EBP
005d45b1 : MOV dword ptr [EAX + 0x4],EDX
005d45b4 : MOV dword ptr [EAX + 0x10],EDX
005d45b7 : MOV EDX,dword ptr [EAX + 0x8]
005d45ba : MOV dword ptr [ESP + 0x2c],EDX
005d45be : MOV EDX,dword ptr [EAX + 0x14]
005d45c1 : MOV dword ptr [ESP + 0x38],EDX
005d45c5 : MOV EDX,dword ptr [EAX + 0x18]
005d45c8 : SUB ECX,EDI
005d45ca : MOV dword ptr [ESP + 0x3c],EDX
005d45ce : MOV EDX,dword ptr [EAX + 0x1c]
005d45d1 : MOV dword ptr [ESP + 0x28],ECX
005d45d5 : MOV dword ptr [ESP + 0x34],ECX
005d45d9 : MOV dword ptr [ESP + 0x40],EDX
005d45dd : MOV EDX,dword ptr [EAX + 0x20]
005d45e0 : MOV AL,byte ptr [EAX + 0x24]
005d45e3 : LEA ECX,[ESP + 0x24]
005d45e7 : PUSH ECX
005d45e8 : LEA ECX,[ESP + 0x1c]
005d45ec : MOV dword ptr [ESP + 0x48],EDX
005d45f0 : MOV byte ptr [ESP + 0x4c],AL
005d45f4 : MOV dword ptr [ESP + 0x28],EDI
005d45f8 : MOV dword ptr [ESP + 0x34],EDI
005d45fc : CALL 0x005d3340
005d4601 : JMP 0x005d4642
005d4603 : SUB EDX,ECX
005d4605 : ADD dword ptr [EAX + 0x4],EDX
005d4608 : JMP 0x005d463c
005d460a : CMP EBP,EDX
005d460c : JC 0x005d4648
005d460e : CMP EBP,EDI
005d4610 : JNC 0x005d4648
005d4612 : CMP ECX,EDI
005d4614 : JA 0x005d462e
005d4616 : MOV EBP,dword ptr [ESP + 0x14]
005d461a : PUSH EBP
005d461b : MOV ECX,ESI
005d461d : CALL 0x005d44b0
005d4622 : DEC EBP
005d4623 : SUB dword ptr [ESP + 0x10],0x28
005d4628 : MOV dword ptr [ESP + 0x14],EBP
005d462c : JMP 0x005d4642
005d462e : MOV ECX,EDI
005d4630 : SUB ECX,EBP
005d4632 : ADD dword ptr [EAX],ECX
005d4634 : MOV EDX,dword ptr [EAX]
005d4636 : SUB dword ptr [EAX + 0x4],ECX
005d4639 : MOV dword ptr [EAX + 0xc],EDX
005d463c : MOV ECX,dword ptr [EAX + 0x4]
005d463f : MOV dword ptr [EAX + 0x10],ECX
005d4642 : MOV byte ptr [ESI + 0x19],BL
005d4645 : MOV byte ptr [ESI + 0x18],BL
005d4648 : MOV EAX,dword ptr [ESP + 0x14]
005d464c : ADD dword ptr [ESP + 0x10],0x28
005d4651 : INC EAX
005d4652 : MOV dword ptr [ESP + 0x14],EAX
005d4656 : CMP EAX,dword ptr [ESI + 0x4]
005d4659 : JC 0x005d4590
005d465f : MOV EAX,dword ptr [ESP + 0x1c]
005d4663 : MOV EBP,dword ptr [ESP + 0x18]
005d4667 : CMP EAX,EBX
005d4669 : JBE 0x005d4680
005d466b : MOV EDI,EBP
005d466d : MOV EBX,EAX
005d466f : NOP
005d4670 : PUSH EDI
005d4671 : MOV ECX,ESI
005d4673 : CALL 0x005d42b0
005d4678 : ADD EDI,0x28
005d467b : SUB EBX,0x1
005d467e : JNZ 0x005d4670
005d4680 : PUSH EBP
005d4681 : CALL 0x00515cf0
005d4686 : POP EDI
005d4687 : POP ESI
005d4688 : POP EBP
005d4689 : POP EBX
005d468a : ADD ESP,0x3c
005d468d : RET 0x4
