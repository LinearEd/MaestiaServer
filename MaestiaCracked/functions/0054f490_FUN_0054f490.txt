PROGRAM  : Maestia.exe
FUNCTION : FUN_0054f490
ENTRY    : 0054f490
BODY     : [[0054f490, 0054f522]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_0054f490(undefined4 *param_1,uint param_2)

{
  int *piVar1;
  int iVar2;
  int *in_ECX;
  uint *puVar3;
  uint uVar4;
  
  iVar2 = *in_ECX;
  puVar3 = (uint *)(iVar2 + 8 + param_2 * 0x18);
  if ((*(int *)(iVar2 + 8 + param_2 * 0x18) == -2) ||
     (uVar4 = param_2, (*(uint *)(puVar3[1] + 0xc) & *(uint *)(iVar2 + 4)) != param_2)) {
    return 0xffffffff;
  }
  do {
    if ((*(uint *)(iVar2 + 4) & *(uint *)(puVar3[1] + 0xc)) == param_2) {
      piVar1 = (int *)*param_1;
      if (*(int *)(puVar3[1] + 4) == 0) {
        FUN_00525a80();
      }
      if (*(int *)(*piVar1 + 4) == *(int *)(puVar3[1] + 4)) {
        return uVar4;
      }
    }
    uVar4 = *puVar3;
    if (uVar4 == 0xffffffff) {
      return 0xffffffff;
    }
    iVar2 = *in_ECX;
    puVar3 = (uint *)(iVar2 + 8 + uVar4 * 0x18);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
0054f490 : PUSH ECX
0054f491 : PUSH EBP
0054f492 : MOV EBP,dword ptr [ESP + 0x10]
0054f496 : MOV EDX,ECX
0054f498 : MOV EAX,dword ptr [EDX]
0054f49a : PUSH ESI
0054f49b : LEA ECX,[EBP + EBP*0x2]
0054f49f : CMP dword ptr [EAX + ECX*0x8 + 0x8],-0x2
0054f4a4 : LEA ESI,[EAX + ECX*0x8 + 0x8]
0054f4a8 : PUSH EDI
0054f4a9 : MOV dword ptr [ESP + 0xc],EDX
0054f4ad : MOV EDI,EBP
0054f4af : JZ 0x0054f519
0054f4b1 : MOV ECX,dword ptr [ESI + 0x4]
0054f4b4 : MOV ECX,dword ptr [ECX + 0xc]
0054f4b7 : AND ECX,dword ptr [EAX + 0x4]
0054f4ba : CMP ECX,EBP
0054f4bc : JNZ 0x0054f519
0054f4be : PUSH EBX
0054f4bf : NOP
0054f4c0 : MOV ECX,dword ptr [ESI + 0x4]
0054f4c3 : MOV EAX,dword ptr [EAX + 0x4]
0054f4c6 : AND EAX,dword ptr [ECX + 0xc]
0054f4c9 : CMP EAX,EBP
0054f4cb : JNZ 0x0054f4f2
0054f4cd : MOV ECX,dword ptr [ESP + 0x18]
0054f4d1 : MOV EBX,dword ptr [ECX]
0054f4d3 : MOV ECX,dword ptr [ESI + 0x4]
0054f4d6 : CMP dword ptr [ECX + 0x4],0x0
0054f4da : JNZ 0x0054f4e5
0054f4dc : CALL 0x00525a80
0054f4e1 : MOV EDX,dword ptr [ESP + 0x10]
0054f4e5 : MOV ECX,dword ptr [EBX]
0054f4e7 : MOV EAX,dword ptr [ESI + 0x4]
0054f4ea : MOV ECX,dword ptr [ECX + 0x4]
0054f4ed : CMP ECX,dword ptr [EAX + 0x4]
0054f4f0 : JZ 0x0054f504
0054f4f2 : MOV EDI,dword ptr [ESI]
0054f4f4 : CMP EDI,-0x1
0054f4f7 : JZ 0x0054f50e
0054f4f9 : MOV EAX,dword ptr [EDX]
0054f4fb : LEA ECX,[EDI + EDI*0x2]
0054f4fe : LEA ESI,[EAX + ECX*0x8 + 0x8]
0054f502 : JMP 0x0054f4c0
0054f504 : POP EBX
0054f505 : MOV EAX,EDI
0054f507 : POP EDI
0054f508 : POP ESI
0054f509 : POP EBP
0054f50a : POP ECX
0054f50b : RET 0x8
0054f50e : POP EBX
0054f50f : POP EDI
0054f510 : POP ESI
0054f511 : OR EAX,0xffffffff
0054f514 : POP EBP
0054f515 : POP ECX
0054f516 : RET 0x8
0054f519 : POP EDI
0054f51a : POP ESI
0054f51b : OR EAX,0xffffffff
0054f51e : POP EBP
0054f51f : POP ECX
0054f520 : RET 0x8
