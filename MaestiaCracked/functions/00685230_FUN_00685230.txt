PROGRAM  : Maestia.exe
FUNCTION : FUN_00685230
ENTRY    : 00685230
BODY     : [[00685230, 006852c1]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00685230(void)

{
  HRESULT HVar1;
  int iVar2;
  int *in_ECX;
  int *piVar3;
  int *local_4;
  
  local_4 = in_ECX;
  HVar1 = CoCreateInstance((IID *)&DAT_00bef260,(LPUNKNOWN)0x0,1,(IID *)&DAT_00bef6c0,&local_4);
  if (HVar1 < 0) {
    (**(code **)(*local_4 + 8))(local_4);
    return 0;
  }
  in_ECX[6] = (int)local_4;
  piVar3 = in_ECX + 10;
  iVar2 = (**(code **)*local_4)(local_4,&DAT_00bd8340);
  if (iVar2 < 0) {
    (**(code **)(*piVar3 + 8))(piVar3);
  }
  else {
    piVar3 = (int *)in_ECX[10];
    (**(code **)(*piVar3 + 0x38))(piVar3,in_ECX + 8,4);
    iVar2 = FUN_00684f60();
    if (iVar2 == 1) {
      iVar2 = FUN_00684ef0();
      if (iVar2 == 1) {
        *(undefined4 *)(in_ECX[2] + 0x70) = 0;
        return 1;
      }
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00685230 : PUSH ECX
00685231 : PUSH ESI
00685232 : LEA EAX,[ESP + 0x4]
00685236 : PUSH EAX
00685237 : PUSH 0xbef6c0
0068523c : PUSH 0x1
0068523e : PUSH 0x0
00685240 : PUSH 0xbef260
00685245 : MOV ESI,ECX
00685247 : CALL dword ptr [0x00b85774]
0068524d : TEST EAX,EAX
0068524f : MOV EAX,dword ptr [ESP + 0x4]
00685253 : JGE 0x00685262
00685255 : MOV ECX,dword ptr [EAX]
00685257 : MOV EDX,dword ptr [ECX + 0x8]
0068525a : PUSH EAX
0068525b : CALL EDX
0068525d : XOR EAX,EAX
0068525f : POP ESI
00685260 : POP ECX
00685261 : RET
00685262 : PUSH EDI
00685263 : LEA EDI,[ESI + 0x28]
00685266 : PUSH EDI
00685267 : MOV dword ptr [ESI + 0x18],EAX
0068526a : MOV ECX,dword ptr [EAX]
0068526c : MOV EDX,dword ptr [ECX]
0068526e : PUSH 0xbd8340
00685273 : PUSH EAX
00685274 : CALL EDX
00685276 : TEST EAX,EAX
00685278 : JGE 0x0068528c
0068527a : MOV EAX,dword ptr [ESP + 0x8]
0068527e : MOV ECX,dword ptr [EAX]
00685280 : MOV EDX,dword ptr [ECX + 0x8]
00685283 : PUSH EAX
00685284 : CALL EDX
00685286 : POP EDI
00685287 : XOR EAX,EAX
00685289 : POP ESI
0068528a : POP ECX
0068528b : RET
0068528c : MOV EAX,dword ptr [EDI]
0068528e : MOV ECX,dword ptr [EAX]
00685290 : PUSH 0x4
00685292 : LEA EDX,[ESI + 0x20]
00685295 : PUSH EDX
00685296 : PUSH EAX
00685297 : MOV EAX,dword ptr [ECX + 0x38]
0068529a : CALL EAX
0068529c : MOV ECX,ESI
0068529e : CALL 0x00684f60
006852a3 : CMP EAX,0x1
006852a6 : JNZ 0x00685286
006852a8 : MOV ECX,ESI
006852aa : CALL 0x00684ef0
006852af : CMP EAX,0x1
006852b2 : JNZ 0x00685286
006852b4 : MOV ECX,dword ptr [ESI + 0x8]
006852b7 : POP EDI
006852b8 : MOV dword ptr [ECX + 0x70],0x0
006852bf : POP ESI
006852c0 : POP ECX
006852c1 : RET
