PROGRAM  : Maestia.exe
FUNCTION : FUN_00787580
ENTRY    : 00787580
BODY     : [[00787580, 0078763c] [00787640, 00787696]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00787580(int param_1,undefined4 param_2,int *param_3)

{
  int *piVar1;
  char cVar2;
  int *in_ECX;
  int iVar3;
  int iVar4;
  uint uVar5;
  int local_14;
  int local_10;
  int local_c;
  int local_8;
  
  if ((in_ECX[0x12] == 0) &&
     (cVar2 = (**(code **)(*in_ECX + 0x10))
                        (in_ECX[10],in_ECX[0xb],((char)in_ECX[0x13] == '\0') + '\x01',in_ECX[0xc]),
     cVar2 == '\0')) {
    return 0;
  }
  local_8 = in_ECX[0xb];
  local_c = in_ECX[10];
  iVar4 = param_1;
  if (0 < param_1) {
    do {
      local_8 = local_8 >> 1;
      if (local_8 < 1) {
        local_8 = 1;
      }
      local_c = local_c >> 1;
      if (local_c < 1) {
        local_c = 1;
      }
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
  }
  iVar4 = local_c;
  uVar5 = ((char)in_ECX[0x13] != '\0') + 3;
  (**(code **)(*(int *)in_ECX[0x12] + 0x4c))((int *)in_ECX[0x12],param_1,&local_14,0,0);
  *param_3 = iVar4;
  iVar4 = 1;
  param_3[2] = local_10;
  param_3[3] = local_14;
  param_3[1] = local_8;
  if (1 < uVar5) {
    do {
      (**(code **)(*(int *)in_ECX[iVar4 + 0x13] + 0x4c))
                ((int *)in_ECX[iVar4 + 0x13],param_1,&local_14,0,0);
      piVar1 = param_3 + iVar4 * 4;
      piVar1[3] = local_14;
      piVar1[2] = local_10;
      iVar3 = local_c;
      if (iVar4 != 3) {
        iVar3 = local_c >> 1;
      }
      *piVar1 = iVar3;
      iVar3 = local_8;
      if (iVar4 != 3) {
        iVar3 = local_8 >> 1;
      }
      iVar4 = iVar4 + 1;
      piVar1[1] = iVar3;
    } while (iVar4 < (int)uVar5);
  }
  return uVar5;
}



============================================================
DISASSEMBLY
============================================================
00787580 : PUSH EBP
00787581 : MOV EBP,ESP
00787583 : SUB ESP,0x10
00787586 : PUSH EBX
00787587 : MOV EBX,ECX
00787589 : CMP dword ptr [EBX + 0x48],0x0
0078758d : JNZ 0x007875bb
0078758f : MOV ECX,dword ptr [EBX + 0x30]
00787592 : MOV EAX,dword ptr [EBX]
00787594 : MOV EAX,dword ptr [EAX + 0x10]
00787597 : XOR EDX,EDX
00787599 : CMP byte ptr [EBX + 0x4c],DL
0078759c : PUSH ECX
0078759d : MOV ECX,dword ptr [EBX + 0x2c]
007875a0 : SETZ DL
007875a3 : INC EDX
007875a4 : PUSH EDX
007875a5 : MOV EDX,dword ptr [EBX + 0x28]
007875a8 : PUSH ECX
007875a9 : PUSH EDX
007875aa : MOV ECX,EBX
007875ac : CALL EAX
007875ae : TEST AL,AL
007875b0 : JNZ 0x007875bb
007875b2 : XOR EAX,EAX
007875b4 : POP EBX
007875b5 : MOV ESP,EBP
007875b7 : POP EBP
007875b8 : RET 0x10
007875bb : MOV ECX,dword ptr [EBX + 0x2c]
007875be : PUSH ESI
007875bf : MOV ESI,dword ptr [EBX + 0x28]
007875c2 : MOV dword ptr [EBP + -0x4],ECX
007875c5 : MOV ECX,dword ptr [EBP + 0x8]
007875c8 : PUSH EDI
007875c9 : MOV dword ptr [EBP + -0x8],ESI
007875cc : TEST ECX,ECX
007875ce : JLE 0x007875f8
007875d0 : MOV EDX,ECX
007875d2 : MOV EDI,dword ptr [EBP + -0x4]
007875d5 : SAR EDI,0x1
007875d7 : MOV EAX,0x1
007875dc : CMP EDI,EAX
007875de : MOV dword ptr [EBP + -0x4],EDI
007875e1 : JGE 0x007875e6
007875e3 : MOV dword ptr [EBP + -0x4],EAX
007875e6 : SAR ESI,0x1
007875e8 : CMP ESI,EAX
007875ea : MOV dword ptr [EBP + -0x8],ESI
007875ed : JGE 0x007875f4
007875ef : MOV dword ptr [EBP + -0x8],EAX
007875f2 : MOV ESI,EAX
007875f4 : SUB EDX,EAX
007875f6 : JNZ 0x007875d2
007875f8 : MOV EAX,dword ptr [EBX + 0x48]
007875fb : XOR EDX,EDX
007875fd : CMP byte ptr [EBX + 0x4c],DL
00787600 : PUSH 0x0
00787602 : SETNZ DL
00787605 : PUSH 0x0
00787607 : LEA EDI,[EBP + -0x10]
0078760a : PUSH EDI
0078760b : PUSH ECX
0078760c : PUSH EAX
0078760d : ADD EDX,0x3
00787610 : MOV dword ptr [EBP + 0xc],EDX
00787613 : MOV EDX,dword ptr [EAX]
00787615 : MOV EAX,dword ptr [EDX + 0x4c]
00787618 : CALL EAX
0078761a : MOV EDI,dword ptr [EBP + 0x10]
0078761d : MOV ECX,dword ptr [EBP + -0xc]
00787620 : MOV EDX,dword ptr [EBP + -0x10]
00787623 : MOV EAX,dword ptr [EBP + -0x4]
00787626 : MOV dword ptr [EDI],ESI
00787628 : MOV ESI,0x1
0078762d : CMP dword ptr [EBP + 0xc],ESI
00787630 : MOV dword ptr [EDI + 0x8],ECX
00787633 : MOV dword ptr [EDI + 0xc],EDX
00787636 : MOV dword ptr [EDI + 0x4],EAX
00787639 : JLE 0x0078768b
0078763b : JMP 0x00787640
00787640 : MOV EAX,dword ptr [EBX + ESI*0x4 + 0x4c]
00787644 : MOV ECX,dword ptr [EAX]
00787646 : PUSH 0x0
00787648 : PUSH 0x0
0078764a : LEA EDX,[EBP + -0x10]
0078764d : PUSH EDX
0078764e : MOV EDX,dword ptr [EBP + 0x8]
00787651 : PUSH EDX
00787652 : PUSH EAX
00787653 : MOV EAX,dword ptr [ECX + 0x4c]
00787656 : CALL EAX
00787658 : MOV EDX,dword ptr [EBP + -0xc]
0078765b : MOV ECX,ESI
0078765d : SHL ECX,0x4
00787660 : LEA EAX,[ECX + EDI*0x1]
00787663 : MOV ECX,dword ptr [EBP + -0x10]
00787666 : MOV dword ptr [EAX + 0xc],ECX
00787669 : MOV ECX,dword ptr [EBP + -0x8]
0078766c : MOV dword ptr [EAX + 0x8],EDX
0078766f : CMP ESI,0x3
00787672 : JZ 0x00787676
00787674 : SAR ECX,0x1
00787676 : MOV dword ptr [EAX],ECX
00787678 : MOV ECX,dword ptr [EBP + -0x4]
0078767b : CMP ESI,0x3
0078767e : JZ 0x00787682
00787680 : SAR ECX,0x1
00787682 : INC ESI
00787683 : CMP ESI,dword ptr [EBP + 0xc]
00787686 : MOV dword ptr [EAX + 0x4],ECX
00787689 : JL 0x00787640
0078768b : MOV EAX,dword ptr [EBP + 0xc]
0078768e : POP EDI
0078768f : POP ESI
00787690 : POP EBX
00787691 : MOV ESP,EBP
00787693 : POP EBP
00787694 : RET 0x10
