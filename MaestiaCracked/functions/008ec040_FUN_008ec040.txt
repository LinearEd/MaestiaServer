PROGRAM  : Maestia.exe
FUNCTION : FUN_008ec040
ENTRY    : 008ec040
BODY     : [[008ec040, 008ec0ea]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_008ec040(int param_1)

{
  DWORD DVar1;
  int unaff_EDI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b129c7;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if ((*(char *)(unaff_EDI + 0xc4) == '\0') &&
     (DVar1 = GetTickCount(), DVar1 - *(int *)(unaff_EDI + 200) < 1000)) {
    *(undefined4 *)(param_1 + 0x18) = 7;
    *(undefined4 *)(param_1 + 0x14) = 0;
    *(undefined2 *)(param_1 + 4) = 0;
    FUN_00405eb0(unaff_EDI + 0xcc,0,0xffffffff);
    ExceptionList = local_10;
    return param_1;
  }
  *(undefined4 *)(param_1 + 0x18) = 7;
  *(undefined4 *)(param_1 + 0x14) = 0;
  *(undefined2 *)(param_1 + 4) = 0;
  FUN_00405eb0(unaff_EDI + 0xe8,0,0xffffffff);
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
008ec040 : PUSH EBP
008ec041 : MOV EBP,ESP
008ec043 : PUSH -0x1
008ec045 : PUSH 0xb129c7
008ec04a : MOV EAX,FS:[0x0]
008ec050 : PUSH EAX
008ec051 : PUSH ECX
008ec052 : PUSH EBX
008ec053 : PUSH ESI
008ec054 : MOV EAX,[0x00d66fa0]
008ec059 : XOR EAX,EBP
008ec05b : PUSH EAX
008ec05c : LEA EAX,[EBP + -0xc]
008ec05f : MOV FS:[0x0],EAX
008ec065 : MOV ESI,dword ptr [EBP + 0x8]
008ec068 : XOR EBX,EBX
008ec06a : MOV dword ptr [EBP + -0x10],EBX
008ec06d : CMP byte ptr [EDI + 0xc4],BL
008ec073 : JNZ 0x008ec0ab
008ec075 : CALL dword ptr [0x00b850d8]
008ec07b : SUB EAX,dword ptr [EDI + 0xc8]
008ec081 : CMP EAX,0x3e8
008ec086 : JNC 0x008ec0ab
008ec088 : PUSH -0x1
008ec08a : XOR ECX,ECX
008ec08c : LEA EAX,[EDI + 0xcc]
008ec092 : MOV dword ptr [ESI + 0x18],0x7
008ec099 : MOV dword ptr [ESI + 0x14],EBX
008ec09c : PUSH EBX
008ec09d : MOV word ptr [ESI + 0x4],CX
008ec0a1 : PUSH EAX
008ec0a2 : MOV ECX,ESI
008ec0a4 : CALL 0x00405eb0
008ec0a9 : JMP 0x008ec0cc
008ec0ab : PUSH -0x1
008ec0ad : LEA EAX,[EDI + 0xe8]
008ec0b3 : PUSH EBX
008ec0b4 : XOR EDX,EDX
008ec0b6 : MOV dword ptr [ESI + 0x18],0x7
008ec0bd : MOV dword ptr [ESI + 0x14],EBX
008ec0c0 : PUSH EAX
008ec0c1 : MOV ECX,ESI
008ec0c3 : MOV word ptr [ESI + 0x4],DX
008ec0c7 : CALL 0x00405eb0
008ec0cc : MOV dword ptr [EBP + -0x4],EBX
008ec0cf : MOV dword ptr [EBP + -0x10],0x1
008ec0d6 : MOV EAX,ESI
008ec0d8 : MOV ECX,dword ptr [EBP + -0xc]
008ec0db : MOV dword ptr FS:[0x0],ECX
008ec0e2 : POP ECX
008ec0e3 : POP ESI
008ec0e4 : POP EBX
008ec0e5 : MOV ESP,EBP
008ec0e7 : POP EBP
008ec0e8 : RET 0x4
