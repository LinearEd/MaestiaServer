PROGRAM  : Maestia.exe
FUNCTION : FUN_005015f0
ENTRY    : 005015f0
BODY     : [[005015f0, 005016b0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005015f0(int param_1)

{
  byte *pbVar1;
  double dVar2;
  int iVar3;
  
  if (((*(int *)(param_1 + 8) != 0) &&
      (iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar3 == 4)) &&
     (0 < *(int *)(param_1 + 0x1c))) {
    FUN_00526260(0);
    FUN_00527730();
    iVar3 = FUN_0063b380();
    if (iVar3 < 0) {
      pbVar1 = *(byte **)(param_1 + 4);
      if (4 < *pbVar1) {
        FUN_00526400();
      }
      pbVar1[4] = 0;
      pbVar1[5] = 0;
      pbVar1[6] = 0;
      pbVar1[7] = 0;
      pbVar1[8] = 0;
      pbVar1[9] = 0;
      pbVar1[10] = 0xf0;
      pbVar1[0xb] = 0xbf;
      *pbVar1 = 3;
      return;
    }
    iVar3 = FUN_0054b540();
    if (iVar3 == -1) {
      dVar2 = -1.0;
    }
    else {
      dVar2 = (double)iVar3;
      if (iVar3 < 0) {
        FUN_004ffd60(dVar2 + 4294967296.0);
        return;
      }
    }
    FUN_004ffd60(dVar2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005015f0 : PUSH ESI
005015f1 : MOV ESI,dword ptr [ESP + 0x8]
005015f5 : CMP dword ptr [ESI + 0x8],0x0
005015f9 : JZ 0x005016af
005015ff : MOV ECX,dword ptr [ESI + 0x8]
00501602 : MOV EAX,dword ptr [ECX]
00501604 : MOV EDX,dword ptr [EAX + 0x8]
00501607 : CALL EDX
00501609 : CMP EAX,0x4
0050160c : JNZ 0x005016af
00501612 : MOV EAX,dword ptr [ESI + 0x8]
00501615 : PUSH EDI
00501616 : TEST EAX,EAX
00501618 : JZ 0x0050161f
0050161a : LEA EDI,[EAX + -0x68]
0050161d : JMP 0x00501621
0050161f : XOR EDI,EDI
00501621 : CMP dword ptr [ESI + 0x1c],0x1
00501625 : JL 0x005016ae
0050162b : MOV EAX,dword ptr [ESI + 0x18]
0050162e : PUSH EAX
0050162f : PUSH 0x0
00501631 : MOV ECX,ESI
00501633 : CALL 0x00526260
00501638 : MOV ECX,EAX
0050163a : CALL 0x00527730
0050163f : CALL 0x0063b380
00501644 : TEST EAX,EAX
00501646 : JGE 0x00501666
00501648 : MOV ESI,dword ptr [ESI + 0x4]
0050164b : CMP byte ptr [ESI],0x5
0050164e : JC 0x00501657
00501650 : MOV ECX,ESI
00501652 : CALL 0x00526400
00501657 : FLD double ptr [0x00b86090]
0050165d : POP EDI
0050165e : FSTP double ptr [ESI + 0x4]
00501661 : MOV byte ptr [ESI],0x3
00501664 : POP ESI
00501665 : RET
00501666 : MOV ECX,dword ptr [EDI + 0xa0]
0050166c : PUSH EAX
0050166d : CALL 0x0054b540
00501672 : CMP EAX,-0x1
00501675 : JZ 0x0050169a
00501677 : MOV dword ptr [ESP + 0xc],EAX
0050167b : FILD dword ptr [ESP + 0xc]
0050167f : TEST EAX,EAX
00501681 : JGE 0x005016a0
00501683 : FADD double ptr [0x00cdf6f8]
00501689 : MOV ECX,dword ptr [ESI + 0x4]
0050168c : SUB ESP,0x8
0050168f : FSTP double ptr [ESP]
00501692 : CALL 0x004ffd60
00501697 : POP EDI
00501698 : POP ESI
00501699 : RET
0050169a : FLD double ptr [0x00b86090]
005016a0 : MOV ECX,dword ptr [ESI + 0x4]
005016a3 : SUB ESP,0x8
005016a6 : FSTP double ptr [ESP]
005016a9 : CALL 0x004ffd60
005016ae : POP EDI
005016af : POP ESI
005016b0 : RET
