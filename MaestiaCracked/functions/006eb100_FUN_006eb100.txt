PROGRAM  : Maestia.exe
FUNCTION : FUN_006eb100
ENTRY    : 006eb100
BODY     : [[006eb100, 006eb232]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006eb100(int param_1,int param_2)

{
  int iVar1;
  char cVar2;
  int iVar3;
  undefined1 local_28 [4];
  void *local_24;
  int local_20;
  void *local_c;
  undefined1 *puStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  puStack_8 = &LAB_00b4b9d6;
  local_c = ExceptionList;
  ExceptionList = &local_c;
  iVar3 = 0;
  if (*(int *)(param_2 + 0x10) != 0) {
    FUN_004faec0(local_28,*(int *)(param_2 + 0x10));
    local_4 = 0;
    _memcpy(local_24,*(void **)(param_2 + 0xc),*(int *)(param_2 + 0x10) * 4);
    cVar2 = FUN_0046d4d0(param_2 + 8,0);
    if (cVar2 == '\0') {
      *(undefined4 *)(param_2 + 0x10) = *(undefined4 *)(param_2 + 0x14);
    }
    else {
      *(undefined4 *)(param_2 + 0x10) = 0;
    }
    if (0 < local_20) {
      do {
        iVar1 = *(int *)((int)local_24 + iVar3 * 4);
        if (*(int *)(iVar1 + 0xc) == *(int *)(param_1 + 0x48)) {
          FUN_004fb840();
          if (((*(int *)(iVar1 + 0x84) == -1) || (*(char *)(iVar1 + 0x80) != '\0')) &&
             (FUN_004fb840(), *(char *)(iVar1 + 0x80) != '\0')) {
            *(undefined1 *)(param_2 + 0x44) = 1;
          }
        }
        else if (*(int *)(iVar1 + 0x84) != -1) {
          FUN_004fb840();
        }
        iVar3 = iVar3 + 1;
        *(undefined1 *)(iVar1 + 0x80) = 0;
      } while (iVar3 < local_20);
    }
    local_4 = 0xffffffff;
    FUN_004faf70(local_28);
  }
  ExceptionList = local_c;
  return;
}



============================================================
DISASSEMBLY
============================================================
006eb100 : PUSH -0x1
006eb102 : PUSH 0xb4b9d6
006eb107 : MOV EAX,FS:[0x0]
006eb10d : PUSH EAX
006eb10e : SUB ESP,0x24
006eb111 : PUSH EBX
006eb112 : PUSH EBP
006eb113 : PUSH ESI
006eb114 : PUSH EDI
006eb115 : MOV EAX,[0x00d66fa0]
006eb11a : XOR EAX,ESP
006eb11c : PUSH EAX
006eb11d : LEA EAX,[ESP + 0x38]
006eb121 : MOV FS:[0x0],EAX
006eb127 : MOV ESI,dword ptr [ESP + 0x4c]
006eb12b : MOV EAX,dword ptr [ESI + 0x10]
006eb12e : XOR EBX,EBX
006eb130 : CMP EAX,EBX
006eb132 : JZ 0x006eb21d
006eb138 : PUSH EAX
006eb139 : LEA EAX,[ESP + 0x20]
006eb13d : PUSH EAX
006eb13e : CALL 0x004faec0
006eb143 : MOV dword ptr [ESP + 0x40],EBX
006eb147 : MOV EAX,dword ptr [ESI + 0x10]
006eb14a : MOV EDX,dword ptr [ESI + 0xc]
006eb14d : LEA ECX,[EAX*0x4 + 0x0]
006eb154 : MOV EAX,dword ptr [ESP + 0x20]
006eb158 : PUSH ECX
006eb159 : PUSH EDX
006eb15a : PUSH EAX
006eb15b : CALL 0x0063ae40
006eb160 : ADD ESP,0xc
006eb163 : PUSH EBX
006eb164 : LEA EDI,[ESI + 0x8]
006eb167 : PUSH EDI
006eb168 : CALL 0x0046d4d0
006eb16d : TEST AL,AL
006eb16f : JZ 0x006eb176
006eb171 : MOV dword ptr [EDI + 0x8],EBX
006eb174 : JMP 0x006eb17c
006eb176 : MOV ECX,dword ptr [EDI + 0xc]
006eb179 : MOV dword ptr [EDI + 0x8],ECX
006eb17c : CMP dword ptr [ESP + 0x24],EBX
006eb180 : JLE 0x006eb20b
006eb186 : MOV EDX,dword ptr [ESP + 0x20]
006eb18a : MOV EBP,dword ptr [EDX + EBX*0x4]
006eb18d : MOV EAX,dword ptr [EBP + 0xc]
006eb190 : MOV ECX,dword ptr [ESP + 0x48]
006eb194 : MOV dword ptr [ESP + 0x18],EBP
006eb198 : CMP EAX,dword ptr [ECX + 0x48]
006eb19b : JNZ 0x006eb1e0
006eb19d : LEA EDI,[ESP + 0x18]
006eb1a1 : ADD ESI,0x8
006eb1a4 : CALL 0x004fb840
006eb1a9 : CMP dword ptr [EBP + 0x84],-0x1
006eb1b0 : JZ 0x006eb1bb
006eb1b2 : CMP byte ptr [EBP + 0x80],0x0
006eb1b9 : JZ 0x006eb1f5
006eb1bb : MOV ESI,dword ptr [ESP + 0x4c]
006eb1bf : ADD ESI,0x1c
006eb1c2 : LEA EDI,[ESP + 0x18]
006eb1c6 : CALL 0x004fb840
006eb1cb : CMP byte ptr [EBP + 0x80],0x0
006eb1d2 : JZ 0x006eb1f5
006eb1d4 : MOV EDX,dword ptr [ESP + 0x4c]
006eb1d8 : MOV byte ptr [EDX + 0x44],0x1
006eb1dc : MOV ESI,EDX
006eb1de : JMP 0x006eb1f9
006eb1e0 : CMP dword ptr [EBP + 0x84],-0x1
006eb1e7 : JZ 0x006eb1f9
006eb1e9 : ADD ESI,0x30
006eb1ec : LEA EDI,[ESP + 0x18]
006eb1f0 : CALL 0x004fb840
006eb1f5 : MOV ESI,dword ptr [ESP + 0x4c]
006eb1f9 : INC EBX
006eb1fa : MOV byte ptr [EBP + 0x80],0x0
006eb201 : CMP EBX,dword ptr [ESP + 0x24]
006eb205 : JL 0x006eb186
006eb20b : MOV dword ptr [ESP + 0x40],0xffffffff
006eb213 : LEA EAX,[ESP + 0x1c]
006eb217 : PUSH EAX
006eb218 : CALL 0x004faf70
006eb21d : MOV ECX,dword ptr [ESP + 0x38]
006eb221 : MOV dword ptr FS:[0x0],ECX
006eb228 : POP ECX
006eb229 : POP EDI
006eb22a : POP ESI
006eb22b : POP EBP
006eb22c : POP EBX
006eb22d : ADD ESP,0x30
006eb230 : RET 0x8
