PROGRAM  : Maestia.exe
FUNCTION : FUN_00861e10
ENTRY    : 00861e10
BODY     : [[00861e10, 0086212d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00861e10(int *param_1,char param_2)

{
  uint uVar1;
  undefined1 uVar2;
  char cVar3;
  int iVar4;
  undefined1 local_30 [4];
  undefined1 local_2c;
  undefined1 local_2b;
  undefined4 local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4dd6b;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(char *)((int)param_1 + 0x65d) == '\0') {
    local_28 = 0;
    local_24 = 0.0;
    local_2c = 1;
    local_2b = 0;
    local_20 = (float)CONCAT13(local_20._3_1_,0x10000);
    local_1c = 1.4013e-45;
    local_18 = (float)CONCAT31(local_18._1_3_,(param_2 == '\0') + '\x01');
    FUN_0041dea0(&local_2c);
  }
  else if ((char)param_1[0x6af] != param_2) {
    *(char *)(param_1 + 0x6af) = param_2;
    if (param_1[0x607] == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = param_1[0x5c5];
    }
    iVar4 = FUN_004049b0(iVar4,local_14);
    if (((iVar4 == 0) || ((param_1[0x5b9] & 0x800U) == 0)) ||
       ((*(uint *)(iVar4 + 0x28c) >> 2 & 1) == 0)) {
      if (param_2 == '\0') {
        (**(code **)(*(int *)param_1[0x5fe] + 0xc))(0);
        FUN_0085b4d0(param_1,2);
        (**(code **)(*(int *)param_1[0x610] + 0xc))(0);
        FUN_0085b4d0(param_1,0x14);
      }
      else {
        if (param_1[0x5fe] == 0) {
          iVar4 = 0;
        }
        else {
          iVar4 = param_1[0x5bc];
        }
        if ((((param_1[0x5b9] & 0x100000U) != 0) && (param_1[0x610] != 0)) && (param_1[0x5ce] != 0))
        {
          iVar4 = param_1[0x5ce];
        }
        iVar4 = FUN_004049b0(iVar4);
        if (iVar4 == 0) goto LAB_00862110;
        FUN_0085ad10(local_30,2);
        local_8 = 0;
        uVar2 = (**(code **)(*param_1 + 0x21c))();
        FUN_0084e210(local_30,param_1,1,0,1,uVar2);
        local_8 = 0xffffffff;
        FUN_00406560();
      }
      FUN_0085a780(param_1,1,(char)param_1[0x6af],1);
      cVar3 = (**(code **)(*param_1 + 0x21c))();
      if (cVar3 != '\0') {
        FUN_00861640();
      }
      if (param_1[0xfa] != 0) {
        uVar2 = (**(code **)(*param_1 + 0x21c))();
        if (*(char *)(param_1[0xfa] + 0x2be) == '\0') {
          cVar3 = FUN_007dbad0(2,1,0,uVar2);
          if (cVar3 != '\0') {
            FUN_007d6d00();
          }
        }
        (**(code **)(*param_1 + 0x278))
                  ((char)param_1[0x586],*(undefined2 *)((int)param_1 + 0x161a),1);
        (**(code **)(*(int *)param_1[0xfa] + 0x9c))(8);
        if (param_1[0x62d] != 0) {
          FUN_0087eeb0();
          uVar1 = *(uint *)(param_1[0x62d] + 0x2c);
          local_24 = (float)(uVar1 >> 0x10 & 0xff) * 0.003921569;
          local_20 = (float)(uVar1 >> 8 & 0xff) * 0.003921569;
          local_1c = (float)(uVar1 & 0xff) * 0.003921569;
          local_18 = (float)(uVar1 >> 0x18) * 0.003921569;
          FUN_007d3190();
        }
      }
    }
  }
LAB_00862110:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00861e10 : PUSH EBP
00861e11 : MOV EBP,ESP
00861e13 : PUSH -0x1
00861e15 : PUSH 0xb4dd6b
00861e1a : MOV EAX,FS:[0x0]
00861e20 : PUSH EAX
00861e21 : SUB ESP,0x34
00861e24 : MOV EAX,[0x00d66fa0]
00861e29 : XOR EAX,EBP
00861e2b : MOV dword ptr [EBP + -0x10],EAX
00861e2e : PUSH EBX
00861e2f : PUSH ESI
00861e30 : PUSH EDI
00861e31 : PUSH EAX
00861e32 : LEA EAX,[EBP + -0xc]
00861e35 : MOV FS:[0x0],EAX
00861e3b : MOV EBX,dword ptr [EBP + 0x8]
00861e3e : CMP byte ptr [EBX + 0x65d],0x0
00861e45 : JNZ 0x00861e85
00861e47 : XOR EAX,EAX
00861e49 : CMP byte ptr [EBP + 0xc],AL
00861e4c : LEA EDX,[EBP + -0x28]
00861e4f : SETZ CL
00861e52 : MOV dword ptr [EBP + -0x24],EAX
00861e55 : MOV dword ptr [EBP + -0x20],EAX
00861e58 : MOV word ptr [EBP + -0x1c],AX
00861e5c : INC CL
00861e5e : PUSH EDX
00861e5f : LEA EAX,[EBX + 0x19a4]
00861e65 : MOV byte ptr [EBP + -0x28],0x1
00861e69 : MOV byte ptr [EBP + -0x27],0x0
00861e6d : MOV byte ptr [EBP + -0x1a],0x1
00861e71 : MOV dword ptr [EBP + -0x18],0x1
00861e78 : MOV byte ptr [EBP + -0x14],CL
00861e7b : CALL 0x0041dea0
00861e80 : JMP 0x00862110
00861e85 : MOV AL,byte ptr [EBP + 0xc]
00861e88 : CMP byte ptr [EBX + 0x1abc],AL
00861e8e : JZ 0x00862110
00861e94 : MOV byte ptr [EBX + 0x1abc],AL
00861e9a : CMP dword ptr [EBX + 0x181c],0x0
00861ea1 : JZ 0x00861eab
00861ea3 : MOV EAX,dword ptr [EBX + 0x1714]
00861ea9 : JMP 0x00861ead
00861eab : XOR EAX,EAX
00861ead : PUSH EAX
00861eae : CALL 0x004049b0
00861eb3 : ADD ESP,0x4
00861eb6 : TEST EAX,EAX
00861eb8 : JZ 0x00861ed8
00861eba : TEST dword ptr [EBX + 0x16e4],0x800
00861ec4 : JZ 0x00861ed8
00861ec6 : MOV EAX,dword ptr [EAX + 0x28c]
00861ecc : SHR EAX,0x2
00861ecf : AND EAX,0x1
00861ed2 : JNZ 0x00862110
00861ed8 : CMP byte ptr [EBP + 0xc],0x0
00861edc : JZ 0x00861f74
00861ee2 : CMP dword ptr [EBX + 0x17f8],0x0
00861ee9 : JZ 0x00861ef3
00861eeb : MOV ESI,dword ptr [EBX + 0x16f0]
00861ef1 : JMP 0x00861ef5
00861ef3 : XOR ESI,ESI
00861ef5 : TEST dword ptr [EBX + 0x16e4],0x100000
00861eff : JZ 0x00861f16
00861f01 : CMP dword ptr [EBX + 0x1840],0x0
00861f08 : JZ 0x00861f16
00861f0a : MOV EAX,dword ptr [EBX + 0x1738]
00861f10 : TEST EAX,EAX
00861f12 : JZ 0x00861f16
00861f14 : MOV ESI,EAX
00861f16 : PUSH ESI
00861f17 : CALL 0x004049b0
00861f1c : ADD ESP,0x4
00861f1f : TEST EAX,EAX
00861f21 : JZ 0x00862110
00861f27 : PUSH 0x2
00861f29 : LEA EAX,[EBP + -0x2c]
00861f2c : PUSH EAX
00861f2d : MOV ECX,ESI
00861f2f : MOV EDX,EBX
00861f31 : CALL 0x0085ad10
00861f36 : MOV dword ptr [EBP + -0x4],0x0
00861f3d : MOV EDX,dword ptr [EBX]
00861f3f : MOV EAX,dword ptr [EDX + 0x21c]
00861f45 : MOV ECX,EBX
00861f47 : CALL EAX
00861f49 : MOVZX ECX,AL
00861f4c : PUSH ECX
00861f4d : MOV ECX,dword ptr [EBX + 0x17f8]
00861f53 : PUSH 0x1
00861f55 : PUSH 0x0
00861f57 : PUSH 0x1
00861f59 : PUSH EBX
00861f5a : LEA EDX,[EBP + -0x2c]
00861f5d : PUSH EDX
00861f5e : CALL 0x0084e210
00861f63 : MOV dword ptr [EBP + -0x4],0xffffffff
00861f6a : LEA ECX,[EBP + -0x2c]
00861f6d : CALL 0x00406560
00861f72 : JMP 0x00861fa2
00861f74 : MOV ECX,dword ptr [EBX + 0x17f8]
00861f7a : MOV EAX,dword ptr [ECX]
00861f7c : MOV EDX,dword ptr [EAX + 0xc]
00861f7f : PUSH 0x0
00861f81 : CALL EDX
00861f83 : PUSH 0x2
00861f85 : PUSH EBX
00861f86 : CALL 0x0085b4d0
00861f8b : MOV ECX,dword ptr [EBX + 0x1840]
00861f91 : MOV EAX,dword ptr [ECX]
00861f93 : MOV EDX,dword ptr [EAX + 0xc]
00861f96 : PUSH 0x0
00861f98 : CALL EDX
00861f9a : PUSH 0x14
00861f9c : PUSH EBX
00861f9d : CALL 0x0085b4d0
00861fa2 : MOVZX EAX,byte ptr [EBX + 0x1abc]
00861fa9 : PUSH 0x1
00861fab : PUSH EAX
00861fac : PUSH 0x1
00861fae : PUSH EBX
00861faf : CALL 0x0085a780
00861fb4 : MOV EDX,dword ptr [EBX]
00861fb6 : MOV EAX,dword ptr [EDX + 0x21c]
00861fbc : MOV ECX,EBX
00861fbe : CALL EAX
00861fc0 : TEST AL,AL
00861fc2 : JZ 0x00861fcb
00861fc4 : MOV ESI,EBX
00861fc6 : CALL 0x00861640
00861fcb : CMP dword ptr [EBX + 0x3e8],0x0
00861fd2 : JZ 0x00862110
00861fd8 : MOV EDX,dword ptr [EBX]
00861fda : MOV EAX,dword ptr [EDX + 0x21c]
00861fe0 : MOV ECX,EBX
00861fe2 : CALL EAX
00861fe4 : MOV EDI,dword ptr [EBX + 0x3e8]
00861fea : CMP byte ptr [EDI + 0x2be],0x0
00861ff1 : MOV byte ptr [EBP + -0x30],AL
00861ff4 : JNZ 0x00862014
00861ff6 : MOV ECX,dword ptr [EBP + -0x30]
00861ff9 : PUSH ECX
00861ffa : PUSH 0x0
00861ffc : PUSH 0x1
00861ffe : PUSH 0x2
00862000 : CALL 0x007dbad0
00862005 : TEST AL,AL
00862007 : JZ 0x00862014
00862009 : MOV ESI,dword ptr [EBX + 0x3e8]
0086200f : CALL 0x007d6d00
00862014 : MOVZX EAX,word ptr [EBX + 0x161a]
0086201b : MOVZX ECX,byte ptr [EBX + 0x1618]
00862022 : MOV EDX,dword ptr [EBX]
00862024 : MOV EDX,dword ptr [EDX + 0x278]
0086202a : PUSH 0x1
0086202c : PUSH EAX
0086202d : PUSH ECX
0086202e : MOV ECX,EBX
00862030 : CALL EDX
00862032 : MOV ECX,dword ptr [EBX + 0x3e8]
00862038 : MOV EAX,dword ptr [ECX]
0086203a : MOV EDX,dword ptr [EAX + 0x9c]
00862040 : PUSH 0x8
00862042 : CALL EDX
00862044 : MOV ESI,dword ptr [EBX + 0x18b4]
0086204a : TEST ESI,ESI
0086204c : JZ 0x00862110
00862052 : CALL 0x0087eeb0
00862057 : MOV ESI,dword ptr [EBX + 0x18b4]
0086205d : MOV EAX,dword ptr [ESI + 0x30]
00862060 : MOVSS XMM0,dword ptr [0x00cdf178]
00862068 : MOV ECX,EAX
0086206a : SHR ECX,0x10
0086206d : MOVZX EDX,CL
00862070 : CVTSI2SS XMM1,EDX
00862074 : MULSS XMM1,XMM0
00862078 : MOVSS dword ptr [EBP + -0x40],XMM1
0086207d : MOV ECX,EAX
0086207f : SHR ECX,0x8
00862082 : MOVZX EDX,CL
00862085 : CVTSI2SS XMM1,EDX
00862089 : MULSS XMM1,XMM0
0086208d : MOVSS dword ptr [EBP + -0x3c],XMM1
00862092 : MOVZX ECX,AL
00862095 : CVTSI2SS XMM1,ECX
00862099 : MULSS XMM1,XMM0
0086209d : MOVSS dword ptr [EBP + -0x38],XMM1
008620a2 : SHR EAX,0x18
008620a5 : CVTSI2SS XMM1,EAX
008620a9 : MOV EAX,dword ptr [ESI + 0x2c]
008620ac : MOV ESI,dword ptr [EBX + 0x3e8]
008620b2 : MULSS XMM1,XMM0
008620b6 : MOV EDX,EAX
008620b8 : SHR EDX,0x10
008620bb : MOVSS dword ptr [EBP + -0x34],XMM1
008620c0 : MOVZX ECX,DL
008620c3 : MOV EDX,EAX
008620c5 : SHR EDX,0x8
008620c8 : CVTSI2SS XMM1,ECX
008620cc : MULSS XMM1,XMM0
008620d0 : MOVSS dword ptr [EBP + -0x20],XMM1
008620d5 : MOVZX ECX,DL
008620d8 : MOVZX EDX,AL
008620db : CVTSI2SS XMM1,ECX
008620df : MULSS XMM1,XMM0
008620e3 : MOVSS dword ptr [EBP + -0x1c],XMM1
008620e8 : CVTSI2SS XMM1,EDX
008620ec : MULSS XMM1,XMM0
008620f0 : MOVSS dword ptr [EBP + -0x18],XMM1
008620f5 : SHR EAX,0x18
008620f8 : CVTSI2SS XMM1,EAX
008620fc : MULSS XMM1,XMM0
00862100 : LEA ECX,[EBP + -0x40]
00862103 : LEA EDX,[EBP + -0x20]
00862106 : MOVSS dword ptr [EBP + -0x14],XMM1
0086210b : CALL 0x007d3190
00862110 : MOV ECX,dword ptr [EBP + -0xc]
00862113 : MOV dword ptr FS:[0x0],ECX
0086211a : POP ECX
0086211b : POP EDI
0086211c : POP ESI
0086211d : POP EBX
0086211e : MOV ECX,dword ptr [EBP + -0x10]
00862121 : XOR ECX,EBP
00862123 : CALL 0x00633e6b
00862128 : MOV ESP,EBP
0086212a : POP EBP
0086212b : RET 0x8
