PROGRAM  : Maestia.exe
FUNCTION : FUN_005b5790
ENTRY    : 005b5790
BODY     : [[005b5790, 005b58ec] [005b58f0, 005b595d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b5790(int param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  int local_4;
  
  iVar9 = *(int *)(param_1 + 0x314);
  if (iVar9 == 0) {
    iVar9 = param_1 + 0x28;
  }
  local_4 = 4;
  do {
    iVar4 = *(int *)(param_1 + 0x314);
    if (iVar4 == 0) {
      iVar4 = param_1 + 0x28;
    }
    *(undefined1 *)(iVar4 + 0x15) = 0;
    if (*(int *)(iVar4 + 0x30) - *(int *)(iVar4 + 0x2c) < 2) {
      FUN_00539fb0(2);
    }
    iVar5 = *(int *)(iVar4 + 0x2c);
    uVar1 = *(undefined1 *)(*(int *)(iVar4 + 0x3c) + 1 + iVar5);
    uVar2 = *(undefined1 *)(*(int *)(iVar4 + 0x3c) + iVar5);
    *(int *)(iVar4 + 0x2c) = iVar5 + 2;
    if (CONCAT11(uVar1,uVar2) != 0) {
      FUN_0053a880(2);
      FUN_0053a880(1);
      FUN_0053a880(1);
      iVar4 = FUN_0053a880(1);
      iVar5 = FUN_0053a880(1);
      iVar6 = FUN_0053a880(1);
      iVar7 = FUN_0053a880(1);
      if (iVar7 != 0) {
        *(undefined1 *)(iVar9 + 0x15) = 0;
        if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 4) {
          FUN_00539fb0(4);
        }
        *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 4;
      }
      if (iVar6 != 0) {
        *(undefined1 *)(iVar9 + 0x15) = 0;
        if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 4) {
          FUN_00539fb0(4);
        }
        *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 4;
      }
      if (iVar5 != 0) {
        *(undefined1 *)(iVar9 + 0x15) = 0;
        if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 2) {
          FUN_00539fb0(2);
        }
        *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 2;
      }
      if (iVar4 != 0) {
        *(undefined1 *)(iVar9 + 0x15) = 0;
        if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 1) {
          FUN_0053a0a0();
        }
        bVar3 = *(byte *)(*(int *)(iVar9 + 0x2c) + *(int *)(iVar9 + 0x3c));
        *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 1;
        for (uVar8 = (uint)bVar3; uVar8 != 0; uVar8 = uVar8 - 1) {
          *(undefined1 *)(iVar9 + 0x15) = 0;
          if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 4) {
            FUN_00539fb0(4);
          }
          *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 4;
          *(undefined1 *)(iVar9 + 0x15) = 0;
          if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 2) {
            FUN_00539fb0(2);
          }
          *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 2;
          *(undefined1 *)(iVar9 + 0x15) = 0;
          if (*(int *)(iVar9 + 0x30) - *(int *)(iVar9 + 0x2c) < 2) {
            FUN_00539fb0(2);
          }
          *(int *)(iVar9 + 0x2c) = *(int *)(iVar9 + 0x2c) + 2;
        }
      }
    }
    local_4 = local_4 + -1;
  } while (local_4 != 0);
  return;
}



============================================================
DISASSEMBLY
============================================================
005b5790 : SUB ESP,0x8
005b5793 : PUSH EBX
005b5794 : MOV EBX,dword ptr [ESP + 0x10]
005b5798 : PUSH EBP
005b5799 : PUSH ESI
005b579a : MOV ESI,dword ptr [EBX + 0x314]
005b57a0 : PUSH EDI
005b57a1 : TEST ESI,ESI
005b57a3 : JNZ 0x005b57a8
005b57a5 : LEA ESI,[EBX + 0x28]
005b57a8 : MOV dword ptr [ESP + 0x14],0x4
005b57b0 : MOV EBP,0x2
005b57b5 : MOV EDI,dword ptr [EBX + 0x314]
005b57bb : TEST EDI,EDI
005b57bd : JNZ 0x005b57c2
005b57bf : LEA EDI,[EBX + 0x28]
005b57c2 : MOV EAX,dword ptr [EDI + 0x30]
005b57c5 : SUB EAX,dword ptr [EDI + 0x2c]
005b57c8 : MOV byte ptr [EDI + 0x15],0x0
005b57cc : CMP EAX,EBP
005b57ce : JGE 0x005b57d8
005b57d0 : PUSH EBP
005b57d1 : MOV ECX,EDI
005b57d3 : CALL 0x00539fb0
005b57d8 : MOV EAX,dword ptr [EDI + 0x2c]
005b57db : MOV ECX,dword ptr [EDI + 0x3c]
005b57de : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005b57e4 : ADD ECX,EAX
005b57e6 : MOVZX CX,byte ptr [ECX]
005b57ea : SHL DX,0x8
005b57ee : OR DX,CX
005b57f1 : MOVZX ECX,DX
005b57f4 : ADD EAX,0x2
005b57f7 : MOV dword ptr [EDI + 0x2c],EAX
005b57fa : TEST CX,CX
005b57fd : JZ 0x005b594b
005b5803 : PUSH EBP
005b5804 : MOV ECX,ESI
005b5806 : CALL 0x0053a880
005b580b : PUSH 0x1
005b580d : MOV ECX,ESI
005b580f : CALL 0x0053a880
005b5814 : PUSH 0x1
005b5816 : MOV ECX,ESI
005b5818 : CALL 0x0053a880
005b581d : PUSH 0x1
005b581f : MOV ECX,ESI
005b5821 : CALL 0x0053a880
005b5826 : TEST EAX,EAX
005b5828 : PUSH 0x1
005b582a : MOV ECX,ESI
005b582c : SETNZ byte ptr [ESP + 0x17]
005b5831 : CALL 0x0053a880
005b5836 : TEST EAX,EAX
005b5838 : PUSH 0x1
005b583a : MOV ECX,ESI
005b583c : SETNZ byte ptr [ESP + 0x16]
005b5841 : CALL 0x0053a880
005b5846 : TEST EAX,EAX
005b5848 : PUSH 0x1
005b584a : MOV ECX,ESI
005b584c : SETNZ BL
005b584f : CALL 0x0053a880
005b5854 : TEST EAX,EAX
005b5856 : JZ 0x005b5874
005b5858 : MOV EDX,dword ptr [ESI + 0x30]
005b585b : SUB EDX,dword ptr [ESI + 0x2c]
005b585e : MOV byte ptr [ESI + 0x15],0x0
005b5862 : CMP EDX,0x4
005b5865 : JGE 0x005b5870
005b5867 : PUSH 0x4
005b5869 : MOV ECX,ESI
005b586b : CALL 0x00539fb0
005b5870 : ADD dword ptr [ESI + 0x2c],0x4
005b5874 : TEST BL,BL
005b5876 : JZ 0x005b5894
005b5878 : MOV EAX,dword ptr [ESI + 0x30]
005b587b : SUB EAX,dword ptr [ESI + 0x2c]
005b587e : MOV byte ptr [ESI + 0x15],0x0
005b5882 : CMP EAX,0x4
005b5885 : JGE 0x005b5890
005b5887 : PUSH 0x4
005b5889 : MOV ECX,ESI
005b588b : CALL 0x00539fb0
005b5890 : ADD dword ptr [ESI + 0x2c],0x4
005b5894 : CMP byte ptr [ESP + 0x12],0x0
005b5899 : JZ 0x005b58b4
005b589b : MOV ECX,dword ptr [ESI + 0x30]
005b589e : SUB ECX,dword ptr [ESI + 0x2c]
005b58a1 : MOV byte ptr [ESI + 0x15],0x0
005b58a5 : CMP ECX,EBP
005b58a7 : JGE 0x005b58b1
005b58a9 : PUSH EBP
005b58aa : MOV ECX,ESI
005b58ac : CALL 0x00539fb0
005b58b1 : ADD dword ptr [ESI + 0x2c],EBP
005b58b4 : CMP byte ptr [ESP + 0x13],0x0
005b58b9 : JZ 0x005b5947
005b58bf : MOV EDX,dword ptr [ESI + 0x30]
005b58c2 : SUB EDX,dword ptr [ESI + 0x2c]
005b58c5 : MOV byte ptr [ESI + 0x15],0x0
005b58c9 : CMP EDX,0x1
005b58cc : JGE 0x005b58d5
005b58ce : MOV ECX,ESI
005b58d0 : CALL 0x0053a0a0
005b58d5 : MOV EAX,dword ptr [ESI + 0x2c]
005b58d8 : MOV ECX,dword ptr [ESI + 0x3c]
005b58db : MOV CL,byte ptr [EAX + ECX*0x1]
005b58de : INC EAX
005b58df : MOV dword ptr [ESI + 0x2c],EAX
005b58e2 : MOVZX EAX,CL
005b58e5 : TEST EAX,EAX
005b58e7 : JLE 0x005b5947
005b58e9 : MOV EDI,EAX
005b58eb : JMP 0x005b58f0
005b58f0 : MOV EDX,dword ptr [ESI + 0x30]
005b58f3 : SUB EDX,dword ptr [ESI + 0x2c]
005b58f6 : MOV byte ptr [ESI + 0x15],0x0
005b58fa : CMP EDX,0x4
005b58fd : JGE 0x005b5908
005b58ff : PUSH 0x4
005b5901 : MOV ECX,ESI
005b5903 : CALL 0x00539fb0
005b5908 : ADD dword ptr [ESI + 0x2c],0x4
005b590c : MOV EAX,dword ptr [ESI + 0x2c]
005b590f : MOV ECX,dword ptr [ESI + 0x30]
005b5912 : SUB ECX,EAX
005b5914 : CMP ECX,EBP
005b5916 : MOV byte ptr [ESI + 0x15],0x0
005b591a : JGE 0x005b5924
005b591c : PUSH EBP
005b591d : MOV ECX,ESI
005b591f : CALL 0x00539fb0
005b5924 : ADD dword ptr [ESI + 0x2c],EBP
005b5927 : MOV EAX,dword ptr [ESI + 0x2c]
005b592a : MOV EDX,dword ptr [ESI + 0x30]
005b592d : SUB EDX,EAX
005b592f : CMP EDX,EBP
005b5931 : MOV byte ptr [ESI + 0x15],0x0
005b5935 : JGE 0x005b593f
005b5937 : PUSH EBP
005b5938 : MOV ECX,ESI
005b593a : CALL 0x00539fb0
005b593f : ADD dword ptr [ESI + 0x2c],EBP
005b5942 : SUB EDI,0x1
005b5945 : JNZ 0x005b58f0
005b5947 : MOV EBX,dword ptr [ESP + 0x1c]
005b594b : SUB dword ptr [ESP + 0x14],0x1
005b5950 : JNZ 0x005b57b5
005b5956 : POP EDI
005b5957 : POP ESI
005b5958 : POP EBP
005b5959 : POP EBX
005b595a : ADD ESP,0x8
005b595d : RET
