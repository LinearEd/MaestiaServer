PROGRAM  : Maestia.exe
FUNCTION : FUN_0071e240
ENTRY    : 0071e240
BODY     : [[0071e240, 0071e4dc]]

============================================================
DECOMPILED C CODE
============================================================

char FUN_0071e240(float param_1)

{
  float *pfVar1;
  float *pfVar2;
  int in_ECX;
  undefined2 in_FPUControlWord;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined4 *puVar6;
  int iVar7;
  undefined4 uStack_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  float fStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  undefined4 uStack_60;
  undefined1 auStack_5c [20];
  undefined4 local_48 [17];
  
  if (*(char *)(in_ECX + 0x10) == '\0') {
    return '\x01';
  }
  iVar7 = *(int *)(in_ECX + 4);
  if (iVar7 == 0) {
    pfVar1 = (float *)(in_ECX + 0x5c);
    puVar6 = local_48;
    local_48[0] = 0;
    D3DXMatrixRotationAxis(puVar6,pfVar1,*(undefined4 *)(in_ECX + 0x80));
    fVar3 = 1.0;
    fVar5 = 0.0;
    fVar4 = fVar3;
    if (((*pfVar1 == 0.0) && (*(float *)(in_ECX + 0x60) == 1.0)) &&
       (*(float *)(in_ECX + 100) == 0.0)) {
      fVar4 = 0.0;
      fVar5 = fVar3;
    }
    pfVar2 = (float *)(in_ECX + 0x74);
    *(ulonglong *)pfVar2 =
         CONCAT44(*(float *)(in_ECX + 100) * 0.0 - *pfVar1 * fVar5,
                  *(float *)(in_ECX + 0x60) * fVar5 - *(float *)(in_ECX + 100) * fVar4);
    *(float *)(in_ECX + 0x7c) = *pfVar1 * fVar4 - *(float *)(in_ECX + 0x60) * 0.0;
    D3DXVec3Normalize(pfVar2,pfVar2);
    fVar4 = *(float *)(in_ECX + 0x58);
    *pfVar2 = *pfVar2 * fVar4;
    *(float *)(in_ECX + 0x78) = *(float *)(in_ECX + 0x78) * fVar4;
    *(float *)(in_ECX + 0x7c) = *(float *)(in_ECX + 0x7c) * fVar4;
    param_1 = param_1 + *(float *)(in_ECX + 0x84);
    fVar5 = *(float *)(in_ECX + 0x70) - *(float *)(in_ECX + 0x6c);
    *(float *)(in_ECX + 0x84) = param_1;
    fVar4 = param_1;
    if (fVar5 < param_1) {
      fVar4 = (float)CONCAT22((short)((uint)param_1 >> 0x10),in_FPUControlWord);
      iVar7 = (int)(longlong)ROUND(param_1 / fVar5);
      fVar3 = (float)iVar7;
      if (iVar7 < 0) {
        fVar3 = fVar3 + 4.2949673e+09;
      }
      *(float *)(in_ECX + 0x84) = param_1 - fVar3 * fVar5;
    }
    fVar3 = *(float *)(in_ECX + 0x84);
    if (fVar5 != 0.0) {
      fVar3 = fVar3 / fVar5;
    }
    fVar3 = fVar3 * 6.2831855;
    *(float *)(in_ECX + 0x80) = fVar3;
    fStack_6c = *pfVar2;
    uStack_68 = *(undefined4 *)(in_ECX + 0x78);
    uStack_64 = *(undefined4 *)(in_ECX + 0x7c);
    uStack_78 = 0;
    uStack_74 = 0;
    uStack_70 = 0;
    uStack_60 = 0x3f800000;
    D3DXMatrixRotationAxis(auStack_5c,pfVar1,fVar3);
    D3DXVec4Transform(&stack0xffffff78,&uStack_78,&uStack_68);
    pfVar1 = *(float **)(in_ECX + 0x50);
    *pfVar1 = *pfVar1 + (float)puVar6;
    pfVar1[1] = fVar4 + pfVar1[1];
    pfVar1[2] = fVar3 + pfVar1[2];
  }
  else if ((iVar7 != 1) && (iVar7 != 2)) {
    return (iVar7 != 4) * '\b' + '\b';
  }
  return '\x10';
}



============================================================
DISASSEMBLY
============================================================
0071e240 : PUSH EBP
0071e241 : MOV EBP,ESP
0071e243 : AND ESP,0xfffffff8
0071e246 : SUB ESP,0x74
0071e249 : PUSH EBX
0071e24a : PUSH ESI
0071e24b : MOV ESI,ECX
0071e24d : CMP byte ptr [ESI + 0x10],0x0
0071e251 : PUSH EDI
0071e252 : JNZ 0x0071e262
0071e254 : MOV EAX,0x1
0071e259 : POP EDI
0071e25a : POP ESI
0071e25b : POP EBX
0071e25c : MOV ESP,EBP
0071e25e : POP EBP
0071e25f : RET 0x4
0071e262 : MOV EAX,dword ptr [ESI + 0x4]
0071e265 : TEST EAX,EAX
0071e267 : JZ 0x0071e295
0071e269 : CMP EAX,0x1
0071e26c : JZ 0x0071e4cf
0071e272 : CMP EAX,0x2
0071e275 : JZ 0x0071e4cf
0071e27b : XOR ECX,ECX
0071e27d : CMP EAX,0x4
0071e280 : SETNZ CL
0071e283 : LEA ECX,[ECX*0x8 + 0x8]
0071e28a : MOV EAX,ECX
0071e28c : POP EDI
0071e28d : POP ESI
0071e28e : POP EBX
0071e28f : MOV ESP,EBP
0071e291 : POP EBP
0071e292 : RET 0x4
0071e295 : FLD float ptr [ESI + 0x80]
0071e29b : XORPS XMM0,XMM0
0071e29e : PUSH ECX
0071e29f : FSTP float ptr [ESP]
0071e2a2 : LEA EBX,[ESI + 0x5c]
0071e2a5 : PUSH EBX
0071e2a6 : LEA EDX,[ESP + 0x48]
0071e2aa : PUSH EDX
0071e2ab : MOVSS dword ptr [ESP + 0x4c],XMM0
0071e2b1 : CALL 0x004ff746
0071e2b6 : XORPS XMM3,XMM3
0071e2b9 : MOVSS XMM1,dword ptr [EBX]
0071e2bd : MOVSS XMM0,dword ptr [0x00c10fc4]
0071e2c5 : UCOMISS XMM1,XMM3
0071e2c8 : LAHF
0071e2c9 : MOVAPS XMM4,XMM0
0071e2cc : MOVAPS XMM5,XMM3
0071e2cf : TEST AH,0x44
0071e2d2 : JP 0x0071e2f6
0071e2d4 : MOVSS XMM1,dword ptr [EBX + 0x4]
0071e2d9 : UCOMISS XMM1,XMM0
0071e2dc : LAHF
0071e2dd : TEST AH,0x44
0071e2e0 : JP 0x0071e2f6
0071e2e2 : MOVSS XMM1,dword ptr [EBX + 0x8]
0071e2e7 : UCOMISS XMM1,XMM3
0071e2ea : LAHF
0071e2eb : TEST AH,0x44
0071e2ee : JP 0x0071e2f6
0071e2f0 : MOVAPS XMM4,XMM3
0071e2f3 : MOVAPS XMM5,XMM0
0071e2f6 : MOVSS XMM0,dword ptr [EBX + 0x8]
0071e2fb : MOVSS XMM2,dword ptr [EBX + 0x4]
0071e300 : MOVAPS XMM6,XMM0
0071e303 : MOVAPS XMM1,XMM2
0071e306 : MULSS XMM1,XMM5
0071e30a : MULSS XMM6,XMM4
0071e30e : SUBSS XMM1,XMM6
0071e312 : MOVSS dword ptr [ESP + 0x10],XMM1
0071e318 : MOVSS XMM1,dword ptr [EBX]
0071e31c : MOVAPS XMM6,XMM1
0071e31f : LEA EDI,[ESI + 0x74]
0071e322 : MULSS XMM0,XMM3
0071e326 : MULSS XMM6,XMM5
0071e32a : SUBSS XMM0,XMM6
0071e32e : MULSS XMM1,XMM4
0071e332 : MULSS XMM2,XMM3
0071e336 : SUBSS XMM1,XMM2
0071e33a : MOVSS dword ptr [ESP + 0x14],XMM0
0071e340 : MOVQ XMM0,qword ptr [ESP + 0x10]
0071e346 : MOVSS dword ptr [ESP + 0x18],XMM1
0071e34c : MOV EAX,dword ptr [ESP + 0x18]
0071e350 : PUSH EDI
0071e351 : MOVQ qword ptr [EDI],XMM0
0071e355 : PUSH EDI
0071e356 : MOV dword ptr [EDI + 0x8],EAX
0071e359 : CALL 0x004ff722
0071e35e : MOVSS XMM0,dword ptr [ESI + 0x58]
0071e363 : MOVSS XMM1,dword ptr [EDI]
0071e367 : MULSS XMM1,XMM0
0071e36b : MOVSS dword ptr [EDI],XMM1
0071e36f : MOVSS XMM1,dword ptr [EDI + 0x4]
0071e374 : MULSS XMM1,XMM0
0071e378 : MOVSS dword ptr [EDI + 0x4],XMM1
0071e37d : MOVSS XMM1,dword ptr [EDI + 0x8]
0071e382 : MULSS XMM1,XMM0
0071e386 : MOVSS XMM0,dword ptr [EBP + 0x8]
0071e38b : MOVSS dword ptr [EDI + 0x8],XMM1
0071e390 : ADDSS XMM0,dword ptr [ESI + 0x84]
0071e398 : MOVSS XMM1,dword ptr [ESI + 0x70]
0071e39d : SUBSS XMM1,dword ptr [ESI + 0x6c]
0071e3a2 : COMISS XMM0,XMM1
0071e3a5 : MOVSS dword ptr [ESP + 0x10],XMM1
0071e3ab : MOVSS dword ptr [ESP + 0xc],XMM0
0071e3b1 : MOVSS dword ptr [ESI + 0x84],XMM0
0071e3b9 : JBE 0x0071e403
0071e3bb : FLD float ptr [ESP + 0xc]
0071e3bf : FNSTCW word ptr [ESP + 0xc]
0071e3c3 : MOVZX EAX,word ptr [ESP + 0xc]
0071e3c8 : FLD ST0
0071e3ca : FLD float ptr [ESP + 0x10]
0071e3ce : OR EAX,0xc00
0071e3d3 : FDIV ST1,ST0
0071e3d5 : MOV dword ptr [ESP + 0x10],EAX
0071e3d9 : FLDCW word ptr [ESP + 0x10]
0071e3dd : FXCH
0071e3df : FISTP qword ptr [ESP + 0x10]
0071e3e3 : MOV ECX,dword ptr [ESP + 0x10]
0071e3e7 : FLDCW word ptr [ESP + 0xc]
0071e3eb : FILD dword ptr [ESP + 0x10]
0071e3ef : TEST ECX,ECX
0071e3f1 : JGE 0x0071e3f9
0071e3f3 : FADD float ptr [0x00cdf0e0]
0071e3f9 : FMULP
0071e3fb : FSUBP
0071e3fd : FSTP float ptr [ESI + 0x84]
0071e403 : XORPS XMM2,XMM2
0071e406 : MOVSS XMM0,dword ptr [ESI + 0x84]
0071e40e : UCOMISS XMM1,XMM2
0071e411 : LAHF
0071e412 : TEST AH,0x44
0071e415 : JNP 0x0071e41b
0071e417 : DIVSS XMM0,XMM1
0071e41b : MULSS XMM0,dword ptr [0x00c1884c]
0071e423 : MOVSS dword ptr [ESP + 0x10],XMM0
0071e429 : FLD float ptr [ESP + 0x10]
0071e42d : MOVSS dword ptr [ESI + 0x80],XMM0
0071e435 : MOVSS XMM0,dword ptr [EDI]
0071e439 : MOVSS dword ptr [ESP + 0x30],XMM0
0071e43f : MOVSS XMM0,dword ptr [ESI + 0x78]
0071e444 : PUSH ECX
0071e445 : FSTP float ptr [ESP]
0071e448 : MOVSS dword ptr [ESP + 0x38],XMM0
0071e44e : MOVSS XMM0,dword ptr [ESI + 0x7c]
0071e453 : PUSH EBX
0071e454 : LEA EDX,[ESP + 0x48]
0071e458 : MOVSS dword ptr [ESP + 0x40],XMM0
0071e45e : MOVSS XMM0,dword ptr [0x00c10fc4]
0071e466 : PUSH EDX
0071e467 : MOVSS dword ptr [ESP + 0x2c],XMM2
0071e46d : MOVSS dword ptr [ESP + 0x30],XMM2
0071e473 : MOVSS dword ptr [ESP + 0x34],XMM2
0071e479 : MOVSS dword ptr [ESP + 0x38],XMM2
0071e47f : MOVSS dword ptr [ESP + 0x48],XMM0
0071e485 : CALL 0x004ff746
0071e48a : LEA EAX,[ESP + 0x40]
0071e48e : PUSH EAX
0071e48f : LEA ECX,[ESP + 0x34]
0071e493 : PUSH ECX
0071e494 : LEA EDX,[ESP + 0x28]
0071e498 : PUSH EDX
0071e499 : CALL 0x004ff74c
0071e49e : MOV ESI,dword ptr [ESI + 0x50]
0071e4a1 : MOVSS XMM0,dword ptr [ESP + 0x24]
0071e4a7 : MOVSS XMM1,dword ptr [ESP + 0x28]
0071e4ad : MOVSS XMM2,dword ptr [ESI]
0071e4b1 : ADDSS XMM2,dword ptr [ESP + 0x20]
0071e4b7 : ADDSS XMM0,dword ptr [ESI + 0x4]
0071e4bc : ADDSS XMM1,dword ptr [ESI + 0x8]
0071e4c1 : MOVSS dword ptr [ESI],XMM2
0071e4c5 : MOVSS dword ptr [ESI + 0x4],XMM0
0071e4ca : MOVSS dword ptr [ESI + 0x8],XMM1
0071e4cf : POP EDI
0071e4d0 : POP ESI
0071e4d1 : MOV EAX,0x10
0071e4d6 : POP EBX
0071e4d7 : MOV ESP,EBP
0071e4d9 : POP EBP
0071e4da : RET 0x4
