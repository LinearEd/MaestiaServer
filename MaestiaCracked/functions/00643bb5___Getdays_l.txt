PROGRAM  : Maestia.exe
FUNCTION : __Getdays_l
ENTRY    : 00643bb5
BODY     : [[00643bb5, 00643c4e] [00643c52, 00643c87] [00643c8b, 00643cb4]]

============================================================
DECOMPILED C CODE
============================================================

/* Library Function - Single Match
    __Getdays_l
   
   Library: Visual Studio 2008 Release */

char * __Getdays_l(localeinfo_struct *param_1)

{
  int iVar1;
  size_t sVar2;
  char *pcVar3;
  errno_t eVar4;
  int iVar5;
  int iVar6;
  int local_1c [2];
  int local_14;
  char local_10;
  char *local_c;
  uint local_8;
  
  iVar5 = 0;
  _LocaleUpdate::_LocaleUpdate((_LocaleUpdate *)local_1c,param_1);
  iVar1 = *(int *)(local_1c[0] + 0xd4);
  local_8 = 0;
  do {
    iVar6 = local_8 * 4;
    local_c = (char *)_strlen(*(char **)(iVar6 + 0x1c + iVar1));
    sVar2 = _strlen(*(char **)(iVar6 + iVar1));
    local_8 = local_8 + 1;
    iVar5 = sVar2 + iVar5 + 2 + (int)local_c;
  } while (local_8 < 7);
  pcVar3 = __malloc_crt(iVar5 + 1);
  local_c = pcVar3;
  if (pcVar3 != (char *)0x0) {
    local_8 = 0;
    do {
      *pcVar3 = ':';
      pcVar3 = pcVar3 + 1;
      eVar4 = _strcpy_s(pcVar3,(rsize_t)(local_c + iVar5 + (1 - (int)pcVar3)),
                        *(char **)(iVar1 + local_8 * 4));
      if (eVar4 != 0) {
                    /* WARNING: Subroutine does not return */
        __invoke_watson((wchar_t *)0x0,(wchar_t *)0x0,(wchar_t *)0x0,0,0);
      }
      sVar2 = _strlen(pcVar3);
      pcVar3[sVar2] = ':';
      pcVar3 = pcVar3 + sVar2 + 1;
      eVar4 = _strcpy_s(pcVar3,(rsize_t)(local_c + iVar5 + (1 - (int)pcVar3)),
                        *(char **)(iVar1 + 0x1c + local_8 * 4));
      if (eVar4 != 0) {
                    /* WARNING: Subroutine does not return */
        __invoke_watson((wchar_t *)0x0,(wchar_t *)0x0,(wchar_t *)0x0,0,0);
      }
      sVar2 = _strlen(pcVar3);
      pcVar3 = pcVar3 + sVar2;
      local_8 = local_8 + 1;
    } while (local_8 < 7);
    *pcVar3 = '\0';
  }
  if (local_10 != '\0') {
    *(uint *)(local_14 + 0x70) = *(uint *)(local_14 + 0x70) & 0xfffffffd;
  }
  return local_c;
}



============================================================
DISASSEMBLY
============================================================
00643bb5 : MOV EDI,EDI
00643bb7 : PUSH EBP
00643bb8 : MOV EBP,ESP
00643bba : SUB ESP,0x18
00643bbd : PUSH EBX
00643bbe : PUSH ESI
00643bbf : PUSH EDI
00643bc0 : PUSH dword ptr [EBP + 0x8]
00643bc3 : LEA ECX,[EBP + -0x18]
00643bc6 : XOR EBX,EBX
00643bc8 : CALL 0x00637880
00643bcd : MOV EAX,dword ptr [EBP + -0x18]
00643bd0 : MOV EDI,dword ptr [EAX + 0xd4]
00643bd6 : MOV dword ptr [EBP + -0x4],EBX
00643bd9 : MOV ESI,dword ptr [EBP + -0x4]
00643bdc : SHL ESI,0x2
00643bdf : PUSH dword ptr [ESI + EDI*0x1 + 0x1c]
00643be3 : CALL 0x00640960
00643be8 : PUSH dword ptr [ESI + EDI*0x1]
00643beb : MOV dword ptr [EBP + -0x8],EAX
00643bee : CALL 0x00640960
00643bf3 : ADD EAX,EBX
00643bf5 : INC dword ptr [EBP + -0x4]
00643bf8 : CMP dword ptr [EBP + -0x4],0x7
00643bfc : POP ECX
00643bfd : POP ECX
00643bfe : MOV ECX,dword ptr [EBP + -0x8]
00643c01 : LEA EBX,[EAX + ECX*0x1 + 0x2]
00643c05 : JC 0x00643bd9
00643c07 : LEA EAX,[EBX + 0x1]
00643c0a : PUSH EAX
00643c0b : CALL 0x0064255f
00643c10 : MOV ESI,EAX
00643c12 : POP ECX
00643c13 : MOV dword ptr [EBP + -0x8],ESI
00643c16 : TEST ESI,ESI
00643c18 : JZ 0x00643ca0
00643c1e : AND dword ptr [EBP + -0x4],0x0
00643c22 : MOV EAX,dword ptr [EBP + -0x4]
00643c25 : MOV byte ptr [ESI],0x3a
00643c28 : PUSH dword ptr [EDI + EAX*0x4]
00643c2b : MOV EAX,dword ptr [EBP + -0x8]
00643c2e : INC ESI
00643c2f : SUB EAX,ESI
00643c31 : LEA EAX,[EAX + EBX*0x1 + 0x1]
00643c35 : PUSH EAX
00643c36 : PUSH ESI
00643c37 : CALL 0x00638300
00643c3c : ADD ESP,0xc
00643c3f : TEST EAX,EAX
00643c41 : JZ 0x00643c52
00643c43 : XOR EAX,EAX
00643c45 : PUSH EAX
00643c46 : PUSH EAX
00643c47 : PUSH EAX
00643c48 : PUSH EAX
00643c49 : PUSH EAX
00643c4a : CALL 0x00637169
00643c52 : PUSH ESI
00643c53 : CALL 0x00640960
00643c58 : ADD ESI,EAX
00643c5a : MOV EAX,dword ptr [EBP + -0x4]
00643c5d : MOV byte ptr [ESI],0x3a
00643c60 : PUSH dword ptr [EDI + EAX*0x4 + 0x1c]
00643c64 : MOV EAX,dword ptr [EBP + -0x8]
00643c67 : INC ESI
00643c68 : SUB EAX,ESI
00643c6a : LEA EAX,[EAX + EBX*0x1 + 0x1]
00643c6e : PUSH EAX
00643c6f : PUSH ESI
00643c70 : CALL 0x00638300
00643c75 : ADD ESP,0x10
00643c78 : TEST EAX,EAX
00643c7a : JZ 0x00643c8b
00643c7c : XOR EAX,EAX
00643c7e : PUSH EAX
00643c7f : PUSH EAX
00643c80 : PUSH EAX
00643c81 : PUSH EAX
00643c82 : PUSH EAX
00643c83 : CALL 0x00637169
00643c8b : PUSH ESI
00643c8c : CALL 0x00640960
00643c91 : ADD ESI,EAX
00643c93 : INC dword ptr [EBP + -0x4]
00643c96 : CMP dword ptr [EBP + -0x4],0x7
00643c9a : POP ECX
00643c9b : JC 0x00643c22
00643c9d : MOV byte ptr [ESI],0x0
00643ca0 : CMP byte ptr [EBP + -0xc],0x0
00643ca4 : POP EDI
00643ca5 : POP ESI
00643ca6 : POP EBX
00643ca7 : JZ 0x00643cb0
00643ca9 : MOV EAX,dword ptr [EBP + -0x10]
00643cac : AND dword ptr [EAX + 0x70],0xfffffffd
00643cb0 : MOV EAX,dword ptr [EBP + -0x8]
00643cb3 : LEAVE
00643cb4 : RET
