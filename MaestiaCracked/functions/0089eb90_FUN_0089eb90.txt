PROGRAM  : Maestia.exe
FUNCTION : FUN_0089eb90
ENTRY    : 0089eb90
BODY     : [[0089eb90, 0089edee]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0089eb90(int param_1,int param_2,undefined1 *param_3)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  short *psVar6;
  int iVar7;
  int in_ECX;
  uint local_64;
  uint local_48;
  uint local_2c;
  int local_20;
  int local_1c;
  int local_18;
  undefined1 local_11;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b16824;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_11 = 0;
  iVar3 = FUN_0089e520(in_ECX,&local_18,&local_1c,&DAT_00c48548);
  uVar4 = FUN_0089e8a0(iVar3);
  local_8 = 0;
  iVar5 = FUN_0089eaa0(uVar4);
  local_8 = 0xffffffff;
  if (7 < local_2c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0(uVar2);
  }
  local_20 = 0;
  iVar3 = iVar3 + local_1c * 2;
  iVar1 = in_ECX * 2;
  do {
    local_8 = 0xffffffff;
    psVar6 = (short *)FUN_0089e520((iVar1 - iVar3) + param_2 >> 1,&local_18,&local_1c,&DAT_00c48550)
    ;
    if (psVar6 == (short *)0x0) break;
    if ((local_18 == 1) && (*psVar6 == 0x2f)) {
      local_11 = 1;
      break;
    }
    iVar3 = FUN_006f0760(0x3c,"",0,(DAT_01725270 >> 3 & 1) == 0);
    local_8 = 1;
    if (iVar3 == 0) {
      iVar7 = 0;
    }
    else {
      iVar7 = FUN_00439c10(iVar3);
    }
    local_8 = 0xffffffff;
    *(undefined4 *)(iVar7 + 0x38) = 0;
    uVar4 = FUN_0089e8a0(psVar6);
    local_8 = 2;
    FUN_00405eb0(uVar4,0,0xffffffff);
    local_8 = 0xffffffff;
    if (7 < local_48) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_48 = 7;
    psVar6 = (short *)FUN_0089e520((iVar1 - (int)(psVar6 + local_1c)) + param_2 >> 1,&local_18,
                                   &local_1c,&DAT_00c48558);
    if (*psVar6 != 0x3d) {
      *(undefined **)(param_1 + 0x48) = &DAT_00c48560;
      ExceptionList = local_10;
      return 0;
    }
    iVar3 = FUN_0089e520((iVar1 - (int)(psVar6 + local_1c)) + param_2 >> 1,&local_18,&local_1c,
                         &DAT_00c485ac);
    uVar4 = FUN_0089e8a0(iVar3);
    local_8 = 3;
    FUN_00405eb0(uVar4,0,0xffffffff);
    local_8 = 0xffffffff;
    if (7 < local_64) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar3 = iVar3 + local_1c * 2;
    local_64 = 7;
    if (local_20 == 0) {
      *(int *)(iVar5 + 0x44) = iVar7;
    }
    else {
      *(int *)(local_20 + 0x38) = iVar7;
    }
    *(undefined4 *)(iVar7 + 0x38) = 0;
    local_20 = iVar7;
  } while (iVar3 != 0);
  *param_3 = local_11;
  ExceptionList = local_10;
  return iVar5;
}



============================================================
DISASSEMBLY
============================================================
0089eb90 : PUSH EBP
0089eb91 : MOV EBP,ESP
0089eb93 : PUSH -0x1
0089eb95 : PUSH 0xb16824
0089eb9a : MOV EAX,FS:[0x0]
0089eba0 : PUSH EAX
0089eba1 : SUB ESP,0x6c
0089eba4 : PUSH EBX
0089eba5 : PUSH ESI
0089eba6 : PUSH EDI
0089eba7 : MOV EAX,[0x00d66fa0]
0089ebac : XOR EAX,EBP
0089ebae : PUSH EAX
0089ebaf : LEA EAX,[EBP + -0xc]
0089ebb2 : MOV FS:[0x0],EAX
0089ebb8 : MOV EDI,ECX
0089ebba : PUSH 0xc48548
0089ebbf : LEA EAX,[EBP + -0x18]
0089ebc2 : PUSH EAX
0089ebc3 : MOV EAX,dword ptr [EBP + 0xc]
0089ebc6 : LEA ECX,[EBP + -0x14]
0089ebc9 : PUSH ECX
0089ebca : PUSH EDI
0089ebcb : MOV byte ptr [EBP + -0xd],0x0
0089ebcf : CALL 0x0089e520
0089ebd4 : MOV EDX,dword ptr [EBP + -0x14]
0089ebd7 : MOV ESI,EAX
0089ebd9 : PUSH ESI
0089ebda : LEA ECX,[EBP + -0x40]
0089ebdd : CALL 0x0089e8a0
0089ebe2 : XOR EBX,EBX
0089ebe4 : MOV dword ptr [EBP + -0x4],EBX
0089ebe7 : PUSH EAX
0089ebe8 : CALL 0x0089eaa0
0089ebed : MOV dword ptr [EBP + -0x20],EAX
0089ebf0 : MOV dword ptr [EBP + -0x4],0xffffffff
0089ebf7 : CMP dword ptr [EBP + -0x28],0x8
0089ebfb : JC 0x0089ec05
0089ebfd : MOV ECX,dword ptr [EBP + -0x3c]
0089ec00 : CALL 0x006f04e0
0089ec05 : MOV EAX,dword ptr [EBP + -0x18]
0089ec08 : XOR EDX,EDX
0089ec0a : MOV dword ptr [EBP + -0x2c],EBX
0089ec0d : MOV dword ptr [EBP + -0x1c],EBX
0089ec10 : MOV dword ptr [EBP + -0x28],0x7
0089ec17 : MOV word ptr [EBP + -0x3c],DX
0089ec1b : LEA EAX,[ESI + EAX*0x2]
0089ec1e : LEA EBX,[EDI + EDI*0x1]
0089ec21 : PUSH 0xc48550
0089ec26 : LEA ECX,[EBP + -0x18]
0089ec29 : PUSH ECX
0089ec2a : MOV ECX,EBX
0089ec2c : SUB ECX,EAX
0089ec2e : ADD ECX,dword ptr [EBP + 0xc]
0089ec31 : LEA EDX,[EBP + -0x14]
0089ec34 : PUSH EDX
0089ec35 : SAR ECX,0x1
0089ec37 : PUSH ECX
0089ec38 : CALL 0x0089e520
0089ec3d : MOV EDI,EAX
0089ec3f : TEST EDI,EDI
0089ec41 : JZ 0x0089edaa
0089ec47 : MOV ESI,0x1
0089ec4c : CMP dword ptr [EBP + -0x14],ESI
0089ec4f : JNZ 0x0089ec5b
0089ec51 : CMP word ptr [EDI],0x2f
0089ec55 : JZ 0x0089edc9
0089ec5b : MOV EDX,dword ptr [0x01725270]
0089ec61 : SHR EDX,0x3
0089ec64 : MOV EAX,0x0
0089ec69 : AND EDX,ESI
0089ec6b : SETZ AL
0089ec6e : PUSH EAX
0089ec6f : PUSH 0x0
0089ec71 : PUSH 0xbf1a4a
0089ec76 : PUSH 0x3c
0089ec78 : CALL 0x006f0760
0089ec7d : ADD ESP,0x10
0089ec80 : MOV dword ptr [EBP + -0x24],EAX
0089ec83 : MOV dword ptr [EBP + -0x4],ESI
0089ec86 : TEST EAX,EAX
0089ec88 : JZ 0x0089ec94
0089ec8a : PUSH EAX
0089ec8b : CALL 0x00439c10
0089ec90 : MOV ESI,EAX
0089ec92 : JMP 0x0089ec96
0089ec94 : XOR ESI,ESI
0089ec96 : MOV dword ptr [EBP + -0x4],0xffffffff
0089ec9d : MOV EDX,dword ptr [EBP + -0x14]
0089eca0 : PUSH EDI
0089eca1 : LEA ECX,[EBP + -0x5c]
0089eca4 : MOV dword ptr [ESI + 0x38],0x0
0089ecab : CALL 0x0089e8a0
0089ecb0 : MOV dword ptr [EBP + -0x4],0x2
0089ecb7 : PUSH -0x1
0089ecb9 : PUSH 0x0
0089ecbb : PUSH EAX
0089ecbc : MOV ECX,ESI
0089ecbe : CALL 0x00405eb0
0089ecc3 : MOV dword ptr [EBP + -0x4],0xffffffff
0089ecca : CMP dword ptr [EBP + -0x44],0x8
0089ecce : JC 0x0089ecd8
0089ecd0 : MOV ECX,dword ptr [EBP + -0x58]
0089ecd3 : CALL 0x006f04e0
0089ecd8 : MOV EDX,dword ptr [EBP + -0x18]
0089ecdb : XOR ECX,ECX
0089ecdd : MOV word ptr [EBP + -0x58],CX
0089ece1 : PUSH 0xc48558
0089ece6 : LEA ECX,[EBP + -0x18]
0089ece9 : PUSH ECX
0089ecea : LEA EAX,[EDI + EDX*0x2]
0089eced : MOV EDI,dword ptr [EBP + 0xc]
0089ecf0 : MOV ECX,EBX
0089ecf2 : SUB ECX,EAX
0089ecf4 : LEA EDX,[EBP + -0x14]
0089ecf7 : ADD ECX,EDI
0089ecf9 : PUSH EDX
0089ecfa : SAR ECX,0x1
0089ecfc : PUSH ECX
0089ecfd : MOV dword ptr [EBP + -0x44],0x7
0089ed04 : MOV dword ptr [EBP + -0x48],0x0
0089ed0b : CALL 0x0089e520
0089ed10 : CMP word ptr [EAX],0x3d
0089ed14 : JNZ 0x0089edcf
0089ed1a : MOV EDX,dword ptr [EBP + -0x18]
0089ed1d : PUSH 0xc485ac
0089ed22 : LEA ECX,[EBP + -0x18]
0089ed25 : PUSH ECX
0089ed26 : LEA EAX,[EAX + EDX*0x2]
0089ed29 : MOV ECX,EBX
0089ed2b : SUB ECX,EAX
0089ed2d : LEA EDX,[EBP + -0x14]
0089ed30 : ADD ECX,EDI
0089ed32 : PUSH EDX
0089ed33 : SAR ECX,0x1
0089ed35 : PUSH ECX
0089ed36 : CALL 0x0089e520
0089ed3b : MOV EDX,dword ptr [EBP + -0x14]
0089ed3e : MOV EDI,EAX
0089ed40 : PUSH EDI
0089ed41 : LEA ECX,[EBP + -0x78]
0089ed44 : CALL 0x0089e8a0
0089ed49 : MOV dword ptr [EBP + -0x4],0x3
0089ed50 : PUSH -0x1
0089ed52 : PUSH 0x0
0089ed54 : PUSH EAX
0089ed55 : LEA ECX,[ESI + 0x1c]
0089ed58 : CALL 0x00405eb0
0089ed5d : MOV dword ptr [EBP + -0x4],0xffffffff
0089ed64 : CMP dword ptr [EBP + -0x60],0x8
0089ed68 : JC 0x0089ed72
0089ed6a : MOV ECX,dword ptr [EBP + -0x74]
0089ed6d : CALL 0x006f04e0
0089ed72 : MOV ECX,dword ptr [EBP + -0x18]
0089ed75 : XOR EAX,EAX
0089ed77 : MOV word ptr [EBP + -0x74],AX
0089ed7b : XOR EDX,EDX
0089ed7d : LEA EAX,[EDI + ECX*0x2]
0089ed80 : MOV ECX,dword ptr [EBP + -0x1c]
0089ed83 : MOV dword ptr [EBP + -0x60],0x7
0089ed8a : MOV dword ptr [EBP + -0x64],EDX
0089ed8d : CMP ECX,EDX
0089ed8f : JNZ 0x0089ed99
0089ed91 : MOV ECX,dword ptr [EBP + -0x20]
0089ed94 : MOV dword ptr [ECX + 0x44],ESI
0089ed97 : JMP 0x0089ed9c
0089ed99 : MOV dword ptr [ECX + 0x38],ESI
0089ed9c : MOV dword ptr [ESI + 0x38],EDX
0089ed9f : MOV dword ptr [EBP + -0x1c],ESI
0089eda2 : CMP EAX,EDX
0089eda4 : JNZ 0x0089ec21
0089edaa : MOV EAX,dword ptr [EBP + 0x10]
0089edad : MOV CL,byte ptr [EBP + -0xd]
0089edb0 : MOV byte ptr [EAX],CL
0089edb2 : MOV EAX,dword ptr [EBP + -0x20]
0089edb5 : MOV ECX,dword ptr [EBP + -0xc]
0089edb8 : MOV dword ptr FS:[0x0],ECX
0089edbf : POP ECX
0089edc0 : POP EDI
0089edc1 : POP ESI
0089edc2 : POP EBX
0089edc3 : MOV ESP,EBP
0089edc5 : POP EBP
0089edc6 : RET 0xc
0089edc9 : MOV byte ptr [EBP + -0xd],0x1
0089edcd : JMP 0x0089edaa
0089edcf : MOV EDX,dword ptr [EBP + 0x8]
0089edd2 : MOV dword ptr [EDX + 0x48],0xc48560
0089edd9 : XOR EAX,EAX
0089eddb : MOV ECX,dword ptr [EBP + -0xc]
0089edde : MOV dword ptr FS:[0x0],ECX
0089ede5 : POP ECX
0089ede6 : POP EDI
0089ede7 : POP ESI
0089ede8 : POP EBX
0089ede9 : MOV ESP,EBP
0089edeb : POP EBP
0089edec : RET 0xc
