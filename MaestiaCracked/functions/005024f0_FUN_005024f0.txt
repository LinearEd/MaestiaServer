PROGRAM  : Maestia.exe
FUNCTION : FUN_005024f0
ENTRY    : 005024f0
BODY     : [[005024f0, 00502a7f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005024f0(int param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int in_ECX;
  GThread *this;
  GThread *pGVar10;
  GThread *this_00;
  GThread *extraout_ECX;
  GThread *extraout_ECX_00;
  ushort uVar11;
  int iVar12;
  int local_48;
  GRefCountImpl *local_44;
  
  iVar12 = *(int *)(param_1 + 0x314);
  if (iVar12 == 0) {
    iVar12 = param_1 + 0x28;
  }
  FUN_0053b000();
  GThread::OnExit(this);
  *(undefined1 *)(iVar12 + 0x15) = 0;
  iVar4 = FUN_0053a880();
  iVar5 = FUN_0053a880();
  if (iVar5 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xfffe;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 1;
  }
  iVar5 = FUN_0053a880();
  if (iVar5 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xfffd;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 2;
  }
  iVar5 = FUN_0053a880();
  if (iVar5 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xfffb;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 4;
  }
  iVar5 = FUN_0053a880();
  if (iVar5 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xfff7;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 8;
  }
  GThread::OnExit((GThread *)(*(ushort *)(in_ECX + 0x50) >> 3 & 1));
  iVar5 = FUN_0053a880();
  iVar6 = FUN_0053a880();
  iVar7 = FUN_0053a880();
  FUN_0053a880();
  iVar8 = FUN_0053a880();
  if (iVar8 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xffef;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x10;
  }
  iVar8 = FUN_0053a880();
  iVar9 = FUN_0053a880();
  if (iVar9 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x20;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xffdf;
  }
  iVar9 = FUN_0053a880();
  if (iVar9 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xffbf;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x40;
  }
  FUN_0053a880();
  iVar9 = FUN_0053a880();
  if (iVar9 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xff7f;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x80;
  }
  iVar9 = FUN_0053a880();
  if (iVar9 == 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x100;
  }
  else {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) & 0xfeff;
  }
  GThread::OnExit((GThread *)(*(ushort *)(in_ECX + 0x50) >> 5 & 1));
  if (iVar7 != 0) {
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar7 = *(int *)(iVar12 + 0x2c);
    uVar1 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar7);
    uVar2 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar7);
    *(int *)(iVar12 + 0x2c) = iVar7 + 2;
    *(uint *)(in_ECX + 0x18) = (uint)CONCAT11(uVar1,uVar2);
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar7 = *(int *)(iVar12 + 0x2c);
    pGVar10 = (GThread *)
              (uint)CONCAT11(*(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar7),
                             *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar7));
    *(int *)(iVar12 + 0x2c) = iVar7 + 2;
    *(float *)(in_ECX + 0x2c) = (float)(int)pGVar10;
    GThread::OnExit(pGVar10);
    local_48 = 0;
    local_44 = (GRefCountImpl *)0x0;
    FUN_00565560(&local_48,*(undefined4 *)(in_ECX + 0x18));
    if ((local_48 == 0) && (local_44 != (GRefCountImpl *)0x0)) {
      GRefCountImpl::AddRef(local_44);
    }
    if ((*(int *)(in_ECX + 0x10) == 0) && (*(int *)(in_ECX + 0x14) != 0)) {
      FUN_00524240();
    }
    *(int *)(in_ECX + 0x10) = local_48;
    *(GRefCountImpl **)(in_ECX + 0x14) = local_44;
    if ((local_48 == 0) && (local_44 != (GRefCountImpl *)0x0)) {
      FUN_00524240();
    }
  }
  if (iVar5 != 0) {
    FUN_0053b150();
    GThread::OnExit(this_00);
  }
  if (iVar6 != 0) {
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    pGVar10 = (GThread *)(uint)*(ushort *)(*(int *)(iVar12 + 0x3c) + *(int *)(iVar12 + 0x2c));
    *(int *)(iVar12 + 0x2c) = *(int *)(iVar12 + 0x2c) + 2;
    *(GThread **)(in_ECX + 0x34) = pGVar10;
    GThread::OnExit(pGVar10);
  }
  if (iVar8 != 0) {
    *(ushort *)(in_ECX + 0x50) = *(ushort *)(in_ECX + 0x50) | 0x200;
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 1) {
      FUN_0053a0a0();
    }
    bVar3 = *(byte *)(*(int *)(iVar12 + 0x2c) + *(int *)(iVar12 + 0x3c));
    *(int *)(iVar12 + 0x2c) = *(int *)(iVar12 + 0x2c) + 1;
    *(uint *)(in_ECX + 0x54) = (uint)bVar3;
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar5 = *(int *)(iVar12 + 0x2c);
    uVar1 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar5);
    uVar2 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar5);
    *(int *)(iVar12 + 0x2c) = iVar5 + 2;
    *(float *)(in_ECX + 0x38) = (float)CONCAT11(uVar1,uVar2);
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar5 = *(int *)(iVar12 + 0x2c);
    uVar1 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar5);
    uVar2 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar5);
    *(int *)(iVar12 + 0x2c) = iVar5 + 2;
    *(float *)(in_ECX + 0x3c) = (float)CONCAT11(uVar1,uVar2);
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar5 = *(int *)(iVar12 + 0x2c);
    uVar1 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar5);
    uVar2 = *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar5);
    *(int *)(iVar12 + 0x2c) = iVar5 + 2;
    *(float *)(in_ECX + 0x40) = (float)(int)CONCAT11(uVar1,uVar2);
    *(undefined1 *)(iVar12 + 0x15) = 0;
    if (*(int *)(iVar12 + 0x30) - *(int *)(iVar12 + 0x2c) < 2) {
      FUN_00539fb0();
    }
    iVar5 = *(int *)(iVar12 + 0x2c);
    uVar11 = CONCAT11(*(undefined1 *)(*(int *)(iVar12 + 0x3c) + 1 + iVar5),
                      *(undefined1 *)(*(int *)(iVar12 + 0x3c) + iVar5));
    *(int *)(iVar12 + 0x2c) = iVar5 + 2;
    *(float *)(in_ECX + 0x44) = (float)(int)(short)uVar11;
    GThread::OnExit((GThread *)(uint)uVar11);
  }
  FUN_0053b190();
  pGVar10 = extraout_ECX;
  if (iVar4 != 0) {
    FUN_0053b190();
    pGVar10 = extraout_ECX_00;
  }
  GThread::OnExit(pGVar10);
  return;
}



============================================================
DISASSEMBLY
============================================================
005024f0 : PUSH EBP
005024f1 : MOV EBP,ESP
005024f3 : AND ESP,0xffffffc0
005024f6 : SUB ESP,0x34
005024f9 : PUSH EBX
005024fa : PUSH ESI
005024fb : MOV ESI,dword ptr [EBP + 0x8]
005024fe : MOV EAX,dword ptr [ESI + 0x314]
00502504 : PUSH EDI
00502505 : MOV EDI,ECX
00502507 : TEST EAX,EAX
00502509 : JNZ 0x00502510
0050250b : ADD ESI,0x28
0050250e : JMP 0x00502512
00502510 : MOV ESI,EAX
00502512 : LEA EBX,[EDI + 0x1c]
00502515 : PUSH EBX
00502516 : MOV ECX,ESI
00502518 : CALL 0x0053b000
0050251d : FLD float ptr [EDI + 0x28]
00502520 : SUB ESP,0x20
00502523 : FSTP double ptr [ESP + 0x18]
00502527 : FLD float ptr [EDI + 0x24]
0050252a : FSTP double ptr [ESP + 0x10]
0050252e : FLD float ptr [EDI + 0x20]
00502531 : FSTP double ptr [ESP + 0x8]
00502535 : FLD float ptr [EBX]
00502537 : FSTP double ptr [ESP]
0050253a : PUSH 0xb86248
0050253f : PUSH ESI
00502540 : CALL 0x0051d420
00502545 : ADD ESP,0x28
00502548 : PUSH 0x1
0050254a : MOV ECX,ESI
0050254c : MOV byte ptr [ESI + 0x15],0x0
00502550 : CALL 0x0053a880
00502555 : TEST EAX,EAX
00502557 : PUSH 0x1
00502559 : MOV ECX,ESI
0050255b : SETNZ byte ptr [ESP + 0x37]
00502560 : CALL 0x0053a880
00502565 : TEST EAX,EAX
00502567 : JZ 0x00502570
00502569 : OR word ptr [EDI + 0x50],0x1
0050256e : JMP 0x00502579
00502570 : MOV EAX,0xfffe
00502575 : AND word ptr [EDI + 0x50],AX
00502579 : PUSH 0x1
0050257b : MOV ECX,ESI
0050257d : CALL 0x0053a880
00502582 : TEST EAX,EAX
00502584 : JZ 0x0050258d
00502586 : OR word ptr [EDI + 0x50],0x2
0050258b : JMP 0x00502596
0050258d : MOV ECX,0xfffd
00502592 : AND word ptr [EDI + 0x50],CX
00502596 : PUSH 0x1
00502598 : MOV ECX,ESI
0050259a : CALL 0x0053a880
0050259f : TEST EAX,EAX
005025a1 : JZ 0x005025aa
005025a3 : OR word ptr [EDI + 0x50],0x4
005025a8 : JMP 0x005025b3
005025aa : MOV EDX,0xfffb
005025af : AND word ptr [EDI + 0x50],DX
005025b3 : PUSH 0x1
005025b5 : MOV ECX,ESI
005025b7 : CALL 0x0053a880
005025bc : TEST EAX,EAX
005025be : JZ 0x005025c7
005025c0 : OR word ptr [EDI + 0x50],0x8
005025c5 : JMP 0x005025d0
005025c7 : MOV EAX,0xfff7
005025cc : AND word ptr [EDI + 0x50],AX
005025d0 : MOVZX EAX,word ptr [EDI + 0x50]
005025d4 : MOV ECX,EAX
005025d6 : MOV EDX,EAX
005025d8 : SHR ECX,0x3
005025db : AND ECX,0x1
005025de : PUSH ECX
005025df : SHR EDX,0x2
005025e2 : SHR EAX,0x1
005025e4 : AND EDX,0x1
005025e7 : PUSH EDX
005025e8 : AND EAX,0x1
005025eb : PUSH EAX
005025ec : MOVZX EAX,byte ptr [EDI + 0x50]
005025f0 : AND EAX,0x1
005025f3 : PUSH EAX
005025f4 : PUSH 0xb86208
005025f9 : PUSH ESI
005025fa : CALL 0x0051d420
005025ff : ADD ESP,0x18
00502602 : PUSH 0x1
00502604 : MOV ECX,ESI
00502606 : CALL 0x0053a880
0050260b : TEST EAX,EAX
0050260d : PUSH 0x1
0050260f : MOV ECX,ESI
00502611 : SETNZ byte ptr [ESP + 0x34]
00502616 : CALL 0x0053a880
0050261b : TEST EAX,EAX
0050261d : PUSH 0x1
0050261f : MOV ECX,ESI
00502621 : SETNZ byte ptr [ESP + 0x35]
00502626 : CALL 0x0053a880
0050262b : TEST EAX,EAX
0050262d : PUSH 0x1
0050262f : MOV ECX,ESI
00502631 : SETNZ BL
00502634 : CALL 0x0053a880
00502639 : PUSH 0x1
0050263b : MOV ECX,ESI
0050263d : CALL 0x0053a880
00502642 : TEST EAX,EAX
00502644 : JZ 0x0050264d
00502646 : OR word ptr [EDI + 0x50],0x10
0050264b : JMP 0x00502656
0050264d : MOV ECX,0xffef
00502652 : AND word ptr [EDI + 0x50],CX
00502656 : PUSH 0x1
00502658 : MOV ECX,ESI
0050265a : CALL 0x0053a880
0050265f : TEST EAX,EAX
00502661 : PUSH 0x1
00502663 : MOV ECX,ESI
00502665 : SETNZ byte ptr [ESP + 0x36]
0050266a : CALL 0x0053a880
0050266f : TEST EAX,EAX
00502671 : JNZ 0x0050267a
00502673 : OR word ptr [EDI + 0x50],0x20
00502678 : JMP 0x00502683
0050267a : MOV EDX,0xffdf
0050267f : AND word ptr [EDI + 0x50],DX
00502683 : PUSH 0x1
00502685 : MOV ECX,ESI
00502687 : CALL 0x0053a880
0050268c : TEST EAX,EAX
0050268e : JZ 0x00502697
00502690 : OR word ptr [EDI + 0x50],0x40
00502695 : JMP 0x005026a0
00502697 : MOV EAX,0xffbf
0050269c : AND word ptr [EDI + 0x50],AX
005026a0 : PUSH 0x1
005026a2 : MOV ECX,ESI
005026a4 : CALL 0x0053a880
005026a9 : PUSH 0x1
005026ab : MOV ECX,ESI
005026ad : CALL 0x0053a880
005026b2 : TEST EAX,EAX
005026b4 : JZ 0x005026c1
005026b6 : MOV ECX,0x80
005026bb : OR word ptr [EDI + 0x50],CX
005026bf : JMP 0x005026ca
005026c1 : MOV EDX,0xff7f
005026c6 : AND word ptr [EDI + 0x50],DX
005026ca : PUSH 0x1
005026cc : MOV ECX,ESI
005026ce : CALL 0x0053a880
005026d3 : TEST EAX,EAX
005026d5 : JNZ 0x005026e2
005026d7 : MOV EAX,0x100
005026dc : OR word ptr [EDI + 0x50],AX
005026e0 : JMP 0x005026eb
005026e2 : MOV ECX,0xfeff
005026e7 : AND word ptr [EDI + 0x50],CX
005026eb : MOVZX EAX,word ptr [EDI + 0x50]
005026ef : MOV EDX,EAX
005026f1 : SHR EDX,0x8
005026f4 : MOV ECX,EAX
005026f6 : AND EDX,0x1
005026f9 : PUSH EDX
005026fa : SHR ECX,0x7
005026fd : AND ECX,0x1
00502700 : PUSH ECX
00502701 : MOV EDX,EAX
00502703 : MOV ECX,EAX
00502705 : SHR EDX,0x6
00502708 : AND EDX,0x1
0050270b : PUSH EDX
0050270c : SHR ECX,0x5
0050270f : AND ECX,0x1
00502712 : PUSH ECX
00502713 : SHR EAX,0x4
00502716 : AND EAX,0x1
00502719 : PUSH EAX
0050271a : PUSH 0xb861b8
0050271f : PUSH ESI
00502720 : CALL 0x0051d420
00502725 : ADD ESP,0x1c
00502728 : TEST BL,BL
0050272a : JZ 0x00502831
00502730 : MOV EDX,dword ptr [ESI + 0x30]
00502733 : SUB EDX,dword ptr [ESI + 0x2c]
00502736 : MOV byte ptr [ESI + 0x15],0x0
0050273a : CMP EDX,0x2
0050273d : JGE 0x00502748
0050273f : PUSH 0x2
00502741 : MOV ECX,ESI
00502743 : CALL 0x00539fb0
00502748 : MOV EAX,dword ptr [ESI + 0x2c]
0050274b : MOV ECX,dword ptr [ESI + 0x3c]
0050274e : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
00502754 : ADD ECX,EAX
00502756 : MOVZX CX,byte ptr [ECX]
0050275a : SHL DX,0x8
0050275e : OR DX,CX
00502761 : MOVZX ECX,DX
00502764 : ADD EAX,0x2
00502767 : MOVZX EDX,CX
0050276a : MOV dword ptr [ESI + 0x2c],EAX
0050276d : MOV dword ptr [EDI + 0x18],EDX
00502770 : MOV EAX,dword ptr [ESI + 0x30]
00502773 : SUB EAX,dword ptr [ESI + 0x2c]
00502776 : MOV byte ptr [ESI + 0x15],0x0
0050277a : CMP EAX,0x2
0050277d : JGE 0x00502788
0050277f : PUSH 0x2
00502781 : MOV ECX,ESI
00502783 : CALL 0x00539fb0
00502788 : MOV EAX,dword ptr [ESI + 0x2c]
0050278b : MOV ECX,dword ptr [ESI + 0x3c]
0050278e : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
00502794 : ADD ECX,EAX
00502796 : MOVZX CX,byte ptr [ECX]
0050279a : SHL DX,0x8
0050279e : OR DX,CX
005027a1 : MOVZX ECX,DX
005027a4 : ADD EAX,0x2
005027a7 : MOV dword ptr [ESI + 0x2c],EAX
005027aa : MOVZX EAX,word ptr [EDI + 0x18]
005027ae : MOVZX EDX,CX
005027b1 : MOV dword ptr [ESP + 0x34],EDX
005027b5 : PUSH EAX
005027b6 : PUSH 0xb86198
005027bb : FILD dword ptr [ESP + 0x3c]
005027bf : PUSH ESI
005027c0 : FSTP float ptr [EDI + 0x2c]
005027c3 : CALL 0x0051d420
005027c8 : MOV EAX,dword ptr [EDI + 0x18]
005027cb : ADD ESP,0x8
005027ce : MOV ECX,ESP
005027d0 : XOR EBX,EBX
005027d2 : MOV dword ptr [ESP + 0x3c],EBX
005027d6 : MOV dword ptr [ESP + 0x40],EBX
005027da : MOV dword ptr [ECX],EAX
005027dc : MOV ECX,dword ptr [EBP + 0x8]
005027df : MOV ECX,dword ptr [ECX + 0x20]
005027e2 : LEA EDX,[ESP + 0x3c]
005027e6 : PUSH EDX
005027e7 : CALL 0x00565560
005027ec : MOV ECX,dword ptr [ESP + 0x3c]
005027f0 : CMP dword ptr [ESP + 0x38],EBX
005027f4 : JNZ 0x00502803
005027f6 : CMP ECX,EBX
005027f8 : JZ 0x00502803
005027fa : CALL 0x00523dd0
005027ff : MOV ECX,dword ptr [ESP + 0x3c]
00502803 : CMP dword ptr [EDI + 0x10],EBX
00502806 : JNZ 0x0050281a
00502808 : MOV EAX,dword ptr [EDI + 0x14]
0050280b : CMP EAX,EBX
0050280d : JZ 0x0050281a
0050280f : MOV ECX,EAX
00502811 : CALL 0x00524240
00502816 : MOV ECX,dword ptr [ESP + 0x3c]
0050281a : MOV EAX,dword ptr [ESP + 0x38]
0050281e : MOV dword ptr [EDI + 0x10],EAX
00502821 : MOV dword ptr [EDI + 0x14],ECX
00502824 : CMP EAX,EBX
00502826 : JNZ 0x00502831
00502828 : CMP ECX,EBX
0050282a : JZ 0x00502831
0050282c : CALL 0x00524240
00502831 : CMP byte ptr [ESP + 0x30],0x0
00502836 : JZ 0x00502851
00502838 : LEA EAX,[EDI + 0x30]
0050283b : PUSH EAX
0050283c : MOV ECX,ESI
0050283e : CALL 0x0053b150
00502843 : PUSH 0xb8618c
00502848 : PUSH ESI
00502849 : CALL 0x0051d420
0050284e : ADD ESP,0x8
00502851 : CMP byte ptr [ESP + 0x31],0x0
00502856 : JZ 0x005028a7
00502858 : MOV ECX,dword ptr [ESI + 0x30]
0050285b : SUB ECX,dword ptr [ESI + 0x2c]
0050285e : MOV byte ptr [ESI + 0x15],0x0
00502862 : CMP ECX,0x2
00502865 : JGE 0x00502870
00502867 : PUSH 0x2
00502869 : MOV ECX,ESI
0050286b : CALL 0x00539fb0
00502870 : MOV EAX,dword ptr [ESI + 0x2c]
00502873 : MOV EDX,dword ptr [ESI + 0x3c]
00502876 : LEA ECX,[EDX + EAX*0x1]
00502879 : MOVZX DX,byte ptr [ECX + 0x1]
0050287e : MOVZX CX,byte ptr [ECX]
00502882 : SHL DX,0x8
00502886 : OR DX,CX
00502889 : MOVZX ECX,DX
0050288c : ADD EAX,0x2
0050288f : MOV dword ptr [ESI + 0x2c],EAX
00502892 : MOVZX EAX,CX
00502895 : PUSH EAX
00502896 : PUSH 0xb86170
0050289b : PUSH ESI
0050289c : MOV dword ptr [EDI + 0x34],EAX
0050289f : CALL 0x0051d420
005028a4 : ADD ESP,0xc
005028a7 : CMP byte ptr [ESP + 0x32],0x0
005028ac : JZ 0x00502a39
005028b2 : MOV EDX,0x200
005028b7 : OR word ptr [EDI + 0x50],DX
005028bb : MOV EAX,dword ptr [ESI + 0x30]
005028be : SUB EAX,dword ptr [ESI + 0x2c]
005028c1 : MOV byte ptr [ESI + 0x15],0x0
005028c5 : CMP EAX,0x1
005028c8 : JGE 0x005028d1
005028ca : MOV ECX,ESI
005028cc : CALL 0x0053a0a0
005028d1 : MOV EAX,dword ptr [ESI + 0x2c]
005028d4 : MOV ECX,dword ptr [ESI + 0x3c]
005028d7 : MOV CL,byte ptr [EAX + ECX*0x1]
005028da : INC EAX
005028db : MOVZX EDX,CL
005028de : MOV dword ptr [ESI + 0x2c],EAX
005028e1 : MOV dword ptr [EDI + 0x54],EDX
005028e4 : MOV EAX,dword ptr [ESI + 0x30]
005028e7 : SUB EAX,dword ptr [ESI + 0x2c]
005028ea : MOV byte ptr [ESI + 0x15],0x0
005028ee : CMP EAX,0x2
005028f1 : JGE 0x005028fc
005028f3 : PUSH 0x2
005028f5 : MOV ECX,ESI
005028f7 : CALL 0x00539fb0
005028fc : MOV EAX,dword ptr [ESI + 0x2c]
005028ff : MOV ECX,dword ptr [ESI + 0x3c]
00502902 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
00502908 : ADD ECX,EAX
0050290a : MOVZX CX,byte ptr [ECX]
0050290e : SHL DX,0x8
00502912 : OR DX,CX
00502915 : MOVZX ECX,DX
00502918 : MOVZX EDX,CX
0050291b : ADD EAX,0x2
0050291e : MOV dword ptr [ESP + 0x34],EDX
00502922 : MOV dword ptr [ESI + 0x2c],EAX
00502925 : FILD dword ptr [ESP + 0x34]
00502929 : FSTP float ptr [EDI + 0x38]
0050292c : MOV EAX,dword ptr [ESI + 0x30]
0050292f : SUB EAX,dword ptr [ESI + 0x2c]
00502932 : MOV byte ptr [ESI + 0x15],0x0
00502936 : CMP EAX,0x2
00502939 : JGE 0x00502944
0050293b : PUSH 0x2
0050293d : MOV ECX,ESI
0050293f : CALL 0x00539fb0
00502944 : MOV EAX,dword ptr [ESI + 0x2c]
00502947 : MOV ECX,dword ptr [ESI + 0x3c]
0050294a : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
00502950 : ADD ECX,EAX
00502952 : MOVZX CX,byte ptr [ECX]
00502956 : SHL DX,0x8
0050295a : OR DX,CX
0050295d : MOVZX ECX,DX
00502960 : MOVZX EDX,CX
00502963 : ADD EAX,0x2
00502966 : MOV dword ptr [ESP + 0x34],EDX
0050296a : MOV dword ptr [ESI + 0x2c],EAX
0050296d : FILD dword ptr [ESP + 0x34]
00502971 : FSTP float ptr [EDI + 0x3c]
00502974 : MOV EAX,dword ptr [ESI + 0x30]
00502977 : SUB EAX,dword ptr [ESI + 0x2c]
0050297a : MOV byte ptr [ESI + 0x15],0x0
0050297e : CMP EAX,0x2
00502981 : JGE 0x0050298c
00502983 : PUSH 0x2
00502985 : MOV ECX,ESI
00502987 : CALL 0x00539fb0
0050298c : MOV EAX,dword ptr [ESI + 0x2c]
0050298f : MOV ECX,dword ptr [ESI + 0x3c]
00502992 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
00502998 : ADD ECX,EAX
0050299a : MOVZX CX,byte ptr [ECX]
0050299e : SHL DX,0x8
005029a2 : OR DX,CX
005029a5 : MOVZX ECX,DX
005029a8 : MOVSX EDX,CX
005029ab : ADD EAX,0x2
005029ae : MOV dword ptr [ESP + 0x34],EDX
005029b2 : MOV dword ptr [ESI + 0x2c],EAX
005029b5 : FILD dword ptr [ESP + 0x34]
005029b9 : FSTP float ptr [EDI + 0x40]
005029bc : MOV EAX,dword ptr [ESI + 0x30]
005029bf : SUB EAX,dword ptr [ESI + 0x2c]
005029c2 : MOV byte ptr [ESI + 0x15],0x0
005029c6 : CMP EAX,0x2
005029c9 : JGE 0x005029d4
005029cb : PUSH 0x2
005029cd : MOV ECX,ESI
005029cf : CALL 0x00539fb0
005029d4 : MOV EAX,dword ptr [ESI + 0x2c]
005029d7 : MOV ECX,dword ptr [ESI + 0x3c]
005029da : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005029e0 : ADD ECX,EAX
005029e2 : MOVZX CX,byte ptr [ECX]
005029e6 : SHL DX,0x8
005029ea : OR DX,CX
005029ed : MOVZX ECX,DX
005029f0 : MOVSX EDX,CX
005029f3 : MOV dword ptr [ESP + 0x34],EDX
005029f7 : SUB ESP,0x20
005029fa : ADD EAX,0x2
005029fd : FILD dword ptr [ESP + 0x54]
00502a01 : MOV dword ptr [ESI + 0x2c],EAX
00502a04 : MOV EAX,dword ptr [EDI + 0x54]
00502a07 : FSTP float ptr [ESP + 0x54]
00502a0b : FLD float ptr [ESP + 0x54]
00502a0f : FST float ptr [EDI + 0x44]
00502a12 : FSTP double ptr [ESP + 0x18]
00502a16 : FLD float ptr [EDI + 0x40]
00502a19 : FSTP double ptr [ESP + 0x10]
00502a1d : FLD float ptr [EDI + 0x3c]
00502a20 : FSTP double ptr [ESP + 0x8]
00502a24 : FLD float ptr [EDI + 0x38]
00502a27 : FSTP double ptr [ESP]
00502a2a : PUSH EAX
00502a2b : PUSH 0xb86118
00502a30 : PUSH ESI
00502a31 : CALL 0x0051d420
00502a36 : ADD ESP,0x2c
00502a39 : LEA EBX,[EDI + 0x4c]
00502a3c : PUSH EBX
00502a3d : MOV ECX,ESI
00502a3f : CALL 0x0053b190
00502a44 : CMP byte ptr [ESP + 0x33],0x0
00502a49 : JZ 0x00502a56
00502a4b : LEA ECX,[EDI + 0x48]
00502a4e : PUSH ECX
00502a4f : MOV ECX,ESI
00502a51 : CALL 0x0053b190
00502a56 : MOV EDX,dword ptr [EDI + 0x48]
00502a59 : MOV EAX,dword ptr [EBX]
00502a5b : AND EDX,0xfffffffc
00502a5e : ADD EDX,0x8
00502a61 : PUSH EDX
00502a62 : AND EAX,0xfffffffc
00502a65 : ADD EAX,0x8
00502a68 : PUSH EAX
00502a69 : PUSH 0xb860f0
00502a6e : PUSH ESI
00502a6f : CALL 0x0051d420
00502a74 : ADD ESP,0x10
00502a77 : POP EDI
00502a78 : POP ESI
00502a79 : POP EBX
00502a7a : MOV ESP,EBP
00502a7c : POP EBP
00502a7d : RET 0x8
