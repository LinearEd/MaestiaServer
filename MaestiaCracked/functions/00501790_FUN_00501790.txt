PROGRAM  : Maestia.exe
FUNCTION : FUN_00501790
ENTRY    : 00501790
BODY     : [[00501790, 005018d3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00501790(uint param_1)

{
  int *piVar1;
  undefined1 *puVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uStack_8;
  int iStack_4;
  
  uVar3 = param_1;
  if (((*(int *)(param_1 + 8) != 0) &&
      (iVar4 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar4 == 4)) &&
     (0 < *(int *)(uVar3 + 0x1c))) {
    uVar5 = *(undefined4 *)(uVar3 + 0x18);
    FUN_00526260(0);
    FUN_00527730(uVar5);
    iVar4 = FUN_0063b380();
    if (iVar4 < 0) {
      puVar2 = *(undefined1 **)(uVar3 + 4);
      FUN_00526400();
      *puVar2 = 0;
      return;
    }
    uStack_8 = 0;
    iVar4 = FUN_0054b620(iVar4,&uStack_8);
    if (iVar4 != 0) {
      FUN_0051b6e0();
      FUN_0051b8a0(iVar4,uStack_8);
      iVar4 = FUN_00525450((param_1 & 0xfffffffc) + 8,*(uint *)(param_1 & 0xfffffffc) & 0x7fffffff);
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
      iStack_4 = iVar4;
      FUN_004ffd40(&iStack_4);
      piVar1 = (int *)(iVar4 + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
      FUN_0045b730();
      return;
    }
    iVar4 = FUN_00525380(&DAT_00cca874,0,0);
    *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
    param_1 = iVar4;
    FUN_004ffd40(&param_1);
    piVar1 = (int *)(iVar4 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00501790 : SUB ESP,0x8
00501793 : PUSH EDI
00501794 : MOV EDI,dword ptr [ESP + 0x10]
00501798 : CMP dword ptr [EDI + 0x8],0x0
0050179c : JZ 0x005018cf
005017a2 : MOV ECX,dword ptr [EDI + 0x8]
005017a5 : MOV EAX,dword ptr [ECX]
005017a7 : MOV EDX,dword ptr [EAX + 0x8]
005017aa : CALL EDX
005017ac : CMP EAX,0x4
005017af : JNZ 0x005018cf
005017b5 : MOV EAX,dword ptr [EDI + 0x8]
005017b8 : PUSH ESI
005017b9 : TEST EAX,EAX
005017bb : JZ 0x005017c2
005017bd : LEA ESI,[EAX + -0x68]
005017c0 : JMP 0x005017c4
005017c2 : XOR ESI,ESI
005017c4 : CMP dword ptr [EDI + 0x1c],0x1
005017c8 : JL 0x005018ce
005017ce : MOV EAX,dword ptr [EDI + 0x18]
005017d1 : PUSH EAX
005017d2 : PUSH 0x0
005017d4 : MOV ECX,EDI
005017d6 : CALL 0x00526260
005017db : MOV ECX,EAX
005017dd : CALL 0x00527730
005017e2 : CALL 0x0063b380
005017e7 : TEST EAX,EAX
005017e9 : JGE 0x005017fe
005017eb : MOV EDI,dword ptr [EDI + 0x4]
005017ee : MOV ECX,EDI
005017f0 : CALL 0x00526400
005017f5 : POP ESI
005017f6 : MOV byte ptr [EDI],0x0
005017f9 : POP EDI
005017fa : ADD ESP,0x8
005017fd : RET
005017fe : MOV ECX,dword ptr [ESI + 0xa0]
00501804 : LEA EDX,[ESP + 0x8]
00501808 : PUSH EDX
00501809 : PUSH EAX
0050180a : MOV dword ptr [ESP + 0x10],0x0
00501812 : CALL 0x0054b620
00501817 : MOV ESI,EAX
00501819 : TEST ESI,ESI
0050181b : JZ 0x00501891
0050181d : LEA ECX,[ESP + 0x14]
00501821 : CALL 0x0051b6e0
00501826 : MOV EAX,dword ptr [ESP + 0x8]
0050182a : PUSH EAX
0050182b : PUSH ESI
0050182c : LEA ECX,[ESP + 0x1c]
00501830 : CALL 0x0051b8a0
00501835 : MOV ECX,dword ptr [EDI + 0x18]
00501838 : MOV EDX,dword ptr [ECX + 0x78]
0050183b : MOV EAX,dword ptr [ESP + 0x14]
0050183f : MOV ECX,EAX
00501841 : AND ECX,0xfffffffc
00501844 : MOV ECX,dword ptr [ECX]
00501846 : AND ECX,0x7fffffff
0050184c : AND EAX,0xfffffffc
0050184f : PUSH ECX
00501850 : ADD EAX,0x8
00501853 : PUSH EAX
00501854 : LEA ECX,[EDX + 0x254]
0050185a : CALL 0x00525450
0050185f : MOV ESI,EAX
00501861 : INC dword ptr [ESI + 0x8]
00501864 : MOV ECX,dword ptr [EDI + 0x4]
00501867 : LEA EDX,[ESP + 0xc]
0050186b : PUSH EDX
0050186c : MOV dword ptr [ESP + 0x10],ESI
00501870 : CALL 0x004ffd40
00501875 : ADD dword ptr [ESI + 0x8],-0x1
00501879 : JNZ 0x00501882
0050187b : MOV ECX,ESI
0050187d : CALL 0x00525340
00501882 : LEA ECX,[ESP + 0x14]
00501886 : CALL 0x0045b730
0050188b : POP ESI
0050188c : POP EDI
0050188d : ADD ESP,0x8
00501890 : RET
00501891 : MOV EAX,dword ptr [EDI + 0x18]
00501894 : MOV EAX,dword ptr [EAX + 0x78]
00501897 : PUSH 0x0
00501899 : PUSH 0x0
0050189b : PUSH 0xcca874
005018a0 : LEA ECX,[EAX + 0x254]
005018a6 : CALL 0x00525380
005018ab : MOV ESI,EAX
005018ad : INC dword ptr [ESI + 0x8]
005018b0 : LEA ECX,[ESP + 0x14]
005018b4 : PUSH ECX
005018b5 : MOV ECX,dword ptr [EDI + 0x4]
005018b8 : MOV dword ptr [ESP + 0x18],ESI
005018bc : CALL 0x004ffd40
005018c1 : ADD dword ptr [ESI + 0x8],-0x1
005018c5 : JNZ 0x005018ce
005018c7 : MOV ECX,ESI
005018c9 : CALL 0x00525340
005018ce : POP ESI
005018cf : POP EDI
005018d0 : ADD ESP,0x8
005018d3 : RET
