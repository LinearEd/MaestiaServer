PROGRAM  : Maestia.exe
FUNCTION : FUN_00840a80
ENTRY    : 00840a80
BODY     : [[00840a80, 00840c46]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00840c0d) */

void FUN_00840a80(int param_1,int param_2,undefined4 param_3,undefined4 param_4,undefined4 param_5,
                 undefined4 param_6,undefined1 param_7)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  undefined4 in_ECX;
  undefined4 in_EDX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4dc4c;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  FUN_008018d0(L"[AvaSkillObj::InitSkillObject]",uVar2);
  *(undefined1 *)(param_1 + 0xf1) = 0;
  *(int *)(param_1 + 0x48) = param_2;
  if (param_2 != 0) {
    *(undefined4 *)(param_1 + 0x78) = param_4;
    FUN_00405eb0(param_3,0,0xffffffff);
    *(undefined4 *)(param_1 + 0xf4) = param_5;
    *(undefined1 *)(param_1 + 0x95) = 1;
    *(undefined1 *)(param_1 + 0xf0) = param_7;
    FUN_00405eb0(in_EDX,0,0xffffffff);
    local_8 = 0;
    FUN_0070c1f0();
    iVar3 = FUN_00407c10(L".cfx",4);
    if (iVar3 == -1) {
      iVar3 = FUN_00407c10(L".psb",4);
      if (iVar3 != -1) {
        iVar3 = FUN_007c48b0();
        *(int *)(param_1 + 0x54) = iVar3;
        if (iVar3 != 0) {
          FUN_00796260(*(undefined4 *)(param_1 + 0x48));
        }
      }
    }
    else {
      piVar4 = (int *)FUN_007cecc0();
      *(int **)(param_1 + 0x50) = piVar4;
      if (piVar4 != (int *)0x0) {
        (**(code **)(*piVar4 + 0x14))(*(undefined4 *)(param_1 + 0x48));
      }
    }
    uVar1 = *(undefined4 *)(param_1 + 0x78);
    iVar3 = FUN_00a1a840(uVar1);
    if ((iVar3 == 0) && (iVar3 = FUN_00a1a6d0(uVar1), iVar3 == 0)) {
      FUN_00a1a780(uVar1);
    }
    *(undefined4 *)(param_1 + 0x90) = param_6;
    *(undefined1 *)(param_1 + 0x94) = 1;
    FUN_00405eb0(in_ECX,0,0xffffffff);
    (**(code **)(**(int **)(param_1 + 0x48) + 0x120))(0,0);
    local_8 = 0xffffffff;
  }
  ExceptionList = local_10;
  __security_check_cookie(uVar2 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00840a80 : PUSH EBP
00840a81 : MOV EBP,ESP
00840a83 : PUSH -0x1
00840a85 : PUSH 0xb4dc4c
00840a8a : MOV EAX,FS:[0x0]
00840a90 : PUSH EAX
00840a91 : SUB ESP,0x28
00840a94 : MOV EAX,[0x00d66fa0]
00840a99 : XOR EAX,EBP
00840a9b : MOV dword ptr [EBP + -0x10],EAX
00840a9e : PUSH EBX
00840a9f : PUSH ESI
00840aa0 : PUSH EDI
00840aa1 : PUSH EAX
00840aa2 : LEA EAX,[EBP + -0xc]
00840aa5 : MOV FS:[0x0],EAX
00840aab : MOV EAX,dword ptr [EBP + 0x10]
00840aae : MOV ESI,dword ptr [0x00da98e8]
00840ab4 : MOV EBX,dword ptr [EBP + 0x8]
00840ab7 : PUSH 0xc3a384
00840abc : MOV EDI,EDX
00840abe : MOV dword ptr [EBP + -0x34],EAX
00840ac1 : MOV dword ptr [EBP + -0x30],ECX
00840ac4 : CALL 0x008018d0
00840ac9 : MOV EAX,dword ptr [EBP + 0xc]
00840acc : XOR ESI,ESI
00840ace : ADD ESP,0x4
00840ad1 : MOV byte ptr [EBX + 0xf1],0x0
00840ad8 : MOV dword ptr [EBX + 0x48],EAX
00840adb : CMP EAX,ESI
00840add : JZ 0x00840c29
00840ae3 : MOV EAX,dword ptr [EBP + -0x34]
00840ae6 : MOV EDX,dword ptr [EBP + 0x14]
00840ae9 : PUSH -0x1
00840aeb : PUSH ESI
00840aec : PUSH EAX
00840aed : LEA ECX,[EBX + 0xf8]
00840af3 : MOV dword ptr [EBX + 0x78],EDX
00840af6 : CALL 0x00405eb0
00840afb : MOV ECX,dword ptr [EBP + 0x18]
00840afe : MOV DL,byte ptr [EBP + 0x20]
00840b01 : PUSH -0x1
00840b03 : PUSH ESI
00840b04 : MOV dword ptr [EBX + 0xf4],ECX
00840b0a : XOR EAX,EAX
00840b0c : PUSH EDI
00840b0d : LEA ECX,[EBP + -0x2c]
00840b10 : MOV byte ptr [EBX + 0x95],0x1
00840b17 : MOV byte ptr [EBX + 0xf0],DL
00840b1d : MOV dword ptr [EBP + -0x14],0x7
00840b24 : MOV dword ptr [EBP + -0x18],ESI
00840b27 : MOV word ptr [EBP + -0x28],AX
00840b2b : CALL 0x00405eb0
00840b30 : MOV dword ptr [EBP + -0x4],ESI
00840b33 : LEA ECX,[EBP + -0x2c]
00840b36 : CALL 0x0070c1f0
00840b3b : PUSH 0x4
00840b3d : PUSH 0xc3a3c4
00840b42 : XOR EAX,EAX
00840b44 : LEA EDX,[EBP + -0x2c]
00840b47 : CALL 0x00407c10
00840b4c : CMP EAX,-0x1
00840b4f : JZ 0x00840b6c
00840b51 : CALL 0x007cecc0
00840b56 : MOV dword ptr [EBX + 0x50],EAX
00840b59 : CMP EAX,ESI
00840b5b : JZ 0x00840ba1
00840b5d : MOV ECX,dword ptr [EBX + 0x48]
00840b60 : MOV EDX,dword ptr [EAX]
00840b62 : MOV EDX,dword ptr [EDX + 0x14]
00840b65 : PUSH ECX
00840b66 : MOV ECX,EAX
00840b68 : CALL EDX
00840b6a : JMP 0x00840ba1
00840b6c : PUSH 0x4
00840b6e : PUSH 0xc3a3d0
00840b73 : XOR EAX,EAX
00840b75 : LEA EDX,[EBP + -0x2c]
00840b78 : CALL 0x00407c10
00840b7d : CMP EAX,-0x1
00840b80 : JZ 0x00840ba1
00840b82 : MOV ECX,dword ptr [0x017251f8]
00840b88 : MOV EDX,EDI
00840b8a : CALL 0x007c48b0
00840b8f : MOV dword ptr [EBX + 0x54],EAX
00840b92 : CMP EAX,ESI
00840b94 : JZ 0x00840ba1
00840b96 : MOV ECX,dword ptr [EBX + 0x48]
00840b99 : PUSH ECX
00840b9a : MOV ECX,EAX
00840b9c : CALL 0x00796260
00840ba1 : MOV EDI,dword ptr [EBX + 0x78]
00840ba4 : MOV ECX,dword ptr [0x00da93ec]
00840baa : PUSH EDI
00840bab : MOV ESI,ECX
00840bad : CALL 0x00a1a840
00840bb2 : TEST EAX,EAX
00840bb4 : JNZ 0x00840bca
00840bb6 : PUSH EDI
00840bb7 : MOV ECX,ESI
00840bb9 : CALL 0x00a1a6d0
00840bbe : TEST EAX,EAX
00840bc0 : JNZ 0x00840bca
00840bc2 : PUSH EDI
00840bc3 : MOV ECX,ESI
00840bc5 : CALL 0x00a1a780
00840bca : MOV EAX,dword ptr [EBP + -0x30]
00840bcd : MOV EDX,dword ptr [EBP + 0x1c]
00840bd0 : PUSH -0x1
00840bd2 : PUSH 0x0
00840bd4 : PUSH EAX
00840bd5 : LEA ECX,[EBX + 0xa4]
00840bdb : MOV dword ptr [EBX + 0x90],EDX
00840be1 : MOV byte ptr [EBX + 0x94],0x1
00840be8 : CALL 0x00405eb0
00840bed : MOV EBX,dword ptr [EBX + 0x48]
00840bf0 : MOV EDX,dword ptr [EBX]
00840bf2 : MOV EAX,dword ptr [EDX + 0x120]
00840bf8 : PUSH 0x0
00840bfa : PUSH 0x0
00840bfc : MOV ECX,EBX
00840bfe : CALL EAX
00840c00 : MOV dword ptr [EBP + -0x4],0xffffffff
00840c07 : CMP dword ptr [EBP + -0x14],0x8
00840c0b : JC 0x00840c15
00840c0d : MOV ECX,dword ptr [EBP + -0x28]
00840c10 : CALL 0x006f04e0
00840c15 : XOR ECX,ECX
00840c17 : MOV dword ptr [EBP + -0x14],0x7
00840c1e : MOV dword ptr [EBP + -0x18],0x0
00840c25 : MOV word ptr [EBP + -0x28],CX
00840c29 : MOV ECX,dword ptr [EBP + -0xc]
00840c2c : MOV dword ptr FS:[0x0],ECX
00840c33 : POP ECX
00840c34 : POP EDI
00840c35 : POP ESI
00840c36 : POP EBX
00840c37 : MOV ECX,dword ptr [EBP + -0x10]
00840c3a : XOR ECX,EBP
00840c3c : CALL 0x00633e6b
00840c41 : MOV ESP,EBP
00840c43 : POP EBP
00840c44 : RET 0x1c
