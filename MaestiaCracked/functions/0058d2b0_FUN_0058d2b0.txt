PROGRAM  : Maestia.exe
FUNCTION : FUN_0058d2b0
ENTRY    : 0058d2b0
BODY     : [[0058d2b0, 0058d3e9]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058d2b0(int param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  int *piVar5;
  float10 fVar6;
  longlong local_8;
  
  iVar3 = param_1;
  if (*(int **)(param_1 + 8) == (int *)0x0) {
    piVar5 = *(int **)(*(int *)(param_1 + 0x18) + 0x74);
  }
  else {
    iVar2 = (**(code **)(**(int **)(param_1 + 8) + 8))();
    if (iVar2 != 2) {
      return;
    }
    if (*(int *)(iVar3 + 8) == 0) {
      return;
    }
    piVar5 = (int *)(*(int *)(iVar3 + 8) + -0x68);
  }
  if (piVar5 != (int *)0x0) {
    if (*(int *)(iVar3 + 0x1c) < 1) {
      iVar3 = piVar5[0x20];
      if (iVar3 == 0) {
        iVar3 = FUN_00520df0();
      }
      FUN_0051daa0(piVar5 + 3,"Error: %s, GFx_SpriteGotoAndPlay needs one arg\n",
                   **(undefined4 **)(iVar3 + 0xc));
      return;
    }
    pcVar4 = (char *)FUN_00526260(0);
    param_1 = -1;
    if (*pcVar4 == '\x05') {
      FUN_005272e0(&local_8,*(undefined4 *)(iVar3 + 0x18),0xffffffff,0);
      cVar1 = (**(code **)(*piVar5 + 0x11c))(*(undefined4 *)local_8,&param_1,1);
      if (cVar1 == '\0') {
        *(int *)((int)(undefined4 *)local_8 + 8) = *(int *)((int)(undefined4 *)local_8 + 8) + -1;
        if (*(int *)((int)(undefined4 *)local_8 + 8) != 0) {
          return;
        }
        FUN_00525340();
        return;
      }
      *(int *)((int)(undefined4 *)local_8 + 8) = *(int *)((int)(undefined4 *)local_8 + 8) + -1;
      if (*(int *)((int)(undefined4 *)local_8 + 8) == 0) {
        FUN_00525340();
      }
    }
    else {
      fVar6 = (float10)FUN_00527730(*(undefined4 *)(iVar3 + 0x18));
      local_8 = (longlong)ROUND(fVar6);
      param_1 = (int)(undefined4 *)local_8 + -1;
    }
    (**(code **)(*piVar5 + 0x120))(param_1);
    (**(code **)(*piVar5 + 0x124))(1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058d2b0 : SUB ESP,0x8
0058d2b3 : PUSH ESI
0058d2b4 : PUSH EDI
0058d2b5 : MOV EDI,dword ptr [ESP + 0x14]
0058d2b9 : MOV ECX,dword ptr [EDI + 0x8]
0058d2bc : TEST ECX,ECX
0058d2be : JNZ 0x0058d2c8
0058d2c0 : MOV EAX,dword ptr [EDI + 0x18]
0058d2c3 : MOV ESI,dword ptr [EAX + 0x74]
0058d2c6 : JMP 0x0058d2e6
0058d2c8 : MOV EDX,dword ptr [ECX]
0058d2ca : MOV EAX,dword ptr [EDX + 0x8]
0058d2cd : CALL EAX
0058d2cf : CMP EAX,0x2
0058d2d2 : JNZ 0x0058d3b5
0058d2d8 : MOV EAX,dword ptr [EDI + 0x8]
0058d2db : TEST EAX,EAX
0058d2dd : JZ 0x0058d3b5
0058d2e3 : LEA ESI,[EAX + -0x68]
0058d2e6 : TEST ESI,ESI
0058d2e8 : JZ 0x0058d3b5
0058d2ee : CMP dword ptr [EDI + 0x1c],0x1
0058d2f2 : JGE 0x0058d322
0058d2f4 : MOV EAX,dword ptr [ESI + 0x80]
0058d2fa : TEST EAX,EAX
0058d2fc : JNZ 0x0058d305
0058d2fe : MOV ECX,ESI
0058d300 : CALL 0x00520df0
0058d305 : MOV ECX,dword ptr [EAX + 0xc]
0058d308 : MOV EDX,dword ptr [ECX]
0058d30a : PUSH EDX
0058d30b : PUSH 0xb8e674
0058d310 : ADD ESI,0xc
0058d313 : PUSH ESI
0058d314 : CALL 0x0051daa0
0058d319 : ADD ESP,0xc
0058d31c : POP EDI
0058d31d : POP ESI
0058d31e : ADD ESP,0x8
0058d321 : RET
0058d322 : PUSH 0x0
0058d324 : MOV ECX,EDI
0058d326 : CALL 0x00526260
0058d32b : MOV ECX,EAX
0058d32d : MOV EAX,dword ptr [EDI + 0x18]
0058d330 : MOV dword ptr [ESP + 0x14],0xffffffff
0058d338 : CMP byte ptr [ECX],0x5
0058d33b : JNZ 0x0058d3bb
0058d33d : PUSH 0x0
0058d33f : PUSH -0x1
0058d341 : PUSH EAX
0058d342 : LEA EDX,[ESP + 0x14]
0058d346 : PUSH EDX
0058d347 : CALL 0x005272e0
0058d34c : MOV EAX,dword ptr [ESP + 0x8]
0058d350 : MOV EAX,dword ptr [EAX]
0058d352 : MOV EDX,dword ptr [ESI]
0058d354 : MOV EDX,dword ptr [EDX + 0x11c]
0058d35a : PUSH 0x1
0058d35c : LEA ECX,[ESP + 0x18]
0058d360 : PUSH ECX
0058d361 : PUSH EAX
0058d362 : MOV ECX,ESI
0058d364 : CALL EDX
0058d366 : TEST AL,AL
0058d368 : MOV EAX,dword ptr [ESP + 0x8]
0058d36c : MOV ECX,EAX
0058d36e : JNZ 0x0058d386
0058d370 : DEC dword ptr [EAX + 0x8]
0058d373 : ADD EAX,0x8
0058d376 : CMP dword ptr [EAX],0x0
0058d379 : JNZ 0x0058d3b5
0058d37b : CALL 0x00525340
0058d380 : POP EDI
0058d381 : POP ESI
0058d382 : ADD ESP,0x8
0058d385 : RET
0058d386 : DEC dword ptr [EAX + 0x8]
0058d389 : ADD EAX,0x8
0058d38c : CMP dword ptr [EAX],0x0
0058d38f : JNZ 0x0058d396
0058d391 : CALL 0x00525340
0058d396 : MOV EAX,dword ptr [ESP + 0x14]
0058d39a : MOV EDX,dword ptr [ESI]
0058d39c : PUSH EAX
0058d39d : MOV EAX,dword ptr [EDX + 0x120]
0058d3a3 : MOV ECX,ESI
0058d3a5 : CALL EAX
0058d3a7 : MOV EDX,dword ptr [ESI]
0058d3a9 : MOV EAX,dword ptr [EDX + 0x124]
0058d3af : PUSH 0x1
0058d3b1 : MOV ECX,ESI
0058d3b3 : CALL EAX
0058d3b5 : POP EDI
0058d3b6 : POP ESI
0058d3b7 : ADD ESP,0x8
0058d3ba : RET
0058d3bb : PUSH EAX
0058d3bc : CALL 0x00527730
0058d3c1 : FNSTCW word ptr [ESP + 0x14]
0058d3c5 : MOVZX EAX,word ptr [ESP + 0x14]
0058d3ca : OR EAX,0xc00
0058d3cf : MOV dword ptr [ESP + 0x8],EAX
0058d3d3 : FLDCW word ptr [ESP + 0x8]
0058d3d7 : FISTP qword ptr [ESP + 0x8]
0058d3db : MOV EAX,dword ptr [ESP + 0x8]
0058d3df : DEC EAX
0058d3e0 : FLDCW word ptr [ESP + 0x14]
0058d3e4 : MOV dword ptr [ESP + 0x14],EAX
0058d3e8 : JMP 0x0058d39a
