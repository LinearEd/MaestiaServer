PROGRAM  : Maestia.exe
FUNCTION : FUN_0040a970
ENTRY    : 0040a970
BODY     : [[0040a970, 0040aa2f]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0040a970(int param_1,uint param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  int *unaff_FS_OFFSET;
  int local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7e690;
  local_10 = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = (int)&local_10;
  uVar3 = (*(int *)(param_2 + 8) - *(int *)(param_2 + 4)) / 0x14;
  *(undefined4 *)(param_1 + 4) = 0;
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined4 *)(param_1 + 0xc) = 0;
  if (uVar3 != 0) {
    if (0xccccccc < uVar3) {
      FUN_00452880();
    }
    iVar4 = FUN_00488520();
    *(int *)(param_1 + 4) = iVar4;
    *(int *)(param_1 + 8) = iVar4;
    *(uint *)(param_1 + 0xc) = iVar4 + uVar3 * 0x14;
    local_8 = 0;
    puVar1 = (undefined4 *)(param_2 + 8);
    puVar2 = (undefined4 *)(param_2 + 4);
    param_2 = param_2 & 0xffffff00;
    uVar5 = FUN_0040d0e0(*puVar2,*puVar1,*(undefined4 *)(param_1 + 4),param_1,param_2);
    *(undefined4 *)(param_1 + 8) = uVar5;
  }
  *unaff_FS_OFFSET = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
0040a970 : PUSH EBP
0040a971 : MOV EBP,ESP
0040a973 : PUSH -0x1
0040a975 : PUSH 0xb7e690
0040a97a : MOV EAX,FS:[0x0]
0040a980 : PUSH EAX
0040a981 : PUSH ECX
0040a982 : PUSH EBX
0040a983 : PUSH ESI
0040a984 : PUSH EDI
0040a985 : MOV EAX,[0x00d66fa0]
0040a98a : XOR EAX,EBP
0040a98c : PUSH EAX
0040a98d : LEA EAX,[EBP + -0xc]
0040a990 : MOV FS:[0x0],EAX
0040a996 : MOV dword ptr [EBP + -0x10],ESP
0040a999 : MOV EBX,dword ptr [EBP + 0xc]
0040a99c : MOV ESI,dword ptr [EBP + 0x8]
0040a99f : MOV ECX,dword ptr [EBX + 0x8]
0040a9a2 : SUB ECX,dword ptr [EBX + 0x4]
0040a9a5 : MOV EAX,0x66666667
0040a9aa : IMUL ECX
0040a9ac : SAR EDX,0x3
0040a9af : MOV EDI,EDX
0040a9b1 : SHR EDI,0x1f
0040a9b4 : ADD EDI,EDX
0040a9b6 : MOV EAX,0x0
0040a9bb : MOV dword ptr [ESI + 0x4],EAX
0040a9be : MOV dword ptr [ESI + 0x8],EAX
0040a9c1 : MOV dword ptr [ESI + 0xc],EAX
0040a9c4 : JZ 0x0040aa1a
0040a9c6 : CMP EDI,0xccccccc
0040a9cc : JBE 0x0040a9d3
0040a9ce : CALL 0x00452880
0040a9d3 : MOV ECX,EDI
0040a9d5 : CALL 0x00488520
0040a9da : MOV dword ptr [ESI + 0x4],EAX
0040a9dd : MOV dword ptr [ESI + 0x8],EAX
0040a9e0 : LEA ECX,[EDI + EDI*0x4]
0040a9e3 : LEA EDX,[EAX + ECX*0x4]
0040a9e6 : MOV dword ptr [ESI + 0xc],EDX
0040a9e9 : MOV dword ptr [EBP + -0x4],0x0
0040a9f0 : MOV EAX,dword ptr [EBX + 0x8]
0040a9f3 : MOV EBX,dword ptr [EBX + 0x4]
0040a9f6 : MOV ECX,dword ptr [ESI + 0x4]
0040a9f9 : MOV byte ptr [EBP + 0xc],0x0
0040a9fd : MOV EDX,dword ptr [EBP + 0xc]
0040aa00 : PUSH EDX
0040aa01 : MOV EDX,dword ptr [EBP + 0x8]
0040aa04 : PUSH EDX
0040aa05 : PUSH ECX
0040aa06 : PUSH EAX
0040aa07 : PUSH EBX
0040aa08 : CALL 0x0040d0e0
0040aa0d : ADD ESP,0x14
0040aa10 : MOV dword ptr [ESI + 0x8],EAX
0040aa13 : MOV dword ptr [EBP + -0x4],0xffffffff
0040aa1a : MOV EAX,ESI
0040aa1c : MOV ECX,dword ptr [EBP + -0xc]
0040aa1f : MOV dword ptr FS:[0x0],ECX
0040aa26 : POP ECX
0040aa27 : POP EDI
0040aa28 : POP ESI
0040aa29 : POP EBX
0040aa2a : MOV ESP,EBP
0040aa2c : POP EBP
0040aa2d : RET 0x8
