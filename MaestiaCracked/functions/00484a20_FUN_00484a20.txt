PROGRAM  : Maestia.exe
FUNCTION : FUN_00484a20
ENTRY    : 00484a20
BODY     : [[00484a20, 00484b8f] [00484ba1, 00484c7d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00484a20(uint param_1,undefined8 *param_2)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  uint uVar7;
  uint extraout_ECX;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7d0b0;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar4 = *(int *)(param_1 + 4);
  if (iVar4 == 0) {
    uVar7 = 0;
  }
  else {
    uVar7 = (*(int *)(param_1 + 0xc) - iVar4) / 0xc;
  }
  puVar1 = *(undefined8 **)(param_1 + 8);
  iVar4 = ((int)puVar1 - iVar4) / 0xc;
  if (iVar4 == 0x15555555) {
    iVar4 = FUN_00452880();
    uVar7 = extraout_ECX;
  }
  uVar5 = iVar4 + 1;
  if (uVar7 < uVar5) {
    if (0x15555555 - (uVar7 >> 1) < uVar7) {
      param_1 = 0;
    }
    else {
      param_1 = uVar7 + (uVar7 >> 1);
    }
    if (param_1 < uVar5) {
      param_1 = uVar5;
    }
    iVar4 = FUN_0040dbb0();
    local_8 = 0;
    FUN_004c0630();
    FUN_004c0660(*(undefined4 *)(iVar3 + 4),param_2);
    FUN_004c0660(param_2,*(undefined4 *)(iVar3 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(iVar3 + 4) != 0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(iVar3 + 0xc) = iVar4 + param_1 * 0xc;
    *(int *)(iVar3 + 8) = iVar4 + ((*(int *)(iVar3 + 8) - *(int *)(iVar3 + 4)) / 0xc + 1) * 0xc;
    *(int *)(iVar3 + 4) = iVar4;
    ExceptionList = local_10;
    return;
  }
  iVar4 = (int)puVar1 - (int)param_2 >> 0x1f;
  if (((int)puVar1 - (int)param_2) / 0xc + iVar4 == iVar4) {
    FUN_004c0660(param_2,puVar1);
    local_8 = 2;
    FUN_004c0630();
    local_8 = 0xffffffff;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0xc;
  }
  else {
    uVar6 = FUN_004c0660((undefined8 *)((int)puVar1 + -0xc),puVar1);
    *(undefined4 *)(param_1 + 8) = uVar6;
    puVar2 = (undefined8 *)((int)puVar1 + -0xc);
    while (param_2 != puVar2) {
      *(undefined8 *)((int)puVar1 + -0xc) = *(undefined8 *)((int)puVar2 + -0xc);
      *(undefined4 *)((int)puVar1 + -4) = *(undefined4 *)((int)puVar2 + -4);
      puVar1 = (undefined8 *)((int)puVar1 + -0xc);
      puVar2 = (undefined8 *)((int)puVar2 + -0xc);
    }
  }
  FUN_004cd730(param_2);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00484a20 : PUSH EBP
00484a21 : MOV EBP,ESP
00484a23 : PUSH -0x1
00484a25 : PUSH 0xb7d0b0
00484a2a : MOV EAX,FS:[0x0]
00484a30 : PUSH EAX
00484a31 : SUB ESP,0x20
00484a34 : PUSH EBX
00484a35 : PUSH ESI
00484a36 : PUSH EDI
00484a37 : MOV EAX,[0x00d66fa0]
00484a3c : XOR EAX,EBP
00484a3e : PUSH EAX
00484a3f : LEA EAX,[EBP + -0xc]
00484a42 : MOV FS:[0x0],EAX
00484a48 : MOV dword ptr [EBP + -0x10],ESP
00484a4b : MOV EBX,dword ptr [EBP + 0x8]
00484a4e : MOV ESI,dword ptr [EBX + 0x4]
00484a51 : TEST ESI,ESI
00484a53 : JNZ 0x00484a59
00484a55 : XOR ECX,ECX
00484a57 : JMP 0x00484a70
00484a59 : MOV ECX,dword ptr [EBX + 0xc]
00484a5c : SUB ECX,ESI
00484a5e : MOV EAX,0x2aaaaaab
00484a63 : IMUL ECX
00484a65 : SAR EDX,0x1
00484a67 : MOV EAX,EDX
00484a69 : SHR EAX,0x1f
00484a6c : ADD EAX,EDX
00484a6e : MOV ECX,EAX
00484a70 : MOV EDI,dword ptr [EBX + 0x8]
00484a73 : MOV EDX,EDI
00484a75 : SUB EDX,ESI
00484a77 : MOV EAX,0x2aaaaaab
00484a7c : IMUL EDX
00484a7e : SAR EDX,0x1
00484a80 : MOV EAX,EDX
00484a82 : SHR EAX,0x1f
00484a85 : ADD EAX,EDX
00484a87 : MOV EDX,0x15555555
00484a8c : SUB EDX,EAX
00484a8e : CMP EDX,0x1
00484a91 : JNC 0x00484a98
00484a93 : CALL 0x00452880
00484a98 : INC EAX
00484a99 : CMP ECX,EAX
00484a9b : JNC 0x00484ba1
00484aa1 : MOV EDX,ECX
00484aa3 : SHR EDX,0x1
00484aa5 : MOV ESI,0x15555555
00484aaa : SUB ESI,EDX
00484aac : CMP ESI,ECX
00484aae : JNC 0x00484abc
00484ab0 : MOV dword ptr [EBP + 0x8],0x0
00484ab7 : MOV ECX,dword ptr [EBP + 0x8]
00484aba : JMP 0x00484ac1
00484abc : ADD ECX,EDX
00484abe : MOV dword ptr [EBP + 0x8],ECX
00484ac1 : CMP ECX,EAX
00484ac3 : JNC 0x00484aca
00484ac5 : MOV dword ptr [EBP + 0x8],EAX
00484ac8 : MOV ECX,EAX
00484aca : CALL 0x0040dbb0
00484acf : MOV ESI,EAX
00484ad1 : MOV dword ptr [EBP + -0x18],ESI
00484ad4 : MOV ECX,dword ptr [EBP + 0xc]
00484ad7 : SUB ECX,dword ptr [EBX + 0x4]
00484ada : MOV EAX,0x2aaaaaab
00484adf : IMUL ECX
00484ae1 : SAR EDX,0x1
00484ae3 : MOV EAX,EDX
00484ae5 : SHR EAX,0x1f
00484ae8 : ADD EAX,EDX
00484aea : MOV dword ptr [EBP + -0x20],EAX
00484aed : MOV dword ptr [EBP + -0x4],0x0
00484af4 : LEA EAX,[EAX + EAX*0x2]
00484af7 : LEA EDI,[ESI + EAX*0x4]
00484afa : MOV EDX,dword ptr [EBP + 0x10]
00484afd : MOV ESI,0x1
00484b02 : CALL 0x004c0630
00484b07 : MOV dword ptr [EBP + -0x1c],ESI
00484b0a : MOV ECX,dword ptr [EBP + 0xc]
00484b0d : PUSH ECX
00484b0e : MOV EDX,dword ptr [EBX + 0x4]
00484b11 : PUSH EDX
00484b12 : MOV ESI,dword ptr [EBP + -0x18]
00484b15 : MOV EDX,ESI
00484b17 : CALL 0x004c0660
00484b1c : MOV dword ptr [EBP + -0x1c],0x2
00484b23 : MOV EAX,dword ptr [EBP + -0x20]
00484b26 : LEA EAX,[EAX + EAX*0x2 + 0x3]
00484b2a : LEA EDX,[ESI + EAX*0x4]
00484b2d : MOV ECX,dword ptr [EBX + 0x8]
00484b30 : PUSH ECX
00484b31 : MOV EAX,dword ptr [EBP + 0xc]
00484b34 : PUSH EAX
00484b35 : CALL 0x004c0660
00484b3a : MOV dword ptr [EBP + -0x4],0xffffffff
00484b41 : MOV ECX,dword ptr [EBX + 0x4]
00484b44 : MOV EDX,dword ptr [EBX + 0x8]
00484b47 : SUB EDX,ECX
00484b49 : MOV EAX,0x2aaaaaab
00484b4e : IMUL EDX
00484b50 : SAR EDX,0x1
00484b52 : MOV EAX,EDX
00484b54 : SHR EAX,0x1f
00484b57 : LEA EDI,[EDX + EAX*0x1 + 0x1]
00484b5b : TEST ECX,ECX
00484b5d : JZ 0x00484b64
00484b5f : CALL 0x006f04e0
00484b64 : MOV EAX,dword ptr [EBP + 0x8]
00484b67 : LEA ECX,[EAX + EAX*0x2]
00484b6a : LEA EDX,[ESI + ECX*0x4]
00484b6d : MOV dword ptr [EBX + 0xc],EDX
00484b70 : LEA EAX,[EDI + EDI*0x2]
00484b73 : LEA ECX,[ESI + EAX*0x4]
00484b76 : MOV dword ptr [EBX + 0x8],ECX
00484b79 : MOV dword ptr [EBX + 0x4],ESI
00484b7c : MOV ECX,dword ptr [EBP + -0xc]
00484b7f : MOV dword ptr FS:[0x0],ECX
00484b86 : POP ECX
00484b87 : POP EDI
00484b88 : POP ESI
00484b89 : POP EBX
00484b8a : MOV ESP,EBP
00484b8c : POP EBP
00484b8d : RET 0xc
00484ba1 : MOV ECX,EDI
00484ba3 : MOV ESI,dword ptr [EBP + 0xc]
00484ba6 : SUB ECX,ESI
00484ba8 : MOV EAX,0x2aaaaaab
00484bad : IMUL ECX
00484baf : SAR EDX,0x1
00484bb1 : MOV EAX,EDX
00484bb3 : SHR EAX,0x1f
00484bb6 : ADD EAX,EDX
00484bb8 : PUSH EDI
00484bb9 : CMP EAX,0x1
00484bbc : MOV EAX,dword ptr [EBP + 0x10]
00484bbf : MOVQ XMM0,qword ptr [EAX]
00484bc3 : MOVQ qword ptr [EBP + -0x2c],XMM0
00484bc8 : JNC 0x00484c1d
00484bca : MOV ECX,dword ptr [EAX + 0x8]
00484bcd : MOV dword ptr [EBP + -0x24],ECX
00484bd0 : LEA EDX,[ESI + 0xc]
00484bd3 : PUSH ESI
00484bd4 : CALL 0x004c0660
00484bd9 : MOV dword ptr [EBP + -0x4],0x2
00484be0 : MOV EDI,dword ptr [EBX + 0x8]
00484be3 : MOV ECX,EDI
00484be5 : SUB ECX,dword ptr [EBP + 0xc]
00484be8 : MOV EAX,0x2aaaaaab
00484bed : IMUL ECX
00484bef : SAR EDX,0x1
00484bf1 : MOV EAX,EDX
00484bf3 : SHR EAX,0x1f
00484bf6 : ADD EAX,EDX
00484bf8 : MOV ESI,0x1
00484bfd : SUB ESI,EAX
00484bff : LEA EDX,[EBP + -0x2c]
00484c02 : CALL 0x004c0630
00484c07 : MOV dword ptr [EBP + -0x4],0xffffffff
00484c0e : ADD dword ptr [EBX + 0x8],0xc
00484c12 : MOV EBX,dword ptr [EBX + 0x8]
00484c15 : LEA EDX,[EBX + -0xc]
00484c18 : MOV ECX,dword ptr [EBP + 0xc]
00484c1b : JMP 0x00484c5e
00484c1d : MOV EDX,dword ptr [EAX + 0x8]
00484c20 : MOV dword ptr [EBP + -0x24],EDX
00484c23 : LEA ESI,[EDI + -0xc]
00484c26 : PUSH ESI
00484c27 : MOV EDX,EDI
00484c29 : CALL 0x004c0660
00484c2e : MOV dword ptr [EBX + 0x8],EAX
00484c31 : MOV EAX,ESI
00484c33 : MOV ECX,dword ptr [EBP + 0xc]
00484c36 : MOV EDX,ECX
00484c38 : CMP ECX,EAX
00484c3a : JZ 0x00484c5b
00484c3c : LEA ECX,[EAX + 0xc]
00484c3f : NOP
00484c40 : SUB EAX,0xc
00484c43 : SUB ECX,0xc
00484c46 : MOVQ XMM0,qword ptr [EAX]
00484c4a : MOVQ qword ptr [ECX],XMM0
00484c4e : MOV ESI,dword ptr [EAX + 0x8]
00484c51 : MOV dword ptr [ECX + 0x8],ESI
00484c54 : CMP EAX,EDX
00484c56 : JNZ 0x00484c40
00484c58 : MOV ECX,dword ptr [EBP + 0xc]
00484c5b : LEA EDX,[ECX + 0xc]
00484c5e : PUSH ECX
00484c5f : LEA ECX,[EBP + -0x2c]
00484c62 : CALL 0x004cd730
00484c67 : ADD ESP,0x4
00484c6a : MOV ECX,dword ptr [EBP + -0xc]
00484c6d : MOV dword ptr FS:[0x0],ECX
00484c74 : POP ECX
00484c75 : POP EDI
00484c76 : POP ESI
00484c77 : POP EBX
00484c78 : MOV ESP,EBP
00484c7a : POP EBP
00484c7b : RET 0xc
