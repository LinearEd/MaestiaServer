PROGRAM  : Maestia.exe
FUNCTION : FUN_0053e560
ENTRY    : 0053e560
BODY     : [[0053e560, 0053e793]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053e560(int param_1,int param_2,int param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  undefined4 in_ECX;
  short *psVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  undefined1 *puVar9;
  undefined1 *puVar10;
  int local_f4;
  int local_f0;
  int local_ec;
  undefined **local_e8;
  undefined4 local_e4;
  undefined4 local_e0;
  undefined2 local_dc;
  undefined2 local_da;
  undefined2 local_d8;
  undefined2 local_d6;
  undefined2 local_d4;
  undefined2 local_d2;
  int *local_d0;
  int local_cc;
  undefined **local_c8 [6];
  undefined1 local_b0 [44];
  undefined1 local_84 [44];
  undefined1 local_58 [44];
  undefined1 local_2c [44];
  
  uVar6 = param_4 - param_3;
  FUN_0053c2d0(&local_d0,param_3,&local_f4);
  uVar3 = FUN_00515dd0(in_ECX);
  FUN_00504200(uVar3);
  local_e4 = 1;
  local_e8 = &PTR_FUN_00b86064;
  local_e0 = 0;
  local_dc = 0;
  local_da = 0;
  local_d8 = 0;
  local_d6 = 0;
  local_d4 = 0;
  local_d2 = 0;
  local_f0 = 0;
  local_ec = 0;
  iVar2 = local_f0;
  iVar7 = local_cc;
  while ((((uVar6 != 0 && (local_d0 != (int *)0x0)) && (-1 < iVar7)) && (iVar7 < local_d0[1]))) {
    piVar1 = *(int **)(*local_d0 + iVar7 * 4);
    uVar4 = piVar1[1];
    if (uVar4 != 0) {
      if ((*piVar1 == 0) || (uVar4 <= uVar4 - 1)) {
        psVar5 = (short *)0x0;
      }
      else {
        psVar5 = (short *)(*piVar1 + (uVar4 - 1) * 2);
      }
      if (*psVar5 == 0) {
        uVar4 = uVar4 - 1;
      }
    }
    uVar8 = uVar6;
    if (uVar4 <= uVar6) {
      uVar8 = uVar4;
    }
    if (uVar8 == 0) break;
    local_f0 = iVar2 + 1;
    if (iVar2 == 0) {
      uVar3 = FUN_0053e340(local_58,local_f4,uVar8 + local_f4);
      FUN_00504700(uVar3);
    }
    else {
      puVar10 = local_b0;
      puVar9 = local_84;
      FUN_0053e340(local_2c,local_f4,uVar8 + local_f4);
      uVar3 = FUN_00560000(puVar9,puVar10);
      FUN_00504700(uVar3);
      FUN_00504260();
    }
    FUN_00504260();
    if ((local_f4 == 0) && (piVar1[3] != 0)) {
      if (local_ec == 0) {
        local_ec = local_ec + 1;
        FUN_0055ee10(piVar1[3]);
      }
      else {
        local_ec = local_ec + 1;
        uVar3 = FUN_0055f490(local_c8,&local_e8);
        FUN_0055ee10(uVar3);
        local_c8[0] = &PTR_FUN_00b86064;
        FUN_0055e7c0();
        GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)local_c8);
      }
    }
    uVar6 = uVar6 - uVar8;
    iVar2 = local_f0;
    if (iVar7 < local_d0[1]) {
      iVar7 = iVar7 + 1;
    }
  }
  local_f0 = iVar2;
  if (param_1 != 0) {
    FUN_00504700(local_b0);
  }
  if (param_2 != 0) {
    FUN_0055ee10(&local_e8);
  }
  local_e8 = &PTR_FUN_00b86064;
  FUN_0055e7c0();
  GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)&local_e8);
  FUN_00504260();
  return;
}



============================================================
DISASSEMBLY
============================================================
0053e560 : SUB ESP,0xf4
0053e566 : MOV EAX,dword ptr [ESP + 0x100]
0053e56d : PUSH EBX
0053e56e : MOV EBX,dword ptr [ESP + 0x108]
0053e575 : PUSH ESI
0053e576 : MOV ESI,ECX
0053e578 : LEA ECX,[ESP + 0x8]
0053e57c : PUSH ECX
0053e57d : PUSH EAX
0053e57e : LEA EDX,[ESP + 0x34]
0053e582 : PUSH EDX
0053e583 : MOV ECX,ESI
0053e585 : SUB EBX,EAX
0053e587 : CALL 0x0053c2d0
0053e58c : PUSH ESI
0053e58d : CALL 0x00515dd0
0053e592 : PUSH EAX
0053e593 : LEA ECX,[ESP + 0x50]
0053e597 : CALL 0x00504200
0053e59c : XOR EAX,EAX
0053e59e : XOR ECX,ECX
0053e5a0 : XOR EDX,EDX
0053e5a2 : MOV dword ptr [ESP + 0x14],0xcd3f2c
0053e5aa : MOV dword ptr [ESP + 0x18],0x1
0053e5b2 : MOV dword ptr [ESP + 0x14],0xb86064
0053e5ba : MOV dword ptr [ESP + 0x1c],EAX
0053e5be : MOV word ptr [ESP + 0x20],CX
0053e5c3 : MOV word ptr [ESP + 0x22],DX
0053e5c8 : MOV word ptr [ESP + 0x24],CX
0053e5cd : MOV word ptr [ESP + 0x26],DX
0053e5d2 : MOV word ptr [ESP + 0x28],CX
0053e5d7 : MOV word ptr [ESP + 0x2a],DX
0053e5dc : MOV dword ptr [ESP + 0xc],EAX
0053e5e0 : MOV dword ptr [ESP + 0x10],EAX
0053e5e4 : CMP EBX,EAX
0053e5e6 : JBE 0x0053e73c
0053e5ec : PUSH EBP
0053e5ed : MOV EBP,dword ptr [ESP + 0x34]
0053e5f1 : PUSH EDI
0053e5f2 : MOV EAX,dword ptr [ESP + 0x34]
0053e5f6 : TEST EAX,EAX
0053e5f8 : JZ 0x0053e73a
0053e5fe : TEST EBP,EBP
0053e600 : JL 0x0053e73a
0053e606 : CMP EBP,dword ptr [EAX + 0x4]
0053e609 : JGE 0x0053e73a
0053e60f : MOV EAX,dword ptr [EAX]
0053e611 : MOV ESI,dword ptr [EAX + EBP*0x4]
0053e614 : MOV EAX,dword ptr [ESI + 0x4]
0053e617 : TEST EAX,EAX
0053e619 : JBE 0x0053e636
0053e61b : MOV ECX,dword ptr [ESI]
0053e61d : LEA EDX,[EAX + -0x1]
0053e620 : TEST ECX,ECX
0053e622 : JZ 0x0053e62d
0053e624 : CMP EDX,EAX
0053e626 : JNC 0x0053e62d
0053e628 : LEA ECX,[ECX + EDX*0x2]
0053e62b : JMP 0x0053e62f
0053e62d : XOR ECX,ECX
0053e62f : CMP word ptr [ECX],0x0
0053e633 : JNZ 0x0053e636
0053e635 : DEC EAX
0053e636 : MOV EDI,EBX
0053e638 : CMP EBX,EAX
0053e63a : JC 0x0053e63e
0053e63c : MOV EDI,EAX
0053e63e : TEST EDI,EDI
0053e640 : JZ 0x0053e73a
0053e646 : MOV EAX,dword ptr [ESP + 0x14]
0053e64a : MOV ECX,EAX
0053e64c : INC EAX
0053e64d : MOV dword ptr [ESP + 0x14],EAX
0053e651 : MOV EAX,dword ptr [ESP + 0x10]
0053e655 : TEST ECX,ECX
0053e657 : JNZ 0x0053e680
0053e659 : LEA EDX,[EDI + EAX*0x1]
0053e65c : PUSH EDX
0053e65d : PUSH EAX
0053e65e : LEA EAX,[ESP + 0xb4]
0053e665 : PUSH EAX
0053e666 : MOV ECX,ESI
0053e668 : CALL 0x0053e340
0053e66d : PUSH EAX
0053e66e : LEA ECX,[ESP + 0x58]
0053e672 : CALL 0x00504700
0053e677 : LEA ECX,[ESP + 0xac]
0053e67e : JMP 0x0053e6c5
0053e680 : LEA ECX,[ESP + 0x54]
0053e684 : PUSH ECX
0053e685 : LEA EDX,[ESP + 0x84]
0053e68c : PUSH EDX
0053e68d : LEA ECX,[EDI + EAX*0x1]
0053e690 : PUSH ECX
0053e691 : PUSH EAX
0053e692 : LEA EDX,[ESP + 0xe8]
0053e699 : PUSH EDX
0053e69a : MOV ECX,ESI
0053e69c : CALL 0x0053e340
0053e6a1 : MOV ECX,EAX
0053e6a3 : CALL 0x00560000
0053e6a8 : PUSH EAX
0053e6a9 : LEA ECX,[ESP + 0x58]
0053e6ad : CALL 0x00504700
0053e6b2 : LEA ECX,[ESP + 0x80]
0053e6b9 : CALL 0x00504260
0053e6be : LEA ECX,[ESP + 0xd8]
0053e6c5 : CALL 0x00504260
0053e6ca : CMP dword ptr [ESP + 0x10],0x0
0053e6cf : JNZ 0x0053e726
0053e6d1 : MOV ECX,dword ptr [ESI + 0xc]
0053e6d4 : TEST ECX,ECX
0053e6d6 : JZ 0x0053e726
0053e6d8 : MOV EAX,dword ptr [ESP + 0x18]
0053e6dc : MOV EDX,EAX
0053e6de : INC EAX
0053e6df : MOV dword ptr [ESP + 0x18],EAX
0053e6e3 : TEST EDX,EDX
0053e6e5 : JNZ 0x0053e6f3
0053e6e7 : PUSH ECX
0053e6e8 : LEA ECX,[ESP + 0x20]
0053e6ec : CALL 0x0055ee10
0053e6f1 : JMP 0x0053e726
0053e6f3 : LEA EAX,[ESP + 0x1c]
0053e6f7 : PUSH EAX
0053e6f8 : LEA EDX,[ESP + 0x40]
0053e6fc : PUSH EDX
0053e6fd : CALL 0x0055f490
0053e702 : PUSH EAX
0053e703 : LEA ECX,[ESP + 0x20]
0053e707 : CALL 0x0055ee10
0053e70c : LEA ECX,[ESP + 0x3c]
0053e710 : MOV dword ptr [ESP + 0x3c],0xb86064
0053e718 : CALL 0x0055e7c0
0053e71d : LEA ECX,[ESP + 0x3c]
0053e721 : CALL 0x004ff7b0
0053e726 : MOV EAX,dword ptr [ESP + 0x34]
0053e72a : SUB EBX,EDI
0053e72c : CMP EBP,dword ptr [EAX + 0x4]
0053e72f : JGE 0x0053e732
0053e731 : INC EBP
0053e732 : TEST EBX,EBX
0053e734 : JA 0x0053e5f2
0053e73a : POP EDI
0053e73b : POP EBP
0053e73c : MOV ECX,dword ptr [ESP + 0x100]
0053e743 : POP ESI
0053e744 : POP EBX
0053e745 : TEST ECX,ECX
0053e747 : JZ 0x0053e753
0053e749 : LEA EDX,[ESP + 0x44]
0053e74d : PUSH EDX
0053e74e : CALL 0x00504700
0053e753 : MOV ECX,dword ptr [ESP + 0xfc]
0053e75a : TEST ECX,ECX
0053e75c : JZ 0x0053e768
0053e75e : LEA EAX,[ESP + 0xc]
0053e762 : PUSH EAX
0053e763 : CALL 0x0055ee10
0053e768 : LEA ECX,[ESP + 0xc]
0053e76c : MOV dword ptr [ESP + 0xc],0xb86064
0053e774 : CALL 0x0055e7c0
0053e779 : LEA ECX,[ESP + 0xc]
0053e77d : CALL 0x004ff7b0
0053e782 : LEA ECX,[ESP + 0x44]
0053e786 : CALL 0x00504260
0053e78b : ADD ESP,0xf4
0053e791 : RET 0x10
