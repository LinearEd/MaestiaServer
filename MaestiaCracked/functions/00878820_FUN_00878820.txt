PROGRAM  : Maestia.exe
FUNCTION : FUN_00878820
ENTRY    : 00878820
BODY     : [[00878820, 00878940]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00878820(int param_1,char param_2)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  float *pfVar4;
  float *pfVar5;
  DWORD DVar6;
  
  if (param_2 != '\0') {
    *(undefined4 *)(param_1 + 0x78) = 1;
  }
  if (DAT_0172491c == 0) {
    return 0;
  }
  iVar1 = *(int *)(DAT_0172491c + 0x17c);
  uVar2 = *(undefined4 *)(DAT_00da93ec + 0x24c);
  iVar3 = FUN_00a1a840(uVar2);
  if ((iVar3 == 0) && (iVar3 = FUN_00a1a6d0(uVar2), iVar3 == 0)) {
    iVar3 = FUN_00a1a780(uVar2);
  }
  if ((iVar1 != 0) && (iVar3 != 0)) {
    if ((*(int *)(iVar1 + 1000) != 0) && (*(int *)(iVar3 + 1000) != 0)) {
      pfVar4 = (float *)FUN_007cc270();
      pfVar5 = (float *)FUN_007cc270();
      if (((*pfVar5 == *pfVar4) && (pfVar5[1] == pfVar4[1])) && (pfVar5[2] == pfVar4[2])) {
        return 0;
      }
    }
    iVar1 = DAT_017247e4;
    if (*(char *)(param_1 + 0x68) != '\0') {
      *(undefined1 *)(param_1 + 0x68) = 0;
      *(undefined4 *)(iVar1 + 4) = 0;
      *(undefined4 *)(iVar1 + 0x10) = 0;
      *(undefined4 *)(iVar1 + 0x14) = 0;
    }
    *(undefined4 *)(param_1 + 100) = 0;
    if (*(int *)(iVar1 + 4) == 0) {
      DVar6 = timeGetTime();
      iVar3 = DAT_017251ac;
      *(DWORD *)(iVar1 + 0xc) = DVar6;
      *(undefined4 *)(iVar1 + 0x14) = 0;
      *(undefined4 *)(iVar1 + 0x10) = 300;
      *(int *)(iVar1 + 4) = 2;
      *(undefined4 *)(iVar3 + 0x49c) = 0x3f800000;
    }
    return 1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00878820 : PUSH EBP
00878821 : MOV EBP,ESP
00878823 : CMP byte ptr [EBP + 0xc],0x0
00878827 : JZ 0x00878833
00878829 : MOV EAX,dword ptr [EBP + 0x8]
0087882c : MOV dword ptr [EAX + 0x78],0x1
00878833 : MOV EAX,[0x0172491c]
00878838 : TEST EAX,EAX
0087883a : JNZ 0x00878840
0087883c : POP EBP
0087883d : RET 0x8
00878840 : MOV ECX,dword ptr [0x00da93ec]
00878846 : PUSH EBX
00878847 : MOV EBX,dword ptr [EAX + 0x17c]
0087884d : PUSH ESI
0087884e : MOV ESI,dword ptr [ECX + 0x24c]
00878854 : PUSH EDI
00878855 : PUSH ESI
00878856 : MOV EDI,ECX
00878858 : CALL 0x00a1a840
0087885d : TEST EAX,EAX
0087885f : JNZ 0x00878875
00878861 : PUSH ESI
00878862 : MOV ECX,EDI
00878864 : CALL 0x00a1a6d0
00878869 : TEST EAX,EAX
0087886b : JNZ 0x00878875
0087886d : PUSH ESI
0087886e : MOV ECX,EDI
00878870 : CALL 0x00a1a780
00878875 : TEST EBX,EBX
00878877 : JZ 0x008788d0
00878879 : TEST EAX,EAX
0087887b : JZ 0x008788d0
0087887d : MOV EBX,dword ptr [EBX + 0x3e8]
00878883 : XOR EDX,EDX
00878885 : CMP EBX,EDX
00878887 : JZ 0x008788db
00878889 : MOV EAX,dword ptr [EAX + 0x3e8]
0087888f : CMP EAX,EDX
00878891 : JZ 0x008788db
00878893 : MOV ESI,EAX
00878895 : CALL 0x007cc270
0087889a : MOV ESI,EBX
0087889c : MOV EDI,EAX
0087889e : CALL 0x007cc270
008788a3 : MOV ECX,EAX
008788a5 : MOVSS XMM0,dword ptr [ECX]
008788a9 : UCOMISS XMM0,dword ptr [EDI]
008788ac : LAHF
008788ad : TEST AH,0x44
008788b0 : JP 0x008788d9
008788b2 : MOVSS XMM0,dword ptr [ECX + 0x4]
008788b7 : UCOMISS XMM0,dword ptr [EDI + 0x4]
008788bb : LAHF
008788bc : TEST AH,0x44
008788bf : JP 0x008788d9
008788c1 : MOVSS XMM0,dword ptr [ECX + 0x8]
008788c6 : UCOMISS XMM0,dword ptr [EDI + 0x8]
008788ca : LAHF
008788cb : TEST AH,0x44
008788ce : JP 0x008788d9
008788d0 : POP EDI
008788d1 : POP ESI
008788d2 : XOR EAX,EAX
008788d4 : POP EBX
008788d5 : POP EBP
008788d6 : RET 0x8
008788d9 : XOR EDX,EDX
008788db : MOV ECX,dword ptr [EBP + 0x8]
008788de : CMP byte ptr [ECX + 0x68],0x0
008788e2 : MOV EAX,[0x017247e4]
008788e7 : JZ 0x008788f6
008788e9 : MOV byte ptr [ECX + 0x68],0x0
008788ed : MOV dword ptr [EAX + 0x4],EDX
008788f0 : MOV dword ptr [EAX + 0x10],EDX
008788f3 : MOV dword ptr [EAX + 0x14],EDX
008788f6 : LEA EDI,[EAX + 0x4]
008788f9 : MOV dword ptr [ECX + 0x64],EDX
008788fc : MOV ESI,EAX
008788fe : CMP dword ptr [EDI],EDX
00878900 : JNZ 0x00878935
00878902 : CALL dword ptr [0x00b85598]
00878908 : MOV ECX,dword ptr [0x017251ac]
0087890e : MOVSS XMM0,dword ptr [0x00c10fc4]
00878916 : MOV dword ptr [ESI + 0xc],EAX
00878919 : MOV dword ptr [ESI + 0x14],0x0
00878920 : MOV dword ptr [ESI + 0x10],0x12c
00878927 : MOV dword ptr [EDI],0x2
0087892d : MOVSS dword ptr [ECX + 0x49c],XMM0
00878935 : POP EDI
00878936 : POP ESI
00878937 : MOV EAX,0x1
0087893c : POP EBX
0087893d : POP EBP
0087893e : RET 0x8
