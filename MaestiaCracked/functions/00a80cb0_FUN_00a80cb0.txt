PROGRAM  : Maestia.exe
FUNCTION : FUN_00a80cb0
ENTRY    : 00a80cb0
BODY     : [[00a80cb0, 00a80f3b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a80cb0(int param_1)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  int iVar4;
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3518e;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar4 = 0;
  iVar2 = FUN_006f0760(0x110,"",0,(DAT_01725270 >> 3 & 1) == 0,DAT_00d66fa0 ^ (uint)&stack0xfffffffc
                      );
  local_8 = 0;
  if (iVar2 != 0) {
    iVar4 = FUN_0042d120(iVar2);
  }
  local_8 = 0xffffffff;
  FUN_0042cf60();
  *(undefined1 *)(iVar4 + 0xf0) = 1;
  iVar2 = *(int *)(*(int *)(in_ECX + 0x6c) + 0x1bc);
  if (iVar2 == 0) {
    iVar2 = FUN_00a7ffb0();
    if (0x13 < (int)(iVar2 + (uint)*(ushort *)(param_1 + 0xd2))) {
      if (DAT_0172491c == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*DAT_00da9894 == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
        ExceptionList = local_10;
        return;
      }
      FUN_00406460(L"IDS_PREMIUMSHOP_BASKET_MAXIMUM_ITEMCOUNT");
      local_8 = 1;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 2;
      (**(code **)(*piVar1 + 0x44))(uVar3,3);
      local_8 = CONCAT31(local_8._1_3_,1);
      goto LAB_00a80dcb;
    }
  }
  else if (iVar2 == 1) {
    iVar2 = FUN_00a7ffb0();
    if (0x13 < (int)(iVar2 + (uint)*(ushort *)(param_1 + 0xd2))) {
      if (DAT_0172491c == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*DAT_00da9894 == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
        ExceptionList = local_10;
        return;
      }
      FUN_00406460(L"IDS_PREMIUMSHOP_BASKET_MAXIMUM_ITEMCOUNT");
      local_8 = 3;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 4;
      (**(code **)(*piVar1 + 0x44))(uVar3,3);
      local_8 = CONCAT31(local_8._1_3_,3);
LAB_00a80dcb:
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
  }
  else {
    if (iVar2 != 2) {
      ExceptionList = local_10;
      return;
    }
    iVar2 = FUN_00a7ffb0();
    if (0x13 < (int)(iVar2 + (uint)*(ushort *)(param_1 + 0xd2))) {
      if (DAT_0172491c == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*DAT_00da9894 == 0) {
        ExceptionList = local_10;
        return;
      }
      if (*(int *)(*DAT_00da9894 + 0x1a8) == 0) {
        ExceptionList = local_10;
        return;
      }
      FUN_00406460(L"IDS_PREMIUMSHOP_BASKET_MAXIMUM_ITEMCOUNT");
      local_8 = 5;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar3 = FUN_0081d120(local_2c);
      local_8._0_1_ = 6;
      (**(code **)(*piVar1 + 0x44))(uVar3,3);
      local_8 = CONCAT31(local_8._1_3_,5);
      goto LAB_00a80dcb;
    }
  }
  FUN_00449730();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a80cb0 : PUSH EBP
00a80cb1 : MOV EBP,ESP
00a80cb3 : PUSH -0x1
00a80cb5 : PUSH 0xb3518e
00a80cba : MOV EAX,FS:[0x0]
00a80cc0 : PUSH EAX
00a80cc1 : SUB ESP,0x38
00a80cc4 : PUSH EBX
00a80cc5 : PUSH ESI
00a80cc6 : PUSH EDI
00a80cc7 : MOV EAX,[0x00d66fa0]
00a80ccc : XOR EAX,EBP
00a80cce : PUSH EAX
00a80ccf : LEA EAX,[EBP + -0xc]
00a80cd2 : MOV FS:[0x0],EAX
00a80cd8 : MOV EBX,dword ptr [EBP + 0x8]
00a80cdb : MOV EDI,ECX
00a80cdd : MOV EAX,[0x01725270]
00a80ce2 : SHR EAX,0x3
00a80ce5 : MOV ECX,0x0
00a80cea : AND EAX,0x1
00a80ced : SETZ CL
00a80cf0 : XOR ESI,ESI
00a80cf2 : PUSH ECX
00a80cf3 : PUSH ESI
00a80cf4 : PUSH 0xbf1a4a
00a80cf9 : PUSH 0x110
00a80cfe : CALL 0x006f0760
00a80d03 : ADD ESP,0x10
00a80d06 : MOV dword ptr [EBP + 0x8],EAX
00a80d09 : MOV dword ptr [EBP + -0x4],ESI
00a80d0c : CMP EAX,ESI
00a80d0e : JZ 0x00a80d18
00a80d10 : PUSH EAX
00a80d11 : CALL 0x0042d120
00a80d16 : MOV ESI,EAX
00a80d18 : MOV dword ptr [EBP + -0x4],0xffffffff
00a80d1f : MOV EAX,EBX
00a80d21 : MOV ECX,ESI
00a80d23 : MOV dword ptr [EBP + 0x8],ESI
00a80d26 : CALL 0x0042cf60
00a80d2b : MOV byte ptr [ESI + 0xf0],0x1
00a80d32 : MOV EDX,dword ptr [EDI + 0x6c]
00a80d35 : MOV EAX,dword ptr [EDX + 0x1bc]
00a80d3b : TEST EAX,EAX
00a80d3d : JNZ 0x00a80dfe
00a80d43 : CALL 0x00a7ffb0
00a80d48 : MOVZX ECX,word ptr [EBX + 0xd2]
00a80d4f : ADD EAX,ECX
00a80d51 : CMP EAX,0x14
00a80d54 : JL 0x00a80df6
00a80d5a : CMP dword ptr [0x0172491c],0x0
00a80d61 : JZ 0x00a80f28
00a80d67 : MOV EDX,dword ptr [0x00da9894]
00a80d6d : MOV EAX,dword ptr [EDX]
00a80d6f : TEST EAX,EAX
00a80d71 : JZ 0x00a80f28
00a80d77 : CMP dword ptr [EAX + 0x1a8],0x0
00a80d7e : JZ 0x00a80f28
00a80d84 : PUSH 0xc54e48
00a80d89 : LEA ECX,[EBP + -0x28]
00a80d8c : CALL 0x00406460
00a80d91 : MOV dword ptr [EBP + -0x4],0x1
00a80d98 : MOV EAX,[0x00da9894]
00a80d9d : MOV EAX,dword ptr [EAX]
00a80d9f : MOV ESI,dword ptr [EAX + 0x1a8]
00a80da5 : LEA ECX,[EBP + -0x28]
00a80da8 : PUSH ECX
00a80da9 : MOV ECX,dword ptr [0x0172491c]
00a80daf : LEA EDI,[EBP + -0x44]
00a80db2 : CALL 0x0081d120
00a80db7 : MOV byte ptr [EBP + -0x4],0x2
00a80dbb : MOV EDX,dword ptr [ESI]
00a80dbd : PUSH 0x3
00a80dbf : PUSH EAX
00a80dc0 : MOV EAX,dword ptr [EDX + 0x44]
00a80dc3 : MOV ECX,ESI
00a80dc5 : CALL EAX
00a80dc7 : MOV byte ptr [EBP + -0x4],0x1
00a80dcb : LEA ECX,[EBP + -0x44]
00a80dce : CALL 0x00406560
00a80dd3 : MOV dword ptr [EBP + -0x4],0xffffffff
00a80dda : LEA ECX,[EBP + -0x28]
00a80ddd : CALL 0x00406560
00a80de2 : MOV ECX,dword ptr [EBP + -0xc]
00a80de5 : MOV dword ptr FS:[0x0],ECX
00a80dec : POP ECX
00a80ded : POP EDI
00a80dee : POP ESI
00a80def : POP EBX
00a80df0 : MOV ESP,EBP
00a80df2 : POP EBP
00a80df3 : RET 0x4
00a80df6 : LEA EDX,[EDI + 0x38]
00a80df9 : JMP 0x00a80f20
00a80dfe : CMP EAX,0x1
00a80e01 : JNZ 0x00a80e97
00a80e07 : CALL 0x00a7ffb0
00a80e0c : MOVZX ECX,word ptr [EBX + 0xd2]
00a80e13 : ADD EAX,ECX
00a80e15 : CMP EAX,0x14
00a80e18 : JL 0x00a80e8f
00a80e1a : CMP dword ptr [0x0172491c],0x0
00a80e21 : JZ 0x00a80f28
00a80e27 : MOV EDX,dword ptr [0x00da9894]
00a80e2d : MOV EAX,dword ptr [EDX]
00a80e2f : TEST EAX,EAX
00a80e31 : JZ 0x00a80f28
00a80e37 : CMP dword ptr [EAX + 0x1a8],0x0
00a80e3e : JZ 0x00a80f28
00a80e44 : PUSH 0xc54ea0
00a80e49 : LEA ECX,[EBP + -0x28]
00a80e4c : CALL 0x00406460
00a80e51 : MOV EBX,0x3
00a80e56 : MOV dword ptr [EBP + -0x4],EBX
00a80e59 : MOV EAX,[0x00da9894]
00a80e5e : MOV EAX,dword ptr [EAX]
00a80e60 : MOV ESI,dword ptr [EAX + 0x1a8]
00a80e66 : LEA ECX,[EBP + -0x28]
00a80e69 : PUSH ECX
00a80e6a : MOV ECX,dword ptr [0x0172491c]
00a80e70 : LEA EDI,[EBP + -0x44]
00a80e73 : CALL 0x0081d120
00a80e78 : MOV byte ptr [EBP + -0x4],0x4
00a80e7c : MOV EDX,dword ptr [ESI]
00a80e7e : PUSH EBX
00a80e7f : PUSH EAX
00a80e80 : MOV EAX,dword ptr [EDX + 0x44]
00a80e83 : MOV ECX,ESI
00a80e85 : CALL EAX
00a80e87 : MOV byte ptr [EBP + -0x4],BL
00a80e8a : JMP 0x00a80dcb
00a80e8f : LEA EDX,[EDI + 0x48]
00a80e92 : JMP 0x00a80f20
00a80e97 : CMP EAX,0x2
00a80e9a : JNZ 0x00a80f28
00a80ea0 : CALL 0x00a7ffb0
00a80ea5 : MOVZX ECX,word ptr [EBX + 0xd2]
00a80eac : ADD EAX,ECX
00a80eae : CMP EAX,0x14
00a80eb1 : JL 0x00a80f1d
00a80eb3 : CMP dword ptr [0x0172491c],0x0
00a80eba : JZ 0x00a80f28
00a80ebc : MOV EDX,dword ptr [0x00da9894]
00a80ec2 : MOV EAX,dword ptr [EDX]
00a80ec4 : TEST EAX,EAX
00a80ec6 : JZ 0x00a80f28
00a80ec8 : CMP dword ptr [EAX + 0x1a8],0x0
00a80ecf : JZ 0x00a80f28
00a80ed1 : PUSH 0xc54ef8
00a80ed6 : LEA ECX,[EBP + -0x28]
00a80ed9 : CALL 0x00406460
00a80ede : MOV EBX,0x5
00a80ee3 : MOV dword ptr [EBP + -0x4],EBX
00a80ee6 : MOV EAX,[0x00da9894]
00a80eeb : MOV EAX,dword ptr [EAX]
00a80eed : MOV ESI,dword ptr [EAX + 0x1a8]
00a80ef3 : LEA ECX,[EBP + -0x28]
00a80ef6 : PUSH ECX
00a80ef7 : MOV ECX,dword ptr [0x0172491c]
00a80efd : LEA EDI,[EBP + -0x44]
00a80f00 : CALL 0x0081d120
00a80f05 : MOV byte ptr [EBP + -0x4],0x6
00a80f09 : MOV EDX,dword ptr [ESI]
00a80f0b : PUSH 0x3
00a80f0d : PUSH EAX
00a80f0e : MOV EAX,dword ptr [EDX + 0x44]
00a80f11 : MOV ECX,ESI
00a80f13 : CALL EAX
00a80f15 : MOV byte ptr [EBP + -0x4],BL
00a80f18 : JMP 0x00a80dcb
00a80f1d : LEA EDX,[EDI + 0x58]
00a80f20 : LEA EDI,[EBP + 0x8]
00a80f23 : CALL 0x00449730
00a80f28 : MOV ECX,dword ptr [EBP + -0xc]
00a80f2b : MOV dword ptr FS:[0x0],ECX
00a80f32 : POP ECX
00a80f33 : POP EDI
00a80f34 : POP ESI
00a80f35 : POP EBX
00a80f36 : MOV ESP,EBP
00a80f38 : POP EBP
00a80f39 : RET 0x4
