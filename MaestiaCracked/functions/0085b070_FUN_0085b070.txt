PROGRAM  : Maestia.exe
FUNCTION : FUN_0085b070
ENTRY    : 0085b070
BODY     : [[0085b070, 0085b0c2] [0085b0c9, 0085b0df] [0085b0e6, 0085b0fc] [0085b103, 0085b117] [0085b120, 0085b405]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0085b17d) */

void FUN_0085b070(char param_1)

{
  int *piVar1;
  short sVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  int *in_ECX;
  int iVar5;
  int iVar6;
  uint local_20;
  int local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b34671;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((char)in_ECX[0xec] != '\0') {
    iVar6 = 0;
    if (in_ECX[0x112] != 0) {
      FUN_00a684f0(in_ECX[0x112]);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (in_ECX[0x113] != 0) {
      FUN_00a684f0(in_ECX[0x113]);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (in_ECX[0x114] != 0) {
      FUN_00a684f0(in_ECX[0x114]);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar5 = in_ECX[0x117] - in_ECX[0x116] >> 2;
    if (0 < iVar5) {
      do {
        if (*(int *)(in_ECX[0x116] + iVar6 * 4) != 0) {
          local_18 = *(int *)(in_ECX[0x116] + iVar6 * 4);
          if (local_18 != 0) {
            FUN_00a684f0(local_18);
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          *(undefined4 *)(in_ECX[0x116] + iVar6 * 4) = 0;
          local_18 = 0;
        }
        iVar6 = iVar6 + 1;
      } while (iVar6 < iVar5);
    }
    if (in_ECX[0x116] != in_ECX[0x117]) {
      in_ECX[0x117] = in_ECX[0x116];
    }
    *(undefined1 *)(in_ECX + 0xec) = 0;
  }
  iVar6 = FUN_006f0760(0xec,".\\Loading\\AvaBaseBackgroundLoader.cpp",0xf0,0,local_14);
  local_8 = 8;
  if (iVar6 == 0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    puVar3 = (undefined4 *)FUN_00793d40(iVar6);
  }
  iVar5 = DAT_017251b8;
  local_8 = 0xffffffff;
  local_18 = 0;
  FUN_00484470(&local_18);
  if (iVar6 == *(int *)(iVar5 + 0x50)) {
    local_18 = 0;
  }
  else {
    local_18 = *(int *)(iVar6 + 0x10);
  }
  if ((param_1 == '\0') || (local_18 == 0)) {
    FUN_008018d0(L"[AvaPlayerCharacter::LoadCharacterData] %d ",in_ECX[1]);
    if (puVar3 != (undefined4 *)0x0) {
      (**(code **)*puVar3)(1);
    }
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 8) + 0x138 + (int)in_ECX) + 0x10))(0);
    if (*(short *)((int)in_ECX + 0x43a) != 9) {
      (**(code **)(*in_ECX + 0x188))(0x14,1,1,1,0,0x3f800000);
    }
    goto LAB_0085b3e8;
  }
  sVar2 = (**(code **)(*in_ECX + 0x1e4))();
  iVar6 = DAT_017248ec;
  puVar3[0xb] = (-(uint)(sVar2 != 0) & 0xfffffffd) + 5;
  DAT_017248ec = DAT_017248ec + 1;
  uVar4 = FUN_00404750(L"%d_%d",in_ECX[1],iVar6);
  local_8 = 0xb;
  FUN_00405eb0(uVar4,0,0xffffffff);
  iVar6 = DAT_00da93ec;
  local_8 = 0xffffffff;
  if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  puVar3[0x39] = in_ECX[1];
  puVar3[0x23] = *(int *)(in_ECX[0x4e] + 8) + 0x138 + (int)in_ECX;
  if ((char)in_ECX[0x693] == '\0') {
    if (iVar6 == 0) goto LAB_0085b2d9;
    iVar5 = iVar6 + 0x10;
  }
  else if (DAT_00d7c550 == 0) {
LAB_0085b2d9:
    iVar5 = 0;
  }
  else {
    iVar5 = DAT_00d7c550 + 0x1c;
  }
  puVar3[0x3a] = iVar5;
  FUN_00793060();
  FUN_00793130();
  if ((iVar6 != 0) && (*(char *)(iVar6 + 0x178) != '\0')) {
    (**(code **)(*in_ECX + 0x458))(1);
  }
  piVar1 = *(int **)(in_ECX[0xfa] + 0x2c);
  in_ECX[0xe8] = (int)piVar1;
  if (piVar1 != (int *)0x0) {
    (**(code **)(*piVar1 + 0x28))(in_ECX[0xfa] + 0xc);
  }
  (**(code **)(*in_ECX + 0x1fc))(1);
  FUN_00792980();
  if (*(short *)((int)in_ECX + 0x43a) != 9) {
    (**(code **)(*in_ECX + 0x188))(0x14,1,1,1,0,0x3f800000);
  }
LAB_0085b3e8:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0085b070 : PUSH EBP
0085b071 : MOV EBP,ESP
0085b073 : PUSH -0x1
0085b075 : PUSH 0xb34671
0085b07a : MOV EAX,FS:[0x0]
0085b080 : PUSH EAX
0085b081 : SUB ESP,0x28
0085b084 : MOV EAX,[0x00d66fa0]
0085b089 : XOR EAX,EBP
0085b08b : MOV dword ptr [EBP + -0x10],EAX
0085b08e : PUSH EBX
0085b08f : PUSH ESI
0085b090 : PUSH EDI
0085b091 : PUSH EAX
0085b092 : LEA EAX,[EBP + -0xc]
0085b095 : MOV FS:[0x0],EAX
0085b09b : MOV EBX,ECX
0085b09d : CMP byte ptr [EBX + 0x3b0],0x0
0085b0a4 : JZ 0x0085b196
0085b0aa : MOV ESI,dword ptr [EBX + 0x448]
0085b0b0 : XOR EDI,EDI
0085b0b2 : CMP ESI,EDI
0085b0b4 : JZ 0x0085b0c9
0085b0b6 : PUSH ESI
0085b0b7 : CALL 0x00a684f0
0085b0bc : MOV ECX,ESI
0085b0be : CALL 0x006f04e0
0085b0c9 : MOV ESI,dword ptr [EBX + 0x44c]
0085b0cf : CMP ESI,EDI
0085b0d1 : JZ 0x0085b0e6
0085b0d3 : PUSH ESI
0085b0d4 : CALL 0x00a684f0
0085b0d9 : MOV ECX,ESI
0085b0db : CALL 0x006f04e0
0085b0e6 : MOV ESI,dword ptr [EBX + 0x450]
0085b0ec : CMP ESI,EDI
0085b0ee : JZ 0x0085b103
0085b0f0 : PUSH ESI
0085b0f1 : CALL 0x00a684f0
0085b0f6 : MOV ECX,ESI
0085b0f8 : CALL 0x006f04e0
0085b103 : MOV ESI,dword ptr [EBX + 0x45c]
0085b109 : SUB ESI,dword ptr [EBX + 0x458]
0085b10f : SAR ESI,0x2
0085b112 : TEST ESI,ESI
0085b114 : JLE 0x0085b158
0085b116 : JMP 0x0085b120
0085b120 : MOV EAX,dword ptr [EBX + 0x458]
0085b126 : CMP dword ptr [EAX + EDI*0x4],0x0
0085b12a : LEA EAX,[EAX + EDI*0x4]
0085b12d : JZ 0x0085b153
0085b12f : MOV EAX,dword ptr [EAX]
0085b131 : MOV dword ptr [EBP + -0x14],EAX
0085b134 : TEST EAX,EAX
0085b136 : JZ 0x0085b146
0085b138 : PUSH EAX
0085b139 : CALL 0x00a684f0
0085b13e : MOV ECX,dword ptr [EBP + -0x14]
0085b141 : CALL 0x006f04e0
0085b146 : MOV ECX,dword ptr [EBX + 0x458]
0085b14c : MOV dword ptr [ECX + EDI*0x4],0x0
0085b153 : INC EDI
0085b154 : CMP EDI,ESI
0085b156 : JL 0x0085b120
0085b158 : MOV ECX,dword ptr [EBX + 0x45c]
0085b15e : MOV ESI,dword ptr [EBX + 0x458]
0085b164 : CMP ESI,ECX
0085b166 : JZ 0x0085b18f
0085b168 : MOV EAX,ECX
0085b16a : SUB EAX,ECX
0085b16c : SAR EAX,0x2
0085b16f : LEA EDX,[EAX*0x4 + 0x0]
0085b176 : LEA EDI,[EDX + ESI*0x1]
0085b179 : TEST EAX,EAX
0085b17b : JLE 0x0085b189
0085b17d : PUSH EDX
0085b17e : PUSH ECX
0085b17f : PUSH EDX
0085b180 : PUSH ESI
0085b181 : CALL 0x00634101
0085b186 : ADD ESP,0x10
0085b189 : MOV dword ptr [EBX + 0x45c],EDI
0085b18f : MOV byte ptr [EBX + 0x3b0],0x0
0085b196 : PUSH 0x0
0085b198 : PUSH 0xf0
0085b19d : PUSH 0xc15444
0085b1a2 : PUSH 0xec
0085b1a7 : CALL 0x006f0760
0085b1ac : ADD ESP,0x10
0085b1af : MOV dword ptr [EBP + -0x18],EAX
0085b1b2 : MOV dword ptr [EBP + -0x4],0x8
0085b1b9 : TEST EAX,EAX
0085b1bb : JZ 0x0085b1c7
0085b1bd : PUSH EAX
0085b1be : CALL 0x00793d40
0085b1c3 : MOV EDI,EAX
0085b1c5 : JMP 0x0085b1c9
0085b1c7 : XOR EDI,EDI
0085b1c9 : MOV dword ptr [EBP + -0x4],0xffffffff
0085b1d0 : MOV ESI,dword ptr [0x017251b8]
0085b1d6 : LEA EDX,[EBP + -0x14]
0085b1d9 : PUSH EDX
0085b1da : LEA ECX,[ESI + 0x4c]
0085b1dd : LEA EAX,[EBP + -0x18]
0085b1e0 : MOV dword ptr [EBP + -0x14],0x0
0085b1e7 : CALL 0x00484470
0085b1ec : MOV ESI,dword ptr [ESI + 0x50]
0085b1ef : MOV EAX,dword ptr [EBP + -0x18]
0085b1f2 : CMP EAX,ESI
0085b1f4 : JNZ 0x0085b1ff
0085b1f6 : MOV dword ptr [EBP + -0x14],0x0
0085b1fd : JMP 0x0085b205
0085b1ff : MOV EAX,dword ptr [EAX + 0x10]
0085b202 : MOV dword ptr [EBP + -0x14],EAX
0085b205 : CMP byte ptr [EBP + 0x8],0x0
0085b209 : JZ 0x0085b37f
0085b20f : CMP dword ptr [EBP + -0x14],0x0
0085b213 : JZ 0x0085b37f
0085b219 : MOV EDX,dword ptr [EBX]
0085b21b : MOV EAX,dword ptr [EDX + 0x1e4]
0085b221 : MOV ECX,EBX
0085b223 : CALL EAX
0085b225 : MOVZX ECX,AX
0085b228 : MOV EAX,[0x017248ec]
0085b22d : NEG ECX
0085b22f : SBB ECX,ECX
0085b231 : AND ECX,0xfffffffd
0085b234 : ADD ECX,0x5
0085b237 : MOV dword ptr [EDI + 0x2c],ECX
0085b23a : MOV ECX,EAX
0085b23c : INC EAX
0085b23d : MOV [0x017248ec],EAX
0085b242 : MOV EAX,dword ptr [EBX + 0x4]
0085b245 : PUSH ECX
0085b246 : PUSH EAX
0085b247 : PUSH 0xc3dbb4
0085b24c : LEA ESI,[EBP + -0x34]
0085b24f : CALL 0x00404750
0085b254 : ADD ESP,0xc
0085b257 : MOV dword ptr [EBP + -0x4],0xb
0085b25e : PUSH -0x1
0085b260 : PUSH 0x0
0085b262 : PUSH EAX
0085b263 : LEA ECX,[EDI + 0xc]
0085b266 : CALL 0x00405eb0
0085b26b : MOV dword ptr [EBP + -0x4],0xffffffff
0085b272 : CMP dword ptr [EBP + -0x1c],0x8
0085b276 : JC 0x0085b280
0085b278 : MOV ECX,dword ptr [EBP + -0x30]
0085b27b : CALL 0x006f04e0
0085b280 : MOV EAX,dword ptr [EBX + 0x4]
0085b283 : MOV ESI,dword ptr [0x00da93ec]
0085b289 : MOV dword ptr [EDI + 0xe4],EAX
0085b28f : MOV ECX,dword ptr [EBX + 0x138]
0085b295 : XOR EDX,EDX
0085b297 : MOV word ptr [EBP + -0x30],DX
0085b29b : MOV EDX,dword ptr [ECX + 0x8]
0085b29e : LEA EAX,[EDX + EBX*0x1 + 0x138]
0085b2a5 : MOV dword ptr [EDI + 0x8c],EAX
0085b2ab : CMP byte ptr [EBX + 0x1a4c],0x0
0085b2b2 : MOV dword ptr [EBP + -0x1c],0x7
0085b2b9 : MOV dword ptr [EBP + -0x20],0x0
0085b2c0 : JZ 0x0085b2d0
0085b2c2 : MOV EAX,[0x00d7c550]
0085b2c7 : TEST EAX,EAX
0085b2c9 : JZ 0x0085b2d9
0085b2cb : ADD EAX,0x1c
0085b2ce : JMP 0x0085b2db
0085b2d0 : TEST ESI,ESI
0085b2d2 : JZ 0x0085b2d9
0085b2d4 : LEA EAX,[ESI + 0x10]
0085b2d7 : JMP 0x0085b2db
0085b2d9 : XOR EAX,EAX
0085b2db : MOV dword ptr [EDI + 0xe8],EAX
0085b2e1 : MOV EAX,[0x0172491c]
0085b2e6 : MOV EDX,dword ptr [EAX + 0x17c]
0085b2ec : ADD EDX,0x1a4
0085b2f2 : MOV ECX,EDI
0085b2f4 : CALL 0x00793060
0085b2f9 : LEA EDX,[EBX + 0x1a4]
0085b2ff : CALL 0x00793130
0085b304 : TEST ESI,ESI
0085b306 : JZ 0x0085b31f
0085b308 : CMP byte ptr [ESI + 0x178],0x0
0085b30f : JZ 0x0085b31f
0085b311 : MOV EDX,dword ptr [EBX]
0085b313 : MOV EAX,dword ptr [EDX + 0x458]
0085b319 : PUSH 0x1
0085b31b : MOV ECX,EBX
0085b31d : CALL EAX
0085b31f : MOV EAX,dword ptr [EBX + 0x3e8]
0085b325 : MOV ECX,dword ptr [EAX + 0x2c]
0085b328 : MOV dword ptr [EBX + 0x3a0],ECX
0085b32e : TEST ECX,ECX
0085b330 : JZ 0x0085b33d
0085b332 : MOV EDX,dword ptr [ECX]
0085b334 : ADD EAX,0xc
0085b337 : PUSH EAX
0085b338 : MOV EAX,dword ptr [EDX + 0x28]
0085b33b : CALL EAX
0085b33d : MOV EDX,dword ptr [EBX]
0085b33f : MOV EAX,dword ptr [EDX + 0x1fc]
0085b345 : PUSH 0x1
0085b347 : MOV ECX,EBX
0085b349 : CALL EAX
0085b34b : MOV ESI,dword ptr [EBP + -0x14]
0085b34e : CALL 0x00792980
0085b353 : CMP word ptr [EBX + 0x43a],0x9
0085b35b : JZ 0x0085b3e8
0085b361 : FLD1
0085b363 : MOV EDX,dword ptr [EBX]
0085b365 : MOV EAX,dword ptr [EDX + 0x188]
0085b36b : PUSH ECX
0085b36c : FSTP float ptr [ESP]
0085b36f : PUSH 0x0
0085b371 : PUSH 0x1
0085b373 : PUSH 0x1
0085b375 : PUSH 0x1
0085b377 : PUSH 0x14
0085b379 : MOV ECX,EBX
0085b37b : CALL EAX
0085b37d : JMP 0x0085b3e8
0085b37f : MOV ECX,dword ptr [EBX + 0x4]
0085b382 : MOV ESI,dword ptr [0x00da98e8]
0085b388 : PUSH ECX
0085b389 : PUSH 0xc3dbc0
0085b38e : CALL 0x008018d0
0085b393 : ADD ESP,0x8
0085b396 : TEST EDI,EDI
0085b398 : JZ 0x0085b3a4
0085b39a : MOV EDX,dword ptr [EDI]
0085b39c : MOV EAX,dword ptr [EDX]
0085b39e : PUSH 0x1
0085b3a0 : MOV ECX,EDI
0085b3a2 : CALL EAX
0085b3a4 : MOV ECX,dword ptr [EBX + 0x138]
0085b3aa : MOV EDX,dword ptr [ECX + 0x8]
0085b3ad : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0085b3b4 : LEA ECX,[EDX + EBX*0x1 + 0x138]
0085b3bb : MOV EDX,dword ptr [EAX + 0x10]
0085b3be : PUSH 0x0
0085b3c0 : CALL EDX
0085b3c2 : CMP word ptr [EBX + 0x43a],0x9
0085b3ca : JZ 0x0085b3e8
0085b3cc : FLD1
0085b3ce : MOV EAX,dword ptr [EBX]
0085b3d0 : MOV EDX,dword ptr [EAX + 0x188]
0085b3d6 : PUSH ECX
0085b3d7 : FSTP float ptr [ESP]
0085b3da : PUSH 0x0
0085b3dc : PUSH 0x1
0085b3de : PUSH 0x1
0085b3e0 : PUSH 0x1
0085b3e2 : PUSH 0x14
0085b3e4 : MOV ECX,EBX
0085b3e6 : CALL EDX
0085b3e8 : MOV ECX,dword ptr [EBP + -0xc]
0085b3eb : MOV dword ptr FS:[0x0],ECX
0085b3f2 : POP ECX
0085b3f3 : POP EDI
0085b3f4 : POP ESI
0085b3f5 : POP EBX
0085b3f6 : MOV ECX,dword ptr [EBP + -0x10]
0085b3f9 : XOR ECX,EBP
0085b3fb : CALL 0x00633e6b
0085b400 : MOV ESP,EBP
0085b402 : POP EBP
0085b403 : RET 0x4
