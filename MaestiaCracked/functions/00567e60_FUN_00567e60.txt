PROGRAM  : Maestia.exe
FUNCTION : FUN_00567e60
ENTRY    : 00567e60
BODY     : [[00567e60, 00567fa7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00567e60(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4,char param_5,
                 undefined4 param_6)

{
  undefined4 uVar1;
  int iVar2;
  LONG LVar3;
  int iVar4;
  undefined4 *in_ECX;
  undefined *puVar5;
  uint local_24;
  uint local_20 [8];
  
  *in_ECX = &PTR_LAB_00b85fe8;
  in_ECX[1] = 1;
  in_ECX[2] = 0;
  in_ECX[3] = 0x40000;
  in_ECX[4] = &PTR_LAB_00b8ca18;
  *in_ECX = &PTR_FUN_00b8ca60;
  in_ECX[4] = &PTR_LAB_00b8ca50;
  FUN_005237f0(param_1);
  in_ECX[7] = param_2;
  in_ECX[8] = 0;
  iVar2 = param_4;
  if (param_4 == 0) {
    puVar5 = &DAT_00b8ba98;
    uVar1 = FUN_005e9ce0(param_3,&DAT_00b8ba98);
    FUN_0051c4c0("MovieData \"",uVar1,puVar5);
    local_20[0] = -(uint)(param_5 != '\0') & 0x1000 | 4;
    local_20[1] = 0x10;
    local_20[4] = 0xffffffff;
    local_20[5] = 0;
    local_20[2] = 0x2000;
    local_20[3] = 0;
    local_20[6] = 4;
    local_20[7] = param_6;
    iVar2 = FUN_00516140((local_24 & 0xfffffffc) + 8,local_20);
    LVar3 = InterlockedExchangeAdd((LONG *)((local_24 & 0xfffffffc) + 4),-1);
    if (LVar3 == 1) {
      FUN_00515cf0(local_24 & 0xfffffffc);
    }
  }
  iVar4 = FUN_00515840(0x110,0);
  if (iVar4 == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = FUN_00567700(in_ECX,param_3,iVar2);
  }
  if ((GRefCountImpl *)in_ECX[8] != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release((GRefCountImpl *)in_ECX[8]);
  }
  in_ECX[8] = uVar1;
  if (param_4 == 0) {
    FUN_0067df70(uVar1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00567e60 : MOV EAX,dword ptr [ESP + 0x4]
00567e64 : SUB ESP,0x24
00567e67 : PUSH EBX
00567e68 : PUSH EBP
00567e69 : PUSH ESI
00567e6a : MOV ESI,ECX
00567e6c : PUSH EDI
00567e6d : MOV dword ptr [ESI],0xb85fe8
00567e73 : MOV dword ptr [ESI + 0x4],0x1
00567e7a : XOR EDI,EDI
00567e7c : MOV dword ptr [ESI + 0x8],EDI
00567e7f : MOV dword ptr [ESI + 0xc],0x40000
00567e86 : MOV dword ptr [ESI + 0x10],0xb8ca18
00567e8d : PUSH EAX
00567e8e : LEA ECX,[ESI + 0x14]
00567e91 : MOV dword ptr [ESI],0xb8ca60
00567e97 : MOV dword ptr [ESI + 0x10],0xb8ca50
00567e9e : CALL 0x005237f0
00567ea3 : MOV ECX,dword ptr [ESP + 0x3c]
00567ea7 : MOV EBX,dword ptr [ESP + 0x44]
00567eab : MOV EBP,dword ptr [ESP + 0x40]
00567eaf : MOV dword ptr [ESI + 0x1c],ECX
00567eb2 : MOV dword ptr [ESI + 0x20],EDI
00567eb5 : CMP EBX,EDI
00567eb7 : JNZ 0x00567f5c
00567ebd : PUSH 0xb8ba98
00567ec2 : PUSH EBP
00567ec3 : CALL 0x005e9ce0
00567ec8 : ADD ESP,0x4
00567ecb : PUSH EAX
00567ecc : PUSH 0xb8cd80
00567ed1 : LEA ECX,[ESP + 0x1c]
00567ed5 : CALL 0x0051c4c0
00567eda : MOVZX EAX,byte ptr [ESP + 0x48]
00567edf : MOV EDX,dword ptr [ESP + 0x4c]
00567ee3 : NEG EAX
00567ee5 : SBB EAX,EAX
00567ee7 : AND EAX,0x1000
00567eec : OR EAX,0x4
00567eef : MOV dword ptr [ESP + 0x14],EAX
00567ef3 : MOV EAX,dword ptr [ESP + 0x10]
00567ef7 : AND EAX,0xfffffffc
00567efa : LEA ECX,[ESP + 0x14]
00567efe : PUSH ECX
00567eff : MOV ECX,dword ptr [0x00d73250]
00567f05 : ADD EAX,0x8
00567f08 : PUSH EAX
00567f09 : MOV dword ptr [ESP + 0x20],0x10
00567f11 : MOV dword ptr [ESP + 0x2c],0xffffffff
00567f19 : MOV dword ptr [ESP + 0x30],EDI
00567f1d : MOV dword ptr [ESP + 0x24],0x2000
00567f25 : MOV dword ptr [ESP + 0x28],EDI
00567f29 : MOV dword ptr [ESP + 0x34],0x4
00567f31 : MOV dword ptr [ESP + 0x38],EDX
00567f35 : CALL 0x00516140
00567f3a : MOV EDI,dword ptr [ESP + 0x10]
00567f3e : AND EDI,0xfffffffc
00567f41 : PUSH -0x1
00567f43 : LEA EDX,[EDI + 0x4]
00567f46 : PUSH EDX
00567f47 : MOV EBX,EAX
00567f49 : CALL dword ptr [0x00b851cc]
00567f4f : SUB EAX,0x1
00567f52 : JNZ 0x00567f5a
00567f54 : PUSH EDI
00567f55 : CALL 0x00515cf0
00567f5a : XOR EDI,EDI
00567f5c : PUSH EDI
00567f5d : PUSH 0x110
00567f62 : MOV ECX,EBX
00567f64 : CALL 0x00515840
00567f69 : CMP EAX,EDI
00567f6b : JZ 0x00567f7b
00567f6d : PUSH EBX
00567f6e : PUSH EBP
00567f6f : PUSH ESI
00567f70 : MOV ECX,EAX
00567f72 : CALL 0x00567700
00567f77 : MOV EBP,EAX
00567f79 : JMP 0x00567f7d
00567f7b : XOR EBP,EBP
00567f7d : MOV ECX,dword ptr [ESI + 0x20]
00567f80 : CMP ECX,EDI
00567f82 : JZ 0x00567f89
00567f84 : CALL 0x004ff7e0
00567f89 : MOV dword ptr [ESI + 0x20],EBP
00567f8c : CMP dword ptr [ESP + 0x44],EDI
00567f90 : JNZ 0x00567f9c
00567f92 : MOV EAX,EBP
00567f94 : PUSH EAX
00567f95 : MOV ECX,EBX
00567f97 : CALL 0x0067df70
00567f9c : POP EDI
00567f9d : MOV EAX,ESI
00567f9f : POP ESI
00567fa0 : POP EBP
00567fa1 : POP EBX
00567fa2 : ADD ESP,0x24
00567fa5 : RET 0x18
