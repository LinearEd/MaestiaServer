PROGRAM  : Maestia.exe
FUNCTION : FUN_0056e9f0
ENTRY    : 0056e9f0
BODY     : [[0056e9f0, 0056ea92]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0056e9f0(void)

{
  int *piVar1;
  undefined4 *in_ECX;
  undefined4 uVar2;
  GRefCountNTSImpl *this;
  GRefCountNTSImpl *this_00;
  
  piVar1 = (int *)*in_ECX;
  this_00 = (GRefCountNTSImpl *)0x0;
  if (piVar1 != (int *)0x0) {
    if (piVar1[1] == 0) {
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00515cf0(piVar1);
      }
      *in_ECX = 0;
    }
    else {
      this_00 = (GRefCountNTSImpl *)piVar1[1];
      if (this_00 != (GRefCountNTSImpl *)0x0) {
        *(int *)(this_00 + 4) = *(int *)(this_00 + 4) + 1;
        *(int *)(this_00 + 4) = *(int *)(this_00 + 4) + 1;
        GRefCountNTSImpl::Release(this_00);
      }
    }
  }
  piVar1 = (int *)in_ECX[1];
  this = (GRefCountNTSImpl *)0x0;
  if (piVar1 != (int *)0x0) {
    if (piVar1[1] == 0) {
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00515cf0(piVar1);
      }
      in_ECX[1] = 0;
    }
    else {
      this = (GRefCountNTSImpl *)piVar1[1];
      if (this != (GRefCountNTSImpl *)0x0) {
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
        GRefCountNTSImpl::Release(this);
      }
    }
  }
  uVar2 = 1;
  if (((this_00 == this) &&
      ((uVar2 = 1, this_00 != (GRefCountNTSImpl *)0x0 || ((*(byte *)(in_ECX + 8) & 1) != 0)))) &&
     ((this != (GRefCountNTSImpl *)0x0 || ((*(byte *)(in_ECX + 8) & 2) != 0)))) {
    uVar2 = 0;
  }
  if (this != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this);
  }
  if (this_00 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this_00);
  }
  return uVar2;
}



============================================================
DISASSEMBLY
============================================================
0056e9f0 : PUSH EBX
0056e9f1 : PUSH EBP
0056e9f2 : MOV EBP,ECX
0056e9f4 : MOV EAX,dword ptr [EBP]
0056e9f7 : PUSH EDI
0056e9f8 : XOR EDI,EDI
0056e9fa : LEA EBX,[EDI + 0x1]
0056e9fd : TEST EAX,EAX
0056e9ff : JZ 0x0056ea1a
0056ea01 : CMP dword ptr [EAX + 0x4],EDI
0056ea04 : JZ 0x0056ea73
0056ea06 : MOV EDI,dword ptr [EAX + 0x4]
0056ea09 : TEST EDI,EDI
0056ea0b : JZ 0x0056ea1a
0056ea0d : ADD dword ptr [EDI + 0x4],EBX
0056ea10 : ADD dword ptr [EDI + 0x4],EBX
0056ea13 : MOV ECX,EDI
0056ea15 : CALL 0x004ff7c0
0056ea1a : MOV EAX,dword ptr [EBP + 0x4]
0056ea1d : PUSH ESI
0056ea1e : XOR ESI,ESI
0056ea20 : TEST EAX,EAX
0056ea22 : JZ 0x0056ea3d
0056ea24 : CMP dword ptr [EAX + 0x4],ESI
0056ea27 : JZ 0x0056ea83
0056ea29 : MOV ESI,dword ptr [EAX + 0x4]
0056ea2c : TEST ESI,ESI
0056ea2e : JZ 0x0056ea3d
0056ea30 : ADD dword ptr [ESI + 0x4],EBX
0056ea33 : ADD dword ptr [ESI + 0x4],EBX
0056ea36 : MOV ECX,ESI
0056ea38 : CALL 0x004ff7c0
0056ea3d : CMP EDI,ESI
0056ea3f : JNZ 0x0056ea56
0056ea41 : TEST EDI,EDI
0056ea43 : JNZ 0x0056ea4a
0056ea45 : TEST byte ptr [EBP + 0x20],BL
0056ea48 : JZ 0x0056ea56
0056ea4a : TEST ESI,ESI
0056ea4c : JNZ 0x0056ea54
0056ea4e : TEST byte ptr [EBP + 0x20],0x2
0056ea52 : JZ 0x0056ea56
0056ea54 : XOR BL,BL
0056ea56 : TEST ESI,ESI
0056ea58 : JZ 0x0056ea61
0056ea5a : MOV ECX,ESI
0056ea5c : CALL 0x004ff7c0
0056ea61 : POP ESI
0056ea62 : TEST EDI,EDI
0056ea64 : JZ 0x0056ea6d
0056ea66 : MOV ECX,EDI
0056ea68 : CALL 0x004ff7c0
0056ea6d : POP EDI
0056ea6e : POP EBP
0056ea6f : MOV AL,BL
0056ea71 : POP EBX
0056ea72 : RET
0056ea73 : ADD dword ptr [EAX],-0x1
0056ea76 : JNZ 0x0056ea7e
0056ea78 : PUSH EAX
0056ea79 : CALL 0x00515cf0
0056ea7e : MOV dword ptr [EBP],EDI
0056ea81 : JMP 0x0056ea1a
0056ea83 : ADD dword ptr [EAX],-0x1
0056ea86 : JNZ 0x0056ea8e
0056ea88 : PUSH EAX
0056ea89 : CALL 0x00515cf0
0056ea8e : MOV dword ptr [EBP + 0x4],ESI
0056ea91 : JMP 0x0056ea3d
