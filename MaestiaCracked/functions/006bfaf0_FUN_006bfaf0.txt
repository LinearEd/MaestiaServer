PROGRAM  : Maestia.exe
FUNCTION : FUN_006bfaf0
ENTRY    : 006bfaf0
BODY     : [[006bfaf0, 006bfb57]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006bfaf0(void)

{
  uint in_EAX;
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int unaff_EDI;
  
  uVar1 = *(int *)(unaff_EDI + 0x10c0) - *(int *)(unaff_EDI + 0x10bc);
  if (in_EAX <= uVar1) {
    uVar1 = in_EAX;
  }
  *(int *)(unaff_EDI + 0x10b8) = *(int *)(unaff_EDI + 0x10b8) + uVar1;
  uVar3 = in_EAX - uVar1;
  *(uint *)(unaff_EDI + 0x10bc) = *(int *)(unaff_EDI + 0x10bc) + uVar1;
  if (uVar3 != 0) {
    while( true ) {
      uVar1 = 0x1000;
      if (uVar3 < 0x1000) {
        uVar1 = uVar3;
      }
      uVar2 = FUN_006bf770(unaff_EDI + 0xc,0,uVar1);
      if (uVar2 < uVar1) break;
      *(int *)(unaff_EDI + 0x10b8) = *(int *)(unaff_EDI + 0x10b8) + uVar1;
      uVar3 = uVar3 - uVar1;
      if (uVar3 == 0) {
        return 0;
      }
    }
    return 0x55;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006bfaf0 : MOV ECX,dword ptr [EDI + 0x10bc]
006bfaf6 : PUSH EBX
006bfaf7 : MOV EBX,EAX
006bfaf9 : MOV EAX,dword ptr [EDI + 0x10c0]
006bfaff : SUB EAX,ECX
006bfb01 : XOR EDX,EDX
006bfb03 : CMP EAX,EBX
006bfb05 : JC 0x006bfb09
006bfb07 : MOV EAX,EBX
006bfb09 : ADD dword ptr [EDI + 0x10b8],EAX
006bfb0f : ADD ECX,EAX
006bfb11 : SUB EBX,EAX
006bfb13 : MOV dword ptr [EDI + 0x10bc],ECX
006bfb19 : JZ 0x006bfb54
006bfb1b : PUSH EBP
006bfb1c : LEA EBP,[EDI + 0xc]
006bfb1f : PUSH ESI
006bfb20 : MOV ESI,0x1000
006bfb25 : CMP EBX,ESI
006bfb27 : JNC 0x006bfb2b
006bfb29 : MOV ESI,EBX
006bfb2b : PUSH ESI
006bfb2c : PUSH 0x0
006bfb2e : PUSH EBP
006bfb2f : CALL 0x006bf770
006bfb34 : ADD ESP,0xc
006bfb37 : CMP EAX,ESI
006bfb39 : JC 0x006bfb4b
006bfb3b : ADD dword ptr [EDI + 0x10b8],ESI
006bfb41 : SUB EBX,ESI
006bfb43 : JNZ 0x006bfb20
006bfb45 : POP ESI
006bfb46 : POP EBP
006bfb47 : XOR EAX,EAX
006bfb49 : POP EBX
006bfb4a : RET
006bfb4b : POP ESI
006bfb4c : POP EBP
006bfb4d : MOV EAX,0x55
006bfb52 : POP EBX
006bfb53 : RET
006bfb54 : MOV EAX,EDX
006bfb56 : POP EBX
006bfb57 : RET
