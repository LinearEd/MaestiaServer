PROGRAM  : Maestia.exe
FUNCTION : FUN_0085de20
ENTRY    : 0085de20
BODY     : [[0085de20, 0085de8a] [0085de90, 0085e0a5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0085de20(void)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  short sVar4;
  ushort uVar5;
  int iVar6;
  undefined4 uVar7;
  short *psVar8;
  uint uVar9;
  int unaff_EDI;
  int local_34;
  int local_30;
  uint local_2c;
  int local_28;
  uint local_24;
  ushort *local_20;
  int local_1c;
  uint local_18;
  int local_14;
  uint local_10;
  int local_c;
  int local_8;
  
  iVar2 = DAT_017247ec;
  local_24 = 0;
  if (DAT_017247ec != 0) {
    local_18 = 0;
    FUN_00404400(&local_18);
    if (local_18 != 0) {
      iVar6 = 0;
      psVar8 = (short *)(local_18 + 0x60);
      do {
        if (*psVar8 != 0) {
          local_24 = iVar6 + 2U & 0xffff;
        }
        iVar6 = iVar6 + 1;
        psVar8 = psVar8 + 1;
      } while (iVar6 < 0xb);
    }
    local_28 = -(uint)(*(int *)(iVar2 + 0x28) != 0);
joined_r0x0085de83:
    if (local_28 != 0) {
      if (iVar2 == 0) {
        local_18 = 0;
      }
      else {
        local_18 = 0;
        FUN_00404160(&local_28,&local_8,&local_18);
      }
      iVar6 = 0;
      local_c = 0;
      local_8 = 0;
      local_14 = 0;
      local_10 = 0;
      iVar2 = DAT_017247ec;
      if (((local_18 != 0) && (*(ushort *)(local_18 + 6) != 0)) &&
         (*(char *)(local_18 + 0x76) != '\0')) {
        local_20 = (ushort *)(local_18 + 0x48);
        local_1c = 0;
        local_18 = (uint)*(ushort *)(local_18 + 6);
        do {
          uVar1 = *local_20;
          if (uVar1 != 0) {
            if ((short)local_10 == 0) {
              local_10 = (uint)uVar1;
            }
            local_c = local_c + 1;
            uVar9 = 0;
            do {
              if (((byte)uVar9 < 0x21) && (*(int *)(unaff_EDI + 0x17f0 + (uVar9 & 0xff) * 4) != 0))
              {
                uVar5 = (ushort)*(undefined4 *)(unaff_EDI + 0x16e8 + (uVar9 & 0xff) * 4);
              }
              else {
                uVar5 = 0;
              }
              if (uVar5 == uVar1) {
                iVar6 = iVar6 + 1;
              }
              uVar9 = uVar9 + 1;
            } while ((int)uVar9 < 0xc);
            local_8 = iVar6;
            if ((short)local_c != (short)iVar6) {
              uVar9 = 0x14;
              do {
                uVar7 = FUN_00855260();
                sVar4 = FUN_006fe220(uVar7);
                if ((short)local_18 == sVar4) {
                  if (((byte)uVar9 < 0x21) &&
                     (*(int *)(unaff_EDI + 0x17f0 + (uVar9 & 0xff) * 4) != 0)) {
                    local_2c = *(uint *)(unaff_EDI + 0x16e8 + (uVar9 & 0xff) * 4);
                  }
                  else {
                    local_2c = 0;
                  }
                  FUN_004437f0(&local_2c);
                  if (((local_30 != *(int *)(DAT_00d7c54c + 0x44)) &&
                      (*(int *)(local_30 + 0x10) != 0)) &&
                     ((*(uint *)(*(int *)(local_30 + 0x10) + 0x4c) & 0x18000) != 0)) {
                    local_14 = local_14 + 1;
                  }
                }
                else {
                  if (((byte)uVar9 < 0x21) &&
                     (*(int *)(unaff_EDI + 0x17f0 + (uVar9 & 0xff) * 4) != 0)) {
                    uVar5 = (ushort)*(undefined4 *)(unaff_EDI + 0x16e8 + (uVar9 & 0xff) * 4);
                  }
                  else {
                    uVar5 = 0;
                  }
                  if (uVar5 == uVar1) {
                    local_8 = local_8 + 1;
                  }
                }
                uVar9 = uVar9 + 1;
              } while ((int)uVar9 < 0x1e);
              iVar6 = local_8;
              if ((short)local_c != (short)local_8) break;
            }
          }
          local_1c = local_1c + 1;
          local_20 = local_20 + 1;
        } while (local_1c < 0xc);
        iVar3 = DAT_00d7c54c;
        local_2c = local_10 & 0xffff | 0x61e0000;
        FUN_004437f0(&local_2c);
        iVar2 = DAT_017247ec;
        if (((local_34 == *(int *)(iVar3 + 0x44)) || (*(int *)(local_34 + 0x10) == 0)) ||
           ((*(uint *)(*(int *)(local_34 + 0x10) + 0x4c) & 0x18000) == 0)) {
          if ((((short)local_c != 0) && ((short)iVar6 != 0)) && ((short)local_c == (short)iVar6))
          goto joined_r0x0085de83;
        }
        else if ((((short)local_14 != 0) && ((short)local_24 != 0)) &&
                ((short)local_14 == (short)local_24)) goto joined_r0x0085de83;
        FUN_0085c0c0(unaff_EDI,local_18,0);
        iVar2 = DAT_017247ec;
      }
      goto joined_r0x0085de83;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0085de20 : PUSH EBP
0085de21 : MOV EBP,ESP
0085de23 : SUB ESP,0x30
0085de26 : PUSH EBX
0085de27 : MOV EBX,dword ptr [0x017247ec]
0085de2d : XOR EAX,EAX
0085de2f : PUSH ESI
0085de30 : MOV dword ptr [EBP + -0x20],EAX
0085de33 : CMP EBX,EAX
0085de35 : JZ 0x0085e0a0
0085de3b : MOV ESI,dword ptr [0x00da9be0]
0085de41 : MOV dword ptr [EBP + -0x14],EAX
0085de44 : LEA EAX,[EBP + -0x14]
0085de47 : PUSH EAX
0085de48 : MOV ECX,EBX
0085de4a : CALL 0x00404400
0085de4f : MOV ECX,dword ptr [EBP + -0x14]
0085de52 : XOR ESI,ESI
0085de54 : CMP ECX,ESI
0085de56 : JZ 0x0085de77
0085de58 : XOR EAX,EAX
0085de5a : ADD ECX,0x60
0085de5d : LEA ECX,[ECX]
0085de60 : CMP word ptr [ECX],SI
0085de63 : JZ 0x0085de6e
0085de65 : LEA EDX,[EAX + 0x2]
0085de68 : MOVZX EDX,DX
0085de6b : MOV dword ptr [EBP + -0x20],EDX
0085de6e : INC EAX
0085de6f : ADD ECX,0x2
0085de72 : CMP EAX,0xb
0085de75 : JL 0x0085de60
0085de77 : MOV EAX,dword ptr [EBX + 0x28]
0085de7a : NEG EAX
0085de7c : SBB EAX,EAX
0085de7e : MOV dword ptr [EBP + -0x24],EAX
0085de81 : CMP EAX,ESI
0085de83 : JZ 0x0085e0a0
0085de89 : JMP 0x0085de98
0085de90 : MOV EBX,dword ptr [0x017247ec]
0085de96 : XOR ESI,ESI
0085de98 : CMP EBX,ESI
0085de9a : JZ 0x0085deb7
0085de9c : LEA EAX,[EBP + -0x14]
0085de9f : PUSH EAX
0085dea0 : LEA ECX,[EBP + -0x4]
0085dea3 : PUSH ECX
0085dea4 : LEA EDX,[EBP + -0x24]
0085dea7 : PUSH EDX
0085dea8 : MOV EAX,EBX
0085deaa : MOV dword ptr [EBP + -0x14],ESI
0085dead : CALL 0x00404160
0085deb2 : MOV EAX,dword ptr [EBP + -0x14]
0085deb5 : JMP 0x0085deb9
0085deb7 : XOR EAX,EAX
0085deb9 : XOR EDX,EDX
0085debb : XOR EBX,EBX
0085debd : MOV dword ptr [EBP + -0x8],ESI
0085dec0 : MOV dword ptr [EBP + -0x4],EBX
0085dec3 : MOV dword ptr [EBP + -0x10],EDX
0085dec6 : MOV dword ptr [EBP + -0xc],EDX
0085dec9 : CMP EAX,EDX
0085decb : JZ 0x0085e096
0085ded1 : MOVZX ECX,word ptr [EAX + 0x6]
0085ded5 : MOV dword ptr [EBP + -0x14],ECX
0085ded8 : CMP CX,DX
0085dedb : JZ 0x0085e096
0085dee1 : CMP byte ptr [EAX + 0x76],DL
0085dee4 : JZ 0x0085e096
0085deea : ADD EAX,0x48
0085deed : MOV dword ptr [EBP + -0x18],EDX
0085def0 : MOV dword ptr [EBP + -0x1c],EAX
0085def3 : MOVZX ESI,word ptr [EAX]
0085def6 : TEST SI,SI
0085def9 : JZ 0x0085e002
0085deff : CMP word ptr [EBP + -0xc],0x0
0085df04 : JNZ 0x0085df0c
0085df06 : MOVZX EAX,SI
0085df09 : MOV dword ptr [EBP + -0xc],EAX
0085df0c : INC dword ptr [EBP + -0x8]
0085df0f : XOR ECX,ECX
0085df11 : CMP CL,0x21
0085df14 : JNC 0x0085df2c
0085df16 : MOVZX EAX,CL
0085df19 : CMP dword ptr [EDI + EAX*0x4 + 0x17f0],0x0
0085df21 : JZ 0x0085df2c
0085df23 : MOV EAX,dword ptr [EDI + EAX*0x4 + 0x16e8]
0085df2a : JMP 0x0085df2e
0085df2c : XOR EAX,EAX
0085df2e : CMP AX,SI
0085df31 : JNZ 0x0085df34
0085df33 : INC EBX
0085df34 : INC ECX
0085df35 : CMP ECX,0xb
0085df38 : JLE 0x0085df11
0085df3a : MOV dword ptr [EBP + -0x4],EBX
0085df3d : CMP word ptr [EBP + -0x8],BX
0085df41 : JZ 0x0085e002
0085df47 : MOV EBX,0x14
0085df4c : LEA ESP,[ESP]
0085df50 : MOV AL,0x14
0085df52 : MOV ECX,EDI
0085df54 : CALL 0x00855260
0085df59 : PUSH EAX
0085df5a : CALL 0x006fe220
0085df5f : ADD ESP,0x4
0085df62 : CMP word ptr [EBP + -0x14],AX
0085df66 : JNZ 0x0085dfc6
0085df68 : CMP BL,0x21
0085df6b : JNC 0x0085df83
0085df6d : MOVZX EAX,BL
0085df70 : CMP dword ptr [EDI + EAX*0x4 + 0x17f0],0x0
0085df78 : JZ 0x0085df83
0085df7a : MOV EAX,dword ptr [EDI + EAX*0x4 + 0x16e8]
0085df81 : JMP 0x0085df85
0085df83 : XOR EAX,EAX
0085df85 : LEA ECX,[EBP + -0x28]
0085df88 : PUSH ECX
0085df89 : MOV ECX,dword ptr [0x00d7c54c]
0085df8f : MOV dword ptr [EBP + -0x28],EAX
0085df92 : ADD ECX,0x40
0085df95 : LEA EAX,[EBP + -0x2c]
0085df98 : CALL 0x004437f0
0085df9d : MOV EAX,dword ptr [EBP + -0x2c]
0085dfa0 : MOV EDX,dword ptr [0x00d7c54c]
0085dfa6 : CMP EAX,dword ptr [EDX + 0x44]
0085dfa9 : JZ 0x0085dfeb
0085dfab : MOV EAX,dword ptr [EAX + 0x10]
0085dfae : TEST EAX,EAX
0085dfb0 : JZ 0x0085dfeb
0085dfb2 : MOV ECX,dword ptr [EAX + 0x4c]
0085dfb5 : AND ECX,0x18000
0085dfbb : XOR EAX,EAX
0085dfbd : OR EAX,ECX
0085dfbf : JZ 0x0085dfeb
0085dfc1 : INC dword ptr [EBP + -0x10]
0085dfc4 : JMP 0x0085dfeb
0085dfc6 : CMP BL,0x21
0085dfc9 : JNC 0x0085dfe1
0085dfcb : MOVZX EAX,BL
0085dfce : CMP dword ptr [EDI + EAX*0x4 + 0x17f0],0x0
0085dfd6 : JZ 0x0085dfe1
0085dfd8 : MOV EAX,dword ptr [EDI + EAX*0x4 + 0x16e8]
0085dfdf : JMP 0x0085dfe3
0085dfe1 : XOR EAX,EAX
0085dfe3 : CMP AX,SI
0085dfe6 : JNZ 0x0085dfeb
0085dfe8 : INC dword ptr [EBP + -0x4]
0085dfeb : INC EBX
0085dfec : CMP EBX,0x1d
0085dfef : JLE 0x0085df50
0085dff5 : MOV AX,word ptr [EBP + -0x4]
0085dff9 : MOV EBX,dword ptr [EBP + -0x4]
0085dffc : CMP word ptr [EBP + -0x8],AX
0085e000 : JNZ 0x0085e01b
0085e002 : MOV ECX,dword ptr [EBP + -0x18]
0085e005 : MOV EAX,dword ptr [EBP + -0x1c]
0085e008 : INC ECX
0085e009 : ADD EAX,0x2
0085e00c : CMP ECX,0xc
0085e00f : MOV dword ptr [EBP + -0x18],ECX
0085e012 : MOV dword ptr [EBP + -0x1c],EAX
0085e015 : JL 0x0085def3
0085e01b : MOVZX ECX,word ptr [EBP + -0xc]
0085e01f : MOV ESI,dword ptr [0x00d7c54c]
0085e025 : OR ECX,0x61e0000
0085e02b : LEA EDX,[EBP + -0x28]
0085e02e : MOV dword ptr [EBP + -0x28],ECX
0085e031 : PUSH EDX
0085e032 : LEA ECX,[ESI + 0x40]
0085e035 : LEA EAX,[EBP + -0x30]
0085e038 : CALL 0x004437f0
0085e03d : MOV EAX,dword ptr [EBP + -0x30]
0085e040 : CMP EAX,dword ptr [ESI + 0x44]
0085e043 : JZ 0x0085e078
0085e045 : MOV EAX,dword ptr [EAX + 0x10]
0085e048 : TEST EAX,EAX
0085e04a : JZ 0x0085e078
0085e04c : MOV ECX,dword ptr [EAX + 0x4c]
0085e04f : AND ECX,0x18000
0085e055 : XOR EAX,EAX
0085e057 : OR EAX,ECX
0085e059 : JZ 0x0085e078
0085e05b : MOV ECX,dword ptr [EBP + -0x10]
0085e05e : TEST CX,CX
0085e061 : JZ 0x0085e070
0085e063 : MOV EAX,dword ptr [EBP + -0x20]
0085e066 : TEST AX,AX
0085e069 : JZ 0x0085e070
0085e06b : CMP CX,AX
0085e06e : JZ 0x0085e096
0085e070 : MOV EAX,dword ptr [EBP + -0x14]
0085e073 : PUSH 0x0
0085e075 : PUSH EAX
0085e076 : JMP 0x0085e090
0085e078 : MOV EAX,dword ptr [EBP + -0x8]
0085e07b : TEST AX,AX
0085e07e : JZ 0x0085e08a
0085e080 : TEST BX,BX
0085e083 : JZ 0x0085e08a
0085e085 : CMP AX,BX
0085e088 : JZ 0x0085e096
0085e08a : MOV ECX,dword ptr [EBP + -0x14]
0085e08d : PUSH 0x0
0085e08f : PUSH ECX
0085e090 : PUSH EDI
0085e091 : CALL 0x0085c0c0
0085e096 : CMP dword ptr [EBP + -0x24],0x0
0085e09a : JNZ 0x0085de90
0085e0a0 : POP ESI
0085e0a1 : POP EBX
0085e0a2 : MOV ESP,EBP
0085e0a4 : POP EBP
0085e0a5 : RET
