PROGRAM  : Maestia.exe
FUNCTION : FUN_0054bf80
ENTRY    : 0054bf80
BODY     : [[0054bf80, 0054c0c3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0054bf80(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int in_ECX;
  undefined4 local_20;
  undefined2 local_1c;
  undefined1 local_1a;
  byte local_19;
  undefined1 local_18;
  undefined1 local_17;
  undefined1 local_16;
  byte local_15;
  undefined4 local_14;
  undefined2 local_10;
  undefined1 local_e;
  byte local_d;
  undefined1 local_c;
  undefined1 local_b;
  undefined1 local_a;
  undefined1 local_9;
  undefined4 local_8;
  undefined2 local_4;
  undefined2 local_2;
  
  if ((*(byte *)(in_ECX + 0x143) & 3) != 0) {
    FUN_00549ad0();
  }
  local_10 = 0;
  local_20 = 0;
  local_1c = 0;
  local_1a = 0;
  local_19 = 0;
  local_18 = 0;
  local_17 = 0;
  local_16 = 0x10;
  local_15 = 0;
  local_14 = 0;
  local_e = 0;
  local_d = 0;
  local_c = 0;
  local_b = 0;
  local_a = 0x10;
  local_9 = 0;
  local_8 = 0;
  local_4 = 0;
  local_2 = 0;
  FUN_00544270(in_ECX + 0x11c);
  if ((*(byte *)(in_ECX + 0x141) & 0x40) != 0) {
    local_19 = local_19 | 1;
    local_d = local_d | 1;
  }
  if ((char)*(byte *)(in_ECX + 0x141) < '\0') {
    local_19 = local_19 | 2;
    local_d = local_d | 2;
  }
  if ((*(byte *)(in_ECX + 0x143) & 0x20) == 0) {
    local_15 = local_15 & 0xfe;
  }
  else {
    local_15 = local_15 | 1;
    local_19 = local_19 & 0xf9 | 1;
  }
  if ((*(byte *)(in_ECX + 0x142) & 1) == 0) {
    local_19 = local_19 & 0xf7;
  }
  else {
    local_19 = local_19 | 8;
  }
  if ((*(byte *)(in_ECX + 0x142) & 2) == 0) {
    local_19 = local_19 & 0xef;
  }
  else {
    local_19 = local_19 | 0x10;
  }
  if (*(int *)(in_ECX + 0x18) != 0) {
    FUN_0054be50(in_ECX,param_1,param_2,param_3);
    FUN_0059a980(param_1,param_2,param_3,param_4,&local_20,*(undefined4 *)(in_ECX + 0x18));
    return;
  }
  FUN_0059a980(param_1,param_2,param_3,param_4,&local_20,0);
  return;
}



============================================================
DISASSEMBLY
============================================================
0054bf80 : SUB ESP,0x20
0054bf83 : PUSH EBX
0054bf84 : PUSH ESI
0054bf85 : MOV ESI,ECX
0054bf87 : TEST byte ptr [ESI + 0x143],0x3
0054bf8e : JZ 0x0054bf95
0054bf90 : CALL 0x00549ad0
0054bf95 : XOR EBX,EBX
0054bf97 : XOR ECX,ECX
0054bf99 : MOV word ptr [ESP + 0x18],CX
0054bf9e : LEA ECX,[ESI + 0x11c]
0054bfa4 : XOR EAX,EAX
0054bfa6 : XOR EDX,EDX
0054bfa8 : PUSH ECX
0054bfa9 : LEA ECX,[ESP + 0xc]
0054bfad : MOV dword ptr [ESP + 0xc],EBX
0054bfb1 : MOV word ptr [ESP + 0x10],AX
0054bfb6 : MOV byte ptr [ESP + 0x12],BL
0054bfba : MOV byte ptr [ESP + 0x13],BL
0054bfbe : MOV byte ptr [ESP + 0x14],BL
0054bfc2 : MOV byte ptr [ESP + 0x15],BL
0054bfc6 : MOV byte ptr [ESP + 0x16],0x10
0054bfcb : MOV byte ptr [ESP + 0x17],BL
0054bfcf : MOV dword ptr [ESP + 0x18],EBX
0054bfd3 : MOV byte ptr [ESP + 0x1e],BL
0054bfd7 : MOV byte ptr [ESP + 0x1f],BL
0054bfdb : MOV byte ptr [ESP + 0x20],BL
0054bfdf : MOV byte ptr [ESP + 0x21],BL
0054bfe3 : MOV byte ptr [ESP + 0x22],0x10
0054bfe8 : MOV byte ptr [ESP + 0x23],BL
0054bfec : MOV dword ptr [ESP + 0x24],EBX
0054bff0 : MOV word ptr [ESP + 0x28],DX
0054bff5 : MOV word ptr [ESP + 0x2a],AX
0054bffa : CALL 0x00544270
0054bfff : MOV CL,byte ptr [ESI + 0x141]
0054c005 : MOV AL,byte ptr [ESP + 0xf]
0054c009 : TEST CL,0x40
0054c00c : JZ 0x0054c015
0054c00e : OR AL,0x1
0054c010 : OR byte ptr [ESP + 0x1b],0x1
0054c015 : TEST CL,CL
0054c017 : JNS 0x0054c020
0054c019 : OR AL,0x2
0054c01b : OR byte ptr [ESP + 0x1b],0x2
0054c020 : TEST byte ptr [ESI + 0x143],0x20
0054c027 : JZ 0x0054c034
0054c029 : OR byte ptr [ESP + 0x13],0x1
0054c02e : AND AL,0xf9
0054c030 : OR AL,0x1
0054c032 : JMP 0x0054c039
0054c034 : AND byte ptr [ESP + 0x13],0xfe
0054c039 : MOV CL,byte ptr [ESI + 0x142]
0054c03f : TEST CL,0x1
0054c042 : JZ 0x0054c048
0054c044 : OR AL,0x8
0054c046 : JMP 0x0054c04a
0054c048 : AND AL,0xf7
0054c04a : TEST CL,0x2
0054c04d : JZ 0x0054c053
0054c04f : OR AL,0x10
0054c051 : JMP 0x0054c055
0054c053 : AND AL,0xef
0054c055 : MOV ECX,dword ptr [ESI + 0x18]
0054c058 : MOV byte ptr [ESP + 0xf],AL
0054c05c : CMP ECX,EBX
0054c05e : JZ 0x0054c09a
0054c060 : MOV EBX,dword ptr [ESP + 0x30]
0054c064 : PUSH EBP
0054c065 : MOV EBP,dword ptr [ESP + 0x30]
0054c069 : PUSH EDI
0054c06a : MOV EDI,dword ptr [ESP + 0x3c]
0054c06e : PUSH EDI
0054c06f : PUSH EBX
0054c070 : PUSH EBP
0054c071 : PUSH ESI
0054c072 : CALL 0x0054be50
0054c077 : MOV EDX,dword ptr [ESI + 0x18]
0054c07a : MOV ECX,dword ptr [ESP + 0x40]
0054c07e : PUSH EDX
0054c07f : LEA EAX,[ESP + 0x14]
0054c083 : PUSH EAX
0054c084 : PUSH ECX
0054c085 : PUSH EDI
0054c086 : PUSH EBX
0054c087 : PUSH EBP
0054c088 : LEA ECX,[ESI + 0x28]
0054c08b : CALL 0x0059a980
0054c090 : POP EDI
0054c091 : POP EBP
0054c092 : POP ESI
0054c093 : POP EBX
0054c094 : ADD ESP,0x20
0054c097 : RET 0x10
0054c09a : MOV EAX,dword ptr [ESP + 0x38]
0054c09e : MOV ECX,dword ptr [ESP + 0x34]
0054c0a2 : PUSH EBX
0054c0a3 : LEA EDX,[ESP + 0xc]
0054c0a7 : PUSH EDX
0054c0a8 : MOV EDX,dword ptr [ESP + 0x38]
0054c0ac : PUSH EAX
0054c0ad : MOV EAX,dword ptr [ESP + 0x38]
0054c0b1 : PUSH ECX
0054c0b2 : PUSH EDX
0054c0b3 : PUSH EAX
0054c0b4 : LEA ECX,[ESI + 0x28]
0054c0b7 : CALL 0x0059a980
0054c0bc : POP ESI
0054c0bd : POP EBX
0054c0be : ADD ESP,0x20
0054c0c1 : RET 0x10
