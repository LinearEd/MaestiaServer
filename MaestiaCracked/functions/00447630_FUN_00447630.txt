PROGRAM  : Maestia.exe
FUNCTION : FUN_00447630
ENTRY    : 00447630
BODY     : [[00447630, 004477cc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00447630(int param_1,uint param_2,uint param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int unaff_ESI;
  uint unaff_EDI;
  
  if ((*(uint *)(unaff_ESI + 0x14) < unaff_EDI) || (*(uint *)(param_1 + 0x14) < param_2)) {
    FUN_00622f07();
  }
  uVar1 = *(int *)(param_1 + 0x14) - param_2;
  if (uVar1 < param_3) {
    param_3 = uVar1;
  }
  if (-*(int *)(unaff_ESI + 0x14) - 1U <= param_3) {
    FUN_00622ecf();
  }
  if (param_3 != 0) {
    uVar1 = *(int *)(unaff_ESI + 0x14) + param_3;
    if (0x7ffffffe < uVar1) {
      FUN_00622ecf();
    }
    if (*(uint *)(unaff_ESI + 0x18) < uVar1) {
      FUN_00406170(uVar1,*(undefined4 *)(unaff_ESI + 0x14));
    }
    else if (uVar1 == 0) {
      *(undefined4 *)(unaff_ESI + 0x14) = 0;
      if (7 < *(uint *)(unaff_ESI + 0x18)) {
        **(undefined2 **)(unaff_ESI + 4) = 0;
        return;
      }
      *(undefined2 *)(unaff_ESI + 4) = 0;
      return;
    }
    if (uVar1 != 0) {
      if (*(uint *)(unaff_ESI + 0x18) < 8) {
        iVar3 = unaff_ESI + 4;
        iVar2 = unaff_ESI + 4;
      }
      else {
        iVar3 = *(int *)(unaff_ESI + 4);
        iVar2 = *(int *)(unaff_ESI + 4);
      }
      _memmove_s((void *)(iVar2 + (unaff_EDI + param_3) * 2),
                 ((*(uint *)(unaff_ESI + 0x18) - unaff_EDI) - param_3) * 2,
                 (void *)(iVar3 + unaff_EDI * 2),(*(int *)(unaff_ESI + 0x14) - unaff_EDI) * 2);
      if (unaff_ESI == param_1) {
        if (unaff_EDI < param_2) {
          param_2 = param_2 + param_3;
        }
        if (*(uint *)(unaff_ESI + 0x18) < 8) {
          iVar3 = unaff_ESI + 4;
          iVar2 = unaff_ESI + 4;
        }
        else {
          iVar3 = *(int *)(unaff_ESI + 4);
          iVar2 = *(int *)(unaff_ESI + 4);
        }
        _memmove_s((void *)(iVar2 + unaff_EDI * 2),(*(uint *)(unaff_ESI + 0x18) - unaff_EDI) * 2,
                   (void *)(iVar3 + param_2 * 2),param_3 * 2);
      }
      else {
        if (*(uint *)(param_1 + 0x18) < 8) {
          param_1 = param_1 + 4;
        }
        else {
          param_1 = *(int *)(param_1 + 4);
        }
        if (*(uint *)(unaff_ESI + 0x18) < 8) {
          iVar3 = unaff_ESI + 4;
        }
        else {
          iVar3 = *(int *)(unaff_ESI + 4);
        }
        _memcpy_s((void *)(iVar3 + unaff_EDI * 2),(*(uint *)(unaff_ESI + 0x18) - unaff_EDI) * 2,
                  (void *)(param_1 + param_2 * 2),param_3 * 2);
      }
      *(uint *)(unaff_ESI + 0x14) = uVar1;
      if (7 < *(uint *)(unaff_ESI + 0x18)) {
        *(undefined2 *)(*(int *)(unaff_ESI + 4) + uVar1 * 2) = 0;
        return;
      }
      *(undefined2 *)(unaff_ESI + 4 + uVar1 * 2) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00447630 : PUSH EBP
00447631 : MOV EBP,ESP
00447633 : PUSH ECX
00447634 : PUSH EBX
00447635 : MOV EBX,dword ptr [EBP + 0x10]
00447638 : CMP dword ptr [ESI + 0x14],EDI
0044763b : JC 0x00447648
0044763d : MOV EAX,dword ptr [EBP + 0x8]
00447640 : MOV ECX,dword ptr [EAX + 0x14]
00447643 : CMP ECX,dword ptr [EBP + 0xc]
00447646 : JNC 0x0044764d
00447648 : CALL 0x00622f07
0044764d : MOV EDX,dword ptr [EBP + 0x8]
00447650 : MOV EAX,dword ptr [EDX + 0x14]
00447653 : SUB EAX,dword ptr [EBP + 0xc]
00447656 : CMP EAX,EBX
00447658 : CMOVC EBX,EAX
0044765b : OR EAX,0xffffffff
0044765e : SUB EAX,dword ptr [ESI + 0x14]
00447661 : CMP EAX,EBX
00447663 : JA 0x0044766a
00447665 : CALL 0x00622ecf
0044766a : TEST EBX,EBX
0044766c : JBE 0x004477c4
00447672 : MOV EAX,dword ptr [ESI + 0x14]
00447675 : ADD EAX,EBX
00447677 : MOV dword ptr [EBP + 0x10],EAX
0044767a : CMP EAX,0x7ffffffe
0044767f : JBE 0x00447689
00447681 : CALL 0x00622ecf
00447686 : MOV EAX,dword ptr [EBP + 0x10]
00447689 : MOV ECX,dword ptr [ESI + 0x18]
0044768c : CMP ECX,EAX
0044768e : JNC 0x004476b4
00447690 : MOV ECX,dword ptr [ESI + 0x14]
00447693 : PUSH ECX
00447694 : PUSH EAX
00447695 : MOV ECX,ESI
00447697 : CALL 0x00406170
0044769c : MOV EAX,dword ptr [EBP + 0x10]
0044769f : TEST EAX,EAX
004476a1 : JBE 0x004477c4
004476a7 : MOV EAX,dword ptr [ESI + 0x18]
004476aa : CMP EAX,0x8
004476ad : JC 0x004476e2
004476af : MOV ECX,dword ptr [ESI + 0x4]
004476b2 : JMP 0x004476e5
004476b4 : TEST EAX,EAX
004476b6 : JNZ 0x004476a1
004476b8 : MOV dword ptr [ESI + 0x14],EAX
004476bb : CMP ECX,0x8
004476be : JC 0x004476d1
004476c0 : MOV EAX,dword ptr [ESI + 0x4]
004476c3 : XOR EDX,EDX
004476c5 : MOV word ptr [EAX],DX
004476c8 : MOV EAX,ESI
004476ca : POP EBX
004476cb : MOV ESP,EBP
004476cd : POP EBP
004476ce : RET 0xc
004476d1 : LEA EAX,[ESI + 0x4]
004476d4 : XOR EDX,EDX
004476d6 : MOV word ptr [EAX],DX
004476d9 : MOV EAX,ESI
004476db : POP EBX
004476dc : MOV ESP,EBP
004476de : POP EBP
004476df : RET 0xc
004476e2 : LEA ECX,[ESI + 0x4]
004476e5 : MOV dword ptr [EBP + -0x4],ECX
004476e8 : CMP EAX,0x8
004476eb : JC 0x004476f2
004476ed : MOV ECX,dword ptr [ESI + 0x4]
004476f0 : JMP 0x004476f5
004476f2 : LEA ECX,[ESI + 0x4]
004476f5 : MOV EDX,dword ptr [ESI + 0x14]
004476f8 : SUB EDX,EDI
004476fa : ADD EDX,EDX
004476fc : PUSH EDX
004476fd : MOV EDX,dword ptr [EBP + -0x4]
00447700 : SUB EAX,EDI
00447702 : SUB EAX,EBX
00447704 : LEA EDX,[EDX + EDI*0x2]
00447707 : PUSH EDX
00447708 : ADD EAX,EAX
0044770a : PUSH EAX
0044770b : LEA EAX,[EDI + EBX*0x1]
0044770e : LEA ECX,[ECX + EAX*0x2]
00447711 : PUSH ECX
00447712 : CALL 0x00634101
00447717 : MOV EAX,dword ptr [EBP + 0x8]
0044771a : ADD ESP,0x10
0044771d : CMP ESI,EAX
0044771f : JNZ 0x00447764
00447721 : MOV EAX,dword ptr [EBP + 0xc]
00447724 : CMP EDI,EAX
00447726 : JNC 0x0044772a
00447728 : ADD EAX,EBX
0044772a : MOV dword ptr [EBP + 0xc],EAX
0044772d : MOV EAX,dword ptr [ESI + 0x18]
00447730 : CMP EAX,0x8
00447733 : JC 0x0044773a
00447735 : MOV EDX,dword ptr [ESI + 0x4]
00447738 : JMP 0x0044773d
0044773a : LEA EDX,[ESI + 0x4]
0044773d : CMP EAX,0x8
00447740 : JC 0x00447747
00447742 : MOV ECX,dword ptr [ESI + 0x4]
00447745 : JMP 0x0044774a
00447747 : LEA ECX,[ESI + 0x4]
0044774a : ADD EBX,EBX
0044774c : PUSH EBX
0044774d : MOV EBX,dword ptr [EBP + 0xc]
00447750 : SUB EAX,EDI
00447752 : LEA EDX,[EDX + EBX*0x2]
00447755 : PUSH EDX
00447756 : ADD EAX,EAX
00447758 : PUSH EAX
00447759 : LEA EAX,[ECX + EDI*0x2]
0044775c : PUSH EAX
0044775d : CALL 0x00634101
00447762 : JMP 0x0044779a
00447764 : CMP dword ptr [EAX + 0x18],0x8
00447768 : JC 0x0044776f
0044776a : MOV EDX,dword ptr [EAX + 0x4]
0044776d : JMP 0x00447772
0044776f : LEA EDX,[EAX + 0x4]
00447772 : MOV EAX,dword ptr [ESI + 0x18]
00447775 : CMP EAX,0x8
00447778 : JC 0x0044777f
0044777a : MOV ECX,dword ptr [ESI + 0x4]
0044777d : JMP 0x00447782
0044777f : LEA ECX,[ESI + 0x4]
00447782 : ADD EBX,EBX
00447784 : PUSH EBX
00447785 : MOV EBX,dword ptr [EBP + 0xc]
00447788 : SUB EAX,EDI
0044778a : LEA EDX,[EDX + EBX*0x2]
0044778d : PUSH EDX
0044778e : ADD EAX,EAX
00447790 : PUSH EAX
00447791 : LEA EAX,[ECX + EDI*0x2]
00447794 : PUSH EAX
00447795 : CALL 0x00633ea4
0044779a : MOV ECX,dword ptr [EBP + 0x10]
0044779d : ADD ESP,0x10
004477a0 : CMP dword ptr [ESI + 0x18],0x8
004477a4 : MOV dword ptr [ESI + 0x14],ECX
004477a7 : JC 0x004477bb
004477a9 : MOV EAX,dword ptr [ESI + 0x4]
004477ac : XOR EDX,EDX
004477ae : MOV word ptr [EAX + ECX*0x2],DX
004477b2 : MOV EAX,ESI
004477b4 : POP EBX
004477b5 : MOV ESP,EBP
004477b7 : POP EBP
004477b8 : RET 0xc
004477bb : LEA EAX,[ESI + 0x4]
004477be : XOR EDX,EDX
004477c0 : MOV word ptr [EAX + ECX*0x2],DX
004477c4 : MOV EAX,ESI
004477c6 : POP EBX
004477c7 : MOV ESP,EBP
004477c9 : POP EBP
004477ca : RET 0xc
