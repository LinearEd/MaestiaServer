PROGRAM  : Maestia.exe
FUNCTION : FUN_007c5820
ENTRY    : 007c5820
BODY     : [[007c5820, 007c5a1c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_007c5820(undefined4 *param_1,undefined4 param_2)

{
  char cVar1;
  uint uVar2;
  undefined4 uVar3;
  int *in_ECX;
  int *piVar4;
  int *piVar5;
  undefined1 local_40 [4];
  undefined2 local_3c;
  undefined4 local_2c;
  uint local_28;
  undefined1 local_24 [4];
  int local_20;
  undefined **local_1c;
  int *local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b19ed0;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar5 = (int *)0x0;
  local_14 = 0;
  uVar3 = FUN_00801fc0(&local_1c,param_2);
  local_8 = 1;
  FUN_0043e5a0(local_24,uVar3);
  local_8._0_1_ = 3;
  local_1c = &PTR_FUN_00cd4964;
  if (local_18 != (int *)0x0) {
    (**(code **)(*local_18 + 0x30))(uVar2);
    local_18 = (int *)0x0;
  }
  if (local_20 == 0) {
    local_18 = (int *)FUN_006f0760(0x98,".\\Resource\\AvaAniDataMgr.cpp",0x3d,0);
    local_8._0_1_ = 4;
    if (local_18 != (int *)0x0) {
      piVar5 = (int *)FUN_00760220(local_18);
    }
    local_8._0_1_ = 3;
    if (piVar5 == (int *)0x0) {
      FUN_00406460(L"Alloc failed");
      local_8._0_1_ = 5;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaLib::AvaAniDataMgr::Load",0x41,local_40);
      }
      local_8 = CONCAT31(local_8._1_3_,3);
      if (7 < local_28) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_28 = 7;
      local_2c = 0;
      local_3c = 0;
      *param_1 = &PTR_FUN_00cd4964;
      param_1[1] = 0;
      local_8 = (uint)local_8._1_3_ << 8;
      goto LAB_007c5a02;
    }
    cVar1 = (**(code **)(*piVar5 + 4))(param_2);
    if (cVar1 == '\0') {
      (**(code **)*piVar5)(1);
      piVar4 = (int *)0x0;
    }
    else {
      piVar5[0xd] = (int)in_ECX;
      cVar1 = (**(code **)(*in_ECX + 0xc))(piVar5);
      piVar4 = piVar5;
      if (cVar1 == '\0') {
        piVar4 = (int *)0x0;
        piVar5[0xd] = 0;
        (**(code **)*piVar5)(1);
        FUN_00801fc0(&local_1c,param_2);
        local_8._0_1_ = 6;
        FUN_00463a60();
        local_8._0_1_ = 3;
        FUN_0045f640();
        if (local_20 != 0) {
          FUN_0043a270();
          local_8 = (uint)local_8._1_3_ << 8;
          goto LAB_007c5a02;
        }
      }
    }
    *param_1 = &PTR_FUN_00cd4964;
    param_1[1] = piVar4;
    if (piVar4 != (int *)0x0) {
      InterlockedIncrement(piVar4 + 0xb);
    }
  }
  else {
    param_1[1] = local_20;
    *param_1 = &PTR_FUN_00cd4964;
    InterlockedIncrement((LONG *)(local_20 + 0x2c));
  }
  local_8 = (uint)local_8._1_3_ << 8;
LAB_007c5a02:
  local_14 = 1;
  FUN_0040ed80(local_24);
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
007c5820 : PUSH EBP
007c5821 : MOV EBP,ESP
007c5823 : PUSH -0x1
007c5825 : PUSH 0xb19ed0
007c582a : MOV EAX,FS:[0x0]
007c5830 : PUSH EAX
007c5831 : SUB ESP,0x30
007c5834 : PUSH EBX
007c5835 : PUSH ESI
007c5836 : PUSH EDI
007c5837 : MOV EAX,[0x00d66fa0]
007c583c : XOR EAX,EBP
007c583e : PUSH EAX
007c583f : LEA EAX,[EBP + -0xc]
007c5842 : MOV FS:[0x0],EAX
007c5848 : MOV EDI,ECX
007c584a : MOV EAX,dword ptr [EBP + 0xc]
007c584d : PUSH EAX
007c584e : LEA ECX,[EBP + -0x18]
007c5851 : PUSH ECX
007c5852 : XOR ESI,ESI
007c5854 : MOV ECX,EDI
007c5856 : MOV dword ptr [EBP + -0x10],ESI
007c5859 : CALL 0x00801fc0
007c585e : MOV EBX,0x1
007c5863 : MOV dword ptr [EBP + -0x4],EBX
007c5866 : PUSH EAX
007c5867 : LEA EDX,[EBP + -0x20]
007c586a : PUSH EDX
007c586b : CALL 0x0043e5a0
007c5870 : MOV byte ptr [EBP + -0x4],0x3
007c5874 : MOV ECX,dword ptr [EBP + -0x14]
007c5877 : MOV dword ptr [EBP + -0x18],0xcd4964
007c587e : CMP ECX,ESI
007c5880 : JZ 0x007c588c
007c5882 : MOV EAX,dword ptr [ECX]
007c5884 : MOV EDX,dword ptr [EAX + 0x30]
007c5887 : CALL EDX
007c5889 : MOV dword ptr [EBP + -0x14],ESI
007c588c : MOV EAX,dword ptr [EBP + -0x1c]
007c588f : CMP EAX,ESI
007c5891 : JZ 0x007c58b1
007c5893 : MOV ESI,dword ptr [EBP + 0x8]
007c5896 : MOV dword ptr [ESI + 0x4],EAX
007c5899 : ADD EAX,0x2c
007c589c : PUSH EAX
007c589d : MOV dword ptr [ESI],0xcd4964
007c58a3 : CALL dword ptr [0x00b850dc]
007c58a9 : MOV dword ptr [EBP + -0x10],EBX
007c58ac : JMP 0x007c59fa
007c58b1 : PUSH ESI
007c58b2 : PUSH 0x3d
007c58b4 : PUSH 0xc1cb94
007c58b9 : PUSH 0x98
007c58be : CALL 0x006f0760
007c58c3 : ADD ESP,0x10
007c58c6 : MOV dword ptr [EBP + -0x14],EAX
007c58c9 : MOV byte ptr [EBP + -0x4],0x4
007c58cd : CMP EAX,ESI
007c58cf : JZ 0x007c58d9
007c58d1 : PUSH EAX
007c58d2 : CALL 0x00760220
007c58d7 : MOV ESI,EAX
007c58d9 : MOV byte ptr [EBP + -0x4],0x3
007c58dd : MOV EBX,ESI
007c58df : TEST ESI,ESI
007c58e1 : JNZ 0x007c5955
007c58e3 : PUSH 0xc1cbd4
007c58e8 : LEA ECX,[EBP + -0x3c]
007c58eb : CALL 0x00406460
007c58f0 : MOV byte ptr [EBP + -0x4],0x5
007c58f4 : MOV ECX,dword ptr [0x00da98e8]
007c58fa : MOV ECX,dword ptr [ECX]
007c58fc : XOR EDI,EDI
007c58fe : CMP ECX,EDI
007c5900 : JZ 0x007c5914
007c5902 : MOV EDX,dword ptr [ECX]
007c5904 : MOV EDX,dword ptr [EDX + 0x14]
007c5907 : LEA EAX,[EBP + -0x3c]
007c590a : PUSH EAX
007c590b : PUSH 0x41
007c590d : PUSH 0xc1cbf0
007c5912 : CALL EDX
007c5914 : MOV byte ptr [EBP + -0x4],0x3
007c5918 : CMP dword ptr [EBP + -0x24],0x8
007c591c : JC 0x007c5926
007c591e : MOV ECX,dword ptr [EBP + -0x38]
007c5921 : CALL 0x006f04e0
007c5926 : MOV ESI,dword ptr [EBP + 0x8]
007c5929 : XOR EAX,EAX
007c592b : MOV dword ptr [EBP + -0x24],0x7
007c5932 : MOV dword ptr [EBP + -0x28],EDI
007c5935 : MOV word ptr [EBP + -0x38],AX
007c5939 : MOV dword ptr [ESI],0xcd4964
007c593f : MOV dword ptr [ESI + 0x4],EDI
007c5942 : MOV dword ptr [EBP + -0x10],0x1
007c5949 : MOV byte ptr [EBP + -0x4],AL
007c594c : LEA ECX,[EBP + -0x20]
007c594f : PUSH ECX
007c5950 : JMP 0x007c5a02
007c5955 : MOV EDX,dword ptr [ESI]
007c5957 : MOV EAX,dword ptr [EBP + 0xc]
007c595a : MOV EDX,dword ptr [EDX + 0x4]
007c595d : PUSH EAX
007c595e : MOV ECX,ESI
007c5960 : CALL EDX
007c5962 : TEST AL,AL
007c5964 : JZ 0x007c59cd
007c5966 : MOV dword ptr [ESI + 0x34],EDI
007c5969 : MOV EAX,dword ptr [EDI]
007c596b : MOV EDX,dword ptr [EAX + 0xc]
007c596e : PUSH ESI
007c596f : MOV ECX,EDI
007c5971 : CALL EDX
007c5973 : TEST AL,AL
007c5975 : JNZ 0x007c59d9
007c5977 : XOR EBX,EBX
007c5979 : MOV dword ptr [ESI + 0x34],EBX
007c597c : MOV EAX,dword ptr [ESI]
007c597e : MOV EDX,dword ptr [EAX]
007c5980 : PUSH 0x1
007c5982 : MOV ECX,ESI
007c5984 : CALL EDX
007c5986 : MOV EAX,dword ptr [EBP + 0xc]
007c5989 : PUSH EAX
007c598a : LEA ECX,[EBP + -0x18]
007c598d : PUSH ECX
007c598e : MOV ECX,EDI
007c5990 : CALL 0x00801fc0
007c5995 : MOV byte ptr [EBP + -0x4],0x6
007c5999 : MOV ESI,EAX
007c599b : LEA EDI,[EBP + -0x20]
007c599e : CALL 0x00463a60
007c59a3 : MOV byte ptr [EBP + -0x4],0x3
007c59a7 : LEA ECX,[EBP + -0x18]
007c59aa : CALL 0x0045f640
007c59af : MOV EAX,dword ptr [EBP + -0x1c]
007c59b2 : TEST EAX,EAX
007c59b4 : JZ 0x007c59d9
007c59b6 : MOV ESI,dword ptr [EBP + 0x8]
007c59b9 : CALL 0x0043a270
007c59be : MOV dword ptr [EBP + -0x10],0x1
007c59c5 : MOV byte ptr [EBP + -0x4],BL
007c59c8 : MOV EDX,EDI
007c59ca : PUSH EDX
007c59cb : JMP 0x007c5a02
007c59cd : MOV EAX,dword ptr [ESI]
007c59cf : MOV EDX,dword ptr [EAX]
007c59d1 : PUSH 0x1
007c59d3 : MOV ECX,ESI
007c59d5 : CALL EDX
007c59d7 : XOR EBX,EBX
007c59d9 : MOV ESI,dword ptr [EBP + 0x8]
007c59dc : MOV dword ptr [ESI],0xcd4964
007c59e2 : MOV dword ptr [ESI + 0x4],EBX
007c59e5 : TEST EBX,EBX
007c59e7 : JZ 0x007c59f3
007c59e9 : ADD EBX,0x2c
007c59ec : PUSH EBX
007c59ed : CALL dword ptr [0x00b850dc]
007c59f3 : MOV dword ptr [EBP + -0x10],0x1
007c59fa : MOV byte ptr [EBP + -0x4],0x0
007c59fe : LEA EAX,[EBP + -0x20]
007c5a01 : PUSH EAX
007c5a02 : CALL 0x0040ed80
007c5a07 : MOV EAX,ESI
007c5a09 : MOV ECX,dword ptr [EBP + -0xc]
007c5a0c : MOV dword ptr FS:[0x0],ECX
007c5a13 : POP ECX
007c5a14 : POP EDI
007c5a15 : POP ESI
007c5a16 : POP EBX
007c5a17 : MOV ESP,EBP
007c5a19 : POP EBP
007c5a1a : RET 0x8
