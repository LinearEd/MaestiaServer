PROGRAM  : Maestia.exe
FUNCTION : FUN_004c7fc0
ENTRY    : 004c7fc0
BODY     : [[004c7fc0, 004c7ffb] [004c8000, 004c8115]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x004c801c) */

void FUN_004c7fc0(int param_1,undefined4 *param_2,undefined4 *param_3)

{
  uint uVar1;
  int iVar2;
  ushort *puVar3;
  undefined4 *puVar4;
  int iVar5;
  ushort *puVar6;
  uint uVar7;
  undefined4 *puVar8;
  bool bVar9;
  
  iVar2 = (int)param_3;
  puVar4 = *(undefined4 **)(param_1 + 4);
  bVar9 = true;
  if (*(char *)((int)puVar4[1] + 0x3d) == '\0') {
    uVar1 = *(uint *)((int)param_3 + 0x14);
    puVar8 = (undefined4 *)puVar4[1];
    do {
      puVar4 = puVar8;
      if ((uint)puVar4[9] < 8) {
        puVar3 = (ushort *)(puVar4 + 4);
      }
      else {
        puVar3 = (ushort *)puVar4[4];
      }
      uVar7 = puVar4[8];
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = uVar1;
      }
      if (*(uint *)((int)param_3 + 0x18) < 8) {
        puVar6 = (ushort *)((int)param_3 + 4);
      }
      else {
        puVar6 = *(ushort **)((int)param_3 + 4);
      }
      for (; uVar7 != 0; uVar7 = uVar7 - 1) {
        if (*puVar6 != *puVar3) {
          uVar7 = (-(uint)(*puVar6 < *puVar3) & 0xfffffffe) + 1;
          if (uVar7 != 0) goto LAB_004c8077;
          break;
        }
        puVar6 = puVar6 + 1;
        puVar3 = puVar3 + 1;
      }
      if (uVar1 < (uint)puVar4[8]) {
        uVar7 = 0xffffffff;
      }
      else {
        uVar7 = (uint)(uVar1 != puVar4[8]);
      }
LAB_004c8077:
      bVar9 = (int)uVar7 < 0;
      if (bVar9) {
        puVar8 = (undefined4 *)*puVar4;
      }
      else {
        puVar8 = (undefined4 *)puVar4[2];
      }
    } while (*(char *)((int)puVar8 + 0x3d) == '\0');
  }
  param_3 = puVar4;
  if (bVar9) {
    if (puVar4 == (undefined4 *)**(int **)(param_1 + 4)) {
      bVar9 = true;
      goto LAB_004c80b1;
    }
    FUN_004c96c0();
  }
  puVar4 = param_3;
  if (*(uint *)(iVar2 + 0x18) < 8) {
    iVar5 = iVar2 + 4;
  }
  else {
    iVar5 = *(int *)(iVar2 + 4);
  }
  iVar5 = FUN_00405bb0(iVar5);
  if (-1 < iVar5) {
    *param_2 = puVar4;
    *(undefined1 *)(param_2 + 1) = 0;
    return;
  }
LAB_004c80b1:
  puVar4 = (undefined4 *)FUN_004c8d30(&param_3,bVar9,iVar2);
  *param_2 = *puVar4;
  *(undefined1 *)(param_2 + 1) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
004c7fc0 : PUSH EBP
004c7fc1 : MOV EBP,ESP
004c7fc3 : SUB ESP,0x18
004c7fc6 : PUSH EBX
004c7fc7 : MOV EBX,dword ptr [EBP + 0x10]
004c7fca : PUSH ESI
004c7fcb : PUSH EDI
004c7fcc : MOV EDI,dword ptr [EBP + 0x8]
004c7fcf : MOV EAX,dword ptr [EDI + 0x4]
004c7fd2 : MOV ESI,dword ptr [EAX + 0x4]
004c7fd5 : CMP byte ptr [ESI + 0x3d],0x0
004c7fd9 : MOV ECX,EAX
004c7fdb : MOV AL,0x1
004c7fdd : MOV dword ptr [EBP + -0x4],ECX
004c7fe0 : MOV byte ptr [EBP + -0x8],AL
004c7fe3 : JNZ 0x004c809a
004c7fe9 : MOV EAX,dword ptr [EBX + 0x14]
004c7fec : MOV EDX,dword ptr [EBX + 0x18]
004c7fef : MOV ECX,EAX
004c7ff1 : MOV dword ptr [EBP + -0x10],EAX
004c7ff4 : MOV dword ptr [EBP + -0xc],ECX
004c7ff7 : MOV dword ptr [EBP + -0x14],EDX
004c7ffa : JMP 0x004c8003
004c8000 : MOV ECX,dword ptr [EBP + -0xc]
004c8003 : CMP dword ptr [ESI + 0x24],0x8
004c8007 : MOV EDX,dword ptr [ESI + 0x20]
004c800a : MOV dword ptr [EBP + -0x4],ESI
004c800d : JC 0x004c8014
004c800f : MOV EAX,dword ptr [ESI + 0x10]
004c8012 : JMP 0x004c8017
004c8014 : LEA EAX,[ESI + 0x10]
004c8017 : MOV EDI,dword ptr [EBP + -0x10]
004c801a : CMP ECX,EDI
004c801c : CMOVC EDI,ECX
004c801f : CMP EDI,EDX
004c8021 : JNC 0x004c8025
004c8023 : MOV EDX,EDI
004c8025 : CMP dword ptr [EBP + -0x14],0x8
004c8029 : JC 0x004c8030
004c802b : MOV ECX,dword ptr [EBX + 0x4]
004c802e : JMP 0x004c8033
004c8030 : LEA ECX,[EBX + 0x4]
004c8033 : TEST EDX,EDX
004c8035 : JBE 0x004c804d
004c8037 : MOV BX,word ptr [ECX]
004c803a : CMP BX,word ptr [EAX]
004c803d : JNZ 0x004c8059
004c803f : ADD ECX,0x2
004c8042 : ADD EAX,0x2
004c8045 : SUB EDX,0x1
004c8048 : JNZ 0x004c8037
004c804a : MOV EBX,dword ptr [EBP + 0x10]
004c804d : MOV EAX,dword ptr [ESI + 0x20]
004c8050 : CMP EDI,EAX
004c8052 : JNC 0x004c806e
004c8054 : OR EAX,0xffffffff
004c8057 : JMP 0x004c8077
004c8059 : MOV CX,BX
004c805c : CMP CX,word ptr [EAX]
004c805f : SBB EAX,EAX
004c8061 : AND EAX,0xfffffffe
004c8064 : ADD EAX,0x1
004c8067 : JZ 0x004c804a
004c8069 : MOV EBX,dword ptr [EBP + 0x10]
004c806c : JMP 0x004c8077
004c806e : XOR EDX,EDX
004c8070 : CMP EDI,EAX
004c8072 : SETNZ DL
004c8075 : MOV EAX,EDX
004c8077 : TEST EAX,EAX
004c8079 : SETL AL
004c807c : MOV byte ptr [EBP + -0x8],AL
004c807f : TEST AL,AL
004c8081 : JZ 0x004c8087
004c8083 : MOV ESI,dword ptr [ESI]
004c8085 : JMP 0x004c808a
004c8087 : MOV ESI,dword ptr [ESI + 0x8]
004c808a : CMP byte ptr [ESI + 0x3d],0x0
004c808e : JZ 0x004c8000
004c8094 : MOV EDI,dword ptr [EBP + 0x8]
004c8097 : MOV ECX,dword ptr [EBP + -0x4]
004c809a : MOV ESI,ECX
004c809c : MOV dword ptr [EBP + 0x10],ESI
004c809f : TEST AL,AL
004c80a1 : JZ 0x004c80d2
004c80a3 : MOV EAX,dword ptr [EDI + 0x4]
004c80a6 : LEA EDX,[EBP + 0x10]
004c80a9 : CMP ECX,dword ptr [EAX]
004c80ab : JNZ 0x004c80ca
004c80ad : PUSH EBX
004c80ae : PUSH 0x1
004c80b0 : PUSH EDX
004c80b1 : CALL 0x004c8d30
004c80b6 : MOV ECX,dword ptr [EAX]
004c80b8 : MOV EAX,dword ptr [EBP + 0xc]
004c80bb : MOV dword ptr [EAX],ECX
004c80bd : MOV byte ptr [EAX + 0x4],0x1
004c80c1 : POP EDI
004c80c2 : POP ESI
004c80c3 : POP EBX
004c80c4 : MOV ESP,EBP
004c80c6 : POP EBP
004c80c7 : RET 0xc
004c80ca : CALL 0x004c96c0
004c80cf : MOV ESI,dword ptr [EBP + 0x10]
004c80d2 : CMP dword ptr [EBX + 0x18],0x8
004c80d6 : MOV EDI,dword ptr [EBX + 0x14]
004c80d9 : LEA ECX,[ESI + 0xc]
004c80dc : JC 0x004c80e3
004c80de : MOV EAX,dword ptr [EBX + 0x4]
004c80e1 : JMP 0x004c80e6
004c80e3 : LEA EAX,[EBX + 0x4]
004c80e6 : PUSH EAX
004c80e7 : MOV EAX,dword ptr [ECX + 0x14]
004c80ea : CALL 0x00405bb0
004c80ef : TEST EAX,EAX
004c80f1 : JGE 0x004c8104
004c80f3 : MOV EDX,dword ptr [EBP + -0x8]
004c80f6 : MOV ECX,dword ptr [EBP + -0x4]
004c80f9 : MOV EDI,dword ptr [EBP + 0x8]
004c80fc : PUSH EBX
004c80fd : PUSH EDX
004c80fe : LEA EAX,[EBP + 0x10]
004c8101 : PUSH EAX
004c8102 : JMP 0x004c80b1
004c8104 : MOV EAX,dword ptr [EBP + 0xc]
004c8107 : POP EDI
004c8108 : MOV dword ptr [EAX],ESI
004c810a : POP ESI
004c810b : MOV byte ptr [EAX + 0x4],0x0
004c810f : POP EBX
004c8110 : MOV ESP,EBP
004c8112 : POP EBP
004c8113 : RET 0xc
