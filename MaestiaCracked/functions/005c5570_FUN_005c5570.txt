PROGRAM  : Maestia.exe
FUNCTION : FUN_005c5570
ENTRY    : 005c5570
BODY     : [[005c5570, 005c55ce]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005c5570(void)

{
  int *piVar1;
  undefined4 *puVar2;
  int *in_ECX;
  int iVar3;
  int iVar4;
  
  if (*in_ECX != 0) {
    iVar4 = 0;
    iVar3 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar2 = (undefined4 *)(iVar4 + 8 + *in_ECX);
      if (*(int *)(iVar4 + 8 + *in_ECX) != -2) {
        puVar2[2] = &PTR_FUN_00b91c9c;
        if (puVar2[3] != 0) {
          FUN_00503db0();
        }
        piVar1 = (int *)(puVar2[1] + 8);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 == 0) {
          FUN_00525340();
        }
        *puVar2 = 0xfffffffe;
      }
      iVar4 = iVar4 + 0x10;
      iVar3 = iVar3 + -1;
    } while (iVar3 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005c5570 : PUSH EBX
005c5571 : MOV EBX,ECX
005c5573 : MOV EAX,dword ptr [EBX]
005c5575 : TEST EAX,EAX
005c5577 : JZ 0x005c55cd
005c5579 : MOV EAX,dword ptr [EAX + 0x4]
005c557c : PUSH EBP
005c557d : PUSH ESI
005c557e : PUSH EDI
005c557f : XOR EDI,EDI
005c5581 : LEA EBP,[EAX + 0x1]
005c5584 : MOV EAX,dword ptr [EBX]
005c5586 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
005c558b : LEA ESI,[EDI + EAX*0x1 + 0x8]
005c558f : JZ 0x005c55b8
005c5591 : MOV dword ptr [ESI + 0x8],0xb91c9c
005c5598 : MOV ECX,dword ptr [ESI + 0xc]
005c559b : TEST ECX,ECX
005c559d : JZ 0x005c55a4
005c559f : CALL 0x00503db0
005c55a4 : MOV ECX,dword ptr [ESI + 0x4]
005c55a7 : ADD dword ptr [ECX + 0x8],-0x1
005c55ab : JNZ 0x005c55b2
005c55ad : CALL 0x00525340
005c55b2 : MOV dword ptr [ESI],0xfffffffe
005c55b8 : ADD EDI,0x10
005c55bb : SUB EBP,0x1
005c55be : JNZ 0x005c5584
005c55c0 : MOV ECX,dword ptr [EBX]
005c55c2 : PUSH ECX
005c55c3 : CALL 0x00515cf0
005c55c8 : POP EDI
005c55c9 : POP ESI
005c55ca : MOV dword ptr [EBX],EBP
005c55cc : POP EBP
005c55cd : POP EBX
005c55ce : RET
