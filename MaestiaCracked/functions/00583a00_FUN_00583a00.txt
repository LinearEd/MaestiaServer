PROGRAM  : Maestia.exe
FUNCTION : FUN_00583a00
ENTRY    : 00583a00
BODY     : [[00583a00, 00583bc8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00583a00(int param_1,GRefCountImpl *param_2,GRefCountImpl *param_3)

{
  GRefCountImpl *pGVar1;
  GRefCountImpl *pGVar2;
  int iVar3;
  undefined4 uVar4;
  int in_ECX;
  int unaff_EBX;
  int iVar5;
  int unaff_retaddr;
  undefined4 *puVar6;
  int local_60;
  int iStack_5c;
  int iStack_58;
  undefined1 auStack_54 [4];
  undefined8 uStack_50;
  undefined1 auStack_44 [16];
  undefined1 uStack_34;
  undefined1 uStack_24;
  undefined1 uStack_14;
  int iStack_8;
  
  pGVar1 = param_2;
  if (param_2 != (GRefCountImpl *)0x0) {
    GRefCountImpl::AddRef(param_2);
  }
  if (*(int *)(in_ECX + 0x30) != 0) {
    FUN_00524240();
  }
  pGVar2 = param_3;
  *(GRefCountImpl **)(in_ECX + 0x30) = pGVar1;
  if (param_3 != (GRefCountImpl *)0x0) {
    GRefCountImpl::AddRef(param_3);
  }
  if (*(int *)(in_ECX + 0x34) != 0) {
    FUN_00524240();
  }
  *(GRefCountImpl **)(in_ECX + 0x34) = pGVar2;
  (**(code **)(**(int **)(pGVar1 + 0xc) + 0x14))(&local_60);
  auStack_44[0] = 0;
  uStack_34 = 0;
  uStack_24 = 0;
  uStack_14 = 0;
  auStack_54[0] = 4;
  uStack_50._0_4_ = 0;
  FUN_005268b0(auStack_54);
  FUN_00526bc0();
  auStack_54[0] = 4;
  uStack_50 = (double)((ulonglong)uStack_50._4_4_ << 0x20);
  FUN_005268b0(auStack_54);
  FUN_00526bc0();
  param_1 = iStack_5c - unaff_EBX;
  uStack_50 = (double)param_1;
  auStack_54[0] = 3;
  FUN_005268b0(auStack_54);
  FUN_00526bc0();
  param_1 = iStack_58 - local_60;
  uStack_50 = (double)param_1;
  auStack_54[0] = 3;
  FUN_005268b0(auStack_54);
  FUN_00526bc0();
  iVar3 = FUN_005324f0(*(undefined4 *)(*(int *)(unaff_retaddr + 0x78) + 0x28c),
                       *(int *)(unaff_retaddr + 0x78) + 0x44,0,0xffffffff);
  FUN_00580cf0(unaff_retaddr + 0x78,auStack_44);
  param_1 = CONCAT31(param_1._1_3_,4);
  param_2 = (GRefCountImpl *)FUN_00525380("rectangle",9,0);
  *(int *)((int)param_2 + 8) = *(int *)((int)param_2 + 8) + 1;
  iVar5 = *(int *)(in_ECX + 0x10);
  puVar6 = &param_1;
  uVar4 = FUN_00526a90(iVar3);
  (**(code **)(iVar5 + 0x28))(unaff_retaddr + 0x78,&param_2,uVar4,puVar6);
  *(int *)(iStack_8 + 8) = *(int *)(iStack_8 + 8) + -1;
  if (*(int *)(iStack_8 + 8) == 0) {
    FUN_00525340();
  }
  FUN_00526bc0();
  if (iVar3 != 0) {
    FUN_00503db0();
  }
  iVar5 = 3;
  do {
    FUN_00526bc0();
    iVar5 = iVar5 + -1;
  } while (-1 < iVar5);
  return;
}



============================================================
DISASSEMBLY
============================================================
00583a00 : SUB ESP,0x60
00583a03 : PUSH EBX
00583a04 : PUSH EBP
00583a05 : PUSH ESI
00583a06 : MOV ESI,dword ptr [ESP + 0x74]
00583a0a : XOR EBX,EBX
00583a0c : PUSH EDI
00583a0d : MOV EBP,ECX
00583a0f : CMP ESI,EBX
00583a11 : JZ 0x00583a1a
00583a13 : MOV ECX,ESI
00583a15 : CALL 0x00523dd0
00583a1a : MOV ECX,dword ptr [EBP + 0x30]
00583a1d : CMP ECX,EBX
00583a1f : JZ 0x00583a26
00583a21 : CALL 0x00524240
00583a26 : MOV EDI,dword ptr [ESP + 0x7c]
00583a2a : MOV dword ptr [EBP + 0x30],ESI
00583a2d : CMP EDI,EBX
00583a2f : JZ 0x00583a38
00583a31 : MOV ECX,EDI
00583a33 : CALL 0x00523dd0
00583a38 : MOV ECX,dword ptr [EBP + 0x34]
00583a3b : CMP ECX,EBX
00583a3d : JZ 0x00583a44
00583a3f : CALL 0x00524240
00583a44 : MOV dword ptr [EBP + 0x34],EDI
00583a47 : MOV ECX,dword ptr [ESI + 0xc]
00583a4a : MOV EAX,dword ptr [ECX]
00583a4c : MOV EAX,dword ptr [EAX + 0x14]
00583a4f : LEA EDX,[ESP + 0x10]
00583a53 : PUSH EDX
00583a54 : CALL EAX
00583a56 : LEA ECX,[ESP + 0x20]
00583a5a : PUSH ECX
00583a5b : LEA ECX,[ESP + 0x34]
00583a5f : MOV byte ptr [ESP + 0x34],BL
00583a63 : MOV byte ptr [ESP + 0x44],BL
00583a67 : MOV byte ptr [ESP + 0x54],BL
00583a6b : MOV byte ptr [ESP + 0x64],BL
00583a6f : MOV byte ptr [ESP + 0x24],0x4
00583a74 : MOV dword ptr [ESP + 0x28],EBX
00583a78 : CALL 0x005268b0
00583a7d : LEA ECX,[ESP + 0x20]
00583a81 : CALL 0x00526bc0
00583a86 : LEA EDX,[ESP + 0x20]
00583a8a : PUSH EDX
00583a8b : LEA ECX,[ESP + 0x44]
00583a8f : MOV byte ptr [ESP + 0x24],0x4
00583a94 : MOV dword ptr [ESP + 0x28],EBX
00583a98 : CALL 0x005268b0
00583a9d : LEA ECX,[ESP + 0x20]
00583aa1 : CALL 0x00526bc0
00583aa6 : MOV EAX,dword ptr [ESP + 0x18]
00583aaa : SUB EAX,dword ptr [ESP + 0x10]
00583aae : LEA ECX,[ESP + 0x20]
00583ab2 : MOV dword ptr [ESP + 0x78],EAX
00583ab6 : FILD dword ptr [ESP + 0x78]
00583aba : PUSH ECX
00583abb : LEA ECX,[ESP + 0x54]
00583abf : FSTP double ptr [ESP + 0x28]
00583ac3 : MOV byte ptr [ESP + 0x24],0x3
00583ac8 : CALL 0x005268b0
00583acd : LEA ECX,[ESP + 0x20]
00583ad1 : CALL 0x00526bc0
00583ad6 : MOV EDX,dword ptr [ESP + 0x1c]
00583ada : SUB EDX,dword ptr [ESP + 0x14]
00583ade : LEA EAX,[ESP + 0x20]
00583ae2 : MOV dword ptr [ESP + 0x78],EDX
00583ae6 : FILD dword ptr [ESP + 0x78]
00583aea : PUSH EAX
00583aeb : LEA ECX,[ESP + 0x64]
00583aef : FSTP double ptr [ESP + 0x28]
00583af3 : MOV byte ptr [ESP + 0x24],0x3
00583af8 : CALL 0x005268b0
00583afd : LEA ECX,[ESP + 0x20]
00583b01 : CALL 0x00526bc0
00583b06 : MOV ECX,dword ptr [ESP + 0x74]
00583b0a : MOV EAX,dword ptr [ECX + 0x78]
00583b0d : LEA ESI,[ECX + 0x78]
00583b10 : PUSH -0x1
00583b12 : PUSH EBX
00583b13 : LEA EDX,[EAX + 0x44]
00583b16 : MOV EAX,dword ptr [EAX + 0x28c]
00583b1c : PUSH EDX
00583b1d : PUSH EAX
00583b1e : CALL 0x005324f0
00583b23 : LEA ECX,[ESP + 0x30]
00583b27 : PUSH ECX
00583b28 : MOV EDI,EAX
00583b2a : PUSH ESI
00583b2b : MOV ECX,EDI
00583b2d : CALL 0x00580cf0
00583b32 : MOV EAX,dword ptr [ESI]
00583b34 : PUSH EBX
00583b35 : PUSH 0x9
00583b37 : PUSH 0xb8dcfc
00583b3c : LEA ECX,[EAX + 0x254]
00583b42 : MOV byte ptr [ESP + 0x84],0x4
00583b4a : CALL 0x00525380
00583b4f : MOV dword ptr [ESP + 0x7c],EAX
00583b53 : INC dword ptr [EAX + 0x8]
00583b56 : MOV EBX,dword ptr [EBP + 0x10]
00583b59 : LEA EDX,[ESP + 0x78]
00583b5d : ADD EBP,0x10
00583b60 : PUSH EDX
00583b61 : PUSH EDI
00583b62 : LEA ECX,[ESP + 0x28]
00583b66 : CALL 0x00526a90
00583b6b : MOV EDX,dword ptr [EBX + 0x28]
00583b6e : PUSH EAX
00583b6f : LEA EAX,[ESP + 0x84]
00583b76 : PUSH EAX
00583b77 : PUSH ESI
00583b78 : MOV ECX,EBP
00583b7a : CALL EDX
00583b7c : MOV EAX,dword ptr [ESP + 0x7c]
00583b80 : DEC dword ptr [EAX + 0x8]
00583b83 : MOV ECX,EAX
00583b85 : ADD EAX,0x8
00583b88 : CMP dword ptr [EAX],0x0
00583b8b : JNZ 0x00583b92
00583b8d : CALL 0x00525340
00583b92 : LEA ECX,[ESP + 0x20]
00583b96 : CALL 0x00526bc0
00583b9b : TEST EDI,EDI
00583b9d : JZ 0x00583ba6
00583b9f : MOV ECX,EDI
00583ba1 : CALL 0x00503db0
00583ba6 : LEA ESI,[ESP + 0x70]
00583baa : MOV EDI,0x3
00583baf : NOP
00583bb0 : SUB ESI,0x10
00583bb3 : MOV ECX,ESI
00583bb5 : CALL 0x00526bc0
00583bba : SUB EDI,0x1
00583bbd : JNS 0x00583bb0
00583bbf : POP EDI
00583bc0 : POP ESI
00583bc1 : POP EBP
00583bc2 : POP EBX
00583bc3 : ADD ESP,0x60
00583bc6 : RET 0xc
