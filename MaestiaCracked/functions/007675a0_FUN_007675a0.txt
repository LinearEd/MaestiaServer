PROGRAM  : Maestia.exe
FUNCTION : FUN_007675a0
ENTRY    : 007675a0
BODY     : [[007675a0, 0076793b]]

============================================================
DECOMPILED C CODE
============================================================

undefined1
FUN_007675a0(undefined8 *param_1,undefined8 *param_2,int *param_3,int *param_4,undefined4 *param_5)

{
  char cVar1;
  int *piVar2;
  int in_ECX;
  ushort uVar3;
  int iVar4;
  int *piStack_e4;
  int iStack_e0;
  undefined4 uStack_dc;
  undefined4 *puStack_d8;
  undefined4 uStack_d4;
  undefined1 auStack_c4 [4];
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined4 local_b8;
  undefined4 uStack_b4;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  uint uStack_a4;
  undefined4 uStack_a0;
  int iStack_9c;
  uint uStack_98;
  uint uStack_94;
  int iStack_8c;
  int iStack_88;
  undefined8 uStack_7c;
  undefined4 uStack_74;
  undefined8 local_70;
  undefined4 uStack_68;
  
  local_70 = CONCAT44(local_70._4_4_,in_ECX);
  uStack_c0 = (uint)(uint3)uStack_c0;
  if (param_3 != (int *)0x0) {
    if (*(short *)(param_3[0x7a] + 0xe4) != 0) {
      return 1;
    }
    piStack_e4 = *(int **)(in_ECX + 0xc);
    local_b8 = 0;
    if (piStack_e4 == (int *)0x0) {
      piStack_e4 = *(int **)(in_ECX + 8);
    }
    uStack_d4 = 0;
    puStack_d8 = &local_b8;
    uStack_dc = 0;
    iStack_e0 = 0;
    (**(code **)(*piStack_e4 + 0x2c))();
    uStack_7c = *param_1;
    uStack_74 = *(undefined4 *)(param_1 + 1);
    uStack_68 = *(undefined4 *)(param_2 + 1);
    local_70 = *param_2;
    uStack_b4 = 0;
    uStack_b0 = 0;
    uStack_ac = 0;
    uStack_a8 = 0;
    uStack_a4 = 0;
    uStack_a0 = 0;
    iStack_9c = 0;
    uStack_98 = 0;
    uStack_94 = 0;
    uStack_c0 = 0;
    uStack_bc = 0;
    local_b8 = 0;
    (**(code **)(*param_3 + 0x9c))();
    uStack_94 = (uint)*(ushort *)(param_3 + 0x79);
    uStack_98 = 0;
    if (*(ushort *)(param_3 + 0x79) != 0) {
      do {
        iStack_88 = *(int *)(param_3[0x76] + (uStack_98 & 0xffff) * 4);
        iVar4 = *(int *)(iStack_88 + 8);
        piVar2 = *(int **)(iVar4 + 8);
        if (piVar2 == (int *)0x0) {
          piVar2 = *(int **)(iVar4 + 4);
        }
        (**(code **)(*piVar2 + 0x2c))(piVar2,0,0,&puStack_d8,0);
        uStack_a4 = (uint)*(ushort *)(iVar4 + 0xc);
        uVar3 = 0;
        if (*(ushort *)(iVar4 + 0xc) != 0) {
          do {
            D3DXVec3TransformCoord(&stack0xffffff30,&stack0xffffff30);
            D3DXVec3TransformCoord(&stack0xffffff30,&stack0xffffff30,&iStack_8c);
            D3DXVec3TransformCoord(&stack0xffffff30,&stack0xffffff30,&uStack_98);
            cVar1 = FUN_0045ec80(&uStack_dc,auStack_c4,&piStack_e4,0);
            if (cVar1 != '\0') {
              *param_5 = uStack_dc;
              param_5[1] = puStack_d8;
              param_5[2] = uStack_d4;
              *param_4 = (int)piStack_e4;
              iVar4 = iStack_e0;
              break;
            }
            if ((*(char *)(*(int *)(iStack_9c + 8) + 0x19) != '\0') &&
               (cVar1 = FUN_0045ec80(&uStack_dc,&local_b8,&piStack_e4,0), cVar1 != '\0')) {
              *param_5 = uStack_dc;
              param_5[1] = puStack_d8;
              param_5[2] = uStack_d4;
              *param_4 = (int)piStack_e4;
              iVar4 = iStack_e0;
              break;
            }
            uVar3 = uVar3 + 1;
            iVar4 = iStack_e0;
          } while (uVar3 < (ushort)uStack_a4);
        }
        piVar2 = *(int **)(iVar4 + 8);
        if (piVar2 == (int *)0x0) {
          piVar2 = *(int **)(iVar4 + 4);
        }
        (**(code **)(*piVar2 + 0x30))(piVar2);
        in_ECX = iStack_8c;
        if (uStack_dc._3_1_ != '\0') break;
        uStack_98 = uStack_98 + 1;
      } while ((ushort)uStack_98 < (ushort)uStack_94);
    }
    piVar2 = *(int **)(in_ECX + 0xc);
    if (piVar2 == (int *)0x0) {
      piVar2 = *(int **)(in_ECX + 8);
    }
    (**(code **)(*piVar2 + 0x30))(piVar2);
  }
  return uStack_c0._3_1_;
}



============================================================
DISASSEMBLY
============================================================
007675a0 : PUSH EBP
007675a1 : MOV EBP,ESP
007675a3 : AND ESP,0xfffffff0
007675a6 : SUB ESP,0xb4
007675ac : PUSH EBX
007675ad : PUSH ESI
007675ae : MOV ESI,dword ptr [EBP + 0x10]
007675b1 : PUSH EDI
007675b2 : XOR EBX,EBX
007675b4 : MOV EDI,ECX
007675b6 : MOV dword ptr [ESP + 0x60],EDI
007675ba : MOV byte ptr [ESP + 0x13],0x0
007675bf : CMP ESI,EBX
007675c1 : JZ 0x0076792f
007675c7 : MOV EAX,dword ptr [ESI + 0x1e8]
007675cd : CMP word ptr [EAX + 0xe4],BX
007675d4 : JBE 0x007675e1
007675d6 : MOV AL,0x1
007675d8 : POP EDI
007675d9 : POP ESI
007675da : POP EBX
007675db : MOV ESP,EBP
007675dd : POP EBP
007675de : RET 0x18
007675e1 : MOV EAX,dword ptr [EDI + 0xc]
007675e4 : MOV dword ptr [ESP + 0x18],EBX
007675e8 : CMP EAX,EBX
007675ea : JNZ 0x007675ef
007675ec : MOV EAX,dword ptr [EDI + 0x8]
007675ef : MOV ECX,dword ptr [EAX]
007675f1 : PUSH EBX
007675f2 : LEA EDX,[ESP + 0x1c]
007675f6 : PUSH EDX
007675f7 : PUSH EBX
007675f8 : PUSH EBX
007675f9 : PUSH EAX
007675fa : MOV EAX,dword ptr [ECX + 0x2c]
007675fd : CALL EAX
007675ff : XORPS XMM0,XMM0
00767602 : MOV EAX,dword ptr [EBP + 0x8]
00767605 : MOVQ XMM1,qword ptr [EAX]
00767609 : MOV ECX,dword ptr [EAX + 0x8]
0076760c : MOV EAX,dword ptr [EBP + 0xc]
0076760f : MOV EDX,dword ptr [EAX + 0x8]
00767612 : MOV dword ptr [ESP + 0x70],ECX
00767616 : MOVQ qword ptr [ESP + 0x68],XMM1
0076761c : MOVQ XMM1,qword ptr [EAX]
00767620 : MOV EAX,dword ptr [ESI]
00767622 : PUSH EBX
00767623 : LEA ECX,[ESP + 0x84]
0076762a : MOV dword ptr [ESP + 0x80],EDX
00767631 : MOV EDX,dword ptr [EAX + 0x9c]
00767637 : PUSH ECX
00767638 : MOV ECX,ESI
0076763a : MOV dword ptr [ESP + 0x1c],EBX
0076763e : MOVSS dword ptr [ESP + 0x38],XMM0
00767644 : MOVSS dword ptr [ESP + 0x3c],XMM0
0076764a : MOVSS dword ptr [ESP + 0x40],XMM0
00767650 : MOVSS dword ptr [ESP + 0x44],XMM0
00767656 : MOVSS dword ptr [ESP + 0x48],XMM0
0076765c : MOVSS dword ptr [ESP + 0x4c],XMM0
00767662 : MOVSS dword ptr [ESP + 0x50],XMM0
00767668 : MOVSS dword ptr [ESP + 0x54],XMM0
0076766e : MOVSS dword ptr [ESP + 0x58],XMM0
00767674 : MOVSS dword ptr [ESP + 0x2c],XMM0
0076767a : MOVSS dword ptr [ESP + 0x30],XMM0
00767680 : MOVSS dword ptr [ESP + 0x34],XMM0
00767686 : MOVQ qword ptr [ESP + 0x7c],XMM1
0076768c : MOVSS dword ptr [ESP + 0x24],XMM0
00767692 : CALL EDX
00767694 : MOVZX ECX,word ptr [ESI + 0x1e4]
0076769b : XOR EAX,EAX
0076769d : XOR EDX,EDX
0076769f : MOV dword ptr [ESP + 0x58],ECX
007676a3 : MOV dword ptr [ESP + 0x54],EAX
007676a7 : CMP DX,CX
007676aa : JNC 0x0076791d
007676b0 : JMP 0x007676b5
007676b2 : MOV ESI,dword ptr [EBP + 0x10]
007676b5 : MOV ECX,dword ptr [ESI + 0x1d8]
007676bb : MOVZX EAX,AX
007676be : MOV EAX,dword ptr [ECX + EAX*0x4]
007676c1 : MOV ESI,dword ptr [EAX + 0x8]
007676c4 : MOV dword ptr [ESP + 0x64],EAX
007676c8 : MOV EAX,dword ptr [ESI + 0x8]
007676cb : MOV dword ptr [ESP + 0x20],ESI
007676cf : TEST EAX,EAX
007676d1 : JNZ 0x007676d6
007676d3 : MOV EAX,dword ptr [ESI + 0x4]
007676d6 : MOV EDX,dword ptr [EAX]
007676d8 : MOV EDX,dword ptr [EDX + 0x2c]
007676db : PUSH 0x0
007676dd : LEA ECX,[ESP + 0x18]
007676e1 : PUSH ECX
007676e2 : PUSH 0x0
007676e4 : PUSH 0x0
007676e6 : PUSH EAX
007676e7 : CALL EDX
007676e9 : MOVZX EAX,word ptr [ESI + 0xc]
007676ed : XOR ECX,ECX
007676ef : XOR EBX,EBX
007676f1 : MOV dword ptr [ESP + 0x5c],EAX
007676f5 : CMP CX,AX
007676f8 : JNC 0x007678e8
007676fe : MOVZX EAX,BX
00767701 : LEA ESI,[EAX + EAX*0x2]
00767704 : MOV EAX,dword ptr [ESP + 0x14]
00767708 : MOVZX ECX,word ptr [EAX + ESI*0x2]
0076770c : LEA EDX,[ECX + ECX*0x2]
0076770f : MOV ECX,dword ptr [ESP + 0x18]
00767713 : MOVSS XMM0,dword ptr [ECX + EDX*0x8]
00767718 : MOVSS dword ptr [ESP + 0x30],XMM0
0076771e : MOVZX EDX,word ptr [EAX + ESI*0x2]
00767722 : LEA EDX,[EDX + EDX*0x2]
00767725 : MOVSS XMM0,dword ptr [ECX + EDX*0x8 + 0x4]
0076772b : MOVSS dword ptr [ESP + 0x34],XMM0
00767731 : MOVZX EAX,word ptr [EAX + ESI*0x2]
00767735 : LEA EAX,[EAX + EAX*0x2]
00767738 : MOVSS XMM0,dword ptr [ECX + EAX*0x8 + 0x8]
0076773e : LEA ECX,[ESP + 0x80]
00767745 : PUSH ECX
00767746 : LEA EDX,[ESP + 0x34]
0076774a : PUSH EDX
0076774b : MOV EAX,EDX
0076774d : PUSH EAX
0076774e : MOVSS dword ptr [ESP + 0x44],XMM0
00767754 : CALL 0x004ff734
00767759 : MOV EAX,dword ptr [ESP + 0x14]
0076775d : MOVZX ECX,word ptr [EAX + ESI*0x2 + 0x2]
00767762 : LEA EDX,[ECX + ECX*0x2]
00767765 : MOV ECX,dword ptr [ESP + 0x18]
00767769 : MOVSS XMM0,dword ptr [ECX + EDX*0x8]
0076776e : MOVSS dword ptr [ESP + 0x3c],XMM0
00767774 : MOVZX EDX,word ptr [EAX + ESI*0x2 + 0x2]
00767779 : LEA EDX,[EDX + EDX*0x2]
0076777c : MOVSS XMM0,dword ptr [ECX + EDX*0x8 + 0x4]
00767782 : MOVSS dword ptr [ESP + 0x40],XMM0
00767788 : MOVZX EAX,word ptr [EAX + ESI*0x2 + 0x2]
0076778d : LEA EAX,[EAX + EAX*0x2]
00767790 : MOVSS XMM0,dword ptr [ECX + EAX*0x8 + 0x8]
00767796 : LEA ECX,[ESP + 0x80]
0076779d : PUSH ECX
0076779e : LEA EDX,[ESP + 0x40]
007677a2 : PUSH EDX
007677a3 : MOV EAX,EDX
007677a5 : PUSH EAX
007677a6 : MOVSS dword ptr [ESP + 0x50],XMM0
007677ac : CALL 0x004ff734
007677b1 : MOV EAX,dword ptr [ESP + 0x14]
007677b5 : MOVZX ECX,word ptr [EAX + ESI*0x2 + 0x4]
007677ba : LEA EDX,[ECX + ECX*0x2]
007677bd : MOV ECX,dword ptr [ESP + 0x18]
007677c1 : MOVSS XMM0,dword ptr [ECX + EDX*0x8]
007677c6 : MOVSS dword ptr [ESP + 0x48],XMM0
007677cc : MOVZX EDX,word ptr [EAX + ESI*0x2 + 0x4]
007677d1 : LEA EDX,[EDX + EDX*0x2]
007677d4 : MOVSS XMM0,dword ptr [ECX + EDX*0x8 + 0x4]
007677da : MOVSS dword ptr [ESP + 0x4c],XMM0
007677e0 : MOVZX EAX,word ptr [EAX + ESI*0x2 + 0x4]
007677e5 : LEA EAX,[EAX + EAX*0x2]
007677e8 : MOVSS XMM0,dword ptr [ECX + EAX*0x8 + 0x8]
007677ee : LEA ECX,[ESP + 0x80]
007677f5 : PUSH ECX
007677f6 : LEA EDX,[ESP + 0x4c]
007677fa : PUSH EDX
007677fb : MOV EAX,EDX
007677fd : PUSH EAX
007677fe : MOVSS dword ptr [ESP + 0x5c],XMM0
00767804 : CALL 0x004ff734
00767809 : PUSH 0x0
0076780b : LEA ECX,[ESP + 0x20]
0076780f : PUSH ECX
00767810 : LEA EDX,[ESP + 0x44]
00767814 : PUSH EDX
00767815 : LEA EAX,[ESP + 0x30]
00767819 : PUSH EAX
0076781a : LEA EDX,[ESP + 0x78]
0076781e : LEA ECX,[ESP + 0x84]
00767825 : LEA EDI,[ESP + 0x58]
00767829 : LEA ESI,[ESP + 0x40]
0076782d : CALL 0x0045ec80
00767832 : ADD ESP,0x10
00767835 : TEST AL,AL
00767837 : JNZ 0x0076787d
00767839 : MOV ECX,dword ptr [ESP + 0x64]
0076783d : MOV EDX,dword ptr [ECX + 0x8]
00767840 : CMP byte ptr [EDX + 0x19],AL
00767843 : JZ 0x0076786f
00767845 : PUSH 0x0
00767847 : LEA EAX,[ESP + 0x20]
0076784b : PUSH EAX
0076784c : MOV ECX,EDI
0076784e : PUSH ECX
0076784f : LEA EDX,[ESP + 0x30]
00767853 : PUSH EDX
00767854 : LEA EDX,[ESP + 0x78]
00767858 : LEA ECX,[ESP + 0x84]
0076785f : LEA EDI,[ESP + 0x4c]
00767863 : CALL 0x0045ec80
00767868 : ADD ESP,0x10
0076786b : TEST AL,AL
0076786d : JNZ 0x007678af
0076786f : INC EBX
00767870 : CMP BX,word ptr [ESP + 0x5c]
00767875 : JC 0x007676fe
0076787b : JMP 0x007678e4
0076787d : MOV EAX,dword ptr [EBP + 0x18]
00767880 : MOVSS XMM0,dword ptr [ESP + 0x24]
00767886 : MOVSS dword ptr [EAX],XMM0
0076788a : MOVSS XMM0,dword ptr [ESP + 0x28]
00767890 : MOVSS dword ptr [EAX + 0x4],XMM0
00767895 : MOVSS XMM0,dword ptr [ESP + 0x2c]
0076789b : MOVSS dword ptr [EAX + 0x8],XMM0
007678a0 : MOV EAX,dword ptr [EBP + 0x14]
007678a3 : MOVSS XMM0,dword ptr [ESP + 0x1c]
007678a9 : MOVSS dword ptr [EAX],XMM0
007678ad : JMP 0x007678df
007678af : MOV EAX,dword ptr [EBP + 0x18]
007678b2 : MOVSS XMM0,dword ptr [ESP + 0x24]
007678b8 : MOV ECX,dword ptr [EBP + 0x14]
007678bb : MOVSS dword ptr [EAX],XMM0
007678bf : MOVSS XMM0,dword ptr [ESP + 0x28]
007678c5 : MOVSS dword ptr [EAX + 0x4],XMM0
007678ca : MOVSS XMM0,dword ptr [ESP + 0x2c]
007678d0 : MOVSS dword ptr [EAX + 0x8],XMM0
007678d5 : MOVSS XMM0,dword ptr [ESP + 0x1c]
007678db : MOVSS dword ptr [ECX],XMM0
007678df : MOV byte ptr [ESP + 0x13],0x1
007678e4 : MOV ESI,dword ptr [ESP + 0x20]
007678e8 : MOV EAX,dword ptr [ESI + 0x8]
007678eb : TEST EAX,EAX
007678ed : JZ 0x007678f3
007678ef : MOV ESI,EAX
007678f1 : JMP 0x007678f6
007678f3 : MOV ESI,dword ptr [ESI + 0x4]
007678f6 : MOV EDX,dword ptr [ESI]
007678f8 : MOV EAX,dword ptr [EDX + 0x30]
007678fb : PUSH ESI
007678fc : CALL EAX
007678fe : CMP byte ptr [ESP + 0x13],0x0
00767903 : JNZ 0x00767919
00767905 : MOV EAX,dword ptr [ESP + 0x54]
00767909 : INC EAX
0076790a : MOV dword ptr [ESP + 0x54],EAX
0076790e : CMP AX,word ptr [ESP + 0x58]
00767913 : JC 0x007676b2
00767919 : MOV EDI,dword ptr [ESP + 0x60]
0076791d : MOV EAX,dword ptr [EDI + 0xc]
00767920 : TEST EAX,EAX
00767922 : JNZ 0x00767927
00767924 : MOV EAX,dword ptr [EDI + 0x8]
00767927 : MOV ECX,dword ptr [EAX]
00767929 : MOV EDX,dword ptr [ECX + 0x30]
0076792c : PUSH EAX
0076792d : CALL EDX
0076792f : MOV AL,byte ptr [ESP + 0x13]
00767933 : POP EDI
00767934 : POP ESI
00767935 : POP EBX
00767936 : MOV ESP,EBP
00767938 : POP EBP
00767939 : RET 0x18
