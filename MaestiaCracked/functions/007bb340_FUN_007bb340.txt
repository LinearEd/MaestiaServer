PROGRAM  : Maestia.exe
FUNCTION : FUN_007bb340
ENTRY    : 007bb340
BODY     : [[007bb340, 007bb3d5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007bb340(void)

{
  int unaff_ESI;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b0d7c5;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_24 = (LPCRITICAL_SECTION)(unaff_ESI + 4);
  local_18 = 0;
  local_20 = ".\\mss\\AvaMssMgr.cpp";
  local_1c = 0x5c3;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  if (*(int *)(unaff_ESI + 0x20) != 0) {
    *(undefined1 *)(unaff_ESI + 0x1c) = 1;
  }
  if (local_18 != 0) {
    local_8 = 0xffffffff;
    LeaveCriticalSection(local_24);
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007bb340 : PUSH EBP
007bb341 : MOV EBP,ESP
007bb343 : PUSH -0x1
007bb345 : PUSH 0xb0d7c5
007bb34a : MOV EAX,FS:[0x0]
007bb350 : PUSH EAX
007bb351 : SUB ESP,0x14
007bb354 : PUSH EDI
007bb355 : MOV EAX,[0x00d66fa0]
007bb35a : XOR EAX,EBP
007bb35c : PUSH EAX
007bb35d : LEA EAX,[EBP + -0xc]
007bb360 : MOV FS:[0x0],EAX
007bb366 : LEA ECX,[EBP + -0x20]
007bb369 : LEA EAX,[ESI + 0x4]
007bb36c : XOR EDI,EDI
007bb36e : PUSH ECX
007bb36f : MOV dword ptr [EBP + -0x14],EDI
007bb372 : MOV dword ptr [EBP + -0x20],EAX
007bb375 : MOV dword ptr [EBP + -0x1c],0xc19074
007bb37c : MOV dword ptr [EBP + -0x18],0x5c3
007bb383 : MOV dword ptr [EBP + -0x10],0x1
007bb38a : CALL 0x006ef1a0
007bb38f : MOV dword ptr [EBP + -0x4],EDI
007bb392 : CMP dword ptr [ESI + 0x20],EDI
007bb395 : JNZ 0x007bb3a9
007bb397 : MOV dword ptr [EBP + -0x4],0xffffffff
007bb39e : CMP dword ptr [EBP + -0x14],EDI
007bb3a1 : JZ 0x007bb3c6
007bb3a3 : MOV EDX,dword ptr [EBP + -0x20]
007bb3a6 : PUSH EDX
007bb3a7 : JMP 0x007bb3bd
007bb3a9 : MOV byte ptr [ESI + 0x1c],0x1
007bb3ad : MOV dword ptr [EBP + -0x4],0xffffffff
007bb3b4 : CMP dword ptr [EBP + -0x14],EDI
007bb3b7 : JZ 0x007bb3c6
007bb3b9 : MOV EAX,dword ptr [EBP + -0x20]
007bb3bc : PUSH EAX
007bb3bd : CALL dword ptr [0x00b8511c]
007bb3c3 : MOV dword ptr [EBP + -0x14],EDI
007bb3c6 : MOV ECX,dword ptr [EBP + -0xc]
007bb3c9 : MOV dword ptr FS:[0x0],ECX
007bb3d0 : POP ECX
007bb3d1 : POP EDI
007bb3d2 : MOV ESP,EBP
007bb3d4 : POP EBP
007bb3d5 : RET
