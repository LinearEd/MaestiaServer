PROGRAM  : Maestia.exe
FUNCTION : FUN_00504700
ENTRY    : 00504700
BODY     : [[00504700, 005047a2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00504700(int param_1)

{
  int *piVar1;
  int in_ECX;
  
  FUN_0051bc20(param_1 + 8);
  *(undefined4 *)(in_ECX + 0xc) = *(undefined4 *)(param_1 + 0xc);
  FUN_0051bc20(param_1 + 0x10);
  *(undefined4 *)(in_ECX + 0x14) = *(undefined4 *)(param_1 + 0x14);
  if (*(int *)(param_1 + 0x18) != 0) {
    piVar1 = (int *)(*(int *)(param_1 + 0x18) + 4);
    *piVar1 = *piVar1 + 1;
  }
  if (*(GRefCountNTSImpl **)(in_ECX + 0x18) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0x18));
  }
  *(undefined4 *)(in_ECX + 0x18) = *(undefined4 *)(param_1 + 0x18);
  piVar1 = *(int **)(param_1 + 0x1c);
  if (piVar1 != (int *)0x0) {
    *piVar1 = *piVar1 + 1;
  }
  piVar1 = *(int **)(in_ECX + 0x1c);
  if ((piVar1 != (int *)0x0) && (*piVar1 = *piVar1 + -1, *piVar1 == 0)) {
    FUN_00500860();
    FUN_00515cf0(piVar1);
  }
  *(undefined4 *)(in_ECX + 0x1c) = *(undefined4 *)(param_1 + 0x1c);
  *(undefined4 *)(in_ECX + 0x20) = *(undefined4 *)(param_1 + 0x20);
  *(undefined2 *)(in_ECX + 0x24) = *(undefined2 *)(param_1 + 0x24);
  *(undefined2 *)(in_ECX + 0x26) = *(undefined2 *)(param_1 + 0x26);
  *(undefined1 *)(in_ECX + 0x28) = *(undefined1 *)(param_1 + 0x28);
  *(undefined2 *)(in_ECX + 0x2a) = *(undefined2 *)(param_1 + 0x2a);
  return;
}



============================================================
DISASSEMBLY
============================================================
00504700 : PUSH EBX
00504701 : PUSH EBP
00504702 : PUSH ESI
00504703 : PUSH EDI
00504704 : MOV EDI,dword ptr [ESP + 0x14]
00504708 : MOV ESI,ECX
0050470a : LEA EBX,[EDI + 0x8]
0050470d : LEA EBP,[ESI + 0x8]
00504710 : PUSH EBX
00504711 : MOV ECX,EBP
00504713 : CALL 0x0051bc20
00504718 : MOV EAX,dword ptr [EBX + 0x4]
0050471b : MOV dword ptr [EBP + 0x4],EAX
0050471e : LEA EBX,[EDI + 0x10]
00504721 : LEA EBP,[ESI + 0x10]
00504724 : PUSH EBX
00504725 : MOV ECX,EBP
00504727 : CALL 0x0051bc20
0050472c : MOV ECX,dword ptr [EBX + 0x4]
0050472f : MOV dword ptr [EBP + 0x4],ECX
00504732 : MOV EAX,dword ptr [EDI + 0x18]
00504735 : TEST EAX,EAX
00504737 : JZ 0x0050473c
00504739 : INC dword ptr [EAX + 0x4]
0050473c : MOV ECX,dword ptr [ESI + 0x18]
0050473f : TEST ECX,ECX
00504741 : JZ 0x00504748
00504743 : CALL 0x004ff7c0
00504748 : MOV EDX,dword ptr [EDI + 0x18]
0050474b : MOV dword ptr [ESI + 0x18],EDX
0050474e : MOV EAX,dword ptr [EDI + 0x1c]
00504751 : TEST EAX,EAX
00504753 : JZ 0x00504757
00504755 : INC dword ptr [EAX]
00504757 : MOV EBX,dword ptr [ESI + 0x1c]
0050475a : TEST EBX,EBX
0050475c : JZ 0x00504770
0050475e : ADD dword ptr [EBX],-0x1
00504761 : JNZ 0x00504770
00504763 : MOV ECX,EBX
00504765 : CALL 0x00500860
0050476a : PUSH EBX
0050476b : CALL 0x00515cf0
00504770 : MOV EAX,dword ptr [EDI + 0x1c]
00504773 : MOV dword ptr [ESI + 0x1c],EAX
00504776 : MOV ECX,dword ptr [EDI + 0x20]
00504779 : MOV dword ptr [ESI + 0x20],ECX
0050477c : MOVZX EDX,word ptr [EDI + 0x24]
00504780 : MOV word ptr [ESI + 0x24],DX
00504784 : MOV AX,word ptr [EDI + 0x26]
00504788 : MOV word ptr [ESI + 0x26],AX
0050478c : MOV CL,byte ptr [EDI + 0x28]
0050478f : MOV byte ptr [ESI + 0x28],CL
00504792 : MOVZX EDX,word ptr [EDI + 0x2a]
00504796 : POP EDI
00504797 : MOV word ptr [ESI + 0x2a],DX
0050479b : MOV EAX,ESI
0050479d : POP ESI
0050479e : POP EBP
0050479f : POP EBX
005047a0 : RET 0x4
