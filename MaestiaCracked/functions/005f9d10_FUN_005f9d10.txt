PROGRAM  : Maestia.exe
FUNCTION : FUN_005f9d10
ENTRY    : 005f9d10
BODY     : [[005f9d10, 005f9dcb] [005f9dd0, 005f9fcb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005f9d10(uint *param_1,uint *param_2)

{
  float *pfVar1;
  float *pfVar2;
  float *pfVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  uint uVar12;
  char cVar13;
  int in_ECX;
  uint uVar14;
  uint local_30;
  uint local_2c;
  uint local_28;
  uint local_24;
  float local_1c;
  
  local_28 = *param_1;
  local_2c = *param_2;
  uVar4 = *(uint *)(in_ECX + 0x1b4);
  uVar14 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x1c0) + (local_2c >> 8) * 4) +
                    (local_2c & 0xff) * 4);
  uVar12 = *(uint *)(*(int *)(*(int *)(in_ECX + 0x1c0) + (local_28 >> 8) * 4) +
                    (local_28 & 0xff) * 4);
  iVar5 = *(int *)(*(int *)(in_ECX + 0x110) + (uVar14 >> 10) * 4);
  uVar14 = uVar14 & 0x3ff;
  iVar6 = *(int *)(*(int *)(in_ECX + 0x110) + (uVar12 >> 10) * 4);
  uVar12 = uVar12 & 0x3ff;
  fVar8 = *(float *)(iVar5 + uVar14 * 8) - *(float *)(iVar6 + uVar12 * 8);
  local_24 = 0;
  fVar9 = *(float *)(iVar5 + uVar14 * 8 + 4) - *(float *)(iVar6 + uVar12 * 8 + 4);
  local_1c = fVar8 * fVar8 + fVar9 * fVar9;
  if (uVar4 != 0) {
    do {
      uVar14 = local_28 + 1;
      local_30 = local_2c + 1;
      if (uVar4 <= uVar14) {
        uVar14 = uVar14 - uVar4;
      }
      if (uVar4 <= local_30) {
        local_30 = local_30 - uVar4;
      }
      iVar5 = *(int *)(in_ECX + 0x1c0);
      uVar12 = *(uint *)(*(int *)(iVar5 + (local_28 >> 8) * 4) + (local_28 & 0xff) * 4);
      iVar6 = *(int *)(in_ECX + 0x110);
      pfVar1 = (float *)(*(int *)(iVar6 + (uVar12 >> 10) * 4) + (uVar12 & 0x3ff) * 8);
      uVar12 = *(uint *)(*(int *)(iVar5 + (local_2c >> 8) * 4) + (local_2c & 0xff) * 4);
      pfVar2 = (float *)(*(int *)(iVar6 + (uVar12 >> 10) * 4) + (uVar12 & 0x3ff) * 8);
      uVar12 = *(uint *)(*(int *)(iVar5 + (uVar14 >> 8) * 4) + (uVar14 & 0xff) * 4);
      iVar7 = *(int *)(iVar6 + (uVar12 >> 10) * 4);
      uVar12 = uVar12 & 0x3ff;
      fVar8 = *pfVar2 - *(float *)(iVar7 + uVar12 * 8);
      pfVar3 = (float *)(iVar7 + uVar12 * 8);
      fVar9 = pfVar2[1] - pfVar3[1];
      uVar12 = *(uint *)(*(int *)(iVar5 + (local_30 >> 8) * 4) + (local_30 & 0xff) * 4);
      iVar5 = *(int *)(iVar6 + (uVar12 >> 10) * 4);
      uVar12 = uVar12 & 0x3ff;
      pfVar2 = (float *)(iVar5 + uVar12 * 8);
      fVar10 = *(float *)(iVar5 + uVar12 * 8) - *pfVar1;
      fVar11 = pfVar2[1] - pfVar1[1];
      fVar10 = fVar10 * fVar10 + fVar11 * fVar11;
      fVar11 = (*pfVar2 - *pfVar3) * (*pfVar2 - *pfVar3) +
               (pfVar2[1] - pfVar3[1]) * (pfVar2[1] - pfVar3[1]);
      fVar8 = fVar8 * fVar8 + fVar9 * fVar9;
      cVar13 = fVar8 < fVar10;
      if ((bool)cVar13) {
        fVar8 = fVar10;
      }
      if (fVar8 < fVar11) {
        cVar13 = '\x02';
        fVar8 = fVar11;
      }
      uVar12 = uVar14;
      if (cVar13 != '\0') {
        uVar12 = local_28;
        if (cVar13 == '\x01') {
          local_2c = local_30;
        }
        else if (cVar13 == '\x02') {
          local_24 = local_24 + 1;
          local_2c = local_30;
          uVar12 = uVar14;
        }
      }
      local_28 = uVar12;
      if (local_1c < fVar8) {
        *param_1 = local_28;
        *param_2 = local_2c;
        local_1c = fVar8;
      }
      local_24 = local_24 + 1;
    } while (local_24 < uVar4);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005f9d10 : SUB ESP,0x34
005f9d13 : PUSH EBX
005f9d14 : PUSH EBP
005f9d15 : PUSH ESI
005f9d16 : PUSH EDI
005f9d17 : MOV dword ptr [ESP + 0x30],ECX
005f9d1b : MOV EDX,dword ptr [ESP + 0x4c]
005f9d1f : MOV EAX,dword ptr [ESP + 0x48]
005f9d23 : MOV EAX,dword ptr [EAX]
005f9d25 : MOV ESI,dword ptr [EDX]
005f9d27 : MOV EDI,dword ptr [ECX + 0x1b4]
005f9d2d : MOV EBP,ESI
005f9d2f : SHR EBP,0x8
005f9d32 : MOV dword ptr [ESP + 0x2c],EDI
005f9d36 : MOV EDI,dword ptr [ECX + 0x1c0]
005f9d3c : MOV EBP,dword ptr [EDI + EBP*0x4]
005f9d3f : MOV EBX,ESI
005f9d41 : AND ESI,0xff
005f9d47 : MOV ESI,dword ptr [EBP + ESI*0x4]
005f9d4b : MOV EBP,EAX
005f9d4d : SHR EBP,0x8
005f9d50 : MOV EDI,dword ptr [EDI + EBP*0x4]
005f9d53 : MOV EDX,EAX
005f9d55 : AND EAX,0xff
005f9d5a : MOV EAX,dword ptr [EDI + EAX*0x4]
005f9d5d : MOV EDI,dword ptr [ECX + 0x110]
005f9d63 : MOV EBP,ESI
005f9d65 : SHR EBP,0xa
005f9d68 : MOV EBP,dword ptr [EDI + EBP*0x4]
005f9d6b : AND ESI,0x3ff
005f9d71 : FLD float ptr [EBP + ESI*0x8]
005f9d75 : LEA ESI,[EBP + ESI*0x8]
005f9d79 : MOV EBP,EAX
005f9d7b : SHR EBP,0xa
005f9d7e : MOV EDI,dword ptr [EDI + EBP*0x4]
005f9d81 : AND EAX,0x3ff
005f9d86 : FSUB float ptr [EDI + EAX*0x8]
005f9d89 : LEA EAX,[EDI + EAX*0x8]
005f9d8c : MOV dword ptr [ESP + 0x1c],EDX
005f9d90 : FSTP float ptr [ESP + 0x24]
005f9d94 : MOV dword ptr [ESP + 0x18],EBX
005f9d98 : FLD float ptr [ESI + 0x4]
005f9d9b : MOV dword ptr [ESP + 0x20],0x0
005f9da3 : FSUB float ptr [EAX + 0x4]
005f9da6 : MOV EAX,dword ptr [ESP + 0x2c]
005f9daa : FSTP float ptr [ESP + 0x28]
005f9dae : FLD float ptr [ESP + 0x28]
005f9db2 : FLD float ptr [ESP + 0x24]
005f9db6 : FMUL ST0
005f9db8 : FLD ST1
005f9dba : FMULP ST2
005f9dbc : FADDP
005f9dbe : FSTP float ptr [ESP + 0x28]
005f9dc2 : TEST EAX,EAX
005f9dc4 : JBE 0x005f9fc2
005f9dca : JMP 0x005f9dd4
005f9dd0 : MOV ECX,dword ptr [ESP + 0x30]
005f9dd4 : LEA EBP,[EDX + 0x1]
005f9dd7 : LEA ESI,[EBX + 0x1]
005f9dda : MOV dword ptr [ESP + 0x24],EBP
005f9dde : MOV dword ptr [ESP + 0x14],ESI
005f9de2 : CMP EBP,EAX
005f9de4 : JC 0x005f9dec
005f9de6 : SUB EBP,EAX
005f9de8 : MOV dword ptr [ESP + 0x24],EBP
005f9dec : CMP ESI,EAX
005f9dee : JC 0x005f9df6
005f9df0 : SUB ESI,EAX
005f9df2 : MOV dword ptr [ESP + 0x14],ESI
005f9df6 : MOV EAX,dword ptr [ECX + 0x1c0]
005f9dfc : MOV ESI,EDX
005f9dfe : AND EDX,0xff
005f9e04 : SHR ESI,0x8
005f9e07 : MOV ESI,dword ptr [EAX + ESI*0x4]
005f9e0a : MOV EDX,dword ptr [ESI + EDX*0x4]
005f9e0d : MOV ESI,dword ptr [ECX + 0x110]
005f9e13 : MOV ECX,EDX
005f9e15 : SHR ECX,0xa
005f9e18 : MOV ECX,dword ptr [ESI + ECX*0x4]
005f9e1b : AND EDX,0x3ff
005f9e21 : LEA EDI,[ECX + EDX*0x8]
005f9e24 : MOV EDX,EBX
005f9e26 : SHR EDX,0x8
005f9e29 : MOV ECX,dword ptr [EAX + EDX*0x4]
005f9e2c : AND EBX,0xff
005f9e32 : MOV EDX,dword ptr [ECX + EBX*0x4]
005f9e35 : MOV ECX,EDX
005f9e37 : SHR ECX,0xa
005f9e3a : MOV ECX,dword ptr [ESI + ECX*0x4]
005f9e3d : AND EDX,0x3ff
005f9e43 : LEA EBX,[ECX + EDX*0x8]
005f9e46 : FLD float ptr [EBX]
005f9e48 : MOV EDX,EBP
005f9e4a : SHR EDX,0x8
005f9e4d : MOV ECX,dword ptr [EAX + EDX*0x4]
005f9e50 : AND EBP,0xff
005f9e56 : MOV EDX,dword ptr [ECX + EBP*0x4]
005f9e59 : MOV ECX,EDX
005f9e5b : SHR ECX,0xa
005f9e5e : MOV ECX,dword ptr [ESI + ECX*0x4]
005f9e61 : AND EDX,0x3ff
005f9e67 : FSUB float ptr [ECX + EDX*0x8]
005f9e6a : LEA EDX,[ECX + EDX*0x8]
005f9e6d : MOV ECX,dword ptr [ESP + 0x14]
005f9e71 : MOV EBP,ECX
005f9e73 : FSTP float ptr [ESP + 0x3c]
005f9e77 : AND ECX,0xff
005f9e7d : FLD float ptr [EBX + 0x4]
005f9e80 : SHR EBP,0x8
005f9e83 : FSUB float ptr [EDX + 0x4]
005f9e86 : MOV EAX,dword ptr [EAX + EBP*0x4]
005f9e89 : MOV EAX,dword ptr [EAX + ECX*0x4]
005f9e8c : MOV ECX,EAX
005f9e8e : FSTP float ptr [ESP + 0x38]
005f9e92 : SHR ECX,0xa
005f9e95 : MOV ECX,dword ptr [ESI + ECX*0x4]
005f9e98 : AND EAX,0x3ff
005f9e9d : FLD float ptr [ECX + EAX*0x8]
005f9ea0 : LEA EAX,[ECX + EAX*0x8]
005f9ea3 : FSUB float ptr [EDI]
005f9ea5 : FSTP float ptr [ESP + 0x34]
005f9ea9 : FLD float ptr [EAX + 0x4]
005f9eac : FSUB float ptr [EDI + 0x4]
005f9eaf : FSTP float ptr [ESP + 0x10]
005f9eb3 : FLD float ptr [ESP + 0x10]
005f9eb7 : FLD float ptr [ESP + 0x34]
005f9ebb : FMUL ST0
005f9ebd : FLD ST1
005f9ebf : FMULP ST2
005f9ec1 : FADDP
005f9ec3 : FSTP float ptr [ESP + 0x40]
005f9ec7 : FLD float ptr [EAX]
005f9ec9 : FSUB float ptr [EDX]
005f9ecb : FSTP float ptr [ESP + 0x10]
005f9ecf : FLD float ptr [EAX + 0x4]
005f9ed2 : FSUB float ptr [EDX + 0x4]
005f9ed5 : FSTP float ptr [ESP + 0x34]
005f9ed9 : FLD float ptr [ESP + 0x34]
005f9edd : FLD float ptr [ESP + 0x10]
005f9ee1 : FMUL ST0
005f9ee3 : FLD ST1
005f9ee5 : FMULP ST2
005f9ee7 : FADDP
005f9ee9 : FSTP float ptr [ESP + 0x34]
005f9eed : FLD float ptr [ESP + 0x38]
005f9ef1 : FLD float ptr [ESP + 0x3c]
005f9ef5 : FMUL ST0
005f9ef7 : FLD ST1
005f9ef9 : FMULP ST2
005f9efb : FADDP
005f9efd : FSTP float ptr [ESP + 0x10]
005f9f01 : XOR ECX,ECX
005f9f03 : FLD float ptr [ESP + 0x40]
005f9f07 : FLD float ptr [ESP + 0x10]
005f9f0b : FCOM
005f9f0d : FNSTSW AX
005f9f0f : TEST AH,0x5
005f9f12 : JP 0x005f9f25
005f9f14 : FSTP ST0
005f9f16 : MOV ECX,0x1
005f9f1b : FSTP float ptr [ESP + 0x10]
005f9f1f : FLD float ptr [ESP + 0x10]
005f9f23 : JMP 0x005f9f27
005f9f25 : FSTP ST1
005f9f27 : FLD float ptr [ESP + 0x34]
005f9f2b : FCOM
005f9f2d : FNSTSW AX
005f9f2f : TEST AH,0x41
005f9f32 : JNZ 0x005f9f45
005f9f34 : FSTP ST1
005f9f36 : MOV ECX,0x2
005f9f3b : FSTP float ptr [ESP + 0x10]
005f9f3f : FLD float ptr [ESP + 0x10]
005f9f43 : JMP 0x005f9f47
005f9f45 : FSTP ST0
005f9f47 : SUB ECX,0x0
005f9f4a : JZ 0x005f9f76
005f9f4c : SUB ECX,0x1
005f9f4f : JZ 0x005f9f6c
005f9f51 : SUB ECX,0x1
005f9f54 : JNZ 0x005f9f84
005f9f56 : MOV EDX,dword ptr [ESP + 0x24]
005f9f5a : MOV EBX,dword ptr [ESP + 0x14]
005f9f5e : INC dword ptr [ESP + 0x20]
005f9f62 : MOV dword ptr [ESP + 0x1c],EDX
005f9f66 : MOV dword ptr [ESP + 0x18],EBX
005f9f6a : JMP 0x005f9f8c
005f9f6c : MOV EBX,dword ptr [ESP + 0x14]
005f9f70 : MOV dword ptr [ESP + 0x18],EBX
005f9f74 : JMP 0x005f9f88
005f9f76 : MOV EDX,dword ptr [ESP + 0x24]
005f9f7a : MOV EBX,dword ptr [ESP + 0x18]
005f9f7e : MOV dword ptr [ESP + 0x1c],EDX
005f9f82 : JMP 0x005f9f8c
005f9f84 : MOV EBX,dword ptr [ESP + 0x18]
005f9f88 : MOV EDX,dword ptr [ESP + 0x1c]
005f9f8c : FLD float ptr [ESP + 0x28]
005f9f90 : FCOMP
005f9f92 : FNSTSW AX
005f9f94 : TEST AH,0x5
005f9f97 : JP 0x005f9fab
005f9f99 : MOV EAX,dword ptr [ESP + 0x48]
005f9f9d : FSTP float ptr [ESP + 0x28]
005f9fa1 : MOV ECX,dword ptr [ESP + 0x4c]
005f9fa5 : MOV dword ptr [EAX],EDX
005f9fa7 : MOV dword ptr [ECX],EBX
005f9fa9 : JMP 0x005f9fad
005f9fab : FSTP ST0
005f9fad : MOV ECX,dword ptr [ESP + 0x20]
005f9fb1 : MOV EAX,dword ptr [ESP + 0x2c]
005f9fb5 : INC ECX
005f9fb6 : MOV dword ptr [ESP + 0x20],ECX
005f9fba : CMP ECX,EAX
005f9fbc : JC 0x005f9dd0
005f9fc2 : POP EDI
005f9fc3 : POP ESI
005f9fc4 : POP EBP
005f9fc5 : POP EBX
005f9fc6 : ADD ESP,0x34
005f9fc9 : RET 0x8
