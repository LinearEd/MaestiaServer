PROGRAM  : Maestia.exe
FUNCTION : FUN_00459c10
ENTRY    : 00459c10
BODY     : [[00459c10, 00459e3d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00459c10(char *param_1)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  undefined1 *puVar4;
  GRefCountNTSImpl *this;
  GRefCountImpl *this_00;
  GRefCountImpl *local_218;
  undefined1 local_214 [256];
  char local_114 [256];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  puStack_c = &LAB_00b81cc4;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  this = (GRefCountNTSImpl *)0x0;
  local_8 = 0;
  if (param_1 == (char *)0x0) goto LAB_00459dc7;
  pcVar2 = param_1;
  do {
    cVar1 = *pcVar2;
    pcVar2 = pcVar2 + 1;
  } while (cVar1 != '\0');
  if ((uint)((int)pcVar2 - (int)(param_1 + 1)) < 7) goto LAB_00459dc7;
  local_8 = 1;
  _sprintf_s(local_114,0xff,"%s",param_1 + 6,local_14);
  local_218 = (GRefCountImpl *)FUN_0078a4d0(local_114);
  if (local_218 == (GRefCountImpl *)0x0) {
    iVar3 = FUN_00634e90(param_1,"help/helpimage");
    if (iVar3 != 0) {
      puVar4 = (undefined1 *)FUN_00638800(local_114,0x23);
      if (puVar4 != (undefined1 *)0x0) {
        *puVar4 = 0;
      }
      _strcat_s(local_114,0x100,".png");
      local_218 = (GRefCountImpl *)FUN_0078a4d0(local_114);
      if (local_218 != (GRefCountImpl *)0x0) {
        GRefCountImpl::AddRef(local_218);
      }
    }
    this_00 = local_218;
    if (local_218 != (GRefCountImpl *)0x0) goto LAB_00459d22;
LAB_00459d4c:
    FUN_00410870("icon\\%s","icon_common.png");
    local_218 = (GRefCountImpl *)FUN_0078a4d0(local_214);
    if (local_218 != (GRefCountImpl *)0x0) {
      GRefCountImpl::AddRef(local_218);
    }
    if (this_00 != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(this_00);
    }
    if (local_218 != (GRefCountImpl *)0x0) {
      this = (GRefCountNTSImpl *)FUN_00676770(local_218,0);
      if (this != (GRefCountNTSImpl *)0x0) {
        *(int *)(this + 4) = *(int *)(this + 4) + 1;
      }
      GRefCountImpl::Release(local_218);
    }
  }
  else {
    GRefCountImpl::AddRef(local_218);
LAB_00459d22:
    this = (GRefCountNTSImpl *)FUN_00676770(local_218,0);
    if (this != (GRefCountNTSImpl *)0x0) {
      *(int *)(this + 4) = *(int *)(this + 4) + 1;
    }
    GRefCountImpl::Release(local_218);
    this_00 = local_218;
    if (this == (GRefCountNTSImpl *)0x0) goto LAB_00459d4c;
  }
  local_8 = local_8 & 0xffffff00;
  if (local_218 != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(local_218);
  }
LAB_00459dc7:
  if (this != (GRefCountNTSImpl *)0x0) {
    iVar3 = FUN_00515840(0x24,0);
    local_8._0_1_ = 2;
    if (iVar3 != 0) {
      FUN_00512390(this,*(undefined4 *)(this + 0xc),*(undefined4 *)(this + 0x10),1);
    }
    local_8 = (uint)local_8._1_3_ << 8;
    GRefCountNTSImpl::Release(this);
  }
  local_8 = 0xffffffff;
  if (this != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00459c10 : PUSH EBP
00459c11 : MOV EBP,ESP
00459c13 : PUSH -0x1
00459c15 : PUSH 0xb81cc4
00459c1a : MOV EAX,FS:[0x0]
00459c20 : PUSH EAX
00459c21 : SUB ESP,0x210
00459c27 : MOV EAX,[0x00d66fa0]
00459c2c : XOR EAX,EBP
00459c2e : MOV dword ptr [EBP + -0x10],EAX
00459c31 : PUSH EBX
00459c32 : PUSH ESI
00459c33 : PUSH EDI
00459c34 : PUSH EAX
00459c35 : LEA EAX,[EBP + -0xc]
00459c38 : MOV FS:[0x0],EAX
00459c3e : MOV ESI,dword ptr [EBP + 0x8]
00459c41 : XOR EBX,EBX
00459c43 : MOV dword ptr [EBP + 0xfffffde4],EBX
00459c49 : MOV dword ptr [EBP + 0xfffffde8],EBX
00459c4f : MOV dword ptr [EBP + -0x4],EBX
00459c52 : CMP ESI,EBX
00459c54 : JZ 0x00459dc7
00459c5a : MOV EAX,ESI
00459c5c : LEA EDX,[EAX + 0x1]
00459c5f : NOP
00459c60 : MOV CL,byte ptr [EAX]
00459c62 : INC EAX
00459c63 : TEST CL,CL
00459c65 : JNZ 0x00459c60
00459c67 : SUB EAX,EDX
00459c69 : CMP EAX,0x6
00459c6c : JBE 0x00459dc7
00459c72 : MOV dword ptr [EBP + 0xfffffdec],EBX
00459c78 : MOV byte ptr [EBP + -0x4],0x1
00459c7c : LEA EAX,[ESI + 0x6]
00459c7f : PUSH EAX
00459c80 : PUSH 0xcd4480
00459c85 : LEA ECX,[EBP + 0xfffffef0]
00459c8b : PUSH 0xff
00459c90 : PUSH ECX
00459c91 : CALL 0x00637e58
00459c96 : LEA EDX,[EBP + 0xfffffef0]
00459c9c : PUSH EDX
00459c9d : CALL 0x0078a4d0
00459ca2 : MOV EDI,EAX
00459ca4 : ADD ESP,0x14
00459ca7 : TEST EDI,EDI
00459ca9 : JZ 0x00459cb2
00459cab : MOV ECX,EDI
00459cad : CALL 0x00523dd0
00459cb2 : MOV dword ptr [EBP + 0xfffffdec],EDI
00459cb8 : TEST EDI,EDI
00459cba : JNZ 0x00459d22
00459cbc : PUSH 0xcd4484
00459cc1 : PUSH ESI
00459cc2 : CALL 0x00634e90
00459cc7 : ADD ESP,0x8
00459cca : TEST EAX,EAX
00459ccc : JZ 0x00459d1e
00459cce : LEA EAX,[EBP + 0xfffffef0]
00459cd4 : PUSH 0x23
00459cd6 : PUSH EAX
00459cd7 : CALL 0x00638800
00459cdc : ADD ESP,0x8
00459cdf : TEST EAX,EAX
00459ce1 : JZ 0x00459ce6
00459ce3 : MOV byte ptr [EAX],0x0
00459ce6 : PUSH 0xcd4494
00459ceb : LEA ECX,[EBP + 0xfffffef0]
00459cf1 : PUSH 0x100
00459cf6 : PUSH ECX
00459cf7 : CALL 0x0063db33
00459cfc : LEA EDX,[EBP + 0xfffffef0]
00459d02 : PUSH EDX
00459d03 : CALL 0x0078a4d0
00459d08 : MOV EDI,EAX
00459d0a : ADD ESP,0x10
00459d0d : TEST EDI,EDI
00459d0f : JZ 0x00459d18
00459d11 : MOV ECX,EDI
00459d13 : CALL 0x00523dd0
00459d18 : MOV dword ptr [EBP + 0xfffffdec],EDI
00459d1e : TEST EDI,EDI
00459d20 : JZ 0x00459d4c
00459d22 : PUSH 0x0
00459d24 : PUSH EDI
00459d25 : CALL 0x00676770
00459d2a : MOV ESI,EAX
00459d2c : TEST ESI,ESI
00459d2e : JZ 0x00459d39
00459d30 : INC dword ptr [ESI + 0x4]
00459d33 : MOV EDI,dword ptr [EBP + 0xfffffdec]
00459d39 : MOV EBX,ESI
00459d3b : MOV ECX,EDI
00459d3d : MOV dword ptr [EBP + 0xfffffde8],EBX
00459d43 : CALL 0x004ff7e0
00459d48 : TEST ESI,ESI
00459d4a : JNZ 0x00459db8
00459d4c : PUSH 0xcd449c
00459d51 : PUSH 0xcd44ac
00459d56 : LEA EDX,[EBP + 0xfffffdf0]
00459d5c : CALL 0x00410870
00459d61 : LEA EAX,[EBP + 0xfffffdf0]
00459d67 : PUSH EAX
00459d68 : CALL 0x0078a4d0
00459d6d : MOV ESI,EAX
00459d6f : ADD ESP,0xc
00459d72 : TEST ESI,ESI
00459d74 : JZ 0x00459d7d
00459d76 : MOV ECX,ESI
00459d78 : CALL 0x00523dd0
00459d7d : TEST EDI,EDI
00459d7f : JZ 0x00459d88
00459d81 : MOV ECX,EDI
00459d83 : CALL 0x004ff7e0
00459d88 : MOV EDI,ESI
00459d8a : MOV dword ptr [EBP + 0xfffffdec],EDI
00459d90 : TEST ESI,ESI
00459d92 : JZ 0x00459db8
00459d94 : PUSH 0x0
00459d96 : PUSH ESI
00459d97 : CALL 0x00676770
00459d9c : TEST EAX,EAX
00459d9e : JZ 0x00459da9
00459da0 : INC dword ptr [EAX + 0x4]
00459da3 : MOV EDI,dword ptr [EBP + 0xfffffdec]
00459da9 : MOV EBX,EAX
00459dab : MOV ECX,ESI
00459dad : MOV dword ptr [EBP + 0xfffffde8],EBX
00459db3 : CALL 0x004ff7e0
00459db8 : MOV byte ptr [EBP + -0x4],0x0
00459dbc : TEST EDI,EDI
00459dbe : JZ 0x00459dc7
00459dc0 : MOV ECX,EDI
00459dc2 : CALL 0x004ff7e0
00459dc7 : XOR ESI,ESI
00459dc9 : TEST EBX,EBX
00459dcb : JZ 0x00459e0c
00459dcd : MOV ECX,dword ptr [0x00d73250]
00459dd3 : PUSH ESI
00459dd4 : PUSH 0x24
00459dd6 : CALL 0x00515840
00459ddb : MOV dword ptr [EBP + 0xfffffdec],EAX
00459de1 : MOV byte ptr [EBP + -0x4],0x2
00459de5 : TEST EAX,EAX
00459de7 : JZ 0x00459dfd
00459de9 : MOV ECX,dword ptr [EBX + 0x10]
00459dec : MOV EDX,dword ptr [EBX + 0xc]
00459def : PUSH 0x1
00459df1 : PUSH ECX
00459df2 : PUSH EDX
00459df3 : PUSH EBX
00459df4 : MOV ECX,EAX
00459df6 : CALL 0x00512390
00459dfb : JMP 0x00459dff
00459dfd : XOR EAX,EAX
00459dff : MOV byte ptr [EBP + -0x4],0x0
00459e03 : MOV ECX,EBX
00459e05 : MOV ESI,EAX
00459e07 : CALL 0x004ff7c0
00459e0c : MOV dword ptr [EBP + -0x4],0xffffffff
00459e13 : TEST EBX,EBX
00459e15 : JZ 0x00459e1e
00459e17 : MOV ECX,EBX
00459e19 : CALL 0x004ff7c0
00459e1e : MOV EAX,ESI
00459e20 : MOV ECX,dword ptr [EBP + -0xc]
00459e23 : MOV dword ptr FS:[0x0],ECX
00459e2a : POP ECX
00459e2b : POP EDI
00459e2c : POP ESI
00459e2d : POP EBX
00459e2e : MOV ECX,dword ptr [EBP + -0x10]
00459e31 : XOR ECX,EBP
00459e33 : CALL 0x00633e6b
00459e38 : MOV ESP,EBP
00459e3a : POP EBP
00459e3b : RET 0x4
