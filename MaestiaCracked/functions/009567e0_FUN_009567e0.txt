PROGRAM  : Maestia.exe
FUNCTION : FUN_009567e0
ENTRY    : 009567e0
BODY     : [[009567e0, 00956bb7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009567e0(undefined4 param_1,undefined4 param_2)

{
  int *piVar1;
  int iVar2;
  int *in_ECX;
  undefined4 ***pppuVar3;
  undefined4 ***pppuVar4;
  undefined1 local_a0 [4];
  undefined2 local_9c;
  undefined4 local_8c;
  uint local_88;
  undefined1 local_84 [4];
  undefined2 local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined4 **local_48 [4];
  undefined4 local_38;
  uint local_34;
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2d01f;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  (**(code **)(*(int *)in_ECX[0xe] + 0x80))(local_14);
  (**(code **)(*(int *)in_ECX[0xf] + 0x80))();
  iVar2 = *(int *)(DAT_0172491c + 0x17c);
  if (iVar2 != 0) {
    FUN_00405eb0(iVar2 + 0xc,0,0xffffffff);
    if (*(uint *)(iVar2 + 0x24) < 8) {
      iVar2 = iVar2 + 0x10;
    }
    else {
      iVar2 = *(int *)(iVar2 + 0x10);
    }
    (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
              (*(int **)(*DAT_00da9894 + 0x114),"SetTradeMyName",&DAT_00c75f60,iVar2);
    FUN_00956550();
    FUN_00956490();
    (**(code **)(*(int *)in_ECX[0xe] + 0x18))(0,300);
  }
  iVar2 = FUN_00a1a840(in_ECX[0x13]);
  if (iVar2 != 0) {
    FUN_00405eb0(iVar2 + 0xc,0,0xffffffff);
    if (*(uint *)(iVar2 + 0x24) < 8) {
      iVar2 = iVar2 + 0x10;
    }
    else {
      iVar2 = *(int *)(iVar2 + 0x10);
    }
    (**(code **)(**(int **)(*DAT_00da9894 + 0x114) + 4))
              (*(int **)(*DAT_00da9894 + 0x114),"SetTradeTargetName",&DAT_00c76084,iVar2);
    FUN_009563d0();
    (**(code **)(*(int *)in_ECX[0xf] + 0x18))(0,300);
  }
  piVar1 = DAT_00da9894;
  *(undefined1 *)(in_ECX + 0x12) = 0;
  *(undefined1 *)((int)in_ECX + 0x49) = 0;
  if (*(int *)(*piVar1 + 0x114) != 0) {
    piVar1 = *(int **)(*piVar1 + 0x114);
    (**(code **)(*piVar1 + 4))(piVar1,"TradeMyReadyEffect",&DAT_00c75f48,0);
  }
  if (*(int *)(*DAT_00da9894 + 0x114) != 0) {
    piVar1 = *(int **)(*DAT_00da9894 + 0x114);
    (**(code **)(*piVar1 + 4))(piVar1,"TradeTargetReadyEffect",&DAT_00c76068,0);
  }
  FUN_008f7770(param_1,param_2);
  (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x114))("OpenTradeWindow");
  (**(code **)(*in_ECX + 4))(0);
  (**(code **)(**(int **)(*(int *)(*DAT_00da9894 + 0x130) + 0x40) + 0x18))(1,300);
  local_80 = 0;
  local_6c = 7;
  local_70 = 0;
  FUN_00406360(L"IDS_PCTRADE_START",0x11);
  local_8 = 0;
  FUN_0081d120(local_84);
  local_8._0_1_ = 2;
  if (7 < local_6c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_80 = 0;
  local_6c = 7;
  local_70 = 0;
  (**(code **)(**(int **)(in_ECX[1] + 0x1a8) + 0x44))(local_68,2);
  local_88 = 7;
  local_8c = 0;
  local_9c = 0;
  FUN_00406360(L"IDS_PCTRADE_OPEN_LOCK",0x15);
  local_8._0_1_ = 3;
  FUN_0081d120(local_a0);
  local_8._0_1_ = 5;
  if (7 < local_88) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_88 = 7;
  local_6c = 7;
  local_8c = 0;
  local_9c = 0;
  local_70 = 0;
  local_80 = 0;
  FUN_00406360(L"IDS_PCTRADE_CLOSE_LOCK",0x16);
  local_8._0_1_ = 6;
  FUN_0081d120(local_84);
  local_8._0_1_ = 8;
  if (7 < local_6c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_6c = 7;
  local_70 = 0;
  local_80 = 0;
  iVar2 = *DAT_00da9894;
  if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
    pppuVar4 = (undefined4 ***)local_2c[0];
    if (local_18 < 8) {
      pppuVar4 = local_2c;
    }
    pppuVar3 = (undefined4 ***)local_48[0];
    if (local_34 < 8) {
      pppuVar3 = local_48;
    }
    (**(code **)(**(int **)(iVar2 + 0x114) + 4))
              (*(int **)(iVar2 + 0x114),"SetLockTooltip","%ls,%ls",pppuVar3,pppuVar4);
  }
  local_8 = CONCAT31(local_8._1_3_,5);
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_34 = 7;
  local_38 = 0;
  local_48[0] = (undefined4 **)((uint)local_48[0] & 0xffff0000);
  local_8 = 0xffffffff;
  if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_50 = 7;
  local_54 = 0;
  local_64 = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009567e0 : PUSH EBP
009567e1 : MOV EBP,ESP
009567e3 : PUSH -0x1
009567e5 : PUSH 0xb2d01f
009567ea : MOV EAX,FS:[0x0]
009567f0 : PUSH EAX
009567f1 : SUB ESP,0x90
009567f7 : MOV EAX,[0x00d66fa0]
009567fc : XOR EAX,EBP
009567fe : MOV dword ptr [EBP + -0x10],EAX
00956801 : PUSH EBX
00956802 : PUSH ESI
00956803 : PUSH EDI
00956804 : PUSH EAX
00956805 : LEA EAX,[EBP + -0xc]
00956808 : MOV FS:[0x0],EAX
0095680e : MOV ESI,ECX
00956810 : MOV ECX,dword ptr [ESI + 0x38]
00956813 : MOV EAX,dword ptr [ECX]
00956815 : MOV EDX,dword ptr [EAX + 0x80]
0095681b : CALL EDX
0095681d : MOV ECX,dword ptr [ESI + 0x3c]
00956820 : MOV EAX,dword ptr [ECX]
00956822 : MOV EDX,dword ptr [EAX + 0x80]
00956828 : CALL EDX
0095682a : MOV EAX,[0x0172491c]
0095682f : MOV EDI,dword ptr [EAX + 0x17c]
00956835 : TEST EDI,EDI
00956837 : JZ 0x009568a1
00956839 : MOV EAX,dword ptr [ESI + 0x38]
0095683c : PUSH -0x1
0095683e : PUSH 0x0
00956840 : LEA EBX,[EDI + 0xc]
00956843 : PUSH EBX
00956844 : LEA ECX,[EAX + 0x64]
00956847 : CALL 0x00405eb0
0095684c : CMP dword ptr [EBX + 0x18],0x8
00956850 : MOV ECX,dword ptr [0x00da9894]
00956856 : MOV EAX,dword ptr [ECX]
00956858 : MOV EAX,dword ptr [EAX + 0x114]
0095685e : JC 0x00956865
00956860 : MOV EBX,dword ptr [EBX + 0x4]
00956863 : JMP 0x00956868
00956865 : ADD EBX,0x4
00956868 : MOV EDX,dword ptr [EAX]
0095686a : PUSH EBX
0095686b : PUSH 0xc75f60
00956870 : PUSH 0xc75f64
00956875 : PUSH EAX
00956876 : MOV EAX,dword ptr [EDX + 0x4]
00956879 : CALL EAX
0095687b : ADD ESP,0x10
0095687e : XOR ECX,ECX
00956880 : CALL 0x00956550
00956885 : MOV ECX,dword ptr [EDI + 0x1ed0]
0095688b : CALL 0x00956490
00956890 : MOV ECX,dword ptr [ESI + 0x38]
00956893 : MOV EDX,dword ptr [ECX]
00956895 : MOV EAX,dword ptr [EDX + 0x18]
00956898 : PUSH 0x12c
0095689d : PUSH 0x0
0095689f : CALL EAX
009568a1 : MOV ECX,dword ptr [ESI + 0x4c]
009568a4 : PUSH ECX
009568a5 : MOV ECX,dword ptr [0x00da93ec]
009568ab : CALL 0x00a1a840
009568b0 : XOR EBX,EBX
009568b2 : CMP EAX,EBX
009568b4 : JZ 0x00956911
009568b6 : MOV ECX,dword ptr [ESI + 0x3c]
009568b9 : PUSH -0x1
009568bb : LEA EDI,[EAX + 0xc]
009568be : PUSH EBX
009568bf : PUSH EDI
009568c0 : ADD ECX,0x64
009568c3 : CALL 0x00405eb0
009568c8 : CMP dword ptr [EDI + 0x18],0x8
009568cc : MOV EDX,dword ptr [0x00da9894]
009568d2 : MOV EAX,dword ptr [EDX]
009568d4 : MOV EAX,dword ptr [EAX + 0x114]
009568da : JC 0x009568e1
009568dc : MOV EDI,dword ptr [EDI + 0x4]
009568df : JMP 0x009568e4
009568e1 : ADD EDI,0x4
009568e4 : MOV ECX,dword ptr [EAX]
009568e6 : MOV EDX,dword ptr [ECX + 0x4]
009568e9 : PUSH EDI
009568ea : PUSH 0xc76084
009568ef : PUSH 0xc76088
009568f4 : PUSH EAX
009568f5 : CALL EDX
009568f7 : ADD ESP,0x10
009568fa : XOR ECX,ECX
009568fc : CALL 0x009563d0
00956901 : MOV ECX,dword ptr [ESI + 0x3c]
00956904 : MOV EAX,dword ptr [ECX]
00956906 : MOV EDX,dword ptr [EAX + 0x18]
00956909 : PUSH 0x12c
0095690e : PUSH EBX
0095690f : CALL EDX
00956911 : MOV EAX,[0x00da9894]
00956916 : MOV byte ptr [ESI + 0x48],0x0
0095691a : MOV byte ptr [ESI + 0x49],0x0
0095691e : MOV EAX,dword ptr [EAX]
00956920 : CMP dword ptr [EAX + 0x114],EBX
00956926 : JZ 0x00956944
00956928 : MOV EAX,dword ptr [EAX + 0x114]
0095692e : MOV ECX,dword ptr [EAX]
00956930 : MOV EDX,dword ptr [ECX + 0x4]
00956933 : PUSH EBX
00956934 : PUSH 0xc75f48
00956939 : PUSH 0xc75f4c
0095693e : PUSH EAX
0095693f : CALL EDX
00956941 : ADD ESP,0x10
00956944 : MOV EAX,[0x00da9894]
00956949 : MOV EAX,dword ptr [EAX]
0095694b : CMP dword ptr [EAX + 0x114],EBX
00956951 : JZ 0x0095696f
00956953 : MOV EAX,dword ptr [EAX + 0x114]
00956959 : MOV ECX,dword ptr [EAX]
0095695b : MOV EDX,dword ptr [ECX + 0x4]
0095695e : PUSH EBX
0095695f : PUSH 0xc76068
00956964 : PUSH 0xc7606c
00956969 : PUSH EAX
0095696a : CALL EDX
0095696c : ADD ESP,0x10
0095696f : MOV EAX,dword ptr [EBP + 0xc]
00956972 : MOV ECX,dword ptr [EBP + 0x8]
00956975 : PUSH EAX
00956976 : PUSH ECX
00956977 : MOV ECX,ESI
00956979 : CALL 0x008f7770
0095697e : MOV EDX,dword ptr [0x00da9894]
00956984 : MOV EAX,dword ptr [EDX]
00956986 : MOV ECX,dword ptr [EAX + 0x114]
0095698c : MOV EAX,dword ptr [ECX]
0095698e : MOV EDX,dword ptr [EAX]
00956990 : PUSH 0xc767b8
00956995 : CALL EDX
00956997 : MOV EAX,dword ptr [ESI]
00956999 : MOV EDX,dword ptr [EAX + 0x4]
0095699c : PUSH EBX
0095699d : MOV ECX,ESI
0095699f : CALL EDX
009569a1 : MOV EAX,[0x00da9894]
009569a6 : MOV EAX,dword ptr [EAX]
009569a8 : MOV EAX,dword ptr [EAX + 0x130]
009569ae : MOV ECX,dword ptr [EAX + 0x40]
009569b1 : MOV EDX,dword ptr [ECX]
009569b3 : MOV EAX,dword ptr [EDX + 0x18]
009569b6 : PUSH 0x12c
009569bb : PUSH 0x1
009569bd : CALL EAX
009569bf : XOR ECX,ECX
009569c1 : PUSH 0x11
009569c3 : MOV word ptr [EBP + -0x7c],CX
009569c7 : PUSH 0xc767c8
009569cc : LEA ECX,[EBP + -0x80]
009569cf : MOV dword ptr [EBP + -0x68],0x7
009569d6 : MOV dword ptr [EBP + -0x6c],EBX
009569d9 : CALL 0x00406360
009569de : MOV dword ptr [EBP + -0x4],EBX
009569e1 : MOV ECX,dword ptr [0x0172491c]
009569e7 : LEA EDX,[EBP + -0x80]
009569ea : PUSH EDX
009569eb : LEA EDI,[EBP + -0x64]
009569ee : CALL 0x0081d120
009569f3 : MOV byte ptr [EBP + -0x4],0x2
009569f7 : CMP dword ptr [EBP + -0x68],0x8
009569fb : JC 0x00956a05
009569fd : MOV ECX,dword ptr [EBP + -0x7c]
00956a00 : CALL 0x006f04e0
00956a05 : MOV ECX,dword ptr [ESI + 0x4]
00956a08 : MOV ECX,dword ptr [ECX + 0x1a8]
00956a0e : MOV EDX,dword ptr [ECX]
00956a10 : MOV EDX,dword ptr [EDX + 0x44]
00956a13 : XOR EAX,EAX
00956a15 : MOV word ptr [EBP + -0x7c],AX
00956a19 : PUSH 0x2
00956a1b : LEA EAX,[EBP + -0x64]
00956a1e : MOV EDI,0x7
00956a23 : PUSH EAX
00956a24 : MOV dword ptr [EBP + -0x68],EDI
00956a27 : MOV dword ptr [EBP + -0x6c],EBX
00956a2a : CALL EDX
00956a2c : PUSH 0x15
00956a2e : XOR EAX,EAX
00956a30 : PUSH 0xc767ec
00956a35 : LEA ECX,[EBP + 0xffffff64]
00956a3b : MOV dword ptr [EBP + 0xffffff7c],EDI
00956a41 : MOV dword ptr [EBP + 0xffffff78],EBX
00956a47 : MOV word ptr [EBP + 0xffffff68],AX
00956a4e : CALL 0x00406360
00956a53 : MOV byte ptr [EBP + -0x4],0x3
00956a57 : LEA ECX,[EBP + 0xffffff64]
00956a5d : PUSH ECX
00956a5e : MOV ECX,dword ptr [0x0172491c]
00956a64 : LEA EDI,[EBP + -0x48]
00956a67 : CALL 0x0081d120
00956a6c : MOV byte ptr [EBP + -0x4],0x5
00956a70 : MOV ESI,0x8
00956a75 : CMP dword ptr [EBP + 0xffffff7c],ESI
00956a7b : JC 0x00956a88
00956a7d : MOV ECX,dword ptr [EBP + 0xffffff68]
00956a83 : CALL 0x006f04e0
00956a88 : MOV EAX,0x7
00956a8d : MOV dword ptr [EBP + 0xffffff7c],EAX
00956a93 : MOV dword ptr [EBP + -0x68],EAX
00956a96 : PUSH 0x16
00956a98 : XOR EDX,EDX
00956a9a : XOR EAX,EAX
00956a9c : PUSH 0xc76818
00956aa1 : LEA ECX,[EBP + -0x80]
00956aa4 : MOV dword ptr [EBP + 0xffffff78],EBX
00956aaa : MOV word ptr [EBP + 0xffffff68],DX
00956ab1 : MOV dword ptr [EBP + -0x6c],EBX
00956ab4 : MOV word ptr [EBP + -0x7c],AX
00956ab8 : CALL 0x00406360
00956abd : MOV byte ptr [EBP + -0x4],0x6
00956ac1 : LEA ECX,[EBP + -0x80]
00956ac4 : PUSH ECX
00956ac5 : MOV ECX,dword ptr [0x0172491c]
00956acb : LEA EDI,[EBP + -0x2c]
00956ace : CALL 0x0081d120
00956ad3 : MOV byte ptr [EBP + -0x4],0x8
00956ad7 : CMP dword ptr [EBP + -0x68],ESI
00956ada : JC 0x00956ae4
00956adc : MOV ECX,dword ptr [EBP + -0x7c]
00956adf : CALL 0x006f04e0
00956ae4 : MOV EAX,[0x00da9894]
00956ae9 : XOR EDX,EDX
00956aeb : MOV EDI,0x7
00956af0 : MOV dword ptr [EBP + -0x68],EDI
00956af3 : MOV dword ptr [EBP + -0x6c],EBX
00956af6 : MOV word ptr [EBP + -0x7c],DX
00956afa : MOV EAX,dword ptr [EAX]
00956afc : CMP EAX,EBX
00956afe : JZ 0x00956b40
00956b00 : CMP dword ptr [EAX + 0x114],EBX
00956b06 : JZ 0x00956b40
00956b08 : MOV EAX,dword ptr [EAX + 0x114]
00956b0e : MOV EDX,dword ptr [EBP + -0x28]
00956b11 : CMP dword ptr [EBP + -0x14],ESI
00956b14 : JNC 0x00956b19
00956b16 : LEA EDX,[EBP + -0x28]
00956b19 : MOV ECX,dword ptr [EBP + -0x44]
00956b1c : CMP dword ptr [EBP + -0x30],ESI
00956b1f : JNC 0x00956b24
00956b21 : LEA ECX,[EBP + -0x44]
00956b24 : MOV EDI,dword ptr [EAX]
00956b26 : PUSH EDX
00956b27 : PUSH ECX
00956b28 : MOV ECX,dword ptr [EDI + 0x4]
00956b2b : PUSH 0xc76848
00956b30 : PUSH 0xc76850
00956b35 : PUSH EAX
00956b36 : CALL ECX
00956b38 : ADD ESP,0x14
00956b3b : MOV EDI,0x7
00956b40 : MOV byte ptr [EBP + -0x4],0x5
00956b44 : CMP dword ptr [EBP + -0x14],ESI
00956b47 : JC 0x00956b51
00956b49 : MOV ECX,dword ptr [EBP + -0x28]
00956b4c : CALL 0x006f04e0
00956b51 : XOR EDX,EDX
00956b53 : MOV dword ptr [EBP + -0x14],EDI
00956b56 : MOV dword ptr [EBP + -0x18],EBX
00956b59 : MOV word ptr [EBP + -0x28],DX
00956b5d : MOV byte ptr [EBP + -0x4],0x2
00956b61 : CMP dword ptr [EBP + -0x30],ESI
00956b64 : JC 0x00956b6e
00956b66 : MOV ECX,dword ptr [EBP + -0x44]
00956b69 : CALL 0x006f04e0
00956b6e : XOR EAX,EAX
00956b70 : MOV dword ptr [EBP + -0x30],EDI
00956b73 : MOV dword ptr [EBP + -0x34],EBX
00956b76 : MOV word ptr [EBP + -0x44],AX
00956b7a : MOV dword ptr [EBP + -0x4],0xffffffff
00956b81 : CMP dword ptr [EBP + -0x4c],ESI
00956b84 : JC 0x00956b8e
00956b86 : MOV ECX,dword ptr [EBP + -0x60]
00956b89 : CALL 0x006f04e0
00956b8e : XOR ECX,ECX
00956b90 : MOV dword ptr [EBP + -0x4c],EDI
00956b93 : MOV dword ptr [EBP + -0x50],EBX
00956b96 : MOV word ptr [EBP + -0x60],CX
00956b9a : MOV ECX,dword ptr [EBP + -0xc]
00956b9d : MOV dword ptr FS:[0x0],ECX
00956ba4 : POP ECX
00956ba5 : POP EDI
00956ba6 : POP ESI
00956ba7 : POP EBX
00956ba8 : MOV ECX,dword ptr [EBP + -0x10]
00956bab : XOR ECX,EBP
00956bad : CALL 0x00633e6b
00956bb2 : MOV ESP,EBP
00956bb4 : POP EBP
00956bb5 : RET 0x8
