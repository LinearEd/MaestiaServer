PROGRAM  : Maestia.exe
FUNCTION : FUN_009f72f0
ENTRY    : 009f72f0
BODY     : [[009f72f0, 009f772a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009f72f0(undefined4 param_1)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int *in_ECX;
  float local_d8;
  int local_d4;
  uint uStack_d0;
  undefined1 auStack_cc [28];
  undefined1 auStack_b0 [40];
  undefined1 auStack_88 [84];
  undefined1 auStack_34 [32];
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  iVar3 = DAT_00d7c54c;
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b46d3b;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (in_ECX != (int *)0x0) {
    local_d8 = (float)in_ECX[4];
    FUN_004437f0(&local_d8);
    if (((local_d4 != *(int *)(iVar3 + 0x44)) &&
        (piVar1 = *(int **)(local_d4 + 0x10), piVar1 != (int *)0x0)) && ((piVar1[0x12] & 8U) == 0))
    {
      local_d4 = FUN_008eb260(DAT_00d6f0f4);
      iVar3 = (**(code **)(*piVar1 + 0x40))();
      if (iVar3 == 0) {
        FUN_0040e750(in_ECX,auStack_b0);
        uStack_c = 0;
        local_d8 = (float)(**(code **)(*in_ECX + 0x20))();
        (**(code **)(*in_ECX + 0x30))();
        if (*(ushort *)(piVar1 + 0x14) < 3) {
          FUN_009e7fa0(*(ushort *)(piVar1 + 0x14),local_d8);
        }
        uStack_c = 0xffffffff;
        FUN_0040f3f0(auStack_b0);
      }
      local_d8 = 1.0;
      uStack_d0 = 10000;
      if ((local_d4 != 0) && (iVar3 = FUN_004049b0(*(undefined4 *)(local_d4 + 0x70)), iVar3 != 0)) {
        uStack_d0 = (uint)*(ushort *)(iVar3 + 0x44);
        local_d8 = (float)*(ushort *)(iVar3 + 0x44) * 0.0001;
      }
      iVar3 = FUN_00702910(piVar1[0x15],uStack_d0);
      if (iVar3 == 0) {
        iVar3 = 1;
      }
      cVar2 = (**(code **)(*in_ECX + 0x30))();
      if (cVar2 != '\0') {
        iVar3 = 10;
      }
      if (((local_d4 != 0) && (iVar4 = FUN_004049b0(*(undefined4 *)(local_d4 + 0x70)), iVar4 != 0))
         && ((*(char *)(iVar4 + 0x40) == '\x03' || (*(char *)(iVar4 + 0x40) == '\x04')))) {
        iVar3 = FUN_00962140(in_ECX[4]);
      }
      FUN_00406460(L"IDS_ITEMEQUIP_SALE2");
      uStack_c = 1;
      uVar5 = FUN_0070c2d0(iVar3,0);
      uStack_c._0_1_ = 2;
      FUN_0081d120(auStack_cc);
      uStack_c._0_1_ = 3;
      uVar5 = FUN_00403450(auStack_34,uVar5);
      uStack_c._0_1_ = 4;
      FUN_00405eb0(uVar5,0,0xffffffff);
      uStack_c._0_1_ = 3;
      FUN_00406560();
      uStack_c._0_1_ = 2;
      FUN_00406560();
      uStack_c = CONCAT31(uStack_c._1_3_,1);
      FUN_00406560();
      uStack_c = 0xffffffff;
      FUN_00406560();
      iVar3 = FUN_0081cbe0(DAT_0172491c);
      uStack_c = 5;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      uVar5 = FUN_00404750(L" %s@N",iVar3);
      uStack_c._0_1_ = 6;
      FUN_00405c30(uVar5,0,0xffffffff);
      uStack_c = CONCAT31(uStack_c._1_3_,5);
      FUN_00406560();
      uStack_c = 0xffffffff;
      FUN_00406560();
      iVar3 = (int)ABS((1.0 - local_d8) * 100.0);
      if (0 < iVar3) {
        FUN_00406460(L"IDS_APPLY_SELL_TAX");
        uStack_c = 7;
        iVar4 = FUN_0081d120(auStack_cc);
        uStack_c._0_1_ = 8;
        if (*(uint *)(iVar4 + 0x18) < 8) {
          iVar4 = iVar4 + 4;
        }
        else {
          iVar4 = *(int *)(iVar4 + 4);
        }
        uVar5 = FUN_00404750(iVar4,iVar3);
        uStack_c._0_1_ = 9;
        uVar5 = FUN_00403380(auStack_88,uVar5);
        uStack_c._0_1_ = 10;
        FUN_00405c30(uVar5,0,0xffffffff);
        uStack_c._0_1_ = 9;
        FUN_00406560();
        uStack_c._0_1_ = 8;
        FUN_00406560();
        uStack_c = CONCAT31(uStack_c._1_3_,7);
        FUN_00406560();
        uStack_c = 0xffffffff;
        FUN_00406560();
      }
      FUN_00404980(param_1);
    }
    ExceptionList = local_14;
    return;
  }
  FUN_008018d0(L"[GetSellPriceTooltip] pItem is Null",DAT_00d66fa0 ^ (uint)&stack0xffffff18);
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
009f72f0 : PUSH EBP
009f72f1 : MOV EBP,ESP
009f72f3 : AND ESP,0xfffffff8
009f72f6 : PUSH -0x1
009f72f8 : PUSH 0xb46d3b
009f72fd : MOV EAX,FS:[0x0]
009f7303 : PUSH EAX
009f7304 : SUB ESP,0xc8
009f730a : PUSH EBX
009f730b : PUSH ESI
009f730c : PUSH EDI
009f730d : MOV EAX,[0x00d66fa0]
009f7312 : XOR EAX,ESP
009f7314 : PUSH EAX
009f7315 : LEA EAX,[ESP + 0xd8]
009f731c : MOV FS:[0x0],EAX
009f7322 : MOV EDI,ECX
009f7324 : TEST EDI,EDI
009f7326 : JNZ 0x009f7351
009f7328 : MOV ESI,dword ptr [0x00da98e8]
009f732e : PUSH 0xca6948
009f7333 : CALL 0x008018d0
009f7338 : ADD ESP,0x4
009f733b : MOV ECX,dword ptr [ESP + 0xd8]
009f7342 : MOV dword ptr FS:[0x0],ECX
009f7349 : POP ECX
009f734a : POP EDI
009f734b : POP ESI
009f734c : POP EBX
009f734d : MOV ESP,EBP
009f734f : POP EBP
009f7350 : RET
009f7351 : MOV EAX,dword ptr [EDI + 0x10]
009f7354 : MOV ESI,dword ptr [0x00d7c54c]
009f735a : LEA ECX,[ESP + 0x14]
009f735e : MOV dword ptr [ESP + 0x14],EAX
009f7362 : PUSH ECX
009f7363 : LEA ECX,[ESI + 0x40]
009f7366 : LEA EAX,[ESP + 0x1c]
009f736a : CALL 0x004437f0
009f736f : MOV ESI,dword ptr [ESI + 0x44]
009f7372 : MOV EAX,dword ptr [ESP + 0x18]
009f7376 : CMP EAX,ESI
009f7378 : JZ 0x009f7715
009f737e : MOV EBX,dword ptr [EAX + 0x10]
009f7381 : TEST EBX,EBX
009f7383 : JZ 0x009f7715
009f7389 : MOV EAX,dword ptr [EBX + 0x48]
009f738c : AND EAX,0x8
009f738f : XOR ECX,ECX
009f7391 : OR EAX,ECX
009f7393 : JNZ 0x009f7715
009f7399 : MOV EDX,dword ptr [0x00da9894]
009f739f : MOV EAX,[0x00d6f0f4]
009f73a4 : MOV ESI,dword ptr [EDX]
009f73a6 : PUSH EAX
009f73a7 : CALL 0x008eb260
009f73ac : MOV EDX,dword ptr [EBX]
009f73ae : MOV dword ptr [ESP + 0x18],EAX
009f73b2 : MOV EAX,dword ptr [EDX + 0x40]
009f73b5 : MOV ECX,EBX
009f73b7 : CALL EAX
009f73b9 : TEST EAX,EAX
009f73bb : JZ 0x009f73c2
009f73bd : MOV ESI,dword ptr [EBX + 0x50]
009f73c0 : JMP 0x009f7427
009f73c2 : LEA ECX,[ESP + 0x3c]
009f73c6 : PUSH ECX
009f73c7 : PUSH EDI
009f73c8 : CALL 0x0040e750
009f73cd : MOV dword ptr [ESP + 0xe0],0x0
009f73d8 : MOV EDX,dword ptr [EDI]
009f73da : MOV ESI,dword ptr [EAX + 0x8]
009f73dd : MOV EAX,dword ptr [EDX + 0x20]
009f73e0 : MOV ECX,EDI
009f73e2 : CALL EAX
009f73e4 : MOV EDX,dword ptr [EDI]
009f73e6 : MOV dword ptr [ESP + 0x14],EAX
009f73ea : MOV EAX,dword ptr [EDX + 0x30]
009f73ed : MOV ECX,EDI
009f73ef : CALL EAX
009f73f1 : MOVZX EAX,word ptr [EBX + 0x50]
009f73f5 : CMP AX,0x2
009f73f9 : JA 0x009f740f
009f73fb : MOV ECX,dword ptr [ESP + 0x14]
009f73ff : PUSH ECX
009f7400 : PUSH EAX
009f7401 : MOV EAX,ESI
009f7403 : CALL 0x009e7fa0
009f7408 : ADD ESP,0x8
009f740b : MOV ESI,EAX
009f740d : JMP 0x009f7412
009f740f : MOVZX ESI,AX
009f7412 : MOV dword ptr [ESP + 0xe0],0xffffffff
009f741d : LEA EDX,[ESP + 0x3c]
009f7421 : PUSH EDX
009f7422 : CALL 0x0040f3f0
009f7427 : TEST ESI,ESI
009f7429 : JNZ 0x009f7430
009f742b : MOV ESI,0x1
009f7430 : MOV EAX,dword ptr [ESP + 0x18]
009f7434 : MOVSS XMM0,dword ptr [0x00c10fc4]
009f743c : MOVSS dword ptr [ESP + 0x14],XMM0
009f7442 : MOV dword ptr [ESP + 0x1c],0x2710
009f744a : TEST EAX,EAX
009f744c : JZ 0x009f747e
009f744e : MOV EAX,dword ptr [EAX + 0x70]
009f7451 : PUSH EAX
009f7452 : CALL 0x004049b0
009f7457 : ADD ESP,0x4
009f745a : TEST EAX,EAX
009f745c : JZ 0x009f747e
009f745e : MOVZX EAX,word ptr [EAX + 0x44]
009f7462 : MOVZX EDX,AX
009f7465 : MOVZX ECX,AX
009f7468 : CVTSI2SS XMM0,EDX
009f746c : MULSS XMM0,dword ptr [0x00cdf398]
009f7474 : MOV dword ptr [ESP + 0x1c],ECX
009f7478 : MOVSS dword ptr [ESP + 0x14],XMM0
009f747e : MOV EAX,dword ptr [ESP + 0x1c]
009f7482 : MOV ECX,dword ptr [EBX + 0x54]
009f7485 : PUSH EAX
009f7486 : PUSH ECX
009f7487 : MOV EAX,ESI
009f7489 : CALL 0x00702910
009f748e : MOV EBX,EAX
009f7490 : ADD ESP,0x8
009f7493 : TEST EBX,EBX
009f7495 : JA 0x009f749c
009f7497 : MOV EBX,0x1
009f749c : MOV EDX,dword ptr [EDI]
009f749e : MOV EAX,dword ptr [EDX + 0x30]
009f74a1 : MOV ECX,EDI
009f74a3 : CALL EAX
009f74a5 : TEST AL,AL
009f74a7 : JZ 0x009f74ae
009f74a9 : MOV EBX,0xa
009f74ae : MOV ESI,dword ptr [ESP + 0x18]
009f74b2 : TEST ESI,ESI
009f74b4 : JZ 0x009f74de
009f74b6 : MOV EAX,dword ptr [ESI + 0x70]
009f74b9 : PUSH EAX
009f74ba : CALL 0x004049b0
009f74bf : ADD ESP,0x4
009f74c2 : TEST EAX,EAX
009f74c4 : JZ 0x009f74de
009f74c6 : MOV AL,byte ptr [EAX + 0x40]
009f74c9 : CMP AL,0x3
009f74cb : JZ 0x009f74d1
009f74cd : CMP AL,0x4
009f74cf : JNZ 0x009f74de
009f74d1 : MOV EDI,dword ptr [EDI + 0x10]
009f74d4 : PUSH EDI
009f74d5 : MOV EDI,ESI
009f74d7 : CALL 0x00962140
009f74dc : MOV EBX,EAX
009f74de : PUSH 0xca6990
009f74e3 : LEA ECX,[ESP + 0x24]
009f74e7 : CALL 0x00406460
009f74ec : MOV dword ptr [ESP + 0xe0],0x1
009f74f7 : PUSH 0x0
009f74f9 : PUSH EBX
009f74fa : LEA ECX,[ESP + 0x50]
009f74fe : CALL 0x0070c2d0
009f7503 : ADD ESP,0x8
009f7506 : MOV ESI,EAX
009f7508 : MOV byte ptr [ESP + 0xe0],0x2
009f7510 : LEA ECX,[ESP + 0x20]
009f7514 : PUSH ECX
009f7515 : MOV ECX,dword ptr [0x0172491c]
009f751b : LEA EDI,[ESP + 0xa0]
009f7522 : CALL 0x0081d120
009f7527 : MOV byte ptr [ESP + 0xe0],0x3
009f752f : LEA EDX,[ESP + 0xb8]
009f7536 : PUSH ESI
009f7537 : PUSH EDX
009f7538 : MOV ECX,EAX
009f753a : CALL 0x00403450
009f753f : ADD ESP,0x8
009f7542 : MOV byte ptr [ESP + 0xe0],0x4
009f754a : MOV EBX,dword ptr [EBP + 0x8]
009f754d : OR EDI,0xffffffff
009f7550 : PUSH EDI
009f7551 : PUSH 0x0
009f7553 : PUSH EAX
009f7554 : MOV ECX,EBX
009f7556 : CALL 0x00405eb0
009f755b : MOV byte ptr [ESP + 0xe0],0x3
009f7563 : LEA ECX,[ESP + 0xb8]
009f756a : CALL 0x00406560
009f756f : MOV byte ptr [ESP + 0xe0],0x2
009f7577 : LEA ECX,[ESP + 0x9c]
009f757e : CALL 0x00406560
009f7583 : MOV byte ptr [ESP + 0xe0],0x1
009f758b : LEA ECX,[ESP + 0x48]
009f758f : CALL 0x00406560
009f7594 : MOV dword ptr [ESP + 0xe0],EDI
009f759b : LEA ECX,[ESP + 0x20]
009f759f : CALL 0x00406560
009f75a4 : MOV EAX,[0x0172491c]
009f75a9 : PUSH EAX
009f75aa : MOV ECX,0xca69b8
009f75af : LEA ESI,[ESP + 0x68]
009f75b3 : CALL 0x0081cbe0
009f75b8 : MOV dword ptr [ESP + 0xe0],0x5
009f75c3 : CMP dword ptr [EAX + 0x18],0x8
009f75c7 : JC 0x009f75ce
009f75c9 : MOV EAX,dword ptr [EAX + 0x4]
009f75cc : JMP 0x009f75d1
009f75ce : ADD EAX,0x4
009f75d1 : PUSH EAX
009f75d2 : PUSH 0xca693c
009f75d7 : LEA ESI,[ESP + 0x88]
009f75de : CALL 0x00404750
009f75e3 : ADD ESP,0x8
009f75e6 : MOV byte ptr [ESP + 0xe0],0x6
009f75ee : PUSH EDI
009f75ef : PUSH 0x0
009f75f1 : PUSH EAX
009f75f2 : MOV ECX,EBX
009f75f4 : CALL 0x00405c30
009f75f9 : MOV byte ptr [ESP + 0xe0],0x5
009f7601 : MOV ECX,ESI
009f7603 : CALL 0x00406560
009f7608 : MOV dword ptr [ESP + 0xe0],EDI
009f760f : LEA ECX,[ESP + 0x64]
009f7613 : CALL 0x00406560
009f7618 : MOVSS XMM0,dword ptr [0x00c10fc4]
009f7620 : SUBSS XMM0,dword ptr [ESP + 0x14]
009f7626 : MULSS XMM0,dword ptr [0x00cdf230]
009f762e : MOVSS XMM1,dword ptr [0x00cdf350]
009f7636 : ANDPS XMM0,XMM1
009f7639 : CVTTSS2SI ESI,XMM0
009f763d : TEST ESI,ESI
009f763f : JLE 0x009f770a
009f7645 : PUSH 0xca69c0
009f764a : LEA ECX,[ESP + 0x24]
009f764e : CALL 0x00406460
009f7653 : MOV dword ptr [ESP + 0xe0],0x7
009f765e : LEA ECX,[ESP + 0x20]
009f7662 : PUSH ECX
009f7663 : MOV ECX,dword ptr [0x0172491c]
009f7669 : LEA EDI,[ESP + 0x4c]
009f766d : CALL 0x0081d120
009f7672 : MOV byte ptr [ESP + 0xe0],0x8
009f767a : CMP dword ptr [EAX + 0x18],0x8
009f767e : JC 0x009f7685
009f7680 : MOV EAX,dword ptr [EAX + 0x4]
009f7683 : JMP 0x009f7688
009f7685 : ADD EAX,0x4
009f7688 : PUSH ESI
009f7689 : PUSH EAX
009f768a : LEA ESI,[ESP + 0x88]
009f7691 : CALL 0x00404750
009f7696 : MOV byte ptr [ESP + 0xe8],0x9
009f769e : PUSH EAX
009f769f : LEA EDX,[ESP + 0x70]
009f76a3 : PUSH EDX
009f76a4 : MOV EDX,0xca69e8
009f76a9 : CALL 0x00403380
009f76ae : ADD ESP,0x10
009f76b1 : MOV byte ptr [ESP + 0xe0],0xa
009f76b9 : PUSH -0x1
009f76bb : PUSH 0x0
009f76bd : PUSH EAX
009f76be : MOV ECX,EBX
009f76c0 : CALL 0x00405c30
009f76c5 : MOV byte ptr [ESP + 0xe0],0x9
009f76cd : LEA ECX,[ESP + 0x64]
009f76d1 : CALL 0x00406560
009f76d6 : MOV byte ptr [ESP + 0xe0],0x8
009f76de : MOV ECX,ESI
009f76e0 : CALL 0x00406560
009f76e5 : MOV byte ptr [ESP + 0xe0],0x7
009f76ed : LEA ECX,[ESP + 0x48]
009f76f1 : CALL 0x00406560
009f76f6 : MOV dword ptr [ESP + 0xe0],0xffffffff
009f7701 : LEA ECX,[ESP + 0x20]
009f7705 : CALL 0x00406560
009f770a : PUSH EBX
009f770b : MOV EDX,0xca69ec
009f7710 : CALL 0x00404980
009f7715 : MOV ECX,dword ptr [ESP + 0xd8]
009f771c : MOV dword ptr FS:[0x0],ECX
009f7723 : POP ECX
009f7724 : POP EDI
009f7725 : POP ESI
009f7726 : POP EBX
009f7727 : MOV ESP,EBP
009f7729 : POP EBP
009f772a : RET
