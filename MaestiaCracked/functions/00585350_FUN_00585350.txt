PROGRAM  : Maestia.exe
FUNCTION : FUN_00585350
ENTRY    : 00585350
BODY     : [[00585350, 00585398] [005853a0, 005853ed]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00585350(undefined4 param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  int in_ECX;
  uint uVar5;
  
  uVar2 = *(uint *)(param_2 + 0x38);
  if (uVar2 < *(uint *)(in_ECX + 0x38)) {
    uVar5 = uVar2;
    if (*(uint *)(in_ECX + 0x3c) >> 1 <= uVar2) goto LAB_00585387;
  }
  else {
    if (uVar2 < *(uint *)(in_ECX + 0x3c)) goto LAB_00585387;
    uVar5 = (uVar2 >> 2) + uVar2;
  }
  FUN_005b5ef0((int *)(in_ECX + 0x34),uVar5);
LAB_00585387:
  *(uint *)(in_ECX + 0x38) = uVar2;
  uVar2 = *(uint *)(in_ECX + 0x38);
  uVar5 = 0;
  if (uVar2 != 0) {
    do {
      iVar1 = uVar5 * 4;
      if (*(int *)(iVar1 + *(int *)(param_2 + 0x34)) != 0) {
        iVar3 = FUN_00515840(0x10,0);
        if (iVar3 == 0) {
          uVar4 = 0;
        }
        else {
          uVar4 = FUN_005266c0(*(undefined4 *)(*(int *)(param_2 + 0x34) + iVar1));
        }
        *(undefined4 *)(iVar1 + *(int *)(in_ECX + 0x34)) = uVar4;
      }
      uVar5 = uVar5 + 1;
    } while (uVar5 < uVar2);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00585350 : PUSH ECX
00585351 : MOV EAX,dword ptr [ESP + 0xc]
00585355 : PUSH EBX
00585356 : PUSH EBP
00585357 : PUSH ESI
00585358 : MOV ESI,dword ptr [EAX + 0x38]
0058535b : MOV EBX,ECX
0058535d : CMP ESI,dword ptr [EBX + 0x38]
00585360 : PUSH EDI
00585361 : LEA EDI,[EBX + 0x34]
00585364 : JNC 0x00585372
00585366 : MOV ECX,dword ptr [EDI + 0x8]
00585369 : SHR ECX,0x1
0058536b : CMP ESI,ECX
0058536d : JNC 0x00585387
0058536f : PUSH ESI
00585370 : JMP 0x0058537f
00585372 : CMP ESI,dword ptr [EDI + 0x8]
00585375 : JC 0x00585387
00585377 : MOV EDX,ESI
00585379 : SHR EDX,0x2
0058537c : ADD EDX,ESI
0058537e : PUSH EDX
0058537f : PUSH EDI
00585380 : MOV ECX,EDI
00585382 : CALL 0x005b5ef0
00585387 : MOV dword ptr [EDI + 0x4],ESI
0058538a : MOV EAX,dword ptr [EBX + 0x38]
0058538d : XOR EBP,EBP
0058538f : MOV dword ptr [ESP + 0x10],EAX
00585393 : TEST EAX,EAX
00585395 : JBE 0x005853e6
00585397 : JMP 0x005853a0
005853a0 : MOV EBX,dword ptr [ESP + 0x1c]
005853a4 : MOV ECX,dword ptr [EBX + 0x34]
005853a7 : LEA ESI,[EBP*0x4 + 0x0]
005853ae : CMP dword ptr [ESI + ECX*0x1],0x0
005853b2 : JZ 0x005853e1
005853b4 : MOV ECX,dword ptr [ESP + 0x18]
005853b8 : PUSH 0x0
005853ba : PUSH 0x10
005853bc : CALL 0x00515840
005853c1 : TEST EAX,EAX
005853c3 : JZ 0x005853d6
005853c5 : MOV EDX,dword ptr [EBX + 0x34]
005853c8 : ADD EDX,ESI
005853ca : MOV EDX,dword ptr [EDX]
005853cc : PUSH EDX
005853cd : MOV ECX,EAX
005853cf : CALL 0x005266c0
005853d4 : JMP 0x005853d8
005853d6 : XOR EAX,EAX
005853d8 : MOV ECX,dword ptr [EDI]
005853da : MOV dword ptr [ESI + ECX*0x1],EAX
005853dd : MOV EAX,dword ptr [ESP + 0x10]
005853e1 : INC EBP
005853e2 : CMP EBP,EAX
005853e4 : JC 0x005853a0
005853e6 : POP EDI
005853e7 : POP ESI
005853e8 : POP EBP
005853e9 : POP EBX
005853ea : POP ECX
005853eb : RET 0x8
