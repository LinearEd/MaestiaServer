PROGRAM  : Maestia.exe
FUNCTION : FUN_008fede0
ENTRY    : 008fede0
BODY     : [[008fede0, 008ff0cf] [008ff0d5, 008ff130]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008fede0(int param_1,undefined4 param_2)

{
  short sVar1;
  ushort uVar2;
  short *psVar3;
  ushort *puVar4;
  int iVar5;
  int in_ECX;
  ushort *puVar6;
  short *psVar7;
  bool bVar8;
  int local_84;
  undefined1 local_80 [4];
  undefined2 local_7c;
  undefined4 local_6c;
  uint local_68;
  undefined1 local_64 [4];
  int local_60;
  undefined4 local_5c;
  undefined4 uStack_58;
  undefined2 local_54;
  undefined1 uStack_52;
  undefined1 uStack_51;
  undefined2 local_50;
  undefined4 uStack_4e;
  undefined2 uStack_4a;
  undefined4 uStack_48;
  ulonglong uStack_44;
  uint local_3c;
  undefined4 local_34;
  undefined4 uStack_24;
  uint local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b525ff;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)&local_84;
  ExceptionList = &local_14;
  FUN_00403dd0(param_2,DAT_00d66fa0 ^ (uint)&stack0xffffff70);
  local_c = 0;
  local_68 = 7;
  local_6c = 0;
  local_7c = 0;
  FUN_00406360(&DAT_00c62518,1);
  local_c._0_1_ = 1;
  psVar7 = local_34;
  if (local_20 < 8) {
    psVar7 = (short *)&local_34;
  }
  local_3c = 7;
  uStack_44 = (ulonglong)(uint)uStack_44;
  local_50 = 0;
  psVar3 = psVar7;
  do {
    sVar1 = *psVar3;
    psVar3 = psVar3 + 1;
  } while (sVar1 != 0);
  FUN_00406360(psVar7,(int)psVar3 - (int)(psVar7 + 1) >> 1);
  local_c._0_1_ = 2;
  FUN_0070cd60(local_64,&local_54,local_80,0);
  local_c = CONCAT31(local_c._1_3_,4);
  if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_3c = 7;
  uStack_44 = uStack_44 & 0xffffffff;
  local_50 = 0;
  local_c._0_1_ = 5;
  if (7 < local_68) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_7c = 0;
  local_68 = 7;
  local_6c = 0;
  if (*(uint *)(param_1 + 0x18) < 8) {
    puVar4 = (ushort *)(param_1 + 4);
  }
  else {
    puVar4 = *(ushort **)(param_1 + 4);
  }
  puVar6 = &DAT_00c6251c;
  do {
    uVar2 = *puVar4;
    bVar8 = uVar2 < *puVar6;
    if (uVar2 != *puVar6) {
LAB_008fef56:
      iVar5 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
      goto LAB_008fef5b;
    }
    if (uVar2 == 0) break;
    uVar2 = puVar4[1];
    bVar8 = uVar2 < puVar6[1];
    if (uVar2 != puVar6[1]) goto LAB_008fef56;
    puVar4 = puVar4 + 2;
    puVar6 = puVar6 + 2;
  } while (uVar2 != 0);
  iVar5 = 0;
LAB_008fef5b:
  if (iVar5 == 0) {
    if (DAT_01724864 != 0) {
      local_84 = 0;
      FUN_00404400(&local_84);
      if (local_84 != 0) {
        iVar5 = *DAT_00da9894;
        if ((iVar5 != 0) && (*(int *)(iVar5 + 0x114) != 0)) {
          (**(code **)(**(int **)(iVar5 + 0x114) + 4))
                    (*(int **)(iVar5 + 0x114),"mc_timeattackhud.StartGame","%d,%d,%d",
                     *(undefined4 *)(in_ECX + 0x3c),*(undefined1 *)(in_ECX + 0x4a),
                     *(undefined2 *)(local_84 + 0x450));
        }
        FUN_008fd410(in_ECX);
        uStack_4a = 0;
        local_54 = 0;
        uStack_52 = 0x3f;
        uStack_51 = 0x11;
        uStack_4e = 0;
        uStack_48 = 0;
        uStack_44 = 0;
        local_3c = local_3c & 0xffff0000;
        FUN_008fea90(&local_54);
        goto LAB_008ff0a7;
      }
    }
    FUN_00406460(L"Invalid ZoneID");
    local_c._0_1_ = 6;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaGuiTimeAttackDungeonHud::OnActionScriptCallback",0x7a,local_80);
    }
    local_c = CONCAT31(local_c._1_3_,5);
    if (7 < local_68) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_68 = 7;
    local_6c = 0;
    local_7c = 0;
    local_c = (uint)local_c._1_3_ << 8;
    FUN_004042c0();
    local_c = 0xffffffff;
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
LAB_008ff0a7:
    local_c = (uint)local_c._1_3_ << 8;
    if (local_60 != 0) {
      FUN_00405450(local_84);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_60 = 0;
    local_5c = 0;
    uStack_58 = 0;
    local_c = 0xffffffff;
    if (7 < local_20) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_34 = (short *)((uint)local_34._2_2_ << 0x10);
  local_c = 0xffffffff;
  uStack_24 = 0;
  local_20 = 7;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)&local_84);
  return;
}



============================================================
DISASSEMBLY
============================================================
008fede0 : PUSH EBP
008fede1 : MOV EBP,ESP
008fede3 : AND ESP,0xfffffff8
008fede6 : PUSH -0x1
008fede8 : PUSH 0xb525ff
008feded : MOV EAX,FS:[0x0]
008fedf3 : PUSH EAX
008fedf4 : SUB ESP,0x70
008fedf7 : MOV EAX,[0x00d66fa0]
008fedfc : XOR EAX,ESP
008fedfe : MOV dword ptr [ESP + 0x68],EAX
008fee02 : PUSH EBX
008fee03 : PUSH ESI
008fee04 : PUSH EDI
008fee05 : MOV EAX,[0x00d66fa0]
008fee0a : XOR EAX,ESP
008fee0c : PUSH EAX
008fee0d : LEA EAX,[ESP + 0x80]
008fee14 : MOV FS:[0x0],EAX
008fee1a : MOV EAX,dword ptr [EBP + 0xc]
008fee1d : PUSH EAX
008fee1e : LEA ESI,[ESP + 0x60]
008fee22 : MOV EDI,ECX
008fee24 : CALL 0x00403dd0
008fee29 : ADD ESP,0x4
008fee2c : XOR EBX,EBX
008fee2e : MOV dword ptr [ESP + 0x88],EBX
008fee35 : PUSH 0x1
008fee37 : XOR EAX,EAX
008fee39 : MOV ESI,0x7
008fee3e : PUSH 0xc62518
008fee43 : LEA ECX,[ESP + 0x1c]
008fee47 : MOV dword ptr [ESP + 0x34],ESI
008fee4b : MOV dword ptr [ESP + 0x30],EBX
008fee4f : MOV word ptr [ESP + 0x20],AX
008fee54 : CALL 0x00406360
008fee59 : MOV byte ptr [ESP + 0x88],0x1
008fee61 : CMP dword ptr [ESP + 0x74],0x8
008fee66 : MOV EDX,dword ptr [ESP + 0x60]
008fee6a : JNC 0x008fee70
008fee6c : LEA EDX,[ESP + 0x60]
008fee70 : XOR ECX,ECX
008fee72 : MOV EAX,EDX
008fee74 : MOV dword ptr [ESP + 0x58],ESI
008fee78 : MOV dword ptr [ESP + 0x54],EBX
008fee7c : MOV word ptr [ESP + 0x44],CX
008fee81 : LEA ESI,[EAX + 0x2]
008fee84 : MOV CX,word ptr [EAX]
008fee87 : ADD EAX,0x2
008fee8a : CMP CX,BX
008fee8d : JNZ 0x008fee84
008fee8f : SUB EAX,ESI
008fee91 : SAR EAX,0x1
008fee93 : PUSH EAX
008fee94 : PUSH EDX
008fee95 : LEA ECX,[ESP + 0x48]
008fee99 : CALL 0x00406360
008fee9e : MOV byte ptr [ESP + 0x88],0x2
008feea6 : PUSH EBX
008feea7 : LEA EDX,[ESP + 0x18]
008feeab : PUSH EDX
008feeac : LEA EAX,[ESP + 0x48]
008feeb0 : PUSH EAX
008feeb1 : LEA ECX,[ESP + 0x3c]
008feeb5 : PUSH ECX
008feeb6 : CALL 0x0070cd60
008feebb : ADD ESP,0x10
008feebe : MOV byte ptr [ESP + 0x88],0x4
008feec6 : MOV ESI,0x8
008feecb : CMP dword ptr [ESP + 0x58],ESI
008feecf : JC 0x008feeda
008feed1 : MOV ECX,dword ptr [ESP + 0x44]
008feed5 : CALL 0x006f04e0
008feeda : XOR EDX,EDX
008feedc : MOV dword ptr [ESP + 0x58],0x7
008feee4 : MOV dword ptr [ESP + 0x54],EBX
008feee8 : MOV word ptr [ESP + 0x44],DX
008feeed : MOV byte ptr [ESP + 0x88],0x5
008feef5 : CMP dword ptr [ESP + 0x2c],ESI
008feef9 : JC 0x008fef04
008feefb : MOV ECX,dword ptr [ESP + 0x18]
008feeff : CALL 0x006f04e0
008fef04 : XOR EAX,EAX
008fef06 : MOV word ptr [ESP + 0x18],AX
008fef0b : MOV EAX,dword ptr [EBP + 0x8]
008fef0e : MOV dword ptr [ESP + 0x2c],0x7
008fef16 : MOV dword ptr [ESP + 0x28],EBX
008fef1a : CMP dword ptr [EAX + 0x18],ESI
008fef1d : JC 0x008fef24
008fef1f : MOV EAX,dword ptr [EAX + 0x4]
008fef22 : JMP 0x008fef27
008fef24 : ADD EAX,0x4
008fef27 : MOV ECX,0xc6251c
008fef2c : LEA ESP,[ESP]
008fef30 : MOV DX,word ptr [EAX]
008fef33 : CMP DX,word ptr [ECX]
008fef36 : JNZ 0x008fef56
008fef38 : CMP DX,BX
008fef3b : JZ 0x008fef52
008fef3d : MOV DX,word ptr [EAX + 0x2]
008fef41 : CMP DX,word ptr [ECX + 0x2]
008fef45 : JNZ 0x008fef56
008fef47 : ADD EAX,0x4
008fef4a : ADD ECX,0x4
008fef4d : CMP DX,BX
008fef50 : JNZ 0x008fef30
008fef52 : XOR EAX,EAX
008fef54 : JMP 0x008fef5b
008fef56 : SBB EAX,EAX
008fef58 : SBB EAX,-0x1
008fef5b : CMP EAX,EBX
008fef5d : JNZ 0x008ff0a7
008fef63 : MOV ECX,dword ptr [0x01724864]
008fef69 : MOVZX ESI,word ptr [EDI + 0x38]
008fef6d : CMP ECX,EBX
008fef6f : JZ 0x008fef8b
008fef71 : LEA EDX,[ESP + 0x10]
008fef75 : PUSH EDX
008fef76 : MOV dword ptr [ESP + 0x14],EBX
008fef7a : CALL 0x00404400
008fef7f : MOV ECX,dword ptr [ESP + 0x10]
008fef83 : CMP ECX,EBX
008fef85 : JNZ 0x008ff021
008fef8b : PUSH 0xc6252c
008fef90 : LEA ECX,[ESP + 0x18]
008fef94 : CALL 0x00406460
008fef99 : MOV byte ptr [ESP + 0x88],0x6
008fefa1 : MOV EAX,[0x00da98e8]
008fefa6 : MOV ECX,dword ptr [EAX]
008fefa8 : CMP ECX,EBX
008fefaa : JZ 0x008fefbf
008fefac : MOV EDX,dword ptr [ECX]
008fefae : MOV EDX,dword ptr [EDX + 0x14]
008fefb1 : LEA EAX,[ESP + 0x14]
008fefb5 : PUSH EAX
008fefb6 : PUSH 0x7a
008fefb8 : PUSH 0xc62550
008fefbd : CALL EDX
008fefbf : MOV byte ptr [ESP + 0x88],0x5
008fefc7 : CMP dword ptr [ESP + 0x2c],0x8
008fefcc : JC 0x008fefd7
008fefce : MOV ECX,dword ptr [ESP + 0x18]
008fefd2 : CALL 0x006f04e0
008fefd7 : XOR EAX,EAX
008fefd9 : MOV dword ptr [ESP + 0x2c],0x7
008fefe1 : MOV dword ptr [ESP + 0x28],EBX
008fefe5 : MOV word ptr [ESP + 0x18],AX
008fefea : MOV byte ptr [ESP + 0x88],BL
008feff1 : LEA ESI,[ESP + 0x30]
008feff5 : CALL 0x004042c0
008feffa : MOV dword ptr [ESP + 0x88],0xffffffff
008ff005 : CMP dword ptr [ESP + 0x74],0x8
008ff00a : JC 0x008ff015
008ff00c : MOV ECX,dword ptr [ESP + 0x60]
008ff010 : CALL 0x006f04e0
008ff015 : XOR ECX,ECX
008ff017 : MOV word ptr [ESP + 0x60],CX
008ff01c : JMP 0x008ff102
008ff021 : MOV EDX,dword ptr [0x00da9894]
008ff027 : MOV EAX,dword ptr [EDX]
008ff029 : CMP EAX,EBX
008ff02b : JZ 0x008ff061
008ff02d : CMP dword ptr [EAX + 0x114],EBX
008ff033 : JZ 0x008ff061
008ff035 : MOVZX ECX,word ptr [ECX + 0x450]
008ff03c : MOV EAX,dword ptr [EAX + 0x114]
008ff042 : MOV EDX,dword ptr [EAX]
008ff044 : MOV EDX,dword ptr [EDX + 0x4]
008ff047 : PUSH ECX
008ff048 : MOVZX ECX,byte ptr [EDI + 0x4a]
008ff04c : PUSH ECX
008ff04d : MOV ECX,dword ptr [EDI + 0x3c]
008ff050 : PUSH ECX
008ff051 : PUSH 0xc625b8
008ff056 : PUSH 0xc625c4
008ff05b : PUSH EAX
008ff05c : CALL EDX
008ff05e : ADD ESP,0x18
008ff061 : PUSH EDI
008ff062 : CALL 0x008fd410
008ff067 : XOR ECX,ECX
008ff069 : LEA EDX,[ESP + 0x40]
008ff06d : XOR EAX,EAX
008ff06f : MOV word ptr [ESP + 0x4a],CX
008ff074 : PXOR XMM0,XMM0
008ff078 : PUSH EDX
008ff079 : MOV ECX,EDI
008ff07b : MOV word ptr [ESP + 0x44],AX
008ff080 : MOV byte ptr [ESP + 0x46],0x3f
008ff085 : MOV byte ptr [ESP + 0x47],0x11
008ff08a : MOV dword ptr [ESP + 0x4a],EBX
008ff08e : MOV dword ptr [ESP + 0x50],EBX
008ff092 : MOVQ qword ptr [ESP + 0x54],XMM0
008ff098 : MOV word ptr [ESP + 0x5c],BX
008ff09d : CALL 0x008fea90
008ff0a2 : MOV ESI,0x8
008ff0a7 : MOV byte ptr [ESP + 0x88],BL
008ff0ae : MOV EAX,dword ptr [ESP + 0x34]
008ff0b2 : CMP EAX,EBX
008ff0b4 : JZ 0x008ff0d5
008ff0b6 : MOV ECX,dword ptr [ESP + 0x10]
008ff0ba : MOV EDI,dword ptr [ESP + 0x38]
008ff0be : PUSH ECX
008ff0bf : CALL 0x00405450
008ff0c4 : MOV ECX,dword ptr [ESP + 0x38]
008ff0c8 : ADD ESP,0x4
008ff0cb : CALL 0x006f04e0
008ff0d5 : MOV dword ptr [ESP + 0x34],EBX
008ff0d9 : MOV dword ptr [ESP + 0x38],EBX
008ff0dd : MOV dword ptr [ESP + 0x3c],EBX
008ff0e1 : MOV dword ptr [ESP + 0x88],0xffffffff
008ff0ec : CMP dword ptr [ESP + 0x74],ESI
008ff0f0 : JC 0x008ff0fb
008ff0f2 : MOV ECX,dword ptr [ESP + 0x60]
008ff0f6 : CALL 0x006f04e0
008ff0fb : XOR EDX,EDX
008ff0fd : MOV word ptr [ESP + 0x60],DX
008ff102 : MOV dword ptr [ESP + 0x70],EBX
008ff106 : MOV dword ptr [ESP + 0x74],0x7
008ff10e : MOV ECX,dword ptr [ESP + 0x80]
008ff115 : MOV dword ptr FS:[0x0],ECX
008ff11c : POP ECX
008ff11d : POP EDI
008ff11e : POP ESI
008ff11f : POP EBX
008ff120 : MOV ECX,dword ptr [ESP + 0x68]
008ff124 : XOR ECX,ESP
008ff126 : CALL 0x00633e6b
008ff12b : MOV ESP,EBP
008ff12d : POP EBP
008ff12e : RET 0x8
