PROGRAM  : Maestia.exe
FUNCTION : FUN_004ff4d0
ENTRY    : 004ff4d0
BODY     : [[004ff4d0, 004ff59c]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_004ff4d0(int *param_1)

{
  int iVar1;
  int in_EAX;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  bool bVar6;
  
  iVar4 = 0;
  if (*(int *)(in_EAX + 4) != 0) {
    iVar1 = *param_1;
    iVar3 = *(int *)(in_EAX + 4);
    do {
      piVar2 = (int *)(*(int *)(in_EAX + 0x10) + iVar3);
      if ((iVar1 == *piVar2) && (param_1[1] == piVar2[1])) {
        if (iVar3 != 0) goto LAB_004ff580;
        break;
      }
      iVar4 = *piVar2;
      if (iVar1 == iVar4) {
        bVar6 = SBORROW4(param_1[1],piVar2[1]);
        iVar4 = param_1[1] - piVar2[1];
      }
      else {
        bVar6 = SBORROW4(iVar1,iVar4);
        iVar4 = iVar1 - iVar4;
      }
      if (bVar6 == iVar4 < 0) {
        iVar5 = piVar2[0x14];
      }
      else {
        iVar5 = piVar2[0x13];
      }
      iVar4 = iVar3;
      iVar3 = iVar5;
    } while (iVar5 != 0);
  }
  iVar3 = FUN_004ff600(param_1,iVar4);
  if (iVar4 == 0) {
    *(int *)(in_EAX + 4) = iVar3;
  }
  else {
    iVar1 = *param_1;
    iVar5 = *(int *)(*(int *)(in_EAX + 0x10) + iVar4);
    iVar4 = *(int *)(in_EAX + 0x10) + iVar4;
    if (iVar1 == iVar5) {
      bVar6 = SBORROW4(param_1[1],*(int *)(iVar4 + 4));
      iVar1 = param_1[1] - *(int *)(iVar4 + 4);
    }
    else {
      bVar6 = SBORROW4(iVar1,iVar5);
      iVar1 = iVar1 - iVar5;
    }
    if (bVar6 == iVar1 < 0) {
      *(int *)(iVar4 + 0x50) = iVar3;
    }
    else {
      *(int *)(iVar4 + 0x4c) = iVar3;
    }
  }
  FUN_004feeb0();
  *(int *)(in_EAX + 8) = *(int *)(in_EAX + 8) + 1;
  if (iVar3 == 0) {
    return 8;
  }
LAB_004ff580:
  return *(int *)(in_EAX + 0x10) + iVar3 + 8;
}



============================================================
DISASSEMBLY
============================================================
004ff4d0 : PUSH EBX
004ff4d1 : PUSH EBP
004ff4d2 : PUSH ESI
004ff4d3 : PUSH EDI
004ff4d4 : MOV EDI,EAX
004ff4d6 : MOV ESI,dword ptr [EDI + 0x4]
004ff4d9 : XOR EBX,EBX
004ff4db : TEST ESI,ESI
004ff4dd : JZ 0x004ff52b
004ff4df : MOV ECX,dword ptr [ESP + 0x14]
004ff4e3 : MOV EBP,dword ptr [ECX]
004ff4e5 : MOV EAX,dword ptr [EDI + 0x10]
004ff4e8 : ADD EAX,ESI
004ff4ea : CMP EBP,dword ptr [EAX]
004ff4ec : JNZ 0x004ff4f6
004ff4ee : MOV EDX,dword ptr [ECX + 0x4]
004ff4f1 : CMP EDX,dword ptr [EAX + 0x4]
004ff4f4 : JZ 0x004ff525
004ff4f6 : MOV EDX,dword ptr [EAX]
004ff4f8 : MOV EBX,ESI
004ff4fa : CMP EBP,EDX
004ff4fc : JNZ 0x004ff508
004ff4fe : MOV EDX,dword ptr [ECX + 0x4]
004ff501 : XOR ECX,ECX
004ff503 : CMP EDX,dword ptr [EAX + 0x4]
004ff506 : JMP 0x004ff50c
004ff508 : XOR ECX,ECX
004ff50a : CMP EBP,EDX
004ff50c : SETL CL
004ff50f : TEST CL,CL
004ff511 : JZ 0x004ff518
004ff513 : MOV ESI,dword ptr [EAX + 0x4c]
004ff516 : JMP 0x004ff51b
004ff518 : MOV ESI,dword ptr [EAX + 0x50]
004ff51b : TEST ESI,ESI
004ff51d : JZ 0x004ff52b
004ff51f : MOV ECX,dword ptr [ESP + 0x14]
004ff523 : JMP 0x004ff4e5
004ff525 : TEST ESI,ESI
004ff527 : JNZ 0x004ff580
004ff529 : JMP 0x004ff52f
004ff52b : MOV ECX,dword ptr [ESP + 0x14]
004ff52f : PUSH EBX
004ff530 : PUSH ECX
004ff531 : CALL 0x004ff600
004ff536 : MOV ESI,EAX
004ff538 : TEST EBX,EBX
004ff53a : JNZ 0x004ff541
004ff53c : MOV dword ptr [EDI + 0x4],ESI
004ff53f : JMP 0x004ff570
004ff541 : MOV EAX,dword ptr [EDI + 0x10]
004ff544 : MOV EDX,dword ptr [ESP + 0x14]
004ff548 : MOV ECX,dword ptr [EDX]
004ff54a : MOV EBP,dword ptr [EAX + EBX*0x1]
004ff54d : ADD EAX,EBX
004ff54f : CMP ECX,EBP
004ff551 : JNZ 0x004ff55d
004ff553 : MOV ECX,dword ptr [EDX + 0x4]
004ff556 : XOR EDX,EDX
004ff558 : CMP ECX,dword ptr [EAX + 0x4]
004ff55b : JMP 0x004ff561
004ff55d : XOR EDX,EDX
004ff55f : CMP ECX,EBP
004ff561 : SETL DL
004ff564 : TEST DL,DL
004ff566 : JZ 0x004ff56d
004ff568 : MOV dword ptr [EAX + 0x4c],ESI
004ff56b : JMP 0x004ff570
004ff56d : MOV dword ptr [EAX + 0x50],ESI
004ff570 : MOV EAX,EBX
004ff572 : MOV EDX,EDI
004ff574 : CALL 0x004feeb0
004ff579 : INC dword ptr [EDI + 0x8]
004ff57c : TEST ESI,ESI
004ff57e : JZ 0x004ff58f
004ff580 : MOV EAX,dword ptr [EDI + 0x10]
004ff583 : POP EDI
004ff584 : ADD EAX,ESI
004ff586 : POP ESI
004ff587 : POP EBP
004ff588 : ADD EAX,0x8
004ff58b : POP EBX
004ff58c : RET 0x4
004ff58f : POP EDI
004ff590 : POP ESI
004ff591 : POP EBP
004ff592 : XOR EAX,EAX
004ff594 : MOV EAX,0x8
004ff599 : POP EBX
004ff59a : RET 0x4
