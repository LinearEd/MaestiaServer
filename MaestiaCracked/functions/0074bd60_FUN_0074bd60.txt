PROGRAM  : Maestia.exe
FUNCTION : FUN_0074bd60
ENTRY    : 0074bd60
BODY     : [[0074bd60, 0074c0d9]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0074bd60(void *param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  char cVar4;
  int iVar5;
  float fVar6;
  float fVar7;
  wchar_t *pwVar8;
  undefined1 local_a0 [68];
  float local_5c;
  float local_58;
  undefined4 local_54;
  float local_50;
  float local_4c;
  undefined4 local_48;
  int local_44;
  int local_40;
  int local_3c;
  int local_38;
  float local_2c;
  float local_28;
  undefined4 local_24;
  undefined4 local_20;
  float local_1c;
  float local_18;
  undefined4 local_14;
  undefined4 local_10;
  int local_c;
  
  iVar3 = (int)param_1;
  piVar1 = *(int **)(DAT_017251ac + 0x18);
  if (piVar1 == (int *)0x0) {
    pwVar8 = L"[AvaUITextureNamePad::SetVB] Failed pDevice";
  }
  else {
    piVar2 = *(int **)((int)param_1 + 0x1d8);
    if (piVar2 != (int *)0x0) {
      param_1 = (void *)0x0;
      (**(code **)(*piVar2 + 0x2c))(piVar2,0,0,&param_1,0);
      _memset((void *)(iVar3 + 0x1dc),0,0x50);
      iVar5 = FUN_00405bb0(&DAT_00c093f4);
      if (iVar5 == 0) {
        cVar4 = FUN_004049e0();
        fVar7 = (float)*(int *)(iVar3 + 0x244);
        fVar6 = (float)*(int *)(iVar3 + 0x240);
        if (cVar4 != '\0') {
          fVar7 = fVar7 * 0.05;
          fVar6 = fVar6 * 0.05;
        }
      }
      else {
        (**(code **)(*piVar1 + 0xc0))(piVar1,&local_44);
        FUN_0040efe0(&local_5c,0xc,2,&LAB_00801ef0);
        fVar6 = (float)-local_44;
        if (-local_44 < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        fVar7 = (float)local_3c;
        if (local_3c < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        local_c = -local_40;
        local_5c = (((fVar6 * 2.0) / fVar7 - 1.0) - *(float *)(iVar3 + 0x39c)) /
                   *(float *)(iVar3 + 0x37c);
        fVar6 = (float)local_c;
        if (local_c < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        fVar7 = (float)local_38;
        if (local_38 < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        local_54 = 0x3f800000;
        local_58 = (-((fVar6 * 2.0) / fVar7 - 1.0) - *(float *)(iVar3 + 0x3a0)) /
                   *(float *)(iVar3 + 0x390);
        D3DXMatrixInverse(local_a0,0,iVar3 + 0x33c);
        local_1c = 0.0;
        local_18 = 0.0;
        local_14 = 0;
        local_10 = 0;
        D3DXVec3Transform(&local_1c,&local_5c,local_a0);
        local_44 = *(int *)(iVar3 + 0x240) - local_44;
        fVar6 = (float)local_44;
        if (local_44 < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        fVar7 = (float)local_3c;
        if (local_3c < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        local_c = *(int *)(iVar3 + 0x244) - local_40;
        local_50 = (((fVar6 * 2.0) / fVar7 - 1.0) - *(float *)(iVar3 + 0x39c)) /
                   *(float *)(iVar3 + 0x37c);
        fVar6 = (float)local_c;
        if (local_c < 0) {
          fVar6 = fVar6 + 4.2949673e+09;
        }
        fVar7 = (float)local_38;
        if (local_38 < 0) {
          fVar7 = fVar7 + 4.2949673e+09;
        }
        local_48 = 0x3f800000;
        local_2c = 0.0;
        local_28 = 0.0;
        local_24 = 0;
        local_20 = 0;
        local_4c = (-((fVar6 * 2.0) / fVar7 - 1.0) - *(float *)(iVar3 + 0x3a0)) /
                   *(float *)(iVar3 + 0x390);
        D3DXVec3Transform(&local_2c,&local_50,local_a0);
        fVar7 = local_18 - local_28;
        fVar6 = local_2c - local_1c;
      }
      fVar6 = fVar6 * DAT_00d72c24;
      *(float *)(iVar3 + 0x204) = fVar6;
      *(float *)(iVar3 + 0x218) = fVar6;
      *(float *)(iVar3 + 0x1dc) = -fVar6;
      *(undefined4 *)(iVar3 + 0x1e0) = 0;
      *(undefined4 *)(iVar3 + 0x1e4) = 0;
      *(float *)(iVar3 + 0x1f0) = -fVar6;
      *(float *)(iVar3 + 500) = fVar7;
      *(undefined4 *)(iVar3 + 0x1f8) = 0;
      *(undefined4 *)(iVar3 + 0x208) = 0;
      *(undefined4 *)(iVar3 + 0x20c) = 0;
      *(float *)(iVar3 + 0x21c) = fVar7;
      *(undefined4 *)(iVar3 + 0x220) = 0;
      *(undefined4 *)(iVar3 + 0x1e8) = 0;
      *(undefined4 *)(iVar3 + 0x1ec) = 0x3f800000;
      *(undefined4 *)(iVar3 + 0x1fc) = 0;
      *(undefined4 *)(iVar3 + 0x200) = 0;
      *(undefined4 *)(iVar3 + 0x210) = 0x3f800000;
      *(undefined4 *)(iVar3 + 0x214) = 0x3f800000;
      *(undefined4 *)(iVar3 + 0x224) = 0x3f800000;
      *(undefined4 *)(iVar3 + 0x228) = 0;
      _memcpy(param_1,(float *)(iVar3 + 0x1dc),*(size_t *)(iVar3 + 0x22c));
      (**(code **)(**(int **)(iVar3 + 0x1d8) + 0x30))(*(int **)(iVar3 + 0x1d8));
      return 1;
    }
    pwVar8 = L"[AvaUITextureNamePad::Render] Failed Vertexbuffer";
  }
  FUN_008018d0(pwVar8);
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0074bd60 : PUSH EBP
0074bd61 : MOV EBP,ESP
0074bd63 : MOV EAX,[0x017251ac]
0074bd68 : SUB ESP,0xa0
0074bd6e : PUSH EBX
0074bd6f : MOV EBX,dword ptr [EBP + 0x8]
0074bd72 : PUSH ESI
0074bd73 : MOV ESI,dword ptr [EAX + 0x18]
0074bd76 : PUSH EDI
0074bd77 : TEST ESI,ESI
0074bd79 : JNZ 0x0074bd99
0074bd7b : PUSH 0xc09338
0074bd80 : MOV ESI,dword ptr [0x00da98e8]
0074bd86 : CALL 0x008018d0
0074bd8b : ADD ESP,0x4
0074bd8e : XOR AL,AL
0074bd90 : POP EDI
0074bd91 : POP ESI
0074bd92 : POP EBX
0074bd93 : MOV ESP,EBP
0074bd95 : POP EBP
0074bd96 : RET 0x4
0074bd99 : MOV EAX,dword ptr [EBX + 0x1d8]
0074bd9f : TEST EAX,EAX
0074bda1 : JNZ 0x0074bdaa
0074bda3 : PUSH 0xc09390
0074bda8 : JMP 0x0074bd80
0074bdaa : PUSH 0x0
0074bdac : LEA EDX,[EBP + 0x8]
0074bdaf : PUSH EDX
0074bdb0 : PUSH 0x0
0074bdb2 : MOV dword ptr [EBP + 0x8],0x0
0074bdb9 : MOV ECX,dword ptr [EAX]
0074bdbb : PUSH 0x0
0074bdbd : PUSH EAX
0074bdbe : MOV EAX,dword ptr [ECX + 0x2c]
0074bdc1 : CALL EAX
0074bdc3 : PUSH 0x50
0074bdc5 : LEA EAX,[EBX + 0x1dc]
0074bdcb : PUSH 0x0
0074bdcd : PUSH EAX
0074bdce : CALL 0x0063b700
0074bdd3 : MOV EAX,dword ptr [EBX + 0x25c]
0074bdd9 : ADD ESP,0xc
0074bddc : LEA ECX,[EBX + 0x248]
0074bde2 : PUSH 0xc093f4
0074bde7 : XOR EDI,EDI
0074bde9 : CALL 0x00405bb0
0074bdee : TEST EAX,EAX
0074bdf0 : JZ 0x0074bfba
0074bdf6 : MOV ECX,dword ptr [ESI]
0074bdf8 : MOV EAX,dword ptr [ECX + 0xc0]
0074bdfe : LEA EDX,[EBP + -0x40]
0074be01 : PUSH EDX
0074be02 : PUSH ESI
0074be03 : CALL EAX
0074be05 : PUSH 0x801ef0
0074be0a : PUSH 0x2
0074be0c : PUSH 0xc
0074be0e : LEA ECX,[EBP + -0x58]
0074be11 : PUSH ECX
0074be12 : CALL 0x0040efe0
0074be17 : MOV EDX,dword ptr [EBP + -0x40]
0074be1a : NEG EDX
0074be1c : MOV dword ptr [EBP + -0x8],EDX
0074be1f : FILD dword ptr [EBP + -0x8]
0074be22 : TEST EDX,EDX
0074be24 : JGE 0x0074be2c
0074be26 : FADD float ptr [0x00cdf0e0]
0074be2c : FLD float ptr [0x00cdf144]
0074be32 : MOV EAX,dword ptr [EBP + -0x38]
0074be35 : FMUL ST1
0074be37 : FILD dword ptr [EBP + -0x38]
0074be3a : TEST EAX,EAX
0074be3c : JGE 0x0074be44
0074be3e : FADD float ptr [0x00cdf0e0]
0074be44 : FDIVP ST2,ST0
0074be46 : MOV ECX,dword ptr [EBP + -0x3c]
0074be49 : NEG ECX
0074be4b : MOV dword ptr [EBP + -0x8],ECX
0074be4e : FLD1
0074be50 : FSUB ST2,ST0
0074be52 : FXCH ST2
0074be54 : FSUB float ptr [EBX + 0x39c]
0074be5a : FDIV float ptr [EBX + 0x37c]
0074be60 : FSTP float ptr [EBP + -0x58]
0074be63 : FILD dword ptr [EBP + -0x8]
0074be66 : TEST ECX,ECX
0074be68 : JGE 0x0074be70
0074be6a : FADD float ptr [0x00cdf0e0]
0074be70 : MOV EDX,dword ptr [EBP + -0x34]
0074be73 : FMULP
0074be75 : FILD dword ptr [EBP + -0x34]
0074be78 : TEST EDX,EDX
0074be7a : JGE 0x0074be82
0074be7c : FADD float ptr [0x00cdf0e0]
0074be82 : FDIVP
0074be84 : MOVSS XMM0,dword ptr [0x00c10fc4]
0074be8c : LEA EAX,[EBX + 0x33c]
0074be92 : PUSH EAX
0074be93 : PUSH 0x0
0074be95 : LEA ECX,[EBP + 0xffffff64]
0074be9b : PUSH ECX
0074be9c : MOVSS dword ptr [EBP + -0x50],XMM0
0074bea1 : FSUBRP
0074bea3 : FCHS
0074bea5 : FSUB float ptr [EBX + 0x3a0]
0074beab : FDIV float ptr [EBX + 0x390]
0074beb1 : FSTP float ptr [EBP + -0x54]
0074beb4 : CALL 0x004ff73a
0074beb9 : XORPS XMM0,XMM0
0074bebc : LEA EDX,[EBP + 0xffffff64]
0074bec2 : PUSH EDX
0074bec3 : LEA EAX,[EBP + -0x58]
0074bec6 : PUSH EAX
0074bec7 : LEA ECX,[EBP + -0x18]
0074beca : PUSH ECX
0074becb : MOVSS dword ptr [EBP + -0x18],XMM0
0074bed0 : MOVSS dword ptr [EBP + -0x14],XMM0
0074bed5 : MOVSS dword ptr [EBP + -0x10],XMM0
0074beda : MOVSS dword ptr [EBP + -0xc],XMM0
0074bedf : CALL 0x004ff75e
0074bee4 : MOV EDX,dword ptr [EBX + 0x240]
0074beea : SUB EDX,dword ptr [EBP + -0x40]
0074beed : MOV dword ptr [EBP + -0x8],EDX
0074bef0 : FILD dword ptr [EBP + -0x8]
0074bef3 : TEST EDX,EDX
0074bef5 : JGE 0x0074befd
0074bef7 : FADD float ptr [0x00cdf0e0]
0074befd : FLD float ptr [0x00cdf144]
0074bf03 : MOV EAX,dword ptr [EBP + -0x38]
0074bf06 : FMUL ST1
0074bf08 : FILD dword ptr [EBP + -0x38]
0074bf0b : TEST EAX,EAX
0074bf0d : JGE 0x0074bf15
0074bf0f : FADD float ptr [0x00cdf0e0]
0074bf15 : FDIVP ST2,ST0
0074bf17 : MOV ECX,dword ptr [EBX + 0x244]
0074bf1d : SUB ECX,dword ptr [EBP + -0x3c]
0074bf20 : MOV dword ptr [EBP + -0x8],ECX
0074bf23 : FLD1
0074bf25 : FSUB ST2,ST0
0074bf27 : FXCH ST2
0074bf29 : FSUB float ptr [EBX + 0x39c]
0074bf2f : FDIV float ptr [EBX + 0x37c]
0074bf35 : FSTP float ptr [EBP + -0x4c]
0074bf38 : FILD dword ptr [EBP + -0x8]
0074bf3b : TEST ECX,ECX
0074bf3d : JGE 0x0074bf45
0074bf3f : FADD float ptr [0x00cdf0e0]
0074bf45 : MOV EDX,dword ptr [EBP + -0x34]
0074bf48 : FMULP
0074bf4a : FILD dword ptr [EBP + -0x34]
0074bf4d : TEST EDX,EDX
0074bf4f : JGE 0x0074bf57
0074bf51 : FADD float ptr [0x00cdf0e0]
0074bf57 : FDIVP
0074bf59 : MOVSS XMM0,dword ptr [0x00c10fc4]
0074bf61 : LEA EAX,[EBP + 0xffffff64]
0074bf67 : PUSH EAX
0074bf68 : LEA ECX,[EBP + -0x4c]
0074bf6b : PUSH ECX
0074bf6c : LEA EDX,[EBP + -0x28]
0074bf6f : MOVSS dword ptr [EBP + -0x44],XMM0
0074bf74 : XORPS XMM0,XMM0
0074bf77 : PUSH EDX
0074bf78 : MOVSS dword ptr [EBP + -0x28],XMM0
0074bf7d : MOVSS dword ptr [EBP + -0x24],XMM0
0074bf82 : MOVSS dword ptr [EBP + -0x20],XMM0
0074bf87 : MOVSS dword ptr [EBP + -0x1c],XMM0
0074bf8c : FSUBRP
0074bf8e : FCHS
0074bf90 : FSUB float ptr [EBX + 0x3a0]
0074bf96 : FDIV float ptr [EBX + 0x390]
0074bf9c : FSTP float ptr [EBP + -0x48]
0074bf9f : CALL 0x004ff75e
0074bfa4 : MOVSS XMM2,dword ptr [EBP + -0x14]
0074bfa9 : MOVSS XMM0,dword ptr [EBP + -0x28]
0074bfae : SUBSS XMM2,dword ptr [EBP + -0x24]
0074bfb3 : SUBSS XMM0,dword ptr [EBP + -0x18]
0074bfb8 : JMP 0x0074bfee
0074bfba : LEA ECX,[EBX + 0x278]
0074bfc0 : MOV ESI,0xc093f8
0074bfc5 : CALL 0x004049e0
0074bfca : CVTSI2SS XMM2,dword ptr [EBX + 0x244]
0074bfd2 : CVTSI2SS XMM0,dword ptr [EBX + 0x240]
0074bfda : TEST AL,AL
0074bfdc : JZ 0x0074bfee
0074bfde : MOVSS XMM1,dword ptr [0x00cdf0f4]
0074bfe6 : MULSS XMM2,XMM1
0074bfea : MULSS XMM0,XMM1
0074bfee : XORPS XMM1,XMM1
0074bff1 : MULSS XMM0,dword ptr [0x00d72c24]
0074bff9 : MOV ECX,dword ptr [EBX + 0x22c]
0074bfff : MOV EDX,dword ptr [EBP + 0x8]
0074c002 : LEA EAX,[EBX + 0x1dc]
0074c008 : PUSH ECX
0074c009 : MOVAPS XMM3,XMM0
0074c00c : XORPS XMM3,xmmword ptr [0x00cdf0c0]
0074c013 : PUSH EAX
0074c014 : MOVSS dword ptr [EBX + 0x204],XMM0
0074c01c : MOVSS dword ptr [EBX + 0x218],XMM0
0074c024 : MOVSS XMM0,dword ptr [0x00c10fc4]
0074c02c : PUSH EDX
0074c02d : MOVSS dword ptr [EAX],XMM3
0074c031 : MOVSS dword ptr [EBX + 0x1e0],XMM1
0074c039 : MOVSS dword ptr [EBX + 0x1e4],XMM1
0074c041 : MOVSS dword ptr [EBX + 0x1f0],XMM3
0074c049 : MOVSS dword ptr [EBX + 0x1f4],XMM2
0074c051 : MOVSS dword ptr [EBX + 0x1f8],XMM1
0074c059 : MOVSS dword ptr [EBX + 0x208],XMM1
0074c061 : MOVSS dword ptr [EBX + 0x20c],XMM1
0074c069 : MOVSS dword ptr [EBX + 0x21c],XMM2
0074c071 : MOVSS dword ptr [EBX + 0x220],XMM1
0074c079 : MOVSS dword ptr [EBX + 0x1e8],XMM1
0074c081 : MOVSS dword ptr [EBX + 0x1ec],XMM0
0074c089 : MOVSS dword ptr [EBX + 0x1fc],XMM1
0074c091 : MOVSS dword ptr [EBX + 0x200],XMM1
0074c099 : MOVSS dword ptr [EBX + 0x210],XMM0
0074c0a1 : MOVSS dword ptr [EBX + 0x214],XMM0
0074c0a9 : MOVSS dword ptr [EBX + 0x224],XMM0
0074c0b1 : MOVSS dword ptr [EBX + 0x228],XMM1
0074c0b9 : CALL 0x0063ae40
0074c0be : MOV EBX,dword ptr [EBX + 0x1d8]
0074c0c4 : MOV EAX,dword ptr [EBX]
0074c0c6 : MOV ECX,dword ptr [EAX + 0x30]
0074c0c9 : ADD ESP,0xc
0074c0cc : PUSH EBX
0074c0cd : CALL ECX
0074c0cf : POP EDI
0074c0d0 : POP ESI
0074c0d1 : MOV AL,0x1
0074c0d3 : POP EBX
0074c0d4 : MOV ESP,EBP
0074c0d6 : POP EBP
0074c0d7 : RET 0x4
