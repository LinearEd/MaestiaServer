PROGRAM  : Maestia.exe
FUNCTION : FUN_00ab6df0
ENTRY    : 00ab6df0
BODY     : [[00ab6df0, 00ab6e8b] [00ab6e90, 00ab6f5b]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00ab6eb6) */

int FUN_00ab6df0(ushort *param_1)

{
  ushort uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  ushort *puVar5;
  uint uVar6;
  int in_ECX;
  ushort *puVar7;
  uint uVar8;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int *local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b11176;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 8);
  local_20 = 0;
  local_28 = ".\\Objects\\AvaMyParty.cpp";
  local_24 = 0x223;
  local_1c = 1;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  local_18 = *(int **)(in_ECX + 0x2c);
  local_14 = (int *)*local_18;
  if (local_14 != local_18) {
    do {
      iVar2 = local_14[4];
      puVar5 = param_1;
      do {
        uVar1 = *puVar5;
        puVar5 = puVar5 + 1;
      } while (uVar1 != 0);
      uVar3 = *(uint *)(iVar2 + 0x30);
      uVar6 = (int)puVar5 - (int)(param_1 + 1) >> 1;
      uVar8 = uVar3;
      if (uVar6 <= uVar3) {
        uVar8 = uVar6;
      }
      puVar5 = param_1;
      if (*(uint *)(iVar2 + 0x34) < 8) {
        puVar7 = (ushort *)(iVar2 + 0x20);
      }
      else {
        puVar7 = *(ushort **)(iVar2 + 0x20);
      }
      for (; uVar8 != 0; uVar8 = uVar8 - 1) {
        if (*puVar7 != *puVar5) {
          uVar8 = (-(uint)(*puVar7 < *puVar5) & 0xfffffffe) + 1;
          if (uVar8 != 0) goto LAB_00ab6f05;
          break;
        }
        puVar7 = puVar7 + 1;
        puVar5 = puVar5 + 1;
      }
      if (uVar6 <= uVar3) {
        uVar8 = (uint)(uVar3 != uVar6);
LAB_00ab6f05:
        if (uVar8 == 0) {
          iVar2 = local_14[4];
          local_8 = 0xffffffff;
          if (local_20 != 0) {
            LeaveCriticalSection(local_2c);
          }
          ExceptionList = local_10;
          return iVar2;
        }
      }
      FUN_00416210(uVar4);
    } while (local_14 != local_18);
  }
  local_8 = 0xffffffff;
  if (local_20 != 0) {
    LeaveCriticalSection(local_2c);
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00ab6df0 : PUSH EBP
00ab6df1 : MOV EBP,ESP
00ab6df3 : PUSH -0x1
00ab6df5 : PUSH 0xb11176
00ab6dfa : MOV EAX,FS:[0x0]
00ab6e00 : PUSH EAX
00ab6e01 : SUB ESP,0x1c
00ab6e04 : PUSH EBX
00ab6e05 : PUSH ESI
00ab6e06 : PUSH EDI
00ab6e07 : MOV EAX,[0x00d66fa0]
00ab6e0c : XOR EAX,EBP
00ab6e0e : PUSH EAX
00ab6e0f : LEA EAX,[EBP + -0xc]
00ab6e12 : MOV FS:[0x0],EAX
00ab6e18 : MOV EBX,dword ptr [EBP + 0x8]
00ab6e1b : MOV ESI,ECX
00ab6e1d : LEA ECX,[EBP + -0x28]
00ab6e20 : LEA EAX,[ESI + 0x8]
00ab6e23 : XOR EDI,EDI
00ab6e25 : PUSH ECX
00ab6e26 : MOV dword ptr [EBP + -0x1c],EDI
00ab6e29 : MOV dword ptr [EBP + -0x28],EAX
00ab6e2c : MOV dword ptr [EBP + -0x24],0xc41be4
00ab6e33 : MOV dword ptr [EBP + -0x20],0x223
00ab6e3a : MOV dword ptr [EBP + -0x18],0x1
00ab6e41 : CALL 0x006ef1a0
00ab6e46 : MOV dword ptr [EBP + -0x4],EDI
00ab6e49 : MOV ESI,dword ptr [ESI + 0x2c]
00ab6e4c : MOV EAX,dword ptr [ESI]
00ab6e4e : MOV dword ptr [EBP + -0x14],ESI
00ab6e51 : MOV dword ptr [EBP + -0x10],EAX
00ab6e54 : CMP EAX,ESI
00ab6e56 : JNZ 0x00ab6e93
00ab6e58 : MOV dword ptr [EBP + -0x4],0xffffffff
00ab6e5f : CMP dword ptr [EBP + -0x1c],0x0
00ab6e63 : JZ 0x00ab6e76
00ab6e65 : MOV ECX,dword ptr [EBP + -0x28]
00ab6e68 : PUSH ECX
00ab6e69 : CALL dword ptr [0x00b8511c]
00ab6e6f : MOV dword ptr [EBP + -0x1c],0x0
00ab6e76 : XOR EAX,EAX
00ab6e78 : MOV ECX,dword ptr [EBP + -0xc]
00ab6e7b : MOV dword ptr FS:[0x0],ECX
00ab6e82 : POP ECX
00ab6e83 : POP EDI
00ab6e84 : POP ESI
00ab6e85 : POP EBX
00ab6e86 : MOV ESP,EBP
00ab6e88 : POP EBP
00ab6e89 : RET 0x4
00ab6e90 : MOV EBX,dword ptr [EBP + 0x8]
00ab6e93 : MOV ECX,dword ptr [EAX + 0x10]
00ab6e96 : MOV EAX,EBX
00ab6e98 : ADD ECX,0x1c
00ab6e9b : LEA ESI,[EAX + 0x2]
00ab6e9e : MOV EDI,EDI
00ab6ea0 : MOV DX,word ptr [EAX]
00ab6ea3 : ADD EAX,0x2
00ab6ea6 : TEST DX,DX
00ab6ea9 : JNZ 0x00ab6ea0
00ab6eab : MOV EDI,dword ptr [ECX + 0x14]
00ab6eae : SUB EAX,ESI
00ab6eb0 : MOV EDX,EDI
00ab6eb2 : SAR EAX,0x1
00ab6eb4 : CMP EDX,EDI
00ab6eb6 : CMOVC EDI,EDX
00ab6eb9 : MOV ESI,EDI
00ab6ebb : CMP EDI,EAX
00ab6ebd : JC 0x00ab6ec1
00ab6ebf : MOV ESI,EAX
00ab6ec1 : CMP dword ptr [ECX + 0x18],0x8
00ab6ec5 : JC 0x00ab6ecc
00ab6ec7 : MOV ECX,dword ptr [ECX + 0x4]
00ab6eca : JMP 0x00ab6ecf
00ab6ecc : ADD ECX,0x4
00ab6ecf : MOV EDX,EBX
00ab6ed1 : TEST ESI,ESI
00ab6ed3 : JBE 0x00ab6efa
00ab6ed5 : MOV BX,word ptr [ECX]
00ab6ed8 : CMP BX,word ptr [EDX]
00ab6edb : JNZ 0x00ab6eea
00ab6edd : ADD ECX,0x2
00ab6ee0 : ADD EDX,0x2
00ab6ee3 : SUB ESI,0x1
00ab6ee6 : JNZ 0x00ab6ed5
00ab6ee8 : JMP 0x00ab6efa
00ab6eea : MOVZX ECX,word ptr [ECX]
00ab6eed : CMP CX,word ptr [EDX]
00ab6ef0 : SBB ECX,ECX
00ab6ef2 : AND ECX,0xfffffffe
00ab6ef5 : ADD ECX,0x1
00ab6ef8 : JNZ 0x00ab6f05
00ab6efa : CMP EDI,EAX
00ab6efc : JC 0x00ab6f09
00ab6efe : XOR ECX,ECX
00ab6f00 : CMP EDI,EAX
00ab6f02 : SETNZ CL
00ab6f05 : TEST ECX,ECX
00ab6f07 : JZ 0x00ab6f22
00ab6f09 : LEA EDX,[EBP + -0x10]
00ab6f0c : CALL 0x00416210
00ab6f11 : MOV EAX,dword ptr [EBP + -0x10]
00ab6f14 : CMP EAX,dword ptr [EBP + -0x14]
00ab6f17 : JNZ 0x00ab6e90
00ab6f1d : JMP 0x00ab6e58
00ab6f22 : MOV EDX,dword ptr [EBP + -0x10]
00ab6f25 : MOV ESI,dword ptr [EDX + 0x10]
00ab6f28 : MOV dword ptr [EBP + -0x4],0xffffffff
00ab6f2f : CMP dword ptr [EBP + -0x1c],0x0
00ab6f33 : JZ 0x00ab6f46
00ab6f35 : MOV EAX,dword ptr [EBP + -0x28]
00ab6f38 : PUSH EAX
00ab6f39 : CALL dword ptr [0x00b8511c]
00ab6f3f : MOV dword ptr [EBP + -0x1c],0x0
00ab6f46 : MOV EAX,ESI
00ab6f48 : MOV ECX,dword ptr [EBP + -0xc]
00ab6f4b : MOV dword ptr FS:[0x0],ECX
00ab6f52 : POP ECX
00ab6f53 : POP EDI
00ab6f54 : POP ESI
00ab6f55 : POP EBX
00ab6f56 : MOV ESP,EBP
00ab6f58 : POP EBP
00ab6f59 : RET 0x4
