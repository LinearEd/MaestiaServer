PROGRAM  : Maestia.exe
FUNCTION : FUN_006a7da0
ENTRY    : 006a7da0
BODY     : [[006a7da0, 006a7e15] [006a7e20, 006a80e4]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a7da0(int param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  undefined4 *puVar4;
  uint *puVar5;
  uint uVar6;
  undefined4 uVar7;
  uint uVar8;
  int iVar9;
  int *piVar10;
  int local_30;
  undefined4 local_2c;
  int local_28;
  int local_24;
  uint local_20;
  uint local_1c;
  int local_18;
  uint *local_14;
  uint *local_10;
  undefined4 local_c;
  int local_8;
  int local_4;
  
  local_28 = *(int *)(param_1 + 0x148);
  local_4 = *(int *)(param_1 + 0x88);
  local_2c = *(undefined4 *)(param_1 + 100);
  piVar10 = (int *)0x0;
  local_20 = 0;
  puVar5 = (uint *)FUN_0068a220(local_2c,8,0,*(undefined4 *)(param_1 + 300),0,&local_30);
  *(uint **)(param_1 + 0x13c) = puVar5;
  if ((local_30 == 0) && (local_18 = 0, local_14 = puVar5, 0 < *(int *)(param_1 + 300))) {
    local_10 = puVar5 + 1;
    local_24 = 0;
    do {
      iVar9 = *(int *)(param_1 + 0x130) + local_24;
      local_8 = *(int *)(iVar9 + 4);
      uVar2 = *(uint *)(iVar9 + 0xf0);
      if (local_20 < uVar2 + 1) {
        local_1c = uVar2 + 4 & 0xfffffffc;
        piVar10 = (int *)FUN_0068a220(local_2c,4,local_20,local_1c,piVar10,&local_30);
        if (local_30 == 0) {
          local_20 = local_1c;
          goto LAB_006a7e7a;
        }
LAB_006a8038:
        if (*(int *)(param_1 + 0x13c) != 0) {
          iVar9 = 0;
          if (0 < *(int *)(param_1 + 300)) {
            do {
              puVar4 = *(undefined4 **)(*(int *)(param_1 + 0x13c) + 4 + iVar9 * 8);
              if (puVar4 != (undefined4 *)0x0) {
                FUN_00687f30(local_2c,*puVar4);
                **(undefined4 **)(*(int *)(param_1 + 0x13c) + 4 + iVar9 * 8) = 0;
              }
              FUN_00687f30(local_2c,*(undefined4 *)(*(int *)(param_1 + 0x13c) + 4 + iVar9 * 8));
              *(undefined4 *)(*(int *)(param_1 + 0x13c) + 4 + iVar9 * 8) = 0;
              iVar9 = iVar9 + 1;
            } while (iVar9 < *(int *)(param_1 + 300));
          }
          FUN_00687f30(local_2c,*(undefined4 *)(param_1 + 0x13c));
          *(undefined4 *)(param_1 + 0x13c) = 0;
        }
        break;
      }
LAB_006a7e7a:
      local_30 = FUN_006877c0(local_28,*(int *)(iVar9 + 0xf4) + *(int *)(param_1 + 0x134));
      if ((local_30 != 0) ||
         (local_30 = FUN_00688900(local_28,*(int *)(iVar9 + 0xf8) * (uVar2 + 1)), local_30 != 0))
      goto LAB_006a8038;
      local_c = *(undefined4 *)(local_28 + 0x20);
      local_1c = 0;
      do {
        iVar9 = FUN_006a79e0();
        piVar10[local_1c] = iVar9;
        local_1c = local_1c + 1;
      } while (local_1c <= uVar2);
      FUN_006889b0(local_28);
      iVar9 = piVar10[uVar2];
      iVar3 = *piVar10;
      uVar6 = FUN_0068a220(local_2c,4,0,uVar2 + 1,0,&local_30);
      puVar5 = local_10;
      *local_10 = uVar6;
      if (local_30 != 0) goto LAB_006a8038;
      uVar7 = FUN_00688c00(local_2c,iVar9 - iVar3,&local_30);
      *(undefined4 *)*puVar5 = uVar7;
      if (((local_30 != 0) ||
          (local_30 = FUN_006877c0(local_28,*piVar10 + *(int *)(param_1 + 0x134)), local_30 != 0))
         || (local_30 = FUN_006888a0(local_28,*(undefined4 *)*puVar5,iVar9 - iVar3), local_30 != 0))
      goto LAB_006a8038;
      uVar6 = 1;
      if (uVar2 != 0) {
        do {
          piVar1 = (int *)(*puVar5 + uVar6 * 4);
          uVar8 = uVar6 + 1;
          *piVar1 = (piVar1[-1] - piVar10[uVar6 - 1]) + piVar10[uVar6];
          uVar6 = uVar8;
        } while (uVar8 <= uVar2);
      }
      if ((-1 < local_8) && (uVar6 = 0, uVar2 != 0)) {
        do {
          (**(code **)(local_4 + 0x10))
                    (*(undefined4 *)(*puVar5 + uVar6 * 4),piVar10[uVar6 + 1] - piVar10[uVar6],0x10ea
                    );
          uVar6 = uVar6 + 1;
        } while (uVar6 < uVar2);
      }
      local_24 = local_24 + 0xfc;
      *local_14 = uVar2;
      local_18 = local_18 + 1;
      local_14 = local_14 + 2;
      local_10 = puVar5 + 2;
    } while (local_18 < *(int *)(param_1 + 300));
  }
  FUN_00687f30(local_2c,piVar10);
  return local_30;
}



============================================================
DISASSEMBLY
============================================================
006a7da0 : SUB ESP,0x30
006a7da3 : PUSH ESI
006a7da4 : MOV ESI,dword ptr [ESP + 0x38]
006a7da8 : MOV ECX,dword ptr [ESI + 0x148]
006a7dae : MOV EDX,dword ptr [ESI + 0x88]
006a7db4 : MOV EAX,dword ptr [ESI + 0x64]
006a7db7 : PUSH EDI
006a7db8 : MOV dword ptr [ESP + 0x10],ECX
006a7dbc : LEA ECX,[ESP + 0x8]
006a7dc0 : PUSH ECX
006a7dc1 : XOR EDI,EDI
006a7dc3 : PUSH EDI
006a7dc4 : MOV dword ptr [ESP + 0x3c],EDX
006a7dc8 : MOV EDX,dword ptr [ESI + 0x12c]
006a7dce : PUSH EDX
006a7dcf : PUSH EDI
006a7dd0 : PUSH 0x8
006a7dd2 : PUSH EAX
006a7dd3 : MOV dword ptr [ESP + 0x24],EAX
006a7dd7 : MOV dword ptr [ESP + 0x30],EDI
006a7ddb : CALL 0x0068a220
006a7de0 : ADD ESP,0x18
006a7de3 : MOV dword ptr [ESI + 0x13c],EAX
006a7de9 : CMP dword ptr [ESP + 0x8],EDI
006a7ded : JNZ 0x006a80cd
006a7df3 : CMP dword ptr [ESI + 0x12c],EDI
006a7df9 : MOV dword ptr [ESP + 0x24],EAX
006a7dfd : MOV dword ptr [ESP + 0x20],EDI
006a7e01 : JLE 0x006a80cd
006a7e07 : PUSH EBX
006a7e08 : ADD EAX,0x4
006a7e0b : PUSH EBP
006a7e0c : MOV dword ptr [ESP + 0x30],EAX
006a7e10 : MOV dword ptr [ESP + 0x1c],EDI
006a7e14 : JMP 0x006a7e22
006a7e20 : MOV ESI,EDX
006a7e22 : MOV EBP,dword ptr [ESI + 0x130]
006a7e28 : ADD EBP,dword ptr [ESP + 0x1c]
006a7e2c : MOV ECX,dword ptr [ESP + 0x20]
006a7e30 : MOV EAX,dword ptr [EBP + 0x4]
006a7e33 : MOV EBX,dword ptr [EBP + 0xf0]
006a7e39 : MOV dword ptr [ESP + 0x38],EAX
006a7e3d : LEA EAX,[EBX + 0x1]
006a7e40 : CMP EAX,ECX
006a7e42 : JBE 0x006a7e7a
006a7e44 : LEA EDX,[ESP + 0x10]
006a7e48 : PUSH EDX
006a7e49 : PUSH EDI
006a7e4a : LEA EAX,[EBX + 0x4]
006a7e4d : AND EAX,0xfffffffc
006a7e50 : PUSH EAX
006a7e51 : PUSH ECX
006a7e52 : MOV dword ptr [ESP + 0x34],EAX
006a7e56 : MOV EAX,dword ptr [ESP + 0x24]
006a7e5a : PUSH 0x4
006a7e5c : PUSH EAX
006a7e5d : CALL 0x0068a220
006a7e62 : ADD ESP,0x18
006a7e65 : CMP dword ptr [ESP + 0x10],0x0
006a7e6a : MOV EDI,EAX
006a7e6c : JNZ 0x006a8038
006a7e72 : MOV ECX,dword ptr [ESP + 0x24]
006a7e76 : MOV dword ptr [ESP + 0x20],ECX
006a7e7a : MOV EDX,dword ptr [EBP + 0xf4]
006a7e80 : ADD EDX,dword ptr [ESI + 0x134]
006a7e86 : MOV EAX,dword ptr [ESP + 0x18]
006a7e8a : PUSH EDX
006a7e8b : PUSH EAX
006a7e8c : CALL 0x006877c0
006a7e91 : ADD ESP,0x8
006a7e94 : MOV dword ptr [ESP + 0x10],EAX
006a7e98 : TEST EAX,EAX
006a7e9a : JNZ 0x006a8038
006a7ea0 : MOV ECX,dword ptr [EBP + 0xf8]
006a7ea6 : MOV EDX,dword ptr [ESP + 0x18]
006a7eaa : LEA EAX,[EBX + 0x1]
006a7ead : IMUL ECX,EAX
006a7eb0 : PUSH ECX
006a7eb1 : PUSH EDX
006a7eb2 : CALL 0x00688900
006a7eb7 : ADD ESP,0x8
006a7eba : MOV dword ptr [ESP + 0x10],EAX
006a7ebe : TEST EAX,EAX
006a7ec0 : JNZ 0x006a8038
006a7ec6 : MOV EAX,dword ptr [ESP + 0x18]
006a7eca : MOV ECX,dword ptr [EAX + 0x20]
006a7ecd : MOV dword ptr [ESP + 0x34],ECX
006a7ed1 : MOV dword ptr [ESP + 0x24],0x0
006a7ed9 : LEA ESP,[ESP]
006a7ee0 : MOV DL,byte ptr [EBP + 0xf8]
006a7ee6 : LEA ESI,[ESP + 0x34]
006a7eea : CALL 0x006a79e0
006a7eef : MOV ECX,dword ptr [ESP + 0x24]
006a7ef3 : MOV dword ptr [EDI + ECX*0x4],EAX
006a7ef6 : INC ECX
006a7ef7 : MOV dword ptr [ESP + 0x24],ECX
006a7efb : CMP ECX,EBX
006a7efd : JBE 0x006a7ee0
006a7eff : MOV EDX,dword ptr [ESP + 0x18]
006a7f03 : PUSH EDX
006a7f04 : CALL 0x006889b0
006a7f09 : MOV ECX,dword ptr [ESP + 0x18]
006a7f0d : MOV ESI,dword ptr [EDI + EBX*0x4]
006a7f10 : SUB ESI,dword ptr [EDI]
006a7f12 : LEA EAX,[ESP + 0x14]
006a7f16 : PUSH EAX
006a7f17 : PUSH 0x0
006a7f19 : LEA EAX,[EBX + 0x1]
006a7f1c : PUSH EAX
006a7f1d : PUSH 0x0
006a7f1f : PUSH 0x4
006a7f21 : PUSH ECX
006a7f22 : CALL 0x0068a220
006a7f27 : MOV EBP,dword ptr [ESP + 0x4c]
006a7f2b : ADD ESP,0x1c
006a7f2e : MOV dword ptr [EBP],EAX
006a7f31 : CMP dword ptr [ESP + 0x10],0x0
006a7f36 : JNZ 0x006a8034
006a7f3c : MOV EAX,dword ptr [ESP + 0x14]
006a7f40 : LEA EDX,[ESP + 0x10]
006a7f44 : PUSH EDX
006a7f45 : PUSH ESI
006a7f46 : PUSH EAX
006a7f47 : CALL 0x00688c00
006a7f4c : MOV ECX,dword ptr [EBP]
006a7f4f : ADD ESP,0xc
006a7f52 : MOV dword ptr [ECX],EAX
006a7f54 : CMP dword ptr [ESP + 0x10],0x0
006a7f59 : JNZ 0x006a8034
006a7f5f : MOV EDX,dword ptr [EDI]
006a7f61 : MOV EAX,dword ptr [ESP + 0x44]
006a7f65 : ADD EDX,dword ptr [EAX + 0x134]
006a7f6b : MOV ECX,dword ptr [ESP + 0x18]
006a7f6f : PUSH EDX
006a7f70 : PUSH ECX
006a7f71 : CALL 0x006877c0
006a7f76 : ADD ESP,0x8
006a7f79 : MOV dword ptr [ESP + 0x10],EAX
006a7f7d : TEST EAX,EAX
006a7f7f : JNZ 0x006a8034
006a7f85 : MOV EDX,dword ptr [EBP]
006a7f88 : MOV EAX,dword ptr [EDX]
006a7f8a : MOV ECX,dword ptr [ESP + 0x18]
006a7f8e : PUSH ESI
006a7f8f : PUSH EAX
006a7f90 : PUSH ECX
006a7f91 : CALL 0x006888a0
006a7f96 : ADD ESP,0xc
006a7f99 : MOV dword ptr [ESP + 0x10],EAX
006a7f9d : TEST EAX,EAX
006a7f9f : JNZ 0x006a8034
006a7fa5 : MOV EAX,0x1
006a7faa : CMP EBX,EAX
006a7fac : JC 0x006a7fc8
006a7fae : MOV EDI,EDI
006a7fb0 : MOV EDX,dword ptr [EBP]
006a7fb3 : LEA ECX,[EDX + EAX*0x4]
006a7fb6 : MOV EDX,dword ptr [ECX + -0x4]
006a7fb9 : SUB EDX,dword ptr [EDI + EAX*0x4 + -0x4]
006a7fbd : INC EAX
006a7fbe : ADD EDX,dword ptr [EDI + EAX*0x4 + -0x4]
006a7fc2 : MOV dword ptr [ECX],EDX
006a7fc4 : CMP EAX,EBX
006a7fc6 : JBE 0x006a7fb0
006a7fc8 : CMP dword ptr [ESP + 0x38],0x0
006a7fcd : JL 0x006a7ffa
006a7fcf : XOR ESI,ESI
006a7fd1 : TEST EBX,EBX
006a7fd3 : JBE 0x006a7ffa
006a7fd5 : MOV EAX,dword ptr [EDI + ESI*0x4 + 0x4]
006a7fd9 : SUB EAX,dword ptr [EDI + ESI*0x4]
006a7fdc : MOV ECX,dword ptr [EBP]
006a7fdf : MOV EDX,dword ptr [ECX + ESI*0x4]
006a7fe2 : PUSH 0x10ea
006a7fe7 : PUSH EAX
006a7fe8 : MOV EAX,dword ptr [ESP + 0x44]
006a7fec : MOV ECX,dword ptr [EAX + 0x10]
006a7fef : PUSH EDX
006a7ff0 : CALL ECX
006a7ff2 : INC ESI
006a7ff3 : ADD ESP,0xc
006a7ff6 : CMP ESI,EBX
006a7ff8 : JC 0x006a7fd5
006a7ffa : MOV ECX,dword ptr [ESP + 0x2c]
006a7ffe : MOV EAX,dword ptr [ESP + 0x28]
006a8002 : MOV EDX,dword ptr [ESP + 0x44]
006a8006 : ADD dword ptr [ESP + 0x1c],0xfc
006a800e : MOV dword ptr [ECX],EBX
006a8010 : INC EAX
006a8011 : ADD ECX,0x8
006a8014 : ADD EBP,0x8
006a8017 : CMP EAX,dword ptr [EDX + 0x12c]
006a801d : MOV dword ptr [ESP + 0x28],EAX
006a8021 : MOV dword ptr [ESP + 0x2c],ECX
006a8025 : MOV dword ptr [ESP + 0x30],EBP
006a8029 : JL 0x006a7e20
006a802f : JMP 0x006a80cb
006a8034 : MOV ESI,dword ptr [ESP + 0x44]
006a8038 : CMP dword ptr [ESI + 0x13c],0x0
006a803f : JZ 0x006a80cb
006a8045 : XOR EBX,EBX
006a8047 : CMP dword ptr [ESI + 0x12c],EBX
006a804d : JLE 0x006a80ad
006a804f : NOP
006a8050 : MOV EAX,dword ptr [ESI + 0x13c]
006a8056 : MOV EAX,dword ptr [EAX + EBX*0x8 + 0x4]
006a805a : TEST EAX,EAX
006a805c : JZ 0x006a807e
006a805e : MOV ECX,dword ptr [EAX]
006a8060 : MOV EDX,dword ptr [ESP + 0x14]
006a8064 : PUSH ECX
006a8065 : PUSH EDX
006a8066 : CALL 0x00687f30
006a806b : MOV EAX,dword ptr [ESI + 0x13c]
006a8071 : MOV ECX,dword ptr [EAX + EBX*0x8 + 0x4]
006a8075 : ADD ESP,0x8
006a8078 : MOV dword ptr [ECX],0x0
006a807e : MOV EDX,dword ptr [ESI + 0x13c]
006a8084 : MOV EAX,dword ptr [EDX + EBX*0x8 + 0x4]
006a8088 : MOV ECX,dword ptr [ESP + 0x14]
006a808c : PUSH EAX
006a808d : PUSH ECX
006a808e : CALL 0x00687f30
006a8093 : MOV EDX,dword ptr [ESI + 0x13c]
006a8099 : MOV dword ptr [EDX + EBX*0x8 + 0x4],0x0
006a80a1 : INC EBX
006a80a2 : ADD ESP,0x8
006a80a5 : CMP EBX,dword ptr [ESI + 0x12c]
006a80ab : JL 0x006a8050
006a80ad : MOV EAX,dword ptr [ESI + 0x13c]
006a80b3 : MOV ECX,dword ptr [ESP + 0x14]
006a80b7 : PUSH EAX
006a80b8 : PUSH ECX
006a80b9 : CALL 0x00687f30
006a80be : ADD ESP,0x8
006a80c1 : MOV dword ptr [ESI + 0x13c],0x0
006a80cb : POP EBP
006a80cc : POP EBX
006a80cd : MOV EDX,dword ptr [ESP + 0xc]
006a80d1 : PUSH EDI
006a80d2 : PUSH EDX
006a80d3 : CALL 0x00687f30
006a80d8 : MOV EAX,dword ptr [ESP + 0x10]
006a80dc : ADD ESP,0x8
006a80df : POP EDI
006a80e0 : POP ESI
006a80e1 : ADD ESP,0x30
006a80e4 : RET
