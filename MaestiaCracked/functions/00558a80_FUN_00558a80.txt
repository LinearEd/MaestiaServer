PROGRAM  : Maestia.exe
FUNCTION : FUN_00558a80
ENTRY    : 00558a80
BODY     : [[00558a80, 00558bb3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00558a80(int param_1)

{
  uint *puVar1;
  int *piVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int in_ECX;
  uint uVar7;
  float local_28;
  float local_24;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  char local_4;
  
  if ((-1 < *(char *)(in_ECX + 0x20)) && (*(char *)(in_ECX + 0x20) != '\x01')) {
    do {
      FUN_00553740();
    } while (*(char *)(in_ECX + 0x20) == '\x03');
  }
  local_24 = (float)*(int *)(in_ECX + 0x2c);
  local_28 = (float)*(int *)(in_ECX + 0x30);
  if ((*(byte *)(in_ECX + 0x70) & 0x80) != 0) {
    local_24 = local_24 * *(float *)(in_ECX + 0x6c);
    local_28 = local_28 * *(float *)(in_ECX + 0x6c);
  }
  FUN_005dd510(*(int *)(in_ECX + 0x14) + -1,*(int *)(in_ECX + 0x18) + -1,
               *(int *)(in_ECX + 0x1c) + -1,local_24,local_28);
  while ((*(char *)(in_ECX + 0x20) != '\x01' && (*(char *)(in_ECX + 0x20) < '\0'))) {
    FUN_005542d0(&local_14,0);
    uVar6 = local_8;
    uVar5 = local_c;
    if (local_4 == '\0') {
      puVar1 = (uint *)(param_1 + 8);
      uVar7 = *(uint *)(param_1 + 8) >> 8;
      if (*(uint *)(param_1 + 0xc) <= uVar7) {
        FUN_00555d30(uVar7);
      }
      uVar3 = *puVar1;
      iVar4 = *(int *)(*(int *)(param_1 + 0x14) + uVar7 * 4);
      *(undefined4 *)(iVar4 + (uVar3 & 0xff) * 8) = uVar5;
      *(undefined4 *)(iVar4 + 4 + (uVar3 & 0xff) * 8) = uVar6;
      *puVar1 = *puVar1 + 1;
      piVar2 = (int *)(*(int *)(param_1 + 0x28) + 4);
      *piVar2 = *piVar2 + 1;
    }
    else {
      FUN_005dd880(local_14,local_10,local_c,local_8);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00558a80 : SUB ESP,0x28
00558a83 : PUSH EBP
00558a84 : PUSH ESI
00558a85 : MOV ESI,ECX
00558a87 : MOV AL,byte ptr [ESI + 0x20]
00558a8a : PUSH EDI
00558a8b : MOV dword ptr [ESP + 0x18],ESI
00558a8f : MOV dword ptr [ESP + 0x1c],0x0
00558a97 : TEST AL,AL
00558a99 : JS 0x00558aad
00558a9b : CMP AL,0x1
00558a9d : JZ 0x00558aad
00558a9f : NOP
00558aa0 : MOV ECX,ESI
00558aa2 : CALL 0x00553740
00558aa7 : CMP byte ptr [ESI + 0x20],0x3
00558aab : JZ 0x00558aa0
00558aad : TEST byte ptr [ESI + 0x70],0x80
00558ab1 : FILD dword ptr [ESI + 0x2c]
00558ab4 : FSTP float ptr [ESP + 0x10]
00558ab8 : FILD dword ptr [ESI + 0x30]
00558abb : FSTP float ptr [ESP + 0xc]
00558abf : JZ 0x00558ad7
00558ac1 : FLD float ptr [ESP + 0x10]
00558ac5 : FMUL float ptr [ESI + 0x6c]
00558ac8 : FSTP float ptr [ESP + 0x10]
00558acc : FLD float ptr [ESP + 0xc]
00558ad0 : FMUL float ptr [ESI + 0x6c]
00558ad3 : FSTP float ptr [ESP + 0xc]
00558ad7 : FLD float ptr [ESP + 0xc]
00558adb : MOV EAX,dword ptr [ESI + 0x1c]
00558ade : MOV ECX,dword ptr [ESI + 0x18]
00558ae1 : MOV EDX,dword ptr [ESI + 0x14]
00558ae4 : MOV EBP,dword ptr [ESP + 0x38]
00558ae8 : SUB ESP,0x8
00558aeb : FSTP float ptr [ESP + 0x4]
00558aef : DEC EAX
00558af0 : FLD float ptr [ESP + 0x18]
00558af4 : DEC ECX
00558af5 : FSTP float ptr [ESP]
00558af8 : PUSH EAX
00558af9 : PUSH ECX
00558afa : DEC EDX
00558afb : PUSH EDX
00558afc : MOV ECX,EBP
00558afe : CALL 0x005dd510
00558b03 : MOV EAX,dword ptr [ESP + 0x18]
00558b07 : MOV AL,byte ptr [EAX + 0x20]
00558b0a : CMP AL,0x1
00558b0c : JZ 0x00558bab
00558b12 : TEST AL,AL
00558b14 : JNS 0x00558bab
00558b1a : PUSH 0x0
00558b1c : LEA ECX,[ESP + 0x24]
00558b20 : PUSH ECX
00558b21 : LEA ECX,[ESP + 0x20]
00558b25 : CALL 0x005542d0
00558b2a : CMP byte ptr [ESP + 0x30],0x0
00558b2f : JZ 0x00558b5c
00558b31 : FLD float ptr [ESP + 0x2c]
00558b35 : SUB ESP,0x10
00558b38 : FSTP float ptr [ESP + 0xc]
00558b3c : MOV ECX,EBP
00558b3e : FLD float ptr [ESP + 0x38]
00558b42 : FSTP float ptr [ESP + 0x8]
00558b46 : FLD float ptr [ESP + 0x34]
00558b4a : FSTP float ptr [ESP + 0x4]
00558b4e : FLD float ptr [ESP + 0x30]
00558b52 : FSTP float ptr [ESP]
00558b55 : CALL 0x005dd880
00558b5a : JMP 0x00558b03
00558b5c : FLD float ptr [ESP + 0x28]
00558b60 : MOV EDI,dword ptr [EBP + 0x8]
00558b63 : LEA ESI,[EBP + 0x8]
00558b66 : FSTP float ptr [ESP + 0x10]
00558b6a : FLD float ptr [ESP + 0x2c]
00558b6e : SHR EDI,0x8
00558b71 : FSTP float ptr [ESP + 0x14]
00558b75 : CMP EDI,dword ptr [ESI + 0x4]
00558b78 : JC 0x00558b82
00558b7a : PUSH EDI
00558b7b : MOV ECX,ESI
00558b7d : CALL 0x00555d30
00558b82 : MOV EDX,dword ptr [ESI + 0xc]
00558b85 : MOV EAX,dword ptr [ESI]
00558b87 : MOV ECX,dword ptr [EDX + EDI*0x4]
00558b8a : MOV EDX,dword ptr [ESP + 0x10]
00558b8e : AND EAX,0xff
00558b93 : MOV dword ptr [ECX + EAX*0x8],EDX
00558b96 : MOV EDX,dword ptr [ESP + 0x14]
00558b9a : MOV dword ptr [ECX + EAX*0x8 + 0x4],EDX
00558b9e : INC dword ptr [ESI]
00558ba0 : MOV EAX,dword ptr [EBP + 0x28]
00558ba3 : INC dword ptr [EAX + 0x4]
00558ba6 : JMP 0x00558b03
00558bab : POP EDI
00558bac : POP ESI
00558bad : POP EBP
00558bae : ADD ESP,0x28
00558bb1 : RET 0x4
