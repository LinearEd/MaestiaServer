PROGRAM  : Maestia.exe
FUNCTION : FUN_005508a0
ENTRY    : 005508a0
BODY     : [[005508a0, 005508f7]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_005508a0(undefined4 *param_1,int param_2)

{
  undefined1 *puVar1;
  uint in_EAX;
  undefined4 uVar2;
  int iVar3;
  int *in_ECX;
  
  if (*in_ECX != 0) {
    in_EAX = FUN_0054f490(param_1,*(uint *)(*(int *)*param_1 + 0xc) & *(uint *)(*in_ECX + 4));
    if ((-1 < (int)in_EAX) && (iVar3 = *in_ECX + 0xc + in_EAX * 0x18, in_EAX = 0, iVar3 != 0)) {
      if (param_2 != 0) {
        uVar2 = FUN_005268b0(iVar3 + 4);
        puVar1 = (undefined1 *)(iVar3 + 5);
        iVar3 = CONCAT31((int3)((uint)uVar2 >> 8),*puVar1);
        *(undefined1 *)(param_2 + 1) = *puVar1;
      }
      return CONCAT31((int3)((uint)iVar3 >> 8),1);
    }
  }
  return in_EAX & 0xffffff00;
}



============================================================
DISASSEMBLY
============================================================
005508a0 : PUSH ESI
005508a1 : MOV ESI,ECX
005508a3 : MOV EDX,dword ptr [ESI]
005508a5 : TEST EDX,EDX
005508a7 : JZ 0x005508f2
005508a9 : MOV ECX,dword ptr [ESP + 0x8]
005508ad : MOV EAX,dword ptr [ECX]
005508af : MOV EAX,dword ptr [EAX]
005508b1 : MOV EAX,dword ptr [EAX + 0xc]
005508b4 : AND EAX,dword ptr [EDX + 0x4]
005508b7 : PUSH EAX
005508b8 : PUSH ECX
005508b9 : MOV ECX,ESI
005508bb : CALL 0x0054f490
005508c0 : TEST EAX,EAX
005508c2 : JL 0x005508f2
005508c4 : MOV EDX,dword ptr [ESI]
005508c6 : LEA ECX,[EAX + EAX*0x2]
005508c9 : LEA EAX,[EDX + ECX*0x8 + 0xc]
005508cd : TEST EAX,EAX
005508cf : JZ 0x005508f2
005508d1 : PUSH EDI
005508d2 : MOV EDI,dword ptr [ESP + 0x10]
005508d6 : TEST EDI,EDI
005508d8 : JZ 0x005508eb
005508da : LEA ESI,[EAX + 0x4]
005508dd : PUSH ESI
005508de : MOV ECX,EDI
005508e0 : CALL 0x005268b0
005508e5 : MOV AL,byte ptr [ESI + 0x1]
005508e8 : MOV byte ptr [EDI + 0x1],AL
005508eb : POP EDI
005508ec : MOV AL,0x1
005508ee : POP ESI
005508ef : RET 0x8
005508f2 : XOR AL,AL
005508f4 : POP ESI
005508f5 : RET 0x8
