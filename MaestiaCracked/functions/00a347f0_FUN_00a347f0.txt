PROGRAM  : Maestia.exe
FUNCTION : FUN_00a347f0
ENTRY    : 00a347f0
BODY     : [[00a347f0, 00a34ba9]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00a34a64) */

void FUN_00a347f0(void)

{
  ushort uVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined2 *puVar7;
  int in_ECX;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  int local_70;
  int local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined2 local_2c [4];
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5eae2;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34 = 7;
  local_38 = 0;
  local_48 = 0;
  local_14 = uVar5;
  FUN_00406360(L"vdisk root\\sync\\character.syn",0x1d);
  local_8 = 0;
  local_2c[0] = 0;
  local_18 = 7;
  local_1c = 0;
  FUN_00406360(L"Script.mvd",10);
  local_8._0_1_ = 1;
  FUN_0043acd0(DAT_017251a0 + 4,&local_6c);
  FUN_00a6f150(*(undefined4 *)(DAT_0172491c + 0x38c));
  local_8._0_1_ = 0;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = 0;
  iVar2 = *(int *)(DAT_0172491c + 0x17c);
  *(int *)(in_ECX + 0xac) = iVar2;
  if (iVar2 == 0) {
    FUN_008018d0(L"[InitMyCharacter] m_pMyCharacter is null",uVar5);
  }
  FUN_00843b30(*(undefined4 *)(in_ECX + 0x5fc),*(undefined4 *)(in_ECX + 0xac));
  FUN_008576d0(*(undefined4 *)(in_ECX + 0xac));
  local_8 = CONCAT31(local_8._1_3_,2);
  local_88 = 0x3f800000;
  local_84 = 0x3f800000;
  local_80 = 0x3f800000;
  local_24 = 0;
  local_20 = 0;
  local_1c = 0;
  local_18 = 0x3f800000;
  local_7c = 0;
  local_78 = 0;
  local_74 = 0;
  uVar6 = (**(code **)(**(int **)(*(int *)(in_ECX + 8) + 0x24) + 0x20))
                    (local_68,&local_7c,&local_24,&local_88);
  (**(code **)(**(int **)(in_ECX + 0xac) + 0x1ec))(uVar6);
  (**(code **)(**(int **)(in_ECX + 0xac) + 0x1e8))(0);
  (**(code **)(**(int **)(in_ECX + 0xac) + 600))
            (*(char *)((int)*(int **)(in_ECX + 0xac) + 0x3ad) != '\0');
  iVar4 = DAT_00d7c54c;
  iVar2 = *(int *)(*(int *)(in_ECX + 0xac) + 8);
  local_6c = iVar2;
  FUN_004437f0(&local_6c);
  if ((local_70 == *(int *)(iVar4 + 0x44)) || (local_6c = *(int *)(local_70 + 0x10), local_6c == 0))
  {
    FUN_008018d0(L"%d : [%s] Failed GetData... proto : %u",0xd1b,L"AvaGameZone::InitMyCharacter",
                 iVar2);
  }
  else {
    if (*(uint *)(local_6c + 0x58) < 0xb) {
      FUN_008018d0(L"%d : [%s] Over DEF_SIGHT Range...  value : %u",0xd10,
                   L"AvaGameZone::InitMyCharacter",*(uint *)(local_6c + 0x58));
      *(undefined4 *)(local_6c + 0x58) = 10;
    }
    else {
      *(undefined4 *)(local_6c + 0x58) = 5;
    }
    if (*(uint *)(local_6c + 0x58) < 10) {
      puVar7 = *(undefined2 **)(local_6c + 0xb8);
      if (puVar7 == (undefined2 *)0x0) {
        puVar7 = local_2c;
      }
      uVar1 = puVar7[*(uint *)(local_6c + 0x58) + 0x5e];
      *(uint *)(*(int *)(in_ECX + 0xac) + 0x1ef0) = (uint)uVar1;
      local_70 = uVar1 + 0x96;
      *(float *)(*(int *)(DAT_017251d0 + 0x38) + 0x133c) = (float)local_70;
    }
    *(uint *)(*(int *)(in_ECX + 0xac) + 0xc4) = (uint)*(ushort *)(local_6c + 0x5c);
  }
  FUN_00a34130(in_ECX);
  if ((*(int *)(DAT_0172491c + 0x90) != 0) && (*(int *)(*(int *)(DAT_0172491c + 0x90) + 0x110) != 0)
     ) {
    piVar3 = *(int **)(DAT_0172491c + 0x174);
    *(int **)(in_ECX + 0xb0) = piVar3;
    (**(code **)(*piVar3 + 0x244))();
    FUN_00857210(*(undefined4 *)(in_ECX + 0xac));
    FUN_00a285e0(3,0);
    piVar3 = *(int **)(DAT_0172491c + 0x178);
    *(int **)(in_ECX + 0xb4) = piVar3;
    (**(code **)(*piVar3 + 0x244))();
    FUN_00857210(*(undefined4 *)(in_ECX + 0xac));
    FUN_00a285e0(4,1);
  }
  *(undefined4 *)(in_ECX + 0xb8) = 0;
  local_8 = local_8 & 0xffffff00;
  if (local_50 < 8) {
    local_50 = 7;
    local_54 = 0;
    local_64 = 0;
    local_8 = 0xffffffff;
    if (local_34 < 8) {
      local_34 = 7;
      local_38 = 0;
      local_48 = 0;
      ExceptionList = local_10;
      __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
      return;
    }
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00a347f0 : PUSH EBP
00a347f1 : MOV EBP,ESP
00a347f3 : PUSH -0x1
00a347f5 : PUSH 0xb5eae2
00a347fa : MOV EAX,FS:[0x0]
00a34800 : PUSH EAX
00a34801 : SUB ESP,0x7c
00a34804 : MOV EAX,[0x00d66fa0]
00a34809 : XOR EAX,EBP
00a3480b : MOV dword ptr [EBP + -0x10],EAX
00a3480e : PUSH EBX
00a3480f : PUSH ESI
00a34810 : PUSH EDI
00a34811 : PUSH EAX
00a34812 : LEA EAX,[EBP + -0xc]
00a34815 : MOV FS:[0x0],EAX
00a3481b : PUSH 0x1d
00a3481d : MOV EDI,ECX
00a3481f : XOR EAX,EAX
00a34821 : MOV EBX,0x7
00a34826 : XOR ESI,ESI
00a34828 : PUSH 0xcbffdc
00a3482d : LEA ECX,[EBP + -0x48]
00a34830 : MOV dword ptr [EBP + -0x30],EBX
00a34833 : MOV dword ptr [EBP + -0x34],ESI
00a34836 : MOV word ptr [EBP + -0x44],AX
00a3483a : CALL 0x00406360
00a3483f : MOV dword ptr [EBP + -0x4],ESI
00a34842 : XOR ECX,ECX
00a34844 : PUSH 0xa
00a34846 : MOV word ptr [EBP + -0x28],CX
00a3484a : PUSH 0xcc0018
00a3484f : LEA ECX,[EBP + -0x2c]
00a34852 : MOV dword ptr [EBP + -0x14],EBX
00a34855 : MOV dword ptr [EBP + -0x18],ESI
00a34858 : CALL 0x00406360
00a3485d : MOV byte ptr [EBP + -0x4],0x1
00a34861 : MOV EBX,dword ptr [0x017251a0]
00a34867 : LEA EDX,[EBP + -0x68]
00a3486a : PUSH EDX
00a3486b : LEA EAX,[EBX + 0x4]
00a3486e : PUSH EAX
00a3486f : LEA ESI,[EBP + -0x2c]
00a34872 : CALL 0x0043acd0
00a34877 : MOV EBX,dword ptr [EBX + 0x8]
00a3487a : MOV EAX,dword ptr [EBP + -0x68]
00a3487d : CMP EAX,EBX
00a3487f : JNZ 0x00a34885
00a34881 : XOR EAX,EAX
00a34883 : JMP 0x00a34888
00a34885 : MOV EAX,dword ptr [EAX + 0x28]
00a34888 : MOV ECX,dword ptr [0x0172491c]
00a3488e : MOV ECX,dword ptr [ECX + 0x38c]
00a34894 : PUSH ECX
00a34895 : MOV EDX,EAX
00a34897 : LEA ECX,[EBP + -0x48]
00a3489a : CALL 0x00a6f150
00a3489f : MOV byte ptr [EBP + -0x4],0x0
00a348a3 : CMP dword ptr [EBP + -0x14],0x8
00a348a7 : JC 0x00a348b1
00a348a9 : MOV ECX,dword ptr [EBP + -0x28]
00a348ac : CALL 0x006f04e0
00a348b1 : MOV EAX,[0x0172491c]
00a348b6 : XOR EDX,EDX
00a348b8 : MOV dword ptr [EBP + -0x14],0x7
00a348bf : MOV dword ptr [EBP + -0x18],0x0
00a348c6 : MOV word ptr [EBP + -0x28],DX
00a348ca : MOV EAX,dword ptr [EAX + 0x17c]
00a348d0 : MOV dword ptr [EDI + 0xac],EAX
00a348d6 : TEST EAX,EAX
00a348d8 : JNZ 0x00a348ed
00a348da : MOV ESI,dword ptr [0x00da98e8]
00a348e0 : PUSH 0xcc0030
00a348e5 : CALL 0x008018d0
00a348ea : ADD ESP,0x4
00a348ed : MOV ECX,dword ptr [EDI + 0xac]
00a348f3 : MOV EDX,dword ptr [EDI + 0x5fc]
00a348f9 : PUSH ECX
00a348fa : PUSH EDX
00a348fb : CALL 0x00843b30
00a34900 : MOV EAX,dword ptr [EDI + 0xac]
00a34906 : PUSH EAX
00a34907 : LEA ESI,[EBP + -0x64]
00a3490a : CALL 0x008576d0
00a3490f : MOV byte ptr [EBP + -0x4],0x2
00a34913 : XORPS XMM0,XMM0
00a34916 : MOVSS XMM1,dword ptr [0x00c10fc4]
00a3491e : MOV ECX,dword ptr [EDI + 0x8]
00a34921 : LEA EAX,[EBP + 0xffffff7c]
00a34927 : PUSH EAX
00a34928 : LEA EAX,[EBP + -0x20]
00a3492b : PUSH EAX
00a3492c : MOVSS dword ptr [EBP + 0xffffff7c],XMM1
00a34934 : MOVSS dword ptr [EBP + -0x80],XMM1
00a34939 : MOVSS dword ptr [EBP + -0x7c],XMM1
00a3493e : MOVSS dword ptr [EBP + -0x20],XMM0
00a34943 : MOVSS dword ptr [EBP + -0x1c],XMM0
00a34948 : MOVSS dword ptr [EBP + -0x18],XMM0
00a3494d : MOVSS dword ptr [EBP + -0x14],XMM1
00a34952 : MOVSS dword ptr [EBP + -0x78],XMM0
00a34957 : MOVSS dword ptr [EBP + -0x74],XMM0
00a3495c : MOVSS dword ptr [EBP + -0x70],XMM0
00a34961 : MOV ECX,dword ptr [ECX + 0x24]
00a34964 : MOV EDX,dword ptr [ECX]
00a34966 : MOV EDX,dword ptr [EDX + 0x20]
00a34969 : LEA EAX,[EBP + -0x78]
00a3496c : PUSH EAX
00a3496d : MOV EAX,ESI
00a3496f : PUSH EAX
00a34970 : CALL EDX
00a34972 : MOV ECX,dword ptr [EDI + 0xac]
00a34978 : MOV EDX,dword ptr [ECX]
00a3497a : PUSH EAX
00a3497b : MOV EAX,dword ptr [EDX + 0x1ec]
00a34981 : CALL EAX
00a34983 : MOV ECX,dword ptr [EDI + 0xac]
00a34989 : MOV EDX,dword ptr [ECX]
00a3498b : MOV EAX,dword ptr [EDX + 0x1e8]
00a34991 : PUSH 0x0
00a34993 : CALL EAX
00a34995 : MOV ECX,dword ptr [EDI + 0xac]
00a3499b : MOV AL,byte ptr [ECX + 0x3ad]
00a349a1 : MOV EDX,dword ptr [ECX]
00a349a3 : MOV EDX,dword ptr [EDX + 0x258]
00a349a9 : TEST AL,AL
00a349ab : SETNZ AL
00a349ae : MOVZX EAX,AL
00a349b1 : PUSH EAX
00a349b2 : CALL EDX
00a349b4 : MOV EAX,dword ptr [EDI + 0xac]
00a349ba : MOV EBX,dword ptr [EAX + 0x8]
00a349bd : MOV ESI,dword ptr [0x00d7c54c]
00a349c3 : LEA ECX,[EBP + -0x68]
00a349c6 : PUSH ECX
00a349c7 : LEA ECX,[ESI + 0x40]
00a349ca : LEA EAX,[EBP + -0x6c]
00a349cd : MOV dword ptr [EBP + -0x68],EBX
00a349d0 : CALL 0x004437f0
00a349d5 : MOV ESI,dword ptr [ESI + 0x44]
00a349d8 : MOV EAX,dword ptr [EBP + -0x6c]
00a349db : CMP EAX,ESI
00a349dd : JZ 0x00a34a8a
00a349e3 : MOV ECX,dword ptr [EAX + 0x10]
00a349e6 : MOV dword ptr [EBP + -0x68],ECX
00a349e9 : TEST ECX,ECX
00a349eb : JZ 0x00a34a8a
00a349f1 : MOV EAX,dword ptr [ECX + 0x58]
00a349f4 : CMP EAX,0xa
00a349f7 : JBE 0x00a34a02
00a349f9 : MOV dword ptr [ECX + 0x58],0x5
00a34a00 : JMP 0x00a34a2c
00a34a02 : MOV ESI,dword ptr [0x00da98e8]
00a34a08 : PUSH EAX
00a34a09 : PUSH 0xcc0084
00a34a0e : PUSH 0xd10
00a34a13 : PUSH 0xcc00c0
00a34a18 : CALL 0x008018d0
00a34a1d : MOV EDX,dword ptr [EBP + -0x68]
00a34a20 : ADD ESP,0x10
00a34a23 : MOV dword ptr [EDX + 0x58],0xa
00a34a2a : MOV ECX,EDX
00a34a2c : MOV EDX,dword ptr [ECX + 0x58]
00a34a2f : CMP EDX,0xa
00a34a32 : JNC 0x00a34a78
00a34a34 : MOV EAX,dword ptr [ECX + 0xb8]
00a34a3a : TEST EAX,EAX
00a34a3c : JNZ 0x00a34a41
00a34a3e : LEA EAX,[EBP + -0x28]
00a34a41 : MOVZX EAX,word ptr [EAX + EDX*0x2 + 0xbc]
00a34a49 : MOV EDX,dword ptr [EDI + 0xac]
00a34a4f : MOV dword ptr [EDX + 0x1ef0],EAX
00a34a55 : ADD EAX,0x96
00a34a5a : MOV dword ptr [EBP + -0x6c],EAX
00a34a5d : FILD dword ptr [EBP + -0x6c]
00a34a60 : TEST EAX,EAX
00a34a62 : JGE 0x00a34a6a
00a34a64 : FADD float ptr [0x00cdf0e0]
00a34a6a : MOV EAX,[0x017251d0]
00a34a6f : MOV EAX,dword ptr [EAX + 0x38]
00a34a72 : FSTP float ptr [EAX + 0x133c]
00a34a78 : MOVZX EAX,word ptr [ECX + 0x5c]
00a34a7c : MOV ECX,dword ptr [EDI + 0xac]
00a34a82 : MOV dword ptr [ECX + 0xc4],EAX
00a34a88 : JMP 0x00a34aa8
00a34a8a : MOV ESI,dword ptr [0x00da98e8]
00a34a90 : PUSH EBX
00a34a91 : PUSH 0xcc011c
00a34a96 : PUSH 0xd1b
00a34a9b : PUSH 0xcc0158
00a34aa0 : CALL 0x008018d0
00a34aa5 : ADD ESP,0x10
00a34aa8 : PUSH EDI
00a34aa9 : CALL 0x00a34130
00a34aae : MOV ECX,dword ptr [0x0172491c]
00a34ab4 : MOV EAX,dword ptr [ECX + 0x90]
00a34aba : TEST EAX,EAX
00a34abc : JZ 0x00a34b3b
00a34abe : CMP dword ptr [EAX + 0x110],0x0
00a34ac5 : JZ 0x00a34b3b
00a34ac7 : MOV ECX,dword ptr [ECX + 0x174]
00a34acd : MOV dword ptr [EDI + 0xb0],ECX
00a34ad3 : MOV EDX,dword ptr [ECX]
00a34ad5 : MOV EAX,dword ptr [EDX + 0x244]
00a34adb : CALL EAX
00a34add : MOV ECX,dword ptr [EDI + 0xac]
00a34ae3 : MOV EAX,dword ptr [EDI + 0xb0]
00a34ae9 : PUSH ECX
00a34aea : CALL 0x00857210
00a34aef : MOV ECX,dword ptr [EDI + 0xb0]
00a34af5 : PUSH 0x0
00a34af7 : PUSH 0x3
00a34af9 : CALL 0x00a285e0
00a34afe : MOV EDX,dword ptr [0x0172491c]
00a34b04 : MOV ECX,dword ptr [EDX + 0x178]
00a34b0a : MOV dword ptr [EDI + 0xb4],ECX
00a34b10 : MOV EAX,dword ptr [ECX]
00a34b12 : MOV EDX,dword ptr [EAX + 0x244]
00a34b18 : CALL EDX
00a34b1a : MOV EAX,dword ptr [EDI + 0xac]
00a34b20 : PUSH EAX
00a34b21 : MOV EAX,dword ptr [EDI + 0xb4]
00a34b27 : CALL 0x00857210
00a34b2c : MOV ECX,dword ptr [EDI + 0xb4]
00a34b32 : PUSH 0x1
00a34b34 : PUSH 0x4
00a34b36 : CALL 0x00a285e0
00a34b3b : MOV dword ptr [EDI + 0xb8],0x0
00a34b45 : MOV byte ptr [EBP + -0x4],0x0
00a34b49 : MOV ESI,0x8
00a34b4e : CMP dword ptr [EBP + -0x4c],ESI
00a34b51 : JC 0x00a34b5b
00a34b53 : MOV ECX,dword ptr [EBP + -0x60]
00a34b56 : CALL 0x006f04e0
00a34b5b : MOV EBX,0x7
00a34b60 : XOR EDI,EDI
00a34b62 : XOR ECX,ECX
00a34b64 : MOV dword ptr [EBP + -0x4c],EBX
00a34b67 : MOV dword ptr [EBP + -0x50],EDI
00a34b6a : MOV word ptr [EBP + -0x60],CX
00a34b6e : MOV dword ptr [EBP + -0x4],0xffffffff
00a34b75 : CMP dword ptr [EBP + -0x30],ESI
00a34b78 : JC 0x00a34b82
00a34b7a : MOV ECX,dword ptr [EBP + -0x44]
00a34b7d : CALL 0x006f04e0
00a34b82 : XOR EDX,EDX
00a34b84 : MOV dword ptr [EBP + -0x30],EBX
00a34b87 : MOV dword ptr [EBP + -0x34],EDI
00a34b8a : MOV word ptr [EBP + -0x44],DX
00a34b8e : MOV ECX,dword ptr [EBP + -0xc]
00a34b91 : MOV dword ptr FS:[0x0],ECX
00a34b98 : POP ECX
00a34b99 : POP EDI
00a34b9a : POP ESI
00a34b9b : POP EBX
00a34b9c : MOV ECX,dword ptr [EBP + -0x10]
00a34b9f : XOR ECX,EBP
00a34ba1 : CALL 0x00633e6b
00a34ba6 : MOV ESP,EBP
00a34ba8 : POP EBP
00a34ba9 : RET
