PROGRAM  : Maestia.exe
FUNCTION : FUN_00736f50
ENTRY    : 00736f50
BODY     : [[00736f50, 00737114]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00736f50(int param_1,int param_2,int param_3,int param_4)

{
  undefined4 *puVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  float fVar6;
  int iVar7;
  int in_ECX;
  uint uVar8;
  uint uVar9;
  ushort uVar10;
  uint local_28;
  
  iVar7 = FUN_0070a3a0();
  fVar6 = DAT_00d72c24;
  uVar10 = 0;
  if (*(short *)(in_ECX + 0x10) != 0) {
    do {
      uVar8 = (uint)uVar10;
      iVar5 = uVar8 * 0xc;
      puVar1 = (undefined4 *)(iVar7 + uVar8 * 0x24);
      *puVar1 = *(undefined4 *)(iVar5 + param_1);
      puVar1[1] = *(undefined4 *)(iVar5 + 4 + param_1);
      puVar1[2] = *(undefined4 *)(iVar5 + 8 + param_1);
      puVar1[3] = *(undefined4 *)(iVar5 + param_2);
      puVar1[4] = *(undefined4 *)(iVar5 + 4 + param_2);
      puVar1[5] = *(undefined4 *)(iVar5 + 8 + param_2);
      puVar1[7] = *(undefined4 *)(param_3 + uVar8 * 8);
      puVar1[8] = *(undefined4 *)(param_3 + 4 + uVar8 * 8);
      fVar2 = *(float *)(iVar5 + param_4);
      fVar3 = *(float *)(iVar5 + 4 + param_4);
      fVar4 = *(float *)(iVar5 + 8 + param_4);
      if (fVar2 < 1.0) {
        if (0.0 < fVar2) {
          local_28 = (uint)(longlong)ROUND(fVar2 * 255.0 + fVar6);
          uVar8 = local_28;
        }
        else {
          uVar8 = 0;
        }
      }
      else {
        uVar8 = 0xff;
      }
      if (fVar3 < 1.0) {
        if (0.0 < fVar3) {
          local_28 = (uint)(longlong)ROUND(fVar3 * 255.0 + fVar6);
          uVar9 = local_28;
        }
        else {
          uVar9 = 0;
        }
      }
      else {
        uVar9 = 0xff;
      }
      if (fVar4 < 1.0) {
        if (0.0 < fVar4) {
          local_28 = (uint)(longlong)ROUND(fVar4 * 255.0 + fVar6);
        }
        else {
          local_28 = 0;
        }
      }
      else {
        local_28 = 0xff;
      }
      uVar10 = uVar10 + 1;
      puVar1[6] = ((uVar8 | 0xffffff00) << 8 | uVar9) << 8 | local_28;
    } while (uVar10 < *(ushort *)(in_ECX + 0x10));
  }
  FUN_007377f0(iVar7);
  FUN_0070a260(iVar7);
  return;
}



============================================================
DISASSEMBLY
============================================================
00736f50 : PUSH EBP
00736f51 : MOV EBP,ESP
00736f53 : AND ESP,0xfffffff8
00736f56 : SUB ESP,0x2c
00736f59 : PUSH EBX
00736f5a : MOV EBX,ECX
00736f5c : MOVZX EAX,word ptr [EBX + 0x10]
00736f60 : LEA ECX,[EAX + EAX*0x8]
00736f63 : ADD ECX,ECX
00736f65 : PUSH ESI
00736f66 : PUSH EDI
00736f67 : ADD ECX,ECX
00736f69 : MOV dword ptr [ESP + 0x24],EBX
00736f6d : CALL 0x0070a3a0
00736f72 : MOV EDI,EAX
00736f74 : XOR EAX,EAX
00736f76 : XOR ESI,ESI
00736f78 : MOV dword ptr [ESP + 0x14],EDI
00736f7c : CMP AX,word ptr [EBX + 0x10]
00736f80 : JNC 0x007370fb
00736f86 : FLD float ptr [0x00cdf130]
00736f8c : MOV EDI,dword ptr [EBP + 0x14]
00736f8f : MOVSS XMM3,dword ptr [0x00c10fc4]
00736f97 : FLD float ptr [0x00d72c24]
00736f9d : XORPS XMM4,XMM4
00736fa0 : MOV EBX,dword ptr [ESP + 0x14]
00736fa4 : MOVZX EDX,SI
00736fa7 : LEA EAX,[EDX + EDX*0x2]
00736faa : ADD EAX,EAX
00736fac : ADD EAX,EAX
00736fae : LEA ECX,[EDX + EDX*0x8]
00736fb1 : LEA ECX,[EBX + ECX*0x4]
00736fb4 : MOV EBX,dword ptr [EBP + 0x8]
00736fb7 : FLD float ptr [EAX + EBX*0x1]
00736fba : FSTP float ptr [ECX]
00736fbc : FLD float ptr [EAX + EBX*0x1 + 0x4]
00736fc0 : FSTP float ptr [ECX + 0x4]
00736fc3 : FLD float ptr [EAX + EBX*0x1 + 0x8]
00736fc7 : MOV EBX,dword ptr [EBP + 0xc]
00736fca : FSTP float ptr [ECX + 0x8]
00736fcd : FLD float ptr [EAX + EBX*0x1]
00736fd0 : FSTP float ptr [ECX + 0xc]
00736fd3 : FLD float ptr [EAX + EBX*0x1 + 0x4]
00736fd7 : FSTP float ptr [ECX + 0x10]
00736fda : FLD float ptr [EAX + EBX*0x1 + 0x8]
00736fde : MOV EBX,dword ptr [EBP + 0x10]
00736fe1 : FSTP float ptr [ECX + 0x14]
00736fe4 : FLD float ptr [EBX + EDX*0x8]
00736fe7 : FSTP float ptr [ECX + 0x1c]
00736fea : FLD float ptr [EBX + EDX*0x8 + 0x4]
00736fee : FSTP float ptr [ECX + 0x20]
00736ff1 : MOVSS XMM0,dword ptr [EAX + EDI*0x1]
00736ff6 : COMISS XMM0,XMM3
00736ff9 : MOVSS XMM1,dword ptr [EAX + EDI*0x1 + 0x4]
00736fff : MOVSS XMM2,dword ptr [EAX + EDI*0x1 + 0x8]
00737005 : MOVSS dword ptr [ESP + 0x28],XMM0
0073700b : MOVSS dword ptr [ESP + 0x2c],XMM1
00737011 : MOVSS dword ptr [ESP + 0x30],XMM2
00737017 : JC 0x00737020
00737019 : MOV EDX,0xff
0073701e : JMP 0x00737053
00737020 : COMISS XMM4,XMM0
00737023 : JC 0x00737029
00737025 : XOR EDX,EDX
00737027 : JMP 0x00737053
00737029 : FLD float ptr [ESP + 0x28]
0073702d : FNSTCW word ptr [ESP + 0x12]
00737031 : MOVZX EAX,word ptr [ESP + 0x12]
00737036 : FMUL ST2
00737038 : OR EAX,0xc00
0073703d : MOV dword ptr [ESP + 0x18],EAX
00737041 : FADD ST0,ST1
00737043 : FLDCW word ptr [ESP + 0x18]
00737047 : FISTP qword ptr [ESP + 0x18]
0073704b : MOV EDX,dword ptr [ESP + 0x18]
0073704f : FLDCW word ptr [ESP + 0x12]
00737053 : COMISS XMM1,XMM3
00737056 : JC 0x0073705f
00737058 : MOV EBX,0xff
0073705d : JMP 0x00737092
0073705f : COMISS XMM4,XMM1
00737062 : JC 0x00737068
00737064 : XOR EBX,EBX
00737066 : JMP 0x00737092
00737068 : FLD float ptr [ESP + 0x2c]
0073706c : FNSTCW word ptr [ESP + 0x12]
00737070 : MOVZX EAX,word ptr [ESP + 0x12]
00737075 : FMUL ST2
00737077 : OR EAX,0xc00
0073707c : MOV dword ptr [ESP + 0x18],EAX
00737080 : FADD ST0,ST1
00737082 : FLDCW word ptr [ESP + 0x18]
00737086 : FISTP qword ptr [ESP + 0x18]
0073708a : MOV EBX,dword ptr [ESP + 0x18]
0073708e : FLDCW word ptr [ESP + 0x12]
00737092 : COMISS XMM2,XMM3
00737095 : JC 0x0073709e
00737097 : MOV EAX,0xff
0073709c : JMP 0x007370d1
0073709e : COMISS XMM4,XMM2
007370a1 : JC 0x007370a7
007370a3 : XOR EAX,EAX
007370a5 : JMP 0x007370d1
007370a7 : FLD float ptr [ESP + 0x30]
007370ab : FNSTCW word ptr [ESP + 0x12]
007370af : MOVZX EAX,word ptr [ESP + 0x12]
007370b4 : FMUL ST2
007370b6 : OR EAX,0xc00
007370bb : MOV dword ptr [ESP + 0x18],EAX
007370bf : FADD ST0,ST1
007370c1 : FLDCW word ptr [ESP + 0x18]
007370c5 : FISTP qword ptr [ESP + 0x18]
007370c9 : MOV EAX,dword ptr [ESP + 0x18]
007370cd : FLDCW word ptr [ESP + 0x12]
007370d1 : OR EDX,0xffffff00
007370d7 : SHL EDX,0x8
007370da : OR EDX,EBX
007370dc : MOV EBX,dword ptr [ESP + 0x24]
007370e0 : SHL EDX,0x8
007370e3 : OR EDX,EAX
007370e5 : INC ESI
007370e6 : MOV dword ptr [ECX + 0x18],EDX
007370e9 : CMP SI,word ptr [EBX + 0x10]
007370ed : JC 0x00736fa0
007370f3 : MOV EDI,dword ptr [ESP + 0x14]
007370f7 : FSTP ST1
007370f9 : FSTP ST0
007370fb : PUSH EDI
007370fc : MOV ECX,EBX
007370fe : CALL 0x007377f0
00737103 : PUSH EDI
00737104 : CALL 0x0070a260
00737109 : ADD ESP,0x4
0073710c : POP EDI
0073710d : POP ESI
0073710e : POP EBX
0073710f : MOV ESP,EBP
00737111 : POP EBP
00737112 : RET 0x18
