PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac2040
ENTRY    : 00ac2040
BODY     : [[00ac2040, 00ac2193]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ac2040(undefined4 param_1)

{
  undefined4 uVar1;
  int in_ECX;
  uint local_4c;
  int local_48;
  LPCRITICAL_SECTION local_44;
  char *local_40;
  undefined4 local_3c;
  int local_38;
  undefined4 local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1c269;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  uVar1 = FUN_00404750(L"_key_%d",param_1,local_14);
  local_8 = 0;
  FUN_00403450(local_30,uVar1);
  local_8._0_1_ = 2;
  if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  FUN_0070c1f0();
  local_44 = (LPCRITICAL_SECTION)(in_ECX + 0x30);
  local_38 = 0;
  local_40 = ".\\Objects\\AvaCharacterOptionList.cpp";
  local_3c = 0x6f;
  local_34 = 1;
  FUN_006ef1a0(&local_44);
  local_8._0_1_ = 3;
  FUN_0044f270(in_ECX,&local_48,local_30);
  if (*(int *)(in_ECX + 8) == local_48) {
    local_8 = CONCAT31(local_8._1_3_,2);
    if (local_38 != 0) {
      LeaveCriticalSection(local_44);
      local_38 = 0;
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    local_8 = CONCAT31(local_8._1_3_,2);
    if (local_38 != 0) {
      LeaveCriticalSection(local_44);
      local_38 = 0;
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8 = 0xffffffff;
  local_2c = 0;
  local_1c = 0;
  local_18 = 7;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ac2040 : PUSH EBP
00ac2041 : MOV EBP,ESP
00ac2043 : PUSH -0x1
00ac2045 : PUSH 0xb1c269
00ac204a : MOV EAX,FS:[0x0]
00ac2050 : PUSH EAX
00ac2051 : SUB ESP,0x54
00ac2054 : MOV EAX,[0x00d66fa0]
00ac2059 : XOR EAX,EBP
00ac205b : MOV dword ptr [EBP + -0x10],EAX
00ac205e : PUSH EBX
00ac205f : PUSH ESI
00ac2060 : PUSH EDI
00ac2061 : PUSH EAX
00ac2062 : LEA EAX,[EBP + -0xc]
00ac2065 : MOV FS:[0x0],EAX
00ac206b : MOV EAX,dword ptr [EBP + 0x8]
00ac206e : MOV EBX,dword ptr [EBP + 0xc]
00ac2071 : PUSH EAX
00ac2072 : PUSH 0xc44b18
00ac2077 : LEA ESI,[EBP + -0x60]
00ac207a : MOV EDI,ECX
00ac207c : CALL 0x00404750
00ac2081 : XOR ESI,ESI
00ac2083 : MOV dword ptr [EBP + -0x4],ESI
00ac2086 : PUSH EAX
00ac2087 : LEA ECX,[EBP + -0x2c]
00ac208a : PUSH ECX
00ac208b : MOV ECX,EBX
00ac208d : CALL 0x00403450
00ac2092 : ADD ESP,0x10
00ac2095 : MOV BL,0x2
00ac2097 : MOV byte ptr [EBP + -0x4],BL
00ac209a : CMP dword ptr [EBP + -0x48],0x8
00ac209e : JC 0x00ac20a8
00ac20a0 : MOV ECX,dword ptr [EBP + -0x5c]
00ac20a3 : CALL 0x006f04e0
00ac20a8 : XOR EDX,EDX
00ac20aa : LEA ECX,[EBP + -0x2c]
00ac20ad : MOV dword ptr [EBP + -0x48],0x7
00ac20b4 : MOV dword ptr [EBP + -0x4c],ESI
00ac20b7 : MOV word ptr [EBP + -0x5c],DX
00ac20bb : CALL 0x0070c1f0
00ac20c0 : LEA ECX,[EBP + -0x40]
00ac20c3 : LEA EAX,[EDI + 0x30]
00ac20c6 : PUSH ECX
00ac20c7 : MOV dword ptr [EBP + -0x34],ESI
00ac20ca : MOV dword ptr [EBP + -0x40],EAX
00ac20cd : MOV dword ptr [EBP + -0x3c],0xc44b28
00ac20d4 : MOV dword ptr [EBP + -0x38],0x6f
00ac20db : MOV dword ptr [EBP + -0x30],0x1
00ac20e2 : CALL 0x006ef1a0
00ac20e7 : MOV byte ptr [EBP + -0x4],0x3
00ac20eb : LEA EDX,[EBP + -0x2c]
00ac20ee : PUSH EDX
00ac20ef : LEA EAX,[EBP + -0x44]
00ac20f2 : PUSH EAX
00ac20f3 : PUSH EDI
00ac20f4 : CALL 0x0044f270
00ac20f9 : MOV EDI,dword ptr [EDI + 0x8]
00ac20fc : MOV EAX,dword ptr [EBP + -0x44]
00ac20ff : CMP EDI,EAX
00ac2101 : JNZ 0x00ac2137
00ac2103 : MOV byte ptr [EBP + -0x4],BL
00ac2106 : CMP dword ptr [EBP + -0x34],ESI
00ac2109 : JZ 0x00ac2118
00ac210b : MOV ECX,dword ptr [EBP + -0x40]
00ac210e : PUSH ECX
00ac210f : CALL dword ptr [0x00b8511c]
00ac2115 : MOV dword ptr [EBP + -0x34],ESI
00ac2118 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac211f : CMP dword ptr [EBP + -0x14],0x8
00ac2123 : JC 0x00ac212d
00ac2125 : MOV ECX,dword ptr [EBP + -0x28]
00ac2128 : CALL 0x006f04e0
00ac212d : XOR EDX,EDX
00ac212f : MOV word ptr [EBP + -0x28],DX
00ac2133 : XOR EAX,EAX
00ac2135 : JMP 0x00ac216c
00ac2137 : MOV EDI,dword ptr [EAX + 0x24]
00ac213a : MOV byte ptr [EBP + -0x4],BL
00ac213d : CMP dword ptr [EBP + -0x34],ESI
00ac2140 : JZ 0x00ac214f
00ac2142 : MOV EAX,dword ptr [EBP + -0x40]
00ac2145 : PUSH EAX
00ac2146 : CALL dword ptr [0x00b8511c]
00ac214c : MOV dword ptr [EBP + -0x34],ESI
00ac214f : MOV dword ptr [EBP + -0x4],0xffffffff
00ac2156 : CMP dword ptr [EBP + -0x14],0x8
00ac215a : JC 0x00ac2164
00ac215c : MOV ECX,dword ptr [EBP + -0x28]
00ac215f : CALL 0x006f04e0
00ac2164 : XOR ECX,ECX
00ac2166 : MOV word ptr [EBP + -0x28],CX
00ac216a : MOV EAX,EDI
00ac216c : MOV dword ptr [EBP + -0x18],ESI
00ac216f : MOV dword ptr [EBP + -0x14],0x7
00ac2176 : MOV ECX,dword ptr [EBP + -0xc]
00ac2179 : MOV dword ptr FS:[0x0],ECX
00ac2180 : POP ECX
00ac2181 : POP EDI
00ac2182 : POP ESI
00ac2183 : POP EBX
00ac2184 : MOV ECX,dword ptr [EBP + -0x10]
00ac2187 : XOR ECX,EBP
00ac2189 : CALL 0x00633e6b
00ac218e : MOV ESP,EBP
00ac2190 : POP EBP
00ac2191 : RET 0x8
