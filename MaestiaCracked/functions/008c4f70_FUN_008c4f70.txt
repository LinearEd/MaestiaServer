PROGRAM  : Maestia.exe
FUNCTION : FUN_008c4f70
ENTRY    : 008c4f70
BODY     : [[008c4f70, 008c50da]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008c4f70(short param_1)

{
  short sVar1;
  char *pcVar2;
  int *piVar3;
  int iVar4;
  short sVar5;
  int iVar6;
  int unaff_ESI;
  int *piVar7;
  
  sVar1 = *(short *)(unaff_ESI + 0x4c);
  piVar7 = *(int **)(unaff_ESI + 0x3c);
  sVar5 = 0;
  if (piVar7 == *(int **)(unaff_ESI + 0x40)) {
    return;
  }
  do {
    if (sVar5 == (short)(sVar1 + param_1)) {
      pcVar2 = (char *)*piVar7;
      if (*pcVar2 == '\0') {
        *pcVar2 = '\x01';
      }
      else {
        *pcVar2 = '\0';
      }
      FUN_008c4e30(unaff_ESI);
      piVar3 = DAT_00da9894;
      if (*(char *)(unaff_ESI + 0x48) != '\0') {
        *(undefined1 *)(unaff_ESI + 0x48) = 0;
        if ((*piVar3 != 0) && (piVar3 = *(int **)(*piVar3 + 0x114), piVar3 != (int *)0x0)) {
          (**(code **)(*piVar3 + 4))(piVar3,"RepairPopupCheckEquipItemRepair",&DAT_00c4f8a4,0);
        }
      }
      piVar3 = DAT_00da9894;
      if (*(char *)(unaff_ESI + 0x49) != '\0') {
        *(undefined1 *)(unaff_ESI + 0x49) = 0;
        if ((*piVar3 != 0) && (piVar3 = *(int **)(*piVar3 + 0x114), piVar3 != (int *)0x0)) {
          (**(code **)(*piVar3 + 4))(piVar3,"RepairPopupCheckAllItemRepair",&DAT_00c4f8c8,0);
        }
      }
      if (*(int *)(*piVar7 + 8) != 0) {
        iVar6 = FUN_009f2740(*(undefined4 *)(*(int *)(*piVar7 + 8) + 0x10));
        iVar4 = *DAT_00da9894;
        if (*(char *)*piVar7 == '\0') {
          if (iVar4 == 0) {
            return;
          }
          piVar7 = *(int **)(iVar4 + 0x114);
          if (piVar7 == (int *)0x0) {
            return;
          }
          (**(code **)(*piVar7 + 4))
                    (piVar7,"RepairPopupSelectedCancelItem","%d,%b",param_1,
                     *(undefined1 *)(iVar6 + 0xb1));
          return;
        }
        if (iVar4 == 0) {
          return;
        }
        piVar7 = *(int **)(iVar4 + 0x114);
        if (piVar7 == (int *)0x0) {
          return;
        }
        (**(code **)(*piVar7 + 4))
                  (piVar7,"RepairPopupSelectedItem","%d,%b",param_1,*(undefined1 *)(iVar6 + 0xb1));
        return;
      }
    }
    else {
      sVar5 = sVar5 + 1;
      piVar7 = piVar7 + 1;
    }
    if (piVar7 == *(int **)(unaff_ESI + 0x40)) {
      return;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
008c4f70 : PUSH EBP
008c4f71 : MOV EBP,ESP
008c4f73 : SUB ESP,0xc
008c4f76 : MOV AX,word ptr [ESI + 0x4c]
008c4f7a : ADD AX,word ptr [EBP + 0x8]
008c4f7e : PUSH EBX
008c4f7f : PUSH EDI
008c4f80 : MOV EDI,dword ptr [ESI + 0x3c]
008c4f83 : MOVZX ECX,AX
008c4f86 : XOR EBX,EBX
008c4f88 : MOV dword ptr [EBP + -0x8],ECX
008c4f8b : MOV dword ptr [EBP + -0x4],EBX
008c4f8e : CMP EDI,dword ptr [ESI + 0x40]
008c4f91 : JZ 0x008c50d3
008c4f97 : MOV DX,word ptr [EBP + -0x4]
008c4f9b : CMP DX,word ptr [EBP + -0x8]
008c4f9f : JNZ 0x008c508c
008c4fa5 : MOV EAX,dword ptr [EDI]
008c4fa7 : MOV ECX,dword ptr [ESI + 0x50]
008c4faa : CMP byte ptr [EAX],BL
008c4fac : JZ 0x008c4fb7
008c4fae : MOV byte ptr [EAX],BL
008c4fb0 : MOV EAX,dword ptr [EDI]
008c4fb2 : SUB ECX,dword ptr [EAX + 0x4]
008c4fb5 : JMP 0x008c4fbf
008c4fb7 : MOV byte ptr [EAX],0x1
008c4fba : MOV EDX,dword ptr [EDI]
008c4fbc : ADD ECX,dword ptr [EDX + 0x4]
008c4fbf : PUSH ESI
008c4fc0 : CALL 0x008c4e30
008c4fc5 : CMP byte ptr [ESI + 0x48],BL
008c4fc8 : JZ 0x008c4ff8
008c4fca : MOV EAX,[0x00da9894]
008c4fcf : MOV byte ptr [ESI + 0x48],BL
008c4fd2 : MOV EAX,dword ptr [EAX]
008c4fd4 : CMP EAX,EBX
008c4fd6 : JZ 0x008c4ff8
008c4fd8 : MOV EAX,dword ptr [EAX + 0x114]
008c4fde : CMP EAX,EBX
008c4fe0 : JZ 0x008c4ff8
008c4fe2 : MOV ECX,dword ptr [EAX]
008c4fe4 : MOV EDX,dword ptr [ECX + 0x4]
008c4fe7 : PUSH EBX
008c4fe8 : PUSH 0xc4f8a4
008c4fed : PUSH 0xc4f8a8
008c4ff2 : PUSH EAX
008c4ff3 : CALL EDX
008c4ff5 : ADD ESP,0x10
008c4ff8 : CMP byte ptr [ESI + 0x49],BL
008c4ffb : JZ 0x008c502b
008c4ffd : MOV EAX,[0x00da9894]
008c5002 : MOV byte ptr [ESI + 0x49],BL
008c5005 : MOV EAX,dword ptr [EAX]
008c5007 : CMP EAX,EBX
008c5009 : JZ 0x008c502b
008c500b : MOV EAX,dword ptr [EAX + 0x114]
008c5011 : CMP EAX,EBX
008c5013 : JZ 0x008c502b
008c5015 : MOV ECX,dword ptr [EAX]
008c5017 : MOV EDX,dword ptr [ECX + 0x4]
008c501a : PUSH EBX
008c501b : PUSH 0xc4f8c8
008c5020 : PUSH 0xc4f8cc
008c5025 : PUSH EAX
008c5026 : CALL EDX
008c5028 : ADD ESP,0x10
008c502b : MOV EAX,dword ptr [EDI]
008c502d : CMP dword ptr [EAX + 0x8],EBX
008c5030 : JZ 0x008c5092
008c5032 : MOV ECX,EAX
008c5034 : MOV EDX,dword ptr [ECX + 0x8]
008c5037 : MOV EAX,dword ptr [EDX + 0x10]
008c503a : MOV ECX,dword ptr [0x017247f0]
008c5040 : PUSH EAX
008c5041 : CALL 0x009f2740
008c5046 : MOV ECX,dword ptr [EDI]
008c5048 : MOV EDX,dword ptr [0x00da9894]
008c504e : CMP byte ptr [ECX],BL
008c5050 : MOV ECX,dword ptr [EDX]
008c5052 : JZ 0x008c50a3
008c5054 : CMP ECX,EBX
008c5056 : JZ 0x008c50d3
008c5058 : MOV ECX,dword ptr [ECX + 0x114]
008c505e : CMP ECX,EBX
008c5060 : JZ 0x008c50d3
008c5062 : MOVZX EAX,byte ptr [EAX + 0xb1]
008c5069 : MOV EDX,dword ptr [ECX]
008c506b : PUSH EAX
008c506c : MOVZX EAX,word ptr [EBP + 0x8]
008c5070 : PUSH EAX
008c5071 : PUSH 0xc4f9b0
008c5076 : PUSH 0xc4f9b8
008c507b : PUSH ECX
008c507c : MOV ECX,dword ptr [EDX + 0x4]
008c507f : CALL ECX
008c5081 : ADD ESP,0x14
008c5084 : POP EDI
008c5085 : POP EBX
008c5086 : MOV ESP,EBP
008c5088 : POP EBP
008c5089 : RET 0x4
008c508c : INC dword ptr [EBP + -0x4]
008c508f : ADD EDI,0x4
008c5092 : CMP EDI,dword ptr [ESI + 0x40]
008c5095 : JNZ 0x008c4f97
008c509b : POP EDI
008c509c : POP EBX
008c509d : MOV ESP,EBP
008c509f : POP EBP
008c50a0 : RET 0x4
008c50a3 : CMP ECX,EBX
008c50a5 : JZ 0x008c50d3
008c50a7 : MOV ECX,dword ptr [ECX + 0x114]
008c50ad : CMP ECX,EBX
008c50af : JZ 0x008c50d3
008c50b1 : MOVZX EAX,byte ptr [EAX + 0xb1]
008c50b8 : MOV EDX,dword ptr [ECX]
008c50ba : PUSH EAX
008c50bb : MOVZX EAX,word ptr [EBP + 0x8]
008c50bf : PUSH EAX
008c50c0 : PUSH 0xc4f9d0
008c50c5 : PUSH 0xc4f9d8
008c50ca : PUSH ECX
008c50cb : MOV ECX,dword ptr [EDX + 0x4]
008c50ce : CALL ECX
008c50d0 : ADD ESP,0x14
008c50d3 : POP EDI
008c50d4 : POP EBX
008c50d5 : MOV ESP,EBP
008c50d7 : POP EBP
008c50d8 : RET 0x4
