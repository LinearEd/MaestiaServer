PROGRAM  : Maestia.exe
FUNCTION : FUN_00930c10
ENTRY    : 00930c10
BODY     : [[00930c10, 00930dbf]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00930c10(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  undefined2 uVar5;
  int in_ECX;
  char cVar7;
  int *piVar6;
  uint local_38;
  undefined1 local_34 [24];
  uint local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar1 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2ccb8;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar3 = *(int *)(in_ECX + 0x4c);
  if (iVar3 == 0) {
    cVar7 = '\0';
  }
  else {
    cVar7 = (char)((uint)*(undefined4 *)(iVar3 + 0x10) >> 0x18);
  }
  if (cVar7 == '\x06') {
    if (iVar3 == 0) {
      local_14 = 0;
    }
    else {
      local_14 = *(undefined4 *)(iVar3 + 0x10);
    }
    FUN_004437f0(&local_14);
    if (local_18 == *(int *)(iVar1 + 0x44)) {
      piVar6 = (int *)0x0;
    }
    else {
      piVar6 = *(int **)(local_18 + 0x10);
    }
    iVar3 = (**(code **)(*piVar6 + 0x3c))();
    if (iVar3 != 0) {
      FUN_00406460(L"IDS_GUI_EQUIP_CANT_REGIST_QUICKSLOT");
      local_8 = 0;
      uVar4 = FUN_0081d120(local_34);
      local_8._0_1_ = 1;
      FUN_0096b1e0(uVar4,0xffff0000,0x12);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      goto LAB_00930cee;
    }
  }
  if (*(int *)(in_ECX + 0x4c) == 0) {
    uVar5 = 0;
  }
  else {
    uVar5 = (undefined2)((uint)*(undefined4 *)(*(int *)(in_ECX + 0x4c) + 0x10) >> 0x10);
  }
  if ((char)uVar5 != 'p') {
    ExceptionList = local_10;
    return CONCAT31((uint3)(byte)((ushort)uVar5 >> 8),1);
  }
  FUN_00406460(L"IDS_GUI_UPGRADE_THING_CANT_REGIST_QUICKSLOT");
  local_8 = 2;
  uVar4 = FUN_0081d120(local_34);
  local_8._0_1_ = 3;
  FUN_0096b1e0(uVar4,0xffff0000,0x12);
  local_8 = CONCAT31(local_8._1_3_,2);
  if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0(uVar2);
  }
LAB_00930cee:
  local_8 = 0xffffffff;
  if (local_1c < 8) {
    ExceptionList = local_10;
    return 0;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00930c10 : PUSH EBP
00930c11 : MOV EBP,ESP
00930c13 : PUSH -0x1
00930c15 : PUSH 0xb2ccb8
00930c1a : MOV EAX,FS:[0x0]
00930c20 : PUSH EAX
00930c21 : SUB ESP,0x40
00930c24 : PUSH EBX
00930c25 : PUSH ESI
00930c26 : PUSH EDI
00930c27 : MOV EAX,[0x00d66fa0]
00930c2c : XOR EAX,EBP
00930c2e : PUSH EAX
00930c2f : LEA EAX,[EBP + -0xc]
00930c32 : MOV FS:[0x0],EAX
00930c38 : MOV EDI,ECX
00930c3a : MOV EAX,dword ptr [EDI + 0x4c]
00930c3d : XOR EBX,EBX
00930c3f : CMP EAX,EBX
00930c41 : JZ 0x00930c48
00930c43 : MOV ECX,dword ptr [EAX + 0x10]
00930c46 : JMP 0x00930c4a
00930c48 : XOR ECX,ECX
00930c4a : SHR ECX,0x18
00930c4d : CMP CL,0x6
00930c50 : JNZ 0x00930d35
00930c56 : CMP EAX,EBX
00930c58 : JZ 0x00930c5f
00930c5a : MOV EAX,dword ptr [EAX + 0x10]
00930c5d : JMP 0x00930c61
00930c5f : XOR EAX,EAX
00930c61 : MOV ESI,dword ptr [0x00d7c54c]
00930c67 : MOV dword ptr [EBP + -0x10],EAX
00930c6a : LEA EAX,[EBP + -0x10]
00930c6d : PUSH EAX
00930c6e : LEA ECX,[ESI + 0x40]
00930c71 : LEA EAX,[EBP + -0x14]
00930c74 : CALL 0x004437f0
00930c79 : MOV ESI,dword ptr [ESI + 0x44]
00930c7c : MOV EAX,dword ptr [EBP + -0x14]
00930c7f : CMP EAX,ESI
00930c81 : JZ 0x00930c88
00930c83 : MOV ECX,dword ptr [EAX + 0x10]
00930c86 : JMP 0x00930c8a
00930c88 : XOR ECX,ECX
00930c8a : MOV EDX,dword ptr [ECX]
00930c8c : MOV EAX,dword ptr [EDX + 0x3c]
00930c8f : CALL EAX
00930c91 : TEST EAX,EAX
00930c93 : JZ 0x00930d35
00930c99 : PUSH 0xc6dcb0
00930c9e : LEA ECX,[EBP + -0x30]
00930ca1 : CALL 0x00406460
00930ca6 : MOV dword ptr [EBP + -0x4],EBX
00930ca9 : LEA ECX,[EBP + -0x30]
00930cac : PUSH ECX
00930cad : MOV ECX,dword ptr [0x0172491c]
00930cb3 : LEA EDI,[EBP + -0x4c]
00930cb6 : CALL 0x0081d120
00930cbb : MOV byte ptr [EBP + -0x4],0x1
00930cbf : MOV EDX,dword ptr [EBP + 0x8]
00930cc2 : MOV ECX,dword ptr [EDX + 0x4]
00930cc5 : MOV ECX,dword ptr [ECX + 0x134]
00930ccb : PUSH 0x12
00930ccd : PUSH 0xffff0000
00930cd2 : PUSH EAX
00930cd3 : CALL 0x0096b1e0
00930cd8 : MOV byte ptr [EBP + -0x4],0x0
00930cdc : MOV ESI,0x8
00930ce1 : CMP dword ptr [EBP + -0x34],ESI
00930ce4 : JC 0x00930cee
00930ce6 : MOV ECX,dword ptr [EBP + -0x48]
00930ce9 : CALL 0x006f04e0
00930cee : MOV EDI,0x7
00930cf3 : XOR EDX,EDX
00930cf5 : MOV dword ptr [EBP + -0x34],EDI
00930cf8 : MOV dword ptr [EBP + -0x38],EBX
00930cfb : MOV word ptr [EBP + -0x48],DX
00930cff : MOV dword ptr [EBP + -0x4],0xffffffff
00930d06 : CMP dword ptr [EBP + -0x18],ESI
00930d09 : JC 0x00930d13
00930d0b : MOV ECX,dword ptr [EBP + -0x2c]
00930d0e : CALL 0x006f04e0
00930d13 : XOR EAX,EAX
00930d15 : MOV word ptr [EBP + -0x2c],AX
00930d19 : MOV dword ptr [EBP + -0x18],EDI
00930d1c : MOV dword ptr [EBP + -0x1c],EBX
00930d1f : XOR AL,AL
00930d21 : MOV ECX,dword ptr [EBP + -0xc]
00930d24 : MOV dword ptr FS:[0x0],ECX
00930d2b : POP ECX
00930d2c : POP EDI
00930d2d : POP ESI
00930d2e : POP EBX
00930d2f : MOV ESP,EBP
00930d31 : POP EBP
00930d32 : RET 0x4
00930d35 : MOV EAX,dword ptr [EDI + 0x4c]
00930d38 : CMP EAX,EBX
00930d3a : JZ 0x00930d41
00930d3c : MOV EAX,dword ptr [EAX + 0x10]
00930d3f : JMP 0x00930d43
00930d41 : XOR EAX,EAX
00930d43 : SHR EAX,0x10
00930d46 : CMP AL,0x70
00930d48 : JNZ 0x00930daa
00930d4a : PUSH 0xc6dcf8
00930d4f : LEA ECX,[EBP + -0x30]
00930d52 : CALL 0x00406460
00930d57 : MOV EBX,0x2
00930d5c : MOV dword ptr [EBP + -0x4],EBX
00930d5f : LEA ECX,[EBP + -0x30]
00930d62 : PUSH ECX
00930d63 : MOV ECX,dword ptr [0x0172491c]
00930d69 : LEA EDI,[EBP + -0x4c]
00930d6c : CALL 0x0081d120
00930d71 : MOV byte ptr [EBP + -0x4],0x3
00930d75 : MOV EDX,dword ptr [EBP + 0x8]
00930d78 : MOV ECX,dword ptr [EDX + 0x4]
00930d7b : MOV ECX,dword ptr [ECX + 0x134]
00930d81 : PUSH 0x12
00930d83 : PUSH 0xffff0000
00930d88 : PUSH EAX
00930d89 : CALL 0x0096b1e0
00930d8e : MOV byte ptr [EBP + -0x4],BL
00930d91 : MOV ESI,0x8
00930d96 : CMP dword ptr [EBP + -0x34],ESI
00930d99 : JC 0x00930da3
00930d9b : MOV ECX,dword ptr [EBP + -0x48]
00930d9e : CALL 0x006f04e0
00930da3 : XOR EBX,EBX
00930da5 : JMP 0x00930cee
00930daa : MOV AL,0x1
00930dac : MOV ECX,dword ptr [EBP + -0xc]
00930daf : MOV dword ptr FS:[0x0],ECX
00930db6 : POP ECX
00930db7 : POP EDI
00930db8 : POP ESI
00930db9 : POP EBX
00930dba : MOV ESP,EBP
00930dbc : POP EBP
00930dbd : RET 0x4
