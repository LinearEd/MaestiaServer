PROGRAM  : Maestia.exe
FUNCTION : FUN_0078d940
ENTRY    : 0078d940
BODY     : [[0078d940, 0078dca6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0078d940(void)

{
  float *pfVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  int *piVar7;
  int iVar8;
  int in_ECX;
  float fVar9;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  int iStack_18;
  int iStack_14;
  int iStack_10;
  int iStack_c;
  
  local_28 = *(undefined4 *)(in_ECX + 0x74);
  local_24 = *(undefined4 *)(in_ECX + 0x78);
  local_20 = *(undefined4 *)(in_ECX + 0x7c);
  local_1c = *(undefined4 *)(in_ECX + 0x80);
  if (*(char *)(in_ECX + 0x13d) != '\0') {
    D3DXQuaternionMultiply(&local_28,&local_28,in_ECX + 0x1c8);
  }
  pfVar1 = (float *)(in_ECX + 0xb8);
  *(undefined4 *)(in_ECX + 0x168) = *(undefined4 *)(in_ECX + 0x15c);
  *(undefined4 *)(in_ECX + 0x16c) = *(undefined4 *)(in_ECX + 0x160);
  *(undefined4 *)(in_ECX + 0x170) = *(undefined4 *)(in_ECX + 0x164);
  *(float *)(in_ECX + 0x15c) = *pfVar1;
  *(undefined4 *)(in_ECX + 0x160) = *(undefined4 *)(in_ECX + 0xbc);
  *(undefined4 *)(in_ECX + 0x164) = *(undefined4 *)(in_ECX + 0xc0);
  if (*(int *)(in_ECX + 0x2c) == 0) {
    *pfVar1 = *(float *)(in_ECX + 0x68);
    *(undefined4 *)(in_ECX + 0xbc) = *(undefined4 *)(in_ECX + 0x6c);
    *(undefined4 *)(in_ECX + 0xc0) = *(undefined4 *)(in_ECX + 0x70);
    *(ulonglong *)(in_ECX + 0xc4) = CONCAT44(local_24,local_28);
    *(ulonglong *)(in_ECX + 0xcc) = CONCAT44(local_1c,local_20);
    *(undefined4 *)(in_ECX + 0xd4) = *(undefined4 *)(in_ECX + 0x84);
    *(undefined4 *)(in_ECX + 0xd8) = *(undefined4 *)(in_ECX + 0x88);
    *(undefined4 *)(in_ECX + 0xdc) = *(undefined4 *)(in_ECX + 0x8c);
  }
  else {
    if (*(char *)(in_ECX + 0x148) != '\0') {
      D3DXQuaternionMultiply(&local_28,&local_28,in_ECX + 0x14c);
    }
    piVar7 = *(int **)(in_ECX + 0x2c);
    if ((*(char *)((int)piVar7 + 0x5d) != '\0') || (*(char *)((int)piVar7 + 0x13d) != '\0')) {
      (**(code **)(*piVar7 + 0x14))();
    }
    iStack_14 = piVar7[0x32];
    iStack_10 = piVar7[0x33];
    iStack_c = piVar7[0x34];
    iStack_18 = piVar7[0x31];
    piVar7 = *(int **)(in_ECX + 0x2c);
    if (*(char *)((int)piVar7 + 0x5d) != '\0') {
      (**(code **)(*piVar7 + 0x14))();
    }
    fVar9 = (float)piVar7[0x2e];
    iVar8 = *(int *)(in_ECX + 0x2c);
    fVar2 = (float)piVar7[0x2f];
    fVar3 = (float)piVar7[0x30];
    fVar4 = *(float *)(iVar8 + 0xd4);
    fVar5 = *(float *)(iVar8 + 0xd8);
    fVar6 = *(float *)(iVar8 + 0xdc);
    if (*(char *)(in_ECX + 0x65) == '\0') {
      *(ulonglong *)(in_ECX + 0xc4) = CONCAT44(local_24,local_28);
      *(ulonglong *)(in_ECX + 0xcc) = CONCAT44(local_1c,local_20);
    }
    else {
      D3DXQuaternionMultiply(in_ECX + 0xc4,&local_28,&iStack_18);
    }
    FUN_0043d620(pfVar1);
    *pfVar1 = fVar4 * *pfVar1;
    *(float *)(in_ECX + 0xbc) = fVar5 * *(float *)(in_ECX + 0xbc);
    *(float *)(in_ECX + 0xc0) = fVar6 * *(float *)(in_ECX + 0xc0);
    *pfVar1 = *pfVar1 + fVar9;
    *(float *)(in_ECX + 0xbc) = fVar2 + *(float *)(in_ECX + 0xbc);
    *(float *)(in_ECX + 0xc0) = fVar3 + *(float *)(in_ECX + 0xc0);
    *(float *)(in_ECX + 0xbc) = *(float *)(in_ECX + 0xa8) + *(float *)(in_ECX + 0xbc);
    fVar9 = *(float *)(in_ECX + 0x9c) * *(float *)(in_ECX + 0x84);
    *(float *)(in_ECX + 0xd4) = fVar9;
    *(float *)(in_ECX + 0xd8) = *(float *)(in_ECX + 0xa0) * *(float *)(in_ECX + 0x88);
    *(float *)(in_ECX + 0xdc) = *(float *)(in_ECX + 0xa4) * *(float *)(in_ECX + 0x8c);
    if (*(char *)(in_ECX + 100) != '\0') {
      *(float *)(in_ECX + 0xd4) = fVar9 * fVar4;
      *(float *)(in_ECX + 0xd8) = fVar5 * *(float *)(in_ECX + 0xd8);
      *(float *)(in_ECX + 0xdc) = fVar6 * *(float *)(in_ECX + 0xdc);
    }
  }
  *(undefined1 *)(in_ECX + 0x13d) = 0;
  *(undefined1 *)(in_ECX + 0x5d) = 0;
  *(undefined1 *)(in_ECX + 0x134) = 1;
  return;
}



============================================================
DISASSEMBLY
============================================================
0078d940 : PUSH EBP
0078d941 : MOV EBP,ESP
0078d943 : AND ESP,0xfffffff8
0078d946 : SUB ESP,0x44
0078d949 : PUSH EBX
0078d94a : PUSH ESI
0078d94b : MOV ESI,ECX
0078d94d : CMP byte ptr [ESI + 0x13d],0x0
0078d954 : MOVSS XMM0,dword ptr [ESI + 0x74]
0078d959 : MOVSS dword ptr [ESP + 0x2c],XMM0
0078d95f : MOVSS XMM0,dword ptr [ESI + 0x78]
0078d964 : MOVSS dword ptr [ESP + 0x30],XMM0
0078d96a : MOVSS XMM0,dword ptr [ESI + 0x7c]
0078d96f : MOVSS dword ptr [ESP + 0x34],XMM0
0078d975 : MOVSS XMM0,dword ptr [ESI + 0x80]
0078d97d : PUSH EDI
0078d97e : MOVSS dword ptr [ESP + 0x3c],XMM0
0078d984 : JZ 0x0078d99a
0078d986 : LEA EAX,[ESI + 0x1c8]
0078d98c : PUSH EAX
0078d98d : LEA ECX,[ESP + 0x34]
0078d991 : PUSH ECX
0078d992 : MOV EDX,ECX
0078d994 : PUSH EDX
0078d995 : CALL 0x004ff716
0078d99a : FLD float ptr [ESI + 0x15c]
0078d9a0 : LEA EDI,[ESI + 0xb8]
0078d9a6 : FSTP float ptr [ESI + 0x168]
0078d9ac : FLD float ptr [ESI + 0x160]
0078d9b2 : FSTP float ptr [ESI + 0x16c]
0078d9b8 : FLD float ptr [ESI + 0x164]
0078d9be : FSTP float ptr [ESI + 0x170]
0078d9c4 : FLD float ptr [EDI]
0078d9c6 : FSTP float ptr [ESI + 0x15c]
0078d9cc : FLD float ptr [EDI + 0x4]
0078d9cf : FSTP float ptr [ESI + 0x160]
0078d9d5 : FLD float ptr [EDI + 0x8]
0078d9d8 : FSTP float ptr [ESI + 0x164]
0078d9de : CMP dword ptr [ESI + 0x2c],0x0
0078d9e2 : JZ 0x0078dc3d
0078d9e8 : CMP byte ptr [ESI + 0x148],0x0
0078d9ef : JZ 0x0078da05
0078d9f1 : LEA EAX,[ESI + 0x14c]
0078d9f7 : PUSH EAX
0078d9f8 : LEA ECX,[ESP + 0x34]
0078d9fc : PUSH ECX
0078d9fd : MOV EDX,ECX
0078d9ff : PUSH EDX
0078da00 : CALL 0x004ff716
0078da05 : MOV EBX,dword ptr [ESI + 0x2c]
0078da08 : CMP byte ptr [EBX + 0x5d],0x0
0078da0c : JNZ 0x0078da17
0078da0e : CMP byte ptr [EBX + 0x13d],0x0
0078da15 : JZ 0x0078da20
0078da17 : MOV EAX,dword ptr [EBX]
0078da19 : MOV EDX,dword ptr [EAX + 0x14]
0078da1c : MOV ECX,EBX
0078da1e : CALL EDX
0078da20 : MOVSS XMM0,dword ptr [EBX + 0xc8]
0078da28 : MOVSS XMM1,dword ptr [EBX + 0xcc]
0078da30 : MOVSS XMM2,dword ptr [EBX + 0xd0]
0078da38 : MOVSS XMM3,dword ptr [EBX + 0xc4]
0078da40 : MOV EBX,dword ptr [ESI + 0x2c]
0078da43 : MOVSS dword ptr [ESP + 0x40],XMM3
0078da49 : MOVSS dword ptr [ESP + 0x44],XMM0
0078da4f : MOVSS dword ptr [ESP + 0x48],XMM1
0078da55 : MOVSS dword ptr [ESP + 0x4c],XMM2
0078da5b : CMP byte ptr [EBX + 0x5d],0x0
0078da5f : JZ 0x0078da6a
0078da61 : MOV EAX,dword ptr [EBX]
0078da63 : MOV EDX,dword ptr [EAX + 0x14]
0078da66 : MOV ECX,EBX
0078da68 : CALL EDX
0078da6a : MOVSS XMM0,dword ptr [EBX + 0xb8]
0078da72 : MOV EAX,dword ptr [ESI + 0x2c]
0078da75 : MOVSS XMM1,dword ptr [ESI + 0x94]
0078da7d : MOVSS XMM2,dword ptr [ESI + 0x98]
0078da85 : ADDSS XMM1,dword ptr [ESI + 0x6c]
0078da8a : ADDSS XMM2,dword ptr [ESI + 0x70]
0078da8f : MOVSS dword ptr [ESP + 0x18],XMM0
0078da95 : MOVSS XMM0,dword ptr [EBX + 0xbc]
0078da9d : MOVSS dword ptr [ESP + 0x1c],XMM0
0078daa3 : MOVSS XMM0,dword ptr [EBX + 0xc0]
0078daab : MOVSS dword ptr [ESP + 0x20],XMM0
0078dab1 : MOVSS XMM0,dword ptr [EAX + 0xd4]
0078dab9 : ADD EAX,0xd4
0078dabe : CMP byte ptr [ESI + 0x65],0x0
0078dac2 : MOVSS dword ptr [ESP + 0xc],XMM0
0078dac8 : MOVSS XMM0,dword ptr [EAX + 0x4]
0078dacd : MOVSS dword ptr [ESP + 0x10],XMM0
0078dad3 : MOVSS XMM0,dword ptr [EAX + 0x8]
0078dad8 : MOVSS dword ptr [ESP + 0x14],XMM0
0078dade : MOVSS XMM0,dword ptr [ESI + 0x68]
0078dae3 : ADDSS XMM0,dword ptr [ESI + 0x90]
0078daeb : MOVSS dword ptr [ESP + 0x24],XMM0
0078daf1 : MOVSS dword ptr [ESP + 0x28],XMM1
0078daf7 : MOVSS dword ptr [ESP + 0x2c],XMM2
0078dafd : LEA ECX,[ESP + 0x30]
0078db01 : JZ 0x0078db1b
0078db03 : LEA EAX,[ESP + 0x40]
0078db07 : PUSH EAX
0078db08 : PUSH ECX
0078db09 : LEA EDX,[ESI + 0xc4]
0078db0f : PUSH EDX
0078db10 : CALL 0x004ff716
0078db15 : LEA ECX,[ESP + 0x40]
0078db19 : JMP 0x0078db37
0078db1b : MOVQ XMM0,qword ptr [ESP + 0x30]
0078db21 : MOVQ qword ptr [ESI + 0xc4],XMM0
0078db29 : MOVQ XMM0,qword ptr [ESP + 0x38]
0078db2f : MOVQ qword ptr [ESI + 0xcc],XMM0
0078db37 : PUSH EDI
0078db38 : LEA EAX,[ESP + 0x28]
0078db3c : CALL 0x0043d620
0078db41 : MOVSS XMM5,dword ptr [ESP + 0x10]
0078db47 : MOVSS XMM3,dword ptr [ESP + 0x14]
0078db4d : MOVSS XMM4,dword ptr [ESP + 0x18]
0078db53 : MOVAPS XMM0,XMM5
0078db56 : MULSS XMM0,dword ptr [EDI]
0078db5a : MOVSS dword ptr [EDI],XMM0
0078db5e : MOVAPS XMM0,XMM3
0078db61 : MULSS XMM0,dword ptr [EDI + 0x4]
0078db66 : MOVSS dword ptr [EDI + 0x4],XMM0
0078db6b : MOVAPS XMM0,XMM4
0078db6e : MULSS XMM0,dword ptr [EDI + 0x8]
0078db73 : MOVSS dword ptr [EDI + 0x8],XMM0
0078db78 : MOVSS XMM0,dword ptr [EDI]
0078db7c : ADDSS XMM0,dword ptr [ESP + 0x1c]
0078db82 : MOVSS dword ptr [EDI],XMM0
0078db86 : MOVSS XMM0,dword ptr [ESP + 0x20]
0078db8c : ADDSS XMM0,dword ptr [EDI + 0x4]
0078db91 : MOVSS dword ptr [EDI + 0x4],XMM0
0078db96 : MOVSS XMM0,dword ptr [ESP + 0x24]
0078db9c : ADDSS XMM0,dword ptr [EDI + 0x8]
0078dba1 : MOVSS dword ptr [EDI + 0x8],XMM0
0078dba6 : MOVSS XMM0,dword ptr [ESI + 0xa8]
0078dbae : ADDSS XMM0,dword ptr [ESI + 0xbc]
0078dbb6 : MOVSS XMM1,dword ptr [ESI + 0xa0]
0078dbbe : MOVSS XMM2,dword ptr [ESI + 0xa4]
0078dbc6 : MULSS XMM1,dword ptr [ESI + 0x88]
0078dbce : MULSS XMM2,dword ptr [ESI + 0x8c]
0078dbd6 : MOVSS dword ptr [ESI + 0xbc],XMM0
0078dbde : MOVSS XMM0,dword ptr [ESI + 0x9c]
0078dbe6 : MULSS XMM0,dword ptr [ESI + 0x84]
0078dbee : ADD ESP,0x4
0078dbf1 : MOVSS dword ptr [ESI + 0xd4],XMM0
0078dbf9 : MOVSS dword ptr [ESI + 0xd8],XMM1
0078dc01 : MOVSS dword ptr [ESI + 0xdc],XMM2
0078dc09 : CMP byte ptr [ESI + 0x64],0x0
0078dc0d : JZ 0x0078dc8e
0078dc0f : MULSS XMM3,dword ptr [ESI + 0xd8]
0078dc17 : MULSS XMM4,dword ptr [ESI + 0xdc]
0078dc1f : MULSS XMM0,XMM5
0078dc23 : MOVSS dword ptr [ESI + 0xd4],XMM0
0078dc2b : MOVSS dword ptr [ESI + 0xd8],XMM3
0078dc33 : MOVSS dword ptr [ESI + 0xdc],XMM4
0078dc3b : JMP 0x0078dc8e
0078dc3d : FLD float ptr [ESI + 0x68]
0078dc40 : MOVQ XMM0,qword ptr [ESP + 0x30]
0078dc46 : FSTP float ptr [EDI]
0078dc48 : FLD float ptr [ESI + 0x6c]
0078dc4b : FSTP float ptr [EDI + 0x4]
0078dc4e : FLD float ptr [ESI + 0x70]
0078dc51 : FSTP float ptr [EDI + 0x8]
0078dc54 : MOVQ qword ptr [ESI + 0xc4],XMM0
0078dc5c : MOVQ XMM0,qword ptr [ESP + 0x38]
0078dc62 : MOVQ qword ptr [ESI + 0xcc],XMM0
0078dc6a : FLD float ptr [ESI + 0x84]
0078dc70 : FSTP float ptr [ESI + 0xd4]
0078dc76 : FLD float ptr [ESI + 0x88]
0078dc7c : FSTP float ptr [ESI + 0xd8]
0078dc82 : FLD float ptr [ESI + 0x8c]
0078dc88 : FSTP float ptr [ESI + 0xdc]
0078dc8e : POP EDI
0078dc8f : MOV byte ptr [ESI + 0x13d],0x0
0078dc96 : MOV byte ptr [ESI + 0x5d],0x0
0078dc9a : MOV byte ptr [ESI + 0x134],0x1
0078dca1 : POP ESI
0078dca2 : POP EBX
0078dca3 : MOV ESP,EBP
0078dca5 : POP EBP
0078dca6 : RET
