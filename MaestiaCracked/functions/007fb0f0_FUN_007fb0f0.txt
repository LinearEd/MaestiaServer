PROGRAM  : Maestia.exe
FUNCTION : FUN_007fb0f0
ENTRY    : 007fb0f0
BODY     : [[007fb0f0, 007fb310]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007fb0f0(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int in_ECX;
  undefined2 *puVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int local_61c;
  int local_618;
  int local_614;
  undefined2 local_610 [256];
  undefined2 local_410 [256];
  undefined2 local_210 [258];
  uint local_c;
  
  local_c = DAT_00d66fa0 ^ (uint)&local_61c;
  local_61c = (int)((float)param_2 * 5.12);
  local_618 = (int)((float)param_3 * 5.12);
  *(int *)(in_ECX + 0x47c) = local_618;
  iVar6 = 0;
  iVar8 = 0;
  iVar9 = 0;
  *(int *)(in_ECX + 0x474) = (int)((float)param_1 * 5.12);
  *(int *)(in_ECX + 0x478) = local_61c;
  if ((int)((float)param_1 * 5.12) < 0x32) {
    *(undefined4 *)(in_ECX + 0x474) = 0x32;
  }
  if (0x100 < *(int *)(in_ECX + 0x474)) {
    iVar6 = (*(int *)(in_ECX + 0x474) + -0x100) / 2;
    *(undefined4 *)(in_ECX + 0x474) = 0x100;
  }
  if (local_61c < 0x32) {
    *(undefined4 *)(in_ECX + 0x478) = 0x32;
  }
  if (0x100 < *(int *)(in_ECX + 0x478)) {
    iVar8 = (*(int *)(in_ECX + 0x478) + -0x100) / 2;
    *(undefined4 *)(in_ECX + 0x478) = 0x100;
  }
  if (local_618 < 0x32) {
    *(undefined4 *)(in_ECX + 0x47c) = 0x32;
  }
  if (0x100 < *(int *)(in_ECX + 0x47c)) {
    iVar9 = (*(int *)(in_ECX + 0x47c) + -0x100) / 2;
    *(undefined4 *)(in_ECX + 0x47c) = 0x100;
  }
  local_614 = in_ECX;
  _memset(local_610,0,0x600);
  iVar2 = *(int *)(local_614 + 0x474);
  iVar3 = *(int *)(local_614 + 0x478);
  iVar4 = *(int *)(local_614 + 0x47c);
  iVar1 = iVar8 + 0x100;
  iVar7 = iVar6 - iVar8;
  puVar5 = local_410;
  iVar10 = iVar9 - iVar8;
  local_61c = 0x100;
  do {
    puVar5[-0x100] =
         (short)(int)(((float)(iVar7 + iVar8) / (float)(iVar6 + 0x100)) * (float)iVar2 * 256.0);
    *puVar5 = (short)(int)(((float)iVar8 / (float)iVar1) * (float)iVar3 * 256.0);
    puVar5[0x100] =
         (short)(int)(((float)(iVar10 + iVar8) / (float)(iVar9 + 0x100)) * (float)iVar4 * 256.0);
    iVar8 = iVar8 + 1;
    puVar5 = puVar5 + 1;
    local_61c = local_61c + -1;
  } while (local_61c != 0);
  if ((*(char *)(local_614 + 0x16c) != '\0') &&
     ((*(uint *)(*(int *)(local_614 + 0x17c) + 4) & 0x200000) != 0)) {
    (**(code **)(**(int **)(local_614 + 0x18) + 0x54))(*(int **)(local_614 + 0x18),0,0,local_610);
  }
  __security_check_cookie(local_c ^ (uint)&local_61c);
  return;
}



============================================================
DISASSEMBLY
============================================================
007fb0f0 : PUSH EBP
007fb0f1 : MOV EBP,ESP
007fb0f3 : AND ESP,0xfffffff8
007fb0f6 : SUB ESP,0x614
007fb0fc : MOV EAX,[0x00d66fa0]
007fb101 : XOR EAX,ESP
007fb103 : MOV dword ptr [ESP + 0x610],EAX
007fb10a : MOVSS XMM0,dword ptr [0x00cdf20c]
007fb112 : CVTSI2SS XMM1,dword ptr [EBP + 0x8]
007fb117 : MULSS XMM1,XMM0
007fb11b : CVTTSS2SI EAX,XMM1
007fb11f : CVTSI2SS XMM1,dword ptr [EBP + 0xc]
007fb124 : MULSS XMM1,XMM0
007fb128 : CVTTSS2SI EDX,XMM1
007fb12c : CVTSI2SS XMM1,dword ptr [EBP + 0x10]
007fb131 : PUSH EBX
007fb132 : PUSH ESI
007fb133 : MULSS XMM1,XMM0
007fb137 : CVTTSS2SI ESI,XMM1
007fb13b : PUSH EDI
007fb13c : MOV dword ptr [ESP + 0x10],ESI
007fb140 : MOV dword ptr [ECX + 0x47c],ESI
007fb146 : XOR EBX,EBX
007fb148 : XOR ESI,ESI
007fb14a : XOR EDI,EDI
007fb14c : CMP EAX,0x32
007fb14f : MOV dword ptr [ESP + 0x14],ECX
007fb153 : MOV dword ptr [ECX + 0x474],EAX
007fb159 : MOV dword ptr [ESP + 0xc],EDX
007fb15d : MOV dword ptr [ECX + 0x478],EDX
007fb163 : JGE 0x007fb16f
007fb165 : MOV dword ptr [ECX + 0x474],0x32
007fb16f : MOV EAX,dword ptr [ECX + 0x474]
007fb175 : CMP EAX,0x100
007fb17a : JLE 0x007fb196
007fb17c : ADD EAX,0xffffff00
007fb181 : CDQ
007fb182 : SUB EAX,EDX
007fb184 : MOV EDX,dword ptr [ESP + 0xc]
007fb188 : MOV EBX,EAX
007fb18a : SAR EBX,0x1
007fb18c : MOV dword ptr [ECX + 0x474],0x100
007fb196 : MOV EAX,0x32
007fb19b : CMP EDX,EAX
007fb19d : JGE 0x007fb1a5
007fb19f : MOV dword ptr [ECX + 0x478],EAX
007fb1a5 : MOV EDX,dword ptr [ECX + 0x478]
007fb1ab : CMP EDX,0x100
007fb1b1 : JLE 0x007fb1cf
007fb1b3 : LEA EAX,[EDX + 0xffffff00]
007fb1b9 : CDQ
007fb1ba : SUB EAX,EDX
007fb1bc : MOV ESI,EAX
007fb1be : SAR ESI,0x1
007fb1c0 : MOV dword ptr [ECX + 0x478],0x100
007fb1ca : MOV EAX,0x32
007fb1cf : CMP dword ptr [ESP + 0x10],EAX
007fb1d3 : JGE 0x007fb1db
007fb1d5 : MOV dword ptr [ECX + 0x47c],EAX
007fb1db : MOV EAX,dword ptr [ECX + 0x47c]
007fb1e1 : CMP EAX,0x100
007fb1e6 : JLE 0x007fb1fe
007fb1e8 : ADD EAX,0xffffff00
007fb1ed : CDQ
007fb1ee : SUB EAX,EDX
007fb1f0 : MOV EDI,EAX
007fb1f2 : SAR EDI,0x1
007fb1f4 : MOV dword ptr [ECX + 0x47c],0x100
007fb1fe : PUSH 0x600
007fb203 : LEA EAX,[ESP + 0x1c]
007fb207 : PUSH 0x0
007fb209 : PUSH EAX
007fb20a : CALL 0x0063b700
007fb20f : MOV EDX,dword ptr [ESP + 0x20]
007fb213 : CVTSI2SS XMM2,dword ptr [EDX + 0x474]
007fb21b : CVTSI2SS XMM4,dword ptr [EDX + 0x478]
007fb223 : CVTSI2SS XMM6,dword ptr [EDX + 0x47c]
007fb22b : MOVSS XMM0,dword ptr [0x00cdf208]
007fb233 : LEA ECX,[EBX + 0x100]
007fb239 : CVTSI2SS XMM1,ECX
007fb23d : LEA ECX,[EDI + 0x100]
007fb243 : LEA EAX,[ESI + 0x100]
007fb249 : ADD ESP,0xc
007fb24c : CVTSI2SS XMM3,EAX
007fb250 : CVTSI2SS XMM5,ECX
007fb254 : SUB EBX,ESI
007fb256 : MOV EAX,ESI
007fb258 : LEA ECX,[ESP + 0x218]
007fb25f : SUB EDI,ESI
007fb261 : MOV dword ptr [ESP + 0xc],0x100
007fb269 : LEA ESP,[ESP]
007fb270 : LEA ESI,[EBX + EAX*0x1]
007fb273 : CVTSI2SS XMM7,ESI
007fb277 : DIVSS XMM7,XMM1
007fb27b : MULSS XMM7,XMM2
007fb27f : MULSS XMM7,XMM0
007fb283 : CVTTSS2SI ESI,XMM7
007fb287 : MOV word ptr [ECX + 0xfffffe00],SI
007fb28e : CVTSI2SS XMM7,EAX
007fb292 : DIVSS XMM7,XMM3
007fb296 : MULSS XMM7,XMM4
007fb29a : MULSS XMM7,XMM0
007fb29e : CVTTSS2SI ESI,XMM7
007fb2a2 : MOV word ptr [ECX],SI
007fb2a5 : LEA ESI,[EDI + EAX*0x1]
007fb2a8 : CVTSI2SS XMM7,ESI
007fb2ac : DIVSS XMM7,XMM5
007fb2b0 : MULSS XMM7,XMM6
007fb2b4 : MULSS XMM7,XMM0
007fb2b8 : CVTTSS2SI ESI,XMM7
007fb2bc : MOV word ptr [ECX + 0x200],SI
007fb2c3 : INC EAX
007fb2c4 : ADD ECX,0x2
007fb2c7 : SUB dword ptr [ESP + 0xc],0x1
007fb2cc : JNZ 0x007fb270
007fb2ce : CMP byte ptr [EDX + 0x16c],0x0
007fb2d5 : JZ 0x007fb2fa
007fb2d7 : MOV EAX,dword ptr [EDX + 0x17c]
007fb2dd : TEST dword ptr [EAX + 0x4],0x200000
007fb2e4 : JZ 0x007fb2fa
007fb2e6 : MOV EDX,dword ptr [EDX + 0x18]
007fb2e9 : MOV ECX,dword ptr [EDX]
007fb2eb : MOV ECX,dword ptr [ECX + 0x54]
007fb2ee : LEA EAX,[ESP + 0x18]
007fb2f2 : PUSH EAX
007fb2f3 : PUSH 0x0
007fb2f5 : PUSH 0x0
007fb2f7 : PUSH EDX
007fb2f8 : CALL ECX
007fb2fa : MOV ECX,dword ptr [ESP + 0x61c]
007fb301 : POP EDI
007fb302 : POP ESI
007fb303 : POP EBX
007fb304 : XOR ECX,ESP
007fb306 : CALL 0x00633e6b
007fb30b : MOV ESP,EBP
007fb30d : POP EBP
007fb30e : RET 0xc
