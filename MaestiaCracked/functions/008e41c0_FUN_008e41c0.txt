PROGRAM  : Maestia.exe
FUNCTION : FUN_008e41c0
ENTRY    : 008e41c0
BODY     : [[008e41c0, 008e4545]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008e41c0(int *param_1,int param_2,undefined4 param_3)

{
  wchar_t wVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  wchar_t *pwVar6;
  wchar_t *pwVar7;
  int iVar8;
  wchar_t *pwVar9;
  bool bVar10;
  uint local_44;
  undefined1 local_40 [4];
  undefined2 local_3c;
  undefined4 local_2c;
  uint local_28;
  undefined1 local_24 [4];
  int local_20;
  int local_1c;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b60025;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_28 = 7;
  local_2c = 0;
  local_3c = 0;
  FUN_00406360(&DAT_00c593ec,1);
  local_8 = 0;
  uVar3 = FUN_00403dd0(param_3,uVar2);
  local_8._0_1_ = 1;
  FUN_0070cd60(local_24,uVar3,local_40,0);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (7 < local_44) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = CONCAT31(local_8._1_3_,4);
  if (7 < local_28) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_3c = 0;
  local_28 = 7;
  iVar5 = local_1c - local_20 >> 0x1f;
  iVar8 = (local_1c - local_20) / 0x1c + iVar5;
  local_2c = 0;
  if (iVar8 != iVar5) {
    uVar2 = *(uint *)(param_2 + 0x18);
    pwVar9 = (wchar_t *)(param_2 + 4);
    pwVar7 = pwVar9;
    if (7 < uVar2) {
      pwVar7 = *(wchar_t **)pwVar9;
    }
    pwVar6 = L"onInit";
    do {
      wVar1 = *pwVar7;
      bVar10 = (ushort)wVar1 < (ushort)*pwVar6;
      if (wVar1 != *pwVar6) {
LAB_008e42e9:
        iVar4 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
        goto LAB_008e42ee;
      }
      if (wVar1 == L'\0') break;
      wVar1 = pwVar7[1];
      bVar10 = (ushort)wVar1 < (ushort)pwVar6[1];
      if (wVar1 != pwVar6[1]) goto LAB_008e42e9;
      pwVar7 = pwVar7 + 2;
      pwVar6 = pwVar6 + 2;
    } while (wVar1 != L'\0');
    iVar4 = 0;
LAB_008e42ee:
    if (iVar4 == 0) {
      FUN_008e2540();
    }
    else {
      pwVar7 = pwVar9;
      if (7 < uVar2) {
        pwVar7 = *(wchar_t **)pwVar9;
      }
      pwVar6 = L"Open";
      do {
        wVar1 = *pwVar7;
        bVar10 = (ushort)wVar1 < (ushort)*pwVar6;
        if (wVar1 != *pwVar6) {
LAB_008e4336:
          iVar4 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
          goto LAB_008e433b;
        }
        if (wVar1 == L'\0') break;
        wVar1 = pwVar7[1];
        bVar10 = (ushort)wVar1 < (ushort)pwVar6[1];
        if (wVar1 != pwVar6[1]) goto LAB_008e4336;
        pwVar7 = pwVar7 + 2;
        pwVar6 = pwVar6 + 2;
      } while (wVar1 != L'\0');
      iVar4 = 0;
LAB_008e433b:
      if (iVar4 == 0) {
        FUN_008e2b50();
      }
      else {
        pwVar7 = pwVar9;
        if (7 < uVar2) {
          pwVar7 = *(wchar_t **)pwVar9;
        }
        pwVar6 = L"onClose";
        do {
          wVar1 = *pwVar7;
          bVar10 = (ushort)wVar1 < (ushort)*pwVar6;
          if (wVar1 != *pwVar6) {
LAB_008e4386:
            iVar4 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
            goto LAB_008e438b;
          }
          if (wVar1 == L'\0') break;
          wVar1 = pwVar7[1];
          bVar10 = (ushort)wVar1 < (ushort)pwVar6[1];
          if (wVar1 != pwVar6[1]) goto LAB_008e4386;
          pwVar7 = pwVar7 + 2;
          pwVar6 = pwVar6 + 2;
        } while (wVar1 != L'\0');
        iVar4 = 0;
LAB_008e438b:
        if (iVar4 == 0) {
          (**(code **)(*param_1 + 0x20))();
        }
        else {
          pwVar7 = pwVar9;
          if (7 < uVar2) {
            pwVar7 = *(wchar_t **)pwVar9;
          }
          pwVar6 = L"onExtend";
          do {
            wVar1 = *pwVar7;
            bVar10 = (ushort)wVar1 < (ushort)*pwVar6;
            if (wVar1 != *pwVar6) {
LAB_008e43d6:
              iVar4 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
              goto LAB_008e43db;
            }
            if (wVar1 == L'\0') break;
            wVar1 = pwVar7[1];
            bVar10 = (ushort)wVar1 < (ushort)pwVar6[1];
            if (wVar1 != pwVar6[1]) goto LAB_008e43d6;
            pwVar7 = pwVar7 + 2;
            pwVar6 = pwVar6 + 2;
          } while (wVar1 != L'\0');
          iVar4 = 0;
LAB_008e43db:
          if (iVar4 == 0) {
            if (iVar8 == iVar5) {
              FUN_008e2d10();
            }
            else if (*(uint *)(local_20 + 0x18) < 8) {
              FUN_00634f58(local_20 + 4);
              FUN_008e2d10();
            }
            else {
              FUN_00634f58(*(undefined4 *)(local_20 + 4));
              FUN_008e2d10();
            }
          }
          else {
            pwVar7 = pwVar9;
            if (7 < uVar2) {
              pwVar7 = *(wchar_t **)pwVar9;
            }
            pwVar6 = L"ReallyBuy";
            do {
              wVar1 = *pwVar7;
              bVar10 = (ushort)wVar1 < (ushort)*pwVar6;
              if (wVar1 != *pwVar6) {
LAB_008e446a:
                iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
                goto LAB_008e446f;
              }
              if (wVar1 == L'\0') break;
              wVar1 = pwVar7[1];
              bVar10 = (ushort)wVar1 < (ushort)pwVar6[1];
              if (wVar1 != pwVar6[1]) goto LAB_008e446a;
              pwVar7 = pwVar7 + 2;
              pwVar6 = pwVar6 + 2;
            } while (wVar1 != L'\0');
            iVar5 = 0;
LAB_008e446f:
            if (iVar5 == 0) {
              if (param_1[0x17] == 0) {
                FUN_008e29d0();
                param_1[0x11] = 1;
                FUN_008e2440();
              }
              else {
                if (param_1[0x17] == 1) {
                  FUN_008e2a90();
                }
                param_1[0x11] = 1;
                FUN_008e2440();
              }
            }
            else {
              if (7 < uVar2) {
                pwVar9 = *(wchar_t **)pwVar9;
              }
              pwVar7 = L"PointRefill";
              do {
                wVar1 = *pwVar9;
                bVar10 = (ushort)wVar1 < (ushort)*pwVar7;
                if (wVar1 != *pwVar7) {
LAB_008e44e6:
                  iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
                  goto LAB_008e44eb;
                }
                if (wVar1 == L'\0') break;
                wVar1 = pwVar9[1];
                bVar10 = (ushort)wVar1 < (ushort)pwVar7[1];
                if (wVar1 != pwVar7[1]) goto LAB_008e44e6;
                pwVar9 = pwVar9 + 2;
                pwVar7 = pwVar7 + 2;
              } while (wVar1 != L'\0');
              iVar5 = 0;
LAB_008e44eb:
              if (iVar5 == 0) {
                FUN_008d8d50();
              }
            }
          }
        }
      }
    }
  }
  if (local_20 == 0) {
    ExceptionList = local_10;
    return;
  }
  local_8 = 0xffffffff;
  FUN_00405450(param_1);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008e41c0 : PUSH EBP
008e41c1 : MOV EBP,ESP
008e41c3 : PUSH -0x1
008e41c5 : PUSH 0xb60025
008e41ca : MOV EAX,FS:[0x0]
008e41d0 : PUSH EAX
008e41d1 : SUB ESP,0x50
008e41d4 : PUSH EBX
008e41d5 : PUSH ESI
008e41d6 : PUSH EDI
008e41d7 : MOV EAX,[0x00d66fa0]
008e41dc : XOR EAX,EBP
008e41de : PUSH EAX
008e41df : LEA EAX,[EBP + -0xc]
008e41e2 : MOV FS:[0x0],EAX
008e41e8 : MOV EBX,dword ptr [EBP + 0xc]
008e41eb : PUSH 0x1
008e41ed : XOR EAX,EAX
008e41ef : MOV EDI,0x7
008e41f4 : XOR ESI,ESI
008e41f6 : PUSH 0xc593ec
008e41fb : LEA ECX,[EBP + -0x3c]
008e41fe : MOV dword ptr [EBP + -0x24],EDI
008e4201 : MOV dword ptr [EBP + -0x28],ESI
008e4204 : MOV word ptr [EBP + -0x38],AX
008e4208 : CALL 0x00406360
008e420d : MOV dword ptr [EBP + -0x4],ESI
008e4210 : MOV ECX,dword ptr [EBP + 0x10]
008e4213 : PUSH ECX
008e4214 : LEA ESI,[EBP + -0x58]
008e4217 : CALL 0x00403dd0
008e421c : ADD ESP,0x4
008e421f : MOV byte ptr [EBP + -0x4],0x1
008e4223 : PUSH 0x0
008e4225 : LEA EDX,[EBP + -0x3c]
008e4228 : PUSH EDX
008e4229 : PUSH EAX
008e422a : LEA EAX,[EBP + -0x20]
008e422d : PUSH EAX
008e422e : CALL 0x0070cd60
008e4233 : ADD ESP,0x10
008e4236 : MOV byte ptr [EBP + -0x4],0x3
008e423a : CMP dword ptr [EBP + -0x40],0x8
008e423e : JC 0x008e4248
008e4240 : MOV ECX,dword ptr [EBP + -0x54]
008e4243 : CALL 0x006f04e0
008e4248 : XOR ESI,ESI
008e424a : XOR ECX,ECX
008e424c : MOV dword ptr [EBP + -0x40],EDI
008e424f : MOV dword ptr [EBP + -0x44],ESI
008e4252 : MOV word ptr [EBP + -0x54],CX
008e4256 : MOV byte ptr [EBP + -0x4],0x4
008e425a : CMP dword ptr [EBP + -0x24],0x8
008e425e : JC 0x008e4268
008e4260 : MOV ECX,dword ptr [EBP + -0x38]
008e4263 : CALL 0x006f04e0
008e4268 : MOV ECX,dword ptr [EBP + -0x18]
008e426b : SUB ECX,dword ptr [EBP + -0x1c]
008e426e : XOR EDX,EDX
008e4270 : MOV word ptr [EBP + -0x38],DX
008e4274 : MOV EAX,0x92492493
008e4279 : IMUL ECX
008e427b : ADD EDX,ECX
008e427d : MOV dword ptr [EBP + -0x24],EDI
008e4280 : SAR EDX,0x4
008e4283 : MOV EDI,EDX
008e4285 : SHR EDI,0x1f
008e4288 : ADD EDI,EDX
008e428a : MOV dword ptr [EBP + -0x28],ESI
008e428d : JNZ 0x008e42aa
008e428f : MOV dword ptr [EBP + -0x4],0xffffffff
008e4296 : MOV EAX,dword ptr [EBP + -0x1c]
008e4299 : CMP EAX,ESI
008e429b : JZ 0x008e4529
008e42a1 : MOV ECX,dword ptr [EBP + 0x8]
008e42a4 : PUSH ECX
008e42a5 : JMP 0x008e4516
008e42aa : MOV EAX,dword ptr [EBX + 0x18]
008e42ad : ADD EBX,0x4
008e42b0 : MOV dword ptr [EBP + 0xc],EAX
008e42b3 : CMP EAX,0x8
008e42b6 : JC 0x008e42bc
008e42b8 : MOV EAX,dword ptr [EBX]
008e42ba : JMP 0x008e42be
008e42bc : MOV EAX,EBX
008e42be : MOV ECX,0xc593f0
008e42c3 : MOV DX,word ptr [EAX]
008e42c6 : CMP DX,word ptr [ECX]
008e42c9 : JNZ 0x008e42e9
008e42cb : CMP DX,SI
008e42ce : JZ 0x008e42e5
008e42d0 : MOV DX,word ptr [EAX + 0x2]
008e42d4 : CMP DX,word ptr [ECX + 0x2]
008e42d8 : JNZ 0x008e42e9
008e42da : ADD EAX,0x4
008e42dd : ADD ECX,0x4
008e42e0 : CMP DX,SI
008e42e3 : JNZ 0x008e42c3
008e42e5 : XOR EAX,EAX
008e42e7 : JMP 0x008e42ee
008e42e9 : SBB EAX,EAX
008e42eb : SBB EAX,-0x1
008e42ee : CMP EAX,ESI
008e42f0 : JNZ 0x008e42ff
008e42f2 : MOV ECX,dword ptr [EBP + 0x8]
008e42f5 : CALL 0x008e2540
008e42fa : JMP 0x008e4504
008e42ff : CMP dword ptr [EBP + 0xc],0x8
008e4303 : JC 0x008e4309
008e4305 : MOV EAX,dword ptr [EBX]
008e4307 : JMP 0x008e430b
008e4309 : MOV EAX,EBX
008e430b : MOV ECX,0xc59400
008e4310 : MOV DX,word ptr [EAX]
008e4313 : CMP DX,word ptr [ECX]
008e4316 : JNZ 0x008e4336
008e4318 : CMP DX,SI
008e431b : JZ 0x008e4332
008e431d : MOV DX,word ptr [EAX + 0x2]
008e4321 : CMP DX,word ptr [ECX + 0x2]
008e4325 : JNZ 0x008e4336
008e4327 : ADD EAX,0x4
008e432a : ADD ECX,0x4
008e432d : CMP DX,SI
008e4330 : JNZ 0x008e4310
008e4332 : XOR EAX,EAX
008e4334 : JMP 0x008e433b
008e4336 : SBB EAX,EAX
008e4338 : SBB EAX,-0x1
008e433b : CMP EAX,ESI
008e433d : JNZ 0x008e4349
008e433f : CALL 0x008e2b50
008e4344 : JMP 0x008e4504
008e4349 : CMP dword ptr [EBP + 0xc],0x8
008e434d : JC 0x008e4353
008e434f : MOV EAX,dword ptr [EBX]
008e4351 : JMP 0x008e4355
008e4353 : MOV EAX,EBX
008e4355 : MOV ECX,0xc5940c
008e435a : LEA EBX,[EBX]
008e4360 : MOV DX,word ptr [EAX]
008e4363 : CMP DX,word ptr [ECX]
008e4366 : JNZ 0x008e4386
008e4368 : CMP DX,SI
008e436b : JZ 0x008e4382
008e436d : MOV DX,word ptr [EAX + 0x2]
008e4371 : CMP DX,word ptr [ECX + 0x2]
008e4375 : JNZ 0x008e4386
008e4377 : ADD EAX,0x4
008e437a : ADD ECX,0x4
008e437d : CMP DX,SI
008e4380 : JNZ 0x008e4360
008e4382 : XOR EAX,EAX
008e4384 : JMP 0x008e438b
008e4386 : SBB EAX,EAX
008e4388 : SBB EAX,-0x1
008e438b : CMP EAX,ESI
008e438d : JNZ 0x008e439e
008e438f : MOV ECX,dword ptr [EBP + 0x8]
008e4392 : MOV EDX,dword ptr [ECX]
008e4394 : MOV EAX,dword ptr [EDX + 0x20]
008e4397 : CALL EAX
008e4399 : JMP 0x008e4504
008e439e : CMP dword ptr [EBP + 0xc],0x8
008e43a2 : JC 0x008e43a8
008e43a4 : MOV EAX,dword ptr [EBX]
008e43a6 : JMP 0x008e43aa
008e43a8 : MOV EAX,EBX
008e43aa : MOV ECX,0xc5941c
008e43af : NOP
008e43b0 : MOV DX,word ptr [EAX]
008e43b3 : CMP DX,word ptr [ECX]
008e43b6 : JNZ 0x008e43d6
008e43b8 : CMP DX,SI
008e43bb : JZ 0x008e43d2
008e43bd : MOV DX,word ptr [EAX + 0x2]
008e43c1 : CMP DX,word ptr [ECX + 0x2]
008e43c5 : JNZ 0x008e43d6
008e43c7 : ADD EAX,0x4
008e43ca : ADD ECX,0x4
008e43cd : CMP DX,SI
008e43d0 : JNZ 0x008e43b0
008e43d2 : XOR EAX,EAX
008e43d4 : JMP 0x008e43db
008e43d6 : SBB EAX,EAX
008e43d8 : SBB EAX,-0x1
008e43db : CMP EAX,ESI
008e43dd : JNZ 0x008e4433
008e43df : CMP EDI,ESI
008e43e1 : JBE 0x008e4422
008e43e3 : MOV EAX,dword ptr [EBP + -0x1c]
008e43e6 : CMP dword ptr [EAX + 0x18],0x8
008e43ea : JC 0x008e4407
008e43ec : MOV EAX,dword ptr [EAX + 0x4]
008e43ef : PUSH EAX
008e43f0 : CALL 0x00634f58
008e43f5 : MOV EDX,dword ptr [EBP + 0x8]
008e43f8 : ADD ESP,0x4
008e43fb : MOV ECX,EAX
008e43fd : CALL 0x008e2d10
008e4402 : JMP 0x008e4504
008e4407 : ADD EAX,0x4
008e440a : PUSH EAX
008e440b : CALL 0x00634f58
008e4410 : MOV EDX,dword ptr [EBP + 0x8]
008e4413 : ADD ESP,0x4
008e4416 : MOV ECX,EAX
008e4418 : CALL 0x008e2d10
008e441d : JMP 0x008e4504
008e4422 : MOV EDX,dword ptr [EBP + 0x8]
008e4425 : XOR EAX,EAX
008e4427 : MOV ECX,EAX
008e4429 : CALL 0x008e2d10
008e442e : JMP 0x008e4504
008e4433 : CMP dword ptr [EBP + 0xc],0x8
008e4437 : JC 0x008e443d
008e4439 : MOV EAX,dword ptr [EBX]
008e443b : JMP 0x008e443f
008e443d : MOV EAX,EBX
008e443f : MOV ECX,0xc59430
008e4444 : MOV DX,word ptr [EAX]
008e4447 : CMP DX,word ptr [ECX]
008e444a : JNZ 0x008e446a
008e444c : CMP DX,SI
008e444f : JZ 0x008e4466
008e4451 : MOV DX,word ptr [EAX + 0x2]
008e4455 : CMP DX,word ptr [ECX + 0x2]
008e4459 : JNZ 0x008e446a
008e445b : ADD EAX,0x4
008e445e : ADD ECX,0x4
008e4461 : CMP DX,SI
008e4464 : JNZ 0x008e4444
008e4466 : XOR EAX,EAX
008e4468 : JMP 0x008e446f
008e446a : SBB EAX,EAX
008e446c : SBB EAX,-0x1
008e446f : CMP EAX,ESI
008e4471 : JNZ 0x008e44ac
008e4473 : MOV EDI,dword ptr [EBP + 0x8]
008e4476 : MOV EAX,dword ptr [EDI + 0x5c]
008e4479 : CMP EAX,ESI
008e447b : JNZ 0x008e4492
008e447d : MOV ECX,EDI
008e447f : CALL 0x008e29d0
008e4484 : MOV dword ptr [EDI + 0x44],0x1
008e448b : CALL 0x008e2440
008e4490 : JMP 0x008e4504
008e4492 : CMP EAX,0x1
008e4495 : JNZ 0x008e449e
008e4497 : MOV ECX,EDI
008e4499 : CALL 0x008e2a90
008e449e : MOV dword ptr [EDI + 0x44],0x1
008e44a5 : CALL 0x008e2440
008e44aa : JMP 0x008e4504
008e44ac : CMP dword ptr [EBP + 0xc],0x8
008e44b0 : JC 0x008e44b6
008e44b2 : MOV EAX,dword ptr [EBX]
008e44b4 : JMP 0x008e44b8
008e44b6 : MOV EAX,EBX
008e44b8 : MOV ECX,0xc59444
008e44bd : LEA ECX,[ECX]
008e44c0 : MOV DX,word ptr [EAX]
008e44c3 : CMP DX,word ptr [ECX]
008e44c6 : JNZ 0x008e44e6
008e44c8 : CMP DX,SI
008e44cb : JZ 0x008e44e2
008e44cd : MOV DX,word ptr [EAX + 0x2]
008e44d1 : CMP DX,word ptr [ECX + 0x2]
008e44d5 : JNZ 0x008e44e6
008e44d7 : ADD EAX,0x4
008e44da : ADD ECX,0x4
008e44dd : CMP DX,SI
008e44e0 : JNZ 0x008e44c0
008e44e2 : XOR EAX,EAX
008e44e4 : JMP 0x008e44eb
008e44e6 : SBB EAX,EAX
008e44e8 : SBB EAX,-0x1
008e44eb : CMP EAX,ESI
008e44ed : JNZ 0x008e4504
008e44ef : MOV ECX,dword ptr [0x00da9894]
008e44f5 : MOV EAX,dword ptr [ECX]
008e44f7 : MOV ESI,dword ptr [EAX + 0x1d4]
008e44fd : CALL 0x008d8d50
008e4502 : XOR ESI,ESI
008e4504 : MOV dword ptr [EBP + -0x4],0xffffffff
008e450b : MOV EAX,dword ptr [EBP + -0x1c]
008e450e : CMP EAX,ESI
008e4510 : JZ 0x008e4529
008e4512 : MOV EDX,dword ptr [EBP + 0x8]
008e4515 : PUSH EDX
008e4516 : MOV EDI,dword ptr [EBP + -0x18]
008e4519 : CALL 0x00405450
008e451e : MOV ECX,dword ptr [EBP + -0x1c]
008e4521 : ADD ESP,0x4
008e4524 : CALL 0x006f04e0
008e4529 : MOV dword ptr [EBP + -0x14],ESI
008e452c : MOV dword ptr [EBP + -0x18],ESI
008e452f : MOV dword ptr [EBP + -0x1c],ESI
008e4532 : MOV ECX,dword ptr [EBP + -0xc]
008e4535 : MOV dword ptr FS:[0x0],ECX
008e453c : POP ECX
008e453d : POP EDI
008e453e : POP ESI
008e453f : POP EBX
008e4540 : MOV ESP,EBP
008e4542 : POP EBP
008e4543 : RET 0xc
