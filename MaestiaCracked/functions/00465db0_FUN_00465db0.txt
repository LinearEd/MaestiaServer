PROGRAM  : Maestia.exe
FUNCTION : FUN_00465db0
ENTRY    : 00465db0
BODY     : [[00465db0, 00465f6b]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_00465db0(void)

{
  byte bVar1;
  byte bVar2;
  int unaff_ESI;
  undefined1 auStack_37c [268];
  undefined4 uStack_270;
  undefined1 *puStack_26c;
  int iStack_268;
  undefined1 auStack_264 [268];
  undefined4 uStack_158;
  undefined1 *puStack_154;
  int iStack_150;
  undefined1 auStack_14c [264];
  undefined4 uStack_44;
  float local_40;
  float local_3c;
  char *local_38;
  uint uStack_34;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b822d8;
  local_10 = ExceptionList;
  uStack_34 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  puStack_154 = auStack_14c;
  iStack_150 = unaff_ESI + 0x4894;
  uStack_158 = 0x465dee;
  FUN_004689d0();
  local_8 = 0;
  puStack_26c = auStack_264;
  iStack_268 = unaff_ESI + 0x63c4;
  uStack_270 = 0x465e0d;
  FUN_004689d0();
  local_8 = CONCAT31(local_8._1_3_,1);
  FUN_004689d0(auStack_37c,unaff_ESI + 0x62ac);
  local_8 = 0xffffffff;
  bVar1 = FUN_00468de0(unaff_ESI);
  if ((bVar1 & 1) == 0) {
    local_38 = "CForestRI::StartRender() failed to set UploadShadowShaderConsts";
    local_3c = 6.462309e-39;
    FUN_00807d70();
  }
  local_3c = -*(float *)(unaff_ESI + 0x13f4);
  local_38 = (char *)(-1.0 / (*(float *)(unaff_ESI + 0x13f8) - *(float *)(unaff_ESI + 0x13f4)));
  local_40 = *(float *)(unaff_ESI + 0x13d8) - *(float *)(unaff_ESI + 0x13d4);
  uStack_44 = 0x465eb8;
  bVar2 = FUN_0046c3b0();
  bVar2 = bVar1 & 1 & bVar2;
  if (bVar2 == 0) {
    local_38 = "CForestRI::StartRender() failed to set m_tFogParams.Set4f";
    local_3c = 6.462483e-39;
    FUN_00807d70();
  }
  local_38 = (char *)0x465eda;
  bVar1 = FUN_0046c440();
  bVar2 = bVar2 & bVar1;
  if (bVar2 == 0) {
    local_38 = "CForestRI::StartRender() failed to set m_tFogColor.Set3fv";
    local_3c = 6.46253e-39;
    FUN_00807d70();
  }
  local_38 = (char *)0x465f31;
  bVar1 = FUN_0046c440();
  bVar2 = bVar2 & bVar1;
  if (bVar2 == 0) {
    local_38 = "CForestRI::StartRender() failed to set m_tLightDir.Set3fv";
    local_3c = 6.462653e-39;
    FUN_00807d70();
  }
  local_38 = (char *)0x465f49;
  bVar1 = FUN_00468ca0();
  bVar2 = bVar2 & bVar1;
  if (bVar2 == 0) {
    local_38 = "CForestRI::StartRender() failed to set ClearBoundTextures";
    local_3c = 6.462686e-39;
    FUN_00807d70();
  }
  ExceptionList = local_10;
  return bVar2;
}



============================================================
DISASSEMBLY
============================================================
00465db0 : PUSH EBP
00465db1 : MOV EBP,ESP
00465db3 : PUSH -0x1
00465db5 : PUSH 0xb822d8
00465dba : MOV EAX,FS:[0x0]
00465dc0 : PUSH EAX
00465dc1 : SUB ESP,0x1c
00465dc4 : PUSH EBX
00465dc5 : MOV EAX,[0x00d66fa0]
00465dca : XOR EAX,EBP
00465dcc : PUSH EAX
00465dcd : LEA EAX,[EBP + -0xc]
00465dd0 : MOV FS:[0x0],EAX
00465dd6 : SUB ESP,0x118
00465ddc : LEA EAX,[ESI + 0x4894]
00465de2 : MOV ECX,ESP
00465de4 : MOV dword ptr [EBP + -0x18],ESP
00465de7 : PUSH EAX
00465de8 : PUSH ECX
00465de9 : CALL 0x004689d0
00465dee : MOV dword ptr [EBP + -0x4],0x0
00465df5 : SUB ESP,0x118
00465dfb : LEA EDX,[ESI + 0x63c4]
00465e01 : MOV EAX,ESP
00465e03 : MOV dword ptr [EBP + -0x14],ESP
00465e06 : PUSH EDX
00465e07 : PUSH EAX
00465e08 : CALL 0x004689d0
00465e0d : MOV byte ptr [EBP + -0x4],0x1
00465e11 : SUB ESP,0x118
00465e17 : LEA ECX,[ESI + 0x62ac]
00465e1d : MOV EDX,ESP
00465e1f : MOV dword ptr [EBP + -0x10],ESP
00465e22 : PUSH ECX
00465e23 : PUSH EDX
00465e24 : CALL 0x004689d0
00465e29 : MOV byte ptr [EBP + -0x4],0x2
00465e2d : PUSH ESI
00465e2e : MOV dword ptr [EBP + -0x4],0xffffffff
00465e35 : CALL 0x00468de0
00465e3a : AND AL,0x1
00465e3c : MOV BL,AL
00465e3e : JNZ 0x00465e4d
00465e40 : PUSH 0xcd4f40
00465e45 : CALL 0x00807d70
00465e4a : ADD ESP,0x4
00465e4d : MOVSS XMM0,dword ptr [ESI + 0x13f4]
00465e55 : MOVSS XMM1,dword ptr [ESI + 0x13f8]
00465e5d : MOVSS XMM2,dword ptr [0x00cdf0d0]
00465e65 : SUBSS XMM1,XMM0
00465e69 : XORPS XMM0,xmmword ptr [0x00cdf0c0]
00465e70 : DIVSS XMM2,XMM1
00465e74 : SUB ESP,0xc
00465e77 : MOVSS dword ptr [EBP + -0x10],XMM2
00465e7c : FLD float ptr [EBP + -0x10]
00465e7f : FSTP float ptr [ESP + 0x8]
00465e83 : MOVSS dword ptr [EBP + -0x14],XMM0
00465e88 : MOVSS XMM0,dword ptr [ESI + 0x13d8]
00465e90 : FLD float ptr [EBP + -0x14]
00465e93 : MOVAPS XMM1,XMM0
00465e96 : FSTP float ptr [ESP + 0x4]
00465e9a : SUBSS XMM1,dword ptr [ESI + 0x13d4]
00465ea2 : MOVSS dword ptr [EBP + -0x18],XMM1
00465ea7 : FLD float ptr [EBP + -0x18]
00465eaa : LEA EAX,[ESI + 0x431c]
00465eb0 : FSTP float ptr [ESP]
00465eb3 : CALL 0x0046c3b0
00465eb8 : AND BL,AL
00465eba : JNZ 0x00465ec9
00465ebc : PUSH 0xcd4f80
00465ec1 : CALL 0x00807d70
00465ec6 : ADD ESP,0x4
00465ec9 : LEA ECX,[ESI + 0x13dc]
00465ecf : LEA EAX,[ESI + 0x4434]
00465ed5 : CALL 0x0046c440
00465eda : AND BL,AL
00465edc : JNZ 0x00465eeb
00465ede : PUSH 0xcd4fbc
00465ee3 : CALL 0x00807d70
00465ee8 : ADD ESP,0x4
00465eeb : MOVSS XMM0,dword ptr [0x00cdf0c0]
00465ef3 : MOVSS XMM1,dword ptr [ESI + 0xbd8]
00465efb : XORPS XMM1,XMM0
00465efe : MOVSS dword ptr [EBP + -0x24],XMM1
00465f03 : MOVSS XMM1,dword ptr [ESI + 0xbdc]
00465f0b : XORPS XMM1,XMM0
00465f0e : MOVSS dword ptr [EBP + -0x20],XMM1
00465f13 : MOVSS XMM1,dword ptr [ESI + 0xbe0]
00465f1b : XORPS XMM1,XMM0
00465f1e : LEA EAX,[ESI + 0x4204]
00465f24 : LEA ECX,[EBP + -0x24]
00465f27 : MOVSS dword ptr [EBP + -0x1c],XMM1
00465f2c : CALL 0x0046c440
00465f31 : AND BL,AL
00465f33 : JNZ 0x00465f42
00465f35 : PUSH 0xcd4ff8
00465f3a : CALL 0x00807d70
00465f3f : ADD ESP,0x4
00465f42 : MOV ECX,ESI
00465f44 : CALL 0x00468ca0
00465f49 : AND BL,AL
00465f4b : JNZ 0x00465f5a
00465f4d : PUSH 0xcd5034
00465f52 : CALL 0x00807d70
00465f57 : ADD ESP,0x4
00465f5a : MOV AL,BL
00465f5c : MOV ECX,dword ptr [EBP + -0xc]
00465f5f : MOV dword ptr FS:[0x0],ECX
00465f66 : POP ECX
00465f67 : POP EBX
00465f68 : MOV ESP,EBP
00465f6a : POP EBP
00465f6b : RET
