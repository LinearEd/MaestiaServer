PROGRAM  : Maestia.exe
FUNCTION : FUN_006840d0
ENTRY    : 006840d0
BODY     : [[006840d0, 00684126]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006840d0(void)

{
  int *piVar1;
  uint uVar2;
  LONG LVar3;
  undefined4 *in_ECX;
  
  *in_ECX = &PTR_FUN_00bd8220;
  FUN_00684fc0();
  FUN_00685020();
  FUN_00684eb0();
  piVar1 = (int *)in_ECX[0x1e];
  if (piVar1 != (int *)0x0) {
    (**(code **)(*piVar1 + 8))(piVar1);
  }
  uVar2 = in_ECX[0x1a];
  LVar3 = InterlockedExchangeAdd((LONG *)((uVar2 & 0xfffffffc) + 4),-1);
  if (LVar3 == 1) {
    FUN_00515cf0(uVar2 & 0xfffffffc);
  }
  FUN_00680e40();
  return;
}



============================================================
DISASSEMBLY
============================================================
006840d0 : PUSH ESI
006840d1 : MOV ESI,ECX
006840d3 : MOV ECX,dword ptr [ESI + 0x78]
006840d6 : PUSH EDI
006840d7 : MOV dword ptr [ESI],0xbd8220
006840dd : CALL 0x00684fc0
006840e2 : MOV ECX,dword ptr [ESI + 0x78]
006840e5 : CALL 0x00685020
006840ea : MOV ECX,dword ptr [ESI + 0x78]
006840ed : CALL 0x00684eb0
006840f2 : MOV EAX,dword ptr [ESI + 0x78]
006840f5 : TEST EAX,EAX
006840f7 : JZ 0x00684101
006840f9 : MOV ECX,dword ptr [EAX]
006840fb : MOV EDX,dword ptr [ECX + 0x8]
006840fe : PUSH EAX
006840ff : CALL EDX
00684101 : MOV EDI,dword ptr [ESI + 0x68]
00684104 : AND EDI,0xfffffffc
00684107 : PUSH -0x1
00684109 : LEA EAX,[EDI + 0x4]
0068410c : PUSH EAX
0068410d : CALL dword ptr [0x00b851cc]
00684113 : SUB EAX,0x1
00684116 : JNZ 0x0068411e
00684118 : PUSH EDI
00684119 : CALL 0x00515cf0
0068411e : POP EDI
0068411f : MOV ECX,ESI
00684121 : POP ESI
00684122 : JMP 0x00680e40
