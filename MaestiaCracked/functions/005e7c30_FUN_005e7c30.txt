PROGRAM  : Maestia.exe
FUNCTION : FUN_005e7c30
ENTRY    : 005e7c30
BODY     : [[005e7c30, 005e7dab]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005e7c30(int param_1,undefined4 *param_2)

{
  int iVar1;
  int *piVar2;
  GThread *this;
  int iVar3;
  GThread *extraout_ECX;
  GThread *extraout_ECX_00;
  GThread *this_00;
  undefined **local_24 [3];
  GRefCountImpl *local_18;
  
  iVar3 = *(int *)(param_1 + 0x314);
  if (iVar3 == 0) {
    iVar3 = param_1 + 0x28;
  }
  *(undefined1 *)(iVar3 + 0x15) = 0;
  if (*(int *)(iVar3 + 0x30) - *(int *)(iVar3 + 0x2c) < 2) {
    FUN_00539fb0(2);
  }
  iVar1 = *(int *)(iVar3 + 0x2c);
  this = (GThread *)
         (uint)CONCAT11(*(undefined1 *)(*(int *)(iVar3 + 0x3c) + 1 + iVar1),
                        *(undefined1 *)(*(int *)(iVar3 + 0x3c) + iVar1));
  *(int *)(iVar3 + 0x2c) = iVar1 + 2;
  GThread::OnExit(this);
  piVar2 = (int *)FUN_00515840(0x60,0);
  if (piVar2 == (int *)0x0) {
    piVar2 = (int *)0x0;
  }
  else {
    *piVar2 = (int)&PTR_LAB_00b85fe8;
    piVar2[1] = 1;
    piVar2[2] = 0;
    piVar2[3] = 0x40000;
    *piVar2 = (int)&PTR_FUN_00b93f70;
    FUN_0055ba70();
  }
  iVar3 = *(int *)(param_1 + 0x314);
  if (iVar3 == 0) {
    iVar3 = param_1 + 0x28;
  }
  FUN_0055bac0(param_1,*param_2,
               (param_2[3] + param_2[2]) -
               ((*(int *)(iVar3 + 0x34) - *(int *)(iVar3 + 0x30)) + *(int *)(iVar3 + 0x2c)),1);
  iVar3 = *(int *)(*(int *)(*(int *)(param_1 + 0x10) + 8) + 0x20);
  this_00 = extraout_ECX;
  if (iVar3 != 0) {
    FUN_0060ef40(-(*(char *)(iVar3 + 0x10) != '\0') & 0x10,0xffffffff,0xffffffff);
    (**(code **)(*piVar2 + 0x2c))(*(undefined4 *)(iVar3 + 0xc),local_24);
    if (local_18 != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(local_18);
    }
    local_24[0] = &PTR_FUN_00cd3f40;
    GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)local_24);
    this_00 = extraout_ECX_00;
  }
  GThread::OnExit(this_00);
  if (*(int *)(param_1 + 0x2e8) == 0) {
    FUN_00566b90(this,piVar2);
  }
  if (piVar2 != (int *)0x0) {
    FUN_00524240();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005e7c30 : SUB ESP,0x24
005e7c33 : PUSH EBX
005e7c34 : PUSH EBP
005e7c35 : PUSH ESI
005e7c36 : MOV ESI,dword ptr [ESP + 0x34]
005e7c3a : PUSH EDI
005e7c3b : MOV EDI,dword ptr [ESI + 0x314]
005e7c41 : TEST EDI,EDI
005e7c43 : JNZ 0x005e7c48
005e7c45 : LEA EDI,[ESI + 0x28]
005e7c48 : MOV EAX,dword ptr [EDI + 0x30]
005e7c4b : SUB EAX,dword ptr [EDI + 0x2c]
005e7c4e : MOV byte ptr [EDI + 0x15],0x0
005e7c52 : CMP EAX,0x2
005e7c55 : JGE 0x005e7c60
005e7c57 : PUSH 0x2
005e7c59 : MOV ECX,EDI
005e7c5b : CALL 0x00539fb0
005e7c60 : MOV EAX,dword ptr [EDI + 0x2c]
005e7c63 : MOV ECX,dword ptr [EDI + 0x3c]
005e7c66 : MOVZX DX,byte ptr [ECX + EAX*0x1 + 0x1]
005e7c6c : ADD ECX,EAX
005e7c6e : MOVZX CX,byte ptr [ECX]
005e7c72 : SHL DX,0x8
005e7c76 : OR DX,CX
005e7c79 : MOVZX ECX,DX
005e7c7c : MOVZX EBX,CX
005e7c7f : ADD EAX,0x2
005e7c82 : PUSH EBX
005e7c83 : MOV dword ptr [EDI + 0x2c],EAX
005e7c86 : LEA EAX,[ESI + 0x14]
005e7c89 : PUSH 0xb944f8
005e7c8e : PUSH EAX
005e7c8f : CALL 0x0051d420
005e7c94 : MOV EAX,dword ptr [ESI + 0x20]
005e7c97 : MOV EAX,dword ptr [EAX + 0x1c]
005e7c9a : ADD ESP,0xc
005e7c9d : PUSH 0x0
005e7c9f : PUSH 0x60
005e7ca1 : MOV ECX,EAX
005e7ca3 : CALL 0x00515840
005e7ca8 : MOV EDI,EAX
005e7caa : TEST EDI,EDI
005e7cac : JZ 0x005e7cd9
005e7cae : MOV dword ptr [EDI],0xb85fe8
005e7cb4 : MOV dword ptr [EDI + 0x4],0x1
005e7cbb : MOV dword ptr [EDI + 0x8],0x0
005e7cc2 : MOV dword ptr [EDI + 0xc],0x40000
005e7cc9 : LEA ECX,[EDI + 0x10]
005e7ccc : MOV dword ptr [EDI],0xb93f70
005e7cd2 : CALL 0x0055ba70
005e7cd7 : JMP 0x005e7cdb
005e7cd9 : XOR EDI,EDI
005e7cdb : MOV ECX,dword ptr [ESI + 0x314]
005e7ce1 : TEST ECX,ECX
005e7ce3 : JNZ 0x005e7ce8
005e7ce5 : LEA ECX,[ESI + 0x28]
005e7ce8 : MOV EAX,dword ptr [ECX + 0x34]
005e7ceb : SUB EAX,dword ptr [ECX + 0x30]
005e7cee : MOV EDX,dword ptr [ESP + 0x3c]
005e7cf2 : ADD EAX,dword ptr [ECX + 0x2c]
005e7cf5 : MOV ECX,dword ptr [EDX + 0xc]
005e7cf8 : ADD ECX,dword ptr [EDX + 0x8]
005e7cfb : MOV EDX,dword ptr [EDX]
005e7cfd : PUSH 0x1
005e7cff : SUB ECX,EAX
005e7d01 : PUSH ECX
005e7d02 : PUSH EDX
005e7d03 : PUSH ESI
005e7d04 : LEA ECX,[EDI + 0x10]
005e7d07 : CALL 0x0055bac0
005e7d0c : MOV EAX,dword ptr [ESI + 0x10]
005e7d0f : MOV EAX,dword ptr [EAX + 0x8]
005e7d12 : MOV EBP,dword ptr [EAX + 0x20]
005e7d15 : TEST EBP,EBP
005e7d17 : JZ 0x005e7d6f
005e7d19 : MOV AL,byte ptr [EBP + 0x10]
005e7d1c : MOVZX EDX,AL
005e7d1f : NEG EDX
005e7d21 : PUSH -0x1
005e7d23 : SBB EDX,EDX
005e7d25 : PUSH -0x1
005e7d27 : AND EDX,0x10
005e7d2a : PUSH EDX
005e7d2b : LEA ECX,[ESP + 0x1c]
005e7d2f : CALL 0x0060ef40
005e7d34 : MOV EAX,dword ptr [EDI]
005e7d36 : FLD float ptr [EBP + 0xc]
005e7d39 : MOV EDX,dword ptr [EAX + 0x2c]
005e7d3c : LEA ECX,[ESP + 0x10]
005e7d40 : FSTP float ptr [ESP + 0x38]
005e7d44 : FLD float ptr [ESP + 0x38]
005e7d48 : PUSH ECX
005e7d49 : PUSH ECX
005e7d4a : MOV ECX,EDI
005e7d4c : FSTP float ptr [ESP]
005e7d4f : CALL EDX
005e7d51 : MOV ECX,dword ptr [ESP + 0x1c]
005e7d55 : TEST ECX,ECX
005e7d57 : JZ 0x005e7d5e
005e7d59 : CALL 0x004ff7e0
005e7d5e : LEA ECX,[ESP + 0x10]
005e7d62 : MOV dword ptr [ESP + 0x10],0xcd3f40
005e7d6a : CALL 0x004ff7b0
005e7d6f : LEA EAX,[ESI + 0x14]
005e7d72 : PUSH 0xb944e8
005e7d77 : PUSH EAX
005e7d78 : CALL 0x0051d420
005e7d7d : ADD ESP,0x8
005e7d80 : CMP dword ptr [ESI + 0x2e8],0x0
005e7d87 : JNZ 0x005e7d97
005e7d89 : PUSH EDI
005e7d8a : PUSH ECX
005e7d8b : MOV EAX,ESP
005e7d8d : MOV dword ptr [EAX],EBX
005e7d8f : MOV ECX,dword ptr [ESI + 0x20]
005e7d92 : CALL 0x00566b90
005e7d97 : TEST EDI,EDI
005e7d99 : JZ 0x005e7da2
005e7d9b : MOV ECX,EDI
005e7d9d : CALL 0x00524240
005e7da2 : POP EDI
005e7da3 : POP ESI
005e7da4 : POP EBP
005e7da5 : POP EBX
005e7da6 : ADD ESP,0x24
005e7da9 : RET 0x8
