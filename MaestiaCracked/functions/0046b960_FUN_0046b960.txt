PROGRAM  : Maestia.exe
FUNCTION : FUN_0046b960
ENTRY    : 0046b960
BODY     : [[0046b960, 0046bd63]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_0046b960(void)

{
  int iVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  byte bVar7;
  byte bVar8;
  byte bVar9;
  int iVar10;
  int unaff_ESI;
  undefined **local_220 [66];
  undefined **local_118;
  undefined4 local_114;
  undefined1 local_110 [7];
  undefined1 local_109;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b827c6;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar1 = unaff_ESI + 0x1538;
  bVar2 = FUN_0046a8e0("g_mModelViewProj",iVar1,0);
  bVar3 = FUN_0046a8e0("g_mCameraFacingMatrix",unaff_ESI + 0x1be0,0);
  bVar4 = FUN_0046a8e0("g_vTreePosAndScale",iVar1,0);
  bVar5 = FUN_0046a8e0("g_vTreeRotation",iVar1,0);
  bVar6 = FUN_0046a8e0("g_vLodProfile",iVar1,0);
  bVar7 = FUN_0046a8e0("g_vMaterialAmbient",unaff_ESI + 0x188c,1);
  bVar8 = FUN_0046a8e0("g_vMaterialDiffuse",unaff_ESI + 0x188c,1);
  bVar8 = bVar2 & bVar3 & bVar4 & bVar5 & bVar6 & bVar7 & bVar8;
  if (*(char *)(unaff_ESI + 0x13c8) != '\0') {
    bVar2 = FUN_0046a8e0("g_vMaterialSpecular",unaff_ESI + 0x188c,1);
    bVar8 = bVar8 & bVar2;
  }
  if (*(char *)(unaff_ESI + 0x13c9) != '\0') {
    bVar2 = FUN_0046a8e0("g_vMaterialEmissive",unaff_ESI + 0x188c,1);
    bVar3 = FUN_0046a8e0("g_vMaterialTransmission",unaff_ESI + 0x1be0,2);
    bVar8 = bVar8 & bVar2 & bVar3;
  }
  bVar2 = FUN_0046a8e0("g_vMaterialExtras",iVar1,2);
  bVar3 = FUN_0046a8e0("g_vLightDir",iVar1,2);
  bVar4 = FUN_0046a8e0("g_vFogParams",iVar1,0);
  bVar5 = FUN_0046a8e0("g_vFogColor",iVar1,0);
  bVar6 = FUN_0046a8e0("g_vCameraAngles",unaff_ESI + 0x2288,0);
  bVar7 = FUN_0046a8e0("g_vCameraPosition",iVar1,0);
  bVar9 = FUN_0046a8e0("g_vCameraDirection",iVar1,2);
  bVar9 = bVar8 & bVar2 & bVar3 & bVar4 & bVar5 & bVar6 & bVar7 & bVar9;
  if (*(char *)(unaff_ESI + 100) != '\0') {
    iVar1 = unaff_ESI + 0x188c;
    bVar2 = FUN_0046a8e0("g_vWindDir",iVar1,0);
    bVar3 = FUN_0046a8e0("g_vWindTimes",iVar1,0);
    bVar4 = FUN_0046a8e0("g_vWindDistances",iVar1,0);
    bVar5 = FUN_0046a8e0("g_vWindLeaves",unaff_ESI + 0x1be0,0);
    bVar6 = FUN_0046a8e0("g_vWindGust",iVar1,0);
    bVar7 = FUN_0046a8e0("g_vWindGustHints",iVar1,0);
    bVar9 = bVar9 & bVar2 & bVar3 & bVar4 & bVar5 & bVar6 & bVar7;
    if (*(char *)(unaff_ESI + 0x141f) != '\0') {
      bVar2 = FUN_0046a8e0("g_vWindFrondRipple",iVar1,0);
      bVar9 = bVar9 & bVar2;
    }
  }
  iVar1 = unaff_ESI + 0x2288;
  bVar2 = FUN_0046a8e0("g_fNum360Images",iVar1,0);
  bVar3 = FUN_0046a8e0("g_vCameraAzimuthTrig",iVar1,0);
  bVar4 = FUN_0046a8e0("g_av360TexCoords",iVar1,0);
  bVar5 = FUN_0046a8e0("g_vVertBillboardDimensions",iVar1,0);
  bVar6 = FUN_0046a8e0("g_avBillboardTangents",iVar1,0);
  bVar7 = FUN_0046a8e0("g_fHorzBillboardFade",iVar1,0);
  bVar7 = bVar9 & bVar2 & bVar3 & bVar4 & bVar5 & bVar6 & bVar7;
  if (*(char *)(unaff_ESI + 0xd14) != '\0') {
    bVar2 = FUN_0046a8e0("g_vHorzBillboardTexCoords",iVar1,0);
    bVar3 = FUN_0046a8e0("g_vHorzBillboardDimensions",iVar1,0);
    bVar7 = bVar7 & bVar2 & bVar3;
  }
  local_118 = &PTR_FUN_00cd3f48;
  _memmove(local_110,"Diffuse",7);
  local_114 = 7;
  local_109 = 0;
  local_8 = 0;
  iVar10 = FUN_0046a950(local_220);
  local_8 = CONCAT31(local_8._1_3_,1);
  iVar1 = unaff_ESI + 0x1538;
  bVar2 = FUN_0046a8e0(iVar10 + 8,iVar1,1);
  bVar7 = bVar7 & bVar2;
  local_220[0] = &PTR_FUN_00cd3f48;
  local_8 = 0xffffffff;
  local_118 = &PTR_FUN_00cd3f48;
  if (DAT_00d6911c != '\0') {
    bVar2 = FUN_0046a8e0("g_vPickColorValue",iVar1,1);
    bVar7 = bVar7 & bVar2;
  }
  bVar2 = FUN_0046a8e0("g_fGlobalAlpha",iVar1,1);
  ExceptionList = local_10;
  return bVar2 & bVar7;
}



============================================================
DISASSEMBLY
============================================================
0046b960 : PUSH EBP
0046b961 : MOV EBP,ESP
0046b963 : PUSH -0x1
0046b965 : PUSH 0xb827c6
0046b96a : MOV EAX,FS:[0x0]
0046b970 : PUSH EAX
0046b971 : SUB ESP,0x210
0046b977 : PUSH EBX
0046b978 : PUSH EDI
0046b979 : MOV EAX,[0x00d66fa0]
0046b97e : XOR EAX,EBP
0046b980 : PUSH EAX
0046b981 : LEA EAX,[EBP + -0xc]
0046b984 : MOV FS:[0x0],EAX
0046b98a : PUSH 0x0
0046b98c : LEA EDI,[ESI + 0x1538]
0046b992 : PUSH EDI
0046b993 : LEA EAX,[ESI + 0x3084]
0046b999 : PUSH 0xcd5878
0046b99e : CALL 0x0046a8e0
0046b9a3 : PUSH 0x0
0046b9a5 : LEA ECX,[ESI + 0x1be0]
0046b9ab : PUSH ECX
0046b9ac : MOV BL,AL
0046b9ae : LEA EAX,[ESI + 0x319c]
0046b9b4 : PUSH 0xcd588c
0046b9b9 : CALL 0x0046a8e0
0046b9be : PUSH 0x0
0046b9c0 : PUSH EDI
0046b9c1 : AND BL,AL
0046b9c3 : LEA EAX,[ESI + 0x32b4]
0046b9c9 : PUSH 0xcd58a4
0046b9ce : CALL 0x0046a8e0
0046b9d3 : PUSH 0x0
0046b9d5 : PUSH EDI
0046b9d6 : AND BL,AL
0046b9d8 : LEA EAX,[ESI + 0x33cc]
0046b9de : PUSH 0xcd58b8
0046b9e3 : CALL 0x0046a8e0
0046b9e8 : PUSH 0x0
0046b9ea : PUSH EDI
0046b9eb : AND BL,AL
0046b9ed : LEA EAX,[ESI + 0x34e4]
0046b9f3 : PUSH 0xcd58c8
0046b9f8 : CALL 0x0046a8e0
0046b9fd : PUSH 0x1
0046b9ff : LEA ECX,[ESI + 0x188c]
0046ba05 : PUSH ECX
0046ba06 : AND BL,AL
0046ba08 : LEA EAX,[ESI + 0x35fc]
0046ba0e : PUSH 0xcd5280
0046ba13 : CALL 0x0046a8e0
0046ba18 : PUSH 0x1
0046ba1a : LEA ECX,[ESI + 0x188c]
0046ba20 : PUSH ECX
0046ba21 : AND BL,AL
0046ba23 : LEA EAX,[ESI + 0x3714]
0046ba29 : PUSH 0xcd5294
0046ba2e : CALL 0x0046a8e0
0046ba33 : AND BL,AL
0046ba35 : CMP byte ptr [ESI + 0x13c8],0x0
0046ba3c : JZ 0x0046ba59
0046ba3e : PUSH 0x1
0046ba40 : LEA ECX,[ESI + 0x188c]
0046ba46 : PUSH ECX
0046ba47 : LEA EAX,[ESI + 0x382c]
0046ba4d : PUSH 0xcd58d8
0046ba52 : CALL 0x0046a8e0
0046ba57 : AND BL,AL
0046ba59 : CMP byte ptr [ESI + 0x13c9],0x0
0046ba60 : JZ 0x0046ba98
0046ba62 : PUSH 0x1
0046ba64 : LEA ECX,[ESI + 0x188c]
0046ba6a : PUSH ECX
0046ba6b : LEA EAX,[ESI + 0x3944]
0046ba71 : PUSH 0xcd58ec
0046ba76 : CALL 0x0046a8e0
0046ba7b : PUSH 0x2
0046ba7d : LEA ECX,[ESI + 0x1be0]
0046ba83 : PUSH ECX
0046ba84 : AND BL,AL
0046ba86 : LEA EAX,[ESI + 0x3b74]
0046ba8c : PUSH 0xcd5900
0046ba91 : CALL 0x0046a8e0
0046ba96 : AND BL,AL
0046ba98 : PUSH 0x2
0046ba9a : PUSH EDI
0046ba9b : LEA EAX,[ESI + 0x3a5c]
0046baa1 : PUSH 0xcd5918
0046baa6 : CALL 0x0046a8e0
0046baab : PUSH 0x2
0046baad : PUSH EDI
0046baae : AND BL,AL
0046bab0 : LEA EAX,[ESI + 0x4204]
0046bab6 : PUSH 0xcd5274
0046babb : CALL 0x0046a8e0
0046bac0 : PUSH 0x0
0046bac2 : PUSH EDI
0046bac3 : AND BL,AL
0046bac5 : LEA EAX,[ESI + 0x431c]
0046bacb : PUSH 0xcd592c
0046bad0 : CALL 0x0046a8e0
0046bad5 : PUSH 0x0
0046bad7 : PUSH EDI
0046bad8 : AND BL,AL
0046bada : LEA EAX,[ESI + 0x4434]
0046bae0 : PUSH 0xcd593c
0046bae5 : CALL 0x0046a8e0
0046baea : PUSH 0x0
0046baec : LEA ECX,[ESI + 0x2288]
0046baf2 : PUSH ECX
0046baf3 : AND BL,AL
0046baf5 : LEA EAX,[ESI + 0x454c]
0046bafb : PUSH 0xcd5948
0046bb00 : CALL 0x0046a8e0
0046bb05 : PUSH 0x0
0046bb07 : PUSH EDI
0046bb08 : AND BL,AL
0046bb0a : LEA EAX,[ESI + 0x4664]
0046bb10 : PUSH 0xcd5958
0046bb15 : CALL 0x0046a8e0
0046bb1a : PUSH 0x2
0046bb1c : PUSH EDI
0046bb1d : AND BL,AL
0046bb1f : LEA EAX,[ESI + 0x477c]
0046bb25 : PUSH 0xcd596c
0046bb2a : CALL 0x0046a8e0
0046bb2f : AND BL,AL
0046bb31 : CMP byte ptr [ESI + 0x64],0x0
0046bb35 : JZ 0x0046bbe3
0046bb3b : PUSH 0x0
0046bb3d : LEA EDI,[ESI + 0x188c]
0046bb43 : PUSH EDI
0046bb44 : LEA EAX,[ESI + 0x4bdc]
0046bb4a : PUSH 0xcd5980
0046bb4f : CALL 0x0046a8e0
0046bb54 : PUSH 0x0
0046bb56 : PUSH EDI
0046bb57 : AND BL,AL
0046bb59 : LEA EAX,[ESI + 0x4cf4]
0046bb5f : PUSH 0xcd598c
0046bb64 : CALL 0x0046a8e0
0046bb69 : PUSH 0x0
0046bb6b : PUSH EDI
0046bb6c : AND BL,AL
0046bb6e : LEA EAX,[ESI + 0x4e0c]
0046bb74 : PUSH 0xcd599c
0046bb79 : CALL 0x0046a8e0
0046bb7e : PUSH 0x0
0046bb80 : LEA ECX,[ESI + 0x1be0]
0046bb86 : PUSH ECX
0046bb87 : AND BL,AL
0046bb89 : LEA EAX,[ESI + 0x4f24]
0046bb8f : PUSH 0xcd59b0
0046bb94 : CALL 0x0046a8e0
0046bb99 : PUSH 0x0
0046bb9b : PUSH EDI
0046bb9c : AND BL,AL
0046bb9e : LEA EAX,[ESI + 0x5154]
0046bba4 : PUSH 0xcd59c0
0046bba9 : CALL 0x0046a8e0
0046bbae : PUSH 0x0
0046bbb0 : PUSH EDI
0046bbb1 : AND BL,AL
0046bbb3 : LEA EAX,[ESI + 0x526c]
0046bbb9 : PUSH 0xcd59cc
0046bbbe : CALL 0x0046a8e0
0046bbc3 : AND BL,AL
0046bbc5 : CMP byte ptr [ESI + 0x141f],0x0
0046bbcc : JZ 0x0046bbe3
0046bbce : PUSH 0x0
0046bbd0 : PUSH EDI
0046bbd1 : LEA EAX,[ESI + 0x503c]
0046bbd7 : PUSH 0xcd59e0
0046bbdc : CALL 0x0046a8e0
0046bbe1 : AND BL,AL
0046bbe3 : PUSH 0x0
0046bbe5 : LEA EDI,[ESI + 0x2288]
0046bbeb : PUSH EDI
0046bbec : LEA EAX,[ESI + 0x5384]
0046bbf2 : PUSH 0xcd59f4
0046bbf7 : CALL 0x0046a8e0
0046bbfc : PUSH 0x0
0046bbfe : PUSH EDI
0046bbff : AND BL,AL
0046bc01 : LEA EAX,[ESI + 0x549c]
0046bc07 : PUSH 0xcd5a04
0046bc0c : CALL 0x0046a8e0
0046bc11 : PUSH 0x0
0046bc13 : PUSH EDI
0046bc14 : AND BL,AL
0046bc16 : LEA EAX,[ESI + 0x55b4]
0046bc1c : PUSH 0xcd5a1c
0046bc21 : CALL 0x0046a8e0
0046bc26 : PUSH 0x0
0046bc28 : PUSH EDI
0046bc29 : AND BL,AL
0046bc2b : LEA EAX,[ESI + 0x56cc]
0046bc31 : PUSH 0xcd5a30
0046bc36 : CALL 0x0046a8e0
0046bc3b : PUSH 0x0
0046bc3d : PUSH EDI
0046bc3e : AND BL,AL
0046bc40 : LEA EAX,[ESI + 0x58fc]
0046bc46 : PUSH 0xcd5a4c
0046bc4b : CALL 0x0046a8e0
0046bc50 : PUSH 0x0
0046bc52 : PUSH EDI
0046bc53 : AND BL,AL
0046bc55 : LEA EAX,[ESI + 0x5a14]
0046bc5b : PUSH 0xcd5a64
0046bc60 : CALL 0x0046a8e0
0046bc65 : AND BL,AL
0046bc67 : CMP byte ptr [ESI + 0xd14],0x0
0046bc6e : JZ 0x0046bc9a
0046bc70 : PUSH 0x0
0046bc72 : PUSH EDI
0046bc73 : LEA EAX,[ESI + 0x5b2c]
0046bc79 : PUSH 0xcd5a7c
0046bc7e : CALL 0x0046a8e0
0046bc83 : PUSH 0x0
0046bc85 : PUSH EDI
0046bc86 : AND BL,AL
0046bc88 : LEA EAX,[ESI + 0x57e4]
0046bc8e : PUSH 0xcd5a98
0046bc93 : CALL 0x0046a8e0
0046bc98 : AND BL,AL
0046bc9a : PUSH 0x7
0046bc9c : LEA EAX,[EBP + 0xfffffef4]
0046bca2 : PUSH 0xcd5ab4
0046bca7 : PUSH EAX
0046bca8 : MOV dword ptr [EBP + 0xfffffeec],0xcd3f48
0046bcb2 : CALL 0x00636880
0046bcb7 : ADD ESP,0xc
0046bcba : MOV dword ptr [EBP + 0xfffffef0],0x7
0046bcc4 : MOV byte ptr [EBP + 0xfffffefb],0x0
0046bccb : MOV dword ptr [EBP + -0x4],0x0
0046bcd2 : LEA ECX,[EBP + 0xfffffde4]
0046bcd8 : PUSH ECX
0046bcd9 : LEA EDI,[EBP + 0xfffffeec]
0046bcdf : CALL 0x0046a950
0046bce4 : MOV ECX,EAX
0046bce6 : MOV byte ptr [EBP + -0x4],0x1
0046bcea : PUSH 0x1
0046bcec : LEA EDI,[ESI + 0x1538]
0046bcf2 : PUSH EDI
0046bcf3 : ADD ECX,0x8
0046bcf6 : LEA EAX,[ESI + 0x3c8c]
0046bcfc : PUSH ECX
0046bcfd : CALL 0x0046a8e0
0046bd02 : AND BL,AL
0046bd04 : MOV byte ptr [EBP + -0x4],0x0
0046bd08 : MOV EAX,0xcd3f48
0046bd0d : MOV dword ptr [EBP + 0xfffffde4],EAX
0046bd13 : MOV dword ptr [EBP + -0x4],0xffffffff
0046bd1a : CMP byte ptr [0x00d6911c],0x0
0046bd21 : MOV dword ptr [EBP + 0xfffffeec],EAX
0046bd27 : JZ 0x0046bd3e
0046bd29 : PUSH 0x1
0046bd2b : PUSH EDI
0046bd2c : LEA EAX,[ESI + 0x6778]
0046bd32 : PUSH 0xcd5abc
0046bd37 : CALL 0x0046a8e0
0046bd3c : AND BL,AL
0046bd3e : PUSH 0x1
0046bd40 : PUSH EDI
0046bd41 : LEA EAX,[ESI + 0x6890]
0046bd47 : PUSH 0xcd5ad0
0046bd4c : CALL 0x0046a8e0
0046bd51 : AND AL,BL
0046bd53 : MOV ECX,dword ptr [EBP + -0xc]
0046bd56 : MOV dword ptr FS:[0x0],ECX
0046bd5d : POP ECX
0046bd5e : POP EDI
0046bd5f : POP EBX
0046bd60 : MOV ESP,EBP
0046bd62 : POP EBP
0046bd63 : RET
