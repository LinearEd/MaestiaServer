PROGRAM  : Maestia.exe
FUNCTION : FUN_005edb40
ENTRY    : 005edb40
BODY     : [[005edb40, 005edd69]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005edb40(int *param_1)

{
  int iVar1;
  int *in_ECX;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  float local_68;
  float local_64;
  float local_60;
  float local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 uStack_40;
  undefined2 uStack_3c;
  undefined1 uStack_3a;
  byte bStack_39;
  undefined1 uStack_38;
  undefined1 uStack_37;
  undefined1 uStack_36;
  undefined1 uStack_35;
  undefined4 uStack_34;
  undefined2 uStack_30;
  undefined1 uStack_2e;
  byte bStack_2d;
  undefined1 uStack_2c;
  undefined1 uStack_2b;
  undefined1 uStack_2a;
  undefined1 uStack_29;
  undefined4 uStack_28;
  undefined2 uStack_24;
  undefined2 uStack_22;
  undefined4 local_20 [8];
  
  puVar3 = (undefined4 *)param_1[0x10];
  local_58 = *puVar3;
  iVar1 = in_ECX[0x1a];
  local_54 = puVar3[1];
  local_50 = puVar3[2];
  local_4c = puVar3[3];
  local_48 = puVar3[4];
  local_44 = puVar3[5];
  GMatrix2D::Prepend((GMatrix2D *)&local_58,(GMatrix2D *)(in_ECX + 0x11));
  puVar3 = (undefined4 *)param_1[0x11];
  puVar4 = local_20;
  for (iVar2 = 8; iVar2 != 0; iVar2 = iVar2 + -1) {
    *puVar4 = *puVar3;
    puVar3 = puVar3 + 1;
    puVar4 = puVar4 + 1;
  }
  FUN_0059cfa0(in_ECX + 9);
  local_68 = 0.0;
  local_64 = 0.0;
  local_60 = 0.0;
  local_5c = 0.0;
  GMatrix2D::EncloseTransform
            ((GMatrix2D *)&local_58,(GRect<float> *)&local_68,(GRect<float> *)(iVar1 + 0x10));
  iVar2 = (**(code **)(*in_ECX + 0x40))();
  if (((((local_64 < *(float *)(iVar2 + 0xd4) != (local_64 == *(float *)(iVar2 + 0xd4))) &&
        (*(float *)(iVar2 + 0xcc) < local_5c != (*(float *)(iVar2 + 0xcc) == local_5c))) &&
       (*(float *)(iVar2 + 200) < local_60 != (*(float *)(iVar2 + 200) == local_60))) &&
      (local_68 < *(float *)(iVar2 + 0xd0) != (local_68 == *(float *)(iVar2 + 0xd0)))) ||
     ((*(uint *)(*param_1 + 0x14) & 0x100) != 0)) {
    uStack_30 = 0;
    uStack_36 = 0x10;
    uStack_2a = 0x10;
    uStack_40 = 0;
    uStack_3c = 0;
    uStack_3a = 0;
    bStack_39 = 0;
    uStack_38 = 0;
    uStack_37 = 0;
    uStack_35 = 0;
    uStack_34 = 0;
    uStack_2e = 0;
    bStack_2d = 0;
    uStack_2c = 0;
    uStack_2b = 0;
    uStack_29 = 0;
    uStack_28 = 0;
    uStack_24 = 0;
    uStack_22 = 0;
    FUN_00544270(in_ECX + 0x4e);
    if ((*(byte *)(iVar1 + 0x44) & 1) != 0) {
      bStack_39 = bStack_39 | 3;
      bStack_2d = bStack_2d | 3;
    }
    GMatrix2D::Prepend((GMatrix2D *)&local_58,(GMatrix2D *)(iVar1 + 0x20));
    iVar1 = in_ECX[0x55];
    if (iVar1 != 0) {
      if (*(char *)(iVar1 + 0x18) == '\0') {
        FUN_005d33d0(iVar1 + 0x1c,in_ECX + 0x1b,in_ECX + 0x21,0,0,0);
        *(undefined1 *)(iVar1 + 0x18) = 1;
      }
      iVar1 = *(int *)(in_ECX[0x55] + 0x24);
      if ((iVar1 != 0) && ((*(int *)(iVar1 + 0x54) != 0 || (*(int *)(iVar1 + 0x60) != 0)))) {
        FUN_005d7770(param_1,&local_58,local_20,0,0);
      }
    }
    FUN_0059a980(param_1,&local_58,local_20,*(byte *)(in_ECX + 0x56) >> 1 & 1,&uStack_40,0);
    *(byte *)(in_ECX + 0x56) = *(byte *)(in_ECX + 0x56) & 0xfd;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005edb40 : SUB ESP,0x6c
005edb43 : PUSH EBX
005edb44 : PUSH EBP
005edb45 : PUSH ESI
005edb46 : MOV ESI,dword ptr [ESP + 0x7c]
005edb4a : MOV EAX,dword ptr [ESI + 0x40]
005edb4d : FLD float ptr [EAX]
005edb4f : MOV EBP,ECX
005edb51 : MOV EBX,dword ptr [EBP + 0x68]
005edb54 : FSTP float ptr [ESP + 0x20]
005edb58 : FLD float ptr [EAX + 0x4]
005edb5b : PUSH EDI
005edb5c : FSTP float ptr [ESP + 0x28]
005edb60 : LEA ECX,[ESP + 0x24]
005edb64 : FLD float ptr [EAX + 0x8]
005edb67 : MOV dword ptr [ESP + 0x10],EBX
005edb6b : FSTP float ptr [ESP + 0x2c]
005edb6f : FLD float ptr [EAX + 0xc]
005edb72 : FSTP float ptr [ESP + 0x30]
005edb76 : FLD float ptr [EAX + 0x10]
005edb79 : FSTP float ptr [ESP + 0x34]
005edb7d : FLD float ptr [EAX + 0x14]
005edb80 : LEA EAX,[EBP + 0x44]
005edb83 : PUSH EAX
005edb84 : FSTP float ptr [ESP + 0x3c]
005edb88 : CALL 0x00522e20
005edb8d : MOV ESI,dword ptr [ESI + 0x44]
005edb90 : MOV ECX,0x8
005edb95 : LEA EDI,[ESP + 0x5c]
005edb99 : MOVSD.REP ES:EDI,ESI
005edb9b : LEA ECX,[EBP + 0x24]
005edb9e : PUSH ECX
005edb9f : LEA ECX,[ESP + 0x60]
005edba3 : CALL 0x0059cfa0
005edba8 : ADD EBX,0x10
005edbab : FLDZ
005edbad : PUSH EBX
005edbae : FST float ptr [ESP + 0x18]
005edbb2 : LEA EDX,[ESP + 0x18]
005edbb6 : FST float ptr [ESP + 0x1c]
005edbba : PUSH EDX
005edbbb : FST float ptr [ESP + 0x24]
005edbbf : LEA ECX,[ESP + 0x2c]
005edbc3 : FSTP float ptr [ESP + 0x28]
005edbc7 : CALL 0x005231d0
005edbcc : MOV EAX,dword ptr [EBP]
005edbcf : MOV EDX,dword ptr [EAX + 0x40]
005edbd2 : MOV ECX,EBP
005edbd4 : CALL EDX
005edbd6 : MOV ECX,EAX
005edbd8 : FLD float ptr [ECX + 0xd4]
005edbde : ADD ECX,0xc8
005edbe4 : FLD float ptr [ESP + 0x18]
005edbe8 : FCOMPP
005edbea : FNSTSW AX
005edbec : TEST AH,0x41
005edbef : JP 0x005edc20
005edbf1 : FLD float ptr [ESP + 0x20]
005edbf5 : FLD float ptr [ECX + 0x4]
005edbf8 : FCOMPP
005edbfa : FNSTSW AX
005edbfc : TEST AH,0x41
005edbff : JP 0x005edc20
005edc01 : FLD float ptr [ESP + 0x1c]
005edc05 : FLD float ptr [ECX]
005edc07 : FCOMPP
005edc09 : FNSTSW AX
005edc0b : TEST AH,0x41
005edc0e : JP 0x005edc20
005edc10 : FLD float ptr [ECX + 0x8]
005edc13 : FLD float ptr [ESP + 0x14]
005edc17 : FCOMPP
005edc19 : FNSTSW AX
005edc1b : TEST AH,0x41
005edc1e : JNP 0x005edc36
005edc20 : MOV EAX,dword ptr [ESP + 0x80]
005edc27 : MOV ECX,dword ptr [EAX]
005edc29 : TEST dword ptr [ECX + 0x14],0x100
005edc30 : JZ 0x005edd60
005edc36 : XOR EBX,EBX
005edc38 : XOR ECX,ECX
005edc3a : MOV AL,0x10
005edc3c : MOV word ptr [ESP + 0x4c],CX
005edc41 : LEA ECX,[EBP + 0x138]
005edc47 : XOR EDX,EDX
005edc49 : MOV byte ptr [ESP + 0x46],AL
005edc4d : MOV byte ptr [ESP + 0x52],AL
005edc51 : XOR EAX,EAX
005edc53 : PUSH ECX
005edc54 : LEA ECX,[ESP + 0x40]
005edc58 : MOV dword ptr [ESP + 0x40],EBX
005edc5c : MOV word ptr [ESP + 0x44],DX
005edc61 : MOV byte ptr [ESP + 0x46],BL
005edc65 : MOV byte ptr [ESP + 0x47],BL
005edc69 : MOV byte ptr [ESP + 0x48],BL
005edc6d : MOV byte ptr [ESP + 0x49],BL
005edc71 : MOV byte ptr [ESP + 0x4b],BL
005edc75 : MOV dword ptr [ESP + 0x4c],EBX
005edc79 : MOV byte ptr [ESP + 0x52],BL
005edc7d : MOV byte ptr [ESP + 0x53],BL
005edc81 : MOV byte ptr [ESP + 0x54],BL
005edc85 : MOV byte ptr [ESP + 0x55],BL
005edc89 : MOV byte ptr [ESP + 0x57],BL
005edc8d : MOV dword ptr [ESP + 0x58],EBX
005edc91 : MOV word ptr [ESP + 0x5c],DX
005edc96 : MOV word ptr [ESP + 0x5e],AX
005edc9b : CALL 0x00544270
005edca0 : MOV EAX,dword ptr [ESP + 0x10]
005edca4 : TEST byte ptr [EAX + 0x44],0x1
005edca8 : JZ 0x005edcb4
005edcaa : MOV CL,0x3
005edcac : OR byte ptr [ESP + 0x43],CL
005edcb0 : OR byte ptr [ESP + 0x4f],CL
005edcb4 : ADD EAX,0x20
005edcb7 : PUSH EAX
005edcb8 : LEA ECX,[ESP + 0x28]
005edcbc : CALL 0x00522e20
005edcc1 : MOV ESI,dword ptr [EBP + 0x154]
005edcc7 : CMP ESI,EBX
005edcc9 : JZ 0x005edd2a
005edccb : CMP byte ptr [ESI + 0x18],BL
005edcce : JNZ 0x005edcf7
005edcd0 : FLDZ
005edcd2 : SUB ESP,0x8
005edcd5 : FST float ptr [ESP + 0x4]
005edcd9 : LEA EDX,[EBP + 0x84]
005edcdf : FSTP float ptr [ESP]
005edce2 : LEA EAX,[EBP + 0x6c]
005edce5 : PUSH EBX
005edce6 : PUSH EDX
005edce7 : PUSH EAX
005edce8 : LEA ECX,[ESI + 0x1c]
005edceb : PUSH ECX
005edcec : MOV ECX,ESI
005edcee : CALL 0x005d33d0
005edcf3 : MOV byte ptr [ESI + 0x18],0x1
005edcf7 : MOV EAX,dword ptr [EBP + 0x154]
005edcfd : LEA ECX,[EAX + 0x1c]
005edd00 : MOV EAX,dword ptr [ECX + 0x8]
005edd03 : CMP EAX,EBX
005edd05 : JZ 0x005edd2a
005edd07 : CMP dword ptr [EAX + 0x54],EBX
005edd0a : JNZ 0x005edd11
005edd0c : CMP dword ptr [EAX + 0x60],EBX
005edd0f : JZ 0x005edd2a
005edd11 : PUSH EBX
005edd12 : PUSH EBX
005edd13 : LEA EDX,[ESP + 0x64]
005edd17 : PUSH EDX
005edd18 : MOV EDX,dword ptr [ESP + 0x8c]
005edd1f : LEA EAX,[ESP + 0x30]
005edd23 : PUSH EAX
005edd24 : PUSH EDX
005edd25 : CALL 0x005d7770
005edd2a : MOV CL,byte ptr [EBP + 0x158]
005edd30 : SHR CL,0x1
005edd32 : PUSH EBX
005edd33 : AND CL,0x1
005edd36 : MOVZX EDX,CL
005edd39 : LEA EAX,[ESP + 0x40]
005edd3d : PUSH EAX
005edd3e : PUSH EDX
005edd3f : MOV EDX,dword ptr [ESP + 0x8c]
005edd46 : LEA EAX,[ESP + 0x68]
005edd4a : PUSH EAX
005edd4b : LEA ECX,[ESP + 0x34]
005edd4f : PUSH ECX
005edd50 : PUSH EDX
005edd51 : LEA ECX,[EBP + 0x6c]
005edd54 : CALL 0x0059a980
005edd59 : AND byte ptr [EBP + 0x158],0xfd
005edd60 : POP EDI
005edd61 : POP ESI
005edd62 : POP EBP
005edd63 : POP EBX
005edd64 : ADD ESP,0x6c
005edd67 : RET 0x4
