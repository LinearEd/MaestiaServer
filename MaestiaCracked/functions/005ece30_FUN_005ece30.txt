PROGRAM  : Maestia.exe
FUNCTION : FUN_005ece30
ENTRY    : 005ece30
BODY     : [[005ece30, 005ecf8f]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_005ece30(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  GRefCountNTSImpl *pGVar3;
  int iVar4;
  GRefCountNTSImpl *this;
  uint uVar5;
  uint uVar6;
  int *in_ECX;
  GRefCountNTSImpl *local_4;
  
  if (param_1 == param_2) {
    return 1;
  }
  uVar5 = FUN_005ec580();
  if (((uVar5 < (uint)in_ECX[1]) &&
      (iVar1 = uVar5 * 4, *(int *)(*(int *)(iVar1 + *in_ECX) + 0x14) == param_1)) &&
     (uVar5 != 0xffffffff)) {
    uVar6 = FUN_005ec580();
    in_ECX[3] = 0;
    if ((uVar6 < (uint)in_ECX[1]) &&
       (iVar2 = *in_ECX, *(int *)(*(int *)(iVar2 + uVar6 * 4) + 0x14) == param_2)) {
      pGVar3 = *(GRefCountNTSImpl **)(iVar2 + iVar1);
      if (pGVar3 != (GRefCountNTSImpl *)0x0) {
        *(int *)(pGVar3 + 4) = *(int *)(pGVar3 + 4) + 1;
      }
      iVar4 = *(int *)(iVar2 + uVar6 * 4);
      if (*(GRefCountNTSImpl **)(iVar2 + iVar1) != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar2 + iVar1));
      }
      *(int *)(iVar2 + iVar1) = iVar4;
      if (iVar4 != 0) {
        *(int *)(iVar4 + 4) = *(int *)(iVar4 + 4) + 1;
      }
      this = *(GRefCountNTSImpl **)(iVar2 + uVar6 * 4);
      if (this != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(this);
      }
      *(GRefCountNTSImpl **)(iVar2 + uVar6 * 4) = pGVar3;
      if (pGVar3 != (GRefCountNTSImpl *)0x0) {
        *(int *)(pGVar3 + 4) = *(int *)(pGVar3 + 4) + 1;
        GRefCountNTSImpl::Release(pGVar3);
      }
      if (*(int *)(iVar1 + *in_ECX) != 0) {
        *(int *)(*(int *)(iVar1 + *in_ECX) + 0x14) = param_1;
      }
    }
    else {
      pGVar3 = *(GRefCountNTSImpl **)(iVar1 + *in_ECX);
      if (pGVar3 != (GRefCountNTSImpl *)0x0) {
        *(int *)(pGVar3 + 4) = *(int *)(pGVar3 + 4) + 1;
      }
      local_4 = pGVar3;
      FUN_005ecd60(uVar5);
      if (uVar5 < uVar6) {
        uVar6 = uVar6 - 1;
      }
      FUN_005ecdb0(uVar6,&local_4);
      if (pGVar3 != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(pGVar3);
      }
    }
    iVar1 = *(int *)(*in_ECX + uVar6 * 4);
    if (iVar1 != 0) {
      *(int *)(iVar1 + 0x14) = param_2;
    }
    return 1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
005ece30 : SUB ESP,0x14
005ece33 : PUSH EBP
005ece34 : MOV EBP,dword ptr [ESP + 0x1c]
005ece38 : PUSH ESI
005ece39 : MOV ESI,ECX
005ece3b : CMP EBP,dword ptr [ESP + 0x24]
005ece3f : JNZ 0x005ece4b
005ece41 : POP ESI
005ece42 : MOV AL,0x1
005ece44 : POP EBP
005ece45 : ADD ESP,0x14
005ece48 : RET 0x8
005ece4b : MOV EAX,dword ptr [ESI + 0x4]
005ece4e : PUSH EBX
005ece4f : PUSH EDI
005ece50 : PUSH 0x5ec560
005ece55 : LEA ECX,[ESP + 0x18]
005ece59 : PUSH ECX
005ece5a : PUSH EAX
005ece5b : PUSH 0x0
005ece5d : PUSH ESI
005ece5e : MOV dword ptr [ESP + 0x28],EBP
005ece62 : CALL 0x005ec580
005ece67 : MOV EBX,EAX
005ece69 : MOV EAX,dword ptr [ESI + 0x4]
005ece6c : ADD ESP,0x14
005ece6f : CMP EBX,EAX
005ece71 : JNC 0x005ece8d
005ece73 : MOV EDX,dword ptr [ESI]
005ece75 : LEA EDI,[EBX*0x4 + 0x0]
005ece7c : MOV ECX,dword ptr [EDI + EDX*0x1]
005ece7f : MOV dword ptr [ESP + 0x10],EDI
005ece83 : CMP dword ptr [ECX + 0x14],EBP
005ece86 : JNZ 0x005ece8d
005ece88 : CMP EBX,-0x1
005ece8b : JNZ 0x005ece99
005ece8d : POP EDI
005ece8e : POP EBX
005ece8f : POP ESI
005ece90 : XOR AL,AL
005ece92 : POP EBP
005ece93 : ADD ESP,0x14
005ece96 : RET 0x8
005ece99 : MOV EDX,dword ptr [ESP + 0x2c]
005ece9d : PUSH 0x5ec560
005ecea2 : LEA ECX,[ESP + 0x1c]
005ecea6 : PUSH ECX
005ecea7 : PUSH EAX
005ecea8 : PUSH 0x0
005eceaa : PUSH ESI
005eceab : MOV dword ptr [ESP + 0x2c],EDX
005eceaf : CALL 0x005ec580
005eceb4 : MOV EBP,EAX
005eceb6 : ADD ESP,0x14
005eceb9 : MOV dword ptr [ESI + 0xc],0x0
005ecec0 : CMP EBP,dword ptr [ESI + 0x4]
005ecec3 : JNC 0x005ecf3f
005ecec5 : MOV EDI,dword ptr [ESI]
005ecec7 : MOV EDX,dword ptr [EDI + EBP*0x4]
005ececa : MOV EAX,dword ptr [ESP + 0x2c]
005ecece : CMP dword ptr [EDX + 0x14],EAX
005eced1 : JNZ 0x005ecf3b
005eced3 : MOV ECX,dword ptr [ESP + 0x10]
005eced7 : MOV EBX,dword ptr [EDI + ECX*0x1]
005eceda : TEST EBX,EBX
005ecedc : JZ 0x005ecee1
005ecede : INC dword ptr [EBX + 0x4]
005ecee1 : MOV EAX,dword ptr [EDI + EBP*0x4]
005ecee4 : MOV EDX,ECX
005ecee6 : MOV ECX,dword ptr [EDI + EDX*0x1]
005ecee9 : MOV dword ptr [ESP + 0x1c],EAX
005eceed : TEST ECX,ECX
005eceef : JZ 0x005ecefa
005ecef1 : CALL 0x004ff7c0
005ecef6 : MOV EAX,dword ptr [ESP + 0x1c]
005ecefa : MOV ECX,dword ptr [ESP + 0x10]
005ecefe : MOV dword ptr [EDI + ECX*0x1],EAX
005ecf01 : TEST EAX,EAX
005ecf03 : JZ 0x005ecf08
005ecf05 : INC dword ptr [EAX + 0x4]
005ecf08 : MOV ECX,dword ptr [EDI + EBP*0x4]
005ecf0b : TEST ECX,ECX
005ecf0d : JZ 0x005ecf14
005ecf0f : CALL 0x004ff7c0
005ecf14 : MOV dword ptr [EDI + EBP*0x4],EBX
005ecf17 : TEST EBX,EBX
005ecf19 : JZ 0x005ecf25
005ecf1b : INC dword ptr [EBX + 0x4]
005ecf1e : MOV ECX,EBX
005ecf20 : CALL 0x004ff7c0
005ecf25 : MOV EDX,dword ptr [ESI]
005ecf27 : MOV EAX,dword ptr [ESP + 0x10]
005ecf2b : MOV EAX,dword ptr [EAX + EDX*0x1]
005ecf2e : TEST EAX,EAX
005ecf30 : JZ 0x005ecf74
005ecf32 : MOV ECX,dword ptr [ESP + 0x28]
005ecf36 : MOV dword ptr [EAX + 0x14],ECX
005ecf39 : JMP 0x005ecf74
005ecf3b : MOV EDI,dword ptr [ESP + 0x10]
005ecf3f : MOV EDX,dword ptr [ESI]
005ecf41 : MOV EDI,dword ptr [EDI + EDX*0x1]
005ecf44 : MOV dword ptr [ESP + 0x20],EDI
005ecf48 : TEST EDI,EDI
005ecf4a : JZ 0x005ecf4f
005ecf4c : INC dword ptr [EDI + 0x4]
005ecf4f : PUSH EBX
005ecf50 : MOV ECX,ESI
005ecf52 : CALL 0x005ecd60
005ecf57 : CMP EBX,EBP
005ecf59 : JNC 0x005ecf5c
005ecf5b : DEC EBP
005ecf5c : LEA EAX,[ESP + 0x20]
005ecf60 : PUSH EAX
005ecf61 : PUSH EBP
005ecf62 : MOV ECX,ESI
005ecf64 : CALL 0x005ecdb0
005ecf69 : TEST EDI,EDI
005ecf6b : JZ 0x005ecf74
005ecf6d : MOV ECX,EDI
005ecf6f : CALL 0x004ff7c0
005ecf74 : MOV ECX,dword ptr [ESI]
005ecf76 : MOV EBP,dword ptr [ECX + EBP*0x4]
005ecf79 : TEST EBP,EBP
005ecf7b : JZ 0x005ecf84
005ecf7d : MOV EDX,dword ptr [ESP + 0x2c]
005ecf81 : MOV dword ptr [EBP + 0x14],EDX
005ecf84 : POP EDI
005ecf85 : POP EBX
005ecf86 : POP ESI
005ecf87 : MOV AL,0x1
005ecf89 : POP EBP
005ecf8a : ADD ESP,0x14
005ecf8d : RET 0x8
