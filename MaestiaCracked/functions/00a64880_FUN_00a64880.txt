PROGRAM  : Maestia.exe
FUNCTION : FUN_00a64880
ENTRY    : 00a64880
BODY     : [[00a64880, 00a64b22]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a64880(void)

{
  char cVar1;
  uint uVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 ****ppppuVar5;
  int in_ECX;
  undefined4 local_88;
  undefined1 local_4c [4];
  undefined4 local_48;
  uint local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b47b44;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  if (((DAT_00d6ab01 != '\0') || (*(char *)(in_ECX + 0x24) == '\0')) &&
     ((*(int *)(DAT_017251ac + 0x20) == 0 || (*(char *)(in_ECX + 0x24) == '\0')))) {
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    local_18 = 7;
    local_1c = 0;
    FUN_00405eb0(in_ECX + 4,0,0xffffffff);
    local_8 = 0;
    FUN_0070d390(uVar2);
    local_8._0_1_ = 1;
    cVar1 = FUN_008036f0(DAT_017251f4,local_30);
    if (cVar1 == '\0') {
      FUN_0070d4c0();
      *(undefined1 *)(in_ECX + 0x5c) = 1;
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      FUN_0040e420(local_30,local_4c);
      local_8._0_1_ = 2;
      FUN_0070c1f0();
      puVar3 = local_48;
      if (local_34 < 8) {
        puVar3 = &local_48;
      }
      iVar4 = FUN_00405b70(puVar3);
      if (((iVar4 == 0) && (2 < local_38)) && (local_38 == 3)) {
        *(undefined4 *)(in_ECX + 0x58) = 0;
      }
      iVar4 = FUN_007b4450(*(undefined4 *)(DAT_017251ac + 0x18),local_88,0xffffffff,0xffffffff,0,0,
                           DAT_00d6ab01 == '\0',0x70004,0x70004,*(undefined4 *)(in_ECX + 0x58),
                           in_ECX + 0x3c,in_ECX + 0x38,1);
      if (iVar4 < 0) {
        ppppuVar5 = (undefined4 ****)local_2c[0];
        if (local_18 < 8) {
          ppppuVar5 = local_2c;
        }
        FUN_008018d0(L"[AvaFxTxtr::Load] Failed CreateTextureFromFileInMemoryEx Name : %s, %x",
                     ppppuVar5,iVar4);
        FUN_00664d50(iVar4);
        FUN_0070d4c0();
        *(undefined1 *)(in_ECX + 0x5c) = 1;
        local_8 = CONCAT31(local_8._1_3_,1);
        if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_34 = 7;
        local_38 = 0;
        local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_0070d710();
        local_8 = 0xffffffff;
        if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_18 = 7;
        local_1c = 0;
        local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
        goto LAB_00a64b07;
      }
      FUN_0070d4c0();
      *(undefined1 *)(in_ECX + 0x24) = 1;
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_34 = 7;
      local_38 = 0;
      local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    local_1c = 0;
    local_18 = 7;
  }
LAB_00a64b07:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a64880 : PUSH EBP
00a64881 : MOV EBP,ESP
00a64883 : PUSH -0x1
00a64885 : PUSH 0xb47b44
00a6488a : MOV EAX,FS:[0x0]
00a64890 : PUSH EAX
00a64891 : SUB ESP,0x94
00a64897 : MOV EAX,[0x00d66fa0]
00a6489c : XOR EAX,EBP
00a6489e : MOV dword ptr [EBP + -0x10],EAX
00a648a1 : PUSH EBX
00a648a2 : PUSH ESI
00a648a3 : PUSH EDI
00a648a4 : PUSH EAX
00a648a5 : LEA EAX,[EBP + -0xc]
00a648a8 : MOV FS:[0x0],EAX
00a648ae : CMP byte ptr [0x00d6ab01],0x0
00a648b5 : MOV EDI,ECX
00a648b7 : JNZ 0x00a648c3
00a648b9 : CMP byte ptr [EDI + 0x24],0x0
00a648bd : JNZ 0x00a64a9d
00a648c3 : MOV EAX,[0x017251ac]
00a648c8 : XOR ESI,ESI
00a648ca : CMP dword ptr [EAX + 0x20],ESI
00a648cd : JZ 0x00a648d9
00a648cf : CMP byte ptr [EDI + 0x24],0x0
00a648d3 : JNZ 0x00a64a9d
00a648d9 : PUSH -0x1
00a648db : XOR ECX,ECX
00a648dd : LEA EAX,[EDI + 0x4]
00a648e0 : PUSH ESI
00a648e1 : MOV word ptr [EBP + -0x28],CX
00a648e5 : MOV EBX,0x7
00a648ea : PUSH EAX
00a648eb : LEA ECX,[EBP + -0x2c]
00a648ee : MOV dword ptr [EBP + -0x14],EBX
00a648f1 : MOV dword ptr [EBP + -0x18],ESI
00a648f4 : CALL 0x00405eb0
00a648f9 : MOV dword ptr [EBP + -0x4],ESI
00a648fc : LEA ECX,[EBP + 0xffffff60]
00a64902 : CALL 0x0070d390
00a64907 : MOV byte ptr [EBP + -0x4],0x1
00a6490b : MOV EAX,[0x017251f4]
00a64910 : LEA EDX,[EBP + -0x2c]
00a64913 : PUSH EDX
00a64914 : PUSH EAX
00a64915 : LEA ECX,[EBP + 0xffffff60]
00a6491b : CALL 0x008036f0
00a64920 : TEST AL,AL
00a64922 : JNZ 0x00a64960
00a64924 : LEA ECX,[EBP + 0xffffff60]
00a6492a : CALL 0x0070d4c0
00a6492f : MOV byte ptr [EDI + 0x5c],0x1
00a64933 : MOV byte ptr [EBP + -0x4],0x0
00a64937 : LEA ECX,[EBP + 0xffffff60]
00a6493d : CALL 0x0070d710
00a64942 : MOV dword ptr [EBP + -0x4],0xffffffff
00a64949 : CMP dword ptr [EBP + -0x14],0x8
00a6494d : JC 0x00a64957
00a6494f : MOV ECX,dword ptr [EBP + -0x28]
00a64952 : CALL 0x006f04e0
00a64957 : XOR ECX,ECX
00a64959 : XOR AL,AL
00a6495b : JMP 0x00a64afd
00a64960 : MOV ECX,dword ptr [EBP + -0x18]
00a64963 : LEA EAX,[EBP + -0x48]
00a64966 : PUSH EAX
00a64967 : LEA EAX,[EBP + -0x2c]
00a6496a : LEA EDX,[ECX + -0x3]
00a6496d : PUSH EAX
00a6496e : CALL 0x0040e420
00a64973 : MOV byte ptr [EBP + -0x4],0x2
00a64977 : LEA ECX,[EBP + -0x48]
00a6497a : CALL 0x0070c1f0
00a6497f : MOV EBX,dword ptr [EBP + -0x34]
00a64982 : MOV EDX,EBX
00a64984 : CMP EBX,0x3
00a64987 : JC 0x00a6498e
00a64989 : MOV EDX,0x3
00a6498e : CMP dword ptr [EBP + -0x30],0x8
00a64992 : MOV EAX,dword ptr [EBP + -0x44]
00a64995 : JNC 0x00a6499a
00a64997 : LEA EAX,[EBP + -0x44]
00a6499a : PUSH EAX
00a6499b : MOV ECX,0xc0bf34
00a649a0 : CALL 0x00405b70
00a649a5 : ADD ESP,0x4
00a649a8 : CMP EAX,ESI
00a649aa : JNZ 0x00a649c0
00a649ac : CMP EBX,0x3
00a649af : JC 0x00a649c0
00a649b1 : XOR EAX,EAX
00a649b3 : CMP EBX,0x3
00a649b6 : SETNZ AL
00a649b9 : CMP EAX,ESI
00a649bb : JNZ 0x00a649c0
00a649bd : MOV dword ptr [EDI + 0x58],ESI
00a649c0 : MOV ECX,dword ptr [0x017251ac]
00a649c6 : PUSH 0x1
00a649c8 : MOV ECX,dword ptr [ECX + 0x18]
00a649cb : XOR EAX,EAX
00a649cd : CMP byte ptr [0x00d6ab01],AL
00a649d3 : LEA EDX,[EDI + 0x38]
00a649d6 : PUSH EDX
00a649d7 : LEA EDX,[EDI + 0x3c]
00a649da : PUSH EDX
00a649db : MOV EDX,dword ptr [EDI + 0x58]
00a649de : PUSH EDX
00a649df : PUSH 0x70004
00a649e4 : SETZ AL
00a649e7 : PUSH 0x70004
00a649ec : PUSH EAX
00a649ed : MOV EAX,dword ptr [EBP + 0xffffff7c]
00a649f3 : PUSH ESI
00a649f4 : PUSH ESI
00a649f5 : PUSH -0x1
00a649f7 : PUSH -0x1
00a649f9 : PUSH EAX
00a649fa : PUSH ECX
00a649fb : MOV ECX,dword ptr [EBP + -0x80]
00a649fe : CALL 0x007b4450
00a64a03 : MOV EBX,EAX
00a64a05 : ADD ESP,0x34
00a64a08 : CMP EBX,ESI
00a64a0a : JGE 0x00a64aa1
00a64a10 : CMP dword ptr [EBP + -0x14],0x8
00a64a14 : MOV EAX,dword ptr [EBP + -0x28]
00a64a17 : JNC 0x00a64a1c
00a64a19 : LEA EAX,[EBP + -0x28]
00a64a1c : MOV ESI,dword ptr [0x00da98e8]
00a64a22 : PUSH EBX
00a64a23 : PUSH EAX
00a64a24 : PUSH 0xc0bf50
00a64a29 : CALL 0x008018d0
00a64a2e : ADD ESP,0xc
00a64a31 : PUSH EBX
00a64a32 : CALL 0x00664d50
00a64a37 : LEA ECX,[EBP + 0xffffff60]
00a64a3d : CALL 0x0070d4c0
00a64a42 : MOV byte ptr [EDI + 0x5c],0x1
00a64a46 : MOV byte ptr [EBP + -0x4],0x1
00a64a4a : MOV ESI,0x8
00a64a4f : CMP dword ptr [EBP + -0x30],ESI
00a64a52 : JC 0x00a64a5c
00a64a54 : MOV ECX,dword ptr [EBP + -0x44]
00a64a57 : CALL 0x006f04e0
00a64a5c : XOR ECX,ECX
00a64a5e : MOV EDI,0x7
00a64a63 : XOR EBX,EBX
00a64a65 : MOV dword ptr [EBP + -0x30],EDI
00a64a68 : MOV dword ptr [EBP + -0x34],EBX
00a64a6b : MOV word ptr [EBP + -0x44],CX
00a64a6f : MOV byte ptr [EBP + -0x4],CL
00a64a72 : LEA ECX,[EBP + 0xffffff60]
00a64a78 : CALL 0x0070d710
00a64a7d : MOV dword ptr [EBP + -0x4],0xffffffff
00a64a84 : CMP dword ptr [EBP + -0x14],ESI
00a64a87 : JC 0x00a64a91
00a64a89 : MOV ECX,dword ptr [EBP + -0x28]
00a64a8c : CALL 0x006f04e0
00a64a91 : XOR EDX,EDX
00a64a93 : MOV dword ptr [EBP + -0x14],EDI
00a64a96 : MOV dword ptr [EBP + -0x18],EBX
00a64a99 : MOV word ptr [EBP + -0x28],DX
00a64a9d : XOR AL,AL
00a64a9f : JMP 0x00a64b07
00a64aa1 : LEA ECX,[EBP + 0xffffff60]
00a64aa7 : CALL 0x0070d4c0
00a64aac : MOV byte ptr [EDI + 0x24],0x1
00a64ab0 : MOV byte ptr [EBP + -0x4],0x1
00a64ab4 : MOV EDI,0x8
00a64ab9 : CMP dword ptr [EBP + -0x30],EDI
00a64abc : JC 0x00a64ac6
00a64abe : MOV ECX,dword ptr [EBP + -0x44]
00a64ac1 : CALL 0x006f04e0
00a64ac6 : XOR EAX,EAX
00a64ac8 : MOV EBX,0x7
00a64acd : MOV dword ptr [EBP + -0x30],EBX
00a64ad0 : MOV dword ptr [EBP + -0x34],ESI
00a64ad3 : MOV word ptr [EBP + -0x44],AX
00a64ad7 : MOV byte ptr [EBP + -0x4],AL
00a64ada : LEA ECX,[EBP + 0xffffff60]
00a64ae0 : CALL 0x0070d710
00a64ae5 : MOV dword ptr [EBP + -0x4],0xffffffff
00a64aec : CMP dword ptr [EBP + -0x14],EDI
00a64aef : JC 0x00a64af9
00a64af1 : MOV ECX,dword ptr [EBP + -0x28]
00a64af4 : CALL 0x006f04e0
00a64af9 : XOR ECX,ECX
00a64afb : MOV AL,0x1
00a64afd : MOV word ptr [EBP + -0x28],CX
00a64b01 : MOV dword ptr [EBP + -0x18],ESI
00a64b04 : MOV dword ptr [EBP + -0x14],EBX
00a64b07 : MOV ECX,dword ptr [EBP + -0xc]
00a64b0a : MOV dword ptr FS:[0x0],ECX
00a64b11 : POP ECX
00a64b12 : POP EDI
00a64b13 : POP ESI
00a64b14 : POP EBX
00a64b15 : MOV ECX,dword ptr [EBP + -0x10]
00a64b18 : XOR ECX,EBP
00a64b1a : CALL 0x00633e6b
00a64b1f : MOV ESP,EBP
00a64b21 : POP EBP
00a64b22 : RET
