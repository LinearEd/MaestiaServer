PROGRAM  : Maestia.exe
FUNCTION : FUN_005d5480
ENTRY    : 005d5480
BODY     : [[005d5480, 005d557f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005d5480(undefined4 param_1,uint *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  int iVar7;
  
  piVar3 = (int *)*in_ECX;
  if (piVar3 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar3 * 5) <= piVar3[1] * 4 + 4U) goto LAB_005d54ba;
    iVar7 = piVar3[1] * 2 + 2;
  }
  FUN_005d5bd0(param_1,iVar7);
LAB_005d54ba:
  piVar3 = (int *)*in_ECX;
  param_3 = param_3 & piVar3[1];
  *piVar3 = *piVar3 + 1;
  iVar7 = *in_ECX;
  iVar4 = *(int *)(iVar7 + 8 + param_3 * 0xc);
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0xc);
  if (iVar4 == -2) {
    *puVar1 = 0xffffffff;
    puVar1[2] = *param_2;
    puVar1[1] = param_3;
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0xc) != -2);
  piVar3 = (int *)(iVar7 + 8 + uVar6 * 0xc);
  uVar5 = puVar1[1];
  if (uVar5 != param_3) {
    puVar2 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc); uVar5 != param_3;
        uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0xc)) {
      uVar5 = *puVar2;
      puVar2 = (uint *)(iVar7 + 8 + uVar5 * 0xc);
    }
    if (piVar3 != (int *)0x0) {
      *piVar3 = iVar4;
      piVar3[1] = puVar1[1];
      piVar3[2] = puVar1[2];
    }
    *puVar2 = uVar6;
    puVar1[2] = *param_2;
    *puVar1 = 0xffffffff;
    puVar1[1] = param_3;
    return;
  }
  if (piVar3 != (int *)0x0) {
    *piVar3 = iVar4;
    piVar3[1] = puVar1[1];
    piVar3[2] = puVar1[2];
  }
  puVar1[2] = *param_2;
  *puVar1 = uVar6;
  puVar1[1] = param_3;
  return;
}



============================================================
DISASSEMBLY
============================================================
005d5480 : PUSH EBP
005d5481 : PUSH ESI
005d5482 : MOV ESI,ECX
005d5484 : MOV EAX,dword ptr [ESI]
005d5486 : TEST EAX,EAX
005d5488 : JNZ 0x005d5493
005d548a : MOV EAX,dword ptr [ESP + 0xc]
005d548e : PUSH 0x8
005d5490 : PUSH EAX
005d5491 : JMP 0x005d54b5
005d5493 : MOV ECX,dword ptr [EAX + 0x4]
005d5496 : LEA EDX,[ECX*0x4 + 0x4]
005d549d : MOV ECX,dword ptr [EAX]
005d549f : LEA ECX,[ECX + ECX*0x4]
005d54a2 : CMP ECX,EDX
005d54a4 : JBE 0x005d54ba
005d54a6 : MOV EDX,dword ptr [EAX + 0x4]
005d54a9 : MOV ECX,dword ptr [ESP + 0xc]
005d54ad : LEA EAX,[EDX + EDX*0x1 + 0x2]
005d54b1 : PUSH EAX
005d54b2 : PUSH ECX
005d54b3 : MOV ECX,ESI
005d54b5 : CALL 0x005d5bd0
005d54ba : MOV ECX,dword ptr [ESI]
005d54bc : MOV EAX,dword ptr [ESP + 0x14]
005d54c0 : AND EAX,dword ptr [ECX + 0x4]
005d54c3 : INC dword ptr [ECX]
005d54c5 : MOV ESI,dword ptr [ESI]
005d54c7 : LEA EDX,[EAX + EAX*0x2]
005d54ca : MOV EBP,dword ptr [ESI + EDX*0x4 + 0x8]
005d54ce : LEA ECX,[ESI + EDX*0x4 + 0x8]
005d54d2 : CMP EBP,-0x2
005d54d5 : JNZ 0x005d54ee
005d54d7 : MOV EDX,dword ptr [ESP + 0x10]
005d54db : MOV dword ptr [ECX],0xffffffff
005d54e1 : MOV EDX,dword ptr [EDX]
005d54e3 : POP ESI
005d54e4 : MOV dword ptr [ECX + 0x8],EDX
005d54e7 : MOV dword ptr [ECX + 0x4],EAX
005d54ea : POP EBP
005d54eb : RET 0xc
005d54ee : PUSH EDI
005d54ef : MOV EDI,dword ptr [ESI + 0x4]
005d54f2 : MOV EDX,EAX
005d54f4 : PUSH EBX
005d54f5 : INC EDX
005d54f6 : AND EDX,EDI
005d54f8 : LEA EBX,[EDX + EDX*0x2]
005d54fb : CMP dword ptr [ESI + EBX*0x4 + 0x8],-0x2
005d5500 : JNZ 0x005d54f5
005d5502 : LEA EDI,[EDX + EDX*0x2]
005d5505 : LEA EBX,[ESI + EDI*0x4 + 0x8]
005d5509 : MOV EDI,dword ptr [ECX + 0x4]
005d550c : CMP EDI,EAX
005d550e : JNZ 0x005d5537
005d5510 : TEST EBX,EBX
005d5512 : JZ 0x005d5522
005d5514 : MOV dword ptr [EBX],EBP
005d5516 : MOV ESI,dword ptr [ECX + 0x4]
005d5519 : MOV dword ptr [EBX + 0x4],ESI
005d551c : MOV ESI,dword ptr [ECX + 0x8]
005d551f : MOV dword ptr [EBX + 0x8],ESI
005d5522 : MOV ESI,dword ptr [ESP + 0x18]
005d5526 : MOV ESI,dword ptr [ESI]
005d5528 : POP EBX
005d5529 : POP EDI
005d552a : MOV dword ptr [ECX + 0x8],ESI
005d552d : POP ESI
005d552e : MOV dword ptr [ECX],EDX
005d5530 : MOV dword ptr [ECX + 0x4],EAX
005d5533 : POP EBP
005d5534 : RET 0xc
005d5537 : LEA EDI,[EDI + EDI*0x2]
005d553a : CMP dword ptr [ESI + EDI*0x4 + 0x8],EAX
005d553e : LEA EDI,[ESI + EDI*0x4 + 0x8]
005d5542 : JZ 0x005d5553
005d5544 : MOV EDI,dword ptr [EDI]
005d5546 : LEA EDI,[EDI + EDI*0x2]
005d5549 : CMP dword ptr [ESI + EDI*0x4 + 0x8],EAX
005d554d : LEA EDI,[ESI + EDI*0x4 + 0x8]
005d5551 : JNZ 0x005d5544
005d5553 : TEST EBX,EBX
005d5555 : JZ 0x005d5565
005d5557 : MOV dword ptr [EBX],EBP
005d5559 : MOV ESI,dword ptr [ECX + 0x4]
005d555c : MOV dword ptr [EBX + 0x4],ESI
005d555f : MOV ESI,dword ptr [ECX + 0x8]
005d5562 : MOV dword ptr [EBX + 0x8],ESI
005d5565 : MOV dword ptr [EDI],EDX
005d5567 : MOV EDX,dword ptr [ESP + 0x18]
005d556b : MOV EDX,dword ptr [EDX]
005d556d : POP EBX
005d556e : POP EDI
005d556f : POP ESI
005d5570 : MOV dword ptr [ECX + 0x8],EDX
005d5573 : MOV dword ptr [ECX],0xffffffff
005d5579 : MOV dword ptr [ECX + 0x4],EAX
005d557c : POP EBP
005d557d : RET 0xc
