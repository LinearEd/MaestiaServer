PROGRAM  : Maestia.exe
FUNCTION : FUN_00421c70
ENTRY    : 00421c70
BODY     : [[00421c70, 00421f1e]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x00421d9f) */
/* WARNING: Removing unreachable block (ram,0x00421daf) */
/* WARNING: Removing unreachable block (ram,0x00421db8) */
/* WARNING: Removing unreachable block (ram,0x00421dbb) */
/* WARNING: Removing unreachable block (ram,0x00421dab) */
/* WARNING: Removing unreachable block (ram,0x00421dc8) */
/* WARNING: Removing unreachable block (ram,0x00421dd8) */
/* WARNING: Removing unreachable block (ram,0x00421de3) */
/* WARNING: Removing unreachable block (ram,0x00421ddf) */
/* WARNING: Removing unreachable block (ram,0x00421dd3) */
/* WARNING: Removing unreachable block (ram,0x00421de6) */
/* WARNING: Removing unreachable block (ram,0x00421df6) */

void FUN_00421c70(undefined4 param_1,int *param_2)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  undefined4 uVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  undefined1 local_58 [40];
  undefined1 local_30 [4];
  undefined1 local_2c;
  undefined4 local_1c;
  undefined4 local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7bfd5;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(char *)((int)param_2 + 0x2d) != '\0') {
    local_18 = 0xf;
    local_1c = 0;
    local_2c = 0;
    FUN_00404b50("invalid map/set<T> iterator",0x1b);
    local_8 = 0;
    FUN_00403c10(local_30);
                    /* WARNING: Subroutine does not return */
    __CxxThrowException_8(local_58,&DAT_00ced890);
  }
  local_14 = param_2;
  FUN_00430160(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  piVar7 = (int *)*param_2;
  if (*(char *)((int)piVar7 + 0x2d) == '\0') {
    if (*(char *)(param_2[2] + 0x2d) == '\0') {
      piVar7 = (int *)param_2[2];
    }
  }
  else {
    piVar7 = (int *)param_2[2];
  }
  piVar6 = (int *)param_2[1];
  if (*(char *)((int)piVar7 + 0x2d) == '\0') {
    piVar7[1] = (int)piVar6;
  }
  if ((int *)DAT_017256dc[1] == param_2) {
    DAT_017256dc[1] = piVar7;
  }
  else if ((int *)*piVar6 == param_2) {
    *piVar6 = (int)piVar7;
  }
  else {
    piVar6[2] = (int)piVar7;
  }
  if ((int *)*DAT_017256dc == param_2) {
    piVar5 = piVar6;
    if (*(char *)((int)piVar7 + 0x2d) == '\0') {
      cVar1 = *(char *)(*piVar7 + 0x2d);
      piVar2 = (int *)*piVar7;
      piVar5 = piVar7;
      while (piVar3 = piVar2, cVar1 == '\0') {
        piVar2 = (int *)*piVar3;
        cVar1 = *(char *)((int)piVar2 + 0x2d);
        piVar5 = piVar3;
      }
    }
    *DAT_017256dc = piVar5;
  }
  if ((int *)DAT_017256dc[2] == param_2) {
    if (*(char *)((int)piVar7 + 0x2d) == '\0') {
      uVar4 = FUN_00439bf0();
      DAT_017256dc[2] = uVar4;
    }
    else {
      DAT_017256dc[2] = piVar6;
    }
  }
  if ((char)local_14[0xb] == '\x01') {
    if (piVar7 != (int *)DAT_017256dc[1]) {
      do {
        piVar5 = piVar6;
        if ((char)piVar7[0xb] != '\x01') break;
        piVar6 = (int *)*piVar5;
        if (piVar7 == piVar6) {
          piVar6 = (int *)piVar5[2];
          if ((char)piVar6[0xb] == '\0') {
            *(undefined1 *)(piVar6 + 0xb) = 1;
            *(undefined1 *)(piVar5 + 0xb) = 0;
            FUN_00421b20();
            piVar6 = (int *)piVar5[2];
          }
          if (*(char *)((int)piVar6 + 0x2d) == '\0') {
            if ((*(char *)(*piVar6 + 0x2c) != '\x01') || (*(char *)(piVar6[2] + 0x2c) != '\x01')) {
              if (*(char *)(piVar6[2] + 0x2c) == '\x01') {
                *(undefined1 *)(*piVar6 + 0x2c) = 1;
                *(undefined1 *)(piVar6 + 0xb) = 0;
                FUN_00421b70();
                piVar6 = (int *)piVar5[2];
              }
              *(char *)(piVar6 + 0xb) = (char)piVar5[0xb];
              *(undefined1 *)(piVar5 + 0xb) = 1;
              *(undefined1 *)(piVar6[2] + 0x2c) = 1;
              FUN_00421b20();
              break;
            }
LAB_00421eba:
            *(undefined1 *)(piVar6 + 0xb) = 0;
          }
        }
        else {
          if ((char)piVar6[0xb] == '\0') {
            *(undefined1 *)(piVar6 + 0xb) = 1;
            *(undefined1 *)(piVar5 + 0xb) = 0;
            FUN_00421b70();
            piVar6 = (int *)*piVar5;
          }
          if (*(char *)((int)piVar6 + 0x2d) == '\0') {
            if ((*(char *)(piVar6[2] + 0x2c) == '\x01') && (*(char *)(*piVar6 + 0x2c) == '\x01'))
            goto LAB_00421eba;
            if (*(char *)(*piVar6 + 0x2c) == '\x01') {
              *(undefined1 *)(piVar6[2] + 0x2c) = 1;
              *(undefined1 *)(piVar6 + 0xb) = 0;
              FUN_00421b20();
              piVar6 = (int *)*piVar5;
            }
            *(char *)(piVar6 + 0xb) = (char)piVar5[0xb];
            *(undefined1 *)(piVar5 + 0xb) = 1;
            *(undefined1 *)(*piVar6 + 0x2c) = 1;
            FUN_00421b70();
            break;
          }
        }
        piVar6 = (int *)piVar5[1];
        piVar7 = piVar5;
      } while (piVar5 != (int *)DAT_017256dc[1]);
    }
    *(undefined1 *)(piVar7 + 0xb) = 1;
  }
  local_8 = 0xffffffff;
  FUN_004216d0(local_14 + 3);
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
00421c70 : PUSH EBP
00421c71 : MOV EBP,ESP
00421c73 : PUSH -0x1
00421c75 : PUSH 0xb7bfd5
00421c7a : MOV EAX,FS:[0x0]
00421c80 : PUSH EAX
00421c81 : SUB ESP,0x4c
00421c84 : PUSH EBX
00421c85 : PUSH ESI
00421c86 : PUSH EDI
00421c87 : MOV EAX,[0x00d66fa0]
00421c8c : XOR EAX,EBP
00421c8e : PUSH EAX
00421c8f : LEA EAX,[EBP + -0xc]
00421c92 : MOV FS:[0x0],EAX
00421c98 : MOV EAX,dword ptr [EBP + 0xc]
00421c9b : CMP byte ptr [EAX + 0x2d],0x0
00421c9f : JZ 0x00421cdd
00421ca1 : PUSH 0x1b
00421ca3 : XOR ESI,ESI
00421ca5 : PUSH 0xcca4a8
00421caa : LEA ECX,[EBP + -0x2c]
00421cad : MOV dword ptr [EBP + -0x14],0xf
00421cb4 : MOV dword ptr [EBP + -0x18],ESI
00421cb7 : MOV byte ptr [EBP + -0x28],0x0
00421cbb : CALL 0x00404b50
00421cc0 : MOV dword ptr [EBP + -0x4],ESI
00421cc3 : LEA EAX,[EBP + -0x2c]
00421cc6 : PUSH EAX
00421cc7 : LEA ECX,[EBP + -0x54]
00421cca : CALL 0x00403c10
00421ccf : PUSH 0xced890
00421cd4 : LEA ECX,[EBP + -0x54]
00421cd7 : PUSH ECX
00421cd8 : CALL 0x006409eb
00421cdd : MOV EBX,EAX
00421cdf : LEA EDX,[EBP + 0xc]
00421ce2 : MOV dword ptr [EBP + -0x10],EBX
00421ce5 : CALL 0x00430160
00421cea : MOV ECX,dword ptr [EBX]
00421cec : CMP byte ptr [ECX + 0x2d],0x0
00421cf0 : JZ 0x00421cf7
00421cf2 : MOV EDI,dword ptr [EBX + 0x8]
00421cf5 : JMP 0x00421d15
00421cf7 : MOV EDX,dword ptr [EBX + 0x8]
00421cfa : CMP byte ptr [EDX + 0x2d],0x0
00421cfe : JZ 0x00421d04
00421d00 : MOV EDI,ECX
00421d02 : JMP 0x00421d15
00421d04 : MOV EAX,dword ptr [EBP + 0xc]
00421d07 : MOV EDI,dword ptr [EAX + 0x8]
00421d0a : LEA EDX,[EAX + 0x8]
00421d0d : CMP EAX,EBX
00421d0f : JNZ 0x00421d9f
00421d15 : CMP byte ptr [EDI + 0x2d],0x0
00421d19 : MOV ESI,dword ptr [EBX + 0x4]
00421d1c : JNZ 0x00421d21
00421d1e : MOV dword ptr [EDI + 0x4],ESI
00421d21 : MOV EAX,[0x017256dc]
00421d26 : CMP dword ptr [EAX + 0x4],EBX
00421d29 : JNZ 0x00421d30
00421d2b : MOV dword ptr [EAX + 0x4],EDI
00421d2e : JMP 0x00421d3b
00421d30 : CMP dword ptr [ESI],EBX
00421d32 : JNZ 0x00421d38
00421d34 : MOV dword ptr [ESI],EDI
00421d36 : JMP 0x00421d3b
00421d38 : MOV dword ptr [ESI + 0x8],EDI
00421d3b : MOV EDX,dword ptr [0x017256dc]
00421d41 : CMP dword ptr [EDX],EBX
00421d43 : JNZ 0x00421d6c
00421d45 : CMP byte ptr [EDI + 0x2d],0x0
00421d49 : JZ 0x00421d4f
00421d4b : MOV ECX,ESI
00421d4d : JMP 0x00421d6a
00421d4f : MOV EAX,dword ptr [EDI]
00421d51 : CMP byte ptr [EAX + 0x2d],0x0
00421d55 : MOV ECX,EDI
00421d57 : JNZ 0x00421d6a
00421d59 : LEA ESP,[ESP]
00421d60 : MOV ECX,EAX
00421d62 : MOV EAX,dword ptr [ECX]
00421d64 : CMP byte ptr [EAX + 0x2d],0x0
00421d68 : JZ 0x00421d60
00421d6a : MOV dword ptr [EDX],ECX
00421d6c : MOV EAX,[0x017256dc]
00421d71 : CMP dword ptr [EAX + 0x8],EBX
00421d74 : JNZ 0x00421dfe
00421d7a : CMP byte ptr [EDI + 0x2d],0x0
00421d7e : JZ 0x00421d8d
00421d80 : MOV ECX,dword ptr [0x017256dc]
00421d86 : MOV EAX,ESI
00421d88 : MOV dword ptr [ECX + 0x8],EAX
00421d8b : JMP 0x00421dfe
00421d8d : MOV EAX,EDI
00421d8f : CALL 0x00439bf0
00421d94 : MOV ECX,dword ptr [0x017256dc]
00421d9a : MOV dword ptr [ECX + 0x8],EAX
00421d9d : JMP 0x00421dfe
00421d9f : MOV dword ptr [ECX + 0x4],EAX
00421da2 : MOV ECX,dword ptr [EBX]
00421da4 : MOV dword ptr [EAX],ECX
00421da6 : CMP EAX,dword ptr [EBX + 0x8]
00421da9 : JNZ 0x00421daf
00421dab : MOV ESI,EAX
00421dad : JMP 0x00421dc8
00421daf : CMP byte ptr [EDI + 0x2d],0x0
00421db3 : MOV ESI,dword ptr [EAX + 0x4]
00421db6 : JNZ 0x00421dbb
00421db8 : MOV dword ptr [EDI + 0x4],ESI
00421dbb : MOV dword ptr [ESI],EDI
00421dbd : MOV ECX,dword ptr [EBX + 0x8]
00421dc0 : MOV dword ptr [EDX],ECX
00421dc2 : MOV EDX,dword ptr [EBX + 0x8]
00421dc5 : MOV dword ptr [EDX + 0x4],EAX
00421dc8 : MOV ECX,dword ptr [0x017256dc]
00421dce : CMP dword ptr [ECX + 0x4],EBX
00421dd1 : JNZ 0x00421dd8
00421dd3 : MOV dword ptr [ECX + 0x4],EAX
00421dd6 : JMP 0x00421de6
00421dd8 : MOV ECX,dword ptr [EBX + 0x4]
00421ddb : CMP dword ptr [ECX],EBX
00421ddd : JNZ 0x00421de3
00421ddf : MOV dword ptr [ECX],EAX
00421de1 : JMP 0x00421de6
00421de3 : MOV dword ptr [ECX + 0x8],EAX
00421de6 : MOV ECX,dword ptr [EBX + 0x4]
00421de9 : MOV dword ptr [EAX + 0x4],ECX
00421dec : LEA ECX,[EBX + 0x2c]
00421def : ADD EAX,0x2c
00421df2 : CMP EAX,ECX
00421df4 : JZ 0x00421dfe
00421df6 : MOV BL,byte ptr [ECX]
00421df8 : MOV DL,byte ptr [EAX]
00421dfa : MOV byte ptr [EAX],BL
00421dfc : MOV byte ptr [ECX],DL
00421dfe : MOV EDX,dword ptr [EBP + -0x10]
00421e01 : MOV EBX,0x1
00421e06 : CMP byte ptr [EDX + 0x2c],BL
00421e09 : JNZ 0x00421f04
00421e0f : MOV EAX,[0x017256dc]
00421e14 : CMP EDI,dword ptr [EAX + 0x4]
00421e17 : JZ 0x00421f01
00421e1d : LEA ECX,[ECX]
00421e20 : CMP byte ptr [EDI + 0x2c],BL
00421e23 : JNZ 0x00421f01
00421e29 : MOV ECX,dword ptr [ESI]
00421e2b : CMP EDI,ECX
00421e2d : JNZ 0x00421e8f
00421e2f : MOV ECX,dword ptr [ESI + 0x8]
00421e32 : CMP byte ptr [ECX + 0x2c],0x0
00421e36 : JNZ 0x00421e49
00421e38 : MOV byte ptr [ECX + 0x2c],BL
00421e3b : MOV ECX,ESI
00421e3d : MOV byte ptr [ESI + 0x2c],0x0
00421e41 : CALL 0x00421b20
00421e46 : MOV ECX,dword ptr [ESI + 0x8]
00421e49 : CMP byte ptr [ECX + 0x2d],0x0
00421e4d : JNZ 0x00421ebe
00421e4f : MOV EDX,dword ptr [ECX]
00421e51 : CMP byte ptr [EDX + 0x2c],BL
00421e54 : JNZ 0x00421e5e
00421e56 : MOV EAX,dword ptr [ECX + 0x8]
00421e59 : CMP byte ptr [EAX + 0x2c],BL
00421e5c : JZ 0x00421eba
00421e5e : MOV EDX,dword ptr [ECX + 0x8]
00421e61 : CMP byte ptr [EDX + 0x2c],BL
00421e64 : JNZ 0x00421e77
00421e66 : MOV EAX,dword ptr [ECX]
00421e68 : MOV byte ptr [EAX + 0x2c],BL
00421e6b : MOV byte ptr [ECX + 0x2c],0x0
00421e6f : CALL 0x00421b70
00421e74 : MOV ECX,dword ptr [ESI + 0x8]
00421e77 : MOV DL,byte ptr [ESI + 0x2c]
00421e7a : MOV byte ptr [ECX + 0x2c],DL
00421e7d : MOV byte ptr [ESI + 0x2c],BL
00421e80 : MOV EAX,dword ptr [ECX + 0x8]
00421e83 : MOV ECX,ESI
00421e85 : MOV byte ptr [EAX + 0x2c],BL
00421e88 : CALL 0x00421b20
00421e8d : JMP 0x00421f01
00421e8f : CMP byte ptr [ECX + 0x2c],0x0
00421e93 : JNZ 0x00421ea5
00421e95 : MOV byte ptr [ECX + 0x2c],BL
00421e98 : MOV ECX,ESI
00421e9a : MOV byte ptr [ESI + 0x2c],0x0
00421e9e : CALL 0x00421b70
00421ea3 : MOV ECX,dword ptr [ESI]
00421ea5 : CMP byte ptr [ECX + 0x2d],0x0
00421ea9 : JNZ 0x00421ebe
00421eab : MOV EDX,dword ptr [ECX + 0x8]
00421eae : CMP byte ptr [EDX + 0x2c],BL
00421eb1 : JNZ 0x00421ed4
00421eb3 : MOV EAX,dword ptr [ECX]
00421eb5 : CMP byte ptr [EAX + 0x2c],BL
00421eb8 : JNZ 0x00421ed4
00421eba : MOV byte ptr [ECX + 0x2c],0x0
00421ebe : MOV ECX,dword ptr [0x017256dc]
00421ec4 : MOV EDI,ESI
00421ec6 : MOV ESI,dword ptr [ESI + 0x4]
00421ec9 : CMP EDI,dword ptr [ECX + 0x4]
00421ecc : JNZ 0x00421e20
00421ed2 : JMP 0x00421f01
00421ed4 : MOV EDX,dword ptr [ECX]
00421ed6 : CMP byte ptr [EDX + 0x2c],BL
00421ed9 : JNZ 0x00421eec
00421edb : MOV EAX,dword ptr [ECX + 0x8]
00421ede : MOV byte ptr [EAX + 0x2c],BL
00421ee1 : MOV byte ptr [ECX + 0x2c],0x0
00421ee5 : CALL 0x00421b20
00421eea : MOV ECX,dword ptr [ESI]
00421eec : MOV DL,byte ptr [ESI + 0x2c]
00421eef : MOV byte ptr [ECX + 0x2c],DL
00421ef2 : MOV byte ptr [ESI + 0x2c],BL
00421ef5 : MOV EAX,dword ptr [ECX]
00421ef7 : MOV ECX,ESI
00421ef9 : MOV byte ptr [EAX + 0x2c],BL
00421efc : CALL 0x00421b70
00421f01 : MOV byte ptr [EDI + 0x2c],BL
00421f04 : MOV dword ptr [EBP + -0x4],0xffffffff
00421f0b : MOV ECX,dword ptr [EBP + -0x10]
00421f0e : ADD ECX,0xc
00421f11 : PUSH ECX
00421f12 : CALL 0x004216d0
00421f17 : MOV ECX,dword ptr [EBP + -0x10]
00421f1a : CALL 0x006f04e0
