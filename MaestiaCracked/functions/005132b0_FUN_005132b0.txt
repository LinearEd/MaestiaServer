PROGRAM  : Maestia.exe
FUNCTION : FUN_005132b0
ENTRY    : 005132b0
BODY     : [[005132b0, 00513329]]

============================================================
DECOMPILED C CODE
============================================================

undefined4
FUN_005132b0(undefined4 param_1,GRefCountImpl *param_2,undefined4 param_3,undefined4 param_4)

{
  GRefCountImpl *this;
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = (int)param_2;
  if (param_2 != (GRefCountImpl *)0x0) {
    FUN_005a02e0(param_2);
  }
  uVar2 = param_3;
  param_2 = (GRefCountImpl *)0x0;
  iVar1 = FUN_00513090(param_1,iVar1,param_3,&param_2,0,0,param_4,0);
  this = param_2;
  if (iVar1 == 0) {
    if (param_2 != (GRefCountImpl *)0x0) {
      GRefCountImpl::Release(param_2);
    }
    return 0;
  }
  uVar2 = FUN_00512f50(iVar1,param_2,param_1,uVar2,0);
  if (this != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(this);
  }
  return uVar2;
}



============================================================
DISASSEMBLY
============================================================
005132b0 : PUSH EBX
005132b1 : MOV EBX,dword ptr [ESP + 0xc]
005132b5 : PUSH ESI
005132b6 : MOV ESI,dword ptr [ESP + 0xc]
005132ba : PUSH EDI
005132bb : TEST EBX,EBX
005132bd : JZ 0x005132c7
005132bf : PUSH EBX
005132c0 : MOV ECX,ESI
005132c2 : CALL 0x005a02e0
005132c7 : MOV EAX,dword ptr [ESP + 0x1c]
005132cb : MOV EDI,dword ptr [ESP + 0x18]
005132cf : PUSH 0x0
005132d1 : PUSH EAX
005132d2 : PUSH 0x0
005132d4 : PUSH 0x0
005132d6 : LEA ECX,[ESP + 0x24]
005132da : PUSH ECX
005132db : PUSH EDI
005132dc : PUSH EBX
005132dd : PUSH ESI
005132de : MOV dword ptr [ESP + 0x34],0x0
005132e6 : CALL 0x00513090
005132eb : ADD ESP,0x20
005132ee : TEST EAX,EAX
005132f0 : JNZ 0x00513305
005132f2 : MOV ECX,dword ptr [ESP + 0x14]
005132f6 : TEST ECX,ECX
005132f8 : JZ 0x005132ff
005132fa : CALL 0x004ff7e0
005132ff : POP EDI
00513300 : POP ESI
00513301 : XOR EAX,EAX
00513303 : POP EBX
00513304 : RET
00513305 : PUSH 0x0
00513307 : PUSH EDI
00513308 : PUSH ESI
00513309 : MOV ESI,dword ptr [ESP + 0x20]
0051330d : PUSH ESI
0051330e : PUSH EAX
0051330f : CALL 0x00512f50
00513314 : ADD ESP,0x14
00513317 : MOV EDI,EAX
00513319 : TEST ESI,ESI
0051331b : JZ 0x00513324
0051331d : MOV ECX,ESI
0051331f : CALL 0x004ff7e0
00513324 : MOV EAX,EDI
00513326 : POP EDI
00513327 : POP ESI
00513328 : POP EBX
00513329 : RET
