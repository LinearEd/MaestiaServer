PROGRAM  : Maestia.exe
FUNCTION : FUN_007d1eb0
ENTRY    : 007d1eb0
BODY     : [[007d1eb0, 007d21d6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007d1eb0(uint param_1)

{
  float fVar1;
  undefined2 uVar2;
  float *pfVar3;
  int in_EAX;
  int iVar4;
  undefined4 uVar5;
  int *in_ECX;
  byte bVar6;
  byte bVar7;
  undefined4 *puVar8;
  uint uVar9;
  int *piVar10;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int *local_38;
  uint local_34;
  undefined4 local_30;
  undefined4 local_2c;
  int local_28;
  uint local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  int local_c;
  byte local_5;
  
  uVar9 = (uint)*(ushort *)(*(int **)(in_EAX + 0xd0) + 4);
  local_28 = param_1 - 8;
  local_14 = 0;
  local_18 = 0;
  local_10 = 0;
  local_1c = 0;
  local_2c = 0;
  local_20 = 0;
  local_30 = 0;
  local_c = 0;
  piVar10 = *(int **)(in_EAX + 0xd0);
  local_34 = uVar9;
  do {
    local_38 = piVar10;
    if (local_28 < 1) {
      (**(code **)(*piVar10 + 0xc))(local_14,local_18,local_20,local_10,local_1c,local_c);
      iVar4 = local_c;
      if ((2 < piVar10[7]) && (local_c != 0)) {
        uVar9 = uVar9 & 0xffff;
        if (uVar9 != 0) {
          puVar8 = (undefined4 *)(local_c + 4);
          do {
            FUN_0070a260(*puVar8);
            puVar8 = puVar8 + 2;
            uVar9 = uVar9 - 1;
          } while (uVar9 != 0);
        }
        FUN_0070a260(iVar4);
      }
      FUN_0070a260(local_10);
      FUN_0070a260(local_14);
      FUN_0070a260(local_18);
      FUN_0070a260(local_1c);
      FUN_0070a260(local_2c);
      FUN_0070a260(local_20);
      FUN_0070a260(local_30);
      return;
    }
    local_3c = (**(code **)(*in_ECX + 0xc))(&local_44,4,1);
    iVar4 = (**(code **)(*in_ECX + 0xc))(&local_40,4,1);
    local_3c = local_3c + iVar4;
    switch(local_44) {
    case 0x50534121:
      uVar5 = FUN_0070a3a0();
      local_14 = uVar5;
      goto LAB_007d1f48;
    case 0x50534122:
      uVar5 = FUN_0070a3a0();
      local_18 = uVar5;
      goto LAB_007d1f48;
    case 0x50534123:
      local_20 = FUN_0070a3a0();
      (**(code **)(*in_ECX + 0xc))(local_20,4,(uVar9 & 0xffff) * 2);
      break;
    case 0x50534124:
      local_c = FUN_0070a3a0();
      param_1 = param_1 & 0xffffff;
      if ((uVar9 & 0xffff) != 0) {
        piVar10 = (int *)(local_c + 4);
        local_24 = uVar9 & 0xffff;
        do {
          (**(code **)(*in_ECX + 0xc))((int)&param_1 + 3,1,1);
          *(ushort *)(piVar10 + -1) = (ushort)param_1._3_1_;
          iVar4 = FUN_0070a3a0();
          *piVar10 = iVar4;
          local_5 = 0;
          bVar6 = 0;
          if (param_1._3_1_ != '\0') {
            do {
              uVar9 = (uint)local_5;
              (**(code **)(*in_ECX + 0xc))(uVar9 * 8 + 4 + *piVar10,2,1);
              (**(code **)(*in_ECX + 0xc))(*piVar10 + uVar9 * 8,4,1);
              local_5 = local_5 + 1;
              bVar6 = param_1._3_1_;
            } while (local_5 < param_1._3_1_);
          }
          uVar9 = 1;
          local_5 = 1;
          if (1 < bVar6) {
            do {
              pfVar3 = (float *)*piVar10;
              fVar1 = *pfVar3;
              bVar7 = (byte)uVar9;
              if (fVar1 < pfVar3[uVar9 * 2]) {
                uVar2 = *(undefined2 *)(pfVar3 + 1);
                *(undefined2 *)(pfVar3 + 1) = *(undefined2 *)(pfVar3 + uVar9 * 2 + 1);
                *(undefined4 *)*piVar10 = ((undefined4 *)*piVar10)[uVar9 * 2];
                *(undefined2 *)(uVar9 * 8 + 4 + *piVar10) = uVar2;
                *(float *)(uVar9 * 8 + *piVar10) = fVar1;
                bVar6 = param_1._3_1_;
                bVar7 = local_5;
              }
              local_5 = bVar7 + 1;
              uVar9 = (uint)local_5;
            } while (local_5 < bVar6);
          }
          piVar10 = piVar10 + 2;
          local_24 = local_24 - 1;
        } while (local_24 != 0);
        local_24 = 0;
        uVar9 = local_34;
      }
      break;
    case 0x50534125:
      uVar5 = FUN_0070a3a0();
      local_10 = uVar5;
      goto LAB_007d1f48;
    case 0x50534126:
      local_30 = FUN_0070a3a0();
      (**(code **)(*in_ECX + 0xc))(local_30,4,(uVar9 & 0xffff) * 2);
      break;
    case 0x50534127:
      local_1c = FUN_0070a3a0();
      (**(code **)(*in_ECX + 0xc))(local_1c,4,(uVar9 & 0xffff) * 4);
      break;
    case 0x50534128:
      uVar5 = FUN_0070a3a0();
      local_2c = uVar5;
LAB_007d1f48:
      (**(code **)(*in_ECX + 0xc))(uVar5,4,(uVar9 & 0xffff) * 3);
      break;
    default:
      (**(code **)(*in_ECX + 0x24))(local_40);
    }
    local_28 = local_28 - local_40;
    piVar10 = local_38;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
007d1eb0 : PUSH EBP
007d1eb1 : MOV EBP,ESP
007d1eb3 : SUB ESP,0x40
007d1eb6 : PUSH EBX
007d1eb7 : MOV EBX,dword ptr [EAX + 0xd0]
007d1ebd : MOV EAX,dword ptr [EBP + 0x8]
007d1ec0 : PUSH ESI
007d1ec1 : PUSH EDI
007d1ec2 : MOVZX EDI,word ptr [EBX + 0x10]
007d1ec6 : MOV ESI,ECX
007d1ec8 : XOR ECX,ECX
007d1eca : ADD EAX,-0x8
007d1ecd : CMP EAX,ECX
007d1ecf : MOV dword ptr [EBP + -0x34],EBX
007d1ed2 : MOV dword ptr [EBP + -0x30],EDI
007d1ed5 : MOV dword ptr [EBP + -0x10],ECX
007d1ed8 : MOV dword ptr [EBP + -0x14],ECX
007d1edb : MOV dword ptr [EBP + -0xc],ECX
007d1ede : MOV dword ptr [EBP + -0x18],ECX
007d1ee1 : MOV dword ptr [EBP + -0x28],ECX
007d1ee4 : MOV dword ptr [EBP + -0x1c],ECX
007d1ee7 : MOV dword ptr [EBP + -0x2c],ECX
007d1eea : MOV dword ptr [EBP + -0x8],ECX
007d1eed : MOV dword ptr [EBP + -0x24],EAX
007d1ef0 : JLE 0x007d2137
007d1ef6 : MOV EDX,dword ptr [ESI]
007d1ef8 : MOV EDX,dword ptr [EDX + 0xc]
007d1efb : PUSH 0x1
007d1efd : PUSH 0x4
007d1eff : LEA EAX,[EBP + -0x40]
007d1f02 : PUSH EAX
007d1f03 : MOV ECX,ESI
007d1f05 : CALL EDX
007d1f07 : PUSH 0x1
007d1f09 : MOV dword ptr [EBP + -0x38],EAX
007d1f0c : MOV EAX,dword ptr [ESI]
007d1f0e : MOV EDX,dword ptr [EAX + 0xc]
007d1f11 : PUSH 0x4
007d1f13 : LEA ECX,[EBP + -0x3c]
007d1f16 : PUSH ECX
007d1f17 : MOV ECX,ESI
007d1f19 : CALL EDX
007d1f1b : ADD dword ptr [EBP + -0x38],EAX
007d1f1e : MOV EAX,dword ptr [EBP + -0x40]
007d1f21 : ADD EAX,0xafacbedf
007d1f26 : CMP EAX,0x7
007d1f29 : JA 0x007d2116
007d1f2f : JMP dword ptr [EAX*0x4 + 0x7d21d8]
007d1f36 : MOVZX EBX,DI
007d1f39 : LEA ECX,[EBX + EBX*0x2]
007d1f3c : ADD ECX,ECX
007d1f3e : ADD ECX,ECX
007d1f40 : CALL 0x0070a3a0
007d1f45 : MOV dword ptr [EBP + -0x10],EAX
007d1f48 : MOV EDX,dword ptr [ESI]
007d1f4a : MOV EDX,dword ptr [EDX + 0xc]
007d1f4d : LEA ECX,[EBX + EBX*0x2]
007d1f50 : PUSH ECX
007d1f51 : PUSH 0x4
007d1f53 : PUSH EAX
007d1f54 : MOV ECX,ESI
007d1f56 : CALL EDX
007d1f58 : JMP 0x007d2123
007d1f5d : MOVZX EBX,DI
007d1f60 : LEA ECX,[EBX + EBX*0x2]
007d1f63 : ADD ECX,ECX
007d1f65 : ADD ECX,ECX
007d1f67 : CALL 0x0070a3a0
007d1f6c : MOV dword ptr [EBP + -0x14],EAX
007d1f6f : JMP 0x007d1f48
007d1f71 : MOVZX EBX,DI
007d1f74 : LEA ECX,[EBX*0x8 + 0x0]
007d1f7b : CALL 0x0070a3a0
007d1f80 : MOV EDX,dword ptr [ESI]
007d1f82 : MOV EDX,dword ptr [EDX + 0xc]
007d1f85 : LEA ECX,[EBX + EBX*0x1]
007d1f88 : PUSH ECX
007d1f89 : PUSH 0x4
007d1f8b : PUSH EAX
007d1f8c : MOV ECX,ESI
007d1f8e : MOV dword ptr [EBP + -0x1c],EAX
007d1f91 : CALL EDX
007d1f93 : JMP 0x007d2123
007d1f98 : MOVZX EBX,DI
007d1f9b : LEA ECX,[EBX*0x8 + 0x0]
007d1fa2 : CALL 0x0070a3a0
007d1fa7 : MOV EDX,dword ptr [ESI]
007d1fa9 : MOV EDX,dword ptr [EDX + 0xc]
007d1fac : LEA ECX,[EBX + EBX*0x1]
007d1faf : PUSH ECX
007d1fb0 : PUSH 0x4
007d1fb2 : PUSH EAX
007d1fb3 : MOV ECX,ESI
007d1fb5 : MOV dword ptr [EBP + -0x2c],EAX
007d1fb8 : CALL EDX
007d1fba : JMP 0x007d2123
007d1fbf : MOVZX EBX,DI
007d1fc2 : MOV ECX,EBX
007d1fc4 : SHL ECX,0x4
007d1fc7 : CALL 0x0070a3a0
007d1fcc : MOV EDX,dword ptr [ESI]
007d1fce : MOV EDX,dword ptr [EDX + 0xc]
007d1fd1 : LEA ECX,[EBX*0x4 + 0x0]
007d1fd8 : PUSH ECX
007d1fd9 : PUSH 0x4
007d1fdb : PUSH EAX
007d1fdc : MOV ECX,ESI
007d1fde : MOV dword ptr [EBP + -0x18],EAX
007d1fe1 : CALL EDX
007d1fe3 : JMP 0x007d2123
007d1fe8 : MOVZX EBX,DI
007d1feb : LEA ECX,[EBX + EBX*0x2]
007d1fee : ADD ECX,ECX
007d1ff0 : ADD ECX,ECX
007d1ff2 : CALL 0x0070a3a0
007d1ff7 : MOV dword ptr [EBP + -0x28],EAX
007d1ffa : JMP 0x007d1f48
007d1fff : MOVZX EBX,DI
007d2002 : LEA ECX,[EBX*0x8 + 0x0]
007d2009 : CALL 0x0070a3a0
007d200e : MOV dword ptr [EBP + -0x8],EAX
007d2011 : MOV byte ptr [EBP + 0xb],0x0
007d2015 : TEST EBX,EBX
007d2017 : JBE 0x007d2123
007d201d : MOV EDI,EAX
007d201f : ADD EDI,0x4
007d2022 : MOV dword ptr [EBP + -0x20],EBX
007d2025 : MOV EAX,dword ptr [ESI]
007d2027 : MOV EDX,dword ptr [EAX + 0xc]
007d202a : PUSH 0x1
007d202c : PUSH 0x1
007d202e : LEA ECX,[EBP + 0xb]
007d2031 : PUSH ECX
007d2032 : MOV ECX,ESI
007d2034 : CALL EDX
007d2036 : MOVZX AX,byte ptr [EBP + 0xb]
007d203b : MOV word ptr [EDI + -0x4],AX
007d203f : MOVZX ECX,byte ptr [EBP + 0xb]
007d2043 : ADD ECX,ECX
007d2045 : ADD ECX,ECX
007d2047 : ADD ECX,ECX
007d2049 : CALL 0x0070a3a0
007d204e : MOV dword ptr [EDI],EAX
007d2050 : MOV DL,byte ptr [EBP + 0xb]
007d2053 : MOV byte ptr [EBP + -0x1],0x0
007d2057 : TEST DL,DL
007d2059 : JBE 0x007d209a
007d205b : MOVZX EBX,byte ptr [EBP + -0x1]
007d205f : MOV EAX,dword ptr [EDI]
007d2061 : MOV EDX,dword ptr [ESI]
007d2063 : MOV EDX,dword ptr [EDX + 0xc]
007d2066 : ADD EBX,EBX
007d2068 : ADD EBX,EBX
007d206a : PUSH 0x1
007d206c : ADD EBX,EBX
007d206e : LEA ECX,[EBX + EAX*0x1 + 0x4]
007d2072 : PUSH 0x2
007d2074 : PUSH ECX
007d2075 : MOV ECX,ESI
007d2077 : CALL EDX
007d2079 : MOV ECX,dword ptr [EDI]
007d207b : MOV EAX,dword ptr [ESI]
007d207d : MOV EDX,dword ptr [EAX + 0xc]
007d2080 : PUSH 0x1
007d2082 : ADD ECX,EBX
007d2084 : PUSH 0x4
007d2086 : PUSH ECX
007d2087 : MOV ECX,ESI
007d2089 : CALL EDX
007d208b : MOV AL,byte ptr [EBP + -0x1]
007d208e : MOV DL,byte ptr [EBP + 0xb]
007d2091 : INC AL
007d2093 : MOV byte ptr [EBP + -0x1],AL
007d2096 : CMP AL,DL
007d2098 : JC 0x007d205b
007d209a : MOV BL,0x1
007d209c : MOV byte ptr [EBP + -0x1],BL
007d209f : CMP DL,BL
007d20a1 : JBE 0x007d20ed
007d20a3 : MOV ECX,dword ptr [EDI]
007d20a5 : MOVSS XMM0,dword ptr [ECX]
007d20a9 : MOVZX EAX,BL
007d20ac : ADD EAX,EAX
007d20ae : ADD EAX,EAX
007d20b0 : ADD EAX,EAX
007d20b2 : MOVSS XMM1,dword ptr [ECX + EAX*0x1]
007d20b7 : COMISS XMM1,XMM0
007d20ba : JBE 0x007d20e4
007d20bc : MOV BX,word ptr [ECX + EAX*0x1 + 0x4]
007d20c1 : MOVZX EDX,word ptr [ECX + 0x4]
007d20c5 : MOV word ptr [ECX + 0x4],BX
007d20c9 : MOV ECX,dword ptr [EDI]
007d20cb : MOV BL,byte ptr [EBP + -0x1]
007d20ce : FLD float ptr [ECX + EAX*0x1]
007d20d1 : FSTP float ptr [ECX]
007d20d3 : MOV ECX,dword ptr [EDI]
007d20d5 : MOV word ptr [EAX + ECX*0x1 + 0x4],DX
007d20da : MOV EDX,dword ptr [EDI]
007d20dc : MOVSS dword ptr [EAX + EDX*0x1],XMM0
007d20e1 : MOV DL,byte ptr [EBP + 0xb]
007d20e4 : INC BL
007d20e6 : MOV byte ptr [EBP + -0x1],BL
007d20e9 : CMP BL,DL
007d20eb : JC 0x007d20a3
007d20ed : ADD EDI,0x8
007d20f0 : SUB dword ptr [EBP + -0x20],0x1
007d20f4 : JNZ 0x007d2025
007d20fa : MOV EDI,dword ptr [EBP + -0x30]
007d20fd : JMP 0x007d2123
007d20ff : MOVZX EBX,DI
007d2102 : LEA ECX,[EBX + EBX*0x2]
007d2105 : ADD ECX,ECX
007d2107 : ADD ECX,ECX
007d2109 : CALL 0x0070a3a0
007d210e : MOV dword ptr [EBP + -0xc],EAX
007d2111 : JMP 0x007d1f48
007d2116 : MOV ECX,dword ptr [EBP + -0x3c]
007d2119 : MOV EAX,dword ptr [ESI]
007d211b : MOV EDX,dword ptr [EAX + 0x24]
007d211e : PUSH ECX
007d211f : MOV ECX,ESI
007d2121 : CALL EDX
007d2123 : MOV EAX,dword ptr [EBP + -0x24]
007d2126 : SUB EAX,dword ptr [EBP + -0x3c]
007d2129 : MOV dword ptr [EBP + -0x24],EAX
007d212c : TEST EAX,EAX
007d212e : JG 0x007d1ef6
007d2134 : MOV EBX,dword ptr [EBP + -0x34]
007d2137 : MOV ECX,dword ptr [EBP + -0x8]
007d213a : MOV EDX,dword ptr [EBP + -0x18]
007d213d : MOV EAX,dword ptr [EBX]
007d213f : MOV EAX,dword ptr [EAX + 0xc]
007d2142 : PUSH ECX
007d2143 : MOV ECX,dword ptr [EBP + -0xc]
007d2146 : PUSH EDX
007d2147 : MOV EDX,dword ptr [EBP + -0x1c]
007d214a : PUSH ECX
007d214b : MOV ECX,dword ptr [EBP + -0x14]
007d214e : PUSH EDX
007d214f : MOV EDX,dword ptr [EBP + -0x10]
007d2152 : PUSH ECX
007d2153 : PUSH EDX
007d2154 : MOV ECX,EBX
007d2156 : CALL EAX
007d2158 : CMP dword ptr [EBX + 0x1c],0x2
007d215c : JLE 0x007d218c
007d215e : MOV EBX,dword ptr [EBP + -0x8]
007d2161 : TEST EBX,EBX
007d2163 : JZ 0x007d218c
007d2165 : MOVZX EDI,DI
007d2168 : TEST EDI,EDI
007d216a : JBE 0x007d2183
007d216c : LEA ESI,[EBX + 0x4]
007d216f : NOP
007d2170 : MOV ECX,dword ptr [ESI]
007d2172 : PUSH ECX
007d2173 : CALL 0x0070a260
007d2178 : ADD ESP,0x4
007d217b : ADD ESI,0x8
007d217e : SUB EDI,0x1
007d2181 : JNZ 0x007d2170
007d2183 : PUSH EBX
007d2184 : CALL 0x0070a260
007d2189 : ADD ESP,0x4
007d218c : MOV EDX,dword ptr [EBP + -0xc]
007d218f : PUSH EDX
007d2190 : CALL 0x0070a260
007d2195 : MOV EAX,dword ptr [EBP + -0x10]
007d2198 : PUSH EAX
007d2199 : CALL 0x0070a260
007d219e : MOV ECX,dword ptr [EBP + -0x14]
007d21a1 : PUSH ECX
007d21a2 : CALL 0x0070a260
007d21a7 : MOV EDX,dword ptr [EBP + -0x18]
007d21aa : PUSH EDX
007d21ab : CALL 0x0070a260
007d21b0 : MOV EAX,dword ptr [EBP + -0x28]
007d21b3 : PUSH EAX
007d21b4 : CALL 0x0070a260
007d21b9 : MOV ECX,dword ptr [EBP + -0x1c]
007d21bc : PUSH ECX
007d21bd : CALL 0x0070a260
007d21c2 : MOV EDX,dword ptr [EBP + -0x2c]
007d21c5 : PUSH EDX
007d21c6 : CALL 0x0070a260
007d21cb : ADD ESP,0x1c
007d21ce : POP EDI
007d21cf : POP ESI
007d21d0 : POP EBX
007d21d1 : MOV ESP,EBP
007d21d3 : POP EBP
007d21d4 : RET 0x4
