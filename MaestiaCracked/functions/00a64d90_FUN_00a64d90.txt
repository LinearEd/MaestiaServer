PROGRAM  : Maestia.exe
FUNCTION : FUN_00a64d90
ENTRY    : 00a64d90
BODY     : [[00a64d90, 00a650f4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a64d90(int param_1)

{
  char cVar1;
  uint uVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 ****ppppuVar5;
  int iVar6;
  undefined1 uVar7;
  undefined4 local_18c;
  undefined1 local_150 [4];
  undefined4 local_14c;
  uint local_13c;
  uint local_138;
  undefined1 local_134 [4];
  undefined4 ***local_130 [4];
  undefined4 local_120;
  uint local_11c;
  undefined4 local_118 [64];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b47c7d;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = uVar2;
  if (((DAT_00d6ab01 != '\0') || (*(char *)(param_1 + 0x24) == '\0')) &&
     ((*(int *)(DAT_017251ac + 0x20) == 0 || (*(char *)(param_1 + 0x24) == '\0')))) {
    local_130[0] = (undefined4 ***)((uint)local_130[0] & 0xffff0000);
    local_11c = 7;
    local_120 = 0;
    FUN_00405eb0(param_1 + 4,0,0xffffffff);
    local_8 = 0;
    FUN_0070d390(uVar2);
    local_8._0_1_ = 1;
    cVar1 = FUN_008036f0(DAT_017251d8,local_134);
    if (cVar1 == '\0') {
      FUN_0070d4c0();
      *(undefined1 *)(param_1 + 0x5c) = 1;
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_11c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      FUN_0040e420(local_134,local_150);
      local_8._0_1_ = 2;
      FUN_0070c1f0();
      puVar3 = local_14c;
      if (local_138 < 8) {
        puVar3 = &local_14c;
      }
      iVar4 = FUN_00405b70(puVar3);
      if (((iVar4 == 0) && (2 < local_13c)) && (local_13c == 3)) {
        *(undefined4 *)(param_1 + 0x58) = 0;
      }
      if (*(char *)(param_1 + 0x60) == '\0') {
        uVar7 = DAT_00d6ab01 == '\0';
      }
      else {
        uVar7 = 2;
      }
      iVar4 = FUN_007b4450(*(undefined4 *)(DAT_017251ac + 0x18),local_18c,0xffffffff,0xffffffff,0,0,
                           uVar7,1,5,*(undefined4 *)(param_1 + 0x58),param_1 + 0x3c,param_1 + 0x38,1
                          );
      if (iVar4 < 0) {
        puVar3 = local_118;
        for (iVar6 = 0x40; iVar6 != 0; iVar6 = iVar6 + -1) {
          *puVar3 = 0;
          puVar3 = puVar3 + 1;
        }
        ppppuVar5 = (undefined4 ****)local_130[0];
        if (local_11c < 8) {
          ppppuVar5 = local_130;
        }
        FUN_0040e4a0(L"[AvaTerrainTxtr::Load] Failed CreateTextureFromFileInMemoryEx Name : %s , (%d)"
                     ,ppppuVar5,iVar4);
        FUN_008018d0(local_118);
        FUN_00664d50(iVar4);
        FUN_0070d4c0();
        *(undefined1 *)(param_1 + 0x5c) = 1;
        local_8 = CONCAT31(local_8._1_3_,1);
        if (7 < local_138) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_138 = 7;
        local_13c = 0;
        local_14c = (undefined4 *)((uint)local_14c._2_2_ << 0x10);
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_0070d710();
        local_8 = 0xffffffff;
        if (7 < local_11c) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_11c = 7;
        local_120 = 0;
        local_130[0] = (undefined4 ***)((uint)local_130[0] & 0xffff0000);
        goto LAB_00a650d7;
      }
      FUN_0070d4c0();
      *(undefined1 *)(param_1 + 0x24) = 1;
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_138) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_138 = 7;
      local_13c = 0;
      local_14c = (undefined4 *)((uint)local_14c._2_2_ << 0x10);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_11c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    local_11c = 7;
    local_130[0] = (undefined4 ***)((uint)local_130[0] & 0xffff0000);
    local_120 = 0;
  }
LAB_00a650d7:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a64d90 : PUSH EBP
00a64d91 : MOV EBP,ESP
00a64d93 : PUSH -0x1
00a64d95 : PUSH 0xb47c7d
00a64d9a : MOV EAX,FS:[0x0]
00a64da0 : PUSH EAX
00a64da1 : SUB ESP,0x1a0
00a64da7 : MOV EAX,[0x00d66fa0]
00a64dac : XOR EAX,EBP
00a64dae : MOV dword ptr [EBP + -0x14],EAX
00a64db1 : PUSH EBX
00a64db2 : PUSH ESI
00a64db3 : PUSH EDI
00a64db4 : PUSH EAX
00a64db5 : LEA EAX,[EBP + -0xc]
00a64db8 : MOV FS:[0x0],EAX
00a64dbe : CMP byte ptr [0x00d6ab01],0x0
00a64dc5 : MOV EBX,dword ptr [EBP + 0x8]
00a64dc8 : JNZ 0x00a64dd4
00a64dca : CMP byte ptr [EBX + 0x24],0x0
00a64dce : JNZ 0x00a6504c
00a64dd4 : MOV EAX,[0x017251ac]
00a64dd9 : XOR EDI,EDI
00a64ddb : CMP dword ptr [EAX + 0x20],EDI
00a64dde : JZ 0x00a64dea
00a64de0 : CMP byte ptr [EBX + 0x24],0x0
00a64de4 : JNZ 0x00a6504c
00a64dea : PUSH -0x1
00a64dec : XOR ECX,ECX
00a64dee : LEA EAX,[EBX + 0x4]
00a64df1 : PUSH EDI
00a64df2 : MOV word ptr [EBP + 0xfffffed4],CX
00a64df9 : MOV ESI,0x7
00a64dfe : PUSH EAX
00a64dff : LEA ECX,[EBP + 0xfffffed0]
00a64e05 : MOV dword ptr [EBP + 0xfffffee8],ESI
00a64e0b : MOV dword ptr [EBP + 0xfffffee4],EDI
00a64e11 : CALL 0x00405eb0
00a64e16 : MOV dword ptr [EBP + -0x4],EDI
00a64e19 : LEA ECX,[EBP + 0xfffffe5c]
00a64e1f : CALL 0x0070d390
00a64e24 : MOV byte ptr [EBP + -0x4],0x1
00a64e28 : MOV EAX,[0x017251d8]
00a64e2d : LEA EDX,[EBP + 0xfffffed0]
00a64e33 : PUSH EDX
00a64e34 : PUSH EAX
00a64e35 : LEA ECX,[EBP + 0xfffffe5c]
00a64e3b : CALL 0x008036f0
00a64e40 : TEST AL,AL
00a64e42 : JNZ 0x00a64e8c
00a64e44 : LEA ECX,[EBP + 0xfffffe5c]
00a64e4a : CALL 0x0070d4c0
00a64e4f : MOV byte ptr [EBX + 0x5c],0x1
00a64e53 : MOV byte ptr [EBP + -0x4],0x0
00a64e57 : LEA ECX,[EBP + 0xfffffe5c]
00a64e5d : CALL 0x0070d710
00a64e62 : MOV dword ptr [EBP + -0x4],0xffffffff
00a64e69 : CMP dword ptr [EBP + 0xfffffee8],0x8
00a64e70 : JC 0x00a64e7d
00a64e72 : MOV ECX,dword ptr [EBP + 0xfffffed4]
00a64e78 : CALL 0x006f04e0
00a64e7d : XOR ECX,ECX
00a64e7f : MOV dword ptr [EBP + 0xfffffee8],ESI
00a64e85 : XOR AL,AL
00a64e87 : JMP 0x00a650ca
00a64e8c : MOV ECX,dword ptr [EBP + 0xfffffee4]
00a64e92 : LEA EAX,[EBP + 0xfffffeb4]
00a64e98 : PUSH EAX
00a64e99 : LEA EAX,[EBP + 0xfffffed0]
00a64e9f : LEA EDX,[ECX + -0x3]
00a64ea2 : PUSH EAX
00a64ea3 : CALL 0x0040e420
00a64ea8 : MOV byte ptr [EBP + -0x4],0x2
00a64eac : LEA ECX,[EBP + 0xfffffeb4]
00a64eb2 : CALL 0x0070c1f0
00a64eb7 : MOV ESI,dword ptr [EBP + 0xfffffec8]
00a64ebd : MOV EDX,ESI
00a64ebf : CMP ESI,0x3
00a64ec2 : JC 0x00a64ec9
00a64ec4 : MOV EDX,0x3
00a64ec9 : CMP dword ptr [EBP + 0xfffffecc],0x8
00a64ed0 : MOV EAX,dword ptr [EBP + 0xfffffeb8]
00a64ed6 : JNC 0x00a64ede
00a64ed8 : LEA EAX,[EBP + 0xfffffeb8]
00a64ede : PUSH EAX
00a64edf : MOV ECX,0xc0c3f8
00a64ee4 : CALL 0x00405b70
00a64ee9 : ADD ESP,0x4
00a64eec : CMP EAX,EDI
00a64eee : JNZ 0x00a64f04
00a64ef0 : CMP ESI,0x3
00a64ef3 : JC 0x00a64f04
00a64ef5 : XOR EAX,EAX
00a64ef7 : CMP ESI,0x3
00a64efa : SETNZ AL
00a64efd : CMP EAX,EDI
00a64eff : JNZ 0x00a64f04
00a64f01 : MOV dword ptr [EBX + 0x58],EDI
00a64f04 : CMP byte ptr [EBX + 0x60],0x0
00a64f08 : JZ 0x00a64f11
00a64f0a : MOV ECX,0x2
00a64f0f : JMP 0x00a64f1c
00a64f11 : XOR ECX,ECX
00a64f13 : CMP byte ptr [0x00d6ab01],CL
00a64f19 : SETZ CL
00a64f1c : MOV EDX,dword ptr [0x017251ac]
00a64f22 : MOV EAX,dword ptr [EDX + 0x18]
00a64f25 : PUSH 0x1
00a64f27 : LEA EDX,[EBX + 0x38]
00a64f2a : PUSH EDX
00a64f2b : LEA EDX,[EBX + 0x3c]
00a64f2e : PUSH EDX
00a64f2f : MOV EDX,dword ptr [EBX + 0x58]
00a64f32 : PUSH EDX
00a64f33 : PUSH 0x5
00a64f35 : PUSH 0x1
00a64f37 : PUSH ECX
00a64f38 : MOV ECX,dword ptr [EBP + 0xfffffe78]
00a64f3e : PUSH EDI
00a64f3f : PUSH EDI
00a64f40 : PUSH -0x1
00a64f42 : PUSH -0x1
00a64f44 : PUSH ECX
00a64f45 : MOV ECX,dword ptr [EBP + 0xfffffe7c]
00a64f4b : PUSH EAX
00a64f4c : CALL 0x007b4450
00a64f51 : MOV EDX,EAX
00a64f53 : ADD ESP,0x34
00a64f56 : CMP EDX,EDI
00a64f58 : MOV dword ptr [EBP + 0xfffffe58],EDX
00a64f5e : JGE 0x00a65053
00a64f64 : XOR EAX,EAX
00a64f66 : MOVZX ESI,AX
00a64f69 : MOV EAX,ESI
00a64f6b : SHL ESI,0x10
00a64f6e : OR EAX,ESI
00a64f70 : CMP dword ptr [EBP + 0xfffffee8],0x8
00a64f77 : MOV ECX,0x40
00a64f7c : LEA EDI,[EBP + 0xfffffeec]
00a64f82 : STOSD.REP ES:EDI
00a64f84 : MOV EAX,dword ptr [EBP + 0xfffffed4]
00a64f8a : JNC 0x00a64f92
00a64f8c : LEA EAX,[EBP + 0xfffffed4]
00a64f92 : PUSH EDX
00a64f93 : PUSH EAX
00a64f94 : PUSH 0xc0c400
00a64f99 : LEA EDX,[EBP + 0xfffffeec]
00a64f9f : CALL 0x0040e4a0
00a64fa4 : MOV ESI,dword ptr [0x00da98e8]
00a64faa : LEA EDX,[EBP + 0xfffffeec]
00a64fb0 : ADD ESP,0xc
00a64fb3 : PUSH EDX
00a64fb4 : CALL 0x008018d0
00a64fb9 : MOV EAX,dword ptr [EBP + 0xfffffe58]
00a64fbf : ADD ESP,0x4
00a64fc2 : PUSH EAX
00a64fc3 : CALL 0x00664d50
00a64fc8 : LEA ECX,[EBP + 0xfffffe5c]
00a64fce : CALL 0x0070d4c0
00a64fd3 : MOV byte ptr [EBX + 0x5c],0x1
00a64fd7 : MOV byte ptr [EBP + -0x4],0x1
00a64fdb : MOV ESI,0x8
00a64fe0 : CMP dword ptr [EBP + 0xfffffecc],ESI
00a64fe6 : JC 0x00a64ff3
00a64fe8 : MOV ECX,dword ptr [EBP + 0xfffffeb8]
00a64fee : CALL 0x006f04e0
00a64ff3 : XOR EBX,EBX
00a64ff5 : MOV EDI,0x7
00a64ffa : XOR ECX,ECX
00a64ffc : MOV dword ptr [EBP + 0xfffffecc],EDI
00a65002 : MOV dword ptr [EBP + 0xfffffec8],EBX
00a65008 : MOV word ptr [EBP + 0xfffffeb8],CX
00a6500f : MOV byte ptr [EBP + -0x4],BL
00a65012 : LEA ECX,[EBP + 0xfffffe5c]
00a65018 : CALL 0x0070d710
00a6501d : MOV dword ptr [EBP + -0x4],0xffffffff
00a65024 : CMP dword ptr [EBP + 0xfffffee8],ESI
00a6502a : JC 0x00a65037
00a6502c : MOV ECX,dword ptr [EBP + 0xfffffed4]
00a65032 : CALL 0x006f04e0
00a65037 : XOR EDX,EDX
00a65039 : MOV dword ptr [EBP + 0xfffffee8],EDI
00a6503f : MOV dword ptr [EBP + 0xfffffee4],EBX
00a65045 : MOV word ptr [EBP + 0xfffffed4],DX
00a6504c : XOR AL,AL
00a6504e : JMP 0x00a650d7
00a65053 : LEA ECX,[EBP + 0xfffffe5c]
00a65059 : CALL 0x0070d4c0
00a6505e : MOV byte ptr [EBX + 0x24],0x1
00a65062 : MOV byte ptr [EBP + -0x4],0x1
00a65066 : MOV ESI,0x8
00a6506b : CMP dword ptr [EBP + 0xfffffecc],ESI
00a65071 : JC 0x00a6507e
00a65073 : MOV ECX,dword ptr [EBP + 0xfffffeb8]
00a65079 : CALL 0x006f04e0
00a6507e : XOR EAX,EAX
00a65080 : MOV EBX,0x7
00a65085 : MOV dword ptr [EBP + 0xfffffecc],EBX
00a6508b : MOV dword ptr [EBP + 0xfffffec8],EDI
00a65091 : MOV word ptr [EBP + 0xfffffeb8],AX
00a65098 : MOV byte ptr [EBP + -0x4],AL
00a6509b : LEA ECX,[EBP + 0xfffffe5c]
00a650a1 : CALL 0x0070d710
00a650a6 : MOV dword ptr [EBP + -0x4],0xffffffff
00a650ad : CMP dword ptr [EBP + 0xfffffee8],ESI
00a650b3 : JC 0x00a650c0
00a650b5 : MOV ECX,dword ptr [EBP + 0xfffffed4]
00a650bb : CALL 0x006f04e0
00a650c0 : MOV dword ptr [EBP + 0xfffffee8],EBX
00a650c6 : XOR ECX,ECX
00a650c8 : MOV AL,0x1
00a650ca : MOV word ptr [EBP + 0xfffffed4],CX
00a650d1 : MOV dword ptr [EBP + 0xfffffee4],EDI
00a650d7 : MOV ECX,dword ptr [EBP + -0xc]
00a650da : MOV dword ptr FS:[0x0],ECX
00a650e1 : POP ECX
00a650e2 : POP EDI
00a650e3 : POP ESI
00a650e4 : POP EBX
00a650e5 : MOV ECX,dword ptr [EBP + -0x14]
00a650e8 : XOR ECX,EBP
00a650ea : CALL 0x00633e6b
00a650ef : MOV ESP,EBP
00a650f1 : POP EBP
00a650f2 : RET 0x4
