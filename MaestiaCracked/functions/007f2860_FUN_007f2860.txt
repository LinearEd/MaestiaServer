PROGRAM  : Maestia.exe
FUNCTION : FUN_007f2860
ENTRY    : 007f2860
BODY     : [[007f2860, 007f28a1]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f2860(float *param_1)

{
  int in_ECX;
  float unaff_ESI;
  float *pfVar1;
  float *pfVar2;
  float *pfVar3;
  float fStack_7c;
  float fStack_78;
  float fStack_74;
  float fStack_70;
  float *pfStack_6c;
  float fStack_68;
  float fStack_64;
  float *pfStack_60;
  float fStack_5c;
  float fStack_58;
  float fStack_54;
  float fStack_50;
  float fStack_4c;
  float fStack_48;
  undefined4 uStack_44;
  float *pfStack_40;
  float *pfStack_3c;
  float *pfStack_38;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 uStack_24;
  
  if (0.0001 <= *param_1 * *param_1 + param_1[1] * param_1[1] + param_1[2] * param_1[2]) {
    pfVar3 = &fStack_78;
    fStack_78 = 0.0;
    fStack_74 = 0.0;
    fStack_70 = 0.0;
    D3DXVec3Normalize(pfVar3,param_1);
    fStack_74 = *(float *)(in_ECX + 0x24) * fStack_78 - *(float *)(in_ECX + 0x28) * fStack_7c;
    pfVar1 = &fStack_74;
    fStack_70 = *(float *)(in_ECX + 0x28) * unaff_ESI - *(float *)(in_ECX + 0x20) * fStack_78;
    pfStack_6c = (float *)(*(float *)(in_ECX + 0x20) * fStack_7c -
                          *(float *)(in_ECX + 0x24) * unaff_ESI);
    pfVar2 = pfVar1;
    fStack_5c = fStack_74;
    fStack_58 = fStack_70;
    fStack_54 = (float)pfStack_6c;
    D3DXVec3Normalize(pfVar1,pfVar1);
    fStack_70 = (float)param_1 * fStack_74 - unaff_ESI * fStack_78;
    pfStack_6c = (float *)(unaff_ESI * fStack_7c - (float)pfVar3 * fStack_74);
    fStack_68 = (float)pfVar3 * fStack_78 - (float)param_1 * fStack_7c;
    fStack_64 = fStack_70;
    pfStack_60 = pfStack_6c;
    fStack_5c = fStack_68;
    D3DXVec3Normalize(&fStack_70,&fStack_70);
    uStack_28 = 0;
    uStack_2c = 0;
    uStack_30 = 0;
    uStack_34 = 0;
    uStack_44 = 0;
    fStack_54 = 0.0;
    uStack_24 = 0x3f800000;
    fStack_50 = fStack_78;
    fStack_4c = fStack_74;
    fStack_48 = fStack_70;
    pfStack_60 = param_1;
    pfStack_40 = pfVar1;
    pfStack_3c = pfVar2;
    pfStack_38 = pfVar3;
    D3DXQuaternionRotationMatrix(in_ECX + 0x170,&pfStack_60);
    *(undefined1 *)(in_ECX + 0x154) = 1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007f2860 : PUSH EBP
007f2861 : MOV EBP,ESP
007f2863 : AND ESP,0xfffffff8
007f2866 : MOV EAX,dword ptr [EBP + 0x8]
007f2869 : MOVSS XMM2,dword ptr [EAX]
007f286d : MOVSS XMM1,dword ptr [EAX + 0x4]
007f2872 : MOVSS XMM0,dword ptr [EAX + 0x8]
007f2877 : MOVAPS XMM3,XMM2
007f287a : MULSS XMM3,XMM2
007f287e : MOVAPS XMM2,XMM1
007f2881 : MULSS XMM2,XMM1
007f2885 : MOVAPS XMM1,XMM0
007f2888 : SUB ESP,0x74
007f288b : MULSS XMM1,XMM0
007f288f : MOVSS XMM0,dword ptr [0x00cdf398]
007f2897 : ADDSS XMM3,XMM2
007f289b : ADDSS XMM3,XMM1
007f289f : COMISS XMM0,XMM3
