PROGRAM  : Maestia.exe
FUNCTION : FUN_00573e60
ENTRY    : 00573e60
BODY     : [[00573e60, 00573f95]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00573e60(int *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint *in_ECX;
  undefined4 uVar4;
  bool bVar5;
  GRefCountNTSImpl *pGStack_20;
  int iStack_1c;
  int iStack_18;
  byte bStack_14;
  undefined1 auStack_10 [16];
  
  uVar1 = in_ECX[4];
  if (uVar1 == 0) {
    return;
  }
  if (*(int *)(uVar1 + 0xc) == 0) {
    return;
  }
  if (**(char **)(uVar1 + 8) == '\0') {
    return;
  }
  iVar2 = (**(code **)(*param_1 + 0x5c))();
  iVar3 = FUN_00515840(0x20,0);
  if (iVar3 == 0) {
    pGStack_20 = (GRefCountNTSImpl *)0x0;
  }
  else {
    pGStack_20 = (GRefCountNTSImpl *)FUN_0052b920(iVar2 + 0x78,in_ECX[4]);
  }
  uVar1 = *in_ECX;
  if (uVar1 < 0x201) {
    if ((uVar1 != 0x200) && (uVar1 != 1)) {
      bVar5 = uVar1 == 4;
      goto LAB_00573ee7;
    }
  }
  else {
    bVar5 = uVar1 == 0x40000;
LAB_00573ee7:
    uVar4 = 3;
    if (!bVar5) goto LAB_00573ef3;
  }
  uVar4 = 4;
LAB_00573ef3:
  iVar3 = FUN_00515840(0x68,0);
  if (iVar3 == 0) {
    iStack_1c = 0;
  }
  else {
    iStack_1c = FUN_00569220(iVar2,pGStack_20,0,*(undefined4 *)(in_ECX[4] + 0xc),0,uVar4);
  }
  bStack_14 = 0;
  iStack_18 = 0;
  FUN_00526210(&iStack_1c);
  if (((bStack_14 & 2) == 0) && (iStack_1c != 0)) {
    FUN_00503db0();
  }
  iStack_1c = 0;
  if (((bStack_14 & 1) == 0) && (iStack_18 != 0)) {
    FUN_00503db0();
  }
  FUN_00522940(in_ECX,auStack_10);
  FUN_00526bc0();
  if (pGStack_20 != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(pGStack_20);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00573e60 : SUB ESP,0x20
00573e63 : PUSH EBP
00573e64 : MOV EBP,ECX
00573e66 : MOV EAX,dword ptr [EBP + 0x10]
00573e69 : TEST EAX,EAX
00573e6b : JZ 0x00573f8f
00573e71 : CMP dword ptr [EAX + 0xc],0x1
00573e75 : JC 0x00573f8f
00573e7b : MOV EAX,dword ptr [EAX + 0x8]
00573e7e : CMP byte ptr [EAX],0x0
00573e81 : JZ 0x00573f8f
00573e87 : MOV ECX,dword ptr [ESP + 0x28]
00573e8b : MOV EDX,dword ptr [ECX]
00573e8d : MOV EAX,dword ptr [EDX + 0x5c]
00573e90 : PUSH EBX
00573e91 : PUSH ESI
00573e92 : PUSH EDI
00573e93 : CALL EAX
00573e95 : MOV EDI,EAX
00573e97 : MOV ECX,dword ptr [EDI + 0x78]
00573e9a : MOV EBX,dword ptr [ECX + 0x288]
00573ea0 : LEA ESI,[EDI + 0x78]
00573ea3 : PUSH 0x0
00573ea5 : PUSH 0x20
00573ea7 : MOV ECX,EBX
00573ea9 : CALL 0x00515840
00573eae : TEST EAX,EAX
00573eb0 : JZ 0x00573ec4
00573eb2 : MOV ECX,dword ptr [EBP + 0x10]
00573eb5 : PUSH ECX
00573eb6 : PUSH ESI
00573eb7 : MOV ECX,EAX
00573eb9 : CALL 0x0052b920
00573ebe : MOV dword ptr [ESP + 0x10],EAX
00573ec2 : JMP 0x00573ecc
00573ec4 : MOV dword ptr [ESP + 0x10],0x0
00573ecc : MOV EAX,dword ptr [EBP]
00573ecf : CMP EAX,0x200
00573ed4 : JA 0x00573ee2
00573ed6 : JZ 0x00573eee
00573ed8 : SUB EAX,0x1
00573edb : JZ 0x00573eee
00573edd : SUB EAX,0x3
00573ee0 : JMP 0x00573ee7
00573ee2 : CMP EAX,0x40000
00573ee7 : MOV ESI,0x3
00573eec : JNZ 0x00573ef3
00573eee : MOV ESI,0x4
00573ef3 : PUSH 0x0
00573ef5 : PUSH 0x68
00573ef7 : MOV ECX,EBX
00573ef9 : CALL 0x00515840
00573efe : XOR EBX,EBX
00573f00 : CMP EAX,EBX
00573f02 : JZ 0x00573f1d
00573f04 : MOV EDX,dword ptr [EBP + 0x10]
00573f07 : MOV EDX,dword ptr [EDX + 0xc]
00573f0a : PUSH ESI
00573f0b : MOV ESI,dword ptr [ESP + 0x14]
00573f0f : PUSH EBX
00573f10 : PUSH EDX
00573f11 : PUSH EBX
00573f12 : PUSH ESI
00573f13 : PUSH EDI
00573f14 : MOV ECX,EAX
00573f16 : CALL 0x00569220
00573f1b : JMP 0x00573f23
00573f1d : MOV ESI,dword ptr [ESP + 0x10]
00573f21 : XOR EAX,EAX
00573f23 : MOV dword ptr [ESP + 0x14],EAX
00573f27 : LEA EAX,[ESP + 0x14]
00573f2b : PUSH EAX
00573f2c : LEA ECX,[ESP + 0x24]
00573f30 : MOV byte ptr [ESP + 0x20],BL
00573f34 : MOV dword ptr [ESP + 0x1c],EBX
00573f38 : CALL 0x00526210
00573f3d : TEST byte ptr [ESP + 0x1c],0x2
00573f42 : JNZ 0x00573f51
00573f44 : MOV ECX,dword ptr [ESP + 0x14]
00573f48 : CMP ECX,EBX
00573f4a : JZ 0x00573f51
00573f4c : CALL 0x00503db0
00573f51 : TEST byte ptr [ESP + 0x1c],0x1
00573f56 : MOV dword ptr [ESP + 0x14],EBX
00573f5a : JNZ 0x00573f69
00573f5c : MOV ECX,dword ptr [ESP + 0x18]
00573f60 : CMP ECX,EBX
00573f62 : JZ 0x00573f69
00573f64 : CALL 0x00503db0
00573f69 : LEA ECX,[ESP + 0x20]
00573f6d : PUSH ECX
00573f6e : MOV ECX,dword ptr [ESP + 0x38]
00573f72 : PUSH EBP
00573f73 : CALL 0x00522940
00573f78 : LEA ECX,[ESP + 0x20]
00573f7c : CALL 0x00526bc0
00573f81 : CMP ESI,EBX
00573f83 : JZ 0x00573f8c
00573f85 : MOV ECX,ESI
00573f87 : CALL 0x004ff7c0
00573f8c : POP EDI
00573f8d : POP ESI
00573f8e : POP EBX
00573f8f : POP EBP
00573f90 : ADD ESP,0x20
00573f93 : RET 0x4
