PROGRAM  : Maestia.exe
FUNCTION : FUN_00576220
ENTRY    : 00576220
BODY     : [[00576220, 0057634a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00576220(uint param_1,undefined4 param_2,undefined4 param_3)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  char cVar4;
  int iVar5;
  GRefCountImpl *this;
  LONG LVar6;
  uint uVar7;
  uint local_14;
  undefined4 local_10;
  undefined4 local_c [3];
  
  FUN_0051b6e0();
  uVar2 = param_1;
  iVar1 = param_1 + 0xc;
  local_10 = 0;
  iVar5 = FUN_0051b1a0();
  uVar3 = param_2;
  if (iVar5 != 0) {
    local_c[0] = 4;
    FUN_0051c600(iVar1);
    FUN_0051c600(param_3);
    FUN_0051b6e0();
    FUN_005a03c0(&param_1,local_c);
    this = (GRefCountImpl *)FUN_005a0320((param_1 & 0xfffffffc) + 8,0);
    if (this != (GRefCountImpl *)0x0) {
      if (*(char *)(uVar2 + 0x2c) == '\x06') {
        cVar4 = FUN_0056c140(this,&local_14,&local_10);
        if (cVar4 == '\0') {
          FUN_00526400();
        }
      }
      else {
        FUN_0056c140(this,&local_14,&local_10);
      }
      GRefCountImpl::Release(this);
    }
    uVar7 = param_1 & 0xfffffffc;
    LVar6 = InterlockedExchangeAdd((LONG *)(uVar7 + 4),-1);
    if (LVar6 == 1) {
      FUN_00515cf0(uVar7);
    }
    FUN_00512c60();
  }
  FUN_00575c40(uVar2,uVar3,&local_14,local_10);
  LVar6 = InterlockedExchangeAdd((LONG *)((local_14 & 0xfffffffc) + 4),-1);
  if (LVar6 == 1) {
    FUN_00515cf0(local_14 & 0xfffffffc);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00576220 : SUB ESP,0x14
00576223 : PUSH EBX
00576224 : PUSH EBP
00576225 : PUSH ESI
00576226 : MOV EBP,ECX
00576228 : PUSH EDI
00576229 : LEA ECX,[ESP + 0x10]
0057622d : CALL 0x0051b6e0
00576232 : MOV EBX,dword ptr [ESP + 0x28]
00576236 : LEA ESI,[EBX + 0xc]
00576239 : MOV ECX,ESI
0057623b : MOV dword ptr [ESP + 0x14],0x0
00576243 : CALL 0x0051b1a0
00576248 : MOV EDI,dword ptr [ESP + 0x2c]
0057624c : TEST EAX,EAX
0057624e : JZ 0x00576310
00576254 : PUSH ESI
00576255 : LEA ECX,[ESP + 0x20]
00576259 : MOV dword ptr [ESP + 0x1c],0x4
00576261 : CALL 0x0051c600
00576266 : MOV EAX,dword ptr [ESP + 0x30]
0057626a : PUSH EAX
0057626b : LEA ECX,[ESP + 0x24]
0057626f : CALL 0x0051c600
00576274 : LEA ECX,[ESP + 0x28]
00576278 : CALL 0x0051b6e0
0057627d : LEA ECX,[ESP + 0x18]
00576281 : PUSH ECX
00576282 : LEA EDX,[ESP + 0x2c]
00576286 : PUSH EDX
00576287 : MOV ECX,EDI
00576289 : CALL 0x005a03c0
0057628e : MOV EAX,dword ptr [ESP + 0x28]
00576292 : AND EAX,0xfffffffc
00576295 : PUSH 0x0
00576297 : ADD EAX,0x8
0057629a : PUSH EAX
0057629b : MOV ECX,EDI
0057629d : CALL 0x005a0320
005762a2 : MOV ESI,EAX
005762a4 : TEST ESI,ESI
005762a6 : JZ 0x005762e9
005762a8 : CMP byte ptr [EBX + 0x2c],0x6
005762ac : JNZ 0x005762cf
005762ae : LEA EAX,[ESP + 0x14]
005762b2 : PUSH EAX
005762b3 : LEA ECX,[ESP + 0x14]
005762b7 : PUSH ECX
005762b8 : PUSH ESI
005762b9 : CALL 0x0056c140
005762be : ADD ESP,0xc
005762c1 : TEST AL,AL
005762c3 : JNZ 0x005762e2
005762c5 : LEA ECX,[EBX + 0x2c]
005762c8 : CALL 0x00526400
005762cd : JMP 0x005762e2
005762cf : LEA EDX,[ESP + 0x14]
005762d3 : PUSH EDX
005762d4 : LEA EAX,[ESP + 0x14]
005762d8 : PUSH EAX
005762d9 : PUSH ESI
005762da : CALL 0x0056c140
005762df : ADD ESP,0xc
005762e2 : MOV ECX,ESI
005762e4 : CALL 0x004ff7e0
005762e9 : MOV ESI,dword ptr [ESP + 0x28]
005762ed : AND ESI,0xfffffffc
005762f0 : PUSH -0x1
005762f2 : LEA ECX,[ESI + 0x4]
005762f5 : PUSH ECX
005762f6 : CALL dword ptr [0x00b851cc]
005762fc : SUB EAX,0x1
005762ff : JNZ 0x00576307
00576301 : PUSH ESI
00576302 : CALL 0x00515cf0
00576307 : LEA ECX,[ESP + 0x18]
0057630b : CALL 0x00512c60
00576310 : MOV EDX,dword ptr [ESP + 0x14]
00576314 : PUSH EDX
00576315 : LEA EAX,[ESP + 0x14]
00576319 : PUSH EAX
0057631a : PUSH EDI
0057631b : PUSH EBX
0057631c : MOV ECX,EBP
0057631e : CALL 0x00575c40
00576323 : MOV ESI,dword ptr [ESP + 0x10]
00576327 : AND ESI,0xfffffffc
0057632a : PUSH -0x1
0057632c : LEA ECX,[ESI + 0x4]
0057632f : PUSH ECX
00576330 : CALL dword ptr [0x00b851cc]
00576336 : SUB EAX,0x1
00576339 : JNZ 0x00576341
0057633b : PUSH ESI
0057633c : CALL 0x00515cf0
00576341 : POP EDI
00576342 : POP ESI
00576343 : POP EBP
00576344 : POP EBX
00576345 : ADD ESP,0x14
00576348 : RET 0xc
