PROGRAM  : Maestia.exe
FUNCTION : FUN_0072d1d0
ENTRY    : 0072d1d0
BODY     : [[0072d1d0, 0072d5ba]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0072d1d0(int *param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int unaff_EDI;
  float fVar4;
  undefined1 local_158 [64];
  undefined1 local_118 [64];
  undefined1 local_d8 [80];
  int local_88;
  tagRECT local_84;
  float local_74;
  float local_70;
  undefined1 local_6c [8];
  uint local_64;
  uint local_60;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  uint local_48;
  uint local_44;
  uint local_40;
  uint local_3c;
  undefined4 local_38;
  undefined4 uStack_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 uStack_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 uStack_1c;
  undefined4 local_18;
  float local_14;
  float fStack_10;
  float local_c;
  
  if (param_1 != (int *)0x0) {
    (**(code **)(*param_1 + 0xc0))(param_1,local_6c);
    GetClientRect(*(HWND *)(DAT_017251ac + 0x170),&local_84);
    *(int *)(unaff_EDI + 0x78) = local_84.bottom / 0x19;
    SetRect((LPRECT)(unaff_EDI + 0x7c),0,local_84.bottom + (local_84.bottom / 0x19) * -4,
            local_84.right,local_84.bottom);
    iVar2 = local_84.right * 9;
    iVar1 = local_84.bottom * 0x10;
    if (iVar2 < iVar1) {
      fVar4 = (float)((int)(iVar2 + (iVar2 >> 0x1f & 0xfU)) >> 4);
      iVar2 = (int)((float)(local_84.bottom / 2) - fVar4 * DAT_00d72c24);
      local_88 = (int)((float)iVar2 + fVar4);
      local_44 = (local_60 * iVar2) / (uint)local_84.bottom;
      local_48 = 0;
      local_3c = (local_60 * local_88) / (uint)local_84.bottom;
      uVar3 = local_64;
    }
    else if (iVar1 < iVar2) {
      local_3c = local_60;
      iVar2 = (int)((float)(local_84.right / 2) - (float)(iVar1 / 9) * DAT_00d72c24);
      local_48 = (local_64 * iVar2) / (uint)local_84.right;
      local_44 = 0;
      uVar3 = (local_64 * (int)((float)iVar2 + (float)(iVar1 / 9))) / (uint)local_84.right;
    }
    else {
      uVar3 = local_40;
      if (iVar1 == iVar2) {
        local_48 = 0;
        local_44 = 0;
        local_3c = local_60;
        uVar3 = local_64;
      }
    }
    (**(code **)(*param_1 + 0xb4))(param_1,3,local_158);
    (**(code **)(*param_1 + 0xb4))(param_1,2,local_d8);
    (**(code **)(*param_1 + 0xb4))(param_1,0x100,local_118);
    local_20 = 0;
    uStack_1c = 0;
    local_18 = 0;
    local_2c = 0;
    uStack_28 = 0;
    local_24 = 0;
    local_38 = 0;
    uStack_34 = 0;
    local_30 = 0;
    local_54 = 0;
    local_50 = 0;
    local_4c = 0;
    fVar4 = (float)(int)local_48;
    local_74 = (float)(int)local_44;
    local_c = DAT_00d72c24;
    local_14 = fVar4;
    fStack_10 = local_74;
    D3DXVec3Unproject(&local_20,&local_14,local_6c,local_158,local_d8,local_118);
    local_70 = (float)(int)local_3c;
    local_c = DAT_00d72c24;
    local_14 = fVar4;
    fStack_10 = local_70;
    D3DXVec3Unproject(&local_2c,&local_14,local_6c,local_158,local_d8,local_118);
    fStack_10 = local_74;
    local_c = DAT_00d72c24;
    local_14 = (float)(int)uVar3;
    D3DXVec3Unproject(&local_38,&local_14,local_6c,local_158,local_d8,local_118);
    fStack_10 = local_70;
    local_c = DAT_00d72c24;
    local_14 = (float)(int)uVar3;
    D3DXVec3Unproject(&local_54,&local_14,local_6c,local_158,local_d8,local_118);
    *(ulonglong *)(unaff_EDI + 4) = CONCAT44(uStack_1c,local_20);
    *(ulonglong *)(unaff_EDI + 0x1c) = CONCAT44(uStack_28,local_2c);
    *(ulonglong *)(unaff_EDI + 0x34) = CONCAT44(uStack_34,local_38);
    *(undefined4 *)(unaff_EDI + 0xc) = local_18;
    *(ulonglong *)(unaff_EDI + 0x4c) = CONCAT44(local_50,local_54);
    *(undefined4 *)(unaff_EDI + 0x24) = local_24;
    *(undefined4 *)(unaff_EDI + 0x3c) = local_30;
    *(undefined4 *)(unaff_EDI + 0x54) = local_4c;
    return;
  }
  FUN_008018d0(L"AvaMoviePlayer [SetVertexPosition] d3ddev is NULL");
  return;
}



============================================================
DISASSEMBLY
============================================================
0072d1d0 : PUSH EBP
0072d1d1 : MOV EBP,ESP
0072d1d3 : SUB ESP,0x154
0072d1d9 : PUSH EBX
0072d1da : MOV EBX,dword ptr [EBP + 0x8]
0072d1dd : PUSH ESI
0072d1de : TEST EBX,EBX
0072d1e0 : JNZ 0x0072d1fd
0072d1e2 : MOV ESI,dword ptr [0x00da98e8]
0072d1e8 : PUSH 0xc02e80
0072d1ed : CALL 0x008018d0
0072d1f2 : ADD ESP,0x4
0072d1f5 : POP ESI
0072d1f6 : POP EBX
0072d1f7 : MOV ESP,EBP
0072d1f9 : POP EBP
0072d1fa : RET 0x4
0072d1fd : MOV EAX,dword ptr [EBX]
0072d1ff : MOV EDX,dword ptr [EAX + 0xc0]
0072d205 : LEA ECX,[EBP + -0x68]
0072d208 : PUSH ECX
0072d209 : PUSH EBX
0072d20a : CALL EDX
0072d20c : MOV ECX,dword ptr [0x017251ac]
0072d212 : MOV EDX,dword ptr [ECX + 0x170]
0072d218 : LEA EAX,[EBP + -0x80]
0072d21b : PUSH EAX
0072d21c : PUSH EDX
0072d21d : CALL dword ptr [0x00b85454]
0072d223 : MOV ECX,dword ptr [EBP + -0x74]
0072d226 : MOV EAX,0x51eb851f
0072d22b : IMUL ECX
0072d22d : SAR EDX,0x3
0072d230 : MOV EAX,EDX
0072d232 : SHR EAX,0x1f
0072d235 : ADD EAX,EDX
0072d237 : MOV EDX,dword ptr [EBP + -0x78]
0072d23a : PUSH ECX
0072d23b : MOV dword ptr [EDI + 0x78],EAX
0072d23e : ADD EAX,EAX
0072d240 : PUSH EDX
0072d241 : ADD EAX,EAX
0072d243 : SUB ECX,EAX
0072d245 : PUSH ECX
0072d246 : PUSH 0x0
0072d248 : LEA ECX,[EDI + 0x7c]
0072d24b : PUSH ECX
0072d24c : CALL dword ptr [0x00b85430]
0072d252 : MOV ESI,dword ptr [EBP + -0x78]
0072d255 : MOV ECX,dword ptr [EBP + -0x74]
0072d258 : MOVSS XMM1,dword ptr [0x00d72c24]
0072d260 : LEA EAX,[ESI + ESI*0x8]
0072d263 : SHL ECX,0x4
0072d266 : CMP ECX,EAX
0072d268 : JLE 0x0072d2d0
0072d26a : MOV ECX,dword ptr [EBP + -0x74]
0072d26d : CDQ
0072d26e : AND EDX,0xf
0072d271 : ADD EAX,EDX
0072d273 : SAR EAX,0x4
0072d276 : CVTSI2SS XMM0,EAX
0072d27a : MOV EAX,ECX
0072d27c : CDQ
0072d27d : SUB EAX,EDX
0072d27f : SAR EAX,0x1
0072d281 : CVTSI2SS XMM2,EAX
0072d285 : MOVAPS XMM3,XMM0
0072d288 : MULSS XMM3,XMM1
0072d28c : SUBSS XMM2,XMM3
0072d290 : CVTTSS2SI EDX,XMM2
0072d294 : CVTSI2SS XMM1,EDX
0072d298 : ADDSS XMM1,XMM0
0072d29c : CVTTSS2SI EAX,XMM1
0072d2a0 : MOV dword ptr [EBP + 0xffffff7c],EAX
0072d2a6 : MOV EAX,dword ptr [EBP + -0x5c]
0072d2a9 : IMUL EAX,EDX
0072d2ac : XOR EDX,EDX
0072d2ae : DIV ECX
0072d2b0 : XOR EDX,EDX
0072d2b2 : MOV ESI,dword ptr [EBP + -0x60]
0072d2b5 : MOV dword ptr [EBP + -0x44],0x0
0072d2bc : MOV dword ptr [EBP + -0x40],EAX
0072d2bf : MOV EAX,dword ptr [EBP + -0x5c]
0072d2c2 : IMUL EAX,dword ptr [EBP + 0xffffff7c]
0072d2c9 : DIV ECX
0072d2cb : MOV dword ptr [EBP + -0x38],EAX
0072d2ce : JMP 0x0072d34e
0072d2d0 : JGE 0x0072d334
0072d2d2 : MOV EAX,0x38e38e39
0072d2d7 : IMUL ECX
0072d2d9 : SAR EDX,0x1
0072d2db : MOV ECX,EDX
0072d2dd : SHR ECX,0x1f
0072d2e0 : ADD ECX,EDX
0072d2e2 : MOV EAX,ESI
0072d2e4 : CDQ
0072d2e5 : SUB EAX,EDX
0072d2e7 : SAR EAX,0x1
0072d2e9 : CVTSI2SS XMM2,EAX
0072d2ed : MOV EAX,dword ptr [EBP + -0x5c]
0072d2f0 : MOV dword ptr [EBP + -0x38],EAX
0072d2f3 : MOV EAX,dword ptr [EBP + -0x60]
0072d2f6 : CVTSI2SS XMM0,ECX
0072d2fa : MOVAPS XMM3,XMM0
0072d2fd : MULSS XMM3,XMM1
0072d301 : SUBSS XMM2,XMM3
0072d305 : CVTTSS2SI EDX,XMM2
0072d309 : IMUL EAX,EDX
0072d30c : CVTSI2SS XMM1,EDX
0072d310 : XOR EDX,EDX
0072d312 : DIV ESI
0072d314 : ADDSS XMM1,XMM0
0072d318 : CVTTSS2SI ECX,XMM1
0072d31c : XOR EDX,EDX
0072d31e : MOV dword ptr [EBP + -0x40],0x0
0072d325 : MOV dword ptr [EBP + -0x44],EAX
0072d328 : MOV EAX,dword ptr [EBP + -0x60]
0072d32b : IMUL EAX,ECX
0072d32e : DIV ESI
0072d330 : MOV ESI,EAX
0072d332 : JMP 0x0072d34e
0072d334 : CMP ECX,EAX
0072d336 : JNZ 0x0072d34b
0072d338 : MOV ECX,dword ptr [EBP + -0x5c]
0072d33b : MOV ESI,dword ptr [EBP + -0x60]
0072d33e : XOR EAX,EAX
0072d340 : MOV dword ptr [EBP + -0x44],EAX
0072d343 : MOV dword ptr [EBP + -0x40],EAX
0072d346 : MOV dword ptr [EBP + -0x38],ECX
0072d349 : JMP 0x0072d34e
0072d34b : MOV ESI,dword ptr [EBP + -0x3c]
0072d34e : MOV EDX,dword ptr [EBX]
0072d350 : MOV ECX,dword ptr [EDX + 0xb4]
0072d356 : LEA EAX,[EBP + 0xfffffeac]
0072d35c : PUSH EAX
0072d35d : PUSH 0x3
0072d35f : PUSH EBX
0072d360 : CALL ECX
0072d362 : MOV EDX,dword ptr [EBX]
0072d364 : MOV ECX,dword ptr [EDX + 0xb4]
0072d36a : LEA EAX,[EBP + 0xffffff2c]
0072d370 : PUSH EAX
0072d371 : PUSH 0x2
0072d373 : PUSH EBX
0072d374 : CALL ECX
0072d376 : MOV EDX,dword ptr [EBX]
0072d378 : MOV ECX,dword ptr [EDX + 0xb4]
0072d37e : LEA EAX,[EBP + 0xfffffeec]
0072d384 : PUSH EAX
0072d385 : PUSH 0x100
0072d38a : PUSH EBX
0072d38b : CALL ECX
0072d38d : XORPS XMM0,XMM0
0072d390 : LEA EDX,[EBP + 0xfffffeec]
0072d396 : PUSH EDX
0072d397 : LEA EAX,[EBP + 0xffffff2c]
0072d39d : PUSH EAX
0072d39e : LEA ECX,[EBP + 0xfffffeac]
0072d3a4 : PUSH ECX
0072d3a5 : MOVSS dword ptr [EBP + -0x1c],XMM0
0072d3aa : MOVSS dword ptr [EBP + -0x18],XMM0
0072d3af : MOVSS dword ptr [EBP + -0x14],XMM0
0072d3b4 : MOVSS dword ptr [EBP + -0x28],XMM0
0072d3b9 : MOVSS dword ptr [EBP + -0x24],XMM0
0072d3be : MOVSS dword ptr [EBP + -0x20],XMM0
0072d3c3 : MOVSS dword ptr [EBP + -0x34],XMM0
0072d3c8 : MOVSS dword ptr [EBP + -0x30],XMM0
0072d3cd : MOVSS dword ptr [EBP + -0x2c],XMM0
0072d3d2 : MOVSS dword ptr [EBP + -0x50],XMM0
0072d3d7 : MOVSS dword ptr [EBP + -0x4c],XMM0
0072d3dc : MOVSS dword ptr [EBP + -0x48],XMM0
0072d3e1 : CVTSI2SS XMM0,dword ptr [EBP + -0x44]
0072d3e6 : LEA EDX,[EBP + -0x68]
0072d3e9 : PUSH EDX
0072d3ea : MOVSS dword ptr [EBP + 0x8],XMM0
0072d3ef : MOVSS dword ptr [EBP + -0x10],XMM0
0072d3f4 : CVTSI2SS XMM0,dword ptr [EBP + -0x40]
0072d3f9 : LEA EAX,[EBP + -0x10]
0072d3fc : PUSH EAX
0072d3fd : LEA ECX,[EBP + -0x1c]
0072d400 : MOVSS dword ptr [EBP + -0x70],XMM0
0072d405 : MOVSS dword ptr [EBP + -0xc],XMM0
0072d40a : MOVSS XMM0,dword ptr [0x00d72c24]
0072d412 : PUSH ECX
0072d413 : MOVSS dword ptr [EBP + -0x8],XMM0
0072d418 : CALL 0x00664c84
0072d41d : MOVSS XMM0,dword ptr [EBP + 0x8]
0072d422 : LEA EDX,[EBP + 0xfffffeec]
0072d428 : PUSH EDX
0072d429 : LEA EAX,[EBP + 0xffffff2c]
0072d42f : PUSH EAX
0072d430 : LEA ECX,[EBP + 0xfffffeac]
0072d436 : PUSH ECX
0072d437 : LEA EDX,[EBP + -0x68]
0072d43a : PUSH EDX
0072d43b : MOVSS dword ptr [EBP + -0x10],XMM0
0072d440 : CVTSI2SS XMM0,dword ptr [EBP + -0x38]
0072d445 : LEA EAX,[EBP + -0x10]
0072d448 : PUSH EAX
0072d449 : LEA ECX,[EBP + -0x28]
0072d44c : MOVSS dword ptr [EBP + -0x6c],XMM0
0072d451 : MOVSS dword ptr [EBP + -0xc],XMM0
0072d456 : MOVSS XMM0,dword ptr [0x00d72c24]
0072d45e : PUSH ECX
0072d45f : MOVSS dword ptr [EBP + -0x8],XMM0
0072d464 : CALL 0x00664c84
0072d469 : CVTSI2SS XMM0,ESI
0072d46d : MOVSS dword ptr [EBP + 0x8],XMM0
0072d472 : MOVSS dword ptr [EBP + -0x10],XMM0
0072d477 : MOVSS XMM0,dword ptr [EBP + -0x70]
0072d47c : MOVSS dword ptr [EBP + -0xc],XMM0
0072d481 : MOVSS XMM0,dword ptr [0x00d72c24]
0072d489 : LEA EDX,[EBP + 0xfffffeec]
0072d48f : PUSH EDX
0072d490 : LEA EAX,[EBP + 0xffffff2c]
0072d496 : PUSH EAX
0072d497 : LEA ECX,[EBP + 0xfffffeac]
0072d49d : PUSH ECX
0072d49e : LEA EDX,[EBP + -0x68]
0072d4a1 : PUSH EDX
0072d4a2 : LEA EAX,[EBP + -0x10]
0072d4a5 : PUSH EAX
0072d4a6 : LEA ECX,[EBP + -0x34]
0072d4a9 : PUSH ECX
0072d4aa : MOVSS dword ptr [EBP + -0x8],XMM0
0072d4af : CALL 0x00664c84
0072d4b4 : MOVSS XMM0,dword ptr [EBP + 0x8]
0072d4b9 : LEA EDX,[EBP + 0xfffffeec]
0072d4bf : PUSH EDX
0072d4c0 : LEA EAX,[EBP + 0xffffff2c]
0072d4c6 : PUSH EAX
0072d4c7 : LEA ECX,[EBP + 0xfffffeac]
0072d4cd : PUSH ECX
0072d4ce : LEA EDX,[EBP + -0x68]
0072d4d1 : PUSH EDX
0072d4d2 : MOVSS dword ptr [EBP + -0x10],XMM0
0072d4d7 : MOVSS XMM0,dword ptr [EBP + -0x6c]
0072d4dc : LEA EAX,[EBP + -0x10]
0072d4df : PUSH EAX
0072d4e0 : LEA ECX,[EBP + -0x50]
0072d4e3 : MOVSS dword ptr [EBP + -0xc],XMM0
0072d4e8 : MOVSS XMM0,dword ptr [0x00d72c24]
0072d4f0 : PUSH ECX
0072d4f1 : MOVSS dword ptr [EBP + -0x8],XMM0
0072d4f6 : CALL 0x00664c84
0072d4fb : MOVSS XMM0,dword ptr [EBP + -0x1c]
0072d500 : MOVSS dword ptr [EBP + -0x10],XMM0
0072d505 : MOVSS XMM0,dword ptr [EBP + -0x18]
0072d50a : MOVSS dword ptr [EBP + -0xc],XMM0
0072d50f : MOVSS XMM0,dword ptr [EBP + -0x14]
0072d514 : MOVSS dword ptr [EBP + -0x8],XMM0
0072d519 : MOVQ XMM0,qword ptr [EBP + -0x10]
0072d51e : MOV EDX,dword ptr [EBP + -0x8]
0072d521 : MOVQ qword ptr [EDI + 0x4],XMM0
0072d526 : MOVSS XMM0,dword ptr [EBP + -0x28]
0072d52b : MOVSS dword ptr [EBP + -0x1c],XMM0
0072d530 : MOVSS XMM0,dword ptr [EBP + -0x24]
0072d535 : MOVSS dword ptr [EBP + -0x18],XMM0
0072d53a : MOVSS XMM0,dword ptr [EBP + -0x20]
0072d53f : MOVSS dword ptr [EBP + -0x14],XMM0
0072d544 : MOVQ XMM0,qword ptr [EBP + -0x1c]
0072d549 : MOV EAX,dword ptr [EBP + -0x14]
0072d54c : MOVQ qword ptr [EDI + 0x1c],XMM0
0072d551 : MOVSS XMM0,dword ptr [EBP + -0x34]
0072d556 : MOVSS dword ptr [EBP + -0x28],XMM0
0072d55b : MOVSS XMM0,dword ptr [EBP + -0x30]
0072d560 : MOVSS dword ptr [EBP + -0x24],XMM0
0072d565 : MOVSS XMM0,dword ptr [EBP + -0x2c]
0072d56a : MOVSS dword ptr [EBP + -0x20],XMM0
0072d56f : MOVQ XMM0,qword ptr [EBP + -0x28]
0072d574 : MOV ECX,dword ptr [EBP + -0x20]
0072d577 : MOVQ qword ptr [EDI + 0x34],XMM0
0072d57c : MOVSS XMM0,dword ptr [EBP + -0x50]
0072d581 : MOVSS dword ptr [EBP + -0x34],XMM0
0072d586 : MOVSS XMM0,dword ptr [EBP + -0x4c]
0072d58b : MOVSS dword ptr [EBP + -0x30],XMM0
0072d590 : MOVSS XMM0,dword ptr [EBP + -0x48]
0072d595 : MOVSS dword ptr [EBP + -0x2c],XMM0
0072d59a : MOVQ XMM0,qword ptr [EBP + -0x34]
0072d59f : MOV dword ptr [EDI + 0xc],EDX
0072d5a2 : MOV EDX,dword ptr [EBP + -0x2c]
0072d5a5 : POP ESI
0072d5a6 : MOVQ qword ptr [EDI + 0x4c],XMM0
0072d5ab : MOV dword ptr [EDI + 0x24],EAX
0072d5ae : MOV dword ptr [EDI + 0x3c],ECX
0072d5b1 : MOV dword ptr [EDI + 0x54],EDX
0072d5b4 : POP EBX
0072d5b5 : MOV ESP,EBP
0072d5b7 : POP EBP
0072d5b8 : RET 0x4
