PROGRAM  : Maestia.exe
FUNCTION : FUN_0099a9c0
ENTRY    : 0099a9c0
BODY     : [[0099a9c0, 0099ab71]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099a9c0(void)

{
  undefined2 uVar1;
  int *piVar2;
  char cVar3;
  uint uVar4;
  undefined4 uVar5;
  int in_ECX;
  undefined1 local_c0 [4];
  undefined2 uStack_bc;
  undefined4 uStack_ac;
  uint uStack_a8;
  undefined2 uStack_a0;
  undefined4 uStack_90;
  uint uStack_8c;
  undefined4 local_88 [11];
  undefined4 **local_5c [5];
  uint local_48;
  undefined4 local_28;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b410af;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)local_c0;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xffffff38;
  ExceptionList = &local_14;
  uVar1 = *(undefined2 *)(*(int *)(in_ECX + 8) + 0x78);
  FUN_00412470(local_88);
  local_c = 0;
  cVar3 = FUN_0099bce0(uVar1,local_88);
  if (cVar3 == '\0') {
    FUN_00406460(L"IDS_MSGCLTNET_ERR_NOTFRIENDLIST");
    local_c._0_1_ = 1;
    piVar2 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar5 = FUN_0081d120(local_c0);
    local_c._0_1_ = 2;
    (**(code **)(*piVar2 + 0x44))(uVar5,3);
    local_c = CONCAT31(local_c._1_3_,1);
    if (7 < uStack_8c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_8c = 7;
    uStack_90 = 0;
    uStack_a0 = 0;
    local_c = (uint)local_c._1_3_ << 8;
    if (7 < uStack_a8) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_a8 = 7;
    uStack_ac = 0;
    uStack_bc = 0;
  }
  else {
    FUN_00998830(local_88[0],local_28);
    if (((char)local_28 != '\0') && ((char)((uint)local_28 >> 8) == '\0')) {
      if (local_48 < 8) {
        local_5c[0] = local_5c;
      }
      FUN_009adfc0(*(undefined4 *)(*DAT_00da9894 + 0x1a8),3,local_5c[0],uVar4);
    }
  }
  local_c = 0xffffffff;
  FUN_00411330(local_88);
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)local_c0);
  return;
}



============================================================
DISASSEMBLY
============================================================
0099a9c0 : PUSH EBP
0099a9c1 : MOV EBP,ESP
0099a9c3 : AND ESP,0xfffffff8
0099a9c6 : PUSH -0x1
0099a9c8 : PUSH 0xb410af
0099a9cd : MOV EAX,FS:[0x0]
0099a9d3 : PUSH EAX
0099a9d4 : SUB ESP,0xac
0099a9da : MOV EAX,[0x00d66fa0]
0099a9df : XOR EAX,ESP
0099a9e1 : MOV dword ptr [ESP + 0xa4],EAX
0099a9e8 : PUSH ESI
0099a9e9 : PUSH EDI
0099a9ea : MOV EAX,[0x00d66fa0]
0099a9ef : XOR EAX,ESP
0099a9f1 : PUSH EAX
0099a9f2 : LEA EAX,[ESP + 0xb8]
0099a9f9 : MOV FS:[0x0],EAX
0099a9ff : MOV ESI,ECX
0099aa01 : MOV EAX,dword ptr [ESI + 0x8]
0099aa04 : MOVZX EDI,word ptr [EAX + 0x78]
0099aa08 : LEA ECX,[ESP + 0x44]
0099aa0c : PUSH ECX
0099aa0d : CALL 0x00412470
0099aa12 : MOV dword ptr [ESP + 0xc0],0x0
0099aa1d : MOV EAX,dword ptr [ESI]
0099aa1f : LEA EDX,[ESP + 0x44]
0099aa23 : PUSH EDX
0099aa24 : PUSH EDI
0099aa25 : CALL 0x0099bce0
0099aa2a : TEST AL,AL
0099aa2c : JNZ 0x0099aae9
0099aa32 : PUSH 0xc87d30
0099aa37 : LEA ECX,[ESP + 0x10]
0099aa3b : CALL 0x00406460
0099aa40 : MOV byte ptr [ESP + 0xc0],0x1
0099aa48 : MOV EAX,[0x00da9894]
0099aa4d : MOV EAX,dword ptr [EAX]
0099aa4f : MOV ESI,dword ptr [EAX + 0x1a8]
0099aa55 : LEA ECX,[ESP + 0xc]
0099aa59 : PUSH ECX
0099aa5a : MOV ECX,dword ptr [0x0172491c]
0099aa60 : LEA EDI,[ESP + 0x2c]
0099aa64 : CALL 0x0081d120
0099aa69 : MOV byte ptr [ESP + 0xc0],0x2
0099aa71 : MOV EDX,dword ptr [ESI]
0099aa73 : PUSH 0x3
0099aa75 : PUSH EAX
0099aa76 : MOV EAX,dword ptr [EDX + 0x44]
0099aa79 : MOV ECX,ESI
0099aa7b : CALL EAX
0099aa7d : MOV byte ptr [ESP + 0xc0],0x1
0099aa85 : MOV ESI,0x8
0099aa8a : CMP dword ptr [ESP + 0x40],ESI
0099aa8e : JC 0x0099aa99
0099aa90 : MOV ECX,dword ptr [ESP + 0x2c]
0099aa94 : CALL 0x006f04e0
0099aa99 : XOR ECX,ECX
0099aa9b : XOR EDI,EDI
0099aa9d : MOV dword ptr [ESP + 0x40],0x7
0099aaa5 : MOV dword ptr [ESP + 0x3c],EDI
0099aaa9 : MOV word ptr [ESP + 0x2c],CX
0099aaae : MOV byte ptr [ESP + 0xc0],CL
0099aab5 : CMP dword ptr [ESP + 0x24],ESI
0099aab9 : JC 0x0099aac4
0099aabb : MOV ECX,dword ptr [ESP + 0x10]
0099aabf : CALL 0x006f04e0
0099aac4 : XOR EDX,EDX
0099aac6 : MOV dword ptr [ESP + 0x24],0x7
0099aace : MOV dword ptr [ESP + 0x20],EDI
0099aad2 : MOV word ptr [ESP + 0x10],DX
0099aad7 : MOV dword ptr [ESP + 0xc0],0xffffffff
0099aae2 : LEA EAX,[ESP + 0x44]
0099aae6 : PUSH EAX
0099aae7 : JMP 0x0099ab4a
0099aae9 : MOV ECX,dword ptr [ESP + 0xa4]
0099aaf0 : MOV EDX,dword ptr [ESP + 0x44]
0099aaf4 : PUSH ECX
0099aaf5 : PUSH EDX
0099aaf6 : CALL 0x00998830
0099aafb : MOV EAX,dword ptr [ESP + 0xa4]
0099ab02 : TEST AL,AL
0099ab04 : JBE 0x0099ab3a
0099ab06 : TEST AH,AH
0099ab08 : JNZ 0x0099ab3a
0099ab0a : CMP dword ptr [ESP + 0x84],0x8
0099ab12 : MOV ECX,dword ptr [ESP + 0x70]
0099ab16 : JNC 0x0099ab1c
0099ab18 : LEA ECX,[ESP + 0x70]
0099ab1c : MOV EAX,[0x00da9894]
0099ab21 : MOV EAX,dword ptr [EAX]
0099ab23 : MOV EAX,dword ptr [EAX + 0x1a8]
0099ab29 : PUSH ECX
0099ab2a : PUSH 0x3
0099ab2c : PUSH EAX
0099ab2d : MOV ECX,0xc87cfc
0099ab32 : CALL 0x009adfc0
0099ab37 : ADD ESP,0xc
0099ab3a : MOV dword ptr [ESP + 0xc0],0xffffffff
0099ab45 : LEA ECX,[ESP + 0x44]
0099ab49 : PUSH ECX
0099ab4a : CALL 0x00411330
0099ab4f : MOV ECX,dword ptr [ESP + 0xb8]
0099ab56 : MOV dword ptr FS:[0x0],ECX
0099ab5d : POP ECX
0099ab5e : POP EDI
0099ab5f : POP ESI
0099ab60 : MOV ECX,dword ptr [ESP + 0xa4]
0099ab67 : XOR ECX,ESP
0099ab69 : CALL 0x00633e6b
0099ab6e : MOV ESP,EBP
0099ab70 : POP EBP
0099ab71 : RET
