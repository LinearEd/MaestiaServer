PROGRAM  : Maestia.exe
FUNCTION : FUN_00840190
ENTRY    : 00840190
BODY     : [[00840190, 00840585]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00840190(char param_1)

{
  int *piVar1;
  undefined1 uVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  uint uVar6;
  char cVar7;
  int *in_ECX;
  undefined4 unaff_EBX;
  undefined4 uStack_e0;
  int iStack_dc;
  int *piStack_d8;
  int iStack_d4;
  int *piStack_d0;
  int *piStack_cc;
  undefined4 uStack_c8;
  undefined1 *puStack_c4;
  int *piStack_c0;
  undefined4 *puStack_bc;
  wchar_t *pwStack_b8;
  undefined1 *puStack_b4;
  undefined4 local_a0;
  int local_9c;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  undefined4 local_8c;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined1 local_50 [28];
  undefined1 local_34 [24];
  undefined4 uStack_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b37b3f;
  local_14 = ExceptionList;
  puStack_b4 = (undefined1 *)(DAT_00d66fa0 ^ (uint)&stack0xffffff50);
  ExceptionList = &local_14;
  piVar1 = in_ECX + 3;
  pwStack_b8 = L"";
  puStack_bc = (undefined4 *)0x8401d8;
  iVar5 = FUN_00405bb0();
  if (iVar5 == 0) {
    ExceptionList = local_14;
    return;
  }
  pwStack_b8 = (wchar_t *)in_ECX[0xfd];
  if (pwStack_b8 == (wchar_t *)0x0) {
    if (in_ECX[0xfe] == 0) {
      if ((param_1 == '\0') || (in_ECX[0xfb] == 0)) {
        pwStack_b8 = L"NamePad";
        puStack_bc = (undefined4 *)0x8402bf;
        FUN_00406460();
        local_c = 1;
        pwStack_b8 = (wchar_t *)&local_94;
        puStack_bc = &local_60;
        local_94 = 0x3f800000;
        local_90 = 0x3f800000;
        local_8c = 0x3f800000;
        local_54 = 0x3f800000;
        local_9c = in_ECX[0x106];
        piStack_c0 = &local_a0;
        local_60 = 0;
        local_5c = 0;
        local_58 = 0;
        local_a0 = 0;
        local_98 = 0;
        puStack_c4 = local_34;
        uStack_c8 = 0x84033d;
        iVar5 = (**(code **)(*(int *)in_ECX[0xfa] + 0x20))();
        in_ECX[0xfd] = iVar5;
      }
      else {
        pwStack_b8 = L"NamePad";
        puStack_bc = (undefined4 *)0x84021d;
        FUN_00406460();
        local_c = 0;
        pwStack_b8 = (wchar_t *)&local_7c;
        puStack_bc = &local_70;
        local_7c = 0x3f800000;
        local_78 = 0x3f800000;
        local_74 = 0x3f800000;
        local_64 = 0x3f800000;
        piStack_c0 = &local_88;
        local_70 = 0;
        local_6c = 0;
        local_68 = 0;
        local_88 = 0;
        local_84 = 0x41700000;
        local_80 = 0;
        puStack_c4 = local_50;
        uStack_c8 = 0x840294;
        iVar5 = (**(code **)(*(int *)in_ECX[0xfb] + 0x20))();
        in_ECX[0xfd] = iVar5;
      }
      uStack_1c = 0xffffffff;
      uStack_c8 = 0x84035a;
      FUN_00406560();
      uStack_c8 = 0;
      piStack_d0 = (int *)0x840368;
      piStack_cc = piVar1;
      iVar5 = FUN_007cb9f0();
      puStack_b4 = (undefined1 *)&uStack_e0;
      in_ECX[0xfe] = iVar5;
      FUN_00405660(in_ECX + 0x11);
      uStack_1c = 0xffffffff;
      FUN_0043d5a0(in_ECX[0xfe]);
      *(int *)(in_ECX[0xfe] + 0x2fc) = in_ECX[0x10c];
      piStack_cc = (int *)in_ECX[0xfe];
      uStack_c8 = 1;
      piStack_d0 = (int *)0x8403cd;
      (**(code **)(*(int *)in_ECX[0xfd] + 0xec))();
      iStack_d4 = 0x8403d9;
      piStack_d0 = piVar1;
      iStack_d4 = FUN_007cb920();
      in_ECX[0x100] = iStack_d4;
      piStack_d0 = (int *)0x1;
      piStack_d8 = (int *)0x8403f2;
      (**(code **)(*(int *)in_ECX[0xfd] + 0xec))();
      iStack_dc = 0x8403fe;
      piStack_d8 = piVar1;
      iStack_dc = FUN_007cb850();
      in_ECX[0x101] = iStack_dc;
      piStack_d8 = (int *)0x1;
      uStack_e0 = 0x840417;
      (**(code **)(*(int *)in_ECX[0xfd] + 0xec))();
      goto LAB_00840455;
    }
  }
  else {
    iVar5 = in_ECX[0x106];
    *(undefined4 *)((int)pwStack_b8 + 0x68) = 0;
    *(int *)((int)pwStack_b8 + 0x6c) = iVar5;
    *(undefined4 *)((int)pwStack_b8 + 0x70) = 0;
    *(undefined1 *)((int)pwStack_b8 + 0x5d) = 1;
    *(undefined1 *)((int)pwStack_b8 + 0x134) = 1;
    *(undefined1 *)((int)pwStack_b8 + 0x5c) = 1;
    if (*(int **)((int)pwStack_b8 + 0x2c) != (int *)0x0) {
      puStack_bc = (undefined4 *)0x840455;
      (**(code **)(**(int **)((int)pwStack_b8 + 0x2c) + 0x60))();
    }
LAB_00840455:
    *(undefined1 *)(in_ECX[0xfd] + 0x25a) = 0;
  }
  iVar5 = in_ECX[0xfe];
  pwStack_b8 = (wchar_t *)0xffffffff;
  puStack_bc = (undefined4 *)0x0;
  in_ECX[0x10b] = -0x7fffc0;
  puStack_c4 = (undefined1 *)0x840482;
  piStack_c0 = piVar1;
  uVar6 = FUN_00405eb0();
  *(undefined4 *)(iVar5 + 500) = 0xff800040;
  if ((char)in_ECX[0x533] != '\0') {
    if ((((*DAT_00da9894 == 0) || (uVar6 = *(uint *)(*DAT_00da9894 + 0x164), uVar6 == 0)) ||
        (*(int *)(uVar6 + 0x38) == 0)) || (*(char *)(uVar6 + 0x32) == '\0')) {
      cVar7 = *(char *)(DAT_017248cc + 0xe);
      uVar6 = DAT_017248cc;
    }
    else {
      cVar7 = *(char *)(*(int *)(uVar6 + 0x38) + 0x42);
    }
    if ((cVar7 != '\0') && ((char)in_ECX[0xeb] == '\0')) {
      pwStack_b8 = (wchar_t *)CONCAT31((int3)(uVar6 >> 8),1);
      goto LAB_008404d8;
    }
  }
  pwStack_b8 = (wchar_t *)(uVar6 & 0xffffff00);
LAB_008404d8:
  puStack_bc = (undefined4 *)0x8404e5;
  (**(code **)(*in_ECX + 0x2d0))();
  fVar3 = (float)in_ECX[0x29];
  iVar5 = in_ECX[0xfe];
  if (in_ECX[0x29] < 0) {
    fVar3 = fVar3 + 4.2949673e+09;
  }
  fVar4 = (float)in_ECX[0x2c];
  if (in_ECX[0x2c] < 0) {
    fVar4 = fVar4 + 4.2949673e+09;
  }
  *(float *)(iVar5 + 0x294) = fVar3 / fVar4;
  *(float *)(iVar5 + 0x298) = fVar3 / fVar4;
  if (((*DAT_00da9894 == 0) || (iVar5 = *(int *)(*DAT_00da9894 + 0x164), iVar5 == 0)) ||
     ((*(int *)(iVar5 + 0x38) == 0 || (*(char *)(iVar5 + 0x32) == '\0')))) {
    uVar2 = *(undefined1 *)(DAT_017248cc + 0x12);
  }
  else {
    uVar2 = *(undefined1 *)(*(int *)(iVar5 + 0x38) + 0x46);
  }
  puStack_bc = (undefined4 *)CONCAT31((int3)((uint)unaff_EBX >> 8),uVar2);
  piStack_c0 = (int *)0x84056e;
  (**(code **)(*in_ECX + 0x2dc))();
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
00840190 : PUSH EBP
00840191 : MOV EBP,ESP
00840193 : AND ESP,0xfffffff8
00840196 : PUSH -0x1
00840198 : PUSH 0xb37b3f
0084019d : MOV EAX,FS:[0x0]
008401a3 : PUSH EAX
008401a4 : SUB ESP,0x90
008401aa : PUSH EBX
008401ab : PUSH ESI
008401ac : PUSH EDI
008401ad : MOV EAX,[0x00d66fa0]
008401b2 : XOR EAX,ESP
008401b4 : PUSH EAX
008401b5 : LEA EAX,[ESP + 0xa0]
008401bc : MOV FS:[0x0],EAX
008401c2 : MOV ESI,ECX
008401c4 : MOV EAX,dword ptr [ESI + 0x20]
008401c7 : LEA EBX,[ESI + 0xc]
008401ca : PUSH 0xc3a1f4
008401cf : XOR EDI,EDI
008401d1 : MOV ECX,EBX
008401d3 : CALL 0x00405bb0
008401d8 : TEST EAX,EAX
008401da : JZ 0x0084056e
008401e0 : MOV EAX,dword ptr [ESI + 0x3f4]
008401e6 : TEST EAX,EAX
008401e8 : JNZ 0x0084041d
008401ee : CMP dword ptr [ESI + 0x3f8],EDI
008401f4 : JNZ 0x00840419
008401fa : CMP byte ptr [EBP + 0x8],AL
008401fd : JZ 0x008402ae
00840203 : CMP dword ptr [ESI + 0x3ec],EDI
00840209 : JZ 0x008402ae
0084020f : PUSH 0xc3a300
00840214 : LEA ECX,[ESP + 0x68]
00840218 : CALL 0x00406460
0084021d : MOV dword ptr [ESP + 0xa8],EDI
00840224 : MOVSS XMM1,dword ptr [0x00c10fc4]
0084022c : XORPS XMM0,XMM0
0084022f : MOV ECX,dword ptr [ESI + 0x3ec]
00840235 : LEA EDX,[ESP + 0x38]
00840239 : PUSH EDX
0084023a : LEA EDX,[ESP + 0x48]
0084023e : PUSH EDX
0084023f : MOVSS dword ptr [ESP + 0x40],XMM1
00840245 : MOVSS dword ptr [ESP + 0x44],XMM1
0084024b : MOVSS dword ptr [ESP + 0x48],XMM1
00840251 : MOVSS dword ptr [ESP + 0x58],XMM1
00840257 : MOVSS XMM1,dword ptr [0x00cdf234]
0084025f : LEA EDX,[ESP + 0x34]
00840263 : PUSH EDX
00840264 : MOVSS dword ptr [ESP + 0x50],XMM0
0084026a : MOVSS dword ptr [ESP + 0x54],XMM0
00840270 : MOVSS dword ptr [ESP + 0x58],XMM0
00840276 : MOVSS dword ptr [ESP + 0x38],XMM0
0084027c : MOVSS dword ptr [ESP + 0x3c],XMM1
00840282 : MOVSS dword ptr [ESP + 0x40],XMM0
00840288 : MOV EAX,dword ptr [ECX]
0084028a : MOV EAX,dword ptr [EAX + 0x20]
0084028d : LEA EDX,[ESP + 0x70]
00840291 : PUSH EDX
00840292 : CALL EAX
00840294 : MOV dword ptr [ESI + 0x3f4],EAX
0084029a : MOV dword ptr [ESP + 0xa8],0xffffffff
008402a5 : LEA ECX,[ESP + 0x64]
008402a9 : JMP 0x00840355
008402ae : PUSH 0xc3a310
008402b3 : LEA ECX,[ESP + 0x84]
008402ba : CALL 0x00406460
008402bf : MOV dword ptr [ESP + 0xa8],0x1
008402ca : MOVSS XMM1,dword ptr [0x00c10fc4]
008402d2 : XORPS XMM0,XMM0
008402d5 : MOV ECX,dword ptr [ESI + 0x3e8]
008402db : LEA EAX,[ESP + 0x20]
008402df : PUSH EAX
008402e0 : LEA EAX,[ESP + 0x58]
008402e4 : PUSH EAX
008402e5 : MOVSS dword ptr [ESP + 0x28],XMM1
008402eb : MOVSS dword ptr [ESP + 0x2c],XMM1
008402f1 : MOVSS dword ptr [ESP + 0x30],XMM1
008402f7 : MOVSS dword ptr [ESP + 0x68],XMM1
008402fd : MOVSS XMM1,dword ptr [ESI + 0x418]
00840305 : LEA EAX,[ESP + 0x1c]
00840309 : PUSH EAX
0084030a : MOVSS dword ptr [ESP + 0x60],XMM0
00840310 : MOVSS dword ptr [ESP + 0x64],XMM0
00840316 : MOVSS dword ptr [ESP + 0x68],XMM0
0084031c : MOVSS dword ptr [ESP + 0x20],XMM0
00840322 : MOVSS dword ptr [ESP + 0x24],XMM1
00840328 : MOVSS dword ptr [ESP + 0x28],XMM0
0084032e : MOV EDX,dword ptr [ECX]
00840330 : MOV EDX,dword ptr [EDX + 0x20]
00840333 : LEA EAX,[ESP + 0x8c]
0084033a : PUSH EAX
0084033b : CALL EDX
0084033d : MOV dword ptr [ESI + 0x3f4],EAX
00840343 : MOV dword ptr [ESP + 0xa8],0xffffffff
0084034e : LEA ECX,[ESP + 0x80]
00840355 : CALL 0x00406560
0084035a : MOV ECX,dword ptr [0x017251d0]
00840360 : PUSH 0x0
00840362 : PUSH EBX
00840363 : CALL 0x007cb9f0
00840368 : SUB ESP,0x1c
0084036b : MOV dword ptr [ESI + 0x3f8],EAX
00840371 : LEA EAX,[ESI + 0x44]
00840374 : MOV ECX,ESP
00840376 : MOV dword ptr [ESP + 0x2c],ESP
0084037a : PUSH EAX
0084037b : CALL 0x00405660
00840380 : MOV dword ptr [ESP + 0xc4],0x2
0084038b : MOV ECX,dword ptr [ESI + 0x3f8]
00840391 : PUSH ECX
00840392 : MOV dword ptr [ESP + 0xc8],0xffffffff
0084039d : CALL 0x0043d5a0
008403a2 : MOV EDX,dword ptr [ESI + 0x3f8]
008403a8 : MOV EAX,dword ptr [ESI + 0x430]
008403ae : MOV dword ptr [EDX + 0x2fc],EAX
008403b4 : MOV ECX,dword ptr [ESI + 0x3f4]
008403ba : MOV EDX,dword ptr [ECX]
008403bc : MOV EAX,dword ptr [ESI + 0x3f8]
008403c2 : MOV EDX,dword ptr [EDX + 0xec]
008403c8 : PUSH 0x1
008403ca : PUSH EAX
008403cb : CALL EDX
008403cd : MOV ECX,dword ptr [0x017251d0]
008403d3 : PUSH EBX
008403d4 : CALL 0x007cb920
008403d9 : MOV ECX,dword ptr [ESI + 0x3f4]
008403df : MOV dword ptr [ESI + 0x400],EAX
008403e5 : MOV EDX,dword ptr [ECX]
008403e7 : PUSH 0x1
008403e9 : PUSH EAX
008403ea : MOV EAX,dword ptr [EDX + 0xec]
008403f0 : CALL EAX
008403f2 : MOV ECX,dword ptr [0x017251d0]
008403f8 : PUSH EBX
008403f9 : CALL 0x007cb850
008403fe : MOV ECX,dword ptr [ESI + 0x3f4]
00840404 : MOV dword ptr [ESI + 0x404],EAX
0084040a : MOV EDX,dword ptr [ECX]
0084040c : PUSH 0x1
0084040e : PUSH EAX
0084040f : MOV EAX,dword ptr [EDX + 0xec]
00840415 : CALL EAX
00840417 : JMP 0x00840455
00840419 : TEST EAX,EAX
0084041b : JZ 0x00840462
0084041d : MOVSS XMM0,dword ptr [ESI + 0x418]
00840425 : XORPS XMM1,XMM1
00840428 : MOVSS dword ptr [EAX + 0x68],XMM1
0084042d : MOVSS dword ptr [EAX + 0x6c],XMM0
00840432 : MOVSS dword ptr [EAX + 0x70],XMM1
00840437 : MOV ECX,dword ptr [EAX + 0x2c]
0084043a : MOV byte ptr [EAX + 0x5d],0x1
0084043e : MOV byte ptr [EAX + 0x134],0x1
00840445 : MOV byte ptr [EAX + 0x5c],0x1
00840449 : TEST ECX,ECX
0084044b : JZ 0x00840455
0084044d : MOV EDX,dword ptr [ECX]
0084044f : PUSH EAX
00840450 : MOV EAX,dword ptr [EDX + 0x60]
00840453 : CALL EAX
00840455 : MOV ECX,dword ptr [ESI + 0x3f4]
0084045b : MOV byte ptr [ECX + 0x25a],0x0
00840462 : MOV EDI,dword ptr [ESI + 0x3f8]
00840468 : PUSH -0x1
0084046a : PUSH 0x0
0084046c : PUSH EBX
0084046d : LEA ECX,[EDI + 0x1d8]
00840473 : MOV dword ptr [ESI + 0x42c],0xff800040
0084047d : CALL 0x00405eb0
00840482 : MOV dword ptr [EDI + 0x1f4],0xff800040
0084048c : CMP byte ptr [ESI + 0x14cc],0x0
00840493 : JZ 0x008404d6
00840495 : MOV EDX,dword ptr [0x00da9894]
0084049b : MOV EAX,dword ptr [EDX]
0084049d : TEST EAX,EAX
0084049f : JZ 0x008404bd
008404a1 : MOV EAX,dword ptr [EAX + 0x164]
008404a7 : TEST EAX,EAX
008404a9 : JZ 0x008404bd
008404ab : MOV ECX,dword ptr [EAX + 0x38]
008404ae : TEST ECX,ECX
008404b0 : JZ 0x008404bd
008404b2 : CMP byte ptr [EAX + 0x32],0x0
008404b6 : JZ 0x008404bd
008404b8 : MOV CL,byte ptr [ECX + 0x42]
008404bb : JMP 0x008404c5
008404bd : MOV EAX,[0x017248cc]
008404c2 : MOV CL,byte ptr [EAX + 0xe]
008404c5 : TEST CL,CL
008404c7 : JZ 0x008404d6
008404c9 : CMP byte ptr [ESI + 0x3ac],0x0
008404d0 : JNZ 0x008404d6
008404d2 : MOV AL,0x1
008404d4 : JMP 0x008404d8
008404d6 : XOR AL,AL
008404d8 : MOV EDX,dword ptr [ESI]
008404da : PUSH EAX
008404db : MOV EAX,dword ptr [EDX + 0x2d0]
008404e1 : MOV ECX,ESI
008404e3 : CALL EAX
008404e5 : FILD dword ptr [ESI + 0xa4]
008404eb : MOV ECX,dword ptr [ESI + 0xa4]
008404f1 : MOV EAX,dword ptr [ESI + 0x3f8]
008404f7 : TEST ECX,ECX
008404f9 : JGE 0x00840501
008404fb : FADD float ptr [0x00cdf0e0]
00840501 : MOV EDX,dword ptr [ESI + 0xb0]
00840507 : FILD dword ptr [ESI + 0xb0]
0084050d : TEST EDX,EDX
0084050f : JGE 0x00840517
00840511 : FADD float ptr [0x00cdf0e0]
00840517 : FDIVP
00840519 : FST float ptr [EAX + 0x294]
0084051f : FSTP float ptr [EAX + 0x298]
00840525 : MOV EAX,[0x00da9894]
0084052a : MOV EAX,dword ptr [EAX]
0084052c : TEST EAX,EAX
0084052e : JZ 0x00840550
00840530 : MOV EAX,dword ptr [EAX + 0x164]
00840536 : TEST EAX,EAX
00840538 : JZ 0x00840550
0084053a : MOV ECX,dword ptr [EAX + 0x38]
0084053d : TEST ECX,ECX
0084053f : JZ 0x00840550
00840541 : CMP byte ptr [EAX + 0x32],0x0
00840545 : JZ 0x00840550
00840547 : MOV CL,byte ptr [ECX + 0x46]
0084054a : MOV byte ptr [ESP + 0x10],CL
0084054e : JMP 0x0084055d
00840550 : MOV EDX,dword ptr [0x017248cc]
00840556 : MOV AL,byte ptr [EDX + 0x12]
00840559 : MOV byte ptr [ESP + 0x10],AL
0084055d : MOV EDX,dword ptr [ESI]
0084055f : MOV EAX,dword ptr [ESP + 0x10]
00840563 : MOV EDX,dword ptr [EDX + 0x2dc]
00840569 : PUSH EAX
0084056a : MOV ECX,ESI
0084056c : CALL EDX
0084056e : MOV ECX,dword ptr [ESP + 0xa0]
00840575 : MOV dword ptr FS:[0x0],ECX
0084057c : POP ECX
0084057d : POP EDI
0084057e : POP ESI
0084057f : POP EBX
00840580 : MOV ESP,EBP
00840582 : POP EBP
00840583 : RET 0x4
