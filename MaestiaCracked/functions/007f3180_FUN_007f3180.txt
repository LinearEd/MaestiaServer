PROGRAM  : Maestia.exe
FUNCTION : FUN_007f3180
ENTRY    : 007f3180
BODY     : [[007f3180, 007f3408]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f3180(void)

{
  int in_ECX;
  float *pfVar1;
  float10 fVar2;
  int iVar3;
  float fStack_54;
  float fStack_50;
  float fStack_4c;
  float local_48;
  float fStack_44;
  float fStack_40;
  float fStack_3c;
  float fStack_38;
  float fStack_34;
  float fStack_30;
  float fStack_2c;
  float fStack_28;
  float fStack_24;
  float fStack_20;
  float fStack_1c;
  float fStack_18;
  
  if (*(char *)(in_ECX + 0x156) != '\0') {
    local_48 = 0.0;
    D3DXMatrixOrthoLH(&local_48,*(undefined4 *)(in_ECX + 0x68),*(undefined4 *)(in_ECX + 0x68),0,
                      0x46ea6000);
    D3DXMatrixMultiply(&local_48,in_ECX + 0xb4,&local_48);
    *(float *)(in_ECX + 0xf4) = fStack_54 + local_48;
    *(float *)(in_ECX + 0xf8) = fStack_44 + fStack_38;
    *(float *)(in_ECX + 0xfc) = fStack_34 + fStack_28;
    *(float *)(in_ECX + 0x100) = fStack_24 + fStack_18;
    *(float *)(in_ECX + 0x108) = fStack_38 - fStack_44;
    *(float *)(in_ECX + 0x10c) = fStack_28 - fStack_34;
    *(float *)(in_ECX + 0x110) = fStack_18 - fStack_24;
    *(float *)(in_ECX + 0x134) = local_48 - fStack_50;
    *(float *)(in_ECX + 0x144) = fStack_50 + local_48;
    *(float *)(in_ECX + 0x138) = fStack_38 - fStack_40;
    *(float *)(in_ECX + 0x148) = fStack_40 + fStack_38;
    *(float *)(in_ECX + 0x104) = local_48 - fStack_54;
    *(float *)(in_ECX + 0x13c) = fStack_28 - fStack_30;
    *(float *)(in_ECX + 0x14c) = fStack_30 + fStack_28;
    *(float *)(in_ECX + 0x114) = fStack_4c + local_48;
    *(float *)(in_ECX + 0x140) = fStack_18 - fStack_20;
    *(float *)(in_ECX + 0x150) = fStack_20 + fStack_18;
    *(float *)(in_ECX + 0x118) = fStack_3c + fStack_38;
    *(float *)(in_ECX + 0x11c) = fStack_2c + fStack_28;
    *(float *)(in_ECX + 0x120) = fStack_1c + fStack_18;
    *(float *)(in_ECX + 0x124) = local_48 - fStack_4c;
    *(float *)(in_ECX + 0x128) = fStack_38 - fStack_3c;
    *(float *)(in_ECX + 300) = fStack_28 - fStack_2c;
    *(float *)(in_ECX + 0x130) = fStack_18 - fStack_1c;
    iVar3 = 6;
    pfVar1 = (float *)(in_ECX + 0x100);
    do {
      fVar2 = (float10)FUN_0040f460(pfVar1[-1] * pfVar1[-1] + pfVar1[-3] * pfVar1[-3] +
                                    pfVar1[-2] * pfVar1[-2]);
      D3DXVec3Normalize(pfVar1 + -3,pfVar1 + -3);
      iVar3 = iVar3 + -1;
      *pfVar1 = *pfVar1 / (float)fVar2;
      pfVar1 = pfVar1 + 4;
    } while (iVar3 != 0);
    *(undefined1 *)(in_ECX + 0x156) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007f3180 : PUSH EBP
007f3181 : MOV EBP,ESP
007f3183 : AND ESP,0xfffffff8
007f3186 : SUB ESP,0x4c
007f3189 : PUSH EBX
007f318a : PUSH ESI
007f318b : MOV ESI,ECX
007f318d : CMP byte ptr [ESI + 0x156],0x0
007f3194 : PUSH EDI
007f3195 : JZ 0x007f3402
007f319b : FLD float ptr [ESI + 0x68]
007f319e : XORPS XMM0,XMM0
007f31a1 : FLD float ptr [0x00cdf1fc]
007f31a7 : SUB ESP,0x10
007f31aa : FSTP float ptr [ESP + 0xc]
007f31ae : LEA EAX,[ESP + 0x28]
007f31b2 : FLDZ
007f31b4 : MOVSS dword ptr [ESP + 0x28],XMM0
007f31ba : FSTP float ptr [ESP + 0x8]
007f31be : FST float ptr [ESP + 0x4]
007f31c2 : FSTP float ptr [ESP]
007f31c5 : PUSH EAX
007f31c6 : CALL 0x00664c6c
007f31cb : LEA ECX,[ESP + 0x18]
007f31cf : PUSH ECX
007f31d0 : LEA EDX,[ESI + 0xb4]
007f31d6 : PUSH EDX
007f31d7 : MOV EAX,ECX
007f31d9 : PUSH EAX
007f31da : CALL 0x004ff752
007f31df : MOVSS XMM0,dword ptr [ESP + 0x24]
007f31e5 : MOVSS XMM4,dword ptr [ESP + 0x18]
007f31eb : MOVSS XMM5,dword ptr [ESP + 0x28]
007f31f1 : MOVSS XMM6,dword ptr [ESP + 0x38]
007f31f7 : MOVSS XMM7,dword ptr [ESP + 0x48]
007f31fd : MOVAPS XMM1,XMM4
007f3200 : MOVAPS XMM2,XMM5
007f3203 : ADDSS XMM1,XMM0
007f3207 : MOVAPS XMM3,XMM6
007f320a : MOVSS dword ptr [ESI + 0xf4],XMM1
007f3212 : MOVSS XMM1,dword ptr [ESP + 0x34]
007f3218 : ADDSS XMM2,XMM1
007f321c : MOVSS dword ptr [ESI + 0xf8],XMM2
007f3224 : MOVSS XMM2,dword ptr [ESP + 0x44]
007f322a : ADDSS XMM3,XMM2
007f322e : MOVSS dword ptr [ESI + 0xfc],XMM3
007f3236 : MOVSS XMM3,dword ptr [ESP + 0x54]
007f323c : ADDSS XMM7,XMM3
007f3240 : MOVSS dword ptr [ESI + 0x100],XMM7
007f3248 : LEA EDI,[ESI + 0x100]
007f324e : MOVAPS XMM7,XMM0
007f3251 : SUBSS XMM7,XMM4
007f3255 : MOVAPS XMM4,XMM1
007f3258 : SUBSS XMM4,XMM5
007f325c : MOVSS dword ptr [ESI + 0x108],XMM4
007f3264 : MOVAPS XMM4,XMM2
007f3267 : SUBSS XMM4,XMM6
007f326b : MOVSS dword ptr [ESI + 0x10c],XMM4
007f3273 : MOVAPS XMM4,XMM3
007f3276 : SUBSS XMM4,dword ptr [ESP + 0x48]
007f327c : MOVSS dword ptr [ESI + 0x110],XMM4
007f3284 : MOVSS XMM4,dword ptr [ESP + 0x1c]
007f328a : MOVAPS XMM5,XMM0
007f328d : SUBSS XMM5,XMM4
007f3291 : MOVSS dword ptr [ESI + 0x134],XMM5
007f3299 : MOVSS XMM5,dword ptr [ESP + 0x2c]
007f329f : ADDSS XMM4,XMM0
007f32a3 : MOVSS dword ptr [ESI + 0x144],XMM4
007f32ab : MOVSS XMM4,dword ptr [ESP + 0x3c]
007f32b1 : MOVAPS XMM6,XMM1
007f32b4 : SUBSS XMM6,XMM5
007f32b8 : MOVSS dword ptr [ESI + 0x138],XMM6
007f32c0 : ADDSS XMM5,XMM1
007f32c4 : ADDSS XMM4,XMM2
007f32c8 : MOVAPS XMM6,XMM2
007f32cb : SUBSS XMM6,dword ptr [ESP + 0x3c]
007f32d1 : MOVSS dword ptr [ESI + 0x148],XMM5
007f32d9 : MOVSS dword ptr [ESI + 0x104],XMM7
007f32e1 : MOVSS dword ptr [ESI + 0x13c],XMM6
007f32e9 : MOVSS XMM6,dword ptr [ESP + 0x4c]
007f32ef : MOVSS dword ptr [ESI + 0x14c],XMM4
007f32f7 : MOVSS XMM4,dword ptr [ESP + 0x20]
007f32fd : MOVAPS XMM7,XMM3
007f3300 : SUBSS XMM7,XMM6
007f3304 : MOVAPS XMM5,XMM4
007f3307 : ADDSS XMM5,XMM0
007f330b : ADDSS XMM6,XMM3
007f330f : MOVSS dword ptr [ESI + 0x114],XMM5
007f3317 : MOVSS XMM5,dword ptr [ESP + 0x30]
007f331d : MOVSS dword ptr [ESI + 0x140],XMM7
007f3325 : MOVSS dword ptr [ESI + 0x150],XMM6
007f332d : MOVAPS XMM6,XMM5
007f3330 : ADDSS XMM6,XMM1
007f3334 : MOVSS dword ptr [ESI + 0x118],XMM6
007f333c : MOVSS XMM6,dword ptr [ESP + 0x40]
007f3342 : MOVAPS XMM7,XMM6
007f3345 : ADDSS XMM7,XMM2
007f3349 : MOVSS dword ptr [ESI + 0x11c],XMM7
007f3351 : MOVSS XMM7,dword ptr [ESP + 0x50]
007f3357 : ADDSS XMM7,XMM3
007f335b : SUBSS XMM3,dword ptr [ESP + 0x50]
007f3361 : SUBSS XMM0,XMM4
007f3365 : SUBSS XMM1,XMM5
007f3369 : SUBSS XMM2,XMM6
007f336d : MOVSS dword ptr [ESI + 0x120],XMM7
007f3375 : MOVSS dword ptr [ESI + 0x124],XMM0
007f337d : MOVSS dword ptr [ESI + 0x128],XMM1
007f3385 : MOVSS dword ptr [ESI + 0x12c],XMM2
007f338d : MOVSS dword ptr [ESI + 0x130],XMM3
007f3395 : MOV dword ptr [ESP + 0x10],0x6
007f339d : LEA ECX,[ECX]
007f33a0 : MOVSS XMM0,dword ptr [EDI + -0x4]
007f33a5 : MOVSS XMM2,dword ptr [EDI + -0xc]
007f33aa : MOVSS XMM1,dword ptr [EDI + -0x8]
007f33af : MOVAPS XMM3,XMM0
007f33b2 : MULSS XMM3,XMM0
007f33b6 : LEA EBX,[EDI + -0xc]
007f33b9 : MOVAPS XMM0,XMM2
007f33bc : MULSS XMM0,XMM2
007f33c0 : ADDSS XMM3,XMM0
007f33c4 : MOVAPS XMM0,XMM1
007f33c7 : MULSS XMM0,XMM1
007f33cb : PUSH ECX
007f33cc : ADDSS XMM3,XMM0
007f33d0 : MOVSS dword ptr [ESP],XMM3
007f33d5 : CALL 0x0040f460
007f33da : FSTP float ptr [ESP + 0x18]
007f33de : ADD ESP,0x4
007f33e1 : PUSH EBX
007f33e2 : PUSH EBX
007f33e3 : CALL 0x004ff722
007f33e8 : FLD float ptr [EDI]
007f33ea : FDIV float ptr [ESP + 0x14]
007f33ee : ADD EDI,0x10
007f33f1 : SUB dword ptr [ESP + 0x10],0x1
007f33f6 : FSTP float ptr [EDI + -0x10]
007f33f9 : JNZ 0x007f33a0
007f33fb : MOV byte ptr [ESI + 0x156],0x0
007f3402 : POP EDI
007f3403 : POP ESI
007f3404 : POP EBX
007f3405 : MOV ESP,EBP
007f3407 : POP EBP
007f3408 : RET
