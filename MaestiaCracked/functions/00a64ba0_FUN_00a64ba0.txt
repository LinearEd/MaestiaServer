PROGRAM  : Maestia.exe
FUNCTION : FUN_00a64ba0
ENTRY    : 00a64ba0
BODY     : [[00a64ba0, 00a64cd3]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00a64ba0(void)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  int unaff_ESI;
  undefined4 local_50 [6];
  undefined4 local_38;
  undefined4 local_34;
  undefined1 local_30 [28];
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b18e99;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (((*(char *)(unaff_ESI + 0x24) != '\0') &&
      (piVar1 = *(int **)(unaff_ESI + 0x38), piVar1 != (int *)0x0)) &&
     (*(char *)(unaff_ESI + 0x60) != '\0')) {
    local_14 = 0;
    iVar2 = (**(code **)(*piVar1 + 0x44))(piVar1,0,local_50,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    uVar3 = (**(code **)(**(int **)(unaff_ESI + 0x38) + 0x34))(*(int **)(unaff_ESI + 0x38));
    if (iVar2 == 0) {
      iVar2 = (**(code **)(**(int **)(DAT_017251ac + 0x18) + 0x5c))
                        (*(int **)(DAT_017251ac + 0x18),local_38,local_34,uVar3,0,local_50[0],0,
                         &local_14,0);
      if (iVar2 == 0) {
        iVar2 = (**(code **)(**(int **)(DAT_017251ac + 0x18) + 0x7c))
                          (*(int **)(DAT_017251ac + 0x18),*(undefined4 *)(unaff_ESI + 0x38),local_14
                          );
        if (-1 < iVar2) {
          (**(code **)(**(int **)(unaff_ESI + 0x38) + 8))(*(int **)(unaff_ESI + 0x38));
          *(undefined4 *)(unaff_ESI + 0x38) = local_14;
          *(undefined1 *)(unaff_ESI + 0x60) = 0;
          ExceptionList = local_10;
          return 1;
        }
        FUN_00406460(L"updatetexture failed");
        local_8 = 0;
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                    (L"AvaLib::AvaTerrainTxtr::ConvertSystemtoVideo",0xa5,local_30);
        }
        local_8 = 0xffffffff;
        FUN_00406560();
      }
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00a64ba0 : PUSH EBP
00a64ba1 : MOV EBP,ESP
00a64ba3 : PUSH -0x1
00a64ba5 : PUSH 0xb18e99
00a64baa : MOV EAX,FS:[0x0]
00a64bb0 : PUSH EAX
00a64bb1 : SUB ESP,0x44
00a64bb4 : PUSH EDI
00a64bb5 : MOV EAX,[0x00d66fa0]
00a64bba : XOR EAX,EBP
00a64bbc : PUSH EAX
00a64bbd : LEA EAX,[EBP + -0xc]
00a64bc0 : MOV FS:[0x0],EAX
00a64bc6 : CMP byte ptr [ESI + 0x24],0x0
00a64bca : JZ 0x00a64c9b
00a64bd0 : MOV EAX,dword ptr [ESI + 0x38]
00a64bd3 : TEST EAX,EAX
00a64bd5 : JZ 0x00a64c9b
00a64bdb : CMP byte ptr [ESI + 0x60],0x0
00a64bdf : JZ 0x00a64c9b
00a64be5 : LEA EDX,[EBP + -0x4c]
00a64be8 : PUSH EDX
00a64be9 : MOV dword ptr [EBP + -0x10],0x0
00a64bf0 : MOV ECX,dword ptr [EAX]
00a64bf2 : PUSH 0x0
00a64bf4 : PUSH EAX
00a64bf5 : MOV EAX,dword ptr [ECX + 0x44]
00a64bf8 : CALL EAX
00a64bfa : MOV EDI,EAX
00a64bfc : MOV EAX,dword ptr [ESI + 0x38]
00a64bff : MOV ECX,dword ptr [EAX]
00a64c01 : MOV EDX,dword ptr [ECX + 0x34]
00a64c04 : PUSH EAX
00a64c05 : CALL EDX
00a64c07 : TEST EDI,EDI
00a64c09 : JNZ 0x00a64c9b
00a64c0f : MOV ECX,dword ptr [0x017251ac]
00a64c15 : MOV ECX,dword ptr [ECX + 0x18]
00a64c18 : MOV EDX,dword ptr [ECX]
00a64c1a : PUSH EDI
00a64c1b : LEA EDI,[EBP + -0x10]
00a64c1e : PUSH EDI
00a64c1f : MOV EDI,dword ptr [EBP + -0x4c]
00a64c22 : PUSH 0x0
00a64c24 : PUSH EDI
00a64c25 : PUSH 0x0
00a64c27 : PUSH EAX
00a64c28 : MOV EAX,dword ptr [EBP + -0x30]
00a64c2b : PUSH EAX
00a64c2c : MOV EAX,dword ptr [EBP + -0x34]
00a64c2f : PUSH EAX
00a64c30 : PUSH ECX
00a64c31 : MOV ECX,dword ptr [EDX + 0x5c]
00a64c34 : CALL ECX
00a64c36 : TEST EAX,EAX
00a64c38 : JNZ 0x00a64c9b
00a64c3a : MOV EDX,dword ptr [0x017251ac]
00a64c40 : MOV EAX,dword ptr [EDX + 0x18]
00a64c43 : MOV EDX,dword ptr [EBP + -0x10]
00a64c46 : MOV ECX,dword ptr [EAX]
00a64c48 : PUSH EDX
00a64c49 : MOV EDX,dword ptr [ESI + 0x38]
00a64c4c : PUSH EDX
00a64c4d : PUSH EAX
00a64c4e : MOV EAX,dword ptr [ECX + 0x7c]
00a64c51 : CALL EAX
00a64c53 : TEST EAX,EAX
00a64c55 : JGE 0x00a64cad
00a64c57 : PUSH 0xc0c4a0
00a64c5c : LEA ECX,[EBP + -0x2c]
00a64c5f : CALL 0x00406460
00a64c64 : MOV dword ptr [EBP + -0x4],0x0
00a64c6b : MOV ECX,dword ptr [0x00da98e8]
00a64c71 : MOV ECX,dword ptr [ECX]
00a64c73 : TEST ECX,ECX
00a64c75 : JZ 0x00a64c8c
00a64c77 : MOV EDX,dword ptr [ECX]
00a64c79 : MOV EDX,dword ptr [EDX + 0x14]
00a64c7c : LEA EAX,[EBP + -0x2c]
00a64c7f : PUSH EAX
00a64c80 : PUSH 0xa5
00a64c85 : PUSH 0xc0c4d0
00a64c8a : CALL EDX
00a64c8c : MOV dword ptr [EBP + -0x4],0xffffffff
00a64c93 : LEA ECX,[EBP + -0x2c]
00a64c96 : CALL 0x00406560
00a64c9b : XOR AL,AL
00a64c9d : MOV ECX,dword ptr [EBP + -0xc]
00a64ca0 : MOV dword ptr FS:[0x0],ECX
00a64ca7 : POP ECX
00a64ca8 : POP EDI
00a64ca9 : MOV ESP,EBP
00a64cab : POP EBP
00a64cac : RET
00a64cad : MOV EAX,dword ptr [ESI + 0x38]
00a64cb0 : MOV ECX,dword ptr [EAX]
00a64cb2 : MOV EDX,dword ptr [ECX + 0x8]
00a64cb5 : PUSH EAX
00a64cb6 : CALL EDX
00a64cb8 : MOV EAX,dword ptr [EBP + -0x10]
00a64cbb : MOV dword ptr [ESI + 0x38],EAX
00a64cbe : MOV byte ptr [ESI + 0x60],0x0
00a64cc2 : MOV AL,0x1
00a64cc4 : MOV ECX,dword ptr [EBP + -0xc]
00a64cc7 : MOV dword ptr FS:[0x0],ECX
00a64cce : POP ECX
00a64ccf : POP EDI
00a64cd0 : MOV ESP,EBP
00a64cd2 : POP EBP
00a64cd3 : RET
