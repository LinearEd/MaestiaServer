PROGRAM  : Maestia.exe
FUNCTION : FUN_00984430
ENTRY    : 00984430
BODY     : [[00984430, 00984798]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00984430(int param_1,int param_2,int param_3)

{
  ushort uVar1;
  undefined4 ***pppuVar2;
  char cVar3;
  uint uVar4;
  int iVar5;
  undefined4 *puVar6;
  float fVar7;
  undefined8 uVar8;
  uint local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  int local_74;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  int local_60;
  int local_5c;
  undefined1 local_55;
  float local_54;
  undefined1 local_50 [4];
  undefined4 *local_4c;
  undefined4 *local_48;
  undefined4 local_44;
  undefined4 ***local_40;
  undefined4 ***local_3c;
  int local_38;
  undefined1 local_34 [4];
  undefined4 ***local_30 [4];
  undefined4 local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar5 = DAT_00d7c54c;
  puStack_c = &LAB_00b671b9;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_74 = param_1;
  local_4c = (undefined4 *)0x0;
  local_48 = (undefined4 *)0x0;
  local_44 = 0;
  local_8 = 0;
  uVar1 = *(ushort *)(param_1 + 0x6c);
  if (*(ushort *)(param_1 + 0x6e) != uVar1) {
    uVar1 = *(ushort *)(param_1 + 0x6e);
  }
  local_3c = (undefined4 ***)(uint)uVar1;
  local_38 = param_2;
  local_40 = local_3c;
  local_18 = uVar4;
  FUN_004437f0(&local_38);
  if ((local_54 != *(float *)(iVar5 + 0x44)) && (*(int *)((int)local_54 + 0x10) != 0)) {
    local_38 = 0;
    local_6c = 0;
    local_68 = 0;
    local_64 = 0;
    local_8._0_1_ = 1;
    iVar5 = FUN_00824a20();
    local_8._0_1_ = 2;
    if (*(uint *)(iVar5 + 0x18) < 8) {
      iVar5 = iVar5 + 4;
    }
    else {
      iVar5 = *(int *)(iVar5 + 4);
    }
    FUN_00406460(iVar5);
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (DAT_00da93ec == 0) {
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_1c = 7;
      local_20 = 0;
      local_30[0] = (undefined4 ***)((uint)local_30[0] & 0xffff0000);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_004042c0();
    }
    else {
      cVar3 = FUN_00a3e0b0(DAT_00da93ec,param_2,local_34,&local_40,local_50,&local_54,&local_80,
                           &local_55,0,local_3c);
      pppuVar2 = local_40;
      if (cVar3 != '\0') {
        iVar5 = FUN_00703c00(0x301,uVar4);
        if (((((iVar5 == 0) || ((*(uint *)(iVar5 + 0x40) & 0xc0) != 0)) ||
             ((*(uint *)(iVar5 + 0x40) & 0x50000) != 0)) ||
            (((undefined4 ****)pppuVar2 != *(undefined4 *****)(DAT_00da93ec + 0x450) &&
             (cVar3 = FUN_00a1c960(param_2), cVar3 == '\0')))) ||
           ((undefined4 ****)pppuVar2 != (undefined4 ****)(uint)*(ushort *)(param_1 + 0x6e))) {
          local_8._0_1_ = 1;
          FUN_00406560();
          local_8 = (uint)local_8._1_3_ << 8;
          FUN_004042c0();
          local_8 = 0xffffffff;
          FUN_004f0ef0();
          goto LAB_0098477b;
        }
        FUN_00980690(local_3c,&local_54,&local_40);
        if (local_4c != local_48) {
          uVar8 = 0x43800000;
          puVar6 = local_4c;
          do {
            local_80 = *puVar6;
            local_7c = puVar6[1];
            local_78 = puVar6[2];
            local_5c = 0;
            local_60 = 0;
            FUN_009802e0(param_1);
            fVar7 = (float)uVar8;
            iVar5 = *DAT_00da9894;
            if ((iVar5 != 0) && (*(int *)(iVar5 + 0x114) != 0)) {
              local_3c = local_30[0];
              if (local_1c < 8) {
                local_3c = local_30;
              }
              (**(code **)(**(int **)(iVar5 + 0x114) + 4))
                        (*(int **)(iVar5 + 0x114),"ZoneMapSetMonster","%d,%ls,%f,%f,%d",
                         param_3 + local_38 + *(int *)(param_1 + 0x148),local_3c,
                         (double)(int)(((float)local_60 - fVar7) * local_54 + fVar7),
                         (double)(int)(((float)local_5c - fVar7) * (float)local_40 + fVar7),3);
              uVar8 = 0x43800000;
              param_1 = local_74;
            }
            local_38 = local_38 + 1;
            puVar6 = puVar6 + 3;
          } while (puVar6 != local_48);
        }
      }
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_1c = 7;
      local_20 = 0;
      local_30[0] = (undefined4 ***)((uint)local_30[0] & 0xffff0000);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_004042c0();
      local_8 = 0xffffffff;
      if (local_4c != (undefined4 *)0x0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
  }
  local_8 = 0xffffffff;
  local_4c = (undefined4 *)0x0;
  local_48 = (undefined4 *)0x0;
  local_44 = 0;
LAB_0098477b:
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00984430 : PUSH EBP
00984431 : MOV EBP,ESP
00984433 : PUSH -0x1
00984435 : PUSH 0xb671b9
0098443a : MOV EAX,FS:[0x0]
00984440 : PUSH EAX
00984441 : SUB ESP,0x90
00984447 : MOV EAX,[0x00d66fa0]
0098444c : XOR EAX,EBP
0098444e : MOV dword ptr [EBP + -0x14],EAX
00984451 : PUSH EBX
00984452 : PUSH ESI
00984453 : PUSH EDI
00984454 : PUSH EAX
00984455 : LEA EAX,[EBP + -0xc]
00984458 : MOV FS:[0x0],EAX
0098445e : MOV EBX,dword ptr [EBP + 0x8]
00984461 : XOR EDI,EDI
00984463 : MOV dword ptr [EBP + -0x70],EBX
00984466 : MOV dword ptr [EBP + -0x48],EDI
00984469 : MOV dword ptr [EBP + -0x44],EDI
0098446c : MOV dword ptr [EBP + -0x40],EDI
0098446f : MOV dword ptr [EBP + -0x4],EDI
00984472 : MOVZX EAX,word ptr [EBX + 0x6c]
00984476 : MOVZX ECX,AX
00984479 : MOV dword ptr [EBP + -0x38],ECX
0098447c : MOV dword ptr [EBP + -0x3c],ECX
0098447f : CMP word ptr [EBX + 0x6e],AX
00984483 : JZ 0x0098448f
00984485 : MOVZX EAX,word ptr [EBX + 0x6e]
00984489 : MOV dword ptr [EBP + -0x38],EAX
0098448c : MOV dword ptr [EBP + -0x3c],EAX
0098448f : MOV EAX,dword ptr [EBP + 0xc]
00984492 : MOV ESI,dword ptr [0x00d7c54c]
00984498 : LEA ECX,[EBP + -0x34]
0098449b : MOV dword ptr [EBP + -0x34],EAX
0098449e : PUSH ECX
0098449f : LEA ECX,[ESI + 0x40]
009844a2 : LEA EAX,[EBP + -0x50]
009844a5 : CALL 0x004437f0
009844aa : MOV ESI,dword ptr [ESI + 0x44]
009844ad : MOV EAX,dword ptr [EBP + -0x50]
009844b0 : CMP EAX,ESI
009844b2 : JZ 0x00984566
009844b8 : MOV EAX,dword ptr [EAX + 0x10]
009844bb : CMP EAX,EDI
009844bd : JZ 0x00984566
009844c3 : MOV dword ptr [EBP + -0x34],EDI
009844c6 : MOV dword ptr [EBP + -0x68],EDI
009844c9 : MOV dword ptr [EBP + -0x64],EDI
009844cc : MOV dword ptr [EBP + -0x60],EDI
009844cf : MOV byte ptr [EBP + -0x4],0x1
009844d3 : LEA EDX,[EAX + 0x18]
009844d6 : MOV EAX,[0x0172491c]
009844db : PUSH EDI
009844dc : PUSH EAX
009844dd : LEA ESI,[EBP + 0xffffff68]
009844e3 : CALL 0x00824a20
009844e8 : MOV byte ptr [EBP + -0x4],0x2
009844ec : MOV ESI,0x8
009844f1 : CMP dword ptr [EAX + 0x18],ESI
009844f4 : JC 0x009844fb
009844f6 : MOV EAX,dword ptr [EAX + 0x4]
009844f9 : JMP 0x009844fe
009844fb : ADD EAX,0x4
009844fe : PUSH EAX
009844ff : LEA ECX,[EBP + -0x30]
00984502 : CALL 0x00406460
00984507 : MOV byte ptr [EBP + -0x4],0x4
0098450b : CMP dword ptr [EBP + -0x80],ESI
0098450e : JC 0x0098451b
00984510 : MOV ECX,dword ptr [EBP + 0xffffff6c]
00984516 : CALL 0x006f04e0
0098451b : MOV EAX,[0x00da93ec]
00984520 : XOR ECX,ECX
00984522 : MOV dword ptr [EBP + -0x80],0x7
00984529 : MOV dword ptr [EBP + 0xffffff7c],EDI
0098452f : MOV word ptr [EBP + 0xffffff6c],CX
00984536 : CMP EAX,EDI
00984538 : JNZ 0x00984574
0098453a : MOV byte ptr [EBP + -0x4],0x1
0098453e : CMP dword ptr [EBP + -0x18],ESI
00984541 : JC 0x0098454b
00984543 : MOV ECX,dword ptr [EBP + -0x2c]
00984546 : CALL 0x006f04e0
0098454b : XOR EDX,EDX
0098454d : MOV dword ptr [EBP + -0x18],0x7
00984554 : MOV dword ptr [EBP + -0x1c],EDI
00984557 : MOV word ptr [EBP + -0x2c],DX
0098455b : MOV byte ptr [EBP + -0x4],DL
0098455e : LEA ESI,[EBP + -0x6c]
00984561 : CALL 0x004042c0
00984566 : MOV dword ptr [EBP + -0x4],0xffffffff
0098456d : XOR EAX,EAX
0098456f : JMP 0x00984772
00984574 : MOV ECX,dword ptr [EBP + -0x38]
00984577 : PUSH ECX
00984578 : PUSH EDI
00984579 : LEA EDX,[EBP + -0x51]
0098457c : PUSH EDX
0098457d : LEA ECX,[EBP + -0x7c]
00984580 : PUSH ECX
00984581 : LEA EDX,[EBP + -0x50]
00984584 : PUSH EDX
00984585 : LEA ECX,[EBP + -0x4c]
00984588 : PUSH ECX
00984589 : LEA EDX,[EBP + -0x3c]
0098458c : PUSH EDX
0098458d : MOV EDX,dword ptr [EBP + 0xc]
00984590 : LEA ECX,[EBP + -0x30]
00984593 : PUSH ECX
00984594 : PUSH EDX
00984595 : PUSH EAX
00984596 : CALL 0x00a3e0b0
0098459b : TEST AL,AL
0098459d : JZ 0x00984730
009845a3 : MOV EDI,dword ptr [EBP + -0x3c]
009845a6 : PUSH 0x301
009845ab : CALL 0x00703c00
009845b0 : ADD ESP,0x4
009845b3 : TEST EAX,EAX
009845b5 : JNZ 0x009845e5
009845b7 : MOV byte ptr [EBP + -0x4],0x1
009845bb : LEA ECX,[EBP + -0x30]
009845be : CALL 0x00406560
009845c3 : MOV byte ptr [EBP + -0x4],0x0
009845c7 : LEA ESI,[EBP + -0x6c]
009845ca : CALL 0x004042c0
009845cf : MOV dword ptr [EBP + -0x4],0xffffffff
009845d6 : LEA ESI,[EBP + -0x4c]
009845d9 : CALL 0x004f0ef0
009845de : XOR EAX,EAX
009845e0 : JMP 0x0098477b
009845e5 : MOV EAX,dword ptr [EAX + 0x40]
009845e8 : TEST AL,0xc0
009845ea : JNZ 0x009845b7
009845ec : TEST EAX,0x50000
009845f1 : JNZ 0x009845b7
009845f3 : MOV EAX,[0x00da93ec]
009845f8 : CMP EDI,dword ptr [EAX + 0x450]
009845fe : JZ 0x0098460f
00984600 : MOV ECX,dword ptr [EBP + 0xc]
00984603 : PUSH ECX
00984604 : MOV EAX,EDI
00984606 : CALL 0x00a1c960
0098460b : TEST AL,AL
0098460d : JZ 0x009845b7
0098460f : MOVZX EDX,word ptr [EBX + 0x6e]
00984613 : CMP EDI,EDX
00984615 : JNZ 0x009845b7
00984617 : MOV EDX,dword ptr [EBP + -0x38]
0098461a : LEA EAX,[EBP + -0x3c]
0098461d : PUSH EAX
0098461e : LEA ECX,[EBP + -0x50]
00984621 : PUSH ECX
00984622 : PUSH EDX
00984623 : MOV EAX,EBX
00984625 : CALL 0x00980690
0098462a : MOV ESI,dword ptr [EBP + -0x48]
0098462d : CMP ESI,dword ptr [EBP + -0x44]
00984630 : JZ 0x00984729
00984636 : MOVSS XMM0,dword ptr [0x00cdf208]
0098463e : MOV EDI,EDI
00984640 : MOVSS XMM1,dword ptr [ESI]
00984644 : MOVSS XMM2,dword ptr [ESI + 0x4]
00984649 : MOVSS XMM3,dword ptr [ESI + 0x8]
0098464e : XOR EAX,EAX
00984650 : PUSH EBX
00984651 : LEA ECX,[EBP + -0x5c]
00984654 : LEA EDX,[EBP + -0x7c]
00984657 : MOV dword ptr [EBP + -0x58],EAX
0098465a : MOV dword ptr [EBP + -0x5c],EAX
0098465d : MOVSS dword ptr [EBP + -0x7c],XMM1
00984662 : MOVSS dword ptr [EBP + -0x78],XMM2
00984667 : MOVSS dword ptr [EBP + -0x74],XMM3
0098466c : CALL 0x009802e0
00984671 : CVTSI2SS XMM1,dword ptr [EBP + -0x5c]
00984676 : MOV ECX,dword ptr [EBP + -0x34]
00984679 : MOV EAX,dword ptr [EBP + 0x10]
0098467c : SUBSS XMM1,XMM0
00984680 : MULSS XMM1,dword ptr [EBP + -0x50]
00984685 : ADDSS XMM1,XMM0
00984689 : ADD EAX,ECX
0098468b : MOV ECX,dword ptr [0x00da9894]
00984691 : MOV ECX,dword ptr [ECX]
00984693 : ADD EAX,dword ptr [EBX + 0x148]
00984699 : CVTTSS2SI EDX,XMM1
0098469d : CVTSI2SS XMM1,dword ptr [EBP + -0x58]
009846a2 : SUBSS XMM1,XMM0
009846a6 : MULSS XMM1,dword ptr [EBP + -0x3c]
009846ab : ADDSS XMM1,XMM0
009846af : CVTTSS2SI EDI,XMM1
009846b3 : TEST ECX,ECX
009846b5 : JZ 0x0098471a
009846b7 : CMP dword ptr [ECX + 0x114],0x0
009846be : JZ 0x0098471a
009846c0 : CMP dword ptr [EBP + -0x18],0x8
009846c4 : MOV ECX,dword ptr [ECX + 0x114]
009846ca : MOV EBX,dword ptr [EBP + -0x2c]
009846cd : JNC 0x009846d2
009846cf : LEA EBX,[EBP + -0x2c]
009846d2 : PUSH 0x3
009846d4 : SUB ESP,0x10
009846d7 : CVTSI2SS XMM0,EDI
009846db : CVTSS2SD XMM0,XMM0
009846df : MOVSD qword ptr [ESP + 0x8],XMM0
009846e5 : MOV dword ptr [EBP + -0x38],EBX
009846e8 : MOV EBX,dword ptr [ECX]
009846ea : CVTSI2SS XMM0,EDX
009846ee : MOV EDX,dword ptr [EBP + -0x38]
009846f1 : CVTSS2SD XMM0,XMM0
009846f5 : MOVSD qword ptr [ESP],XMM0
009846fa : PUSH EDX
009846fb : PUSH EAX
009846fc : MOV EAX,dword ptr [EBX + 0x4]
009846ff : PUSH 0xc8047c
00984704 : PUSH 0xc8048c
00984709 : PUSH ECX
0098470a : CALL EAX
0098470c : MOVSS XMM0,dword ptr [0x00cdf208]
00984714 : MOV EBX,dword ptr [EBP + -0x70]
00984717 : ADD ESP,0x28
0098471a : INC dword ptr [EBP + -0x34]
0098471d : ADD ESI,0xc
00984720 : CMP ESI,dword ptr [EBP + -0x44]
00984723 : JNZ 0x00984640
00984729 : MOV ESI,0x8
0098472e : XOR EDI,EDI
00984730 : MOV byte ptr [EBP + -0x4],0x1
00984734 : CMP dword ptr [EBP + -0x18],ESI
00984737 : JC 0x00984741
00984739 : MOV ECX,dword ptr [EBP + -0x2c]
0098473c : CALL 0x006f04e0
00984741 : XOR ECX,ECX
00984743 : MOV dword ptr [EBP + -0x18],0x7
0098474a : MOV dword ptr [EBP + -0x1c],EDI
0098474d : MOV word ptr [EBP + -0x2c],CX
00984751 : MOV byte ptr [EBP + -0x4],CL
00984754 : LEA ESI,[EBP + -0x6c]
00984757 : CALL 0x004042c0
0098475c : MOV dword ptr [EBP + -0x4],0xffffffff
00984763 : MOV ECX,dword ptr [EBP + -0x48]
00984766 : CMP ECX,EDI
00984768 : JZ 0x0098476f
0098476a : CALL 0x006f04e0
0098476f : MOV EAX,dword ptr [EBP + -0x34]
00984772 : MOV dword ptr [EBP + -0x48],EDI
00984775 : MOV dword ptr [EBP + -0x44],EDI
00984778 : MOV dword ptr [EBP + -0x40],EDI
0098477b : MOV ECX,dword ptr [EBP + -0xc]
0098477e : MOV dword ptr FS:[0x0],ECX
00984785 : POP ECX
00984786 : POP EDI
00984787 : POP ESI
00984788 : POP EBX
00984789 : MOV ECX,dword ptr [EBP + -0x14]
0098478c : XOR ECX,EBP
0098478e : CALL 0x00633e6b
00984793 : MOV ESP,EBP
00984795 : POP EBP
00984796 : RET 0xc
