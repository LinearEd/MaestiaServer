PROGRAM  : Maestia.exe
FUNCTION : FUN_007c30a0
ENTRY    : 007c30a0
BODY     : [[007c30a0, 007c3331]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_007c30a0(undefined4 *param_1,undefined4 param_2)

{
  char cVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int *in_ECX;
  int *piVar5;
  int *piVar6;
  undefined1 local_24 [4];
  int *local_20;
  undefined **local_1c;
  int *local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b31cf6;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar6 = (int *)0x0;
  local_14 = 0;
  uVar3 = FUN_00801fc0(&local_1c,param_2);
  local_8 = 1;
  FUN_00463cf0(local_24,uVar3);
  local_8._0_1_ = 3;
  local_1c = &PTR_FUN_00cd4964;
  if (local_18 != (int *)0x0) {
    (**(code **)(*local_18 + 0x30))(uVar2);
    local_18 = (int *)0x0;
  }
  piVar5 = local_20;
  if (local_20 != (int *)0x0) {
    (**(code **)(*local_20 + 0x20))();
    if (piVar5[0xe] != 0) {
      (**(code **)(*local_20 + 0x28))();
      *param_1 = &PTR_FUN_00cd4964;
      param_1[1] = local_20;
      if (local_20 != (int *)0x0) {
        InterlockedIncrement(local_20 + 0xb);
      }
      local_14 = 1;
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0045c060(local_24);
      ExceptionList = local_10;
      return param_1;
    }
    (**(code **)(*local_20 + 4))(param_2);
    *param_1 = &PTR_FUN_00cd4964;
    param_1[1] = local_20;
    if (local_20 != (int *)0x0) {
      InterlockedIncrement(local_20 + 0xb);
    }
    local_14 = 1;
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_0045c060(local_24);
    ExceptionList = local_10;
    return param_1;
  }
  local_18 = (int *)FUN_006f0760(0x80,".\\Resource\\FrkTxtrMgr.cpp",0x37,0);
  local_8._0_1_ = 4;
  if (local_18 != (int *)0x0) {
    piVar6 = (int *)FUN_00a646b0(local_18);
  }
  local_8._0_1_ = 3;
  cVar1 = (**(code **)(*piVar6 + 4))(param_2);
  if (cVar1 == '\0') {
    (**(code **)*piVar6)(1);
    piVar5 = (int *)0x0;
  }
  else {
    piVar6[0xd] = (int)in_ECX;
    cVar1 = (**(code **)(*in_ECX + 0xc))(piVar6);
    piVar5 = piVar6;
    if (cVar1 == '\0') {
      piVar5 = (int *)0x0;
      piVar6[0xd] = 0;
      (**(code **)*piVar6)(1);
      iVar4 = FUN_00801fc0(&local_1c,param_2);
      local_8._0_1_ = 5;
      if (local_20 != *(int **)(iVar4 + 4)) {
        if (local_20 != (int *)0x0) {
          (**(code **)(*local_20 + 0x30))();
        }
        if (*(int *)(iVar4 + 4) != 0) {
          InterlockedIncrement((LONG *)(*(int *)(iVar4 + 4) + 0x2c));
        }
        local_20 = *(int **)(iVar4 + 4);
      }
      local_8._0_1_ = 3;
      local_1c = &PTR_FUN_00cd4964;
      if (local_18 != (int *)0x0) {
        (**(code **)(*local_18 + 0x30))();
        local_18 = (int *)0x0;
      }
      piVar6 = local_20;
      if (local_20 != (int *)0x0) {
        (**(code **)(*local_20 + 0x20))();
        if ((piVar6[0xe] == 0) || ((char)local_20[9] == '\0')) {
          (**(code **)(*local_20 + 4))(param_2);
          FUN_0043a270();
        }
        else {
          (**(code **)(*local_20 + 0x28))();
          FUN_0043a270();
        }
        goto LAB_007c3317;
      }
    }
  }
  *param_1 = &PTR_FUN_00cd4964;
  param_1[1] = piVar5;
  if (piVar5 != (int *)0x0) {
    InterlockedIncrement(piVar5 + 0xb);
  }
LAB_007c3317:
  local_8 = (uint)local_8._1_3_ << 8;
  local_14 = 1;
  FUN_0045c060(local_24);
  ExceptionList = local_10;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
007c30a0 : PUSH EBP
007c30a1 : MOV EBP,ESP
007c30a3 : PUSH -0x1
007c30a5 : PUSH 0xb31cf6
007c30aa : MOV EAX,FS:[0x0]
007c30b0 : PUSH EAX
007c30b1 : SUB ESP,0x14
007c30b4 : PUSH EBX
007c30b5 : PUSH ESI
007c30b6 : PUSH EDI
007c30b7 : MOV EAX,[0x00d66fa0]
007c30bc : XOR EAX,EBP
007c30be : PUSH EAX
007c30bf : LEA EAX,[EBP + -0xc]
007c30c2 : MOV FS:[0x0],EAX
007c30c8 : MOV EDI,ECX
007c30ca : MOV EBX,dword ptr [EBP + 0xc]
007c30cd : PUSH EBX
007c30ce : LEA EAX,[EBP + -0x18]
007c30d1 : XOR ESI,ESI
007c30d3 : PUSH EAX
007c30d4 : MOV dword ptr [EBP + -0x10],ESI
007c30d7 : CALL 0x00801fc0
007c30dc : MOV dword ptr [EBP + -0x4],0x1
007c30e3 : PUSH EAX
007c30e4 : LEA ECX,[EBP + -0x20]
007c30e7 : PUSH ECX
007c30e8 : CALL 0x00463cf0
007c30ed : MOV byte ptr [EBP + -0x4],0x3
007c30f1 : MOV ECX,dword ptr [EBP + -0x14]
007c30f4 : MOV dword ptr [EBP + -0x18],0xcd4964
007c30fb : CMP ECX,ESI
007c30fd : JZ 0x007c3109
007c30ff : MOV EDX,dword ptr [ECX]
007c3101 : MOV EAX,dword ptr [EDX + 0x30]
007c3104 : CALL EAX
007c3106 : MOV dword ptr [EBP + -0x14],ESI
007c3109 : MOV ECX,dword ptr [EBP + -0x1c]
007c310c : CMP ECX,ESI
007c310e : JZ 0x007c31c0
007c3114 : MOV EDX,dword ptr [ECX]
007c3116 : MOV EAX,dword ptr [EDX + 0x20]
007c3119 : MOV EDI,ECX
007c311b : CALL EAX
007c311d : MOV ECX,dword ptr [EBP + -0x1c]
007c3120 : MOV EDX,dword ptr [ECX]
007c3122 : CMP dword ptr [EDI + 0x38],ESI
007c3125 : JNZ 0x007c3174
007c3127 : MOV EAX,dword ptr [EDX + 0x4]
007c312a : PUSH EBX
007c312b : CALL EAX
007c312d : MOV EAX,dword ptr [EBP + -0x1c]
007c3130 : MOV EDI,dword ptr [EBP + 0x8]
007c3133 : MOV dword ptr [EDI],0xcd4964
007c3139 : MOV dword ptr [EDI + 0x4],EAX
007c313c : CMP EAX,ESI
007c313e : JZ 0x007c314a
007c3140 : ADD EAX,0x2c
007c3143 : PUSH EAX
007c3144 : CALL dword ptr [0x00b850dc]
007c314a : MOV dword ptr [EBP + -0x10],0x1
007c3151 : MOV byte ptr [EBP + -0x4],0x0
007c3155 : LEA ECX,[EBP + -0x20]
007c3158 : PUSH ECX
007c3159 : CALL 0x0045c060
007c315e : MOV EAX,EDI
007c3160 : MOV ECX,dword ptr [EBP + -0xc]
007c3163 : MOV dword ptr FS:[0x0],ECX
007c316a : POP ECX
007c316b : POP EDI
007c316c : POP ESI
007c316d : POP EBX
007c316e : MOV ESP,EBP
007c3170 : POP EBP
007c3171 : RET 0x8
007c3174 : MOV EAX,dword ptr [EDX + 0x28]
007c3177 : CALL EAX
007c3179 : MOV EAX,dword ptr [EBP + -0x1c]
007c317c : MOV EDI,dword ptr [EBP + 0x8]
007c317f : MOV dword ptr [EDI],0xcd4964
007c3185 : MOV dword ptr [EDI + 0x4],EAX
007c3188 : CMP EAX,ESI
007c318a : JZ 0x007c3196
007c318c : ADD EAX,0x2c
007c318f : PUSH EAX
007c3190 : CALL dword ptr [0x00b850dc]
007c3196 : MOV dword ptr [EBP + -0x10],0x1
007c319d : MOV byte ptr [EBP + -0x4],0x0
007c31a1 : LEA ECX,[EBP + -0x20]
007c31a4 : PUSH ECX
007c31a5 : CALL 0x0045c060
007c31aa : MOV EAX,EDI
007c31ac : MOV ECX,dword ptr [EBP + -0xc]
007c31af : MOV dword ptr FS:[0x0],ECX
007c31b6 : POP ECX
007c31b7 : POP EDI
007c31b8 : POP ESI
007c31b9 : POP EBX
007c31ba : MOV ESP,EBP
007c31bc : POP EBP
007c31bd : RET 0x8
007c31c0 : PUSH ESI
007c31c1 : PUSH 0x37
007c31c3 : PUSH 0xc1c304
007c31c8 : PUSH 0x80
007c31cd : CALL 0x006f0760
007c31d2 : ADD ESP,0x10
007c31d5 : MOV dword ptr [EBP + -0x14],EAX
007c31d8 : MOV byte ptr [EBP + -0x4],0x4
007c31dc : CMP EAX,ESI
007c31de : JZ 0x007c31e8
007c31e0 : PUSH EAX
007c31e1 : CALL 0x00a646b0
007c31e6 : MOV ESI,EAX
007c31e8 : MOV byte ptr [EBP + -0x4],0x3
007c31ec : MOV EDX,dword ptr [ESI]
007c31ee : MOV EAX,dword ptr [EBP + 0xc]
007c31f1 : MOV EDX,dword ptr [EDX + 0x4]
007c31f4 : PUSH EAX
007c31f5 : MOV ECX,ESI
007c31f7 : MOV EBX,ESI
007c31f9 : CALL EDX
007c31fb : TEST AL,AL
007c31fd : JZ 0x007c32e2
007c3203 : MOV dword ptr [ESI + 0x34],EDI
007c3206 : MOV EAX,dword ptr [EDI]
007c3208 : MOV EDX,dword ptr [EAX + 0xc]
007c320b : PUSH ESI
007c320c : MOV ECX,EDI
007c320e : CALL EDX
007c3210 : TEST AL,AL
007c3212 : JNZ 0x007c32ee
007c3218 : XOR EBX,EBX
007c321a : MOV dword ptr [ESI + 0x34],EBX
007c321d : MOV EAX,dword ptr [ESI]
007c321f : MOV EDX,dword ptr [EAX]
007c3221 : PUSH 0x1
007c3223 : MOV ECX,ESI
007c3225 : CALL EDX
007c3227 : MOV EAX,dword ptr [EBP + 0xc]
007c322a : PUSH EAX
007c322b : LEA ECX,[EBP + -0x18]
007c322e : PUSH ECX
007c322f : MOV ECX,EDI
007c3231 : CALL 0x00801fc0
007c3236 : MOV ESI,EAX
007c3238 : MOV byte ptr [EBP + -0x4],0x5
007c323c : MOV EAX,dword ptr [ESI + 0x4]
007c323f : MOV ECX,dword ptr [EBP + -0x1c]
007c3242 : CMP ECX,EAX
007c3244 : JZ 0x007c3268
007c3246 : TEST ECX,ECX
007c3248 : JZ 0x007c3251
007c324a : MOV EDX,dword ptr [ECX]
007c324c : MOV EAX,dword ptr [EDX + 0x30]
007c324f : CALL EAX
007c3251 : MOV EAX,dword ptr [ESI + 0x4]
007c3254 : TEST EAX,EAX
007c3256 : JZ 0x007c3262
007c3258 : ADD EAX,0x2c
007c325b : PUSH EAX
007c325c : CALL dword ptr [0x00b850dc]
007c3262 : MOV ESI,dword ptr [ESI + 0x4]
007c3265 : MOV dword ptr [EBP + -0x1c],ESI
007c3268 : MOV byte ptr [EBP + -0x4],0x3
007c326c : MOV ECX,dword ptr [EBP + -0x14]
007c326f : MOV dword ptr [EBP + -0x18],0xcd4964
007c3276 : TEST ECX,ECX
007c3278 : JZ 0x007c3288
007c327a : MOV EDX,dword ptr [ECX]
007c327c : MOV EAX,dword ptr [EDX + 0x30]
007c327f : CALL EAX
007c3281 : MOV dword ptr [EBP + -0x14],0x0
007c3288 : MOV ECX,dword ptr [EBP + -0x1c]
007c328b : TEST ECX,ECX
007c328d : JZ 0x007c32ee
007c328f : MOV EDX,dword ptr [ECX]
007c3291 : MOV EAX,dword ptr [EDX + 0x20]
007c3294 : MOV ESI,ECX
007c3296 : CALL EAX
007c3298 : CMP dword ptr [ESI + 0x38],0x0
007c329c : MOV ECX,dword ptr [EBP + -0x1c]
007c329f : JZ 0x007c32bb
007c32a1 : CMP byte ptr [ECX + 0x24],0x0
007c32a5 : JZ 0x007c32bb
007c32a7 : MOV EDX,dword ptr [ECX]
007c32a9 : MOV EAX,dword ptr [EDX + 0x28]
007c32ac : CALL EAX
007c32ae : MOV EAX,dword ptr [EBP + -0x1c]
007c32b1 : MOV ESI,dword ptr [EBP + 0x8]
007c32b4 : CALL 0x0043a270
007c32b9 : JMP 0x007c3308
007c32bb : MOV EDX,dword ptr [ECX]
007c32bd : MOV EAX,dword ptr [EBP + 0xc]
007c32c0 : MOV EDX,dword ptr [EDX + 0x4]
007c32c3 : PUSH EAX
007c32c4 : CALL EDX
007c32c6 : MOV EAX,dword ptr [EBP + -0x1c]
007c32c9 : MOV ESI,dword ptr [EBP + 0x8]
007c32cc : CALL 0x0043a270
007c32d1 : MOV dword ptr [EBP + -0x10],0x1
007c32d8 : MOV byte ptr [EBP + -0x4],0x0
007c32dc : LEA EAX,[EBP + -0x20]
007c32df : PUSH EAX
007c32e0 : JMP 0x007c3317
007c32e2 : MOV EDX,dword ptr [ESI]
007c32e4 : MOV EAX,dword ptr [EDX]
007c32e6 : PUSH 0x1
007c32e8 : MOV ECX,ESI
007c32ea : CALL EAX
007c32ec : XOR EBX,EBX
007c32ee : MOV ESI,dword ptr [EBP + 0x8]
007c32f1 : MOV dword ptr [ESI],0xcd4964
007c32f7 : MOV dword ptr [ESI + 0x4],EBX
007c32fa : TEST EBX,EBX
007c32fc : JZ 0x007c3308
007c32fe : ADD EBX,0x2c
007c3301 : PUSH EBX
007c3302 : CALL dword ptr [0x00b850dc]
007c3308 : MOV dword ptr [EBP + -0x10],0x1
007c330f : MOV byte ptr [EBP + -0x4],0x0
007c3313 : LEA ECX,[EBP + -0x20]
007c3316 : PUSH ECX
007c3317 : CALL 0x0045c060
007c331c : MOV EAX,ESI
007c331e : MOV ECX,dword ptr [EBP + -0xc]
007c3321 : MOV dword ptr FS:[0x0],ECX
007c3328 : POP ECX
007c3329 : POP EDI
007c332a : POP ESI
007c332b : POP EBX
007c332c : MOV ESP,EBP
007c332e : POP EBP
007c332f : RET 0x8
