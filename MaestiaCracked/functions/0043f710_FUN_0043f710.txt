PROGRAM  : Maestia.exe
FUNCTION : FUN_0043f710
ENTRY    : 0043f710
BODY     : [[0043f710, 0043f85b] [0043f8a0, 0043f93c] [0043f95a, 0043f9c2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0043f710(uint param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  uint extraout_ECX;
  undefined8 uVar4;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7e200;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_18 = 0;
  }
  else {
    local_18 = *(int *)(param_1 + 0xc) - iVar2 >> 5;
  }
  iVar2 = *(int *)(param_1 + 8) - iVar2 >> 5;
  uVar4 = CONCAT44(*(int *)(param_1 + 8),iVar2);
  if (iVar2 == 0x7ffffff) {
    uVar4 = FUN_00452880();
    local_18 = extraout_ECX;
  }
  uVar1 = (int)uVar4 + 1;
  if (local_18 < uVar1) {
    if (0x7ffffff - (local_18 >> 1) < local_18) {
      local_18 = 0;
    }
    else {
      local_18 = local_18 + (local_18 >> 1);
    }
    if (local_18 < uVar1) {
      local_18 = uVar1;
    }
    iVar2 = FUN_0043f9d0();
    local_8 = 0;
    FUN_0043f4d0();
    FUN_0043fa60(*(undefined4 *)(param_1 + 4),param_2);
    FUN_0043fa60(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    if (*(int *)(param_1 + 4) != 0) {
      FUN_0043fb60(param_2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_18 * 0x20 + iVar2;
    *(int *)(param_1 + 8) =
         ((*(int *)(param_1 + 8) - *(int *)(param_1 + 4) >> 5) + 1) * 0x20 + iVar2;
    *(int *)(param_1 + 4) = iVar2;
    ExceptionList = local_10;
    return;
  }
  if ((int)((ulonglong)uVar4 >> 0x20) - param_2 >> 5 == 0) {
    local_8 = 2;
    FUN_0043fa60(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = CONCAT31(local_8._1_3_,3);
    FUN_0043f4d0();
    local_8 = 2;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x20;
  }
  else {
    local_8 = 5;
    uVar3 = FUN_0043fa60(*(int *)(param_1 + 8) + -0x20,*(int *)(param_1 + 8));
    *(undefined4 *)(param_1 + 8) = uVar3;
    param_1 = param_1 & 0xffffff00;
    FUN_0043fcd0(param_2,param_2,param_1);
  }
  FUN_0043fc80();
  local_8 = 0xffffffff;
  FUN_0043fff0();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0043f710 : PUSH EBP
0043f711 : MOV EBP,ESP
0043f713 : PUSH -0x1
0043f715 : PUSH 0xb7e200
0043f71a : MOV EAX,FS:[0x0]
0043f720 : PUSH EAX
0043f721 : SUB ESP,0x34
0043f724 : PUSH EBX
0043f725 : PUSH ESI
0043f726 : PUSH EDI
0043f727 : MOV EAX,[0x00d66fa0]
0043f72c : XOR EAX,EBP
0043f72e : PUSH EAX
0043f72f : LEA EAX,[EBP + -0xc]
0043f732 : MOV FS:[0x0],EAX
0043f738 : MOV dword ptr [EBP + -0x10],ESP
0043f73b : MOV ESI,ECX
0043f73d : MOV EBX,dword ptr [EBP + 0x8]
0043f740 : MOV EDI,dword ptr [EBX + 0x4]
0043f743 : TEST EDI,EDI
0043f745 : JNZ 0x0043f74b
0043f747 : XOR ECX,ECX
0043f749 : JMP 0x0043f755
0043f74b : MOV EAX,dword ptr [EBX + 0xc]
0043f74e : SUB EAX,EDI
0043f750 : SAR EAX,0x5
0043f753 : MOV ECX,EAX
0043f755 : MOV EDX,dword ptr [EBX + 0x8]
0043f758 : MOV EAX,EDX
0043f75a : SUB EAX,EDI
0043f75c : SAR EAX,0x5
0043f75f : MOV EDI,0x7ffffff
0043f764 : SUB EDI,EAX
0043f766 : CMP EDI,0x1
0043f769 : JNC 0x0043f770
0043f76b : CALL 0x00452880
0043f770 : LEA EDI,[EAX + 0x1]
0043f773 : CMP ECX,EDI
0043f775 : JNC 0x0043f8a0
0043f77b : MOV EAX,ECX
0043f77d : SHR EAX,0x1
0043f77f : MOV EDX,0x7ffffff
0043f784 : SUB EDX,EAX
0043f786 : CMP EDX,ECX
0043f788 : JNC 0x0043f796
0043f78a : MOV dword ptr [EBP + -0x14],0x0
0043f791 : MOV ECX,dword ptr [EBP + -0x14]
0043f794 : JMP 0x0043f79b
0043f796 : ADD ECX,EAX
0043f798 : MOV dword ptr [EBP + -0x14],ECX
0043f79b : CMP ECX,EDI
0043f79d : JNC 0x0043f7a4
0043f79f : MOV dword ptr [EBP + -0x14],EDI
0043f7a2 : MOV ECX,EDI
0043f7a4 : CALL 0x0043f9d0
0043f7a9 : MOV dword ptr [EBP + 0x8],EAX
0043f7ac : MOV ECX,dword ptr [EBP + 0xc]
0043f7af : SUB ECX,dword ptr [EBX + 0x4]
0043f7b2 : SAR ECX,0x5
0043f7b5 : MOV dword ptr [EBP + -0x1c],ECX
0043f7b8 : XOR EDX,EDX
0043f7ba : MOV dword ptr [EBP + -0x18],EDX
0043f7bd : MOV dword ptr [EBP + -0x4],EDX
0043f7c0 : MOV EDI,ECX
0043f7c2 : SHL EDI,0x5
0043f7c5 : ADD EDI,EAX
0043f7c7 : MOV EDX,ESI
0043f7c9 : MOV ESI,0x1
0043f7ce : CALL 0x0043f4d0
0043f7d3 : MOV dword ptr [EBP + -0x18],ESI
0043f7d6 : MOV EAX,dword ptr [EBP + 0xc]
0043f7d9 : PUSH EAX
0043f7da : MOV ECX,dword ptr [EBX + 0x4]
0043f7dd : PUSH ECX
0043f7de : MOV EDI,dword ptr [EBP + 0x8]
0043f7e1 : MOV EDX,EDI
0043f7e3 : CALL 0x0043fa60
0043f7e8 : MOV dword ptr [EBP + -0x18],0x2
0043f7ef : MOV EDX,dword ptr [EBP + -0x1c]
0043f7f2 : INC EDX
0043f7f3 : SHL EDX,0x5
0043f7f6 : ADD EDX,EDI
0043f7f8 : MOV EAX,dword ptr [EBX + 0x8]
0043f7fb : PUSH EAX
0043f7fc : MOV ECX,dword ptr [EBP + 0xc]
0043f7ff : PUSH ECX
0043f800 : CALL 0x0043fa60
0043f805 : MOV dword ptr [EBP + -0x4],0xffffffff
0043f80c : MOV EDX,dword ptr [EBX + 0x8]
0043f80f : MOV ECX,dword ptr [EBX + 0x4]
0043f812 : MOV ESI,EDX
0043f814 : SUB ESI,ECX
0043f816 : SAR ESI,0x5
0043f819 : INC ESI
0043f81a : TEST ECX,ECX
0043f81c : JZ 0x0043f832
0043f81e : MOV EAX,dword ptr [EBP + 0xc]
0043f821 : PUSH EAX
0043f822 : CALL 0x0043fb60
0043f827 : ADD ESP,0x4
0043f82a : MOV ECX,dword ptr [EBX + 0x4]
0043f82d : CALL 0x006f04e0
0043f832 : MOV EAX,dword ptr [EBP + -0x14]
0043f835 : SHL EAX,0x5
0043f838 : ADD EAX,EDI
0043f83a : MOV dword ptr [EBX + 0xc],EAX
0043f83d : SHL ESI,0x5
0043f840 : ADD ESI,EDI
0043f842 : MOV dword ptr [EBX + 0x8],ESI
0043f845 : MOV dword ptr [EBX + 0x4],EDI
0043f848 : MOV ECX,dword ptr [EBP + -0xc]
0043f84b : MOV dword ptr FS:[0x0],ECX
0043f852 : POP ECX
0043f853 : POP EDI
0043f854 : POP ESI
0043f855 : POP EBX
0043f856 : MOV ESP,EBP
0043f858 : POP EBP
0043f859 : RET 0x8
0043f8a0 : SUB EDX,dword ptr [EBP + 0xc]
0043f8a3 : SAR EDX,0x5
0043f8a6 : MOV ECX,dword ptr [ESI]
0043f8a8 : MOVSS XMM0,dword ptr [ESI + 0x8]
0043f8ad : MOVSS XMM1,dword ptr [ESI + 0xc]
0043f8b2 : MOVSS XMM2,dword ptr [ESI + 0x10]
0043f8b7 : MOV dword ptr [EBP + -0x3c],ECX
0043f8ba : MOVSS dword ptr [EBP + -0x34],XMM0
0043f8bf : MOVSS dword ptr [EBP + -0x30],XMM1
0043f8c4 : MOVSS dword ptr [EBP + -0x2c],XMM2
0043f8c9 : MOVSS XMM0,dword ptr [ESI + 0x14]
0043f8ce : MOVSS XMM1,dword ptr [ESI + 0x18]
0043f8d3 : MOVSS XMM2,dword ptr [ESI + 0x1c]
0043f8d8 : MOVSS dword ptr [EBP + -0x28],XMM0
0043f8dd : MOVSS dword ptr [EBP + -0x24],XMM1
0043f8e2 : MOVSS dword ptr [EBP + -0x20],XMM2
0043f8e7 : CMP EDX,0x1
0043f8ea : MOV EDX,dword ptr [ESI + 0x4]
0043f8ed : MOV dword ptr [EBP + -0x38],EDX
0043f8f0 : JNC 0x0043f95a
0043f8f2 : MOV dword ptr [EBP + -0x4],0x2
0043f8f9 : MOV EAX,dword ptr [EBP + 0xc]
0043f8fc : LEA EDX,[EAX + 0x20]
0043f8ff : MOV ECX,dword ptr [EBX + 0x8]
0043f902 : PUSH ECX
0043f903 : PUSH EAX
0043f904 : CALL 0x0043fa60
0043f909 : MOV byte ptr [EBP + -0x4],0x3
0043f90d : MOV EDI,dword ptr [EBX + 0x8]
0043f910 : MOV EDX,EDI
0043f912 : SUB EDX,dword ptr [EBP + 0xc]
0043f915 : SAR EDX,0x5
0043f918 : MOV ESI,0x1
0043f91d : SUB ESI,EDX
0043f91f : LEA EDX,[EBP + -0x3c]
0043f922 : CALL 0x0043f4d0
0043f927 : MOV dword ptr [EBP + -0x4],0x2
0043f92e : ADD dword ptr [EBX + 0x8],0x20
0043f932 : MOV EBX,dword ptr [EBX + 0x8]
0043f935 : LEA ESI,[EBX + -0x20]
0043f938 : MOV EDX,dword ptr [EBP + 0xc]
0043f93b : JMP 0x0043f998
0043f95a : MOV dword ptr [EBP + -0x4],0x5
0043f961 : MOV ESI,dword ptr [EBX + 0x8]
0043f964 : LEA EDI,[ESI + -0x20]
0043f967 : PUSH ESI
0043f968 : PUSH EDI
0043f969 : MOV EDX,ESI
0043f96b : CALL 0x0043fa60
0043f970 : MOV dword ptr [EBX + 0x8],EAX
0043f973 : MOV byte ptr [EBP + 0x8],0x0
0043f977 : MOV EAX,dword ptr [EBP + 0x8]
0043f97a : PUSH EAX
0043f97b : MOV ECX,dword ptr [EBP + 0xc]
0043f97e : PUSH ECX
0043f97f : MOV EDX,dword ptr [EBP + 0xc]
0043f982 : PUSH EDX
0043f983 : MOV EAX,ESI
0043f985 : MOV ECX,EDI
0043f987 : MOV EDI,dword ptr [EBP + 0xc]
0043f98a : CALL 0x0043fcd0
0043f98f : ADD ESP,0xc
0043f992 : MOV EDX,dword ptr [EBP + 0xc]
0043f995 : LEA ESI,[EDX + 0x20]
0043f998 : LEA ECX,[EBP + -0x3c]
0043f99b : CALL 0x0043fc80
0043f9a0 : MOV dword ptr [EBP + -0x4],0xffffffff
0043f9a7 : LEA EAX,[EBP + -0x3c]
0043f9aa : CALL 0x0043fff0
0043f9af : MOV ECX,dword ptr [EBP + -0xc]
0043f9b2 : MOV dword ptr FS:[0x0],ECX
0043f9b9 : POP ECX
0043f9ba : POP EDI
0043f9bb : POP ESI
0043f9bc : POP EBX
0043f9bd : MOV ESP,EBP
0043f9bf : POP EBP
0043f9c0 : RET 0x8
