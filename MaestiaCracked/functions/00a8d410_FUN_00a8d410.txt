PROGRAM  : Maestia.exe
FUNCTION : FUN_00a8d410
ENTRY    : 00a8d410
BODY     : [[00a8d410, 00a8d5ab]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a8d410(uint param_1,uint param_2,undefined4 param_3)

{
  int *piVar1;
  undefined2 uVar2;
  int *piVar3;
  int iVar4;
  undefined4 ****ppppuVar5;
  int *in_ECX;
  uint local_50;
  uint local_34;
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1f9af;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar3 = (int *)(**(code **)(*in_ECX + 0x74))(param_1,param_2,local_14);
  if (piVar3 != (int *)0x0) {
    (**(code **)(*piVar3 + 0x48))(param_3);
  }
  piVar3 = (int *)(**(code **)(*in_ECX + 0x74))(param_1,param_2);
  if (piVar3 != (int *)0x0) {
    FUN_00406460(L"amount");
    local_8 = 0;
    iVar4 = FUN_0081cce0(DAT_0172491c);
    local_8._0_1_ = 1;
    if (*(uint *)(iVar4 + 0x18) < 8) {
      iVar4 = iVar4 + 4;
    }
    else {
      iVar4 = *(int *)(iVar4 + 4);
    }
    uVar2 = (**(code **)(*piVar3 + 0x40))();
    FUN_00404750(L"%s: %d",iVar4,uVar2);
    local_8 = CONCAT31(local_8._1_3_,3);
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (((*(char *)((int)in_ECX + 0x32) != '\0') && (iVar4 = *DAT_00da9894, iVar4 != 0)) &&
       (*(int *)(iVar4 + 0x114) != 0)) {
      piVar1 = *(int **)(iVar4 + 0x114);
      ppppuVar5 = (undefined4 ****)local_2c[0];
      if (local_18 < 8) {
        ppppuVar5 = local_2c;
      }
      iVar4 = *piVar1;
      uVar2 = (**(code **)(*piVar3 + 0x40))(ppppuVar5);
      (**(code **)(iVar4 + 4))
                (piVar1,"mc_privateshopseller.ShopSetItemAmount","%d,%d,%ls",
                 (param_1 & 0xffff) + (param_2 & 0xffff) * 2,uVar2);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a8d410 : PUSH EBP
00a8d411 : MOV EBP,ESP
00a8d413 : PUSH -0x1
00a8d415 : PUSH 0xb1f9af
00a8d41a : MOV EAX,FS:[0x0]
00a8d420 : PUSH EAX
00a8d421 : SUB ESP,0x58
00a8d424 : MOV EAX,[0x00d66fa0]
00a8d429 : XOR EAX,EBP
00a8d42b : MOV dword ptr [EBP + -0x10],EAX
00a8d42e : PUSH EBX
00a8d42f : PUSH ESI
00a8d430 : PUSH EDI
00a8d431 : PUSH EAX
00a8d432 : LEA EAX,[EBP + -0xc]
00a8d435 : MOV FS:[0x0],EAX
00a8d43b : MOV ESI,dword ptr [EBP + 0xc]
00a8d43e : MOV EBX,dword ptr [EBP + 0x8]
00a8d441 : MOV EDI,ECX
00a8d443 : MOV EAX,dword ptr [EDI]
00a8d445 : MOV EDX,dword ptr [EAX + 0x74]
00a8d448 : PUSH ESI
00a8d449 : PUSH EBX
00a8d44a : CALL EDX
00a8d44c : TEST EAX,EAX
00a8d44e : JZ 0x00a8d45d
00a8d450 : MOV ECX,dword ptr [EBP + 0x10]
00a8d453 : MOV EDX,dword ptr [EAX]
00a8d455 : MOV EDX,dword ptr [EDX + 0x48]
00a8d458 : PUSH ECX
00a8d459 : MOV ECX,EAX
00a8d45b : CALL EDX
00a8d45d : MOV EAX,dword ptr [EDI]
00a8d45f : MOV EDX,dword ptr [EAX + 0x74]
00a8d462 : PUSH ESI
00a8d463 : PUSH EBX
00a8d464 : MOV ECX,EDI
00a8d466 : CALL EDX
00a8d468 : MOV EBX,EAX
00a8d46a : TEST EBX,EBX
00a8d46c : JZ 0x00a8d58e
00a8d472 : PUSH 0xc70a5c
00a8d477 : LEA ECX,[EBP + -0x48]
00a8d47a : CALL 0x00406460
00a8d47f : MOV dword ptr [EBP + -0x4],0x0
00a8d486 : MOV EAX,[0x0172491c]
00a8d48b : PUSH EAX
00a8d48c : LEA ECX,[EBP + -0x48]
00a8d48f : LEA ESI,[EBP + -0x64]
00a8d492 : CALL 0x0081cce0
00a8d497 : MOV byte ptr [EBP + -0x4],0x1
00a8d49b : CMP dword ptr [EAX + 0x18],0x8
00a8d49f : JC 0x00a8d4a6
00a8d4a1 : MOV ESI,dword ptr [EAX + 0x4]
00a8d4a4 : JMP 0x00a8d4a9
00a8d4a6 : LEA ESI,[EAX + 0x4]
00a8d4a9 : MOV EDX,dword ptr [EBX]
00a8d4ab : MOV EAX,dword ptr [EDX + 0x40]
00a8d4ae : MOV ECX,EBX
00a8d4b0 : CALL EAX
00a8d4b2 : MOVZX ECX,AX
00a8d4b5 : PUSH ECX
00a8d4b6 : PUSH ESI
00a8d4b7 : PUSH 0xc70a6c
00a8d4bc : LEA ESI,[EBP + -0x2c]
00a8d4bf : CALL 0x00404750
00a8d4c4 : ADD ESP,0xc
00a8d4c7 : MOV byte ptr [EBP + -0x4],0x3
00a8d4cb : CMP dword ptr [EBP + -0x4c],0x8
00a8d4cf : JC 0x00a8d4d9
00a8d4d1 : MOV ECX,dword ptr [EBP + -0x60]
00a8d4d4 : CALL 0x006f04e0
00a8d4d9 : XOR ESI,ESI
00a8d4db : XOR EDX,EDX
00a8d4dd : MOV dword ptr [EBP + -0x4c],0x7
00a8d4e4 : MOV dword ptr [EBP + -0x50],ESI
00a8d4e7 : MOV word ptr [EBP + -0x60],DX
00a8d4eb : MOV byte ptr [EBP + -0x4],0x4
00a8d4ef : CMP dword ptr [EBP + -0x30],0x8
00a8d4f3 : JC 0x00a8d4fd
00a8d4f5 : MOV ECX,dword ptr [EBP + -0x44]
00a8d4f8 : CALL 0x006f04e0
00a8d4fd : XOR EAX,EAX
00a8d4ff : MOV dword ptr [EBP + -0x30],0x7
00a8d506 : MOV dword ptr [EBP + -0x34],ESI
00a8d509 : MOV word ptr [EBP + -0x44],AX
00a8d50d : CMP byte ptr [EDI + 0x32],AL
00a8d510 : JZ 0x00a8d569
00a8d512 : MOV ECX,dword ptr [0x00da9894]
00a8d518 : MOV EAX,dword ptr [ECX]
00a8d51a : CMP EAX,ESI
00a8d51c : JZ 0x00a8d569
00a8d51e : CMP dword ptr [EAX + 0x114],ESI
00a8d524 : JZ 0x00a8d569
00a8d526 : CMP dword ptr [EBP + -0x14],0x8
00a8d52a : MOV EDI,dword ptr [EAX + 0x114]
00a8d530 : MOV EAX,dword ptr [EBP + -0x28]
00a8d533 : JNC 0x00a8d538
00a8d535 : LEA EAX,[EBP + -0x28]
00a8d538 : MOV EDX,dword ptr [EBX]
00a8d53a : MOV ESI,dword ptr [EDI]
00a8d53c : PUSH EAX
00a8d53d : MOV EAX,dword ptr [EDX + 0x40]
00a8d540 : MOV ECX,EBX
00a8d542 : CALL EAX
00a8d544 : MOVZX EDX,word ptr [EBP + 0xc]
00a8d548 : MOVZX ECX,AX
00a8d54b : MOVZX EAX,word ptr [EBP + 0x8]
00a8d54f : PUSH ECX
00a8d550 : LEA ECX,[EAX + EDX*0x2]
00a8d553 : MOV EDX,dword ptr [ESI + 0x4]
00a8d556 : PUSH ECX
00a8d557 : PUSH 0xc70a7c
00a8d55c : PUSH 0xc70a88
00a8d561 : PUSH EDI
00a8d562 : CALL EDX
00a8d564 : ADD ESP,0x18
00a8d567 : XOR ESI,ESI
00a8d569 : MOV dword ptr [EBP + -0x4],0xffffffff
00a8d570 : CMP dword ptr [EBP + -0x14],0x8
00a8d574 : JC 0x00a8d57e
00a8d576 : MOV ECX,dword ptr [EBP + -0x28]
00a8d579 : CALL 0x006f04e0
00a8d57e : XOR EAX,EAX
00a8d580 : MOV dword ptr [EBP + -0x14],0x7
00a8d587 : MOV dword ptr [EBP + -0x18],ESI
00a8d58a : MOV word ptr [EBP + -0x28],AX
00a8d58e : MOV ECX,dword ptr [EBP + -0xc]
00a8d591 : MOV dword ptr FS:[0x0],ECX
00a8d598 : POP ECX
00a8d599 : POP EDI
00a8d59a : POP ESI
00a8d59b : POP EBX
00a8d59c : MOV ECX,dword ptr [EBP + -0x10]
00a8d59f : XOR ECX,EBP
00a8d5a1 : CALL 0x00633e6b
00a8d5a6 : MOV ESP,EBP
00a8d5a8 : POP EBP
00a8d5a9 : RET 0xc
