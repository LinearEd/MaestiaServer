PROGRAM  : Maestia.exe
FUNCTION : FUN_0055ae70
ENTRY    : 0055ae70
BODY     : [[0055ae70, 0055af5e]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0055ae70(int param_1)

{
  byte bVar1;
  int in_EAX;
  uint uVar2;
  int iVar3;
  GThread *this;
  GThread *extraout_ECX;
  int unaff_EBX;
  int iVar4;
  
  iVar4 = *(int *)(in_EAX + 0x314);
  if (iVar4 == 0) {
    iVar4 = in_EAX + 0x28;
  }
  *(undefined1 *)(iVar4 + 0x15) = 0;
  if (*(int *)(iVar4 + 0x30) - *(int *)(iVar4 + 0x2c) < 1) {
    FUN_0053a0a0();
  }
  bVar1 = *(byte *)(*(int *)(iVar4 + 0x2c) + *(int *)(iVar4 + 0x3c));
  this = (GThread *)CONCAT31((int3)((uint)*(int *)(iVar4 + 0x3c) >> 8),bVar1);
  *(int *)(iVar4 + 0x2c) = *(int *)(iVar4 + 0x2c) + 1;
  uVar2 = (uint)bVar1;
  if ((2 < param_1) && (uVar2 == 0xff)) {
    uVar2 = FUN_00500140();
    uVar2 = uVar2 & 0xffff;
    this = extraout_ECX;
  }
  iVar4 = *(int *)(in_EAX + 0x314);
  if (iVar4 == 0) {
    iVar4 = in_EAX + 0x28;
  }
  iVar4 = (*(int *)(iVar4 + 0x34) - *(int *)(iVar4 + 0x30)) + *(int *)(iVar4 + 0x2c);
  if (unaff_EBX != 0) {
    GThread::OnExit(this);
    if (uVar2 != 0) {
      FUN_0055a1a0(*(int *)(unaff_EBX + 4) + uVar2);
      for (; uVar2 != 0; uVar2 = uVar2 - 1) {
        iVar3 = *(int *)(in_EAX + 0x314);
        if (iVar3 == 0) {
          iVar3 = in_EAX + 0x28;
        }
        *(undefined1 *)(iVar3 + 0x15) = 0;
        FUN_005d67b0(in_EAX,param_1);
      }
    }
    return iVar4;
  }
  if (uVar2 != 0) {
    FUN_00555e50(in_EAX + 0x14,
                 "Error: GFx_ReadFillStyles, trying to read %d fillstyles into no-style shape\n",
                 uVar2);
  }
  return iVar4;
}



============================================================
DISASSEMBLY
============================================================
0055ae70 : PUSH ECX
0055ae71 : PUSH EBP
0055ae72 : PUSH ESI
0055ae73 : PUSH EDI
0055ae74 : MOV EDI,EAX
0055ae76 : MOV ESI,dword ptr [EDI + 0x314]
0055ae7c : TEST ESI,ESI
0055ae7e : JNZ 0x0055ae83
0055ae80 : LEA ESI,[EDI + 0x28]
0055ae83 : MOV EAX,dword ptr [ESI + 0x30]
0055ae86 : SUB EAX,dword ptr [ESI + 0x2c]
0055ae89 : MOV byte ptr [ESI + 0x15],0x0
0055ae8d : CMP EAX,0x1
0055ae90 : JGE 0x0055ae99
0055ae92 : MOV ECX,ESI
0055ae94 : CALL 0x0053a0a0
0055ae99 : MOV EAX,dword ptr [ESI + 0x2c]
0055ae9c : MOV ECX,dword ptr [ESI + 0x3c]
0055ae9f : MOV CL,byte ptr [EAX + ECX*0x1]
0055aea2 : INC EAX
0055aea3 : CMP dword ptr [ESP + 0x14],0x2
0055aea8 : MOV dword ptr [ESI + 0x2c],EAX
0055aeab : MOVZX EBP,CL
0055aeae : JLE 0x0055aec2
0055aeb0 : CMP EBP,0xff
0055aeb6 : JNZ 0x0055aec2
0055aeb8 : MOV ECX,EDI
0055aeba : CALL 0x00500140
0055aebf : MOVZX EBP,AX
0055aec2 : MOV EAX,dword ptr [EDI + 0x314]
0055aec8 : TEST EAX,EAX
0055aeca : JNZ 0x0055aecf
0055aecc : LEA EAX,[EDI + 0x28]
0055aecf : MOV ESI,dword ptr [EAX + 0x34]
0055aed2 : SUB ESI,dword ptr [EAX + 0x30]
0055aed5 : ADD ESI,dword ptr [EAX + 0x2c]
0055aed8 : MOV dword ptr [ESP + 0xc],ESI
0055aedc : TEST EBX,EBX
0055aede : JZ 0x0055af42
0055aee0 : PUSH EBP
0055aee1 : LEA EDX,[EDI + 0x14]
0055aee4 : PUSH 0xb8c480
0055aee9 : PUSH EDX
0055aeea : CALL 0x0051d420
0055aeef : MOV ESI,dword ptr [EBX + 0x4]
0055aef2 : ADD ESP,0xc
0055aef5 : TEST EBP,EBP
0055aef7 : JZ 0x0055af39
0055aef9 : LEA EAX,[ESI + EBP*0x1]
0055aefc : PUSH EAX
0055aefd : MOV ECX,EBX
0055aeff : CALL 0x0055a1a0
0055af04 : TEST EBP,EBP
0055af06 : JBE 0x0055af39
0055af08 : LEA ESI,[ESI + ESI*0x4]
0055af0b : ADD ESI,ESI
0055af0d : ADD ESI,ESI
0055af0f : ADD ESI,ESI
0055af11 : MOV EAX,dword ptr [EDI + 0x314]
0055af17 : TEST EAX,EAX
0055af19 : JNZ 0x0055af1e
0055af1b : LEA EAX,[EDI + 0x28]
0055af1e : MOV ECX,dword ptr [ESP + 0x14]
0055af22 : PUSH ECX
0055af23 : MOV byte ptr [EAX + 0x15],0x0
0055af27 : MOV ECX,dword ptr [EBX]
0055af29 : PUSH EDI
0055af2a : ADD ECX,ESI
0055af2c : CALL 0x005d67b0
0055af31 : ADD ESI,0x28
0055af34 : SUB EBP,0x1
0055af37 : JNZ 0x0055af11
0055af39 : MOV EAX,dword ptr [ESP + 0xc]
0055af3d : POP EDI
0055af3e : POP ESI
0055af3f : POP EBP
0055af40 : POP ECX
0055af41 : RET
0055af42 : TEST EBP,EBP
0055af44 : JBE 0x0055af58
0055af46 : PUSH EBP
0055af47 : PUSH 0xb8c430
0055af4c : ADD EDI,0x14
0055af4f : PUSH EDI
0055af50 : CALL 0x00555e50
0055af55 : ADD ESP,0xc
0055af58 : POP EDI
0055af59 : MOV EAX,ESI
0055af5b : POP ESI
0055af5c : POP EBP
0055af5d : POP ECX
0055af5e : RET
