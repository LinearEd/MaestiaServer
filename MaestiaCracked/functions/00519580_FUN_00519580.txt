PROGRAM  : Maestia.exe
FUNCTION : FUN_00519580
ENTRY    : 00519580
BODY     : [[00519580, 0051965a]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_00519580(uint param_1,uint *param_2,uint *param_3,uint *param_4)

{
  undefined4 uVar1;
  int iVar2;
  undefined4 *in_ECX;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint local_8;
  uint local_4;
  
  if ((uint)in_ECX[6] < param_1) {
    return 0;
  }
  if (param_1 != 0) {
    uVar3 = in_ECX[4];
    local_8 = in_ECX[3];
    uVar4 = in_ECX[1];
    uVar5 = in_ECX[2];
    if (param_1 != 0) {
      uVar1 = *in_ECX;
      local_4 = param_1;
      param_1 = uVar3;
      do {
        iVar2 = FUN_005194f0(uVar1,uVar4,uVar5);
        uVar3 = param_1 + iVar2;
        uVar4 = uVar4 >> 1;
        if (uVar4 == 0) {
          uVar4 = 1;
        }
        uVar5 = uVar5 >> 1;
        if (uVar5 == 0) {
          uVar5 = 1;
        }
        local_8 = local_8 >> 1;
        local_4 = local_4 - 1;
        param_1 = uVar3;
      } while (local_4 != 0);
    }
    if (param_2 != (uint *)0x0) {
      *param_2 = uVar4;
    }
    if (param_3 != (uint *)0x0) {
      *param_3 = uVar5;
    }
    if (param_4 != (uint *)0x0) {
      *param_4 = local_8;
    }
    return -(uint)(uVar3 < (uint)(in_ECX[5] + in_ECX[4])) & uVar3;
  }
  if (param_2 != (uint *)0x0) {
    *param_2 = in_ECX[1];
  }
  if (param_3 != (uint *)0x0) {
    *param_3 = in_ECX[2];
  }
  if (param_4 != (uint *)0x0) {
    *param_4 = in_ECX[3];
  }
  return in_ECX[4];
}



============================================================
DISASSEMBLY
============================================================
00519580 : MOV EAX,dword ptr [ESP + 0x4]
00519584 : SUB ESP,0x8
00519587 : PUSH EBX
00519588 : MOV EBX,ECX
0051958a : CMP EAX,dword ptr [EBX + 0x18]
0051958d : JBE 0x00519598
0051958f : XOR EAX,EAX
00519591 : POP EBX
00519592 : ADD ESP,0x8
00519595 : RET 0x10
00519598 : TEST EAX,EAX
0051959a : JNZ 0x005195cd
0051959c : MOV EAX,dword ptr [ESP + 0x14]
005195a0 : TEST EAX,EAX
005195a2 : JZ 0x005195a9
005195a4 : MOV ECX,dword ptr [EBX + 0x4]
005195a7 : MOV dword ptr [EAX],ECX
005195a9 : MOV EAX,dword ptr [ESP + 0x18]
005195ad : TEST EAX,EAX
005195af : JZ 0x005195b6
005195b1 : MOV EDX,dword ptr [EBX + 0x8]
005195b4 : MOV dword ptr [EAX],EDX
005195b6 : MOV EAX,dword ptr [ESP + 0x1c]
005195ba : TEST EAX,EAX
005195bc : JZ 0x005195c3
005195be : MOV ECX,dword ptr [EBX + 0xc]
005195c1 : MOV dword ptr [EAX],ECX
005195c3 : MOV EAX,dword ptr [EBX + 0x10]
005195c6 : POP EBX
005195c7 : ADD ESP,0x8
005195ca : RET 0x10
005195cd : MOV ECX,dword ptr [EBX + 0x10]
005195d0 : MOV EDX,dword ptr [EBX + 0xc]
005195d3 : PUSH ESI
005195d4 : MOV ESI,dword ptr [EBX + 0x4]
005195d7 : PUSH EDI
005195d8 : MOV EDI,dword ptr [EBX + 0x8]
005195db : MOV dword ptr [ESP + 0x18],ECX
005195df : MOV dword ptr [ESP + 0xc],EDX
005195e3 : TEST EAX,EAX
005195e5 : JBE 0x00519624
005195e7 : PUSH EBP
005195e8 : MOV EBP,dword ptr [EBX]
005195ea : MOV dword ptr [ESP + 0x14],EAX
005195ee : MOV EDI,EDI
005195f0 : PUSH EDI
005195f1 : PUSH ESI
005195f2 : PUSH EBP
005195f3 : CALL 0x005194f0
005195f8 : ADD dword ptr [ESP + 0x1c],EAX
005195fc : SHR ESI,0x1
005195fe : CMP ESI,0x1
00519601 : JNC 0x00519608
00519603 : MOV ESI,0x1
00519608 : SHR EDI,0x1
0051960a : CMP EDI,0x1
0051960d : JNC 0x00519614
0051960f : MOV EDI,0x1
00519614 : SHR dword ptr [ESP + 0x10],0x1
00519618 : SUB dword ptr [ESP + 0x14],0x1
0051961d : JNZ 0x005195f0
0051961f : MOV ECX,dword ptr [ESP + 0x1c]
00519623 : POP EBP
00519624 : MOV EAX,dword ptr [ESP + 0x1c]
00519628 : TEST EAX,EAX
0051962a : JZ 0x0051962e
0051962c : MOV dword ptr [EAX],ESI
0051962e : MOV EAX,dword ptr [ESP + 0x20]
00519632 : TEST EAX,EAX
00519634 : JZ 0x00519638
00519636 : MOV dword ptr [EAX],EDI
00519638 : MOV EAX,dword ptr [ESP + 0x24]
0051963c : POP EDI
0051963d : POP ESI
0051963e : TEST EAX,EAX
00519640 : JZ 0x00519648
00519642 : MOV EDX,dword ptr [ESP + 0x4]
00519646 : MOV dword ptr [EAX],EDX
00519648 : MOV EAX,dword ptr [EBX + 0x14]
0051964b : ADD EAX,dword ptr [EBX + 0x10]
0051964e : POP EBX
0051964f : CMP ECX,EAX
00519651 : SBB EAX,EAX
00519653 : AND EAX,ECX
00519655 : ADD ESP,0x8
00519658 : RET 0x10
