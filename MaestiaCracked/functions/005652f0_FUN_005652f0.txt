PROGRAM  : Maestia.exe
FUNCTION : FUN_005652f0
ENTRY    : 005652f0
BODY     : [[005652f0, 00565411]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005652f0(undefined4 param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  uint *puVar5;
  int *in_ECX;
  int iVar6;
  uint uVar7;
  int iVar8;
  
  piVar3 = (int *)*in_ECX;
  if (piVar3 == (int *)0x0) {
    iVar8 = 8;
  }
  else {
    if ((uint)(*piVar3 * 5) <= piVar3[1] * 4 + 4U) goto LAB_0056532c;
    iVar8 = piVar3[1] * 2 + 2;
  }
  FUN_005640d0(param_1,iVar8);
LAB_0056532c:
  piVar3 = (int *)*in_ECX;
  param_3 = param_3 & piVar3[1];
  *piVar3 = *piVar3 + 1;
  iVar8 = *in_ECX;
  puVar1 = (uint *)(param_3 * 0x10 + 8 + iVar8);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    FUN_0051c2c0(param_2);
    puVar1[3] = *(uint *)(param_2 + 4);
    puVar1[1] = param_3;
    return;
  }
  uVar7 = param_3;
  do {
    uVar7 = uVar7 + 1 & *(uint *)(iVar8 + 4);
  } while (*(int *)(iVar8 + 8 + uVar7 * 0x10) != -2);
  iVar2 = uVar7 * 0x10 + 8 + iVar8;
  if (puVar1[1] != param_3) {
    iVar6 = puVar1[1] * 0x10;
    uVar4 = *(uint *)(iVar6 + 8 + iVar8);
    while (puVar5 = (uint *)(iVar6 + 8 + iVar8), uVar4 != param_3) {
      iVar6 = *puVar5 * 0x10;
      uVar4 = *(uint *)(iVar6 + 8 + iVar8);
    }
    if (iVar2 != 0) {
      FUN_00562a90(puVar1);
    }
    *puVar5 = uVar7;
    FUN_0051bc20(param_2);
    puVar1[3] = *(uint *)(param_2 + 4);
    puVar1[1] = param_3;
    *puVar1 = 0xffffffff;
    return;
  }
  if (iVar2 != 0) {
    FUN_00562a90(puVar1);
  }
  FUN_0051bc20(param_2);
  puVar1[3] = *(uint *)(param_2 + 4);
  puVar1[1] = param_3;
  *puVar1 = uVar7;
  return;
}



============================================================
DISASSEMBLY
============================================================
005652f0 : PUSH EBX
005652f1 : PUSH EBP
005652f2 : PUSH ESI
005652f3 : MOV ESI,ECX
005652f5 : MOV EAX,dword ptr [ESI]
005652f7 : PUSH EDI
005652f8 : TEST EAX,EAX
005652fa : JNZ 0x00565305
005652fc : MOV EAX,dword ptr [ESP + 0x14]
00565300 : PUSH 0x8
00565302 : PUSH EAX
00565303 : JMP 0x00565327
00565305 : MOV ECX,dword ptr [EAX + 0x4]
00565308 : LEA EDX,[ECX*0x4 + 0x4]
0056530f : MOV ECX,dword ptr [EAX]
00565311 : LEA ECX,[ECX + ECX*0x4]
00565314 : CMP ECX,EDX
00565316 : JBE 0x0056532c
00565318 : MOV EDX,dword ptr [EAX + 0x4]
0056531b : MOV ECX,dword ptr [ESP + 0x14]
0056531f : LEA EAX,[EDX + EDX*0x1 + 0x2]
00565323 : PUSH EAX
00565324 : PUSH ECX
00565325 : MOV ECX,ESI
00565327 : CALL 0x005640d0
0056532c : MOV EAX,dword ptr [ESI]
0056532e : MOV EDI,dword ptr [ESP + 0x1c]
00565332 : AND EDI,dword ptr [EAX + 0x4]
00565335 : INC dword ptr [EAX]
00565337 : MOV EAX,dword ptr [ESI]
00565339 : MOV EDX,EDI
0056533b : SHL EDX,0x4
0056533e : LEA ESI,[EDX + EAX*0x1 + 0x8]
00565342 : MOV EDX,0xfffffffe
00565347 : CMP dword ptr [ESI],EDX
00565349 : JNZ 0x00565370
0056534b : MOV EBP,dword ptr [ESP + 0x18]
0056534f : LEA EBX,[ESI + 0x8]
00565352 : PUSH EBP
00565353 : MOV ECX,EBX
00565355 : MOV dword ptr [ESI],0xffffffff
0056535b : CALL 0x0051c2c0
00565360 : MOV EAX,dword ptr [EBP + 0x4]
00565363 : MOV dword ptr [EBX + 0x4],EAX
00565366 : MOV dword ptr [ESI + 0x4],EDI
00565369 : POP EDI
0056536a : POP ESI
0056536b : POP EBP
0056536c : POP EBX
0056536d : RET 0xc
00565370 : MOV ECX,dword ptr [EAX + 0x4]
00565373 : MOV EBX,EDI
00565375 : INC EBX
00565376 : AND EBX,ECX
00565378 : MOV EBP,EBX
0056537a : SHL EBP,0x4
0056537d : CMP dword ptr [EAX + EBP*0x1 + 0x8],EDX
00565381 : JNZ 0x00565375
00565383 : MOV EDX,dword ptr [ESI + 0x4]
00565386 : MOV ECX,EBX
00565388 : SHL ECX,0x4
0056538b : LEA ECX,[ECX + EAX*0x1 + 0x8]
0056538f : CMP EDX,EDI
00565391 : JNZ 0x005653c2
00565393 : TEST ECX,ECX
00565395 : JZ 0x0056539d
00565397 : PUSH ESI
00565398 : CALL 0x00562a90
0056539d : MOV EDX,dword ptr [ESP + 0x18]
005653a1 : LEA EBP,[ESI + 0x8]
005653a4 : PUSH EDX
005653a5 : MOV ECX,EBP
005653a7 : CALL 0x0051bc20
005653ac : MOV EAX,dword ptr [ESP + 0x18]
005653b0 : MOV ECX,dword ptr [EAX + 0x4]
005653b3 : MOV dword ptr [EBP + 0x4],ECX
005653b6 : MOV dword ptr [ESI + 0x4],EDI
005653b9 : POP EDI
005653ba : MOV dword ptr [ESI],EBX
005653bc : POP ESI
005653bd : POP EBP
005653be : POP EBX
005653bf : RET 0xc
005653c2 : SHL EDX,0x4
005653c5 : CMP dword ptr [EDX + EAX*0x1 + 0x8],EDI
005653c9 : LEA EBP,[EDX + EAX*0x1 + 0x8]
005653cd : JZ 0x005653e0
005653cf : NOP
005653d0 : MOV EDX,dword ptr [EBP]
005653d3 : SHL EDX,0x4
005653d6 : CMP dword ptr [EDX + EAX*0x1 + 0x8],EDI
005653da : LEA EBP,[EDX + EAX*0x1 + 0x8]
005653de : JNZ 0x005653d0
005653e0 : TEST ECX,ECX
005653e2 : JZ 0x005653ea
005653e4 : PUSH ESI
005653e5 : CALL 0x00562a90
005653ea : MOV dword ptr [EBP],EBX
005653ed : MOV EBP,dword ptr [ESP + 0x18]
005653f1 : LEA EBX,[ESI + 0x8]
005653f4 : PUSH EBP
005653f5 : MOV ECX,EBX
005653f7 : CALL 0x0051bc20
005653fc : MOV EAX,dword ptr [EBP + 0x4]
005653ff : MOV dword ptr [EBX + 0x4],EAX
00565402 : MOV dword ptr [ESI + 0x4],EDI
00565405 : POP EDI
00565406 : MOV dword ptr [ESI],0xffffffff
0056540c : POP ESI
0056540d : POP EBP
0056540e : POP EBX
0056540f : RET 0xc
