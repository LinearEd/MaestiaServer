PROGRAM  : Maestia.exe
FUNCTION : FUN_0052b270
ENTRY    : 0052b270
BODY     : [[0052b270, 0052b416]]

============================================================
DECOMPILED C CODE
============================================================

char FUN_0052b270(int param_1,char *param_2,undefined4 *param_3,int *param_4)

{
  char *pcVar1;
  char cVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  undefined4 *puVar7;
  int *piVar8;
  int iVar9;
  float10 fVar10;
  int local_c;
  int local_8 [2];
  
  cVar3 = *param_2;
  piVar6 = *(int **)(param_1 + 0x74);
  cVar2 = '\0';
  if (cVar3 == '\x05') {
    FUN_005272e0(&param_2,param_1,0xffffffff,0);
    iVar4 = FUN_00524bc0();
    iVar9 = 0;
    if (0 < iVar4) {
      do {
        iVar5 = FUN_00524bf0(iVar9);
        if (iVar5 == 0x3a) {
          FUN_005257b0(&local_c,0,iVar9);
          piVar6 = (int *)FUN_0052add0(&local_c,0);
          if (piVar6 != (int *)0x0) {
            if (iVar9 < iVar4) {
              puVar7 = (undefined4 *)FUN_005257b0(local_8,iVar9 + 1,iVar4 + 1);
              pcVar1 = (char *)*puVar7;
              *(int *)(pcVar1 + 8) = *(int *)(pcVar1 + 8) + 1;
              *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
              if (*(int *)(param_2 + 8) == 0) {
                FUN_00525340();
              }
              piVar8 = (int *)(local_8[0] + 8);
              *piVar8 = *piVar8 + -1;
              param_2 = pcVar1;
              if (*piVar8 == 0) {
                FUN_00525340();
              }
              *(int *)(local_c + 8) = *(int *)(local_c + 8) + -1;
              if (*(int *)(local_c + 8) == 0) {
                FUN_00525340();
              }
              break;
            }
            piVar6 = (int *)0x0;
          }
          *(int *)(local_c + 8) = *(int *)(local_c + 8) + -1;
          if (*(int *)(local_c + 8) == 0) {
            FUN_00525340();
          }
        }
        iVar9 = iVar9 + 1;
      } while (iVar9 < iVar4);
    }
    if ((piVar6 != (int *)0x0) &&
       (cVar3 = (**(code **)(*piVar6 + 0x11c))(*(undefined4 *)param_2,param_4,1), cVar3 != '\0')) {
      cVar2 = '\x01';
    }
    *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
    if (*(int *)(param_2 + 8) == 0) {
      FUN_00525340();
    }
    if (cVar2 == '\0') {
      return '\0';
    }
  }
  else {
    if (cVar3 == '\x06') {
      return '\0';
    }
    if ((cVar3 != '\x03') && (cVar3 != '\x04')) {
      return '\0';
    }
    fVar10 = (float10)FUN_00527730(param_1);
    local_8[0] = (int)(longlong)ROUND(fVar10 - (float10)1.0);
    *param_4 = local_8[0];
    cVar2 = '\x01';
  }
  if (param_3 != (undefined4 *)0x0) {
    *param_3 = piVar6;
  }
  return cVar2;
}



============================================================
DISASSEMBLY
============================================================
0052b270 : SUB ESP,0xc
0052b273 : MOV ECX,dword ptr [ESP + 0x14]
0052b277 : MOV AL,byte ptr [ECX]
0052b279 : PUSH EBX
0052b27a : PUSH EBP
0052b27b : MOV EBP,dword ptr [ESP + 0x18]
0052b27f : MOV EBX,dword ptr [EBP + 0x74]
0052b282 : XOR DL,DL
0052b284 : MOV byte ptr [ESP + 0x18],DL
0052b288 : CMP AL,0x5
0052b28a : JNZ 0x0052b3c6
0052b290 : PUSH ESI
0052b291 : PUSH EDI
0052b292 : PUSH 0x0
0052b294 : PUSH -0x1
0052b296 : PUSH EBP
0052b297 : LEA EAX,[ESP + 0x30]
0052b29b : PUSH EAX
0052b29c : CALL 0x005272e0
0052b2a1 : LEA ECX,[ESP + 0x24]
0052b2a5 : CALL 0x00524bc0
0052b2aa : MOV EDI,EAX
0052b2ac : XOR ESI,ESI
0052b2ae : TEST EDI,EDI
0052b2b0 : JLE 0x0052b369
0052b2b6 : PUSH ESI
0052b2b7 : LEA ECX,[ESP + 0x28]
0052b2bb : CALL 0x00524bf0
0052b2c0 : CMP EAX,0x3a
0052b2c3 : JNZ 0x0052b306
0052b2c5 : PUSH ESI
0052b2c6 : PUSH 0x0
0052b2c8 : LEA ECX,[ESP + 0x18]
0052b2cc : PUSH ECX
0052b2cd : LEA ECX,[ESP + 0x30]
0052b2d1 : CALL 0x005257b0
0052b2d6 : PUSH 0x0
0052b2d8 : LEA EDX,[ESP + 0x14]
0052b2dc : PUSH EDX
0052b2dd : MOV ECX,EBP
0052b2df : CALL 0x0052add0
0052b2e4 : MOV EBX,EAX
0052b2e6 : TEST EBX,EBX
0052b2e8 : JZ 0x0052b2f0
0052b2ea : CMP ESI,EDI
0052b2ec : JL 0x0052b30d
0052b2ee : XOR EBX,EBX
0052b2f0 : MOV EAX,dword ptr [ESP + 0x10]
0052b2f4 : DEC dword ptr [EAX + 0x8]
0052b2f7 : MOV ECX,EAX
0052b2f9 : ADD EAX,0x8
0052b2fc : CMP dword ptr [EAX],0x0
0052b2ff : JNZ 0x0052b306
0052b301 : CALL 0x00525340
0052b306 : INC ESI
0052b307 : CMP ESI,EDI
0052b309 : JL 0x0052b2b6
0052b30b : JMP 0x0052b369
0052b30d : INC EDI
0052b30e : PUSH EDI
0052b30f : INC ESI
0052b310 : PUSH ESI
0052b311 : LEA EAX,[ESP + 0x1c]
0052b315 : PUSH EAX
0052b316 : LEA ECX,[ESP + 0x30]
0052b31a : CALL 0x005257b0
0052b31f : MOV ESI,dword ptr [EAX]
0052b321 : INC dword ptr [ESI + 0x8]
0052b324 : MOV EAX,dword ptr [ESP + 0x24]
0052b328 : DEC dword ptr [EAX + 0x8]
0052b32b : MOV ECX,EAX
0052b32d : ADD EAX,0x8
0052b330 : CMP dword ptr [EAX],0x0
0052b333 : JNZ 0x0052b33a
0052b335 : CALL 0x00525340
0052b33a : MOV EAX,dword ptr [ESP + 0x14]
0052b33e : MOV ECX,EAX
0052b340 : ADD EAX,0x8
0052b343 : MOV dword ptr [ESP + 0x24],ESI
0052b347 : DEC dword ptr [EAX]
0052b349 : CMP dword ptr [EAX],0x0
0052b34c : JNZ 0x0052b353
0052b34e : CALL 0x00525340
0052b353 : MOV EAX,dword ptr [ESP + 0x10]
0052b357 : DEC dword ptr [EAX + 0x8]
0052b35a : MOV ECX,EAX
0052b35c : ADD EAX,0x8
0052b35f : CMP dword ptr [EAX],0x0
0052b362 : JNZ 0x0052b369
0052b364 : CALL 0x00525340
0052b369 : POP EDI
0052b36a : POP ESI
0052b36b : TEST EBX,EBX
0052b36d : JZ 0x0052b392
0052b36f : MOV ECX,dword ptr [ESP + 0x1c]
0052b373 : MOV EAX,dword ptr [ECX]
0052b375 : MOV ECX,dword ptr [ESP + 0x24]
0052b379 : MOV EDX,dword ptr [EBX]
0052b37b : MOV EDX,dword ptr [EDX + 0x11c]
0052b381 : PUSH 0x1
0052b383 : PUSH ECX
0052b384 : PUSH EAX
0052b385 : MOV ECX,EBX
0052b387 : CALL EDX
0052b389 : TEST AL,AL
0052b38b : JZ 0x0052b392
0052b38d : MOV byte ptr [ESP + 0x18],0x1
0052b392 : MOV EAX,dword ptr [ESP + 0x1c]
0052b396 : DEC dword ptr [EAX + 0x8]
0052b399 : MOV ECX,EAX
0052b39b : ADD EAX,0x8
0052b39e : CMP dword ptr [EAX],0x0
0052b3a1 : JNZ 0x0052b3a8
0052b3a3 : CALL 0x00525340
0052b3a8 : MOV AL,byte ptr [ESP + 0x18]
0052b3ac : TEST AL,AL
0052b3ae : JZ 0x0052b40f
0052b3b0 : MOV EAX,dword ptr [ESP + 0x20]
0052b3b4 : TEST EAX,EAX
0052b3b6 : JZ 0x0052b3ba
0052b3b8 : MOV dword ptr [EAX],EBX
0052b3ba : MOV AL,byte ptr [ESP + 0x18]
0052b3be : POP EBP
0052b3bf : POP EBX
0052b3c0 : ADD ESP,0xc
0052b3c3 : RET 0x10
0052b3c6 : CMP AL,0x6
0052b3c8 : JZ 0x0052b40d
0052b3ca : CMP AL,0x3
0052b3cc : JZ 0x0052b3d2
0052b3ce : CMP AL,0x4
0052b3d0 : JNZ 0x0052b40d
0052b3d2 : PUSH EBP
0052b3d3 : CALL 0x00527730
0052b3d8 : FSUB double ptr [0x00cdf108]
0052b3de : MOV ECX,dword ptr [ESP + 0x24]
0052b3e2 : FNSTCW word ptr [ESP + 0x18]
0052b3e6 : MOVZX EAX,word ptr [ESP + 0x18]
0052b3eb : OR EAX,0xc00
0052b3f0 : MOV dword ptr [ESP + 0x1c],EAX
0052b3f4 : FLDCW word ptr [ESP + 0x1c]
0052b3f8 : FISTP qword ptr [ESP + 0xc]
0052b3fc : MOV EAX,dword ptr [ESP + 0xc]
0052b400 : MOV dword ptr [ECX],EAX
0052b402 : FLDCW word ptr [ESP + 0x18]
0052b406 : MOV byte ptr [ESP + 0x18],0x1
0052b40b : JMP 0x0052b3b0
0052b40d : MOV AL,DL
0052b40f : POP EBP
0052b410 : POP EBX
0052b411 : ADD ESP,0xc
0052b414 : RET 0x10
