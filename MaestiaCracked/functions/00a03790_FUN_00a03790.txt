PROGRAM  : Maestia.exe
FUNCTION : FUN_00a03790
ENTRY    : 00a03790
BODY     : [[00a03790, 00a03af8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a03790(uint param_1,undefined4 param_2)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  undefined1 local_f0 [28];
  undefined1 local_d4 [32];
  undefined2 local_b4;
  undefined4 local_a4;
  uint local_a0;
  undefined2 local_98;
  undefined4 local_88;
  uint local_84;
  undefined2 local_7c;
  undefined4 local_6c;
  uint local_68;
  undefined2 local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [24];
  uint local_30;
  undefined1 local_2c [24];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b25441;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (param_1 < 0x20001) {
    if (param_1 == 0x20000) {
      FUN_00406460(L"IDS_BUILDUP_FIRE_ATTRIBUTE");
      local_8 = 6;
      iVar2 = FUN_0081d120(local_2c);
      local_8._0_1_ = 7;
      if (*(uint *)(iVar2 + 0x18) < 8) {
        iVar2 = iVar2 + 4;
      }
      else {
        iVar2 = *(int *)(iVar2 + 4);
      }
      uVar3 = FUN_00404750(iVar2,param_2);
      local_8._0_1_ = 8;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,7);
      if (7 < local_a0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_a0 = 7;
      local_a4 = 0;
      local_b4 = 0;
      local_8 = CONCAT31(local_8._1_3_,6);
      if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_84 = 7;
      local_88 = 0;
      local_98 = 0;
      local_8 = 0xffffffff;
      if (local_14 < 8) {
        ExceptionList = local_10;
        return;
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    if (param_1 == 0x8000) {
      FUN_00406460(L"IDS_BUILDUP_WATER_ATTRIBUTE");
      local_8 = 0;
      iVar2 = FUN_0081d120(local_d4);
      local_8._0_1_ = 1;
      if (*(uint *)(iVar2 + 0x18) < 8) {
        iVar2 = iVar2 + 4;
      }
      else {
        iVar2 = *(int *)(iVar2 + 4);
      }
      uVar3 = FUN_00404750(iVar2,param_2);
      local_8._0_1_ = 2;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_8._0_1_ = 1;
      FUN_00406560();
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
    if (param_1 == 0x10000) {
      FUN_00406460(L"IDS_BUILDUP_EARTH_ATTRIBUTE");
      local_8 = 3;
      iVar2 = FUN_0081d120(local_f0);
      local_8._0_1_ = 4;
      if (*(uint *)(iVar2 + 0x18) < 8) {
        iVar2 = iVar2 + 4;
      }
      else {
        iVar2 = *(int *)(iVar2 + 4);
      }
      uVar3 = FUN_00404750(iVar2,param_2,uVar1);
      local_8._0_1_ = 5;
      FUN_00405c30(uVar3,0,0xffffffff);
      local_8._0_1_ = 4;
      FUN_00406560();
      local_8 = CONCAT31(local_8._1_3_,3);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
  }
  else if (param_1 == 0x40000) {
    FUN_00406460(L"IDS_BUILDUP_WIND_ATTRIBUTE");
    local_8 = 9;
    iVar2 = FUN_0081d120(local_48);
    local_8._0_1_ = 10;
    if (*(uint *)(iVar2 + 0x18) < 8) {
      iVar2 = iVar2 + 4;
    }
    else {
      iVar2 = *(int *)(iVar2 + 4);
    }
    uVar3 = FUN_00404750(iVar2,param_2);
    local_8._0_1_ = 0xb;
    FUN_00405c30(uVar3,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,10);
    if (7 < local_68) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_68 = 7;
    local_6c = 0;
    local_7c = 0;
    local_8 = CONCAT31(local_8._1_3_,9);
    if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_4c = 7;
    local_50 = 0;
    local_60 = 0;
    local_8 = 0xffffffff;
    if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a03790 : PUSH EBP
00a03791 : MOV EBP,ESP
00a03793 : PUSH -0x1
00a03795 : PUSH 0xb25441
00a0379a : MOV EAX,FS:[0x0]
00a037a0 : PUSH EAX
00a037a1 : SUB ESP,0x150
00a037a7 : PUSH EBX
00a037a8 : PUSH ESI
00a037a9 : PUSH EDI
00a037aa : MOV EAX,[0x00d66fa0]
00a037af : XOR EAX,EBP
00a037b1 : PUSH EAX
00a037b2 : LEA EAX,[EBP + -0xc]
00a037b5 : MOV FS:[0x0],EAX
00a037bb : MOV EAX,dword ptr [EBP + 0x8]
00a037be : CMP EAX,0x20000
00a037c3 : JA 0x00a03a1d
00a037c9 : JZ 0x00a0392f
00a037cf : CMP EAX,0x8000
00a037d4 : JZ 0x00a0388a
00a037da : CMP EAX,0x10000
00a037df : JNZ 0x00a03ae5
00a037e5 : PUSH 0xca9310
00a037ea : LEA ECX,[EBP + 0xffffff14]
00a037f0 : CALL 0x00406460
00a037f5 : MOV dword ptr [EBP + -0x4],0x3
00a037fc : MOV ECX,dword ptr [0x0172491c]
00a03802 : LEA EAX,[EBP + 0xffffff14]
00a03808 : PUSH EAX
00a03809 : LEA EDI,[EBP + 0xfffffef8]
00a0380f : CALL 0x0081d120
00a03814 : MOV BL,0x4
00a03816 : MOV byte ptr [EBP + -0x4],BL
00a03819 : CMP dword ptr [EAX + 0x18],0x8
00a0381d : JC 0x00a03824
00a0381f : MOV EAX,dword ptr [EAX + 0x4]
00a03822 : JMP 0x00a03827
00a03824 : ADD EAX,0x4
00a03827 : MOV ECX,dword ptr [EBP + 0xc]
00a0382a : PUSH ECX
00a0382b : PUSH EAX
00a0382c : LEA ESI,[EBP + 0xfffffec0]
00a03832 : CALL 0x00404750
00a03837 : ADD ESP,0x8
00a0383a : MOV byte ptr [EBP + -0x4],0x5
00a0383e : MOV ECX,dword ptr [EBP + 0x10]
00a03841 : PUSH -0x1
00a03843 : PUSH 0x0
00a03845 : PUSH EAX
00a03846 : CALL 0x00405c30
00a0384b : MOV byte ptr [EBP + -0x4],BL
00a0384e : MOV ECX,ESI
00a03850 : CALL 0x00406560
00a03855 : MOV byte ptr [EBP + -0x4],0x3
00a03859 : LEA ECX,[EBP + 0xfffffef8]
00a0385f : CALL 0x00406560
00a03864 : MOV dword ptr [EBP + -0x4],0xffffffff
00a0386b : LEA ECX,[EBP + 0xffffff14]
00a03871 : CALL 0x00406560
00a03876 : MOV ECX,dword ptr [EBP + -0xc]
00a03879 : MOV dword ptr FS:[0x0],ECX
00a03880 : POP ECX
00a03881 : POP EDI
00a03882 : POP ESI
00a03883 : POP EBX
00a03884 : MOV ESP,EBP
00a03886 : POP EBP
00a03887 : RET 0xc
00a0388a : PUSH 0xca92d8
00a0388f : LEA ECX,[EBP + 0xffffff30]
00a03895 : CALL 0x00406460
00a0389a : MOV dword ptr [EBP + -0x4],0x0
00a038a1 : MOV ECX,dword ptr [0x0172491c]
00a038a7 : LEA EDX,[EBP + 0xffffff30]
00a038ad : PUSH EDX
00a038ae : LEA EDI,[EBP + 0xfffffea4]
00a038b4 : CALL 0x0081d120
00a038b9 : MOV BL,0x1
00a038bb : MOV byte ptr [EBP + -0x4],BL
00a038be : CMP dword ptr [EAX + 0x18],0x8
00a038c2 : JC 0x00a038c9
00a038c4 : MOV EAX,dword ptr [EAX + 0x4]
00a038c7 : JMP 0x00a038cc
00a038c9 : ADD EAX,0x4
00a038cc : MOV ECX,dword ptr [EBP + 0xc]
00a038cf : PUSH ECX
00a038d0 : PUSH EAX
00a038d1 : LEA ESI,[EBP + 0xfffffedc]
00a038d7 : CALL 0x00404750
00a038dc : ADD ESP,0x8
00a038df : MOV byte ptr [EBP + -0x4],0x2
00a038e3 : MOV ECX,dword ptr [EBP + 0x10]
00a038e6 : PUSH -0x1
00a038e8 : PUSH 0x0
00a038ea : PUSH EAX
00a038eb : CALL 0x00405c30
00a038f0 : MOV byte ptr [EBP + -0x4],BL
00a038f3 : MOV ECX,ESI
00a038f5 : CALL 0x00406560
00a038fa : MOV byte ptr [EBP + -0x4],0x0
00a038fe : LEA ECX,[EBP + 0xfffffea4]
00a03904 : CALL 0x00406560
00a03909 : MOV dword ptr [EBP + -0x4],0xffffffff
00a03910 : LEA ECX,[EBP + 0xffffff30]
00a03916 : CALL 0x00406560
00a0391b : MOV ECX,dword ptr [EBP + -0xc]
00a0391e : MOV dword ptr FS:[0x0],ECX
00a03925 : POP ECX
00a03926 : POP EDI
00a03927 : POP ESI
00a03928 : POP EBX
00a03929 : MOV ESP,EBP
00a0392b : POP EBP
00a0392c : RET 0xc
00a0392f : PUSH 0xca9348
00a03934 : LEA ECX,[EBP + -0x28]
00a03937 : CALL 0x00406460
00a0393c : MOV dword ptr [EBP + -0x4],0x6
00a03943 : MOV ECX,dword ptr [0x0172491c]
00a03949 : LEA EDX,[EBP + -0x28]
00a0394c : PUSH EDX
00a0394d : LEA EDI,[EBP + 0xffffff68]
00a03953 : CALL 0x0081d120
00a03958 : MOV byte ptr [EBP + -0x4],0x7
00a0395c : MOV EBX,0x8
00a03961 : CMP dword ptr [EAX + 0x18],EBX
00a03964 : JC 0x00a0396b
00a03966 : MOV EAX,dword ptr [EAX + 0x4]
00a03969 : JMP 0x00a0396e
00a0396b : ADD EAX,0x4
00a0396e : MOV ECX,dword ptr [EBP + 0xc]
00a03971 : PUSH ECX
00a03972 : PUSH EAX
00a03973 : LEA ESI,[EBP + 0xffffff4c]
00a03979 : CALL 0x00404750
00a0397e : ADD ESP,0x8
00a03981 : MOV byte ptr [EBP + -0x4],BL
00a03984 : MOV ECX,dword ptr [EBP + 0x10]
00a03987 : PUSH -0x1
00a03989 : XOR EDI,EDI
00a0398b : PUSH EDI
00a0398c : PUSH EAX
00a0398d : CALL 0x00405c30
00a03992 : MOV byte ptr [EBP + -0x4],0x7
00a03996 : CMP dword ptr [EBP + 0xffffff64],EBX
00a0399c : JC 0x00a039a9
00a0399e : MOV ECX,dword ptr [EBP + 0xffffff50]
00a039a4 : CALL 0x006f04e0
00a039a9 : MOV ESI,0x7
00a039ae : XOR EDX,EDX
00a039b0 : MOV dword ptr [EBP + 0xffffff64],ESI
00a039b6 : MOV dword ptr [EBP + 0xffffff60],EDI
00a039bc : MOV word ptr [EBP + 0xffffff50],DX
00a039c3 : MOV byte ptr [EBP + -0x4],0x6
00a039c7 : CMP dword ptr [EBP + -0x80],EBX
00a039ca : JC 0x00a039d7
00a039cc : MOV ECX,dword ptr [EBP + 0xffffff6c]
00a039d2 : CALL 0x006f04e0
00a039d7 : XOR EAX,EAX
00a039d9 : MOV dword ptr [EBP + -0x80],ESI
00a039dc : MOV dword ptr [EBP + 0xffffff7c],EDI
00a039e2 : MOV word ptr [EBP + 0xffffff6c],AX
00a039e9 : MOV dword ptr [EBP + -0x4],0xffffffff
00a039f0 : CMP dword ptr [EBP + -0x10],EBX
00a039f3 : JC 0x00a039fd
00a039f5 : MOV ECX,dword ptr [EBP + -0x24]
00a039f8 : CALL 0x006f04e0
00a039fd : XOR ECX,ECX
00a039ff : MOV dword ptr [EBP + -0x10],ESI
00a03a02 : MOV dword ptr [EBP + -0x14],EDI
00a03a05 : MOV word ptr [EBP + -0x24],CX
00a03a09 : MOV ECX,dword ptr [EBP + -0xc]
00a03a0c : MOV dword ptr FS:[0x0],ECX
00a03a13 : POP ECX
00a03a14 : POP EDI
00a03a15 : POP ESI
00a03a16 : POP EBX
00a03a17 : MOV ESP,EBP
00a03a19 : POP EBP
00a03a1a : RET 0xc
00a03a1d : CMP EAX,0x40000
00a03a22 : JNZ 0x00a03ae5
00a03a28 : PUSH 0xca9380
00a03a2d : LEA ECX,[EBP + -0x44]
00a03a30 : CALL 0x00406460
00a03a35 : MOV dword ptr [EBP + -0x4],0x9
00a03a3c : MOV ECX,dword ptr [0x0172491c]
00a03a42 : LEA EDX,[EBP + -0x44]
00a03a45 : PUSH EDX
00a03a46 : LEA EDI,[EBP + -0x60]
00a03a49 : CALL 0x0081d120
00a03a4e : MOV byte ptr [EBP + -0x4],0xa
00a03a52 : MOV EBX,0x8
00a03a57 : CMP dword ptr [EAX + 0x18],EBX
00a03a5a : JC 0x00a03a61
00a03a5c : MOV EAX,dword ptr [EAX + 0x4]
00a03a5f : JMP 0x00a03a64
00a03a61 : ADD EAX,0x4
00a03a64 : MOV ECX,dword ptr [EBP + 0xc]
00a03a67 : PUSH ECX
00a03a68 : PUSH EAX
00a03a69 : LEA ESI,[EBP + -0x7c]
00a03a6c : CALL 0x00404750
00a03a71 : ADD ESP,0x8
00a03a74 : MOV byte ptr [EBP + -0x4],0xb
00a03a78 : MOV ECX,dword ptr [EBP + 0x10]
00a03a7b : PUSH -0x1
00a03a7d : XOR EDI,EDI
00a03a7f : PUSH EDI
00a03a80 : PUSH EAX
00a03a81 : CALL 0x00405c30
00a03a86 : MOV byte ptr [EBP + -0x4],0xa
00a03a8a : CMP dword ptr [EBP + -0x64],EBX
00a03a8d : JC 0x00a03a97
00a03a8f : MOV ECX,dword ptr [EBP + -0x78]
00a03a92 : CALL 0x006f04e0
00a03a97 : MOV ESI,0x7
00a03a9c : XOR EDX,EDX
00a03a9e : MOV dword ptr [EBP + -0x64],ESI
00a03aa1 : MOV dword ptr [EBP + -0x68],EDI
00a03aa4 : MOV word ptr [EBP + -0x78],DX
00a03aa8 : MOV byte ptr [EBP + -0x4],0x9
00a03aac : CMP dword ptr [EBP + -0x48],EBX
00a03aaf : JC 0x00a03ab9
00a03ab1 : MOV ECX,dword ptr [EBP + -0x5c]
00a03ab4 : CALL 0x006f04e0
00a03ab9 : XOR EAX,EAX
00a03abb : MOV dword ptr [EBP + -0x48],ESI
00a03abe : MOV dword ptr [EBP + -0x4c],EDI
00a03ac1 : MOV word ptr [EBP + -0x5c],AX
00a03ac5 : MOV dword ptr [EBP + -0x4],0xffffffff
00a03acc : CMP dword ptr [EBP + -0x2c],EBX
00a03acf : JC 0x00a03ad9
00a03ad1 : MOV ECX,dword ptr [EBP + -0x40]
00a03ad4 : CALL 0x006f04e0
00a03ad9 : XOR ECX,ECX
00a03adb : MOV dword ptr [EBP + -0x2c],ESI
00a03ade : MOV dword ptr [EBP + -0x30],EDI
00a03ae1 : MOV word ptr [EBP + -0x40],CX
00a03ae5 : MOV ECX,dword ptr [EBP + -0xc]
00a03ae8 : MOV dword ptr FS:[0x0],ECX
00a03aef : POP ECX
00a03af0 : POP EDI
00a03af1 : POP ESI
00a03af2 : POP EBX
00a03af3 : MOV ESP,EBP
00a03af5 : POP EBP
00a03af6 : RET 0xc
