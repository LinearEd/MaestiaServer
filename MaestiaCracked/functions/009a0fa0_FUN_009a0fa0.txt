PROGRAM  : Maestia.exe
FUNCTION : FUN_009a0fa0
ENTRY    : 009a0fa0
BODY     : [[009a0fa0, 009a1005] [009a1010, 009a136c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a0fa0(int *param_1,ushort param_2)

{
  wchar_t wVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  wchar_t *pwVar5;
  undefined4 uVar6;
  char *pcVar7;
  undefined *puVar8;
  uint local_130;
  uint local_114;
  uint local_f8;
  undefined1 local_f4 [4];
  undefined2 local_f0;
  undefined4 local_e0;
  uint local_dc;
  undefined1 local_d8 [4];
  undefined2 local_d4;
  undefined4 local_c4;
  uint local_c0;
  undefined1 local_bc [4];
  undefined2 local_b8;
  undefined4 local_a8;
  uint local_a4;
  int local_a0;
  int *local_9c;
  ushort *local_98;
  wchar_t local_94;
  undefined1 local_92 [126];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2d5d9;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_9c = param_1;
  iVar2 = FUN_00703c00(0x1602,local_14);
  if (iVar2 != 0) {
    local_98 = (ushort *)(iVar2 + 0x48);
    local_a0 = 0;
    do {
      iVar2 = local_a0;
      if (local_a0 < 4) {
        *(bool *)((int)param_1 + local_a0 + 0x68) = *local_98 <= param_2;
      }
      iVar3 = *DAT_00da9894;
      if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
        (**(code **)(**(int **)(iVar3 + 0x114) + 4))
                  (*(int **)(iVar3 + 0x114),"SetHalidomSlotOpen","%d,%b",local_a0,
                   *(undefined1 *)((int)param_1 + local_a0 + 0x68));
      }
      if ((*(char *)((int)param_1 + iVar2 + 0x68) != '\0') && (iVar3 = *DAT_00da9894, iVar3 != 0)) {
        if (*(int *)(iVar3 + 0x114) == 0) {
          if ((iVar3 == 0) || (*(int *)(iVar3 + 0x114) == 0)) goto LAB_009a10b0;
          puVar8 = &DAT_00c893c4;
          pcVar7 = "mc_quickslot.PassiveHalidomSlotClose";
        }
        else {
          puVar8 = &DAT_00c8939c;
          pcVar7 = "mc_quickslot.PassiveHalidomSlotOpen";
        }
        (**(code **)(**(int **)(iVar3 + 0x114) + 4))(*(int **)(iVar3 + 0x114),pcVar7,puVar8,iVar2);
      }
LAB_009a10b0:
      iVar3 = (**(code **)(*param_1 + 0x98))(iVar2 + 0xe);
      if (iVar3 != 0) {
        if (*(char *)((int)local_9c + iVar2 + 0x68) == '\0') {
          __snwprintf(&local_94,0x3f,L"IDS_HALIDOM_CLOSE_SLOT_TOOLTIP%d",iVar2);
          pwVar5 = &local_94;
          local_a4 = 7;
          local_a8 = 0;
          local_b8 = 0;
          do {
            wVar1 = *pwVar5;
            pwVar5 = pwVar5 + 1;
          } while (wVar1 != L'\0');
          FUN_00406360(&local_94,(int)pwVar5 - (int)local_92 >> 1);
          local_8 = 3;
          iVar2 = FUN_0081d120(local_bc);
          local_8._0_1_ = 4;
          if (*(uint *)(iVar2 + 0x18) < 8) {
            iVar2 = iVar2 + 4;
          }
          else {
            iVar2 = *(int *)(iVar2 + 4);
          }
          uVar6 = FUN_00404750(iVar2);
          local_8._0_1_ = 5;
          FUN_00405eb0(uVar6,0,0xffffffff);
          FUN_00908bc0(iVar3);
          local_8 = CONCAT31(local_8._1_3_,4);
          if (7 < local_f8) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_f8 = 7;
          local_8 = CONCAT31(local_8._1_3_,3);
          if (7 < local_114) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_114 = 7;
          local_8 = 0xffffffff;
          if (7 < local_a4) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_a8 = 0;
          local_a4 = 7;
          local_b8 = 0;
          iVar2 = local_a0;
        }
        else if (*(int *)(iVar3 + 8) == 0) {
          FUN_00406460(L"IDS_HALIDOM_OPEN_SLOT_TOOLTIP");
          local_8 = 0;
          iVar4 = FUN_0081d120(local_f4);
          local_8._0_1_ = 1;
          if (*(uint *)(iVar4 + 0x18) < 8) {
            iVar4 = iVar4 + 4;
          }
          else {
            iVar4 = *(int *)(iVar4 + 4);
          }
          FUN_00406460(iVar4);
          local_8._0_1_ = 2;
          FUN_00405eb0(local_d8,0,0xffffffff);
          FUN_00908bc0(iVar3);
          local_8 = CONCAT31(local_8._1_3_,1);
          if (7 < local_c0) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_c0 = 7;
          local_c4 = 0;
          local_d4 = 0;
          local_8 = (uint)local_8._1_3_ << 8;
          if (7 < local_130) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_130 = 7;
          local_8 = 0xffffffff;
          if (7 < local_dc) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_dc = 7;
          local_e0 = 0;
          local_f0 = 0;
        }
      }
      local_a0 = iVar2 + 1;
      local_98 = local_98 + 2;
      param_1 = local_9c;
    } while (local_a0 < 6);
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009a0fa0 : PUSH EBP
009a0fa1 : MOV EBP,ESP
009a0fa3 : PUSH -0x1
009a0fa5 : PUSH 0xb2d5d9
009a0faa : MOV EAX,FS:[0x0]
009a0fb0 : PUSH EAX
009a0fb1 : SUB ESP,0x138
009a0fb7 : MOV EAX,[0x00d66fa0]
009a0fbc : XOR EAX,EBP
009a0fbe : MOV dword ptr [EBP + -0x10],EAX
009a0fc1 : PUSH EBX
009a0fc2 : PUSH ESI
009a0fc3 : PUSH EDI
009a0fc4 : PUSH EAX
009a0fc5 : LEA EAX,[EBP + -0xc]
009a0fc8 : MOV FS:[0x0],EAX
009a0fce : MOV EBX,dword ptr [EBP + 0x8]
009a0fd1 : PUSH 0x1602
009a0fd6 : MOV EDI,0x271b
009a0fdb : MOV dword ptr [EBP + 0xffffff68],EBX
009a0fe1 : CALL 0x00703c00
009a0fe6 : XOR EDI,EDI
009a0fe8 : ADD ESP,0x4
009a0feb : CMP EAX,EDI
009a0fed : JZ 0x009a134f
009a0ff3 : XOR ESI,ESI
009a0ff5 : ADD EAX,0x48
009a0ff8 : MOV dword ptr [EBP + 0xffffff64],ESI
009a0ffe : MOV dword ptr [EBP + 0xffffff6c],EAX
009a1004 : JMP 0x009a1018
009a1010 : MOV EBX,dword ptr [EBP + 0xffffff68]
009a1016 : XOR EDI,EDI
009a1018 : CMP ESI,0x4
009a101b : MOVZX EAX,word ptr [EAX]
009a101e : JGE 0x009a102b
009a1020 : CMP word ptr [EBP + 0xc],AX
009a1024 : SETNC AL
009a1027 : MOV byte ptr [EBX + ESI*0x1 + 0x68],AL
009a102b : MOV ECX,dword ptr [0x00da9894]
009a1031 : MOV EAX,dword ptr [ECX]
009a1033 : CMP EAX,EDI
009a1035 : JZ 0x009a1061
009a1037 : CMP dword ptr [EAX + 0x114],EDI
009a103d : JZ 0x009a1061
009a103f : MOVZX ECX,byte ptr [EBX + ESI*0x1 + 0x68]
009a1044 : MOV EAX,dword ptr [EAX + 0x114]
009a104a : MOV EDX,dword ptr [EAX]
009a104c : MOV EDX,dword ptr [EDX + 0x4]
009a104f : PUSH ECX
009a1050 : PUSH ESI
009a1051 : PUSH 0xc89380
009a1056 : PUSH 0xc89388
009a105b : PUSH EAX
009a105c : CALL EDX
009a105e : ADD ESP,0x14
009a1061 : CMP byte ptr [EBX + ESI*0x1 + 0x68],0x0
009a1066 : JZ 0x009a10b0
009a1068 : MOV EAX,[0x00da9894]
009a106d : MOV EAX,dword ptr [EAX]
009a106f : CMP EAX,EDI
009a1071 : JZ 0x009a10b0
009a1073 : CMP dword ptr [EAX + 0x114],EDI
009a1079 : JZ 0x009a1088
009a107b : PUSH ESI
009a107c : PUSH 0xc8939c
009a1081 : PUSH 0xc893a0
009a1086 : JMP 0x009a109f
009a1088 : CMP EAX,EDI
009a108a : JZ 0x009a10b0
009a108c : CMP dword ptr [EAX + 0x114],EDI
009a1092 : JZ 0x009a10b0
009a1094 : PUSH ESI
009a1095 : PUSH 0xc893c4
009a109a : PUSH 0xc893c8
009a109f : MOV EAX,dword ptr [EAX + 0x114]
009a10a5 : MOV ECX,dword ptr [EAX]
009a10a7 : MOV EDX,dword ptr [ECX + 0x4]
009a10aa : PUSH EAX
009a10ab : CALL EDX
009a10ad : ADD ESP,0x10
009a10b0 : MOV EAX,dword ptr [EBX]
009a10b2 : MOV EDX,dword ptr [EAX + 0x98]
009a10b8 : LEA ECX,[ESI + 0xe]
009a10bb : PUSH ECX
009a10bc : MOV ECX,EBX
009a10be : CALL EDX
009a10c0 : MOV EBX,EAX
009a10c2 : CMP EBX,EDI
009a10c4 : JZ 0x009a1330
009a10ca : MOV EAX,dword ptr [EBP + 0xffffff68]
009a10d0 : CMP byte ptr [EAX + ESI*0x1 + 0x68],0x0
009a10d5 : JZ 0x009a11e7
009a10db : CMP dword ptr [EBX + 0x8],EDI
009a10de : JNZ 0x009a1330
009a10e4 : PUSH 0xc893f0
009a10e9 : LEA ECX,[EBP + 0xffffff10]
009a10ef : CALL 0x00406460
009a10f4 : MOV dword ptr [EBP + -0x4],EDI
009a10f7 : LEA ECX,[EBP + 0xffffff10]
009a10fd : PUSH ECX
009a10fe : MOV ECX,dword ptr [0x0172491c]
009a1104 : LEA EDI,[EBP + 0xfffffebc]
009a110a : CALL 0x0081d120
009a110f : MOV byte ptr [EBP + -0x4],0x1
009a1113 : CMP dword ptr [EAX + 0x18],0x8
009a1117 : JC 0x009a111e
009a1119 : MOV EAX,dword ptr [EAX + 0x4]
009a111c : JMP 0x009a1121
009a111e : ADD EAX,0x4
009a1121 : PUSH EAX
009a1122 : LEA ECX,[EBP + 0xffffff2c]
009a1128 : CALL 0x00406460
009a112d : MOV byte ptr [EBP + -0x4],0x2
009a1131 : PUSH -0x1
009a1133 : XOR EDI,EDI
009a1135 : PUSH EDI
009a1136 : LEA EDX,[EBP + 0xffffff2c]
009a113c : PUSH EDX
009a113d : LEA ECX,[EBX + 0x3c]
009a1140 : CALL 0x00405eb0
009a1145 : PUSH EBX
009a1146 : CALL 0x00908bc0
009a114b : MOV byte ptr [EBP + -0x4],0x1
009a114f : MOV EBX,0x8
009a1154 : CMP dword ptr [EBP + 0xffffff44],EBX
009a115a : JC 0x009a1167
009a115c : MOV ECX,dword ptr [EBP + 0xffffff30]
009a1162 : CALL 0x006f04e0
009a1167 : XOR EAX,EAX
009a1169 : MOV dword ptr [EBP + 0xffffff44],0x7
009a1173 : MOV dword ptr [EBP + 0xffffff40],EDI
009a1179 : MOV word ptr [EBP + 0xffffff30],AX
009a1180 : MOV byte ptr [EBP + -0x4],AL
009a1183 : CMP dword ptr [EBP + 0xfffffed4],EBX
009a1189 : JC 0x009a1196
009a118b : MOV ECX,dword ptr [EBP + 0xfffffec0]
009a1191 : CALL 0x006f04e0
009a1196 : XOR ECX,ECX
009a1198 : MOV dword ptr [EBP + 0xfffffed4],0x7
009a11a2 : MOV dword ptr [EBP + 0xfffffed0],EDI
009a11a8 : MOV word ptr [EBP + 0xfffffec0],CX
009a11af : MOV dword ptr [EBP + -0x4],0xffffffff
009a11b6 : CMP dword ptr [EBP + 0xffffff28],EBX
009a11bc : JC 0x009a11c9
009a11be : MOV ECX,dword ptr [EBP + 0xffffff14]
009a11c4 : CALL 0x006f04e0
009a11c9 : XOR EDX,EDX
009a11cb : MOV dword ptr [EBP + 0xffffff28],0x7
009a11d5 : MOV dword ptr [EBP + 0xffffff24],EDI
009a11db : MOV word ptr [EBP + 0xffffff14],DX
009a11e2 : JMP 0x009a1330
009a11e7 : PUSH ESI
009a11e8 : PUSH 0xc89440
009a11ed : LEA EAX,[EBP + 0xffffff70]
009a11f3 : PUSH 0x3f
009a11f5 : PUSH EAX
009a11f6 : CALL 0x006343c8
009a11fb : ADD ESP,0x10
009a11fe : XOR ECX,ECX
009a1200 : LEA EAX,[EBP + 0xffffff70]
009a1206 : MOV dword ptr [EBP + 0xffffff60],0x7
009a1210 : MOV dword ptr [EBP + 0xffffff5c],EDI
009a1216 : MOV word ptr [EBP + 0xffffff4c],CX
009a121d : LEA EDX,[EAX + 0x2]
009a1220 : MOV CX,word ptr [EAX]
009a1223 : ADD EAX,0x2
009a1226 : CMP CX,DI
009a1229 : JNZ 0x009a1220
009a122b : SUB EAX,EDX
009a122d : SAR EAX,0x1
009a122f : PUSH EAX
009a1230 : LEA EDX,[EBP + 0xffffff70]
009a1236 : PUSH EDX
009a1237 : LEA ECX,[EBP + 0xffffff48]
009a123d : CALL 0x00406360
009a1242 : MOV dword ptr [EBP + -0x4],0x3
009a1249 : MOV ECX,dword ptr [0x0172491c]
009a124f : LEA EAX,[EBP + 0xffffff48]
009a1255 : PUSH EAX
009a1256 : LEA EDI,[EBP + 0xfffffed8]
009a125c : CALL 0x0081d120
009a1261 : MOV byte ptr [EBP + -0x4],0x4
009a1265 : MOV EDI,0x8
009a126a : CMP dword ptr [EAX + 0x18],EDI
009a126d : JC 0x009a1274
009a126f : MOV EAX,dword ptr [EAX + 0x4]
009a1272 : JMP 0x009a1277
009a1274 : ADD EAX,0x4
009a1277 : PUSH EAX
009a1278 : LEA ESI,[EBP + 0xfffffef4]
009a127e : CALL 0x00404750
009a1283 : ADD ESP,0x4
009a1286 : MOV byte ptr [EBP + -0x4],0x5
009a128a : PUSH -0x1
009a128c : XOR ESI,ESI
009a128e : PUSH ESI
009a128f : PUSH EAX
009a1290 : LEA ECX,[EBX + 0x3c]
009a1293 : CALL 0x00405eb0
009a1298 : PUSH EBX
009a1299 : CALL 0x00908bc0
009a129e : MOV byte ptr [EBP + -0x4],0x4
009a12a2 : CMP dword ptr [EBP + 0xffffff0c],EDI
009a12a8 : JC 0x009a12b5
009a12aa : MOV ECX,dword ptr [EBP + 0xfffffef8]
009a12b0 : CALL 0x006f04e0
009a12b5 : MOV EBX,0x7
009a12ba : XOR ECX,ECX
009a12bc : MOV dword ptr [EBP + 0xffffff0c],EBX
009a12c2 : MOV dword ptr [EBP + 0xffffff08],ESI
009a12c8 : MOV word ptr [EBP + 0xfffffef8],CX
009a12cf : MOV byte ptr [EBP + -0x4],0x3
009a12d3 : CMP dword ptr [EBP + 0xfffffef0],EDI
009a12d9 : JC 0x009a12e6
009a12db : MOV ECX,dword ptr [EBP + 0xfffffedc]
009a12e1 : CALL 0x006f04e0
009a12e6 : XOR EDX,EDX
009a12e8 : MOV dword ptr [EBP + 0xfffffef0],EBX
009a12ee : MOV dword ptr [EBP + 0xfffffeec],ESI
009a12f4 : MOV word ptr [EBP + 0xfffffedc],DX
009a12fb : MOV dword ptr [EBP + -0x4],0xffffffff
009a1302 : CMP dword ptr [EBP + 0xffffff60],EDI
009a1308 : JC 0x009a1315
009a130a : MOV ECX,dword ptr [EBP + 0xffffff4c]
009a1310 : CALL 0x006f04e0
009a1315 : XOR EAX,EAX
009a1317 : MOV dword ptr [EBP + 0xffffff5c],ESI
009a131d : MOV ESI,dword ptr [EBP + 0xffffff64]
009a1323 : MOV dword ptr [EBP + 0xffffff60],EBX
009a1329 : MOV word ptr [EBP + 0xffffff4c],AX
009a1330 : MOV EAX,dword ptr [EBP + 0xffffff6c]
009a1336 : INC ESI
009a1337 : ADD EAX,0x4
009a133a : CMP ESI,0x6
009a133d : MOV dword ptr [EBP + 0xffffff64],ESI
009a1343 : MOV dword ptr [EBP + 0xffffff6c],EAX
009a1349 : JL 0x009a1010
009a134f : MOV ECX,dword ptr [EBP + -0xc]
009a1352 : MOV dword ptr FS:[0x0],ECX
009a1359 : POP ECX
009a135a : POP EDI
009a135b : POP ESI
009a135c : POP EBX
009a135d : MOV ECX,dword ptr [EBP + -0x10]
009a1360 : XOR ECX,EBP
009a1362 : CALL 0x00633e6b
009a1367 : MOV ESP,EBP
009a1369 : POP EBP
009a136a : RET 0x8
