PROGRAM  : Maestia.exe
FUNCTION : FUN_0052a650
ENTRY    : 0052a650
BODY     : [[0052a650, 0052a782]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0052a650(int *param_1,int *param_2,int *param_3,int *param_4)

{
  int *piVar1;
  char *pcVar2;
  char *pcVar3;
  int iVar4;
  int iVar5;
  
  pcVar3 = *(char **)*param_2;
  iVar5 = -1;
  pcVar2 = (char *)FUN_00638800(pcVar3,0x3a);
  if ((pcVar2 == (char *)0x0) && (pcVar2 = _strrchr(pcVar3,0x2e), pcVar2 == (char *)0x0)) {
    pcVar3 = _strrchr(pcVar3,0x2f);
    if (pcVar3 == (char *)0x0) {
      return 0;
    }
  }
  else {
    iVar5 = (int)pcVar2 - (int)pcVar3;
    if (-1 < iVar5) {
      iVar4 = FUN_00525530(*(int *)*param_2 + 1 + iVar5);
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 2;
      piVar1 = (int *)(*param_4 + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
      *param_4 = iVar4;
      piVar1 = (int *)(iVar4 + 8);
      *piVar1 = *piVar1 + -1;
      if (*piVar1 == 0) {
        FUN_00525340();
      }
      goto LAB_0052a709;
    }
  }
  iVar4 = *(int *)(*param_1 + 8);
  piVar1 = (int *)(iVar4 + 8);
  *piVar1 = *piVar1 + 1;
  piVar1 = (int *)(*param_4 + 8);
  *piVar1 = *piVar1 + -1;
  if (*piVar1 == 0) {
    FUN_00525340();
  }
  *param_4 = iVar4;
LAB_0052a709:
  if ((0 < iVar5) && (*(char *)(*(int *)*param_2 + -1 + iVar5) == '/')) {
    iVar5 = iVar5 + -1;
  }
  if (iVar5 < 0) {
    iVar5 = *param_2;
    piVar1 = (int *)(iVar5 + 8);
    *piVar1 = *piVar1 + 1;
    piVar1 = (int *)(*param_3 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    *param_3 = iVar5;
  }
  else {
    iVar5 = FUN_00525450(*(undefined4 *)*param_2,iVar5);
    *(int *)(iVar5 + 8) = *(int *)(iVar5 + 8) + 2;
    piVar1 = (int *)(*param_3 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    *param_3 = iVar5;
    piVar1 = (int *)(iVar5 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
      return 1;
    }
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
0052a650 : PUSH EBX
0052a651 : PUSH EBP
0052a652 : MOV EBP,dword ptr [ESP + 0x10]
0052a656 : MOV EAX,dword ptr [EBP]
0052a659 : PUSH ESI
0052a65a : MOV ESI,dword ptr [EAX]
0052a65c : PUSH EDI
0052a65d : PUSH 0x3a
0052a65f : PUSH ESI
0052a660 : OR EDI,0xffffffff
0052a663 : CALL 0x00638800
0052a668 : ADD ESP,0x8
0052a66b : TEST EAX,EAX
0052a66d : JNZ 0x0052a694
0052a66f : PUSH 0x2e
0052a671 : PUSH ESI
0052a672 : CALL 0x0063b6d0
0052a677 : ADD ESP,0x8
0052a67a : TEST EAX,EAX
0052a67c : JNZ 0x0052a694
0052a67e : PUSH 0x2f
0052a680 : PUSH ESI
0052a681 : CALL 0x0063b6d0
0052a686 : ADD ESP,0x8
0052a689 : TEST EAX,EAX
0052a68b : JNZ 0x0052a6e6
0052a68d : POP EDI
0052a68e : POP ESI
0052a68f : POP EBP
0052a690 : XOR AL,AL
0052a692 : POP EBX
0052a693 : RET
0052a694 : SUB EAX,ESI
0052a696 : MOV EDI,EAX
0052a698 : TEST EDI,EDI
0052a69a : JL 0x0052a6e6
0052a69c : MOV ECX,dword ptr [EBP]
0052a69f : MOV ECX,dword ptr [ECX]
0052a6a1 : MOV EBX,dword ptr [ESP + 0x14]
0052a6a5 : MOV EAX,dword ptr [EBX]
0052a6a7 : LEA EDX,[ECX + EDI*0x1 + 0x1]
0052a6ab : ADD EAX,0x8
0052a6ae : PUSH EDX
0052a6af : LEA ECX,[EAX + 0x24c]
0052a6b5 : CALL 0x00525530
0052a6ba : MOV ESI,EAX
0052a6bc : ADD dword ptr [ESI + 0x8],0x2
0052a6c0 : MOV EAX,dword ptr [ESP + 0x20]
0052a6c4 : MOV ECX,dword ptr [EAX]
0052a6c6 : ADD dword ptr [ECX + 0x8],-0x1
0052a6ca : JNZ 0x0052a6d1
0052a6cc : CALL 0x00525340
0052a6d1 : MOV ECX,dword ptr [ESP + 0x20]
0052a6d5 : MOV dword ptr [ECX],ESI
0052a6d7 : ADD dword ptr [ESI + 0x8],-0x1
0052a6db : JNZ 0x0052a709
0052a6dd : MOV ECX,ESI
0052a6df : CALL 0x00525340
0052a6e4 : JMP 0x0052a709
0052a6e6 : MOV EBX,dword ptr [ESP + 0x14]
0052a6ea : MOV EDX,dword ptr [EBX]
0052a6ec : MOV ESI,dword ptr [EDX + 0x8]
0052a6ef : INC dword ptr [ESI + 0x8]
0052a6f2 : MOV EAX,dword ptr [ESP + 0x20]
0052a6f6 : MOV ECX,dword ptr [EAX]
0052a6f8 : ADD dword ptr [ECX + 0x8],-0x1
0052a6fc : JNZ 0x0052a703
0052a6fe : CALL 0x00525340
0052a703 : MOV ECX,dword ptr [ESP + 0x20]
0052a707 : MOV dword ptr [ECX],ESI
0052a709 : TEST EDI,EDI
0052a70b : JLE 0x0052a71c
0052a70d : MOV EDX,dword ptr [EBP]
0052a710 : MOV EAX,dword ptr [EDX]
0052a712 : CMP byte ptr [EAX + EDI*0x1 + -0x1],0x2f
0052a717 : JNZ 0x0052a71a
0052a719 : DEC EDI
0052a71a : TEST EDI,EDI
0052a71c : JL 0x0052a763
0052a71e : MOV ECX,dword ptr [EBP]
0052a721 : MOV ECX,dword ptr [ECX]
0052a723 : MOV EAX,dword ptr [EBX]
0052a725 : PUSH EDI
0052a726 : ADD EAX,0x8
0052a729 : PUSH ECX
0052a72a : LEA ECX,[EAX + 0x24c]
0052a730 : CALL 0x00525450
0052a735 : MOV EDI,dword ptr [ESP + 0x1c]
0052a739 : MOV ESI,EAX
0052a73b : ADD dword ptr [ESI + 0x8],0x2
0052a73f : MOV ECX,dword ptr [EDI]
0052a741 : OR EBX,0xffffffff
0052a744 : ADD dword ptr [ECX + 0x8],EBX
0052a747 : JNZ 0x0052a74e
0052a749 : CALL 0x00525340
0052a74e : MOV dword ptr [EDI],ESI
0052a750 : ADD dword ptr [ESI + 0x8],EBX
0052a753 : JNZ 0x0052a77c
0052a755 : MOV ECX,ESI
0052a757 : CALL 0x00525340
0052a75c : POP EDI
0052a75d : POP ESI
0052a75e : POP EBP
0052a75f : MOV AL,0x1
0052a761 : POP EBX
0052a762 : RET
0052a763 : MOV EBP,dword ptr [EBP]
0052a766 : INC dword ptr [EBP + 0x8]
0052a769 : MOV ESI,dword ptr [ESP + 0x1c]
0052a76d : MOV ECX,dword ptr [ESI]
0052a76f : ADD dword ptr [ECX + 0x8],-0x1
0052a773 : JNZ 0x0052a77a
0052a775 : CALL 0x00525340
0052a77a : MOV dword ptr [ESI],EBP
0052a77c : POP EDI
0052a77d : POP ESI
0052a77e : POP EBP
0052a77f : MOV AL,0x1
0052a781 : POP EBX
0052a782 : RET
