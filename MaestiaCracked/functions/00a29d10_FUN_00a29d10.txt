PROGRAM  : Maestia.exe
FUNCTION : FUN_00a29d10
ENTRY    : 00a29d10
BODY     : [[00a29d10, 00a2a0ff]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a29d10(int param_1)

{
  int iVar1;
  int iVar2;
  byte bVar3;
  int *piVar4;
  bool bVar5;
  char cVar6;
  char cVar7;
  char cVar8;
  uint uVar9;
  DWORD DVar10;
  int iVar11;
  uint8_t *packet;
  bool bVar12;
  double dVar13;
  char local_3d;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b3b06d;
  local_14 = ExceptionList;
  uVar9 = DAT_00d66fa0 ^ (uint)&stack0xffffffb0;
  ExceptionList = &local_14;
  if (((*(char *)(*(int *)(param_1 + 0x41c) + 0x6a) == '\0') && (*(char *)(param_1 + 0x514) == '\0')
      ) && ((*(int *)(param_1 + 0xac) == 0 ||
            (cVar6 = FUN_0086ea90(*(int *)(param_1 + 0xac)), cVar6 == '\0')))) {
    bVar5 = false;
    DVar10 = timeGetTime();
    piVar4 = *(int **)(param_1 + 0xac);
    iVar1 = piVar4[0x6a];
    iVar2 = piVar4[0x6b];
    cVar6 = FUN_0040df60(uVar9);
    bVar12 = *(short *)(param_1 + 0x402) != 0;
    cVar7 = FUN_0040e9b0();
    if ((cVar7 != '\0') && (*(char *)((int)piVar4 + 0x1877) != '\0')) {
      cVar7 = '\0';
    }
    cVar8 = FUN_0040df10();
    local_3d = '\x02';
    if (((bVar12) || (cVar6 != '\0')) || (cVar7 != '\0')) {
      local_3d = '\x03';
      cVar7 = (**(code **)(*piVar4 + 0x4bc))();
      if (((cVar7 == '\0') ||
          (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c8))(), cVar7 != '\0')) ||
         (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c4))(), cVar7 != '\0')) {
        cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c0))();
        if (((cVar7 == '\0') ||
            (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c8))(), cVar7 != '\0')) ||
           (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c4))(), cVar7 != '\0')) {
          cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c4))();
          if (cVar7 == '\0') {
            cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c8))();
            if (((cVar7 == '\0') &&
                (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c4))(), cVar7 == '\0')) &&
               (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4cc))(), cVar7 != '\0')) {
              local_3d = '\f';
            }
            else {
              cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c8))();
              if (((cVar7 == '\0') &&
                  (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c4))(), cVar7 == '\0')) &&
                 (cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4d0))(), cVar7 != '\0')) {
                local_3d = '\r';
              }
            }
          }
          else {
            cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4c0))();
            if (cVar7 == '\0') {
              cVar7 = (**(code **)(**(int **)(param_1 + 0xac) + 0x4bc))();
              local_3d = (cVar7 != '\0') + '\x06';
            }
            else {
              local_3d = '\b';
            }
          }
        }
        else {
          local_3d = '\x05';
        }
      }
      else {
        local_3d = '\x04';
      }
    }
    if (cVar8 != '\0') {
      if ((cVar6 != '\0') || (bVar12)) {
        local_3d = '\n';
      }
      else {
        local_3d = '\t';
      }
    }
    if ((local_3d != *(char *)(param_1 + 0x5f0)) &&
       ((((local_3d == '\x02' || (local_3d == '\n')) || (local_3d == '\t')) ||
        (*(char *)(param_1 + 0x5f0) == '\x02')))) {
      bVar5 = true;
    }
    uVar9 = DVar10 - *(int *)(param_1 + 0x5ec);
    if ((0xf9 < uVar9) || (*(char *)(param_1 + 0x5f1) != local_3d)) {
      bVar5 = true;
    }
    bVar3 = *(byte *)(param_1 + 0x5f1);
    if ((bVar3 == 0xd) || ((bVar3 == 0xc && (local_3d == '\x02')))) {
      local_3d = '\x0e';
    }
    if (((uVar9 < 0x65) && (local_3d == '\x02')) && (2 < bVar3)) {
      bVar5 = false;
    }
    *(char *)(param_1 + 0x5f0) = local_3d;
    if (bVar5) {
      FUN_00889560();
      dVar13 = 0.0;
      FUN_00b0b091();
      *(DWORD *)(param_1 + 0x5ec) = DVar10;
      iVar11 = FUN_006f4590();
      uStack_c = 0;
      if (iVar11 == 0) {
        packet = (uint8_t *)0x0;
      }
      else {
        packet = (uint8_t *)FUN_0040dec0(iVar1,iVar2,(float)dVar13,*(undefined1 *)(param_1 + 0x5f0))
        ;
      }
      uStack_c = 0xffffffff;
      if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
        FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),0x1b,packet);
      }
      *(undefined1 *)(param_1 + 0x5f1) = *(undefined1 *)(param_1 + 0x5f0);
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a29d10 : PUSH EBP
00a29d11 : MOV EBP,ESP
00a29d13 : AND ESP,0xfffffff8
00a29d16 : PUSH -0x1
00a29d18 : PUSH 0xb3b06d
00a29d1d : MOV EAX,FS:[0x0]
00a29d23 : PUSH EAX
00a29d24 : SUB ESP,0x30
00a29d27 : PUSH EBX
00a29d28 : PUSH ESI
00a29d29 : PUSH EDI
00a29d2a : MOV EAX,[0x00d66fa0]
00a29d2f : XOR EAX,ESP
00a29d31 : PUSH EAX
00a29d32 : LEA EAX,[ESP + 0x40]
00a29d36 : MOV FS:[0x0],EAX
00a29d3c : MOV EBX,dword ptr [EBP + 0x8]
00a29d3f : MOV EAX,dword ptr [EBX + 0x41c]
00a29d45 : MOV AL,byte ptr [EAX + 0x6a]
00a29d48 : TEST AL,AL
00a29d4a : JNZ 0x00a2a0eb
00a29d50 : CMP byte ptr [EBX + 0x514],AL
00a29d56 : JNZ 0x00a2a0eb
00a29d5c : MOV EAX,dword ptr [EBX + 0xac]
00a29d62 : XOR EDI,EDI
00a29d64 : CMP EAX,EDI
00a29d66 : JZ 0x00a29d76
00a29d68 : PUSH EAX
00a29d69 : CALL 0x0086ea90
00a29d6e : TEST AL,AL
00a29d70 : JNZ 0x00a2a0eb
00a29d76 : MOV dword ptr [ESP + 0x18],EDI
00a29d7a : CALL dword ptr [0x00b85598]
00a29d80 : MOV ESI,dword ptr [EBX + 0xac]
00a29d86 : MOVSS XMM0,dword ptr [ESI + 0x1a4]
00a29d8e : MOVSS dword ptr [ESP + 0x38],XMM0
00a29d94 : MOVSS XMM0,dword ptr [ESI + 0x1a8]
00a29d9c : MOV dword ptr [ESP + 0x2c],EAX
00a29da0 : MOVSS dword ptr [ESP + 0x34],XMM0
00a29da6 : MOVSS XMM0,dword ptr [ESI + 0x1ac]
00a29dae : MOV EAX,ESI
00a29db0 : MOVSS dword ptr [ESP + 0x30],XMM0
00a29db6 : CALL 0x0040df60
00a29dbb : MOVZX ECX,AL
00a29dbe : MOV dword ptr [ESP + 0x20],ECX
00a29dc2 : MOV dword ptr [ESP + 0x1c],EDI
00a29dc6 : CMP word ptr [EBX + 0x402],DI
00a29dcd : JZ 0x00a29dd7
00a29dcf : MOV dword ptr [ESP + 0x1c],0x1
00a29dd7 : MOV EAX,ESI
00a29dd9 : CALL 0x0040e9b0
00a29dde : MOVZX EDI,AL
00a29de1 : TEST EDI,EDI
00a29de3 : JZ 0x00a29df0
00a29de5 : CMP byte ptr [ESI + 0x1877],0x0
00a29dec : JZ 0x00a29df0
00a29dee : XOR EDI,EDI
00a29df0 : MOV EAX,ESI
00a29df2 : CALL 0x0040df10
00a29df7 : CMP dword ptr [ESP + 0x1c],0x0
00a29dfc : MOVZX EDX,AL
00a29dff : MOV dword ptr [ESP + 0x28],EDX
00a29e03 : MOV byte ptr [ESP + 0x17],0x2
00a29e08 : JNZ 0x00a29e19
00a29e0a : CMP dword ptr [ESP + 0x20],0x0
00a29e0f : JNZ 0x00a29e19
00a29e11 : TEST EDI,EDI
00a29e13 : JZ 0x00a29f71
00a29e19 : MOV EAX,dword ptr [ESI]
00a29e1b : MOV EDX,dword ptr [EAX + 0x4bc]
00a29e21 : MOV ECX,ESI
00a29e23 : MOV byte ptr [ESP + 0x17],0x3
00a29e28 : CALL EDX
00a29e2a : TEST AL,AL
00a29e2c : JZ 0x00a29e60
00a29e2e : MOV ECX,dword ptr [EBX + 0xac]
00a29e34 : MOV EAX,dword ptr [ECX]
00a29e36 : MOV EDX,dword ptr [EAX + 0x4c8]
00a29e3c : CALL EDX
00a29e3e : TEST AL,AL
00a29e40 : JNZ 0x00a29e60
00a29e42 : MOV ECX,dword ptr [EBX + 0xac]
00a29e48 : MOV EAX,dword ptr [ECX]
00a29e4a : MOV EDX,dword ptr [EAX + 0x4c4]
00a29e50 : CALL EDX
00a29e52 : TEST AL,AL
00a29e54 : JNZ 0x00a29e60
00a29e56 : MOV byte ptr [ESP + 0x17],0x4
00a29e5b : JMP 0x00a29f71
00a29e60 : MOV ECX,dword ptr [EBX + 0xac]
00a29e66 : MOV EAX,dword ptr [ECX]
00a29e68 : MOV EDX,dword ptr [EAX + 0x4c0]
00a29e6e : CALL EDX
00a29e70 : TEST AL,AL
00a29e72 : JZ 0x00a29ea6
00a29e74 : MOV ECX,dword ptr [EBX + 0xac]
00a29e7a : MOV EAX,dword ptr [ECX]
00a29e7c : MOV EDX,dword ptr [EAX + 0x4c8]
00a29e82 : CALL EDX
00a29e84 : TEST AL,AL
00a29e86 : JNZ 0x00a29ea6
00a29e88 : MOV ECX,dword ptr [EBX + 0xac]
00a29e8e : MOV EAX,dword ptr [ECX]
00a29e90 : MOV EDX,dword ptr [EAX + 0x4c4]
00a29e96 : CALL EDX
00a29e98 : TEST AL,AL
00a29e9a : JNZ 0x00a29ea6
00a29e9c : MOV byte ptr [ESP + 0x17],0x5
00a29ea1 : JMP 0x00a29f71
00a29ea6 : MOV ECX,dword ptr [EBX + 0xac]
00a29eac : MOV EAX,dword ptr [ECX]
00a29eae : MOV EDX,dword ptr [EAX + 0x4c4]
00a29eb4 : CALL EDX
00a29eb6 : MOV ECX,dword ptr [EBX + 0xac]
00a29ebc : TEST AL,AL
00a29ebe : MOV EAX,dword ptr [ECX]
00a29ec0 : JZ 0x00a29ef5
00a29ec2 : MOV EDX,dword ptr [EAX + 0x4c0]
00a29ec8 : CALL EDX
00a29eca : TEST AL,AL
00a29ecc : JZ 0x00a29ed8
00a29ece : MOV byte ptr [ESP + 0x17],0x8
00a29ed3 : JMP 0x00a29f71
00a29ed8 : MOV ECX,dword ptr [EBX + 0xac]
00a29ede : MOV EAX,dword ptr [ECX]
00a29ee0 : MOV EDX,dword ptr [EAX + 0x4bc]
00a29ee6 : CALL EDX
00a29ee8 : TEST AL,AL
00a29eea : SETNZ AL
00a29eed : ADD AL,0x6
00a29eef : MOV byte ptr [ESP + 0x17],AL
00a29ef3 : JMP 0x00a29f71
00a29ef5 : MOV EDX,dword ptr [EAX + 0x4c8]
00a29efb : CALL EDX
00a29efd : TEST AL,AL
00a29eff : JNZ 0x00a29f30
00a29f01 : MOV ECX,dword ptr [EBX + 0xac]
00a29f07 : MOV EAX,dword ptr [ECX]
00a29f09 : MOV EDX,dword ptr [EAX + 0x4c4]
00a29f0f : CALL EDX
00a29f11 : TEST AL,AL
00a29f13 : JNZ 0x00a29f30
00a29f15 : MOV ECX,dword ptr [EBX + 0xac]
00a29f1b : MOV EAX,dword ptr [ECX]
00a29f1d : MOV EDX,dword ptr [EAX + 0x4cc]
00a29f23 : CALL EDX
00a29f25 : TEST AL,AL
00a29f27 : JZ 0x00a29f30
00a29f29 : MOV byte ptr [ESP + 0x17],0xc
00a29f2e : JMP 0x00a29f71
00a29f30 : MOV ECX,dword ptr [EBX + 0xac]
00a29f36 : MOV EAX,dword ptr [ECX]
00a29f38 : MOV EDX,dword ptr [EAX + 0x4c8]
00a29f3e : CALL EDX
00a29f40 : TEST AL,AL
00a29f42 : JNZ 0x00a29f71
00a29f44 : MOV ECX,dword ptr [EBX + 0xac]
00a29f4a : MOV EAX,dword ptr [ECX]
00a29f4c : MOV EDX,dword ptr [EAX + 0x4c4]
00a29f52 : CALL EDX
00a29f54 : TEST AL,AL
00a29f56 : JNZ 0x00a29f71
00a29f58 : MOV ECX,dword ptr [EBX + 0xac]
00a29f5e : MOV EAX,dword ptr [ECX]
00a29f60 : MOV EDX,dword ptr [EAX + 0x4d0]
00a29f66 : CALL EDX
00a29f68 : TEST AL,AL
00a29f6a : JZ 0x00a29f71
00a29f6c : MOV byte ptr [ESP + 0x17],0xd
00a29f71 : CMP dword ptr [ESP + 0x28],0x0
00a29f76 : JZ 0x00a29f92
00a29f78 : CMP dword ptr [ESP + 0x20],0x0
00a29f7d : JNZ 0x00a29f86
00a29f7f : CMP dword ptr [ESP + 0x1c],0x0
00a29f84 : JZ 0x00a29f8d
00a29f86 : MOV byte ptr [ESP + 0x17],0xa
00a29f8b : JMP 0x00a29f92
00a29f8d : MOV byte ptr [ESP + 0x17],0x9
00a29f92 : MOV AL,byte ptr [EBX + 0x5f0]
00a29f98 : MOV CL,byte ptr [ESP + 0x17]
00a29f9c : CMP CL,AL
00a29f9e : JZ 0x00a29fbb
00a29fa0 : CMP CL,0x2
00a29fa3 : JZ 0x00a29fb3
00a29fa5 : CMP CL,0xa
00a29fa8 : JZ 0x00a29fb3
00a29faa : CMP CL,0x9
00a29fad : JZ 0x00a29fb3
00a29faf : CMP AL,0x2
00a29fb1 : JNZ 0x00a29fbb
00a29fb3 : MOV dword ptr [ESP + 0x18],0x1
00a29fbb : MOV EDI,dword ptr [ESP + 0x2c]
00a29fbf : MOV ESI,EDI
00a29fc1 : SUB ESI,dword ptr [EBX + 0x5ec]
00a29fc7 : CMP ESI,0xfa
00a29fcd : JNC 0x00a29fd7
00a29fcf : CMP byte ptr [EBX + 0x5f1],CL
00a29fd5 : JZ 0x00a29fdf
00a29fd7 : MOV dword ptr [ESP + 0x18],0x1
00a29fdf : MOV AL,byte ptr [EBX + 0x5f1]
00a29fe5 : CMP AL,0xd
00a29fe7 : JZ 0x00a29ff2
00a29fe9 : CMP AL,0xc
00a29feb : JNZ 0x00a29ff7
00a29fed : CMP CL,0x2
00a29ff0 : JNZ 0x00a29ff7
00a29ff2 : MOV byte ptr [ESP + 0x17],0xe
00a29ff7 : CMP ESI,0x64
00a29ffa : JA 0x00a2a00f
00a29ffc : CMP byte ptr [ESP + 0x17],0x2
00a2a001 : JNZ 0x00a2a00f
00a2a003 : CMP AL,0x2
00a2a005 : JBE 0x00a2a00f
00a2a007 : MOV dword ptr [ESP + 0x18],0x0
00a2a00f : CMP dword ptr [ESP + 0x18],0x0
00a2a014 : MOV AL,byte ptr [ESP + 0x17]
00a2a018 : MOV byte ptr [EBX + 0x5f0],AL
00a2a01e : JZ 0x00a2a0eb
00a2a024 : XORPS XMM0,XMM0
00a2a027 : MOV EAX,dword ptr [EBX + 0xac]
00a2a02d : LEA ESI,[ESP + 0x20]
00a2a031 : MOVSS dword ptr [ESP + 0x20],XMM0
00a2a037 : MOVSS dword ptr [ESP + 0x24],XMM0
00a2a03d : CALL 0x00889560
00a2a042 : MOVSS XMM1,dword ptr [ESP + 0x24]
00a2a048 : MOVSS XMM0,dword ptr [ESP + 0x20]
00a2a04e : CVTPS2PD XMM0,XMM0
00a2a051 : CVTPS2PD XMM1,XMM1
00a2a054 : CALL 0x00b0b091
00a2a059 : CVTSD2SS XMM0,XMM0
00a2a05d : MOVSS dword ptr [ESP + 0x2c],XMM0
00a2a063 : MOV dword ptr [EBX + 0x5ec],EDI
00a2a069 : CALL 0x006f4590
00a2a06e : MOV dword ptr [ESP + 0x28],EAX
00a2a072 : MOV dword ptr [ESP + 0x48],0x0
00a2a07a : TEST EAX,EAX
00a2a07c : JZ 0x00a2a0b8
00a2a07e : MOVZX ECX,byte ptr [EBX + 0x5f0]
00a2a085 : FLD float ptr [ESP + 0x2c]
00a2a089 : MOV EDX,dword ptr [EBX + 0x5ec]
00a2a08f : MOVSS XMM0,dword ptr [ESP + 0x38]
00a2a095 : PUSH ECX
00a2a096 : SUB ESP,0xc
00a2a099 : OR ECX,0xffffffff
00a2a09c : FSTP float ptr [ESP + 0x8]
00a2a0a0 : MOV ESI,EAX
00a2a0a2 : FLD float ptr [ESP + 0x40]
00a2a0a6 : FSTP float ptr [ESP + 0x4]
00a2a0aa : FLD float ptr [ESP + 0x44]
00a2a0ae : FSTP float ptr [ESP]
00a2a0b1 : CALL 0x0040dec0
00a2a0b6 : JMP 0x00a2a0ba
00a2a0b8 : XOR EAX,EAX
00a2a0ba : MOV dword ptr [ESP + 0x48],0xffffffff
00a2a0c2 : MOV EDX,dword ptr [0x017247d4]
00a2a0c8 : MOV ECX,dword ptr [EDX + 0x4]
00a2a0cb : TEST ECX,ECX
00a2a0cd : JZ 0x00a2a0df
00a2a0cf : CMP byte ptr [EDX + 0x8],0x0
00a2a0d3 : JZ 0x00a2a0df
00a2a0d5 : PUSH 0x1b
00a2a0d7 : PUSH ECX
00a2a0d8 : MOV EDI,EAX
00a2a0da : CALL 0x00a0dd40
00a2a0df : MOV DL,byte ptr [EBX + 0x5f0]
00a2a0e5 : MOV byte ptr [EBX + 0x5f1],DL
00a2a0eb : MOV ECX,dword ptr [ESP + 0x40]
00a2a0ef : MOV dword ptr FS:[0x0],ECX
00a2a0f6 : POP ECX
00a2a0f7 : POP EDI
00a2a0f8 : POP ESI
00a2a0f9 : POP EBX
00a2a0fa : MOV ESP,EBP
00a2a0fc : POP EBP
00a2a0fd : RET 0x4
