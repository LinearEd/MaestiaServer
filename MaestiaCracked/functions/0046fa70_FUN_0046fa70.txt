PROGRAM  : Maestia.exe
FUNCTION : FUN_0046fa70
ENTRY    : 0046fa70
BODY     : [[0046fa70, 0046fb1a] [0046fb20, 0046fda4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0046fa70(int param_1,int param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  size_t _Size;
  int *in_ECX;
  char *_Src;
  undefined **local_474;
  undefined4 local_470;
  undefined1 local_46c [2];
  undefined1 local_46a;
  undefined4 uStack_380;
  undefined **local_254;
  size_t local_250;
  undefined1 local_24c;
  undefined1 auStack_24b [255];
  undefined1 *local_14c;
  int local_148;
  int local_144;
  int local_140;
  int local_13c;
  int local_138;
  int local_134;
  int *local_130;
  int local_12c;
  int local_128;
  int local_124;
  byte local_11e;
  byte local_11d;
  undefined **local_11c;
  size_t local_118;
  undefined1 local_114 [256];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b826ac;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_13c = param_2;
  local_148 = param_1;
  local_11d = 1;
  if (0 < *in_ECX) {
    local_130 = in_ECX;
    _printf("[%s]\n");
    iVar2 = *in_ECX;
    cVar1 = FUN_0046f630();
    if (cVar1 == '\0') {
      *(undefined4 *)(param_1 + 0xdac) = *(undefined4 *)(param_1 + 0xdb0);
    }
    else {
      *(int *)(param_1 + 0xdac) = iVar2;
    }
    local_134 = 0;
    if (0 < *local_130) {
      local_144 = 0;
      local_124 = 0;
      do {
        iVar2 = local_144;
        FUN_0046f6c0();
        iVar2 = *(int *)(param_1 + 0xda8) + iVar2;
        local_140 = iVar2 + 0x69c;
        local_138 = 0;
        _Src = (char *)(iVar2 + 100);
        do {
          if (_Src != (char *)0x0) {
            pcVar3 = _Src;
            do {
              cVar1 = *pcVar3;
              pcVar3 = pcVar3 + 1;
            } while (cVar1 != '\0');
            if (pcVar3 != _Src + 1) {
              local_128 = 0;
              local_11e = 0;
              if (0 < *(int *)(local_13c + 8)) {
                local_12c = 0;
                do {
                  local_14c = (undefined1 *)&local_474;
                  local_474 = &PTR_FUN_00cd3f48;
                  _memmove(local_46c,&DAT_00cd5ef0,2);
                  local_470 = 2;
                  local_46a = 0;
                  local_8 = 0;
                  local_254 = &PTR_FUN_00cd3f48;
                  pcVar3 = _Src;
                  do {
                    cVar1 = *pcVar3;
                    pcVar3 = pcVar3 + 1;
                  } while (cVar1 != '\0');
                  _Size = (int)pcVar3 - (int)(_Src + 1);
                  if (_Size != 0) {
                    _memmove(&local_24c,_Src,_Size);
                  }
                  auStack_24b[_Size - 1] = 0;
                  local_8._1_3_ = (undefined3)((uint)local_8 >> 8);
                  local_8._0_1_ = 2;
                  local_250 = _Size;
                  FUN_0046f8a0(&local_254);
                  local_8._0_1_ = 3;
                  FUN_0046f7f0();
                  local_8 = CONCAT31(local_8._1_3_,6);
                  local_254 = &PTR_FUN_00cd3f48;
                  cVar1 = FUN_0046f9b0();
                  if (cVar1 != '\0') {
                    *(size_t *)(_Src + -4) = local_118;
                    if (local_118 != 0) {
                      _memmove(_Src,local_114,local_118);
                    }
                    _Src[*(int *)(_Src + -4)] = '\0';
                    uStack_380 = 0x46fd01;
                    _printf("  [material %d, tex layer %d] - [%s]\n");
                    local_11e = 1;
                    local_8 = 0xffffffff;
                    local_11c = &PTR_FUN_00cd3f48;
                    break;
                  }
                  local_8 = 0xffffffff;
                  local_12c = local_12c + 0x108;
                  local_128 = local_128 + 1;
                  local_11c = &PTR_FUN_00cd3f48;
                } while (local_128 < *(int *)(local_13c + 8));
              }
              local_11d = local_11d & local_11e;
            }
          }
          local_140 = local_140 + 0x21c;
          local_138 = local_138 + 1;
          _Src = _Src + 0x108;
        } while (local_138 < 5);
        local_124 = local_124 + 0x69c;
        local_134 = local_134 + 1;
        local_144 = local_144 + 0x1128;
        param_1 = local_148;
      } while (local_134 < *local_130);
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0046fa70 : PUSH EBP
0046fa71 : MOV EBP,ESP
0046fa73 : PUSH -0x1
0046fa75 : PUSH 0xb826ac
0046fa7a : MOV EAX,FS:[0x0]
0046fa80 : PUSH EAX
0046fa81 : SUB ESP,0x34c
0046fa87 : MOV EAX,[0x00d66fa0]
0046fa8c : XOR EAX,EBP
0046fa8e : MOV dword ptr [EBP + -0x10],EAX
0046fa91 : PUSH EBX
0046fa92 : PUSH ESI
0046fa93 : PUSH EDI
0046fa94 : PUSH EAX
0046fa95 : LEA EAX,[EBP + -0xc]
0046fa98 : MOV FS:[0x0],EAX
0046fa9e : MOV EAX,dword ptr [EBP + 0xc]
0046faa1 : MOV EBX,dword ptr [EBP + 0x8]
0046faa4 : MOV ESI,ECX
0046faa6 : CMP dword ptr [ESI],0x0
0046faa9 : MOV dword ptr [EBP + 0xfffffec8],EAX
0046faaf : MOV AL,0x1
0046fab1 : MOV dword ptr [EBP + 0xfffffebc],EBX
0046fab7 : MOV dword ptr [EBP + 0xfffffed4],ESI
0046fabd : MOV byte ptr [EBP + 0xfffffee7],AL
0046fac3 : JLE 0x0046fd87
0046fac9 : LEA ECX,[EBX + 0xc]
0046facc : PUSH ECX
0046facd : PUSH 0xcd619c
0046fad2 : CALL 0x0063da6e
0046fad7 : MOV EDI,dword ptr [ESI]
0046fad9 : ADD ESP,0x8
0046fadc : LEA ESI,[EBX + 0xda4]
0046fae2 : PUSH EDI
0046fae3 : CALL 0x0046f630
0046fae8 : TEST AL,AL
0046faea : JZ 0x0046faf1
0046faec : MOV dword ptr [ESI + 0x8],EDI
0046faef : JMP 0x0046faf7
0046faf1 : MOV EDX,dword ptr [ESI + 0xc]
0046faf4 : MOV dword ptr [ESI + 0x8],EDX
0046faf7 : MOV EAX,dword ptr [EBP + 0xfffffed4]
0046fafd : XOR EDI,EDI
0046faff : CMP dword ptr [EAX],EDI
0046fb01 : MOV dword ptr [EBP + 0xfffffed0],EDI
0046fb07 : JLE 0x0046fd81
0046fb0d : MOV dword ptr [EBP + 0xfffffec0],EDI
0046fb13 : MOV dword ptr [EBP + 0xfffffee0],EDI
0046fb19 : JMP 0x0046fb26
0046fb20 : MOV EBX,dword ptr [EBP + 0xfffffebc]
0046fb26 : MOV ECX,dword ptr [EBP + 0xfffffed4]
0046fb2c : MOV EAX,dword ptr [ECX + 0x4]
0046fb2f : MOV ESI,dword ptr [EBX + 0xda8]
0046fb35 : ADD EAX,dword ptr [EBP + 0xfffffee0]
0046fb3b : ADD ESI,EDI
0046fb3d : CALL 0x0046f6c0
0046fb42 : MOV EAX,dword ptr [EBX + 0xda8]
0046fb48 : ADD EAX,EDI
0046fb4a : LEA EDX,[EAX + 0x69c]
0046fb50 : MOV dword ptr [EBP + 0xfffffecc],0x0
0046fb5a : MOV dword ptr [EBP + 0xfffffec4],EDX
0046fb60 : LEA EBX,[EAX + 0x64]
0046fb63 : XOR EDI,EDI
0046fb65 : CMP EBX,EDI
0046fb67 : JZ 0x0046fd24
0046fb6d : MOV EAX,EBX
0046fb6f : LEA EDX,[EAX + 0x1]
0046fb72 : MOV CL,byte ptr [EAX]
0046fb74 : INC EAX
0046fb75 : TEST CL,CL
0046fb77 : JNZ 0x0046fb72
0046fb79 : SUB EAX,EDX
0046fb7b : JZ 0x0046fd24
0046fb81 : MOV EAX,dword ptr [EBP + 0xfffffec8]
0046fb87 : CMP dword ptr [EAX + 0x8],EDI
0046fb8a : MOV byte ptr [EBP + 0xfffffee6],CL
0046fb90 : MOV dword ptr [EBP + 0xfffffedc],EDI
0046fb96 : JLE 0x0046fd18
0046fb9c : MOV dword ptr [EBP + 0xfffffed8],EDI
0046fba2 : JMP 0x0046fba6
0046fba4 : XOR EDI,EDI
0046fba6 : SUB ESP,0x108
0046fbac : MOV ESI,ESP
0046fbae : MOV dword ptr [EBP + 0xfffffeb8],ESP
0046fbb4 : PUSH 0x2
0046fbb6 : LEA ECX,[ESI + 0x8]
0046fbb9 : PUSH 0xcd5ef0
0046fbbe : PUSH ECX
0046fbbf : MOV dword ptr [ESI],0xcd3f48
0046fbc5 : CALL 0x00636880
0046fbca : MOV dword ptr [ESI + 0x4],0x2
0046fbd1 : ADD ESP,0xc
0046fbd4 : MOV byte ptr [ESI + 0xa],0x0
0046fbd8 : MOV dword ptr [EBP + -0x4],EDI
0046fbdb : MOV EAX,EBX
0046fbdd : MOV dword ptr [EBP + 0xfffffdb0],0xcd3f48
0046fbe7 : LEA EDX,[EAX + 0x1]
0046fbea : LEA EBX,[EBX]
0046fbf0 : MOV CL,byte ptr [EAX]
0046fbf2 : INC EAX
0046fbf3 : TEST CL,CL
0046fbf5 : JNZ 0x0046fbf0
0046fbf7 : SUB EAX,EDX
0046fbf9 : MOV ESI,EAX
0046fbfb : JZ 0x0046fc0e
0046fbfd : PUSH ESI
0046fbfe : LEA EDX,[EBP + 0xfffffdb8]
0046fc04 : PUSH EBX
0046fc05 : PUSH EDX
0046fc06 : CALL 0x00636880
0046fc0b : ADD ESP,0xc
0046fc0e : MOV dword ptr [EBP + 0xfffffdb4],ESI
0046fc14 : MOV byte ptr [EBP + ESI*0x1 + 0xfffffdb8],0x0
0046fc1c : MOV byte ptr [EBP + -0x4],0x1
0046fc20 : LEA EAX,[EBP + 0xfffffdb0]
0046fc26 : PUSH EAX
0046fc27 : MOV byte ptr [EBP + -0x4],0x2
0046fc2b : LEA ESI,[EBP + 0xfffffca8]
0046fc31 : CALL 0x0046f8a0
0046fc36 : MOV byte ptr [EBP + -0x4],0x3
0046fc3a : MOV ECX,dword ptr [EBP + 0xfffffec8]
0046fc40 : MOV ECX,dword ptr [ECX + 0x4]
0046fc43 : ADD ECX,dword ptr [EBP + 0xfffffed8]
0046fc49 : MOV EDI,EAX
0046fc4b : PUSH ECX
0046fc4c : LEA ESI,[EBP + 0xfffffee8]
0046fc52 : CALL 0x0046f7f0
0046fc57 : MOV byte ptr [EBP + -0x4],0x5
0046fc5b : MOV ESI,0xcd3f48
0046fc60 : MOV dword ptr [EBP + 0xfffffca8],ESI
0046fc66 : MOV byte ptr [EBP + -0x4],0x6
0046fc6a : MOV EAX,dword ptr [EBP + 0xfffffec4]
0046fc70 : LEA EDX,[EBP + 0xfffffef0]
0046fc76 : PUSH EDX
0046fc77 : MOV dword ptr [EBP + 0xfffffdb0],ESI
0046fc7d : CALL 0x0046f9b0
0046fc82 : TEST AL,AL
0046fc84 : JNZ 0x0046fcbb
0046fc86 : MOV dword ptr [EBP + -0x4],0xffffffff
0046fc8d : MOV EAX,dword ptr [EBP + 0xfffffedc]
0046fc93 : MOV ECX,dword ptr [EBP + 0xfffffec8]
0046fc99 : ADD dword ptr [EBP + 0xfffffed8],0x108
0046fca3 : INC EAX
0046fca4 : CMP EAX,dword ptr [ECX + 0x8]
0046fca7 : MOV dword ptr [EBP + 0xfffffee8],ESI
0046fcad : MOV dword ptr [EBP + 0xfffffedc],EAX
0046fcb3 : JL 0x0046fba4
0046fcb9 : JMP 0x0046fd18
0046fcbb : MOV EAX,dword ptr [EBP + 0xfffffeec]
0046fcc1 : MOV dword ptr [EBX + -0x4],EAX
0046fcc4 : TEST EAX,EAX
0046fcc6 : JBE 0x0046fcdb
0046fcc8 : PUSH EAX
0046fcc9 : LEA EDX,[EBP + 0xfffffef0]
0046fccf : PUSH EDX
0046fcd0 : MOV EAX,EBX
0046fcd2 : PUSH EAX
0046fcd3 : CALL 0x00636880
0046fcd8 : ADD ESP,0xc
0046fcdb : MOV ECX,dword ptr [EBX + -0x4]
0046fcde : MOV EAX,dword ptr [EBP + 0xfffffecc]
0046fce4 : LEA EDX,[EBP + 0xfffffef0]
0046fcea : PUSH EDX
0046fceb : MOV byte ptr [EBX + ECX*0x1],0x0
0046fcef : MOV ECX,dword ptr [EBP + 0xfffffed0]
0046fcf5 : PUSH EAX
0046fcf6 : PUSH ECX
0046fcf7 : PUSH 0xcd61a4
0046fcfc : CALL 0x0063da6e
0046fd01 : ADD ESP,0x10
0046fd04 : MOV byte ptr [EBP + 0xfffffee6],0x1
0046fd0b : MOV dword ptr [EBP + -0x4],0xffffffff
0046fd12 : MOV dword ptr [EBP + 0xfffffee8],ESI
0046fd18 : MOV DL,byte ptr [EBP + 0xfffffee6]
0046fd1e : AND byte ptr [EBP + 0xfffffee7],DL
0046fd24 : MOV EAX,dword ptr [EBP + 0xfffffecc]
0046fd2a : ADD dword ptr [EBP + 0xfffffec4],0x21c
0046fd34 : INC EAX
0046fd35 : ADD EBX,0x108
0046fd3b : CMP EAX,0x5
0046fd3e : MOV dword ptr [EBP + 0xfffffecc],EAX
0046fd44 : JL 0x0046fb63
0046fd4a : MOV EAX,dword ptr [EBP + 0xfffffed0]
0046fd50 : MOV EDI,dword ptr [EBP + 0xfffffec0]
0046fd56 : MOV ECX,dword ptr [EBP + 0xfffffed4]
0046fd5c : ADD dword ptr [EBP + 0xfffffee0],0x69c
0046fd66 : INC EAX
0046fd67 : ADD EDI,0x1128
0046fd6d : CMP EAX,dword ptr [ECX]
0046fd6f : MOV dword ptr [EBP + 0xfffffed0],EAX
0046fd75 : MOV dword ptr [EBP + 0xfffffec0],EDI
0046fd7b : JL 0x0046fb20
0046fd81 : MOV AL,byte ptr [EBP + 0xfffffee7]
0046fd87 : MOV ECX,dword ptr [EBP + -0xc]
0046fd8a : MOV dword ptr FS:[0x0],ECX
0046fd91 : POP ECX
0046fd92 : POP EDI
0046fd93 : POP ESI
0046fd94 : POP EBX
0046fd95 : MOV ECX,dword ptr [EBP + -0x10]
0046fd98 : XOR ECX,EBP
0046fd9a : CALL 0x00633e6b
0046fd9f : MOV ESP,EBP
0046fda1 : POP EBP
0046fda2 : RET 0x8
