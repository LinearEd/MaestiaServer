PROGRAM  : Maestia.exe
FUNCTION : FUN_00758490
ENTRY    : 00758490
BODY     : [[00758490, 007586d2]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00758490(int *param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  undefined4 uVar5;
  undefined1 *puVar6;
  undefined1 local_e8 [128];
  undefined1 local_68 [32];
  tagRECT local_48;
  undefined8 local_38;
  undefined8 local_30;
  tagRECT local_28;
  int *local_18;
  int *local_14;
  int *local_10;
  uint local_c [2];
  
  if (param_1 == (int *)0x0) {
    FUN_008018d0(L"[StarSourceToBloomSource] pFX is NULL");
    return 1;
  }
  local_18 = *(int **)(DAT_017251ac + 0x18);
  if (local_18 == (int *)0x0) {
    return 1;
  }
  local_14 = *(int **)(DAT_01725204 + 0x220);
  if (local_14 == (int *)0x0) {
    return 1;
  }
  iVar1 = *(int *)(DAT_01725204 + 0x21c);
  if (iVar1 != 0) {
    iVar2 = (**(code **)(*local_14 + 0x48))(local_14,0,&local_10);
    if (-1 < iVar2) {
      FUN_00755ce0();
      InflateRect(&local_48,-1,-1);
      FUN_00755ce0();
      InflateRect(&local_28,-1,-1);
      FUN_00755b50(local_14,&local_28);
      piVar4 = *(int **)(DAT_01725204 + 0x210);
      if (piVar4 == (int *)0x0) {
        return 1;
      }
      puVar6 = local_68;
      uVar5 = 0;
      iVar2 = (**(code **)(*piVar4 + 0x44))();
      if (iVar2 < 0) {
        return iVar2;
      }
      if (local_e8 != (undefined1 *)0x0) {
        FUN_00755d30(local_e8);
      }
      (**(code **)(*param_1 + 0x50))(param_1,"g_avSampleOffsets",local_e8,0x80,piVar4,uVar5,puVar6);
      (**(code **)(*param_1 + 0xe8))(param_1,"DownScale2x2");
      piVar4 = local_18;
      (**(code **)(*local_18 + 0x94))(local_18,0,local_10);
      (**(code **)(*param_1 + 0xd0))(param_1,"g_tHDRTex0",iVar1);
      (**(code **)(*piVar4 + 300))(piVar4,&local_28);
      (**(code **)(*piVar4 + 0xe4))(piVar4,0xae,1);
      (**(code **)(*piVar4 + 0x114))(piVar4,0,6,1);
      (**(code **)(*piVar4 + 0x114))(piVar4,0,1,3);
      (**(code **)(*piVar4 + 0x114))(piVar4,0,2,3);
      (**(code **)(*param_1 + 0x104))(param_1);
      iVar2 = (**(code **)(*param_1 + 0xfc))(param_1,local_c,0);
      if (-1 < iVar2) {
        if (local_c[0] != 0) {
          uVar3 = 0;
          do {
            (**(code **)(*param_1 + 0x100))(param_1,uVar3);
            FUN_004be960(local_38,local_30);
            (**(code **)(*param_1 + 0x108))();
            uVar3 = uVar3 + 1;
          } while (uVar3 < local_c[0]);
        }
        (**(code **)(*param_1 + 0x10c))(param_1);
        (**(code **)(*piVar4 + 0xe4))(piVar4,0xae,0);
        iVar2 = 0;
      }
    }
    if (local_10 != (int *)0x0) {
      (**(code **)(*local_10 + 8))(local_10);
    }
    return iVar2;
  }
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00758490 : PUSH EBP
00758491 : MOV EBP,ESP
00758493 : SUB ESP,0xe8
00758499 : PUSH EBX
0075849a : MOV EBX,dword ptr [EBP + 0x8]
0075849d : PUSH ESI
0075849e : PUSH EDI
0075849f : TEST EBX,EBX
007584a1 : JNZ 0x007584c4
007584a3 : MOV ESI,dword ptr [0x00da98e8]
007584a9 : PUSH 0xc0b390
007584ae : CALL 0x008018d0
007584b3 : ADD ESP,0x4
007584b6 : MOV EAX,0x1
007584bb : POP EDI
007584bc : POP ESI
007584bd : POP EBX
007584be : MOV ESP,EBP
007584c0 : POP EBP
007584c1 : RET 0x4
007584c4 : MOV EAX,[0x017251ac]
007584c9 : MOV EAX,dword ptr [EAX + 0x18]
007584cc : MOV dword ptr [EBP + -0x14],EAX
007584cf : TEST EAX,EAX
007584d1 : JZ 0x007584b6
007584d3 : MOV ECX,dword ptr [0x01725204]
007584d9 : MOV EAX,dword ptr [ECX + 0x220]
007584df : MOV dword ptr [EBP + -0x10],EAX
007584e2 : TEST EAX,EAX
007584e4 : JZ 0x007584b6
007584e6 : MOV ECX,dword ptr [ECX + 0x21c]
007584ec : MOV dword ptr [EBP + 0x8],ECX
007584ef : TEST ECX,ECX
007584f1 : JZ 0x007584b6
007584f3 : MOV ECX,dword ptr [EAX]
007584f5 : LEA EDX,[EBP + -0xc]
007584f8 : PUSH EDX
007584f9 : PUSH 0x0
007584fb : PUSH EAX
007584fc : MOV EAX,dword ptr [ECX + 0x48]
007584ff : CALL EAX
00758501 : MOV EDI,EAX
00758503 : TEST EDI,EDI
00758505 : JL 0x007586b9
0075850b : MOV EAX,dword ptr [EBP + 0x8]
0075850e : LEA ESI,[EBP + -0x44]
00758511 : CALL 0x00755ce0
00758516 : MOV EDI,dword ptr [0x00b854cc]
0075851c : PUSH -0x1
0075851e : PUSH -0x1
00758520 : MOV ECX,ESI
00758522 : PUSH ECX
00758523 : CALL EDI
00758525 : MOV EAX,dword ptr [EBP + -0x10]
00758528 : LEA ESI,[EBP + -0x24]
0075852b : CALL 0x00755ce0
00758530 : PUSH -0x1
00758532 : PUSH -0x1
00758534 : MOV EDX,ESI
00758536 : PUSH EDX
00758537 : CALL EDI
00758539 : MOV ECX,dword ptr [EBP + -0x10]
0075853c : MOV EAX,ESI
0075853e : PUSH EAX
0075853f : PUSH ECX
00758540 : MOV ECX,dword ptr [EBP + 0x8]
00758543 : LEA ESI,[EBP + -0x34]
00758546 : LEA EDI,[EBP + -0x44]
00758549 : CALL 0x00755b50
0075854e : MOV EDX,dword ptr [0x01725204]
00758554 : MOV EAX,dword ptr [EDX + 0x210]
0075855a : TEST EAX,EAX
0075855c : JZ 0x007584b6
00758562 : MOV ECX,dword ptr [EAX]
00758564 : LEA EDX,[EBP + -0x64]
00758567 : PUSH EDX
00758568 : PUSH 0x0
0075856a : PUSH EAX
0075856b : MOV EAX,dword ptr [ECX + 0x44]
0075856e : CALL EAX
00758570 : TEST EAX,EAX
00758572 : JL 0x007586ca
00758578 : LEA ECX,[EBP + 0xffffff1c]
0075857e : TEST ECX,ECX
00758580 : JZ 0x00758590
00758582 : MOV EAX,dword ptr [EBP + -0x4c]
00758585 : MOV EDX,ECX
00758587 : MOV ECX,dword ptr [EBP + -0x48]
0075858a : PUSH EDX
0075858b : CALL 0x00755d30
00758590 : MOV EAX,dword ptr [EBX]
00758592 : MOV EDX,dword ptr [EAX + 0x50]
00758595 : PUSH 0x80
0075859a : LEA ECX,[EBP + 0xffffff1c]
007585a0 : PUSH ECX
007585a1 : PUSH 0xc0b3dc
007585a6 : PUSH EBX
007585a7 : CALL EDX
007585a9 : MOV EAX,dword ptr [EBX]
007585ab : MOV ECX,dword ptr [EAX + 0xe8]
007585b1 : PUSH 0xc0b3f0
007585b6 : PUSH EBX
007585b7 : CALL ECX
007585b9 : MOV EAX,dword ptr [EBP + -0xc]
007585bc : MOV ESI,dword ptr [EBP + -0x14]
007585bf : MOV EDX,dword ptr [ESI]
007585c1 : MOV ECX,dword ptr [EDX + 0x94]
007585c7 : PUSH EAX
007585c8 : PUSH 0x0
007585ca : PUSH ESI
007585cb : CALL ECX
007585cd : MOV EAX,dword ptr [EBP + 0x8]
007585d0 : MOV EDX,dword ptr [EBX]
007585d2 : MOV ECX,dword ptr [EDX + 0xd0]
007585d8 : PUSH EAX
007585d9 : PUSH 0xc0b400
007585de : PUSH EBX
007585df : CALL ECX
007585e1 : MOV EDX,dword ptr [ESI]
007585e3 : MOV ECX,dword ptr [EDX + 0x12c]
007585e9 : LEA EAX,[EBP + -0x24]
007585ec : PUSH EAX
007585ed : PUSH ESI
007585ee : CALL ECX
007585f0 : MOV EDX,dword ptr [ESI]
007585f2 : MOV EAX,dword ptr [EDX + 0xe4]
007585f8 : PUSH 0x1
007585fa : PUSH 0xae
007585ff : PUSH ESI
00758600 : CALL EAX
00758602 : MOV ECX,dword ptr [ESI]
00758604 : MOV EDX,dword ptr [ECX + 0x114]
0075860a : PUSH 0x1
0075860c : PUSH 0x6
0075860e : PUSH 0x0
00758610 : PUSH ESI
00758611 : CALL EDX
00758613 : MOV EAX,dword ptr [ESI]
00758615 : MOV ECX,dword ptr [EAX + 0x114]
0075861b : PUSH 0x3
0075861d : PUSH 0x1
0075861f : PUSH 0x0
00758621 : PUSH ESI
00758622 : CALL ECX
00758624 : MOV EDX,dword ptr [ESI]
00758626 : MOV EAX,dword ptr [EDX + 0x114]
0075862c : PUSH 0x3
0075862e : PUSH 0x2
00758630 : PUSH 0x0
00758632 : PUSH ESI
00758633 : CALL EAX
00758635 : MOV ECX,dword ptr [EBX]
00758637 : MOV EDX,dword ptr [ECX + 0x104]
0075863d : PUSH EBX
0075863e : CALL EDX
00758640 : MOV EAX,dword ptr [EBX]
00758642 : MOV EDX,dword ptr [EAX + 0xfc]
00758648 : PUSH 0x0
0075864a : LEA ECX,[EBP + -0x8]
0075864d : PUSH ECX
0075864e : PUSH EBX
0075864f : CALL EDX
00758651 : MOV EDI,EAX
00758653 : TEST EDI,EDI
00758655 : JL 0x007586b9
00758657 : XOR EDI,EDI
00758659 : CMP dword ptr [EBP + -0x8],EDI
0075865c : JBE 0x0075869a
0075865e : MOV EDI,EDI
00758660 : MOV EAX,dword ptr [EBX]
00758662 : MOV ECX,dword ptr [EAX + 0x100]
00758668 : PUSH EDI
00758669 : PUSH EBX
0075866a : CALL ECX
0075866c : MOVQ XMM0,qword ptr [EBP + -0x34]
00758671 : SUB ESP,0x10
00758674 : MOV EAX,ESP
00758676 : MOVQ qword ptr [EAX],XMM0
0075867a : MOVQ XMM0,qword ptr [EBP + -0x2c]
0075867f : MOVQ qword ptr [EAX + 0x8],XMM0
00758684 : CALL 0x004be960
00758689 : MOV EDX,dword ptr [EBX]
0075868b : MOV EAX,dword ptr [EDX + 0x108]
00758691 : PUSH EBX
00758692 : CALL EAX
00758694 : INC EDI
00758695 : CMP EDI,dword ptr [EBP + -0x8]
00758698 : JC 0x00758660
0075869a : MOV ECX,dword ptr [EBX]
0075869c : MOV EDX,dword ptr [ECX + 0x10c]
007586a2 : PUSH EBX
007586a3 : CALL EDX
007586a5 : MOV EAX,dword ptr [ESI]
007586a7 : MOV ECX,dword ptr [EAX + 0xe4]
007586ad : PUSH 0x0
007586af : PUSH 0xae
007586b4 : PUSH ESI
007586b5 : CALL ECX
007586b7 : XOR EDI,EDI
007586b9 : MOV EAX,dword ptr [EBP + -0xc]
007586bc : TEST EAX,EAX
007586be : JZ 0x007586c8
007586c0 : MOV EDX,dword ptr [EAX]
007586c2 : PUSH EAX
007586c3 : MOV EAX,dword ptr [EDX + 0x8]
007586c6 : CALL EAX
007586c8 : MOV EAX,EDI
007586ca : POP EDI
007586cb : POP ESI
007586cc : POP EBX
007586cd : MOV ESP,EBP
007586cf : POP EBP
007586d0 : RET 0x4
