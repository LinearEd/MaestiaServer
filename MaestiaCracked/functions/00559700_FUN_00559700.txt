PROGRAM  : Maestia.exe
FUNCTION : FUN_00559700
ENTRY    : 00559700
BODY     : [[00559700, 005597f2]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00559700(undefined4 param_1)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  GThread *this;
  int iVar4;
  int unaff_EBX;
  int unaff_EDI;
  
  iVar4 = *(int *)(unaff_EDI + 0x314);
  if (iVar4 == 0) {
    iVar4 = unaff_EDI + 0x28;
  }
  *(undefined1 *)(iVar4 + 0x15) = 0;
  if (*(int *)(iVar4 + 0x30) - *(int *)(iVar4 + 0x2c) < 1) {
    FUN_0053a0a0();
  }
  bVar1 = *(byte *)(*(int *)(iVar4 + 0x2c) + *(int *)(iVar4 + 0x3c));
  uVar2 = (uint)bVar1;
  *(int *)(iVar4 + 0x2c) = *(int *)(iVar4 + 0x2c) + 1;
  GThread::OnExit((GThread *)CONCAT31((int3)((uint)*(int *)(iVar4 + 0x3c) >> 8),bVar1));
  if (uVar2 == 0xff) {
    uVar2 = FUN_00500140();
    uVar2 = uVar2 & 0xffff;
    GThread::OnExit(this);
  }
  iVar4 = *(int *)(unaff_EDI + 0x314);
  if (iVar4 == 0) {
    iVar4 = unaff_EDI + 0x28;
  }
  iVar4 = (*(int *)(iVar4 + 0x34) - *(int *)(iVar4 + 0x30)) + *(int *)(iVar4 + 0x2c);
  if (unaff_EBX != 0) {
    FUN_00558d10(*(int *)(unaff_EBX + 4) + uVar2);
    for (; uVar2 != 0; uVar2 = uVar2 - 1) {
      iVar3 = *(int *)(unaff_EDI + 0x314);
      if (iVar3 == 0) {
        iVar3 = unaff_EDI + 0x28;
      }
      *(undefined1 *)(iVar3 + 0x15) = 0;
      FUN_005d6ec0(unaff_EDI,param_1);
    }
    return iVar4;
  }
  if (uVar2 != 0) {
    FUN_00555e50(unaff_EDI + 0x14,
                 "Error: GFx_ReadLineStyles, trying to read %d linestyles into no-style shape\n",
                 uVar2);
    return iVar4;
  }
  return iVar4;
}



============================================================
DISASSEMBLY
============================================================
00559700 : PUSH ECX
00559701 : PUSH EBP
00559702 : PUSH ESI
00559703 : MOV ESI,dword ptr [EDI + 0x314]
00559709 : TEST ESI,ESI
0055970b : JNZ 0x00559710
0055970d : LEA ESI,[EDI + 0x28]
00559710 : MOV EAX,dword ptr [ESI + 0x30]
00559713 : SUB EAX,dword ptr [ESI + 0x2c]
00559716 : MOV byte ptr [ESI + 0x15],0x0
0055971a : CMP EAX,0x1
0055971d : JGE 0x00559726
0055971f : MOV ECX,ESI
00559721 : CALL 0x0053a0a0
00559726 : MOV EAX,dword ptr [ESI + 0x2c]
00559729 : MOV ECX,dword ptr [ESI + 0x3c]
0055972c : MOV CL,byte ptr [EAX + ECX*0x1]
0055972f : MOVZX EBP,CL
00559732 : INC EAX
00559733 : PUSH EBP
00559734 : MOV dword ptr [ESI + 0x2c],EAX
00559737 : LEA ESI,[EDI + 0x14]
0055973a : PUSH 0xb8c31c
0055973f : PUSH ESI
00559740 : CALL 0x0051d420
00559745 : ADD ESP,0xc
00559748 : CMP EBP,0xff
0055974e : JNZ 0x00559769
00559750 : MOV ECX,EDI
00559752 : CALL 0x00500140
00559757 : MOVZX EBP,AX
0055975a : PUSH EBP
0055975b : PUSH 0xb8c2f8
00559760 : PUSH ESI
00559761 : CALL 0x0051d420
00559766 : ADD ESP,0xc
00559769 : MOV EAX,dword ptr [EDI + 0x314]
0055976f : TEST EAX,EAX
00559771 : JNZ 0x00559776
00559773 : LEA EAX,[EDI + 0x28]
00559776 : MOV ECX,dword ptr [EAX + 0x34]
00559779 : SUB ECX,dword ptr [EAX + 0x30]
0055977c : ADD ECX,dword ptr [EAX + 0x2c]
0055977f : MOV dword ptr [ESP + 0x8],ECX
00559783 : TEST EBX,EBX
00559785 : JZ 0x005597d2
00559787 : MOV ESI,dword ptr [EBX + 0x4]
0055978a : LEA EDX,[ESI + EBP*0x1]
0055978d : PUSH EDX
0055978e : MOV ECX,EBX
00559790 : CALL 0x00558d10
00559795 : TEST EBP,EBP
00559797 : JBE 0x005597ca
00559799 : LEA ESI,[ESI + ESI*0x2]
0055979c : ADD ESI,ESI
0055979e : ADD ESI,ESI
005597a0 : ADD ESI,ESI
005597a2 : MOV EAX,dword ptr [EDI + 0x314]
005597a8 : TEST EAX,EAX
005597aa : JNZ 0x005597af
005597ac : LEA EAX,[EDI + 0x28]
005597af : MOV byte ptr [EAX + 0x15],0x0
005597b3 : MOV EAX,dword ptr [ESP + 0x10]
005597b7 : MOV ECX,dword ptr [EBX]
005597b9 : PUSH EAX
005597ba : PUSH EDI
005597bb : ADD ECX,ESI
005597bd : CALL 0x005d6ec0
005597c2 : ADD ESI,0x18
005597c5 : SUB EBP,0x1
005597c8 : JNZ 0x005597a2
005597ca : MOV EAX,dword ptr [ESP + 0x8]
005597ce : POP ESI
005597cf : POP EBP
005597d0 : POP ECX
005597d1 : RET
005597d2 : TEST EBP,EBP
005597d4 : JBE 0x005597ed
005597d6 : PUSH EBP
005597d7 : PUSH 0xb8c2a8
005597dc : PUSH ESI
005597dd : CALL 0x00555e50
005597e2 : MOV EAX,dword ptr [ESP + 0x14]
005597e6 : ADD ESP,0xc
005597e9 : POP ESI
005597ea : POP EBP
005597eb : POP ECX
005597ec : RET
005597ed : POP ESI
005597ee : MOV EAX,ECX
005597f0 : POP EBP
005597f1 : POP ECX
005597f2 : RET
