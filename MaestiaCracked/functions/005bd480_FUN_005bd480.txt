PROGRAM  : Maestia.exe
FUNCTION : FUN_005bd480
ENTRY    : 005bd480
BODY     : [[005bd480, 005bd524]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005bd480(GRefCountNTSImpl *param_1)

{
  byte *pbVar1;
  double dVar2;
  GRefCountNTSImpl *pGVar3;
  GRefCountNTSImpl *this;
  int iVar4;
  undefined4 *puVar5;
  
  pGVar3 = param_1;
  pbVar1 = *(byte **)(param_1 + 4);
  if (4 < *pbVar1) {
    FUN_00526400();
  }
  *pbVar1 = 3;
  pbVar1[4] = 0;
  pbVar1[5] = 0;
  pbVar1[6] = 0;
  pbVar1[7] = 0;
  pbVar1[8] = 0;
  pbVar1[9] = 0;
  pbVar1[10] = 0xf0;
  pbVar1[0xb] = 0xbf;
  if (*(int *)(pGVar3 + 0x18) != 0) {
    puVar5 = &param_1;
    FUN_005296a0(puVar5);
    FUN_00597b80(puVar5);
    this = param_1;
    if (param_1 != (GRefCountNTSImpl *)0x0) {
      iVar4 = (**(code **)(*(int *)param_1 + 0x9c))();
      if (iVar4 == 4) {
        param_1 = (GRefCountNTSImpl *)(**(code **)(*(int *)this + 0x15c))();
        dVar2 = (double)(int)param_1;
        if ((int)param_1 < 0) {
          dVar2 = dVar2 + 4294967296.0;
        }
        pbVar1 = *(byte **)(pGVar3 + 4);
        if (4 < *pbVar1) {
          FUN_00526400();
        }
        *pbVar1 = 3;
        *(double *)(pbVar1 + 4) = dVar2;
      }
      GRefCountNTSImpl::Release(this);
      return;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005bd480 : SUB ESP,0x8
005bd483 : PUSH EBX
005bd484 : MOV EBX,dword ptr [ESP + 0x10]
005bd488 : PUSH ESI
005bd489 : MOV ESI,dword ptr [EBX + 0x4]
005bd48c : CMP byte ptr [ESI],0x5
005bd48f : JC 0x005bd498
005bd491 : MOV ECX,ESI
005bd493 : CALL 0x00526400
005bd498 : FLD double ptr [0x00b86090]
005bd49e : MOV byte ptr [ESI],0x3
005bd4a1 : FSTP double ptr [ESI + 0x4]
005bd4a4 : MOV ECX,dword ptr [EBX + 0x18]
005bd4a7 : TEST ECX,ECX
005bd4a9 : JZ 0x005bd51f
005bd4ab : PUSH EDI
005bd4ac : LEA EAX,[ESP + 0x18]
005bd4b0 : PUSH EAX
005bd4b1 : CALL 0x005296a0
005bd4b6 : MOV ECX,EAX
005bd4b8 : CALL 0x00597b80
005bd4bd : MOV EDI,dword ptr [ESP + 0x18]
005bd4c1 : TEST EDI,EDI
005bd4c3 : JZ 0x005bd51e
005bd4c5 : MOV EDX,dword ptr [EDI]
005bd4c7 : MOV EAX,dword ptr [EDX + 0x9c]
005bd4cd : MOV ECX,EDI
005bd4cf : CALL EAX
005bd4d1 : CMP EAX,0x4
005bd4d4 : JNZ 0x005bd511
005bd4d6 : MOV EDX,dword ptr [EDI]
005bd4d8 : MOV EAX,dword ptr [EDX + 0x15c]
005bd4de : MOV ECX,EDI
005bd4e0 : CALL EAX
005bd4e2 : MOV dword ptr [ESP + 0x18],EAX
005bd4e6 : FILD dword ptr [ESP + 0x18]
005bd4ea : TEST EAX,EAX
005bd4ec : JGE 0x005bd4f4
005bd4ee : FADD double ptr [0x00cdf6f8]
005bd4f4 : MOV ESI,dword ptr [EBX + 0x4]
005bd4f7 : FSTP double ptr [ESP + 0xc]
005bd4fb : CMP byte ptr [ESI],0x5
005bd4fe : JC 0x005bd507
005bd500 : MOV ECX,ESI
005bd502 : CALL 0x00526400
005bd507 : FLD double ptr [ESP + 0xc]
005bd50b : MOV byte ptr [ESI],0x3
005bd50e : FSTP double ptr [ESI + 0x4]
005bd511 : MOV ECX,EDI
005bd513 : POP EDI
005bd514 : POP ESI
005bd515 : POP EBX
005bd516 : ADD ESP,0x8
005bd519 : JMP 0x004ff7c0
005bd51e : POP EDI
005bd51f : POP ESI
005bd520 : POP EBX
005bd521 : ADD ESP,0x8
005bd524 : RET
