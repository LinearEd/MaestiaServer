PROGRAM  : Maestia.exe
FUNCTION : FUN_00a3ae90
ENTRY    : 00a3ae90
BODY     : [[00a3ae90, 00a3afca]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a3ae90(undefined4 param_1,uint param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  int iVar2;
  undefined4 in_EAX;
  int *piVar3;
  byte bVar4;
  int unaff_EDI;
  
  piVar3 = (int *)FUN_00a1a840(in_EAX);
  bVar4 = (byte)param_2;
  if (piVar3 != (int *)0x0) {
    if (bVar4 < 0x21) {
      if (piVar3[(param_2 & 0xff) + 0x5fc] != 0) {
        piVar3[(param_2 & 0xff) + 0x5db] = param_4;
        *(int *)(piVar3[(param_2 & 0xff) + 0x5fc] + 0x30) = param_4;
      }
    }
    (**(code **)(*piVar3 + 0x490))(param_1,param_2,param_3,0,1,0,1);
  }
  if (piVar3 == *(int **)(unaff_EDI + 0xac)) {
    iVar1 = *(int *)(unaff_EDI + 0xb0);
    if (iVar1 != 0) {
      if (bVar4 < 0x21) {
        iVar2 = *(int *)(iVar1 + 0x17f0 + (param_2 & 0xff) * 4);
        if (iVar2 != 0) {
          *(int *)(iVar1 + 0x176c + (param_2 & 0xff) * 4) = param_4;
          *(int *)(iVar2 + 0x30) = param_4;
        }
      }
      (**(code **)(**(int **)(unaff_EDI + 0xb0) + 0x490))(param_1,param_2,param_3,0,1,0,1);
    }
    iVar1 = *(int *)(unaff_EDI + 0xb4);
    if (iVar1 != 0) {
      if (bVar4 < 0x21) {
        iVar2 = *(int *)(iVar1 + 0x17f0 + (param_2 & 0xff) * 4);
        if (iVar2 != 0) {
          *(int *)(iVar1 + 0x176c + (param_2 & 0xff) * 4) = param_4;
          *(int *)(iVar2 + 0x30) = param_4;
        }
      }
      (**(code **)(**(int **)(unaff_EDI + 0xb4) + 0x490))(param_1,param_2,param_3,0,1,0,1);
    }
    if (((*DAT_00da9894 != 0) && (iVar1 = *(int *)(*DAT_00da9894 + 0x130), iVar1 != 0)) &&
       (*(int *)(iVar1 + 0x3c) != 0)) {
      if (iVar1 == 0) {
        FUN_009a32b0(0,param_2);
        return;
      }
      FUN_009a32b0(*(undefined4 *)(iVar1 + 0x3c),param_2);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00a3ae90 : PUSH EBP
00a3ae91 : MOV EBP,ESP
00a3ae93 : PUSH EBX
00a3ae94 : MOV EBX,dword ptr [EBP + 0xc]
00a3ae97 : PUSH ESI
00a3ae98 : PUSH EAX
00a3ae99 : MOV ECX,EDI
00a3ae9b : CALL 0x00a1a840
00a3aea0 : MOV ESI,EAX
00a3aea2 : TEST ESI,ESI
00a3aea4 : JZ 0x00a3aee3
00a3aea6 : CMP BL,0x21
00a3aea9 : JNC 0x00a3aec6
00a3aeab : MOVZX EAX,BL
00a3aeae : MOV ECX,dword ptr [ESI + EAX*0x4 + 0x17f0]
00a3aeb5 : TEST ECX,ECX
00a3aeb7 : JZ 0x00a3aec6
00a3aeb9 : MOV EDX,dword ptr [EBP + 0x14]
00a3aebc : MOV dword ptr [ESI + EAX*0x4 + 0x176c],EDX
00a3aec3 : MOV dword ptr [ECX + 0x30],EDX
00a3aec6 : MOV EAX,dword ptr [EBP + 0x10]
00a3aec9 : MOV ECX,dword ptr [EBP + 0x8]
00a3aecc : MOV EDX,dword ptr [ESI]
00a3aece : MOV EDX,dword ptr [EDX + 0x490]
00a3aed4 : PUSH 0x1
00a3aed6 : PUSH 0x0
00a3aed8 : PUSH 0x1
00a3aeda : PUSH 0x0
00a3aedc : PUSH EAX
00a3aedd : PUSH EBX
00a3aede : PUSH ECX
00a3aedf : MOV ECX,ESI
00a3aee1 : CALL EDX
00a3aee3 : CMP ESI,dword ptr [EDI + 0xac]
00a3aee9 : JNZ 0x00a3afc5
00a3aeef : MOV EDX,dword ptr [EDI + 0xb0]
00a3aef5 : TEST EDX,EDX
00a3aef7 : JZ 0x00a3af3a
00a3aef9 : CMP BL,0x21
00a3aefc : JNC 0x00a3af19
00a3aefe : MOVZX EAX,BL
00a3af01 : MOV ECX,dword ptr [EDX + EAX*0x4 + 0x17f0]
00a3af08 : TEST ECX,ECX
00a3af0a : JZ 0x00a3af19
00a3af0c : MOV ESI,dword ptr [EBP + 0x14]
00a3af0f : MOV dword ptr [EDX + EAX*0x4 + 0x176c],ESI
00a3af16 : MOV dword ptr [ECX + 0x30],ESI
00a3af19 : MOV EDX,dword ptr [EBP + 0x10]
00a3af1c : MOV ECX,dword ptr [EDI + 0xb0]
00a3af22 : MOV EAX,dword ptr [ECX]
00a3af24 : MOV EAX,dword ptr [EAX + 0x490]
00a3af2a : PUSH 0x1
00a3af2c : PUSH 0x0
00a3af2e : PUSH 0x1
00a3af30 : PUSH 0x0
00a3af32 : PUSH EDX
00a3af33 : MOV EDX,dword ptr [EBP + 0x8]
00a3af36 : PUSH EBX
00a3af37 : PUSH EDX
00a3af38 : CALL EAX
00a3af3a : MOV EDX,dword ptr [EDI + 0xb4]
00a3af40 : TEST EDX,EDX
00a3af42 : JZ 0x00a3af85
00a3af44 : CMP BL,0x21
00a3af47 : JNC 0x00a3af64
00a3af49 : MOVZX EAX,BL
00a3af4c : MOV ECX,dword ptr [EDX + EAX*0x4 + 0x17f0]
00a3af53 : TEST ECX,ECX
00a3af55 : JZ 0x00a3af64
00a3af57 : MOV ESI,dword ptr [EBP + 0x14]
00a3af5a : MOV dword ptr [EDX + EAX*0x4 + 0x176c],ESI
00a3af61 : MOV dword ptr [ECX + 0x30],ESI
00a3af64 : MOV EAX,dword ptr [EBP + 0x10]
00a3af67 : MOV ECX,dword ptr [EDI + 0xb4]
00a3af6d : MOV EDX,dword ptr [ECX]
00a3af6f : MOV EDX,dword ptr [EDX + 0x490]
00a3af75 : PUSH 0x1
00a3af77 : PUSH 0x0
00a3af79 : PUSH 0x1
00a3af7b : PUSH 0x0
00a3af7d : PUSH EAX
00a3af7e : MOV EAX,dword ptr [EBP + 0x8]
00a3af81 : PUSH EBX
00a3af82 : PUSH EAX
00a3af83 : CALL EDX
00a3af85 : MOV EAX,[0x00da9894]
00a3af8a : MOV ECX,dword ptr [EAX]
00a3af8c : TEST ECX,ECX
00a3af8e : JZ 0x00a3afc5
00a3af90 : MOV EAX,dword ptr [ECX + 0x130]
00a3af96 : TEST EAX,EAX
00a3af98 : JZ 0x00a3afc5
00a3af9a : CMP dword ptr [EAX + 0x3c],0x0
00a3af9e : JZ 0x00a3afc5
00a3afa0 : MOV ECX,EAX
00a3afa2 : TEST ECX,ECX
00a3afa4 : JNZ 0x00a3afb6
00a3afa6 : PUSH EBX
00a3afa7 : PUSH ECX
00a3afa8 : LEA ECX,[EAX + 0x1]
00a3afab : CALL 0x009a32b0
00a3afb0 : POP ESI
00a3afb1 : POP EBX
00a3afb2 : POP EBP
00a3afb3 : RET 0x10
00a3afb6 : MOV ECX,dword ptr [ECX + 0x3c]
00a3afb9 : PUSH EBX
00a3afba : PUSH ECX
00a3afbb : MOV ECX,0x1
00a3afc0 : CALL 0x009a32b0
00a3afc5 : POP ESI
00a3afc6 : POP EBX
00a3afc7 : POP EBP
00a3afc8 : RET 0x10
