PROGRAM  : Maestia.exe
FUNCTION : FUN_009370a0
ENTRY    : 009370a0
BODY     : [[009370a0, 00937252]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009370a0(undefined4 param_1,int param_2)

{
  ushort uVar1;
  uint uVar2;
  undefined4 uVar3;
  ushort *puVar4;
  int iVar5;
  int *in_ECX;
  ushort *puVar6;
  bool bVar7;
  undefined1 local_60 [4];
  int local_5c;
  undefined1 local_50 [4];
  undefined2 local_4c;
  undefined4 local_3c;
  uint local_38;
  undefined2 local_30;
  undefined4 local_20;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b6eafb;
  local_14 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff90;
  ExceptionList = &local_14;
  if (param_2 != 0) {
    FUN_00406460(&DAT_00c6f21c);
    local_c = 0;
    uVar3 = FUN_00403dd0(param_2,uVar2);
    local_c._0_1_ = 1;
    FUN_0070cd60(local_60,uVar3,local_50,0);
    local_c = CONCAT31(local_c._1_3_,3);
    if (7 < local_1c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_1c = 7;
    local_20 = 0;
    local_30 = 0;
    local_c = CONCAT31(local_c._1_3_,4);
    if (7 < local_38) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_38 = 7;
    local_3c = 0;
    local_4c = 0;
    iVar5 = *DAT_00da9894;
    if ((iVar5 != 0) && (*(int *)(iVar5 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar5 + 0x114) + 4))
                (*(int **)(iVar5 + 0x114),"SetType",&DAT_00c6f234,L"QuestList");
    }
    if (*(uint *)(local_5c + 0x18) < 8) {
      puVar4 = (ushort *)(local_5c + 4);
    }
    else {
      puVar4 = *(ushort **)(local_5c + 4);
    }
    puVar6 = &DAT_00c6f240;
    do {
      uVar1 = *puVar4;
      bVar7 = uVar1 < *puVar6;
      if (uVar1 != *puVar6) {
LAB_009371d6:
        iVar5 = (1 - (uint)bVar7) - (uint)(bVar7 != 0);
        goto LAB_009371db;
      }
      if (uVar1 == 0) break;
      uVar1 = puVar4[1];
      bVar7 = uVar1 < puVar6[1];
      if (uVar1 != puVar6[1]) goto LAB_009371d6;
      puVar4 = puVar4 + 2;
      puVar6 = puVar6 + 2;
    } while (uVar1 != 0);
    iVar5 = 0;
LAB_009371db:
    if (iVar5 == 0) {
      (**(code **)(*in_ECX + 0x10))();
      (**(code **)(*in_ECX + 0x20))();
    }
    else {
      FUN_0093bff0(param_1,param_2);
    }
    local_c = 0xffffffff;
    if (local_5c != 0) {
      FUN_00405450(in_ECX);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_14;
  return;
}



============================================================
DISASSEMBLY
============================================================
009370a0 : PUSH EBP
009370a1 : MOV EBP,ESP
009370a3 : AND ESP,0xfffffff8
009370a6 : PUSH -0x1
009370a8 : PUSH 0xb6eafb
009370ad : MOV EAX,FS:[0x0]
009370b3 : PUSH EAX
009370b4 : SUB ESP,0x50
009370b7 : PUSH EBX
009370b8 : PUSH ESI
009370b9 : PUSH EDI
009370ba : MOV EAX,[0x00d66fa0]
009370bf : XOR EAX,ESP
009370c1 : PUSH EAX
009370c2 : LEA EAX,[ESP + 0x60]
009370c6 : MOV FS:[0x0],EAX
009370cc : MOV dword ptr [ESP + 0x10],ECX
009370d0 : MOV ESI,dword ptr [EBP + 0xc]
009370d3 : XOR EBX,EBX
009370d5 : CMP ESI,EBX
009370d7 : JZ 0x0093723e
009370dd : PUSH 0xc6f21c
009370e2 : LEA ECX,[ESP + 0x28]
009370e6 : CALL 0x00406460
009370eb : MOV dword ptr [ESP + 0x68],EBX
009370ef : PUSH ESI
009370f0 : LEA ESI,[ESP + 0x44]
009370f4 : CALL 0x00403dd0
009370f9 : ADD ESP,0x4
009370fc : MOV byte ptr [ESP + 0x68],0x1
00937101 : PUSH EBX
00937102 : LEA ECX,[ESP + 0x28]
00937106 : PUSH ECX
00937107 : PUSH EAX
00937108 : LEA EDX,[ESP + 0x20]
0093710c : PUSH EDX
0093710d : CALL 0x0070cd60
00937112 : ADD ESP,0x10
00937115 : MOV byte ptr [ESP + 0x68],0x3
0093711a : MOV EDI,0x8
0093711f : CMP dword ptr [ESP + 0x58],EDI
00937123 : JC 0x0093712e
00937125 : MOV ECX,dword ptr [ESP + 0x44]
00937129 : CALL 0x006f04e0
0093712e : MOV ESI,0x7
00937133 : XOR EAX,EAX
00937135 : MOV dword ptr [ESP + 0x58],ESI
00937139 : MOV dword ptr [ESP + 0x54],EBX
0093713d : MOV word ptr [ESP + 0x44],AX
00937142 : MOV byte ptr [ESP + 0x68],0x4
00937147 : CMP dword ptr [ESP + 0x3c],EDI
0093714b : JC 0x00937156
0093714d : MOV ECX,dword ptr [ESP + 0x28]
00937151 : CALL 0x006f04e0
00937156 : MOV EDX,dword ptr [0x00da9894]
0093715c : XOR ECX,ECX
0093715e : MOV dword ptr [ESP + 0x3c],ESI
00937162 : MOV dword ptr [ESP + 0x38],EBX
00937166 : MOV word ptr [ESP + 0x28],CX
0093716b : MOV EAX,dword ptr [EDX]
0093716d : CMP EAX,EBX
0093716f : JZ 0x00937199
00937171 : CMP dword ptr [EAX + 0x114],EBX
00937177 : JZ 0x00937199
00937179 : MOV EAX,dword ptr [EAX + 0x114]
0093717f : MOV ECX,dword ptr [EAX]
00937181 : MOV EDX,dword ptr [ECX + 0x4]
00937184 : PUSH 0xc6f220
00937189 : PUSH 0xc6f234
0093718e : PUSH 0xc6f238
00937193 : PUSH EAX
00937194 : CALL EDX
00937196 : ADD ESP,0x10
00937199 : MOV EAX,dword ptr [ESP + 0x18]
0093719d : CMP dword ptr [EAX + 0x18],EDI
009371a0 : JC 0x009371a7
009371a2 : MOV EAX,dword ptr [EAX + 0x4]
009371a5 : JMP 0x009371aa
009371a7 : ADD EAX,0x4
009371aa : MOV ECX,0xc6f240
009371af : NOP
009371b0 : MOV DX,word ptr [EAX]
009371b3 : CMP DX,word ptr [ECX]
009371b6 : JNZ 0x009371d6
009371b8 : CMP DX,BX
009371bb : JZ 0x009371d2
009371bd : MOV DX,word ptr [EAX + 0x2]
009371c1 : CMP DX,word ptr [ECX + 0x2]
009371c5 : JNZ 0x009371d6
009371c7 : ADD EAX,0x4
009371ca : ADD ECX,0x4
009371cd : CMP DX,BX
009371d0 : JNZ 0x009371b0
009371d2 : XOR EAX,EAX
009371d4 : JMP 0x009371db
009371d6 : SBB EAX,EAX
009371d8 : SBB EAX,-0x1
009371db : CMP EAX,EBX
009371dd : JNZ 0x009371f7
009371df : MOV ESI,dword ptr [ESP + 0x10]
009371e3 : MOV EAX,dword ptr [ESI]
009371e5 : MOV EDX,dword ptr [EAX + 0x10]
009371e8 : MOV ECX,ESI
009371ea : CALL EDX
009371ec : MOV EAX,dword ptr [ESI]
009371ee : MOV EDX,dword ptr [EAX + 0x20]
009371f1 : MOV ECX,ESI
009371f3 : CALL EDX
009371f5 : JMP 0x00937208
009371f7 : MOV EAX,dword ptr [EBP + 0xc]
009371fa : MOV ECX,dword ptr [EBP + 0x8]
009371fd : PUSH EAX
009371fe : PUSH ECX
009371ff : MOV ECX,dword ptr [ESP + 0x18]
00937203 : CALL 0x0093bff0
00937208 : MOV dword ptr [ESP + 0x68],0xffffffff
00937210 : MOV EAX,dword ptr [ESP + 0x18]
00937214 : CMP EAX,EBX
00937216 : JZ 0x00937232
00937218 : MOV EDX,dword ptr [ESP + 0x10]
0093721c : MOV EDI,dword ptr [ESP + 0x1c]
00937220 : PUSH EDX
00937221 : CALL 0x00405450
00937226 : MOV ECX,dword ptr [ESP + 0x1c]
0093722a : ADD ESP,0x4
0093722d : CALL 0x006f04e0
00937232 : MOV dword ptr [ESP + 0x18],EBX
00937236 : MOV dword ptr [ESP + 0x1c],EBX
0093723a : MOV dword ptr [ESP + 0x20],EBX
0093723e : MOV ECX,dword ptr [ESP + 0x60]
00937242 : MOV dword ptr FS:[0x0],ECX
00937249 : POP ECX
0093724a : POP EDI
0093724b : POP ESI
0093724c : POP EBX
0093724d : MOV ESP,EBP
0093724f : POP EBP
00937250 : RET 0x8
