PROGRAM  : Maestia.exe
FUNCTION : FUN_0058c7d0
ENTRY    : 0058c7d0
BODY     : [[0058c7d0, 0058c99c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0058c7d0(int *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  bool bVar4;
  char cVar5;
  undefined4 uVar6;
  int *in_ECX;
  int iVar7;
  int *piVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  undefined4 uStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  GMatrix2D aGStack_38 [24];
  undefined4 auStack_20 [8];
  
  if ((((byte)in_ECX[0x23] & 3) == 1) || ((in_ECX[0x23] & 0x8000U) != 0)) {
    puVar1 = (undefined4 *)param_1[0x11];
    iVar2 = param_1[8];
    puVar3 = (undefined4 *)param_1[0x10];
    param_1[8] = *(int *)(in_ECX[0x1f] + 0x1c) + 0x18;
    if ((in_ECX[0x6d] == 0) || (cVar5 = (**(code **)(*in_ECX + 0xa0))(), cVar5 != '\0')) {
      piVar8 = (int *)0x0;
    }
    else {
      piVar8 = (int *)in_ECX[0x6d];
    }
    bVar4 = false;
    if (piVar8 != (int *)0x0) {
      cVar5 = (**(code **)(*piVar8 + 0xa0))();
      if ((cVar5 == '\0') || ((*(byte *)((int)piVar8 + 0x66) & 0x10) != 0)) {
        FUN_0058b4b0(0);
      }
      else {
        GMatrix2D::SetIdentity(aGStack_38);
        FUN_0051cdf0(aGStack_38);
        param_1[0x10] = (int)aGStack_38;
        FUN_005ec460(piVar8);
        bVar4 = true;
      }
    }
    uStack_50 = *puVar3;
    uStack_4c = puVar3[1];
    uStack_48 = puVar3[2];
    uStack_44 = puVar3[3];
    uStack_40 = puVar3[4];
    uStack_3c = puVar3[5];
    GMatrix2D::Prepend((GMatrix2D *)&uStack_50,(GMatrix2D *)(in_ECX + 0x11));
    param_1[0x10] = (int)&uStack_50;
    puVar9 = puVar1;
    puVar10 = auStack_20;
    for (iVar7 = 8; iVar7 != 0; iVar7 = iVar7 + -1) {
      *puVar10 = *puVar9;
      puVar9 = puVar9 + 1;
      puVar10 = puVar10 + 1;
    }
    FUN_0059cfa0(in_ECX + 9);
    param_1[0x11] = (int)auStack_20;
    if (in_ECX[0x6c] != 0) {
      uVar6 = FUN_0051cef0();
      FUN_005d7770(param_1,param_1[0x10],auStack_20,uVar6,(short)in_ECX[0x19] != 0);
    }
    if (in_ECX[0x70] == 0) {
      FUN_005ec850(param_1);
    }
    else {
      (**(code **)(**(int **)(*param_1 + 0xc) + 0x34))(in_ECX[0x70] + 0x48);
      FUN_005ec850(param_1);
      (**(code **)(**(int **)(*param_1 + 0xc) + 0x38))();
    }
    param_1[8] = iVar2;
    param_1[0x11] = (int)puVar1;
    param_1[0x10] = (int)puVar3;
    (**(code **)(*in_ECX + 0xf4))();
    if (bVar4) {
      FUN_005ec4e0();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0058c7d0 : SUB ESP,0x5c
0058c7d3 : PUSH EBX
0058c7d4 : MOV EBX,ECX
0058c7d6 : MOV EAX,dword ptr [EBX + 0x8c]
0058c7dc : MOV ECX,EAX
0058c7de : AND CL,0x3
0058c7e1 : CMP CL,0x1
0058c7e4 : JZ 0x0058c7f1
0058c7e6 : TEST EAX,0x8000
0058c7eb : JZ 0x0058c996
0058c7f1 : MOV ECX,dword ptr [EBX + 0x7c]
0058c7f4 : PUSH EBP
0058c7f5 : MOV EBP,dword ptr [ESP + 0x68]
0058c7f9 : MOV EDX,dword ptr [EBP + 0x44]
0058c7fc : MOV EAX,dword ptr [EBP + 0x20]
0058c7ff : MOV dword ptr [ESP + 0x8],EDX
0058c803 : MOV EDX,dword ptr [ECX + 0x1c]
0058c806 : PUSH ESI
0058c807 : ADD EDX,0x18
0058c80a : PUSH EDI
0058c80b : MOV EDI,dword ptr [EBP + 0x40]
0058c80e : MOV dword ptr [EBP + 0x20],EDX
0058c811 : CMP dword ptr [EBX + 0x1b4],0x0
0058c818 : MOV dword ptr [ESP + 0x18],EDI
0058c81c : MOV dword ptr [ESP + 0x14],EAX
0058c820 : JZ 0x0058c83a
0058c822 : MOV EAX,dword ptr [EBX]
0058c824 : MOV EDX,dword ptr [EAX + 0xa0]
0058c82a : MOV ECX,EBX
0058c82c : CALL EDX
0058c82e : TEST AL,AL
0058c830 : JNZ 0x0058c83a
0058c832 : MOV ESI,dword ptr [EBX + 0x1b4]
0058c838 : JMP 0x0058c83c
0058c83a : XOR ESI,ESI
0058c83c : MOV byte ptr [ESP + 0x70],0x0
0058c841 : TEST ESI,ESI
0058c843 : JZ 0x0058c890
0058c845 : MOV EAX,dword ptr [ESI]
0058c847 : MOV EDX,dword ptr [EAX + 0xa0]
0058c84d : MOV ECX,ESI
0058c84f : CALL EDX
0058c851 : TEST AL,AL
0058c853 : JZ 0x0058c887
0058c855 : TEST byte ptr [ESI + 0x66],0x10
0058c859 : JNZ 0x0058c887
0058c85b : LEA ECX,[ESP + 0x34]
0058c85f : CALL 0x00522b80
0058c864 : MOV ECX,dword ptr [ESI + 0x20]
0058c867 : LEA EAX,[ESP + 0x34]
0058c86b : PUSH EAX
0058c86c : CALL 0x0051cdf0
0058c871 : LEA ECX,[ESP + 0x34]
0058c875 : MOV dword ptr [EBP + 0x40],ECX
0058c878 : PUSH ESI
0058c879 : MOV ECX,EBP
0058c87b : CALL 0x005ec460
0058c880 : MOV byte ptr [ESP + 0x70],0x1
0058c885 : JMP 0x0058c890
0058c887 : PUSH 0x0
0058c889 : MOV ECX,EBX
0058c88b : CALL 0x0058b4b0
0058c890 : FLD float ptr [EDI]
0058c892 : LEA EDX,[EBX + 0x44]
0058c895 : FSTP float ptr [ESP + 0x1c]
0058c899 : PUSH EDX
0058c89a : FLD float ptr [EDI + 0x4]
0058c89d : LEA ECX,[ESP + 0x20]
0058c8a1 : FSTP float ptr [ESP + 0x24]
0058c8a5 : FLD float ptr [EDI + 0x8]
0058c8a8 : FSTP float ptr [ESP + 0x28]
0058c8ac : FLD float ptr [EDI + 0xc]
0058c8af : FSTP float ptr [ESP + 0x2c]
0058c8b3 : FLD float ptr [EDI + 0x10]
0058c8b6 : FSTP float ptr [ESP + 0x30]
0058c8ba : FLD float ptr [EDI + 0x14]
0058c8bd : FSTP float ptr [ESP + 0x34]
0058c8c1 : CALL 0x00522e20
0058c8c6 : MOV ESI,dword ptr [ESP + 0x10]
0058c8ca : LEA EAX,[ESP + 0x1c]
0058c8ce : MOV dword ptr [EBP + 0x40],EAX
0058c8d1 : MOV ECX,0x8
0058c8d6 : LEA EDI,[ESP + 0x4c]
0058c8da : MOVSD.REP ES:EDI,ESI
0058c8dc : LEA ECX,[EBX + 0x24]
0058c8df : PUSH ECX
0058c8e0 : LEA ECX,[ESP + 0x50]
0058c8e4 : CALL 0x0059cfa0
0058c8e9 : LEA EDX,[ESP + 0x4c]
0058c8ed : MOV dword ptr [EBP + 0x44],EDX
0058c8f0 : CMP dword ptr [EBX + 0x1b0],0x0
0058c8f7 : JZ 0x0058c922
0058c8f9 : MOV ECX,EBX
0058c8fb : CALL 0x0051cef0
0058c900 : CMP word ptr [EBX + 0x64],0x0
0058c905 : SETA CL
0058c908 : MOVZX EDX,CL
0058c90b : MOV ECX,dword ptr [EBP + 0x40]
0058c90e : PUSH EDX
0058c90f : PUSH EAX
0058c910 : LEA EAX,[ESP + 0x54]
0058c914 : PUSH EAX
0058c915 : PUSH ECX
0058c916 : MOV ECX,dword ptr [EBX + 0x1b0]
0058c91c : PUSH EBP
0058c91d : CALL 0x005d7770
0058c922 : MOV EAX,dword ptr [EBX + 0x1c0]
0058c928 : TEST EAX,EAX
0058c92a : JNZ 0x0058c93a
0058c92c : PUSH EBP
0058c92d : LEA ECX,[EBX + 0xa8]
0058c933 : CALL 0x005ec850
0058c938 : JMP 0x0058c964
0058c93a : MOV EDX,dword ptr [EBP]
0058c93d : MOV ECX,dword ptr [EDX + 0xc]
0058c940 : MOV EDX,dword ptr [ECX]
0058c942 : ADD EAX,0x48
0058c945 : PUSH EAX
0058c946 : MOV EAX,dword ptr [EDX + 0x34]
0058c949 : CALL EAX
0058c94b : PUSH EBP
0058c94c : LEA ECX,[EBX + 0xa8]
0058c952 : CALL 0x005ec850
0058c957 : MOV ECX,dword ptr [EBP]
0058c95a : MOV ECX,dword ptr [ECX + 0xc]
0058c95d : MOV EDX,dword ptr [ECX]
0058c95f : MOV EAX,dword ptr [EDX + 0x38]
0058c962 : CALL EAX
0058c964 : MOV ECX,dword ptr [ESP + 0x14]
0058c968 : MOV EDX,dword ptr [ESP + 0x18]
0058c96c : MOV EAX,dword ptr [ESP + 0x10]
0058c970 : MOV dword ptr [EBP + 0x20],ECX
0058c973 : MOV dword ptr [EBP + 0x44],EAX
0058c976 : MOV dword ptr [EBP + 0x40],EDX
0058c979 : MOV EDX,dword ptr [EBX]
0058c97b : MOV EAX,dword ptr [EDX + 0xf4]
0058c981 : MOV ECX,EBX
0058c983 : CALL EAX
0058c985 : CMP byte ptr [ESP + 0x70],0x0
0058c98a : JZ 0x0058c993
0058c98c : MOV ECX,EBP
0058c98e : CALL 0x005ec4e0
0058c993 : POP EDI
0058c994 : POP ESI
0058c995 : POP EBP
0058c996 : POP EBX
0058c997 : ADD ESP,0x5c
0058c99a : RET 0x4
