PROGRAM  : Maestia.exe
FUNCTION : FUN_00528100
ENTRY    : 00528100
BODY     : [[00528100, 005282aa]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00528100(int param_1)

{
  int *piVar1;
  byte bVar2;
  int iVar3;
  undefined4 uVar4;
  byte *in_ECX;
  float10 fVar5;
  double local_30 [2];
  byte local_20;
  int local_1c;
  byte local_10;
  
  iVar3 = param_1;
  local_20 = 0;
  local_10 = 0;
  uVar4 = FUN_00527d10(local_30,param_1,0);
  FUN_005268b0(uVar4);
  if (4 < local_30[0]._0_1_) {
    FUN_00526400();
  }
  uVar4 = FUN_00527d10(local_30,iVar3,0);
  FUN_005268b0(uVar4);
  if (4 < local_30[0]._0_1_) {
    FUN_00526400();
  }
  if ((local_20 == 5) || (local_10 == 5)) {
    bVar2 = *(byte *)(iVar3 + 0x7c);
    if (local_20 == 0) {
      if (bVar2 - 1 < 6) {
        local_1c = *(int *)(*(int *)(iVar3 + 0x78) + 8);
        piVar1 = (int *)(local_1c + 8);
        *piVar1 = *piVar1 + 1;
      }
      else {
        local_1c = *(int *)(*(int *)(iVar3 + 0x78) + 0xcc);
        piVar1 = (int *)(local_1c + 8);
        *piVar1 = *piVar1 + 1;
      }
    }
    else {
      FUN_005272e0(&param_1,iVar3,0xffffffff,0);
      local_1c = param_1;
    }
    FUN_00526400();
    local_20 = 5;
    *(int *)(local_1c + 8) = *(int *)(local_1c + 8) + 1;
    piVar1 = (int *)(local_1c + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
    uVar4 = FUN_005276d0(&param_1,iVar3,(uint)bVar2);
    FUN_00527c90(iVar3,uVar4);
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -1;
    if (*(int *)(param_1 + 8) == 0) {
      FUN_00525340();
    }
    FUN_005272e0(&param_1,iVar3,0xffffffff,0);
    if (4 < *in_ECX) {
      FUN_00526400();
    }
    *in_ECX = 5;
    *(int *)(in_ECX + 4) = param_1;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
    piVar1 = (int *)(param_1 + 8);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 == 0) {
      FUN_00525340();
    }
  }
  else {
    fVar5 = (float10)FUN_00527730(iVar3);
    local_30[0] = (double)fVar5;
    fVar5 = (float10)FUN_00527730(iVar3);
    local_30[0] = (double)(fVar5 + (float10)local_30[0]);
    if (4 < *in_ECX) {
      FUN_00526400();
    }
    *in_ECX = 3;
    *(double *)(in_ECX + 4) = local_30[0];
  }
  if (4 < local_10) {
    FUN_00526400();
  }
  if (4 < local_20) {
    FUN_00526400();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00528100 : SUB ESP,0x30
00528103 : PUSH EBP
00528104 : PUSH ESI
00528105 : MOV ESI,dword ptr [ESP + 0x3c]
00528109 : PUSH 0x0
0052810b : PUSH ESI
0052810c : LEA EAX,[ESP + 0x10]
00528110 : PUSH EAX
00528111 : MOV EBP,ECX
00528113 : MOV byte ptr [ESP + 0x24],0x0
00528118 : MOV byte ptr [ESP + 0x34],0x0
0052811d : CALL 0x00527d10
00528122 : PUSH EAX
00528123 : LEA ECX,[ESP + 0x1c]
00528127 : CALL 0x005268b0
0052812c : CMP byte ptr [ESP + 0x8],0x5
00528131 : JC 0x0052813c
00528133 : LEA ECX,[ESP + 0x8]
00528137 : CALL 0x00526400
0052813c : PUSH 0x0
0052813e : PUSH ESI
0052813f : LEA ECX,[ESP + 0x10]
00528143 : PUSH ECX
00528144 : MOV ECX,dword ptr [ESP + 0x4c]
00528148 : CALL 0x00527d10
0052814d : PUSH EAX
0052814e : LEA ECX,[ESP + 0x2c]
00528152 : CALL 0x005268b0
00528157 : CMP byte ptr [ESP + 0x8],0x5
0052815c : JC 0x00528167
0052815e : LEA ECX,[ESP + 0x8]
00528162 : CALL 0x00526400
00528167 : MOV AL,byte ptr [ESP + 0x18]
0052816b : CMP AL,0x5
0052816d : JZ 0x005281b3
0052816f : CMP byte ptr [ESP + 0x28],0x5
00528174 : JZ 0x005281b3
00528176 : PUSH ESI
00528177 : LEA ECX,[ESP + 0x2c]
0052817b : CALL 0x00527730
00528180 : FSTP double ptr [ESP + 0x8]
00528184 : PUSH ESI
00528185 : LEA ECX,[ESP + 0x1c]
00528189 : CALL 0x00527730
0052818e : FADD double ptr [ESP + 0x8]
00528192 : CMP byte ptr [EBP],0x5
00528196 : FSTP double ptr [ESP + 0x8]
0052819a : JC 0x005281a3
0052819c : MOV ECX,EBP
0052819e : CALL 0x00526400
005281a3 : FLD double ptr [ESP + 0x8]
005281a7 : MOV byte ptr [EBP],0x3
005281ab : FSTP double ptr [EBP + 0x4]
005281ae : JMP 0x00528283
005281b3 : PUSH EBX
005281b4 : MOVZX EBX,byte ptr [ESI + 0x7c]
005281b8 : PUSH EDI
005281b9 : TEST AL,AL
005281bb : JNZ 0x005281de
005281bd : LEA EDX,[EBX + -0x1]
005281c0 : CMP EDX,0x5
005281c3 : JA 0x005281d0
005281c5 : MOV EAX,dword ptr [ESI + 0x78]
005281c8 : MOV EDI,dword ptr [EAX + 0x8]
005281cb : INC dword ptr [EDI + 0x8]
005281ce : JMP 0x005281f5
005281d0 : MOV ECX,dword ptr [ESI + 0x78]
005281d3 : MOV EDI,dword ptr [ECX + 0xcc]
005281d9 : INC dword ptr [EDI + 0x8]
005281dc : JMP 0x005281f5
005281de : PUSH 0x0
005281e0 : PUSH -0x1
005281e2 : PUSH ESI
005281e3 : LEA EDX,[ESP + 0x50]
005281e7 : PUSH EDX
005281e8 : LEA ECX,[ESP + 0x30]
005281ec : CALL 0x005272e0
005281f1 : MOV EDI,dword ptr [ESP + 0x44]
005281f5 : LEA ECX,[ESP + 0x20]
005281f9 : CALL 0x00526400
005281fe : MOV byte ptr [ESP + 0x20],0x5
00528203 : MOV dword ptr [ESP + 0x24],EDI
00528207 : INC dword ptr [EDI + 0x8]
0052820a : ADD dword ptr [EDI + 0x8],-0x1
0052820e : JNZ 0x00528217
00528210 : MOV ECX,EDI
00528212 : CALL 0x00525340
00528217 : PUSH EBX
00528218 : PUSH ESI
00528219 : LEA EAX,[ESP + 0x4c]
0052821d : PUSH EAX
0052821e : LEA ECX,[ESP + 0x3c]
00528222 : CALL 0x005276d0
00528227 : PUSH EAX
00528228 : PUSH ESI
00528229 : LEA ECX,[ESP + 0x28]
0052822d : CALL 0x00527c90
00528232 : MOV EAX,dword ptr [ESP + 0x44]
00528236 : DEC dword ptr [EAX + 0x8]
00528239 : MOV ECX,EAX
0052823b : ADD EAX,0x8
0052823e : CMP dword ptr [EAX],0x0
00528241 : POP EDI
00528242 : POP EBX
00528243 : JNZ 0x0052824a
00528245 : CALL 0x00525340
0052824a : PUSH 0x0
0052824c : PUSH -0x1
0052824e : PUSH ESI
0052824f : LEA ECX,[ESP + 0x48]
00528253 : PUSH ECX
00528254 : LEA ECX,[ESP + 0x28]
00528258 : CALL 0x005272e0
0052825d : CMP byte ptr [EBP],0x5
00528261 : JC 0x0052826a
00528263 : MOV ECX,EBP
00528265 : CALL 0x00526400
0052826a : MOV ECX,dword ptr [ESP + 0x3c]
0052826e : MOV byte ptr [EBP],0x5
00528272 : MOV dword ptr [EBP + 0x4],ECX
00528275 : INC dword ptr [ECX + 0x8]
00528278 : ADD dword ptr [ECX + 0x8],-0x1
0052827c : JNZ 0x00528283
0052827e : CALL 0x00525340
00528283 : CMP byte ptr [ESP + 0x28],0x5
00528288 : POP ESI
00528289 : POP EBP
0052828a : JC 0x00528295
0052828c : LEA ECX,[ESP + 0x20]
00528290 : CALL 0x00526400
00528295 : CMP byte ptr [ESP + 0x10],0x5
0052829a : JC 0x005282a5
0052829c : LEA ECX,[ESP + 0x10]
005282a0 : CALL 0x00526400
005282a5 : ADD ESP,0x30
005282a8 : RET 0x8
