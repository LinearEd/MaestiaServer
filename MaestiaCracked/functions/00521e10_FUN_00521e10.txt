PROGRAM  : Maestia.exe
FUNCTION : FUN_00521e10
ENTRY    : 00521e10
BODY     : [[00521e10, 00521f0a]]

============================================================
DECOMPILED C CODE
============================================================

undefined1 FUN_00521e10(undefined4 param_1,int *param_2,undefined4 param_3)

{
  int *piVar1;
  undefined1 uVar2;
  int iVar3;
  uint uVar4;
  int in_ECX;
  
  piVar1 = param_2;
  if ((*(uint *)(*param_2 + 0xc) >> 0x1d & 1) == 0) {
    iVar3 = FUN_00524bc0();
    if (iVar3 == 0) goto LAB_00521eba;
    iVar3 = FUN_00524bf0(0);
    if (iVar3 != 0x5f) goto LAB_00521eba;
    FUN_00525d70(&param_2);
    if (((uint)param_2[3] >> 0x1c & 1) == 0) {
      param_2[2] = param_2[2] + -1;
      if (param_2[2] == 0) {
        FUN_00525340();
      }
      goto LAB_00521eba;
    }
    param_2[2] = param_2[2] + -1;
    if (param_2[2] == 0) {
      FUN_00525340();
    }
  }
  iVar3 = FUN_00521500(piVar1);
  if ((iVar3 != -1) && (iVar3 < 0x20)) {
    uVar4 = (**(code **)(*(int *)(in_ECX + -0x68) + 0xf8))();
    if ((1 << ((byte)iVar3 & 0x1f) & uVar4) != 0) {
      return 1;
    }
  }
LAB_00521eba:
  iVar3 = (**(code **)(*(int *)(in_ECX + -0x68) + 0xe4))();
  if (iVar3 != 0) {
    *(uint *)(iVar3 + 8) = *(int *)(iVar3 + 8) + 1U & 0x8fffffff;
    uVar2 = (**(code **)(*(int *)(iVar3 + 0x10) + 0x24))(param_1,piVar1,param_3);
    FUN_00503db0();
    return uVar2;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00521e10 : PUSH EBX
00521e11 : MOV EBX,dword ptr [ESP + 0xc]
00521e15 : MOV EAX,dword ptr [EBX]
00521e17 : PUSH EBP
00521e18 : MOV EBP,ECX
00521e1a : MOV ECX,dword ptr [EAX + 0xc]
00521e1d : SHR ECX,0x1d
00521e20 : PUSH ESI
00521e21 : PUSH EDI
00521e22 : TEST CL,0x1
00521e25 : JNZ 0x00521e71
00521e27 : MOV ECX,EBX
00521e29 : CALL 0x00524bc0
00521e2e : TEST EAX,EAX
00521e30 : JBE 0x00521eba
00521e36 : PUSH 0x0
00521e38 : MOV ECX,EBX
00521e3a : CALL 0x00524bf0
00521e3f : CMP EAX,0x5f
00521e42 : JNZ 0x00521eba
00521e44 : LEA EDX,[ESP + 0x18]
00521e48 : PUSH EDX
00521e49 : MOV ECX,EBX
00521e4b : CALL 0x00525d70
00521e50 : MOV EAX,dword ptr [ESP + 0x18]
00521e54 : MOV ECX,dword ptr [EAX + 0xc]
00521e57 : SHR ECX,0x1c
00521e5a : TEST CL,0x1
00521e5d : MOV ECX,EAX
00521e5f : JZ 0x00521eaa
00521e61 : DEC dword ptr [EAX + 0x8]
00521e64 : ADD EAX,0x8
00521e67 : CMP dword ptr [EAX],0x0
00521e6a : JNZ 0x00521e71
00521e6c : CALL 0x00525340
00521e71 : LEA ESI,[EBP + -0x68]
00521e74 : PUSH EBX
00521e75 : MOV ECX,ESI
00521e77 : CALL 0x00521500
00521e7c : MOV EDI,EAX
00521e7e : CMP EDI,-0x1
00521e81 : JZ 0x00521eba
00521e83 : CMP EDI,0x1f
00521e86 : JG 0x00521eba
00521e88 : MOV EDX,dword ptr [ESI]
00521e8a : MOV EAX,dword ptr [EDX + 0xf8]
00521e90 : MOV ECX,ESI
00521e92 : CALL EAX
00521e94 : MOV EDX,0x1
00521e99 : MOV ECX,EDI
00521e9b : SHL EDX,CL
00521e9d : TEST EDX,EAX
00521e9f : JZ 0x00521eba
00521ea1 : POP EDI
00521ea2 : POP ESI
00521ea3 : POP EBP
00521ea4 : MOV AL,0x1
00521ea6 : POP EBX
00521ea7 : RET 0xc
00521eaa : DEC dword ptr [EAX + 0x8]
00521ead : ADD EAX,0x8
00521eb0 : CMP dword ptr [EAX],0x0
00521eb3 : JNZ 0x00521eba
00521eb5 : CALL 0x00525340
00521eba : MOV EAX,dword ptr [EBP + -0x68]
00521ebd : MOV EDX,dword ptr [EAX + 0xe4]
00521ec3 : LEA ECX,[EBP + -0x68]
00521ec6 : CALL EDX
00521ec8 : MOV ESI,EAX
00521eca : TEST ESI,ESI
00521ecc : JZ 0x00521f02
00521ece : MOV EAX,dword ptr [ESI + 0x8]
00521ed1 : INC EAX
00521ed2 : AND EAX,0x8fffffff
00521ed7 : MOV dword ptr [ESI + 0x8],EAX
00521eda : MOV EAX,dword ptr [ESP + 0x1c]
00521ede : MOV EDX,dword ptr [ESI + 0x10]
00521ee1 : MOV EDX,dword ptr [EDX + 0x24]
00521ee4 : PUSH EAX
00521ee5 : MOV EAX,dword ptr [ESP + 0x18]
00521ee9 : LEA ECX,[ESI + 0x10]
00521eec : PUSH EBX
00521eed : PUSH EAX
00521eee : CALL EDX
00521ef0 : MOV ECX,ESI
00521ef2 : MOV BL,AL
00521ef4 : CALL 0x00503db0
00521ef9 : POP EDI
00521efa : POP ESI
00521efb : POP EBP
00521efc : MOV AL,BL
00521efe : POP EBX
00521eff : RET 0xc
00521f02 : POP EDI
00521f03 : POP ESI
00521f04 : POP EBP
00521f05 : XOR AL,AL
00521f07 : POP EBX
00521f08 : RET 0xc
