PROGRAM  : Maestia.exe
FUNCTION : FUN_005083c0
ENTRY    : 005083c0
BODY     : [[005083c0, 00508471]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005083c0(void)

{
  GRefCountNTSImpl *this;
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  
  if (*(GRefCountNTSImpl **)(in_ECX + 0x1c) != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(in_ECX + 0x1c));
  }
  uVar2 = DAT_00d73250;
  this = (GRefCountNTSImpl *)FUN_00515840(0x50,0);
  if (this == (GRefCountNTSImpl *)0x0) {
    this = (GRefCountNTSImpl *)0x0;
  }
  else {
    *(undefined ***)this = &PTR_FUN_00cd3f2c;
    *(undefined4 *)(this + 4) = 1;
    *(undefined ***)this = &PTR_FUN_00b8670c;
    *(undefined4 *)(this + 8) = 0;
    *(undefined4 *)(this + 0xc) = 0;
    *(undefined4 *)(this + 0x10) = 100;
    *(undefined4 *)(this + 0x14) = 100;
    *(undefined4 *)(this + 0x18) = 1;
    *(undefined4 *)(this + 0x1c) = uVar2;
    FUN_00504200(uVar2);
    this[0x4c] = (GRefCountNTSImpl)0x1;
  }
  iVar1 = FUN_00515840(0x24,0);
  if (iVar1 == 0) {
    uVar2 = 0;
  }
  else {
    uVar2 = FUN_00541ef0(this);
  }
  *(undefined4 *)(in_ECX + 0x1c) = uVar2;
  FUN_00542070(uVar2,0,0xffffffff);
  if (this != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005083c0 : PUSH ECX
005083c1 : PUSH EBX
005083c2 : MOV EBX,ECX
005083c4 : MOV ECX,dword ptr [EBX + 0x1c]
005083c7 : PUSH ESI
005083c8 : MOV dword ptr [ESP + 0x8],EBX
005083cc : TEST ECX,ECX
005083ce : JZ 0x005083d5
005083d0 : CALL 0x004ff7c0
005083d5 : PUSH EDI
005083d6 : MOV EDI,dword ptr [0x00d73250]
005083dc : PUSH 0x0
005083de : PUSH 0x50
005083e0 : MOV ECX,EDI
005083e2 : CALL 0x00515840
005083e7 : MOV ESI,EAX
005083e9 : TEST ESI,ESI
005083eb : JZ 0x00508432
005083ed : MOV dword ptr [ESI],0xcd3f2c
005083f3 : MOV EBX,0x1
005083f8 : MOV dword ptr [ESI + 0x4],EBX
005083fb : MOV dword ptr [ESI],0xb8670c
00508401 : MOV dword ptr [ESI + 0x8],0x0
00508408 : MOV dword ptr [ESI + 0xc],0x0
0050840f : MOV EAX,0x64
00508414 : PUSH EDI
00508415 : LEA ECX,[ESI + 0x20]
00508418 : MOV dword ptr [ESI + 0x10],EAX
0050841b : MOV dword ptr [ESI + 0x14],EAX
0050841e : MOV dword ptr [ESI + 0x18],EBX
00508421 : MOV dword ptr [ESI + 0x1c],EDI
00508424 : CALL 0x00504200
00508429 : MOV byte ptr [ESI + 0x4c],BL
0050842c : MOV EBX,dword ptr [ESP + 0xc]
00508430 : JMP 0x00508434
00508432 : XOR ESI,ESI
00508434 : PUSH 0x0
00508436 : PUSH 0x24
00508438 : MOV ECX,EDI
0050843a : CALL 0x00515840
0050843f : POP EDI
00508440 : TEST EAX,EAX
00508442 : JZ 0x0050844e
00508444 : PUSH ESI
00508445 : MOV ECX,EAX
00508447 : CALL 0x00541ef0
0050844c : JMP 0x00508450
0050844e : XOR EAX,EAX
00508450 : MOV ECX,dword ptr [ESP + 0x10]
00508454 : PUSH -0x1
00508456 : PUSH 0x0
00508458 : PUSH EAX
00508459 : MOV dword ptr [EBX + 0x1c],EAX
0050845c : CALL 0x00542070
00508461 : TEST ESI,ESI
00508463 : JZ 0x0050846c
00508465 : MOV ECX,ESI
00508467 : CALL 0x004ff7c0
0050846c : POP ESI
0050846d : POP EBX
0050846e : POP ECX
0050846f : RET 0x4
