PROGRAM  : Maestia.exe
FUNCTION : FUN_006ea850
ENTRY    : 006ea850
BODY     : [[006ea850, 006ea88d] [006ea890, 006ea97e] [006ea980, 006ea9a6] [006ea9b0, 006eaafb]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006ea850(int param_1,int *param_2)

{
  int *piVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  float fVar5;
  undefined4 local_20 [2];
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  
  *param_2 = *(int *)(param_1 + 0x24);
  param_2[1] = *(int *)(param_1 + 0xc);
  param_2[2] = 0;
  piVar1 = (int *)FUN_004fbb30();
  local_18 = *piVar1;
  local_14 = piVar1[1];
  while (local_18 != 0) {
    iVar2 = FUN_004fa490(0);
    param_2[2] = param_2[2] + iVar2;
    FUN_004fc580();
  }
  param_2[3] = (int)((float)param_2[2] / (float)param_2[1]);
  param_2[4] = 0;
  piVar1 = (int *)FUN_004fbb30();
  local_18 = *piVar1;
  local_14 = piVar1[1];
  while (local_18 != 0) {
    iVar2 = FUN_004fa490(0);
    if (iVar2 < param_2[4]) {
      iVar2 = param_2[4];
    }
    param_2[4] = iVar2;
    FUN_004fc580();
  }
  iVar2 = 0;
  param_2[5] = param_2[4];
  local_18 = 0;
  if (0 < param_2[1]) {
    do {
      puVar3 = (undefined4 *)FUN_004fb780(*(int *)(param_1 + 8) + iVar2 * 4);
      iVar2 = iVar2 + 1;
      *puVar3 = 0;
    } while (iVar2 < param_2[1]);
  }
  piVar1 = (int *)FUN_004fbb30();
  local_18 = *piVar1;
  local_14 = piVar1[1];
  do {
    if (local_18 == 0) {
      iVar2 = 0;
      piVar1 = (int *)FUN_004fbb30();
      local_18 = *piVar1;
      local_14 = piVar1[1];
      while (local_18 != 0) {
        iVar4 = FUN_004fa490(0);
        iVar2 = iVar2 + iVar4;
        FUN_004fc580();
      }
      iVar4 = 0;
      if (*param_2 < 1) {
        fVar5 = 0.0;
      }
      else {
        fVar5 = (float)iVar2 / (float)*param_2;
      }
      param_2[0xf] = (int)fVar5;
      param_2[0x10] = 0;
      if (0 < param_2[1]) {
        do {
          iVar2 = *(int *)(*(int *)(param_1 + 8) + iVar4 * 4);
          if (iVar2 != -0x110) {
            iVar2 = *(int *)(iVar2 + 0x13c);
            if (iVar2 < param_2[0x10]) {
              iVar2 = param_2[0x10];
            }
            param_2[0x10] = iVar2;
          }
          iVar4 = iVar4 + 1;
        } while (iVar4 < param_2[1]);
      }
      return;
    }
    FUN_00473080();
    while (iVar4 = local_c, iVar2 = local_10, local_10 != 0) {
      if (local_c == 0) {
        piVar1 = (int *)0x0;
      }
      else {
        piVar1 = (int *)(*(int *)(local_c + 4) + local_10);
      }
      if (*piVar1 == 0) break;
      if (local_c == 0) {
        puVar3 = (undefined4 *)0x0;
      }
      else {
        puVar3 = (undefined4 *)(*(int *)(local_c + 4) + local_10);
      }
      local_20[0] = *puVar3;
      piVar1 = (int *)FUN_004fb780(local_20);
      if (iVar4 == 0) {
        puVar3 = (undefined4 *)0x0;
      }
      else {
        puVar3 = (undefined4 *)(*(int *)(iVar4 + 4) + iVar2);
      }
      iVar2 = FUN_004fa490(*puVar3);
      if (iVar2 < *piVar1) {
        iVar2 = *piVar1;
      }
      *piVar1 = iVar2;
      FUN_004735a0();
    }
    FUN_004fc580();
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
006ea850 : SUB ESP,0x24
006ea853 : PUSH EBX
006ea854 : MOV EBX,dword ptr [ESP + 0x30]
006ea858 : PUSH EBP
006ea859 : MOV EBP,dword ptr [ESP + 0x30]
006ea85d : MOV EAX,dword ptr [EBP + 0x24]
006ea860 : MOV dword ptr [EBX],EAX
006ea862 : MOV ECX,dword ptr [EBP + 0xc]
006ea865 : PUSH ESI
006ea866 : PUSH EDI
006ea867 : MOV dword ptr [EBX + 0x4],ECX
006ea86a : XOR EDI,EDI
006ea86c : LEA ECX,[EBP + 0x1c]
006ea86f : LEA EAX,[ESP + 0x14]
006ea873 : MOV dword ptr [EBX + 0x8],EDI
006ea876 : CALL 0x004fbb30
006ea87b : MOV ECX,dword ptr [EAX]
006ea87d : MOV EAX,dword ptr [EAX + 0x4]
006ea880 : MOV dword ptr [ESP + 0x1c],ECX
006ea884 : MOV dword ptr [ESP + 0x20],EAX
006ea888 : CMP ECX,EDI
006ea88a : JZ 0x006ea8c2
006ea88c : JMP 0x006ea894
006ea890 : MOV EAX,dword ptr [ESP + 0x20]
006ea894 : CMP EAX,EDI
006ea896 : JZ 0x006ea8a3
006ea898 : CMP ECX,EDI
006ea89a : JZ 0x006ea8a3
006ea89c : MOV EAX,dword ptr [EAX + 0x4]
006ea89f : ADD EAX,ECX
006ea8a1 : JMP 0x006ea8a5
006ea8a3 : XOR EAX,EAX
006ea8a5 : PUSH EDI
006ea8a6 : LEA ECX,[EAX + 0x40]
006ea8a9 : CALL 0x004fa490
006ea8ae : ADD dword ptr [EBX + 0x8],EAX
006ea8b1 : LEA ESI,[ESP + 0x1c]
006ea8b5 : CALL 0x004fc580
006ea8ba : MOV ECX,dword ptr [ESP + 0x1c]
006ea8be : CMP ECX,EDI
006ea8c0 : JNZ 0x006ea890
006ea8c2 : CVTSI2SS XMM0,dword ptr [EBX + 0x8]
006ea8c7 : CVTSI2SS XMM1,dword ptr [EBX + 0x4]
006ea8cc : DIVSS XMM0,XMM1
006ea8d0 : LEA EAX,[ESP + 0x14]
006ea8d4 : LEA ECX,[EBP + 0x1c]
006ea8d7 : MOVSS dword ptr [EBX + 0xc],XMM0
006ea8dc : MOV dword ptr [EBX + 0x10],EDI
006ea8df : CALL 0x004fbb30
006ea8e4 : MOV ECX,dword ptr [EAX]
006ea8e6 : MOV EAX,dword ptr [EAX + 0x4]
006ea8e9 : MOV dword ptr [ESP + 0x1c],ECX
006ea8ed : MOV dword ptr [ESP + 0x20],EAX
006ea8f1 : CMP ECX,EDI
006ea8f3 : JZ 0x006ea932
006ea8f5 : JMP 0x006ea8fb
006ea8f7 : MOV EAX,dword ptr [ESP + 0x20]
006ea8fb : CMP EAX,EDI
006ea8fd : JZ 0x006ea90a
006ea8ff : CMP ECX,EDI
006ea901 : JZ 0x006ea90a
006ea903 : MOV EAX,dword ptr [EAX + 0x4]
006ea906 : ADD EAX,ECX
006ea908 : JMP 0x006ea90c
006ea90a : XOR EAX,EAX
006ea90c : PUSH EDI
006ea90d : LEA ECX,[EAX + 0x40]
006ea910 : CALL 0x004fa490
006ea915 : MOV ECX,dword ptr [EBX + 0x10]
006ea918 : CMP ECX,EAX
006ea91a : JLE 0x006ea91e
006ea91c : MOV EAX,ECX
006ea91e : LEA ESI,[ESP + 0x1c]
006ea922 : MOV dword ptr [EBX + 0x10],EAX
006ea925 : CALL 0x004fc580
006ea92a : MOV ECX,dword ptr [ESP + 0x1c]
006ea92e : CMP ECX,EDI
006ea930 : JNZ 0x006ea8f7
006ea932 : MOV EDX,dword ptr [EBX + 0x10]
006ea935 : XOR ESI,ESI
006ea937 : CMP dword ptr [EBX + 0x4],EDI
006ea93a : MOV dword ptr [EBX + 0x14],EDX
006ea93d : JLE 0x006ea95c
006ea93f : LEA EDI,[EBX + 0x18]
006ea942 : MOV EAX,dword ptr [EBP + 0x8]
006ea945 : LEA EAX,[EAX + ESI*0x4]
006ea948 : PUSH EAX
006ea949 : MOV EAX,EDI
006ea94b : CALL 0x004fb780
006ea950 : INC ESI
006ea951 : MOV dword ptr [EAX],0x0
006ea957 : CMP ESI,dword ptr [EBX + 0x4]
006ea95a : JL 0x006ea942
006ea95c : LEA EAX,[ESP + 0x14]
006ea960 : LEA ECX,[EBP + 0x1c]
006ea963 : CALL 0x004fbb30
006ea968 : MOV ECX,dword ptr [EAX]
006ea96a : MOV EBP,dword ptr [EAX + 0x4]
006ea96d : MOV dword ptr [ESP + 0x1c],ECX
006ea971 : MOV dword ptr [ESP + 0x20],EBP
006ea975 : TEST ECX,ECX
006ea977 : JZ 0x006eaa51
006ea97d : JMP 0x006ea988
006ea980 : MOV EBP,dword ptr [ESP + 0x20]
006ea984 : MOV ECX,dword ptr [ESP + 0x1c]
006ea988 : TEST EBP,EBP
006ea98a : JZ 0x006ea997
006ea98c : TEST ECX,ECX
006ea98e : JZ 0x006ea997
006ea990 : MOV EAX,dword ptr [EBP + 0x4]
006ea993 : ADD EAX,ECX
006ea995 : JMP 0x006ea999
006ea997 : XOR EAX,EAX
006ea999 : LEA EDI,[EAX + 0x40]
006ea99c : LEA ESI,[ESP + 0x24]
006ea9a0 : CALL 0x00473080
006ea9a5 : JMP 0x006ea9b0
006ea9b0 : MOV EDI,dword ptr [ESP + 0x24]
006ea9b4 : TEST EDI,EDI
006ea9b6 : JZ 0x006eaa3d
006ea9bc : MOV ESI,dword ptr [ESP + 0x28]
006ea9c0 : TEST ESI,ESI
006ea9c2 : JZ 0x006ea9cb
006ea9c4 : MOV EAX,dword ptr [ESI + 0x4]
006ea9c7 : ADD EAX,EDI
006ea9c9 : JMP 0x006ea9cd
006ea9cb : XOR EAX,EAX
006ea9cd : CMP dword ptr [EAX],0x0
006ea9d0 : JZ 0x006eaa3d
006ea9d2 : TEST ESI,ESI
006ea9d4 : JZ 0x006ea9dd
006ea9d6 : MOV EAX,dword ptr [ESI + 0x4]
006ea9d9 : ADD EAX,EDI
006ea9db : JMP 0x006ea9df
006ea9dd : XOR EAX,EAX
006ea9df : MOV ECX,dword ptr [EAX]
006ea9e1 : LEA EDX,[ESP + 0x14]
006ea9e5 : PUSH EDX
006ea9e6 : LEA EAX,[EBX + 0x18]
006ea9e9 : MOV dword ptr [ESP + 0x18],ECX
006ea9ed : CALL 0x004fb780
006ea9f2 : MOV EBX,EAX
006ea9f4 : TEST ESI,ESI
006ea9f6 : JZ 0x006ea9ff
006ea9f8 : MOV EAX,dword ptr [ESI + 0x4]
006ea9fb : ADD EAX,EDI
006ea9fd : JMP 0x006eaa01
006ea9ff : XOR EAX,EAX
006eaa01 : MOV ECX,dword ptr [EAX]
006eaa03 : TEST EBP,EBP
006eaa05 : JZ 0x006eaa16
006eaa07 : MOV EDX,dword ptr [ESP + 0x1c]
006eaa0b : TEST EDX,EDX
006eaa0d : JZ 0x006eaa16
006eaa0f : MOV EAX,dword ptr [EBP + 0x4]
006eaa12 : ADD EAX,EDX
006eaa14 : JMP 0x006eaa18
006eaa16 : XOR EAX,EAX
006eaa18 : PUSH ECX
006eaa19 : LEA ECX,[EAX + 0x40]
006eaa1c : CALL 0x004fa490
006eaa21 : MOV ECX,dword ptr [EBX]
006eaa23 : CMP ECX,EAX
006eaa25 : JLE 0x006eaa29
006eaa27 : MOV EAX,ECX
006eaa29 : LEA ESI,[ESP + 0x24]
006eaa2d : MOV dword ptr [EBX],EAX
006eaa2f : CALL 0x004735a0
006eaa34 : MOV EBX,dword ptr [ESP + 0x3c]
006eaa38 : JMP 0x006ea9b0
006eaa3d : LEA ESI,[ESP + 0x1c]
006eaa41 : CALL 0x004fc580
006eaa46 : CMP dword ptr [ESP + 0x1c],0x0
006eaa4b : JNZ 0x006ea980
006eaa51 : MOV EBP,dword ptr [ESP + 0x38]
006eaa55 : LEA EAX,[ESP + 0x14]
006eaa59 : LEA ECX,[EBP + 0x1c]
006eaa5c : XOR EDI,EDI
006eaa5e : CALL 0x004fbb30
006eaa63 : MOV ECX,dword ptr [EAX]
006eaa65 : MOV EAX,dword ptr [EAX + 0x4]
006eaa68 : MOV dword ptr [ESP + 0x1c],ECX
006eaa6c : MOV dword ptr [ESP + 0x20],EAX
006eaa70 : TEST ECX,ECX
006eaa72 : JZ 0x006eaaa8
006eaa74 : JMP 0x006eaa7a
006eaa76 : MOV EAX,dword ptr [ESP + 0x20]
006eaa7a : TEST EAX,EAX
006eaa7c : JZ 0x006eaa89
006eaa7e : TEST ECX,ECX
006eaa80 : JZ 0x006eaa89
006eaa82 : MOV EAX,dword ptr [EAX + 0x4]
006eaa85 : ADD EAX,ECX
006eaa87 : JMP 0x006eaa8b
006eaa89 : XOR EAX,EAX
006eaa8b : PUSH 0x0
006eaa8d : LEA ECX,[EAX + 0x40]
006eaa90 : CALL 0x004fa490
006eaa95 : LEA ESI,[ESP + 0x1c]
006eaa99 : ADD EDI,EAX
006eaa9b : CALL 0x004fc580
006eaaa0 : MOV ECX,dword ptr [ESP + 0x1c]
006eaaa4 : TEST ECX,ECX
006eaaa6 : JNZ 0x006eaa76
006eaaa8 : MOV EAX,dword ptr [EBX]
006eaaaa : XOR EDX,EDX
006eaaac : CMP EAX,EDX
006eaaae : JLE 0x006eaabe
006eaab0 : CVTSI2SS XMM0,EDI
006eaab4 : CVTSI2SS XMM1,EAX
006eaab8 : DIVSS XMM0,XMM1
006eaabc : JMP 0x006eaac1
006eaabe : XORPS XMM0,XMM0
006eaac1 : CMP dword ptr [EBX + 0x4],EDX
006eaac4 : MOVSS dword ptr [EBX + 0x3c],XMM0
006eaac9 : MOV dword ptr [EBX + 0x40],EDX
006eaacc : JLE 0x006eaaf2
006eaace : MOV EDI,EDI
006eaad0 : MOV EAX,dword ptr [EBP + 0x8]
006eaad3 : MOV EAX,dword ptr [EAX + EDX*0x4]
006eaad6 : ADD EAX,0x110
006eaadb : JZ 0x006eaaec
006eaadd : MOV ECX,dword ptr [EBX + 0x40]
006eaae0 : MOV EAX,dword ptr [EAX + 0x2c]
006eaae3 : CMP ECX,EAX
006eaae5 : JLE 0x006eaae9
006eaae7 : MOV EAX,ECX
006eaae9 : MOV dword ptr [EBX + 0x40],EAX
006eaaec : INC EDX
006eaaed : CMP EDX,dword ptr [EBX + 0x4]
006eaaf0 : JL 0x006eaad0
006eaaf2 : POP EDI
006eaaf3 : POP ESI
006eaaf4 : POP EBP
006eaaf5 : POP EBX
006eaaf6 : ADD ESP,0x24
006eaaf9 : RET 0x8
