PROGRAM  : Maestia.exe
FUNCTION : FUN_00460a50
ENTRY    : 00460a50
BODY     : [[00460a50, 00460bf1] [00460c41, 00460cf7] [00460d1c, 00460da0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00460a50(int param_1,int param_2,uint param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  int extraout_ECX;
  uint uStack_1b0;
  undefined1 local_1a0 [380];
  int local_24;
  undefined4 local_20;
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a7fa;
  local_10 = ExceptionList;
  uStack_1b0 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_1b0;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_1c = 0;
  }
  else {
    local_1c = (*(int *)(param_1 + 0xc) - iVar2) / 0x178;
  }
  iVar4 = *(int *)(param_1 + 8);
  iVar2 = (iVar4 - iVar2) / 0x178;
  puVar1 = &uStack_1b0;
  if (iVar2 == 0xae4c41) {
    iVar2 = FUN_00429be0();
    iVar4 = extraout_ECX;
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_1c < uVar3) {
    if (0xae4c41 - (local_1c >> 1) < local_1c) {
      local_1c = 0;
    }
    else {
      local_1c = local_1c + (local_1c >> 1);
    }
    if (local_1c < uVar3) {
      local_1c = uVar3;
    }
    iVar4 = FUN_004610d0();
    local_24 = (param_2 - *(int *)(param_1 + 4)) / 0x178;
    local_20 = 0;
    local_8 = 0;
    FUN_00460860(param_3);
    local_20 = 1;
    FUN_004610a0(*(undefined4 *)(param_1 + 4),param_2);
    local_20 = 2;
    FUN_004610a0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    iVar2 = *(int *)(param_1 + 4);
    if (iVar2 != 0) {
      FUN_00461370(iVar2,param_2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_1c * 0x178 + iVar4;
    *(int *)(param_1 + 8) = ((*(int *)(param_1 + 8) - iVar2) / 0x178 + 1) * 0x178 + iVar4;
    *(int *)(param_1 + 4) = iVar4;
    ExceptionList = local_10;
    return;
  }
  iVar2 = iVar4 - param_2 >> 0x1f;
  if ((iVar4 - param_2) / 0x178 + iVar2 == iVar2) {
    FUN_00460db0(local_1a0);
    local_8 = 2;
    FUN_004610a0(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = CONCAT31(local_8._1_3_,3);
    FUN_00460860(local_1a0);
    local_8 = 2;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x178;
    FUN_004613e0(*(int *)(param_1 + 8) + -0x178,local_1a0);
  }
  else {
    FUN_00460db0(local_1a0);
    local_8 = 5;
    uVar5 = FUN_004610a0(*(int *)(param_1 + 8) + -0x178,*(int *)(param_1 + 8));
    *(undefined4 *)(param_1 + 8) = uVar5;
    param_3 = param_3 & 0xffffff00;
    FUN_00461420(param_2,param_2,param_2,param_3);
    FUN_004613e0(param_2 + 0x178,local_1a0);
  }
  local_8 = 0xffffffff;
  FUN_00449a70(local_1a0);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00460a50 : PUSH EBP
00460a51 : MOV EBP,ESP
00460a53 : PUSH -0x1
00460a55 : PUSH 0xb7a7fa
00460a5a : MOV EAX,FS:[0x0]
00460a60 : PUSH EAX
00460a61 : SUB ESP,0x190
00460a67 : PUSH EBX
00460a68 : PUSH ESI
00460a69 : PUSH EDI
00460a6a : MOV EAX,[0x00d66fa0]
00460a6f : XOR EAX,EBP
00460a71 : PUSH EAX
00460a72 : LEA EAX,[EBP + -0xc]
00460a75 : MOV FS:[0x0],EAX
00460a7b : MOV dword ptr [EBP + -0x10],ESP
00460a7e : MOV EBX,dword ptr [EBP + 0x8]
00460a81 : MOV EDI,dword ptr [EBX + 0x4]
00460a84 : TEST EDI,EDI
00460a86 : JNZ 0x00460a8d
00460a88 : MOV dword ptr [EBP + -0x18],EDI
00460a8b : JMP 0x00460aa8
00460a8d : MOV ECX,dword ptr [EBX + 0xc]
00460a90 : SUB ECX,EDI
00460a92 : MOV EAX,0xae4c415d
00460a97 : IMUL ECX
00460a99 : ADD EDX,ECX
00460a9b : SAR EDX,0x8
00460a9e : MOV EAX,EDX
00460aa0 : SHR EAX,0x1f
00460aa3 : ADD EAX,EDX
00460aa5 : MOV dword ptr [EBP + -0x18],EAX
00460aa8 : MOV ECX,dword ptr [EBX + 0x8]
00460aab : MOV ESI,ECX
00460aad : SUB ESI,EDI
00460aaf : MOV EAX,0xae4c415d
00460ab4 : IMUL ESI
00460ab6 : ADD EDX,ESI
00460ab8 : SAR EDX,0x8
00460abb : MOV EAX,EDX
00460abd : SHR EAX,0x1f
00460ac0 : ADD EAX,EDX
00460ac2 : MOV EDX,0xae4c41
00460ac7 : SUB EDX,EAX
00460ac9 : CMP EDX,0x1
00460acc : JNC 0x00460ad3
00460ace : CALL 0x00429be0
00460ad3 : INC EAX
00460ad4 : MOV EDX,dword ptr [EBP + -0x18]
00460ad7 : CMP EDX,EAX
00460ad9 : JNC 0x00460c41
00460adf : MOV ECX,EDX
00460ae1 : SHR ECX,0x1
00460ae3 : MOV ESI,0xae4c41
00460ae8 : SUB ESI,ECX
00460aea : CMP ESI,EDX
00460aec : JNC 0x00460af7
00460aee : XOR EDI,EDI
00460af0 : MOV dword ptr [EBP + -0x18],EDI
00460af3 : MOV EDX,EDI
00460af5 : JMP 0x00460afe
00460af7 : ADD EDX,ECX
00460af9 : MOV dword ptr [EBP + -0x18],EDX
00460afc : XOR EDI,EDI
00460afe : CMP EDX,EAX
00460b00 : JNC 0x00460b07
00460b02 : MOV dword ptr [EBP + -0x18],EAX
00460b05 : MOV EDX,EAX
00460b07 : MOV ECX,EDX
00460b09 : CALL 0x004610d0
00460b0e : MOV ESI,EAX
00460b10 : MOV dword ptr [EBP + 0x8],ESI
00460b13 : MOV ECX,dword ptr [EBP + 0xc]
00460b16 : SUB ECX,dword ptr [EBX + 0x4]
00460b19 : MOV EAX,0xae4c415d
00460b1e : IMUL ECX
00460b20 : ADD EDX,ECX
00460b22 : SAR EDX,0x8
00460b25 : MOV EAX,EDX
00460b27 : SHR EAX,0x1f
00460b2a : ADD EAX,EDX
00460b2c : MOV dword ptr [EBP + -0x20],EAX
00460b2f : MOV dword ptr [EBP + -0x1c],EDI
00460b32 : MOV dword ptr [EBP + -0x4],EDI
00460b35 : MOV ECX,dword ptr [EBP + 0x10]
00460b38 : PUSH ECX
00460b39 : MOV EDI,EAX
00460b3b : IMUL EDI,EDI,0x178
00460b41 : ADD EDI,ESI
00460b43 : MOV ESI,0x1
00460b48 : CALL 0x00460860
00460b4d : MOV dword ptr [EBP + -0x1c],ESI
00460b50 : MOV EDX,dword ptr [EBP + 0xc]
00460b53 : PUSH EDX
00460b54 : MOV EAX,dword ptr [EBX + 0x4]
00460b57 : PUSH EAX
00460b58 : MOV EDI,dword ptr [EBP + 0x8]
00460b5b : MOV EDX,EDI
00460b5d : CALL 0x004610a0
00460b62 : MOV dword ptr [EBP + -0x1c],0x2
00460b69 : MOV EDX,dword ptr [EBP + -0x20]
00460b6c : INC EDX
00460b6d : IMUL EDX,EDX,0x178
00460b73 : ADD EDX,EDI
00460b75 : MOV ECX,dword ptr [EBX + 0x8]
00460b78 : PUSH ECX
00460b79 : MOV EAX,dword ptr [EBP + 0xc]
00460b7c : PUSH EAX
00460b7d : CALL 0x004610a0
00460b82 : MOV dword ptr [EBP + -0x4],0xffffffff
00460b89 : MOV ESI,dword ptr [EBX + 0x8]
00460b8c : MOV ECX,dword ptr [EBX + 0x4]
00460b8f : SUB ESI,ECX
00460b91 : MOV EAX,0xae4c415d
00460b96 : IMUL ESI
00460b98 : ADD EDX,ESI
00460b9a : SAR EDX,0x8
00460b9d : MOV EAX,EDX
00460b9f : SHR EAX,0x1f
00460ba2 : LEA ESI,[EDX + EAX*0x1 + 0x1]
00460ba6 : TEST ECX,ECX
00460ba8 : JZ 0x00460bc2
00460baa : MOV EDX,dword ptr [EBP + 0xc]
00460bad : PUSH EDX
00460bae : PUSH ECX
00460baf : MOV ECX,dword ptr [EBX + 0x8]
00460bb2 : CALL 0x00461370
00460bb7 : ADD ESP,0x8
00460bba : MOV ECX,dword ptr [EBX + 0x4]
00460bbd : CALL 0x006f04e0
00460bc2 : MOV EAX,dword ptr [EBP + -0x18]
00460bc5 : IMUL EAX,EAX,0x178
00460bcb : ADD EAX,EDI
00460bcd : MOV dword ptr [EBX + 0xc],EAX
00460bd0 : IMUL ESI,ESI,0x178
00460bd6 : ADD ESI,EDI
00460bd8 : MOV dword ptr [EBX + 0x8],ESI
00460bdb : MOV dword ptr [EBX + 0x4],EDI
00460bde : MOV ECX,dword ptr [EBP + -0xc]
00460be1 : MOV dword ptr FS:[0x0],ECX
00460be8 : POP ECX
00460be9 : POP EDI
00460bea : POP ESI
00460beb : POP EBX
00460bec : MOV ESP,EBP
00460bee : POP EBP
00460bef : RET 0xc
00460c41 : SUB ECX,dword ptr [EBP + 0xc]
00460c44 : MOV EAX,0xae4c415d
00460c49 : IMUL ECX
00460c4b : ADD EDX,ECX
00460c4d : SAR EDX,0x8
00460c50 : MOV EAX,EDX
00460c52 : SHR EAX,0x1f
00460c55 : ADD EAX,EDX
00460c57 : MOV EDI,dword ptr [EBP + 0x10]
00460c5a : CMP EAX,0x1
00460c5d : JNC 0x00460d1c
00460c63 : LEA ECX,[EBP + 0xfffffe64]
00460c69 : PUSH ECX
00460c6a : CALL 0x00460db0
00460c6f : MOV dword ptr [EBP + -0x4],0x2
00460c76 : MOV EAX,dword ptr [EBP + 0xc]
00460c79 : LEA EDX,[EAX + 0x178]
00460c7f : MOV ECX,dword ptr [EBX + 0x8]
00460c82 : PUSH ECX
00460c83 : PUSH EAX
00460c84 : CALL 0x004610a0
00460c89 : MOV byte ptr [EBP + -0x4],0x3
00460c8d : MOV EDI,dword ptr [EBX + 0x8]
00460c90 : LEA EDX,[EBP + 0xfffffe64]
00460c96 : PUSH EDX
00460c97 : MOV ECX,EDI
00460c99 : SUB ECX,dword ptr [EBP + 0xc]
00460c9c : MOV EAX,0xae4c415d
00460ca1 : IMUL ECX
00460ca3 : ADD EDX,ECX
00460ca5 : SAR EDX,0x8
00460ca8 : MOV EAX,EDX
00460caa : SHR EAX,0x1f
00460cad : ADD EAX,EDX
00460caf : MOV ESI,0x1
00460cb4 : SUB ESI,EAX
00460cb6 : CALL 0x00460860
00460cbb : MOV dword ptr [EBP + -0x4],0x2
00460cc2 : ADD dword ptr [EBX + 0x8],0x178
00460cc9 : MOV EBX,dword ptr [EBX + 0x8]
00460ccc : LEA EAX,[EBX + 0xfffffe88]
00460cd2 : LEA ECX,[EBP + 0xfffffe64]
00460cd8 : PUSH ECX
00460cd9 : PUSH EAX
00460cda : MOV EAX,dword ptr [EBP + 0xc]
00460cdd : CALL 0x004613e0
00460ce2 : ADD ESP,0x8
00460ce5 : MOV dword ptr [EBP + -0x4],0xffffffff
00460cec : LEA EDX,[EBP + 0xfffffe64]
00460cf2 : PUSH EDX
00460cf3 : JMP 0x00460d88
00460d1c : LEA EDX,[EBP + 0xfffffe64]
00460d22 : PUSH EDX
00460d23 : CALL 0x00460db0
00460d28 : MOV dword ptr [EBP + -0x4],0x5
00460d2f : MOV ESI,dword ptr [EBX + 0x8]
00460d32 : LEA EDI,[ESI + 0xfffffe88]
00460d38 : PUSH ESI
00460d39 : PUSH EDI
00460d3a : MOV EDX,ESI
00460d3c : CALL 0x004610a0
00460d41 : MOV dword ptr [EBX + 0x8],EAX
00460d44 : MOV byte ptr [EBP + 0x10],0x0
00460d48 : MOV EAX,dword ptr [EBP + 0x10]
00460d4b : PUSH EAX
00460d4c : MOV ECX,dword ptr [EBP + 0xc]
00460d4f : PUSH ECX
00460d50 : MOV EDX,dword ptr [EBP + 0xc]
00460d53 : PUSH EDX
00460d54 : MOV EAX,dword ptr [EBP + 0xc]
00460d57 : PUSH EAX
00460d58 : MOV EAX,ESI
00460d5a : MOV ECX,EDI
00460d5c : CALL 0x00461420
00460d61 : LEA ECX,[EBP + 0xfffffe64]
00460d67 : PUSH ECX
00460d68 : MOV EAX,dword ptr [EBP + 0xc]
00460d6b : LEA EDX,[EAX + 0x178]
00460d71 : PUSH EDX
00460d72 : CALL 0x004613e0
00460d77 : ADD ESP,0x18
00460d7a : MOV dword ptr [EBP + -0x4],0xffffffff
00460d81 : LEA EAX,[EBP + 0xfffffe64]
00460d87 : PUSH EAX
00460d88 : CALL 0x00449a70
00460d8d : MOV ECX,dword ptr [EBP + -0xc]
00460d90 : MOV dword ptr FS:[0x0],ECX
00460d97 : POP ECX
00460d98 : POP EDI
00460d99 : POP ESI
00460d9a : POP EBX
00460d9b : MOV ESP,EBP
00460d9d : POP EBP
00460d9e : RET 0xc
