PROGRAM  : Maestia.exe
FUNCTION : FUN_004fb840
ENTRY    : 004fb840
BODY     : [[004fb840, 004fb89a]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_004fb840(void)

{
  uint uVar1;
  int iVar2;
  uint3 uVar3;
  int unaff_ESI;
  undefined4 *unaff_EDI;
  
  if (*(char *)(unaff_ESI + 0x10) == '\0') {
    if (*(uint *)(unaff_ESI + 8) == *(uint *)(unaff_ESI + 0xc)) {
      if (*(uint *)(unaff_ESI + 0xc) < 8) {
        *(undefined4 *)(unaff_ESI + 0xc) = 8;
      }
      FUN_0046d4d0(unaff_ESI,*(int *)(unaff_ESI + 0xc) * 2 + 1);
    }
    iVar2 = *(int *)(unaff_ESI + 4);
    *(undefined4 *)(iVar2 + *(int *)(unaff_ESI + 8) * 4) = *unaff_EDI;
    *(int *)(unaff_ESI + 8) = *(int *)(unaff_ESI + 8) + 1;
    return CONCAT31((int3)((uint)iVar2 >> 8),1);
  }
  uVar1 = *(uint *)(unaff_ESI + 8);
  uVar3 = (uint3)(uVar1 >> 8);
  if (uVar1 < *(uint *)(unaff_ESI + 0xc)) {
    *(undefined4 *)(*(int *)(unaff_ESI + 4) + uVar1 * 4) = *unaff_EDI;
    *(int *)(unaff_ESI + 8) = *(int *)(unaff_ESI + 8) + 1;
    return CONCAT31(uVar3,1);
  }
  return (uint)uVar3 << 8;
}



============================================================
DISASSEMBLY
============================================================
004fb840 : CMP byte ptr [ESI + 0x10],0x0
004fb844 : PUSH EBX
004fb845 : MOV EBX,0x1
004fb84a : JZ 0x004fb867
004fb84c : MOV EAX,dword ptr [ESI + 0x8]
004fb84f : CMP EAX,dword ptr [ESI + 0xc]
004fb852 : JNC 0x004fb863
004fb854 : MOV EDX,dword ptr [EDI]
004fb856 : MOV ECX,dword ptr [ESI + 0x4]
004fb859 : MOV dword ptr [ECX + EAX*0x4],EDX
004fb85c : ADD dword ptr [ESI + 0x8],EBX
004fb85f : MOV AL,BL
004fb861 : POP EBX
004fb862 : RET
004fb863 : XOR AL,AL
004fb865 : POP EBX
004fb866 : RET
004fb867 : MOV EAX,dword ptr [ESI + 0xc]
004fb86a : CMP dword ptr [ESI + 0x8],EAX
004fb86d : JNZ 0x004fb889
004fb86f : CMP EAX,0x8
004fb872 : JNC 0x004fb87b
004fb874 : MOV dword ptr [ESI + 0xc],0x8
004fb87b : MOV EAX,dword ptr [ESI + 0xc]
004fb87e : LEA ECX,[EAX + EAX*0x1 + 0x1]
004fb882 : PUSH ECX
004fb883 : PUSH ESI
004fb884 : CALL 0x0046d4d0
004fb889 : MOV EDX,dword ptr [ESI + 0x8]
004fb88c : MOV EAX,dword ptr [ESI + 0x4]
004fb88f : MOV ECX,dword ptr [EDI]
004fb891 : MOV dword ptr [EAX + EDX*0x4],ECX
004fb894 : ADD dword ptr [ESI + 0x8],EBX
004fb897 : MOV AL,BL
004fb899 : POP EBX
004fb89a : RET
