PROGRAM  : Maestia.exe
FUNCTION : FUN_008fd6d0
ENTRY    : 008fd6d0
BODY     : [[008fd6d0, 008fd7b5]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_008fd6d0(void)

{
  uint uVar1;
  int iVar2;
  int *piVar3;
  uint unaff_EDI;
  undefined1 local_30 [24];
  uint local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1e918;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (DAT_01724864 != 0) {
    local_14 = 0;
    FUN_00404400(&local_14);
    if (local_14 != 0) {
      iVar2 = 0;
      piVar3 = (int *)(local_14 + 0x454);
      do {
        if (unaff_EDI <= (uint)(*piVar3 * 0x3c)) {
          if (iVar2 + 1 == 0) {
            ExceptionList = local_10;
            return 5;
          }
          ExceptionList = local_10;
          return iVar2 + 1;
        }
        iVar2 = iVar2 + 1;
        piVar3 = piVar3 + 1;
      } while (iVar2 < 5);
      ExceptionList = local_10;
      return 5;
    }
  }
  FUN_00406460(L"Failed : Get instance zone!!");
  local_8 = 0;
  if ((int *)*DAT_00da98e8 != (int *)0x0) {
    (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"GetGrade",0xe,local_30,uVar1);
  }
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    ExceptionList = local_10;
    return 5;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
008fd6d0 : PUSH EBP
008fd6d1 : MOV EBP,ESP
008fd6d3 : PUSH -0x1
008fd6d5 : PUSH 0xb1e918
008fd6da : MOV EAX,FS:[0x0]
008fd6e0 : PUSH EAX
008fd6e1 : SUB ESP,0x20
008fd6e4 : PUSH ESI
008fd6e5 : MOV EAX,[0x00d66fa0]
008fd6ea : XOR EAX,EBP
008fd6ec : PUSH EAX
008fd6ed : LEA EAX,[EBP + -0xc]
008fd6f0 : MOV FS:[0x0],EAX
008fd6f6 : MOV ECX,dword ptr [0x01724864]
008fd6fc : TEST ECX,ECX
008fd6fe : JZ 0x008fd719
008fd700 : LEA EAX,[EBP + -0x10]
008fd703 : PUSH EAX
008fd704 : MOV ESI,EDX
008fd706 : MOV dword ptr [EBP + -0x10],0x0
008fd70d : CALL 0x00404400
008fd712 : MOV ECX,dword ptr [EBP + -0x10]
008fd715 : TEST ECX,ECX
008fd717 : JNZ 0x008fd776
008fd719 : PUSH 0xc62418
008fd71e : LEA ECX,[EBP + -0x2c]
008fd721 : CALL 0x00406460
008fd726 : MOV dword ptr [EBP + -0x4],0x0
008fd72d : MOV ECX,dword ptr [0x00da98e8]
008fd733 : MOV ECX,dword ptr [ECX]
008fd735 : TEST ECX,ECX
008fd737 : JZ 0x008fd74b
008fd739 : MOV EDX,dword ptr [ECX]
008fd73b : MOV EDX,dword ptr [EDX + 0x14]
008fd73e : LEA EAX,[EBP + -0x2c]
008fd741 : PUSH EAX
008fd742 : PUSH 0xe
008fd744 : PUSH 0xc62454
008fd749 : CALL EDX
008fd74b : MOV dword ptr [EBP + -0x4],0xffffffff
008fd752 : CMP dword ptr [EBP + -0x14],0x8
008fd756 : JC 0x008fd760
008fd758 : MOV ECX,dword ptr [EBP + -0x28]
008fd75b : CALL 0x006f04e0
008fd760 : XOR EAX,EAX
008fd762 : MOV dword ptr [EBP + -0x14],0x7
008fd769 : MOV dword ptr [EBP + -0x18],0x0
008fd770 : MOV word ptr [EBP + -0x28],AX
008fd774 : JMP 0x008fd7a1
008fd776 : XOR EAX,EAX
008fd778 : ADD ECX,0x454
008fd77e : MOV EDI,EDI
008fd780 : MOV EDX,dword ptr [ECX]
008fd782 : MOV ESI,EDX
008fd784 : SHL ESI,0x4
008fd787 : SUB ESI,EDX
008fd789 : ADD ESI,ESI
008fd78b : ADD ESI,ESI
008fd78d : CMP EDI,ESI
008fd78f : JBE 0x008fd79c
008fd791 : INC EAX
008fd792 : ADD ECX,0x4
008fd795 : CMP EAX,0x5
008fd798 : JL 0x008fd780
008fd79a : JMP 0x008fd7a1
008fd79c : ADD EAX,0x1
008fd79f : JNZ 0x008fd7a6
008fd7a1 : MOV EAX,0x5
008fd7a6 : MOV ECX,dword ptr [EBP + -0xc]
008fd7a9 : MOV dword ptr FS:[0x0],ECX
008fd7b0 : POP ECX
008fd7b1 : POP ESI
008fd7b2 : MOV ESP,EBP
008fd7b4 : POP EBP
008fd7b5 : RET
