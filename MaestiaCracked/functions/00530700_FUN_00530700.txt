PROGRAM  : Maestia.exe
FUNCTION : FUN_00530700
ENTRY    : 00530700
BODY     : [[00530700, 00530784]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00530700(void)

{
  int *piVar1;
  undefined4 *puVar2;
  int *in_ECX;
  int iVar3;
  int local_4;
  
  if (*in_ECX != 0) {
    iVar3 = 0;
    local_4 = *(int *)(*in_ECX + 4) + 1;
    do {
      puVar2 = (undefined4 *)(iVar3 + 8 + *in_ECX);
      if (*(int *)(iVar3 + 8 + *in_ECX) != -2) {
        if (((*(byte *)(puVar2 + 4) & 2) == 0) && (puVar2[2] != 0)) {
          FUN_00503db0();
        }
        puVar2[2] = 0;
        if (((*(byte *)(puVar2 + 4) & 1) == 0) && (puVar2[3] != 0)) {
          FUN_00503db0();
        }
        puVar2[3] = 0;
        piVar1 = (int *)(puVar2[1] + 8);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 == 0) {
          FUN_00525340();
        }
        *puVar2 = 0xfffffffe;
      }
      iVar3 = iVar3 + 0x14;
      local_4 = local_4 + -1;
    } while (local_4 != 0);
    FUN_00515cf0(*in_ECX);
    *in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00530700 : PUSH ECX
00530701 : PUSH EBX
00530702 : MOV EBX,ECX
00530704 : MOV EAX,dword ptr [EBX]
00530706 : PUSH EBP
00530707 : XOR EBP,EBP
00530709 : CMP EAX,EBP
0053070b : JZ 0x00530781
0053070d : MOV EAX,dword ptr [EAX + 0x4]
00530710 : PUSH ESI
00530711 : PUSH EDI
00530712 : XOR EDI,EDI
00530714 : INC EAX
00530715 : MOV dword ptr [ESP + 0x10],EAX
00530719 : LEA ESP,[ESP]
00530720 : MOV EAX,dword ptr [EBX]
00530722 : CMP dword ptr [EDI + EAX*0x1 + 0x8],-0x2
00530727 : LEA ESI,[EDI + EAX*0x1 + 0x8]
0053072b : JZ 0x0053076b
0053072d : TEST byte ptr [ESI + 0x10],0x2
00530731 : JNZ 0x0053073f
00530733 : MOV ECX,dword ptr [ESI + 0x8]
00530736 : CMP ECX,EBP
00530738 : JZ 0x0053073f
0053073a : CALL 0x00503db0
0053073f : TEST byte ptr [ESI + 0x10],0x1
00530743 : MOV dword ptr [ESI + 0x8],EBP
00530746 : JNZ 0x00530754
00530748 : MOV ECX,dword ptr [ESI + 0xc]
0053074b : CMP ECX,EBP
0053074d : JZ 0x00530754
0053074f : CALL 0x00503db0
00530754 : MOV dword ptr [ESI + 0xc],EBP
00530757 : MOV ECX,dword ptr [ESI + 0x4]
0053075a : ADD dword ptr [ECX + 0x8],-0x1
0053075e : JNZ 0x00530765
00530760 : CALL 0x00525340
00530765 : MOV dword ptr [ESI],0xfffffffe
0053076b : ADD EDI,0x14
0053076e : SUB dword ptr [ESP + 0x10],0x1
00530773 : JNZ 0x00530720
00530775 : MOV ECX,dword ptr [EBX]
00530777 : PUSH ECX
00530778 : CALL 0x00515cf0
0053077d : POP EDI
0053077e : MOV dword ptr [EBX],EBP
00530780 : POP ESI
00530781 : POP EBP
00530782 : POP EBX
00530783 : POP ECX
00530784 : RET
