PROGRAM  : Maestia.exe
FUNCTION : FUN_0047b2c0
ENTRY    : 0047b2c0
BODY     : [[0047b2c0, 0047b421] [0047b425, 0047b454] [0047b49c, 0047b51f] [0047b53d, 0047b5b4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0047b2c0(int param_1,int param_2,undefined4 param_3)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  uint extraout_ECX;
  uint uStack_68;
  undefined1 local_54 [48];
  int local_24;
  undefined4 local_20;
  uint local_1c;
  undefined1 *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7a580;
  local_10 = ExceptionList;
  uStack_68 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_14 = (undefined1 *)&uStack_68;
  ExceptionList = &local_10;
  iVar2 = *(int *)(param_1 + 4);
  if (iVar2 == 0) {
    local_1c = 0;
  }
  else {
    local_1c = (*(int *)(param_1 + 0xc) - iVar2) / 0x30;
  }
  iVar4 = *(int *)(param_1 + 8);
  iVar2 = (iVar4 - iVar2) / 0x30;
  puVar1 = &uStack_68;
  if (iVar2 == 0x5555555) {
    iVar2 = FUN_00429be0();
    local_1c = extraout_ECX;
    puVar1 = (uint *)local_14;
  }
  local_14 = (undefined1 *)puVar1;
  uVar3 = iVar2 + 1;
  if (local_1c < uVar3) {
    if (0x5555555 - (local_1c >> 1) < local_1c) {
      local_1c = 0;
    }
    else {
      local_1c = local_1c + (local_1c >> 1);
    }
    if (local_1c < uVar3) {
      local_1c = uVar3;
    }
    iVar4 = FUN_00488430();
    local_24 = (param_2 - *(int *)(param_1 + 4)) / 0x30;
    local_20 = 0;
    local_8 = 0;
    FUN_0047b290(param_3);
    local_20 = 1;
    FUN_0047b670(*(undefined4 *)(param_1 + 4),param_2);
    local_20 = 2;
    FUN_0047b670(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = 0xffffffff;
    iVar2 = *(int *)(param_1 + 4);
    if (iVar2 != 0) {
      FUN_0047b720(iVar2,*(undefined4 *)(param_1 + 8),param_2);
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    *(uint *)(param_1 + 0xc) = local_1c * 0x30 + iVar4;
    *(int *)(param_1 + 8) = ((*(int *)(param_1 + 8) - iVar2) / 0x30 + 1) * 0x30 + iVar4;
    *(int *)(param_1 + 4) = iVar4;
    ExceptionList = local_10;
    return;
  }
  iVar4 = iVar4 - param_2;
  iVar2 = iVar4 >> 0x1f;
  if (iVar4 / 0x30 + iVar2 == iVar2) {
    FUN_0047b5c0(local_54);
    local_8 = 2;
    FUN_0047b670(param_2,*(undefined4 *)(param_1 + 8));
    local_8 = CONCAT31(local_8._1_3_,3);
    FUN_0047b290(local_54);
    local_8 = 2;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 0x30;
    param_2 = *(int *)(param_1 + 8) + -0x30;
  }
  else {
    FUN_0047b5c0(local_54);
    local_8 = 5;
    iVar2 = *(int *)(param_1 + 8) + -0x30;
    uVar5 = FUN_0047b670(iVar2,*(int *)(param_1 + 8));
    *(undefined4 *)(param_1 + 8) = uVar5;
    for (; param_2 != iVar2; iVar2 = iVar2 + -0x30) {
      FUN_0047b850();
    }
    param_2 = param_2 + 0x30;
  }
  FUN_0047b6a0(param_2);
  local_8 = 0xffffffff;
  FUN_0047b030();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0047b2c0 : PUSH EBP
0047b2c1 : MOV EBP,ESP
0047b2c3 : PUSH -0x1
0047b2c5 : PUSH 0xb7a580
0047b2ca : MOV EAX,FS:[0x0]
0047b2d0 : PUSH EAX
0047b2d1 : SUB ESP,0x48
0047b2d4 : PUSH EBX
0047b2d5 : PUSH ESI
0047b2d6 : PUSH EDI
0047b2d7 : MOV EAX,[0x00d66fa0]
0047b2dc : XOR EAX,EBP
0047b2de : PUSH EAX
0047b2df : LEA EAX,[EBP + -0xc]
0047b2e2 : MOV FS:[0x0],EAX
0047b2e8 : MOV dword ptr [EBP + -0x10],ESP
0047b2eb : MOV EBX,dword ptr [EBP + 0x8]
0047b2ee : MOV EDI,dword ptr [EBX + 0x4]
0047b2f1 : TEST EDI,EDI
0047b2f3 : JNZ 0x0047b2f9
0047b2f5 : XOR ECX,ECX
0047b2f7 : JMP 0x0047b311
0047b2f9 : MOV ECX,dword ptr [EBX + 0xc]
0047b2fc : SUB ECX,EDI
0047b2fe : MOV EAX,0x2aaaaaab
0047b303 : IMUL ECX
0047b305 : SAR EDX,0x3
0047b308 : MOV EAX,EDX
0047b30a : SHR EAX,0x1f
0047b30d : ADD EAX,EDX
0047b30f : MOV ECX,EAX
0047b311 : MOV ESI,dword ptr [EBX + 0x8]
0047b314 : MOV EDX,ESI
0047b316 : SUB EDX,EDI
0047b318 : MOV EAX,0x2aaaaaab
0047b31d : IMUL EDX
0047b31f : SAR EDX,0x3
0047b322 : MOV EAX,EDX
0047b324 : SHR EAX,0x1f
0047b327 : ADD EAX,EDX
0047b329 : MOV EDX,0x5555555
0047b32e : SUB EDX,EAX
0047b330 : CMP EDX,0x1
0047b333 : JNC 0x0047b33a
0047b335 : CALL 0x00429be0
0047b33a : INC EAX
0047b33b : CMP ECX,EAX
0047b33d : JNC 0x0047b49c
0047b343 : MOV EDX,ECX
0047b345 : SHR EDX,0x1
0047b347 : MOV ESI,0x5555555
0047b34c : SUB ESI,EDX
0047b34e : CMP ESI,ECX
0047b350 : JNC 0x0047b35b
0047b352 : XOR EDI,EDI
0047b354 : MOV dword ptr [EBP + -0x18],EDI
0047b357 : MOV ECX,EDI
0047b359 : JMP 0x0047b362
0047b35b : ADD ECX,EDX
0047b35d : MOV dword ptr [EBP + -0x18],ECX
0047b360 : XOR EDI,EDI
0047b362 : CMP ECX,EAX
0047b364 : JNC 0x0047b36b
0047b366 : MOV dword ptr [EBP + -0x18],EAX
0047b369 : MOV ECX,EAX
0047b36b : CALL 0x00488430
0047b370 : MOV ESI,EAX
0047b372 : MOV dword ptr [EBP + 0x8],ESI
0047b375 : MOV ECX,dword ptr [EBP + 0xc]
0047b378 : SUB ECX,dword ptr [EBX + 0x4]
0047b37b : MOV EAX,0x2aaaaaab
0047b380 : IMUL ECX
0047b382 : SAR EDX,0x3
0047b385 : MOV EAX,EDX
0047b387 : SHR EAX,0x1f
0047b38a : ADD EAX,EDX
0047b38c : MOV dword ptr [EBP + -0x20],EAX
0047b38f : MOV dword ptr [EBP + -0x1c],EDI
0047b392 : MOV dword ptr [EBP + -0x4],EDI
0047b395 : MOV ECX,dword ptr [EBP + 0x10]
0047b398 : PUSH ECX
0047b399 : LEA EDI,[EAX + EAX*0x2]
0047b39c : SHL EDI,0x4
0047b39f : ADD EDI,ESI
0047b3a1 : MOV ESI,0x1
0047b3a6 : CALL 0x0047b290
0047b3ab : MOV dword ptr [EBP + -0x1c],ESI
0047b3ae : MOV EDX,dword ptr [EBP + 0xc]
0047b3b1 : PUSH EDX
0047b3b2 : MOV EAX,dword ptr [EBX + 0x4]
0047b3b5 : PUSH EAX
0047b3b6 : MOV EDI,dword ptr [EBP + 0x8]
0047b3b9 : MOV EDX,EDI
0047b3bb : CALL 0x0047b670
0047b3c0 : MOV dword ptr [EBP + -0x1c],0x2
0047b3c7 : MOV EAX,dword ptr [EBP + -0x20]
0047b3ca : LEA EDX,[EAX + EAX*0x2 + 0x3]
0047b3ce : SHL EDX,0x4
0047b3d1 : ADD EDX,EDI
0047b3d3 : MOV ECX,dword ptr [EBX + 0x8]
0047b3d6 : PUSH ECX
0047b3d7 : MOV EAX,dword ptr [EBP + 0xc]
0047b3da : PUSH EAX
0047b3db : CALL 0x0047b670
0047b3e0 : MOV dword ptr [EBP + -0x4],0xffffffff
0047b3e7 : MOV ECX,dword ptr [EBX + 0x8]
0047b3ea : MOV ESI,dword ptr [EBX + 0x4]
0047b3ed : SUB ECX,ESI
0047b3ef : MOV EAX,0x2aaaaaab
0047b3f4 : IMUL ECX
0047b3f6 : SAR EDX,0x3
0047b3f9 : MOV ECX,EDX
0047b3fb : SHR ECX,0x1f
0047b3fe : LEA EDX,[EDX + ECX*0x1 + 0x1]
0047b402 : MOV dword ptr [EBP + 0x10],EDX
0047b405 : TEST ESI,ESI
0047b407 : JZ 0x0047b425
0047b409 : MOV EDX,dword ptr [EBP + 0xc]
0047b40c : PUSH EDX
0047b40d : MOV EAX,dword ptr [EBX + 0x8]
0047b410 : PUSH EAX
0047b411 : PUSH ESI
0047b412 : CALL 0x0047b720
0047b417 : ADD ESP,0xc
0047b41a : MOV ECX,dword ptr [EBX + 0x4]
0047b41d : CALL 0x006f04e0
0047b425 : MOV EAX,dword ptr [EBP + -0x18]
0047b428 : LEA EAX,[EAX + EAX*0x2]
0047b42b : SHL EAX,0x4
0047b42e : ADD EAX,EDI
0047b430 : MOV dword ptr [EBX + 0xc],EAX
0047b433 : LEA ECX,[EDX + EDX*0x2]
0047b436 : SHL ECX,0x4
0047b439 : ADD ECX,EDI
0047b43b : MOV dword ptr [EBX + 0x8],ECX
0047b43e : MOV dword ptr [EBX + 0x4],EDI
0047b441 : MOV ECX,dword ptr [EBP + -0xc]
0047b444 : MOV dword ptr FS:[0x0],ECX
0047b44b : POP ECX
0047b44c : POP EDI
0047b44d : POP ESI
0047b44e : POP EBX
0047b44f : MOV ESP,EBP
0047b451 : POP EBP
0047b452 : RET 0xc
0047b49c : SUB ESI,dword ptr [EBP + 0xc]
0047b49f : MOV EAX,0x2aaaaaab
0047b4a4 : IMUL ESI
0047b4a6 : SAR EDX,0x3
0047b4a9 : MOV EAX,EDX
0047b4ab : SHR EAX,0x1f
0047b4ae : ADD EAX,EDX
0047b4b0 : MOV EDI,dword ptr [EBP + 0x10]
0047b4b3 : CMP EAX,0x1
0047b4b6 : JNC 0x0047b53d
0047b4bc : LEA ECX,[EBP + -0x50]
0047b4bf : PUSH ECX
0047b4c0 : CALL 0x0047b5c0
0047b4c5 : MOV dword ptr [EBP + -0x4],0x2
0047b4cc : MOV EAX,dword ptr [EBP + 0xc]
0047b4cf : LEA EDX,[EAX + 0x30]
0047b4d2 : MOV ECX,dword ptr [EBX + 0x8]
0047b4d5 : PUSH ECX
0047b4d6 : PUSH EAX
0047b4d7 : CALL 0x0047b670
0047b4dc : MOV byte ptr [EBP + -0x4],0x3
0047b4e0 : MOV EDI,dword ptr [EBX + 0x8]
0047b4e3 : LEA EDX,[EBP + -0x50]
0047b4e6 : PUSH EDX
0047b4e7 : MOV ECX,EDI
0047b4e9 : SUB ECX,dword ptr [EBP + 0xc]
0047b4ec : MOV EAX,0x2aaaaaab
0047b4f1 : IMUL ECX
0047b4f3 : SAR EDX,0x3
0047b4f6 : MOV EAX,EDX
0047b4f8 : SHR EAX,0x1f
0047b4fb : ADD EAX,EDX
0047b4fd : MOV ESI,0x1
0047b502 : SUB ESI,EAX
0047b504 : CALL 0x0047b290
0047b509 : MOV dword ptr [EBP + -0x4],0x2
0047b510 : ADD dword ptr [EBX + 0x8],0x30
0047b514 : MOV EBX,dword ptr [EBX + 0x8]
0047b517 : ADD EBX,-0x30
0047b51a : PUSH EBX
0047b51b : MOV ECX,dword ptr [EBP + 0xc]
0047b51e : JMP 0x0047b587
0047b53d : LEA EDX,[EBP + -0x50]
0047b540 : PUSH EDX
0047b541 : CALL 0x0047b5c0
0047b546 : MOV dword ptr [EBP + -0x4],0x5
0047b54d : MOV EDI,dword ptr [EBX + 0x8]
0047b550 : LEA ESI,[EDI + -0x30]
0047b553 : PUSH EDI
0047b554 : PUSH ESI
0047b555 : MOV EDX,EDI
0047b557 : CALL 0x0047b670
0047b55c : MOV dword ptr [EBX + 0x8],EAX
0047b55f : MOV ECX,dword ptr [EBP + 0xc]
0047b562 : MOV dword ptr [EBP + 0x10],ECX
0047b565 : CMP ECX,ESI
0047b567 : JZ 0x0047b583
0047b569 : MOV EBX,EDI
0047b56b : SUB EBX,ESI
0047b56d : LEA ECX,[ECX]
0047b570 : SUB ESI,0x30
0047b573 : LEA EDI,[EBX + ESI*0x1]
0047b576 : CALL 0x0047b850
0047b57b : CMP ESI,dword ptr [EBP + 0x10]
0047b57e : JNZ 0x0047b570
0047b580 : MOV ECX,dword ptr [EBP + 0xc]
0047b583 : LEA EAX,[ECX + 0x30]
0047b586 : PUSH EAX
0047b587 : LEA EAX,[EBP + -0x50]
0047b58a : CALL 0x0047b6a0
0047b58f : ADD ESP,0x4
0047b592 : MOV dword ptr [EBP + -0x4],0xffffffff
0047b599 : LEA ECX,[EBP + -0x50]
0047b59c : CALL 0x0047b030
0047b5a1 : MOV ECX,dword ptr [EBP + -0xc]
0047b5a4 : MOV dword ptr FS:[0x0],ECX
0047b5ab : POP ECX
0047b5ac : POP EDI
0047b5ad : POP ESI
0047b5ae : POP EBX
0047b5af : MOV ESP,EBP
0047b5b1 : POP EBP
0047b5b2 : RET 0xc
