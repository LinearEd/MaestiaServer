PROGRAM  : Maestia.exe
FUNCTION : do_transform
ENTRY    : 00627d68
BODY     : [[00627d68, 00627e15]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    protected: virtual class std::basic_string<unsigned short,struct std::char_traits<unsigned
   short>,class std::allocator<unsigned short> > __thiscall std::collate<unsigned
   short>::do_transform(unsigned short const *,unsigned short const *)const 
   
   Library: Visual Studio 2008 Release */

ushort * __thiscall
std::collate<unsigned_short>::do_transform
          (collate<unsigned_short> *this,ushort *param_1,ushort *param_2)

{
  int iVar1;
  uint uVar2;
  _String_const_iterator<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
  *p_Var3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  ushort *in_stack_0000000c;
  
  basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
  ::
  basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
            ((basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
              *)param_1);
  uVar2 = (int)in_stack_0000000c - (int)param_2 >> 1;
  uVar6 = 0;
  if (uVar2 != 0) {
    uVar6 = uVar2;
    do {
      basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
      ::resize((basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                *)param_1,uVar6,0);
      p_Var3 = (_String_const_iterator<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                *)basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                  ::begin((basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                           *)param_1);
      puVar4 = _String_const_iterator<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
               ::operator*(p_Var3);
      iVar1 = *(int *)(param_1 + 10);
      p_Var3 = (_String_const_iterator<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                *)basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                  ::begin((basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
                           *)param_1);
      puVar5 = _String_const_iterator<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
               ::operator*(p_Var3);
      uVar6 = _LStrxfrm<unsigned_short>
                        (puVar5,puVar4 + iVar1,param_2,in_stack_0000000c,(_Collvec *)(this + 8));
      if (uVar6 <= *(uint *)(param_1 + 10)) break;
    } while (uVar6 != 0);
  }
  basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
  ::resize((basic_string<unsigned_short,struct_std::char_traits<unsigned_short>,class_std::allocator<unsigned_short>_>
            *)param_1,uVar6,0);
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00627d68 : PUSH 0x24
00627d6a : MOV EAX,0xb0b8f2
00627d6f : CALL 0x00640e1d
00627d74 : MOV dword ptr [EBP + -0x10],ECX
00627d77 : MOV ESI,dword ptr [EBP + 0x8]
00627d7a : MOV EDI,dword ptr [EBP + 0xc]
00627d7d : MOV EBX,dword ptr [EBP + 0x10]
00627d80 : AND dword ptr [EBP + -0x1c],0x0
00627d84 : MOV ECX,ESI
00627d86 : MOV dword ptr [EBP + -0x20],ESI
00627d89 : MOV dword ptr [EBP + -0x14],EDI
00627d8c : MOV dword ptr [EBP + -0x18],EBX
00627d8f : CALL 0x006269a6
00627d94 : AND dword ptr [EBP + -0x4],0x0
00627d98 : MOV EAX,EBX
00627d9a : SUB EAX,EDI
00627d9c : SAR EAX,0x1
00627d9e : MOV dword ptr [EBP + -0x1c],0x1
00627da5 : JZ 0x00627e02
00627da7 : MOV ECX,dword ptr [EBP + -0x10]
00627daa : ADD ECX,0x8
00627dad : MOV dword ptr [EBP + -0x10],ECX
00627db0 : PUSH 0x0
00627db2 : PUSH EAX
00627db3 : MOV ECX,ESI
00627db5 : CALL 0x00626da9
00627dba : LEA EAX,[EBP + -0x28]
00627dbd : PUSH EAX
00627dbe : MOV ECX,ESI
00627dc0 : CALL 0x00626513
00627dc5 : MOV ECX,EAX
00627dc7 : CALL 0x00625ad2
00627dcc : MOV EDI,dword ptr [ESI + 0x14]
00627dcf : MOV EBX,EAX
00627dd1 : LEA EAX,[EBP + -0x30]
00627dd4 : PUSH EAX
00627dd5 : MOV ECX,ESI
00627dd7 : CALL 0x00626513
00627ddc : MOV ECX,EAX
00627dde : CALL 0x00625ad2
00627de3 : PUSH dword ptr [EBP + -0x10]
00627de6 : LEA ECX,[EBX + EDI*0x2]
00627de9 : PUSH dword ptr [EBP + -0x18]
00627dec : PUSH dword ptr [EBP + -0x14]
00627def : PUSH ECX
00627df0 : PUSH EAX
00627df1 : CALL 0x00625ba3
00627df6 : ADD ESP,0x14
00627df9 : CMP EAX,dword ptr [ESI + 0x14]
00627dfc : JBE 0x00627e02
00627dfe : TEST EAX,EAX
00627e00 : JA 0x00627db0
00627e02 : PUSH 0x0
00627e04 : PUSH EAX
00627e05 : MOV ECX,ESI
00627e07 : CALL 0x00626da9
00627e0c : MOV EAX,ESI
00627e0e : CALL 0x00640ebc
00627e13 : RET 0xc
