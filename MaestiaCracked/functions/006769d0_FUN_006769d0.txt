PROGRAM  : Maestia.exe
FUNCTION : FUN_006769d0
ENTRY    : 006769d0
BODY     : [[006769d0, 00676a85]]

============================================================
DECOMPILED C CODE
============================================================

GRefCountNTSImpl * FUN_006769d0(int *param_1,undefined4 param_2)

{
  char cVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  GRefCountNTSImpl *this;
  int iVar4;
  uint uVar5;
  uint uVar6;
  
  if ((param_1 != (int *)0x0) && (cVar1 = (**(code **)(*param_1 + 0x28))(), cVar1 == '\0')) {
    (**(code **)(*param_1 + 8))();
    uVar2 = (**(code **)(*param_1 + 0x14))(param_2);
    uVar3 = (**(code **)(*param_1 + 0x18))(uVar2);
    this = (GRefCountNTSImpl *)FUN_00519a90(2,uVar3,uVar2,param_2);
    if (this != (GRefCountNTSImpl *)0x0) {
      uVar6 = 0;
      iVar4 = (**(code **)(*param_1 + 0x14))();
      if (iVar4 != 0) {
        while (iVar4 = (**(code **)(*param_1 + 0x1c))
                                 (*(int *)(this + 0x14) * uVar6 + *(int *)(this + 0x18)), iVar4 != 0
              ) {
          uVar6 = uVar6 + 1;
          uVar5 = (**(code **)(*param_1 + 0x14))();
          if (uVar5 <= uVar6) {
            (**(code **)(*param_1 + 0x10))();
            return this;
          }
        }
        GRefCountNTSImpl::Release(this);
        this = (GRefCountNTSImpl *)0x0;
      }
    }
    (**(code **)(*param_1 + 0x10))();
    return this;
  }
  return (GRefCountNTSImpl *)0x0;
}



============================================================
DISASSEMBLY
============================================================
006769d0 : PUSH ESI
006769d1 : MOV ESI,dword ptr [ESP + 0x8]
006769d5 : TEST ESI,ESI
006769d7 : JZ 0x00676a80
006769dd : MOV EAX,dword ptr [ESI]
006769df : MOV EDX,dword ptr [EAX + 0x28]
006769e2 : MOV ECX,ESI
006769e4 : CALL EDX
006769e6 : TEST AL,AL
006769e8 : JNZ 0x00676a80
006769ee : MOV EAX,dword ptr [ESI]
006769f0 : MOV EDX,dword ptr [EAX + 0x8]
006769f3 : PUSH EDI
006769f4 : MOV ECX,ESI
006769f6 : CALL EDX
006769f8 : MOV EAX,dword ptr [ESP + 0x10]
006769fc : MOV EDX,dword ptr [ESI]
006769fe : PUSH EAX
006769ff : MOV EAX,dword ptr [EDX + 0x14]
00676a02 : MOV ECX,ESI
00676a04 : CALL EAX
00676a06 : MOV EDX,dword ptr [ESI]
00676a08 : PUSH EAX
00676a09 : MOV EAX,dword ptr [EDX + 0x18]
00676a0c : MOV ECX,ESI
00676a0e : CALL EAX
00676a10 : PUSH EAX
00676a11 : PUSH 0x2
00676a13 : CALL 0x00519a90
00676a18 : MOV EDI,EAX
00676a1a : TEST EDI,EDI
00676a1c : JZ 0x00676a70
00676a1e : MOV EDX,dword ptr [ESI]
00676a20 : MOV EAX,dword ptr [EDX + 0x14]
00676a23 : PUSH EBX
00676a24 : MOV ECX,ESI
00676a26 : XOR EBX,EBX
00676a28 : CALL EAX
00676a2a : TEST EAX,EAX
00676a2c : JBE 0x00676a6f
00676a2e : MOV EDI,EDI
00676a30 : MOV EAX,dword ptr [EDI + 0x14]
00676a33 : MOV EDX,dword ptr [ESI]
00676a35 : IMUL EAX,EBX
00676a38 : ADD EAX,dword ptr [EDI + 0x18]
00676a3b : MOV ECX,ESI
00676a3d : PUSH EAX
00676a3e : MOV EAX,dword ptr [EDX + 0x1c]
00676a41 : CALL EAX
00676a43 : TEST EAX,EAX
00676a45 : JZ 0x00676a66
00676a47 : MOV EDX,dword ptr [ESI]
00676a49 : MOV EAX,dword ptr [EDX + 0x14]
00676a4c : MOV ECX,ESI
00676a4e : INC EBX
00676a4f : CALL EAX
00676a51 : CMP EBX,EAX
00676a53 : JC 0x00676a30
00676a55 : MOV EDX,dword ptr [ESI]
00676a57 : MOV EAX,dword ptr [EDX + 0x10]
00676a5a : POP EBX
00676a5b : MOV ECX,ESI
00676a5d : CALL EAX
00676a5f : MOV EAX,EDI
00676a61 : POP EDI
00676a62 : POP ESI
00676a63 : RET 0x8
00676a66 : MOV ECX,EDI
00676a68 : CALL 0x004ff7c0
00676a6d : XOR EDI,EDI
00676a6f : POP EBX
00676a70 : MOV EDX,dword ptr [ESI]
00676a72 : MOV EAX,dword ptr [EDX + 0x10]
00676a75 : MOV ECX,ESI
00676a77 : CALL EAX
00676a79 : MOV EAX,EDI
00676a7b : POP EDI
00676a7c : POP ESI
00676a7d : RET 0x8
00676a80 : XOR EAX,EAX
00676a82 : POP ESI
00676a83 : RET 0x8
