PROGRAM  : Maestia.exe
FUNCTION : FUN_007559d0
ENTRY    : 007559d0
BODY     : [[007559d0, 00755b44]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007559d0(void)

{
  int *piVar1;
  float fVar2;
  uint uVar3;
  int iVar4;
  int in_ECX;
  undefined1 local_44 [4];
  undefined2 local_40;
  undefined4 local_30;
  uint local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined **local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b18ba2;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (*(int *)(in_ECX + 4) != 0) {
    local_14 = (int *)GetTickCount();
    fVar2 = (float)(int)local_14;
    if ((int)local_14 < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    (**(code **)(**(int **)(in_ECX + 4) + 0x78))(*(int **)(in_ECX + 4),"fTime",fVar2 * 0.001,uVar3);
    local_28 = 0x3f800000;
    local_24 = 0x3f800000;
    local_20 = 0;
    local_1c = 0;
    (**(code **)(**(int **)(in_ECX + 4) + 0x50))
              (*(int **)(in_ECX + 4),"vRenderParam",&local_28,0x10);
    if (*(int *)(in_ECX + 0xc) == 0) {
      FUN_00406460(L"WaterTile.bmp");
      local_8 = 0;
      iVar4 = (**(code **)(*DAT_01725204 + 4))(&local_18,local_44);
      local_8._0_1_ = 1;
      piVar1 = *(int **)(in_ECX + 0xc);
      if (piVar1 != *(int **)(iVar4 + 4)) {
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 0x30))();
        }
        if (*(int *)(iVar4 + 4) != 0) {
          InterlockedIncrement((LONG *)(*(int *)(iVar4 + 4) + 0x2c));
        }
        *(undefined4 *)(in_ECX + 0xc) = *(undefined4 *)(iVar4 + 4);
      }
      local_8 = (uint)local_8._1_3_ << 8;
      local_18 = &PTR_FUN_00cd4964;
      if (local_14 != (int *)0x0) {
        (**(code **)(*local_14 + 0x30))();
        local_14 = (int *)0x0;
      }
      local_8 = 0xffffffff;
      if (7 < local_2c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_2c = 7;
      local_30 = 0;
      local_40 = 0;
    }
    piVar1 = *(int **)(in_ECX + 0xc);
    if (piVar1 != (int *)0x0) {
      (**(code **)(*piVar1 + 0x20))();
      (**(code **)(**(int **)(in_ECX + 4) + 0xd0))(*(int **)(in_ECX + 4),"texSrc",piVar1[0xe]);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007559d0 : PUSH EBP
007559d1 : MOV EBP,ESP
007559d3 : PUSH -0x1
007559d5 : PUSH 0xb18ba2
007559da : MOV EAX,FS:[0x0]
007559e0 : PUSH EAX
007559e1 : SUB ESP,0x34
007559e4 : PUSH EBX
007559e5 : PUSH ESI
007559e6 : PUSH EDI
007559e7 : MOV EAX,[0x00d66fa0]
007559ec : XOR EAX,EBP
007559ee : PUSH EAX
007559ef : LEA EAX,[EBP + -0xc]
007559f2 : MOV FS:[0x0],EAX
007559f8 : MOV ESI,ECX
007559fa : XOR EBX,EBX
007559fc : CMP dword ptr [ESI + 0x4],EBX
007559ff : JZ 0x00755b31
00755a05 : CALL dword ptr [0x00b850d8]
00755a0b : MOV dword ptr [EBP + -0x10],EAX
00755a0e : FILD dword ptr [EBP + -0x10]
00755a11 : TEST EAX,EAX
00755a13 : JGE 0x00755a1b
00755a15 : FADD float ptr [0x00cdf0e0]
00755a1b : MOV EAX,dword ptr [ESI + 0x4]
00755a1e : FMUL float ptr [0x00cdf128]
00755a24 : MOV ECX,dword ptr [EAX]
00755a26 : MOV EDX,dword ptr [ECX + 0x78]
00755a29 : PUSH ECX
00755a2a : FSTP float ptr [ESP]
00755a2d : PUSH 0xc0ab3c
00755a32 : PUSH EAX
00755a33 : CALL EDX
00755a35 : MOVSS XMM0,dword ptr [0x00c10fc4]
00755a3d : MOV EAX,dword ptr [ESI + 0x4]
00755a40 : PUSH 0x10
00755a42 : LEA EDX,[EBP + -0x24]
00755a45 : MOVSS dword ptr [EBP + -0x24],XMM0
00755a4a : MOVSS dword ptr [EBP + -0x20],XMM0
00755a4f : XORPS XMM0,XMM0
00755a52 : PUSH EDX
00755a53 : MOVSS dword ptr [EBP + -0x1c],XMM0
00755a58 : MOVSS dword ptr [EBP + -0x18],XMM0
00755a5d : MOV ECX,dword ptr [EAX]
00755a5f : PUSH 0xc0ab44
00755a64 : PUSH EAX
00755a65 : MOV EAX,dword ptr [ECX + 0x50]
00755a68 : CALL EAX
00755a6a : CMP dword ptr [ESI + 0xc],EBX
00755a6d : JNZ 0x00755b0a
00755a73 : PUSH 0xc0ab54
00755a78 : LEA ECX,[EBP + -0x40]
00755a7b : CALL 0x00406460
00755a80 : MOV dword ptr [EBP + -0x4],EBX
00755a83 : MOV ECX,dword ptr [0x01725204]
00755a89 : MOV EDX,dword ptr [ECX]
00755a8b : MOV EDX,dword ptr [EDX + 0x4]
00755a8e : LEA EAX,[EBP + -0x40]
00755a91 : PUSH EAX
00755a92 : LEA EAX,[EBP + -0x14]
00755a95 : PUSH EAX
00755a96 : CALL EDX
00755a98 : MOV EDI,EAX
00755a9a : MOV byte ptr [EBP + -0x4],0x1
00755a9e : MOV EAX,dword ptr [EDI + 0x4]
00755aa1 : MOV ECX,dword ptr [ESI + 0xc]
00755aa4 : CMP ECX,EAX
00755aa6 : JZ 0x00755aca
00755aa8 : CMP ECX,EBX
00755aaa : JZ 0x00755ab3
00755aac : MOV EAX,dword ptr [ECX]
00755aae : MOV EDX,dword ptr [EAX + 0x30]
00755ab1 : CALL EDX
00755ab3 : MOV EAX,dword ptr [EDI + 0x4]
00755ab6 : CMP EAX,EBX
00755ab8 : JZ 0x00755ac4
00755aba : ADD EAX,0x2c
00755abd : PUSH EAX
00755abe : CALL dword ptr [0x00b850dc]
00755ac4 : MOV EAX,dword ptr [EDI + 0x4]
00755ac7 : MOV dword ptr [ESI + 0xc],EAX
00755aca : MOV byte ptr [EBP + -0x4],BL
00755acd : MOV ECX,dword ptr [EBP + -0x10]
00755ad0 : MOV dword ptr [EBP + -0x14],0xcd4964
00755ad7 : CMP ECX,EBX
00755ad9 : JZ 0x00755ae5
00755adb : MOV EDX,dword ptr [ECX]
00755add : MOV EAX,dword ptr [EDX + 0x30]
00755ae0 : CALL EAX
00755ae2 : MOV dword ptr [EBP + -0x10],EBX
00755ae5 : MOV dword ptr [EBP + -0x4],0xffffffff
00755aec : CMP dword ptr [EBP + -0x28],0x8
00755af0 : JC 0x00755afa
00755af2 : MOV ECX,dword ptr [EBP + -0x3c]
00755af5 : CALL 0x006f04e0
00755afa : XOR ECX,ECX
00755afc : MOV dword ptr [EBP + -0x28],0x7
00755b03 : MOV dword ptr [EBP + -0x2c],EBX
00755b06 : MOV word ptr [EBP + -0x3c],CX
00755b0a : MOV EDI,dword ptr [ESI + 0xc]
00755b0d : CMP EDI,EBX
00755b0f : JZ 0x00755b31
00755b11 : MOV EDX,dword ptr [EDI]
00755b13 : MOV EAX,dword ptr [EDX + 0x20]
00755b16 : MOV ECX,EDI
00755b18 : CALL EAX
00755b1a : MOV EDX,dword ptr [EDI + 0x38]
00755b1d : MOV ESI,dword ptr [ESI + 0x4]
00755b20 : MOV ECX,dword ptr [ESI]
00755b22 : MOV EAX,dword ptr [ECX + 0xd0]
00755b28 : PUSH EDX
00755b29 : PUSH 0xc0ab70
00755b2e : PUSH ESI
00755b2f : CALL EAX
00755b31 : MOV ECX,dword ptr [EBP + -0xc]
00755b34 : MOV dword ptr FS:[0x0],ECX
00755b3b : POP ECX
00755b3c : POP EDI
00755b3d : POP ESI
00755b3e : POP EBX
00755b3f : MOV ESP,EBP
00755b41 : POP EBP
00755b42 : RET 0x4
