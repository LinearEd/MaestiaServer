PROGRAM  : Maestia.exe
FUNCTION : FUN_00ab9740
ENTRY    : 00ab9740
BODY     : [[00ab9740, 00ab9913]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ab9740(ushort param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  int in_ECX;
  int iVar6;
  undefined1 local_54 [28];
  int local_38;
  undefined4 **local_34 [2];
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b219dd;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_34[0] = (undefined4 **)(uint)param_1;
  local_14 = uVar4;
  FUN_00413b60(local_34);
  if (local_38 == *(int *)(in_ECX + 0x4c)) goto LAB_00ab98f6;
  FUN_00406460(&DAT_00c8eefc);
  local_8 = 0;
  sVar1 = *(short *)(*(int *)(local_38 + 0x10) + 0x28);
  if (sVar1 == 0) {
    FUN_00406360(&DAT_00c8ef00,0);
  }
  else {
    if (sVar1 == 1) {
      FUN_00406460(L"IDS_CHAR_TITLE_ACHIVE");
      local_8._0_1_ = 1;
      uVar5 = FUN_0081d120(local_54);
      local_8._0_1_ = 2;
      FUN_00405eb0(uVar5,0,0xffffffff);
      local_8._0_1_ = 1;
    }
    else {
      if (sVar1 != 2) goto LAB_00ab9857;
      FUN_00406460(L"IDS_CHAR_TITLE_UNABLE");
      local_8._0_1_ = 3;
      uVar5 = FUN_0081d120(local_54);
      local_8._0_1_ = 4;
      FUN_00405eb0(uVar5,0,0xffffffff);
      local_8._0_1_ = 3;
    }
    FUN_00406560();
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00406560();
  }
LAB_00ab9857:
  iVar2 = *DAT_00da9894;
  if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
    local_34[0] = local_2c[0];
    if (local_18 < 8) {
      local_34[0] = local_2c;
    }
    iVar6 = *(int *)(local_38 + 0x10);
    if (*(uint *)(iVar6 + 0x24) < 8) {
      iVar6 = iVar6 + 0x10;
    }
    else {
      iVar6 = *(int *)(iVar6 + 0x10);
    }
    iVar3 = *(int *)(local_38 + 0x10);
    (**(code **)(**(int **)(iVar2 + 0x114) + 4))
              (*(int **)(iVar2 + 0x114),"UpdateCharTitle","%d, %ls, %ls, %d, %d, %b ",
               *(undefined2 *)(local_38 + 0xc),iVar6,local_34[0],*(undefined2 *)(iVar3 + 0x28),
               *(undefined2 *)(iVar3 + 0x2a),*(undefined1 *)(iVar3 + 0x2c),uVar4);
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
LAB_00ab98f6:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ab9740 : PUSH EBP
00ab9741 : MOV EBP,ESP
00ab9743 : PUSH -0x1
00ab9745 : PUSH 0xb219dd
00ab974a : MOV EAX,FS:[0x0]
00ab9750 : PUSH EAX
00ab9751 : SUB ESP,0x60
00ab9754 : MOV EAX,[0x00d66fa0]
00ab9759 : XOR EAX,EBP
00ab975b : MOV dword ptr [EBP + -0x10],EAX
00ab975e : PUSH EBX
00ab975f : PUSH ESI
00ab9760 : PUSH EDI
00ab9761 : PUSH EAX
00ab9762 : LEA EAX,[EBP + -0xc]
00ab9765 : MOV FS:[0x0],EAX
00ab976b : MOVZX EAX,word ptr [EBP + 0x8]
00ab976f : MOV ESI,ECX
00ab9771 : LEA ECX,[EBP + -0x30]
00ab9774 : MOV dword ptr [EBP + -0x30],EAX
00ab9777 : PUSH ECX
00ab9778 : LEA ECX,[ESI + 0x48]
00ab977b : LEA EAX,[EBP + -0x34]
00ab977e : CALL 0x00413b60
00ab9783 : MOV ESI,dword ptr [ESI + 0x4c]
00ab9786 : MOV EBX,dword ptr [EBP + -0x34]
00ab9789 : CMP EBX,ESI
00ab978b : JZ 0x00ab98f6
00ab9791 : PUSH 0xc8eefc
00ab9796 : LEA ECX,[EBP + -0x2c]
00ab9799 : CALL 0x00406460
00ab979e : MOV dword ptr [EBP + -0x4],0x0
00ab97a5 : MOV EDX,dword ptr [EBX + 0x10]
00ab97a8 : MOVZX EAX,word ptr [EDX + 0x28]
00ab97ac : TEST AX,AX
00ab97af : JNZ 0x00ab97c5
00ab97b1 : PUSH 0x0
00ab97b3 : PUSH 0xc8ef00
00ab97b8 : LEA ECX,[EBP + -0x2c]
00ab97bb : CALL 0x00406360
00ab97c0 : JMP 0x00ab9857
00ab97c5 : CMP AX,0x1
00ab97c9 : JNZ 0x00ab9805
00ab97cb : PUSH 0xc8ef04
00ab97d0 : LEA ECX,[EBP + -0x50]
00ab97d3 : CALL 0x00406460
00ab97d8 : MOV byte ptr [EBP + -0x4],0x1
00ab97dc : MOV ECX,dword ptr [0x0172491c]
00ab97e2 : LEA EAX,[EBP + -0x50]
00ab97e5 : PUSH EAX
00ab97e6 : LEA EDI,[EBP + -0x6c]
00ab97e9 : CALL 0x0081d120
00ab97ee : MOV byte ptr [EBP + -0x4],0x2
00ab97f2 : PUSH -0x1
00ab97f4 : PUSH 0x0
00ab97f6 : PUSH EAX
00ab97f7 : LEA ECX,[EBP + -0x2c]
00ab97fa : CALL 0x00405eb0
00ab97ff : MOV byte ptr [EBP + -0x4],0x1
00ab9803 : JMP 0x00ab9843
00ab9805 : CMP AX,0x2
00ab9809 : JNZ 0x00ab9857
00ab980b : PUSH 0xc8ef30
00ab9810 : LEA ECX,[EBP + -0x50]
00ab9813 : CALL 0x00406460
00ab9818 : MOV byte ptr [EBP + -0x4],0x3
00ab981c : LEA ECX,[EBP + -0x50]
00ab981f : PUSH ECX
00ab9820 : MOV ECX,dword ptr [0x0172491c]
00ab9826 : LEA EDI,[EBP + -0x6c]
00ab9829 : CALL 0x0081d120
00ab982e : MOV byte ptr [EBP + -0x4],0x4
00ab9832 : PUSH -0x1
00ab9834 : PUSH 0x0
00ab9836 : PUSH EAX
00ab9837 : LEA ECX,[EBP + -0x2c]
00ab983a : CALL 0x00405eb0
00ab983f : MOV byte ptr [EBP + -0x4],0x3
00ab9843 : LEA ECX,[EBP + -0x6c]
00ab9846 : CALL 0x00406560
00ab984b : MOV byte ptr [EBP + -0x4],0x0
00ab984f : LEA ECX,[EBP + -0x50]
00ab9852 : CALL 0x00406560
00ab9857 : MOV EDX,dword ptr [0x00da9894]
00ab985d : MOV EAX,dword ptr [EDX]
00ab985f : MOV ECX,0x8
00ab9864 : TEST EAX,EAX
00ab9866 : JZ 0x00ab98ce
00ab9868 : CMP dword ptr [EAX + 0x114],0x0
00ab986f : JZ 0x00ab98ce
00ab9871 : MOV EDX,dword ptr [EAX + 0x114]
00ab9877 : MOV EAX,dword ptr [EBP + -0x28]
00ab987a : CMP dword ptr [EBP + -0x14],ECX
00ab987d : JNC 0x00ab9882
00ab987f : LEA EAX,[EBP + -0x28]
00ab9882 : MOV dword ptr [EBP + -0x30],EAX
00ab9885 : MOV EAX,dword ptr [EBX + 0x10]
00ab9888 : ADD EAX,0xc
00ab988b : CMP dword ptr [EAX + 0x18],ECX
00ab988e : JC 0x00ab9895
00ab9890 : MOV ECX,dword ptr [EAX + 0x4]
00ab9893 : JMP 0x00ab9898
00ab9895 : LEA ECX,[EAX + 0x4]
00ab9898 : MOV EAX,dword ptr [EBX + 0x10]
00ab989b : MOVZX EDI,byte ptr [EAX + 0x2c]
00ab989f : MOV ESI,dword ptr [EDX]
00ab98a1 : PUSH EDI
00ab98a2 : MOVZX EDI,word ptr [EAX + 0x2a]
00ab98a6 : MOVZX EAX,word ptr [EAX + 0x28]
00ab98aa : PUSH EDI
00ab98ab : PUSH EAX
00ab98ac : MOV EAX,dword ptr [EBP + -0x30]
00ab98af : PUSH EAX
00ab98b0 : PUSH ECX
00ab98b1 : MOVZX ECX,word ptr [EBX + 0xc]
00ab98b5 : PUSH ECX
00ab98b6 : PUSH 0xc8ef5c
00ab98bb : PUSH 0xc8ef78
00ab98c0 : PUSH EDX
00ab98c1 : MOV EDX,dword ptr [ESI + 0x4]
00ab98c4 : CALL EDX
00ab98c6 : ADD ESP,0x24
00ab98c9 : MOV ECX,0x8
00ab98ce : MOV dword ptr [EBP + -0x4],0xffffffff
00ab98d5 : CMP dword ptr [EBP + -0x14],ECX
00ab98d8 : JC 0x00ab98e2
00ab98da : MOV ECX,dword ptr [EBP + -0x28]
00ab98dd : CALL 0x006f04e0
00ab98e2 : XOR EAX,EAX
00ab98e4 : MOV dword ptr [EBP + -0x14],0x7
00ab98eb : MOV dword ptr [EBP + -0x18],0x0
00ab98f2 : MOV word ptr [EBP + -0x28],AX
00ab98f6 : MOV ECX,dword ptr [EBP + -0xc]
00ab98f9 : MOV dword ptr FS:[0x0],ECX
00ab9900 : POP ECX
00ab9901 : POP EDI
00ab9902 : POP ESI
00ab9903 : POP EBX
00ab9904 : MOV ECX,dword ptr [EBP + -0x10]
00ab9907 : XOR ECX,EBP
00ab9909 : CALL 0x00633e6b
00ab990e : MOV ESP,EBP
00ab9910 : POP EBP
00ab9911 : RET 0x4
