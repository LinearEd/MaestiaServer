PROGRAM  : Maestia.exe
FUNCTION : FUN_00945b30
ENTRY    : 00945b30
BODY     : [[00945b30, 00945c81]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00945b30(char param_1,undefined4 param_2)

{
  int *piVar1;
  int iVar2;
  short sVar3;
  int *piVar4;
  int in_ECX;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1fab6;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if ((*(int *)(in_ECX + 100) - *(int *)(in_ECX + 0x60) & 0xfffffffcU) != 0) {
    piVar1 = *(int **)(in_ECX + 100);
    piVar4 = (int *)FUN_004268b0(*(undefined4 *)(in_ECX + 0x60),piVar1,param_2,local_14);
    if (((int *)*piVar4 != piVar1) && (iVar2 = *(int *)*piVar4, iVar2 != 0)) {
      sVar3 = (ushort)(param_1 != '\0') * 2 + 1;
      *(short *)(iVar2 + 10) = sVar3;
      if (*(char *)(in_ECX + 0x32) != '\0') {
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))(piVar1,"mc_petlist.UpdatePetState","%d,%d",param_2,sVar3);
        }
        if ((*DAT_00da9894 != 0) &&
           (piVar1 = *(int **)(*DAT_00da9894 + 0x114), piVar1 != (int *)0x0)) {
          (**(code **)(*piVar1 + 4))
                    (piVar1,"mc_petinfo.UpdatePetState","%d,%d",param_2,*(undefined2 *)(iVar2 + 10))
          ;
        }
      }
      goto LAB_00945c64;
    }
  }
  FUN_00404750(L"Can\'t find pet.. key[%u]",param_2);
  local_8 = 0;
  if ((int *)*DAT_00da98e8 != (int *)0x0) {
    (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
              (L"AvaGuiPetList::UpdateSummonPetState",0x503,local_30);
  }
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
LAB_00945c64:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00945b30 : PUSH EBP
00945b31 : MOV EBP,ESP
00945b33 : PUSH -0x1
00945b35 : PUSH 0xb1fab6
00945b3a : MOV EAX,FS:[0x0]
00945b40 : PUSH EAX
00945b41 : SUB ESP,0x24
00945b44 : MOV EAX,[0x00d66fa0]
00945b49 : XOR EAX,EBP
00945b4b : MOV dword ptr [EBP + -0x10],EAX
00945b4e : PUSH EBX
00945b4f : PUSH ESI
00945b50 : PUSH EDI
00945b51 : PUSH EAX
00945b52 : LEA EAX,[EBP + -0xc]
00945b55 : MOV FS:[0x0],EAX
00945b5b : MOV EBX,dword ptr [EBP + 0xc]
00945b5e : MOV ESI,ECX
00945b60 : MOV EAX,dword ptr [ESI + 0x64]
00945b63 : SUB EAX,dword ptr [ESI + 0x60]
00945b66 : TEST EAX,0xfffffffc
00945b6b : JZ 0x00945b8d
00945b6d : MOV EDI,dword ptr [ESI + 0x64]
00945b70 : MOV EAX,dword ptr [ESI + 0x60]
00945b73 : PUSH EBX
00945b74 : PUSH EDI
00945b75 : PUSH EAX
00945b76 : LEA EAX,[EBP + -0x30]
00945b79 : CALL 0x004268b0
00945b7e : MOV EAX,dword ptr [EAX]
00945b80 : ADD ESP,0xc
00945b83 : CMP EAX,EDI
00945b85 : JZ 0x00945b8d
00945b87 : MOV EDI,dword ptr [EAX]
00945b89 : TEST EDI,EDI
00945b8b : JNZ 0x00945beb
00945b8d : PUSH EBX
00945b8e : PUSH 0xc73be0
00945b93 : LEA ESI,[EBP + -0x2c]
00945b96 : CALL 0x00404750
00945b9b : ADD ESP,0x8
00945b9e : XOR ESI,ESI
00945ba0 : MOV dword ptr [EBP + -0x4],ESI
00945ba3 : MOV ECX,dword ptr [0x00da98e8]
00945ba9 : MOV ECX,dword ptr [ECX]
00945bab : CMP ECX,ESI
00945bad : JZ 0x00945bc4
00945baf : MOV EDX,dword ptr [ECX]
00945bb1 : MOV EDX,dword ptr [EDX + 0x14]
00945bb4 : LEA EAX,[EBP + -0x2c]
00945bb7 : PUSH EAX
00945bb8 : PUSH 0x503
00945bbd : PUSH 0xc73c18
00945bc2 : CALL EDX
00945bc4 : MOV dword ptr [EBP + -0x4],0xffffffff
00945bcb : CMP dword ptr [EBP + -0x14],0x8
00945bcf : JC 0x00945bd9
00945bd1 : MOV ECX,dword ptr [EBP + -0x28]
00945bd4 : CALL 0x006f04e0
00945bd9 : XOR EAX,EAX
00945bdb : MOV dword ptr [EBP + -0x14],0x7
00945be2 : MOV dword ptr [EBP + -0x18],ESI
00945be5 : MOV word ptr [EBP + -0x28],AX
00945be9 : JMP 0x00945c64
00945beb : XOR ECX,ECX
00945bed : CMP byte ptr [EBP + 0x8],CL
00945bf0 : SETNZ CL
00945bf3 : LEA ECX,[ECX + ECX*0x1 + 0x1]
00945bf7 : MOVZX ECX,CX
00945bfa : MOV word ptr [EDI + 0xa],CX
00945bfe : CMP byte ptr [ESI + 0x32],0x0
00945c02 : JZ 0x00945c64
00945c04 : MOV EDX,dword ptr [0x00da9894]
00945c0a : MOV EAX,dword ptr [EDX]
00945c0c : TEST EAX,EAX
00945c0e : JZ 0x00945c34
00945c10 : MOV EAX,dword ptr [EAX + 0x114]
00945c16 : TEST EAX,EAX
00945c18 : JZ 0x00945c34
00945c1a : MOV EDX,dword ptr [EAX]
00945c1c : MOV EDX,dword ptr [EDX + 0x4]
00945c1f : MOVZX ECX,CX
00945c22 : PUSH ECX
00945c23 : PUSH EBX
00945c24 : PUSH 0xc73c60
00945c29 : PUSH 0xc73c68
00945c2e : PUSH EAX
00945c2f : CALL EDX
00945c31 : ADD ESP,0x14
00945c34 : MOV EAX,[0x00da9894]
00945c39 : MOV EAX,dword ptr [EAX]
00945c3b : TEST EAX,EAX
00945c3d : JZ 0x00945c64
00945c3f : MOV EAX,dword ptr [EAX + 0x114]
00945c45 : TEST EAX,EAX
00945c47 : JZ 0x00945c64
00945c49 : MOVZX EDX,word ptr [EDI + 0xa]
00945c4d : MOV ECX,dword ptr [EAX]
00945c4f : PUSH EDX
00945c50 : PUSH EBX
00945c51 : PUSH 0xc73c84
00945c56 : PUSH 0xc73c8c
00945c5b : PUSH EAX
00945c5c : MOV EAX,dword ptr [ECX + 0x4]
00945c5f : CALL EAX
00945c61 : ADD ESP,0x14
00945c64 : MOV ECX,dword ptr [EBP + -0xc]
00945c67 : MOV dword ptr FS:[0x0],ECX
00945c6e : POP ECX
00945c6f : POP EDI
00945c70 : POP ESI
00945c71 : POP EBX
00945c72 : MOV ECX,dword ptr [EBP + -0x10]
00945c75 : XOR ECX,EBP
00945c77 : CALL 0x00633e6b
00945c7c : MOV ESP,EBP
00945c7e : POP EBP
00945c7f : RET 0x8
