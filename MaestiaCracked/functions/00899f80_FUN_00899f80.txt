PROGRAM  : Maestia.exe
FUNCTION : FUN_00899f80
ENTRY    : 00899f80
BODY     : [[00899f80, 0089a0a4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00899f80(int param_1,int param_2)

{
  int *piVar1;
  code *pcVar2;
  int iVar3;
  short sVar4;
  int *in_ECX;
  bool bVar5;
  
  pcVar2 = *(code **)(*in_ECX + 0x284);
  *(undefined1 *)((int)in_ECX + 0x4d3) = 1;
  *(undefined1 *)(in_ECX + 0x164) = 1;
  *(undefined1 *)((int)in_ECX + 0x4cd) = 0;
  *(undefined1 *)((int)in_ECX + 0x4ce) = 0;
  *(undefined1 *)((int)in_ECX + 0x4cb) = 0;
  *(undefined1 *)(in_ECX + 0x133) = 0;
  (*pcVar2)();
  if ((char)in_ECX[0x109] == '\0') {
    iVar3 = *(int *)(in_ECX[0x4e] + 4);
    piVar1 = in_ECX + 0x456;
    sVar4 = FUN_0043d970();
    if (sVar4 == 1000) {
      bVar5 = *(int **)((int)in_ECX + iVar3 + 0x13c) == piVar1;
    }
    else if (sVar4 == 2000) {
      bVar5 = *(int **)((int)in_ECX + iVar3 + 0x140) == piVar1;
    }
    else {
      bVar5 = *(int **)((int)in_ECX + iVar3 + 0x144) == piVar1;
    }
    if (bVar5) {
      iVar3 = *(int *)(*DAT_00da9894 + 0x18c);
      (**(code **)**(undefined4 **)(*DAT_00da9894 + 0x114))("CastingClose");
      *(undefined1 *)(iVar3 + 0x38) = 0;
      *(undefined4 *)(iVar3 + 0x44) = 0;
      return;
    }
    FUN_00896ec0();
    in_ECX[0x32] = param_2;
    in_ECX[0x46] = param_2;
    in_ECX[0x38] = param_1;
    *(undefined1 *)(in_ECX + 0x3c) = 0;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x43a,1,0,1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00899f80 : PUSH EBP
00899f81 : MOV EBP,ESP
00899f83 : PUSH ESI
00899f84 : MOV ESI,ECX
00899f86 : MOV EAX,dword ptr [ESI]
00899f88 : MOV EDX,dword ptr [EAX + 0x284]
00899f8e : MOV byte ptr [ESI + 0x4d3],0x1
00899f95 : MOV byte ptr [ESI + 0x590],0x1
00899f9c : MOV byte ptr [ESI + 0x4cd],0x0
00899fa3 : MOV byte ptr [ESI + 0x4ce],0x0
00899faa : MOV byte ptr [ESI + 0x4cb],0x0
00899fb1 : MOV byte ptr [ESI + 0x4cc],0x0
00899fb8 : CALL EDX
00899fba : CMP byte ptr [ESI + 0x424],0x0
00899fc1 : JNZ 0x0089a0a0
00899fc7 : MOV EAX,dword ptr [ESI + 0x138]
00899fcd : MOV ECX,dword ptr [EAX + 0x4]
00899fd0 : MOV AX,word ptr [ESI + 0x1182]
00899fd7 : PUSH EBX
00899fd8 : PUSH EDI
00899fd9 : LEA EDI,[ESI + 0x1158]
00899fdf : LEA EBX,[ECX + ESI*0x1 + 0x138]
00899fe6 : CALL 0x0043d970
00899feb : MOV EDX,0x3e8
00899ff0 : CMP AX,DX
00899ff3 : JNZ 0x00899ffa
00899ff5 : CMP dword ptr [EBX + 0x4],EDI
00899ff8 : JMP 0x0089a00c
00899ffa : MOV ECX,0x7d0
00899fff : CMP AX,CX
0089a002 : JNZ 0x0089a009
0089a004 : CMP dword ptr [EBX + 0x8],EDI
0089a007 : JMP 0x0089a00c
0089a009 : CMP dword ptr [EBX + 0xc],EDI
0089a00c : SETZ AL
0089a00f : TEST AL,AL
0089a011 : JZ 0x0089a047
0089a013 : MOV EDX,dword ptr [0x00da9894]
0089a019 : MOV EAX,dword ptr [EDX]
0089a01b : MOV ESI,dword ptr [EAX + 0x18c]
0089a021 : MOV EAX,dword ptr [EAX + 0x114]
0089a027 : MOV EDX,dword ptr [EAX]
0089a029 : MOV ECX,EAX
0089a02b : MOV EAX,dword ptr [EDX]
0089a02d : PUSH 0xc652d4
0089a032 : CALL EAX
0089a034 : XORPS XMM0,XMM0
0089a037 : POP EDI
0089a038 : POP EBX
0089a039 : MOV byte ptr [ESI + 0x38],0x0
0089a03d : MOVSS dword ptr [ESI + 0x44],XMM0
0089a042 : POP ESI
0089a043 : POP EBP
0089a044 : RET 0x10
0089a047 : MOV ECX,dword ptr [EBP + 0x14]
0089a04a : MOV EDX,dword ptr [EBP + 0x10]
0089a04d : MOV EDI,dword ptr [EBP + 0x8]
0089a050 : PUSH ECX
0089a051 : PUSH EDX
0089a052 : PUSH EDI
0089a053 : PUSH ESI
0089a054 : CALL 0x00896ec0
0089a059 : MOV EAX,dword ptr [EBP + 0xc]
0089a05c : MOV dword ptr [ESI + 0xc8],EAX
0089a062 : MOV dword ptr [ESI + 0x118],EAX
0089a068 : MOV EAX,dword ptr [ESI + 0x138]
0089a06e : MOV dword ptr [ESI + 0xe0],EDI
0089a074 : MOV byte ptr [ESI + 0xf0],0x0
0089a07b : MOV ECX,dword ptr [EAX + 0x4]
0089a07e : MOV EDX,dword ptr [ECX + ESI*0x1 + 0x138]
0089a085 : MOV EAX,dword ptr [EDX + 0x10]
0089a088 : PUSH 0x1
0089a08a : LEA ECX,[ECX + ESI*0x1 + 0x138]
0089a091 : PUSH 0x0
0089a093 : PUSH 0x1
0089a095 : ADD ESI,0x10e8
0089a09b : PUSH ESI
0089a09c : CALL EAX
0089a09e : POP EDI
0089a09f : POP EBX
0089a0a0 : POP ESI
0089a0a1 : POP EBP
0089a0a2 : RET 0x10
