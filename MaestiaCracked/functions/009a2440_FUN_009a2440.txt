PROGRAM  : Maestia.exe
FUNCTION : FUN_009a2440
ENTRY    : 009a2440
BODY     : [[009a2440, 009a264d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a2440(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined1 **ppuVar4;
  int *in_ECX;
  undefined4 uStack_90;
  int *piStack_8c;
  int *piStack_88;
  char *pcStack_84;
  undefined4 **ppuStack_80;
  undefined4 **ppuStack_7c;
  undefined1 **ppuStack_78;
  uint uStack_74;
  uint local_48;
  int local_40;
  uint local_38;
  undefined1 *local_34;
  undefined1 local_30 [4];
  undefined4 **local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4af97;
  local_10 = ExceptionList;
  uStack_74 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_38 = 0;
  local_14 = uStack_74;
  do {
    if (((int)local_38 < 0xe) || (0x13 < (int)local_38)) {
      ppuStack_7c = (undefined4 **)(local_38 & 0xffff);
      ppuStack_78 = (undefined1 **)0x0;
      ppuStack_80 = (undefined4 ***)0x9a2496;
      iVar2 = (**(code **)(*in_ECX + 0x74))();
      if (iVar2 != 0) {
        local_34 = *(undefined1 **)(iVar2 + 0x10);
        ppuStack_78 = &local_34;
        ppuStack_7c = (undefined4 ***)0x9a24bb;
        FUN_004437f0();
        if ((local_40 != *(int *)(DAT_00d7c54c + 0x44)) &&
           (iVar1 = *(int *)(local_40 + 0x10), iVar1 != 0)) {
          local_18 = 7;
          local_1c = 0;
          local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
          local_8 = 0;
          ppuStack_78 = (undefined1 **)local_30;
          ppuStack_7c = (undefined4 **)
                        CONCAT22(*(undefined2 *)(iVar1 + 4),*(undefined2 *)(iVar1 + 6));
          ppuStack_80 = (undefined4 **)0x9a2507;
          (**(code **)(*in_ECX + 0x58))();
          local_34 = (undefined1 *)&uStack_90;
          ppuStack_78 = (undefined1 **)0x7;
          ppuStack_7c = (undefined4 **)0x0;
          piStack_8c = (int *)((uint)piStack_8c & 0xffff0000);
          FUN_00405eb0(local_30,0,0xffffffff);
          local_8 = local_8 & 0xffffff00;
          ppuStack_80 = (undefined4 **)FUN_008f75f0();
          local_8._0_1_ = 2;
          ppuStack_78 = (undefined1 **)0xffffffff;
          ppuStack_7c = (undefined4 ***)0x0;
          pcStack_84 = (char *)0x9a254e;
          FUN_00405eb0();
          local_8 = (uint)local_8._1_3_ << 8;
          if (7 < local_48) {
                    /* WARNING: Subroutine does not return */
            ppuStack_78 = (undefined1 **)0x9a255f;
            FUN_006f04e0();
          }
          local_48 = 7;
          ppuStack_78 = (undefined1 **)0x9a2573;
          uVar3 = FUN_009a01c0();
          iVar1 = *DAT_00da9894;
          if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
            piStack_8c = *(int **)(iVar1 + 0x114);
            ppuStack_78 = *(undefined1 ***)(iVar2 + 0xb0);
            ppuStack_7c = local_2c[0];
            if (local_18 < 8) {
              ppuStack_7c = local_2c;
            }
            pcStack_84 = "%d,%ls,%d";
            piStack_88 = (int *)0xc89500;
            uStack_90 = 0x9a25bc;
            ppuStack_80 = (undefined4 ***)(uVar3 & 0xffff);
            (**(code **)(*piStack_8c + 4))();
          }
          ppuStack_78 = (undefined1 **)0x9a25c6;
          ppuVar4 = (undefined1 **)FUN_00a08b70();
          iVar2 = *DAT_00da9894;
          if ((iVar2 != 0) && (*(int *)(iVar2 + 0x114) != 0)) {
            piStack_88 = *(int **)(iVar2 + 0x114);
            ppuStack_80 = (undefined4 **)0xc89510;
            pcStack_84 = "SetEquipItemQuality";
            piStack_8c = (int *)0x9a25f7;
            ppuStack_7c = (undefined4 ***)(uVar3 & 0xffff);
            ppuStack_78 = ppuVar4;
            (**(code **)(*piStack_88 + 4))();
          }
          local_8 = 0xffffffff;
          if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
            ppuStack_78 = (undefined1 **)0x9a260f;
            FUN_006f04e0();
          }
          local_18 = 7;
          local_1c = 0;
          local_2c[0] = (undefined4 **)((uint)local_2c[0] & 0xffff0000);
        }
      }
    }
    local_38 = local_38 + 1;
    if (0x1d < (int)local_38) {
      ExceptionList = local_10;
      __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
      return;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
009a2440 : PUSH EBP
009a2441 : MOV EBP,ESP
009a2443 : PUSH -0x1
009a2445 : PUSH 0xb4af97
009a244a : MOV EAX,FS:[0x0]
009a2450 : PUSH EAX
009a2451 : SUB ESP,0x54
009a2454 : MOV EAX,[0x00d66fa0]
009a2459 : XOR EAX,EBP
009a245b : MOV dword ptr [EBP + -0x10],EAX
009a245e : PUSH EBX
009a245f : PUSH ESI
009a2460 : PUSH EDI
009a2461 : PUSH EAX
009a2462 : LEA EAX,[EBP + -0xc]
009a2465 : MOV FS:[0x0],EAX
009a246b : XOR EBX,EBX
009a246d : MOV ESI,ECX
009a246f : XOR EAX,EAX
009a2471 : MOV dword ptr [EBP + -0x40],ESI
009a2474 : MOV dword ptr [EBP + -0x34],EAX
009a2477 : CMP EAX,0xe
009a247a : JL 0x009a2485
009a247c : CMP EAX,0x13
009a247f : JLE 0x009a2625
009a2485 : MOV EDX,dword ptr [ESI]
009a2487 : MOVZX EAX,AX
009a248a : PUSH EBX
009a248b : MOV dword ptr [EBP + -0x38],EAX
009a248e : PUSH EAX
009a248f : MOV EAX,dword ptr [EDX + 0x74]
009a2492 : MOV ECX,ESI
009a2494 : CALL EAX
009a2496 : MOV EDI,EAX
009a2498 : CMP EDI,EBX
009a249a : JZ 0x009a2622
009a24a0 : MOV ECX,dword ptr [EDI + 0x10]
009a24a3 : MOV dword ptr [EBP + -0x30],ECX
009a24a6 : MOV ECX,dword ptr [0x00d7c54c]
009a24ac : LEA EDX,[EBP + -0x30]
009a24af : PUSH EDX
009a24b0 : ADD ECX,0x40
009a24b3 : LEA EAX,[EBP + -0x3c]
009a24b6 : CALL 0x004437f0
009a24bb : MOV EAX,[0x00d7c54c]
009a24c0 : MOV EAX,dword ptr [EAX + 0x44]
009a24c3 : MOV ECX,dword ptr [EBP + -0x3c]
009a24c6 : CMP ECX,EAX
009a24c8 : JZ 0x009a2622
009a24ce : MOV EAX,dword ptr [ECX + 0x10]
009a24d1 : CMP EAX,EBX
009a24d3 : JZ 0x009a2622
009a24d9 : XOR ECX,ECX
009a24db : MOV dword ptr [EBP + -0x14],0x7
009a24e2 : MOV dword ptr [EBP + -0x18],EBX
009a24e5 : MOV word ptr [EBP + -0x28],CX
009a24e9 : MOV dword ptr [EBP + -0x4],EBX
009a24ec : MOV EDX,dword ptr [ESI]
009a24ee : MOV EDX,dword ptr [EDX + 0x58]
009a24f1 : LEA ECX,[EBP + -0x2c]
009a24f4 : PUSH ECX
009a24f5 : MOVZX ECX,word ptr [EAX + 0x4]
009a24f9 : MOVZX EAX,word ptr [EAX + 0x6]
009a24fd : SHL ECX,0x10
009a2500 : OR ECX,EAX
009a2502 : PUSH ECX
009a2503 : MOV ECX,ESI
009a2505 : CALL EDX
009a2507 : SUB ESP,0x1c
009a250a : MOV ECX,ESP
009a250c : MOV dword ptr [EBP + -0x30],ESP
009a250f : PUSH -0x1
009a2511 : PUSH EBX
009a2512 : LEA EDX,[EBP + -0x2c]
009a2515 : MOV ESI,0x7
009a251a : XOR EAX,EAX
009a251c : MOV dword ptr [ECX + 0x18],ESI
009a251f : MOV dword ptr [ECX + 0x14],EBX
009a2522 : PUSH EDX
009a2523 : MOV word ptr [ECX + 0x4],AX
009a2527 : CALL 0x00405eb0
009a252c : MOV byte ptr [EBP + -0x4],0x1
009a2530 : MOV byte ptr [EBP + -0x4],BL
009a2533 : LEA ECX,[EBP + -0x5c]
009a2536 : CALL 0x008f75f0
009a253b : ADD ESP,0x1c
009a253e : MOV byte ptr [EBP + -0x4],0x2
009a2542 : PUSH -0x1
009a2544 : PUSH EBX
009a2545 : PUSH EAX
009a2546 : LEA ECX,[EBP + -0x2c]
009a2549 : CALL 0x00405eb0
009a254e : MOV byte ptr [EBP + -0x4],BL
009a2551 : CMP dword ptr [EBP + -0x44],0x8
009a2555 : JC 0x009a255f
009a2557 : MOV ECX,dword ptr [EBP + -0x58]
009a255a : CALL 0x006f04e0
009a255f : MOV ECX,dword ptr [EBP + -0x38]
009a2562 : XOR EAX,EAX
009a2564 : MOV dword ptr [EBP + -0x44],ESI
009a2567 : MOV dword ptr [EBP + -0x48],EBX
009a256a : MOV word ptr [EBP + -0x58],AX
009a256e : CALL 0x009a01c0
009a2573 : MOV ECX,dword ptr [0x00da9894]
009a2579 : MOVZX ESI,AX
009a257c : MOV EAX,dword ptr [ECX]
009a257e : CMP EAX,EBX
009a2580 : JZ 0x009a25bf
009a2582 : CMP dword ptr [EAX + 0x114],EBX
009a2588 : JZ 0x009a25bf
009a258a : CMP dword ptr [EBP + -0x14],0x8
009a258e : MOV EAX,dword ptr [EAX + 0x114]
009a2594 : MOV ECX,dword ptr [EDI + 0xb0]
009a259a : MOV EDX,dword ptr [EBP + -0x28]
009a259d : JNC 0x009a25a2
009a259f : LEA EDX,[EBP + -0x28]
009a25a2 : PUSH ECX
009a25a3 : MOV ECX,EDX
009a25a5 : MOV EDX,dword ptr [EAX]
009a25a7 : MOV EDX,dword ptr [EDX + 0x4]
009a25aa : PUSH ECX
009a25ab : MOVZX ECX,SI
009a25ae : PUSH ECX
009a25af : PUSH 0xc894f4
009a25b4 : PUSH 0xc89500
009a25b9 : PUSH EAX
009a25ba : CALL EDX
009a25bc : ADD ESP,0x18
009a25bf : MOV ECX,EDI
009a25c1 : CALL 0x00a08b70
009a25c6 : MOV ECX,dword ptr [0x00da9894]
009a25cc : MOV ECX,dword ptr [ECX]
009a25ce : CMP ECX,EBX
009a25d0 : JZ 0x009a25fa
009a25d2 : CMP dword ptr [ECX + 0x114],EBX
009a25d8 : JZ 0x009a25fa
009a25da : MOV ECX,dword ptr [ECX + 0x114]
009a25e0 : MOV EDX,dword ptr [ECX]
009a25e2 : PUSH EAX
009a25e3 : MOVZX EAX,SI
009a25e6 : PUSH EAX
009a25e7 : PUSH 0xc89510
009a25ec : PUSH 0xc89518
009a25f1 : PUSH ECX
009a25f2 : MOV ECX,dword ptr [EDX + 0x4]
009a25f5 : CALL ECX
009a25f7 : ADD ESP,0x14
009a25fa : MOV dword ptr [EBP + -0x4],0xffffffff
009a2601 : CMP dword ptr [EBP + -0x14],0x8
009a2605 : JC 0x009a260f
009a2607 : MOV ECX,dword ptr [EBP + -0x28]
009a260a : CALL 0x006f04e0
009a260f : MOV ESI,dword ptr [EBP + -0x40]
009a2612 : XOR EDX,EDX
009a2614 : MOV dword ptr [EBP + -0x14],0x7
009a261b : MOV dword ptr [EBP + -0x18],EBX
009a261e : MOV word ptr [EBP + -0x28],DX
009a2622 : MOV EAX,dword ptr [EBP + -0x34]
009a2625 : INC EAX
009a2626 : CMP EAX,0x1d
009a2629 : MOV dword ptr [EBP + -0x34],EAX
009a262c : JLE 0x009a2477
009a2632 : MOV ECX,dword ptr [EBP + -0xc]
009a2635 : MOV dword ptr FS:[0x0],ECX
009a263c : POP ECX
009a263d : POP EDI
009a263e : POP ESI
009a263f : POP EBX
009a2640 : MOV ECX,dword ptr [EBP + -0x10]
009a2643 : XOR ECX,EBP
009a2645 : CALL 0x00633e6b
009a264a : MOV ESP,EBP
009a264c : POP EBP
009a264d : RET
