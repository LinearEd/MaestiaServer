PROGRAM  : Maestia.exe
FUNCTION : FUN_006a0060
ENTRY    : 006a0060
BODY     : [[006a0060, 006a00ec] [006a00f0, 006a02cd]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006a0060(undefined4 *param_1)

{
  undefined1 *puVar1;
  char *_Str1;
  int iVar2;
  undefined4 uVar3;
  int local_3c;
  int local_38;
  int local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  
  puVar1 = (undefined1 *)param_1[2];
  local_2c = *param_1;
  local_38 = 0xa0;
  local_34 = 0;
  if (puVar1 == (undefined1 *)0x0) {
    return 6;
  }
  _Str1 = (char *)FUN_0069dfd0(1,&local_3c);
  if (((_Str1 == (char *)0x0) || (local_3c != 0x10)) ||
     (iVar2 = _strncmp(_Str1,"StartFontMetrics",0x10), iVar2 != 0)) {
    return 2;
  }
  iVar2 = FUN_0069dfd0(1,&local_3c);
  do {
    if (iVar2 == 0) {
LAB_006a0146:
      uVar3 = local_2c;
      FUN_00687f30(local_2c,*(undefined4 *)(puVar1 + 0x1c));
      *(undefined4 *)(puVar1 + 0x1c) = 0;
      *(undefined4 *)(puVar1 + 0x20) = 0;
      FUN_00687f30(uVar3,*(undefined4 *)(puVar1 + 0x24));
      *(undefined4 *)(puVar1 + 0x24) = 0;
      *(undefined4 *)(puVar1 + 0x28) = 0;
      *puVar1 = 0;
      return local_38;
    }
    uVar3 = FUN_0069e060();
    switch(uVar3) {
    case 0:
      local_28 = 2;
      iVar2 = FUN_0069fa80(param_1,1);
      if (iVar2 != 1) goto LAB_006a0146;
      *(undefined4 *)(puVar1 + 0x14) = local_24;
      break;
    case 0xe:
      local_28 = 2;
      iVar2 = FUN_0069fa80(param_1,1);
      if (iVar2 != 1) goto LAB_006a0146;
      *(undefined4 *)(puVar1 + 0x18) = local_24;
      break;
    case 0x14:
      goto switchD_006a010b_caseD_14;
    case 0x1a:
      local_28 = 2;
      local_20 = 2;
      local_18 = 2;
      local_10 = 2;
      iVar2 = FUN_0069fa80(param_1,4);
      if (iVar2 != 4) goto LAB_006a0146;
      *(undefined4 *)(puVar1 + 4) = local_24;
      *(undefined4 *)(puVar1 + 8) = local_1c;
      *(undefined4 *)(puVar1 + 0xc) = local_14;
      *(undefined4 *)(puVar1 + 0x10) = local_c;
      break;
    case 0x1e:
      local_28 = 4;
      iVar2 = FUN_0069fa80(param_1,1);
      if (iVar2 != 1) goto LAB_006a0146;
      *puVar1 = (undefined1)local_24;
      break;
    case 0x28:
      iVar2 = FUN_0069fbd0(&local_34);
      if (iVar2 != 0) goto LAB_006a0146;
      if ((local_34 != 0) && (local_34 != 2)) {
        local_38 = 7;
        goto LAB_006a0146;
      }
      break;
    case 0x2d:
      local_30 = 0;
      iVar2 = FUN_0069fbd0(&local_30);
      if (iVar2 != 0) goto LAB_006a0146;
      local_38 = FUN_0069e140(param_1,0x11);
      if (local_38 != 0) {
        return local_38;
      }
      break;
    case 0x31:
      local_38 = FUN_0069ff90();
      if (local_38 == 0) {
switchD_006a010b_caseD_14:
        return 0;
      }
      goto LAB_006a0146;
    }
    iVar2 = FUN_0069dfd0(1,&local_3c);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
006a0060 : PUSH EBP
006a0061 : MOV EBP,ESP
006a0063 : AND ESP,0xfffffff8
006a0066 : SUB ESP,0x3c
006a0069 : PUSH EBX
006a006a : PUSH ESI
006a006b : MOV ESI,dword ptr [EBP + 0x8]
006a006e : MOV EBX,dword ptr [ESI + 0x8]
006a0071 : MOV EAX,dword ptr [ESI]
006a0073 : PUSH EDI
006a0074 : MOV dword ptr [ESP + 0x24],EAX
006a0078 : MOV dword ptr [ESP + 0x10],EBX
006a007c : MOV dword ptr [ESP + 0x18],0xa0
006a0084 : MOV dword ptr [ESP + 0x1c],0x0
006a008c : TEST EBX,EBX
006a008e : JNZ 0x006a009a
006a0090 : LEA EAX,[EBX + 0x6]
006a0093 : POP EDI
006a0094 : POP ESI
006a0095 : POP EBX
006a0096 : MOV ESP,EBP
006a0098 : POP EBP
006a0099 : RET
006a009a : LEA ECX,[ESP + 0x14]
006a009e : PUSH ECX
006a009f : PUSH 0x1
006a00a1 : MOV EAX,ESI
006a00a3 : CALL 0x0069dfd0
006a00a8 : ADD ESP,0x8
006a00ab : TEST EAX,EAX
006a00ad : JZ 0x006a02c2
006a00b3 : CMP dword ptr [ESP + 0x14],0x10
006a00b8 : JNZ 0x006a02c2
006a00be : PUSH 0x10
006a00c0 : PUSH 0xbe88c8
006a00c5 : PUSH EAX
006a00c6 : CALL 0x0063abcb
006a00cb : ADD ESP,0xc
006a00ce : TEST EAX,EAX
006a00d0 : JNZ 0x006a02c2
006a00d6 : LEA EDX,[ESP + 0x14]
006a00da : PUSH EDX
006a00db : PUSH 0x1
006a00dd : MOV EAX,ESI
006a00df : CALL 0x0069dfd0
006a00e4 : ADD ESP,0x8
006a00e7 : TEST EAX,EAX
006a00e9 : JZ 0x006a0146
006a00eb : JMP 0x006a00f0
006a00f0 : MOV EBX,dword ptr [ESP + 0x14]
006a00f4 : MOV EDI,EAX
006a00f6 : CALL 0x0069e060
006a00fb : CMP EAX,0x31
006a00fe : JA 0x006a028a
006a0104 : MOVZX EAX,byte ptr [EAX + 0x6a02f4]
006a010b : JMP dword ptr [EAX*0x4 + 0x6a02d0]
006a0112 : LEA ECX,[ESP + 0x1c]
006a0116 : PUSH ECX
006a0117 : MOV EAX,ESI
006a0119 : CALL 0x0069fbd0
006a011e : ADD ESP,0x4
006a0121 : TEST EAX,EAX
006a0123 : JNZ 0x006a0142
006a0125 : MOV EAX,dword ptr [ESP + 0x1c]
006a0129 : TEST EAX,EAX
006a012b : JZ 0x006a028a
006a0131 : CMP EAX,0x2
006a0134 : JZ 0x006a028a
006a013a : MOV dword ptr [ESP + 0x18],0x7
006a0142 : MOV EBX,dword ptr [ESP + 0x10]
006a0146 : MOV EAX,dword ptr [EBX + 0x1c]
006a0149 : MOV ESI,dword ptr [ESP + 0x24]
006a014d : PUSH EAX
006a014e : PUSH ESI
006a014f : CALL 0x00687f30
006a0154 : MOV ECX,dword ptr [EBX + 0x24]
006a0157 : PUSH ECX
006a0158 : XOR EDI,EDI
006a015a : PUSH ESI
006a015b : MOV dword ptr [EBX + 0x1c],EDI
006a015e : MOV dword ptr [EBX + 0x20],EDI
006a0161 : CALL 0x00687f30
006a0166 : MOV EAX,dword ptr [ESP + 0x28]
006a016a : ADD ESP,0x10
006a016d : MOV dword ptr [EBX + 0x24],EDI
006a0170 : MOV dword ptr [EBX + 0x28],EDI
006a0173 : MOV byte ptr [EBX],0x0
006a0176 : POP EDI
006a0177 : POP ESI
006a0178 : POP EBX
006a0179 : MOV ESP,EBP
006a017b : POP EBP
006a017c : RET
006a017d : PUSH 0x1
006a017f : PUSH ESI
006a0180 : LEA ECX,[ESP + 0x30]
006a0184 : MOV dword ptr [ESP + 0x30],0x4
006a018c : CALL 0x0069fa80
006a0191 : ADD ESP,0x8
006a0194 : CMP EAX,0x1
006a0197 : JNZ 0x006a0142
006a0199 : MOV DL,byte ptr [ESP + 0x2c]
006a019d : MOV EAX,dword ptr [ESP + 0x10]
006a01a1 : MOV byte ptr [EAX],DL
006a01a3 : JMP 0x006a028a
006a01a8 : MOV EAX,0x2
006a01ad : PUSH 0x4
006a01af : PUSH ESI
006a01b0 : LEA ECX,[ESP + 0x30]
006a01b4 : MOV dword ptr [ESP + 0x30],EAX
006a01b8 : MOV dword ptr [ESP + 0x38],EAX
006a01bc : MOV dword ptr [ESP + 0x40],EAX
006a01c0 : MOV dword ptr [ESP + 0x48],EAX
006a01c4 : CALL 0x0069fa80
006a01c9 : ADD ESP,0x8
006a01cc : CMP EAX,0x4
006a01cf : JNZ 0x006a0142
006a01d5 : MOV EAX,dword ptr [ESP + 0x10]
006a01d9 : MOV ECX,dword ptr [ESP + 0x2c]
006a01dd : MOV EDX,dword ptr [ESP + 0x34]
006a01e1 : MOV dword ptr [EAX + 0x4],ECX
006a01e4 : MOV ECX,dword ptr [ESP + 0x3c]
006a01e8 : MOV dword ptr [EAX + 0x8],EDX
006a01eb : MOV EDX,dword ptr [ESP + 0x44]
006a01ef : MOV dword ptr [EAX + 0xc],ECX
006a01f2 : MOV dword ptr [EAX + 0x10],EDX
006a01f5 : JMP 0x006a028a
006a01fa : PUSH 0x1
006a01fc : PUSH ESI
006a01fd : LEA ECX,[ESP + 0x30]
006a0201 : MOV dword ptr [ESP + 0x30],0x2
006a0209 : CALL 0x0069fa80
006a020e : ADD ESP,0x8
006a0211 : CMP EAX,0x1
006a0214 : JNZ 0x006a0142
006a021a : MOV EAX,dword ptr [ESP + 0x2c]
006a021e : MOV ECX,dword ptr [ESP + 0x10]
006a0222 : MOV dword ptr [ECX + 0x14],EAX
006a0225 : JMP 0x006a028a
006a0227 : PUSH 0x1
006a0229 : PUSH ESI
006a022a : LEA ECX,[ESP + 0x30]
006a022e : MOV dword ptr [ESP + 0x30],0x2
006a0236 : CALL 0x0069fa80
006a023b : ADD ESP,0x8
006a023e : CMP EAX,0x1
006a0241 : JNZ 0x006a0142
006a0247 : MOV EDX,dword ptr [ESP + 0x2c]
006a024b : MOV EAX,dword ptr [ESP + 0x10]
006a024f : MOV dword ptr [EAX + 0x18],EDX
006a0252 : JMP 0x006a028a
006a0254 : LEA ECX,[ESP + 0x20]
006a0258 : PUSH ECX
006a0259 : MOV EAX,ESI
006a025b : MOV dword ptr [ESP + 0x24],0x0
006a0263 : CALL 0x0069fbd0
006a0268 : ADD ESP,0x4
006a026b : TEST EAX,EAX
006a026d : JNZ 0x006a0142
006a0273 : MOV EAX,dword ptr [ESP + 0x20]
006a0277 : PUSH 0x11
006a0279 : PUSH ESI
006a027a : CALL 0x0069e140
006a027f : ADD ESP,0x8
006a0282 : MOV dword ptr [ESP + 0x18],EAX
006a0286 : TEST EAX,EAX
006a0288 : JNZ 0x006a02c7
006a028a : LEA EDX,[ESP + 0x14]
006a028e : PUSH EDX
006a028f : PUSH 0x1
006a0291 : MOV EAX,ESI
006a0293 : CALL 0x0069dfd0
006a0298 : ADD ESP,0x8
006a029b : TEST EAX,EAX
006a029d : JNZ 0x006a00f0
006a02a3 : JMP 0x006a0142
006a02a8 : CALL 0x0069ff90
006a02ad : MOV dword ptr [ESP + 0x18],EAX
006a02b1 : TEST EAX,EAX
006a02b3 : JNZ 0x006a0142
006a02b9 : XOR EAX,EAX
006a02bb : POP EDI
006a02bc : POP ESI
006a02bd : POP EBX
006a02be : MOV ESP,EBP
006a02c0 : POP EBP
006a02c1 : RET
006a02c2 : MOV EAX,0x2
006a02c7 : POP EDI
006a02c8 : POP ESI
006a02c9 : POP EBX
006a02ca : MOV ESP,EBP
006a02cc : POP EBP
006a02cd : RET
