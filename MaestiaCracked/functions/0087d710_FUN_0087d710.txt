PROGRAM  : Maestia.exe
FUNCTION : FUN_0087d710
ENTRY    : 0087d710
BODY     : [[0087d710, 0087d8f2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0087d710(void)

{
  int iVar1;
  int iVar2;
  char cVar3;
  int iVar4;
  int *in_ECX;
  undefined4 uVar5;
  int iStack_10;
  int iStack_c;
  
  FUN_0086cd60();
  if ((int *)in_ECX[0xfa] != (int *)0x0) {
    (**(code **)(*(int *)in_ECX[0xfa] + 0x9c))(5);
  }
  cVar3 = *(char *)((int)in_ECX + 0x389);
  if (in_ECX[0x5b4] != 1) {
    if (cVar3 == '\0') {
      *(undefined1 *)(in_ECX + 0x132) = 0;
    }
    else if (cVar3 == '\x05') {
      *(undefined1 *)(in_ECX + 0x132) = 1;
    }
    if (in_ECX[0x5b4] == 3) {
      (**(code **)(*in_ECX + 0x188))(9,1,1,1,0,0x3f800000);
      (**(code **)(*in_ECX + 0x254))(1,in_ECX + 1,0);
    }
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,1,0,1);
    goto LAB_0087d8ae;
  }
  if (cVar3 == '\x06') {
    *(undefined1 *)(in_ECX + 0x5b5) = 1;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x456,1,0,1);
    if (in_ECX[0xfa] != 0) {
      uVar5 = 0;
LAB_0087d7ce:
      FUN_007d7070(uVar5);
    }
  }
  else if (cVar3 == '\a') {
    *(undefined1 *)(in_ECX + 0x5b5) = 0;
    (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
              (in_ECX + 0x1b6,1,0,1);
    if (in_ECX[0xfa] != 0) {
      uVar5 = 1;
      goto LAB_0087d7ce;
    }
  }
  iVar1 = DAT_00d7c54c;
  iStack_10 = in_ECX[2];
  FUN_004437f0(&iStack_10);
  if (iStack_c == *(int *)(iVar1 + 0x44)) {
    return;
  }
  if (*(int *)(iStack_c + 0x10) == 0) {
    return;
  }
  if (*(int *)(*(int *)(DAT_017251ac + 0x1a4) + 0xf0) != 0) {
    FUN_007e1070(*(undefined4 *)(*(int *)(iStack_c + 0x10) + 0x1b4),(char)in_ECX[0x5b5]);
  }
LAB_0087d8ae:
  if (in_ECX[0x5b4] == 0) {
    iVar4 = *(int *)(*DAT_00da9894 + 0x224);
    iVar1 = in_ECX[0x6a];
    iVar2 = in_ECX[0x6b];
    *(int *)(iVar4 + 0x70) = in_ECX[0x69];
    *(int *)(iVar4 + 0x74) = iVar1;
    *(int *)(iVar4 + 0x78) = iVar2;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0087d710 : PUSH EBP
0087d711 : MOV EBP,ESP
0087d713 : AND ESP,0xfffffff8
0087d716 : SUB ESP,0x8
0087d719 : PUSH ESI
0087d71a : PUSH EDI
0087d71b : MOV ESI,ECX
0087d71d : CALL 0x0086cd60
0087d722 : MOV ECX,dword ptr [ESI + 0x3e8]
0087d728 : TEST ECX,ECX
0087d72a : JZ 0x0087d738
0087d72c : MOV EAX,dword ptr [ECX]
0087d72e : MOV EDX,dword ptr [EAX + 0x9c]
0087d734 : PUSH 0x5
0087d736 : CALL EDX
0087d738 : MOV ECX,dword ptr [ESI + 0x16d0]
0087d73e : MOV AL,byte ptr [ESI + 0x389]
0087d744 : CMP ECX,0x1
0087d747 : JNZ 0x0087d839
0087d74d : CMP AL,0x6
0087d74f : JNZ 0x0087d78e
0087d751 : MOV EAX,dword ptr [ESI + 0x138]
0087d757 : MOV byte ptr [ESI + 0x16d4],CL
0087d75d : MOV ECX,dword ptr [EAX + 0x4]
0087d760 : MOV EDX,dword ptr [ECX + ESI*0x1 + 0x138]
0087d767 : MOV EDX,dword ptr [EDX + 0x10]
0087d76a : PUSH 0x1
0087d76c : PUSH 0x0
0087d76e : LEA ECX,[ECX + ESI*0x1 + 0x138]
0087d775 : PUSH 0x1
0087d777 : LEA EAX,[ESI + 0x1158]
0087d77d : PUSH EAX
0087d77e : CALL EDX
0087d780 : MOV ECX,dword ptr [ESI + 0x3e8]
0087d786 : TEST ECX,ECX
0087d788 : JZ 0x0087d7d3
0087d78a : PUSH 0x0
0087d78c : JMP 0x0087d7ce
0087d78e : CMP AL,0x7
0087d790 : JNZ 0x0087d7d3
0087d792 : MOV EAX,dword ptr [ESI + 0x138]
0087d798 : MOV byte ptr [ESI + 0x16d4],0x0
0087d79f : MOV ECX,dword ptr [EAX + 0x4]
0087d7a2 : MOV EDX,dword ptr [ECX + ESI*0x1 + 0x138]
0087d7a9 : MOV EDX,dword ptr [EDX + 0x10]
0087d7ac : PUSH 0x1
0087d7ae : PUSH 0x0
0087d7b0 : LEA ECX,[ECX + ESI*0x1 + 0x138]
0087d7b7 : PUSH 0x1
0087d7b9 : LEA EAX,[ESI + 0x6d8]
0087d7bf : PUSH EAX
0087d7c0 : CALL EDX
0087d7c2 : MOV ECX,dword ptr [ESI + 0x3e8]
0087d7c8 : TEST ECX,ECX
0087d7ca : JZ 0x0087d7d3
0087d7cc : PUSH 0x1
0087d7ce : CALL 0x007d7070
0087d7d3 : MOV EAX,dword ptr [ESI + 0x8]
0087d7d6 : MOV EDI,dword ptr [0x00d7c54c]
0087d7dc : LEA ECX,[ESP + 0x8]
0087d7e0 : MOV dword ptr [ESP + 0x8],EAX
0087d7e4 : PUSH ECX
0087d7e5 : LEA ECX,[EDI + 0x40]
0087d7e8 : LEA EAX,[ESP + 0x10]
0087d7ec : CALL 0x004437f0
0087d7f1 : MOV EAX,dword ptr [ESP + 0xc]
0087d7f5 : CMP EAX,dword ptr [EDI + 0x44]
0087d7f8 : JZ 0x0087d8ed
0087d7fe : MOV EAX,dword ptr [EAX + 0x10]
0087d801 : TEST EAX,EAX
0087d803 : JZ 0x0087d8ed
0087d809 : MOV EDX,dword ptr [0x017251ac]
0087d80f : MOV ECX,dword ptr [EDX + 0x1a4]
0087d815 : MOV EDI,dword ptr [ECX + 0xf0]
0087d81b : TEST EDI,EDI
0087d81d : JZ 0x0087d8ae
0087d823 : MOVZX EDX,byte ptr [ESI + 0x16d4]
0087d82a : MOV EAX,dword ptr [EAX + 0x1b4]
0087d830 : PUSH EDX
0087d831 : PUSH EAX
0087d832 : CALL 0x007e1070
0087d837 : JMP 0x0087d8ae
0087d839 : TEST AL,AL
0087d83b : JNZ 0x0087d845
0087d83d : MOV byte ptr [ESI + 0x4c8],AL
0087d843 : JMP 0x0087d850
0087d845 : CMP AL,0x5
0087d847 : JNZ 0x0087d850
0087d849 : MOV byte ptr [ESI + 0x4c8],0x1
0087d850 : CMP ECX,0x3
0087d853 : JNZ 0x0087d885
0087d855 : FLD1
0087d857 : MOV EDX,dword ptr [ESI]
0087d859 : MOV EAX,dword ptr [EDX + 0x188]
0087d85f : PUSH ECX
0087d860 : FSTP float ptr [ESP]
0087d863 : PUSH 0x0
0087d865 : PUSH 0x1
0087d867 : PUSH 0x1
0087d869 : PUSH 0x1
0087d86b : PUSH 0x9
0087d86d : MOV ECX,ESI
0087d86f : CALL EAX
0087d871 : MOV EDX,dword ptr [ESI]
0087d873 : MOV EDX,dword ptr [EDX + 0x254]
0087d879 : PUSH 0x0
0087d87b : LEA EAX,[ESI + 0x4]
0087d87e : PUSH EAX
0087d87f : PUSH 0x1
0087d881 : MOV ECX,ESI
0087d883 : CALL EDX
0087d885 : MOV EAX,dword ptr [ESI + 0x138]
0087d88b : MOV ECX,dword ptr [EAX + 0x4]
0087d88e : MOV EDX,dword ptr [ECX + ESI*0x1 + 0x138]
0087d895 : MOV EDX,dword ptr [EDX + 0x10]
0087d898 : PUSH 0x1
0087d89a : PUSH 0x0
0087d89c : LEA ECX,[ECX + ESI*0x1 + 0x138]
0087d8a3 : PUSH 0x1
0087d8a5 : LEA EAX,[ESI + 0x6d8]
0087d8ab : PUSH EAX
0087d8ac : CALL EDX
0087d8ae : CMP dword ptr [ESI + 0x16d0],0x0
0087d8b5 : JNZ 0x0087d8ed
0087d8b7 : MOV EAX,[0x00da9894]
0087d8bc : MOV ECX,dword ptr [EAX]
0087d8be : MOV EAX,dword ptr [ECX + 0x224]
0087d8c4 : MOVSS XMM0,dword ptr [ESI + 0x1a4]
0087d8cc : MOVSS XMM1,dword ptr [ESI + 0x1a8]
0087d8d4 : MOVSS XMM2,dword ptr [ESI + 0x1ac]
0087d8dc : ADD EAX,0x70
0087d8df : MOVSS dword ptr [EAX],XMM0
0087d8e3 : MOVSS dword ptr [EAX + 0x4],XMM1
0087d8e8 : MOVSS dword ptr [EAX + 0x8],XMM2
0087d8ed : POP EDI
0087d8ee : POP ESI
0087d8ef : MOV ESP,EBP
0087d8f1 : POP EBP
0087d8f2 : RET
