PROGRAM  : Maestia.exe
FUNCTION : FUN_0078b400
ENTRY    : 0078b400
BODY     : [[0078b400, 0078b503]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0078b400(void *param_1)

{
  int iVar1;
  undefined4 uVar2;
  int in_ECX;
  int *piVar3;
  int unaff_EDI;
  wchar_t *pwVar4;
  undefined4 uVar5;
  uint local_18;
  void *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1952e;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = (void *)0x0;
  iVar1 = (**(code **)(**(int **)(unaff_EDI + 0x1c) + 0x2c))
                    (*(int **)(unaff_EDI + 0x1c),0,0,&local_14,0,
                     DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (iVar1 < 0) {
    uVar2 = FUN_00404750(L"[AvaKnifeTraceMgr::updateVB] Lock Fail(%d)",iVar1);
    local_8 = 1;
    piVar3 = (int *)*DAT_00da98e8;
    if (piVar3 == (int *)0x0) goto LAB_0078b4cc;
    uVar5 = 0x6d;
    pwVar4 = L"AvaLib::AvaKnifeTraceMgr::updateVB";
  }
  else {
    _memcpy(local_14,param_1,in_ECX * 0x14);
    iVar1 = (**(code **)(**(int **)(unaff_EDI + 0x1c) + 0x30))(*(int **)(unaff_EDI + 0x1c));
    if (-1 < iVar1) {
      ExceptionList = local_10;
      return;
    }
    uVar2 = FUN_00404750(L"[AvaKnifeTraceMgr::updateVB] Unlock Fail(%d)",iVar1);
    local_8 = 0;
    piVar3 = (int *)*DAT_00da98e8;
    if (piVar3 == (int *)0x0) goto LAB_0078b4cc;
    uVar5 = 0x68;
    pwVar4 = L"AvaLib::AvaKnifeTraceMgr::updateVB";
  }
  (**(code **)(*piVar3 + 0x14))(pwVar4,uVar5,uVar2);
LAB_0078b4cc:
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    ExceptionList = local_10;
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0078b400 : PUSH EBP
0078b401 : MOV EBP,ESP
0078b403 : PUSH -0x1
0078b405 : PUSH 0xb1952e
0078b40a : MOV EAX,FS:[0x0]
0078b410 : PUSH EAX
0078b411 : SUB ESP,0x20
0078b414 : PUSH EBX
0078b415 : PUSH ESI
0078b416 : MOV EAX,[0x00d66fa0]
0078b41b : XOR EAX,EBP
0078b41d : PUSH EAX
0078b41e : LEA EAX,[EBP + -0xc]
0078b421 : MOV FS:[0x0],EAX
0078b427 : MOV ESI,ECX
0078b429 : MOV EAX,dword ptr [EDI + 0x1c]
0078b42c : XOR EBX,EBX
0078b42e : PUSH EBX
0078b42f : LEA EDX,[EBP + -0x10]
0078b432 : PUSH EDX
0078b433 : PUSH EBX
0078b434 : MOV dword ptr [EBP + -0x10],EBX
0078b437 : MOV ECX,dword ptr [EAX]
0078b439 : PUSH EBX
0078b43a : PUSH EAX
0078b43b : MOV EAX,dword ptr [ECX + 0x2c]
0078b43e : CALL EAX
0078b440 : CMP EAX,EBX
0078b442 : JL 0x0078b499
0078b444 : MOV EDX,dword ptr [EBP + 0x8]
0078b447 : MOV EAX,dword ptr [EBP + -0x10]
0078b44a : LEA ECX,[ESI + ESI*0x4]
0078b44d : ADD ECX,ECX
0078b44f : ADD ECX,ECX
0078b451 : PUSH ECX
0078b452 : PUSH EDX
0078b453 : PUSH EAX
0078b454 : CALL 0x0063ae40
0078b459 : MOV EAX,dword ptr [EDI + 0x1c]
0078b45c : MOV ECX,dword ptr [EAX]
0078b45e : MOV EDX,dword ptr [ECX + 0x30]
0078b461 : ADD ESP,0xc
0078b464 : PUSH EAX
0078b465 : CALL EDX
0078b467 : CMP EAX,EBX
0078b469 : JGE 0x0078b4f1
0078b46f : PUSH EAX
0078b470 : PUSH 0xc132c0
0078b475 : LEA ESI,[EBP + -0x2c]
0078b478 : CALL 0x00404750
0078b47d : ADD ESP,0x8
0078b480 : MOV dword ptr [EBP + -0x4],EBX
0078b483 : MOV ECX,dword ptr [0x00da98e8]
0078b489 : MOV ECX,dword ptr [ECX]
0078b48b : CMP ECX,EBX
0078b48d : JZ 0x0078b4cc
0078b48f : PUSH EAX
0078b490 : PUSH 0x68
0078b492 : PUSH 0xc13320
0078b497 : JMP 0x0078b4c5
0078b499 : PUSH EAX
0078b49a : PUSH 0xc13368
0078b49f : LEA ESI,[EBP + -0x2c]
0078b4a2 : CALL 0x00404750
0078b4a7 : ADD ESP,0x8
0078b4aa : MOV dword ptr [EBP + -0x4],0x1
0078b4b1 : MOV EDX,dword ptr [0x00da98e8]
0078b4b7 : MOV ECX,dword ptr [EDX]
0078b4b9 : CMP ECX,EBX
0078b4bb : JZ 0x0078b4cc
0078b4bd : PUSH EAX
0078b4be : PUSH 0x6d
0078b4c0 : PUSH 0xc133c0
0078b4c5 : MOV EDX,dword ptr [ECX]
0078b4c7 : MOV EAX,dword ptr [EDX + 0x14]
0078b4ca : CALL EAX
0078b4cc : MOV dword ptr [EBP + -0x4],0xffffffff
0078b4d3 : CMP dword ptr [EBP + -0x14],0x8
0078b4d7 : JC 0x0078b4e1
0078b4d9 : MOV ECX,dword ptr [EBP + -0x28]
0078b4dc : CALL 0x006f04e0
0078b4e1 : XOR ECX,ECX
0078b4e3 : MOV word ptr [EBP + -0x28],CX
0078b4e7 : MOV dword ptr [EBP + -0x18],EBX
0078b4ea : MOV dword ptr [EBP + -0x14],0x7
0078b4f1 : MOV ECX,dword ptr [EBP + -0xc]
0078b4f4 : MOV dword ptr FS:[0x0],ECX
0078b4fb : POP ECX
0078b4fc : POP ESI
0078b4fd : POP EBX
0078b4fe : MOV ESP,EBP
0078b500 : POP EBP
0078b501 : RET 0x4
