PROGRAM  : Maestia.exe
FUNCTION : FUN_00a67c70
ENTRY    : 00a67c70
BODY     : [[00a67c70, 00a67daf]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_00a67c70(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 *puVar2;
  int *piVar3;
  undefined4 *in_ECX;
  uint uVar4;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b1b17d;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = (int *)FUN_006f0760(100,".\\Event\\AvaAnimEventCtrl.cpp",0x2a8,0,
                                 DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  local_8 = 0;
  if (local_14 == (int *)0x0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar3 = (int *)FUN_0082b850(local_14);
  }
  local_8 = 0xffffffff;
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  local_14 = piVar3;
  FUN_00406360(&DAT_00c34dd4,0);
  local_8 = 1;
  (**(code **)(*piVar3 + 0x10))(local_30);
  local_8 = 0xffffffff;
  if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_2c = 0;
  local_18 = 7;
  local_1c = 0;
  (**(code **)(*piVar3 + 0x18))(*(undefined1 *)(in_ECX + 0x1d));
  (**(code **)(*piVar3 + 0x14))(param_1,param_2,param_3,param_4);
  (**(code **)(*piVar3 + 0x1c))(*in_ECX);
  iVar1 = in_ECX[0x2e];
  if (iVar1 == 0) {
    uVar4 = 0;
  }
  else {
    uVar4 = in_ECX[0x30] - iVar1 >> 2;
  }
  puVar2 = (undefined4 *)in_ECX[0x2f];
  if ((uint)((int)puVar2 - iVar1 >> 2) < uVar4) {
    *puVar2 = piVar3;
    in_ECX[0x2f] = puVar2 + 1;
  }
  else {
    FUN_0042fe80(in_ECX + 0x2d,puVar2,&local_14);
  }
  ExceptionList = local_10;
  return piVar3;
}



============================================================
DISASSEMBLY
============================================================
00a67c70 : PUSH EBP
00a67c71 : MOV EBP,ESP
00a67c73 : PUSH -0x1
00a67c75 : PUSH 0xb1b17d
00a67c7a : MOV EAX,FS:[0x0]
00a67c80 : PUSH EAX
00a67c81 : SUB ESP,0x24
00a67c84 : PUSH EBX
00a67c85 : PUSH ESI
00a67c86 : PUSH EDI
00a67c87 : MOV EAX,[0x00d66fa0]
00a67c8c : XOR EAX,EBP
00a67c8e : PUSH EAX
00a67c8f : LEA EAX,[EBP + -0xc]
00a67c92 : MOV FS:[0x0],EAX
00a67c98 : MOV EDI,ECX
00a67c9a : XOR EBX,EBX
00a67c9c : PUSH EBX
00a67c9d : PUSH 0x2a8
00a67ca2 : PUSH 0xc35100
00a67ca7 : PUSH 0x64
00a67ca9 : CALL 0x006f0760
00a67cae : ADD ESP,0x10
00a67cb1 : MOV dword ptr [EBP + -0x10],EAX
00a67cb4 : MOV dword ptr [EBP + -0x4],EBX
00a67cb7 : CMP EAX,EBX
00a67cb9 : JZ 0x00a67cc5
00a67cbb : PUSH EAX
00a67cbc : CALL 0x0082b850
00a67cc1 : MOV ESI,EAX
00a67cc3 : JMP 0x00a67cc7
00a67cc5 : XOR ESI,ESI
00a67cc7 : MOV dword ptr [EBP + -0x4],0xffffffff
00a67cce : PUSH EBX
00a67ccf : XOR EAX,EAX
00a67cd1 : PUSH 0xc34dd4
00a67cd6 : LEA ECX,[EBP + -0x2c]
00a67cd9 : MOV dword ptr [EBP + -0x10],ESI
00a67cdc : MOV dword ptr [EBP + -0x14],0x7
00a67ce3 : MOV dword ptr [EBP + -0x18],EBX
00a67ce6 : MOV word ptr [EBP + -0x28],AX
00a67cea : CALL 0x00406360
00a67cef : MOV dword ptr [EBP + -0x4],0x1
00a67cf6 : MOV EDX,dword ptr [ESI]
00a67cf8 : MOV EDX,dword ptr [EDX + 0x10]
00a67cfb : LEA EAX,[EBP + -0x2c]
00a67cfe : PUSH EAX
00a67cff : MOV ECX,ESI
00a67d01 : CALL EDX
00a67d03 : MOV dword ptr [EBP + -0x4],0xffffffff
00a67d0a : CMP dword ptr [EBP + -0x14],0x8
00a67d0e : JC 0x00a67d18
00a67d10 : MOV ECX,dword ptr [EBP + -0x28]
00a67d13 : CALL 0x006f04e0
00a67d18 : MOV EDX,dword ptr [ESI]
00a67d1a : MOV EDX,dword ptr [EDX + 0x18]
00a67d1d : XOR EAX,EAX
00a67d1f : MOV word ptr [EBP + -0x28],AX
00a67d23 : MOVZX EAX,byte ptr [EDI + 0x74]
00a67d27 : PUSH EAX
00a67d28 : MOV ECX,ESI
00a67d2a : MOV dword ptr [EBP + -0x14],0x7
00a67d31 : MOV dword ptr [EBP + -0x18],EBX
00a67d34 : CALL EDX
00a67d36 : MOV ECX,dword ptr [EBP + 0x14]
00a67d39 : MOV EDX,dword ptr [EBP + 0x10]
00a67d3c : MOV EAX,dword ptr [ESI]
00a67d3e : MOV EAX,dword ptr [EAX + 0x14]
00a67d41 : PUSH ECX
00a67d42 : MOV ECX,dword ptr [EBP + 0xc]
00a67d45 : PUSH EDX
00a67d46 : MOV EDX,dword ptr [EBP + 0x8]
00a67d49 : PUSH ECX
00a67d4a : PUSH EDX
00a67d4b : MOV ECX,ESI
00a67d4d : CALL EAX
00a67d4f : MOV EDX,dword ptr [ESI]
00a67d51 : MOV EAX,dword ptr [EDI]
00a67d53 : MOV EDX,dword ptr [EDX + 0x1c]
00a67d56 : PUSH EAX
00a67d57 : MOV ECX,ESI
00a67d59 : CALL EDX
00a67d5b : MOV ECX,dword ptr [EDI + 0xb8]
00a67d61 : LEA EAX,[EDI + 0xb4]
00a67d67 : CMP ECX,EBX
00a67d69 : JNZ 0x00a67d6f
00a67d6b : XOR EDX,EDX
00a67d6d : JMP 0x00a67d77
00a67d6f : MOV EDX,dword ptr [EAX + 0xc]
00a67d72 : SUB EDX,ECX
00a67d74 : SAR EDX,0x2
00a67d77 : MOV EDI,dword ptr [EAX + 0x8]
00a67d7a : MOV EBX,EDI
00a67d7c : SUB EBX,ECX
00a67d7e : SAR EBX,0x2
00a67d81 : CMP EBX,EDX
00a67d83 : JNC 0x00a67d8f
00a67d85 : MOV dword ptr [EDI],ESI
00a67d87 : ADD EDI,0x4
00a67d8a : MOV dword ptr [EAX + 0x8],EDI
00a67d8d : JMP 0x00a67d9a
00a67d8f : LEA ECX,[EBP + -0x10]
00a67d92 : PUSH ECX
00a67d93 : PUSH EDI
00a67d94 : PUSH EAX
00a67d95 : CALL 0x0042fe80
00a67d9a : MOV EAX,ESI
00a67d9c : MOV ECX,dword ptr [EBP + -0xc]
00a67d9f : MOV dword ptr FS:[0x0],ECX
00a67da6 : POP ECX
00a67da7 : POP EDI
00a67da8 : POP ESI
00a67da9 : POP EBX
00a67daa : MOV ESP,EBP
00a67dac : POP EBP
00a67dad : RET 0x10
