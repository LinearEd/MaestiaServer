PROGRAM  : Maestia.exe
FUNCTION : FUN_007c77d0
ENTRY    : 007c77d0
BODY     : [[007c77d0, 007c7a6f]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007c77d0(undefined4 param_1,undefined1 param_2)

{
  code *pcVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  int *in_ECX;
  int *piVar5;
  undefined4 *in_EDX;
  int *piVar6;
  undefined1 local_84 [4];
  int local_80;
  undefined **local_7c;
  int *local_78;
  undefined4 local_74;
  undefined1 local_70 [4];
  undefined2 local_6c;
  undefined4 local_5c;
  uint local_58;
  wchar_t local_54 [32];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b31df4;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  piVar6 = (int *)0x0;
  local_74 = 0;
  local_14 = uVar3;
  uVar4 = FUN_00801fc0(&local_7c,param_1);
  local_8 = 1;
  FUN_0043e530(local_84,uVar4);
  local_8._0_1_ = 3;
  local_7c = &PTR_FUN_00cd4964;
  if (local_78 != (int *)0x0) {
    (**(code **)(*local_78 + 0x30))(uVar3);
    local_78 = (int *)0x0;
  }
  if (local_80 == 0) {
    local_78 = (int *)FUN_006f0760(0x94,".\\resource\\AvaMeshMgr.cpp",0x46,0);
    local_8._0_1_ = 4;
    if (local_78 != (int *)0x0) {
      piVar6 = (int *)FUN_007d1920(local_78);
    }
    local_8._0_1_ = 3;
    local_78 = piVar6;
    if (piVar6 == (int *)0x0) {
      FUN_00406460(L"alloc failed");
      local_8._0_1_ = 5;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaLib::AvaMeshMgr::Load",0x49,local_70);
      }
      local_8._0_1_ = 3;
      if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_58 = 7;
      local_5c = 0;
      local_6c = 0;
      *in_EDX = &PTR_FUN_00cd4964;
      in_EDX[1] = 0;
    }
    else {
      pcVar1 = *(code **)(*piVar6 + 4);
      *(undefined1 *)((int)piVar6 + 0x4a) = param_2;
      cVar2 = (*pcVar1)(param_1);
      if (cVar2 == '\0') {
        (**(code **)*piVar6)(1);
        piVar5 = (int *)0x0;
      }
      else {
        piVar6[0xd] = (int)in_ECX;
        if (((piVar6[0x1b] - piVar6[0x1a] & 0xfffffffcU) != 0) ||
           ((piVar6[0x1f] - piVar6[0x1e] & 0xfffffffcU) != 0)) {
          FUN_00405660(piVar6 + 1);
          local_8._0_1_ = 6;
          __itow_s(DAT_017251e4,local_54,0x20,10);
          FUN_00404980(local_70);
          FUN_00404980(local_70);
          FUN_00405eb0(local_70,0,0xffffffff);
          DAT_017251e4 = DAT_017251e4 + 1;
          local_8._0_1_ = 3;
          FUN_00406560();
        }
        cVar2 = (**(code **)(*in_ECX + 0xc))(piVar6);
        piVar5 = local_78;
        if (cVar2 == '\0') {
          FUN_00801fc0(&local_7c,piVar6 + 1);
          local_8._0_1_ = 7;
          FUN_00463a60();
          local_8._0_1_ = 3;
          FUN_0045f640();
          piVar6[0xd] = 0;
          (**(code **)*piVar6)(1);
          piVar5 = (int *)0x0;
          if (local_80 != 0) {
            FUN_0043a270();
            local_74 = 1;
            local_8 = (uint)local_8._1_3_ << 8;
            FUN_0043a010();
            goto LAB_007c7a52;
          }
        }
      }
      *in_EDX = &PTR_FUN_00cd4964;
      in_EDX[1] = piVar5;
      if (piVar5 != (int *)0x0) {
        InterlockedIncrement(piVar5 + 0xb);
      }
    }
  }
  else {
    in_EDX[1] = local_80;
    *in_EDX = &PTR_FUN_00cd4964;
    InterlockedIncrement((LONG *)(local_80 + 0x2c));
  }
  local_74 = 1;
  local_8 = (uint)local_8._1_3_ << 8;
  FUN_0043a010();
LAB_007c7a52:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
007c77d0 : PUSH EBP
007c77d1 : MOV EBP,ESP
007c77d3 : PUSH -0x1
007c77d5 : PUSH 0xb31df4
007c77da : MOV EAX,FS:[0x0]
007c77e0 : PUSH EAX
007c77e1 : SUB ESP,0x7c
007c77e4 : MOV EAX,[0x00d66fa0]
007c77e9 : XOR EAX,EBP
007c77eb : MOV dword ptr [EBP + -0x10],EAX
007c77ee : PUSH EBX
007c77ef : PUSH ESI
007c77f0 : PUSH EDI
007c77f1 : PUSH EAX
007c77f2 : LEA EAX,[EBP + -0xc]
007c77f5 : MOV FS:[0x0],EAX
007c77fb : MOV EAX,dword ptr [EBP + 0x8]
007c77fe : PUSH EAX
007c77ff : MOV dword ptr [EBP + 0xffffff78],EAX
007c7805 : LEA EAX,[EBP + -0x78]
007c7808 : MOV EDI,EDX
007c780a : XOR EBX,EBX
007c780c : PUSH EAX
007c780d : MOV ESI,ECX
007c780f : MOV dword ptr [EBP + 0xffffff7c],EDI
007c7815 : MOV dword ptr [EBP + -0x70],EBX
007c7818 : CALL 0x00801fc0
007c781d : MOV dword ptr [EBP + -0x4],0x1
007c7824 : PUSH EAX
007c7825 : LEA ECX,[EBP + -0x80]
007c7828 : PUSH ECX
007c7829 : CALL 0x0043e530
007c782e : MOV byte ptr [EBP + -0x4],0x3
007c7832 : MOV ECX,dword ptr [EBP + -0x74]
007c7835 : MOV dword ptr [EBP + -0x78],0xcd4964
007c783c : CMP ECX,EBX
007c783e : JZ 0x007c784a
007c7840 : MOV EDX,dword ptr [ECX]
007c7842 : MOV EAX,dword ptr [EDX + 0x30]
007c7845 : CALL EAX
007c7847 : MOV dword ptr [EBP + -0x74],EBX
007c784a : MOV EAX,dword ptr [EBP + -0x7c]
007c784d : CMP EAX,EBX
007c784f : JZ 0x007c7869
007c7851 : MOV dword ptr [EDI + 0x4],EAX
007c7854 : ADD EAX,0x2c
007c7857 : PUSH EAX
007c7858 : MOV dword ptr [EDI],0xcd4964
007c785e : CALL dword ptr [0x00b850dc]
007c7864 : JMP 0x007c7a3d
007c7869 : PUSH EBX
007c786a : PUSH 0x46
007c786c : PUSH 0xc1cc68
007c7871 : PUSH 0x94
007c7876 : CALL 0x006f0760
007c787b : ADD ESP,0x10
007c787e : MOV dword ptr [EBP + -0x74],EAX
007c7881 : MOV byte ptr [EBP + -0x4],0x4
007c7885 : CMP EAX,EBX
007c7887 : JZ 0x007c7891
007c7889 : PUSH EAX
007c788a : CALL 0x007d1920
007c788f : MOV EBX,EAX
007c7891 : MOV byte ptr [EBP + -0x4],0x3
007c7895 : MOV dword ptr [EBP + -0x74],EBX
007c7898 : TEST EBX,EBX
007c789a : JNZ 0x007c78fd
007c789c : PUSH 0xc1cca0
007c78a1 : LEA ECX,[EBP + -0x6c]
007c78a4 : CALL 0x00406460
007c78a9 : MOV byte ptr [EBP + -0x4],0x5
007c78ad : MOV ECX,dword ptr [0x00da98e8]
007c78b3 : MOV ECX,dword ptr [ECX]
007c78b5 : XOR ESI,ESI
007c78b7 : CMP ECX,ESI
007c78b9 : JZ 0x007c78cd
007c78bb : MOV EDX,dword ptr [ECX]
007c78bd : MOV EDX,dword ptr [EDX + 0x14]
007c78c0 : LEA EAX,[EBP + -0x6c]
007c78c3 : PUSH EAX
007c78c4 : PUSH 0x49
007c78c6 : PUSH 0xc1ccbc
007c78cb : CALL EDX
007c78cd : MOV byte ptr [EBP + -0x4],0x3
007c78d1 : CMP dword ptr [EBP + -0x54],0x8
007c78d5 : JC 0x007c78df
007c78d7 : MOV ECX,dword ptr [EBP + -0x68]
007c78da : CALL 0x006f04e0
007c78df : XOR EAX,EAX
007c78e1 : MOV dword ptr [EBP + -0x54],0x7
007c78e8 : MOV dword ptr [EBP + -0x58],ESI
007c78eb : MOV word ptr [EBP + -0x68],AX
007c78ef : MOV dword ptr [EDI],0xcd4964
007c78f5 : MOV dword ptr [EDI + 0x4],ESI
007c78f8 : JMP 0x007c7a3d
007c78fd : MOV CL,byte ptr [EBP + 0xc]
007c7900 : MOV EDX,dword ptr [EBX]
007c7902 : MOV EAX,dword ptr [EBP + 0xffffff78]
007c7908 : MOV EDX,dword ptr [EDX + 0x4]
007c790b : MOV byte ptr [EBX + 0x4a],CL
007c790e : PUSH EAX
007c790f : MOV ECX,EBX
007c7911 : CALL EDX
007c7913 : TEST AL,AL
007c7915 : JZ 0x007c7a0d
007c791b : MOV dword ptr [EBX + 0x34],ESI
007c791e : MOV EAX,dword ptr [EBX + 0x6c]
007c7921 : SUB EAX,dword ptr [EBX + 0x68]
007c7924 : TEST EAX,0xfffffffc
007c7929 : JNZ 0x007c7939
007c792b : MOV ECX,dword ptr [EBX + 0x7c]
007c792e : SUB ECX,dword ptr [EBX + 0x78]
007c7931 : TEST ECX,0xfffffffc
007c7937 : JZ 0x007c799b
007c7939 : LEA EAX,[EBX + 0x4]
007c793c : PUSH EAX
007c793d : LEA ECX,[EBP + -0x6c]
007c7940 : CALL 0x00405660
007c7945 : MOV byte ptr [EBP + -0x4],0x6
007c7949 : MOV EAX,[0x017251e4]
007c794e : PUSH 0xa
007c7950 : PUSH 0x20
007c7952 : LEA EDX,[EBP + -0x50]
007c7955 : PUSH EDX
007c7956 : PUSH EAX
007c7957 : CALL 0x0063706a
007c795c : ADD ESP,0x10
007c795f : LEA ECX,[EBP + -0x6c]
007c7962 : PUSH ECX
007c7963 : MOV EDX,0xc1ccf0
007c7968 : CALL 0x00404980
007c796d : LEA EDX,[EBP + -0x6c]
007c7970 : PUSH EDX
007c7971 : LEA EDX,[EBP + -0x50]
007c7974 : CALL 0x00404980
007c7979 : PUSH -0x1
007c797b : PUSH 0x0
007c797d : LEA EAX,[EBP + -0x6c]
007c7980 : PUSH EAX
007c7981 : LEA ECX,[EBX + 0x4]
007c7984 : CALL 0x00405eb0
007c7989 : INC dword ptr [0x017251e4]
007c798f : MOV byte ptr [EBP + -0x4],0x3
007c7993 : LEA ECX,[EBP + -0x6c]
007c7996 : CALL 0x00406560
007c799b : MOV EDX,dword ptr [ESI]
007c799d : MOV EAX,dword ptr [EDX + 0xc]
007c79a0 : PUSH EBX
007c79a1 : MOV ECX,ESI
007c79a3 : CALL EAX
007c79a5 : TEST AL,AL
007c79a7 : JNZ 0x007c7a23
007c79a9 : LEA ECX,[EBX + 0x4]
007c79ac : PUSH ECX
007c79ad : LEA EDX,[EBP + -0x78]
007c79b0 : PUSH EDX
007c79b1 : MOV ECX,ESI
007c79b3 : CALL 0x00801fc0
007c79b8 : MOV byte ptr [EBP + -0x4],0x7
007c79bc : MOV ESI,EAX
007c79be : LEA EDI,[EBP + -0x80]
007c79c1 : CALL 0x00463a60
007c79c6 : MOV byte ptr [EBP + -0x4],0x3
007c79ca : LEA ECX,[EBP + -0x78]
007c79cd : CALL 0x0045f640
007c79d2 : MOV dword ptr [EBX + 0x34],0x0
007c79d9 : MOV EAX,dword ptr [EBX]
007c79db : MOV EDX,dword ptr [EAX]
007c79dd : PUSH 0x1
007c79df : MOV ECX,EBX
007c79e1 : CALL EDX
007c79e3 : MOV EAX,dword ptr [EBP + -0x7c]
007c79e6 : XOR ECX,ECX
007c79e8 : TEST EAX,EAX
007c79ea : JZ 0x007c7a1b
007c79ec : MOV ESI,dword ptr [EBP + 0xffffff7c]
007c79f2 : CALL 0x0043a270
007c79f7 : MOV dword ptr [EBP + -0x70],0x1
007c79fe : MOV byte ptr [EBP + -0x4],0x0
007c7a02 : MOV ECX,EDI
007c7a04 : CALL 0x0043a010
007c7a09 : MOV EAX,ESI
007c7a0b : JMP 0x007c7a52
007c7a0d : MOV EAX,dword ptr [EBX]
007c7a0f : MOV EDX,dword ptr [EAX]
007c7a11 : PUSH 0x1
007c7a13 : MOV ECX,EBX
007c7a15 : CALL EDX
007c7a17 : XOR ECX,ECX
007c7a19 : JMP 0x007c7a26
007c7a1b : MOV EDI,dword ptr [EBP + 0xffffff7c]
007c7a21 : JMP 0x007c7a26
007c7a23 : MOV ECX,dword ptr [EBP + -0x74]
007c7a26 : MOV dword ptr [EDI],0xcd4964
007c7a2c : MOV dword ptr [EDI + 0x4],ECX
007c7a2f : TEST ECX,ECX
007c7a31 : JZ 0x007c7a3d
007c7a33 : ADD ECX,0x2c
007c7a36 : PUSH ECX
007c7a37 : CALL dword ptr [0x00b850dc]
007c7a3d : MOV dword ptr [EBP + -0x70],0x1
007c7a44 : MOV byte ptr [EBP + -0x4],0x0
007c7a48 : LEA ECX,[EBP + -0x80]
007c7a4b : CALL 0x0043a010
007c7a50 : MOV EAX,EDI
007c7a52 : MOV ECX,dword ptr [EBP + -0xc]
007c7a55 : MOV dword ptr FS:[0x0],ECX
007c7a5c : POP ECX
007c7a5d : POP EDI
007c7a5e : POP ESI
007c7a5f : POP EBX
007c7a60 : MOV ECX,dword ptr [EBP + -0x10]
007c7a63 : XOR ECX,EBP
007c7a65 : CALL 0x00633e6b
007c7a6a : MOV ESP,EBP
007c7a6c : POP EBP
007c7a6d : RET 0x8
