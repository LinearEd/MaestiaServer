PROGRAM  : Maestia.exe
FUNCTION : FUN_007684f0
ENTRY    : 007684f0
BODY     : [[007684f0, 0076850c] [00768510, 00768695] [007686a0, 00768714]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Removing unreachable block (ram,0x0076866d) */
/* WARNING: Removing unreachable block (ram,0x00768567) */
/* WARNING: Removing unreachable block (ram,0x007685e6) */
/* WARNING: Removing unreachable block (ram,0x007686fd) */

void FUN_007684f0(void)

{
  int *piVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  int unaff_ESI;
  int iVar5;
  
  iVar4 = *(int *)(unaff_ESI + 0x33c) - *(int *)(unaff_ESI + 0x338) >> 2;
  iVar5 = 0;
  if (0 < iVar4) {
    do {
      if (*(int *)(*(int *)(unaff_ESI + 0x338) + iVar5 * 4) != 0) {
        piVar1 = *(int **)(*(int *)(unaff_ESI + 0x338) + iVar5 * 4);
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 4))(1);
        }
        *(undefined4 *)(*(int *)(unaff_ESI + 0x338) + iVar5 * 4) = 0;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < iVar4);
  }
  if (*(int *)(unaff_ESI + 0x338) != *(int *)(unaff_ESI + 0x33c)) {
    *(int *)(unaff_ESI + 0x33c) = *(int *)(unaff_ESI + 0x338);
  }
  iVar4 = *(int *)(unaff_ESI + 0x34c) - *(int *)(unaff_ESI + 0x348) >> 2;
  if (0 < iVar4) {
    iVar5 = 0;
    do {
      if (*(int *)(*(int *)(unaff_ESI + 0x348) + iVar5 * 4) != 0) {
        puVar2 = *(undefined4 **)(*(int *)(unaff_ESI + 0x348) + iVar5 * 4);
        if (puVar2 != (undefined4 *)0x0) {
          (**(code **)*puVar2)(1);
        }
        *(undefined4 *)(*(int *)(unaff_ESI + 0x348) + iVar5 * 4) = 0;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < iVar4);
  }
  if (*(int *)(unaff_ESI + 0x348) != *(int *)(unaff_ESI + 0x34c)) {
    *(int *)(unaff_ESI + 0x34c) = *(int *)(unaff_ESI + 0x348);
  }
  iVar5 = 0;
  iVar4 = *(int *)(unaff_ESI + 0x31c) - *(int *)(unaff_ESI + 0x318) >> 2;
  if (0 < iVar4) {
    do {
      if (*(int *)(*(int *)(unaff_ESI + 0x318) + iVar5 * 4) != 0) {
        iVar3 = *(int *)(*(int *)(unaff_ESI + 0x318) + iVar5 * 4);
        if (iVar3 != 0) {
          FUN_00487980(iVar3);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        *(undefined4 *)(*(int *)(unaff_ESI + 0x318) + iVar5 * 4) = 0;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < iVar4);
  }
  if (*(int *)(unaff_ESI + 0x318) != *(int *)(unaff_ESI + 0x31c)) {
    *(int *)(unaff_ESI + 0x31c) = *(int *)(unaff_ESI + 0x318);
  }
  iVar5 = 0;
  iVar4 = *(int *)(unaff_ESI + 0x32c) - *(int *)(unaff_ESI + 0x328) >> 2;
  if (0 < iVar4) {
    do {
      if (*(int *)(*(int *)(unaff_ESI + 0x328) + iVar5 * 4) != 0) {
        iVar3 = *(int *)(*(int *)(unaff_ESI + 0x328) + iVar5 * 4);
        if (iVar3 != 0) {
          FUN_00487980(iVar3);
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        *(undefined4 *)(*(int *)(unaff_ESI + 0x328) + iVar5 * 4) = 0;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < iVar4);
  }
  if (*(int *)(unaff_ESI + 0x328) != *(int *)(unaff_ESI + 0x32c)) {
    *(int *)(unaff_ESI + 0x32c) = *(int *)(unaff_ESI + 0x328);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007684f0 : PUSH EBP
007684f1 : MOV EBP,ESP
007684f3 : PUSH ECX
007684f4 : PUSH EBX
007684f5 : MOV EBX,dword ptr [ESI + 0x33c]
007684fb : SUB EBX,dword ptr [ESI + 0x338]
00768501 : PUSH EDI
00768502 : SAR EBX,0x2
00768505 : XOR EDI,EDI
00768507 : TEST EBX,EBX
00768509 : JLE 0x00768542
0076850b : JMP 0x00768510
00768510 : MOV EAX,dword ptr [ESI + 0x338]
00768516 : CMP dword ptr [EAX + EDI*0x4],0x0
0076851a : LEA EAX,[EAX + EDI*0x4]
0076851d : JZ 0x0076853d
0076851f : MOV EAX,dword ptr [EAX]
00768521 : TEST EAX,EAX
00768523 : JZ 0x00768530
00768525 : MOV EDX,dword ptr [EAX]
00768527 : MOV ECX,EAX
00768529 : MOV EAX,dword ptr [EDX + 0x4]
0076852c : PUSH 0x1
0076852e : CALL EAX
00768530 : MOV ECX,dword ptr [ESI + 0x338]
00768536 : MOV dword ptr [ECX + EDI*0x4],0x0
0076853d : INC EDI
0076853e : CMP EDI,EBX
00768540 : JL 0x00768510
00768542 : MOV ECX,dword ptr [ESI + 0x33c]
00768548 : MOV EDI,dword ptr [ESI + 0x338]
0076854e : CMP EDI,ECX
00768550 : JZ 0x00768579
00768552 : MOV EAX,ECX
00768554 : SUB EAX,ECX
00768556 : SAR EAX,0x2
00768559 : LEA EDX,[EAX*0x4 + 0x0]
00768560 : LEA EBX,[EDX + EDI*0x1]
00768563 : TEST EAX,EAX
00768565 : JLE 0x00768573
00768567 : PUSH EDX
00768568 : PUSH ECX
00768569 : PUSH EDX
0076856a : PUSH EDI
0076856b : CALL 0x00634101
00768570 : ADD ESP,0x10
00768573 : MOV dword ptr [ESI + 0x33c],EBX
00768579 : MOV EBX,dword ptr [ESI + 0x34c]
0076857f : SUB EBX,dword ptr [ESI + 0x348]
00768585 : XOR EDI,EDI
00768587 : SAR EBX,0x2
0076858a : TEST EBX,EBX
0076858c : JLE 0x007685c1
0076858e : MOV EDI,EDI
00768590 : MOV EDX,dword ptr [ESI + 0x348]
00768596 : CMP dword ptr [EDX + EDI*0x4],0x0
0076859a : LEA EAX,[EDX + EDI*0x4]
0076859d : JZ 0x007685bc
0076859f : MOV EAX,dword ptr [EAX]
007685a1 : TEST EAX,EAX
007685a3 : JZ 0x007685af
007685a5 : MOV EDX,dword ptr [EAX]
007685a7 : MOV ECX,EAX
007685a9 : MOV EAX,dword ptr [EDX]
007685ab : PUSH 0x1
007685ad : CALL EAX
007685af : MOV ECX,dword ptr [ESI + 0x348]
007685b5 : MOV dword ptr [ECX + EDI*0x4],0x0
007685bc : INC EDI
007685bd : CMP EDI,EBX
007685bf : JL 0x00768590
007685c1 : MOV ECX,dword ptr [ESI + 0x34c]
007685c7 : MOV EDI,dword ptr [ESI + 0x348]
007685cd : CMP EDI,ECX
007685cf : JZ 0x007685f8
007685d1 : MOV EAX,ECX
007685d3 : SUB EAX,ECX
007685d5 : SAR EAX,0x2
007685d8 : LEA EDX,[EAX*0x4 + 0x0]
007685df : LEA EBX,[EDX + EDI*0x1]
007685e2 : TEST EAX,EAX
007685e4 : JLE 0x007685f2
007685e6 : PUSH EDX
007685e7 : PUSH ECX
007685e8 : PUSH EDX
007685e9 : PUSH EDI
007685ea : CALL 0x00634101
007685ef : ADD ESP,0x10
007685f2 : MOV dword ptr [ESI + 0x34c],EBX
007685f8 : MOV EBX,dword ptr [ESI + 0x31c]
007685fe : SUB EBX,dword ptr [ESI + 0x318]
00768604 : XOR EDI,EDI
00768606 : SAR EBX,0x2
00768609 : TEST EBX,EBX
0076860b : JLE 0x00768648
0076860d : LEA ECX,[ECX]
00768610 : MOV EDX,dword ptr [ESI + 0x318]
00768616 : CMP dword ptr [EDX + EDI*0x4],0x0
0076861a : LEA EAX,[EDX + EDI*0x4]
0076861d : JZ 0x00768643
0076861f : MOV EAX,dword ptr [EAX]
00768621 : MOV dword ptr [EBP + -0x4],EAX
00768624 : TEST EAX,EAX
00768626 : JZ 0x00768636
00768628 : PUSH EAX
00768629 : CALL 0x00487980
0076862e : MOV ECX,dword ptr [EBP + -0x4]
00768631 : CALL 0x006f04e0
00768636 : MOV EAX,dword ptr [ESI + 0x318]
0076863c : MOV dword ptr [EAX + EDI*0x4],0x0
00768643 : INC EDI
00768644 : CMP EDI,EBX
00768646 : JL 0x00768610
00768648 : MOV ECX,dword ptr [ESI + 0x31c]
0076864e : MOV EDI,dword ptr [ESI + 0x318]
00768654 : CMP EDI,ECX
00768656 : JZ 0x0076867f
00768658 : MOV EAX,ECX
0076865a : SUB EAX,ECX
0076865c : SAR EAX,0x2
0076865f : LEA EDX,[EAX*0x4 + 0x0]
00768666 : LEA EBX,[EDX + EDI*0x1]
00768669 : TEST EAX,EAX
0076866b : JLE 0x00768679
0076866d : PUSH EDX
0076866e : PUSH ECX
0076866f : PUSH EDX
00768670 : PUSH EDI
00768671 : CALL 0x00634101
00768676 : ADD ESP,0x10
00768679 : MOV dword ptr [ESI + 0x31c],EBX
0076867f : MOV EBX,dword ptr [ESI + 0x32c]
00768685 : SUB EBX,dword ptr [ESI + 0x328]
0076868b : XOR EDI,EDI
0076868d : SAR EBX,0x2
00768690 : TEST EBX,EBX
00768692 : JLE 0x007686d8
00768694 : JMP 0x007686a0
007686a0 : MOV ECX,dword ptr [ESI + 0x328]
007686a6 : CMP dword ptr [ECX + EDI*0x4],0x0
007686aa : LEA EAX,[ECX + EDI*0x4]
007686ad : JZ 0x007686d3
007686af : MOV EAX,dword ptr [EAX]
007686b1 : MOV dword ptr [EBP + -0x4],EAX
007686b4 : TEST EAX,EAX
007686b6 : JZ 0x007686c6
007686b8 : PUSH EAX
007686b9 : CALL 0x00487980
007686be : MOV ECX,dword ptr [EBP + -0x4]
007686c1 : CALL 0x006f04e0
007686c6 : MOV EDX,dword ptr [ESI + 0x328]
007686cc : MOV dword ptr [EDX + EDI*0x4],0x0
007686d3 : INC EDI
007686d4 : CMP EDI,EBX
007686d6 : JL 0x007686a0
007686d8 : MOV ECX,dword ptr [ESI + 0x32c]
007686de : MOV EDI,dword ptr [ESI + 0x328]
007686e4 : CMP EDI,ECX
007686e6 : JZ 0x0076870f
007686e8 : MOV EAX,ECX
007686ea : SUB EAX,ECX
007686ec : SAR EAX,0x2
007686ef : LEA EDX,[EAX*0x4 + 0x0]
007686f6 : LEA EBX,[EDX + EDI*0x1]
007686f9 : TEST EAX,EAX
007686fb : JLE 0x00768709
007686fd : PUSH EDX
007686fe : PUSH ECX
007686ff : PUSH EDX
00768700 : PUSH EDI
00768701 : CALL 0x00634101
00768706 : ADD ESP,0x10
00768709 : MOV dword ptr [ESI + 0x32c],EBX
0076870f : POP EDI
00768710 : POP EBX
00768711 : MOV ESP,EBP
00768713 : POP EBP
00768714 : RET
