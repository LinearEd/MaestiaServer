PROGRAM  : Maestia.exe
FUNCTION : FUN_006d9d90
ENTRY    : 006d9d90
BODY     : [[006d9d90, 006d9dcc] [006d9dd0, 006d9ecc] [006d9ed0, 006d9fc4]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_006d9d90(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  code *pcVar4;
  int iVar5;
  char cVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  undefined4 *puVar12;
  int iVar13;
  uint uVar14;
  int iStack_28;
  int *piStack_24;
  int iStack_1c;
  int iStack_18;
  int iStack_14;
  
  iVar1 = *(int *)(param_1 + 0x11c);
  iVar2 = *(int *)(param_1 + 0x188);
  iVar7 = *(int *)(iVar2 + 0x18);
  uVar10 = *(int *)(param_1 + 0x138) - 1;
  if (iVar7 < *(int *)(iVar2 + 0x1c)) {
    do {
      for (uVar14 = *(uint *)(iVar2 + 0x14); uVar14 <= uVar10; uVar14 = uVar14 + 1) {
        FUN_006d9620(*(undefined4 *)(iVar2 + 0x20),*(int *)(param_1 + 0x140) << 7);
        cVar6 = (**(code **)(*(int *)(param_1 + 0x198) + 4))(param_1,iVar2 + 0x20);
        if (cVar6 == '\0') {
          *(uint *)(iVar2 + 0x14) = uVar14;
          *(int *)(iVar2 + 0x18) = iVar7;
          return 0;
        }
        iVar8 = 0;
        iStack_28 = 0;
        iStack_14 = 0;
        if (0 < *(int *)(param_1 + 0x124)) {
          piStack_24 = (int *)(param_1 + 0x128);
          do {
            iVar3 = *piStack_24;
            if (*(char *)(iVar3 + 0x30) == '\0') {
              iVar8 = iVar8 + *(int *)(iVar3 + 0x3c);
              iStack_28 = iVar8;
            }
            else {
              iVar11 = *(int *)(iVar3 + 4) * 4;
              pcVar4 = *(code **)(*(int *)(param_1 + 0x19c) + 4 + iVar11);
              if (uVar14 < uVar10) {
                iVar9 = *(int *)(iVar3 + 0x34);
              }
              else {
                iVar9 = *(int *)(iVar3 + 0x44);
              }
              iVar5 = *(int *)(iVar3 + 0x40);
              iVar11 = *(int *)(iVar11 + param_2) + *(int *)(iVar3 + 0x24) * iVar7 * 4;
              iStack_18 = 0;
              if (0 < *(int *)(iVar3 + 0x38)) {
                do {
                  if (((*(uint *)(param_1 + 0x80) < iVar1 - 1U) ||
                      (iVar7 + iStack_18 < *(int *)(iVar3 + 0x48))) && (0 < iVar9)) {
                    puVar12 = (undefined4 *)(iVar2 + 0x20 + iVar8 * 4);
                    iVar13 = iVar5 * uVar14;
                    iStack_1c = iVar9;
                    do {
                      (*pcVar4)(param_1,iVar3,*puVar12,iVar11,iVar13);
                      iVar13 = iVar13 + *(int *)(iVar3 + 0x24);
                      puVar12 = puVar12 + 1;
                      iStack_1c = iStack_1c + -1;
                      iVar8 = iStack_28;
                    } while (iStack_1c != 0);
                  }
                  iVar8 = iVar8 + *(int *)(iVar3 + 0x34);
                  iStack_18 = iStack_18 + 1;
                  iVar11 = iVar11 + *(int *)(iVar3 + 0x24) * 4;
                  iStack_28 = iVar8;
                } while (iStack_18 < *(int *)(iVar3 + 0x38));
              }
            }
            piStack_24 = piStack_24 + 1;
            iStack_14 = iStack_14 + 1;
          } while (iStack_14 < *(int *)(param_1 + 0x124));
        }
      }
      iVar7 = iVar7 + 1;
      *(undefined4 *)(iVar2 + 0x14) = 0;
    } while (iVar7 < *(int *)(iVar2 + 0x1c));
  }
  *(int *)(param_1 + 0x80) = *(int *)(param_1 + 0x80) + 1;
  *(int *)(param_1 + 0x88) = *(int *)(param_1 + 0x88) + 1;
  if (*(uint *)(param_1 + 0x80) < *(uint *)(param_1 + 0x11c)) {
    FUN_006d9d20();
    return 3;
  }
  (**(code **)(*(int *)(param_1 + 400) + 0xc))(param_1);
  return 4;
}



============================================================
DISASSEMBLY
============================================================
006d9d90 : SUB ESP,0x34
006d9d93 : PUSH EBX
006d9d94 : PUSH EBP
006d9d95 : MOV EBP,dword ptr [ESP + 0x40]
006d9d99 : MOV EAX,dword ptr [EBP + 0x11c]
006d9d9f : MOV EBX,dword ptr [EBP + 0x138]
006d9da5 : DEC EAX
006d9da6 : PUSH ESI
006d9da7 : MOV ESI,dword ptr [EBP + 0x188]
006d9dad : MOV dword ptr [ESP + 0x34],EAX
006d9db1 : MOV EAX,dword ptr [ESI + 0x18]
006d9db4 : DEC EBX
006d9db5 : CMP EAX,dword ptr [ESI + 0x1c]
006d9db8 : PUSH EDI
006d9db9 : MOV dword ptr [ESP + 0x18],ESI
006d9dbd : MOV dword ptr [ESP + 0x34],EBX
006d9dc1 : MOV dword ptr [ESP + 0x10],EAX
006d9dc5 : JGE 0x006d9f63
006d9dcb : JMP 0x006d9dd0
006d9dd0 : MOV EDI,dword ptr [ESI + 0x14]
006d9dd3 : MOV dword ptr [ESP + 0x14],EDI
006d9dd7 : CMP EDI,EBX
006d9dd9 : JA 0x006d9f4e
006d9ddf : NOP
006d9de0 : MOV EAX,dword ptr [EBP + 0x140]
006d9de6 : MOV ECX,dword ptr [ESI + 0x20]
006d9de9 : SHL EAX,0x7
006d9dec : ADD ESI,0x20
006d9def : PUSH EAX
006d9df0 : PUSH ECX
006d9df1 : CALL 0x006d9620
006d9df6 : MOV EDX,dword ptr [EBP + 0x198]
006d9dfc : MOV EAX,dword ptr [EDX + 0x4]
006d9dff : PUSH ESI
006d9e00 : PUSH EBP
006d9e01 : CALL EAX
006d9e03 : ADD ESP,0x10
006d9e06 : TEST AL,AL
006d9e08 : JZ 0x006d9f91
006d9e0e : XOR ECX,ECX
006d9e10 : CMP dword ptr [EBP + 0x124],ECX
006d9e16 : MOV dword ptr [ESP + 0x1c],ECX
006d9e1a : MOV dword ptr [ESP + 0x30],ECX
006d9e1e : JLE 0x006d9f39
006d9e24 : LEA EDX,[EBP + 0x128]
006d9e2a : MOV dword ptr [ESP + 0x20],EDX
006d9e2e : MOV EDI,EDI
006d9e30 : MOV EAX,dword ptr [ESP + 0x20]
006d9e34 : MOV ESI,dword ptr [EAX]
006d9e36 : CMP byte ptr [ESI + 0x30],0x0
006d9e3a : JNZ 0x006d9e48
006d9e3c : ADD ECX,dword ptr [ESI + 0x3c]
006d9e3f : MOV dword ptr [ESP + 0x1c],ECX
006d9e43 : JMP 0x006d9f17
006d9e48 : MOV EAX,dword ptr [ESI + 0x4]
006d9e4b : MOV EDX,dword ptr [EBP + 0x19c]
006d9e51 : ADD EAX,EAX
006d9e53 : ADD EAX,EAX
006d9e55 : MOV EDX,dword ptr [EDX + EAX*0x1 + 0x4]
006d9e59 : MOV dword ptr [ESP + 0x3c],EDX
006d9e5d : CMP EDI,EBX
006d9e5f : JNC 0x006d9e66
006d9e61 : MOV EDX,dword ptr [ESI + 0x34]
006d9e64 : JMP 0x006d9e69
006d9e66 : MOV EDX,dword ptr [ESI + 0x44]
006d9e69 : MOV EDI,dword ptr [ESP + 0x4c]
006d9e6d : MOV EAX,dword ptr [EAX + EDI*0x1]
006d9e70 : MOV EDI,dword ptr [ESI + 0x40]
006d9e73 : IMUL EDI,dword ptr [ESP + 0x14]
006d9e78 : MOV dword ptr [ESP + 0x24],EDX
006d9e7c : MOV EDX,dword ptr [ESI + 0x24]
006d9e7f : IMUL EDX,dword ptr [ESP + 0x10]
006d9e84 : LEA EBX,[EAX + EDX*0x4]
006d9e87 : XOR EAX,EAX
006d9e89 : CMP dword ptr [ESI + 0x38],EAX
006d9e8c : MOV dword ptr [ESP + 0x40],EDI
006d9e90 : MOV dword ptr [ESP + 0x2c],EAX
006d9e94 : JLE 0x006d9f17
006d9e9a : LEA EBX,[EBX]
006d9ea0 : MOV EDX,dword ptr [ESP + 0x38]
006d9ea4 : CMP dword ptr [EBP + 0x80],EDX
006d9eaa : JC 0x006d9eb7
006d9eac : MOV EDX,dword ptr [ESP + 0x10]
006d9eb0 : ADD EDX,EAX
006d9eb2 : CMP EDX,dword ptr [ESI + 0x48]
006d9eb5 : JGE 0x006d9f00
006d9eb7 : MOV EDX,dword ptr [ESP + 0x24]
006d9ebb : TEST EDX,EDX
006d9ebd : JLE 0x006d9f00
006d9ebf : MOV EAX,dword ptr [ESP + 0x18]
006d9ec3 : LEA EBP,[EAX + ECX*0x4 + 0x20]
006d9ec7 : MOV dword ptr [ESP + 0x28],EDX
006d9ecb : JMP 0x006d9ed0
006d9ed0 : MOV ECX,dword ptr [EBP]
006d9ed3 : MOV EDX,dword ptr [ESP + 0x48]
006d9ed7 : PUSH EDI
006d9ed8 : PUSH EBX
006d9ed9 : PUSH ECX
006d9eda : PUSH ESI
006d9edb : PUSH EDX
006d9edc : CALL dword ptr [ESP + 0x50]
006d9ee0 : ADD EDI,dword ptr [ESI + 0x24]
006d9ee3 : ADD ESP,0x14
006d9ee6 : ADD EBP,0x4
006d9ee9 : SUB dword ptr [ESP + 0x28],0x1
006d9eee : JNZ 0x006d9ed0
006d9ef0 : MOV EDI,dword ptr [ESP + 0x40]
006d9ef4 : MOV ECX,dword ptr [ESP + 0x1c]
006d9ef8 : MOV EBP,dword ptr [ESP + 0x48]
006d9efc : MOV EAX,dword ptr [ESP + 0x2c]
006d9f00 : ADD ECX,dword ptr [ESI + 0x34]
006d9f03 : MOV EDX,dword ptr [ESI + 0x24]
006d9f06 : INC EAX
006d9f07 : CMP EAX,dword ptr [ESI + 0x38]
006d9f0a : MOV dword ptr [ESP + 0x1c],ECX
006d9f0e : LEA EBX,[EBX + EDX*0x4]
006d9f11 : MOV dword ptr [ESP + 0x2c],EAX
006d9f15 : JL 0x006d9ea0
006d9f17 : MOV EAX,dword ptr [ESP + 0x30]
006d9f1b : ADD dword ptr [ESP + 0x20],0x4
006d9f20 : MOV EBX,dword ptr [ESP + 0x34]
006d9f24 : MOV EDI,dword ptr [ESP + 0x14]
006d9f28 : INC EAX
006d9f29 : CMP EAX,dword ptr [EBP + 0x124]
006d9f2f : MOV dword ptr [ESP + 0x30],EAX
006d9f33 : JL 0x006d9e30
006d9f39 : MOV ESI,dword ptr [ESP + 0x18]
006d9f3d : INC EDI
006d9f3e : MOV dword ptr [ESP + 0x14],EDI
006d9f42 : CMP EDI,EBX
006d9f44 : JBE 0x006d9de0
006d9f4a : MOV EAX,dword ptr [ESP + 0x10]
006d9f4e : INC EAX
006d9f4f : MOV dword ptr [ESI + 0x14],0x0
006d9f56 : CMP EAX,dword ptr [ESI + 0x1c]
006d9f59 : MOV dword ptr [ESP + 0x10],EAX
006d9f5d : JL 0x006d9dd0
006d9f63 : INC dword ptr [EBP + 0x80]
006d9f69 : MOV EAX,dword ptr [EBP + 0x80]
006d9f6f : INC dword ptr [EBP + 0x88]
006d9f75 : CMP EAX,dword ptr [EBP + 0x11c]
006d9f7b : JNC 0x006d9fa9
006d9f7d : MOV ECX,EBP
006d9f7f : CALL 0x006d9d20
006d9f84 : POP EDI
006d9f85 : POP ESI
006d9f86 : POP EBP
006d9f87 : MOV EAX,0x3
006d9f8c : POP EBX
006d9f8d : ADD ESP,0x34
006d9f90 : RET
006d9f91 : MOV EAX,dword ptr [ESP + 0x18]
006d9f95 : MOV ECX,dword ptr [ESP + 0x10]
006d9f99 : MOV dword ptr [EAX + 0x14],EDI
006d9f9c : POP EDI
006d9f9d : POP ESI
006d9f9e : POP EBP
006d9f9f : MOV dword ptr [EAX + 0x18],ECX
006d9fa2 : XOR EAX,EAX
006d9fa4 : POP EBX
006d9fa5 : ADD ESP,0x34
006d9fa8 : RET
006d9fa9 : MOV EDX,dword ptr [EBP + 0x190]
006d9faf : MOV EAX,dword ptr [EDX + 0xc]
006d9fb2 : PUSH EBP
006d9fb3 : CALL EAX
006d9fb5 : ADD ESP,0x4
006d9fb8 : POP EDI
006d9fb9 : POP ESI
006d9fba : POP EBP
006d9fbb : MOV EAX,0x4
006d9fc0 : POP EBX
006d9fc1 : ADD ESP,0x34
006d9fc4 : RET
