PROGRAM  : Maestia.exe
FUNCTION : FUN_00901930
ENTRY    : 00901930
BODY     : [[00901930, 00901b46]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00901930(void)

{
  float fVar1;
  int *piVar2;
  int unaff_ESI;
  float fVar3;
  
  if (*(char *)(unaff_ESI + 0xdc) == '\0') {
    return;
  }
  if (((*(char *)(unaff_ESI + 0x32) == '\0') ||
      (*(float *)(unaff_ESI + 0xa0) == *(float *)(unaff_ESI + 0xa4))) &&
     (*(char *)(unaff_ESI + 0xad) == '\0')) {
    if (*(char *)(unaff_ESI + 0xac) != '\0') {
      if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0))
      {
        (**(code **)(*piVar2 + 4))
                  (piVar2,"SetTargetHpScale",&DAT_00c630c8,
                   (double)(*(float *)(unaff_ESI + 0xa0) * 100.0));
      }
      *(undefined1 *)(unaff_ESI + 0xac) = 0;
    }
  }
  else {
    fVar3 = *(float *)(unaff_ESI + 0xa8) + *(float *)(unaff_ESI + 0xa4);
    fVar1 = *(float *)(unaff_ESI + 0xa0);
    if (fVar3 <= fVar1) {
      *(float *)(unaff_ESI + 0xa4) = fVar1;
    }
    else {
      *(float *)(unaff_ESI + 0xa4) = fVar3;
    }
    if (*(char *)(unaff_ESI + 0xad) != '\0') {
      if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0))
      {
        (**(code **)(*piVar2 + 4))(piVar2,"SetTargetHpScale",&DAT_00c630b0,(double)(fVar1 * 100.0));
      }
      *(undefined1 *)(unaff_ESI + 0xad) = 0;
    }
  }
  if (*(int *)(unaff_ESI + 0xd0) != 0) {
    if (*(char *)(unaff_ESI + 0x32) != '\0') {
      fVar1 = *(float *)(unaff_ESI + 0xb0);
      if (fVar1 != *(float *)(unaff_ESI + 0xb4)) {
        fVar3 = *(float *)(unaff_ESI + 0xb8) + *(float *)(unaff_ESI + 0xb4);
        if (fVar3 <= fVar1) {
          *(float *)(unaff_ESI + 0xb4) = fVar1;
        }
        else {
          *(float *)(unaff_ESI + 0xb4) = fVar3;
        }
        if ((*DAT_00da9894 != 0) &&
           (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0)) {
          (**(code **)(*piVar2 + 4))
                    (piVar2,"SetTargetDPScale",&DAT_00c630e0,(double)(fVar1 * 100.0));
          FUN_00901620();
          return;
        }
        goto LAB_00901b3d;
      }
    }
    if (*(char *)(unaff_ESI + 0xbc) != '\0') {
      if ((*DAT_00da9894 != 0) && (piVar2 = *(int **)(*DAT_00da9894 + 0x114), piVar2 != (int *)0x0))
      {
        (**(code **)(*piVar2 + 4))
                  (piVar2,"SetTargetDPScale",&DAT_00c630f8,
                   (double)(*(float *)(unaff_ESI + 0xb0) * 100.0));
      }
      *(undefined1 *)(unaff_ESI + 0xbc) = 0;
    }
  }
LAB_00901b3d:
  FUN_00901620();
  return;
}



============================================================
DISASSEMBLY
============================================================
00901930 : PUSH EBP
00901931 : MOV EBP,ESP
00901933 : AND ESP,0xffffffc0
00901936 : CMP byte ptr [ESI + 0xdc],0x0
0090193d : JZ 0x00901b43
00901943 : CMP byte ptr [ESI + 0x32],0x0
00901947 : MOVSS XMM3,dword ptr [0x00cdf230]
0090194f : JZ 0x00901966
00901951 : MOVSS XMM0,dword ptr [ESI + 0xa0]
00901959 : UCOMISS XMM0,dword ptr [ESI + 0xa4]
00901960 : LAHF
00901961 : TEST AH,0x44
00901964 : JP 0x00901973
00901966 : CMP byte ptr [ESI + 0xad],0x0
0090196d : JZ 0x009019f9
00901973 : MOVSS XMM1,dword ptr [ESI + 0xa8]
0090197b : ADDSS XMM1,dword ptr [ESI + 0xa4]
00901983 : MOVSS XMM0,dword ptr [ESI + 0xa0]
0090198b : COMISS XMM1,XMM0
0090198e : JBE 0x0090199a
00901990 : MOVSS dword ptr [ESI + 0xa4],XMM1
00901998 : JMP 0x009019a2
0090199a : MOVSS dword ptr [ESI + 0xa4],XMM0
009019a2 : CMP byte ptr [ESI + 0xad],0x0
009019a9 : JZ 0x00901a52
009019af : MOV EAX,[0x00da9894]
009019b4 : MOV EAX,dword ptr [EAX]
009019b6 : TEST EAX,EAX
009019b8 : JZ 0x009019f0
009019ba : MOV EAX,dword ptr [EAX + 0x114]
009019c0 : TEST EAX,EAX
009019c2 : JZ 0x009019f0
009019c4 : MOV ECX,dword ptr [EAX]
009019c6 : MOV EDX,dword ptr [ECX + 0x4]
009019c9 : SUB ESP,0x8
009019cc : MULSS XMM0,XMM3
009019d0 : CVTPS2PD XMM0,XMM0
009019d3 : MOVSD qword ptr [ESP],XMM0
009019d8 : PUSH 0xc630b0
009019dd : PUSH 0xc630b4
009019e2 : PUSH EAX
009019e3 : CALL EDX
009019e5 : MOVSS XMM3,dword ptr [0x00cdf230]
009019ed : ADD ESP,0x14
009019f0 : MOV byte ptr [ESI + 0xad],0x0
009019f7 : JMP 0x00901a52
009019f9 : CMP byte ptr [ESI + 0xac],0x0
00901a00 : JZ 0x00901a52
00901a02 : MOV EAX,[0x00da9894]
00901a07 : MOV EAX,dword ptr [EAX]
00901a09 : TEST EAX,EAX
00901a0b : JZ 0x00901a4b
00901a0d : MOV EAX,dword ptr [EAX + 0x114]
00901a13 : TEST EAX,EAX
00901a15 : JZ 0x00901a4b
00901a17 : MOVSS XMM0,dword ptr [ESI + 0xa0]
00901a1f : MOV ECX,dword ptr [EAX]
00901a21 : MOV EDX,dword ptr [ECX + 0x4]
00901a24 : SUB ESP,0x8
00901a27 : MULSS XMM0,XMM3
00901a2b : CVTPS2PD XMM0,XMM0
00901a2e : MOVSD qword ptr [ESP],XMM0
00901a33 : PUSH 0xc630c8
00901a38 : PUSH 0xc630cc
00901a3d : PUSH EAX
00901a3e : CALL EDX
00901a40 : MOVSS XMM3,dword ptr [0x00cdf230]
00901a48 : ADD ESP,0x14
00901a4b : MOV byte ptr [ESI + 0xac],0x0
00901a52 : CMP dword ptr [ESI + 0xd0],0x0
00901a59 : JZ 0x00901b3d
00901a5f : CMP byte ptr [ESI + 0x32],0x0
00901a63 : JZ 0x00901aec
00901a69 : MOVSS XMM0,dword ptr [ESI + 0xb0]
00901a71 : MOVSS XMM2,dword ptr [ESI + 0xb4]
00901a79 : UCOMISS XMM0,XMM2
00901a7c : LAHF
00901a7d : TEST AH,0x44
00901a80 : JNP 0x00901aec
00901a82 : MOVSS XMM1,dword ptr [ESI + 0xb8]
00901a8a : ADDSS XMM1,XMM2
00901a8e : COMISS XMM1,XMM0
00901a91 : JBE 0x00901a9d
00901a93 : MOVSS dword ptr [ESI + 0xb4],XMM1
00901a9b : JMP 0x00901aa5
00901a9d : MOVSS dword ptr [ESI + 0xb4],XMM0
00901aa5 : MOV EAX,[0x00da9894]
00901aaa : MOV EAX,dword ptr [EAX]
00901aac : TEST EAX,EAX
00901aae : JZ 0x00901b3d
00901ab4 : MOV EAX,dword ptr [EAX + 0x114]
00901aba : TEST EAX,EAX
00901abc : JZ 0x00901b3d
00901abe : MOV ECX,dword ptr [EAX]
00901ac0 : MOV EDX,dword ptr [ECX + 0x4]
00901ac3 : SUB ESP,0x8
00901ac6 : MULSS XMM0,XMM3
00901aca : CVTPS2PD XMM0,XMM0
00901acd : MOVSD qword ptr [ESP],XMM0
00901ad2 : PUSH 0xc630e0
00901ad7 : PUSH 0xc630e4
00901adc : PUSH EAX
00901add : CALL EDX
00901adf : ADD ESP,0x14
00901ae2 : PUSH ESI
00901ae3 : CALL 0x00901620
00901ae8 : MOV ESP,EBP
00901aea : POP EBP
00901aeb : RET
00901aec : CMP byte ptr [ESI + 0xbc],0x0
00901af3 : JZ 0x00901b3d
00901af5 : MOV EAX,[0x00da9894]
00901afa : MOV EAX,dword ptr [EAX]
00901afc : TEST EAX,EAX
00901afe : JZ 0x00901b36
00901b00 : MOV EAX,dword ptr [EAX + 0x114]
00901b06 : TEST EAX,EAX
00901b08 : JZ 0x00901b36
00901b0a : MOVSS XMM0,dword ptr [ESI + 0xb0]
00901b12 : MOV ECX,dword ptr [EAX]
00901b14 : MOV EDX,dword ptr [ECX + 0x4]
00901b17 : SUB ESP,0x8
00901b1a : MULSS XMM0,XMM3
00901b1e : CVTPS2PD XMM0,XMM0
00901b21 : MOVSD qword ptr [ESP],XMM0
00901b26 : PUSH 0xc630f8
00901b2b : PUSH 0xc630fc
00901b30 : PUSH EAX
00901b31 : CALL EDX
00901b33 : ADD ESP,0x14
00901b36 : MOV byte ptr [ESI + 0xbc],0x0
00901b3d : PUSH ESI
00901b3e : CALL 0x00901620
00901b43 : MOV ESP,EBP
00901b45 : POP EBP
00901b46 : RET
