PROGRAM  : Maestia.exe
FUNCTION : FUN_007fa990
ENTRY    : 007fa990
BODY     : [[007fa990, 007fadd2]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_007fa990(int param_1,int *param_2)

{
  int iVar1;
  uint uVar2;
  DWORD DVar3;
  DWORD DVar4;
  code *pcVar5;
  DWORD DVar6;
  uint local_84;
  void *local_4c;
  undefined1 *puStack_48;
  int local_44;
  
  puStack_48 = &LAB_00b5ed9a;
  local_4c = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xffffff40;
  ExceptionList = &local_4c;
  if ((DAT_017274e4 & 1) == 0) {
    DAT_017274e4 = DAT_017274e4 | 1;
    local_44 = 0;
    FUN_00406460();
    local_44._0_1_ = 1;
    FUN_007f43b0(&DAT_01727358,0);
    local_44 = (uint)local_44._1_3_ << 8;
    if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_84 = 7;
    _atexit((_func_4879 *)&LAB_00b84650);
  }
  if ((DAT_017274e4 & 2) == 0) {
    DAT_017274e4 = DAT_017274e4 | 2;
    local_44 = 2;
    FUN_00406460();
    local_44._0_1_ = 3;
    FUN_007f3fd0(&DAT_017270e8,0);
    local_44 = CONCAT31(local_44._1_3_,2);
    if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_84 = 7;
    _atexit((_func_4879 *)&LAB_00b84640);
  }
  if ((DAT_017274e4 & 4) == 0) {
    DAT_017274e4 = DAT_017274e4 | 4;
    local_44 = 4;
    FUN_00406460();
    local_44._0_1_ = 5;
    FUN_007f43b0(&DAT_01726f58,0);
    local_44 = CONCAT31(local_44._1_3_,4);
    if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_84 = 7;
    _atexit((_func_4879 *)&LAB_00b84630);
  }
  if ((DAT_017274e4 & 8) == 0) {
    DAT_017274e4 = DAT_017274e4 | 8;
    local_44 = 6;
    FUN_00406460();
    local_44._0_1_ = 7;
    FUN_007f3fd0(&DAT_01726ce8,0);
    local_44 = CONCAT31(local_44._1_3_,6);
    if (7 < local_84) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    _atexit((_func_4879 *)&LAB_00b84620);
  }
  local_44 = 0xffffffff;
  if (*(int *)(param_1 + 0xf8) != 0) {
    (**(code **)(**(int **)(param_1 + 0xf8) + 8))(uVar2);
  }
  DVar3 = timeGetTime();
  if (DAT_017251c4 != 0) {
    FUN_007dd2d0();
  }
  DVar4 = timeGetTime();
  DAT_00da9a4c = DAT_00da9a4c + (DVar4 - DVar3);
  (**(code **)(*param_2 + 0x1c))();
  if (*(char *)((int)param_2 + 0x157) == '\0') {
    (**(code **)(*param_2 + 0x30))();
    pcVar5 = *(code **)(*param_2 + 0x2c);
  }
  else {
    (**(code **)(*param_2 + 0x20))();
    pcVar5 = *(code **)(*param_2 + 0x24);
  }
  (*pcVar5)();
  (*(code *)PTR_FUN_00d6d240)(0x3c,2,"Far  ~%6.1f   ",(double)(float)param_2[0x16]);
  (*(code *)PTR_FUN_00d6d240)(0x3c,3,"Near ~%6.1f   ",(double)(float)param_2[0x15]);
  DVar3 = timeGetTime();
  DVar4 = timeGetTime();
  if (*(char *)(param_1 + 0x95) != '\0') {
    (**(code **)(**(int **)(param_1 + 0xf0) + 8))();
  }
  DVar6 = timeGetTime();
  DAT_00da9a50 = DAT_00da9a50 + (DVar6 - DVar4);
  DVar4 = timeGetTime();
  if (*(char *)(param_1 + 0x98) != '\0') {
    if (param_2[7] == 0) {
      FUN_0045a0d0();
    }
    else {
      if (param_2[7] != 1) goto LAB_007facf4;
      FUN_0045a150();
    }
    (**(code **)(**(int **)(param_1 + 0xec) + 8))();
  }
LAB_007facf4:
  DVar6 = timeGetTime();
  DAT_00da9a58 = DAT_00da9a58 + (DVar6 - DVar4);
  DVar4 = timeGetTime();
  if ((*(int *)(param_1 + 0xf4) != 0) && (*(char *)(param_1 + 0x99) != '\0')) {
    if (param_2[7] == 0) {
      FUN_0045a0d0();
      _DAT_01726fa0 = param_1;
    }
    else {
      if (param_2[7] != 1) goto LAB_007fad59;
      FUN_0045a150();
      _DAT_01726d30 = param_1;
    }
    (**(code **)(**(int **)(param_1 + 0xf4) + 8))();
  }
LAB_007fad59:
  DVar6 = timeGetTime();
  DAT_00da9a54 = DAT_00da9a54 + (DVar6 - DVar4);
  FUN_007fbe20();
  if (*(char *)(param_1 + 0x95) != '\0') {
    iVar1 = *(int *)(param_1 + 0xf0);
    *(undefined1 *)(iVar1 + 0x108) = 0;
    *(undefined1 *)(iVar1 + 0x121) = 0;
    FUN_007ee960();
  }
  if (*(int *)(param_1 + 0x110) != 0) {
    FUN_007c9930();
  }
  _DAT_00da9a94 = 0;
  _DAT_00da9a98 = 0;
  DVar4 = timeGetTime();
  _DAT_00da9a5c = _DAT_00da9a5c + (DVar4 - DVar3);
  ExceptionList = local_4c;
  return;
}



============================================================
DISASSEMBLY
============================================================
007fa990 : PUSH EBP
007fa991 : MOV EBP,ESP
007fa993 : AND ESP,0xffffffc0
007fa996 : PUSH -0x1
007fa998 : PUSH 0xb5ed9a
007fa99d : MOV EAX,FS:[0x0]
007fa9a3 : PUSH EAX
007fa9a4 : SUB ESP,0x68
007fa9a7 : PUSH EBX
007fa9a8 : PUSH ESI
007fa9a9 : PUSH EDI
007fa9aa : MOV EAX,[0x00d66fa0]
007fa9af : XOR EAX,ESP
007fa9b1 : PUSH EAX
007fa9b2 : LEA EAX,[ESP + 0x78]
007fa9b6 : MOV FS:[0x0],EAX
007fa9bc : TEST byte ptr [0x017274e4],0x1
007fa9c3 : JNZ 0x007faa43
007fa9c5 : OR dword ptr [0x017274e4],0x1
007fa9cc : XOR EDI,EDI
007fa9ce : MOV dword ptr [ESP + 0x80],EDI
007fa9d5 : PUSH 0xc25150
007fa9da : LEA ECX,[ESP + 0x2c]
007fa9de : CALL 0x00406460
007fa9e3 : MOV byte ptr [ESP + 0x80],0x1
007fa9eb : PUSH EDI
007fa9ec : PUSH 0x1727358
007fa9f1 : LEA EDX,[ESP + 0x30]
007fa9f5 : CALL 0x007f43b0
007fa9fa : MOV byte ptr [ESP + 0x80],0x0
007faa02 : MOV ESI,0x8
007faa07 : CMP dword ptr [ESP + 0x40],ESI
007faa0b : JC 0x007faa16
007faa0d : MOV ECX,dword ptr [ESP + 0x2c]
007faa11 : CALL 0x006f04e0
007faa16 : XOR EAX,EAX
007faa18 : PUSH 0xb84650
007faa1d : MOV dword ptr [ESP + 0x44],0x7
007faa25 : MOV dword ptr [ESP + 0x40],EDI
007faa29 : MOV word ptr [ESP + 0x30],AX
007faa2e : CALL 0x006356bc
007faa33 : ADD ESP,0x4
007faa36 : MOV dword ptr [ESP + 0x80],0xffffffff
007faa41 : JMP 0x007faa48
007faa43 : XOR EDI,EDI
007faa45 : LEA ESI,[EDI + 0x8]
007faa48 : TEST byte ptr [0x017274e4],0x2
007faa4f : JNZ 0x007faaca
007faa51 : MOV EAX,0x2
007faa56 : OR dword ptr [0x017274e4],EAX
007faa5c : MOV dword ptr [ESP + 0x80],EAX
007faa63 : PUSH 0xc25180
007faa68 : LEA ECX,[ESP + 0x2c]
007faa6c : CALL 0x00406460
007faa71 : MOV byte ptr [ESP + 0x80],0x3
007faa79 : PUSH EDI
007faa7a : PUSH 0x17270e8
007faa7f : LEA EDX,[ESP + 0x30]
007faa83 : CALL 0x007f3fd0
007faa88 : MOV byte ptr [ESP + 0x80],0x2
007faa90 : CMP dword ptr [ESP + 0x40],ESI
007faa94 : JC 0x007faa9f
007faa96 : MOV ECX,dword ptr [ESP + 0x2c]
007faa9a : CALL 0x006f04e0
007faa9f : XOR ECX,ECX
007faaa1 : PUSH 0xb84640
007faaa6 : MOV dword ptr [ESP + 0x44],0x7
007faaae : MOV dword ptr [ESP + 0x40],EDI
007faab2 : MOV word ptr [ESP + 0x30],CX
007faab7 : CALL 0x006356bc
007faabc : ADD ESP,0x4
007faabf : MOV dword ptr [ESP + 0x80],0xffffffff
007faaca : MOV EBX,0x4
007faacf : TEST byte ptr [0x017274e4],BL
007faad5 : JNZ 0x007fab4a
007faad7 : OR dword ptr [0x017274e4],EBX
007faadd : MOV dword ptr [ESP + 0x80],EBX
007faae4 : PUSH 0xc251b0
007faae9 : LEA ECX,[ESP + 0x2c]
007faaed : CALL 0x00406460
007faaf2 : MOV byte ptr [ESP + 0x80],0x5
007faafa : PUSH EDI
007faafb : PUSH 0x1726f58
007fab00 : LEA EDX,[ESP + 0x30]
007fab04 : CALL 0x007f43b0
007fab09 : MOV byte ptr [ESP + 0x80],BL
007fab10 : CMP dword ptr [ESP + 0x40],ESI
007fab14 : JC 0x007fab1f
007fab16 : MOV ECX,dword ptr [ESP + 0x2c]
007fab1a : CALL 0x006f04e0
007fab1f : XOR EDX,EDX
007fab21 : PUSH 0xb84630
007fab26 : MOV dword ptr [ESP + 0x44],0x7
007fab2e : MOV dword ptr [ESP + 0x40],EDI
007fab32 : MOV word ptr [ESP + 0x30],DX
007fab37 : CALL 0x006356bc
007fab3c : ADD ESP,0x4
007fab3f : MOV dword ptr [ESP + 0x80],0xffffffff
007fab4a : TEST byte ptr [0x017274e4],0x8
007fab51 : JNZ 0x007fabcb
007fab53 : OR dword ptr [0x017274e4],ESI
007fab59 : MOV EBX,0x6
007fab5e : MOV dword ptr [ESP + 0x80],EBX
007fab65 : PUSH 0xc251e0
007fab6a : LEA ECX,[ESP + 0x2c]
007fab6e : CALL 0x00406460
007fab73 : MOV byte ptr [ESP + 0x80],0x7
007fab7b : PUSH EDI
007fab7c : PUSH 0x1726ce8
007fab81 : LEA EDX,[ESP + 0x30]
007fab85 : CALL 0x007f3fd0
007fab8a : MOV byte ptr [ESP + 0x80],BL
007fab91 : CMP dword ptr [ESP + 0x40],ESI
007fab95 : JC 0x007faba0
007fab97 : MOV ECX,dword ptr [ESP + 0x2c]
007fab9b : CALL 0x006f04e0
007faba0 : XOR EAX,EAX
007faba2 : PUSH 0xb84620
007faba7 : MOV dword ptr [ESP + 0x44],0x7
007fabaf : MOV dword ptr [ESP + 0x40],EDI
007fabb3 : MOV word ptr [ESP + 0x30],AX
007fabb8 : CALL 0x006356bc
007fabbd : ADD ESP,0x4
007fabc0 : MOV dword ptr [ESP + 0x80],0xffffffff
007fabcb : MOV ESI,dword ptr [EBP + 0x8]
007fabce : CMP dword ptr [ESI + 0xf8],EDI
007fabd4 : JZ 0x007fabe3
007fabd6 : MOV ECX,dword ptr [ESI + 0xf8]
007fabdc : MOV EDX,dword ptr [ECX]
007fabde : MOV EAX,dword ptr [EDX + 0x8]
007fabe1 : CALL EAX
007fabe3 : MOV EBX,dword ptr [0x00b85598]
007fabe9 : CALL EBX
007fabeb : MOV dword ptr [ESP + 0x20],EAX
007fabef : MOV EAX,[0x017251c4]
007fabf4 : CMP EAX,EDI
007fabf6 : JZ 0x007fabff
007fabf8 : MOV EDI,EAX
007fabfa : CALL 0x007dd2d0
007fabff : CALL EBX
007fac01 : SUB EAX,dword ptr [ESP + 0x20]
007fac05 : MOV EDI,dword ptr [EBP + 0xc]
007fac08 : MOV EDX,dword ptr [EDI]
007fac0a : ADD dword ptr [0x00da9a4c],EAX
007fac10 : MOV EAX,dword ptr [EDX + 0x1c]
007fac13 : MOV ECX,EDI
007fac15 : CALL EAX
007fac17 : CMP byte ptr [EDI + 0x157],0x0
007fac1e : MOV EDX,dword ptr [EDI]
007fac20 : MOV ECX,EDI
007fac22 : JZ 0x007fac30
007fac24 : MOV EAX,dword ptr [EDX + 0x20]
007fac27 : CALL EAX
007fac29 : MOV EDX,dword ptr [EDI]
007fac2b : MOV EAX,dword ptr [EDX + 0x24]
007fac2e : JMP 0x007fac3a
007fac30 : MOV EAX,dword ptr [EDX + 0x30]
007fac33 : CALL EAX
007fac35 : MOV EDX,dword ptr [EDI]
007fac37 : MOV EAX,dword ptr [EDX + 0x2c]
007fac3a : MOV ECX,EDI
007fac3c : CALL EAX
007fac3e : MOVSS XMM0,dword ptr [EDI + 0x58]
007fac43 : SUB ESP,0x8
007fac46 : CVTPS2PD XMM0,XMM0
007fac49 : MOVSD qword ptr [ESP],XMM0
007fac4e : PUSH 0xc25210
007fac53 : PUSH 0x2
007fac55 : PUSH 0x3c
007fac57 : CALL dword ptr [0x00d6d240]
007fac5d : MOVSS XMM0,dword ptr [EDI + 0x54]
007fac62 : ADD ESP,0xc
007fac65 : CVTPS2PD XMM0,XMM0
007fac68 : MOVSD qword ptr [ESP],XMM0
007fac6d : PUSH 0xc25220
007fac72 : PUSH 0x3
007fac74 : PUSH 0x3c
007fac76 : CALL dword ptr [0x00d6d240]
007fac7c : ADD ESP,0x14
007fac7f : CALL EBX
007fac81 : MOV dword ptr [ESP + 0x24],EAX
007fac85 : CALL EBX
007fac87 : CMP byte ptr [ESI + 0x95],0x0
007fac8e : MOV dword ptr [ESP + 0x20],EAX
007fac92 : JZ 0x007faca2
007fac94 : MOV ECX,dword ptr [ESI + 0xf0]
007fac9a : MOV EDX,dword ptr [ECX]
007fac9c : MOV EAX,dword ptr [EDX + 0x8]
007fac9f : PUSH EDI
007faca0 : CALL EAX
007faca2 : CALL EBX
007faca4 : SUB EAX,dword ptr [ESP + 0x20]
007faca8 : ADD dword ptr [0x00da9a50],EAX
007facae : CALL EBX
007facb0 : CMP byte ptr [ESI + 0x98],0x0
007facb7 : MOV dword ptr [ESP + 0x20],EAX
007facbb : JZ 0x007facf4
007facbd : MOV EAX,dword ptr [EDI + 0x1c]
007facc0 : TEST EAX,EAX
007facc2 : JNZ 0x007facd1
007facc4 : MOV ESI,0x1727358
007facc9 : CALL 0x0045a0d0
007facce : PUSH ESI
007faccf : JMP 0x007face1
007facd1 : CMP EAX,0x1
007facd4 : JNZ 0x007facf4
007facd6 : MOV ESI,0x17270e8
007facdb : CALL 0x0045a150
007face0 : PUSH ESI
007face1 : MOV ECX,dword ptr [EBP + 0x8]
007face4 : MOV ECX,dword ptr [ECX + 0xec]
007facea : MOV EDX,dword ptr [ECX]
007facec : MOV EAX,dword ptr [EDX + 0x8]
007facef : CALL EAX
007facf1 : MOV ESI,dword ptr [EBP + 0x8]
007facf4 : CALL EBX
007facf6 : SUB EAX,dword ptr [ESP + 0x20]
007facfa : ADD dword ptr [0x00da9a58],EAX
007fad00 : CALL EBX
007fad02 : CMP dword ptr [ESI + 0xf4],0x0
007fad09 : MOV dword ptr [ESP + 0x20],EAX
007fad0d : JZ 0x007fad59
007fad0f : CMP byte ptr [ESI + 0x99],0x0
007fad16 : JZ 0x007fad59
007fad18 : MOV EAX,dword ptr [EDI + 0x1c]
007fad1b : TEST EAX,EAX
007fad1d : JNZ 0x007fad34
007fad1f : MOV ESI,0x1726f58
007fad24 : CALL 0x0045a0d0
007fad29 : MOV EAX,dword ptr [EBP + 0x8]
007fad2c : MOV [0x01726fa0],EAX
007fad31 : PUSH ESI
007fad32 : JMP 0x007fad4c
007fad34 : CMP EAX,0x1
007fad37 : JNZ 0x007fad59
007fad39 : MOV ESI,0x1726ce8
007fad3e : CALL 0x0045a150
007fad43 : MOV EAX,dword ptr [EBP + 0x8]
007fad46 : MOV [0x01726d30],EAX
007fad4b : PUSH ESI
007fad4c : MOV ECX,dword ptr [EAX + 0xf4]
007fad52 : MOV EDX,dword ptr [ECX]
007fad54 : MOV EAX,dword ptr [EDX + 0x8]
007fad57 : CALL EAX
007fad59 : CALL EBX
007fad5b : SUB EAX,dword ptr [ESP + 0x20]
007fad5f : MOV ESI,dword ptr [0x017251ac]
007fad65 : ADD dword ptr [0x00da9a54],EAX
007fad6b : CALL 0x007fbe20
007fad70 : MOV ESI,dword ptr [EBP + 0x8]
007fad73 : CMP byte ptr [ESI + 0x95],0x0
007fad7a : JZ 0x007fad95
007fad7c : MOV ECX,dword ptr [ESI + 0xf0]
007fad82 : MOV byte ptr [ECX + 0x108],0x0
007fad89 : MOV byte ptr [ECX + 0x121],0x0
007fad90 : CALL 0x007ee960
007fad95 : MOV EAX,dword ptr [ESI + 0x110]
007fad9b : XOR ESI,ESI
007fad9d : CMP EAX,ESI
007fad9f : JZ 0x007fada6
007fada1 : CALL 0x007c9930
007fada6 : MOV dword ptr [0x00da9a94],ESI
007fadac : MOV dword ptr [0x00da9a98],ESI
007fadb2 : CALL EBX
007fadb4 : SUB EAX,dword ptr [ESP + 0x24]
007fadb8 : ADD dword ptr [0x00da9a5c],EAX
007fadbe : MOV ECX,dword ptr [ESP + 0x78]
007fadc2 : MOV dword ptr FS:[0x0],ECX
007fadc9 : POP ECX
007fadca : POP EDI
007fadcb : POP ESI
007fadcc : POP EBX
007fadcd : MOV ESP,EBP
007fadcf : POP EBP
007fadd0 : RET 0x8
