PROGRAM  : Maestia.exe
FUNCTION : FUN_009447e0
ENTRY    : 009447e0
BODY     : [[009447e0, 009449f2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009447e0(void)

{
  int iVar1;
  char cVar2;
  SHORT SVar3;
  undefined2 uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  uint8_t *packet;
  int *in_ECX;
  undefined1 local_34 [28];
  int *local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b6b5c9;
  local_10 = ExceptionList;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar7 = *(int *)(in_ECX[1] + 0x128);
  if (iVar7 != 0) {
    *(uint *)(in_ECX[0xf] + 0x14) =
         (uint)*(ushort *)((int)in_ECX + 0x6a) * *(int *)(in_ECX[0xf] + 0xc) +
         (uint)*(ushort *)(in_ECX + 0x1a);
    iVar1 = in_ECX[0xf];
    local_14 = *(int *)(iVar1 + 0x14);
    if ((local_14 < 0) || (*(int *)(iVar1 + 0xc) == 0)) {
      iVar6 = -1;
      local_14 = -1;
    }
    else {
      iVar6 = local_14 / *(int *)(iVar1 + 0xc);
      local_14 = local_14 - *(int *)(iVar1 + 0xc) * iVar6;
    }
    local_18 = (int *)iVar7;
    local_18 = (int *)(**(code **)(*in_ECX + 0x74))(local_14,iVar6,uVar5);
    if (local_18 != (int *)0x0) {
      if (local_18[2] != 0x12345668) {
        FUN_00406460(L"pItem dangling pointer !!");
        local_8 = 0;
        if ((int *)*DAT_00da98e8 != (int *)0x0) {
          (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                    (L"AvaGuiPocket::OnRButtonClick",0x6d9,local_34);
        }
        local_8 = 0xffffffff;
        FUN_00406560();
        ExceptionList = local_10;
        return;
      }
      cVar2 = FUN_008eb290();
      if (cVar2 == '\0') {
        cVar2 = (**(code **)(*in_ECX + 0x5c))(local_18,iVar7);
        if ((cVar2 == '\0') && (*(int *)(iVar7 + 0x4c) == 0)) {
          iVar1 = in_ECX[0xb];
          *(undefined2 *)(iVar7 + 0x44) = (undefined2)local_14;
          *(int *)(iVar7 + 0x40) = iVar1;
          *(short *)(iVar7 + 0x46) = (short)iVar6;
          FUN_00992980();
        }
      }
      else {
        FUN_0097fb30(local_18,local_14,iVar6);
        iVar7 = FUN_008eb260(DAT_00d6f0f4);
        if (iVar7 != 0) {
          SVar3 = GetKeyState(0x11);
          if (-1 < SVar3) {
            FUN_00966e30(local_14);
            ExceptionList = local_10;
            return;
          }
          uVar4 = (**(code **)(*local_18 + 0x40))();
          local_18 = (int *)FUN_006f4590();
          local_8 = 1;
          if (local_18 == (int *)0x0) {
            packet = (uint8_t *)0x0;
          }
          else {
            packet = (uint8_t *)FUN_00425d10(local_14,iVar6,uVar4);
          }
          local_8 = 0xffffffff;
          if ((*(int *)(DAT_017247d4 + 4) != 0) && (*(char *)(DAT_017247d4 + 8) != '\0')) {
            FUN_00a0dd40(*(int *)(DAT_017247d4 + 4),0xc,packet);
            ExceptionList = local_10;
            return;
          }
        }
      }
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
009447e0 : PUSH EBP
009447e1 : MOV EBP,ESP
009447e3 : PUSH -0x1
009447e5 : PUSH 0xb6b5c9
009447ea : MOV EAX,FS:[0x0]
009447f0 : PUSH EAX
009447f1 : SUB ESP,0x24
009447f4 : PUSH EBX
009447f5 : PUSH ESI
009447f6 : PUSH EDI
009447f7 : MOV EAX,[0x00d66fa0]
009447fc : XOR EAX,EBP
009447fe : PUSH EAX
009447ff : LEA EAX,[EBP + -0xc]
00944802 : MOV FS:[0x0],EAX
00944808 : MOV EDI,ECX
0094480a : MOV EAX,dword ptr [EDI + 0x4]
0094480d : MOV ESI,dword ptr [EAX + 0x128]
00944813 : MOV dword ptr [EBP + -0x14],ESI
00944816 : TEST ESI,ESI
00944818 : JZ 0x009449e1
0094481e : MOVZX ECX,word ptr [EDI + 0x6a]
00944822 : MOV EAX,dword ptr [EDI + 0x3c]
00944825 : IMUL ECX,dword ptr [EAX + 0xc]
00944829 : MOVZX EDX,word ptr [EDI + 0x68]
0094482d : ADD ECX,EDX
0094482f : MOV dword ptr [EAX + 0x14],ECX
00944832 : MOV EAX,dword ptr [EDI + 0x3c]
00944835 : MOV ECX,dword ptr [EAX + 0x14]
00944838 : TEST ECX,ECX
0094483a : JL 0x00944859
0094483c : CMP dword ptr [EAX + 0xc],0x0
00944840 : JZ 0x00944859
00944842 : MOV ESI,dword ptr [EAX + 0xc]
00944845 : MOV EAX,ECX
00944847 : CDQ
00944848 : IDIV ESI
0094484a : MOV EBX,EAX
0094484c : IMUL ESI,EBX
0094484f : SUB ECX,ESI
00944851 : MOV ESI,dword ptr [EBP + -0x14]
00944854 : MOV dword ptr [EBP + -0x10],ECX
00944857 : JMP 0x0094485f
00944859 : OR EBX,0xffffffff
0094485c : MOV dword ptr [EBP + -0x10],EBX
0094485f : MOV ECX,dword ptr [EBP + -0x10]
00944862 : MOV EAX,dword ptr [EDI]
00944864 : MOV EDX,dword ptr [EAX + 0x74]
00944867 : PUSH EBX
00944868 : PUSH ECX
00944869 : MOV ECX,EDI
0094486b : CALL EDX
0094486d : MOV dword ptr [EBP + -0x14],EAX
00944870 : TEST EAX,EAX
00944872 : JZ 0x009449e1
00944878 : CMP dword ptr [EAX + 0x8],0x12345668
0094487f : JZ 0x009448d6
00944881 : PUSH 0xc72178
00944886 : LEA ECX,[EBP + -0x30]
00944889 : CALL 0x00406460
0094488e : MOV dword ptr [EBP + -0x4],0x0
00944895 : MOV EAX,[0x00da98e8]
0094489a : MOV ECX,dword ptr [EAX]
0094489c : TEST ECX,ECX
0094489e : JZ 0x009448b5
009448a0 : MOV EDX,dword ptr [ECX]
009448a2 : MOV EDX,dword ptr [EDX + 0x14]
009448a5 : LEA EAX,[EBP + -0x30]
009448a8 : PUSH EAX
009448a9 : PUSH 0x6d9
009448ae : PUSH 0xc721ac
009448b3 : CALL EDX
009448b5 : MOV dword ptr [EBP + -0x4],0xffffffff
009448bc : LEA ECX,[EBP + -0x30]
009448bf : CALL 0x00406560
009448c4 : MOV ECX,dword ptr [EBP + -0xc]
009448c7 : MOV dword ptr FS:[0x0],ECX
009448ce : POP ECX
009448cf : POP EDI
009448d0 : POP ESI
009448d1 : POP EBX
009448d2 : MOV ESP,EBP
009448d4 : POP EBP
009448d5 : RET
009448d6 : MOV EAX,[0x00da9894]
009448db : MOV EAX,dword ptr [EAX]
009448dd : CALL 0x008eb290
009448e2 : TEST AL,AL
009448e4 : JZ 0x009449b0
009448ea : MOV ECX,dword ptr [EBP + -0x10]
009448ed : MOV EDX,dword ptr [EBP + -0x14]
009448f0 : MOV EAX,dword ptr [EDI + 0x2c]
009448f3 : PUSH EBX
009448f4 : PUSH ECX
009448f5 : PUSH EDX
009448f6 : MOV ECX,ESI
009448f8 : CALL 0x0097fb30
009448fd : MOV EAX,[0x00da9894]
00944902 : MOV ECX,dword ptr [0x00d6f0f4]
00944908 : MOV ESI,dword ptr [EAX]
0094490a : PUSH ECX
0094490b : CALL 0x008eb260
00944910 : MOV ESI,EAX
00944912 : TEST ESI,ESI
00944914 : JZ 0x009449e1
0094491a : PUSH 0x11
0094491c : CALL dword ptr [0x00b85438]
00944922 : TEST AX,AX
00944925 : JGE 0x00944991
00944927 : MOV ECX,dword ptr [EBP + -0x14]
0094492a : MOV EDX,dword ptr [ECX]
0094492c : MOV EAX,dword ptr [EDX + 0x40]
0094492f : CALL EAX
00944931 : MOVZX ESI,AX
00944934 : CALL 0x006f4590
00944939 : MOV dword ptr [EBP + -0x14],EAX
0094493c : MOV dword ptr [EBP + -0x4],0x1
00944943 : TEST EAX,EAX
00944945 : JZ 0x00944959
00944947 : MOV EDI,dword ptr [EDI + 0x2c]
0094494a : MOV ECX,dword ptr [EBP + -0x10]
0094494d : PUSH ESI
0094494e : PUSH EBX
0094494f : PUSH ECX
00944950 : MOV EDX,EDI
00944952 : CALL 0x00425d10
00944957 : JMP 0x0094495b
00944959 : XOR EAX,EAX
0094495b : MOV dword ptr [EBP + -0x4],0xffffffff
00944962 : MOV EDX,dword ptr [0x017247d4]
00944968 : MOV ECX,dword ptr [EDX + 0x4]
0094496b : TEST ECX,ECX
0094496d : JZ 0x009449e1
0094496f : CMP byte ptr [EDX + 0x8],0x0
00944973 : JZ 0x009449e1
00944975 : PUSH 0xc
00944977 : PUSH ECX
00944978 : MOV EDI,EAX
0094497a : CALL 0x00a0dd40
0094497f : MOV ECX,dword ptr [EBP + -0xc]
00944982 : MOV dword ptr FS:[0x0],ECX
00944989 : POP ECX
0094498a : POP EDI
0094498b : POP ESI
0094498c : POP EBX
0094498d : MOV ESP,EBP
0094498f : POP EBP
00944990 : RET
00944991 : MOV EDX,dword ptr [EBP + -0x10]
00944994 : PUSH EDX
00944995 : MOV ECX,EBX
00944997 : MOV EAX,ESI
00944999 : CALL 0x00966e30
0094499e : MOV ECX,dword ptr [EBP + -0xc]
009449a1 : MOV dword ptr FS:[0x0],ECX
009449a8 : POP ECX
009449a9 : POP EDI
009449aa : POP ESI
009449ab : POP EBX
009449ac : MOV ESP,EBP
009449ae : POP EBP
009449af : RET
009449b0 : MOV ECX,dword ptr [EBP + -0x14]
009449b3 : MOV EAX,dword ptr [EDI]
009449b5 : MOV EDX,dword ptr [EAX + 0x5c]
009449b8 : PUSH ESI
009449b9 : PUSH ECX
009449ba : MOV ECX,EDI
009449bc : CALL EDX
009449be : TEST AL,AL
009449c0 : JNZ 0x009449e1
009449c2 : CMP dword ptr [ESI + 0x4c],0x0
009449c6 : JNZ 0x009449e1
009449c8 : MOV EAX,dword ptr [EDI + 0x2c]
009449cb : MOV CX,word ptr [EBP + -0x10]
009449cf : MOV word ptr [ESI + 0x44],CX
009449d3 : MOV ECX,EDI
009449d5 : MOV dword ptr [ESI + 0x40],EAX
009449d8 : MOV word ptr [ESI + 0x46],BX
009449dc : CALL 0x00992980
009449e1 : MOV ECX,dword ptr [EBP + -0xc]
009449e4 : MOV dword ptr FS:[0x0],ECX
009449eb : POP ECX
009449ec : POP EDI
009449ed : POP ESI
009449ee : POP EBX
009449ef : MOV ESP,EBP
009449f1 : POP EBP
009449f2 : RET
