PROGRAM  : Maestia.exe
FUNCTION : FUN_00ad0540
ENTRY    : 00ad0540
BODY     : [[00ad0540, 00ad065a]]

============================================================
DECOMPILED C CODE
============================================================

void ** FUN_00ad0540(void)

{
  uint uVar1;
  uint uVar2;
  DWORD DVar3;
  uint uVar4;
  void **ppvVar5;
  int iVar6;
  undefined4 uVar7;
  int in_ECX;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b6ee12;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ppvVar5 = &local_10;
  uVar1 = DAT_00d72ae4;
  if (*(char *)(in_ECX + 0x5d) != '\0') {
    ExceptionList = ppvVar5;
    DVar3 = timeGetTime();
    uVar4 = DVar3 - *(int *)(in_ECX + 100);
    if (*(uint *)(in_ECX + 0x60) <= uVar4) {
      ppvVar5 = (void **)FUN_00ad03e0(in_ECX);
      *(undefined1 *)(in_ECX + 0x5d) = 0;
      DAT_00d72ae4 = 0xffffffff;
      ExceptionList = local_10;
      return ppvVar5;
    }
    uVar4 = *(uint *)(in_ECX + 0x60) - uVar4;
    ppvVar5 = (void **)(uVar4 * 0x10624dd3);
    uVar4 = uVar4 / 1000;
    uVar1 = DAT_00d72ae4;
    if (((DAT_00d72ae4 != uVar4) &&
        (ppvVar5 = *(void ***)(in_ECX + 4), uVar1 = uVar4, ppvVar5 != (void **)0x0)) &&
       (ppvVar5[0x4d] != (void *)0x0)) {
      iVar6 = FUN_0081d120(in_ECX + 0x68);
      local_8 = 0;
      if (*(uint *)(iVar6 + 0x18) < 8) {
        iVar6 = iVar6 + 4;
      }
      else {
        iVar6 = *(int *)(iVar6 + 4);
      }
      uVar7 = FUN_00404750(iVar6,uVar4 + 1,uVar2);
      local_8._0_1_ = 1;
      FUN_0096b1e0(uVar7,0xffff0000,0x12);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      ppvVar5 = (void **)FUN_00406560();
    }
  }
  DAT_00d72ae4 = uVar1;
  ExceptionList = local_10;
  return ppvVar5;
}



============================================================
DISASSEMBLY
============================================================
00ad0540 : PUSH EBP
00ad0541 : MOV EBP,ESP
00ad0543 : PUSH -0x1
00ad0545 : PUSH 0xb6ee12
00ad054a : MOV EAX,FS:[0x0]
00ad0550 : PUSH EAX
00ad0551 : SUB ESP,0x3c
00ad0554 : PUSH EBX
00ad0555 : PUSH ESI
00ad0556 : PUSH EDI
00ad0557 : MOV EAX,[0x00d66fa0]
00ad055c : XOR EAX,EBP
00ad055e : PUSH EAX
00ad055f : LEA EAX,[EBP + -0xc]
00ad0562 : MOV FS:[0x0],EAX
00ad0568 : MOV EBX,ECX
00ad056a : CMP byte ptr [EBX + 0x5d],0x0
00ad056e : JZ 0x00ad0649
00ad0574 : CALL dword ptr [0x00b85598]
00ad057a : SUB EAX,dword ptr [EBX + 0x64]
00ad057d : MOV ECX,dword ptr [EBX + 0x60]
00ad0580 : CMP ECX,EAX
00ad0582 : JA 0x00ad05aa
00ad0584 : PUSH EBX
00ad0585 : CALL 0x00ad03e0
00ad058a : MOV byte ptr [EBX + 0x5d],0x0
00ad058e : MOV dword ptr [0x00d72ae4],0xffffffff
00ad0598 : MOV ECX,dword ptr [EBP + -0xc]
00ad059b : MOV dword ptr FS:[0x0],ECX
00ad05a2 : POP ECX
00ad05a3 : POP EDI
00ad05a4 : POP ESI
00ad05a5 : POP EBX
00ad05a6 : MOV ESP,EBP
00ad05a8 : POP EBP
00ad05a9 : RET
00ad05aa : SUB ECX,EAX
00ad05ac : MOV EAX,0x10624dd3
00ad05b1 : MUL ECX
00ad05b3 : MOV ESI,EDX
00ad05b5 : SHR ESI,0x6
00ad05b8 : MOV dword ptr [EBP + -0x10],ESI
00ad05bb : CMP dword ptr [0x00d72ae4],ESI
00ad05c1 : JZ 0x00ad0649
00ad05c7 : MOV EAX,dword ptr [EBX + 0x4]
00ad05ca : TEST EAX,EAX
00ad05cc : JZ 0x00ad0643
00ad05ce : CMP dword ptr [EAX + 0x134],0x0
00ad05d5 : JZ 0x00ad0643
00ad05d7 : MOV ECX,dword ptr [0x0172491c]
00ad05dd : LEA EAX,[EBX + 0x68]
00ad05e0 : PUSH EAX
00ad05e1 : LEA EDI,[EBP + -0x48]
00ad05e4 : CALL 0x0081d120
00ad05e9 : MOV dword ptr [EBP + -0x4],0x0
00ad05f0 : CMP dword ptr [EAX + 0x18],0x8
00ad05f4 : JC 0x00ad05fb
00ad05f6 : MOV EAX,dword ptr [EAX + 0x4]
00ad05f9 : JMP 0x00ad05fe
00ad05fb : ADD EAX,0x4
00ad05fe : INC ESI
00ad05ff : PUSH ESI
00ad0600 : PUSH EAX
00ad0601 : LEA ESI,[EBP + -0x2c]
00ad0604 : CALL 0x00404750
00ad0609 : ADD ESP,0x8
00ad060c : MOV byte ptr [EBP + -0x4],0x1
00ad0610 : MOV ECX,dword ptr [EBX + 0x4]
00ad0613 : MOV ECX,dword ptr [ECX + 0x134]
00ad0619 : PUSH 0x12
00ad061b : PUSH 0xffff0000
00ad0620 : PUSH EAX
00ad0621 : CALL 0x0096b1e0
00ad0626 : MOV byte ptr [EBP + -0x4],0x0
00ad062a : MOV ECX,ESI
00ad062c : CALL 0x00406560
00ad0631 : MOV dword ptr [EBP + -0x4],0xffffffff
00ad0638 : LEA ECX,[EBP + -0x48]
00ad063b : CALL 0x00406560
00ad0640 : MOV ESI,dword ptr [EBP + -0x10]
00ad0643 : MOV dword ptr [0x00d72ae4],ESI
00ad0649 : MOV ECX,dword ptr [EBP + -0xc]
00ad064c : MOV dword ptr FS:[0x0],ECX
00ad0653 : POP ECX
00ad0654 : POP EDI
00ad0655 : POP ESI
00ad0656 : POP EBX
00ad0657 : MOV ESP,EBP
00ad0659 : POP EBP
00ad065a : RET
