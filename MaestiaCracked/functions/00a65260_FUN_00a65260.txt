PROGRAM  : Maestia.exe
FUNCTION : FUN_00a65260
ENTRY    : 00a65260
BODY     : [[00a65260, 00a654fc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a65260(void)

{
  char cVar1;
  uint uVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 ****ppppuVar5;
  int in_ECX;
  undefined4 local_88;
  undefined1 local_4c [4];
  undefined4 local_48;
  uint local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined4 ***local_2c [4];
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b47ced;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  if (((DAT_00d6ab01 != '\0') || (*(char *)(in_ECX + 0x24) == '\0')) &&
     ((*(int *)(DAT_017251ac + 0x20) == 0 || (*(char *)(in_ECX + 0x24) == '\0')))) {
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    local_18 = 7;
    local_1c = 0;
    FUN_00405eb0(in_ECX + 4,0,0xffffffff);
    local_8 = 0;
    FUN_0070d390(uVar2);
    local_8._0_1_ = 1;
    cVar1 = FUN_008036f0(DAT_017251bc,local_30);
    if (cVar1 == '\0') {
      FUN_0070d4c0();
      *(undefined1 *)(in_ECX + 0x5c) = 1;
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      FUN_0040e420(local_30,local_4c);
      local_8._0_1_ = 2;
      FUN_0070c1f0();
      puVar3 = local_48;
      if (local_34 < 8) {
        puVar3 = &local_48;
      }
      iVar4 = FUN_00405b70(puVar3);
      if (((iVar4 == 0) && (2 < local_38)) && (local_38 == 3)) {
        *(undefined4 *)(in_ECX + 0x58) = 0;
      }
      iVar4 = FUN_007b4450(*(undefined4 *)(DAT_017251ac + 0x18),local_88,0xffffffff,0xffffffff,1,0,
                           DAT_00d6ab01 == '\0',1,1,*(undefined4 *)(in_ECX + 0x58),in_ECX + 0x3c,
                           in_ECX + 0x38,0);
      if (iVar4 < 0) {
        ppppuVar5 = (undefined4 ****)local_2c[0];
        if (local_18 < 8) {
          ppppuVar5 = local_2c;
        }
        FUN_008018d0(L"[AvaGuiTxtr::Load] Failed CreateTextureFromFileInMemoryEx Name : %s, %x",
                     ppppuVar5,iVar4);
        FUN_00664d50(iVar4);
        FUN_0070d4c0();
        *(undefined1 *)(in_ECX + 0x5c) = 1;
        local_8 = CONCAT31(local_8._1_3_,1);
        if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_34 = 7;
        local_38 = 0;
        local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
        local_8 = (uint)local_8._1_3_ << 8;
        FUN_0070d710();
        local_8 = 0xffffffff;
        if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        local_18 = 7;
        local_1c = 0;
        local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
        goto LAB_00a654e1;
      }
      FUN_0070d4c0();
      *(undefined1 *)(in_ECX + 0x24) = 1;
      local_8 = CONCAT31(local_8._1_3_,1);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_34 = 7;
      local_38 = 0;
      local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_0070d710();
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffff0000);
    local_1c = 0;
    local_18 = 7;
  }
LAB_00a654e1:
  local_8 = 0xffffffff;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00a65260 : PUSH EBP
00a65261 : MOV EBP,ESP
00a65263 : PUSH -0x1
00a65265 : PUSH 0xb47ced
00a6526a : MOV EAX,FS:[0x0]
00a65270 : PUSH EAX
00a65271 : SUB ESP,0x94
00a65277 : MOV EAX,[0x00d66fa0]
00a6527c : XOR EAX,EBP
00a6527e : MOV dword ptr [EBP + -0x10],EAX
00a65281 : PUSH EBX
00a65282 : PUSH ESI
00a65283 : PUSH EDI
00a65284 : PUSH EAX
00a65285 : LEA EAX,[EBP + -0xc]
00a65288 : MOV FS:[0x0],EAX
00a6528e : CMP byte ptr [0x00d6ab01],0x0
00a65295 : MOV EDI,ECX
00a65297 : JNZ 0x00a652a3
00a65299 : CMP byte ptr [EDI + 0x24],0x0
00a6529d : JNZ 0x00a65477
00a652a3 : MOV EAX,[0x017251ac]
00a652a8 : XOR ESI,ESI
00a652aa : CMP dword ptr [EAX + 0x20],ESI
00a652ad : JZ 0x00a652b9
00a652af : CMP byte ptr [EDI + 0x24],0x0
00a652b3 : JNZ 0x00a65477
00a652b9 : PUSH -0x1
00a652bb : XOR ECX,ECX
00a652bd : LEA EAX,[EDI + 0x4]
00a652c0 : PUSH ESI
00a652c1 : MOV word ptr [EBP + -0x28],CX
00a652c5 : MOV EBX,0x7
00a652ca : PUSH EAX
00a652cb : LEA ECX,[EBP + -0x2c]
00a652ce : MOV dword ptr [EBP + -0x14],EBX
00a652d1 : MOV dword ptr [EBP + -0x18],ESI
00a652d4 : CALL 0x00405eb0
00a652d9 : MOV dword ptr [EBP + -0x4],ESI
00a652dc : LEA ECX,[EBP + 0xffffff60]
00a652e2 : CALL 0x0070d390
00a652e7 : MOV byte ptr [EBP + -0x4],0x1
00a652eb : MOV EAX,[0x017251bc]
00a652f0 : LEA EDX,[EBP + -0x2c]
00a652f3 : PUSH EDX
00a652f4 : PUSH EAX
00a652f5 : LEA ECX,[EBP + 0xffffff60]
00a652fb : CALL 0x008036f0
00a65300 : TEST AL,AL
00a65302 : JNZ 0x00a65340
00a65304 : LEA ECX,[EBP + 0xffffff60]
00a6530a : CALL 0x0070d4c0
00a6530f : MOV byte ptr [EDI + 0x5c],0x1
00a65313 : MOV byte ptr [EBP + -0x4],0x0
00a65317 : LEA ECX,[EBP + 0xffffff60]
00a6531d : CALL 0x0070d710
00a65322 : MOV dword ptr [EBP + -0x4],0xffffffff
00a65329 : CMP dword ptr [EBP + -0x14],0x8
00a6532d : JC 0x00a65337
00a6532f : MOV ECX,dword ptr [EBP + -0x28]
00a65332 : CALL 0x006f04e0
00a65337 : XOR ECX,ECX
00a65339 : XOR AL,AL
00a6533b : JMP 0x00a654d7
00a65340 : MOV ECX,dword ptr [EBP + -0x18]
00a65343 : LEA EAX,[EBP + -0x48]
00a65346 : PUSH EAX
00a65347 : LEA EAX,[EBP + -0x2c]
00a6534a : LEA EDX,[ECX + -0x3]
00a6534d : PUSH EAX
00a6534e : CALL 0x0040e420
00a65353 : MOV byte ptr [EBP + -0x4],0x2
00a65357 : LEA ECX,[EBP + -0x48]
00a6535a : CALL 0x0070c1f0
00a6535f : MOV EBX,dword ptr [EBP + -0x34]
00a65362 : MOV EDX,EBX
00a65364 : CMP EBX,0x3
00a65367 : JC 0x00a6536e
00a65369 : MOV EDX,0x3
00a6536e : CMP dword ptr [EBP + -0x30],0x8
00a65372 : MOV EAX,dword ptr [EBP + -0x44]
00a65375 : JNC 0x00a6537a
00a65377 : LEA EAX,[EBP + -0x44]
00a6537a : PUSH EAX
00a6537b : MOV ECX,0xc105f8
00a65380 : CALL 0x00405b70
00a65385 : ADD ESP,0x4
00a65388 : CMP EAX,ESI
00a6538a : JNZ 0x00a653a0
00a6538c : CMP EBX,0x3
00a6538f : JC 0x00a653a0
00a65391 : XOR EAX,EAX
00a65393 : CMP EBX,0x3
00a65396 : SETNZ AL
00a65399 : CMP EAX,ESI
00a6539b : JNZ 0x00a653a0
00a6539d : MOV dword ptr [EDI + 0x58],ESI
00a653a0 : MOV ECX,dword ptr [0x017251ac]
00a653a6 : PUSH ESI
00a653a7 : MOV ECX,dword ptr [ECX + 0x18]
00a653aa : XOR EAX,EAX
00a653ac : CMP byte ptr [0x00d6ab01],AL
00a653b2 : LEA EDX,[EDI + 0x38]
00a653b5 : PUSH EDX
00a653b6 : LEA EDX,[EDI + 0x3c]
00a653b9 : PUSH EDX
00a653ba : MOV EDX,dword ptr [EDI + 0x58]
00a653bd : PUSH EDX
00a653be : PUSH 0x1
00a653c0 : SETZ AL
00a653c3 : PUSH 0x1
00a653c5 : PUSH EAX
00a653c6 : MOV EAX,dword ptr [EBP + 0xffffff7c]
00a653cc : PUSH ESI
00a653cd : PUSH 0x1
00a653cf : PUSH -0x1
00a653d1 : PUSH -0x1
00a653d3 : PUSH EAX
00a653d4 : PUSH ECX
00a653d5 : MOV ECX,dword ptr [EBP + -0x80]
00a653d8 : CALL 0x007b4450
00a653dd : MOV EBX,EAX
00a653df : ADD ESP,0x34
00a653e2 : CMP EBX,ESI
00a653e4 : JGE 0x00a6547b
00a653ea : CMP dword ptr [EBP + -0x14],0x8
00a653ee : MOV EAX,dword ptr [EBP + -0x28]
00a653f1 : JNC 0x00a653f6
00a653f3 : LEA EAX,[EBP + -0x28]
00a653f6 : MOV ESI,dword ptr [0x00da98e8]
00a653fc : PUSH EBX
00a653fd : PUSH EAX
00a653fe : PUSH 0xc10600
00a65403 : CALL 0x008018d0
00a65408 : ADD ESP,0xc
00a6540b : PUSH EBX
00a6540c : CALL 0x00664d50
00a65411 : LEA ECX,[EBP + 0xffffff60]
00a65417 : CALL 0x0070d4c0
00a6541c : MOV byte ptr [EDI + 0x5c],0x1
00a65420 : MOV byte ptr [EBP + -0x4],0x1
00a65424 : MOV ESI,0x8
00a65429 : CMP dword ptr [EBP + -0x30],ESI
00a6542c : JC 0x00a65436
00a6542e : MOV ECX,dword ptr [EBP + -0x44]
00a65431 : CALL 0x006f04e0
00a65436 : XOR ECX,ECX
00a65438 : MOV EDI,0x7
00a6543d : XOR EBX,EBX
00a6543f : MOV dword ptr [EBP + -0x30],EDI
00a65442 : MOV dword ptr [EBP + -0x34],EBX
00a65445 : MOV word ptr [EBP + -0x44],CX
00a65449 : MOV byte ptr [EBP + -0x4],CL
00a6544c : LEA ECX,[EBP + 0xffffff60]
00a65452 : CALL 0x0070d710
00a65457 : MOV dword ptr [EBP + -0x4],0xffffffff
00a6545e : CMP dword ptr [EBP + -0x14],ESI
00a65461 : JC 0x00a6546b
00a65463 : MOV ECX,dword ptr [EBP + -0x28]
00a65466 : CALL 0x006f04e0
00a6546b : XOR EDX,EDX
00a6546d : MOV dword ptr [EBP + -0x14],EDI
00a65470 : MOV dword ptr [EBP + -0x18],EBX
00a65473 : MOV word ptr [EBP + -0x28],DX
00a65477 : XOR AL,AL
00a65479 : JMP 0x00a654e1
00a6547b : LEA ECX,[EBP + 0xffffff60]
00a65481 : CALL 0x0070d4c0
00a65486 : MOV byte ptr [EDI + 0x24],0x1
00a6548a : MOV byte ptr [EBP + -0x4],0x1
00a6548e : MOV EDI,0x8
00a65493 : CMP dword ptr [EBP + -0x30],EDI
00a65496 : JC 0x00a654a0
00a65498 : MOV ECX,dword ptr [EBP + -0x44]
00a6549b : CALL 0x006f04e0
00a654a0 : XOR EAX,EAX
00a654a2 : MOV EBX,0x7
00a654a7 : MOV dword ptr [EBP + -0x30],EBX
00a654aa : MOV dword ptr [EBP + -0x34],ESI
00a654ad : MOV word ptr [EBP + -0x44],AX
00a654b1 : MOV byte ptr [EBP + -0x4],AL
00a654b4 : LEA ECX,[EBP + 0xffffff60]
00a654ba : CALL 0x0070d710
00a654bf : MOV dword ptr [EBP + -0x4],0xffffffff
00a654c6 : CMP dword ptr [EBP + -0x14],EDI
00a654c9 : JC 0x00a654d3
00a654cb : MOV ECX,dword ptr [EBP + -0x28]
00a654ce : CALL 0x006f04e0
00a654d3 : XOR ECX,ECX
00a654d5 : MOV AL,0x1
00a654d7 : MOV word ptr [EBP + -0x28],CX
00a654db : MOV dword ptr [EBP + -0x18],ESI
00a654de : MOV dword ptr [EBP + -0x14],EBX
00a654e1 : MOV ECX,dword ptr [EBP + -0xc]
00a654e4 : MOV dword ptr FS:[0x0],ECX
00a654eb : POP ECX
00a654ec : POP EDI
00a654ed : POP ESI
00a654ee : POP EBX
00a654ef : MOV ECX,dword ptr [EBP + -0x10]
00a654f2 : XOR ECX,EBP
00a654f4 : CALL 0x00633e6b
00a654f9 : MOV ESP,EBP
00a654fb : POP EBP
00a654fc : RET
