PROGRAM  : Maestia.exe
FUNCTION : FUN_00b07df0
ENTRY    : 00b07df0
BODY     : [[00b07df0, 00b08107]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00b07df0(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined1 local_6c [28];
  undefined1 local_50 [28];
  undefined1 local_34 [28];
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  iVar3 = DAT_00d7c54c;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b5d7fe;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = in_ECX[4];
  FUN_004437f0(&local_14);
  if ((local_18 == *(int *)(iVar3 + 0x44)) || (*(int *)(local_18 + 0x10) == 0))
  goto switchD_00b07e70_caseD_6;
  switch(*(undefined2 *)(*(int *)(local_18 + 0x10) + 0x180)) {
  case 5:
    if (*(int *)(*DAT_00da9894 + 0x184) == 0) {
      ExceptionList = local_10;
      return;
    }
    if (*(char *)(*(int *)(*DAT_00da9894 + 0x184) + 0x32) == '\0') {
      ExceptionList = local_10;
      return;
    }
    iVar3 = in_ECX[10];
    if (iVar3 == 0) {
      ExceptionList = local_10;
      return;
    }
    uVar5 = 2;
    uVar4 = 0x18;
    break;
  default:
    goto switchD_00b07e70_caseD_6;
  case 0xb:
    if (*(int *)(*DAT_00da9894 + 0x1e8) == 0) {
      ExceptionList = local_10;
      return;
    }
    if (*(char *)(*(int *)(*DAT_00da9894 + 0x1e8) + 0x32) == '\0') {
      ExceptionList = local_10;
      return;
    }
    iVar3 = in_ECX[10];
    if (iVar3 == 0) {
      ExceptionList = local_10;
      return;
    }
    uVar5 = 3;
    uVar4 = 0x97;
    break;
  case 0xc:
    if (*(int *)(*(int *)(DAT_0172491c + 0x17c) + 0x1f54) != 0) {
      FUN_00406460(L"IDS_ITEM_NOT_CHANGE_ALLIANCE_EXIST_PARTY");
      local_8 = 0;
      piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
      uVar4 = FUN_0081d120(local_6c);
      local_8._0_1_ = 1;
      (**(code **)(*piVar1 + 0x44))(uVar4,3);
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
    if ((*(int *)(*DAT_00da9894 + 0x188) != 0) &&
       (*(short *)(*(int *)(*(int *)(*DAT_00da9894 + 0x188) + 0x10) + 0xb8) != 0)) {
      FUN_00406460(L"IDS_ITEM_NOT_CHANGE_ALLIANCE_EXIST_GUILD");
      local_8 = 2;
      iVar3 = FUN_0081d120(local_50);
      local_8._0_1_ = 3;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      FUN_00406460(iVar3);
      local_8._0_1_ = 4;
      (**(code **)(**(int **)(*DAT_00da9894 + 0x1a8) + 0x44))(local_34,3,uVar2);
      local_8._0_1_ = 3;
      FUN_00406560();
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      ExceptionList = local_10;
      return;
    }
  case 0x26:
    iVar3 = *(int *)(*DAT_00da9894 + 0x120);
    if ((iVar3 != 0) && (*(char *)(iVar3 + 0x32) != '\0')) {
      FUN_00a7ce80(iVar3);
      ExceptionList = local_10;
      return;
    }
switchD_00b07e70_caseD_6:
    (**(code **)(*in_ECX + 0x10))();
    ExceptionList = local_10;
    return;
  case 0xd:
    if ((*(int *)(*DAT_00da9894 + 0x1e4) == 0) ||
       (*(char *)(*(int *)(*DAT_00da9894 + 0x1e4) + 0x32) == '\0')) goto switchD_00b07e70_caseD_6;
    iVar3 = in_ECX[10];
    if (iVar3 == 0) {
      ExceptionList = local_10;
      return;
    }
    uVar5 = 0;
    uVar4 = 0x98;
    break;
  case 0xe:
  case 0xf:
    if (*(int *)(*DAT_00da9894 + 0x1e4) == 0) {
      ExceptionList = local_10;
      return;
    }
    if (*(char *)(*(int *)(*DAT_00da9894 + 0x1e4) + 0x32) == '\0') {
      ExceptionList = local_10;
      return;
    }
    iVar3 = in_ECX[10];
    if (iVar3 == 0) {
      ExceptionList = local_10;
      return;
    }
    uVar5 = 3;
    uVar4 = 0x98;
  }
  FUN_008ef980(*(undefined4 *)(iVar3 + 0x2c),(short)in_ECX[0xb],*(undefined2 *)((int)in_ECX + 0x2e),
               uVar4,uVar5,0,1);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00b07df0 : PUSH EBP
00b07df1 : MOV EBP,ESP
00b07df3 : PUSH -0x1
00b07df5 : PUSH 0xb5d7fe
00b07dfa : MOV EAX,FS:[0x0]
00b07e00 : PUSH EAX
00b07e01 : SUB ESP,0x94
00b07e07 : PUSH ESI
00b07e08 : PUSH EDI
00b07e09 : MOV EAX,[0x00d66fa0]
00b07e0e : XOR EAX,EBP
00b07e10 : PUSH EAX
00b07e11 : LEA EAX,[EBP + -0xc]
00b07e14 : MOV FS:[0x0],EAX
00b07e1a : MOV ESI,ECX
00b07e1c : MOV EAX,dword ptr [ESI + 0x10]
00b07e1f : MOV EDI,dword ptr [0x00d7c54c]
00b07e25 : LEA ECX,[EBP + -0x10]
00b07e28 : MOV dword ptr [EBP + -0x10],EAX
00b07e2b : PUSH ECX
00b07e2c : LEA ECX,[EDI + 0x40]
00b07e2f : LEA EAX,[EBP + -0x14]
00b07e32 : CALL 0x004437f0
00b07e37 : MOV EDI,dword ptr [EDI + 0x44]
00b07e3a : MOV EAX,dword ptr [EBP + -0x14]
00b07e3d : CMP EAX,EDI
00b07e3f : JZ 0x00b080ee
00b07e45 : MOV EAX,dword ptr [EAX + 0x10]
00b07e48 : TEST EAX,EAX
00b07e4a : JZ 0x00b080ee
00b07e50 : MOVZX EAX,word ptr [EAX + 0x180]
00b07e57 : ADD EAX,-0x5
00b07e5a : CMP EAX,0x21
00b07e5d : JA 0x00b080ee
00b07e63 : MOVZX EDX,byte ptr [EAX + 0xb08124]
00b07e6a : MOV ECX,dword ptr [0x00da9894]
00b07e70 : JMP dword ptr [EDX*0x4 + 0xb08108]
00b07e77 : MOV EAX,[0x00da9894]
00b07e7c : MOV ECX,dword ptr [EAX]
00b07e7e : MOV EAX,dword ptr [ECX + 0x184]
00b07e84 : TEST EAX,EAX
00b07e86 : JZ 0x00b080f7
00b07e8c : CMP byte ptr [EAX + 0x32],0x0
00b07e90 : JZ 0x00b080f7
00b07e96 : MOV EAX,dword ptr [ESI + 0x28]
00b07e99 : TEST EAX,EAX
00b07e9b : JZ 0x00b080f7
00b07ea1 : PUSH 0x1
00b07ea3 : PUSH 0x0
00b07ea5 : PUSH 0x2
00b07ea7 : PUSH 0x18
00b07ea9 : MOVZX EDX,word ptr [ESI + 0x2e]
00b07ead : MOVZX ECX,word ptr [ESI + 0x2c]
00b07eb1 : PUSH EDX
00b07eb2 : MOV EDX,dword ptr [EAX + 0x2c]
00b07eb5 : PUSH ECX
00b07eb6 : PUSH EDX
00b07eb7 : CALL 0x008ef980
00b07ebc : ADD ESP,0x1c
00b07ebf : MOV ECX,dword ptr [EBP + -0xc]
00b07ec2 : MOV dword ptr FS:[0x0],ECX
00b07ec9 : POP ECX
00b07eca : POP EDI
00b07ecb : POP ESI
00b07ecc : MOV ESP,EBP
00b07ece : POP EBP
00b07ecf : RET
00b07ed0 : MOV EAX,[0x00da9894]
00b07ed5 : MOV ECX,dword ptr [EAX]
00b07ed7 : MOV EAX,dword ptr [ECX + 0x1e8]
00b07edd : TEST EAX,EAX
00b07edf : JZ 0x00b080f7
00b07ee5 : CMP byte ptr [EAX + 0x32],0x0
00b07ee9 : JZ 0x00b080f7
00b07eef : MOV EAX,dword ptr [ESI + 0x28]
00b07ef2 : TEST EAX,EAX
00b07ef4 : JZ 0x00b080f7
00b07efa : PUSH 0x1
00b07efc : PUSH 0x0
00b07efe : PUSH 0x3
00b07f00 : PUSH 0x97
00b07f05 : JMP 0x00b07ea9
00b07f07 : MOV EAX,[0x00da9894]
00b07f0c : MOV ECX,dword ptr [EAX]
00b07f0e : MOV EAX,dword ptr [ECX + 0x1e4]
00b07f14 : TEST EAX,EAX
00b07f16 : JZ 0x00b080f7
00b07f1c : CMP byte ptr [EAX + 0x32],0x0
00b07f20 : JZ 0x00b080f7
00b07f26 : MOV EAX,dword ptr [ESI + 0x28]
00b07f29 : TEST EAX,EAX
00b07f2b : JZ 0x00b080f7
00b07f31 : PUSH 0x1
00b07f33 : PUSH 0x0
00b07f35 : PUSH 0x3
00b07f37 : PUSH 0x98
00b07f3c : JMP 0x00b07ea9
00b07f41 : MOV EAX,[0x00da9894]
00b07f46 : MOV ECX,dword ptr [EAX]
00b07f48 : MOV EAX,dword ptr [ECX + 0x1e4]
00b07f4e : TEST EAX,EAX
00b07f50 : JZ 0x00b080ee
00b07f56 : CMP byte ptr [EAX + 0x32],0x0
00b07f5a : JZ 0x00b080ee
00b07f60 : MOV EAX,dword ptr [ESI + 0x28]
00b07f63 : TEST EAX,EAX
00b07f65 : JZ 0x00b080f7
00b07f6b : PUSH 0x1
00b07f6d : PUSH 0x0
00b07f6f : PUSH 0x0
00b07f71 : PUSH 0x98
00b07f76 : JMP 0x00b07ea9
00b07f7b : MOV EAX,[0x0172491c]
00b07f80 : MOV EAX,dword ptr [EAX + 0x17c]
00b07f86 : CMP dword ptr [EAX + 0x1f54],0x0
00b07f8d : JZ 0x00b08001
00b07f8f : PUSH 0xca4360
00b07f94 : LEA ECX,[EBP + -0x68]
00b07f97 : CALL 0x00406460
00b07f9c : MOV dword ptr [EBP + -0x4],0x0
00b07fa3 : MOV ECX,dword ptr [0x00da9894]
00b07fa9 : MOV EAX,dword ptr [ECX]
00b07fab : MOV ECX,dword ptr [0x0172491c]
00b07fb1 : MOV ESI,dword ptr [EAX + 0x1a8]
00b07fb7 : LEA EDX,[EBP + -0x68]
00b07fba : PUSH EDX
00b07fbb : LEA EDI,[EBP + 0xffffff7c]
00b07fc1 : CALL 0x0081d120
00b07fc6 : MOV byte ptr [EBP + -0x4],0x1
00b07fca : MOV EDX,dword ptr [ESI]
00b07fcc : PUSH 0x3
00b07fce : PUSH EAX
00b07fcf : MOV EAX,dword ptr [EDX + 0x44]
00b07fd2 : MOV ECX,ESI
00b07fd4 : CALL EAX
00b07fd6 : MOV byte ptr [EBP + -0x4],0x0
00b07fda : MOV ECX,EDI
00b07fdc : CALL 0x00406560
00b07fe1 : MOV dword ptr [EBP + -0x4],0xffffffff
00b07fe8 : LEA ECX,[EBP + -0x68]
00b07feb : CALL 0x00406560
00b07ff0 : MOV ECX,dword ptr [EBP + -0xc]
00b07ff3 : MOV dword ptr FS:[0x0],ECX
00b07ffa : POP ECX
00b07ffb : POP EDI
00b07ffc : POP ESI
00b07ffd : MOV ESP,EBP
00b07fff : POP EBP
00b08000 : RET
00b08001 : MOV EAX,dword ptr [ECX]
00b08003 : CMP dword ptr [EAX + 0x188],0x0
00b0800a : JZ 0x00b080c5
00b08010 : MOV EAX,dword ptr [EAX + 0x188]
00b08016 : MOV EAX,dword ptr [EAX + 0x10]
00b08019 : CMP word ptr [EAX + 0xb8],0x0
00b08021 : JZ 0x00b080c5
00b08027 : PUSH 0xca43b8
00b0802c : LEA ECX,[EBP + -0x4c]
00b0802f : CALL 0x00406460
00b08034 : MOV dword ptr [EBP + -0x4],0x2
00b0803b : LEA ECX,[EBP + -0x4c]
00b0803e : PUSH ECX
00b0803f : MOV ECX,dword ptr [0x0172491c]
00b08045 : LEA EDI,[EBP + 0xffffff60]
00b0804b : CALL 0x0081d120
00b08050 : MOV byte ptr [EBP + -0x4],0x3
00b08054 : CMP dword ptr [EAX + 0x18],0x8
00b08058 : JC 0x00b0805f
00b0805a : MOV EAX,dword ptr [EAX + 0x4]
00b0805d : JMP 0x00b08062
00b0805f : ADD EAX,0x4
00b08062 : PUSH EAX
00b08063 : LEA ECX,[EBP + -0x30]
00b08066 : CALL 0x00406460
00b0806b : MOV byte ptr [EBP + -0x4],0x4
00b0806f : MOV EDX,dword ptr [0x00da9894]
00b08075 : MOV EAX,dword ptr [EDX]
00b08077 : MOV ECX,dword ptr [EAX + 0x1a8]
00b0807d : MOV EAX,dword ptr [ECX]
00b0807f : MOV EAX,dword ptr [EAX + 0x44]
00b08082 : PUSH 0x3
00b08084 : LEA EDX,[EBP + -0x30]
00b08087 : PUSH EDX
00b08088 : CALL EAX
00b0808a : MOV byte ptr [EBP + -0x4],0x3
00b0808e : LEA ECX,[EBP + -0x30]
00b08091 : CALL 0x00406560
00b08096 : MOV byte ptr [EBP + -0x4],0x2
00b0809a : LEA ECX,[EBP + 0xffffff60]
00b080a0 : CALL 0x00406560
00b080a5 : MOV dword ptr [EBP + -0x4],0xffffffff
00b080ac : LEA ECX,[EBP + -0x4c]
00b080af : CALL 0x00406560
00b080b4 : MOV ECX,dword ptr [EBP + -0xc]
00b080b7 : MOV dword ptr FS:[0x0],ECX
00b080be : POP ECX
00b080bf : POP EDI
00b080c0 : POP ESI
00b080c1 : MOV ESP,EBP
00b080c3 : POP EBP
00b080c4 : RET
00b080c5 : MOV ECX,dword ptr [ECX]
00b080c7 : MOV EAX,dword ptr [ECX + 0x120]
00b080cd : TEST EAX,EAX
00b080cf : JZ 0x00b080ee
00b080d1 : CMP byte ptr [EAX + 0x32],0x0
00b080d5 : JZ 0x00b080ee
00b080d7 : PUSH EAX
00b080d8 : CALL 0x00a7ce80
00b080dd : MOV ECX,dword ptr [EBP + -0xc]
00b080e0 : MOV dword ptr FS:[0x0],ECX
00b080e7 : POP ECX
00b080e8 : POP EDI
00b080e9 : POP ESI
00b080ea : MOV ESP,EBP
00b080ec : POP EBP
00b080ed : RET
00b080ee : MOV EDX,dword ptr [ESI]
00b080f0 : MOV EAX,dword ptr [EDX + 0x10]
00b080f3 : MOV ECX,ESI
00b080f5 : CALL EAX
00b080f7 : MOV ECX,dword ptr [EBP + -0xc]
00b080fa : MOV dword ptr FS:[0x0],ECX
00b08101 : POP ECX
00b08102 : POP EDI
00b08103 : POP ESI
00b08104 : MOV ESP,EBP
00b08106 : POP EBP
00b08107 : RET
