PROGRAM  : Maestia.exe
FUNCTION : FUN_005500f0
ENTRY    : 005500f0
BODY     : [[005500f0, 00550138] [00550140, 0055024b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005500f0(int param_1,int param_2,int *param_3,undefined4 param_4)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  char *pcVar6;
  int *piVar7;
  int local_24;
  int local_1c;
  int local_18;
  byte local_14;
  undefined1 local_10 [16];
  
  iVar3 = param_2;
  iVar4 = FUN_00530910(7);
  if (iVar4 != 0) {
    *(uint *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1U & 0x8fffffff;
  }
  local_24 = 0;
  if (*param_3 != 0) {
    piVar7 = param_3;
    do {
      iVar5 = FUN_00515840(0x34,0);
      if (iVar5 == 0) {
        local_1c = 0;
      }
      else {
        local_1c = FUN_00568920(iVar3,iVar4,piVar7[1]);
      }
      local_14 = 0;
      local_18 = 0;
      FUN_00526210(&local_1c);
      pcVar2 = (char *)*piVar7;
      pcVar6 = pcVar2;
      do {
        cVar1 = *pcVar6;
        pcVar6 = pcVar6 + 1;
      } while (cVar1 != '\0');
      param_2 = FUN_00525380(pcVar2,(int)pcVar6 - (int)(pcVar2 + 1),0);
      *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + 1;
      (**(code **)(*(int *)(param_1 + 0x10) + 0x28))(iVar3,&param_2,local_10,param_4);
      *(int *)(param_2 + 8) = *(int *)(param_2 + 8) + -1;
      if (*(int *)(param_2 + 8) == 0) {
        FUN_00525340();
      }
      FUN_00526bc0();
      if (((local_14 & 2) == 0) && (local_1c != 0)) {
        FUN_00503db0();
      }
      local_1c = 0;
      if (((local_14 & 1) == 0) && (local_18 != 0)) {
        FUN_00503db0();
      }
      local_24 = local_24 + 1;
      piVar7 = param_3 + local_24 * 2;
      local_18 = 0;
    } while (param_3[local_24 * 2] != 0);
  }
  if (iVar4 != 0) {
    FUN_00503db0();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005500f0 : SUB ESP,0x24
005500f3 : PUSH EBP
005500f4 : MOV EBP,dword ptr [ESP + 0x30]
005500f8 : MOV ECX,dword ptr [EBP]
005500fb : PUSH ESI
005500fc : PUSH EDI
005500fd : PUSH 0x7
005500ff : CALL 0x00530910
00550104 : MOV EDI,EAX
00550106 : MOV dword ptr [ESP + 0x10],EDI
0055010a : TEST EDI,EDI
0055010c : JZ 0x0055011a
0055010e : MOV EAX,dword ptr [EDI + 0x8]
00550111 : INC EAX
00550112 : AND EAX,0x8fffffff
00550117 : MOV dword ptr [EDI + 0x8],EAX
0055011a : MOV ESI,dword ptr [ESP + 0x3c]
0055011e : CMP dword ptr [ESI],0x0
00550121 : MOV dword ptr [ESP + 0xc],0x0
00550129 : JZ 0x00550238
0055012f : PUSH EBX
00550130 : MOV EBX,dword ptr [ESP + 0x38]
00550134 : ADD EBX,0x10
00550137 : JMP 0x00550140
00550140 : MOV ECX,dword ptr [EBP]
00550143 : MOV ECX,dword ptr [ECX + 0x288]
00550149 : PUSH 0x0
0055014b : PUSH 0x34
0055014d : CALL 0x00515840
00550152 : TEST EAX,EAX
00550154 : JZ 0x00550165
00550156 : MOV EDX,dword ptr [ESI + 0x4]
00550159 : PUSH EDX
0055015a : PUSH EDI
0055015b : PUSH EBP
0055015c : MOV ECX,EAX
0055015e : CALL 0x00568920
00550163 : JMP 0x00550167
00550165 : XOR EAX,EAX
00550167 : MOV dword ptr [ESP + 0x18],EAX
0055016b : LEA EAX,[ESP + 0x18]
0055016f : PUSH EAX
00550170 : LEA ECX,[ESP + 0x28]
00550174 : MOV byte ptr [ESP + 0x24],0x0
00550179 : MOV dword ptr [ESP + 0x20],0x0
00550181 : CALL 0x00526210
00550186 : MOV ESI,dword ptr [ESI]
00550188 : MOV ECX,dword ptr [EBP]
0055018b : MOV EAX,ESI
0055018d : ADD ECX,0x8
00550190 : LEA EDI,[EAX + 0x1]
00550193 : MOV DL,byte ptr [EAX]
00550195 : INC EAX
00550196 : TEST DL,DL
00550198 : JNZ 0x00550193
0055019a : SUB EAX,EDI
0055019c : XOR EDI,EDI
0055019e : PUSH EDI
0055019f : PUSH EAX
005501a0 : PUSH ESI
005501a1 : ADD ECX,0x24c
005501a7 : CALL 0x00525380
005501ac : MOV dword ptr [ESP + 0x3c],EAX
005501b0 : INC dword ptr [EAX + 0x8]
005501b3 : MOV EAX,dword ptr [ESP + 0x44]
005501b7 : MOV EDX,dword ptr [EBX]
005501b9 : MOV EDX,dword ptr [EDX + 0x28]
005501bc : PUSH EAX
005501bd : LEA ECX,[ESP + 0x28]
005501c1 : PUSH ECX
005501c2 : LEA EAX,[ESP + 0x44]
005501c6 : PUSH EAX
005501c7 : PUSH EBP
005501c8 : MOV ECX,EBX
005501ca : CALL EDX
005501cc : MOV EAX,dword ptr [ESP + 0x3c]
005501d0 : DEC dword ptr [EAX + 0x8]
005501d3 : MOV ECX,EAX
005501d5 : ADD EAX,0x8
005501d8 : CMP dword ptr [EAX],EDI
005501da : JNZ 0x005501e1
005501dc : CALL 0x00525340
005501e1 : LEA ECX,[ESP + 0x24]
005501e5 : CALL 0x00526bc0
005501ea : TEST byte ptr [ESP + 0x20],0x2
005501ef : JNZ 0x005501fe
005501f1 : MOV ECX,dword ptr [ESP + 0x18]
005501f5 : CMP ECX,EDI
005501f7 : JZ 0x005501fe
005501f9 : CALL 0x00503db0
005501fe : TEST byte ptr [ESP + 0x20],0x1
00550203 : MOV dword ptr [ESP + 0x18],EDI
00550207 : JNZ 0x00550216
00550209 : MOV ECX,dword ptr [ESP + 0x1c]
0055020d : CMP ECX,EDI
0055020f : JZ 0x00550216
00550211 : CALL 0x00503db0
00550216 : MOV EAX,dword ptr [ESP + 0x10]
0055021a : MOV ECX,dword ptr [ESP + 0x40]
0055021e : INC EAX
0055021f : CMP dword ptr [ECX + EAX*0x8],EDI
00550222 : LEA ESI,[ECX + EAX*0x8]
00550225 : MOV dword ptr [ESP + 0x1c],EDI
00550229 : MOV EDI,dword ptr [ESP + 0x14]
0055022d : MOV dword ptr [ESP + 0x10],EAX
00550231 : JNZ 0x00550140
00550237 : POP EBX
00550238 : TEST EDI,EDI
0055023a : JZ 0x00550243
0055023c : MOV ECX,EDI
0055023e : CALL 0x00503db0
00550243 : POP EDI
00550244 : POP ESI
00550245 : POP EBP
00550246 : ADD ESP,0x24
00550249 : RET 0x10
