PROGRAM  : Maestia.exe
FUNCTION : FUN_00926ad0
ENTRY    : 00926ad0
BODY     : [[00926ad0, 00926d48]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00926ad0(int param_1)

{
  undefined2 uVar1;
  undefined2 uVar2;
  int iVar3;
  uint uVar4;
  int *piVar5;
  uint uVar6;
  undefined4 uVar7;
  int iVar8;
  undefined1 local_68 [28];
  undefined1 local_4c [28];
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3f9dc;
  local_10 = ExceptionList;
  uVar6 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  iVar3 = *(int *)(*DAT_00da9894 + 0x128);
  if (iVar3 == 0) {
    return;
  }
  uVar4 = *(uint *)(iVar3 + 0x40);
  if (uVar4 < 0x44) {
    if (0x3f < uVar4) {
      return;
    }
    switch(uVar4) {
    case 0:
    case 0x11:
    case 0x12:
    case 0x13:
    case 0x30:
      return;
    }
  }
  else {
    if (uVar4 == 0x94) {
      return;
    }
    if (uVar4 == 0xffffffff) {
      return;
    }
  }
  ExceptionList = &local_10;
  *(undefined4 *)(param_1 + 0x6c) = 1;
  iVar8 = *(int *)(iVar3 + 0x4c);
  uVar1 = *(undefined2 *)(iVar3 + 0x44);
  uVar2 = *(undefined2 *)(iVar3 + 0x46);
  if (iVar8 != 0) {
    if (*(int *)(param_1 + 0xe8) == 0) {
      iVar8 = FUN_004049b0(*(undefined4 *)(iVar8 + 0x10),uVar6);
      if (iVar8 != 0) {
        if (*(int *)(param_1 + 100) == 0) {
          if ((*(char *)(*(int *)(*DAT_00da9894 + 0x260) + 0x32) == '\0') ||
             (*(short *)(*(int *)(*DAT_00da9894 + 0x260) + 0x42) != 0x656)) {
            FUN_008ef980(*(undefined4 *)(iVar3 + 0x40),uVar1,uVar2,0x15,0,0,1);
          }
          else {
            FUN_00406460(L"IDS_INPUT_ITEM_SLOT");
            local_8 = 4;
            piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
            uVar7 = FUN_0081d120(local_30);
            local_8._0_1_ = 5;
            (**(code **)(*piVar5 + 0x44))(uVar7,3);
            local_8 = CONCAT31(local_8._1_3_,4);
            FUN_00406560();
            local_8 = 0xffffffff;
            FUN_00406560();
          }
        }
        else {
          FUN_00406460(L"IDS_INPUT_ITEM_SLOT");
          local_8 = 2;
          piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
          uVar7 = FUN_0081d120(local_4c);
          local_8._0_1_ = 3;
          (**(code **)(*piVar5 + 0x44))(uVar7,3);
          local_8 = CONCAT31(local_8._1_3_,2);
          FUN_00406560();
          local_8 = 0xffffffff;
          FUN_00406560();
        }
      }
    }
    else {
      local_14 = *(uint *)(iVar8 + 0x10);
      uVar6 = FUN_00925f40();
      if (local_14 == (uVar6 & 0xffff | 0x6740000)) {
        if (*(int *)(param_1 + 100) == 0) {
          FUN_008efa90(*(undefined4 *)(iVar3 + 0x40),uVar1,uVar2,0x15,0,0);
        }
        else {
          FUN_00406460(L"IDS_INPUT_ITEM_SLOT");
          local_8 = 0;
          piVar5 = *(int **)(*DAT_00da9894 + 0x1a8);
          uVar7 = FUN_0081d120(local_68);
          local_8._0_1_ = 1;
          (**(code **)(*piVar5 + 0x44))(uVar7,3);
          local_8 = (uint)local_8._1_3_ << 8;
          FUN_00406560();
          local_8 = 0xffffffff;
          FUN_00406560();
        }
      }
    }
  }
  FUN_0097fa60();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00926ad0 : PUSH EBP
00926ad1 : MOV EBP,ESP
00926ad3 : PUSH -0x1
00926ad5 : PUSH 0xb3f9dc
00926ada : MOV EAX,FS:[0x0]
00926ae0 : PUSH EAX
00926ae1 : SUB ESP,0xb0
00926ae7 : PUSH EBX
00926ae8 : PUSH ESI
00926ae9 : PUSH EDI
00926aea : MOV EAX,[0x00d66fa0]
00926aef : XOR EAX,EBP
00926af1 : PUSH EAX
00926af2 : LEA EAX,[EBP + -0xc]
00926af5 : MOV FS:[0x0],EAX
00926afb : MOV EAX,[0x00da9894]
00926b00 : MOV EAX,dword ptr [EAX]
00926b02 : MOV ESI,dword ptr [EAX + 0x128]
00926b08 : TEST ESI,ESI
00926b0a : JZ 0x00926d35
00926b10 : MOV EAX,dword ptr [ESI + 0x40]
00926b13 : CMP EAX,0x43
00926b16 : JA 0x00926b34
00926b18 : CMP EAX,0x40
00926b1b : JNC 0x00926d35
00926b21 : CMP EAX,0x30
00926b24 : JA 0x00926b48
00926b26 : MOVZX ECX,byte ptr [EAX + 0x926d54]
00926b2d : JMP dword ptr [ECX*0x4 + 0x926d4c]
00926b34 : CMP EAX,0x94
00926b39 : JZ 0x00926d35
00926b3f : CMP EAX,-0x1
00926b42 : JZ 0x00926d35
00926b48 : MOV ECX,dword ptr [EBP + 0x8]
00926b4b : MOV dword ptr [ECX + 0x6c],0x1
00926b52 : MOV EAX,dword ptr [ESI + 0x4c]
00926b55 : MOVZX EDI,word ptr [ESI + 0x44]
00926b59 : MOVZX EBX,word ptr [ESI + 0x46]
00926b5d : TEST EAX,EAX
00926b5f : JZ 0x00926d2e
00926b65 : CMP dword ptr [ECX + 0xe8],0x0
00926b6c : JZ 0x00926c13
00926b72 : MOV EDX,dword ptr [EAX + 0x10]
00926b75 : MOV dword ptr [EBP + -0x10],EDX
00926b78 : CALL 0x00925f40
00926b7d : MOVZX EAX,AX
00926b80 : OR EAX,0x6740000
00926b85 : CMP dword ptr [EBP + -0x10],EAX
00926b88 : JNZ 0x00926d2e
00926b8e : MOV ECX,dword ptr [EBP + 0x8]
00926b91 : CMP dword ptr [ECX + 0x64],0x0
00926b95 : JZ 0x00926bfa
00926b97 : PUSH 0xc6b06c
00926b9c : LEA ECX,[EBP + -0x64]
00926b9f : CALL 0x00406460
00926ba4 : MOV dword ptr [EBP + -0x4],0x0
00926bab : MOV EDX,dword ptr [0x00da9894]
00926bb1 : MOV EAX,dword ptr [EDX]
00926bb3 : MOV EBX,dword ptr [EAX + 0x1a8]
00926bb9 : MOV ECX,dword ptr [0x0172491c]
00926bbf : LEA EAX,[EBP + -0x64]
00926bc2 : PUSH EAX
00926bc3 : LEA EDI,[EBP + -0x80]
00926bc6 : CALL 0x0081d120
00926bcb : MOV byte ptr [EBP + -0x4],0x1
00926bcf : MOV EDX,dword ptr [EBX]
00926bd1 : PUSH 0x3
00926bd3 : PUSH EAX
00926bd4 : MOV EAX,dword ptr [EDX + 0x44]
00926bd7 : MOV ECX,EBX
00926bd9 : CALL EAX
00926bdb : MOV byte ptr [EBP + -0x4],0x0
00926bdf : MOV ECX,EDI
00926be1 : CALL 0x00406560
00926be6 : MOV dword ptr [EBP + -0x4],0xffffffff
00926bed : LEA ECX,[EBP + -0x64]
00926bf0 : CALL 0x00406560
00926bf5 : JMP 0x00926d2e
00926bfa : MOV ECX,dword ptr [ESI + 0x40]
00926bfd : PUSH 0x0
00926bff : PUSH 0x0
00926c01 : PUSH 0x15
00926c03 : PUSH EBX
00926c04 : PUSH EDI
00926c05 : PUSH ECX
00926c06 : CALL 0x008efa90
00926c0b : ADD ESP,0x18
00926c0e : JMP 0x00926d2e
00926c13 : MOV EAX,dword ptr [EAX + 0x10]
00926c16 : PUSH EAX
00926c17 : CALL 0x004049b0
00926c1c : ADD ESP,0x4
00926c1f : TEST EAX,EAX
00926c21 : JZ 0x00926d2e
00926c27 : MOV EDX,dword ptr [EBP + 0x8]
00926c2a : CMP dword ptr [EDX + 0x64],0x0
00926c2e : JZ 0x00926c95
00926c30 : PUSH 0xc6b094
00926c35 : LEA ECX,[EBP + -0x48]
00926c38 : CALL 0x00406460
00926c3d : MOV dword ptr [EBP + -0x4],0x2
00926c44 : MOV EAX,[0x00da9894]
00926c49 : MOV EAX,dword ptr [EAX]
00926c4b : MOV EBX,dword ptr [EAX + 0x1a8]
00926c51 : LEA ECX,[EBP + -0x48]
00926c54 : PUSH ECX
00926c55 : MOV ECX,dword ptr [0x0172491c]
00926c5b : LEA EDI,[EBP + 0xffffff64]
00926c61 : CALL 0x0081d120
00926c66 : MOV byte ptr [EBP + -0x4],0x3
00926c6a : MOV EDX,dword ptr [EBX]
00926c6c : PUSH 0x3
00926c6e : PUSH EAX
00926c6f : MOV EAX,dword ptr [EDX + 0x44]
00926c72 : MOV ECX,EBX
00926c74 : CALL EAX
00926c76 : MOV byte ptr [EBP + -0x4],0x2
00926c7a : MOV ECX,EDI
00926c7c : CALL 0x00406560
00926c81 : MOV dword ptr [EBP + -0x4],0xffffffff
00926c88 : LEA ECX,[EBP + -0x48]
00926c8b : CALL 0x00406560
00926c90 : JMP 0x00926d2e
00926c95 : MOV ECX,dword ptr [0x00da9894]
00926c9b : MOV EAX,dword ptr [ECX]
00926c9d : MOV ECX,dword ptr [EAX + 0x260]
00926ca3 : CMP byte ptr [ECX + 0x32],0x0
00926ca7 : JZ 0x00926d18
00926ca9 : MOV EAX,ECX
00926cab : MOV EDX,0x656
00926cb0 : CMP word ptr [EAX + 0x42],DX
00926cb4 : JNZ 0x00926d18
00926cb6 : PUSH 0xc6b0bc
00926cbb : LEA ECX,[EBP + -0x2c]
00926cbe : CALL 0x00406460
00926cc3 : MOV dword ptr [EBP + -0x4],0x4
00926cca : MOV EAX,[0x00da9894]
00926ccf : MOV EAX,dword ptr [EAX]
00926cd1 : MOV EBX,dword ptr [EAX + 0x1a8]
00926cd7 : LEA ECX,[EBP + -0x2c]
00926cda : PUSH ECX
00926cdb : MOV ECX,dword ptr [0x0172491c]
00926ce1 : LEA EDI,[EBP + 0xffffff48]
00926ce7 : CALL 0x0081d120
00926cec : MOV byte ptr [EBP + -0x4],0x5
00926cf0 : MOV EDX,dword ptr [EBX]
00926cf2 : PUSH 0x3
00926cf4 : PUSH EAX
00926cf5 : MOV EAX,dword ptr [EDX + 0x44]
00926cf8 : MOV ECX,EBX
00926cfa : CALL EAX
00926cfc : MOV byte ptr [EBP + -0x4],0x4
00926d00 : MOV ECX,EDI
00926d02 : CALL 0x00406560
00926d07 : MOV dword ptr [EBP + -0x4],0xffffffff
00926d0e : LEA ECX,[EBP + -0x2c]
00926d11 : CALL 0x00406560
00926d16 : JMP 0x00926d2e
00926d18 : MOV ECX,dword ptr [ESI + 0x40]
00926d1b : PUSH 0x1
00926d1d : PUSH 0x0
00926d1f : PUSH 0x0
00926d21 : PUSH 0x15
00926d23 : PUSH EBX
00926d24 : PUSH EDI
00926d25 : PUSH ECX
00926d26 : CALL 0x008ef980
00926d2b : ADD ESP,0x1c
00926d2e : MOV ECX,ESI
00926d30 : CALL 0x0097fa60
00926d35 : MOV ECX,dword ptr [EBP + -0xc]
00926d38 : MOV dword ptr FS:[0x0],ECX
00926d3f : POP ECX
00926d40 : POP EDI
00926d41 : POP ESI
00926d42 : POP EBX
00926d43 : MOV ESP,EBP
00926d45 : POP EBP
00926d46 : RET 0x4
