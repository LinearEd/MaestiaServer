PROGRAM  : Maestia.exe
FUNCTION : FUN_008d3470
ENTRY    : 008d3470
BODY     : [[008d3470, 008d3684]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008d3470(void)

{
  undefined4 uVar1;
  char cVar2;
  DWORD DVar3;
  int iVar4;
  code *pcVar5;
  int unaff_EDI;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  
  pcVar5 = timeGetTime_exref;
  if (**(char **)(unaff_EDI + 0xb8) != '\0') {
    DVar3 = timeGetTime();
    if (5000 < DVar3 - *(int *)(unaff_EDI + 0xe0)) {
      if (*(int *)(*DAT_00da9894 + 0x158) != 0) {
        FUN_0098a000(0x313d);
      }
      FUN_008d2cd0();
    }
  }
  if (*(char *)(*(int *)(unaff_EDI + 0xb8) + 1) != '\0') {
    DVar3 = timeGetTime();
    if (7000 < DVar3 - *(int *)(unaff_EDI + 0xdc)) {
      *(undefined1 *)(*(int *)(unaff_EDI + 0xb8) + 1) = 0;
      uVar1 = DAT_00da93ec;
      *(undefined4 *)(unaff_EDI + 0x100) = 0;
      *(undefined1 *)(unaff_EDI + 0xca) = 0;
      iVar4 = *(int *)(unaff_EDI + 0xb8);
      local_10 = *(undefined4 *)(iVar4 + 0x20);
      local_c = *(undefined4 *)(iVar4 + 0x24);
      local_8 = *(undefined4 *)(iVar4 + 0x28);
      FUN_00a2db00(uVar1,&local_10,0,0);
    }
  }
  if (*(int *)(unaff_EDI + 0xe4) == 0) goto LAB_008d35df;
  DVar3 = timeGetTime();
  if (DVar3 - *(int *)(unaff_EDI + 0xe4) < 0x1389) goto LAB_008d35df;
  uVar1 = *(undefined4 *)(unaff_EDI + 0xf0);
  iVar4 = FUN_00a1a840(uVar1);
  if (iVar4 == 0) {
    iVar4 = FUN_00a1a6d0(uVar1);
    if (iVar4 != 0) goto LAB_008d35ab;
    iVar4 = FUN_00a1a780(uVar1);
    if (iVar4 != 0) goto LAB_008d35ab;
  }
  else {
LAB_008d35ab:
    cVar2 = FUN_008896f0();
    if (cVar2 != '\0') {
      FUN_00a0d390(DAT_017247d4,0);
      *(undefined4 *)(unaff_EDI + 0xf0) = 0xffffffff;
    }
  }
  pcVar5 = timeGetTime_exref;
  *(undefined4 *)(unaff_EDI + 0xe4) = 0;
LAB_008d35df:
  iVar4 = (*pcVar5)();
  if (((18000 < (uint)(iVar4 - *(int *)(unaff_EDI + 0xe8))) && (*(int *)(unaff_EDI + 0xe8) != 0)) &&
     (*(short *)(*(int *)(DAT_0172491c + 0x17c) + 0x43a) == 0xf)) {
    if ((*(int *)(DAT_0172491c + 0x17c) != 0) && (*(char *)(*(int *)(unaff_EDI + 0xb8) + 4) != '\0')
       ) {
      FUN_009a4db0();
      FUN_008018d0(L"[AutoGameLOG] pMyChar stop");
    }
    *(undefined4 *)(unaff_EDI + 0xe8) = 0;
  }
  if (*(char *)(*(int *)(unaff_EDI + 0xb8) + 5) != '\0') {
    iVar4 = (*pcVar5)();
    if ((5000 < (uint)(iVar4 - *(int *)(unaff_EDI + 0xec))) && (*(int *)(unaff_EDI + 0xec) != 0)) {
      *(undefined1 *)(*(int *)(unaff_EDI + 0xb8) + 5) = 0;
      *(undefined4 *)(unaff_EDI + 0xec) = 0;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
008d3470 : PUSH EBP
008d3471 : MOV EBP,ESP
008d3473 : MOV EAX,dword ptr [EDI + 0xb8]
008d3479 : SUB ESP,0x18
008d347c : CMP byte ptr [EAX],0x0
008d347f : PUSH EBX
008d3480 : MOV EBX,dword ptr [0x00b85598]
008d3486 : PUSH ESI
008d3487 : JZ 0x008d34bb
008d3489 : CALL EBX
008d348b : SUB EAX,dword ptr [EDI + 0xe0]
008d3491 : CMP EAX,0x1388
008d3496 : JBE 0x008d34bb
008d3498 : MOV ECX,dword ptr [0x00da9894]
008d349e : MOV EDX,dword ptr [ECX]
008d34a0 : MOV ECX,dword ptr [EDX + 0x158]
008d34a6 : TEST ECX,ECX
008d34a8 : JZ 0x008d34b4
008d34aa : PUSH 0x313d
008d34af : CALL 0x0098a000
008d34b4 : MOV ESI,EDI
008d34b6 : CALL 0x008d2cd0
008d34bb : MOV EAX,dword ptr [EDI + 0xb8]
008d34c1 : CMP byte ptr [EAX + 0x1],0x0
008d34c5 : JZ 0x008d3563
008d34cb : CALL EBX
008d34cd : SUB EAX,dword ptr [EDI + 0xdc]
008d34d3 : CMP EAX,0x1b58
008d34d8 : JBE 0x008d3563
008d34de : MOV ECX,dword ptr [EDI + 0xb8]
008d34e4 : MOV byte ptr [ECX + 0x1],0x0
008d34e8 : MOV ECX,dword ptr [0x00da93ec]
008d34ee : MOV dword ptr [EDI + 0x100],0x0
008d34f8 : MOV byte ptr [EDI + 0xca],0x0
008d34ff : MOV EDX,dword ptr [ECX + 0xac]
008d3505 : MOV EAX,dword ptr [EDX + 0x3e8]
008d350b : MOVSS XMM0,dword ptr [EAX + 0x68]
008d3510 : ADD EAX,0x68
008d3513 : MOVSS dword ptr [EBP + -0x18],XMM0
008d3518 : MOVSS XMM0,dword ptr [EAX + 0x4]
008d351d : MOVSS dword ptr [EBP + -0x14],XMM0
008d3522 : MOVSS XMM0,dword ptr [EAX + 0x8]
008d3527 : MOV EAX,dword ptr [EDI + 0xb8]
008d352d : ADD EAX,0x20
008d3530 : MOVSS dword ptr [EBP + -0x10],XMM0
008d3535 : MOVSS XMM0,dword ptr [EAX]
008d3539 : MOVSS dword ptr [EBP + -0xc],XMM0
008d353e : MOVSS XMM0,dword ptr [EAX + 0x4]
008d3543 : PUSH 0x0
008d3545 : MOVSS dword ptr [EBP + -0x8],XMM0
008d354a : MOVSS XMM0,dword ptr [EAX + 0x8]
008d354f : PUSH 0x0
008d3551 : LEA EAX,[EBP + -0xc]
008d3554 : PUSH EAX
008d3555 : PUSH ECX
008d3556 : LEA EAX,[EBP + -0x18]
008d3559 : MOVSS dword ptr [EBP + -0x4],XMM0
008d355e : CALL 0x00a2db00
008d3563 : CMP dword ptr [EDI + 0xe4],0x0
008d356a : JZ 0x008d35df
008d356c : CALL EBX
008d356e : SUB EAX,dword ptr [EDI + 0xe4]
008d3574 : CMP EAX,0x1388
008d3579 : JBE 0x008d35df
008d357b : MOV ESI,dword ptr [EDI + 0xf0]
008d3581 : MOV ECX,dword ptr [0x00da93ec]
008d3587 : PUSH ESI
008d3588 : MOV EBX,ECX
008d358a : CALL 0x00a1a840
008d358f : TEST EAX,EAX
008d3591 : JNZ 0x008d35ab
008d3593 : PUSH ESI
008d3594 : MOV ECX,EBX
008d3596 : CALL 0x00a1a6d0
008d359b : TEST EAX,EAX
008d359d : JNZ 0x008d35ab
008d359f : PUSH ESI
008d35a0 : MOV ECX,EBX
008d35a2 : CALL 0x00a1a780
008d35a7 : TEST EAX,EAX
008d35a9 : JZ 0x008d35cf
008d35ab : CALL 0x008896f0
008d35b0 : TEST AL,AL
008d35b2 : JZ 0x008d35cf
008d35b4 : MOV ECX,dword ptr [0x017247d4]
008d35ba : PUSH 0x0
008d35bc : PUSH ECX
008d35bd : OR ECX,0xffffffff
008d35c0 : CALL 0x00a0d390
008d35c5 : MOV dword ptr [EDI + 0xf0],0xffffffff
008d35cf : MOV EBX,dword ptr [0x00b85598]
008d35d5 : MOV dword ptr [EDI + 0xe4],0x0
008d35df : CALL EBX
008d35e1 : MOV ECX,dword ptr [EDI + 0xe8]
008d35e7 : SUB EAX,ECX
008d35e9 : CMP EAX,0x4650
008d35ee : JBE 0x008d364a
008d35f0 : TEST ECX,ECX
008d35f2 : JZ 0x008d364a
008d35f4 : MOV EDX,dword ptr [0x0172491c]
008d35fa : MOV EAX,dword ptr [EDX + 0x17c]
008d3600 : CMP word ptr [EAX + 0x43a],0xf
008d3608 : JNZ 0x008d364a
008d360a : TEST EAX,EAX
008d360c : JZ 0x008d3640
008d360e : MOV EAX,dword ptr [EDI + 0xb8]
008d3614 : CMP byte ptr [EAX + 0x4],0x0
008d3618 : JZ 0x008d3640
008d361a : MOV ECX,dword ptr [0x00da9894]
008d3620 : MOV EDX,dword ptr [ECX]
008d3622 : MOV ESI,dword ptr [EDX + 0x168]
008d3628 : CALL 0x009a4db0
008d362d : MOV ESI,dword ptr [0x00da98e8]
008d3633 : PUSH 0xc546ac
008d3638 : CALL 0x008018d0
008d363d : ADD ESP,0x4
008d3640 : MOV dword ptr [EDI + 0xe8],0x0
008d364a : MOV EAX,dword ptr [EDI + 0xb8]
008d3650 : CMP byte ptr [EAX + 0x5],0x0
008d3654 : JZ 0x008d367f
008d3656 : CALL EBX
008d3658 : MOV ECX,dword ptr [EDI + 0xec]
008d365e : SUB EAX,ECX
008d3660 : CMP EAX,0x1388
008d3665 : JBE 0x008d367f
008d3667 : TEST ECX,ECX
008d3669 : JZ 0x008d367f
008d366b : MOV ECX,dword ptr [EDI + 0xb8]
008d3671 : MOV byte ptr [ECX + 0x5],0x0
008d3675 : MOV dword ptr [EDI + 0xec],0x0
008d367f : POP ESI
008d3680 : POP EBX
008d3681 : MOV ESP,EBP
008d3683 : POP EBP
008d3684 : RET
