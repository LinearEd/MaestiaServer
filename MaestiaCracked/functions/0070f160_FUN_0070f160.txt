PROGRAM  : Maestia.exe
FUNCTION : FUN_0070f160
ENTRY    : 0070f160
BODY     : [[0070f160, 0070f23d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070f160(int param_1,ushort *param_2)

{
  short *psVar1;
  ushort uVar2;
  int in_EAX;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int local_c;
  uint local_8;
  
  uVar2 = *(ushort *)(in_EAX + 2);
  iVar4 = 0;
  local_8 = 0xffffffff;
  iVar3 = 7;
  iVar7 = 4;
  if (uVar2 == 0) {
    iVar3 = 0x8a;
    iVar7 = 3;
  }
  *(undefined2 *)(in_EAX + 6 + (int)param_2 * 4) = 0xffff;
  if (-1 < (int)param_2) {
    local_c = (int)param_2 + 1;
    uVar5 = (uint)uVar2;
    param_2 = (ushort *)(in_EAX + 6);
    do {
      uVar6 = (uint)*param_2;
      iVar4 = iVar4 + 1;
      if ((iVar3 <= iVar4) || (uVar5 != uVar6)) {
        if (iVar4 < iVar7) {
          psVar1 = (short *)(param_1 + 0xa74 + uVar5 * 4);
          *psVar1 = *psVar1 + (short)iVar4;
        }
        else if (uVar5 == 0) {
          if (iVar4 < 0xb) {
            *(short *)(param_1 + 0xab8) = *(short *)(param_1 + 0xab8) + 1;
          }
          else {
            *(short *)(param_1 + 0xabc) = *(short *)(param_1 + 0xabc) + 1;
          }
        }
        else {
          if (uVar5 != local_8) {
            psVar1 = (short *)(param_1 + 0xa74 + uVar5 * 4);
            *psVar1 = *psVar1 + 1;
          }
          *(short *)(param_1 + 0xab4) = *(short *)(param_1 + 0xab4) + 1;
        }
        iVar4 = 0;
        local_8 = uVar5;
        if (uVar6 == 0) {
          iVar3 = 0x8a;
          iVar7 = 3;
        }
        else if (uVar5 == uVar6) {
          iVar3 = 6;
          iVar7 = 3;
        }
        else {
          iVar3 = 7;
          iVar7 = 4;
        }
      }
      param_2 = param_2 + 2;
      local_c = local_c + -1;
      uVar5 = uVar6;
    } while (local_c != 0);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0070f160 : PUSH EBP
0070f161 : MOV EBP,ESP
0070f163 : SUB ESP,0xc
0070f166 : PUSH EBX
0070f167 : MOV EBX,dword ptr [EBP + 0xc]
0070f16a : PUSH ESI
0070f16b : PUSH EDI
0070f16c : MOV EDI,EAX
0070f16e : MOVZX EAX,word ptr [EDI + 0x2]
0070f172 : XOR EDX,EDX
0070f174 : MOV dword ptr [EBP + -0x4],0xffffffff
0070f17b : MOV dword ptr [EBP + -0xc],EAX
0070f17e : LEA ECX,[EDX + 0x7]
0070f181 : LEA ESI,[EDX + 0x4]
0070f184 : TEST EAX,EAX
0070f186 : JNZ 0x0070f190
0070f188 : MOV ECX,0x8a
0070f18d : LEA ESI,[EAX + 0x3]
0070f190 : MOV EAX,0xffff
0070f195 : MOV word ptr [EDI + EBX*0x4 + 0x6],AX
0070f19a : TEST EBX,EBX
0070f19c : JL 0x0070f237
0070f1a2 : ADD EDI,0x6
0070f1a5 : INC EBX
0070f1a6 : MOV dword ptr [EBP + 0xc],EDI
0070f1a9 : MOV EDI,dword ptr [EBP + 0x8]
0070f1ac : MOV dword ptr [EBP + -0x8],EBX
0070f1af : MOV EBX,dword ptr [EBP + -0xc]
0070f1b2 : MOV EAX,EBX
0070f1b4 : MOV EBX,dword ptr [EBP + 0xc]
0070f1b7 : MOVZX EBX,word ptr [EBX]
0070f1ba : INC EDX
0070f1bb : CMP EDX,ECX
0070f1bd : JGE 0x0070f1c3
0070f1bf : CMP EAX,EBX
0070f1c1 : JZ 0x0070f229
0070f1c3 : CMP EDX,ESI
0070f1c5 : JGE 0x0070f1d1
0070f1c7 : ADD word ptr [EDI + EAX*0x4 + 0xa74],DX
0070f1cf : JMP 0x0070f200
0070f1d1 : TEST EAX,EAX
0070f1d3 : JZ 0x0070f1eb
0070f1d5 : CMP EAX,dword ptr [EBP + -0x4]
0070f1d8 : JZ 0x0070f1e2
0070f1da : INC word ptr [EDI + EAX*0x4 + 0xa74]
0070f1e2 : INC word ptr [EDI + 0xab4]
0070f1e9 : JMP 0x0070f200
0070f1eb : CMP EDX,0xa
0070f1ee : JG 0x0070f1f9
0070f1f0 : INC word ptr [EDI + 0xab8]
0070f1f7 : JMP 0x0070f200
0070f1f9 : INC word ptr [EDI + 0xabc]
0070f200 : XOR EDX,EDX
0070f202 : MOV dword ptr [EBP + -0x4],EAX
0070f205 : TEST EBX,EBX
0070f207 : JNZ 0x0070f213
0070f209 : MOV ECX,0x8a
0070f20e : LEA ESI,[EDX + 0x3]
0070f211 : JMP 0x0070f229
0070f213 : CMP EAX,EBX
0070f215 : JNZ 0x0070f221
0070f217 : MOV ECX,0x6
0070f21c : LEA ESI,[ECX + -0x3]
0070f21f : JMP 0x0070f229
0070f221 : MOV ECX,0x7
0070f226 : LEA ESI,[ECX + -0x3]
0070f229 : ADD dword ptr [EBP + 0xc],0x4
0070f22d : SUB dword ptr [EBP + -0x8],0x1
0070f231 : JNZ 0x0070f1b2
0070f237 : POP EDI
0070f238 : POP ESI
0070f239 : POP EBX
0070f23a : MOV ESP,EBP
0070f23c : POP EBP
0070f23d : RET
