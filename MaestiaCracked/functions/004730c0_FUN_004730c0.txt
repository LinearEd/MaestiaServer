PROGRAM  : Maestia.exe
FUNCTION : FUN_004730c0
ENTRY    : 004730c0
BODY     : [[004730c0, 00473129] [00473130, 0047318e]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint * FUN_004730c0(void)

{
  uint *puVar1;
  size_t _Size;
  uint *puVar2;
  uint uVar3;
  uint unaff_EDI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b71217;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  _Size = unaff_EDI * 0x14 + 4;
  if (DAT_00da98c8 == (int *)0x0) {
    puVar2 = _malloc(_Size);
  }
  else {
    puVar2 = (uint *)(**(code **)(*DAT_00da98c8 + 4))(_Size,DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  }
  if (puVar2 == (uint *)0x0) {
    ExceptionList = local_10;
    return (uint *)0x0;
  }
  uVar3 = 0;
  *puVar2 = unaff_EDI;
  if (unaff_EDI != 0) {
    do {
      puVar1 = puVar2 + 1 + uVar3 * 5;
      if (puVar1 != (uint *)0x0) {
        *puVar1 = 0;
        puVar1[1] = 0;
        puVar1[2] = 0;
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < unaff_EDI);
  }
  _DAT_00da98cc = _DAT_00da98cc + _Size;
  _DAT_00da98d0 = _DAT_00da98d0 + 1;
  ExceptionList = local_10;
  return puVar2 + 1;
}



============================================================
DISASSEMBLY
============================================================
004730c0 : PUSH EBP
004730c1 : MOV EBP,ESP
004730c3 : PUSH -0x1
004730c5 : PUSH 0xb71217
004730ca : MOV EAX,FS:[0x0]
004730d0 : PUSH EAX
004730d1 : SUB ESP,0xc
004730d4 : PUSH EBX
004730d5 : PUSH ESI
004730d6 : MOV EAX,[0x00d66fa0]
004730db : XOR EAX,EBP
004730dd : PUSH EAX
004730de : LEA EAX,[EBP + -0xc]
004730e1 : MOV FS:[0x0],EAX
004730e7 : MOV ECX,dword ptr [0x00da98c8]
004730ed : LEA EBX,[EDI + EDI*0x4]
004730f0 : LEA EBX,[EBX*0x4 + 0x4]
004730f7 : PUSH EBX
004730f8 : TEST ECX,ECX
004730fa : JZ 0x00473105
004730fc : MOV EAX,dword ptr [ECX]
004730fe : MOV EDX,dword ptr [EAX + 0x4]
00473101 : CALL EDX
00473103 : JMP 0x0047310d
00473105 : CALL 0x00636043
0047310a : ADD ESP,0x4
0047310d : TEST EAX,EAX
0047310f : JZ 0x0047317c
00473111 : XOR ECX,ECX
00473113 : LEA ESI,[EAX + 0x4]
00473116 : MOV dword ptr [EAX],EDI
00473118 : MOV dword ptr [EBP + -0x14],ESI
0047311b : MOV dword ptr [EBP + -0x10],ECX
0047311e : TEST EDI,EDI
00473120 : JBE 0x0047315d
00473122 : XORPS XMM0,XMM0
00473125 : OR EAX,0xffffffff
00473128 : JMP 0x00473130
00473130 : LEA EDX,[ECX + ECX*0x4]
00473133 : LEA EDX,[ESI + EDX*0x4]
00473136 : MOV dword ptr [EBP + -0x18],EDX
00473139 : MOV dword ptr [EBP + -0x4],0x0
00473140 : TEST EDX,EDX
00473142 : JZ 0x00473152
00473144 : MOVSS dword ptr [EDX],XMM0
00473148 : MOVSS dword ptr [EDX + 0x4],XMM0
0047314d : MOVSS dword ptr [EDX + 0x8],XMM0
00473152 : MOV dword ptr [EBP + -0x4],EAX
00473155 : INC ECX
00473156 : MOV dword ptr [EBP + -0x10],ECX
00473159 : CMP ECX,EDI
0047315b : JC 0x00473130
0047315d : ADD dword ptr [0x00da98cc],EBX
00473163 : INC dword ptr [0x00da98d0]
00473169 : MOV EAX,ESI
0047316b : MOV ECX,dword ptr [EBP + -0xc]
0047316e : MOV dword ptr FS:[0x0],ECX
00473175 : POP ECX
00473176 : POP ESI
00473177 : POP EBX
00473178 : MOV ESP,EBP
0047317a : POP EBP
0047317b : RET
0047317c : XOR EAX,EAX
0047317e : MOV ECX,dword ptr [EBP + -0xc]
00473181 : MOV dword ptr FS:[0x0],ECX
00473188 : POP ECX
00473189 : POP ESI
0047318a : POP EBX
0047318b : MOV ESP,EBP
0047318d : POP EBP
0047318e : RET
