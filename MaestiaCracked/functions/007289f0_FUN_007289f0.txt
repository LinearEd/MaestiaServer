PROGRAM  : Maestia.exe
FUNCTION : FUN_007289f0
ENTRY    : 007289f0
BODY     : [[007289f0, 00728ccf]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007289f0(int *param_1,undefined4 param_2,char param_3,int *param_4,undefined2 param_5,
                 undefined2 param_6,undefined1 param_7,undefined4 param_8,undefined1 param_9)

{
  code *pcVar1;
  int *piVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined1 *in_ECX;
  int iVar5;
  undefined4 *puVar6;
  float10 fVar7;
  int *local_158;
  int **local_154;
  undefined1 auStack_13c [4];
  undefined1 *local_138;
  undefined4 uStack_134;
  undefined4 uStack_130;
  undefined4 uStack_12c;
  int *local_128;
  int *local_124 [2];
  LPCRITICAL_SECTION local_11c;
  int aiStack_110 [30];
  undefined1 auStack_98 [4];
  undefined4 local_94;
  int *local_90;
  float local_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 local_7c [16];
  float fStack_3c;
  undefined1 uStack_38;
  undefined4 uStack_34;
  undefined1 uStack_24;
  undefined1 uStack_23;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  uint local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b18195;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)auStack_13c;
  ExceptionList = &local_14;
  local_124[0] = param_1;
  local_138 = in_ECX;
  if ((((*param_1 != 0) && (in_ECX != (undefined1 *)0x0)) && (param_4 != (int *)0x0)) &&
     (local_128 = *(int **)(DAT_017251ac + 0x18), local_128 != (int *)0x0)) {
    local_154 = (int **)0x728a86;
    FUN_006ef2b0();
    local_c = 0;
    local_154 = (int **)0x728a9e;
    FUN_004c5650();
    local_c = CONCAT31(local_c._1_3_,1);
    local_154 = (int **)0x0;
    FUN_00405eb0();
    local_94 = param_2;
    puVar3 = (undefined4 *)FUN_007cc270();
    local_158 = (int *)*puVar3;
    local_154 = (int **)puVar3[1];
    local_88 = puVar3[2];
    if (param_3 == '\0') {
      local_154 = (int **)((float)local_154 - DAT_00d72c20);
    }
    local_138 = (undefined1 *)&local_158;
    local_90 = local_158;
    local_8c = (float)local_154;
    puVar3 = (undefined4 *)FUN_0074d250();
    pcVar1 = *(code **)(*param_4 + 0x14);
    puVar6 = local_7c;
    for (iVar5 = 0x10; iVar5 != 0; iVar5 = iVar5 + -1) {
      *puVar6 = *puVar3;
      puVar3 = puVar3 + 1;
      puVar6 = puVar6 + 1;
    }
    (*pcVar1)();
    local_154 = (int **)0x728b96;
    FUN_0040f460();
    local_154 = (int **)0x728b9e;
    fVar7 = (float10)FUN_0040e8d0();
    fStack_3c = (float)fVar7;
    uStack_134 = 0;
    uStack_130 = 0;
    uStack_12c = 0;
    local_154 = (int **)local_128;
    local_158 = (int *)0x728bd1;
    (**(code **)(*local_128 + 0xc0))();
    local_158 = (int *)0x728bda;
    (**(code **)(*param_4 + 0x1c))();
    local_158 = (int *)0x0;
    uVar4 = FUN_007f1710(param_4 + 0x2d);
    D3DXVec3Project(auStack_13c,auStack_98,aiStack_110,uVar4);
    piVar2 = local_124[0];
    uStack_38 = param_9;
    uStack_34 = param_8;
    uStack_84 = uStack_134;
    local_154 = local_124;
    uStack_80 = uStack_130;
    uStack_24 = 0;
    uStack_23 = param_7;
    local_158 = local_124[0] + 4;
    FUN_004c6030();
    *(undefined2 *)(piVar2 + 7) = param_5;
    *(undefined2 *)((int)piVar2 + 0x1e) = param_6;
    local_c = local_c & 0xffffff00;
    local_154 = (int **)0x728c85;
    FUN_0044cb00();
    local_c = 0xffffffff;
    if (aiStack_110[0] != 0) {
      local_154 = (int **)0x728ca2;
      LeaveCriticalSection(local_11c);
      aiStack_110[0] = 0;
    }
  }
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)auStack_13c);
  return;
}



============================================================
DISASSEMBLY
============================================================
007289f0 : PUSH EBP
007289f1 : MOV EBP,ESP
007289f3 : AND ESP,0xfffffff8
007289f6 : PUSH -0x1
007289f8 : PUSH 0xb18195
007289fd : MOV EAX,FS:[0x0]
00728a03 : PUSH EAX
00728a04 : SUB ESP,0x128
00728a0a : MOV EAX,[0x00d66fa0]
00728a0f : XOR EAX,ESP
00728a11 : MOV dword ptr [ESP + 0x120],EAX
00728a18 : PUSH EBX
00728a19 : PUSH ESI
00728a1a : PUSH EDI
00728a1b : MOV EAX,[0x00d66fa0]
00728a20 : XOR EAX,ESP
00728a22 : PUSH EAX
00728a23 : LEA EAX,[ESP + 0x138]
00728a2a : MOV FS:[0x0],EAX
00728a30 : MOV EAX,dword ptr [EBP + 0x8]
00728a33 : CMP dword ptr [EAX],0x0
00728a36 : MOV EBX,dword ptr [EBP + 0x14]
00728a39 : MOV dword ptr [ESP + 0x28],EAX
00728a3d : MOV EDI,EDX
00728a3f : MOV dword ptr [ESP + 0x14],ECX
00728a43 : JZ 0x00728caa
00728a49 : TEST ECX,ECX
00728a4b : JZ 0x00728caa
00728a51 : TEST EBX,EBX
00728a53 : JZ 0x00728caa
00728a59 : MOV ECX,dword ptr [0x017251ac]
00728a5f : MOV ECX,dword ptr [ECX + 0x18]
00728a62 : MOV dword ptr [ESP + 0x24],ECX
00728a66 : TEST ECX,ECX
00728a68 : JZ 0x00728caa
00728a6e : PUSH 0xc4
00728a73 : ADD EAX,0x148
00728a78 : MOV ECX,0xc024c4
00728a7d : LEA ESI,[ESP + 0x34]
00728a81 : CALL 0x006ef2b0
00728a86 : MOV dword ptr [ESP + 0x140],0x0
00728a91 : LEA EDX,[ESP + 0x9c]
00728a98 : PUSH EDX
00728a99 : CALL 0x004c5650
00728a9e : MOV byte ptr [ESP + 0x140],0x1
00728aa6 : PUSH -0x1
00728aa8 : PUSH 0x0
00728aaa : PUSH EDI
00728aab : LEA ECX,[ESP + 0xa8]
00728ab2 : CALL 0x00405eb0
00728ab7 : MOV EAX,dword ptr [EBP + 0xc]
00728aba : MOV ESI,dword ptr [ESP + 0x14]
00728abe : MOV dword ptr [ESP + 0xb8],EAX
00728ac5 : CALL 0x007cc270
00728aca : CMP byte ptr [EBP + 0x10],0x0
00728ace : MOVSS XMM2,dword ptr [EAX]
00728ad2 : MOVSS dword ptr [ESP + 0xbc],XMM2
00728adb : MOVSS XMM0,dword ptr [EAX + 0x4]
00728ae0 : MOVSS dword ptr [ESP + 0xc0],XMM0
00728ae9 : MOVSS XMM1,dword ptr [EAX + 0x8]
00728aee : MOVSS dword ptr [ESP + 0xc4],XMM1
00728af7 : JNZ 0x00728b0a
00728af9 : SUBSS XMM0,dword ptr [0x00d72c20]
00728b01 : MOVSS dword ptr [ESP + 0xc0],XMM0
00728b0a : SUB ESP,0xc
00728b0d : MOV EAX,ESP
00728b0f : MOV EDI,EBX
00728b11 : LEA ESI,[ESP + 0x68]
00728b15 : MOV dword ptr [ESP + 0x20],ESP
00728b19 : MOVSS dword ptr [EAX],XMM2
00728b1d : MOVSS dword ptr [EAX + 0x4],XMM0
00728b22 : MOVSS dword ptr [EAX + 0x8],XMM1
00728b27 : CALL 0x0074d250
00728b2c : MOV EDX,dword ptr [EBX]
00728b2e : MOV ESI,EAX
00728b30 : MOV EAX,dword ptr [EDX + 0x14]
00728b33 : MOV ECX,0x10
00728b38 : LEA EDI,[ESP + 0xd0]
00728b3f : MOVSD.REP ES:EDI,ESI
00728b41 : MOV ECX,EBX
00728b43 : CALL EAX
00728b45 : MOVSS XMM0,dword ptr [ESP + 0xbc]
00728b4e : SUBSS XMM0,dword ptr [EAX]
00728b52 : MOVSS XMM1,dword ptr [ESP + 0xc0]
00728b5b : SUBSS XMM1,dword ptr [EAX + 0x4]
00728b60 : MOVSS XMM2,dword ptr [ESP + 0xc4]
00728b69 : SUBSS XMM2,dword ptr [EAX + 0x8]
00728b6e : MOVAPS XMM3,XMM0
00728b71 : MULSS XMM3,XMM0
00728b75 : MOVAPS XMM0,XMM1
00728b78 : MULSS XMM0,XMM1
00728b7c : ADDSS XMM3,XMM0
00728b80 : MOVAPS XMM0,XMM2
00728b83 : MULSS XMM0,XMM2
00728b87 : PUSH ECX
00728b88 : ADDSS XMM3,XMM0
00728b8c : MOVSS dword ptr [ESP],XMM3
00728b91 : CALL 0x0040f460
00728b96 : FSTP float ptr [ESP]
00728b99 : CALL 0x0040e8d0
00728b9e : FSTP float ptr [ESP + 0x114]
00728ba5 : XORPS XMM0,XMM0
00728ba8 : MOV EAX,dword ptr [ESP + 0x28]
00728bac : ADD ESP,0x4
00728baf : LEA EDX,[ESP + 0x44]
00728bb3 : MOVSS dword ptr [ESP + 0x18],XMM0
00728bb9 : MOVSS dword ptr [ESP + 0x1c],XMM0
00728bbf : MOVSS dword ptr [ESP + 0x20],XMM0
00728bc5 : MOV ECX,dword ptr [EAX]
00728bc7 : PUSH EDX
00728bc8 : PUSH EAX
00728bc9 : MOV EAX,dword ptr [ECX + 0xc0]
00728bcf : CALL EAX
00728bd1 : MOV EDX,dword ptr [EBX]
00728bd3 : MOV EAX,dword ptr [EDX + 0x1c]
00728bd6 : MOV ECX,EBX
00728bd8 : CALL EAX
00728bda : PUSH 0x0
00728bdc : LEA ECX,[EBX + 0xb4]
00728be2 : PUSH ECX
00728be3 : MOV ESI,EBX
00728be5 : CALL 0x007f1710
00728bea : PUSH EAX
00728beb : LEA EDX,[ESP + 0x50]
00728bef : PUSH EDX
00728bf0 : LEA EAX,[ESP + 0xcc]
00728bf7 : PUSH EAX
00728bf8 : LEA ECX,[ESP + 0x2c]
00728bfc : PUSH ECX
00728bfd : CALL 0x00664d38
00728c02 : MOV DL,byte ptr [EBP + 0x28]
00728c05 : MOV EAX,dword ptr [EBP + 0x24]
00728c08 : MOVSS XMM0,dword ptr [ESP + 0x18]
00728c0e : MOV CL,byte ptr [EBP + 0x20]
00728c11 : MOV byte ptr [ESP + 0x114],DL
00728c18 : LEA EDX,[ESP + 0x9c]
00728c1f : MOV dword ptr [ESP + 0x118],EAX
00728c26 : MOVSS dword ptr [ESP + 0xc8],XMM0
00728c2f : MOVSS XMM0,dword ptr [ESP + 0x1c]
00728c35 : PUSH EDX
00728c36 : LEA EAX,[ESP + 0x2c]
00728c3a : MOVSS dword ptr [ESP + 0xd0],XMM0
00728c43 : MOV byte ptr [ESP + 0x12c],0x0
00728c4b : MOV byte ptr [ESP + 0x12d],CL
00728c52 : PUSH EAX
00728c53 : MOV ESI,dword ptr [ESP + 0x30]
00728c57 : LEA ECX,[ESI + 0x10]
00728c5a : PUSH ECX
00728c5b : CALL 0x004c6030
00728c60 : MOV DX,word ptr [EBP + 0x18]
00728c64 : MOV AX,word ptr [EBP + 0x1c]
00728c68 : MOV word ptr [ESI + 0x1c],DX
00728c6c : MOV word ptr [ESI + 0x1e],AX
00728c70 : MOV byte ptr [ESP + 0x140],0x0
00728c78 : LEA ECX,[ESP + 0x9c]
00728c7f : PUSH ECX
00728c80 : CALL 0x0044cb00
00728c85 : MOV dword ptr [ESP + 0x140],0xffffffff
00728c90 : CMP dword ptr [ESP + 0x3c],0x0
00728c95 : JZ 0x00728caa
00728c97 : MOV EDX,dword ptr [ESP + 0x30]
00728c9b : PUSH EDX
00728c9c : CALL dword ptr [0x00b8511c]
00728ca2 : MOV dword ptr [ESP + 0x3c],0x0
00728caa : MOV ECX,dword ptr [ESP + 0x138]
00728cb1 : MOV dword ptr FS:[0x0],ECX
00728cb8 : POP ECX
00728cb9 : POP EDI
00728cba : POP ESI
00728cbb : POP EBX
00728cbc : MOV ECX,dword ptr [ESP + 0x120]
00728cc3 : XOR ECX,ESP
00728cc5 : CALL 0x00633e6b
00728cca : MOV ESP,EBP
00728ccc : POP EBP
00728ccd : RET 0x24
