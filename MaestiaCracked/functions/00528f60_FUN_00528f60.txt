PROGRAM  : Maestia.exe
FUNCTION : FUN_00528f60
ENTRY    : 00528f60
BODY     : [[00528f60, 005290b2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00528f60(int *param_1)

{
  char cVar1;
  byte *pbVar2;
  int iVar3;
  int *piVar4;
  long lVar5;
  int iVar6;
  int iVar7;
  float10 fVar8;
  char *local_c;
  double local_8;
  
  piVar4 = param_1;
  if (param_1[7] < 1) {
    return;
  }
  iVar6 = param_1[6];
  iVar7 = 10;
  FUN_00526260(0);
  FUN_005272e0(&param_1,iVar6,0xffffffff,0);
  iVar6 = 0;
  if (piVar4[7] < 2) {
    if ((1 < (uint)param_1[4]) && (*(char *)*param_1 == '0')) {
      cVar1 = ((char *)*param_1)[1];
      iVar6 = 1;
      iVar7 = 8;
      if ((cVar1 == 'x') || (cVar1 == 'X')) {
        iVar7 = 0x10;
        iVar6 = 2;
      }
    }
  }
  else {
    iVar7 = piVar4[6];
    FUN_00526260(1);
    iVar7 = FUN_00527990(iVar7);
    if ((iVar7 < 2) || (0x24 < iVar7)) {
      fVar8 = (float10)FUN_005b0b90();
      local_8 = (double)fVar8;
      pbVar2 = (byte *)piVar4[1];
      if (4 < *pbVar2) {
        FUN_00526400();
      }
      *pbVar2 = 3;
      *(double *)(pbVar2 + 4) = local_8;
      param_1[2] = param_1[2] + -1;
      iVar6 = param_1[2];
      goto LAB_005290a5;
    }
  }
  iVar3 = *param_1;
  local_c = (char *)0x0;
  lVar5 = _strtol((char *)(*param_1 + iVar6),&local_c,iVar7);
  local_8 = (double)CONCAT44(local_8._4_4_,lVar5);
  if (((char *)(iVar3 + iVar6) == local_c) && (iVar7 != 8)) {
    fVar8 = (float10)FUN_005b0b90();
    local_8 = (double)fVar8;
    pbVar2 = (byte *)piVar4[1];
    if (4 < *pbVar2) {
      FUN_00526400();
    }
    *pbVar2 = 3;
    *(double *)(pbVar2 + 4) = local_8;
  }
  else {
    pbVar2 = (byte *)piVar4[1];
    if (4 < *pbVar2) {
      FUN_00526400();
    }
    *pbVar2 = 4;
    *(undefined4 *)(pbVar2 + 4) = local_8._0_4_;
  }
  param_1[2] = param_1[2] + -1;
  iVar6 = param_1[2];
LAB_005290a5:
  if (iVar6 == 0) {
    FUN_00525340();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00528f60 : SUB ESP,0xc
00528f63 : PUSH ESI
00528f64 : MOV ESI,dword ptr [ESP + 0x14]
00528f68 : CMP dword ptr [ESI + 0x1c],0x1
00528f6c : JL 0x005290ae
00528f72 : PUSH EBX
00528f73 : MOV EBX,dword ptr [ESI + 0x18]
00528f76 : PUSH EDI
00528f77 : PUSH 0x0
00528f79 : MOV ECX,ESI
00528f7b : MOV EDI,0xa
00528f80 : CALL 0x00526260
00528f85 : PUSH 0x0
00528f87 : PUSH -0x1
00528f89 : PUSH EBX
00528f8a : LEA ECX,[ESP + 0x28]
00528f8e : PUSH ECX
00528f8f : MOV ECX,EAX
00528f91 : CALL 0x005272e0
00528f96 : MOV EAX,dword ptr [ESP + 0x1c]
00528f9a : MOV ECX,dword ptr [EAX + 0x10]
00528f9d : XOR EBX,EBX
00528f9f : CMP dword ptr [ESI + 0x1c],0x2
00528fa3 : JL 0x00528ffa
00528fa5 : MOV EDX,dword ptr [ESI + 0x18]
00528fa8 : PUSH EDX
00528fa9 : PUSH 0x1
00528fab : MOV ECX,ESI
00528fad : CALL 0x00526260
00528fb2 : MOV ECX,EAX
00528fb4 : CALL 0x00527990
00528fb9 : MOV EDI,EAX
00528fbb : CMP EDI,0x2
00528fbe : JL 0x00528fc5
00528fc0 : CMP EDI,0x24
00528fc3 : JLE 0x00529025
00528fc5 : CALL 0x005b0b90
00528fca : FSTP double ptr [ESP + 0x10]
00528fce : MOV ESI,dword ptr [ESI + 0x4]
00528fd1 : CMP byte ptr [ESI],0x5
00528fd4 : JC 0x00528fdd
00528fd6 : MOV ECX,ESI
00528fd8 : CALL 0x00526400
00528fdd : FLD double ptr [ESP + 0x10]
00528fe1 : MOV byte ptr [ESI],0x3
00528fe4 : FSTP double ptr [ESI + 0x4]
00528fe7 : MOV EAX,dword ptr [ESP + 0x1c]
00528feb : DEC dword ptr [EAX + 0x8]
00528fee : MOV ECX,EAX
00528ff0 : ADD EAX,0x8
00528ff3 : CMP dword ptr [EAX],EBX
00528ff5 : JMP 0x005290a5
00528ffa : CMP ECX,0x1
00528ffd : JBE 0x00529029
00528fff : MOV ECX,dword ptr [EAX]
00529001 : CMP byte ptr [ECX],0x30
00529004 : JNZ 0x00529029
00529006 : MOV CL,byte ptr [ECX + 0x1]
00529009 : MOV EBX,0x1
0052900e : LEA EDI,[EBX + 0x7]
00529011 : CMP CL,0x78
00529014 : JZ 0x0052901b
00529016 : CMP CL,0x58
00529019 : JNZ 0x00529029
0052901b : MOV EDI,0x10
00529020 : LEA EBX,[EDI + -0xe]
00529023 : JMP 0x00529029
00529025 : MOV EAX,dword ptr [ESP + 0x1c]
00529029 : PUSH EBP
0052902a : MOV EBP,dword ptr [EAX]
0052902c : MOV dword ptr [ESP + 0x10],0x0
00529034 : MOV EAX,dword ptr [EAX]
00529036 : PUSH EDI
00529037 : LEA ECX,[ESP + 0x14]
0052903b : PUSH ECX
0052903c : ADD EAX,EBX
0052903e : PUSH EAX
0052903f : CALL 0x00638dc7
00529044 : ADD EBP,EBX
00529046 : ADD ESP,0xc
00529049 : CMP EBP,dword ptr [ESP + 0x10]
0052904d : MOV dword ptr [ESP + 0x14],EAX
00529051 : POP EBP
00529052 : JNZ 0x0052907d
00529054 : CMP EDI,0x8
00529057 : JZ 0x0052907d
00529059 : CALL 0x005b0b90
0052905e : FSTP double ptr [ESP + 0x10]
00529062 : MOV ESI,dword ptr [ESI + 0x4]
00529065 : CMP byte ptr [ESI],0x5
00529068 : JC 0x00529071
0052906a : MOV ECX,ESI
0052906c : CALL 0x00526400
00529071 : FLD double ptr [ESP + 0x10]
00529075 : MOV byte ptr [ESI],0x3
00529078 : FSTP double ptr [ESI + 0x4]
0052907b : JMP 0x00529096
0052907d : MOV ESI,dword ptr [ESI + 0x4]
00529080 : CMP byte ptr [ESI],0x5
00529083 : JC 0x0052908c
00529085 : MOV ECX,ESI
00529087 : CALL 0x00526400
0052908c : MOV EDX,dword ptr [ESP + 0x10]
00529090 : MOV byte ptr [ESI],0x4
00529093 : MOV dword ptr [ESI + 0x4],EDX
00529096 : MOV EAX,dword ptr [ESP + 0x1c]
0052909a : DEC dword ptr [EAX + 0x8]
0052909d : MOV ECX,EAX
0052909f : ADD EAX,0x8
005290a2 : CMP dword ptr [EAX],0x0
005290a5 : JNZ 0x005290ac
005290a7 : CALL 0x00525340
005290ac : POP EDI
005290ad : POP EBX
005290ae : POP ESI
005290af : ADD ESP,0xc
005290b2 : RET
