PROGRAM  : Maestia.exe
FUNCTION : FUN_0050bd70
ENTRY    : 0050bd70
BODY     : [[0050bd70, 0050be1a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0050bd70(uint param_1,undefined4 *param_2,undefined4 param_3)

{
  int iVar1;
  undefined4 uVar2;
  int *in_ECX;
  undefined4 uStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  GMatrix2D aGStack_18 [24];
  
  iVar1 = (**(code **)(*in_ECX + 0x40))();
  if (iVar1 == 0) {
    return 0;
  }
  if (param_1 < 4) {
    iVar1 = iVar1 + 0x944 + param_1 * 0x24;
  }
  else {
    iVar1 = 0;
  }
  uStack_24 = *(undefined4 *)(iVar1 + 0x18);
  uStack_28 = *(undefined4 *)(iVar1 + 0x14);
  GMatrix2D::SetIdentity(aGStack_18);
  FUN_0051cdf0(aGStack_18);
  GMatrix2D::TransformByInverse(aGStack_18,(GPoint<float> *)&uStack_20,(GPoint<float> *)&uStack_28);
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = uStack_20;
    param_2[1] = uStack_1c;
  }
  uVar2 = FUN_0054b0a0(uStack_20,uStack_1c,param_3);
  return uVar2;
}



============================================================
DISASSEMBLY
============================================================
0050bd70 : SUB ESP,0x28
0050bd73 : PUSH ESI
0050bd74 : MOV ESI,ECX
0050bd76 : MOV EAX,dword ptr [ESI]
0050bd78 : MOV EDX,dword ptr [EAX + 0x40]
0050bd7b : CALL EDX
0050bd7d : TEST EAX,EAX
0050bd7f : JNZ 0x0050bd8a
0050bd81 : XOR AL,AL
0050bd83 : POP ESI
0050bd84 : ADD ESP,0x28
0050bd87 : RET 0xc
0050bd8a : MOV ECX,dword ptr [ESP + 0x30]
0050bd8e : CMP ECX,0x4
0050bd91 : JC 0x0050bd97
0050bd93 : XOR EAX,EAX
0050bd95 : JMP 0x0050bda1
0050bd97 : LEA ECX,[ECX + ECX*0x8]
0050bd9a : LEA EAX,[EAX + ECX*0x4 + 0x944]
0050bda1 : FLD float ptr [EAX + 0x18]
0050bda4 : LEA ECX,[ESP + 0x14]
0050bda8 : FSTP float ptr [ESP + 0x30]
0050bdac : FLD float ptr [EAX + 0x14]
0050bdaf : FSTP float ptr [ESP + 0x4]
0050bdb3 : FLD float ptr [ESP + 0x30]
0050bdb7 : FSTP float ptr [ESP + 0x8]
0050bdbb : CALL 0x00522b80
0050bdc0 : LEA EDX,[ESP + 0x14]
0050bdc4 : PUSH EDX
0050bdc5 : MOV ECX,ESI
0050bdc7 : CALL 0x0051cdf0
0050bdcc : LEA EAX,[ESP + 0x4]
0050bdd0 : PUSH EAX
0050bdd1 : LEA ECX,[ESP + 0x10]
0050bdd5 : PUSH ECX
0050bdd6 : LEA ECX,[ESP + 0x1c]
0050bdda : CALL 0x00522fa0
0050bddf : FLD float ptr [ESP + 0x10]
0050bde3 : MOV EAX,dword ptr [ESP + 0x34]
0050bde7 : FLD float ptr [ESP + 0xc]
0050bdeb : TEST EAX,EAX
0050bded : JZ 0x0050bdf8
0050bdef : FST float ptr [EAX]
0050bdf1 : FXCH
0050bdf3 : FST float ptr [EAX + 0x4]
0050bdf6 : FXCH
0050bdf8 : MOV EDX,dword ptr [ESP + 0x38]
0050bdfc : FXCH
0050bdfe : MOV ECX,dword ptr [ESI + 0xa0]
0050be04 : PUSH EDX
0050be05 : SUB ESP,0x8
0050be08 : FSTP float ptr [ESP + 0x4]
0050be0c : FSTP float ptr [ESP]
0050be0f : CALL 0x0054b0a0
0050be14 : POP ESI
0050be15 : ADD ESP,0x28
0050be18 : RET 0xc
