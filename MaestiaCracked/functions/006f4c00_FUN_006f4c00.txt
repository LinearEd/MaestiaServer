PROGRAM  : Maestia.exe
FUNCTION : FUN_006f4c00
ENTRY    : 006f4c00
BODY     : [[006f4c00, 006f4cda]]

============================================================
DECOMPILED C CODE
============================================================

bool FUN_006f4c00(HANDLE param_1,ULONG_PTR param_2)

{
  uint uVar1;
  int iVar2;
  HANDLE pvVar3;
  LPCRITICAL_SECTION local_24;
  char *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b368ce;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 0;
  local_24 = (LPCRITICAL_SECTION)&DAT_00d72354;
  local_20 = ".\\AvIoBase.cpp";
  local_1c = 0x1c7;
  local_14 = 1;
  FUN_006ef1a0(&local_24);
  local_8 = 0;
  if (DAT_00da9d3c == 0) {
    iVar2 = FUN_006f49c0(uVar1);
    if (iVar2 == 0) {
      local_8 = 0xffffffff;
      if (local_18 != 0) {
        LeaveCriticalSection(local_24);
      }
      ExceptionList = local_10;
      return false;
    }
  }
  local_8 = 0xffffffff;
  if (local_18 != 0) {
    LeaveCriticalSection(local_24);
    local_18 = 0;
  }
  pvVar3 = CreateIoCompletionPort(param_1,DAT_00d6a620,param_2,0);
  ExceptionList = local_10;
  return DAT_00d6a620 == pvVar3;
}



============================================================
DISASSEMBLY
============================================================
006f4c00 : PUSH EBP
006f4c01 : MOV EBP,ESP
006f4c03 : PUSH -0x1
006f4c05 : PUSH 0xb368ce
006f4c0a : MOV EAX,FS:[0x0]
006f4c10 : PUSH EAX
006f4c11 : SUB ESP,0x14
006f4c14 : PUSH ESI
006f4c15 : MOV EAX,[0x00d66fa0]
006f4c1a : XOR EAX,EBP
006f4c1c : PUSH EAX
006f4c1d : LEA EAX,[EBP + -0xc]
006f4c20 : MOV FS:[0x0],EAX
006f4c26 : LEA EAX,[EBP + -0x20]
006f4c29 : XOR ESI,ESI
006f4c2b : PUSH EAX
006f4c2c : MOV dword ptr [EBP + -0x14],ESI
006f4c2f : MOV dword ptr [EBP + -0x20],0xd72354
006f4c36 : MOV dword ptr [EBP + -0x1c],0xbf7840
006f4c3d : MOV dword ptr [EBP + -0x18],0x1c7
006f4c44 : MOV dword ptr [EBP + -0x10],0x1
006f4c4b : CALL 0x006ef1a0
006f4c50 : MOV dword ptr [EBP + -0x4],ESI
006f4c53 : CMP dword ptr [0x00da9d3c],ESI
006f4c59 : JNZ 0x006f4c8f
006f4c5b : CALL 0x006f49c0
006f4c60 : TEST EAX,EAX
006f4c62 : JNZ 0x006f4c8f
006f4c64 : MOV dword ptr [EBP + -0x4],0xffffffff
006f4c6b : CMP dword ptr [EBP + -0x14],ESI
006f4c6e : JZ 0x006f4c7d
006f4c70 : MOV ECX,dword ptr [EBP + -0x20]
006f4c73 : PUSH ECX
006f4c74 : CALL dword ptr [0x00b8511c]
006f4c7a : MOV dword ptr [EBP + -0x14],ESI
006f4c7d : XOR EAX,EAX
006f4c7f : MOV ECX,dword ptr [EBP + -0xc]
006f4c82 : MOV dword ptr FS:[0x0],ECX
006f4c89 : POP ECX
006f4c8a : POP ESI
006f4c8b : MOV ESP,EBP
006f4c8d : POP EBP
006f4c8e : RET
006f4c8f : MOV dword ptr [EBP + -0x4],0xffffffff
006f4c96 : CMP dword ptr [EBP + -0x14],ESI
006f4c99 : JZ 0x006f4ca8
006f4c9b : MOV EDX,dword ptr [EBP + -0x20]
006f4c9e : PUSH EDX
006f4c9f : CALL dword ptr [0x00b8511c]
006f4ca5 : MOV dword ptr [EBP + -0x14],ESI
006f4ca8 : MOV EAX,dword ptr [EBP + 0xc]
006f4cab : MOV ECX,dword ptr [0x00d6a620]
006f4cb1 : MOV EDX,dword ptr [EBP + 0x8]
006f4cb4 : PUSH ESI
006f4cb5 : PUSH EAX
006f4cb6 : PUSH ECX
006f4cb7 : PUSH EDX
006f4cb8 : CALL dword ptr [0x00b8538c]
006f4cbe : XOR ECX,ECX
006f4cc0 : CMP dword ptr [0x00d6a620],EAX
006f4cc6 : SETZ CL
006f4cc9 : MOV EAX,ECX
006f4ccb : MOV ECX,dword ptr [EBP + -0xc]
006f4cce : MOV dword ptr FS:[0x0],ECX
006f4cd5 : POP ECX
006f4cd6 : POP ESI
006f4cd7 : MOV ESP,EBP
006f4cd9 : POP EBP
006f4cda : RET
