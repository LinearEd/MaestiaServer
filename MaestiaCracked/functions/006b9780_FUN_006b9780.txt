PROGRAM  : Maestia.exe
FUNCTION : FUN_006b9780
ENTRY    : 006b9780
BODY     : [[006b9780, 006b996b]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_006b9780(int param_1,char param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  
  iVar2 = *(int *)(*(int *)(param_1 + 8) + 0x8c);
  uVar1 = *(uint *)(*(int *)(param_1 + 0x8c) + -0x20 + (uint)*(ushort *)(param_1 + 0x84) * 8);
  if ((uVar1 + 0x20 & 0xffffffc0) != uVar1) {
    FUN_006b29a0();
  }
  if (iVar2 != 0) {
    _memcpy(*(void **)(param_1 + 0x88),*(void **)(param_1 + 0x8c),
            (uint)*(ushort *)(param_1 + 0x84) * 8);
  }
  puVar4 = (undefined4 *)(*(int *)(param_1 + 4) + 0xac);
  puVar5 = (undefined4 *)(*(int *)(param_1 + 0xa0) + 0x11c);
  for (iVar3 = 0x11; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  if (param_2 == '\0') {
    *(undefined4 *)(*(int *)(param_1 + 0xa0) + 0xdc) = *(undefined4 *)(*(int *)(param_1 + 4) + 0x30)
    ;
    *(undefined4 *)(*(int *)(param_1 + 0xa0) + 0xe0) = *(undefined4 *)(*(int *)(param_1 + 4) + 0x34)
    ;
  }
  else {
    *(undefined4 *)(*(int *)(param_1 + 0xa0) + 0xdc) = 0x10000;
    *(undefined4 *)(*(int *)(param_1 + 0xa0) + 0xe0) = 0x10000;
    _memcpy(*(void **)(param_1 + 0x90),*(void **)(param_1 + 0x8c),
            (uint)*(ushort *)(param_1 + 0x84) * 8);
  }
  *(uint *)(*(int *)(param_1 + 0x8c) + -0x18 + (uint)*(ushort *)(param_1 + 0x84) * 8) =
       *(int *)(*(int *)(param_1 + 0x8c) + -0x18 + (uint)*(ushort *)(param_1 + 0x84) * 8) + 0x20U &
       0xffffffc0;
  *(uint *)(*(int *)(param_1 + 0x8c) + -4 + (uint)*(ushort *)(param_1 + 0x84) * 8) =
       *(int *)(*(int *)(param_1 + 0x8c) + -4 + (uint)*(ushort *)(param_1 + 0x84) * 8) + 0x20U &
       0xffffffc0;
  if (iVar2 != 0) {
    iVar2 = FUN_006b3a10(iVar2);
    if (iVar2 != 0) {
      return iVar2;
    }
    *(char *)(*(int *)(param_1 + 0xa0) + 0x230) = param_2;
    puVar4 = (undefined4 *)(param_1 + 0x7c);
    puVar5 = (undefined4 *)(*(int *)(param_1 + 0xa0) + 0x90);
    for (iVar2 = 9; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar5 = *puVar4;
      puVar4 = puVar4 + 1;
      puVar5 = puVar5 + 1;
    }
    iVar2 = FUN_006b3df0();
    if ((iVar2 != 0) && (*(char *)(*(int *)(param_1 + 0xa0) + 0x231) != '\0')) {
      return iVar2;
    }
  }
  if (*(char *)(param_1 + 0x41) == '\0') {
    *(undefined4 *)(param_1 + 0x44) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0x20 + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0x48) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0x1c + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0x4c) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0x18 + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0x50) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0x14 + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0xb8) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0x10 + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0xbc) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -0xc + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0xc0) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -8 + (uint)*(ushort *)(param_1 + 0x84) * 8);
    *(undefined4 *)(param_1 + 0xc4) =
         *(undefined4 *)(*(int *)(param_1 + 0x8c) + -4 + (uint)*(ushort *)(param_1 + 0x84) * 8);
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
006b9780 : PUSH ECX
006b9781 : PUSH EBX
006b9782 : MOV EBX,dword ptr [ESP + 0xc]
006b9786 : MOV EAX,dword ptr [EBX + 0x8]
006b9789 : MOV ECX,dword ptr [EAX + 0x8c]
006b978f : MOVZX EDX,word ptr [EBX + 0x84]
006b9796 : PUSH EBP
006b9797 : LEA EBP,[EBX + 0x7c]
006b979a : MOV dword ptr [ESP + 0x8],ECX
006b979e : MOV ECX,dword ptr [EBP + 0x10]
006b97a1 : MOV EAX,dword ptr [ECX + EDX*0x8 + -0x20]
006b97a5 : PUSH ESI
006b97a6 : LEA ESI,[EAX + 0x20]
006b97a9 : AND ESI,0xffffffc0
006b97ac : SUB ESI,EAX
006b97ae : PUSH EDI
006b97af : JZ 0x006b97b8
006b97b1 : XOR EDI,EDI
006b97b3 : CALL 0x006b29a0
006b97b8 : CMP dword ptr [ESP + 0x10],0x0
006b97bd : JBE 0x006b97da
006b97bf : MOVZX EDX,word ptr [EBP + 0x8]
006b97c3 : MOV EAX,dword ptr [EBP + 0x10]
006b97c6 : MOV ECX,dword ptr [EBP + 0xc]
006b97c9 : ADD EDX,EDX
006b97cb : ADD EDX,EDX
006b97cd : ADD EDX,EDX
006b97cf : PUSH EDX
006b97d0 : PUSH EAX
006b97d1 : PUSH ECX
006b97d2 : CALL 0x0063ae40
006b97d7 : ADD ESP,0xc
006b97da : MOV ESI,dword ptr [EBX + 0x4]
006b97dd : MOV EDI,dword ptr [EBX + 0xa0]
006b97e3 : ADD ESI,0xac
006b97e9 : ADD EDI,0x11c
006b97ef : CMP byte ptr [ESP + 0x1c],0x0
006b97f4 : MOV ECX,0x11
006b97f9 : MOVSD.REP ES:EDI,ESI
006b97fb : JZ 0x006b9837
006b97fd : MOV EDX,dword ptr [EBX + 0xa0]
006b9803 : MOV EAX,0x10000
006b9808 : MOV dword ptr [EDX + 0xdc],EAX
006b980e : MOV ECX,dword ptr [EBX + 0xa0]
006b9814 : MOV dword ptr [ECX + 0xe0],EAX
006b981a : MOVZX EDX,word ptr [EBP + 0x8]
006b981e : MOV EAX,dword ptr [EBP + 0x10]
006b9821 : MOV ECX,dword ptr [EBP + 0x14]
006b9824 : ADD EDX,EDX
006b9826 : ADD EDX,EDX
006b9828 : ADD EDX,EDX
006b982a : PUSH EDX
006b982b : PUSH EAX
006b982c : PUSH ECX
006b982d : CALL 0x0063ae40
006b9832 : ADD ESP,0xc
006b9835 : JMP 0x006b985b
006b9837 : MOV EDX,dword ptr [EBX + 0x4]
006b983a : MOV ECX,dword ptr [EDX + 0x30]
006b983d : MOV EAX,dword ptr [EBX + 0xa0]
006b9843 : MOV dword ptr [EAX + 0xdc],ECX
006b9849 : MOV EDX,dword ptr [EBX + 0x4]
006b984c : MOV EAX,dword ptr [EBX + 0xa0]
006b9852 : MOV ECX,dword ptr [EDX + 0x34]
006b9855 : MOV dword ptr [EAX + 0xe0],ECX
006b985b : MOVZX EDX,word ptr [EBP + 0x8]
006b985f : MOV EAX,dword ptr [EBP + 0x10]
006b9862 : MOV ECX,dword ptr [EAX + EDX*0x8 + -0x18]
006b9866 : LEA EAX,[EAX + EDX*0x8 + -0x18]
006b986a : ADD ECX,0x20
006b986d : AND ECX,0xffffffc0
006b9870 : MOV dword ptr [EAX],ECX
006b9872 : MOVZX EDX,word ptr [EBP + 0x8]
006b9876 : MOV EAX,dword ptr [EBP + 0x10]
006b9879 : MOV ECX,dword ptr [EAX + EDX*0x8 + -0x4]
006b987d : LEA EAX,[EAX + EDX*0x8 + -0x4]
006b9881 : ADD ECX,0x20
006b9884 : AND ECX,0xffffffc0
006b9887 : MOV dword ptr [EAX],ECX
006b9889 : MOV EAX,dword ptr [ESP + 0x10]
006b988d : TEST EAX,EAX
006b988f : JBE 0x006b98fe
006b9891 : MOV ECX,dword ptr [EBX + 0xa0]
006b9897 : MOV EDX,dword ptr [ECX + 0x188]
006b989d : PUSH EAX
006b989e : MOV EAX,0x3
006b98a3 : CALL 0x006b3a10
006b98a8 : ADD ESP,0x4
006b98ab : TEST EAX,EAX
006b98ad : JNZ 0x006b9966
006b98b3 : MOV EDX,dword ptr [EBX + 0xa0]
006b98b9 : MOV AL,byte ptr [ESP + 0x1c]
006b98bd : MOV byte ptr [EDX + 0x230],AL
006b98c3 : MOV EDI,dword ptr [EBX + 0xa0]
006b98c9 : ADD EDI,0x90
006b98cf : MOV ECX,0x9
006b98d4 : MOV ESI,EBP
006b98d6 : MOVSD.REP ES:EDI,ESI
006b98d8 : MOV EBX,dword ptr [EBX + 0xa0]
006b98de : CALL 0x006b3df0
006b98e3 : TEST EAX,EAX
006b98e5 : JZ 0x006b98fa
006b98e7 : MOV ECX,dword ptr [ESP + 0x18]
006b98eb : MOV EDX,dword ptr [ECX + 0xa0]
006b98f1 : CMP byte ptr [EDX + 0x231],0x0
006b98f8 : JNZ 0x006b9966
006b98fa : MOV EBX,dword ptr [ESP + 0x18]
006b98fe : CMP byte ptr [EBX + 0x41],0x0
006b9902 : JNZ 0x006b9964
006b9904 : MOVZX ECX,word ptr [EBP + 0x8]
006b9908 : MOV EAX,dword ptr [EBP + 0x10]
006b990b : MOV EDX,dword ptr [EAX + ECX*0x8 + -0x20]
006b990f : MOV dword ptr [EBX + 0x44],EDX
006b9912 : MOV EAX,dword ptr [EAX + ECX*0x8 + -0x1c]
006b9916 : MOV dword ptr [EBX + 0x48],EAX
006b9919 : MOVZX ECX,word ptr [EBP + 0x8]
006b991d : MOV EAX,dword ptr [EBP + 0x10]
006b9920 : MOV EDX,dword ptr [EAX + ECX*0x8 + -0x18]
006b9924 : MOV dword ptr [EBX + 0x4c],EDX
006b9927 : MOV EAX,dword ptr [EAX + ECX*0x8 + -0x14]
006b992b : MOV dword ptr [EBX + 0x50],EAX
006b992e : MOVZX ECX,word ptr [EBP + 0x8]
006b9932 : MOV EAX,dword ptr [EBP + 0x10]
006b9935 : MOV EDX,dword ptr [EAX + ECX*0x8 + -0x10]
006b9939 : MOV dword ptr [EBX + 0xb8],EDX
006b993f : MOV EAX,dword ptr [EAX + ECX*0x8 + -0xc]
006b9943 : MOV dword ptr [EBX + 0xbc],EAX
006b9949 : MOVZX EAX,word ptr [EBP + 0x8]
006b994d : MOV EBP,dword ptr [EBP + 0x10]
006b9950 : MOV ECX,dword ptr [EBP + EAX*0x8 + -0x8]
006b9954 : MOV dword ptr [EBX + 0xc0],ECX
006b995a : MOV EDX,dword ptr [EBP + EAX*0x8 + -0x4]
006b995e : MOV dword ptr [EBX + 0xc4],EDX
006b9964 : XOR EAX,EAX
006b9966 : POP EDI
006b9967 : POP ESI
006b9968 : POP EBP
006b9969 : POP EBX
006b996a : POP ECX
006b996b : RET
