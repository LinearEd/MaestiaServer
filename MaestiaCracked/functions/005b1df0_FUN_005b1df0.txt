PROGRAM  : Maestia.exe
FUNCTION : FUN_005b1df0
ENTRY    : 005b1df0
BODY     : [[005b1df0, 005b1fe3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b1df0(int param_1)

{
  byte *pbVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  undefined4 *local_24;
  undefined4 *local_20;
  undefined4 local_1c;
  int local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  double local_8;
  
  cVar2 = FUN_00526030(8);
  if (cVar2 == '\0') {
    FUN_00526050("String",0,0);
    return;
  }
  if (*(int *)(param_1 + 8) == 0) {
    iVar3 = 0;
  }
  else {
    iVar3 = *(int *)(param_1 + 8) + -0x10;
  }
  if (*(int *)(param_1 + 0x1c) < 1) {
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    *pbVar1 = 3;
    pbVar1[4] = 0;
    pbVar1[5] = 0;
    pbVar1[6] = 0;
    pbVar1[7] = 0;
    pbVar1[8] = 0;
    pbVar1[9] = 0;
    pbVar1[10] = 0xf0;
    pbVar1[0xb] = 0xbf;
    return;
  }
  local_20 = *(undefined4 **)(iVar3 + 0x30);
  local_20[2] = local_20[2] + 1;
  uVar4 = *(undefined4 *)(param_1 + 0x18);
  FUN_00526260(0);
  FUN_005272e0(&local_24,uVar4,0xffffffff,0);
  iVar3 = FUN_00524bc0();
  if (iVar3 == 0) {
    iVar3 = FUN_00524bc0();
    local_8 = (double)iVar3;
    if (iVar3 < 0) {
      local_8 = local_8 + 4294967296.0;
    }
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    *pbVar1 = 3;
    *(double *)(pbVar1 + 4) = local_8;
  }
  else {
    local_1c = *local_20;
    local_14 = *local_24;
    local_18 = 0x7ffffff;
    if (1 < *(int *)(param_1 + 0x1c)) {
      uVar4 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(1);
      FUN_00527730(uVar4);
      local_18 = FUN_0063b380();
    }
    uVar4 = FUN_0051aa70(&local_14);
    local_8 = (double)CONCAT44(local_8._4_4_,uVar4);
    iVar3 = -1;
    iVar7 = 0;
    iVar5 = FUN_0051aa70(&local_1c);
    while (iVar5 != 0) {
      if ((iVar7 <= local_18) && (iVar5 == local_8._0_4_)) {
        local_10 = local_1c;
        local_c = local_14;
        iVar5 = FUN_0051aa70(&local_10);
        iVar6 = FUN_0051aa70(&local_c);
        while (iVar5 != 0) {
          if (iVar6 == 0) goto LAB_005b1f86;
          if (iVar5 != iVar6) break;
          iVar5 = FUN_0051aa70(&local_10);
          iVar6 = FUN_0051aa70(&local_c);
        }
        if (iVar6 == 0) {
LAB_005b1f86:
          iVar3 = iVar7;
        }
        if (iVar5 == 0) break;
      }
      iVar7 = iVar7 + 1;
      iVar5 = FUN_0051aa70(&local_1c);
    }
    pbVar1 = *(byte **)(param_1 + 4);
    if (4 < *pbVar1) {
      FUN_00526400();
    }
    *(int *)(pbVar1 + 4) = iVar3;
    *pbVar1 = 4;
  }
  local_24[2] = local_24[2] + -1;
  if (local_24[2] == 0) {
    FUN_00525340();
  }
  local_20[2] = local_20[2] + -1;
  if (local_20[2] == 0) {
    FUN_00525340();
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005b1df0 : SUB ESP,0x24
005b1df3 : PUSH EDI
005b1df4 : MOV EDI,dword ptr [ESP + 0x2c]
005b1df8 : PUSH 0x8
005b1dfa : MOV ECX,EDI
005b1dfc : CALL 0x00526030
005b1e01 : TEST AL,AL
005b1e03 : JNZ 0x005b1e1a
005b1e05 : PUSH 0x0
005b1e07 : PUSH 0x0
005b1e09 : PUSH 0xb8f800
005b1e0e : MOV ECX,EDI
005b1e10 : CALL 0x00526050
005b1e15 : POP EDI
005b1e16 : ADD ESP,0x24
005b1e19 : RET
005b1e1a : MOV EAX,dword ptr [EDI + 0x8]
005b1e1d : TEST EAX,EAX
005b1e1f : JZ 0x005b1e26
005b1e21 : ADD EAX,-0x10
005b1e24 : JMP 0x005b1e28
005b1e26 : XOR EAX,EAX
005b1e28 : PUSH EBX
005b1e29 : MOV EBX,0x1
005b1e2e : CMP dword ptr [EDI + 0x1c],EBX
005b1e31 : PUSH ESI
005b1e32 : JGE 0x005b1e56
005b1e34 : MOV ESI,dword ptr [EDI + 0x4]
005b1e37 : CMP byte ptr [ESI],0x5
005b1e3a : JC 0x005b1e43
005b1e3c : MOV ECX,ESI
005b1e3e : CALL 0x00526400
005b1e43 : FLD double ptr [0x00b86090]
005b1e49 : MOV byte ptr [ESI],0x3
005b1e4c : FSTP double ptr [ESI + 0x4]
005b1e4f : POP ESI
005b1e50 : POP EBX
005b1e51 : POP EDI
005b1e52 : ADD ESP,0x24
005b1e55 : RET
005b1e56 : MOV EAX,dword ptr [EAX + 0x30]
005b1e59 : MOV dword ptr [ESP + 0x10],EAX
005b1e5d : ADD dword ptr [EAX + 0x8],EBX
005b1e60 : MOV ESI,dword ptr [EDI + 0x18]
005b1e63 : PUSH 0x0
005b1e65 : MOV ECX,EDI
005b1e67 : CALL 0x00526260
005b1e6c : PUSH 0x0
005b1e6e : PUSH -0x1
005b1e70 : PUSH ESI
005b1e71 : LEA ECX,[ESP + 0x18]
005b1e75 : PUSH ECX
005b1e76 : MOV ECX,EAX
005b1e78 : CALL 0x005272e0
005b1e7d : LEA ECX,[ESP + 0xc]
005b1e81 : CALL 0x00524bc0
005b1e86 : TEST EAX,EAX
005b1e88 : JNZ 0x005b1ec7
005b1e8a : LEA ECX,[ESP + 0x10]
005b1e8e : CALL 0x00524bc0
005b1e93 : MOV dword ptr [ESP + 0x28],EAX
005b1e97 : FILD dword ptr [ESP + 0x28]
005b1e9b : TEST EAX,EAX
005b1e9d : JGE 0x005b1ea5
005b1e9f : FADD double ptr [0x00cdf6f8]
005b1ea5 : MOV ESI,dword ptr [EDI + 0x4]
005b1ea8 : FSTP double ptr [ESP + 0x28]
005b1eac : CMP byte ptr [ESI],0x5
005b1eaf : JC 0x005b1eb8
005b1eb1 : MOV ECX,ESI
005b1eb3 : CALL 0x00526400
005b1eb8 : FLD double ptr [ESP + 0x28]
005b1ebc : MOV byte ptr [ESI],0x3
005b1ebf : FSTP double ptr [ESI + 0x4]
005b1ec2 : JMP 0x005b1fb1
005b1ec7 : CMP dword ptr [EDI + 0x1c],EBX
005b1eca : MOV EDX,dword ptr [ESP + 0x10]
005b1ece : MOV EAX,dword ptr [EDX]
005b1ed0 : MOV ECX,dword ptr [ESP + 0xc]
005b1ed4 : MOV dword ptr [ESP + 0x14],EAX
005b1ed8 : MOV EDX,dword ptr [ECX]
005b1eda : MOV dword ptr [ESP + 0x1c],EDX
005b1ede : MOV dword ptr [ESP + 0x18],0x7ffffff
005b1ee6 : JLE 0x005b1f04
005b1ee8 : MOV EAX,dword ptr [EDI + 0x18]
005b1eeb : PUSH EAX
005b1eec : PUSH EBX
005b1eed : MOV ECX,EDI
005b1eef : CALL 0x00526260
005b1ef4 : MOV ECX,EAX
005b1ef6 : CALL 0x00527730
005b1efb : CALL 0x0063b380
005b1f00 : MOV dword ptr [ESP + 0x18],EAX
005b1f04 : PUSH EBP
005b1f05 : LEA ECX,[ESP + 0x20]
005b1f09 : PUSH ECX
005b1f0a : CALL 0x0051aa70
005b1f0f : LEA EDX,[ESP + 0x18]
005b1f13 : PUSH EDX
005b1f14 : MOV dword ptr [ESP + 0x30],EAX
005b1f18 : OR EBP,0xffffffff
005b1f1b : XOR EBX,EBX
005b1f1d : CALL 0x0051aa70
005b1f22 : TEST EAX,EAX
005b1f24 : JZ 0x005b1f9b
005b1f26 : CMP EBX,dword ptr [ESP + 0x1c]
005b1f2a : JG 0x005b1f8c
005b1f2c : CMP EAX,dword ptr [ESP + 0x2c]
005b1f30 : JNZ 0x005b1f8c
005b1f32 : MOV EAX,dword ptr [ESP + 0x18]
005b1f36 : MOV ECX,dword ptr [ESP + 0x20]
005b1f3a : LEA EDX,[ESP + 0x24]
005b1f3e : PUSH EDX
005b1f3f : MOV dword ptr [ESP + 0x28],EAX
005b1f43 : MOV dword ptr [ESP + 0x2c],ECX
005b1f47 : CALL 0x0051aa70
005b1f4c : MOV ESI,EAX
005b1f4e : LEA EAX,[ESP + 0x28]
005b1f52 : PUSH EAX
005b1f53 : CALL 0x0051aa70
005b1f58 : TEST ESI,ESI
005b1f5a : JZ 0x005b1f82
005b1f5c : LEA ESP,[ESP]
005b1f60 : TEST EAX,EAX
005b1f62 : JZ 0x005b1f86
005b1f64 : CMP ESI,EAX
005b1f66 : JNZ 0x005b1f82
005b1f68 : LEA ECX,[ESP + 0x24]
005b1f6c : PUSH ECX
005b1f6d : CALL 0x0051aa70
005b1f72 : LEA EDX,[ESP + 0x28]
005b1f76 : PUSH EDX
005b1f77 : MOV ESI,EAX
005b1f79 : CALL 0x0051aa70
005b1f7e : TEST ESI,ESI
005b1f80 : JNZ 0x005b1f60
005b1f82 : TEST EAX,EAX
005b1f84 : JNZ 0x005b1f88
005b1f86 : MOV EBP,EBX
005b1f88 : TEST ESI,ESI
005b1f8a : JZ 0x005b1f9b
005b1f8c : LEA EAX,[ESP + 0x18]
005b1f90 : PUSH EAX
005b1f91 : INC EBX
005b1f92 : CALL 0x0051aa70
005b1f97 : TEST EAX,EAX
005b1f99 : JNZ 0x005b1f26
005b1f9b : MOV ESI,dword ptr [EDI + 0x4]
005b1f9e : CMP byte ptr [ESI],0x5
005b1fa1 : JC 0x005b1faa
005b1fa3 : MOV ECX,ESI
005b1fa5 : CALL 0x00526400
005b1faa : MOV dword ptr [ESI + 0x4],EBP
005b1fad : MOV byte ptr [ESI],0x4
005b1fb0 : POP EBP
005b1fb1 : MOV EAX,dword ptr [ESP + 0xc]
005b1fb5 : DEC dword ptr [EAX + 0x8]
005b1fb8 : MOV ECX,EAX
005b1fba : ADD EAX,0x8
005b1fbd : CMP dword ptr [EAX],0x0
005b1fc0 : JNZ 0x005b1fc7
005b1fc2 : CALL 0x00525340
005b1fc7 : MOV EAX,dword ptr [ESP + 0x10]
005b1fcb : DEC dword ptr [EAX + 0x8]
005b1fce : MOV ECX,EAX
005b1fd0 : ADD EAX,0x8
005b1fd3 : CMP dword ptr [EAX],0x0
005b1fd6 : JNZ 0x005b1fdd
005b1fd8 : CALL 0x00525340
005b1fdd : POP ESI
005b1fde : POP EBX
005b1fdf : POP EDI
005b1fe0 : ADD ESP,0x24
005b1fe3 : RET
