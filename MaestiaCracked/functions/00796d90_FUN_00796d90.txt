PROGRAM  : Maestia.exe
FUNCTION : FUN_00796d90
ENTRY    : 00796d90
BODY     : [[00796d90, 00796df5] [00796e00, 00796f38] [00796f40, 00796f91]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00796d90(void)

{
  int iVar1;
  float fVar2;
  float fVar3;
  DWORD DVar4;
  int iVar5;
  int iVar6;
  int unaff_ESI;
  float fVar7;
  
  DVar4 = GetTickCount();
  fVar3 = DAT_00d72c20;
  iVar5 = DVar4 - *(int *)(unaff_ESI + 0x2dc);
  fVar2 = (float)iVar5;
  if (iVar5 < 0) {
    fVar2 = fVar2 + 4.2949673e+09;
  }
  fVar2 = fVar2 * 0.001;
  *(DWORD *)(unaff_ESI + 0x2dc) = DVar4;
  iVar6 = *(int *)(unaff_ESI + 0x2cc) - *(int *)(unaff_ESI + 0x2c8) >> 2;
  iVar5 = 0;
  if (3 < iVar6) {
    do {
      iVar1 = *(int *)(*(int *)(unaff_ESI + 0x2c8) + iVar5 * 4);
      if (fVar3 < *(float *)(iVar1 + 8)) {
        *(float *)(iVar1 + 8) = *(float *)(iVar1 + 8) - fVar3;
      }
      fVar7 = *(float *)(iVar1 + 8) + *(float *)(iVar1 + 0x10) * fVar2;
      *(float *)(iVar1 + 8) = fVar7;
      *(float *)(iVar1 + 0xc) = fVar7 + 1.0;
      *(float *)(iVar1 + 0x28) = fVar2 + *(float *)(iVar1 + 0x28);
      iVar1 = *(int *)(*(int *)(unaff_ESI + 0x2c8) + 4 + iVar5 * 4);
      if (fVar3 < *(float *)(iVar1 + 8)) {
        *(float *)(iVar1 + 8) = *(float *)(iVar1 + 8) - fVar3;
      }
      fVar7 = *(float *)(iVar1 + 8) + *(float *)(iVar1 + 0x10) * fVar2;
      *(float *)(iVar1 + 8) = fVar7;
      *(float *)(iVar1 + 0xc) = fVar7 + 1.0;
      *(float *)(iVar1 + 0x28) = fVar2 + *(float *)(iVar1 + 0x28);
      iVar1 = *(int *)(*(int *)(unaff_ESI + 0x2c8) + 8 + iVar5 * 4);
      if (fVar3 < *(float *)(iVar1 + 8)) {
        *(float *)(iVar1 + 8) = *(float *)(iVar1 + 8) - fVar3;
      }
      fVar7 = *(float *)(iVar1 + 8) + *(float *)(iVar1 + 0x10) * fVar2;
      *(float *)(iVar1 + 8) = fVar7;
      *(float *)(iVar1 + 0xc) = fVar7 + 1.0;
      *(float *)(iVar1 + 0x28) = fVar2 + *(float *)(iVar1 + 0x28);
      iVar1 = *(int *)(*(int *)(unaff_ESI + 0x2c8) + 0xc + iVar5 * 4);
      if (fVar3 < *(float *)(iVar1 + 8)) {
        *(float *)(iVar1 + 8) = *(float *)(iVar1 + 8) - fVar3;
      }
      fVar7 = *(float *)(iVar1 + 8) + *(float *)(iVar1 + 0x10) * fVar2;
      *(float *)(iVar1 + 8) = fVar7;
      *(float *)(iVar1 + 0xc) = fVar7 + 1.0;
      iVar5 = iVar5 + 4;
      *(float *)(iVar1 + 0x28) = fVar2 + *(float *)(iVar1 + 0x28);
    } while (iVar5 < iVar6 + -3);
  }
  for (; iVar5 < iVar6; iVar5 = iVar5 + 1) {
    iVar1 = *(int *)(*(int *)(unaff_ESI + 0x2c8) + iVar5 * 4);
    if (fVar3 < *(float *)(iVar1 + 8)) {
      *(float *)(iVar1 + 8) = *(float *)(iVar1 + 8) - fVar3;
    }
    fVar7 = *(float *)(iVar1 + 8) + *(float *)(iVar1 + 0x10) * fVar2;
    *(float *)(iVar1 + 8) = fVar7;
    *(float *)(iVar1 + 0xc) = fVar7 + 1.0;
    *(float *)(iVar1 + 0x28) = fVar2 + *(float *)(iVar1 + 0x28);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00796d90 : PUSH EBP
00796d91 : MOV EBP,ESP
00796d93 : PUSH ECX
00796d94 : CALL dword ptr [0x00b850d8]
00796d9a : MOV ECX,EAX
00796d9c : SUB ECX,dword ptr [ESI + 0x2dc]
00796da2 : MOV dword ptr [EBP + -0x4],ECX
00796da5 : FILD dword ptr [EBP + -0x4]
00796da8 : TEST ECX,ECX
00796daa : JGE 0x00796db2
00796dac : FADD float ptr [0x00cdf0e0]
00796db2 : FMUL float ptr [0x00cdf128]
00796db8 : MOVSS XMM2,dword ptr [0x00d72c20]
00796dc0 : MOVSS XMM4,dword ptr [0x00c10fc4]
00796dc8 : MOV dword ptr [ESI + 0x2dc],EAX
00796dce : MOV EDX,dword ptr [ESI + 0x2cc]
00796dd4 : FSTP float ptr [EBP + -0x4]
00796dd7 : SUB EDX,dword ptr [ESI + 0x2c8]
00796ddd : MOVSS XMM0,dword ptr [EBP + -0x4]
00796de2 : SAR EDX,0x2
00796de5 : XOR ECX,ECX
00796de7 : CMP EDX,0x4
00796dea : JL 0x00796f33
00796df0 : PUSH EDI
00796df1 : LEA EDI,[EDX + -0x3]
00796df4 : JMP 0x00796e00
00796e00 : MOV EAX,dword ptr [ESI + 0x2c8]
00796e06 : MOV EAX,dword ptr [EAX + ECX*0x4]
00796e09 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796e0e : COMISS XMM1,XMM2
00796e11 : MOVSS XMM3,dword ptr [EAX + 0x10]
00796e16 : MULSS XMM3,XMM0
00796e1a : JBE 0x00796e25
00796e1c : SUBSS XMM1,XMM2
00796e20 : MOVSS dword ptr [EAX + 0x8],XMM1
00796e25 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796e2a : ADDSS XMM1,XMM3
00796e2e : MOVSS dword ptr [EAX + 0x8],XMM1
00796e33 : ADDSS XMM1,XMM4
00796e37 : MOVSS dword ptr [EAX + 0xc],XMM1
00796e3c : MOVAPS XMM1,XMM0
00796e3f : ADDSS XMM1,dword ptr [EAX + 0x28]
00796e44 : MOVSS dword ptr [EAX + 0x28],XMM1
00796e49 : MOV EAX,dword ptr [ESI + 0x2c8]
00796e4f : MOV EAX,dword ptr [EAX + ECX*0x4 + 0x4]
00796e53 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796e58 : COMISS XMM1,XMM2
00796e5b : MOVSS XMM3,dword ptr [EAX + 0x10]
00796e60 : MULSS XMM3,XMM0
00796e64 : JBE 0x00796e6f
00796e66 : SUBSS XMM1,XMM2
00796e6a : MOVSS dword ptr [EAX + 0x8],XMM1
00796e6f : MOVSS XMM1,dword ptr [EAX + 0x8]
00796e74 : ADDSS XMM1,XMM3
00796e78 : MOVSS dword ptr [EAX + 0x8],XMM1
00796e7d : ADDSS XMM1,XMM4
00796e81 : MOVSS dword ptr [EAX + 0xc],XMM1
00796e86 : MOVAPS XMM1,XMM0
00796e89 : ADDSS XMM1,dword ptr [EAX + 0x28]
00796e8e : MOVSS dword ptr [EAX + 0x28],XMM1
00796e93 : MOV EAX,dword ptr [ESI + 0x2c8]
00796e99 : MOV EAX,dword ptr [EAX + ECX*0x4 + 0x8]
00796e9d : MOVSS XMM1,dword ptr [EAX + 0x8]
00796ea2 : COMISS XMM1,XMM2
00796ea5 : MOVSS XMM3,dword ptr [EAX + 0x10]
00796eaa : MULSS XMM3,XMM0
00796eae : JBE 0x00796eb9
00796eb0 : SUBSS XMM1,XMM2
00796eb4 : MOVSS dword ptr [EAX + 0x8],XMM1
00796eb9 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796ebe : ADDSS XMM1,XMM3
00796ec2 : MOVSS dword ptr [EAX + 0x8],XMM1
00796ec7 : ADDSS XMM1,XMM4
00796ecb : MOVSS dword ptr [EAX + 0xc],XMM1
00796ed0 : MOVAPS XMM1,XMM0
00796ed3 : ADDSS XMM1,dword ptr [EAX + 0x28]
00796ed8 : MOVSS dword ptr [EAX + 0x28],XMM1
00796edd : MOV EAX,dword ptr [ESI + 0x2c8]
00796ee3 : MOV EAX,dword ptr [EAX + ECX*0x4 + 0xc]
00796ee7 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796eec : COMISS XMM1,XMM2
00796eef : MOVSS XMM3,dword ptr [EAX + 0x10]
00796ef4 : MULSS XMM3,XMM0
00796ef8 : JBE 0x00796f03
00796efa : SUBSS XMM1,XMM2
00796efe : MOVSS dword ptr [EAX + 0x8],XMM1
00796f03 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796f08 : ADDSS XMM1,XMM3
00796f0c : MOVSS dword ptr [EAX + 0x8],XMM1
00796f11 : ADDSS XMM1,XMM4
00796f15 : MOVSS dword ptr [EAX + 0xc],XMM1
00796f1a : ADD ECX,0x4
00796f1d : CMP ECX,EDI
00796f1f : MOVAPS XMM1,XMM0
00796f22 : ADDSS XMM1,dword ptr [EAX + 0x28]
00796f27 : MOVSS dword ptr [EAX + 0x28],XMM1
00796f2c : JL 0x00796e00
00796f32 : POP EDI
00796f33 : CMP ECX,EDX
00796f35 : JGE 0x00796f8e
00796f37 : JMP 0x00796f40
00796f40 : MOV EAX,dword ptr [ESI + 0x2c8]
00796f46 : MOV EAX,dword ptr [EAX + ECX*0x4]
00796f49 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796f4e : COMISS XMM1,XMM2
00796f51 : MOVSS XMM3,dword ptr [EAX + 0x10]
00796f56 : MULSS XMM3,XMM0
00796f5a : JBE 0x00796f65
00796f5c : SUBSS XMM1,XMM2
00796f60 : MOVSS dword ptr [EAX + 0x8],XMM1
00796f65 : MOVSS XMM1,dword ptr [EAX + 0x8]
00796f6a : ADDSS XMM1,XMM3
00796f6e : MOVSS dword ptr [EAX + 0x8],XMM1
00796f73 : ADDSS XMM1,XMM4
00796f77 : MOVSS dword ptr [EAX + 0xc],XMM1
00796f7c : INC ECX
00796f7d : CMP ECX,EDX
00796f7f : MOVAPS XMM1,XMM0
00796f82 : ADDSS XMM1,dword ptr [EAX + 0x28]
00796f87 : MOVSS dword ptr [EAX + 0x28],XMM1
00796f8c : JL 0x00796f40
00796f8e : MOV ESP,EBP
00796f90 : POP EBP
00796f91 : RET
