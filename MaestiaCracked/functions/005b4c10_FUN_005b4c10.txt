PROGRAM  : Maestia.exe
FUNCTION : FUN_005b4c10
ENTRY    : 005b4c10
BODY     : [[005b4c10, 005b4e76]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005b4c10(int param_1)

{
  GRefCountNTSImpl *this;
  char cVar1;
  int iVar2;
  GRefCountNTSImpl *pGVar3;
  float *pfVar4;
  float10 fVar5;
  undefined4 uVar6;
  GRefCountNTSImpl *local_34;
  undefined1 local_30 [16];
  float local_20 [4];
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  cVar1 = FUN_00526030(0x15);
  if (cVar1 == '\0') {
    FUN_00526050("Color",0,0);
    return;
  }
  if ((*(int *)(param_1 + 8) != 0) && (*(int *)(param_1 + 8) != 0x10)) {
    FUN_005033a0(&local_34);
    this = local_34;
    if (local_34 != (GRefCountNTSImpl *)0x0) {
      *(int *)(local_34 + 4) = *(int *)(local_34 + 4) + 1;
      GRefCountNTSImpl::Release(local_34);
    }
    if (*(int *)(param_1 + 0x1c) < 1) {
      if (this != (GRefCountNTSImpl *)0x0) {
        GRefCountNTSImpl::Release(this);
        return;
      }
    }
    else if (this != (GRefCountNTSImpl *)0x0) {
      uVar6 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(0);
      iVar2 = FUN_005270f0(uVar6);
      if (iVar2 != 0) {
        pGVar3 = this + 0x24;
        pfVar4 = local_20;
        for (iVar2 = 8; iVar2 != 0; iVar2 = iVar2 + -1) {
          *pfVar4 = *(float *)pGVar3;
          pGVar3 = pGVar3 + 4;
          pfVar4 = pfVar4 + 1;
        }
        iVar2 = *(int *)(param_1 + 0x18) + 0x78;
        local_30[0] = 0;
        cVar1 = FUN_00500770(iVar2,&DAT_00b903c4,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_34 = (GRefCountNTSImpl *)(float)fVar5;
          local_10 = (float)local_34 / 100.0;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903c0,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_34 = (GRefCountNTSImpl *)(float)fVar5;
          local_20[2] = (float)local_34 / 100.0;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903bc,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_34 = (GRefCountNTSImpl *)(float)fVar5;
          local_20[0] = (float)local_34 / 100.0;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903b8,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_34 = (GRefCountNTSImpl *)(float)fVar5;
          local_8 = (float)local_34 / 100.0;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903b4,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_c = (float)fVar5;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903b0,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_20[3] = (float)fVar5;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903ac,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_20[1] = (float)fVar5;
        }
        cVar1 = FUN_00500770(iVar2,&DAT_00b903a8,local_30);
        if (cVar1 != '\0') {
          fVar5 = (float10)FUN_00527730(*(undefined4 *)(param_1 + 0x18));
          local_4 = (float)fVar5;
        }
        FUN_0051ccd0(local_20);
        (**(code **)(*(int *)this + 0x14))(0);
        FUN_00526bc0();
      }
      GRefCountNTSImpl::Release(this);
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005b4c10 : SUB ESP,0x34
005b4c13 : PUSH ESI
005b4c14 : MOV ESI,dword ptr [ESP + 0x3c]
005b4c18 : PUSH 0x15
005b4c1a : MOV ECX,ESI
005b4c1c : CALL 0x00526030
005b4c21 : TEST AL,AL
005b4c23 : JNZ 0x005b4c3a
005b4c25 : PUSH 0x0
005b4c27 : PUSH 0x0
005b4c29 : PUSH 0xb8fe48
005b4c2e : MOV ECX,ESI
005b4c30 : CALL 0x00526050
005b4c35 : POP ESI
005b4c36 : ADD ESP,0x34
005b4c39 : RET
005b4c3a : MOV EAX,dword ptr [ESI + 0x8]
005b4c3d : TEST EAX,EAX
005b4c3f : JZ 0x005b4e60
005b4c45 : ADD EAX,-0x10
005b4c48 : JZ 0x005b4e60
005b4c4e : PUSH EBP
005b4c4f : PUSH EDI
005b4c50 : LEA ECX,[ESP + 0xc]
005b4c54 : PUSH ECX
005b4c55 : LEA ECX,[EAX + 0x30]
005b4c58 : CALL 0x005033a0
005b4c5d : MOV EBP,dword ptr [ESP + 0xc]
005b4c61 : MOV EDI,0x1
005b4c66 : TEST EBP,EBP
005b4c68 : JZ 0x005b4c78
005b4c6a : ADD dword ptr [EBP + 0x4],EDI
005b4c6d : MOV EBP,dword ptr [ESP + 0xc]
005b4c71 : MOV ECX,EBP
005b4c73 : CALL 0x004ff7c0
005b4c78 : CMP dword ptr [ESI + 0x1c],EDI
005b4c7b : JL 0x005b4e65
005b4c81 : TEST EBP,EBP
005b4c83 : JZ 0x005b4e5e
005b4c89 : MOV EDX,dword ptr [ESI + 0x18]
005b4c8c : PUSH EBX
005b4c8d : PUSH EDX
005b4c8e : PUSH 0x0
005b4c90 : MOV ECX,ESI
005b4c92 : CALL 0x00526260
005b4c97 : MOV ECX,EAX
005b4c99 : CALL 0x005270f0
005b4c9e : MOV EBX,EAX
005b4ca0 : TEST EBX,EBX
005b4ca2 : JZ 0x005b4e56
005b4ca8 : LEA ESI,[EBP + 0x24]
005b4cab : MOV ECX,0x8
005b4cb0 : LEA EDI,[ESP + 0x24]
005b4cb4 : MOVSD.REP ES:EDI,ESI
005b4cb6 : MOV EDI,dword ptr [ESP + 0x48]
005b4cba : MOV ESI,dword ptr [EDI + 0x18]
005b4cbd : LEA EAX,[ESP + 0x14]
005b4cc1 : PUSH EAX
005b4cc2 : PUSH 0xb903c4
005b4cc7 : ADD ESI,0x78
005b4cca : PUSH ESI
005b4ccb : MOV ECX,EBX
005b4ccd : MOV byte ptr [ESP + 0x20],0x0
005b4cd2 : CALL 0x00500770
005b4cd7 : TEST AL,AL
005b4cd9 : JZ 0x005b4cfa
005b4cdb : MOV ECX,dword ptr [EDI + 0x18]
005b4cde : PUSH ECX
005b4cdf : LEA ECX,[ESP + 0x18]
005b4ce3 : CALL 0x00527730
005b4ce8 : FSTP float ptr [ESP + 0x10]
005b4cec : FLD float ptr [ESP + 0x10]
005b4cf0 : FDIV double ptr [0x00cdf2a8]
005b4cf6 : FSTP float ptr [ESP + 0x34]
005b4cfa : LEA EDX,[ESP + 0x14]
005b4cfe : PUSH EDX
005b4cff : PUSH 0xb903c0
005b4d04 : PUSH ESI
005b4d05 : MOV ECX,EBX
005b4d07 : CALL 0x00500770
005b4d0c : TEST AL,AL
005b4d0e : JZ 0x005b4d2f
005b4d10 : MOV EAX,dword ptr [EDI + 0x18]
005b4d13 : PUSH EAX
005b4d14 : LEA ECX,[ESP + 0x18]
005b4d18 : CALL 0x00527730
005b4d1d : FSTP float ptr [ESP + 0x10]
005b4d21 : FLD float ptr [ESP + 0x10]
005b4d25 : FDIV double ptr [0x00cdf2a8]
005b4d2b : FSTP float ptr [ESP + 0x2c]
005b4d2f : LEA ECX,[ESP + 0x14]
005b4d33 : PUSH ECX
005b4d34 : PUSH 0xb903bc
005b4d39 : PUSH ESI
005b4d3a : MOV ECX,EBX
005b4d3c : CALL 0x00500770
005b4d41 : TEST AL,AL
005b4d43 : JZ 0x005b4d64
005b4d45 : MOV EDX,dword ptr [EDI + 0x18]
005b4d48 : PUSH EDX
005b4d49 : LEA ECX,[ESP + 0x18]
005b4d4d : CALL 0x00527730
005b4d52 : FSTP float ptr [ESP + 0x10]
005b4d56 : FLD float ptr [ESP + 0x10]
005b4d5a : FDIV double ptr [0x00cdf2a8]
005b4d60 : FSTP float ptr [ESP + 0x24]
005b4d64 : LEA EAX,[ESP + 0x14]
005b4d68 : PUSH EAX
005b4d69 : PUSH 0xb903b8
005b4d6e : PUSH ESI
005b4d6f : MOV ECX,EBX
005b4d71 : CALL 0x00500770
005b4d76 : TEST AL,AL
005b4d78 : JZ 0x005b4d99
005b4d7a : MOV ECX,dword ptr [EDI + 0x18]
005b4d7d : PUSH ECX
005b4d7e : LEA ECX,[ESP + 0x18]
005b4d82 : CALL 0x00527730
005b4d87 : FSTP float ptr [ESP + 0x10]
005b4d8b : FLD float ptr [ESP + 0x10]
005b4d8f : FDIV double ptr [0x00cdf2a8]
005b4d95 : FSTP float ptr [ESP + 0x3c]
005b4d99 : LEA EDX,[ESP + 0x14]
005b4d9d : PUSH EDX
005b4d9e : PUSH 0xb903b4
005b4da3 : PUSH ESI
005b4da4 : MOV ECX,EBX
005b4da6 : CALL 0x00500770
005b4dab : TEST AL,AL
005b4dad : JZ 0x005b4dc0
005b4daf : MOV EAX,dword ptr [EDI + 0x18]
005b4db2 : PUSH EAX
005b4db3 : LEA ECX,[ESP + 0x18]
005b4db7 : CALL 0x00527730
005b4dbc : FSTP float ptr [ESP + 0x38]
005b4dc0 : LEA ECX,[ESP + 0x14]
005b4dc4 : PUSH ECX
005b4dc5 : PUSH 0xb903b0
005b4dca : PUSH ESI
005b4dcb : MOV ECX,EBX
005b4dcd : CALL 0x00500770
005b4dd2 : TEST AL,AL
005b4dd4 : JZ 0x005b4de7
005b4dd6 : MOV EDX,dword ptr [EDI + 0x18]
005b4dd9 : PUSH EDX
005b4dda : LEA ECX,[ESP + 0x18]
005b4dde : CALL 0x00527730
005b4de3 : FSTP float ptr [ESP + 0x30]
005b4de7 : LEA EAX,[ESP + 0x14]
005b4deb : PUSH EAX
005b4dec : PUSH 0xb903ac
005b4df1 : PUSH ESI
005b4df2 : MOV ECX,EBX
005b4df4 : CALL 0x00500770
005b4df9 : TEST AL,AL
005b4dfb : JZ 0x005b4e0e
005b4dfd : MOV ECX,dword ptr [EDI + 0x18]
005b4e00 : PUSH ECX
005b4e01 : LEA ECX,[ESP + 0x18]
005b4e05 : CALL 0x00527730
005b4e0a : FSTP float ptr [ESP + 0x28]
005b4e0e : LEA EDX,[ESP + 0x14]
005b4e12 : PUSH EDX
005b4e13 : PUSH 0xb903a8
005b4e18 : PUSH ESI
005b4e19 : MOV ECX,EBX
005b4e1b : CALL 0x00500770
005b4e20 : TEST AL,AL
005b4e22 : JZ 0x005b4e35
005b4e24 : MOV EAX,dword ptr [EDI + 0x18]
005b4e27 : PUSH EAX
005b4e28 : LEA ECX,[ESP + 0x18]
005b4e2c : CALL 0x00527730
005b4e31 : FSTP float ptr [ESP + 0x40]
005b4e35 : LEA ECX,[ESP + 0x24]
005b4e39 : PUSH ECX
005b4e3a : MOV ECX,EBP
005b4e3c : CALL 0x0051ccd0
005b4e41 : MOV EDX,dword ptr [EBP]
005b4e44 : MOV EAX,dword ptr [EDX + 0x14]
005b4e47 : PUSH 0x0
005b4e49 : MOV ECX,EBP
005b4e4b : CALL EAX
005b4e4d : LEA ECX,[ESP + 0x14]
005b4e51 : CALL 0x00526bc0
005b4e56 : MOV ECX,EBP
005b4e58 : CALL 0x004ff7c0
005b4e5d : POP EBX
005b4e5e : POP EDI
005b4e5f : POP EBP
005b4e60 : POP ESI
005b4e61 : ADD ESP,0x34
005b4e64 : RET
005b4e65 : TEST EBP,EBP
005b4e67 : JZ 0x005b4e5e
005b4e69 : MOV ECX,EBP
005b4e6b : CALL 0x004ff7c0
005b4e70 : POP EDI
005b4e71 : POP EBP
005b4e72 : POP ESI
005b4e73 : ADD ESP,0x34
005b4e76 : RET
