PROGRAM  : Maestia.exe
FUNCTION : FUN_0051b490
ENTRY    : 0051b490
BODY     : [[0051b490, 0051b4d7]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0051b490(void)

{
  uint uVar1;
  int iVar2;
  int *in_ECX;
  
  if (in_ECX[2] == 0) {
    uVar1 = ~(in_ECX[3] - 1U) & in_ECX[3];
    in_ECX[2] = uVar1;
    if (*in_ECX == 0) {
      iVar2 = FUN_00515840(uVar1,0);
    }
    else {
      iVar2 = FUN_00515c80(*in_ECX,uVar1);
    }
    *in_ECX = iVar2;
  }
  *(undefined1 *)(in_ECX + 4) = 0;
  in_ECX[1] = 0;
  if ((undefined1 *)*in_ECX != (undefined1 *)0x0) {
    *(undefined1 *)*in_ECX = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0051b490 : PUSH ESI
0051b491 : MOV ESI,ECX
0051b493 : CMP dword ptr [ESI + 0x8],0x0
0051b497 : JA 0x0051b4c2
0051b499 : MOV ECX,dword ptr [ESI + 0xc]
0051b49c : LEA EAX,[ECX + -0x1]
0051b49f : NOT EAX
0051b4a1 : AND EAX,ECX
0051b4a3 : MOV ECX,dword ptr [ESI]
0051b4a5 : MOV dword ptr [ESI + 0x8],EAX
0051b4a8 : TEST ECX,ECX
0051b4aa : JNZ 0x0051b4b9
0051b4ac : MOV ECX,dword ptr [ESI + 0x14]
0051b4af : PUSH 0x0
0051b4b1 : PUSH EAX
0051b4b2 : CALL 0x00515840
0051b4b7 : JMP 0x0051b4c0
0051b4b9 : PUSH EAX
0051b4ba : PUSH ECX
0051b4bb : CALL 0x00515c80
0051b4c0 : MOV dword ptr [ESI],EAX
0051b4c2 : MOV byte ptr [ESI + 0x10],0x0
0051b4c6 : MOV dword ptr [ESI + 0x4],0x0
0051b4cd : MOV ESI,dword ptr [ESI]
0051b4cf : TEST ESI,ESI
0051b4d1 : JZ 0x0051b4d6
0051b4d3 : MOV byte ptr [ESI],0x0
0051b4d6 : POP ESI
0051b4d7 : RET
