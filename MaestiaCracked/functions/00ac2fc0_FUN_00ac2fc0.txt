PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac2fc0
ENTRY    : 00ac2fc0
BODY     : [[00ac2fc0, 00ac313c] [00ac314e, 00ac3152]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00ac2fc0(int param_1)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  int in_ECX;
  undefined4 uVar4;
  int local_1a4 [15];
  undefined1 local_168 [80];
  undefined1 local_118 [28];
  undefined4 local_fc;
  int local_f8;
  undefined1 local_50 [56];
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b444e5;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = uVar2;
  if (*(int *)(param_1 + 0x14) != 0) {
    iVar3 = FUN_00405bb0(&DAT_00c44b78);
    if ((iVar3 != 0) && (in_ECX != 0)) {
      FUN_0070d390(uVar2);
      local_8 = 0;
      FUN_00406460(L"Script.mvd");
      iVar3 = DAT_017251a0;
      local_8._0_1_ = 1;
      FUN_0043acd0(DAT_017251a0 + 4,local_1a4);
      if (local_1a4[0] == *(int *)(iVar3 + 8)) {
        uVar4 = 0;
      }
      else {
        uVar4 = *(undefined4 *)(local_1a4[0] + 0x28);
      }
      local_8._0_1_ = 0;
      FUN_00406560();
      FUN_00403380(local_50,param_1);
      local_8._0_1_ = 2;
      cVar1 = FUN_00802fa0(uVar4,local_118);
      if (cVar1 != '\0') {
        if (local_f8 != 0) {
          FUN_0089e830(local_168);
          local_8 = CONCAT31(local_8._1_3_,3);
          FUN_0089f0f0(local_fc,local_f8);
          cVar1 = FUN_0089f0d0();
          if (cVar1 == '\0') {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
                    /* WARNING: Subroutine does not return */
          FUN_006f04e0();
        }
        FUN_0070d4c0();
      }
      local_8 = (uint)local_8._1_3_ << 8;
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_0070d710();
    }
  }
  ExceptionList = local_10;
  __security_check_cookie(local_18 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
00ac2fc0 : PUSH EBP
00ac2fc1 : MOV EBP,ESP
00ac2fc3 : PUSH -0x1
00ac2fc5 : PUSH 0xb444e5
00ac2fca : MOV EAX,FS:[0x0]
00ac2fd0 : PUSH EAX
00ac2fd1 : SUB ESP,0x1d8
00ac2fd7 : MOV EAX,[0x00d66fa0]
00ac2fdc : XOR EAX,EBP
00ac2fde : MOV dword ptr [EBP + -0x14],EAX
00ac2fe1 : PUSH EBX
00ac2fe2 : PUSH ESI
00ac2fe3 : PUSH EDI
00ac2fe4 : PUSH EAX
00ac2fe5 : LEA EAX,[EBP + -0xc]
00ac2fe8 : MOV FS:[0x0],EAX
00ac2fee : MOV EBX,dword ptr [EBP + 0x8]
00ac2ff1 : MOV EAX,dword ptr [EBX + 0x14]
00ac2ff4 : MOV ESI,ECX
00ac2ff6 : MOV dword ptr [EBP + 0xfffffe74],ESI
00ac2ffc : TEST EAX,EAX
00ac2ffe : JZ 0x00ac30e2
00ac3004 : PUSH 0xc44b78
00ac3009 : XOR EDI,EDI
00ac300b : MOV ECX,EBX
00ac300d : CALL 0x00405bb0
00ac3012 : TEST EAX,EAX
00ac3014 : JZ 0x00ac30e2
00ac301a : TEST ESI,ESI
00ac301c : JZ 0x00ac30e2
00ac3022 : LEA ECX,[EBP + 0xfffffeec]
00ac3028 : CALL 0x0070d390
00ac302d : MOV dword ptr [EBP + -0x4],EDI
00ac3030 : PUSH 0xc44b7c
00ac3035 : LEA ECX,[EBP + 0xffffff7c]
00ac303b : CALL 0x00406460
00ac3040 : MOV byte ptr [EBP + -0x4],0x1
00ac3044 : MOV EDI,dword ptr [0x017251a0]
00ac304a : LEA EAX,[EBP + 0xfffffe60]
00ac3050 : PUSH EAX
00ac3051 : LEA ECX,[EDI + 0x4]
00ac3054 : PUSH ECX
00ac3055 : LEA ESI,[EBP + 0xffffff7c]
00ac305b : CALL 0x0043acd0
00ac3060 : MOV EDI,dword ptr [EDI + 0x8]
00ac3063 : MOV EAX,dword ptr [EBP + 0xfffffe60]
00ac3069 : CMP EAX,EDI
00ac306b : JNZ 0x00ac3073
00ac306d : XOR EDI,EDI
00ac306f : XOR ESI,ESI
00ac3071 : JMP 0x00ac3078
00ac3073 : MOV ESI,dword ptr [EAX + 0x28]
00ac3076 : XOR EDI,EDI
00ac3078 : MOV byte ptr [EBP + -0x4],0x0
00ac307c : LEA ECX,[EBP + 0xffffff7c]
00ac3082 : CALL 0x00406560
00ac3087 : LEA EDX,[EBP + -0x4c]
00ac308a : PUSH EBX
00ac308b : PUSH EDX
00ac308c : MOV EDX,0xc44b94
00ac3091 : CALL 0x00403380
00ac3096 : MOV byte ptr [EBP + -0x4],0x2
00ac309a : LEA EAX,[EBP + 0xfffffeec]
00ac30a0 : PUSH EAX
00ac30a1 : PUSH ESI
00ac30a2 : LEA EDX,[EBP + -0x4c]
00ac30a5 : CALL 0x00802fa0
00ac30aa : ADD ESP,0x10
00ac30ad : TEST AL,AL
00ac30af : JZ 0x00ac30c4
00ac30b1 : CMP dword ptr [EBP + 0xffffff0c],EDI
00ac30b7 : JNZ 0x00ac3102
00ac30b9 : LEA ECX,[EBP + 0xfffffeec]
00ac30bf : CALL 0x0070d4c0
00ac30c4 : MOV byte ptr [EBP + -0x4],0x0
00ac30c8 : LEA ECX,[EBP + -0x4c]
00ac30cb : CALL 0x00406560
00ac30d0 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac30d7 : LEA ECX,[EBP + 0xfffffeec]
00ac30dd : CALL 0x0070d710
00ac30e2 : XOR AL,AL
00ac30e4 : MOV ECX,dword ptr [EBP + -0xc]
00ac30e7 : MOV dword ptr FS:[0x0],ECX
00ac30ee : POP ECX
00ac30ef : POP EDI
00ac30f0 : POP ESI
00ac30f1 : POP EBX
00ac30f2 : MOV ECX,dword ptr [EBP + -0x14]
00ac30f5 : XOR ECX,EBP
00ac30f7 : CALL 0x00633e6b
00ac30fc : MOV ESP,EBP
00ac30fe : POP EBP
00ac30ff : RET 0x4
00ac3102 : LEA ECX,[EBP + 0xfffffe9c]
00ac3108 : PUSH ECX
00ac3109 : CALL 0x0089e830
00ac310e : MOV byte ptr [EBP + -0x4],0x3
00ac3112 : MOV EDX,dword ptr [EBP + 0xffffff0c]
00ac3118 : MOV EAX,dword ptr [EBP + 0xffffff08]
00ac311e : PUSH EDX
00ac311f : PUSH EAX
00ac3120 : CALL 0x0089f0f0
00ac3125 : LEA ESI,[EBP + 0xfffffe9c]
00ac312b : MOV EBX,EAX
00ac312d : CALL 0x0089f0d0
00ac3132 : MOV ECX,EBX
00ac3134 : TEST AL,AL
00ac3136 : JNZ 0x00ac314e
00ac3138 : CALL 0x006f04e0
00ac314e : CALL 0x006f04e0
