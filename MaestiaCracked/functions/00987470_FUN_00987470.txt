PROGRAM  : Maestia.exe
FUNCTION : FUN_00987470
ENTRY    : 00987470
BODY     : [[00987470, 009874a7] [009874b0, 0098756c]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00987470(int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  int *piVar3;
  int iVar4;
  uint uVar5;
  int local_10;
  int *local_c;
  undefined1 local_8 [4];
  
  if (*(int *)(param_1 + 0x23c) == 0) {
    if (DAT_01724804 != 0) {
      local_10 = -(uint)(*(int *)(DAT_01724804 + 0x28) != 0);
      while (local_10 != 0) {
        if (DAT_01724804 != 0) {
          local_c = (int *)0x0;
          FUN_00404160(&local_10,local_8,&local_c);
          piVar3 = local_c;
          if (((local_c != (int *)0x0) && ((short)local_c[1] == 0x68c)) &&
             (iVar4 = (**(code **)(*local_c + 0x6c))(), iVar4 != 0)) {
            iVar4 = ((int)(*(byte *)(piVar3 + 0x10) - 1) / 10) * 0x10 + 0x5c + param_1;
            iVar1 = *(int *)(iVar4 + 4);
            if (iVar1 == 0) {
              uVar5 = 0;
            }
            else {
              uVar5 = *(int *)(iVar4 + 0xc) - iVar1 >> 2;
            }
            puVar2 = *(undefined4 **)(iVar4 + 8);
            if ((uint)((int)puVar2 - iVar1 >> 2) < uVar5) {
              *puVar2 = piVar3;
              *(undefined4 **)(iVar4 + 8) = puVar2 + 1;
            }
            else {
              FUN_0042fe80(iVar4,puVar2,&local_c);
            }
          }
        }
      }
    }
    *(undefined4 *)(param_1 + 0x23c) = 1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00987470 : PUSH EBP
00987471 : MOV EBP,ESP
00987473 : MOV EAX,dword ptr [EBP + 0x8]
00987476 : SUB ESP,0x10
00987479 : CMP dword ptr [EAX + 0x23c],0x0
00987480 : PUSH EBX
00987481 : PUSH ESI
00987482 : PUSH EDI
00987483 : JNZ 0x00987564
00987489 : MOV EAX,[0x01724804]
0098748e : TEST EAX,EAX
00987490 : JZ 0x00987557
00987496 : MOV ECX,dword ptr [EAX + 0x28]
00987499 : NEG ECX
0098749b : SBB ECX,ECX
0098749d : MOV dword ptr [EBP + -0xc],ECX
009874a0 : JZ 0x00987557
009874a6 : JMP 0x009874b5
009874b0 : MOV EAX,[0x01724804]
009874b5 : TEST EAX,EAX
009874b7 : JZ 0x0098754d
009874bd : LEA ECX,[EBP + -0x8]
009874c0 : PUSH ECX
009874c1 : LEA EDX,[EBP + -0x4]
009874c4 : PUSH EDX
009874c5 : LEA ECX,[EBP + -0xc]
009874c8 : PUSH ECX
009874c9 : MOV dword ptr [EBP + -0x8],0x0
009874d0 : CALL 0x00404160
009874d5 : MOV EDI,dword ptr [EBP + -0x8]
009874d8 : TEST EDI,EDI
009874da : JZ 0x0098754d
009874dc : MOV EDX,0x68c
009874e1 : CMP word ptr [EDI + 0x4],DX
009874e5 : JNZ 0x0098754d
009874e7 : MOV EAX,dword ptr [EDI]
009874e9 : MOV EDX,dword ptr [EAX + 0x6c]
009874ec : MOV ECX,EDI
009874ee : MOV dword ptr [EBP + -0x8],EDI
009874f1 : CALL EDX
009874f3 : TEST EAX,EAX
009874f5 : JZ 0x0098754d
009874f7 : MOVZX ECX,byte ptr [EDI + 0x40]
009874fb : DEC ECX
009874fc : MOV EAX,0x66666667
00987501 : IMUL ECX
00987503 : MOV ECX,dword ptr [EBP + 0x8]
00987506 : SAR EDX,0x2
00987509 : MOV EAX,EDX
0098750b : SHR EAX,0x1f
0098750e : ADD EAX,EDX
00987510 : SHL EAX,0x4
00987513 : LEA EAX,[EAX + ECX*0x1 + 0x5c]
00987517 : MOV ECX,dword ptr [EAX + 0x4]
0098751a : TEST ECX,ECX
0098751c : JNZ 0x00987522
0098751e : XOR ESI,ESI
00987520 : JMP 0x0098752a
00987522 : MOV ESI,dword ptr [EAX + 0xc]
00987525 : SUB ESI,ECX
00987527 : SAR ESI,0x2
0098752a : MOV EDX,dword ptr [EAX + 0x8]
0098752d : MOV EBX,EDX
0098752f : SUB EBX,ECX
00987531 : SAR EBX,0x2
00987534 : CMP EBX,ESI
00987536 : JNC 0x00987542
00987538 : MOV dword ptr [EDX],EDI
0098753a : ADD EDX,0x4
0098753d : MOV dword ptr [EAX + 0x8],EDX
00987540 : JMP 0x0098754d
00987542 : LEA ECX,[EBP + -0x8]
00987545 : PUSH ECX
00987546 : PUSH EDX
00987547 : PUSH EAX
00987548 : CALL 0x0042fe80
0098754d : CMP dword ptr [EBP + -0xc],0x0
00987551 : JNZ 0x009874b0
00987557 : MOV EDX,dword ptr [EBP + 0x8]
0098755a : MOV dword ptr [EDX + 0x23c],0x1
00987564 : POP EDI
00987565 : POP ESI
00987566 : POP EBX
00987567 : MOV ESP,EBP
00987569 : POP EBP
0098756a : RET 0x4
