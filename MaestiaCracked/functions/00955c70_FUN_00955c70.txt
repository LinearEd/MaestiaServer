PROGRAM  : Maestia.exe
FUNCTION : FUN_00955c70
ENTRY    : 00955c70
BODY     : [[00955c70, 00955e53]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00955c70(int param_1)

{
  int *piVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int in_ECX;
  uint local_30;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  piVar1 = DAT_00da9894;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b20086;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar4 = *(int *)(DAT_0172491c + 0x17c);
  if (*(int *)(iVar4 + 4) == in_ECX) {
    if (*(char *)(iVar4 + 0x1874) == '\0') goto LAB_00955e31;
    *(undefined1 *)(iVar4 + 0x1875) = 1;
    if (*(int *)(*piVar1 + 0x114) != 0) {
      piVar1 = *(int **)(*piVar1 + 0x114);
      (**(code **)(*piVar1 + 4))(piVar1,"TradeMyReadyEffect",&DAT_00c75f48,1,uVar2);
    }
    FUN_00406460(L"IDS_GUI_WAIT_ACCEPT");
    local_8 = 0;
    piVar1 = *(int **)(*(int *)(param_1 + 4) + 0x1a8);
    uVar3 = FUN_0081d120(local_2c);
    local_8._0_1_ = 1;
    (**(code **)(*piVar1 + 0x44))(uVar3,2);
    local_8 = (uint)local_8._1_3_ << 8;
  }
  else {
    if (*(int *)(param_1 + 0x4c) != in_ECX) goto LAB_00955e31;
    iVar4 = FUN_00a1a840(in_ECX);
    if ((iVar4 != 0) && (*(char *)(iVar4 + 0x1874) != '\0')) {
      *(undefined1 *)(iVar4 + 0x1875) = 1;
      *(undefined1 *)(param_1 + 0x49) = 1;
    }
    if ((*(int *)(param_1 + 0x3c) != 0) && (*(int *)(*DAT_00da9894 + 0x114) != 0)) {
      piVar1 = *(int **)(*DAT_00da9894 + 0x114);
      (**(code **)(*piVar1 + 4))(piVar1,"TradeTargetReadyEffect",&DAT_00c76068,1);
    }
    FUN_00406460(L"IDS_GUI_WAIT_ACCEPT");
    local_8 = 2;
    piVar1 = *(int **)(*(int *)(param_1 + 4) + 0x1a8);
    uVar3 = FUN_0081d120(local_2c);
    local_8._0_1_ = 3;
    (**(code **)(*piVar1 + 0x44))(uVar3,2);
    local_8 = CONCAT31(local_8._1_3_,2);
  }
  if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_8 = 0xffffffff;
  if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_28 = 0;
  local_18 = 0;
  local_14 = 7;
LAB_00955e31:
  local_8 = 0xffffffff;
  *(undefined4 *)(param_1 + 0x50) = 4;
  FUN_00955690();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00955c70 : PUSH EBP
00955c71 : MOV EBP,ESP
00955c73 : PUSH -0x1
00955c75 : PUSH 0xb20086
00955c7a : MOV EAX,FS:[0x0]
00955c80 : PUSH EAX
00955c81 : SUB ESP,0x38
00955c84 : PUSH EBX
00955c85 : PUSH ESI
00955c86 : PUSH EDI
00955c87 : MOV EAX,[0x00d66fa0]
00955c8c : XOR EAX,EBP
00955c8e : PUSH EAX
00955c8f : LEA EAX,[EBP + -0xc]
00955c92 : MOV FS:[0x0],EAX
00955c98 : MOV EAX,[0x0172491c]
00955c9d : MOV EAX,dword ptr [EAX + 0x17c]
00955ca3 : CMP dword ptr [EAX + 0x4],ECX
00955ca6 : JNZ 0x00955d3c
00955cac : MOV CL,byte ptr [EAX + 0x1874]
00955cb2 : TEST CL,CL
00955cb4 : JZ 0x00955e31
00955cba : MOV ECX,dword ptr [0x00da9894]
00955cc0 : MOV EBX,0x1
00955cc5 : MOV byte ptr [EAX + 0x1875],BL
00955ccb : MOV EAX,dword ptr [ECX]
00955ccd : CMP dword ptr [EAX + 0x114],0x0
00955cd4 : JZ 0x00955cf2
00955cd6 : MOV EAX,dword ptr [EAX + 0x114]
00955cdc : MOV EDX,dword ptr [EAX]
00955cde : PUSH EBX
00955cdf : PUSH 0xc75f48
00955ce4 : PUSH 0xc75f4c
00955ce9 : PUSH EAX
00955cea : MOV EAX,dword ptr [EDX + 0x4]
00955ced : CALL EAX
00955cef : ADD ESP,0x10
00955cf2 : PUSH 0xc765a4
00955cf7 : LEA ECX,[EBP + -0x28]
00955cfa : CALL 0x00406460
00955cff : MOV dword ptr [EBP + -0x4],0x0
00955d06 : MOV ECX,dword ptr [EBP + 0x8]
00955d09 : MOV EDX,dword ptr [ECX + 0x4]
00955d0c : MOV ECX,dword ptr [0x0172491c]
00955d12 : MOV ESI,dword ptr [EDX + 0x1a8]
00955d18 : LEA EAX,[EBP + -0x28]
00955d1b : PUSH EAX
00955d1c : LEA EDI,[EBP + -0x44]
00955d1f : CALL 0x0081d120
00955d24 : MOV byte ptr [EBP + -0x4],BL
00955d27 : MOV EDX,dword ptr [ESI]
00955d29 : PUSH 0x2
00955d2b : PUSH EAX
00955d2c : MOV EAX,dword ptr [EDX + 0x44]
00955d2f : MOV ECX,ESI
00955d31 : CALL EAX
00955d33 : MOV byte ptr [EBP + -0x4],0x0
00955d37 : JMP 0x00955dec
00955d3c : MOV EAX,dword ptr [EBP + 0x8]
00955d3f : CMP dword ptr [EAX + 0x4c],ECX
00955d42 : JNZ 0x00955e31
00955d48 : PUSH ECX
00955d49 : MOV ECX,dword ptr [0x00da93ec]
00955d4f : CALL 0x00a1a840
00955d54 : MOV EBX,0x1
00955d59 : TEST EAX,EAX
00955d5b : JZ 0x00955d74
00955d5d : CMP byte ptr [EAX + 0x1874],0x0
00955d64 : JZ 0x00955d74
00955d66 : MOV ESI,dword ptr [EBP + 0x8]
00955d69 : MOV byte ptr [EAX + 0x1875],BL
00955d6f : MOV byte ptr [ESI + 0x49],BL
00955d72 : JMP 0x00955d77
00955d74 : MOV ESI,dword ptr [EBP + 0x8]
00955d77 : CMP dword ptr [ESI + 0x3c],0x0
00955d7b : JZ 0x00955daa
00955d7d : MOV ECX,dword ptr [0x00da9894]
00955d83 : MOV EAX,dword ptr [ECX]
00955d85 : CMP dword ptr [EAX + 0x114],0x0
00955d8c : JZ 0x00955daa
00955d8e : MOV EAX,dword ptr [EAX + 0x114]
00955d94 : MOV EDX,dword ptr [EAX]
00955d96 : PUSH EBX
00955d97 : PUSH 0xc76068
00955d9c : PUSH 0xc7606c
00955da1 : PUSH EAX
00955da2 : MOV EAX,dword ptr [EDX + 0x4]
00955da5 : CALL EAX
00955da7 : ADD ESP,0x10
00955daa : PUSH 0xc765cc
00955daf : LEA ECX,[EBP + -0x28]
00955db2 : CALL 0x00406460
00955db7 : MOV EBX,0x2
00955dbc : MOV dword ptr [EBP + -0x4],EBX
00955dbf : MOV ECX,dword ptr [ESI + 0x4]
00955dc2 : MOV ESI,dword ptr [ECX + 0x1a8]
00955dc8 : MOV ECX,dword ptr [0x0172491c]
00955dce : LEA EDX,[EBP + -0x28]
00955dd1 : PUSH EDX
00955dd2 : LEA EDI,[EBP + -0x44]
00955dd5 : CALL 0x0081d120
00955dda : MOV byte ptr [EBP + -0x4],0x3
00955dde : MOV EDX,dword ptr [ESI]
00955de0 : PUSH EBX
00955de1 : PUSH EAX
00955de2 : MOV EAX,dword ptr [EDX + 0x44]
00955de5 : MOV ECX,ESI
00955de7 : CALL EAX
00955de9 : MOV byte ptr [EBP + -0x4],BL
00955dec : MOV ESI,0x8
00955df1 : CMP dword ptr [EBP + -0x2c],ESI
00955df4 : JC 0x00955dfe
00955df6 : MOV ECX,dword ptr [EBP + -0x40]
00955df9 : CALL 0x006f04e0
00955dfe : MOV EDI,0x7
00955e03 : XOR EBX,EBX
00955e05 : XOR ECX,ECX
00955e07 : MOV dword ptr [EBP + -0x2c],EDI
00955e0a : MOV dword ptr [EBP + -0x30],EBX
00955e0d : MOV word ptr [EBP + -0x40],CX
00955e11 : MOV dword ptr [EBP + -0x4],0xffffffff
00955e18 : CMP dword ptr [EBP + -0x10],ESI
00955e1b : JC 0x00955e25
00955e1d : MOV ECX,dword ptr [EBP + -0x24]
00955e20 : CALL 0x006f04e0
00955e25 : XOR EDX,EDX
00955e27 : MOV word ptr [EBP + -0x24],DX
00955e2b : MOV dword ptr [EBP + -0x14],EBX
00955e2e : MOV dword ptr [EBP + -0x10],EDI
00955e31 : MOV ESI,dword ptr [EBP + 0x8]
00955e34 : MOV dword ptr [ESI + 0x50],0x4
00955e3b : CALL 0x00955690
00955e40 : MOV ECX,dword ptr [EBP + -0xc]
00955e43 : MOV dword ptr FS:[0x0],ECX
00955e4a : POP ECX
00955e4b : POP EDI
00955e4c : POP ESI
00955e4d : POP EBX
00955e4e : MOV ESP,EBP
00955e50 : POP EBP
00955e51 : RET 0x4
