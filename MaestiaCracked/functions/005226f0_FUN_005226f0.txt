PROGRAM  : Maestia.exe
FUNCTION : FUN_005226f0
ENTRY    : 005226f0
BODY     : [[005226f0, 005227b8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005226f0(undefined4 param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int *in_ECX;
  uint uVar4;
  int *piVar5;
  int *local_8;
  uint local_4;
  
  FUN_00521f10();
  if (((int *)*param_2 == (int *)0x0) || (iVar2 = *(int *)*param_2, iVar2 == 0)) {
    return;
  }
  uVar3 = (uint)(iVar2 * 5) >> 2;
  uVar4 = 0;
  if ((uint *)*in_ECX != (uint *)0x0) {
    uVar4 = *(uint *)*in_ECX;
  }
  if (uVar4 < uVar3) {
    FUN_005221a0(param_1,uVar3);
  }
  FUN_0051f5f0(&local_8);
  do {
    do {
      if (local_8 == (int *)0x0) {
        return;
      }
      if (*local_8 == 0) {
        return;
      }
      iVar2 = *local_8;
      if (*(int *)(iVar2 + 4) < (int)local_4) {
        return;
      }
      iVar1 = iVar2 + 0x10 + local_4 * 0x24;
      uVar4 = *(uint *)(iVar1 + 4);
      if ((*(uint *)(iVar2 + 0x10 + local_4 * 0x24) & 0x20000) != 0) {
        uVar4 = uVar4 ^ (int)*(short *)(iVar1 + 8);
      }
      FUN_00522070(param_1,iVar1,uVar4);
      uVar4 = *(uint *)(*local_8 + 4);
    } while (((int)uVar4 < (int)local_4) || (local_4 = local_4 + 1, uVar4 < local_4));
    piVar5 = (int *)(*local_8 + 8 + local_4 * 0x24);
    do {
      if (*piVar5 != -2) break;
      local_4 = local_4 + 1;
      piVar5 = piVar5 + 9;
    } while (local_4 <= uVar4);
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
005226f0 : SUB ESP,0x8
005226f3 : PUSH EBX
005226f4 : PUSH ESI
005226f5 : MOV EBX,ECX
005226f7 : CALL 0x00521f10
005226fc : MOV ESI,dword ptr [ESP + 0x18]
00522700 : MOV EAX,dword ptr [ESI]
00522702 : TEST EAX,EAX
00522704 : JZ 0x005227b1
0052270a : MOV EAX,dword ptr [EAX]
0052270c : TEST EAX,EAX
0052270e : JZ 0x005227b1
00522714 : MOV ECX,dword ptr [EBX]
00522716 : LEA EAX,[EAX + EAX*0x4]
00522719 : SHR EAX,0x2
0052271c : TEST ECX,ECX
0052271e : JZ 0x00522722
00522720 : MOV ECX,dword ptr [ECX]
00522722 : PUSH EBP
00522723 : MOV EBP,dword ptr [ESP + 0x18]
00522727 : CMP EAX,ECX
00522729 : JBE 0x00522734
0052272b : PUSH EAX
0052272c : PUSH EBP
0052272d : MOV ECX,EBX
0052272f : CALL 0x005221a0
00522734 : PUSH EDI
00522735 : LEA EAX,[ESP + 0x10]
00522739 : PUSH EAX
0052273a : MOV ECX,ESI
0052273c : CALL 0x0051f5f0
00522741 : MOV EDI,dword ptr [ESP + 0x10]
00522745 : MOV ESI,dword ptr [ESP + 0x14]
00522749 : LEA ESP,[ESP]
00522750 : TEST EDI,EDI
00522752 : JZ 0x005227af
00522754 : CMP dword ptr [EDI],0x0
00522757 : JZ 0x005227af
00522759 : MOV EAX,dword ptr [EDI]
0052275b : CMP ESI,dword ptr [EAX + 0x4]
0052275e : JG 0x005227af
00522760 : LEA ECX,[ESI + ESI*0x8]
00522763 : TEST dword ptr [EAX + ECX*0x4 + 0x10],0x20000
0052276b : LEA EAX,[EAX + ECX*0x4 + 0x10]
0052276f : MOV ECX,dword ptr [EAX + 0x4]
00522772 : JZ 0x0052277a
00522774 : MOVSX EDX,word ptr [EAX + 0x8]
00522778 : XOR ECX,EDX
0052277a : PUSH ECX
0052277b : PUSH EAX
0052277c : PUSH EBP
0052277d : MOV ECX,EBX
0052277f : CALL 0x00522070
00522784 : MOV ECX,dword ptr [EDI]
00522786 : MOV EAX,dword ptr [ECX + 0x4]
00522789 : CMP ESI,EAX
0052278b : JG 0x00522750
0052278d : INC ESI
0052278e : CMP ESI,EAX
00522790 : JA 0x00522750
00522792 : LEA EDX,[ESI + ESI*0x8]
00522795 : LEA ECX,[ECX + EDX*0x4 + 0x8]
00522799 : LEA ESP,[ESP]
005227a0 : CMP dword ptr [ECX],-0x2
005227a3 : JNZ 0x00522750
005227a5 : INC ESI
005227a6 : ADD ECX,0x24
005227a9 : CMP ESI,EAX
005227ab : JBE 0x005227a0
005227ad : JMP 0x00522750
005227af : POP EDI
005227b0 : POP EBP
005227b1 : POP ESI
005227b2 : POP EBX
005227b3 : ADD ESP,0x8
005227b6 : RET 0x8
