PROGRAM  : Maestia.exe
FUNCTION : FUN_0070a070
ENTRY    : 0070a070
BODY     : [[0070a070, 0070a0f8] [0070a10e, 0070a161]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0070a070(void)

{
  uint uVar1;
  LPCRITICAL_SECTION local_28;
  char *local_24;
  undefined4 local_20;
  int local_1c;
  undefined4 local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b103a1;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  if (DAT_00da9b31 != '\0') {
    local_1c = 0;
    local_28 = (LPCRITICAL_SECTION)&DAT_00d722e4;
    local_24 = ".\\MoStreamUtil.cpp";
    local_20 = 0x78;
    local_18 = 1;
    FUN_006ef1a0(&local_28);
    local_8 = 0;
    local_14 = *DAT_017244e8;
    if ((int *)local_14 != DAT_017244e8) {
      if (*(uint *)(local_14 + 0x14) <= DAT_00da9b40) {
        DAT_00da9b40 = DAT_00da9b40 - *(uint *)(local_14 + 0x14);
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar1);
    }
    FUN_0042d7c0(DAT_017244e8[1]);
    DAT_017244e8[1] = (int)DAT_017244e8;
    DAT_017244ec = 0;
    *DAT_017244e8 = (int)DAT_017244e8;
    DAT_017244e8[2] = (int)DAT_017244e8;
    local_8 = 0xffffffff;
    if (local_1c != 0) {
      LeaveCriticalSection(local_28);
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
0070a070 : PUSH EBP
0070a071 : MOV EBP,ESP
0070a073 : PUSH -0x1
0070a075 : PUSH 0xb103a1
0070a07a : MOV EAX,FS:[0x0]
0070a080 : PUSH EAX
0070a081 : SUB ESP,0x18
0070a084 : PUSH EBX
0070a085 : MOV EAX,[0x00d66fa0]
0070a08a : XOR EAX,EBP
0070a08c : PUSH EAX
0070a08d : LEA EAX,[EBP + -0xc]
0070a090 : MOV FS:[0x0],EAX
0070a096 : XOR EBX,EBX
0070a098 : CMP byte ptr [0x00da9b31],BL
0070a09e : JZ 0x0070a152
0070a0a4 : LEA EAX,[EBP + -0x24]
0070a0a7 : PUSH EAX
0070a0a8 : MOV dword ptr [EBP + -0x18],EBX
0070a0ab : MOV dword ptr [EBP + -0x24],0xd722e4
0070a0b2 : MOV dword ptr [EBP + -0x20],0xbfcf2c
0070a0b9 : MOV dword ptr [EBP + -0x1c],0x78
0070a0c0 : MOV dword ptr [EBP + -0x14],0x1
0070a0c7 : CALL 0x006ef1a0
0070a0cc : MOV dword ptr [EBP + -0x4],EBX
0070a0cf : MOV ECX,dword ptr [0x017244e8]
0070a0d5 : MOV EAX,dword ptr [ECX]
0070a0d7 : MOV dword ptr [EBP + -0x10],EAX
0070a0da : CMP EAX,ECX
0070a0dc : JZ 0x0070a10e
0070a0de : MOV EDI,EDI
0070a0e0 : MOV ECX,dword ptr [EAX + 0x14]
0070a0e3 : CMP dword ptr [0x00da9b40],ECX
0070a0e9 : JC 0x0070a0f1
0070a0eb : SUB dword ptr [0x00da9b40],ECX
0070a0f1 : MOV ECX,dword ptr [EAX + 0x10]
0070a0f4 : CALL 0x006f04e0
0070a10e : MOV ECX,dword ptr [ECX + 0x4]
0070a111 : PUSH ECX
0070a112 : MOV ECX,0x17244e4
0070a117 : CALL 0x0042d7c0
0070a11c : MOV EAX,[0x017244e8]
0070a121 : MOV dword ptr [EAX + 0x4],EAX
0070a124 : MOV EAX,[0x017244e8]
0070a129 : MOV dword ptr [0x017244ec],EBX
0070a12f : MOV dword ptr [EAX],EAX
0070a131 : MOV EAX,[0x017244e8]
0070a136 : MOV dword ptr [EAX + 0x8],EAX
0070a139 : MOV dword ptr [EBP + -0x4],0xffffffff
0070a140 : CMP dword ptr [EBP + -0x18],EBX
0070a143 : JZ 0x0070a152
0070a145 : MOV EDX,dword ptr [EBP + -0x24]
0070a148 : PUSH EDX
0070a149 : CALL dword ptr [0x00b8511c]
0070a14f : MOV dword ptr [EBP + -0x18],EBX
0070a152 : MOV ECX,dword ptr [EBP + -0xc]
0070a155 : MOV dword ptr FS:[0x0],ECX
0070a15c : POP ECX
0070a15d : POP EBX
0070a15e : MOV ESP,EBP
0070a160 : POP EBP
0070a161 : RET
