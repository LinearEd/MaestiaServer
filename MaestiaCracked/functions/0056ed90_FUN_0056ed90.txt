PROGRAM  : Maestia.exe
FUNCTION : FUN_0056ed90
ENTRY    : 0056ed90
BODY     : [[0056ed90, 0056ee0d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0056ed90(void)

{
  uint uVar1;
  LONG LVar2;
  GRefCountImplCore *in_ECX;
  
  if (*(int *)(in_ECX + 0x24) != 0) {
    FUN_00524240();
  }
  uVar1 = *(uint *)(in_ECX + 0x20);
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  uVar1 = *(uint *)(in_ECX + 0x1c);
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  uVar1 = *(uint *)(in_ECX + 0x18);
  LVar2 = InterlockedExchangeAdd((LONG *)((uVar1 & 0xfffffffc) + 4),-1);
  if (LVar2 == 1) {
    FUN_00515cf0(uVar1 & 0xfffffffc);
  }
  if (*(GRefCountImpl **)(in_ECX + 0x10) != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(*(GRefCountImpl **)(in_ECX + 0x10));
  }
  *(undefined ***)in_ECX = &PTR_FUN_00b86dd8;
  GRefCountImplCore::~GRefCountImplCore(in_ECX);
  return;
}



============================================================
DISASSEMBLY
============================================================
0056ed90 : PUSH ESI
0056ed91 : MOV ESI,ECX
0056ed93 : MOV ECX,dword ptr [ESI + 0x24]
0056ed96 : TEST ECX,ECX
0056ed98 : JZ 0x0056ed9f
0056ed9a : CALL 0x00524240
0056ed9f : PUSH EBX
0056eda0 : MOV EBX,dword ptr [0x00b851cc]
0056eda6 : PUSH EDI
0056eda7 : MOV EDI,dword ptr [ESI + 0x20]
0056edaa : AND EDI,0xfffffffc
0056edad : PUSH -0x1
0056edaf : LEA EAX,[EDI + 0x4]
0056edb2 : PUSH EAX
0056edb3 : CALL EBX
0056edb5 : SUB EAX,0x1
0056edb8 : JNZ 0x0056edc0
0056edba : PUSH EDI
0056edbb : CALL 0x00515cf0
0056edc0 : MOV EDI,dword ptr [ESI + 0x1c]
0056edc3 : AND EDI,0xfffffffc
0056edc6 : PUSH -0x1
0056edc8 : LEA ECX,[EDI + 0x4]
0056edcb : PUSH ECX
0056edcc : CALL EBX
0056edce : SUB EAX,0x1
0056edd1 : JNZ 0x0056edd9
0056edd3 : PUSH EDI
0056edd4 : CALL 0x00515cf0
0056edd9 : MOV EDI,dword ptr [ESI + 0x18]
0056eddc : AND EDI,0xfffffffc
0056eddf : PUSH -0x1
0056ede1 : LEA EDX,[EDI + 0x4]
0056ede4 : PUSH EDX
0056ede5 : CALL EBX
0056ede7 : SUB EAX,0x1
0056edea : JNZ 0x0056edf2
0056edec : PUSH EDI
0056eded : CALL 0x00515cf0
0056edf2 : MOV ECX,dword ptr [ESI + 0x10]
0056edf5 : POP EDI
0056edf6 : POP EBX
0056edf7 : TEST ECX,ECX
0056edf9 : JZ 0x0056ee00
0056edfb : CALL 0x004ff7e0
0056ee00 : MOV dword ptr [ESI],0xb86dd8
0056ee06 : MOV ECX,ESI
0056ee08 : POP ESI
0056ee09 : JMP 0x004ff7b0
