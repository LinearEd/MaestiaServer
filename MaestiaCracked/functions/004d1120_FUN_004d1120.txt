PROGRAM  : Maestia.exe
FUNCTION : FUN_004d1120
ENTRY    : 004d1120
BODY     : [[004d1120, 004d1213]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_004d1120(int param_1)

{
  void *_Dst;
  int iVar1;
  rsize_t _DstSize;
  char cVar2;
  int in_EAX;
  uint uVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  
  if (in_EAX != param_1) {
    uVar5 = *(int *)(param_1 + 8) - *(int *)(param_1 + 4) >> 1;
    if (uVar5 == 0) {
      FUN_0041d190(in_EAX);
      return;
    }
    _Dst = *(void **)(in_EAX + 4);
    uVar3 = *(int *)(in_EAX + 8) - (int)_Dst >> 1;
    if (uVar5 <= uVar3) {
      iVar6 = *(int *)(param_1 + 8) - (int)*(void **)(param_1 + 4) >> 1;
      if (0 < iVar6) {
        _DstSize = iVar6 * 2;
        _memmove_s(_Dst,_DstSize,*(void **)(param_1 + 4),_DstSize);
      }
      *(int *)(in_EAX + 8) =
           *(int *)(in_EAX + 4) + (*(int *)(param_1 + 8) - *(int *)(param_1 + 4) >> 1) * 2;
      return;
    }
    if (_Dst == (void *)0x0) {
      uVar7 = 0;
    }
    else {
      uVar7 = *(int *)(in_EAX + 0xc) - (int)_Dst >> 1;
    }
    if (uVar5 <= uVar7) {
      iVar6 = *(int *)(param_1 + 4);
      FUN_004d4050();
      uVar4 = FUN_0041d020(iVar6 + uVar3 * 2);
      *(undefined4 *)(in_EAX + 8) = uVar4;
      return;
    }
    if (_Dst != (void *)0x0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar6 = *(int *)(param_1 + 8);
    iVar1 = *(int *)(param_1 + 4);
    *(undefined4 *)(in_EAX + 4) = 0;
    *(undefined4 *)(in_EAX + 8) = 0;
    *(undefined4 *)(in_EAX + 0xc) = 0;
    if ((iVar6 - iVar1 >> 1 != 0) && (cVar2 = FUN_004d17b0(), cVar2 != '\0')) {
      uVar4 = FUN_0041d020(*(undefined4 *)(param_1 + 4));
      *(undefined4 *)(in_EAX + 8) = uVar4;
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
004d1120 : PUSH EBP
004d1121 : MOV EBP,ESP
004d1123 : PUSH EBX
004d1124 : MOV EBX,dword ptr [EBP + 0x8]
004d1127 : PUSH ESI
004d1128 : MOV ESI,EAX
004d112a : PUSH EDI
004d112b : CMP ESI,EBX
004d112d : JZ 0x004d120d
004d1133 : MOV EDI,dword ptr [EBX + 0x8]
004d1136 : MOV EAX,dword ptr [EBX + 0x4]
004d1139 : MOV EDX,EDI
004d113b : SUB EDX,EAX
004d113d : SAR EDX,0x1
004d113f : JNZ 0x004d1150
004d1141 : PUSH ESI
004d1142 : CALL 0x0041d190
004d1147 : MOV EAX,ESI
004d1149 : POP EDI
004d114a : POP ESI
004d114b : POP EBX
004d114c : POP EBP
004d114d : RET 0x4
004d1150 : MOV ECX,dword ptr [ESI + 0x4]
004d1153 : MOV EAX,dword ptr [ESI + 0x8]
004d1156 : SUB EAX,ECX
004d1158 : SAR EAX,0x1
004d115a : CMP EDX,EAX
004d115c : JA 0x004d1192
004d115e : MOV EDX,dword ptr [EBX + 0x4]
004d1161 : SUB EDI,EDX
004d1163 : SAR EDI,0x1
004d1165 : TEST EDI,EDI
004d1167 : JLE 0x004d1178
004d1169 : LEA EAX,[EDI + EDI*0x1]
004d116c : PUSH EAX
004d116d : PUSH EDX
004d116e : PUSH EAX
004d116f : PUSH ECX
004d1170 : CALL 0x00634101
004d1175 : ADD ESP,0x10
004d1178 : MOV EAX,dword ptr [EBX + 0x8]
004d117b : SUB EAX,dword ptr [EBX + 0x4]
004d117e : MOV ECX,dword ptr [ESI + 0x4]
004d1181 : SAR EAX,0x1
004d1183 : LEA EDX,[ECX + EAX*0x2]
004d1186 : MOV dword ptr [ESI + 0x8],EDX
004d1189 : MOV EAX,ESI
004d118b : POP EDI
004d118c : POP ESI
004d118d : POP EBX
004d118e : POP EBP
004d118f : RET 0x4
004d1192 : TEST ECX,ECX
004d1194 : JNZ 0x004d119a
004d1196 : XOR EDI,EDI
004d1198 : JMP 0x004d11a1
004d119a : MOV EDI,dword ptr [ESI + 0xc]
004d119d : SUB EDI,ECX
004d119f : SAR EDI,0x1
004d11a1 : CMP EDX,EDI
004d11a3 : JA 0x004d11d0
004d11a5 : MOV EDI,dword ptr [EBX + 0x4]
004d11a8 : LEA EAX,[EDI + EAX*0x2]
004d11ab : MOV EDX,ECX
004d11ad : MOV dword ptr [EBP + 0x8],EAX
004d11b0 : CALL 0x004d4050
004d11b5 : MOV EAX,dword ptr [EBP + 0x8]
004d11b8 : MOV ECX,dword ptr [ESI + 0x8]
004d11bb : PUSH EAX
004d11bc : MOV EAX,dword ptr [EBX + 0x8]
004d11bf : CALL 0x0041d020
004d11c4 : MOV dword ptr [ESI + 0x8],EAX
004d11c7 : MOV EAX,ESI
004d11c9 : POP EDI
004d11ca : POP ESI
004d11cb : POP EBX
004d11cc : POP EBP
004d11cd : RET 0x4
004d11d0 : XOR EDI,EDI
004d11d2 : CMP ECX,EDI
004d11d4 : JZ 0x004d11db
004d11d6 : CALL 0x006f04e0
004d11db : MOV EAX,dword ptr [EBX + 0x8]
004d11de : SUB EAX,dword ptr [EBX + 0x4]
004d11e1 : MOV dword ptr [ESI + 0x4],EDI
004d11e4 : SAR EAX,0x1
004d11e6 : MOV dword ptr [ESI + 0x8],EDI
004d11e9 : MOV dword ptr [ESI + 0xc],EDI
004d11ec : JZ 0x004d120b
004d11ee : MOV EDI,EAX
004d11f0 : CALL 0x004d17b0
004d11f5 : TEST AL,AL
004d11f7 : JZ 0x004d120b
004d11f9 : MOV ECX,dword ptr [EBX + 0x4]
004d11fc : MOV EAX,dword ptr [EBX + 0x8]
004d11ff : PUSH ECX
004d1200 : MOV ECX,dword ptr [ESI + 0x4]
004d1203 : CALL 0x0041d020
004d1208 : MOV dword ptr [ESI + 0x8],EAX
004d120b : MOV EAX,ESI
004d120d : POP EDI
004d120e : POP ESI
004d120f : POP EBX
004d1210 : POP EBP
004d1211 : RET 0x4
