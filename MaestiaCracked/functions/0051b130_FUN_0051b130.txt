PROGRAM  : Maestia.exe
FUNCTION : FUN_0051b130
ENTRY    : 0051b130
BODY     : [[0051b130, 0051b19d]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0051b130(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = param_3;
  iVar1 = param_2;
  if (param_3 == -1) {
    param_3 = 0xffffffff;
    do {
      if (param_1 < 1) break;
      param_1 = param_1 + -1;
      iVar3 = FUN_0051aa70(&param_2);
    } while (iVar3 != 0);
    return param_2 - iVar1;
  }
  if (0 < param_3) {
    while (0 < param_1) {
      param_1 = param_1 + -1;
      iVar2 = FUN_0051aa70(&param_2);
      if ((iVar2 == 0) || (iVar3 <= param_2 - iVar1)) break;
    }
  }
  return param_2 - iVar1;
}



============================================================
DISASSEMBLY
============================================================
0051b130 : PUSH EBX
0051b131 : MOV EBX,dword ptr [ESP + 0xc]
0051b135 : PUSH ESI
0051b136 : MOV ESI,dword ptr [ESP + 0x14]
0051b13a : MOV EAX,EBX
0051b13c : MOV dword ptr [ESP + 0x10],EAX
0051b140 : CMP ESI,-0x1
0051b143 : JZ 0x0051b177
0051b145 : PUSH EDI
0051b146 : TEST ESI,ESI
0051b148 : JLE 0x0051b16f
0051b14a : MOV EDI,dword ptr [ESP + 0x10]
0051b14e : MOV EDI,EDI
0051b150 : TEST EDI,EDI
0051b152 : JLE 0x0051b16f
0051b154 : LEA EAX,[ESP + 0x14]
0051b158 : PUSH EAX
0051b159 : DEC EDI
0051b15a : CALL 0x0051aa70
0051b15f : TEST EAX,EAX
0051b161 : MOV EAX,dword ptr [ESP + 0x14]
0051b165 : JZ 0x0051b16f
0051b167 : MOV ECX,EAX
0051b169 : SUB ECX,EBX
0051b16b : CMP ECX,ESI
0051b16d : JL 0x0051b150
0051b16f : POP EDI
0051b170 : POP ESI
0051b171 : SUB EAX,EBX
0051b173 : POP EBX
0051b174 : RET 0xc
0051b177 : MOV ESI,dword ptr [ESP + 0xc]
0051b17b : TEST ESI,ESI
0051b17d : JLE 0x0051b197
0051b17f : NOP
0051b180 : LEA EDX,[ESP + 0x10]
0051b184 : PUSH EDX
0051b185 : DEC ESI
0051b186 : CALL 0x0051aa70
0051b18b : TEST EAX,EAX
0051b18d : JZ 0x0051b193
0051b18f : TEST ESI,ESI
0051b191 : JG 0x0051b180
0051b193 : MOV EAX,dword ptr [ESP + 0x10]
0051b197 : POP ESI
0051b198 : SUB EAX,EBX
0051b19a : POP EBX
0051b19b : RET 0xc
