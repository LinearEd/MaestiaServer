PROGRAM  : Maestia.exe
FUNCTION : FUN_0056b290
ENTRY    : 0056b290
BODY     : [[0056b290, 0056b3f1]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0056b290(int param_1,undefined4 param_2,undefined4 param_3,GRefCountImpl *param_4)

{
  int iVar1;
  int in_ECX;
  int iVar2;
  undefined4 uVar3;
  GRefCountImpl *local_c;
  int *local_8;
  undefined4 local_4;
  
  iVar2 = 0;
  uVar3 = 0;
  local_c = (GRefCountImpl *)0x0;
  if (param_4 == (GRefCountImpl *)0x0) {
    iVar1 = FUN_00515840(0x54,0);
    if (iVar1 == 0) {
      param_4 = (GRefCountImpl *)0x0;
      local_c = param_4;
    }
    else {
      if (*(int *)(in_ECX + 0x100) != 0) {
        iVar2 = *(int *)(in_ECX + 0x100) + 8;
      }
      param_4 = (GRefCountImpl *)
                FUN_005a19f0(*(undefined4 *)(*(int *)(in_ECX + 0x6c) + 0x14),iVar2,0);
      local_c = param_4;
    }
  }
  if (param_1 != 0) {
    FUN_00562db0(&local_8,param_3,0,0,0,0,0);
    uVar3 = *(undefined4 *)(in_ECX + 0x14);
    iVar2 = FUN_00515840(0x24,0);
    if ((iVar2 == 0) || (iVar2 = FUN_00567e60(&local_8,2,param_3,uVar3,0,0), iVar2 == 0)) {
      if (local_8 != (int *)0x0) {
        (**(code **)(*local_8 + 8))(local_4);
      }
      if (local_c != (GRefCountImpl *)0x0) {
        GRefCountImpl::Release(local_c);
      }
      return 0;
    }
    FUN_00567910(0,param_1,param_2);
    FUN_005a02e0(iVar2);
    iVar1 = FUN_00515840(0x20,0);
    if (iVar1 == 0) {
      uVar3 = 0;
    }
    else {
      uVar3 = FUN_00565630(iVar2,*(undefined4 *)(param_4 + 8),*(undefined4 *)(param_4 + 0x3c),0,
                           *(undefined4 *)(*(int *)(in_ECX + 0x100) + 0x14),uVar3,1,0);
    }
    FUN_00524240();
    if (local_8 != (int *)0x0) {
      (**(code **)(*local_8 + 8))(local_4);
    }
  }
  if (local_c != (GRefCountImpl *)0x0) {
    GRefCountImpl::Release(local_c);
  }
  return uVar3;
}



============================================================
DISASSEMBLY
============================================================
0056b290 : SUB ESP,0xc
0056b293 : PUSH EBX
0056b294 : MOV EBX,dword ptr [ESP + 0x20]
0056b298 : PUSH EBP
0056b299 : PUSH ESI
0056b29a : XOR ESI,ESI
0056b29c : PUSH EDI
0056b29d : XOR EDI,EDI
0056b29f : MOV EBP,ECX
0056b2a1 : MOV dword ptr [ESP + 0x10],ESI
0056b2a5 : CMP EBX,ESI
0056b2a7 : JNZ 0x0056b2e3
0056b2a9 : MOV ECX,dword ptr [0x00d73250]
0056b2af : PUSH ESI
0056b2b0 : PUSH 0x54
0056b2b2 : CALL 0x00515840
0056b2b7 : CMP EAX,ESI
0056b2b9 : JZ 0x0056b2db
0056b2bb : MOV EDX,dword ptr [EBP + 0x100]
0056b2c1 : CMP EDX,ESI
0056b2c3 : JZ 0x0056b2c8
0056b2c5 : LEA ESI,[EDX + 0x8]
0056b2c8 : MOV ECX,dword ptr [EBP + 0x6c]
0056b2cb : MOV EDX,dword ptr [ECX + 0x14]
0056b2ce : PUSH 0x0
0056b2d0 : PUSH ESI
0056b2d1 : PUSH EDX
0056b2d2 : MOV ECX,EAX
0056b2d4 : CALL 0x005a19f0
0056b2d9 : JMP 0x0056b2dd
0056b2db : XOR EAX,EAX
0056b2dd : MOV dword ptr [ESP + 0x10],EAX
0056b2e1 : MOV EBX,EAX
0056b2e3 : CMP dword ptr [ESP + 0x20],EDI
0056b2e7 : JZ 0x0056b3d9
0056b2ed : MOV ESI,dword ptr [ESP + 0x28]
0056b2f1 : PUSH 0x0
0056b2f3 : PUSH 0x0
0056b2f5 : PUSH 0x0
0056b2f7 : PUSH 0x0
0056b2f9 : PUSH 0x0
0056b2fb : LEA EDX,[ESP + 0x28]
0056b2ff : PUSH ESI
0056b300 : PUSH EDX
0056b301 : CALL 0x00562db0
0056b306 : MOV EDI,dword ptr [EBP + 0x14]
0056b309 : ADD ESP,0x1c
0056b30c : MOV ECX,EDI
0056b30e : TEST EDI,EDI
0056b310 : JNZ 0x0056b318
0056b312 : MOV ECX,dword ptr [0x00d73250]
0056b318 : PUSH 0x0
0056b31a : PUSH 0x24
0056b31c : CALL 0x00515840
0056b321 : TEST EAX,EAX
0056b323 : JZ 0x0056b33f
0056b325 : PUSH 0x0
0056b327 : PUSH 0x0
0056b329 : PUSH EDI
0056b32a : PUSH ESI
0056b32b : PUSH 0x2
0056b32d : LEA ECX,[ESP + 0x28]
0056b331 : PUSH ECX
0056b332 : MOV ECX,EAX
0056b334 : CALL 0x00567e60
0056b339 : MOV ESI,EAX
0056b33b : TEST ESI,ESI
0056b33d : JNZ 0x0056b36c
0056b33f : MOV ECX,dword ptr [ESP + 0x14]
0056b343 : TEST ECX,ECX
0056b345 : JZ 0x0056b353
0056b347 : MOV EDX,dword ptr [ECX]
0056b349 : MOV EAX,dword ptr [ESP + 0x18]
0056b34d : MOV EDX,dword ptr [EDX + 0x8]
0056b350 : PUSH EAX
0056b351 : CALL EDX
0056b353 : MOV ECX,dword ptr [ESP + 0x10]
0056b357 : TEST ECX,ECX
0056b359 : JZ 0x0056b360
0056b35b : CALL 0x004ff7e0
0056b360 : POP EDI
0056b361 : POP ESI
0056b362 : POP EBP
0056b363 : XOR EAX,EAX
0056b365 : POP EBX
0056b366 : ADD ESP,0xc
0056b369 : RET 0x10
0056b36c : MOV EAX,dword ptr [ESP + 0x24]
0056b370 : MOV ECX,dword ptr [ESP + 0x20]
0056b374 : PUSH EAX
0056b375 : PUSH ECX
0056b376 : MOV ECX,dword ptr [ESI + 0x20]
0056b379 : PUSH 0x0
0056b37b : CALL 0x00567910
0056b380 : PUSH ESI
0056b381 : MOV ECX,EBX
0056b383 : CALL 0x005a02e0
0056b388 : PUSH 0x0
0056b38a : PUSH 0x20
0056b38c : MOV ECX,EDI
0056b38e : CALL 0x00515840
0056b393 : TEST EAX,EAX
0056b395 : JZ 0x0056b3bc
0056b397 : MOV EDX,dword ptr [EBP + 0x100]
0056b39d : MOV ECX,dword ptr [EDX + 0x14]
0056b3a0 : MOV EDX,dword ptr [EBX + 0x3c]
0056b3a3 : MOV EBX,dword ptr [EBX + 0x8]
0056b3a6 : PUSH 0x0
0056b3a8 : PUSH 0x1
0056b3aa : PUSH EDI
0056b3ab : PUSH ECX
0056b3ac : PUSH 0x0
0056b3ae : PUSH EDX
0056b3af : PUSH EBX
0056b3b0 : PUSH ESI
0056b3b1 : MOV ECX,EAX
0056b3b3 : CALL 0x00565630
0056b3b8 : MOV EDI,EAX
0056b3ba : JMP 0x0056b3be
0056b3bc : XOR EDI,EDI
0056b3be : MOV ECX,ESI
0056b3c0 : CALL 0x00524240
0056b3c5 : MOV ECX,dword ptr [ESP + 0x14]
0056b3c9 : TEST ECX,ECX
0056b3cb : JZ 0x0056b3d9
0056b3cd : MOV EAX,dword ptr [ECX]
0056b3cf : MOV EDX,dword ptr [ESP + 0x18]
0056b3d3 : MOV EAX,dword ptr [EAX + 0x8]
0056b3d6 : PUSH EDX
0056b3d7 : CALL EAX
0056b3d9 : MOV ECX,dword ptr [ESP + 0x10]
0056b3dd : TEST ECX,ECX
0056b3df : JZ 0x0056b3e6
0056b3e1 : CALL 0x004ff7e0
0056b3e6 : MOV EAX,EDI
0056b3e8 : POP EDI
0056b3e9 : POP ESI
0056b3ea : POP EBP
0056b3eb : POP EBX
0056b3ec : ADD ESP,0xc
0056b3ef : RET 0x10
