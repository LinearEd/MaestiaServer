PROGRAM  : Maestia.exe
FUNCTION : FUN_00765f80
ENTRY    : 00765f80
BODY     : [[00765f80, 0076609c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00765f80(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  short *psVar3;
  short sVar4;
  uint local_18;
  short *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b18f51;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  sVar4 = 0;
  if (*(int *)(param_1 + 0x2c) != 0) {
    local_14 = (short *)0x0;
    iVar1 = (**(code **)(**(int **)(param_1 + 0x2c) + 0x2c))
                      (*(int **)(param_1 + 0x2c),0,0,&local_14,0,
                       DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
    if (-1 < iVar1) {
      iVar1 = 0x1000;
      psVar3 = local_14;
      do {
        *psVar3 = sVar4 + 3;
        psVar3[1] = sVar4;
        psVar3[2] = sVar4 + 1;
        psVar3[3] = sVar4 + 3;
        psVar3[4] = sVar4 + 1;
        iVar1 = iVar1 + -1;
        psVar3[5] = sVar4 + 2;
        psVar3 = psVar3 + 6;
        sVar4 = sVar4 + 4;
      } while (0 < iVar1);
      (**(code **)(**(int **)(param_1 + 0x2c) + 0x30))(*(int **)(param_1 + 0x2c));
      ExceptionList = local_10;
      return 1;
    }
    uVar2 = FUN_00404750(L"AvaFxParticleRender::ReadyParticleIndex() m_pIndexBuffer Lock Failed (%d)"
                         ,iVar1);
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                (L"AvaLib::AvaFxParticleRender::ReadyParticleIndex",0x107,uVar2);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  ExceptionList = local_10;
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00765f80 : PUSH EBP
00765f81 : MOV EBP,ESP
00765f83 : PUSH -0x1
00765f85 : PUSH 0xb18f51
00765f8a : MOV EAX,FS:[0x0]
00765f90 : PUSH EAX
00765f91 : SUB ESP,0x20
00765f94 : PUSH EBX
00765f95 : PUSH ESI
00765f96 : PUSH EDI
00765f97 : MOV EAX,[0x00d66fa0]
00765f9c : XOR EAX,EBP
00765f9e : PUSH EAX
00765f9f : LEA EAX,[EBP + -0xc]
00765fa2 : MOV FS:[0x0],EAX
00765fa8 : MOV EAX,dword ptr [EBP + 0x8]
00765fab : XOR EBX,EBX
00765fad : CMP dword ptr [EAX + 0x2c],EBX
00765fb0 : JZ 0x00766022
00765fb2 : MOV EAX,dword ptr [EAX + 0x2c]
00765fb5 : PUSH EBX
00765fb6 : LEA EDX,[EBP + -0x10]
00765fb9 : PUSH EDX
00765fba : PUSH EBX
00765fbb : MOV dword ptr [EBP + -0x10],EBX
00765fbe : MOV ECX,dword ptr [EAX]
00765fc0 : PUSH EBX
00765fc1 : PUSH EAX
00765fc2 : MOV EAX,dword ptr [ECX + 0x2c]
00765fc5 : CALL EAX
00765fc7 : CMP EAX,EBX
00765fc9 : JGE 0x00766038
00765fcb : PUSH EAX
00765fcc : PUSH 0xc0c8b8
00765fd1 : LEA ESI,[EBP + -0x2c]
00765fd4 : CALL 0x00404750
00765fd9 : ADD ESP,0x8
00765fdc : MOV dword ptr [EBP + -0x4],EBX
00765fdf : MOV ECX,dword ptr [0x00da98e8]
00765fe5 : MOV ECX,dword ptr [ECX]
00765fe7 : CMP ECX,EBX
00765fe9 : JZ 0x00765ffd
00765feb : MOV EDX,dword ptr [ECX]
00765fed : PUSH EAX
00765fee : MOV EAX,dword ptr [EDX + 0x14]
00765ff1 : PUSH 0x107
00765ff6 : PUSH 0xc0c970
00765ffb : CALL EAX
00765ffd : MOV dword ptr [EBP + -0x4],0xffffffff
00766004 : CMP dword ptr [EBP + -0x14],0x8
00766008 : JC 0x00766012
0076600a : MOV ECX,dword ptr [EBP + -0x28]
0076600d : CALL 0x006f04e0
00766012 : XOR ECX,ECX
00766014 : MOV dword ptr [EBP + -0x14],0x7
0076601b : MOV dword ptr [EBP + -0x18],EBX
0076601e : MOV word ptr [EBP + -0x28],CX
00766022 : XOR AL,AL
00766024 : MOV ECX,dword ptr [EBP + -0xc]
00766027 : MOV dword ptr FS:[0x0],ECX
0076602e : POP ECX
0076602f : POP EDI
00766030 : POP ESI
00766031 : POP EBX
00766032 : MOV ESP,EBP
00766034 : POP EBP
00766035 : RET 0x4
00766038 : MOV EAX,dword ptr [EBP + -0x10]
0076603b : MOV EDI,0x1000
00766040 : MOVZX ECX,BX
00766043 : ADD EAX,0x2
00766046 : LEA EDX,[ECX + 0x3]
00766049 : MOV word ptr [EAX + -0x2],DX
0076604d : MOV word ptr [EAX],CX
00766050 : ADD EAX,0x2
00766053 : LEA ESI,[ECX + 0x1]
00766056 : MOV word ptr [EAX],SI
00766059 : ADD EAX,0x2
0076605c : MOV word ptr [EAX],DX
0076605f : ADD EAX,0x2
00766062 : MOV word ptr [EAX],SI
00766065 : ADD EAX,0x2
00766068 : ADD ECX,0x2
0076606b : DEC EDI
0076606c : MOV word ptr [EAX],CX
0076606f : ADD EAX,0x2
00766072 : ADD EBX,0x4
00766075 : TEST EDI,EDI
00766077 : JG 0x00766040
00766079 : MOV EDX,dword ptr [EBP + 0x8]
0076607c : MOV EAX,dword ptr [EDX + 0x2c]
0076607f : MOV ECX,dword ptr [EAX]
00766081 : MOV EDX,dword ptr [ECX + 0x30]
00766084 : PUSH EAX
00766085 : CALL EDX
00766087 : MOV AL,0x1
00766089 : MOV ECX,dword ptr [EBP + -0xc]
0076608c : MOV dword ptr FS:[0x0],ECX
00766093 : POP ECX
00766094 : POP EDI
00766095 : POP ESI
00766096 : POP EBX
00766097 : MOV ESP,EBP
00766099 : POP EBP
0076609a : RET 0x4
