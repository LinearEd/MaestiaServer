PROGRAM  : Maestia.exe
FUNCTION : FUN_00686770
ENTRY    : 00686770
BODY     : [[00686770, 006867fe]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00686770(int param_1,int param_2)

{
  int iVar1;
  undefined4 uVar2;
  short *psVar3;
  
  iVar1 = *(int *)(param_1 + 0x58);
  psVar3 = (short *)(param_2 * 0x10 + *(int *)(param_1 + 0x20));
  *(short *)(iVar1 + 0xc) = (short)(*(int *)(psVar3 + 4) + 0x20 >> 6);
  *(short *)(iVar1 + 0xe) = (short)(*(int *)(psVar3 + 6) + 0x20 >> 6);
  if ((*(byte *)(param_1 + 8) & 1) != 0) {
    uVar2 = FUN_00685f30(*(undefined4 *)(psVar3 + 4),*(undefined2 *)(param_1 + 0x44));
    *(undefined4 *)(iVar1 + 0x10) = uVar2;
    uVar2 = FUN_00685f30(*(undefined4 *)(psVar3 + 6),*(undefined2 *)(param_1 + 0x44));
    *(undefined4 *)(iVar1 + 0x14) = uVar2;
    FUN_00686710();
    return;
  }
  *(undefined4 *)(iVar1 + 0x10) = 0x400000;
  *(undefined4 *)(iVar1 + 0x14) = 0x400000;
  *(undefined4 *)(iVar1 + 0x18) = *(undefined4 *)(psVar3 + 6);
  *(undefined4 *)(iVar1 + 0x1c) = 0;
  *(int *)(iVar1 + 0x20) = (int)*psVar3 << 6;
  *(undefined4 *)(iVar1 + 0x24) = *(undefined4 *)(psVar3 + 4);
  return;
}



============================================================
DISASSEMBLY
============================================================
00686770 : PUSH EBX
00686771 : MOV EBX,dword ptr [ESP + 0xc]
00686775 : PUSH ESI
00686776 : PUSH EDI
00686777 : MOV EDI,dword ptr [ESP + 0x10]
0068677b : MOV ESI,dword ptr [EDI + 0x58]
0068677e : SHL EBX,0x4
00686781 : ADD EBX,dword ptr [EDI + 0x20]
00686784 : ADD ESI,0xc
00686787 : MOV EAX,dword ptr [EBX + 0x8]
0068678a : ADD EAX,0x20
0068678d : SAR EAX,0x6
00686790 : MOV word ptr [ESI],AX
00686793 : MOV ECX,dword ptr [EBX + 0xc]
00686796 : ADD ECX,0x20
00686799 : SAR ECX,0x6
0068679c : MOV word ptr [ESI + 0x2],CX
006867a0 : TEST byte ptr [EDI + 0x8],0x1
006867a4 : JZ 0x006867d4
006867a6 : MOVZX EDX,word ptr [EDI + 0x44]
006867aa : MOV EAX,dword ptr [EBX + 0x8]
006867ad : PUSH EDX
006867ae : PUSH EAX
006867af : CALL 0x00685f30
006867b4 : MOV dword ptr [ESI + 0x4],EAX
006867b7 : MOVZX ECX,word ptr [EDI + 0x44]
006867bb : MOV EDX,dword ptr [EBX + 0xc]
006867be : PUSH ECX
006867bf : PUSH EDX
006867c0 : CALL 0x00685f30
006867c5 : ADD ESP,0x10
006867c8 : MOV dword ptr [ESI + 0x8],EAX
006867cb : CALL 0x00686710
006867d0 : POP EDI
006867d1 : POP ESI
006867d2 : POP EBX
006867d3 : RET
006867d4 : MOV EAX,0x400000
006867d9 : MOV dword ptr [ESI + 0x4],EAX
006867dc : MOV dword ptr [ESI + 0x8],EAX
006867df : MOV EAX,dword ptr [EBX + 0xc]
006867e2 : MOV dword ptr [ESI + 0xc],EAX
006867e5 : MOV dword ptr [ESI + 0x10],0x0
006867ec : MOVSX ECX,word ptr [EBX]
006867ef : SHL ECX,0x6
006867f2 : MOV dword ptr [ESI + 0x14],ECX
006867f5 : MOV EDX,dword ptr [EBX + 0x8]
006867f8 : POP EDI
006867f9 : MOV dword ptr [ESI + 0x18],EDX
006867fc : POP ESI
006867fd : POP EBX
006867fe : RET
