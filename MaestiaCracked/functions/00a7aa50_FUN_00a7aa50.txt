PROGRAM  : Maestia.exe
FUNCTION : FUN_00a7aa50
ENTRY    : 00a7aa50
BODY     : [[00a7aa50, 00a7ab91]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a7aa50(void)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  int *in_ECX;
  undefined1 local_2c [28];
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4c78a;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar3 = (**(code **)(*in_ECX + 0x98))();
  if ((iVar3 != 0) && (piVar1 = *(int **)(iVar3 + 8), piVar1 != (int *)0x0)) {
    iVar3 = piVar1[9];
    cVar2 = (**(code **)(*piVar1 + 0x7c))();
    if (cVar2 != '\0') {
      if (iVar3 == 0) goto LAB_00a7ab05;
      if (*(char *)(iVar3 + 0xb1) != '\0') {
        (**(code **)(*piVar1 + 0xb4))();
        ExceptionList = local_10;
        return;
      }
    }
    if (iVar3 != 0) {
      if (*(char *)(iVar3 + 0x28) != '\0') {
        FUN_009eddb0(iVar3);
        *(undefined1 *)(iVar3 + 0x28) = 0;
      }
      if (*(int *)(iVar3 + 0x30) == 0) {
        if (DAT_00da93ec == 0) {
          ExceptionList = local_10;
          return;
        }
        FUN_00a1dad0();
        ExceptionList = local_10;
        return;
      }
    }
  }
LAB_00a7ab05:
  if (((DAT_0172491c != 0) && (*DAT_00da9894 != 0)) && (*(int *)(*DAT_00da9894 + 0x1a8) != 0)) {
    FUN_00406460(L"IDS_CLTNET_ERR_CANTSKILL");
    local_8 = 0;
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar4 = FUN_0081d120(local_2c);
    local_8._0_1_ = 1;
    (**(code **)(*piVar1 + 0x44))(uVar4,3);
    local_8 = (uint)local_8._1_3_ << 8;
    FUN_00406560();
    local_8 = 0xffffffff;
    FUN_00406560();
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a7aa50 : PUSH EBP
00a7aa51 : MOV EBP,ESP
00a7aa53 : PUSH -0x1
00a7aa55 : PUSH 0xb4c78a
00a7aa5a : MOV EAX,FS:[0x0]
00a7aa60 : PUSH EAX
00a7aa61 : SUB ESP,0x38
00a7aa64 : PUSH ESI
00a7aa65 : PUSH EDI
00a7aa66 : MOV EAX,[0x00d66fa0]
00a7aa6b : XOR EAX,EBP
00a7aa6d : PUSH EAX
00a7aa6e : LEA EAX,[EBP + -0xc]
00a7aa71 : MOV FS:[0x0],EAX
00a7aa77 : MOV EAX,dword ptr [ECX]
00a7aa79 : MOV EAX,dword ptr [EAX + 0x98]
00a7aa7f : PUSH EDX
00a7aa80 : CALL EAX
00a7aa82 : TEST EAX,EAX
00a7aa84 : JZ 0x00a7ab05
00a7aa86 : MOV EDI,dword ptr [EAX + 0x8]
00a7aa89 : TEST EDI,EDI
00a7aa8b : JZ 0x00a7ab05
00a7aa8d : MOV EDX,dword ptr [EDI]
00a7aa8f : MOV EAX,dword ptr [EDX + 0x7c]
00a7aa92 : MOV ESI,dword ptr [EDI + 0x24]
00a7aa95 : MOV ECX,EDI
00a7aa97 : CALL EAX
00a7aa99 : TEST AL,AL
00a7aa9b : JZ 0x00a7aac7
00a7aa9d : TEST ESI,ESI
00a7aa9f : JZ 0x00a7ab05
00a7aaa1 : CMP byte ptr [ESI + 0xb1],0x0
00a7aaa8 : JZ 0x00a7aac7
00a7aaaa : MOV EDX,dword ptr [EDI]
00a7aaac : MOV EAX,dword ptr [EDX + 0xb4]
00a7aab2 : MOV ECX,EDI
00a7aab4 : CALL EAX
00a7aab6 : MOV ECX,dword ptr [EBP + -0xc]
00a7aab9 : MOV dword ptr FS:[0x0],ECX
00a7aac0 : POP ECX
00a7aac1 : POP EDI
00a7aac2 : POP ESI
00a7aac3 : MOV ESP,EBP
00a7aac5 : POP EBP
00a7aac6 : RET
00a7aac7 : TEST ESI,ESI
00a7aac9 : JZ 0x00a7ab05
00a7aacb : CMP byte ptr [ESI + 0x28],0x0
00a7aacf : JZ 0x00a7aadb
00a7aad1 : PUSH ESI
00a7aad2 : CALL 0x009eddb0
00a7aad7 : MOV byte ptr [ESI + 0x28],0x0
00a7aadb : CMP dword ptr [ESI + 0x30],0x0
00a7aadf : JNZ 0x00a7ab05
00a7aae1 : MOV ESI,dword ptr [0x00da93ec]
00a7aae7 : TEST ESI,ESI
00a7aae9 : JZ 0x00a7ab81
00a7aaef : CALL 0x00a1dad0
00a7aaf4 : MOV ECX,dword ptr [EBP + -0xc]
00a7aaf7 : MOV dword ptr FS:[0x0],ECX
00a7aafe : POP ECX
00a7aaff : POP EDI
00a7ab00 : POP ESI
00a7ab01 : MOV ESP,EBP
00a7ab03 : POP EBP
00a7ab04 : RET
00a7ab05 : CMP dword ptr [0x0172491c],0x0
00a7ab0c : JZ 0x00a7ab81
00a7ab0e : MOV ECX,dword ptr [0x00da9894]
00a7ab14 : MOV EAX,dword ptr [ECX]
00a7ab16 : TEST EAX,EAX
00a7ab18 : JZ 0x00a7ab81
00a7ab1a : CMP dword ptr [EAX + 0x1a8],0x0
00a7ab21 : JZ 0x00a7ab81
00a7ab23 : PUSH 0xc50f6c
00a7ab28 : LEA ECX,[EBP + -0x28]
00a7ab2b : CALL 0x00406460
00a7ab30 : MOV dword ptr [EBP + -0x4],0x0
00a7ab37 : MOV EDX,dword ptr [0x00da9894]
00a7ab3d : MOV EAX,dword ptr [EDX]
00a7ab3f : MOV ESI,dword ptr [EAX + 0x1a8]
00a7ab45 : MOV ECX,dword ptr [0x0172491c]
00a7ab4b : LEA EAX,[EBP + -0x28]
00a7ab4e : PUSH EAX
00a7ab4f : LEA EDI,[EBP + -0x44]
00a7ab52 : CALL 0x0081d120
00a7ab57 : MOV byte ptr [EBP + -0x4],0x1
00a7ab5b : MOV EDX,dword ptr [ESI]
00a7ab5d : PUSH 0x3
00a7ab5f : PUSH EAX
00a7ab60 : MOV EAX,dword ptr [EDX + 0x44]
00a7ab63 : MOV ECX,ESI
00a7ab65 : CALL EAX
00a7ab67 : MOV byte ptr [EBP + -0x4],0x0
00a7ab6b : MOV ECX,EDI
00a7ab6d : CALL 0x00406560
00a7ab72 : MOV dword ptr [EBP + -0x4],0xffffffff
00a7ab79 : LEA ECX,[EBP + -0x28]
00a7ab7c : CALL 0x00406560
00a7ab81 : MOV ECX,dword ptr [EBP + -0xc]
00a7ab84 : MOV dword ptr FS:[0x0],ECX
00a7ab8b : POP ECX
00a7ab8c : POP EDI
00a7ab8d : POP ESI
00a7ab8e : MOV ESP,EBP
00a7ab90 : POP EBP
00a7ab91 : RET
