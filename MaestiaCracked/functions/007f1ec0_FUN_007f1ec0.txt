PROGRAM  : Maestia.exe
FUNCTION : FUN_007f1ec0
ENTRY    : 007f1ec0
BODY     : [[007f1ec0, 007f2069]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007f1ec0(void)

{
  uint uVar1;
  float fVar2;
  DWORD DVar3;
  uint uVar4;
  int unaff_ESI;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  if (*(char *)(unaff_ESI + 0x1e9) != '\0') {
    DVar3 = GetTickCount();
    uVar4 = DVar3 - *(int *)(unaff_ESI + 0x1e4);
    uVar1 = *(uint *)(unaff_ESI + 0x1e0);
    if (uVar4 < uVar1) {
      fVar2 = (float)(int)uVar1;
      if ((int)uVar1 < 0) {
        fVar2 = fVar2 + 4.2949673e+09;
      }
      if (fVar2 != 0.0) {
        local_8 = (float)(int)uVar4;
        if ((int)uVar4 < 0) {
          local_8 = local_8 + 4.2949673e+09;
        }
        local_8 = local_8 / fVar2;
        local_14 = (*(float *)(unaff_ESI + 0x1b0) - *(float *)(unaff_ESI + 0x1c8)) * local_8 +
                   *(float *)(unaff_ESI + 0x1c8);
        local_10 = (*(float *)(unaff_ESI + 0x1b4) - *(float *)(unaff_ESI + 0x1cc)) * local_8 +
                   *(float *)(unaff_ESI + 0x1cc);
        local_c = (*(float *)(unaff_ESI + 0x1b8) - *(float *)(unaff_ESI + 0x1d0)) * local_8 +
                  *(float *)(unaff_ESI + 0x1d0);
        local_20 = (*(float *)(unaff_ESI + 0x1bc) - *(float *)(unaff_ESI + 0x1d4)) * local_8 +
                   *(float *)(unaff_ESI + 0x1d4);
        local_1c = (*(float *)(unaff_ESI + 0x1c0) - *(float *)(unaff_ESI + 0x1d8)) * local_8 +
                   *(float *)(unaff_ESI + 0x1d8);
        local_18 = (*(float *)(unaff_ESI + 0x1c4) - *(float *)(unaff_ESI + 0x1dc)) * local_8 +
                   *(float *)(unaff_ESI + 0x1dc);
        D3DXMatrixLookAtLH(unaff_ESI + 0xb4,&local_14,&local_20,unaff_ESI + 0x20);
        *(float *)(unaff_ESI + 0x24c) = local_14;
        *(float *)(unaff_ESI + 0x250) = local_10;
        *(float *)(unaff_ESI + 0x254) = local_c;
        *(float *)(unaff_ESI + 600) = local_20;
        *(float *)(unaff_ESI + 0x25c) = local_1c;
        *(float *)(unaff_ESI + 0x260) = local_18;
        return;
      }
    }
    *(undefined1 *)(unaff_ESI + 0x1e9) = 0;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
007f1ec0 : PUSH EBP
007f1ec1 : MOV EBP,ESP
007f1ec3 : SUB ESP,0x1c
007f1ec6 : CMP byte ptr [ESI + 0x1e9],0x0
007f1ecd : JZ 0x007f2066
007f1ed3 : CALL dword ptr [0x00b850d8]
007f1ed9 : MOV ECX,EAX
007f1edb : SUB ECX,dword ptr [ESI + 0x1e4]
007f1ee1 : MOV EAX,dword ptr [ESI + 0x1e0]
007f1ee7 : CMP ECX,EAX
007f1ee9 : JNC 0x007f205f
007f1eef : MOV dword ptr [EBP + -0x4],EAX
007f1ef2 : FILD dword ptr [EBP + -0x4]
007f1ef5 : TEST EAX,EAX
007f1ef7 : JGE 0x007f1eff
007f1ef9 : FADD float ptr [0x00cdf0e0]
007f1eff : FLD ST0
007f1f01 : FLDZ
007f1f03 : FXCH
007f1f05 : FUCOMIP ST0,ST1
007f1f07 : FSTP ST0
007f1f09 : LAHF
007f1f0a : TEST AH,0x44
007f1f0d : JNP 0x007f205d
007f1f13 : MOV dword ptr [EBP + -0x4],ECX
007f1f16 : FILD dword ptr [EBP + -0x4]
007f1f19 : TEST ECX,ECX
007f1f1b : JGE 0x007f1f23
007f1f1d : FADD float ptr [0x00cdf0e0]
007f1f23 : FDIVRP
007f1f25 : MOVSS XMM1,dword ptr [ESI + 0x1c8]
007f1f2d : MOVSS XMM2,dword ptr [ESI + 0x1b0]
007f1f35 : SUBSS XMM2,XMM1
007f1f39 : LEA EAX,[ESI + 0x20]
007f1f3c : PUSH EAX
007f1f3d : LEA ECX,[EBP + -0x1c]
007f1f40 : PUSH ECX
007f1f41 : LEA EDX,[EBP + -0x10]
007f1f44 : PUSH EDX
007f1f45 : LEA EAX,[ESI + 0xb4]
007f1f4b : PUSH EAX
007f1f4c : FSTP float ptr [EBP + -0x4]
007f1f4f : MOVSS XMM0,dword ptr [EBP + -0x4]
007f1f54 : MULSS XMM2,XMM0
007f1f58 : ADDSS XMM2,XMM1
007f1f5c : MOVSS XMM1,dword ptr [ESI + 0x1cc]
007f1f64 : MOVSS dword ptr [EBP + -0x10],XMM2
007f1f69 : MOVSS XMM2,dword ptr [ESI + 0x1b4]
007f1f71 : SUBSS XMM2,XMM1
007f1f75 : MULSS XMM2,XMM0
007f1f79 : ADDSS XMM2,XMM1
007f1f7d : MOVSS XMM1,dword ptr [ESI + 0x1d0]
007f1f85 : MOVSS dword ptr [EBP + -0xc],XMM2
007f1f8a : MOVSS XMM2,dword ptr [ESI + 0x1b8]
007f1f92 : SUBSS XMM2,XMM1
007f1f96 : MULSS XMM2,XMM0
007f1f9a : ADDSS XMM2,XMM1
007f1f9e : MOVSS XMM1,dword ptr [ESI + 0x1d4]
007f1fa6 : MOVSS dword ptr [EBP + -0x8],XMM2
007f1fab : MOVSS XMM2,dword ptr [ESI + 0x1bc]
007f1fb3 : SUBSS XMM2,XMM1
007f1fb7 : MULSS XMM2,XMM0
007f1fbb : ADDSS XMM2,XMM1
007f1fbf : MOVSS XMM1,dword ptr [ESI + 0x1d8]
007f1fc7 : MOVSS dword ptr [EBP + -0x1c],XMM2
007f1fcc : MOVSS XMM2,dword ptr [ESI + 0x1c0]
007f1fd4 : SUBSS XMM2,XMM1
007f1fd8 : MULSS XMM2,XMM0
007f1fdc : ADDSS XMM2,XMM1
007f1fe0 : MOVSS XMM1,dword ptr [ESI + 0x1dc]
007f1fe8 : MOVSS dword ptr [EBP + -0x18],XMM2
007f1fed : MOVSS XMM2,dword ptr [ESI + 0x1c4]
007f1ff5 : SUBSS XMM2,XMM1
007f1ff9 : MULSS XMM2,XMM0
007f1ffd : ADDSS XMM2,XMM1
007f2001 : MOVSS dword ptr [EBP + -0x14],XMM2
007f2006 : CALL 0x00664c78
007f200b : MOVSS XMM0,dword ptr [EBP + -0x10]
007f2010 : MOVSS dword ptr [ESI + 0x24c],XMM0
007f2018 : MOVSS XMM0,dword ptr [EBP + -0xc]
007f201d : MOVSS dword ptr [ESI + 0x250],XMM0
007f2025 : MOVSS XMM0,dword ptr [EBP + -0x8]
007f202a : MOVSS dword ptr [ESI + 0x254],XMM0
007f2032 : MOVSS XMM0,dword ptr [EBP + -0x1c]
007f2037 : MOVSS dword ptr [ESI + 0x258],XMM0
007f203f : MOVSS XMM0,dword ptr [EBP + -0x18]
007f2044 : MOVSS dword ptr [ESI + 0x25c],XMM0
007f204c : MOVSS XMM0,dword ptr [EBP + -0x14]
007f2051 : MOVSS dword ptr [ESI + 0x260],XMM0
007f2059 : MOV ESP,EBP
007f205b : POP EBP
007f205c : RET
007f205d : FSTP ST0
007f205f : MOV byte ptr [ESI + 0x1e9],0x0
007f2066 : MOV ESP,EBP
007f2068 : POP EBP
007f2069 : RET
