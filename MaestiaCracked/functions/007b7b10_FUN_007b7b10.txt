PROGRAM  : Maestia.exe
FUNCTION : FUN_007b7b10
ENTRY    : 007b7b10
BODY     : [[007b7b10, 007b7cb0]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_007b7b10(void)

{
  uint uVar1;
  int *piVar2;
  int in_ECX;
  int iVar3;
  int iVar4;
  undefined1 local_6c [24];
  undefined1 local_54 [56];
  int local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4d493;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*(char *)(in_ECX + 0xaab0) != '\0') {
    if (*(int *)(in_ECX + 0xc) == 0) {
      *(undefined1 *)(in_ECX + 0xa9ba) = 1;
      if ((*(char *)(in_ECX + 0xae0c) == '\0') && (*(char *)(in_ECX + 0x9960) == '\0')) {
        *(undefined1 *)(in_ECX + 0xa9ba) = 0;
        return;
      }
    }
    else {
      ExceptionList = &local_10;
      (((LARGE_INTEGER *)(in_ECX + 0xa9e8))->s).LowPart = 0;
      *(undefined4 *)(in_ECX + 0xa9ec) = 0;
      QueryPerformanceCounter((LARGE_INTEGER *)(in_ECX + 0xa9e8));
      if (*(char *)(in_ECX + 0xae0c) == '\0') {
        *(undefined4 *)(in_ECX + 0xc00) = 0x28;
      }
      else {
        *(undefined4 *)(in_ECX + 0xc00) = 400;
      }
      FUN_006e9ac0(uVar1);
      if (*(char *)(in_ECX + 0xae0c) == '\0') {
        FUN_006e9a70();
      }
      FUN_0046d2d0(local_6c);
      local_8 = 0;
      FUN_006ea850(in_ECX,local_6c);
      local_1c = *(int *)(in_ECX + 0xc);
      local_14 = 1;
      local_18 = 0;
      if (0 < local_1c) {
        do {
          piVar2 = (int *)FUN_004655f0(local_54);
          iVar4 = 1;
          if (*piVar2 != 0) {
            if (piVar2[1] == 0) {
              iVar3 = 0;
            }
            else {
              iVar3 = *(int *)(piVar2[1] + 4) + *piVar2;
            }
            if (0 < *(int *)(iVar3 + 4)) {
              iVar4 = *(int *)(iVar3 + 4);
            }
          }
          if (local_14 <= iVar4) {
            local_14 = iVar4;
          }
          local_18 = local_18 + 1;
        } while (local_18 < local_1c);
      }
      (**(code **)(*(int *)(in_ECX + 0x9c38) + 4))
                (in_ECX + 4,*(undefined4 *)(in_ECX + 0xc),*(undefined4 *)(in_ECX + 0xc00),local_14,0
                );
      FUN_00808100(0x40000);
      if (*(char *)(in_ECX + 0xae0c) == '\0') {
        FUN_006eafb0();
      }
      *(undefined1 *)(in_ECX + 0xa9ba) = 1;
      local_8 = 0xffffffff;
      FUN_0046d230();
    }
  }
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
007b7b10 : PUSH EBP
007b7b11 : MOV EBP,ESP
007b7b13 : PUSH -0x1
007b7b15 : PUSH 0xb4d493
007b7b1a : MOV EAX,FS:[0x0]
007b7b20 : PUSH EAX
007b7b21 : SUB ESP,0x5c
007b7b24 : PUSH EBX
007b7b25 : PUSH ESI
007b7b26 : PUSH EDI
007b7b27 : MOV EAX,[0x00d66fa0]
007b7b2c : XOR EAX,EBP
007b7b2e : PUSH EAX
007b7b2f : LEA EAX,[EBP + -0xc]
007b7b32 : MOV FS:[0x0],EAX
007b7b38 : MOV ESI,ECX
007b7b3a : CMP byte ptr [ESI + 0xaab0],0x0
007b7b41 : JZ 0x007b7c9f
007b7b47 : XOR EDI,EDI
007b7b49 : CMP dword ptr [ESI + 0xc],EDI
007b7b4c : JNZ 0x007b7b88
007b7b4e : CMP byte ptr [ESI + 0xae0c],0x0
007b7b55 : MOV byte ptr [ESI + 0xa9ba],0x1
007b7b5c : JNZ 0x007b7c9f
007b7b62 : CMP byte ptr [ESI + 0x9960],0x0
007b7b69 : JNZ 0x007b7c9f
007b7b6f : MOV byte ptr [ESI + 0xa9ba],0x0
007b7b76 : MOV ECX,dword ptr [EBP + -0xc]
007b7b79 : MOV dword ptr FS:[0x0],ECX
007b7b80 : POP ECX
007b7b81 : POP EDI
007b7b82 : POP ESI
007b7b83 : POP EBX
007b7b84 : MOV ESP,EBP
007b7b86 : POP EBP
007b7b87 : RET
007b7b88 : LEA EAX,[ESI + 0xa9e8]
007b7b8e : PUSH EAX
007b7b8f : MOV dword ptr [EAX],EDI
007b7b91 : MOV dword ptr [EAX + 0x4],EDI
007b7b94 : CALL dword ptr [0x00b85258]
007b7b9a : CMP byte ptr [ESI + 0xae0c],0x0
007b7ba1 : JZ 0x007b7baf
007b7ba3 : MOV dword ptr [ESI + 0xc00],0x190
007b7bad : JMP 0x007b7bb9
007b7baf : MOV dword ptr [ESI + 0xc00],0x28
007b7bb9 : MOV ECX,ESI
007b7bbb : CALL 0x006e9ac0
007b7bc0 : CMP byte ptr [ESI + 0xae0c],0x0
007b7bc7 : JNZ 0x007b7bd0
007b7bc9 : MOV ECX,ESI
007b7bcb : CALL 0x006e9a70
007b7bd0 : LEA EAX,[EBP + -0x68]
007b7bd3 : PUSH EAX
007b7bd4 : CALL 0x0046d2d0
007b7bd9 : MOV dword ptr [EBP + -0x4],EDI
007b7bdc : LEA ECX,[EBP + -0x68]
007b7bdf : PUSH ECX
007b7be0 : PUSH ESI
007b7be1 : CALL 0x006ea850
007b7be6 : MOV EAX,dword ptr [ESI + 0xc]
007b7be9 : CMP EAX,EDI
007b7beb : MOV dword ptr [EBP + -0x10],0x1
007b7bf2 : MOV dword ptr [EBP + -0x14],EDI
007b7bf5 : MOV dword ptr [EBP + -0x18],EAX
007b7bf8 : JLE 0x007b7c49
007b7bfa : MOV EBX,dword ptr [ESI + 0x8]
007b7bfd : LEA EDX,[EBP + -0x50]
007b7c00 : PUSH EDX
007b7c01 : MOV EDX,EBX
007b7c03 : LEA EAX,[EBP + -0x20]
007b7c06 : MOV EDI,0x1
007b7c0b : CALL 0x004655f0
007b7c10 : MOV ECX,dword ptr [EAX + 0x4]
007b7c13 : MOV EAX,dword ptr [EAX]
007b7c15 : TEST EAX,EAX
007b7c17 : JZ 0x007b7c30
007b7c19 : TEST ECX,ECX
007b7c1b : JZ 0x007b7c24
007b7c1d : MOV ECX,dword ptr [ECX + 0x4]
007b7c20 : ADD ECX,EAX
007b7c22 : JMP 0x007b7c26
007b7c24 : XOR ECX,ECX
007b7c26 : MOV ECX,dword ptr [ECX + 0x4]
007b7c29 : CMP ECX,0x1
007b7c2c : JL 0x007b7c30
007b7c2e : MOV EDI,ECX
007b7c30 : CMP dword ptr [EBP + -0x10],EDI
007b7c33 : JG 0x007b7c38
007b7c35 : MOV dword ptr [EBP + -0x10],EDI
007b7c38 : MOV EAX,dword ptr [EBP + -0x14]
007b7c3b : INC EAX
007b7c3c : ADD EBX,0x4
007b7c3f : CMP EAX,dword ptr [EBP + -0x18]
007b7c42 : MOV dword ptr [EBP + -0x14],EAX
007b7c45 : JL 0x007b7bfd
007b7c47 : XOR EDI,EDI
007b7c49 : MOV EDX,dword ptr [EBP + -0x10]
007b7c4c : MOV EAX,dword ptr [ESI + 0xc]
007b7c4f : MOV EBX,dword ptr [ESI + 0x9c38]
007b7c55 : PUSH EDI
007b7c56 : PUSH EDX
007b7c57 : MOV EDX,dword ptr [ESI + 0xc00]
007b7c5d : PUSH EDX
007b7c5e : PUSH EAX
007b7c5f : LEA ECX,[ESI + 0x9c38]
007b7c65 : LEA EAX,[ESI + 0x4]
007b7c68 : PUSH EAX
007b7c69 : MOV EAX,dword ptr [EBX + 0x4]
007b7c6c : CALL EAX
007b7c6e : PUSH 0x40000
007b7c73 : CALL 0x00808100
007b7c78 : ADD ESP,0x4
007b7c7b : CMP byte ptr [ESI + 0xae0c],0x0
007b7c82 : JNZ 0x007b7c89
007b7c84 : CALL 0x006eafb0
007b7c89 : MOV byte ptr [ESI + 0xa9ba],0x1
007b7c90 : MOV dword ptr [EBP + -0x4],0xffffffff
007b7c97 : LEA ECX,[EBP + -0x50]
007b7c9a : CALL 0x0046d230
007b7c9f : MOV ECX,dword ptr [EBP + -0xc]
007b7ca2 : MOV dword ptr FS:[0x0],ECX
007b7ca9 : POP ECX
007b7caa : POP EDI
007b7cab : POP ESI
007b7cac : POP EBX
007b7cad : MOV ESP,EBP
007b7caf : POP EBP
007b7cb0 : RET
