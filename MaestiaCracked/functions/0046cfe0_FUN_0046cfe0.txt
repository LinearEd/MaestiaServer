PROGRAM  : Maestia.exe
FUNCTION : FUN_0046cfe0
ENTRY    : 0046cfe0
BODY     : [[0046cfe0, 0046d182]]

============================================================
DECOMPILED C CODE
============================================================

byte FUN_0046cfe0(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,char param_5)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  int iVar5;
  int iVar6;
  int in_ECX;
  int iVar7;
  undefined1 local_38 [4];
  undefined4 local_34;
  int local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b8274a;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_1c = in_ECX;
  if (*(int *)(in_ECX + 0x70) != 0) {
    FUN_00473a60(in_ECX + 0x6c);
    if (*(int *)(in_ECX + 0x70) == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = *(int *)(in_ECX + 0x7c) + *(int *)(in_ECX + 0x70);
    }
    FUN_00473b00(iVar5);
    *(undefined4 *)(*(int *)(in_ECX + 0x80) + *(int *)(in_ECX + 0x88) * 4) =
         *(undefined4 *)(in_ECX + 0x70);
    *(int *)(in_ECX + 0x88) = *(int *)(in_ECX + 0x88) + 1;
    *(undefined4 *)(in_ECX + 0x70) = 0;
  }
  *(undefined4 *)(in_ECX + 0x74) = 0;
  local_14 = 0;
  if (0 < *(int *)(param_1 + 8)) {
    do {
      iVar5 = *(int *)(*(int *)(param_1 + 4) + local_14 * 4);
      if ((*(char *)(iVar5 + 0x1f9) == '\0') || (param_5 == '\0')) {
        bVar1 = false;
      }
      else {
        bVar1 = true;
      }
      if ((*(char *)(iVar5 + 0x1f8) != '\0') || (bVar1)) {
        local_18 = iVar5;
        iVar6 = FUN_004742f0(&local_18);
        *(undefined4 *)(iVar6 + 0x58) = 4;
        iVar7 = 1;
        *(undefined4 *)(iVar6 + 0x14) = 1;
        if ((*(char *)(iVar5 + 0x1f9) == '\0') || (*(char *)(iVar5 + 0x10ec) == '\0')) {
          iVar7 = 0;
        }
        iVar5 = *(int *)(iVar5 + 0x10e4) * *(int *)(iVar5 + 0x10e8) *
                ((uint)(*(char *)(iVar5 + 0x1078) == '\0') * 2 + 4) *
                (iVar7 + (uint)(*(char *)(iVar5 + 0x1f8) != '\0'));
        FUN_00474550(local_38,iVar5,"UpdateBillboardIbos, indices",1);
        local_8 = 0;
        FUN_004743b0(local_34,iVar5);
        FUN_004744b0();
        local_8 = 0xffffffff;
        FUN_00474620(local_38);
        in_ECX = local_1c;
      }
      local_14 = local_14 + 1;
    } while (local_14 < *(int *)(param_1 + 8));
  }
  bVar2 = FUN_0046d4d0(in_ECX + 8,param_3);
  bVar3 = FUN_0046d4d0(in_ECX + 0x1c,param_3);
  bVar4 = FUN_0046d4d0(in_ECX + 0x30,param_3);
  ExceptionList = local_10;
  return bVar4 & bVar2 & 1 & bVar3;
}



============================================================
DISASSEMBLY
============================================================
0046cfe0 : PUSH EBP
0046cfe1 : MOV EBP,ESP
0046cfe3 : PUSH -0x1
0046cfe5 : PUSH 0xb8274a
0046cfea : MOV EAX,FS:[0x0]
0046cff0 : PUSH EAX
0046cff1 : SUB ESP,0x28
0046cff4 : PUSH EBX
0046cff5 : PUSH ESI
0046cff6 : PUSH EDI
0046cff7 : MOV EAX,[0x00d66fa0]
0046cffc : XOR EAX,EBP
0046cffe : PUSH EAX
0046cfff : LEA EAX,[EBP + -0xc]
0046d002 : MOV FS:[0x0],EAX
0046d008 : MOV EDI,ECX
0046d00a : MOV dword ptr [EBP + -0x18],EDI
0046d00d : MOV EAX,dword ptr [EDI + 0x70]
0046d010 : LEA ESI,[EDI + 0x6c]
0046d013 : XOR EBX,EBX
0046d015 : CMP EAX,EBX
0046d017 : JZ 0x0046d04c
0046d019 : MOV ECX,dword ptr [ESI + 0x10]
0046d01c : PUSH ESI
0046d01d : ADD ECX,EAX
0046d01f : CALL 0x00473a60
0046d024 : MOV ECX,dword ptr [ESI + 0x4]
0046d027 : CMP ECX,EBX
0046d029 : JZ 0x0046d032
0046d02b : MOV EAX,dword ptr [ESI + 0x10]
0046d02e : ADD EAX,ECX
0046d030 : JMP 0x0046d034
0046d032 : XOR EAX,EAX
0046d034 : PUSH EAX
0046d035 : CALL 0x00473b00
0046d03a : MOV EAX,dword ptr [ESI + 0x1c]
0046d03d : MOV EDX,dword ptr [ESI + 0x4]
0046d040 : MOV ECX,dword ptr [ESI + 0x14]
0046d043 : MOV dword ptr [ECX + EAX*0x4],EDX
0046d046 : INC dword ptr [ESI + 0x1c]
0046d049 : MOV dword ptr [ESI + 0x4],EBX
0046d04c : MOV ECX,dword ptr [EBP + 0x8]
0046d04f : XOR EAX,EAX
0046d051 : MOV dword ptr [ESI + 0x8],EBX
0046d054 : CMP dword ptr [ECX + 0x8],EBX
0046d057 : MOV dword ptr [EBP + -0x10],EAX
0046d05a : JLE 0x0046d145
0046d060 : MOV EDX,dword ptr [ECX + 0x4]
0046d063 : MOV ESI,dword ptr [EDX + EAX*0x4]
0046d066 : CMP byte ptr [ESI + 0x1f9],0x0
0046d06d : MOV BL,byte ptr [ESI + 0x1f8]
0046d073 : JZ 0x0046d07f
0046d075 : CMP byte ptr [EBP + 0x18],0x0
0046d079 : JZ 0x0046d07f
0046d07b : MOV DL,0x1
0046d07d : JMP 0x0046d081
0046d07f : XOR DL,DL
0046d081 : TEST BL,BL
0046d083 : JNZ 0x0046d08d
0046d085 : TEST DL,DL
0046d087 : JZ 0x0046d138
0046d08d : LEA EAX,[EBP + -0x14]
0046d090 : PUSH EAX
0046d091 : LEA EAX,[EDI + 0x6c]
0046d094 : MOV dword ptr [EBP + -0x14],ESI
0046d097 : CALL 0x004742f0
0046d09c : MOV EDI,EAX
0046d09e : MOV dword ptr [EDI + 0x58],0x4
0046d0a5 : MOV ECX,0x1
0046d0aa : MOV dword ptr [EDI + 0x14],ECX
0046d0ad : CMP byte ptr [ESI + 0x1f9],0x0
0046d0b4 : JZ 0x0046d0bf
0046d0b6 : CMP byte ptr [ESI + 0x10ec],0x0
0046d0bd : JNZ 0x0046d0c1
0046d0bf : XOR ECX,ECX
0046d0c1 : MOV AL,byte ptr [ESI + 0x1f8]
0046d0c7 : MOV EBX,dword ptr [ESI + 0x10e8]
0046d0cd : XOR EDX,EDX
0046d0cf : TEST AL,AL
0046d0d1 : MOV EAX,dword ptr [ESI + 0x10e4]
0046d0d7 : SETNZ DL
0046d0da : PUSH 0x1
0046d0dc : PUSH 0xcd5f20
0046d0e1 : ADD ECX,EDX
0046d0e3 : XOR EDX,EDX
0046d0e5 : CMP byte ptr [ESI + 0x1078],DL
0046d0eb : SETZ DL
0046d0ee : IMUL EAX,EBX
0046d0f1 : LEA EDX,[EDX + EDX*0x1 + 0x4]
0046d0f5 : IMUL EAX,EDX
0046d0f8 : IMUL EAX,ECX
0046d0fb : MOV ESI,EAX
0046d0fd : PUSH ESI
0046d0fe : LEA EAX,[EBP + -0x34]
0046d101 : PUSH EAX
0046d102 : CALL 0x00474550
0046d107 : MOV dword ptr [EBP + -0x4],0x0
0046d10e : MOV ECX,dword ptr [EBP + -0x30]
0046d111 : PUSH ESI
0046d112 : PUSH ECX
0046d113 : MOV ESI,EDI
0046d115 : CALL 0x004743b0
0046d11a : CALL 0x004744b0
0046d11f : MOV dword ptr [EBP + -0x4],0xffffffff
0046d126 : LEA EDX,[EBP + -0x34]
0046d129 : PUSH EDX
0046d12a : CALL 0x00474620
0046d12f : MOV ECX,dword ptr [EBP + 0x8]
0046d132 : MOV EDI,dword ptr [EBP + -0x18]
0046d135 : MOV EAX,dword ptr [EBP + -0x10]
0046d138 : INC EAX
0046d139 : CMP EAX,dword ptr [ECX + 0x8]
0046d13c : MOV dword ptr [EBP + -0x10],EAX
0046d13f : JL 0x0046d060
0046d145 : MOV ESI,dword ptr [EBP + 0x10]
0046d148 : PUSH ESI
0046d149 : LEA EAX,[EDI + 0x8]
0046d14c : PUSH EAX
0046d14d : CALL 0x0046d4d0
0046d152 : PUSH ESI
0046d153 : LEA ECX,[EDI + 0x1c]
0046d156 : MOV BL,AL
0046d158 : PUSH ECX
0046d159 : AND BL,0x1
0046d15c : CALL 0x0046d4d0
0046d161 : PUSH ESI
0046d162 : ADD EDI,0x30
0046d165 : PUSH EDI
0046d166 : AND BL,AL
0046d168 : CALL 0x0046d4d0
0046d16d : AND AL,BL
0046d16f : MOV ECX,dword ptr [EBP + -0xc]
0046d172 : MOV dword ptr FS:[0x0],ECX
0046d179 : POP ECX
0046d17a : POP EDI
0046d17b : POP ESI
0046d17c : POP EBX
0046d17d : MOV ESP,EBP
0046d17f : POP EBP
0046d180 : RET 0x14
