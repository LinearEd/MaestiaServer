PROGRAM  : Maestia.exe
FUNCTION : FUN_008520e0
ENTRY    : 008520e0
BODY     : [[008520e0, 008522d4]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008520e0(void)

{
  char cVar1;
  int iVar2;
  int in_ECX;
  undefined4 *puVar3;
  undefined **local_120 [47];
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  undefined4 local_4c;
  float local_48;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  float local_30;
  undefined4 local_2c;
  float local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined1 local_11;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b48ddd;
  local_10 = ExceptionList;
  if (*(int *)(in_ECX + 0x18a8) == 0) {
    return;
  }
  ExceptionList = &local_10;
  if (((*(char *)(*(int *)(in_ECX + 0x18a8) + 0x20) != '\0') &&
      (cVar1 = FUN_00876040(DAT_00d66fa0 ^ (uint)&stack0xfffffffc), cVar1 == '\0')) &&
     (*(char *)(*(int *)(in_ECX + 0x18a8) + 0xec) == '\0')) {
    if (*(int *)(*(int *)(in_ECX + 0x18a8) + 0x30) == 0) {
      ExceptionList = local_10;
      return;
    }
    local_40 = *(undefined4 *)(in_ECX + 0x1580);
    local_3c = *(undefined4 *)(in_ECX + 0x1584);
    local_38 = *(undefined4 *)(in_ECX + 0x1588);
    D3DXVec3Normalize(&local_40,&local_40);
    local_64 = 0;
    local_60 = 0xbf800000;
    local_5c = 0;
    iVar2 = FUN_007d5b60(local_120);
    local_2c = *(undefined4 *)(iVar2 + 0x20);
    local_24 = *(undefined4 *)(iVar2 + 0x28);
    local_8 = 0xffffffff;
    local_28 = *(float *)(iVar2 + 0x24) + DAT_00d72c20;
    local_58 = 0;
    local_54 = 0;
    local_50 = 0;
    local_34 = 0;
    local_120[0] = &PTR_FUN_00cd083c;
    local_48 = 0.0;
    iVar2 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_64,&local_4c,&local_58,&local_34
                        );
    local_20 = 0;
    local_1c = 0;
    local_18 = 0;
    FUN_007e3cb0(*(undefined4 *)(*(int *)(in_ECX + 1000) + 0x68),
                 *(undefined4 *)(*(int *)(in_ECX + 1000) + 0x70),&local_30,&local_11,&local_20);
    if ((iVar2 == 0) || (local_48 <= local_30)) {
      D3DXVec3Normalize(&local_20,&local_20);
      puVar3 = &local_4c;
      FUN_00855280(&local_20);
      goto LAB_008522bc;
    }
  }
  puVar3 = &DAT_00d720f0;
LAB_008522bc:
  FUN_00856310(puVar3);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008520e0 : PUSH EBP
008520e1 : MOV EBP,ESP
008520e3 : PUSH -0x1
008520e5 : PUSH 0xb48ddd
008520ea : MOV EAX,FS:[0x0]
008520f0 : PUSH EAX
008520f1 : SUB ESP,0x110
008520f7 : PUSH EBX
008520f8 : PUSH ESI
008520f9 : PUSH EDI
008520fa : MOV EAX,[0x00d66fa0]
008520ff : XOR EAX,EBP
00852101 : PUSH EAX
00852102 : LEA EAX,[EBP + -0xc]
00852105 : MOV FS:[0x0],EAX
0085210b : MOV EBX,ECX
0085210d : MOV EAX,dword ptr [EBX + 0x18a8]
00852113 : TEST EAX,EAX
00852115 : JZ 0x008522c3
0085211b : CMP byte ptr [EAX + 0x20],0x0
0085211f : JNZ 0x0085212b
00852121 : PUSH 0xd720f0
00852126 : JMP 0x008522bc
0085212b : MOV EAX,dword ptr [EBX + 0x138]
00852131 : MOV ECX,dword ptr [EAX + 0x4]
00852134 : LEA ESI,[EBX + 0x1c58]
0085213a : LEA EDI,[ECX + EBX*0x1 + 0x138]
00852141 : CALL 0x00876040
00852146 : TEST AL,AL
00852148 : JNZ 0x00852121
0085214a : MOV EAX,dword ptr [EBX + 0x18a8]
00852150 : CMP byte ptr [EAX + 0xec],0x0
00852157 : JNZ 0x00852121
00852159 : CMP dword ptr [EAX + 0x30],0x0
0085215d : JZ 0x008522c3
00852163 : MOVSS XMM0,dword ptr [EBX + 0x1580]
0085216b : MOVSS XMM1,dword ptr [EBX + 0x1584]
00852173 : MOVSS XMM2,dword ptr [EBX + 0x1588]
0085217b : LEA EDX,[EBP + -0x3c]
0085217e : PUSH EDX
0085217f : MOV EAX,EDX
00852181 : PUSH EAX
00852182 : MOVSS dword ptr [EBP + -0x3c],XMM0
00852187 : MOVSS dword ptr [EBP + -0x38],XMM1
0085218c : MOVSS dword ptr [EBP + -0x34],XMM2
00852191 : CALL 0x004ff722
00852196 : XORPS XMM0,XMM0
00852199 : MOVSS XMM1,dword ptr [0x00cdf0d0]
008521a1 : LEA ECX,[EBP + 0xfffffee4]
008521a7 : PUSH ECX
008521a8 : MOV ECX,dword ptr [EBX + 0x3e8]
008521ae : MOVSS dword ptr [EBP + -0x60],XMM0
008521b3 : MOVSS dword ptr [EBP + -0x5c],XMM1
008521b8 : MOVSS dword ptr [EBP + -0x58],XMM0
008521bd : CALL 0x007d5b60
008521c2 : MOV dword ptr [EBP + -0x4],0x0
008521c9 : MOVSS XMM0,dword ptr [EAX + 0x20]
008521ce : MOVSS XMM1,dword ptr [EAX + 0x24]
008521d3 : MOVSS XMM2,dword ptr [EAX + 0x28]
008521d8 : MOVSS dword ptr [EBP + -0x28],XMM0
008521dd : MOVSS dword ptr [EBP + -0x24],XMM1
008521e2 : MOVSS dword ptr [EBP + -0x20],XMM2
008521e7 : MOV dword ptr [EBP + -0x4],0xffffffff
008521ee : MOVSS XMM0,dword ptr [EBP + -0x24]
008521f3 : ADDSS XMM0,dword ptr [0x00d72c20]
008521fb : MOV EDX,dword ptr [0x00da93ec]
00852201 : MOVSS dword ptr [EBP + -0x24],XMM0
00852206 : XORPS XMM0,XMM0
00852209 : MOVSS dword ptr [EBP + -0x54],XMM0
0085220e : MOVSS dword ptr [EBP + -0x50],XMM0
00852213 : MOVSS dword ptr [EBP + -0x4c],XMM0
00852218 : MOVSS dword ptr [EBP + -0x30],XMM0
0085221d : LEA ECX,[EBP + -0x30]
00852220 : PUSH ECX
00852221 : MOV dword ptr [EBP + 0xfffffee4],0xcd083c
0085222b : MOV EAX,dword ptr [EDX + 0xc]
0085222e : LEA EDX,[EBP + -0x54]
00852231 : PUSH EDX
00852232 : LEA ECX,[EBP + -0x48]
00852235 : PUSH ECX
00852236 : LEA EDX,[EBP + -0x60]
00852239 : PUSH EDX
0085223a : PUSH EAX
0085223b : LEA EDI,[EBP + -0x28]
0085223e : MOVSS dword ptr [EBP + -0x44],XMM0
00852243 : CALL 0x007e9d70
00852248 : XORPS XMM0,XMM0
0085224b : LEA ECX,[EBP + -0x1c]
0085224e : PUSH ECX
0085224f : LEA EDX,[EBP + -0xd]
00852252 : PUSH EDX
00852253 : MOV EDX,dword ptr [0x00da93ec]
00852259 : LEA ECX,[EBP + -0x2c]
0085225c : MOV ESI,EAX
0085225e : MOV EAX,dword ptr [EBX + 0x3e8]
00852264 : MOVSS dword ptr [EBP + -0x1c],XMM0
00852269 : MOVSS dword ptr [EBP + -0x18],XMM0
0085226e : MOVSS dword ptr [EBP + -0x14],XMM0
00852273 : FLD float ptr [EAX + 0x70]
00852276 : MOV EDI,dword ptr [EDX + 0xc]
00852279 : PUSH ECX
0085227a : SUB ESP,0x8
0085227d : FSTP float ptr [ESP + 0x4]
00852281 : FLD float ptr [EAX + 0x68]
00852284 : FSTP float ptr [ESP]
00852287 : CALL 0x007e3cb0
0085228c : TEST ESI,ESI
0085228e : JZ 0x0085229f
00852290 : MOVSS XMM0,dword ptr [EBP + -0x44]
00852295 : COMISS XMM0,dword ptr [EBP + -0x2c]
00852299 : JA 0x00852121
0085229f : LEA EAX,[EBP + -0x1c]
008522a2 : PUSH EAX
008522a3 : MOV ECX,EAX
008522a5 : PUSH ECX
008522a6 : CALL 0x004ff722
008522ab : LEA EDX,[EBP + -0x1c]
008522ae : PUSH EDX
008522af : LEA EDI,[EBP + -0x48]
008522b2 : MOV EAX,EBX
008522b4 : CALL 0x00855280
008522b9 : MOV EAX,EDI
008522bb : PUSH EAX
008522bc : MOV ESI,EBX
008522be : CALL 0x00856310
008522c3 : MOV ECX,dword ptr [EBP + -0xc]
008522c6 : MOV dword ptr FS:[0x0],ECX
008522cd : POP ECX
008522ce : POP EDI
008522cf : POP ESI
008522d0 : POP EBX
008522d1 : MOV ESP,EBP
008522d3 : POP EBP
008522d4 : RET
