PROGRAM  : Maestia.exe
FUNCTION : FUN_0059f8e0
ENTRY    : 0059f8e0
BODY     : [[0059f8e0, 0059fa9e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0059f8e0(int param_1)

{
  char cVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  LONG LVar5;
  int *piVar6;
  uint uVar7;
  uint local_20;
  undefined1 local_10 [4];
  int local_c;
  
  cVar1 = FUN_00526030(0x1f);
  if (cVar1 == '\0') {
    FUN_00526050("StyleSheet",0,0);
    return;
  }
  if ((*(int *)(param_1 + 8) != 0) && (*(int *)(param_1 + 8) != 0x10)) {
    iVar4 = *(int *)(*(int *)(param_1 + 0x18) + 0x78);
    iVar2 = FUN_005324f0(*(undefined4 *)(iVar4 + 0x2a0),iVar4 + 0x10,0,0xffffffff);
    FUN_0051b6e0();
    piVar3 = (int *)FUN_0057bf80();
    iVar4 = *piVar3;
    if (iVar4 == 0) {
      piVar3 = (int *)0x0;
      uVar7 = 0;
    }
    else {
      uVar7 = 0;
      piVar6 = (int *)(iVar4 + 8);
      do {
        if (*piVar6 != -2) break;
        uVar7 = uVar7 + 1;
        piVar6 = piVar6 + 5;
      } while (uVar7 <= *(uint *)(iVar4 + 4));
    }
    while (((FUN_0057bf80(), piVar3 != (int *)0x0 && (*piVar3 != 0)) &&
           ((int)uVar7 <= *(int *)(*piVar3 + 4)))) {
      FUN_0051bf30();
      if (*(int *)(*piVar3 + 0xc + uVar7 * 0x14) == 1) {
        FUN_0051b7e0(0x2e);
      }
      FUN_0051bd70(*piVar3 + 0x10 + uVar7 * 0x14);
      iVar4 = FUN_00525450((local_20 & 0xfffffffc) + 8,*(uint *)(local_20 & 0xfffffffc) & 0x7fffffff
                          );
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
      local_10[0] = 5;
      *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + 1;
      local_c = iVar4;
      FUN_00585540(local_10);
      FUN_00526bc0();
      piVar6 = (int *)(iVar4 + 8);
      *piVar6 = *piVar6 + -1;
      if (*piVar6 == 0) {
        FUN_00525340();
      }
      FUN_0057c310();
    }
    FUN_005271c0(iVar2);
    LVar5 = InterlockedExchangeAdd((LONG *)((local_20 & 0xfffffffc) + 4),-1);
    if (LVar5 == 1) {
      FUN_00515cf0(local_20 & 0xfffffffc);
    }
    if (iVar2 != 0) {
      FUN_00503db0();
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0059f8e0 : SUB ESP,0x20
0059f8e3 : PUSH EDI
0059f8e4 : MOV EDI,dword ptr [ESP + 0x28]
0059f8e8 : PUSH 0x1f
0059f8ea : MOV ECX,EDI
0059f8ec : CALL 0x00526030
0059f8f1 : TEST AL,AL
0059f8f3 : JNZ 0x0059f90a
0059f8f5 : PUSH 0x0
0059f8f7 : PUSH 0x0
0059f8f9 : PUSH 0xb8ee58
0059f8fe : MOV ECX,EDI
0059f900 : CALL 0x00526050
0059f905 : POP EDI
0059f906 : ADD ESP,0x20
0059f909 : RET
0059f90a : PUSH ESI
0059f90b : MOV ESI,dword ptr [EDI + 0x8]
0059f90e : TEST ESI,ESI
0059f910 : JZ 0x0059fa99
0059f916 : ADD ESI,-0x10
0059f919 : JZ 0x0059fa99
0059f91f : MOV ECX,dword ptr [EDI + 0x18]
0059f922 : MOV EAX,dword ptr [ECX + 0x78]
0059f925 : PUSH EBX
0059f926 : PUSH EBP
0059f927 : PUSH -0x1
0059f929 : MOV EDX,EAX
0059f92b : MOV EDX,dword ptr [EDX + 0x2a0]
0059f931 : PUSH 0x0
0059f933 : ADD EAX,0x10
0059f936 : PUSH EAX
0059f937 : PUSH EDX
0059f938 : CALL 0x005324f0
0059f93d : MOV EBP,dword ptr [EDI + 0x18]
0059f940 : LEA ECX,[ESP + 0x10]
0059f944 : MOV EBX,EAX
0059f946 : ADD EBP,0x78
0059f949 : CALL 0x0051b6e0
0059f94e : LEA ECX,[ESI + 0x30]
0059f951 : MOV dword ptr [ESP + 0x14],ECX
0059f955 : CALL 0x0057bf80
0059f95a : MOV ECX,dword ptr [EAX]
0059f95c : TEST ECX,ECX
0059f95e : JNZ 0x0059f966
0059f960 : XOR EAX,EAX
0059f962 : XOR EDX,EDX
0059f964 : JMP 0x0059f97d
0059f966 : MOV ESI,dword ptr [ECX + 0x4]
0059f969 : XOR EDX,EDX
0059f96b : ADD ECX,0x8
0059f96e : MOV EDI,EDI
0059f970 : CMP dword ptr [ECX],-0x2
0059f973 : JNZ 0x0059f97d
0059f975 : INC EDX
0059f976 : ADD ECX,0x14
0059f979 : CMP EDX,ESI
0059f97b : JBE 0x0059f970
0059f97d : MOV EDI,EAX
0059f97f : MOV ESI,EDX
0059f981 : MOV dword ptr [ESP + 0x18],EDI
0059f985 : MOV dword ptr [ESP + 0x1c],ESI
0059f989 : LEA ESP,[ESP]
0059f990 : MOV ECX,dword ptr [ESP + 0x14]
0059f994 : CALL 0x0057bf80
0059f999 : TEST EDI,EDI
0059f99b : JZ 0x0059fa61
0059f9a1 : CMP dword ptr [EDI],0x0
0059f9a4 : JZ 0x0059fa61
0059f9aa : MOV EAX,dword ptr [EDI]
0059f9ac : CMP ESI,dword ptr [EAX + 0x4]
0059f9af : JG 0x0059fa61
0059f9b5 : LEA ECX,[ESP + 0x10]
0059f9b9 : CALL 0x0051bf30
0059f9be : MOV ECX,dword ptr [EDI]
0059f9c0 : LEA ESI,[ESI + ESI*0x4]
0059f9c3 : ADD ESI,ESI
0059f9c5 : ADD ESI,ESI
0059f9c7 : CMP dword ptr [ECX + ESI*0x1 + 0xc],0x1
0059f9cc : JNZ 0x0059f9d9
0059f9ce : PUSH 0x2e
0059f9d0 : LEA ECX,[ESP + 0x14]
0059f9d4 : CALL 0x0051b7e0
0059f9d9 : MOV EDX,dword ptr [EDI]
0059f9db : LEA EAX,[EDX + ESI*0x1 + 0x10]
0059f9df : PUSH EAX
0059f9e0 : LEA ECX,[ESP + 0x14]
0059f9e4 : CALL 0x0051bd70
0059f9e9 : MOV ECX,dword ptr [ESP + 0x10]
0059f9ed : MOV EAX,dword ptr [EBP]
0059f9f0 : MOV EDX,ECX
0059f9f2 : AND EDX,0xfffffffc
0059f9f5 : MOV EDX,dword ptr [EDX]
0059f9f7 : AND ECX,0xfffffffc
0059f9fa : AND EDX,0x7fffffff
0059fa00 : ADD ECX,0x8
0059fa03 : PUSH EDX
0059fa04 : ADD EAX,0x8
0059fa07 : PUSH ECX
0059fa08 : LEA ECX,[EAX + 0x24c]
0059fa0e : CALL 0x00525450
0059fa13 : MOV ESI,EAX
0059fa15 : MOV EAX,0x1
0059fa1a : ADD dword ptr [ESI + 0x8],EAX
0059fa1d : MOV byte ptr [ESP + 0x20],0x5
0059fa22 : MOV dword ptr [ESP + 0x24],ESI
0059fa26 : ADD dword ptr [ESI + 0x8],EAX
0059fa29 : LEA EAX,[ESP + 0x20]
0059fa2d : PUSH EAX
0059fa2e : MOV ECX,EBX
0059fa30 : CALL 0x00585540
0059fa35 : LEA ECX,[ESP + 0x20]
0059fa39 : CALL 0x00526bc0
0059fa3e : ADD dword ptr [ESI + 0x8],-0x1
0059fa42 : JNZ 0x0059fa4b
0059fa44 : MOV ECX,ESI
0059fa46 : CALL 0x00525340
0059fa4b : LEA ECX,[ESP + 0x18]
0059fa4f : CALL 0x0057c310
0059fa54 : MOV ESI,dword ptr [ESP + 0x1c]
0059fa58 : MOV EDI,dword ptr [ESP + 0x18]
0059fa5c : JMP 0x0059f990
0059fa61 : MOV ECX,dword ptr [ESP + 0x34]
0059fa65 : MOV ECX,dword ptr [ECX + 0x4]
0059fa68 : PUSH EBX
0059fa69 : CALL 0x005271c0
0059fa6e : MOV ESI,dword ptr [ESP + 0x10]
0059fa72 : AND ESI,0xfffffffc
0059fa75 : PUSH -0x1
0059fa77 : LEA EDX,[ESI + 0x4]
0059fa7a : PUSH EDX
0059fa7b : CALL dword ptr [0x00b851cc]
0059fa81 : SUB EAX,0x1
0059fa84 : JNZ 0x0059fa8c
0059fa86 : PUSH ESI
0059fa87 : CALL 0x00515cf0
0059fa8c : TEST EBX,EBX
0059fa8e : JZ 0x0059fa97
0059fa90 : MOV ECX,EBX
0059fa92 : CALL 0x00503db0
0059fa97 : POP EBP
0059fa98 : POP EBX
0059fa99 : POP ESI
0059fa9a : POP EDI
0059fa9b : ADD ESP,0x20
0059fa9e : RET
