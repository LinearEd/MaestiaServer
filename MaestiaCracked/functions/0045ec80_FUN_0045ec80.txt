PROGRAM  : Maestia.exe
FUNCTION : FUN_0045ec80
ENTRY    : 0045ec80
BODY     : [[0045ec80, 0045f100]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0045ec80(float *param_1,float *param_2,float *param_3,float *param_4)

{
  float *in_ECX;
  float *in_EDX;
  float *unaff_ESI;
  float *unaff_EDI;
  float10 fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  
  if ((in_ECX[1] == 1.0) || (in_ECX[1] == -1.0)) {
    fVar2 = *param_2;
    fVar3 = *unaff_EDI;
    fVar4 = fVar3;
    if (fVar2 < fVar3) {
      fVar4 = fVar2;
    }
    fVar5 = *unaff_ESI;
    fVar6 = fVar5;
    if ((fVar4 <= fVar5) && (fVar6 = fVar3, fVar2 < fVar3)) {
      fVar6 = fVar2;
    }
    if (*in_EDX < fVar6) {
      return 0;
    }
    fVar4 = fVar3;
    if (fVar3 < fVar2) {
      fVar4 = fVar2;
    }
    if ((fVar5 <= fVar4) && (fVar5 = fVar2, fVar2 <= fVar3)) {
      fVar5 = fVar3;
    }
    if (fVar5 < *in_EDX) {
      return 0;
    }
    fVar2 = param_2[2];
    fVar3 = unaff_EDI[2];
    fVar4 = fVar3;
    if (fVar2 < fVar3) {
      fVar4 = fVar2;
    }
    fVar5 = unaff_ESI[2];
    fVar6 = fVar5;
    if ((fVar4 <= fVar5) && (fVar6 = fVar3, fVar2 < fVar3)) {
      fVar6 = fVar2;
    }
    if (in_EDX[2] < fVar6) {
      return 0;
    }
    fVar4 = fVar3;
    if (fVar3 < fVar2) {
      fVar4 = fVar2;
    }
    if ((fVar5 <= fVar4) && (fVar5 = fVar2, fVar2 <= fVar3)) {
      fVar5 = fVar3;
    }
    if (fVar5 < in_EDX[2]) {
      return 0;
    }
  }
  fVar2 = *param_2 - *unaff_ESI;
  fVar3 = param_2[1] - unaff_ESI[1];
  fVar6 = *unaff_EDI - *unaff_ESI;
  fVar5 = unaff_EDI[1] - unaff_ESI[1];
  fVar7 = unaff_EDI[2] - unaff_ESI[2];
  fVar4 = param_2[2] - unaff_ESI[2];
  fVar11 = fVar7 * in_ECX[1] - fVar5 * in_ECX[2];
  fVar8 = in_ECX[2] * fVar6 - fVar7 * *in_ECX;
  fVar12 = fVar5 * *in_ECX - in_ECX[1] * fVar6;
  fVar10 = fVar4 * fVar12 + fVar11 * fVar2 + fVar8 * fVar3;
  if (0.0001 <= fVar10) {
    fVar9 = *in_EDX - *unaff_ESI;
    fVar13 = in_EDX[1] - unaff_ESI[1];
    fVar14 = in_EDX[2] - unaff_ESI[2];
    fVar8 = fVar14 * fVar12 + fVar13 * fVar8 + fVar9 * fVar11;
    if ((0.0 <= fVar8) && (fVar8 <= fVar10)) {
      fVar15 = fVar13 * fVar4 - fVar14 * fVar3;
      fVar14 = fVar14 * fVar2 - fVar4 * fVar9;
      fVar12 = fVar9 * fVar3 - fVar13 * fVar2;
      fVar11 = fVar12 * in_ECX[2] + fVar15 * *in_ECX + fVar14 * in_ECX[1];
      if ((0.0 <= fVar11) &&
         ((fVar11 + fVar8 <= fVar10 &&
          (fVar12 = fVar15 * fVar6 + fVar7 * fVar12 + fVar5 * fVar14, *param_3 = fVar12,
          0.0 <= fVar12)))) {
        if (param_4 != (float *)0x0) {
          *(ulonglong *)param_4 =
               CONCAT44(fVar4 * fVar6 - fVar7 * fVar2,fVar7 * fVar3 - fVar5 * fVar4);
          param_4[2] = fVar5 * fVar2 - fVar6 * fVar3;
          fVar1 = (float10)FUN_0040f460(*param_4 * *param_4 + param_4[1] * param_4[1] +
                                        param_4[2] * param_4[2]);
          if ((float10)0 < fVar1) {
            D3DXVec3Normalize(param_4,param_4);
          }
        }
        fVar2 = unaff_ESI[2];
        fVar3 = unaff_ESI[1];
        fVar4 = unaff_EDI[1];
        fVar8 = (1.0 / fVar10) * fVar8;
        fVar11 = (1.0 / fVar10) * fVar11;
        fVar5 = param_2[2];
        fVar10 = (1.0 - fVar8) - fVar11;
        fVar6 = param_2[1];
        fVar7 = unaff_EDI[2];
        *param_1 = *unaff_EDI * fVar11 + *param_2 * fVar8 + *unaff_ESI * fVar10;
        param_1[1] = fVar4 * fVar11 + fVar6 * fVar8 + fVar3 * fVar10;
        param_1[2] = fVar11 * fVar7 + fVar5 * fVar8 + fVar2 * fVar10;
        return 1;
      }
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0045ec80 : PUSH EBP
0045ec81 : MOV EBP,ESP
0045ec83 : MOVSS XMM0,dword ptr [ECX + 0x4]
0045ec88 : SUB ESP,0x34
0045ec8b : UCOMISS XMM0,dword ptr [0x00c10fc4]
0045ec92 : LAHF
0045ec93 : PUSH EBX
0045ec94 : MOV EBX,dword ptr [EBP + 0xc]
0045ec97 : TEST AH,0x44
0045ec9a : JNP 0x0045ecad
0045ec9c : UCOMISS XMM0,dword ptr [0x00cdf0d0]
0045eca3 : LAHF
0045eca4 : TEST AH,0x44
0045eca7 : JP 0x0045ed7b
0045ecad : MOVSS XMM0,dword ptr [EBX]
0045ecb1 : MOVSS XMM1,dword ptr [EDI]
0045ecb5 : COMISS XMM1,XMM0
0045ecb8 : JBE 0x0045ecbf
0045ecba : MOVAPS XMM2,XMM0
0045ecbd : JMP 0x0045ecc2
0045ecbf : MOVAPS XMM2,XMM1
0045ecc2 : MOVSS XMM3,dword ptr [ESI]
0045ecc6 : COMISS XMM2,XMM3
0045ecc9 : JBE 0x0045ecd0
0045eccb : MOVAPS XMM2,XMM3
0045ecce : JMP 0x0045ecdd
0045ecd0 : COMISS XMM1,XMM0
0045ecd3 : JBE 0x0045ecda
0045ecd5 : MOVAPS XMM2,XMM0
0045ecd8 : JMP 0x0045ecdd
0045ecda : MOVAPS XMM2,XMM1
0045ecdd : MOVSS XMM4,dword ptr [EDX]
0045ece1 : COMISS XMM2,XMM4
0045ece4 : JA 0x0045f0fa
0045ecea : COMISS XMM0,XMM1
0045eced : JBE 0x0045ecf4
0045ecef : MOVAPS XMM2,XMM0
0045ecf2 : JMP 0x0045ecf7
0045ecf4 : MOVAPS XMM2,XMM1
0045ecf7 : COMISS XMM3,XMM2
0045ecfa : JBE 0x0045ed01
0045ecfc : MOVAPS XMM0,XMM3
0045ecff : JMP 0x0045ed09
0045ed01 : COMISS XMM0,XMM1
0045ed04 : JA 0x0045ed09
0045ed06 : MOVAPS XMM0,XMM1
0045ed09 : COMISS XMM4,XMM0
0045ed0c : JA 0x0045f0fa
0045ed12 : MOVSS XMM0,dword ptr [EBX + 0x8]
0045ed17 : MOVSS XMM1,dword ptr [EDI + 0x8]
0045ed1c : COMISS XMM1,XMM0
0045ed1f : JBE 0x0045ed26
0045ed21 : MOVAPS XMM2,XMM0
0045ed24 : JMP 0x0045ed29
0045ed26 : MOVAPS XMM2,XMM1
0045ed29 : MOVSS XMM3,dword ptr [ESI + 0x8]
0045ed2e : COMISS XMM2,XMM3
0045ed31 : JBE 0x0045ed38
0045ed33 : MOVAPS XMM2,XMM3
0045ed36 : JMP 0x0045ed45
0045ed38 : COMISS XMM1,XMM0
0045ed3b : JBE 0x0045ed42
0045ed3d : MOVAPS XMM2,XMM0
0045ed40 : JMP 0x0045ed45
0045ed42 : MOVAPS XMM2,XMM1
0045ed45 : MOVSS XMM4,dword ptr [EDX + 0x8]
0045ed4a : COMISS XMM2,XMM4
0045ed4d : JA 0x0045f0fa
0045ed53 : COMISS XMM0,XMM1
0045ed56 : JBE 0x0045ed5d
0045ed58 : MOVAPS XMM2,XMM0
0045ed5b : JMP 0x0045ed60
0045ed5d : MOVAPS XMM2,XMM1
0045ed60 : COMISS XMM3,XMM2
0045ed63 : JBE 0x0045ed6a
0045ed65 : MOVAPS XMM0,XMM3
0045ed68 : JMP 0x0045ed72
0045ed6a : COMISS XMM0,XMM1
0045ed6d : JA 0x0045ed72
0045ed6f : MOVAPS XMM0,XMM1
0045ed72 : COMISS XMM4,XMM0
0045ed75 : JA 0x0045f0fa
0045ed7b : MOVSS XMM1,dword ptr [ESI]
0045ed7f : MOVSS XMM0,dword ptr [EBX]
0045ed83 : MOVSS XMM3,dword ptr [ESI + 0x4]
0045ed88 : MOVSS XMM2,dword ptr [EDI]
0045ed8c : MOVSS XMM4,dword ptr [ESI + 0x8]
0045ed91 : MOVSS XMM5,dword ptr [ECX + 0x4]
0045ed96 : SUBSS XMM0,XMM1
0045ed9a : MOVSS dword ptr [EBP + -0x1c],XMM0
0045ed9f : MOVSS XMM0,dword ptr [EBX + 0x4]
0045eda4 : SUBSS XMM0,XMM3
0045eda8 : SUBSS XMM2,XMM1
0045edac : MOVSS XMM1,dword ptr [EDI + 0x4]
0045edb1 : SUBSS XMM1,XMM3
0045edb5 : MOVSS XMM3,dword ptr [EDI + 0x8]
0045edba : SUBSS XMM3,XMM4
0045edbe : MOVSS dword ptr [EBP + -0x18],XMM0
0045edc3 : MOVSS XMM0,dword ptr [EBX + 0x8]
0045edc8 : SUBSS XMM0,XMM4
0045edcc : MOVSS XMM4,dword ptr [ECX + 0x8]
0045edd1 : MOVAPS XMM6,XMM3
0045edd4 : MULSS XMM6,XMM5
0045edd8 : MOVAPS XMM7,XMM1
0045eddb : MULSS XMM7,XMM4
0045eddf : SUBSS XMM6,XMM7
0045ede3 : MOVSS XMM7,dword ptr [ECX]
0045ede7 : MOVSS dword ptr [EBP + -0x28],XMM6
0045edec : MULSS XMM4,XMM2
0045edf0 : MOVAPS XMM6,XMM3
0045edf3 : MULSS XMM6,XMM7
0045edf7 : SUBSS XMM4,XMM6
0045edfb : MULSS XMM5,XMM2
0045edff : MOVSS dword ptr [EBP + -0x24],XMM4
0045ee04 : MOVSS XMM4,dword ptr [EBP + -0x28]
0045ee09 : MULSS XMM4,dword ptr [EBP + -0x1c]
0045ee0e : MOVAPS XMM6,XMM1
0045ee11 : MULSS XMM6,XMM7
0045ee15 : SUBSS XMM6,XMM5
0045ee19 : MOVAPS XMM5,XMM0
0045ee1c : MULSS XMM5,XMM6
0045ee20 : ADDSS XMM5,XMM4
0045ee24 : MOVSS XMM4,dword ptr [EBP + -0x24]
0045ee29 : MULSS XMM4,dword ptr [EBP + -0x18]
0045ee2e : ADDSS XMM5,XMM4
0045ee32 : MOVSS XMM4,dword ptr [0x00cdf398]
0045ee3a : COMISS XMM4,XMM5
0045ee3d : MOVSS dword ptr [EBP + -0xc],XMM5
0045ee42 : JA 0x0045f0fa
0045ee48 : MOVSS XMM7,dword ptr [ESI]
0045ee4c : MOVSS XMM4,dword ptr [EDX]
0045ee50 : SUBSS XMM4,XMM7
0045ee54 : MOVSS XMM7,dword ptr [EDX + 0x4]
0045ee59 : SUBSS XMM7,dword ptr [ESI + 0x4]
0045ee5e : MOVSS dword ptr [EBP + -0x30],XMM7
0045ee63 : MOVSS XMM7,dword ptr [EDX + 0x8]
0045ee68 : SUBSS XMM7,dword ptr [ESI + 0x8]
0045ee6d : MOVSS dword ptr [EBP + -0x2c],XMM7
0045ee72 : MULSS XMM7,XMM6
0045ee76 : MOVSS XMM6,dword ptr [EBP + -0x30]
0045ee7b : MULSS XMM6,dword ptr [EBP + -0x24]
0045ee80 : MOVSS dword ptr [EBP + -0x4],XMM7
0045ee85 : ADDSS XMM7,XMM6
0045ee89 : MOVSS dword ptr [EBP + -0x4],XMM7
0045ee8e : MOVSS XMM6,dword ptr [EBP + -0x4]
0045ee93 : MOVAPS XMM7,XMM4
0045ee96 : MULSS XMM7,dword ptr [EBP + -0x28]
0045ee9b : ADDSS XMM6,XMM7
0045ee9f : XORPS XMM7,XMM7
0045eea2 : COMISS XMM7,XMM6
0045eea5 : MOVSS dword ptr [EBP + -0x10],XMM6
0045eeaa : JA 0x0045f0fa
0045eeb0 : COMISS XMM6,XMM5
0045eeb3 : JA 0x0045f0fa
0045eeb9 : MOVSS XMM6,dword ptr [EBP + -0x30]
0045eebe : MULSS XMM6,XMM0
0045eec2 : MOVSS dword ptr [EBP + -0x8],XMM6
0045eec7 : MOVSS XMM6,dword ptr [EBP + -0x2c]
0045eecc : MULSS XMM6,dword ptr [EBP + -0x18]
0045eed1 : MOVSS XMM7,dword ptr [EBP + -0x8]
0045eed6 : SUBSS XMM7,XMM6
0045eeda : MOVSS XMM6,dword ptr [EBP + -0x2c]
0045eedf : MULSS XMM6,dword ptr [EBP + -0x1c]
0045eee4 : MOVSS dword ptr [EBP + -0x28],XMM7
0045eee9 : MOVAPS XMM7,XMM0
0045eeec : MULSS XMM7,XMM4
0045eef0 : MULSS XMM4,dword ptr [EBP + -0x18]
0045eef5 : SUBSS XMM6,XMM7
0045eef9 : MOVSS XMM7,dword ptr [EBP + -0x28]
0045eefe : MOVSS dword ptr [EBP + -0x24],XMM6
0045ef03 : MOVSS XMM6,dword ptr [EBP + -0x30]
0045ef08 : MULSS XMM6,dword ptr [EBP + -0x1c]
0045ef0d : SUBSS XMM4,XMM6
0045ef11 : MOVSS XMM6,dword ptr [ECX]
0045ef15 : MULSS XMM7,XMM6
0045ef19 : MOVSS XMM6,dword ptr [ECX + 0x4]
0045ef1e : MOVSS dword ptr [EBP + -0x20],XMM4
0045ef23 : MULSS XMM4,dword ptr [ECX + 0x8]
0045ef28 : ADDSS XMM4,XMM7
0045ef2c : MOVSS XMM7,dword ptr [EBP + -0x24]
0045ef31 : MULSS XMM7,XMM6
0045ef35 : XORPS XMM6,XMM6
0045ef38 : ADDSS XMM4,XMM7
0045ef3c : COMISS XMM6,XMM4
0045ef3f : MOVSS dword ptr [EBP + -0x8],XMM4
0045ef44 : JA 0x0045f0fa
0045ef4a : MOVAPS XMM6,XMM4
0045ef4d : ADDSS XMM6,dword ptr [EBP + -0x10]
0045ef52 : COMISS XMM6,XMM5
0045ef55 : JA 0x0045f0fa
0045ef5b : MOVSS XMM6,dword ptr [EBP + -0x28]
0045ef60 : MOV EAX,dword ptr [EBP + 0x10]
0045ef63 : MULSS XMM6,XMM2
0045ef67 : MOVSS dword ptr [EBP + -0x4],XMM6
0045ef6c : MOVSS XMM7,dword ptr [EBP + -0x4]
0045ef71 : MOVAPS XMM6,XMM3
0045ef74 : MULSS XMM6,dword ptr [EBP + -0x20]
0045ef79 : ADDSS XMM7,XMM6
0045ef7d : MOVSS dword ptr [EBP + -0x4],XMM7
0045ef82 : MOVSS XMM6,dword ptr [EBP + -0x4]
0045ef87 : MOVAPS XMM7,XMM1
0045ef8a : MULSS XMM7,dword ptr [EBP + -0x24]
0045ef8f : ADDSS XMM6,XMM7
0045ef93 : XORPS XMM7,XMM7
0045ef96 : COMISS XMM7,XMM6
0045ef99 : MOVSS dword ptr [EAX],XMM6
0045ef9d : JA 0x0045f0fa
0045efa3 : MOV EAX,dword ptr [EBP + 0x14]
0045efa6 : TEST EAX,EAX
0045efa8 : JZ 0x0045f057
0045efae : MOVSS XMM5,dword ptr [EBP + -0x18]
0045efb3 : MOVAPS XMM4,XMM3
0045efb6 : MOVAPS XMM6,XMM1
0045efb9 : MULSS XMM6,XMM0
0045efbd : MULSS XMM0,XMM2
0045efc1 : MULSS XMM4,XMM5
0045efc5 : SUBSS XMM4,XMM6
0045efc9 : MOVSS dword ptr [EBP + -0x34],XMM4
0045efce : MOVSS XMM4,dword ptr [EBP + -0x1c]
0045efd3 : MULSS XMM3,XMM4
0045efd7 : SUBSS XMM0,XMM3
0045efdb : MULSS XMM1,XMM4
0045efdf : MULSS XMM2,XMM5
0045efe3 : SUBSS XMM1,XMM2
0045efe7 : MOVSS dword ptr [EBP + -0x2c],XMM1
0045efec : MOV ECX,dword ptr [EBP + -0x2c]
0045efef : MOVSS dword ptr [EBP + -0x30],XMM0
0045eff4 : MOVQ XMM0,qword ptr [EBP + -0x34]
0045eff9 : MOVQ qword ptr [EAX],XMM0
0045effd : MOV dword ptr [EAX + 0x8],ECX
0045f000 : MOVSS XMM2,dword ptr [EAX]
0045f004 : MOVSS XMM1,dword ptr [EAX + 0x4]
0045f009 : MOVSS XMM0,dword ptr [EAX + 0x8]
0045f00e : MOVAPS XMM3,XMM2
0045f011 : MULSS XMM3,XMM2
0045f015 : MOVAPS XMM2,XMM1
0045f018 : MULSS XMM2,XMM1
0045f01c : MOVAPS XMM1,XMM0
0045f01f : ADDSS XMM3,XMM2
0045f023 : MULSS XMM1,XMM0
0045f027 : PUSH ECX
0045f028 : ADDSS XMM3,XMM1
0045f02c : MOVSS dword ptr [ESP],XMM3
0045f031 : CALL 0x0040f460
0045f036 : FLDZ
0045f038 : FXCH
0045f03a : ADD ESP,0x4
0045f03d : FCOMIP ST0,ST1
0045f03f : FSTP ST0
0045f041 : JBE 0x0045f04d
0045f043 : MOV EAX,dword ptr [EBP + 0x14]
0045f046 : PUSH EAX
0045f047 : PUSH EAX
0045f048 : CALL 0x004ff722
0045f04d : MOVSS XMM5,dword ptr [EBP + -0xc]
0045f052 : MOVSS XMM4,dword ptr [EBP + -0x8]
0045f057 : MOVSS XMM2,dword ptr [0x00c10fc4]
0045f05f : MOVSS XMM3,dword ptr [ESI + 0x8]
0045f064 : MOVSS XMM6,dword ptr [ESI]
0045f068 : MOVSS XMM7,dword ptr [ESI + 0x4]
0045f06d : MOV EAX,dword ptr [EBP + 0x8]
0045f070 : MOVAPS XMM0,XMM2
0045f073 : DIVSS XMM0,XMM5
0045f077 : MOVSS XMM5,dword ptr [EDI + 0x4]
0045f07c : MOVAPS XMM1,XMM0
0045f07f : MULSS XMM1,dword ptr [EBP + -0x10]
0045f084 : MULSS XMM0,XMM4
0045f088 : MOVSS XMM4,dword ptr [EBX + 0x8]
0045f08d : SUBSS XMM2,XMM1
0045f091 : SUBSS XMM2,XMM0
0045f095 : MULSS XMM3,XMM2
0045f099 : MULSS XMM7,XMM2
0045f09d : MOVSS dword ptr [EBP + -0x14],XMM3
0045f0a2 : MOVSS XMM3,dword ptr [EBX + 0x4]
0045f0a7 : MULSS XMM6,XMM2
0045f0ab : MOVSS XMM2,dword ptr [EBX]
0045f0af : MULSS XMM2,XMM1
0045f0b3 : MULSS XMM3,XMM1
0045f0b7 : MULSS XMM4,XMM1
0045f0bb : MOVSS XMM1,dword ptr [EDI]
0045f0bf : ADDSS XMM4,dword ptr [EBP + -0x14]
0045f0c4 : MULSS XMM1,XMM0
0045f0c8 : MULSS XMM5,XMM0
0045f0cc : MULSS XMM0,dword ptr [EDI + 0x8]
0045f0d1 : ADDSS XMM2,XMM6
0045f0d5 : ADDSS XMM3,XMM7
0045f0d9 : ADDSS XMM1,XMM2
0045f0dd : ADDSS XMM5,XMM3
0045f0e1 : ADDSS XMM0,XMM4
0045f0e5 : MOVSS dword ptr [EAX],XMM1
0045f0e9 : MOVSS dword ptr [EAX + 0x4],XMM5
0045f0ee : MOVSS dword ptr [EAX + 0x8],XMM0
0045f0f3 : MOV AL,0x1
0045f0f5 : POP EBX
0045f0f6 : MOV ESP,EBP
0045f0f8 : POP EBP
0045f0f9 : RET
0045f0fa : XOR AL,AL
0045f0fc : POP EBX
0045f0fd : MOV ESP,EBP
0045f0ff : POP EBP
0045f100 : RET
