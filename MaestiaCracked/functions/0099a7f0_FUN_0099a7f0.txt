PROGRAM  : Maestia.exe
FUNCTION : FUN_0099a7f0
ENTRY    : 0099a7f0
BODY     : [[0099a7f0, 0099a9ba]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099a7f0(void)

{
  int *piVar1;
  char cVar2;
  undefined4 uVar3;
  int in_ECX;
  undefined1 local_dc [4];
  undefined2 uStack_d8;
  undefined4 uStack_c8;
  uint uStack_c4;
  undefined2 uStack_bc;
  undefined4 uStack_ac;
  uint uStack_a8;
  undefined1 local_a4 [4];
  undefined2 local_a0;
  undefined4 local_90;
  uint local_8c;
  undefined4 local_88 [27];
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  int local_c;
  
  local_c = 0xffffffff;
  puStack_10 = &LAB_00b41061;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)local_dc;
  ExceptionList = &local_14;
  local_a0 = 0;
  local_8c = 7;
  local_90 = 0;
  FUN_00405eb0(*(int *)(in_ECX + 8) + 0x58,0,0xffffffff);
  local_c = 0;
  FUN_00412470(local_88);
  local_c._0_1_ = 1;
  cVar2 = FUN_0099bd40(local_a4,local_88);
  if (cVar2 == '\0') {
    FUN_00406460(L"IDS_MSGCLTNET_ERR_NOTFRIENDLIST");
    local_c._0_1_ = 2;
    piVar1 = *(int **)(*DAT_00da9894 + 0x1a8);
    uVar3 = FUN_0081d120(local_dc);
    local_c._0_1_ = 3;
    (**(code **)(*piVar1 + 0x44))(uVar3,3);
    local_c = CONCAT31(local_c._1_3_,2);
    if (7 < uStack_a8) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_a8 = 7;
    uStack_ac = 0;
    uStack_bc = 0;
    local_c = CONCAT31(local_c._1_3_,1);
    if (7 < uStack_c4) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_c4 = 7;
    uStack_c8 = 0;
    uStack_d8 = 0;
    local_c = (uint)local_c._1_3_ << 8;
    FUN_00411330(local_88);
  }
  else {
    FUN_00998510(local_88[0]);
    local_c = (uint)local_c._1_3_ << 8;
    FUN_00411330(local_88);
  }
  local_c = 0xffffffff;
  if (7 < local_8c) {
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  local_a0 = 0;
  local_90 = 0;
  local_8c = 7;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)local_dc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0099a7f0 : PUSH EBP
0099a7f1 : MOV EBP,ESP
0099a7f3 : AND ESP,0xfffffff8
0099a7f6 : PUSH -0x1
0099a7f8 : PUSH 0xb41061
0099a7fd : MOV EAX,FS:[0x0]
0099a803 : PUSH EAX
0099a804 : SUB ESP,0xc8
0099a80a : MOV EAX,[0x00d66fa0]
0099a80f : XOR EAX,ESP
0099a811 : MOV dword ptr [ESP + 0xc0],EAX
0099a818 : PUSH EBX
0099a819 : PUSH ESI
0099a81a : PUSH EDI
0099a81b : MOV EAX,[0x00d66fa0]
0099a820 : XOR EAX,ESP
0099a822 : PUSH EAX
0099a823 : LEA EAX,[ESP + 0xd8]
0099a82a : MOV FS:[0x0],EAX
0099a830 : MOV ESI,ECX
0099a832 : MOV EAX,dword ptr [ESI + 0x8]
0099a835 : PUSH -0x1
0099a837 : XOR EBX,EBX
0099a839 : XOR ECX,ECX
0099a83b : ADD EAX,0x58
0099a83e : PUSH EBX
0099a83f : MOV word ptr [ESP + 0x54],CX
0099a844 : MOV EDI,0x7
0099a849 : PUSH EAX
0099a84a : LEA ECX,[ESP + 0x54]
0099a84e : MOV dword ptr [ESP + 0x6c],EDI
0099a852 : MOV dword ptr [ESP + 0x68],EBX
0099a856 : CALL 0x00405eb0
0099a85b : MOV dword ptr [ESP + 0xe0],EBX
0099a862 : LEA EDX,[ESP + 0x64]
0099a866 : PUSH EDX
0099a867 : CALL 0x00412470
0099a86c : MOV byte ptr [ESP + 0xe0],0x1
0099a874 : LEA EAX,[ESP + 0x64]
0099a878 : PUSH EAX
0099a879 : MOV EAX,dword ptr [ESI + 0x4]
0099a87c : LEA ECX,[ESP + 0x4c]
0099a880 : PUSH ECX
0099a881 : CALL 0x0099bd40
0099a886 : TEST AL,AL
0099a888 : JNZ 0x0099a952
0099a88e : PUSH 0xc87d70
0099a893 : LEA ECX,[ESP + 0x14]
0099a897 : CALL 0x00406460
0099a89c : MOV byte ptr [ESP + 0xe0],0x2
0099a8a4 : MOV EDX,dword ptr [0x00da9894]
0099a8aa : MOV EAX,dword ptr [EDX]
0099a8ac : MOV ESI,dword ptr [EAX + 0x1a8]
0099a8b2 : MOV ECX,dword ptr [0x0172491c]
0099a8b8 : LEA EAX,[ESP + 0x10]
0099a8bc : PUSH EAX
0099a8bd : LEA EDI,[ESP + 0x30]
0099a8c1 : CALL 0x0081d120
0099a8c6 : MOV byte ptr [ESP + 0xe0],0x3
0099a8ce : MOV EDX,dword ptr [ESI]
0099a8d0 : PUSH 0x3
0099a8d2 : PUSH EAX
0099a8d3 : MOV EAX,dword ptr [EDX + 0x44]
0099a8d6 : MOV ECX,ESI
0099a8d8 : CALL EAX
0099a8da : MOV byte ptr [ESP + 0xe0],0x2
0099a8e2 : MOV ESI,0x8
0099a8e7 : CMP dword ptr [ESP + 0x44],ESI
0099a8eb : JC 0x0099a8f6
0099a8ed : MOV ECX,dword ptr [ESP + 0x30]
0099a8f1 : CALL 0x006f04e0
0099a8f6 : MOV EDI,0x7
0099a8fb : XOR ECX,ECX
0099a8fd : MOV dword ptr [ESP + 0x44],EDI
0099a901 : MOV dword ptr [ESP + 0x40],EBX
0099a905 : MOV word ptr [ESP + 0x30],CX
0099a90a : MOV byte ptr [ESP + 0xe0],0x1
0099a912 : CMP dword ptr [ESP + 0x28],ESI
0099a916 : JC 0x0099a921
0099a918 : MOV ECX,dword ptr [ESP + 0x14]
0099a91c : CALL 0x006f04e0
0099a921 : XOR EDX,EDX
0099a923 : MOV dword ptr [ESP + 0x28],EDI
0099a927 : MOV dword ptr [ESP + 0x24],EBX
0099a92b : MOV word ptr [ESP + 0x14],DX
0099a930 : MOV byte ptr [ESP + 0xe0],BL
0099a937 : LEA EAX,[ESP + 0x64]
0099a93b : PUSH EAX
0099a93c : CALL 0x00411330
0099a941 : MOV dword ptr [ESP + 0xe0],0xffffffff
0099a94c : CMP dword ptr [ESP + 0x60],ESI
0099a950 : JMP 0x0099a97d
0099a952 : MOV EDX,dword ptr [ESP + 0x64]
0099a956 : PUSH EDX
0099a957 : CALL 0x00998510
0099a95c : MOV byte ptr [ESP + 0xe0],BL
0099a963 : LEA EAX,[ESP + 0x64]
0099a967 : PUSH EAX
0099a968 : CALL 0x00411330
0099a96d : MOV dword ptr [ESP + 0xe0],0xffffffff
0099a978 : CMP dword ptr [ESP + 0x60],0x8
0099a97d : JC 0x0099a988
0099a97f : MOV ECX,dword ptr [ESP + 0x4c]
0099a983 : CALL 0x006f04e0
0099a988 : XOR ECX,ECX
0099a98a : MOV word ptr [ESP + 0x4c],CX
0099a98f : MOV dword ptr [ESP + 0x5c],EBX
0099a993 : MOV dword ptr [ESP + 0x60],EDI
0099a997 : MOV ECX,dword ptr [ESP + 0xd8]
0099a99e : MOV dword ptr FS:[0x0],ECX
0099a9a5 : POP ECX
0099a9a6 : POP EDI
0099a9a7 : POP ESI
0099a9a8 : POP EBX
0099a9a9 : MOV ECX,dword ptr [ESP + 0xc0]
0099a9b0 : XOR ECX,ESP
0099a9b2 : CALL 0x00633e6b
0099a9b7 : MOV ESP,EBP
0099a9b9 : POP EBP
0099a9ba : RET
