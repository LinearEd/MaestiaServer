PROGRAM  : Maestia.exe
FUNCTION : FUN_008c2170
ENTRY    : 008c2170
BODY     : [[008c2170, 008c2285]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008c2170(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  ushort uVar5;
  uint uVar6;
  int iStack_1c;
  
  iVar2 = *(int *)(param_1 + 0x5c);
  uVar6 = 0;
  if (0 < (int)(*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) & 0xfffffffcU)) {
    do {
      if (uVar6 < (uint)(*(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) >> 2)) {
        iStack_1c = (int)((ulonglong)**(undefined8 **)(*(int *)(iVar2 + 4) + uVar6 * 4) >> 0x20);
        iVar3 = FUN_008413b0(iStack_1c,0);
        iVar2 = *(int *)(param_1 + 0x5c);
        if (iVar3 == 0) {
          for (piVar4 = *(int **)(iVar2 + 4); piVar4 != *(int **)(iVar2 + 8); piVar4 = piVar4 + 1) {
            if (*(int *)(*piVar4 + 4) == iStack_1c) {
              *(undefined2 *)(*piVar4 + 0x10) = 0;
              break;
            }
          }
        }
        else {
          for (piVar4 = *(int **)(iVar2 + 4); piVar4 != *(int **)(iVar2 + 8); piVar4 = piVar4 + 1) {
            iVar1 = *piVar4;
            if (*(int *)(iVar1 + 4) == iStack_1c) {
              uVar5 = (ushort)*(byte *)(iVar3 + 8);
              if (*(ushort *)(iVar1 + 0x12) < (ushort)*(byte *)(iVar3 + 8)) {
                uVar5 = *(ushort *)(iVar1 + 0x12);
              }
              *(ushort *)(iVar1 + 0x10) = uVar5;
              break;
            }
          }
        }
      }
      iVar2 = *(int *)(param_1 + 0x5c);
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < *(int *)(iVar2 + 8) - *(int *)(iVar2 + 4) >> 2);
  }
  FUN_008c13a0();
  FUN_008c1af0(param_1);
  return;
}



============================================================
DISASSEMBLY
============================================================
008c2170 : PUSH EBP
008c2171 : MOV EBP,ESP
008c2173 : AND ESP,0xfffffff8
008c2176 : SUB ESP,0x1c
008c2179 : PUSH EBX
008c217a : PUSH ESI
008c217b : MOV ESI,dword ptr [EBP + 0x8]
008c217e : MOV EAX,dword ptr [ESI + 0x5c]
008c2181 : MOV ECX,dword ptr [EAX + 0x8]
008c2184 : SUB ECX,dword ptr [EAX + 0x4]
008c2187 : XOR EBX,EBX
008c2189 : PUSH EDI
008c218a : TEST ECX,0xfffffffc
008c2190 : JLE 0x008c225a
008c2196 : MOV ECX,dword ptr [EAX + 0x4]
008c2199 : MOV EDX,dword ptr [EAX + 0x8]
008c219c : SUB EDX,ECX
008c219e : SAR EDX,0x2
008c21a1 : CMP EBX,EDX
008c21a3 : JNC 0x008c2245
008c21a9 : MOV EAX,dword ptr [ECX + EBX*0x4]
008c21ac : MOVQ XMM0,qword ptr [EAX]
008c21b0 : MOV ECX,dword ptr [0x01724910]
008c21b6 : MOVQ qword ptr [ESP + 0x10],XMM0
008c21bc : MOVQ XMM0,qword ptr [EAX + 0x8]
008c21c1 : MOV EDI,dword ptr [ESP + 0x14]
008c21c5 : PUSH 0x0
008c21c7 : MOVQ qword ptr [ESP + 0x1c],XMM0
008c21cd : MOVQ XMM0,qword ptr [EAX + 0x10]
008c21d2 : PUSH EDI
008c21d3 : MOVQ qword ptr [ESP + 0x28],XMM0
008c21d9 : CALL 0x008413b0
008c21de : MOV ECX,dword ptr [ESI + 0x5c]
008c21e1 : TEST EAX,EAX
008c21e3 : JNZ 0x008c220a
008c21e5 : MOV EAX,dword ptr [ECX + 0x4]
008c21e8 : MOV ECX,dword ptr [ECX + 0x8]
008c21eb : CMP EAX,ECX
008c21ed : JZ 0x008c2245
008c21ef : NOP
008c21f0 : MOV EDX,dword ptr [EAX]
008c21f2 : CMP dword ptr [EDX + 0x4],EDI
008c21f5 : JZ 0x008c2200
008c21f7 : ADD EAX,0x4
008c21fa : CMP EAX,ECX
008c21fc : JNZ 0x008c21f0
008c21fe : JMP 0x008c2245
008c2200 : MOV EAX,EDX
008c2202 : XOR ECX,ECX
008c2204 : MOV word ptr [EAX + 0x10],CX
008c2208 : JMP 0x008c2245
008c220a : MOVZX DX,byte ptr [EAX + 0x8]
008c220f : MOV EAX,dword ptr [ECX + 0x4]
008c2212 : MOV ECX,dword ptr [ECX + 0x8]
008c2215 : MOVZX EDX,DX
008c2218 : CMP EAX,ECX
008c221a : JZ 0x008c2245
008c221c : LEA ESP,[ESP]
008c2220 : MOV ESI,dword ptr [EAX]
008c2222 : CMP dword ptr [ESI + 0x4],EDI
008c2225 : JZ 0x008c2230
008c2227 : ADD EAX,0x4
008c222a : CMP EAX,ECX
008c222c : JNZ 0x008c2220
008c222e : JMP 0x008c2242
008c2230 : MOV EAX,ESI
008c2232 : MOVZX ECX,word ptr [EAX + 0x12]
008c2236 : CMP CX,DX
008c2239 : JNC 0x008c223e
008c223b : MOVZX EDX,CX
008c223e : MOV word ptr [EAX + 0x10],DX
008c2242 : MOV ESI,dword ptr [EBP + 0x8]
008c2245 : MOV EAX,dword ptr [ESI + 0x5c]
008c2248 : MOV ECX,dword ptr [EAX + 0x8]
008c224b : SUB ECX,dword ptr [EAX + 0x4]
008c224e : INC EBX
008c224f : SAR ECX,0x2
008c2252 : CMP EBX,ECX
008c2254 : JL 0x008c2196
008c225a : MOV EDX,dword ptr [0x0172491c]
008c2260 : MOV EAX,dword ptr [EDX + 0x17c]
008c2266 : MOV ECX,dword ptr [EAX + 0x1ee0]
008c226c : MOV EAX,dword ptr [EAX + 0x1edc]
008c2272 : CALL 0x008c13a0
008c2277 : PUSH ESI
008c2278 : CALL 0x008c1af0
008c227d : POP EDI
008c227e : POP ESI
008c227f : POP EBX
008c2280 : MOV ESP,EBP
008c2282 : POP EBP
008c2283 : RET 0x4
