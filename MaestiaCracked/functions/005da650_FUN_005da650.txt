PROGRAM  : Maestia.exe
FUNCTION : FUN_005da650
ENTRY    : 005da650
BODY     : [[005da650, 005da782]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005da650(int param_1,uint param_2)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  undefined2 uVar4;
  undefined4 *in_ECX;
  int iVar5;
  uint uVar6;
  uint uVar7;
  
  iVar1 = *(int *)(*(int *)(param_1 + 0x24) + (param_2 >> 6) * 4) + (param_2 & 0x3f) * 0x18;
  iVar5 = in_ECX[2];
  if (iVar5 == 0) {
    *in_ECX = *(undefined4 *)(iVar1 + 0x14);
  }
  uVar3 = *(uint *)(iVar1 + 4);
  uVar6 = uVar3 * 2 + iVar5;
  piVar2 = in_ECX + 1;
  if (uVar6 < (uint)in_ECX[2]) {
    uVar7 = uVar6;
    if (uVar6 < (uint)in_ECX[3] >> 1) {
LAB_005da6bb:
      FUN_005da0e0(piVar2,uVar7);
    }
  }
  else if ((uint)in_ECX[3] <= uVar6) {
    uVar7 = (uVar6 >> 2) + uVar6;
    goto LAB_005da6bb;
  }
  in_ECX[2] = uVar6;
  uVar6 = 0;
  if (uVar3 != 0) {
    iVar5 = iVar5 * 2;
    do {
      uVar4 = FUN_0063b380();
      *(undefined2 *)(*piVar2 + iVar5) = uVar4;
      uVar4 = FUN_0063b380();
      *(undefined2 *)(*piVar2 + 2 + iVar5) = uVar4;
      uVar6 = uVar6 + 1;
      iVar5 = iVar5 + 4;
    } while (uVar6 < uVar3);
  }
  uVar6 = in_ECX[7] + 1;
  if (uVar6 < (uint)in_ECX[7]) {
    uVar7 = uVar6;
    if ((uint)in_ECX[8] >> 1 <= uVar6) goto LAB_005da766;
  }
  else {
    if (uVar6 < (uint)in_ECX[8]) goto LAB_005da766;
    uVar7 = (uVar6 >> 2) + uVar6;
  }
  FUN_005b5ef0(in_ECX + 6,uVar7);
LAB_005da766:
  in_ECX[7] = uVar6;
  piVar2 = (int *)(in_ECX[6] + -4 + uVar6 * 4);
  if (piVar2 != (int *)0x0) {
    *piVar2 = uVar3 * 2;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005da650 : SUB ESP,0x8
005da653 : MOV EAX,dword ptr [ESP + 0x10]
005da657 : MOV EDX,dword ptr [ESP + 0xc]
005da65b : MOV EDX,dword ptr [EDX + 0x24]
005da65e : PUSH EBX
005da65f : PUSH EBP
005da660 : MOV EBP,ECX
005da662 : MOV ECX,EAX
005da664 : AND EAX,0x3f
005da667 : SHR ECX,0x6
005da66a : MOV ECX,dword ptr [EDX + ECX*0x4]
005da66d : LEA EAX,[EAX + EAX*0x2]
005da670 : PUSH ESI
005da671 : LEA ESI,[ECX + EAX*0x8]
005da674 : MOV EAX,dword ptr [EBP + 0x8]
005da677 : PUSH EDI
005da678 : MOV dword ptr [ESP + 0x10],EBP
005da67c : MOV dword ptr [ESP + 0x20],EAX
005da680 : TEST EAX,EAX
005da682 : JNZ 0x005da68a
005da684 : MOV EDX,dword ptr [ESI + 0x14]
005da687 : MOV dword ptr [EBP],EDX
005da68a : MOV ECX,dword ptr [ESI + 0x4]
005da68d : LEA EDI,[ECX + ECX*0x1]
005da690 : MOV dword ptr [ESP + 0x14],EDI
005da694 : ADD EDI,EAX
005da696 : LEA EBX,[EBP + 0x4]
005da699 : MOV dword ptr [ESP + 0x1c],ECX
005da69d : CMP EDI,dword ptr [EBX + 0x4]
005da6a0 : JNC 0x005da6ae
005da6a2 : MOV ECX,dword ptr [EBX + 0x8]
005da6a5 : SHR ECX,0x1
005da6a7 : CMP EDI,ECX
005da6a9 : JNC 0x005da6c7
005da6ab : PUSH EDI
005da6ac : JMP 0x005da6bb
005da6ae : CMP EDI,dword ptr [EBX + 0x8]
005da6b1 : JC 0x005da6c7
005da6b3 : MOV EDX,EDI
005da6b5 : SHR EDX,0x2
005da6b8 : ADD EDX,EDI
005da6ba : PUSH EDX
005da6bb : PUSH EBX
005da6bc : MOV ECX,EBX
005da6be : CALL 0x005da0e0
005da6c3 : MOV EAX,dword ptr [ESP + 0x20]
005da6c7 : MOV dword ptr [EBX + 0x4],EDI
005da6ca : XOR EDI,EDI
005da6cc : CMP dword ptr [ESP + 0x1c],EDI
005da6d0 : JBE 0x005da739
005da6d2 : FLD float ptr [ESP + 0x24]
005da6d6 : LEA EBP,[EAX + EAX*0x1]
005da6d9 : MOV EAX,dword ptr [ESI + 0x8]
005da6dc : MOV EDX,dword ptr [ESI]
005da6de : MOV EDX,dword ptr [EDX + 0x14]
005da6e1 : ADD EAX,EDI
005da6e3 : MOV ECX,EAX
005da6e5 : SHR ECX,0x8
005da6e8 : MOV ECX,dword ptr [EDX + ECX*0x4]
005da6eb : AND EAX,0xff
005da6f0 : FLD float ptr [ECX + EAX*0x8]
005da6f3 : FMUL ST1
005da6f5 : CALL 0x0063b380
005da6fa : MOV EDX,dword ptr [EBX]
005da6fc : MOV word ptr [EDX + EBP*0x1],AX
005da700 : MOV EAX,dword ptr [ESI + 0x8]
005da703 : MOV EDX,dword ptr [ESI]
005da705 : MOV EDX,dword ptr [EDX + 0x14]
005da708 : ADD EAX,EDI
005da70a : MOV ECX,EAX
005da70c : SHR ECX,0x8
005da70f : MOV ECX,dword ptr [EDX + ECX*0x4]
005da712 : AND EAX,0xff
005da717 : FLD float ptr [ECX + EAX*0x8 + 0x4]
005da71b : FMUL ST1
005da71d : CALL 0x0063b380
005da722 : MOV EDX,dword ptr [EBX]
005da724 : MOV word ptr [EDX + EBP*0x1 + 0x2],AX
005da729 : INC EDI
005da72a : ADD EBP,0x4
005da72d : CMP EDI,dword ptr [ESP + 0x1c]
005da731 : JC 0x005da6d9
005da733 : MOV EBP,dword ptr [ESP + 0x10]
005da737 : FSTP ST0
005da739 : MOV ESI,dword ptr [EBP + 0x1c]
005da73c : LEA EDI,[EBP + 0x18]
005da73f : INC ESI
005da740 : CMP ESI,dword ptr [EDI + 0x4]
005da743 : JNC 0x005da751
005da745 : MOV EAX,dword ptr [EDI + 0x8]
005da748 : SHR EAX,0x1
005da74a : CMP ESI,EAX
005da74c : JNC 0x005da766
005da74e : PUSH ESI
005da74f : JMP 0x005da75e
005da751 : CMP ESI,dword ptr [EDI + 0x8]
005da754 : JC 0x005da766
005da756 : MOV ECX,ESI
005da758 : SHR ECX,0x2
005da75b : ADD ECX,ESI
005da75d : PUSH ECX
005da75e : PUSH EDI
005da75f : MOV ECX,EDI
005da761 : CALL 0x005b5ef0
005da766 : MOV EDX,dword ptr [EDI]
005da768 : MOV dword ptr [EDI + 0x4],ESI
005da76b : LEA ESI,[EDX + ESI*0x4 + -0x4]
005da76f : TEST ESI,ESI
005da771 : JZ 0x005da779
005da773 : MOV EAX,dword ptr [ESP + 0x14]
005da777 : MOV dword ptr [ESI],EAX
005da779 : POP EDI
005da77a : POP ESI
005da77b : POP EBP
005da77c : POP EBX
005da77d : ADD ESP,0x8
005da780 : RET 0xc
