PROGRAM  : Maestia.exe
FUNCTION : FUN_00525850
ENTRY    : 00525850
BODY     : [[00525850, 005258e6]]

============================================================
DECOMPILED C CODE
============================================================

int * FUN_00525850(int *param_1)

{
  LONG LVar1;
  int iVar2;
  undefined4 *in_ECX;
  uint *puVar3;
  uint local_8;
  uint local_4;
  
  puVar3 = &local_8;
  FUN_0051c480(*(undefined4 *)*in_ECX);
  FUN_0051c810(puVar3);
  LVar1 = InterlockedExchangeAdd((LONG *)((local_4 & 0xfffffffc) + 4),-1);
  if (LVar1 == 1) {
    FUN_00515cf0(local_4 & 0xfffffffc);
  }
  iVar2 = FUN_00525450((local_8 & 0xfffffffc) + 8,*(uint *)(local_8 & 0xfffffffc) & 0x7fffffff);
  *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + 1;
  *param_1 = iVar2;
  LVar1 = InterlockedExchangeAdd((LONG *)((local_8 & 0xfffffffc) + 4),-1);
  if (LVar1 == 1) {
    FUN_00515cf0(local_8 & 0xfffffffc);
  }
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00525850 : SUB ESP,0x8
00525853 : PUSH EBX
00525854 : PUSH ESI
00525855 : PUSH EDI
00525856 : MOV EDI,ECX
00525858 : MOV ECX,dword ptr [EDI]
0052585a : MOV EDX,dword ptr [ECX]
0052585c : LEA EAX,[ESP + 0xc]
00525860 : PUSH EAX
00525861 : PUSH EDX
00525862 : LEA ECX,[ESP + 0x18]
00525866 : CALL 0x0051c480
0052586b : MOV ECX,EAX
0052586d : CALL 0x0051c810
00525872 : MOV ESI,dword ptr [ESP + 0x10]
00525876 : MOV EBX,dword ptr [0x00b851cc]
0052587c : AND ESI,0xfffffffc
0052587f : PUSH -0x1
00525881 : LEA EAX,[ESI + 0x4]
00525884 : PUSH EAX
00525885 : CALL EBX
00525887 : SUB EAX,0x1
0052588a : JNZ 0x00525892
0052588c : PUSH ESI
0052588d : CALL 0x00515cf0
00525892 : MOV EAX,dword ptr [ESP + 0xc]
00525896 : MOV ECX,dword ptr [EDI]
00525898 : MOV EDX,EAX
0052589a : AND EAX,0xfffffffc
0052589d : MOV EAX,dword ptr [EAX]
0052589f : AND EDX,0xfffffffc
005258a2 : AND EAX,0x7fffffff
005258a7 : AND ECX,0xfffffc00
005258ad : MOV ECX,dword ptr [ECX]
005258af : PUSH EAX
005258b0 : ADD EDX,0x8
005258b3 : PUSH EDX
005258b4 : CALL 0x00525450
005258b9 : INC dword ptr [EAX + 0x8]
005258bc : MOV ESI,dword ptr [ESP + 0xc]
005258c0 : MOV EDI,dword ptr [ESP + 0x18]
005258c4 : AND ESI,0xfffffffc
005258c7 : PUSH -0x1
005258c9 : LEA EDX,[ESI + 0x4]
005258cc : PUSH EDX
005258cd : MOV dword ptr [EDI],EAX
005258cf : CALL EBX
005258d1 : SUB EAX,0x1
005258d4 : JNZ 0x005258dc
005258d6 : PUSH ESI
005258d7 : CALL 0x00515cf0
005258dc : MOV EAX,EDI
005258de : POP EDI
005258df : POP ESI
005258e0 : POP EBX
005258e1 : ADD ESP,0x8
005258e4 : RET 0x4
