PROGRAM  : Maestia.exe
FUNCTION : FUN_00ac8440
ENTRY    : 00ac8440
BODY     : [[00ac8440, 00ac8522] [00ac852c, 00ac8548]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00ac8440(void)

{
  uint uVar1;
  int iVar2;
  longlong lVar3;
  uint uVar4;
  void *pvVar5;
  int unaff_ESI;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  pvVar5 = ExceptionList;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b3ba6d;
  local_10 = ExceptionList;
  uVar4 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  iVar2 = *(int *)(unaff_ESI + 0x220);
  uVar1 = iVar2 + 4;
  *(uint *)(unaff_ESI + 0x220) = uVar1;
  if (*(uint *)(unaff_ESI + 0x224) < uVar1) {
    uVar1 = *(uint *)(unaff_ESI + 0x224) * 2;
    lVar3 = (ulonglong)uVar1 * 0x18;
    pvVar5 = (void *)FUN_006f0760((uint)lVar3 | -(uint)((int)((ulonglong)lVar3 >> 0x20) != 0),"",0,
                                  (DAT_01725270 >> 3 & 1) == 0,uVar4);
    local_8 = 0;
    if (pvVar5 == (void *)0x0) {
      pvVar5 = (void *)0x0;
    }
    else {
      FUN_0040efe0(pvVar5,0x18,uVar1,&LAB_004bd000);
    }
    local_8 = 0xffffffff;
    _memcpy(pvVar5,*(void **)(unaff_ESI + 0x21c),*(int *)(unaff_ESI + 0x224) * 0x18);
    *(int *)(unaff_ESI + 0x224) = *(int *)(unaff_ESI + 0x224) * 2;
                    /* WARNING: Subroutine does not return */
    FUN_006f04e0();
  }
  ExceptionList = pvVar5;
  return *(int *)(unaff_ESI + 0x21c) + iVar2 * 0x18;
}



============================================================
DISASSEMBLY
============================================================
00ac8440 : PUSH EBP
00ac8441 : MOV EBP,ESP
00ac8443 : PUSH -0x1
00ac8445 : PUSH 0xb3ba6d
00ac844a : MOV EAX,FS:[0x0]
00ac8450 : PUSH EAX
00ac8451 : SUB ESP,0x8
00ac8454 : PUSH EBX
00ac8455 : PUSH EDI
00ac8456 : MOV EAX,[0x00d66fa0]
00ac845b : XOR EAX,EBP
00ac845d : PUSH EAX
00ac845e : LEA EAX,[EBP + -0xc]
00ac8461 : MOV FS:[0x0],EAX
00ac8467 : MOV ECX,dword ptr [ESI + 0x220]
00ac846d : MOV EAX,dword ptr [ESI + 0x224]
00ac8473 : LEA EDX,[ECX + 0x4]
00ac8476 : MOV dword ptr [EBP + -0x10],ECX
00ac8479 : MOV dword ptr [ESI + 0x220],EDX
00ac847f : CMP EDX,EAX
00ac8481 : JBE 0x00ac852c
00ac8487 : LEA EBX,[EAX + EAX*0x1]
00ac848a : XOR ECX,ECX
00ac848c : MOV EAX,EBX
00ac848e : MOV EDX,0x18
00ac8493 : MUL EDX
00ac8495 : SETO CL
00ac8498 : MOV EDX,0x0
00ac849d : NEG ECX
00ac849f : OR EAX,ECX
00ac84a1 : MOV ECX,dword ptr [0x01725270]
00ac84a7 : SHR ECX,0x3
00ac84aa : AND ECX,0x1
00ac84ad : SETZ DL
00ac84b0 : PUSH EDX
00ac84b1 : PUSH 0x0
00ac84b3 : PUSH 0xbf1a4b
00ac84b8 : PUSH EAX
00ac84b9 : CALL 0x006f0760
00ac84be : MOV EDI,EAX
00ac84c0 : ADD ESP,0x10
00ac84c3 : MOV dword ptr [EBP + -0x14],EDI
00ac84c6 : MOV dword ptr [EBP + -0x4],0x0
00ac84cd : TEST EDI,EDI
00ac84cf : JZ 0x00ac84e1
00ac84d1 : PUSH 0x4bd000
00ac84d6 : PUSH EBX
00ac84d7 : PUSH 0x18
00ac84d9 : PUSH EDI
00ac84da : CALL 0x0040efe0
00ac84df : JMP 0x00ac84e3
00ac84e1 : XOR EDI,EDI
00ac84e3 : MOV dword ptr [EBP + -0x4],0xffffffff
00ac84ea : MOV EAX,dword ptr [ESI + 0x224]
00ac84f0 : MOV ECX,dword ptr [ESI + 0x21c]
00ac84f6 : LEA EAX,[EAX + EAX*0x2]
00ac84f9 : ADD EAX,EAX
00ac84fb : ADD EAX,EAX
00ac84fd : ADD EAX,EAX
00ac84ff : PUSH EAX
00ac8500 : PUSH ECX
00ac8501 : PUSH EDI
00ac8502 : CALL 0x0063ae40
00ac8507 : MOV EDX,dword ptr [ESI + 0x224]
00ac850d : MOV ECX,dword ptr [ESI + 0x21c]
00ac8513 : ADD EDX,EDX
00ac8515 : ADD ESP,0xc
00ac8518 : MOV dword ptr [ESI + 0x224],EDX
00ac851e : CALL 0x006f04e0
00ac852c : LEA EAX,[ECX + ECX*0x2]
00ac852f : MOV ECX,dword ptr [ESI + 0x21c]
00ac8535 : LEA EAX,[ECX + EAX*0x8]
00ac8538 : MOV ECX,dword ptr [EBP + -0xc]
00ac853b : MOV dword ptr FS:[0x0],ECX
00ac8542 : POP ECX
00ac8543 : POP EDI
00ac8544 : POP EBX
00ac8545 : MOV ESP,EBP
00ac8547 : POP EBP
00ac8548 : RET
