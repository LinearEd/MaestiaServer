PROGRAM  : Maestia.exe
FUNCTION : FUN_00437eb0
ENTRY    : 00437eb0
BODY     : [[00437eb0, 00437fe9]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_00437eb0(int param_1,int param_2,uint param_3,undefined4 param_4,undefined4 param_5)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  iVar3 = param_2;
  iVar1 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b7b5c9;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (param_3 < (uint)(*(int *)(param_1 + 0x10) - *(int *)(param_1 + 0xc) >> 4)) {
    piVar4 = (int *)FUN_00435ac0(&param_1);
    if ((((*(int *)(iVar1 + 0x1c) == *piVar4) || (iVar2 = *(int *)(*piVar4 + 0x28), iVar2 < 0)) ||
        ((uint)(*(int *)(iVar1 + 0x10) - *(int *)(iVar1 + 0xc) >> 4) <= param_3)) ||
       (iVar1 = param_3 * 0x10 + *(int *)(iVar1 + 0xc),
       (*(int *)(iVar1 + 8) - *(int *)(iVar1 + 4)) / 0x1c <= iVar2)) {
      *(undefined4 *)(iVar3 + 0x18) = 0xf;
      *(undefined4 *)(iVar3 + 0x14) = 0;
      *(undefined1 *)(iVar3 + 4) = 0;
      FUN_00405110(param_5,0,0xffffffff);
    }
    else {
      iVar1 = *(int *)(iVar1 + 4) + iVar2 * 0x1c;
      if (*(int *)(iVar1 + 0x14) == 0) {
        FUN_00405200(param_5);
      }
      else {
        FUN_004347b0(iVar3,iVar1);
      }
    }
  }
  else {
    *(undefined4 *)(param_2 + 0x18) = 0xf;
    *(undefined4 *)(param_2 + 0x14) = 0;
    *(undefined1 *)(param_2 + 4) = 0;
    FUN_00405110(param_5,0,0xffffffff);
  }
  ExceptionList = local_10;
  return iVar3;
}



============================================================
DISASSEMBLY
============================================================
00437eb0 : PUSH EBP
00437eb1 : MOV EBP,ESP
00437eb3 : PUSH -0x1
00437eb5 : PUSH 0xb7b5c9
00437eba : MOV EAX,FS:[0x0]
00437ec0 : PUSH EAX
00437ec1 : PUSH ECX
00437ec2 : PUSH EBX
00437ec3 : PUSH ESI
00437ec4 : PUSH EDI
00437ec5 : MOV EAX,[0x00d66fa0]
00437eca : XOR EAX,EBP
00437ecc : PUSH EAX
00437ecd : LEA EAX,[EBP + -0xc]
00437ed0 : MOV FS:[0x0],EAX
00437ed6 : MOV EDI,dword ptr [EBP + 0xc]
00437ed9 : MOV EBX,dword ptr [EBP + 0x8]
00437edc : XOR ESI,ESI
00437ede : MOV dword ptr [EBP + -0x10],ESI
00437ee1 : MOV EAX,dword ptr [EBX + 0x10]
00437ee4 : SUB EAX,dword ptr [EBX + 0xc]
00437ee7 : SAR EAX,0x4
00437eea : CMP dword ptr [EBP + 0x10],EAX
00437eed : JC 0x00437f13
00437eef : MOV ECX,dword ptr [EBP + 0x18]
00437ef2 : PUSH -0x1
00437ef4 : PUSH ESI
00437ef5 : PUSH ECX
00437ef6 : MOV dword ptr [EDI + 0x18],0xf
00437efd : MOV dword ptr [EDI + 0x14],ESI
00437f00 : MOV ECX,EDI
00437f02 : MOV byte ptr [EDI + 0x4],0x0
00437f06 : CALL 0x00405110
00437f0b : MOV dword ptr [EBP + -0x4],ESI
00437f0e : JMP 0x00437fcd
00437f13 : MOV EAX,dword ptr [EBP + 0x14]
00437f16 : LEA EDX,[EBP + 0x8]
00437f19 : PUSH EDX
00437f1a : LEA ESI,[EBX + 0x18]
00437f1d : CALL 0x00435ac0
00437f22 : MOV EAX,dword ptr [EAX]
00437f24 : CMP dword ptr [EBX + 0x1c],EAX
00437f27 : JZ 0x00437f30
00437f29 : MOV ESI,dword ptr [EAX + 0x28]
00437f2c : TEST ESI,ESI
00437f2e : JGE 0x00437f3a
00437f30 : MOV EAX,dword ptr [EBP + 0x18]
00437f33 : PUSH -0x1
00437f35 : PUSH 0x0
00437f37 : PUSH EAX
00437f38 : JMP 0x00437fad
00437f3a : MOV ECX,dword ptr [EBX + 0x10]
00437f3d : SUB ECX,dword ptr [EBX + 0xc]
00437f40 : MOV EAX,dword ptr [EBP + 0x10]
00437f43 : SAR ECX,0x4
00437f46 : CMP EAX,ECX
00437f48 : JNC 0x00437fa5
00437f4a : MOV ECX,dword ptr [EBX + 0xc]
00437f4d : SHL EAX,0x4
00437f50 : LEA EBX,[EAX + ECX*0x1]
00437f53 : MOV ECX,dword ptr [EBX + 0x8]
00437f56 : SUB ECX,dword ptr [EBX + 0x4]
00437f59 : MOV EAX,0x92492493
00437f5e : IMUL ECX
00437f60 : ADD EDX,ECX
00437f62 : SAR EDX,0x4
00437f65 : MOV EAX,EDX
00437f67 : SHR EAX,0x1f
00437f6a : ADD EAX,EDX
00437f6c : CMP ESI,EAX
00437f6e : JGE 0x00437fa5
00437f70 : MOV EAX,dword ptr [EBX + 0x4]
00437f73 : LEA EDX,[ESI*0x8 + 0x0]
00437f7a : SUB EDX,ESI
00437f7c : LEA EAX,[EAX + EDX*0x4]
00437f7f : XOR ESI,ESI
00437f81 : CMP dword ptr [EAX + 0x14],ESI
00437f84 : JNZ 0x00437f96
00437f86 : MOV ECX,dword ptr [EBP + 0x18]
00437f89 : PUSH ECX
00437f8a : MOV ECX,EDI
00437f8c : CALL 0x00405200
00437f91 : MOV dword ptr [EBP + -0x4],ESI
00437f94 : JMP 0x00437fcd
00437f96 : PUSH EAX
00437f97 : PUSH EDI
00437f98 : CALL 0x004347b0
00437f9d : ADD ESP,0x8
00437fa0 : MOV dword ptr [EBP + -0x4],ESI
00437fa3 : JMP 0x00437fcd
00437fa5 : MOV EDX,dword ptr [EBP + 0x18]
00437fa8 : PUSH -0x1
00437faa : PUSH 0x0
00437fac : PUSH EDX
00437fad : MOV dword ptr [EDI + 0x18],0xf
00437fb4 : MOV dword ptr [EDI + 0x14],0x0
00437fbb : MOV ECX,EDI
00437fbd : MOV byte ptr [EDI + 0x4],0x0
00437fc1 : CALL 0x00405110
00437fc6 : MOV dword ptr [EBP + -0x4],0x0
00437fcd : MOV dword ptr [EBP + -0x10],0x1
00437fd4 : MOV EAX,EDI
00437fd6 : MOV ECX,dword ptr [EBP + -0xc]
00437fd9 : MOV dword ptr FS:[0x0],ECX
00437fe0 : POP ECX
00437fe1 : POP EDI
00437fe2 : POP ESI
00437fe3 : POP EBX
00437fe4 : MOV ESP,EBP
00437fe6 : POP EBP
00437fe7 : RET 0x14
