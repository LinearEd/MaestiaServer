PROGRAM  : Maestia.exe
FUNCTION : FUN_005be750
ENTRY    : 005be750
BODY     : [[005be750, 005be92e]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005be750(int param_1)

{
  undefined1 *puVar1;
  undefined1 uVar2;
  int *piVar3;
  char *pcVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  float10 fVar8;
  undefined4 uVar9;
  undefined8 uStack_38;
  int iStack_30;
  int iStack_2c;
  double dStack_28;
  double dStack_20;
  GMatrix2D aGStack_18 [24];
  
  puVar1 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar1 = 0;
  piVar3 = (int *)FUN_005296a0();
  uVar7 = 0;
  uVar2 = 1;
  if (0 < *(int *)(param_1 + 0x1c)) {
    pcVar4 = (char *)FUN_00526260(0);
    if (*pcVar4 == '\x02') {
      uVar9 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(0);
      uVar2 = FUN_00526120(uVar9);
      if (1 < *(int *)(param_1 + 0x1c)) {
        uVar9 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(1);
        fVar8 = (float10)FUN_00527730(uVar9);
        uStack_38 = (longlong)ROUND(fVar8);
        uVar7 = (uint)uStack_38;
      }
    }
    else {
      iVar6 = *(int *)(param_1 + 0x1c);
      if (iVar6 == 1) {
        uVar9 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(0);
        fVar8 = (float10)FUN_00527730(uVar9);
        uStack_38 = (longlong)ROUND(fVar8);
        uVar7 = (uint)uStack_38;
      }
      else if (1 < iVar6) {
        if (2 < iVar6) {
          uVar9 = *(undefined4 *)(param_1 + 0x18);
          FUN_00526260(2);
          uVar2 = FUN_00526120(uVar9);
        }
        uVar9 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(0);
        fVar8 = (float10)FUN_00527730(uVar9);
        dStack_28 = (double)fVar8;
        uVar9 = *(undefined4 *)(param_1 + 0x18);
        FUN_00526260(1);
        fVar8 = (float10)FUN_00527730(uVar9);
        dStack_20 = (double)fVar8;
        if (piVar3[0x1a] == 0) {
          return;
        }
        GMatrix2D::SetIdentity(aGStack_18);
        FUN_0051cdf0(aGStack_18);
        uStack_38 = CONCAT44((float)((float10)20.0 * (float10)dStack_20),
                             (float)((float10)dStack_28 * (float10)20.0));
        GMatrix2D::Transform(aGStack_18,(GPoint<float> *)&iStack_30,(GPoint<float> *)&uStack_38);
        goto LAB_005be8de;
      }
    }
  }
  uVar5 = (**(code **)(*piVar3 + 0xd0))();
  if (uVar5 <= uVar7) {
    return;
  }
  if (uVar7 < 4) {
    piVar3 = piVar3 + uVar7 * 9 + 0x251;
  }
  else {
    piVar3 = (int *)0x0;
  }
  iStack_30 = piVar3[5];
  iStack_2c = piVar3[6];
  uStack_38 = *(longlong *)(piVar3 + 5);
LAB_005be8de:
  iVar6 = FUN_0056cfd0(&iStack_30,uVar2,0);
  if (iVar6 != 0) {
    FUN_00526c80(iVar6);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
005be750 : SUB ESP,0x3c
005be753 : PUSH EBP
005be754 : PUSH ESI
005be755 : MOV ESI,dword ptr [ESP + 0x48]
005be759 : PUSH EDI
005be75a : MOV EDI,dword ptr [ESI + 0x4]
005be75d : MOV ECX,EDI
005be75f : CALL 0x00526400
005be764 : MOV byte ptr [EDI],0x0
005be767 : MOV ECX,dword ptr [ESI + 0x18]
005be76a : CALL 0x005296a0
005be76f : XOR EDI,EDI
005be771 : CMP dword ptr [ESI + 0x1c],0x1
005be775 : MOV EBP,EAX
005be777 : MOV byte ptr [ESP + 0xc],0x1
005be77c : JL 0x005be7de
005be77e : PUSH EDI
005be77f : MOV ECX,ESI
005be781 : CALL 0x00526260
005be786 : CMP byte ptr [EAX],0x2
005be789 : JNZ 0x005be803
005be78b : MOV EAX,dword ptr [ESI + 0x18]
005be78e : PUSH EAX
005be78f : PUSH EDI
005be790 : MOV ECX,ESI
005be792 : CALL 0x00526260
005be797 : MOV ECX,EAX
005be799 : CALL 0x00526120
005be79e : CMP dword ptr [ESI + 0x1c],0x2
005be7a2 : MOV byte ptr [ESP + 0xc],AL
005be7a6 : JL 0x005be7de
005be7a8 : MOV ECX,dword ptr [ESI + 0x18]
005be7ab : PUSH ECX
005be7ac : PUSH 0x1
005be7ae : MOV ECX,ESI
005be7b0 : CALL 0x00526260
005be7b5 : MOV ECX,EAX
005be7b7 : CALL 0x00527730
005be7bc : FNSTCW word ptr [ESP + 0x4c]
005be7c0 : MOVZX EAX,word ptr [ESP + 0x4c]
005be7c5 : OR EAX,0xc00
005be7ca : MOV dword ptr [ESP + 0x10],EAX
005be7ce : FLDCW word ptr [ESP + 0x10]
005be7d2 : FISTP qword ptr [ESP + 0x10]
005be7d6 : MOV EDI,dword ptr [ESP + 0x10]
005be7da : FLDCW word ptr [ESP + 0x4c]
005be7de : MOV EDX,dword ptr [EBP]
005be7e1 : MOV EAX,dword ptr [EDX + 0xd0]
005be7e7 : MOV ECX,EBP
005be7e9 : CALL EAX
005be7eb : CMP EDI,EAX
005be7ed : JNC 0x005be8fe
005be7f3 : CMP EDI,0x4
005be7f6 : JC 0x005be905
005be7fc : XOR EAX,EAX
005be7fe : JMP 0x005be90f
005be803 : MOV EAX,dword ptr [ESI + 0x1c]
005be806 : CMP EAX,0x1
005be809 : JNZ 0x005be843
005be80b : MOV EDX,dword ptr [ESI + 0x18]
005be80e : PUSH EDX
005be80f : PUSH 0x0
005be811 : MOV ECX,ESI
005be813 : CALL 0x00526260
005be818 : MOV ECX,EAX
005be81a : CALL 0x00527730
005be81f : FNSTCW word ptr [ESP + 0x4c]
005be823 : MOVZX EAX,word ptr [ESP + 0x4c]
005be828 : OR EAX,0xc00
005be82d : MOV dword ptr [ESP + 0x10],EAX
005be831 : FLDCW word ptr [ESP + 0x10]
005be835 : FISTP qword ptr [ESP + 0x10]
005be839 : MOV EDI,dword ptr [ESP + 0x10]
005be83d : FLDCW word ptr [ESP + 0x4c]
005be841 : JMP 0x005be7de
005be843 : CMP EAX,0x2
005be846 : JL 0x005be7de
005be848 : CMP EAX,0x3
005be84b : JL 0x005be865
005be84d : MOV EAX,dword ptr [ESI + 0x18]
005be850 : PUSH EAX
005be851 : PUSH 0x2
005be853 : MOV ECX,ESI
005be855 : CALL 0x00526260
005be85a : MOV ECX,EAX
005be85c : CALL 0x00526120
005be861 : MOV byte ptr [ESP + 0xc],AL
005be865 : MOV EDX,dword ptr [ESI + 0x18]
005be868 : PUSH EDX
005be869 : PUSH 0x0
005be86b : MOV ECX,ESI
005be86d : CALL 0x00526260
005be872 : MOV ECX,EAX
005be874 : CALL 0x00527730
005be879 : FSTP double ptr [ESP + 0x20]
005be87d : MOV EAX,dword ptr [ESI + 0x18]
005be880 : PUSH EAX
005be881 : PUSH 0x1
005be883 : MOV ECX,ESI
005be885 : CALL 0x00526260
005be88a : MOV ECX,EAX
005be88c : CALL 0x00527730
005be891 : FSTP double ptr [ESP + 0x28]
005be895 : MOV EDI,dword ptr [EBP + 0x68]
005be898 : TEST EDI,EDI
005be89a : JZ 0x005be8fe
005be89c : LEA ECX,[ESP + 0x30]
005be8a0 : CALL 0x00522b80
005be8a5 : LEA ECX,[ESP + 0x30]
005be8a9 : PUSH ECX
005be8aa : MOV ECX,EDI
005be8ac : CALL 0x0051cdf0
005be8b1 : FLD double ptr [ESP + 0x20]
005be8b5 : FLD double ptr [0x00b86058]
005be8bb : LEA EDX,[ESP + 0x10]
005be8bf : FMUL ST1
005be8c1 : PUSH EDX
005be8c2 : FXCH
005be8c4 : LEA EAX,[ESP + 0x1c]
005be8c8 : PUSH EAX
005be8c9 : FSTP float ptr [ESP + 0x18]
005be8cd : LEA ECX,[ESP + 0x38]
005be8d1 : FMUL double ptr [ESP + 0x30]
005be8d5 : FSTP float ptr [ESP + 0x1c]
005be8d9 : CALL 0x00522c50
005be8de : MOV ECX,dword ptr [ESP + 0xc]
005be8e2 : PUSH 0x0
005be8e4 : PUSH ECX
005be8e5 : LEA EDX,[ESP + 0x20]
005be8e9 : PUSH EDX
005be8ea : MOV ECX,EBP
005be8ec : CALL 0x0056cfd0
005be8f1 : TEST EAX,EAX
005be8f3 : JZ 0x005be8fe
005be8f5 : MOV ECX,dword ptr [ESI + 0x4]
005be8f8 : PUSH EAX
005be8f9 : CALL 0x00526c80
005be8fe : POP EDI
005be8ff : POP ESI
005be900 : POP EBP
005be901 : ADD ESP,0x3c
005be904 : RET
005be905 : LEA ECX,[EDI + EDI*0x8]
005be908 : LEA EAX,[EBP + ECX*0x4 + 0x944]
005be90f : FLD float ptr [EAX + 0x14]
005be912 : FSTP float ptr [ESP + 0x10]
005be916 : FLD float ptr [EAX + 0x18]
005be919 : FSTP float ptr [ESP + 0x14]
005be91d : FLD float ptr [ESP + 0x10]
005be921 : FSTP float ptr [ESP + 0x18]
005be925 : FLD float ptr [ESP + 0x14]
005be929 : FSTP float ptr [ESP + 0x1c]
005be92d : JMP 0x005be8de
