PROGRAM  : Maestia.exe
FUNCTION : FUN_0055f7a0
ENTRY    : 0055f7a0
BODY     : [[0055f7a0, 0055f7f9] [0055f800, 0055f88b]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0055f7a0(void)

{
  int *piVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  char cVar5;
  uint uVar6;
  undefined4 *in_ECX;
  uint uVar7;
  uint *puVar8;
  uint local_c;
  
  piVar1 = (int *)*in_ECX;
  iVar2 = *piVar1;
  uVar3 = *(undefined4 *)(iVar2 + 0x10 + in_ECX[1] * 0xc);
  uVar6 = FUN_0055ee60(uVar3);
  uVar6 = uVar6 & *(uint *)(iVar2 + 4);
  puVar8 = (uint *)(iVar2 + 8 + uVar6 * 0xc);
  if ((*(int *)(iVar2 + 8 + uVar6 * 0xc) != -2) && (puVar8[1] == uVar6)) {
    local_c = 0xffffffff;
    uVar4 = uVar6;
    while ((uVar7 = uVar4, puVar8[1] != uVar6 || (cVar5 = FUN_0055ea40(uVar3), cVar5 == '\0'))) {
      uVar4 = *puVar8;
      if (uVar4 == 0xffffffff) {
        return;
      }
      puVar8 = (uint *)(iVar2 + 8 + uVar4 * 0xc);
      local_c = uVar7;
    }
    if (uVar7 != in_ECX[1]) {
      return;
    }
    if (uVar6 == uVar7) {
      if (*puVar8 != 0xffffffff) {
        puVar8 = (uint *)(iVar2 + 8 + *puVar8 * 0xc);
        FUN_0056c270();
        FUN_0055efd0(puVar8);
        in_ECX[1] = in_ECX[1] + -1;
      }
    }
    else {
      *(uint *)(iVar2 + 8 + local_c * 0xc) = *puVar8;
    }
    if ((GRefCountNTSImpl *)puVar8[2] != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release((GRefCountNTSImpl *)puVar8[2]);
    }
    *puVar8 = 0xfffffffe;
    piVar1 = (int *)*piVar1;
    *piVar1 = *piVar1 + -1;
    return;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
0055f7a0 : SUB ESP,0x14
0055f7a3 : PUSH EBX
0055f7a4 : PUSH EBP
0055f7a5 : MOV EBP,ECX
0055f7a7 : MOV ECX,dword ptr [EBP]
0055f7aa : MOV EAX,dword ptr [EBP + 0x4]
0055f7ad : MOV EBX,dword ptr [ECX]
0055f7af : LEA EAX,[EAX + EAX*0x2]
0055f7b2 : PUSH ESI
0055f7b3 : LEA EAX,[EBX + EAX*0x4 + 0x10]
0055f7b7 : MOV EAX,dword ptr [EAX]
0055f7b9 : PUSH EDI
0055f7ba : MOV dword ptr [ESP + 0x20],ECX
0055f7be : PUSH EAX
0055f7bf : LEA ECX,[ESP + 0x17]
0055f7c3 : MOV dword ptr [ESP + 0x20],EAX
0055f7c7 : CALL 0x0055ee60
0055f7cc : MOV ESI,EAX
0055f7ce : AND ESI,dword ptr [EBX + 0x4]
0055f7d1 : LEA ECX,[ESI + ESI*0x2]
0055f7d4 : CMP dword ptr [EBX + ECX*0x4 + 0x8],-0x2
0055f7d9 : LEA EDI,[EBX + ECX*0x4 + 0x8]
0055f7dd : JZ 0x0055f884
0055f7e3 : CMP dword ptr [EDI + 0x4],ESI
0055f7e6 : JNZ 0x0055f884
0055f7ec : MOV dword ptr [ESP + 0x14],ESI
0055f7f0 : MOV dword ptr [ESP + 0x18],0xffffffff
0055f7f8 : JMP 0x0055f800
0055f800 : MOV EDX,dword ptr [ESP + 0x14]
0055f804 : CMP dword ptr [EDI + 0x4],EDX
0055f807 : JNZ 0x0055f81a
0055f809 : MOV EAX,dword ptr [ESP + 0x1c]
0055f80d : MOV ECX,dword ptr [EDI + 0x8]
0055f810 : PUSH EAX
0055f811 : CALL 0x0055ea40
0055f816 : TEST AL,AL
0055f818 : JNZ 0x0055f82e
0055f81a : MOV dword ptr [ESP + 0x18],ESI
0055f81e : MOV ESI,dword ptr [EDI]
0055f820 : CMP ESI,-0x1
0055f823 : JZ 0x0055f884
0055f825 : LEA ECX,[ESI + ESI*0x2]
0055f828 : LEA EDI,[EBX + ECX*0x4 + 0x8]
0055f82c : JMP 0x0055f800
0055f82e : CMP ESI,dword ptr [EBP + 0x4]
0055f831 : JNZ 0x0055f884
0055f833 : CMP dword ptr [ESP + 0x14],ESI
0055f837 : JNZ 0x0055f85d
0055f839 : MOV EAX,dword ptr [EDI]
0055f83b : CMP EAX,-0x1
0055f83e : JZ 0x0055f86a
0055f840 : LEA EDX,[EAX + EAX*0x2]
0055f843 : MOV ECX,EDI
0055f845 : LEA EBX,[EBX + EDX*0x4 + 0x8]
0055f849 : CALL 0x0056c270
0055f84e : PUSH EBX
0055f84f : MOV ECX,EDI
0055f851 : CALL 0x0055efd0
0055f856 : DEC dword ptr [EBP + 0x4]
0055f859 : MOV EDI,EBX
0055f85b : JMP 0x0055f86a
0055f85d : MOV EAX,dword ptr [ESP + 0x18]
0055f861 : MOV ECX,dword ptr [EDI]
0055f863 : LEA EAX,[EAX + EAX*0x2]
0055f866 : MOV dword ptr [EBX + EAX*0x4 + 0x8],ECX
0055f86a : MOV ECX,dword ptr [EDI + 0x8]
0055f86d : TEST ECX,ECX
0055f86f : JZ 0x0055f876
0055f871 : CALL 0x004ff7c0
0055f876 : MOV EDX,dword ptr [ESP + 0x20]
0055f87a : MOV dword ptr [EDI],0xfffffffe
0055f880 : MOV EAX,dword ptr [EDX]
0055f882 : DEC dword ptr [EAX]
0055f884 : POP EDI
0055f885 : POP ESI
0055f886 : POP EBP
0055f887 : POP EBX
0055f888 : ADD ESP,0x14
0055f88b : RET
