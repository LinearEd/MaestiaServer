PROGRAM  : Maestia.exe
FUNCTION : FUN_0087c250
ENTRY    : 0087c250
BODY     : [[0087c250, 0087c36c]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0087c250(void)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  float *pfVar4;
  float *pfVar5;
  DWORD DVar6;
  int unaff_EDI;
  
  uVar2 = DAT_0172490c;
  iVar1 = *(int *)(DAT_00da93ec + 0xac);
  if (iVar1 != 0) {
    *(undefined1 *)(unaff_EDI + 0x60) = 1;
    *(undefined4 *)(unaff_EDI + 0x5c) = 4;
    iVar3 = FUN_00843770(uVar2);
    if (iVar3 != 0) {
      if ((*(int *)(iVar1 + 1000) != 0) && (*(int *)(iVar3 + 1000) != 0)) {
        pfVar4 = (float *)FUN_007cc270();
        pfVar5 = (float *)FUN_007cc270();
        if ((*pfVar5 == *pfVar4) && ((pfVar5[1] == pfVar4[1] && (pfVar5[2] == pfVar4[2])))) {
          return 0;
        }
      }
      iVar1 = DAT_017247e4;
      if (*(char *)(unaff_EDI + 0x61) != '\0') {
        FUN_0087bd20(unaff_EDI,0,4);
        *(undefined1 *)(unaff_EDI + 0x61) = 0;
        *(undefined4 *)(unaff_EDI + 100) = 0;
        return 1;
      }
      if (*(char *)(unaff_EDI + 0x68) != '\0') {
        *(undefined1 *)(unaff_EDI + 0x68) = 0;
        *(undefined4 *)(iVar1 + 4) = 0;
        *(undefined4 *)(iVar1 + 0x10) = 0;
        *(undefined4 *)(iVar1 + 0x14) = 0;
      }
      *(undefined4 *)(unaff_EDI + 100) = 0;
      *(undefined1 *)(unaff_EDI + 0x61) = 0;
      if (*(int *)(iVar1 + 4) == 0) {
        DVar6 = timeGetTime();
        iVar3 = DAT_017251ac;
        *(DWORD *)(iVar1 + 0xc) = DVar6;
        *(undefined4 *)(iVar1 + 0x14) = 0;
        *(undefined4 *)(iVar1 + 0x10) = 300;
        *(int *)(iVar1 + 4) = 2;
        *(undefined4 *)(iVar3 + 0x49c) = 0x3f800000;
      }
      *(undefined1 *)(unaff_EDI + 0x69) = 1;
      *(undefined1 *)(unaff_EDI + 0x68) = 0;
      return 1;
    }
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
0087c250 : PUSH EBP
0087c251 : MOV EBP,ESP
0087c253 : MOV EAX,[0x00da93ec]
0087c258 : SUB ESP,0x8
0087c25b : PUSH EBX
0087c25c : MOV EBX,dword ptr [EAX + 0xac]
0087c262 : PUSH ESI
0087c263 : XOR ESI,ESI
0087c265 : CMP EBX,ESI
0087c267 : JNZ 0x0087c271
0087c269 : XOR AL,AL
0087c26b : POP ESI
0087c26c : POP EBX
0087c26d : MOV ESP,EBP
0087c26f : POP EBP
0087c270 : RET
0087c271 : MOV ECX,dword ptr [0x0172490c]
0087c277 : PUSH ECX
0087c278 : MOV byte ptr [EDI + 0x60],0x1
0087c27c : MOV dword ptr [EDI + 0x5c],0x4
0087c283 : CALL 0x00843770
0087c288 : CMP EAX,ESI
0087c28a : JZ 0x0087c269
0087c28c : MOV EBX,dword ptr [EBX + 0x3e8]
0087c292 : MOV dword ptr [EBP + -0x4],EBX
0087c295 : CMP EBX,ESI
0087c297 : JZ 0x0087c2e3
0087c299 : MOV EAX,dword ptr [EAX + 0x3e8]
0087c29f : CMP EAX,ESI
0087c2a1 : JZ 0x0087c2e3
0087c2a3 : MOV ESI,EAX
0087c2a5 : CALL 0x007cc270
0087c2aa : MOV ESI,dword ptr [EBP + -0x4]
0087c2ad : MOV EBX,EAX
0087c2af : CALL 0x007cc270
0087c2b4 : MOV ECX,EAX
0087c2b6 : MOVSS XMM0,dword ptr [ECX]
0087c2ba : UCOMISS XMM0,dword ptr [EBX]
0087c2bd : LAHF
0087c2be : TEST AH,0x44
0087c2c1 : JP 0x0087c2e1
0087c2c3 : MOVSS XMM0,dword ptr [ECX + 0x4]
0087c2c8 : UCOMISS XMM0,dword ptr [EBX + 0x4]
0087c2cc : LAHF
0087c2cd : TEST AH,0x44
0087c2d0 : JP 0x0087c2e1
0087c2d2 : MOVSS XMM0,dword ptr [ECX + 0x8]
0087c2d7 : UCOMISS XMM0,dword ptr [EBX + 0x8]
0087c2db : LAHF
0087c2dc : TEST AH,0x44
0087c2df : JNP 0x0087c269
0087c2e1 : XOR ESI,ESI
0087c2e3 : CMP byte ptr [EDI + 0x61],0x0
0087c2e7 : JZ 0x0087c301
0087c2e9 : PUSH 0x4
0087c2eb : PUSH ESI
0087c2ec : PUSH EDI
0087c2ed : CALL 0x0087bd20
0087c2f2 : MOV byte ptr [EDI + 0x61],0x0
0087c2f6 : MOV dword ptr [EDI + 0x64],ESI
0087c2f9 : MOV AL,0x1
0087c2fb : POP ESI
0087c2fc : POP EBX
0087c2fd : MOV ESP,EBP
0087c2ff : POP EBP
0087c300 : RET
0087c301 : CMP byte ptr [EDI + 0x68],0x0
0087c305 : MOV EAX,[0x017247e4]
0087c30a : JZ 0x0087c319
0087c30c : MOV byte ptr [EDI + 0x68],0x0
0087c310 : MOV dword ptr [EAX + 0x4],ESI
0087c313 : MOV dword ptr [EAX + 0x10],ESI
0087c316 : MOV dword ptr [EAX + 0x14],ESI
0087c319 : MOV dword ptr [EDI + 0x64],ESI
0087c31c : LEA EBX,[EAX + 0x4]
0087c31f : MOV byte ptr [EDI + 0x61],0x0
0087c323 : CMP dword ptr [EBX],0x0
0087c326 : MOV ESI,EAX
0087c328 : JNZ 0x0087c35d
0087c32a : CALL dword ptr [0x00b85598]
0087c330 : MOV EDX,dword ptr [0x017251ac]
0087c336 : MOVSS XMM0,dword ptr [0x00c10fc4]
0087c33e : MOV dword ptr [ESI + 0xc],EAX
0087c341 : MOV dword ptr [ESI + 0x14],0x0
0087c348 : MOV dword ptr [ESI + 0x10],0x12c
0087c34f : MOV dword ptr [EBX],0x2
0087c355 : MOVSS dword ptr [EDX + 0x49c],XMM0
0087c35d : POP ESI
0087c35e : MOV byte ptr [EDI + 0x69],0x1
0087c362 : MOV byte ptr [EDI + 0x68],0x0
0087c366 : MOV AL,0x1
0087c368 : POP EBX
0087c369 : MOV ESP,EBP
0087c36b : POP EBP
0087c36c : RET
