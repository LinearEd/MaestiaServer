PROGRAM  : Maestia.exe
FUNCTION : FUN_0085fe20
ENTRY    : 0085fe20
BODY     : [[0085fe20, 00860038]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0085fe20(int param_1,int param_2)

{
  ushort uVar1;
  short sVar2;
  char cVar3;
  int iVar4;
  int *in_ECX;
  int local_10;
  uint local_c [2];
  
  iVar4 = DAT_00d7c54c;
  local_10 = param_1;
  FUN_004437f0(&local_10);
  if (local_c[0] == *(uint *)(iVar4 + 0x44)) {
    return;
  }
  iVar4 = *(int *)(local_c[0] + 0x10);
  if (iVar4 == 0) {
    return;
  }
  uVar1 = *(ushort *)(in_ECX + 0x61e);
  if ((uVar1 != 0) && (*(ushort *)(iVar4 + 0x84) != uVar1)) {
    local_c[0] = (uint)uVar1;
    FUN_00484470(local_c);
    if (local_10 != in_ECX[0x176]) {
      FUN_007bc960(DAT_01725208,*(undefined4 *)(local_10 + 0x10));
    }
  }
  *(undefined2 *)(in_ECX + 0x61e) = *(undefined2 *)(iVar4 + 0x84);
  if ((param_2 == 0) || ((*(byte *)(iVar4 + 0x80) & 1) == 0)) {
    *(undefined1 *)((int)in_ECX + 0x187a) = 0;
  }
  else {
    *(undefined1 *)((int)in_ECX + 0x187a) = 1;
  }
  if ((short)param_1 == 0x2715) {
    *(undefined2 *)(in_ECX + 0x61e) = 0x73;
  }
  sVar2 = (short)in_ECX[0x61e];
  if (sVar2 == 0) {
    return;
  }
  if (param_2 == 0) {
    if (sVar2 == 0xf) {
      *(undefined2 *)(in_ECX + 0x61e) = 0x11;
    }
    else {
      if (sVar2 != 0x73) {
        (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
                  (in_ECX + 0x322,0,1,0);
        (**(code **)(*(int *)(*(int *)(in_ECX[0x4e] + 4) + 0x138 + (int)in_ECX) + 0x10))
                  (in_ECX + 0x74e,0,1,0);
        goto LAB_0085ffad;
      }
      *(undefined2 *)(in_ECX + 0x61e) = 0x75;
    }
    FUN_008914b0(0x9b,0,0);
    cVar3 = (**(code **)(*in_ECX + 0x460))();
    if (cVar3 != '\0') {
      FUN_0088e570(0xf);
    }
  }
LAB_0085ffad:
  cVar3 = FUN_0040dfb0();
  if ((cVar3 == '\0') && (param_2 == 0)) {
    iVar4 = FUN_00702b00();
    if (iVar4 == param_1) {
      return;
    }
    iVar4 = FUN_00702b00();
    if (iVar4 == param_1) {
      return;
    }
  }
  cVar3 = FUN_00876040();
  if (cVar3 == '\0') {
    (**(code **)(*(int *)((int)in_ECX + *(int *)(in_ECX[0x4e] + 4) + 0x138) + 0x10))
              (in_ECX + 0x6fa,0,1,0);
    return;
  }
  (**(code **)(*in_ECX + 0x410))();
  return;
}



============================================================
DISASSEMBLY
============================================================
0085fe20 : PUSH EBP
0085fe21 : MOV EBP,ESP
0085fe23 : AND ESP,0xfffffff8
0085fe26 : SUB ESP,0xc
0085fe29 : MOV EAX,dword ptr [EBP + 0x8]
0085fe2c : PUSH EBX
0085fe2d : PUSH ESI
0085fe2e : MOV ESI,dword ptr [0x00d7c54c]
0085fe34 : MOV EBX,ECX
0085fe36 : PUSH EDI
0085fe37 : LEA ECX,[ESP + 0x10]
0085fe3b : MOV dword ptr [ESP + 0x10],EAX
0085fe3f : PUSH ECX
0085fe40 : LEA ECX,[ESI + 0x40]
0085fe43 : LEA EAX,[ESP + 0x18]
0085fe47 : CALL 0x004437f0
0085fe4c : MOV EAX,dword ptr [ESP + 0x14]
0085fe50 : CMP EAX,dword ptr [ESI + 0x44]
0085fe53 : JZ 0x00860030
0085fe59 : MOV ESI,dword ptr [EAX + 0x10]
0085fe5c : TEST ESI,ESI
0085fe5e : JZ 0x00860030
0085fe64 : MOVZX EAX,word ptr [EBX + 0x1878]
0085fe6b : TEST AX,AX
0085fe6e : JZ 0x0085feb0
0085fe70 : CMP word ptr [ESI + 0x84],AX
0085fe77 : JZ 0x0085feb0
0085fe79 : MOVZX EDX,AX
0085fe7c : LEA EAX,[ESP + 0x14]
0085fe80 : PUSH EAX
0085fe81 : LEA ECX,[EBX + 0x5d4]
0085fe87 : LEA EAX,[ESP + 0x14]
0085fe8b : MOV dword ptr [ESP + 0x18],EDX
0085fe8f : CALL 0x00484470
0085fe94 : MOV EAX,dword ptr [ESP + 0x10]
0085fe98 : CMP EAX,dword ptr [EBX + 0x5d8]
0085fe9e : JZ 0x0085feb0
0085fea0 : MOV ECX,dword ptr [EAX + 0x10]
0085fea3 : MOV EDX,dword ptr [0x01725208]
0085fea9 : PUSH ECX
0085feaa : PUSH EDX
0085feab : CALL 0x007bc960
0085feb0 : MOV EDI,dword ptr [EBP + 0xc]
0085feb3 : MOV AX,word ptr [ESI + 0x84]
0085feba : MOV word ptr [EBX + 0x1878],AX
0085fec1 : TEST EDI,EDI
0085fec3 : JZ 0x0085fed7
0085fec5 : TEST byte ptr [ESI + 0x80],0x1
0085fecc : JZ 0x0085fed7
0085fece : MOV byte ptr [EBX + 0x187a],0x1
0085fed5 : JMP 0x0085fede
0085fed7 : MOV byte ptr [EBX + 0x187a],0x0
0085fede : MOV ECX,0x2715
0085fee3 : CMP word ptr [EBP + 0x8],CX
0085fee7 : JNZ 0x0085fef5
0085fee9 : MOV EDX,0x73
0085feee : MOV word ptr [EBX + 0x1878],DX
0085fef5 : MOVZX EAX,word ptr [EBX + 0x1878]
0085fefc : TEST AX,AX
0085feff : JZ 0x00860030
0085ff05 : TEST EDI,EDI
0085ff07 : JNZ 0x0085ffad
0085ff0d : PUSH EDI
0085ff0e : CMP AX,0xf
0085ff12 : JNZ 0x0085ff22
0085ff14 : MOV EAX,0x11
0085ff19 : MOV word ptr [EBX + 0x1878],AX
0085ff20 : JMP 0x0085ff34
0085ff22 : CMP AX,0x73
0085ff26 : JNZ 0x0085ff5d
0085ff28 : MOV ECX,0x75
0085ff2d : MOV word ptr [EBX + 0x1878],CX
0085ff34 : PUSH 0x0
0085ff36 : PUSH 0x9b
0085ff3b : MOV ESI,EBX
0085ff3d : CALL 0x008914b0
0085ff42 : MOV EDX,dword ptr [EBX]
0085ff44 : MOV EAX,dword ptr [EDX + 0x460]
0085ff4a : MOV ECX,EBX
0085ff4c : CALL EAX
0085ff4e : TEST AL,AL
0085ff50 : JZ 0x0085ffad
0085ff52 : PUSH 0xf
0085ff54 : MOV ECX,EBX
0085ff56 : CALL 0x0088e570
0085ff5b : JMP 0x0085ffad
0085ff5d : MOV ECX,dword ptr [EBX + 0x138]
0085ff63 : MOV EDX,dword ptr [ECX + 0x4]
0085ff66 : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0085ff6d : MOV EAX,dword ptr [EAX + 0x10]
0085ff70 : LEA ECX,[EDX + EBX*0x1 + 0x138]
0085ff77 : PUSH 0x1
0085ff79 : PUSH 0x0
0085ff7b : LEA EDX,[EBX + 0xc88]
0085ff81 : PUSH EDX
0085ff82 : CALL EAX
0085ff84 : MOV ECX,dword ptr [EBX + 0x138]
0085ff8a : MOV EDX,dword ptr [ECX + 0x4]
0085ff8d : MOV EAX,dword ptr [EDX + EBX*0x1 + 0x138]
0085ff94 : MOV EAX,dword ptr [EAX + 0x10]
0085ff97 : PUSH 0x0
0085ff99 : LEA ECX,[EDX + EBX*0x1 + 0x138]
0085ffa0 : PUSH 0x1
0085ffa2 : PUSH 0x0
0085ffa4 : LEA EDX,[EBX + 0x1d38]
0085ffaa : PUSH EDX
0085ffab : CALL EAX
0085ffad : MOV EAX,EBX
0085ffaf : CALL 0x0040dfb0
0085ffb4 : TEST AL,AL
0085ffb6 : JNZ 0x0085ffd9
0085ffb8 : TEST EDI,EDI
0085ffba : JNZ 0x0085ffd9
0085ffbc : LEA EAX,[EDI + 0x8]
0085ffbf : CALL 0x00702b00
0085ffc4 : MOV ESI,dword ptr [EBP + 0x8]
0085ffc7 : CMP EAX,ESI
0085ffc9 : JZ 0x00860030
0085ffcb : MOV EAX,0x800
0085ffd0 : CALL 0x00702b00
0085ffd5 : CMP EAX,ESI
0085ffd7 : JZ 0x00860030
0085ffd9 : MOV EAX,dword ptr [EBX + 0x138]
0085ffdf : MOV ECX,dword ptr [EAX + 0x4]
0085ffe2 : LEA ESI,[EBX + 0x1be8]
0085ffe8 : LEA EDI,[EBX + ECX*0x1 + 0x138]
0085ffef : CALL 0x00876040
0085fff4 : TEST AL,AL
0085fff6 : JZ 0x0086000d
0085fff8 : MOV EDX,dword ptr [EBX]
0085fffa : MOV EAX,dword ptr [EDX + 0x410]
00860000 : MOV ECX,EBX
00860002 : CALL EAX
00860004 : POP EDI
00860005 : POP ESI
00860006 : POP EBX
00860007 : MOV ESP,EBP
00860009 : POP EBP
0086000a : RET 0x8
0086000d : MOV EAX,dword ptr [EBX + 0x138]
00860013 : MOV ECX,dword ptr [EAX + 0x4]
00860016 : MOV EDX,dword ptr [EBX + ECX*0x1 + 0x138]
0086001d : MOV EAX,dword ptr [EDX + 0x10]
00860020 : PUSH 0x0
00860022 : PUSH 0x1
00860024 : LEA ECX,[EBX + ECX*0x1 + 0x138]
0086002b : PUSH 0x0
0086002d : PUSH ESI
0086002e : CALL EAX
00860030 : POP EDI
00860031 : POP ESI
00860032 : POP EBX
00860033 : MOV ESP,EBP
00860035 : POP EBP
00860036 : RET 0x8
