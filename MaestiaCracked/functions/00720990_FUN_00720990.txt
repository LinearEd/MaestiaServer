PROGRAM  : Maestia.exe
FUNCTION : FUN_00720990
ENTRY    : 00720990
BODY     : [[00720990, 00720b2d]]

============================================================
DECOMPILED C CODE
============================================================

char FUN_00720990(float param_1)

{
  float fVar1;
  uint uVar2;
  float fVar3;
  float fVar4;
  uint uVar5;
  int *in_ECX;
  uint uVar6;
  int iVar7;
  int *piVar8;
  uint local_10;
  
  if ((char)in_ECX[4] == '\0') {
    return '\x01';
  }
  iVar7 = in_ECX[1];
  if (iVar7 == 0) {
    iVar7 = 2;
    piVar8 = (int *)in_ECX[0x15];
    if ((int *)in_ECX[0x15] == (int *)0x0) {
      piVar8 = in_ECX;
    }
    fVar1 = (float)in_ECX[0x1c];
    in_ECX[0x1c] = (int)(param_1 + fVar1);
    local_10 = (uint)(longlong)ROUND((param_1 + fVar1) / (float)piVar8[0x1e]);
    in_ECX[0x1b] = local_10;
    if ((uint)in_ECX[0x1d] <= local_10) {
      if (*(char *)((int)in_ECX + 0x11) == '\0') {
        iVar7 = 4;
      }
      else {
        in_ECX[0x1b] = 0;
        in_ECX[0x1c] = 0;
      }
    }
    uVar2 = piVar8[0x17];
    uVar5 = (uint)in_ECX[0x1b] / uVar2;
    uVar6 = (uint)in_ECX[0x1b] % uVar2;
    fVar1 = (float)(int)uVar6;
    if ((int)uVar6 < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    fVar3 = (float)(int)uVar2;
    if ((int)uVar2 < 0) {
      fVar3 = fVar3 + 4.2949673e+09;
    }
    fVar3 = (fVar1 * (float)in_ECX[0x19]) / fVar3;
    fVar1 = (float)(int)uVar5;
    if ((int)uVar5 < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    fVar4 = (float)piVar8[0x16];
    if (piVar8[0x16] < 0) {
      fVar4 = fVar4 + 4.2949673e+09;
    }
    fVar4 = (fVar1 * (float)in_ECX[0x1a]) / fVar4;
    if (iVar7 == 4) {
      (**(code **)(*in_ECX + 4))();
      if (*(char *)((int)in_ECX + 0x13) != '\0') {
        return -0x80;
      }
    }
    else {
      if (iVar7 == 1) {
        return '\x01';
      }
      *(float *)in_ECX[0x14] = fVar3;
      *(float *)(in_ECX[0x14] + 4) = fVar4;
      *(float *)(in_ECX[0x14] + 8) = (float)piVar8[0x1f] + fVar3;
      *(float *)(in_ECX[0x14] + 0xc) = (float)piVar8[0x20] + fVar4;
    }
  }
  else if ((iVar7 != 1) && (iVar7 != 2)) {
    return (iVar7 != 4) * '\b' + '\b';
  }
  return '\x10';
}



============================================================
DISASSEMBLY
============================================================
00720990 : PUSH EBP
00720991 : MOV EBP,ESP
00720993 : AND ESP,0xfffffff8
00720996 : SUB ESP,0xc
00720999 : PUSH EBX
0072099a : PUSH ESI
0072099b : MOV ESI,ECX
0072099d : CMP byte ptr [ESI + 0x10],0x0
007209a1 : PUSH EDI
007209a2 : JNZ 0x007209b2
007209a4 : MOV EAX,0x1
007209a9 : POP EDI
007209aa : POP ESI
007209ab : POP EBX
007209ac : MOV ESP,EBP
007209ae : POP EBP
007209af : RET 0x4
007209b2 : MOV EAX,dword ptr [ESI + 0x4]
007209b5 : TEST EAX,EAX
007209b7 : JZ 0x007209e5
007209b9 : CMP EAX,0x1
007209bc : JZ 0x00720b20
007209c2 : CMP EAX,0x2
007209c5 : JZ 0x00720b20
007209cb : XOR ECX,ECX
007209cd : CMP EAX,0x4
007209d0 : SETNZ CL
007209d3 : LEA ECX,[ECX*0x8 + 0x8]
007209da : MOV EAX,ECX
007209dc : POP EDI
007209dd : POP ESI
007209de : POP EBX
007209df : MOV ESP,EBP
007209e1 : POP EBP
007209e2 : RET 0x4
007209e5 : MOV EDI,dword ptr [ESI + 0x54]
007209e8 : MOV EBX,0x2
007209ed : TEST EDI,EDI
007209ef : JNZ 0x007209f3
007209f1 : MOV EDI,ESI
007209f3 : MOVSS XMM0,dword ptr [EBP + 0x8]
007209f8 : ADDSS XMM0,dword ptr [ESI + 0x70]
007209fd : MOVSS dword ptr [ESP + 0xc],XMM0
00720a03 : FLD float ptr [ESP + 0xc]
00720a07 : MOVSS dword ptr [ESI + 0x70],XMM0
00720a0c : FDIV float ptr [EDI + 0x78]
00720a0f : FNSTCW word ptr [ESP + 0xc]
00720a13 : MOVZX EAX,word ptr [ESP + 0xc]
00720a18 : OR EAX,0xc00
00720a1d : MOV dword ptr [ESP + 0x10],EAX
00720a21 : FLDCW word ptr [ESP + 0x10]
00720a25 : FISTP qword ptr [ESP + 0x10]
00720a29 : MOV EAX,dword ptr [ESP + 0x10]
00720a2d : MOV dword ptr [ESI + 0x6c],EAX
00720a30 : FLDCW word ptr [ESP + 0xc]
00720a34 : CMP EAX,dword ptr [ESI + 0x74]
00720a37 : JC 0x00720a55
00720a39 : CMP byte ptr [ESI + 0x11],0x0
00720a3d : JZ 0x00720a50
00720a3f : XORPS XMM0,XMM0
00720a42 : MOV dword ptr [ESI + 0x6c],0x0
00720a49 : MOVSS dword ptr [ESI + 0x70],XMM0
00720a4e : JMP 0x00720a55
00720a50 : MOV EBX,0x4
00720a55 : MOV ECX,dword ptr [EDI + 0x5c]
00720a58 : MOV EAX,dword ptr [ESI + 0x6c]
00720a5b : XOR EDX,EDX
00720a5d : DIV ECX
00720a5f : MOV dword ptr [ESP + 0x10],EDX
00720a63 : FILD dword ptr [ESP + 0x10]
00720a67 : TEST EDX,EDX
00720a69 : JGE 0x00720a71
00720a6b : FADD float ptr [0x00cdf0e0]
00720a71 : FMUL float ptr [ESI + 0x64]
00720a74 : MOV dword ptr [ESP + 0x10],ECX
00720a78 : FILD dword ptr [ESP + 0x10]
00720a7c : TEST ECX,ECX
00720a7e : JGE 0x00720a86
00720a80 : FADD float ptr [0x00cdf0e0]
00720a86 : FDIVP
00720a88 : MOV dword ptr [ESP + 0xc],EAX
00720a8c : FSTP float ptr [ESP + 0x10]
00720a90 : FILD dword ptr [ESP + 0xc]
00720a94 : TEST EAX,EAX
00720a96 : JGE 0x00720a9e
00720a98 : FADD float ptr [0x00cdf0e0]
00720a9e : MOV EDX,dword ptr [EDI + 0x58]
00720aa1 : FMUL float ptr [ESI + 0x68]
00720aa4 : FILD dword ptr [EDI + 0x58]
00720aa7 : TEST EDX,EDX
00720aa9 : JGE 0x00720ab1
00720aab : FADD float ptr [0x00cdf0e0]
00720ab1 : FDIVP
00720ab3 : FSTP float ptr [ESP + 0xc]
00720ab7 : CMP EBX,0x4
00720aba : JNZ 0x00720ad7
00720abc : MOV EAX,dword ptr [ESI]
00720abe : MOV EDX,dword ptr [EAX + 0x4]
00720ac1 : MOV ECX,ESI
00720ac3 : CALL EDX
00720ac5 : CMP byte ptr [ESI + 0x13],0x0
00720ac9 : JZ 0x00720b20
00720acb : LEA EAX,[EBX + 0x7c]
00720ace : POP EDI
00720acf : POP ESI
00720ad0 : POP EBX
00720ad1 : MOV ESP,EBP
00720ad3 : POP EBP
00720ad4 : RET 0x4
00720ad7 : CMP EBX,0x1
00720ada : JZ 0x007209a4
00720ae0 : MOV EAX,dword ptr [ESI + 0x50]
00720ae3 : MOVSS XMM0,dword ptr [ESP + 0x10]
00720ae9 : MOVSS XMM1,dword ptr [ESP + 0xc]
00720aef : MOVSS dword ptr [EAX],XMM0
00720af3 : MOV ECX,dword ptr [ESI + 0x50]
00720af6 : MOVSS dword ptr [ECX + 0x4],XMM1
00720afb : MOVSS XMM2,dword ptr [EDI + 0x7c]
00720b00 : MOV EDX,dword ptr [ESI + 0x50]
00720b03 : ADDSS XMM2,XMM0
00720b07 : MOVSS dword ptr [EDX + 0x8],XMM2
00720b0c : MOVSS XMM0,dword ptr [EDI + 0x80]
00720b14 : MOV EAX,dword ptr [ESI + 0x50]
00720b17 : ADDSS XMM0,XMM1
00720b1b : MOVSS dword ptr [EAX + 0xc],XMM0
00720b20 : POP EDI
00720b21 : POP ESI
00720b22 : MOV EAX,0x10
00720b27 : POP EBX
00720b28 : MOV ESP,EBP
00720b2a : POP EBP
00720b2b : RET 0x4
