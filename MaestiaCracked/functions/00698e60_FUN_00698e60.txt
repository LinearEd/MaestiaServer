PROGRAM  : Maestia.exe
FUNCTION : FUN_00698e60
ENTRY    : 00698e60
BODY     : [[00698e60, 00698f40]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00698e60(undefined4 *param_1,undefined4 param_2,int param_3,uint param_4)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  short sVar4;
  uint uVar5;
  short sVar6;
  int iVar7;
  byte bVar8;
  int iVar9;
  
  iVar9 = param_1[1];
  iVar2 = (iVar9 + -1 + param_3 & -iVar9) >> ((byte)*param_1 & 0x1f);
  iVar7 = iVar2;
  if ((int)param_1[6] < (int)((param_4 - iVar9) - param_3)) {
    iVar7 = (int)(-iVar9 & param_4) >> ((byte)*param_1 & 0x1f);
  }
  if ((-1 < iVar7) && (uVar5 = (uint)*(ushort *)(param_1 + 0xf), iVar2 < (int)uVar5)) {
    if (iVar2 < 0) {
      iVar2 = 0;
    }
    if ((int)uVar5 <= iVar7) {
      iVar7 = uVar5 - 1;
    }
    sVar4 = (short)(iVar2 >> 3);
    iVar9 = (int)sVar4;
    bVar1 = (byte)(0xff >> ((byte)iVar2 & 7));
    sVar6 = (short)(iVar7 >> 3);
    bVar8 = ~(byte)(0x7f >> ((byte)iVar7 & 7));
    if (iVar9 < *(short *)((int)param_1 + 0xa2)) {
      *(short *)((int)param_1 + 0xa2) = sVar4;
    }
    if ((int)*(short *)(param_1 + 0x29) < (int)sVar6) {
      *(short *)(param_1 + 0x29) = sVar6;
    }
    iVar7 = sVar6 - iVar9;
    pbVar3 = (byte *)(param_1[0x26] + param_1[0x10] + iVar9);
    if (0 < iVar7) {
      *pbVar3 = *pbVar3 | bVar1;
      while (iVar7 = iVar7 + -1, 0 < iVar7) {
        pbVar3 = pbVar3 + 1;
        *pbVar3 = 0xff;
      }
      pbVar3[1] = pbVar3[1] | bVar8;
      return;
    }
    *pbVar3 = *pbVar3 | bVar8 & bVar1;
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00698e60 : PUSH EBX
00698e61 : MOV EBX,dword ptr [ESP + 0x10]
00698e65 : PUSH EBP
00698e66 : MOV EBP,dword ptr [ESP + 0x18]
00698e6a : PUSH ESI
00698e6b : MOV ESI,dword ptr [ESP + 0x10]
00698e6f : MOV ECX,dword ptr [ESI]
00698e71 : PUSH EDI
00698e72 : MOV EDI,dword ptr [ESI + 0x4]
00698e75 : MOV EDX,EDI
00698e77 : NEG EDX
00698e79 : LEA EAX,[EDI + EBX*0x1 + -0x1]
00698e7d : SUB EBP,EDI
00698e7f : AND EAX,EDX
00698e81 : SUB EBP,EBX
00698e83 : SAR EAX,CL
00698e85 : CMP EBP,dword ptr [ESI + 0x18]
00698e88 : JG 0x00698e8e
00698e8a : MOV EBP,EAX
00698e8c : JMP 0x00698e96
00698e8e : AND EDX,dword ptr [ESP + 0x20]
00698e92 : SAR EDX,CL
00698e94 : MOV EBP,EDX
00698e96 : TEST EBP,EBP
00698e98 : JL 0x00698f3c
00698e9e : MOVZX ECX,word ptr [ESI + 0x3c]
00698ea2 : CMP EAX,ECX
00698ea4 : JGE 0x00698f3c
00698eaa : TEST EAX,EAX
00698eac : JGE 0x00698eb0
00698eae : XOR EAX,EAX
00698eb0 : CMP EBP,ECX
00698eb2 : JL 0x00698eb7
00698eb4 : LEA EBP,[ECX + -0x1]
00698eb7 : MOV ECX,EAX
00698eb9 : SAR ECX,0x3
00698ebc : MOVSX EDI,CX
00698ebf : MOV ECX,EAX
00698ec1 : AND ECX,0x7
00698ec4 : MOV EAX,0xff
00698ec9 : SAR EAX,CL
00698ecb : MOV ECX,EBP
00698ecd : AND ECX,0x7
00698ed0 : MOV EBX,0x7f
00698ed5 : MOV byte ptr [ESP + 0x20],AL
00698ed9 : MOVSX EAX,word ptr [ESI + 0xa2]
00698ee0 : SAR EBX,CL
00698ee2 : MOV EDX,EBP
00698ee4 : SAR EDX,0x3
00698ee7 : CMP EAX,EDI
00698ee9 : MOVSX EDX,DX
00698eec : NOT BL
00698eee : JLE 0x00698ef7
00698ef0 : MOV word ptr [ESI + 0xa2],DI
00698ef7 : MOVSX ECX,word ptr [ESI + 0xa4]
00698efe : CMP ECX,EDX
00698f00 : JGE 0x00698f09
00698f02 : MOV word ptr [ESI + 0xa4],DX
00698f09 : MOV EAX,dword ptr [ESI + 0x98]
00698f0f : ADD EAX,dword ptr [ESI + 0x40]
00698f12 : SUB EDX,EDI
00698f14 : ADD EAX,EDI
00698f16 : TEST EDX,EDX
00698f18 : JLE 0x00698f36
00698f1a : MOV CL,byte ptr [ESP + 0x20]
00698f1e : OR byte ptr [EAX],CL
00698f20 : DEC EDX
00698f21 : TEST EDX,EDX
00698f23 : JLE 0x00698f2e
00698f25 : INC EAX
00698f26 : DEC EDX
00698f27 : MOV byte ptr [EAX],0xff
00698f2a : TEST EDX,EDX
00698f2c : JG 0x00698f25
00698f2e : OR byte ptr [EAX + 0x1],BL
00698f31 : POP EDI
00698f32 : POP ESI
00698f33 : POP EBP
00698f34 : POP EBX
00698f35 : RET
00698f36 : AND BL,byte ptr [ESP + 0x20]
00698f3a : OR byte ptr [EAX],BL
00698f3c : POP EDI
00698f3d : POP ESI
00698f3e : POP EBP
00698f3f : POP EBX
00698f40 : RET
