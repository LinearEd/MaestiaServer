PROGRAM  : Maestia.exe
FUNCTION : FUN_008f37b0
ENTRY    : 008f37b0
BODY     : [[008f37b0, 008f37fc] [008f3800, 008f3b64]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008f37b0(uint param_1,undefined4 param_2,undefined4 *param_3)

{
  void **ppvVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  int in_stack_0000001c;
  uint in_stack_00000020;
  uint local_94;
  undefined1 local_90 [4];
  undefined2 local_8c;
  undefined4 local_7c;
  uint local_78;
  undefined1 local_74 [4];
  undefined1 local_70 [4];
  undefined2 local_6c;
  undefined4 local_5c;
  uint local_58;
  uint local_54;
  int local_50 [2];
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined4 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b6b1de;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  local_8 = 0;
  ppvVar1 = &local_10;
  local_14 = uVar2;
  if (DAT_0172484c == 0) {
LAB_008f382e:
    ExceptionList = ppvVar1;
    local_8 = 0xffffffff;
    if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
  }
  else {
    local_50[0] = -(uint)(*(int *)(DAT_0172484c + 0x28) != 0);
    do {
      ExceptionList = ppvVar1;
      ppvVar1 = ExceptionList;
      if (local_50[0] == 0) goto LAB_008f382e;
      local_54 = 0;
      FUN_00404160(local_50,local_74,&local_54);
      ppvVar1 = ExceptionList;
    } while ((local_54 == 0) || (*(byte *)(local_54 + 0xfc) != param_1));
    local_54 = (uint)*(ushort *)(local_54 + 6);
    FUN_00406460(L"IDS_PREMIUM_ITEM_LINK_NOTICE");
    local_8._0_1_ = 1;
    FUN_0081d120(local_70);
    local_8._0_1_ = 3;
    if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0(uVar2);
    }
    local_58 = 7;
    local_5c = 0;
    local_6c = 0;
    FUN_00824a20(DAT_0172491c,0);
    local_8 = CONCAT31(local_8._1_3_,4);
    local_50[0] = 0x28;
    iVar3 = FUN_00407c10(local_50,1);
    local_50[0] = 0x29;
    iVar4 = FUN_00407c10(local_50,1);
    if ((iVar3 != -1) && (iVar4 != -1)) {
      FUN_00405e10(iVar3,iVar4);
    }
    puVar7 = local_48;
    if (local_34 < 8) {
      puVar7 = &local_48;
    }
    puVar5 = local_2c;
    if (local_18 < 8) {
      puVar5 = &local_2c;
    }
    uVar6 = FUN_00404750(L"%ls : <%ls>",puVar5,puVar7);
    local_8._0_1_ = 5;
    FUN_00405eb0(uVar6,0,0xffffffff);
    local_8._0_1_ = 4;
    if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_6c = 0;
    local_58 = 7;
    local_5c = 0;
    puVar7 = param_3;
    if (in_stack_00000020 < 8) {
      puVar7 = &param_3;
    }
    iVar3 = FUN_00405b70(puVar7);
    if ((iVar3 != 0) || (in_stack_0000001c != 0)) {
      FUN_00824120(DAT_0172491c);
      local_8._0_1_ = 6;
      FUN_00403510(local_90);
      local_8._0_1_ = 7;
      uVar6 = FUN_00403450(local_70,local_30);
      local_8._0_1_ = 8;
      FUN_00405eb0(uVar6,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,7);
      if (7 < local_58) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_58 = 7;
      local_5c = 0;
      local_6c = 0;
      local_8 = CONCAT31(local_8._1_3_,6);
      if (7 < local_78) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_78 = 7;
      local_7c = 0;
      local_8c = 0;
      local_8._0_1_ = 4;
      if (7 < local_94) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    iVar3 = FUN_008ede80(local_30,2);
    if (iVar3 == 0) {
      local_8 = CONCAT31(local_8._1_3_,3);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_34 = 7;
      local_38 = 0;
      local_48 = (undefined4 *)((uint)local_48 & 0xffff0000);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = (undefined4 *)((uint)local_2c & 0xffff0000);
      local_8 = 0xffffffff;
      if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    else {
      *(uint *)(iVar3 + 0x6c) = local_54;
      *(undefined4 *)(iVar3 + 0x70) = 3;
      if (*(code **)(iVar3 + 0x60) != (code *)0x0) {
        (**(code **)(iVar3 + 0x60))(1,iVar3);
      }
      *(code **)(iVar3 + 0x60) = FUN_008f36a0;
      local_8 = CONCAT31(local_8._1_3_,3);
      if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_34 = 7;
      local_38 = 0;
      local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
      local_8 = (uint)local_8._1_3_ << 8;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_18 = 7;
      local_1c = 0;
      local_2c = (undefined4 *)((uint)local_2c._2_2_ << 0x10);
      local_8 = 0xffffffff;
      if (7 < in_stack_00000020) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    local_18 = 7;
    local_1c = 0;
    local_34 = 7;
    local_38 = 0;
  }
  local_8 = 0xffffffff;
  in_stack_00000020 = 7;
  param_3 = (undefined4 *)((uint)param_3 & 0xffff0000);
  in_stack_0000001c = 0;
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008f37b0 : PUSH EBP
008f37b1 : MOV EBP,ESP
008f37b3 : PUSH -0x1
008f37b5 : PUSH 0xb6b1de
008f37ba : MOV EAX,FS:[0x0]
008f37c0 : PUSH EAX
008f37c1 : SUB ESP,0x9c
008f37c7 : MOV EAX,[0x00d66fa0]
008f37cc : XOR EAX,EBP
008f37ce : MOV dword ptr [EBP + -0x10],EAX
008f37d1 : PUSH EBX
008f37d2 : PUSH ESI
008f37d3 : PUSH EDI
008f37d4 : PUSH EAX
008f37d5 : LEA EAX,[EBP + -0xc]
008f37d8 : MOV FS:[0x0],EAX
008f37de : XOR EBX,EBX
008f37e0 : MOV dword ptr [EBP + -0x4],EBX
008f37e3 : MOV EDI,dword ptr [0x0172484c]
008f37e9 : CMP EDI,EBX
008f37eb : JZ 0x008f382e
008f37ed : MOV EAX,dword ptr [EDI + 0x28]
008f37f0 : NEG EAX
008f37f2 : SBB EAX,EAX
008f37f4 : MOV dword ptr [EBP + -0x4c],EAX
008f37f7 : CMP EAX,EBX
008f37f9 : JZ 0x008f382e
008f37fb : JMP 0x008f3800
008f3800 : LEA EAX,[EBP + -0x50]
008f3803 : PUSH EAX
008f3804 : LEA ECX,[EBP + -0x70]
008f3807 : PUSH ECX
008f3808 : LEA EDX,[EBP + -0x4c]
008f380b : PUSH EDX
008f380c : MOV EAX,EDI
008f380e : MOV dword ptr [EBP + -0x50],EBX
008f3811 : CALL 0x00404160
008f3816 : MOV ESI,dword ptr [EBP + -0x50]
008f3819 : CMP ESI,EBX
008f381b : JZ 0x008f3829
008f381d : MOVZX EAX,byte ptr [ESI + 0xfc]
008f3824 : CMP EAX,dword ptr [EBP + 0x8]
008f3827 : JZ 0x008f3857
008f3829 : CMP dword ptr [EBP + -0x4c],EBX
008f382c : JNZ 0x008f3800
008f382e : MOV dword ptr [EBP + -0x4],0xffffffff
008f3835 : CMP dword ptr [EBP + 0x24],0x8
008f3839 : JC 0x008f3843
008f383b : MOV ECX,dword ptr [EBP + 0x10]
008f383e : CALL 0x006f04e0
008f3843 : XOR EDX,EDX
008f3845 : MOV dword ptr [EBP + 0x24],0x7
008f384c : MOV word ptr [EBP + 0x10],DX
008f3850 : XOR AL,AL
008f3852 : JMP 0x008f3b44
008f3857 : MOVZX ECX,word ptr [ESI + 0x6]
008f385b : MOV dword ptr [EBP + -0x50],ECX
008f385e : PUSH 0xc5f8e0
008f3863 : LEA ECX,[EBP + -0x6c]
008f3866 : CALL 0x00406460
008f386b : MOV byte ptr [EBP + -0x4],0x1
008f386f : MOV ECX,dword ptr [0x0172491c]
008f3875 : LEA EAX,[EBP + -0x6c]
008f3878 : PUSH EAX
008f3879 : LEA EDI,[EBP + -0x2c]
008f387c : CALL 0x0081d120
008f3881 : MOV byte ptr [EBP + -0x4],0x3
008f3885 : MOV EDI,0x8
008f388a : CMP dword ptr [EBP + -0x54],EDI
008f388d : JC 0x008f3897
008f388f : MOV ECX,dword ptr [EBP + -0x68]
008f3892 : CALL 0x006f04e0
008f3897 : MOV EAX,[0x0172491c]
008f389c : PUSH EBX
008f389d : XOR ECX,ECX
008f389f : LEA EDX,[ESI + 0x18]
008f38a2 : PUSH EAX
008f38a3 : LEA ESI,[EBP + -0x48]
008f38a6 : MOV dword ptr [EBP + -0x54],0x7
008f38ad : MOV dword ptr [EBP + -0x58],EBX
008f38b0 : MOV word ptr [EBP + -0x68],CX
008f38b4 : CALL 0x00824a20
008f38b9 : MOV byte ptr [EBP + -0x4],0x4
008f38bd : PUSH 0x1
008f38bf : LEA ECX,[EBP + -0x4c]
008f38c2 : PUSH ECX
008f38c3 : XOR EAX,EAX
008f38c5 : MOV EDX,ESI
008f38c7 : MOV dword ptr [EBP + -0x4c],0x28
008f38ce : CALL 0x00407c10
008f38d3 : PUSH 0x1
008f38d5 : LEA EDX,[EBP + -0x4c]
008f38d8 : MOV ESI,EAX
008f38da : PUSH EDX
008f38db : XOR EAX,EAX
008f38dd : LEA EDX,[EBP + -0x48]
008f38e0 : MOV dword ptr [EBP + -0x4c],0x29
008f38e7 : CALL 0x00407c10
008f38ec : CMP ESI,-0x1
008f38ef : JZ 0x008f3900
008f38f1 : CMP EAX,-0x1
008f38f4 : JZ 0x008f3900
008f38f6 : PUSH EAX
008f38f7 : PUSH ESI
008f38f8 : LEA ECX,[EBP + -0x48]
008f38fb : CALL 0x00405e10
008f3900 : MOV ECX,dword ptr [EBP + -0x44]
008f3903 : CMP dword ptr [EBP + -0x30],EDI
008f3906 : JNC 0x008f390b
008f3908 : LEA ECX,[EBP + -0x44]
008f390b : MOV EAX,dword ptr [EBP + -0x28]
008f390e : CMP dword ptr [EBP + -0x14],EDI
008f3911 : JNC 0x008f3916
008f3913 : LEA EAX,[EBP + -0x28]
008f3916 : PUSH ECX
008f3917 : PUSH EAX
008f3918 : PUSH 0xc5f91c
008f391d : LEA ESI,[EBP + -0x6c]
008f3920 : CALL 0x00404750
008f3925 : ADD ESP,0xc
008f3928 : MOV byte ptr [EBP + -0x4],0x5
008f392c : PUSH -0x1
008f392e : PUSH EBX
008f392f : PUSH EAX
008f3930 : LEA ECX,[EBP + -0x2c]
008f3933 : CALL 0x00405eb0
008f3938 : MOV byte ptr [EBP + -0x4],0x4
008f393c : CMP dword ptr [EBP + -0x54],EDI
008f393f : JC 0x008f3949
008f3941 : MOV ECX,dword ptr [EBP + -0x68]
008f3944 : CALL 0x006f04e0
008f3949 : XOR EAX,EAX
008f394b : MOV word ptr [EBP + -0x68],AX
008f394f : MOV EAX,dword ptr [EBP + 0x10]
008f3952 : MOV dword ptr [EBP + -0x54],0x7
008f3959 : MOV dword ptr [EBP + -0x58],EBX
008f395c : CMP dword ptr [EBP + 0x24],EDI
008f395f : JNC 0x008f3964
008f3961 : LEA EAX,[EBP + 0x10]
008f3964 : PUSH EAX
008f3965 : XOR EDX,EDX
008f3967 : MOV ECX,0xc5f934
008f396c : CALL 0x00405b70
008f3971 : ADD ESP,0x4
008f3974 : CMP EAX,EBX
008f3976 : JNZ 0x008f3988
008f3978 : XOR EAX,EAX
008f397a : CMP dword ptr [EBP + 0x20],EBX
008f397d : SETNZ AL
008f3980 : CMP EAX,EBX
008f3982 : JZ 0x008f3a53
008f3988 : MOV ECX,dword ptr [0x0172491c]
008f398e : PUSH ECX
008f398f : LEA EDX,[EBP + 0xc]
008f3992 : LEA EDI,[EBP + 0xffffff58]
008f3998 : CALL 0x00824120
008f399d : MOV byte ptr [EBP + -0x4],0x6
008f39a1 : LEA EDX,[EBP + 0xffffff74]
008f39a7 : PUSH EDX
008f39a8 : MOV EDX,0xc5f938
008f39ad : MOV ECX,EAX
008f39af : CALL 0x00403510
008f39b4 : ADD ESP,0x4
008f39b7 : MOV byte ptr [EBP + -0x4],0x7
008f39bb : LEA ECX,[EBP + -0x2c]
008f39be : PUSH ECX
008f39bf : LEA EDX,[EBP + -0x6c]
008f39c2 : PUSH EDX
008f39c3 : MOV ECX,EAX
008f39c5 : CALL 0x00403450
008f39ca : ADD ESP,0x8
008f39cd : MOV byte ptr [EBP + -0x4],0x8
008f39d1 : PUSH -0x1
008f39d3 : PUSH EBX
008f39d4 : PUSH EAX
008f39d5 : LEA ECX,[EBP + -0x2c]
008f39d8 : CALL 0x00405eb0
008f39dd : MOV byte ptr [EBP + -0x4],0x7
008f39e1 : MOV EDI,0x8
008f39e6 : CMP dword ptr [EBP + -0x54],EDI
008f39e9 : JC 0x008f39f3
008f39eb : MOV ECX,dword ptr [EBP + -0x68]
008f39ee : CALL 0x006f04e0
008f39f3 : MOV ESI,0x7
008f39f8 : XOR EAX,EAX
008f39fa : MOV dword ptr [EBP + -0x54],ESI
008f39fd : MOV dword ptr [EBP + -0x58],EBX
008f3a00 : MOV word ptr [EBP + -0x68],AX
008f3a04 : MOV byte ptr [EBP + -0x4],0x6
008f3a08 : CMP dword ptr [EBP + -0x74],EDI
008f3a0b : JC 0x008f3a18
008f3a0d : MOV ECX,dword ptr [EBP + 0xffffff78]
008f3a13 : CALL 0x006f04e0
008f3a18 : XOR ECX,ECX
008f3a1a : MOV dword ptr [EBP + -0x74],ESI
008f3a1d : MOV dword ptr [EBP + -0x78],EBX
008f3a20 : MOV word ptr [EBP + 0xffffff78],CX
008f3a27 : MOV byte ptr [EBP + -0x4],0x4
008f3a2b : CMP dword ptr [EBP + 0xffffff70],EDI
008f3a31 : JC 0x008f3a3e
008f3a33 : MOV ECX,dword ptr [EBP + 0xffffff5c]
008f3a39 : CALL 0x006f04e0
008f3a3e : XOR EDX,EDX
008f3a40 : MOV dword ptr [EBP + 0xffffff70],ESI
008f3a46 : MOV dword ptr [EBP + 0xffffff6c],EBX
008f3a4c : MOV word ptr [EBP + 0xffffff5c],DX
008f3a53 : MOV EAX,[0x00da9894]
008f3a58 : MOV ECX,dword ptr [EAX]
008f3a5a : PUSH 0x2
008f3a5c : LEA EDX,[EBP + -0x2c]
008f3a5f : PUSH EDX
008f3a60 : CALL 0x008ede80
008f3a65 : MOV ESI,EAX
008f3a67 : CMP ESI,EBX
008f3a69 : JNZ 0x008f3ac7
008f3a6b : MOV byte ptr [EBP + -0x4],0x3
008f3a6f : CMP dword ptr [EBP + -0x30],EDI
008f3a72 : JC 0x008f3a7c
008f3a74 : MOV ECX,dword ptr [EBP + -0x44]
008f3a77 : CALL 0x006f04e0
008f3a7c : MOV ESI,0x7
008f3a81 : XOR EAX,EAX
008f3a83 : MOV dword ptr [EBP + -0x30],ESI
008f3a86 : MOV dword ptr [EBP + -0x34],EBX
008f3a89 : MOV word ptr [EBP + -0x44],AX
008f3a8d : MOV byte ptr [EBP + -0x4],BL
008f3a90 : CMP dword ptr [EBP + -0x14],EDI
008f3a93 : JC 0x008f3a9d
008f3a95 : MOV ECX,dword ptr [EBP + -0x28]
008f3a98 : CALL 0x006f04e0
008f3a9d : XOR ECX,ECX
008f3a9f : MOV dword ptr [EBP + -0x14],ESI
008f3aa2 : MOV dword ptr [EBP + -0x18],EBX
008f3aa5 : MOV word ptr [EBP + -0x28],CX
008f3aa9 : MOV dword ptr [EBP + -0x4],0xffffffff
008f3ab0 : CMP dword ptr [EBP + 0x24],EDI
008f3ab3 : JC 0x008f3abd
008f3ab5 : MOV ECX,dword ptr [EBP + 0x10]
008f3ab8 : CALL 0x006f04e0
008f3abd : XOR EDX,EDX
008f3abf : MOV word ptr [EBP + 0x10],DX
008f3ac3 : XOR AL,AL
008f3ac5 : JMP 0x008f3b41
008f3ac7 : MOV EAX,dword ptr [EBP + -0x50]
008f3aca : MOV dword ptr [ESI + 0x6c],EAX
008f3acd : MOV EAX,dword ptr [ESI + 0x60]
008f3ad0 : MOV dword ptr [ESI + 0x70],0x3
008f3ad7 : CMP EAX,EBX
008f3ad9 : JZ 0x008f3ae0
008f3adb : PUSH ESI
008f3adc : PUSH 0x1
008f3ade : CALL EAX
008f3ae0 : MOV dword ptr [ESI + 0x60],0x8f36a0
008f3ae7 : MOV byte ptr [EBP + -0x4],0x3
008f3aeb : CMP dword ptr [EBP + -0x30],EDI
008f3aee : JC 0x008f3af8
008f3af0 : MOV ECX,dword ptr [EBP + -0x44]
008f3af3 : CALL 0x006f04e0
008f3af8 : MOV ESI,0x7
008f3afd : XOR ECX,ECX
008f3aff : MOV dword ptr [EBP + -0x30],ESI
008f3b02 : MOV dword ptr [EBP + -0x34],EBX
008f3b05 : MOV word ptr [EBP + -0x44],CX
008f3b09 : MOV byte ptr [EBP + -0x4],BL
008f3b0c : CMP dword ptr [EBP + -0x14],EDI
008f3b0f : JC 0x008f3b19
008f3b11 : MOV ECX,dword ptr [EBP + -0x28]
008f3b14 : CALL 0x006f04e0
008f3b19 : XOR EDX,EDX
008f3b1b : MOV dword ptr [EBP + -0x14],ESI
008f3b1e : MOV dword ptr [EBP + -0x18],EBX
008f3b21 : MOV word ptr [EBP + -0x28],DX
008f3b25 : MOV dword ptr [EBP + -0x4],0xffffffff
008f3b2c : CMP dword ptr [EBP + 0x24],EDI
008f3b2f : JC 0x008f3b39
008f3b31 : MOV ECX,dword ptr [EBP + 0x10]
008f3b34 : CALL 0x006f04e0
008f3b39 : XOR EAX,EAX
008f3b3b : MOV word ptr [EBP + 0x10],AX
008f3b3f : MOV AL,0x1
008f3b41 : MOV dword ptr [EBP + 0x24],ESI
008f3b44 : MOV dword ptr [EBP + 0x20],EBX
008f3b47 : MOV ECX,dword ptr [EBP + -0xc]
008f3b4a : MOV dword ptr FS:[0x0],ECX
008f3b51 : POP ECX
008f3b52 : POP EDI
008f3b53 : POP ESI
008f3b54 : POP EBX
008f3b55 : MOV ECX,dword ptr [EBP + -0x10]
008f3b58 : XOR ECX,EBP
008f3b5a : CALL 0x00633e6b
008f3b5f : MOV ESP,EBP
008f3b61 : POP EBP
008f3b62 : RET 0x20
