PROGRAM  : Maestia.exe
FUNCTION : FUN_00552790
ENTRY    : 00552790
BODY     : [[00552790, 00552889] [00552890, 005528dc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00552790(undefined4 param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int *piVar4;
  int *in_ECX;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  piVar4 = (int *)*in_ECX;
  if (piVar4 == (int *)0x0) {
    iVar7 = 8;
  }
  else {
    if ((uint)(*piVar4 * 5) <= piVar4[1] * 4 + 4U) goto LAB_005527cb;
    iVar7 = piVar4[1] * 2 + 2;
  }
  FUN_005517a0(param_1,iVar7);
LAB_005527cb:
  piVar4 = (int *)*in_ECX;
  param_3 = param_3 & piVar4[1];
  *piVar4 = *piVar4 + 1;
  iVar7 = *in_ECX;
  puVar1 = (uint *)(iVar7 + 8 + param_3 * 0x24);
  if (*puVar1 == 0xfffffffe) {
    *puVar1 = 0xffffffff;
    uVar6 = *(uint *)*param_2;
    puVar1[1] = uVar6;
    piVar4 = (int *)(uVar6 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00550900(param_2[1]);
    return;
  }
  uVar6 = param_3;
  do {
    uVar6 = uVar6 + 1 & *(uint *)(iVar7 + 4);
  } while (*(int *)(iVar7 + 8 + uVar6 * 0x24) != -2);
  uVar5 = *(uint *)(puVar1[1] + 0xc) & *(uint *)(iVar7 + 4);
  puVar2 = (uint *)(iVar7 + 8 + uVar6 * 0x24);
  if (uVar5 == param_3) {
    if (puVar2 != (uint *)0x0) {
      *puVar2 = *puVar1;
      uVar5 = puVar1[1];
      puVar2[1] = uVar5;
      piVar4 = (int *)(uVar5 + 8);
      *piVar4 = *piVar4 + 1;
      FUN_00550900(puVar1 + 2);
    }
    FUN_0054f1b0(param_2);
    *puVar1 = uVar6;
    return;
  }
  puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x24);
  for (uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x24); uVar5 != param_3;
      uVar5 = *(uint *)(iVar7 + 8 + uVar5 * 0x24)) {
    uVar5 = *puVar3;
    puVar3 = (uint *)(iVar7 + 8 + uVar5 * 0x24);
  }
  if (puVar2 != (uint *)0x0) {
    *puVar2 = *puVar1;
    uVar5 = puVar1[1];
    puVar2[1] = uVar5;
    piVar4 = (int *)(uVar5 + 8);
    *piVar4 = *piVar4 + 1;
    FUN_00550900(puVar1 + 2);
  }
  *puVar3 = uVar6;
  FUN_0054f1b0(param_2);
  *puVar1 = 0xffffffff;
  return;
}



============================================================
DISASSEMBLY
============================================================
00552790 : PUSH EBX
00552791 : PUSH ESI
00552792 : MOV ESI,ECX
00552794 : MOV EAX,dword ptr [ESI]
00552796 : PUSH EDI
00552797 : TEST EAX,EAX
00552799 : JNZ 0x005527a4
0055279b : MOV EAX,dword ptr [ESP + 0x10]
0055279f : PUSH 0x8
005527a1 : PUSH EAX
005527a2 : JMP 0x005527c6
005527a4 : MOV ECX,dword ptr [EAX + 0x4]
005527a7 : LEA EDX,[ECX*0x4 + 0x4]
005527ae : MOV ECX,dword ptr [EAX]
005527b0 : LEA ECX,[ECX + ECX*0x4]
005527b3 : CMP ECX,EDX
005527b5 : JBE 0x005527cb
005527b7 : MOV EDX,dword ptr [EAX + 0x4]
005527ba : MOV ECX,dword ptr [ESP + 0x10]
005527be : LEA EAX,[EDX + EDX*0x1 + 0x2]
005527c2 : PUSH EAX
005527c3 : PUSH ECX
005527c4 : MOV ECX,ESI
005527c6 : CALL 0x005517a0
005527cb : MOV ECX,dword ptr [ESI]
005527cd : MOV EAX,dword ptr [ESP + 0x18]
005527d1 : AND EAX,dword ptr [ECX + 0x4]
005527d4 : INC dword ptr [ECX]
005527d6 : MOV ECX,dword ptr [ESI]
005527d8 : LEA EDX,[EAX + EAX*0x8]
005527db : LEA EDI,[ECX + EDX*0x4 + 0x8]
005527df : MOV EDX,dword ptr [EDI]
005527e1 : MOV EBX,0xfffffffe
005527e6 : MOV dword ptr [ESP + 0x10],EDI
005527ea : CMP EDX,EBX
005527ec : JNZ 0x00552814
005527ee : MOV ECX,dword ptr [ESP + 0x14]
005527f2 : MOV dword ptr [EDI],0xffffffff
005527f8 : MOV EAX,dword ptr [ECX]
005527fa : MOV EAX,dword ptr [EAX]
005527fc : MOV dword ptr [EDI + 0x4],EAX
005527ff : INC dword ptr [EAX + 0x8]
00552802 : MOV ECX,dword ptr [ECX + 0x4]
00552805 : PUSH ECX
00552806 : LEA ECX,[EDI + 0x8]
00552809 : CALL 0x00550900
0055280e : POP EDI
0055280f : POP ESI
00552810 : POP EBX
00552811 : RET 0xc
00552814 : PUSH EBP
00552815 : MOV EBP,dword ptr [ECX + 0x4]
00552818 : MOV ESI,EAX
0055281a : LEA EBX,[EBX]
00552820 : INC ESI
00552821 : AND ESI,EBP
00552823 : LEA EDX,[ESI + ESI*0x8]
00552826 : CMP dword ptr [ECX + EDX*0x4 + 0x8],EBX
0055282a : JNZ 0x00552820
0055282c : MOV EBX,dword ptr [EDI + 0x4]
0055282f : MOV EBX,dword ptr [EBX + 0xc]
00552832 : ADD EDI,0x4
00552835 : AND EBX,EBP
00552837 : LEA EDX,[ESI + ESI*0x8]
0055283a : LEA EDX,[ECX + EDX*0x4 + 0x8]
0055283e : POP EBP
0055283f : CMP EBX,EAX
00552841 : JNZ 0x0055287b
00552843 : TEST EDX,EDX
00552845 : JZ 0x00552863
00552847 : MOV EAX,dword ptr [ESP + 0x10]
0055284b : MOV EAX,dword ptr [EAX]
0055284d : MOV dword ptr [EDX],EAX
0055284f : MOV EAX,dword ptr [EDI]
00552851 : LEA ECX,[EDI + 0x4]
00552854 : PUSH ECX
00552855 : MOV dword ptr [EDX + 0x4],EAX
00552858 : INC dword ptr [EAX + 0x8]
0055285b : LEA ECX,[EDX + 0x8]
0055285e : CALL 0x00550900
00552863 : MOV EDX,dword ptr [ESP + 0x14]
00552867 : PUSH EDX
00552868 : MOV ECX,EDI
0055286a : CALL 0x0054f1b0
0055286f : MOV EAX,dword ptr [ESP + 0x10]
00552873 : POP EDI
00552874 : MOV dword ptr [EAX],ESI
00552876 : POP ESI
00552877 : POP EBX
00552878 : RET 0xc
0055287b : LEA EBX,[EBX + EBX*0x8]
0055287e : CMP dword ptr [ECX + EBX*0x4 + 0x8],EAX
00552882 : LEA EBX,[ECX + EBX*0x4 + 0x8]
00552886 : JZ 0x0055289f
00552888 : JMP 0x00552890
00552890 : MOV EBX,dword ptr [EBX]
00552892 : LEA EBX,[EBX + EBX*0x8]
00552895 : CMP dword ptr [ECX + EBX*0x4 + 0x8],EAX
00552899 : LEA EBX,[ECX + EBX*0x4 + 0x8]
0055289d : JNZ 0x00552890
0055289f : TEST EDX,EDX
005528a1 : JZ 0x005528bf
005528a3 : MOV ECX,dword ptr [ESP + 0x10]
005528a7 : MOV EAX,dword ptr [ECX]
005528a9 : MOV dword ptr [EDX],EAX
005528ab : MOV EAX,dword ptr [EDI]
005528ad : MOV dword ptr [EDX + 0x4],EAX
005528b0 : INC dword ptr [EAX + 0x8]
005528b3 : LEA EAX,[EDI + 0x4]
005528b6 : PUSH EAX
005528b7 : LEA ECX,[EDX + 0x8]
005528ba : CALL 0x00550900
005528bf : MOV ECX,dword ptr [ESP + 0x14]
005528c3 : PUSH ECX
005528c4 : MOV ECX,EDI
005528c6 : MOV dword ptr [EBX],ESI
005528c8 : CALL 0x0054f1b0
005528cd : MOV EDX,dword ptr [ESP + 0x10]
005528d1 : POP EDI
005528d2 : POP ESI
005528d3 : MOV dword ptr [EDX],0xffffffff
005528d9 : POP EBX
005528da : RET 0xc
