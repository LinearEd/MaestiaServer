PROGRAM  : Maestia.exe
FUNCTION : FUN_00501360
ENTRY    : 00501360
BODY     : [[00501360, 0050140a]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00501360(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  int *piVar4;
  
  puVar2 = param_1;
  if ((param_1[2] != 0) && (iVar3 = (**(code **)(*(int *)param_1[2] + 8))(), iVar3 == 4)) {
    if (puVar2[2] == 0) {
      piVar4 = (int *)0x0;
    }
    else {
      piVar4 = (int *)(puVar2[2] + -0x68);
    }
    if ((((int *)piVar4[0x34] == (int *)0x0) || (*(int *)piVar4[0x34] == 0)) && (0 < (int)puVar2[7])
       ) {
      uVar1 = puVar2[6];
      FUN_00526260(0);
      FUN_005272e0(&param_1,uVar1,0xffffffff,0);
      FUN_00544b40(*param_1,0xffffffff);
      iVar3 = (**(code **)(*piVar4 + 0x40))();
      if (iVar3 != 0) {
        *(uint *)(iVar3 + 0xb00) = *(uint *)(iVar3 + 0xb00) | 0x400;
      }
      param_1[2] = param_1[2] + -1;
      if (param_1[2] == 0) {
        FUN_00525340();
        return;
      }
    }
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
00501360 : PUSH EDI
00501361 : MOV EDI,dword ptr [ESP + 0x8]
00501365 : CMP dword ptr [EDI + 0x8],0x0
00501369 : JZ 0x00501409
0050136f : MOV ECX,dword ptr [EDI + 0x8]
00501372 : MOV EAX,dword ptr [ECX]
00501374 : MOV EDX,dword ptr [EAX + 0x8]
00501377 : CALL EDX
00501379 : CMP EAX,0x4
0050137c : JNZ 0x00501409
00501382 : MOV EAX,dword ptr [EDI + 0x8]
00501385 : PUSH ESI
00501386 : TEST EAX,EAX
00501388 : JZ 0x0050138f
0050138a : LEA ESI,[EAX + -0x68]
0050138d : JMP 0x00501391
0050138f : XOR ESI,ESI
00501391 : MOV EAX,dword ptr [ESI + 0xd0]
00501397 : TEST EAX,EAX
00501399 : JZ 0x005013a0
0050139b : CMP dword ptr [EAX],0x0
0050139e : JNZ 0x00501408
005013a0 : CMP dword ptr [EDI + 0x1c],0x1
005013a4 : JL 0x00501408
005013a6 : PUSH EBX
005013a7 : MOV EBX,dword ptr [EDI + 0x18]
005013aa : PUSH 0x0
005013ac : MOV ECX,EDI
005013ae : CALL 0x00526260
005013b3 : PUSH 0x0
005013b5 : PUSH -0x1
005013b7 : PUSH EBX
005013b8 : LEA ECX,[ESP + 0x1c]
005013bc : PUSH ECX
005013bd : MOV ECX,EAX
005013bf : CALL 0x005272e0
005013c4 : MOV EDX,dword ptr [ESP + 0x10]
005013c8 : MOV EAX,dword ptr [EDX]
005013ca : MOV ECX,dword ptr [ESI + 0xa0]
005013d0 : PUSH -0x1
005013d2 : PUSH EAX
005013d3 : CALL 0x00544b40
005013d8 : MOV EDX,dword ptr [ESI]
005013da : MOV EAX,dword ptr [EDX + 0x40]
005013dd : MOV ECX,ESI
005013df : CALL EAX
005013e1 : POP EBX
005013e2 : TEST EAX,EAX
005013e4 : JZ 0x005013f0
005013e6 : OR dword ptr [EAX + 0xb00],0x400
005013f0 : MOV EAX,dword ptr [ESP + 0xc]
005013f4 : DEC dword ptr [EAX + 0x8]
005013f7 : MOV ECX,EAX
005013f9 : ADD EAX,0x8
005013fc : CMP dword ptr [EAX],0x0
005013ff : JNZ 0x00501408
00501401 : POP ESI
00501402 : POP EDI
00501403 : JMP 0x00525340
00501408 : POP ESI
00501409 : POP EDI
0050140a : RET
