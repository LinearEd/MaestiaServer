PROGRAM  : Maestia.exe
FUNCTION : FUN_00800b40
ENTRY    : 00800b40
BODY     : [[00800b40, 00800bed]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00800b40(void)

{
  ushort uVar1;
  ushort uVar2;
  int iVar3;
  int *piVar4;
  int *piVar5;
  int unaff_ESI;
  
  if ((*(char *)(unaff_ESI + 0x4a8) != '\0') &&
     ((*(short *)(unaff_ESI + 0x4ae) == 0x10 || (*(short *)(unaff_ESI + 0x4ae) == 0x20)))) {
    uVar1 = *(ushort *)(unaff_ESI + 0x4aa);
    uVar2 = *(ushort *)(unaff_ESI + 0x4ac);
    iVar3 = *(int *)(unaff_ESI + 0x178);
    *(undefined1 *)(unaff_ESI + 0x16c) = *(undefined1 *)(unaff_ESI + 0x4a9);
    *(uint *)(unaff_ESI + 0x31c) = (uint)*(ushort *)(unaff_ESI + 0x4b0);
    piVar4 = *(int **)(iVar3 + 0x38);
    *(uint *)(iVar3 + 0x20) = (uint)uVar1;
    *(uint *)(iVar3 + 0x24) = (uint)uVar2;
    piVar5 = (int *)*piVar4;
    while (piVar5 != piVar4) {
      FUN_00780d60();
      FUN_00416210();
      piVar4 = *(int **)(iVar3 + 0x38);
    }
    *(uint *)(iVar3 + 0x48) = (uint)uVar1;
    *(uint *)(iVar3 + 0x4c) = (uint)uVar2;
    FUN_00800760(unaff_ESI,*(undefined2 *)(unaff_ESI + 0x4ae));
    *(undefined1 *)(unaff_ESI + 0x4a8) = 0;
    return 1;
  }
  return 0;
}



============================================================
DISASSEMBLY
============================================================
00800b40 : PUSH EBP
00800b41 : MOV EBP,ESP
00800b43 : SUB ESP,0x8
00800b46 : CMP byte ptr [ESI + 0x4a8],0x0
00800b4d : PUSH EBX
00800b4e : PUSH EDI
00800b4f : JNZ 0x00800b59
00800b51 : XOR AL,AL
00800b53 : POP EDI
00800b54 : POP EBX
00800b55 : MOV ESP,EBP
00800b57 : POP EBP
00800b58 : RET
00800b59 : MOVZX EAX,word ptr [ESI + 0x4ae]
00800b60 : CMP AX,0x10
00800b64 : JZ 0x00800b6c
00800b66 : CMP AX,0x20
00800b6a : JNZ 0x00800b51
00800b6c : MOVZX ECX,word ptr [ESI + 0x4b0]
00800b73 : MOV AL,byte ptr [ESI + 0x4a9]
00800b79 : MOVZX EDX,word ptr [ESI + 0x4aa]
00800b80 : MOVZX EBX,word ptr [ESI + 0x4ac]
00800b87 : MOV EDI,dword ptr [ESI + 0x178]
00800b8d : MOV byte ptr [ESI + 0x16c],AL
00800b93 : MOV dword ptr [ESI + 0x31c],ECX
00800b99 : MOV ECX,dword ptr [EDI + 0x38]
00800b9c : MOV dword ptr [EDI + 0x20],EDX
00800b9f : MOV dword ptr [EDI + 0x24],EBX
00800ba2 : MOV EAX,dword ptr [ECX]
00800ba4 : MOV dword ptr [EBP + -0x8],EDX
00800ba7 : MOV dword ptr [EBP + -0x4],EAX
00800baa : CMP EAX,ECX
00800bac : JZ 0x00800bcb
00800bae : MOV EDI,EDI
00800bb0 : MOV ECX,dword ptr [EAX + 0x10]
00800bb3 : CALL 0x00780d60
00800bb8 : LEA EDX,[EBP + -0x4]
00800bbb : CALL 0x00416210
00800bc0 : MOV EAX,dword ptr [EBP + -0x4]
00800bc3 : CMP EAX,dword ptr [EDI + 0x38]
00800bc6 : JNZ 0x00800bb0
00800bc8 : MOV EDX,dword ptr [EBP + -0x8]
00800bcb : MOV dword ptr [EDI + 0x48],EDX
00800bce : MOV dword ptr [EDI + 0x4c],EBX
00800bd1 : MOVZX EDX,word ptr [ESI + 0x4ae]
00800bd8 : PUSH EDX
00800bd9 : PUSH ESI
00800bda : CALL 0x00800760
00800bdf : POP EDI
00800be0 : MOV byte ptr [ESI + 0x4a8],0x0
00800be7 : MOV AL,0x1
00800be9 : POP EBX
00800bea : MOV ESP,EBP
00800bec : POP EBP
00800bed : RET
