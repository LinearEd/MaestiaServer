PROGRAM  : Maestia.exe
FUNCTION : FUN_0085e880
ENTRY    : 0085e880
BODY     : [[0085e880, 0085ebdf]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_0085e880(int *param_1,undefined4 *param_2,float *param_3,undefined4 param_4)

{
  char cVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  undefined4 uStack_114;
  float fStack_110;
  undefined4 uStack_10c;
  undefined4 uStack_108;
  float fStack_104;
  float fStack_100;
  float fStack_fc;
  undefined4 uStack_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  float fStack_e8;
  undefined4 uStack_e4;
  float fStack_dc;
  undefined **appuStack_d4 [48];
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  uStack_c = 0xffffffff;
  puStack_10 = &LAB_00b44233;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if ((param_1[0xfa] != 0) &&
     (cVar1 = (**(code **)(*param_1 + 0x200))(DAT_00d66fa0 ^ (uint)&stack0xfffffed8), cVar1 == '\0')
     ) {
    fStack_110 = 0.0;
    uStack_f8 = 0;
    uStack_f4 = 0;
    uStack_f0 = 0;
    iVar2 = FUN_007d5b60(appuStack_d4);
    fVar4 = *(float *)(iVar2 + 0x24);
    uStack_c = 0xffffffff;
    uStack_e4 = param_2[2];
    uStack_108 = 0;
    uStack_ec = *param_2;
    fStack_e8 = (float)param_2[1] + 30.0;
    fStack_104 = *param_3 - *(float *)(iVar2 + 0x20);
    fStack_100 = param_3[1] - (fVar4 + 15.0);
    fStack_fc = param_3[2] - *(float *)(iVar2 + 0x28);
    appuStack_d4[0] = &PTR_FUN_00cd083c;
    D3DXVec3Normalize(&fStack_104,&fStack_104);
    iVar2 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&fStack_104,&uStack_114,&uStack_f8,
                         &uStack_108);
    if (iVar2 == 1) {
      if (fStack_110 < param_3[1]) {
        fStack_110 = param_3[1];
      }
      param_3[1] = fStack_110;
      ExceptionList = local_14;
      return 3;
    }
    if (iVar2 == 2) {
      if (fStack_110 < param_3[1]) {
        fStack_110 = param_3[1];
      }
      cVar1 = FUN_00876040();
      if (cVar1 == '\0') {
        fVar4 = fVar4 - (float)param_1[0x699];
        fVar3 = ABS((fStack_110 + DAT_00d72c24) - fVar4);
        if ((fVar3 <= 15.0) || (fStack_110 <= fVar4)) {
          param_3[1] = fStack_110 + 0.1;
          ExceptionList = local_14;
          return 2;
        }
        if (fVar3 <= 50.0) {
          ExceptionList = local_14;
          return 0;
        }
      }
      else {
        cVar1 = FUN_00876040();
        if ((cVar1 != '\0') && (param_1[0x67a] != 0)) {
          iVar2 = FUN_007cc270();
          fVar4 = *(float *)(iVar2 + 4);
          uStack_114 = *param_2;
          uStack_10c = param_2[2];
          fStack_dc = 0.0;
          fStack_110 = fVar4;
          iVar2 = FUN_007e9a90(*(undefined4 *)(DAT_00da93ec + 0xc),param_4,&uStack_f8,&uStack_108);
          if (iVar2 == 2) {
            if (fVar4 < fStack_dc + DAT_00d72c24) {
              ExceptionList = local_14;
              return 0;
            }
          }
          else if (iVar2 == 0) {
            ExceptionList = local_14;
            return 1;
          }
          param_3[1] = fStack_dc + 0.1;
          ExceptionList = local_14;
          return 2;
        }
      }
    }
  }
  ExceptionList = local_14;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
0085e880 : PUSH EBP
0085e881 : MOV EBP,ESP
0085e883 : AND ESP,0xfffffff8
0085e886 : PUSH -0x1
0085e888 : PUSH 0xb44233
0085e88d : MOV EAX,FS:[0x0]
0085e893 : PUSH EAX
0085e894 : SUB ESP,0x108
0085e89a : PUSH EBX
0085e89b : PUSH ESI
0085e89c : PUSH EDI
0085e89d : MOV EAX,[0x00d66fa0]
0085e8a2 : XOR EAX,ESP
0085e8a4 : PUSH EAX
0085e8a5 : LEA EAX,[ESP + 0x118]
0085e8ac : MOV FS:[0x0],EAX
0085e8b2 : MOV EBX,dword ptr [EBP + 0xc]
0085e8b5 : MOV ESI,dword ptr [EBP + 0x8]
0085e8b8 : CMP dword ptr [ESI + 0x3e8],0x0
0085e8bf : JZ 0x0085ebc3
0085e8c5 : MOV EAX,dword ptr [ESI]
0085e8c7 : MOV EDX,dword ptr [EAX + 0x200]
0085e8cd : MOV ECX,ESI
0085e8cf : CALL EDX
0085e8d1 : TEST AL,AL
0085e8d3 : JNZ 0x0085ebc3
0085e8d9 : XORPS XMM0,XMM0
0085e8dc : MOV ECX,dword ptr [ESI + 0x3e8]
0085e8e2 : LEA EAX,[ESP + 0x58]
0085e8e6 : PUSH EAX
0085e8e7 : MOVSS dword ptr [ESP + 0x20],XMM0
0085e8ed : MOVSS dword ptr [ESP + 0x38],XMM0
0085e8f3 : MOVSS dword ptr [ESP + 0x3c],XMM0
0085e8f9 : MOVSS dword ptr [ESP + 0x40],XMM0
0085e8ff : CALL 0x007d5b60
0085e904 : MOV dword ptr [ESP + 0x120],0x0
0085e90f : MOVSS XMM0,dword ptr [EAX + 0x24]
0085e914 : MOVSS XMM2,dword ptr [EAX + 0x20]
0085e919 : MOVSS XMM3,dword ptr [EAX + 0x28]
0085e91e : MOVSS dword ptr [ESP + 0x14],XMM0
0085e924 : MOV dword ptr [ESP + 0x120],0xffffffff
0085e92f : XORPS XMM1,XMM1
0085e932 : MOV ESI,dword ptr [EBP + 0x10]
0085e935 : ADDSS XMM0,dword ptr [0x00cdf234]
0085e93d : MOVSS XMM4,dword ptr [EBX + 0x8]
0085e942 : MOVSS dword ptr [ESP + 0x24],XMM1
0085e948 : MOVSS XMM1,dword ptr [EBX]
0085e94c : MOVSS dword ptr [ESP + 0x40],XMM1
0085e952 : MOVSS XMM1,dword ptr [EBX + 0x4]
0085e957 : ADDSS XMM1,dword ptr [0x00cdf12c]
0085e95f : MOVSS dword ptr [ESP + 0x44],XMM1
0085e965 : MOVSS XMM1,dword ptr [ESI]
0085e969 : SUBSS XMM1,XMM2
0085e96d : MOVSS XMM2,dword ptr [ESI + 0x4]
0085e972 : LEA ECX,[ESP + 0x28]
0085e976 : SUBSS XMM2,XMM0
0085e97a : MOVSS XMM0,dword ptr [ESI + 0x8]
0085e97f : PUSH ECX
0085e980 : MOV EDX,ECX
0085e982 : SUBSS XMM0,XMM3
0085e986 : PUSH EDX
0085e987 : MOV dword ptr [ESP + 0x60],0xcd083c
0085e98f : MOVSS dword ptr [ESP + 0x50],XMM4
0085e995 : MOVSS dword ptr [ESP + 0x30],XMM1
0085e99b : MOVSS dword ptr [ESP + 0x34],XMM2
0085e9a1 : MOVSS dword ptr [ESP + 0x38],XMM0
0085e9a7 : CALL 0x004ff722
0085e9ac : MOV EAX,[0x00da93ec]
0085e9b1 : MOV EAX,dword ptr [EAX + 0xc]
0085e9b4 : LEA ECX,[ESP + 0x24]
0085e9b8 : PUSH ECX
0085e9b9 : LEA EDX,[ESP + 0x38]
0085e9bd : PUSH EDX
0085e9be : LEA ECX,[ESP + 0x20]
0085e9c2 : PUSH ECX
0085e9c3 : LEA EDX,[ESP + 0x34]
0085e9c7 : PUSH EDX
0085e9c8 : PUSH EAX
0085e9c9 : LEA EDI,[ESP + 0x54]
0085e9cd : CALL 0x007e9d70
0085e9d2 : CMP EAX,0x1
0085e9d5 : JNZ 0x0085ea0c
0085e9d7 : MOVSS XMM0,dword ptr [ESI + 0x4]
0085e9dc : MOVSS XMM1,dword ptr [ESP + 0x1c]
0085e9e2 : COMISS XMM0,XMM1
0085e9e5 : JBE 0x0085e9ea
0085e9e7 : MOVAPS XMM1,XMM0
0085e9ea : MOVSS dword ptr [ESI + 0x4],XMM1
0085e9ef : MOV EAX,0x3
0085e9f4 : MOV ECX,dword ptr [ESP + 0x118]
0085e9fb : MOV dword ptr FS:[0x0],ECX
0085ea02 : POP ECX
0085ea03 : POP EDI
0085ea04 : POP ESI
0085ea05 : POP EBX
0085ea06 : MOV ESP,EBP
0085ea08 : POP EBP
0085ea09 : RET 0x14
0085ea0c : CMP EAX,0x2
0085ea0f : JNZ 0x0085ebc3
0085ea15 : MOVSS XMM0,dword ptr [ESI + 0x4]
0085ea1a : COMISS XMM0,dword ptr [ESP + 0x1c]
0085ea1f : JBE 0x0085ea27
0085ea21 : MOVSS dword ptr [ESP + 0x1c],XMM0
0085ea27 : MOV EAX,dword ptr [EBP + 0x8]
0085ea2a : MOV ECX,dword ptr [EAX + 0x138]
0085ea30 : MOV EDX,dword ptr [ECX + 0x4]
0085ea33 : LEA ESI,[EAX + 0x1c58]
0085ea39 : LEA EDI,[EDX + EAX*0x1 + 0x138]
0085ea40 : CALL 0x00876040
0085ea45 : TEST AL,AL
0085ea47 : JNZ 0x0085eae0
0085ea4d : MOV EAX,dword ptr [EBP + 0x8]
0085ea50 : MOVSS XMM2,dword ptr [ESP + 0x1c]
0085ea56 : MOVSS XMM1,dword ptr [ESP + 0x14]
0085ea5c : SUBSS XMM1,dword ptr [EAX + 0x1a64]
0085ea64 : MOVSS XMM3,dword ptr [0x00cdf350]
0085ea6c : MOVAPS XMM0,XMM2
0085ea6f : ADDSS XMM0,dword ptr [0x00d72c24]
0085ea77 : SUBSS XMM0,XMM1
0085ea7b : ANDPS XMM0,XMM3
0085ea7e : COMISS XMM0,dword ptr [0x00cdf234]
0085ea85 : JBE 0x0085eab3
0085ea87 : COMISS XMM2,XMM1
0085ea8a : JBE 0x0085eab3
0085ea8c : COMISS XMM0,dword ptr [0x00cdf214]
0085ea93 : JA 0x0085ebc3
0085ea99 : XOR EAX,EAX
0085ea9b : MOV ECX,dword ptr [ESP + 0x118]
0085eaa2 : MOV dword ptr FS:[0x0],ECX
0085eaa9 : POP ECX
0085eaaa : POP EDI
0085eaab : POP ESI
0085eaac : POP EBX
0085eaad : MOV ESP,EBP
0085eaaf : POP EBP
0085eab0 : RET 0x14
0085eab3 : MOV ECX,dword ptr [EBP + 0x10]
0085eab6 : ADDSS XMM2,dword ptr [0x00cdf0f0]
0085eabe : MOVSS dword ptr [ECX + 0x4],XMM2
0085eac3 : MOV EAX,0x2
0085eac8 : MOV ECX,dword ptr [ESP + 0x118]
0085eacf : MOV dword ptr FS:[0x0],ECX
0085ead6 : POP ECX
0085ead7 : POP EDI
0085ead8 : POP ESI
0085ead9 : POP EBX
0085eada : MOV ESP,EBP
0085eadc : POP EBP
0085eadd : RET 0x14
0085eae0 : CALL 0x00876040
0085eae5 : TEST AL,AL
0085eae7 : JZ 0x0085ebc3
0085eaed : MOV EDX,dword ptr [EBP + 0x8]
0085eaf0 : MOV ESI,dword ptr [EDX + 0x19e8]
0085eaf6 : TEST ESI,ESI
0085eaf8 : JZ 0x0085ebc3
0085eafe : CALL 0x007cc270
0085eb03 : MOVSS XMM0,dword ptr [EAX + 0x4]
0085eb08 : MOV EAX,[0x00da93ec]
0085eb0d : MOV EAX,dword ptr [EAX + 0xc]
0085eb10 : MOVSS XMM1,dword ptr [EBX]
0085eb14 : MOVSS XMM6,dword ptr [EBP + 0x18]
0085eb19 : LEA ECX,[ESP + 0x24]
0085eb1d : PUSH ECX
0085eb1e : MOV ECX,dword ptr [EBP + 0x14]
0085eb21 : LEA EDX,[ESP + 0x38]
0085eb25 : PUSH EDX
0085eb26 : MOVSS dword ptr [ESP + 0x1c],XMM0
0085eb2c : MOVSS dword ptr [ESP + 0x24],XMM0
0085eb32 : MOVSS XMM0,dword ptr [EBX + 0x8]
0085eb37 : PUSH ECX
0085eb38 : MOVSS dword ptr [ESP + 0x2c],XMM0
0085eb3e : XORPS XMM0,XMM0
0085eb41 : PUSH EAX
0085eb42 : LEA EDI,[ESP + 0x5c]
0085eb46 : LEA EAX,[ESP + 0x28]
0085eb4a : MOVSS dword ptr [ESP + 0x28],XMM1
0085eb50 : MOVSS dword ptr [ESP + 0x60],XMM0
0085eb56 : CALL 0x007e9a90
0085eb5b : MOVSS XMM0,dword ptr [ESP + 0x50]
0085eb61 : CMP EAX,0x2
0085eb64 : JNZ 0x0085eb92
0085eb66 : MOVAPS XMM1,XMM0
0085eb69 : ADDSS XMM1,dword ptr [0x00d72c24]
0085eb71 : COMISS XMM1,dword ptr [ESP + 0x14]
0085eb76 : JBE 0x0085eb96
0085eb78 : XOR EAX,EAX
0085eb7a : MOV ECX,dword ptr [ESP + 0x118]
0085eb81 : MOV dword ptr FS:[0x0],ECX
0085eb88 : POP ECX
0085eb89 : POP EDI
0085eb8a : POP ESI
0085eb8b : POP EBX
0085eb8c : MOV ESP,EBP
0085eb8e : POP EBP
0085eb8f : RET 0x14
0085eb92 : TEST EAX,EAX
0085eb94 : JZ 0x0085ebc3
0085eb96 : MOV EDX,dword ptr [EBP + 0x10]
0085eb99 : ADDSS XMM0,dword ptr [0x00cdf0f0]
0085eba1 : MOVSS dword ptr [EDX + 0x4],XMM0
0085eba6 : MOV EAX,0x2
0085ebab : MOV ECX,dword ptr [ESP + 0x118]
0085ebb2 : MOV dword ptr FS:[0x0],ECX
0085ebb9 : POP ECX
0085ebba : POP EDI
0085ebbb : POP ESI
0085ebbc : POP EBX
0085ebbd : MOV ESP,EBP
0085ebbf : POP EBP
0085ebc0 : RET 0x14
0085ebc3 : MOV EAX,0x1
0085ebc8 : MOV ECX,dword ptr [ESP + 0x118]
0085ebcf : MOV dword ptr FS:[0x0],ECX
0085ebd6 : POP ECX
0085ebd7 : POP EDI
0085ebd8 : POP ESI
0085ebd9 : POP EBX
0085ebda : MOV ESP,EBP
0085ebdc : POP EBP
0085ebdd : RET 0x14
