PROGRAM  : Maestia.exe
FUNCTION : FUN_009a52d0
ENTRY    : 009a52d0
BODY     : [[009a52d0, 009a5318] [009a5320, 009a552d]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009a52d0(int param_1)

{
  short sVar1;
  undefined4 *puVar2;
  int in_ECX;
  int iVar3;
  int in_EDX;
  int iVar4;
  uint uVar5;
  undefined1 local_50 [28];
  int *local_34 [2];
  undefined4 ***local_2c [5];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b21471;
  local_10 = ExceptionList;
  local_14 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  sVar1 = (short)((uint)in_ECX >> 0x10);
  if (sVar1 == 0xf00) {
    iVar3 = 0;
    do {
      if ((0x400U >> ((byte)iVar3 & 0x1f) & 1) != 0) {
        if (iVar3 == -1) {
          iVar3 = 0;
        }
        else {
          iVar3 = (&DAT_00da9cb8)[iVar3];
        }
        goto LAB_009a5346;
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < 0x20);
    iVar3 = 0;
LAB_009a5346:
    if (iVar3 == in_ECX) goto LAB_009a53c3;
    for (puVar2 = *(undefined4 **)(in_EDX + 0x78); puVar2 != *(undefined4 **)(in_EDX + 0x7c);
        puVar2 = puVar2 + 1) {
      if (*(int *)*puVar2 == in_ECX) goto LAB_009a5510;
    }
    local_34[0] = (int *)FUN_006f0760(8,"",0,(DAT_01725270 >> 3 & 1) == 0);
    if (local_34[0] == (int *)0x0) {
      local_34[0] = (int *)0x0;
    }
    else {
      *local_34[0] = 0;
      local_34[0][1] = 0;
    }
    local_34[0][1] = param_1;
    iVar3 = in_EDX + 0x74;
    *local_34[0] = in_ECX;
    iVar4 = *(int *)(in_EDX + 0x78);
    if (iVar4 == 0) {
      uVar5 = 0;
    }
    else {
LAB_009a54e5:
      uVar5 = *(int *)(iVar3 + 0xc) - iVar4 >> 2;
    }
  }
  else {
LAB_009a53c3:
    if (((sVar1 != 0xf02) && (sVar1 != 0xf01)) && (iVar3 = FUN_00702b00(local_14), iVar3 != in_ECX))
    {
      FUN_00404750(L"Invalid Table proto : %u");
      local_8 = 2;
      if (local_18 < 8) {
        local_2c[0] = local_2c;
      }
      FUN_00406460(local_2c[0]);
      local_8._0_1_ = 3;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                  (L"AvaGuiEmoticon::AddEmoticonList",0x236,local_50);
      }
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
      goto LAB_009a5510;
    }
    for (puVar2 = *(undefined4 **)(in_EDX + 0x88); puVar2 != *(undefined4 **)(in_EDX + 0x8c);
        puVar2 = puVar2 + 1) {
      if (*(int *)*puVar2 == in_ECX) goto LAB_009a5510;
    }
    local_34[0] = (int *)FUN_006f0760(8,"",0,(DAT_01725270 >> 3 & 1) == 0);
    if (local_34[0] == (int *)0x0) {
      local_34[0] = (int *)0x0;
    }
    else {
      *local_34[0] = 0;
      local_34[0][1] = 0;
    }
    local_34[0][1] = param_1;
    iVar3 = in_EDX + 0x84;
    *local_34[0] = in_ECX;
    iVar4 = *(int *)(in_EDX + 0x88);
    if (iVar4 != 0) goto LAB_009a54e5;
    uVar5 = 0;
  }
  local_8 = 0xffffffff;
  puVar2 = *(undefined4 **)(iVar3 + 8);
  if ((uint)((int)puVar2 - iVar4 >> 2) < uVar5) {
    *puVar2 = local_34[0];
    *(undefined4 **)(iVar3 + 8) = puVar2 + 1;
  }
  else {
    FUN_0042fe80(iVar3,puVar2,local_34);
  }
LAB_009a5510:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009a52d0 : PUSH EBP
009a52d1 : MOV EBP,ESP
009a52d3 : PUSH -0x1
009a52d5 : PUSH 0xb21471
009a52da : MOV EAX,FS:[0x0]
009a52e0 : PUSH EAX
009a52e1 : SUB ESP,0x40
009a52e4 : MOV EAX,[0x00d66fa0]
009a52e9 : XOR EAX,EBP
009a52eb : MOV dword ptr [EBP + -0x10],EAX
009a52ee : PUSH EBX
009a52ef : PUSH ESI
009a52f0 : PUSH EDI
009a52f1 : PUSH EAX
009a52f2 : LEA EAX,[EBP + -0xc]
009a52f5 : MOV FS:[0x0],EAX
009a52fb : MOV EBX,dword ptr [EBP + 0x8]
009a52fe : MOV ESI,ECX
009a5300 : MOV EAX,ESI
009a5302 : SHR EAX,0x10
009a5305 : MOV ECX,0xf00
009a530a : MOV EDI,EDX
009a530c : CMP AX,CX
009a530f : JNZ 0x009a53c3
009a5315 : XOR ECX,ECX
009a5317 : JMP 0x009a5320
009a5320 : MOV EDX,0x400
009a5325 : SHR EDX,CL
009a5327 : TEST DL,0x1
009a532a : JNZ 0x009a5336
009a532c : INC ECX
009a532d : CMP ECX,0x20
009a5330 : JL 0x009a5320
009a5332 : XOR ECX,ECX
009a5334 : JMP 0x009a5346
009a5336 : CMP ECX,-0x1
009a5339 : JNZ 0x009a533f
009a533b : XOR ECX,ECX
009a533d : JMP 0x009a5346
009a533f : MOV ECX,dword ptr [ECX*0x4 + 0xda9cb8]
009a5346 : CMP ECX,ESI
009a5348 : JZ 0x009a53c3
009a534a : MOV EAX,dword ptr [EDI + 0x78]
009a534d : MOV ECX,dword ptr [EDI + 0x7c]
009a5350 : CMP EAX,ECX
009a5352 : JZ 0x009a5365
009a5354 : MOV EDX,dword ptr [EAX]
009a5356 : CMP dword ptr [EDX],ESI
009a5358 : JZ 0x009a5510
009a535e : ADD EAX,0x4
009a5361 : CMP EAX,ECX
009a5363 : JNZ 0x009a5354
009a5365 : MOV EAX,[0x01725270]
009a536a : SHR EAX,0x3
009a536d : MOV ECX,0x0
009a5372 : AND EAX,0x1
009a5375 : SETZ CL
009a5378 : PUSH ECX
009a5379 : PUSH 0x0
009a537b : PUSH 0xbf1a4a
009a5380 : PUSH 0x8
009a5382 : CALL 0x006f0760
009a5387 : ADD ESP,0x10
009a538a : MOV dword ptr [EBP + -0x30],EAX
009a538d : XOR ECX,ECX
009a538f : MOV dword ptr [EBP + -0x4],ECX
009a5392 : CMP EAX,ECX
009a5394 : JZ 0x009a539d
009a5396 : MOV dword ptr [EAX],ECX
009a5398 : MOV dword ptr [EAX + 0x4],ECX
009a539b : JMP 0x009a539f
009a539d : XOR EAX,EAX
009a539f : MOV dword ptr [EBP + -0x4],0xffffffff
009a53a6 : MOV dword ptr [EAX + 0x4],EBX
009a53a9 : LEA ECX,[EDI + 0x74]
009a53ac : MOV dword ptr [EAX],ESI
009a53ae : MOV EDX,dword ptr [ECX + 0x4]
009a53b1 : MOV dword ptr [EBP + -0x30],EAX
009a53b4 : TEST EDX,EDX
009a53b6 : JNZ 0x009a54e5
009a53bc : XOR ESI,ESI
009a53be : JMP 0x009a54ed
009a53c3 : MOV ECX,0xf02
009a53c8 : CMP AX,CX
009a53cb : JZ 0x009a545a
009a53d1 : MOV EDX,0xf01
009a53d6 : CMP AX,DX
009a53d9 : JZ 0x009a545a
009a53db : MOV EAX,0x400
009a53e0 : CALL 0x00702b00
009a53e5 : CMP EAX,ESI
009a53e7 : JZ 0x009a545a
009a53e9 : PUSH ESI
009a53ea : PUSH 0xc89ba0
009a53ef : LEA ESI,[EBP + -0x2c]
009a53f2 : CALL 0x00404750
009a53f7 : ADD ESP,0x8
009a53fa : MOV EBX,0x2
009a53ff : MOV dword ptr [EBP + -0x4],EBX
009a5402 : CMP dword ptr [EBP + -0x14],0x8
009a5406 : MOV EAX,dword ptr [EBP + -0x28]
009a5409 : JNC 0x009a540e
009a540b : LEA EAX,[EBP + -0x28]
009a540e : PUSH EAX
009a540f : LEA ECX,[EBP + -0x4c]
009a5412 : CALL 0x00406460
009a5417 : MOV byte ptr [EBP + -0x4],0x3
009a541b : MOV EAX,[0x00da98e8]
009a5420 : MOV ECX,dword ptr [EAX]
009a5422 : TEST ECX,ECX
009a5424 : JZ 0x009a543b
009a5426 : MOV EDX,dword ptr [ECX]
009a5428 : MOV EDX,dword ptr [EDX + 0x14]
009a542b : LEA EAX,[EBP + -0x4c]
009a542e : PUSH EAX
009a542f : PUSH 0x236
009a5434 : PUSH 0xc89bd8
009a5439 : CALL EDX
009a543b : MOV byte ptr [EBP + -0x4],BL
009a543e : LEA ECX,[EBP + -0x4c]
009a5441 : CALL 0x00406560
009a5446 : MOV dword ptr [EBP + -0x4],0xffffffff
009a544d : LEA ECX,[EBP + -0x2c]
009a5450 : CALL 0x00406560
009a5455 : JMP 0x009a5510
009a545a : MOV EAX,dword ptr [EDI + 0x88]
009a5460 : MOV ECX,dword ptr [EDI + 0x8c]
009a5466 : CMP EAX,ECX
009a5468 : JZ 0x009a5481
009a546a : LEA EBX,[EBX]
009a5470 : MOV EDX,dword ptr [EAX]
009a5472 : CMP dword ptr [EDX],ESI
009a5474 : JZ 0x009a5510
009a547a : ADD EAX,0x4
009a547d : CMP EAX,ECX
009a547f : JNZ 0x009a5470
009a5481 : MOV EAX,[0x01725270]
009a5486 : SHR EAX,0x3
009a5489 : MOV ECX,0x0
009a548e : AND EAX,0x1
009a5491 : SETZ CL
009a5494 : PUSH ECX
009a5495 : PUSH 0x0
009a5497 : PUSH 0xbf1a4a
009a549c : PUSH 0x8
009a549e : CALL 0x006f0760
009a54a3 : ADD ESP,0x10
009a54a6 : MOV dword ptr [EBP + -0x30],EAX
009a54a9 : MOV dword ptr [EBP + -0x4],0x1
009a54b0 : TEST EAX,EAX
009a54b2 : JZ 0x009a54c3
009a54b4 : MOV dword ptr [EAX],0x0
009a54ba : MOV dword ptr [EAX + 0x4],0x0
009a54c1 : JMP 0x009a54c5
009a54c3 : XOR EAX,EAX
009a54c5 : MOV dword ptr [EBP + -0x4],0xffffffff
009a54cc : MOV dword ptr [EAX + 0x4],EBX
009a54cf : LEA ECX,[EDI + 0x84]
009a54d5 : MOV dword ptr [EAX],ESI
009a54d7 : MOV EDX,dword ptr [ECX + 0x4]
009a54da : MOV dword ptr [EBP + -0x30],EAX
009a54dd : TEST EDX,EDX
009a54df : JNZ 0x009a54e5
009a54e1 : XOR ESI,ESI
009a54e3 : JMP 0x009a54ed
009a54e5 : MOV ESI,dword ptr [ECX + 0xc]
009a54e8 : SUB ESI,EDX
009a54ea : SAR ESI,0x2
009a54ed : MOV EDI,dword ptr [ECX + 0x8]
009a54f0 : MOV EBX,EDI
009a54f2 : SUB EBX,EDX
009a54f4 : SAR EBX,0x2
009a54f7 : CMP EBX,ESI
009a54f9 : JNC 0x009a5505
009a54fb : MOV dword ptr [EDI],EAX
009a54fd : ADD EDI,0x4
009a5500 : MOV dword ptr [ECX + 0x8],EDI
009a5503 : JMP 0x009a5510
009a5505 : LEA EDX,[EBP + -0x30]
009a5508 : PUSH EDX
009a5509 : PUSH EDI
009a550a : PUSH ECX
009a550b : CALL 0x0042fe80
009a5510 : MOV ECX,dword ptr [EBP + -0xc]
009a5513 : MOV dword ptr FS:[0x0],ECX
009a551a : POP ECX
009a551b : POP EDI
009a551c : POP ESI
009a551d : POP EBX
009a551e : MOV ECX,dword ptr [EBP + -0x10]
009a5521 : XOR ECX,EBP
009a5523 : CALL 0x00633e6b
009a5528 : MOV ESP,EBP
009a552a : POP EBP
009a552b : RET 0x4
