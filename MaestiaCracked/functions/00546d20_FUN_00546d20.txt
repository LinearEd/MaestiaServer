PROGRAM  : Maestia.exe
FUNCTION : FUN_00546d20
ENTRY    : 00546d20
BODY     : [[00546d20, 00546d6a]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00546d20(void)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int in_ECX;
  
  iVar1 = *(int *)(in_ECX + 0xc);
  if (*(int *)(iVar1 + 8) == 0) {
    uVar2 = FUN_00515dd0(iVar1);
    iVar3 = FUN_00515840(0x50,0);
    if (iVar3 == 0) {
      uVar2 = 0;
    }
    else {
      uVar2 = FUN_00508200(uVar2,0);
    }
    if (*(GRefCountNTSImpl **)(iVar1 + 8) != (GRefCountNTSImpl *)0x0) {
      GRefCountNTSImpl::Release(*(GRefCountNTSImpl **)(iVar1 + 8));
    }
    *(undefined4 *)(iVar1 + 8) = uVar2;
    return uVar2;
  }
  return *(undefined4 *)(iVar1 + 8);
}



============================================================
DISASSEMBLY
============================================================
00546d20 : PUSH ESI
00546d21 : MOV ESI,dword ptr [ECX + 0xc]
00546d24 : CMP dword ptr [ESI + 0x8],0x0
00546d28 : JNZ 0x00546d66
00546d2a : PUSH EDI
00546d2b : PUSH ESI
00546d2c : CALL 0x00515dd0
00546d31 : MOV EDI,EAX
00546d33 : PUSH 0x0
00546d35 : PUSH 0x50
00546d37 : MOV ECX,EDI
00546d39 : CALL 0x00515840
00546d3e : TEST EAX,EAX
00546d40 : JZ 0x00546d50
00546d42 : PUSH 0x0
00546d44 : PUSH EDI
00546d45 : MOV ECX,EAX
00546d47 : CALL 0x00508200
00546d4c : MOV EDI,EAX
00546d4e : JMP 0x00546d52
00546d50 : XOR EDI,EDI
00546d52 : MOV ECX,dword ptr [ESI + 0x8]
00546d55 : TEST ECX,ECX
00546d57 : JZ 0x00546d5e
00546d59 : CALL 0x004ff7c0
00546d5e : MOV dword ptr [ESI + 0x8],EDI
00546d61 : MOV EAX,EDI
00546d63 : POP EDI
00546d64 : POP ESI
00546d65 : RET
00546d66 : MOV EAX,dword ptr [ESI + 0x8]
00546d69 : POP ESI
00546d6a : RET
