PROGRAM  : Maestia.exe
FUNCTION : FUN_009c8db0
ENTRY    : 009c8db0
BODY     : [[009c8db0, 009c8ed2]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009c8db0(void)

{
  uint uVar1;
  DWORD DVar2;
  int iVar3;
  int in_ECX;
  uint uVar4;
  undefined1 local_50 [28];
  uint local_34;
  undefined1 local_30 [28];
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b22331;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar1;
  if (*(char *)(in_ECX + 0x3c) != '\0') {
    DVar2 = timeGetTime();
    uVar4 = (((*(int *)(in_ECX + 0x44) + *(int *)(in_ECX + 0x40)) - DVar2) + 0x3de) / 1000;
    local_34 = uVar4;
    if (uVar4 == 0) {
      *(undefined1 *)(in_ECX + 0x3c) = 0;
      goto LAB_009c8eb7;
    }
    if (*(uint *)(in_ECX + 0x4c) != uVar4) {
      FUN_00406460(L"IDS_BATTLESTAGE_TIMER");
      local_8 = 0;
      iVar3 = FUN_0081d120(local_50);
      local_8._0_1_ = 1;
      if (*(uint *)(iVar3 + 0x18) < 8) {
        iVar3 = iVar3 + 4;
      }
      else {
        iVar3 = *(int *)(iVar3 + 4);
      }
      FUN_00404750(iVar3,uVar4);
      local_8._0_1_ = 3;
      FUN_00406560();
      local_8 = CONCAT31(local_8._1_3_,4);
      FUN_00406560();
      (**(code **)(**(int **)(*(int *)(in_ECX + 4) + 0x1a8) + 0x44))(local_30,3);
      *(uint *)(in_ECX + 0x4c) = local_34;
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  if (*(char *)(in_ECX + 0x8c) != '\0') {
    FUN_009c8c40(uVar1);
  }
LAB_009c8eb7:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
009c8db0 : PUSH EBP
009c8db1 : MOV EBP,ESP
009c8db3 : PUSH -0x1
009c8db5 : PUSH 0xb22331
009c8dba : MOV EAX,FS:[0x0]
009c8dc0 : PUSH EAX
009c8dc1 : SUB ESP,0x5c
009c8dc4 : MOV EAX,[0x00d66fa0]
009c8dc9 : XOR EAX,EBP
009c8dcb : MOV dword ptr [EBP + -0x10],EAX
009c8dce : PUSH EBX
009c8dcf : PUSH ESI
009c8dd0 : PUSH EDI
009c8dd1 : PUSH EAX
009c8dd2 : LEA EAX,[EBP + -0xc]
009c8dd5 : MOV FS:[0x0],EAX
009c8ddb : MOV EBX,ECX
009c8ddd : MOV AL,byte ptr [EBX + 0x3c]
009c8de0 : TEST AL,AL
009c8de2 : JZ 0x009c8ea7
009c8de8 : CALL dword ptr [0x00b85598]
009c8dee : MOV ECX,dword ptr [EBX + 0x44]
009c8df1 : ADD ECX,dword ptr [EBX + 0x40]
009c8df4 : SUB ECX,EAX
009c8df6 : ADD ECX,0x3de
009c8dfc : MOV EAX,0x10624dd3
009c8e01 : MUL ECX
009c8e03 : MOV ESI,EDX
009c8e05 : SHR ESI,0x6
009c8e08 : MOV dword ptr [EBP + -0x30],ESI
009c8e0b : TEST ESI,ESI
009c8e0d : JG 0x009c8e18
009c8e0f : MOV byte ptr [EBX + 0x3c],0x0
009c8e13 : JMP 0x009c8eb7
009c8e18 : CMP dword ptr [EBX + 0x4c],ESI
009c8e1b : JZ 0x009c8ea7
009c8e21 : PUSH 0xc9349c
009c8e26 : LEA ECX,[EBP + -0x4c]
009c8e29 : CALL 0x00406460
009c8e2e : MOV dword ptr [EBP + -0x4],0x0
009c8e35 : MOV ECX,dword ptr [0x0172491c]
009c8e3b : LEA EDX,[EBP + -0x4c]
009c8e3e : PUSH EDX
009c8e3f : LEA EDI,[EBP + -0x68]
009c8e42 : CALL 0x0081d120
009c8e47 : MOV byte ptr [EBP + -0x4],0x1
009c8e4b : CMP dword ptr [EAX + 0x18],0x8
009c8e4f : JC 0x009c8e56
009c8e51 : MOV EAX,dword ptr [EAX + 0x4]
009c8e54 : JMP 0x009c8e59
009c8e56 : ADD EAX,0x4
009c8e59 : PUSH ESI
009c8e5a : PUSH EAX
009c8e5b : LEA ESI,[EBP + -0x2c]
009c8e5e : CALL 0x00404750
009c8e63 : ADD ESP,0x8
009c8e66 : MOV byte ptr [EBP + -0x4],0x3
009c8e6a : LEA ECX,[EBP + -0x68]
009c8e6d : CALL 0x00406560
009c8e72 : MOV byte ptr [EBP + -0x4],0x4
009c8e76 : LEA ECX,[EBP + -0x4c]
009c8e79 : CALL 0x00406560
009c8e7e : MOV EAX,dword ptr [EBX + 0x4]
009c8e81 : MOV ECX,dword ptr [EAX + 0x1a8]
009c8e87 : MOV EDX,dword ptr [ECX]
009c8e89 : MOV EDX,dword ptr [EDX + 0x44]
009c8e8c : PUSH 0x3
009c8e8e : MOV EAX,ESI
009c8e90 : PUSH EAX
009c8e91 : CALL EDX
009c8e93 : MOV EAX,dword ptr [EBP + -0x30]
009c8e96 : MOV dword ptr [EBX + 0x4c],EAX
009c8e99 : MOV dword ptr [EBP + -0x4],0xffffffff
009c8ea0 : MOV ECX,ESI
009c8ea2 : CALL 0x00406560
009c8ea7 : CMP byte ptr [EBX + 0x8c],0x0
009c8eae : JZ 0x009c8eb7
009c8eb0 : MOV ESI,EBX
009c8eb2 : CALL 0x009c8c40
009c8eb7 : MOV ECX,dword ptr [EBP + -0xc]
009c8eba : MOV dword ptr FS:[0x0],ECX
009c8ec1 : POP ECX
009c8ec2 : POP EDI
009c8ec3 : POP ESI
009c8ec4 : POP EBX
009c8ec5 : MOV ECX,dword ptr [EBP + -0x10]
009c8ec8 : XOR ECX,EBP
009c8eca : CALL 0x00633e6b
009c8ecf : MOV ESP,EBP
009c8ed1 : POP EBP
009c8ed2 : RET
