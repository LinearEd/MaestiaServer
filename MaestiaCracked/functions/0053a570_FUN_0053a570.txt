PROGRAM  : Maestia.exe
FUNCTION : FUN_0053a570
ENTRY    : 0053a570
BODY     : [[0053a570, 0053a749]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0053a570(float *param_1)

{
  byte bVar1;
  byte bVar2;
  float *pfVar3;
  undefined4 uVar4;
  byte bVar5;
  int *in_ECX;
  uint uVar6;
  float10 extraout_ST0;
  float10 extraout_ST0_00;
  float10 extraout_ST0_01;
  float10 fVar7;
  uint local_8;
  
  pfVar3 = param_1;
  if (in_ECX[3] != 0) {
    in_ECX[2] = in_ECX[2] + 1;
  }
  in_ECX[3] = 0;
  bVar1 = *(byte *)(in_ECX[2] + *in_ECX);
  in_ECX[3] = 1;
  bVar2 = *(byte *)(in_ECX[2] + *in_ECX);
  in_ECX[3] = 2;
  uVar4 = FUN_00539d00(4);
  bVar5 = (byte)uVar4;
  if ((bVar2 & 0x40) == 0) {
    fVar7 = (float10)1;
    *param_1 = (float)fVar7;
    param_1[2] = (float)fVar7;
    param_1[4] = (float)fVar7;
  }
  else {
    local_8 = FUN_00539d00(uVar4);
    uVar6 = 1 << (bVar5 - 1 & 0x1f);
    if ((local_8 & uVar6) != 0) {
      local_8 = local_8 | -1 << (bVar5 & 0x1f);
    }
    *param_1 = (float)(int)local_8 * 0.00390625;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[2] = (float)((float10)(int)param_1 * extraout_ST0);
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[4] = (float)((float10)(int)param_1 * extraout_ST0_00);
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    fVar7 = extraout_ST0_01 * (float10)(int)param_1;
  }
  pfVar3[6] = (float)fVar7;
  if ((bVar1 & 0x80) != 0) {
    param_1 = (float *)FUN_00539d00(uVar4);
    uVar6 = 1 << (bVar5 - 1 & 0x1f);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[1] = (float)(int)param_1;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[3] = (float)(int)param_1;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[5] = (float)(int)param_1;
    param_1 = (float *)FUN_00539d00(uVar4);
    if (((uint)param_1 & uVar6) != 0) {
      param_1 = (float *)((uint)param_1 | -1 << (bVar5 & 0x1f));
    }
    pfVar3[7] = (float)(int)param_1;
    return;
  }
  pfVar3[1] = 0.0;
  pfVar3[3] = 0.0;
  pfVar3[5] = 0.0;
  pfVar3[7] = 0.0;
  return;
}



============================================================
DISASSEMBLY
============================================================
0053a570 : SUB ESP,0x8
0053a573 : PUSH EBX
0053a574 : PUSH EBP
0053a575 : PUSH ESI
0053a576 : MOV ESI,ECX
0053a578 : CMP dword ptr [ESI + 0xc],0x0
0053a57c : PUSH EDI
0053a57d : JZ 0x0053a582
0053a57f : INC dword ptr [ESI + 0x8]
0053a582 : MOV ECX,dword ptr [ESI]
0053a584 : MOV EAX,dword ptr [ESI + 0x8]
0053a587 : ADD EAX,ECX
0053a589 : MOV dword ptr [ESI + 0xc],0x0
0053a590 : MOVZX EDX,byte ptr [EAX]
0053a593 : MOV ECX,0x0
0053a598 : AND EDX,0x80
0053a59e : SETNZ CL
0053a5a1 : MOV EBP,0x1
0053a5a6 : MOV dword ptr [ESI + 0xc],EBP
0053a5a9 : MOVZX EBX,byte ptr [EAX]
0053a5ac : PUSH 0x4
0053a5ae : MOV dword ptr [ESP + 0x18],ECX
0053a5b2 : MOV ECX,ESI
0053a5b4 : AND EBX,0x40
0053a5b7 : MOV dword ptr [ESI + 0xc],0x2
0053a5be : CALL 0x00539d00
0053a5c3 : MOV EDI,EAX
0053a5c5 : TEST EBX,EBX
0053a5c7 : JZ 0x0053a672
0053a5cd : PUSH EDI
0053a5ce : MOV ECX,ESI
0053a5d0 : CALL 0x00539d00
0053a5d5 : LEA ECX,[EDI + -0x1]
0053a5d8 : SHL EBP,CL
0053a5da : MOV dword ptr [ESP + 0x10],EAX
0053a5de : TEST EAX,EBP
0053a5e0 : JZ 0x0053a5ef
0053a5e2 : OR EDX,0xffffffff
0053a5e5 : MOV ECX,EDI
0053a5e7 : SHL EDX,CL
0053a5e9 : OR EAX,EDX
0053a5eb : MOV dword ptr [ESP + 0x10],EAX
0053a5ef : FILD dword ptr [ESP + 0x10]
0053a5f3 : MOV EBX,dword ptr [ESP + 0x1c]
0053a5f7 : FLD double ptr [0x00b86f00]
0053a5fd : PUSH EDI
0053a5fe : MOV ECX,ESI
0053a600 : FMUL ST1
0053a602 : FXCH
0053a604 : FSTP float ptr [EBX]
0053a606 : CALL 0x00539d00
0053a60b : MOV dword ptr [ESP + 0x1c],EAX
0053a60f : TEST EAX,EBP
0053a611 : JZ 0x0053a620
0053a613 : OR EDX,0xffffffff
0053a616 : MOV ECX,EDI
0053a618 : SHL EDX,CL
0053a61a : OR EAX,EDX
0053a61c : MOV dword ptr [ESP + 0x1c],EAX
0053a620 : FILD dword ptr [ESP + 0x1c]
0053a624 : PUSH EDI
0053a625 : MOV ECX,ESI
0053a627 : FMUL ST1
0053a629 : FSTP float ptr [EBX + 0x8]
0053a62c : CALL 0x00539d00
0053a631 : MOV dword ptr [ESP + 0x1c],EAX
0053a635 : TEST EAX,EBP
0053a637 : JZ 0x0053a646
0053a639 : OR EDX,0xffffffff
0053a63c : MOV ECX,EDI
0053a63e : SHL EDX,CL
0053a640 : OR EAX,EDX
0053a642 : MOV dword ptr [ESP + 0x1c],EAX
0053a646 : FILD dword ptr [ESP + 0x1c]
0053a64a : PUSH EDI
0053a64b : MOV ECX,ESI
0053a64d : FMUL ST1
0053a64f : FSTP float ptr [EBX + 0x10]
0053a652 : CALL 0x00539d00
0053a657 : MOV dword ptr [ESP + 0x1c],EAX
0053a65b : TEST EAX,EBP
0053a65d : JZ 0x0053a66c
0053a65f : OR EDX,0xffffffff
0053a662 : MOV ECX,EDI
0053a664 : SHL EDX,CL
0053a666 : OR EAX,EDX
0053a668 : MOV dword ptr [ESP + 0x1c],EAX
0053a66c : FIMUL dword ptr [ESP + 0x1c]
0053a670 : JMP 0x0053a680
0053a672 : FLD1
0053a674 : MOV EBX,dword ptr [ESP + 0x1c]
0053a678 : FST float ptr [EBX]
0053a67a : FST float ptr [EBX + 0x8]
0053a67d : FST float ptr [EBX + 0x10]
0053a680 : CMP dword ptr [ESP + 0x14],0x0
0053a685 : FSTP float ptr [EBX + 0x18]
0053a688 : JZ 0x0053a732
0053a68e : PUSH EDI
0053a68f : MOV ECX,ESI
0053a691 : CALL 0x00539d00
0053a696 : LEA ECX,[EDI + -0x1]
0053a699 : MOV EBP,0x1
0053a69e : SHL EBP,CL
0053a6a0 : MOV dword ptr [ESP + 0x1c],EAX
0053a6a4 : TEST EAX,EBP
0053a6a6 : JZ 0x0053a6b5
0053a6a8 : OR EDX,0xffffffff
0053a6ab : MOV ECX,EDI
0053a6ad : SHL EDX,CL
0053a6af : OR EAX,EDX
0053a6b1 : MOV dword ptr [ESP + 0x1c],EAX
0053a6b5 : FILD dword ptr [ESP + 0x1c]
0053a6b9 : PUSH EDI
0053a6ba : MOV ECX,ESI
0053a6bc : FSTP float ptr [EBX + 0x4]
0053a6bf : CALL 0x00539d00
0053a6c4 : MOV dword ptr [ESP + 0x1c],EAX
0053a6c8 : TEST EAX,EBP
0053a6ca : JZ 0x0053a6d9
0053a6cc : OR EDX,0xffffffff
0053a6cf : MOV ECX,EDI
0053a6d1 : SHL EDX,CL
0053a6d3 : OR EAX,EDX
0053a6d5 : MOV dword ptr [ESP + 0x1c],EAX
0053a6d9 : FILD dword ptr [ESP + 0x1c]
0053a6dd : PUSH EDI
0053a6de : MOV ECX,ESI
0053a6e0 : FSTP float ptr [EBX + 0xc]
0053a6e3 : CALL 0x00539d00
0053a6e8 : MOV dword ptr [ESP + 0x1c],EAX
0053a6ec : TEST EAX,EBP
0053a6ee : JZ 0x0053a6fd
0053a6f0 : OR EDX,0xffffffff
0053a6f3 : MOV ECX,EDI
0053a6f5 : SHL EDX,CL
0053a6f7 : OR EAX,EDX
0053a6f9 : MOV dword ptr [ESP + 0x1c],EAX
0053a6fd : FILD dword ptr [ESP + 0x1c]
0053a701 : PUSH EDI
0053a702 : MOV ECX,ESI
0053a704 : FSTP float ptr [EBX + 0x14]
0053a707 : CALL 0x00539d00
0053a70c : MOV dword ptr [ESP + 0x1c],EAX
0053a710 : TEST EAX,EBP
0053a712 : JZ 0x0053a721
0053a714 : OR EDX,0xffffffff
0053a717 : MOV ECX,EDI
0053a719 : SHL EDX,CL
0053a71b : OR EAX,EDX
0053a71d : MOV dword ptr [ESP + 0x1c],EAX
0053a721 : FILD dword ptr [ESP + 0x1c]
0053a725 : POP EDI
0053a726 : POP ESI
0053a727 : POP EBP
0053a728 : FSTP float ptr [EBX + 0x1c]
0053a72b : POP EBX
0053a72c : ADD ESP,0x8
0053a72f : RET 0x4
0053a732 : FLDZ
0053a734 : POP EDI
0053a735 : FST float ptr [EBX + 0x4]
0053a738 : POP ESI
0053a739 : FST float ptr [EBX + 0xc]
0053a73c : POP EBP
0053a73d : FST float ptr [EBX + 0x14]
0053a740 : FSTP float ptr [EBX + 0x1c]
0053a743 : POP EBX
0053a744 : ADD ESP,0x8
0053a747 : RET 0x4
