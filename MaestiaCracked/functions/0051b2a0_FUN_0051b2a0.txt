PROGRAM  : Maestia.exe
FUNCTION : FUN_0051b2a0
ENTRY    : 0051b2a0
BODY     : [[0051b2a0, 0051b335]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0051b2a0(char *param_1,char *param_2,int param_3)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  char *pcVar5;
  
  iVar4 = param_3;
  pcVar5 = param_2;
  if (param_3 == 0) {
    pcVar5 = param_2 + 1;
    do {
      cVar1 = *param_2;
      param_2 = param_2 + 1;
    } while (cVar1 != '\0');
    return -((int)param_2 - (int)pcVar5);
  }
  do {
    iVar3 = (int)*param_1;
    iVar2 = iVar3 + 0x20;
    if (0x19 < iVar3 - 0x41U) {
      iVar2 = iVar3;
    }
    iVar3 = (int)*pcVar5;
    param_1 = param_1 + 1;
    if (iVar3 - 0x41U < 0x1a) {
      iVar3 = iVar3 + 0x20;
    }
    pcVar5 = pcVar5 + 1;
    iVar4 = iVar4 + -1;
    if ((iVar4 == 0) || (iVar2 == 0)) break;
    if (iVar2 != iVar3) goto LAB_0051b317;
  } while (*pcVar5 != '\0');
  if ((iVar2 == iVar3) && ((iVar4 != 0 || (*pcVar5 != '\0')))) {
    pcVar5 = param_2 + 1;
    do {
      cVar1 = *param_2;
      param_2 = param_2 + 1;
    } while (cVar1 != '\0');
    return param_3 - ((int)param_2 - (int)pcVar5);
  }
LAB_0051b317:
  return iVar2 - iVar3;
}



============================================================
DISASSEMBLY
============================================================
0051b2a0 : PUSH EBX
0051b2a1 : MOV EBX,dword ptr [ESP + 0x10]
0051b2a5 : TEST EBX,EBX
0051b2a7 : JZ 0x0051b320
0051b2a9 : PUSH ESI
0051b2aa : MOV ESI,dword ptr [ESP + 0x10]
0051b2ae : PUSH EDI
0051b2af : MOV EDI,dword ptr [ESP + 0x10]
0051b2b3 : MOV dword ptr [ESP + 0x18],EBX
0051b2b7 : MOV ECX,ESI
0051b2b9 : PUSH EBP
0051b2ba : LEA EBX,[EBX]
0051b2c0 : MOVSX EDX,byte ptr [EDI]
0051b2c3 : LEA EAX,[EDX + -0x41]
0051b2c6 : CMP EAX,0x19
0051b2c9 : LEA EAX,[EDX + 0x20]
0051b2cc : JBE 0x0051b2d0
0051b2ce : MOV EAX,EDX
0051b2d0 : MOVSX EDX,byte ptr [ESI]
0051b2d3 : LEA EBP,[EDX + -0x41]
0051b2d6 : INC EDI
0051b2d7 : CMP EBP,0x19
0051b2da : JA 0x0051b2df
0051b2dc : ADD EDX,0x20
0051b2df : INC ESI
0051b2e0 : SUB EBX,0x1
0051b2e3 : JZ 0x0051b2f2
0051b2e5 : TEST EAX,EAX
0051b2e7 : JZ 0x0051b2f2
0051b2e9 : CMP EAX,EDX
0051b2eb : JNZ 0x0051b317
0051b2ed : CMP byte ptr [ESI],0x0
0051b2f0 : JNZ 0x0051b2c0
0051b2f2 : CMP EAX,EDX
0051b2f4 : JNZ 0x0051b317
0051b2f6 : TEST EBX,EBX
0051b2f8 : JNZ 0x0051b2fe
0051b2fa : CMP byte ptr [ESI],BL
0051b2fc : JZ 0x0051b317
0051b2fe : LEA ESI,[ECX + 0x1]
0051b301 : MOV DL,byte ptr [ECX]
0051b303 : INC ECX
0051b304 : TEST DL,DL
0051b306 : JNZ 0x0051b301
0051b308 : MOV EAX,dword ptr [ESP + 0x1c]
0051b30c : POP EBP
0051b30d : POP EDI
0051b30e : SUB ECX,ESI
0051b310 : POP ESI
0051b311 : SUB EAX,ECX
0051b313 : POP EBX
0051b314 : RET 0xc
0051b317 : POP EBP
0051b318 : POP EDI
0051b319 : POP ESI
0051b31a : SUB EAX,EDX
0051b31c : POP EBX
0051b31d : RET 0xc
0051b320 : MOV EAX,dword ptr [ESP + 0xc]
0051b324 : LEA EDX,[EAX + 0x1]
0051b327 : MOV CL,byte ptr [EAX]
0051b329 : INC EAX
0051b32a : TEST CL,CL
0051b32c : JNZ 0x0051b327
0051b32e : SUB EAX,EDX
0051b330 : NEG EAX
0051b332 : POP EBX
0051b333 : RET 0xc
