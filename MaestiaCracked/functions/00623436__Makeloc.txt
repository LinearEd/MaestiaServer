PROGRAM  : Maestia.exe
FUNCTION : _Makeloc
ENTRY    : 00623436
BODY     : [[00623436, 0062365c]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    private: static class std::locale::_Locimp * __cdecl std::locale::_Locimp::_Makeloc(class
   std::_Locinfo const &,int,class std::locale::_Locimp *,class std::locale const *)
   
   Library: Visual Studio 2008 Release */

_Locimp * __cdecl
std::locale::_Locimp::_Makeloc(_Locinfo *param_1,int param_2,_Locimp *param_3,locale *param_4)

{
  int iVar1;
  facet *pfVar2;
  uint uVar3;
  uint uVar4;
  undefined4 uVar5;
  undefined1 local_30 [28];
  uint local_14;
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x20;
  local_8 = 0x623442;
  local_14 = param_2 & 2;
  if (local_14 != 0) {
    if (param_4 == (locale *)0x0) {
      iVar1 = FUN_006f0300(0x18);
      if (iVar1 == 0) {
        pfVar2 = (facet *)0x0;
      }
      else {
        pfVar2 = (facet *)FUN_004d0790(param_1,0);
      }
      uVar3 = FUN_004d03e0();
    }
    else {
      uVar3 = FUN_004d03e0();
      pfVar2 = (facet *)FUN_004d3ca0(param_4);
    }
    _Addfac(param_3,pfVar2,uVar3);
  }
  uVar3 = param_2 & 8;
  if (uVar3 != 0) {
    if (param_4 == (locale *)0x0) {
      iVar1 = FUN_006f0300(0x10);
      if (iVar1 == 0) {
        pfVar2 = (facet *)0x0;
      }
      else {
        pfVar2 = (facet *)FID_conflict_num_put<char,class_std::ostreambuf_iterator<char,struct_std::char_traits<char>_>_>
                                    (param_1,0);
      }
      uVar4 = FUN_004d03e0();
    }
    else {
      uVar4 = FUN_004d03e0();
      pfVar2 = (facet *)::use_facet<>(param_4);
    }
    _Addfac(param_3,pfVar2,uVar4);
  }
  if (uVar3 != 0) {
    if (param_4 == (locale *)0x0) {
      iVar1 = FUN_006f0300(0x10);
      if (iVar1 == 0) {
        pfVar2 = (facet *)0x0;
      }
      else {
        pfVar2 = (facet *)FUN_004d4580(param_1,0);
      }
      uVar4 = FUN_004d03e0();
    }
    else {
      uVar4 = FUN_004d03e0();
      pfVar2 = (facet *)FUN_004d3df0(param_4);
    }
    _Addfac(param_3,pfVar2,uVar4);
    if (uVar3 != 0) {
      if (param_4 == (locale *)0x0) {
        iVar1 = FUN_006f0300(0x18);
        local_8 = 0xe;
        if (iVar1 == 0) {
          pfVar2 = (facet *)0x0;
        }
        else {
          pfVar2 = (facet *)FUN_004d4650(param_1,0,0);
        }
        local_8 = 0xffffffff;
        uVar3 = FUN_004d03e0();
      }
      else {
        uVar3 = FUN_004d03e0();
        pfVar2 = (facet *)FUN_004d4090(param_4);
      }
      _Addfac(param_3,pfVar2,uVar3);
    }
  }
  if (local_14 != 0) {
    if (param_4 == (locale *)0x0) {
      pfVar2 = (facet *)FUN_006f0300(8);
      if (pfVar2 == (facet *)0x0) {
        pfVar2 = (facet *)0x0;
      }
      else {
        *(undefined4 *)(pfVar2 + 4) = 0;
        *(undefined ***)pfVar2 = codecvt<char,char,int>::vftable;
      }
      uVar3 = FUN_004d03e0();
    }
    else {
      uVar3 = FUN_004d03e0();
      pfVar2 = (facet *)FUN_004d3f50(param_4);
    }
    _Addfac(param_3,pfVar2,uVar3);
  }
  _Makexloc(param_1,param_2,param_3,param_4);
  FID_conflict__Makewloc(param_1,param_2,param_3,param_4);
  FID_conflict__Makewloc(param_1,param_2,param_3,param_4);
  *(uint *)(param_3 + 0x10) = *(uint *)(param_3 + 0x10) | param_2;
  uVar5 = FUN_00451600(local_30);
  local_8 = 0x12;
  FUN_00403f80(uVar5);
  FUN_00405260(1,0);
  return param_3;
}



============================================================
DISASSEMBLY
============================================================
00623436 : PUSH 0x20
00623438 : MOV EAX,0xb0b5e5
0062343d : CALL 0x00640e1d
00623442 : MOV EAX,dword ptr [EBP + 0xc]
00623445 : XOR EDI,EDI
00623447 : MOV dword ptr [EBP + -0x10],EDI
0062344a : MOV ESI,dword ptr [EBP + 0x10]
0062344d : AND EAX,0x2
00623450 : MOV dword ptr [EBP + -0x10],EAX
00623453 : JZ 0x006234a1
00623455 : CMP dword ptr [EBP + 0x14],EDI
00623458 : JNZ 0x00623485
0062345a : PUSH 0x18
0062345c : CALL 0x006f0300
00623461 : POP ECX
00623462 : CMP EAX,EDI
00623464 : JZ 0x00623475
00623466 : PUSH EDI
00623467 : PUSH dword ptr [EBP + 0x8]
0062346a : MOV ECX,EAX
0062346c : CALL 0x004d0790
00623471 : MOV EBX,EAX
00623473 : JMP 0x00623477
00623475 : XOR EBX,EBX
00623477 : MOV ECX,0xd7b4ec
0062347c : CALL 0x004d03e0
00623481 : PUSH EAX
00623482 : PUSH EBX
00623483 : JMP 0x0062349a
00623485 : MOV ECX,0xd7b4ec
0062348a : CALL 0x004d03e0
0062348f : PUSH EAX
00623490 : PUSH dword ptr [EBP + 0x14]
00623493 : CALL 0x004d3ca0
00623498 : POP ECX
00623499 : PUSH EAX
0062349a : MOV ECX,ESI
0062349c : CALL 0x00623162
006234a1 : MOV EAX,dword ptr [EBP + 0xc]
006234a4 : AND EAX,0x8
006234a7 : MOV dword ptr [EBP + 0x10],EAX
006234aa : JZ 0x006234f8
006234ac : CMP dword ptr [EBP + 0x14],EDI
006234af : JNZ 0x006234dc
006234b1 : PUSH 0x10
006234b3 : CALL 0x006f0300
006234b8 : POP ECX
006234b9 : CMP EAX,EDI
006234bb : JZ 0x006234cc
006234bd : PUSH EDI
006234be : PUSH dword ptr [EBP + 0x8]
006234c1 : MOV ECX,EAX
006234c3 : CALL 0x006230b6
006234c8 : MOV EBX,EAX
006234ca : JMP 0x006234ce
006234cc : XOR EBX,EBX
006234ce : MOV ECX,0xd7b4d8
006234d3 : CALL 0x004d03e0
006234d8 : PUSH EAX
006234d9 : PUSH EBX
006234da : JMP 0x006234f1
006234dc : MOV ECX,0xd7b4d8
006234e1 : CALL 0x004d03e0
006234e6 : PUSH EAX
006234e7 : PUSH dword ptr [EBP + 0x14]
006234ea : CALL 0x00623399
006234ef : POP ECX
006234f0 : PUSH EAX
006234f1 : MOV ECX,ESI
006234f3 : CALL 0x00623162
006234f8 : CMP dword ptr [EBP + 0x10],EDI
006234fb : JZ 0x006235ad
00623501 : CMP dword ptr [EBP + 0x14],EDI
00623504 : JNZ 0x00623531
00623506 : PUSH 0x10
00623508 : CALL 0x006f0300
0062350d : POP ECX
0062350e : CMP EAX,EDI
00623510 : JZ 0x00623521
00623512 : PUSH EDI
00623513 : PUSH dword ptr [EBP + 0x8]
00623516 : MOV ECX,EAX
00623518 : CALL 0x004d4580
0062351d : MOV EBX,EAX
0062351f : JMP 0x00623523
00623521 : XOR EBX,EBX
00623523 : MOV ECX,0x1728a00
00623528 : CALL 0x004d03e0
0062352d : PUSH EAX
0062352e : PUSH EBX
0062352f : JMP 0x00623546
00623531 : MOV ECX,0x1728a00
00623536 : CALL 0x004d03e0
0062353b : PUSH EAX
0062353c : PUSH dword ptr [EBP + 0x14]
0062353f : CALL 0x004d3df0
00623544 : POP ECX
00623545 : PUSH EAX
00623546 : MOV ECX,ESI
00623548 : CALL 0x00623162
0062354d : CMP dword ptr [EBP + 0x10],EDI
00623550 : JZ 0x006235ad
00623552 : CMP dword ptr [EBP + 0x14],EDI
00623555 : JNZ 0x00623591
00623557 : PUSH 0x18
00623559 : CALL 0x006f0300
0062355e : POP ECX
0062355f : MOV ECX,EAX
00623561 : MOV dword ptr [EBP + 0x10],ECX
00623564 : MOV dword ptr [EBP + -0x4],0xe
0062356b : CMP ECX,EDI
0062356d : JZ 0x0062357d
0062356f : PUSH EDI
00623570 : PUSH EDI
00623571 : PUSH dword ptr [EBP + 0x8]
00623574 : CALL 0x004d4650
00623579 : MOV EBX,EAX
0062357b : JMP 0x0062357f
0062357d : XOR EBX,EBX
0062357f : OR dword ptr [EBP + -0x4],0xffffffff
00623583 : MOV ECX,0x1728a04
00623588 : CALL 0x004d03e0
0062358d : PUSH EAX
0062358e : PUSH EBX
0062358f : JMP 0x006235a6
00623591 : MOV ECX,0x1728a04
00623596 : CALL 0x004d03e0
0062359b : PUSH EAX
0062359c : PUSH dword ptr [EBP + 0x14]
0062359f : CALL 0x004d4090
006235a4 : POP ECX
006235a5 : PUSH EAX
006235a6 : MOV ECX,ESI
006235a8 : CALL 0x00623162
006235ad : CMP dword ptr [EBP + -0x10],EDI
006235b0 : JZ 0x006235fc
006235b2 : CMP dword ptr [EBP + 0x14],EDI
006235b5 : JNZ 0x006235e0
006235b7 : PUSH 0x8
006235b9 : CALL 0x006f0300
006235be : POP ECX
006235bf : CMP EAX,EDI
006235c1 : JZ 0x006235d0
006235c3 : MOV dword ptr [EAX + 0x4],EDI
006235c6 : MOV dword ptr [EAX],0xb959f4
006235cc : MOV EBX,EAX
006235ce : JMP 0x006235d2
006235d0 : XOR EBX,EBX
006235d2 : MOV ECX,0x17289fc
006235d7 : CALL 0x004d03e0
006235dc : PUSH EAX
006235dd : PUSH EBX
006235de : JMP 0x006235f5
006235e0 : MOV ECX,0x17289fc
006235e5 : CALL 0x004d03e0
006235ea : PUSH EAX
006235eb : PUSH dword ptr [EBP + 0x14]
006235ee : CALL 0x004d3f50
006235f3 : POP ECX
006235f4 : PUSH EAX
006235f5 : MOV ECX,ESI
006235f7 : CALL 0x00623162
006235fc : PUSH dword ptr [EBP + 0x14]
006235ff : MOV EBX,dword ptr [EBP + 0x8]
00623602 : PUSH ESI
00623603 : PUSH dword ptr [EBP + 0xc]
00623606 : PUSH EBX
00623607 : CALL 0x00632ea6
0062360c : PUSH dword ptr [EBP + 0x14]
0062360f : PUSH ESI
00623610 : PUSH dword ptr [EBP + 0xc]
00623613 : PUSH EBX
00623614 : CALL 0x0062fbc6
00623619 : PUSH dword ptr [EBP + 0x14]
0062361c : PUSH ESI
0062361d : PUSH dword ptr [EBP + 0xc]
00623620 : PUSH EBX
00623621 : CALL 0x00630057
00623626 : MOV EAX,dword ptr [EBP + 0xc]
00623629 : OR dword ptr [ESI + 0x10],EAX
0062362c : ADD ESP,0x30
0062362f : LEA EAX,[EBP + -0x2c]
00623632 : PUSH EAX
00623633 : MOV ECX,EBX
00623635 : CALL 0x00451600
0062363a : PUSH EAX
0062363b : LEA ECX,[ESI + 0x18]
0062363e : MOV dword ptr [EBP + -0x4],0x12
00623645 : CALL 0x00403f80
0062364a : PUSH EDI
0062364b : PUSH 0x1
0062364d : LEA ECX,[EBP + -0x2c]
00623650 : CALL 0x00405260
00623655 : MOV EAX,ESI
00623657 : CALL 0x00640ebc
0062365c : RET
