PROGRAM  : Maestia.exe
FUNCTION : FUN_0094a390
ENTRY    : 0094a390
BODY     : [[0094a390, 0094a4c8] [0094a4cf, 0094a511]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0094a390(int param_1,undefined4 param_2)

{
  int *piVar1;
  int *_Dst;
  rsize_t _DstSize;
  uint uVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b2cf0e;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_14 = uVar2;
  iVar3 = FUN_009f2a00(param_2);
  if (iVar3 == 0) {
    piVar1 = *(int **)(param_1 + 100);
    puVar4 = (undefined4 *)FUN_004268b0(*(undefined4 *)(param_1 + 0x60),piVar1,param_2,uVar2);
    _Dst = (int *)*puVar4;
    if (_Dst == piVar1) {
      FUN_00404750(L"Can\'t find pet from container.. key[%u]",param_2);
      local_8 = 1;
      if ((int *)*DAT_00da98e8 != (int *)0x0) {
        (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiPetList::DeleteMyPet",0x3a2,local_30);
      }
      local_8 = 0xffffffff;
      if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_2c = 0;
      local_18 = 7;
      local_1c = 0;
    }
    else {
      if (*_Dst != 0) {
        FUN_00426790(*_Dst);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      iVar3 = *(int *)(param_1 + 100) - (int)(_Dst + 1) >> 2;
      if (0 < iVar3) {
        _DstSize = iVar3 * 4;
        _memmove_s(_Dst,_DstSize,_Dst + 1,_DstSize);
      }
      *(int *)(param_1 + 100) = *(int *)(param_1 + 100) + -4;
    }
  }
  else {
    FUN_00404750(L"Found pet from ItemMgr.. key[%u]",param_2);
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiPetList::DeleteMyPet",0x397,local_30);
    }
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_2c = 0;
    local_18 = 7;
    local_1c = 0;
  }
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
0094a390 : PUSH EBP
0094a391 : MOV EBP,ESP
0094a393 : PUSH -0x1
0094a395 : PUSH 0xb2cf0e
0094a39a : MOV EAX,FS:[0x0]
0094a3a0 : PUSH EAX
0094a3a1 : SUB ESP,0x24
0094a3a4 : MOV EAX,[0x00d66fa0]
0094a3a9 : XOR EAX,EBP
0094a3ab : MOV dword ptr [EBP + -0x10],EAX
0094a3ae : PUSH EBX
0094a3af : PUSH ESI
0094a3b0 : PUSH EDI
0094a3b1 : PUSH EAX
0094a3b2 : LEA EAX,[EBP + -0xc]
0094a3b5 : MOV FS:[0x0],EAX
0094a3bb : MOV ESI,dword ptr [EBP + 0xc]
0094a3be : MOV ECX,dword ptr [0x017247f0]
0094a3c4 : MOV EBX,dword ptr [EBP + 0x8]
0094a3c7 : PUSH ESI
0094a3c8 : CALL 0x009f2a00
0094a3cd : TEST EAX,EAX
0094a3cf : JZ 0x0094a433
0094a3d1 : PUSH ESI
0094a3d2 : PUSH 0xc73648
0094a3d7 : LEA ESI,[EBP + -0x2c]
0094a3da : CALL 0x00404750
0094a3df : ADD ESP,0x8
0094a3e2 : XOR ESI,ESI
0094a3e4 : MOV dword ptr [EBP + -0x4],ESI
0094a3e7 : MOV EAX,[0x00da98e8]
0094a3ec : MOV ECX,dword ptr [EAX]
0094a3ee : CMP ECX,ESI
0094a3f0 : JZ 0x0094a407
0094a3f2 : MOV EDX,dword ptr [ECX]
0094a3f4 : MOV EDX,dword ptr [EDX + 0x14]
0094a3f7 : LEA EAX,[EBP + -0x2c]
0094a3fa : PUSH EAX
0094a3fb : PUSH 0x397
0094a400 : PUSH 0xc7368c
0094a405 : CALL EDX
0094a407 : MOV dword ptr [EBP + -0x4],0xffffffff
0094a40e : CMP dword ptr [EBP + -0x14],0x8
0094a412 : JC 0x0094a41c
0094a414 : MOV ECX,dword ptr [EBP + -0x28]
0094a417 : CALL 0x006f04e0
0094a41c : XOR EAX,EAX
0094a41e : MOV word ptr [EBP + -0x28],AX
0094a422 : MOV dword ptr [EBP + -0x14],0x7
0094a429 : MOV dword ptr [EBP + -0x18],ESI
0094a42c : XOR AL,AL
0094a42e : JMP 0x0094a4f4
0094a433 : MOV EDI,dword ptr [EBX + 0x64]
0094a436 : MOV EAX,dword ptr [EBX + 0x60]
0094a439 : MOV ECX,ESI
0094a43b : PUSH ECX
0094a43c : PUSH EDI
0094a43d : PUSH EAX
0094a43e : LEA EAX,[EBP + -0x30]
0094a441 : CALL 0x004268b0
0094a446 : MOV ESI,dword ptr [EAX]
0094a448 : ADD ESP,0xc
0094a44b : CMP ESI,EDI
0094a44d : JNZ 0x0094a4b6
0094a44f : MOV EDX,dword ptr [EBP + 0xc]
0094a452 : PUSH EDX
0094a453 : PUSH 0xc736c8
0094a458 : LEA ESI,[EBP + -0x2c]
0094a45b : CALL 0x00404750
0094a460 : ADD ESP,0x8
0094a463 : MOV dword ptr [EBP + -0x4],0x1
0094a46a : MOV EAX,[0x00da98e8]
0094a46f : MOV ECX,dword ptr [EAX]
0094a471 : TEST ECX,ECX
0094a473 : JZ 0x0094a489
0094a475 : MOV EDX,dword ptr [ECX]
0094a477 : MOV EDX,dword ptr [EDX + 0x14]
0094a47a : MOV EAX,ESI
0094a47c : PUSH EAX
0094a47d : PUSH 0x3a2
0094a482 : PUSH 0xc73718
0094a487 : CALL EDX
0094a489 : MOV dword ptr [EBP + -0x4],0xffffffff
0094a490 : CMP dword ptr [EBP + -0x14],0x8
0094a494 : JC 0x0094a49e
0094a496 : MOV ECX,dword ptr [EBP + -0x28]
0094a499 : CALL 0x006f04e0
0094a49e : XOR EAX,EAX
0094a4a0 : MOV word ptr [EBP + -0x28],AX
0094a4a4 : MOV dword ptr [EBP + -0x14],0x7
0094a4ab : MOV dword ptr [EBP + -0x18],0x0
0094a4b2 : XOR AL,AL
0094a4b4 : JMP 0x0094a4f4
0094a4b6 : MOV EDI,dword ptr [ESI]
0094a4b8 : TEST EDI,EDI
0094a4ba : JZ 0x0094a4cf
0094a4bc : PUSH EDI
0094a4bd : CALL 0x00426790
0094a4c2 : MOV ECX,EDI
0094a4c4 : CALL 0x006f04e0
0094a4cf : MOV EAX,dword ptr [EBX + 0x64]
0094a4d2 : LEA ECX,[ESI + 0x4]
0094a4d5 : SUB EAX,ECX
0094a4d7 : SAR EAX,0x2
0094a4da : TEST EAX,EAX
0094a4dc : JLE 0x0094a4ee
0094a4de : ADD EAX,EAX
0094a4e0 : ADD EAX,EAX
0094a4e2 : PUSH EAX
0094a4e3 : PUSH ECX
0094a4e4 : PUSH EAX
0094a4e5 : PUSH ESI
0094a4e6 : CALL 0x00634101
0094a4eb : ADD ESP,0x10
0094a4ee : ADD dword ptr [EBX + 0x64],-0x4
0094a4f2 : MOV AL,0x1
0094a4f4 : MOV ECX,dword ptr [EBP + -0xc]
0094a4f7 : MOV dword ptr FS:[0x0],ECX
0094a4fe : POP ECX
0094a4ff : POP EDI
0094a500 : POP ESI
0094a501 : POP EBX
0094a502 : MOV ECX,dword ptr [EBP + -0x10]
0094a505 : XOR ECX,EBP
0094a507 : CALL 0x00633e6b
0094a50c : MOV ESP,EBP
0094a50e : POP EBP
0094a50f : RET 0x8
