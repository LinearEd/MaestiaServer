PROGRAM  : Maestia.exe
FUNCTION : FUN_00586fb0
ENTRY    : 00586fb0
BODY     : [[00586fb0, 00587036]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00586fb0(undefined4 param_1,int param_2)

{
  int iVar1;
  int *in_ECX;
  uint uVar2;
  
  if (param_2 == 0) {
    if (*in_ECX != 0) {
      FUN_00515cf0(*in_ECX);
      *in_ECX = 0;
    }
    in_ECX[2] = 0;
    return;
  }
  uVar2 = param_2 + 3U >> 2;
  if (*in_ECX != 0) {
    iVar1 = FUN_00515c80(*in_ECX,uVar2 * 0x70);
    in_ECX[2] = uVar2 * 4;
    *in_ECX = iVar1;
    return;
  }
  param_2 = 2;
  iVar1 = FUN_00515840(uVar2 * 0x70,&param_2);
  in_ECX[2] = uVar2 * 4;
  *in_ECX = iVar1;
  return;
}



============================================================
DISASSEMBLY
============================================================
00586fb0 : MOV EAX,dword ptr [ESP + 0x8]
00586fb4 : PUSH EDI
00586fb5 : MOV EDI,ECX
00586fb7 : TEST EAX,EAX
00586fb9 : JNZ 0x00586fd8
00586fbb : MOV EAX,dword ptr [EDI]
00586fbd : TEST EAX,EAX
00586fbf : JZ 0x00586fcd
00586fc1 : PUSH EAX
00586fc2 : CALL 0x00515cf0
00586fc7 : MOV dword ptr [EDI],0x0
00586fcd : MOV dword ptr [EDI + 0x8],0x0
00586fd4 : POP EDI
00586fd5 : RET 0x8
00586fd8 : PUSH ESI
00586fd9 : LEA ESI,[EAX + 0x3]
00586fdc : MOV EAX,dword ptr [EDI]
00586fde : SHR ESI,0x2
00586fe1 : ADD ESI,ESI
00586fe3 : ADD ESI,ESI
00586fe5 : TEST EAX,EAX
00586fe7 : JZ 0x00587007
00586fe9 : LEA ECX,[ESI*0x8 + 0x0]
00586ff0 : SUB ECX,ESI
00586ff2 : ADD ECX,ECX
00586ff4 : ADD ECX,ECX
00586ff6 : PUSH ECX
00586ff7 : PUSH EAX
00586ff8 : CALL 0x00515c80
00586ffd : MOV dword ptr [EDI + 0x8],ESI
00587000 : POP ESI
00587001 : MOV dword ptr [EDI],EAX
00587003 : POP EDI
00587004 : RET 0x8
00587007 : MOV ECX,dword ptr [0x00d73250]
0058700d : LEA EAX,[ESI*0x8 + 0x0]
00587014 : SUB EAX,ESI
00587016 : LEA EDX,[ESP + 0x10]
0058701a : ADD EAX,EAX
0058701c : PUSH EDX
0058701d : ADD EAX,EAX
0058701f : PUSH EAX
00587020 : MOV dword ptr [ESP + 0x18],0x2
00587028 : CALL 0x00515840
0058702d : MOV dword ptr [EDI + 0x8],ESI
00587030 : POP ESI
00587031 : MOV dword ptr [EDI],EAX
00587033 : POP EDI
00587034 : RET 0x8
