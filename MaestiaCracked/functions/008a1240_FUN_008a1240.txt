PROGRAM  : Maestia.exe
FUNCTION : FUN_008a1240
ENTRY    : 008a1240
BODY     : [[008a1240, 008a1485]]

============================================================
DECOMPILED C CODE
============================================================

uint FUN_008a1240(int param_1)

{
  uint in_EAX;
  wchar_t *_Str1;
  int iVar1;
  wchar_t *pwVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int unaff_EDI;
  uint local_8;
  
  if (DAT_00d6ab0f != '\0') {
    pwVar2 = (wchar_t *)(param_1 + 4);
    _Str1 = pwVar2;
    if (7 < *(uint *)(param_1 + 0x18)) {
      _Str1 = *(wchar_t **)pwVar2;
    }
    iVar1 = __wcsicmp(_Str1,L"PlaySound");
    if (iVar1 == 0) {
      iVar1 = *(int *)(unaff_EDI + 4);
      iVar5 = 0;
      local_8 = 0;
      iVar3 = 0;
      if ((*(int *)(unaff_EDI + 8) - iVar1) / 0x1c != 0) {
        do {
          if (*(uint *)(iVar5 + 0x18 + iVar1) < 8) {
            pwVar2 = (wchar_t *)(iVar5 + 4 + iVar1);
          }
          else {
            pwVar2 = *(wchar_t **)(iVar5 + 4 + iVar1);
          }
          pwVar2 = _wcschr(pwVar2,L'.');
          if (pwVar2 == (wchar_t *)0x0) {
            iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
            if (*(uint *)(iVar1 + 0x18) < 8) {
              pwVar2 = (wchar_t *)(iVar1 + 4);
            }
            else {
              pwVar2 = *(wchar_t **)(iVar1 + 4);
            }
            iVar1 = __wcsicmp(pwVar2,L"btnover");
            if (iVar1 == 0) {
              if (DAT_00d6ab0f != '\0') {
                FUN_008a07c0();
              }
            }
            else {
              iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
              if (*(uint *)(iVar1 + 0x18) < 8) {
                pwVar2 = (wchar_t *)(iVar1 + 4);
              }
              else {
                pwVar2 = *(wchar_t **)(iVar1 + 4);
              }
              iVar1 = __wcsicmp(pwVar2,L"btnclick");
              if (iVar1 == 0) {
                if (DAT_00d6ab0f != '\0') {
                  FUN_008a08c0();
                }
              }
              else {
                iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
                if (*(uint *)(iVar1 + 0x18) < 8) {
                  pwVar2 = (wchar_t *)(iVar1 + 4);
                }
                else {
                  pwVar2 = *(wchar_t **)(iVar1 + 4);
                }
                iVar1 = __wcsicmp(pwVar2,L"btnleave");
                if (iVar1 != 0) {
                  iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
                  if (*(uint *)(iVar1 + 0x18) < 8) {
                    pwVar2 = (wchar_t *)(iVar1 + 4);
                  }
                  else {
                    pwVar2 = *(wchar_t **)(iVar1 + 4);
                  }
                  iVar1 = __wcsicmp(pwVar2,L"slotclick");
                  if (iVar1 != 0) {
                    iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
                    if (*(uint *)(iVar1 + 0x18) < 8) {
                      pwVar2 = (wchar_t *)(iVar1 + 4);
                    }
                    else {
                      pwVar2 = *(wchar_t **)(iVar1 + 4);
                    }
                    iVar1 = __wcsicmp(pwVar2,L"uiopen");
                    if (iVar1 == 0) {
                      if (DAT_00d6ab0f != '\0') {
                        FUN_008a06c0();
                      }
                    }
                    else {
                      iVar1 = *(int *)(unaff_EDI + 4) + iVar5;
                      if (*(uint *)(iVar1 + 0x18) < 8) {
                        pwVar2 = (wchar_t *)(iVar1 + 4);
                      }
                      else {
                        pwVar2 = *(wchar_t **)(iVar1 + 4);
                      }
                      iVar1 = __wcsicmp(pwVar2,L"newinfo");
                      if ((iVar1 == 0) && (DAT_00d6ab0f != '\0')) {
                        FUN_008a05c0();
                      }
                    }
                  }
                }
              }
            }
          }
          else if (DAT_00d6ab0f != '\0') {
            FUN_008a0f90();
          }
          iVar1 = *(int *)(unaff_EDI + 4);
          local_8 = local_8 + 1;
          iVar4 = *(int *)(unaff_EDI + 8) - iVar1;
          iVar3 = iVar4 * -0x6db6db6d;
          iVar5 = iVar5 + 0x1c;
        } while (local_8 < (uint)(iVar4 / 0x1c));
      }
      return CONCAT31((int3)((uint)iVar3 >> 8),1);
    }
    in_EAX = DAT_00da93ec;
    if ((DAT_00da93ec != 0) && (*(char *)(DAT_00da93ec + 0x286) != '\0')) {
      if (7 < *(uint *)(param_1 + 0x18)) {
        pwVar2 = *(wchar_t **)pwVar2;
      }
      in_EAX = __wcsicmp(pwVar2,L"onLButtonDown");
      if ((in_EAX == 0) && (DAT_00d6ab0f != '\0')) {
        in_EAX = FUN_008a08c0();
      }
    }
  }
  return in_EAX & 0xffffff00;
}



============================================================
DISASSEMBLY
============================================================
008a1240 : PUSH EBP
008a1241 : MOV EBP,ESP
008a1243 : PUSH ECX
008a1244 : CMP byte ptr [0x00d6ab0f],0x0
008a124b : PUSH EBX
008a124c : MOV EBX,dword ptr [EBP + 0x8]
008a124f : PUSH ESI
008a1250 : JZ 0x008a147e
008a1256 : CMP dword ptr [EBX + 0x18],0x8
008a125a : LEA ESI,[EBX + 0x4]
008a125d : JC 0x008a1263
008a125f : MOV EAX,dword ptr [ESI]
008a1261 : JMP 0x008a1265
008a1263 : MOV EAX,ESI
008a1265 : PUSH 0xc49728
008a126a : PUSH EAX
008a126b : CALL 0x00637f87
008a1270 : ADD ESP,0x8
008a1273 : TEST EAX,EAX
008a1275 : JNZ 0x008a1445
008a127b : MOV ESI,dword ptr [EDI + 0x4]
008a127e : MOV ECX,dword ptr [EDI + 0x8]
008a1281 : SUB ECX,ESI
008a1283 : MOV EAX,0x92492493
008a1288 : IMUL ECX
008a128a : ADD EDX,ECX
008a128c : SAR EDX,0x4
008a128f : MOV EAX,EDX
008a1291 : XOR EBX,EBX
008a1293 : SHR EAX,0x1f
008a1296 : ADD EAX,EDX
008a1298 : MOV dword ptr [EBP + -0x4],EBX
008a129b : JZ 0x008a143d
008a12a1 : CMP dword ptr [EBX + ESI*0x1 + 0x18],0x8
008a12a6 : JC 0x008a12ae
008a12a8 : MOV ESI,dword ptr [EBX + ESI*0x1 + 0x4]
008a12ac : JMP 0x008a12b2
008a12ae : LEA ESI,[EBX + ESI*0x1 + 0x4]
008a12b2 : PUSH 0x2e
008a12b4 : PUSH ESI
008a12b5 : CALL 0x0063852c
008a12ba : ADD ESP,0x8
008a12bd : TEST EAX,EAX
008a12bf : MOV EAX,dword ptr [EDI + 0x4]
008a12c2 : JZ 0x008a12ed
008a12c4 : ADD EAX,EBX
008a12c6 : CMP dword ptr [EAX + 0x18],0x8
008a12ca : JC 0x008a12d1
008a12cc : MOV EAX,dword ptr [EAX + 0x4]
008a12cf : JMP 0x008a12d4
008a12d1 : ADD EAX,0x4
008a12d4 : CMP byte ptr [0x00d6ab0f],0x0
008a12db : JZ 0x008a1413
008a12e1 : MOV ECX,EAX
008a12e3 : CALL 0x008a0f90
008a12e8 : JMP 0x008a1413
008a12ed : ADD EAX,EBX
008a12ef : MOV ESI,0x8
008a12f4 : CMP dword ptr [EAX + 0x18],ESI
008a12f7 : JC 0x008a12fe
008a12f9 : MOV EAX,dword ptr [EAX + 0x4]
008a12fc : JMP 0x008a1301
008a12fe : ADD EAX,0x4
008a1301 : PUSH 0xc4973c
008a1306 : PUSH EAX
008a1307 : CALL 0x00637f87
008a130c : ADD ESP,0x8
008a130f : TEST EAX,EAX
008a1311 : JNZ 0x008a1329
008a1313 : CMP byte ptr [0x00d6ab0f],AL
008a1319 : JZ 0x008a1413
008a131f : CALL 0x008a07c0
008a1324 : JMP 0x008a1413
008a1329 : MOV EAX,dword ptr [EDI + 0x4]
008a132c : ADD EAX,EBX
008a132e : CMP dword ptr [EAX + 0x18],ESI
008a1331 : JC 0x008a1338
008a1333 : MOV EAX,dword ptr [EAX + 0x4]
008a1336 : JMP 0x008a133b
008a1338 : ADD EAX,0x4
008a133b : PUSH 0xc4974c
008a1340 : PUSH EAX
008a1341 : CALL 0x00637f87
008a1346 : ADD ESP,0x8
008a1349 : TEST EAX,EAX
008a134b : JNZ 0x008a1363
008a134d : CMP byte ptr [0x00d6ab0f],AL
008a1353 : JZ 0x008a1413
008a1359 : CALL 0x008a08c0
008a135e : JMP 0x008a1413
008a1363 : MOV EAX,dword ptr [EDI + 0x4]
008a1366 : ADD EAX,EBX
008a1368 : CMP dword ptr [EAX + 0x18],ESI
008a136b : JC 0x008a1372
008a136d : MOV EAX,dword ptr [EAX + 0x4]
008a1370 : JMP 0x008a1375
008a1372 : ADD EAX,0x4
008a1375 : PUSH 0xc49760
008a137a : PUSH EAX
008a137b : CALL 0x00637f87
008a1380 : ADD ESP,0x8
008a1383 : TEST EAX,EAX
008a1385 : JZ 0x008a1413
008a138b : MOV EAX,dword ptr [EDI + 0x4]
008a138e : ADD EAX,EBX
008a1390 : CMP dword ptr [EAX + 0x18],ESI
008a1393 : JC 0x008a139a
008a1395 : MOV EAX,dword ptr [EAX + 0x4]
008a1398 : JMP 0x008a139d
008a139a : ADD EAX,0x4
008a139d : PUSH 0xc49774
008a13a2 : PUSH EAX
008a13a3 : CALL 0x00637f87
008a13a8 : ADD ESP,0x8
008a13ab : TEST EAX,EAX
008a13ad : JZ 0x008a1413
008a13af : MOV EAX,dword ptr [EDI + 0x4]
008a13b2 : ADD EAX,EBX
008a13b4 : CMP dword ptr [EAX + 0x18],ESI
008a13b7 : JC 0x008a13be
008a13b9 : MOV EAX,dword ptr [EAX + 0x4]
008a13bc : JMP 0x008a13c1
008a13be : ADD EAX,0x4
008a13c1 : PUSH 0xc49788
008a13c6 : PUSH EAX
008a13c7 : CALL 0x00637f87
008a13cc : ADD ESP,0x8
008a13cf : TEST EAX,EAX
008a13d1 : JNZ 0x008a13e2
008a13d3 : CMP byte ptr [0x00d6ab0f],AL
008a13d9 : JZ 0x008a1413
008a13db : CALL 0x008a06c0
008a13e0 : JMP 0x008a1413
008a13e2 : MOV EAX,dword ptr [EDI + 0x4]
008a13e5 : ADD EAX,EBX
008a13e7 : CMP dword ptr [EAX + 0x18],ESI
008a13ea : JC 0x008a13f1
008a13ec : MOV EAX,dword ptr [EAX + 0x4]
008a13ef : JMP 0x008a13f4
008a13f1 : ADD EAX,0x4
008a13f4 : PUSH 0xc49798
008a13f9 : PUSH EAX
008a13fa : CALL 0x00637f87
008a13ff : ADD ESP,0x8
008a1402 : TEST EAX,EAX
008a1404 : JNZ 0x008a1413
008a1406 : CMP byte ptr [0x00d6ab0f],AL
008a140c : JZ 0x008a1413
008a140e : CALL 0x008a05c0
008a1413 : MOV ESI,dword ptr [EDI + 0x4]
008a1416 : MOV ECX,dword ptr [EDI + 0x8]
008a1419 : INC dword ptr [EBP + -0x4]
008a141c : SUB ECX,ESI
008a141e : MOV EAX,0x92492493
008a1423 : IMUL ECX
008a1425 : ADD EDX,ECX
008a1427 : SAR EDX,0x4
008a142a : MOV ECX,EDX
008a142c : SHR ECX,0x1f
008a142f : ADD ECX,EDX
008a1431 : ADD EBX,0x1c
008a1434 : CMP dword ptr [EBP + -0x4],ECX
008a1437 : JC 0x008a12a1
008a143d : MOV AL,0x1
008a143f : POP ESI
008a1440 : POP EBX
008a1441 : MOV ESP,EBP
008a1443 : POP EBP
008a1444 : RET
008a1445 : MOV EAX,[0x00da93ec]
008a144a : TEST EAX,EAX
008a144c : JZ 0x008a147e
008a144e : CMP byte ptr [EAX + 0x286],0x0
008a1455 : JZ 0x008a147e
008a1457 : CMP dword ptr [EBX + 0x18],0x8
008a145b : JC 0x008a145f
008a145d : MOV ESI,dword ptr [ESI]
008a145f : PUSH 0xc497a8
008a1464 : PUSH ESI
008a1465 : CALL 0x00637f87
008a146a : ADD ESP,0x8
008a146d : TEST EAX,EAX
008a146f : JNZ 0x008a147e
008a1471 : CMP byte ptr [0x00d6ab0f],AL
008a1477 : JZ 0x008a147e
008a1479 : CALL 0x008a08c0
008a147e : POP ESI
008a147f : XOR AL,AL
008a1481 : POP EBX
008a1482 : MOV ESP,EBP
008a1484 : POP EBP
008a1485 : RET
