PROGRAM  : Maestia.exe
FUNCTION : FUN_006ebab0
ENTRY    : 006ebab0
BODY     : [[006ebab0, 006ebcf5]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006ebab0(int param_1,undefined4 *param_2,int param_3)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  undefined4 in_ECX;
  int iVar5;
  int iVar6;
  float fVar7;
  int local_194;
  float local_190;
  undefined4 local_18c;
  int local_188;
  int iStack_184;
  int iStack_180;
  int iStack_17c;
  int iStack_178;
  float local_174;
  float fStack_170;
  undefined1 auStack_160 [28];
  float fStack_144;
  undefined **ppuStack_13c;
  uint local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined4 uStack_c;
  
  puStack_10 = &LAB_00b4d0d4;
  local_14 = ExceptionList;
  local_1c = DAT_00d66fa0 ^ (uint)&local_194;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffe60;
  ExceptionList = &local_14;
  local_194 = param_1;
  local_188 = 0;
  local_18c = in_ECX;
  if (0 < param_3) {
    do {
      uStack_c = 0xffffffff;
      local_190 = *(float *)(local_194 + 0x40);
      (**(code **)(*(int *)PTR_DAT_00d6df20 + 0xc))(&local_174,*param_2,param_2[1],param_2[2],uVar2)
      ;
      fVar7 = fStack_170;
      if (fStack_170 < 0.0) {
        fVar7 = fStack_170 - local_190;
      }
      iVar6 = (int)(fVar7 * (1.0 / local_190));
      fVar7 = local_174;
      if (local_174 < 0.0) {
        fVar7 = local_174 - local_190;
      }
      iVar5 = (int)(fVar7 * (1.0 / local_190));
      iStack_184 = iVar6;
      iStack_180 = iVar5;
      FUN_004fdd60(local_194 + 0x1c,&iStack_184);
      if (iStack_17c == 0) {
        iVar3 = FUN_004fdc80(&iStack_184);
        *(int *)(iVar3 + 4) = iVar6;
        *(int *)(iVar3 + 8) = iVar5;
        piVar4 = (int *)FUN_004fdd60(local_194 + 0x1c,&iStack_184);
        iStack_17c = *piVar4;
        iStack_178 = piVar4[1];
      }
      if ((iStack_178 == 0) || (iStack_17c == 0)) {
        iVar6 = 0;
      }
      else {
        iVar6 = *(int *)(iStack_178 + 4) + iStack_17c;
      }
      *(undefined1 *)(iVar6 + 0x88) = 1;
      FUN_004fadd0(auStack_160);
      uStack_c = 0;
      FUN_00a671f0();
      cVar1 = FUN_004fa530(local_18c);
      if (cVar1 == '\0') {
        FUN_00807d70("CForest::AddInstances, internal error #1");
        break;
      }
      fVar7 = *(float *)(local_194 + 0x44);
      if (*(float *)(local_194 + 0x44) <= fStack_144) {
        fVar7 = fStack_144;
      }
      *(float *)(local_194 + 0x44) = fVar7;
      local_188 = local_188 + 1;
      param_2 = param_2 + 0x50;
      ppuStack_13c = &PTR_FUN_00cd3f48;
    } while (local_188 < param_3);
    ppuStack_13c = &PTR_FUN_00cd3f48;
  }
  uStack_c = 0xffffffff;
  ExceptionList = local_14;
  __security_check_cookie(local_1c ^ (uint)&local_194);
  return;
}



============================================================
DISASSEMBLY
============================================================
006ebab0 : PUSH EBP
006ebab1 : MOV EBP,ESP
006ebab3 : AND ESP,0xfffffff8
006ebab6 : PUSH -0x1
006ebab8 : PUSH 0xb4d0d4
006ebabd : MOV EAX,FS:[0x0]
006ebac3 : PUSH EAX
006ebac4 : SUB ESP,0x180
006ebaca : MOV EAX,[0x00d66fa0]
006ebacf : XOR EAX,ESP
006ebad1 : MOV dword ptr [ESP + 0x178],EAX
006ebad8 : PUSH EBX
006ebad9 : PUSH ESI
006ebada : PUSH EDI
006ebadb : MOV EAX,[0x00d66fa0]
006ebae0 : XOR EAX,ESP
006ebae2 : PUSH EAX
006ebae3 : LEA EAX,[ESP + 0x190]
006ebaea : MOV FS:[0x0],EAX
006ebaf0 : MOV EAX,dword ptr [EBP + 0x8]
006ebaf3 : MOV EBX,dword ptr [EBP + 0xc]
006ebaf6 : MOV dword ptr [ESP + 0x10],EAX
006ebafa : XOR AL,AL
006ebafc : CMP dword ptr [EBP + 0x10],0x0
006ebb00 : MOV dword ptr [ESP + 0x18],ECX
006ebb04 : MOV dword ptr [ESP + 0x1c],0x0
006ebb0c : JLE 0x006ebccc
006ebb12 : FLD float ptr [EBX + 0x8]
006ebb15 : MOV EAX,dword ptr [ESP + 0x10]
006ebb19 : MOVSS XMM0,dword ptr [EAX + 0x40]
006ebb1e : MOV ECX,dword ptr [0x00d6df20]
006ebb24 : MOV EDX,dword ptr [ECX]
006ebb26 : MOV EDX,dword ptr [EDX + 0xc]
006ebb29 : SUB ESP,0xc
006ebb2c : FSTP float ptr [ESP + 0x8]
006ebb30 : ADD EAX,0x1c
006ebb33 : FLD float ptr [EBX + 0x4]
006ebb36 : LEA EAX,[ESP + 0x3c]
006ebb3a : FSTP float ptr [ESP + 0x4]
006ebb3e : MOVSS dword ptr [ESP + 0x20],XMM0
006ebb44 : FLD float ptr [EBX]
006ebb46 : FSTP float ptr [ESP]
006ebb49 : PUSH EAX
006ebb4a : CALL EDX
006ebb4c : MOVSS XMM1,dword ptr [ESP + 0x34]
006ebb52 : XORPS XMM3,XMM3
006ebb55 : COMISS XMM3,XMM1
006ebb58 : MOVSS XMM0,dword ptr [0x00c10fc4]
006ebb60 : MOVSS XMM2,dword ptr [ESP + 0x14]
006ebb66 : DIVSS XMM0,XMM2
006ebb6a : JBE 0x006ebb7a
006ebb6c : SUBSS XMM1,XMM2
006ebb70 : MULSS XMM1,XMM0
006ebb74 : CVTTSS2SI EDI,XMM1
006ebb78 : JMP 0x006ebb85
006ebb7a : MOVAPS XMM4,XMM0
006ebb7d : MULSS XMM4,XMM1
006ebb81 : CVTTSS2SI EDI,XMM4
006ebb85 : MOVSS XMM1,dword ptr [ESP + 0x30]
006ebb8b : COMISS XMM3,XMM1
006ebb8e : JBE 0x006ebb9e
006ebb90 : SUBSS XMM1,XMM2
006ebb94 : MULSS XMM1,XMM0
006ebb98 : CVTTSS2SI ESI,XMM1
006ebb9c : JMP 0x006ebba6
006ebb9e : MULSS XMM0,XMM1
006ebba2 : CVTTSS2SI ESI,XMM0
006ebba6 : LEA EAX,[ESP + 0x20]
006ebbaa : PUSH EAX
006ebbab : MOV EAX,dword ptr [ESP + 0x14]
006ebbaf : ADD EAX,0x1c
006ebbb2 : PUSH EAX
006ebbb3 : LEA EAX,[ESP + 0x30]
006ebbb7 : MOV dword ptr [ESP + 0x28],EDI
006ebbbb : MOV dword ptr [ESP + 0x2c],ESI
006ebbbf : CALL 0x004fdd60
006ebbc4 : MOV ECX,dword ptr [ESP + 0x28]
006ebbc8 : TEST ECX,ECX
006ebbca : JNZ 0x006ebc08
006ebbcc : MOV EAX,dword ptr [ESP + 0x10]
006ebbd0 : LEA ECX,[ESP + 0x20]
006ebbd4 : PUSH ECX
006ebbd5 : ADD EAX,0x1c
006ebbd8 : CALL 0x004fdc80
006ebbdd : MOV dword ptr [EAX + 0x4],EDI
006ebbe0 : MOV dword ptr [EAX + 0x8],ESI
006ebbe3 : MOV EAX,dword ptr [ESP + 0x10]
006ebbe7 : LEA EDX,[ESP + 0x20]
006ebbeb : ADD EAX,0x1c
006ebbee : PUSH EDX
006ebbef : PUSH EAX
006ebbf0 : LEA EAX,[ESP + 0x44]
006ebbf4 : CALL 0x004fdd60
006ebbf9 : MOV ECX,dword ptr [EAX]
006ebbfb : MOV EAX,dword ptr [EAX + 0x4]
006ebbfe : MOV dword ptr [ESP + 0x28],ECX
006ebc02 : MOV dword ptr [ESP + 0x2c],EAX
006ebc06 : JMP 0x006ebc0c
006ebc08 : MOV EAX,dword ptr [ESP + 0x2c]
006ebc0c : TEST EAX,EAX
006ebc0e : JZ 0x006ebc1b
006ebc10 : TEST ECX,ECX
006ebc12 : JZ 0x006ebc1b
006ebc14 : MOV EAX,dword ptr [EAX + 0x4]
006ebc17 : ADD EAX,ECX
006ebc19 : JMP 0x006ebc1d
006ebc1b : XOR EAX,EAX
006ebc1d : MOV byte ptr [EAX + 0x88],0x1
006ebc24 : LEA ESI,[EAX + 0x40]
006ebc27 : LEA EAX,[ESP + 0x44]
006ebc2b : PUSH EAX
006ebc2c : MOV EDI,EBX
006ebc2e : CALL 0x004fadd0
006ebc33 : MOV dword ptr [ESP + 0x198],0x0
006ebc3e : MOV EAX,dword ptr [ESP + 0x18]
006ebc42 : LEA EDI,[ESP + 0x44]
006ebc46 : CALL 0x00a671f0
006ebc4b : MOV ECX,dword ptr [ESP + 0x18]
006ebc4f : PUSH ECX
006ebc50 : MOV ECX,ESI
006ebc52 : CALL 0x004fa530
006ebc57 : TEST AL,AL
006ebc59 : JZ 0x006ebca6
006ebc5b : MOV EAX,dword ptr [ESP + 0x10]
006ebc5f : MOVSS XMM0,dword ptr [EAX + 0x44]
006ebc64 : MOVSS XMM1,dword ptr [ESP + 0x60]
006ebc6a : COMISS XMM0,XMM1
006ebc6d : JA 0x006ebc72
006ebc6f : MOVAPS XMM0,XMM1
006ebc72 : MOVSS dword ptr [EAX + 0x44],XMM0
006ebc77 : MOV AL,0x1
006ebc79 : MOV dword ptr [ESP + 0x198],0xffffffff
006ebc84 : MOV ECX,dword ptr [ESP + 0x1c]
006ebc88 : INC ECX
006ebc89 : ADD EBX,0x140
006ebc8f : CMP ECX,dword ptr [EBP + 0x10]
006ebc92 : MOV dword ptr [ESP + 0x68],0xcd3f48
006ebc9a : MOV dword ptr [ESP + 0x1c],ECX
006ebc9e : JL 0x006ebb12
006ebca4 : JMP 0x006ebcc8
006ebca6 : PUSH 0xbf1b54
006ebcab : CALL 0x00807d70
006ebcb0 : ADD ESP,0x4
006ebcb3 : XOR AL,AL
006ebcb5 : MOV dword ptr [ESP + 0x198],0xffffffff
006ebcc0 : MOV dword ptr [ESP + 0x68],0xcd3f48
006ebcc8 : CMP dword ptr [EBP + 0x10],0x0
006ebccc : JNZ 0x006ebcd0
006ebcce : MOV AL,0x1
006ebcd0 : MOV ECX,dword ptr [ESP + 0x190]
006ebcd7 : MOV dword ptr FS:[0x0],ECX
006ebcde : POP ECX
006ebcdf : POP EDI
006ebce0 : POP ESI
006ebce1 : POP EBX
006ebce2 : MOV ECX,dword ptr [ESP + 0x178]
006ebce9 : XOR ECX,ESP
006ebceb : CALL 0x00633e6b
006ebcf0 : MOV ESP,EBP
006ebcf2 : POP EBP
006ebcf3 : RET 0xc
