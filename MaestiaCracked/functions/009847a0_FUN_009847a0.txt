PROGRAM  : Maestia.exe
FUNCTION : FUN_009847a0
ENTRY    : 009847a0
BODY     : [[009847a0, 00984f13] [00984f16, 00984f95]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __alloca_probe replaced with injection: alloca_probe */

void FUN_009847a0(int param_1)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  char cVar4;
  int *piVar5;
  float *in_ECX;
  uint uVar6;
  int iVar7;
  undefined1 *puVar8;
  ushort in_FPUControlWord;
  float fVar9;
  undefined1 auStack_1134 [36];
  ushort local_1110;
  char local_110d;
  uint local_110c;
  undefined4 *local_1108;
  float local_1104;
  longlong local_1100 [2];
  float local_10f0;
  float local_10ec;
  float local_10e8;
  int *local_10e4;
  uint local_10e0;
  undefined1 local_10dc [4];
  undefined4 *local_10d8;
  undefined4 *local_10d4;
  undefined4 local_10d0;
  int local_10cc;
  int local_10c8;
  uint local_10c4;
  uint local_10c0;
  int local_10b8;
  int local_10b4;
  undefined4 local_10b0;
  float *local_10ac;
  int local_10a8;
  float local_10a4;
  undefined4 local_10a0;
  int local_1098;
  undefined4 local_1094;
  uint local_1090;
  int local_108c;
  undefined4 local_1088 [128];
  undefined1 local_e88 [20];
  int local_e74 [892];
  uint local_84;
  void *local_4c;
  undefined1 *puStack_48;
  int local_44;
  
  local_44 = 0xffffffff;
  puStack_48 = &LAB_00b67210;
  local_4c = ExceptionList;
  local_84 = DAT_00d66fa0 ^ (uint)auStack_1134;
  ExceptionList = &local_4c;
  local_10a8 = param_1;
  local_10ac = in_ECX;
  FUN_009807d0(DAT_00d66fa0 ^ (uint)&stack0xffffeec0);
  *(undefined4 *)(param_1 + 0x120) = 0;
  if (in_ECX != (float *)0x0) {
    _eh_vector_constructor_iterator_(local_e88,0x1c,0x80,FUN_00405d90,FUN_00406560);
    local_10e0 = local_10e0 & 0xffffff00;
    local_10d8 = (undefined4 *)0x0;
    local_10d4 = (undefined4 *)0x0;
    local_10d0 = 0;
    local_44._0_1_ = 1;
    local_44._1_3_ = 0;
    local_1104 = 1.79366e-43;
    uVar1 = *(ushort *)(param_1 + 0x6c);
    if (*(ushort *)(param_1 + 0x6e) != *(ushort *)(param_1 + 0x6c)) {
      uVar1 = *(ushort *)(param_1 + 0x6e);
    }
    local_10c0 = (uint)uVar1;
    local_10f0 = *in_ECX;
    iVar7 = *(int *)(DAT_017248f8 + 0x1c);
    local_110c = local_10c0;
    local_10ec = local_10f0;
    FUN_004437f0(&local_10ec);
    if (((local_10e8 != *(float *)(iVar7 + 4)) &&
        (local_108c = *(int *)((int)local_10e8 + 0x10), local_108c != 0)) &&
       (cVar4 = FUN_0084a4a0(&local_1104,local_e88,local_1088,&local_10e0,&local_110c,0xffffffff),
       cVar4 != '\0')) {
      iVar7 = 0;
      local_1110 = local_1110 & 0xff00;
      local_10cc = 0;
      local_10b8 = 0;
      local_10b4 = 0;
      local_10b0 = 0;
      local_44 = CONCAT31(local_44._1_3_,2);
      local_10c8 = 0;
      do {
        cVar4 = FUN_0084a4a0(&local_1104,local_e88,local_1088,&local_10e0,&local_110c,local_10c8);
        if (cVar4 != '\0') {
          if (local_1104 != 0.0) {
            puVar8 = local_e88;
            local_1108 = (undefined4 *)local_1104;
            do {
              piVar5 = (int *)FUN_00413740();
              if (*piVar5 == local_10b4) {
                FUN_00405ae0(puVar8);
              }
              else {
                FUN_00406360();
              }
              puVar8 = puVar8 + 0x1c;
              local_1108 = (undefined4 *)((int)local_1108 - 1);
            } while (local_1108 != (undefined4 *)0x0);
            local_1108 = (undefined4 *)0x0;
          }
          local_110d = '\0';
          local_10ec = 0.0;
          if (local_1104 != 0.0) {
            piVar5 = local_e74;
            do {
              if (*piVar5 != 0) {
                local_10c4 = 0;
                local_10e4 = piVar5;
                cVar4 = FUN_00a3e0b0(DAT_00da93ec,local_1088[(int)local_10ec],piVar5 + -5,
                                     &local_110c,local_10dc,&local_10c4,local_1100,&local_110d,
                                     local_10e0,local_10c0);
                if (cVar4 != '\0') {
                  FUN_00980690(local_10c0,&local_10f0,&local_10e8);
                  *(undefined4 *)(param_1 + 0x120) = 1;
                  local_1108 = local_10d8;
                  if (local_10d8 != local_10d4) {
                    local_1090 = ((int)local_10d4 - (int)local_10d8) / 0xc;
                    uVar6 = local_110c;
                    do {
                      iVar3 = local_10cc;
                      local_10a0 = *local_1108;
                      local_10a4 = (float)local_1108[2];
                      if (((char)local_10e0 == '\0') || (local_110d == '\0')) {
                        local_1100[0] =
                             (longlong)
                             ROUND((512.0 - (local_10a4 / *(float *)(param_1 + 0x44)) * 512.0) +
                                   256.0);
                        fVar9 = ((float)(int)local_1100[0] - 256.0) * local_10e8;
                      }
                      else {
                        local_1100[0] =
                             (longlong)
                             ROUND((512.0 - (local_10a4 / (*(float *)(param_1 + 0x44) / local_10f0))
                                            * 512.0) + 256.0);
                        fVar9 = (float)(int)local_1100[0] - 256.0;
                      }
                      local_1098 = (int)(fVar9 + 256.0);
                      local_1110 = in_FPUControlWord;
                      if (((*(short *)(param_1 + 0x6e) == *(short *)(param_1 + 0x6c)) &&
                          (iVar2 = *DAT_00da9894, iVar2 != 0)) && (*(int *)(iVar2 + 0x114) != 0)) {
                        if ((uint)local_10e4[1] < 8) {
                          piVar5 = local_10e4 + -4;
                        }
                        else {
                          piVar5 = (int *)local_10e4[-4];
                        }
                        (**(code **)(**(int **)(iVar2 + 0x114) + 4))
                                  (*(int **)(iVar2 + 0x114),"MinimapSetMonster","%d,%ls,%f,%f,%d",
                                   local_10cc,piVar5);
                        uVar6 = local_110c;
                        param_1 = local_10a8;
                        iVar7 = iVar3;
                      }
                      iVar2 = local_10cc;
                      iVar3 = *DAT_00da9894;
                      if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
                        if ((uint)local_10e4[1] < 8) {
                          piVar5 = local_10e4 + -4;
                        }
                        else {
                          piVar5 = (int *)local_10e4[-4];
                        }
                        (**(code **)(**(int **)(iVar3 + 0x114) + 4))
                                  (*(int **)(iVar3 + 0x114),"ZoneMapSetMonster","%d,%ls,%f,%f,%d",
                                   local_10cc,piVar5);
                        uVar6 = local_110c;
                        param_1 = local_10a8;
                        iVar7 = iVar2;
                      }
                      iVar7 = iVar7 + 1;
                      *(int *)(param_1 + 0x148) = iVar7;
                      if ((1 < local_1090) && (uVar6 == *(ushort *)(param_1 + 0x6e))) {
                        *(undefined4 *)(param_1 + 0x120) = 2;
                      }
                      local_1108 = local_1108 + 3;
                      piVar5 = local_10e4;
                      local_10cc = iVar7;
                    } while (local_1108 != local_10d4);
                  }
                  local_1110 = CONCAT11(local_1110._1_1_,1);
                }
              }
              local_10ec = (float)((int)local_10ec + 1);
              piVar5 = piVar5 + 7;
              local_10e4 = piVar5;
            } while ((uint)local_10ec < (uint)local_1104);
          }
        }
      } while ((*(short *)(local_108c + 8) == 4) && (local_10c8 = local_10c8 + 1, local_10c8 < 1));
      iVar7 = *DAT_00da9894;
      if ((iVar7 != 0) && (*(int *)(iVar7 + 0x114) != 0)) {
        if ((uint)local_10ac[0xe] < 8) {
          local_10ac = local_10ac + 9;
        }
        else {
          local_10ac = (float *)local_10ac[9];
        }
        (**(code **)(**(int **)(iVar7 + 0x114) + 4))
                  (*(int **)(iVar7 + 0x114),"mc_questshortcut.SetQuestNaviDraw","%ls%b",local_10ac,
                   (undefined1)local_1110);
      }
      local_44 = CONCAT31(local_44._1_3_,1);
      if (local_10b8 != 0) {
        FUN_00405450(local_1094);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      local_10b8 = 0;
      local_10b4 = 0;
      local_10b0 = 0;
      local_44 = (uint)local_44._1_3_ << 8;
      if (local_10d8 != (undefined4 *)0x0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
    local_44 = 0xffffffff;
    local_10d0 = 0;
    local_10d4 = (undefined4 *)0x0;
    local_10d8 = (undefined4 *)0x0;
    _eh_vector_destructor_iterator_(local_e88,0x1c,0x80,FUN_00406560);
  }
  ExceptionList = local_4c;
  __security_check_cookie(local_84 ^ (uint)auStack_1134);
  return;
}



============================================================
DISASSEMBLY
============================================================
009847a0 : PUSH EBP
009847a1 : MOV EBP,ESP
009847a3 : AND ESP,0xffffffc0
009847a6 : PUSH -0x1
009847a8 : PUSH 0xb67210
009847ad : MOV EAX,FS:[0x0]
009847b3 : PUSH EAX
009847b4 : SUB ESP,0x34
009847b7 : MOV EAX,0x10b4
009847bc : CALL 0x0063b780
009847c1 : MOV EAX,[0x00d66fa0]
009847c6 : XOR EAX,ESP
009847c8 : MOV dword ptr [ESP + 0x10b0],EAX
009847cf : PUSH EBX
009847d0 : PUSH ESI
009847d1 : PUSH EDI
009847d2 : MOV EAX,[0x00d66fa0]
009847d7 : XOR EAX,ESP
009847d9 : PUSH EAX
009847da : LEA EAX,[ESP + 0x10f8]
009847e1 : MOV FS:[0x0],EAX
009847e7 : MOV EBX,dword ptr [EBP + 0x8]
009847ea : MOV ESI,ECX
009847ec : MOV dword ptr [ESP + 0x9c],EBX
009847f3 : MOV dword ptr [ESP + 0x98],ESI
009847fa : CALL 0x009807d0
009847ff : XOR EDI,EDI
00984801 : MOV dword ptr [EBX + 0x120],EDI
00984807 : CMP ESI,EDI
00984809 : JZ 0x00984f70
0098480f : PUSH 0x406560
00984814 : PUSH 0x405d90
00984819 : PUSH 0x80
0098481e : PUSH 0x1c
00984820 : LEA EAX,[ESP + 0x2cc]
00984827 : PUSH EAX
00984828 : CALL 0x0063619b
0098482d : MOV dword ptr [ESP + 0x1100],EDI
00984834 : MOVZX EAX,word ptr [EBX + 0x6c]
00984838 : MOV dword ptr [ESP + 0x84],EAX
0098483f : MOV dword ptr [ESP + 0x38],EAX
00984843 : MOV byte ptr [ESP + 0x64],0x0
00984848 : MOV dword ptr [ESP + 0x6c],EDI
0098484c : MOV dword ptr [ESP + 0x70],EDI
00984850 : MOV dword ptr [ESP + 0x74],EDI
00984854 : MOV byte ptr [ESP + 0x1100],0x1
0098485c : MOVZX EAX,word ptr [EBX + 0x6e]
00984860 : MOV dword ptr [ESP + 0x40],0x80
00984868 : CMP AX,word ptr [EBX + 0x6c]
0098486c : JZ 0x0098487c
0098486e : MOVZX EAX,AX
00984871 : MOV dword ptr [ESP + 0x84],EAX
00984878 : MOV dword ptr [ESP + 0x38],EAX
0098487c : MOV EAX,dword ptr [ESI]
0098487e : MOV ECX,dword ptr [0x017248f8]
00984884 : MOV ESI,dword ptr [ECX + 0x1c]
00984887 : LEA EDX,[ESP + 0x58]
0098488b : MOV dword ptr [ESP + 0x54],EAX
0098488f : MOV dword ptr [ESP + 0x58],EAX
00984893 : PUSH EDX
00984894 : LEA EAX,[ESP + 0x60]
00984898 : MOV ECX,ESI
0098489a : CALL 0x004437f0
0098489f : MOV ESI,dword ptr [ESI + 0x4]
009848a2 : MOV EAX,dword ptr [ESP + 0x5c]
009848a6 : CMP EAX,ESI
009848a8 : JZ 0x009848b8
009848aa : MOV EAX,dword ptr [EAX + 0x10]
009848ad : MOV dword ptr [ESP + 0xb8],EAX
009848b4 : CMP EAX,EDI
009848b6 : JNZ 0x009848f0
009848b8 : MOV byte ptr [ESP + 0x1100],0x0
009848c0 : MOV dword ptr [ESP + 0x6c],EDI
009848c4 : MOV dword ptr [ESP + 0x70],EDI
009848c8 : MOV dword ptr [ESP + 0x74],EDI
009848cc : MOV dword ptr [ESP + 0x1100],0xffffffff
009848d7 : PUSH 0x406560
009848dc : PUSH 0x80
009848e1 : PUSH 0x1c
009848e3 : LEA EAX,[ESP + 0x2c8]
009848ea : PUSH EAX
009848eb : JMP 0x00984f6b
009848f0 : PUSH -0x1
009848f2 : LEA ECX,[ESP + 0x3c]
009848f6 : PUSH ECX
009848f7 : LEA EDX,[ESP + 0x6c]
009848fb : PUSH EDX
009848fc : LEA EAX,[ESP + 0xc8]
00984903 : PUSH EAX
00984904 : MOV EAX,[0x017248f8]
00984909 : LEA ECX,[ESP + 0x2cc]
00984910 : PUSH ECX
00984911 : MOV ECX,dword ptr [ESP + 0x68]
00984915 : LEA EDX,[ESP + 0x54]
00984919 : PUSH EDX
0098491a : MOV EDX,dword ptr [EAX + 0x1c]
0098491d : CALL 0x0084a4a0
00984922 : TEST AL,AL
00984924 : JNZ 0x0098495d
00984926 : MOV byte ptr [ESP + 0x1100],AL
0098492d : MOV dword ptr [ESP + 0x6c],EDI
00984931 : MOV dword ptr [ESP + 0x70],EDI
00984935 : MOV dword ptr [ESP + 0x74],EDI
00984939 : MOV dword ptr [ESP + 0x1100],0xffffffff
00984944 : PUSH 0x406560
00984949 : PUSH 0x80
0098494e : PUSH 0x1c
00984950 : LEA ECX,[ESP + 0x2c8]
00984957 : PUSH ECX
00984958 : JMP 0x00984f6b
0098495d : XOR ESI,ESI
0098495f : MOV byte ptr [ESP + 0x34],0x0
00984964 : MOV dword ptr [ESP + 0x78],ESI
00984968 : MOV dword ptr [ESP + 0x8c],EDI
0098496f : MOV dword ptr [ESP + 0x90],EDI
00984976 : MOV dword ptr [ESP + 0x94],EDI
0098497d : MOV byte ptr [ESP + 0x1100],0x2
00984985 : MOV dword ptr [ESP + 0x7c],EDI
00984989 : MOV EDX,dword ptr [ESP + 0x98]
00984990 : MOV ECX,dword ptr [EDX]
00984992 : MOV EAX,dword ptr [ESP + 0x7c]
00984996 : PUSH EAX
00984997 : LEA EDX,[ESP + 0x3c]
0098499b : PUSH EDX
0098499c : LEA EAX,[ESP + 0x6c]
009849a0 : PUSH EAX
009849a1 : LEA EDX,[ESP + 0xc8]
009849a8 : PUSH EDX
009849a9 : LEA EAX,[ESP + 0x2cc]
009849b0 : PUSH EAX
009849b1 : MOV EAX,[0x017248f8]
009849b6 : LEA EDX,[ESP + 0x54]
009849ba : PUSH EDX
009849bb : MOV EDX,dword ptr [EAX + 0x1c]
009849be : CALL 0x0084a4a0
009849c3 : TEST AL,AL
009849c5 : JZ 0x00984e72
009849cb : MOV EAX,dword ptr [ESP + 0x40]
009849cf : CMP EAX,EDI
009849d1 : JBE 0x00984a35
009849d3 : LEA EDI,[ESP + 0x2bc]
009849da : MOV dword ptr [ESP + 0x3c],EAX
009849de : MOV EDI,EDI
009849e0 : MOV ECX,dword ptr [ESP + 0x90]
009849e7 : MOV EDX,dword ptr [ESP + 0x8c]
009849ee : PUSH EDI
009849ef : PUSH ECX
009849f0 : PUSH EDX
009849f1 : LEA EAX,[ESP + 0xbc]
009849f8 : PUSH EAX
009849f9 : CALL 0x00413740
009849fe : MOV ECX,dword ptr [ESP + 0xa0]
00984a05 : ADD ESP,0x10
00984a08 : CMP dword ptr [EAX],ECX
00984a0a : JNZ 0x00984a1b
00984a0c : PUSH EDI
00984a0d : LEA EAX,[ESP + 0x8c]
00984a14 : CALL 0x00405ae0
00984a19 : JMP 0x00984a29
00984a1b : PUSH 0x0
00984a1d : PUSH 0xc80400
00984a22 : MOV ECX,EDI
00984a24 : CALL 0x00406360
00984a29 : ADD EDI,0x1c
00984a2c : SUB dword ptr [ESP + 0x3c],0x1
00984a31 : JNZ 0x009849e0
00984a33 : XOR EDI,EDI
00984a35 : XOR ECX,ECX
00984a37 : MOV byte ptr [ESP + 0x37],0x0
00984a3c : MOV dword ptr [ESP + 0x58],ECX
00984a40 : CMP dword ptr [ESP + 0x40],EDI
00984a44 : JBE 0x00984e72
00984a4a : LEA EDI,[ESP + 0x2d0]
00984a51 : MOV dword ptr [ESP + 0x60],EDI
00984a55 : MOV EAX,dword ptr [EDI]
00984a57 : XOR EDX,EDX
00984a59 : TEST EAX,EAX
00984a5b : SETNZ DL
00984a5e : MOV EAX,EDX
00984a60 : TEST EAX,EAX
00984a62 : JZ 0x00984e56
00984a68 : MOV EDX,dword ptr [ESP + 0x84]
00984a6f : PUSH EDX
00984a70 : MOV EDX,dword ptr [ESP + 0x68]
00984a74 : PUSH EDX
00984a75 : LEA EDX,[ESP + 0x3f]
00984a79 : PUSH EDX
00984a7a : LEA EDX,[ESP + 0x50]
00984a7e : PUSH EDX
00984a7f : LEA EDX,[ESP + 0x90]
00984a86 : PUSH EDX
00984a87 : LEA EDX,[ESP + 0x7c]
00984a8b : PUSH EDX
00984a8c : LEA EDX,[ESP + 0x50]
00984a90 : PUSH EDX
00984a91 : LEA EAX,[EDI + -0x14]
00984a94 : PUSH EAX
00984a95 : MOV EAX,dword ptr [ESP + ECX*0x4 + 0xdc]
00984a9c : MOV ECX,dword ptr [0x00da93ec]
00984aa2 : PUSH EAX
00984aa3 : PUSH ECX
00984aa4 : MOV dword ptr [ESP + 0xa8],0x0
00984aaf : CALL 0x00a3e0b0
00984ab4 : TEST AL,AL
00984ab6 : JZ 0x00984e56
00984abc : MOV ECX,dword ptr [ESP + 0x84]
00984ac3 : LEA EDX,[ESP + 0x5c]
00984ac7 : PUSH EDX
00984ac8 : LEA EAX,[ESP + 0x58]
00984acc : PUSH EAX
00984acd : PUSH ECX
00984ace : MOV EAX,EBX
00984ad0 : CALL 0x00980690
00984ad5 : MOV EAX,dword ptr [ESP + 0x6c]
00984ad9 : MOV ECX,dword ptr [ESP + 0x70]
00984add : MOV dword ptr [EBX + 0x120],0x1
00984ae7 : MOV dword ptr [ESP + 0x3c],EAX
00984aeb : CMP EAX,ECX
00984aed : JZ 0x00984e51
00984af3 : FLD float ptr [0x00cdf208]
00984af9 : MOVSS XMM0,dword ptr [0x00cdf208]
00984b01 : FLD float ptr [0x00cdf2a0]
00984b07 : SUB ECX,EAX
00984b09 : MOV EAX,0x2aaaaaab
00984b0e : IMUL ECX
00984b10 : SAR EDX,0x1
00984b12 : MOV EAX,EDX
00984b14 : SHR EAX,0x1f
00984b17 : ADD EAX,EDX
00984b19 : MOV EDX,dword ptr [ESP + 0x38]
00984b1d : MOV dword ptr [ESP + 0xb4],EAX
00984b24 : CMP byte ptr [ESP + 0x64],0x0
00984b29 : MOV EAX,dword ptr [ESP + 0x3c]
00984b2d : MOVSS XMM1,dword ptr [EAX]
00984b31 : MOVSS dword ptr [ESP + 0xa4],XMM1
00984b3a : MOVSS XMM1,dword ptr [EAX + 0x8]
00984b3f : MOVSS dword ptr [ESP + 0xa0],XMM1
00984b48 : JZ 0x00984bef
00984b4e : CMP byte ptr [ESP + 0x37],0x0
00984b53 : JZ 0x00984bef
00984b59 : FLD float ptr [EBX + 0x44]
00984b5c : FDIV float ptr [ESP + 0x54]
00984b60 : FLD float ptr [EBX + 0x40]
00984b63 : FDIV float ptr [ESP + 0x5c]
00984b67 : FDIVR float ptr [ESP + 0xa4]
00984b6e : FNSTCW word ptr [ESP + 0x34]
00984b72 : FMUL ST2
00984b74 : MOVZX EAX,word ptr [ESP + 0x34]
00984b79 : OR EAX,0xc00
00984b7e : MOV dword ptr [ESP + 0x44],EAX
00984b82 : FADD ST0,ST3
00984b84 : FLDCW word ptr [ESP + 0x44]
00984b88 : FISTP qword ptr [ESP + 0x44]
00984b8c : MOV ECX,dword ptr [ESP + 0x44]
00984b90 : CVTSI2SS XMM1,ECX
00984b94 : SUBSS XMM1,XMM0
00984b98 : ADDSS XMM1,XMM0
00984b9c : FLDCW word ptr [ESP + 0x34]
00984ba0 : CVTTSS2SI EDI,XMM1
00984ba4 : FDIVR float ptr [ESP + 0xa0]
00984bab : FMUL ST1
00984bad : FNSTCW word ptr [ESP + 0x34]
00984bb1 : FSUBR ST0,ST1
00984bb3 : MOVZX EAX,word ptr [ESP + 0x34]
00984bb8 : OR EAX,0xc00
00984bbd : MOV dword ptr [ESP + 0x44],EAX
00984bc1 : FADD ST0,ST2
00984bc3 : FLDCW word ptr [ESP + 0x44]
00984bc7 : FISTP qword ptr [ESP + 0x44]
00984bcb : MOV EAX,dword ptr [ESP + 0x44]
00984bcf : CVTSI2SS XMM1,EAX
00984bd3 : SUBSS XMM1,XMM0
00984bd7 : ADDSS XMM1,XMM0
00984bdb : FLDCW word ptr [ESP + 0x34]
00984bdf : CVTTSS2SI EAX,XMM1
00984be3 : MOV dword ptr [ESP + 0xac],EAX
00984bea : JMP 0x00984c84
00984bef : FLD float ptr [EBX + 0x44]
00984bf2 : FLD float ptr [EBX + 0x40]
00984bf5 : FDIVR float ptr [ESP + 0xa4]
00984bfc : FNSTCW word ptr [ESP + 0x34]
00984c00 : FMUL ST2
00984c02 : MOVZX EAX,word ptr [ESP + 0x34]
00984c07 : OR EAX,0xc00
00984c0c : MOV dword ptr [ESP + 0x44],EAX
00984c10 : FADD ST0,ST3
00984c12 : FLDCW word ptr [ESP + 0x44]
00984c16 : FISTP qword ptr [ESP + 0x44]
00984c1a : MOV ECX,dword ptr [ESP + 0x44]
00984c1e : CVTSI2SS XMM1,ECX
00984c22 : SUBSS XMM1,XMM0
00984c26 : MULSS XMM1,dword ptr [ESP + 0x54]
00984c2c : FLDCW word ptr [ESP + 0x34]
00984c30 : ADDSS XMM1,XMM0
00984c34 : CVTTSS2SI EDI,XMM1
00984c38 : FDIVR float ptr [ESP + 0xa0]
00984c3f : FMUL ST1
00984c41 : FNSTCW word ptr [ESP + 0x34]
00984c45 : FSUBR ST0,ST1
00984c47 : MOVZX EAX,word ptr [ESP + 0x34]
00984c4c : OR EAX,0xc00
00984c51 : MOV dword ptr [ESP + 0x44],EAX
00984c55 : FADD ST0,ST2
00984c57 : FLDCW word ptr [ESP + 0x44]
00984c5b : FISTP qword ptr [ESP + 0x44]
00984c5f : MOV EAX,dword ptr [ESP + 0x44]
00984c63 : CVTSI2SS XMM1,EAX
00984c67 : SUBSS XMM1,XMM0
00984c6b : MULSS XMM1,dword ptr [ESP + 0x5c]
00984c71 : FLDCW word ptr [ESP + 0x34]
00984c75 : ADDSS XMM1,XMM0
00984c79 : CVTTSS2SI ECX,XMM1
00984c7d : MOV dword ptr [ESP + 0xac],ECX
00984c84 : MOVZX EAX,word ptr [EBX + 0x6c]
00984c88 : CMP word ptr [EBX + 0x6e],AX
00984c8c : JNZ 0x00984d4d
00984c92 : CMP dword ptr [ESP + 0x80],0x1
00984c9a : JBE 0x00984ca7
00984c9c : MOVZX EAX,AX
00984c9f : CMP EDX,EAX
00984ca1 : JNZ 0x00984ca7
00984ca3 : MOV CL,0x1
00984ca5 : JMP 0x00984ca9
00984ca7 : XOR CL,CL
00984ca9 : MOV EAX,[0x00da9894]
00984cae : MOV EAX,dword ptr [EAX]
00984cb0 : TEST EAX,EAX
00984cb2 : JZ 0x00984d4d
00984cb8 : CMP dword ptr [EAX + 0x114],0x0
00984cbf : JZ 0x00984d4d
00984cc5 : MOV ESI,dword ptr [ESP + 0x60]
00984cc9 : FSTP ST0
00984ccb : MOV EAX,dword ptr [EAX + 0x114]
00984cd1 : FSTP ST0
00984cd3 : ADD ESI,-0x14
00984cd6 : CMP dword ptr [ESI + 0x18],0x8
00984cda : JC 0x00984ce1
00984cdc : MOV ESI,dword ptr [ESI + 0x4]
00984cdf : JMP 0x00984ce4
00984ce1 : ADD ESI,0x4
00984ce4 : CVTSI2SS XMM0,dword ptr [ESP + 0xac]
00984ced : MOV EDX,dword ptr [EAX]
00984cef : XOR EBX,EBX
00984cf1 : TEST CL,CL
00984cf3 : SETNZ BL
00984cf6 : CVTSS2SD XMM0,XMM0
00984cfa : INC EBX
00984cfb : PUSH EBX
00984cfc : SUB ESP,0x10
00984cff : MOVSD qword ptr [ESP + 0x8],XMM0
00984d05 : CVTSI2SS XMM0,EDI
00984d09 : CVTSS2SD XMM0,XMM0
00984d0d : MOVSD qword ptr [ESP],XMM0
00984d12 : PUSH ESI
00984d13 : MOV ESI,dword ptr [ESP + 0x90]
00984d1a : PUSH ESI
00984d1b : PUSH 0xc80408
00984d20 : PUSH 0xc80418
00984d25 : PUSH EAX
00984d26 : MOV EAX,dword ptr [EDX + 0x4]
00984d29 : CALL EAX
00984d2b : FLD float ptr [0x00cdf208]
00984d31 : MOVSS XMM0,dword ptr [0x00cdf208]
00984d39 : FLD float ptr [0x00cdf2a0]
00984d3f : MOV EDX,dword ptr [ESP + 0x60]
00984d43 : MOV EBX,dword ptr [ESP + 0xc4]
00984d4a : ADD ESP,0x28
00984d4d : CMP dword ptr [ESP + 0x80],0x1
00984d55 : JBE 0x00984d63
00984d57 : MOVZX ECX,word ptr [EBX + 0x6e]
00984d5b : CMP EDX,ECX
00984d5d : JNZ 0x00984d63
00984d5f : MOV CL,0x1
00984d61 : JMP 0x00984d65
00984d63 : XOR CL,CL
00984d65 : MOV EAX,[0x00da9894]
00984d6a : MOV EAX,dword ptr [EAX]
00984d6c : TEST EAX,EAX
00984d6e : JZ 0x00984e09
00984d74 : CMP dword ptr [EAX + 0x114],0x0
00984d7b : JZ 0x00984e09
00984d81 : MOV ESI,dword ptr [ESP + 0x60]
00984d85 : FSTP ST0
00984d87 : MOV EAX,dword ptr [EAX + 0x114]
00984d8d : FSTP ST0
00984d8f : ADD ESI,-0x14
00984d92 : CMP dword ptr [ESI + 0x18],0x8
00984d96 : JC 0x00984d9d
00984d98 : MOV ESI,dword ptr [ESI + 0x4]
00984d9b : JMP 0x00984da0
00984d9d : ADD ESI,0x4
00984da0 : CVTSI2SS XMM0,dword ptr [ESP + 0xac]
00984da9 : MOV EDX,dword ptr [EAX]
00984dab : XOR EBX,EBX
00984dad : TEST CL,CL
00984daf : SETNZ BL
00984db2 : CVTSS2SD XMM0,XMM0
00984db6 : INC EBX
00984db7 : PUSH EBX
00984db8 : SUB ESP,0x10
00984dbb : MOVSD qword ptr [ESP + 0x8],XMM0
00984dc1 : CVTSI2SS XMM0,EDI
00984dc5 : CVTSS2SD XMM0,XMM0
00984dc9 : MOVSD qword ptr [ESP],XMM0
00984dce : PUSH ESI
00984dcf : MOV ESI,dword ptr [ESP + 0x90]
00984dd6 : PUSH ESI
00984dd7 : PUSH 0xc8042c
00984ddc : PUSH 0xc8043c
00984de1 : PUSH EAX
00984de2 : MOV EAX,dword ptr [EDX + 0x4]
00984de5 : CALL EAX
00984de7 : FLD float ptr [0x00cdf208]
00984ded : MOVSS XMM0,dword ptr [0x00cdf208]
00984df5 : FLD float ptr [0x00cdf2a0]
00984dfb : MOV EDX,dword ptr [ESP + 0x60]
00984dff : MOV EBX,dword ptr [ESP + 0xc4]
00984e06 : ADD ESP,0x28
00984e09 : CMP dword ptr [ESP + 0xb4],0x1
00984e11 : LEA EAX,[ESI + 0x1]
00984e14 : MOV dword ptr [EBX + 0x148],EAX
00984e1a : JBE 0x00984e2e
00984e1c : MOVZX ECX,word ptr [EBX + 0x6e]
00984e20 : CMP EDX,ECX
00984e22 : JNZ 0x00984e2e
00984e24 : MOV dword ptr [EBX + 0x120],0x2
00984e2e : MOV ECX,dword ptr [ESP + 0x3c]
00984e32 : ADD ECX,0xc
00984e35 : MOV ESI,EAX
00984e37 : MOV dword ptr [ESP + 0x3c],ECX
00984e3b : MOV dword ptr [ESP + 0x78],ESI
00984e3f : CMP ECX,dword ptr [ESP + 0x70]
00984e43 : JNZ 0x00984b24
00984e49 : MOV EDI,dword ptr [ESP + 0x60]
00984e4d : FSTP ST0
00984e4f : FSTP ST0
00984e51 : MOV byte ptr [ESP + 0x34],0x1
00984e56 : MOV ECX,dword ptr [ESP + 0x58]
00984e5a : INC ECX
00984e5b : ADD EDI,0x1c
00984e5e : MOV dword ptr [ESP + 0x58],ECX
00984e62 : MOV dword ptr [ESP + 0x60],EDI
00984e66 : CMP ECX,dword ptr [ESP + 0x40]
00984e6a : JC 0x00984a55
00984e70 : XOR EDI,EDI
00984e72 : MOV EDX,dword ptr [ESP + 0xb8]
00984e79 : CMP word ptr [EDX + 0x8],0x4
00984e7e : JNZ 0x00984e92
00984e80 : MOV EAX,dword ptr [ESP + 0x7c]
00984e84 : INC EAX
00984e85 : CMP EAX,0x1
00984e88 : MOV dword ptr [ESP + 0x7c],EAX
00984e8c : JL 0x00984989
00984e92 : MOV EAX,[0x00da9894]
00984e97 : MOV EAX,dword ptr [EAX]
00984e99 : CMP EAX,EDI
00984e9b : JZ 0x00984edc
00984e9d : CMP dword ptr [EAX + 0x114],EDI
00984ea3 : JZ 0x00984edc
00984ea5 : MOV ECX,dword ptr [ESP + 0x98]
00984eac : CMP dword ptr [ECX + 0x38],0x8
00984eb0 : MOV EAX,dword ptr [EAX + 0x114]
00984eb6 : JC 0x00984ebd
00984eb8 : MOV ECX,dword ptr [ECX + 0x24]
00984ebb : JMP 0x00984ec0
00984ebd : ADD ECX,0x24
00984ec0 : MOVZX ESI,byte ptr [ESP + 0x34]
00984ec5 : MOV EDX,dword ptr [EAX]
00984ec7 : PUSH ESI
00984ec8 : PUSH ECX
00984ec9 : PUSH 0xc80450
00984ece : PUSH 0xc80458
00984ed3 : PUSH EAX
00984ed4 : MOV EAX,dword ptr [EDX + 0x4]
00984ed7 : CALL EAX
00984ed9 : ADD ESP,0x14
00984edc : MOV byte ptr [ESP + 0x1100],0x1
00984ee4 : CMP dword ptr [ESP + 0x8c],EDI
00984eeb : JZ 0x00984f16
00984eed : MOV ECX,dword ptr [ESP + 0xb0]
00984ef4 : MOV ESI,dword ptr [ESP + 0x8c]
00984efb : MOV EDI,dword ptr [ESP + 0x90]
00984f02 : PUSH ECX
00984f03 : MOV EAX,ESI
00984f05 : CALL 0x00405450
00984f0a : ADD ESP,0x4
00984f0d : MOV ECX,ESI
00984f0f : CALL 0x006f04e0
00984f16 : MOV dword ptr [ESP + 0x8c],EDI
00984f1d : MOV dword ptr [ESP + 0x90],EDI
00984f24 : MOV dword ptr [ESP + 0x94],EDI
00984f2b : MOV byte ptr [ESP + 0x1100],0x0
00984f33 : MOV ECX,dword ptr [ESP + 0x6c]
00984f37 : CMP ECX,EDI
00984f39 : JZ 0x00984f40
00984f3b : CALL 0x006f04e0
00984f40 : MOV dword ptr [ESP + 0x6c],EDI
00984f44 : MOV dword ptr [ESP + 0x70],EDI
00984f48 : MOV dword ptr [ESP + 0x74],EDI
00984f4c : MOV dword ptr [ESP + 0x1100],0xffffffff
00984f57 : PUSH 0x406560
00984f5c : PUSH 0x80
00984f61 : PUSH 0x1c
00984f63 : LEA EDX,[ESP + 0x2c8]
00984f6a : PUSH EDX
00984f6b : CALL 0x0063625e
00984f70 : MOV ECX,dword ptr [ESP + 0x10f8]
00984f77 : MOV dword ptr FS:[0x0],ECX
00984f7e : POP ECX
00984f7f : POP EDI
00984f80 : POP ESI
00984f81 : POP EBX
00984f82 : MOV ECX,dword ptr [ESP + 0x10b0]
00984f89 : XOR ECX,ESP
00984f8b : CALL 0x00633e6b
00984f90 : MOV ESP,EBP
00984f92 : POP EBP
00984f93 : RET 0x4
