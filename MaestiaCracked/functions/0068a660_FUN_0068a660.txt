PROGRAM  : Maestia.exe
FUNCTION : FUN_0068a660
ENTRY    : 0068a660
BODY     : [[0068a660, 0068a68e]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_0068a660(byte *param_1,byte *param_2)

{
  byte bVar1;
  int *piVar2;
  undefined4 uVar3;
  uint *puVar4;
  undefined4 *puVar5;
  byte *pbVar6;
  int iVar7;
  undefined4 *puVar8;
  int iVar9;
  byte *pbVar10;
  uint uVar11;
  bool bVar12;
  
  puVar5 = (undefined4 *)param_1;
  if (param_1 == (byte *)0x0) {
    return 0x21;
  }
  if (param_2 == (byte *)0x0) {
    return 6;
  }
  if (0x20003 < *(int *)(param_2 + 0x10)) {
    return 4;
  }
  uVar11 = 0;
  if (*(int *)((int)param_1 + 0x18) != 0) {
    puVar8 = (undefined4 *)((int)param_1 + 0x1c);
    do {
      piVar2 = (int *)*puVar8;
      pbVar6 = *(byte **)(*piVar2 + 8);
      pbVar10 = *(byte **)(param_2 + 8);
      do {
        bVar1 = *pbVar6;
        bVar12 = bVar1 < *pbVar10;
        if (bVar1 != *pbVar10) {
LAB_0068a6d0:
          iVar7 = (1 - (uint)bVar12) - (uint)(bVar12 != 0);
          goto LAB_0068a6d5;
        }
        if (bVar1 == 0) break;
        bVar1 = pbVar6[1];
        bVar12 = bVar1 < pbVar10[1];
        if (bVar1 != pbVar10[1]) goto LAB_0068a6d0;
        pbVar6 = pbVar6 + 2;
        pbVar10 = pbVar10 + 2;
      } while (bVar1 != 0);
      iVar7 = 0;
LAB_0068a6d5:
      if (iVar7 == 0) {
        if (*(int *)(param_2 + 0xc) <= *(int *)(*piVar2 + 0xc)) {
          return 5;
        }
        param_1 = *(byte **)(param_2 + 8);
        FUN_00689ba0(puVar5,piVar2);
        break;
      }
      uVar11 = uVar11 + 1;
      puVar8 = puVar8 + 1;
    } while (uVar11 < *(uint *)((int)param_1 + 0x18));
  }
  uVar3 = *puVar5;
  param_1 = (byte *)0x0;
  if (0x1f < (uint)puVar5[6]) {
    return 0x30;
  }
  puVar8 = (undefined4 *)FUN_00688c00(uVar3,*(undefined4 *)(param_2 + 4),&param_1);
  iVar7 = (int)param_1;
  if (param_1 == (byte *)0x0) {
    puVar8[1] = puVar5;
    puVar8[2] = uVar3;
    *puVar8 = param_2;
    if ((*param_2 & 2) != 0) {
      iVar9 = FUN_00689a80();
      iVar7 = 0;
      if (iVar9 != 0) goto LAB_0068a7ac;
    }
    if ((*(byte *)*puVar8 & 4) != 0) {
      puVar5[0x2a] = puVar8;
    }
    puVar4 = (uint *)*puVar8;
    if (((*puVar4 & 1) != 0) && (puVar8[5] = puVar4, (*puVar4 & 0x200) == 0)) {
      iVar9 = FUN_00688d70(uVar3,puVar8 + 9);
      iVar7 = 0;
      if (iVar9 != 0) goto LAB_0068a7ac;
    }
    if (*(code **)(param_2 + 0x18) != (code *)0x0) {
      iVar9 = (**(code **)(param_2 + 0x18))(puVar8);
      iVar7 = 0;
      if (iVar9 != 0) {
LAB_0068a7ac:
        if (((*(uint *)*puVar8 & 1) != 0) && ((*(uint *)*puVar8 & 0x200) == 0)) {
          FUN_006881f0(puVar8[9]);
        }
        if (((*(byte *)*puVar8 & 2) != 0) && (puVar8[0xf] != 0)) {
          (**(code **)(*(int *)(puVar8[5] + 0x38) + 0x14))(puVar8[0xf]);
        }
        FUN_00687f30(uVar3,puVar8);
        return iVar9;
      }
    }
    puVar5[puVar5[6] + 7] = puVar8;
    puVar5[6] = puVar5[6] + 1;
  }
  return iVar7;
}



============================================================
DISASSEMBLY
============================================================
0068a660 : PUSH EBP
0068a661 : MOV EBP,dword ptr [ESP + 0x8]
0068a665 : TEST EBP,EBP
0068a667 : JNZ 0x0068a670
0068a669 : MOV EAX,0x21
0068a66e : POP EBP
0068a66f : RET
0068a670 : MOV EAX,dword ptr [ESP + 0xc]
0068a674 : TEST EAX,EAX
0068a676 : JNZ 0x0068a67f
0068a678 : MOV EAX,0x6
0068a67d : POP EBP
0068a67e : RET
0068a67f : CMP dword ptr [EAX + 0x10],0x20003
0068a686 : JLE 0x0068a68f
0068a688 : MOV EAX,0x4
0068a68d : POP EBP
0068a68e : RET
