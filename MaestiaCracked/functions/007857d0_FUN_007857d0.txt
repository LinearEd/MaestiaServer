PROGRAM  : Maestia.exe
FUNCTION : FUN_007857d0
ENTRY    : 007857d0
BODY     : [[007857d0, 00785911]]

============================================================
DECOMPILED C CODE
============================================================

int FUN_007857d0(undefined4 param_1)

{
  int iVar1;
  int in_ECX;
  uint uVar2;
  ushort uVar3;
  LPCRITICAL_SECTION local_2c;
  char *local_28;
  undefined4 local_24;
  int local_20;
  undefined4 local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b10fb8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_2c = (LPCRITICAL_SECTION)(in_ECX + 0x150);
  local_20 = 0;
  local_28 = ".\\Terrain\\AvaQuadNode.cpp";
  local_24 = 0xff;
  local_1c = 1;
  local_18 = in_ECX;
  FUN_006ef1a0(&local_2c);
  local_8 = 0;
  iVar1 = FUN_007856f0(param_1);
  if (iVar1 != 0) {
    local_8 = 0xffffffff;
    if (local_20 != 0) {
      LeaveCriticalSection(local_2c);
    }
    ExceptionList = local_10;
    return in_ECX;
  }
  local_14 = 0;
  do {
    uVar2 = local_14 & 0xffff;
    uVar3 = 0;
    do {
      if ((*(int *)(in_ECX + ((uint)uVar3 + uVar2 * 2 + 6) * 4) != 0) &&
         (iVar1 = FUN_007857d0(param_1), in_ECX = local_18, iVar1 != 0)) {
        local_8 = 0xffffffff;
        if (local_20 != 0) {
          LeaveCriticalSection(local_2c);
        }
        ExceptionList = local_10;
        return iVar1;
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < 2);
    local_14 = local_14 + 1;
    if (1 < (ushort)local_14) {
      local_8 = 0xffffffff;
      if (local_20 != 0) {
        LeaveCriticalSection(local_2c);
      }
      ExceptionList = local_10;
      return 0;
    }
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
007857d0 : PUSH EBP
007857d1 : MOV EBP,ESP
007857d3 : PUSH -0x1
007857d5 : PUSH 0xb10fb8
007857da : MOV EAX,FS:[0x0]
007857e0 : PUSH EAX
007857e1 : SUB ESP,0x1c
007857e4 : PUSH EBX
007857e5 : PUSH ESI
007857e6 : PUSH EDI
007857e7 : MOV EAX,[0x00d66fa0]
007857ec : XOR EAX,EBP
007857ee : PUSH EAX
007857ef : LEA EAX,[EBP + -0xc]
007857f2 : MOV FS:[0x0],EAX
007857f8 : MOV EDI,ECX
007857fa : MOV dword ptr [EBP + -0x14],EDI
007857fd : LEA ECX,[EBP + -0x28]
00785800 : LEA EAX,[EDI + 0x150]
00785806 : XOR ESI,ESI
00785808 : PUSH ECX
00785809 : MOV dword ptr [EBP + -0x1c],ESI
0078580c : MOV dword ptr [EBP + -0x28],EAX
0078580f : MOV dword ptr [EBP + -0x24],0xc1132c
00785816 : MOV dword ptr [EBP + -0x20],0xff
0078581d : MOV dword ptr [EBP + -0x18],0x1
00785824 : CALL 0x006ef1a0
00785829 : MOV dword ptr [EBP + -0x4],ESI
0078582c : MOV EDX,dword ptr [EBP + 0x8]
0078582f : PUSH EDX
00785830 : MOV ECX,EDI
00785832 : CALL 0x007856f0
00785837 : CMP EAX,ESI
00785839 : JZ 0x0078586a
0078583b : MOV dword ptr [EBP + -0x4],0xffffffff
00785842 : CMP dword ptr [EBP + -0x1c],ESI
00785845 : JZ 0x00785854
00785847 : MOV EAX,dword ptr [EBP + -0x28]
0078584a : PUSH EAX
0078584b : CALL dword ptr [0x00b8511c]
00785851 : MOV dword ptr [EBP + -0x1c],ESI
00785854 : MOV EAX,EDI
00785856 : MOV ECX,dword ptr [EBP + -0xc]
00785859 : MOV dword ptr FS:[0x0],ECX
00785860 : POP ECX
00785861 : POP EDI
00785862 : POP ESI
00785863 : POP EBX
00785864 : MOV ESP,EBP
00785866 : POP EBP
00785867 : RET 0x4
0078586a : XOR EAX,EAX
0078586c : MOV dword ptr [EBP + -0x10],EAX
0078586f : MOVZX EBX,AX
00785872 : XOR ESI,ESI
00785874 : LEA EBX,[EBX + EBX*0x1 + 0x6]
00785878 : MOVZX ECX,SI
0078587b : ADD ECX,EBX
0078587d : MOV ECX,dword ptr [EDI + ECX*0x4]
00785880 : TEST ECX,ECX
00785882 : JZ 0x00785896
00785884 : MOV EDX,dword ptr [EBP + 0x8]
00785887 : PUSH EDX
00785888 : CALL 0x007857d0
0078588d : MOV EDI,EAX
0078588f : TEST EDI,EDI
00785891 : JNZ 0x007858de
00785893 : MOV EDI,dword ptr [EBP + -0x14]
00785896 : INC ESI
00785897 : CMP SI,0x2
0078589b : JC 0x00785878
0078589d : MOV EAX,dword ptr [EBP + -0x10]
007858a0 : INC EAX
007858a1 : MOV dword ptr [EBP + -0x10],EAX
007858a4 : CMP AX,0x2
007858a8 : JC 0x0078586f
007858aa : MOV dword ptr [EBP + -0x4],0xffffffff
007858b1 : CMP dword ptr [EBP + -0x1c],0x0
007858b5 : JZ 0x007858c8
007858b7 : MOV ECX,dword ptr [EBP + -0x28]
007858ba : PUSH ECX
007858bb : CALL dword ptr [0x00b8511c]
007858c1 : MOV dword ptr [EBP + -0x1c],0x0
007858c8 : XOR EAX,EAX
007858ca : MOV ECX,dword ptr [EBP + -0xc]
007858cd : MOV dword ptr FS:[0x0],ECX
007858d4 : POP ECX
007858d5 : POP EDI
007858d6 : POP ESI
007858d7 : POP EBX
007858d8 : MOV ESP,EBP
007858da : POP EBP
007858db : RET 0x4
007858de : MOV dword ptr [EBP + -0x4],0xffffffff
007858e5 : CMP dword ptr [EBP + -0x1c],0x0
007858e9 : JZ 0x007858fc
007858eb : MOV EAX,dword ptr [EBP + -0x28]
007858ee : PUSH EAX
007858ef : CALL dword ptr [0x00b8511c]
007858f5 : MOV dword ptr [EBP + -0x1c],0x0
007858fc : MOV EAX,EDI
007858fe : MOV ECX,dword ptr [EBP + -0xc]
00785901 : MOV dword ptr FS:[0x0],ECX
00785908 : POP ECX
00785909 : POP EDI
0078590a : POP ESI
0078590b : POP EBX
0078590c : MOV ESP,EBP
0078590e : POP EBP
0078590f : RET 0x4
