PROGRAM  : Maestia.exe
FUNCTION : FUN_00407580
ENTRY    : 00407580
BODY     : [[00407580, 00407622]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 * FUN_00407580(undefined4 *param_1,ushort *param_2)

{
  int in_EAX;
  undefined4 *puVar1;
  undefined4 *puVar2;
  bool bVar3;
  
  puVar2 = *(undefined4 **)(in_EAX + 4);
  bVar3 = true;
  if (*(char *)((int)puVar2[1] + 0x31) == '\0') {
    puVar1 = (undefined4 *)puVar2[1];
    do {
      puVar2 = puVar1;
      bVar3 = *param_2 < *(ushort *)(puVar2 + 3);
      if (bVar3) {
        puVar1 = (undefined4 *)*puVar2;
      }
      else {
        puVar1 = (undefined4 *)puVar2[2];
      }
    } while (*(char *)((int)puVar1 + 0x31) == '\0');
  }
  if (bVar3) {
    if (puVar2 == (undefined4 *)**(int **)(in_EAX + 4)) {
      bVar3 = true;
      goto LAB_004075d6;
    }
    FUN_00452c90();
  }
  if (*param_2 <= *(ushort *)(puVar2 + 3)) {
    *param_1 = puVar2;
    *(undefined1 *)(param_1 + 1) = 0;
    return param_1;
  }
LAB_004075d6:
  puVar2 = (undefined4 *)FUN_004082f0(&param_2,bVar3,param_2);
  *param_1 = *puVar2;
  *(undefined1 *)(param_1 + 1) = 1;
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
00407580 : PUSH EBP
00407581 : MOV EBP,ESP
00407583 : PUSH ECX
00407584 : PUSH EBX
00407585 : MOV EBX,dword ptr [EBP + 0x8]
00407588 : PUSH ESI
00407589 : PUSH EDI
0040758a : MOV EDI,EAX
0040758c : MOV ESI,dword ptr [EDI + 0x4]
0040758f : MOV EAX,dword ptr [ESI + 0x4]
00407592 : CMP byte ptr [EAX + 0x31],0x0
00407596 : MOV CL,0x1
00407598 : MOV byte ptr [EBP + -0x4],CL
0040759b : JNZ 0x004075c0
0040759d : MOV ECX,dword ptr [EBP + 0xc]
004075a0 : MOVZX EDX,word ptr [ECX]
004075a3 : CMP DX,word ptr [EAX + 0xc]
004075a7 : MOV ESI,EAX
004075a9 : SETC CL
004075ac : MOV byte ptr [EBP + -0x4],CL
004075af : TEST CL,CL
004075b1 : JZ 0x004075b7
004075b3 : MOV EAX,dword ptr [EAX]
004075b5 : JMP 0x004075ba
004075b7 : MOV EAX,dword ptr [EAX + 0x8]
004075ba : CMP byte ptr [EAX + 0x31],0x0
004075be : JZ 0x004075a3
004075c0 : MOV EAX,ESI
004075c2 : MOV dword ptr [EBP + 0x8],EAX
004075c5 : TEST CL,CL
004075c7 : JZ 0x004075ff
004075c9 : MOV EDX,dword ptr [EDI + 0x4]
004075cc : CMP ESI,dword ptr [EDX]
004075ce : JNZ 0x004075f4
004075d0 : MOV EAX,dword ptr [EBP + 0xc]
004075d3 : PUSH EAX
004075d4 : PUSH 0x1
004075d6 : LEA ECX,[EBP + 0xc]
004075d9 : PUSH ECX
004075da : MOV ECX,ESI
004075dc : CALL 0x004082f0
004075e1 : MOV EDX,dword ptr [EAX]
004075e3 : MOV dword ptr [EBX],EDX
004075e5 : MOV byte ptr [EBX + 0x4],0x1
004075e9 : MOV EAX,EBX
004075eb : POP EDI
004075ec : POP ESI
004075ed : POP EBX
004075ee : MOV ESP,EBP
004075f0 : POP EBP
004075f1 : RET 0x8
004075f4 : LEA EDX,[EBP + 0x8]
004075f7 : CALL 0x00452c90
004075fc : MOV EAX,dword ptr [EBP + 0x8]
004075ff : MOV DX,word ptr [EAX + 0xc]
00407603 : MOV ECX,dword ptr [EBP + 0xc]
00407606 : CMP DX,word ptr [ECX]
00407609 : JNC 0x00407612
0040760b : MOV EAX,dword ptr [EBP + -0x4]
0040760e : PUSH ECX
0040760f : PUSH EAX
00407610 : JMP 0x004075d6
00407612 : POP EDI
00407613 : MOV dword ptr [EBX],EAX
00407615 : POP ESI
00407616 : MOV byte ptr [EBX + 0x4],0x0
0040761a : MOV EAX,EBX
0040761c : POP EBX
0040761d : MOV ESP,EBP
0040761f : POP EBP
00407620 : RET 0x8
