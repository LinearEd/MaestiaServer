PROGRAM  : Maestia.exe
FUNCTION : FUN_00851480
ENTRY    : 00851480
BODY     : [[00851480, 00851789] [00851790, 008517f1]]

============================================================
DECOMPILED C CODE
============================================================

undefined4 FUN_00851480(void)

{
  uint uVar1;
  int iVar2;
  int in_ECX;
  float *pfVar3;
  float10 fVar4;
  float fVar5;
  undefined **local_114 [47];
  undefined1 local_58 [4];
  float local_54;
  undefined4 local_4c;
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  float local_20;
  undefined4 local_1c;
  float local_18;
  float local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b441e1;
  local_10 = ExceptionList;
  uVar1 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  if (*(int *)(in_ECX + 0x19e8) == 0) {
    return 1;
  }
  iVar2 = *(int *)(in_ECX + 0x18a8);
  if (iVar2 != 0) {
    if ((*(char *)(iVar2 + 0x20) != '\0') && (*(int *)(in_ECX + 0x19ec) == 0)) {
      return 1;
    }
    if (((iVar2 != 0) && (*(char *)(iVar2 + 0x20) != '\0')) && (*(int *)(iVar2 + 0x30) != 0)) {
      ExceptionList = &local_10;
      iVar2 = FUN_007d5b60(local_114);
      local_24 = *(undefined4 *)(iVar2 + 0x20);
      local_1c = *(undefined4 *)(iVar2 + 0x28);
      fVar5 = *(float *)(iVar2 + 0x24);
      local_14 = fVar5 - *(float *)(in_ECX + 0x1a68);
      goto LAB_00851577;
    }
  }
  ExceptionList = &local_10;
  iVar2 = FUN_007d5b60(local_114);
  local_24 = *(undefined4 *)(iVar2 + 0x20);
  local_1c = *(undefined4 *)(iVar2 + 0x28);
  fVar5 = *(float *)(iVar2 + 0x24) - *(float *)(in_ECX + 0x1a64);
  local_14 = fVar5;
LAB_00851577:
  local_8 = 0xffffffff;
  fVar5 = fVar5 - DAT_00d72c24;
  local_114[0] = &PTR_FUN_00cd083c;
  local_20 = fVar5;
  FUN_00850860(uVar1);
  if (*(char *)(in_ECX + 0x19f8) == '\0') {
    if (fVar5 + DAT_00d72c24 <= local_14) {
      iVar2 = *(int *)(in_ECX + 0x18a8);
      local_54 = 0.0;
      local_34 = 0;
      local_30 = 0;
      local_2c = 0;
      local_4c = 0;
      local_44 = 0;
      local_28 = 0x47c34f80;
      local_48 = 0xbf800000;
      local_14 = 2.8;
      if (((iVar2 != 0) && (*(char *)(iVar2 + 0x20) != '\0')) && (*(int *)(iVar2 + 0x30) != 0)) {
        local_14 = *(float *)(in_ECX + 0x1a68);
        if (local_14 <= 10.0) {
          local_14 = 9.0;
        }
        if (*(char *)(iVar2 + 0xec) != '\0') {
          local_14 = 6.0;
        }
      }
      local_18 = fVar5;
      iVar2 = FUN_007d5b60(local_114);
      local_40 = *(undefined4 *)(iVar2 + 0x20);
      local_3c = *(undefined4 *)(iVar2 + 0x24);
      local_38 = *(undefined4 *)(iVar2 + 0x28);
      local_8 = 0xffffffff;
      local_114[0] = &PTR_FUN_00cd083c;
      iVar2 = FUN_007e9d70(*(undefined4 *)(DAT_00da93ec + 0xc),&local_4c,local_58,&local_34,
                           &local_28);
      fVar5 = local_18;
      if ((iVar2 != 0) && (local_18 <= local_54)) {
        fVar5 = local_54;
      }
      if (local_14 + fVar5 <= local_20) {
        FUN_007d5b60(local_114);
        local_8 = 3;
        FUN_00445280();
        local_8 = 0xffffffff;
        local_114[0] = &PTR_FUN_00cd083c;
        iVar2 = *(int *)(in_ECX + 0x1a30) - *(int *)(in_ECX + 0x1a2c) >> 2;
        if (iVar2 < 8) {
          ExceptionList = local_10;
          return 0;
        }
        local_18 = (float)(iVar2 + -1);
        iVar2 = 0;
        if (0 < (int)local_18) {
          pfVar3 = *(float **)(in_ECX + 0x1a2c);
          do {
            fVar4 = (float10)FUN_0040e8d0(*pfVar3 - pfVar3[1]);
            if ((float10)0.05 < fVar4) {
              FUN_0042d2e0(in_ECX + 0x1a28);
              ExceptionList = local_10;
              return 0;
            }
            iVar2 = iVar2 + 1;
            pfVar3 = pfVar3 + 1;
          } while (iVar2 < (int)local_18);
        }
        FUN_0042d2e0(in_ECX + 0x1a28);
      }
    }
  }
  else if ((*(float *)((((*(char *)(*(int *)(in_ECX + 0x410) + 300) != '\0') - 1 & 2) * 3 + 9) *
                       0x10 + *(int *)(in_ECX + 0x410)) <= 10.0) || (fVar5 + 0.05 <= local_20)) {
    ExceptionList = local_10;
    return 0;
  }
  ExceptionList = local_10;
  return 1;
}



============================================================
DISASSEMBLY
============================================================
00851480 : PUSH EBP
00851481 : MOV EBP,ESP
00851483 : PUSH -0x1
00851485 : PUSH 0xb441e1
0085148a : MOV EAX,FS:[0x0]
00851490 : PUSH EAX
00851491 : SUB ESP,0x104
00851497 : PUSH EBX
00851498 : PUSH ESI
00851499 : PUSH EDI
0085149a : MOV EAX,[0x00d66fa0]
0085149f : XOR EAX,EBP
008514a1 : PUSH EAX
008514a2 : LEA EAX,[EBP + -0xc]
008514a5 : MOV FS:[0x0],EAX
008514ab : MOV ESI,ECX
008514ad : CMP dword ptr [ESI + 0x19e8],0x0
008514b4 : JZ 0x008517c4
008514ba : MOV EAX,dword ptr [ESI + 0x18a8]
008514c0 : TEST EAX,EAX
008514c2 : JZ 0x00851531
008514c4 : CMP byte ptr [EAX + 0x20],0x0
008514c8 : JZ 0x008514d7
008514ca : CMP dword ptr [ESI + 0x19ec],0x0
008514d1 : JZ 0x008517c4
008514d7 : TEST EAX,EAX
008514d9 : JZ 0x00851531
008514db : CMP byte ptr [EAX + 0x20],0x0
008514df : JZ 0x00851531
008514e1 : CMP dword ptr [EAX + 0x30],0x0
008514e5 : JZ 0x00851531
008514e7 : MOV EAX,dword ptr [EAX + 0x30]
008514ea : LEA ECX,[EBP + 0xfffffef0]
008514f0 : PUSH ECX
008514f1 : MOV ECX,EAX
008514f3 : CALL 0x007d5b60
008514f8 : MOV dword ptr [EBP + -0x4],0x0
008514ff : MOVSS XMM0,dword ptr [EAX + 0x20]
00851504 : MOVSS XMM1,dword ptr [EAX + 0x28]
00851509 : MOVSS dword ptr [EBP + -0x20],XMM0
0085150e : MOVSS XMM0,dword ptr [EAX + 0x24]
00851513 : MOVSS dword ptr [EBP + -0x18],XMM1
00851518 : MOV dword ptr [EBP + -0x4],0xffffffff
0085151f : MOVAPS XMM1,XMM0
00851522 : SUBSS XMM1,dword ptr [ESI + 0x1a68]
0085152a : MOVSS dword ptr [EBP + -0x10],XMM1
0085152f : JMP 0x00851577
00851531 : MOV ECX,dword ptr [ESI + 0x3e8]
00851537 : LEA EDX,[EBP + 0xfffffef0]
0085153d : PUSH EDX
0085153e : CALL 0x007d5b60
00851543 : MOV dword ptr [EBP + -0x4],0x1
0085154a : MOVSS XMM0,dword ptr [EAX + 0x20]
0085154f : MOVSS XMM1,dword ptr [EAX + 0x28]
00851554 : MOVSS dword ptr [EBP + -0x20],XMM0
00851559 : MOVSS XMM0,dword ptr [EAX + 0x24]
0085155e : MOVSS dword ptr [EBP + -0x18],XMM1
00851563 : MOV dword ptr [EBP + -0x4],0xffffffff
0085156a : SUBSS XMM0,dword ptr [ESI + 0x1a64]
00851572 : MOVSS dword ptr [EBP + -0x10],XMM0
00851577 : SUBSS XMM0,dword ptr [0x00d72c24]
0085157f : LEA EAX,[EBP + -0x20]
00851582 : MOVSS dword ptr [EBP + -0x1c],XMM0
00851587 : MOV dword ptr [EBP + 0xfffffef0],0xcd083c
00851591 : CALL 0x00850860
00851596 : CMP byte ptr [ESI + 0x19f8],0x0
0085159d : MOVSS dword ptr [EBP + -0x14],XMM0
008515a2 : JZ 0x008515f4
008515a4 : MOV ESI,dword ptr [ESI + 0x410]
008515aa : XOR EAX,EAX
008515ac : CMP byte ptr [ESI + 0x12c],AL
008515b2 : SETNZ AL
008515b5 : DEC EAX
008515b6 : AND EAX,0x2
008515b9 : LEA EAX,[EAX + EAX*0x2 + 0x9]
008515bd : SHL EAX,0x4
008515c0 : MOVSS XMM1,dword ptr [EAX + ESI*0x1]
008515c5 : COMISS XMM1,dword ptr [0x00c18874]
008515cc : JBE 0x008515e0
008515ce : ADDSS XMM0,dword ptr [0x00cdf0f4]
008515d6 : COMISS XMM0,dword ptr [EBP + -0x1c]
008515da : JA 0x008517c4
008515e0 : XOR AL,AL
008515e2 : MOV ECX,dword ptr [EBP + -0xc]
008515e5 : MOV dword ptr FS:[0x0],ECX
008515ec : POP ECX
008515ed : POP EDI
008515ee : POP ESI
008515ef : POP EBX
008515f0 : MOV ESP,EBP
008515f2 : POP EBP
008515f3 : RET
008515f4 : ADDSS XMM0,dword ptr [0x00d72c24]
008515fc : COMISS XMM0,dword ptr [EBP + -0x10]
00851600 : JA 0x008517c4
00851606 : XORPS XMM0,XMM0
00851609 : MOV EAX,dword ptr [ESI + 0x18a8]
0085160f : MOVSS XMM1,dword ptr [0x00cdf0d0]
00851617 : MOV EBX,dword ptr [ESI + 0x3e8]
0085161d : MOVSS dword ptr [EBP + -0x50],XMM0
00851622 : MOVSS dword ptr [EBP + -0x30],XMM0
00851627 : MOVSS dword ptr [EBP + -0x2c],XMM0
0085162c : MOVSS dword ptr [EBP + -0x28],XMM0
00851631 : MOVSS dword ptr [EBP + -0x48],XMM0
00851636 : MOVSS dword ptr [EBP + -0x40],XMM0
0085163b : MOVSS XMM0,dword ptr [0x00cdf664]
00851643 : MOVSS dword ptr [EBP + -0x24],XMM0
00851648 : MOVSS XMM0,dword ptr [0x00cdf7e4]
00851650 : MOVSS dword ptr [EBP + -0x44],XMM1
00851655 : MOVSS dword ptr [EBP + -0x10],XMM0
0085165a : TEST EAX,EAX
0085165c : JZ 0x008516a1
0085165e : CMP byte ptr [EAX + 0x20],0x0
00851662 : JZ 0x008516a1
00851664 : MOV ECX,dword ptr [EAX + 0x30]
00851667 : TEST ECX,ECX
00851669 : JZ 0x008516a1
0085166b : MOVSS XMM0,dword ptr [ESI + 0x1a68]
00851673 : COMISS XMM0,dword ptr [0x00c18874]
0085167a : MOV EBX,ECX
0085167c : JA 0x00851686
0085167e : MOVSS XMM0,dword ptr [0x00cdf584]
00851686 : CMP byte ptr [EAX + 0xec],0x0
0085168d : MOVSS dword ptr [EBP + -0x10],XMM0
00851692 : JZ 0x008516a1
00851694 : MOVSS XMM0,dword ptr [0x00cdf148]
0085169c : MOVSS dword ptr [EBP + -0x10],XMM0
008516a1 : LEA ECX,[EBP + 0xfffffef0]
008516a7 : PUSH ECX
008516a8 : MOV ECX,EBX
008516aa : CALL 0x007d5b60
008516af : MOV dword ptr [EBP + -0x4],0x2
008516b6 : MOVSS XMM0,dword ptr [EAX + 0x20]
008516bb : MOVSS XMM1,dword ptr [EAX + 0x24]
008516c0 : MOVSS XMM2,dword ptr [EAX + 0x28]
008516c5 : MOVSS dword ptr [EBP + -0x3c],XMM0
008516ca : MOVSS dword ptr [EBP + -0x38],XMM1
008516cf : MOVSS dword ptr [EBP + -0x34],XMM2
008516d4 : MOV dword ptr [EBP + -0x4],0xffffffff
008516db : MOV EDX,dword ptr [0x00da93ec]
008516e1 : LEA ECX,[EBP + -0x24]
008516e4 : PUSH ECX
008516e5 : MOV dword ptr [EBP + 0xfffffef0],0xcd083c
008516ef : MOV EAX,dword ptr [EDX + 0xc]
008516f2 : LEA EDX,[EBP + -0x30]
008516f5 : PUSH EDX
008516f6 : LEA ECX,[EBP + -0x54]
008516f9 : PUSH ECX
008516fa : LEA EDX,[EBP + -0x48]
008516fd : PUSH EDX
008516fe : PUSH EAX
008516ff : LEA EDI,[EBP + -0x3c]
00851702 : CALL 0x007e9d70
00851707 : MOVSS XMM0,dword ptr [EBP + -0x14]
0085170c : TEST EAX,EAX
0085170e : JZ 0x0085171d
00851710 : MOVSS XMM1,dword ptr [EBP + -0x50]
00851715 : COMISS XMM0,XMM1
00851718 : JA 0x0085171d
0085171a : MOVAPS XMM0,XMM1
0085171d : MOVSS XMM1,dword ptr [EBP + -0x10]
00851722 : ADDSS XMM1,XMM0
00851726 : COMISS XMM1,dword ptr [EBP + -0x1c]
0085172a : JA 0x008517c4
00851730 : LEA EAX,[EBP + 0xfffffef0]
00851736 : PUSH EAX
00851737 : MOV ECX,EBX
00851739 : CALL 0x007d5b60
0085173e : MOV dword ptr [EBP + -0x4],0x3
00851745 : LEA EBX,[ESI + 0x1a28]
0085174b : LEA EDI,[EAX + 0x24]
0085174e : MOV EDX,EBX
00851750 : CALL 0x00445280
00851755 : MOV dword ptr [EBP + -0x4],0xffffffff
0085175c : MOV EAX,dword ptr [EBX + 0x8]
0085175f : SUB EAX,dword ptr [EBX + 0x4]
00851762 : MOV dword ptr [EBP + 0xfffffef0],0xcd083c
0085176c : SAR EAX,0x2
0085176f : CMP EAX,0x7
00851772 : JLE 0x008515e0
00851778 : DEC EAX
00851779 : XOR EDI,EDI
0085177b : MOV dword ptr [EBP + -0x14],EAX
0085177e : TEST EAX,EAX
00851780 : JLE 0x008517be
00851782 : MOV ESI,dword ptr [ESI + 0x1a2c]
00851788 : JMP 0x00851790
00851790 : MOVSS XMM0,dword ptr [ESI]
00851794 : SUBSS XMM0,dword ptr [ESI + 0x4]
00851799 : PUSH ECX
0085179a : MOVSS dword ptr [ESP],XMM0
0085179f : CALL 0x0040e8d0
008517a4 : FLD float ptr [0x00cdf0f4]
008517aa : FXCH
008517ac : ADD ESP,0x4
008517af : FCOMIP ST0,ST1
008517b1 : FSTP ST0
008517b3 : JA 0x008517d8
008517b5 : INC EDI
008517b6 : ADD ESI,0x4
008517b9 : CMP EDI,dword ptr [EBP + -0x14]
008517bc : JL 0x00851790
008517be : PUSH EBX
008517bf : CALL 0x0042d2e0
008517c4 : MOV AL,0x1
008517c6 : MOV ECX,dword ptr [EBP + -0xc]
008517c9 : MOV dword ptr FS:[0x0],ECX
008517d0 : POP ECX
008517d1 : POP EDI
008517d2 : POP ESI
008517d3 : POP EBX
008517d4 : MOV ESP,EBP
008517d6 : POP EBP
008517d7 : RET
008517d8 : PUSH EBX
008517d9 : CALL 0x0042d2e0
008517de : XOR AL,AL
008517e0 : MOV ECX,dword ptr [EBP + -0xc]
008517e3 : MOV dword ptr FS:[0x0],ECX
008517ea : POP ECX
008517eb : POP EDI
008517ec : POP ESI
008517ed : POP EBX
008517ee : MOV ESP,EBP
008517f0 : POP EBP
008517f1 : RET
