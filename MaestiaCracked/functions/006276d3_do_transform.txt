PROGRAM  : Maestia.exe
FUNCTION : do_transform
ENTRY    : 006276d3
BODY     : [[006276d3, 00627780]]

============================================================
DECOMPILED C CODE
============================================================

/* WARNING: Function: __EH_prolog3 replaced with injection: EH_prolog3 */
/* WARNING: Function: __EH_epilog3 replaced with injection: EH_epilog3 */
/* Library Function - Single Match
    protected: virtual class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
   std::allocator<wchar_t> > __thiscall std::collate<wchar_t>::do_transform(wchar_t const *,wchar_t
   const *)const 
   
   Library: Visual Studio 2008 Release */

wchar_t * __thiscall
std::collate<wchar_t>::do_transform(collate<wchar_t> *this,wchar_t *param_1,wchar_t *param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  wchar_t *_String1;
  uint uVar4;
  wchar_t *in_stack_0000000c;
  undefined1 local_34 [8];
  undefined1 local_2c [8];
  wchar_t *local_24;
  undefined4 local_20;
  wchar_t *local_1c;
  wchar_t *local_18;
  _Collvec *local_14;
  undefined4 local_8;
  undefined4 uStack_4;
  
  uStack_4 = 0x24;
  local_8 = 0x6276df;
  local_20 = 0;
  local_24 = param_1;
  local_18 = param_2;
  local_1c = in_stack_0000000c;
  local_14 = (_Collvec *)this;
  FUN_00405d90();
  local_8 = 0;
  uVar2 = (int)in_stack_0000000c - (int)param_2 >> 1;
  local_20 = 1;
  uVar4 = 0;
  if (uVar2 != 0) {
    local_14 = local_14 + 1;
    uVar4 = uVar2;
    do {
      basic_string<wchar_t,struct_std::char_traits<wchar_t>,class_std::allocator<wchar_t>_>::resize
                ((basic_string<wchar_t,struct_std::char_traits<wchar_t>,class_std::allocator<wchar_t>_>
                  *)param_1,uVar4,L'\0');
      FUN_00401ba0(local_2c);
      iVar3 = FUN_00412cf0();
      iVar1 = *(int *)(param_1 + 10);
      FUN_00401ba0(local_34);
      _String1 = (wchar_t *)FUN_00412cf0();
      uVar4 = __Wcsxfrm(_String1,(wchar_t *)(iVar3 + iVar1 * 2),local_18,local_1c,local_14);
      if (uVar4 <= *(uint *)(param_1 + 10)) break;
    } while (uVar4 != 0);
  }
  basic_string<wchar_t,struct_std::char_traits<wchar_t>,class_std::allocator<wchar_t>_>::resize
            ((basic_string<wchar_t,struct_std::char_traits<wchar_t>,class_std::allocator<wchar_t>_>
              *)param_1,uVar4,L'\0');
  return param_1;
}



============================================================
DISASSEMBLY
============================================================
006276d3 : PUSH 0x24
006276d5 : MOV EAX,0xb0b861
006276da : CALL 0x00640e1d
006276df : MOV ESI,dword ptr [EBP + 0x8]
006276e2 : MOV EDI,dword ptr [EBP + 0xc]
006276e5 : MOV EBX,dword ptr [EBP + 0x10]
006276e8 : AND dword ptr [EBP + -0x1c],0x0
006276ec : MOV dword ptr [EBP + -0x10],ECX
006276ef : MOV ECX,ESI
006276f1 : MOV dword ptr [EBP + -0x20],ESI
006276f4 : MOV dword ptr [EBP + -0x14],EDI
006276f7 : MOV dword ptr [EBP + -0x18],EBX
006276fa : CALL 0x00405d90
006276ff : AND dword ptr [EBP + -0x4],0x0
00627703 : MOV EAX,EBX
00627705 : SUB EAX,EDI
00627707 : SAR EAX,0x1
00627709 : MOV dword ptr [EBP + -0x1c],0x1
00627710 : JZ 0x0062776d
00627712 : MOV ECX,dword ptr [EBP + -0x10]
00627715 : ADD ECX,0x8
00627718 : MOV dword ptr [EBP + -0x10],ECX
0062771b : PUSH 0x0
0062771d : PUSH EAX
0062771e : MOV ECX,ESI
00627720 : CALL 0x00626b74
00627725 : LEA EAX,[EBP + -0x28]
00627728 : PUSH EAX
00627729 : MOV ECX,ESI
0062772b : CALL 0x00401ba0
00627730 : MOV ECX,EAX
00627732 : CALL 0x00412cf0
00627737 : MOV EDI,dword ptr [ESI + 0x14]
0062773a : MOV EBX,EAX
0062773c : LEA EAX,[EBP + -0x30]
0062773f : PUSH EAX
00627740 : MOV ECX,ESI
00627742 : CALL 0x00401ba0
00627747 : MOV ECX,EAX
00627749 : CALL 0x00412cf0
0062774e : PUSH dword ptr [EBP + -0x10]
00627751 : LEA ECX,[EBX + EDI*0x2]
00627754 : PUSH dword ptr [EBP + -0x18]
00627757 : PUSH dword ptr [EBP + -0x14]
0062775a : PUSH ECX
0062775b : PUSH EAX
0062775c : CALL 0x00633ce6
00627761 : ADD ESP,0x14
00627764 : CMP EAX,dword ptr [ESI + 0x14]
00627767 : JBE 0x0062776d
00627769 : TEST EAX,EAX
0062776b : JA 0x0062771b
0062776d : PUSH 0x0
0062776f : PUSH EAX
00627770 : MOV ECX,ESI
00627772 : CALL 0x00626b74
00627777 : MOV EAX,ESI
00627779 : CALL 0x00640ebc
0062777e : RET 0xc
