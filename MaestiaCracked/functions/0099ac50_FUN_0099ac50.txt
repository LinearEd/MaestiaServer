PROGRAM  : Maestia.exe
FUNCTION : FUN_0099ac50
ENTRY    : 0099ac50
BODY     : [[0099ac50, 0099aed6]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099ac50(int param_1)

{
  undefined1 uVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  uint local_70;
  uint local_54;
  undefined1 local_4c [4];
  undefined2 local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  puStack_c = &LAB_00b462bd;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_18 = 7;
  local_1c = 0;
  local_2c = 0;
  local_8 = 0;
  local_14 = uVar2;
  if (*(char *)(param_1 + 8) == '\0') {
    FUN_00406460(L"IDS_FRIEND_REQUEST");
    local_8._0_1_ = 1;
    iVar3 = FUN_0081d120(local_4c);
    local_8._0_1_ = 2;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      iVar3 = iVar3 + 4;
    }
    else {
      iVar3 = *(int *)(iVar3 + 4);
    }
    uVar4 = FUN_00404750(iVar3,param_1 + 9,uVar2);
    local_8._0_1_ = 3;
    FUN_00405eb0(uVar4,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,2);
    if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,1);
    if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 0;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  else {
    FUN_00406460(L"IDS_FRIEND_REQUEST_MENTOR");
    local_8._0_1_ = 4;
    iVar3 = FUN_0081d120(local_4c);
    local_8._0_1_ = 5;
    if (*(uint *)(iVar3 + 0x18) < 8) {
      iVar3 = iVar3 + 4;
    }
    else {
      iVar3 = *(int *)(iVar3 + 4);
    }
    uVar4 = FUN_00404750(iVar3,param_1 + 9);
    local_8._0_1_ = 6;
    FUN_00405eb0(uVar4,0,0xffffffff);
    local_8 = CONCAT31(local_8._1_3_,5);
    if (7 < local_70) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8 = CONCAT31(local_8._1_3_,4);
    if (7 < local_54) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 0;
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
  }
  local_8._0_1_ = 0;
  local_34 = 7;
  local_38 = 0;
  local_48 = 0;
  iVar3 = FUN_008ede80(local_30,2);
  if (iVar3 != 0) {
    puVar5 = (undefined4 *)FUN_006f0760(8,"",0,(DAT_01725270 >> 3 & 1) == 0);
    if (puVar5 == (undefined4 *)0x0) {
      puVar5 = (undefined4 *)0x0;
    }
    else {
      uVar1 = *(undefined1 *)(param_1 + 8);
      *puVar5 = *(undefined4 *)(param_1 + 4);
      *(undefined1 *)(puVar5 + 1) = uVar1;
    }
    local_8 = (uint)local_8._1_3_ << 8;
    *(undefined4 **)(iVar3 + 0x68) = puVar5;
    *(undefined4 *)(iVar3 + 0x6c) = 0;
    *(undefined4 *)(iVar3 + 0x70) = 0;
    if (*(code **)(iVar3 + 0x60) != (code *)0x0) {
      (**(code **)(iVar3 + 0x60))(1,iVar3);
    }
    *(code **)(iVar3 + 0x60) = FUN_0099ab80;
  }
  local_8 = 0xffffffff;
  if (local_18 < 8) {
    local_2c = 0;
    local_1c = 0;
    local_18 = 7;
    ExceptionList = local_10;
    __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
    return;
  }
                    /* WARNING: Subroutine does not return */
  FUN_006f04e0();
}



============================================================
DISASSEMBLY
============================================================
0099ac50 : PUSH EBP
0099ac51 : MOV EBP,ESP
0099ac53 : PUSH -0x1
0099ac55 : PUSH 0xb462bd
0099ac5a : MOV EAX,FS:[0x0]
0099ac60 : PUSH EAX
0099ac61 : SUB ESP,0x78
0099ac64 : MOV EAX,[0x00d66fa0]
0099ac69 : XOR EAX,EBP
0099ac6b : MOV dword ptr [EBP + -0x10],EAX
0099ac6e : PUSH EBX
0099ac6f : PUSH ESI
0099ac70 : PUSH EDI
0099ac71 : PUSH EAX
0099ac72 : LEA EAX,[EBP + -0xc]
0099ac75 : MOV FS:[0x0],EAX
0099ac7b : MOV EBX,dword ptr [EBP + 0x8]
0099ac7e : XOR EAX,EAX
0099ac80 : XOR ECX,ECX
0099ac82 : MOV dword ptr [EBP + -0x14],0x7
0099ac89 : MOV dword ptr [EBP + -0x18],EAX
0099ac8c : MOV word ptr [EBP + -0x28],CX
0099ac90 : MOV dword ptr [EBP + -0x4],EAX
0099ac93 : LEA ECX,[EBP + -0x48]
0099ac96 : CMP byte ptr [EBX + 0x8],AL
0099ac99 : JNZ 0x0099ad5f
0099ac9f : PUSH 0xc87c34
0099aca4 : CALL 0x00406460
0099aca9 : MOV byte ptr [EBP + -0x4],0x1
0099acad : MOV ECX,dword ptr [0x0172491c]
0099acb3 : LEA EDX,[EBP + -0x48]
0099acb6 : PUSH EDX
0099acb7 : LEA EDI,[EBP + 0xffffff7c]
0099acbd : CALL 0x0081d120
0099acc2 : MOV byte ptr [EBP + -0x4],0x2
0099acc6 : MOV EDI,0x8
0099accb : CMP dword ptr [EAX + 0x18],EDI
0099acce : JC 0x0099acd5
0099acd0 : MOV EAX,dword ptr [EAX + 0x4]
0099acd3 : JMP 0x0099acd8
0099acd5 : ADD EAX,0x4
0099acd8 : LEA ECX,[EBX + 0x9]
0099acdb : PUSH ECX
0099acdc : PUSH EAX
0099acdd : LEA ESI,[EBP + -0x68]
0099ace0 : CALL 0x00404750
0099ace5 : ADD ESP,0x8
0099ace8 : MOV byte ptr [EBP + -0x4],0x3
0099acec : PUSH -0x1
0099acee : PUSH 0x0
0099acf0 : PUSH EAX
0099acf1 : LEA ECX,[EBP + -0x2c]
0099acf4 : CALL 0x00405eb0
0099acf9 : MOV byte ptr [EBP + -0x4],0x2
0099acfd : CMP dword ptr [EBP + -0x50],EDI
0099ad00 : JC 0x0099ad0a
0099ad02 : MOV ECX,dword ptr [EBP + -0x64]
0099ad05 : CALL 0x006f04e0
0099ad0a : MOV ESI,0x7
0099ad0f : XOR EDX,EDX
0099ad11 : MOV dword ptr [EBP + -0x50],ESI
0099ad14 : MOV dword ptr [EBP + -0x54],0x0
0099ad1b : MOV word ptr [EBP + -0x64],DX
0099ad1f : MOV byte ptr [EBP + -0x4],0x1
0099ad23 : CMP dword ptr [EBP + -0x6c],EDI
0099ad26 : JC 0x0099ad30
0099ad28 : MOV ECX,dword ptr [EBP + -0x80]
0099ad2b : CALL 0x006f04e0
0099ad30 : XOR EAX,EAX
0099ad32 : MOV dword ptr [EBP + -0x6c],ESI
0099ad35 : MOV dword ptr [EBP + -0x70],0x0
0099ad3c : MOV word ptr [EBP + -0x80],AX
0099ad40 : MOV byte ptr [EBP + -0x4],AL
0099ad43 : CMP dword ptr [EBP + -0x30],EDI
0099ad46 : JC 0x0099ad50
0099ad48 : MOV ECX,dword ptr [EBP + -0x44]
0099ad4b : CALL 0x006f04e0
0099ad50 : MOV dword ptr [EBP + -0x30],ESI
0099ad53 : MOV dword ptr [EBP + -0x34],0x0
0099ad5a : JMP 0x0099ae16
0099ad5f : PUSH 0xc87c5c
0099ad64 : CALL 0x00406460
0099ad69 : MOV byte ptr [EBP + -0x4],0x4
0099ad6d : MOV ECX,dword ptr [0x0172491c]
0099ad73 : LEA EDX,[EBP + -0x48]
0099ad76 : PUSH EDX
0099ad77 : LEA EDI,[EBP + -0x68]
0099ad7a : CALL 0x0081d120
0099ad7f : MOV byte ptr [EBP + -0x4],0x5
0099ad83 : MOV EDI,0x8
0099ad88 : CMP dword ptr [EAX + 0x18],EDI
0099ad8b : JC 0x0099ad92
0099ad8d : MOV EAX,dword ptr [EAX + 0x4]
0099ad90 : JMP 0x0099ad95
0099ad92 : ADD EAX,0x4
0099ad95 : LEA ECX,[EBX + 0x9]
0099ad98 : PUSH ECX
0099ad99 : PUSH EAX
0099ad9a : LEA ESI,[EBP + 0xffffff7c]
0099ada0 : CALL 0x00404750
0099ada5 : ADD ESP,0x8
0099ada8 : MOV byte ptr [EBP + -0x4],0x6
0099adac : PUSH -0x1
0099adae : XOR ESI,ESI
0099adb0 : PUSH ESI
0099adb1 : PUSH EAX
0099adb2 : LEA ECX,[EBP + -0x2c]
0099adb5 : CALL 0x00405eb0
0099adba : MOV byte ptr [EBP + -0x4],0x5
0099adbe : CMP dword ptr [EBP + -0x6c],EDI
0099adc1 : JC 0x0099adcb
0099adc3 : MOV ECX,dword ptr [EBP + -0x80]
0099adc6 : CALL 0x006f04e0
0099adcb : XOR EDX,EDX
0099adcd : MOV dword ptr [EBP + -0x6c],0x7
0099add4 : MOV dword ptr [EBP + -0x70],ESI
0099add7 : MOV word ptr [EBP + -0x80],DX
0099addb : MOV byte ptr [EBP + -0x4],0x4
0099addf : CMP dword ptr [EBP + -0x50],EDI
0099ade2 : JC 0x0099adec
0099ade4 : MOV ECX,dword ptr [EBP + -0x64]
0099ade7 : CALL 0x006f04e0
0099adec : XOR EAX,EAX
0099adee : MOV dword ptr [EBP + -0x50],0x7
0099adf5 : MOV dword ptr [EBP + -0x54],ESI
0099adf8 : MOV word ptr [EBP + -0x64],AX
0099adfc : MOV byte ptr [EBP + -0x4],AL
0099adff : CMP dword ptr [EBP + -0x30],EDI
0099ae02 : JC 0x0099ae0c
0099ae04 : MOV ECX,dword ptr [EBP + -0x44]
0099ae07 : CALL 0x006f04e0
0099ae0c : MOV dword ptr [EBP + -0x30],0x7
0099ae13 : MOV dword ptr [EBP + -0x34],ESI
0099ae16 : MOV EDX,dword ptr [0x00da9894]
0099ae1c : XOR ECX,ECX
0099ae1e : PUSH 0x2
0099ae20 : LEA EAX,[EBP + -0x2c]
0099ae23 : MOV word ptr [EBP + -0x44],CX
0099ae27 : MOV ECX,dword ptr [EDX]
0099ae29 : PUSH EAX
0099ae2a : CALL 0x008ede80
0099ae2f : MOV ESI,EAX
0099ae31 : TEST ESI,ESI
0099ae33 : JZ 0x0099ae95
0099ae35 : MOV EDX,dword ptr [0x01725270]
0099ae3b : SHR EDX,0x3
0099ae3e : MOV EAX,0x0
0099ae43 : AND EDX,0x1
0099ae46 : SETZ AL
0099ae49 : PUSH EAX
0099ae4a : PUSH 0x0
0099ae4c : PUSH 0xbf1a4a
0099ae51 : PUSH EDI
0099ae52 : CALL 0x006f0760
0099ae57 : ADD ESP,0x10
0099ae5a : MOV dword ptr [EBP + -0x4c],EAX
0099ae5d : MOV byte ptr [EBP + -0x4],0x7
0099ae61 : XOR EDX,EDX
0099ae63 : CMP EAX,EDX
0099ae65 : JZ 0x0099ae74
0099ae67 : MOV CL,byte ptr [EBX + 0x8]
0099ae6a : MOV EBX,dword ptr [EBX + 0x4]
0099ae6d : MOV dword ptr [EAX],EBX
0099ae6f : MOV byte ptr [EAX + 0x4],CL
0099ae72 : JMP 0x0099ae76
0099ae74 : XOR EAX,EAX
0099ae76 : MOV byte ptr [EBP + -0x4],DL
0099ae79 : MOV dword ptr [ESI + 0x68],EAX
0099ae7c : MOV EAX,dword ptr [ESI + 0x60]
0099ae7f : MOV dword ptr [ESI + 0x6c],EDX
0099ae82 : MOV dword ptr [ESI + 0x70],EDX
0099ae85 : CMP EAX,EDX
0099ae87 : JZ 0x0099ae8e
0099ae89 : PUSH ESI
0099ae8a : PUSH 0x1
0099ae8c : CALL EAX
0099ae8e : MOV dword ptr [ESI + 0x60],0x99ab80
0099ae95 : MOV dword ptr [EBP + -0x4],0xffffffff
0099ae9c : CMP dword ptr [EBP + -0x14],EDI
0099ae9f : JC 0x0099aea9
0099aea1 : MOV ECX,dword ptr [EBP + -0x28]
0099aea4 : CALL 0x006f04e0
0099aea9 : XOR ECX,ECX
0099aeab : MOV word ptr [EBP + -0x28],CX
0099aeaf : MOV dword ptr [EBP + -0x18],ECX
0099aeb2 : MOV dword ptr [EBP + -0x14],0x7
0099aeb9 : MOV ECX,dword ptr [EBP + -0xc]
0099aebc : MOV dword ptr FS:[0x0],ECX
0099aec3 : POP ECX
0099aec4 : POP EDI
0099aec5 : POP ESI
0099aec6 : POP EBX
0099aec7 : MOV ECX,dword ptr [EBP + -0x10]
0099aeca : XOR ECX,EBP
0099aecc : CALL 0x00633e6b
0099aed1 : MOV ESP,EBP
0099aed3 : POP EBP
0099aed4 : RET 0x4
