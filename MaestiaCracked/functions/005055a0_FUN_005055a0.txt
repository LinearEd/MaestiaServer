PROGRAM  : Maestia.exe
FUNCTION : FUN_005055a0
ENTRY    : 005055a0
BODY     : [[005055a0, 005057ed]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_005055a0(int param_1)

{
  undefined1 *puVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  float10 fVar6;
  float10 fVar7;
  undefined4 uVar8;
  uint uStack_4c;
  undefined **appuStack_44 [6];
  undefined1 auStack_2c [44];
  
  if ((*(int *)(param_1 + 8) == 0) ||
     (iVar3 = (**(code **)(**(int **)(param_1 + 8) + 8))(), iVar3 != 4)) {
    puVar1 = *(undefined1 **)(param_1 + 4);
    FUN_00526400();
    *puVar1 = 0;
    return;
  }
  uVar4 = 0;
  uVar5 = 0xffffffff;
  if (0 < *(int *)(param_1 + 0x1c)) {
    uVar8 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(0);
    fVar6 = (float10)FUN_00527730(uVar8);
    fVar7 = (float10)0;
    if ((fVar6 < fVar7) || (bVar2 = fVar7 <= fVar6, fVar7 = fVar6, bVar2)) {
      uStack_4c = (uint)(longlong)ROUND(fVar7);
      uVar4 = uStack_4c;
    }
  }
  if (*(int *)(param_1 + 0x1c) < 2) {
    if (0 < *(int *)(param_1 + 0x1c)) {
      uVar8 = *(undefined4 *)(param_1 + 0x18);
      FUN_00526260(0);
      fVar6 = (float10)FUN_00527730(uVar8);
      fVar6 = fVar6 + (float10)1.0;
      fVar7 = (float10)0;
      if ((fVar6 < fVar7) || (bVar2 = fVar7 <= fVar6, fVar7 = fVar6, bVar2)) {
        uStack_4c = (uint)(longlong)ROUND(fVar7);
        uVar5 = uStack_4c;
      }
    }
  }
  else {
    uVar8 = *(undefined4 *)(param_1 + 0x18);
    FUN_00526260(1);
    fVar6 = (float10)FUN_00527730(uVar8);
    fVar7 = (float10)0;
    if ((fVar6 < fVar7) || (bVar2 = fVar7 <= fVar6, fVar7 = fVar6, bVar2)) {
      uStack_4c = (uint)(longlong)ROUND(fVar7);
      uVar5 = uStack_4c;
    }
  }
  if (uVar4 <= uVar5) {
    FUN_00504200(*(undefined4 *)(*(int *)(*(int *)(param_1 + 0x18) + 0x78) + 0x288));
    FUN_00502420();
    FUN_0053e560(auStack_2c,appuStack_44,uVar4,uVar5);
    iVar3 = FUN_00515840(0x74,0);
    if (iVar3 == 0) {
      iVar3 = 0;
    }
    else {
      iVar3 = FUN_0057f1d0(*(undefined4 *)(param_1 + 0x18));
    }
    FUN_0057f610(*(int *)(param_1 + 0x18) + 0x78,auStack_2c);
    FUN_0057fa30(*(int *)(param_1 + 0x18) + 0x78,appuStack_44);
    FUN_005271c0(iVar3);
    if (iVar3 != 0) {
      FUN_00503db0();
    }
    appuStack_44[0] = &PTR_FUN_00b86064;
    FUN_0055e7c0();
    GRefCountImplCore::~GRefCountImplCore((GRefCountImplCore *)appuStack_44);
    FUN_00504260();
    return;
  }
  puVar1 = *(undefined1 **)(param_1 + 4);
  FUN_00526400();
  *puVar1 = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
005055a0 : SUB ESP,0x4c
005055a3 : PUSH ESI
005055a4 : MOV ESI,dword ptr [ESP + 0x54]
005055a8 : CMP dword ptr [ESI + 0x8],0x0
005055ac : JZ 0x005057dc
005055b2 : MOV ECX,dword ptr [ESI + 0x8]
005055b5 : MOV EAX,dword ptr [ECX]
005055b7 : MOV EDX,dword ptr [EAX + 0x8]
005055ba : CALL EDX
005055bc : CMP EAX,0x4
005055bf : JNZ 0x005057dc
005055c5 : MOV EAX,dword ptr [ESI + 0x8]
005055c8 : PUSH EBP
005055c9 : TEST EAX,EAX
005055cb : JZ 0x005055d2
005055cd : LEA EBP,[EAX + -0x68]
005055d0 : JMP 0x005055d4
005055d2 : XOR EBP,EBP
005055d4 : PUSH EBX
005055d5 : PUSH EDI
005055d6 : XOR EBX,EBX
005055d8 : OR EDI,0xffffffff
005055db : CMP dword ptr [ESI + 0x1c],0x1
005055df : JL 0x00505636
005055e1 : MOV EAX,dword ptr [ESI + 0x18]
005055e4 : PUSH EAX
005055e5 : PUSH EBX
005055e6 : MOV ECX,ESI
005055e8 : CALL 0x00526260
005055ed : MOV ECX,EAX
005055ef : CALL 0x00527730
005055f4 : FLDZ
005055f6 : FCOM
005055f8 : FNSTSW AX
005055fa : TEST AH,0x41
005055fd : JNZ 0x00505603
005055ff : FSTP ST1
00505601 : JMP 0x00505610
00505603 : FLD ST1
00505605 : FXCH ST2
00505607 : FCOMPP
00505609 : FNSTSW AX
0050560b : TEST AH,0x1
0050560e : JNZ 0x00505634
00505610 : FNSTCW word ptr [ESP + 0x60]
00505614 : MOVZX EAX,word ptr [ESP + 0x60]
00505619 : OR EAX,0xc00
0050561e : MOV dword ptr [ESP + 0x10],EAX
00505622 : FLDCW word ptr [ESP + 0x10]
00505626 : FISTP qword ptr [ESP + 0x10]
0050562a : MOV EBX,dword ptr [ESP + 0x10]
0050562e : FLDCW word ptr [ESP + 0x60]
00505632 : JMP 0x00505636
00505634 : FSTP ST0
00505636 : MOV EAX,dword ptr [ESI + 0x1c]
00505639 : CMP EAX,0x2
0050563c : JL 0x00505696
0050563e : MOV ECX,dword ptr [ESI + 0x18]
00505641 : PUSH ECX
00505642 : PUSH 0x1
00505644 : MOV ECX,ESI
00505646 : CALL 0x00526260
0050564b : MOV ECX,EAX
0050564d : CALL 0x00527730
00505652 : FLDZ
00505654 : FCOM
00505656 : FNSTSW AX
00505658 : TEST AH,0x41
0050565b : JNZ 0x00505661
0050565d : FSTP ST1
0050565f : JMP 0x00505672
00505661 : FLD ST1
00505663 : FXCH ST2
00505665 : FCOMPP
00505667 : FNSTSW AX
00505669 : TEST AH,0x1
0050566c : JNZ 0x005056f5
00505672 : FNSTCW word ptr [ESP + 0x60]
00505676 : MOVZX EAX,word ptr [ESP + 0x60]
0050567b : OR EAX,0xc00
00505680 : MOV dword ptr [ESP + 0x10],EAX
00505684 : FLDCW word ptr [ESP + 0x10]
00505688 : FISTP qword ptr [ESP + 0x10]
0050568c : MOV EDI,dword ptr [ESP + 0x10]
00505690 : FLDCW word ptr [ESP + 0x60]
00505694 : JMP 0x005056f7
00505696 : CMP EAX,0x1
00505699 : JL 0x005056f7
0050569b : MOV EDX,dword ptr [ESI + 0x18]
0050569e : PUSH EDX
0050569f : PUSH 0x0
005056a1 : MOV ECX,ESI
005056a3 : CALL 0x00526260
005056a8 : MOV ECX,EAX
005056aa : CALL 0x00527730
005056af : FADD double ptr [0x00cdf108]
005056b5 : FLDZ
005056b7 : FCOM
005056b9 : FNSTSW AX
005056bb : TEST AH,0x41
005056be : JNZ 0x005056c4
005056c0 : FSTP ST1
005056c2 : JMP 0x005056d1
005056c4 : FLD ST1
005056c6 : FXCH ST2
005056c8 : FCOMPP
005056ca : FNSTSW AX
005056cc : TEST AH,0x1
005056cf : JNZ 0x005056f5
005056d1 : FNSTCW word ptr [ESP + 0x60]
005056d5 : MOVZX EAX,word ptr [ESP + 0x60]
005056da : OR EAX,0xc00
005056df : MOV dword ptr [ESP + 0x10],EAX
005056e3 : FLDCW word ptr [ESP + 0x10]
005056e7 : FISTP qword ptr [ESP + 0x10]
005056eb : MOV EDI,dword ptr [ESP + 0x10]
005056ef : FLDCW word ptr [ESP + 0x60]
005056f3 : JMP 0x005056f7
005056f5 : FSTP ST0
005056f7 : CMP EBX,EDI
005056f9 : JA 0x005057c7
005056ff : MOV EAX,dword ptr [ESI + 0x18]
00505702 : MOV ECX,dword ptr [EAX + 0x78]
00505705 : MOV EDX,dword ptr [ECX + 0x288]
0050570b : PUSH EDX
0050570c : LEA ECX,[ESP + 0x34]
00505710 : CALL 0x00504200
00505715 : LEA ECX,[ESP + 0x18]
00505719 : CALL 0x00502420
0050571e : MOV EDX,dword ptr [EBP + 0xa0]
00505724 : PUSH EDI
00505725 : PUSH EBX
00505726 : LEA EAX,[ESP + 0x20]
0050572a : PUSH EAX
0050572b : LEA ECX,[ESP + 0x3c]
0050572f : PUSH ECX
00505730 : MOV ECX,dword ptr [EDX + 0xc]
00505733 : CALL 0x0053e560
00505738 : MOV EAX,dword ptr [ESI + 0x18]
0050573b : MOV ECX,dword ptr [EAX + 0x78]
0050573e : MOV ECX,dword ptr [ECX + 0x288]
00505744 : PUSH 0x0
00505746 : PUSH 0x74
00505748 : CALL 0x00515840
0050574d : TEST EAX,EAX
0050574f : JZ 0x00505760
00505751 : MOV EDX,dword ptr [ESI + 0x18]
00505754 : PUSH EDX
00505755 : MOV ECX,EAX
00505757 : CALL 0x0057f1d0
0050575c : MOV EDI,EAX
0050575e : JMP 0x00505762
00505760 : XOR EDI,EDI
00505762 : MOV ECX,dword ptr [ESI + 0x18]
00505765 : LEA EAX,[ESP + 0x30]
00505769 : ADD ECX,0x78
0050576c : PUSH EAX
0050576d : PUSH ECX
0050576e : MOV ECX,EDI
00505770 : CALL 0x0057f610
00505775 : MOV EAX,dword ptr [ESI + 0x18]
00505778 : LEA EDX,[ESP + 0x18]
0050577c : PUSH EDX
0050577d : ADD EAX,0x78
00505780 : PUSH EAX
00505781 : MOV ECX,EDI
00505783 : CALL 0x0057fa30
00505788 : MOV ECX,dword ptr [ESI + 0x4]
0050578b : PUSH EDI
0050578c : CALL 0x005271c0
00505791 : TEST EDI,EDI
00505793 : JZ 0x0050579c
00505795 : MOV ECX,EDI
00505797 : CALL 0x00503db0
0050579c : LEA ECX,[ESP + 0x18]
005057a0 : MOV dword ptr [ESP + 0x18],0xb86064
005057a8 : CALL 0x0055e7c0
005057ad : LEA ECX,[ESP + 0x18]
005057b1 : CALL 0x004ff7b0
005057b6 : LEA ECX,[ESP + 0x30]
005057ba : CALL 0x00504260
005057bf : POP EDI
005057c0 : POP EBX
005057c1 : POP EBP
005057c2 : POP ESI
005057c3 : ADD ESP,0x4c
005057c6 : RET
005057c7 : MOV ESI,dword ptr [ESI + 0x4]
005057ca : MOV ECX,ESI
005057cc : CALL 0x00526400
005057d1 : POP EDI
005057d2 : POP EBX
005057d3 : POP EBP
005057d4 : MOV byte ptr [ESI],0x0
005057d7 : POP ESI
005057d8 : ADD ESP,0x4c
005057db : RET
005057dc : MOV ESI,dword ptr [ESI + 0x4]
005057df : MOV ECX,ESI
005057e1 : CALL 0x00526400
005057e6 : MOV byte ptr [ESI],0x0
005057e9 : POP ESI
005057ea : ADD ESP,0x4c
005057ed : RET
