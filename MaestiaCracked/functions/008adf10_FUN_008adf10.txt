PROGRAM  : Maestia.exe
FUNCTION : FUN_008adf10
ENTRY    : 008adf10
BODY     : [[008adf10, 008ae2be]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008adf10(void)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  wchar_t *pwVar6;
  int iVar7;
  undefined4 *puVar8;
  bool bVar9;
  uint local_c8;
  uint local_a8;
  undefined1 local_a4 [4];
  undefined2 local_a0;
  undefined4 local_90;
  uint local_8c;
  uint local_88;
  undefined1 local_84 [4];
  undefined2 local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [4];
  undefined2 local_64;
  undefined4 local_54;
  uint local_50;
  undefined4 local_48;
  undefined4 local_38;
  uint local_34;
  undefined2 local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b4a010;
  local_10 = ExceptionList;
  uVar3 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  local_88 = 0;
  local_2c = 0;
  local_18 = 7;
  local_1c = 0;
  local_14 = uVar3;
  FUN_00405eb0(*(int *)(DAT_0172491c + 0x17c) + 0xc,0,0xffffffff);
  local_8 = 0;
  iVar4 = FUN_00a6f7d0(uVar3);
  iVar7 = *DAT_00da9894;
  iVar1 = *(int *)(*(int *)(iVar7 + 0x188) + 8);
  if (iVar1 == 0) {
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
  }
  else {
    if ((int)DAT_00d7cd6c < 2) {
      pwVar6 = L"IDS_GUILD_PUT_GOLDDP";
    }
    else {
      if ((*(uint *)(iVar1 + 0x54 + iVar4 * 4) & 0x800) == 0) {
        if (((DAT_0172491c != 0) && (iVar7 != 0)) && (*(int *)(iVar7 + 0x1a8) != 0)) {
          FUN_00406460(L"IDS_NOT_AUTHORITY");
          local_8._0_1_ = 1;
          piVar2 = *(int **)(*DAT_00da9894 + 0x1a8);
          uVar5 = FUN_0081d120(local_a4);
          local_8._0_1_ = 2;
          (**(code **)(*piVar2 + 0x44))(uVar5,3);
          local_8._0_1_ = 1;
          FUN_00406560();
          local_8 = (uint)local_8._1_3_ << 8;
          FUN_00406560();
        }
        local_8 = 0xffffffff;
        FUN_00406560();
        goto LAB_008ae2a3;
      }
      pwVar6 = L"IDS_GUILD_GET_GOLDDP";
    }
    FUN_00406460(pwVar6);
    local_8._0_1_ = 3;
    uVar3 = DAT_00d7cd6c & 0x80000001;
    bVar9 = uVar3 == 0;
    if ((int)uVar3 < 0) {
      bVar9 = (uVar3 - 1 | 0xfffffffe) == 0xffffffff;
    }
    if (bVar9) {
      uVar5 = FUN_0081cbe0(DAT_0172491c);
      local_8 = CONCAT31(local_8._1_3_,4);
      uVar3 = 1;
    }
    else {
      uVar5 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 5;
      uVar3 = 2;
    }
    local_48 = (undefined4 *)((uint)local_48._2_2_ << 0x10);
    local_34 = 7;
    local_38 = 0;
    local_88 = uVar3;
    FUN_00405eb0(uVar5,0,0xffffffff);
    local_8 = 7;
    if (((uVar3 & 2) != 0) && (uVar3 = uVar3 & 0xfffffffd, local_88 = uVar3, 7 < local_c8)) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_8._0_1_ = 8;
    local_8._1_3_ = 0;
    if (((uVar3 & 1) != 0) && (local_88 = uVar3 & 0xfffffffe, 7 < local_a8)) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    iVar7 = FUN_0081d120(local_84);
    local_8._0_1_ = 9;
    puVar8 = local_48;
    if (local_34 < 8) {
      puVar8 = &local_48;
    }
    if (*(uint *)(iVar7 + 0x18) < 8) {
      iVar7 = iVar7 + 4;
    }
    else {
      iVar7 = *(int *)(iVar7 + 4);
    }
    FUN_00404750(iVar7,puVar8);
    local_8 = CONCAT31(local_8._1_3_,0xb);
    if (7 < local_8c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_a0 = 0;
    local_8c = 7;
    local_90 = 0;
    iVar7 = FUN_008edae0(local_68,10,0,1);
    if (iVar7 != 0) {
      if ((*(int *)(iVar7 + 100) != 0) && (*(code **)(iVar7 + 0x60) != (code *)0x0)) {
        (**(code **)(iVar7 + 0x60))(1,iVar7);
      }
      *(code **)(iVar7 + 100) = FUN_008ad690;
    }
    local_8 = CONCAT31(local_8._1_3_,8);
    if (7 < local_50) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_50 = 7;
    local_54 = 0;
    local_64 = 0;
    local_8 = CONCAT31(local_8._1_3_,3);
    if (7 < local_34) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_34 = 7;
    local_38 = 0;
    local_48 = (undefined4 *)((uint)local_48 & 0xffff0000);
    local_8 = (uint)local_8._1_3_ << 8;
    if (7 < local_6c) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_6c = 7;
    local_70 = 0;
    local_80 = 0;
    local_8 = 0xffffffff;
    if (7 < local_18) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_18 = 7;
    local_1c = 0;
    local_2c = 0;
  }
LAB_008ae2a3:
  ExceptionList = local_10;
  __security_check_cookie(local_14 ^ (uint)&stack0xfffffffc);
  return;
}



============================================================
DISASSEMBLY
============================================================
008adf10 : PUSH EBP
008adf11 : MOV EBP,ESP
008adf13 : PUSH -0x1
008adf15 : PUSH 0xb4a010
008adf1a : MOV EAX,FS:[0x0]
008adf20 : PUSH EAX
008adf21 : SUB ESP,0xd4
008adf27 : MOV EAX,[0x00d66fa0]
008adf2c : XOR EAX,EBP
008adf2e : MOV dword ptr [EBP + -0x10],EAX
008adf31 : PUSH EBX
008adf32 : PUSH ESI
008adf33 : PUSH EDI
008adf34 : PUSH EAX
008adf35 : LEA EAX,[EBP + -0xc]
008adf38 : MOV FS:[0x0],EAX
008adf3e : XOR EBX,EBX
008adf40 : MOV dword ptr [EBP + 0xffffff7c],EBX
008adf46 : MOV EAX,[0x0172491c]
008adf4b : MOV EAX,dword ptr [EAX + 0x17c]
008adf51 : PUSH -0x1
008adf53 : XOR ECX,ECX
008adf55 : ADD EAX,0xc
008adf58 : PUSH EBX
008adf59 : MOV word ptr [EBP + -0x28],CX
008adf5d : PUSH EAX
008adf5e : LEA ECX,[EBP + -0x2c]
008adf61 : MOV dword ptr [EBP + -0x14],0x7
008adf68 : MOV dword ptr [EBP + -0x18],EBX
008adf6b : CALL 0x00405eb0
008adf70 : MOV dword ptr [EBP + -0x4],EBX
008adf73 : MOV EDX,dword ptr [0x00da9894]
008adf79 : MOV EAX,dword ptr [EDX]
008adf7b : MOV EAX,dword ptr [EAX + 0x188]
008adf81 : LEA EDI,[EBP + -0x2c]
008adf84 : MOV ESI,EAX
008adf86 : CALL 0x00a6f7d0
008adf8b : MOV ECX,dword ptr [0x00da9894]
008adf91 : MOV ECX,dword ptr [ECX]
008adf93 : MOV EDX,dword ptr [ECX + 0x188]
008adf99 : MOV EDX,dword ptr [EDX + 0x8]
008adf9c : CMP EDX,EBX
008adf9e : JNZ 0x008adfca
008adfa0 : MOV dword ptr [EBP + -0x4],0xffffffff
008adfa7 : CMP dword ptr [EBP + -0x14],0x8
008adfab : JC 0x008adfb5
008adfad : MOV ECX,dword ptr [EBP + -0x28]
008adfb0 : CALL 0x006f04e0
008adfb5 : XOR EDX,EDX
008adfb7 : MOV dword ptr [EBP + -0x14],0x7
008adfbe : MOV dword ptr [EBP + -0x18],EBX
008adfc1 : MOV word ptr [EBP + -0x28],DX
008adfc5 : JMP 0x008ae2a3
008adfca : CMP dword ptr [0x00d7cd6c],0x2
008adfd1 : JL 0x008ae072
008adfd7 : MOV EDX,dword ptr [EDX + EAX*0x4 + 0x54]
008adfdb : AND EDX,0x800
008adfe1 : JNZ 0x008ae079
008adfe7 : CMP dword ptr [0x0172491c],EBX
008adfed : JZ 0x008ae05e
008adfef : CMP ECX,EBX
008adff1 : JZ 0x008ae05e
008adff3 : CMP dword ptr [ECX + 0x1a8],EBX
008adff9 : JZ 0x008ae05e
008adffb : PUSH 0xc4b8a8
008ae000 : LEA ECX,[EBP + 0xffffff60]
008ae006 : CALL 0x00406460
008ae00b : MOV byte ptr [EBP + -0x4],0x1
008ae00f : MOV EAX,[0x00da9894]
008ae014 : MOV EAX,dword ptr [EAX]
008ae016 : MOV ESI,dword ptr [EAX + 0x1a8]
008ae01c : LEA ECX,[EBP + 0xffffff60]
008ae022 : PUSH ECX
008ae023 : MOV ECX,dword ptr [0x0172491c]
008ae029 : LEA EDI,[EBP + 0xffffff44]
008ae02f : CALL 0x0081d120
008ae034 : MOV byte ptr [EBP + -0x4],0x2
008ae038 : MOV EDX,dword ptr [ESI]
008ae03a : PUSH 0x3
008ae03c : PUSH EAX
008ae03d : MOV EAX,dword ptr [EDX + 0x44]
008ae040 : MOV ECX,ESI
008ae042 : CALL EAX
008ae044 : MOV byte ptr [EBP + -0x4],0x1
008ae048 : MOV ECX,EDI
008ae04a : CALL 0x00406560
008ae04f : MOV byte ptr [EBP + -0x4],0x0
008ae053 : LEA ECX,[EBP + 0xffffff60]
008ae059 : CALL 0x00406560
008ae05e : MOV dword ptr [EBP + -0x4],0xffffffff
008ae065 : LEA ECX,[EBP + -0x2c]
008ae068 : CALL 0x00406560
008ae06d : JMP 0x008ae2a3
008ae072 : MOV EAX,0xc4b8cc
008ae077 : JMP 0x008ae07e
008ae079 : MOV EAX,0xc4b8f8
008ae07e : PUSH EAX
008ae07f : LEA ECX,[EBP + -0x80]
008ae082 : CALL 0x00406460
008ae087 : MOV byte ptr [EBP + -0x4],0x3
008ae08b : MOV ECX,dword ptr [0x00d7cd6c]
008ae091 : AND ECX,0x80000001
008ae097 : JNS 0x008ae09e
008ae099 : DEC ECX
008ae09a : OR ECX,0xfffffffe
008ae09d : INC ECX
008ae09e : JNZ 0x008ae0c2
008ae0a0 : MOV EDX,dword ptr [0x0172491c]
008ae0a6 : PUSH EDX
008ae0a7 : MOV ECX,0xc4b924
008ae0ac : LEA ESI,[EBP + 0xffffff44]
008ae0b2 : CALL 0x0081cbe0
008ae0b7 : MOV byte ptr [EBP + -0x4],0x4
008ae0bb : MOV EBX,0x1
008ae0c0 : JMP 0x008ae0e4
008ae0c2 : MOV EAX,[0x0172491c]
008ae0c7 : PUSH EAX
008ae0c8 : MOV ECX,0xc4b92c
008ae0cd : LEA ESI,[EBP + 0xffffff24]
008ae0d3 : CALL 0x0081cbe0
008ae0d8 : MOV dword ptr [EBP + -0x4],0x5
008ae0df : MOV EBX,0x2
008ae0e4 : PUSH -0x1
008ae0e6 : MOV dword ptr [EBP + 0xffffff7c],EBX
008ae0ec : XOR ESI,ESI
008ae0ee : XOR ECX,ECX
008ae0f0 : PUSH ESI
008ae0f1 : MOV word ptr [EBP + -0x44],CX
008ae0f5 : MOV EDI,0x7
008ae0fa : PUSH EAX
008ae0fb : LEA ECX,[EBP + -0x48]
008ae0fe : MOV dword ptr [EBP + -0x30],EDI
008ae101 : MOV dword ptr [EBP + -0x34],ESI
008ae104 : CALL 0x00405eb0
008ae109 : MOV dword ptr [EBP + -0x4],EDI
008ae10c : TEST BL,0x2
008ae10f : JZ 0x008ae143
008ae111 : AND EBX,0xfffffffd
008ae114 : MOV dword ptr [EBP + 0xffffff7c],EBX
008ae11a : CMP dword ptr [EBP + 0xffffff3c],0x8
008ae121 : JC 0x008ae12e
008ae123 : MOV ECX,dword ptr [EBP + 0xffffff28]
008ae129 : CALL 0x006f04e0
008ae12e : XOR EDX,EDX
008ae130 : MOV dword ptr [EBP + 0xffffff3c],EDI
008ae136 : MOV dword ptr [EBP + 0xffffff38],ESI
008ae13c : MOV word ptr [EBP + 0xffffff28],DX
008ae143 : MOV byte ptr [EBP + -0x4],0x8
008ae147 : TEST BL,0x1
008ae14a : JZ 0x008ae17e
008ae14c : AND EBX,0xfffffffe
008ae14f : MOV dword ptr [EBP + 0xffffff7c],EBX
008ae155 : CMP dword ptr [EBP + 0xffffff5c],0x8
008ae15c : JC 0x008ae169
008ae15e : MOV ECX,dword ptr [EBP + 0xffffff48]
008ae164 : CALL 0x006f04e0
008ae169 : XOR EAX,EAX
008ae16b : MOV dword ptr [EBP + 0xffffff5c],EDI
008ae171 : MOV dword ptr [EBP + 0xffffff58],ESI
008ae177 : MOV word ptr [EBP + 0xffffff48],AX
008ae17e : LEA ECX,[EBP + -0x80]
008ae181 : PUSH ECX
008ae182 : MOV ECX,dword ptr [0x0172491c]
008ae188 : LEA EDI,[EBP + 0xffffff60]
008ae18e : CALL 0x0081d120
008ae193 : MOV byte ptr [EBP + -0x4],0x9
008ae197 : MOV ECX,dword ptr [EBP + -0x44]
008ae19a : MOV EDX,0x8
008ae19f : CMP dword ptr [EBP + -0x30],EDX
008ae1a2 : JNC 0x008ae1a7
008ae1a4 : LEA ECX,[EBP + -0x44]
008ae1a7 : CMP dword ptr [EAX + 0x18],EDX
008ae1aa : JC 0x008ae1b1
008ae1ac : MOV EAX,dword ptr [EAX + 0x4]
008ae1af : JMP 0x008ae1b4
008ae1b1 : ADD EAX,0x4
008ae1b4 : PUSH ECX
008ae1b5 : PUSH EAX
008ae1b6 : LEA ESI,[EBP + -0x64]
008ae1b9 : CALL 0x00404750
008ae1be : ADD ESP,0x8
008ae1c1 : MOV byte ptr [EBP + -0x4],0xb
008ae1c5 : CMP dword ptr [EBP + 0xffffff78],0x8
008ae1cc : JC 0x008ae1d9
008ae1ce : MOV ECX,dword ptr [EBP + 0xffffff64]
008ae1d4 : CALL 0x006f04e0
008ae1d9 : MOV EAX,[0x00da9894]
008ae1de : PUSH 0x1
008ae1e0 : XOR EDI,EDI
008ae1e2 : XOR EDX,EDX
008ae1e4 : PUSH EDI
008ae1e5 : MOV word ptr [EBP + 0xffffff64],DX
008ae1ec : MOV EBX,0x7
008ae1f1 : PUSH 0xa
008ae1f3 : LEA EDX,[EBP + -0x64]
008ae1f6 : MOV dword ptr [EBP + 0xffffff78],EBX
008ae1fc : MOV dword ptr [EBP + 0xffffff74],EDI
008ae202 : MOV ECX,dword ptr [EAX]
008ae204 : PUSH EDX
008ae205 : CALL 0x008edae0
008ae20a : MOV ESI,EAX
008ae20c : CMP ESI,EDI
008ae20e : JZ 0x008ae228
008ae210 : CMP dword ptr [ESI + 0x64],EDI
008ae213 : JZ 0x008ae221
008ae215 : MOV EAX,dword ptr [ESI + 0x60]
008ae218 : CMP EAX,EDI
008ae21a : JZ 0x008ae221
008ae21c : PUSH ESI
008ae21d : PUSH 0x1
008ae21f : CALL EAX
008ae221 : MOV dword ptr [ESI + 0x64],0x8ad690
008ae228 : MOV byte ptr [EBP + -0x4],0x8
008ae22c : MOV ESI,0x8
008ae231 : CMP dword ptr [EBP + -0x4c],ESI
008ae234 : JC 0x008ae23e
008ae236 : MOV ECX,dword ptr [EBP + -0x60]
008ae239 : CALL 0x006f04e0
008ae23e : XOR EAX,EAX
008ae240 : MOV dword ptr [EBP + -0x4c],EBX
008ae243 : MOV dword ptr [EBP + -0x50],EDI
008ae246 : MOV word ptr [EBP + -0x60],AX
008ae24a : MOV byte ptr [EBP + -0x4],0x3
008ae24e : CMP dword ptr [EBP + -0x30],ESI
008ae251 : JC 0x008ae25b
008ae253 : MOV ECX,dword ptr [EBP + -0x44]
008ae256 : CALL 0x006f04e0
008ae25b : XOR ECX,ECX
008ae25d : MOV dword ptr [EBP + -0x30],EBX
008ae260 : MOV dword ptr [EBP + -0x34],EDI
008ae263 : MOV word ptr [EBP + -0x44],CX
008ae267 : MOV byte ptr [EBP + -0x4],CL
008ae26a : CMP dword ptr [EBP + -0x68],ESI
008ae26d : JC 0x008ae277
008ae26f : MOV ECX,dword ptr [EBP + -0x7c]
008ae272 : CALL 0x006f04e0
008ae277 : XOR EDX,EDX
008ae279 : MOV dword ptr [EBP + -0x68],EBX
008ae27c : MOV dword ptr [EBP + -0x6c],EDI
008ae27f : MOV word ptr [EBP + -0x7c],DX
008ae283 : MOV dword ptr [EBP + -0x4],0xffffffff
008ae28a : CMP dword ptr [EBP + -0x14],ESI
008ae28d : JC 0x008ae297
008ae28f : MOV ECX,dword ptr [EBP + -0x28]
008ae292 : CALL 0x006f04e0
008ae297 : XOR EAX,EAX
008ae299 : MOV dword ptr [EBP + -0x14],EBX
008ae29c : MOV dword ptr [EBP + -0x18],EDI
008ae29f : MOV word ptr [EBP + -0x28],AX
008ae2a3 : MOV ECX,dword ptr [EBP + -0xc]
008ae2a6 : MOV dword ptr FS:[0x0],ECX
008ae2ad : POP ECX
008ae2ae : POP EDI
008ae2af : POP ESI
008ae2b0 : POP EBX
008ae2b1 : MOV ECX,dword ptr [EBP + -0x10]
008ae2b4 : XOR ECX,EBP
008ae2b6 : CALL 0x00633e6b
008ae2bb : MOV ESP,EBP
008ae2bd : POP EBP
008ae2be : RET
