PROGRAM  : Maestia.exe
FUNCTION : FUN_006e1b60
ENTRY    : 006e1b60
BODY     : [[006e1b60, 006e1d21]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_006e1b60(int param_1,int param_2,int param_3)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int in_EAX;
  uint uVar5;
  int iVar6;
  int iVar7;
  int in_ECX;
  uint uVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int local_428;
  int local_424;
  int aiStack_400 [256];
  
  iVar1 = *(int *)(in_EAX + 0x70);
  iVar7 = in_ECX + 0x1c;
  local_424 = 0x7fffffff;
  local_428 = 0;
  if (iVar1 < 1) {
    local_424 = 0x7fffffff;
  }
  else {
    piVar2 = *(int **)(in_EAX + 0x74);
    iVar11 = *piVar2;
    iVar3 = piVar2[1];
    iVar4 = piVar2[2];
    do {
      uVar5 = (uint)*(byte *)(iVar11 + local_428);
      if ((int)uVar5 < param_1) {
        iVar12 = (uVar5 - param_1) * 2;
        iVar12 = iVar12 * iVar12;
        iVar9 = param_1 + 0x18;
LAB_006e1bec:
        iVar6 = iVar9;
      }
      else {
        iVar6 = param_1 + 0x18;
        iVar9 = param_1;
        if (iVar6 < (int)uVar5) {
          iVar12 = (uVar5 - iVar6) * 2;
          iVar12 = iVar12 * iVar12;
          goto LAB_006e1bec;
        }
        iVar12 = 0;
        if (param_1 * 2 + 0x18 >> 1 < (int)uVar5) goto LAB_006e1bec;
      }
      uVar8 = (uint)*(byte *)(iVar3 + local_428);
      iVar6 = (uVar5 - iVar6) * 2;
      if ((int)uVar8 < in_ECX) {
        iVar9 = (uVar8 - in_ECX) * 3;
        iVar12 = iVar12 + iVar9 * iVar9;
        iVar9 = uVar8 - iVar7;
      }
      else {
        if (iVar7 < (int)uVar8) {
          iVar9 = (uVar8 - iVar7) * 3;
          iVar12 = iVar12 + iVar9 * iVar9;
        }
        else if ((int)uVar8 <= iVar7 + in_ECX >> 1) {
          iVar9 = uVar8 - iVar7;
          goto LAB_006e1c55;
        }
        iVar9 = uVar8 - in_ECX;
      }
LAB_006e1c55:
      uVar5 = (uint)*(byte *)(iVar4 + local_428);
      if ((int)uVar5 < param_2) {
        iVar12 = iVar12 + (uVar5 - param_2) * (uVar5 - param_2);
        iVar10 = uVar5 - (param_2 + 0x18);
      }
      else {
        iVar10 = param_2 + 0x18;
        if (iVar10 < (int)uVar5) {
          iVar12 = iVar12 + (uVar5 - iVar10) * (uVar5 - iVar10);
        }
        else if ((int)uVar5 <= param_2 * 2 + 0x18 >> 1) {
          iVar10 = uVar5 - iVar10;
          goto LAB_006e1cb3;
        }
        iVar10 = uVar5 - param_2;
      }
LAB_006e1cb3:
      iVar6 = iVar6 * iVar6 + iVar9 * 3 * iVar9 * 3 + iVar10 * iVar10;
      aiStack_400[local_428] = iVar12;
      if (iVar6 < local_424) {
        local_424 = iVar6;
      }
      local_428 = local_428 + 1;
    } while (local_428 < iVar1);
  }
  iVar7 = 0;
  iVar11 = 0;
  if (0 < iVar1) {
    do {
      if (aiStack_400[iVar11] <= local_424) {
        *(char *)(iVar7 + param_3) = (char)iVar11;
        iVar7 = iVar7 + 1;
      }
      iVar11 = iVar11 + 1;
    } while (iVar11 < iVar1);
  }
  return;
}



============================================================
DISASSEMBLY
============================================================
006e1b60 : SUB ESP,0x428
006e1b66 : PUSH EBX
006e1b67 : PUSH EBP
006e1b68 : MOV EBP,dword ptr [ESP + 0x438]
006e1b6f : PUSH ESI
006e1b70 : MOV ESI,dword ptr [EAX + 0x70]
006e1b73 : PUSH EDI
006e1b74 : MOV EDI,ECX
006e1b76 : MOV ECX,dword ptr [ESP + 0x43c]
006e1b7d : LEA EDX,[ECX + ECX*0x1 + 0x18]
006e1b81 : SAR EDX,0x1
006e1b83 : MOV dword ptr [ESP + 0x2c],EDX
006e1b87 : LEA EBX,[EDI + 0x1c]
006e1b8a : LEA EDX,[EBX + EDI*0x1]
006e1b8d : SAR EDX,0x1
006e1b8f : MOV dword ptr [ESP + 0x18],EDX
006e1b93 : LEA EDX,[EBP + EBP*0x1 + 0x18]
006e1b97 : SAR EDX,0x1
006e1b99 : MOV dword ptr [ESP + 0x30],ESI
006e1b9d : MOV dword ptr [ESP + 0x28],EDX
006e1ba1 : MOV dword ptr [ESP + 0x14],0x7fffffff
006e1ba9 : MOV dword ptr [ESP + 0x10],0x0
006e1bb1 : TEST ESI,ESI
006e1bb3 : JLE 0x006e1cf5
006e1bb9 : MOV EAX,dword ptr [EAX + 0x74]
006e1bbc : MOV EDX,dword ptr [EAX]
006e1bbe : MOV dword ptr [ESP + 0x34],EDX
006e1bc2 : MOV EDX,dword ptr [EAX + 0x4]
006e1bc5 : MOV EAX,dword ptr [EAX + 0x8]
006e1bc8 : MOV dword ptr [ESP + 0x24],EDX
006e1bcc : MOV dword ptr [ESP + 0x1c],EAX
006e1bd0 : MOV EDX,dword ptr [ESP + 0x34]
006e1bd4 : MOV EAX,dword ptr [ESP + 0x10]
006e1bd8 : MOVZX EAX,byte ptr [EDX + EAX*0x1]
006e1bdc : CMP EAX,ECX
006e1bde : JGE 0x006e1c1c
006e1be0 : MOV EDX,EAX
006e1be2 : SUB EDX,ECX
006e1be4 : ADD EDX,EDX
006e1be6 : IMUL EDX,EDX
006e1be9 : ADD ECX,0x18
006e1bec : SUB EAX,ECX
006e1bee : MOV ECX,dword ptr [ESP + 0x10]
006e1bf2 : MOV ESI,dword ptr [ESP + 0x24]
006e1bf6 : MOVZX ECX,byte ptr [ESI + ECX*0x1]
006e1bfa : ADD EAX,EAX
006e1bfc : IMUL EAX,EAX
006e1bff : CMP ECX,EDI
006e1c01 : JGE 0x006e1c3a
006e1c03 : MOV ESI,ECX
006e1c05 : SUB ESI,EDI
006e1c07 : LEA ESI,[ESI + ESI*0x2]
006e1c0a : MOV EBP,ESI
006e1c0c : IMUL EBP,ESI
006e1c0f : ADD EDX,EBP
006e1c11 : MOV EBP,dword ptr [ESP + 0x440]
006e1c18 : SUB ECX,EBX
006e1c1a : JMP 0x006e1c55
006e1c1c : LEA ESI,[ECX + 0x18]
006e1c1f : CMP EAX,ESI
006e1c21 : JLE 0x006e1c2e
006e1c23 : MOV EDX,EAX
006e1c25 : SUB EDX,ESI
006e1c27 : ADD EDX,EDX
006e1c29 : IMUL EDX,EDX
006e1c2c : JMP 0x006e1bec
006e1c2e : XOR EDX,EDX
006e1c30 : CMP EAX,dword ptr [ESP + 0x2c]
006e1c34 : JG 0x006e1bec
006e1c36 : SUB EAX,ESI
006e1c38 : JMP 0x006e1bee
006e1c3a : CMP ECX,EBX
006e1c3c : JLE 0x006e1c88
006e1c3e : MOV ESI,ECX
006e1c40 : SUB ESI,EBX
006e1c42 : LEA ESI,[ESI + ESI*0x2]
006e1c45 : MOV EBP,ESI
006e1c47 : IMUL EBP,ESI
006e1c4a : ADD EDX,EBP
006e1c4c : MOV EBP,dword ptr [ESP + 0x440]
006e1c53 : SUB ECX,EDI
006e1c55 : LEA ECX,[ECX + ECX*0x2]
006e1c58 : MOV ESI,ECX
006e1c5a : IMUL ESI,ECX
006e1c5d : MOV ECX,dword ptr [ESP + 0x1c]
006e1c61 : ADD EAX,ESI
006e1c63 : MOV ESI,dword ptr [ESP + 0x10]
006e1c67 : MOVZX ECX,byte ptr [ECX + ESI*0x1]
006e1c6b : CMP ECX,EBP
006e1c6d : JGE 0x006e1c92
006e1c6f : MOV ESI,ECX
006e1c71 : SUB ESI,EBP
006e1c73 : MOV EBP,ESI
006e1c75 : IMUL EBP,ESI
006e1c78 : ADD EDX,EBP
006e1c7a : MOV EBP,dword ptr [ESP + 0x440]
006e1c81 : LEA ESI,[EBP + 0x18]
006e1c84 : SUB ECX,ESI
006e1c86 : JMP 0x006e1cb3
006e1c88 : CMP ECX,dword ptr [ESP + 0x18]
006e1c8c : JG 0x006e1c53
006e1c8e : SUB ECX,EBX
006e1c90 : JMP 0x006e1c55
006e1c92 : LEA ESI,[EBP + 0x18]
006e1c95 : CMP ECX,ESI
006e1c97 : MOV dword ptr [ESP + 0x20],ESI
006e1c9b : JLE 0x006e1ceb
006e1c9d : MOV ESI,ECX
006e1c9f : SUB ESI,dword ptr [ESP + 0x20]
006e1ca3 : MOV EBP,ESI
006e1ca5 : IMUL EBP,ESI
006e1ca8 : ADD EDX,EBP
006e1caa : MOV EBP,dword ptr [ESP + 0x440]
006e1cb1 : SUB ECX,EBP
006e1cb3 : MOV ESI,ECX
006e1cb5 : IMUL ESI,ECX
006e1cb8 : MOV ECX,dword ptr [ESP + 0x43c]
006e1cbf : ADD EAX,ESI
006e1cc1 : MOV ESI,dword ptr [ESP + 0x10]
006e1cc5 : MOV dword ptr [ESP + ESI*0x4 + 0x38],EDX
006e1cc9 : MOV EDX,dword ptr [ESP + 0x14]
006e1ccd : CMP EAX,EDX
006e1ccf : JGE 0x006e1cd7
006e1cd1 : MOV EDX,EAX
006e1cd3 : MOV dword ptr [ESP + 0x14],EDX
006e1cd7 : INC dword ptr [ESP + 0x10]
006e1cdb : MOV ESI,dword ptr [ESP + 0x30]
006e1cdf : CMP dword ptr [ESP + 0x10],ESI
006e1ce3 : JL 0x006e1bd0
006e1ce9 : JMP 0x006e1cf9
006e1ceb : CMP ECX,dword ptr [ESP + 0x28]
006e1cef : JG 0x006e1cb1
006e1cf1 : SUB ECX,ESI
006e1cf3 : JMP 0x006e1cb3
006e1cf5 : MOV EDX,dword ptr [ESP + 0x14]
006e1cf9 : XOR EAX,EAX
006e1cfb : XOR ECX,ECX
006e1cfd : TEST ESI,ESI
006e1cff : JLE 0x006e1d17
006e1d01 : CMP dword ptr [ESP + ECX*0x4 + 0x38],EDX
006e1d05 : JG 0x006e1d12
006e1d07 : MOV EDI,dword ptr [ESP + 0x444]
006e1d0e : MOV byte ptr [EAX + EDI*0x1],CL
006e1d11 : INC EAX
006e1d12 : INC ECX
006e1d13 : CMP ECX,ESI
006e1d15 : JL 0x006e1d01
006e1d17 : POP EDI
006e1d18 : POP ESI
006e1d19 : POP EBP
006e1d1a : POP EBX
006e1d1b : ADD ESP,0x428
006e1d21 : RET
