PROGRAM  : Maestia.exe
FUNCTION : FUN_009ae560
ENTRY    : 009ae560
BODY     : [[009ae560, 009ae615] [009ae61a, 009ae682]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_009ae560(int param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint local_c;
  
  local_c = *(uint *)(param_1 + 0x70);
  piVar1 = *(int **)(param_1 + 0x58);
  do {
    if ((piVar1 == *(int **)(param_1 + 0x58)) &&
       (local_c == *(int *)(param_1 + 0x70) + *(int *)(param_1 + 0x74))) {
      FUN_00476f00();
      FUN_008018d0(L"ClearRecvChatQue");
      return;
    }
    uVar5 = local_c >> 2;
    uVar4 = local_c & 3;
    if (piVar1 == (int *)0x0) {
      iVar3 = 0;
    }
    else {
      iVar3 = *piVar1;
    }
    uVar2 = uVar5;
    if (*(uint *)(iVar3 + 0x14) <= uVar5) {
      if (piVar1 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *piVar1;
      }
      uVar2 = uVar5 - *(int *)(iVar3 + 0x14);
    }
    if (piVar1 == (int *)0x0) {
      iVar3 = 0;
    }
    else {
      iVar3 = *piVar1;
    }
    if (*(int *)(*(int *)(*(int *)(iVar3 + 0x10) + uVar2 * 4) + uVar4 * 4) != 0) {
      if (piVar1 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *piVar1;
      }
      uVar2 = uVar5;
      if (*(uint *)(iVar3 + 0x14) <= uVar5) {
        if (piVar1 == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *piVar1;
        }
        uVar2 = uVar5 - *(int *)(iVar3 + 0x14);
      }
      if (piVar1 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *piVar1;
      }
      iVar3 = *(int *)(*(int *)(*(int *)(iVar3 + 0x10) + uVar2 * 4) + uVar4 * 4);
      if (iVar3 != 0) {
        FUN_00462c40(iVar3);
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      if (piVar1 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *piVar1;
      }
      if (*(uint *)(iVar3 + 0x14) <= uVar5) {
        if (piVar1 == (int *)0x0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *piVar1;
        }
        uVar5 = uVar5 - *(int *)(iVar3 + 0x14);
      }
      if (piVar1 == (int *)0x0) {
        iVar3 = 0;
      }
      else {
        iVar3 = *piVar1;
      }
      *(undefined4 *)(*(int *)(*(int *)(iVar3 + 0x10) + uVar5 * 4) + uVar4 * 4) = 0;
    }
    local_c = local_c + 1;
  } while( true );
}



============================================================
DISASSEMBLY
============================================================
009ae560 : PUSH EBP
009ae561 : MOV EBP,ESP
009ae563 : AND ESP,0xfffffff8
009ae566 : SUB ESP,0x14
009ae569 : PUSH EBX
009ae56a : MOV EBX,dword ptr [EBP + 0x8]
009ae56d : MOV EDX,dword ptr [EBX + 0x70]
009ae570 : ADD EBX,0x58
009ae573 : PUSH ESI
009ae574 : PUSH EDI
009ae575 : MOV EDI,dword ptr [EBX]
009ae577 : MOV dword ptr [ESP + 0x14],EBX
009ae57b : MOV dword ptr [ESP + 0x1c],EDX
009ae57f : NOP
009ae580 : MOV EAX,dword ptr [EBX + 0x18]
009ae583 : MOV ECX,dword ptr [EBX]
009ae585 : ADD EAX,dword ptr [EBX + 0x1c]
009ae588 : CMP EDI,ECX
009ae58a : JNZ 0x009ae594
009ae58c : CMP EDX,EAX
009ae58e : JZ 0x009ae660
009ae594 : MOV ESI,EDX
009ae596 : SHR ESI,0x2
009ae599 : AND EDX,0x3
009ae59c : MOV EAX,ESI
009ae59e : MOV dword ptr [ESP + 0x10],EDX
009ae5a2 : TEST EDI,EDI
009ae5a4 : JZ 0x009ae5aa
009ae5a6 : MOV ECX,dword ptr [EDI]
009ae5a8 : JMP 0x009ae5ac
009ae5aa : XOR ECX,ECX
009ae5ac : CMP dword ptr [ECX + 0x14],EAX
009ae5af : JA 0x009ae5be
009ae5b1 : TEST EDI,EDI
009ae5b3 : JZ 0x009ae5b9
009ae5b5 : MOV ECX,dword ptr [EDI]
009ae5b7 : JMP 0x009ae5bb
009ae5b9 : XOR ECX,ECX
009ae5bb : SUB EAX,dword ptr [ECX + 0x14]
009ae5be : TEST EDI,EDI
009ae5c0 : JZ 0x009ae5c6
009ae5c2 : MOV ECX,dword ptr [EDI]
009ae5c4 : JMP 0x009ae5c8
009ae5c6 : XOR ECX,ECX
009ae5c8 : MOV ECX,dword ptr [ECX + 0x10]
009ae5cb : MOV EAX,dword ptr [ECX + EAX*0x4]
009ae5ce : CMP dword ptr [EAX + EDX*0x4],0x0
009ae5d2 : JZ 0x009ae653
009ae5d4 : MOV ECX,ESI
009ae5d6 : TEST EDI,EDI
009ae5d8 : JZ 0x009ae5de
009ae5da : MOV EAX,dword ptr [EDI]
009ae5dc : JMP 0x009ae5e0
009ae5de : XOR EAX,EAX
009ae5e0 : CMP dword ptr [EAX + 0x14],ECX
009ae5e3 : JA 0x009ae5f2
009ae5e5 : TEST EDI,EDI
009ae5e7 : JZ 0x009ae5ed
009ae5e9 : MOV EAX,dword ptr [EDI]
009ae5eb : JMP 0x009ae5ef
009ae5ed : XOR EAX,EAX
009ae5ef : SUB ECX,dword ptr [EAX + 0x14]
009ae5f2 : TEST EDI,EDI
009ae5f4 : JZ 0x009ae5fa
009ae5f6 : MOV EAX,dword ptr [EDI]
009ae5f8 : JMP 0x009ae5fc
009ae5fa : XOR EAX,EAX
009ae5fc : MOV EAX,dword ptr [EAX + 0x10]
009ae5ff : MOV ECX,dword ptr [EAX + ECX*0x4]
009ae602 : MOV EBX,dword ptr [ECX + EDX*0x4]
009ae605 : TEST EBX,EBX
009ae607 : JZ 0x009ae61a
009ae609 : PUSH EBX
009ae60a : CALL 0x00462c40
009ae60f : MOV ECX,EBX
009ae611 : CALL 0x006f04e0
009ae61a : MOV ECX,ESI
009ae61c : TEST EDI,EDI
009ae61e : JZ 0x009ae624
009ae620 : MOV EAX,dword ptr [EDI]
009ae622 : JMP 0x009ae626
009ae624 : XOR EAX,EAX
009ae626 : CMP dword ptr [EAX + 0x14],ECX
009ae629 : JA 0x009ae638
009ae62b : TEST EDI,EDI
009ae62d : JZ 0x009ae633
009ae62f : MOV EAX,dword ptr [EDI]
009ae631 : JMP 0x009ae635
009ae633 : XOR EAX,EAX
009ae635 : SUB ECX,dword ptr [EAX + 0x14]
009ae638 : TEST EDI,EDI
009ae63a : JZ 0x009ae640
009ae63c : MOV EAX,dword ptr [EDI]
009ae63e : JMP 0x009ae642
009ae640 : XOR EAX,EAX
009ae642 : MOV EAX,dword ptr [EAX + 0x10]
009ae645 : MOV ECX,dword ptr [EAX + ECX*0x4]
009ae648 : MOV EBX,dword ptr [ESP + 0x14]
009ae64c : MOV dword ptr [ECX + EDX*0x4],0x0
009ae653 : INC dword ptr [ESP + 0x1c]
009ae657 : MOV EDX,dword ptr [ESP + 0x1c]
009ae65b : JMP 0x009ae580
009ae660 : MOV ESI,EBX
009ae662 : CALL 0x00476f00
009ae667 : MOV ESI,dword ptr [0x00da98e8]
009ae66d : PUSH 0xc8b5c0
009ae672 : CALL 0x008018d0
009ae677 : ADD ESP,0x4
009ae67a : POP EDI
009ae67b : POP ESI
009ae67c : POP EBX
009ae67d : MOV ESP,EBP
009ae67f : POP EBP
009ae680 : RET 0x4
