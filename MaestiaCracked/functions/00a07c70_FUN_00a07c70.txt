PROGRAM  : Maestia.exe
FUNCTION : FUN_00a07c70
ENTRY    : 00a07c70
BODY     : [[00a07c70, 00a080b3]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00a07c70(void)

{
  int iVar1;
  DWORD DVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  int *in_ECX;
  uint uVar6;
  uint local_3c;
  short local_2c;
  undefined2 local_2a;
  undefined2 local_26;
  uint local_24;
  uint local_20;
  uint local_1c;
  uint local_18;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b25d4d;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  iVar1 = (**(code **)(*in_ECX + 0x90))(DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  if (iVar1 == 0) {
    (**(code **)(*in_ECX + 0xa8))(&local_2c);
    if (local_2c != 0) {
      FUN_00406360(L"`L@B",4);
      uVar4 = FUN_00404750(L"%d-%d-%d %d:%d",local_2c,local_2a,local_26,local_24 & 0xffff,
                           local_24 >> 0x10);
      local_8 = 10;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = 0xffffffff;
      if (7 < local_3c) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
    }
  }
  else {
    DVar2 = timeGetTime();
    iVar1 = (**(code **)(*in_ECX + 0x98))();
    FUN_00406360(L"`L@B",4);
    uVar6 = (DVar2 - iVar1) / 1000;
    iVar1 = (**(code **)(*in_ECX + 0x90))();
    local_18 = iVar1 - uVar6;
    uVar3 = (**(code **)(*in_ECX + 0x90))();
    if (uVar3 <= uVar6) {
      iVar1 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 0;
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      uVar4 = FUN_00404750(L"%d%s",0,iVar1);
      local_8._0_1_ = 1;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (local_20 < 8) {
        local_20 = 7;
        local_24 = 0;
        local_8 = 0xffffffff;
        if (local_3c < 8) {
          ExceptionList = local_10;
          return;
        }
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uVar3 = local_18 / 0x3c;
    local_1c = uVar3 / 0x3c;
    uVar6 = local_1c / 0x18;
    if (uVar6 != 0) {
      iVar1 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 2;
      if (*(uint *)(iVar1 + 0x18) < 8) {
        iVar1 = iVar1 + 4;
      }
      else {
        iVar1 = *(int *)(iVar1 + 4);
      }
      uVar4 = FUN_00404750(L"%d%s ",uVar6,iVar1);
      local_8._0_1_ = 3;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,2);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    iVar1 = local_1c + uVar6 * -0x18;
    if (iVar1 != 0) {
      iVar5 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 4;
      if (*(uint *)(iVar5 + 0x18) < 8) {
        iVar5 = iVar5 + 4;
      }
      else {
        iVar5 = *(int *)(iVar5 + 4);
      }
      uVar4 = FUN_00404750(L"%d%s ",iVar1,iVar5);
      local_8._0_1_ = 5;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,4);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    iVar1 = uVar3 + local_1c * -0x3c;
    if (iVar1 != 0) {
      iVar5 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 6;
      if (*(uint *)(iVar5 + 0x18) < 8) {
        iVar5 = iVar5 + 4;
      }
      else {
        iVar5 = *(int *)(iVar5 + 4);
      }
      uVar4 = FUN_00404750(L"%d%s ",iVar1,iVar5);
      local_8._0_1_ = 7;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,6);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
    iVar1 = local_18 + uVar3 * -0x3c;
    if (iVar1 != 0) {
      iVar5 = FUN_0081cbe0(DAT_0172491c);
      local_8 = 8;
      if (*(uint *)(iVar5 + 0x18) < 8) {
        iVar5 = iVar5 + 4;
      }
      else {
        iVar5 = *(int *)(iVar5 + 4);
      }
      uVar4 = FUN_00404750(L"%d%s ",iVar1,iVar5);
      local_8._0_1_ = 9;
      FUN_00405c30(uVar4,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,8);
      FUN_00406560();
      local_8 = 0xffffffff;
      FUN_00406560();
    }
  }
  iVar1 = FUN_00405bb0(L"`L@B");
  if (iVar1 != 0) {
    FUN_00404870(&DAT_00caa97c,2);
    ExceptionList = local_10;
    return;
  }
  FUN_00406360(&DAT_00caa978,0);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00a07c70 : PUSH EBP
00a07c71 : MOV EBP,ESP
00a07c73 : PUSH -0x1
00a07c75 : PUSH 0xb25d4d
00a07c7a : MOV EAX,FS:[0x0]
00a07c80 : PUSH EAX
00a07c81 : SUB ESP,0xf0
00a07c87 : PUSH EBX
00a07c88 : PUSH ESI
00a07c89 : PUSH EDI
00a07c8a : MOV EAX,[0x00d66fa0]
00a07c8f : XOR EAX,EBP
00a07c91 : PUSH EAX
00a07c92 : LEA EAX,[EBP + -0xc]
00a07c95 : MOV FS:[0x0],EAX
00a07c9b : MOV EBX,dword ptr [EBP + 0x8]
00a07c9e : MOV ESI,ECX
00a07ca0 : MOV EAX,dword ptr [ESI]
00a07ca2 : MOV EDX,dword ptr [EAX + 0x90]
00a07ca8 : CALL EDX
00a07caa : TEST EAX,EAX
00a07cac : JZ 0x00a07fcf
00a07cb2 : CALL dword ptr [0x00b85598]
00a07cb8 : MOV EDI,EAX
00a07cba : MOV EAX,dword ptr [ESI]
00a07cbc : MOV EDX,dword ptr [EAX + 0x98]
00a07cc2 : MOV ECX,ESI
00a07cc4 : CALL EDX
00a07cc6 : PUSH 0x4
00a07cc8 : PUSH 0xcaa8d4
00a07ccd : MOV ECX,EBX
00a07ccf : SUB EDI,EAX
00a07cd1 : CALL 0x00406360
00a07cd6 : MOV EAX,0x10624dd3
00a07cdb : MUL EDI
00a07cdd : MOV EAX,dword ptr [ESI]
00a07cdf : MOV EDI,EDX
00a07ce1 : MOV EDX,dword ptr [EAX + 0x90]
00a07ce7 : MOV ECX,ESI
00a07ce9 : SHR EDI,0x6
00a07cec : CALL EDX
00a07cee : SUB EAX,EDI
00a07cf0 : MOV dword ptr [EBP + -0x14],EAX
00a07cf3 : MOV EAX,dword ptr [ESI]
00a07cf5 : MOV EDX,dword ptr [EAX + 0x90]
00a07cfb : MOV ECX,ESI
00a07cfd : CALL EDX
00a07cff : CMP EAX,EDI
00a07d01 : JA 0x00a07dad
00a07d07 : MOV EAX,[0x0172491c]
00a07d0c : PUSH EAX
00a07d0d : MOV ECX,0xcaa8e0
00a07d12 : LEA ESI,[EBP + -0x50]
00a07d15 : CALL 0x0081cbe0
00a07d1a : MOV dword ptr [EBP + -0x4],0x0
00a07d21 : MOV EDI,0x8
00a07d26 : CMP dword ptr [EAX + 0x18],EDI
00a07d29 : JC 0x00a07d30
00a07d2b : MOV EAX,dword ptr [EAX + 0x4]
00a07d2e : JMP 0x00a07d33
00a07d30 : ADD EAX,0x4
00a07d33 : PUSH EAX
00a07d34 : PUSH 0x0
00a07d36 : PUSH 0xcaa8e8
00a07d3b : LEA ESI,[EBP + -0x34]
00a07d3e : CALL 0x00404750
00a07d43 : ADD ESP,0xc
00a07d46 : MOV byte ptr [EBP + -0x4],0x1
00a07d4a : PUSH -0x1
00a07d4c : XOR ESI,ESI
00a07d4e : PUSH ESI
00a07d4f : PUSH EAX
00a07d50 : MOV ECX,EBX
00a07d52 : CALL 0x00405c30
00a07d57 : MOV byte ptr [EBP + -0x4],0x0
00a07d5b : CMP dword ptr [EBP + -0x1c],EDI
00a07d5e : JC 0x00a07d68
00a07d60 : MOV ECX,dword ptr [EBP + -0x30]
00a07d63 : CALL 0x006f04e0
00a07d68 : MOV EBX,0x7
00a07d6d : XOR ECX,ECX
00a07d6f : MOV dword ptr [EBP + -0x1c],EBX
00a07d72 : MOV dword ptr [EBP + -0x20],ESI
00a07d75 : MOV word ptr [EBP + -0x30],CX
00a07d79 : MOV dword ptr [EBP + -0x4],0xffffffff
00a07d80 : CMP dword ptr [EBP + -0x38],EDI
00a07d83 : JC 0x00a07d8d
00a07d85 : MOV ECX,dword ptr [EBP + -0x4c]
00a07d88 : CALL 0x006f04e0
00a07d8d : XOR EDX,EDX
00a07d8f : MOV dword ptr [EBP + -0x38],EBX
00a07d92 : MOV dword ptr [EBP + -0x3c],ESI
00a07d95 : MOV word ptr [EBP + -0x4c],DX
00a07d99 : MOV ECX,dword ptr [EBP + -0xc]
00a07d9c : MOV dword ptr FS:[0x0],ECX
00a07da3 : POP ECX
00a07da4 : POP EDI
00a07da5 : POP ESI
00a07da6 : POP EBX
00a07da7 : MOV ESP,EBP
00a07da9 : POP EBP
00a07daa : RET 0x4
00a07dad : MOV EAX,0x88888889
00a07db2 : MUL dword ptr [EBP + -0x14]
00a07db5 : MOV ESI,EDX
00a07db7 : SHR ESI,0x5
00a07dba : MOV EAX,0x88888889
00a07dbf : MUL ESI
00a07dc1 : MOV ECX,EDX
00a07dc3 : SHR ECX,0x5
00a07dc6 : MOV EAX,0xaaaaaaab
00a07dcb : MUL ECX
00a07dcd : MOV EDI,EDX
00a07dcf : SHR EDI,0x4
00a07dd2 : MOV dword ptr [EBP + 0x8],ESI
00a07dd5 : MOV dword ptr [EBP + -0x18],ECX
00a07dd8 : TEST EDI,EDI
00a07dda : JBE 0x00a07e46
00a07ddc : MOV EAX,[0x0172491c]
00a07de1 : PUSH EAX
00a07de2 : MOV ECX,0xcaa8f4
00a07de7 : LEA ESI,[EBP + -0x34]
00a07dea : CALL 0x0081cbe0
00a07def : MOV dword ptr [EBP + -0x4],0x2
00a07df6 : CMP dword ptr [EAX + 0x18],0x8
00a07dfa : JC 0x00a07e01
00a07dfc : MOV EAX,dword ptr [EAX + 0x4]
00a07dff : JMP 0x00a07e04
00a07e01 : ADD EAX,0x4
00a07e04 : PUSH EAX
00a07e05 : PUSH EDI
00a07e06 : PUSH 0xcaa8f8
00a07e0b : LEA ESI,[EBP + -0x50]
00a07e0e : CALL 0x00404750
00a07e13 : ADD ESP,0xc
00a07e16 : MOV byte ptr [EBP + -0x4],0x3
00a07e1a : PUSH -0x1
00a07e1c : PUSH 0x0
00a07e1e : PUSH EAX
00a07e1f : MOV ECX,EBX
00a07e21 : CALL 0x00405c30
00a07e26 : MOV byte ptr [EBP + -0x4],0x2
00a07e2a : MOV ECX,ESI
00a07e2c : CALL 0x00406560
00a07e31 : MOV dword ptr [EBP + -0x4],0xffffffff
00a07e38 : LEA ECX,[EBP + -0x34]
00a07e3b : CALL 0x00406560
00a07e40 : MOV ESI,dword ptr [EBP + 0x8]
00a07e43 : MOV ECX,dword ptr [EBP + -0x18]
00a07e46 : LEA EDX,[EDI + EDI*0x2]
00a07e49 : ADD EDX,EDX
00a07e4b : ADD EDX,EDX
00a07e4d : ADD EDX,EDX
00a07e4f : MOV EDI,ECX
00a07e51 : SUB EDI,EDX
00a07e53 : JZ 0x00a07ec5
00a07e55 : MOV EAX,[0x0172491c]
00a07e5a : PUSH EAX
00a07e5b : MOV ECX,0xcaa904
00a07e60 : LEA ESI,[EBP + 0xffffff5c]
00a07e66 : CALL 0x0081cbe0
00a07e6b : MOV dword ptr [EBP + -0x4],0x4
00a07e72 : CMP dword ptr [EAX + 0x18],0x8
00a07e76 : JC 0x00a07e7d
00a07e78 : MOV EAX,dword ptr [EAX + 0x4]
00a07e7b : JMP 0x00a07e80
00a07e7d : ADD EAX,0x4
00a07e80 : PUSH EAX
00a07e81 : PUSH EDI
00a07e82 : PUSH 0xcaa90c
00a07e87 : LEA ESI,[EBP + -0x6c]
00a07e8a : CALL 0x00404750
00a07e8f : ADD ESP,0xc
00a07e92 : MOV byte ptr [EBP + -0x4],0x5
00a07e96 : PUSH -0x1
00a07e98 : PUSH 0x0
00a07e9a : PUSH EAX
00a07e9b : MOV ECX,EBX
00a07e9d : CALL 0x00405c30
00a07ea2 : MOV byte ptr [EBP + -0x4],0x4
00a07ea6 : MOV ECX,ESI
00a07ea8 : CALL 0x00406560
00a07ead : MOV dword ptr [EBP + -0x4],0xffffffff
00a07eb4 : LEA ECX,[EBP + 0xffffff5c]
00a07eba : CALL 0x00406560
00a07ebf : MOV ESI,dword ptr [EBP + 0x8]
00a07ec2 : MOV ECX,dword ptr [EBP + -0x18]
00a07ec5 : MOV EDX,ECX
00a07ec7 : SHL EDX,0x4
00a07eca : SUB EDX,ECX
00a07ecc : ADD EDX,EDX
00a07ece : ADD EDX,EDX
00a07ed0 : MOV EDI,ESI
00a07ed2 : SUB EDI,EDX
00a07ed4 : JZ 0x00a07f46
00a07ed6 : MOV EAX,[0x0172491c]
00a07edb : PUSH EAX
00a07edc : MOV ECX,0xcaa918
00a07ee1 : LEA ESI,[EBP + 0xffffff78]
00a07ee7 : CALL 0x0081cbe0
00a07eec : MOV dword ptr [EBP + -0x4],0x6
00a07ef3 : CMP dword ptr [EAX + 0x18],0x8
00a07ef7 : JC 0x00a07efe
00a07ef9 : MOV EAX,dword ptr [EAX + 0x4]
00a07efc : JMP 0x00a07f01
00a07efe : ADD EAX,0x4
00a07f01 : PUSH EAX
00a07f02 : PUSH EDI
00a07f03 : PUSH 0xcaa920
00a07f08 : LEA ESI,[EBP + 0xffffff24]
00a07f0e : CALL 0x00404750
00a07f13 : ADD ESP,0xc
00a07f16 : MOV byte ptr [EBP + -0x4],0x7
00a07f1a : PUSH -0x1
00a07f1c : PUSH 0x0
00a07f1e : PUSH EAX
00a07f1f : MOV ECX,EBX
00a07f21 : CALL 0x00405c30
00a07f26 : MOV byte ptr [EBP + -0x4],0x6
00a07f2a : MOV ECX,ESI
00a07f2c : CALL 0x00406560
00a07f31 : MOV dword ptr [EBP + -0x4],0xffffffff
00a07f38 : LEA ECX,[EBP + 0xffffff78]
00a07f3e : CALL 0x00406560
00a07f43 : MOV ESI,dword ptr [EBP + 0x8]
00a07f46 : MOV EDI,dword ptr [EBP + -0x14]
00a07f49 : MOV ECX,ESI
00a07f4b : SHL ECX,0x4
00a07f4e : SUB ECX,ESI
00a07f50 : ADD ECX,ECX
00a07f52 : ADD ECX,ECX
00a07f54 : SUB EDI,ECX
00a07f56 : JZ 0x00a08059
00a07f5c : MOV EDX,dword ptr [0x0172491c]
00a07f62 : PUSH EDX
00a07f63 : MOV ECX,0xcaa92c
00a07f68 : LEA ESI,[EBP + 0xffffff08]
00a07f6e : CALL 0x0081cbe0
00a07f73 : MOV ECX,0x8
00a07f78 : MOV dword ptr [EBP + -0x4],ECX
00a07f7b : CMP dword ptr [EAX + 0x18],ECX
00a07f7e : JC 0x00a07f85
00a07f80 : MOV EAX,dword ptr [EAX + 0x4]
00a07f83 : JMP 0x00a07f88
00a07f85 : ADD EAX,0x4
00a07f88 : PUSH EAX
00a07f89 : PUSH EDI
00a07f8a : PUSH 0xcaa934
00a07f8f : LEA ESI,[EBP + 0xffffff40]
00a07f95 : CALL 0x00404750
00a07f9a : ADD ESP,0xc
00a07f9d : MOV byte ptr [EBP + -0x4],0x9
00a07fa1 : PUSH -0x1
00a07fa3 : PUSH 0x0
00a07fa5 : PUSH EAX
00a07fa6 : MOV ECX,EBX
00a07fa8 : CALL 0x00405c30
00a07fad : MOV byte ptr [EBP + -0x4],0x8
00a07fb1 : MOV ECX,ESI
00a07fb3 : CALL 0x00406560
00a07fb8 : MOV dword ptr [EBP + -0x4],0xffffffff
00a07fbf : LEA ECX,[EBP + 0xffffff08]
00a07fc5 : CALL 0x00406560
00a07fca : JMP 0x00a08059
00a07fcf : MOV EAX,dword ptr [ESI]
00a07fd1 : MOV EDX,dword ptr [EAX + 0xa8]
00a07fd7 : LEA ECX,[EBP + -0x28]
00a07fda : PUSH ECX
00a07fdb : MOV ECX,ESI
00a07fdd : CALL EDX
00a07fdf : CMP word ptr [EBP + -0x28],0x0
00a07fe4 : JZ 0x00a08059
00a07fe6 : PUSH 0x4
00a07fe8 : PUSH 0xcaa940
00a07fed : MOV ECX,EBX
00a07fef : CALL 0x00406360
00a07ff4 : MOVZX EAX,word ptr [EBP + -0x1e]
00a07ff8 : MOVZX ECX,word ptr [EBP + -0x20]
00a07ffc : MOVZX EDX,word ptr [EBP + -0x22]
00a08000 : PUSH EAX
00a08001 : MOVZX EAX,word ptr [EBP + -0x26]
00a08005 : PUSH ECX
00a08006 : MOVZX ECX,word ptr [EBP + -0x28]
00a0800a : PUSH EDX
00a0800b : PUSH EAX
00a0800c : PUSH ECX
00a0800d : PUSH 0xcaa94c
00a08012 : LEA ESI,[EBP + -0x50]
00a08015 : CALL 0x00404750
00a0801a : ADD ESP,0x18
00a0801d : MOV dword ptr [EBP + -0x4],0xa
00a08024 : PUSH -0x1
00a08026 : PUSH 0x0
00a08028 : PUSH EAX
00a08029 : MOV ECX,EBX
00a0802b : CALL 0x00405c30
00a08030 : MOV dword ptr [EBP + -0x4],0xffffffff
00a08037 : CMP dword ptr [EBP + -0x38],0x8
00a0803b : JC 0x00a08045
00a0803d : MOV ECX,dword ptr [EBP + -0x4c]
00a08040 : CALL 0x006f04e0
00a08045 : XOR EDX,EDX
00a08047 : MOV dword ptr [EBP + -0x38],0x7
00a0804e : MOV dword ptr [EBP + -0x3c],0x0
00a08055 : MOV word ptr [EBP + -0x4c],DX
00a08059 : MOV EAX,dword ptr [EBX + 0x14]
00a0805c : PUSH 0xcaa96c
00a08061 : MOV EDI,0x4
00a08066 : MOV ECX,EBX
00a08068 : CALL 0x00405bb0
00a0806d : TEST EAX,EAX
00a0806f : JNZ 0x00a08092
00a08071 : PUSH EAX
00a08072 : PUSH 0xcaa978
00a08077 : MOV ECX,EBX
00a08079 : CALL 0x00406360
00a0807e : MOV ECX,dword ptr [EBP + -0xc]
00a08081 : MOV dword ptr FS:[0x0],ECX
00a08088 : POP ECX
00a08089 : POP EDI
00a0808a : POP ESI
00a0808b : POP EBX
00a0808c : MOV ESP,EBP
00a0808e : POP EBP
00a0808f : RET 0x4
00a08092 : PUSH 0x2
00a08094 : PUSH 0xcaa97c
00a08099 : MOV ESI,EBX
00a0809b : CALL 0x00404870
00a080a0 : MOV ECX,dword ptr [EBP + -0xc]
00a080a3 : MOV dword ptr FS:[0x0],ECX
00a080aa : POP ECX
00a080ab : POP EDI
00a080ac : POP ESI
00a080ad : POP EBX
00a080ae : MOV ESP,EBP
00a080b0 : POP EBP
00a080b1 : RET 0x4
