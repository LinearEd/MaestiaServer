PROGRAM  : Maestia.exe
FUNCTION : FUN_00597df0
ENTRY    : 00597df0
BODY     : [[00597df0, 00597e75]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00597df0(undefined4 param_1,GRefCountNTSImpl *param_2)

{
  int *piVar1;
  GRefCountNTSImpl *this;
  int iVar2;
  undefined4 uVar3;
  int in_ECX;
  
  piVar1 = (int *)(*(int **)(in_ECX + 0xc))[1];
  if (piVar1 == (int *)0x0) {
    if ((**(int **)(in_ECX + 0xc) != 0) &&
       (FUN_00597b80(&param_2), this = param_2, param_2 != (GRefCountNTSImpl *)0x0)) {
      iVar2 = (**(code **)(*(int *)param_2 + 0x9c))();
      if (iVar2 == 4) {
        (**(code **)(*(int *)this + 0x174))();
        iVar2 = *(int *)this;
        uVar3 = FUN_0051c9d0(param_1);
        (**(code **)(iVar2 + 0x184))(param_1,uVar3);
        (**(code **)(*(int *)this + 0x180))(param_1,0xffffffff);
      }
      GRefCountNTSImpl::Release(this);
    }
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00597e02. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)(*piVar1 + 0x180))();
  return;
}



============================================================
DISASSEMBLY
============================================================
00597df0 : MOV EAX,dword ptr [ECX + 0xc]
00597df3 : MOV ECX,dword ptr [EAX + 0x4]
00597df6 : TEST ECX,ECX
00597df8 : JZ 0x00597e04
00597dfa : MOV EAX,dword ptr [ECX]
00597dfc : MOV EAX,dword ptr [EAX + 0x180]
00597e02 : JMP EAX
00597e04 : CMP dword ptr [EAX],0x0
00597e07 : JZ 0x00597e73
00597e09 : PUSH ESI
00597e0a : LEA ECX,[ESP + 0xc]
00597e0e : PUSH ECX
00597e0f : MOV ECX,dword ptr [EAX]
00597e11 : CALL 0x00597b80
00597e16 : MOV ESI,dword ptr [ESP + 0xc]
00597e1a : TEST ESI,ESI
00597e1c : JZ 0x00597e72
00597e1e : MOV EDX,dword ptr [ESI]
00597e20 : MOV EAX,dword ptr [EDX + 0x9c]
00597e26 : MOV ECX,ESI
00597e28 : CALL EAX
00597e2a : CMP EAX,0x4
00597e2d : JNZ 0x00597e6b
00597e2f : MOV EDX,dword ptr [ESI]
00597e31 : MOV EAX,dword ptr [EDX + 0x174]
00597e37 : PUSH EBX
00597e38 : PUSH EDI
00597e39 : MOV ECX,ESI
00597e3b : CALL EAX
00597e3d : MOV EDI,dword ptr [ESI]
00597e3f : MOV EBX,dword ptr [ESP + 0x10]
00597e43 : PUSH EBX
00597e44 : ADD EDI,0x184
00597e4a : CALL 0x0051c9d0
00597e4f : MOV EDX,dword ptr [EDI]
00597e51 : ADD ESP,0x4
00597e54 : PUSH EAX
00597e55 : PUSH EBX
00597e56 : MOV ECX,ESI
00597e58 : CALL EDX
00597e5a : MOV EAX,dword ptr [ESI]
00597e5c : MOV EDX,dword ptr [EAX + 0x180]
00597e62 : PUSH -0x1
00597e64 : PUSH EBX
00597e65 : MOV ECX,ESI
00597e67 : CALL EDX
00597e69 : POP EDI
00597e6a : POP EBX
00597e6b : MOV ECX,ESI
00597e6d : CALL 0x004ff7c0
00597e72 : POP ESI
00597e73 : RET 0x8
