PROGRAM  : Maestia.exe
FUNCTION : FUN_00572520
ENTRY    : 00572520
BODY     : [[00572520, 005725f1]]

============================================================
DECOMPILED C CODE
============================================================

undefined1
FUN_00572520(undefined4 param_1,int *param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5)

{
  int iVar1;
  undefined1 uVar2;
  undefined4 uVar3;
  int in_ECX;
  GRefCountNTSImpl *pGVar4;
  GRefCountNTSImpl *this;
  undefined1 auStack_10 [16];
  
  if (*(int *)(in_ECX + 0x68) == 0) {
    return 0;
  }
  iVar1 = *param_2;
  if (iVar1 != 0) {
    *(uint *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1U & 0x8fffffff;
  }
  iVar1 = *param_2;
  this = (GRefCountNTSImpl *)0x0;
  if ((param_2[1] != 0) &&
     (this = (GRefCountNTSImpl *)FUN_0051d0a0(in_ECX), this != (GRefCountNTSImpl *)0x0)) {
    *(int *)(this + 4) = *(int *)(this + 4) + 1;
  }
  if (iVar1 == 0) {
    if (this == (GRefCountNTSImpl *)0x0) {
      pGVar4 = (GRefCountNTSImpl *)0x0;
    }
    else {
      pGVar4 = this + 0x68;
    }
  }
  else {
    pGVar4 = (GRefCountNTSImpl *)(iVar1 + 0x10);
  }
  uVar3 = (**(code **)(**(int **)(in_ECX + 0x68) + 0x5c))();
  FUN_00526210(param_2 + 2);
  uVar2 = FUN_0052ec40(auStack_10,param_3,pGVar4,uVar3,param_4,param_5,param_1);
  FUN_00526bc0();
  if (this != (GRefCountNTSImpl *)0x0) {
    GRefCountNTSImpl::Release(this);
  }
  if (iVar1 != 0) {
    FUN_00503db0();
  }
  return uVar2;
}



============================================================
DISASSEMBLY
============================================================
00572520 : SUB ESP,0x10
00572523 : PUSH EDI
00572524 : MOV EDI,ECX
00572526 : CMP dword ptr [EDI + 0x68],0x0
0057252a : JZ 0x005725e9
00572530 : PUSH EBX
00572531 : PUSH EBP
00572532 : MOV EBP,dword ptr [ESP + 0x24]
00572536 : MOV EAX,dword ptr [EBP]
00572539 : PUSH ESI
0057253a : TEST EAX,EAX
0057253c : JZ 0x0057254b
0057253e : MOV ECX,dword ptr [EAX + 0x8]
00572541 : INC ECX
00572542 : AND ECX,0x8fffffff
00572548 : MOV dword ptr [EAX + 0x8],ECX
0057254b : MOV ECX,dword ptr [EBP + 0x4]
0057254e : MOV EBX,dword ptr [EBP]
00572551 : XOR ESI,ESI
00572553 : MOV dword ptr [ESP + 0x28],EBX
00572557 : TEST ECX,ECX
00572559 : JZ 0x0057256a
0057255b : PUSH EDI
0057255c : CALL 0x0051d0a0
00572561 : TEST EAX,EAX
00572563 : JZ 0x00572568
00572565 : INC dword ptr [EAX + 0x4]
00572568 : MOV ESI,EAX
0057256a : TEST EBX,EBX
0057256c : JZ 0x00572573
0057256e : ADD EBX,0x10
00572571 : JMP 0x0057257e
00572573 : TEST ESI,ESI
00572575 : JZ 0x0057257c
00572577 : LEA EBX,[ESI + 0x68]
0057257a : JMP 0x0057257e
0057257c : XOR EBX,EBX
0057257e : MOV ECX,dword ptr [EDI + 0x68]
00572581 : MOV EDX,dword ptr [ECX]
00572583 : MOV EAX,dword ptr [EDX + 0x5c]
00572586 : CALL EAX
00572588 : ADD EBP,0x8
0057258b : PUSH EBP
0057258c : LEA ECX,[ESP + 0x14]
00572590 : MOV EDI,EAX
00572592 : CALL 0x00526210
00572597 : MOV ECX,dword ptr [ESP + 0x24]
0057259b : MOV EDX,dword ptr [ESP + 0x34]
0057259f : MOV EAX,dword ptr [ESP + 0x30]
005725a3 : PUSH ECX
005725a4 : MOV ECX,dword ptr [ESP + 0x30]
005725a8 : PUSH EDX
005725a9 : PUSH EAX
005725aa : PUSH EDI
005725ab : PUSH EBX
005725ac : PUSH ECX
005725ad : LEA EDX,[ESP + 0x28]
005725b1 : PUSH EDX
005725b2 : CALL 0x0052ec40
005725b7 : ADD ESP,0x1c
005725ba : LEA ECX,[ESP + 0x10]
005725be : MOV BL,AL
005725c0 : CALL 0x00526bc0
005725c5 : TEST ESI,ESI
005725c7 : JZ 0x005725d0
005725c9 : MOV ECX,ESI
005725cb : CALL 0x004ff7c0
005725d0 : MOV ECX,dword ptr [ESP + 0x28]
005725d4 : TEST ECX,ECX
005725d6 : JZ 0x005725dd
005725d8 : CALL 0x00503db0
005725dd : POP ESI
005725de : POP EBP
005725df : MOV AL,BL
005725e1 : POP EBX
005725e2 : POP EDI
005725e3 : ADD ESP,0x10
005725e6 : RET 0x14
005725e9 : XOR AL,AL
005725eb : POP EDI
005725ec : ADD ESP,0x10
005725ef : RET 0x14
