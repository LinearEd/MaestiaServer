PROGRAM  : Maestia.exe
FUNCTION : FUN_008c6a40
ENTRY    : 008c6a40
BODY     : [[008c6a40, 008c6b63]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_008c6a40(int param_1,uint param_2,undefined4 param_3)

{
  int iVar1;
  uint uVar2;
  int in_ECX;
  undefined1 local_2c [4];
  undefined2 local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b38796;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (param_1 == 0) {
    FUN_008018d0(L"AvaGuiKey::InsertItem pItem NULL");
    ExceptionList = local_10;
    return;
  }
  iVar1 = *DAT_00da9894;
  if ((iVar1 != 0) && (*(int *)(iVar1 + 0x114) != 0)) {
    (**(code **)(**(int **)(iVar1 + 0x114) + 4))
              (*(int **)(iVar1 + 0x114),"SetKeySlot",&DAT_00c50c3c,param_2 & 0xffff,
               DAT_00d66fa0 ^ (uint)&stack0xfffffffc);
  }
  uVar2 = param_2 & 0xffff;
  *(uint *)(in_ECX + 0x5c) = uVar2;
  if ((ushort)param_2 < 7) {
    *(undefined1 *)(in_ECX + 0x60 + uVar2 * 8) = 1;
    *(undefined4 *)(in_ECX + 100 + uVar2 * 8) = *(undefined4 *)(param_1 + 0x10);
  }
  else {
    FUN_00406460(L"m_pLimitKey Buffer overrun !!");
    local_8 = 0;
    if ((int *)*DAT_00da98e8 != (int *)0x0) {
      (**(code **)(*(int *)*DAT_00da98e8 + 0x14))(L"AvaGuiKey::InsertItem",0x33,local_2c);
    }
    local_8 = 0xffffffff;
    if (7 < local_14) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    local_14 = 7;
    local_18 = 0;
    local_28 = 0;
  }
  FUN_009930d0(param_1,param_2,param_3);
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
008c6a40 : PUSH EBP
008c6a41 : MOV EBP,ESP
008c6a43 : PUSH -0x1
008c6a45 : PUSH 0xb38796
008c6a4a : MOV EAX,FS:[0x0]
008c6a50 : PUSH EAX
008c6a51 : SUB ESP,0x1c
008c6a54 : PUSH EBX
008c6a55 : PUSH ESI
008c6a56 : PUSH EDI
008c6a57 : MOV EAX,[0x00d66fa0]
008c6a5c : XOR EAX,EBP
008c6a5e : PUSH EAX
008c6a5f : LEA EAX,[EBP + -0xc]
008c6a62 : MOV FS:[0x0],EAX
008c6a68 : MOV ESI,ECX
008c6a6a : MOV EBX,dword ptr [EBP + 0x8]
008c6a6d : TEST EBX,EBX
008c6a6f : JNZ 0x008c6a98
008c6a71 : MOV ESI,dword ptr [0x00da98e8]
008c6a77 : PUSH 0xc50bf8
008c6a7c : CALL 0x008018d0
008c6a81 : ADD ESP,0x4
008c6a84 : MOV ECX,dword ptr [EBP + -0xc]
008c6a87 : MOV dword ptr FS:[0x0],ECX
008c6a8e : POP ECX
008c6a8f : POP EDI
008c6a90 : POP ESI
008c6a91 : POP EBX
008c6a92 : MOV ESP,EBP
008c6a94 : POP EBP
008c6a95 : RET 0xc
008c6a98 : MOV EAX,[0x00da9894]
008c6a9d : MOV EAX,dword ptr [EAX]
008c6a9f : MOV EDI,dword ptr [EBP + 0xc]
008c6aa2 : TEST EAX,EAX
008c6aa4 : JZ 0x008c6ace
008c6aa6 : CMP dword ptr [EAX + 0x114],0x0
008c6aad : JZ 0x008c6ace
008c6aaf : MOV EAX,dword ptr [EAX + 0x114]
008c6ab5 : MOV ECX,dword ptr [EAX]
008c6ab7 : MOVZX EDX,DI
008c6aba : PUSH EDX
008c6abb : PUSH 0xc50c3c
008c6ac0 : PUSH 0xc50c40
008c6ac5 : PUSH EAX
008c6ac6 : MOV EAX,dword ptr [ECX + 0x4]
008c6ac9 : CALL EAX
008c6acb : ADD ESP,0x10
008c6ace : MOVZX EAX,DI
008c6ad1 : MOV dword ptr [ESI + 0x5c],EAX
008c6ad4 : CMP DI,0x7
008c6ad8 : JNC 0x008c6ae8
008c6ada : MOV byte ptr [ESI + EAX*0x8 + 0x60],0x1
008c6adf : MOV ECX,dword ptr [EBX + 0x10]
008c6ae2 : MOV dword ptr [ESI + EAX*0x8 + 0x64],ECX
008c6ae6 : JMP 0x008c6b43
008c6ae8 : PUSH 0xc50c4c
008c6aed : LEA ECX,[EBP + -0x28]
008c6af0 : CALL 0x00406460
008c6af5 : MOV dword ptr [EBP + -0x4],0x0
008c6afc : MOV EDX,dword ptr [0x00da98e8]
008c6b02 : MOV ECX,dword ptr [EDX]
008c6b04 : TEST ECX,ECX
008c6b06 : JZ 0x008c6b1a
008c6b08 : MOV EAX,dword ptr [ECX]
008c6b0a : MOV EAX,dword ptr [EAX + 0x14]
008c6b0d : LEA EDX,[EBP + -0x28]
008c6b10 : PUSH EDX
008c6b11 : PUSH 0x33
008c6b13 : PUSH 0xc50c88
008c6b18 : CALL EAX
008c6b1a : MOV dword ptr [EBP + -0x4],0xffffffff
008c6b21 : CMP dword ptr [EBP + -0x10],0x8
008c6b25 : JC 0x008c6b2f
008c6b27 : MOV ECX,dword ptr [EBP + -0x24]
008c6b2a : CALL 0x006f04e0
008c6b2f : XOR ECX,ECX
008c6b31 : MOV dword ptr [EBP + -0x10],0x7
008c6b38 : MOV dword ptr [EBP + -0x14],0x0
008c6b3f : MOV word ptr [EBP + -0x24],CX
008c6b43 : MOV EDX,dword ptr [EBP + 0x10]
008c6b46 : PUSH EDX
008c6b47 : PUSH EDI
008c6b48 : PUSH EBX
008c6b49 : MOV ECX,ESI
008c6b4b : CALL 0x009930d0
008c6b50 : MOV ECX,dword ptr [EBP + -0xc]
008c6b53 : MOV dword ptr FS:[0x0],ECX
008c6b5a : POP ECX
008c6b5b : POP EDI
008c6b5c : POP ESI
008c6b5d : POP EBX
008c6b5e : MOV ESP,EBP
008c6b60 : POP EBP
008c6b61 : RET 0xc
