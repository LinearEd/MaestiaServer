PROGRAM  : Maestia.exe
FUNCTION : FUN_0099dd40
ENTRY    : 0099dd40
BODY     : [[0099dd40, 0099e0cc]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_0099dd40(int param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  uint uVar5;
  undefined4 uVar6;
  int in_ECX;
  undefined4 *puVar7;
  int in_EDX;
  float fVar8;
  float fVar9;
  undefined1 auStack_f4 [20];
  float local_e0;
  uint *local_dc;
  undefined2 uStack_d4;
  undefined4 uStack_c4;
  uint uStack_c0;
  undefined2 uStack_b8;
  undefined4 uStack_a8;
  uint uStack_a4;
  undefined4 uStack_9c;
  undefined4 uStack_8c;
  uint uStack_88;
  uint local_84;
  void *local_4c;
  undefined1 *puStack_48;
  int iStack_44;
  
  iStack_44 = 0xffffffff;
  puStack_48 = &LAB_00b212a1;
  local_4c = ExceptionList;
  local_84 = DAT_00d66fa0 ^ (uint)auStack_f4;
  uVar5 = DAT_00d66fa0 ^ (uint)&stack0xffffff00;
  ExceptionList = &local_4c;
  uVar1 = *(uint *)(param_1 + 0x40);
  if (uVar1 != 0) {
    uVar2 = *(uint *)(param_1 + 0x50);
    if (uVar2 == uVar1) {
      *(int *)(param_1 + 0x54) =
           *(int *)(param_1 + 0x54) + (in_EDX - *(int *)(param_1 + 0x3c)) + in_ECX;
      if ((in_EDX != 0) && (0 < *(int *)(param_1 + 0x3c) - in_EDX)) {
        FUN_00968530();
      }
      *(int *)(param_1 + 0x4c) = *(int *)(param_1 + 0x4c) + (*(int *)(param_1 + 0x3c) - in_EDX);
    }
    else {
      if ((uVar2 != 0) && (uVar2 < uVar1)) {
        *(int *)(param_1 + 0x54) = *(int *)(param_1 + 0x54) + (uVar1 - uVar2);
      }
      *(undefined4 *)(param_1 + 0x4c) = 0;
      *(uint *)(param_1 + 0x50) = uVar1;
    }
    if (*(int *)(param_1 + 0x4c) < 0) {
      *(undefined4 *)(param_1 + 0x4c) = 0;
    }
    uVar1 = *(uint *)(param_1 + 0x40);
    local_dc = (uint *)(param_1 + 0x3c);
    *local_dc = in_EDX + in_ECX;
    if (uVar1 < (uint)(in_EDX + in_ECX)) {
      *local_dc = uVar1;
    }
    fVar8 = (float)(int)uVar1;
    if ((int)uVar1 < 0) {
      fVar8 = fVar8 + 4.2949673e+09;
    }
    fVar9 = 100.0;
    local_e0 = ((float)(int)*local_dc / fVar8) * 100.0;
    fVar8 = ((float)*(int *)(param_1 + 0x4c) / fVar8) * 100.0 + local_e0;
    if ((100.0 <= fVar8) || (fVar9 = 0.0, fVar8 <= 0.0)) {
      fVar8 = fVar9;
    }
    iVar3 = *DAT_00da9894;
    if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
      (**(code **)(**(int **)(iVar3 + 0x114) + 4))
                (*(int **)(iVar3 + 0x114),"SetExpPercent","%f,%f,%f",(double)local_e0,(double)fVar8,
                 0,uVar5);
    }
    FUN_00406460();
    iStack_44 = 0;
    FUN_00404750();
    iStack_44._0_1_ = 1;
    FUN_00405eb0();
    iStack_44._0_1_ = 0;
    if (7 < uStack_c0) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_c0 = 7;
    uStack_c4 = 0;
    uStack_d4 = 0;
    FUN_00404870(&DAT_00c885f8,1);
    if (in_ECX == 0) {
      FUN_00406460();
      iStack_44._0_1_ = 2;
      FUN_0081d120();
      iStack_44._0_1_ = 3;
      FUN_00405c30();
      iStack_44 = CONCAT31(iStack_44._1_3_,2);
      if (7 < uStack_a4) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uStack_a4 = 7;
      uStack_a8 = 0;
      uStack_b8 = 0;
      iStack_44._0_1_ = 0;
      if (7 < uStack_c0) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uStack_c0 = 7;
      uStack_c4 = 0;
      uStack_d4 = 0;
    }
    iVar3 = *DAT_00da9894;
    if ((iVar3 != 0) && (*(int *)(iVar3 + 0x114) != 0)) {
      puVar7 = uStack_9c;
      if (uStack_88 < 8) {
        puVar7 = &uStack_9c;
      }
      (**(code **)(**(int **)(iVar3 + 0x114) + 4))
                (*(int **)(iVar3 + 0x114),"SetExpTooltip",&DAT_00c88630,puVar7);
    }
    if (DAT_00da9877 != '\0') {
      piVar4 = *(int **)(*(int *)(param_1 + 4) + 0x1a8);
      uVar6 = FUN_00404750();
      iStack_44._0_1_ = 4;
      (**(code **)(*piVar4 + 0x44))(uVar6,4);
      iStack_44 = (uint)iStack_44._1_3_ << 8;
      if (7 < uStack_a4) {
                    /* WARNING: Subroutine does not return */
        FUN_006f04e0();
      }
      uStack_a4 = 7;
      uStack_a8 = 0;
      uStack_b8 = 0;
    }
    iStack_44 = 0xffffffff;
    if (7 < uStack_88) {
                    /* WARNING: Subroutine does not return */
      FUN_006f04e0();
    }
    uStack_88 = 7;
    uStack_8c = 0;
    uStack_9c = (undefined4 *)((uint)uStack_9c._2_2_ << 0x10);
  }
  iStack_44 = 0xffffffff;
  ExceptionList = local_4c;
  __security_check_cookie(local_84 ^ (uint)auStack_f4);
  return;
}



============================================================
DISASSEMBLY
============================================================
0099dd40 : PUSH EBP
0099dd41 : MOV EBP,ESP
0099dd43 : AND ESP,0xffffffc0
0099dd46 : PUSH -0x1
0099dd48 : PUSH 0xb212a1
0099dd4d : MOV EAX,FS:[0x0]
0099dd53 : PUSH EAX
0099dd54 : SUB ESP,0xa8
0099dd5a : MOV EAX,[0x00d66fa0]
0099dd5f : XOR EAX,ESP
0099dd61 : MOV dword ptr [ESP + 0x70],EAX
0099dd65 : PUSH EBX
0099dd66 : PUSH ESI
0099dd67 : PUSH EDI
0099dd68 : MOV EAX,[0x00d66fa0]
0099dd6d : XOR EAX,ESP
0099dd6f : PUSH EAX
0099dd70 : LEA EAX,[ESP + 0xb8]
0099dd77 : MOV FS:[0x0],EAX
0099dd7d : MOV EDI,ECX
0099dd7f : MOV ESI,EDX
0099dd81 : MOV EBX,dword ptr [EBP + 0x8]
0099dd84 : MOV ECX,dword ptr [EBX + 0x40]
0099dd87 : TEST ECX,ECX
0099dd89 : JZ 0x0099e0aa
0099dd8f : MOV EAX,dword ptr [EBX + 0x50]
0099dd92 : CMP EAX,ECX
0099dd94 : JNZ 0x0099ddbc
0099dd96 : MOV EAX,dword ptr [EBX + 0x3c]
0099dd99 : SUB EDX,EAX
0099dd9b : ADD EDX,EDI
0099dd9d : ADD dword ptr [EBX + 0x54],EDX
0099dda0 : TEST ESI,ESI
0099dda2 : JBE 0x0099ddb2
0099dda4 : SUB EAX,ESI
0099dda6 : TEST EAX,EAX
0099dda8 : JLE 0x0099ddb2
0099ddaa : PUSH EDI
0099ddab : PUSH ECX
0099ddac : PUSH EAX
0099ddad : CALL 0x00968530
0099ddb2 : MOV EAX,dword ptr [EBX + 0x3c]
0099ddb5 : SUB EAX,ESI
0099ddb7 : ADD dword ptr [EBX + 0x4c],EAX
0099ddba : JMP 0x0099ddd5
0099ddbc : TEST EAX,EAX
0099ddbe : JBE 0x0099ddcb
0099ddc0 : CMP EAX,ECX
0099ddc2 : JNC 0x0099ddcb
0099ddc4 : MOV EDX,ECX
0099ddc6 : SUB EDX,EAX
0099ddc8 : ADD dword ptr [EBX + 0x54],EDX
0099ddcb : MOV dword ptr [EBX + 0x4c],0x0
0099ddd2 : MOV dword ptr [EBX + 0x50],ECX
0099ddd5 : CMP dword ptr [EBX + 0x4c],0x0
0099ddd9 : JGE 0x0099dde2
0099dddb : MOV dword ptr [EBX + 0x4c],0x0
0099dde2 : MOV ECX,dword ptr [EBX + 0x40]
0099dde5 : LEA EAX,[ESI + EDI*0x1]
0099dde8 : LEA ESI,[EBX + 0x3c]
0099ddeb : MOV dword ptr [ESP + 0x28],ESI
0099ddef : MOV dword ptr [ESI],EAX
0099ddf1 : CMP ECX,EAX
0099ddf3 : JNC 0x0099ddf7
0099ddf5 : MOV dword ptr [ESI],ECX
0099ddf7 : MOV dword ptr [ESP + 0x24],ECX
0099ddfb : FILD dword ptr [ESP + 0x24]
0099ddff : TEST ECX,ECX
0099de01 : JGE 0x0099de09
0099de03 : FADD float ptr [0x00cdf0e0]
0099de09 : MOVSS XMM2,dword ptr [0x00cdf230]
0099de11 : FSTP float ptr [ESP + 0x24]
0099de15 : MOVSS XMM3,dword ptr [ESP + 0x24]
0099de1b : CVTSI2SS XMM1,dword ptr [ESI]
0099de1f : CVTSI2SS XMM0,dword ptr [EBX + 0x4c]
0099de24 : DIVSS XMM0,XMM3
0099de28 : DIVSS XMM1,XMM3
0099de2c : MULSS XMM1,XMM2
0099de30 : MULSS XMM0,XMM2
0099de34 : ADDSS XMM0,XMM1
0099de38 : COMISS XMM0,XMM2
0099de3b : MOVSS dword ptr [ESP + 0x24],XMM1
0099de41 : JNC 0x0099de4b
0099de43 : XORPS XMM2,XMM2
0099de46 : COMISS XMM2,XMM0
0099de49 : JC 0x0099de4e
0099de4b : MOVAPS XMM0,XMM2
0099de4e : MOV EAX,[0x00da9894]
0099de53 : MOV EAX,dword ptr [EAX]
0099de55 : TEST EAX,EAX
0099de57 : JZ 0x0099de99
0099de59 : CMP dword ptr [EAX + 0x114],0x0
0099de60 : JZ 0x0099de99
0099de62 : FLDZ
0099de64 : MOV EAX,dword ptr [EAX + 0x114]
0099de6a : MOV ECX,dword ptr [EAX]
0099de6c : MOV EDX,dword ptr [ECX + 0x4]
0099de6f : SUB ESP,0x18
0099de72 : FSTP double ptr [ESP + 0x10]
0099de76 : CVTSS2SD XMM0,XMM0
0099de7a : MOVSD qword ptr [ESP + 0x8],XMM0
0099de80 : CVTSS2SD XMM0,XMM1
0099de84 : MOVSD qword ptr [ESP],XMM0
0099de89 : PUSH 0xc885b4
0099de8e : PUSH 0xc885c0
0099de93 : PUSH EAX
0099de94 : CALL EDX
0099de96 : ADD ESP,0x24
0099de99 : PUSH 0xc885d0
0099de9e : LEA ECX,[ESP + 0x68]
0099dea2 : CALL 0x00406460
0099dea7 : MOV dword ptr [ESP + 0xc0],0x0
0099deb2 : CVTSS2SD XMM0,dword ptr [ESP + 0x24]
0099deb8 : MOV EAX,dword ptr [EBX + 0x40]
0099debb : MOV ECX,dword ptr [ESI]
0099debd : SUB ESP,0x8
0099dec0 : MOVSD qword ptr [ESP],XMM0
0099dec5 : PUSH EAX
0099dec6 : PUSH ECX
0099dec7 : PUSH 0xc885d4
0099decc : LEA ESI,[ESP + 0x40]
0099ded0 : CALL 0x00404750
0099ded5 : ADD ESP,0x14
0099ded8 : MOV byte ptr [ESP + 0xc0],0x1
0099dee0 : PUSH -0x1
0099dee2 : PUSH 0x0
0099dee4 : PUSH EAX
0099dee5 : LEA ECX,[ESP + 0x70]
0099dee9 : CALL 0x00405eb0
0099deee : MOV byte ptr [ESP + 0xc0],0x0
0099def6 : CMP dword ptr [ESP + 0x44],0x8
0099defb : JC 0x0099df06
0099defd : MOV ECX,dword ptr [ESP + 0x30]
0099df01 : CALL 0x006f04e0
0099df06 : PUSH 0x1
0099df08 : XOR EDX,EDX
0099df0a : PUSH 0xc885f8
0099df0f : LEA ESI,[ESP + 0x6c]
0099df13 : MOV dword ptr [ESP + 0x4c],0x7
0099df1b : MOV dword ptr [ESP + 0x48],0x0
0099df23 : MOV word ptr [ESP + 0x38],DX
0099df28 : CALL 0x00404870
0099df2d : TEST EDI,EDI
0099df2f : JNZ 0x0099dfc8
0099df35 : PUSH 0xc885fc
0099df3a : LEA ECX,[ESP + 0x30]
0099df3e : CALL 0x00406460
0099df43 : MOV byte ptr [ESP + 0xc0],0x2
0099df4b : MOV ECX,dword ptr [0x0172491c]
0099df51 : LEA EAX,[ESP + 0x2c]
0099df55 : PUSH EAX
0099df56 : LEA EDI,[ESP + 0x4c]
0099df5a : CALL 0x0081d120
0099df5f : MOV byte ptr [ESP + 0xc0],0x3
0099df67 : PUSH -0x1
0099df69 : XOR ESI,ESI
0099df6b : PUSH ESI
0099df6c : PUSH EAX
0099df6d : LEA ECX,[ESP + 0x70]
0099df71 : CALL 0x00405c30
0099df76 : MOV byte ptr [ESP + 0xc0],0x2
0099df7e : CMP dword ptr [ESP + 0x60],0x8
0099df83 : JC 0x0099df8e
0099df85 : MOV ECX,dword ptr [ESP + 0x4c]
0099df89 : CALL 0x006f04e0
0099df8e : XOR ECX,ECX
0099df90 : MOV EDI,0x7
0099df95 : MOV dword ptr [ESP + 0x60],EDI
0099df99 : MOV dword ptr [ESP + 0x5c],ESI
0099df9d : MOV word ptr [ESP + 0x4c],CX
0099dfa2 : MOV byte ptr [ESP + 0xc0],CL
0099dfa9 : CMP dword ptr [ESP + 0x44],0x8
0099dfae : JC 0x0099dfb9
0099dfb0 : MOV ECX,dword ptr [ESP + 0x30]
0099dfb4 : CALL 0x006f04e0
0099dfb9 : XOR EDX,EDX
0099dfbb : MOV dword ptr [ESP + 0x44],EDI
0099dfbf : MOV dword ptr [ESP + 0x40],ESI
0099dfc3 : MOV word ptr [ESP + 0x30],DX
0099dfc8 : MOV EAX,[0x00da9894]
0099dfcd : MOV EAX,dword ptr [EAX]
0099dfcf : TEST EAX,EAX
0099dfd1 : JZ 0x0099e007
0099dfd3 : CMP dword ptr [EAX + 0x114],0x0
0099dfda : JZ 0x0099e007
0099dfdc : CMP dword ptr [ESP + 0x7c],0x8
0099dfe1 : MOV EAX,dword ptr [EAX + 0x114]
0099dfe7 : MOV ECX,dword ptr [ESP + 0x68]
0099dfeb : JNC 0x0099dff1
0099dfed : LEA ECX,[ESP + 0x68]
0099dff1 : MOV EDX,dword ptr [EAX]
0099dff3 : PUSH ECX
0099dff4 : PUSH 0xc88630
0099dff9 : PUSH 0xc88634
0099dffe : PUSH EAX
0099dfff : MOV EAX,dword ptr [EDX + 0x4]
0099e002 : CALL EAX
0099e004 : ADD ESP,0x10
0099e007 : CMP byte ptr [0x00da9877],0x0
0099e00e : JZ 0x0099e078
0099e010 : MOV ECX,dword ptr [EBX + 0x4]
0099e013 : MOV EDX,dword ptr [EBX + 0x40]
0099e016 : MOV EAX,dword ptr [ESP + 0x28]
0099e01a : MOV EDI,dword ptr [ECX + 0x1a8]
0099e020 : MOV ECX,dword ptr [EAX]
0099e022 : PUSH EDX
0099e023 : PUSH ECX
0099e024 : PUSH 0xc88644
0099e029 : LEA ESI,[ESP + 0x54]
0099e02d : CALL 0x00404750
0099e032 : ADD ESP,0xc
0099e035 : MOV byte ptr [ESP + 0xc0],0x4
0099e03d : MOV EDX,dword ptr [EDI]
0099e03f : PUSH 0x4
0099e041 : PUSH EAX
0099e042 : MOV EAX,dword ptr [EDX + 0x44]
0099e045 : MOV ECX,EDI
0099e047 : CALL EAX
0099e049 : MOV byte ptr [ESP + 0xc0],0x0
0099e051 : CMP dword ptr [ESP + 0x60],0x8
0099e056 : JC 0x0099e061
0099e058 : MOV ECX,dword ptr [ESP + 0x4c]
0099e05c : CALL 0x006f04e0
0099e061 : XOR ECX,ECX
0099e063 : MOV dword ptr [ESP + 0x60],0x7
0099e06b : MOV dword ptr [ESP + 0x5c],0x0
0099e073 : MOV word ptr [ESP + 0x4c],CX
0099e078 : MOV dword ptr [ESP + 0xc0],0xffffffff
0099e083 : CMP dword ptr [ESP + 0x7c],0x8
0099e088 : JC 0x0099e093
0099e08a : MOV ECX,dword ptr [ESP + 0x68]
0099e08e : CALL 0x006f04e0
0099e093 : XOR EDX,EDX
0099e095 : MOV dword ptr [ESP + 0x7c],0x7
0099e09d : MOV dword ptr [ESP + 0x78],0x0
0099e0a5 : MOV word ptr [ESP + 0x68],DX
0099e0aa : MOV ECX,dword ptr [ESP + 0xb8]
0099e0b1 : MOV dword ptr FS:[0x0],ECX
0099e0b8 : POP ECX
0099e0b9 : POP EDI
0099e0ba : POP ESI
0099e0bb : POP EBX
0099e0bc : MOV ECX,dword ptr [ESP + 0x70]
0099e0c0 : XOR ECX,ESP
0099e0c2 : CALL 0x00633e6b
0099e0c7 : MOV ESP,EBP
0099e0c9 : POP EBP
0099e0ca : RET 0x4
