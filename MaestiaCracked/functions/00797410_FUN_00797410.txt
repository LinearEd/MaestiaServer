PROGRAM  : Maestia.exe
FUNCTION : FUN_00797410
ENTRY    : 00797410
BODY     : [[00797410, 007974c5] [007974d0, 007977b8]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00797410(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int *in_ECX;
  int *piVar4;
  int *piVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  undefined **local_e8 [33];
  undefined1 local_64 [4];
  undefined2 local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  undefined2 local_44;
  undefined4 local_34;
  uint local_30;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  int local_1c;
  int *local_18;
  int *local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00b198c8;
  local_10 = ExceptionList;
  uVar2 = DAT_00d66fa0 ^ (uint)&stack0xfffffffc;
  ExceptionList = &local_10;
  in_ECX[0x6c] = DAT_01720f20;
  in_ECX[0x6d] = DAT_01720f24;
  in_ECX[0x6e] = DAT_01720f28;
  in_ECX[0x6f] = DAT_01720f20;
  in_ECX[0x70] = DAT_01720f24;
  in_ECX[0x71] = DAT_01720f28;
  *(undefined1 *)(in_ECX + 0x8b) = 1;
  *(undefined1 *)((int)in_ECX + 0x22d) = 0;
  piVar5 = (int *)(in_ECX[0xb3] - in_ECX[0xb2] >> 2);
  local_1c = 0;
  piVar4 = in_ECX;
  local_18 = piVar5;
  local_14 = in_ECX;
  if (0 < (int)piVar5) {
    do {
      iVar3 = local_1c * 4;
      piVar4 = (int *)(local_14[0xb2] + iVar3);
      if (*(int *)(local_14[0xb2] + iVar3) != 0) {
        piVar1 = (int *)*piVar4;
        if (*(int *)(*piVar1 + 4) == 0x12345678) {
          if (*(int *)(piVar1[1] + 4) == 0x12345678) {
            piVar4 = *(int **)*piVar4;
            if (*(char *)((int)piVar4 + 0x5d) != '\0') {
              (**(code **)(*piVar4 + 0x14))(uVar2);
            }
            local_24 = (float)piVar4[0x2e];
            local_28 = (float)piVar4[0x2f];
            local_2c = (float)piVar4[0x30];
            piVar4 = *(int **)(*(int *)(local_14[0xb2] + iVar3) + 4);
            if (*(char *)((int)piVar4 + 0x5d) != '\0') {
              (**(code **)(*piVar4 + 0x14))();
            }
            fVar8 = (float)piVar4[0x30];
            fVar6 = (float)piVar4[0x2e];
            fVar7 = (float)piVar4[0x2f];
            local_20 = fVar8;
            if (local_2c < fVar8) {
              local_20 = local_2c;
            }
            fVar10 = fVar7;
            if (local_28 < fVar7) {
              fVar10 = local_28;
            }
            fVar9 = fVar6;
            if (local_24 < fVar6) {
              fVar9 = local_24;
            }
            if (fVar8 < local_2c) {
              fVar8 = local_2c;
            }
            if (fVar7 < local_28) {
              fVar7 = local_28;
            }
            if (fVar6 < local_24) {
              fVar6 = local_24;
            }
            in_ECX[0x6c] = (int)fVar9;
            in_ECX[0x6d] = (int)fVar10;
            in_ECX[0x6e] = (int)local_20;
            in_ECX[0x6f] = (int)fVar6;
            in_ECX[0x70] = (int)fVar7;
            in_ECX[0x71] = (int)fVar8;
            *(undefined1 *)(in_ECX + 0x8b) = 0;
            *(undefined1 *)((int)in_ECX + 0x22d) = 1;
            FUN_0079e8b0();
            piVar5 = local_18;
          }
          else {
            local_4c = 7;
            local_50 = 0;
            local_60 = 0;
            FUN_00406360(L"dangling pointer!!",0x12);
            local_8 = 1;
            if ((int *)*DAT_00da98e8 != (int *)0x0) {
              (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                        (L"AvaLib::AvaFxRayNode::UpdateBounds",0x1cd,local_64);
            }
            local_8 = 0xffffffff;
            if (7 < local_4c) {
                    /* WARNING: Subroutine does not return */
              FUN_006f04e0();
            }
            local_4c = 7;
            local_50 = 0;
            local_60 = 0;
          }
        }
        else {
          local_30 = 7;
          local_34 = 0;
          local_44 = 0;
          FUN_00406360(L"dangling pointer!!",0x12);
          local_8 = 0;
          if ((int *)*DAT_00da98e8 != (int *)0x0) {
            (**(code **)(*(int *)*DAT_00da98e8 + 0x14))
                      (L"AvaLib::AvaFxRayNode::UpdateBounds",0x1c7,local_48);
          }
          local_8 = 0xffffffff;
          if (7 < local_30) {
                    /* WARNING: Subroutine does not return */
            FUN_006f04e0();
          }
          local_30 = 7;
          local_34 = 0;
          local_44 = 0;
        }
      }
      local_1c = local_1c + 1;
      piVar4 = local_14;
    } while (local_1c < (int)piVar5);
  }
  if (piVar4[2] != 0) {
    EnterCriticalSection((LPCRITICAL_SECTION)(piVar4[2] + 4));
  }
  local_8 = 2;
  local_18 = (int *)piVar4[0xe];
  piVar5 = (int *)*local_18;
  if (piVar5 != local_18) {
    do {
      if ((int *)piVar5[9] != (int *)0x0) {
        iVar3 = (**(code **)(*(int *)piVar5[9] + 0x1c))();
        if (iVar3 - 2U < 8) {
          FUN_0043d910(local_e8);
          local_8._0_1_ = 3;
          FUN_0079eab0();
          local_8 = CONCAT31(local_8._1_3_,2);
          local_e8[0] = &PTR_FUN_00cd083c;
        }
        else if ((iVar3 != 1) && (iVar3 == 0xb)) {
          FUN_0079eab0();
        }
      }
      piVar5 = (int *)*piVar5;
    } while (piVar5 != local_18);
  }
  local_8 = 0xffffffff;
  if (piVar4[2] != 0) {
    LeaveCriticalSection((LPCRITICAL_SECTION)(piVar4[2] + 4));
  }
  (**(code **)(*piVar4 + 0xd0))();
  ExceptionList = local_10;
  return;
}



============================================================
DISASSEMBLY
============================================================
00797410 : PUSH EBP
00797411 : MOV EBP,ESP
00797413 : PUSH -0x1
00797415 : PUSH 0xb198c8
0079741a : MOV EAX,FS:[0x0]
00797420 : PUSH EAX
00797421 : SUB ESP,0xd8
00797427 : PUSH EBX
00797428 : PUSH ESI
00797429 : PUSH EDI
0079742a : MOV EAX,[0x00d66fa0]
0079742f : XOR EAX,EBP
00797431 : PUSH EAX
00797432 : LEA EAX,[EBP + -0xc]
00797435 : MOV FS:[0x0],EAX
0079743b : MOV EBX,ECX
0079743d : MOV dword ptr [EBP + -0x10],EBX
00797440 : MOVSS XMM0,dword ptr [0x01720f20]
00797448 : MOVSS dword ptr [EBX + 0x1b0],XMM0
00797450 : MOVSS XMM0,dword ptr [0x01720f24]
00797458 : LEA ESI,[EBX + 0x1ac]
0079745e : MOVSS dword ptr [ESI + 0x8],XMM0
00797463 : MOVSS XMM0,dword ptr [0x01720f28]
0079746b : MOVSS dword ptr [ESI + 0xc],XMM0
00797470 : MOVSS XMM0,dword ptr [0x01720f20]
00797478 : MOVSS dword ptr [ESI + 0x10],XMM0
0079747d : MOVSS XMM0,dword ptr [0x01720f24]
00797485 : MOVSS dword ptr [ESI + 0x14],XMM0
0079748a : MOVSS XMM0,dword ptr [0x01720f28]
00797492 : MOVSS dword ptr [ESI + 0x18],XMM0
00797497 : MOV byte ptr [ESI + 0x80],0x1
0079749e : MOV byte ptr [ESI + 0x81],0x0
007974a5 : MOV EDI,dword ptr [EBX + 0x2cc]
007974ab : SUB EDI,dword ptr [EBX + 0x2c8]
007974b1 : XOR EAX,EAX
007974b3 : SAR EDI,0x2
007974b6 : MOV dword ptr [EBP + -0x14],EDI
007974b9 : MOV dword ptr [EBP + -0x18],EAX
007974bc : TEST EDI,EDI
007974be : JLE 0x007976f8
007974c4 : JMP 0x007974d0
007974d0 : LEA EBX,[EAX*0x4 + 0x0]
007974d7 : MOV EAX,dword ptr [EBP + -0x10]
007974da : MOV ECX,dword ptr [EAX + 0x2c8]
007974e0 : CMP dword ptr [ECX + EBX*0x1],0x0
007974e4 : LEA EAX,[ECX + EBX*0x1]
007974e7 : JZ 0x007976e6
007974ed : MOV ECX,dword ptr [EAX]
007974ef : MOV EDX,dword ptr [ECX]
007974f1 : CMP dword ptr [EDX + 0x4],0x12345678
007974f8 : JZ 0x00797569
007974fa : PUSH 0x12
007974fc : XOR EAX,EAX
007974fe : XOR EBX,EBX
00797500 : PUSH 0xc15758
00797505 : LEA ECX,[EBP + -0x44]
00797508 : MOV dword ptr [EBP + -0x2c],0x7
0079750f : MOV dword ptr [EBP + -0x30],EBX
00797512 : MOV word ptr [EBP + -0x40],AX
00797516 : CALL 0x00406360
0079751b : MOV dword ptr [EBP + -0x4],EBX
0079751e : MOV ECX,dword ptr [0x00da98e8]
00797524 : MOV ECX,dword ptr [ECX]
00797526 : CMP ECX,EBX
00797528 : JZ 0x0079753f
0079752a : MOV EDX,dword ptr [ECX]
0079752c : MOV EDX,dword ptr [EDX + 0x14]
0079752f : LEA EAX,[EBP + -0x44]
00797532 : PUSH EAX
00797533 : PUSH 0x1c7
00797538 : PUSH 0xc15780
0079753d : CALL EDX
0079753f : MOV dword ptr [EBP + -0x4],0xffffffff
00797546 : CMP dword ptr [EBP + -0x2c],0x8
0079754a : JC 0x00797554
0079754c : MOV ECX,dword ptr [EBP + -0x40]
0079754f : CALL 0x006f04e0
00797554 : XOR EAX,EAX
00797556 : MOV dword ptr [EBP + -0x2c],0x7
0079755d : MOV dword ptr [EBP + -0x30],EBX
00797560 : MOV word ptr [EBP + -0x40],AX
00797564 : JMP 0x007976e6
00797569 : MOV ECX,dword ptr [ECX + 0x4]
0079756c : CMP dword ptr [ECX + 0x4],0x12345678
00797573 : JZ 0x007975e7
00797575 : PUSH 0x12
00797577 : XOR EDX,EDX
00797579 : XOR EBX,EBX
0079757b : PUSH 0xc157c8
00797580 : LEA ECX,[EBP + -0x60]
00797583 : MOV dword ptr [EBP + -0x48],0x7
0079758a : MOV dword ptr [EBP + -0x4c],EBX
0079758d : MOV word ptr [EBP + -0x5c],DX
00797591 : CALL 0x00406360
00797596 : MOV dword ptr [EBP + -0x4],0x1
0079759d : MOV EAX,[0x00da98e8]
007975a2 : MOV ECX,dword ptr [EAX]
007975a4 : CMP ECX,EBX
007975a6 : JZ 0x007975bd
007975a8 : MOV EDX,dword ptr [ECX]
007975aa : MOV EDX,dword ptr [EDX + 0x14]
007975ad : LEA EAX,[EBP + -0x60]
007975b0 : PUSH EAX
007975b1 : PUSH 0x1cd
007975b6 : PUSH 0xc157f0
007975bb : CALL EDX
007975bd : MOV dword ptr [EBP + -0x4],0xffffffff
007975c4 : CMP dword ptr [EBP + -0x48],0x8
007975c8 : JC 0x007975d2
007975ca : MOV ECX,dword ptr [EBP + -0x5c]
007975cd : CALL 0x006f04e0
007975d2 : XOR EAX,EAX
007975d4 : MOV dword ptr [EBP + -0x48],0x7
007975db : MOV dword ptr [EBP + -0x4c],EBX
007975de : MOV word ptr [EBP + -0x5c],AX
007975e2 : JMP 0x007976e6
007975e7 : MOV ECX,dword ptr [EAX]
007975e9 : MOV EDI,dword ptr [ECX]
007975eb : CMP byte ptr [EDI + 0x5d],0x0
007975ef : JZ 0x007975fa
007975f1 : MOV EDX,dword ptr [EDI]
007975f3 : MOV EAX,dword ptr [EDX + 0x14]
007975f6 : MOV ECX,EDI
007975f8 : CALL EAX
007975fa : MOV ECX,dword ptr [EBP + -0x10]
007975fd : MOV EAX,dword ptr [ECX + 0x2c8]
00797603 : MOVSS XMM7,dword ptr [EDI + 0xb8]
0079760b : MOVSS XMM5,dword ptr [EDI + 0xbc]
00797613 : MOVSS XMM3,dword ptr [EDI + 0xc0]
0079761b : MOV EDX,dword ptr [EAX + EBX*0x1]
0079761e : MOV EDI,dword ptr [EDX + 0x4]
00797621 : ADD EAX,EBX
00797623 : CMP byte ptr [EDI + 0x5d],0x0
00797627 : MOVSS dword ptr [EBP + -0x20],XMM7
0079762c : MOVSS dword ptr [EBP + -0x24],XMM5
00797631 : MOVSS dword ptr [EBP + -0x28],XMM3
00797636 : JZ 0x00797650
00797638 : MOV EAX,dword ptr [EDI]
0079763a : MOV EDX,dword ptr [EAX + 0x14]
0079763d : MOV ECX,EDI
0079763f : CALL EDX
00797641 : MOVSS XMM3,dword ptr [EBP + -0x28]
00797646 : MOVSS XMM5,dword ptr [EBP + -0x24]
0079764b : MOVSS XMM7,dword ptr [EBP + -0x20]
00797650 : MOVSS XMM2,dword ptr [EDI + 0xc0]
00797658 : COMISS XMM2,XMM3
0079765b : MOVSS XMM0,dword ptr [EDI + 0xb8]
00797663 : MOVSS XMM1,dword ptr [EDI + 0xbc]
0079766b : JBE 0x00797674
0079766d : MOVSS dword ptr [EBP + -0x1c],XMM3
00797672 : JMP 0x00797679
00797674 : MOVSS dword ptr [EBP + -0x1c],XMM2
00797679 : COMISS XMM1,XMM5
0079767c : JBE 0x00797683
0079767e : MOVAPS XMM6,XMM5
00797681 : JMP 0x00797686
00797683 : MOVAPS XMM6,XMM1
00797686 : COMISS XMM0,XMM7
00797689 : JBE 0x00797690
0079768b : MOVAPS XMM4,XMM7
0079768e : JMP 0x00797693
00797690 : MOVAPS XMM4,XMM0
00797693 : COMISS XMM3,XMM2
00797696 : JBE 0x0079769b
00797698 : MOVAPS XMM2,XMM3
0079769b : COMISS XMM5,XMM1
0079769e : JBE 0x007976a3
007976a0 : MOVAPS XMM1,XMM5
007976a3 : COMISS XMM7,XMM0
007976a6 : JBE 0x007976ab
007976a8 : MOVAPS XMM0,XMM7
007976ab : MOVSS XMM3,dword ptr [EBP + -0x1c]
007976b0 : MOVSS dword ptr [ESI + 0x4],XMM4
007976b5 : MOVSS dword ptr [ESI + 0x8],XMM6
007976ba : MOVSS dword ptr [ESI + 0xc],XMM3
007976bf : MOVSS dword ptr [ESI + 0x10],XMM0
007976c4 : MOVSS dword ptr [ESI + 0x14],XMM1
007976c9 : MOVSS dword ptr [ESI + 0x18],XMM2
007976ce : MOV EAX,ESI
007976d0 : MOV byte ptr [ESI + 0x80],0x0
007976d7 : MOV byte ptr [ESI + 0x81],0x1
007976de : CALL 0x0079e8b0
007976e3 : MOV EDI,dword ptr [EBP + -0x14]
007976e6 : MOV EAX,dword ptr [EBP + -0x18]
007976e9 : INC EAX
007976ea : CMP EAX,EDI
007976ec : MOV dword ptr [EBP + -0x18],EAX
007976ef : JL 0x007974d0
007976f5 : MOV EBX,dword ptr [EBP + -0x10]
007976f8 : MOV EAX,dword ptr [EBX + 0x8]
007976fb : MOV dword ptr [EBP + -0x20],EBX
007976fe : TEST EAX,EAX
00797700 : JZ 0x0079770c
00797702 : ADD EAX,0x4
00797705 : PUSH EAX
00797706 : CALL dword ptr [0x00b85118]
0079770c : MOV dword ptr [EBP + -0x4],0x2
00797713 : MOV EAX,dword ptr [EBX + 0x38]
00797716 : MOV EDI,dword ptr [EAX]
00797718 : MOV dword ptr [EBP + -0x14],EAX
0079771b : CMP EDI,EAX
0079771d : JZ 0x00797783
0079771f : NOP
00797720 : MOV ECX,dword ptr [EDI + 0x24]
00797723 : TEST ECX,ECX
00797725 : JZ 0x0079777c
00797727 : MOV EAX,dword ptr [ECX]
00797729 : MOV EDX,dword ptr [EAX + 0x1c]
0079772c : CALL EDX
0079772e : LEA ECX,[EAX + -0x2]
00797731 : CMP ECX,0x7
00797734 : JA 0x00797762
00797736 : MOV ECX,dword ptr [EDI + 0x24]
00797739 : LEA EDX,[EBP + 0xffffff1c]
0079773f : PUSH EDX
00797740 : CALL 0x0043d910
00797745 : MOV byte ptr [EBP + -0x4],0x3
00797749 : MOV ECX,EAX
0079774b : MOV EAX,ESI
0079774d : CALL 0x0079eab0
00797752 : MOV byte ptr [EBP + -0x4],0x2
00797756 : MOV dword ptr [EBP + 0xffffff1c],0xcd083c
00797760 : JMP 0x0079777c
00797762 : CMP EAX,0x1
00797765 : JZ 0x0079777c
00797767 : CMP EAX,0xb
0079776a : JNZ 0x0079777c
0079776c : MOV EAX,dword ptr [EDI + 0x24]
0079776f : LEA ECX,[EAX + 0x268]
00797775 : MOV EAX,ESI
00797777 : CALL 0x0079eab0
0079777c : MOV EDI,dword ptr [EDI]
0079777e : CMP EDI,dword ptr [EBP + -0x14]
00797781 : JNZ 0x00797720
00797783 : MOV dword ptr [EBP + -0x4],0xffffffff
0079778a : MOV EAX,dword ptr [EBX + 0x8]
0079778d : TEST EAX,EAX
0079778f : JZ 0x0079779b
00797791 : ADD EAX,0x4
00797794 : PUSH EAX
00797795 : CALL dword ptr [0x00b8511c]
0079779b : MOV EAX,dword ptr [EBX]
0079779d : MOV EDX,dword ptr [EAX + 0xd0]
007977a3 : MOV ECX,EBX
007977a5 : CALL EDX
007977a7 : MOV ECX,dword ptr [EBP + -0xc]
007977aa : MOV dword ptr FS:[0x0],ECX
007977b1 : POP ECX
007977b2 : POP EDI
007977b3 : POP ESI
007977b4 : POP EBX
007977b5 : MOV ESP,EBP
007977b7 : POP EBP
007977b8 : RET
