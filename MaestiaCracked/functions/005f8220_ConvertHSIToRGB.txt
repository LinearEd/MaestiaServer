PROGRAM  : Maestia.exe
FUNCTION : ConvertHSIToRGB
ENTRY    : 005f8220
BODY     : [[005f8220, 005f83ba]]

============================================================
DECOMPILED C CODE
============================================================

/* public: static void __stdcall GColor::ConvertHSIToRGB(double,double,double,double *,double
   *,double *) */

void GColor::ConvertHSIToRGB
               (double param_1,double param_2,double param_3,double *param_4,double *param_5,
               double *param_6)

{
  float10 fVar1;
  float10 fVar2;
  float10 fVar3;
  float10 fVar4;
  
                    /* 0x1f8220  67  ?ConvertHSIToRGB@GColor@@SGXNNNPAN00@Z */
  if (param_1 == 0.0) {
    fVar1 = (float10)param_3;
    fVar2 = fVar1;
    fVar3 = fVar1;
  }
  else {
    if ((0.0 < param_1) && (param_1 < 2.0943951023931957)) {
      fVar2 = (float10)FUN_0063c630();
      fVar3 = (float10)FUN_0063bdc0();
      fVar4 = (float10)param_3;
      fVar1 = ((float10)1 - (float10)param_2) * fVar4;
      fVar2 = (float10)(double)fVar2 * ((float10)1 / fVar3) * (float10)1.5;
      fVar2 = ((float10)1.5 + fVar2) * fVar4 - (fVar2 + (float10)0.5) * fVar1;
      *param_4 = (double)((fVar4 * (float10)3.0 - fVar2) - fVar1);
      *param_5 = (double)fVar2;
      *param_6 = (double)fVar1;
      return;
    }
    if ((!NAN(param_1) && 2.0943951023931957 < param_1 != (param_1 == 2.0943951023931957)) &&
       (param_1 < 4.188790204786391)) {
      fVar2 = (float10)FUN_0063c630();
      fVar3 = (float10)FUN_0063bdc0();
      fVar4 = (float10)param_3;
      fVar1 = ((float10)1 - (float10)param_2) * fVar4;
      fVar2 = (float10)(double)fVar2 * ((float10)1 / fVar3) * (float10)1.5;
      fVar2 = ((float10)1.5 + fVar2) * fVar4 - (fVar2 + (float10)0.5) * fVar1;
      *param_4 = (double)fVar1;
      *param_5 = (double)((fVar4 * (float10)3.0 - fVar2) - fVar1);
      *param_6 = (double)fVar2;
      return;
    }
    fVar2 = (float10)FUN_0063c630();
    fVar3 = (float10)FUN_0063bdc0();
    fVar4 = (float10)param_3;
    fVar1 = ((float10)1 - (float10)param_2) * fVar4;
    fVar2 = (float10)(double)fVar2 * ((float10)1 / fVar3) * (float10)1.5;
    fVar3 = ((float10)1.5 + fVar2) * fVar4 - (fVar2 + (float10)0.5) * fVar1;
    fVar2 = (fVar4 * (float10)3.0 - fVar3) - fVar1;
  }
  *param_4 = (double)fVar3;
  *param_5 = (double)fVar1;
  *param_6 = (double)fVar2;
  return;
}



============================================================
DISASSEMBLY
============================================================
005f8220 : FLDZ
005f8222 : FLD ST0
005f8224 : FLD double ptr [ESP + 0x4]
005f8228 : FUCOM
005f822a : FNSTSW AX
005f822c : FSTP ST1
005f822e : TEST AH,0x44
005f8231 : JP 0x005f8244
005f8233 : FSTP ST0
005f8235 : FSTP ST0
005f8237 : FLD double ptr [ESP + 0x14]
005f823b : FLD ST0
005f823d : FLD ST1
005f823f : JMP 0x005f83a2
005f8244 : FCOM
005f8246 : FNSTSW AX
005f8248 : FSTP ST1
005f824a : FLD double ptr [0x00b95648]
005f8250 : TEST AH,0x41
005f8253 : JNZ 0x005f82c9
005f8255 : FCOM
005f8257 : FNSTSW AX
005f8259 : TEST AH,0x41
005f825c : JNZ 0x005f82c9
005f825e : FSTP ST0
005f8260 : FSUB double ptr [0x00b95640]
005f8266 : CALL 0x0063c630
005f826b : FSTP double ptr [ESP + 0x4]
005f826f : FLD double ptr [0x00b8bee8]
005f8275 : CALL 0x0063bdc0
005f827a : FLD1
005f827c : FLD ST0
005f827e : MOV EAX,dword ptr [ESP + 0x1c]
005f8282 : FDIVRP ST2,ST0
005f8284 : MOV ECX,dword ptr [ESP + 0x20]
005f8288 : MOV EDX,dword ptr [ESP + 0x24]
005f828c : FLD double ptr [ESP + 0x4]
005f8290 : FMULP ST2
005f8292 : FSUB double ptr [ESP + 0xc]
005f8296 : FLD double ptr [ESP + 0x14]
005f829a : FMUL ST1
005f829c : FLD double ptr [0x00cdf898]
005f82a2 : FMUL ST3
005f82a4 : FADD ST0,ST3
005f82a6 : FMUL ST1
005f82a8 : FXCH ST3
005f82aa : FADD double ptr [0x00cdf120]
005f82b0 : FMUL ST2
005f82b2 : FSUBP ST3,ST0
005f82b4 : FMUL double ptr [0x00b8bee8]
005f82ba : FSUB ST0,ST2
005f82bc : FSUB ST0,ST1
005f82be : FSTP double ptr [EAX]
005f82c0 : FXCH
005f82c2 : FSTP double ptr [ECX]
005f82c4 : FSTP double ptr [EDX]
005f82c6 : RET 0x24
005f82c9 : FCOMP
005f82cb : FNSTSW AX
005f82cd : TEST AH,0x41
005f82d0 : JP 0x005f834e
005f82d2 : FLD double ptr [0x00b95638]
005f82d8 : FCOMP
005f82da : FNSTSW AX
005f82dc : TEST AH,0x41
005f82df : JNZ 0x005f834e
005f82e1 : FSUB double ptr [0x00b8aa18]
005f82e7 : CALL 0x0063c630
005f82ec : FSTP double ptr [ESP + 0x4]
005f82f0 : FLD double ptr [0x00b8bee8]
005f82f6 : CALL 0x0063bdc0
005f82fb : FLD1
005f82fd : FLD ST0
005f82ff : MOV EAX,dword ptr [ESP + 0x1c]
005f8303 : FDIVRP ST2,ST0
005f8305 : MOV ECX,dword ptr [ESP + 0x20]
005f8309 : MOV EDX,dword ptr [ESP + 0x24]
005f830d : FLD double ptr [ESP + 0x4]
005f8311 : FMULP ST2
005f8313 : FSUB double ptr [ESP + 0xc]
005f8317 : FLD double ptr [ESP + 0x14]
005f831b : FMUL ST1
005f831d : FLD double ptr [0x00cdf898]
005f8323 : FMUL ST3
005f8325 : FADD ST0,ST3
005f8327 : FMUL ST1
005f8329 : FXCH ST3
005f832b : FADD double ptr [0x00cdf120]
005f8331 : FMUL ST2
005f8333 : FSUBP ST3,ST0
005f8335 : FMUL double ptr [0x00b8bee8]
005f833b : FSUB ST0,ST2
005f833d : FSUB ST0,ST1
005f833f : FXCH ST2
005f8341 : FXCH
005f8343 : FSTP double ptr [EAX]
005f8345 : FXCH
005f8347 : FSTP double ptr [ECX]
005f8349 : FSTP double ptr [EDX]
005f834b : RET 0x24
005f834e : FSUB double ptr [0x00b95630]
005f8354 : CALL 0x0063c630
005f8359 : FSTP double ptr [ESP + 0x4]
005f835d : FLD double ptr [0x00b8bee8]
005f8363 : CALL 0x0063bdc0
005f8368 : FLD1
005f836a : FLD ST0
005f836c : FDIVRP ST2,ST0
005f836e : FLD double ptr [ESP + 0x4]
005f8372 : FMULP ST2
005f8374 : FSUB double ptr [ESP + 0xc]
005f8378 : FLD double ptr [ESP + 0x14]
005f837c : FMUL ST1
005f837e : FLD double ptr [0x00cdf898]
005f8384 : FMUL ST3
005f8386 : FADD ST0,ST3
005f8388 : FMUL ST1
005f838a : FXCH ST3
005f838c : FADD double ptr [0x00cdf120]
005f8392 : FMUL ST2
005f8394 : FSUBP ST3,ST0
005f8396 : FMUL double ptr [0x00b8bee8]
005f839c : FSUB ST0,ST2
005f839e : FSUB ST0,ST1
005f83a0 : FXCH
005f83a2 : MOV EAX,dword ptr [ESP + 0x1c]
005f83a6 : FXCH ST2
005f83a8 : MOV ECX,dword ptr [ESP + 0x20]
005f83ac : FSTP double ptr [EAX]
005f83ae : MOV EDX,dword ptr [ESP + 0x24]
005f83b2 : FXCH
005f83b4 : FSTP double ptr [ECX]
005f83b6 : FSTP double ptr [EDX]
005f83b8 : RET 0x24
