PROGRAM  : Maestia.exe
FUNCTION : FUN_00622d60
ENTRY    : 00622d60
BODY     : [[00622d60, 00622e91]]

============================================================
DECOMPILED C CODE
============================================================

void FUN_00622d60(int *param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  
  if (DAT_00d7b458 < 8) {
    *(undefined4 *)(&DAT_00d7b430 + DAT_00d7b458 * 4) = *(undefined4 *)(*param_1 + 300);
    DAT_00d7b458 = DAT_00d7b458 + 1;
  }
  iVar4 = DAT_00d7b458;
  iVar2 = *param_1;
  if (iVar2 != 0) {
    *(undefined4 *)(iVar2 + 300) = *(undefined4 *)(iVar2 + 0x124);
  }
  piVar3 = *(int **)(*param_1 + 300);
  while (piVar3 != (int *)0x0) {
    *(undefined4 *)(*param_1 + 300) = **(undefined4 **)(*param_1 + 300);
    iVar2 = *param_1;
    if (piVar3 == *(int **)(iVar2 + 0x124)) {
      iVar4 = *piVar3;
      *(int *)(iVar2 + 0x124) = iVar4;
      if (iVar4 == 0) {
        *(undefined4 *)(iVar2 + 0x128) = 0;
      }
    }
    else if (piVar3 == *(int **)(iVar2 + 0x128)) {
      *(int *)(iVar2 + 0x128) = piVar3[1];
    }
    if ((int *)piVar3[1] != (int *)0x0) {
      *(int *)piVar3[1] = *piVar3;
    }
    if (*piVar3 != 0) {
      *(int *)(*piVar3 + 4) = piVar3[1];
    }
    piVar1 = (int *)(iVar2 + 0x120);
    *piVar1 = *piVar1 + -1;
    if (*piVar1 < 0) {
      *(undefined4 *)(iVar2 + 0x120) = 0;
    }
    *piVar3 = 0;
    piVar3[1] = 0;
    if (((*(code **)(iVar2 + 0x130) != (code *)0x0) && (piVar3[0x4c] != 0)) &&
       ((piVar3[2] & 0xc0000000U) == 0)) {
      (**(code **)(iVar2 + 0x130))(piVar3 + 0x4c);
    }
    if ((piVar3[2] & 0x80000000U) == 0) {
      FUN_00622460(piVar3);
    }
    iVar4 = DAT_00d7b458;
    piVar3 = *(int **)(*param_1 + 300);
  }
  if (iVar4 != 0) {
    DAT_00d7b458 = iVar4 + -1;
    *(undefined4 *)(*param_1 + 300) = (&DAT_00d7b42c)[iVar4];
  }
  FUN_00622460(*param_1);
  *param_1 = 0;
  return;
}



============================================================
DISASSEMBLY
============================================================
00622d60 : MOV EAX,[0x00d7b458]
00622d65 : CMP EAX,0x8
00622d68 : PUSH EBX
00622d69 : PUSH EDI
00622d6a : MOV EDI,dword ptr [ESP + 0xc]
00622d6e : JGE 0x00622d85
00622d70 : MOV ECX,dword ptr [EDI]
00622d72 : MOV EDX,dword ptr [ECX + 0x12c]
00622d78 : MOV dword ptr [EAX*0x4 + 0xd7b430],EDX
00622d7f : INC EAX
00622d80 : MOV [0x00d7b458],EAX
00622d85 : MOV ECX,dword ptr [EDI]
00622d87 : XOR EBX,EBX
00622d89 : CMP ECX,EBX
00622d8b : JZ 0x00622d99
00622d8d : MOV EDX,dword ptr [ECX + 0x124]
00622d93 : MOV dword ptr [ECX + 0x12c],EDX
00622d99 : MOV ECX,dword ptr [EDI]
00622d9b : PUSH ESI
00622d9c : MOV ESI,dword ptr [ECX + 0x12c]
00622da2 : CMP ESI,EBX
00622da4 : JZ 0x00622e68
00622daa : LEA EBX,[EBX]
00622db0 : MOV EAX,dword ptr [EDI]
00622db2 : MOV EDX,dword ptr [EAX + 0x12c]
00622db8 : MOV ECX,dword ptr [EDX]
00622dba : MOV dword ptr [EAX + 0x12c],ECX
00622dc0 : MOV EAX,dword ptr [EDI]
00622dc2 : CMP ESI,dword ptr [EAX + 0x124]
00622dc8 : JNZ 0x00622dde
00622dca : MOV ECX,dword ptr [ESI]
00622dcc : MOV dword ptr [EAX + 0x124],ECX
00622dd2 : CMP ECX,EBX
00622dd4 : JNZ 0x00622def
00622dd6 : MOV dword ptr [EAX + 0x128],EBX
00622ddc : JMP 0x00622def
00622dde : CMP ESI,dword ptr [EAX + 0x128]
00622de4 : JNZ 0x00622def
00622de6 : MOV EDX,dword ptr [ESI + 0x4]
00622de9 : MOV dword ptr [EAX + 0x128],EDX
00622def : MOV ECX,dword ptr [ESI + 0x4]
00622df2 : CMP ECX,EBX
00622df4 : JZ 0x00622dfa
00622df6 : MOV EDX,dword ptr [ESI]
00622df8 : MOV dword ptr [ECX],EDX
00622dfa : MOV ECX,dword ptr [ESI]
00622dfc : CMP ECX,EBX
00622dfe : JZ 0x00622e06
00622e00 : MOV EDX,dword ptr [ESI + 0x4]
00622e03 : MOV dword ptr [ECX + 0x4],EDX
00622e06 : ADD dword ptr [EAX + 0x120],-0x1
00622e0d : JNS 0x00622e15
00622e0f : MOV dword ptr [EAX + 0x120],EBX
00622e15 : MOV dword ptr [ESI],EBX
00622e17 : MOV dword ptr [ESI + 0x4],EBX
00622e1a : MOV EAX,dword ptr [EAX + 0x130]
00622e20 : CMP EAX,EBX
00622e22 : JZ 0x00622e41
00622e24 : CMP dword ptr [ESI + 0x130],EBX
00622e2a : LEA ECX,[ESI + 0x130]
00622e30 : JZ 0x00622e41
00622e32 : TEST dword ptr [ESI + 0x8],0xc0000000
00622e39 : JNZ 0x00622e41
00622e3b : PUSH ECX
00622e3c : CALL EAX
00622e3e : ADD ESP,0x4
00622e41 : TEST dword ptr [ESI + 0x8],0x80000000
00622e48 : JNZ 0x00622e53
00622e4a : PUSH ESI
00622e4b : CALL 0x00622460
00622e50 : ADD ESP,0x4
00622e53 : MOV EAX,dword ptr [EDI]
00622e55 : MOV ESI,dword ptr [EAX + 0x12c]
00622e5b : CMP ESI,EBX
00622e5d : JNZ 0x00622db0
00622e63 : MOV EAX,[0x00d7b458]
00622e68 : POP ESI
00622e69 : CMP EAX,EBX
00622e6b : JZ 0x00622e82
00622e6d : MOV ECX,dword ptr [EDI]
00622e6f : MOV EDX,dword ptr [EAX*0x4 + 0xd7b42c]
00622e76 : DEC EAX
00622e77 : MOV [0x00d7b458],EAX
00622e7c : MOV dword ptr [ECX + 0x12c],EDX
00622e82 : MOV EAX,dword ptr [EDI]
00622e84 : PUSH EAX
00622e85 : CALL 0x00622460
00622e8a : ADD ESP,0x4
00622e8d : MOV dword ptr [EDI],EBX
00622e8f : POP EDI
00622e90 : POP EBX
00622e91 : RET
